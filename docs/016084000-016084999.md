# StackOverflow 问答 16084000-16084999

# ruby-on-rails - rails has_many 通过。没有让它工作

> ID：16084003
> 
> 赞同：0
> 
> 时间：2013-04-18T13:14:22.110
> 
> 标签：ruby-on-rails, has-many-through

我正在尝试通过关联创建一个有很多但我一定搞错了。

我相信我的关联代码是正确的，但是当我尝试创建连接记录时，这就是我得到的。

> 1.9.3p194 :001 > d = Day.find(1) 日负载 (3.9ms) SELECT "days".* FROM "days" WHERE "days"."id" = ? LIMIT 1 [["id", 1]] => # 1.9.3p194 :002 > d.students.create!(:id => 1) (0.1ms) 开始事务 SQL (2.0ms) INSERT INTO "students" ( "created_at", "name", "updated_at") 值 (?, ?, ?) [["created_at", Thu, 18 Apr 2013 12:49:25 UTC +00:00], ["name", nil] , ["updated_at", Thu, 18 Apr 2013 12:49:25 UTC +00:00]] (0.8ms) 回滚事务 ActiveRecord::UnknownAttributeError: 未知属性: day_id

**楷模**

```
# == Schema Information
#
# Table name: students
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Student < ActiveRecord::Base
  attr_accessible :name
  has_many :days, :through => :days_students
  has_many :days_students, :dependent => :destroy, :class_name => "DayStudent"
end

# == Schema Information
#
# Table name: days
#
#  id         :integer          not null, primary key
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Day < ActiveRecord::Base
  #attr_accessible 
  has_many :students, :through => :days_students
  has_many :days_students, :dependent => :destroy, :class_name => "DayStudent"
end

# == Schema Information
#
# Table name: day_students
#
#  id          :integer          not null, primary key
#  students_id :integer
#  days_id     :integer
#  created_at  :datetime         not null
#  updated_at  :datetime         not null
#

class DayStudent < ActiveRecord::Base
  attr_accessible :student_id, :day_id
  belongs_to :day
  belongs_to :student
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:20:20.497

您在表中的属性`day_students`应该是：

*   day_id
*   学生卡

# c# - .NET Uri 中的错误（字符串地址）

> ID：16084005
> 
> 赞同：0
> 
> 时间：2013-04-18T13:14:27.100
> 
> 标签：c#, uri

我有网址：

```
http://localhost:8128/WCF8bcPgServices/EventService/Event/GETPLS/station=E2SKGR&secondstation=%2fE2SKGR 
```

类 Uri 将 URL 转换为：

```
http://localhost:8128/WCF8bcPgServices/EventService/Event/GETPLS/station=E2SKGR&secondstation=/E2SKGR 
```

我托盘调用构造函数

```
new Uri("http://localhost:8128/WCF8bcPgServices/EventService/Event/GETPLS/station=E2SKGR&secondstation=%2fE2SKGR", true) 
```

没有效果

为什么 Uri 类将 %2f 转换为字符 '/'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:20:19.737

%2f 实际上表示“/”。在[asciitable](http://www.asciitable.com/)中，您可以看到 2f 对应于 '/' 字符。

[百分比编码](https://en.wikipedia.org/wiki/Percent-encoding) 是自动发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:24:41.470

~~两者是 100% 等价的。~~

~~`%2f`实际上，只有在路径中使用字符“/”时才需要对它进行编码（在`&`＆符号之前）。在＆符号之后使用`&`（在查询字符串中）没有歧义，因此可以以非转义格式使用。该`Uri`课程很聪明并且知道这一点，因此删除了您在原始网址中应用的不必要的转义。~~

通过不转义 url 中的所有字符，您正在创建明显错误的行为。要么您`?`在原始 url 中的某处省略了一个字符，要么您需要对 url 中的保留字符进行编码以消除歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T21:20:54.627

这似乎已经过时了：

> 构造函数已被弃用。请使用新的 Uri（字符串）。dontEscape 参数已弃用，并且始终为 false。[http://go.microsoft.com/fwlink/?linkid=14202](http://go.microsoft.com/fwlink/?linkid=14202)

请参阅[有关它的文档](http://msdn.microsoft.com/en-us/library/9zh9wcb3.aspx)。

**编辑 ：**

如果您仍然需要访问传递给构造函数的完整字符串并避免自动转换，则可以使用属性[Uri.OriginalString](http://msdn.microsoft.com/en-us/library/system.uri.originalstring.aspx)它将准确返回您提供给构造函数的内容。

# c - 通过网络发送的文件的错误检测 - 只能链接到 c 中的 pthread 和数学库

> ID：16084010
> 
> 赞同：0
> 
> 时间：2013-04-18T13:14:41.387
> 
> 标签：c, sockets, network-programming, error-detection

我需要将文件从一台主机传输到另一台主机，但数据可能在两者之间损坏，因此我需要一些错误检测算法。所以我想我可以发送 md5 总和，但我的任务不允许。我们只能链接到 pthread 和数学库。我知道其中一种方法是使用 CRC，但它会很耗时。有什么方法可以使用一些内置函数调用并完成类似于 md5 或校验和的事情吗？

编辑：我调用了任务中提供的 sendto 函数，这可能会破坏数据然后发送它。

# php - 如何在 vtiger crm 中重命名菜单我正在尝试这样做并收到警告

> ID：16084013
> 
> 赞同：1
> 
> 时间：2013-04-18T13:14:48.217
> 
> 标签：php, vtiger

我正在尝试重命名 v Tiger crm 中的菜单项。我用谷歌搜索，但我无法获得正确的信息。我尝试更改菜单项并收到以下警告。

`'contacts'=>'customers' in include/language/en_us.lang.php`

`Warning: Cannot modify header information - headers already sent by (output started at ``vtigercrm/include/language/en_us.lang.php:1) in vtigercrm/index.php on line 606`

`Warning: Cannot modify header information - headers already sent by (output started at ``/vtigercrm/include/language/en_us.lang.php:1) in vtigercrm/index.php on line 608`

`Warning: Cannot modify header information - headers already sent by (output started ``at/vtigercrm/include/language/en_us.lang.php:1) in vtigercrm/index.php on line 610`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:31:28.300

利用

ob_start(); 和 ob_flush();

在您的 index.php 和 en_us.lang.php 页面中，问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:44:25.950

1-该错误表明在开始 php 语句之前有一个空行或 2-您可以将 en_us.lang.php 保存为 utf8 格式。
解决方案：

> 对于 1：在提到的文件的开头和结尾删除之前`<?php`和之后的任何额外行。对于2：使用notepad++将编码转换为 **没有BOM的UTF8**，然后保存。`?>`

# ios - 适用于 iOS 的 SQLCipher，在 armv7s 和 armv 设备上运行

> ID：16084018
> 
> 赞同：1
> 
> 时间：2013-04-18T13:14:59.123
> 
> 标签：ios, xcode, openssl, sqlcipher

所以我今天有些头疼，试图解决这个问题。我已将 SQLCipher 集成到 iOS 应用程序中，在进一步介绍之前，这是我的架构构建设置：

![构建设置](https://i.stack.imgur.com/vkho9.png)

据我了解，这应该只为 armv7s 设备（例如 iPhone 5）构建，当尝试在 armv7 设备上运行时，我完全正确地得到了这个错误：

![呃](https://i.stack.imgur.com/klfNM.png)

所以我尝试将项目的构建架构更改为标准（armv7s，armv7）并构建。这仍然在 armv7s 设备上按预期运行，但在 armv7 设备上我收到以下链接错误：

![构建错误](https://i.stack.imgur.com/Ygru0.png)

所以我很自然地检查了抛出这些错误的库的构建设置，并且它们在有效的体系结构设置中都有 armv7 和 armv7s，所以有谁知道为什么我在 armv7 设备上遇到这些构建错误？我错过了什么？

以下是我正在使用的库的构建设置（openssl-xcode 和 sqlcipher）：

![openssl xcode](https://i.stack.imgur.com/BLyyk.png) ![sqlcipher](https://i.stack.imgur.com/OflIM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T13:07:59.353

要解决这个问题，请阅读 Stephen 上面的评论，然后我做了一个项目清理并重建它。

# emacs - emacs，flyspell，停用“C-”。键绑定

> ID：16084022
> 
> 赞同：5
> 
> 时间：2013-04-18T13:15:10.987
> 
> 标签：emacs, elisp, emacs24, flyspell

我有这个小问题，我有一些键绑定，比如 so`C-. C-x` 或`C-. C-m`. 激活 flyspell 模式后，我无法使用这些命令。在我的 .emacs 文件中，我之前有接下来的 2 行

```
(global-unset-key (kbd "C-."))
(define-key (current-global-map) (kbd "C-.") nil)
(global-set-key (kbd "C-. C-l") 'global-linum-mode) 
```

然后，我的`C-. C-l`作品，但是当flyspell-mode被激活时它没有。绑定到的命令`C-.`是`flyspell-auto-correct-word`. 我试图按如下方式停用它：

```
;; first try
(defun flyspell-auto-correct-word-disable() (define-key (current-local-map) (kbd "C-.") nil))
(add-hook 'flyspell-mode-hook 'flyspell-auto-correct-word-disable)
;; second try
(define-key (current-global-map) [remap flyspell-auto-correct-word] nil) 
```

尝试都不起作用，我该怎么办？我在 Emacs 23 和 24 中尝试过，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T14:16:46.193

关于什么：

```
(eval-after-load "flyspell"
  '(define-key flyspell-mode-map (kbd "C-.") nil)) 
```

您的第一个解决方案几乎是正确的，但您必须记住当前本地地图是由主要模式设置的，而不是次要模式。最好的选择是直接访问`flyspell-mode-map`和修改它（另一种选择是在其中找到它，`minor-mode-map-alist`但我认为它会不必要地复杂）。

此外，我更喜欢将此类特定于模式的设置放入`eval-after-load`（这意味着它们将被评估一次）而不是挂钩（在这种情况下，设置被评估多次：每次一个缓冲区激活时`flyspell-mode`）。但这是一个偏好问题，任何一种方式都可以。

# java - Struts html：选择下拉填充错误说属性属性是强制性的

> ID：16084029
> 
> 赞同：0
> 
> 时间：2013-04-18T13:15:26.510
> 
> 标签：java, jsp, struts

我在需要从数据库值填充下拉列表的应用程序中使用 struts 1.1，并将其设置为在我的操作中显示以下 jsp 的表单 bean。

```
<td width="80%" class="formfield" valign='top'>
    <html:select property="selectedUsedByUserName">
    <html:option value="" >-</html:option>
    <html:optionsCollection property="usedByUserList" label="name" value="staffNo"/>
    </html:select>
</td> 
```

在表单bean中，我在getter和setter下面使用，

```
private UserDTO selectedUsedByUser = null;
private HashMap usedByUserListMap = new HashMap();

public UserDTO[] getUsedByUserList() {
    return (UserDTO[]) usedByUserListMap.values().toArray(new UserDTO[0]);
}

public void setUsedByUserList(UserDTO[] usedByUserList) {
    usedByUserListMap.clear();
    if (usedByUserList != null) {
        for (int i = 0; i < usedByUserList.length; i++) {
            usedByUserListMap.put(
                    String.valueOf(usedByUserList[i].getStaffNo()),
                    usedByUserList[i]);
        }
    }
}

public String getSelectedUsedByUserName() {
    String selectedUsedByUserName = null;
    UserDTO tempSelectedUsedByUser = getSelectedUsedByUser();
    if (tempSelectedUsedByUser != null) {
        selectedUsedByUserName = String.valueOf(tempSelectedUsedByUser
                .getStaffNo());
    }
    return selectedUsedByUserName;
}

public void setSelectedUsedByUserName(String string) {
    UserDTO tempSelectedUsedByUserName = null;
    if (string != null) {
        tempSelectedUsedByUserName = (UserDTO) usedByUserListMap
                .get(string);
    }
    setSelectedUsedByUser(tempSelectedUsedByUserName);
}

public UserDTO getSelectedUsedByUser() {
    return selectedUsedByUser;
}

public void setSelectedUsedByUser(UserDTO usedByUser) {
    this.selectedUsedByUser = usedByUser;
} 
```

但是当我打印异常的堆栈跟踪时，我在下面看到。请问这个异常的原因是什么，

> 根据 TLD 或标记文件，在 org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher. java:373) 在 org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:833) 在 org.apache.jasper 的 org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:201) .compiler.Node$CustomTag.accept(Node.java:1501) at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2291) at org.apache.jasper.compiler.Node$Visitor.visitBody (Node.java:2341) 在 org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:870) 在 org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1501) 在org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2291) 在 org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2347) 在 org.apache.jasper 的 org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2341) .compiler.Node$Root.accept(Node.java:498) at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2291) at org.apache.jasper.compiler.Validator.validate(Validator .java:1853) 在 org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:210) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:435) 在 org.apache.jasper。 JspCompilationContext.compile(JspCompilationContext.java:608) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:360) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486) 在 org .apache.jasper.servlet.JspServlet.service(JspServlet.java:380) 在 javax.servlet.http.HttpServlet。org.apache.catalina.core.ApplicationFilterChain.servletService 上的服务（HttpServlet.java:847）

我已经在 jsp 选择标签中设置了属性属性。我们是否需要在 jsp 加载之前将其设置为一个值。我相信我们使用它来跟踪填充下拉后选择的选项对吗？那么一旦我们选择了一个值struts就会设置选择的值对吗？

# android - 未生成 Blackberry10 开发者证书

> ID：16084030
> 
> 赞同：2
> 
> 时间：2013-04-18T13:15:28.470
> 
> 标签：android, certificate, blackberry-10, code-signing

我正在使用“Android 应用程序运行时”为 Blackberry 10 开发游戏。我已经完成了开发，但是当我要创建开发证书来创建.bar 文件时，它会抛出异常为“**线程“主”java 中的异常.lang.NoSuchMethodError: sun.security.x509.CertAndKeyGen.getSelfCertificate** "。

![在此处输入图像描述](https://i.stack.imgur.com/g89th.png)

我的 barsigner.csk 和 barsigner.db 已经创建。对此可能的解决方案是什么。我只使用模拟器进行测试。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:05:35.850

我能够使用命令行工具解决我的问题。我已经下载了“CommandLineTools_1.5.2”并将“blackberry.tools.SDK”复制到“C:\Eclipse\plugins\net.rim.ejde”中。之后在 cmd "blackberry-keytool -genkeypair -storepass -dname "cn=" * 中编写一个简单的命令。它将生成 author.p12 文件，然后您可以生成调试令牌。:)

# asp.net - 从自定义 jquery 主题添加到 asp.net 项目的内容

> ID：16084031
> 
> 赞同：1
> 
> 时间：2013-04-18T13:15:29.027
> 
> 标签：asp.net, jquery-ui

虽然我之前使用过一点 jQuery UI，但我从未创建过自己的自定义它们。我现在想将此主题添加到我的 asp.net Web 表单项目中。

在 zip 文件夹中有 3 个文件夹，CSS、JS 和 Development Bundle。我知道我需要 CSS 和 JS，但不确定我需要从开发包中添加什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:19:31.077

如果您想对 jQuery UI 本身进行任何更改，则包含开发包。为了在您的项目中使用它，正如您所说，您只需要 CSS 和 JS。

# android - 如何在 Windows 7 x64 上将索尼 xperia sgpt121 平板电脑与 eclipse 连接？

> ID：16084035
> 
> 赞同：1
> 
> 时间：2013-04-18T13:15:34.730
> 
> 标签：android, eclipse, tablet, avd, drivers

我拥有一台型号为 sgpt121fr 的索尼 xperia 平板电脑。

我使用eclipse和google sdk开发android应用程序，我已经成功地将我的智能手机sony连接到eclipse AVD。

但我的平板电脑没有被 eclipse AVD 识别。当我将平板电脑连接到计算机时，它没有被重新识别，并且驱动程序似乎丢失了。他们叫“sgpt12”什么的。我试图在索尼网站上找到它，但没有成功。我找到了这两个地址： [http](http://esupport.sony.com/US/perl/support-info.pl?info_id=878) ://esupport.sony.com/US/perl/support-info.pl?info_id=878 和 [http://developer.sonymobile.com/downloads/drivers/](http://developer.sonymobile.com/downloads/drivers/)

但它涉及平板电脑的先前版本（索尼平板电脑 S）和下一个版本（索尼 z xperia 平板电脑）。那么tablet xperia 2012的驱动在哪里呢？

正如我所说，我已经成功连接了我的索尼智能手机 xperia，所以我知道程序（usb optin..etc），我只是缺少平板电脑 xperia 的驱动程序！

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T14:23:02.690

我终于找到了解决方案。

您必须自己编辑位于 sdk 文件夹中的 android_winusb.inf 文件。我的在 c:\android\android-sdk\extras\google\usb_driver\

然后，在 [Google.NTx86] 和 [Google.NTamd64] 两个部分中，您必须添加同一行：

;SONY Xperia Tablet S %CompositeAdbInterface% = USB_Install, USB\VID_054C&PID_06AD&MI_01

结束重新加载（或更新您的 inf 驱动程序）到 Windows 并重新测试连接。

它对我有用！它适用于日本人：

[http://signalshonan.ddo.jp/modules/d3diary/index.php?page=detail&bid=99](http://signalshonan.ddo.jp/modules/d3diary/index.php?page=detail&bid=99)

它适用于加拿大人：

[http://zfmich.blogspot.fr/2013/03/how-to-connect-sony-xperia-s-tablet.html?showComment=1367590189844#c49206077027504622](http://zfmich.blogspot.fr/2013/03/how-to-connect-sony-xperia-s-tablet.html?showComment=1367590189844#c49206077027504622)

谢谢我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:18:51.120

尝试在此处搜索 table xperia 的驱动程序：

[http://developer.sonymobile.com/downloads/drivers/](http://developer.sonymobile.com/downloads/drivers/)

我认为是：http: [//developer.sonymobile.com/downloads/drivers/xperia-tablet-z-sgp311-sgp312-driver/](http://developer.sonymobile.com/downloads/drivers/xperia-tablet-z-sgp311-sgp312-driver/)

# android - 如何在 Android 中将 gif 分享到 facebook、twitter 等？

> ID：16084043
> 
> 赞同：4
> 
> 时间：2013-04-18T13:15:51.053
> 
> 标签：android, facebook, url, share, gif

我想将 .gif 从我的应用程序分享到 facebook、twitter 等。我可以将 .png 等简单图像分享到 facebook、twitter 但无法分享任何 .gif 图像。实际上，我想从 URL 共享 .gif 图像。因此，起初，我尝试从 sdcard 共享 .gif 图像并成功，但无法从 drawable 和 URL 成功。我怎样才能通过这两种方式共享 .gif 图像？以下代码成功从 sdcard 共享 .gif。

```
File dir = Environment.getExternalStorageDirectory();
File yourFile = new File(dir, "g1.gif");
Uri pngUri = Uri.fromFile(yourFile);

//Not working from URL
//Uri pngUri = Uri.parse("http://www.gamecastor.com/iphoneapps/emoji/gangnamemoji/Group1/g1.gif");

//Not working from drawable
//Uri pngUri = Uri.parse("android.resource://com.example.asd/drawable/g1.gif");

Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("image/*");
shareIntent.putExtra(android.content.Intent.EXTRA_STREAM, pngUri);

//code to share to facebook only
PackageManager pm = getApplicationContext().getPackageManager();
List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
for (final ResolveInfo app : activityList) {
   if ((app.activityInfo.name).contains("facebook")) {
     final ActivityInfo activity = app.activityInfo;
    final ComponentName name = new ComponentName(activity.applicationInfo.packageName,activity.name);
    shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
    shareIntent.setComponent(name);
    startActivity(shareIntent);
    }
 } 
```

# java - 词汇学习计划无法正常工作

> ID：16084058
> 
> 赞同：1
> 
> 时间：2013-04-18T13:16:26.563
> 
> 标签：java

所以这就是代码，它的目的是从列表中给出一个随机单词，让用户输入外部文本文件中的含义，如果正确，它会从列表中删除该单词，否则它会保留该单词并添加将其添加到missedWord 列表中。问题是单词没有从列表中删除，而且我似乎无法打印 ArrayList。谁能帮我解决这个问题？另外，我可以对代码进行任何改进吗？感谢您的所有帮助。

```
import java.io.*;
import java.util.*;

public class WordList1 {
public static void main(String[] args) throws IOException{
    boolean fart = true;

    FileReader fr = new FileReader("WL1.txt");
    BufferedReader br = new BufferedReader(fr);

    Scanner console = new Scanner(System.in);

    ArrayList wordArray = new ArrayList();
    ArrayList missedWords = new ArrayList();

    String input, stringArray[] = new String[2], answer;

    while((input=br.readLine())!=null){
        stringArray = input.split(" ");
        wordArray.add(stringArray);
    }

    while(fart){
        stringArray = (String[]) wordArray.get((int)(Math.random()*(wordArray.size())));
        System.out.println(stringArray[0]);
        answer = console.nextLine();
        if(answer.equalsIgnoreCase(stringArray[1])){
            System.out.println("CORRECT");
            wordArray.remove(stringArray[1]);
        }
        if(!answer.equalsIgnoreCase(stringArray[1])){
            System.out.println("INCORRECT, " + stringArray[1]);
            missedWords.add(stringArray[0]);
        }
        if(answer.equalsIgnoreCase("escape")){
            fart = false;
            System.out.println(missedWords);
        }
        if(answer.equalsIgnoreCase("print"))
            System.out.println(wordArray);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:38:29.777

`System.out.println(wordArray)`将调用`.toString()`您的`ArrayList`，它为您提供有关参考的信息，但不提供列表中的数据。您需要写出**列表中的每个元素，**而不是列表对象本身：

```
System.out.println("Words in the array:");
for (String eachWord : wordArray) {
  System.out.println(eachWord);
} 
```

* * *

现在，这仅在您将列表正确定义为字符串列表时才有效。此定义创建一个包含任何 Java 对象的列表：

```
ArrayList wordArray = new ArrayList(); 
```

最好指定列表中的元素类型。这是通过使用泛型完成的：

```
ArrayList<String> wordArray = new ArrayList<>(); 
```

这假设您`wordArray`实际上是一个单词列表，但是您的代码将**整个数组**添加到`wordArray`列表中。这给了你什么？我想你想要这个：

```
while((input=br.readLine())!=null){
    stringArray = input.split(" ");
    // Add each word, not the array
    wordArray.addAll(Arrays.asList(stringArray));
} 
```

* * *

您的单词没有被删除的问题是一个类似的问题。您的 ArrayList 包含一个字符串数组，但您正在尝试删除单个字符串。调用`.remove()`不会在您的 ArrayList 中找到字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:25:54.283

无需对条件进行两次评估。

代替

```
 if(answer.equalsIgnoreCase(stringArray[1])){
        [...]
    }
    if(!answer.equalsIgnoreCase(stringArray[1])){
        [...]
    } 
```

和

```
 if(answer.equalsIgnoreCase(stringArray[1])) {
        [...]
    } else {
        [...]
    } 
```

如果您将一个变量与多个不同的常量进行比较，请使用“else if”（答案永远不能同时是“escape”和“print”）。并更改顺序以避免 Nullpointer 异常：

```
if("escape".equalsIgnoreCase(answer)) {
    [...]
} else if("print".equalsIgnoreCase(answer)) {
    [...]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:40:36.427

问题在`wordArray.remove(stringArray[1]);`

`wordarray`是一个字符串数组的数组。

所以将该行更改为`wordArray.remove(stringArray)`

# ios - 如果使用 KVO 的特定 obj 如何观察属性变化？

> ID：16084064
> 
> 赞同：1
> 
> 时间：2013-04-18T13:16:51.637
> 
> 标签：ios, objective-c, key-value-observing

我有一个两个控制器，即`aViewController`和`bViewController`。我在`bViewController`（称为`txt1`）中有一个文本字段。我已经声明如下：

**在 bViewController.m 中**：

```
- (void)viewDidLoad
{
    [self addObserver:self forKeyPath:@"txt1.text" options:NSKeyValueObservingOptionNew context:nil];
} 
```

**在 aViewController.m 中**：

```
- (void)viewDidLoad
{      
    bViewController *obj = [[bViewController alloc] init];
    [obj addObserver:self forKeyPath:@"txt1.text" options:NSKeyValueObservingOptionNew context:NULL];

    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    /*
        NSLog(@"%@",keyPath);
        NSLog(@"%@",object);
        NSLog(@"%@",change);
      */
        NSLog(@"%s",__PRETTY_FUNCTION__);
        if ([keyPath isEqualToString:@"txt1.text"]) {
            NSLog(@"text1 content changed");
        }
    } 
```

当我在 txt1 中添加一些文本时（点击返回键后），我收到如下错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '<bViewController: 0x9134560>: An -observeValueForKeyPath:ofObject:change:context: message was received but not handled.
Key path: txt1.text
Observed object: <bViewController: 0x9134560>
Change: {
    kind = 1;
    new = werwetw;
}
Context: 0x0'
*** First throw call stack:
(0x1c92012 0x10cfe7e 0x1c91deb 0xb85406 0xb2267d 0xb2233c 0xb09417 0xb22b24 0xad7d60 0xb21eb5 0xdd707 0xe4b02 0xedda1 0xdc645 0x121fb5 0x1220e1 0xdc4e6 0x2a0a 0xe4d2b 0xed9f8 0x1923cf 0x198f7f 0x198a8c 0x1979fe 0x1a1c72 0x24ddb 0x1227f5 0x1227f5 0x1227f5 0x1227f5 0x1227f5 0x1227f5 0x1227f5 0x1227f5 0x24e35 0x24806 0x24beb 0x16698 0x1beddf9 0x1bedad0 0x1c07bf5 0x1c07962 0x1c38bb6 0x1c37f44 0x1c37e1b 0x1bec7e3 0x1bec668 0x13ffc 0x1fa2 0x1ed5)
libc++abi.dylib: terminate called throwing an exception 
```

谁能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:15:54.123

几点观察：

1.  B`viewDidLoad`正在为其自己的财产添加一个观察者。那是不必要的。

2.  我也想知道B是否已经实施`observeValueForKeyPath`。由于我之前的观点，这没有实际意义，但如果你添加一个观察者，你必须实现`observeValueForKeyPath`. 我觉得这很可能是您的异常的来源。

3.  A 正在创建 B 的本地实例，添加一个观察者，如果你使用 ARC，那么你会让 B 超出范围，被释放，因此你有一个不再存在的对象的观察者。或者如果你不使用 ARC，你不会有这个问题，但你会泄露你的 B 副本。

    您说您要到达 B 并更改文本，所以我必须假设为了简化代码示例，您省略了会阻止此问题表现出来的代码（例如，推送/呈现 B 的代码） ，所以也许这不是问题。但这里的关键点是，在发布具有观察者的项目之前，请确保移除观察者。

4.  与您的问题无关，但 B`viewDidLoad`没有调用`[super viewDidLoad]`.

5.  您向我们展示了观察者的创建，而不是在适当的时间移除观察者。

6.  作为总顾问，在像 iOS 这样的 MVC 环境中，不建议将观察者添加到另一个视图（即`UITextField`. 我会让 B 根据其视图中的更改更新其模型属性，并让 A 作为该模型属性的观察者，而不是 B 的视图层次结构中的任何内容。这在 6.0 之前的 iOS 版本中尤为重要，因为如果 B 随后调用第三个控制器 C，并且出现内存不足的情况，则 B 的视图可能会被释放（并且您不希望观察者查看可能被释放的项目）。

让我感到震惊的是，在我们进一步诊断您的 KVO 之前，您应该演示 A 是如何调用 B 的。

*   它是 A 所追求的控制器吗？在这种情况下，您不应该添加观察者，直到您这样做。

*   B 是子控制器，A 是自定义容器吗？在这种情况下，您必须添加自定义容器调用（例如`addChildController`，等）。

如果您能清楚地阐明 A 和 B 之间的逻辑流程，我们就能更好地帮助您。或者也许更完整的代码片段会有所帮助。也许还可以阐明您要解决的业务问题。

说了这么多，如果你想在视图控制器之间传递数据，有更有效的方法（例如委托协议）。如果您尝试将数据从视图控制器传递回呈现它的控制器，KVO 可能不是正确的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:00:18.277

我真的不明白你在问什么，但在查看了你的代码之后，你似乎想观察用户是否更改了 UITextField 中的文本。

在你的 ViewController.h 添加方法

```
(IBAction)textFieldChanged:(id)sender; 
```

在您的故事板或 XIB 中，您可以将此方法与您的 UITextField 连接，因为*Sent Event*选择V​​alue **Changed**或**Editing Changed**（我不知道 atm）。

在您的 ViewController.m 中实现上述方法

```
(IBAction)textFieldChanged:(id)sender {
    if (![sender isKindOfClass:[UITextField class]]) {
        return;
    }

    UITextField *field = sender;
    NSString *text = field.text;
    // Do something with the text or the field
} 
```

# c++ - 在 C++ 中重载 << 和 >> 以执行小数移位

> ID：16084068
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:16:55.490
> 
> 标签：c++

我试图重载 << 和 >> 运算符以执行小数移位，但我不知道如何做到这一点。例如，我将有一个类 myclass 的成员函数

```
myclass myclass::operator<<(myclass ob2)
{
    //Code in here for overloading <<
    //In the object, there is a float value to perform the shift on
} 
```

任何帮助将不胜感激！谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:46:43.563

一般来说，我建议您保留`<<`非变异，并使用`<<=`原地更改值。

此外，除非无法设置/获取您的类的`float`/`double`成员，否则无需使操作符成为类成员。

```
struct myclass {
    double value;
};

// mutate in-place: take the instance by non-const reference,
// and return a reference to the same instance
myclass& operator<<=(myclass &self, unsigned places) {
    self.value *= std::pow(10, places);
    return self;
}

myclass& operator>>=(myclass &self, unsigned places) {
    self.value /= std::pow(10, places);
    return self;
}

// create a new instance and return it by value
myclass operator<<(myclass const &original, unsigned places) {
    myclass temp(original);
    temp <<= places;
    return temp;
}

myclass operator>>(myclass const &original, unsigned places) {
    myclass temp(original);
    temp >>= places;
    return temp;
} 
```

并使用如下：

```
int main() {
    myclass a = {0.1};
    std::cout << "a := " << a.value << '\n';

    myclass b = a << 1;
    std::cout << "b = (a << 1) := " << b.value << '\n';

    b >>= 1;
    std::cout << "b >>= 1 := " << b.value << '\n';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:23:45.227

你可能想要这个：

```
myclass myclass::operator<<(int digits) const { 
    myclass result;
    result.value = this->value * pow(10, digits);
    return result;
}
myclass myclass::operator>>(int digits) const { 
    myclass result;
    result.value = this->value * pow(0.1, digits);
    return result;
} 
```

这确保它`this`没有改变，所以你必须写

```
number = number << 3; 
```

修改一个数字，所以写的时候

```
otherNumber = number << 3; 
```

`number`正如您在对该问题的评论中所要求的那样，这保持不变。签名中的`const`告诉使用此运算符的代码左侧操作数保持不变。

通常，您还有直接对目标对象进行操作的运算符，这些运算符也包含`=`在其中。从技术上讲，它们与其对应的非赋值运算符无关，因此您应该相应地定义它们以保持一致性：

```
myclass & myclass::operator<<=(int digits) {
    this->value *= pow(10, digits);
    return *this;
}
myclass & myclass::operator>>=(int digits) {
    this->value *= pow(0.1, digits);
    return *this;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T13:21:19.620

据推测，“小数移位”意味着将小数点左移（右，for `operator>>`）指定的位数。

在这种情况下，您可能希望参数是无符号整数：

```
myclass &myclass::operator<<(unsigned digits) { 
     value *= pow(10, digits);
     return *this;
} 
```

# silverlight - 包含多个用户控件时，Silverlight ScrollViewer 不起作用

> ID：16084071
> 
> 赞同：0
> 
> 时间：2013-04-18T13:17:05.727
> 
> 标签：silverlight, xaml

我有一个具有标题区域和内容区域的页面。内容区只包含一个用户控件。我们有一个类结构，AbstractClassA 是所有要显示的类的基类。抽象类 B 和 C 都继承自 A。具体类 B1 和 B2 继承自 B，具体类 C1 和 C2 继承自 C。

然后，该用户控件包含许多显示 A 信息的控件，以及两个附加控件，每个控件一个用于 B 和 C，仅当显示的类属于相关类型时才可见。

然后，这些附加控件显示与其相应抽象类相关的所有字段，以及与具体类相关的附加控件，同样仅在基础类具有正确类型时才显示，然后具有与具体类相关的字段。

这一切都很好，只是我们正在处理的一些类有太多的字段，它们不再适合屏幕了。所以，显而易见的事情 - 将内容包装在滚动查看器中。

唯一的问题是这似乎不起作用。

后续控件的可见性绑定到视图模型上的属性（通过布尔到可见性转换器），该属性确定正在处理的类类型。后备值是折叠的，因此它们开始不可见。不确定所需的大小在随后是否以某种方式无法传递给滚动查看器？由于滚动条没有出现，尽管设置为自动。下面的xml

```
<Grid x:Name="LayoutRoot">
  <!-- Divide the page into a row for the header and 1 further rows which are used to position the content -->
  <Grid.RowDefinitions>
    <RowDefinition Height="{StaticResource HeaderRowHeight}" />
    <RowDefinition Height="*" />
    <RowDefinition Height="100" />
  </Grid.RowDefinitions>

  <Grid Grid.Row="0"
        Grid.Column="0"
        Grid.ColumnSpan="2">
    <!-- Page header -->
  </Grid>

  <!-- Main page content follows -->
  <Grid Grid.Row="1"
        Width="auto">
    <ScrollViewer Height="700"
                  VerticalScrollBarVisibility="Auto">
      <dataEdit:CaseTypeInternalEditControl Height="Auto" />
    </ScrollViewer>
  </Grid>
</Grid> 
```

我也尝试将滚动查看器放在用户控件中，但无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:41:18.397

这个问题并不明显，我需要发布一个后续的子控件，其可见性是这样确定的：

```
 <Canvas Visibility="{Binding Path=CaseIsB, Converter={StaticResource BooleanToVisibilityConverter}, FallbackValue=Collapsed}">
            <dataEditControls:CaseBEditControl DataContext="{Binding CaseBEditViewModel}"  />
        </Canvas >
        <Canvas Visibility="{Binding Path=CaseIsC, Converter={StaticResource BooleanToVisibilityConverter}, FallbackValue=Collapsed}">
            <dataEditControls:CaseCEditControl DataContext="{Binding CaseCEditViewModel}"  />
        </Canvas > 
```

问题是 Canvas 对象的大小为零 - 因此在可见时没有向滚动查看器注册任何内容。一旦我把它换成网格，一切都很好......

# python - 无法识别静止的 .png 文件

> ID：16084080
> 
> 赞同：0
> 
> 时间：2013-04-18T13:17:30.213
> 
> 标签：python, python-requests

我正在使用该`Python-requests`模块从服务器进行休息呼叫。

基于休息 GET 我正在尝试从服务器获取 PNG 图像。

为了处理我正在使用`Python-imaging`库

**这是我的代码**：

```
RESTC_URL = 'http://10.10.10.76:8100/UCSRestService/product/' +getpid + '/callimage'
getclass = Agent()
print "+++++++++++++++++++++=--------------------------------"
getr = getclass.GETT('cdn',RESTC_URL,'apikey','SecretString')
from PIL import Image
from StringIO import StringIO
i = Image.open(StringIO(getr.content))
print i 
```

但它显示

```
cannot identify image file 
```

请告诉我错误的原因可能是什么。

# asp.net-mvc - 获取内容文件的绝对路径

> ID：16084081
> 
> 赞同：27
> 
> 时间：2013-04-18T13:17:31.073
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在 asp.net mvc 视图中是否有任何简单的（内置）方法来获取内容文件夹中文件的绝对路径？

目前我正在使用

```
@Url.Content("~/Content/images/logo.png") 
```

但是返回的路径不是绝对的。

我知道可以为这种情况建立自己的助手，但我想知道是否有更简单的方法......

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-06-01T08:57:59.953

这对我有用：

帮手：

```
using System;
using System.Web;
using System.Web.Mvc;

public static class UrlExtensions
{
    public static string Content(this UrlHelper urlHelper, string contentPath, bool toAbsolute = false)
    {
        var path = urlHelper.Content(contentPath);
        var url = new Uri(HttpContext.Current.Request.Url, path);

        return toAbsolute ? url.AbsoluteUri : path;
    }
} 
```

cshtml中的用法：

```
@Url.Content("~/Scripts/flot/jquery.flot.menuBar.js", true)

// example output:
// http://example.com/directory/Scripts/flot/jquery.flot.menuBar.js 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-25T13:55:13.157

这将生成图像（或文件）的绝对 URL

```
Request.Url.Scheme + "://" + Request.Url.Authority + Url.Content("~/Content/images/logo.png") 
```

这适用于 Asp.net Core

```
Context.Request.Scheme + "://" + Context.Request.Host + Url.Content("~/images/logo.png") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T11:14:28.767

Url.Content 确实返回绝对路径。您想要的是域（和端口）。您可以使用以下方法获取当前域：

```
Request.Url.Authority 
```

然后将此字符串与图像的绝对路径字符串结合起来。它将返回域名，如果您在不同的端口上，还将包括端口号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-18T08:30:10.553

```
new Uri(Request.Url, Url.Content("~/Content/images/logo.png")) 
```

这调用了 Uri 的 .ToString()。您也可以将 Uri 放入变量中并调用 .AbsoluteUri。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:22:40.907

```
HttpContext.Current.Server.MapPath("~/Content/images/logo.png"); 
```

# ember.js - ember.js：动态段和查询

> ID：16084082
> 
> 赞同：0
> 
> 时间：2013-04-18T13:17:31.203
> 
> 标签：ember.js, ember-data, ember-router

我对 ember.js 中的资源有疑问。

给定这些路由器：

```
App.Router.map ->
  @route "index", path: "/"
  @resource "transport_documents", ->
    @resource "transport_document", path: ":transport_document_id" 
```

这条路线：

```
App.TransportDocumentsRoute = Ember.Route.extend
  model: -> App.TransportDocument.find()

App.TransportDocumentRoute = Ember.Route.extend
  model: (params)-> 
    App.TransportDocument.find(params.id) 
```

*   当我导航到`/transport_documents`我的服务器端调用是：`/api/transport_documents`，正如预期的那样
*   当我导航到`/transport_documents/1`我希望这个调用完成时： `/api/transport_documents/1`，但事实并非如此。没有呼叫我的服务器

这是预期的情况吗？如果没有，我应该怎么做才能强制我的应用程序执行此查询？我希望在显示视图中有更多详细信息，而在索引中则更少。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:43:56.880

`params`将包含您指定的动态段名称。在您的情况下，您需要使用：

```
model: (params)-> 
  App.TransportDocument.find(params.transport_document_id) 
```

有关详细信息，请参阅Ember 路由指南中的[此示例](http://emberjs.com/guides/routing/specifying-a-routes-model/#toc_dynamic-models)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:28:52.080

我会保持@c4p 的答案正确，因为它对我有帮助，但问题是：

这取决于您使用的 ember 数据库版本。

请参阅[此处](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)以查看它期望您的关联模型如何格式化

# linux - 无法与远程 IP 建立 JMX 连接，但在另一台机器上它可以工作

> ID：16084090
> 
> 赞同：1
> 
> 时间：2013-04-18T13:17:43.490
> 
> 标签：linux, networking, jmx

情况：我们有一个使用 Java jre 1.6.37 运行的带有实例化应用程序的 VM 所有实例在该 linux VM 上都有一个虚拟 IP 和一个自己的主机名，我可以看到 eth0:1 eth0:2 等。还有所有条目主机中的实例

现在对于其中一个实例，我将 JMX 监控参数添加到 wrapper.conf：

```
wrapper.java.additional.7=-Dcom.sun.management.jmxremote
wrapper.java.additional.8=-Dcom.sun.management.jmxremote.port=6423
wrapper.java.additional.9=-Dcom.sun.management.jmxremote.ssl=false
wrapper.java.additional.10=-Dcom.sun.management.jmxremote.authenticate=false 
```

（我们还尝试添加：-Djava.rmi.server.hostname=YOUR_IP YOUR_APP）

问题：

我重新启动了应用程序并尝试使用 JConsole 从带有 JDK 的 Windows PC 连接到该应用程序。无法连接。当我在机器上 telnet 和端口 6423 时，我可以连接。

分析尝试。

我们还将 JDK 复制到那台 linux 机器上，并在那里进行了尝试，结果相同。所以我拿了另一个虚拟机，同样的应用程序也在使用虚拟 IP 等实例运行。在那里连接是可能的。

对于第一个 VM，没有防火墙阻止连接或类似的东西。`netstat -an |grep 6423`也告诉我它是LISTEN

我不知道为什么它在一个虚拟机上工作，但在另一个虚拟机上却没有，也没有本地调用 jconsole 到该虚拟 IP 和端口 6423

# facebook - Facebook Like 按钮不显示 og:image

> ID：16084091
> 
> 赞同：2
> 
> 时间：2013-04-18T13:17:47.303
> 
> 标签：facebook, facebook-opengraph

我已将以下代码粘贴到我的网站，以实现类似 facebook 的按钮：

```
<div class="fb-like" data-href="http://example.com/blog/article/28" data-send="false" data-width="450" data-layout="button_count" data-show-faces="false"></div> 
```

我有以下元标记：

```
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="123412341234123" />
<meta property="og:url" content="http://example.com/blog/article/28" />
<meta property="og:image" content="http://example.com/images/branding/logo7.png" />
<meta property="og:title" content="Testing Title - Sitename" />
<meta property="og:description" content="some description" /> 
```

我试过 Facebook[对象调试器](https://developers.facebook.com/tools/debug)，它显示所有数据都被正确抓取。**og:image**标记中的图像是 16.78KB 450x450px PNG 图像，它似乎满足我发现的唯一要求（最小宽度和高度为 200x200px）。

当我单击“赞”按钮时，它正在工作，但是与“赞”相关联的图像会出现我也实现的“Pin It”按钮。

我的问题是我错过了什么，有没有办法显示每个喜欢的正确图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:50:01.580

所有 og 标签都需要正确匹配。精确准确的 url 标签需要被 facebook 抓取。

例如

示例 .com

不一样

www dot 示例 dot com

不一样

www dot example dot com/index dot php

我不确定匹配需要多精确，但这确实很重要。

此外，Canonical URL 似乎需要匹配 Fetched URL，并且它们似乎都需要匹配导航到的 url。创建指向相同抓取网址的替代相对链接并不好。

# delphi - 如何从第三方覆盖 Delphi 对象

> ID：16084099
> 
> 赞同：1
> 
> 时间：2013-04-18T13:18:07.967
> 
> 标签：delphi, inheritance, delphi-2007

我在 Delphi 2007 中使用第三方报告 VCL 包。我想为这个包的几个对象所具有的每个函数添加一些代码。但是，我想这样做，而不必在我的应用程序中重新编写大量代码。我现在拥有的是以下内容：

```
TBaseReport (Base object with all abstract functions)
     |
     --------------
     |            |
TViewReport   TPrintReport  (Descendents that do the actual implementation of the functions) 
```

报告包在报告打印过程中调用了许多事件。每个事件都通过 TObject 参数传递一个 TViewReport（如果在屏幕上查看报告）或 TPrintReport（如果直接打印）的实例。例如：

```
Function TForm1.BeforePrint(Sender: TObject);
Begin
  With TBaseReport(Sender) Do // Type cast as TBaseReport so code works with either
  Begin                       //  TViewReport or TPrintReport.
    .... code here ...
  End;
End; 
```

我想做的是创建一个新的 TBaseReport 后代（比如 TMyBaseReport），其中一些相同的函数被覆盖，以便在调用继承的代码之前先调用我自己的一些代码。当然，我的问题是我无法覆盖 TBaseReport，因为它的所有功能都是抽象的。所以我创建了两个对象来覆盖 TViewReport 和 TPrintReport。然后我尝试了以下方法：

```
Type
  TMyReportPrinter = Class(TReportPrinter)
  Public
    Procedure PrintText(X, Y: Integer; S: String); Override;
  End;

  TMyViewReport = Class(TViewReport)
  Public
    Procedure PrintText(X, Y: Integer; S: String); Override;
  End;

.
.
.

Function TForm1.BeforePrint(Sender: TObject);
Var
  Rpt: TBaseReport;
Begin
  If Sender Is TReportPrinter Then 
    Rpt := TMyReportPrinter(Sender) 
  Else
    Rpt := TMyViewReport(Sender);
  With Rpt Do 
  Begin       
    PrintText(1.5, 1.5, 'Foobar');
    .... same original code here ...
  End;
End;

Procedure TMyReportPrinter.PrintText(X, Y: Integer; S: String); 
Begin
  Inherited;
  LogMsg('PrintText called.');
End;

Procedure TMyViewReport.PrintText(X, Y: Integer; S: String); 
Begin
  Inherited;
  LogMsg('PrintText called.');
End; 
```

但是 TMyReportPrinter 和 TMyViewReport 中的代码永远不会被调用。如果我对对象的创建没有任何控制权，是否可以覆盖对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:45:49.700

我假设 PrintText 未定义为虚拟方法，因此您不能覆盖它。

也许有一个事件（如 OnBeforePrintText）可用于添加额外的功能。

否则，您应该重新定义一些功能。

**静态链接和动态链接的区别**

当您有一个具有两个方法的类和一个覆盖其中一个方法的子类时：

```
type
  TBaseClass = class 
  public
    procedure MethodA; // Calls MethodB
    procedure MethodB;
  end;

  TSubClass = class (TBaseClass)
  public
    procedure MethodB;
  end; 
```

现在你有了一个 TSubClass 对象并调用 MethodA。然后调用 TBaseClass 的 MethodB。这称为静态链接。TSubClass 的 MethodB 不被 TBaseClass 的 MethodA 调用。

但是如果您将 MethodB 声明为虚拟，并在 TSubClass 中使用覆盖：

```
type
  TBaseClass = class 
  public
    procedure MethodA; // Calls MethodB
    procedure MethodB; virtual;
  end;

  TSubClass = class (TBaseClass)
  public
    procedure MethodB; override;
  end; 
```

现在 MethodB 是动态链接的。因此，当您在类 TSubClass 的对象上调用 MethodA 时，会调用 TSubClass 的 MethodB。

# sql - 通过存储过程创建数据库副本

> ID：16084104
> 
> 赞同：1
> 
> 时间：2013-04-18T13:18:21.990
> 
> 标签：sql, sql-server, stored-procedures

我有示例数据库，在我的 asp.net 项目中，我需要使用另一个名称创建该数据库的副本。我正在考虑用存储过程来做这件事。

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:21:29.790

完成此操作的最简单方法是对数据库进行备份和还原：

```
backup database YourDatabaseName
to disk = 'C:\Yourbackupdir\BackupFile.bak'
with copy_only;
go 
```

然后您可以相应地进行还原：

```
restore database YourNewDatabaseName
from disk = 'C:\Yourbackupdir\BackupFile.bak';
go 
```

同样，如果这是在同一台服务器上，或者如果您没有类似的目录结构供数据库文件使用，那么您可能需要指定`MOVE`子句：

```
restore database YourNewDatabaseName
from disk = 'C:\Yourbackupdir\BackupFile.bak'
with
    move 'YourDataFileName' to 'C:\NewLocation\DataFile1.mdf',
    move 'YourLogFileName' to 'C:\NewLocation\LogFile1.ldf';
go 
```

您可以通过运行获取文件列表`restore filelistonly from disk = 'C:\Yourbackupdir\BackupFile.bak';`。

# java - 如何从Hashmap中获取前四个值

> ID：16084109
> 
> 赞同：-3
> 
> 时间：2013-04-18T13:18:38.390
> 
> 标签：java, hashmap

这里`HashMap<Integer, String>`用于存储值，并`String`与此值相关联。据我所知，当您将 value 和`String`放入 时`HashMap`，它将按值（因为这里的值是`Integer`）按升序排序。
**现在，我想做的是从rank1到rank4获取值，如果我不知道键的值，我该怎么做？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:20:57.917

不，这是不正确的：

> hashmap，将按值排序

HashMap 不*按键*排序。如果你想要这样，你应该使用 TreeMap。它使用键的自然顺序。

如果您使用 LinkedHashMap，它将为您保留插入顺序。也许知道这会很有用。

您最好花更少的时间在这里提出问题，通过花更多的时间仔细阅读实现该`Map`接口的所有类的 javadocs 来更好地回答这些问题。也许浏览收藏教程也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:23:31.530

`TreeMap`根据其键的自然顺序或在地图创建时提供的比较器排序的用途。

`HashMap`不维持秩序。

有关更多信息，请参阅[树图](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:23:48.983

Hashmap 不会对您放入 hashmap 的值进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:21:55.997

`HashMap`从不排序。

`TreeMap`，相反是按自然顺序排序的`Integer`。

因此，您可以使用 a`TreeMap`并对其进行迭代来检索前 4 个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T13:21:58.530

`HashMap`不对任何东西进行排序，它根据元素的 hascode 和 equals 方法插入元素。`Treemap`如果您需要对元素进行排序，请改用。

# jquery - 站点前端中的 location.reload() 干扰站点的管理后端

> ID：16084110
> 
> 赞同：0
> 
> 时间：2013-04-18T13:18:41.690
> 
> 标签：jquery, drupal-7, drupal-ajax

这是我的代码：

```
// Reload screen after submission and completion of AJAX actions
$('.view-whiteboard, .view-whiteboard-full').ajaxStop(function() {
  location.reload();
}); 
```

我在我的 Drupal 网站的前端运行此代码，但由于某种原因，当我在后端管理面板中提交/保存任何内容时，上面的代码片段会使页面重新加载。

我很困惑为什么要这样做，因为我已经在代码中定义了应该特定于前端表单的类名。

我是否在上面的代码中遗漏了一些东西，所以我在每次提交表单时都会触发 location.reload() ？

任何帮助都会很棒。谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:01:38.207

从 jQuery 1.8 开始，.ajaxStop() 方法只能附加到文档。您可以通过创建一个运行 ajaxStop 一次的 .click 函数来解决此问题：

```
$(document).ready(function(){
    $(".view-whiteboard, .view-whiteboard-full").click(function(){
        $(document).one("ajaxStop", function() {
            location.reload();
        });
    });
}); 
```

否则，只需将公共主题与管理主题分开，这样它们就不会使用相同的 javascript（必须禁用覆盖模块）。

# python - 为什么下载文本文件不能正常工作？

> ID：16084117
> 
> 赞同：1
> 
> 时间：2013-04-18T13:18:57.410
> 
> 标签：python, python-3.x

我正在使用 Python 3.3.1。我创建了一个名为的函数`download_file()`，它下载文件并将其保存到磁盘。

```
#!/usr/bin/python3
# -*- coding: utf8 -*-

import datetime
import os
import urllib.error
import urllib.request

def download_file(*urls, download_location=os.getcwd(), debugging=False):
    """Downloads the files provided as multiple url arguments.

    Provide the url for files to be downloaded as strings. Separate the
    files to be downloaded by a comma.

    The function would download the files and save it in the folder
    provided as keyword-argument for download_location. If
    download_location is not provided, then the file would be saved in
    the current working directory. Folder for download_location would be
    created if it doesn't already exist. Do not worry about trailing
    slash at the end for download_location. The code would take carry of
    it for you.

    If the download encounters an error it would alert about it and
    provide the information about the Error Code and Error Reason (if
    received from the server).

    Normal Usage:
    >>> download_file('http://localhost/index.html',
                      'http://localhost/info.php')
    >>> download_file('http://localhost/index.html',
                      'http://localhost/info.php',
                      download_location='/home/aditya/Download/test')
    >>> download_file('http://localhost/index.html',
                      'http://localhost/info.php',
                      download_location='/home/aditya/Download/test/')

    In Debug Mode, files are not downloaded, neither there is any
    attempt to establish the connection with the server. It just prints
    out the filename and its url that would have been attempted to be
    downloaded in Normal Mode.

    By Default, Debug Mode is inactive. In order to activate it, we
    need to supply a keyword-argument as 'debugging=True', like:
    >>> download_file('http://localhost/index.html',
                      'http://localhost/info.php',
                      debugging=True)
    >>> download_file('http://localhost/index.html',
                      'http://localhost/info.php',
                      download_location='/home/aditya/Download/test',
                      debugging=True)

    """
    # Append a trailing slash at the end of download_location if not
    # already present
    if download_location[-1] != '/':
        download_location = download_location + '/'

    # Create the folder for download_location if not already present
    os.makedirs(download_location, exist_ok=True)

    # Other variables
    time_format = '%Y-%b-%d %H:%M:%S'   # '2000-Jan-01 22:10:00'

    # "Request Headers" information for the file to be downloaded
    accept = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
    accept_encoding = 'gzip, deflate'
    accept_language = 'en-US,en;q=0.5'
    connection = 'keep-alive'
    user_agent = 'Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:20.0) \
                  Gecko/20100101 Firefox/20.0'
    headers = {'Accept': accept,
               'Accept-Encoding': accept_encoding,
               'Accept-Language': accept_language,
               'Connection': connection,
               'User-Agent': user_agent,
               }

    # Loop through all the files to be downloaded
    for url in urls:
        filename = os.path.basename(url)
        if not debugging:
            try:
                request_sent = urllib.request.Request(url, None, headers)
                response_received = urllib.request.urlopen(request_sent)
            except urllib.error.URLError as error_encountered:
                print(datetime.datetime.now().strftime(time_format),
                      ':', filename, '- The file could not be downloaded.')
                if hasattr(error_encountered, 'code'):
                    print(' ' * 22, 'Error Code -', error_encountered.code)
                if hasattr(error_encountered, 'reason'):
                    print(' ' * 22, 'Reason -', error_encountered.reason)
            else:
                read_response = response_received.read()
                output_file = download_location + filename
                with open(output_file, 'wb') as downloaded_file:
                    downloaded_file.write(read_response)
                print(datetime.datetime.now().strftime(time_format),
                      ':', filename, '- Downloaded successfully.')
        else:
            print(datetime.datetime.now().strftime(time_format),
                  ': Debugging :', filename, 'would be downloaded from :\n',
                  ' ' * 21, url) 
```

此功能适用于下载 PDF、图像和其他格式，但它会给 html 文件等文本文档带来麻烦。我怀疑这个问题最后与这条线有关：

```
with open(output_file, 'wb') as downloaded_file: 
```

所以，我也尝试过以`wt`模式打开它。也尝试过`w`仅使用模式。但这并不能解决问题。

另一个问题可能是编码，所以我还包括第二行：

```
# -*- coding: utf8 -*- 
```

但这仍然行不通。可能是什么问题，如何使它适用于文本和二进制文件？

不起作用的示例：

```
>>>download_file("http://docs.python.org/3/tutorial/index.html") 
```

当我在 Gedit 中打开它时，它显示为：

![在 gedit](https://i.stack.imgur.com/AMqr2.png)

同样在 Firefox 中打开时：

![在火狐中](https://i.stack.imgur.com/YKeLH.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:46:09.813

您正在下载的文件已使用 gzip 编码发送 - 您可以看到，如果您是`zcat index.html`，则下载的文件正确显示。在您的代码中，您可能需要添加如下内容：

```
if response_received.headers.get('Content-Encoding') == 'gzip':
    read_response = zlib.decompress(read_response, 16 + zlib.MAX_WBITS) 
```

编辑：

好吧，我不能说为什么它可以在 Windows 上工作（不幸的是我没有 Windows 框来测试它），但是如果你发布响应的转储（即将响应对象转换为字符串），可能给出一些见解。据推测，服务器选择不使用 gzip 编码发送，但鉴于此代码对标头非常明确，我不确定会有什么不同。

值得一提的是，您的标头明确指定允许 gzip 和 deflate（请参阅 参考资料`accept_encoding`）。如果您删除该标头，则无论如何都不必担心解压缩响应。

# r - 计算类别花费的时间

> ID：16084118
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:19:01.797
> 
> 标签：r

我有一个类别字符串如下：

```
categoryVector <- c("1_100_1_2_3") 
```

我也有每个类别对应的时间：

```
timeVector <- c("2013-03-07 05:16:50,617_2013-03-07 05:19:24,984_2013-03-07 05:21:06,002_2013-03-07 05:21:06,833_2013-03-07 05:21:10,713") 
```

我想计算在第 1 类和第 2 类上花费的时间

```
Time spent in category 1: (Time in 100 - Time in 1) + (Time on 2 - Time on 1)
Time spent in category 2: Time on 3 - Time on 2 
```

我需要对 200K+ 记录重复这些计算。在 R 中有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:32:32.920

```
 inp <- read.table(text=gsub("_", "\n", timeVector), sep=",")
 inp$V1 <- as.POSIXct(inp$V1)
 inp2 <- read.table(text=gsub("_", "\n", categoryVector))

inp$diffs <- c( difftime(inp$V1[-1], inp$V1[-nrow(inp)]), NA)
inp <- cbind(inp,inp2)
                   V1  V2 diffs  V1
1 2013-03-07 05:16:50 617   154   1
2 2013-03-07 05:19:24 984   102 100
3 2013-03-07 05:21:06   2     0   1
4 2013-03-07 05:21:06 833     4   2
5 2013-03-07 05:21:10 713    NA   3
# should probably rename those columns
 tapply(inp$diffs, inp[,4], sum, na.rm=TRUE)
#  1   2   3 100 
#154   4   0 102 
```

# vbscript - 使用 VBScript 打开受密码保护的访问数据库

> ID：16084119
> 
> 赞同：1
> 
> 时间：2013-04-18T13:19:08.123
> 
> 标签：vbscript, passwords, ms-access-2007, ms-office

我有一个受密码保护的访问数据库，需要在一夜之间更新。我们编写了一个精简的 Java 应用程序，它接受一些参数（即宏、路径、文件类型等），然后通过命令行执行 VBScript。所以我有办法“存储”用户名和密码，然后将其传递给 VBScript，但到目前为止，我还没有找到任何其他真正解决我问题的帖子。这是使用宏打开访问数据库的示例代码，我需要让它接受用户名和密码。

```
 Set accdbObj = Wscript.CreateObject("Access.Application")
    accdbObj.Application.Visible = True

    Message = ("Access Password Update Started With Macro...")
    LogInformation Message, Path

    accDatabase = accdbObj.OpenCurrentDatabase(Path)
    accdbObj.Run Macro

    accdbObj.Terminate
    Wscript.Quit 
```

请记住，`Path`and`Macro`是作为字符串传入的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:32:56.167

为[OpenCurrentDatabase 方法](http://msdn.microsoft.com/en-us/library/office/aa221388%28v=office.11%29.aspx)提供您的数据库密码作为其第三个参数。但是，`OpenCurrentDatabase`不返回任何内容，因此我认为将其返回值分配给`accDatabase`. 试试这种方式：

```
accdbObj.OpenCurrentDatabase Path, , "password_here" 
```

Access db 文件有两种类型的密码。

1.  数据库密码：所有用户必须提供的密码才能打开数据库
2.  用户级安全密码：每个已定义用户的单独密码

假设您的意思是数据库密码，我写了这个答案的第一部分。但是，后来我注意到您提到了用户名，这表明您可能正在使用 ULS（用户级安全性）。ULS 仅在较旧的 MDB db 文件格式中受支持。对于 Access 2007，您可能正在使用不支持 ULS 的较新的 ACCDB 格式。

如果您实际上是在使用带有 ULS 的 MDB，则需要另一种方法来打开数据库。您可以将[DBEngine.CreateWorkspace](http://msdn.microsoft.com/en-us/library/office/bb221018%28v=office.12%29.aspx)与您的 ULS 用户名和密码一起使用，然后`OpenCurrentDatabase`在该工作区中调用。

# excel - Excel VBA 使用定义的名称作为表名

> ID：16084126
> 
> 赞同：0
> 
> 时间：2013-04-18T13:19:23.860
> 
> 标签：excel, vba, sorting, range

在下面的代码中，我在 DepName 列上对名为 DepList 的表进行排序。

```
 Sub SortDepNameAZ()
    On Error Resume Next
         ActiveWorkbook.Worksheets("Department List").ListObjects("DepList").Sort. _
             SortFields.Clear
         ActiveWorkbook.Worksheets("Department List").ListObjects("DepList").Sort. _
             SortFields.Add Key:=Range("DepList[[#All],[DepName]]"), SortOn:= _
             xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
         With ActiveWorkbook.Worksheets("Department List").ListObjects("DepList").Sort
           .Header = xlYes
           .MatchCase = False
           .Orientation = xlTopToBottom
           .SortMethod = xlPinYin
           .Apply
        End With
     End Sub 
```

我想让它更通用，这样我就可以将它用作一个函数，使用定义的范围和名称而不是特定的名称。

我尝试使用以下内容，但无法使语法正常工作：

```
 Sub SortDepNamesAZ(lo1 As ListObject, dn1 as Variant)
 On Error Resume Next
     Set lo1 = Application.ActiveWorkbook.ActiveSheet.ListObject(1)
     Dim tabstr As String
     tabstr = Application.ActiveWorkbook.ActiveSheet.ListObject(1).Name
     lo1.Sort.SortFields.Clear
     lo1.Sort.SortFields.Add Key:=Range(tabstr[[#All],[dn1]]), SortOn:= _
         xlSortOnValues, Order:=xlAscending 'I think this line is probably wrong??
     With lo1.Sort
         .Header = xlYes
         .MatchCase = False
         .Orientation = xlTopToBottom
         .SortMethod = xlPinYin
         .Apply
     End With
 End Sub 
```

任何帮助表示赞赏，即使我知道代码只有几个指针，也可能在许多层面上得到改进。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T09:41:29.633

功能：

```
Sub SortTableByHeader(ShtN As String, tabN As String, hed1 As Variant) 
Dim hed2 As Range, hed3 As Integer 

Set hed2 = Range(tabN).Rows(0) 
    hed3 = Application.Match(hed1, hed2, 0) 

Range(tabN).Sort Key1:=Range(tabN).Cells(1, hed3), Header:=xlYes 

End Sub 
```

调用函数：

```
Sub SortDepartmentName() 
Dim ShtN As String, objName As String, myColHead As Variant 

ShtN = Sheets("Department List").Name 
objName = Sheets("Department List").ListObjects(1).Name 
myColHead = "DepName" 

SortTableByHeader ShtN, objName, myColHead 

End Sub 
```

# view - ZF2 在同一模块的控制器之间共享部分视图（菜单）

> ID：16084128
> 
> 赞同：0
> 
> 时间：2013-04-18T13:19:29.230
> 
> 标签：view, controller, zend-framework2

在 ZF2 中，我有一个带有更多控制器的模块，它共享菜单（用于在控制器之间导航）。要在控制器之间共享此菜单，我必须将其放在每个控制器视图中：

```
<div class="span2">
<?php echo $this->partial('leftmenu'); ?>
</div>

<div class="span10">
THIS IS THE CONTROLLER VIEW
</div> 
```

所以我`<?php echo $this->partial('leftmenu'); ?>`到处重复代码。有没有办法只做一次并让它出现在控制器的所有视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:22:00.220

一种方法是将 ViewModel 注入您的布局并在其中呈现。

模块.php

```
/**
 * On bootstrap event
 * 
 * @param \Zend\Mvc\MvcEvent $e
 */
public function onBootstrap(MvcEvent $e)
{
    // .. 

    $viewModel = $e->getViewModel();
    $menu = new ViewModel();
    $menu ->setTemplate('module/menu/something');
    $viewModel->addChild($menu, 'menu');
} 
```

然后，您只需要在布局内呈现菜单..

布局.phtml

```
<?php if(isset($menu)) echo $menu ?> 
```

如果您想要不同的效果，您也可以附加到不同的事件上，例如，如果您在某个模块中，则只注入模块，或者注入任何扩展抽象控制器的控制器：

```
// Bootstrap ///

$e->getApplication()->getEventManager()->getSharedManager()
        ->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
    $controller = $e->getTarget();
    $controllerClass = get_class($controller);
    $moduleNamespace = substr($controllerClass, 0, strpos($controllerClass, '\\'));

    // logic to decide what you want

    $viewModel = $e->getViewModel();
    $menu = new ViewModel();
    $menu ->setTemplate('module/menu/something');
    $viewModel->addChild($menu, 'menu');
}, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T00:45:01.810

如果您必须根据某些条件更改部分，例如。

*   布局中的侧导航
*   侧面导航在视图中...

您可以在模块中设置全局，如果需要，可以从控制器中更改它。

模块

```
public function onBootstrap(MvcEvent $e)
{
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    $eventManager->attach('dispatch', array($this, 'loadViewVars'), 100);
    // 100-gives access for controller to overwrite this var
    // 1-prevents overwriting
}

public function loadViewVars(MvcEvent $e)
{
    $e->getViewModel()->setVariables(
        array('sideNavigation'=>'partial/sidenavigation_1.phtml',)
    );
} 
```

控制器

```
//you can change in some controller by
$this->layout()->sideNavigation='partial/sidenavigation_2.phtml'; 
```

看法

```
<?php echo $this->partial($this->layout()->sideNavigation); ?> 
```

# javascript - 我应该使用控制器吗？

> ID：16084134
> 
> 赞同：0
> 
> 时间：2013-04-18T13:19:46.893
> 
> 标签：javascript, ruby-on-rails, dom-events

在我的 ruby​​ on rails 应用程序中，我的应用程序列出了一些记录，并且我有按钮过滤器来更新页面中的元素而不刷新页面。

现在我在按钮上使用 jJavascript onclick 事件来显示/隐藏页面中的记录，但不知何故我觉得我应该使用控制器。我觉得我的 index.html erb 文件中有太多 Javascript。

是使用控制器在 erb 索引页面上过滤记录（不刷新页面）的正确方法还是使用 Javascript 可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:33:31.610

我认为你做对了，但我只会过滤客户端。

在这种情况下，再次请求过滤您已有的内容是没有用的。考虑以更简单的方式重新组织您的 JavaScript。现在有很多 JavaScript 框架可以帮助你完成这项工作，例如：

*   [余烬.js](http://emberjs.com/)，
*   [backbons.js](http://backbonejs.org/) ,
*   [角.js](http://angularjs.org/)

# iphone - 如何用 180 度 cocos2d-iphone 旋转精灵？

> ID：16084135
> 
> 赞同：2
> 
> 时间：2013-04-18T13:19:48.640
> 
> 标签：iphone, ios, cocos2d-iphone

```
-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
    {
        CGPoint location = [touch locationInView:[touch view]];
        location = [[CCDirector sharedDirector] convertToGL:location];

        shootVector = ccpSub(location, cannon.position);
        CGFloat shootAngle = ccpToAngle(shootVector);
        cocosAngle = CC_RADIANS_TO_DEGREES(-1 * shootAngle);

        CGFloat rotateDiff = cocosAngle;    
        if (rotateDiff > 180)
            rotateDiff -= 360;
        if (rotateDiff < -180)
            rotateDiff += 360;    

        CGFloat rotateSpeed = 360; 
        rotateDuration = fabs(rotateDiff / rotateSpeed);

        [cannon runAction:[CCSequence actions:
                           [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                           [CCCallFunc actionWithTarget:nil selector:nil],
                           nil]];

        top.rotation = cannon.rotation;
    } 
```

上面的代码导致触摸时旋转 360 度，而不是我想将我的大炮旋转 180 度或更小。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:00:37.513

使用**CCRotateBy**命令而不是**CCRotateTo**将导致旋转一定量而不是转到某个位置。以与 CCRotateTo 相同的方式调用它，如下所示：

```
[CCRotateBy actionWithDuration:rotateDuration angle:180] 
```

# ruby-on-rails - mod_passenger 出现意外错误：接收 HTTP 上传数据时出错

> ID：16084141
> 
> 赞同：1
> 
> 时间：2013-04-18T13:20:06.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我收到类似的错误

```
[ pid=22895 thr=139814677706720 file=ext/apache2/Hooks.cpp:884 time=2013-04-18 21:10:56.113 ]: Unexpected error in mod_passenger: An error occurred while receiving HTTP upload data: End of file found (70014)
  Backtrace:
     in 'boost::shared_ptr<Passenger::BufferedUpload> Hooks::receiveRequestBody(request_rec*)' (Hooks.cpp:1321)
     in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:585) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:49:44.953

我得到了解决方案。

**如果您的服务器在 cantos 中，则在httpd.conf**中更改此行

 **您的 httpd.conf 文件位于**etc/conf/httpd.conf**

打开该文件并更改此行

默认为`KeepAlive is 60`. 现在改变这个和`replace 60 to 100.`

希望这对你有用。**

# c++ - 双链表。尝试在 2 个节点之间插入时不执行任何操作

> ID：16084143
> 
> 赞同：0
> 
> 时间：2013-04-18T13:20:12.610
> 
> 标签：c++, insert, doubly-linked-list

我的 DLL 插入功能有问题。附加到列表中没有问题，但是当我有 5 个对象的列表并且我想在节点之间插入时，它什么也不做。我一直在寻找几个小时来解决这个问题，但没有任何改变。

这是我的代码： ***main.cpp 中的实现***

```
cout << "\n---------------------------Insert---------------------------\n";
        //Ask the user what position they want to enter the player in.
        cout << "Enter the position you want to enter the player: ";
        int insertChoice = validators.getNum();
        //Move the iterator back to the start.
        itr.Start();
        //If the position is NOT equal to zero, Continue.
        if (insertChoice != 0)
        {
            //Loop until the position entered is reached.
            for (int i = 0; i < insertChoice; i++)
            {
                //Move the iterator forware to this position.
                itr.Forth();
            }
        //Insert the Player to the position entered by the user.
        //list.Insert(itr,stats.input());
        }
        //If the position entered is equal to zero, Continue.
        else
        {
            //Append onto the list.(Add it onto the start).
            list.Append(stats.input());
        } 
```

***在头文件中插入函数。***

```
// ----------------------------------------------------------------------------------------------------------------
//  Name:           Insert
//  Description:    Inserts data before the iterator, this works whether the iterator is backwards of forwards
//                  through the list.Inserts at the end of the list if iterator is invalid.
//  Arguments:      p_iterator: The iterator to insert before
//                  p_data: the data to insert
//  Return Value:   None.
// ----------------------------------------------------------------------------------------------------------------
    void Insert(DoublyLinkedListIterator<Datatype>& p_itr, Datatype p_data)
    {
        if(p_itr.m_node != 0)
        {
            // insert the data before the iterator
            p_itr.m_node->InsertBefore(p_data);

            //if the iterator was at the head of the list,
            //reset the head pointer
            if(p_itr.m_node == m_head)
            {
                m_head = m_head->m_prev;
            }
            // increment the count
            m_count++;
        }
        else
        {
            Append(p_data);
        }
    } 
```

***附加***

```
void Append(Datatype p_data)
    {
        if(m_head == 0)
        {
            // create a new head node.
            m_head= m_tail= new DoublyListNode<Datatype>;
            m_head->m_data= p_data;
            m_head->m_next= 0;
            m_head->m_prev= 0;
        }
        else
        {
            // insert a new node after the tail and reset the tail.
            m_tail->InsertAfter(p_data);
            m_tail= m_tail->m_next;
        }
        m_count++;
    } 
```

***之前插入***

```
// ----------------------------------------------------------------
//  Name:           InsertBefore
//  Description:    This adds a node before the current node.
//  Arguments:      p_data - The data to store in the new node.
//  Return Value:   None.
// ----------------------------------------------------------------

void InsertBefore(Datatype p_data)
{
    //Create new Node
    DoublyLinkedListNode<Datatype>* newNode = new DoublyLinkedListNode<Datatype>;
    newNode->m_data = p_data;
    //Set up new Node Pointers
    newNode->m_next = this;
    newNode->m_prev = m_prev;
    //if theres a node before it, make it point to new node
    if(m_prev != 0)
    m_prev = newNode;
} 
```

我认为问题不在于主要的实现，而在于实际的插入功能。在此先感谢，贝卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:27:34.377

***之前插入***

```
newNode->m_next = this;
newNode->m_prev = this->m_prev; 
```

您也需要告诉`this`（如前所述）指向新节点。

```
newNode->m_next = this;
newNode->m_prev = this->m_prev;
this->m_prev->m_next = newNode;
this->m_prev = newNode; 
```

* * *

这也应该

***在头文件中插入函数。***

```
 if(p_itr.m_node == m_head)
 {
      m_head = p_itr->m_prev;
               ^^^^^^
 } 
```

# ruby - 安装 ruby gem nokogiri 时缺少 libxslt

> ID：16084144
> 
> 赞同：13
> 
> 时间：2013-04-18T13:20:15.320
> 
> 标签：ruby, gem, nokogiri, gitlab, libxslt

我认识到这是一个重复的问题，但是我发现的与此问题相关的所有其他答案似乎都没有帮助我......

我正在安装`GitLab`并运行 gem 依赖项，当它达到`NokoGiri`gem 要求并失败并显示以下信息时：

```
ERROR:  Error installing nokogiri:
ERROR: Failed to build gem native extension.

/usr/local/bin/ruby extconf.rb
extconf.rb:10:in `<main>': Use RbConfig instead of obsolete and deprecated Config.
extconf.rb:10:in `<main>': Use RbConfig instead of obsolete and deprecated Config. 
extconf.rb:11:in `<main>': Use RbConfig instead of obsolete and deprecated Config.
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... yes
checking for xmlParseDoc()... -lxml2
checking for xsltParseStylesheetDoc()... -lxslt
-----
libxslt is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
----- 
```

因此，此错误导致我尝试`libxslt`使用以下命令进行安装：

```
$ sudo apt-get install libxslt-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Note, selecting 'libxslt1-dev' instead of 'libxslt-dev'
libxslt1-dev is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 146 not upgraded. 
```

那么给了什么？NokoGiri 需要这个包，但是这个包已经安装了！！我似乎无法解决这个问题，有什么帮助吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-18T13:38:58.280

首先确保您拥有所有依赖项，如“[在 Ubuntu 上使用 RVM 安装 Nokogiri](http://web.archive.org/web/20140221084907/http://www.andrewsturges.com/2011/09/installing-nokogiri-with-rvm-on-ubuntu.html) ”中所述（其中提到了相同的错误消息）

> 我不知道为什么它找不到包“libxslt”。与其担心这一点，我将安装[Nokogiri GitHub 页面上](https://github.com/sparklemotion/nokogiri)列出的依赖项：

```
$ sudo apt-get install libxslt-dev libxml2-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Note, selecting 'libxslt1-dev' instead of 'libxslt-dev'
libxslt1-dev is already the newest version.
libxml2-dev is already the newest version. 
```

> 这似乎已经足够好，所以我继续前进。下一步是安装实际的 Nokogiri gem。说明说要使用“sudo gem install nokogiri”，但因为我使用的是 RVM，所以我删除了“sudo”部分：

```
$ gem install nokogiri 
```

* * *

考虑到“[在 Ubuntu 中全新安装 RVM 不会让我安装 gems（zlib 错误）](https://stackoverflow.com/a/6920623/6309) ”，因为您有`libxslt1-dev`（但没有`libxslt-dev`），您可能会考虑重新编译您的 ruby​​。
（有点像“[如何在 Ubuntu 11.10 上使用 RVM 在 IRB 中获得 Readline 支持](https://stackoverflow.com/a/10765944/6309)”）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-23T20:50:29.330

试试 Nokogiri 1.6.0.rc1，它在 gem 中捆绑了 libxml2 和 libxslt。这应该解决您的安装问题：

```
gem install nokogiri --pre 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-11T14:42:54.207

也许这对其他人有帮助：如果您收到错误：

```
 libxslt is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies. 

```

您还需要安装 libxslt 的开发版本 `apt-get install libxslt-dev` 或在 CentOS 中

`yum install libxslt-devel`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-22T08:00:27.187

尝试安装依赖项

```
sudo apt-get install libxslt-dev libxml2-dev 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-17T18:48:35.830

根据您的 Linux 风格从下面选择并安装合适的库：-

> *   deb：**libxslt1-dev**（Debian、Ubuntu 等）
> *   rpm: **libxslt-devel** (Fedora, CentOS, RHEL)
> *   csw: **libxslt_dev** (Solaris)

使用适当的命令安装，如 apt-get、yum 等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-04T15:50:50.083

如果您想安装以前版本的 nokogiri，安装 Nokogiri 1.6.0.rc1 将无法解决问题。

您必须单独安装`libxslt`：

> sudo apt-get install libxslt-dev libxml2-dev

之后再次运行您的命令：（在我的情况下）

> 宝石安装 nokogiri -v '1.5.11'

# internet-explorer - 下载文件代码在 IE8 中失败，但在 IE9 中有效

> ID：16084148
> 
> 赞同：4
> 
> 时间：2013-04-18T13:20:19.723
> 
> 标签：internet-explorer, jsp

我正在尝试通过 java 代码创建一个 xls 文件并允许用户下载它。下载代码在 JSP 中，在 IE9 和其他浏览器中运行良好。但它在 IE 8 中给出错误 **“无法下载文件。无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。”**

我的 JSP 代码如下。

```
 <%@ page import="org.apache.poi.ss.usermodel.Workbook"%><%@ page import="java.io.*"%>
    <%response.setHeader("Pragma","no-cache");
    response.setHeader("Content-disposition", "attachment;filename=DataTemplate.xls");
    response.setContentType("application/vnd.ms-excel");
    OutputStream os = response.getOutputStream(); 
    ((Workbook)request.getAttribute("result")).write(os); os.flush();os.close();%> 
```

我按照微软网站的建议检查了 IE 的所有设置。互联网上其他用户的建议是重新安装 IE8，但这对我来说并不好，因为我在多台机器上都遇到了这个问题。

欢迎任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:14:24.890

如果服务器发送“ `Cache-control:no-store`”标头或发送“ `Cache-control:no-cache`”标头，则会出现此问题。

解决方案之一是添加`Cache-Control: private`到响应标头。

此外，很少有关于 Microsoft 支持的官方博客。检查这些链接其中之一应该可以帮助您解决问题。

[http://support.microsoft.com/kb/815313](http://support.microsoft.com/kb/815313)

[http://support.microsoft.com/kb/323308](http://support.microsoft.com/kb/323308)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T11:33:02.100

谢谢哈迪克。你的回答帮助我解决了我的问题。

我修改了我的代码，使其在 IE8 和 IE9 中运行良好。

```
 response.setHeader("Cache-Control","private");
    response.setHeader("Pragma","private"); 
```

# ruby - 减少/注入迭代器的 Splat 块参数

> ID：16084153
> 
> 赞同：0
> 
> 时间：2013-04-18T13:20:29.350
> 
> 标签：ruby, iterator, block

我已经定义了一个这样的数组：

```
ary = [[0,1], [2,3]] 
```

运行以下代码：

```
ary.reduce(nil) do |a, i, k|
  puts "#{a.inspect} #{i.inspect} #{k.inspect}"
end 
```

在每次迭代中，我希望变量`a`、`i`和`k`分别保存累加器 ( `nil`) 的值、内部数组的第一个元素和第二个元素，即我希望这个输出：

```
nil 0 1
nil 2 3 
```

但结果是：

```
nil [0, 1] nil
nil [2, 3] nil 
```

为什么？我怎样才能达到我想要的结果？

此外，为什么使用以下代码可以`map`按我的预期工作？

```
ary.map do |i, k|
  puts "#{i.inspect} #{k.inspect}"
end

# Output
# 0 1
# 2 3 
```

有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:08:50.890

Splat can work for one level. With `map`, the block parameter is `[0, 1]` and so on, which can be spalatted into `0` and `1`. With `inject`, the block parameters are `nil` and `[0, 1]`, which may be assigned to two variables (without splat), but not three. Splat does not work here because they are already splatted (they are two variables). In order to splat `[0, 1]`, you need to do that within the array, which requires a pair of parentheses.

```
{|a, (i, j)| ...} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:24:19.403

你想这样做：

```
A.reduce(nil) { |a, (i, j)| p i } 
```

`map`和的默认行为之间的差异`reduce`是由于 Ruby 处理接收单个参数的块的特殊方式。在这种情况下（即`map`），它会为您生成一个数组，但是对于接收多个参数的块（例如`reduce`），它需要帮助来确定您想要它做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T13:39:51.500

让我们尝试以下，以更好地理解：

```
A = [[0,1], [2,3], [4,5], [6,7]]
A.map { |i| print i } #=> [0, 1][2, 3][4, 5][6, 7]

A = [[0,1], [2,3], [4,5], [6,7]]
A.map { |i,j| print i,j ;print " " } #=> 01 23 45 67 
```

这是因为在第二个代码中，每个元素以以下方式发生的内部分配传递到块：

```
i,j = [0,1]
i,j = [2,3] so on. 
```

在第一个代码中，它的工作方式如下：

```
i = [0,1]
i = [2,3] so on. 
```

所以`Array#map`效果很好。现在，在您的情况下，您没有打印`j`，只有`i`这样您才能获得单个值。

```
A = [[0,1], [2,3], [4,5], [6,7]]
A.map { |i,j| print i ;print " " } #=> 0 2 4 6 
```

现在为了更好地了解一下`Enum#inject`，看看吧[`A Simple Pattern for Ruby's inject method`](http://blog.flvorful.com/articles/2010/01/24/a-simple-pattern-for-rubys-inject-method)。和[`Ruby's inject() and collect()`](http://polishinggems.blogspot.com/2011/05/rubys-inject-and-collect.html)

# openerp - 在实际定义之前引用对象（以及由此产生的问题）

> ID：16084154
> 
> 赞同：1
> 
> 时间：2013-04-18T13:20:33.140
> 
> 标签：openerp

这更像是一个公共服务公告，而不是一个问题：

我刚刚在 OpenERP 6.1 中实现了一个相当大的数据模型，并且遇到了一些对象引用是在它们引用的对象之前定义的问题。一个简单的解决方案是定义这些对象的存根，只包含“_name”属性，然后用实际的对象定义“覆盖”这些存根。有趣的是，这个问题似乎只出现在 many2one 和 one2many 关系中。起初，many2many 关系似乎不受这种行为的影响，即使它们应该受到影响。事实证明它们仍然是，但不同。

似乎，除了映射表之外，还将创建 many2many 关系的目标对象的数据库表，如果它不可用的话。稍后读取目标对象定义时，其字段将添加到当时已创建的数据库表中。到目前为止，一切都很好。问题是在创建目标对象数据库表期间省略了 ID 字段。由于 OpenERPs 数据库更新例程似乎没有触及任何“应该存在”的东西，这个字段永远不会被添加到表中。这会导致错误消息，例如告诉您 openerp 无法在表上添加 foreign_key 引用，该引用应该引用目标对象的应该存在的 ID 字段。

TL;DR：如果这些对象在其实际定义之前被引用，则始终为所有对象定义创建存根。否则你会被这个困扰：**ProgrammingError: there is no primary key for referenced table ...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:47:39.517

是的，这是 openerp 的旧版本 v6 和 v6.1 的一个众所周知的问题，现在似乎不再适用于 v7。这个问题是由于你有 ref 的循环依赖而出现的。对象 B 上的对象 A 具有 Ref。对象 C 依赖于对象 A。

为避免这种情况，最好重构对象依赖关系，即使在该问题仍然存在之后，您也可以创建仅包含其名称和 NO 的表的初始声明`_column`。让这个文件首先被加载，然后你的其他对象可以跟随。

# c# - 主进程BackgroundWorker异常如何处理？

> ID：16084155
> 
> 赞同：0
> 
> 时间：2013-04-18T13:20:44.073
> 
> 标签：c#, winforms, exception, backgroundworker

我想处理`Progress`班级中所有未处理的异常，我在其中编写了一些用于错误记录的代码：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        try
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new LoginPoint());
        }
        catch (Exception myException)
        {
            //log the unhandled exceptions.                
        }
    }
} 
```

`BackgroundWorker`但是没有正确处理中的异常：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    throw new Exception("TEST EXCEPTION!");
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error != null)
    {
        throw new Exception("I GOT THE EXCEPTION");
    }
} 
```

我希望在我的班级中处理异常*“我得到...”*`Progress`，但是当我运行（而不是调试）应用程序时会出现系统的异常对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:33:05.613

您可以使用 AppDomain.UnhandledException 事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:26:03.530

在 program.cs 中这样做：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    AppDomain.CurrentDomain.UnhandledException += AppDomain_UnhandledException;
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException);
    Application.Run(new Form1());
}

static void AppDomain_UnhandledException(Object sender, UnhandledExceptionEventArgs e)
{
    MessageBox.Show(((Exception)e.ExceptionObject).Message, "AppDomain.UnhandledException");
    Environment.Exit(-1);
} 
```

您的表单代码应该可以使用它，并且您应该`AppDomain.UnhandledException`在运行模式下获得 MessageBox (ctrl+F5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:41:04.863

我的方法可能是事件处理程序。您面临的问题是跨线程通信，这是一个臭名昭著的无赖！您应该研究线程并调用以了解更多信息。但是，您可以使用事件和事件处理程序在工作线程和主线程之间进行安全通信。这是一个简短的例子：

```
public delegate void ExceptionHandler(Exception ex);

public class Worker : BackgroundWorker
{
    ExceptionHandler Handler { get; set; }

    public Worker(ExceptionHandler handler)
    {
        Handler = handler;
    }

    protected override void OnDoWork(DoWorkEventArgs e)
    {
        for (var i = 0; i < (int)e.Argument; i++)
        {
            if (i%2 != 0) continue;

            try
            {
                throw new ArgumentException(String.Format("{0}:{1}", i, "TEST EXCEPTION"));
            }
            catch (Exception ex)
            {
                if (this.Handler != null)
                    Handler.Invoke(ex);
            }
        }
    }
}

class Program
{
    public static void HandleException(Exception ex)
    {
        Console.WriteLine(ex.Message);
    }

    static event ExceptionHandler Handler;

    static void Main(string[] args)
    {
        Handler = new ExceptionHandler(HandleException);
        var worker = new Worker(Handler);
        worker.RunWorkerAsync(100);

        Console.ReadLine();
    }
} 
```

控制台窗口中的预期输出将是：

```
0:TEST EXCEPTION
2:TEST EXCEPTION
4:TEST EXCEPTION
6:TEST EXCEPTION
etc etc 
```

希望这对您有所帮助，即使这不是您要寻找的答案，也希望它能以某种方式帮助您。

# sublimetext2 - 如何配置 Sublime Text 不记住会话之间的文件和未保存的更改？

> ID：16084158
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:21:00.800
> 
> 标签：sublimetext2, sublimetext

在会话之间，Sublime Text 会记住我打开了哪些文件（以及未保存的更改）。如何让 Sublime Text 在会话之间忘记这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:25:15.920

在**Preferences -> Settings - Default**中，您必须禁用以下属性：

```
[...]
// Exiting the application with hot_exit enabled will cause it to close
// immediately without prompting. Unsaved modifications and open files will
// be preserved and restored when next starting.
//
// Closing a window with an associated project will also close the window
// without prompting, preserving unsaved changes in the workspace file
// alongside the project.

"hot_exit": true,

// remember_open_files makes the application start up with the last set of
// open files. Changing this to false will have no effect if hot_exit is
// true

"remember_open_files": true,
[...] 
```

将两者都`false`重视，您将实现这一目标。

# javascript - 检查列表元素中的重复名称

> ID：16084169
> 
> 赞同：2
> 
> 时间：2013-04-18T13:21:53.467
> 
> 标签：javascript, jquery, html-lists, nested-sortable

## 问题：

如何检查列表元素中的重复名称/项目？

## 我的情况：

我在列表中有一个列表，这是一个示例：

```
<ol class="sortable ui-sortable">
<li id="category_1"><div>Car</div>
   <ol>
       <li id="category_2"><div>Color</div>
            <ol>
                <li id="category_3"><div>Red</div></li>
                <li id="category_4"><div>Black</div></li>
            </ol>
       </li>
   </ol>
</li>
<li id="category_5"><div>Motor</div>
   <ol>
       <li id="category_6"><div>Red</div></li>
       <li id="category_7"><div>Black</div></li>
   </ol>
</li>
<li id="category_9"><div>Truck</div></li>
</ol> 
```

*`class="sortable ui-sortable"`正在使用的是NestedSortable [jQuery Plugin](https://github.com/mjsarfatti/nestedSortable)。所以列表项是可拖动的。*

当 div 被拖入另一个 list 时，我想检查这些 div 中的名称`<ol>`。如果此列表包含重复项，则会以红色突出显示。

例如，如果我将`Red`-拖到已经包含红色`category_6`的`ol`内部`Color`- `category_2`，则该位置（dropspot）变为红色。如果用户决定仍将其放在该位置，则列表将返回其原始位置。`category_6`将比被移回`ol`下面`category_5`。

因此，如果您有更好的方法，列表可能会像这样结束，或者其他的：

```
<ol class="sortable ui-sortable">
<li id="category_1"><div>Car</div>
   <ol>
       <li id="category_2"><div>Color</div>
            <ol>
                <li id="category_3"><div>Red</div></li>
                <li id="category_4"><div>Black</div></li>
                <li id="category_6" class="HIGHLIGHTED"><div>Red</div></li>
            </ol>
       </li>
   </ol>
</li>
<li id="category_5"><div>Motor</div>
   <ol>
       <li id="category_7"><div>Black</div></li>
   </ol>
</li>
<li id="category_9"><div>Truck</div></li>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:08:32.473

**SEE EDIT BELOW**

I am sure you will need to use the :contains() selector.

```
$('div').mouseup(function(){
    var temp = $(this).text();
    var others = $(this).parent().siblings().children('div:contains('+temp+')');
    if(others.size() > 0){
        $(this).addClass('highlighted');
    }else{
        $(this).removeClass();
    }
}); 
```

That is what I came up with, but it doesn't work :(

Maybe someone can build on it: [http://jsfiddle.net/QQ3JD/](http://jsfiddle.net/QQ3JD/)

**EDIT :** I came back to it and got it working: [http://jsfiddle.net/mobabur94/QQ3JD/1/](http://jsfiddle.net/mobabur94/QQ3JD/1/)

```
function checkContents(){
    $("div").each(function(){
        var temp = $(this).text();
        var others = $(this).parent().siblings().children('div:contains('+temp+')');
        if(others.size() > 0){
            $(this).addClass('highlighted');
        }else{
            $(this).removeClass('highlighted');
        }
    });
}

$(document).ready(function(){
    checkContents();
    $('.sortable').mousemove(function(){
        $("div").each(function(){
            var temp = $(this).text();
            var others = $(this).parent().siblings().children('div:contains('+temp+')');
            if(others.size() > 0){
                $(this).addClass('highlighted');
            }else{
                $(this).removeClass('highlighted');
            }
        });
    });
}); 
```

It's probably crazy but every time the mouse moves over the list, it performs the check.. There may be a better way of doing this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:35:37.210

考虑到我的清单是

```
<ul id="myid">
    <li>apple</li>
    <li>ibm</li>
    <li>apple</li>
    <li>microsoft</li>
    <li>ibm</li>
</ul> 
```

我建议的查找重复项的脚本是

```
var liText = '',
liList = $('#myid li'),
listOfDuplicate = [];
$(liList).each(function () {
var text = $(this).text();
if (liText.indexOf('|' + text + '|') == -1) liText += '|' + text + '|';
else listOfDuplicate.push($(this));
});

$(listOfDuplicate).each(function () {
     alert("Duplicates :  " + $(this).text());
}); 
```

使用示例[**`fiddle`**](http://jsfiddle.net/gopinaghr/PYdsm/57/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:31:18.537

这是一个开始。一个函数，它接收一个列表并返回第一个`li`带有重复的`.text()`. 您将问题标记为 jQuery，这使它更容易。

```
function checkListForDuplicates(ol) {
    var $lis = $(ol).children("li"),
    found = [],
    i;
    for (i = 0; i < $lis.length; i++) {
        text = $($lis[i]).text();
        if ($.inArray(text, found)) {
            return $lis[i];
        } else {
            found.push(text);
        }
    }
} 
```

# ios - 有没有更好的方法从托管视图控制器调用管理视图控制器中的方法？

> ID：16084173
> 
> 赞同：1
> 
> 时间：2013-04-18T13:22:00.020
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

在我迄今为止开发的应用程序中，我一直`UIViewController`负责在 UI 中呈现其他`UIViewController`s 以显示过渡。每当我有一个“托管”视图控制器调用“管理”视图控制器中的一个方法时，我必须确保我有一个对托管控制器内部的管理控制器的引用。

例如：如果我有一个负责管理我的应用程序 UI 中的其他 s的`UIViewController`调用，并创建 2 个控制器用于演示。分别称为和。如果完成并需要显示，我总是在其中设置一个引用变量，以便它可以将更改传达给. 这意味着无论何时创建它都必须将'引用变量设置为.`MainController``UIViewController``MainController``SubController1``SubController2``SubController1``MainController``SubController2``MainController``SubController1``MainController``MainController``SubController1``SubController1``MainController``self`

我应该担心这种通信方法的内存使用情况吗？对这种行为使用通知会更好吗？我发现我现在使用的方法的主要好处是，如果需要，它可以非常容易地在视图控制器之间共享信息。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:46:09.813

在其他视图中处理更改、操作或用户交互是[委托](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)的基本用例。最佳实践是让主控制器成为第一个/第二个视图控制器的委托，然后当子控制器中发生事件时，它们会调用其委托上的某些方法，然后可以采取任何必要的行动。

以您描述的方式传递引用不会对内存产生明显的影响，但是它确实将您的代码与 . 紧密耦合`MainController`，应该避免这种情况。您应该努力灵活地处理未来的潜在变化。如果您过渡到通用应用程序并且 iPad UI 具有截然不同的结构会发生什么？使用委托，您只需要确保控制器之间的合同完好无损，但可以自由更改任何底层实现细节。

保持视图之间的值/状态同步的其他选项是：

*   [核心数据](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)——最适合用于数据
*   [Key-Value Observation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html) - 最适合用于数据
*   `NSNotification`s sent through [`NSNotificationCenter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)- 最适合用于操作

# cocos2d-iphone - Box2D 鼠标在拖动时出现关节问题。测试点函数返回 false

> ID：16084174
> 
> 赞同：0
> 
> 时间：2013-04-18T13:22:01.997
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我正在使用 box2D 鼠标关节来拖动对象，但我遇到了一个奇怪的问题，即身体没有响应移动的功能，因为

```
 if (currentFixture->TestPoint(worldPoint)) { 
```

对于某些特定的机构，总是返回 false。

![在此处输入图像描述](https://i.stack.imgur.com/JtDjH.png)

从上图中，“黄色”身体是可拖动的，但可以从身体的中心或底部等位置拖动，但不能从顶部拖动。

注意：实体是使用“PhysicEditor”创建的，因此实体是“b2PolygonShape”。

编辑：没有纹理的身体......我认为问题在于顶点线彼此相交。

![在此处输入图像描述](https://i.stack.imgur.com/xgroU.png)

Edit2：在这里也使用 RUBE 相同的结果。

![在此处输入图像描述](https://i.stack.imgur.com/ItxYV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:13:11.090

当 body 有多个夹具时，您需要检查每个夹具：

```
bool touchingBody( b2Body* b, b2Vec2 worldPoint ) 
{
    bool bodyIsTouched = false;
    for (b2Fixture* f = b->GetFixtureList(); f; f = f->GetNext()) {
        if ( bodyIsTouched = f->TestPoint(worldPoint) )
            break;
    }
    return bodyIsTouched;
} 
```

# java - LDAP 术语中的 userDn 和 base 是什么

> ID：16084180
> 
> 赞同：4
> 
> 时间：2013-04-18T13:22:20.367
> 
> 标签：java, spring, ldap

我想在 java中`LDAP`使用*spring对用户进行身份验证。*我发现对于`LDAP`使用*spring*的配置，我需要*urls*、*userDn*、*密码*和基本值，如下所示：

```
urls=ldap://127.0.0.1:389
userDn=cn=Directory Manager
password=abcd
base=dc=example,dc=com 
```

我的问题是，这个*userDn*和*base*到底是什么？这些意味着什么？我们需要在这个配置中指定哪个*userDn值？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:06:45.470

这`base object`是目录信息树 (DIT) 中的点，搜索应该开始为要在搜索结果中返回的条目构建候选者。搜索的`scope`搜索确定树的深度如下：

*   *子树*范围：基础对象和从属于基础对象的所有条目
*   *一*：所有直接从属于基础对象的对象，但不包括基础对象。
*   *base*：只是基础对象。当可分辨名称已知时，应始终使用基本级别搜索。

在`userDn`这种情况下，似乎是用户的专有名称，该用户将使用 BIND 请求对目录进行身份验证。

### 也可以看看

*   [LDAP 编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# php - 如何将一些 JSON 解码为 PHP

> ID：16084185
> 
> 赞同：-3
> 
> 时间：2013-04-18T13:22:41.773
> 
> 标签：php, json, decode

我有一个文件的以下 JSON 输出。如何将“SLL”中的“last”提取到 php 变量中？

```
{
   "USD" : {"15m" : 93.89699, "last" : 93.89699, "buy" : 93.25001, "sell" : 93.89698, "24h" : 84.3, "symbol" : "$"},
   "CNY" : {"15m" : 573.0, "last" : 573.0, "buy" : 563.76252, "sell" : 588.11678, "24h" : 572.65, "symbol" : "¥"},
   "JPY" : {"15m" : 9100.0, "last" : 9100.0, "buy" : 9100.0, "sell" : 9150.0, "24h" : 8240.81, "symbol" : "¥"},
   "SGD" : {"15m" : 115.20412, "last" : 115.20412, "buy" : 112.64417, "sell" : 117.51034, 
   "SLL" : {"15m" : 23207.99, "last" : 23207.99, "buy" : 23207.99, "sell" : 23207.99, "24h" : 23207.99, "symbol" : "L$"},  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:23:46.380

使用这个功能

```
json_decode($yourJSONString); 
```

[http://php.net/json_decode](http://php.net/json_decode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:23:48.520

[http://php.net/json_decode](http://php.net/json_decode)

```
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:27:27.587

您需要解码 json 值。

采用

```
$decode = json_decode(#your json value#);
echo $decode->SLL->last; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:27:40.863

试试这个

```
var_dump(json_decode($json, true)); 
```

[如何解码 json 对象数组](https://stackoverflow.com/questions/2594183/how-to-decode-an-array-of-json-objects)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T13:32:25.173

乍一看，您的 JSON 有一些违规行为：

错误的 JSON：

```
{
   "USD" : {"15m" : 93.89699, "last" : 93.89699, "buy" : 93.25001, "sell" : 93.89698, "24h" : 84.3, "symbol" : "$"},
   "CNY" : {"15m" : 573.0, "last" : 573.0, "buy" : 563.76252, "sell" : 588.11678, "24h" : 572.65, "symbol" : "¥"},
   "JPY" : {"15m" : 9100.0, "last" : 9100.0, "buy" : 9100.0, "sell" : 9150.0, "24h" : 8240.81, "symbol" : "¥"},
   "SGD" : {"15m" : 115.20412, "last" : 115.20412, "buy" : 112.64417, "sell" : 117.51034, 
   "SLL" : {"15m" : 23207.99, "last" : 23207.99, "buy" : 23207.99, "sell" : 23207.99, "24h" : 23207.99, "symbol" : "L$"},  
} 
```

正确的 JSON：

```
{
    "USD":{"15m":93.89699,"last":93.89699,"buy":93.25001,"sell":93.89698,"24h":84.3,"symbol":"$"},
    "CNY":{"15m":573,"last":573,"buy":563.76252,"sell":588.11678,"24h":572.65,"symbol":"\u00a5"},
    "JPY":{"15m":9100,"last":9100,"buy":9100,"sell":9150,"24h":8240.81,"symbol":"\u00a5"},
    "SGD":{"15m":115.20412,"last":115.20412,"buy":112.64417,"sell":117.51034},
    "SLL":{"15m":23207.99,"last":23207.99,"buy":23207.99,"sell":23207.99,"24h":23207.99,"symbol":"L$"}
} 
```

}

对于 SLL 节点的最后一个元素：

```
$arr = json_decode($json,1);
end($arr["SLL"]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T13:52:46.237

```
$jsonArr='{
   "USD" : {"15m" : 93.89699, "last" : 93.89699, "buy" : 93.25001, "sell" : 93.89698, "24h" : 84.3, "symbol" : "$"},
   "CNY" : {"15m" : 573.0, "last" : 573.0, "buy" : 563.76252, "sell" : 588.11678, "24h" : 572.65, "symbol" : "¥"},
   "JPY" : {"15m" : 9100.0, "last" : 9100.0, "buy" : 9100.0, "sell" : 9150.0, "24h" : 8240.81, "symbol" : "¥"},
   "SGD" : {"15m" : 115.20412, "last" : 115.20412, "buy" : 112.64417, "sell" : 117.51034}, 
   "SLL" : {"15m" : 23207.99, "last" : 23207.99, "buy" : 23207.99, "sell" : 23207.99, "24h" : 23207.99, "symbol" : "L$"}  
}';

print_r(json_decode($jsonArr)); 
```

**输出**

```
stdClass Object
(
    [USD] => stdClass Object
        (
            [15m] => 93.89699
            [last] => 93.89699
            [buy] => 93.25001
            [sell] => 93.89698
            [24h] => 84.3
            [symbol] => $
        )

    [CNY] => stdClass Object
        (
            [15m] => 573
            [last] => 573
            [buy] => 563.76252
            [sell] => 588.11678
            [24h] => 572.65
            [symbol] => ¥
        )

    [JPY] => stdClass Object
        (
            [15m] => 9100
            [last] => 9100
            [buy] => 9100
            [sell] => 9150
            [24h] => 8240.81
            [symbol] => ¥
        )

    [SGD] => stdClass Object
        (
            [15m] => 115.20412
            [last] => 115.20412
            [buy] => 112.64417
            [sell] => 117.51034
        )

    [SLL] => stdClass Object
        (
            [15m] => 23207.99
            [last] => 23207.99
            [buy] => 23207.99
            [sell] => 23207.99
            [24h] => 23207.99
            [symbol] => L$
        )

) 
```

这会给你最后你问的

```
$decodeArr = json_decode($jsonArr);

echo end($decodeArr->SLL); 
```

# logging - 尝试记录码头日志时，码头 9 嵌入式 web 应用程序上的 SLF4J 多个绑定错误

> ID：16084187
> 
> 赞同：0
> 
> 时间：2013-04-18T13:22:55.853
> 
> 标签：logging, jetty, slf4j, logback, embedded-jetty

我尝试构建 webapp 的独立版本（可执行 jar）。所以我使用jetty来加载war文件。war 文件已经包含 slf4j 和 logback 作为依赖项。在我的独立应用程序中，我必须`logback.xml`定义记录器定义。

```
<?xml version="1.0" encoding="UTF-8"?>
    <configuration>    

  <appender name="app" class="ch.qos.logback.core.FileAppender">
    <file>/tmp/app.log</file>
    <encoder>
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <root level="${log.level}">
    <appender-ref ref="app"/>
  </root>

</configuration> 
```

这工作正常，但它仍然在控制台而不是日志文件上输出码头的日志信息（所有应用程序日志都进入我的日志文件）。在码头文档中，我发现我还需要在嵌入应用程序中包含日志框架。所以我包含了 slf4j 和 logback，但现在我得到了*SLF4J：类路径包含多个 SLF4J 绑定。*错误，它没有登录到我的文件。

我怎样才能解决这个问题？

版本：

*   码头：9.0.1.v20130408
*   回退：1.0.7
*   slf4j：1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:46:52.397

在嵌入式模式下，您可以控制一切。

如果这只是一个 webapp，请删除重复的 jar 文件，并考虑设置[`WebAppContext.setParentLoaderPriority(true)`](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/webapp/WebAppContext.html#setParentLoaderPriority%28boolean%29)并仅使用 1 ClassLoader 中的所有内容。

# java - ClassNotFoundException：JBoss 5.1 中的 org.jboss.annotation.ejb.RemoteBindings

> ID：16084188
> 
> 赞同：0
> 
> 时间：2013-04-18T13:22:58.110
> 
> 标签：java, jboss, ejb, ejb-3.0, jboss5.x

我正在 JBoss 5.1 上部署一个带有一些 EJB 的应用程序（默认配置）。我不在代码中的任何地方使用 org.jboss.annotation.ejb.RemoteBindings 类，任何依赖项也不使用它。我在部署期间有一个堆栈跟踪：

```
2013-04-18 14:16:16,500 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to PreInstall: name=jboss.j2ee:ear=some-app-ear.ear,jar=some-app-ear.ear,name=ContentManagerBean,service=EJB3 state=Real
java.lang.NoClassDefFoundError: org/jboss/annotation/ejb/RemoteBindings
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getDeclaredConstructors(Class.java:1836)
    at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.getDeclaredConstructors(IntrospectionTypeInfoFactoryImpl.java:489)
    at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.getConstructors(IntrospectionTypeInfoFactoryImpl.java:146)
    at org.jboss.reflect.plugins.ClassInfoImpl.getDeclaredConstructors(ClassInfoImpl.java:424)
    at org.jboss.beans.info.plugins.AbstractBeanInfoFactory.getConstructors(AbstractBeanInfoFactory.java:206)
    at org.jboss.beans.info.plugins.AbstractBeanInfoFactory.getBeanInfo(AbstractBeanInfoFactory.java:151)
    at org.jboss.config.plugins.AbstractConfiguration.getBeanInfo(AbstractConfiguration.java:87)
    at org.jboss.kernel.plugins.config.AbstractKernelConfig.getBeanInfo(AbstractKernelConfig.java:80)
    at org.jboss.kernel.plugins.config.AbstractKernelConfigurator.getBeanInfo(AbstractKernelConfigurator.java:77)
    at org.jboss.kernel.plugins.config.AbstractKernelConfigurator.getBeanInfo(AbstractKernelConfigurator.java:96)
    at org.jboss.kernel.plugins.dependency.PreInstallAction.installActionInternal(PreInstallAction.java:90)
    at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)
    at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:774)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:540)
    at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:121)
    at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:51)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
    at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
    at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
    at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
    at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.jboss.annotation.ejb.RemoteBindings
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:292)
    at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1119)
    at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:798)
    at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:441)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 60 more 
```

当然，如果需要，我可以提供有关该问题的更多详细信息，但坦率地说，我不知道该放什么。你知道是否有任何 JBoss 组件使用这个注解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:26:01.310

内部肯定会使用它。所以去[这个 maven 链接](http://mvnrepository.com/artifact/jboss/jboss-annotations-ejb3/4.2.2.GA)，下载二进制/jar 或使用`pom dependency`并将 . 添加`jar`到您的应用程序类路径中。

# jquery - Bootstrap Modal 无法通过 javascript 工作

> ID：16084189
> 
> 赞同：0
> 
> 时间：2013-04-18T13:23:02.337
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我通过函数内部的 jquery 调用引导模式以获取错误消息，如下所示：

```
$('#validateButton').click(function() {

    var registrationLocation = $('#url').val();

    if (registrationLocation.indexOf("http") ==0) {
        // TODO - hardcoded DataFlow - this MUST be fixed!
        var hc06DfUrn = "urn:sdmx:org.sdmx.infomodel.datastructure.Dataflow=ESTAT:HC06(1.0)";
        $.getJSON("/" + webappName + "/ws/rest/registerservice?url=" + registrationLocation + "&dataflowurn="+hc06DfUrn, registerFileSuccess).error(displayErrorDialog);
    } else {
        $.getJSON("/" + webappName + "/ws/rest/registerfile?url=" + registrationLocation, registerFileSuccess).error(displayErrorDialog);
    }
    $('#errorDialog').modal('show')
}); 
```

这是我`html`的模态：

```
<div id="errorDialog" class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Modal header</h3>
        </div>
            <div class="modal-body">
            <p>One fine body…&lt;/p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-primary">Save changes</button>
        </div>
  </div> 
```

我看到了淡入淡出效果，但是当我检查页面上的 html 时，模态似乎为空：

```
<div class="modal-backdrop fade in">
    <div></div>
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:22:49.533

您需要为要放置的模态主体（容器）创建一个 DIV：

```
<div class="modal-backdrop fade in" id="myModal">
    <div id="myModalContainer"></div>
</div> 
```

然后单击按钮将模态体传递到容器 DIV 中：

```
$('#validateButton').click(function () {
    var url = "/SomeModal/Url";
    $.get(url, function (data) {
        $('#myModalContainer').html(data);
        $('#myModal').modal('show');
    });
}); 
```

# javascript - Javascript 数组和对象键

> ID：16084190
> 
> 赞同：0
> 
> 时间：2013-04-18T13:23:10.330
> 
> 标签：javascript

我有一个 JSON 响应，我从自定义 Web 服务返回，如下所示：

```
var data = { 
    AZ:{charge:123,count:324},
    TN:{charge:123,count:7545},
    TX:{charge:165,count:345}
} 
```

我希望循环使用我通过另一个 json 调用返回的状态缩写数组。我不需要遍历所有状态，只是这个 json 调用指定的特定状态。所以我最终得到了一系列州缩写，如下所示：

```
var states = ["AZ","TX"]; 
```

然后我尝试遍历数据并拉出charge属性，如下所示：

```
console.log(data[states[i]].charge); 
```

但是，当我这样做时，我会从数据中得到一个未定义的结果。当我得到状态缩写时，它就在那里，当我在此调用之前注销数据时，所有数据都在那里。我可以通过执行以下操作来引用数据中的每条记录

```
console.log(data["TN"].charge); 
```

有人愿意解释为什么`console.log(data[states[i]].charge);`，但另一个人愿意吗？另外我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:26:02.533

您正在使用`AX`and`TX`作为键，`data`但它们不是字符串，它们是变量。添加引号使它们成为字符串。

```
var states = ['AX','TX']; 
```

并且为了避免代码中可能出现的错误，请在尝试访问该属性之前检查是否`data[states[i]]`不是。`undefined``charge`

```
var stateData = data[states[i]];

if(!stateData) return; //or `continue` if inside a loop to skip

console.log(stateData.charge); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:26:43.640

如果`i = 0`那么你应该得到未定义，因为`states[0] === "AX"`你`"AX"`的`data`. 如果`i = 1`你应该得到`165`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:32:06.647

这可能是一个错字，但看起来您在 var states 中的状态列表与数据对象中的键不同，特别是“AX”不是数据对象示例中的键

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:36:03.577

我刚试过这个：

```
<script lang='javascript'>  
var data = { 
    AZ:{charge:123,count:324},
    TN:{charge:123,count:7545},
    TX:{charge:165,count:345}
}

var states = ['AX','TX'];
console.log(data[states[1]].charge);
console.log(data["TN"].charge);

</script> 
```

它输出：

```
165
123 
```

因此，如果它是从 api 调用返回的调用，它可能会作为变量返回，因此您必须先引用它，然后将其传递给控制台。就像是：

```
var charge = data[states[i]].charge
console.log(charge) 
```

您还应该首先检查数据数组中是否存在 states[i]。

# css - Firefox 文本区域大小错误？

> ID：16084191
> 
> 赞同：3
> 
> 时间：2013-04-18T13:23:13.720
> 
> 标签：css, firefox, textarea, dimensions

我正在尝试创建一个固定的文本区域，仅使用 CSS 填充浏览器窗口的整个宽度和高度，以下在 Chrome 中完美运行：

```
textarea {
    border: 2px solid #3D6AA2;
    padding: 5px;
    position: fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    resize: none;
} 
```

[http://jsfiddle.net/BulletzBill/FZr9k/1/](http://jsfiddle.net/BulletzBill/FZr9k/1/)

但是，如果您在 Firefox 中查看小提琴，它似乎根本没有考虑`bottom`or`right`规则。这是 Firefox 中的一个已知错误，还是有任何解决方法？如果可能的话，我想避免使用 javascript/window resize listeners。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:26:38.420

这是您的[jsfiddle的更新](http://jsfiddle.net/FZr9k/8/)

你需要使`width:100%`,`height:100%`和`box-sizing: border-box;`

您只需要 2 个定位点`top`和`left`

# css - css效果中的onmouseover将图像向下推，无法弄清楚显示：inline-block code

> ID：16084206
> 
> 赞同：0
> 
> 时间：2013-04-18T13:23:52.017
> 
> 标签：css, image, resize, hover, onmouseover

`CSS`使用效果调整图像大小时出现问题`mouseover`。我知道网站上有一些问题有同样的问题，这与`float: left`我也在使用的代码有关，但是我的代码有点不同，因为我有其他效果并且似乎无法获取`display: inline-block`代码适合我的情况。

我认为它可能像一行代码一样简单，但我没有看到它。

1.  我打开了一个包含 4 个图像的窗口`onmouseover`，但是当最右边的图像打开时，它会下降。如何防止浏览器这样做？
2.  第二个问题是当悬停在第 4 张图像上时，如何使其他 3 张图像变窄？

感谢任何帮助。这是代码：

[http://mycodeonline.blogspot.nl/](http://mycodeonline.blogspot.nl/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:13:36.627

您可能需要使用 CSS 溢出来实现您所说的。这是使用您的代码设置的示例。

[http://jsfiddle.net/7HnzF/](http://jsfiddle.net/7HnzF/)

我在它周围添加了一个额外的 div 和几个类。一个是图像移动的 div，这样它们就不会碰到边缘并掉下来。`<div class="window"></div>`您可以根据需要设置 px 宽度。该 div 的溢出将被隐藏。

# css - 如何禁用链接的引导悬停颜色？

> ID：16084209
> 
> 赞同：57
> 
> 时间：2013-04-18T13:24:06.107
> 
> 标签：css, twitter-bootstrap, href

我正在使用引导程序。

引导程序定义

```
a:hover, a:focus {
    color: #005580;
    text-decoration: underline;
} 
```

我有这个链接/CSS-classes

```
<a class="green" href="#">green text</a>
<a class="yellow" href="#">yellow text</a> 
```

如何禁用胡佛颜色？

我希望绿色链接保持绿色，黄色链接保持黄色，而不覆盖每个班级的 :hover ？（这个问题不是强制性的，依赖于引导程序）。

我需要类似的东西

```
a:hover, a:focus {
    color: @nonhoovercolor;
} 
```

我认为

```
.yellow {
    color: yellow !important;
} 
```

不是一个好习惯。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-08-27T08:48:43.377

如果有人在乎，我最终得到：

```
a {
    color: inherit;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-18T13:32:49.040

我会选择[这样的 JSFiddle](http://jsfiddle.net/7vXC5/)：

HTML：

```
<a class="green" href="#">green text</a>
<a class="yellow" href="#">yellow text</a> 
```

CSS：

```
body  { background: #ccc }
/* Green */
a.green,
a.green:hover { color: green; }
/* Yellow */
a.yellow,
a.yellow:hover { color: yellow; } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-03T05:17:32.990

```
a {background-color:transparent !important;} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-21T03:49:16.480

对我来说，上述简单的解决方案都不起作用，但是通过只改变悬停我就能让它工作：

```
 :hover {
    color: inherit;
    text-decoration: none;
  } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-05T10:56:23.493

如果您喜欢在现实世界系统中永远不应该做的丑陋黑客行为；您可以从 document.styleSheets 中删除所有 :hover 样式规则。

只需使用 JavaScript 浏览所有 CSS 样式并删除所有在其选择器中包含 ":hover" 的规则。当我需要从引导程序 2 中删除 :hover 样式时，我使用此方法。

```
_.each(document.styleSheets, function (sheet) { 
    var rulesToLoose = []; 
    _.each(sheet.cssRules, function (rule, index) { 
        if (rule.selectorText && rule.selectorText.indexOf(':hover') > 0) { 
            rulesToLoose.push(index);
        }
    });

    _.each(rulesToLoose.reverse(), function (index) {
        if (sheet.deleteRule) {
            sheet.deleteRule(index);
        } else if (sheet.removeRule) {
            sheet.removeRule(index);
        }
    });
}); 
```

我确实使用下划线来迭代数组，但也可以用纯 js 循环编写那些：

```
for (var i = 0; i < document.styleSheets.length; i++) {} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-17T18:46:54.330

我不是 Bootstrap 专家，但在我看来，您应该定义一个名为**nohover**的新类（或类似的东西），然后在您的链接代码中添加该类作为最后一个属性值：

```
<a class="green nohover" href="#">green text</a>
<a class="yellow nohover" href="#">yellow text</a> 
```

然后在您的 Bootstrap LESS/CSS 文件中，定义**nohover**（使用上面的 JSFiddle 示例）：

```
a:hover { color: red  }
/* Green */
a.green  { color: green; }
/* Yellow */
a.yellow  { color: yellow; }
a.nohover:hover { color: none;  } 
```

在这里分叉 JSFiddle：http: [//jsfiddle.net/9rpkq/](http://jsfiddle.net/9rpkq/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-18T13:25:33.420

标记`color: #005580;`为`color: #005580 !important;`。

它将覆盖默认引导悬停。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-10T06:03:10.813

如果您想为链接设置默认颜色但继续使用[wutzebaer 答案](https://stackoverflow.com/a/18460960/4700922)，请尝试以下操作：

```
body a {
    color:pink; /*this is the default link color*/
}
a {
  color:inherit;
}
.green {
  color:green
}
.red {
  color:red
}
```

```
<a class="green">Green</a>
<a class="red">Red</a>
<a>Default</a>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-20T10:11:09.840

如果由于某种原因您仍在寻找超过 8 年历史的问题的答案 - 自 v4.2 以来`.text-reset`的 Bootstrap 具有此用例的类（基本上实现了 wutzebaer 答案）。[在此处](https://getbootstrap.com/docs/4.2/utilities/text/#reset-color)查看文档

# php - 在 wordpress admin 中将动态输入字段添加到小部件表单中

> ID：16084211
> 
> 赞同：1
> 
> 时间：2013-04-18T13:24:14.627
> 
> 标签：php, javascript, jquery, wordpress

我正在制作一个创建幻灯片的 wordpress 小部件。我希望它支持幻灯片中动态数量的图像，因此我需要在小部件的管理表单中为每个新上传的图像添加一个额外的输入字段。

我的问题是我无法弄清楚如何将动态创建的字段的值传递给小部件`update()`函数。

我有一个数组，它在小部件的后端保存图像路径，我的目标是用创建的输入字段的值填充该数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:59:16.510

知道小部件是如何工作的，我相信这是不可能的（拥有动态数量的输入字段）。无论如何输入纯文本，您可以做的是在一个输入字段中添加所有图像路径，并带有一些分隔符，而不是在前端显示时拆分。

# jquery - 如何使用 jquery mobile 向我的动态创建的列表视图添加更多细节？

> ID：16084219
> 
> 赞同：2
> 
> 时间：2013-04-18T13:24:34.117
> 
> 标签：jquery, html, jquery-mobile, jquery-mobile-listview

我将如何在下面的代码中添加 href 和 listview 标头。如果我在 html 部分添加它，我不会得到下面的列表 html 和 js

```
 <script type="text/javascript">
                            $(document).on("pagebeforeshow", "#index1", function() {
                                $(function(){
                                    var items="";
                                    $.getJSON("check-events.php",function(data){
                                    $.each(data,function(index,item) 
                                    {
                                    items+="<li>"+item.enddate+"</li>";
                                     });
                                    $("#contacts").html(items); 
                                    $("#contacts").listview("refresh");
                                    });
                                });
                            });  
                        </script>

            <div data-role="fieldcontain">
                        <ul id="contacts" data-role="listview" data-divider-theme="b" data-inset="true">

            </ul>
            </div> 
```

我在哪里放这个

```
<li data-role="list-divider" role="heading">
                List view
            </li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:29:55.330

让您的 HTML 代码如下所示：

```
<ul id="contacts" data-role="listview" data-divider-theme="b" data-inset="true">
    <li data-role="list-divider" role="heading">
        List view
    </li>                           
</ul> 
```

而不是这个 jQuery 行：

```
$("#contacts").html(items); 
```

使用这个：

```
$("#contacts").append(items); 
```

这样，在您开始填充标题之前，标题将位于列表视图中，并且附加功能将在列表视图中添加新内容，而不会删除以前的内容。

# java - BorderLayout 正确的语法

> ID：16084224
> 
> 赞同：-2
> 
> 时间：2013-04-18T13:24:52.090
> 
> 标签：java, swing, syntax, border-layout

据我所知 add 方法的语法是

```
add(Component , String); 
```

前任。

```
add(new Button("North"), BorderLayout.NORTH); 
```

但我在一个类中看到了 add 方法的语法，它通过了编译过程。

```
add(String , Component); 
```

它是下面的添加方法：

```
add("North", new Button("North")); 
```

有人可以解释一下这里发生了什么，这是否可行，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:31:25.833

已在 Java Doc 中显示，Container 类有[5 个不同的 add() 方法重载](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html)

在您的第一个示例中，BorderLayout.NORTH 是一个常量，用于定义组件在容器中的位置。

在您的第二个示例中，“North”是您为组件指定的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:36:28.020

该方法`add(Component , Object);`添加了一个组件，其约束在第二个参数中指定。该类`BorderLayout`使用`String`约束实例，但其他布局使用其他对象类型。例如，`GridBagLayout`使用 的实例`GridBagContraints`。

该方法`add(String , Component);`添加一个组件，其名称作为第一个参数。

# sql-server - 从以前附加的同名数据库中附加一个数据库“继承”模式更改

> ID：16084231
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:03.380
> 
> 标签：sql-server, restore, detach

我们刚刚遇到了一个问题，即新附加的 Dev 实例“拾取”了对以前的 Dev 数据库进行的架构更改，但在将其重命名并附加为 Dev 之前，Live DB 副本中不存在这些更改。

Dev DB 作为一个日志传送备用数据库开始，它完全恢复、分离，文件被重命名，然后作为新的 Dev DB 重新连接。请注意，之前的 Dev 数据库并没有被删除，只是被分离了。另请注意，旧的和新的 Dev DB 都是同一原始数据库的“分支”。

现在这是一个开发/测试环境，所以它不是特别成问题，但它让我担心我们会针对一个静默更改的开发创建一些东西，这会在应用它时破坏 Live。

所以我的工作理论是，这与 SQL Server 内部使用的唯一标识符有关，并且可能与 Dev 更改的时间有关。

任何人都可以证实这一点或阐明这个问题吗？

编辑：更多细节架构更改涉及在几个表的末尾添加新的可为空列。因此，它们无疑是次要的，重要的是不涉及任何实际数据。此外，在重新附加之前，日志传送副本一直处于待机状态（因此为只读），我查看了查询日志以验证没有运行 DDL 更改。

也就是说，不幸的是我无法复制这个问题。只是为了测试它而创建的小型数据库不会发生这种情况，我删除了开发数据库并从完整备份重新创建它以解决问题，因此我无法重复确切的过程。

我提出这个问题的目的是确定我们是否经历了一次特殊的侥幸，或者我们的流程根本上是不健全的。我现在倾向于特殊的侥幸。

# c# - 如何从另一个 WinForm 通过 C# WinForm 查看

> ID：16084233
> 
> 赞同：3
> 
> 时间：2013-04-18T13:25:13.840
> 
> 标签：c#, winforms

我在 C# 中使用 winforms 制作了一个捕获应用程序。我正在尝试从另一个 winform 中查看一个 winform。

我现在拥有的是这样的： ![截屏](https://i.stack.imgur.com/oHyuL.png)

不透明的黑色背景是**winform编号1**

带有透明填充的蓝色矩形在**winform 2中**

我需要一种通过winform 1查看网站页面内容的方法。

这就是我想要完成的事情： ![应该怎么样](https://i.stack.imgur.com/nB92d.png)

我已经尝试将填充颜色设置为透明键颜色，如下所示：

**这是 winform 1 号的 TransparencyKey 代码：**

```
this.TransparencyKey = System.Drawing.Color.Pink; 
```

**这是在 2 号 winform 上绘制矩形的代码：**

```
SolidBrush TransparentBrush = new SolidBrush(Color.Transparent);
Pen MyPen = new Pen(Color.Blue, 2);

private void ThePaint(object sender, System.Windows.Forms.PaintEventArgs e)
        {
            g.FillRectangle(TransparentBrush, CurrentTopLeft.X, CurrentTopLeft.Y, RectangleWidth, RectangleHeight);
            g.DrawRectangle(MyPen, CurrentTopLeft.X, CurrentTopLeft.Y, RectangleWidth, RectangleHeight);
            RectangleDrawn = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:36:47.693

您可以尝试在表单 2 上放置一个面板，然后将其颜色设置为“粉红色” - 这样，它将通过表单 2 透明到后面的网页。唯一的缺点是，如果你有任何控件，它看起来确实很奇怪。这一切都可以通过 WinForm 设计器实现。

# c - 从函数加载运行器返回值

> ID：16084237
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:26.140
> 
> 标签：c, loadrunner, load-testing

为谁使用 HP LoadRunner，我新使用 LoadRunner VUGen，我使用“web_submit_data”发送特定请求，我只想知道如何确保请求成功发送。我尝试了 LoadRunner 帮助，但没有关于如何处理函数返回值的详细信息。下面是我在脚本中使用的行。它给了我一个语法错误。

```
 status = web_url("{WebServerURL}",
                "URL=http://{WebServerURL}", 
                "TargetFrame=", 
                "Resource=0", 
               "RecContentType=text/html", 
                "Referer=", 
                "Snapshot=t1.inf", 
                "Mode=HTML", 
                LAST);

            If (status==LR_FAIL)
                {
             lr_end_transaction("PM_01_NavigateToWeightWatchers", LR_FAIL);

             lr_exit(LR_EXIT_MAIN_ITERATION_AND_CONTINUE, LR_AUTO);
                }
            lr_end_transaction("PM_01_NavigateToWeightWatchers",LR_PASS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:50:28.280

这里没有捷径可走，您需要参加经过认证的讲师的培训，并且您需要参加长达一年的实习。这不是你可以随便投入的职业。

关于您的问题，您寻求信息的主题是 30% 的标准网络虚拟用户培训课程涵盖的主题。该主题也包含在产品教程中，并且在产品文档中进行了广泛的介绍。

这是一条通往答案的道路，而不是答案本身。你将不得不锻炼研究技能才能找到答案。

如果您像许多人一样处于这个位置，是因为您的经理让您担任这个角色并将汽车的钥匙（LoadRunner）交给您，并要求您赢得印第安纳波利斯 500（成​​功的性能测试）。这些情况总是导致性能测试阶段的失败，对项目价值低，对客户价值低。我很乐意直接与您的项目管理人员和您的客户管理人员讨论这将如何以及为什么会对他们的项目产生负面影响，实际上是增加而不是降低部署风险。

一个糟糕的性能测试比没有性能测试更糟糕，因为它不合理地设定了对生产中的性能和缺陷的期望。如果您认为您从绩效测试团队获得的价值很低，因为他们的结果与生产中看到的结果不符，那么您需要从雇用训练有素/有效的绩效测试人员开始，而不是那些在简历上有一两个关键字或投掷的人未经培训的人进入角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:57:04.970

在您的代码中，如果您还没有这样做，您需要在 Action() 函数的顶部将“状态”声明为 int：

整数状态；

此外，您的陈述中的“如果”应该是小写的：

if (status == LR_FAIL) { // 代码 }

通过这些更改，您发布的代码应该可以编译，但是它可能无法捕获您认为正在捕获的内容。将返回的“状态”告诉您函数“web_url()”是否成功执行，仅此而已。如果页面请求返回一个错误页面，您的代码仍然会认为它是成功的，因为函数本身正确执行。它没有告诉您有关您请求的页面内容的任何信息。

如果您真正想要的是查看请求该页面的响应并确定它是否有效，您需要确认字符串（ web_reg_find() ）的存在或关联页面中的值。使用函数“ **web_reg_save_param()** ”从请求的页面中捕获内容并将其写入日志文件，围绕它编写一些错误处理或稍后在脚本中使用值。在帮助文件中查找该函数并进行研究，因为学习相关性是开始使用 LoadRunner 的关键。

祝你好运！

# r - 是否可以在都是矩阵的 A 和 B 上应用外部，以及采用 2 个向量并返回一个标量的函数？

> ID：16084238
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:26.963
> 
> 标签：r

我希望我可以使用类似的东西：

```
 outer(A,B,myfun) 
```

实现类似：

```
a<-matrix(nrow=nrow(A),ncol=nrow(B))
for(i in 1:nrow(A))
    for (j in 1:nrow(B))
    {
        a[i,j]<-myfun(A[i,],B[j,])
    } 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:19:50.307

无法给出一般性答案，因为详细信息`myfun`可能会影响答案。

```
ares <- expand.grid(1:nrow(A), 1:nrow(B))
ares$res <- myfun(A[ares[,1], ), B[res[,2] ) 
# but may need mapply("myfun", A[ares[,1], ), B[res[,2] ) on which Vectorize is based
# or do.call(my.fun, ....)
a <- matrix(ares$res, nrow(A), nrow(B) ) 
```

# cordova - OSX 上的 BB10 模拟器

> ID：16084243
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:34.843
> 
> 标签：cordova, blackberry-10

我正在创建一个应用程序，当网络进入离线状态时应该显示一条消息。但我不知道如何模拟离线状态。

如何在 BB10 Alpha 模拟器上模拟网络中断情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:57:25.573

不确定 BB10 模拟器，但对于 iPhone 模拟器，我只需拔下计算机的以太网电缆。

# asp.net - 在页面渲染之前处理我的 DBContext 对象是否明智？

> ID：16084245
> 
> 赞同：1
> 
> 时间：2013-04-18T13:25:41.003
> 
> 标签：asp.net, entity-framework, dbcontext

我在我的 asp.net 网站项目中广泛使用 DBContext。我通常做的是我有一个页面类可用的 dbcontext 实例，我在页面加载时实例化它并在整个代码中使用它，但是我不会处理它。对我来说使用页面上的 Pre_Render 事件来处理 dbcontext 是否明智（我会假设它在那时已经完成使用？）

感谢您的任何提示。

**解决方案**

所以我最终为我的 Dotnetnuke 模块编写了一个小扩展类，它为我处理我的 dbcontext，似乎工作得很好，但到目前为止我只在几个模块中推出了它。

```
public class ModuleExt : PortalModuleBase
{
    private BPEntities _ent;
    public BPEntities ent 
    {
        get{
            if (_ent == null)
            {
                _ent = new BPEntities();
            }
            return _ent;
        }
    }
    protected void Page_PreRender(object sender, EventArgs e)
    {
        ent.Dispose();
    }
} 
```

这将使我能够继续使用 ent 对象（我的 DBContext），而不必担心在预渲染时为我完成的处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:35:24.267

如果您愿意，您当然可以这样做，但您需要记住一件事：如果您在任何时候想要从该对象引用子对象/集合，您需要确保它是在处理上下文之前补充水分。否则，您将收到一个异常，告诉您上下文已被释放。

有些人会说通过应用程序只有一个上下文，这当然也是一种有效的方法，但我更喜欢你现在正在做的事情。我不喜欢一直打开数据库连接。

# jquery - 如何使用 jquery 验证插件在对话框表单上应用验证？

> ID：16084249
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:50.090
> 
> 标签：jquery, cordova, jquery-mobile, jquery-plugins, jquery-validate

我试图在单击按钮时打开一个对话框，打开的对话框包含一个登录表单，包括用户名和密码以及登录按钮。这是我打开对话框的 html 代码：HTML 代码：

```
<body>
<div data-role="page">
 <div data-role="header" data-theme="e">
 <h3>PRAYERS APP</h3>
 </div>
<div data-role="content">
   <div class="center-wrapper">
      <a href="#login_box"  id="showdialog" data-transition="pop" data-rel="dialog" data-role="button" data-icon="plus" data-theme="e">USER LOGIN AREA</a>
   </div>

</div>
 </div>

<div data-role="dialog" id="login_box" class="login-popup" data-dismissible="false">

<a href="#" id="closeBtn" class="ui-btn-right" data-role="button" data-rel="back" data-icon="delete" data-iconpos="notext">close btn</a>  

 <div data-role="content">
    <div class="ui-body ui-body-b">
            <form name="login" id="formlogin" method="get" action="" accept-charset="utf-8">

                <div data-role="fieldcontain">
                    <label for="username">USER NAME:</label><br/>
                    <input type="text" name="username" id="usrname" placeholder="your name"/><br/>
                </div>

                <div data-role="fieldcontain">
                    <label for="password">PASSWORD:</label><br/>
                    <input type="password" name="password" id="usrpswd" placeholder="please enter your password"/><br/>
                </div>

                <fieldset class="ui-grid-a">
                 <div class="ui-block-a">
                 <a href="#" id="signinbtn" data-role="button" data-theme="b" data-icon="check" style="text-align:center; float:right;">SIGN  IN</a></div>
                </fieldset>

                </form>
                    </div>
                      </div>
                       </div>
<!--  -----login page   end------------------->                        
</body> 
```

当我单击“用户登录区域按钮”时，另一个问题是在另一个页面上显示对话框，而我想在同一页面上打开一个对话框：应用淡入淡出的 JS 代码：

```
<head>
<script>
$(document).ready(function()
 {
<!-- ///////////////////////////////login dialog and its validation start//////////////////////////////////////////////////////////--> 

    var loginBox;
          $('#showdialog').click(function()
         {
            loginBox = $(this).attr('href'); 
            //Fade in the Popup and add close button
            $(loginBox).fadeIn(250);
            //Set the center alignment padding + border
            var popMargTop = ($(loginBox).height() + 24) / 2;
            var popMargLeft = ($(loginBox).width() + 24) / 2;

            $(loginBox).css({
                'margin-top': -popMargTop,
                'margin-left': -popMargLeft
                });
            $('body').append('<div id="mask"></div>');
            $('#mask').fadeIn(250);

            return false;
         });

        // When clicking on the close button  or the mask layer the popup closed
         $('#closeBtn, #mask').live('click',function()
          {
             $('#mask, .login-popup').fadeOut(250,function()
                {
                 $('#mask').remove(); 
                });
             return false;
          });
   });
</script>
</head> 
```

现在在打开对话框的文本框上应用验证时遇到问题，因为我正在使用此代码但它不起作用：我在脚本标记中应用此代码

```
$('#login_box').dialog(
    {
    open: function(event,ui)
    {
    $('#formlogin').validate()
    {
    rules:
    {
    username:
        {required: true,
        minlength: 4
        },
        }
    password:
      {required: true,
      minlength: 8
      }
    },
     messages:
     {
     username: 
     {required:"pls enter user name",
     minlength: $.format("Keep typing, at least {0} characters required!"),
     }
    password:
     {
     required:"pls enter password",
     minlength: $.format("password should be atleast {0} characters")
    }

    }
    } 
    }
    }); 
```

此外，对话框的登录按钮不可点击，无法触发此功能：

```
 $('#signinbtn').on('click',function()
            {
                alert("eerer");
                doLogin();

            }); 
```

我想要这种类型的验证是小提琴： [formvalidation](http://jsfiddle.net/erum/Ztn2a/) 我已经在我的项目中应用了所有 jquery 插件：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:13:30.070

`.validate()`是在表单上*初始化*插件的方法。将其上移一层，使其立即在您的 DOM 就绪处理程序中。

您的`.validate()`代码中还有很多语法错误。适当的缩进和格式将帮助您轻松查看它们...

```
$('#formlogin').validate() { // <-- should be .validate({
    rules: {
        username: {
            required: true,
            minlength: 4
        },
    } // <-- extra } puts password outside of rules
    password: {
        required: true,
        minlength: 8
    }
},
messages: {
    username: {
        required: "pls enter user name",
        minlength: $.format("Keep typing, at least {0} characters required!"), // <-- extra comma
    } // <-- missing a comma
    password: {
        required: "pls enter password",
        minlength: $.format("password should be atleast {0} characters")
    }

}
} // <-- should be a }); 
```

这个格式正确...

```
$(document).ready(function () {

    $('#formlogin').validate({
        rules: {
            username: {
                required: true,
                minlength: 4
            },
            password: {
                required: true,
                minlength: 8
            }
        },
        messages: {
            username: {
                required: "pls enter user name",
                minlength: $.format("Keep typing, at least {0} characters required!")
            },
            password: {
                required: "pls enter password",
                minlength: $.format("password should be atleast {0} characters")
            }
        }
    });

}); 
```

**简单演示：http: [//jsfiddle.net/qzdyk/](http://jsfiddle.net/qzdyk/)**

我为您的演示添加了一个`submit`按钮。`form`该插件将自动捕获并处理a和 a的`click`事件。`<input type="submit" />``<button>click</button>`

# git - 从 GitHub 存储库推送电子邮件通知

> ID：16084256
> 
> 赞同：0
> 
> 时间：2013-04-18T13:25:59.733
> 
> 标签：git, github

抱歉，如果之前已经回答过（如果是，请参考任何链接）。我正在寻找一种将 git 推送的电子邮件通知发送到 GitHub 存储库的方法。

我意识到有一个可用的电子邮件服务挂钩。但我想发送到 3 个地址并为此设置一个 googlegroup 似乎有点矫枉过正。我已经阅读了关于 post-receive 钩子的信息，但我不确定如何在 GitHub 上进行设置。想知道是否有办法做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:27:44.260

除了电子邮件服务挂钩之外，Github 上目前没有可用的电子邮件推送通知。因此，您不能规范地将此类通知一次发送到多个电子邮件地址。

但是，您可以通过设置邮件列表或电子邮件转发来解决此问题，将电子邮件分发给所有相关方。

# security - 可以在 CouchDB 中禁用本地文档吗？

> ID：16084265
> 
> 赞同：2
> 
> 时间：2013-04-18T13:26:34.670
> 
> 标签：security, couchdb, administration

本地文档与普通 CouchDB 文档的不同之处在于它们不会被复制，不会出现在任何视图中（包括 _all_docs）并且不受验证功能的约束。只能使用必须知道才能检索的文档 ID 来访问它们。有关详细信息，请参阅[http://docs.couchdb.org/en/1.3.x/api/local.html](http://docs.couchdb.org/en/1.3.x/api/local.html)。

恶意用户可以在面向公众的 CouchDB 中滥用此功能在服务器上存储任意数据。有趣的是，数据库或服务器管理员甚至无法通过查看日志文件以外的任何其他方式查看这些文档。

所以我想知道是否有任何选项可以禁用 CouchDB 中的本地文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:10:53.390

不，没有办法做到这一点，对不起。不过，您的评论都是正确的，这可能是在 CouchDB 中改进以避免此问题的好方法。随意在[https://issues.apache.org/jira/browse/COUCHDB](https://issues.apache.org/jira/browse/COUCHDB)提交错误，人们肯定会考虑它，或者解释为什么它不实用。

另一方面，更实际地，授予某人对您的数据库的写访问权限需要一定程度的信任，即他们不会是恶意的或有很大缺陷的。是的，他们可以偷偷地创建本地文档，但同样地，他们也可以删除数据库中的所有内容，或者用其他普通文档填充它并使服务器崩溃，然后您仍然必须通过并单独删除（甚至是批量删除要求您列出每个文档 ID），或者只是删除整个数据库。

如果您的数据库客户端在此级别上不值得信赖，那么您不应该让他们直接访问您的数据库。在这种情况下，您应该在它们和管理这些交互以控制此类事情的 CouchDB（即具有固定形式和诸如此类的网站）之间放置一些服务。

# android - ConvertView Android 的 SetCurrentPosition

> ID：16084268
> 
> 赞同：0
> 
> 时间：2013-04-18T13:26:43.240
> 
> 标签：android

我希望我的 CoverFlow 将当前位置（）设置为我想要的任何数字。但是我在我的 CoverFlow 中找不到任何内置函数来执行此任务。有人对此有解决方案吗，请帮忙。

```
 CoverFlow coverFlow = (CoverFlow) findViewById(R.id.coverflowid);
             coverFlow.setAnimationDuration(1000);
             coverFlow.setSpacing(pixels);
    coverflowAdapter=new CoverflowAdapter(CarouselCompte.this, PostList);
    coverFlow.setAdapter(coverflowAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:35:24.783

您可以简单地将位置设置为您的适配器正在设置的 Listview ，

```
listview.setSelection(position) 
```

适配器将设置该特定位置。

# eclipse - ZF2：找不到 Eclipse 和 zend 库中的错误

> ID：16084277
> 
> 赞同：0
> 
> 时间：2013-04-18T13:27:08.273
> 
> 标签：eclipse, zend-framework2, phpeclipse

我能够成功安装 ZF2 的 zend 骨架框架。但由于某种原因，我在 eclipse 中遇到错误，并且应用程序找不到 zend 库类。

![在此处输入图像描述](https://i.stack.imgur.com/yBoZZ.png)

我的 init_autoloader.php 中有这个

```
 $zf2Path = false;
if (is_dir('vendor/ZF2/library')) {
    $zf2Path = 'vendor/ZF2/library';
} elseif (getenv('ZF2_PATH')) {      // Support for ZF2_PATH environment variable or git submodule
    $zf2Path = getenv('ZF2_PATH');
} elseif (get_cfg_var('zf2_path')) { // Support for zf2_path directive value
    $zf2Path = get_cfg_var('zf2_path');
}

if ($zf2Path) {
    if (isset($loader)) {
        $loader->add('Zend', $zf2Path);
    } else {
        include $zf2Path . '/Zend/Loader/AutoloaderFactory.php';
        Zend\Loader\AutoloaderFactory::factory(array(
            'Zend\Loader\StandardAutoloader' => array(
                'autoregister_zf' => true
            )
        ));
    }
} 
```

我在供应商中看到两个 zendframework 文件夹，ZF2 是空的，而 zendframework 文件夹包含 bin、demos、library、resources 等文件夹。这是图书馆应该驻留的地方吗？如果是，为什么我有 ZF2 空文件夹？

![在此处输入图像描述](https://i.stack.imgur.com/jyhwL.png)

两个问题： 1\. 应用如何找到库类？2\. 如果我想创建一个 google places api 类。我把它放在哪里，如何让它从任何模块访问？

更新：根据 Sam 的评论，我做了一些搜索，得到了解决我的 Eclipse 问题[的帖子。](https://stackoverflow.com/questions/4589960/why-is-eclipse-php-not-recognizing-namespace-declarations)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:25:06.393

您可能已经为 PHP 5.1/2 安装了 Eclipse

```
Window > Preferences > PHP > PHP Interpreter > PHP Version > 5.3 
```

它现在会神奇地识别命名空间。

如果您愿意，也可以逐个项目地进行设置。

# php - exif 在移动设备上使用 php 上传图片时剥离 GPS 标头？

> ID：16084278
> 
> 赞同：3
> 
> 时间：2013-04-18T13:27:11.130
> 
> 标签：php, iphone, file-upload, jpeg, exif

我有一个脚本可以将照片上传到用 PHP 编写的网站。当我在我的 iPhone 上使用 Safari 上传图片时，当我检查 exif 数据时，某些标题似乎被剥离。当我从我的 iPhone 拍摄完全相同的照片并将其通过电子邮件发送给自己并从计算机上传时，所有的 exif 数据都在那里。

我想知道 iPhone 上是否有一个设置或我缺少的 PHP 脚本，当我尝试从我的 iPhone 上传时，它可以让我抓住 exif 的 GPS 部分。当我通过我的 iPhone 将图片上传到我的网站时，我想要的只是从 exif_read_data 中获取 GPS 阵列。

我在 Iphone 上的 Safari 中的 Exif 示例：

```
Image type is: JPEG

FILE.FileName: 20130417141031image.jpg
FILE.FileDateTime: 1366225831
FILE.FileSize: 1692449
FILE.FileType: 2
FILE.MimeType: image/jpeg
FILE.SectionsFound: ANY_TAG, IFD0, EXIF
COMPUTED.html: width="3264" height="2448"
COMPUTED.Height: 2448
COMPUTED.Width: 3264
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
IFD0.Orientation: 6
IFD0.Exif_IFD_Pointer: 38
EXIF.ColorSpace: 1
EXIF.ExifImageWidth: 3264
EXIF.ExifImageLength: 2448 
```

用同一部手机拍摄的从我的 PC 上传的同一张图片的 Exif 示例：

```
Image type is: JPEG

FILE.FileName: 20130417142504image.jpeg
FILE.FileDateTime: 1366226835
FILE.FileSize: 1744896
FILE.FileType: 2
FILE.MimeType: image/jpeg
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, EXIF, GPS
COMPUTED.html: width="3264" height="2448"
COMPUTED.Height: 2448
COMPUTED.Width: 3264
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.ApertureFNumber: f/2.4
COMPUTED.Thumbnail.FileType: 2
COMPUTED.Thumbnail.MimeType: image/jpeg
IFD0.Make: Apple
IFD0.Model: iPhone 4S
IFD0.Orientation: 6
IFD0.XResolution: 72/1
IFD0.YResolution: 72/1
IFD0.ResolutionUnit: 2
IFD0.Software: 6.1.3
IFD0.DateTime: 2013:04:17 15:13:39
IFD0.YCbCrPositioning: 1
IFD0.Exif_IFD_Pointer: 204
IFD0.GPS_IFD_Pointer: 594
THUMBNAIL.Compression: 6
THUMBNAIL.XResolution: 72/1
THUMBNAIL.YResolution: 72/1
THUMBNAIL.ResolutionUnit: 2
THUMBNAIL.JPEGInterchangeFormat: 890
THUMBNAIL.JPEGInterchangeFormatLength: 7684
EXIF.ExposureTime: 1/20
EXIF.FNumber: 12/5
EXIF.ExposureProgram: 2
EXIF.ISOSpeedRatings: 50
EXIF.ExifVersion: 0221
EXIF.DateTimeOriginal: 2013:04:17 15:13:39
EXIF.DateTimeDigitized: 2013:04:17 15:13:39
EXIF.ComponentsConfiguration: 
EXIF.ShutterSpeedValue: 2779/643
EXIF.ApertureValue: 4845/1918
EXIF.BrightnessValue: 13523/4727
EXIF.MeteringMode: 3
EXIF.Flash: 16
EXIF.FocalLength: 107/25
EXIF.SubjectLocation: Array
EXIF.FlashPixVersion: 0100
EXIF.ColorSpace: 1
EXIF.ExifImageWidth: 3264
EXIF.ExifImageLength: 2448
EXIF.SensingMethod: 2
EXIF.ExposureMode: 0
EXIF.WhiteBalance: 0
EXIF.FocalLengthIn35mmFilm: 35
EXIF.SceneCaptureType: 0
GPS.GPSLatitudeRef: N
GPS.GPSLatitude: Array
GPS.GPSLongitudeRef: W
GPS.GPSLongitude: Array
GPS.GPSAltitudeRef: 
GPS.GPSAltitude: 55556/297
GPS.GPSTimeStamp: Array
GPS.GPSImgDirectionRef: T
GPS.GPSImgDirection: 19688/145 
```

这是我用于照片的 PHP 脚本的代码，我删除了标题并要求：

```
<?php
require('[...]');
mysql_select_db($db_name, $oConn);

$JobNum = $_POST['JobNum'];

if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 10000000))
{
    if ($_FILES["file"]["error"] > 0)
    {
        ps_log( "Bad Photo Upload - Return Code: " . $_FILES["file"]["error"]);
    }
    else
    {
        ps_log( "Upload: " . $_FILES["file"]["name"]);
        ps_log( "Type: " . $_FILES["file"]["type"]);
        ps_log( "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb");
        ps_log( "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />");

        $photoname = $_FILES['file']['tmp_name'];
        $root = "[...]";
        $location = $_SERVER['DOCUMENT_ROOT'].$root.$photoname;
        $exif = exif_read_data($photoname, 0, true);

        $filename = $exif["FILE"]["FileName"];
        $model = $exif["IFD0"]["Model"];
        $date = $exif["IFD0"]["DateTime"];
        $lon = $exif["GPS"]["GPSLongitude"];
        $lonref = $exif["GPS"]['GPSLongitudeRef'];
        $lat = $exif["GPS"]["GPSLatitude"];
        $latref = $exif["GPS"]['GPSLatitudeRef'];

        $lon = Photos::getGps($lon, $lonref);
        $lat = Photos::getGps($lat, $latref);

        $photo = new UploadedPhoto();
        $photo->JobNum = $JobNum;
        $photo->TempFile = $_FILES["file"]["tmp_name"];
        $photo->FileName = $_FILES["file"]["name"];
        $photo->Comments = $_POST['Comment'];
          $photo->Model = $model ;
  $photo->DateStamp = $date ;
  $photo->Lat = $lat ;
  $photo->Lng = $lon ;
        $photo->SaveGeo();
    }
}
else
{
    echo "Invalid file";
}

header("[...]");?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T20:37:38.107

您唯一能做的就是创建一个本地应用程序（或 Apache Cordova 应用程序）来处理上传。GPS 数据被移动 Safari 剥离。您的应用应按原样上传图片。到目前为止，没有其他方法可以解决它。

可能是这样的：http: [//gonzalo123.com/2013/10/28/taking-photos-with-a-phonegapcordova-application-and-uploading-them-to-the-server/](http://gonzalo123.com/2013/10/28/taking-photos-with-a-phonegapcordova-application-and-uploading-them-to-the-server/)

# java - 尝试使用列表迭代器删除对象

> ID：16084279
> 
> 赞同：3
> 
> 时间：2013-04-18T13:27:12.130
> 
> 标签：java, listiterator

我正在尝试使用列表迭代器从列表中删除一个对象。我已经浏览了网站上的其他解决方案，但没有一个可以缓解错误“线程“主”java.util.ConcurrentModificationException 中的异常”

这是我没有执行的代码：

```
void PatronReturn(String bookName) {
//       get to beginning
    while(listIterator.hasPrevious()) {
        listIterator.previous();
    }
    while(listIterator.hasNext()){
        Book b = listIterator.next();
    if (listIterator.next().getBookTitle().equals(bookName)) { 
        //listIterator.next();
        //listIterator.remove();
        books.remove(b);
        //listIterator.next(); //moves to next so iterator can remove previous ?
        //books.remove(listIterator.next());; // TODO see if this is correct

    }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T13:31:01.563

1.  不要直接从列表中删除项目。使用`remove()`迭代器中的方法。

2.  您的代码也存在缺陷，因为它假定还有其他列表项：

    ```
    while(listIterator.hasNext()){
        Book b = listIterator.next();
        if (listIterator.next().getBookTitle().equals(bookName)) { 
          // eek 
    ```

    在这里你调用`next()`了两次，但你只调用了`hasNext`一次。也许你的意思是：

    ```
    while(listIterator.hasNext()){
        Book b = listIterator.next();
        if (b.getBookTitle().equals(bookName)) { 
          // ... 
    ```

3.  最后，您可以替换：

    ```
    while(listIterator.hasPrevious()) {
        listIterator.previous();
    } 
    ```

    和

    ```
    listIterator = books.listIterator(); 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T13:32:01.723

而不是 books.remove(b)

利用

```
listIterator.remove(); 
```

原因是，迭代器给你 next() 书，如果你只从书中删除这本书，迭代器将“删除”的书仍然作为下一本书。

它在您的代码中不起作用，因为您调用了 .next() 两次，一次是针对书 b，第二次是在比较书名和下一本书时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:51:24.317

```
{   Book toBeReaplced = null; Book tempBook = null;   
void PatronReturn(String bookName)           
{//       get to beginning
while(listIterator.hasPrevious()) {        listIterator.previous();
}
while(listIterator.hasNext()){
    Book tempBook = listIterator.next();
if (b.getBookTitle().equals(bookName)) { 
             toBeReaplced = tempBook;

}

listIterator.remove(bookToBeReplaced);
} 
```

你可以试试上面的代码。我认为它能够解决您的问题，即您遇到了 java.util.ConcurrentModificationException" 错误。有关错误的更多参考，请点击[链接](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:33:33.183

代替 `books.remove(b)`

尝试使用

```
 listIterator.remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:36:02.033

您不能`ArrayList`在迭代时删除项目。

你可以：

*   `ListIterator`使用（每个 next() 最多一次）的 remove() 方法
*   使用另一种`List`实现，例如[CopyOnWriteArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)，保证永远不会抛出`ConcurrentModificationException`，但这在您的情况下可能是矫枉过正。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T13:36:47.943

您不能在迭代列表时删除项目，您应该使用 .remove()

还要删除这个：

```
while(listIterator.hasPrevious()) {
    listIterator.previous();
} 
```

这不是必需的

# git - 为什么我在 git apply 上使用 --3way 时没有打开合并工具？

> ID：16084280
> 
> 赞同：2
> 
> 时间：2013-04-18T13:27:13.847
> 
> 标签：git, git-merge-conflict, mergetool, git-apply

为什么我无法使用带有 -3 选项的 git apply ：

```
$ git apply --3way /tmp/0001-my-patch.patch
error: patch failed: a.h:9
Falling back to three-way merge...
Applied patch to 'a.h' cleanly.
error: patch failed: b.c:6
Falling back to three-way merge...
Applied patch to 'b.c' cleanly.
error: patch failed: drivers/Kconfig:1882
Falling back to three-way merge...
Applied patch to 'drivers/Kconfig' with conflicts.
U drivers/Kconfig 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T22:46:15.313

这是一种配置`diffmerge`为您的合并工具的方法 [取自[此处]](http://adventuresincoding.com/2010/04/how-to-setup-git-to-use-diffmerge)：

```
git config --global merge.tool diffmerge

git config --global mergetool.diffmerge.cmd "diffmerge --merge
--result=\$MERGED \$LOCAL \$BASE \$REMOTE"

git config --global mergetool.diffmerge.trustExitCode true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:33:29.527

从文档中`git apply`：

> --3way
> 当补丁不能干净地应用时，退回到 3-way 合并

如果补丁干净地应用，看起来 3way 将被忽略。

# c# - TableLayoutPanel 不显示我的图片框

> ID：16084281
> 
> 赞同：1
> 
> 时间：2013-04-18T13:27:15.913
> 
> 标签：c#, user-interface, picturebox, tablelayoutpanel

我想获取当前演示文稿的所有 PowerPoint 幻灯片，并将它们与图片框一起添加到我的表格布局面板中，但由于某种原因我的图片框未显示。

```
public partial class PPT_GUI : Form
{
    public PPT_GUI(PowerPoint.Slides Sld)
    {
        InitializeComponent();
        int rowCount = 1;
        PictureBox[] Box;
        Box = new PictureBox[Sld.Count];

        for (int i = 0; i < Sld.Count; i++)
        {
            Sld[i+1].Copy();
            Box[i] = new PictureBox();
            Box[i].Width = 90;
            Box[i].Height = 90;
            Box[i].SizeMode = PictureBoxSizeMode.StretchImage;
            Box[i].BorderStyle = BorderStyle.FixedSingle;
            Box[i].BringToFront();

            tableLayoutPanel1.Controls.Add(Box[i], i%3, rowCount );

            if (i % 3 == 0)
            {
                tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 360F));
                rowCount++;
            }              

            if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Bitmap))
            {
                ImageSource imgSource = BinaryStructConverter.ImageFromClipboardDib();
                Box[i].Image = ImageWpfToGDI(imgSource);
            }
        }
    }
} 
```

# wpf - 基于属性值的 WPF 动画

> ID：16084283
> 
> 赞同：0
> 
> 时间：2013-04-18T13:27:23.633
> 
> 标签：wpf, animation, binding

我有一个依赖属性**double Text**，我想要完成的是每当我更改**Text**属性的值时以**Text度数旋转（使用动画）一行。**

 **有没有比实现 OnTextPropertyChanged 并处理动画更好的方法？或者这可以在 XAML 中完成吗？

这是一个演示代码：

主窗口.xaml

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:l="clr-namespace:WpfApplication1" x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="200" Width="200" x:Name="Root">
    <Grid>
        <TextBox Width="50" Height="20" VerticalAlignment="Top"
                 Text="{Binding Text, ElementName=Root, Mode=TwoWay}"/>
        <Grid Width="100" Height="100" Background="Gray" x:Name="Grid">
            <Line Grid.Row="1" X2="100" Y2="100" Stroke="Red"/>
        </Grid>
    </Grid>
</Window> 
```

和 MainWindow.xaml.cs（没有使用）：

```
namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public static readonly DependencyProperty TextProperty = DependencyProperty.Register(
            "Text", typeof(double), typeof(MainWindow), new FrameworkPropertyMetadata(0.0));

        public double Text
        {
            get { return (double)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:21:04.777

这可以通过 Binding 来实现，如下所示：

```
 <TextBox Width="50" Height="20" VerticalAlignment="Top"
             Text="{Binding Path=Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
    <Grid Width="100" Height="100" Background="Gray" x:Name="Grid">
        <Line Grid.Row="1" X2="100" Y2="100" Stroke="Red">
            <Line.RenderTransform>
                <RotateTransform CenterX="50" CenterY="50" Angle="{Binding Path=Text, Mode=OneWay, Converter={StaticResource ResourceKey=SToD}}"/>
            </Line.RenderTransform>
        </Line>
    </Grid> 
```

您的转换器只需将您的字符串转换为 double `return System.Convert(value.ToString());`。

我在测试时发现的一个很酷的功能是，如果您没有在 TextBox 中键入双精度值，则会自动添加一个验证规则，该规则会返回一个 ValidationError。

要完成这项工作，您必须将 MainWindows DataContext 与`this.DataContext = this;`.

编辑：我写了一个小助手类，它为你做动画：

```
public class DoubleAnimationManager
{
    private static Dictionary<DependencyObject, AnimationHelper> _helperDic = new Dictionary<DependencyObject, AnimationHelper>();

    public static PropertyPath GetProperty(DependencyObject obj)
    {
        return (PropertyPath)obj.GetValue(PropertyProperty);
    }

    public static void SetProperty(DependencyObject obj, PropertyPath value)
    {
        obj.SetValue(PropertyProperty, value);
    }

    public static readonly DependencyProperty PropertyProperty = DependencyProperty.RegisterAttached(
        "Property",
        typeof(PropertyPath),
        typeof(DoubleAnimationManager),
        new PropertyMetadata(
            (o, e) =>
            {
                if (!_helperDic.ContainsKey(o))
                    _helperDic[o] = new AnimationHelper(o);

                _helperDic[o].Path = (PropertyPath)e.NewValue;
            }));

    public static int GetDelayTimeInMS(DependencyObject obj)
    {
        return (int)obj.GetValue(DelayTimeInMSProperty);
    }

    public static void SetDelayTimeInMS(DependencyObject obj, int value)
    {
        obj.SetValue(DelayTimeInMSProperty, value);
    }

    public static readonly DependencyProperty DelayTimeInMSProperty = DependencyProperty.RegisterAttached(
        "DelayTimeInMS",
        typeof(int),
        typeof(DoubleAnimationManager),
        new PropertyMetadata(0,
            (o, e) =>
            {
                if (!_helperDic.ContainsKey(o))
                    _helperDic[o] = new AnimationHelper(o);

                _helperDic[o].DelayInMS = (int)e.NewValue;
            }));

    public static double GetValue(DependencyObject obj)
    {
        return (double)obj.GetValue(ValueProperty);
    }

    public static void SetValue(DependencyObject obj, double value)
    {
        obj.SetValue(ValueProperty, value);
    }

    public static readonly DependencyProperty ValueProperty = DependencyProperty.RegisterAttached(
        "Value",
        typeof(double),
        typeof(DoubleAnimationManager),
        new PropertyMetadata(
            (o, e) =>
            {
                if (!_helperDic.ContainsKey(o))
                    _helperDic[o] = new AnimationHelper(o);

                _helperDic[o].ToValue = (double)e.NewValue;
                if (!_helperDic[o].Started)
                {
                    _helperDic[o].FromValue = (double)e.OldValue;
                    _helperDic[o].Start();
                }
            }));
}

public class AnimationHelper
{
    private bool _remMode;
    private DependencyObject _target;
    private BackgroundWorker _bw = new BackgroundWorker();
    public double FromValue { get; set; }
    private double _toValue;
    public double ToValue 
    {
        get { return _toValue; }
        set
        {
            if (Started)
            {
                _remMode = true;
            }
            _toValue = value;
        }
    }
    public bool Started { get; private set; }
    private int _delayInMS;
    public int DelayInMS 
    {
        get { return _delayInMS; }
        set
        {
            _delayInMS = value;
        }
    }
    public PropertyPath Path { get; set; }

    public AnimationHelper(DependencyObject target)
    {
        _target = target;
        _bw.DoWork += delegate
        {
            System.Threading.Thread.Sleep(DelayInMS);
        };
        _bw.RunWorkerCompleted += delegate
        {
            StartAnimation();
        };
    }

    private Storyboard GetStoryboard()
    {
        Storyboard sb = new Storyboard();
        DoubleAnimation da = new DoubleAnimation(ToValue, new TimeSpan(0, 0, 3));
        da.From = FromValue;
        Storyboard.SetTarget(da, _target);
        Storyboard.SetTargetProperty(da, Path);
        sb.Children.Add(da);
        sb.Completed += delegate
        {
            if (_remMode)
            {
                StartAnimation();
                _remMode = false;
            }
            else
            {
                Started = false;
            }
        };
        return sb;
    }

    private void StartAnimation()
    {
        GetStoryboard().Begin();
        FromValue = ToValue;
    }

    public void Start()
    {
        Started = true;
        _bw.RunWorkerAsync();
    }
} 
```

如何使用它：

```
 <TextBox Width="50" Height="20" VerticalAlignment="Top"
             Text="{Binding Path=Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
    <Grid Width="100" Height="100" Background="Gray" x:Name="Grid">
        <Line Grid.Row="1" X2="100" Y2="100" Stroke="Red" local:DoubleAnimationManager.Property="(UIElement.RenderTransform).(RotateTransform.Angle)" local:DoubleAnimationManager.Value="{Binding Path=Text, Mode=OneWay, Converter={StaticResource ResourceKey=SToD}}">
            <Line.RenderTransform>
                <RotateTransform CenterX="50" CenterY="50"/>
            </Line.RenderTransform>
        </Line>
    </Grid> 
```**

# javascript - 检索帖子参数

> ID：16084286
> 
> 赞同：2
> 
> 时间：2013-04-18T13:27:27.900
> 
> 标签：javascript, ajax, jquery-mobile

新手问题。

发现网上大部分教程都集中在如何通过GET / POST传递参数。只有其中一些指向检索数据，主要是使用 PHP（jQuery 文档）/ASP.NET 等。

如何使用纯 JavaScript 检索 AJAX 发布的数据？

确切地：

邮政：

```
function detailOperator(_recordId, _title) {
   $.mobile.changePage('#operator-view', 
     { dataUrl: '?ID=' + _recordId + '&title=' + _title});
} 
```

成功发布更改页面。

如何在操作员查看页面中检索 ID 和标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:28:43.337

*客户端脚本无法*获取POST 数据，除非处理 POST 请求的服务器端脚本将其与响应一起发送回客户端。简而言之，没有内置的方法可以做到这一点。

但是，您的服务器端脚本可以选择通过 cookie 或隐藏变量将 POST 数据*传递*回客户端，然后您的客户端 JavaScript 可以访问其中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:30:15.940

最后我得到了什么（评论吉姆的想法）：

传递参数：

```
function detailOperator(_recordId) {
    $.mobile.changePage('#operator-view', { dataUrl: '?ID=' + _recordId });
    // Below not working (no errors) - maybe this sample working for external pages?
    //$.mobile.changePage('#operator-view', { dataUrl : '?ID=' + _recordId, data : { 'ID' : _recordId }, reloadPage : true, changeHash : true });
} 
```

所以，这里和以前一样。

检索参数：

```
// Below not working (no errors) because of empty "url"
/*
var parameters = $(this).data("url").split("?")[1];;
var _recordId = parameters.replace('ID=', '');
*/
var parameters = location.hash.substring(2).split("&");
var _recordId = parameters[0].replace('ID=', ''); 
```

非常感谢耐心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:30:27.063

POST 值在客户端不可访问。GET 值可以通过以下方式访问

```
window.location.search 
```

# c# - 使用 MEF 在 Silverlight 应用程序中导航失败

> ID：16084289
> 
> 赞同：1
> 
> 时间：2013-04-18T13:27:37.317
> 
> 标签：c#, .net, silverlight, navigation, mef

我有一个 Silverlight 应用程序，它使用 MEF 将 UserControl 插件加载到主 shell 中。每个插件都有一个元数据，其中描述了插件的名称、版本、图标和类似的内容，我使用 [ImportMany] 属性将它们全部导入主 shell。当我单击导航栏上的一个插件时，视图占位符会导航到相应的插件。我觉得很奇怪它应该在导航上抛出这样的异常。如果我删除插件中的 [Export] 属性，一切正常。

调用者抛出异常。这是回溯：

```
in System.Windows.Navigation.PageResourceContentLoader.EndLoad(IAsyncResult asyncResult)
in System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)
in System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)
in System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args) 
```

我进行了很多搜索，许多人说这是与缓存和重新父级有关的事情（一个经典问题），尽管我仍然无法弄清楚某些文章中描述的案例与我的不一样。

有人知道发生了什么吗？

# java - 表格行被选中后是否可以取消选中？

> ID：16084293
> 
> 赞同：2
> 
> 时间：2013-04-18T13:27:54.397
> 
> 标签：java, javafx-2, tableview

我想知道用户（不是以编程方式！）是否可以完全取消选择 JavaFX 2`TableView`表行，一旦它被选中？

**背景：**

我向 a 的 selectedProperty 添加了一个更改侦听器，`TableView`我想知道提供给更改侦听器的新值是否可以为空？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T03:32:50.663

```
tblRestoTable.getSelectionModel().clearSelection(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:31:11.277

> I am wondering if a user (not programmatically!) can completely unselect a JavaFX 2 TableView table row, once it was selected?

I don't think so, at least not in JavaFX 2.2.

> I added a change listener to the selectedProperty of a TableView and I am wondering if the new value provided to the change listener can ever be null?

Probably safest to place a null check in your change listener in any case in case the selection gets cleared programmatically as for example in amru's solution or in case in some future JavaFX version the ability for a user to deselect the last selected row in the table is added to the platform.

# javascript - 在这么多行之后结束表并重新开始

> ID：16084298
> 
> 赞同：1
> 
> 时间：2013-04-18T13:28:11.560
> 
> 标签：javascript, jquery, coldfusion

我有一个通过 Cold Fusion 输出的动态表。该表创建得很好，但我正在做的一件事是使用 JavaScript 来获取表的 outerHTML 并将其分配给隐藏元素值。问题是隐藏元素值需要每个表最多 20 行，并且原始表的总数可以是可变的。我需要将表的 outerHTML 读入 Javascript 变量并遍历内容并在 20 行后结束表，然后创建一个新表并继续将剩余的行添加到新表中。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:04:55.597

因此，您在服务器上有 ColdFusion 输出一个包含许多行的表，并且您想在客户端使用 jQuery 将那个大表切割成许多较小的表，对吗？如果是这样，这是一种方法：

示例：[jsfiddle](http://jsfiddle.net/RjAU4/)

```
 var rows = $('#content tr');
    var maxTableSize = 3;
    while (rows.length) {
        var newRows = rows.splice(0, maxTableSize);
        $('<table><tbody>').append(newRows).appendTo('#output');
    }

    $('#content').remove(); 
```

无论您的 DOM 是什么，您都需要对其进行调整——这是一个快速示例，表明它可以工作，但您可能需要它的工作方式略有不同，因此如果这不是您想要的，请考虑发布一个 jsfiddle。请注意，重复附加到 DOM 是低效的，因为它会触发大量重绘（浏览器端）。我想让这个例子保持简单——你可以稍后阅读更多关于如何高效操作 DOM 的内容。

最好的办法是修改服务器端代码以根据需要吐出表格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:01:09.387

我将假设该表是根据查询结果创建的。在这种情况下，对查询中的 currentrow 变量使用取模运算符将使您入门。

# php - 更改日期格式（保留“变量”）

> ID：16084301
> 
> 赞同：1
> 
> 时间：2013-04-18T13:28:15.600
> 
> 标签：php, datetime

我正在尝试根据用户使用的国家/地区更改我的日期格式。

目前我想出了这个：

```
function format_date($date = '', $format=null)
    {
        if($date == "0000-00-00") return "";
        $DateTime = new DateTime($date);
                if(!$format){
                    $CI =& get_instance();
                    switch($CI->session->userdata("country")){
                        case 3:
                            $format = "d-m-Y H:i:s";
                        break;
                        default:
                            $format = "Y-m-d H:i:s";
                        break;
                    }
                }
                return $DateTime->format($format);
    } 
```

但是如果 $date 的格式是：

**2013-03-15 15:50:30**

我希望输出为：

**15-03-2013 15:50:30**

如果格式是：

**2013-03-15**

我希望输出为：

**15-03-2013**

代替：

**15-03-2013 00:00:00**

如果您想要参数格式的用途是我应该将其强制为一种格式。

编辑：

有时我们只需要2013-04-12 16:52。

它也应该可以在这里格式化：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:42:28.217

有点骇人听闻的解决方案，但您可以使用：

```
$date = $DateTime->format($format);

if (strpos($date, '00:00:00')) {

    $date = substr($date, 0, strpos($date, '00:00:00') - 1);
}

return $date; 
```

要点是如果日期包含 00:00:00，则删除字符串的那部分并`- 1`占日期和时间之间的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:31:01.830

为此使用[mkdate](http://php.net/manual/en/function.mktime.php)

```
/* 2013-04-18 */
echo date("Y-m-d", mktime(0, 0, 0, 12, 30, 1997));

/* 18-04-2013 */
echo date("d-m-Y", mktime(0, 0, 0, 12, 30, 1997)); 
```

[您在php.net 页面](http://php.net/manual/en/function.mktime.php)上找到的更多示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:31:49.350

```
function format_date($date = '', $format=null)
{
    if($date == "0000-00-00") return "";

    // Compare len of str $date
    if(strlen($date) > 10)
        $his = " H:i:s";
    else
        $his = "";
    $DateTime = new DateTime($date);
            if(!$format){
                $CI =& get_instance();
                switch($CI->session->userdata("country")){
                    case 3:
                        $format = "d-m-Y" . $his;
                    break;
                    default:
                        $format = "Y-m-d" . $his;
                    break;
                }
            }
            return $DateTime->format($format);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:33:28.037

您可以`strpos`用来检查字符串是否包含空格（那么它显然有时间戳）。

我为你创建了一个函数，它接受一个`$date`参数，例如。`2012-01-01 01:00:00`或者`2012-02-03`，如果没有指定时间，`$dateFormat`则为格式，如果**已**指定时间，则为格式。[`date()`](http://www.php.net/date)`$dateTimeFormat`[`date()`](http://www.php.net/date)

 **```
<?php
    function DateFormatDynamic($date, $dateFormat, $dateTimeFormat) {
        $unixTime = strtotime($date);
        if (strpos($date, " ") !== false) {
            return date($dateTimeFormat, $unixTime);
        } else {
            return date($dateFormat, $unixTime);
        }
    }

    var_dump(DateFormatDynamic("2013-03-15", "d-m-Y", "d-m-Y H:i:s"));
    //string(10) "15-03-2013"

    var_dump(DateFormatDynamic("2013-03-15 15:23:00", "d-m-Y", "d-m-Y H:i:s"));
    //string(19) "15-03-2013 15:23:00"

    var_dump(DateFormatDynamic("2013-03-15 15:23", "d-m-Y", "d-m-Y H:i"));
    //string(19) "15-03-2013 15:23"
?> 
```

[**演示**](http://codepad.org/8k13GhAU)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:37:01.180

您也可以**在验证日期格式后尝试**

```
$d = '2013-03-15 15:50:30';
$d2 = '2013-03-15';

function myFormatDate($d){
    $format = 'd-m-Y';
    if(count(explode(' ',$d)) > 1)
        $format = 'd-m-Y H:i:s';
    return date($format, strtotime($d));
}

var_dump(myFormatDate($d));
var_dump(myFormatDate($d2)); 
```**

# javascript - .toISOString() 函数的问题

> ID：16084313
> 
> 赞同：11
> 
> 时间：2013-04-18T13:28:52.907
> 
> 标签：javascript

考虑以下代码 HTML + JavaScript：

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to display a date after changing the hours, minutes, and seconds.</p>

<button onclick="myFunction()">Try it</button>
 <script>
 function myFunction()
  {
  var d = new Date();
  d.setHours(0,0,0,0);
  document.write(d + '<br/>');
  document.write('ISO Date '+ d.toISOString() + '<br/>');
  //I want it to be 2013-04-17T00:00:00.000Z
  }
 </script>
</body>
</html> 
```

**输出**：

```
Thu Apr 18 2013 00:00:00 GMT+0530 (India Standard Time)
ISO Date 2013-04-17T18:30:00.000Z 
```

任何人都可以帮助理解日期和时间的这种差异

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-18T13:51:00.743

```
var d = new Date();
d.setHours(-12, d.getTimezoneOffset(), 0, 0); //removing the timezone offset and 12 hours
console.log(d.toISOString()); //2013-04-17T00:00:00.000Z 
```

我不知道，为什么您需要提前一天提供 ISO 日期，但万一是错字：

```
var d = new Date();
d.setHours(0, -d.getTimezoneOffset(), 0, 0); //removing the timezone offset.
console.log(d.toISOString()); //2013-04-18T00:00:00.000Z 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:32:53.540

```
2013-18-04 00:00:00 GMT+0530
2013-17-04 18:30:00 GMT+0000 
```

这是两个时间戳。第一个有时区，第二个是 GMT（无时区调整）。如果您采用第二个时间戳并添加`05:30:00`到`18:30:00`您得到第二天的午夜。这与第一个时间戳匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-21T09:33:54.877

您也可以像这样删除时区：

```
let birthday = new Date(this.profile.birthday + ' UTC').toISOString(); 
```

# ios - iOS StoreKit - 何时调用 - (void)restoreCompletedTransactions？

> ID：16084315
> 
> 赞同：9
> 
> 时间：2013-04-18T13:28:56.587
> 
> 标签：ios, objective-c, storekit

我的应用程序中有很多 1 次购买 IAP。用户可以很好地购买它们。

我的问题是，我正在与 Flurry 集成以跟踪实际购买，而不仅仅是恢复购买，但我`SKPaymentTransaction`的`transactionState`总是以.`SKPaymentTransactionStatePurchased`而不是`SKPaymentTransactionStateRestored`.

显然`SKPaymentTransactionStateRestored`只在 when 被调用`- (void)restoreCompletedTransactions`，但是我什么时候调用这个方法呢？

我的想法是购买应该是这样的：1）用户选择产品，2）询问用户是否愿意以 X 金额购买产品。3）服务器检查用户之前是否购买过，是否通过设置恢复`SKPaymentTransactionStateRestored`。否则，处理事务并设置`SKPaymentTransactionStatePurchased`。显然这是错误的，我想`- (void)restoreCompletedTransactions`在两者之间打电话？？？

谢谢，

将要

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T19:52:50.193

**编辑：**

最初我发布了一个很长的、不需要的方法来完成我需要完成的工作，但正如您将在下面看到的那样，Matt 帮助我找出了我正在寻找的变量。

例如，假设用户之前购买了我的应用程序，购买了所有可用的非消耗性 IAP，然后删除了该应用程序。当用户重新安装应用程序时，我希望能够确定他们何时再次“购买”产品，是原始（第一次）购买，还是恢复购买？

我已经实现了一个“恢复所有购买”按钮，但假设用户忽略/没有看到它，并尝试选择他们之前购买的产品。

与正常购买一样，我执行以下操作：

```
if ([SKPaymentQueue canMakePayments])
{
      self.productRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:productID]];

      self.productRequest.delegate = self;
      [self.productRequest start];
}
else
{
     //error message here
} 
```

用户登录到他们的 iTunes 帐户后，该应用程序会告诉他们他们已经购买了这个，现在它将被恢复。将调用以下委托方法：

```
 -(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{   
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
            {
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                if(transaction.originalTransaction)
                {
                    NSLog(@"Just restoring the transaction");
                }
                else
                {
                    NSLog(@"First time transaction");
                }

                break;
            }
            default:
                break;
        }
    }
} 
```

无论交易是修复还是首次购买，`transaction.transactionState`都将等于`SKPaymentTransactionStatePurchased`.

现在从这一点来看，我们如何确定该购买是原始购买还是修复购买？

简单：如上所见，只看是否`transaction.originalTransaction`被初始化。根据 Apple 的说明：**// 仅当状态为 SKPaymentTransactionStateRestored 时才有效。**

如果`SKPaymentTransaction`'s`originalTransaction`被初始化，这意味着有一个先前的事务。否则，本次交易为原创！

再次感谢 Matt 为我指明了正确的方向，并使逻辑更加清晰！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T20:57:31.083

规范的期望似乎是您提供一个调用`restoreCompletedTransactions`. 至于如果用户忽略了这一点，只是继续尝试通过你的购买界面来带回他已经购买的功能会发生什么，你可能会不必要地担心自己；[文档](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2)说：

> 如果用户尝试购买可恢复的产品（而不是使用您实现的恢复接口），应用程序会收到该项目的常规交易，而不是恢复交易。但是，*不会再次向用户收取该产品的费用。*您的应用程序应将这些交易视为与原始交易相同的交易。

商店会弹出与用户交互的对话框（“你已经购买了这个，要不要再免费下载一次？”），免费重新购买的通知会`paymentQueue:updatedTransactions:`照常在你的，你可以使用它`originalTransaction.transactionIdentifier`来识别它与原始购买。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T13:53:29.177

如果您正在实施应用内购买，则**需要在应用中的某处放置一个恢复按钮，**否则这是一个拒绝原因。您可以查看[获取已购买产品列表，inApp Purchase iPhone](https://stackoverflow.com/questions/16000999/get-list-of-purchased-products-inapp-purchase-iphone/16001099#16001099)一次。

编辑2：*除了按下按钮以避免拒绝之外，可能还有其他方法。马特在评论中建议的一种方法是在应用启动时恢复，这对我来说似乎足以符合苹果的指导方针。*

另请查看本教程的最后一部分，它提到了相同的问题，并展示了一种实现它的简单方法： [http ://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios -6-教程](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

编辑：

```
//Draft implementation of transaction observer delegate

-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction * transaction in transactions) {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:                
                ...
            case SKPaymentTransactionStateFailed:
                ...
            case SKPaymentTransactionStateRestored:
                ...
            default:
                break;
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:43:42.010

Apple IOS SDK 文档实际上在这个问题上具有误导性，因为它说：

```
@property(nonatomic, readonly) SKPaymentTransaction *originalTransaction
The contents of this property are undefined except when transactionState is set to SKPaymentTransactionStateRestored. 
```

问题是当用户点击你的购买按钮，完成购买过程，最后得到一个他已经支付并且他可以免费重新下载的消息时，你的观察者不会向你发送一个 SKPaymentTransactionStateRestored。它实际上向您发送了一个 SKPaymentTransactionStatePurchased。

好消息是，尽管有文档，但即使您的交易状态为 SKPaymentTransactionStatePurchased，您实际上也会获得属性 originalTransaction。只需测试该属性是否为零，您就会知道该交易是新购买还是免费恢复的旧购买。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-17T17:31:57.137

据我观察，有两种可能的情况，用户可能不得不调用恢复购买，

1.  如果您没有在后端服务器中维护购买信息：如果用户卸载应用程序或应用程序数据丢失的任何此类情况，您可能会丢失购买信息。在这种情况下，用户可以调用恢复，Storekit 将再次提供购买收据，您可以通过该收据确定用户是否之前购买过以及该购买现在是否有效。

2.  如果您将购买信息存储在您的支持中（支持的 api 决定用户是否有订阅功能的特权）：可能存在您能够从 Apple 购买但不知何故无法更新到您的服务器的情况，在这种情况下用户可以恢复购买将在您的后端服务器上更新购买信息，此后用户可以跨多个设备/平台/重新安装使用应用程序，但仍有权获得特权访问。

因此，始终建议在购买时在同一页面中显示恢复选项。如果用户在没有选择恢复的情况下无意中尝试购买，1.如果他选择了与当前有效onr相同的计划，他将被告知现有和订阅2.如果他选择除了当前订阅之外的其他计划，他/她将被告知当前订阅以及根据最新选择的计划升级/降级的选项。

# android - 生成声音 - PCM (Android - Java)

> ID：16084316
> 
> 赞同：2
> 
> 时间：2013-04-18T13:29:01.717
> 
> 标签：android, audio, byte, pcm

我在 stackoverflow.com 上找到了[一个很好的例子](https://stackoverflow.com/a/9106394/859646)，它实际上适用于播放声音。一切顺利，但我想知道 PCM 生成中发生了什么。这是代码：

```
int idx = 0;
for (final double dVal : sample) {
    final short val = (short) ((dVal * 32767));

    generatedSnd[idx++] = (byte) (val & 0x00ff);
    generatedSnd[idx++] = (byte) ((val & 0xff00) >>> 8);
} 
```

其中 sample 是一个双精度数组，其中包含在这种情况下使用所有必需参数（频率、赫兹等）计算的正弦值，并且 generatedSnd 是一个字节数组。我所知道的只是 val & 0xff 将一个 int 转换为一个字节，但这里究竟做了什么？为什么会有移位>>> 8？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:42:32.120

你没有在你的问题中提到这个函数的输入是什么，但我猜测其中的元素`sample`的范围是-1.0到+1.0。

16 位有符号 PCM 数据的范围为 -32768 到 +32767。所以在这个方法中发生的事情是每个浮点样本都按 32767 缩放以获得 -32767 到 +32767 范围内的值，然后将其截断为`short`.

然后通过首先写入（最低有效 8 位）的低位`short`，`generatedSnd`然后是高字节（将短 8 位向右移动获取最初的高字节和将其放在低字节中）。`byte[]``byte``short`

# slp - 尝试为 SLP 检查创建拓扑

> ID：16084317
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:06.563
> 
> 标签：slp

我正在尝试创建一个由客户端、服务器和中间网关组成的拓扑，以检查一些 SLP 流量。为此，我使用了 2 台 Ubunto 机器和另一台代表防火墙的中间机器（我有wireshark）。我已经下载了 openSLP 并将其安装在两台机器上，然后我使用 slptool 为 SSH 守护程序发出了 findsrvs 请求并记录了所有流量。当我将没有网关的 2 台计算机（客户端和服务器）放在中间时，我能够发送和接收 SLP 流量并确实找到 SSH 守护进程，但是当我在中间添加网关时，数据包似乎没有通过网关。我试图理解为什么会发生这种情况，直到现在都没有成功。谁能想到原因，也许我需要更改路由？多播的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T23:59:47.030

SLP 使用不通过网关的广播数据包

# javascript - Any way to bind event handler and call it at the same time?

> ID：16084320
> 
> 赞同：3
> 
> 时间：2013-04-18T13:29:15.777
> 
> 标签：javascript, jquery

I have some code like the following:

```
var f = function() {...};

$(window).resize(f);

f(); 
```

As you can see, I'd like `f` to be called every time the window is resized, and also for `f` to be called *once* after I make it the resize event handler.

Is there any way I can make this code shorter/more succinct? Ideally I'd like to eliminate the need for an `f` variable and just make it an anonymous function (i.e. `$(window).resize(function() {...}`), but I need some way of calling the function once...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:31:06.970

好吧，你不会让它更短，但这是你可以触发它而不是`f()`.

```
$(window).resize(f).trigger("resize"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:33:33.960

```
$(window).
resize(function () {console.log("stop resizing me!");}).
resize(); 
```

[http://jsfiddle.net/KmhZf/1/](http://jsfiddle.net/KmhZf/1/)

# php - 自定义 Joomla 登录页面

> ID：16084321
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:16.640
> 
> 标签：php, joomla

我正在尝试为登录和注册创建一个自定义页面。但是，我不断收到“无效令牌”错误。表单代码是从提供的登录表单中复制的，我在表单末尾附近有这一点：

```
<?php echo JHTML::_( 'form.token' ); ?> 
```

还有什么可能导致此错误？

# linux - Trying to find and install libstdc++.so.5 to run C++ with mex for MATLAB

> ID：16084323
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:20.640
> 
> 标签：linux, matlab, dependencies, shared-libraries, mex

I am using the **BGL** libraries for **MATLAB** found [here](http://www.mathworks.co.uk/matlabcentral/fileexchange/10922) on **fileexchange**. I get this error when using a function from this library under **Ubuntu 10.04 LTS** (this error did not occur under Windows, where it worked normally).

```
??? Invalid MEX-file
'/home/alex/Documents/MATLAB/MATLABsvnWorkingDir/Bloom/graphAnalysis/analysisAttempt2/functi    onsDownloaded/matlab_bgl-4.0.1/matlab_bgl/private/components_mex.mexglx':
libstdc++.so.5: cannot open shared object file: No such file or
directory.
Error in ==> components at 42
[ci sizes] = components_mex(A);
Error in ==> modularize_graphs_Alex_hugeMats_BlondelCode at 16
[comnts,~] = components(graph); 
```

The whole problem appears to be with `libstdc++.so.5`. I cannot find it in the synatpic package manager. There is this [thread](http://ubuntuforums.org/showthread.php?t=1243005) which discusses the problem but I have tried those steps without any progress.

I tried the solution listed [here](https://answers.launchpad.net/matlab-bgl/+question/70191):

```
alex@alex-laptop:~/Desktop$ sudo apt-get install libstdc++.so.5
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Couldn't find package libstdc++.so.5
alex@alex-laptop:~/Desktop$ 
```

I have also tried other solutions that I found on the web but nothing fixed the problem.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:52:42.780

尝试使用

`sudo apt-get install libstdc++5`

这应该安装包，包括所需的库。

# java - Java 小程序在更新到 JRE 7u21 后停止工作

> ID：16084324
> 
> 赞同：13
> 
> 时间：2013-04-18T13:29:23.550
> 
> 标签：java, security, applet, mixed-code

一旦 JRE 更新到 7u21，我的 java 小程序就停止工作了。

简短的摘要：

*   我得到的异常是：netscape.javascript.JSException 和
    java.lang.NoClassDefFoundError。该小程序在 JRE 7u21 之前运行良好。

*   该小程序使用 Oracle 的 DeployJava.js 嵌入到网页中。

*   小程序已签名，它使用 LiveConnect 触发事件，它通过 JNI 访问 USB 和串行端口，它使用来自多个 JAR 文件的代码。

*   失败发生在所有测试的桌面浏览器（Firefox、chrome、IE8/9 和 Mac 上的 Safari）上。

细节：

*   我有一个 Java 小程序，它允许我的网站与 USB 设备进行通信。

*   该小程序在过去一年中运行良好。

*   一旦 JRE7 更新 21 发布 - 小程序停止工作。

*   小程序托管在使用 Oracle 的 DeployJava.js 库的网页 (ASP.NET) 中。

*   它使用 LiveConnect 将事件引发回我的 javascript 代码。

我在 JRE 7u21 上遇到的第一个问题是第一次尝试通过 LiveConnect 引发事件时出现异常：

```
netscape.javascript.JSException: JavaScript error while calling "_notify"
at sun.plugin2.main.client.MessagePassingJSObject.newJSException(Unknown Source)
at sun.plugin2.main.client.MessagePassingJSObject.waitForReply(Unknown Source)
at sun.plugin2.main.client.MessagePassingJSObject.call(Unknown Source)
at <myapplet>.fireJavascriptEvent(Unknown Source)
at <myapplet>$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at com.asec.easypark.applets.HomeloadingApplet.start(Unknown Source)
at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.start(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

为了缓解这个问题，我在小程序的 ant 脚本中的“清单”部分添加了以下行：

```
attribute name="Trusted-Library" value="true" 
```

我使用 JDK 7u21 构建了小程序，它似乎有帮助：

之后我开始遇到另一个错误 - 所以我相信这个问题已经解决，但它可能导致了下一个问题。

第二个问题是：applet 正在从几个 JAR 文件中调用代码。在第一次调用另一个 JAR 文件（不是小程序）中的代码时失败，并出现以下异常：

```
**java.lang.NoClassDefFoundError**: com/codeminders/hidapi/HIDManager
    at <PackageInSecondJar>.communication.HIDTransmitter.open(Unknown Source)
    at <PackageInSecondJar>.communication.HIDTransmitterSearcher.find(Unknown Source)
    at <PackageInSecondJar>.communication.CompositeTransmitterSearcher.find(Unknown Source)
    at <PackageInAppletJar>.communication.AppletCommunicationBroker.setupDeviceProxy(Unknown Source)
    at <PackageInAppletJar>.communication.AppletCommunicationBroker.setup(Unknown Source)
    at <PackageInAppletJar>.<TheApplet>$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at <PackageInAppletJar>.<TheApplet>.start(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.start(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我已经尝试了以下措施 - 没有成功：

*   添加 HTTP 标头 'Cache-Control' = 'no-cache'

*   添加 HTTP 标头 'Cache-Control' = 'no-cache, no-store, must-revalidate'

*   [使用来自http://java.com/js/deployJava.txt](http://java.com/js/deployJava.txt)的最新 DeployJava.js （重命名为 .js 后）

该小程序已经具有以下功能：

*   在 jnlp 中标记安全性“所有权限”

*   主 JAR 使用来自外部 CA 的证书进行签名

*   小程序代码在`AccessController.doPrivileged`块内运行。

我是一个java新手，所以请不要忽视明显的解决方案......

在此先感谢您的帮助，

家伙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T18:20:56.410

Bailey S 是对的。确保 java 可以看到该 jar 文件。如果您使用的是 linux，请在 /etc/environment 路径变量或 windows 中设置路径，只需右键单击我的计算机，转到属性、环境变量和在那里设置路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T18:34:19.260

无法将小程序的属性设置为在 7.0.21 及以下版本上都可以使用。

```
Trusted-Library: true 
```

属性适用于 7.0.21 以下的版本，这会导致在 7.0.21 之后显示安全对话框（并且很可能您的代码被阻止）。如果你只放

```
Caller-Allowable-Codebase: *.yourdomain.com 
```

到您的清单文件，它开始在 7.0.21 之后的版本中正常工作，但这次它在 7.0.21 以下的版本中停止。这是一个巨大的混乱。

但是，他们已使用最新版本 (7.0.51) 修复了这种不良行为。所以我建议同时使用适用于 Java 6 和 7.0.51 的属性 (`Trusted-Library`和)。`Caller-Allowable-Codebase`我认为对于 7.0.21 和 7.0.45 之间的版本没有解决方案。（我不支持他们，我们要求我们的客户升级到 7.0.51）。

[https://blogs.oracle.com/java-platform-group/entry/7u45_caller_allowable_codebase_and](https://blogs.oracle.com/java-platform-group/entry/7u45_caller_allowable_codebase_and)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T21:14:28.930

随着 Oracle 修复安全漏洞，部署小程序变得越来越困难。

您提到您的小程序已签名——*所有*JAR 都已签名吗？您需要在清单文件中添加几个新属性才能使其正常工作。

此处概述： [http ://www.oracle.com/technetwork/java/javase/tech/java-code-signing-1915323.html](http://www.oracle.com/technetwork/java/javase/tech/java-code-signing-1915323.html)

你需要这个来整理清单： http: [//docs.oracle.com/javase/7/docs/technotes/guides/jweb/manifest.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/manifest.html)

如果您使用一些未签名的 JAR，或者并非全部由您签名，您还需要此处的详细信息：http: [//docs.oracle.com/javase/7/docs/technotes/guides /jweb/mixed_code.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mixed_code.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T19:30:02.280

我（在 java 环境中）也发生了同样的事情，这毁了我一整天，netscape 的 JSObject 存在于 jre 的 plugin.jar 和 jfxrt.jar 中，你需要排除一个。如果您需要 js 调用，我认为您需要 plugin.jar jre 6 不包含最新的 jfxrt.jar （JavaFX 相关的 web 小程序解决方案）所以它曾经在 jre6 中工作

另外，除非您想单独签署单个 jar，否则不要使用受信任的库。希望这会有所帮助-Chaithanya

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T13:57:21.977

我不知道 DeploJava.js 但问题显然是类路径问题。

作为一种方法，我们在归档标签中定义了所有第三方库。DeploJava.js 可能有类似的属性。

```
<APPLET   codebase="./"  code="AppletMainClass"   archive="printer_applet.jar, pdf-renderer.jar, library3.jar"> 
```

# android - How to disable Clicking of WebView?

> ID：16084325
> 
> 赞同：9
> 
> 时间：2013-04-18T13:29:27.187
> 
> 标签：android, android-layout, android-webview

I have Linear Layout which contains Only WebView. What i want to do is to disable the click in Webview, means I want the event to be called associated with RelativeLayout bg_stepsContainer. I've used the android:clickable="false" Here is code

```
 <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="30dp" 
                    android:layout_marginLeft="5dp"
                    android:layout_marginRight="5dp"
                    android:layout_marginTop="5dp"
                    android:layout_marginBottom="5dp"
                    android:id="@+id/bg_stepsContainer"
                    >

                <LinearLayout
                    android:id="@+id/stepslcontainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"

                    android:clickable="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false" >

                    <WebView
                        android:id="@+id/bg_stepsToReproduce"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:clickable="false"
                        android:focusable="false"
                        android:focusableInTouchMode="false" 

                        android:textColor="@color/solid_black" />

                    </LinearLayout>
                    <ImageView
                        android:id="@+id/stepsArrow"
                        android:layout_width="10dp"
                        android:layout_height="10dp"
                        android:layout_alignParentRight="true"
                       android:clickable="false"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:layout_centerVertical="true"
                        android:src="@drawable/ic_right_arrow" />

 </RelativeLayout> 
```

Any Suggestions are Appreciated!

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-18T13:54:26.177

```
mWebView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
       return true;
    }  
}); 
```

使用 android:clickable="false" 不会禁用触摸事件。

# jquery - 如何在 IE 8 中附加 ajax html 响应

> ID：16084330
> 
> 赞同：1
> 
> 时间：2013-04-18T13:29:34.563
> 
> 标签：jquery, internet-explorer-8

我在 ajax 调用中有以下代码，成功部分是返回 HTML，我设置了 2 个变量来筛选特定 HTML 的响应，然后我接受它，并循环遍历它以将其附加到我的 dom 中。但仅在 Internet Explorer 版本 8 中，它不会附加任何内容。也没有javascript错误。我不确定这是否是我获得结果的方式本身的循环，但任何有助于正确解决此问题的方法将不胜感激。

```
success: function(data) {

                  var results = $(data).find('li.post');
                var nextGroup = $(data).find('a.page-next').attr('href');

               if(!nextGroup) {

                    $.each(results, function(index,value) {

                            $('#posts').append(value);

                      });

                      params('end');

                } else {

                    params(nextGroup);

                    $.each(results, function(index,value) {

                            $('#posts').append(value);
                      });  
                }
             } 
```

# supervisord - Supervisord dies completely if program runs for less than 1 second?

> ID：16084334
> 
> 赞同：1
> 
> 时间：2013-04-18T13:29:49.157
> 
> 标签：supervisord

A program that runs for less than 1 second, every second on Supervisord causes the Supervisord to not run the program again. Why could that be?

I run "GET [http://someurl.com/some/url](http://someurl.com/some/url)" every second, and whenever this runs for less than 1 second (i.e. if I exclude "sleep(1)") then it will only run once, and never again. Any idea why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:39:43.240

我必须设置：

```
startsecs=0 
```

在 supervisord.conf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-15T06:59:45.167

`/tmp/supervisord.log`如果没有足够的信息为什么 Supervisord 重新启动程序，请查看 Supervisord 日志文件尝试在 Supervisord 配置文件中设置程序的日志记录`/etc/supervisord.conf`并查看程序崩溃的原因：

```
[your_program_config:program]
stdout_logfile = /your_program/path/logs/your_program.log
redirect_stderr = true 
```

# c - 图像像素缩放误差 - 计算 CCD 镜头的 SNR

> ID：16084335
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:49.623
> 
> 标签：c, opencv, image-processing, type-conversion

我正在尝试计算从同一数码相机拍摄的两个加载图像的信噪比。这个想法是计算多个光照水平下的信噪比，以获得显示 CCD 镜头信噪比的图表。

我目前面临的问题是；当我缩放第二张图像（图像 B）以具有与第一张图像（图像 A）相同的平均像素强度时，所获得的值与第一张图像不同。我认为问题是图像转换的舍入误差的结果。

我用来计算信噪比的方法是：

1.  将图像转换为灰度
2.  将图像转换为 16 位签名
3.  从 A 中减去图像 B
4.  获取减法的平均像素强度
5.  从 A 和 B 中减去平均值（以消除一些噪音）
6.  转换回 8 位无符号
7.  获取两个图像的平均像素值
8.  获取这些平均值的比率
9.  **使用比率缩放图像 B（16 位无符号）以获得图像 A 的平均像素值 - 问题区域**
10.  转换回 8 位并计算平均像素强度
11.  再次相互减去图像以消除最后的随机噪声
12.  计算这个减法的标准偏差
13.  将标准差转换为方差

我是 OpenCV 和一般编程的新手，因此对于特定问题的任何更好的方法和帮助将不胜感激。

```
int _tmain(int argc, _TCHAR* argv[])
{
float mean_A;
float mean_B1;
float var,mean_B;
float grey_B_mul;
float grey_sub2;
float o, standard, r;

IplImage *img = cvLoadImage("J:\\backup\\fotos\\IMG_0168.JPG", 3);//Define images
IplImage *img2 = cvLoadImage("J:\\backup\\fotos\\IMG_0164.JPG", 3);
IplImage *grayA = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);
IplImage *grayB = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);
IplImage *gray1 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *gray1S = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *gray2S = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *gray2 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *sub1 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *imgA = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);
IplImage *imgA1 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *imgA1U = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *imgB1U = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *imgB1 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *imgB = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);
IplImage *imgB_mul = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *imgB_mull = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *imgB_scaled = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *imgBsc = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);
IplImage *sub2 = cvCreateImage(cvGetSize(img),IPL_DEPTH_16S, 1);
IplImage *sub2U = cvCreateImage(cvGetSize(img),IPL_DEPTH_16U, 1);
IplImage *sub2_final = cvCreateImage(cvGetSize(img),IPL_DEPTH_8U, 1);

if (img->nChannels ==3)
{
    cvCvtColor(img, grayA, CV_BGR2GRAY);    //convert to grayscale
cvCvtColor(img2, grayB, CV_BGR2GRAY);
}
else
{
    cvCopyImage(img,grayA);
cvCopyImage(img2,grayB);
}

CvScalar m = cvAvg(grayA, 0);   //Calculate average pixel intensity
double z = m.val[0];
CvScalar n = cvAvg(grayB, 0);   //Calculate average pixel intensity
double y = n.val[0];

if (z > 128)            //Convert to 16 bit signed
{
    cvConvertScale(grayA, gray1, 256.0, -32768);
    cvConvertScale(gray1, gray1S, 1.0);
}
else
    cvConvertScale(grayA, gray1S, 256.0, -32768);

if (y> 128)
{
    cvConvertScale(grayB, gray2, 256.0, -32768);
    cvConvertScale(gray2, gray2S, 1.0);
}
else
    cvConvertScale(grayB, gray2S, 256.0, -32768);

cvNamedWindow("CCD noise",1);
cvNamedWindow("Image A",1);
cvNamedWindow("Image B scaled",1); 

cvSub(gray1S,gray2S, sub1);     //Subtract images
cvSub(gray1S,sub1, imgA1);
cvSub(gray2S,sub1, imgB1);

cvConvertScale(imgA1, imgA1U, 1.0, +32768 );
cvConvertScale(imgB1, imgB1U, 1.0, +32768 );
cvConvertScale(imgA1U, imgA, 1.0/256);
cvConvertScale(imgB1U, imgB, 1.0/256);
CvScalar d = cvAvg(imgB, 0);                                //Calculate average pixel intensity
mean_B = d.val[0];

CvScalar e = cvAvg(imgA, 0);                                //Calculate average pixel intensity
mean_A = e.val[0];

printf("Image A pixel intensity = %f\n", mean_A);
printf("Image B pixel intensity = %f\n", mean_B);

r = mean_A/mean_B;                                          // Ratio between average pixel intensities of image A and B
printf("r = %f\n", r);

for( int a = 0; a < imgB1U->height; a++ )                   //Scale image B to achieve same average pixel intensity as image A
{  
    for( int b = 0; b < imgB1U->width; b++ )
    {   
        CvScalar pixel = cvGet2D(imgB1U, a, b); 
        o = pixel.val[0]*r;
        CvScalar p;
        p.val[0] = o;
        cvSet2D(imgB_mul, a, b, p);
    }
}
cvConvertScale(imgB_mul, imgBsc, 1.0/256);                  //Convert back to 8 bit

CvScalar c = cvAvg(imgBsc, 0);                              //Calculate average pixel intensity
mean_B1 = c.val[0];                                     

printf("Image B intensity after scaling = %f\n", mean_B1);

cvConvertScale(imgB_mul, imgB_scaled, 1.0, -32768);

cvSub(imgA1,imgB_scaled, sub2);                             //Final subtraction to calculte standard deviation

cvConvertScale(sub2, sub2U, 1.0, +32768 );
cvConvertScale(sub2U, sub2_final, 1.0/256);

CvScalar t,std;
cvAvgSdv(sub2_final, &t, &std);                             //Calculate std deviation
standard = std.val[0];
var = (standard*standard)/2;                                //Square std deviation and devide by 2 for variance

printf("Variance camera noise is = %f\n", var);

cvShowImage("Image A",imgA);
cvShowImage("Image B scaled",imgBsc);
cvShowImage("CCD noise",sub2);
cvWaitKey(0);                                   //To terminate images
cvDestroyWindow("CCD gain");
cvDestroyWindow("Image A");
cvDestroyWindow("Image B scaled");
cvReleaseImage(&img);
cvReleaseImage(&img2);
cvReleaseImage(&gray1);
cvReleaseImage(&gray1S);
cvReleaseImage(&gray2S);
cvReleaseImage(&gray2);
cvReleaseImage(&sub1);
cvReleaseImage(&sub2);
cvReleaseImage(&imgA);
cvReleaseImage(&imgA1);
cvReleaseImage(&imgA1U);
cvReleaseImage(&imgB);
cvReleaseImage(&imgB1);
cvReleaseImage(&imgB1U);
cvReleaseImage(&imgB_mul);
cvReleaseImage(&imgB_mull);
cvReleaseImage(&imgBsc);
cvReleaseImage(&imgB_scaled);
cvReleaseImage(&sub2U);
cvReleaseImage(&sub2_final);

return 0;
} 
```

这个程序的结果是：

图像 A 像素强度 = 138.292328

图像 B 像素强度 = 253.836456

比率 = 0.544809

缩放后的图像 B 强度 = 138.351196

CCD 噪声方差 = 8.016509

我在这里使用不同的图像进行演示，以强调应该发生的事情。在测试图像将更接近（比率将在 0.992 左右）。

# git - npm uninstall 并没有真正在 azure 上卸载

> ID：16084338
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:52.013
> 
> 标签：git, node.js, azure

我正在使用 Windows Azure。在我的本地存储库中，我删除了 db-mysql

```
npm uninstall db-mysql 
```

当我尝试推送存储库时，它会给出该错误。我知道windows不支持db-mysql，但我不能删除那个包。我应该怎么办？

```
remote: The node.js application will run with the default node.js version 0.6.20.
remote: 
remote: > db-mysql@0.7.6 install C:\DWASFiles\Sites\lpserver\VirtualDirectory0\site\wwwroot\node_modules\db-mysql
remote: > node-waf configure build
remote: 
remote: 'node-waf' is not recognized as an internal or external command,
remote: operable program or batch file.
remote: An error has occurred during web site deployment.
remote: npm ERR! db-mysql@0.7.6 install: `node-waf configure build`
remote: npm ERR! `cmd "/c" "node-waf configure build"` failed with 1
remote: npm ERR! 
remote: npm ERR! Failed at the db-mysql@0.7.6 install script.
remote: npm ERR! This is most likely a problem with the db-mysql package,
remote: npm ERR! not with npm itself.
remote: npm ERR! Tell the author that this fails on your system:
remote: npm ERR!     node-waf configure build
remote: 
remote: npm ERR! You can get their info via:
remote: npm ERR!     npm owner ls db-mysql
remote: npm ERR! There is likely additional logging output above.
remote: 
remote: npm ERR! System Windows_NT 6.1.7601
remote: npm ERR! command "node" "D:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "--production"
remote: npm ERR! cwd C:\DWASFiles\Sites\lpserver\VirtualDirectory0\site\wwwroot
remote: npm ERR! node -v v0.6.20
remote: npm ERR! npm -v 1.1.37
remote: npm ERR! code ELIFECYCLE
remote: npm ERR! message db-mysql@0.7.6 install: `node-waf configure build`
remote: npm ERR! message `cmd "/c" "node-waf configure build"` failed with 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:49:32.333

在存储库的根目录中，您应该有一个`package.json`文件，编辑该文件以删除对 的引用`db-mysql`，然后提交更改并推送更新的存储库。

# sql - codeigniter 查询不起作用 - 响应为空

> ID：16084339
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:52.293
> 
> 标签：sql, codeigniter, model

我的 codeigniter 模型中有以下功能：

```
 function get_as_09($q){
    $sql=("select length from
(SELECT  
      [length]
    ,CONCAT(([width]*1000),([thickness]*1000),REPLACE([ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options

  FROM [database].[dbo].[ProductList]) as p
  where options='$q' order by length");
    $query=$this->db->query($sql);
    if($query->num_rows > 0){
        foreach ($query->result_array() as $row){
            $row_set[] = htmlentities(stripslashes($row['length'])); //build an array
       }
       return $row_set;
    }
  } 
```

这不起作用或返回结果。

下面的 sql 语法确实返回了一个结果：

```
select length from
(SELECT  
      [length]
      ,CONCAT(([width]*1000),([thickness]*1000),REPLACE([ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options

  FROM [database].[dbo].[ProductList]) as p
  where options='25100cr' order by length 
```

我是否将 $q 变量正确传递给查询？我的语法一般正确吗？

一如既往地提前感谢。

# c++ - Working with templates

> ID：16084340
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:55.107
> 
> 标签：c++, temp

Im currently studying c++ templates and there's something I don't understand. So far I understand if you have the following generic class

```
 template <class T> class A{
        ...
    } 
```

To provide a specific specialization of the class, say for `int` objects, you'd define the following:

```
 template<> class A<int>{
        ...
    } 
```

However, I have been seeing cases similar to the following:

Original class is,

```
 template <class T, int Size> class buffer{
        ...
    } 
```

Then the speciliazed class for objects of type `int` is,

```
 template <int Size> class buffer<int, Size>{
        ...
    } 
```

I'm confused as why the specilization for `int` is not the following:

```
 template<> class bufffer<int, int Size>{
        ...
    } 
```

Can someone please explain.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:32:57.063

该`buffer`模板有两个模板参数。第一个是类型参数，因为它以 开头`class`，第二个是非类型参数，因为它以 开头`int`。

您所看到的是仅对第一个参数的部分专业化。请注意，模板特化的模板参数完全独立于原始模板的模板参数（这是我在学习时感到困惑的主要事情之一）。例如，它的工作原理与以下内容一样好：

```
template <int N> class buffer<int, N> { ... }; 
```

它基本上是针对第一个模板参数`buffer`是类型`int`而第二个是某个`int`值时的特化。

每当您以`template <>`（空括号）开头时，这是一个明确的特化，您可以在其中指定*所有*模板参数。例如，您可以这样做：

```
template <> class buffer<int, 1> { ... }; 
```

当第一个模板参数是`int`type 而第二个是 value时，这将是一个特化`1`。

# android - Android：如何从 SurfaceView 保存第一个预览帧

> ID：16084342
> 
> 赞同：0
> 
> 时间：2013-04-18T13:29:56.653
> 
> 标签：android, bitmap, camera

我想知道是否可以保存`first frame`从相机预览，在`SurfaceView`. 在我的活动中，我目前已经实现了所有`SurfaceHolder.Callback`方法。当我调用`startPreview`相机对象并且`takePicture`回调正确执行时，但我需要更快地拍摄和保存图片，因此拍摄预览的第一个可见帧将非常有用。我能做些什么？
任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:55:10.820

它可能看起来非常简单，但我会做这样的事情来将第一帧保存到`Bitmap`.

```
mCamera.setPreviewCallback(new PreviewCallback() {
                public void onPreviewFrame(byte[] data, Camera camera) {

                    if (image == null) {
                        out = new ByteArrayOutputStream();
                        yuvImage = new YuvImage(data, ImageFormat.NV21, camera
                                .getParameters().getPreviewSize().width, camera
                                .getParameters().getPreviewSize().height, null);

                        yuvImage.compressToJpeg(new Rect(0, 0, camera
                                .getParameters().getPreviewSize().width, camera
                                .getParameters().getPreviewSize().height), 0,
                                out);

                        imageBytes = out.toByteArray();
                        image = BitmapFactory.decodeByteArray(imageBytes, 0,
                                imageBytes.length);
                    }

                }
            }); 
```

# maven - Using maven programmatically

> ID：16084345
> 
> 赞同：4
> 
> 时间：2013-04-18T13:30:09.577
> 
> 标签：maven

I need to make a small program that downloads maven projects and prints its dependencies

something like this:

```
MavenArtifactRepository repository = new MavenArtifactRepository("typesafe", "http://repo.typesafe.com/typesafe/releases/", ..., ..., ...);
downloadAndPrintDependencies(repository, "org.hsqldb", "hsqldb", "2.2.9");

void downloadAndPrintDependencies(repository, groupId, artifactId, version) {
  MavenProject projectDescription = new MavenProject("org.hsqldb", "hsqldb", "2.2.9");
  Artifact artifact = repository.getProject(projectDescription);  // this would download the artificat in the local repository if necessary

  List<Dependency> dependecies = artifact.getDependencies();
  ...
} 
```

and, that can execute goals on a maven project, something like this:

```
String pomXmlFile = "/tmp/myproject/pom.xml";
Reader reader = new FileReader(pomXmlFile);
MavenXpp3Reader xpp3Reader = new MavenXpp3Reader();
Model model = xpp3Reader.read(reader);

ProjectArtifact projectArtifact = new ProjectArtifact(model);
projectArtifact.clean();
projectArtifact.install(); 
```

* * *

any feedback on the pseudo-code?

What is the correct class and function that fetches an artifact from the repository?

what is the correct class and function that executes goals (such as clean and install) on maven projects?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:26:18.780

### 好的

我有[一个项目，Naether，](https://github.com/mguymon/naether)它是 Maven 的依赖解析库 Aether 的包装器。

使用 Naether，您可以解决依赖关系

```
import com.tobedevoured.naether.api.Naether;
import com.tobedevoured.naether.impl.NaetherImpl;

Naether naether = new NaetherImpl();
naether.addDependency( "ch.qos.logback:logback-classic:jar:0.9.29" );
naether.addDependency( "junit:junit:jar:4.8.2" );
naether.resolveDependencies();
System.out.println( naether.getDependenciesNotation().toString() ); 
```

将输出：

```
["ch.qos.logback:logback-core:jar:0.9.29",
 "ch.qos.logback:logback-classic:jar:0.9.29",
 "junit:junit:jar:4.8.2",
 "org.slf4j:slf4j-api:jar:1.6.1" ] 
```

### 坏的

我不知道如何通过 Java 构建（例如编译源代码）pom.xml。我搜索了一下，但没有找到具体的例子。[ProjectArtifact](http://maven.apache.org/ref/3.0.4/maven-core/apidocs/org/apache/maven/project/artifact/ProjectArtifact.html)只是 Maven 用来解析 POM 的工件描述符，例如父 POM 。它不公开构建操作。由于构建 Maven 项目的方法有上百万种，因此没有简单的*安装*方法。您必须以某种方式开始安装过程的生命周期。

Naether 可以做什么，首先构建项目并让[Naether 安装](http://mguymon.github.io/naether/apidocs/com/tobedevoured/naether/api/Naether.html#install%28java.lang.String,%20java.lang.String,%20java.lang.String%29)它：

```
import com.tobedevoured.naether.api.Naether;
import com.tobedevoured.naether.impl.NaetherImpl;

Naether naether = new NaetherImpl();
naether.install( "com.example:sample:0.0.1", "/tmp/myproject/pom.xml", "/tmp/myproject/target/sample-0.0.1.jar" ) 
```

* * *

### 更新 - 这一切是如何结合在一起的？

构建、部署、安装等项目很复杂。Maven 在简化它方面做得很好。即使 Maven 任务只是*install*，它也需要执行许多步骤。对于一个简单的 Java 项目，这意味着填充类路径、编译源、打包 jar，然后将其安装在本地 Maven 存储库中。当您谈论打包 Java 项目的其他方法时，事情只会变得更加复杂，例如*war*。

Maven 的人们做了艰苦的工作并将依赖解析分离到它自己的库[Aether](http://www.eclipse.org/aether/)中。这完成了使用工件的所有繁重工作。Aether 可让您弄清楚项目的依赖项是什么，下载依赖项。Aether 还允许您在本地安装工件或将其部署到远程存储库。

Aether 不做的是管理项目。它不会清理目标目录或编译源。

我用 Naether 创建的只是访问 Aether 的一种简化方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T10:35:47.280

看看[jcabi-aether](http://www.jcabi.com/jcabi-aether/index.html)（我是一名开发人员）。您将能够解决任意 Maven 工件的传递依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:26:22.977

有些人建议使用[Aether](http://eclipse.org/aether/)，[这里有例子](http://git.eclipse.org/c/aether/aether-demo.git/tree/aether-demo-snippets/src/main/java/org/eclipse/aether/examples)。

# c++ - C ++没有正确显示随机数

> ID：16084349
> 
> 赞同：3
> 
> 时间：2013-04-18T13:30:19.657
> 
> 标签：c++, visual-studio-2010, visual-c++

我想为温度生成一个随机数。我使用的代码如下：

```
int Temp()
{
    // genreate random temperture

    // initialize random seed: 
    srand ( time (NULL) );

    // generate number between 1 and 100:
    int t = rand() % 100 + 1;

    std::cout << t << std::endl;
    return t;
} 
```

当程序运行时，它不会显示 1 到 100 之间的数字，而是显示以下内容：

```
010C1109 
```

有人可以解释哪里出错或为什么出错了吗？

编辑：如果有人想知道我使用了以下内容：

```
#include <iostream>
#include <string>
#include <fstream>
#include <istream>
#include <ctime>
#include <stdio.h>      
#include <stdlib.h>    
#include <time.h>     
#include <map>
#include <cstdlib>
#include <cstring>
#pragma once 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T11:26:08.030

如何选择数字的显示方式：

```
std::cout << std::hex << t << std::endl; //displays in hexadecimal
std::cout << std::dec << t << std::endl; //displays in decimal 
```

在我的示例中，我看到十六进制的 58 和十进制的 88 (5*16+8)。这是使帖子完整的官方链接。

C++ 论坛：

[http://www.cplusplus.com/forum/windows/51591/](http://www.cplusplus.com/forum/windows/51591/)

详细说明：

[http://www.cplusplus.com/reference/ios/dec/](http://www.cplusplus.com/reference/ios/dec/)

# sql - SQL 除了性能

> ID：16084350
> 
> 赞同：3
> 
> 时间：2013-04-18T13:30:24.573
> 
> 标签：sql, sql-server-2005, except

我正在尝试使用类似于以下查询的查询来查找两个表之间的差异（DEV 数据库与 TEST 数据库中的同一个表）。每个表有约 30K 行和约 5 列。

```
select field1,field2,field3,field4,field5 from dev.dbo.table1 
where field1+field2 in ('string1','string2','string3',...,'string50')
except
select field1,field2,field3,field4,field5 from test.dbo.table1 
where field1+field2 in ('string1','string2','string3',...,'string50') 
```

field1 是`char(5)`field2 是`char(1)`

这个查询基本上永远不会终止。

当我使用 分析这个查询时`SET SHOWPLAN_ALL ON`，我可以看到树中有一个非常高的嵌套循环。当我将上述查询更改为

```
select * from dev.dbo.table1 
except
select * from test.dbo.table2 
```

查询运行很快，执行计划中没有嵌套循环。

有人可以帮忙解释一下吗？我不明白为什么会有很大的不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:49:39.527

我最好的猜测是优化器在估计两个表的基数（大小）方面做得很差。因为它低估了大小，所以它生成的查询计划很差。

在 SQL Server 中，您可以`join`在`except`. 所以，你可以得到你想要的查询：

```
select field1,field2,field3,field4,field5 from dev.dbo.table1 
where field1+field2 in ('string1','string2','string3',...,'string50')
except
select field1,field2,field3,field4,field5 from test.dbo.table1 
where field1+field2 in ('string1','string2','string3',...,'string50')
option (hash join, merge join) 
```

这消除了嵌套循环连接的选项，选择了更有利的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:49:30.800

您的第一个查询很慢，因为您在 where 子句中连接字段，这本质上是一个函数。在 where 子句中运行函数时，几乎都会发生这种情况。这是一个更简单的例子。这会很快。

```
where myDateTimeField >= @DateValue
and myDateTimeField < dateadd(day, 1, @DateValue) 
```

这在逻辑上是相同的，但会很慢

```
where cast(myDateTimeField as date) = @DateValue 
```

# xmpp - 无法使用 HTTP 绑定连接到 XMPP 服务器（openfire）

> ID：16084355
> 
> 赞同：1
> 
> 时间：2013-04-18T13:30:31.327
> 
> 标签：xmpp, strophe

我正在尝试学习 XMPP 协议以使用它制作 Web 应用程序。

因此，我安装了一个名为 openfire 的 XMPP 守护程序，我将其配置为支持 HTTP-Bind，我可以使用 Pidgin 和默认的 XMPP 协议连接到它。

问题是我无法使用 HTTP 绑定连接到它。在 pidgin 中，当我连接到指定我想用来连接到服务器的方法时，我有一些选项。如果我将其设置为使用 HTTP-Bind 进行连接，则会失败并显示以下消息：No session id given。

在客户端，我会使用 Strophejs 尝试建立这种连接，但它也不起作用。我有这样的事情：

```
var conn = new Strophe.Connection("http://chat.dev/http-bind"); 
```

其中[http://chat.dev/http-bind](http://chat.dev/http-bind)是 XMPP 守护进程的位置。我已将此位置转发到 apache 虚拟主机中的正确端口上，因此[http://chat.dev/http-bind](http://chat.dev/http-bind)将指向与 http://127.0.0.1:7070 相同的内容。

```
conn.connect("test5", "test5", some_callback);

function some_callback(status)
{
if (status == Strophe.Status.CONNECTING) {
    console.log('Strophe is connecting.');
} else if (status == Strophe.Status.CONNFAIL) {
    console.log('Strophe failed to connect.');  
} else if (status == Strophe.Status.DISCONNECTING) {
    console.log('Strophe is disconnecting.');
} else if (status == Strophe.Status.DISCONNECTED) {
    console.log('Strophe is disconnected.');
} else if (status == Strophe.Status.CONNECTED) {
    console.log('Strophe is connected.');
 // connection.disconnect();
}
} 
```

这将返回：“Strophe 正在连接。”

好吧，我不知道答案，我一直在读一本关于 XMPP 和 Strophe 的书，但这本书没有涵盖这方面，而且我找到的文档也对我没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T06:03:46.720

试试这个 - var conn = new Strophe.Connection(" [http://chat.dev/http-bind/](http://chat.dev/http-bind/) ");

需要把'/'放在最后。为我工作。

# android - 我如何使用屏幕截图的图像？

> ID：16084359
> 
> 赞同：0
> 
> 时间：2013-04-18T13:30:43.193
> 
> 标签：android, background, screenshot

我想使用此链接的代码：[如何截取屏幕截图并以编程方式共享它](https://stackoverflow.com/questions/10296711/androidtake-screenshot-and-share-it/10296881#10296881)以截取我的应用程序的屏幕截图。但我希望生成的图片使用它来更改我的背景，例如 Layout.setBackgroundResource(resid)。我怎么能做到这一点？在哪里可以找到图像的路径以使用它来更改背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:35:47.027

首先，您需要您想要的屏幕截图视图：

```
View anyView = findViewById(R.id.anyView); 
```

然后用这个方法截图：

```
public Bitmap screenShot(View view) {
    Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),
            view.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
} 
```

像这样：

```
Bitmap screenshot = screenShot(anyView); 
```

位图不能设置为背景图像，所以让我们将其转换为可绘制对象：

```
Drawable drawableScreenshot = new BitmapDrawable(getResources(), screenshot); 
```

现在将其设置为视图背景：

```
anyView.setBackgroundDrawable(drawableScreenshot); 
```

# android - 把可打包的对象写成一个包这么快吗？

> ID：16084361
> 
> 赞同：1
> 
> 时间：2013-04-18T13:30:44.640
> 
> 标签：android, performance

我想估计在捆绑中编写可打包对象所需的时间。我创建了自己的 parcelable 类（只有两个属性：一个 int 和一个 String），我编写了一个简短的应用程序，将我的 parcelable 类的 500 000 个对象实例化，将它们放入一个 ArrayList，将 ArrayList 写入一个包中，然后读取来自同一个包的 ArrayList。

我很惊讶地看到写和读这个相当大的列表是即时的。（每次0ms）

这样的 ArrayList 可以“立即”编写，还是我做错了？

```
 ...

    private static final int TEST_SIZE = 500000;

    ...

    mList = new ArrayList<MyParcelableClass>();
    for(int i=0; i<TEST_SIZE; i++){
        mList.add(new MyParcelableClass(i));
    }

    ... 

    Bundle testBundle = new Bundle();

    mStartTime = System.currentTimeMillis();        
    testBundle.putParcelableArrayList("test", mList);        
    logTime("parcelableArrayList writing");
    //parcelableArrayList writing 0ms       

    ArrayList<MyParcelableClass> deserialization = new ArrayList<MyParcelableClass>();      
    mStartTime = System.currentTimeMillis();        
    deserialization = testBundle.getParcelableArrayList("test");               
    logTime("parcelableArrayList reading");
    //parcelableArrayList reading 0ms

    private void logTime(String msg){
         long time = System.currentTimeMillis() - mStartTime;
         log(msg + " " + String.valueOf(time) + " ms");
    }   

    private void log(String msg){
        Log.i(TAG, msg);
    } 
```

# c++ - Linux 函数以特定间隔调用

> ID：16084362
> 
> 赞同：-2
> 
> 时间：2013-04-18T13:30:49.193
> 
> 标签：c++, c, linux, gcc

我需要能够使用 C/C++ 在 Linux 上以不同的时间间隔调用某些函数。最好的方法是什么？例如，我想在 100hz 调用 a()，在 10hz 调用 b()，在 1hz 调用 c()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:08:55.233

You could use Posix timers, i.e. [timer_create(2)](http://man7.org/linux/man-pages/man2/timer_create.2.html) and [timer_settime(2)](http://man7.org/linux/man-pages/man2/timer_settime.2.html). Then you want to set a signal handler using [sigaction(2)](http://man7.org/linux/man-pages/man2/sigaction.2.html). Be aware that signal handler functions are only allowed to call a very restricted set of functions (only the *async-signal-safe* functions, but even not `fprintf` or `malloc`!), see [signal(7)](http://man7.org/linux/man-pages/man7/signal.7.html) and consider simply setting a `volatile sigatomic_t` variable in your signal handler (and test it appropriately outside).

You might instead having some event loop (e.g. [libev](http://software.schmorp.de/pkg/libev.html), or making your own one with a multiplexing syscall like [poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html) etc...). If you are coding a graphical application (using e.g. Qt or Gtk) you already have an event loop, so use it (and you also have timers provided by the graphical toolkit or the event loop functions).

You may also want to look at [timerfd_create(2)](http://man7.org/linux/man-pages/man2/timerfd_create.2.html) and friends (and use that fle descriptor in your event loop or `poll(2)` call).

Reading [Advanced Linux Programming](http://advancedlinuxprogramming.com/) should help.

^(PS. Getting a reliable 100Hz (or slighly higher) timer frequency might be difficult with old kernels and old machines. You may want `CONFIG_HIGH_RES_TIMERS=y` and `CONFIG_TIMERFD=y` and `CONFIG_HPET_TIMER=y` and `CONFIG_HZ_1000=y` in the `.config` fle of your recent kernel.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:37:06.133

您可以重复使用[settimer](http://www.manpagez.com/man/2/setitimer/)来安排下一个具有最近截止日期的函数调用。

# android - Android Google Play Oauth2 gtalk authToken 的 requestBody 中的正确凭据

> ID：16084363
> 
> 赞同：0
> 
> 时间：2013-04-18T13:30:58.373
> 
> 标签：android, oauth-2.0, httpclient, google-oauth

运行下面的代码我得到“错误”：“unauthorized_client”。需要帮助查明我做错了什么。我想在 Android 应用程序中使用它来启用 Google Talk（xmpp 已经存在[XABBER fork](https://github.com/erikswed/xabber-android/network)）
阅读[了很多](https://developers.google.com/accounts/docs/OAuth2InstalledApp)关于如何做到这一点的信息，现在来[Google Api Console setup](https://code.google.com/apis/console/)。
我已选择
- 已安装应用程序的客户端 ID
- 已安装应用程序类型 = 其他
- 仅启用 Google Play Android Developer API（绿色开关）

我从 oauth2 获取身份验证令牌：[https://www.googleapis.com/auth/googletalk](https://www.googleapis.com/auth/googletalk)。（用户批准屏幕）什么让我烦恼我没有为“其他”输入 SHA1 指纹或包名称，所以也许这就是问题所在

代码：

```
 HttpClient client1 = new DefaultHttpClient();
     HttpPost request1 = new HttpPost("https://accounts.google.com/o/oauth2/token" );
     request1.setHeader("Content-type", "application/x-www-form-urlencoded");

     //Please make this custom with you're credentials
     String requestBody1 = 
            "code="+authToken+
            "&client_id=749825062016ia.apps.googleusercontent.com"+      
            "&client_secret=jQ1nUrAYUIBUf6hN5pwPE" +
            "&redirect_uri=urn:ietf:wg:oauth:2.0:oob" +
            "&grant_type=authorization_code";

     try {
         request1.setEntity(new StringEntity(requestBody1));
     } catch (UnsupportedEncodingException e) {
         e.printStackTrace();
     }

     /* Checking response */
     try {
         HttpResponse response = client1.execute(request1);
         String results = "ERROR";
         results = EntityUtils.toString(response.getEntity());
         LogManager.i("STACK", "Response::" + results);
     } catch (IOException e) {
         e.printStackTrace();  
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:02:13.417

我认为您应该使用“Android”类型注册您的应用程序。然后您将被要求提供信息（例如包名称和证书），以使 Android 平台能够识别您的应用程序。

# php - PHP: replacing contents of multidimensional Arrays

> ID：16084366
> 
> 赞同：0
> 
> 时间：2013-04-18T13:31:02.207
> 
> 标签：php, session, multidimensional-array

We have a multi-dimensional array which consists of the following model:

> array( 0 => array('sfa' => 'sfb,'sfb' => 'aaaa,'sfc' => 'bbbb','sfd' => '10','sfe' => 'abc'), 1 => array('sfa' => 'sfb,'sfb' => 'aaaa,'sfc' => 'bbbb','sfd' => '10','sfe' => 'abc'), 2 => array('sfa' => 'sfb,'sfb' => 'aaaa,'sfc' => 'bbbb','sfd' => '10','sfe' => 'abc'), 3 => array('sfa' => 'sfb,'sfb' => 'aaaa,'sfc' => 'bbbb','sfd' => '10','sfe' => 'abc'), )

please note this is an example.

This information is stored in a session variable however for example this session is called a so the variable is $_SESSION['a']

i need to be able to change the $_SESSION data for $_SESSION['a'][0]['sfd'] from 10 to 100

i have already tried the following code:

> $array = $_SESSION['a']; $quantity = 100; $replacements = array('sdf' => $quantity); array_replace($array[0],$replacements); var_dump($array);

But it won't work and it destroys the rest of the array aswel, I have tried but failed can anybody correct my mistake or give me a helping hand?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:34:35.767

我不确定我是否明白你的意思，但这就是你要找的吗？

```
if (isset($_SESSION['a'][0]['sfd'] ))
    $_SESSION['a'][0]['sfd'] =100; 
```

# c# - Lambert 72 conversion to Lat/Lon pair

> ID：16084372
> 
> 赞同：2
> 
> 时间：2013-04-18T13:31:18.707
> 
> 标签：c#, converter, coordinate-systems, coordinate-transformation

I'm trying to merge two databases for consolidating two clients' websites. However, Client A has been using regular Lat/Lon pairs for geolocation, while Client B is using Lambert 72 (X/Y) coordinates.

I've built a script that should convert these coordinates (as I'm not sure which coordinates will be used in the final merged database, I'm trying converting them either way). I took some snippets from here: [http://zoologie.umh.ac.be/tc/algorithms.aspx](http://zoologie.umh.ac.be/tc/algorithms.aspx)

Please note that all coordinates mentioned below point to locations in Belgium.

I'm converting some coordinates to see if the calculations are correct, but the coordinates I'm getting seem to be way off. For reference, the center of Belgium is roughly (North 50.84323737103243, East 4.355735778808594), so I'd expect all coordinates to be close to these values.

I converted the Lambert 72 value (X: 151488250, Y: 170492909) to a Lat/Lon pair, but the result is: (-87.538.... , -50.724....) which is way off from the expected values. If I convert full circle (Lambert->LatLon->Lambert and vice versa), I get the same result values as I entered, so I know my conversions are at least consistent and the conversions are perfect inversions of one another.

I tried some online converter tools as well, and they give me the same (-87.538.... , -50.724....) result.

Since multiple sources yield the same results, and my conversions are correct inversions of eachother, I'm figuring the calculations themselves are correct, but the resulting values still need to be converted/offset further?

I consider myself to be sufficient in algebra, but cartographic projections completely elude me.

Can someone please shed some light on this?

**Extra Info**

*   I hope I posted this in the correct forum. I'm not really sure where to put this as this is a mix of geography, mathematics and coding/conversion...
*   The mentioned Lambert coordinates (X: 151488250, Y: 170492909) point to a location in Brussels, so the Lat/Lon result should be *very* near to (North 50.84323737103243, East 4.355735778808594).
*   Please find my conversion functions below:

    ```
    public static Lambert72 LatLon_To_Lambert72(LatLon latlon)
    {
        var lat = latlon.Lat;
        var lng = latlon.Lon;

        double LongRef = 0.076042943;
        //=4°21'24"983
        double bLamb = 6378388 * (1 - (1 / 297));
        double aCarre = Math.Pow(6378388, 2);
        double eCarre = (aCarre - Math.Pow(bLamb, 2)) / aCarre;
        double KLamb = 11565915.812935;
        double nLamb = 0.7716421928;

        double eLamb = Math.Sqrt(eCarre);
        double eSur2 = eLamb / 2;

        //conversion to radians
        lat = (Math.PI / 180) * lat;
        lng = (Math.PI / 180) * lng;

        double eSinLatitude = eLamb * Math.Sin(lat);
        double TanZDemi = (Math.Tan((Math.PI / 4) - (lat / 2))) * (Math.Pow(((1 + (eSinLatitude)) / (1 - (eSinLatitude))), (eSur2)));

        double RLamb = KLamb * (Math.Pow((TanZDemi), nLamb));

        double Teta = nLamb * (lng - LongRef);

        double x = 0;
        double y = 0;

        x = 150000 + 0.01256 + RLamb * Math.Sin(Teta - 0.000142043);
        y = 5400000 + 88.4378 - RLamb * Math.Cos(Teta - 0.000142043);

        return new Lambert72(x, y);
    }

    public static LatLon Lambert72_To_LatLon(Lambert72 lb72)
    {
        double X = lb72.X;
        double Y = lb72.Y;

        double LongRef = 0.076042943;
        //=4°21'24"983
        double nLamb = 0.7716421928;
        double aCarre = Math.Pow(6378388, 2);
        double bLamb = 6378388 * (1 - (1 / 297));
        double eCarre = (aCarre - Math.Pow(bLamb, 2)) / aCarre;
        double KLamb = 11565915.812935;

        double eLamb = Math.Sqrt(eCarre);
        double eSur2 = eLamb / 2;

        double Tan1 = (X - 150000.01256) / (5400088.4378 - Y);
        double Lambda = LongRef + (1 / nLamb) * (0.000142043 + Math.Atan(Tan1));
        double RLamb = Math.Sqrt(Math.Pow((X - 150000.01256), 2) + Math.Pow((5400088.4378 - Y), 2));

        double TanZDemi = Math.Pow((RLamb / KLamb), (1 / nLamb));
        double Lati1 = 2 * Math.Atan(TanZDemi);

        double eSin = 0;
        double Mult1 = 0;
        double Mult2 = 0;
        double Mult = 0;
        double LatiN = 0;
        double Diff = 0;

        double lat = 0;
        double lng = 0;

        do {
            eSin = eLamb * Math.Sin(Lati1);
            Mult1 = 1 - eSin;
            Mult2 = 1 + eSin;
            Mult = Math.Pow((Mult1 / Mult2), (eLamb / 2));
            LatiN = (Math.PI / 2) - (2 * (Math.Atan(TanZDemi * Mult)));
            Diff = LatiN - Lati1;
            Lati1 = LatiN;
        } while (Math.Abs(Diff) > 2.77777E-08);

        lat = (LatiN * 180) / Math.PI;
        lng = (Lambda * 180) / Math.PI;

        return new LatLon(lat, lng);
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T08:57:02.970

我是您在帖子中提到的页面的作者。我不知道你是否解决了你的问题，但你给出的兰伯特坐标不正确。我认为你必须将它们除以 1000。这给出了 x=151488.250 和 y=170492.909，它们是可能的坐标，对应于...布鲁塞尔的一条街道。在与 lat/lng 值之间进行转换时，请注意选择基准。

# javascript - jQuery width() and height() return 0 for img element

> ID：16084374
> 
> 赞同：25
> 
> 时间：2013-04-18T13:31:24.430
> 
> 标签：javascript, jquery

So I am creating a new image element once I get response from AJAX call with image metadata like this:

```
var loadedImageContainter = $('<div class="loaded-image-container"></div>');
var image = $('<img src="' + file.url + '" alt="">');
loadedImageContainter.append(image);
$('.loading-image').replaceWith(loadedImageContainter);
var width = image.width();
var height = image.height();
console.log(width);
console.log(height); 
```

But width() and height() functions are returning 0 although image has 30 x 30 px size and it appears correctly on the page. I need to get its dimensions in order to absolutely position the image.

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-18T13:32:25.007

您需要等到图像加载后才能访问宽度和高度数据。

```
var $img = $('<img>');

$img.on('load', function(){
  console.log($(this).width());
});

$img.attr('src', file.url); 
```

或者使用普通的 JS：

```
var img = document.createElement('img');

img.onload = function(){
  console.log(this.width);
}

img.src = file.url; 
```

此外，在读取宽度和高度值之前，您不需要将图像插入 DOM，因此您可以`.loading-image`在计算所有正确位置之前将替换保留。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T13:33:38.697

那是因为您检查宽度时未加载您的图像

尝试以这种方式使用加载事件

```
$('img').on('load',function(){
  // check width
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T06:54:53.223

正如@ahren之前[所说](https://stackoverflow.com/a/16084408/1821692)，原因是当您尝试获取其大小时未加载图像。

如果你想在没有 jQuery 的情况下解决这个问题，你可以使用 vanilla JS`addEventListener`方法：

```
document.getElementsByTagName('img')[0].addEventListener('load', function() {
    // ...
    var width = image.width();
    var height = image.height();
    console.log(width);
    console.log(height);
    // ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T20:34:50.927

您还可以使用备用 API [$.load](http://api.jquery.com/load/)方法：

```
$('<img src="' + file.url + '" alt="">').load( function(){ <your function implementation> }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T09:52:13.733

对我来说，它只适用于“appendTo”

```
$('<img src="myImage.jpeg">').load(function(){
   $w = $(this).width(); 
   $h = $(this).height();
   $(this).remove()
}).appendTo("body") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-30T01:41:36.000

尝试这个：

```
$('.loading-image').replaceWith(loadedImageContainter);
$('.loading-image').load(function(){
    var width = image.width();
    var height = image.height();
    console.log(width);
    console.log(height);
}); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-18T13:38:22.603

如果你把它放在 AJAX 调用中，那也可以，这是 json 方法

```
$.post("URL",{someVar:someVar},function(data){

   var totalImgs = $('body').find('img').length;

   var image = $('<img src="' + data.file[0].url + '" alt="" id="IMG_'+ totalImgs +'">');

   loadedImageContainter.append(image);
   $('.loading-image').replaceWith(loadedImageContainter);

   var width = $('#IMG_'+totalImgs).width();
   var height = $('#IMG_'+totalImgs).height();

},'json'); 
```

# java - C++ 中的 System.out.println 函数语法

> ID：16084379
> 
> 赞同：6
> 
> 时间：2013-04-18T13:31:32.317
> 
> 标签：java, c++, println

我想使用 cout 在 C++ 中创建一个与 java 中的 println 函数相同的函数。这意味着调用应该是这样的：

```
int a=5
println("A string" + a); 
```

变量 a 应该具有任何基本类型。在这种情况下我应该有什么样的参数，它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T14:02:23.953

正如 larsmans 已经指出的那样，java 在运算符 + 上有重载。所以你可以用整数连接字符串。这在 C++ 中也是可能的，但并非对所有类型都是开箱即用的。

您可以使用这样的模板化函数。

```
#include <iostream>
using namespace std;

template <typename T>
void printer(T t) 
{ 
    cout << t << endl;
}

template <typename T, typename ...U>
void printer(T t, U ...u)
{
  cout << t;
  printer(u...);
}

int main()
{
  int a=5;
  printer("A string ", a);
  return 0;
} 
```

但我建议看一下[boost::format](http://www.boost.org/doc/libs/1_53_0/libs/format/)。我想这个图书馆会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:56:13.373

许多人投反对票，但这并不能解释为什么您的要求不正确。

您在这里有两个选择：

1.  您可以制作一个模板化`println(T val)`函数，该函数采用您喜欢的任何类型、整数、双精度数等，并且您可以在该函数中打印它们。

2.  但是，您在那里要求的是：`"A string" + a`这是一个将返回类型的表达式。你在这里做的是添加一个`const char*`和一个`int`。不幸的是，这不会像你期望的那样做任何事情，它会做[指针算术](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)，在这种特殊情况下甚至不会编译。但是对于一般情况，比如说 a`std::string`和一个名为 的类`Foo`，编译器会寻找一个可以连接这两个东西的[`operator+`重载。](http://www.learncpp.com/cpp-tutorial/92-overloading-the-arithmetic-operators/)

    您的第二个选择，但稍微危险一点，是拥有一个`println`函数，该函数采用`std::string`or`const char*`并定义您可能想要的所有不同的 operator+ 操作。不过我不推荐这样做，因为指针和整数之间的默认操作是进行指针运算，这非常有用。

我建议从模板函数开始，然后看看会发生什么。

# mxgraph - mxGraph cell resize and graph layout

> ID：16084381
> 
> 赞同：4
> 
> 时间：2013-04-18T13:31:34.553
> 
> 标签：mxgraph, jgraph

I'm having problems with resizing cells and built-in mxGraph layouts. If I put a cell on canvas, and I try to resize it, even for a pixel, it grows huge, something like 50000px x 30000px, so it streches my whole canvas, and of course it is unusable. If I load a graph from an xml file from the database, I can resize cells without any problems.

Similar thing happens with the built in layouts. I'd like to use compact tree layout (the reason I like it beacuse it aligns my whole horizontal). When I draw a graph and try to use that layout, my graph goes wild, also streching to 50000px x 30000 px (example dimensions, but the scroll is so tiny I can barely aim it with the mouse). If I load a graph from xml from a database, compact tree layout works perfect. But as soon as I add another cell in it, and try to use compact tree layout again, it goes wild, again.

I use absolute positioning for div which holds the canvas, as same as on the example here ([http://jgraph.github.io/mxgraph/javascript/examples/editors/workfloweditor.html](http://jgraph.github.io/mxgraph/javascript/examples/editors/workfloweditor.html))

This is my css and html :

```
<head>
<style type="text/css">

#graphContainer {
    background: url('../../resources/jgraph/src/images/grid.gif');
    left: 20px;
    right: 20px;
    top: 65px;
    bottom: 20px;
    position: absolute;
    border: 1px solid #F2F2F2;
    white-space: nowrap;
    font-family: Arial;
    font-size: 8pt;
    display: block;
}

</style>
</head>
<body>

<div id="graphContainer"></div>

<script>
    $(document).ready(function(){
        mc.init(document.getElementById('graphContainer'));
    });
</script>
</body>
</html> 
```

And this is my javascript for graph initialization (along with the couple of events, beacuse I'm not sure if they are the problem):

```
mxConnectionHandler.prototype.connectImage = new mxImage('../../resources/jgraph/src/images/connector.gif', 14, 14);

if (!mxClient.isBrowserSupported()) {
mxUtils.error('Browser is not supported!', 200, false);
} else {

var root = new mxCell();
root.insert(new mxCell());
var model = new mxGraphModel(root);

if (mxClient.IS_QUIRKS)
{
    document.body.style.overflow = 'hidden';
    new mxDivResizer(graphContainer);
}

var editor = new mxEditor();
editor.setGraphContainer(graphContainer);
editor.readGraphModel(model);
var graph = editor.graph;
graph.setConnectable(true);
new mxRubberband(graph);

/* CODE FOR ADDING THE TOOLBAR, excluded from example */

//code for writing out the node name
graph.convertValueToString = function(cell)
{
    if (mxUtils.isNode(cell.value))
    {
        var outValue = cell.value.getAttribute('nodeName');
        if (outValue != null && outValue.length > 0)
        {
            return outValue;
        }
        return '';
    }
    return '';
};

//defining on select event
graph.getSelectionModel().addListener(mxEvent.CHANGE, function(sender, evt)
{
    events.cellSelectionChanged(graph, graph.getSelectionCell());       
});

//triggering the on select event 
events.cellSelectionChanged(graph);

//cells added event
graph.addListener(mxEvent.CELLS_ADDED, function(sender, evt) {

    var vertex = evt.getProperties().cells[0];
    if(vertex.isVertex()){

        var decoder = new mxCodec();
        var nodeModel = decoder.decode(vertex.value);               

        if(nodeModel.type=='node' || nodeModel.type=='branch'){
            utils.changeCellAttribute(vertex, 'nodeName', 'Node_' + vertex.id);                 
        }else if(nodeModel.type=='start'){
            utils.changeCellAttribute(vertex, 'nodeName', 'START');
        }else if(nodeModel.type=='end'){
            utils.changeCellAttribute(vertex, 'nodeName', 'END');                   
        }else if(nodeModel.type=='form'){
            utils.changeCellAttribute(vertex, 'nodeName', 'Form');                  
        }

    }
});

//on connect event 
graph.connectionHandler.addListener(mxEvent.CONNECT, function(sender, evt){  
    var model = graph.getModel();
    var edge = evt.getProperty('cell');  
    var source = model.getTerminal(edge, true);  
    var target = model.getTerminal(edge, false);
}); 
```

}

Any thoughts what the problem might be?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T13:54:57.357

解决方案：

从数据库（在本例中）加载完整的图形和单元格配置，包括单元格的宽度和高度。

问题是为某些单元格类型添加工具栏项，更准确地说，删除了单元格默认宽度和高度。正如我所说，我们正在从数据库加载配置，它是完全字符串化的，宽度和高度也是如此。

**它们都必须转换为 JavaScript Number 对象才能调整大小和布局才能正常运行。**

# c++ - 需要帮助解决我程序中的小问题

> ID：16084383
> 
> 赞同：0
> 
> 时间：2013-04-18T13:31:37.127
> 
> 标签：c++, rectangles

所以这是我的代码：

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

class Point
{
private:
    double px;
    double py;

public:
    void setX(const double x);
    void setY(const double y);
    double getX() const;
    double getY() const;
};

class Rectangle
{
private:
    string name;
    Point blPoint;
    double length, height;

public:
    // member functions
    void setName(const string & inName);
    void setBottomLeft(const double x, const double y);
    void setDimensions(const double inLength, const double inHeight);

    string getName() const;
    Point getBottomLeft() const;
    double getLength() const;
    double getHeight() const;

    double area() const;
    double perimeter() const;
    Point midPoint() const;
    void scaleBy2();
    void display() const;
};

// FUNCTION PROTOTYPES GO HERE:
void welcome();
bool read_rec(const string promptName, const string errorInvalid, const string errorUsed, string & inName, vector<Rectangle> & list);
void read_coord(const string promptPoint, double & x, double & y);
void read_length(const string promptLength, double & inLength, double & inHeight);
void add_rec(const string Name, double x, double y, double inLength, double inHeight, vector<Rectangle> & list);

int main()
{
    // Define your local variables, e.g. a vector of class Rectangle
    Rectangle rec;
    vector<Rectangle> list;
    string prompt1stName = "Enter the name of the first rectangle: ";
    string promptName = "Enter the name of the next rectangle: ";
    string errorInvalid = "Invalid input. Type 'rec' following by the name or 'stop' if done.";
    string errorUsed = "This name is already being used!";
    string inName;
    string Name;

    // Display welcome banner
welcome();

    /* Prompt user for first rectangle or 'stop' */
    bool read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);

    // WHILE user input is invalid
    while (read == false)
    {

        // Display "Try again! "
 cout << "Try again! " << endl;
         read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);
    }

    // IF user input is not 'stop'
        if (inName != "stop")
    {
        // Extract rectangle name from user input
                int a = inName.length() - 4;
        Name = inName.substr(4, a);

        // Prompt for bottom left point
                double x, y;
        string promptPoint = "Enter " + Name + "'s bottom left x and y coords: ";
        read_coord(promptPoint, x, y);

        // Prompt for length and height
                double inLength, inHeight;
        string promptLength = "Enter " + Name + "'s length and height: ";
        read_length(promptLength, inLength, inHeight);

        // Add rectangle to the rectangle list
        add_rec(Name, x, y, inLength, inHeight, list);
    }
    /* Prompt user for next rectangle or 'stop' */
    // WHILE user input not 'stop'
        while (inName != "stop")
    {
        // Display "Thank you! "
cout << "Thank you! ";
bool read = read_rec(promptName, errorInvalid, errorUsed, inName, list);

        // WHILE user input is invalid while (read == false)
        {

            // Display "Try again! "
                        cout << "Try again! " << endl;
            read = read_rec(promptName, errorInvalid, errorUsed, inName, list);
        }

            // IF user input is not 'stop'
                    if (inName != "stop")
        {

                // Extract rectangle name from user input
                            int a = inName.length() - 4;
            Name = inName.substr(4, a);

                // Prompt for bottom left point
                            double x, y;
            string promptPoint = "Enter " + Name + "'s bottom left x and y coords: ";
            read_coord(promptPoint, x, y);

                // Prompt for length and height
                            double inLength, inHeight;
            string promptLength = "Enter " + Name + "'s length and height: ";
            read_length(promptLength, inLength, inHeight);

                // Add rectangle to the rectangle list
            add_rec(Name, x, y, inLength, inHeight, list);
        }
    }

    // IF the rectangle list is not empty
        if (list.size() != 0)
    {
        // Display all rectangles in the rectangle list
int rec_num = 0;
int i = 1;
while (i< list.size())
{
    rec_num++;
    i++;

}
            cout << "You have " << rec_num+1 << " rectangle(s) in your list: ";
            cout << endl;

                for (int i = 0; i < list.size(); i++)
        {
            cout << "Rectangle '" << list[i].getName() << "' : ";
            list[i].display();
            list[i].scaleBy2();
            cout << "     After scale by 2: ";
            list[i].display();
            cout << endl;
        }
    }

    // ELSE
    else
        {
        // Display that no rectangles are in the list
                cout << "You have no rectangles in your list." << endl;
    }

  return 0;
}

// FUNCTION DEFINITIONS GO HERE:
void welcome()
{
    cout << "Welcome! Create your own list of rectangles." << endl;
    cout << "You will be asked to provide information about each rectangle in your list by name." << endl;
    cout << "Type the word 'stop' for the rectangle name when you are done." << endl;
    cout << endl;
}

bool read_rec(const string promptName, const string errorInvalid, const string errorUsed, string & inName, vector<Rectangle> & list)
{
    cout << promptName;
    getline(cin, inName);

    if (inName == "stop")
    {
        return(true);
    }
    else if (inName.substr(0,4) != "rec ")
    {
        cout << errorInvalid;
        return(false);
    }
    else
    {
        int j = 0;
        for (int i = 0; i < list.size(); i++)
        {
            if (inName == "rec " + list[i].getName())
            {
                j = j+1;
            }
        }
        if (j == 0)
        {
            return(true);
        }
        if (j != 0)
        {
            cout << errorUsed;
            return(false);
        }
    }
}

void read_coord(const string promptPoint, double & x, double & y)
{
    cout << promptPoint;
    cin >> x;
    cin >> y;
    }

void read_length(const string promptLength, double & inLength, double & inHeight)
{
    cout << promptLength;
    cin >> inLength;
    cin >> inHeight;
    cout << endl;

    while (inLength <= 0 || inHeight <= 0)
    {
        cout << "Make length and height positive values. Try again.";
        cout << promptLength;
        cin >> inLength;
        cin >> inHeight;
        cout << endl;
    }
}

void add_rec(const string Name, double x, double y, double inLength, double inHeight, vector<Rectangle> & list)
{
    Rectangle rec;
    rec.setName(Name);
    rec.setBottomLeft(x, y);
    rec.setDimensions(inLength, inHeight);
    list.push_back(rec);
}

// CLASS MEMBER FUNCTION DEFINITINOS GO HERE:

void Point::setX(const double x)
{
    px = x;
}

void Point::setY(const double y)
{
    py = y;
}

double Point::getX() const
{
    return (px);
}

double Point::getY() const
{
    return (py);
}

void Rectangle::setName(const string & inName)
{
    name = inName;
}

void Rectangle::setBottomLeft(const double x, const double y)
{
    blPoint.setX(x);
    blPoint.setY(y);
}

void Rectangle::setDimensions(const double inLength, const double inHeight)
{
    length = inLength;
    height = inHeight;
}

string Rectangle::getName() const
{
    return (name);
}

Point Rectangle::getBottomLeft() const
{
    return (blPoint);
}

double Rectangle::getLength() const
{
    return (length);
}

double Rectangle::getHeight() const
{
    return (height);
}

double Rectangle::area() const
{
    // area = length * height
    return(length * height);
}

double Rectangle::perimeter() const
{
    // perimeter = 2 * (length + height);
    return(2 * (length + height));
}

Point Rectangle::midPoint() const
{
    Point midPoint;
    double mx = blPoint.getX() + 0.5 * length;
    double my = blPoint.getY() + 0.5 * height;
    midPoint.setX(mx);
    midPoint.setY(my);
    return(midPoint);
}

void Rectangle::scaleBy2()
{
    double midx = blPoint.getX() + 0.5 * length;
    double midy = blPoint.getY() + 0.5 * height;
    double newblPx = midx - length;
    double newblPy = midy - height;
    length = 2*length;
    height = 2*height;
    blPoint.setX(newblPx);
    blPoint.setY(newblPy);
}

void Rectangle::display() const
{
    cout << " Location is (" << blPoint.getX() << ", " << blPoint.getY() << "), length is " << length << ", height is " << height << "; Area is " << area() << "; perimeter is " << perimeter() << ", midpoint is located at (" << midPoint().getX() << ", " << midPoint().getY() << ")" << endl;
} 
```

我现在对程序唯一的问题是它总是输出“无效的输入。键入'rec'后跟名称或'停止'如果完成。”，我不知道如何改变它。当您输入重复的答案时，如在 rec fire 和 rec fire 中，它会说 rec fire 已经被使用，然后继续提示该矩形而不是要求另一个名称。任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:37:30.967

这是错误的

```
/* Prompt user for first rectangle or 'stop' */
bool read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);

// WHILE user input is invalid
while (read == false)
{

    // Display "Try again! "
    cout << "Try again! " << endl;
    bool read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);
} 
```

您有*两个*读取变量，while 条件中的读取变量是指*第一个*声明的读取变量，第二个声明的读取变量从未使用过。你想要的是这个

```
/* Prompt user for first rectangle or 'stop' */
bool read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);

// WHILE user input is invalid
while (read == false)
{

    // Display "Try again! "
    cout << "Try again! " << endl;
    read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);
} 
```

现在您只有一个读取变量。这解释了我认为你描述的第二个错误。

另一种编码方式是这样的

```
for (;;)
{
    bool read = read_rec(prompt1stName, errorInvalid, errorUsed, inName, list);
    if (read)
        break;
    cout << "Try again! " << endl;
} 
```

在我看来，这种循环更好，因为它没有对 read_rec 的重复调用，所以使用这种循环，你犯的错误是不可能的。

# jsf-2 - 如何 动态增加其大小后，它的位置仍然是页面的中心吗？

> ID：16084384
> 
> 赞同：2
> 
> 时间：2013-04-18T13:31:37.790
> 
> 标签：jsf-2, primefaces, modal-dialog

在我的应用程序中，我有一个`<p:dialog>`，在对话框中我放置了一个`h:selectBooleanCheckbox`. 如果选中此选项，则会显示此下​​方的一行，否则此行将隐藏。默认情况下，对话框的位置是页面的中心。现在的问题是，当我检查这个时`booleanCheckbox`，对话框的高度和宽度会随着新行的内容大于上一个而增加`dialog`，然后位置不会保持在页面的中心，我的意思是对话框的底部和右侧的大小会增加。增加内容后如何在中心显示对话框？任何指针都会对我很有帮助。谢谢，

对不起我的英语不好。

.xhtml 的代码如下：

```
<p:dialog id="popUp" widgetVar="popUpWidget"
  showEffect="fade" hideEffect="explode" resizable="false" modal="true">
    <p:row>
        <h:outputLabel value="#{adbBundle['addRemoveActivityManagers']}" />
        <h:selectBooleanCheckbox value="#{activityListController.editActivityManager}" immediate="true">
            <p:ajax event="click" update="adminPanel" listener="#{activityListController.updateActivityManager}"/>
        </h:selectBooleanCheckbox>
    </p:row>
    <p:row rendered="#{activityListController.editActivityManager}">
        <p:column>
            <p:dataTable id="sourceManagerDataTable" value="#{activityListController.activitySourceUsers}" var="manager" liveScroll="true" scrollRows="5" 
                scrollHeight="125" selection="#{activityListController.selectedActivitySourceUsers}" selectionMode="multiple"
                filteredValue="#{activityListController.filteredSourceUsers}" scrollable="true" styleClass="activityManager">
                <f:facet name="header">
                    <h:outputText value="Available Managers" />
                </f:facet>
                <p:column headerText="Full Name" sortBy="#{manager.lastName}" filterBy="#{manager.fullName}" filterMatchMode="contains">
                    <h:outputText value="#{manager.lastName}, #{manager.firstName}" />
                </p:column>
            </p:dataTable>
        </p:column>
    </p:row></p:dialog> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:58:22.600

因此，当您单击复选框或选中它时，会调用一个重新呈现对话框的函数，因此将其添加`onstart="setSize();"`给您`p:ajax`：

下面是 JavaScript 函数：

```
function setSize () {
 $(".ui-dialog").css ({
    "width": 300,
    "height": 200,
    "left": "50%",
    "top": "50%",
    "margin-left": -150,
    "margin-top": -100
  });
} 
```

不要忘记，如果您决定更改`height`或设置`width`值，您应该将边距值设为它们的 -1/2 倍。我给出的值不确定你是否应该改变它们，如果它应该更大或其他什么。

如果您想检测未选中的复选框并根据它的状态设置高度，我们的功能可以是……。像那样：

```
function setSize () {
var checkBox = $(document.getElementById('myCheckBox'));
$('.ui-dialog').css ({
    'width' : 300,
    'height': 200,
    'left': "50%",
    'top': "50%",
    'margin-left': -150,
    'margin-top': -100
    });
if(!checkBox.checked) {//If it doesn't checked; it can be checkBox.attr('checked')
    $(".ui-dialog").css ({
        "height": 150, //New height value which is starting dialog height when it's unchecked
        "margin-top": -75
        });
    }
}
} 
```

您应该提供您的复选框的正确客户端 ID，您可以在浏览器的开发人员选项中看到它，也可能不是这个；`height:auto;`也可以工作。

# sql-server-ce - SQL Server Compact 4.0 和 Sync Framework 2.1：为什么缺乏支持？

> ID：16084385
> 
> 赞同：3
> 
> 时间：2013-04-18T13:31:39.763
> 
> 标签：sql-server-ce, microsoft-sync-framework

我花了一年时间为客户开发业务桌面应用程序，最近刚刚将其本地数据库升级到 SQL Compact Edition 4.0。现在我正在寻找将数据“复制”到 Azure 的方法，以便外部各方可以使用应用程序访问复制的站点数据、运行报告等。从我所做的阅读来看，SQL CE 4.0 似乎确实如此不支持这种情况，并且微软建议如果开发人员想要做这些事情，他们坚持使用旧的 v3.5。我对这一切感到不安。首先，我不能将 v3.5 与 Microsoft 推荐的 Entity Framework 5.0 一起使用。但总的来说，这种缺乏支持是否表明 Sync Framework 不是我的问题类型的首选解决方案？我有点新手，但我认为偶尔连接的应用程序，和/或允许用户在手机上使用与桌面上相同的数据的应用程序，这是一个常见的编程问题——需要一套标准的、最新的、受支持的技术。所以......我错过了什么？Sync Framework 是否以某种方式过时或不受欢迎？还是 SQL CE 与桌面应用程序一样？

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:22:25.390

您可以轻松地使 Sync Farmewrork 与 SQLCE 4.0 一起使用，请参阅 JuneT 博客。目前还没有计划进一步开发 SQLCE，但在可预见的将来，4.0 将得到 MS 的全面支持。My SQL CE 工具箱可以帮助您开始使用 Sync Framework，具有一些代码生成功能。

# html - 我在我的 HTML 文件中看不到错误

> ID：16084398
> 
> 赞同：1
> 
> 时间：2013-04-18T13:32:01.647
> 
> 标签：html

我试图验证我的 HTML 代码，但我得到了这个错误：

> 第 157 行，第 22 列：文档类型在此处不允许元素“div”；缺少“object”、“applet”、“map”、“iframe”、“button”、“ins”、“del”开始标签之一`<div class="details">`
> 
> 所提到的元素不允许出现在您放置它的上下文中；其他提到的元素是唯一允许在那里并且可以包含提到的元素的元素。这可能意味着您需要一个包含元素，或者您可能忘记关闭前一个元素。
> 
> 此消息的一个可能原因是您试图将块级元素（例如“ `<p>`”或“ `<table>`”）放入内联元素（例如“ `<a>`”、“ `<span>`”或“ `<font>`”）中。

但我在我的代码中看不到任何错误，所以我正在寻求帮助......

```
<!--Bar 3-->

<div class="mosaic-block bar3">

<a href="http://www.desktopped.com/featured/2010/09/multi-d isplay-setup-with-four-systems-and-a-whole-lot-of- screen-space/" target="_blank" class="mosaic-overlay">

<div class="details">

<h4>Multi-Display Setup With Four Systems, A Wall of Screens, And 64TB Of Storage</h4>

<p>via Desktopped</p>

</div>

</a>

<a href="http://www.nonsensesociety.com/2010/12/i-am-not-hu man-portraits/" target="_blank" class="mosaic-backdrop"><img src="http://buildinternet.s3.amazonaws.com/projects/mos aic/64tb.jpg" alt="fotka1"/></a>

</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:33:30.413

块不能放在行内元素中。在这种情况下`a`是内联的，并且`div`是块的，因此`<a><div></div></a>`是无效的 HTML。

# c# - Data Structure for caching (Key = DateTime, Value = decimal)

> ID：16084400
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:32:04.630
> 
> 标签：c#, asp.net

I have a function which calculates employee hours in a day. But, it's slow because it considers carry hours and other things.

I figure I can optimize this by caching the hours in a day and only update on change.

I'm looking for something that can quickly do:

```
Set(date,hours)
HasHoursFor(date)
GetHoursFor(date) 
```

What should I use for this?

I could use a `Dictionary`, but I am wondering if there is not some sort of hash way to set, get, and contains quickly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:38:34.000

您可以使用 a`Dictionary<DateTime,int>`并根据日期缓存小时数，如下所示：

```
Dictionary<DateTime,int> dict = new Dictionary<DateTime,int>();

void Set(DateTime date, int hours)
{
    if (dict.Contains(date)) dict.Remove(date);

    dict.Add(date.Date,hours);
}

bool HasHoursForDate(DateTime date)
{
    return dict.Contains(date.Date);
}

int GetHoursForDate(DateTime date)
{
    return dict[date.Date];
}

Set(DateTime.Now,8); 
```

我将日期标准化，因此它只是日期，而不关心时间部分，否则会导致比较失败。我还假设您有整个小时，否则您可能想要更改`int`为`double`等。

# iphone - Turn off mobile data in app

> ID：16084402
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:32:08.620
> 
> 标签：iphone, ios, objective-c

I'm wondering if you can turn off and on mobile data in your app. So for example in the settings menu that there is a switch where you can turn off mobile data only for your app. Is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:43:42.533

在某种程度上这是可能的，但这取决于你想做什么。

您不能关闭“手机的移动数据选项”。这是不允许的。

但是，您可以允许您自己的应用程序使用移动数据或禁止。这可以是您的 APP 偏好设置中的一个开关。我使用来自互联网的视频播放制作了一个类似的应用程序，没有真正的流媒体。在这种情况下，Apple 不允许您（或您的移动提供商）使用移动数据。所以在我开始播放 m4a 视频之前，我查看了网络，如果是移动数据，我警告用户切换到 WLAN，否则它不会播放视频。

以这种方式，您可以限制。要了解如何执行此操作，您可以查看 Apple “Reachability”示例 APP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:42:58.003

不，我相信不是因为在应用程序中允许这些功能意味着这些设置根本没有用处。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T13:49:27.573

您可以很好地显示警报并将它们重定向到设置页面。URL 方案用于重定向到设置页面。在设置页面中重定向到 wifi 控件的示例。

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=WIFI"]];

这是[重定向到设置页面的教程链接](http://paulpeelen.com/2011/11/30/ios-4-ios-5-tutorial-uialertview-with-link-to-wifi-or-settings-app-using-reachability-and-xcode-4-2/)。

除此之外，我不知道任何其他方法。

# html - Menu Sprite Navigation

> ID：16084404
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:32:12.727
> 
> 标签：html, css, menu, navigation, css-sprites

this is the mockup for the site I need to code [Mockup](http://s1.directupload.net/file/d/3229/dcj752ty_jpg.htm)

my menu sprite is not working properly, here you can see it [Website](http://dh-creative-webdesign.de/rw-fliesen.html)

Here is the HTML [HTML file](http://pastebin.com/BEaPRJdp)

and here the CSS [CSS file](http://pastebin.com/gGAUnUgm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:42:36.933

这个菜单使用sprite的原因是什么，css解决方案呢？

# highcharts - 使用phantomjs将highcharts极坐标图导出为PDF

> ID：16084405
> 
> 赞同：5
> 
> 时间：2013-04-18T13:32:14.153
> 
> 标签：highcharts, phantomjs

我正在为一个客户项目评估 highcharts，并且遇到了使用 phantomjs 渲染极坐标图的问题。图表线显示为厚厚的灰色斑点！我以为这是由于动画，但那是关闭的。会尝试发布图片，但有人对可能导致此问题的其他原因有任何想法吗？如果我从 chrome 打印预览，它看起来也不错。

这是[图像](https://s3.amazonaws.com/uploads.hipchat.com/26429/159531/xie6756nuqe9jkn/Screen%20Shot%202013-04-18%20at%2014.27.31.png)。

这是作为我使用 phantomjs 附带的 rasterize.js 脚本构建的报告的一部分创建的。所有其他图表都工作正常，极坐标图是唯一没有出来的。如果我将 highcharts 导出服务器脚本与 phantomjs 一起使用，它可以正常工作 - 但这仅允许将 1 个图表导出为 PDF。我需要将整个网页导出为 PDF，包括一些图表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-04T08:58:21.933

项目的错误跟踪还有另一种解决方法：

[https://github.com/ariya/phantomjs/issues/10364#issuecomment-14992612](https://github.com/ariya/phantomjs/issues/10364#issuecomment-14992612)

您需要做的就是在渲染到文件之前删除所有不透明度较低的页面元素：

```
diff --git a/examples/rasterize.js b/examples/rasterize.js
index fcd74cd..dcc81d4 100644
--- a/examples/rasterize.js
+++ b/examples/rasterize.js
@@ -19,6 +19,16 @@ if (phantom.args.length < 2 || phantom.args.length > 3) {
             console.log('Unable to load the address!');
         } else {
             window.setTimeout(function () {
+                // Remove all low-opacity paths. see PhantomJS  issue #364 
+                page.evaluate(function () {
+                    var paths = document.getElementsByTagName("path");
+                    for (var i = paths.length - 1; i >= 0; i--) {
+                        var path = paths[i];
+                        var strokeOpacity = path.getAttribute('stroke-opacity');
+                        if (strokeOpacity != null && strokeOpacity < 0.2)
+                            path.parentNode.removeChild(path);
+                    }
+                });
                 page.render(output);
                 phantom.exit();
             }, 200); 
```

即使您无权访问包含图表的页面源，您也可以使用它来获取图表。

# gwt - GWT overlapping images

> ID：16084406
> 
> 赞同：1
> 
> 时间：2013-04-18T13:32:17.703
> 
> 标签：gwt

i have one window panel and i want to set image in it.so i do,

```
Window window = new Window();
Panel panel = new Panel();  
AbsolutePanel absolutePanel = new AbsolutePanel();    
Image image = new Image("img/heat_map.jpg");
absolutePanel.add(image);  
Image ap1Image = new Image("img/end.PNG");
ap1Image.getElement().getStyle().setMargin(1, Unit.PX);
absolutePanel.add(ap1Image);   
panel.add(absolutePanel);
window.add(panel); 
```

but i stuck in code as i can't overlap another small icon image on main image(heat_map). i want onclick event on that icon image.but i can't overlap images in window panel.please help me out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:15:05.160

看来您使用的是 GXT 之类的东西，而不是纯 GWT。但无论如何 - AbsolutePanel 应该实现类似 add(Widget, int left, int top) 方法，所以你需要使用它而不是简单的 add(widget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:57:42.837

首先是在您的代码中，您不能实例化 GWT [Window](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/Window.html) 类，因为构造函数`Window`() 不是`visible`。

第二件事是没有 add 方法`window class`。

最后，要将图像重叠在一起，您需要应用 Some `CSS` ( `Z-index..positions`)

[CSS Divs重叠，我如何强制一个在另一个之上？](https://stackoverflow.com/questions/6354149/css-divs-overlapping-how-do-i-force-one-above-the-other)

最后，您可以简单地向图像添加点击处理程序。

```
imageIcon.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                // Do something....
            }
        }); 
```

祝你好运。

# python - how to start reading at line X in python?

> ID：16084407
> 
> 赞同：1
> 
> 时间：2013-04-18T13:32:22.643
> 
> 标签：python

actually I read a file like this:

```
f = open("myfile.txt")
for line in f:
    #do s.th. with the line 
```

what do I need to do to start reading not at the first line, but at the X line? (e.g. the 5.)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:34:24.747

使用[itertools.islice](http://docs.python.org/2/library/itertools.html#itertools.islice)您可以指定启动、停止和步进（如果需要）并将其应用于您的输入文件...

```
from itertools import islice

with open('yourfile') as fin:
    for line in islice(fin, 5, None):
        pass 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T13:32:57.473

打开的文件对象`f`是一个迭代器。阅读（并丢弃）前四行，然后继续常规阅读：

```
with open("myfile.txt", 'r') as f:
    for i in xrange(4):
        next(f, None)
    for line in f:
        #do s.th. with the line 
```

# c# - 想使用正则表达式模式拆分字符串

> ID：16084410
> 
> 赞同：-5
> 
> 时间：2013-04-18T13:32:27.277
> 
> 标签：c#, regex

我有一个字符串，我想拆分成

```
var finalQuote = "2012-0001-1";
var quoteNum = "2012-0001";
var revision = "1" 
```

我用过这样的东西

```
var quoteNum = quoteNum.subString(0,9);
var revision = quoteNum.subString(quoteNum.lastIndexOf("-") + 1); 
```

但是不能更有效地使用正则表达式吗？我遇到这样的模式需要分成两部分。

```
 var finalQuote = "2012-0001-1";
 string pat = @"(\d|[A-Z]){4}-\d{4}";
 Regex r = new Regex(pat, RegexOptions.IgnoreCase);
 Match m = r.Match(text);
 var quoteNum = m.Value; 
```

到目前为止，我已经到达这里。但我觉得我没有使用正确的方法。请指导我。

**编辑**：我想按模式编辑。用破折号分割不是一个选项，因为分割的第一部分包含一个破折号。IE，`"2012-0001"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:42:01.753

我会简单地选择：

```
var quoteNum = finalQuote.Substring(0,9);
var revision = finalQuote.Substring(10); 
```

`quoteNum`将由前 9 个字符、第 10 个字符和第 10 个字符之后`revision`的所有字符组成，例如，如果修订版是 10 或更高，它仍然可以工作。

使用复杂的正则表达式或扩展方法很快就会过大；有时简单的方法本身就足够有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:55:42.197

我同意其他人的观点，即使用子字符串是比正则表达式更好的解决方案。但是如果你坚持使用正则表达式，你可以使用类似的东西：

```
^(\d{4}-\d{4})-(\d)$ 
```

未经测试，因为我没有安装 C# 环境：

```
var finalQuote = "2012-0001-1";
string pat = @"^(\d{4}-\d{4})-(\d)$";
Regex r = new Regex(pat);
Match m = r.Match(finalQuote);
var quoteNum = m.Groups[1].Value;
var revision = m.Groups[2].Value; 
```

或者，如果你想要一个`string[]`你可以尝试（再次，未经测试）：

```
string[] data = Regex.Split("2012-0001-1",@"-(?=\d$)"); 
```

`data[0]`将是`quoteNum`并且`data[1]`将是`revision`。

**更新：**

的解释`Regex.Split`：

从`Regex.Split`文档：*Regex.Split 方法类似于 String.Split 方法，除了 Regex.Split 在由正则表达式而不是一组字符确定的分隔符处拆分字符串。*

正则表达式`-(?=\d$)`匹配一个`-`给定的后跟它，`a digit followed by the end of the string`因此它只会匹配字符串中的最后一个破折号。最后一个数字没有被消耗，因为我们使用了[零宽度的前瞻断言](http://www.regular-expressions.info/lookaround.html) `(?=)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:02:17.913

s如果新人能理解的东西，以后维护起来会更容易。

你可以使用：

```
var finalQuote = "2012-0001-1";
string[] parts = finalQuote.Split("-");
var quoteNum = parts[0] + "-" + parts[1] ;
var revision = parts[3]; 
```

但是，如果您坚持需要一个正则表达式，那么

```
(\d{4}-\d{4})-(\d) 
```

此表达式中有两组，组 1 捕获第一部分，组 2 捕获第二部分。

```
var finalQuote = "2012-0001-1";
string pat = @"(\d{4}-\d{4})-(\d)";
Regex r = new Regex(pat, RegexOptions.IgnoreCase);
Match m = r.Match(finalQuote);
var quoteNum = m.Groups[1].Value;
var revision = m.Groups[2].Value; 
```

# python - Python's threads block on IO operation

> ID：16084411
> 
> 赞同：0
> 
> 时间：2013-04-18T13:32:27.620
> 
> 标签：python, multithreading, python-2.7, io

I have the following problem. Whenever a child thread wants to perform some IO operation (writing to file, downloading a file) the program hangs. In the following example the program hangs on `opener.retrieve`. If I execute `python main.py` the program is blocked on an retrieve function. If I execute `python ./src/tmp.py` everything is fine. I don't understand why. Can anybody explain me what is happening?

I am using python2.7 on Linux system (kernel 3.5.0-27).

File ordering:

```
main.py
./src
    __init__.py
    tmp.py 
```

main.py

```
import src.tmp 
```

tmp.py

```
import threading
import urllib

class DownloaderThread(threading.Thread):
    def __init__(self, pool_sema, i):
        threading.Thread.__init__(self)
        self.pool_sema  = pool_sema
        self.daemon     = True
        self.i = i

    def run(self):
        try:
            opener = urllib.FancyURLopener({}) 
            opener.retrieve("http://www.greenteapress.com/thinkpython/thinkCSpy.pdf", "/tmp/" + str(self.i) + ".pdf")
        finally:
            self.pool_sema.release()

class Downloader(object):
    def __init__(self):
        maxthreads             = 1
        self.pool_sema         = threading.BoundedSemaphore(value=maxthreads)

    def download_folder(self):
        for i in xrange(20):
            self.pool_sema.acquire()
            print "Downloading", i
            t = DownloaderThread(self.pool_sema,i)
            t.start()

d = Downloader()
d.download_folder() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T23:20:19.597

我设法通过破解让它工作`urllib.py`——如果你检查它，你会看到许多`import`语句分散在代码中——即它“即时”使用导入内容，而不仅仅是在模块加载时。

所以，*真正的*原因仍然未知——但不值得调查——可能是 Python 的导入系统中的一些死锁。您只是不应该在运行期间运行重要的代码`import`- 那只是自找麻烦。

如果你坚持，如果你将所有这些奇怪的导入语句移到 urllib.py 的开头，你就可以让它工作。

# asp.net - How to find specific repeater item

> ID：16084412
> 
> 赞同：0
> 
> 时间：2013-04-18T13:32:28.290
> 
> 标签：asp.net, c#-4.0, repeater

I have a repeater and it has an Asp button. I want to get repeater item which contains clicked button.

Here is a part of my repeater:

```
 ...
       <td>
           <asp:Button runat="server" ID="btnSaveStock" OnClick="btnSaveStock_OnClick" Text="Save" />
       </td>
    </tr>
  </ItemTemplate> 
```

I want to access repeater item in here :

```
 protected void btnSaveStock_OnClick(object sender, EventArgs e)
    {
        try
        {
            Button btnSaveStock = (Button)sender;

            Repeater rptProductChance = (Repeater)btnSaveStock.Parent;

        }
        catch (Exception)
        {

            throw;
        }
    } 
```

What should I do expect loop as check all items of repeater?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:53:29.243

这是你可以做的。您可以`RepeaterItem`通过投射按钮来访问`NamingContainer`。

```
protected void btnSaveStock_OnClick(object sender, EventArgs e)
{
    try
    {
        Button btnSaveStock = (Button)sender;
        RepeaterItem item = (RepeaterItem)btnSaveStock.NamingContainer;
        //....

    }
    catch (Exception)
    {
        throw;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:44:08.063

由于有很多按钮（不仅仅是一个），如果您想处理按钮单击〜在转发器的当前“行”的上下文中〜，您可能想要连接到转发器，而不是按钮“模板定义”。

[http://www.developer.com/net/asp/article.php/3609466/ASPNET-Tip-Responding-to-the-Repeater-Controls-ItemCommand-Event.htm](http://www.developer.com/net/asp/article.php/3609466/ASPNET-Tip-Responding-to-the-Repeater-Controls-ItemCommand-Event.htm)

# java - 您什么时候想使用两个缓存线程池？

> ID：16084414
> 
> 赞同：5
> 
> 时间：2013-04-18T13:32:31.897
> 
> 标签：java, multithreading, threadpool

考虑一下 Netty 教程中的这个例子（尽管它不是我见过的唯一例子）：

```
Executor bossPool = Executors.newCachedThreadPool();
Executor workerPool = Executors.newCachedThreadPool();
ChannelFactory channelFactory = new NioClientSocketChannelFactory(bossPool, workerPool); 
```

这里创建了两个单独的缓存线程池。但为什么？如果多个线程池的大小是固定的，我可以理解它们的用途，但缓存的线程池不是。那么，如果您可以拥有一个不断扩展的缓存线程池，为什么还要拥有多个缓存线程池呢？事实上，只有一个不是更好吗？因为如果你有两个不同的线程提交任务，那么这意味着空闲的工作线程更有可能被利用。

我想知道这一点，因为我正在为服务器编写网络，并且我正在分别处理 UDP 和 TCP 连接。我想将处理任务分派到线程池，我正在考虑为此使用缓存线程池。但是，我不知道我应该使用一个还是两个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:38:15.187

我能想到拥有 2 个缓存线程池的唯一原因是，如果您需要对池进行不同的操作。例如，您可能有两类任务，并且您想`awaitTermination()`在处理一类任务但不处理另一类任务的线程池中执行。或者，也许您想`shutdownNow()`在不影响您允许排水的另一个池的情况下使用其中一个池。或者，也许您对每个池都有不同的线程工厂——尽管在您的代码示例中并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:42:58.797

您可以使用不同的 NamedThreadFactory 进行监控。

缓存线程池中的空闲线程也会在 60 秒后被杀死，因此它们可能有不同的生命周期。在内部，它使用自己的 BlockingQueue ReentrantLock 和其他同步来管理池中的线程。创建新的线程池可能会减少争用。线程池也可以有不同的生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:35:50.397

一个池很可能用于接收初始请求，另一个用于处理它

# android - GreenDao reload an object when using IdentityScope != None

> ID：16084418
> 
> 赞同：1
> 
> 时间：2013-04-18T13:32:48.943
> 
> 标签：android, greendao

I have the case that I operate on some object I got from greenDao and in some cases I have to revert the changes. I only got this to work with IdentityScope.None - with some IdentityScope I found no way to do that - even refresh() which sounded promising was not bringing back the data from the database. Is there any way to do this with a IdentityScope?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:03:57.053

DAO 的 refresh(entity) 方法会重新加载数据库中的所有实体值。但是，它在单个实体上运行，而不是在实体树上运行。

# actionscript-3 - AS3 错误 1009 - 我哪里出错了？

> ID：16084426
> 
> 赞同：0
> 
> 时间：2013-04-18T13:33:10.427
> 
> 标签：actionscript-3, flash, loops, setinterval

这是我得到的错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference. at     ICA_v7_fla::MainTimeline/addEgg()
at Function/http://adobe.com/AS3/2006/builtin::apply()
at SetIntervalTimer/onTimer()
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

看不到我哪里出错了 - 有人可以指出我试图引用空对象引用的地方吗:)

我的 AS 的其余部分内容如下：

```
import flash.events.Event;
import flash.utils.Timer;
import flash.events.TimerEvent;
//Set as a variable so that it can be changed at a later
//date so that the user level can change (if necessary).
var eggMoveSpeed=6;
var Score=0;
var ScoreValue=10;
var Level=1;
var NextLevel=100;
var EggCount=0;
var EggMax=15;

btn.addEventListener(MouseEvent.CLICK, scorer);
function scorer(e:Event):void{
//Add to the score.
Score=Score+10;
//Display score in text box.
scoreText.text=Score;
}
var eggAdd = setInterval(addEgg,2000);
function addEgg(){
//Add to the egg count (to ensure maximum is not exceeded).
EggCount=EggCount+1;
if (EggCount<=EggMax){
//Create an object of the egg_mc from the egg class.
var egg:egg_mc = new egg_mc();
//Set the Max and Min WIDTH positions.
var maxWidth = 452;
var minWidth = 98;
//Randomize the position of the egg on the screen - with thanks to     http://www.kirupa.com/developer/actionscript/tricks/random.htm
var positionX = Math.floor(Math.random()*(1+maxWidth-minWidth))+minWidth; 
//Position the egg on the stage, and add it to the screen
egg.y=400;
egg.x=positionX;
//Add the egg to the stage.
stage.addChild(egg);
//Add a moving loop to the egg.
egg.addEventListener(Event.ENTER_FRAME, loop);
}else{
    clearInterval(eggAdd);
}
    function loop(e:Event):void{
    //Move the egg up the screen.
    egg.y-=eggMoveSpeed;
    //Check to see if egg has got to the top of the screen - if so, then move the object to the bottom.
    if (egg.y<-100){
        egg.y=400;
    }
}
//Add an event listener to the egg, to see if it has been clicked.
egg.addEventListener(MouseEvent.CLICK, clickedEgg);

function clickedEgg(e:Event):void{
//http://asgamer.com/2009/flash-game-design-basics-adding-library-objects-to-stage-with-as3
//Create an object of the brokenEgg_mc from the broken egg class.
var brokenEgg:brokenEgg_mc = new brokenEgg_mc();
//Position the brokenEgg image wherever the egg Image was.
brokenEgg.y=egg.y;
brokenEgg.x=egg.x;
//Add brokenEgg to stage, and remove the egg image.
stage.addChild(brokenEgg);
stage.removeChild(egg);

//Add to the score.
Score=Score+ScoreValue;
//Display score in text box.
scoreText.text=Score;
//Set LevelCheck Variable to 0 - to recalculate correctly.
var LevelCheck = 0;
//Check the level that the user is currently on by dividing the score by the next level required score.
LevelCheck=Score/NextLevel;
//Setup a variable to use for the actual level to display.
var ActualLevel=0;
//Check to see if the LevelCheck variable has come back less than 1 (i.e. 0.1 or a score of 10).
if (LevelCheck < 1){
    //If yes, then set the level to 1, as user is still on level 1.
    ActualLevel=0;
} else {
    //If not, then round down to the lowest level (1.9 is still level 1!).
    ActualLevel=Math.floor(LevelCheck);
}
//Display the Lowest Level to the user.
levelText.text=ActualLevel;
}} 
```

显然，计时器事件循环直到舞台上有 15 个鸡蛋，然后间隔应该停止运行——但这会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:57:10.183

您的`egg`变量是函数范围的，即它在`addEgg()`函数中定义，但您引用`egg`内部的`clickedEgg`and `loop`，它没有实际访问`egg`' 值的权限。此外，如果有多个鸡蛋，您打算如何跟踪点击了哪个鸡蛋等？至少，使用`e.target`in`clickedEgg`函数找出点击了哪个鸡蛋，并且不要忘记清除事件侦听器。

```
function addEgg():void {
    if (EggCounter>=EggMax) return; // why adding eggs if there are too many?
    var egg:egg_mc=new egg_mc();
    // rest of code intact
}
function loop(e:Event):void {
    var egg:egg_mc=(e.target as egg_mc);
    if (!egg) return; // loop is for eggs only
    // rest of function intact
}
function clickedEgg(e:MouseEvent):void {
    var egg:egg_mc=(e.target as egg_mc);
    if (!egg) return;
    // rest of function intact, as we now have a valid egg link
    egg.removeEventListener(Event.ENTER_FRAME,loop);
    egg.removeEventListener(MouseEvent.CLICK,clickedEgg);
    // clear listeners. These are persistent until removed manually!
} 
```

# extbase - 使用正则表达式在 extbase 中进行验证

> ID：16084427
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:33:13.047
> 
> 标签：extbase

我想通过正则表达式和使用以下语法在 extbase 中使用模型属性的验证：

```
/**
 *
 *@var string $telephone
 *@validate RegularExpression('/^[0-9]+$/')
 */
 $protected $telephone; 
```

但我不断收到验证错误，无论 $telephone 变量的值如何。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T10:01:01.250

你可以简单地做类似的事情

```
/**
 *
 * @var string $telephone
 *
 */
 $protected $telephone; 
```

在这种情况下，您只能获得整数值到 var 电话。

另一种方法是添加正确的验证语法

```
@validate $telephone notEmpty, regularExpression(regularExpression="/^[0-9]+$/") 
```

# android - 计算 xml 中的项目

> ID：16084433
> 
> 赞同：0
> 
> 时间：2013-04-18T13:33:30.397
> 
> 标签：android

我收到如下 RSS 提要：

```
 <item>
        <caterory>sports</category>
        <content:encoded>text 1......</content:encoded>
        <title>title 1...</title>
        </item>

        <item>
        <caterory>news</category>
        <content:encoded>text 2......</content:encoded>
        <title>title 2 ...</title>
        </item>

        <item>
        <caterory>sports</category>
        <content:encoded>text 3......</content:encoded>
        <title>title 3 ...</title>
        </item>

         ......

        <item>
        <caterory>news</category>
        <content:encoded>text x......</content:encoded>
        <title>title x ...</title>
        </item> 
```

我想创建一个列表，列表项应该命名为类别名称。所以，如果用户点击运动，他可以看到新的运动等。这有多容易？在网上搜索我没有找到类似的东西。现在，我创建了一个列表，女巫返回给我一个包含所有类别的列表（例如，如果我有 25 篇文章，我会得到一个包含 25 个类别的列表，有时与 1.sports、2.news、3.sports 相同，...ETC）

```
int position=1;
if (feed.getItem(position).getCategory()!=null)
{

for(int pos=0;pos<feed.getItemCount();pos++){

    //feed.getItemCount();

    SlideMenuItem item2=new SlideMenuItem();
    item2.id = MYITEMCATEGORY;
    item2.icon = getResources().getDrawable(R.drawable.favorite_full);
    item2.label = feed.getItem(pos).getCategory();
    slidemenu.addMenuItem(item2);
} 
```

抱歉我的语法不好，希望我的问题可以理解..:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:42:50.843

创建一个包含所有类别的集合，这将消除重复项。然后迭代 Set 并将它们一一添加到菜单中。

[http://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

试试这个：

```
int position=1;
if (feed.getItem(position).getCategory()!=null)
{
    Set<String> categories = new HashSet<String>();
    for(int pos=0;pos<feed.getItemCount();pos++)
        categories.add(feed.getItem(pos).getCategory();

    for(String category : categories) {
        SlideMenuItem item2=new SlideMenuItem();
        item2.id = MYITEMCATEGORY;
        item2.icon = getResources().getDrawable(R.drawable.favorite_full);
        item2.label = category;
        slidemenu.addMenuItem(item2);
    }
} 
```

# php - Accessing tz database through PHP

> ID：16084441
> 
> 赞同：0
> 
> 时间：2013-04-18T13:33:41.853
> 
> 标签：php, timezone

I understand that PHP's timezone functionality makes use of the Olson tz database, and I was wondering whether there was a way to access the database information myself more directly, in order to get more accurate information through the use of longitudes and latitudes.

I guess, alternatively, if there are any good PHP libraries that can provide me with a timezone when given coordinates, that would be good too. I tried google's api for this, but it is limited and rejected every request I made to it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:25:19.013

tzdb 中唯一的坐标位于 zone.tab 中，并且只是每个示例城市的单个纬度/经度。这对于在地图上显示点很有用，但它不足以让您将任意纬度/经度解析为时区。

如果您在使用 Google 的 API 时遇到问题，您可以尝试发布这些具体问题或联系他们的支持。还有其他提供商，或者您可以构建自己的地理空间数据库以在本地解决它们。

您还应该查看我刚刚开始[的有关此主题的社区 wiki 。](https://stackoverflow.com/q/16086962/634824)

# hadoop - 警告 conf.HiveConf：在 CLASSPATH-TOS 上找不到用于大数据的 hive-site.xml

> ID：16084442
> 
> 赞同：0
> 
> 时间：2013-04-18T13:33:44.360
> 
> 标签：hadoop, hive, hdfs, talend

我是 Hadoop 新手。我发现 Talend Open Studio for Big Data。我正在尝试与 Hive 相关的组件：tHiveConnection 等。

执行作业时出现此错误：

```
[statistics] connecting to socket on port 3556
[statistics] connected
13/04/18 14:08:52 WARN conf.HiveConf: hive-site.xml not found on CLASSPATH
13/04/18 14:08:52 INFO metastore.HiveMetaStore: 0: Opening raw store with implemenation class:org.apache.hadoop.hive.metastore.ObjectStore
13/04/18 14:08:52 INFO metastore.ObjectStore: ObjectStore, initialize called
13/04/18 14:08:52 INFO DataNucleus.Persistence: Property datanucleus.cache.level2 unknown - will be ignored
13/04/18 14:08:54 INFO metastore.ObjectStore: Setting MetaStore object pin classes with hive.metastore.cache.pinobjtypes="Table,StorageDescriptor,SerDeInfo,Partition,Database,Type,FieldSchema,Order"
13/04/18 14:08:54 INFO metastore.ObjectStore: Initialized ObjectStore
Hive history file=/tmp/admin.qlv/hive_job_log_admin.qlv_201304181408_152240551.txt
13/04/18 14:08:55 INFO exec.HiveHistory: Hive history file=/tmp/admin.qlv/hive_job_log_admin.qlv_201304181408_152240551.txt
13/04/18 14:08:56 INFO service.HiveServer: Putting temp output to file \tmp\admin.qlv\admin.qlv_2013041814085651067019081102470.pipeout
13/04/18 14:08:56 INFO service.HiveServer: Running the query: set hive.fetch.output.serde = org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe
13/04/18 14:08:56 INFO service.HiveServer: Putting temp output to file \tmp\admin.qlv\admin.qlv_2013041814085651067019081102470.pipeout
13/04/18 14:08:56 INFO service.HiveServer: Running the query: SELECT    pokes.num,    pokes.val FROM pokes
13/04/18 14:08:56 INFO ql.Driver: <PERFLOG method=Driver.run>
13/04/18 14:08:56 INFO ql.Driver: <PERFLOG method=compile>
13/04/18 14:08:56 INFO parse.ParseDriver: Parsing command: SELECT    pokes.num,    pokes.val FROM pokes
13/04/18 14:08:56 INFO parse.ParseDriver: Parse Completed
13/04/18 14:08:56 INFO parse.SemanticAnalyzer: Starting Semantic Analysis
13/04/18 14:08:56 INFO parse.SemanticAnalyzer: Completed phase 1 of Semantic Analysis
13/04/18 14:08:56 INFO parse.SemanticAnalyzer: Get metadata for source tables
13/04/18 14:08:56 INFO hive.metastore: Trying to connect to metastore with URI thrift://:8020
13/04/18 14:08:56 ERROR parse.SemanticAnalyzer: org.apache.hadoop.hive.ql.metadata.HiveException: Unable to fetch table pokes
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:897)
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:831)
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.getMetaData(SemanticAnalyzer.java:954)
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:7524)
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:243)
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:431)
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:336)
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:909)
    at org.apache.hadoop.hive.service.HiveServer$HiveServerHandler.execute(HiveServer.java:191)
    at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:187)
    at org.apache.hadoop.hive.jdbc.HiveStatement.execute(HiveStatement.java:127)
    at bigdataproject.requetehive_0_1.RequeteHive.tHiveRow_1Process(RequeteHive.java:433)
    at bigdataproject.requetehive_0_1.RequeteHive.runJobInTOS(RequeteHive.java:660)
    at bigdataproject.requetehive_0_1.RequeteHive.main(RequeteHive.java:516)
Caused by: java.lang.NullPointerException
    at org.apache.thrift.transport.TSocket.open(TSocket.java:166)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.openStore(HiveMetaStoreClient.java:264)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.open(HiveMetaStoreClient.java:197)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.<init>(HiveMetaStoreClient.java:157)
    at org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:2093)
    at org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:2103)
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:889)
    ... 13 more
FAILED: Error in semantic analysis: Unable to fetch table pokes
13/04/18 14:08:56 ERROR ql.Driver: FAILED: Error in semantic analysis: Unable to fetch table pokes
org.apache.hadoop.hive.ql.parse.SemanticException: Unable to fetch table pokes
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.getMetaData(SemanticAnalyzer.java:1129)
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:7524)
    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:243)
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:431)
    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:336)
    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:909)
    at org.apache.hadoop.hive.service.HiveServer$HiveServerHandler.execute(HiveServer.java:191)
    at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:187)
    at org.apache.hadoop.hive.jdbc.HiveStatement.execute(HiveStatement.java:127)
    at bigdataproject.requetehive_0_1.RequeteHive.tHiveRow_1Process(RequeteHive.java:433)
    at bigdataproject.requetehive_0_1.RequeteHive.runJobInTOS(RequeteHive.java:660)
    at bigdataproject.requetehive_0_1.RequeteHive.main(RequeteHive.java:516)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Unable to fetch table pokes
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:897)
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:831)
    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.getMetaData(SemanticAnalyzer.java:954)
    ... 11 more
Caused by: java.lang.NullPointerException
    at org.apache.thrift.transport.TSocket.open(TSocket.java:166)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.openStore(HiveMetaStoreClient.java:264)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.open(HiveMetaStoreClient.java:197)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.<init>(HiveMetaStoreClient.java:157)
    at org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:2093)
    at org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:2103)
    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:889)
    ... 13 more
13/04/18 14:08:56 INFO ql.Driver: </PERFLOG method=compile start=1366290536085 end=1366290536467 duration=382>
13/04/18 14:08:56 INFO ql.Driver: <PERFLOG method=releaseLocks>
13/04/18 14:08:56 INFO ql.Driver: </PERFLOG method=releaseLocks start=1366290536467 end=1366290536467 duration=0>
Query returned non-zero code: 10, cause: FAILED: Error in semantic analysis: Unable to fetch table pokes
[statistics] disconnected 
```

你知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T10:43:45.600

最后我找到了这个问题的解决方案。虽然很简单，但我花了很长时间才找到。

1.  请确保端口 -> 独立模式应为 10000

2.  通过输入“hive --service hiveserver”启动 Hive Thrift Server

还要检查[http://raj-hadoop.blogspot.in/2013/11/talend-open-studio-warn-confhiveconf.html](http://raj-hadoop.blogspot.in/2013/11/talend-open-studio-warn-confhiveconf.html)

而已！您现在可以在 Talend 周围玩耍了！

# jquery - JQuery only working on Firefox

> ID：16084443
> 
> 赞同：2
> 
> 时间：2013-04-18T13:33:44.870
> 
> 标签：jquery, html

I am creating an HTML front page for users to view our 'How To' documents, the pdfs are fembeded onto the page to create a preview using the below JQuery. This is working fine in Firefox however will not work in IE or Chrome, any help is appreciated, Thanks

```
 $(document).ready(function() {
        "use strict";
        $('.btn').click(function() {
            var idToSRC = './HTA_' + this.id + '.pdf';
            $('#viewer').attr('src', idToSRC);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:38:21.663

您可以使用 JQuery clone() 方法执行此操作（我使用的 url 是示例 PDF）：

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

```
<button type="button" class="btn">Change Src</button>
<div>
    <embed id="viewer" src="http://www.education.gov.yk.ca/pdf/pdf-test.pdf" width="500" height="680"></embed>
</div>

 $(document).ready(function() {
        "use strict";
        $('.btn').click(function() {
            //var idToSRC = './HTA_' + this.id + '.pdf';
            var idToSRC = "http://www.reservoirminerals.com/files/doc_downloads/test.pdf";
            var $viewerDiv = $('#viewer').parent();          
            var viewerClone = $('#viewer').clone().attr('src', idToSRC);
            $viewerDiv.html(viewerClone);
        }); }); 
```

看到它在这里工作：

[http://jsfiddle.net/W32RA/2/](http://jsfiddle.net/W32RA/2/)

# php - MySQL 选择提交视频最多的前两个人，其中 type=1

> ID：16084444
> 
> 赞同：0
> 
> 时间：2013-04-18T13:33:44.860
> 
> 标签：php, mysql, sql

我有一张人们提交的视频表：

```
+----+-----------+------+---------+
| id | by_person | type | title   |
+----+-----------+------+---------+
|  1 |         3 |    1 | title1  |
|  2 |         4 |    1 | title2  |
|  3 |         3 |    1 | title3  |
|  4 |         4 |    2 | title4  |
|  5 |         3 |    1 | title5  |
|  6 |         6 |    2 | title6  |
|  7 |         6 |    2 | title7  |
|  8 |         4 |    2 | title8  |
|  9 |         3 |    1 | title9  |
| 10 |         4 |    1 | title10 |
| 11 |         4 |    1 | title11 |
| 12 |         3 |    1 | title12 |
+----+-----------+------+---------+ 
```

我如何`SELECT`获得提交最多 type=1 视频的前两个人，以便我得到这样的演示文稿？

```
1\. Person(3) - 5 videos
2\. Person(4) - 3 videos 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:38:03.047

我认为这会起作用：

```
SELECT by_person, count(*) AS total
FROM videos
WHERE type = 1
GROUP BY by_person
ORDER BY total DESC
LIMIT 2 
```

演示：[http ://sqlfiddle.com/#!2/b2916/22](http://sqlfiddle.com/#!2/b2916/22)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:37:47.777

你可以试试这个：

```
select by_person, sum(case when type = 1 then 1 else 0 end) as NumType1
from videos v
group by by_person
order by NumType1 desc
limit 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:38:29.683

```
SELECT by_person, COUNT(title)
FROM videos
WHERE type = 1
GROUP BY by_person
ORDER BY COUNT(title) DESC LIMIT 2; 
```

# java - 奇怪的乘法错误

> ID：16084452
> 
> 赞同：-2
> 
> 时间：2013-04-18T13:34:08.220
> 
> 标签：java, computer-science

为什么会像这样简单：

```
System.out.println("test problem: " + 194*194*194*409); 
```

输出如下内容：

```
test problem: -1308701240 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T13:36:12.187

因为你溢出了一个整数。请参阅 java 文档中对整数处理的数字的限制。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T13:35:54.067

我不会给你直接的答案，而是建议一些步骤。

*   算出你正在做的算术*类型*（文字 194 是什么类型？你使用的乘法运算符的结果是什么类型？）
*   你期望答案是什么？
*   您的结果类型可以处理该答案吗？
*   Java 对它无法处理的结果做了什么？

有关奖励积分，请参阅最后一部分的[Java 语言规范...](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T14:00:07.990

从[15.17.1 开始。乘法运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17)

> 如果整数乘法溢出，则结果是数学乘积的低位，以某种足够大的二进制补码格式表示。因此，如果发生溢出，则结果的符号可能与两个操作数值的数学乘积的符号不同。

我们有`194*194*194*409=2986266056`

在二进制中，结果是`1011 0001 1111 1110 1100 1101 1100 1000`

最后 32 位是`1011 0001 1111 1110 1100 1101 1100 1000`，因此我们没有因溢出而丢失任何位，但符号已更改。

由于`int`用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)( [Source](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2) ) 表示，因此结果为 `2^32 - 2986266056 = -1308701240`.

一切都按预期工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:39:34.440

看起来像操作结果的溢出。2.986.266.056 不是有效的 int 值。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-04-18T13:36:27.837

尝试首先进行数学运算，然后将结果转换为字符串。

# c++ - Makefile：没有规则来制作目标

> ID：16084456
> 
> 赞同：1
> 
> 时间：2013-04-18T13:34:12.277
> 
> 标签：c++, c, build, makefile

我在这个网站上寻找解决方案，现在也尝试了一段时间的谷歌，但不知何故我无法让它工作。

我的源文件应该在 src 目录中，而目标文件应该在 obj 目录中。现在我尝试创建一个简单的 makefie，但我得到一个没有规则的错误，或者我无法使用目录。

```
CC = /usr/bin/gcc
CXXFLAGS =  -O2 -g -Wall -fmessage-length=0

SRC:=       nohupshd.cpp \
            task.cpp

OBJ:=       nohupshd.o \
            task.o

OBJDIR:=        obj
SRCDIR:=        src

DEP:=       src/task.h
LIBS:=

TARGET:=    nohupshd

all:    $(TARGET)

$(TARGET):  $(OBJ)
    $(CC) -o $(TARGET) $(OBJ) $(LIBS)

clean:
    rm -f $(OBJ) $(TARGET) 
```

变体 1：

```
$(OBJDIR)/%.o: $(SRCDIR)/%.cpp
    $(CC) -S $(SRCDIR)/$< -o $(OBJDIR)/$@
    $(CC) -c $(SRCDIR)/$< -o $(OBJDIR)/$@ 
```

变体 1a：

```
%.o: %.cpp
    $(CC) -S $(SRCDIR)/$< -o $(OBJDIR)/$@
    $(CC) -c $(SRCDIR)/$< -o $(OBJDIR)/$@ 
```

当我使用这种模式时，我总是得到一个错误，即 nohupshd.o 没有规则来构建。

变体 2：

```
$(OBJ) : $(OBJDIR)/%.o: $(SRCDIR)/%.cpp
    $(CC) -S $(SRCDIR)/$< -o $(OBJDIR)/$@
    $(CC) -c $(SRCDIR)/$< -o $(OBJDIR)/$@ 
```

当我使用这个变体时，我可以看到它试图构建，但是我收到错误消息，说“file”.o 不符合目标模式。

另一个问题是“$<”没有给我源名称。根据几个站点应该，但我可以在输出中看到什么都没有，那么我该如何解决这个问题？

更新：

与此同时，我的最新版本如下所示：

```
$(OBJDIR)/$(OBJ) : $(OBJDIR)/%.o : $(SRCDIR)/%.cpp
    $(CC) -S $< -o $(OBJDIR)/`basename $@ .o`.asm
    $(CC) -c $< -o $@ 
```

这现在设法编译第一个对象文件（nohupshd.o），但是当 make 尝试执行第二个文件时，它再次失败说：目标“task.o”与模式不匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T02:51:33.363

如果上面的内容不正确，您实际上有几个。

首先你写*我的错误是，我假设模式 %.o 匹配任何以 .o 结尾的模式，但它不匹配*；这不是真的。该模式*确实*匹配任何以`.o`. 但是，`%`在目标端匹配的模式字符在先决条件端被相同的字符串替换。因此，如果您有一个目标`obj/task.o`并且它与模式匹配，`%.o`那么*词干*（手册称之为）将是`obj/task`，并且当先决条件是时`%.c`，这意味着 make 将寻找先决条件`obj/task.c`。由于没有一个，并且 make 不知道如何构建一个，因此该规则被丢弃为不适用。在编写模式规则时，您必须这样编写它们*只有*名称的相同部分与模式字符 ( `%`) 匹配。必须明确指定所有不相同的部分，包括目录。

第二，规则`$(OBJ) : $(SRC)`确实不对。该行表示每个目标文件都依赖于*所有*源文件，因此每当任何单个源文件更改`all`时，目标文件都将被重新编译。这真的不是你想要的（如果那是你想要的，你不需要 make：你可以写一个简单的 shell 脚本）。我不知道你的意思，*因为规则是空的，它调用模式规则*；您不需要它来调用模式规则。目标取决于`$(OBJ)`，每个目标文件都取决于其源文件（由于模式）。你根本不需要这条线。

第三，我不知道您为什么要尝试构建 .asm 文件，而不是直接从源代码编译到对象，但是如果您真的想要它们，那么创建一个单独的模式规则会更干净，更“类似”构建它们：创建模式规则`$(OBJDIR)/%.o : $(OBJDIR)/%.asm`和规则`$(OBJDIR)/%.asm : $(SRCDIR)/%.c`。如果您希望 ASM 文件成为构建的产品，您应该将它们声明为先决条件`all`或类似文件，否则它们将作为中间文件被删除。

第四，使用类似的东西`basename`是不必要的。有很多自动生成变量可以代替使用。例如，`$*`扩展到词干，所以你可以写`$(OBJDIR)/$*.asm`. 当然，如果您为 ASM 文件制定单独的模式规则，您可以直接使用`$@`或`$<`直接使用。还可以使用各种make函数；见手册。

第五，您定义了一个包含头文件的变量`DEP`，但从不使用它。因为它没有被使用，所以如果您更改该文件，则不会重建任何内容。如果您知道所有源文件都包含可以`$(OBJ) : $(DEP)`用来定义的每个标头；但这确实意味着（如上面的第二点）对任何标头的任何更改都会导致所有对象重新编译。您最好自动生成先决条件；因为您使用的是 GCC，所以这很简单。

第六，您使用的是 C++ 文件 (xxx.cpp)，但您使用的是 C 编译器。这将不起作用（链接行将失败：尽管编译器可以看到您正在编译 C++ 文件并做正确的事情，即使您调用 gcc，但当您将一堆对象链接在一起时，它不知道这些对象是否是C 对象或 C++ 对象（或 FORTRAN 或其他），因此您必须使用 C++ 前端进行链接，否则它不会引入正确的 C++ 库）。您应该使用 make 变量`CXX`来构建 C++ 代码， not `CC`，并将其设置为`g++`not `gcc`。

第七，你不需要`.SUFFIXES: .c .o`使用模式规则。只有后缀规则才需要它们，而这里没有。您可以保持简单`.SUFFIXES:`，但禁用内置模式匹配，这是一个轻微的性能改进。

最后，您会注意到您实际上并不需要该`$(SRC)`变量，因为 make 可以从模式规则中推断出它。但是，如果您想让您的 makefile 更轻松地更改，您可以从 SRC 变量构造 OBJ 变量的内容，例如`SRC = nohupshd.cpp task.cpp`then `OBJ = $(patsubst %.c,$(OBJDIR)/%.o,$(SRC))`。

所以，总而言之，这就是我建议您编写 makefile 的方式（尽管我不包括自动生成的依赖项）：

```
.SUFFIXES:

CXX :=      g++
CXXFLAGS := -O2 -g -Wall -fmessage-length=0

OBJDIR :=   obj
SRCDIR :=   src

TARGET :=   nohupshd
SRC :=      nohupshd.cpp task.cpp
DEP :=      src/task.h
LIBS :=

# ----

OBJ :=      $(patsubst %.cpp,$(OBJDIR)/%.o,$(SRC))
ASM :=      $(patsubst %.cpp,$(OBJDIR)/%.asm,$(SRC))

.PHONY: all clean

all: $(TARGET) $(ASM)

$(TARGET): $(OBJ)
        $(CXX) -o $@ $^ $(LIBS)

clean:
        rm -f $(OBJDIR)/* $(TARGET)

$(OBJDIR)/%.o : $(SRCDIR)/%.asm
        $(CXX) $(CXXFLAGS) -c -x assembler-with-cpp $< -o $@

$(OBJDIR)/%.asm : $(SRCDIR)/%.cpp
        $(CXX) $(CPPFLAGS) -S $< -o $@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:36:27.243

不要在编译器行中重复目录名称。`$<`并且`$@`已经有了目录名称。

```
$(OBJDIR)/%.o: $(SRCDIR)/%.cpp
    $(CC) -S $< -o $@
    $(CC) -c $< -o $@ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:38:46.590

所以最后我找到了如何编写这个makefile的答案，为了解释我的错误，请查看我标记为正确答案的帖子：

生成的 makefile 看起来像这样，为了完整起见，我将其发布在这里，包括头文件的依赖项（如果不需要，请删除 ASM 部分）：

```
.SUFFIXES:
.SUFFIXES: .o .cpp
.SUFFIXES: .o .d

CC := g++
LNK:= ar
CXXFLAGS =  -O2 -g -Wall -fmessage-length=0

OBJDIR:=        obj
SRCDIR:=        src
HDIR:=      include

INCLUDE_PATHS:= -Iinclude -Iinclude/interfaces -Iinclude/support

CPP_FILES := propertyfile/propertyfile.cpp \
            propertyfile/propertyitem.cpp \
            propertyfile/propertyfactory.cpp

OBJ :=  $(patsubst %.cpp,$(OBJDIR)/%.o, $(CPP_FILES))
SRC :=  $(patsubst %.cpp,$(SRCDIR)/%.o, $(CPP_FILES))
ASM :=      $(patsubst %.cpp, $(OBJDIR)/$*.asm, $(CPP_FILES))

LIBS:=      

TARGET:=    libsupport.a

all:    $(TARGET)

$(TARGET):  $(OBJ)
    @echo "Linking..."
    @$(LNK) rvs $(TARGET) $(OBJ)
    @cp $(TARGET) ../lib
    @cp -r include ..

clean:
    rm -f $(OBJ) $(ASM) $(TARGET)

-include $(patsubst %.cpp,$(OBJDIR)/%.d, $(CPP_FILES))

$(OBJDIR)/%.o: $(SRCDIR)/%.cpp $(OBJDIR)/%.d 
    @mkdir -p `dirname $@`
    $(CC) $(CXXFLAGS) -S $< -o $(OBJDIR)/$*.asm $(INCLUDE_PATHS)
    $(CC) $(CXXFLAGS) -c $< -o $@ $(INCLUDE_PATHS)

$(OBJDIR)/%.d: $(SRCDIR)/%.cpp 
    $(CC) $(CXXFLAGS) -MM -MT $@ -MF $(OBJDIR)/$*.d -c $< $(INCLUDE_PATHS) 
```

我希望这可以帮助其他用户。我发现的所有示例要么非常简单，并且单独列出了多个文件，而不是规则的一部分，但并没有真正解释它是如何工作的，或者太复杂以至于我无法找到它对我的帮助。

# sql - 在具有like 和 where 模式的列上建立索引？

> ID：16084458
> 
> 赞同：5
> 
> 时间：2013-04-18T13:34:17.500
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我得出了这样的结论，就像在下面的情况下确实搜索/扫描但我没有得到为什么它在第一种情况下扫描和在第二种情况下搜索。我理解了第三种情况。

```
SELECT c.contactname FROM Sales.Customers c
WHERE c.contactname LIKE '%a'-- Does a Scan 1st Case

SELECT c.contactname FROM Sales.Customers c
WHERE c.contactname LIKE 'a%'-- Does a Seek 2nd Case

SELECT c.contactname FROM Sales.Customers c
WHERE c.contactname LIKE '%a%'-- Does a Scan 
```

如果我在contactname 上建立一个索引，该索引具有以下示例数据，那么索引树将如何......就像我们为数字构建它一样，它将比较小于大于并且将遍历索引树在以下情况下的遍历方式。

```
c.contactname

mark
anna
krishna
nadejda
allen
bob
cab 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:41:10.323

它在第一种情况下进行扫描，原因与第三种情况相同：索引根据字符串开头的数据进行搜索。在模式开头使用通配符，无法智能地搜索索引以查找匹配项。该索引对字符串进行字典（字母）比较，这是一个小于/大于比较。

树可能看起来像这样：

```
 /nadejda
    mark
   /    \krishna
cab
   \    /bob
    anna
        \allen 
```

因此，可以进行搜索`a%`，因为索引会知道每个分支的去向。例如，C > A，所以向左走。搜索`%a`效率不高。索引必须读取所有数据以确定每个节点是否以 A 结尾。必须读取所有数据意味着使用索引只是浪费开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:44:23.507

这确实是 SQL Server 的工作方式。你在问为什么。

想想指数。从功能上讲，您可以将其视为`contactname`按字母顺序存储 - 很像字典或电话簿。（是的，它通常是一个更复杂的数据结构，通常是 B 树，但结果是按顺序排列的项目）。

当您说`contactname like 'a%'`时，查询优化器知道它只需要查看以字母“a”开头的条目。索引确切地知道它们在哪里，因此优化器可以使用搜索来找到它们。SQL Server 实现了这种优化`like`（并非所有数据库都这样做）。

当您说 时`contactname like '%a'`，您是在说“找到以 'a' 结尾的条目”。这很像通过字典查找所有以“a”结尾的单词。订购没有任何帮助。可能存在以“a”开头并以“a”结尾的条目。可能存在以“z”开头并以“a”结尾的条目。因此，这些类型的表达式需要扫描而不是查找。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T13:48:22.780

好的，当您在字符串列上创建索引时，为您分解这一点。它将按第一个字母存储它们，因此您的数据将像这样存储。

```
allen
anna
bob
cab
krishna
mark
nadejda 
```

因此，当您在执行操作时，您的`LIKE 'a%'`Sql 服务器可以通过查看开头带有“A”的所有内容的顺序来使用索引来减少结果。但是，一旦您将通配符放在末尾`LIKE '%A'`，您现在就强制引擎扫描整个表以查找以字母 A 结尾的任何内容。

当然，这是一个非常简单的解释。

# database - 如何获取只能通过 Oracle 数据库中的同义词访问的视图的定义？

> ID：16084463
> 
> 赞同：0
> 
> 时间：2013-04-18T13:34:32.783
> 
> 标签：database, oracle, view, synonym

有什么方法可以从 Oracle 数据库同义词中获取类型或通用表/视图定义？是否需要特殊权限才能获得它，或者甚至不可能，我必须检查真实的源数据库？我对列数据类型和类型的长度（重要的地方）特别感兴趣。

非常感谢。

# python - Django：过滤多对多字段给出了太多答案？

> ID：16084467
> 
> 赞同：0
> 
> 时间：2013-04-18T13:34:39.330
> 
> 标签：python, django, many-to-many

有以下四种型号

**测量：**

```
class Measurement(models.Model):
    config = models.ForeignKey(MeasurementConfig)   
    energy = models.ForeignKey(Energy)   
    dose = models.DecimalField(max_digits=20,decimal_places=9, blank=True, null=True) 
```

**测量配置**

```
class MeasurementConfig(models.Model):
    date = models.DateTimeField(auto_now_add=True)
    linac = models.ForeignKey(Linac) 
```

**直线加速器**

```
class Linac(models.Model):
    name = models.CharField(max_length=10)
    genre = models.ForeignKey(Type)
    energies = models.ManyToManyField(Energy) 
```

**活力**

```
class Energy(models.Model):
    value = models.PositiveIntegerField()
    category = models.ForeignKey(EnergyCategory) 
```

现在我想从特定直线加速器和能量的测量模型中获取所有剂量测量值。

我使用以下代码来获取这些：

```
linac = get_object_or_404(Linac, name=linacname)   

# Get all the energies for the specified linac
measurementconfigs = MeasurementConfig.objects.filter(linac=linac)
identifications = []
for measurementconfig in measurementconfigs:
    identifications.append(measurementconfig.identification)
config = get_object_or_404(MeasurementConfig, identification=identifications[0])
energies = config.linac.energies.all()

# Get the measurements
energymeasurements = []    
for energy in energies:
    measurements = Measurement.objects.filter(config__linac=linac).filter(config__linac__energies__exact=energy)
    energymeasurements.append(measurements) 
```

我期望能量测量看起来像这样：

```
energymeasurements = [(Measurements_**Energy1**), (Measurements_**Energy2**), (Measurements_**EnergyN**)] 
```

其中N是能量

但我得到的是：

```
energymeasurements = [(Measurements_**ALLEnergies1**), (Measurements_**ALLEnergies2**), (Measurements_**ALLEnergiesN**)] 
```

其中N是能量的量。

所以我希望我所做的查询可以获得循环指定的特定能量的所有测量值。但相反，我得到了所有能量的测量值。我已经通过仅使用特定能量的 id 尝试不使用循环，同样的问题发生了。

我知道问题出在查询中，但我无法找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:49:01.233

你的目标：

> 现在我想从特定直线加速器和能量的测量模型中获取所有剂量测量值。

我的做法：

1.  获取直线加速器记录。
2.  使用多对多链接表获取相应的能量记录。
3.  获取链接到 Linac 记录的所有 MeasurementConfig 记录。
4.  对于每条MeasurementConfig记录，获取所有Measurement记录；使用 Energy 记录过滤此记录集。

在您发布的代码中，您似乎正在尝试根据您指定的模型过滤不存在​​的链接上的测量记录集。

```
# Get the measurements
energymeasurements = []    
for energy in energies:
    measurements = Measurement.objects.filter(config__linac=linac).filter(config__linac__energies__exact=energy)
    energymeasurements.append(measurements) 
```

测量与直线加速器无关，所以我认为这就是为什么你没有得到你期望的结果。

# r - R中的变量组合

> ID：16084468
> 
> 赞同：4
> 
> 时间：2013-04-18T13:34:39.757
> 
> 标签：r, variables, combinations, permutation, expand

我正在尝试创建一个假数据框来检查 R 中多项式 logit 模型的影响。我的代码正是我想做的，即创建一个代表不同变量级别的每个组合的行。

```
var1 <- seq(1,10,1)
var2 <- seq(1,20,5)

FakeData <- as.data.frame(matrix(NA, nrow=length(var1) * length(var2),
                                 ncol=2))

row <- 1
for(i in 1:length(var1)){
  for(j in 1:length(var2)){
    FakeData[row, 1] <- var1[i] 
    FakeData[row, 2] <- var2[j]
    row <- row + 1
  }
}

> head(FakeData)
  V1 V2
1  1  1
2  1  6
3  1 11
4  1 16
5  2  1
6  2  6 
```

我的问题是，当应用于我的问题时，这段代码效率非常低，有四个变量，每个变量大约十级。有关可能使其更快的功能的任何提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:37:36.810

您可能正在寻找`expand.grid`?

```
R> expand.grid(var1, var2)
   Var1 Var2
1     1    1
2     2    1
3     3    1
4     4    1
5     5    1
6     6    1
7     7    1
8     8    1
9     9    1
10   10    1
11    1    6
12    2    6
13    3    6
14    4    6
15    5    6
16    6    6
17    7    6
18    8    6
19    9    6
20   10    6 
```

# javascript - 为什么重复的脚本标签不会产生重复的请求？

> ID：16084470
> 
> 赞同：6
> 
> 时间：2013-04-18T13:34:51.160
> 
> 标签：javascript, http, loading

我有一个非常简单的测试用例（以及 3 个小时的谷歌搜索和流感）

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Два внешних скрипта</title>
</head>
<body>
    <script type="text/javascript" src="http://example.com/myscript.js"></script>
    <script type="text/javascript" src="http://example.com/myscript.js"></script>
</body>
</html> 
```

服务器返回以下响应头

```
Connection: keep-alive
Expires: Mon, 04 Dec 1999 21:29:02 GMT
Cache-Control: no-store, no-cache, must-revalidate, max-age=0
Pragma: no-cache 
```

在 chrome 中执行的这段代码会产生一个对服务器的请求，同样在 safari win 中。

这种行为无论如何是标准的吗？

这种行为是否有任何官方文档？

这是现金问题吗，因为我认为您仍然会收到带有 304 响应的请求？

免责声明：请不要建议随机化或避免此问题。我想了解这个问题的背景

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:57:56.843

许多 HTTP 方法（GET、HEAD、PUT、DELETE）被定义为*幂等*的，这意味着多个相同的请求与单个请求具有相同的效果。浏览器会考虑到这一点，并将尽可能避免发送多个相同请求的开销。

有关详细信息，请参阅[超文本传输​​协议 - HTTP/1.1 RFC 第 9.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-9.1)。有关高级概述，请参阅[有关 HTTP 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Idempotent_methods_and_web_applications)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T14:00:24.587

发生这种情况的原因有两个。第一个是内容提供者可以设置`expires`标题，这样浏览器就不会发出第二个请求，第二个是浏览器实际上是如何处理`GET`HTTP 中的请求，例如包含脚本的 get 请求。

## 1.设置Expires Header的内容

内容提供者可以设置`Expires`标头，以便脚本第一次被浏览器缓存，因此不需要第二次请求。这是加快网页速度的良好标准 Web 实践，并且 expires 标头由脚本的主机服务器设置。Yahoo Developer 在[Add an Expires or a Cache-Control Header](http://developer.yahoo.com/performance/rules.html)中有一篇很好的文章，建议将 Expires 标头添加到脚本和样式表以及图像。

## 2.脚本Get方法是幂等的

`GET`请求，例如在网页上包含 javascript 的 get 请求是根据 HTTP 规范的安全方法。安全方法也是幂等的，因为多个请求与单个请求产生相同的结果，并且该方法仅用于检索数据。许多浏览器利用了 HTTP 规范的这一特性，并且不会为幂等方法发送多个请求。[George Cummins 很好地解释了这一点， Mozilla Developer Network](http://developer.mozilla.org/en-US/docs/HTTP)上提供了一篇关于此的文章。

# css - 引导图标不显示在生产服务器中

> ID：16084472
> 
> 赞同：0
> 
> 时间：2013-04-18T13:34:56.813
> 
> 标签：css, asp.net-mvc, twitter-bootstrap

我使用 twitter bootstrap 制作了一个 asp.net MVC 网页。在我的网络的某些部分，我使用 boostrapt 图标。在我的测试服务器（本地 IIS）中工作正常，但在生产服务器中，图标绘制错误。

**坏的：**

![在此处输入图像描述](https://i.stack.imgur.com/FnDQA.png)

**好的：**

![在此处输入图像描述](https://i.stack.imgur.com/EvxnW.png)

```
<button class="btn <%if(item.EsFavorita) {%>btn-warning<%} %>" 
id="<%= item.IdNoticia %>" onclick="InsertarNoticiaFavorita(this);return false;">
<i class="<%if(!item.EsFavorita) {%>icon-star-empty<% } 
else{%>icon-white icon-star<%} %>"></i>Favorito </button> 
```

可能是什么原因？

编辑：据我所知，是版本问题。css boostrapt的“min”，不加载图标的文件，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:58:55.207

如果您使用的是本机引导图标，这可能是由于缺少图像文件造成的。请检查所有必需的 png 文件是否存在。

** 我强烈建议您使用以下引导字体图标之一：http: [//fortawesome.github.io/Font-Awesome/](http://fortawesome.github.io/Font-Awesome/) :)

# android - 使用 Android 将时间值转换为“hh:mm Am/Pm”格式

> ID：16084474
> 
> 赞同：45
> 
> 时间：2013-04-18T13:35:04.697
> 
> 标签：android, stringtokenizer, android-date

我正在使用 StringTokenizer 从诸如“2013-02-27 06:06:30”之类的数据库中获取日期值，我将分别获取时间，如下所示

```
String startTime = "2013-02-27 06:06:30";

StringTokenizer token = new StringTokenizer(startTime);
String date1 = token.nextToken();  
String time1 = token.nextToken(); 
```

并及时得到结果 06:06:30，

我可以将它重新存储在另一个 String 类型的变量中吗？

```
String displayValue = "06:06 AM"; 
```

如果 time1 变量的值为

```
String time = 16:00:00; 
```

那么它应该转换为：

```
String displayValue = "04:00 PM"; 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-18T13:45:06.123

尝试这个..

```
Date dt = new Date(date1);
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm aa");
String time1 = sdf.format(dt); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-19T07:15:08.160

我就这样得到了答案。

```
startTime = "2013-02-27 21:06:30";
StringTokenizer tk = new StringTokenizer(startTime);
String date = tk.nextToken();  
String time = tk.nextToken();

SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss");
SimpleDateFormat sdfs = new SimpleDateFormat("hh:mm a");
Date dt;
try {    
    dt = sdf.parse(time);
    System.out.println("Time Display: " + sdfs.format(dt)); // <-- I got result here
} catch (ParseException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-07-17T03:29:39.103

首先，您不需要使用`StringTokenizer`来获取字符串时间。像这样传递你的`startTime`：

```
// Get date from string
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = dateFormatter.parse(startTime);

// Get time from date
SimpleDateFormat timeFormatter = new SimpleDateFormat("h:mm a");
String displayValue = timeFormatter.format(date);

// Done! 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-18T13:46:18.747

尝试这个

```
 String time = "22:35";

try {
     SimpleDateFormat sdf = new SimpleDateFormat("H:mm");
     Date dateObj = sdf.parse(time);
    System.out.println(dateObj);
    System.out.println(new SimpleDateFormat("K:mm").format(dateObj));
} catch (final ParseException e) {
    e.printStackTrace();
} 
```

追踪此链接[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-03-16T06:35:19.770

```
Date dt = new Date(date1);
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm aa");
String time1 = sdf.format(dt); 
```

凌晨 2 点输出

```
 Date dt = new Date(date1);
 SimpleDateFormat sdf = new SimpleDateFormat("hh:mm a",Locale.US);
 String time1 = sdf.format(dt); 
```

输出 2.00 AM

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-04-18T13:39:57.750

我建议使用 DateFormat，例如[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

```
try {
    String timeLong = "2013-02-27 06:06:30";
    String timeShort = "16:06 AM";
    SimpleDateFormat formatLong = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
    SimpleDateFormat formatShort = new SimpleDateFormat("hh:mm aa", Locale.US);
    Log.v("out", formatShort.format(formatLong.parse(timeLong)));
    Log.v("out", formatShort.format(formatShort.parse(timeShort)));
} catch (ParseException e) {
    e.printStackTrace();
} 
```

我今天很累，我觉得我在这段代码中遗漏了一些东西，所以我可能会在以后修改它，但它确实有效并且它不会（直接）调用已弃用的 Date 类。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-06-20T18:03:30.820

**1 假设您需要以09:30 PM**格式显示当前时间。这将是一个相当简单的方法。即使您当前不需要它，您也应该能够使用以下 DateFormat 来满足您的要求。

```
Calendar cal = Calendar.getInstance();
DateFormat outputFormat = new SimpleDateFormat("KK:mm a");
String formattedTime = outputFormat.format(cal.getTime()); 
```

2**注意：**以下格式化程序可用于以 24 小时格式（**21:30**）显示相同的时间。

```
new SimpleDateFormat("HH:mm"); 
```

3 但是，如果您想构造与我的第一点相同的格式，最好使用以下代码，因为**Java 不鼓励**使用**StringTokenizer**。你可以在这里阅读它，[http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)

希望这对你有帮助，谢谢！

```
 String startTime = "2013-02-27 21:06:30";
    String[] parts = startTime.split(" ");

    DateFormat outputFormat = new SimpleDateFormat("KK:mm a");
    SimpleDateFormat parseFormat = new SimpleDateFormat("hh:mm:ss");

    try {
        Date dt = parseFormat.parse(parts[1]);
        System.out.println(outputFormat.format(dt));
    } catch(ParseException exc) {
        exc.printStackTrace();
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-10T06:45:14.737

所选答案存在显示错误时间的问题。如果您的时间是**12:30:00**它显示**12:30 AM**而不是**12:30 PM**。下面的代码将有助于克服这个问题。

```
SimpleDateFormat sdf = new SimpleDateFormat("KK:mm:ss");
SimpleDateFormat sdfs = new SimpleDateFormat("hh:mm a");

    Date dt1 = null;

    try {
        dt1 = sdf.parse("12:00:00");
        Log.i("Time in Am Pm  ", sdfs.format(dt1));

    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-03-20T06:41:36.880

**只需使用以下模式，您将获得预期的结果：**

```
 try {
        String time = "06:06:30";
        SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss");
        Date dt = sdf.parse(time);

        SimpleDateFormat sdfs = new SimpleDateFormat("hh:mm a");
        String formatedTime = sdfs.format(dt);

        Log.v("parseTime", formatedTime);

    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

快乐编码:)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-18T14:54:21.297

在 Android 上，你也有[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)

# javascript - 无法将数据传递到 Windows Phone 中的子浏览器

> ID：16084475
> 
> 赞同：0
> 
> 时间：2013-04-18T13:35:05.307
> 
> 标签：javascript, html, windows-phone-7, cordova

我正在使用 PhoneGap 构建一个 Windows Phone 7 混合应用程序。我们正在我们的应用程序中打开一个子浏览器。

```
The problem is we are not able to send some data to child browser window from our javascript file.We have tried to use local storage but local storage value are not accessible in child browser.

This is the section of code from where we are opening child browser.(parent browser)

$("#openformbtn").click(function(){
        ChildBrowser.install();     
localStorage.qString='h=NAS1&t=0000927686:1000&n=abc&e=a@g.com&c=776895654568&hname=mnl&cname=Ahm';
        var cb = window.plugins.childBrowser;
        cb.showWebPage('x-wmapp1://app/www/payment-info.html',false);       
        });
        });

This code is called in child browser when it gets loaded(child browser)

$(document).ready(function(){
createPaymentInfo();
});

function createPaymentInfo(){
 var query= localStorage.qString;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:18:44.387

将数据附加到 url。

```
$("#openformbtn").click(function(){
    ChildBrowser.install();     
    var qString='h=NAS1&t=0000927686:1000&n=abc&e=a@g.com&c=776895654568&hname=mnl&cname=Ahm';
    var cb = window.plugins.childBrowser;
    var url = 'x-wmapp1://app/www/payment-info.html' + '?' + qString;
    cb.showWebPage(url, false);       
}); 
```

然后在子浏览器中你可以有一些代码，比如：

```
var params = location.href.split('?')[1]; 
```

并从那里解析成一个数组或任何东西。

# asp.net - 如何查看我的 Visual Basic 项目？

> ID：16084476
> 
> 赞同：2
> 
> 时间：2013-04-18T13:35:08.250
> 
> 标签：asp.net, vb.net

我刚刚找到了一个旧的 USB 驱动器，上面有我在学校的高级项目。这是一个 asp.net Visual Basic 项目，但我不知道/记得（？）如何打开它。

它有一堆`.aspx`和`.aspx.vb`和`.master`和`.master.vb`文件。

我只是希望能够打开它并查看我很久以前构建的项目。有谁知道我怎么能做到这一点？谢谢！

**更新：**这是我的 Login.aspx.vb 文件的内容

```
Partial Class Login
    Inherits System.Web.UI.Page

    Protected Sub btnEmployer_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnEmployer.Click
        Response.Redirect("~/clientLogin.aspx")
    End Sub

    Protected Sub btnEmployee_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnEmployee.Click
        Response.Redirect("~/employeeLogin.aspx")
    End Sub
End Class 
```

Login.aspx 的内容：

```
<asp:Content ID="Content1" ContentPlaceHolderID="cphMain" Runat="Server">
    <p>
        Select Account Login Type</p>
    <p>
        <asp:Button ID="btnEmployer" runat="server" style="height: 26px" 
            Text="Employer" />
    </p>
    <p>
        <asp:Button ID="btnEmployee" runat="server" Text="Employee" />
    </p>
</asp:Content> 
```

这是我的 Home.aspx.vb 文件的内容：

```
Partial Class Home
    Inherits System.Web.UI.Page

End Class 
```

Home.aspx 文件的内容：

```
<%@ Page Language="VB" MasterPageFile="~/loggedinMasterClient.master" AutoEventWireup="false" CodeFile="Home.aspx.vb" Inherits="Home" title="Untitled Page" %>
<asp:Content ID="Content1" ContentPlaceHolderID="cphData" Runat="Server">
    <asp:Label ID="lblWelcome" runat ="Server"></asp:Label>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:39:09.853

Visual Web Developer Express.......是我首先要尝试的。

[http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:40:31.477

查找 .sln 或 .vbproj 文件。如果找到，请下载并安装[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)的副本。当前版本的 Visual Studio 应该能够打开您的旧项目。请注意：它可能必须先将其转换为当前格式。

如果找不到 .sln 或 .vbproj 文件，这可能是项目的已部署版本。在这种情况下，您需要确保您使用的是支持 IIS 的 Windows 版本（Windows 的家庭高级版往往*不*支持此功能）。默认情况下，IIS 没有安装在任何现代版本的 Windows 中——您必须手动添加它——因此您还需要通过查看 Windows 程序和功能区域来确保它已安装并运行。完成此操作后，您的硬盘驱动器上可能会有一个文件夹，如下所示：

> C:\inetpub\wwwroot

将拇指驱动器的全部内容复制到该文件夹​​，然后将 Web 浏览器指向此处：

```
http://localhost/ 
```

如果一切顺利，您将看到您的项目。

您的项目也可能依赖于某种数据库连接。对于您学习 VB.Net WebForms 的学校项目，该数据库可能涉及 Sql Server。您的 Visual Studio Express 安装应该也允许您安装 Sql Server Express Edition，但您可能仍需要设置用户帐户或将数据库加载到服务器中......不幸的是，这超出了我的范围你通过没有更多的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:46:13.393

用于`Visual Studio Express`打开文件。

下载[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)

此外，如果您想成功构建项目，您可能需要检查所涉及的数据库。[下载SQL Server](http://www.microsoft.com/en-in/download/details.aspx?id=1695)的快捷版

确保连接字符串在`web.config`文件中就位。

# html - 标题比较中的html调用元素

> ID：16084477
> 
> 赞同：0
> 
> 时间：2013-04-18T13:35:09.767
> 
> 标签：html, css, inline

我在 HTML 中有一个导航元素，我可以用外部 CSS 更改它，但我想比较如何从 HTML 内部调用它，

所以我得到了

```
<div id="header" class="row">
    <div id="logo" class="col_12">And the winner is<span>n't...</span></div> 
    <div id="navigation" class="row"> 
        <ul>
            <li><a href="#">Why?</a></li>
            <li><a href="#">Synopsis</a></li>
            <li><a href="#">Stills/Photos</a></li>
            <li><a href="#">Videos/clips</a></li>
            <li><a href="#">Quotes</a></li>
            <li><a href="#">Quiz</a></li>
        </ul>
    </div>  
</div> 
```

如果我放上标题

```
<link href="css/custom.css" rel="stylesheet" type="text/css" /> 
```

我可以更改我的列表以在 CSS 上显示为导航

```
#navigation ul li { 
    display: inline-block;
} 
```

但现在我想比较，并从 HTML 中调用这个元素

我在头部使用，并评论 CSS

```
<style>
#ul.navigation{display:inline-block;}
</style> 
```

但我认为我没有正确引用元素

另外，我如何在我的实际 html 正文中为我的列表调用这个“内联块”属性？[inine风格]

我看到 CSS 工作正常，但我想比较调用与头部样式以及如何在正文中调用它，

我看过这3个案例的例子，

[http://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)

我看到它与段落一起使用，但需要更多说明才能知道如何与我的元素一起使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:39:17.920

您可以通过这种方式使用 css.. #navigation ul li

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:38:48.020

你有没有试过这样说：

```
<style>
    #navigation ul li { 
        display: inline-block;
    }
</style> 
```

随着`#ul.navigation{display:inline-block;}`您选择错误的元素。

`ul.navigation`-> 你的`ul`元素与 class `navigation`。 `#`代表**身份证**。所以`#ul.navigation`无效。

您可能打算`div#navigation`甚至更好 `div#navigation ul li`地选择作为**ID**为“导航”的子`li`元素的元素。`ul``div`

 **像这样：

```
<style>
    div#navigation ul li { 
        display: inline-block;
    }
</style> 
```

[JSF](http://jsfiddle.net/dUZxD/)中。**

# oracle - 从日期时间减去一小时而不是一天

> ID：16084484
> 
> 赞同：10
> 
> 时间：2013-04-18T13:35:28.557
> 
> 标签：oracle, datetime, plsql, date-arithmetic

我在 Oracle ( *MM/DD/YYYY HH:MM:SS AM/PM*`datetime` ) 中有一个列，但是当我这样做时：

 *```
SELECT MAX(D_DTM)-1 FROM tbl1 
```

......它可以追溯到一天。如何从列中删除一小时而不是一天？

我还注意到`datetime`12AM 的记录看起来像*MM/DD/YYYY*而不是*MM/DD/YYYY 00:00:00*；我不确定这是否重要。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T13:49:33.513

[兰迪的回答](https://stackoverflow.com/a/16084524/1083652)很好，但你也可以使用间隔：

```
SELECT MAX(D_DTM)- interval '1' hour FROM tbl1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T13:49:44.317

或使用该`INTERVAL`功能。它具有相同的结果，但我认为它读起来更清楚 - 这当然只是一种意见:)

```
SELECT MAX(D_DTM) - INTERVAL '1' HOUR FROM tbl1 
```

该`INTERVAL`函数的好处是，您可以在处理`DATE`值时将间隔设置为年、月、日、小时、分钟或秒，尽管在处理月末日期时月间隔可能会很棘手。

是的，示例中的引号`1`是必需的。

您还可以使用 Oracle 特定的`NumToDSInterval`函数，它不那么标准但更灵活，因为它接受变量而不是常量：

```
SELECT MAX(D_DTM) - NUMTODSINTERVAL(1, 'HOUR') FROM tbl1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T13:36:45.103

是 - 日期按整数天计算。

如果你想要几个小时，你需要做一些数学 - 比如`-(1/24)`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-01T14:12:15.190

```
select sysdate - numtodsinterval(1,'hour') from dual 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-22T01:11:08.023

这很简单。

sysdate - 5/(24*60*60) --> 从 systime 中减去 5 秒

sysdate - 5/(24*60) --> 从 systime 中减去 5 分钟

sysdate - 5/(24) --> 从 systime 中减去 5 小时

因此

从双重选择（sysdate -（1/24））

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-03T17:17:02.060

另一种使用间隔的方法是

```
NUMTODSINTERVAL( number, expression ) 
```

例子

```
NUMTODSINTERVAL(150, 'DAY')
NUMTODSINTERVAL(1500, 'HOUR')
NUMTODSINTERVAL(15000, 'MINUTE')
NUMTODSINTERVAL(150000, 'SECOND') 
```

我提出这个是因为它对于使用 INTERVAL 不起作用的情况很有用。*

# titanium - 每个 TableViewRow 的动态数据

> ID：16084486
> 
> 赞同：2
> 
> 时间：2013-04-18T13:35:35.800
> 
> 标签：titanium, tableview, titanium-mobile, titanium-alloy

我正在使用合金（标记和模型）来构建一个表格视图，一切都很完美

```
<Collection src="spot" />
<Window>
    <TableView id="spotTableView" dataCollection="spot">
        <TableViewRow title="{name}">
            <View class="header-view">
                <Label class="title-header" text="{name}"/>
                <Label class="desc-header" text="{desc}"/>
            </View>
            <View class="fixed-view">
                <ImageView class="image" image="{logo}"/>
                <View class="info-view">
                    <Label class="green-label" text="{cost}"/>
                    <Label text="{minimum}"/>
                </View>
            </View>
        </TableViewRow>
    </TableView>
</Window> 
```

但我有一个问题：如何修改每个 tableviewrow 的动态数据表单？我需要根据集合中每个模型的数据来更改标签的颜色。例如，如果成本为 0，则标签“成本”为绿色，但如果成本为 100，则标签的颜色为红色。我想这必须在控制器上实现，但我不想在视图之外创建 tableviewrow，因为他们不想错过数据绑定的优势

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T20:10:38.140

将包含颜色的字段添加到模型，并将标签的颜色绑定到它。

# java-me - 停止在 J2ME 中一次又一次地请求许可

> ID：16084488
> 
> 赞同：2
> 
> 时间：2013-04-18T13:35:38.543
> 
> 标签：java-me

我正在使用位置 API 和`HttpConnection` 我的 J2ME 应用程序，它不断跟踪更新的位置并显示谷歌地图的图像，所以它反复请求用户许可。

如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:11:32.747

您所说的权限是安全权限。要删除这些安全许可消息，您需要使用一些认证机构（如[Verysign](http://www.verisigninc.com/?cmp=SEMG02:01I)或[Thawte ）签署您的移动应用程序](https://www.thawte.com/lp-sem/?sl=t29100223210313007&gclid=COCY5pqI1rYCFYsm6wodXi0AGQ)

您需要从该站点购买许可证书。一旦您获得证书（有效期为一年，费用约为 20K 印度卢比），您可以根据需要签署任意数量的申请。

J2ME 架构是为了保护，而不是在未经许可的情况下运行所有​​ API。创建/读取/删除文件、发出 http 请求、位置 API 等高级 API 必须要求您的应用程序进行签名以避免安全消息。

# php - CakePHP：如何在控制器中使用视图元素

> ID：16084490
> 
> 赞同：11
> 
> 时间：2013-04-18T13:35:45.873
> 
> 标签：php, cakephp, cakephp-2.0

我试图弄清楚如何在控制器中使用我的一个视图元素......

**我知道，我知道：** “不要那样做！” （99% 的情况下这是正确答案）

但我认为我其实有一个很好的理由。该操作正在处理返回标记的 AJAX 请求。返回的标记是一个列表，我使用元素在其他任何地方显示。因此，为了使我的代码保持干燥，我认为在这里这样做是合适的。

这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T13:39:00.363

简单的：

```
$view = new View($this, false);
$content = $view->element('my-element', $params); 
```

还：

**不要再那样做了！！！**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-26T15:58:51.560

有时，您需要从视图渲染 CakePhp 元素并同时使用 AJAX 将其内容注入页面。在这种情况下，将元素渲染为来自控制器的常规视图比创建仅包含 的专用视图更好`<?php echo $this->element('some_element') ?>`，并且可以通过以下方式完成：

```
<?php
public function ajax_action() {
    // set data used in the element
    $this->set('data', array('a'=>123, 'b'=>456, 'd'=>678));

    // disable layout template
    $this->layout = 'ajax';

    // render!
    $this->render('/Elements/some_element');
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-01T16:29:12.847

我知道这是一个老问题，其他人已经给出了基本相同的答案，但我想指出这种方法（由 Serge S. 提供）......

```
<?php
public function ajax_action() {
    // set data used in the element
    $this->set('data', array('a'=>123, 'b'=>456, 'd'=>678));

    // disable layout template
    $this->layout = 'ajax';

    // render!
    $this->render('/Elements/some_element');
} 
```

...不是一个 hacky 解决方法，但实际上是[CakePHP 文档](http://book.cakephp.org/2.0/en/controllers.html#Controller::render)针对这个常见且合法的用例推荐的方法：

> 如果 $view 以“/”开头，则假定它是相对于 /app/View 文件夹的视图或元素文件。**这允许直接渲染元素，在 AJAX 调用中非常有用。**

（再次：感谢 Serge S. 上面的代码）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T20:15:41.657

`$this->view = '/Elements/myelement';`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T20:21:10.837

您应该使用客户端模板。您*永远不*应该从 Web 服务或 API 返回标记，只返回数据。让您的 JavaScript 获取数据，然后按照您的意愿对其进行格式化。

例如：

```
function getItems() {
    $.get('/some/url', function(response) {
        if (response.data.length > 0) {
            for (var i = 0; i < response.data.length; i++) {
                var item = response.data[i];
                $('.results').append('<li>' + item.title + '</li>');
            }
        }
    });
}; 
```

这只是一个即兴发挥的例子。显然，您需要编写自己的实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-27T12:05:05.570

我在 Cake 中进行任何 ajax 处理的方式是拥有自己的 AjaxController。ajax-kind 的任何交互都在那里，而后者又使用自己的视图（和视图部分/元素）。这样你就可以保持你的代码 DRY 并在那里隔离和传播所有 ajax 用例。

示例摘录：

```
<?php
class AjaxController extends AppController {
    /**
    * (non-PHPdoc)
    * Everything going to this controller should be accessed by Ajax. End of story.
    * @see Controller::beforeFilter()
    */
    public function beforeFilter() {
        parent::beforeFilter();
        $this->autoRender = false;
        $this->layout = false;
        if (!$this->request->is('ajax')) {
            $this->redirect('/');
        }
    }
    public function preview() {
        if ($this->request->is('ajax')) {
            $this->set('data', $this->data);
            $this->render('/Elements/ajaxpreview');
        }
    } 
?> 
```

这是来源：[https ://github.com/Sobient/dosspirit/blob/master/app/Controller/AjaxController.php](https://github.com/Sobient/dosspirit/blob/master/app/Controller/AjaxController.php)

# c - 使用位数组筛选 Eratosthenes

> ID：16084491
> 
> 赞同：0
> 
> 时间：2013-04-18T13:35:49.547
> 
> 标签：c, sieve-of-eratosthenes, bitarray

我有`prime[]`一些`unsigned int`. 我希望使用这个数组来实现一个埃拉托色尼筛，让每个位代表一个数字`n`。也就是说，在给定的情况下`n`，包含对应的位的数组元素`n`将是`prime[n/32]`，并且特定位将在位置`n%32`。

`testBitIs0(int n)`当数字为素数时（如果它的位 == 0）， 我的函数返回 1，否则返回 0：

```
return ( (prime[n/32] & (1 << (n%32) )) != 0); 
```

我的`setBit(int n)`函数只是将相应位置的位设置为 1：

```
int i = n/32;
int pos = n%32;
unsigned int flag = 1;
flag = flag << pos;
prime[i] = prime[i] | flag; 
```

我遇到的问题是，当我`setBit`使用多个素数调用时，我认为它设置的位不正确。下次运行此行时，当我`setBit`使用质数的倍数（例如数字 2 的 4、6、8 等）调用时：

```
if(testBitIs0(i)) { ... } 
```

当`i = 4/6/8/etc`它应该返回 0 时它仍然会返回 1。
有人可以检查我的代码以确保我正确地实现它吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:49:52.220

这看起来像你所追求的。还有一个位数组和一些位旋转函数。

[http://bcu.copsewood.net/dsalg/bitwise/bitwise.html](http://bcu.copsewood.net/dsalg/bitwise/bitwise.html)

# base64 - Base64 API 在解码时如何理解字符串的结尾

> ID：16084498
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:36:00.060
> 
> 标签：base64

有时我无法提供整个字符串。但是使用截断的字符串，Base64 API 也可以对其进行解码。base64 如何理解字符串的结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:41:40.260

> base64如何理解字符串结尾

您还没有说您使用的是*哪个*base64 API，但通常他们要求您提供的字符串长度是 4 个字符的倍数。base64 字符串中的每 4 个字符对应 3 个字节。

如果整体二进制数据不是 3 个字节的倍数，则最后 4 个字符包含字符的*填充*以`=`指示所需长度。有关更多详细信息，请参阅[Wikipedia Base64 文章](http://en.wikipedia.org/wiki/Base64)中的填充部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:11:12.703

在 Base64 中，每个字符代表 64 个值之一：一个 6 位值。但是字节是 8 位值，因此 base-64 编码的数据必须以某种方式是 6 和 8 的*倍数*。

好吧，一个 6 位字符显然不会填满一个字节，但是两个 6 位字符（12 位）并不完全填满两个字节。三个 6 位字符（18 位）填充比两个字节多一点，但不是三个。但是，四个 6 位字符（24 位）正好填充三个 8 位字节。

因此，base64 字符串的长度必须是 4 个字符的倍数，以便能够用数据填充整个 8 位字节的倍数。这意味着您可以将 base64 编码数据拆分为四个字符的任意倍数，并且它会起作用。但是，如果您在任何其他位置拆分数据，它可能无法正常工作。

这也适用于数据的结尾。例如，如果我只有 6 个 8 位字节要编码（40 位），但 base64 字符串的长度必须是 4 个 6 位字符（48 位）的两倍，那么我就是 8 位数据短。对于那些剩余的（部分）6 位字符，该`=`字符表示后面没有特定数据。

# python - 使用 Django 1.1.4 访问模板中的会话

> ID：16084499
> 
> 赞同：0
> 
> 时间：2013-04-18T13:36:00.507
> 
> 标签：python, django, session

我在我的视图中创建了一个会话。我已经在我的模板中调用了它。但它会引发错误，说明语法无效。我检查了我的 settings.py 并在 MIDDLEWARE_CLASSES 下启用了会话。每当我运行我的页面时，它都会引发错误。请看下面

视图.py

```
request.session["name"] = "name"
return render_to_response('index.html',context_instance = RequestContext(request,{'session':'name'}) 
```

索引.html

```
{{ request.session.name }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:46:19.697

如果您正确发布了代码，则缺少右括号`render_to_response`

`return render_to_response('index.html',context_instance = RequestContext(request,{'session':'name'}))`

# jquery - jQuery ValidationEngine 和 PO Box

> ID：16084500
> 
> 赞同：4
> 
> 时间：2013-04-18T13:36:01.093
> 
> 标签：jquery, jquery-validation-engine

我目前正在为一个站点使用 jQuery 和 jquery ValidationEngine，它就像一个魅力。问题是我需要添加检查（和禁止）邮政信箱地址的功能。我环顾四周，找不到验证引擎可以正确使用的正则表达式。

我确实找到了一个适用于 Javascript 的正则表达式：

```
\b[p]*(ost)*\.*\s*[o|0]*(ffice)*\.*\s*b[o|0]x\b 
```

但是当我将该正则表达式从普通的 javascript 函数移动到验证引擎语言文件中时，正则表达式匹配所有内容，甚至是文本字段中的空白条目。

我添加到 jquery.validationengine-en.js 的正则表达式如下：

```
"notPoBox": {
    "regex": /\b[p]*(ost)*\.*\s*[o|0]*(ffice)*\.*\s*b[o|0]x\b/,
    "alertText": "* P.O. Box addresses are not allowed for shipping"
}, 
```

并且表单元素使用以下内容：

```
<input class="validate[custom[notPoBox]] text-input" type="text" id="ship_add1" name="ship_add2" value="" style="width:598px;" /> 
```

有什么方法可以让这个正则表达式在验证引擎框架内工作并正确匹配？我已经验证了正则表达式确实可以在页面中我自己的 javascript 上工作，因为我可以创建一个函数来匹配并在匹配时发出警报，如下所示：

```
function poChk() {
    $("[id*='ship_add1']").blur(function() {
        var pattern = new RegExp('\\b[p]*(ost)*\\.*\\s*[o|0]*(ffice)*\\.*\\s*b[o|0]x\\b', 'i');
        if ($("[id*='ship_add1']").val().match(pattern)) {
        alert('We are unable to ship to a Post Office Box.\nPlease provide a different shipping address.');
        return false;
    }
}); 
```

我还在[http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)上进行了检查，发现在各种条目（邮政信箱、邮政信箱、邮政信箱等）上都符合预期

任何帮助，将不胜感激。

银虎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:39:56.323

当您定义自定义验证时，`regex`将测试以验证该值是否与表达式***匹配***，如果不匹配，则会生成验证错误。

当值***是*** 邮政信箱值时，您定义它的方式`notPoBox` **通过。**

 *您需要检查您的正则表达式匹配的反面。

您可以通过使用函数并返回正则表达式的否定值来做到这一点`test()`：

```
"notPoBox": {
    "func": function (field, rules, i, options) {
                var isPoBox = /\b[p]*(ost)*\.*\s*[o|0]*(ffice)*\.*\s*b[o|0]x\b/i;
                return !isPoBox.test(field.val());
     },
     "alertText": "* P.O. Box addresses are not allowed for shipping"
}, 
```

[这个 JSFiddle 中的一个工作示例](http://jsfiddle.net/hansenmc/gTdQN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:03:27.153

根据 Mads Hansen 的帖子的指示，我找到了一个正则表达式函数“逆变器”，它允许我使用现有的正则表达式代码并过滤相反的代码：

```
/^((?!foo).)*$/i, 
```

对我有用的“invreted”邮政信箱搜索的最终代码如下：

```
"notPoBox": {
    "regex": /^((?!\b[p]*(ost)*\.*\s*[o|0]*(ffice)*\.*\s*b[o|0]x\b).)*$/i,
    "alertText": "* P.O. Box addresses are not allowed for shipping"
}, 
```*

# xml - 如何创建这种类型的节点： ?

> ID：16084509
> 
> 赞同：1
> 
> 时间：2013-04-18T13:36:13.983
> 
> 标签：xml, vb.net

我正在使用`System.Xml`.NET 框架的命名空间。我知道如何创建一个普通节点

```
Dim doc = new XmlDocument()
doc.createNode(xmlNodeType.Element, "node") 
```

结果是：`<node>` 但我似乎找不到创建“自闭”节点的方法（）

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:46:29.797

首先，有一些专门的方法`CreateElement`可以为您创建元素。

其次，`CreateNode`(or `CreateElement`) 的结果是一个没有附加到任何东西的节点。您需要将其附加到文档中。

```
Dim doc = new XmlDocument()
Dim element = doc.CreateElement("node")
doc.AppendChild(element)

Console.WriteLine(doc.OuterXml) 
```

然后它会打印，如您所料：

```
<node /> 
```

请注意，节点“自闭”绝不是坏习惯。事实上，当一个节点没有子节点时，你可以用以下两种方式之一来编写它：

```
<node></node>
<node /> 
```

出于所有目的和意图，两者之间*没有*区别。

* * *

命名空间中还有更新的`XDocument`类和朋友。`System.Xml.Linq`您可能会发现它们更易于使用：

```
Dim doc = new XDocument()
doc.Add(new XElement("node"))

Console.WriteLine(doc) 
```

# mysql - MySQL 将服务器设置为不在 Internet 外部运行

> ID：16084513
> 
> 赞同：0
> 
> 时间：2013-04-18T13:36:23.007
> 
> 标签：mysql, binding, ip, public, internal

我知道，如果我愿意，我可以运行我在内部开发的应用程序（C++ 或 .NET）。我的意思是，我的 PC 有一个外部 IP，但出于安全原因，我不希望看到我的应用程序，因此，我只是为我绑定 IP 的部分设置了 NOT 外部 IP一个socket，那个监听。这就是我如何仅在内部看到我的应用程序的方式。

但是对于 MySQL 服务器呢？我扫描了我的服务器，看到了 MySQL 3306 端口。我认为这很糟糕。我怎样才能对公众隐藏 MySQL 服务器并让它在内部被看到？

# c# - 调整 DataGrid 的大小以适合所有行

> ID：16084518
> 
> 赞同：2
> 
> 时间：2013-04-18T13:36:28.030
> 
> 标签：c#, wpf, winforms, datagrid

前段时间我需要调整`WinForms DataGridView`它适合所有行的大小。我的意思是没有垂直`ScrollBar`。下面的代码：

```
var sum = i.ColumnHeadersHeight;

foreach (DataGridViewRow j in i.Rows) 
{
    sum += j.Height;
}

i.Height = sum; 
```

现在我需要在`WPF DataGrid`. 有任何想法吗？

# logging - 如何为我的包裹以外的所有东西设置错误阈值

> ID：16084531
> 
> 赞同：1
> 
> 时间：2013-04-18T13:37:20.523
> 
> 标签：logging, log4j, apache-commons-logging

我已经通过 org.apache.log4j.PropertyConfigurator 配置了日志记录

```
log4j.rootLogger=ERROR, console
log4j.logger.com.mypackage=INFO
log4j.appender.console=org.apache.log4j.ConsoleAppender
// pattern, layout
log4j.appender.console.Threshold=INFO 
```

我使用了一些 3-rd 方代码，这些代码通过直接调用来使用日志记录

```
org.apache.log4j.Logger.getLogger(name).callAppenders(...) 
```

此调用跳过任何级别检查，仅取决于附加程序阈值。我无法增加附加程序阈值，因为我的包中的日志也不会通过它。我想要我的代码的 INFO 日志级别和第 3 方的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:06:34.593

可行的解决方案（尽管我觉得它不是很好）类似于 Cygnusx1 提出的解决方案：定义两个具有不同阈值的控制台附加程序并相应地分配它们：

```
log4j.rootLogger=ERROR, console // receive error message on console from all packages
log4j.logger.com.problematic= , console2  // define another appender for the problematic package
log4j.additivity.com.problematic = false // don't propagate messages to root to avoid duplicates

log4j.appender.console2 = org.apache.log4j.ConsoleAppender
log4j.appender.console2.Threshold = ERROR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:34:12.423

您必须定义 2 个附加程序，1 个用于您的东西，另一个用于第 3 方的东西。然后配置2个记录器，它将参考。具有正确阈值的适当附加程序。

像这样的东西：

```
<appender name="mystuff" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="../logs/mystuff.log" />
    <param name="datePattern" value="yyyy-MM-dd" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MM-yyyy kk:mm:ss.SSS} %-5p %c %x - %m%n" />

    </layout>
</appender>

<appender name="thridPartystuff" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="../logs/thirdParty.log" />
    <param name="datePattern" value="yyyy-MM-dd" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MM-yyyy kk:mm:ss.SSS} %-5p %c %x - %m%n" />

    </layout>
</appender>

<logger name="com.mystuf" additivity="true">
    <level value="info" />
    <appender-ref ref="mystuff" />
</logger>

<logger name="com.third.party.package">
    <level value="error" />
    <appender-ref ref="thridPartystuff" />
</logger> 
```

# c++ - 通过引用函数传递映射时出错

> ID：16084532
> 
> 赞同：0
> 
> 时间：2013-04-18T13:37:20.713
> 
> 标签：c++, map, containers, pass-by-reference

我想通过引用函数来传递地图。这是代码：

```
void test(map<int, double *> &a);

int main(){
    map<int, double *> a;
    test(a);
    cout << a[1][1] << endl;
    return 0;
}

void test(map<int, double*> &a)
{
    double red[] = {1.1, 2, 3};
    a[1] = red;
} 
```

问题是，a[1][1] 应该是 2。但是，当我执行程序时，它会给出一个大数字，例如 1.73e120 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:39:44.267

您的地图将整数映射到指向双精度的指针。当您在函数中添加元素时，就像您在此处所做的那样，

```
a[1] = red; // points to first element of local red[] array 
```

该地图正在复制指向局部变量的指针。它指向的地址在`test`函数之外没有意义。指针不是数组，数组也不是指针。

您可以改用向量图来解决此问题：

```
std::map<int, std::vector<double>> 
```

然后

```
void test(std::map<int, std::vector<double>> &a)
{
  a[1] = std::vector<double>{1.1, 2., 3.};
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:40:25.743

```
double red[] = {1.1, 2, 3};
a[1] = red; 
```

危险！危险！`red`是一个局部变量，`test()`返回后销毁。不要存储指向将在函数返回后使用的局部变量的指针。

您可以通过将其设为静态来解决此问题，因为静态变量永远存在。

```
static double red[] = {1.1, 2, 3};
a[1] = red; 
```

或者您可以动态分配内存：

```
double *red = new double[]{1.1, 2, 3};
a[1] = red; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T13:41:09.207

由定义创建的数组`red`是函数的本地数组`test`。函数结束时将被销毁。您只是在 中放置一个指向其第一个元素的`map`指针，但是一旦函数返回，该指针不再指向有效数组。数组消失了，指针悬空。

您*可以*动态分配数组，但这是一个巨大的痛苦，可能会导致内存泄漏和其他错误。

相反，我建议使用标准容器类型，例如`std::vector`：

```
void test(map<int, std::vector<double>> &a)
{
    a[1] = std::vector<double>{1.1, 2.0, 3.0};
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T13:39:40.313

```
double red[] = {1.1, 2, 3}; 
```

具有自动存储期限。这意味着当函数返回时它不再有效。

你应该做这样的事情

```
void test(map<int, double*> &a)
{
    double *red = new double[3];
    // fill up red.
    a[1] = red;
} 
```

# redirect - 使用 Drupal 7 的“更多按钮”模块取消按钮重定向

> ID：16084540
> 
> 赞同：1
> 
> 时间：2013-04-18T13:37:37.387
> 
> 标签：redirect, button, drupal-7, forums

好吧，首先，我喜欢这个模块（更多按钮模块，v7.x-1.0-beta1），它在大多数情况下对我来说都很好，但我有一个场景，它并没有完全满足我的需求。

我正在使用 Drupal 7 论坛，当我创建一个新主题时，它是从 /node/add/forum/133 添加的（例如）——然后当我点击取消时（来自“更多按钮”模块，当然）它会将我重定向到 /node/add - 我根本不想要，也不希望访问者能够到达。

理想情况下，我会被重定向回我最初来自的地方以在论坛中启动新主题，例如，/forums/general-discussion，然后我点击“新主题”，它会将您带到添加新论坛帖子页面，如果我点击取消，我很想回到 /forums/general-discussion，而不是 /node/add 页面。

那可行吗？

# ember.js - 使用基本适配器删除记录

> ID：16084543
> 
> 赞同：2
> 
> 时间：2013-04-18T13:37:46.343
> 
> 标签：ember.js, ember-data

我正在考虑实现`Model.sync.deleteRecord()`与 Ember-Data Basic Adaptor 一起使用。

根据文档，`didDeleteRecord()`一旦从服务器成功删除记录，适配器就必须调用。

但是，我找不到如何实际调用的好例子`didDeleteRecord()`。在查看源代码后，我想出的最好的方法是：

```
 deleteRecord: function(record, process) {
        my_api.remove(record.get('id')).then(function() {
            var r = process(record);
            r.store.adapter.didDeleteRecord(r.store, r.type, r.record);
        });
    } 
```

有没有更好、更丑的调用方式`didDeleteRecord()`？

# c# - 如何在 C# Windows 窗体中使用动态创建的按钮/文本框？

> ID：16084545
> 
> 赞同：3
> 
> 时间：2013-04-18T13:37:48.733
> 
> 标签：c#, winforms

```
private void createButton()
{
    flowLayoutPanel1.Controls.Clear();

    for (int i = 0; i < 4; i++)
    {    
        Button b = new Button();
        b.Name = i.ToString();
        b.Text = "Button" + i.ToString();
        flowLayoutPanel1.Controls.Add(b);
    }

}
private void button1_Click(object sender, EventArgs e)
{
    createButton();
} 
```

我使用此代码在运行时创建了一些按钮，现在我如何使用这些创建的按钮来执行不同的操作？我对此很陌生，所以请帮助我，非常感谢:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T13:39:40.063

您可以为 click 事件分配事件处理程序：

```
b.Click += SomeMethod; 
```

`SomeMethod`必须有以下签名：

```
void SomeMethod(object sender, EventArgs e) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:40:53.870

创建按钮时，您需要`Click`像这样订阅事件：

```
Button b = new Button();
b.Click += new EventHandler(b_Click);
// or
b.Click += b_Click;
// or
b.Click += delegate(object sender, EventArgs e) {/* any action */});
// or
b.Click += (s, e) => { /* any action */ };

void b_Click(object sender, EventArgs e)
{
    // any action
} 
```

当您是 Visual Studio 中的设计者并单击按钮创建方法时，这是自动完成的`button1_Click`。
您可以在表单的 Designer.cs 中搜索，您会找到等效的一行：

```
button1.Click += new EventHandler(button1_Click); 
```

相关问题：

*   [如何在动态按钮上创建动态按钮单击事件](https://stackoverflow.com/questions/6187944/how-can-i-create-dynamic-button-click-event-on-dynamic-button)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:41:49.247

```
b.Click += delegate(object sender, EventArgs e) {
   Button clickedButton = (Button)sender; //gets the clicked button
}); 
```

# actionscript - 我无法让我的精灵“翻转”

> ID：16084547
> 
> 赞同：0
> 
> 时间：2013-04-18T13:37:55.687
> 
> 标签：actionscript, sprite

首先，我承认我是 ActionScript 的初学者，并且正在编写自己的基本街机游戏（类似于旧街机游戏“Joust”）。虽然我已经能够对精灵的运动进行编码，但当我按下右箭头时，我希望让精灵翻转以面向另一个方向。我想要么我可以尝试围绕它的轴旋转对象（我已经尝试过多次并且证明很困难）或者我可以尝试用另一个精灵“替换”当前精灵（这只是精灵面向相反的方式）。我到处寻找用另一个精灵替换精灵的方法，但无济于事。当使用某个 keyCode 时，如何给这个 sprite 一个翻转效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:52:36.637

试试下面这个简单的代码。这里的“对象”是您要翻转的影片剪辑/精灵

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, OnKeyDown);

function OnKeyDown(event:KeyboardEvent):void
{
    var uiKeyCode:uint = event.keyCode; 
    switch (uiKeyCode)
    {
        case Keyboard.LEFT :
            object.scaleX = -1; //flip
            break;
        case Keyboard.RIGHT :
            object.scaleX = 1; //unflip
            break;
    }
} 
```

注意：如果您希望动画剪辑在其位置不发生任何变化的情况下翻转，则动画剪辑必须水平居中对齐。

告诉我这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:31:30.257

您使用的是 as2/as3 吗？如果您使用 as2，您可以将 Y 轴翻转 180 度，您需要通过 actionScript 镜像位图或添加第二个镜像到显示列表的位图。

```
 stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);

    function keyPressedDown(event:KeyboardEvent):void
    {
         var key:uint = event.keyCode;

    switch (key)
   {
    case Keyboard.LEFT :
                    myMovieClip.rotaionY = 180; // MC will be mirrored
        break;
    case Keyboard.RIGHT :
                    myMovieClip.rotaionY = 0;

 } 
```

# jquery - 如何锚定第一个

> ID：16084551
> 
> 赞同：5
> 
> 时间：2013-04-18T13:38:09.777
> 
> 标签：jquery, accordion

我正在使用带有 6 个`<h3>`标题和几个`<div>`子元素的 jQuery Accordion。当我打开所有部分然后再次关闭它们时。手风琴最终位于页面下方约 100 像素处。

**有没有办法固定第一个`<h3>`，以便手风琴总是在同一个地方关闭？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:27:42.717

这是我修复它的方法。'top' 和 'left' 参数给出了特定于我的页面的手风琴位置。

```
#accordion:first-child
{
position: absolute;
top:51px;
left:8px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:56:24.790

在你的 CSS 中，给它一个绝对或固定的位置

```
h3{
 position: absolute;
 } 
```

或者

```
h3{
 position: fixed;
 } 
```

# javascript - 建立网页并将所有数据保留在一页上

> ID：16084552
> 
> 赞同：0
> 
> 时间：2013-04-18T13:38:11.577
> 
> 标签：javascript, html, jquery-ui, css, dom

我的任务是构建一个网页，该网页显示 3 个偶数列数据（名字姓氏），并始终将信息保留在一个屏幕上（无滚动）。随着更多名称的添加，字体会变小。更少的名字，更大的字体。这将仅显示在 1 个屏幕和浏览器类型上。

后端正在运行以从 BOSH 服务器查询数据并在网页的 1 列中显示名称。从使用 html/css/js 的设计角度来看，任何人都可以推荐一种方法吗？在我深入研究之前，我并不是在寻找特定的代码，而是寻找一种方法。

# activemq - 在 tomEE mdb 中使用 ActiveMQ 咨询消息

> ID：16084555
> 
> 赞同：0
> 
> 时间：2013-04-18T13:38:19.187
> 
> 标签：activemq, message-driven-bean, apache-tomee

我有一个 MDB，它在 glassfish 上部署时管理使用 ActiveMQ 咨询消息。

但是当我在 tomEE 上部署时，这个 MDB 不会消耗任何咨询消息。有什么我需要打开的吗？

```
@MessageDriven(mappedName = "ActiveMQ.Advisory.Consumer.Queue", activationConfig = {
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Topic"),
        @ActivationConfigProperty(propertyName = "destination", propertyValue = "ActiveMQ.Advisory.Consumer.Queue.User.*") })
public class AdvisoryMdb implements MessageListener {
    private final Logger logger = LoggerFactory.getLogger(getClass().getName());

    @Override
    public void onMessage(Message message) {
        logger.info("onMessage() {}", message);
    }
} 
```

（在 TomEE 中，我设法成功地在我想要咨询的这些队列上生成和使用消息）

编辑：我测试了使用独立客户端使用这些咨询主题之一，并按预期获得了消息。因此，咨询消息已成功发送，只是我的 mdb 没有正确接收它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:38:07.950

您尝试使用哪些咨询消息？

看看[这里](http://activemq.apache.org/advisory-message.html)的文档......我看到`ActiveMQ.Advisory.Consumer.Queue`列出的含义是*Consumer start & stop messages on a Queue*。您的目标是`ActiveMQ.Advisory.Consumer.Queue.User.*`，那么您是否有一个名为的队列`User`？这是一个队列还是下面有多个队列`User`？

同样阅读文档，咨询队列名称多年来似乎发生了一些变化。您能否检查跨平台的 ActiveMQ 版本并确保您将苹果与苹果进行比较？此外，在我列出的文档页面上，我有点想知道是否禁用了某些建议。它没有将该特定队列列为*可以*禁用的队列，但您可以尝试显式启用所有建议，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:43:39.100

碰巧我试图删除

```
mappedName = "ActiveMQ.Advisory.Consumer.Queue" 
```

来自@MessageDriven 注释，突然它适用于 TomEE 和 glassfish。不知道为什么我首先添加了它，猜测 glassfish 也不需要它。

# c++ - 带节点或不带节点的 AVL 树实现

> ID：16084557
> 
> 赞同：0
> 
> 时间：2013-04-18T13:38:21.750
> 
> 标签：c++, nodes, avl-tree

我们有一个类项目来实现 AVL 树。这里有两个非常通用的实现：

```
template<class T>
class AVLTree {
  int key;
  int height;
  int BF;
  T data;
  AVLTree<T>* father, leftSon, rightSon;
.
.
.
} 
```

一位朋友告诉我我真的应该使用 Nodes，但他无法解释原因。所以这是我在很多地方看到的第二个实现（使用 Node）：

```
template<class T>
class AVLTree {
  int key;
  int height;
  int BF;
  T data;
  Node* father, leftSon, rightSon;

  class Node {
    int key;
    int height;
    int BF;
    T data;
    Node* father, leftSon, rightSon;
  }
.
.
.
} 
```

真正的区别是什么？就编译器而言，我的实现是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:47:39.943

从技术上讲，您是对的，节点不是必需的，但请记住 C++ 是一种 OOP 语言，而您想要的对象是由节点组成的 AVLTree。

# android-ndk - 需要 NDK 帮助：如何从另一个使用 C++ 的项目调用共享库的 C++ 函数

> ID：16084560
> 
> 赞同：3
> 
> 时间：2013-04-18T13:38:28.997
> 
> 标签：android-ndk

我因为无法弄清楚而严重拉扯我的头发（即使在谷歌上搜索了很多）。请帮忙

**情况：**

1.  我有一个共享库。假设 foo.so（完全用 C++ 编写代码）
2.  现在在一个新项目中，我想使用这个共享库 foo.so
3.  新的项目代码也是 C++。假设新项目名称是 fooMate。
4.  我想在 fooMate 项目 cpp 文件中调用函数的函数或使用 foo 的类，而不包括 foo 项目的实际源代码（即仅使用 foo.so 文件）

**问题：** 我们怎样才能做到这一点？

**例如：**

```
class foo
{
const char* giveMeAString();
}

#include “foo.h”

const char* foo::giveMeAString()
{
return “Hello World!”;
} 
```

现在我已经在名为 foo.so 的共享库中成功编译了 foo 类

1.  现在假设我正在编写另一个项目，该项目也有一些 CPP 代码。但是这个新的 CPP 代码想要重用静态库。

    // 宣言

> 类 fooMate { 无效 printDemo(); }

// 执行

```
#include “fooMate.h”
#include “foo.h”

void fooMate::printDemo()
{
foo *testFoo = new foo();
cout<<giveMeAString();
} 
```

如何通过使用 foo.so 文件而不是使用 foo.cpp 的实际源代码来实现这一点

**这是我正在使用的 Android.mk 文件**

```
#Adding foo.so file in project.
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := foo-lib-module
LOCAL_SRC_FILES := foo-lib.so
LOCAL_EXPORT_C_INCLUDES := include
include $(PREBUILT_SHARED_LIBRARY)

#New Project and Source code
include $(CLEAR_VARS)
LOCAL_MODULE := foomate-module
LOCAL_MODULE_FILENAME := foomate-lib

LOCAL_SRC_FILES := fooMate.cpp
LOCAL_C_INCLUDES := $(LOCAL_PATH)/Classes/include

include $(BUILD_SHARED_LIBRARY) 
```

# algorithm - 多维交叉算法

> ID：16084569
> 
> 赞同：1
> 
> 时间：2013-04-18T13:38:59.690
> 
> 标签：algorithm, data-structures

全部，

我有一个问题需要解决，但我不知道如何有效地解决它。假设我有一个具有多个属性的对象集合，并且每个属性可以采用多个值。

例如，在伪代码中，对象可能如下所示：

```
Object.Color  
Object.Size  
Object.Sides  
Object.Dimensions 
```

我希望能够获取集合中与一组颜色、一组尺寸、一组边和一组尺寸相匹配的所有对象。

现在，我的代码基本上是如果 ColorSet 中的 Object.Color 和 SizeSet 中的 Object.Size 和...以及 DimensionsSet 中的 Object.Dimensions 然后我标记要处理的对象（通过使用字典）。

有没有更有效的方法来做到这一点？我可以创建一个数据结构或算法来帮助我有效地解决这个问题吗？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:57:43.723

如果您只想做一个这样的查询，那么您可以做的不多。相反，我假设您想要执行多个此类查询。

创建从属性映射到具有这些属性的对象集的字典。例如，对于颜色，您可能有从`Red`to`{obj1, obj2, obj3}`和`Blue`to的映射`{obj4, obj5}`。对每个属性（颜色、大小、边、尺寸）执行此操作。

然后，您对整个集合表达您的查询。ColorSet 中的 Object.Color 成为 ColorSet 中颜色对应集的并集。同时要求颜色和大小成为对象集与这些颜色和大小的交集。

这会更有效，因为您只需要检查可能具有所有属性的对象，例如，如果您对`Blue`对象感兴趣，您可以立即排除集合中的所有对象`Red`。

# google-chrome - 在 Google Chrome 中显示本地 .svg 文件

> ID：16084570
> 
> 赞同：8
> 
> 时间：2013-04-18T13:38:59.793
> 
> 标签：google-chrome

有没有办法在谷歌浏览器中显示本地 .svg 文件？我能够在 Windows 7 下执行此操作，但我只是全新安装了 Windows 8 和 Google Chrome，我无法再显示存储在计算机文件系统中的 .svg 文件。每当尝试打开本地 .svg 文件时，我都会收到一条消息，说“此文件可能会损害您的计算机”并询问我是否要下载该文件。

这对我来说确实是个问题，因为我想使用 chrome 浏览包含嵌入式 .svg 文件的本地 HTML 报告（由某些软件包生成）。无法在 chrome 中显示 .svg 文件会大大降低报告的可用性。更糟糕的是，我在使用 Firefox 时遇到了同样的问题。似乎能够显示本地 .svg 文件的唯一浏览器是 Internet Explorer ...

任何帮助是极大的赞赏。

铬版本：26.0.1410.64

操作系统：Windows 8

扩展：谷歌文档、Kippt、Pocket

# cassandra - Cassandra：生成一个唯一的 ID？

> ID：16084573
> 
> 赞同：33
> 
> 时间：2013-04-18T13:39:12.097
> 
> 标签：cassandra, , cassandra, uuid, cql, cql3

我正在研究分布式数据库。我正在尝试生成一个唯一 ID，该 ID 将用作[cassandra](/questions/tagged/cassandra "显示标记为“cassandra”的问题")中的*列族主键*。

我阅读了一些关于使用 Java 执行此操作的文章，`UUID`但似乎存在冲突的可能性（即使它非常低）。

我想知道是否有办法根据时间生成唯一 ID？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-18T14:03:48.267

您可以使用`TimeUUID`Cassandra 中的类型，它支持*Type 1 UUID*。这使用当前时间和创建者的 MAC 地址和序列号。如果正确生成了 TimeUUID 编号，这可以通过零冲突来完成（您可以使用 CQL`now()` [方法](https://docs.datastax.com/en/cql/3.3/cql/cql_reference/timeuuid_functions_r.html)或插入您自己的方法，java SDK 提供了一些线程安全的实现）。的主要优点`TimeUUIDs`是 ID 可以按时间排序。有关更多信息，请参阅[http://wiki.apache.org/cassandra/TimeBaseUUIDNotes](http://wiki.apache.org/cassandra/TimeBaseUUIDNotes)。

但是，时间排序不太可能对行主键有用，因为在使用散列分区器时排序是无用的，尽管可以使用[集群键](https://www.datastax.com/dev/blog/we-shall-have-order)。如果您自己滚动，生成唯一 ID 的复杂性也可能是错误的来源。Cassandra 还通过使用类型来支持*Type 4 UUID*`UUID`。这些只是随机位。有一个碰撞概率，但是碰撞概率（假设不相关的随机数源，如果你在 Java 中生成它将是）非常低 - 如果你在 100 年内每秒创造 10 亿个，那么一次碰撞的概率约为 50% . （有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates](http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates)。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T15:18:33.523

您应该使用[Twitter Snowflake](https://github.com/twitter/snowflake)进行调查。从项目自述文件中：

> 当我们在 Twitter 从 Mysql 转向 Cassandra 时，我们需要一种新的方法来生成 ID 号。Cassandra 中没有顺序 id 生成工具，也不应该有。

Snowflake 使用一种直观的算法来生成按时间排序且唯一的多头。由于您的数据库是分布式的，因此该服务应该可以很好地满足您的需求。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-18T15:18:37.663

正如理查德所说，您可以使用 TimeUUID，生成 TimeUUID 值并不是什么大问题。只需按照 cassandra 常见问题解答[timeuuid 即可](http://wiki.apache.org/cassandra/FAQ#working_with_timeuuid_in_java)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-27T09:54:59.183

您需要使用 cassandra 函数`now()`生成 timeuuid 并使用`uuid()`函数生成 uuid 类型的字符串。

# css - 如何放置 div 或面板的 Gridview 中心。？

> ID：16084575
> 
> 赞同：5
> 
> 时间：2013-04-18T13:39:16.463
> 
> 标签：css

你好！谁能告诉我如何将任何放置`Gridview`在中心`Div`或面板中？我已经应用了以下 CSS，但它不起作用：

```
<asp:Panel ID="pnlGrid" CssClass="panel" runat="server">
 <div style="text-align:center">
   <asp:GridView ID="grdReqApproval" runat="server"   AutoGenerateColumns="false"     CssClass="SimpleGrid">
      <Columns>
  <asp:BoundField DataField="Approved By" HeaderText="Approved By" />
  <asp:BoundField DataField="User Name" HeaderText="User Name" />
  <asp:BoundField DataField="Approval Time" HeaderText="Approvel Time" />
</Columns>
</asp:GridView>
</div>
    </asp:Panel>
.panel
{
width: 330px;
padding: 10px;
min-height: 20px;
border: 1px solid #dcdcdc;
margin-left:auto;
margin-right:auto;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-02T12:43:47.720

`HorizontalAlign`Gridview的属性可以解决你的问题

```
 <asp:Panel ID="pID" runat="server">
     <div>
       <asp:GridView ID="gvID" runat="server" AutoGenerateColumns="false"
 HorizontalAlign="Center">
          <Columns>
             ...
             ...
          </Columns>
    </asp:GridView>
    </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:55:59.707

检查这对我有用，最终gridview被转换为表格，因此将以下样式表应用于我应用于表格的gridview

CSS

```
.centered-table {
   margin-left: auto;
   margin-right: auto;
} 
```

HTML

```
<div>
<table class="centered-table" border="1">
    <tr><td>Pekin</td> <td>Illinois</td></tr>
    <tr><td>San Jose</td><td>California</td></tr>
</table>
</div> 
```

[JsFiddle 演示](http://jsfiddle.net/c3MqS/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-06T14:45:35.140

线程死灵的轻微情况，但我遇到了同样的问题并设法通过对齐代码块而不是gridview本身来解决它。

基本上，我将元素的宽度设置为 40%，将左侧设置为 30%（这意味着右侧也是 30%，因为数学），这会将整个区域、文本、网格和所有内容都放在页面的中间。

CSS看起来大致是这样的

```
GridExample
{
position:absolute;
left:30%;
width:40%;
padding:0;
margin:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:41:29.433

在你的 div 上 `text-align: center`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:47:09.793

正如您在这里看到的，您的课程有效。只要确保它的父容器更宽，这样它就可以居中

[http://jsfiddle.net/C7ybw/](http://jsfiddle.net/C7ybw/)

```
#container{
    width:800px;
    border:1px solid #000;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T10:06:30.063

```
.div_text_center {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
}

<div class="div_text_center">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Button ID="Button1" runat="server" Text="Button" />
            <asp:GridView ID="GridView1" runat="server" HorizontalAlign="Center">
            </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel>
</div> 
```

[![在此处输入图像描述](https://i.stack.imgur.com/1URMG.png)](https://i.stack.imgur.com/1URMG.png)

# netbeans - 在 Netbeans 7.3 中更改远程 glassfish 服务器端口

> ID：16084580
> 
> 赞同：4
> 
> 时间：2013-04-18T13:39:27.347
> 
> 标签：netbeans, glassfish, port, run-configuration

在 Netbeans 7.3 中创建新的远程服务器实例时如何更改默认端口 8080？

为本地 glassfish 实例更改此设置的常用方法是编辑 domain.xml 文件。但这不适用于远程实例。我什至将本地 glassfish domain.xml 文件更改为使用 8080 以外的另一个端口。这会影响 Netbeans 中的本地 glassfish 服务器实例，但不会影响远程实例。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-15T14:03:05.987

如果 GlassFish 和 Oracle 数据库安装在同一个系统中，则会导致端口冲突，因为它们都使用端口 8080。以下是更改 GlassFish 端口号的过程，以便您可以在与 Oracle 不同的端口号上运行 GlassFish，以避免端口冲突。

1.  找出安装 GlassFish 的文件夹*。如果您随 NetBeans 一起安装了 GlassFish，则可以使用以下过程找到安装 GlassFish 的文件夹。

    *   在 NetBeans IDE 中使用**Window -> Services选择 Services 窗口**

    *   展开**服务器**节点并选择 GlassFish 域

    *   右键单击并从弹出菜单中选择**属性**选项

    *   在域文件夹的右侧，您可以看到安装 GlassFish 的文件夹。例如：C:\netbeans6.8\glassfish-v3\glassfish\domains 您还可以在同一窗口中查看有关 Glassfish 的其他详细信息，例如端口号。

2.转到安装Glassfish的文件夹。

3.进入如下配置文件夹（你的可能不同）：**c:\netbeans6.8\glassfish-3\glassfish\domains\domain1\config**

4.使用任何文本编辑器打开**domain.xml 。**

5.寻找8080，将其更改为与其他端口号不冲突的其他端口号。我一般改成9999。

6.保存域.xml。7.现在您需要从 NetBeans 中删除 GlassFish 并重新添加，以便 NetBeans IDE 了解新的端口号。为此，请执行以下操作：

*   在 NetBeans 的 Servers 窗口中，选择 GlassFish server 后使用 RemoveServer 按钮删除 GlassFish
*   单击 AddServer 并选择 GlassFish V2 或 GlassFish V3 并单击 Next
*   选择 GlassFish 的安装位置，点击下一步
*   接受默认值并单击完成

8.如果 GlassFish 已经在运行，请重新启动它。

> 我从一篇博文中获得了我的来源，你可以在[这里](http://www.srikanthtechnologies.com/blog/java/changeglassfishport.aspx)找到。

# c# - “解决方案中的项目”和“功能中的项目”有什么区别？

> ID：16084588
> 
> 赞同：0
> 
> 时间：2013-04-18T13:39:51.050
> 
> 标签：c#, sharepoint-2010

在 SharePoint 2010 中，使用 Visual Studio 2010 进行编程时，它为我们提供了类似[http://vishsharepoint.blogspot.in/2012/05/create-event-receiver-for-specific-list.html](http://vishsharepoint.blogspot.in/2012/05/create-event-receiver-for-specific-list.html)的屏幕。我想知道“解决方案中的项目”和“功能中的项目”有什么区别？我们什么时候应该使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:42:01.217

解决方案中的项目都是可以在这个项目中部署的sharepoint项目，但是特性中的项目是只有在你部署和激活这个特性时才会部署的项目，特性是共享点中的单个部署单元，你可以有很多特性在单个项目中。

# java - 带有 Java 服务器端的 iOS 多播客户端系统

> ID：16084590
> 
> 赞同：0
> 
> 时间：2013-04-18T13:39:54.023
> 
> 标签：java, ios, objective-c, client, multicast

语境：

我正在为移动设备创建一个跨平台的多播客户端-服务器系统。我已经用 Java 创建了服务器端。我还创建了 android 客户端，它运行良好。

我想知道的：

[我想知道是否可以使用此示例http://ntrg.cs.tcd.ie/undergrad/4ba2/multicast/antony/example.html](http://ntrg.cs.tcd.ie/undergrad/4ba2/multicast/antony/example.html)中的侦听器程序在 iOS 中创建与我的服务器兼容的客户端- 我在 Java 中创建的一面。

如果上面的例子不起作用，有没有办法我仍然可以使用我的 Java 服务器端并创建一个与 Java 服务器端兼容的本机 iOS 客户端系统？

JAVA服务器端的示例代码供参考：

```
import java.net.DatagramPacket;
import java.net.InetAddress;
import java.net.MulticastSocket;
//more imports...

class Server2 {

    public static MulticastSocket ms1;

    public static void main(String[] args) throws IOException {

            try {
                InetAddress sessAddr1 = InetAddress.getByName("224.2.76.24");
                ms1 = new MulticastSocket(5500);
                ms1.joinGroup(sessAddr1);

                 while(true) {
                    byte[] message = new byte[1024];
                    message = getIpAddress().getBytes(); 
                    DatagramPacket dp = new DatagramPacket(message, message.length, sessAddr1, 5500);
                    ms1.send(dp);               
                    System.out.println(String.format("Sent message: %s", message));

                    Thread.sleep(1000);
                }
            } catch (Exception e) {
                System.out.println(String.format("Error: %s", e));
            }     
    }

    public static String getIpAddress() {
        InetAddress ip;

        try {
            ip = InetAddress.getLocalHost();
            return(String.format("%s",ip.getHostAddress()));     
        } catch (Exception e) {
            return("false");
        }
    }
} 
```

* * *

我测试了链接中的监听器代码，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:53:48.160

应该不是问题。[iOS 是 POSIX 兼容](http://en.wikipedia.org/wiki/Darwin_%28operating_system%29)的，Objective-C 是在 ANSI C 之上定义的，所以你可以将链接到的代码直接粘贴到你的项目中，为 Objective-C 构建一个简单的包装器，你的应用程序应该可以编译、运行和工作如预期的。

# visual-studio-2012 - VS2012 - 如何获取现有站点上的所有文件？

> ID：16084593
> 
> 赞同：2
> 
> 时间：2013-04-18T13:40:00.563
> 
> 标签：visual-studio-2012, web-deployment, azure-web-app-service

好吧，我显然在这里遗漏了一些东西。我已将几个网站移至 Azure，以利用它所提供的一切。传统上，我们的团队一直使用 DreamWeaver 进行 ftp up/down 等。我不明白我是如何连接到 Azure 上的现有站点的。我可以轻松地设置和网络部署到新站点，但我试图让团队的其他成员访问我设置的站点，但我不知道如何处理这个问题。

我已经尝试过 File > Open Web Site 路由，但问题是它永远不会将项目/信息保存在 VS 中的任何位置，我们每次都需要重新连接到它。

我们所有的本地站点都在共享的网络驱动器上，因此我们都访问相同的本地资源。我以为我可以简单地将所有发布配置文件传递给他们，然后他们可以导入、获取、然后编辑和发布文件……但它从来没有提供从服务器“获取所有文件”的选项。

希望这是有道理的？！提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:14:31.850

对于多个开发人员场景，使用 Git 或 TFS 等源代码控制系统将符合您的最佳利益。这不仅使您可以在团队成员之间共享源代码，而且还使您能够跟踪更改和合并跨团队成员修改的文件。

如果您对源代码控制不满意，您仍然可以通过 FTP或安全 FTP[访问文件。](https://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-ftp/)

您还可以使用[WebMatrix](http://www.microsoft.com/web/webmatrix/)，它具有从服务器直接下载到工具中的概念。

# highcharts - 在 Highcharts 中悬停时禁用 Plotpoint 图例

> ID：16084596
> 
> 赞同：1
> 
> 时间：2013-04-18T13:40:15.863
> 
> 标签：highcharts

有人可以告诉我如何禁用当您将鼠标悬停在 Highcharts 中的一个情节点上时弹出的图例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:48:52.870

你在谈论一个工具提示：[http ://api.highcharts.com/highcharts#tooltip](http://api.highcharts.com/highcharts#tooltip)

您可以设置“启用”：false

# javascript - 打开一个新标签而不是一个新窗口

> ID：16084603
> 
> 赞同：-3
> 
> 时间：2013-04-18T13:40:40.553
> 
> 标签：javascript, jquery

我想使用 jquery 打开一个新选项卡。代码应该很简单，但是下面的代码不起作用，因此它会打开一个新窗口

```
window.open('url', '_blank'); 
```

如何打开新标签而不是新窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:42:29.013

您作为开发人员无法确定。

浏览器有一个设置来决定发生这种情况时要做什么，因此最终用户是决定新窗口/选项卡如何打开的人。

我见过的最接近“控制”的方法是，当我在 的第三个参数中传递一个大小时`window.open`，它会“强制”一个新**窗口**（至少在过去是这样）。当然，这很可能在浏览器之间并不一致。这与您正在寻找的相反。

当存在没有标签功能的浏览器时，它也无济于事。

# python - MIMEText 中的标头编码

> ID：16084605
> 
> 赞同：7
> 
> 时间：2013-04-18T13:40:51.900
> 
> 标签：python, email, python-3.x, mime-message

我正在使用 MIMEText 在 Python 3.2 中从头开始创建电子邮件，并且在创建主题中包含非 ascii 字符的消息时遇到了麻烦。

例如

```
from email.mime.text import MIMEText
body = "Some text"
subject = "» My Subject"                   # first char is non-ascii
msg = MIMEText(body,'plain','utf-8')
msg['Subject'] = subject                   # <<< Problem probably here
text = msg.as_string() 
```

最后一行给了我错误

```
UnicodeEncodeError: 'ascii' codec can't encode character '\xbb' in position 0: ordinal not in range(128) 
```

如何告诉 MIMEText 主题不是 ascii ？`subject.encode('utf-8')`根本没有帮助，而且无论如何我已经看到人们使用 unicode 字符串在其他答案中没有问题（参见例如[Python - How to send utf-8 e-mail?](https://stackoverflow.com/questions/5910104/python-how-to-send-utf-8-e-mail)）

编辑：我想补充一点，相同的代码在 Python 2.7 中没有给出任何错误（认为这并不意味着结果是正确的）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T15:16:43.973

我找到了解决方案。包含非 ascii 字符的电子邮件标头需要按照[RFC 2047](https://www.rfc-editor.org/rfc/rfc2047)进行编码。在 Python 中，这意味着使用 email.header.Header 而不是标题内容的常规字符串（请参阅[http://docs.python.org/2/library/email.header.html](http://docs.python.org/2/library/email.header.html)）。写上面例子的正确方法是

```
from email.mime.text import MIMEText
from email.header import Header
body = "Some text"
subject = "» My Subject"                   
msg = MIMEText(body,'plain','utf-8')
msg['Subject'] = Header(subject,'utf-8')
text = msg.as_string() 
```

主题字符串将在电子邮件中编码为

```
=?utf-8?q?=C2=BB_My_Subject?= 
```

在 python 2.x 中，前面的代码对我有用的事实可能与邮件客户端能够解释错误编码的标头有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-04T10:16:31.087

我发现替换

```
msg['Subject'] = subject 
```

和

```
msg.add_header('Subject', subject) 
```

用于显示 UTF-8。如果你想要另一个字符集，你也可以这样做。尝试`help(msg.add_header)`查看相关文档（替换值，即`subject`使用包含三个元素的元组：（字符集、语言、值）。

无论如何，这似乎比其他方法简单一点——所以，我想我会提到它。我决定尝试这个，因为 add_header 似乎更频繁地用于“reply-to”标头，而不是仅仅执行 msg["reply-to"]=your_reply_to_email。所以，我想也许它对主题也会更好——文档说它默认支持 UTF-8（我测试过，它工作）。

# java - 配置 JBehave 以运行多线程 TestNG 测试

> ID：16084609
> 
> 赞同：1
> 
> 时间：2013-04-18T13:40:58.590
> 
> 标签：java, integration-testing, bdd, testng, jbehave

我正在尝试创建一个同时使用 JBehave 和 TestNG 的概念验证。我想做的是在多个线程中同时运行一个故事，以测试我的代码线程安全性。

我有一个简单的类，它只做一件事，对给定的整数值计算模 7。我为这个类创建了一个简单的 BDD 测试。[我已经按照 JBehave“入门](http://jbehave.org/reference/stable/getting-started.html)”文档中的说明设置了 BDD 测试。唯一的区别是，在我的 JUnitStory 文件中，我没有使用 JUnit 的 @Test 注释，而是使用了 TestNG 的

```
@org.testng.annotations.Test(threadPoolSize = 10, invocationCount = 100, timeOut = 10000) 
```

当我运行测试时，前 70-90% 的情况一切正常，然后发生异常，其余运行失败

```
===============================================
    Default test
    Tests run: 100, Failures: 11, Skips: 0
=============================================== 
```

发生的异常是

```
FAILED: run
java.util.concurrent.RejectedExecutionException
    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1774)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:768)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:656)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:92)
    at org.jbehave.core.embedder.StoryManager.submit(StoryManager.java:203)
    at org.jbehave.core.embedder.StoryManager.runningStory(StoryManager.java:138)
    at org.jbehave.core.embedder.StoryManager.filterRunning(StoryManager.java:122)
    at org.jbehave.core.embedder.StoryManager.runningStoriesAsPaths(StoryManager.java:107)
    at org.jbehave.core.embedder.StoryManager.performStories(StoryManager.java:93)
    at org.jbehave.core.embedder.StoryManager.runStories(StoryManager.java:81)
.... 
```

我对 JBehave 和 TestNG 都比较陌生，所以我想知道这可能只是一个配置问题，还是实际上是 JBehave 中的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:25:47.060

可能是线程池已关闭，而您（或 JBehave）正试图向它提交任务？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T23:06:07.293

在我看来，您只需要拥有 2 个或更多测试类，并配置您的 testing.xml 文件以将该包中的所有类作为一个组运行。因为 TestNG 通常“按类”分叉线程（这是默认配置？？），您需要有多个类，否则它将运行所有 10 个内联方法调用，一次一个。

# c# - 打印带有图像的 XPS 文档。设置不同dpi时图像大小不同

> ID：16084617
> 
> 赞同：0
> 
> 时间：2013-04-18T13:41:09.990
> 
> 标签：c#, printing, dpi, xps

我打印带有图像的 XPS 文档，其中包含 QR 码。在此处创建图像示例：

```
 Image image = CreatePresentation(qrCode);
 image.Height = 200;
 image.Width = 200;
 image.HorizontalAlignment = HorizontalAlignment.Center;
 image.VerticalAlignment = VerticalAlignment.Center;
 image.Stretch = Stretch.None; 
```

在哪里

```
 public static Image CreatePresentation(System.Drawing.Image source)
    {
        Stream stream = new MemoryStream();
        source.Save(stream, ImageFormat.Png);
        Image image = new Image();

        BitmapImage src = new BitmapImage();
        src.BeginInit();
        src.StreamSource = stream;
        src.EndInit();

        image.Source = src;
        return image;
    } 
```

当我有监视器 dpi=96 时，打印页面上的图像尺寸（打印后在纸上）比我有 montor dpi=120 时更大。如何在不同 dpi 上打印相同尺寸的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:47:37.980

当我更换

```
 image.Stretch = Stretch.None; 
```

在

```
 image.Stretch = Stretch.Fill; 
```

图像开始打印正确

# extjs - Sencha Touch 2.2.0 表单面板不显示

> ID：16084619
> 
> 赞同：1
> 
> 时间：2013-04-18T13:41:12.353
> 
> 标签：extjs, touch, sencha-touch-2

它是空的。

```
Ext.define('odtu.view.Main', {
    extend: 'Ext.tab.Panel',
    xtype: 'main',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.field.Password',
        'Ext.field.Email'
    ],
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title: 'Giriş',
                iconCls: 'home',

                styleHtmlContent: true,
                scrollable: true,

                items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'm.odtu.lu'
                },
                {
                    xtype: 'formpanel',
                    url: 'register.php',
                    items:{
                        xtype: 'fieldset',
                        items:
                        [
                            {
                                xtype: 'textfield',
                                name : 'name',
                                label: 'Name'
                            },
                            {
                                xtype: 'emailfield',
                                name : 'email',
                                label: 'Email'
                            },
                            {
                                xtype: 'passwordfield',
                                name : 'password',
                                label: 'Password'
                            }
                        ]
                    }
                }
                ]
            },
            {
                title: 'Kaydol',
                iconCls: 'compose',

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'Kaydol'
                    },
                    {
                        xtype: 'video',
                        url: 'http://av.vimeo.com/64284/137/87347327.mp4?token=1330978144_f9b698fea38cd408d52a2393240c896c',
                        posterUrl: 'http://b.vimeocdn.com/ts/261/062/261062119_640.jpg'
                    }
                ]
            }
        ]
    }
}); 
```

![在此处输入图像描述](https://i.stack.imgur.com/PzNDU.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:47:04.410

为您的窗体设置一个高度

```
{
  ...
  height: 100 // for instance
  ...
} 
```

或者，如果您希望表单面板占据整个高度，您可以在 Giriş 面板上使用合适的布局

```
{
  title: 'Giriş',
  iconCls: 'home',
  layout: 'fit'
  ...
} 
```

希望这可以帮助

# python - 使用没有 griddata() 的 1D 数组的 2D 绘图

> ID：16084620
> 
> 赞同：4
> 
> 时间：2013-04-18T13:41:13.323
> 
> 标签：python, numpy, matplotlib

我正在尝试使用 绘制两个变量的函数`matplotlib`。函数存储在三个一维数组`X`中，`Y`分别`F`对应x坐标、y坐标和函数的值。是否可以将这些数据绘制为等高线图？在我看到解决方案之前`griddata()`，但我想避免插值，因为 x 和 y 坐标已经明确定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:37:05.540

看看[matplotlib 文档的轮廓演示](http://matplotlib.org/examples/pylab_examples/contour_demo.html)。既然你说你可以`F`在任何给定点精确计算你的函数：

```
delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
F = your_function(X.ravel(), Y.ravel())
CS = plt.contour(X, Y, F.reshape(X.shape))
plt.clabel(CS, inline=1, fontsize=10) 
```

# python - 是否可以将 self 传递给外部函数

> ID：16084623
> 
> 赞同：62
> 
> 时间：2013-04-18T13:41:23.027
> 
> 标签：python, self

我有一个类，A，它被一堆其他类继承。其中一些具有一些相似的函数，最好将这些函数定义在其他地方并由需要它们的类调用。但是这些函数调用超类中定义的函数。

```
class A():
    def imp_func(*args):
        # called by the child class functions

Class B(A):
    def common_func(self):
        # some stuff
        self.imp_func(*args) 
```

所以我创建了我的辅助函数，它以`self object`为参数，我可以`imp_func`从辅助函数内部调用 。

```
def helper_func(obj, some_args):
    # some common stuff
    obj.imp_func(*args)

class B(A):
    def common_func(self):
        # unique stuff
        helper_func(self, some_args) 
```

这解决了问题。

但我应该这样做吗？这是Pythonic吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-18T13:48:02.457

无论如何都没有问题 -`self`是一个像任何其他对象一样的对象，并且可以在欢迎其类型/行为的对象的任何上下文中使用。

在 Python 中，正如标准库所示例的那样，get[的](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/fractions.py#L541)`self` [实例](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/re.py#L362) [一直](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/multiprocessing/util.py#L336)[传递](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/multiprocessing/popen_forkserver.py#L52)[给](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/pathlib.py#L1164) [函数](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/typing.py#L347) [（](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/zipfile.py#L1564)也[传递](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/email/message.py#L158) [给](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/asyncio/base_events.py#L388)[方法](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/asyncio/futures.py#L204)，[甚至](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/xml/etree/ElementTree.py#L299) [运算](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/datetime.py#L2004)[符](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/numbers.py#L211)）[。](https://github.com/python/cpython/blob/56970b8ce9d23269d20a76f13c80e670c856ba7f/Lib/xmlrpc/client.py#L524)

# android - 将图像下载到Android中的ListView

> ID：16084624
> 
> 赞同：0
> 
> 时间：2013-04-18T13:41:28.093
> 
> 标签：android, listview, android-asynctask, lazy-loading, adapter

我想从互联网将图像列表加载到列表视图中。每个列表项都包含一个 textview（即图像的 url）和一个 imageview。这是我的适配器类代码，用于下载图像并绑定到列表视图。但是图片与网址不匹配。几行具有相同的图像（但不同的 url）。一段时间后，有些行正在改变其图像。请帮帮我。

```
public class CustomAdapter extends BaseAdapter{

private Activity act;
private String imageUrlsArray[];
private LayoutInflater inflater;

public CustomAdapter(Activity activity, String imageUrls[]) {
    this.act = activity;
    this.imageUrlsArray = imageUrls;
    inflater = (LayoutInflater)this.act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return imageUrlsArray.length;
}

@Override
public Object getItem(int arg0) {
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    View rowView = convertView;

    if (rowView == null) { 

        rowView = inflater.inflate(R.layout.list_row, parent, false);

        holder = new ViewHolder();
        holder.imageView = (ImageView)rowView.findViewById(R.id.imageViewInListRow);
        holder.urlTextView = (TextView)rowView.findViewById(R.id.textViewInListRow);

        rowView.setTag(holder);

    }else{
        holder = (ViewHolder) rowView.getTag();

    } 
    loadImage(holder.imageView, imageUrlsArray[position]);
    holder.urlTextView.setText(imageUrlsArray[position]);

    return rowView;
}

private void loadImage(ImageView iv, String url) {
    DownloadTask asyncTask = new DownloadTask();
    asyncTask.execute(iv, url);
}

class DownloadTask extends AsyncTask<Object,Object, Object>{
    private ImageView iv;
    private InputStream is = null;
    private Drawable imageDrawable = null;
    @Override
    protected Object doInBackground(Object... params) {
        iv = (ImageView) params[0];

        try {
            is  = new DefaultHttpClient().execute(new HttpPost(params[1].toString())).getEntity().getContent();
            imageDrawable = Drawable.createFromStream((InputStream)is , "src name");
        } catch (Exception e) {
            e.printStackTrace();
        }
        return imageDrawable;
    }
    @Override
    protected void onPostExecute(Object response) {
        super.onPostExecute(response);
        if(response != null){
            iv.setImageDrawable((Drawable)response);
        } 

    }

}
static class ViewHolder{
    public TextView urlTextView;
    public ImageView imageView;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:46:28.710

使用 hashMap 与 textview 进行正确映射。并且首先将 url 转换为适配器中的图像位图。

# javascript - 计算总点击次数 Javascript

> ID：16084636
> 
> 赞同：3
> 
> 时间：2013-04-18T13:41:55.543
> 
> 标签：javascript, html

我正在学习 Javascript，但对这门语言还是很陌生。在我的 HTML 代码中，我有两个列表。在第一个选择列表中，您选择所需的产品。在第二个选择列表中，您选择所需的产品数量。

我试图编写一个执行以下操作的javascript代码：

*   获取产品值并将其分配给变量
*   获取产品的编号并将其分配给变量
*   将产品价值乘以产品数量
*   当用户单击提交时，会显示一个警告框，其中包含总数

但是，当用户单击提交按钮时我的代码不起作用我收到消息 NaN 而不是总金额变量的结果请你看看我的代码并告诉我我做错了什么

```
<script type="text/javascript">
function calc()
{
   var total;
   var fruitOrVeg;
   var nrOfFruit;

   course = document.getElementsByName("fruitOrVeg.course.value")
   nrOfFruit = document.getElementsByName("nrOfFruit")

   total = fruitOrVeg * nrOfFruit;

   window.alert(total)
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:16:19.703

直接的问题是您没有使用该`fruitOrVeg`变量。除此之外，元素值的检索在您的代码中没有意义。尝试这个：

```
function calc() {
   var total,
       fruitOrVeg,
       nrOfFruit;

   fruitOrVeg = document.getElementsByName("fruitOrVeg")[0].value;
   nrOfFruit = document.getElementsByName("nrOfFruit")[0].value;

   total = fruitOrVeg * nrOfFruit;

   alert(total);
} 
```

假设您的 HTML 是这样的：

```
<select name="fruitOrVeg">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>
<br />
<input type="text" name="nrOfFruit" />
<br />
<input type="button" id="submit_button" value="Submit" /> 
```

**演示：http:** [//jsfiddle.net/TNPCh/](http://jsfiddle.net/TNPCh/)

所以你的第一个问题是你实际上并没有得到元素的值。你可以通过使用`.value`来**获取**它们。

第二个问题是结果`getElementsByName`是一个`HTMLCollection`（一个数组），所以你不能只使用`.value`它。如果您确定只有一个具有此名称的元素，只需索引数组`[0]`以获取找到的第一个元素。更容易做的事情是为元素赋予`id`属性并使用`document.getElementById`- 它返回一个且仅一个元素（不是数组）。我不想假设你能够做到这一点，所以我的代码仍然使用`getElementsByName`.

最后，乘法不需要任何转换/解析为数字。`*`运算符会自动将值强制转换为数字，以便进行乘法运算。因此，由于它们最初是字符串，因此由于这种强制，操作将完成（运算符**不是**这种情况`+`）。当然，如果任一操作数一开始就不是数字，则乘法的结果将是`NaN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:47:12.283

您将值作为字符串（而不是数字），并且您没有使用“fruitOrVeg”。此外（稍后注意到/新评论）当您真正应该使用 ID 来表示您希望 javascript 直接且具体地从中获取数据的元素时，您正在使用名称，然后相应地更新您的 js。尝试这个：

```
function calc() {
    var fruitOrVeg = Number(document.getElementsById("fruitOrVeg").value);
    var nrOfFruit = Number(document.getElementsById("nrOfFruit").value);

    var total = fruitOrVeg * nrOfFruit;

    window.alert(total)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:42:53.923

尝试使用`parseInt`所有值。您没有 . 的值。尝试使用`fruitOrVeg`任何您想要的值声明

```
function calc()
{
var total = 0;
var nrOfFruit = 0;

course = Number(document.getElementsByName("fruitOrVeg"));
nrOfFruit = Number(document.getElementsByName("nrOfFruit"));

total = fruitOrVeg * nrOfFruit;

window.alert(total)

} 
```

# java - Wicket - 使用地图的条目值作为模型中的对象，我知道每个组件的键

> ID：16084640
> 
> 赞同：0
> 
> 时间：2013-04-18T13:42:22.313
> 
> 标签：java, web-applications, map, wicket, wicket-1.6

我有一个 Java `Map`，我在其中存储必须在 Web 应用程序的表中连续显示的数据。我正在使用 Wicket 6。

有没有办法将 Wicket 标签（将是我的表格中的单元格）链接到`String`对象的版本，并且`Map`知道每个标签的键。

我应该实现自己的版本`IModel`还是在 Wicket 6 库中有任何便利类？据我所知，没有，但我可能是错的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:54:18.537

你可以实现`IModel`也可以实现`IConverter<C>`。

要像这样使用自定义转换器覆盖`Component#getConverter`：

```
 Label lbl = new Label("lbl"){
        @Override
        public <C> IConverter<C> getConverter(Class<C> type) {
            //return converter here
        }
    }; 
```

对于像您这样的组件，`Label`您只能实现`convertToString`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:12:27.730

我认为目前没有这样`IModel`的实现。`IModel<String>`编写你自己的并在构造函数中使用你的`Map`和 a`key`并返回`String.valueOf(map.get(key))`;)并不难

只要确保您`Map`是`Serializable`或其他人，您应该`LoadableDetachableModel`为您的地图提供一个并使用它。

# python - 从包含python中数字的列表中删除字符串

> ID：16084642
> 
> 赞同：18
> 
> 时间：2013-04-18T13:42:22.840
> 
> 标签：python

有没有一种简单的方法可以删除包含数字的列表中的所有字符串？

例如

```
my_list = [ 'hello' , 'hi', '4tim', '342' ] 
```

会回来

```
my_list = [ 'hello' , 'hi'] 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-18T13:45:18.643

没有正则表达式：

```
[x for x in my_list if not any(c.isdigit() for c in x)] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T13:46:13.780

我发现使用[`isalpha()`](http://docs.python.org/3.3/library/stdtypes.html#str.isalpha)最优雅的，但它也会删除包含其他非字母字符的项目：

> 如果字符串中的所有字符都是字母并且至少有一个字符，则返回 true，否则返回 false。字母字符是在 Unicode 字符数据库中定义为“字母”的那些字符</p>

```
my_list = [item for item in my_list if item.isalpha()] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T13:44:36.360

我会使用正则表达式：

```
import re
my_list = [s for s in my_list if not re.search(r'\d',s)] 
```

在时间方面，在样本数据上使用正则表达式比使用 isdigit 解决方案要快得多。诚然，它比 慢`isalpha`，但是标点符号、空格等的行为略有不同。由于问题没有指定这些字符串应该发生什么，因此不清楚哪个是最佳解决方案。

```
import re

my_list = [ 'hello' , 'hi', '4tim', '342' 'adn322' ]
def isalpha(mylist):
    return [item for item in mylist if item.isalpha()]

def fisalpha(mylist):
    return filter(str.isalpha,mylist)

def regex(mylist,myregex = re.compile(r'\d')):
    return [s for s in mylist if not myregex.search(s)]

def isdigit(mylist):
    return [x for x in mylist if not any(c.isdigit() for c in x)]

import timeit
for func in ('isalpha','fisalpha','regex','isdigit'):
    print func,timeit.timeit(func+'(my_list)','from __main__ import my_list,'+func) 
```

这是我的结果：

```
isalpha 1.80665302277
fisalpha 2.09064006805
regex 2.98224401474
isdigit 8.0824341774 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:45:42.917

尝试：

```
import re
my_list = [x for x in my_list if re.match("^[A-Za-z_-]*$", x)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:56:19.390

还有一个细微的变化：

```
>>> import re
>>> filter(re.compile('(?i)[a-z]').match, my_list)
['hello', 'hi'] 
```

并将有效的字符放在您的 re 中（例如空格/标点符号/其他）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T13:47:20.073

当然，使用内置的字符串作为数字，并测试它们的存在。我们会有点幻想，只是测试列表理解中的真实性；如果它返回任何字符串中的数字。

所以：

```
out_list = []
for item in my_list:
    if not [ char for char in item if char in string.digits ]:
        out_list.append(item) 
```

# layout - 使用水平选项卡（选项卡式窗口）与垂直选项卡（部分）的布局和导航

> ID：16084643
> 
> 赞同：0
> 
> 时间：2013-04-18T13:42:27.580
> 
> 标签：layout, navigation, salesforce, dynamics-crm-2011

对于我们的新项目，我们目前正在寻找最新的“标准”布局。这是一个商业网络应用程序，其中包括许多主从屏幕/表单。

在我们之前的项目中，我们广泛使用了像**[JQuery UI Tabs](http://jqueryui.com/tabs/)**这样的水平选项卡。

我记得 Dynamics CRM 的旧版本 (5) 也使用了类似的方法，但在最新的 2011 版本中，他们已经替换了布局以包含这样的垂直选项**[卡](http://www.dynamicscrmtrickbag.com/wp-content/uploads/2011/04/042011_1256_DynamicsCRM2.png)**。

我还注意到 SalesForce 也有关于垂直“标签”的相关信息，它本质上是长页面上的多个部分。我找不到太多关于这种决定的讨论？请注意，MS/SF 对移动设备有单独的布局，而且他们肯定不希望企业使用平板电脑。

当屏幕变宽时，每个人都转向垂直布局吗？这种转变有什么原因吗？

**编辑：** 这就是我所说的，问题是为什么？

1.  [标签性能 - CRM 4.0 与 CRM 2011](http://mscrmdev.blogspot.com.au/2012/02/tab-performance-crm-40-vs-crm-2011.html)
2.  [不再有选项卡 – Dynamics CRM 2011](http://www.magnetismsolutions.com/blog/paulnieuwelaar/2011/01/11/No_More_Tabbing_%E2%80%93_Dynamics_CRM_2011.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:58:35.363

实际上微软正在再次改变 CRM 2011 的界面，从 Polaris 发布开始他们引入了新的形式，看看这篇文章和包含的幻灯片：

[http://niiranen.eu/crm/2013/01/whats-new-in-microsoft-dynamics-crm-polaris-release-slides/](http://niiranen.eu/crm/2013/01/whats-new-in-microsoft-dynamics-crm-polaris-release-slides/)

此版本带来了跨浏览器兼容性，包括 iPad 上的 Safari，因此您可以看到 Microsoft（以及 SalesForce 和其他公司）调整他们的产品，试图为他们的客户提供最好的 UI。

# javascript - 无法将 div 插入另一个内部 div

> ID：16084649
> 
> 赞同：1
> 
> 时间：2013-04-18T13:42:41.580
> 
> 标签：javascript, html

我需要你的帮助来解决我遇到的问题。我有这个代码：

```
<div id="div1" >
    <div id="edit1">
       hello
       <input type="button" id="b1" onclick="aaa()"/>
    </div>
</div> 
```

我想在我生成的另一个新 div 中使用插入到内部 div (id=edit1) 中。

我尝试了类似的代码，但它没有运行：

```
js:
function aaa()
{
   var elem = createDivLine();
   var el1 = document.getElementById("div1");
   var el2 = el1.getElementById("edit1");
   el2.appendChild(elem);
}

function createDivLine()
{
   var tempDiv1 = document.createElement("div");
   tempDiv1.innerHTML = "Sam";
   return tempDiv1;
} 
```

结果应如下所示：

```
<div id="div1" >
    <div id="edit1">
       hello
       <input type="button" id="b1" onclick="createDivTable()"/>
       <div>"Sam"</div>
    </div>
</div> 
```

JSFiddle：http: [//jsfiddle.net/KknXF/](http://jsfiddle.net/KknXF/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:47:12.027

由于 ID 是唯一的，因此尝试通过 ID 获取元素的子项是无效的。

删除这一行：

```
var el1 = document.getElementById('div1'); 
```

并将以下行更改为：

```
var el2 = document.getElementById('edit1'); 
```

如果您有一些无法修复的（我永远无法拼写那个词...）损坏的 HTML 并且您无法更改，请尝试以下操作：

```
var el2 = document.querySelector("#div1 #edit1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:48:35.087

它应该是

```
function aaa() {
   var elem = createDivLine();
   var el2 = document.getElementById("edit1");
   el2.appendChild(elem);
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UdnuP/1/)

# c++ - QDataWidgetMapper 仅将第一个索引更新为 QSqlRelationalTableModel

> ID：16084658
> 
> 赞同：2
> 
> 时间：2013-04-18T13:43:00.893
> 
> 标签：c++, qt, submit, qtableview, qsqltablemodel

我对 QT 框架的某些部分有疑问。我正在使用 QT 5.0.2，目前正在 Windows 上开发。

在我的应用程序中，我有一个使用 QSqlRelationalTableModel 设置的 Tableview。在它旁边，我有一个文本字段和 3 个连接到关系表模型的组合框。使用 QDataWidgetMapper 将小部件映射到模型，如下所示：

```
mapper = new QDataWidgetMapper(this);
mapper->setModel(model);
mapper->setItemDelegate(new QSqlRelationalDelegate(this));
mapper->setSubmitPolicy(QDataWidgetMapper::ManualSubmit);
mapper->addMapping(ui->courseComboBox, model->fieldIndex("course_shortcode"));
mapper->addMapping(ui->subjectComboBox, model->fieldIndex("subject_name"));
mapper->addMapping(ui->lecturerComboBox, model->fieldIndex("lecturer_name"));
mapper->addMapping(ui->themesTextEdit, model->fieldIndex("event_themes")); 
```

如您所见，SubmitPolicy 设置为手动提交。在小部件下，我有一个包含保存和重置按钮的按钮框。

当点击保存按钮时，我这样做：

```
qDebug() << this->mapper->submit();
qDebug() << model->lastError().text(); 
```

这将创建以下输出：

```
true 
" " 
```

表示提交成功，没有报错。

然而，只有第一个字段在模型中得到更新。所有其他小部件将它们的值重置为原始模型的值（因为模型发出 datachanged，我猜是映射器连接到的）。

我尝试删除一个或两个映射，并且总是只有首先添加映射的字段才会更新。

如果我将 submitPolicy 更改为 autoSubmit，则映射器会按预期工作。但我真的需要那些重置和应用按钮，而不是在更改时提交数据。

这似乎是[QTBug 1086](https://bugreports.qt-project.org/browse/QTBUG-1086)的出现，但该错误已得到修复，我也无法从那里的代码中的错误报告中重现该问题。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T11:04:19.643

我编辑了我的答案，因为我误解了文档，在得到很好的解释后，我终于找到了获得所需结果的正确方法。您应该简单地使用 QSqlTableModel::setEditStrategy() 修改模型编辑策略并将其更改为 QSqlTableModel::OnRowChange。这是必要的，以避免在每列修改后将修改发送到底层数据库，这会在第一列更改后产生映射小部件内容的更新。

# google-chrome - 如何使用开发者工具在 Chrome 中保存所有缓存的图像

> ID：16084660
> 
> 赞同：7
> 
> 时间：2013-04-18T13:43:07.467
> 
> 标签：google-chrome, developer-tools

/我需要将 Chrome 中的所有缓存图像保存到本地文件夹。我有`Developer Tools`很多`Recources > Frames > Folder123 > Images`图像。将每个保存为： 1\. `Open in a new tab`2\. 然后`Save as...`. 有什么方法可以更快地获取所有图像吗？

更新：

也许这可以使用 Firefox 更轻松地完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:06:49.660

您是否使用过页面下载器：www.httrack.com/ 它可以保护整个网页以及图片。这可能是您的问题的原因。更高效、更容易处理

# javascript - 在 Backbone 中使用 model.set 更改嵌套属性

> ID：16084661
> 
> 赞同：3
> 
> 时间：2013-04-18T13:43:10.440
> 
> 标签：javascript, json, backbone.js, marionette, backbone-model

我正在尝试做我希望是一件简单的事情——仅在对象的子属性上执行 model.set。

现在，我有一个看起来像这样的模型：

```
{
            "attr1" : true,
            "attr2" : this.model.get("username"),
            "attr3" : $('#tenant_select').val(),
            "attr_array": [
                {
                    "id": "sub_1",
                    "state": "active"
                },
                {
                    "id": "sub_22",
                    "state": "not_active"
                }
            ]
        } 
```

我希望能够进入 myMode.attr_array.state 并更改值。但是，使用 .set 我只能更改第一级的属性，即 attr_array。

有没有办法使用model.set来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T13:50:31.530

你可以做到（我想知道你为什么没能做到）。但是你必须小心：

```
var array = this.get('attr_array');
array[1].state = 'active';
this.set('attr_array', array); 
```

这里有什么问题？您的模型包含对象的引用。因此最后一行是无用的，它根本不会改变任何东西。它简单地等同于：

```
this.get('attr_array')[1].state = 'active'; 
```

当你使用 set 时，你会丢失 Backbone 所做的任何内部工作。
那么该怎么办？克隆你的对象：

```
var array = _.clone(this.get('attr_array'));
array[1].state = 'active';
this.set('attr_array', array); // will trigger 'change' and 'change:attr_array' events 
```

# matlab - 如何查找图像的纵横比

> ID：16084670
> 
> 赞同：1
> 
> 时间：2013-04-18T13:43:45.377
> 
> 标签：matlab, image-processing

例如，将字符“B”、“M”或数字“1”、“2”作为图像。
我必须找出这个字符或数字的纵横比。
我没有得到正确的值，这是我的代码：

```
E = imread('1.jpg'); 
level = graythresh(E);
BW = im2bw(E,level);   
[m,n]=size(BW);
AR=m/n 
```

![在此处输入图像描述](https://i.stack.imgur.com/lzkL0.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:50:33.947

你需要取字符边界框的纵横比

```
s = regionprops( BW, 'BoundingBox' );
AR = s.BoundingBox(4) / s.BoundingBox(3); 
```

`regionprops`有关中的值，请参见 的文档`'BoundingBox'`。

# html - 如何从文本文件中获取列和行。php/html

> ID：16084671
> 
> 赞同：0
> 
> 时间：2013-04-18T13:43:46.710
> 
> 标签：html, file, text

如果我有一个名为 text.txt 的文本文件，在第 2 列第 6 行的文本文件中有一个词“帮助”，我如何阅读该词并用 php/html 打印出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:48:58.710

使用 HTML 是不可能的。您需要使用 PHP 或其他语言。

使用 PHP

```
<?php
$arr = file ("text.txt");
substr($arr[5],2,4);
?> 
```

或者如果你想找到确切的词。

```
<?php
$arr = file ("text.txt");
preg_match('/help/', $arr[5], $matches);
print_r($matches);
?> 
```

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

[http://php.net/manual/pl/function.file.php](http://php.net/manual/pl/function.file.php)

[http://pl1.php.net/manual/en/function.preg-match.php](http://pl1.php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:49:14.953

需要在这里使用 php：http: [//www.html.net/tutorials/php/lesson15.php](http://www.html.net/tutorials/php/lesson15.php) 只需在您的 html 页面中插入 php 代码。使用数组和字符串操作来做你需要的。

# visualvm - Jconsole 无法连接到本地进程

> ID：16084672
> 
> 赞同：1
> 
> 时间：2013-04-18T13:43:56.320
> 
> 标签：visualvm, jconsole

Jconsole 无法连接到本地进程。我在 VisualVM 中尝试了相同的操作，但收到以下消息：“数据不可用，因为无法建立与 JMX 代理的 JMX 连接。”

昨天，Jconsole 最初没有连接，但后来它正在连接。这是一个已知问题吗？这个问题有什么解决方案吗？

# apache - 配置错误页面以显示 modsecurity 的日志

> ID：16084679
> 
> 赞同：3
> 
> 时间：2013-04-18T13:44:23.990
> 
> 标签：apache, mod-security

我正在寻找一种方法使规则的消息信息（已触发哪个规则）出现在错误和/或审核日志文件中，并在响应标头中发送回客户端。我知道有阶段“msg”，但它不会在响应标头中将信息发送回客户端，所以它对我没有帮助。我想在html中查看错误页面中的日志信息，怎么办？谢谢你的帮助，弗拉迪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-16T22:43:37.997

让客户知道到底出了什么问题是个坏主意。黑客可以使用它来绕过您的安全框架。一个更好的方法是组合`mod_unique_id`和定制的错误页面。要遵循的步骤：

*   `mod_unique_id`使用您的 apache 配置启用
*   为您感兴趣的 http 返回码创建自定义错误页面（示例如下）
*   在你的 apache 配置中启用那些（`ErrorDocument 403 /<url_path_to>/403.php`对于这个例子）

这是一个 403 错误页面的示例，我们称之为`403.php`（不，纯静态页面不起作用）：

```
<?php
 $protocol = $_SERVER['SERVER_PROTOCOL'];
 header("$protocol 403 Forbidden");
 header("Status: 403 Forbidden");
 header("Connection: close");
 $msg = $_SERVER["UNIQUE_ID"];
?>
<HTML><HEAD>
 <TITLE>You have no access to this resource (403)</TITLE>
</HEAD><BODY>
<P>An error occured. Please tell the admin the error code: <?php echo $msg; ?></P>
</BODY></HTML> 
```

这只是一个非常缩写的变体，没有样式等（您可能想要增强它），但我顺便保持简单以便理解。将`$msg`打印一个唯一的代码。客户端可以告诉您此代码，您可以使用它在错误日志中查找确切的行，您将在其中看到哪个规则触发了它等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-31T23:18:18.357

如果您不想使用外部东西（mod_perl、mod_php 等），例如，您在前端反向代理上并且不想暴露更大的攻击面，您可以使用 SSI（服务器端包括），因为 apache 在内部使用 mod_include 支持 SSI。

只需加载 mod_include，然后将其添加到您的虚拟主机：

```
# Custom 403 HTML error with base64 encoded date + uniqueid on response
<Directory /var/www/html/common/_Errors>
        AddType text/html .shtml
        AddOutputFilter INCLUDES .shtml
        Options +Includes
</Directory>
ErrorDocument 403 /common/_Errors/403.shtml
<Location "/common/_Errors/403.shtml">
        # don't block redirected error page due rule to correlation
        SecRuleRemoveById 980130
</Location> 
```

然后，创建一个 HTML 文件 /var/www/html/common/_Errors/403.shtml 包含如下内容：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>Your request was denied.</p>
<!--#config timefmt="%Y-%m-%d %H:%M:%S" -->
<p><pre><!--#set var="ERR" value="${DATE_LOCAL} - ${UNIQUE_ID}" --></pre></p>
<p><pre><!--#echo encoding="base64" var="ERR" --></pre></p>
</body></html> 
```

如果您愿意，您可以更改 #config timefmt 以适合您的日期时间格式。

mod_include 上的 SSI 将创建一个 HTML 响应，使用 DATE_LOCAL 和 UNIQUE_ID 扩展 ERR 变量，并将输出编码为 base64 字符串。足以让我获得被触发的规则及其日期的唯一 ID。

# actionscript-3 - 事件的 Flash Builder 代码完成

> ID：16084683
> 
> 赞同：1
> 
> 时间：2013-04-18T13:44:34.707
> 
> 标签：actionscript-3, apache-flex, mxml, flash-builder

当我使用内置`EventDispatcher`代码完成时，将显示该类触发的所有事件的列表，例如：

![代码完成 - 内置类](https://i.stack.imgur.com/z7gon.gif)

我怎样才能为我自己的类实现相同的目标，例如我可以像这样扩展事件类：

```
import flash.events.Event;

public class MyEvent extends Event
{

    //Event Types
    public static const FIRST_EVENT:String = 'firstEvent';
    public static const SECOND_EVENT:String = 'secondEvent';

    //Construct
    public function MyEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false)
    {
        super(type, bubbles, cancelable);
    }
} 
```

然后我可能会写一个`EventDispatcher`这样的：

```
import flash.events.EventDispatcher;
import flash.events.IEventDispatcher;

public class MyEventDispatcher extends EventDispatcher
{
    public function foo() :void{
        dispatchEvent(new MyEvent(MyEvent.FIRST_EVENT));
    }

    public function bar() :void{
        dispatchEvent(new MyEvent(MyEvent.SECOND_EVENT));
    }

} 
```

**如何使我的事件出现在代码完成框中？**

我知道我可以在类上方使用元数据，如下所示：

```
[Event(name="firstEvent", type="my.MyEvent")]
[Event(name="secondEvent", type="my.MyEvent")] 
```

但这仅对 MXML 有好处，代码补全只知道字符串值 ( `"firstEvent"`)，而不知道 const ( `MyEvent.FIRST_EVENT`)。

我正在使用 Flash Builder 4.7。

# c - sem_t的结构和信号量的实现

> ID：16084684
> 
> 赞同：2
> 
> 时间：2013-04-18T13:44:35.297
> 
> 标签：c, linux, posix, semaphore

在 C 编程语言中，为什么我们需要一个特殊的 sem_t 类型来定义信号量？那不能是一个整数吗？ sem_t 是如何定义的？sem_post 和 sem_wait 函数是如何实现的？编辑：像 GNU C 库这样的示例实现会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:55:57.840

信号量是操作系统内核管理的对象，因此 sem_t 将是操作系统特定的，信号/等待调用也是如此，因为它们也必然会调用操作系统内核。

通常，信号量由一个单元计数和一个等待线程的队列来实现。

# excel - Excel VBA 运行时错误“424”：尝试复制文本框时需要对象

> ID：16084686
> 
> 赞同：5
> 
> 时间：2013-04-18T13:44:39.697
> 
> 标签：excel, vba, runtime

我正在尝试将文本框的内容从一个复制`workbook`到另一个。我将单元格值从第一个复制到第二个没有问题`workbook`，但是`object required`当我尝试复制文本框时出现错误。这`macro`是从包含我要复制的数据的工作簿中运行的。使用`Excel 2007`代码：

```
Sub UploadData()
    Dim xlo As New Excel.Application
    Dim xlw As New Excel.Workbook
    Set xlw = xlo.Workbooks.Open("c:\myworkbook.xlsx")
    xlo.Worksheets(1).Cells(2, 1) = Range("d4").Value 'Copy cell content (this works fine)
    xlo.Worksheets(1).Cells(2, 2) = TextBox1.Text 'This gives me the object required error
    xlw.Save
    xlw.Close
    Set xlo = Nothing
    Set xlw = Nothing
End Sub 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:53:44.803

您的宏的问题在于，一旦您打开了目标*Workbook*（`xlw`在您的代码示例中），它就会被设置为*ActiveWorkbook*对象，并且您会收到错误，因为*TextBox1在该特定**Workbook*中不存在。要解决此问题，您可以在打开另一个*工作簿*之前为您的实际工作簿定义一个引用对象。

```
Sub UploadData()
    Dim xlo As New Excel.Application
    Dim xlw As New Excel.Workbook
    Dim myWb as Excel.Workbook

    Set myWb = ActiveWorkbook
    Set xlw = xlo.Workbooks.Open("c:\myworkbook.xlsx")
    xlo.Worksheets(1).Cells(2, 1) = myWb.ActiveSheet.Range("d4").Value
    xlo.Worksheets(1).Cells(2, 2) = myWb.ActiveSheet.TextBox1.Text

    xlw.Save
    xlw.Close
    Set xlo = Nothing
    Set xlw = Nothing
End Sub 
```

如果您愿意，也可以使用`myWb.Activate`将主*工作簿*恢复为活动状态。如果您使用*Worksheet*对象执行此操作，它也将起作用。使用一个或另一个主要取决于您想要做什么（如果有多个工作表等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:50:32.620

我认为发生这种情况的原因可能是因为`TextBox1`范围限定为 VBA 模块及其相关工作表，而 Range 范围限定为“活动工作表”。

**编辑**

看起来您可以使用[GetObject](http://msdn.microsoft.com/en-us/library/e9waz863%28v=vs.90%29.aspx)函数从工作簿中提取文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T21:27:27.067

问题在于这条线

```
 xlo.Worksheets(1).Cells(2, 2) = TextBox1.Text 
```

您在此处未使用的其他位置定义了文本框。Excel 无法在当前工作表中找到该文本框对象，而该文本框是在 xlw 中定义的。

因此将其替换为

```
 xlo.Worksheets(1).Cells(2, 2) = worksheets("xlw").TextBox1.Text 
```

# python - TEMPLATE_CONTEXT_PROCESSORS 中包含的变量不在 DEBUG=False 的模板中

> ID：16084688
> 
> 赞同：1
> 
> 时间：2013-04-18T13:44:43.017
> 
> 标签：python, django, django-templates

当我`DEBUG=False`在 django 1.5 中的设置文件中进行设置时，我不再有权访问`STATIC_URL`django 模板中的 TEMPLATE_CONTEXT_PROCESSORS 应该加载的或任何其他变量。奇怪的是，当`DEBUG=True`. 对于它的价值，我肯定有`'django.core.context_processors.static'`我的`TEMPLATE_CONTEXT_PROCESSORS`所以这不是问题。我还在模板上下文中检查了其他一些变量，但似乎没有其他变量。`MEDIA_URL`? 不。`request`? 不。[请参阅 github 上的此示例](https://github.com/deanmalmgren/django-problem-gist)（已使用解决方案进行了更新），但这些是在以下情况下正确工作`DEBUG=True`并在以下情况下引发 500 错误的重要部分`DEBUG=False`：

```
# settings.py
from django.conf.global_settings import *
# ...
TEMPLATE_CONTEXT_PROCESSORS += (
    'django.core.context_processors.request',
)
# believe it or not, 'django.core.context_processors.static' is in there
print TEMPLATE_CONTEXT_PROCESSORS 

# views.py
from django.template import RequestContext
from django.shortcuts import render_to_response
def wtf(request):
    return render_to_response(
        "wtf.html", {}, 
        context_instance=RequestContext(request)
    ) 
```

当您关闭调试模式时，django 1.5 中会发生什么特别的事情吗？任何修复和/或调试问题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:58:32.243

看起来 Django 1.2 和 1.3 之间发生了变化。

如果您希望模板在调试模式之外可用，您现在必须包含`django.core.context_processors.static`在您的文件中。`TEMPLATE_CONTEXT_PROCESSORS``STATIC_URL`

您还需要确保`RequestContext`在呈现模板时使用实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:37:03.137

这可以通过编辑 settings.py 中的[ALLOWED_HOSTS](https://docs.djangoproject.com/en/1.5/ref/settings/#std:setting-ALLOWED_HOSTS)变量来解决。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/15128135/django-setting-debug-false-causes-500-error)。

例如，要使其[在 localhost 上工作](http://getluky.net/2013/02/21/django-debugfalse-and-allowed_hosts/)，请设置`ALLOWED_HOSTS = ['localhost']`.

# canvas - 在 canvas% 元素上绘图

> ID：16084690
> 
> 赞同：6
> 
> 时间：2013-04-18T13:44:51.760
> 
> 标签：canvas, drawing, scheme, racket

尝试在画布 GUI 元素上绘图时遇到问题。

我创建了一个框架、一个画布，并尝试使用该`draw-line`方法在画布的 dc 上下文上进行绘制，但没有任何反应。显示带有画布的框架，但画布上未显示线条。

```
(require racket/gui/base)

(define frame (new frame% [label "Frame"] [width 500] [height 500]))
(define canvas (new canvas% [parent frame]))
(define dc (send canvas get-dc))

(send dc draw-line 10 10 200 200)
(send frame show #t) 
```

有人知道我在上面的代码中哪里错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:07:33.407

问题在于，即使您可以在画布的 on-paint 方法调用之外在画布上绘图，但效果是暂时的。任何需要刷新窗口的窗口活动（例如移动和调整大小）都可能会擦除您的绘图。

因此：从paint-callback 中绘制所有内容。

```
#lang racket
(require racket/gui/base)

(define frame (new frame% [label "Frame"] [width 500] [height 500]))
(define canvas (new canvas% 
                    [parent frame]
                    [paint-callback 
                     (λ(can dc) (send dc draw-line 10 10 200 200))]))
(define dc (send canvas get-dc))
(send frame show #t) 
```

有关更多信息，请参阅[canvas 类的文档](http://docs.racket-lang.org/gui/canvas___.html?q=canvas)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:03:23.217

尝试这个：

```
(require racket/gui/base)

(define frame (new frame% [label "Frame"] [width 500] [height 500]))
(define canvas (new canvas% [parent frame]))
(define dc (send canvas get-dc))

(send frame show #t)
(sleep/yield 1)
(send dc draw-line 10 10 200 200) 
```

看来您需要先显示框架，然后稍等片刻让窗口准备好。

# jquery - Jquery DataTable Horizo ntol 滚动

> ID：16084697
> 
> 赞同：2
> 
> 时间：2013-04-18T13:45:07.570
> 
> 标签：jquery, datatable

我正在使用 Jquery DataTable（[http://datatables.net](http://datatables.net)）。我正在尝试为 Horizo​​ntol 滚动条做一些演示

当我设置“sScrollX”属性时。我的 DataTable DOM 如下所示

```
<div class="dataTables_scroll">
<div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px none; width: 100%;">
<div class="dataTables_scrollBody" style="overflow: auto; width: 100%;">
<table id="resultsDatatable" class="dataTable" style="margin-left: 0px; width: 110%;" aria-describedby="resultsDatatable_info">
<thead>
<tbody> 
```

在哪里得到 Multiple Thead 并且我的 UI 很乱。如果我删除一切都很好，但我不会得到 Horizo​​ntol 滚动

做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:37:10.470

您没有做错任何事情 - DataTables 必须在启用滚动时将表格分成两部分（在所有浏览器中这样做的唯一方法），并且为了保持列宽匹配，复制了 thead 元素。从视觉上看，您根本不应该看到这一点。您可以链接到显示问题的演示页面吗？

# python - Scapy - 如何获得统计数据？

> ID：16084699
> 
> 赞同：1
> 
> 时间：2013-04-18T13:45:12.300
> 
> 标签：python, scapy, sniffer

我需要编写一个网络嗅探器，我决定使用 python 来完成它。我知道性能不会是最好的，对于这种软件我应该使用 c 或 c++，但一个好的原型就可以了。所以我一直在为 python 2.7 使用 libpcap 库，我可以获得我需要的所有信息，例如：IP 源和目标，以及相对端口、时间戳和数据包长度。但问题是我注意到在高流量的情况下会出现大量丢包。

必须说，这些信息是在整个过程中插入到一个mysql数据库中的。

因此，在我进一步了解 Scapy 之前，**我想了解是否有一种方法可以测量在此阐述过程中我会丢失多少数据包**。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T12:02:13.123

我已经以间接的方式修复了。我在用

```
tcpdump -G 3600 -i interface -n -w %H-Capture.pcap 
```

从这里我收集有关丢弃数据包和过滤等的所有统计信息。请注意，为了尽量减少丢弃数据包的百分比，该选项 `-n`至关重要，因为它基本上说不解析捕获的数据包中的每个主机， `-G`而是基本上告诉循环超过 3600 秒，即每小时创建一个文件。

在此之后，我只是从 cli 转到 Scapy，在 scapy 中我执行以下操作：

```
x = rdpcap("myfile")
len_x = len(x)

for i in x:
   if TCP in i:
      i.show() 
```

这将只显示 TCP 数据包。如果您愿意，您也可以以相同的方式过滤 UDP 或 ICMP 等。

# grails - Grails：无法解决依赖关系

> ID：16084705
> 
> 赞同：0
> 
> 时间：2013-04-18T13:45:28.290
> 
> 标签：grails, spring-security, dependencies

我很难找出为什么 grails 无法解决某些依赖项。这是我在尝试编译/清理/运行应用程序时收到的错误消息：

```
==== localMavenResolver: tried 
        ....

==== http://grails.org/plugins: tried
        http://grails.org/plugins/grails-org.springframework.security.web/tags/RELEASE_3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://grails.org/plugins/grails-org.springframework.security.web/tags/RELEASE_3.0.4.RELEASE/grails-org.springframework.security.web-3.0.4.RELEASE.jar

        ==== grailsCentral: tried
        http://grails.org/plugins/grails-org.springframework.security.web/tags/RELEASE_3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://grails.org/plugins/grails-org.springframework.security.web/tags/RELEASE_3.0.4.RELEASE/grails-org.springframework.security.web-3.0.4.RELEASE.jar

        ==== http://repo.grails.org/grails/core: tried
        http://repo.grails.org/grails/core/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://repo.grails.org/grails/core/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.jar

        ==== http://snapshots.repository.codehaus.org: tried
        http://snapshots.repository.codehaus.org/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://snapshots.repository.codehaus.org/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.jar

        ==== http://repository.codehaus.org: tried
        http://repository.codehaus.org/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://repository.codehaus.org/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.jar

        ==== http://repository.jboss.com/maven2/: tried
        http://repository.jboss.com/maven2/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://repository.jboss.com/maven2/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.jar

        ==== http://download.java.net/maven/2/: tried
        http://download.java.net/maven/2/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.web;3.0.4.RELEASE!org.springframework.security.web.jar:
        http://download.java.net/maven/2/org/springframework/security/org.springframework.security.web/3.0.4.RELEASE/org.springframework.security.web-3.0.4.RELEASE.jar

        ==== localMavenResolver: tried 
        ....

        ==== http://grails.org/plugins: tried
        http://grails.org/plugins/grails-org.springframework.security.core/tags/RELEASE_3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
        -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://grails.org/plugins/grails-org.springframework.security.core/tags/RELEASE_3.0.4.RELEASE/grails-org.springframework.security.core-3.0.4.RELEASE.jar
            ==== grailsCentral: tried
              http://grails.org/plugins/grails-org.springframework.security.core/tags/RELEASE_3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://grails.org/plugins/grails-org.springframework.security.core/tags/RELEASE_3.0.4.RELEASE/grails-org.springframework.security.core-3.0.4.RELEASE.jar
            ==== http://repo.grails.org/grails/core: tried
              http://repo.grails.org/grails/core/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://repo.grails.org/grails/core/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar
            ==== http://snapshots.repository.codehaus.org: tried
              http://snapshots.repository.codehaus.org/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://snapshots.repository.codehaus.org/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar
            ==== http://repository.codehaus.org: tried
              http://repository.codehaus.org/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://repository.codehaus.org/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar
            ==== http://repository.jboss.com/maven2/: tried
              http://repository.jboss.com/maven2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://repository.jboss.com/maven2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar
            ==== http://download.java.net/maven/2/: tried
              http://download.java.net/maven/2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
        http://download.java.net/maven/2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar

        ==== mavenCentral: tried
              http://repo1.maven.org/maven2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.pom
              -- artifact org.springframework.security#org.springframework.security.core;3.0.4.RELEASE!org.springframework.security.core.jar:
              http://repo1.maven.org/maven2/org/springframework/security/org.springframework.security.core/3.0.4.RELEASE/org.springframework.security.core-3.0.4.RELEASE.jar

                ::::::::::::::::::::::::::::::::::::::::::::::
                ::          UNRESOLVED DEPENDENCIES         ::
                ::::::::::::::::::::::::::::::::::::::::::::::
                :: org.springframework.security#org.springframework.security.web;3.0.4.RELEASE: not found
                :: org.springframework.security#org.springframework.security.core;3.0.4.RELEASE: not found
                ::::::::::::::::::::::::::::::::::::::::::::::

        | Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

        - org.springframework.security:org.springframework.security.web:3.0.4.RELEASE
        - org.springframework.security:org.springframework.security.core:3.0.4.RELEASE 
```

这是我在 Buildconfig.groovy 中包含的内容：

```
 grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        // uncomment to disable ehcache
        // excludes 'ehcache'
    }
    log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    repositories {
        grailsRepo "http://grails.org/plugins"
        grailsPlugins()
        grailsHome()
        grailsCentral()

        mavenRepo "http://snapshots.repository.codehaus.org"
        mavenRepo "http://repository.codehaus.org"
        mavenRepo "http://repository.jboss.com/maven2/"
}
    }
    plugins {
        compile ":tomcat:2.1.3"
        compile ":spring-security-core:1.2.7.3" 
```

我猜春天的“安全核心取决于”“org.springframework.security.web 3.0.4.RELEASE”和“org.springframework.security.core 3.0.4.RELEASE”。我是否必须添加另一个插件或依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:47:39.660

尝试添加`mavenCentral()`到您的存储库列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:57:59.217

原来我有一个旧版本的项目，我的项目依赖于......

# java - Java Swing 按钮未出现在表单上

> ID：16084709
> 
> 赞同：0
> 
> 时间：2013-04-18T13:45:57.960
> 
> 标签：java, swing, layout-manager, absolutelayout

我的表单出现了一个按钮网格出现问题。该表单应该显示一个按钮网格，这些按钮将用作简单战舰游戏的平台。

这是播放器网格面板的代码

```
package view;

import java.util.ArrayList;
import java.util.List;

import javax.swing.JPanel;

public class PlayerPanel extends JPanel {

    private List<PositionButton> ButtonList;

    public PlayerPanel()
    {

        ButtonList = new ArrayList<PositionButton>();
        for(int i = 0;i < 10;i++)
            for(int j = 0;j < 10;j++)
            {
                ButtonList.add(new PositionButton(i,j));
            }
        while(ButtonList.iterator().hasNext())
        {
            this.add(ButtonList.iterator().next());
        }
        while(ButtonList.iterator().hasNext())
        {
            ButtonList.iterator().next().setVisible(true);
        }
    }

} 
```

这是实际表单的类：

```
package view;

import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class GameForm {

    private JFrame theFrame;
    private JPanel BoardPanel;
    private PlayerPanel p1Panel;
    private PlayerPanel p2Panel;

    public GameForm()
    {
        //set up the Frame
        theFrame = new JFrame();
        theFrame.setSize(new Dimension(800,500));
        theFrame.setVisible(true);
        theFrame.setResizable(false);
        theFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //set up the board panel
        BoardPanel = new JPanel();
        theFrame.add(this.BoardPanel);
        //set up the first players board
        p1Panel = new PlayerPanel();
        p1Panel.setLayout(new GridLayout(0,0));
        this.BoardPanel.add(p1Panel);
        p1Panel.setSize(new Dimension(400,250));
        //set up the second players boards
        p2Panel = new PlayerPanel();
        p2Panel.setLayout(new GridLayout(0,0));
        this.BoardPanel.add(p2Panel);
        p2Panel.setSize(new Dimension(400,250));

        BoardPanel.setVisible(true);
        p1Panel.setVisible(true);
        p2Panel.setVisible(true);
    }
} 
```

这是单个按钮的代码

```
package view;

import javax.swing.JButton;

public class PositionButton extends JButton {    

    private int x;
    private int y;      

    public PositionButton(int x, int y)
    {
        this.x = x;
        this.y = y;
        this.setVisible(true);
    }

    public int getX()
    {
        return this.x;
    }

    public int getY()
    {
        return this.y;  
    }               
} 
```

我正在努力找出为什么我的按钮没有出现。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:50:10.457

*   使用正确的[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)而不是[AbsoluteLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)并从代码计算定位

*   也需要`Insets`使用`AbsoluteLayout`

*   使用[Gridlayout(int, int, intGap, intGap)](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:07:10.363

代码的一个主要问题`PositionButton`是. 您似乎希望使用这些方法来确定 中按钮的坐标，但您必须将**它们**命名为其他名称。EG等`getX()``getY()``GridLayout`**`getXCoord()`**

 **尝试查看此 SSCCE 以获取提示。

```
import java.awt.*;
import javax.swing.*;
import java.util.ArrayList;

public class GameForm {

    private JFrame theFrame;
    private JPanel BoardPanel;
    private PlayerPanel p1Panel;
    private PlayerPanel p2Panel;

    public static void main(String[] args) {
        new GameForm();
    }

    public GameForm()
    {
        //set up the Frame
        theFrame = new JFrame();
        //set up the board panel
        BoardPanel = new JPanel(new BorderLayout());
        BoardPanel.setBackground(Color.BLUE);
        theFrame.add(this.BoardPanel);
        //set up the first players board
        p1Panel = new PlayerPanel();
        p1Panel.setBackground(Color.RED);
        this.BoardPanel.add(p1Panel);

        theFrame.setSize(new Dimension(800,500));
        theFrame.setVisible(true);
        theFrame.setResizable(false);
        theFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}

class PlayerPanel extends JPanel {

    private java.util.List<PositionButton> ButtonList;

    public PlayerPanel()
    {

        ButtonList = new ArrayList<PositionButton>();
        for(int i = 0;i < 10;i++)
            for(int j = 0;j < 10;j++)
            {
                PositionButton pb = new PositionButton(i,j);
                ButtonList.add(pb);
                add(pb);
            }
    }
}

class PositionButton extends JButton {

    private int x;
    private int y;

    public PositionButton(int x, int y)
    {
        this.x = x;
        this.y = y;
        this.setVisible(true);
    }

    public int getXCoord()
    {
        return this.x;
    }

    public int getYCoord()
    {
        return this.y;
    }
} 
```**

# java - Java EE 6 编程安全、glassfish 和 JDBC 领域

> ID：16084710
> 
> 赞同：3
> 
> 时间：2013-04-18T13:45:58.787
> 
> 标签：java, security, jakarta-ee, jdbc, glassfish

我正在探索基于我 glassfish 服务器的 jdbc 领域进行编程安全的纯 Java EE 方法，尤其是登录用户。

所以基本上，在我的登录 servlet 中，我正在做

```
String username = request.getParameter("username");
String password = request.getParameter("password");

try {
    request.login(username, password);
.... 
```

在我的 web.xml 中不做任何事情，使用默认领域（文件）。我不希望那样，我想使用我的 jdbcRealm，名为 jdbcsecurerealm。

所以我将以下内容添加到我的 web.xml

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>jdbcsecurerealm</realm-name>
</login-config> 
```

请注意，我没有添加任何 form-login-config 来定义 form-login-page 和 form-error-page。

然后，如果我定义安全约束，例如

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin Pages</web-resource-name>
        <description></description>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>administrator</role-name>
    </auth-constraint>
</security-constraint> 
```

嗯......它的工作原理！request.login 检查我的 jdbcRealm，如果我尝试在未登录的情况下访问安全页面，那么我会得到一个不错的 403。

但似乎我混合了声明性安全性和程序性安全性，因为我觉得我不应该在 web.xml 中声明任何内容，而应该使用 request.isUserInRole。

**问题**：

我是否遇到了 glassfish 特定的行为，或者是否允许在没有 form-login-config 的情况下使用在 web.xml 中定义的 jdbc 领域的编程安全性（request.login）？

**更新** 我刚刚看到有可能在 glassfish-application.xml 中指定一个领域，为了指定领域，建立一个耳朵而不是战争是一种更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:03:12.933

当您使用容器特定（专有）登录模块（例如 GlassFish JDBC 登录模块/领域）时，不可能采用可移植（纯 Java EE）方式的纯编程方法。

Java EE 6 中有一个 API：JASPIC。使用该 API（从技术上讲是 SPI），您可以构建可移植的身份验证模块并完全以编程方式配置它们，而无需任何声明。

我写了一篇关于此的[博客文章](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)，希望为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:09:23.347

Well, there are two aspects to security in web applications : Authentication and Authorization. What you are using here is programmatic *authentication* (the way users are logging in) and declarative *authorization* (defining what users are allowed to see). There is no issue in mixing both, in my opinion.

If you keep your realm in your `web.xml`, your application will be more portable. (meaning you can deploy your war in e.g. a tomcat server without changes).

# javascript - 从 javascript 文件调用 javascript 函数（在 ASPX 中）页面

> ID：16084712
> 
> 赞同：0
> 
> 时间：2013-04-18T13:46:03.557
> 
> 标签：javascript, asp.net

我有一个位于**Scripts/viewer.js**中的 javascript 文件 (viewer.js) 我的**default.aspx**有一个 javascript 函数，它在**default.aspx.cs**中调用 ac# 函数（它发送一个 http webrequest）

现在我想从 viewer.js 调用 default.aspx 中调用 c# 函数的函数。

如何在我的 viewer.js 中处理这个问题？

我需要这样做，因为我使用 3D 对象并且选择事件在 viewer.js 上

当我选择 3D 对象时，它需要调用 default.aspx 中的函数...

**脚本/viewer.js**

```
function ClickPickItem(item) {

        $("#properties").show();
        /*Call function App() */
    } 
```

**默认.aspx**

```
function App() {
     PageMethods.Connect(callback);
 } 
```

**默认.aspx.cs**

```
 [WebMethod]
        public static string Connect()
        {
            string rsp = DigestAuthFixer.GrabResponse("http://<username>:<password>@nextbus.mxdata.co.uk/nextbuses/1.0/1");
... CODE TO MAKE HTTPWEBREQUEST

} 
```

对不起，如果我不够清楚

我没有看到这样的其他选择

我需要做什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:50:07.467

假设`viewer.js`包含在`Default.aspx`的 html 中，声明后`App`：

```
<script type="text/javascript" src="Scripts/viewer.js"></script> 
```

您应该能够简单地调用该函数，假设它是在全局范围（或​​文档范围）内创建的。

```
function ClickPickItem(item) {

    $("#properties").show();
    App();
} 
```

# programming-languages - 有没有办法概括编程语言语法

> ID：16084721
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:46:19.210
> 
> 标签：programming-languages

我希望为代码分析开发独立于语言的工具。为了做到这一点，我需要找到一种方法来概括编程语言的语法。我想在源代码和分析器之间开发一个层，以便它可以独立于语言理解源代码。我需要知道这个问题是否有专门的研究领域？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:02:08.763

这实际上取决于您要进行的分析类型。如果您想以在源语言上下文中可解释的方式分析代码的“意图”，那么问题可能是不可能的，除非您将自己限制在特定的语言家族（例如 Java、C# 和 C++，但是即使是有限的）。如果您只对基本分析感兴趣，例如构建定义类型和方法/函数的模型，您可以获得更大的灵活性。

如果您对分析低级行为感兴趣，最好的选择可能是分析编译器早期阶段的输出。例如，有许多有用的分析类型，例如数据流分析，可以在 Java 字节码上完成，而与生成它的语言无关。可以对 LLVM 中间代码或 GCC 的中间语言进行类似的分析（事实上，这些编译器都在中间代码或汇编代码级别进行了很多优化，因此无论使用哪种语言都可以进行很多相同的优化正在编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:39:32.543

对于静态分析，您需要“通用”操作语义，这与语法完全无关。你很幸运——它确实存在，因为每一种实用的语言最终都会被翻译成实际硬件的语义。

因此，您的 CPU 的汇编程序正是您的“广义语义”。CPU 的操作语义是一个很好的研究课题，如果你深入研究，你会发现大量的论文。

LLVM 的级别足够低，可以涵盖大多数此类语义，同时比真实硬件更紧凑且更易于分析，因此您可以考虑使用类似的中间表示。SSA 表格可以显着简化分析。

但是不要太兴奋——在如此低的级别上进行任何*有用*的全局分析是非常困难的——通用内存模型将需要太多资源，从而使任何分析在现代硬件上都不现实。

如果您准备严格限制对源语言的选择，您可以更上一层楼，并采用更多可分析的语义。如果你想走这条路，你可能会发现[K 框架很有趣。](http://k-framework.org/index.php/Main_Page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:22:18.900

在我的研究小组中，人们一直在开发一个名为[Moose](http://www.moosetechnology.org/)的软件分析平台。因此，他们开发了[Famix](http://www.moosetechnology.org/docs/famix)模型来抽象特定语言的语法。从特定语言到语言无关模型有各种导入器。

在许多具有不同语法的面向对象编程语言中，您可以找到一些常见的结构，例如继承等。然而，不可能有一个独特的模型来捕捉所有语言的所有结构的语义——该模型捕捉到的语义许多语言共享的通用结构。

# transactions - 没有 MULTI 的 ERR EXEC - Jedis

> ID：16084723
> 
> 赞同：2
> 
> 时间：2013-04-18T13:46:21.073
> 
> 标签：transactions, redis, jedis

我正在学习绝地武士，我无法完全找出这段代码中的问题。谁能帮助我。异常发生在语句 tx.exec()

```
public class JedisFactory {

 public static void main (String [] args){
     JedisPool pool = new JedisPool(new JedisPoolConfig(), "127.0.0.1", 6379);
     Jedis jedis = pool.getResource();

     Pipeline pipeline = jedis.pipelined();
     for(int i=0; i < 1000 ; i++){
         pipeline.hincrBy("Id", i+"", i);
     }
     pipeline.exec();        
     pool.returnResource(jedis);

     jedis = pool.getResource();
     Transaction tx = jedis.multi();
     Response<Map<String,String>> map = tx.hgetAll("Id");
     tx.hincrBy("Id","2", 1);
     **tx.exec();**
     //Map<String,String> map1 = jedis.hgetAll("Id");

     pool.returnResource(jedis);
     pool.destroy();
 }
}
Exception in thread "main" redis.clients.jedis.exceptions.JedisDataException: ERR EXEC without MULTI
    at redis.clients.jedis.Protocol.processError(Protocol.java:54)
    at redis.clients.jedis.Protocol.process(Protocol.java:61)
    at redis.clients.jedis.Protocol.read(Protocol.java:122)
    at redis.clients.jedis.Connection.getAll(Connection.java:207)
    at redis.clients.jedis.BinaryTransaction.exec(BinaryTransaction.java:23)
    at com.work.JedisFactory.main(JedisFactory.java:30) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-05T06:06:07.420

`pipeline.exec();`你应该用`multi()`和`close()`方法包围。像这样：

```
pipeline.multi() ;
pipeline.exec();
pipeline.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:13:48.347

在 for 循环之前添加 pipeline.multi() 解决了这个问题。但是在修复之前在其他行引发了异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:18:39.213

我猜你应该使用 pipeline.execute() 而不是 pipeline.exec()，至少我是这样使用的，而且没问题。

# cuda - 到 CUDA 内核的对象参数的本地副本

> ID：16084724
> 
> 赞同：2
> 
> 时间：2013-04-18T13:46:21.497
> 
> 标签：cuda

我从[这个答案](https://stackoverflow.com/a/14857495/1613702)中了解到，CUDA 内核的参数是通过常量内存（用于计算能力 2.0 及更高版本）传递的，如果修改，它们将作为本地副本存储在寄存器或堆栈中。如果参数是一个对象并且只有它的一些成员被内核修改，会发生什么？整个对象必须存储在本地，还是只为修改后的成员创建副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:34:46.220

这是我之前没有考虑过的一个有趣的问题，答案似乎是只有结构中使用的成员被加载来注册（至少根据经验仅基于一个示例）。

考虑以下人为设计的示例：

```
struct parameters
{
    float w,x,y,z;
    int a,b,c,d;
};

__global__
void kernel(float *in, float *out, parameters p)
{
    unsigned int tid = threadIdx.x + blockIdx.x * blockDim.x;
    float val_in = in[tid];

    p.b += 10;
    p.w *= 2.0f;
    p.z /= 5.0f;

    out[tid] = (p.b>0) ? (p.w*val_in) : (p.z*val_in);
} 
```

如果编译器只加载所需的参数，我们应该只会看到三个 32 位参数从`p`寄存器加载。编译器（用于 sm_30 的 Cuda 5.0 版本编译器）发出的 PTX 如下所示：

```
//
// Generated by NVIDIA NVVM Compiler
// Compiler built on Sat Sep 22 02:35:14 2012 (1348274114)
// Cuda compilation tools, release 5.0, V0.2.1221
//

.version 3.1
.target sm_30
.address_size 64

    .file   1 "/tmp/tmpxft_00000b1a_00000000-9_parameters.cpp3.i"
    .file   2 "/home/talonmies/parameters.cu"
    .file   3 "/opt/cuda-5.0/bin/../include/device_functions.h"

.visible .entry _Z6kernelPfS_10parameters(
    .param .u64 _Z6kernelPfS_10parameters_param_0,
    .param .u64 _Z6kernelPfS_10parameters_param_1,
    .param .align 4 .b8 _Z6kernelPfS_10parameters_param_2[32]
)
{
    .reg .pred  %p<2>;
    .reg .s32   %r<9>;
    .reg .f32   %f<8>;
    .reg .s64   %rd<8>;

    ld.param.u64    %rd1, [_Z6kernelPfS_10parameters_param_0];
    ld.param.u64    %rd2, [_Z6kernelPfS_10parameters_param_1];
    ld.param.f32    %f1, [_Z6kernelPfS_10parameters_param_2+12];
    ld.param.f32    %f2, [_Z6kernelPfS_10parameters_param_2];
    ld.param.u32    %r1, [_Z6kernelPfS_10parameters_param_2+20];
    cvta.to.global.u64  %rd3, %rd2;

///home/talonmies/parameters.cu:11     unsigned int tid = threadIdx.x + blockIdx.x * blockDim.x;
    .loc 2 11 1
    mov.u32     %r2, %ntid.x;
    mov.u32     %r3, %ctaid.x;
    mov.u32     %r4, %tid.x;
    mad.lo.s32  %r5, %r2, %r3, %r4;
    cvta.to.global.u64  %rd4, %rd1;

///home/talonmies/parameters.cu:12     float val_in = in[tid];
    .loc 2 12 1
    mul.wide.u32    %rd5, %r5, 4;
    add.s64     %rd6, %rd4, %rd5;

///home/talonmies/parameters.cu:14     p.b += 10;
    .loc 2 14 1
    add.s32     %r6, %r1, 10;

///home/talonmies/parameters.cu:15     p.w *= 2.0f;
    .loc 2 15 1
    add.f32     %f3, %f2, %f2;

///opt/cuda-5.0/bin/../include/device_functions.h:2399   return a / b;
    .loc 3 2399 3
    div.rn.f32  %f4, %f1, 0f40A00000;

///home/talonmies/parameters.cu:18     out[tid] = (p.b>0) ? (p.w*val_in) : (p.z*val_in);
    .loc 2 18 1
    setp.gt.s32     %p1, %r6, 0;
    selp.f32    %f5, %f3, %f4, %p1;

///home/talonmies/parameters.cu:12     float val_in = in[tid];
    .loc 2 12 1
    ld.global.f32   %f6, [%rd6];

///home/talonmies/parameters.cu:18     out[tid] = (p.b>0) ? (p.w*val_in) : (p.z*val_in);
    .loc 2 18 1
    mul.f32     %f7, %f5, %f6;
    add.s64     %rd7, %rd3, %rd5;
    st.global.f32   [%rd7], %f7;

///home/talonmies/parameters.cu:19 }
    .loc 2 19 2
    ret;
} 
```

您可以看到只有`_Z6kernelPfS_10parameters_param_2`(which is `p.w`)、`_Z6kernelPfS_10parameters_param_2+12`(which is `p.z`) 和`_Z6kernelPfS_10parameters_param_2+20`(which is `p.b`) 被加载到寄存器中。该结构的其他成员永远不会被内核加载。

# php - php连接到postgresql

> ID：16084727
> 
> 赞同：0
> 
> 时间：2013-04-18T13:46:25.423
> 
> 标签：php, postgresql

```
$dbconn = pg_connect("host=localhost   dbname=mydbname   user=myuser    password=mypass") or die(pg_last_error()); 
```

返回`Unable to connect to PostgreSQL server: FATAL: no pg_hba.conf entry for host "::1 ...",`

我应该做什么？

PS In 文件`php.ini`模块`extension php_pgsql.dll`已启用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:59:35.960

[这](https://www.google.com/search?q=%22Unable+to+connect+to+PostgreSQL+server%3A+FATAL%3A+no+pg_hba.conf+entry+for+host+%3A%3A1%22&aq=f)或[这](https://stackoverflow.com/search?q=Unable%20to%20connect%20to%20PostgreSQL%20server%3A%20FATAL%3A%20no%20pg_hba.conf%20entry%20for%20host%20%3A%3A1)将帮助您确定问题的性质。

看起来您正在尝试通过 IPv6 进行连接（因此`::1`），并且主机`pg_hba.conf`没有允许您从 IPv6 环回地址（`::1`）作为用户`myuser`连接到数据库的规则`mypass`。

我怀疑服务器配置错误；要解决它，请尝试将主机指定为`127.0.0.1`（IPv4 环回地址）而不是`localhost`，或者如果 PHP 支持，则完全省略`host=`使用 unix 域套接字。

您的声明*“当使用 mysql（在远程服务器上）时，我们可以使用 host=localhost 作为主机值，对吗？”* 对于 MySQL 和 PostgreSQL 来说都是完全没有意义的。如果它是远程服务器，那么根据定义它不在本地主机上。在一个疯狂的猜测中，我认为您可能试图说服务器是远程的，因为它不是您正在使用的计算机，而是*您正在运行的程序的本地，*因为您正在远程服务器上运行程序（通过在远程服务器上编辑它，通过 FTP 上传程序文本，或其他方式）。

# python - 在 Windows 中安装 mlabwrap 时出错

> ID：16084730
> 
> 赞同：1
> 
> 时间：2013-04-18T13:46:28.837
> 
> 标签：python, mlabwrap

[我尝试按照本文](http://obasic.net/how-to-install-mlabwrap-on-windows)中的步骤在 Windows 中安装 mlabwrap 。完成所有步骤后，当我输入`from mlabwrap import mlab`Python 时，出现以下错误：

```
>>> from mlabwrap import mlab

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from mlabwrap import mlab
  File "C:\Python27\lib\site-packages\mlabwrap.py", line 188, in <module>
    import mlabraw
ImportError: DLL load failed: The specified module could not be found. 
```

我根据上面的链接设置了我所有的路径和环境变量。那么为什么我会收到这个错误呢？我执行的最后一步是来自 mlabwrap 目录，我输入了

```
python setup.py install 
```

这之后还有其他步骤吗？我看到它`mlabwrap.py`在`C:\Python27\lib\site-packages`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T17:49:45.047

我可以通过将 c:/Program Files (x86)/MATLAB/R2009b/bin/win32 放在 PATH 上来修复此错误，以便 mlabraw 可以找到 Matlab DLL。我认为此错误意味着无法加载 mlabraw，因为它依赖于无法找到的 DLL。

# php - MongoDB + PHP：删除子数组的值

> ID：16084736
> 
> 赞同：0
> 
> 时间：2013-04-18T13:46:45.967
> 
> 标签：php, mongodb, pull

我有一份格式如下的文件：

```
[uuid] => d030b8d1
[commentstrings] => Array (
    [0] => 1366220389#mac@test.org#test 1
    [1] => 1366220422#mac@test.org#test 2
    [2] => 1366220458#mac@test.org#test 3
) 
```

我有一个评论字符串的完整字符串，并且想要删除该值。

如果我在 CLI 上尝试这个，它可以工作：

```
 db.messages.update(
     {'uuid':'d030b8d1'}, 
     { $pull : {
         'commentstrings': '1366220422#mac@test.org#test 2'
     }} 
 ) 
```

但是，如果我在 PHP 中尝试相同的操作，则不会发生任何事情：

```
$response = $stdb->messages->update(
    array('uuid'=>'d030b8d1'),
    array('$pull' => array('commentstrings' => '1366220422#mac@test.org#test 2'))
); 
```

知道吗，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:16:41.037

我没有得到这种行为：

```
$mongodb->ghghghg->insert(array('uuid' => 'd030b8d1',
        'commentstrings' => Array (
            '1366220389#mac@test.org#test 1',
            '1366220422#mac@test.org#test 2',
            '1366220458#mac@test.org#test 3'
)));

var_dump($mongodb->ghghghg->findOne());

$response = $mongodb->ghghghg->update(
        array('uuid'=>'d030b8d1'),
        array('$pull' => array('commentstrings' => '1366220422#mac@test.org#test 2'))
);

var_dump($mongodb->ghghghg->findOne()); 
```

印刷：

```
array
  '_id' => 
    object(MongoId)[19]
      public '$id' => string '516ffff96803fa2261000000' (length=24)
  'uuid' => string 'd030b8d1' (length=8)
  'commentstrings' => 
    array
      0 => string '1366220389#mac@test.org#test 1' (length=30)
      1 => string '1366220422#mac@test.org#test 2' (length=30)
      2 => string '1366220458#mac@test.org#test 3' (length=30)

array
  '_id' => 
    object(MongoId)[18]
      public '$id' => string '516ffff96803fa2261000000' (length=24)
  'commentstrings' => 
    array
      0 => string '1366220389#mac@test.org#test 1' (length=30)
      1 => string '1366220458#mac@test.org#test 3' (length=30)
  'uuid' => string 'd030b8d1' (length=8) 
```

您使用的是什么版本的驱动程序以及您的 PHP 版本？

你也确定这`commentstrings`是一个数组吗？查看 MongoDB 控制台，而不是通过 PHP，看看它打印出来的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:50:33.920

试试这个

```
$response = $stdb->messages->update(array('uuid'=>'d030b8d1'),array('$pull' => array('commentstrings' => '1366220422\#mac\@test.org\#test 2'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:56:01.333

尝试

```
$data = array('$pull' => array('commentstrings' => '1366220422#mac@test.org#test 2'));
$response = $stdb->messages->update(array('uuid'=>'d030b8d1'), $data);
var_dump($response); 
```

什么回报？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:57:25.823

事实证明我的代码是正确的。这是变量中的错字。

# assembly - MIPS 汇编程序在接受整数输入后计算矩阵的迹线

> ID：16084740
> 
> 赞同：1
> 
> 时间：2013-04-18T13:46:53.337
> 
> 标签：assembly, matrix, mips, trace

以下是我的 MIPS 汇编代码，由于某种原因拒绝工作。有人请救救我，我已经被困了 3 周了！！！我应该读入一个 int n，对其进行平方，然后将 n(squared) 值读入一个矩阵，然后计算矩阵的迹线。我在堆栈上上下阅读，但在某个地方，我必须有一个我无法识别的简单逻辑错误。提前致谢：

```
.data                           #string variable declarations
get_int: .asciiz   "Please enter an int value n: "  #prompts user to enter a number
newline: .asciiz   "\n" 
.text 

.globl main 

main:   

addi $sp, $sp, -12                      #create a stack (stack frame..)
sw   $ra, 0($sp)                        #storage for stack elements
sw   $s0, 4($sp)      
sw   $s1, 8($sp)      
sw   $s2, 12($sp)               

li $v0, 5                       #Read input 
syscall
move $s0, $v0                       #$s0 = $v0 

mult $s0 $s0                            #square the entered int
mflo $t2
li $t0, $t2       #t0 receives the squared value from $t2

#adding stuff to the stack

li $t1, 0                       #t1 is our counter (i) 

stackloop:
beq $t1, $t0, endstackloop                  #exit loop when t1== $t0

li $v0, 5                       #Read input 
syscall
move $t5, $v0                       #$t5 = $v0 

addi $sp, $sp, -4
sw $t5, 0($sp)

addi $t1, $t1, 1                    #add 1 to t1
j stackloop                         #jump back to the top of loop

stackpop:

lw $t3, 0($sp)      #t3 = 1st value from stack 
add $s1, $s1, $t3   #adding that 1st value to sum
addi $sp, $sp, 4    #moving to the next stack element
sub $t1, $t1, 1     #decrementing counter by 1
add $t4, $t4, $0    #setting comparison value to 0

matrixcondition:
beq $t1, $0, output
lw $t3, 0($sp)
sub $t1, $t1, 1         #decrementing counter by 1
beq $s0, $t4, matrixtrace   #jump to matrixtrace when equal 
add $t4, $t4, 1         #add 1 to t4
j matrixcondition

matrixtrace:
add $s1, $s1, $t3   #adding that next value to sum
add $t4, $0, $0     #setting comparison value to 0
j matrixcondition

output:
li $v0, 4
syscall
j progterminate

progterminate:

lw $ra, 0($sp)                      #restoring the stack pointer

addi $sp, $sp, 8

jr $ra                          #return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:52:19.697

这些是我发现的错误：

1.  这个

    ```
    li $t0, $t2       #t0 receives the squared value from $t2 
    ```

    变成

    ```
    move $t0, $t2       #t0 receives the squared value from $t2 
    ```

2.  `endstackloop`不存在。

3.  这个

    ```
    add $t4, $t4, $0    #setting comparison value to 0 
    ```

    变成

    ```
    li $t4, 0    #setting comparison value to 0 
    ```

如果您提供更多关于哪些功能不起作用的信息，我们可以提供更好的帮助。

# docker - 如何使用 docker 设置分配给容器的资源？

> ID：16084741
> 
> 赞同：66
> 
> 时间：2013-04-18T13:46:55.090
> 
> 标签：docker

正如这个问题的标题所示，我想为使用 docker (docker.io) 的容器设置最大磁盘/内存和 cpu 使用率。

有没有办法只使用docker来做到这一点？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-08-06T06:22:44.950

**内存/CPU**

Docker 现在支持更多的资源分配选项：

*   CPU 份额，通过 -c 标志
*   内存限制，通过 -m 标志
*   特定的 CPU 内核，通过 --cpuset 标志

查看`docker run --help`更多详细信息。

如果使用 lxc 后端 ( `docker -d --exec-driver=lxc`)，可以指定更细粒度的资源分配方案，例如：

```
docker run --lxc-conf="lxc.cgroup.cpuset.cpus = 0,1"\
           --lxc-conf="lxc.cgroup.cpu.shares = 1234" 
```

**贮存**

目前限制存储有点棘手。请参阅以下链接了解更多详情：

*   [使用 Device Mapper 插件调整 Docker 容器的大小](http://jpetazzo.github.io/2014/01/29/docker-device-mapper-resize/)
*   [关于资源限制的问题？](https://github.com/docker/docker/issues/471)
*   [devicemapper - 基于 Device Mapper 的存储后端](https://github.com/snitm/docker/blob/master/daemon/graphdriver/devmapper/README.md)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-22T11:43:39.457

您现在可以使用 -c 选项为容器分配一定数量的 CPU 份额，如此处[所述](https://github.com/dotcloud/docker/pull/551)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T17:59:56.623

据我所知，您只能通过内存限制（即 5MB 限制：docker run -m=5242880 ...image）。但是来自 docker.io 的人计划增加 CPU 限制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-02T13:21:15.997

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-13T15:10:36.303

Just a note about `-m / --memory` --

If you are setting the memory limit but the container is not allocating the amount of memory you are trying to reserve, go into the preferences and adjust the memory being reserved to the docker app as a whole.

I ran into this 'problem' on OS X and wasn't sure why my container was being limited to ~2G when I was specifying `--memory=8g`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-23T12:46:51.760

看到这个要点：[https ://gist.github.com/afolarin/15d12a476e40c173bf5f](https://gist.github.com/afolarin/15d12a476e40c173bf5f)

1）你用--cpu-share='relative-number'给出cpus的相对份额

2）您现在可以对 cpus 施加硬性限制：

```
--cpuset=""
specify which cpus by numeric id, 0=first, n=nth cpu. specify by contiguous "1-5" or discontiguous "1,3,5" ranges. 
```

如果使用 LXC 而不是默认的 libcontainer，那么您还可以在以下位置指定：

```
--lxc-conf=[]              
(lxc exec-driver only) Add custom lxc options --lxc-conf="lxc.cgroup.cpuset.cpus = 0,1" 
```

内存：

```
-m, --memory=""            Memory limit (format: <number><optional unit>, where unit = b, k, m or g) 
```

# visual-studio-2012 - 从所有 C# 页面中删除“使用 System.Linq”语句

> ID：16084745
> 
> 赞同：0
> 
> 时间：2013-04-18T13:47:09.257
> 
> 标签：visual-studio-2012, using-directives

我在所有 c# 页面中都有这个源

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls; 
```

我想删除所有

> 使用 System.Linq；

一个解决方案中来自我现有 c# 页面的行。

我有

> 视觉工作室 2012 网页版

在这一行的每一页中不删除就可以做到这一点吗？

希望得到帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:51:20.433

`CRTL+F`, 选择查找并替换 然后输入`using System.Linq;`, 替换为空

选择当前项目或在您的情况下选择整个解决方案并继续

您将有空行，但这应该没问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:52:09.433

在打开正则表达式的情况下使用 Replace In Files 并替换`using System\.Linq;\n`为空。

# ruby - 这个红宝石代码有什么问题？

> ID：16084753
> 
> 赞同：0
> 
> 时间：2013-04-18T13:47:20.687
> 
> 标签：ruby

我收到“400 Bad Request”和“你忘记了 body 变量吗？” 代码：

```
require "rest-client"
require "json"

# This is the ID that you copied down in the last exercise
your_folder_id = "816582409"

# Add the "body" variable here
body = { "description" => "I made this on Codecademy!"
} 

response = RestClient.put(
"https://api.box.com/2.0/folders/#{816582409}",
JSON.generate(body),
:authorization => "Bearer" << "AKGEp7MoDfLAKnMyxTt3nSNtohXW3bt1"
)

JSON.parse(response.body)["description"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:00:26.950

api 调用的 url 不应该是`https://api.box.com/2.0/folders/816582409`or `"https://api.box.com/2.0/folders/#{@your_folder_id}"`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:34:55.153

`"https://api.box.com/2.0/folders/#{816582409}"``"https://api.box.com/2.0/folders/"` 由于字符串插值，计算结果为。正如 ararog 建议的那样，将变量本身放入：`#{@your_folder_id}`或纯数字，而不是`#{816582409}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:53:27.813

您在 Bearer 和废话之间缺少一个空格。你有类似的东西：

```
response = RestClient.put(
"https://api.box.com/2.0/folders/#{816582409}", 
JSON.generate(body),
:authorization => "Bearer " << "AKGEp7MoDfLAKnMyxTt3nSNtohXW3bt1"
) 
```

# dynamics-crm-2011 - 删除与特定实体有关的审计日志数据

> ID：16084756
> 
> 赞同：3
> 
> 时间：2013-04-18T13:47:32.787
> 
> 标签：dynamics-crm-2011, dynamics-crm

是否可以仅删除与特定实体有关的审计日志数据？我们有一个巨大的审计日志，我们希望通过清除特定实体的日志数据来减少它，尽管我们确实希望保留其他实体日志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:14:44.887

不支持按实体类型删除审计日志条目的方法。唯一支持审计删除的方法是按日期（即所有早于 X 日期的记录。） *注意：根据 SQL 环境，可用的结束日期可能限于审计日志分区的结束日期。*

也就是说，有一种不受支持的方法可以满足此要求。**关键：让您的 CRM 服务器脱机，备份数据库，并在尝试之前测试恢复 - 我将建议的内容不支持，因为这与 Dynamics CRM 2011 SQL 数据库上支持的操作相违背。**

审计日志存储在一个表中`dbo.AuditBase`。该表没有扩展库，因此每个审计条目只有一条记录需要担心。

您将需要`ObjectTypeCode`实体的 。您可以通过运行以下脚本从数据库中获取此信息：

`SELECT [EntityId],[Name],[ObjectTypeCode]
FROM [].[MetadataSchema].[Entity] ORDER BY Name`

现在您`ObjectTypeCode`只需将下面脚本中的 xxxx 替换为该值并运行脚本。

`DELETE FROM [].[dbo].[AuditBase] WHERE ObjectTypeCode = xxxx`

特定实体类型的审计记录现已消失！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:05:15.237

我知道这不是您要查找的内容，但是您可以调用[DeleteAuditDataRequest](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.deleteauditdatarequest.aspx) API 消息来删除特定日期之前的所有审计数据。

至于删除特定记录，我不相信你可以。如果您尝试以下代码，您将收到以下错误*“删除”方法不支持“审计”类型的实体*

```
orgService.Delete("audit",auditId); 
```

如果是本地环境，您可以直接访问数据库，并且可以归档审计记录或通过 SQL 删除它们。

希望有帮助。

# android - 没有位置价值？

> ID：16084758
> 
> 赞同：0
> 
> 时间：2013-04-18T13:47:33.510
> 
> 标签：android, json, facebook-graph-api, null

我将所有朋友的信息（例如姓名，位置等）作为图形对象作为响应，但是当我想从 json 获取位置时，它给了我任何位置的价值。请帮助我并告诉我我在哪里做错了？

```
 Bundle required = new Bundle();
                required.putString("fields", "id,name,picture,location,locale,gender,email");
                Request req = new Request(session, "me/friends", required,HttpMethod.GET,
                        new Callback() {

                            @Override
                            public void onCompleted(Response response){
                               GraphObject is=response.getGraphObject();  
                                // Log.w("FriendsList", is.toString());
                               String location="";
                                      if (is != null) {
                                          JSONObject jsonObject = is.getInnerJSONObject();

                                          try {

                                              JSONArray myfriendlist=new JSONArray();
                                           JSONArray array = jsonObject.getJSONArray("data");
                                           for (int i = 0; i < array.length(); i++) {

                                               JSONObject object = (JSONObject) array.get(i);
                                               JSONObject friendlist = new JSONObject();
                                                 JSONObject keyfriendlist = new JSONObject();

                                          JSONArray loc = jsonObject.getJSONArray("location");
                                          for(int j=0;j<loc.length();j++){
                                         location=object.get("id").toString();
                                          if(location==null||location==""||location=="null")
                                          {
                                              continue;
                                          }} 
```

LOGCAT

```
04-18 18:48:37.360: W/System.err(28862): org.json.JSONException: No value for location
04-18 18:48:37.365: W/System.err(28862):    at org.json.JSONObject.get(JSONObject.java:354)
04-18 18:48:37.365: W/System.err(28862):    at org.json.JSONObject.getJSONArray(JSONObject.java:544)
04-18 18:48:37.365: W/System.err(28862):    at com.example.socialize_us.MainFragment$2.onCompleted(MainFragment.java:106)
04-18 18:48:37.365: W/System.err(28862):    at com.facebook.Request$4.run(Request.java:1240)
04-18 18:48:37.365: W/System.err(28862):    at android.os.Handler.handleCallback(Handler.java:605)
04-18 18:48:37.365: W/System.err(28862):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 18:48:37.365: W/System.err(28862):    at android.os.Looper.loop(Looper.java:137)
04-18 18:48:37.365: W/System.err(28862):    at android.app.ActivityThread.main(ActivityThread.java:4666)
04-18 18:48:37.365: W/System.err(28862):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 18:48:37.366: W/System.err(28862):    at java.lang.reflect.Method.invoke(Method.java:511) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:20:04.733

```
org.json.JSONException: No value for location 
```

这个异常告诉 json 找不到 `location`TAG

请确保您的`JSON`字符串具有由`location`TAG包含的数组

```
 JSONArray loc = jsonObject.getJSONArray("location") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:43:02.013

“我/朋友”的图形 API 仅返回朋友的姓名和 fbid。但是您也在尝试读取它们的其他属性，这些属性在此调用中不可用。这将返回如下内容：

`{ "name": "Friend's NAme", "id": "545981122" },`

在这里[为我/朋友检查 Facebook Graph Api](http://developers.facebook.com/tools/explorer/?method=GET&path=me/friends)

要获取一位朋友的位置，您需要从上述调用中获取他的 id，然后获取该单身朋友的详细信息，例如：

> 我/朋友/545981122

其中 545981122 是朋友的 ID。

希望能帮助到你。

干杯！

# python - 给定条件下的联立方程

> ID：16084763
> 
> 赞同：0
> 
> 时间：2013-04-18T13:47:42.113
> 
> 标签：python, scipy

首先我已经解决了这个问题，所以这没什么大不了的，我只是要求满足我自己的好奇心。问题是如何在给定一组约束的情况下求解一系列联立方程。方程是：

```
tau = 62.4*d*0.0007
A = (b + 1.5*d)*d
P = b + 2*d*sqrt(1 + 1.5**2)
R = A/P
Q = (1.486/0.03)*A*(R**(2.0/3.0))*(0.0007**0.5) 
```

条件是：
tau <= 0.29，Q = 10000 +- 说 3，并最小化 b

正如我提到的，我已经能够使用一系列嵌套循环提出解决方案：

```
 b = linspace(320, 330, 1000)
    d = linspace(0.1, 6.6392, 1000)
    ansQ = []
    ansv = []
    anstau = []
    i_index = []
    j_index = []
    for i in range(len(b)):
        for j in range(len(d)):
            tau = 62.4*d[j]*0.0007
            A = (b[i] + 1.5*d[j])*d[j]
            P = b[i] + 2*d[j]*sqrt(1 + 1.5**2)
            R = A/P
            Q = (1.486/0.03)*A*(R**(2.0/3.0))*(0.0007**0.5)
            if Q >= 10000 and tau <= 0.29:
                ansQ.append(Q)
                ansv.append(Q/A)
                anstau.append(tau)
                i_index.append(i)
                j_index.append(j) 
```

这需要一段时间，我的脑海里有一些东西说必须有一个更简单/更优雅的解决方案来解决这个问题。谢谢（Linux Mint 13，Python 2.7.x，scipy 0.11.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:12:24.047

你在这里似乎只有两个自由度——你可以用`b`and `d`or`b`和`tau`or 重写所有东西（选择你最喜欢的两个）。您对`tau`的约束直接意味着对 的约束`d`，并且您可以使用对 的约束`Q`来暗示对 的约束`b`。

而且它看起来（至少对我来说，我还没有喝完咖啡）除了在你定义的网格上绘制一些二维函数之外，你的代码正在做任何事情——而不是求解方程组。我通常将“解决”理解为涉及设置与其他内容相等的内容，并将一个变量编写为另一个变量的函数。

不过，您似乎只发布了一个片段，所以我假设您对下游的数据做了其他事情。

* * *

好的我明白了。我认为这不是一个真正的最小化问题，而是一个绘图问题。`b`我要做的第一件事是`d`查看`tau`对`d`. 然后，您可以使用 meshgrid（如下所述）对这些点进行网格划分并遍历所有组合。

由于您在应用网格之前应用约束（而不是之后，如在您的代码中），您只会对您感兴趣的参数空间进行采样。在您的代码中，您会生成一堆垃圾' 没兴趣了，把宝石挑出来。如果您先应用约束，您将只剩下宝石！

我会定义我的函数，如：

```
P = lambda b, d: b + 2*d*np.sqrt(1 + 1.5**2) 
```

像

```
>>> import numpy as np
>>> P = lambda b, d: b + 2*d*np.sqrt(1 + 1.5**2)
>>> P(1,2)
8.2111025509279791 
```

然后，您可以编写另一个函数来为您服务`b`，`d`因此您可以执行以下操作：

```
def get_func_vals(b, d):
    pvals.append(P(b,d)) 
```

或者，更好的是，将`b`和`d`作为元组存储在一个不是`return`但`yield`s 的函数中：

```
pvals = [P(b,d) for (b,d) in thing_that_yields_b_and_d_tuples] 
```

我没有测试最后一行代码，我总是搞砸这些括号，但我认为它是对的。

# web-applications - window.crypto.getRandomValues() 的兼容性

> ID：16084766
> 
> 赞同：17
> 
> 时间：2013-04-16T02:46:22.277
> 
> 标签：web-applications, cryptography, javascript, random

我需要在 Javascript 中生成加密安全的伪随机数。我知道`window.crypto.getRandomValues`API，它完全符合我的要求。但是，我也知道它是最近才引入的（在 2011 年左右）。

我可以安全地假设`window.crypto.getRandomValues`它存在，还是会在某些浏览器上引入兼容性问题？是否有不支持的主要（广泛使用的）浏览器`window.crypto.getRandomValues`（包括移动或桌面浏览器），如果有，我需要担心哪些？如果确实是这样的话，我会很高兴得知有足够的支持让我不再需要担心[回退方法。](https://security.stackexchange.com/q/20029/971)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T08:47:34.433

> 我可以安全地假设 window.crypto.getRandomValues 存在吗

与往常一样，它取决于您的目标市场，并且会随着时间而改变。 [caniuse.com](http://caniuse.com/#feat=getrandomvalues)列出了哪些浏览器支持它并计算浏览器市场份额。

这是一个摘要：

*   IE 11：带前缀
*   IE Mobile 11：带前缀

*   火狐：21+

*   火狐手机：21+

*   野生动物园：从 6.1

*   Safari 移动版：7.1

*   铬：11+

*   移动版 Chrome：23 岁以上
*   安卓浏览器：4.4

*   歌剧：15+

*   Opera 移动版：36+
*   迷你歌剧：没有

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-11T12:10:34.200

要获得更完整、最新的视图，最好检查一下`caniuse.com`：

[http://caniuse.com/#feat=getrandomvalues](http://caniuse.com/#feat=getrandomvalues)

截至 2015 年 12 月，除 Opera Mini 之外的所有现代浏览器都支持它：

[![在此处输入图像描述](https://i.stack.imgur.com/gPKOK.png)](https://i.stack.imgur.com/gPKOK.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-16T09:02:49.913

```
const crypto = window.crypto ||
  window.msCrypto || {
    getRandomValues: array => {
      for (let i = 0, l = array.length; i < l; i++) {
        array[i] = Math.floor(Math.random() * 256);
      }
      return array;
    }
  };

  if (crypto.getRandomValues === undefined) {
    throw new Error("crypto is not supported on this browser");
  } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-09T09:17:31.383

Opera 是唯一不支持 window.crypto.getRandomValues 的，但它`math.random()`非常安全。

我为解决这个问题所做的只是检查 window.crypto 是否可用，如果不可用，则检查它是否是 Opera 浏览器，如果不是，则抛出一个错误，说明浏览器无法生成安全密码。

```
if(window.crypto && window.crypto.getRandomValues)
{
    (use window.crypto.getRandomValues)
}
else if(isOpera)
{
    (use Math.random)
}
else throw new Error("Your browser can not generate a secure Password, please change it to one that can (Google Chrome, IE, Firefox, Safari, Opera) or get the newest update."); 
```

# php - Facebook PHP API 搜索，先按好友排序

> ID：16084770
> 
> 赞同：0
> 
> 时间：2013-04-18T13:47:54.017
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 Facebook PHP API 搜索用户，如下所示：

```
$fb_friends = $this->facebook->api('/search?q=polo&type=user&fields=id,name,first_name,last_name,gender,location,picture.width(215)'); 
```

是否可以让返回的用户先按好友排序？如果没有，我如何使用 API ('/me/friends/') 检索我的朋友，但只能检索与我的查询字符串 'polo' 匹配的朋友？如果没有 FQL，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:03:23.690

FQL 是一种以您想要的方式获得结果的便捷方式。获取朋友然后按姓氏排序的示例如下：

```
$fql = "{\"q1\":\"SELECT uid2 FROM friend WHERE uid1=me()\",";
$fql .= "\"q2\":\"SELECT name, uid FROM user WHERE uid in (SELECT uid2 FROM #q1) ORDER BY last_name ASC\"}";
$fqlurl = "https://graph.facebook.com/fql?q=".urlencode($fql)."&access_token=".$fbtoken;
$fqr = file_get_contents($fqlurl);
$fq = json_decode($fqr, true);
$friends = $fq['data'][1]['fql_result_set']; 
```

如果您想了解有关 FQL 的更多信息，Facebook 的[FQL 文档是一个不错的起点。](http://developers.facebook.com/docs/technical-guides/fql/)虽然他们在解释查询语法方面做得很好，但他们的示例代码只是向你抛出了很多代码，虽然没有真正分解它，但我上面所说的确实是它的本质。让我知道这是否是您正在寻找的，如果您有任何问题:)

# .net - TFS 构建：引用与购买服务器上的不同版本的 Oracle

> ID：16084774
> 
> 赞同：1
> 
> 时间：2013-04-18T13:48:05.957
> 
> 标签：.net, tfs, tfsbuild, odp.net

简短的故事：使用 TFS 2010，我无法使用目标服务器上需要的特定版本的 Oracle.DataAcess 来构建构建服务器。

目前，我们为整个企业提供了一个构建服务器，其中包含 Oracle、.Net 和 OS 版本的混乱组合。我正在构建的项目是用于具有与构建服务器上的不同版本的 Oracle.DataAccess.dll 的服务器。如果我在本地机器上构建它并部署到开发服务器，它工作正常。但我似乎无法让构建服务器忽略它的客户端版本并使用我的。

我已经阅读了几个很好的问题和答案，例如 pantelif 回答的这个问题： [Solution.metaproj error MSB3202: The project file 'xxx' was not found](https://stackoverflow.com/questions/8592277/solution-metaproj-error-msb3202-the-project-file-xxx-was-not-found/8592448#8592448)

我认为我做的一切都是正确的。我什至在我的项目中包含一个 Ref 文件夹，并从那里直接引用 .dll。所以我不想从不同的位置引用 .dll。

如果我设置 Specific Version = false，我会收到一个运行时 Oracle 错误，告诉我 Oracle 客户端的版本是错误的。如果我手动将正确版本的 .dll 复制到 bin 文件夹中，我会收到运行时错误，指出程序集的目标是不同的版本。

如果我设置特定版本 = true，构建服务器会说它找不到 .dll

```
Class\ProvData.cs (7): The type or namespace name 'Oracle' could not be found (are you missing a using directive or an assembly reference?)
 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1360): Could not resolve this reference. Could not locate the assembly "Oracle.DataAccess, Version=1.102.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. 
```

当我查看我的项目文件时，我看到了我的期望：

```
<Reference Include="Oracle.DataAccess, Version=1.102.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342">
  <HintPath>Ref\Oracle.DataAccess.dll</HintPath>
  <Private>True</Private>
</Reference> 
```

那么关于为什么构建服务器仍然说它找不到它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:41:23.100

看来您的构建服务器与`Oracle.DataAccess`您的开发机器的版本不同。

你可以试试：

*   使用 lib 引用模式，您的项目引用特定源代码控制位置中的文件：

    ```
    <Reference Include="Oracle.DataAccess, Version=1.102.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342">
      <HintPath>..\..\Lib\ODP.NET\1.102.3.0\Oracle.DataAccess.dll</HintPath>
    </Reference> 
    ```

*   从其定义中删除 FQN，（允许 CLR 选择任何匹配的版本）：

    ```
    <Reference Include="Oracle.DataAccess" /> 
    ```

*   确保构建服务器具有相同的程序集版本，方法是使用 GAC 部署它[`gacutil /i`](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)：

    ```
    gacutil /i Oracle.DataAccess.dll 
    ```

# jqgrid - 排序列时JqGrid setCell属性丢失

> ID：16084779
> 
> 赞同：2
> 
> 时间：2013-04-18T13:48:21.217
> 
> 标签：jqgrid

在编辑一行（模式内联）后，我尝试根据新值更改单元格的一些 css 属性。

通常：编辑一行后，该行中包含字母“D”的所有单元格我使用新的 css 属性更新单元格：背景颜色：灰色（使用 setCell 方法）

为此，我使用内联编辑：

```
grid.jqGrid('navGrid',"#pager",{edit:false, add:false, del:false});
grid.jqGrid('inlineNav',"#pager",{edit:true, add:false, del:false, editParams: myEditParam}); 
```

为了在编辑后更改背景，我使用方法 aftersavefunc

```
myEditParam :
...
    aftersavefunc: function(rowId, dataFromServer)
    {
      var rowData = $("#list").jqGrid("getRowData", rowId);
      for (var key in rowData)
      {
        if (rowData[key] == "D")
        {
          key++;
          $("#list").jqGrid("setCell",rowId, key, "", {"background-color": "#ECECEC"}  );
        }
      }
    },
... 
```

这段代码有效，但不幸的是，当我对网格的一列进行排序时，setCell 方法没有被保留！（细胞失去了它的背景颜色：灰色）

在新值的功能中编辑后是否存在更好的更改背景的方法？

谢谢你的帮助；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:13:31.297

我建议从该事件中删除样式，而是将其移至下面更通用的功能。如果未应用样式，您始终可以在 jqGrid 上触发刷新，作为编辑后代码的一部分。

以下函数将检查每个列单元格值，如果 TestValue 匹配，则将类添加到行中。

```
 rowattr: function (rd) {
           if (rd.ColumnName == TestValue) { return {"class": "RowBoldClass"}; }//if
    }, 
```

和匹配的类

```
RowBoldClass { font-weight:bold; ..... 
```

我的回答[让一行加粗，改变背景颜色 - dwr](https://stackoverflow.com/questions/16059338/making-a-row-bold-changing-background-color-dwr/16060642#16060642)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:13:25.627

如果您确实需要更改值“D”的列中*单元格*`cellattr`的格式/颜色/样式，那么您应该使用（参见[答案](https://stackoverflow.com/a/6048865/315935)或[这个](https://stackoverflow.com/a/8022860/315935)）。

如果您需要更改行的格式/颜色/样式，*那么*您应该使用`rowattr`（见[答案](https://stackoverflow.com/a/10531680/315935)）。

有一点很重要：在行编辑结束时既不会调用`cellattr`也不会调用。`rowattr`所以你仍然必须使用`aftersavefunc`回调。

当前的代码`aftersavefunc`似乎让我有点奇怪。首先，我从来没有要求根据值（在您的情况下为“D”）在网格的*任何*列中标记值。通常，只需要测试*特定*列或列的值，然后标记单元格或标记行中的其他单元格。

无论如何，通常不仅需要在值为“D”的情况下添加类，而且如果值不是“D” ，则*删除该类。*

[我修改了答案](https://stackoverflow.com/a/6048865/315935)中的演示以支持内联编辑（应该使用双击开始编辑并按下`Enter`停止编辑）。**[修改后的demo](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithAddClassAndInlineEdit.htm)**使用了旧demo中`aftersavefunc`额外使用的以下代码：`cellattr`

```
aftersavefunc: function (rowId) {
    var closed = $(this).jqGrid("getCell", rowId, "closed"), indexOfColumn;
    if (closed === "Yes") {
        // add CSS classes to the cell used to mark
        $(this).jqGrid("setCell", rowId, "name", "",
           "ui-state-error ui-state-error-text");
    } else {
        // remove CSS classes from the cell used to mark
        indexOfColumn = getColumnIndexByName.call(this, "name");
        $(this.rows.namedItem(rowId).cells[indexOfColumn])
            .removeClass("ui-state-error ui-state-error-text");
    }
} 
```

# ios - How can I keep an UIimageView on top of other uiimageviews when using pan or other gestures

> ID：16084783
> 
> 赞同：0
> 
> 时间：2013-04-18T13:48:32.303
> 
> 标签：ios, uiimageview, gestures

I have a ViewController on which I can move multiple UIImageViews using gesture recognizers. it's working fine but the UIImageView selected is not on top of the others.

The UIImageViews keep the order of their creation so the last ones are always bellow the first ones.

Any advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:52:21.123

When you've selected your new `UIImageView` - from your `UIViewController` you should call:

```
[self.view bringSubviewToFront:imageView]; 
```

That should help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:52:51.853

You can use, `[superView bringSubviewToFront:touchedview];` for bringing the subview to the front

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:01:38.790

What you need to do it programmatically reorder them . You can do this in the following way

```
 -(void)bringTheDesiredImageViewInFront:(int))_tagForImageView
   {
       for(UIImageView *_subView in self.view.subviews)
        {
            if([_subView isKindOfClass:[UIImageView class]])
            {
                 UIImageView *temp=(UIImageView *)_subView;

                 if([temp tag]==_tagForImageView)
                      [self.view bringSubviewToFront:temp];
            }
            else
                continue;

        }
   } 
```

Call this method whenever the selector for any gestureRecognizer is called on any UIImageView . Also set the different tag values for different UIImageView . The above method could be called like this ,

```
 UIImageView *imageView=[[UIImageView alloc] init];
    [imageView setTag:1];

    [self bringTheDesiredImageViewInFront:imageView.tag] 
```

# php - tinymcs 中的 Jquery 文本问题

> ID：16084787
> 
> 赞同：3
> 
> 时间：2013-04-18T13:48:43.227
> 
> 标签：php, jquery, tinymce

我有一个简单的问题，我有一个文本区域，我在 jquery 中为其分配了文本。这是带有一些行空格等的纯文本。这里是一个文本示例

```
Brand new!!!

Huge size of 3 bedroom apartment located in Dubai Marina Orra tower for rent

Situated on high floor, overlooking a gorgeous view of Marina 
```

现在当我分配给textarea时，它和上面一样。这是我分配的代码

```
$("#description").val(val);//val is above text 
```

现在当我应用tinymce时，它变成了这样

```
Brand new!!! Huge size of 3 bedroom apartment located in Dubai Marina Orra tower for rent Situated on high floor, overlooking a gorgeous view of Marina 
```

空格线打破了一切丢失。这是我的tinymce代码

```
$().ready(function() {
    $('#description').tinymce({
        // Location of TinyMCE script
        script_url : 'application/views/tinymce/jscripts/tiny_mce/tiny_mce.js',
        // General options
        width : "830",
        height: "300",
        theme : "advanced",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_toolbar_location : "top",
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,bullist,numlist,",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        force_br_newlines : true,
        force_p_newlines : false,
        gecko_spellcheck : true,  
        forced_root_block : '', // Needed for 3.x

        plugins : "paste"

    });
}); 
```

为什么我的文字变形？[小提琴](http://jsfiddle.net/sVs7X/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T22:05:19.020

在您的 jsFiddle 中，您在 JQuery 之后附加了 tinyMCE。没用，我修好了 [http://jsfiddle.net/sVs7X/3/](http://jsfiddle.net/sVs7X/3/)

正如您在评论中看到的问题是正确的。你的麻烦的核心 -`\n`换行符`<br \>`转换。您可以自己替换它：

```
$("#description").val(val) 
```

对此：

```
$("#description").val( val.replace( /\n/, '<br />' ) ); 
```

# haskell - 通用 Trie Haskell 实现

> ID：16084788
> 
> 赞同：6
> 
> 时间：2013-04-18T13:48:47.470
> 
> 标签：haskell, package, trie

我需要在 Haskell 中实现一个通用的[Trie](http://en.wikipedia.org/wiki/Trie)实现，但我找不到。

我实现[了自己的功能](https://gist.github.com/josejuan/5412756)（这里只有键，我不需要 Trie 上的数据）但我想在 Haskell 中找到一个好的 Trie 实现以供将来使用（我是新手 Haskeller）。

我发现 Data.Trie 但键是 ByteString。

Data.Trie 是正确的选择吗？（然后我不知道如何使用它）

谢谢！！！:D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T16:33:07.573

查看[Hackage](http://hackage.haskell.org/package/MemoTrie)和[GitHub 上](https://github.com/conal/MemoTrie)的 MemoTrie 包。有关简单而优美的基础理论的背景，请参阅有关记忆化的 Haskell wiki[页面](http://www.haskell.org/haskellwiki/Memoization)，其中包括 Ralf Hinze 的两篇论文，我的一篇，以及[一些博客文章](http://conal.net/blog/tag/memoization/)。

另一个 trie/memoization 包是 functor-combo，也在[Hackage](http://hackage.haskell.org/package/functor-combo)和[GitHub 上](https://github.com/conal/functor-combo)。这个包体现了优雅记忆中描述的想法的实现，[*具有高阶类型*](http://conal.net/blog/posts/elegant-memoization-with-higher-order-types/)和其他博客文章。

其他一些相关的包：

*   Edward Kmett 的可[代表尝试](http://hackage.haskell.org/package/representable-tries-3.0.2)
*   Luke Palmer 的[数据记忆组合器](http://hackage.haskell.org/package/data-memocombinators)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T14:43:10.887

应要求从评论中移出...

我知道的唯一非常通用的 trie 实现[是`list-tries`package](http://hackage.haskell.org/package/list-tries)。它总是让我觉得有点过度设计，但一个人的“过于复杂”是另一个人的“功能齐全”，所以如果它适合你的目的，那就去吧。此外，该软件包似乎得到了积极的维护，这很好。

哦，由于包没有在我能看到的任何地方明确说明这一点：“Patricia trie”版本是一种将单分支节点序列压缩为存储公共密钥前缀的单个节点的 trie。所以对于键“aabb”和“aabc”，你会得到一个带有“aab”的节点，然后分支“b”和“c”。标准的 trie 总是一次分支一个元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T23:26:11.243

[http://hackage.haskell.org/package/TrieMap](http://hackage.haskell.org/package/TrieMap)是我当时的一些工作。我并不完全清楚您所说的“通用”是什么*意思*，但`TrieMap`支持或多或少的任意（递归，甚至！）代数数据类型，例如二叉树，作为特里键。

# c++ - 删除动态表时出现c ++分段错误

> ID：16084792
> 
> 赞同：0
> 
> 时间：2013-04-18T13:49:04.257
> 
> 标签：c++, class, pointers, constructor

每个人我都必须制作一个动态矩阵，这是我拥有的构造函数和析构函数：

```
Board::Board() {
    a_l=0;
    a_c=0;
    a_mp=NULL;
}
Board::Board(const Board&t) {
    a_l=t.a_l;
    a_c=t.a_c;
    a_mp=t.a_mp;
    Memory();
    copy(t);
}
Board::Board(int nl, int nc) {
    a_l=nl;
    a_c=nc;
    Memory();
}
Board::~Board() {
    freeMemory();
}

// PRIVATE METHODS

void Board::copy(const Board &t) {
    int a_l, a_c;
    int ** a_mp;
    a_l=t.a_l;
    a_c=t.a_c;
    for(int i=a_l;i<a_c;i++) {
        for(int j=a_c;j<a_l;j++) {
            a_mp[i][j]=t.a_mp[i][j];
        }
    }
}
void Board::freeMemory() {
    for(int i=0;i<a_l-1;i++) {
        delete [] a_mp[i];
    }
    delete [] a_mp;
}
void Board::Memory() {
    char ** a_mp;
    a_mp = new char*[a_l];
    for(int i =0;i<a_l; i++) {
        a_mp[i]=new char[a_c];
        for(int j=0;j<a_c;j++)
            a_mp[i][j]='-';
    }
} 
```

Board 是类，a_l 和 a_c 是矩阵的行数和列数。在我的主要声明中，我声明了一个 Board 变量，然后我这样做：

```
board=Board(5,5); 
```

它可以编译，但是当我想显示它时，例如：

```
cout << board.Cols() << endl; 
```

这是方法：

```
int Board::Cols() const {
    return (a_c);
} 
```

它显示为 0。好像它没有使用我说的参数创建板。当我这样做时程序也会崩溃，`board=Board(5,5);`所以我使用调试器，它说它在删除的这一行停止：

```
board=Board(5,5); 
```

我不知道它为什么会崩溃，也不知道为什么它不保留我声明的 board 变量的值！有谁知道为什么？

编辑：rMemory=Memory，它是这里的一种类型，而不是来自程序的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:52:59.960

```
int ** a_mp; 
```

需要公正`a_mp`。否则**，您将声明一个新变量**。而不是使用会员一。

然后它需要被分配到。现在不是。

* * *

```
void Board::copy(const Board &t) {
    int a_l, a_c;
    a_mp = new char[t.a_l][t.a_c];
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    // a_l=t.a_l; These have already be done in the copy constructor. 
    // a_c=t.a_c;
    for(int i=a_l;i<a_c;i++) {
        for(int j=a_c;j<a_l;j++) {
            a_mp[i][j]=t.a_mp[i][j];
        }
    }

} 
```

* * *

或者如果你愿意，你可以在复制构造函数中分配它

```
Board::Board(const Board&t) {
    a_l=t.a_l;
    a_c=t.a_c;
    // a_mp=t.a_mp;  // This is wrong!!
    a_mp = new char[t.a_l][t.a_c];
    copy(t);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:06:16.603

首先，这个任务

```
board=Board(5,5); 
```

过于复杂。你可以声明

```
Board board(5,5); 
```

直接（额外的工作可能会被优化，但它是不习惯的）。

* * *

其次，无论你在哪里做类似的事情：

```
void Board::copy(const Board &t) {
    int a_l, a_c;
    int ** a_mp; 
```

您正在*隐藏*对象的成员变量。也就是说，`a_l`现在指的是这个函数内部的局部整数变量，而不是对象成员。`this->a_l`如果要查看或更改对象，则必须参考。

* * *

现在，复制构造函数

```
Board::Board(const Board&t) {
    a_l=t.a_l;
    a_c=t.a_c;
    a_mp=t.a_mp;
    Memory();
    copy(t);
} 
```

做：

1.  *浅*拷贝（它`a_mp`与您正在复制的对象共享指针）
2.  `Memory`分配*新*内存块的调用，仅称为`a_mp`inside `Memory`，然后泄漏（当该局部变量超出范围时）
3.  调用`copy`，它将原始对象的值复制到一个*未初始化*的本地指针中，也称为`a_mp`（这是未定义的行为，因为这些写入可以去任何地方）
4.  最终得到`a_mp`它首先选择的值，所以现在*两个* `Board`实例具有相同的`a_mp`值，它将被释放两次。

* * *

下面是一些解决这些问题的示例代码： 我已经尽可能少地更改了代码的结构（为了便于阅读而重命名事物）。有很大的改进空间，但至少应该是正确的。

```
class Board {
    int rows;
    int cols;
    char **data;
public:
    Board(): rows(0), cols(0), data(0) {}
    Board(int nl, int nc) : rows(nl), cols(nc) 
    {
        allocate_data();
    }
    Board(const Board& other)
        : rows(other.rows), cols(other.cols)
    {
        allocate_data();
        copy_data(other);
    }
    ~Board() {
        free_data();
    }
private:
    void copy_data(const Board &other) {
        for(int r=0; r<rows; r++)
            for(int c=0; c<cols; c++)
                data[r][c]=t.data[r][c];
    }
    void free_data() {
        for(int r=0; r<rows; r++)
            delete [] data[r];
        delete [] data;
    }
    void allocate_data() {
        data = new char*[rows];
        for(int r=0; r<rows; r++) {
            data[r]=new char[cols];
            for(int c=0; c<cols; c++)
                data[r][c]='-';
        }
    }
}; 
```

请注意，如果您*只*使用复制构造函数，这可以正常工作，但默认生成的赋值运算符仍然是错误的。正如 Daniel Weber 在评论中指出的那样，[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)建议你也应该这样写：

```
 Board& operator=(const Board& other) {
        free_data();
        rows = other.rows;
        cols = other.cols;
        allocate_data();
        copy_data(other);
    } 
```

请注意，复制赋值运算符需要处理已经初始化的目标对象，并且可能没有正确的维度。`other`如果新的 ( ) 板更大，您可以改进它以仅重新分配。

如果您有 C++11 支持，您还可以添加复制构造函数和赋值运算符的*移动等效项：*

```
 Board(Board&& original)
        : rows(original.rows), cols(original.cols)
    {
        data = original.data;
        original.data = NULL;
    }
    Board& operator=(Board&& original) {
        free_data();
        rows = original.rows;
        cols = original.cols;
        data = original.data;
        original.data = NULL;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:01:50.920

`for(int i=0;i<a_l-1;i++)`in`freeMemory`从`i=0`to运行`i=3`，这是最后一个 i 即 < `5-1`。您缺少一行，因为您的分配 Loop 运行是`for(int i =0;i<a_l; i++)`，因此从`i=0`to运行`i=4`。你再分配一条线。

另一件事是：copy() 是做什么的？您将 t.a_l 和 t.a_c 的值复制到临时变量，一旦复制结束，这些临时变量就会被删除，并将值分配给未分配的内存（临时 **a_mp）。删除此函数中的声明和赋值，只保留 a_mp 数据副本。

```
void Board::copy(Board const &t) {
    for(int i=a_l;i<a_c;i++) {
        for(int j=a_c;j<a_l;j++) {
            a_mp[i][j]=t.a_mp[i][j];
        }
    }
} 
```

我做了什么：

*   删除 a_mp 中的声明`Memory()`
*   添加赋值运算符 ->[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)
*   检查 freeMemory() 函数中的 NULL 指针

看起来像这样：

```
class Board
{
public:
  int a_l, a_c;
  char ** a_mp;

  Board() : a_l(0), a_c(0), a_mp(NULL) 
  {
  }
  Board(const Board&t) : a_l(t.a_l), a_c(t.a_c), a_mp(NULL) 
  {
    Memory();
    copy(t);
  }
  Board(int nl, int nc) : a_l(nl), a_c(nc), a_mp(NULL) 
  {
    Memory();
  }

  Board& operator= (Board const &t)
  {
    freeMemory();
    a_l = t.a_l;
    a_c = t.a_c;
    Memory();
    copy(t);
    return *this;
  }

  Board::~Board() 
  {
    freeMemory();
  }

  // PRIVATE METHODS

  void copy(const Board &t) 
  {
    for(int i=a_l;i<a_c;i++) 
    {
      for(int j=a_c;j<a_l;j++) 
      {
        a_mp[i][j]=t.a_mp[i][j];
      }
    }
  }
  void freeMemory() 
  {
    if (a_mp == NULL)
    {
      for(int i=0;i<a_l;i++) 
      {
        delete [] a_mp[i];
      }
      delete [] a_mp;
    }
  }
  void Memory() {
    a_mp = new char*[a_l];
    for(int i =0;i<a_l; i++) 
    {
      a_mp[i]=new char[a_c];
      for(int j=0;j<a_c;j++) a_mp[i][j] = '-';
    }
  }

  int Cols() const 
  {
    return (a_c);
  }

}; 
```

作品。

```
Board testboard;
testboard = Board(5,5);
cout << "Cols are: " << testboard.Cols() << endl; 
```

打印：“列数：5”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T14:02:29.133

```
void Board::Memory() {
    char ** a_mp;
    a_mp = new char*[a_l];
    for(int i =0;i<a_l; i++) {
        a_mp[i]=new char[a_c];
        for(int j=0;j<a_c;j++)
            a_mp[i][j]='-';
    }
} 
```

您在堆栈上声明了一个名为 a_mp 的局部变量。该指针指向堆上所有已分配的内存。然后它在对 Memory() 的调用结束时超出范围。现在您无法访问您刚刚分配的任何内存。这真是难过;这真是伤心。a_mp 应该是一个成员变量，以便在 Memory 完成后您仍然可以引用您的数据。这样你的析构函数就知道要释放什么内存。

即删除这一行：`char ** a_mp;`

# linux - 使用内核模块的 SBC 6845 板上的 USB 主机和设备功能

> ID：16084798
> 
> 赞同：0
> 
> 时间：2013-04-18T13:49:22.580
> 
> 标签：linux, linux-kernel, usb

我正在 Linux 嵌入式开发中使用 SBC 6845（Atmel 处理器）。我的内核版本是 2.6.30。

该板带有 2 个 USB 端口（*均为 A 型）*，一个可配置为主机，另一个可配置为 USB 设备。

我已经在内核中配置了这些 USB 模块。我已经用包括 USB 模块在内的必要模块烧录了内核和文件系统。我已经通过 /init.d/rcS 文件加载了这些 USB 模块。

当板子打开并且我在控制台上输入 lsmod 时，它会显示这些模块已加载。当我将板连接到计算机时，未检测到 USB（设备功能）。
当我将 pendrive 连接到板时，未检测到它（主机功能）。

**/init.d/rcS 脚本**

```
#install USB Gadgate mass_storage
modprobe g_file_storage file=/home/mass_storage/backed_storage_file stall=n
losetup -o 4096 /dev/loop0 /home/mass_storage/backed_storage_file

#install USB ehci-hcd
modprobe ehci-hcd 
```

**rcS运行日志**

```
g_file_storage gadget: File-backed Storage Gadget, version: 20 November 2008
g_file_storage gadget: Number of LUNs=1
g_file_storage gadget-lun0: ro=0, file: /home/mass_storage/backed_storage_file
ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
atmel-ehci atmel-ehci: Atmel EHCI UHP HS
atmel-ehci atmel-ehci: new USB bus registered, assigned bus number 1
atmel-ehci atmel-ehci: irq 22, io mem 0x00800000
atmel-ehci atmel-ehci: USB 2.0 started, EHCI 1.00
usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1
usb usb1: Product: Atmel EHCI UHP HS
usb usb1: Manufacturer: Linux 2.6.30 ehci_hcd
usb usb1: SerialNumber: atmel-ehci
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected 
```

**lsmod 输出**

```
Module                  Size  Used by    Not tainted
ehci_hcd               30132  0
g_file_storage         24260  0 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:14:36.053

您的驱动程序似乎安装得很好。我没有直接的答案，但我经常使用软硬件集成。这是我会做的以获得更多线索。这种处理器通常具有多用途的引脚。有时，在评估板上，默认情况下它们没有按照我们想要的方式进行配置。您可以查看文档，也可以使用示波器探测 USB 的 D+ 和 D-。他们在空闲时还好吗？当您在主机端口上连接设备时会发生什么？前几件事将由 USB 控制器完成，并且在配置控制器后几乎不需要与软件交互。如果您看到协商的开始（一堆 0 和 1），那么您就知道您的硬件配置正确，并且您的基本驱动程序已安装并正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T06:17:03.580

您缺少上层驱动程序。EHCI 只是一个接口驱动程序，您需要在它之上的设备驱动程序。Board<-->PC 通信通常通过 USB 上的串口完成，因此您需要 USB 串口驱动程序。在内核配置中，转到*设备驱动程序 -> USB 支持 -> USB 串行转换器支持*，然后根据您的板/电缆上的芯片选择驱动程序。这是当板连接到 Ubuntu 笔记本电脑时看到的示例*dmesg转储：*

> [3469.923779] USB 2-1.2：使用 ehci_hcd 的新全速 USB 设备编号 5
> 
> [3470.019145]cp210x 2-1.2:1.0：检测到cp210x转换器
> 
> [3470.091614]usb 2-1.2：使用 ehci_hcd 重置全速 USB 设备号 5
> 
> [3470.184995] USB 2-1.2：cp210x 转换器现在连接到 ttyUSB0

我相信 pendrive 也有类似的情况——缺少上层驱动程序。

# c# - 重写操作系统查询方法以变得可测试

> ID：16084803
> 
> 赞同：2
> 
> 时间：2013-04-18T13:49:26.863
> 
> 标签：c#, unit-testing, testability

我正在检查我们应用程序的单元测试并改进/添加更多单元测试。我在单元测试/测试驱动开发方面相当（*不，非常*）新手，我找到了我想测试的以下方法。我被卡住了，我的问题是是否有办法重写它以使其可测试？

```
public static bool Is32BitOS()
{
        string os = (from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>()
                     select x.GetPropertyValue("Caption")).First().ToString().Trim();

        if (os.Equals("Microsoft Windows XP Professional"))
        {
            return true;
        }

        if (os.StartsWith("Microsoft Windows 7"))
        {
            string architecture = (from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>()
                                   select x.GetPropertyValue("OSArchitecture")).First().ToString();
            if (architecture == "64-bit")
            {
                return false;
            }
        }

        return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T11:18:47.377

您的方法有 3 个职责：

1.  管理对象搜索器创建
2.  操作系统和架构检索
3.  操作系统验证

为了启用测试，我会在 AssemblyInfo.cs 中添加与此类似的行：

```
[assembly: InternalsVisibleTo("Your.Test.Project")] 
```

这样受保护的方法将对测试项目可见，但不能免费提供给客户。然后我会重写你的方法，以便分离操作系统验证：

```
//Acceptance test this method
public static bool Is32BitOS()
{
    var managementObjects = new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>();

    string os = (from x in managementObjects select x.GetPropertyValue("Caption")).First().ToString().Trim();
    string architecture = (from x in managementObjects select x.GetPropertyValue("OSArchitecture")).First().ToString();

    return Is32BitOS(os, architecture);
}

//Unit test this method
internal static bool Is32BitOS(string os, string architecture)
{
    if (os.Equals("Microsoft Windows XP Professional"))
    {
        return true;
    }

    if (os.StartsWith("Microsoft Windows 7"))
    {
        string architecture = archRetriever();
        if (architecture == "64-bit")
        {
            return false;
        }
    }
    return true;
} 
```

既然我们已经分离了关注点，我想说您的单元测试应该只验证 Is32BitOs 行为，而验收测试应该验证端到端堆栈。实际上，您在单元测试中没有什么价值

```
(from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>()
 select x.GetPropertyValue("Caption")).First().ToString().Trim(); 
```

检索 os 字符串，而您的实际值驻留在此信息的使用中以确定 Os 是否为 32 位。

将事物包装在接口中并使用模拟框架的另一种方法是在[此处应用函数式编程外观，以了解 Llewellyn Falco 的剥离和切片技术](http://www.youtube.com/watch?v=sXqRWXWiXYo)，并[在此处应用 Arlo Belshee 的无模拟方法](http://arlobelshee.com/post/the-no-mocks-book)。因此，而不是像这样的方法：

```
public static bool Is32BitOS(IRetrieveOsAndArchitecture roa)
{   
    string os = roa.GetOs();                
    string architecture = roa.GetArchitecure();

    return Is32BitOS(os, architecture);
} 
```

你可以使用类似的东西：

```
public static bool Is32BitOS(Func<ManagementObjectSearcher, string> osRetriever, 
                             Func<ManagementObjectSearcher, string> archRetriever, 
                             ManagementObjectSearcher searcher)
{   
    string os = osRetriever(searcher);              
    string architecture = archRetriever(searcher);

    return Is32BitOS(os, architecture);
} 
```

它的客户端方法将是：

```
public static bool Is32BitOS()
{
    var searcher = new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem");

    return Is32Bit((s)=>{ (from x in s.Get().OfType<ManagementObject>() select x.GetPropertyValue("Caption")).First().ToString().Trim()},
                   (s)=>{ (from x in s.Get().OfType<ManagementObject>() select x.GetPropertyValue("OSArchitecture")).First().ToString();},
                   searcher);
} 
```

请注意，在测试接口和功能的案例时，您并没有使用真正的 ManagementObjectSearcher 外部依赖项；在 mockist 方法中，您将在函数式编程中使用模拟对象，您将传入一个不同的 lambda 表达式，该表达式应该只返回 os 和架构字符串。

这个方法还有一个责任，就是创建 ManagementObjectSearcher；要解决此依赖关系，您可以：

1.  将其作为方法的参数传递
2.  使其成为您班级在施工时启动的领域

# linux - 在 Linux 中删除选定 60 天前的文件的脚本

> ID：16084806
> 
> 赞同：0
> 
> 时间：2013-04-18T13:49:32.593
> 
> 标签：linux, file, directory

我需要从我们不断增长的 linux 服务器中删除 60 天以上的文件。每个月都有一个文件夹，文件存储在其中。我只想从所有每月文件夹中删除文件，除了 12 月文件夹（命名为 2012_12）。我应该在脚本中放置什么条件才能在所有文件夹中找不到文件，例如 '%_12' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:53:22.560

```
find /path/ -name '*_12' -prune -o -type f -mtime +59 -delete 
```

# java - 如何在绘画中更改颜色（图表）

> ID：16084808
> 
> 赞同：1
> 
> 时间：2013-04-18T13:49:35.383
> 
> 标签：java, swing, graphics, 2d, paint

我在 JPanel 中有一个用于绘制的代码，但我不知道如何在 paint() 方法之外更改颜色

我给代码：

```
public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(Color.RED);
        for (Shape linea : lineas) { // dibuja todos las elipses
            g2.draw(linea);
        }
    } 
```

我只知道使用该方法更改颜色，`g2.setColor(Color.RED);` 但我想在 MenuItem 的 actionListener 中更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:04:10.423

只需`Color`在您的类中添加一个变量并使用该变量来设置您的 `Graphics`. 总是建议重写`paintComponent`而不是`paint`调用- 方法也更合适。`super`

请参阅这个随机设置面板颜色的示例。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestColoredPanel {

    private static class ColoredPanel extends JPanel {

        private Color color = Color.RED;

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(getColor());
            g.fillRect(0, 0, getWidth(), getHeight());
        }

        public Color getColor() {
            return color;
        }

        public void setColor(Color color) {
            this.color = color;
            repaint();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 200);
        }

    }

    protected void initUI() {
        final JFrame frame = new JFrame(TestColoredPanel.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final ColoredPanel panel = new ColoredPanel();
        frame.add(panel);
        JButton button = new JButton("Click me");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Random r = new Random();
                panel.setColor(new Color(r.nextInt(256), r.nextInt(256), r.nextInt(256)));
            }
        });
        frame.add(button, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestColoredPanel().initUI();
            }
        });
    }
} 
```

# c - 指针和多维数组

> ID：16084809
> 
> 赞同：1
> 
> 时间：2013-04-18T13:49:37.893
> 
> 标签：c, pointers, memory-management

我想要一个包含`k`2 元素整数数组的数组。我的代码：

```
int **pipe_fd_ptr;
pipe_fd_ptr = malloc(k*sizeof(int*));
for(i = 0; i < k; i++)
{
    pipe_fd_ptr = malloc(2*sizeof(int));
}

// this is just for testing
for(i = 0; i<k; i++)
{
    for(j=0;j<2;j++)
        pipe_fd_ptr[i][j] =j;
} 
```

我得到段错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:50:37.853

应该

```
for(i = 0; i < k; i++)
{
    pipe_fd_ptr[ i ] = malloc(2*sizeof(int));
} 
```

为 k 指向 int 的指针分配空间，`pipe_fd_ptr = malloc(k*sizeof(int*));`然后遍历数组并为每个指针分配内存`pipe_fd_ptr[ i ] = malloc(2*sizeof(int));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:50:27.780

```
for(i = 0; i < k; i++)
{
    pipe_fd_ptr[i] = malloc(2*sizeof(int));
} 
```

# c - postgres 如何获取 char varchar 和 text 数据类型的列大小

> ID：16084818
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:05.150
> 
> 标签：c, postgresql

我正在尝试使用 postgres C api 函数从查询中获取列大小。

```
CREATE TABLE char_length_test (c char(3), vc varchar(5), t text) 
```

例如我有这个查询：

```
SELECT c, vc, repeat(c, 1), t from char_length_test 
```

我得到了正确的类型，但我不知道如何获得列大小。我试过使用`PQfsize`and `PQgetlength`。

*   `PQfsize`return `-1`，这意味着根据 postgres 文档的可变大小，而我需要列大小。
*   `PQgetlength`返回`0`，这很好，因为表不包含任何数据，尽管它不是列大小。

我期望获得 , 'vc' 的长度`3`和`c`函数`5`的大值`repeat(c, 1)`和`t`

老实说，我期待的功能类似于`mysql_fetch_fields`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:02:17.900

我认为您正在寻找[PQfmod](http://www.postgresql.org/docs/9.2/static/libpq-exec.html#LIBPQ-PQFMOD)。

> 修饰符值的解释是特定于类型的；它们通常表示精度或大小限制。值 -1 用于表示“无可用信息”。大多数数据类型不使用修饰符，在这种情况下，值始终为 -1。

# c# - EPIServer CMS 网络服务

> ID：16084824
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:17.883
> 
> 标签：c#, .net, web-services, episerver, episerver-6

我正在尝试使用 EPIServer Webservice ContentChannelService.asmx 将文件导入页面上的特定属性。

我以编程方式创建页面，之后我想使用 web 服务来填充“linktoimage”属性。现在我已经成功地将文件上传到文件系统的根目录，但正如您所知，我想将它连接到页面的属性。

我该怎么做呢？（我有页面的 id，所以我可以获取页面）非常欢迎提示、技巧或解决方案！

谢谢！

编辑我也愿意使用 PageMirroringService.asmx 和 PageStoreService.asmx 只是不知道如何使用它们来使其按我想要的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:37:46.213

您将需要创建一个内容频道。

[这篇](http://world.episerver.com/Blogs/Jeff-Wallace/Dates/2010/3/Pushing-Data-into-EPiServer-CMS-5-via-Content-Channels/)文章可能对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:58:54.860

我使用方法 ImoprtFile2() 解决了它，然后使用返回的字符串来设置 iamge 属性的属性值。它没有很好的记录，所以感觉就像你必须尝试和错误，直到你得到你想要的。

# mysql - prestashop 移至新服务器回落至 localhost

> ID：16084825
> 
> 赞同：1
> 
> 时间：2013-04-18T13:50:19.827
> 
> 标签：mysql, localhost, move, prestashop

当我尝试将我的网站 prestashop 网站移动到新服务器时，当我尝试进入它时，它会将我放到 localhost。还需要做什么？我做了这些步骤：

1.  通过 FTP 将所有文件上传到新主机
2.  使用 phpMyAdmin 实用程序导入数据库
3.  在数据库上，我们需要打开 ps_configuration 表并编辑以下行： PS_SHOP_DOMAIN 和 PS_SHOP_DOMAIN_SSL 我们将当前域 www.olddomain.com 替换为新域 www.newdomain.com
4.  最后，我们必须编辑 config 文件夹中的 settings.inc.php 文件并更改数据库名称 _DB_NAME_、用户 _DB_USER_ 和密码的值：_DB_PASSWD_ 就是这样，您只需要检查 .htaccess 文件权限（777），所有这些都应该正常工作！

但它不能正常工作：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-05T02:27:24.747

1.  登录到您要移动的域上的 PrestaShop 管理面板 (olddomain.com)

2.  导航至首选项 -> 维护并将您的商店置于维护模式，以避免在移动数据时丢失新客户或订单。

3.  导航到 Preferences -> SEO & URLs 并向下滚动到 Set shop URL 部分。请将 Shop 域和 SSL 域更改为您的新域 (newdomain.com)。如果新域上的基本 URI 不同，请更新它。

4.  将所有 PrestaShop 文件和文件夹下载到您的计算机。

5.  登录到您的 phpMyAdmin 并创建您用于 PrestaShop 的数据库的备份/转储。

6.  在您的新域 (newdomain.com) 上创建数据库并从您的 (olddomain.com) 导入数据库备份/转储

7.  编辑您已下载到计算机的 /config/settings.inc.php 文件。您应该在此处更新新数据库服务器的设置（使用您自己的设置而不是此处的示例）：

    定义（'_DB_SERVER_'，'your.sqlhost.name.com'）；定义（'_DB_NAME_'，'database_name'）；定义（'_DB_USER_'，'database_user'）；定义（'_DB_PASSWD_'，'database_pswd'）；

8.  通过 FTP 将所有 PrestaShop 文件和文件夹上传到您的新域 (newdomain.com)。

9.  删除新域 (newdomain.com) 上 /cache/smarty/compile 和 /cache/smarty/cache 文件夹中除 index.php 之外的所有文件

10.  登录新域 (newdomain.com) 上的 PrestaShop 管理面板并检查它是否正常工作。

11.  在您的 PrestaShop 管理面板中导航到 Preferences -> Maintenance 并将您的网站上线。

12.  检查所有链接是否正常工作，所有产品、图像、模块和主题是否仍然存在，并尝试创建一个新帐户并下订单以确保您的商店按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T13:12:18.300

您还需要`www.yournewdomain.com` 通过新的 domaine 更改 ps_shop url、域的值并更改域 ssl `www.yournewdomain.com`。如果您将您的网站放在子域中，那么也要编写物理 uri `www.yournewdomain.com/name-of-your-suddomain-prestashop`。

它将完美地工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:07:21.370

几天前我遇到了同样的问题，只花了2分钟试图记住......

无论如何，如果你使用的是 1.5，你还需要更改`shop_url`表中的 url。希望这可以帮助！

# java - Java 内部类设计的好处

> ID：16084834
> 
> 赞同：16
> 
> 时间：2013-04-18T13:50:32.873
> 
> 标签：java, inner-classes

在java中，你可以有内部类。从设计的角度来看，我很好奇这是否有任何好处。

我最初的想法是，在类中使用单独的文件可以更清晰地将事物分成可重用的模块。通过这样做，如果其他类希望使用该其他类，它们也可以创建自己的实例。对我来说，似乎避免内部类可能是可扩展性和代码重用的更好设计，并且在处理新项目时，通常很难判断该类是否会被重用......所以我觉得有单独的课程是要走的路。

我问这个问题是因为我接手了一个有很多这些的项目......这让我觉得以前的开发人员可能只是懒惰或不熟悉 IDE。但我想确保我不会错过这些内部类所具有的任何好处。如果有好处可以告诉我，然后我可以确认以前的开发人员是否利用了这些好处。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T14:02:04.450

当内部类不在包含类之外使用时，它们是好的——这是一种减少类膨胀的方法。作为一般规则，这是我唯一一次使用它们。

非静态内部类也可以访问包含实例的私有字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:57:22.910

内部类可用于：

1.  隐藏实现细节。

2.  使项目视图更简洁，从而易于理解。

3.  添加相关代码的逻辑分组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T14:01:55.523

我想到的内部类的一个很好的用法是在[java.util.ArrayList 中](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList)，它将其迭代器实现隐藏到`private inner classes`. `iterator()`除非通过调用或`listIterator()`在列表对象上，否则您无法创建它们。

这样，for`Iterator`和`ListIterator`实现`ArrayList`与它们相关的类和方法分组以增强可读性（实现非常短），但对其他人隐藏。

无法声明`static`它们，因为它们需要访问其封闭的**实例**对象。

```
public class ArrayList<E> extends AbstractList<E>
         implements List<E>, RandomAccess, Cloneable, java.io.Serializable {
    ...
    public Iterator<E> iterator() {
         return new Itr();
    }

    private class Itr implements Iterator<E> {
    ...
    }

    public ListIterator<E> listIterator() {
         return new ListItr(0);
    }

    private class ListItr extends Itr implements ListIterator<E> {
    ...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T14:52:28.880

**非静态内部类：**
1）内部类将用于对外部类执行一些任务并返回输出
。所以它将确保创建外部类对象来访问它。
2）内部类只针对外部类，对外部没有用处。因此无需考虑代码重用。

e.g_1) 内部类的最佳示例是`iterator`集合框架的实现。Set(AbstractCollection.java) 和 List(AbstractList.java) 将使用不同的迭代器内部类实现。
-> 我们可以重用内部类代码。例如，`private class Itr`Arraylist`java.util.AbstractList` 和 Vector 都使用内部类的实现。

**静态内部类：**
1) 静态内部类不依赖外部类对象；但它特定于外部类级别。它不会暴露给独立的，因为它只特定于外部类。所以没有代码重用。
2）它有一组对所有对象（类级别）通用（共享）的方法 3）

e.g_1) 使用静态内部类检索 Sigleton 对象。
e.g_2) 构建器模式
e.g_3) 类的比较器实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-16T20:46:36.747

内部类是非常重要的东西，它可以帮助您非常整洁地实现封装需求，您的基类也可以从许多类继承（例如实现抽象处理程序）。每个程序员都可以学习如何在 Java 中使用内部类，这是非常有用的东西。

# objective-c - Xcode - 显示引发异常的行

> ID：16084839
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:45.417
> 
> 标签：objective-c, xcode

我看到了[这个](https://stackoverflow.com/questions/7703052/xcode-doesnt-show-the-line-that-causes-a-crash)问答。

我有确切的问题：

*“每次我的应用程序崩溃时，Xcode 都会突出显示 main() 函数中的 UIApicationMain() 调用作为导致崩溃的行”*

我尝试了选择的解决方案：为所有异常添加断点 - on catch。

但是，Xcode 仍然突出显示了 UIApplicationMain() 函数。

我正在使用 XCode 4.6

什么可能导致它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:58:28.123

您确实应该添加一个异常断点，而不是显然`on catch`选择。`on throw`

# java - 如何在 JPanel 上定位/布局组件？

> ID：16084840
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:46.737
> 
> 标签：java, swing, layout-manager, boxlayout

我试图在 JFrame 上放置 5 个按钮。四个按钮应该在第一行，第五个应该在第二行。但是这里所有的按钮都出现在一行中，第五个按钮的一半在面板之外。顺便说一句，如果我使用 frame.pack(); 我的框架变得比我预期的要小。我不想改变框架的大小。我想在第二行找到第五个。

```
import java.awt.GridBagLayout;
import java.awt.GridLayout;

import javax.swing.*;

public class test {

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setBounds(100, 100, 529, 300);
        frame.getContentPane().setLayout(new GridLayout(1, 0, 0, 0));

        JPanel panel = new JPanel();
        frame.getContentPane().add(panel);
        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));

        JButton btnNewButton_4 = new JButton("New button");
        panel.add(btnNewButton_4);

        JButton btnNewButton_3 = new JButton("New button");
        panel.add(btnNewButton_3);

        JButton btnNewButton = new JButton("New button");
        panel.add(btnNewButton);

        JButton btnNewButton_1 = new JButton("New button");
        panel.add(btnNewButton_1);

        JButton btnNewButton_2 = new JButton("New button");
        panel.add(btnNewButton_2);

        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:57:57.693

> 四个按钮应该在第一行，第五个应该在第二行。

*   Oracle 教程中关于[如何使用布局管理器的标准和预订示例](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

*   对 JPanel使用[GridLayout（两行）](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)，但所有 JButton 将具有相同的尺寸

*   使用[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)，那么每个 JButton 的大小都会不同

*   不可见的 JComponents 或空的 JLabel 可以帮助您处理最复杂的变体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:09:08.483

What I do is use null as the layout manager and place the components my self. A manager works well if you want your components to be relayed when the window is resized or you do not know the final size of applet etc

But most of the time that is not true or over kill

Instead just place the components on a grid by pixel using setBounds(x,y,width,height); Example:

```
 JFrame frame = new JFrame();
    frame.setBounds(100, 100, 529, 300);
    frame.getContentPane().setLayout(null);//over ride default
    Container c = frame.getContentPane();

    JButton btnNewButton_4 = new JButton("New button");
    c.add(btnNewButton_4);
    c.seBounds(4,10,40,25);

    JButton btnNewButton_3 = new JButton("New button 3");
    c.add(btnNewButton_3);
    c.seBounds(40,10,40,25);//...etc 
```

**Samples**

*   [http://sel2in.com/prjs/aplt/go/Ap1a.html](http://sel2in.com/prjs/aplt/go/Ap1a.html)

*   [http://sel2in.com/prjs/aplt/go/](http://sel2in.com/prjs/aplt/go/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:58:09.123

您正在使用 BoxLayout，其中组件不会包装（查看 API 文档：[http](http://docs.oracle.com/javase/6/docs/api/javax/swing/BoxLayout.html) ://docs.oracle.com/javase/6/docs/api/javax/swing/BoxLayout.html ）

关于尺寸，尝试使用 panel.setMinimumSize(Dimension d)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T18:08:01.243

您还可以使用 setBounds(arg1 , arg2 , arg3 , arg4) 方法。使用它以获得更好的帮助。[不使用布局管理器（绝对定位）](https://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

# c# - 解析属性信息 C#

> ID：16084842
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:50.287
> 
> 标签：c#, asp.net-mvc, parsing

伙计们，我有以下循环，如果是一个列表，我必须再次循环，直到这里我还好，但是在另一个循环中我遇到了问题，因为我必须在“propretyinfo”中循环，我'必须循环这个 PropretyInfo 的对象并获取这个值，我在这里尝试了一个硬解析：

```
(List<ItemDeMescla>)objeto.GetValue(objeto, null) 
```

但它抛出了一个异常，知道如何解析它并工作吗？

```
foreach (PropertyInfo objeto in processo.GetType().GetProperties())
{
    corpoEmail += CriarLinhaEmail(objeto.Name, Convert.ToString(objeto.GetValue(processo, null)), false);

    if (objeto.PropertyType.IsGenericType && (objeto.PropertyType.GetGenericTypeDefinition() == typeof(System.Collections.Generic.List<>)))
    {
        List<ItemDeMescla> itensMescla = (List<ItemDeMescla>)objeto.GetValue(objeto, null);
        foreach (ItemDeMescla item in itensMescla)
        {
            tabelasAux.Add(CriarTabelaInternaEmail<ItemDeMescla>(item, objeto.Name));
        }
    }
} 
```

错误堆栈：

```
 at System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target)
   at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture)
   at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
   at SACG.Services.Integracao.Integracao.Utils.MontarCorpoEmail[T](T processo, String mensagem) in c:\Projetos\Cotrijal\Branch\1.8.0.0\Cotrijal\Servicos\SACG.Services.Integracao\Integracao\Utils.cs:line 176
   at SACG.Services.Integracao.Integracao.Utils.EnviarEmail[T](T processo, Int32 codigoDaUnidade, String mensagem, String assunto) in c:\Projetos\Cotrijal\Branch\1.8.0.0\Cotrijal\Servicos\SACG.Services.Integracao\Integracao\Utils.cs:line 114
   at SACG.Services.Integracao.Integracao.IntegracaoDaExpedicao.SalvarExpedicao(ExpedicaoGraos expedicaoDto, Usuario usuarioLogado) in c:\Projetos\Cotrijal\Branch\1.8.0.0\Cotrijal\Servicos\SACG.Services.Integracao\Integracao\IntegracaoDaExpedicao.cs:line 111
   at SACG.Services.Integracao.ExpedicaoDeGraos.RegistrarExpedicao(ExpedicaoGraos expedicao) in c:\Projetos\Cotrijal\Branch\1.8.0.0\Cotrijal\Servicos\SACG.Services.Integracao\ExpedicaoDeGraos.asmx.cs:line 104 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:55:19.637

尝试获取对象的值，而不是 PropertyInfo：

```
(List<ItemDeMescla>)objeto.GetValue(processo, null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:52:01.960

尝试

```
objeto.GetValue(processo, null) 
```

代替

```
objeto.GetValue(objeto, null) 
```

# ios - iPhone 应用程序的聊天 API

> ID：16084843
> 
> 赞同：0
> 
> 时间：2013-04-18T13:50:56.203
> 
> 标签：ios, chat

我是 iOS 新手。我正在 iOS 上构建一个应用程序，它需要可以集成到现有应用程序的聊天功能。请让我知道是否有任何 API 可用于将其集成到 iphone 应用程序中。（如果可能，请给我链接）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:03:52.630

我使用了一个名为[XMPPFramework](https://github.com/robbiehanson/XMPPFramework)的框架 和[ejabberd](http://www.ejabberd.im/)作为聊天服务器，它运行良好

# c++ - 与我自己的 C++ 库链接错误

> ID：16084847
> 
> 赞同：1
> 
> 时间：2013-04-18T13:51:07.143
> 
> 标签：c++, dynamic-library

这是我第一次尝试制作一个简单的库。我在 Ubuntu 12.04 中使用 g++ 4.6.3 工作。这是问题所在：

```
[[mylib.cpp]]
#include<sqlite3.h>
void Mylib::blahblah() {...}
void Mylib::evenmoreblah() {...}
...

[[mylib.h]]
#include <...>
class Mylib {
    ...
}; 
```

然后我通过以下方式制作了库：

```
 gcc -c -Wall -fpic mylib.cpp
 gcc -shared -o libmylib.so mylib.o 
```

我在仅包含 main() 的单个 test.cpp 中使用了该库。我将 libmylib.so 放在 ./libdir 中，并使用以下命令进行编译：

```
 g++ -g test.cpp -o test -lpthread -L/usr/local/lib -lsqlite3 -L./libdir -lmylib 
```

我得到的错误：

```
./libdir/libmylib.so: undefined reference to `sqlite3_close'
./libdir/libmylib.so: undefined reference to `sqlite3_exec'
./libdir/libmylib.so: undefined reference to `sqlite3_free'
./libdir/libmylib.so: undefined reference to `sqlite3_open' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:53:18.350

如果您的库引用了 sqlite3，则应在链接库后链接 sqlite：

```
g++ -g test.cpp -o test -lpthread -L/usr/local/lib -L./libdir -lmylib -lsqlite3 
```

否则`ld`在链接你的库之前在 libsqlite3 中找不到任何有用的东西，之后将无法找到请求的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:54:14.793

您可以链接`-lsqlite3`到您的共享库

```
 gcc -shared mylib.o -o libmylib.so -lsqlite3 
```

^(如果你这样做，你不需要显式链接`-lsqlite3`到你的程序，但这不会有害。)

并且程序的链接参数的顺序很重要：

```
 g++ -Wall -g test.cpp -o mytest \
   -L./libdir -lmylib -L/usr/local/lib -lsqlite3 -lpthread 
```

它应该从高级库转到低级（即系统）库。并且不要忘记`-Wall`从编译器中获取几乎所有的警告，这非常有用。

阅读[程序库操作方法](http://tldp.org/HOWTO/Program-Library-HOWTO/)。

PS。不要调用你的程序`test`，它是一个 shell 内置（和标准`/usr/bin/test`）。使用其他名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:59:57.193

由于您的库使用`sqlite3`，因此您需要在链接器命令中的您自己的库之后添加它。我认为您也可以将其添加到共享库的链接中，但不确定。

链接器按照您列出它们的顺序解析库及其引用，因此顺序很重要。

# iphone - Opera Mini 无法在 iOS 6 上使用本地代理

> ID：16084850
> 
> 赞同：0
> 
> 时间：2013-04-18T13:51:16.177
> 
> 标签：iphone, ios, mobile, proxy, opera-mini

我知道 Opera Mini 使用代理来处理内容，而不是在设备本身上处理内容。可悲的是，我相信在为这个浏览器开发我的移动网站时，这给我带来了一个问题。

我有一个本地代理配置为指向我的开发机器，它允许我访问驻留在本地机器上的代码。这很棒，在 Safari 和 Chrome 上运行良好，但是在 Opera Mini 上出现“找不到页面”错误。

![在此处输入图像描述](https://i.stack.imgur.com/hbW4L.png) 有什么方法可以在 Opera Mini 中使用在 iOS 中配置的本地代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:56:41.180

Opera Mini 只能访问具有公共 IP 的服务器。一种选择是将您的内容放在受密码保护的网站上。

[http://dev.opera.com/articles/view/opera-mini-5-developers/#serverbased](http://dev.opera.com/articles/view/opera-mini-5-developers/#serverbased)

# c# - 我该怎么做才能将其显示为图像？

> ID：16084855
> 
> 赞同：1
> 
> 时间：2013-04-18T13:51:25.477
> 
> 标签：c#, image-processing, asp.net-mvc-4

我不知道我该怎么做。这是我搜索图像时的代码：

```
public ActionResult SearchImage() {    
    var path = @"\\jesus-pc\Frontera\IMAGENES\SINGNOS DISTINTIVOS\0\80HP23891268272.TIF";
    FileStream stream = new FileStream(path,FileMode.Open,FileAccess.Read);
    byte[] data = new byte[(int)stream.Length];
    stream.Read(data,0, data.Length);

    return Json(new { base64image = Convert.ToBase64String(data) }, JsonRequestBehavior.AllowGet);
} 
```

我通过ajax做到这一点：

```
$(".doc").dblclick(function () {                  
    $.ajax({
        url: "mainpage/SearchImage",
        contentType: 'application/json',
        dataType: "json",
        type: "get",
        success: function (data) {
            ModalWindow.open();
            document.getElementById("img_1").src = 
                "data:image/jpeg;base64"+data.base64image;
        }

}) 
```

但这是我在浏览器中得到的：

> { base64image：“SUkqAEgAAABXQU5HIFRJRkYgAQAwAAAAVGl0bGU6AEF1dGhvcjoAU3ViamVjdDoAS2V5d29yZHM6AENvbW1lbnRzOgAAAAAAEgD+AAQAAQ...AAFXEAAAA==”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:48:23.707

我相信这就是你要找的。

[ASP.NET MVC 控制器可以返回图像吗？](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)

这与 base 64 编码图像无关。如果这是您想要的，Base 64 编码确实可以工作，但看起来您只是想从服务器传递图像以在客户端中呈现。您可以使用 FileResult 轻松完成此操作。

在您的情况下，您的图像`src`标签应该只是`src="mainpage/SearchImage"`，并且您现有的代码隐藏应该替换为以下内容：

```
public ActionResult SearchImage(string id)
{
    var path = @"\\jesus-pc\Frontera\IMAGENES\SINGNOS DISTINTIVOS\0\80HP23891268272.TIF";
    return base.File(path, "image/tiff");
} 
```

# mysql - 根据最低日期选择更多带有 GROUP_CONCAT( ) 的列

> ID：16084858
> 
> 赞同：-2
> 
> 时间：2013-04-18T13:51:32.567
> 
> 标签：mysql

我有一个表帐户。我写了以下查询

```
chk_account= mysql_query("SELECT GROUP_CONCAT( DISTINCT user_id ) AS userlist
                                FROM  `accounts` 
                                "); 
```

从这里我只得到用户ID。使用此查询，我还想使用列名 price 获取数据价格和日期并创建，但我只需要选择最低日期

我有这样的表结构：

```
id      user_id         price       created
1       31              10          2013-04-09 17:30:15
2       32              20          2013-04-10 20:24:40
3       31              30          2013-04-11 04:44:25
4       33              40          2013-04-12 05:47:18
5       34              50          2013-04-13 19:54:15
6       34              50          2013-04-14 14:27:15
7       35              10          2013-04-15 13:54:45
8       35              60          2013-04-16 12:24:35
9       35              10          2013-04-17 20:34:10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:04:39.483

我怀疑您想要每个用户的最早日期和价格。您可以使用 执行此操作`group_concat()`，使用如下查询：

```
select USER_ID,
       substring_index(group_concat(price order by created), ',', 1) as price,
       min(created)
from accounts a
group by user_id 
```

# c - 关于 C 函数原型和编译的问题

> ID：16084859
> 
> 赞同：5
> 
> 时间：2013-04-18T13:51:35.353
> 
> 标签：c, gcc, compiler-construction

使用以下代码：

```
int main(){
    printf("%f\n",multiply(2));
    return 0;
}

float multiply(float n){
    return n * 2;
} 
```

当我尝试编译时，我收到一个警告：“'%f' 期望 'double'，但参数的类型为 'int'”和两个错误：“'multiply' 的类型冲突”，“'multiply' 的先前隐式声明是这里。”

**问题1**：我猜这是因为编译器在第一次遇到“乘法”函数时不知道它，他会发明一个原型，并且发明的原型总是假设“int”被返回并被视为范围。因此，发明的原型将是“int multiply(int)”，因此会出现错误。它是否正确？

现在，之前的代码甚至无法编译。但是，如果我将代码分解为这样的两个文件：

```
#file1.c
 int main(){
    printf("%f\n",multiply(2));
    return 0;
 }

#file2.c
float multiply(float n){
    return n * 2;
} 
```

并执行“gcc file1.c file2.c -o file”，它仍然会给出一个警告（printf 期待 double 但正在获取 int），但错误不会再出现，它会编译。

**问题 2**：当我将代码分成 2 个编译的文件时，为什么会这样？

**问题 3**：一旦我运行上面的程序（版本分为 2 个文件），结果是 0.0000 打印在屏幕上。怎么会？我猜编译器又发明了一个与函数不匹配的原型，但为什么打印的是 0 呢？如果我将 printf("%f") 更改为 printf("%d") 它会打印 1。同样，对幕后发生的事情有什么解释吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:56:07.950

> 因此，发明的原型将是“int multiply(int)”，因此会出现错误。它是否正确？

绝对地。这样做是为了与缺少函数原型的 pre-ANSI C 向后兼容，并且没有类型声明的所有内容都是隐式的`int`。编译器编译你的`main`，创建一个隐含的定义`int multiply(int)`，但是当它找到真正的定义时，它会发现谎言，并告诉你它。

> 当我将代码分解为它编译的 2 个文件时，怎么会这样？

编译器永远不会发现原型的谎言，因为它一次编译一个文件：它假设`multiply`接受一个`int`，并`int`在你`main`的`multiply.c`. 但是，运行此程序会产生未定义的行为。

> 一旦我运行上面的程序（版本分为 2 个文件），结果是 0.0000 打印在屏幕上。

这是上述未定义行为的结果。该程序将编译和链接，但因为编译器认为`multiply`需要一个`int`，它永远不会转换`2`为`2.0F`，`multiply`也永远不会发现。`int` *同样，通过将重新解释*为函数`float`内部的a加倍计算的不正确值`multiply`将被视为`int`再次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:55:20.760

**问题1：**是的，你是对的。如果没有函数原型，则默认类型为`int`

**问题 2：**当您将此代码编译为一个文件时，编译器会看到已经有一个名为的函数`multiply`，并且它的类型与假设的不同（`double`而不是`int`）。因此编译不起作用。

当您将其分成两个文件时，编译器会生成两个`.o`文件。在第一个中，它假设该`multiply()`函数将在其他文件中。然后链接器将这两个文件链接到一个二进制文件中，并根据名称在第一个文件中编译器假定的位置`multiply`插入调用。`float multiply()``int multiply()``.o`

**问题 3：**如果你读`int` `2`为 a `float`，你会得到一个非常小的数字（~1/2^25），所以之后你将它乘以 2 ，它对于 format 来说仍然太小了`%f`。这就是你看到的原因`0.00000`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:55:26.730

未指定函数的返回类型为`int`（这就是您收到警告的原因，编译器认为它返回一个整数）和未知数量的未指定参数。

如果您将项目分解为多个文件，只需在从其他文件调用函数之前声明一个函数原型，一切都会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:55:42.457

**问题1：**

> 因此，发明的原型将是“int multiply(int)”，因此会出现错误。它是否正确？

不完全是，因为它取决于您的 Cx (C89, C90, C99,...)

对于函数返回值，在 C99 之前明确规定，如果没有可见的函数声明，则翻译器提供一个。这些隐式声明默认返回类型为 int

[来自C 标准](http://www.coding-guidelines.com/cbook/cbook1_0b.pdf)的理由（6.2.5 第 506 页）

> 在 C90 之前，没有函数原型。开发人员希望能够交换具有相同整数类型的有符号和无符号版本的参数。如果函数定义中的参数类型具有不同的符号，则必须强制转换参数，这被视为与 C 的简单类型检查系统背道而驰，并且有点侵入性。原型的引入并没有完全消除论点可互换性的问题。省略号表示对 1590 省略号一无所知，不提供预期参数类型的信息。类似地，对于函数返回值，在 C99 之前明确规定，如果没有可见的函数声明，则翻译器提供一个。这些隐式声明默认返回类型为 int 。如果实际函数碰巧返回类型 unsigned int ，那么这样的默认声明可能会返回意外结果。许多开发人员对函数声明的态度很随意。我们其他人不得不忍受委员会不想破坏他们编写的所有源代码的后果。函数返回值的可互换性现在是一个争论点，因为 C99 要求函数声明在调用点可见（不再提供默认声明）

**问题2：**

> 当我将代码分解为它编译的 2 个文件时，怎么会这样？

它会编译，并且会像第一个问题中指出的那样被对待，完全一样

# mysql - MySQL 查询将元密钥从 wp_postmeta 复制到新的元密钥中

> ID：16084860
> 
> 赞同：0
> 
> 时间：2013-04-18T13:51:41.260
> 
> 标签：mysql, wordpress

基本上我想卸载 Yoast SEO，因为它增加了我网站的加载时间 7 秒，但我想保留焦点关键字以用于 seo 目的。

但首先我想将焦点关键字复制到我自己的“焦点”帖子元中。

红色的结构是这样的，我希望它添加绿色的部分。之后我将删除所有 Yoast 的引用：

![数据库结构](https://i.stack.imgur.com/pEqsw.png)

*   Yoast 的元密钥：_yoast_wpseo_focuskw
*   想要复制到的键：focus

我对 sql 查询不太了解，但我尝试过：

更新 wp_postmeta SET _yoast_wpseo_focuskw = 焦点

但它没有用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:56:21.453

尝试这个 ：

```
UPDATE wp_postmeta SET meta_key = 'focus' WHERE  meta_key = '_yoast_wpseo_focuskw' 
```

# numbers - AutoHotKey：我可以像往常一样分配班次+号码吗

> ID：16084864
> 
> 赞同：0
> 
> 时间：2013-04-18T13:51:44.500
> 
> 标签：numbers, autohotkey, shift

几天前，我的可口可乐瓶不小心撞到了我的键盘。现在我把它擦干后一切正常。但是，有一个奇怪的问题。

但是，当我尝试使用标准的 Windows 组合

```
Shift+1 
shift+2 
shift+3 
```

它不起作用。再次，我的 Shift 键和数字工作正常，但他们什么都不做。然后我找到了 AutoHotKey 程序，我正在考虑分配

```
Shift+1 = ! 
Shift+2 = @ 
Shift+3 = # 
Shift+4 = $ 
Shift+5 = % 
Shift+6 = ^ 
Shift+7 = & 
Shift+8 = * 
Shift+9 = ( 
Shift+0 = ) 
```

正如它的本意

所有其他 shift + 键组合都可以正常工作，例如 shift + r = R

我浏览了教程，但是，我不是一个我几乎一无所知的程序员。任何人都可以在这里帮助我吗？

我的键盘是一款具有不同颜色的游戏 Cyborg 键盘，我已经为此支付了 80 欧元，所以我真的很想继续使用它……

非常感谢，伙计们！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:13:28.673

通常我会使用 +Nr，但为了确保我在这里使用了 Send, {Sign} 方法。此外，由于您将热键定义为输出，因此您需要在每个热键前添加一个 $ 符号，以防止每个键自行循环。

```
#SingleInstance Force
#installKeybdHook
#Persistent
AppName=KeyMod
Menu, Tray, Tip, %AppName%
Menu, Tray, Icon , Shell32.dll, 45, 1
TrayTip, %AppName%, Started, 1
SoundBeep, 300, 150
SetTitleMatchMode, 2
SetWorkingDir %A_ScriptDir%
$+1::Send, {!}
$+2::Send, {@}
$+3::Send, {#}
$+4::Send, {$}
$+5::Send, {`%}
$+6::Send, {^}
$+7::Send, {&}
$+8::Send, {*}
$+9::Send, {(}
$+0::Send, {)} 
```

# android - lv.getItemAtPosition(位置) 崩溃

> ID：16084872
> 
> 赞同：1
> 
> 时间：2013-04-18T13:52:14.500
> 
> 标签：android, onitemclick

我是android的新手，我一直在学习，现在我找不到答案。我的问题为什么我会崩溃。我知道我的问题在于：*Music m = (Music) lv.getItemAtPosition(position);* . 我可以将其注释掉并替换为字符串 ex: String song_name = "mp3"; 一切正常。

我要做的是列出在手机上任何地方找到的歌曲列表，并在选择更改时将按钮的文本设置为选择的标题。*就像我说的那样，除了使用Music m = (Music) lv.getItemAtPosition(position);*之外，我一切正常。

 *```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    ListView listView = getListView();

    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    String[] projection = { MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.DURATION};

    List<String> songs = new ArrayList<String>();
    ArrayAdapter<String> arrayAdaptor = new ArrayAdapter<String>(MusicListActivity.this, R.layout.a_listview,R.id.tv, songs);
    listView.setAdapter(arrayAdaptor);

    Cursor cursor = this.getContentResolver().query(
             MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection,null, null);
            while(cursor.moveToNext()){
             songs.add(cursor.getString(1) + "||" +
                     cursor.getString(2));
             cursor.getString(3); 
             Collections.sort(songs);
             String sname = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE));
             Music mb = new Music();
        mb.setName(sname);
        }   
    }

protected void onListItemClick(ListView lv, View v, int position, long id) {
    super.onListItemClick(lv, v, position, id);

    Music m = (Music) lv.getItemAtPosition(position);
    String song_name = m.getName();

    Intent i = getIntent();
String msg = i.getStringExtra("local");
if(msg.contentEquals("song")){

    i.putExtra("songname", song_name);
    setResult(RESULT_OK, i);
    finish();

}
}} 
```

这是我的日志，

```
 04-18 06:23:12.932: W/dalvikvm(3383): threadid=1: thread exiting with uncaught exception (group=0x40017560)
    04-18 06:23:12.932: E/AndroidRuntime(3383): FATAL EXCEPTION: main
    04-18 06:23:12.932: E/AndroidRuntime(3383): java.lang.ClassCastException: java.lang.String
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at com.alarm.smsalarmclock.MusicListActivity.onListItemClick(MusicListActivity.java:59)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.widget.ListView.performItemClick(ListView.java:3513)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.os.Handler.handleCallback(Handler.java:587)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.os.Handler.dispatchMessage(Handler.java:92)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.os.Looper.loop(Looper.java:130)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at java.lang.reflect.Method.invoke(Method.java:507)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
    04-18 06:23:12.932: E/AndroidRuntime(3383):     at dalvik.system.NativeStart.main(Native Method) 
```

我试过谷歌搜索 *FATAL EXCEPTION: main java.lang.ClassCastException: java.lang.String*和变体但没有找到任何东西。如果我什至可以指出正确的方向会很有帮助，并在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:56:43.713

您的`arrayAdapter`contains `String`，但您将它们投射到`Music`：

```
Music m = (Music) lv.getItemAtPosition(position);
String song_name = m.getName(); 
```

改成：

```
 String song_name = (String)lv.getItemAtPosition(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:57:12.480

您尝试投射`String`到`Music`，但不能。如果您只需要歌曲名称，您可以尝试：

```
String song_name = (String) lv.getItemAtPosition(position); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:58:52.823

试试这个错误是由于错误的数据类型转换

```
String song_name =lv.getItemAtPosition(position).getName() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:00:30.013

提供给 listview 的数组是一个字符串数组，它基本上包含歌曲名称。因此，如果这是您感兴趣的对象，则直接从那里提取歌曲名称。问题是您试图将 String 转换为 Music。

```
protected void onListItemClick(ListView lv, View v, int position, long id) {
    super.onListItemClick(lv, v, position, id);

    String song_name = lv.getItemAtPosition(position);
    Intent i = getIntent();
    String msg = i.getStringExtra("local");
    if(msg.contentEquals("song")){

       i.putExtra("songname", song_name);
       setResult(RESULT_OK, i);
       finish();

} 
```*

# matlab - 如何在 Matlab 中的给定点评估经验 cdf？

> ID：16084876
> 
> 赞同：1
> 
> 时间：2013-04-18T13:52:24.580
> 
> 标签：matlab

假设我有一系列服从未知分布的标量点。

从点的序列中，我们可以得到经验 cdf。

我想知道 Matlab 中是否有某种方法可以在任何时候评估这个经验 cdf？例如，在用于构建经验 cdf 的相同点序列上对其进行评估？

`ecdf`我在[http://www.mathworks.com/help/stats/ecdf.html](http://www.mathworks.com/help/stats/ecdf.html)查找了函数。它的用法是`[f,x] = ecdf(y)`，其中数据 y `is evaluated at`x `, but`x` 的经验 cdf 似乎无法指定。

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:12:23.933

假设你有函数的输出，两个向量`f`，`x`并且你想在点找到经验 cdf，`x_of_interest`你可以这样做：

```
max(f(x<=x_of_interest)) 
```

或者也许你想使用`min`and `>=`，但我认为上面的公式是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:59:53.297

似乎是他们的 CDF`x`的独特之处。`y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T13:23:25.903

我不确定这就是您的意思，但我还需要将数据值向量转换为具有相同顺序的经验 CDF 的相应向量。

实际上，`cdf(x) = Prob(X <= x)`我更喜欢更对称的定义，而不是通常的定义`cdf(x) = Prob(X < x) + 1/2 * Prob(X == x)`，这更适合有关系的情况。现在计算是单行的，但`tiedrank()`在统计工具箱中的函数的帮助下：

```
cdf = (tiedrank(data) - 1/2) / length(data) ; 
```

例如，

```
data = [3     2     4     2     1] ; 
```

产量

```
cdf = [0.7    0.4    0.9    0.4    0.1] ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T11:00:32.737

一个好的方法可能是使用插值来为您要评估的每个点找到最接近的“x”，以及相对的“f”值。您可以在此处找到如何为此目的使用 interp1： [确定 ecdf-at-a-point-using-matlab 的值](https://math.stackexchange.com/questions/1046476/determining-the-value-of-ecdf-at-a-point-using-matlab)

# wpf - WPF-MVVM：从 DataGrid 样式中处理事件

> ID：16084877
> 
> 赞同：0
> 
> 时间：2013-04-18T13:52:27.453
> 
> 标签：wpf, mvvm

我基于 WPF+MVVM 开发 Prism+MEF 应用程序，其中有许多 DataGrid，因此我构建了 DataGridStyle 以应用于所有模块中的所有 DataGrid。样式在列标题中添加过滤文本框，当文本框文本更改如下时，我使用 MVVM Light EventToCommand 触发 TextChanged 事件：（此代码存在于 DataGridStyle 资源字典中）

```
 <TextBox x:Name="filterTextBox" 
         HorizontalAlignment="Right" MinWidth="25" Height="Auto"
         OpacityMask="Black" Visibility="Collapsed" 
         Text=""
         TextWrapping="Wrap" Grid.Column="0" Grid.ColumnSpan="1">

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="TextChanged">
                    <cmd:EventToCommand Command="{Binding DataContext.TextChangedCommand}"
                          PassEventArgsToCommand="True"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
   </TextBox> 
```

然后我使用附加属性处理了 ViewModel 中的 TextChangedCommand（与包含数据网格的视图有关）：

```
#region TextChangedCommand----------------------------------------------------------------------------------------------

        static ICommand command; //1

        public static ICommand GetTextChangedCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(TextChangedCommandProperty);
        }

        public static void SetTextChangedCommand(DependencyObject obj, ICommand value)
        {
            obj.SetValue(TextChangedCommandProperty, value);
        }

        // Using a DependencyProperty as the backing store for TextChangedCommand.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty TextChangedCommandProperty =
            DependencyProperty.RegisterAttached("TextChangedCommand",
                                                 typeof(ICommand), 
                                                 typeof(SubsystemAllViewModel),
                                                 new UIPropertyMetadata(null, CommandChanged));

        static void CommandChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
        {
            var fe = obj as FrameworkElement;
            command = e.NewValue as ICommand;
            fe.AddHandler(TextBox.TextChangedEvent, new TextChangedEventHandler(ExecuteCommand));
        }

        static void ExecuteCommand(object sender, TextChangedEventArgs e)
        {
            //Some  Code
        }

        #endregion 
```

以及包含网格的视图：

```
 <DataGrid  ItemsSource="{Binding Subsystems,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                   SelectedItem="{Binding Path=SelectedSubsystem, Mode=TwoWay}"                        
                   Name="SubsystemAllDataGrid"              
                   Style="{StaticResource DataGridStyle}"
                   Grid.Row="2">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Serial" Binding="{Binding Path=Serial, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Type" Binding="{Binding Path=Type, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="System" Binding="{Binding Path=System, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="SubsystemNo"  Binding="{Binding Path=SubsystemNo, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Description" Binding="{Binding Path=Description, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Scope" Binding="{Binding Path=Scope, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Area" Binding="{Binding Path=Area, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Priority" Binding="{Binding Path=Priority, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="DossierLocation" Binding="{Binding Path=DossierLocation, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Parts" Binding="{Binding Path=Parts, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Status" Binding="{Binding Path=Status, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="StatusDate" Binding="{Binding Path=StatusDate, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="MCDate" Binding="{Binding Path=MCDate, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="PlnMCDate" Binding="{Binding Path=PlnMCDate, Mode=TwoWay}"></DataGridTextColumn>
                <DataGridTextColumn Header="Remark" Binding="{Binding Path=Remark, Mode=TwoWay}"></DataGridTextColumn>

            </DataGrid.Columns>

        </DataGrid> 
```

问题是：当我在数据网格的列标题之一的文本框中输入过滤器文本时，没有任何反应，并且以下点的断点未命中：

1-GetTextChangedCommand 和 SetTextChangedCommand

2-CommandChanged() 方法。

我是 wpf 的新手，所以我确定 WPF 或 C# 代码中存在错误......所以请帮我修复这些错误。

注意：我不使用后面的代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:32:06.407

未命中断点使我成为绑定问题。

您的命令的数据上下文需要设置为定义您的命令的位置。因此，如果您的命令是在视图模型中定义的，则需要使用以下内容，但将 ansestor 类型设置为绑定到您的视图模型的对象类型。这通常是您的视图，而不是数据网格：

```
 Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type ViewType}} Path=DataContext.TextChangedCommand}" 
```

因此，如果您的视图是窗口或用户控件，则将 ViewType 更改为相应的类型。

您还可以在运行应用程序时在输出窗口中查看是否为您的命令生成任何绑定错误。

**编辑 1：** 不要使用依赖属性，在视图模型中使用来自 MVVM-Light 的中继命令：

```
 this.YourRelayCommand = new RelayCommand( ExecuteYourCommand, CanYourCommandExecute);

  public RelayCommand YourRelayCommand{ get; private set; }

  public bool CanYourCommandExecute() {

    }

  public void ExecuteYourCommand() {
    //TODO: Do code here 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:02:47.827

看起来您的命令绑定不起作用。尝试以下操作：

```
Command="{Binding Path=TextChangedCommand}" 
```

或者

```
Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}} Path=DataContext.TextChangedCommand}" 
```

# lua - 读取lua接口

> ID：16084878
> 
> 赞同：3
> 
> 时间：2013-04-18T13:52:27.820
> 
> 标签：lua, luasocket

在lua中，有没有办法读取接口文件来提取名称/方法/参数？

我有一个这样的 .idl 文件：

```
interface
{
    name = myInterface,
    methods = {
        testing = {
            resulttype = "double",
            args = {{direction = "in",
            type = "double"},
        }
    }
} 
```

这等于下面的代码（更易于阅读）：

```
interface myInterface {
  double testing (in double a);
}; 
```

例如，我可以读取文件、加载为字符串并使用 gmatch 解析以提取信息，但是是否有任何简单的模式来解析这些信息？

最后，我想要一些带有接口名称、方法、结果类型和参数的东西（例如表格）。只是想知道我正在工作的界面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:28:06.713

Lua 有几个工具可以解释代码块。即`dofile`，`loadfile`和`loadstring`。幸运的是，您的输入文件*几乎*是有效的 Lua 代码（假设这些大括号匹配）。唯一有问题的是`interface {`.

上述所有函数都有效地创建了一个函数对象，其中文件或字符串的内容作为它们的代码。`dofile`立即执行该函数，而其他函数返回一个函数，您可以随时调用该函数。因此，如果您可以随意更改文件，请将`interface`第一行替换为`return`. 然后你可以这样做：

```
local interface = dofile("input.idl") 
```

并且 interface 将是一个很好的表，就像您在文件中指定它一样。如果您无法根据自己的喜好更改这些文件，则必须将文件加载到字符串中，执行一些字符串操作（具体而言，将第一个替换为`interface`）`return`，然后`loadstring`改用：

```
io.input("input.idl")
local input = io.read("*all")
input = string.gsub(input, "^interface", "return") -- ^ marks beginning of string
local f = loadstring(input)
local interface = f() 
```

在这两种情况下，您都会得到：

```
> require"pl.pretty".dump(interface)
{
  name = "myInterface",
  methods = {
    testing = {
      args = {
        {
          type = "double",
          direction = "in"
        }
      },
      resulttype = "double"
    }
  }
}    

> print(interface.methods.testing.args[1].type)
double 
```

**编辑：**

我刚刚意识到，在您的示例中，输入`myInterface`没有包含在`"`其中，因此不是正确的字符串。这也是您的输入文件中的一个错误，还是您的文件实际上是这样的？在后一种情况下，您也需要更改它。如果它是一个不知道的名字，Lua 不会抱怨，但在这种情况下你也不会得到这个字段。

# android - Lame 编码的 mp3 音频速度变慢 - Android

> ID：16084882
> 
> 赞同：1
> 
> 时间：2013-04-18T13:52:39.343
> 
> 标签：android, java-native-interface, audiorecord, lame, slowdown

我一直在关注[this tutorial](http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI) on using LAME mp3 on Android with jni。录音似乎正在工作，我得到了 mp3 的输出，但在播放时，音频已经减慢并降低了音调。

我试图将所有相关代码放在下面。关于为什么会发生这种情况的任何指导？在此先感谢您的帮助。

*编辑：*好的，只是为了检查我将原始数据导入 Audacity 并且可以正常播放，所以这一定是编码阶段的问题。

*Java类：*

```
public class Record extends Activity implements OnClickListener {

    static {
        System.loadLibrary("mp3lame");
    }

    private native void initEncoder(int numChannels, int sampleRate, int bitRate, int mode, int quality);

    private native void destroyEncoder();

    private native int encodeFile(String sourcePath, String targetPath);

    private static final int RECORDER_BPP = 16;
    private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
    private static final String AUDIO_RECORDER_FOLDER = "AberdeenSoundsites";
    private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
    private static final int[] RECORDER_SAMPLERATES = {44100, 22050, 11025, 8000};
    private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_STEREO;
    private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

    public static final int NUM_CHANNELS = 2;
    public static final int SAMPLE_RATE = 44100;
    public static final int BITRATE = 320;
    public static final int MODE = 1;
    public static final int QUALITY = 2;
        private short[] mBuffer;
    private File rawFile;
    private File encodedFile;

    private int sampleRate;
    private String filename;

    private AudioRecord recorder = null;
    private int bufferSize = 0;
    private Thread recordingThread = null;
    private boolean isRecording = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.record);

        initEncoder(NUM_CHANNELS, SAMPLE_RATE, BITRATE, MODE, QUALITY);

        stopButton = (Button) findViewById(R.id.stop_button);
        stopButton.setOnClickListener(this);
        timer = (TextView) findViewById(R.id.recording_time);

        bufferSize = AudioRecord.getMinBufferSize(44100, RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);
    }

    private void startRecording() {
        stopped = false;
        stopButton.setText(R.string.stop_button_label);

        // Set up and start audio recording
        recorder = findAudioRecord();
        recorder.startRecording();
        isRecording = true;

        rawFile = getFile("raw");
        mBuffer = new short[bufferSize];
        startBufferedWrite(rawFile);
        }

    private void stopRecording() {
        mHandler.removeCallbacks(startTimer);
        stopped = true;

        if(recorder != null){
            isRecording = false;

            recorder.stop();
            recorder.release();

            recorder = null;
            recordingThread = null;
        }

        encodedFile = getFile("mp3");
        int result = encodeFile(rawFile.getAbsolutePath(), encodedFile.getAbsolutePath());
        if (result == 0) {
            Toast.makeText(Record.this, "Encoded to " + encodedFile.getName(), Toast.LENGTH_SHORT)
                    .show();
        }
    }

    private void startBufferedWrite(final File file) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                Looper.prepare();
                DataOutputStream output = null;
                try {
                    output = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(file)));
                    while (isRecording) {
                        int readSize = recorder.read(mBuffer, 0, mBuffer.length);
                        for (int i = 0; i < readSize; i++) {
                            output.writeShort(mBuffer[i]);
                        }
                    }
                } catch (IOException e) {
                    Toast.makeText(Record.this, e.getMessage(), Toast.LENGTH_SHORT).show();
                } finally {
                    if (output != null) {
                        try {
                            output.flush();
                        } catch (IOException e) {
                            Toast.makeText(Record.this, e.getMessage(), Toast.LENGTH_SHORT).show();
                        } finally {
                            try {
                                output.close();
                            } catch (IOException e) {
                                Toast.makeText(Record.this, e.getMessage(), Toast.LENGTH_SHORT).show();
                            }
                        }
                    }
                }
            }
        }).start();
    }

    private File getFile(final String suffix) {
        Time time = new Time();
        time.setToNow();
        return new File(Environment.getExternalStorageDirectory()+"/MyAppFolder", time.format("%Y%m%d%H%M%S") + "." + suffix);
    }

    public AudioRecord findAudioRecord() {
        for (int rate : RECORDER_SAMPLERATES) {
            for (short audioFormat : new short[] { AudioFormat.ENCODING_PCM_16BIT, AudioFormat.ENCODING_PCM_8BIT }) {
                for (short channelConfig : new short[] { AudioFormat.CHANNEL_IN_STEREO, AudioFormat.CHANNEL_IN_MONO  }) {
                    try {
                        Log.d("AberdeenSoundsites", "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: "
                                + channelConfig);
                        int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                        if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                            // check if we can instantiate and have a success
                            AudioRecord recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, rate, channelConfig, audioFormat, bufferSize);
                            sampleRate = rate;
                            if (recorder.getState() == AudioRecord.STATE_INITIALIZED)
                                return recorder;
                        }
                    } catch (Exception e) {
                        Log.e("MyApp", rate + "Exception, keep trying.",e);
                    }
                }
            }
        }
        Log.e("MyApp", "No settings worked :(");
        return null;
    } 
```

*C包装：*

```
#include <stdio.h>
#include <stdlib.h>
#include <jni.h>
#include <android/log.h> 
#include "libmp3lame/lame.h"

#define LOG_TAG "LAME ENCODER"
#define LOGD(format, args...)  __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, format, ##args);
#define BUFFER_SIZE 8192
#define be_short(s) ((short) ((unsigned short) (s) << 8) | ((unsigned short) (s) >> 8))

lame_t lame;

int read_samples(FILE *input_file, short *input) {
    int nb_read;
    nb_read = fread(input, 1, sizeof(short), input_file) / sizeof(short);

    int i = 0;
    while (i < nb_read) {
        input[i] = be_short(input[i]);
        i++;
    }

    return nb_read;
}

void Java_myPacakage_myApp_Record_initEncoder(JNIEnv *env,
        jobject jobj, jint in_num_channels, jint in_samplerate, jint in_brate,
        jint in_mode, jint in_quality) {
    lame = lame_init();

    LOGD("Init parameters:");
    lame_set_num_channels(lame, in_num_channels);
    LOGD("Number of channels: %d", in_num_channels);
    lame_set_in_samplerate(lame, in_samplerate);
    LOGD("Sample rate: %d", in_samplerate);
    lame_set_brate(lame, in_brate);
    LOGD("Bitrate: %d", in_brate);
    lame_set_mode(lame, in_mode);
    LOGD("Mode: %d", in_mode);
    lame_set_quality(lame, in_quality);
    LOGD("Quality: %d", in_quality);

    int res = lame_init_params(lame);
    LOGD("Init returned: %d", res);
}

void Java_myPacakage_myApp_Record_destroyEncoder(
        JNIEnv *env, jobject jobj) {
    int res = lame_close(lame);
    LOGD("Deinit returned: %d", res);
}

void Java_myPacakage_myApp_Record_encodeFile(JNIEnv *env,
        jobject jobj, jstring in_source_path, jstring in_target_path) {
    const char *source_path, *target_path;
    source_path = (*env)->GetStringUTFChars(env, in_source_path, NULL);
    target_path = (*env)->GetStringUTFChars(env, in_target_path, NULL);

    FILE *input_file, *output_file;
    input_file = fopen(source_path, "rb");
    output_file = fopen(target_path, "wb");

    short input[BUFFER_SIZE];
    char output[BUFFER_SIZE];
    int nb_read = 0;
    int nb_write = 0;
    int nb_total = 0;

    LOGD("Encoding started");
    while (nb_read = read_samples(input_file, input)) {
        nb_write = lame_encode_buffer(lame, input, input, nb_read, output,
                BUFFER_SIZE);
        fwrite(output, nb_write, 1, output_file);
        nb_total += nb_write;
    }
    LOGD("Encoded %d bytes", nb_total);

    nb_write = lame_encode_flush(lame, output, BUFFER_SIZE);
    fwrite(output, nb_write, 1, output_file);
    LOGD("Flushed %d bytes", nb_write);

    fclose(input_file);
    fclose(output_file);
} 
```

*编辑*-好吧，出于兴趣，我下载了教程提供给我的手机的apk并运行了它。这很好用。因此，这表明本教程的问题较少，而我所做的更多。当我有空的时候我会重新检查一下，看看我是否能确定我哪里出错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T02:22:18.607

你用**2个通道调用****initEncoder** ，用 STEREO 和 MONO初始化**AudioRecord**，但是 wrapper.c 只能处理 1 个通道：

 ****```
nb_write = lame_encode_buffer（lame，输入，输入，nb_read，输出，BUFFER_SIZE）；

```

上述代码要求源音频为单声道，具有 1 个声道。如果要支持 STEREO，请注意**lame_encode_buffer**方法

```
int CDECL lame_encode_buffer (                                                                                                                                
    lame_global_flags* gfp, /* 全局上下文句柄 */                                                                                
    const short int buffer_l [], /* 左声道的 PCM 数据 */                                                                                
    const short int buffer_r [], /* 右声道的 PCM 数据 */                                                                                
    const int nsamples, /* 每个通道的样本数 */                                                                                
    unsigned char* mp3buf, /* 指向编码 MP3 流的指针 */                                                                                
    常量 int mp3buf_size ); /* 此中的有效八位字节数                                                                                  
                                          溪流 */

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T20:25:19.127

给你一个指针，如果你使用 2 个通道 (.stereo) 来录制，你需要调用 lame_encode_buffer_interleaved()。

我花了几天时间才弄清楚，这是您可以使用的代码：

```
if (lame_get_num_channels(glf) == 2)
{
    result = lame_encode_buffer_interleaved(glf, j_buffer_l, samples/2, j_mp3buf, mp3buf_size);
}
else
{
    result = lame_encode_buffer(glf, j_buffer_l, j_buffer_r, samples, j_mp3buf, mp3buf_size);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T13:55:18.743

你刺激我重新审视自己的问题，我为自己找到了问题。也许这就是你正在发生的事情。检查您使用的 wav 文件的采样率。我太快地假设或看着我的，以为它说的是 44100；但它是48000！我解决了我的问题：

```
lame_set_in_samplerate(lame, 48000);
lame_set_out_samplerate(lame, 44100); 
```

也许您的代码由于某种奇怪的原因没有读取正确的采样率？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T16:58:33.263

你可以重写

```
nb_write = lame_encode_buffer(lame, input, input, nb_read, output, BUFFER_SIZE); 
```

至

```
nb_write = lame_encode_buffer(lame, input1, input2, nb_read, output, BUFFER_SIZE); 
```

并使用 2 个单声道原始文件作为输入。当然，您必须调整您的 encodeFile - 函数，以便它将两个字符串作为源并处理所有内容两次。****

# css - 结合 css3 变换固定位置

> ID：16084883
> 
> 赞同：1
> 
> 时间：2013-04-18T13:52:41.393
> 
> 标签：css, css-transforms

我正在尝试使用 -webkit-transform:translatex(80%); 移动包含固定元素的容器；

通过这样做，我的固定元素会失去它的固定样式，直到我删除变换样式..

有谁知道我如何使用 transform:translatex 而不会丢失我的固定元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T09:41:01.940

尝试添加 -webkit-transform: translatex(0); 到固定的子元素

# php - Magento getSearchCriterias() 方法及其数组组成

> ID：16084889
> 
> 赞同：0
> 
> 时间：2013-04-18T13:52:54.503
> 
> 标签：php, magento

我正在查看 Mage_CatalogSearch_Block_Advanced_Result 类，我不明白为什么在 $searchcriterias 数组组合期间，开发人员使用这种奇怪的脚本：

```
public function getSearchCriterias()
{
    $searchCriterias = $this->getSearchModel()->getSearchCriterias();
    $middle = ceil(count($searchCriterias) / 2);
    $left = array_slice($searchCriterias, 0, $middle);
    $right = array_slice($searchCriterias, $middle);

    return array('left'=>$left, 'right'=>$right);
} 
```

为什么他们将数组分成 $left 和 $right？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:24:32.603

我的猜测是可用性原因。

像他们一样拆分搜索条件可以轻松地将它们显示为 2 列块（标准 Magento 模板为此`catalogsearch/advanced/result.phtml`使用两个`<ul>`'s）。

2 列的搜索条件块通常比 1 列的块占用更少的高度，因此用户将在2 列的块下方看到比 1 列的块下方**更多的结果。**

# wpf - 显示每行具有不同列数的数据矩阵

> ID：16084896
> 
> 赞同：0
> 
> 时间：2013-04-18T13:53:14.043
> 
> 标签：wpf

我需要在 WPF 应用程序中显示没有固定表格结构的“数据矩阵”，即

数据行 1：aaa bb ccc
数据行 2：222 $$ dddddd eeee
...
所有数据都在数组列表中。

我需要显示这些数据并使用户能够滚动浏览它。
奇怪的数据结构来自文本平面文件，我无法更改。

我已经阅读了很多，并尝试了列表视图和网格视图，但到目前为止我只能得到：

**1.**动态列创建，但这并不好，因为我对每一行都有不同的架构

**2.**将每一行数据呈现为（分隔/格式化）文本。但这并不好，因为所有行数据都以单个单元格结尾（显然）。

**3.**（*还没有这样做，希望避免*）有很多带有触发器的数据模板，每个模板都有不同的列数 - 比如从 5 到 40 - 以适应绝大多数行类型。

**我的问题是：**如何将这些数据绑定到类似列表/类似网格的可滚动视图？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:06:42.933

如果您不需要选择项目的能力，您可以使用嵌套的[ItemsControls](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)

只需将第一个绑定`ItemsControl`到您的数组集合，然后将其设置为绑定到值数组的`ItemTemplate`另一个。`ItemsControl`

像这样的东西：

```
<ScrollViewer Height="300" Width="400">
    <ItemsControl ItemsSource="{Binding ListOfArrays}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <ItemsControl ItemsSource="{Binding }">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding }"  Width="50" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:33:16.740

一次通过以找到最大列数。
构建一个具有 cols string[maxColCount] 属性的简单 Row 类。
在代码绑定中为 GridView 构建 maxColCount 列，并将源绑定到 cols[x]。

编译器需要一个属性，但您可以将列绑定到集合名称索引
用于构建和绑定 GridViewColumn 的语法

```
 gvc = new GridViewColumn();
            gvch = new GridViewColumnHeader();
            gvch.Content = fd.FieldDef.DispName;
            gvch.HorizontalContentAlignment = System.Windows.HorizontalAlignment.Stretch;
            if (fd.FieldDef.Sort)
            {
                gvch.Click += new RoutedEventHandler(SortClick);
                gvch.Tag = fd.FieldDef.Name;
            }

            // if (fd.ID == 0 || fd.ID == 1) gvc.Width = 60; sID, sParID
            if (!fd.AppliedDispGrid) gvc.Width = 0;
            gvc.Header = gvch;

            gvBinding = new Binding();
            gvBinding.Mode = BindingMode.OneWay;
            gvBinding.Path = new PropertyPath("DocFields[" + sDocBaseResultDocsFieldsIndex.ToString() + "].DispValueShort");

            template = new DataTemplate();
            textblock = new FrameworkElementFactory(typeof(TextBlock));
            textblock.SetValue(TextBlock.TextProperty, gvBinding);
            textblock.SetValue(TextBlock.TextTrimmingProperty, TextTrimming.WordEllipsis);

            // <Setter Property="TextTrimming" Value="WordEllipsis" />

            template.VisualTree = new FrameworkElementFactory(typeof(Grid));
            template.VisualTree.AppendChild(textblock);

            gvc.CellTemplate = template;

            gvSearchResults.Columns.Add(gvc); 
```

# html - 我如何为 html 中的两个文本字段输入的标签属性制作一个

> ID：16084906
> 
> 赞同：1
> 
> 时间：2013-04-18T13:53:46.587
> 
> 标签：html, for-loop, label

我们正在使用 IBM 理性策略测试来扫描我们的代码，它给了我们用户名和密码的缺陷，要求带有 for 属性的标签，有没有办法添加带有 for 的标签并且标签不会显示在屏幕上? 如果我使用空标签，软件仍然给我一个缺陷，但不同的信息

登入

```
 <input class="user-name" placeholder="Username" type="text" id="username" name="username"></input>
        <input class="password" placeholder="Password" type="password" id="password" name="password"></input>
        <input type="checkbox" id="chkRememberMe" name="chkRememberMe"></input> 
```

这是我从软件中得到的信息： 每个表单控件都应该有关联的文本 将文本与不是“隐藏”类型的每个表单控件关联起来。“提交”、“重置”和“按钮”类型的 INPUT 控件需要在“值”属性中设置文本。“图像”类型的 INPUT 控件需要在“alt”属性中设置文本。所有其他 FORM 控件都通过 LABEL 元素与文本相关联。LABEL 通过使用“for”属性附加到特定的表单控件。“for”属性的值必须与表单控件的“id”属性的值相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:56:04.613

只需添加它们并通过 CSS 隐藏它们就可以满足您的需要 -

```
<label for="username">Username</label>
<label for="password">Password</label> 
```

在 CSS 中：

```
label {display:none;} 
```

但请注意，通常最好将标签与可见的项目相关联 - 它也使可访问性更容易。

# c# - 将变量声明为一种类型，然后用“new”覆盖另一种类型

> ID：16084908
> 
> 赞同：1
> 
> 时间：2013-04-18T13:53:54.380
> 
> 标签：c#

抱歉，但想不出更好的方式来在标题中描述这一点。我也不是真正的开发人员，所以如果我混淆了我的字段、变量、对象和方法，请原谅。

无论如何，我有一些 C# 代码为我的类声明了一个私有变量，它在整个类中都可用。然而，在代码中，我实际上决定了它被声明为什么。当我跳入另一种方法时，由于原始声明，对象/变量的某些功能不可用。

```
private NetPeer _peer; //initially declared here so it's visible in the entire class
....
public void Initialise()
{
  if("some arbitrary validation") 
  {
    _peer = new NetServer(_config); // This is now a NetServer object and not NetPeer, but works fine
  }
  else
  {
    _peer = new NetClient(_config); // This is now a NetClient object and not NetPeer, but works fine
  }
  _peer.Start(); // This works fine as NetClient or NetServer. The method is available to both
}

public void SendIt()
{
  _peer.SendToAll(_message); //Now this "SendToAll" is only available with the NetServer and not NetClient. At runtime this fails miserably as you would expect
} 
```

那么有没有办法声明私有“_peer”变量而不将其定义为 NetServer 或 NetClient 直到稍后，或者我需要重新访问我的其余代码并使用两个单独的变量运行。

它与问题并没有明显相关，但我使用的是 Lidgren 库，它是 NetServer 和 NetClient 的来源。我想它很容易是这里引用的任何其他类或方法。

我还删除了许多其他逻辑和代码来展示这个例子。

**编辑：所以我没有意识到问一个通用的问题会引发这样的战斗。代码现在运行良好，我使用了 Damien 的建议，因为这对我来说是最容易理解的： ((NetServer)_peer).SendToAll(_message);

感谢所有为我的问题提供积极帮助的人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:55:51.637

您可以使用接口并让 NetServer 或 NetClient 从它派生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:03:28.297

您可以编写如下内容：

```
public void SendIt()
{
  var server = _peer as NetServer;
  if(_peer == null) throw new InvalidOperationException("SendIt called when we're not the server");
  server.SendToAll(_message);
} 
```

同样在其他仅适用于一种类型或另一种类型的方法中。我本可以省略这`if(_peer ...`条线，但那会留下`NullReferenceException`- 我更喜欢切换到更有意义的异常类型，同时能够提供关于具体哪里出错的提示。

同样，我本可以进行直接演员`((NetServer)_peer).SendToAll(...`，但这会引发一个`InvalidCastException`需要更多挖掘才能诊断问题的结果。我更喜欢使用[`as`](http://msdn.microsoft.com/en-gb/library/cscsdfbt%28v=vs.110%29.aspx)并尝试提供尽可能丰富的诊断体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:06:56.563

您可以添加两个包装器属性以在您的类中使用：

```
private NetServer _peerServer
{
  get { return _peer as NetServer; }
}
private NetClient _peerClient
{
  get { return _peer as NetClient; }
} 
```

任何时候使用这两个属性时，都需要进行空检查。例如：

```
public void SendIt()
{
  if(_peerServer == null) throw new InvalidOperationException("_peer is not a NetServer");
  _peerServer.SendToAll(_message); 
} 
```

不过，这并不是非常优雅。你真正应该做的是一些重构。将类拆分为单独的服务器/客户端相关部分，可能具有基类中的通用功能，将是最干净的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:35:07.483

这取决于您是否希望您的客户在您点击时也发送消息`SendIt()`。

如果这样做，您可以执行以下操作：

```
public void SendIt()
{
  if (_peer is NetServer)
    (_peer as NetServer).SendToAll(_message);
  else
    (_peer as NetClient).SendMessage(_message); //as radarbob says it is defined in the Lidgren library, I wouldn't know
} 
```

如果你不这样做，你可以这样做（或遵循 Damien 的建议）：

```
public void SendIt()
{
  if (!(_peer is NetServer)) throw new InvalidOperationException("SendIt called when we're not the server");
  (_peer as NetServer).SendToAll(_message);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-18T14:13:25.050

`NetServer`并且`NetClient`都继承自`NetPeer`. `SendToAll()`中未定义`NetPeer`，因此您必须使用`SendMessage()`中定义的方法`NetPeer`。这适用于任何继承类。

**编辑** 问题说它使用了一种叫做`Lidgren library`. 这始终是寻找答案的第一个地方。

# regex - VBA使用正则表达式执行方法在一个字符串中进行多个匹配

> ID：16084909
> 
> 赞同：1
> 
> 时间：2013-04-18T13:53:58.537
> 
> 标签：regex, vba, substring, multiple-matches

我正在尝试根据 1\. 2\. 年的经验来匹配各种职位的经验水平。该模式相当简单（例如：“BS/5”将是具有 5 年经验的理学学士学位。我也有遵循此方案但在同一字符串中具有多个学位和经验级别的条目（例如：“BS/ 5-MS/2") 被认为是等效的。我有一个基本函数可以匹配并找到子字符串模式，但即使我已将正则表达式的 .Global 属性设置为 true，它也不会返回多个匹配项对象。有什么想法吗？代码如下：

```
On Error Resume Next
ActiveWorkbook.VBProject.References.AddFromGuid "{3F4DACA7-160D-11D2-A8E9-00104B365C9F}", 5, 5

Dim theRegex As Object
Dim theString As String 

Set theRegex = CreateObject("VBScript.RegExp")

With regex
    .MultiLine = False
    .Global = True
    .IgnoreCase = False
End With

theRegex.Pattern = "([A-z][A-z][A-z]?/[0-9][0-9]?)"

theString = "MS/9-PhD/4"

Set MyMatches = theRegex.Execute(theString)

Debug.Print "SubMatches.Count: " & MyMatches.Item(0).SubMatches.Count

If MyMatches.Count <> 0 Then
        With MyMatches
            For myMatchCt = 0 To .Count - 1
                    Debug.Print "myMatchCt: " & myMatchCt
                    For subMtCt = 0 To .Item(subMtCt).SubMatches.Count - 1
                        Debug.Print "subMtCt: " & subMtCt
                        Debug.Print ("," & .Item(myMatchCt).SubMatches.Item(subMtCt))
                    Next
            Next
        End With
    Else
    Debug.Print "No Matches"
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:40:55.190

换行试试`With Regex`

至

```
With theRegex
    .MultiLine = False
    .Global = True
    .IgnoreCase = False
End With 
```

您的`On Error resume next`陈述掩盖了错误。

# android - Android：ID3v2 的 MediaMetadataRetriver 失败

> ID：16084913
> 
> 赞同：1
> 
> 时间：2013-04-18T13:54:13.880
> 
> 标签：android, mp3, metadata, id3, id3v2

我是为 Android（API 11 及更高版本）开发媒体播放器的小组的一员，我们在使用 MediaMetadataRetriever 时遇到了相当棘手的问题。它在 Android 4.2.2 手机和我们用于测试的各种模拟器上运行良好，但在 4.1 手机上却不行：它只为所有尝试提取元数据返回“null”，使用在所有其他设备上运行的相同代码。只有缺少 ID3v1 标签（但确实有 ID3v2）的 mp3 才会出现问题。

```
this.artist=reader.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST); 
```

这两款手机都是三星设备。我们知道给定的路径是有效的，因为它们适用于我们的播放功能。MediaMetadataRetriver 是在 3.0 中引入的，因此 Android 版本差异应该不相关（但可能无论如何）。我一直在搜索并没有发现任何与此问题相似的东西，有人知道可能导致这种情况的原因吗？

# php - 在数组中查找条目并将其放在首位或与第一个数组条目交换

> ID：16084916
> 
> 赞同：2
> 
> 时间：2013-04-18T13:54:16.800
> 
> 标签：php

我有一个充满数组的 PHP 数组，我想做的是在这个数组中搜索所选条目，如果有意义的话，将它与数组中的第一个条目交换...

因此，对于下面的示例，我选择了 Penny，因此我希望她要么走在 Bob 之前，要么与 Bob 交换位置。

我的数组如下所示：

```
$people = array(
array('Bob', 'Wilson'),
array('Jill', 'Thompson'),
array('Penny', 'Smith'),
array('Hugh', 'Carr')
); 
```

我曾尝试使用 array_search，但我认为我做得不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:08:17.280

```
for ($i = count($array) - 1; $i > 0; $i--) {
    if ($array[$i][0] == $first_name) { // Or by whatever you want to search? in_array...?
        $searched_array = array_splice($array, $i, 1);
        array_unshift($array, $searched_array[0]);
    }
} 
```

This is for prepending. If you want to swap, see the answer of @IAmNotProcrastinating

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:07:59.600

```
function swap (&$ary,$fromIndex,$toIndex=0)
{
    $temp=$ary[$toIndex];
    $ary[$toIndex]=$ary[$fromIndex];
    $ary[$fromIndex]=$temp;
}
foreach ($elements as $key => $element) {
    /* do the search, get the $key and swap */
} 
```

# html - JSP 显示错误（旧）值

> ID：16084926
> 
> 赞同：2
> 
> 时间：2013-04-18T13:55:10.637
> 
> 标签：html, jsp, servlets, javabeans, server-side

以下问题：

我使用 Servlet 作为控制器，使用 JSB 作为模型，使用 Java Bean 作为信息。这里的代码：

HTML/JSP:

```
<table summary="Diese Tabelle zeigt Informationen zum aktuellen Spiel">
                            <jsp:useBean id="game" class="model.Spiel" scope="session"/>
                            <tr><th id="leaderLabel" class="label">F&uuml;hrender</th><td id="leader" class="data"><%= game.getLeader() %></td></tr>
                            <tr><th id="roundLabel" class="label">Runde</th><td id="round" class="data"><%= game.getRound() %></td></tr>
                            <tr><th id="timeLabel" class="label">Zeit</th><td id="time" class="data"><%= game.getTime() %></td></tr>
                            <tr><th id="computerScoreLabel" class="label">W&uuml;rfelergebnis <em>Super C</em></th><td id="computerScore" class="data"><%= game.getComputerScore() %></td></tr>
                        </table> 
```

HTML Servlet 调用：

```
<a id="dice" href="GameServlet?action=wurfeln" tabindex="4">
                            <img id="diceImage" src="img/wuerfel1.png" alt="W&uuml;rfel mit einer Eins" />
                        </a> 
```

小服务程序：

```
if(action.equals("wurfeln")){
            // Get right game for the session
            Spiel game;
            HttpSession session = request.getSession(true);
            if(sessions.getGame(session)==null) {
                sessions.newSessions(session);
                game = sessions.getGame(session);
            }
            else {
                game = sessions.getGame(session);
            }

            // Runt methods on game
            game.setSpielerScore(); //Spieler würfelt
            game.setComputerScore(); //Computer würfelt

            // Load new JSB
            RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/table.jsp");
            dispatcher.forward(request, response);
        } 
```

Java Bean：（游戏）

```
package model;
import java.util.Random;

public class Spiel {
    private int Runde;
    private String Zeit;
    private int Spieler_Feld;
    private int Spieler_Wurfelergebnis;
    private String Spieler_Name;
    private int Computer_Feld;
    private int Computer_Wurfelergebnis;
    private String Computer_Name;
    private Random x;

    public Spiel() {
        this.Runde         = 1;
        this.Zeit          = "00:00";
        this.Spieler_Feld  = 1;
        this.Computer_Feld = 1;
        this.Spieler_Name  = "Super Mario";
        this.Computer_Name = "Super C";
        this.x             = new Random();
        this.Spieler_Wurfelergebnis  = 0;
        this.Computer_Wurfelergebnis = 0;
    }

    public void setRound(int round) {
        this.Runde = round;
    }

    public void setTime(String time) {
        this.Zeit = time;
    }

    public String getTime() {
        return this.Zeit;
    }

    public int getRound() {
        return this.Runde;
    }

    public void newRound() {
        this.Runde += 1;
    }

    public String getLeader() {
        if(this.Spieler_Feld > this.Computer_Feld) {
            return this.Spieler_Name;
        }
        else if(this.Spieler_Feld < this.Computer_Feld){
            return this.Computer_Name;
        }
        else {
            return "beide";
        }
    }

    public void setSpielerScore() {
        //Spieler würfelt
        //this.Spieler_Wurfelergebnis = this.x.nextInt(3)+1;
        this.Spieler_Wurfelergebnis = 3;
    }

    public void setComputerScore() {
        //Computer würfelt
        //this.Computer_Wurfelergebnis = this.x.nextInt(3)+1;
        this.Computer_Wurfelergebnis = 2;
    }

    public int getSpielerScore() {
        return this.Spieler_Wurfelergebnis;
    }

    public int getComputerScore() {
        return this.Computer_Wurfelergebnis;
    }
} 
```

Java Bean：（会话）

```
package model;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class Sessions {
    HashMap<HttpSession, Spiel> sessions = new HashMap<HttpSession, Spiel>();

    public void newSessions(HttpSession s) {
        if(!sessions.containsKey(s)) {
            Spiel newgame = new Spiel();
            sessions.put(s, newgame);
        }
    }

    public Spiel getGame(HttpSession s) {
        Spiel spiel = sessions.get(s);
        if (spiel != null) {
            return spiel;
        }
        else {
            return null;
        }
    }
} 
```

所以我遇到的问题是，随着 Servlet（请求调度程序 ....）中 JSP 的新负载，它实际上应该在新的 JSP 中显示更新的值。由于`game.setSpielerScore()`它会更改一些变量，但它会继续显示使用构造函数调用设置的值。

我有三个可能的想法为什么会发生这种情况：

1) JSP 代码有问题，可能没有收集到正确对象的值。

2) Session JavaBeans 有问题，它没有为会话返回正确的游戏或其他东西。

3）它没有正确更新游戏对象的变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:09:34.313

The `game` attribute needs to be set in the request.

```
if(action.equals("wurfeln")){
            // Get right game for the session
            Spiel game;
            HttpSession session = request.getSession(true);
            if(sessions.getGame(session)==null) {
                sessions.newSessions(session);
                game = sessions.getGame(session);
            }
            else {
                game = sessions.getGame(session);
            }

            // Runt methods on game
            game.setSpielerScore(); //Spieler würfelt
            game.setComputerScore(); //Computer würfelt

            request.setAttribute("game", game);//set the game in the request.

            // Load new JSB
            RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/table.jsp");
            dispatcher.forward(request, response);
        } 
```

**JSP**

```
<jsp:useBean id="game" class="model.Spiel" scope="request"/> 
```

# angularjs - AngularJS - ngShow - 它是否执行 DOM 组合？

> ID：16084934
> 
> 赞同：1
> 
> 时间：2013-04-18T13:55:28.043
> 
> 标签：angularjs, angularjs-directive

我知道即使`ngShow`评估为`false`，它仍然会在指令内执行脏检查。

也是如此`ngShow`（如`ng-show=false`）：

*   撰写`DOM`内部`ngShow`（因为它必须这样做`$compile`）然后隐藏/删除内容，或者
*   只执行脏检查而无需创建`DOM`元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:00:32.010

`ng-show`只会将元素设置为`display: none`. 所以它们仍然会在 DOM 中并且仍然会被 Angular 进行脏检查。

尝试使用类似的东西`ng-switch`从 DOM 中实际删除元素。 [http://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:01:50.870

Angular.js 在编译期间不会创建任何 DOM 节点。它让浏览器构建 DOM，然后简单地通过它并收集指令。

因此，如果节点在您的模板中，它们确实会被创建，但由浏览器创建，而不是 Angular。

# html - html 空间显示为 %2520 而不是 %20

> ID：16084935
> 
> 赞同：127
> 
> 时间：2013-04-18T13:55:30.213
> 
> 标签：html, url, filenames, url-encoding

将文件名传递给 firefox 浏览器会导致它`%2520` 用`%20`.

我在一个名为的文件中有以下 HTML `myhtml.html`：

```
<img src="C:\Documents and Settings\screenshots\Image01.png"/> 
```

当我加载`myhtml.html`到 Firefox 时，图像显示为损坏的图像。所以我右键单击链接查看图片，它显示了这个修改后的 URL：

```
file:///c:/Documents%2520and%2520Settings/screenshots/Image01.png
                    ^
                    ^-----Firefox changed my space to %2520. 
```

有没有搞错？它把我的空间变成了`%2520`. 它不应该将其转换为`%20`吗？

**如何更改此 HTML 文件以便浏览器可以找到我的图像？这里发生了什么？**

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-04-18T14:04:46.783

稍微解释一下那`%2520`是什么：

`%20`公共空格字符按照您自己的说明进行编码。`%`字符编码`%25`为.

你得到的方式`%2520`是当你的 url 已经有 a`%20`时，再次被 urlencoded 转换`%20`为`%2520`.

您（或您可能正在使用的任何框架）是双重编码字符吗？

**编辑：** 对此进行一些扩展，尤其是对于*本地*链接。假设您要链接到资源`C:\my path\my file.html`：

*   如果您仅提供本地文件路径，则浏览器应在转换时对给定的所有字符进行编码和保护（在上面，您应该给它加上空格，因为`%`它是一个有效的文件名字符，因此它将被编码）到正确的 URL（见下一点）。
*   如果您提供带有`file://`协议的 URL，则基本上说明您已采取所有预防措施并编码了需要编码的内容，其余应视为特殊字符。在上面的示例中，您应该因此提供`file:///c:/my%20path/my%20file.html`. 除了修复斜线之外，客户端不应在此处对字符进行编码。

笔记：

*   斜杠方向 - `/`URL 中使用正斜杠`\`，Windows 路径中使用反斜杠，但大多数客户端都可以通过将它们转换为正确的正斜杠来使用它们。
*   此外，协议名称后面有 3 个斜杠，因为您默默地指的是当前机器而不是远程主机（完整的未缩写路径是`file://localhost/c:/my%20path/my%file.html`），但同样大多数客户端将在没有主机部分的情况下工作（即只有两个斜杠) 假设您的意思是本地计算机并添加第三个斜杠。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-18T14:04:24.743

对于某些（可能是有效的）原因，url 被编码了两次。`%25`是 urlencoded`%`符号。所以原始网址看起来像：

```
http://server.com/my path/ 
```

然后它被 urlencoded 一次：

```
http://server.com/my%20path/ 
```

两次：

```
http://server.com/my%2520path/ 
```

所以你不应该做 urlencoding -*在你的情况下*- 因为其他组件似乎已经适合你了。只使用一个空格

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-18T14:01:45.560

当您尝试通过 firefox 浏览器访问本地文件名时，您必须强制使用`file:\\\`协议（[http://en.wikipedia.org/wiki/File_URI_scheme](http://en.wikipedia.org/wiki/File_URI_scheme)），否则 firefox 将对您的空间进行两次编码。从此更改 html 片段：

```
<img src="C:\Documents and Settings\screenshots\Image01.png"/> 
```

对此：

```
<img src="file:\\\C:\Documents and Settings\screenshots\Image01.png"/> 
```

或这个：

```
<img src="file://C:\Documents and Settings\screenshots\Image01.png"/> 
```

然后通知firefox这是一个本地文件名，它在浏览器中正确呈现图像，正确编码字符串一次。

有用的链接： http: [//support.mozilla.org/en-US/questions/900466](http://support.mozilla.org/en-US/questions/900466)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-20T10:44:25.107

尝试使用这个

```
file:///c:/Documents%20and%20Settings/screenshots/Image01.png 
```

每当您尝试使用 cmd 或任何 html 标签在浏览器中打开本地文件时，请使用“file:///”并将空格替换为 %20（空格的 url 编码）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-01T07:28:31.950

以下代码片段解决了我的问题。认为这可能对其他人有用。

```
var strEnc = this.$.txtSearch.value.replace(/\s/g, "-");
strEnc = strEnc.replace(/-/g, " ");
```

而是使用默认值`encodeURIComponent`，我的第一行代码将全部转换`spaces`为`hyphens`使用正则表达式模式`/\s\g`，而下一行则相反，即将全部转换`hyphens`回`spaces`使用另一个`regex pattern /-/g`. 这里`/g`实际上是负责`finding all`匹配字符。

当我将此值发送到我的 Ajax 调用时，它会作为`normal spaces`或简单地遍历`%20`，从而摆脱`double-encoding`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-10T05:15:54.647

尝试这个？

`encodeURIComponent('space word').replace(/%20/g,'+')`

# php - 准备好的语句未在锁定下执行

> ID：16084938
> 
> 赞同：0
> 
> 时间：2013-04-18T13:55:35.313
> 
> 标签：php, mysql, prepared-statement

我发现我无法在表锁下执行准备好的语句，页面锁定，好像命令正在等待释放，我必须手动终止锁。

这只是一个示例案例：

```
mysql_query("LOCK TABLE TBL WRITE");

$stmt = $mysqli->prepare("INSERT INTO TBL (ID) VALUES (?)");
$stmt->bind_param("i", $nextID);
$stmt->execute();

mysql_query("UNLOCK TABLES"); 
```

有没有理由会出现这种情况？在引入准备好的语句之前，它和没有锁的执行一样工作得很好。
这仅用于学习目的，因此请不要评论为什么需要锁定和自动递增 ID :)

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:57:15.980

`mysql_query`但 `$mysqli->prepare`

您将表锁定在由建立的连接中`mysql_connect`
难怪该表被锁定在所有其他连接中，包括由 mysqli 创建的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:58:36.957

当您使用 mysqli AND mysql 时，您正在使用两个不同的连接。使用一个或另一个。（只有锁定的连接（这里是mysql）才能写。）

在这里，您可以锁定另一个连接以防止写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:58:47.800

您无法执行`INSERT`查询，因为该`LOCK`语句是在不同的 mysql 会话上执行的。

据我所知，您有 2 个 mysql 会话：
1\. 使用内置 mysql 函数，如`mysql_query`
2\. 使用库连接到 mysql`$stmt->execute();`

所以尝试使用**相同**的mysql会话。

# google-maps-markers - 点击标记时如何更改默认相机行为？

> ID：16084944
> 
> 赞同：3
> 
> 时间：2013-04-18T13:55:42.603
> 
> 标签：google-maps-markers, google-maps-sdk-ios

在 Google Maps for iOS SDK 1.2 版中，点击标记的默认行为发生了变化。发布说明说：“点击标记时的默认行为已更新为也将相机平移到标记的位置”

我怎样才能恢复旧的行为，即不将相机中心平移到标记的位置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T07:05:57.840

将以下方法添加到您的 GMSMapView 委托实现。GMSMapView 将不再以所选标记为中心并恢复现有行为。

```
- (BOOL) mapView:(GMSMapView *)mapView didTapMarker:(GMSMarker *)marker {
     mapView.selectedMarker = marker;
     return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T17:52:10.117

你可以使用这个：

```
mapView.selectedMarker = nil

func mapView(_ mapView: GMSMapView, didTap marker: GMSMarker) -> Bool {
        mapView.selectedMarker = nil
        return true
} 
```

# c# - 32 位 C# 应用程序如何利用 64 位 DLL

> ID：16084945
> 
> 赞同：5
> 
> 时间：2013-04-18T13:55:46.123
> 
> 标签：c#, 32bit-64bit

我有一个带有目标 x86 安装程序的 32 位 C# 应用程序。这个应用程序可以安装在 x64 机器上运行没问题。然而，当我们在 x64 系统上安装时，来自供应商的第三方硬件（集成到软件中）现在需要使用 64 位 DLL。

目前我已经在我的项目中放置了 32 位 DLL 和 64 位 DLL。然而，目标 x86 安装程序显然不喜欢 64 位 DLL。

我是否可以创建一个解决方案，让我可以部署 64 位 DLL 和/或 32 位 DLL 并且仍然只有一个安装程序项目？（我查看了名为 Advanced Installer 的第三方软件，但我不确定这是否能帮助我实现所需的解决方案）

或者是否可以创建一个通用的安装程序项目？

注意：两个安装程序（x86 与 x64）部署是不可行的，因为我们有一个自动更新的过程，我不想重新定义。维护一个 MSI 文件对我来说很重要。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:03:59.790

使用 Advanced Installer 从 x86 MSI 安装文件不是问题，以下文章解释了如何执行此操作：http: [//www.advancedinstaller.com/user-guide/qa-OS-dependent-install.html](http://www.advancedinstaller.com/user-guide/qa-OS-dependent-install.html)

此外，如果您有两个同名的 DLL 版本需要放在文件夹中，您应该在这里查看：http: [//www.advancedinstaller.com/user-guide/qa-install-file-with-same -name.html](http://www.advancedinstaller.com/user-guide/qa-install-file-with-same-name.html)

但是，您应该首先检查您的应用程序是否可以正确加载 x64 DLL，正如他们在评论中提到的那样。

# c++ - c++-builder：转换成stdcall类型

> ID：16084946
> 
> 赞同：0
> 
> 时间：2013-04-18T13:55:49.263
> 
> 标签：c++, c++builder, stdcall, c++builder-xe2, owlnext

我目前正在尝试移植旧的 owl-c++-builder-projekt 以使用 XE2 和 owlnext。在旧文件中，我可以简单地调用一行

```
(FARPROC)LP_I2COpen = GetProcAddress(Hi_I2C, "I2COpen"); 
```

虽然 LP_I2Open 定义为

```
#ifdef WIN32
#define CALLING_CONVENTION  __stdcall
#else
#define CALLING_CONVENTION  far pascal
#endif

int CALLING_CONVENTION (*LP_I2COpen)(HWND hndl,HINSTANCE hInstance, struct I2C_PROP far *ps);

#ifdef _WIN64
typedef INT_PTR (FAR WINAPI *FARPROC)();
#else
typedef int (FAR WINAPI *FARPROC)();
#endif

WINBASEAPI FARPROC WINAPI GetProcAddress(... 
```

这些代码块实际上来自多个文件。我认为这个顺序很直观。

现在我有一些困难来根据需要重写它。我了解，现在左侧被理解为返回值的转换方法，但不能分配给特定值，因此会引发“L-Value expected”错误。但是，我不太清楚如何将 FARPROC 转换为适合 LP_I2COpen 的东西...尝试不进行任何转换会引发此错误：

```
[BCC32 Fehler] Dio.cpp(2906): E2034 Konvertierung von 'int (__stdcall *)()' nach 'int (__stdcall *)(HWND__ *,HINSTANCE__ *,I2C_PROP *)' nicht möglich 
```

那么，有人知道我在这条线上犯了哪些错误吗？

```
(FARPROC)LP_I2COpen = GetProcAddress(Hi_I2C, "I2COpen"); 
```

问候，朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:10:37.700

强制转换 l 值是无效的，并且 AFAIK 它一直是无效的，尽管一些编译器接受了它。从技术上讲，您创建了一个 FARPROC 类型的临时文件，然后在被丢弃之前为其分配 GetProcAddress() 的结果。正确的方法如下所示：

```
// function type alias
typedef int CALLINGCONVENTION I2COpenFn(HWND, HINSTANCE, I2C_PROP*);
// read and convert function pointer
I2COpenFn* LP_I2COpen = (I2COpenFn*)GetProcAddress(Hi_I2C, "I2COpen"); 
```

请注意，“远”之类的东西已经过时了。另请注意，这种 C 风格的转换很丑陋，但无论如何您都没有任何类型安全性，并且它被隔离到有限数量的代码中。如果可以，请使用正确的链接而不是在运行时加载 DLL。

# c# - Amazon Glacier 并行存档上传

> ID：16084954
> 
> 赞同：1
> 
> 时间：2013-04-18T13:56:01.070
> 
> 标签：c#, multithreading, amazon-glacier

我有一个示例应用程序，它使用适用于 .NET 高级 API 的 AWS 开发工具包将大小为 26 MB 的文件上传到 Amazon Glacier。该代码在没有线程的情况下工作正常，但使用线程池它在下面的行失败

```
 client.UploadMultipartPart(uploadMPUrequest); 
```

说错误消息：请求被中止：请求被取消。

堆栈跟踪：在 Amazon.Runtime.AmazonWebServiceClient.InvokeConfiguredRequest(AsyncResult asyncResult) 在 Amazon.Runtime.Amazon.Runtime.Amazon.Runtime.Amazon.Runtime.AmazonWebServiceClient.getRequestStreamCallback(IAsyncResult result) 在 Amazon.Runtime.AmazonWebServiceClient.handleHttpWebErrorResponse(AsyncResult asyncResult, WebException we) 在 Amazon.Runtime.AmazonWebServiceClient.InvokeHelper (AsyncResult asyncResult) 在 Amazon.Runtime.AmazonWebServiceClient.Invoke(AsyncResult asyncResult) 在 Amazon.Glacier.AmazonGlacierClient.invokeUploadMultipartPart(UploadMultipartPartRequest uploadMultipartPartRequest, AsyncCallback 回调, 对象状态, 布尔同步) 在 Amazon.Glacier.AmazonGlacierClient.UploadMultipartPart(UploadMultipartPartRequest uploadMultipartPartRequest)

注意：我正在多部分上传数据

请在以下链接中找到我的示例代码： [www.page-monitor.com/Downloads/ArchiveUploadMPU.cs](http://www.page-monitor.com/Downloads/ArchiveUploadMPU.cs)

是否有任何并行上传档案的示例代码？

谢谢和问候， 哈西娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T05:29:52.357

这是适用于线程的示例代码。ChunkDetails 是一个自定义库，用于传递 accessID、bucketname、offset 详细信息等。我也在使用 ThrottledStream。

```
 internal bool UploadUsingHighLevelAPI(String FilePath, ChunkDetails ObjMetaData,
                                            S3Operations.UploadType uploadType,
       Stream inputStream)
       {
       String METHOD_NAME = "UploadUsingHighLevelAPI";
        String keyName;
        String existingBucketName;
        TransferUtilityUploadRequest fileTransferUtilityRequest = null;
        int RetryTimes = 3;
        ThrottledStream throttleStreamObj = null;

        long bps = ThrottledStream.Infinite;
        try
        {

            keyName = ObjMetaData.KeyName;
            existingBucketName = ObjMetaData.BucketName;

            TransferUtility fileTransferUtility = new
                    TransferUtility(ObjMetaData.AccessKeyID,        ObjMetaData.SecretAccessKey);

            FileInfo fin = new FileInfo(FilePath);

            //streamObj = new FileStream(FilePath, FileMode.Open);

            bps = (long)(1024 * ObjMetaData.MaxAvailSpeed * ((double)ObjMetaData.Bandwidth / 100.0));

            throttleStreamObj = new ThrottledStream(ObjMetaData.FileStream, bps);

            System.Collections.Specialized.NameValueCollection metaInfo = new System.Collections.Specialized.NameValueCollection();
            if (ObjMetaData.MetaInfo != null)
            {
                foreach (DictionaryEntry kvp in ObjMetaData.MetaInfo)
                {
                    metaInfo.Add(kvp.Key.ToString(), kvp.Value.ToString());
                }
            }

            long OffDiff = ObjMetaData.EndOffset - ObjMetaData.StartOffset;
            long partSize;
            if (fin.Length >= OffDiff)
            {
                partSize = OffDiff;
            }
            else
                partSize = fin.Length;

            if (uploadType == UploadType.File)
            {
                //fileTransferUtility.Upload(FilePath, existingBucketName, keyName);

                fileTransferUtilityRequest =
                new TransferUtilityUploadRequest()
                .WithBucketName(existingBucketName)
                //.WithFilePath(FilePath)
                .WithStorageClass(S3StorageClass.ReducedRedundancy)
                .WithMetadata(metaInfo)
                .WithPartSize(partSize)
                .WithKey(keyName)
                .WithCannedACL(S3CannedACL.PublicRead)
                .WithTimeout(Int32.MaxValue - 1)
                .WithInputStream(throttleStreamObj) as TransferUtilityUploadRequest;

            }
            else if (uploadType == UploadType.Stream)
            {
                fileTransferUtilityRequest =
               new TransferUtilityUploadRequest()
               .WithBucketName(existingBucketName)
               .WithStorageClass(S3StorageClass.ReducedRedundancy)
               .WithMetadata(metaInfo)
               .WithPartSize(partSize)
               .WithKey(keyName)
               .WithCannedACL(S3CannedACL.PublicRead)
               .WithTimeout(Int32.MaxValue - 1)
               .WithInputStream(throttleStreamObj) as TransferUtilityUploadRequest
               ;
            }

            for (int index = 1; index <= RetryTimes; index++)
            {
                try
                {

                    // Upload part and add response to our list.
                    fileTransferUtility.Upload(fileTransferUtilityRequest);
                    Console.WriteLine(" ====== Upload Done =========");
                    if (eventChunkUploaded != null)
                        eventChunkUploaded(ObjMetaData);
                    break;

                }
                catch (Exception ex)
                {
                    if (index == RetryTimes)
                    {
                        m_objLogFile.LogError(CLASS_NAME, METHOD_NAME + " - Attempt " +
                            index + Environment.NewLine + FilePath, ex);

                        if (eventChunkUploadError != null)
                            eventChunkUploadError(ObjMetaData, ex.Message);

                    }
                }
            }
        }
        catch (Exception ex)
        {
            m_objLogFile.LogError(CLASS_NAME, METHOD_NAME, ex);
            return false;
        }
        finally
        {

            if (throttleStreamObj != null)
            {
                //inputStream1.Close();
                throttleStreamObj = null;
            }
        }

        return true;
   } 
```

如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:47:06.177

我相信代码中存在竞争条件。我正在研究相同的功能。我很乐意与您分享代码。如果您修复了您发布的代码，我将不胜感激它的链接。最好的问候，布鲁斯

# eclipse-plugin - How to disable comment folding in ShellEd

> ID：16084956
> 
> 赞同：7
> 
> 时间：2013-04-18T13:56:03.303
> 
> 标签：eclipse-plugin

I installed [ShellEd](http://sourceforge.net/projects/shelled/), a shell script editor for Eclipse.

It folds multiline-comments by default, and I can't find an option to turn it off. Is there such an option, and if so, where?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-06T16:46:49.313

右键单击编辑器中的折叠符号，从菜单中选择折叠，然后选择您喜欢的选项。

我花了几个月的时间才发现自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-12T15:24:30.090

这只是为了扩展 user3280555 已经给出的正确答案。

执行此操作的键盘快捷键是`Ctrl`+`Numpad_divide`

如果你想用你的鼠标做同样的事情：

这就是编辑器上的“折叠符号”的含义：

![在此处输入图像描述](https://i.stack.imgur.com/GSwuG.jpg)

右键单击它后，只需取消选中：`Folding > Enable Folding`

# c# - How to compare two List content data and return mismatch value?

> ID：16084959
> 
> 赞同：0
> 
> 时间：2013-04-18T13:56:11.887
> 
> 标签：c#, .net, linq, list

I have two List. Which content simple string values. As example:

IList1 content:

*   The Avengers
*   Shutter Island
*   Inception
*   The Dark Knight Rises

List2 content:

*   The Avengers
*   Shutter Island
*   Inception
*   The Dark Knight Rises
*   Parks and Recreation
*   Scandal

I want to compare two list and it will return mismatch value. Like in this case it will return "Parks and Recreation" and "Scandal" as they are not matching with the values of List1.

I tried it. But it throws exception "Object reference not set to an instance of an object".

```
static void Main(string[] args)
    {
        List<string> list1 = new List<string>();
        list1.Add("The Avengers");
        list1.Add("Shutter Island");
        list1.Add("Inception");
        list1.Add("The Dark Knight Rises");

        List<string> list2 = new List<string>();
        list2.Add("The Avengers");
        list2.Add("Shutter Island");
        list2.Add("Inception");
        list2.Add("The Dark Knight Rises");
        list2.Add("Parks and Recreation");
        list2.Add("Scandal");    

       try
        {
            List<string> difference = Comparator(list1, list2);
            foreach (var value in difference)
            {
                Console.WriteLine(value);
            }
        }
        catch (System.NullReferenceException e)
        {
            Console.WriteLine(e.Message);    
        }

        Console.ReadLine();

    }
    public static List<string> Comparator(List<string> list1, List<string> list2)
    {
        IEnumerable<string> differenceQuery = list1.Except(list2);
        List<string> differ = null;

        foreach (string s in differenceQuery)
            differ.Add(s);

        return differ;
    } 
```

Can anyone help me out? Thanks in advance.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T13:57:31.673

`Except`方法完全按照您的描述进行，因此只需调用`ToList`以在 a 中获取结果`List<T>`：

```
return list2.Except(list1).ToList(); 
```

您的代码抛出`NullReffereceException`，因为`differ`变量未初始化：

```
 List<string> differ = null; 
```

将其更改为：

```
 List<string> differ = new List<string>(); 
```

但是，我建议使用`ToList()`. 您`Comparator`的方法不需要：

```
 List<string> difference = list2.Except(list1).ToList()
        foreach (var value in difference)
        {
            Console.WriteLine(value);
        } 
```

***更新**- 整个代码，按预期工作*

```
static void Main(string[] args)
{
    List<string> list1 = new List<string>();
    list1.Add("The Avengers");
    list1.Add("Shutter Island");
    list1.Add("Inception");
    list1.Add("The Dark Knight Rises");

    List<string> list2 = new List<string>();
    list2.Add("The Avengers");
    list2.Add("Shutter Island");
    list2.Add("Inception");
    list2.Add("The Dark Knight Rises");
    list2.Add("Parks and Recreation");
    list2.Add("Scandal");

    List<string> difference = list2.Except(list1).ToList();
    foreach (var value in difference)
    {
        Console.WriteLine(value);
    }

    Console.ReadLine();
} 
```

*结果*

```
Parks and Recreation
Scandal 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T13:59:45.317

问题在于这一行：

```
List<string> differ = null; 
```

之后，您尝试将某些内容添加到列表中，但列表是`null`. 你的例外。

您可以按如下方式更改它：

```
List<string> differ = new List<string>(); 
```

但更简单的是替换这一行：

```
List<string> difference = Comparator(list1, list2); 
```

经过：

```
List<string> difference = list1.Except(list2).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:59:10.850

问题就在这里。

```
List<string> differ = null; 
```

需要是

```
List<string> differ = new List<string>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:58:42.347

利用`Except`

```
var difference = list1.Except(list2).ToList(); 
```

# javascript - Uncaught TypeError: Object Object] has no method 'datepicker'

> ID：16084961
> 
> 赞同：0
> 
> 时间：2013-04-18T13:56:13.533
> 
> 标签：javascript, jquery, jquery-ui, calendar

我无法在我的站点中修复 datepicker。我得到的错误是 Uncaught TypeError: Object [object Object] has no method 'datepicker'。我的代码是

```
<head>
<script src="{{ STATIC_URL }}scripts/modernizr-2.0.6.min.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-1.9.1.min.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-ui.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(function () {
    $( "#datepicker" ).datepicker({
      showOn: "button",
      buttonImage: "{{ STATIC_URL }}images/icon.png",
      buttonImageOnly: true
    });
  }); 
</script>
</head> 
```

它正在调度错误“Uncaught TypeError: Object [object Object] has no method 'datepicker'”。我能得到解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T12:11:55.037

不要两次导入 jQuery 库。

这是所有此类问题的主要原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T11:09:12.927

尝试这个

```
<head>
<script src="{{ STATIC_URL }}scripts/modernizr-2.0.6.min.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-1.9.1.min.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-ui.js"></script>
<script src="{{ STATIC_URL }}scripts/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(function () {
var jq = $.noConflict();
    $( "#datepicker" ).datepicker({
      showOn: "button",
      buttonImage: "{{ STATIC_URL }}images/icon.png",
      buttonImageOnly: true
    });
  }); 
</script>
</head> 
```

# android - 将gridview中的一项设置为在gridview加载时加下划线

> ID：16084965
> 
> 赞同：0
> 
> 时间：2013-04-18T13:56:20.390
> 
> 标签：android, gridview, underline

好的，所以我有一个字符串的gridview，我想要它，所以当我加载gridview 时，我可以有一个下划线。

```
final GridView gridview = (GridView)findViewById(R.id.gridView);
        final ArrayAdapter<String> arrayadapter = new ArrayAdapter<String>(
                this,
                R.layout.customstyle, 
                letters );

        gridview.setNumColumns(COLUMNSIZE);
        gridview.setAdapter(arrayadapter); 
```

这是我的gridview代码，那么我将如何设置一个带下划线的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:01:09.660

为什么不尝试使用**自定义** `adapter` 并传递 `SpannableString` 给`textview`.

```
SpannableString spanString = new SpannableString(textString);
text.setText(spanString); 
```

# java - 会话在创建条件时关闭

> ID：16084967
> 
> 赞同：0
> 
> 时间：2013-04-18T13:56:22.477
> 
> 标签：java, spring, hibernate, session, spring-mvc

以下代码在创建条件对象的行中引发 SessionException：

```
public User getUserByUsername(String username) {
        try {
            Criterion criterion = Restrictions.eq("username", username);
            Criteria criteria = (Criteria) getSession().createCriteria(User.class).add(criterion);

            return (User) criteria.uniqueResult();
        }
        catch(NullPointerException ex) {
            return new User();
        }
    } 
```

我的**getSession()**方法如下：

```
 public Session getSession() {
        if(session == null) {
            session = hibernateUtil.getSessionFactory().getCurrentSession();
        }
        return session;
    } 
```

*我已将hibernateUtil* bean注入到具有*getSession()*方法的类中。以下是例外。

```
org.hibernate.SessionException: Session is closed!
    at org.hibernate.internal.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:129)
    at org.hibernate.internal.SessionImpl.createCriteria(SessionImpl.java:1554)
    at com.csu.library.mvc.dao.implementation.UserDaoImpl.getUserByUsername(UserDaoImpl.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at com.sun.proxy.$Proxy55.getUserByUsername(Unknown Source)
    at com.csu.library.mvc.service.impl.UserServiceImpl.getUser(UserServiceImpl.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at com.sun.proxy.$Proxy60.getUser(Unknown Source)
    at com.csu.library.mvc.controller.UserController.homepage(UserController.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:827)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:04:21.587

您获得会话的方法很奇怪。你应该使用 sessionfactory，从事务中获取会话。

会话不应是实例变量（假设您使用单例范围服务）。

# python - Python Regex Search string for all substrings having one or more numbers

> ID：16084968
> 
> 赞同：0
> 
> 时间：2013-04-18T13:56:27.810
> 
> 标签：python, regex, string, numbers, substring

In python, I have the following string:

`"fish 14~ reel 14 rod B14"`

I want to use REGEX to run through a for loop and return the location of each substring having one or more numbers in it. Ex.:

```
 For ():
     print location of substring 
```

My expect output would be:

```
5
14
21 
```

Please help, thanks.

ANSWER: Ok I tested all of the following and they all work. So which one is fastest? Drum roll.... In order from fastest to slowest: 1) Perreal - 9.7ms 2) Jon - 10.5ms 3) m.buettner - 12.3ms 4) upasana - 25.6ms

Thanks to all of you Python geniuses. There was another solution but I didn't test it. For various other reasons I chose Jon's method for my program.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:07:49.060

就像是：

```
s =  "fish 14~ reel 14 rod B14"

import re

words = re.finditer('\S+', s)
has_digits = re.compile(r'\d').search
print [word.start() for word in words if has_digits(word.group())]
# [5, 14, 21] 
```

因此，有效地找到单词开头的索引，然后检查每个单词以查看其中是否有数字...

如果确实最后一个条目应该是 22 而不是 21，那么您已经在可能的重复项中找到了答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:12:57.387

尝试这个

```
import re

s =  "fish 14~ reel 14 rod B14" 

p = re.compile('[0-9]+')

a = p.findall(s)

print a 
```

获得职位

```
for m in re.finditer(r'([a-zA-Z]+)?[0-9]+', s):
    st, en = m.span() 
    print "position ", st, en, " string ", s[st:en] 
```

你应该看到

位置 5 7 弦 14
位置 14 16 弦 14
位置 21 24 弦 B14

哪个是对的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:14:29.380

您也可以在不使用正则表达式的情况下执行此操作：

```
p = list()
for i in [ i for i,c in enumerate(str) if c.isdigit() ]:
    if len(p) == 0 or p[-1] + 1 != i:
        p.append(i)
print p 
```

但这将为您提供不紧跟在另一个数字之前的数字的起始位置。向后弯曲以完成此操作：

```
p = list()
for i in [ i for i,c in enumerate(str) if c.isdigit() ]:
    if i > 0 and not str[i - 1].isdigit():
        while i > 0 and str[i - 1].isalnum():
            i -= 1
        p.append(i)
print p 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:11:04.153

尝试这个：

```
#!/usr/bin/env python

import re

str = "fish 14~ reel 14 rod B14"
index = 0
for x in str.split(" "):
    if re.search('\d', x):
        print(max(str.find(x), index))
    index += len(x) + 1 
```

**输出：**

```
5
14
21 
```

# git - Why does "git fetch" fail on HTTPS URLs with "Function is not available" on HP-UX?

> ID：16084971
> 
> 赞同：2
> 
> 时间：2013-04-18T13:56:41.723
> 
> 标签：git, curl, hp-ux

When I run `git fetch` I get the following:

```
$ git fetch
Password for 'xxx':
error: cannot create thread: Function is not available
fatal: cannot start thread to parse advertised refs
$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:56:41.723

问题是 git/curl 的这种特殊分布缺少 pthread。解决它的一种方法是使用`LD_PRELOAD`：

```
$ LD_PRELOAD=/usr/lib/hpux32/libpthread.so git fetch
Password for 'xxx':
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T03:11:31.573

对我来说，最后这个问题是由`Cannot allocate memory`低内存问题引起的。

所以请检查一下。希望能帮助到你。

# ember.js - EmberJS 动态路由和配置

> ID：16084978
> 
> 赞同：1
> 
> 时间：2013-04-18T13:57:06.147
> 
> 标签：ember.js, ember-router

我使用 EmberJS v1.0.0-rc.2 和 requireJS。
我的应用程序结构有点像这样。

```
- app
- - moduleA 
```

我的主文件：

```
#app/main.js

var App = Ember.Application.create({
    VERSION: '1.0',
    //Log router transitions:
    LOG_TRANSITIONS: true
});

App.Router.map(function() {
    AppRouting.call(this);
});

App = AppRoutingExtend(App);

App.initialize(); 
```

函数 AppRouting() 和 AppRoutingExtend() 可以在同伴文件中找到：

```
#app/routing.js

function AppRouting() {
    this.resource('root', {path: '/'}, function() {
        this.resource('moduleA', {path: '/'}, function() {
            ModuleARouting.call(this);
        });
    });
}

function AppRoutingExtend(App) {
    var ModuleARouting = ModuleARoutingExtend();

    //Check if ModuleARouting is not empty
    if (!Ember.isEmpty(ModuleARouting)) {
        $.each(ModuleARouting, function(key, value) {
            //Check if key is a string of only letters 
            //  And if value is like Ember.Route.extend({})
            if (typeof key === 'string' && /^[a-zA-Z]+$/.test(key)
                && value.toString() == '(subclass of Ember.Route)') {
                eval("App.Root" + "ModuleA" + key + "Route = value");
            } else {
                //Throw error
            }
        });
    }

    return App;
} 
```

函数 ModuleARouting() 和 ModuleARoutingExtend() 可以在以下文件中找到：

```
#app/moduleA/routing.js

function ModuleARouting() {
    this.route("contributors", {path: "/"});
    this.resource('aContributor', {path: "/:githubUserName"}, function() {
        this.route("details", {path: "/"});
        this.route("repos", {path: "/repos"});
    });
}

function ModuleARoutingExtend() {
    var routes = {};

    routes['Contributors'] = Ember.Route.extend({
        /*
            Some Code
        */
    });
    routes['AContributor'] = Ember.Route.extend({
        /*
            Some Code
        */
    });
    routes['AContributorDetails'] = Ember.Route.extend({
        /*
            Some Code
        */
    });
    routes['AContributorRepos'] = Ember.Route.extend({
        /*
            Some Code
        */
    });

    return routes;
} 
```

我创建`AppRouting()`并`ModuleARouting()`能够通过添加新模块或删除一个模块来动态地向我的应用程序添加一些路由路径。通过这种方式，每个模块都可以有自己的内部结构并`AppRouting()`合并它们。

但是，我不确定`ModuleARoutingExtend()`，更具体地说`AppRoutingExtend()`。在最后一个中，我尝试修改诸如`App.RootModuleAContributorsRoute`. 顺便说一句，我没有直接的信息`ModuleARouting.call(this)`，我不知道变量的名称`RootModuleAContributorsRoute`。这就是我通过从`ModuleARoutingExtend()`Ember.Route.extend({/* some code *}) 获取“贡献者”及其值来使用 eval 动态的原因；

所以，我的问题是：有没有更好的方法为我的应用程序动态添加一些路由并获取它们的配置？如果没有，它仍然是一个好方法吗？

# apache - Multiple conditions in htaccess

> ID：16084979
> 
> 赞同：0
> 
> 时间：2013-04-18T13:57:09.580
> 
> 标签：apache, .htaccess

I have a htaccess file which grabs pretty much anything after the / sign and gives it to my index.php?i. This works perfectly but I want to take it one step closer and have the same htaccess use conditions. Currently this is the navigation method mysite.com/stuff/cat the htaccess simply grabs the string stuff/cat and my PHP can then load up contents about it. But what I want to do is: when the navigation is mysite.com/stuff/cat/**images** I want the htaccess to redirect to another file rather than my index.php. Is it possible to add some kind of If statement or condition in htaccess? (if string contains '**images**' redirect to gallery.php?i=data)

here is my current code:

```
RewriteEngine On
RewriteOptions inherit
RewriteRule ^([a-zA-Z0-9/_\s'-()]+)$ index.php?i=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:27:04.137

您可以尝试以下操作（将其放在您的`RewriteOptions`:

```
RewriteRule ^([a-zA-Z0-9/_\s'-()]+)/images$ gallery.php?i=$1 [L] 
```

我也建议`L`在您的其他规则中使用标志（如上）。

# c++ - 模板中的参数相关查找

> ID：16084984
> 
> 赞同：3
> 
> 时间：2013-04-18T13:57:19.193
> 
> 标签：c++, templates, argument-dependent-lookup

我对模板上下文中的函数名查找感到困惑。我知道编译器会延迟模板化代码中与参数相关的标识符查找，直到模板被实例化。这意味着您有时可能会遇到语法错误或在模板代码中调用不存在的函数，除非您实际实例化模板，否则编译器不会抱怨。

但是，我发现不同编译器之间存在差异，我有兴趣了解标准本身的要求。

考虑以下代码：

```
#include <iostream>

class Foo
{
    public:

    template <class T>
    void bar(T v)
    {
        do_something(v);
    }
};

void do_something(std::string s)
{
    std::cout << "do_something(std::string)" << std::endl;
}

void do_something(int x)
{
    std::cout << "do_something(int)" << std::endl;
}

int main()
{
    Foo f;
    f.bar("abc");
    f.bar(123);
} 
```

请注意，模板成员函数`Foo::bar`调用了一个**不依赖于参数的全局函数**`do_something`，它***甚至还没有被声明***。

 *然而，GCC 4.6.3 将愉快地编译上述程序。运行时，输出为：

```
do_something(std::string)
do_something(int) 
```

[**这是一个ideone链接**](http://ideone.com/l4Iz2c)。

因此，看起来编译器将标识符查找延迟到模板实例化之后，此时它能够找到`do_something`.

相反，GCC 4.7.2**不会**编译上述程序。它产生以下错误：

```
test.cc: In instantiation of ‘void Foo::bar(T) [with T = const char*]’:
test.cc:27:13:   required from here
test.cc:10:3: error: ‘do_something’ was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
test.cc:19:6: note: ‘void do_something(int)’ declared here, later in the translation unit 
```

因此，GCC 4.7.2 知道`do_something`稍后声明，但拒绝编译程序，因为`do_something`它不依赖于参数。

所以，我假设 GCC 4.7.2 在这里可能是正确的，而 GCC 4.6.3 是不正确的。所以大概，我需要在定义`do_something`之前声明。`Foo::bar`这个问题是假设我想允许我的类的用户通过实现他们自己的重载`Foo`来扩展. 我需要写一些类似的东西：`Foo::bar``do_something`

```
#include <iostream>

template <class T>
void do_something(T v)
{
    std::cout << "do_something(T)" << std::endl;
}

class Foo
{
    public:

    template <class T>
    void bar(T v)
    {
        do_something(v);
    }
};

void do_something(int x)
{
    std::cout << "do_something(int)" << std::endl;
}

int main()
{
    Foo f;
    f.bar("abc");
    f.bar(123);
} 
```

`do_something`这里的问题是，从内部看不到的重载`Foo::bar`，因此从未调用过。所以即使我调用`do_something(int)`，它也会调用`do_something(T)`而不是重载 for `int`。因此，对于 GCC 4.6.3 和 GCC 4.7.2，上述程序输出：

```
do_something(T)
do_something(T) 
```

那么这里有哪些解决方案呢？如何允许用户`Foo::bar`通过实现自己的重载来扩展`do_something`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:01:31.643

就重载`do_something`而言，您需要专门化您的原始模板：

```
template<>
void do_something<int>(int x) {
    std::cout << "do_something(int)" << std::endl;
} 
```

* * *

**编辑：**作为@MatthieuM。指出，如果您还需要重载函数（并且在某些时候您可能需要，因为函数模板不能部分特化），函数模板特化会产生奇怪的结果。请参阅 Matthieu 链接到 Herb Sutter 的文章[Why Not Specialize Function Templates？](http://www.gotw.ca/publications/mill17.htm)以获得完整的解释。

相反，建议使用包装在结构中的静态函数，它允许部分特化并消除重载函数模板带来的名称解析问题。

```
template<typename T>
struct DoSomething {
    static void do_something(T v) {
        std::cout << "do_something(T)" << std::endl;
    }
};

struct Foo
{
    template <class T>
    void bar(T v) {
        DoSomething<T>::do_something(v);
    }
};

// Now you can specialize safely
template<>
struct DoSomething<int> {
    static void do_something(int v) {
        std::cout << "do_something(int)" << std::endl;
    }
}; 
```*

# join - How can join two table in yii with standard?

> ID：16084985
> 
> 赞同：0
> 
> 时间：2013-04-18T13:57:22.580
> 
> 标签：join, frameworks, yii

I am new in yii framework. and I want to know about take date from two table with join.

I try many times but not solve.

I know the join and know i use it manually. not yii standard.

I want to know **How can join two table in yii** framework with standard.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:09:03.833

In yii You want to use join code in $criteria object

e.g.

```
$criteria=new CDbCriteria;
$criteria->with =array('customer'=>array('select'=>'{{customer}}.*','joinType'=>'LEFT OUTER JOIN', ), ); 
```

and use relation function like

public function relations() { return array( 'customer' => array(self::BELONGS_TO, 'Customer', 'customer_id'), ); }

I think it solve your question

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T14:03:11.370

在 yii 中连接表很容易。

您想在 $criteria 对象中加入代码

例如

```
$criteria=new CDbCriteria;

$criteria->with =array('customer'=>array('select'=>'{{customer}}.*','joinType'=>'LEFT OUTER JOIN', ), ); 
```

并使用关系函数

```
public function relations() {
    return array(
        'customer' => array(self::BELONGS_TO, 'Customer', 'customer_id'),
    );
} 
```

我认为它解决了你的问题

# php - 关于 DISQUS 的问题 - 获取评论和评论计数

> ID：16084988
> 
> 赞同：0
> 
> 时间：2013-04-18T13:57:24.973
> 
> 标签：php, user-interface, disqus

我正在尝试使用 DISQUS 来实现一些事情，如下图所示（红色框）为我的[漫画网站](http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=66)...

*   获取特定漫画的评论数
*   获取特定评论，例如最新和最受欢迎的
*   截断评论，但允许用户单击*阅读更多*以展开评论或将其链接到实际漫画

![在此处输入图像描述](https://i.stack.imgur.com/YsyCV.jpg)

**1）获取评论数：**

为了获得评论计数，我遵循[了 DISQUS 的指南](http://htws.disqus.com/admin/universalcode/#comment-count)，但它只是给了我一个指向漫画评论位置的链接……而不是总数……他们说：

> 将 #disqus_thread 附加到链接中的 href 属性。这将告诉 Disqus 查找哪些链接并返回评论计数。例如：

```
<a href="http://foo.com/bar.html#disqus_thread">Link</a>. 
```

但是，如果我的 url 字符串是这样的，我将如何获得该计数：

`<a href=".?action=viewimage&site=comics&id=66">Link</a>`

所以我的问题是：

*   我会在哪里追加`#disqus_thread`？
*   如何从该漫画 URL 获取评论数并将这些总评论显示在另一页上？
*   为什么它只给我一个评论链接而不是相关漫画的评论编号？

* * *

**2) 获取特定评论，例如最新或最受欢迎的**

除了他们说我可能需要编写自己的脚本之外，我还没有真正找到任何关于此的文档[...](https://stackoverflow.com/questions/10838100/using-disqus-how-can-i-get-a-list-of-recent-comments-from-posts-and-have-them)

* * *

**3) 截断评论**

如果 #2 完全有可能，那么我将如何截断它？

谢谢！

# eclipse - 如何在 Eclipse 中更改文本光标颜色

> ID：16084990
> 
> 赞同：7
> 
> 时间：2013-04-18T13:57:26.550
> 
> 标签：eclipse

如何在 Eclipse IDE for Windows 中更改文本光标颜色？

我只想更改光标*的*颜色，但找不到执行此操作的选项。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:00:10.577

您可以在以下位置找到这些设置：

窗口 -> 首选项 -> 常规 -> 编辑器 -> 文本编辑器：外观颜色选项

和

窗口 -> 首选项 -> 常规 -> 外观 -> 颜色和字体：在基本文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T16:25:56.407

使用 Eclipse for PHP 时，我找不到一个仅用于光标的光标，但是如果您无法看到光标，您可以尝试将当前行颜色更改为更亮/更暗（参考：[如何更改当前的颜色Eclipse中的行和文本选择（对于 Java）？，](https://stackoverflow.com/questions/8652528/how-to-change-the-color-of-current-line-text-selection-in-eclipse-for-java)[Mac OS X 上 Eclipse 3.5/Zend Studio 7 中的光标颜色](https://stackoverflow.com/questions/1328795/cursor-color-in-eclipse-3-5-zend-studio-7-on-mac-os-x)。 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T07:48:37.433

我可以在这里帮你。它不受 Eclipse 的控制，它是鼠标的属性。导航到控制面板->从右上角下拉菜单中选择“大图标”->鼠标->指针->文本选择->浏览->选择适当的黑色粗指针。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-01T03:01:14.580

这是一个迟到的回复。我遇到了同样的问题，无论如何都找不到在eclipse中修复它。

原来我可以更改窗口设置中的文本选择图标。搜索鼠标属性并将文本选择更改为 beam_i.cur。它给了我一个更好的对比！

仅供参考，我的系统是win10。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-11T00:39:12.833

设置时光标颜色会隐式更改

Window -> Preferences -> General -> Editor -> TextEditors**当前行高亮**

直到今天还没有办法独立设置（Eclipse Neon.1）

如果您想要像我这样的黑色**背景颜色**，请使用自定义 RGB 30、30、30 设置此颜色，并且**当前行突出显示**黑色（光标变为白色时）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-05-25T16:17:30.583

Duffy356 的回答是正确的，但不完整：根据我的经验，外观颜色选项下的选择背景颜色似乎是光标颜色。

窗口 -> 首选项 -> 常规 -> 编辑器 -> 文本编辑器：在外观颜色选项下更改行号前景

# c - 将值分配给结构中的地址时出现C segfault

> ID：16084991
> 
> 赞同：1
> 
> 时间：2013-04-18T13:57:27.153
> 
> 标签：c, pointers, struct, embedded, segmentation-fault

我有两个这样的结构

```
typedef struct data {
    int datap;
    int channelNumber;
} data;

typedef struct RingBuffer {
    unsigned int *size;
    unsigned int *start;
    unsigned int *count;
    unsigned int *end;
    data *elems;
} RingBuffer; 
```

我正在尝试使用以下方法在某个内存位置（嵌入式应用程序）初始化环形缓冲区结构：

```
void rbInit(RingBuffer *rb, unsigned int size) {
    //put rb into appropriate memory locations
    rb->size = (unsigned int *) (RB_UTILS_SIZE + USERSPACE_OFFSET);
    rb->start = (unsigned int *) (RB_UTILS_START + USERSPACE_OFFSET);
    rb->count = (unsigned int *) (RB_UTILS_COUNT + USERSPACE_OFFSET);
    rb->end = (unsigned int *) (RB_UTILS_END + USERSPACE_OFFSET);
    rb->elems = (data *) (RB_DATA + USERSPACE_OFFSET);

    //intialize rb parameter/pointer values
    data empty;
    empty.datap = 0;
    empty.channelNumber = 0;

    *(rb->size) = size; //SEGFAULT HERE
    *(rb->start) = 0;
    *(rb->count) = 0;
    *(rb->end) = 0; 
    *(rb->elems) = empty;
} 
```

但是，代码段错误（请参阅代码中的注释）。我用 gdb 检查了 rb->size 确实指向我想要放置它的位置，是的，该位置可用（BeagleBone PRU 上的共享 ram）。`RB_UTILS_SIZE`,`USERSPACE_OFFSET`之类的只是十六进制地址#defined 别处。

我对可能是什么问题感到非常兴奋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:01:43.213

我对 BeagleBoard 并不特别熟悉，但在 Linux 中，如果不先从内核访问内存，就无法从进程访问 RAM。通常，您将使用 mmap 来访问内存，并且该调用将返回指向内存的指针以供您在应用程序中使用。这可能会有所帮助：

[如何在 C 中与 Linux 一起使用共享内存](https://stackoverflow.com/questions/5656530/how-to-use-shared-memory-with-linux-in-c)

您是否有理由尝试使用该特定地址而不是仅使用 malloc 获取内存？

# regex - Handling dates with Regex in Apache Pig

> ID：16084994
> 
> 赞同：2
> 
> 时间：2013-04-18T13:57:34.587
> 
> 标签：regex, apache-pig

Assuming that field `time` looks like `2013-01-01T00:00:00.000Z` , `piggybank.jar` has been imported already , and command `EXTRACT` has been defined (DEFINE EXTRACT org.apache.pig.piggybank.evaluation.string.EXTRACT();) What's the best way to extract fields `year, month, day, hour, minute, second` ? That's what I have done so far:

```
data = FOREACH data GENERATE FLATTEN(EXTRACT(time, '(\\d+)-(\\d+)-(\\d+)T(\\d+):(\\d+):(\\d+).(\\s+)'))
        AS (
            year: int,
            month: int,
            day: int,
            hour: int,
            minute: int,
            second: int,
            tail: chararray
        ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:47:40.213

从 Pig 0.11 开始，您可以使用 DateTime 类型。

```
A = LOAD 'data' AS (date:chararray);
B = FOREACH A GENERATE ToDate(date) AS date;
C = FOREACH B GENERATE GetMonth(date) as month; 
```

您可以在此处使用这些函数：[DateTime 函数](http://pig.apache.org/docs/r0.11.0/func.html#datetime-functions)

如果您不使用 0.11，您可以编写 UDF 或使用您发布的正则表达式。

# c# - Outlook Add-in, RibbonType Microsoft.Outlook.Explorer and Microsoft.Outlook.Mail.Read

> ID：16084995
> 
> 赞同：6
> 
> 时间：2013-04-18T13:57:34.817
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

I have an Outlook 2010 Add-in coded in .NET 4.0/VS.NET 2010, C#. The Add-in extends the Ribbon => it adds a `RibbonTab` with 4 RibbonButtons to (`RibbonType` Property is set to) `Microsoft.Outlook.Explorer` and `Microsoft.Outlook.Mail.Read`.

Now, if the user clicks on one of the RibbonButtons, how can i determine if the user clicked on the button which is added to the `Microsoft.Outlook.Explorer` OR `Microsoft.Outlook.Mail.Read`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:23:46.833

SilverNinja 的提议为我指明了一个方向.. 最后我的代码是：

```
 // get active Window
            object activeWindow = Globals.ThisAddIn.Application.ActiveWindow();
            if (activeWindow is Microsoft.Office.Interop.Outlook.Explorer)
            {
                // its an explorer window
                Outlook.Explorer explorer = Globals.ThisAddIn.Application.ActiveExplorer();
                Outlook.Selection selection = explorer.Selection;
                for (int i = 0; i < selection.Count; i++)
                {
                    if (selection[i + 1] is Outlook.MailItem)
                    {
                        Outlook.MailItem mailItem = selection[i + 1] as Outlook.MailItem;
                        CreateFormOrForm(mailItem);
                    }
                    else
                    {
                        Logging.Logging.Log.Debug("One or more of the selected items are not of type mail message..!");
                        System.Windows.Forms.MessageBox.Show("One or more of the selected items are not of type mail message..");
                    }
                }
            }
            if (activeWindow is Microsoft.Office.Interop.Outlook.Inspector)
            {
                // its an inspector window
                Outlook.Inspector inspector = Globals.ThisAddIn.Application.ActiveInspector();
                Outlook.MailItem mailItem = inspector.CurrentItem as Outlook.MailItem;
                CreateFormOrForm(mailItem);
            } 
```

也许这对其他人有帮助......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T16:23:06.913

一种选择是创建 (2) 具有共享功能库的功能区。当您调用共享库时 - 您可以传递单击了哪个功能区操作的上下文。

更好的选择是检查[`ActiveWindow`](http://msdn.microsoft.com/en-us/library/office/ff865654%28v=office.14%29.aspx)应用程序的属性以确定用户在哪个上下文中[`ThisAddin.Application.ActiveWindow()`](http://msdn.microsoft.com/en-us/library/office/ff865654%28v=office.14%29.aspx)。

```
 var windowType = Globals.ThisAddin.Application.ActiveWindow();
 if (windowType is Outlook.Explorer)
 {
     Outlook.Explorer exp = type as Outlook.Explorer;
     // you have an explorer context
 }
 else if (windowType is Outlook.Inspector)
 {
     Outlook.Inspector exp = type as Outlook.Inspector;
     // you have an inspector context
 } 
```

# hadoop - 无法运行 hadoop wordcount 示例？

> ID：16084998
> 
> 赞同：4
> 
> 时间：2013-04-18T13:57:42.627
> 
> 标签：hadoop, mapreduce

我在 vmware 的 ubuntu 12.04 的单节点环境中运行 hadoop wordcount 示例。我运行这样的例子： -

```
hadoop@master:~/hadoop$ hadoop jar hadoop-examples-1.0.4.jar wordcount    
/home/hadoop/gutenberg/ /home/hadoop/gutenberg-output 
```

我在以下位置有输入文件：

```
/home/hadoop/gutenberg 
```

输出文件的位置是：

```
 /home/hadoop/gutenberg-output 
```

当我运行 wordcount 程序时，出现以下错误：-

```
 13/04/18 06:02:10 INFO mapred.JobClient: Cleaning up the staging area     
hdfs://localhost:54310/home/hadoop/tmp/mapred/staging/hadoop/.staging/job_201304180554_0001       
13/04/18 06:02:10 ERROR security.UserGroupInformation: PriviledgedActionException       
as:hadoop cause:org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory 
/home/hadoop/gutenberg-output already exists 
org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory 
/home/hadoop/gutenberg-output already exists at 

org.apache.hadoop.mapreduce.lib.output.FileOutputFormat.checkOutputSpecs(FileOutputFormat.j 
ava:137) at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:887) at 
org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at   
org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850) at  
org.apache.hadoop.mapreduce.Job.submit(Job.java:500) at  
org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530) at 
org.apache.hadoop.examples.WordCount.main(WordCount.java:67) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
at java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68) 
at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139) at 
org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
at java.lang.reflect.Method.invoke(Method.java:616) at   
org.apache.hadoop.util.RunJar.main(RunJar.java:156) hadoop@master:~/hadoop$ bin/stop-
all.sh Warning: $HADOOP_HOME is deprecated. stopping jobtracker localhost: stopping   
tasktracker stopping namenode localhost: stopping datanode localhost: stopping 
secondarynamenode    hadoop@master:~/hadoop$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T14:00:34.960

删除已经存在的输出文件，或者输出到不同的文件。

（我有点好奇您考虑的错误消息的其他解释。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T01:38:12.907

就像戴夫（和例外）所说，您的输出目录已经存在。您要么需要输出到不同的目录，要么首先删除现有的目录，使用：

```
hadoop fs -rmr /home/hadoop/gutenberg-output 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-07T20:13:40.813

**如果您创建了自己的 .jar 并尝试运行它，请注意：**

为了运行您的工作，您必须编写如下内容：

```
hadoop jar <jar-path> <package-path> <input-in-hdfs-path> <output-in-hdfs-path> 
```

但是，如果您仔细查看驱动程序代码，**您会发现您已将其设置`arg[0]`为输入和`arg[1]`输出**......我将展示它：

```
FileInputFormart.addInputPath(conf, new Path(args[0]));
FileOutFormart.setOutputPath(conf, new Path(args[1])); 
```

但是，hadoop 以`arg[0`]`<package-path>`代替，`<input-in-hdfs-path>`而 arg[1]`<input-in-hdfs-path>`代替`<output-in-hdfs-path>`

因此，为了使其工作，您应该使用：

```
FileInputFormart.addInputPath(conf, new Path(args[1]));
FileOutFormart.setOutputPath(conf, new Path(args[2])); 
```

和`arg[1]`，`arg[2]`所以它会得到正确的东西！:) 希望它有所帮助。干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T10:17:15.083

检查是否有“tmp”文件夹。

hadoop fs -ls /

如果您看到输出文件夹或“tmp”，请删除两者（考虑到没有正在运行的活动作业）

hadoop fs -rmr /tmp