# StackOverflow 问答 14997000-14997999

# testing - 决策和语句覆盖劣势示例的问题

> ID：14997000
> 
> 赞同：0
> 
> 时间：2013-02-21T07:44:13.477
> 
> 标签：testing, code-coverage, logical-operators

我正在研究这些之间的区别，但无法理解其中的区别。对我来说似乎是一样的。他们不一样吗？风险来自短路，不是吗？

> 语句覆盖不需要测试逻辑运算符。在 C++ 和 C 中，这些运算符是 &&、|| 和 ?:。语句覆盖率无法区分由逻辑运算符分隔的代码与语句的其余部分。在语句中执行代码的任何部分都会导致语句覆盖声明整个语句被完全覆盖。当逻辑运算符避免不必要的评估（通过短路）时，语句覆盖率给出了夸大的覆盖率测量。

```
void function(const char* string1, const char* string2 = NULL);
...
void function(const char* string1, const char* string2)
{
    if (condition || strcmp(string1, string2) == 0) // Oops, possible null pointer passed to strcmp
    ...
} 
```

> 决策覆盖 - 一个缺点是该度量忽略了由于短路运算符而出现的布尔表达式中的分支。例如，考虑以下 C/C++/Java 代码片段：

```
if (condition1 && (condition2 || function1()))
    statement1;
else
    statement2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:16:07.317

它们略有不同，但都需要短路操作来证明您正确推测的问题。

**语句覆盖率问题**

```
if (complex-condition-evaluation-with-short-circuits) 
  doAction(); 
```

语句覆盖率可能会记录您访问了上述两行，但您可能永远不知道您是否执行了仅评估部分复杂条件的场景。

即在你的例子中`strcmp(...)`曾经被执行过吗？

**分支机构覆盖问题**

```
if (complex-condition-evaluation-with-short-circuits) 
  doAction(); 
else
  doOtherAction(); 
```

分支覆盖可能会记录您通过（源）代码中的所有路径，但会忽略作为复杂条件评估一部分的分支（如所述）。

即在您的示例中，分支覆盖不将其`||`视为备用分支，并将其视为仅通过代码的两条路径，而实际上它是四个。

```
path1 (calls doAction) => condition1 == true, condition2 == true, function1() == ?
path2 (calls doAction) => condition1 == true, condition2 == false, function1() == true
path3 (calls doOtherAction) => condition1 == true, condition2 == false, function1() == false
path4 (calls doOtherAction) => condition1 == false, condition2 == ?, function1() == ? 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:17:42.373

据我所知，这些示例中的风险来自短路，它们确实是等效的。在其他一些情况下，可能会有所不同。例如考虑以下情况：

```
if (a>5)
    b = 6
if (a<20)
    c = 4 + b 
```

对于语句覆盖率，测试就足够了`a=10`（所有行都将被执行）并且测试将通过。

对于决策覆盖，有必要评估所有 if 语句的真假。例如，可以通过两个测试`a=30`和100% 的决策覆盖率来实现`a=0`。后者将失败，因为`b`在这种情况下尚未设置变量。

因此，决策覆盖更强大；实际上 100% 的决策覆盖率保证了 100% 的语句覆盖率，但反之则不然。但是，仍然可以构建决策覆盖率不足以暴露错误的示例，无论该语言是否存在短路。

让我们考虑一种不会发生短路的情况

```
if (a>0 || b>0)
    c = 5 / b 
```

让我们用输入数据 a=0 来测试它；b=1；a=0，b=0。第一个足以提供语句覆盖。两者一起提供决策覆盖。但两者都没有在 if 中公开除以零。

# windows-store-apps - 如何启用 FPS 监视以测试 XAML 动画？

> ID：14997004
> 
> 赞同：5
> 
> 时间：2013-02-21T07:44:26.817
> 
> 标签：windows-store-apps, winrt-xaml, frame-rate

由于 Windows 应用商店应用程序可以在 Intel 和 ARM 架构上运行，因此动画（至少）尽可能高性能是很重要的。要测试动画，FPS 非常重要。如何在 Windows 中启用 FPS 监控？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T07:44:26.817

在 Windows 8 中，您可以这样做：

```
App.Current.DebugSettings.EnableFrameRateCounter = true; 
```

我喜欢这样做：

```
App.Current.DebugSettings.EnableFrameRateCounter 
    = System.Diagnostics.Debugger.IsAttached; 
```

此处记录了计数器 UI ( [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.debugsettings.enableframeratecounter.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.debugsettings.enableframeratecounter.aspx) )。

监视器包括：

*   Cp fps：合成线程的每秒帧数
*   UI fps：UI 线程的每秒帧数
*   内存：纹理的内存利用率
*   批处理：发送到图形处理单元 (GPU) 的表面计数
*   Cp cpu：在组合线程的处理器上花费的时间（以毫秒为单位）
*   UI cpu：在 UI 线程的处理器上花费的时间（以毫秒为单位）

# openldap - 5125cc8e register_matching_rule：找不到关联的匹配规则generalizedTimeMatch

> ID：14997018
> 
> 赞同：0
> 
> 时间：2013-02-21T07:45:43.787
> 
> 标签：openldap

在 Centos 6.3 上使用以下选项编译 openldap-2.4.33 后，我无法理解这个错误告诉我什么：

服务器安装为“最小”安装，带有以下插件：

```
yum install ntp autofs gcc make perl strace nmap tree rpm-build rpm-devel rpmdevtools rpm-libs rpm-python \
openssl openssl-devel perl-CPAN libtool libtool-ltdl-devel.x86_64 libtool-ltdl.x86_64 \
db4.x86_64 nss_db.x86_64 compat-db.x86_64 db4-devel.x86_64 \
tcp_wrappers.x86_64 tcp_wrappers-devel.x86_64 tcp_wrappers-libs.x86_64 \
unixODBC unixODBC-devel mysql-devel cyrus-sasl-devel.x86_64 perl-ExtUtils-Embed.x86_64 \
-y 
```

在 ESX 上将服务器基本安装为 VM 后，我运行以下 ./configure 进行编译和安装：

```
export CPPFLAGS="-I /usr/lib64/perl5/CORE" 
export LDFLAGS="-L/usr/lib64 -L/usr/lib64/perl5/CORE"
export PERL_CPPFLAGS="`perl -MExtUtils::Embed -e ccopts -I/usr/lib64/perl5/CORE`"
ldconfig
./configure \
--prefix=/ \
--enable-shared   --enable-debug   --enable-dynamic         --enable-syslog      --enable-proctitle  --enable-ipv6   \
--enable-local    --enable-slapd   --enable-cleartext       --enable-crypt       --enable-lmpasswd   --enable-spasswd  \
--enable-modules  --enable-rewrite --enable-rlookups        --enable-slapi       --enable-slp        --enable-wrappers  \
--enable-backends --enable-bdb     --enable-dnssrv          --enable-hdb         --enable-ldap       --enable-mdb  \
--enable-meta     --enable-monitor --enable-null            --enable-passwd      --enable-perl       --enable-relay    \
--enable-shell    --enable-sock    --enable-sql             --enable-overlays    --enable-accesslog  --enable-auditlog  \
--enable-collect  --enable-constraint  --enable-dds         --enable-deref       --enable-dyngroup   --enable-dynlist  \
--enable-memberof --enable-ppolicy     --enable-proxycache  --enable-refint      --enable-retcode    --enable-rwm         \
--enable-seqmod   --enable-sssvlv      --enable-syncprov    --enable-translucent --enable-unique     --enable-valsort      \
--enable-perl     --disable-ndb        --with-cyrus-sasl    --with-threads       --with-tls          --with-yielding-select  \ 
```

--with-mp

我采用了基本的 slapd.conf，只添加了我自己的 dn。

当我运行 slaptest 这是我得到的：

```
slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d/
5125cefd register_matching_rule: could not locate associated matching rule generalizedTimeMatch for ( 2.5.13.28 NAME 'generalizedTimeOrderingMatch' SYNTAX 1.3.6.1.4.1.1466.115.121.1.24 )
slap_schema_init: Error registering matching rule ( 2.5.13.28 NAME 'generalizedTimeOrderingMatch' SYNTAX 1.3.6.1.4.1.1466.115.121.1.24 )
5125cefd slaptest: slap_schema_init failed 
```

唯一有某种线索的模式是 ppolicy.schema，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:55:28.283

这些*匹配规则*是内部的，两者都是在 OpenLDAP 中定义的`servers/slapd/schema_init.c`，没有条件。 `generalizedTimeMatch`是首先定义的，然后是 ，它在其“关联”匹配规则`generalizedTimeOrderingMatch`中引用。`generalizedTimeMatch`错误源于`servers/slapd/mr.c`添加匹配规则。

匹配规则构建在一个数组中`struct slap_mrule_defs_rec`，并按顺序迭代。没有明显的方法会失败。

您的选项和覆盖列表非常完整。叠加层有可能存在一些不兼容或依赖性问题，但我没有看到它（几个叠加层添加到架构中并将*这些*匹配规则用作某些属性的副作用：`dds`, `ppolicy`, `accesslog`;`monitor`后端也是如此）。

我最好的猜测是存在一些编译问题，可能是由编译器选项引起的，优化/对齐和/或一些陈旧`.o`的文件，但我在这里猜测。您不包括实际的制作和安装步骤，同样有可能由于不完整的安装或以前的安装（旧的二进制文件或模式文件）引起一些冲突。

我建议：

```
make clean
make depend && make && make test 
```

看看会发生什么（`make test`需要相当长的时间）。它可以工作，那么您可能会考虑安装`/usr/local`以避免文件冲突。如果这不起作用，那么尝试一个简单`configure`的选项：

```
./configure --with-threads --with-tls 
```

然后只添加*您*需要的模块和后端。

# c# - WPF、WCF 和 Code First - 断开连接模式

> ID：14997020
> 
> 赞同：0
> 
> 时间：2013-02-21T07:45:52.087
> 
> 标签：c#, .net, wpf, wcf, ef-code-first

一些架构困境：我使用 WPF 作为我的客户端，使用 EF Code First 作为我的数据访问层，并使用 WCF 在它们之间进行连接。我的问题是在对数据库进行一些更改后重新更新 UI，例如：

1.  用户在 UI 上插入新的“人”（ID=0）
2.  用户将“Person”保存到数据库（例如 ID=10）

当谈论一个用户时，这很简单——我可以返回 ID 并更新我的 UI（因此对这个人的下一次更改将被视为“更新”），但是一次添加多个用户或更新其他用户呢？在服务器上计算的属性？我应该返回整个图表吗？更不用说在客户端重新映射它非常困难。

在 CodeFirst 之前我们可以使用 STE，但它有它自己的问题。有人知道已知的 CodeFirst 方法吗？

很高兴听到你的声音。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:50:17.103

您可以将您上次在客户端更新的日期时间作为请求发送到您的 wcf 服务。但是在服务器端，您会获取`Persons`在该日期时间之后更新/添加的所有内容并将其作为结果返回。这样，您将仅从`Person`服务器端获得修改/添加的 s。

因此，将 lastUpdate 列添加到您的实体`Person`中。

**编辑 1**

如果您想服务器更新客户端中的信息而不是客户端从服务器请求消息。

你可以使用它的工作方式`Web Programming`。

(1)`client-side`询问`server-side`- “嘿，我的最后一次更新是在 2013 年 10 月 2 日 20:00 ”，然后服务器查看数据库 - “是 2013 年 2 月 20 日 20:00 之后的新闻吗？” 如果是：

a) 将消息返回给客户端

如果数据库中没有消息：

b) 他不返回 null，但他执行 Thread.Sleep(somevalue)。他睡着了，然后重复对 db 的查询，并询问“db 中有消息”。所以这一切都在重复，直到数据库中的消息出现。在 db 中出现消息后，他返回`List<data>`dateTime 之后更新的消息。在那个客户得到数据后，他回到了这一点 - (1)。

所以你不会向服务器发出很多请求，而是只发出一个请求并等待来自服务器的消息。

注意2点：

1）如果客户端等待太久，服务器端会抛出异常（实际上不记得错误代码，但现在不重要了），所以你必须捕获这个异常`client-side`并发出新的请求`server-side`。此外，您必须配置`server-side`只要您可以等待时间，以尽量减少来自客户端的请求量。

2）您必须`data-updater`在新线程中运行它，而不是在应用程序运行的主线程中。

从代码中它的外观（它可能不起作用，我只是想向您展示逻辑）：

服务器端：

```
public List<SomeData> Updater(DateTime clientSideLastUpdate)
{
     List<SomeData> news = new List<SomeData>();
     while(true)
     {
         List<SomeData> news = dbContext.SomeData.Where(e=>e.UpdateDateTime > clientSideLastUpdate).ToList();
         if(news.Count()>0)
         {
             return news;
         }
     }
} 
```

客户端：

```
public static void Updater()
{
    try
    {
        var news = someServiceReference.Updater(DateTime clientSideLastUpdate);
        RenewDataInForms(news);
        Updater();
    }
    catch(ServerDiesOrWhatElseExcepption)
    {
        Updater()
    }
} 
```

在代码的某处，您在新线程中运行此更新程序

```
 Thread updaterThread = new Thread(Updater());
 updaterThread.Start(); 
```

**编辑 2**

如果您想通过一个请求更新所有实体，但不仅`SomeData`如此，您必须添加 Dto 对象，该对象将包含您想要更新的每个实体的列表。将`server-side`完成并返回此 Dto 对象。

希望能帮助到你。

# javascript - 使标签自动旋转？

> ID：14997032
> 
> 赞同：0
> 
> 时间：2013-02-21T07:46:31.967
> 
> 标签：javascript, jquery, drupal

我对 JS 不是很精通，想帮助我解决我遇到的问题。我想让 Drupal 网站上的标签自动旋转，但用户仍然可以点击它们。这是我的代码：

```
 <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script type="text/javascript">        
        $('ul.checklist-select li').click(function () {
        var selectID = $(this).attr('id');
        $('ul.checklist-select li').removeClass('active');
        $(this).addClass('active');
        $('.first-box, .second-box, .third-box, .fourth-box').fadeOut(300);
        $('.' + selectID + '-box').delay(300).fadeIn(300);});
        </script> 
```

我尝试了几个选项，但它不起作用。非常感谢！感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:08:34.967

好吧，您想添加一个间隔来更新视图并旋转到下一个（或第一个，如果它是最后一个）。

试试这个（未测试）：

```
<script type="text/javascript">
var index = 0, // Index of current tab
    interval = setInterval(function () { rotate(); }, 5000), // Interval
    $tabs = $('ul.checklist-select'),
    $content = $('.checklist_wrap');

// Click handler
$('ul.checklist-select li').each(function (i) {
    $(this).click(function () {
        index = i;
        switchElement();
    });
});

function rotate() {
    // Update index to next one
    index++;

    // Check if this is a valid index, or reset to 0
    if (index >= $tabs.children('li').length)
        index = 0;

    switchElement();
}

function switchElement() {
    clearInterval(interval);

    // Remove class from current tab
    $('ul.checklist-select li').removeClass('active');
    $('.checklist_wrap .box').fadeOut(300);

    // Show
    $tabs.children('li').eq(index).addClass('active');
    $content.children('.box').eq(index).delay(300).fadeIn(300);

    // Reset interval
    interval = setInterval(function () { rotate(); }, 5000);
}
</script> 
```

~~您可能要添加的内容是，当有人单击选项卡时会重置间隔。~~

# java - 正则表达式检索整数

> ID：14997033
> 
> 赞同：-2
> 
> 时间：2013-02-21T07:46:35.487
> 
> 标签：java, regex, string

嗨，我有一个类似“/yyyyyy/xm”的 URL，其中 x 可以是表示分钟数的整数。我需要解析并获取这个值。知道如何使用 regex 或 String.split() 方法吗？URL 的模式总是相同的，例如：

```
/magnetic/20m should give me the value 20
/temperature/500m should give me the value 500 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:47:59.537

以下应该有效：

```
/.*?/(\d+) 
```

你只需要访问第一组比赛，你就会得到那里的号码。

**编辑：**
将来，自己找到正则表达式。这是一个非常简单的正则表达式问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:55:37.367

如果你不喜欢正则表达式......

```
 String txt = "/magnetic/20m";
        String[] components = txt.split("/");
        String lastComponent = components[components.length - 1];
        int result = Integer.parseInt(lastComponent.replace("m", "")); 
```

# serialization - 在序列化、并发方面哪个更合适：哈希表或 BST？

> ID：14997034
> 
> 赞同：4
> 
> 时间：2013-02-21T07:46:35.253
> 
> 标签：serialization, concurrency, hashmap, binary-search-tree

我认为如果我们通过链接解决冲突，哈希表会更合适，因为对于任何读取或写入操作，我们都必须获取哈希表中该条目（索引和值）的锁定，而我们必须获取整个 BST 的锁定以对其进行任何更新。

我认为我们需要锁定整个 BST 结构，因为假设我们必须在树中插入一个新节点，我们首先必须遍历到达正确的父位置（比如节点 A），如果我们还没有获得锁定树结构可能会改变，我们必须重新开始。

在散列表的情况下，输入总是散列到相同的位置，我们知道要锁定哪个索引，这在 BST 的情况下是未知的。

请在我错的地方纠正我并帮助我找到正确的答案。

PS：这是一个亚马逊面试问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T00:20:45.070

你可以做一个混合解决方案。做一个哈希表，其中每个槽都是二叉树。所以说 1024 个插槽，每个插槽都有一棵二叉树。哈希上的冲突进入二叉树，不需要在插入时锁定所有内容，只需更新需要更新的树。

此外，如果您使用原子操作和一些技巧，您可以通过完全避免锁定来使其更加并发。原子更新插入新节点，如果原子更新失败另一个线程添加了一个节点，只需再次循环，直到成功。

**我已经这样做了** [https://github.com/exodist/GSD/tree/master/Structures](https://github.com/exodist/GSD/tree/master/Structures)

这是一个高度并发的哈希/树混合。它使用原子操作，没有互斥体。它可以在插入时旋转，但从不阻止对现有键的读取或更新。它可以调整大小/平衡/等。您可以遍历所有条目等。管理自己的内存并具有用于引用计数键/值的回调。您还可以将一个字典中的键“链接”到另一个字典，以便更新第一个键中的键会改变第二个键的值。

当您在问题上投入更多线程时，这种设计实际上会提高性能：

(T)是多少个线程，忽略MI，slots是使用了多少个hash slot，Ops是插入了多少个项目（除以线程看每个线程做了多少）

```
./performance.run
   T, MI,   Slots,      Ops:      Insert   Rebalance      Update      Resize      Lookup      Immute            
   4, 16,    1024,  5000000:  2.765500363  0.915232065  2.540659476  2.172654813  2.545409560  2.089993698
13.029449975
   4, 16,   32768,  5000000:  2.122459866  1.403548309  2.413483374  1.885083901  2.092272466  2.643681518
12.560529434
   4, 16, 1048576,  5000000:  1.700994809  1.063704010  2.030809367  2.457275707  1.453413924  3.671012425
12.377210242
  16, 16,    1024,  5000000:  0.785675781  2.311281904  1.805610753  0.621521146  0.549546473  0.744009412
6.817645469
  16, 16,   32768,  5000000:  0.497359638  0.316017553  1.257663142  0.610761414  0.390849355  0.825944608
3.898595710
  16, 16, 1048576,  5000000:  0.328308989  0.647632801  1.267230625  1.139402693  0.342399827  1.189220470
4.914195405
  64, 16,    1024,  5000000:  0.129407132  0.767262021  2.631929019  0.157977313  0.103848004  0.177964574
3.968388063
  64, 16,   32768,  5000000:  0.087656606  0.068330231  1.365794852  0.166261966  0.079112728  0.203542885
1.970699268
  64, 16, 1048576,  5000000:  0.074605680  0.284322979  1.372998607  0.650503349  0.084956938  0.828653807
3.296041360 
```

注意：在具有 8GB 内存的 i7 上单次运行。在从旧的 __sync 切换到 __atomic 的过程中使用 gcc atomic 内置函数，由于内存模型，这可能有助于提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:27:21.537

我认为就并发性而言，您所说的是正确的，哈希表将是更好的选择，但就序列化而言，我认为 BST 会更好。这是因为在 BST 中我们将只有数据节点，但是在哈希表中我们将有数据的键和值对，并且很少有没有值的键。因此，与 BST 相比，它在序列化时将需要更多空间。

# objective-c - 如何删除在 for 循环中创建的注释

> ID：14997039
> 
> 赞同：1
> 
> 时间：2013-02-21T07:46:54.647
> 
> 标签：objective-c, for-loop, annotations, mkmapview

我希望你能帮助我。我正在为学校做一些家庭作业，我们必须创建一个项目，该项目采用一组对象并从地图上的这些对象创建地图注释。我的对象有两个值，一个是 NSString *title，另一个是名为 coord 的 cllocationcoordinate2d。我有一个 for 循环填充我的地图视图上的地图注释，从数组中获取这些对象。

我的问题是：对于我的任务，我应该可以选择从我的数组中删除某些对象，并让地图视图从注释中删除那些已删除的对象。我不应该清除所有注释并在没有删除对象的情况下重新填充它们。换句话说，我想知道是否有办法从该方法的外部选择在 for 循环中创建的某个注释。我需要在我的注释对象中创建一个自定义 id 参数吗？

我会粘贴代码，但我不确定你需要看到什么。另外，如果这个问题含糊不清或令人困惑，我深表歉意；我以前从未真正使用过这个网站，也不必向任何人提出问题。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:59:10.217

试试这个代码，

```
NSMutableArray *annotationsToRemove = [[NSMutableArray alloc] init];

 for (int i = 0; i < [mapView.annotations count]; i++) {

    NSString *anonotationTitle = [[mapView.annotations objectAtIndex:i] title];

    if([annotationTitle isEqualToString:@"titleToDelete"]){
        [annotationsToRemove addObject:[mapView.annotations objectAtIndex:i]];
    }

 }

 [mapView removeAnnotations:annotationsToRemove]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:10:52.097

好的，您可以创建`MKAnnotationView`.

例如：

**MyCustomAnnotationView.h**

```
#import <Foundation/Foundation.h>
@class MKAnnotationView;

@interface MyCustomAnnotationView : MKAnnotationView
@property (nonatomic, strong) NSString* customId;

@end 
```

**主视图控制器.m**

```
...
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString* annotationIdentifier = @"annotationIdentifier";
    MyCustomAnnotationView* annotationView =
    (MyCustomAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:SFAnnotationIdentifier];
    annotationView.customId = [dataSource title];
    ....
}
.... 
```

`customId`并通过您的财产从您的数据源中删除他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:31:15.520

您打算如何选择要删除的注释？如果是通过点击附件控件（点击针时弹出的窗口右侧的小图标）完成的，那么您可以获得对注释的引用并将其从地图中删除，如下所示

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    MKAnnotation *tappedAnnotation = view.annotation;
    [mapView removeAnnotation:tappedAnnotation];
} 
```

参考： [MKMapViewdelegate](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3aannotationView%3acalloutAccessoryControlTapped%3a)

# javascript - 单击 JVectorMap 区域时获取光标的坐标

> ID：14997040
> 
> 赞同：3
> 
> 时间：2013-02-21T07:47:01.027
> 
> 标签：javascript, jvectormap

是否可以使用 JVectorMap 的事件来获取原始点击事件，以便访问光标的坐标？类似：

```
 `onRegionClick: function (event, code){
        alert(event.pageX +" "+ event.PageY);
                }` 
```

上面显示的代码不起作用。感谢任何提示，或者点击获取 JVectorMap 坐标的方法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:02:37.860

不可能。如果您需要单击坐标，可以将回调绑定到容器的单击事件。有关代码示例，请参阅此[演示](http://jvectormap.com/examples/reverse-projection/)。

# php - 取消链接无法删除文件

> ID：14997043
> 
> 赞同：4
> 
> 时间：2013-02-21T07:47:11.063
> 
> 标签：php, unlink

我对使用 PHP unlink() 在 ubuntu 中删除文件感到沮丧。

我创建了一个非常简单的模拟，如下所示：

1.  在具有 766 权限的 /var/www 下创建一个名为“files”的文件夹。
2.  上传文件，在该文件夹中说“image.png”并将权限设置为666
3.  创建一个名为delete.php的php文件，设置权限为644并上传到/var/www目录
4.  在浏览器中调用文件（我使用本地主机）

“image.png”仍然存在于“files”目录中

这是 delete.php 的 php 脚本：

```
$filename = 'image.png';
$file = $_SERVER['DOCUMENT_ROOT'] . DIRECTORY_SEPARATOR . 'files' . DIRECTORY_SEPARATOR . $filename;
unlink($file); 
```

我还尝试了以下脚本：

```
$filename = 'image.png';
$dir = $_SERVER['DOCUMENT_ROOT'] . DIRECTORY_SEPARATOR . 'files';
chdir($dir);
unlink($filename); 
```

但仍然无法删除文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T07:52:47.623

[取消链接](http://www.php.net/manual/en/function.unlink.php)会在失败时发出警告。检查 E_WARNING 是否可见，以了解发生了什么。

它通常归结为用户权限。请记住，如果您的脚本是由浏览器执行的，通常是一个名为`wwwrun`或`wwwdata`（或类似名称）的用户在您的服务器上执行它。

检查此用户是否有删除权限，然后重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T07:52:14.650

目录的文件夹/所有者可能是与用于运行 php.ini 的用户不同的用户。

您应该创建一个分配了用户 php 的文件夹。如果您自己无法做到这一点，请让您的 ISP 做到这一点。这就是我解决类似问题的方法。

一个用户不能在 unix 系统上删除另一个用户的文件。如果您将其设置为 777 那么您可以将其删除...

# c - 为什么 C 最适合 OS 编程？

> ID：14997045
> 
> 赞同：0
> 
> 时间：2013-02-21T07:47:45.333
> 
> 标签：c

我是一名计算机科学专业的学生，​​我正在尝试学习操作系统模块。我仍然对应该使用哪种语言进行测试感到困惑，C 还是 C++。大多数人说C很好。为什么c对操作系统很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T07:55:41.500

C 用于操作系统有四个主要原因：

1.  它是在冯诺依曼机器（绝大多数现代机器）上可执行的程序的低级可移植表示。通过小的、特定于供应商的修改，它可以用于非冯诺依曼机器。（通常此类机器唯一的主要遗漏是函数指针）
2.  它用于 Unix。大多数现代操作系统（即 Windows NT、OSX、Linux、BSD 等）都是某种 Unix 克隆。
3.  POSIX 标准是根据它指定的。
4.  它不需要广泛的运行时支持。

# android - 这个 Handler 类应该是静态的，否则可能会发生泄漏：

> ID：14997050
> 
> 赞同：0
> 
> 时间：2013-02-21T07:48:05.790
> 
> 标签：android, class, handler

这是我的代码，因为处理程序类应该是静态的，所以我遇到了问题。问题是当我得到结果时，在完成加载栏后需要花费太多时间来查看..

```
 progressDialog = ProgressDialog.show(MainActivity.this, "", 
                 "Loading. Please wait...", true);

        new Thread() 
        {
            public void run() 
            {
             try
                {
                URL userurl = new URL("https://api./////");
                BufferedReader in = new BufferedReader(new InputStreamReader(userurl.openStream()));
                String inputLine;
                String strJson1 = "";
                while ((inputLine = in.readLine()) != null) 
                {
                    strJson1 += inputLine;
                }

                jsonobj = new JSONObject(strJson1);

            questionarray = jsonobj.getJSONArray("items");

                } catch (MalformedURLException tagobject) {
                    // TODO Auto-generated catch block
                    tagobject.printStackTrace();
                } catch (IOException tagobject) {
                    // TODO Auto-generated catch block
                    tagobject.printStackTrace();
                }catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    }
     handler.sendEmptyMessage(0);
        progressDialog.dismiss();
    }
}.start();
handler = new Handler() {
@Override
public void handleMessage(Message msg) {
    try
    {
        for (int i = 0;  i<questionarray.length(); i++) {

            questionobj = questionarray.getJSONObject(i);                   
            uploadquestions = new HashMap<String, Object>();

            uploadquestions.put("question_id",questionobj.get("question_id"));}
    catch(Exception e)
{
System.out.println(e);
}

}
}; 
```

任何人都可以帮助我..

# javascript - 使用 javascript 的 windows 8 语义缩放

> ID：14997056
> 
> 赞同：0
> 
> 时间：2013-02-21T07:48:36.000
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我的项目中有多个列表视图如何为以下代码实现语义缩放提前感谢

```
 <section aria-label="Main content" role="main">
        <div id="detailsSection"   style="width: 100%; overflow-x: 
      scroll;height:100%;overflow-y:hidden;">
            <table style="height:100%;">
                <tr>                       
                    <td style="width: auto; height:100%;" id="myDealsSection">
                        <table style="height:100%;margin-left:120px;
        margin-bottom:50px;">
                            <thead>
                                <tr>
           <td style="font-size: 17pt;font-family: 'segoe   ui';width:100px;
   height: 12px;padding-left:5px;"><span id="MyDeals">My Deals</span></td><td>
  <img id="dealsHeaderImg" src="/images/Arrow1.png" style="display:none;
  padding-left:5px;"/></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
              <td colspan="2" style="width:auto;height:100%;vertical-align: top;">
                      <div id="homePageDealsList" aria-label="List of  this group'
   s items" style="height: 100%; width: auto;" data-win-control="WinJS.UI.ListView"   

  data-win-options="{ selectionMode: 'single',layout: {type:WinJS.UI.GridLayout} }"> 

   </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>                       
                    <td style="padding-left: 50px; width: auto;height:100%;" 

  id="trackDealsSection">
                        <table style="height:100%;">
                            <thead>
                                <tr>
                                    <td style="font-family: 'segoe ui';height: 

   12px;width:120px;padding-left:5px;font-size:17pt;"><span id="TrackDeals">Track 

   Deals</span></td><td><img id="trackdealsHeaderImg" src="/images/Arrow1.png" 

   style="display:none"/></td> 
                                </tr>
                           </thead>
                            <tbody>
                                <tr>
                                    <td colspan="2" style="width: auto;height:100%;  

   vertical-align: top;">
                                         <div id="trackDealsList" 

   class="trackDealsItemsList" aria-label="List of this group's items" 

   style="height:100%; width:auto;margin-bottom:50px;" data-win-

     control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'single', layout: 

    {type:WinJS.UI.GridLayout} }"></div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>

   </tr>

      </table>

     </div> 
```

对于此代码，当我实现语义缩放时，它不显示任何数据。所以如何解决这个问题。请......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:44:48.153

组成 Semantic Zoom 的 listViews 必须是 Semantic Zoom 控件的唯一子元素。像这样的东西...

```
<div id="semanticZoomDiv" data-win-control="WinJS.UI.SemanticZoom">   

    <!-- The zoomed-in view. -->    
    <div id="zoomedInListView"
        data-win-control="WinJS.UI.ListView" 
        data-win-options="{ itemDataSource: myData.groupedItemsList.dataSource, itemTemplate: select('#mediumListIconTextTemplate'), groupHeaderTemplate: select('#headerTemplate'), groupDataSource: myData.groupedItemsList.groups.dataSource, selectionMode: 'none', tapBehavior: 'none', swipeBehavior: 'none' }"
    ></div>

    <!--- The zoomed-out view. -->
    <div id="zoomedOutListView"
        data-win-control="WinJS.UI.ListView"
        data-win-options="{ itemDataSource: myData.groupedItemsList.groups.dataSource, itemTemplate: select('#semanticZoomTemplate'), selectionMode: 'none', tapBehavior: 'invoke', swipeBehavior: 'none' }"
    ></div>

</div> 
```

您的标记布局方式，您不能对其使用语义缩放。查看[语义缩放快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh465492.aspx)、语义缩放[指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465319.aspx)和[语义缩放示例](http://code.msdn.microsoft.com/windowsapps/ListView-grouping-and-6d032cc1)。

# iphone - 在 UILabel 中，虚线在 iOS 中是否显示在前面？

> ID：14997058
> 
> 赞同：0
> 
> 时间：2013-02-21T07:48:37.290
> 
> 标签：iphone, ios, objective-c, uilabel

我想在文本前面显示虚线（与 Apple 默认键盘标签相同）。

就像（....嗨）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:02:35.817

点会自动出现。如果您的文本与标签大小相比较大。然后点会来

自动地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:03:04.103

在界面生成器中：换行模式 -> 截断头部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:12:52.677

对于 iOS 6`NSLineBreakByTruncatingHead`使用[NSLineBreakMode](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/c/tdef/NSLineBreakMode)。

从文档：

> NSLineBreakByTruncatingHead 显示该行以使结尾适合容器，并且该行开头的缺失文本由省略号字形指示。尽管此模式适用于多行文本，但它更常用于单行文本。

`UILineBreakModeHeadTruncation`对于 iOS < 6 ，您可以使用[UILineBreakMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#)。

# java - 如何将消息发送到 TOPIC 然后发送到 MDB？

> ID：14997059
> 
> 赞同：0
> 
> 时间：2013-02-21T07:48:42.680
> 
> 标签：java, ejb-3.0, ibm-mq, websphere-7

在我们的项目中，我们正在使用 Websphere MQ。

最初，我们使用 RFHUtil 将消息发送到队列。

要求我们必须使用Topic。

那么我们如何向主题发送消息..??

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:39:09.493

WebSphere MQ v7.x 附带了许多示例。一个这样的示例`amqspub`可用于将出版物发送到某个主题。以下是您如何使用此示例应用程序

```
amqspub "/SPORTS/FOOTBALL/BARCA" QMSPORT 
```

其中“/SPORTS/FOOTBALL/BARCA”是主题字符串，QMSPORT 是队列管理器名称。还有一些 Java 示例。

# c++ - 循环未给出预期答案 - 不确定退出/返回/中断

> ID：14997061
> 
> 赞同：0
> 
> 时间：2013-02-21T07:48:44.670
> 
> 标签：c++, loops, queue, containers

我正在测试一段简单的代码，以了解如何使用队列（以及练习向量）。

我写了这段代码：

```
#include "stdafx.h"
#include <iostream>
#include <queue>

struct msgInfo //contains the attributes as gleaned from the original (IP) message
    {
        int age;
        std::string name;
    };

using namespace std;

int main ()
{
    vector<vector<queue<msgInfo>>> nodeInc; //container for messages
int qosLevels = 7; //priority levels
int nodes = 5; //number of nodes
vector<queue<msgInfo>> queuesOfNodes(qosLevels);

int i;
for (i=0; i<nodes; i++)
{
    nodeInc.push_back(queuesOfNodes);
}

msgInfo potato, tomato, domato, bomato;
potato.age = 2;
potato.name = "dud"; 
tomato.age = 3;
tomato.name = "bud"; 
domato.age = 4;
domato.name = "mud"; 
bomato.age = 5;
bomato.name = "pud"; 

nodeInc[2][2].push(potato);
nodeInc[2][2].push(tomato);
nodeInc[2][3].push(domato);
nodeInc[2][3].push(bomato);

for (int j = 0; j < 2; j++) //simple loop for testing: for each round, output the age of only one 'msgInfo'
{
    cout << j << endl;
    for (int k = (qosLevels-1); k >= 0; k--)
    {
        if (!nodeInc[2][k].empty())
        {
            cout << nodeInc[2][k].front().age << endl;
            nodeInc[2][k].pop();
            return 0;
        }
        else
            break;

    }
} 
```

}

我得到的输出是

```
0
1 
```

但我想要得到的是

```
0
4
1
5 
```

我在这里做错了什么？我不知道我的逻辑哪里错了——在我看来，它应该输出属于最高填充优先级的前两个元素。我认为这与我退出循环的方式有关——基本上我希望每一轮 for 循环在“弹出”之前只输出一个 msgInfo 的年龄——但我已经尝试了退出/返回/中断和它没有奏效。

**编辑**

我正在接收来自节点的消息。这些消息需要根据它们的属性放入队列中：节点和优先级。我决定使用 a`vector<vector<queue<msgInfo>>>`来执行此操作 -> 本质上是节点 < 优先级 < 消息队列>>。当访问这个容器时，我需要它一次输出一个 msgInfo 的年龄 - msgInfo 将是最高优先级队列的前面。并非所有优先级都会被填充，因此需要从最高优先级迭代到最低优先级才能找到相关元素。

我需要设计一个循环，一次输出这些（因为需要在每一轮循环之间进行其他处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:00:43.490

你期望`return 0`和`break`做什么？

`return 0`退出整个`main`函数，因此您的程序将在遇到非空队列时结束。

`break`终止最里面的封闭循环（即`for (i ...)`）。换句话说，您当前的逻辑是：

对于每`j`一个`0`，`1`执行：

如果`nodeInc[2][qosLevels - 1]`不为空，则打印其前面并退出程序；否则不再尝试`i`s 并执行 next `j`。

我不知道预期的行为是什么，但根据您给出的“预期输出”，您应该替换`return 0`为`break`，并完全省略该`else`子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:01:47.800

我能得到的最接近的是：

```
for (int j = 0; j < 2; j++) //simple loop for testing: for each round, output the age of only one 'msgInfo'
{
    cout << j << endl;
    for (i = (qosLevels-1); i >= 0; i--)
    {
        if (!nodeInc[2][i].empty())
        {
            cout << nodeInc[2][i].front().age << endl;
            nodeInc[2][i].pop();
            //return 0;  <--------DON'T return. this terminates the program
            break;
        }
        //else
        //    break;
    }
} 
```

返回：

```
0
4
1
5 
```

正如评论中所述，调用`return 0;`从程序返回`main()`并因此终止程序（实际上是一种和平退出）。

# python - Python程序在我运行时没有响应

> ID：14997065
> 
> 赞同：1
> 
> 时间：2013-02-21T07:48:57.277
> 
> 标签：python, libtcod

我使用 Libtcod 在 python 中制作了一个 roguelike。当我运行代码时，会弹出窗口，在屏幕上绘制符号，但随后窗口冻结。然后它说它没有响应。我不明白发生了什么。这是代码：

```
import libtcodpy as libtcod;

SCREEN_WIDTH = 80;
SCREEN_HEIGHT = 50;
LIMIT_FPS = 20;

libtcod.console_set_custom_font('arial10x10.png', libtcod.FONT_TYPE_GREYSCALE | libtcod.FONT_LAYOUT_TCOD);

libtcod.console_init_root(SCREEN_WIDTH, SCREEN_HEIGHT, 'Lets Crawl', False);

libtcod.sys_set_fps(LIMIT_FPS);

playerx = SCREEN_WIDTH/2;
playery = SCREEN_HEIGHT/2;

def handle_keys():
    global playerx, playery

    if libtcod.console_is_key_pressed(libtcod.KEY_UP):
        playery -= 1

    elif libtcod.console_is_key_pressed(libtcod.KEY_DOWN):
        playery += 1

    elif libtcod.console_is_key_pressed(libtcod.KEY_LEFT):
        playerx -= 1

    elif libtcod.console_is_key_pressed(libtcod.KEY_RIGHT):
        playerx += 1

while not libtcod.console_is_window_closed():
    #libtcod.console_set_default_foreground(0, libtcod.white);
    libtcod.console_put_char(0, 1, 1, 'b');
    libtcod.console_flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:59:00.227

您的游戏没有响应，因为它运行无限循环（您的`while`循环）。

您应该调用`libtcod.console_wait_for_keypress(True)`或`libtcod.console_check_for_keypress()`在循环中的某个地方实际能够处理用户输入。

# javascript - 如何在不使用 !important 的情况下覆盖 primefaces 组件内联样式？

> ID：14997066
> 
> 赞同：5
> 
> 时间：2013-02-21T07:49:15.377
> 
> 标签：javascript, html, css, jsf, primefaces

我在`p:selectonemenu`我的一个网页上使用 primefaces 组件。我正在尝试使用我自己的 css（不使用`!important`）对其应用样式，但它没有从我自己的外部 css 文件中获取样式。它从某个地方采用了一些内联样式，但我不希望该组件具有那种内联样式。我希望它使用我自己的外部 css 文件中的样式。

我没有从这种内联样式的来源得到。这是来自任何javascript吗？我需要帮助，下面是我的代码。

### Primefaces 代码

```
<p:selectOneMenu value="#{Controller.property}" id="dropDown">
  <f:selectItem itemLabel="Select One" itemValue="0" />
  <f:selectItems value="#{controller.property}"/>
</p:selectOneMenu> 
```

### HTML 解释代码

```
<div id="j_idt40" class="ui-selectonemenu ui-widget ui-state-default 
ui-corner-all ui-helper-clearfix" style="width: 190px;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:10:50.900

> *这是来自任何javascript吗？*

这是正确的。此内联样式由`PrimeFaces.widget.SelectOneMenu.initWidths`in设置`primefaces.js`。

唯一可以覆盖它的方法`!important`是自己指定内联样式。

```
<p:selectOneMenu ... style="width: 500px"> 
```

您也可以`PrimeFaces.widget.SelectOneMenu.initWidths`使用自定义 JS 文件覆盖 ，但这会影响所有`<p:selectOneMenu>`组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:13:06.063

Inline styles have the greatest "specificity", and they override all applicable rules, so your only remedy is `!important` (unless you can override the `style` property value somehow).

**EDIT**: Sorry for overlooking the core question. So, your recipe is as follows:

Insert

> ```
>  <script>
>    debugger;
>  </script> 
> ```

at the end of your `<body>`, open DevTools, and load the page.

Now, once you are in your DevTools debugger, switch to the Elements panel, and find the element that receives the inline style. It should not have it just yet.

Right-click this element and in the context menu choose `Break on...` | `Attribute modifications`. Now, when the `style` attribute value changes, you should break on the respective JavaScript line. Good luck!

# c# - Visual Studio 安装项目在哪里获取主要输出文件？

> ID：14997068
> 
> 赞同：5
> 
> 时间：2013-02-21T07:49:31.050
> 
> 标签：c#, visual-studio-2010, setup-project

我正在尝试在 VS 2010 中为我的 C# 应用程序创建一个安装项目。我在创建 c# 应用程序期间使用了一个构建后的事件。此事件将数据附加到应用程序的二进制文件中，因为我稍后需要这些数据。

问题是，输出文件夹中的文件包含此附加数据，但 setupproject 的已安装文件不包含它。我现在的问题是，VS 从哪里获取安装项目的输出文件，所以我可以将数据附加到这个文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T07:54:46.827

尝试将“文件”而不是“项目输出”添加到您的设置项目中。

或者您可以只在 /obj/release（或 obj/debug）文件夹中修改您的输出，而不是在输出文件夹中修改它。（如果您查看主要输出属性 - 您会看到它使用来自 obj... 文件夹而不是来自输出文件夹的文件）

# xml - Magento 1列布局问题

> ID：14997070
> 
> 赞同：0
> 
> 时间：2013-02-21T07:49:35.190
> 
> 标签：xml, magento, layout

使用新安装的 Magento CE 1.7.0.2，我试图将我的`PRODUCT PAGE`布局设置为 1 列，而无需通过管理面板并将每个单独的产品设置为 1 列布局。

我试过的：

我试图`local.xml`在我的`layout`文件夹中为我的模板创建一个。该`local.xml`文件如下所示：

```
<?xml version="1.0"?>
<layout>

    <my_category_root_template>
        <reference name="root">
            <tpl>page/1column.phtml</tpl>
        </reference>
    <my_category_root_template>

    <catalog_category_layered>
        <update handle="my_category_root_template" />
    </catalog_category_layered>

    <catalog_category_layered_nochildren>
        <update handle="my_category_root_template" />
    </catalog_category_layered_nochildren>

    <catalog_category_default>
        <update handle="my_category_root_template" />
    </catalog_category_default>

    <!-- EDIT: forgot about search results page -->
    <catalogsearch_advanced_result>
        <update handle="my_category_root_template" />
    </catalogsearch_advanced_result>

<layout> 
```

我也尝试过实例`2columns-right.phtml`并尝试将其更改为`1column.phtml`in`page.xml`无济于事。缓存被禁用，因为它是一个临时站点，但我手动删除`var/cache`只是为了更好地衡量。我知道我在这里遗漏了一些东西，但我一生都无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:39:57.167

试试这个：

```
 <catalog_product_view>
    <reference name="root">
        <action method="setTemplate">
            <template>page/1column.phtml</template>
        </action>
    </reference>
</catalog_product_view> 
```

catalog_product_view 是产品页面的布局句柄，要找到页面的句柄，看html body类。

# excel - Excel 公式：从多个命名范围查找

> ID：14997075
> 
> 赞同：2
> 
> 时间：2013-02-21T07:50:11.897
> 
> 标签：excel, excel-formula, excel-indirect, excel-match

我有 3 个表存储为命名范围。
用户使用下拉框选择要搜索的范围。命名范围`Table1`是`Table2`和`Table 3`。

表格1

```
 0.7     0.8     0.9
50  1.08    1.06    1.04
70  1.08    1.06    1.05
95  1.08    1.07    1.05
120 1.09    1.07    1.05 
```

表2

```
 0.7     0.8     0.9
16  1.06    1.04    1.03
25  1.06    1.05    1.03
35  1.06    1.05    1.03 
```

表3

```
 0.7     0.8     0.9
50  1.21    1.16    1.11
70  1.22    1.16    1.12
95  1.22    1.16    1.12
120 1.22    1.16    1.12 
```

然后他们从标题行中选择一个值，并从第一列中选​​择一个值。
即用户选择`Table3`,`0.8`和`95`。我的公式应该返回`1.16`。

我使用`indirect`（`table1`）到了一半，但是我需要提取标题行和第一列，这样我就可以使用类似的东西

```
=INDEX(INDIRECT(pickedtable),MATCH(picked colref,INDIRECT(pickedtable:1)), MATCH(picked rowref,INDIRECT(1:pickedtable))) 
```

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:32:24.147

`INDIRECT(pickedtable)`应该可以正常获取表格，但要从表格中获取第一列或第一行，你可以使用`INDEX`它，所以按照你原来的方法，这个公式应该可以工作

```
=INDEX(INDIRECT(pickedtable),MATCH(pickedcolref,INDEX(INDIRECT(pickedtable),0,1),0),MATCH(pickedrowref,INDEX(INDIRECT(pickedtable),1,0),0)) 
```

或者您可以按照 chris neilsen 的方法使用`HLOOKUP`或`VLOOKUP`缩短，例如使用`VLOOKUP`

```
=VLOOKUP(pickedcolref,INDIRECT(pickedtable),MATCH(pickedrowref,INDEX(INDIRECT(pickedtable),1,0),0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:52:51.330

试试这个

```
=HLOOKUP(pickedcolref,
  IF(pickedtable=1,Table1,IF(pickedtable=2,Table2,IF(pickedtable=3,Table3,""))),
  MATCH(pickedrowref,
    OFFSET(
      IF(pickedtable=1,Table1,IF(pickedtable=2,Table2,IF(pickedtable=3,Table3,""))),
    0,0,,1)
  ,0)
 ,FALSE) 
```

# android - 在android语音通话应用程序中，如何隐藏拨号器并在应用程序中显示通话活动？

> ID：14997076
> 
> 赞同：2
> 
> 时间：2013-02-21T07:50:14.190
> 
> 标签：android, voice

我有以下代码拨打号码

```
package com.example.callapp;

import android.app.Activity;
import android.content.Intent;   
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 

makecall(); }

public void makecall()
    { 
    Intent call = new Intent(Intent.ACTION_CALL);
    call.setData(Uri.parse("tel:90324567"));
    startActivity(call);
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

现在，当我运行这个应用程序时，它会弹出一个拨号器并拨打号码。我想隐藏拨号器并在应用程序中显示通话活动 - 比如说拨打这个号码 - XXXX

以及如何在特定时间后结束通话？并随着时间在应用屏幕上显示消息？

# powershell - 创建前瞻性匹配

> ID：14997079
> 
> 赞同：1
> 
> 时间：2013-02-21T07:50:26.220
> 
> 标签：powershell, powershell-3.0

玩弄 PS，我有一个简单的脚本。

```
ipconfig /all | where-object {$_ -match "IPv4" -or  $_ -match "Description"} 
```

这很棒，并且符合我的预期。我想做的是提前阅读，只显示 IPv4 行之前的描述。或反向搜索并获取 ipv4 和下一个描述，然后查找下一个 IPv4 等。

有没有一种方法可以做到这一点，而无需通过创建阵列旋转然后通过阵列旋转以提取有意义的部分？

我的笔记本电脑上的这个命令导致：

```
Description . . . . . . . . . . . : Microsoft Virtual WiFi Miniport Adapter
Description . . . . . . . . . . . : Killer Wireless-N 1103 Network Adapter
IPv4 Address. . . . . . . . . . . : 192.168.1.2(Preferred) 
Description . . . . . . . . . . . : Atheros AR8151 PCI-E Gigabit Ethernet Controller (NDIS 6.20)
Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet1
IPv4 Address. . . . . . . . . . . : 192.168.122.1(Preferred) 
Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet8
IPv4 Address. . . . . . . . . . . : 192.168.88.1(Preferred) 
Description . . . . . . . . . . . : Microsoft ISATAP Adapter
Description . . . . . . . . . . . : Microsoft ISATAP Adapter #2
Description . . . . . . . . . . . : Microsoft ISATAP Adapter #3
Description . . . . . . . . . . . : Teredo Tunneling Pseudo-Interface
Description . . . . . . . . . . . : Microsoft ISATAP Adapter #4
Description . . . . . . . . . . . : Microsoft ISATAP Adapter #5 
```

我想要的是：

```
Description . . . . . . . . . . . : Killer Wireless-N 1103 Network Adapter
IPv4 Address. . . . . . . . . . . : 192.168.1.2(Preferred) 
Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet1
IPv4 Address. . . . . . . . . . . : 192.168.122.1(Preferred) 
Description . . . . . . . . . . . : VMware Virtual Ethernet Adapter for VMnet8
IPv4 Address. . . . . . . . . . . : 192.168.88.1(Preferred) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:16:50.363

如果要提取启用 IPv4 的适配器的所有描述，可以尝试如下操作：

```
ipconfig /all | Select-String "IPv4" -AllMatches -SimpleMatch -Context 5 | % {
    $_.Context.Precontext -match "Description" -replace 'Description(?:[^:]+):(.*)$', '$1'
}
    Intel(R) 82579V Gigabit Network Connection 
```

要使用您的代码获取它，请尝试以下操作：

```
ipconfig /all | where-object {
    $_ -match "IPv4" -or  $_ -match "Description"
} | Select-String "IPv4" -SimpleMatch -AllMatches -Context 1 | % { 
    $_.context.precontext -replace 'Description(?:[^:]+):(.*)$', '$1'
} 
```

**编辑**对不起，我之前似乎误读了你的问题。我以为你只想要描述。这显示了 IPv4 活动适配器的描述和 IP 行

```
ipconfig /all | Select-String "IPv4" -AllMatches -SimpleMatch -Context 5 | % {
    $_.Context.Precontext -match "Description"
    $_.Line
}

Description . . . . . . . . . . . : Intel(R) 82579V Gigabit Network Connection
IPv4 Address. . . . . . . . . . . : xx.xx.xx.xx(Preferred) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:15:24.143

替代解决方案：

```
[regex]$regex = '(?ms)^\s*(Description[^\r]+\r\n\s*IPv4[^\r]+)\r'
$regex.matches(((ipconfig /all) -match '^\s*Description|IPv4') -join "`r`n") |
foreach {$_.groups[1].value -replace '\. ',''} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:32:20.723

另一个选项，它只是跟踪输出中找到的最后一个描述：

```
switch -regex ( ipconfig /all ) { 'IPv4' { $d + $_ } 'Description' { $d = @($_) } } 
```

此外，[`-match`比较运算符](http://go.microsoft.com/fwlink/?LinkID=113242)可以处理数组以及单个字符串。因此 using`(ipconfig /all) -match 'IPv4|Description'`相当于`ipconfig /all | where { $_ -match 'IPv4' -or $_ -match 'Description' }`单独检查每一行的原始版本。

# sql-server - SQL Server 版本比较 - 2005 与 2008 与 2008R2 与 2012

> ID：14997088
> 
> 赞同：2
> 
> 时间：2013-02-21T07:51:14.950
> 
> 标签：sql-server

有谁知道任何站点/链接可以提供 SQL Server 版本的主要升级（从管理、开发和商业智能方面） - 2005 vs 2008 vs 2008R2 vs 2012

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T09:16:39.953

每个版本都有一个 What's new 部分：

*   [SQL Server 2012 中的新增功能](http://msdn.microsoft.com/en-us/library/bb500435.aspx)
*   [新增功能 (SQL Server 2008 R2)](http://msdn.microsoft.com/en-us/library/bb500435%28v=sql.105%29.aspx)
*   [新增功能 (SQL Server 2008)](http://technet.microsoft.com/en-us/library/bb500435%28v=sql.100%29.aspx)
*   [SQL Server 2005 中的新增功能](http://msdn.microsoft.com/en-us/library/ms170363%28v=sql.90%29.aspx)

# python - 如何在 python 中获取 OAuth 访问令牌？

> ID：14997089
> 
> 赞同：0
> 
> 时间：2013-02-21T07:51:23.063
> 
> 标签：python, oauth, dropbox

（我在超级用户上问过这个问题，但没有得到回应......）

我正在尝试遵循[http://taught-process.blogspot.com/2012/05/asdlasd-asda-sd-asd-asdasd.html上的 Dropbox API 教程](http://taught-process.blogspot.com/2012/05/asdlasd-asda-sd-asd-asdasd.html)

但是当我到达最后一部分时

```
#Print the token for future reference
print access_token 
```

我得到的是

```
<dropbox.session.OAuthToken object at 0x1102d4210> 
```

我如何获得实际的令牌？它应该看起来像：

```
oauth_token_secret=xxxxxxx&oauth_token=yyyyyyy 
```

（我在 Mac 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:14:12.597

Look around in the properties and methods of the object, to do so apply "dir" on the object. In your case:

```
dir(access_token) 
```

I'm pretty sure you're gonna find in this object something that will give you the token you need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:10:00.670

你有正确的对象，是的。但是你正在处理一个类的实例。

```
<dropbox.session.OAuthToken object at 0x1102d4210> 
```

这是 Dropbox SDK 为您创建的 OAuthToken 对象的一个​​实例。这个令牌似乎有两个属性：`key`和`secret`。这些将是您的令牌密钥和秘密。这就是你所追求的。

您可以像这样访问它们：

```
print access_token.key
print access_token.secret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T14:46:37.913

[在http://taught-process.blogspot.com/2012/05/asdlasd-asda-sd-asd-asdasd.html](http://taught-process.blogspot.com/2012/05/asdlasd-asda-sd-asd-asdasd.html)使用相同的 Dropbox API 教程

结束了以下对我有用的脚本

```
# Include the Dropbox SDK libraries
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website
APP_KEY = '3w7xv4d9lrkc7c3'
APP_SECRET = '1v5f80mztbd3m9t'

# ACCESS_TYPE should be 'dropbox' or 'app_folder' as configured for your app
ACCESS_TYPE = 'app_folder'

sess = session.DropboxSession(APP_KEY, APP_SECRET, ACCESS_TYPE)
request_token = sess.obtain_request_token()
url = sess.build_authorize_url(request_token)

# Make the user sign in and authorize this token
print "url:", url
print "Please visit this website and press the 'Allow' button, then hit 'Enter' here."
raw_input()

# This will fail if the user didn't visit the above URL
access_token = sess.obtain_access_token(request_token)

#Print the token for future reference
print access_token.key
print access_token.secret 
```

# android - 如何更改 Android 主屏幕外观？

> ID：14997092
> 
> 赞同：0
> 
> 时间：2013-02-21T07:51:41.803
> 
> 标签：android, homescreen

每个制造商都会定制 Android 版本。此修改是在源代码中完成还是在应用程序中完成？

如果它在源中：指向适当链接的指针会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:11:17.007

它被称为启动器，它是一个普通的 APK 应用程序。`Activity`这是对某个特定的反应的正常现象`Intent`。

您可以创建另一个，并将其安装在您的手机上。当您按下主页按钮时，它会询问要使用哪个启动器。

```
<activity
 android:label="@string/app_name"
 android:name=".ClassNameOfYourLauncher">
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:55:45.447

我想你在谈论`Launcher`. 这是我想到的第一件事。它是一个**系统 apk**，将`app`在目录的文件夹中`system`。如果你需要修改它，你最好创建一个自己的新启动器。这是有关如何执行此操作的[链接。](https://stackoverflow.com/questions/4841686/how-to-make-a-launcher)

# c# - EF5一对一无导航

> ID：14997094
> 
> 赞同：0
> 
> 时间：2013-02-21T07:51:46.373
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, one-to-one

我正在尝试建立一对一的关系，导航属性位于一侧（MVC4、EF5、代码优先）。

```
public class User {

  public int UserId { get; set; } //PK

  public int RankId { get; set; } //FK

  public virtual Rank { get; set; } //Navigation

}

public class Rank {

  public int RankId { get; set; }

} 
```

配置：

```
 public class RankConfiguration : EntityTypeConfiguration<Rank>
{
    public RankConfiguration()
    {
      HasKey(e => e.RankId);
      Property(e => e.RankId)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    }
}

public class UserConfiguration : EntityTypeConfiguration<User>
{
    public UserConfiguration ()
    {
      // PK
      HasKey(e => e.UserId);

      Property(e => e.RankId)
        .IsRequired();

      HasRequired(e => e.Rank)
        .WithRequiredDependent()
        .WillCascadeOnDelete(true);
    }
} 
```

对于我所看到的（以及我所知道的很少），db 是正确生成的，但我收到了这个错误：

ReferentialConstraint 中的依赖属性映射到存储生成的列。列：“用户 ID”。

在第一次尝试中，我正在考虑创建一个连接表（参考此处[EF5 Fluent API one-to-one without navigator](https://stackoverflow.com/questions/14977947/ef5-fluent-api-one-to-one-without-navigator)），不知道是否是个好主意，但我无法使用 fluent API。

我不知道为什么以及出了什么问题..有什么帮助吗？提前谢谢了

**更新**

**第一次尝试**[@soadyp](https://stackoverflow.com/a/14997417/1016255)评论 后，我尝试配置一个一对一的连接表

```
HasRequired(e => e.Rank)
    .WithRequiredDependent()
    .Map(m =>
    {
      m.ToTable("UserRank");
      m.MapKey("RankId");
    })
    .WillCascadeOnDelete(true); 
```

但是当我尝试迁移时出现此错误：

```
The specified table 'UserRank' was not found in the model. 
Ensure that the table name has been correctly specified. 
```

**第二次尝试阅读此**[http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx) 后，我可能正在做一个简单的工作太复杂了[part-3-shared-primary-key-associations.aspx](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)我就是这样改的

```
 HasRequired(e => e.Rank)
    .WithOptional()
    .WillCascadeOnDelete(true); 
```

一切都很好，但是 UserId PK 没有设置为身份（当我插入一行时有明显的问题）。如果我将其指定为身份：

```
 Property(e => e.UserId)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

我收到以下错误：

```
Cascading foreign key 'FK_dbo.Users_dbo.Ranks_UserId' cannot be created where 
the referencing column 'Users.UserID' is an identity column.
Could not create constraint. See previous errors. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:13:23.960

1:1 code first in EF requires the dependent table to have the SAME primary key. Otherwise what you want to do will work.

**EDIT** Similar SO post [Code First and Fluent API one to one relationship](https://stackoverflow.com/questions/14809861/code-first-and-fluent-api-one-to-one-relationship/14811043#14811043)

Here is the MS EF site sample. [http://msdn.microsoft.com/en-us/data/jj591620#RequiredToRequired](http://msdn.microsoft.com/en-us/data/jj591620#RequiredToRequired)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:20:12.557

好的，所以我复制了您的代码并进行了尝试，我的答案有多个部分：

1.  使用您当前的配置，生成的数据库有些混乱，在用户表中看到“UserId”正在成为 FK（我不知道为什么真的）所以“RankId”只是成为一个普通的整数属性（它不是一个键），所以我认为这是触发您提到的关于引用约束的第一个异常，因为如果您考虑一下，数据库知道“UserId”是主键，同时它是外键但是“UserId”（即“RankId”）引用的实际密钥不是数据库生成的，因此数据库假设如何找出所有这些信息。
2.  现在可能有一个“正确的配置来解决这个问题，但我找不到，所以为了解决这个问题，我删除了流畅的配置，并且实体框架按照惯例创建了所有内容，它做得很好（它发现“RankId”在用户类实际上是一个外键）。

一个建议，尝试查看配置有什么问题，每次更改都使用 SQL Server Management Studio 或任何其他工具，您必须检查生成的数据库架构以确保它是您希望的，另外，如果您不需要配置只是不要使用它。

# opengl - 渲染数以千计的移动四边形

> ID：14997096
> 
> 赞同：1
> 
> 时间：2013-02-21T07:52:03.097
> 
> 标签：opengl, vbo, displaylist

我必须渲染大量粒子。这些粒子是简单的无纹理四边形（实际上是正方形）。哦，它们一直在移动，因为它们是粒子。

我考虑了 2 个选项，但由于我不是 OpenGL 专家，我不知道什么是最好的。

1.  使用 VBO 来渲染它们。
    优点：比立即模式更快。
    缺点：（我对 VBO 了解不多，但是）根据我收集的信息，四边形的坐标需要存储在 RAM 中的某个缓冲区中……所有这些坐标都需要由 CPU 计算。所以对于粒子 P1(x,y) 我必须计算 4 个其他坐标 (P2(x-1,y-1), P3(x-1,y+1), P4(x+1,y+1) , P5(x+1,y-1)) - 这对 CPU 来说是很多工作！

2.  使用显示列表：首先为单个方形四边形创建一个小显示列表。然后，渲染每个粒子做一些`pushMatrix, glTranslate, callList, popMatrix`.
    优点：我不必手动计算 4 个坐标 - glTranlate 会这样做。
    据说显示列表比 VBO 更快。
    缺点：当它们只包含一个四边形时，它们是否比 VBO 更快？

请注意：我从 Java 调用 OpenGL 的东西，所以没有将 Java 数组转换为 GPU 数组的平滑方法（在传输之前，所有东西都必须存储在中间 FloatBuffers 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:38:36.810

显示列表用于静态几何。只渲染一个四边形，然后更改转换、冲洗和重复是非常低效的。

更新 VBO 更好，但仍然不是最佳的。

您应该研究*实例化渲染*。这是一个教程：

[http://ogldev.atspace.co.uk/www/tutorial33/tutorial33.html](http://ogldev.atspace.co.uk/www/tutorial33/tutorial33.html)

在使用几何着色器的简单四边形的情况下，将简单的 GL_POINTS 转换为两个 GL_TRIANGLES 也可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:59:46.500

要进行粒子模拟，我认为您正在寻找的是变换反馈，这是一个很好的演示，其中包含一些关于如何进行的代码[http://prideout.net/blog/?tag=opengl-transform-feedback](http://prideout.net/blog/?tag=opengl-transform-feedback)

# wpf - 在 Visual Studio 2012 中创建 WPF 安装项目

> ID：14997098
> 
> 赞同：1
> 
> 时间：2013-02-21T07:52:12.970
> 
> 标签：wpf, setup-project

我正在使用框架 4.5 开发 WPF 应用程序。

该应用程序可以在以下操作系统上运行吗？• Windows XP • Windows Vista • Windows 7 • Windows 8

另外我想知道如何创建安装项目。在 Visual Studio 2012 中，我注意到 2012 中没有设置项目模板。
请帮助我。

谢谢拉尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:14:48.350

您可以使用 Windows Installer XML 工具包 WIX 创建安装程序。它比 VS 2010 中的基本设置项目需要更多的手动工作，但它功能强大，可以满足您的所有需求。

[http://wixtoolset.org/](http://wixtoolset.org/)

# xml - 从 XML (XSLT) 获取第二个值

> ID：14997101
> 
> 赞同：0
> 
> 时间：2013-02-21T07:52:28.437
> 
> 标签：xml, xslt, transform

我有以下 XML，我只想要第二个值......我该怎么做？

**XML:**

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <soap:Body>
        <GetVersionCollectionResponse xmlns="http://schemas.microsoft.com/sharepoint/soap/">
          <GetVersionCollectionResult>
            <Versions>
              <Version AssignedTo="value" />
              <Version AssignedTo="This value I want to get" />
              <Version AssignedTo="value" />
              <Version AssignedTo="value" />
            </Versions>
          </GetVersionCollectionResult>
        </GetVersionCollectionResponse>
      </soap:Body>
    </soap:Envelope> 
```

**获取每个值的 XML 请求** （如何将其更改为仅获取第二个值？）

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="text" indent="no"></xsl:output>
        <xsl:template name="ShowVariables" match="/" >
            <xsl:for-each select="//*[name()='Version']">
                <xsl:value-of select="@AssignedTo" />
            </xsl:for-each>
        </xsl:template>
</xsl:stylesheet> 
```

在此先感谢您的帮助。

问候，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:12:31.263

您还必须在样式表中[声明](https://stackoverflow.com/a/1344192/825783)XML 文档中使用的[名称空间。](http://www.xml.com/pub/a/2001/04/04/trxml/index.html)

### 样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:sharepoint="http://schemas.microsoft.com/sharepoint/soap/">

  <xsl:output method="text" indent="no"/>

  <xsl:template match="/">
    <xsl:value-of select="//sharepoint:Version[2]/@AssignedTo"/>
  </xsl:template>
</xsl:stylesheet> 
```

或者，如果您想更精确：

```
<xsl:value-of select="soap:Envelope/soap:Body/sharepoint:GetVersionCollectionResponse/sharepoint:GetVersionCollectionResult/sharepoint:Versions/sharepoint:Version[2]/@AssignedTo"/> 
```

### 输出

```
This value I want to get 
```

# java - 如何使用模式中的变量来替换所有除外？

> ID：14997104
> 
> 赞同：1
> 
> 时间：2013-02-21T07:52:53.107
> 
> 标签：java, regex, string

我如何将所有未存储在当前变量guess 中的内容`Pattern`替换为“-”？猜测会随着不同的方法调用而改变。我想用“-”替换任何不是字符猜测的东西（在这种情况下 => 'e'）。

```
String word = "ally";
char guess = 'e';
String currentPattern = word.replaceAll("[^guess]", "-"); 
```

显然，这是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T07:54:21.970

你几乎拥有它。使用字符串连接：

```
String currentPattern = word.replaceAll("[^" + guess + "]", "-"); 
```

这种方法仅在您没有 regex 元字符的情况下才有效`guess`，需要在字符类中进行转义。否则`PatternSyntaxException`会抛出 a 。

这个[问题](https://stackoverflow.com/questions/7604879/java-regex-illegal-escape-character-in-character-class)表明，在您的情况下，您只将 a 添加`char`到您的角色类中，`PatternSyntaxException`即使您不逃避任何事情， a 也不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:54:46.017

你快到了，只需使用`+`连接运算符将猜测与正则表达式部分连接起来。

```
 String word = "ally";
        char guess = 'e';
        String currentPattern = word.replaceAll("[^"+guess+"]", "-");
        System.out.println(currentPattern); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:59:04.940

您需要在正则表达式字符串中显式包含变量：

```
String word = "alely";
char guess = 'e';
System.out.println(word.replaceAll(String.format("[^%s]", guess), "-")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T07:59:11.680

把它变成一种方法？

```
public String replaceAllExcept( String input, char pattern ) {
    return input.replaceAll( "[^" + pattern + "]", "-" );
}

System.out.println( replaceAllExcept( "ally", 'e' );
System.out.println( replaceAllExcept( "tree", 'e' ); 
```

# php - 从变量中查找文件夹中的文件

> ID：14997107
> 
> 赞同：0
> 
> 时间：2013-02-21T07:53:01.037
> 
> 标签：php

我想不通。我有一个包含 X 个 PDF 文件的文件夹，然后我有一个产品显示页面，我希望我的 PHP 从显示的产品编号中找到一个 PDF 文件。

Fx 一个名为 RT 856 的产品 - 我希望它找到文件名中包含 RT856 的文件，如下所示：`RT850-RT855-RT857-RT856-RT858.pdf`

把它放在一个更简单的方式我希望它在文件名中搜索并打开文件名中包含产品编号的文件。

但我似乎无法弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:47:53.953

```
$files = glob("path/to/directory/*find*.{pdf}", GLOB_BRACE); 
```

替换模式中的“查找”您需要搜索的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:56:09.487

使用[**Glob**](http://us3.php.net/manual/en/function.glob.php) php 函数。那会帮助你。

```
<?php
foreach (glob("*.pdf") as $filename) {
    echo "$filename size " . filesize($filename) . "\n";
}
?> 
```

**另一种方式**

```
<?php

    if ($handle = opendir('/~path_to_directory/'))
    {
        while (false !== ($file = readdir($handle)))
        {
            if ($file != "." && $file != "..")
            {
                $page_name = substr($file, 0, strpos($file, "."));
                echo $page_name . "<br />";
            }
        }
    }
    closedir($handle);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:05:38.017

这个怎么样？

```
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator('.')) as $filename) {
  $names = explode('-', $filename);
  foreach ($names as $name) {
    if (strpos($name, $name_to_find)) {
      echo 'exists';
      break;
    }
  }
} 
```

# hadoop - 在 cassandra 集群上使用 hive 映射减少

> ID：14997109
> 
> 赞同：1
> 
> 时间：2013-02-21T07:53:11.517
> 
> 标签：hadoop, cassandra, hive, datastax-enterprise

嗨，我正在使用 datastax 企业进行 hadoop 和 cassandra 集成。我已经配置了 3 个 cassandra 节点和 2 个分析节点（hive 将在其上运行）。

因此，如果有一些数据不存在于 hive 节点上但在 cassandra 节点上，我会感到困惑，在 map reduce 期间是否不会对其进行处理，或者 map reduce 会从 cassandra 节点中提取数据并运行 map reduce。请帮忙

所以我有 4 台机器（复制因子 3）

```
machine 1) cassandra node|token value=0         |data owned(25%)
machine 2)-cassandra node|token value=2^127*.5  |data owned(33%)
machine 3)-analytics node|token value=2^127*.25 |data owned(33%)
machine 4) analytics node|token value=2^127*.75 |data owned(8%) 
```

他们不应该各自拥有 25% 而且我现在认为数据将在所有节点中复制，而不仅仅是在 3 个节点中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:13:28.240

DSE 将确保将您的数据集的完整副本复制到您指定为分析的任何节点集。所以一般来说是没有问题的。如果足够多的分析节点出现故障，它可能必须转到非分析节点来获取数据……但最好建议您将分析节点重新联机。

# android - 图片比较安卓

> ID：14997111
> 
> 赞同：1
> 
> 时间：2013-02-21T07:53:17.127
> 
> 标签：android, image, image-processing, camera, image-comparison

我开发了一个用于图像比较的应用程序。我在这里比较颜色。参考图表在数据库中。我的应用程序的工作就像.. 用相机捕捉颜色。相机由相机 API 而非意图控制。并将捕获的图像与参考图表进行比较。我的问题是光。我在白色背景中捕捉图像.. 但根据光线变化，输出变化很大。我正在使用欧几里得距离。由于光线变化，我无法获得正确的输出。有没有人有任何建议：解决灯光问题。？？有什么方法可以标准化图像吗？？我使用的是安卓 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:42:47.463

如果您面对浅色背景，那么我建议使用两个图像的所有像素的 ARBB 值，您可以比较两个图像的 ARGB 值，我最近在我的一个项目中完成了这项任务。这是其中的小代码。

*   该方法将为您提供图像的平均 ARGB 颜色。
*   在设置了两个图像的平均值之后，您只需将其作为两个集合比较进行比较

> ```
> private int[] getAvgARGB(int[] imagePixels ){
>       int [] argbColection  = new int[4];
>       int pixcel=0 , Aavg=0 ,Ravg =0, Gavg=0 ,Bavg=0 ;
>       int pixcelSize  = 0 ; 
>       for(int i = 0 ; i<imagePixels.length; i++){
>           pixcel = imagePixels[i];  //get pixel value (ARGB)
>           int A = (pixcel >> 24) & 0xFF; //Isolate Alpha value...
>               int R = (pixcel >> 16) & 0xFF; //Isolate Red Channel value...
>               int G = (pixcel >> 8) & 0xFF; //Isolate Green Channel value...
>               int B = pixcel & 0xFF; //Isolate Blue Channel value...
>               Aavg += A ;
>               Ravg += R ;
>               Gavg += G ;
>               Bavg += B ;
>         }
>    pixcelSize = imagePixels.length ;  
> 
>    argbColection[0] = Aavg/pixcelSize ;
>    argbColection[1] = Ravg/pixcelSize ; 
>    argbColection[2] = Gavg/pixcelSize ;
>    argbColection[3] = Bavg/pixcelSize ;
> 
>    return argbColection ;
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T05:42:48.167

如果你想像这样检查色差：

[http://en.wikipedia.org/wiki/Color_difference](http://en.wikipedia.org/wiki/Color_difference)

您可以使用[Catalano 框架](http://code.google.com/p/catalano-framework/)，

它适用于 Java 和 Android。

使用色差的示例：

```
float[] lab = ColorConverter.RGBtoLAB(100, 120, 150, ColorConverter.CIE2_D65);
float[] lab2 = ColorConverter.RGBtoLAB(50, 80, 140, ColorConverter.CIE2_D65);

double diff = ColorDifference.DeltaC(lab, lab2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:21:33.040

也许您可以使用一些开源图像处理库，帽子为图像比较提供了方便的选项。

我建议您使用具有众多图像处理功能的 OpenCV，您可以轻松地将其与 android 集成。

[开放式CV](http://opencv.org/)

可能这可以帮助您解决灯光问题。

# wordpress - 需要帮助从特定帖子类型的所有帖子中获取特定键的帖子元数据到逗号分隔的字符串变量中

> ID：14997112
> 
> 赞同：0
> 
> 时间：2013-02-21T07:53:20.363
> 
> 标签：wordpress, google-maps, metadata

Wordpress：好的，所以我有一个名为酒厂的帖子类型类别，每个酒厂帖子都有一个名为地址的自定义字段，其中列出了每个酒厂的地址。我想制作一个完整的谷歌地图，上面标有所有这些酒厂。为此，我需要从每个帖子中获取所有地址自定义字段数据，并将其放入一个逗号分隔的字符串变量中，以便将其传递给我的谷歌地图。我已经摆弄了一段时间，并认为我应该得到一些帮助。到目前为止，这是我想出的。我能够使用 foreach 语句将所有地址回显到页面上，但这对我没有任何好处

```
$posts = get_posts(array(
    'post_type'   => 'wineries',
    'post_status' => 'publish',
    'posts_per_page' => -1,
    'fields' => 'ids'
    )
);

foreach($posts as $p){

    $ads = get_post_meta($p,"address",true);
    echo $ads; echo',';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:49:19.230

```
$str = '';
foreach($posts as $p){
    $ads = get_post_meta($p,"address",true);
    if($ads)
       $str .= $ads.',';
  }
$str = substr($str,0,-1); 
```

将此字符串 $str 传递给您的谷歌地图。

# iphone - libFlurryAnalytics.a 错误

> ID：14997113
> 
> 赞同：0
> 
> 时间：2013-02-21T07:53:26.873
> 
> 标签：iphone, compiler-errors

我有一个来自我的高级开发人员的代码，我必须修改它。更改已成功完成，并且在模拟器上运行良好。但是，当我在设备上运行它时，它会出现以下错误。

“ld：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/victorray/Desktop/MaxfashionRetailiPhone/MaxfashionRetailiPhone/libFlurryAnalytics.a 用于架构 armv7s clang：错误：链接器命令失败，退出代码 1（使用 -v 查看调用)"

我努力寻找解决方案，但找不到。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:34:06.030

转到项目的构建设置，然后从有效架构中删除 armv7s 或下载为 iOS 6.x 构建的新 libFlurryAnalytics.a

# c# - 如何将超链接与我们的程序连接起来

> ID：14997114
> 
> 赞同：1
> 
> 时间：2013-02-21T07:53:28.993
> 
> 标签：c#, hyperlink, code-behind

我有问题，我不知道如何将超链接与我的程序连接起来。我想添加到注册表项，直到安装哪个连接文件扩展名与我的程序。

例如，我在打开文件 .xyz 的网站上有超链接，并且我希望浏览器“以 [my_program_in_c#] 的形式打开文件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:28:10.060

您可能需要在安装过程中创建以下注册表项

[HKEY_CLASSES_ROOT.xyz] @="dawid.xyz.1.0"

[HKEY_CLASSES_ROOT.xyz\OpenWithProgids] "dawid.xyz.1.0"=""

[HKEY_CLASSES_ROOT\dawid.xyz.1.0] @="扩展说明"

[HKEY_CLASSES_ROOT\dawid.xyz.1.0\DefaultIcon] @="图标的有效位置"

[HKEY_CLASSES_ROOT\atmelstudio.objproj.6.1\shell\open\command] @="[my_program_in_c#"

或手动使用[它](http://www.ehow.com/how_2073279_associate-extensions-windows-files.html)

# android-layout - 在初始布局集未显示后向活动添加片段

> ID：14997115
> 
> 赞同：1
> 
> 时间：2013-02-21T07:53:34.017
> 
> 标签：android-layout, xamarin.android

当用户单击操作栏中的项目时，我试图将片段添加到活动中，但是我无法显示它。这是没有按我预期的方式工作的主要代码（这是用 Monodroid 编写的）：

```
public override bool OnOptionsItemSelected(IMenuItem item)
    {
      if (item.ItemId == Resource.Id.show_hide_notes)
      {
        notesLayout.Visibility = ViewStates.Visible;

        notesWebViewFragment = new NotesWebViewFragment();
        // linearLayout.LayoutParameters = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FillParent, LinearLayout.LayoutParams.WrapContent, 1);

        Android.Support.V4.App.FragmentTransaction fragmentTransaction = SupportFragmentManager.BeginTransaction();
        fragmentTransaction.Add(Resource.Id.notes_fragment_container, notesWebViewFragment);
        fragmentTransaction.Commit();

        // Adding this line doesn't help
        // FindViewById<LinearLayout>(Resource.Id.plex_frame_container).Invalidate();
      }
      return true;
    } 
```

当我在 OnCreate 方法中将此片段与另一个片段添加时，我得到了我所期望的。我已经尝试了几种不同的方法来尝试让它显示出来。任何解释我做错了什么都将不胜感激。我在下面添加了其余的相关代码。

```
 [Activity]
  public class BrainViewActivity : Android.Support.V4.App.FragmentActivity
  {
    private Brain activeBrain;

    PlexWebViewFragment plexWebViewFragment;
    NotesWebViewFragment notesWebViewFragment;

    FrameLayout notesLayout;

    protected override void OnCreate(Bundle savedInstanceState)
    {
      base.OnCreate(savedInstanceState);

      SetContentView(Resource.Layout.brain_view);

      notesLayout = FindViewById<FrameLayout>(Resource.Id.notes_fragment_container);
      // notesLinearLayout.LayoutParameters = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FillParent, LinearLayout.LayoutParams.WrapContent, 0);
      notesLayout.Visibility = ViewStates.Gone;

      if (savedInstanceState == null)
      {
        // Create an instance of PlexWebViewFragment
        plexWebViewFragment = new PlexWebViewFragment();
      }

      // Check that the activity is using the layout version with
      // the fragment_container FrameLayout
      if (FindViewById(Resource.Id.plex_fragment_container) != null)
      {
        plexWebViewFragment.Arguments = Intent.Extras;

        Android.Support.V4.App.FragmentTransaction fragmentTransaction = SupportFragmentManager.BeginTransaction();
        fragmentTransaction.Add(Resource.Id.plex_fragment_container, plexWebViewFragment);

        fragmentTransaction.Commit();
      }
    }

    public override bool OnCreateOptionsMenu(IMenu menu)
    {
      base.OnCreateOptionsMenu(menu);
      MenuInflater.Inflate(Resource.Menu.brain_view_menu, menu);

      return true;
    }

    public override bool OnOptionsItemSelected(IMenuItem item)
    {
      if (item.ItemId == Resource.Id.show_hide_notes)
      {
        notesLayout.Visibility = ViewStates.Visible;

        notesWebViewFragment = new NotesWebViewFragment();
        // linearLayout.LayoutParameters = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FillParent, LinearLayout.LayoutParams.WrapContent, 1);

        Android.Support.V4.App.FragmentTransaction fragmentTransaction = SupportFragmentManager.BeginTransaction();
        fragmentTransaction.Add(Resource.Id.notes_fragment_container, notesWebViewFragment);
        fragmentTransaction.Commit();

        // Adding this line doesn't help
        // FindViewById<LinearLayout>(Resource.Id.plex_frame_container).Invalidate();
      }
      return true;
    }
  } 
```

xml 视图：

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/plex_frame_container"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">
  <FrameLayout
    android:id="@+id/plex_fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"/>

  <FrameLayout
    android:id="@+id/notes_fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"/>
</LinearLayout> 
```

如果我立即添加片段，这同样有效，否则当我稍后尝试添加它时，活动的视图永远不会改变以显示片段。几乎就像我需要告诉活动重新绘制？任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:42:24.523

万一这是我的帮助其他人，我想出了问题所在。添加新片段后，我需要`Activity`自行重新布局。从我搜索的内容中，我看到了关于调用 invalidate 的评论，如下所示：

```
FindViewById<LinearLayout>(Resource.Id.plex_frame_container).Invalidate(); 
```

但是，这是不正确的（至少在我的情况下），并且不会让它调整视图的大小（或更正确地重新布局）。但是，调用`RequestLayout`完全符合我的需要，并且片段开始显示。例子：

```
FindViewById<LinearLayout>(Resource.Id.plex_frame_container).RequestLayout(); 
```

希望这可以帮助。

# c++ - 从 C++ 中的文件名获取完整路径

> ID：14997117
> 
> 赞同：1
> 
> 时间：2013-02-21T07:53:44.127
> 
> 标签：c++, windows, path, directory, filenames

我正在使用 C/C++ 在 Windows 上开发一个应用程序。我想知道，我怎样才能得到 a `file/directory`from的完整路径`filename/directory`？

例如：我的文件名是`test\test.txt`，实际上它位于`C:\Sample\test\test.txt`，我的项目位于`E:\MyProject`.

那么我怎样才能得到完整的路径，即`C:\Sample\test\test.txt`从文件名`test\test.txt`。任何目录也是如此。

我试过使用 GetFullPathName 但它只返回`E:\MyProject\test\test.txt`不正确的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:56:13.847

你可以看看[Boost Filesystem](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#absolute)。

它非常巧妙地处理了所有常见的路径操作。

在你的情况下：

```
int main()
{
  using boost::filesystem::absolute;
  using boost::filesystem::path;

  std::cout << absolute(path("test\\test.txt"), path("C:\\Sample")) << std::endl;
} 
```

请注意，第二个参数`absolute()`是**可选**的，并指定用于确定绝对路径的“当前路径”。可能是您想要的。

# c# - 如何使用 Windows Cert Store 中的证书签署 PDF 文档？

> ID：14997118
> 
> 赞同：10
> 
> 时间：2013-02-21T07:53:52.740
> 
> 标签：c#, pdf, certificate, itextsharp, signing

我需要使用 Windows 证书存储中存在的证书签署 PDF 文档。我整天都在挖，想弄明白，我离得*那么近*，却又*那么远*。

所缺少的只是：**如何获得一个 IExternalSignature 对象来签署 PDF 文件？**

[Rahul Singla](http://www.rahulsingla.com/blog/2012/09/digitally-sign-and-verify-pdf-documents-in-c-using-itextsharp-5-3-x-library)编写了一个漂亮的示例，说明如何使用新的 iText 5.3.0 API 对 PDF 文档进行签名 -*只要*您可以访问 PC 上某处的 .pfx 文件。

之前有[一个](http://blog.imp.cz/post/2011/09/27/Digitalni-podepisovani-PDF-souboru-v-C-cast-2)关于使用 Windows Cert Store 中的证书进行签名的问题，除了它使用的 API 版本`SetCrypto`仍然存在，而且签名显然是可选的。在 iText 5.3.0 中，API 发生了变化，`SetCrypto`不再是一个东西。

这是我到目前为止所拥有的（为后代添加的评论，因为这可能是如何在“网络”上执行此操作的最完整和最新版本）：

```
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.security;
using BcX509 = Org.BouncyCastle.X509;
using Org.BouncyCastle.Pkcs;
using Org.BouncyCastle.Crypto;
using DotNetUtils = Org.BouncyCastle.Security.DotNetUtilities;

...

// Set up the PDF IO
PdfReader reader = new PdfReader(@"some\dir\SomeTemplate.pdf");
PdfStamper stamper = PdfStamper.CreateSignature(reader,
    new FileStream(@"some\dir\SignedPdf.pdf", FileMode.Create), '\0');
PdfSignatureAppearance sap = stamper.SignatureAppearance;

sap.Reason = "For no apparent raisin";
sap.Location = "...";

// Acquire certificate chain
var certStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
certStore.Open(OpenFlags.ReadOnly);

X509CertificateCollection certCollection =
    certStore.Certificates.Find(X509FindType.FindBySubjectName,
    "My.Cert.Subject", true);
X509Certificate cert = certCollection[0];
// iTextSharp needs this cert as a BouncyCastle X509 object; this converts it.
BcX509.X509Certificate bcCert = DotNetUtils.FromX509Certificate(cert);
var chain = new List<BcX509.X509Certificate> { bcCert };
certStore.Close();

// Ok, that's the certificate chain done. Now how do I get the PKS?
IExternalSignature signature = null; /* ??? */

// Sign the PDF file and finish up.
MakeSignature.SignDetached(sap, signature, chain, // the important stuff
    null, null, null, 0, CryptoStandard.CMS);
stamper.Close(); 
```

如您所见：*除了签名之外，我什么都有，但*我不知道应该如何获得它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-19T13:54:48.293

```
public byte[] SignPdf(byte[] pdf)
{
    using (MemoryStream output = new MemoryStream())
    {
        //get certificate from path
        X509Certificate2 cert1 = new X509Certificate2(@"C:\temp\certtemp.pfx", "12345", X509KeyStorageFlags.Exportable);
        //get private key to sign pdf
        var pk = Org.BouncyCastle.Security.DotNetUtilities.GetKeyPair(cert1.PrivateKey).Private;
        // convert the type to be used at .SetCrypt(); 
        Org.BouncyCastle.X509.X509Certificate bcCert = Org.BouncyCastle.Security.DotNetUtilities.FromX509Certificate(cert1);
        // get the pdf u want to sign
        PdfReader pdfReader = new PdfReader(pdf);

        PdfStamper stamper = PdfStamper.CreateSignature(pdfReader, output, '\0');
        PdfSignatureAppearance pdfSignatureAppearance = stamper.SignatureAppearance;
        //.SetCrypt(); sign the pdf
        pdfSignatureAppearance.SetCrypto(pk, new Org.BouncyCastle.X509.X509Certificate[] { bcCert }, null, PdfSignatureAppearance.WINCER_SIGNED);

        pdfSignatureAppearance.Reason = "Este documento está assinado digitalmente pelo Estado Portugues";
        pdfSignatureAppearance.Location = " Lisboa, Portugal";
        pdfSignatureAppearance.SignDate = DateTime.Now;

        stamper.Close();

        return output.ToArray();
    }
} 
```

我使用此代码获取`byte[]`PDF 并再次返回`byte[]`已签名的 PDF。

它是 iTextSharp-LGPL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:41:49.933

```
X509Certificate cert = certCollection[0]; // Your code
X509Certificate2 signatureCert = new X509Certificate2(cert);

var pk = Org.BouncyCastle.Security.DotNetUtilities.GetKeyPair(signatureCert.PrivateKey).Private; 
```

如果你有 pk，可以像上面那样得到，你创建一个 IExternalSignature 如下：

```
IExternalSignature es = new PrivateKeySignature(pk, "SHA-256"); 
```

您还可以找到以下使用物品：

*   [https://www.simple-talk.com/dotnet/.net-framework/beginning-with-digital-signatures-in-.net-framework/](https://www.simple-talk.com/dotnet/.net-framework/beginning-with-digital-signatures-in-.net-framework/)
*   [http://msdn.microsoft.com/en-us/library/ms223098.aspx](http://msdn.microsoft.com/en-us/library/ms223098.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:27:44.970

请下载有关[PDF 和数字签名](http://itextpdf.com/book/digitalsignatures)的书。您将在第 3 章中找到有关如何使用 Windows 证书存储进行签名的 Java 示例。如您所见，您需要 Windows-MY 密钥存储。

现在转到我们发布了[这些示例的 C# 端口](http://sourceforge.net/p/itextsharp/code/HEAD/tree/tutorial/signatures/)的存储库。寻找[C3_11_SignWithToken.cs](http://sourceforge.net/p/itextsharp/code/HEAD/tree/tutorial/signatures/chapter3/C3_11_SignWithToken/C3_11_SignWithToken.cs)。

```
X509Store x509Store = new X509Store("My");
x509Store.Open(OpenFlags.ReadOnly);
X509Certificate2Collection certificates = x509Store.Certificates;
IList<X509Certificate> chain = new List<X509Certificate>();
X509Certificate2 pk = null;
if (certificates.Count > 0) {
    X509Certificate2Enumerator certificatesEn = certificates.GetEnumerator();
    certificatesEn.MoveNext();
    pk = certificatesEn.Current;
    X509Chain x509chain = new X509Chain();
    x509chain.Build(pk);
    foreach (X509ChainElement x509ChainElement in x509chain.ChainElements) {
        chain.Add(DotNetUtilities.FromX509Certificate(x509ChainElement.Certificate));
    }
}
x509Store.Close(); 
```

如果我理解正确`chain`并且`pk`是您正在寻找的变量；

# wpf - 使用 eventTrigger 检查属性值？

> ID：14997119
> 
> 赞同：0
> 
> 时间：2013-02-21T07:54:03.183
> 
> 标签：wpf, eventtrigger

有没有办法使用 EventTrigger 检查属性值？如果我可以使用常规触发器但它不是控制模板，我会很高兴：

```
<Polygon Grid.Column="1" Name="fan" Stroke="Black" StrokeThickness="1" Height="12" Width="12" 
         Points="6,6 4,6 2,5 1,6 2,7 4,6     6,6 6,8 5,10 6,11 7,10 6,8    6,6 8,6 10,7 11,6 10,5 8,6    6,6 6,4 5,2 6,1 7,2 6,4" 
         Fill="Black" Margin="5,8,10,5" RenderTransformOrigin="0.5,0.5">
    <Polygon.RenderTransform>
        <RotateTransform/>
    </Polygon.RenderTransform>
    <Polygon.Triggers>
        <EventTrigger RoutedEvent="SomeEvent">
            <!--I want a StoryBoard here, but only if Polygon's width = 100 (for example) -->
        </EventTrigger>
    </Polygon.Triggers>
</Polygon> 
```

# php - TbImageColumn 的 yii 框架图像路径

> ID：14997120
> 
> 赞同：2
> 
> 时间：2013-02-21T07:54:07.963
> 
> 标签：php, yii, yii-extensions

我在 yii 框架中使用 bootstrap.widgets.TbExtendedGridView 的组件。我有一个带有图像路径保存它的位置名称的表格。我想在网格视图中显示图像。我使用 CSqlDataProvider 和网格列：

```
$dataprovider1= new CSqlDataProvider("select Name,Type,Distance,ByCar,OnFoot,conact('$adminPath','/',Image) as Image from places where ParentId = '$_GET[ParentId]' AND Kind='$kind[id]'");

$gridcolumns1=array(
         //array('name'=>'img','type'=>'html'),
         array( 'class'=>'bootstrap.widgets.TbImageColumn',
                'imagePathExpression'=>'$data->Image',
                'usePlaceKitten'=>FALSE
               ),
        array('name'=>'Image','header'=>'name'),
        array('name'=>'Type','header'=>'type '),
        array('name'=>'Distance','header'=>'distance'),
        array('name'=>'ByCar','header'=>'bycar'),
        array('name'=>'OnFoot','header'=>'onfoot'),           

        ); 
```

这是我的网格视图：

```
 $this->widget('bootstrap.widgets.TbExtendedGridView',array(
            'type'=>'striped bordered',
            'dataProvider'=>$dataprovider1,
            'template'=>"{items}",
            'columns'=>  $gridcolumns1
        )); 
```

一切正常，但网格视图无法显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:47:34.070

我发现解决方案是：

```
array( 'class'=>'bootstrap.widgets.TbImageColumn',
                'imagePathExpression'=>'$data[Image]',
                'usePlaceKitten'=>FALSE
               ), 
```

# iphone - 当用户点击 uiscrollview 时隐藏子视图（uitableview）

> ID：14997127
> 
> 赞同：-1
> 
> 时间：2013-02-21T07:54:32.860
> 
> 标签：iphone, uiscrollview, xcode4.2

我有一个`UIScrollView`包含很多`UITextField`，`UILabel`当用户开始编辑其中一个`UITextField`节目时，一个`UITableView`.

我的问题是，当用户单击时`UIScrollView`必须`UITableView`隐藏它，`tableview`而当用户单击时必须在单元格中`tableview`显示内容。`tableview``textfield`

记住，`tableview`是一个子视图`scrollview`。

我是这个编程的新手，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:15:04.420

```
- (void)viewDidLoad
{
    [super viewDidLoad];

  UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideSubView)];

// prevents the scroll view from swallowing up the touch event of child buttons
  tapGesture.cancelsTouchesInView = NO;    

  [ScrollView addGestureRecognizer:tapGesture];

  [tapGesture release];

}

// method to hide SubView when user taps on a scrollview
-(void)hideSubView
{
    if (self.SubView.isHidden == NO)
        self.SubView.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:58:48.307

**这不是一个好的用户界面。**

你应该把你的信封`UITableView`进`PopOver`. 这里给出了一步一步的过程：[如何在 iPad 编程中使用 UIPopoverController？](http://iosdeveloperz.com/tutorials/how-to-use-uipopovercontroller-in-ipad-programming/)

**编辑：**只需使用此方法即可显示`popOver`。

```
- (void) showPickerPopOverAction
{
    UIViewController *pickerPopOver = [[UIViewController alloc] init];
    pickerPopOver.view = yourTableView;
    pickerPopOver.contentSizeForViewInPopover = CGSizeMake(300, 210);
    UIPopoverController *pickerPopOverController = [[UIPopoverController alloc]initWithContentViewController:pickerPopOver];
    [pickerPopOverController presentPopoverFromRect:yourTextField.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

它会自动解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:41:53.800

Pop over 仅适用于 iPad 而不是 iPhone 或 iPod

# google-maps-api-3 - Google Maps v3 AutoComplete 获取建议

> ID：14997128
> 
> 赞同：0
> 
> 时间：2013-02-21T07:54:34.830
> 
> 标签：google-maps-api-3, autocomplete

我正在尝试在 Google 地图中使用自动完成功能。我正在得到结果。但我想整理结果并将其提供给我的主题自动完成插件以使其看起来更好。我无法将地点列表作为可修改的变量数组获取。

```
 var zoomLevel = 13;
    var lat = 13.00487;
    var lng = 77.576729;

    var mapOptions = {
        center: new google.maps.LatLng(lat, lng),
        zoom: zoomLevel,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map'), mapOptions);

    var input = document.getElementById('search-google-places');

    var options = {
  types: ['geocode']
    };

    var autocomplete = new google.maps.places.Autocomplete(input, options);

    var place = autocomplete.getPlace();
    console.log(place); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:38:06.193

直接请求[**autocompleteService**](https://developers.google.com/maps/documentation/javascript/places#place_autocomplete_service)而不是使用 places.Autocomplete，响应将为您提供预测。

# c# - 如何强制继承者在自己的实现之前运行某些代码

> ID：14997132
> 
> 赞同：2
> 
> 时间：2013-02-21T07:54:47.433
> 
> 标签：c#, oop

我有一个包含**静态对象**的类：`obj`和一个**抽象方法**：`AbsFoo();` 继承者，需要实现`AbsFoo`，但我也想在实现之前强制锁定**，**`obj`当然，在实现之后释放锁。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:57:50.330

您需要使用模板方法模式：

```
public void AbsFoo(){
   lock(obj){
      doActualWork();
   }
}

protected abstract void DoActualWork(); 
```

简而言之，您不要让实现者覆盖 AbsFoo，而是在您的初始化代码（在本例中为锁定）之后委托给一个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T07:58:38.923

唯一的方法是在你的基类中运行代码。

您将创建一个`public`由用户调用的方法。此方法执行始终需要执行的代码，然后调用执行实际工作并在派生类中被覆盖的受保护方法：

```
public class Foo
{
    private readonly object _syncRoot = new object();

    public void AbsFoo()
    {
        // You can do more here, like some logging
        lock(_syncRoot)
        {
            AbsInternal();
        }
    }

    protected abstract void AbsInternal();
}

public class Bar : Foo
{
    protected override void AbsInternal()
    {
        // do work.
        // Note: No call to base.AbsInternal(); or base.AbsFoo(); here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:58:25.980

我认为你应该扩展你的设计：

在基类中准备受保护的抽象方法： AbsFooImpl() 和 AbsFoo()，如下所示：

```
object AbsFoo()
{
    lock(obj)
    {
        AbsFooImpl();
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T08:04:36.440

**这是怎么做的：**

```
public class Foo
{
    private readonly object _syncObj = new object();
    public void AbsFoo()
    {
       lock(syncObj )
       {
          doActualWork();
       }
    }

    protected abstract void doActualWork();
}

public class Bar : Foo
{
    protected override void doActualWork()
    {
        // do work.

    }
} 
```

**不要忘记使用密封！**

# powershell - 使用 nuget 在用户机器上安装 PowerShell 模块

> ID：14997134
> 
> 赞同：4
> 
> 时间：2013-02-21T07:54:56.583
> 
> 标签：powershell, module, installation, nuget

我正在寻找一种分发 Powershell 模块的方法，并尝试使用 nuget。

我已经测试过制作一个 commonstuff.pm1 文件。我做了一个nuget包：

```
put commonstuff.pm1 > Content folder i package
add a install.ps1 in tools
Push:ed the packe to the nugetserver (A internal ProGet server) 
```

install.ps1 是

```
$p = $env:PSModulePath.split(';')[0] + "\\commonstuff"
mkdir $p
copy ./commonstuff.pm1 $p 
```

手动运行 install.ps1 可以正常工作，但作为 nuget 包运行则不行：它只是将包下载到当前位置，就是这样。

```
To download i use the command
nuget.exe install commonstuff -Source http://companysvr/nuget/test 
```

我有最新版本的 nuget.exe

有没有推荐的使用 nuget 安装 PowerShell 模块的方法？我找不到一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:17:27.953

通过 Nuget.exe 安装包时，不会执行 powershell 脚本。该包将被提取到指定的文件夹中。

您必须从 Visual Studio 包管理器控制台安装它才能执行 install.ps1 脚本。

# javascript - PhoneGap中读写sqlite数据库同步（Android和JavaScript）

> ID：14997135
> 
> 赞同：1
> 
> 时间：2013-02-21T07:55:05.340
> 
> 标签：javascript, android, cordova, sqlite, android-sdk-2.3

我的 android 应用程序中有一个 sqlite 数据库，它需要从 Android 和 Javascript 频繁更新。

但是，虽然 Android 会在数据库中进行更新，但如果在此期间 Javascript 代码尝试更新，则会出错。

当 Javascript 更新数据库时也是如此，然后如果 Android 尝试更新它，则会出现数据库被锁定的错误。

所以我需要同步这两个操作，是否有任何插件可以自己处理。对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:08:36.607

这是sqlite的正常行为，一次只有一个客户端可以写入数据库：[http ://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

# use-case - 基本教师登录用例图

> ID：14997138
> 
> 赞同：1
> 
> 时间：2013-02-21T07:55:31.430
> 
> 标签：use-case, diagrams

我正在创建一个非常基本的用例图来显示教师登录，登录包括一个忘记密码，如果用户忘记密码和一个重置密码，如果他们希望在登录后重置密码。我的问题是下面的用例图表创建，尤其是包含和扩展？

![在此处输入图像描述](../Images/eae817553ddd70c9b4a225023549f6dc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T10:49:57.043

这真的很基础。通常，登录宁愿成为其他用例的先决条件，而不是它自己的用例。您的问题至少缺少一个词来理解它。我假设您在问它是否正式正确。嗯，不完全是。

“忘记密码”不是一个动作；您宁愿将其命名为“重置密码”（就像您在上面所做的那样），因为这是您可以积极主动地完成的事情。您也不会使用过去时的动词命名用例。

只需删除“包含”用例即可。否则你会得到一个重复的。

重命名的“重置密码”的“扩展”箭头必须指向相反的方向（否则它在语法上是正确的，但没有意义）。

“如果他们希望在登录后重置密码，请重置密码”我强烈建议在登录屏幕上也提供“重置密码”。如果您根本不想这样做，则必须将两个用例直接附加到演员（老师）。

![解决方案建议](../Images/fbac41d06fe0f8b8975092e555ce5d12.png)

# math - 这个公式如何推导 2^N + 2^N = 2^(N+1)

> ID：14997151
> 
> 赞同：-4
> 
> 时间：2013-02-21T07:56:11.797
> 
> 标签：math, data-structures, exponent

如果基础相同并且变量正在添加，那么它会变成这样

```
^ represent power
X^N + X^N = 2X^N not X^2N 
```

就像我们一样

```
X^N(1 + 1) = 2X^N 
```

但在这种情况下`2^N + 2^N = 2^(N+1)`

如果我们共同

```
2^N(1 + 1) = (2)2^N 
```

它是如何变成的

```
2^(N+1) 
```

***我在 Java 3rd edition 的 Data Structures and algorithm analysis***一书中读到了这个公式。我很困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:02:10.687

这里应用了幂的乘法规则

```
X^N * X^N = X^(N+N) 
```

所以如果我们现在举你的例子

```
2^N + 2^N = 2*(2^N) = 2^1 * 2^N = 2^(1+N) = 2^(N+1) 
```

为了清晰起见，有额外的步骤

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:02:48.203

`2^n + 2^n`等于或。`2^n * 2``2^n * 2¹`

这相当于因为（见下面的注 1）。`2^(n+1)``x^m * x^n = x^(m+n)`

* * *

^(（注1）)至于*为什么*会这样，你可以在这里看到原因：

`x² * x³
= (x * x) * (x * x * x)
= x * x * x * x * x
= x⁵`

# android - Android看门狗向system_server发送了SIGKILL，但是为什么日志说“致命信号6”？

> ID：14997153
> 
> 赞同：1
> 
> 时间：2013-02-21T07:56:16.150
> 
> 标签：android, sigabrt, watchdog, sigkill

在日志中，看门狗通过发送杀死了system_server `SIGKILL`，但是日志是怎么写“ `Fatal signal 6`（`SIGABRT`）”的呢？我知道一个进程在接收后终止`SIGKILL`，为什么它会收到`SIGABRT`呢？谁能给我解释一下？非常感谢。

## 以下是一些日志：

```
7703 02-20 20:50:56.290 25333 25492 W Watchdog: No process is given for creating tombstones on framework reboot.
 7704 02-20 20:50:56.290 25333 25492 W Watchdog: *** WATCHDOG KILLING SYSTEM PROCESS: com.android.server.am.ActivityManagerService

7617 02-20 20:50:52.290 25333 25333 F libc    : Fatal signal 6 (SIGABRT) at 0x000062f5 (code=0)
 7618 02-20 20:50:54.380 25284 25284 I DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
 7619 02-20 20:50:54.380 25284 25284 I DEBUG   : Build fingerprint: 'Xiaomi/mione_plus/mione_plus:4.0.4/IMM76D/3.2.1:user/release-keys'
 7620 02-20 20:50:54.380 25284 25284 I DEBUG   : pid: 25333, tid: 25333  >>> system_server <<<
 7621 02-20 20:50:54.380 25284 25284 I DEBUG   : signal 6 (SIGABRT), code 0 (?), fault addr --------
 7622 02-20 20:50:54.380 25284 25284 I DEBUG   :  r0 00ce0ca0  r1 00000080  r2 00000002  r3 00000000
 7623 02-20 20:50:54.380 25284 25284 I DEBUG   :  r4 00ce0ca0  r5 00000000  r6 00000002  r7 000000f0
 7624 02-20 20:50:54.380 25284 25284 I DEBUG   :  r8 00000000  r9 00ce0ca0  10 00000000  fp 00000001
 7625 02-20 20:50:54.380 25284 25284 I DEBUG   :  ip 00000002  sp bebfc218  lr 400ab5b0  pc 400a66ec  cpsr 60000010
 7626 02-20 20:50:54.380 25284 25284 I DEBUG   :  d0  002e006d006f0063  d1  00720064006e0061
 7627 02-20 20:50:54.380 25284 25284 I DEBUG   :  d2  002e00640069006f  d3  0065006c00610063
 7628 02-20 20:50:54.380 25284 25284 I DEBUG   :  d4  002e006d006f0063  d5  00720064006e0061
 7629 02-20 20:50:54.380 25284 25284 I DEBUG   :  d6  002e00640069006f  d7  0076006f00720070
 7630 02-20 20:50:54.390 25284 25284 I DEBUG   :  d8  0000000000000000  d9  0000000000000000
 7631 02-20 20:50:54.390 25284 25284 I DEBUG   :  d10 0000000000000000  d11 0000000000000000
 7632 02-20 20:50:54.390 25284 25284 I DEBUG   :  d12 0000000000000000  d13 0000000000000000
 7633 02-20 20:50:54.390 25284 25284 I DEBUG   :  d14 0000000000000000  d15 0000000000000000
 7634 02-20 20:50:54.390 25284 25284 I DEBUG   :  d16 00000006427e8300  d17 006e0061004d0079
 7635 02-20 20:50:54.390 25284 25284 I DEBUG   :  d18 0064006e0065006c  d19 0000000000720061
 7636 02-20 20:50:54.390 25284 25284 I DEBUG   :  d20 0000000100000000  d21 0000001400000001
 7637 02-20 20:50:54.390 25284 25284 I DEBUG   :  d22 002e006d006f0063  d23 00720064006e0061
 7638 02-20 20:50:54.390 25284 25284 I DEBUG   :  d24 4c4c4c4c4c4c4c4c  d25 4545454545454545
 7639 02-20 20:50:54.390 25284 25284 I DEBUG   :  d26 2020202020202020  d27 4c4c4c4c4c4c4c4c
 7640 02-20 20:50:54.390 25284 25284 I DEBUG   :  d28 0100010001000100  d29 0100010001000100
 7641 02-20 20:50:54.390 25284 25284 I DEBUG   :  d30 4c4c4c4c4c4c4c4c  d31 4c4c4c4c4c4c4c4c
 7642 02-20 20:50:54.390 25284 25284 I DEBUG   :  scr 60000012
 7643 02-20 20:50:54.390 25284 25284 I DEBUG   :
 7644 02-20 20:50:54.600 25284 25284 I DEBUG   :          #00  pc 0000d6ec  /system/lib/libc.so (__futex_syscall3)
 7645 02-20 20:50:54.600 25284 25284 I DEBUG   :          #01  pc 000125ac  /system/lib/libc.so (pthread_mutex_lock)
 7646 02-20 20:50:54.600 25284 25284 I DEBUG   :          #02  pc 0005d666  /system/lib/libdvm.so
 7647 02-20 20:50:54.600 25284 25284 I DEBUG   :          #03  pc 0005dea2  /system/lib/libdvm.so (dvmLockObject)
 7648 02-20 20:50:54.600 25284 25284 I DEBUG   :          #04  pc 0002031c  /system/lib/libdvm.so
 7649 02-20 20:50:54.600 25284 25284 I DEBUG   :          #05  pc 00034f48  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
 7650 02-20 20:50:54.600 25284 25284 I DEBUG   :          #06  pc 0006c0d6  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)
 7651 02-20 20:50:54.600 25284 25284 I DEBUG   :          #07  pc 00058cb0  /system/lib/libdvm.so
 7652 02-20 20:50:54.600 25284 25284 I DEBUG   :          #08  pc 0004802e  /system/lib/libandroid_runtime.so
 7653 02-20 20:50:54.600 25284 25284 I DEBUG   :          #09  pc 00063656  /system/lib/libandroid_runtime.so
 7654 02-20 20:50:54.610 25284 25284 I DEBUG   :          #10  pc 00018bfc  /system/lib/libbinder.so (_ZN7android7BBinder8transactEjRKNS_6ParcelEPS1_j)
 7655 02-20 20:50:54.610 25284 25284 I DEBUG   :          #11  pc 0001bf06  /system/lib/libbinder.so (_ZN7android14IPCThreadState14executeCommandEi)
 7656 02-20 20:50:54.610 25284 25284 I DEBUG   :          #12  pc 0001c0e2  /system/lib/libbinder.so (_ZN7android14IPCThreadState14joinThreadPoolEb)
 7657 02-20 20:50:54.610 25284 25284 I DEBUG   :          #13  pc 0000136c  /system/lib/libsystem_server.so (system_init)
 7658 02-20 20:50:54.610 25284 25284 I DEBUG   :          #14  pc 0000b30c  /system/lib/libandroid_servers.so
 7659 02-20 20:50:54.610 25284 25284 I DEBUG   :          #15  pc 0001fa30  /system/lib/libdvm.so (dvmPlatformInvoke)
 7660 02-20 20:50:54.610 25284 25284 I DEBUG   :          #16  pc 0005993e  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread) 
```

# ios6 - 将 Kal 与我的 Navigation/TabBar 应用程序集成

> ID：14997154
> 
> 赞同：0
> 
> 时间：2013-02-21T07:56:21.610
> 
> 标签：ios6

我对 iOS 开发非常陌生，所以我的 Objective-C 术语可能有点偏离。我目前正在创建一个应用程序，该应用程序在我的 5 个 tabBarViewControllers 之一中有一个日历应用程序。

总体目标：将 Kal 日历与我的一个 tabBarviewcontrollers 顶部的工具栏/导航栏集成，并能够通过工具栏上的按钮安排事件，例如 iphone 上的日历应用程序。并且在每个 tabBarViewController 的顶部都有一个导航栏。

*   我下载的 Kal 文件夹中有一个示例应用程序，它具有我想要的确切布局，只是底部没有 tabBar。*

我所做的：我创建了一个新的 tabBar 应用程序，进入情节提要并创建了 3 个链接到主 tabBarViewController 的导航控制器，并将 Kal 添加到我的项目中，没问题。然后我将日历视图代码实现到我的 secondViewController 类中。

我在项目中实现的唯一代码是在 [super viewDidLoad]; 之后的 secondViewController.m 中的 viewDidLoad 函数中：

KalViewController *calendar = [[KalViewController alloc] init];

[self.view addSubview:calendar.view];

[自我addChildViewController：日历]；

问题：日历和导航栏之间的间距最小。除此之外，界面看起来像我想要的那样。我将如何解决这个间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:00:27.397

对不起，我想我在输入这个问题时刚刚找到了答案。但是请发布任何你认为我应该指的是作为一个新的但有一些经验的 C++ 程序员的东西

# ruby-on-rails-3 - Rails 嵌套表单在循环中具有多个直通关联

> ID：14997159
> 
> 赞同：1
> 
> 时间：2013-02-21T07:56:33.613
> 
> 标签：ruby-on-rails-3, nested-attributes, has-many-through

我正在尝试从嵌套表单创建/更新一些 has_many 关联详细信息。我有这 3 个模型`Politician`，`Characteristic`& 并加入模型`CharacteristicPoint`

```
class Politician < ActiveRecord::Base
      has_many :characteristics, :through => :characteristic_points
      has_many :characteristic_points
accepts_nested_attributes_for :characteristic_points
attr_accessible :characteristic_points_attributes
end

class Characteristic < ActiveRecord::Base
  attr_accessible :name
  has_many :politicians, :through => :characteristic_points
  has_many :characteristic_points

end

class CharacteristicPoint < ActiveRecord::Base
  attr_accessible :characteristic_id, :politician_id, :score_obtained
  belongs_to :politicians
  belongs_to :characteristics
end 
```

我需要做的是，从 PoliticiansController（对于现有政治家），我需要保存模型中每个特征记录的分数。例如： 1）在名为（C1，C2，C3）的表中有一些特征 2）现在当我选择`score_update`动作时，我需要呈现一个循环所有特征项的表单并呈现一个表单以添加分数 3）打开更新相同的表单必须填充第 2 步中分配的值，并允许用户使用新记录进行更新。（目前它在视图上创建重复条目并在表上重新创建记录`characteristic_points`，我只是不需要发生这种情况。）

这是我现有的代码：

**控制器**

```
 def score_card
    @politician = Politician.find(params[:id])
    @characteristics = Characteristic.roots
    @politician.characteristic_points.build
  end
  def score_card_update
    @politician = Politician.find(params[:id])

    respond_to do |format|
      if @politician.update_attributes(params[:politician])
        format.html { redirect_to score_card_cms_politician_path(@politician), notice: 'Score card successfully updated.' }

      else
        format.html { render action: "edit" }

      end
    end
  end 
```

**意见**

```
<%= form_for @politician,:url => score_card_update_politician_path,:html =>{:method => :post}  do |f| %>

                <% @characteristics.each do |characteristic| %>

                        <%= f.fields_for :characteristic_points do |builder|  %>
                        <%= render 'characteristic_point_fields', :f => builder, :politician => @politician, :characteristic => characteristic %>
                        <% end %>
                <% end %> 

    <%= f.submit "Update score"%>

<% end %> 
```

**_characteristic_point_fields.html.erb**

```
<%= f.hidden_field :characteristic_id, :value => characteristic.id %>
<%=f.label characteristic.name%>
<%= f.text_field :score_obtained %> 
```

希望这很清楚，非常感谢任何帮助。

# ios6 - 在 IOS 6 中以编程方式发送短信？

> ID：14997160
> 
> 赞同：1
> 
> 时间：2013-02-21T07:56:37.317
> 
> 标签：ios6, message

如何以编程方式从 IOS 6 发送预先编写的消息，即使有回复，专家也很感激，我处于危急情况，请帮助我找到解决方案，我已准备好使用我的应用程序，直到 IOS 5，请帮助我移动在IOS 6上。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:54:58.063

您需要将 MessageUI.framework 导入您的项目。

无论如何，这里已经回答[了 - 如何在 iPhone 上以编程方式发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone). 检查 Najeebullah Shah 的答案。它应该适用于最新的 SDK。

# vb.net - VB2010 如何使用按钮清除 cookie 网络浏览器？

> ID：14997161
> 
> 赞同：0
> 
> 时间：2013-02-21T07:56:37.583
> 
> 标签：vb.net, visual-studio-2010

VB2010 如何使用按钮清除 cookie 网络浏览器？

我在 vb2010 上创建了我的网络浏览器，但我有问题；如何清除 Webbrowser cookie 和缓存？它已被回答 1k 次，但我仍然没有找到有效的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:51:13.850

您可能必须在实际运行 Web 浏览器之前执行此操作。

临时网络文件

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 8") 
```

饼干

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 2") 
```

历史

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 1") 
```

希望这可以帮助。

# java - 如何迭代泛型的哈希图？

> ID：14997162
> 
> 赞同：3
> 
> 时间：2013-02-21T07:57:01.397
> 
> 标签：java, generics, iterator, hashmap, covariance

我有一个对象模型，它有一个父对象，我将在这里调用它 MyParent.java。该类有两个名为 MySub1.java 和 MySub2.java 的子类。

我有两个 HashMap，一个包含 MySub1 实例，另一个包含 MySub2 实例。我正在尝试编写一段代码，它可以同时处理 HashMap 并执行完全相同的操作（稍后，拥有 MySub1 或 MySub2 实例会产生一些影响，但不是在这里）。

这是编译的代码部分：

```
HashMap<String, ? extends MyParent> map = null;
if (some condition)
    map = // get a HashMap<String, MySub1>
if (some other condition)
    map = // get a HashMap<String, MySub2> 
```

但是现在，我无法弄清楚如何迭代`map`变量。我需要通过迭代器而不是通过对元素的迭代来完成它，`keySet()`因为我需要从哈希图中删除一些元素。

这是我的代码中未编译的部分：

```
if(map != null && map.size() > 0){
    Iterator<Entry<String, ? extends MyParent>> i = map.entrySet().iterator();
    while(i.hasNext()){
        Map.Entry<String, MyParent> pair = (Map.Entry<String, MyParent>) i.next();
        // get the object from the pair and handle it
    }
} 
```

Eclipse 确实在我创建迭代器的行上打印了这条错误消息：

```
 cannot convert from Iterator<Map.Entry<String,capture#5-of ? extends MyParent>> to Iterator<Map.Entry<String,? extends MyParent>> 
```

我真的没有收到错误信息。如果我将代码的第一行更改为：

```
HashMap<String, MyParent> map = null 
```

现在，不工作的代码确实可以工作，但是工作代码不再工作，并出现以下错误消息：

```
cannot convert from HashMap<String,MySub1> to HashMap<String,MyParent> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:04:43.023

您始终可以将 String 和 MyParent 的一对实例放入`Map<String,MyParent>`. 您不能将该对放入`Map<String,MySub1>`. 因此，无法从后者转换为前一个地图（如您最后一条错误消息所述）。另请参阅[关于协变和逆变的维基百科](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#Java)。

相同问题的一个版本适用于迭代器。如果您的实际地图是 a `Map<String,MySub1>`，它会返回一个，即使 a是 a `Iterator<Map.Entry<String,MySub1>>`，它也*不能*转换为 a 。例如，以下将编译：`Iterator<Map.Entry<String,? extends MyParent>>``Map.Entry<String,MySub1>``Map.Entry<String,? extends MyParent>`

`Map.Entry<String,? extends MyParent> someEntry = map.entrySet().iterator().next();`.

另一个通配符 ( `?`) 在这里有帮助：

```
Iterator<? extends Map.Entry<String, ? extends MyParent>> i =  map.entrySet().iterator(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:24:21.657

我不知道您的确切要求，但在同一张地图中有多个对象类型可能会产生严重的*维护问题*。希望你会考虑以下场景

1.  当两个条件在稍后的某个时间点都满足时

2.  当 Mysub1/Mysub2 的行为发生变化时。

3.  当其他人在维护代码时。

    我仍然建议使用单独的实例。为了避免到处携带多个地图，您可能希望将它们包裹在一个对象中。

# c++ - 在 C/C++ 中获得正模的最快方法

> ID：14997165
> 
> 赞同：80
> 
> 时间：2013-02-21T07:57:09.907
> 
> 标签：c++, c, performance

通常在我的内部循环中，我需要以“环绕”方式索引一个数组，因此（例如）如果数组大小为 100 并且我的代码要求元素 -2，则应该给它元素 98。在许多高级语言（如 Python）可以简单地使用 来做到这一点`my_array[index % array_size]`，但由于某种原因，C 的整数运算（通常）向零舍入而不是始终向下舍入，因此当给定负的第一个参数时，它的模运算符返回负结果。

通常我知道`index`不会少于`-array_size`，在这些情况下我只是这样做`my_array[(index + array_size) % array_size]`。但是，有时这无法保证，对于这些情况，我想知道实现始终为正的模函数的最快方法。有几种“聪明”的方法可以在没有分支的情况下做到这一点，例如

```
inline int positive_modulo(int i, int n) {
    return (n + (i % n)) % n;
} 
```

或者

```
inline int positive_modulo(int i, int n) {
    return (i % n) + (n * (i < 0));
} 
```

当然，我可以分析这些以找出在我的系统上哪个是最快的，但我不禁担心我可能错过了一个更好的，或者我的机器上的快速可能在不同的机器上很慢。

那么有没有一种标准的方法来做到这一点，或者我错过的一些聪明的技巧可能是最快的方法？

另外，我知道这可能是一厢情愿的想法，但如果有一种方法可以自动矢量化，那就太棒了。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-21T08:13:09.587

The standard way I learned is

```
inline int positive_modulo(int i, int n) {
    return (i % n + n) % n;
} 
```

This function is essentially your first variant without the `abs` (which, in fact, makes it return the wrong result). I wouldn't be surprised if an optimizing compiler could recognize this pattern and compile it to machine code that computes an "unsigned modulo".

Edit:

Moving on to your second variant: First of all, it contains a bug, too -- the `n < 0` should be `i < 0`.

This variant may not look as if it branches, but on a lot of architectures, the `i < 0` will compile into a conditional jump. In any case, it will be at least as fast to replace `(n * (i < 0))` with `i < 0? n: 0`, which avoids the multiplication; in addition, it's "cleaner" because it avoids reinterpreting the bool as an int.

As to which of these two variants is faster, that probably depends on the compiler and processor architecture -- time the two variants and see. I don't think there's a faster way than either of these two variants, though.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-21T08:02:31.793

模二的幂，以下工作（假设二进制补码表示）：

```
return i & (n-1); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-09-26T14:19:30.197

大多数时候，编译器非常擅长优化你的代码，所以通常最好让你的代码保持可读性（让编译器和其他开发人员都知道你在做什么）。

由于您的数组大小始终为正，我建议您将商定义为`unsigned`. 编译器会将小的 if/else 块优化为没有分支的条件指令：

```
unsigned modulo( int value, unsigned m) {
    int mod = value % (int)m;
    if (mod < 0) {
        mod += m;
    }
    return mod;
} 
```

这将创建一个没有分支的非常小的函数：

```
modulo(int, unsigned int):
        mov     eax, edi
        cdq
        idiv    esi
        add     esi, edx
        mov     eax, edx
        test    edx, edx
        cmovs   eax, esi
        ret 
```

例如`modulo(-5, 7)`返回`2`。

不幸的是，由于商不知道，它们必须执行整数除法，这与其他整数运算相比有点慢。如果您知道数组的大小是 2 的幂，我建议将这些函数定义保留在头文件中，以便编译器可以将它们优化为更有效的函数。这是功能`unsigned modulo256(int v) { return modulo(v,256); }`：

```
modulo256(int):                          # @modulo256(int)
        mov     edx, edi
        sar     edx, 31
        shr     edx, 24
        lea     eax, [rdi+rdx]
        movzx   eax, al
        sub     eax, edx
        lea     edx, [rax+256]
        test    eax, eax
        cmovs   eax, edx
        ret 
```

见组装：[https ://gcc.godbolt.org/z/DG7jMw](https://gcc.godbolt.org/z/DG7jMw)

查看与投票最多的答案的比较：http: [//quick-bench.com/oJbVwLr9G5HJb0oRaYpQOCec4E4](http://quick-bench.com/oJbVwLr9G5HJb0oRaYpQOCec4E4)

[![基准比较](../Images/5cd8de11e1feace4d80d59b175a62627.png)](https://i.stack.imgur.com/dINjX.png)

编辑：原来 Clang 能够在没有任何条件移动指令的情况下生成一个函数（这比常规算术运算成本更高）。这种差异在一般情况下完全可以忽略不计，因为积分除法需要大约 70% 的总时间。

基本上，Clang`value`向右移动以将其符号位扩展到整个宽度`m`（即`0xffffffff`当为负时，`0`否则为），用于屏蔽`mod + m`.

```
unsigned modulo (int value, unsigned m) {
    int mod = value % (int)m;
    m &= mod >> std::numeric_limits<int>::digits;
    return mod + m;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-22T04:46:52.687

使用二进制补码符号位传播获取可选加数的老式方法：

```
int positive_mod(int i, int m)
{
    /* constexpr */ int shift = CHAR_BIT*sizeof i - 1;
    int r = i%m;
    return r+ (r>>shift & m);
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-18T12:14:43.353

> 在 C/C++ 中获得正模的最快方法

下面快？- 可能不如其他人快，但对于所有¹ `a,b`来说都是简单且功能正确的- 与其他人不同。

```
int modulo_Euclidean(int a, int b) {
  int m = a % b;
  if (m < 0) {
    // m += (b < 0) ? -b : b; // avoid this form: -b is UB when b == INT_MIN
    m = (b < 0) ? m - b : m + b;
  }
  return m;
} 
```

* * *

其他各种答案都有`mod(a,b)`弱点，尤其是在`b < 0`.

见[欧几里得除法](https://en.wikipedia.org/wiki/Euclidean_division)有关的想法`b < 0`

* * *

```
inline int positive_modulo(int i, int n) {
    return (i % n + n) % n;
} 
```

溢出时失败`i % n + n`（想想大`i, n`） - 未定义的行为。

* * *

```
return i & (n-1); 
```

依靠`n`为二的幂。（公平的答案确实提到了这一点。）

* * *

```
int positive_mod(int i, int n)
{
    /* constexpr */ int shift = CHAR_BIT*sizeof i - 1;
    int m = i%n;
    return m+ (m>>shift & n);
} 
```

时常失败`n < 0`。e, g,`positive_mod(-2,-3) --> -5`

* * *

```
int32_t positive_modulo(int32_t number, int32_t modulo) {
    return (number + ((int64_t)modulo << 32)) % modulo;
} 
```

强制使用 2 个整数宽度。（公平地说，答案确实提到了这一点。）
失败`modulo < 0`。 `positive_modulo(2, -3)`--> -1。

* * *

```
inline int positive_modulo(int i, int n) {
    int tmp = i % n;
    return tmp ? i >= 0 ? tmp : tmp + n : 0;
} 
```

时常失败`n < 0`。e, g,`positive_modulo(-2,-3) --> -5`

* * *

¹例外情况：在 C 中，`a%b`未定义如中或`a/b`中的溢出时。`a/0``INT_MIN/-1`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-27T21:53:04.813

如果您想避免所有条件路径（包括上面生成的条件移动，（例如，如果您需要此代码进行矢量化，或在恒定时间内运行），您可以使用符号位作为掩码：

```
unsigned modulo(int value, unsigned m) {
  int shift_width = sizeof(int) * 8 - 1;
  int tweak = (value >> shift_width);
  int mod = ((value - tweak) % (int) m) + tweak;
  mod += (tweak & m);
  return mod;
} 
```

这是[quickbench 结果](http://quick-bench.com/9D_wxhAg7IC4bbfAMQRy4klvBww)您可以看到在 gcc 上它在通用情况下更好。对于 clang，它在通用情况下的速度相同，因为 clang 在通用情况下**生成**无分支代码。无论如何，该技术很有用，因为不能总是依赖编译器来产生特定的优化，并且您可能必须手动滚动它以获得矢量代码。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-09T16:49:25.247

如果您有能力升级到更大的类型（并对更大的类型进行模运算），则此代码执行单个模运算，并且如果：

```
int32_t positive_modulo(int32_t number, int32_t modulo) {
    return (number + ((int64_t)modulo << 32)) % modulo;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-21T12:09:12.667

您也可以这样做`array[(i+array_size*N) % array_size]`，其中 N 是足够大的整数以保证正参数，但足够小以不会溢出。

当 array_size 是常数时，有一些技术可以计算模数而不用除法。除了两种方法的幂，可以计算位组的加权和乘以 2^i % n，其中 i 是每组中的最低有效位：

例如32位整数0xaabbccdd % 100 = dd + cc*[2]56 + bb*[655]36 + aa*[167772]16，最大范围为(1+56+36+16)*255 = 27795 . 通过重复应用和不同的细分，可以将操作减少到很少的条件减法。

常见的做法还包括用 2^32 / n 的倒数近似除法，这通常可以处理相当大范围的参数。

```
 i - ((i * 655)>>16)*100; // (gives 100*n % 100 == 100 requiring adjusting...) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-16T15:10:12.190

你的第二个例子比第一个好。乘法是一个比 if/else 操作更复杂的操作，所以使用这个：

```
inline int positive_modulo(int i, int n) {
    int tmp = i % n;
    return tmp ? i >= 0 ? tmp : tmp + n : 0;
} 
```

# android - 路由器 ID 地址给出错误？

> ID：14997166
> 
> 赞同：0
> 
> 时间：2013-02-21T07:57:12.267
> 
> 标签：android, ip, wifi

我想通过我的连接找出路由器的 IP 地址，但是我的程序给了我零（0）个 IP 地址，为什么我的 WIFI 已经在工作，所以我得到 0 个 IP 地址，我正在模拟器上运行此代码。

我的代码是：

```
 WifiManager wifiManager = (WifiManager)this.getSystemService(WIFI_SERVICE);
    WifiInfo wifiInfo = wifiManager.getConnectionInfo();
    int ip = wifiInfo.getIpAddress();
    String ipString = String.format("%d.%d.%d.%d",(ip & 0xff),(ip >> 8 & 0xff),(ip >> 16 & 0xff),(ip >> 24 & 0xff)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:08:10.200

如果您想找出连接到任何网络或热点的手机的 IP 地址，您可以使用此链接中的代码

[android：在 ICS 上通过 WIFI 获取 IP](https://stackoverflow.com/questions/10835017/android-get-ip-over-wifi-on-ics?lq=1)

# c# - 错过的垃圾收集通知

> ID：14997167
> 
> 赞同：5
> 
> 时间：2013-02-21T07:57:14.310
> 
> 标签：c#, .net, garbage-collection

我们正在使用 .NET 运行一个网络农场。每个 Web 服务器的内存中都保存着相当数量的静态对象。第 2 代垃圾回收 (GC) 需要 10-20 秒，每 5 分钟运行一次。我们或多或少遇到了 StackOverflow 遇到的相同问题：http: [//samsaffron.com/archive/2011/10/28/in-managed-code-we-trust-our-recent-battles-with-the-净垃圾收集器](http://samsaffron.com/archive/2011/10/28/in-managed-code-we-trust-our-recent-battles-with-the-net-garbage-collector)

目前，我们正在减少缓存中的对象数量。然而，这需要时间。

同时，我们实现了[此处](http://msdn.microsoft.com/en-us/library/cc713687.aspx)记录的方法，以在 .NET 中获取有关接近 GC 的通知。目标是在 GC 接近时将 Web 服务器从场中取出，并在 GC 结束后将其包含到场中。但是，我们只收到所有 GC 的 0.7% 的通知。我们使用 8 的 maxGenerationThreshold 和 largeObjectHeapThreshold。我们尝试了其他阈值，但错过的 GC 数量没有改变。

我们正在使用并发服务器垃圾收集 ( [http://msdn.microsoft.com/en-us/library/ms229357.aspx](http://msdn.microsoft.com/en-us/library/ms229357.aspx) )。GCLatencyMode 是交互式的（请参阅[http://msdn.microsoft.com/en-us/library/system.runtime.gclatencymode.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.gclatencymode.aspx)）。在这里，我们再次尝试使用其他 GC 模式（工作站模式、批处理等）。同样，我们没有收到大多数 GC 的通知。

是我们做错了什么，还是不可能在每次发生 GC 时都收到通知？我们怎样才能增加通知的数量？

根据[http://assets.red-gate.com/community/books/assets/Under_the_Hood_of_.NET_Management.pdf](http://assets.red-gate.com/community/books/assets/Under_the_Hood_of_.NET_Management.pdf)，当 Gen2 达到 ~10 MB 时会触发 GC。我们有很多 RAM，因此如果我们可以手动将此阈值设置为更高的级别，则需要更多时间才能达到此阈值，并且据我了解，获得通知的概率会增加。有没有办法修改这个阈值？

这是注册和监听通知的代码：

```
GC.RegisterForFullGCNotification(gcThreshold, gcThreshold);
// Start a thread using WaitForFullGCProc.
thWaitForFullGC = new Thread(WaitForFullGCProc);
thWaitForFullGC.Name = "HealthTestGCNotificationListenerThread (Threshold=" + gcThreshold + ")";
thWaitForFullGC.IsBackground = true; 
```

WaitForFullGCProc():

```
 private void WaitForFullGCProc()
{
    try
    {
        while (!gcAbort)
        {
            // Check for a notification of an approaching collection.
            GCNotificationStatus s;
            do
            {
                int timeOut = CheckForMissedGc() > 0 ? 5000 : (10 * 60 * 1000);
                s = GC.WaitForFullGCApproach(timeOut);
                if (this.GcState == GCState.InducedUnnotified)
                {
                    // Set the GcState back to okay to prevent the message from staying in the ApplicationMonitoring.
                    this.GcState = GCState.Okay;
                }
            } while (s == GCNotificationStatus.Timeout);

            if (s == GCNotificationStatus.Succeeded)
            {
                SetGcState(GCState.Approaching, "GC is approaching..");
                gcApproachNotificationCount++;
            }
            else
            {
                ...
            }

            Stopwatch stopwatch = Stopwatch.StartNew();
            s = GC.WaitForFullGCComplete((int)PrewarnTime.TotalMilliseconds);
            long elapsed = stopwatch.ElapsedMilliseconds;

            if (s == GCNotificationStatus.Timeout)
            {
                if (this.ForceGCWhenApproaching && !this.IsInGc && !this.IsPeriodicGcApproaching)
                {
                    this.IsInGc = true;
                    GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced, blocking: true);
                    GC.WaitForPendingFinalizers();
                    elapsed = stopwatch.ElapsedMilliseconds;
                    this.IsInGc = false;
                }
            }
        }
        gcAbort = false;
    }
    catch (Exception e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T07:32:17.610

> 注意：这更像是一个注释，但包含一个大型代码示例。

您是否考虑过尝试通过其他方式获取 GC 通知？Jeffrey Richter（CLR via C#）解释了一种获取通知的好方法，它使用一个对象并检查它的终结器方法，它是在哪一代。

这是类：它使用内部对象，如果提供的代匹配（`new GenObject(0);`例如参见。）或为下一代更高的代复活，则这些对象要么被收集。

你只需订阅它`GCNotification.GCDone += GCDoneHandler;`

```
 public static class GCNotification
    {
        private static Action<Int32> s_gcDone = null; // The event's field
        public static event Action<Int32> GCDone
        {
            add
            {
                // If there were no registered delegates before, start reporting notifications now
                if (s_gcDone == null) { new GenObject(0); new GenObject(1); new GenObject(2); }
                s_gcDone += value;
            }
            remove { s_gcDone -= value; }
        }
        private sealed class GenObject
        {
            private Int32 m_generation;
            public GenObject(Int32 generation) { m_generation = generation; }
            ~GenObject()
            { // This is the Finalize method
                // If this object is in the generation we want (or higher),
                // notify the delegates that a GC just completed
                if (GC.GetGeneration(this) >= m_generation)
                {
                    Action<Int32> temp = Volatile.Read(ref s_gcDone);
                    if (temp != null) temp(m_generation);
                }
                // Keep reporting notifications if there is at least one delegate registered,
                // the AppDomain isn't unloading, and the process isn’t shutting down
                if ((s_gcDone != null)
                && !AppDomain.CurrentDomain.IsFinalizingForUnload()
                && !Environment.HasShutdownStarted)
                {
                    // For Gen 0, create a new object; for Gen 2, resurrect the object
                    // & let the GC call Finalize again the next time Gen 2 is GC'd
                    if (m_generation == 0) new GenObject(0);
                    else GC.ReRegisterForFinalize(this);
                }
                else { /* Let the objects go away */ }
            }
        }
    } 
```

# jsf - 从 test.xhtml 更新 template.xhtml 上的组件

> ID：14997169
> 
> 赞同：2
> 
> 时间：2013-02-21T07:57:18.353
> 
> 标签：jsf, primefaces

我的模板上有一个菜单选项卡，我在每个页面上都使用它。我想从基于模板的另一个页面更新模板中的组件。

它就像任何其他电子邮件页面一样工作，一旦我阅读了一封电子邮件，它就会更新未读电子邮件的数量。该数字显示在 template.xhtml 的菜单选项卡中，电子邮件在我的 test.xhtml 上。一旦我阅读了一封电子邮件，它就会更新 template.xhtml 中菜单选项卡中未读电子邮件的数量。

这是我的 template.xhtml

```
<ui:define name="navi">
    <h:form id="navForm">
        <div id="MMeineVersicherungen" class="hauptmenu">
            <h:commandLink action="#{navigationController.switchView('1')}">#{messages['menu.1']}</h:commandLink>
        </div>
        <div id="MPolizzen" class="menuitem">
            <h:commandLink action="#{navigationController.switchView('1.1')}"
                styleClass="#{navigationController.isAktPageId('1.1') or navigationController.isAktPageId('1') ? 'activelink' : ''}">- #{messages['menu.1.1']}</h:commandLink>
        </div>
        <div id="MSchaeden" class="menuitem">
            <h:commandLink action="#{navigationController.switchView('1.2')}"
                styleClass="#{navigationController.isAktPageId('1.2') ? 'activelink' : ''}">- #{messages['menu.1.2']}</h:commandLink>
        </div>
        <div id="MTopKunden" class="menuitem">
            <h:commandLink action="#{navigationController.switchView('1.3')}"
                styleClass="#{navigationController.isAktPageId('1.3') ? 'activelink' : ''}">- #{messages['menu.1.3']}</h:commandLink>
        </div>

        <div id="MMeineDaten" class="hauptmenu">
            <h:commandLink action="#{navigationController.switchView('2')}">#{messages['menu.2']}</h:commandLink>
        </div>
        <div id="MKundendaten" class="menuitem">
            <h:commandLink action="#{navigationController.switchView('2.1')}"
                styleClass="#{navigationController.isAktPageId('2.1') or navigationController.isAktPageId('2') ? 'activelink' : ''}">- #{messages['menu.2.1']}</h:commandLink>
        </div>
        <div id="MBenutzer" class="menuitem">
            <h:commandLink action="#{navigationController.switchView('2.2')}"
                styleClass="#{navigationController.isAktPageId('2.2') ? 'activelink' : ''}">- #{messages['menu.2.2']} </h:commandLink>
        </div>

        <div id="MPostfach" class="hauptmenu">
            <h:commandLink action="#{navigationController.switchView('3')}"
                styleClass="#{navigationController.isAktPageId('3') ? 'activelink' : ''}">(#{post.getAnzahlNeueNachrichten()}) #{messages['menu.3']} </h:commandLink>
        </div>
        <div id="MKommunikationsvereinb" class="hauptmenu">
            <h:commandLink action="#{navigationController.switchView('4')}"
                styleClass="#{navigationController.isAktPageId('4') ? 'activelink' : ''}">#{messages['menu.4']}</h:commandLink>
        </div>

        <div id="MAbmelden" class="hauptmenu" style="margin-top: 20px;">
            <h:commandLink action="#{loginController.logout}"
                value="#{messages['menu.5']}" />
        </div>
    </h:form>
</ui:define> 
```

这是 test.xhtml

```
<ui:define name="main">
    <h:form id="postform">
        <p:dialog id="msgdlg" dynamic="true" modal="true" widgetVar="msgdlg"
            width="600" height="500">
            <f:facet name="header">#{post.aktNachricht.subject}</f:facet>
            <p:ajax event="close" listener="#{post.closeDlg}" />
            <p:hotkey bind="esc" handler="msgdlg.hide(); " />
            <ui:include src="#{post.view}" />
        </p:dialog>

        <p:tabView id="posttabview" activeIndex="0" cache="true">

            <p:tab id="empftab" title="#{messages['post.empfangen']}"
                titleStyleClass="thementab">
                <p:dataTable value="#{post.empfangenList}" var="msg">
                    <p:column styleClass="coldatum">
                        <p:commandLink action="#{post.showNachricht(msg)}"
                            oncomplete="msgdlg.show();" update=":postform">
                            <h:outputText value="#{msg.datum}"
                                styleClass="#{msg.gelesen ? '' : 'unread'}">
                                <f:convertDateTime pattern="dd.MM.yyyy"
                                    timeZone="Europe/Berlin" />
                            </h:outputText>
                        </p:commandLink>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{msg.subject}"
                            styleClass="#{msg.gelesen ? '' : 'unread'}" />
                    </p:column>

                </p:dataTable>
            </p:tab>

            <p:tab id="sendtab" title="#{messages['post.gesendet']}"
                titleStyleClass="thementab">
            </p:tab>

        </p:tabView>

        <br />
        <p:commandButton value="#{messages['post.neu']}" action="#{post.neu}"
            update="msgdlg" oncomplete="msgdlg.show();" />

    </h:form>
</ui:define> 
```

# tfs - 从 TFS 2010 迁移到 TFS 2012

> ID：14997172
> 
> 赞同：6
> 
> 时间：2013-02-21T07:57:20.527
> 
> 标签：tfs, hardware, tfs-migration

我一直在网上搜索有关如何将我们的 2010 tfs 集合迁移到我们新的 tfs 2012 服务器的干净解决方案，但没有运气。请有人协助我完成这个过程的步骤或一个好的博客。我们想要进行迁移而不是升级的原因是因为我们获得了新硬件，并且希望在升级我们的实时环境之前首先试用 TFS 2012。因此，我们想导入我们所有的集合，包括工作项和构建流程模板。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T02:16:49.950

这是一篇不错的博客文章： http: [//mohamedradwan.wordpress.com/2013/01/05/upgrade-tfs-2010-to-tfs-2012-with-migration-to-a-new-hardware-series/](http://mohamedradwan.wordpress.com/2013/01/05/upgrade-tfs-2010-to-tfs-2012-with-migration-to-a-new-hardware-series/)

您要遵循的基本步骤是：

1.  备份*所有*2010 数据库。
2.  在新硬件上的 SQL Server 上恢复这些数据库。
3.  在您的新硬件上，安装 TFS 2012
4.  到了配置的时候。选择升级选项。
5.  它会询问您的数据库在哪里。选择您在 #2 中使用的 SQL Server。
6.  按开始。

请注意，如果您想使用与 2010 相同的客户端来测试 2012，那么您需要“克隆”系统，否则您的客户端会感到困惑。为此，请参阅[http://msdn.microsoft.com/en-us/library/vstudio/ee349259.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee349259.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:13:05.270

您可以使用 2010 中的分离选项一次移动一个集合，并使用那里的附加选项将其附加回 2012。

请参阅[http://msdn.microsoft.com/en-us/library/dd936138(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd936138(v=vs.100).aspx)

# ios - 删除uiwindow的子视图？

> ID：14997175
> 
> 赞同：5
> 
> 时间：2013-02-21T07:57:47.110
> 
> 标签：ios, ios5, window, calayer, subview

我想从 uiwindow 中删除一个视图，所以我在 appdelegate 方法中使用 nslog，它说窗口的子视图计为两个`NSLog(@" %d",[[self.window subviews] count]);`，所以我如何从窗口中删除该子视图，如果我删除该子视图，我有标签栏控制器要继续...

```
- (void) GetUserCompleted

{
    NSLog(@"   %@",[[self.window subviews] objectAtIndex:0]);   
    NSLog(@"   %@",[[self.window subviews] objectAtIndex:1]); 
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T08:12:35.063

您可以使用以下代码删除单个子视图。

```
[subview_Name removeFromSuperview]; 
```

如果要从视图中删除所有子视图，请使用它。

```
NSArray *subViewArray = [self.window subviews];
for (id obj in subViewArray)
{
    [obj removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-01T05:56:04.637

希望下面的代码对删除特定视图有用

```
 Set tag for that remove view

   subview.tag = 1;

   then

   [[[self window] viewWithTag:1] removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-05T22:00:12.770

@Maddy 答案的 Swift 版本：

```
//create view then add a tag to it. The tag references the view
var myNewView = UIView()
myNewView.tag = 100

//add the  view you just created to the window
window.addSubview(myNewView)

//remove the view you just created from the window. Use the same tag reference
window.viewWithTag(100)?.removeFromSuperview 
```

**更新**

这是另一种在不使用窗口标签的情况下删除 UIView 的方法。关键是视图必须是实例属性。

```
lazy var myNewView: UIView = {
    let view = UIView()
    return view
}()

viewDidLoad() {

    guard let window = UIApplication.shared.windows.first(where: \.isKeyWindow) else { return }

    window.addsubView(myNewView)
}

// call this in deinit or wherever you want to remove myNewView
func removeViewFromWindow() {

    guard let window = UIApplication.shared.windows.first(where: \.isKeyWindow) else { return }

    if myNewView.isDescendant(of: window) {
        print("myNewView isDescendant of window")
    }

    for view in window.subviews as [UIView] where view == myNewView {
        view.removeFromSuperview()
        break
    }

    if myNewView.isDescendant(of: window) {
        print("myNewView isDescendant of window")
    } else {
        print("myNewView is REMOVED from window") // THIS WILL PRINT
    }
}

deinit() {
    removeViewFromWindow()
} 
```

# xamarin.ios - 建议如何使用 mvvmcross 和 monotouch 实现等效的 DatePickerDialog

> ID：14997178
> 
> 赞同：1
> 
> 时间：2013-02-21T07:57:51.833
> 
> 标签：xamarin.ios, mvvmcross

目前已经实现了一个 Droid 应用程序，它响应按钮按下弹出一个 DatePickerDialog。
由于这一定是一个常见的用例，是否有人对如何使用 Touch 实现类似的功能有任何建议？

不确定是否可以使用 AlertView 以及如果可以，如何或什么是合适的方法......

指向执行类似操作的现有示例或项目的指针将不胜感激。

TIA

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:01:02.467

假设我的 UI 设计师同意（有时他们喜欢做不同的事情）......我会使用`UIDatePicker`- 见

*   [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)
*   [http://jsasitorn.com/2010/06/iphone-uidatepicker-tutorial/](http://jsasitorn.com/2010/06/iphone-uidatepicker-tutorial/)（警告 - ObjC！）

* * *

作为一个相当有经验的 MonoTouch 和 MvvmCross dev 我会这样做：

*   为我的屏幕显示创建一个自定义`UIView`（可能是子类化`UIButton`或）`UILabel`
*   在需要编辑时在该自定义`UIView`中，我会使用`UIDatePicker`类似[https://github.com/slodge/MvvmCross/blob/vnext/CrossUI/CrossUI.Touch/Dialog/Elements/DateTimeElement.cs中的代码](https://github.com/slodge/MvvmCross/blob/vnext/CrossUI/CrossUI.Touch/Dialog/Elements/DateTimeElement.cs)
*   对于 MvvmCross 数据绑定，我会公开一个`public DateTime Value {get;set;}`属性和一个`public event EventHandler ValueChanged`事件
*   为了使数据绑定工作，我将在我的 MvvmCross 期间添加一些自定义绑定`Setup`- 非常类似于现在在这个 Droid 问题中的方式 - [Bind TimePicker & DatePicker - MVVMCross (Mono For Android)](https://stackoverflow.com/questions/14829521/bind-timepicker-datepicker-mvvmcross-mono-for-android)
*   在我的“页面”中使用该自定义`UIView`并启用双向绑定`Value`

* * *

不过，如果我比较着急，我可能会：

*   在屏幕上转储一个按钮并将其标题绑定到 ViewModel DateTime
*   在我的“页面”中使用代码隐藏`UIViewController`将按钮`TouchUpInside`连接到一些代码以显示`UIDatePicker`
*   使用代码隐藏来响应`UIDatePicker`事件，以便在 ViewModel 中设置属性

# c# - 带有 ooxml 的 Docx 的特殊字符

> ID：14997181
> 
> 赞同：1
> 
> 时间：2013-02-21T07:58:13.243
> 
> 标签：c#, encoding, openxml, docx

我正在使用[http://www.codeproject.com/Articles/91894/HTML-as-a-Source-for-a-DOCX-File](http://www.codeproject.com/Articles/91894/HTML-as-a-Source-for-a-DOCX-File)将 HTML 转换为 docx 。

大多数字符都可以正确读取，但某些特殊字符（例如 •、“ ”）会显示为 â€¢。我应该怎么做才能纠正这个问题？

我传递给 HTMLtoDocx 的 HTML 也没有正确读取特殊字符。相反，它显示为“？”。将编码更改为 Encoding.Default 后，它会返回正确的字符。在 HTMLtoDOCX 中有两个地方可以设置编码（下面的行）。在这两个地方，我都尝试将编码格式从 Encoding.UTF8 更改为 Encoding。但这没有帮助。

```
StreamWriter streamStartPart = new StreamWriter(docpartDocumentXML.GetStream(FileMode.Create, FileAccess.Write), Encoding.Default);
byte[] Origem = Encoding.Default.GetBytes(html); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:44:04.820

# objective-c - 单元测试、STAssertThrows 和 NSExceptions

> ID：14997185
> 
> 赞同：0
> 
> 时间：2013-02-21T07:58:35.823
> 
> 标签：objective-c, cocoa, unit-testing, nsexception

我是单元测试的新手，对此我有疑问。

在我的源代码中，我将`NSMutableArray`. `NSMutableArray`必须已经实现了原语`NSMutableArray`和`NSArray`方法。这些方法在某些情况下会`NSExceptions`抛出`NSRangeExceptions`.

问题是：“当我对这个原始方法进行单元测试时，我应该为 编写 case`NSExceptions`吗？

例子：

```
//array with 3 objects
STAssertThrows([array insertObject:object atIndex:8], @""); 
```

1.  这个对吗？
2.  这是必要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:44:09.733

有两种情况需要考虑：断言将引发异常，以及断言不会引发异常。

后者不是必需的，但仍然是一个好主意。这是一个在断言消息中提供更明确的描述您期望发生或不发生的事情的机会。但是，您可以跳过`STAssertNoThrow`，异常仍然无法通过测试。

如果您*希望*发生异常，那么您将需要断言，就像您在问题中的代码中所做的那样。但是，您应该提供有意义的断言消息，而不是空字符串。

# c# - For 循环和 If 语句

> ID：14997190
> 
> 赞同：1
> 
> 时间：2013-02-21T07:58:52.480
> 
> 标签：c#, if-statement, for-loop

```
int i;
int[] mArray = new int[5];

for (i = 0; i < mArray.Length; i++)
{
    Console.WriteLine("Please enter a number:");
    mArray[i] = Convert.ToInt32(Console.ReadLine());

    if (mArray[i] >= 50 && mArray[i] <= 10)
    {
        Console.WriteLine("Please enter numbers only between 10 and 50.");
        mArray[i] = Convert.ToInt32(Console.ReadLine());
    }

} 
```

当 if 语句中有两条规则时，它似乎无法正常工作 `if (mArray[i] >= 50 && mArray[i] <= 10)`

但它适用于 1 条规则`if (mArray[i] >= 50)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:00:13.803

你应该使用`||`而不是`&&`

```
mArray[i] >= 50 || mArray[i] <= 10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T08:01:42.213

哪个数字大于 50 并且同时小于 10？我认为你应该用 || 替换你的 && (AND) （或者）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T08:00:47.367

看你的情况：

```
if (mArray[i] >= 50 && mArray[i] <= 10) 
```

您正在尝试查找同时*至少为 50*且*最多为 10*的数字。

你心目中的哪个号码会被认为是无效的？

我怀疑你的意思是：

```
if (mArray[i] > 50 || mArray[i] < 10) 
```

请注意，我已经分别更改了`>=`and `<=`to`>`和`<`to 以匹配您的消息 - 我假设您希望 10 或 50 有效。

另请注意，您只测试一次有效性 - 如果用户坚持输入第二个错误号码，您将接受。我怀疑你想要类似的东西：

```
Console.WriteLine("Please enter a number:");
int value = Convert.ToInt32(ConsoleReadLine());

while (value > 50 || value < 10)
{
    Console.WriteLine("Please enter numbers only between 10 and 50.");
    value = Convert.ToInt32(Console.ReadLine());
}
// Now we know it's valid, so it's reasonably to put it in the array
mArray[i] = value; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T08:02:24.237

这取决于您打算*如何*使其工作

```
/*Pass if the value is more or equal 50 OR lesst or equal 10*/
mArray[i] >= 50 || mArray[i] <= 10 
```

或者

```
/*Passs if the value is between 10 and 50, including edges*/
mArray[i] >= 10 && mArray[i] <= 50 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-21T08:01:34.197

没有数字可以大于 50 并且小于 10，您的条件是错误的：

```
if (mArray[i] >= 50 && mArray[i] <= 10) 
```

它应该是

```
if (mArray[i] >= 50 || mArray[i] <= 10) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T08:04:11.907

尝试将您的逻辑更改为：

```
if (mArray[i] >= 50 || mArray[i] <= 10) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-21T08:01:19.923

你的说法是不可能的。`myArray[i]`必须大于 50 且小于 10。您的意思是：

```
if (mArray[i] >= 50 || mArray[i] <= 10) 
```

?

# c# - 更新前删除图片

> ID：14997194
> 
> 赞同：0
> 
> 时间：2013-02-21T07:59:06.107
> 
> 标签：c#, asp.net, image, file-upload

```
string url = img_prev.ImageUrl.ToString();
if (!url.Equals(""))
{
    if (System.IO.File.Exists(url))
    {
        try
        {
            System.IO.File.Delete(Request.PhysicalApplicationPath + url);
        }
        catch (System.IO.IOException ex)
        {
            Console.WriteLine(ex.Message);
            return;
        }
    } 
```

我喜欢在更新之前删除图像的一种方法，但它仍然无法正常工作。我的网址路径是这样的：

```
../uploadimages/21-2-2013-14-55-49-P1120011.JPG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:23:11.707

我怀疑你正在使用一个 web URL 作为参数，它不能与 一起`System.IO.File.Exists()`使用，请改用它：

```
if (File.Exists(Server.MapPath(filePath))) 
```

[System.IO.File.Exists 返回 false](https://stackoverflow.com/questions/11772724/system-io-file-exists-returns-false)

# magento - Magento Connect 中的 Magento 扩展提交

> ID：14997201
> 
> 赞同：1
> 
> 时间：2013-02-21T07:59:41.873
> 
> 标签：magento

我自己开发了简单的 magento 扩展。

我是新的两个magento Extension开发。

在magento connect中提交扩展之前我有一些疑问。

我有两种产品，例如`Product-A`和`Product-B`。

```
1)  Product-A => Basic feature -> Free
2)  Product-B => Basic feature of Product-A + Additional features -> Premium (paid) 
```

Magento connect 是否允许将其作为两个产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T14:45:07.363

Magento connect 将批准并支持所有类型的第三方扩展。

无论扩展如何工作以及扩展包含哪些功能

Magento connect 是一个推广第三方 magento 扩展的市场。

# java - 参照接口创建对象

> ID：14997202
> 
> 赞同：8
> 
> 时间：2013-02-21T07:59:42.630
> 
> 标签：java, class, oop, inheritance

引用变量可以声明为类类型或接口类型。如果变量声明为接口类型，则它可以引用任何实现该接口的类的任何对象。

基于以上陈述，我做了一个代码理解。如上所述，**声明为接口类型，它可以引用任何实现该接口的类的任何对象**。

但在我的代码中显示`displayName()`方法未定义`objParent.displayName()`：

```
public class OverridenClass {
    public static void main(String[] args) {
        Printable objParent = new Parent();
        objParent.sysout();
        objParent.displayName();
    }
}

interface Printable {
    void sysout();
}

class Parent implements Printable {
    public void displayName() {
        System.out.println("This is Parent Name");
    }

    public void sysout() {
        System.out.println("I am Printable Interfacein Parent Class");
    }
} 
```

我确信我理解错误的方式。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T08:01:29.777

> 但在我的代码中显示未定义的 displayName() 方法。

对，因为`displayName`没有在`Printable`接口中定义。您只能通过声明为具有该接口的变量访问在接口上定义的方法，即使具体类具有其他方法。这就是为什么你可以打电话`sysout`，但不能`displayName`。

如果您考虑这样的示例，则其原因会更加明显：

```
class Bar {
    public static void foo(Printable p) {
        p.sysout();
        p.displayName();
    }
}

class Test {
    public static final void main(String[] args) {
        Bar.foo(new Parent());
    }
} 
```

中的代码`foo` **不能**依赖于`Printable`接口中的特性以外的任何东西，因为我们在编译时不知道具体类可能是什么。

接口的要点是仅使用接口引用来定义代码可用的特征，而不考虑正在使用的具体类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T08:08:43.350

该`displayName()`方法显示为未定义，因为`objParent`声明为类型`Printable`并且接口没有此类方法。为了能够使用方法`displayName()`，您可以在接口中声明它`Printable`：

```
interface Printable {
    void sysout();
    void displayName();
} 
```

或在调用方法之前先`objParent`转换为类型：`Parent``displayName()`

```
Printable objParent = new Parent();
objParent = (Parent) objParent;
objParent.displayName(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T08:02:32.713

您需要输入强制类型才能访问`Parent`方法

```
((Parent)objParent).displayName(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T08:02:18.657

编译器不关心运行时。就编译器而言，它会检查引用类型在您的接口类型中是否有一个名为 display 的方法。

> 在您的子类或实现类中声明的方法不是您的超类/接口的一部分。因此，您不能调用在具有超类/接口引用类型的子类中声明的那些方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T13:30:06.220

接口基本上是另一种方式 - 打破单继承规则。

通过使用接口，子类既可以继承它的父方法，又可以强制实现它的接口方法。导致易于扩展和维护继承树等。

然而，问题是，当在父级下引用子级时，您只能访问父级方法。要访问接口方法，您需要在接口引用类型下强制转换或创建子项。

接口还允许在接口类型下收集不同族的多个类的集合。有什么好处我还没有发现。

在我看来，这是没有意义的，因为无论如何我仍然无法实现完全成熟的多态性——仅通过使用父引用类型并且仍然可以访问接口实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-28T09:24:11.523

该接口的方法签名所在的任何位置都不会给出任何错误。在您的示例中，您的方法 sysout() 在接口中，因此接口的引用不会给出任何错误，但是对于方法 displayName() 接口引用会给出错误。为此，您必须使用您的课程参考。

# windows - Monogame OpenGL 游戏在某些 Windows 7 计算机上崩溃

> ID：14997207
> 
> 赞同：1
> 
> 时间：2013-02-21T08:00:07.327
> 
> 标签：windows, windows-7, crash, monogame

我正在使用 Monogame 学习一些游戏开发。

我启动了一个 Windows OpenGL 项目，在我的 Win8 机器上一切正常。

我已经编译了这个项目并将其发送给 2 个人，他们都使用的是 win7 x64，其中一个无法打开游戏。

之后，我在我的另一台电脑（也是win7 x64）上测试了它，我得到了同样的问题，游戏进程开始，然后屏幕闪烁（Aero似乎停用），然后一切恢复正常，我的游戏进程在没有消息的情况下崩溃。

我敢肯定，我的代码没有问题，可能缺少一些 dll，但其中大部分是随游戏复制的

*   Lidgren.Network.dll
*   MonoGame.Framework.dll
*   OpenTK.dll
*   SDL.dll
*   Tao.Sdl.dll

真挚地

卡恩范贝克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:17:00.660

如果它正在关闭 Windows Aero，则可能是图形问题。将可以运行它的 Win7 机器的图形功能与不能运行它的机器进行比较。工作的有显卡吗？我似乎记得 Monogame 对 Reach 图形配置文件有奇怪的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:14:42.850

好的，我使用 OpenAL32 安装程序修复了它

我在[这里找到了解决方案](http://monogame.codeplex.com/discussions/357014)

如果您的游戏无法运行，您必须安装它。

在我的第二台电脑上为我修好了。

# c++ - 防止派生类对基类隐藏非虚函数

> ID：14997210
> 
> 赞同：4
> 
> 时间：2013-02-21T08:00:16.457
> 
> 标签：c++, inheritance, method-hiding

考虑到我有 A 和 B 类，这样

```
class A
{
   public:
   void Fun();
};

class B  : public A
{
   ....
}; 
```

作为A类的设计者，有什么方法可以强制派生类B和其他从A派生的类被阻止（出现某种错误）隐藏非虚函数Fun（）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:15:43.487

如果您希望非`virtual`成员函数始终可以以某种方式访问​​，那么只需将其包装在命名空间范围自由函数中：

```
namespace revealed {
    void foo( A& o ) { o.foo(); }
} 
```

现在B类的客户总是可以做

```
void bar()
{
    B o;
    revealed::foo( o );
} 
```

但是，无论 B 类引入多少隐藏重载，客户端也可以这样做

```
void bar2()
{
    B o;
    A& ah = o;
    ah.foo();
} 
```

他们可以做到

```
void bar3()
{
    B o;
    o.A::foo();
} 
```

所以所获得的只是更容易理解的符号和意图通信。

即，远非不可能，正如评论所言，可用性是您默认拥有的......

# get - 时间序列图中鼠标点击时如何获取x轴的值

> ID：14997212
> 
> 赞同：1
> 
> 时间：2013-02-21T08:00:20.510
> 
> 标签：get, mouseevent, jfreechart, timeserieschart

我正在使用动态时间表。

单击鼠标时的时序图我想获取时间值。

但是我使用的方法能够得到y轴值。

如何获得 x 轴时间？

请帮我。

## 代码

chartComposite.addChartMouseListener(new ChartMouseListener() {

```
 @Override
        public void chartMouseMoved(ChartMouseEvent arg0) {

        }

        @Override
        public void chartMouseClicked(ChartMouseEvent event) {

            XYItemEntity entity = (XYItemEntity)event.getEntity();
            XYDataset dataset = entity.getDataset();

            int series = entity.getSeriesIndex();
            int item = entity.getItem();
            Comparable seriesKey = dataset.getSeriesKey(series);

            System.out.println(series + "   " + item + "    " + seriesKey);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:23:09.257

你试过这个吗？

```
Date date = new Date(dataset.getX(entity.getSeriesIndex(),entity.getItem()).longValue()); 
```

# javascript - JavaScript 中的静态导入

> ID：14997213
> 
> 赞同：5
> 
> 时间：2013-02-21T08:00:22.537
> 
> 标签：javascript, module

如果我有一个带有公共成员的模块并且我像这样使用它

```
Module.Sub.member() 
```

那么将成员静态导入本地范围的最佳（如果存在）方法是什么，例如`using`在 cpp 或`import static`Java 中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T09:25:25.330

```
var App = (function(app) {

    /* Dependencies */
    var Sound = app.Modules.Sound,        
        Input = app.Modules.IO.Input,
        ...

    /* Actual code using dependecies */
    ...    

})(App || {}); 
```

该解决方案有几个优点：

*   声明在模块的顶部，第一眼就清晰可见（可*维护的代码*），

*   导入的通常好处：更少的输入，避免命名空间冲突等（可*维护的代码*）

*   长属性路径查找（`a.b.c.d`）只需要一次（*性能*），

*   使用局部变量更快，使用全局变量 - 更快的查找（*性能*），

*   缩小工具*可以*安全地缩小局部变量名，但不能简单地缩小全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:17:40.517

这是一种我觉得很漂亮的方法，可以指出：

```
(function(member) {
    //Your code here will see member in this scope.
}) (Module.Sub.member); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T08:10:23.710

就像是

```
member = Module.Sub.member; 
```

也许？但是要小心，因为它会使全局对象属性变得混乱，甚至可能最终覆盖其中的一些属性，因为您没有“编译单元”的概念，静态导入在 Java 中的作用域。相反，您的 VM 有一个*单一的、动态*的执行状态，因此上面的建议不是声明性的，而是实现您所追求的目标的必要方式。

据我所知，没有办法以声明的方式实现相同的目标`import static`。

# java - 使用扫描仪读取文件

> ID：14997214
> 
> 赞同：0
> 
> 时间：2013-02-21T08:00:26.880
> 
> 标签：java, java.util.scanner

我正在使用扫描仪读取包含 *、空格和字母的文本文件。两个或多个空格可以一个接一个出现。例如：

```
****  AAAAA* *    ****
    *******    AAAAAA*** * 
```

我写了以下代码：

```
lineTokenizer = new Scanner(s.nextLine());
int i=0;
if (lineTokenizer.hasNext()) {
    //lineTokenizer.useDelimiter("\\s");
    System.out.println(lineTokenizer.next());
    //maze[0][i]=lineTokenizer.next();
    i++;
} 
```

lineTokenizer 不会从输入文件中读取超出 * 的内容，而不是将字符存储在迷宫数组中。你能告诉我哪里出错了吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:13:45.920

You could also use `FileInputStreams` to read the file with a `BufferedReader`.

I personnally use the `Scanner` only for console input.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:04:17.430

我认为你应该使用循环而不是 if。

尝试将第 3 行更改为：

```
while (lineTokenizer.hasNext()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:25:04.893

由于您使用的是*if*条件，因此指针不会向前移动。您应该使用循环从扫描仪连续读取数据。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:18:23.967

我想当你尝试不同的东西时，代码会被多次更改。我不知道你如何处理**迷宫**的初始化，但为了避免任何 ArrayIndexOutOfBounds 我会在 List 中使用 List 。我对你想要的东西做了一些猜测并提出了这个：

```
List<List<String>> maze = new ArrayList<>();        
Scanner s = new Scanner("****  AAAAA* *    ****\n    *******    AAAAAA*** *");
while (s.hasNextLine()) {
    List<String> line = new ArrayList<>();
    Scanner lineTokenizer = new Scanner(s.nextLine());
    lineTokenizer.useDelimiter("\\s+");
    while (lineTokenizer.hasNext()) {
        String data = lineTokenizer.next();
        System.out.println(data);
        line.add(data);
    }
    lineTokenizer.close();
    maze.add(line);
}
s.close(); 
```

我没有完全理解你的目标。这是否符合您的要求？上面的代码将为您提供以下列表：`[[****, AAAAA*, *, ****], [*******, AAAAAA***, *]]`

# django - django admin 语言随机变化

> ID：14997217
> 
> 赞同：0
> 
> 时间：2013-02-21T08:00:33.277
> 
> 标签：django, internationalization, django-admin, django-i18n

我最近开始使用 django 国际化。只有一个视图和匹配模板，我为其添加了可翻译字符串并为 3 种语言进行了翻译。

现在我注意到 django 管理语言的变化似乎是随机的。它更改为比我翻译成的语言更多的语言（英语、法语和德语）。

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:31:45.143

似乎这是由 django 翻译模块的奇怪行为引起的。

`translation.activate()`更改**整个过程**的语言。

我要做的是`translation.deactivate()`在渲染模板后调用。

# actionscript-3 - 如何将库符号与现有类关联

> ID：14997222
> 
> 赞同：0
> 
> 时间：2013-02-21T08:00:39.683
> 
> 标签：actionscript-3, flash, flashdevelop

我正在使用 Flash Develop 进行编译（不是 Flash IDE）

这是一个示例代码：

```
 [Embed(source = 'assets.swf', symbol = 'app.view.CustomButton')
    var customButton_Class:Class ; 

    var customButton_Instance ;

    customButton_Instance = new customButton_Class(); 
```

问题是这个“customButton_Instance”对 app.view.CustomButton 一无所知？（实际上这意味着在 assets.fla 库中将类设置为 app.view.CustomButton 是没有意义的）

我正在遵循的解决方法是：

```
 var customButton:CustomButton = new CustomButton();
customButton.setView( customButton_Instance ) 
```

但我想不知何故，customButton_Instance 应该自动将自己与 customButton 类关联。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:27:24.540

使用 Embed 时，您会丢失符号的关联类。这就是它的工作原理。

相反，如果您使用的是 Flash Pro，请选择发布一个 SWC，然后您可以将其添加到您的 FlashDevelop 项目中（在 FlashDevelop 中：右键单击 > 添加到库），然后所有符号都将像任何其他符号一样在代码完成中可见类，您可以编写新的 app.view.CustomButton() 或创建一个自定义类来扩展它。

# objective-c - iOS - 没有 IBAction 的屏幕转换

> ID：14997227
> 
> 赞同：1
> 
> 时间：2013-02-21T08:00:51.453
> 
> 标签：objective-c, ios5

我试图弄清楚如何在不调用 IBAction 的情况下更改屏幕。

所以例如我有两个屏幕如下，

1 - 倒计时

2 - 倒计时。

首先，我在屏幕 1 上，当我在该视图中完成倒计时时，我想切换到屏幕 2。

所以在这里我没有调用 IBAction。我只想通过调用某种函数来移动到另一个屏幕。我怎么做？

（环境 - iOS 5.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:10:57.120

`UIViewControllers`为两个屏幕创建两个并创建`UIStoryboardSegue`在它们之间移动的对象：

```
 (id)initWithIdentifier:(NSString *)identifier source:(UIViewController *)source destination:(UIViewController *)destination 
```

参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardSegue_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardSegue_Class/Reference/Reference.html)

# ruby-on-rails - 更新状态将显示用户名

> ID：14997229
> 
> 赞同：0
> 
> 时间：2013-02-21T08:00:57.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以前在我的应用程序中，只有指南的所有者可以编辑他自己的指南，但我希望任何人都能够编辑指南，然后当它更新时，它会显示“由 .... 于 .... 日期编辑'。这可能吗？

我在guidelines_controller.rb 中的更新操作是

```
def update
    @guideline = Guideline.find(params[:id])

    if params[:guideline] && params[:guideline].has_key?(:user_id)
        params[:guideline].delete(:user_id) 
    end

    respond_to do |format|
      if @guideline.update_attributes(params[:guideline])
        format.html { redirect_to @guideline, notice: 'Guideline was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "show" }
        format.json { render json: @guideline.errors, status: :unprocessable_entity }
      end
    end
  end 
```

并且在同一个控制器中编辑操作是

```
 def edit

      @guideline = Guideline.find(params[:id])
      @specialties = Guideline.order(:specialty).uniq.pluck(:specialty)

  end 
```

用户模型 user.rb 是

```
 attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty
 has_many :guidelines
 has_many :favourite_guidelines 
```

指南模型是

```
belongs_to :user
 has_many :favourite_guidelines 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:49:53.947

如果要维护编辑的历史记录，则必须创建另一个表（guideline_edits：guideline_id、user_id、edited_at），并且可以显示 at 的最后编辑。如果您还想跟踪每个编辑的更改，您实际上可以使用[审核](https://github.com/collectiveidea/audited)的gem

如果您不想维护历史记录，您可以将edited_by（当前用户）、edited_at（Time.now()）字段添加到您的指南中，并在更新指南时更新这些列。

当然，在您的授权规则中，您必须允许任何登录用户编辑任何指南。

希望这可以帮助

# objective-c - 在目标 C 中滑入视野

> ID：14997230
> 
> 赞同：0
> 
> 时间：2013-02-21T08:00:59.843
> 
> 标签：objective-c, jquery-animate

编辑：哇，我真是个白痴。为了让它很容易理解，我想解释一下 facebook 原生应用程序的功能。在您触摸右上角和左上角的地方，中间部分向左或向右，显示侧边栏菜单

我有一个 phonegap 应用程序，其中右上角有一个按钮。以下面的代码作为参考。

```
Portion of HTML:

<body>
<div id="header"><!--Button goes here--></div>
<div id="menu">
    <ul>
        <li> Option 1</li>
        <li> Option 2</li>
    </ul> 
</div>
<div id="page">
     Some contents in the page.
</div>
</body>

Javascript:
var move,x=0; //global vars

function buttonTouched() { //code for button ontouchstart event
    move = $("#menu").css('width');
    if(x==0) {
        $("#menu").animate({'left':'-='+move},'250');
        $("#page").animate({'left':'-='+move},'250');
        x=1;
    }
    else if(x==1) {
        $("#menu").animate({'left':'+='+move},'250');
        $("#page").animate({'left':'+='+move},'250');
        x=0;
    }
} 
```

当您触摸按钮时，“菜单”div 向左滑动（使用 jquery animate）并且“页面”div 的一部分向左滑动。如何使用具有动画效果的目标 C 代码在本机应用程序中复制此效果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:38:30.867

看看 UIView [animateWithDuration](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)类方法。

假设您的菜单只是一个名为 menuView 的 UIView，并且放置在您的视图控制器中的屏幕外。然后你可以做这样的事情：

```
[UIView animateWithDuration:0.6
                          delay:0.0
                        options:UIViewAnimationCurveEaseOut
                     animations:^{
                         CGRect oldFrame = self.view.frame;
                         xOffset = menuView.frame.width;
                         self.view.frame = CGRectOffset(oldFrame, xOffset, 0);
                     }]; 
```

# android - ndk-r7 无法识别 va_list 类型

> ID：14997231
> 
> 赞同：0
> 
> 时间：2013-02-21T08:01:00.963
> 
> 标签：android

我已经在Eclipse中搭建了ndk-r7编译环境，并为.so库文件编译了C代码。那么C代码的va_lsit类型就无法识别和编译。

当我编译ndk的示例代码时没有问题。但它没有在示例中使用 va_list 类型。它有 stdarg.h。它在 ndk 目录的一些 stdarg.h 中有 va_list 定义。

像这样的错误：

```
jni/CommAbstractLayer.c: In function 'SetCommunicationLineVoltage':
jni/CommAbstractLayer.c:1414: error: invalid initializer（this line points the following line: va_list   args = NULL;） 
```

像这样的代码：

```
#include <stdarg.h>
......
W_INT2 SetCommunicationLineVoltage(BYTE ucChangeTimes, ...)
{
va_list args = NULL;
......
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:10:43.970

也许使用[NDK 版本 8](https://groups.google.com/forum/#!topic/android-ndk/Q8ajOD37LR0)错误会消失，否则寻找类似问题的解决方案：[Android NDK: Function va_start / va_end could not be resolved](https://stackoverflow.com/questions/11720411/android-ndk-function-va-start-va-end-could-not-be-resolved)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:12:03.813

`va_list`不保证是指针；该代码无效 C.

该行可以修改为简单地阅读

```
va_list args; 
```

前提是代码确实使用 初始化它`va_start`并且不假定它与`NULL`.

# jquery - 如何实现分层可选部分？

> ID：14997233
> 
> 赞同：0
> 
> 时间：2013-02-21T08:01:06.250
> 
> 标签：jquery, html

我想使用 javascript 和 jquery (1.9.1) 来实现可选部分的概念。

基本上，我有一个`checkbox`启用或禁用整个部分（即 a `div`）。

这里我有一个工作代码：

```
<div class="optional">
    <span class="optional-activator"> 
        <input type="checkbox" ></input>
    </span>

    <div class="optional-section">
        <input type="text" value="sometext" />
    </div>
</div> 
```

和一个脚本：

```
$(function () {
    $(".optional").each(function () {
        var $this = $(this);
        var activator = $this.find(".optional-activator :input");
        var section = $this.find(".optional-section");

        var sectionStateUpdate = function () {
            if (activator.prop('checked')) {
                section.find(":input").prop("disabled", false);
                section.removeClass("inactive");
            } else {
                section.find(":input").prop("disabled", true);
                section.addClass("inactive");
            }
        };
        activator.change(sectionStateUpdate);
        sectionStateUpdate();                       
    });
}); 
```

这按预期工作。

但是，此代码不支持嵌套的可选部分。当启用较高的可选部分时，也启用整个`input`后代，而不考虑子部分中可能存在的情况。

例如，此代码段将无法按预期工作：

```
<div class="optional"> 
    <span class="optional-activator"> 
        <input type="checkbox" />
    </span>

    <div class="optional-section">
        <input type="text" value="sometext2" />
        <div class="optional"> 
            <span class="optional-activator"> 
                <input type="checkbox" />
            </span>

            <div class="optional-section">
                <input type="text" value="sometext3" />
            </div>
        </div>
    </div>
</div> 
```

如何更新我的代码以支持嵌套？

更准确地说，规则是：

*   如果禁用了可选部分，则禁用该部分中的所有输入控件，即使它位于嵌套的可选部分中
*   如果启用了可选部分，则也启用所有直接输入控件，但嵌套的可选部分必须反映它们自己的激活器

我将这些片段写入[jsfiddle 代码](http://jsfiddle.net/f5kmh/3/)以说明我的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:03:18.580

[解决方案在这里](http://jsfiddle.net/f5kmh/12/)可见。

基本上，这个想法是改变行为。现在有一种方法可以刷新整个页面部分的可用性。

并且当更改任何复选框时，会刷新整个部分，而不是仅刷新选定的部分。

我的javascript是：

```
$(function () {
    var refresh = function () {
        $(".optional").each(function () {
            var $this = $(this);
            var activator = $this.find(".optional-activator :input");
            var section = $this.find(".optional-section");

            if (activator.prop('checked')) {
                section.find(":input").filter(":not(.optional-section)").prop("disabled", false);
                section.removeClass("inactive");
            } else {
                section.find(":input").prop("disabled", true);
                section.addClass("inactive");
            }
        });
    };
    $(".optional-activator :input").change(refresh);
    refresh();
}); 
```

棘手的部分是在激活顶部时排除嵌套部分（请参阅的用法`.filter`）

# java - 无法通过 servlet 更新 mysql 数据库

> ID：14997237
> 
> 赞同：0
> 
> 时间：2013-02-21T08:01:19.870
> 
> 标签：java, mysql, servlets, jdbc, java-server

我编写了一个 servlet 文件**SignUp.java**和一个帮助文件**Updater.java**。SignUp 从用户填写的表单中收集用户信息。然后它将信息发送到 Updater，以便 Updater 使用该信息更新数据库中的表。但是当我填写表格并单击提交时，没有任何变化。奇怪的是，当我编写一个测试文件并用它为更新程序提供一些虚拟值时，表格被这些虚拟值更新了。-
**注册.java**

```
package com.onlineshopping.web;

import com.onlineshopping.model.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
public class SignUp extends HttpServlet
{
public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException
{
    String[] month = {"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"};

    InfoHolder userInfo = new InfoHolder();
    userInfo.name = req.getParameter("name");
    userInfo.email = req.getParameter("email");
    userInfo.date = Integer.parseInt(req.getParameter("date"));
    userInfo.month = Arrays.asList(month).indexOf(req.getParameter("month")) + 1;
    userInfo.year = Integer.parseInt(req.getParameter("year"));
    userInfo.pwd = req.getParameter("pwd");
    userInfo.subscribe = "n";
    try
    {
        userInfo.subscribe = req.getParameter("subscribe");
    }
    catch(Exception e)
    {}

    Updater u = new Updater();
    u.update(userInfo);
}
} 
```

InfoHolder 只是保存信息。

**更新程序.java**

```
package com.onlineshopping.model;

import java.io.*;
import java.sql.*;
import java.util.*;
public class Updater
{
private static final String DRIVER = "com.mysql.jdbc.Driver";

private static final String CONNECTION = "jdbc:mysql://localhost/onlineshopping";

public void update(InfoHolder userInfo)
{

    try
    {
        Class.forName(DRIVER);

        Properties p = new Properties();
        p.put("user","****");
        p.put("password","****");

        Connection c = DriverManager.getConnection(CONNECTION,p);

        Statement s = c.createStatement();

        ResultSet rs = s.executeQuery("SELECT MAX(userid)+1 FROM user_info");
        rs.next();
        int id = rs.getInt(1);

        PreparedStatement ps = c.prepareStatement("INSERT INTO user_info VALUES (?,?,?,?,?,?,?)");
        ps.setInt(1,id);
        ps.setString(2,userInfo.name);
        ps.setString(3,userInfo.email);
        ps.setInt(4,userInfo.date);
        ps.setInt(5,userInfo.month);
        ps.setInt(6,userInfo.year);
        ps.setString(7,userInfo.subscribe);
        ps.executeUpdate();

        c.close();
    }

    catch(Exception e)
    {
        try
        {
            PrintWriter out = new PrintWriter(new FileWriter("err", true));
            out.println("Error: "+ e);
            out.close();
        }
        catch(IOException e)
        {}
    }
}
} 
```

**测试.java**

```
import com.onlineshopping.model.*;

public class test
{

public static void main(String[] args)
{
    Updater u = new Updater();

    InfoHolder xyz = new InfoHolder();
    xyz.name = "check";
    xyz.email = "checkmail";
    xyz.date = 1;
    xyz.month = 1;
    xyz.year = 2;
    xyz.pwd = "pw";
    xyz.subscribe = "n";

    u.update(xyz);
}
} 
```

更新程序类文件不断抛出 - *java.lang.ClassNotFoundException: com.mysql.jdbc.Driver。*但是当我从终端运行测试类文件时，相同的 Updater 类运行顺利。**我的CLASSPATH**变量

是否有问题： 它有这个值 - .:/usr/share/java/mysql.jar:/usr/share/java/mysql-connector-java-5.1.16.jar:/usr/lib /tomcat6/lib/servlet-api.jar：类。 请帮忙。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:36:33.257

尝试将 mysql-connector-java-5.1.16.jar 复制到 /usr/lib/tomcat6/lib/**

# jquery - 在 AJAX 方法的完整事件中使用变量

> ID：14997241
> 
> 赞同：0
> 
> 时间：2013-02-21T08:01:32.523
> 
> 标签：jquery, ajax

我正在使用迭代，并且在 AJAX 的完整事件中，我正在尝试使用迭代变量 i。

但在所有迭代中它总是等于 4？为什么是4？我预计是 2，然后是 3，但收到了 4。

```
for (i=2; i<=3; i++) {

    $.ajax({
        url: "<?php echo $this->createUrl('ajax/GetData') ?>",
        dataType: "html",
        type: "POST",
        cache: false,
        data: {
            "country":$('[name=country]').val(),
            "currency":$('[name=currency]').val(),
            "system_id":i
        },
        success: function (data, textStatus) {

            addEventClick();
        },
        complete: function() {

            if (i-1 == 3) {
                $('[name=data_input]').addClass('hidden');
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:05:20.113

`success`并且`complate`都是在异步 ajax 请求完成并且此时 for 循环已经完成时调用的回调函数。

您可以让您的响应返回该`system_id`值，然后在您的`success`处理程序中使用它；

```
success: function (data, textStatus) {
  addEventClick();

  if (data.system_id == 2) {
    $('[name=data_input]').addClass('hidden');
  }
} 
```

# java - IBM 安全提供程序 com.ibm.crypto.provider.IBMJCE 的 Tomcat 等效项

> ID：14997247
> 
> 赞同：0
> 
> 时间：2013-02-21T08:01:43.180
> 
> 标签：java, jakarta-ee, tomcat, security

我必须将 IBM Websphere 的应用程序迁移到 Tomcat，在 java 中，有一个使用 IBM Security Provider 的代码。

```
Security.addProvider(new com.ibm.crypto.provider.IBMJCE()) 
```

这可能是一个直截了当的问题，但是当我迁移应用程序以在 tomcat 中运行时，我想知道使用什么而不是上面的。任何特定的 Java 安全提供程序实现还是我必须自己编写一个？

# c# - DataGrid 行背景颜色 MVVM

> ID：14997250
> 
> 赞同：2
> 
> 时间：2013-02-21T08:01:57.593
> 
> 标签：c#, wpf, mvvm, datagrid

我使用 MVVM 架构，我想更改数据网格中的行颜色。行的颜色取决于模型中的项目。

到目前为止，我有这个代码：

```
private void DataGrid_LoadingRow(object sender, DataGridRowEventArgs e) {
        Log4NetLog dataGridRow = e.Row.DataContext as Log4NetLog;
        if (highlight) {
            if (dataGridRow != null) {
                e.Row.Background = new SolidColorBrush(
                    dataGridRow.LogColour.Colour);
            }
        } else {
            e.Row.Background = new SolidColorBrush(Colors.White);
        }
} 
```

如您所见，在第二行中，我必须引用`Log4NetLog`模型中的 a 。

那么如何更改代码以适应 MVVM 模式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:35:21.900

我假设您的 DataGrids ItemsSource 绑定到 Log4NetLog 的集合，因此您可以在 xaml 中进行样式设置：

```
 <DataGrid.ItemContainerStyle>
            <Style TargetType="{x:Type DataGridRow}">
                <Setter Property="Background" Value="{Binding Path=LogColour.Colour}"/>
            </Style>
        </DataGrid.ItemContainerStyle> 
```

也许你需要一个颜色到 SolidColorBrush 转换器。

# c# - 是否可以转换 Func 功能

> ID：14997252
> 
> 赞同：2
> 
> 时间：2013-02-21T08:02:01.480
> 
> 标签：c#, delegates, lambda

首先， foo 是一个 Func<T1,T2,TResult> 对象。有可能做类似的事情

```
Func<T2,T1,TResult> bar = ConvertFunction(foo); 
```

因此将 Func<T1,T2,TResult> 转换为 Func<T2,T1,TResult>。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T08:03:52.693

是的，这是可能的：

```
Func<T2, T1, TResult> bar = (t2, t1) => foo(t1, t2); 
```

这基本上创建了另一个具有切换参数的委托，该委托在内部简单地调用原始委托。如果您只有 a而不是 a ，
这是执行这种“转换”的*唯一方法*。`Func<T1, T2, TResult>``Expression<Func<T1, T2, TResult>>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:17:41.423

这是功能：

```
class MyFuncConverter<T1, T2, TResult>
{
    static Func<T1, T2, TResult> _foo;

    public static Func<T2, T1, TResult> ConvertFunction(Func<T1, T2, TResult> foo)
    {
        _foo = foo;
        return new Func<T2, T1, TResult>(MyFunc);
    }

    private static TResult MyFunc(T2 arg2, T1 arg1)
    {
        return _foo(arg1, arg2);
    }
} 
```

示例用法：

```
static void Main(string[] args)
{
    var arg1 = 10;
    var arg2 = "abc";

    // create a Func with parameters in reversed order 
    Func<string, int, string> testStringInt = 
        MyFuncConverter<int, string, string>.ConvertFunction(TestIntString);

    var result1 = TestIntString(arg1, arg2);
    var result2 = testStringInt(arg2, arg1);

    // testing results
    Console.WriteLine(result1 == result2);
}

/// <summary>
/// Sample method
/// </summary>
private static string TestIntString(int arg1, string arg2)
{
    byte[] toEncodeAsBytes = System.Text.ASCIIEncoding.ASCII
        .GetBytes(arg2.ToString() + arg1);
    string returnValue = System.Convert.ToBase64String(toEncodeAsBytes);
    return returnValue;
} 
```

# php - 您如何将 PHP 应用程序与需要在文档根目录中运行分离？

> ID：14997253
> 
> 赞同：0
> 
> 时间：2013-02-21T08:02:02.793
> 
> 标签：php, relative-path, absolute-path

目前我们的 PHP 应用程序需要设置在 Web 服务器的文档根目录中（通常通过配置 Apache 的虚拟主机）。

这种依赖的主要原因是我们的 URL 生成逻辑假设所有 URL 都可以通过绝对路径访问`/`。这样可以轻松链接到图像和页面等资源。

用户可能从不同的子文件夹访问应用程序，所以我们不能假设一个简单的相对路径来工作。

我们如何将应用程序与需要在 Web 服务器的文档根目录中运行分离？您是否建议在该 URL 控制器中进行解析`$_SERVER['DOCUMENT_ROOT']`以尝试确定该文件在文件系统中的访问深度？现在，我看不到进行这种解析的可靠方法。这里还有一个复杂之处是我们使用 Apache 的 ReRewrite，因此 URL 不一定与文件系统匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:04:18.897

为此，我通常使用简单而愚蠢的方法，例如：

如果用户可以从应用程序的不同入口点不确定地访问，则入口点应该知道相对于应用程序根的“它们在哪里”。

首先，我应该知道我当前脚本 wr 应用程序根目录的相对位置，所以我静态写入脚本，即；对于应该在的脚本

```
...approotdirname/appsubdir1name/appsubdir2name/here.php 
```

.

```
$relPath = 'approotdirname/appsubdir1name/appsubdir2name'; 
```

*   请注意，如果您的脚本**位于**应用程序根目录，则下面计算的 $curPath 将直接是您在服务器上的应用程序位置。

其次，我应该以统一的格式从 Php 中学习当前的脚本文件路径：

```
$curPath = str_replace('\\','/',dirname(__FILE__)); 
```

（str_replace 用于将 \ 替换为 / 以防它们存在。）事实上，$relPath 的副本（如果计算正确）应该存在于 $curPath 的末尾。

然后我会在$curPath中找到$relPath的位置：

```
$p = stripos($curPath, $relPath, 0);
if(($p === false)||($p < 0)){echo "Relative path: $relPath is invalid."; exit(0);} 
```

现在，当我们从 $curPath 中减去 $relPath 时，我们得到了我们的应用程序根在服务器上的位置，并进行了一些检查。

```
$rootPath = ($p > 0)? substr($curPath, 0, $p-1): '/'; 
```

我希望这有帮助。

请注意，通过单个点（如应用程序根目录的 index.php）限制用户访问通常被认为是一种更好的做法。在入口点你可以得到

```
$rootPath = str_replace('\\','/',dirname(__FILE__)).'/'; 
```

并通过您的应用程序将其全部用于文件访问和包含。作为奖励，您可以在不破坏其文件关系的情况下移动整个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:12:28.143

我看到两个选项：

1.  重构现有程序以通过单个脚本路由所有请求（上面建议，但对我们的项目不实用）

2.  使用[涂抹和清洁属性过滤器](https://stackoverflow.com/questions/14198193/how-to-handle-versioning-of-htaccess-file)，需要一些相对高级的 git。

# php - 任何用于错误处理的 QTI2.0 标准 XML 文档？

> ID：14997255
> 
> 赞同：10
> 
> 时间：2013-02-21T08:02:09.750
> 
> 标签：php

我目前正在按照**QTI2.0**标准进行测验项目。[**我可以从网站IMS GLOBAL**](http://imsglobal.org/question/)找到所有类型 [Choice、True or False、Matching 等] 的所有标准和模式。现在我想传递错误和异常。为此，我想知道是否有任何 QTI2.0 错误处理标准？

因为我无法为这种错误处理编写自己的结构。我只需要坚持这个标准。

所以，如果有人以前在 QTI 工作过，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:06:01.993

这实际上取决于您要处理的错误类型。大多数错误都在比 QTI 规范更高（或更低）的级别上处理，因此不需要太多。

对于QTI标准层存在的错误，[QTI 2.0实施指南](http://www.imsglobal.org/question/qti_v2p0/imsqti_implv2p0.html)只定义了基本上是错误答案的错误。第 3.4、3.5 和 3.6 节允许您提供关于错误/无效/损坏答案的反馈，并指定将导致的结果 - 错误答案、重试的机会、更改的问题/答案对以呈现给测试接受者……等等。

例如，如果在多项选择题没有这样选项的情况下，出现通过“5”答案的错误，您可以使用响应处理、反馈或自适应项目与应试者交谈并告知他们有问题，再试一次，或任何适用于您/他们的情况。

如果您希望处理连接握手错误、格式问题、无效 XML 标记等问题，QTI 不提供指导，因为这超出了标准的范围。为此，您必须参考标准编程实践、XML/DTD/XSL 处理/验证标准等。

我希望这在某种程度上有所帮助！

# java - 如何找到包含两个唯一重复字符的最长子字符串

> ID：14997262
> 
> 赞同：8
> 
> 时间：2013-02-21T08:02:28.557
> 
> 标签：java, string-matching

任务是在给定字符串中找到最长的子字符串，该子字符串由任意两个唯一的重复字符
Ex 组成。在输入字符串“aabadefghaabbaagad”中，最长的字符串是“aabbaa”

我想出了以下解决方案，但想看看是否有更有效的方法来做同样的事情

```
import java.util.*; 

public class SubString {
    public static void main(String[] args) { 
    //String inStr="defghgadaaaaabaababbbbbbd";
    String inStr="aabadefghaabbaagad";
    //String inStr="aaaaaaaaaaaaaaaaaaaa";
    System.out.println("Input string is         "+inStr);

    StringBuilder sb = new StringBuilder(inStr.length());
    String subStr="";
    String interStr="";
    String maxStr="";
    int start=0,length=0, maxStart=0, maxlength=0, temp=0;

    while(start+2<inStr.length())   
    {    int i=0;
         temp=start;
         char x = inStr.charAt(start);
         char y = inStr.charAt(start+1);
         sb.append(x);
         sb.append(y);

         while( (x==y) && (start+2<inStr.length()) )
         {    start++;
              y = inStr.charAt(start+1);
              sb.append(y);
         }

         subStr=inStr.substring(start+2);
         while(i<subStr.length())
         {    if(subStr.charAt(i)==x || subStr.charAt(i)==y )
              {    sb.append(subStr.charAt(i));
                   i++;
              }
              else
                   break;
         }

         interStr= sb.toString();
         System.out.println("Intermediate string "+ interStr);
         length=interStr.length();
         if(maxlength<length)
         {    maxlength=length;
              length=0;
              maxStr = new String(interStr);
              maxStart=temp;
         }

         start++;
         sb.setLength(0);
   }

   System.out.println("");
   System.out.println("Longest string is "+maxStr.length()+" chars long "+maxStr);  
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T10:43:05.453

这里有一个提示，可能会引导您使用线性时间算法（我假设这是家庭作业，所以我不会给出完整的解决方案）：在您找到一个既不等于`x`也不等于的字符时`y`，它没有必要一路返回`start + 1`并重新开始搜索。让我们拿字符串`aabaaddaa`。在您看到`aabaa`并且下一个字符是 的`d`地方，在索引 1 或 2 处重新开始搜索是没有意义的，因为在这些情况下，您只会在再次点击之前获得`abaa`or 。事实上，您可以直接移动到索引 3（最后一组s 的第一个索引），并且由于您已经知道s 的连续序列最多`baa``d``start``a``a``d`，您可以移动`i`到索引 5 并继续。

编辑：下面的伪代码。

```
// Find the first letter that is not equal to the first one, 
// or return the entire string if it consists of one type of characters
int start = 0;
int i = 1;
while (i < str.length() && str[i] == str[start])
    i++;
if (i == str.length())
    return str;

// The main algorithm
char[2] chars = {str[start], str[i]};
int lastGroupStart = 0;
while (i < str.length()) {
    if (str[i] == chars[0] || str[i] == chars[1]) {
        if (str[i] != str[i - 1])
            lastGroupStart = i;
    }
    else {
        //TODO: str.substring(start, i) is a locally maximal string; 
        //      compare it to the longest one so far
        start = lastGroupStart;
        lastGroupStart = i;
        chars[0] = str[start];
        chars[1] = str[lastGroupStart];
    }
    i++;
}
//TODO: After the loop, str.substring(start, str.length()) 
//      is also a potential solution. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T22:49:24.453

同样的问题，我写了这段代码

```
public int getLargest(char [] s){
    if(s.length<1) return s.length;
    char c1 = s[0],c2=' ';
    int start = 1,l=1, max=1;

    int i = 1;
    while(s[start]==c1){
        l++;
        start++;
        if(start==s.length) return start;
    }

    c2 = s[start];
    l++;

    for(i = l; i<s.length;i++){
        if(s[i]==c1 || s[i]==c2){
            if(s[i]!=s[i-1])
                start = i;
            l++;
        }
        else {
            l = i-start+1;  
            c1 = s[start];
            c2 = s[i];
            start = i;
        }
        max = Math.max(l, max);
    }
    return max;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T21:22:00.347

一个通用的解决方案：包含 K 个唯一字符的最长子串。

```
int longestKCharSubstring(string s, int k) {
    int i, max_len = 0, start = 0;
    // either unique char & its last pos
    unordered_map<char, int> ht;

    for (i = 0; i < s.size(); i++) {
        if (ht.size() < k || ht.find(s[i]) != ht.end()) {
            ht[s[i]] = i;
        } else {
            // (k + 1)-th char
            max_len = max(max_len, i - start);
            // start points to the next of the earliest char
            char earliest_char;
            int earliest_char_pos = INT_MAX;
            for (auto key : ht)
                if (key.second < earliest_char_pos)
                    earliest_char = key.first;
            start = ht[earliest_char] + 1;
            // replace earliest_char
            ht.erase(earliest_char);
            ht[s[i]] = i;
        }
    }
    // special case: e.g., "aaaa" or "aaabb" when k = 2
    if (k == ht.size())
        max_len = max(max_len, i - start);

    return max_len;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T22:26:36.027

所以我想到的方法是分两步解决

*   扫描整个字符串以找到相同字母的连续流
*   循环提取的段并压缩它们，直到你得到一个间隙。

这样，您还可以修改逻辑以扫描任何长度的最长子字符串，而不仅仅是 2。

```
class Program
{

    static void Main(string[] args)     
    {
        //.         
        string input = "aabbccdddxxxxxxxxxxxxxxxxx";
        int max_chars = 2;

        //.
        int flip = 0;

        var scanned = new List<string>();

        while (flip > -1)
        {
            scanned.Add(Scan(input, flip, ref flip));
        }

        string found = string.Empty;
        for(int i=0;i<scanned.Count;i++)
        {
            var s = Condense(scanned, i, max_chars);
            if (s.Length > found.Length)
            { 
                found = s;
            }
        }

        System.Console.WriteLine("Found:" + found);
        System.Console.ReadLine();

    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="s"></param>
    /// <param name="start"></param>
    /// <returns></returns>
    private static string Scan(string s, int start, ref int flip)
    { 
        StringBuilder sb = new StringBuilder();

        flip = -1;

        sb.Append(s[start]);

        for (int i = start+1; i < s.Length; i++)
        {
            if (s[i] == s[i - 1]) { sb.Append(s[i]); continue; } else { flip=i; break;}
        }

        return sb.ToString();
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="list"></param>
    /// <param name="start"></param>
    /// <param name="repeat"></param>
    /// <param name="flip"></param>
    /// <returns></returns>
    private static string Condense(List<string> list, int start, int repeat)
    {
        StringBuilder sb = new StringBuilder();

        List<char> domain = new List<char>(){list[start][0]};

        for (int i = start; i < list.Count; i++)
        {
            bool gap = false;

            for (int j = 0; j < domain.Count; j++)
            {
                if (list[i][0] == domain[j])
                { 
                    sb.Append(list[i]);
                    break;
                }
                else if (domain.Count < repeat)
                {
                    domain.Add(list[i][0]);
                    sb.Append(list[i]);
                    break;
                }
                else
                {
                    gap=true;
                    break;
                }
            }

            if (gap) { break;}
        }

        return sb.ToString();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-04T23:50:50.703

```
import java.util.ArrayList;
import java.util.Collections; 
import java.util.HashMap; import java.util.Iterator; import java.util.List;
import java.util.Map;

public class PrintLLargestSubString {

    public static void main(String[] args){         String string =
            "abcdefghijklmnopqrstuvbcdefghijklmnopbcsdcelfabcdefghi";
    List<Integer> list = new ArrayList<Integer> ();         List<Integer>
    keyList = new ArrayList<Integer> ();        List<Integer> Indexlist = new
    ArrayList<Integer> ();      List<Integer> DifferenceList = new
    ArrayList<Integer> ();      Map<Integer, Integer> map = new
    HashMap<Integer, Integer>();        int index = 0;      int len = 1;        int
    j=1;        Indexlist.add(0);       for(int i = 0; i< string.length() ;i++) {
        if(j< string.length()){
            if(string.charAt(i) < string.charAt(j)){
                len++;
                list.add(len);
            } else{
                index= i+1;
                Indexlist.add(index); //                    System.out.println("\nindex" + index);              
                len=1;              
            }           }           j++;        } //        System.out.println("\nlist" +list);         System.out.println("index List" +Indexlist); //     int n =
    Collections.max(list); //       int ind = Collections.max(Indexlist);
    //      System.out.println("Max number in IndexList  " +n);
    //      System.out.println("Index Max is " +ind);

    //Finding max difference in a list of elements      for(int diff = 0;
    diff< Indexlist.size()-1;diff++){           int difference =
            Indexlist.get(diff+1)-Indexlist.get(diff);
    map.put(Indexlist.get(diff), difference);
    DifferenceList.add(difference);         }
    System.out.println("Difference between indexes" +DifferenceList); //        Iterator<Integer> keySetIterator = map.keySet().iterator(); //      while(keySetIterator.hasNext()){
    //          Integer key = keySetIterator.next();
    //          System.out.println("index: " + key + "\tDifference  "
    +map.get(key)); // //       } //        System.out.println("Diffferenece List" +DifferenceList);        int maxdiff = Collections.max(DifferenceList);      System.out.println("Max diff is " + maxdiff);       //////      Integer
    value = maxdiff;        int key = 0;        keyList.addAll(map.keySet());
    Collections.sort(keyList);      System.out.println("List of al keys"
            +keyList); //       System.out.println(map.entrySet());         for(Map.Entry entry: map.entrySet()){           if(value.equals(entry.getValue())){
    key =  (int) entry.getKey();            }       }       System.out.println("Key value of max difference starting element is " + key);   

    //Iterating key list and finding next key value         int next = 0 ;
    int KeyIndex = 0;       int b;      for(b= 0; b<keyList.size(); b++) {
        if(keyList.get(b)==key){
            KeyIndex = b;           }                       }       System.out.println("index of key\t" +KeyIndex);         int nextIndex = KeyIndex+1;         System.out.println("next Index = " +nextIndex);         next = keyList.get(nextIndex);
            System.out.println("next Index value is = " +next);

            for( int z = KeyIndex; z < next ; z++) {
                System.out.print(string.charAt(z));         }   }

            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-11T03:43:05.900

这个问题可以在 O(n) 中解决。想法是维护一个窗口并向窗口添加元素，直到它包含小于或等于 2，如果需要更新我们的结果，同时这样做。如果唯一元素超过窗口中的要求，则开始从左侧删除元素。

```
#code
from collections import defaultdict

def solution(s, k):
  length = len(set(list(s)))
  count_dict = defaultdict(int)
  if  length < k:
    return "-1"

  res = []
  final = []
  maxi = -1

  for i in range(0, len(s)):

    res.append(s[i])
    if len(set(res)) <= k:
      if len(res) >= maxi and len(set(res)) <= k :
        maxi = len(res)
        final = res[:]
        count_dict[maxi] += 1

    else:
      while len(set(res)) != k:
        res = res[1:]
      if maxi <= len(res) and len(set(res)) <= k:
        maxi =  len(res)
        final = res[:]
        count_dict[maxi] += 1
    return len(final)

print(solution(s, k)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-21T10:21:17.457

这里的想法是将每个字符的出现添加到哈希图中，当哈希图大小增加超过 k 时，删除不需要的字符。

```
private static int getMaxLength(String str, int k) {
        if (str.length() == k)
            return k;
        var hm = new HashMap<Character, Integer>();
        int maxLength = 0;
        int startCounter = 0;
        for (int i = 0; i < str.length(); i++) {
            char c = str.charAt(i);
            if (hm.get(c) != null) {
                hm.put(c, hm.get(c) + 1);
            } else {
                hm.put(c, 1);
            }
            //atmost K different characters
            if (hm.size() > k) {
                maxLength = Math.max(maxLength, i - startCounter);
                while (hm.size() > k) {
                    char t = str.charAt(startCounter);
                    int count = hm.get(t);
                    if (count > 1) {
                        hm.put(t, count - 1);
                    } else {
                        hm.remove(t);
                    }
                    startCounter++;
                }
            }
        }
        return maxLength;
    } 
```

# jquery - 下拉触发按钮

> ID：14997268
> 
> 赞同：0
> 
> 时间：2013-02-21T08:02:32.793
> 
> 标签：jquery

我有以下脚本

```
$(function() {
        $(".draggable").draggable({
                revert: true
        });
        $("#droppable").droppable({
                over: function() {
                       $(this).css('backgroundColor', '#cedae3');
                },
                out: function() {
                        $(this).css('backgroundColor', '#CDAF95');
                },
                drop: function(e, ui) {

                      $(ui.draggable).trigger('click');

                }
        });
}); 
```

我有**多个可拖动**的，每个人都在一个 td 中。在每个可拖动对象中，我都有一个按钮。

如何**从拖放的可拖动对象**中触发按钮？这不起作用：`$(ui.draggable).trigger('click');`有人有什么建议吗？

```
<td class="draggable" class="ui-widget-content">
                        <form action="index.php" method="post">
                            <?php echo $produs['nume_produs']; ?>
                            <hr />
                            Pret: <?php echo $produs['pret']; ?> lei
                            <br />

                            <input type="hidden" name="nume_produs" value="<?php echo $produs['nume_produs']; ?>" />
                            <input type="hidden" name="produs_id" value="<?php echo $produs['id']; ?>" />
                            <input type="hidden" name="pret" value="<?php echo $produs['pret']; ?>" />
                            <input type="submit" name="adauga" class="adauga" value="Adauga"/>
                        </form>
                    <td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:05:21.557

`$(ui.draggable).trigger('click');`会触发点击您的**可拖动**。你想触发一个按钮的点击，所以使用

`$("#your-button").trigger('click');`

如果您有**多个可拖动对象**，要始终从正确的可拖动对象获取提交按钮，请使用：

`ui.draggable.children('input').attr('type', 'submit')`

**编辑：**

旁：`class="draggable" class="ui-widget-content"`

应该`class="draggable ui-widget-content"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:06:28.550

您不需要在 ui.draggable div 中选择实际的按钮元素吗？因此，在这种情况下，请尝试：

> $(#adauga).trigger('点击');

# ios - 如何在 iOS 应用程序中获取图像坐标？

> ID：14997274
> 
> 赞同：1
> 
> 时间：2013-02-21T08:03:09.717
> 
> 标签：ios, ipad, drawing, signature, coordinate-transformation

我必须在我的 iPad 应用程序中实现签名功能。我将签名转换为图像，然后我想获取该图像的坐标。我怎么能做到这一点请帮助我。

注意：我不是在谈论纬度和经度。我说的是像素坐标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:28:52.990

`UIViewController`是 的子类`UIResponder`，因此您可以实现方法`touchesBegan:withEvent:`、`touchesMoved:withEvent:`和`touchesEnded:withEvent:`来`touchesCancelled:withEvent:`检测“手语动作”。

例如使用方法`-touchesMoved:withEvent:`

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPosition = [touch locationInView:self.view];
    NSLog(@"%@", NSStringFromCGPoint(currentPosition));
} 
```

有关更多信息，请查看课程的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/cl/UIResponder)`UIResponder`

# c++ - GDB 和 NS2：如何在某些函数调用处停止程序

> ID：14997275
> 
> 赞同：0
> 
> 时间：2013-02-21T08:03:15.490
> 
> 标签：c++, gdb, tcl, breakpoints, ns2

我正在使用 gdb 来调试 NS-2，它是一个网络协议模拟器。它需要一个 .tcl 文件作为输入并解释它。[我认为是翻译。]

有些代码是用 tcl（事件和网络组件的创建）编写的，有些是用 C++ 编写的（尤其是数据包格式、代理等）。

我在 C++ 中创建了一个代理，我想在某个函数调用时停止它，以便我可以看到堆栈跟踪并找到在它之前调用了哪些其他类。

这就是我所做的：

我的 MyAgent::function 之一出现了一些错误，它给出了 Segmentation Fault 并且 gdb 自动停止在那里。然后我可以看到堆栈跟踪。我纠正了错误。

现在当我跑步时

```
 gdb ./ns
   b MyAgent::function()
   /*
   When i press TAB after writing "b MyA" it gives me all functions 
   of my class :). when i press enter after above command -- 
   it asks me "Breakpoint on future shared library load" and i say Yes. 
   I hope this is ok ??
   */
   r myfiles/myWireless.tcl 
```

现在它运行并且不会在任何地方停止。:(

我确信这个函数正在被调用，因为当发生分段错误时，它在那个函数处停止。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:48:31.740

您可以在该函数中添加断点：

> (gdb) 中断 MyAgent::function()

您必须确保使用获取调试符号所需的任何选项进行编译。在 GCC 上，使用`-g`or`-ggdb`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:38:33.147

您需要`-args`指定`tcl`将执行的脚本的选项。

像这样运行`gdb`：

```
gdb -args ./ns  path/to/tcl/script.tcl 
```

要为 c++ 代码启用调试标志，如果还没有这样做，请重新配置您的 ns2 安装：

```
./configure --enable-debug     ;# plus any other flags you use for configuring
make clean
make -j 3                    ;# -j for faster compiling
make install                   ;# optional 
```

您也可以使用`--with-tcldebug=...`, 来调试 tcl 代码（您需要先安装 tcldebug 才能使用此选项）

# javascript - 在 JavaScript 中，当一个局部变量被提升时，它是否在声明之前就在范围内？

> ID：14997277
> 
> 赞同：2
> 
> 时间：2013-02-21T08:03:25.880
> 
> 标签：javascript, scope, hoisting

[在JavaScript Ninja](https://rads.stackoverflow.com/amzn/click/com/193398869X)的秘密一书中，p。43 - 46，它有一些代码，如：

```
function assert(flag, msg) {
    if (!flag) {
        console.log("Assertion failed for: " + msg);
    }
}

function outer() {
    var a = 1;

    function inner() { }

    assert(typeof b === "number", "b is in scope");
    var b = 1;
}

outer(); 
```

结论是，由于断言失败，“b 尚未在范围内，直到它被声明”。但我认为情况并非如此，因为首先，`b`可能已经有一个本地范围，但只是它还不是一个“数字”。 `b`实际上已经是一个局部作用域`b`，并且会影响任何全局作用域`b`。

例如：

```
var b = 123;

function foo() {
    b = 456;

    var b = 789;
}

foo();

console.log(b);   // prints out 123 
```

因为它打印出来了`123`，所以我们可以看到，当该行`b = 456;`执行时，`b`已经是一个本地范围`b`。（即使在分配之前它尚未初始化）。

此外，我们可以将其打印出来而不是分配给`b`：

```
var b = 123;

function foo() {
    console.log(b);  // prints out undefined

    var b = 789;
}

foo();

console.log(b);     // prints out 123 
```

再一次，我们可以看到第一个打印输出 is not `123`but is `undefined`，这意味着 the`b`是一个本地范围`b`，因此，`b`在本书的示例中，真的已经在范围内。

上述描述和概念是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:11:50.100

的确，这本书的结论是错误的。`var b` *函数内部的任何地方*意味着`b`存在于函数内部的*任何地方*。这就是“吊装”的意思。所有`var`和`function`声明都被提升到顶部，无论它们出现在范围内的什么位置。该*值*还没有被分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:39:03.757

关于代码：

```
assert(typeof b === "number", "b is in scope");
var b = 1; 
```

该声明：

> “b 尚未在范围内，直到它被声明”

是错的。`b`是“在范围内”（因为它是声明的，它是在执行任何代码之前创建的）但还没有被赋值，所以`typeof b`返回`undefined`并且测试失败。

> 上述描述和概念是否正确？

是的，或多或少。一个更简单的证明是：

```
function foo() {
  alert(b);
  var b = 5;
}

function bar() {
  alert(x);
  x = 5;
}

foo() // 'undefined' since b is "in scope" but hasn't been assigned a value yet

bar() // throws an error since x isn't "in scope" until the following line. 
```

# c# - selenium webdriver 点击javascript链接

> ID：14997280
> 
> 赞同：1
> 
> 时间：2013-02-21T08:03:51.340
> 
> 标签：c#, javascript, selenium

我正在使用 Selenium-webdriver 和 C# 来测试网站。我有一个问题，当我`Click()`用来单击链接时，它不起作用。单击它应该会打开一个新窗口。我用工具查看了 html 结构，发现链接上有一个 Javascript 操作。

html如下：

```
<span class="new_doc">
  <a style="cursor: pointer;" onclick="javascript:popwinnewproject('pc.aspx?page=docnew2tree&j=P2&grp=actv&t=');">
    <img title="new doc" src="http://local:8080/res/icon/new-doc.png"/> 
```

我应该使用什么方法单击它以打开新窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-20T17:42:45.317

在某些情况下，我使用 JavaScript click ：

```
IJavaScriptExecutor executor = (IJavaScriptExecutor).driver;
executor.ExecuteScript("arguments[0].click();", myElement); 
```

其中， myElement 是*IWebElement*。

# jquery - 隐藏版权 Bing Map Ajax Control 7.0

> ID：14997282
> 
> 赞同：1
> 
> 时间：2013-02-21T08:03:59.963
> 
> 标签：jquery, html, bing-maps

如何在[Bing Map Ajax Control 7.0](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1)中删除版权 ？

![在此处输入图像描述](../Images/33c02859fe964644e3cfda1d52f12362.png)

没有任何选择可以做到这一点。我尝试通过 jQuery 从 DOM 中删除元素，但不工作。

有什么办法可以去掉这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T09:26:43.813

无需使用棘手的 CSS 提示来隐藏控件上的版权，不推荐也不是官方方式。为了隐藏AJAX v7.0控件的版权，可以使用mapOption的属性上的属性showCopyright，见MSDN：

[http://msdn.microsoft.com/en-us/library/gg427603.aspx](http://msdn.microsoft.com/en-us/library/gg427603.aspx)

**重要的：**

> Bing Maps Platform API 使用条款要求显示版权信息。仅当通过其他方式显示版权信息时，才将此选项设置为 false。

结合使用，您可以在 Map 元素上使用 copyrightchanged，以便您可以按照自己的方式跟踪和管理版权。

**代码示例：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script type="text/javascript" charset="UTF-8" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0">
    </script>
    <script type="text/javascript">
        var map = null;

        function getMap() {

            map = new Microsoft.Maps.Map(
                document.getElementById('myMap'), 
                { 
                    credentials: 'YOURKEY', 
                    showCopyright: false
                });

            Microsoft.Maps.Events.addHandler(map, 'copyrightchanged', function() {
                map.getCopyrights(function(result) {
                    var container = document.getElementById('copyright');
                    container.innerHTML = result.join(' ');
                });
            });
        }

    </script>
</head>
<body onload="getMap();">
    <div id="myMap" style="position: relative; width: 800px; height: 600px;">
    </div>
    <div id="copyright"></div>
</body>
</html> 
```

# android - android facebook sdk中的FeedDialog不起作用

> ID：14997283
> 
> 赞同：1
> 
> 时间：2013-02-21T08:04:08.437
> 
> 标签：android, facebook

我正在尝试使用 FeedDialog 在 facebook 上发布消息。
参考：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)

代码：

```
private void publishFeedDialog(){

    Bundle params = new Bundle();
    params.putString("name", "Facebook SDK for Android");
    params.putString("caption", "Build great social apps and get more installs.");
    params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    params.putString("link", "https://developers.facebook.com/android");
    params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

    FeedDialogBuilder builder = new FeedDialogBuilder(getActivity(), Session.getActiveSession(), params);
    builder.setOnCompleteListener(new OnCompleteListener() {

        @Override
        public void onComplete(Bundle values, FacebookException error) {

            if (error != null) {
                Log.d(TAG, "FeedDialog Error : "+error.getMessage());
            }

            if (error == null) {

                // When the story is posted, echo the success
                // and the post Id.

                final String postId = values.getString("post_id");

                if (postId != null) {
                    Toast.makeText(getActivity(),"Posted story, id: "+postId,Toast.LENGTH_SHORT).show();
                } else {
                    // User clicked the Cancel button
                    Toast.makeText(getActivity().getApplicationContext(), "Publish cancelled",Toast.LENGTH_SHORT).show();
                }
            } else if (error instanceof FacebookOperationCanceledException) {
                // User clicked the "x" button
                Toast.makeText(getActivity().getApplicationContext(), "Publish cancelled", Toast.LENGTH_SHORT).show();
            } else {
                // Generic, ex: network error
                Toast.makeText(getActivity().getApplicationContext(), "Error posting story",Toast.LENGTH_SHORT).show();
            }
        }
    });

    builder.build().show();

} 
```

按钮 onClickListener：

```
publishButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            publishFeedDialog();

        }
    }); 
```

当我点击发布按钮时，会显示一个等待对话框，一段时间后它会消失，我`Toast`说`"Error posting story"`，为什么？

日志猫

```
D/FacebookSDK.WebDialog(3572): Webview loading URL: 
```

[https://m.facebook.com/dialog/feed?picture=https%3A%2F%2Fraw.github.com%2Ffbsamples%2Fios-3.x-howtos%2Fmaster%2FImages%2Fiossdk_logo.png&redirect_uri=fbconnect%3A% 2F%2Fsuccess&description=%20Facebook%20SDK%20for%20Android%20makes%20it%20easier%20and%20faster%20to%20develop%20Facebook%20integrated%20Android%20apps.&link=https%3A%2F%2Fdevelopers.facebook.com% 2Fandroid&name=Facebook%20SDK%20for%20Android&display=touch&app_id=504782202896276&caption=Build%20great%20social%20apps%20and%20get%20more%20installs.&type=user_agent&access_token=BAAHLGMPkf5QBACk6Gon9Mkoxgt0RvmdI6DkStkZBs8wj9ZBGxuXSS0CoWnjZCTfqPY1bUb006uZAeoxCcj7SwSCm4UTnBbW0z7GBmI2cxvCoHEb2ZBrhLkZABUBcYKXld7giXXu498X1Piv5RbsZCGiILBu6oFSgiblctPNEHmYr4iSI6ZCfiMQJ449BMsxPULJegXaFFJWc2T9ScXVK160V9PU3kNlpPjpjbDQ3jiHjRwZDZD](https://m.facebook.com/dialog/feed?picture=https%3A%2F%2Fraw.github.com%2Ffbsamples%2Fios-3.x-howtos%2Fmaster%2FImages%2Fiossdk_logo.png&redirect_uri=fbconnect%3A%2F%2Fsuccess&description=The%20Facebook%20SDK%20for%20Android%20makes%20it%20easier%20and%20faster%20to%20develop%20Facebook%20integrated%20Android%20apps.&link=https%3A%2F%2Fdevelopers.facebook.com%2Fandroid&name=Facebook%20SDK%20for%20Android&display=touch&app_id=504782202896276&caption=Build%20great%20social%20apps%20and%20get%20more%20installs.&type=user_agent&access_token=BAAHLGMPkf5QBACk6Gon9Mkoxgt0RvmdI6DkStkZBs8wj9ZBGxuXSS0CoWnjZCTfqPY1bUb006uZAeoxCcj7SwSCm4UTnBbW0z7GBmI2cxvCoHEb2ZBrhLkZABUBcYKXld7giXXu498X1Piv5RbsZCGiILBu6oFSgiblctPNEHmYr4iSI6ZCfiMQJ449BMsxPULJegXaFFJWc2T9ScXVK160V9PU3kNlpPjpjbDQ3jiHjRwZDZD)

当我在浏览器中打开上面的链接时，它可以工作并显示“post to wall”对话框，如![在此处输入图像描述](../Images/86c1941b46ede20823da3dbab23c9103.png)

```
D/MainFragment(3150): {Response:  responseCode: unknown, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false}

D/MainFragment(3150): FeedDialog Error : Couldn't find the URL. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:19:02.510

这是来自 facebook 开发者页面，我用过。就我而言，它有效。你应该试试这个：

```
private void publishFeedDialog() {
    Bundle params = new Bundle();
    params.putString("name", "Facebook SDK for Android");
    params.putString("caption", "Build great social apps and get more installs.");
    params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    params.putString("link", "https://developers.facebook.com/android");
    params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

    WebDialog feedDialog = (
        new WebDialog.FeedDialogBuilder(getActivity(),
            Session.getActiveSession(),
            params))
        .setOnCompleteListener(new OnCompleteListener() {

            @Override
            public void onComplete(Bundle values,
                FacebookException error) {
                if (error == null) {
                    // When the story is posted, echo the success
                    // and the post Id.
                    final String postId = values.getString("post_id");
                    if (postId != null) {
                        Toast.makeText(getActivity(),
                            "Posted story, id: "+postId,
                            Toast.LENGTH_SHORT).show();
                    } else {
                        // User clicked the Cancel button
                        Toast.makeText(getActivity().getApplicationContext(), 
                            "Publish cancelled", 
                            Toast.LENGTH_SHORT).show();
                    }
                } else if (error instanceof FacebookOperationCanceledException) {
                    // User clicked the "x" button
                    Toast.makeText(getActivity().getApplicationContext(), 
                        "Publish cancelled", 
                        Toast.LENGTH_SHORT).show();
                } else {
                    // Generic, ex: network error
                    Toast.makeText(getActivity().getApplicationContext(), 
                        "Error posting story", 
                        Toast.LENGTH_SHORT).show();
                }
            }

        })
        .build();
    feedDialog.show();
} 
```

仔细看这部分：

```
WebDialog feedDialog = (new WebDialog.FeedDialogBuilder(getActivity(), 
```

但你用过

```
FeedDialogBuilder builder = new FeedDialogBuilder(getActivity(), 
```

我认为问题就在这里。

# android - 构建目标和最小 sdk 版本

> ID：14997286
> 
> 赞同：0
> 
> 时间：2013-02-21T08:04:16.400
> 
> 标签：android, api, sdk

我正在尝试制作一个android应用程序。我很难为我的第一个应用程序找到合适的 API 级别。我也不确定最小方舟版本是什么以及在创建新项目时应该输入什么。

有人可以回答我如何确定正确的 API 级别以及 min sdk 版本到底是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:12:48.527

Minimum SDK version specifies that you application will work on minimum that android version and above. It also helps application to be showed on market. So when you put minimum sdk version like 8, your application will work on minimum android version 8 and above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:18:18.177

建议选择您在应用程序中使用的较低的“minSdkVersion”。通常我使用 minSdkVersion 7 (= Android 2.1 Eclair) 来接触最多的人。[您可以在此处](http://developer.android.com/about/dashboards/index.html)找到饼图。当您开发时，如果您使用了新的 API，请毫不犹豫地增加您的 minSdkVersion，您可以在 Android 参考中找到任何方法的 API 级别。

# ruby-on-rails - 如何根据 Rails 中的连接表对结果进行排序？

> ID：14997289
> 
> 赞同：2
> 
> 时间：2013-02-21T08:04:30.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有帐户模型，

```
class Account < ActiveRecord::Base
  has_many :account_games
  def score
    account_games.map(&:score).sum
  end
end 
```

和 AccountGame ：

```
class AccountGame < ActiveRecord::Base
  belongs_to :account
end 
```

获得最高分的帐户的最佳方法是什么？如您所见， score 是相关 account_games score 字段的总和。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:07:29.977

尝试

```
Account.joins(:account_games).sum('account_games.score', group: :account_id, order: 'sum_account_games_score') 
```

这将为您提供一个哈希值，其中键是 account_ids，值是总分。

您可以将限制选项传递给帐户以获取前 x 个帐户。就像是

```
Account.limit(10).joins(:account_games).sum('account_games.score', group: :account_id, order: 'sum_account_games_score DESC') 
```

# javascript - 我们可以在 iframe 中获取元素吗？

> ID：14997291
> 
> 赞同：0
> 
> 时间：2013-02-21T08:04:32.673
> 
> 标签：javascript, asp.net, iframe

嗨，我在 asp.net 中使用 iframe 导航到该网站。当 iframe 加载了网站 url 时，我想将值传递给 iframe 内的文本框，如何将 iframe 内的值传递给输入类文本框。我已经尝试了很多，但我无法完成任务。请尝试帮助我这是我的代码

```
<script type="text/javascript">
function mf() {
document.getElementById("INPUT").setAtrribute("value", "myvalue");
}
</script>

</head>
//I TRIED TO CALL FUNCTION BY BOTH  BODY ONLOAD AND IFRAME ONLOAD BUT IT DOSN'T WORK
<body onload="mf()">

<form id="form1" runat="server">
//I WANT TO PASS VALUE INSIDE IFRAME TO THIS WEBSITE TEXTBOX
<iframe id="yourid" src="https://www.iauc.co.jp/auction/prelogin01_en.jsp?  timestamp=1361429737811" style="width:600px; height:600px;"> </iframe>

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:16:45.180

如果 iframe DOM 与父页面不在同一个域中，则您无法访问它。如果它是同一个域，您可以使用 postMessage 方法。在这里阅读它[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

# javascript - 从 javascript 获取 ASPX 单选按钮文本或值

> ID：14997296
> 
> 赞同：1
> 
> 时间：2013-02-21T08:04:42.790
> 
> 标签：javascript, asp.net, radio-button

ASPX 单选按钮位于数据列表模板中

```
<asp:RadioButton ID="RadioButton1" runat="server"  
        GroupName="rdb" 
        Text='<%#  Eval("type1") %>'  
        onclick="Getr1(this)"/> 
```

JavaScript

```
function getr1(val){
    alert(val)
} 
```

如果我在任何 html 控件中使用此函数，它将返回一个值，但它在 aspx 单选按钮中不起作用。我使用了这段代码： `onchange="GetQty(this.options[this.selectedIndex].value)"`从 aspx 下拉列表中获取选定的索引，它工作得很好，也许有人可以帮助我找出 aspx rb 的正确语法。我已经试过了`onclick="Getr1(this.options[this.checked].value)"`，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:47:23.250

您的代码很好，只需要稍作改动。

```
<asp:RadioButton ID="RadioButton1" runat="server"  
    CliientIDMode="Static" GroupName="rdb" 
    Text='<%#  Eval("type1") %>' /> 
```

和

```
 <asp:Label ID="Label1" runat="server" style="font-size: x-small"
    Text='<%# Eval("type1") %>'></asp:Label> 
```

用于获取**RadioButton 文本**的 jQuery ：

```
$("#RadioButton1").click(function{
    alert( $(this).siblings('label').text());
}); 
```

用于获取**asp:Label Text**旁边的 RadioButton 的 jQuery：

```
$("#RadioButton1").click(function{
    alert( $(this).siblings('span').text());
}); 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:23:22.240

试试这个 JavaScript。

```
function Getr1(elm) {
    var nextElm = elm.nextSibling;
    //catching white space, comments etc...
    while (nextElm && nextElm.nodeType != 1) {
        nextElm = nextElm.nextSibling
    }
    alert(nextElm.innerHTML);
} 
```

原因：asp:RadioButton在浏览器中是这样渲染的

```
<input id="MainContent_RadioButton1" type="radio" onclick="Getr1(this);" 
     value="RadioButton1" name="ctl00$MainContent$rdb">
<label for="MainContent_RadioButton1">your rendered text here</label> 
```

而如果你使用 jQuery，它就会像这样简单。

```
function Getr1(elm) {
    alert( $(elm).next().html() );
} 
```

# bash - Bash 搜索和删除？

> ID：14997298
> 
> 赞同：0
> 
> 时间：2013-02-21T08:04:51.390
> 
> 标签：bash, file, search

我需要一个脚本来搜索应用程序目录中的文件并将其删除。如果它不存在，它将继续安装。

我需要删除的内容：

```
/Applications/Cydia.app/Sections/Messages(D3@TH's-Repo).png 
```

如果没有找到，我希望它继续安装。如果它找到该文件，我希望它在继续安装之前将其删除。

这就是我所拥有的：

```
#!/bin/bash
file="/Applications/Cydia.app/Sections/Messages(D3@TH's-Repo).png"
if [ -f "$file" ]
then
    echo "$file delteling old icon"
    rm -rf /Applications/Cydia.app/Sections/Messages(D3@TH's-Repo).png

else
    echo "$file old icon deleted already moving on"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:14:20.210

try this

```
#!/bin/bash
if [ -e <your_file> ]; then
    rm -f <your_file>
 fi 
```

this should do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:36:08.477

括号用于在[bash](/questions/tagged/bash "显示标记为“bash”的问题")中启动子shell ，因此您需要将文件名放在双引号中（就像您在文件测试中所做的那样）。

换行：

```
rm -rf /Applications/Cydia.app/Sections/Messages(D3@TH's-Repo).png 
```

至：

```
rm -rf "${file}" 
```

这将删除文件（假设没有权限问题）。

# ios - Xcode 和 App Store 中的 NIB 之间的区别

> ID：14997302
> 
> 赞同：2
> 
> 时间：2013-02-21T08:05:01.933
> 
> 标签：ios, xcode

我们在应用商店中有一个商业应用，自上次更新以来，主视图上的主形状按钮不起作用。用户无法触摸按钮。现在，它不仅适用于应用商店应用。当我将应用程序（相同的代码，相同的版本）直接从 Xcode 部署到相同的设备时，它可以工作。所以为什么？使用 iExplorer，我已经导出了两个文件夹并进行了比较。我可以看到，.nib 文件是不同的。在这种特殊情况下，带有形状按钮的主视图，文件大小也不同。Xcode 版本的文件大小为 10814 字节，App Store 版本只有 10804。有人可以给我解释一下吗？

谢谢

# timer - 刷新页面时 JavaScript 计时器正在重置

> ID：14997303
> 
> 赞同：0
> 
> 时间：2013-02-21T08:05:07.783
> 
> 标签：timer, counter, countdown

我有一个倒计时脚本..我打算用它进行在线考试..但现在的问题是它在刷新页面时正在重置......

如果他们也刷新页面，有什么想法可以防止重置时间并继续没有任何问题吗？

这是代码

```
<script>

    var mins;

    var secs;

function cd() {

    mins = 1 * m("2"); // change minutes here
        secs = 0 + s(":01"); // change seconds here (always add an additional second to your total)
        redo();

}

function m(obj) {
    for(var i = 0; i < obj.length; i++) {
        if(obj.substring(i, i + 1) == ":")
        break;
    }
    return(obj.substring(0, i));
}

function s(obj) {
    for(var i = 0; i < obj.length; i++) {
        if(obj.substring(i, i + 1) == ":")
        break;
    }
    return(obj.substring(i + 1, obj.length));
}

function dis(mins,secs) {
    var disp;
    if(mins <= 9) {
        disp = " 0";
    } else {
        disp = " ";
    }
    disp += mins + ":";
    if(secs <= 9) {
        disp += "0" + secs;
    } else {
        disp += secs;
    }
    return(disp);
}

function redo() {
    secs--;
    if(secs == -1) {
        secs = 59;
        mins--;
    }
    document.getElementById("disp").innerHTML=dis(mins,secs); // setup additional displays here.

    if((mins == 0) && (secs == 0)) {
        window.alert("Time is up. Press OK to continue."); // change timeout message as required
        // window.location = "yourpage.htm" // redirects to specified page once timer ends and ok button is pressed
    } else {
        cd = setTimeout("redo()",1000);
    }
}

function init() {
  cd();
}
window.onload = init;

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:10:27.370

如果页面被刷新，你所有的 javascript 代码都会重新执行。这是正常行为。

如果您绝对需要从离开的地方继续，您可以使用本地存储 API（仅在现代浏览器中可用）来存储时间（每秒钟更新一次值）。

加载页面后，您可以检查该值是否存在于本地存储中，并从您所在的位置开始。

你确定你需要这种行为顺便说一句吗？

# asp.net - 如何将 xml 文件的“自定义工具”属性设置为 T4 文件？

> ID：14997308
> 
> 赞同：3
> 
> 时间：2013-02-21T08:05:26.050
> 
> 标签：asp.net, xml, visual-studio, t4, resx

我们知道 asp.net .resx 文件有一个自定义工具来生成一些 c# 代码 ( **ResXFileCodeGenerator** )。

我有一个 xml 文件，我想将其自定义工具属性设置为**T4**文件。

如何将 T4 文件绑定到 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:43:58.783

您可以使用[T4 Toolbox](http://visualstudiogallery.msdn.microsoft.com/7f9bd62f-2505-4aa4-9378-ee7830371684)做到这一点。在解决方案资源管理器中选择 resx 文件并在属性窗口中设置自定义工具模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:17:54.750

看看[http://t4-editor.tangible-engineering.com/t4editor_features.html#Compare](http://t4-editor.tangible-engineering.com/t4editor_features.html#Compare)。有一个名为“添加代码生成项命令”的功能可能会起到作用。

# d3.js - 如何使用 d3.js 更改折线图中轴的比例？

> ID：14997312
> 
> 赞同：0
> 
> 时间：2013-02-21T08:05:39.857
> 
> 标签：d3.js, linechart

我想在折线图中更改 X 轴的比例，以便一次显示 20,000 个或更多值。请帮我解决一下这个。我的折线图有两列（ID 和 TIME）。ID 值是 1、2、3 等等，直到 20132。TIME 值从 0 到 525 不等。我无法用这些值绘制折线图。你能帮我改变轴的比例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:41:12.153

什么方式无法绘制折线图？您可能希望使用 D3s 的内置比例函数让 x 轴成为数据的函数。有关更多指南，请参阅[本教程](http://synthesis.sbecker.net/articles/2012/07/15/learning-d3-part-5-axes)。

**编辑**：

因此，假设您有一些数据存储在变量 中`data`。首先，您需要一个重新计算每个数据值以适合您的 SVG 容器的比例。例如：

```
var x = d3.scale.linear()
    .domain([0, d3.max(data, function (d) { return d.id; })]) //Convert the id-values...
    .range([0, 960]); //...to a range from 0 to 960. 
```

下一步是构建一个轴，该轴从刻度范围内获取数据，如下所示：

```
var xAxis = d3.svg.axis().scale(x); 
```

最后一步（好吧，除了之后的一些强制性样式）步骤是将轴链接到您的 SVG 容器。假设您命名了 container `svg`。然后：

```
svg.append('g')
  .attr("class", "axis")
  .call(xAxis); 
```

# jquery - HTMLInputElement 没有方法“父”

> ID：14997313
> 
> 赞同：2
> 
> 时间：2013-02-21T08:05:43.447
> 
> 标签：jquery

我的页面上有 2 个非常相似的表单。

在使用 ajax 将数据发送到使用数据的 php 处理程序之前，我在 jquery 中进行简单验证以检查每个字段是否具有值。

由于表单之间的相似之处，我无法知道提交了哪个表单，所以我想我会尝试通过表单容器 div 上的 id 来区分

```
<div name="contactform2" class="form">
    <div width="100%" class="con2">

        <div class="lable">
            <label for="first_name">First Name *</label>
        </div>
        <input  type="text" name="first_name" class="span4">

        <div class="lable">
            <label for="email">Email Address *</label>
        </div>
        <input  type="text" name="email" class="span4">

        <div class="lable">
            <label for="telephone">Contact Number *</label>
        </div>
        <input  type="text" name="telephone" class="span4">

        <div class="lable">
            <label for="comments">Message *</label>
        </div>
        <textarea  name="comments" rows="8" class="span4"></textarea>

        <input type="submit" value="Submit" class="btn btn-success">
    </div>
</div> 
```

实际上，这些形式之间的唯一区别在于，其中一个有一个`<select>`，而另一个没有。

我的 jquery 看起来像这样：

```
$('input[type=submit]').click(function() {
    var parentname = this.parent('div').attr('name');
    console.log('Form used: ' + parentname);

    var fname = 0,
        email = 0,
        tel = 0;
        comm = 0;

    // Validate data
}); 
```

我想也许我在这里弄错了选择器，因为我通常按 id/class/tagname 选择，所以我什至不确定它是否有效。

任何人都可以提出替代方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T08:07:02.283

[`.parent()`](http://api.jquery.com/parent/)是一个 jQuery 函数，你忘了把`this`.`$()`

```
var parentname = $(this).parent('div').attr('name');
console.log('Form used: ' + parentname); 
```

你应该看看`.closest()`。

# .net - 从对话框窗口回调到主窗口

> ID：14997314
> 
> 赞同：4
> 
> 时间：2013-02-21T08:05:44.187
> 
> 标签：.net, wpf, mvvm, callback, mvvm-light

我正在开发一个 WPF MVVM 应用程序，它使用**MVVMLightToolkit**作为第三方助手。我的场景如下：

我有一个主窗口，在关闭主窗口时，我必须显示一个新的对话框窗口（保存更改对话框窗口）以确认用户是否必须将他在应用程序中所做的更改**保存到状态文件或****不是**。如何在 MVVM 中处理这种情况？通常为了显示一个新窗口，我正在使用 MVVMLight **Messenger**类。在这种情况下，我从**主窗口打开“****保存更改对话框”窗口****后面的代码。我需要根据从“保存更改”对话框窗口中选择的用户选项（SAVE、SAVE/EXIT、CANCEL）回调主视图模型，并基于此我必须检查是否必须关闭主窗口或不。处理这种情况的最佳 MVVM 方法是什么？**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:45:41.403

只需将消息从/传递到 ViewModel。

**查看**：

```
private void Window_Closing(object sender, CancelEventArgs e)
{
    Messenger.Default.Send(new WindowRequestsClosingMessage(
        this, 
        null,
        result => 
        { 
            if (!result)
                e.Cancel = true;
        });
} 
```

**视图模型**：

```
Messenger.Default.Register<WindowRequestsClosingMessage>(
    this,
    msg => 
    {

        // Your logic before close

        if (CanClose)
            msg.Execute(true);
        else
            msg.Execute(false);
    }); 
```

**留言**：

```
public class WindowRequestsClosingMessage: NotificationMessageAction<bool>
{
    public WindowRequestsClosingMessage(string notification, Action<bool> callback)
        : base(notification, callback)
    {
    }

    public WindowRequestsClosingMessage(object sender, string notification, Action<bool> callback)
        : base(sender, notification, callback)
    {
    }

    public WindowRequestsClosingMessage(object sender, object target, string notification, Action<bool> callback)
        : base(sender, target, notification, callback)
    {
    }
} 
```

MVVM Light 的*NotificationMessageAction<TResult>*允许您传递消息并获取 TResult 类型的结果。要将 TResult 传递回请求者，请`Execute()`像示例一样调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:22:50.113

为什么不在闭幕式中执行以下操作：

```
 private void Window_Closing(object sender, CancelEventArgs e)
    {
        SaveDialog sd = new SaveDialog();
        if (sd.ShowDialog() == false)
        {
            e.Cancel = true;
        }
    } 
```**

# ajax - Yii 从 cjuidialog 上传文件

> ID：14997326
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:06:35.567
> 
> 标签：ajax, file-upload, yii

为什么我不能在 Yii 中从 cjuidialog 上传文件？

```
<div class="form">
    <?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'edit-user-form',
        'enableAjaxValidation'=>true,
        'htmlOptions' => array('enctype' => 'multipart/form-data'),
        'clientOptions' => array(
            'validateOnSubmit' => true,
            'validateOnChange' => true,
        )
    ));
    ?>
    <fieldset>

            <?php echo $form->errorSummary(array($model)); ?>

            <div>
                <?php echo $form->labelEx($model,'rubric_image'); ?>
                <?php echo $form->fileField($model,'rubric_image'); ?>
            </div>

        <div>
            <?php echo CHtml::submitButton('Upload'); ?>
        </div>
    </fieldset>
    <?php $this->endWidget(); ?>
</div> 
```

在标准 html 页面上，文件被发送，但如果使用 cjuidialog，文件不会被发送。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:04:57.477

根据 yii 论坛帖子，您不能仅通过 ajax 上传文件。你需要一些额外的脚本来做到这一点。

链接到 yii 论坛帖子：[http ://www.yiiframework.com/forum/index.php/topic/24525-file-upload-with-ajax/](http://www.yiiframework.com/forum/index.php/topic/24525-file-upload-with-ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:31:33.863

这篇[yii wiki 文章](http://www.yiiframework.com/wiki/72/cjuidialog-and-ajaxsubmitbutton/)非常详细地解释了如何在 CJuiDialog 上显示表单。我认为问题不在于文件上传，而在于表单本身。

# android - Json在android中获取值

> ID：14997329
> 
> 赞同：0
> 
> 时间：2013-02-21T08:06:53.923
> 
> 标签：android, json

这是我的 json 输出：

```
{"Please enter valid mobile no!!":1} 
```

这是我的代码：

```
jArray = new JSONArray(results);
JSONObject json_data=null;
json_data = jArray.getJSONObject(0);
int result=json_data.getInt("1"); // get the json string name
System.out.println("message "+result); 
```

但它给了我一个例外。

这是我的 php 代码：-

```
$arr = array("Please enter valid mobile no!!"=>1); 
echo json_encode($arr); exit 
```

如何检索值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:12:37.097

The key in your example is "Please enter valid mobile no!!" So `int result=json_data.getInt("Please enter valid mobile no!!");` should return 1, not the other way around.

If you want to use 1 as a key you should use:

```
 String result=json_data.getString("1");  //get the String with key 1 
```

php code:

```
 $arr = array(1 => "Please enter valid mobile no!!");  //key => value 
```

# node.js - NodeJS SimpleSMTP

> ID：14997330
> 
> 赞同：0
> 
> 时间：2013-02-21T08:07:01.600
> 
> 标签：node.js, smtp

我将 simplesmpt 用于 smpt 服务器。我想创建我的错误答案。例如，当用户尝试身份验证时，我想写“用户不存在”或“帐户被禁止”。我查看**server.js**并找到将这个答案发送给客户端的代码。但是我怎样才能发送我的答案？

```
this.client.send("535 5.7.8 Error: authentication failed: no mechanism available"); 
```

这是**server.js**代码的一部分。如何从我的脚本中更改此答案并生成我自己的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T14:30:45.670

如果我理解正确，您希望在用户身份验证失败时发送自定义错误消息。不需要编辑 SimpleSMTP 源代码。

创建简单的 SMTP 服务器实例时，设置`requireAuthentication`并`true`添加`authorizeUser`.

示例代码样机：

```
var options = {
    ...
    requireAuthentication: true
};

var smtp = simplesmtp.createServer();
smtp.listen(25);

smtp.on("authorizeUser", function (connection, username, password, callback) {

        // your custom asynchronous validation function
        userIsNotAuthorized(function(isValidated){
            if(isValidated)
            {
                return callback(new Error("535 5.7.8 Error: authentication failed: no mechanism available", false);
            }

            callback(null, true);

        });

}); 
```

# qt - 等待 QProcess 完成或持续时间超过

> ID：14997332
> 
> 赞同：1
> 
> 时间：2013-02-21T08:07:03.330
> 
> 标签：qt, pthreads, wait, qthread, qprocess

我正在尝试找到以下情况的解决方案：

QProcess 应该运行命令并在达到所需的持续时间或命令完成时停止执行它。此 QProcess 由 QThread Worker 启动。

这可以通过以下方式轻松完成：

```
QProcess task("executedTool -parameters");
task.start();
task.waitForFinished(desired_max_duration_in_ms); 
```

但也必须有一个暂停洞东西的功能。我可以通过 pthread 信号轻松地暂停 QProcess：

```
kill(task_.pid(), SIGSTOP); 
```

和

```
kill(task_.pid(), SIGCONT); 
```

但是随后 waitForFinished-duration 继续运行并在 QProcess 暂停时超过。

有谁知道如何做到这一点？当我可以暂停运行 QProcess 和等待命令的孔 QThread 时，等待持续时间也会暂停。但是我怎样才能得到一个 QThread 的 pid 呢？有更好的 Qt 解决方案来暂停 QProcess 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:04:40.707

自旋锁是一个简单而简单的解决方案。我用一个while循环替换了waitForFinished(desired_duration)，每个循环休眠100ms。此循环的条件是系统时间小于开始时的系统时间，加上所需的持续时间。当 paused_ 变量设置时，100ms 将被添加到所需的持续时间，因此它会不断推动测量的时间，但也会推动所需的持续时间。

```
qint64 ms_start = QDateTime::currentMSecsSinceEpoch();
qint64 ms_end = ms_start + (bag_list_->at(i)->getDuration() * 1000) + 1500;

while (QDateTime::currentMSecsSinceEpoch() < ms_end && worker_thread_->isRunning())
{
  SleepThread::msleep(100);
  if (paused_)
  {
    qDebug() << "add 100";
    ms_end += 100;
  }
} 
```

这可能不是一个好的解决方案，但它目前正在工作。

如果有人有其他想法，我很乐意听到。

# jquery - jQuery。如何优化替换src

> ID：14997334
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:07:16.293
> 
> 标签：jquery, query-optimization

请帮我优化这段代码，因为它工作得非常慢。

```
$("img[src*='bt_']").each(function() {
 var newSrc = $(this).attr('src');
 var violetCheck = "/violet/";
if(newSrc.indexOf(violetCheck) == -1){
    newSrc = newSrc.replace('images/','images/violet/');
    $(this).attr('src', newSrc);
  } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:19:46.320

```
 $("img [src*='bt_']:not(src*='/violet/')").each(function() {
               var src = $(this).attr("src").replace('images/','images/violet/');
               $(this).attr("src", src);
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:19:56.350

`$("img[src*='bt_']")`将对整个文档进行搜索，而不是替换文档的特定部分。

```
<body>
<div>data not containing img OR not targetted content</div>
<div id="targettedcontent">
<img src="bt_...........
</div>
</body> 
```

然后使用`$("#targettedcontent img[src*='bt_']")......`

这肯定会提高性能。

# python - 如何让 eclipse/pydev 高兴地看到 windows 上的烧瓶扩展？

> ID：14997336
> 
> 赞同：12
> 
> 时间：2013-02-21T08:07:16.727
> 
> 标签：python, eclipse, flask, pydev, flask-extensions

我偶然发现了[这篇文章](http://blog.jasongiedymin.com/post/3855004203/make-eclipse-pydev-happy-to-see-flask-flask-extensions)并遵循了所有步骤。但是 pyDev 不会看到我的烧瓶扩展，这真的很烦人。只有一件事（我认为这是关键）：

`Touch /site-packages/flaskext/__init__.py`

`Touch`我认为是一个unix util。在 Windows 上是否有与此等价的功能？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-14T15:39:20.957

Eclipse 默认使用模块的静态分析。`flask.ext`动态构建导入列表。要使用 Python shell 强制动态分析，请添加`flask.ext`到强制内置列表。

去`Preferences -> PyDev -> Interpreters -> Python Interpreter`。选择您的口译员，转到`Forced Builtins`选项卡。单击`New...`并输入`flask.ext`。

这需要 PyDev 通过 shell 强制分析模块。

有关更多详细信息，请参阅[**PyDev 手册**](http://pydev.org/manual_101_interpreter.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T10:42:59.383

我也在为此苦苦挣扎，问题似乎在于 Flask 导入扩展的方式。如果您打开`flask/ext/__init__.py`文件，您会看到它使用了导入器。我不认为 PyDev 喜欢这么多，所以我用固定的导入编辑了这个文件：

```
import flask_login as login
import flask_sqlalchemy as sqlalchemy
import flask_wtf as wtf

def setup():
    from ..exthook import ExtensionImporter
    importer = ExtensionImporter(['flask_%s', 'flaskext.%s'], __name__)
    importer.install()

setup()
del setup 
```

我还发现 Flask-SQLAlchemy 导入也坏了，所以不要`db.Column`按照文档中的说明进行操作，而是直接使用 sqlalchemy 导入，即`from sqlalchemy import Column, ForeignKey`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-11T19:41:31.103

如果您的项目位于虚拟环境中，并且您希望在 eclipse 中添加该项目，以便该项目使用安装在虚拟环境中的库，那么您应该按照以下步骤操作。

第 1 步：假设您的虚拟环境的绝对路径是： `C:\Users\sadegh\Desktop\flask_eclipse\fe\venv`

[![venv文件夹的内容](../Images/f771c2f93607bdde6150b5edbeb8b737.png)](https://i.stack.imgur.com/khSfE.jpg)

在目录`window->preferences->PyDev->interpretors->Python Interpretor` 中`Scripts`，有`python.exe` [![在此处输入图像描述](../Images/966e1a451ce08a00a9b474418bddb00e.png)](https://i.stack.imgur.com/BHCHn.jpg) 哪个是分配给这个虚拟环境的python解释器。这个可执行文件将是我们将添加到 eclipse 中的新 python 解释器。

第2步：转到`window->preferences->PyDev->Interpreters->Python Interpreter` [![在此处输入图像描述](../Images/e7e8d3be397eb166af9117ccf245ba57.png)](https://i.stack.imgur.com/NYZvg.jpg)

在右侧窗格中，您将看到： [![在此处输入图像描述](../Images/1b52c48506db16f6459948bdbbe8f374.png)](https://i.stack.imgur.com/1FJNQ.jpg)

单击新按钮，然后将弹出此窗口： [![在此处输入图像描述](../Images/bc10ee3f47ea386924ffa7b1333cf29b.png)](https://i.stack.imgur.com/rRS8Z.jpg)

在该字段中写入您想要的任何内容并在该字段中`Interpreter Name`写入步骤1中提到的python.exe文件的绝对路径`Interpreter Executable`

点击后`OK` 会弹出： [![在此处输入图像描述](../Images/cf0912d3894ba4fe90ac2c5ba8db13ee.png)](https://i.stack.imgur.com/YPODO.jpg)

选择所有项目然后单击`OK`

第三步：在上面的窗格中选择新添加的解释器，然后在下面的窗格中转到`Forced Builtin`选项卡并单击下面窗格右侧的新按钮。

[![在此处输入图像描述](../Images/aa7b008c944f3851906b75b84791f227.png)](https://i.stack.imgur.com/WNa5O.jpg)

并在弹出的窗口中写入`flask.ext`。

step4：现在一切都设置好了：

如果你想开始一个新项目：当你创建一个新项目时，`PyDev Project`选择我们创建的新解释器作为这个项目的解释器。 [![在此处输入图像描述](../Images/71640b0bfdfc5e482b1c80996e6a89ca.png)](https://i.stack.imgur.com/k7fPY.png)

如果您想将现有项目转换为虚拟环境中的烧瓶项目，请右键单击项目并转到属性并将`PyDev-Interpreter/Grammar`解释器更改为我们创建的新解释器。

注意：如果您希望 eclipse 在虚拟环境中为您运行服务器，您可以从包含 Flask() 实例的代码中运行服务器，如下所示：

```
if __name__ == '__main__': #here i assume you have put this code in a file that    
   app.run()   #contains variable "app", which contains the instance of #Flask(__main__) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:10:08.310

`touch`如果不存在则创建一个空白文件，如果存在则更新文件的修改时间。

为此，`echo > /site-packages/flashext/__init__.py`在命令行中就足够了。（该文件不会为空，而只包含一个换行符，它在语义上与 Python 等效）。

# linux - 在Unix中加入多个文件

> ID：14997337
> 
> 赞同：1
> 
> 时间：2013-02-21T08:07:17.637
> 
> 标签：linux, unix, join

我在一个文件夹中有多个文件，其中包含由空格分隔的键和值以及一个仅包含键值的文件。所有文件都根据键排序。所有人都有相同的钥匙。（也没有丢失的键）。我想要一个带有**键的文件，后跟所有值**（来自同一文件的值到同一列）

**密钥文件如下所示：**

```
00001740-a

00001740-n

00001740-r

00001740-v

00001837-r

00001930-n

00001981-r

00002098-a 
```

**其余文件如下所示：**

```
00001740-a      5.21718e-05

00001740-n      3.32329e-05

00001740-r      4.5483e-06

00001740-v      7.54663e-05

00001837-r      8.79043e-06

00001930-n      3.75099e-06

00001981-r      1.4668e-06

00002098-a      3.18465e-06 
```

我在加入手册页上找不到任何内容。请帮帮我。

```
man join:

NAME
       join - join lines of two files on a common field

SYNOPSIS join [OPTION]... FILE1 FILE2 
```

更新 - 我编写了一个 shell 脚本来生成作为答案之一提到的命令，并将其输出到另一个 shell 文件，然后执行它。有更好的主意吗？

```
 #!/bin/bash
 echo -n "paste offsets.txt "
 for f in *.ppv
 do
     echo -n " <(cut -f2 "$f")"
 done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:14:47.990

请尝试以下命令：

```
join FILE1 FILE2 | join - FILE3 | join - FILE4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:38:24.103

怎么样：

```
paste keyfile <(cut -d' ' -f2 file1) <(cut -d' ' -f2 file2) ... <(cut -d' ' -f2 fileN) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:50:44.470

如果数据足够小以适合内存，请尝试：

```
awk 'NF > 1{ a[$1] = a[$1] " " $2} END {for( i in a ) print i, a[i]}' *.ppv 
```

这将以不同的顺序输出键，因此您可能希望将输出通过管道传输到`sort`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T06:58:26.503

您可以使用“eval”来执行命令，例如：

```
#!/bin/bash
first="1"
for f in *.ppv
do
    if [[ ${first} -eq "1" ]]; then
        command="join offset.txt ${f}"
        first="0"
    else
        command="${command} | join - ${f}"
    fi
done
eval ${command} 
```

# java - 如何从java代码调用外部dll函数

> ID：14997343
> 
> 赞同：7
> 
> 时间：2013-02-21T08:07:43.630
> 
> 标签：java, dll, call, jna

我需要从 Java 代码中调用外部 DLL 库函数。我使用 Netbeans 7.2。我的dll的功能是：

```
Boolean  isValid(string  word)
List<String> getWords(String  word) 
```

我正在关注[这个](http://blog.mwrobel.eu/how-to-call-dll-methods-from-java/)例子。但我不知道如何声明我的 dll 函数。我找到了另一个[链接](http://wiki.netbeans.org/SlickSet)。但这对我不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T19:51:32.537

我偶然发现了“从 Java 调用 DLL”的相同问题，并且首先对复杂性感到沮丧。然而，有一个优雅的解决方案（对于 processing.org 栖息地的人们来说可能也很有趣..）鉴于问题的相当“一般”形式（也许，降级是不合理的），我想，将提出一个相当容易的解决方案。换句话说，一种避免与头文件、额外转换等混淆的解决方案，就像源代码不一定可用一样。

我的建议是 JNA（[https://github.com/twall/jna](https://github.com/twall/jna)），它基本上是 JNI 的简化包装器。它工作得很好，类型映射很简单（例如 pchar = lpcstr 缓冲区 -> 字符串），尽管我只将它用于 Windows DLL 和我自己使用 Delphi-Pascal 创建的 C 样式 DLL。唯一需要考虑的是返回值应该通过函数而不是“out”标记的引用变量导出。该问题已经指向一个提供示例的链接源（因此，围绕 JNI 的答案可能在这里放错了地方）。请注意，我提供的链接还包含用于传输数组和指针的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:38:46.777

您将需要使用[Java 本地接口 (JNI)](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)，它是一组 C/C++ 函数，允许本地代码与 java 代码交互（即从 java 函数调用接收参数、返回结果等）。编写一个接收 JNI 调用的包装 C 库，然后调用您的外部库。

例如，以下函数调用`updateHandlers`本机对象（存储在 Java 端中的长度）上的方法。

```
class MyImpl {
  void updateHandlers(JNIEnv *env) {
    this->contentHandler = ....;
  }
}

JNIEXPORT void JNICALL Java_package_Classname_updateHandlers0
  (JNIEnv *env, jobject obj, jlong ptr) 
{
  ((MyImpl*)ptr)->updateHandlers(env);
} 
```

package.ClassName 中对应的声明是：

```
private long ptr; //assigned from JNI
public void updateHandlers() {
   if (ptr==0) throw new NullPointerException(); 
   updateHandlers0(ptr);
}
private native void updateHandlers0(long ptr);

static {
    try {
          /*try preloading the library external.dll*/
      System.loadLibrary("external");
    } catch (UnsatisfiedLinkError e) {
      /*library will be resolved when loading myjni*/
    }
    System.loadLibrary("myjni"); //load myjni.dll
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:56:07.303

`native private ...`你用你需要的签名在 java() 中声明你的本地函数；然后运行`javah`（JDK 随附的工具）以生成本机标头。A `List<String>`（实际上是 a `List`，因为类型擦除）`jobject`在本机代码中是 a 。

相应的 C 方法将是：

```
JNIEXPORT jobject JNICALL package_Classname_getWords(JNIEnv *env, jobject jobj, jstring word) 
```

我认为返回一个字符串数组会更容易`jobjectArray`，并从返回的值中实例化 java 中的 List 。请参阅[此示例](http://www.coderanch.com/t/326467/java/java/Returning-String-array-program-Java)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T08:21:47.053

我前段时间确实写过示例教程，也许它会有所帮助。

[http://wendro.blogspot.com/2010/03/jni-example-eclipse-dev-cpp.html](http://wendro.blogspot.com/2010/03/jni-example-eclipse-dev-cpp.html)

# html - 需要更改列表项以使其不直接进入页面下方？

> ID：14997344
> 
> 赞同：0
> 
> 时间：2013-02-21T08:07:50.100
> 
> 标签：html, css

HTML 如下

```
<div id="wrap">

<ul class="navbar">
      <li><a href="">Home</a></li>
      <li><a href="">Franchises</a>
        <ul>
        <li><a href="">elroyz Xpress</a></li>
        <li><a href="">skye stickbeetles</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        <li><a href="">Juddamania</a></li>
        </ul>
      </li>
      <li><a href="">Fixtures</a>
        <ul>
        <li><a href="">Round 1</a></li>
        <li><a href="">Round 2</a></li>
        <li><a href="">Round 3</a></li>
        <li><a href="">Round 4</a></li>
        <li><a href="">Round 5</a></li>
        <li><a href="">Round 6</a></li>
        <li><a href="">Round 7</a></li>
        <li><a href="">Round 8</a></li>
        <li><a href="">Round 9</a></li>
        <li><a href="">Round 10</a></li>
        <li><a href="">Round 14</a></li>
        <li><a href="">Round 15</a></li>
        <li><a href="">Round 16</a></li>
        <li><a href="">Round 17</a></li>
        <li><a href="">Round 18</a></li>
        <li><a href="">Round 19</a></li>
        <li><a href="">Round 20</a></li>
        <li><a href="">Round 21</a></li>
        <li><a href="">Round 22</a></li>
        <li><a href="">Round 23</a></li>
        </ul>
      </li>
      <li><a href="">Free Agents</a>
        <ul>
        <li><a href="">Adelaide</a></li>
        <li><a href="">Brisbane</a></li>
        <li><a href="">Carlton</a></li>
        <li><a href="">Collingwood</a></li>
        <li><a href="">Essendon</a></li>
        <li><a href="">Fremantle</a></li>
        <li><a href="">Geelong</a></li>
        <li><a href="">Gold Coast</a></li>
        <li><a href="">GWS</a></li>
        <li><a href="">Hawthorn</a></li>
        <li><a href="">Melbourne</a></li>
        <li><a href="">North Melbourne</a></li>
        <li><a href="">Port Adelaide</a></li>
        <li><a href="">Richmond</a></li>
        <li><a href="">St Kilda</a></li>
        <li><a href="">Sydney</a></li>
        <li><a href="">West Coast</a></li>
        <li><a href="">Western Bulldogs</a></li>
        </ul>
      </li>
</ul>
 </div> 
```

CSS在下面

```
#wrap {
    width:100%;
    height: 28px;
    margin: 0;
    z-index:99;
    background-color:#F00;
    text-align:left;}

.navbar {

    padding:0;
    height: 25px;
    margin: 0 auto;
    width: 400px;
    border-right: 1px solid #1c1c1c;
    border-left: 1px solid #1c1c1c;
}

    .navbar li  {
            width: 100px;  
            float: left;  
            text-align: center;  
            list-style: none;  
            font: normal bold 11px Arial, Verdana, Helvetica;  
            padding: 0;
            margin: 0;
            background-color: #F00
                        }

.navbar a   {                           
        padding: 7px 0;  
        border-left: 1px solid #1c1c1c; 
        border-right: 1px solid #1c1c1c; 
        text-decoration: none; 
        color: white; 
        display: block;

        }

 .navbar li:hover, a:hover {
     background-color: #900;
 } 

.navbar li ul   {
        display: none;  
        height: auto;                                   
        margin: 0; 
        padding: 0; 
        }               

.navbar li:hover ul     {
                        display: block;
                        }

.navbar li ul li {background-color: #a4a4a4;
}

.navbar li ul li a  {
        border-left: 1px solid #1c1c1c; 
        border-right: 1px solid #1c1c1c; 
        border-top: 1px solid #1c1c1c; 
        border-bottom: 1px solid #1c1c1c; 
        }

.navbar li ul li a:hover    {background-color: #1c1c1c;
} 
```

我遇到的问题是，当将鼠标悬停在项目上时，列表项目在页面下方太远了。有没有办法我可以把它们分成 2 或 3 行，这样它们就可以并排了？只是 html 和 css 的新手，自己无法解决。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:21:51.463

请将您的代码放在[jsFiddle](http://jsfiddle.net/)或其他东西中，以便清楚您要做什么。根据您的代码，您似乎已经制作了一个 CSS 下拉菜单，但里面的东西太多了。

从技术上讲，CSS3[支持多列布局](http://www.w3schools.com/css3/css3_multiple_columns.asp)。实际上，它尚未得到广泛支持，因此您应该避免使用它。您可以做几件事：

1.  **使内部`<li>`s 内联显示：**不漂亮但很容易。如果你然后在里面放一个`width`，`<ul>`它们会弹出一个盒子，看起来有点杂乱但可以使用。

2.  **切换到智能`<select>`：** [Select2](http://ivaynberg.github.com/select2/)非常适合这个。添加“GO”按钮，整个东西会占用更少的空间而不难使用。这将需要 javascript，但您只需一行。

您还可以手动将列表拆分为几个单独的子列表并使用浮动 div 将它们排列起来，但这很挑剔，而且比它的价值更麻烦。您也可以阅读[这篇](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)文章（“如何构建 Kick-Butt CSS3 Mega 下拉菜单”），但我认为这超出了您的需要或想要的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:19:55.430

向子菜单添加宽度将为列表项提供更多的水平空间以供使用。

```
.navbar li ul {
    display: none;  
    height: auto;                                   
    margin: 0; 
    padding: 0;
    width:200px; /* for example */
} 
```

浏览器自然会在容器中排列列表项，因此知道容器的宽度后，您可以重新排列列表项以正确显示所需的*列*。

**编辑：**这~~有点~~hacky，但是如果子菜单中的列表项的宽度和数量是已知的并且是固定的（或者至少没有太大变化），您可以使用 CSS 定位来创建伪列，例如在[**这个演示中**](http://jsfiddle.net/EZEP4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:24:45.610

一个好的起点是调整 ul 标签的宽度

添加到 CSS 的底部

```
ul{width:200px;} 
```

查看这个工作示例[http://jsfiddle.net/Sj6Am/1](http://jsfiddle.net/Sj6Am/1)

你可以从那里进行实验..

# php - 如何每晚将带有项目列表的下拉按钮添加到ckeditor

> ID：14997349
> 
> 赞同：0
> 
> 时间：2013-02-21T08:08:07.540
> 
> 标签：php, jquery

谁能帮我添加带有项目列表的下拉按钮。

因此，如果我单击项目，该项目应添加到实例上的光标位置。

![](../Images/484a42991e323135001e5e40290b7b8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:16:11.880

我一直在使用 .Net MVC 进行此操作，但我采用了我的解决方案并将其转换为 PHP。

```
editor.ui.addRichCombo('clientfields', {
    label: 'Client Fields',
    title: 'Client Fields',
    multiSelect: false,
    init: function() {
        <?php foreach($clientField as $field) { ?>
            this.add(<?php print $field->VarName; ?>, '<?php print $field->Name; ?>', '<?php print $field->Name; ?>');
        <?php } ?>
    },
    panel: {
        css : [ editor.config.contentsCss, CKEDITOR.getUrl( '/Content/ckeditor/skins/moono/editor.css' ) ]
    },
    onClick: function (value) {
        editor.focus();
        editor.fire('saveSnapshot');
        editor.insertHtml(value);
        editor.fire('saveSnapshot');
    }
}); 
```

这将在您的菜单中添加一个下拉菜单。我也有切割下拉标签的问题，但是将此css添加到CKEditor附带的editor.css文件中应该可以解决这个问题。

```
.cke_combo__clientfields, .cke_combo__clientfields > a {
    width: 150px;
    margin-right: 8px;
}

.cke_combo__clientfields .cke_combo_inlinelabel {
    width: 120px;
} 
```

此处的宽度可以调整为下拉菜单所需的宽度，但这应该允许您将 $field->VarName 添加到编辑器中光标所在的位置并替换编辑器中的选定文本。我不完全确定这里的 php 语法，但它肯定会让你指向正确的方向。

# java - yum install hadoop-0.20-osg - 缺少依赖

> ID：14997357
> 
> 赞同：2
> 
> 时间：2013-02-21T08:08:56.313
> 
> 标签：java, hadoop

我正在使用 rhel -5 并使用 yum 命令安装 hadoop

百胜安装 hadoop-0.20-fuse

错误：[root@localhost ~]# yum install hadoop-0.20-fuse

加载“安全”插件

加载“rhnplugin”插件

加载“installonlyn”插件

这个系统没有在 RHN 上注册。

RHN 支持将被禁用。

设置安装过程

设置存储库

从本地文件中读取存储库元数据

解析包安装参数

解决依赖关系

--> 使用选定的包填充事务集。请稍等。

---> 包 hadoop-0.20-fuse.i386 0:0.20.2+737-31.osg.el5 设置更新

--> 运行事务检查

--> 处理依赖：libjvm.so 用于包：hadoop-0.20-fuse

--> 完成依赖解析

错误：缺少依赖项：软件包 hadoop-0.20-fuse 需要 libjvm.so **如何解决缺少依赖项问题。请帮助我的新手...**

# c# - 使用 C# 中的 ICU 类和方法

> ID：14997358
> 
> 赞同：4
> 
> 时间：2013-02-21T08:09:08.110
> 
> 标签：c#, icu

我想在 C# 应用程序中使用 ICU 类和方法 - 特别是中断交互器和关联类型。我的猜测是我使用 DllImport 来引用 ICU4C dll，但我不确定如何传递 ICU 字符串等类型。.NET 会为我整理这些吗？二进制分发 COM 中的库是否兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:12:35.827

看看[ICU4NET](http://code.google.com/p/icu4net/)：

> ICU4NET 通过 ICU4C 为 .NET 语言提供绑定。

听起来这正是您所需要的——如果它有效的话。不可否认，最后一次“发布”是 0.0.3，最后一次更改是在 2010 年 8 月，但我建议它仍然是一个有用的起点。

（您可能会发现它已经完成了工作，但是由于它满足了原始作者所需的一切，所以它已经完成了。如果您可以根据需要对其进行更改，那将有利于未来处于相同位置的开发人员...)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-11T07:24:50.937

看起来有另一种选择：[icu-dotnet](https://github.com/sillsdev/icu-dotnet)

看起来 Lucene.net 团队正在从 ICU4NET 更改为 icu-dotnet，[原因如下](http://search-lucene.com/m/j1zMf1dCWfJA7ZSk&subj=RE+Lucene+NET+to+NET+Core)：

> 关于 ICU4NET，我们将 ICU4NET 替换为 icu-dotnet ( [https://github.com/sillsdev/icu-dotnet](https://github.com/sillsdev/icu-dotnet) )。我们决定更改库，因为 ICU4NET 是一个使用小型 C++/CLI 包装器围绕原始库，但目前没有计划将 C++/CLI 移动到跨平台。icu-dotnet 使用 PInvokes 代替。

我希望他们会离开 ICU4NET，因为 nuget 包仅针对 x86。

# c# - IVI ocr 正方体

> ID：14997361
> 
> 赞同：2
> 
> 时间：2013-02-21T08:09:29.083
> 
> 标签：c#, ocr, tesseract

大家好，我`OCR Tesseract`对 C# (tessnet2) 有问题，它找到了字符 IVI 而不是“M”，你能帮我吗？

```
tessnet2.Tesseract ocr = new tessnet2.Tesseract();
         ocr.SetVariable("tessedit_char_whitelist", "ABCDEFGHIJKLMNOPQRSTUVWXYZ"); // If digit only
         ocr.Init(@"C:\tresnet", "fra", false); // To use correct tessdata
         List<tessnet2.Word> result = ocr.DoOCR(imgSortie, Rectangle.Empty);
         String ListeLettres= "";

         foreach (tessnet2.Word word in result)
           ListeLettres= ListeLettres + word.Text; 
```

![](../Images/50363782cf4ebbf76e16218ceb013190.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-13T11:18:22.303

@user2094482 嗨，

我使用 Tesseract 和 c++ 进行字符识别。一旦我遇到同样的问题。我的系统识别了 |v| 而不是 M，甚至图像对我的肉眼来说都是清晰的。我尝试了几种图像预处理概念，例如图像二值化、图像模糊等，以获得准确的结果。但这些方法都没有给我 100% 准确的结果。因此，我尝试了白名单，并取得了成功。

```
text  = readLettersFromTesseractOCR(img_bw,&error,CharacterSequence); 
```

CharacterSequence 初始化如下。

```
 CharacterSequence = ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&lt 
```

希望这也适用于您的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T17:07:13.543

我只会对字符串使用 Replace 函数并将“IVI”替换为“M”，因为实际上写“IVI”的情况并不多。

# android - 在android webview中查找第一个和最后一个数据包接收时间？

> ID：14997364
> 
> 赞同：0
> 
> 时间：2013-02-21T08:09:52.803
> 
> 标签：android, webview, webpage, packet

我想找出在我的 android `WebView`/webpage 中收到第一个和最后一个数据包的时间。谁能建议一些这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:08:30.577

您无权访问有关由 处理的数据包的信息`WebView`。如果您需要这种程度的详细信息，请不要使用`WebView`，而是使用 编写您自己的 HTTP 访问代码`Socket`，因为即使是 API 之类`HttpUrlConnection`的也可能会掩盖其中的一些信息。

# android - admob 无法与其他模拟器一起使用

> ID：14997367
> 
> 赞同：0
> 
> 时间：2013-02-21T08:10:17.167
> 
> 标签：android, android-emulator, admob, ads

伙计们，我只是对 admob 有一个奇怪的问题。在模拟器上成功集成了我的应用程序，但广告未能在具有相同软件版本的其他模拟器上显示检查我的 logcat....

错误，例如：

```
failed to provide provider info com.google.plus platform
Js:uncaught reference error: AFMA_getSdkConstants not defined(http:.....) 
```

接着

```
AdLoader timed out after 60000ms 
```

为什么 admob 在一个模拟器上工作而不在另一个模拟器上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:46:20.243

由于网络问题可能会出现此问题，请确保您具有正确的网络连接。

或者您可以尝试在单独的线程中调用您的广告，然后在主线程中调用：

试试这个[链接](https://stackoverflow.com/questions/10717358/uncaught-referenceerror-afma-getsdkconstants-is-not-defined)

# bash - 在 bash 脚本中重新排列/分组具有相同参数的行

> ID：14997369
> 
> 赞同：0
> 
> 时间：2013-02-21T08:10:21.253
> 
> 标签：bash

我想用 bash 脚本重新排列一些行。

输入：

```
Name1 127.0.0.1
Name2 127.0.0.2
Name2 127.0.0.5
Name2 127.0.0.8
Name3 127.0.0.3 
```

输出：

```
Name1 127.0.0.1
Name2 127.0.0.2, 127.0.0.5, 127.0.0.8
Name3 127.0.0.3 
```

有没有一种聪明的方法可以用“awk”或“sed”等来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:02:26.683

这个适用于`bash`. 它提取所有 IP 并按适当的名称对它们进行分组

```
declare -A ips

while read name ip; do
    if [ -n "${ips[$name]}" ]; then
        ips[$name]="${ips[$name]}, $ip"
    else
        ips[$name]="$ip"
    fi
done

for i in "${!ips[@]}"; do
    echo "$i ${ips[$i]}"
done 
```

你可以调用它

```
bash script.sh <input.txt 
```

# android - 如何设置 getContentResolver() 的上下文？

> ID：14997372
> 
> 赞同：0
> 
> 时间：2013-02-21T08:10:24.323
> 
> 标签：android, sqlite, android-context

我`query()`在 2 个不同的类`A`和`B`2 个不同的文件中创建了方法，其中`A`并`B`正在从不同的表中查询：

```
public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) { 
} 
```

然后从 2 个不同的`Activity`我尝试使用以下代码调用：

```
Cursor cursor = getContentResolver().query(uri, projection, null, null, null); 
```

但是从两者中`Activity`它都只调用`query()`来自`Class A`. 我是否想在调用之前设置一些东西`getContentResolver()`？

我的清单：

```
<manifest>
    <application>
......................
        <provider
            android:name=".provider.ItemProvider"
            android:authorities="com.waveletandroid.provider" >
        </provider>
       <provider
            android:name=".provider.CustomerProvider"
            android:authorities="com.waveletandroid.provider" >
        </provider>
    </application>
</manifest> 
```

我`URI`的`ItemListActivity`：

```
itemUri = Uri.parse("content://com.waveletandroid.provider/waveletandroid"; 
```

我`URI`的`CustomerListActivity`：

```
customerUri = Uri.parse("content://com.waveletandroid.provider/waveletandroid"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:21:54.417

尝试如下：

> ```
> public Cursor getAllContacts() {
>        return database.query("country", new String[] {"_id", "name"},
>         null, null, null, null, "name");
>    } 
> ```

在您的活动中访问此方法，如下所示：

> ```
>  Cursor cursor =getAllContacts(); 
> ```

# java - 文件下载时会话不应过期

> ID：14997386
> 
> 赞同：0
> 
> 时间：2013-02-21T08:11:15.640
> 
> 标签：java, servlets, session-timeout, servlet-listeners, struts2

当我从我的 Struts2 应用程序下载文件时，会话在下载文件后过期。这不应该发生。

我们可以使用 setMaxInactiveInterval() 设置会话超时，但文件大小不是恒定的，下载时间取决于文件大小等。

你能提供任何解决方案吗？

我的文件下载代码如下。

```
InputStream fileInputStream = null;
    File file = null;
    String fileDir = "C:\\CAP\\FileDownload\\file\\";
    String fileName = "SW.zip";
    HttpSession sessio = null;

    try {
        sessio = request.getSession();
        logger.debug("--------------->>>>"+sessio.getMaxInactiveInterval());
        file = new File(fileDir+fileName);
        logger.debug(":::::::::-->"+file.isFile());
        fileInputStream = new FileInputStream(file);

        ServletOutputStream outputStream = null;
        response.addHeader("Content-Disposition", "attachment; filename="
          + fileName);
        response.setContentLength((int) file.length());
        outputStream = response.getOutputStream();

        // Copy the contents of the file to the output stream
        byte[] buf = new byte[1024];
        int count = 0;
        while ((count = fileInputStream.read(buf)) >= 0) {
            outputStream.write(buf, 0, count);
            logger.debug("Count Is : "+count);
        }

        logger.debug("====================compleated the file donlowding ====================");
    } catch (IOException e) {
        logger.error("ERROR while reading and wring file : "
                + e.getMessage());

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:20:18.087

尝试使用`request.getSession(false)`as `request.getSession()`返回与此请求关联的当前会话，或者如果请求没有会话，则创建一个。

所以，在你的情况下，我相信`request.getSession()`创建一个新`session`的，一旦下载完成就会被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:24:15.257

如果文件大小足够大并且时间会超出您的会话超时时间，那么最好使用 ASynchrise 服务，它可以并排下载文件，用户可以继续他的工作。像批处理这样的东西。

# c# - ASP.NET 页面在功能上响应缓慢

> ID：14997387
> 
> 赞同：0
> 
> 时间：2013-02-21T08:11:37.853
> 
> 标签：c#, asp.net, azure, blobstorage

我创建了一个 ASPX 页面来查看图像...我已经列出了一个列表，该列表在 windows azure blobstorage 中携带所有图像的 URI。这对于临时存储数据是不可见的。

我还有一个可见列表，其中 uri 被“正则表达式”（使用 Rexex 函数）用于只有文件名的用户。

下一步是，如果从我的列表框（lbTimeList）中选择的索引发生了变化，使用 uriList 中的 URI 获取新图像。

签名 = 我从 Web 服务中获取的 SAS 密钥。

我这样做：

```
 protected void lbTimeList_SelectedIndexChanged(object sender, EventArgs e)
    {
        imageScreen.ImageUrl = uriList.Items[lbTimeList.SelectedIndex] + signature.Text;
    } 
```

如果uriList被填满了超过3000项，那么通过这种方式获取图像需要很长时间......

您可以在：[在线](http://ferryjongmans.azurewebsites.net)申请查看响应时间长的结果..

是否有其他方法可以从 Azure Blob 存储中获取特定图像，并且响应时间更短？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:34:15.193

您正在从服务器到客户端来回发布大量数据。在 lbTimeList 中的每个选择上，都会进行整个往返，这非常耗时，因为您来回传递大量数据。

您可以将 lbTimeList 和 Urls 的文本作为键值对传递给客户端一次。然后使用一些客户端代码（jScript，...）在列表中的新选择上加载正确的图像。

# asp.net - 用 IENumerable 对象填充 GridView

> ID：14997393
> 
> 赞同：6
> 
> 时间：2013-02-21T08:12:09.020
> 
> 标签：asp.net, webforms

我有一个看起来像这样的对象：

```
public class TestData
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public string Email {get; set;}
    public string Phone {get; set;}
} 
```

我有 10 个该类的实例存储在`IENumerable`.

`GridView`我的文件中也有一个`aspx`：

```
<asp:GridView ID="GridView1" runat="server">
</asp:GridView> 
```

我需要的是一种`IENumerable`在`GridView`. 但我希望能够`thead`自己在表格中设置“标题”。

所以我得到这样的东西：

```
<table>
  <thead>
    <th>Firstname</th>
    <th>Firstname</th>
    <th>Telephone</th>
    <th>Email address</th>
  </thead>
  <tbody>
    <!-- the values from each TestData class stored in the IENumberable -->
  </tbody>
</table> 
```

我可以使用 a 来执行此操作，`GridView`还是使用其他控件更好地完成这项工作？我还记得一些关于模板的事情？不确定，我对 ASP.NET 很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:16:39.227

您可以将绑定字段与明确`HeaderText`的绑定字段一起使用。
使用自动生成列为假。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumn="false">
    <asp:BoundField DataField="FirstName" HeaderText="First Name" />
    <asp:BoundField DataField="LastName " HeaderText="Last Name" />
    .....
</asp:GridView> 
```

## 编辑 1

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumn="false">
  <Columns>
    <asp:BoundField DataField="FirstName" HeaderText="First Name" />
    <asp:BoundField DataField="LastName " HeaderText="Last Name" />
    .....
  </Columns>
</asp:GridView> 
```

# python - Automatic Zabbix -> Confluence, creating too many updates

> ID：14997400
> 
> 赞同：0
> 
> 时间：2013-02-21T08:12:35.220
> 
> 标签：python, string-comparison, confluence, zabbix

I have a python script that runs once a day, connects to our Zabbix monitoring database and pulls out all the active monitoring checks and documents them into Confluence.

My problem is that each hosts' confluence page gets updated every time the script runs, even if the monitoring hasn't changed.

A quick hack would be to get a hash of the page content and compare it with a hash of the script-generated content and only replace when the hashes don't match. Obviously the problems with this are that the script still needs to generate whole page content for comparison, and that it replaces the whole page or not at all, loosing confluence's built-in diff checker.

I'm hoping to find a more elegant solution, especially one that may allow me to update only the differences...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:02:05.310

这可能不是您正在寻找的解决方案，但您可以让更新生成一个外部 html 页面，然后使用`{html-include}`in confluence。所以汇合页面不会被更新，但它们显示的内容是正确的。

这样做的问题是不会更新任何汇合页面，因此如果您想要一个提要通知人们汇合上的更改，它就无法完成工作。

# asp.net - font-face not working in IE & chrome

> ID：14997407
> 
> 赞同：0
> 
> 时间：2013-02-21T08:12:54.713
> 
> 标签：asp.net, css, font-face

I'm using following code to display a custom font in my ASP.NET web site:

```
<style type="text/css">
@font-face {
    font-family: 'B Mitra';
    src: url('BMitra.ttf') format('truetype'); /* IE9 Compat Modes */
    src: url('BMitra.ttf?#iefix') format('truetype'), /* IE6-IE8 */
         url('BMitra.ttf') format('truetype'), /* Modern Browsers */
         url('BMitra.ttf')  format('truetype'); /* Safari, Android, iOS */
    }
    </style>
</head>

<body style="font-family:B Mitra;" onload="pageLoad()"> 
```

it works fine in FireFox, but IE and chrome don't display my custom font (this custom font is located in my server, in the folder which contains my ASPX file, font is downloaded on systems that don't have it in firefox, but I think IE and chrome cannot download it and another existing font is used). what is going wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:27:29.277

[http://www.adtrak.co.uk/blog/font-face-chrome-rendering/](http://www.adtrak.co.uk/blog/font-face-chrome-rendering/)

为什么你一遍又一遍地调用相同的格式（'truetype'）？在它旁边添加评论并不能解决现代浏览器的问题。我认为您也需要其他文件格式吗？也就是说，通常：

```
@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.eot');
src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
url('../../includes/fonts/chunk-webfont.woff') format('woff'),
url('../../includes/fonts/chunk-webfont.ttf') format('truetype'),
url('../../includes/fonts/chunk-webfont.svg') format('svg');
font-weight: normal;
font-style: normal;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.svg') format('svg');

}
} 
```

# python - 通过解释器突变混淆 python 字节码

> ID：14997414
> 
> 赞同：6
> 
> 时间：2013-02-21T08:13:10.053
> 
> 标签：python, compiler-construction, ctypes, packaging, cpython

实际上，Dropbox 做得很好，他们能够保护用 python 制作的桌面应用程序；我对此进行了很多研究，但没有比混淆更好的解决方案，这不是很安全的方法，你最终会看到你的代码上传到某个地方。

我听了**Giovanni Bajo**（PyInstaller 创始人）的一次会议，他说 Dropbox 是这样做的：

1.  通过重新编译 CPython 的解释器来进行字节码加扰，这样，标准 CPython 解释器将无法运行它，只能运行重新编译的 cpython 解释器。
2.  您需要做的就是洗牌下面的数字`define loadup 8`。

我从来没有看过 Python 的源代码，所以，我不会声称我完全理解上面的话。

我需要听到专家的声音：这样的事情怎么办？如果重新编译后我将能够使用 PyInstaller 等可用工具打包我的应用程序？

**更新：**

我对 Dropbox 如何进行这种类型的混淆/突变进行了一些研究，我发现了这一点：

根据[Hagen Fritsch](http://itooktheredpill.dyndns.org/)的说法，他们分两个阶段进行：

1.  他们使用 TEA 密码以及由每个 python 模块的代码对象中的一些值播种的 RNG。他们相应地调整了口译员，使其

    a) 解密模块和

    b) 防止访问解密的代码对象。

    这本来是一条直接的路径，让 Dropbox 解密所有内容并使用内置编组器转储模块。

2.  使用的另一个技巧是操作码的手动加扰。不幸的是，这只能半自动地修复，因此他们的单字母替换密码在赢得一些时间方面证明是非常有效的。

我仍然想要更多关于如何做到这一点的见解，此外，我不知道在这个过程中解密是如何发生的......我想要所有专家的声音......普通人你在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:32:13.827

我想这是关于改组`include/opcode.h`. 不过，我看不到`#define loadup`那里，但也许那是指一些旧的 Python 版本。我没有试过这个。

这将混淆您的文件，以便任何识别正常文件`.pyc`的工具都无法检查它们。`.pyc`这可以帮助您在程序中隐藏一些安全措施。但是，攻击者可能（例如）能够从您的应用程序包中提取您的自定义 Python 解释器并利用它来检查文件。（只需启动交互式解释器并通过在模块上导入和使用 dir 开始调查）

另请注意，您的包肯定会包含来自 Python 标准库的一些模块。如果攻击者猜到您已经打乱了操作码，他可以在您的版本和标准模块的正常版本之间进行逐字节比较，并以这种方式发现您的操作码。为了防止这种简单的攻击，可以使用适当的加密保护模块，并尝试在解释器中隐藏解密步骤，如更新的问题中所述。这迫使攻击者使用机器代码调试来寻找解密代码。

* * *

> 我不知道在这个过程中解密是如何发生的......

您将修改解释器中导入模块的部分并在那里插入您的解密 C 代码。

# c# - Variant param values from classic asp calling .NET component method

> ID：14997415
> 
> 赞同：0
> 
> 时间：2013-02-21T08:13:10.053
> 
> 标签：c#, .net, asp-classic

I use the PDFsharp project to merge many pdf documents into one file which works perfectly and smooth. But I also need to call this method from classic ASP server pages.

Works as well, but the strange thing is handling the param values by calling the method.

C# definition:

```
public void MergeMultiplePDF(object[] files, string outFile)
{
  // note: get an array from vbscript, so files need to be a object array, not string array.

  // Open the output document
  PdfDocument outputDocument = new PdfDocument();

  // Iterate files
  foreach (string file in files)
  {
    // Open the document to import pages from it.
    PdfDocument inputDocument = PdfReader.Open(file, PdfDocumentOpenMode.Import);

    // Iterate pages
    int count = inputDocument.PageCount;
    for (int idx = 0; idx < count; idx++)
    {
      // Get the page from the external document...
      PdfSharp.Pdf.PdfPage page = inputDocument.Pages[idx];
      // ...and add it to the output document.
      outputDocument.AddPage(page);
    }
  }

  // Save the document...
  outputDocument.Save(outFile);
  outputDocument.Dispose();
} 
```

Call from classic ASP:

```
Dim l_sPath : l_sPath = "D:\test\"
oPDF.MergeMultiplePDF Array(l_sPath & "sample1.pdf", l_sPath & "sample2.pdf", l_sPath & "sample3.pdf" ), l_sPath & "output.pdf" 
```

Works fine, as array is a object VARIANT and I handle the array inside the .NET class.

But if I have a "dynamic" array in classic ASP I get the usual error that the argument is not correct like you can find in many posts here...

Sample:

```
Dim myFiles(10)
For i = 0 To UBound(myFiles)
  myFiles(i) = "test" & i & ".pdf"
Next
oPDF.MergeMultiplePDF myFiles, l_sPath & "output.pdf" 
```

This run into an argument error.

My workaround:

```
oPDF.MergeMultiplePDF Split(Join(myFiles,","),","), l_sPath & "output.pdf" 
```

Then it works.

Both are objects of type Array().

**So anyone has a clue why this is handled different?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:45:33.013

您发布的代码应该像在 VBScript 中一样工作

```
VarType(Array(...)) = VarType(myFiles) = VarType(Split(...)) = 8204 
```

8204 = 0x200C，即[VT_ARRAY | VT_VARIANT](http://msdn.microsoft.com/en-us/library/cc237865.aspx)`object[]`在 .NET 中确实可以翻译

因此，实际代码与此处显示的示例不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:30:00.950

在 ASP 中定义一个动态数组，比如`ReDim myFiles(max_count)`max_count 是一个数值会导致问题。Dim myFiles(10) 作为测试，例如 Simon 测试的工作。

@Simon，请将您的评论设置为答案，以便我接受。

# macos - Multiline NSTokenField display error

> ID：14997418
> 
> 赞同：5
> 
> 时间：2013-02-21T08:13:28.020
> 
> 标签：macos, cocoa, appkit, nstokenfield

![NSTokenField works not very well](../Images/1cfffd83a1286227c3735354f2bf9138.png)

I insert a `NSTokenField` into a `NSView`, when input has enough tokens, it turn into multiline mode, but there there is a problem with it. The top of first line gets cut off 2px and the line spacing between two line becomes too small.

Is there a way to avoid this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T09:09:01.263

NSTokenField 对自定义非常封闭，所以我最终实现了自己的令牌字段。

我已将其设为开源。我已经根据我的要求对其进行了定制，您可以按照您想要的方式进一步扩展它。

[下载源](http://isamples.blogspot.sg/2013/07/sstoken.html)

我希望它有所帮助。

# java - Capistrano starting Sunspot does not find Java

> ID：14997426
> 
> 赞同：0
> 
> 时间：2013-02-21T08:13:56.510
> 
> 标签：java, ssh, capistrano, sunspot

I am using Sunspot Solr and I am writing a Capistrano task to start/stop it.

```
 namespace :sunspot do
    task :start, :roles => :app do
      run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec rake sunspot:solr:start"
    end
  end 
```

However when I run this task, I get error of not finding Java:

```
*** [err :: example.com] /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/lib/sunspot/solr/java.rb:5:in ``': No such file or directory - java -version (Errno::ENOENT)
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/lib/sunspot/solr/java.rb:5:in `installed?'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/lib/sunspot/solr/server.rb:200:in `ensure_java_installed'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/lib/sunspot/solr/server.rb:27:in `initialize'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/bin/sunspot-solr:16:in `new'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/gems/sunspot_solr-1.3.3/bin/sunspot-solr:16:in `<top (required)>'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/bin/sunspot-solr:23:in `load'
*** [err :: example.com] from /home/user/deploy/project/shared/bundle/ruby/1.9.1/bin/sunspot-solr:23:in `<main>'
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3@project' -c 'cd /home/user/deploy/project/current && RAILS_ENV=staging bundle exec rake sunspot:solr:start'" on example.com 
```

Sunspot's Java checking code is [here](https://github.com/sunspot/sunspot/blob/master/sunspot_solr/lib/sunspot/solr/java.rb).

If I manually run `cd /home/user/deploy/project/current && RAILS_ENV=staging bundle exec rake sunspot:solr:start` on the server it works as expected. I don't know why Java is not present if the command is called through Capistrano.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:21:13.563

On my server, Java paths are loaded inside the `/etc/profile' script.

However Capistrano does not load that script.

According to [this discussion](https://groups.google.com/forum/?fromgroups#!topic/capistrano/Xo6CZW-381o), setting this in the Capistrano deploy.rb file will make sure its shell loads the profile script, which in term sets Java path for me.

`default_run_options[:shell] = '/bin/bash --login'`

# c# - 如何做一个“尊重”以前的控制台内容的 C# Windows 控制台应用程序？

> ID：14997434
> 
> 赞同：7
> 
> 时间：2013-02-21T08:14:56.930
> 
> 标签：c#, .net, windows, console

像 Vim：当它启动时，它会将你带到另一个“缓冲区”。当 vim 关闭时，用户会看到命令提示符之前的内容。

有人知道如何使用 C# 做到这一点吗？

谢谢

编辑：用户将不再看到应用程序的输出。希望能更好地解释它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:13:34.537

我通过查看[Vim 源代码](http://www.vim.org/sources.php)发现了这一点，相关位可以在`mch_init`函数的 os_win32.c 中找到，我在这里复制并粘贴了相关位

```
 /* Obtain handles for the standard Console I/O devices */
    if (read_cmd_fd == 0)
    g_hConIn =  GetStdHandle(STD_INPUT_HANDLE);
    else
    create_conin();
    g_hConOut = GetStdHandle(STD_OUTPUT_HANDLE);

#ifdef FEAT_RESTORE_ORIG_SCREEN
    /* Save the initial console buffer for later restoration */
    SaveConsoleBuffer(&g_cbOrig);
    g_attrCurrent = g_attrDefault = g_cbOrig.Info.wAttributes;
#else
    /* Get current text attributes */
    GetConsoleScreenBufferInfo(g_hConOut, &csbi);
    g_attrCurrent = g_attrDefault = csbi.wAttributes;
#endif
    if (cterm_normal_fg_color == 0)
    cterm_normal_fg_color = (g_attrCurrent & 0xf) + 1;
    if (cterm_normal_bg_color == 0)
    cterm_normal_bg_color = ((g_attrCurrent >> 4) & 0xf) + 1;

    /* set termcap codes to current text attributes */
    update_tcap(g_attrCurrent);

    GetConsoleCursorInfo(g_hConOut, &g_cci);
    GetConsoleMode(g_hConIn,  &g_cmodein);
    GetConsoleMode(g_hConOut, &g_cmodeout);

#ifdef FEAT_TITLE
    SaveConsoleTitleAndIcon();
    /*
     * Set both the small and big icons of the console window to Vim's icon.
     * Note that Vim presently only has one size of icon (32x32), but it
     * automatically gets scaled down to 16x16 when setting the small icon.
     */
    if (g_fCanChangeIcon)
    SetConsoleIcon(g_hWnd, g_hVimIcon, g_hVimIcon);
#endif 
```

所以它只是保存控制台信息（包括标题和图标），然后在退出时再次恢复。

不幸的是，[`Console`](http://msdn.microsoft.com/en-us/library/system.console.aspx)该类不提供对屏幕缓冲区内容的访问，所以要做到这一点，您需要 P/Invoke 到相关的 Win32 函数中。

或者，Win32 控制台实际上支持[多个屏幕缓冲区](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682088%28v=vs.85%29.aspx)，这可能是实现这一点的一种更简单的方法 - 而不是复制现有的屏幕缓冲区，只需使用 . 创建一个新的[`CreateConsoleScreenBuffer`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682122%28v=vs.85%29.aspx)并将该缓冲区设置为当前使用[`SetConsoleActiveScreenBuffer`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686010%28v=vs.85%29.aspx). 同样`Console`不幸的是，该类不支持多个屏幕缓冲区，因此您将需要 P/Invoke 来执行此操作。此外，`Console`该类始终写入在应用程序启动时处于活动状态的屏幕缓冲区，因此如果您换出活动屏幕缓冲区，`Console`该类仍将写入旧屏幕缓冲区（不再可见） - 以获得围绕这一点，您需要 P/Invoke 您的所有控制台访问权限，请参阅[Working with Console Screen Buffers in .NET](http://www.devsource.com/c/a/Using-VS/Working-with-Console-Screen-Buffers-in-NET/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:45:57.403

您可以通过将旧内容写入控制台缓冲区来做到这一点，如下所述：[如何将快速彩色输出写入控制台？](https://stackoverflow.com/questions/2754518/how-can-i-write-fast-colored-output-to-console)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-21T08:40:57.910

我相信 Vim 记录了它打开文件的历史，而且很可能它也会缓冲它们，就像备份副本一样。在 C# 中做同样的事情的想法是实现一个文件缓冲区，一种可以记录和跟踪你想要的东西的存储 - 输入参数等。

这里的另一个问题是 Vim（如 Vi）具有命令模式，也需要在 C# 中实现。现在这取决于你想用你的 C# 程序完成什么，那是一个编辑器，那么很好，无论如何，你必须区分命令和其他模式。

# android - How to position view based on position of one of sibling ViewGroup's child?

> ID：14997436
> 
> 赞同：1
> 
> 时间：2013-02-21T08:14:59.163
> 
> 标签：android, viewgroup, scroller

Ok, the question may sound confusing. Let me explain the scenario:

Refer the image at following link, (-I wasn't able to use imgur as it is blocked in my network): [http://www.flickr.com/photos/93397745@N05/8494742266/](http://www.flickr.com/photos/93397745@N05/8494742266/)

*   I have a CustomView that extends RelativeLayout (entire black part in image)
*   This CustomView contains a component at top ViewTopBar (indicated in Red in image), which extends ViewGroup & is horizontally scrollable
*   The ViewTopBar contains many child views. One of 'em is an IndicatorView (orange one in image), which is positioned in ViewTopBar after doing some calculations & calling layout(l,t,r,b) in ViewTopBar's onLayout() method.
*   I want a vertical 1 pixel line to be displayed below the IndicatorView. It should start just below IndicatorView & cover the entire height of CustomView. (See the green colored line in image).
*   This part doesn't matter, but just for information, the blue colored part in image is another Custom ViewGroup which is pretty complex to describe. (Also, there are still a few more components that are part of CustomView but not shown in the image as its not needed for my question.)

There, I hope I have the view explained. Now what I need is that the green 1px line should move horizontally so as to stay aligned below IndicatorView whenever horizontal scrolling is done. I've currently implemented it as follows:

*   Placed the 1px line as child of CustomView.
*   Whenever ViewTopBar's onLayout() is called, I update the GreenLine's LayoutParams & just modify the left margin depending on IndicatorView's position.

This works fine most of the time. But sometimes, when I do left-right-left-right scroll continuously, the 1pxLine does not stay in sync with the scrolling IndicatorView (--However, once scrolling stops, it comes back into sync!) So what changes do I need to make so that the line stays in sync even during scroll operations?

Please let me know if someone has been able to do this before.

Thanks,

-Kiran

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:34:02.060

我将取出`IndicatorView`1px `ViewTopBar`-line-view 和 1px-line-view 一起包含在一些容器布局中，然后将其放入其中`CustomView`。这样，您可以整体控制该元素的位置，而不是让一个“追赶”另一个。不确定它是否适用于您的情况。

# mysql - Issue On MYSQL Query Which Throwing Invalid Use Group Function Error

> ID：14997439
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:15:14.890
> 
> 标签：mysql, sql

I just need an help on making an query work.

I wanted To get the records for an all users whose total cdr seconds is >= 2400 (40 minutes)

```
SELECT SUM(TIME_TO_SEC(cdr.duration)) AS secsUsed 
FROM cdr 
WHERE SUM(TIME_TO_SEC(cdr.duration))>=2400 
GROUP BY ownerpin 
ORDER BY secsUsed DESC 
```

i found that aggregate function usage like above will not work!

is there any way that i could get the logic work !!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:18:21.670

将条件从`WHERE`to`HAVING`子句移动：

```
select ownerpin,
       SUM(TIME_TO_SEC(cdr.duration)) as secsUsed 
from cdr 
group by ownerpin 
HAVING SUM(TIME_TO_SEC(cdr.duration))>=2400 
order by secsUsed desc ; 
```

# php - 登录页面在登录时不断清除我的文本框。

> ID：14997440
> 
> 赞同：0
> 
> 时间：2013-02-21T08:15:18.367
> 
> 标签：php, html, mysql, login

我有这个问题。当我想在我的 php 页面上登录时，它只会清除文本框而没有其他任何内容。我一直在尝试解决这个问题，但我找不到解决方案。这是代码：

```
<?php
include_once ("db.php");
include_once("session.php");

$username=$_POST['uporabnisko']; 
$pass=$_POST['geslo'];

    if ((!empty($username)) && (!empty($pass)))
    {
        $pass=sha1($pass); // zakodiramo geslo

        /*$query=mysql_query("SELECT username, password FROM users WHERE username='$username' AND password='$pass'");
        $username=mysql_real_escape_string($username);
        $pass=mysql_real_escape_string($pass);*/

        $query = sprintf("SELECT username, password FROM users WHERE username = '%s' AND password = '%s'",                   
                    mysql_real_escape_string($username), mysql_real_escape_string($pass));

        $result=mysql_query($query);

            if(mysql_num_rows($result) == 1) // preveri, če je uporabnik v bazi 
            {
                $user = mysql_fetch_array($result);

                $_SESSION['prijavljen'] = 1;
                $_SESSION['id_user'] = $user['id'];
                $_SESSION['username'] = $user['username'];

                echo   // preusmeri na index.php
                ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Uspešna prijava!')
                window.location.href='index.php'
                </SCRIPT>");
            }
            else
            {
                echo 
                ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Napačno uporabniško ime /geslo..')
                window.location.href='prijava.php'
                </SCRIPT>");
            }
    }
    else
    {
        echo 
        ("<SCRIPT LANGUAGE='JavaScript'>
        window.alert('Niste izpolnili vseh polj!')
        window.location.href='prijava.php'
        </SCRIPT>");
    }
?> 
```

我不知道有什么问题。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:28:31.867

你不见了**；**在每个 Javascript 行之后。你需要

```
echo ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Napačno uporabniško ime /geslo..');
                window.location.href='prijava.php';
                </SCRIPT>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:53:46.540

您应该将您的 include_once 标签更改为 require_once 标签，以确保您的脚本实际上被包含在内。

您还应该至少使用 mysqli 或准备好的语句进行登录，以保护自己免受 SQL 注入攻击。

要重定向页面，可以使用 php 中的 header 函数

```
$result=mysql_query($query);

        if(mysql_num_rows($result) == 1) // preveri, če je uporabnik v bazi 
        {
            $user = mysql_fetch_array($result);

            $_SESSION['prijavljen'] = 1;
            $_SESSION['id_user'] = $user['id'];
            $_SESSION['username'] = $user['username'];

            header("location:index.php");
         } else {
         echo("Napačno uporabniško ime /geslo..");
         header("location:prijava.php");
         } 
```

尝试这些更改，它们可能会有所帮助

# grails - Grails Springsecurity

> ID：14997441
> 
> 赞同：0
> 
> 时间：2013-02-21T08:15:27.850
> 
> 标签：grails, spring-security

我正在使用 Grails 开发应用程序。

我一直面临一个问题，每当我对域类进行一些更改时，应用程序都会自动重新运行，当我尝试刷新页面时，我会收到拒绝访问页面并且日志显示`user Id is null`。
这是日志

> 使用 org.springframework.deerwalk.impl.CustomCasAuthenticationProvider 进行身份验证尝试

```
groovy.lang.MissingMethodException: No signature of method: static com.usermanant.User.get() is applicable for argument types: (java.lang.Long) values: [1]
Possible solutions: getId(), wait(long), setId(java.lang.Long), getAt(java.lang.String), grep(java.lang.Object), wait()
 User:null 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:50:33.623

如果您使用内存数据库，那么只要您对域模型进行更改，您现有的项目就会被删除。

如果您愿意，可以将您的最小数据集插入 bootstrap.groovy。

使用 MySQL 等真实数据库进行热替换通常还需要重新启动您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:50:32.877

在您的 Config.grooy（在配置下）中，您有以下几行：

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'com....User'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'com....UserRole'
grails.plugins.springsecurity.authority.className = 'com....Role' 
```

你应该在这里有正确的类名。

在你的情况下：

```
grails.plugins.springsecurity.userLookup.userDomainClassName ='com.usermanant.User' 
```

# matlab - 在matlab中查找网站中字符串的可能匹配项

> ID：14997443
> 
> 赞同：3
> 
> 时间：2013-02-21T08:15:37.167
> 
> 标签：matlab

我目前正在学习 Matlab，并且正在尝试查找网站中字符串的可能匹配数。`CTRL`它与+`F`函数非常相似。我尝试使用 urlread('...') 将网站内容存储在名为 str 的字符串中，然后尝试将我正在查找的字符串（例如：“Program”）与 str 进行比较，但它不起作用。这是我的代码：

```
str = urlread('http://en.wikipedia.org/wiki/Computer_program');
keyword = 'Program';
TF = strcmpi(str,keyword) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:28:52.860

您可以[`strfind`](http://www.mathworks.de/de/help/matlab/ref/strfind.html)用于此任务

```
str = urlread('http://en.wikipedia.org/wiki/Computer_program');
keyword = 'Program';
keywordIDX = strfind(str, keyword); 
```

该变量`keywordIDX`将包含相关关键字出现的所有索引。

该函数[`strcmpi`](http://www.mathworks.de/de/help/matlab/ref/strcmpi.html)只是比较两个字符串是否相同（忽略字母大小写是否相同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T08:33:02.930

另一个用于字符串处理和操作的强大工具是正则表达式。
请参阅[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)和[`regexprep`](http://www.mathworks.com/help/matlab/ref/regexprep.html)了解更多详情。

# thunderbird - 如何在 Mozilla Thunderbird 中禁用自动邮件检查

> ID：14997444
> 
> 赞同：7
> 
> 时间：2013-02-21T08:15:39.580
> 
> 标签：thunderbird

我在 Mozilla Thunderbird 中添加了 4 个电子邮件帐户。我需要其中 3 个自动检查新电子邮件，仅当我按“获取邮件”时才需要 1 个。我去了工具->帐户设置->my@account.com->服务器设置并从“每10分钟检查一次新邮件”中删除了勾选-但它仍然会自动为该帐户获取新电子邮件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:32:44.617

显然，我还需要进入高级并取消选中“如果服务器支持则使用 IDLE 命令”选项，之后电子邮件停止按我的意愿发送。

我在这里找到了这条小信息：[https ://makandracards.com/makandra/875-disable-automatic-e-mail-checking-in-thunderbird-3](https://makandracards.com/makandra/875-disable-automatic-e-mail-checking-in-thunderbird-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-21T08:39:51.410

在 Thunderbird 45 中，“如果服务器支持则使用 IDLE 命令”设置移至“服务器设置”，并已重命名为“新消息到达时允许立即服务器通知”。

这意味着，要禁用自动邮件检查，您现在需要转到“*编辑*” > *“帐户设置”* > “ *my@account.com* ” > *“服务器设置”*，并确保未选中以下三个选项。

*   在启动时检查新消息
*   每 X 分钟检查一次新消息
*   允许在新消息到达时立即通知服务器

您还需要重新启动 Thunderbird 才能使这些更改生效。

[![帐户设置对话框](../Images/6fdb59b453440e8c852d13bb9fe51f3d.png)](https://i.stack.imgur.com/uO9On.png)

# javascript - 我怎样才能杀死javascript进程或停止所有功能进一步执行

> ID：14997448
> 
> 赞同：1
> 
> 时间：2013-02-21T08:15:50.647
> 
> 标签：javascript

我正在使用 asp.net ajax 工具包手风琴面板。如果任何用户单击标题我想隐藏该窗格而不是折叠或展开。所以我只是在 javascript 中编写以下方法。

```
<script type="text/javascript">
        function courtcase() {
            //var a = document.getElementById("acCourtCases");
            //  var a = document.getElementById('<%= acCourtCases.ClientID %>')

            //var _accordion =
            //document.getElementById('<%= ctrlContainer.ClientID%>').AccordionBehavior.set_SelectedIndex(1).hide(); // expand panel nr.3
            alert('rahul');
            document.getElementById('<%= ctrlContainer.ClientID%>').AccordionBehavior.get_Pane(0).content.style.display = 'none';
            document.getElementById('<%= ctrlContainer.ClientID%>').AccordionBehavior.get_Pane(0).header.style.display = 'none';
            alert('rahul');
            //alert(_accordion);
            // throw "stop execution";
            return true;
        }

    </script> 
```

它对我有用。问题是在该函数之后，ajax 调用手风琴并再次展开或折叠该窗格。并且它开始可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:23:54.317

1）尝试覆盖默认事件以使 AJAX 调用无效（例如：将 onclick 事件替换为空函数 2）然后尝试使用 CSS 隐藏手风琴

# java - 如何根据计数生成模式？

> ID：14997449
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:15:52.410
> 
> 标签：java, design-patterns

如果输入数字：2 输入行数：5，如何生成如下模式

```
2
33
444
5555
66666 
```

```
public static void main(String[]args)
{
    System.out.println("Input a number(0-9):");
    Scanner sc1 = new Scanner(System.in);
    int inputNo = sc1.nextInt();
    System.out.println("Input number of lines:");
    Scanner sc2 = new Scanner(System.in);
    int inputNoLine = sc2.nextInt();
    for (i=inputNo;i<=9;i++)
    {
        count++;
        if(count>inputNoLine)
        {
            break;
        }
        System.out.println(i);
    }
} 
```

我只能像上面那样编码。有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:23:38.920

试试这个，我想这就是你需要的

```
public static void main(String[] args) {

    System.out.println("Input a number(0-9):");
    Scanner sc1 = new Scanner(System.in);
    int inputNo = sc1.nextInt();

    System.out.println("Input number of lines:");
    Scanner sc2 = new Scanner(System.in);

    int inputNoLine = sc2.nextInt();

    for(int line=1 ; line <=inputNoLine; line++) {
        for(int count=0; count<line; count++) {
            System.out.print(inputNo);
        }
        System.out.println();
        inputNo++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:18:54.823

这应该工作

```
public static void main(String[] args)
    {
        System.out.println("Input a number(0-9):");
        Scanner sc1 = new Scanner(System.in);
        int inputNo = sc1.nextInt();
        System.out.println("Input number of lines:");
        Scanner sc2 = new Scanner(System.in);
        int inputNoLine = sc2.nextInt();
        int count = 1;
        for (int i=0; i < inputNoLine; i++)
        {
            for(int j = 0; j < count; j++)
            {
                System.out.print(inputNo);
            }
            count++;
            inputNo++;
            System.out.println();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:22:11.787

```
public static void main(String[] args) {
    for(int i =1; i<=5 ; i++){
        for(int j = 0; j < i; j++){
            System.out.print(i);
        }
        System.out.println();

    }
} 
```

输出：

```
1
22
333
4444
55555 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T08:23:39.193

你去：

```
public static void main(String args[]) throws IOException 
    {
        System.out.println("Input a number(0-9):");
        Scanner sc1 = new Scanner(System.in);
        int inputNo = sc1.nextInt();
        System.out.println("Input number of lines:");
        Scanner sc2 = new Scanner(System.in);
        int inputNoLine = sc2.nextInt();        
        for (int i = 0; i < inputNoLine; ++i,++inputNo) {
            for (int j = 0; j < i + 1; ++j) {
                     System.out.print(inputNo);
            }
            System.out.println();           
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T08:24:15.860

你需要这个代码：

```
public static void main(String[] args) throws ParseException,
            UnsupportedEncodingException, ClassNotFoundException {
        System.out.println("Input a number(0-9):");
        Scanner sc1 = new Scanner(System.in);
        int inputNo = sc1.nextInt();
        System.out.println("Input number of lines:");
        Scanner sc2 = new Scanner(System.in);
        int inputNoLine = sc2.nextInt();

        for (int i = 0; i < inputNoLine; i++,inputNo++) {
            for (int j = 0; j < inputNo; j++) {
                System.out.print(inputNo);
            }
            System.out.println();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T08:28:41.333

假设对于 inputNo 3 和 inputNoLine 5 - 输出将是：

```
3
44
555
6666
77777 
```

* * *

试试这个：

```
int times = 1;
    for (int i=inputNo;i<=inputNoLine;i++){
        for(int j=1;j<=times;j++) {
          System.out.print(i);
      }
     times++;
     System.out.println();
    } 
```

# android - 错误：转换为Dalvik格式失败：无法执行dex：多个dex文件定义Landroswing/tree/DefaultMutableTreeNode；

> ID：14997453
> 
> 赞同：0
> 
> 时间：2013-02-21T08:16:11.643
> 
> 标签：android, compiler-errors, pdf-viewer

我正在尝试使用来自 GitHub 的 Android PDF 查看器库创建 PDF 阅读器应用程序

[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

当我将此库包含到我的项目中并尝试运行应用程序时，我收到此错误：

```
Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroswing/tree/DefaultMutableTreeNode; 
```

请帮忙，

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:41:20.417

我有同样的问题。事实证明，我在构建路径中同时包含了提供的源代码和提供的 JAR 文件。

我从构建路径中删除了 JAR 文件（如果已将其放在 libs/-文件夹中，则需要重命名文件夹或仅删除 JAR 文件）

# .net - WPF 开发工具

> ID：14997455
> 
> 赞同：0
> 
> 时间：2013-02-21T08:16:36.997
> 
> 标签：.net, wpf

我想开发一个具有良好外观和感觉的 WPF 应用程序（如天气预报）。那么我使用什么工具呢？喜欢

1.Visual Studio express 2012
2.Expression Blend 3.Expression
Design

以上任何一项是否足够或需要不止一种工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:10:32.387

您只需要 VS 2012 & Blend 作为程序员，因为它涵盖了您的所有需求。但是，如果您的设计没有交付并且您需要自己创建它们，Expression Design 或 Photoshop 可能会成功。

# java - 如何使用maven将可执行文件放入war文件

> ID：14997459
> 
> 赞同：0
> 
> 时间：2013-02-21T08:16:50.723
> 
> 标签：java, tomcat, deployment, executable, war

我们的 Web 服务依赖于第三方可执行文件，因此我们必须使用它来部署战争。由于war文件将被解压缩并放入tomcat webapps文件夹中，我想知道是否有任何方法可以将可执行文件放入war中，以便tomcat在部署时对其进行解压缩，然后我可以从我的java代码中调用它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:22:12.383

我最近做了类似的事情，我需要用我的 java 可执行文件发送一个 .dll。不确定这是否是最好的样式，但它有效：我将 .dll 打包到我的 jar 中，将其提取（复制）到系统“temp”文件夹，然后调用 System.load()。

但在你的情况下，我认为这种方法可能会与 tomcat 安全规则纠缠在一起。任何人都可以提供一些见解是否可以修改这些规则以允许 webapp 运行另一个可执行文件？

否则，是否有某种可以放置可执行文件的tomcat“认可”文件夹。如果它是一个有点静态的可执行文件（不会经常更改），那么您可能只需将其部署到 tomcat 一次（与您的战争分开）。

祝你好运。

# c# - 用所有加载的视图填充 ViewBag 并在 _layout 中列出它们

> ID：14997463
> 
> 赞同：0
> 
> 时间：2013-02-21T08:17:25.203
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, razor-2

我正在使用 MVC 4。我想自动添加所有加载的视图（也就是部分视图）在正常操作生命周期（没有 ajax 请求）中加载到 ViewBag 并在 _layout 视图中列出它们。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:34:01.217

服务器应该可以访问文件夹的树，所以如果你真的需要部分视图，你可以尝试简单地检查一下。

# algorithm - 在约束满足中最大化分配变量的数量

> ID：14997466
> 
> 赞同：0
> 
> 时间：2013-02-21T08:17:38.290
> 
> 标签：algorithm, language-agnostic, constraint-programming, constraint-satisfaction

有哪些已知算法（或查找算法的资源）可以在约束满足问题中找到最大化分配变量数量的分配（如果不存在令人满意的分配）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:08:26.417

对于线性方程，线性代数可用于计算自由度的数量，从而确定可分配自变量的数量。

**编辑：**

在仔细考虑您的问题后，我认为[Simplex 算法](http://en.wikipedia.org/wiki/Simplex_algorithm)可能会对您有所帮助。它是一种优化算法，用于寻找线性优化问题的最佳整数解。

**编辑2：**

设可行区域为提供的仓库。

例子：

假设您有 2 个仓库类型，X 和 Y。

X 需要提供 5 种油和 7 种钢材。

Y 需要提供 8 种油和 2 种钢材。

您想最大化提供的仓库数量：

最大化函数 = X + Y

条件：

X <= X 型油库总数 Y <= Y 型油库总数 5X + 8Y < 石油供应总量 7X + 2Y < 钢材供应总量

应用 Simplex 算法，瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:48:36.340

您是否想最大化满足约束的数量，而不是分配变量？我考虑过最大化分配变量的数量可能会获得什么（直到您微不足道地看到至少违反了一个约束），在我看来，您想要一些符合可满足的最大约束子集的东西。否则我可能不明白你的优化标准。

如果您想要这个可满足约束的最大子集，一个想法是将您的问题转换为约束优化问题，找到最小化违反约束数量的分配，然后选择该分配满足的所有约束来构建最大可满足约束的子集。

下面我将使用加权约束满足问题（WCSP）的框架。

鉴于您将约束表示为允许或不允许的部分分配表，您可以通过简单地分配允许的分配成本 0 和不允许的分配成本 1 来转换约束。也就是说，只要约束不允许变量分配，它就会产生一个成本。因此，最小化成本的分配会最小化它违反的约束的数量，这相当于最大化满足的约束的数量。一旦你有了这样的分配，通过迭代所有约束并检查分配是否满足它们应该很容易构造可满足约束的最大子集。WCSP 的一个很好的求解器是[toulbar2](https://mulcyber.toulouse.inra.fr/projects/toolbar/)，它计算给定 WCSP 的最小成本分配。

如果您确实将约束表示为表，则从约束满足问题 (CSP) 构造 WCSP 很简单。加权约束只是表格的表格

```
X_1 X_2 … X_n   c

1    1 …   1    0 

1    2 …   1    0 

... 

2    2 …   3    1

2    2 …   4    1 
```

这里我们对 n 个变量 X_1, ..., X_n 有一个约束，其中变量可以接受来自有限域 {1,2} 和 {1,2,3,4} 的值。假设您将允许的元组标记为“T”，而将不允许的元组标记为“F”，则转换金额为将“T”替换为成本 0，将“F”替换为成本 1。

请注意，这不是实际的 WCSP 格式。格式在上面链接的 toulbar2 包中有详细描述。

当然，更紧凑的约束表示将需要更精细的转换，这可能会根据您的表示变得任意复杂。那就是你可能想要研究其他东西的地方。

# c++ - 段错误：如何调试

> ID：14997469
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:17:41.833
> 
> 标签：c++, segmentation-fault

我有一个接受连接的主进程，根据请求，“exec”sa 进程。该过程间歇性地因错误而崩溃：

```
segfault at 11 ip 000000004daa242b sp 00000000ffdc4b18 error 4 in libc-2.5.so[4da32000+153000] 
```

我该如何调试呢？来自 libc 的这对我没有太大帮助，甚至无法确定是哪段代码导致了这种情况。

任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:36:39.217

指针：

`0x00000001`: 首先要做的是看看您是否可以使用调试器或边界检查器。如果这复制了崩溃，请查找以下内容（考虑到核心转储在 libc 中）：损坏的数据（调用堆栈或具有奇怪值的参数）。

`0x00000002`：如果这没有复制崩溃，请将日志记录添加到传输到 libc 函数中的值中，然后查看是否捕获任何内容。

`0x00000003`：如果日志记录没有给您任何帮助，请开始禁用应用程序的某些部分，并人为地增加负载，直到核心转储不再发生，或者每次都发生。要寻找的一件事：可能是您的核心转储仅在高压力下引起（这可以解释*间歇性*崩溃。看看您是否可以通过重复操作来增加代码某些部分的负载（即，而不是执行调用可能会导致竞态条件，一个接一个地运行它 100 次，*看看它是否确实如此*）。

# mysql - 如何在插入 MySQL 之前检查字符串长度？

> ID：14997470
> 
> 赞同：1
> 
> 时间：2013-02-21T08:17:42.327
> 
> 标签：mysql, string, triggers, minimum

我在 MySQL 中创建了一个包含以下语句的表。

```
CREATE TABLE Users (
   UserName VARCHAR(15) NOT NULL PRIMARY KEY,
   Password VARCHAR(15) NOT NULL,
   Active Bool DEFAULT TRUE
) 
```

所以我想在这张桌子上做一个 2 触发器：

1.  检查用户名和密码是否超过 4 或 8 个字符。（检查插入新行时字符串的最小长度）
2.  做一些正则表达式来检查密码。例如，我希望它同时包含大写和小写字符和数字。

请指导我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:24:17.303

您可以使用存储过程或触发器首先测试数据
MySQL 与其他 RDBMS 不同，不支持 CHECK 约束

存储过程方法更明显，因为它在插入/更新之前进行测试。
触发器对于以后的代码维护可能非常不透明

但是，我更关心数据库中有纯文本密码。您通常使用的盐和哈希值等在哪里？

# ruby-on-rails - 调用另一个 ruby 脚本时立即输出到页面

> ID：14997476
> 
> 赞同：1
> 
> 时间：2013-02-21T08:18:21.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 ruby​​ 脚本，它可以完成很多任务。我可以很好地在系统外壳下运行它。在脚本执行期间，我编写了许多代码来输出当前状态。

但是，我在轨道上的控制器上运行它。

**控制器**

```
@cmd = %x[  #{cmd} ] 
```

**看法**

```
<h2>Command</h2>
<%= @cmd %> 
```

现在，我无法立即获得输出。完成所有任务后，它将打印所有信息。

脚本执行时如何将输出打印到视图（HTML 页面）。

谢谢大家。

# c# - 覆盖方法 ToString() c# 控制台应用程序

> ID：14997479
> 
> 赞同：2
> 
> 时间：2013-02-21T08:18:21.227
> 
> 标签：c#, overriding

我正在开发一个包含不同书籍的通用列表的程序。我遇到的问题是，我的书本类应该覆盖`ToString()`超类中的方法，`System.Object`以便它显示如下字符串：

```
作者名字，作者姓氏，“书名”，年份。

```

这是我的书类代码：

```
 class Book
 {
    public string bookTitle
    {
        get;
        set;
    }

    public string authorFirstName
    {
        get;
        set;
    }

    public string authorLastName
    {
        get;
        set;
    }

    public int publicationYear
    {
        get;
        set;
    }

} 
```

这是我的代码`Main`：

```
 static void Main(string[] args)
    {

        List<Book> books = new List<Book>();
        books.Add(new Book { authorFirstName = "Dumas", authorLastName = "Alexandre", bookTitle = "The Count Of Monte Cristo", publicationYear = 1844 });
        books.Add(new Book { authorFirstName = "Clark", authorLastName = "Arthur C", bookTitle = "Rendezvous with Rama", publicationYear = 1972 });
        books.Add(new Book { authorFirstName = "Dumas", authorLastName = "Alexandre", bookTitle = "The Three Musketeers", publicationYear = 1844 });
        books.Add(new Book { authorFirstName = "Defoe", authorLastName = "Daniel", bookTitle = "Robinson Cruise", publicationYear = 1719 });
        books.Add(new Book { authorFirstName = "Clark", authorLastName = "Arthur C", bookTitle = "2001: A space Odyssey", publicationYear = 1968 });
    } 
```

因此，关于我应该如何处理“覆盖`ToString()`超类中的方法`System.Object`，使其返回具有以下格式的字符串”的任何想法：

```
作者名字，作者姓氏，“书名”，年份。

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:21:17.857

见下文：

```
class Book
 {
    public string bookTitle
    {
        get {return bookTitle; }
        set {bookTitle = value; }
    }

    ...

    public override string ToString() {
        return string.Format("{0}, {1}, {2}, {3}", 
                         authorFirstName, authorLastName, bookTitle, 
                         publicationYear);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:20:53.553

您不能覆盖 system.Object.ToString()

但是你可以实现你自己的集合

或者您对可以在列表中调用的列表“ListToMyStringFormat”进行[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:22:17.807

以下是如何执行此操作的示例：

```
public class User
{
    public Int32 Id { get; set; }
    public String Name { get; set; }
    public List<Article> Article { get; set; }

    public String Surname { get; set; }

    public override string ToString()
    {
       return Id.ToString() + Name + Surname;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:22:24.783

您需要覆盖`Book`类中的字符串，而不是`System.Object`. 将以下函数添加到`Book`类中。

```
public override string ToString()
{
    return this.authorFirstName + ", " + this.authorLastName + ", " + this.bookTitle + "," + this.publicationYear.ToString();
} 
```

# php - php中阶乘的排列

> ID：14997481
> 
> 赞同：2
> 
> 时间：2013-02-21T08:18:40.987
> 
> 标签：php, permutation, factorial

不知道怎么解释。但也许下面的例子会让你明白我的问题是什么。

例子 ：

我有一个包含 3 个元素的数组。

```
$elements = array( 'A', 'B', 'C' ); 
```

排列将是 3 in 3\. 所以结果是：

```
A-B-C ; A-C-B ; B-A-C ; B-C-A ; C-A-B; C-B-A 
```

我不想要任何 2 比 3 或 1 比 3 的排列，只是 3 比 3，如您在示例中所见。因此，如果我在一个数组中有 4 个元素，则排列为 4 比 4。依此类推...

（我认为排列的数量是 3！= 1*2*3 = 6 个排列，4！= 1*2*3*4 = 24 个排列......这就是我称之为阶乘排列的原因。）

如果还有其他与我的问题类似的问答，请告诉我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:59:20.093

使用递归函数：

```
function permutations($elements) {
    if(count($elements)<2) return $elements;

    $newperms= array();
    foreach($elements as $key=>$element) {
        $newelements= $elements;
        unset($newelements[$key]);

        $perms= permutations($newelements);
        foreach($perms as $perm) {
            $newperms[]= $element."-".$perm;
        }
    }
    return $newperms;
} 
```

没有测试它，所以仍然有你的工作;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:00:58.303

不确定您需要什么，但您是否正在尝试产生这些排列？

这应该可以帮助您入门，它将对您需要的任何大小的集合执行完全排列。加了一些注解，应该能明白

```
$array = array('A','B','C', 'D'); 
$permutations = array($array);
$perm_pool = range(0, count($array)-1);

function getPermutation($p, $size){
    // we pass in an array of integers, basically pointers, we want to see when we've fully reversed the set
    for ($i = $size-1; $p[$i] >= $p[$i+1]; $i--){}
    // the array starts at [1,2,3,4], when we've reached [4,3,2,1], we're done.
    if ($i == -1) { return false; }

    // slide down to the next largest number, this will be our next swap
    for ($j = $size; $p[$j] <= $p[$i]; $j--) {}

    // swap it
    $tmp = $p[$i];
    $p[$i] = $p[$j];
    $p[$j] = $tmp;

    // reverse the arrangement by swapping the head and tails
    for ($i++, $j = $size; $i < $j; $i++, $j--){
        $tmp = $p[$i];
        $p[$i] = $p[$j];
        $p[$j] = $tmp;  
    }
    return $p;
}

$i=1;
while($perm_pool=getPermutation($perm_pool, count($array)-1)){
    foreach($perm_pool as $p){
        $permutations[$i][] = $array[$p];
    }
    $i++;

} 
```

# java - 如何从 System.getProperties() 获取系统密码

> ID：14997483
> 
> 赞同：2
> 
> 时间：2013-02-21T08:19:02.480
> 
> 标签：java

System.getProperties() 将所有系统属性返回给我。

我可以在属性中看到我的系统用户名`user.name`。

有没有办法得到类似的东西`user.password`？

注意：*我无意破解系统*:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:20:07.960

不，你不能那样做。密码不可用作系统属性。

我认为密码可能不会在操作系统的任何地方存储为可读文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:29:55.607

如果您想将密码传递给您的程序，您可以从外部编写脚本并在运行程序时“将其传递”，如下所示：

```
java -Dpassword=foo -jar myjar.jar 
```

然后调用 System.getProperty("password") 应该返回“foo”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T08:55:17.103

不，这是不可能的。

操作系统甚至不需要使用密码来验证用户身份。它可以使用指纹、证书等。

即使它使用密码来验证用户，它也可能不会记住它。

寻找“单点登录”，如果这是您所追求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T08:34:51.340

据我所知，密码现在没有以纯文本形式存储在任何操作系统中。使用 System.getProperties 您可以获得以下信息，但不能获得密码。

```
关键意义
"file.separator" 分隔文件路径组件的字符。这是 UNIX 上的“/”和 Windows 上的“\”。
“java.class.path” 用于查找包含类文件的目录和 JAR 档案的路径。类路径的元素由 path.separator 属性中指定的平台特定字符分隔。
“java.home” Java 运行时环境 (JRE) 的安装目录
“java.vendor” JRE 供应商名称
“java.vendor.url” JRE 供应商 URL
"java.version" JRE 版本号
"line.separator" 操作系统用来分隔文本文件中的行的序列
"os.arch" 操作系统架构
"os.name" 操作系统名称
"os.version" 操作系统版本
"path.separator" java.class.path 中使用的路径分隔符
"user.dir" 用户工作目录
"user.home" 用户主目录
"user.name" 用户账户名

```

[Java 文档](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T08:21:08.707

不，`user.password`Java 系统属性中没有。

更多：[系统属性](http://www.mindspring.com/~mgrand/java-system-properties.htm)

# three.js - 三.js，自定义灯光几何

> ID：14997484
> 
> 赞同：1
> 
> 时间：2013-02-21T08:19:02.327
> 
> 标签：three.js, webgl, light

是否可以在 Three.js 中创建具有自定义几何形状的光源，例如符号。Three.js 中的 Arealight 作为矩形光源，具有 wigth 和 height 参数。最后，目标是获得一个由此类光源照亮的表面，在视觉上就是那个自定义图形。

谢谢WestLangley，这是一个很好的例子，我尝试过这种方式，但不幸的是，它对我不起作用。我试过这个：

```
var textTexture = new THREE.Texture( "textures/text.jpg" );
        //var textTexture = THREE.ImageUtils.loadTexture("textures/text.jpg");
        textTexture.format = THREE.RGBFormat;
        textTexture.wrapS = textTexture.wrapT = THREE.MirroredRepeatWrapping;
        textTexture.anisotropy = 4;
        var textLight = new THREE.AreaLight( 0xffffff, 3 );
        textLight.position.set( 10, 5, -5 );
        textLight.rotation.x = Math.PI / 2;
        textLight.width = 30;
        textLight.height = 10;
        textLight.texture = textTexture;
        scene.add(textLight) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:49:30.100

`AreaLight`仅适用于`WebGLDeferredRenderer`非常新的示例（不是库）的一部分，并且没有很多使用示例。

如果您查看[此示例](http://alteredqualia.com/three/examples/webgl_deferred_arealights_texture.html)，您会看到电影纹理被用作光源。

在此示例中，您可以用另一个纹理替换视频纹理，如下所示：

```
// texture = new THREE.Texture( video );
texture = THREE.ImageUtils.loadTexture( "texture.jpg" ); 
```

不幸的是，此示例使用的是库的修改版本。

三.js r.56

# microdata - 我使用什么 Schema.org 类型来定义服务？

> ID：14997485
> 
> 赞同：7
> 
> 时间：2013-02-21T08:19:06.057
> 
> 标签：microdata, schema.org, rich-snippets

如何使用 schema.org 定义服务？

例如，害虫防治企业：“白蚁防治”-> 我认为它不是产品（[http://schema.org/Product](http://schema.org/Product)）

我应该用什么来定义它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T11:34:36.143

在[http://schema.org/Product](http://schema.org/Product)上写着（粗体强调我的）：

> 产品是可以**出售的****任何东西**——例如，一双鞋、一张音乐会门票或一辆汽车。**商品服务，如理发，也可以使用这种类型来表示。**

 ****所以我会说如果你卖“白蚁控制”服务，`Product`就可以了。

**更新**：描述`Product`更改为：

> 任何提供的产品或服务。例如：一双鞋；演唱会门票；租车；理发; 或在线播放的电视节目的一集。

所以它仍然包括服务。

* * *

虽然现在还有类型[`Service`](http://schema.org/Service)（“由组织提供的服务，例如送货服务、打印服务等”），但它缺少*出售*此服务的属性，即您不能引用 an `Offer`，因此您不能表示您提供的服务的价格。

**更新：** A`Service`现在也可以拥有该[`offers`](http://schema.org/offers)属性，因此可以出售/提供`Service`. （感谢[@Murali KG](https://stackoverflow.com/users/821216/murali-kg)的通知。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-14T13:29:31.290

基本上，您可以通过这种方式使用服务项目类型：

```
<div itemscope itemtype="http://schema.org/Service">

        <img  itemprop="image" src="http://my-image.jpg">
        <div itemprop="name">Service name</div>
        <span itemprop="description">Description of the service</span>

</div><!--end of itemscope--> 
```

不幸的是，service itemtype 不允许您指定与 Product itemtype 一样多的属性，因此：

您也可以使用 product itemtype 来定义服务，但是如果您不遵循他们的指南，某些搜索引擎可能不会使用它。例如，谷歌要求：

*   页面的主题应该是特定的产品
*   该产品应该可以直接在页面上购买
*   必须包括价格
*   不是成人用品
*   如果产品已由单个审阅者审阅，则审阅者的姓名需要是 Person 的有效名称

请参阅 Google 的[丰富网页摘要 - 产品指南](https://support.google.com/webmasters/answer/146750#usage)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-27T04:19:11.360

我建议您不要将产品架构用于服务，因为有一个专门用于[Services](http://schema.org/Service "服务")的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-26T11:52:50.440

我认为使用[ProfessionalService](http://schema.org/ProfessionalService) as应该没问题`itemtype`，因为据我所知，害虫防治是一项专业服务。****

# visual-studio - Visual Studio 项目的兼容性选项

> ID：14997486
> 
> 赞同：0
> 
> 时间：2013-02-21T08:19:19.797
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-2005, compatibility, backwards-compatibility

我即将加入我企业的 C# 开发团队。

有人告诉我，目前我们正在为 .NET Framework 2.0 开发，所以我必须坚持使用 VS 2005 的特性。

我订阅了 MSDN，并且在我的家用 PC 上安装了 VS 2012。

现在我想知道我是否会在打开在家中完成的工作时遇到问题，反之亦然。

有人告诉我，在创建项目时，我可以选择要定位的 .NET 版本，但无论如何该项目不会在早期版本的 VS 上打开。

真的吗？VS没有设置项目兼容级别的选项吗？如果我在 VS2005 上创建项目，然后在 VS2012 上进行编辑？不会尊重它的兼容性级别吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:17:48.057

VS2010 和 VS2012 之间有往返支持，即您可以在两个版本之间来回移动而不会出现任何问题。但是在 VS2010 之前，大多数项目都需要转换/迁移到新版本的 VS，并且您无法在旧版本的 VS 中重新使用迁移的项目。

简而言之，如果不创建两个独立的项目文件，您将无法在 VS2005 和 VS2012 中继续开发同一个项目。我不建议这样做，因为这意味着您将保持它们同步。

# playframework-2.0 - Play 2.1 升级日志控制器类型不对

> ID：14997488
> 
> 赞同：1
> 
> 时间：2013-02-21T08:19:24.197
> 
> 标签：playframework-2.0, playframework-2.1

升级到 Play 2.1 后，应用程序启动时的日志消息很少。这是什么意思？

```
[debug] application - class controllers.WebProfile is not the right type
[debug] application - class controllers.WebProfile is not the right type
[debug] application - class controllers.WebProfile is not the right type
[debug] application - class controllers.WebDemo is not the right type
[debug] application - class controllers.WebDemo is not the right type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:16:33.747

你在你的项目中使用 swagger 吗？

如果是这样，您的控制器没有 api 注释。

看看：[https ://github.com/wordnik/swagger-core/blob/master/modules/swagger-play2/app/play/modules/swagger/ApiHelpInventory.scala#L210](https://github.com/wordnik/swagger-core/blob/master/modules/swagger-play2/app/play/modules/swagger/ApiHelpInventory.scala#L210)

# java - 在 java webservice 代码中访问 SOAPHeader（不是通过处理程序）

> ID：14997489
> 
> 赞同：0
> 
> 时间：2013-02-21T08:19:30.860
> 
> 标签：java, web-services, soap

我需要在我的 web 服务代码中访问 SOAPHeader（我需要它使用外部库从标头的安全部分生成一些对象）。

它在 SOAPHandler 中工作正常，但如果我在实际的 web 服务方法中尝试以下操作，我会得到一个异常。

```
SOAPMessageContext soapMsgContext = (SOAPMessageContext) webServiceContext.getMessageContext();
SOAPHeader soapHeader =  soapMsgContext.getMessage().getSOAPHeader(); 
```

例外：

```
JAXBBlockImpl block object is already consumed. Processing cannot continue. 
```

我想做以下其中一项：

1.  在处理程序中处理标头并将结果对象获取到 webservice 方法。
2.  处理 webservice 方法中的标头。

谁能告诉我如何执行这些步骤中的任何一个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:20:04.000

我让它工作了，不确定这是否是一个很好的解决方案，所以我暂时保留这个问题。

在 SOAPHandler 中，我将对象放入 servlet 请求中，如下所示：

```
servletRequest.setAttribute("param-name", myObject); 
```

在 webservice 方法中，我像这样检索它：

```
MessageContext messageContext = webServiceContext.getMessageContext();
HttpServletRequest servletRequest = HttpServletRequest)messageContext.get(MessageContext.SERVLET_REQUEST);
myObject = (myObject) servletRequest.getAttribute("param-name"); 
```

# jsf - JSF - 从复合组件的 ActionEvent 获取 bean 和动作名称

> ID：14997490
> 
> 赞同：1
> 
> 时间：2013-02-21T08:19:37.463
> 
> 标签：jsf, actionlistener, composite-component, actionevent

我有一个复合组件来动态调用 bean 动作：

```
<composite:interface>
    <composite:attribute name="actionMethod" method-signature="java.lang.String action()"/>
</composite:interface>

<composite:implementation>

    <p:menubar autoDisplay="false" styleClass="subMenu">
        <p:menuitem>
             <h:commandButton action="#{cc.attrs.actionMethod}" value="#{bundle.CreateSaveLink}" styleClass="smallButton button buttonSave"/>
        </p:menuitem>
    </p:menubar>

</composite:implementation> 
```

而且我还定义了一个 ActionListener 类来实现安全性：

```
public class SecurityActionListener extends ActionListenerImpl implements ActionListener {

    private static final Logger log = Logger.getLogger(SecurityActionListener.class);
    private String isCasEnabled;

    public SecurityActionListener() {
        isCasEnabled = PropertyUtility.isCasEnabled();
    }

    @SuppressWarnings("unused")
    @Override
    public void processAction(final ActionEvent event) {

        if(!isCasEnabled.equals("true")) {
            super.processAction(event);
            return;
        }

        final FacesContext context = FacesContext.getCurrentInstance();
        final Application application = context.getApplication();
        final ConfigurableNavigationHandler navHandler = (ConfigurableNavigationHandler) application.getNavigationHandler();

        // Action stuff
        final UIComponent source = event.getComponent();
        final ActionSource actionSource = (ActionSource) source;
        MethodBinding binding;

        binding = actionSource.getAction();
        final String expr = binding.getExpressionString();
        if (!expr.startsWith("#")) {
            super.processAction(event);
            return;
        }

        final int idx = expr.indexOf('.');
        if (idx <0) {
            log.error("Errore nella formattazione della chiamata al metodo: " + expr + ". No '.' found");
            return;
        } 

        final String target = expr.substring(0, idx).substring(2);
        final String t = expr.substring(idx + 1);
        String method = t.substring(0, (t.length() - 1));

        final int idxParams = method.indexOf('(');
        if (idxParams >=0) {
            method = method.substring(0,idxParams);
        }

        final MethodExpression expression = new MethodExpressionMethodBindingAdapter(binding);
        final ELContext elContext = context.getELContext();
        final ExpressionFactory factory = context.getApplication().getExpressionFactory();

        final ValueExpression ve = factory.createValueExpression(elContext, "#{" + target + '}', Object.class);
        final Object result = ve.getValue(elContext);

        // Check if the target method is a secured method
        // and check security accordingly
        final Method[] methods = result.getClass().getMethods();
        for (final Method meth : methods) {
            if (meth.getName().equals(method)) {
                if (meth.isAnnotationPresent(CustomSecurity.class)) {
                    final CustomSecurity securityAnnotation = meth.getAnnotation(CustomSecurity.class);
                    log.debug("Function to check security on: " + securityAnnotation.value()); 
                    SecurityUtility.checkSecurity(securityAnnotation.value());
                } else {
                    super.processAction(event);
                }
                break;
            }
        }

        log.warn("No method: " + method + " found in: " + methods + ", for object: " + result);

    }

} 
```

如果 commandButton 上的操作以标准方式定义：

```
<h:commandButton action="#{bean.action}" value="test" /> 
```

一切正常，我能够通过其 ActionEvent 在侦听器中检测 bean 和动作，但是使用复合组件和此代码我没有关于实际动作参数的信息

如果我使用大括号表示法，我也会遇到同样的问题：#{beanName['action']}。在这种情况下，在调试模式下，我可以看到对象 TagMethodExpression 与 MethodExpressionImpl 和 VariableMapperImpl 绑定，其中有映射 beanName -> "real_bean_name"

如果 ActionEvent 是由复合组件或大括号表示法生成的，有没有办法通过 ActionEvent 获取 bean 和 action？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:08:57.657

作为解决方案不是很干净，但我解决了使用 ActionSource2、MethodExpression 和 Reflection 访问 TagMethodExpression 私有字段...

```
final ActionSource2 actionSource = (ActionSource2) source;
MethodExpression expression;
expression = actionSource.getActionExpression();
String exp = expression.getExpressionString();

String trimmed = exp.trim();

// remove ending bracket
trimmed = trimmed.substring(0, trimmed.lastIndexOf("']"));

int openBracket = trimmed.lastIndexOf("['");

String beanName = trimmed.substring(0, openBracket);
StringBuilder builder = new StringBuilder(beanName);
builder.append('.');
builder.append(trimmed.substring(openBracket + 2, trimmed.length()));

String ret = builder.toString();

if (expression instanceof TagMethodExpression) {
    try {

        TagMethodExpression tme = (TagMethodExpression) expression;
        Field f = tme.getClass().getDeclaredField("orig");
        f.setAccessible(true);
        MethodExpression me = (MethodExpression) f.get(tme);
        Field ff = me.getClass().getDeclaredField("varMapper");
        ff.setAccessible(true);
        VariableMapperImpl vmi = (VariableMapperImpl) ff.get(me);
        ValueExpression beanResolveVariable = vmi.resolveVariable(beanName);
        String toString = beanResolveVariable.toString();
        Pattern pattern = Pattern.compile("value=\"#\\{(.*?)\\}");
        Matcher matcher = pattern.matcher(toString);

        if(matcher.find()){
            String realBeanName = matcher.group(1);
            ret = ret.replace(beanName, realBeanName);
        }
    } catch (NoSuchFieldException ex) {
        log.error(LogUtility.getStrExc(ex));
    } catch (SecurityException ex) {
        log.error(LogUtility.getStrExc(ex));
    } catch (IllegalAccessException ex) {
        log.error(LogUtility.getStrExc(ex));
    }
}
... 
```

# android - 错误在 SQL 表中创建表已存在

> ID：14997491
> 
> 赞同：0
> 
> 时间：2013-02-21T08:19:37.800
> 
> 标签：android, sql, create-table

我已经编写了在扩展类的类`onCreate()`方法中创建表的命令。打开数据库时，第一次调用该方法。但仍然有一个错误说 tablecorporate_boxes 已经存在。`DatabaseManager``SQLiteOpenHelper``onCreate()`

打开方法

```
public DatabaseManager open() {  

   ourHelper = new DatabaseManager(context);  
   ourDatabase = ourHelper.getWritableDatabase();  
   return this;  

} 
```

Oncreate 方法

```
@Override
public void onCreate(SQLiteDatabase db) {
db.execSQL(DATABASE_CREATE_TABLE2);
} 
```

`DATABASE_CREATE_TABLE2`是一个字符串，其定义如下，

```
private static final String DATABASE_CREATE_TABLE2 = "CREATE TABLE "
+ DATABASE_TABLE2 + " ( " + KEY_ROWID
+ " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_PRODUCT
+ " TEXT NOT NULL, " + KEY_PRICE + " TEXT NOT NULL," + KEY_IMAGEID
+ " TEXT NOT NULL );"; 
```

我也试过了，`CREATE TABLE IF NOT EXISTS`但它仍然给出了同样的错误。

这是正在显示的堆栈跟踪。

```
02-21 07:59:38.296: E/AndroidRuntime(1984): FATAL EXCEPTION: main
02-21 07:59:38.296: E/AndroidRuntime(1984): android.database.sqlite.SQLiteException: table corporate_boxes already exists (code 1): , while compiling: CREATE TABLE corporate_boxes ( _id INTEGER PRIMARY KEY AUTOINCREMENT, _name TEXT NOT NULL, _price TEXT NOT NULL,_imageid TEXT NOT NULL );
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at appistic.services.tricouschocolates.categories.DatabaseManager.onCreate(DatabaseManager.java:199)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at appistic.services.tricouschocolates.categories.DatabaseManager.open(DatabaseManager.java:116)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at appistic.services.tricouschocolates.Products.onItemSelected(Products.java:51)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.widget.AdapterView.access$200(AdapterView.java:49)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.os.Handler.handleCallback(Handler.java:725)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.os.Looper.loop(Looper.java:137)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invokeNative(Native Method)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invoke(Method.java:511)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-21 07:59:38.296: E/AndroidRuntime(1984):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:44:33.807

很可能您的问题是**`;`**字符，因为其他代码看起来正确。此字符可能会导致神秘问题，因此请尝试将其从 DML 语句中删除，它应该可以工作。

我不明白为什么`if not exists`在查询中使用时也会引发此错误，因为`onCreate()`我仅在您第一次对 db 使用某些“操作”时才调用，然后 db 始终只打开用于读取或写入或两者兼而有之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:01:34.813

更改数据库版本号并尝试一次它可能对您完全使用。

# c# - 在 WinRT 中序列化 BitmapImage

> ID：14997495
> 
> 赞同：0
> 
> 时间：2013-02-21T08:19:47.543
> 
> 标签：c#, serialization, windows-8, windows-runtime, winrt-xaml

```
public static async Task SaveFileAsync(string FileName, T data)
{
    MemoryStream memStream = new MemoryStream();
    DataContractSerializer serializer = new DataContractSerializer(typeof(T));
    serializer.WriteObject(memStream, data);

    StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(FileName,
        CreationCollisionOption.ReplaceExisting);
    using (Stream stream = await file.OpenStreamForWriteAsync())
    {
        memStream.Seek(0, SeekOrigin.Begin);
        await memStream.CopyToAsync(stream);
        await stream.FlushAsync();
    }
}

public static async Task<T> RestoreFileAsync(string FileName)
{
    T result = default(T);
    try
    {
        StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(FileName);
        using (IInputStream inStream = await file.OpenSequentialReadAsync())
        {
            DataContractSerializer serializer = new DataContractSerializer(typeof(T));
            result = (T)serializer.ReadObject(inStream.AsStreamForRead());
            return result;
        }
    }

    catch (FileNotFoundException)
    {
        return default(T);
    }
} 
```

我正在使用这些方法来序列化我的数据，但我有一个包含图像的类，

```
[DataMember]
Public Image img{get;set;} 
```

我正在尝试序列化它。我实际上正在执行以下操作

```
var thumb = await item.GetThumbnailAsync(Windows.Storage.FileProperties.ThumbnailMode.PicturesView,
                        1000, Windows.Storage.FileProperties.ThumbnailOptions.UseCurrentScale);

BitmapImage bmg = new BitmapImage();
bmg.SetSource(thumb);
Image img = new Image();
img.Source = bmg; 
```

我试图序列化它自己的bitmapImage，但这是同样的问题。我不断收到此错误，并且我的 BitmapImage 有一个属性。

> 无法序列化类型“Windows.UI.Xaml.Media.ImageSource”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:37:59.357

`DataContractSerializer`不适用于图像。您应该使用[`BitmapEncoder`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapencoder.aspx)(如果您正在处理`WriteableBitmap`或只是序列化您的`BitmapImage`.`BitmapImage`无论如何，因此您需要从原始源 URL 下载源文件或复制您加载的本地文件。然后您可以将该副本保存为松散文件或序列化为 Base64 在您创建的`DataContractSerializer`XML 中。

# ios - UIAlertView 每次都不会弹出

> ID：14997499
> 
> 赞同：0
> 
> 时间：2013-02-21T08:20:03.787
> 
> 标签：ios, objective-c, ios6

我有一个表格视图，并且我有一个方法，每次单击一行时都会调用它。但问题是，前几次我点击这些行没有任何反应，在 3 次之后它按预期工作。什么会导致这种情况？这是代码：

```
 - (void) tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hey, do you see the disclosure button?"
                                                    message:@"Touch that to drill down instead"
                                                   delegate:nil
                                          cancelButtonTitle:@"Won't happen again"
                                          otherButtonTitles: nil];
    [alert show];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:23:24.093

你实施了`didDeselectRowAtIndexPath`

应该是

`- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:23:39.637

替换`didDeselectRowAtIndexPath` 为`didSelectRowAtIndexPath`

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:43:16.573

您只需要将“didDeselectRowAtIndexPath”替换为“didSelectRowAtIndexPath”。因为它应该在选择行时而不是在取消选择行时工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:49:08.997

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hey, do you see the disclosure button?"
                                                    message:@"Touch that to drill down instead"
                                                   delegate:nil
                                          cancelButtonTitle:@"Won't happen again"
                                          otherButtonTitles: nil];
    [alert show];

} 
```

这应该可以解决您的问题

# sencha-touch-2 - 如何在sencha touch 2中创建动态标签

> ID：14997502
> 
> 赞同：1
> 
> 时间：2013-02-21T08:20:09.470
> 
> 标签：sencha-touch-2

我在 tabPanel 上有一个选项卡列表，我想在其上添加另一个选项卡，当条件为真时，这可能吗，如果是，请告诉我该怎么做。前任。Mycontroller 页面中的代码是：

```
mylist:funtion()
{
 if(mylist[0]=='Deployment_model')
 { 
 Ext.getCmp('') //here i want that one tab should me added on the view page
 }
 else{
  //do something
  }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:00:47.493

您只需将另一个项目添加到选项卡式面板。看看这个小提琴：[http ://www.senchafiddle.com/#5j3yu](http://www.senchafiddle.com/#5j3yu)

```
Ext.getCmp("mytabpanel").add({
                                title: 'New',
                                iconCls: 'action',

                                items: [
                                    {
                                        docked: 'top',
                                        xtype: 'panel',
                                        html: 'This is new content'
                                    }
                                ]
                            }); 
```

# shell-exec - 使用 export 命令通过 shell 脚本进行 Datastage 项目备份

> ID：14997503
> 
> 赞同：0
> 
> 时间：2013-02-21T08:20:12.433
> 
> 标签：shell-exec, datastage

我正在使用 shell 脚本进行数据阶段项目备份。

我正在使用此命令进行备份

```
/apps/IBM/InformationSever/server/DSengine/istool export –domain eltappsrvonoi:9080 -username user1 -password pass1     -archive "\tmp\arc.isx"  -datastage  '
"eltappengprnoi:5000/ITDCPC_SIT/Jobs/*/*.*"  ' 
```

当我将硬代码值作为项目名称（ITDCPC_SIT）时，此命令工作正常并成功完成。

在 shell 脚本中添加变量名称作为项目名称并在执行时取值时。

```
/apps/IBM/InformationSever/server/DSengine/istool export –domain eltappsrvonoi:9080 -username user1 -password pass1 -archive "\tmp\arc.isx"  -datastage  '
"eltappengprnoi:5000/$PROJECTNAME/Jobs/*/*.*"  ' 
```

它给出了错误：

> 未找到项目名称。（我给出了正确的值。项目名称没有错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T16:53:23.690

对于其他想知道这个问题的人：

只需使用双引号而不是单引号，否则不会替换变量。不要忘记转义内部双引号！

```
/apps/IBM/InformationSever/server/DSengine/istool export –domain eltappsrvonoi:9080 -username user1 -password pass1 -archive "\tmp\arc.isx"  -datastage  
"  \"eltappengprnoi:5000/$PROJECTNAME/Jobs/*/*.*\"  " 
```

有问题没有解决总是不好的......

# c# - IEditableObject 实现

> ID：14997504
> 
> 赞同：8
> 
> 时间：2013-02-21T08:20:17.300
> 
> 标签：c#, wpf

我一直在寻求实现一个通用类，该类实现 IEditableObject 以便我的一些 ViewModel 继承，以便支持取消对该 ViewModel 中的属性的编辑。它的主要用途是用于 WPF 中具有“确定”和“取消”按钮的模式对话框。

我在网上找到了以下实现：

*   [通过 TypeDescriptor 和 Reflection 实现 IEditableObject 的通用实现](http://www.codeproject.com/Articles/35066/Generic-implementation-of-IEditableObject-via-Type?fid=1538597&select=3098265&fr=11#xx0xx)
*   [Paul Stovell：用于 WPF 和 Windows 窗体的 IEditableObject 适配器](http://www.paulstovell.com/editable-object-adapter)

这对我来说似乎过于复杂，但我不确定我是否缺少它们提供的一些功能。一方面，他们不支持深拷贝，所以在我的世界里，我们可以只使用 MemberwiseClone 来执行浅拷贝。就像是：

```
private Item backupCopy;
private bool inEdit;

public void BeginEdit()
{
    if (inEdit) return;
    inEdit = true;
    backupCopy = this.MemberwiseClone() as Item;
}

public void CancelEdit()
{
    if (!inEdit) return;
    inEdit = false;
    this.Name = backupCopy.Name;
}

public void EndEdit()
{
    if (!inEdit) return;
    inEdit = false;
    backupCopy = null;
} 
```

这个例子当然应该在 ViewModel 继承的通用抽象基类中，但你明白了......

这里有什么区别？除了不支持深拷贝之外，我的方法还有哪些缺点？您将如何修改它以支持深拷贝（不确定是否有必要）？

## 更新：

发现这篇文章显示了比我使用反射更好的实现。仍然比我链接到的其他两篇文章简单得多：

*   [使用 IEditableObject 的可重用 EditableModelBase](http://indepthdev.azurewebsites.net/?p=73)

我们如何扩展它以支持深拷贝？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:30:04.147

实际上，`MemberwiseClone`应用了浅拷贝。如果应用浅拷贝，则不会创建对象内部的引用类型对象（如某些引用类型属性），而只会复制引用。所以每个实例都将引用相同的对象。

在深拷贝中，对象内部的引用类型对象也被复制。

想一个项目清单；如果你应用浅拷贝，你最终会得到两个指向相同对象的列表。如果您应用深拷贝，将为新列表创建新对象。

我建议您使用深拷贝，而不是浅拷贝。考虑一下列表示例；如果您应用浅拷贝并更改复制列表中的任何元素，那么将无法恢复所有更改；因为复制的列表与原始列表共享相同的元素。

# ios - 带有 iOS 的 Google App Engine 上的 Facebook OAuth

> ID：14997506
> 
> 赞同：5
> 
> 时间：2013-02-21T08:20:28.457
> 
> 标签：ios, google-app-engine, oauth-2.0, single-sign-on, facebook-oauth

我仍然无法找到任何类型的教程，用于在 Google App Engine 上使用 OAuth 2 Facebook 对原生 iOS 应用程序进行身份验证。我意识到我可能需要在 GAE 上使用代理（例如：[Authenticate with Google App Engine from an Iphone Native Client](https://stackoverflow.com/questions/4730661/authenticate-with-google-app-engine-from-an-iphone-native-client#answer-5434252)）来创建与 facebook 的会话，但是使用原生 facebook UI 进行 SSO 的最简洁方法是什么？

我想我会使用 Facebook ios Auth 教程中的内容：http: [//developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

但是，我该如何将会话提供给我的 GAE 服务器并将会话缓存在客户端设备上，以便它可以验证对我的服务器的 https 请求？我基本上想在 GAE 上使用 simple-auth 并让我的 iOS 应用程序像本机（Web）客户端一样运行（但不使用 UIWebViews）。没有简单的方法可以做到这一点吗？

顺便说一句，我在 Google App Engine 上使用 python。我为 Java 找到了这个，但老实说我不知道​​它到底是做什么的，因为文档还没有写好[http://www.lean-engine.com/index.html](http://www.lean-engine.com/index.html)

类似的未回答问题：[https ://stackoverflow.com/questions/14878727/oauth-from-native-ios-app-with-oauth-from-facebook](https://stackoverflow.com/questions/14878727/oauth-from-native-ios-app-with-oauth-from-facebook)

编辑：我基本上想要一个类似于 Draw Something 和其他 Zynga 游戏的登录，它允许用户简单地使用他们的原生 Facebook/iOS6 身份验证来验证对我服务器的 API 调用。

EDIT2：找到这篇内容丰富的帖子，但仍然没有关于如何做到这一点的教程[Design for Facebook authentication in an iOS app that also access a secure web service](https://stackoverflow.com/questions/4623974/design-for-facebook-authentication-in-an-ios-app-that-also-accesses-a-secured-we)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:56:34.130

所以基本上我所做的是在后端实现 gae-sessions [https://github.com/dound/gae-sessions/wiki](https://github.com/dound/gae-sessions/wiki)。

然后我在前端实现了 facebook ios SDK 身份验证。

然后我将 access_token 发送到 GAE，在那里我对 /me 进行 facebook 图形 API 调用，并创建一个包含有关用户和设备的信息的会话，并确保请求是从我的 ios 应用程序发出的。

然后在后续请求中，我验证会话中的用户与尝试访问数据的用户相同，并且该调用也来自我的 ios 应用程序。

如果有人有任何使这更安全的建议，请随时发表评论或发布答案。

# php - 服务器到客户端更新，无需来自客户端 Websocket 编程的持续/持久请求

> ID：14997512
> 
> 赞同：1
> 
> 时间：2013-02-21T08:21:13.300
> 
> 标签：php, html, node.js, websocket

也许我没有完全理解相关问题的答案。我得到了长轮询，反向 ajax 概念，但事情是这样的：

我当前的设置是在我的本地单元中，我是客户端，我是服务器。我可以成功地建立到我的服务器的连接，并且一旦建立连接，我就可以向我的客户端发送一条消息，现在另一个场景出现了，我只希望服务器在建立连接后不断更新我的客户端。为简单起见，假设我希望我的客户端使用服务器时间进行更新，因此每次分钟更改时，服务器都会将最新时间发送给客户端（前提是连接已经建立）。

我正在使用 node.js 和 socket.io。以下是我的代码：

客户：

```
<!DOCTYPE html>  
<meta charset="utf-8" />  
<title>WebSocket Testing</title>  
<script src="/socket.io/socket.io.js"></script>

<script language="javascript" type="text/javascript">  
var socket = new io.connect("http://127.0.0.1:8080");
socket.on('connect', function(){

//  socket.on('news', function (data) {
//  socket.emit('my other event', { my: 'data' });

        socket.on("test",function(data){
            alert(data);
        });

    socket.onmessage =  function (event) {
        console.log(event.data);
    }

});
console.log(socket);
</script>  
<h2>WebSocket Test</h2>  
<div id="output"></div>  
</html> 
```

服务器：

```
var socketOptions = {
            transportOptions: {
                    'xhr-polling': {
                            closeTimeout: 20000000, //20 mins
                            timeout: 20000000  //20 mins
                    }
            }
    };

var app = require('http').createServer(handler)
  , url = require('url')
  , io = require('socket.io').listen(app,socketOptions)

  , fs = require('fs')

app.listen(8080);

function handler (req, res) {
    var path = url.parse(req.url).pathname;
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
    console.log("ERROR: "+err)
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

  //  res.writeHead(200);
    //res.writeHead(200, {'Content-Type': path == 'json.js' ? 'text/javascript' : 'text/html'})
    res.writeHead(200, {'Content-Type': 'text/html'});
    console.log("THIS IS IT");
    res.end(data);
  });

}

console.log(io);

io.sockets.on('connection', function (socket) {
//  socket.send("testing lang kung nagsesend");
//  console.log("connection");
//  socket.emit('news', { hello: 'world' });
//  socket.on('my other event', function (data) {
//    console.log(data);
//  });

    socket.emit("test","Test connection message established,send and received");
}); 
```

我如何处理我的服务器代码？我注意到几乎所有的代码示例都是 php 格式的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:40:21.270

在回调中创建一个带有函数的 setInterval，您希望它在`connection`触发后几秒钟内执行什么操作。你正在寻找这样的东西：

```
io.sockets.on('connection', function (socket) {
    setInterval(function(){
        // do a socket emit here to give data to client
    },1000);
} 
```

# c# - 谷歌分析不记录我的网站访问者

> ID：14997515
> 
> 赞同：0
> 
> 时间：2013-02-21T08:21:27.910
> 
> 标签：c#, asp.net, google-analytics

我正在使用谷歌分析来跟踪我的访客。我正在使用下面的代码，但它不适用于我的网站。但是我在不同的网站中使用过相同的代码然后它可以工作我在头部添加了代码

```
<script language="C#" runat="server">

        // Copyright 2010 Google Inc. All Rights Reserved.
        private const string GaAccount = "UA-xxxxxxx-1";
        private const string GaPixel = "ga.aspx";
        private string GoogleAnalyticsGetImageUrl()
        {
            System.Text.StringBuilder url = new System.Text.StringBuilder();
            url.Append(GaPixel + "?");
            url.Append("utmac=").Append(GaAccount);
            Random RandomClass = new Random();
            url.Append("&utmn=").Append(RandomClass.Next(0x7fffffff));
            string referer = "-";
            if (Request.UrlReferrer != null && "" != Request.UrlReferrer.ToString())
            {
                referer = Request.UrlReferrer.ToString();
            }
            url.Append("&utmr=").Append(HttpUtility.UrlEncode(referer));
            if (HttpContext.Current.Request.Url != null)
            {
                url.Append("&utmp=").Append(HttpUtility.UrlEncode(Request.Url.PathAndQuery));
            }
            url.Append("&guid=ON");
            return url.ToString().Replace("&", "&amp;");
        }

    </script> 
```

我也有`ga.aspx`根文件夹中的文件。

但它不适用于我的新网站：

[http://www.deltecs.com](http://www.deltecs.com)（谷歌分析不适用于本网站）
[http://www.dronamobile.com](http://www.dronamobile.com)（同样的代码适用于本网站）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T08:30:04.997

为什么要使用图像标签来获取输出 GA 代码的 asp 脚本？您应该只将 js 代码写入您的网页。

我认为这是某种“我在浏览器中禁用了 js”？

# java - 尽管使用了 servletContext()，但 getResourceAsStream 返回 null

> ID：14997523
> 
> 赞同：2
> 
> 时间：2013-02-21T08:21:56.893
> 
> 标签：java, file, servlets

这是一个读取 .pdf 并将其作为响应发送的 servlet。我不明白为什么它不起作用。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("application/pdf");
        ServletContext sc = this.getServletContext();
        String path = sc.getRealPath("/WEB-INF/pdf/order.pdf");
        System.out.print(path);// this prints correct path
        InputStream is = null;
        try{
            is = sc.getResourceAsStream(path); // this is not working
        }catch(Exception e){
            e.printStackTrace();
        }
        System.out.print(is);// it is null
        int read = 0;
        byte[] bytes = new byte[2048];
        OutputStream os = response.getOutputStream();

        try{
        while((read = is.read(bytes))!= -1){  //exception is thrown here
            os.write(bytes,0,read);
        }
        }catch(Exception e){
            e.printStackTrace();
        }
        os.flush();
        os.close();
      } 
```

谁能解释为什么它不起作用，尽管使用 this.getServletContext().getRealPath("/WEB-INF/pdf/demo.pdf");

这是堆栈跟踪：

```
2/21/13 14:24:21:322 IST] 00000033 SystemErr     R java.lang.NullPointerException
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.tgmc.servlets.DisplayOrder_PDF_Servlet.doGet(DisplayOrder_PDF_Servlet.java:42)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1449)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:790)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3610)
[2/21/13 14:24:21:323 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:274)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:926)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:288)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1016)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyReadCompletedCallback.complete(SSLConnectionLink.java:639)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1772)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[2/21/13 14:24:21:324 IST] 00000033 SystemErr     R     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
[2/21/13 14:24:21:325 IST] 00000033 SystemErr     R     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:26:26.653

你试过 sc.getResourceAsStream("/WEB-INF/pdf/order.pdf")

它是否位于 src/main/resources/WEB-INF/pdf 下？文件名为 .pdf 而不是 .PDF？

编辑：我在家里试过这个，它对我有用。

```
 try{
        is = sc.getResourceAsStream("/WEB-INF/pdf/order.pdf"); // this works!
    }catch(Exception e){
        e.printStackTrace();
    } 
```

注意：给你一个标准的构建，order.pdf 应该在 src/main/ **webapp** /WEB-INF/pdf 文件夹中

（而不是 src/main/resources...）。

Vishal，您能再试一次使用我上面的代码并检查文件夹结构吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T07:51:38.480

我在 ServletContext 上调用 GetResourceAsStream() 时也遇到了 NullPointerException 并且已经修复，所以我在这里为那些遇到同样问题的人发帖。根据 [http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)上的文档，getRealPath() 方法将返回服务器文件系统上的真实路径，因此调用`sc.getRealPath("/WEB-INF/pdf/order.pdf")`如上面的代码`/opt/apache-tomcat/wtpwebap‌​ps/itext/WEB-INF/pdf/order.pdf`假设 /opt/apache-tomcat/ 是您的 tomcat 在服务器上的位置，可能会返回。该文档还提到，对于 getResourceAsStream() 方法，我们应该传入以 / 开头的 servlet 上下文根的相对路径。因此，对于上面的代码，您应该将`/WEB-INF/pdf/order.pdf`真实路径传递给 getResourceAsStream() 方法。

```
sc.getResourceAsStream("/WEB-INF/pdf/order.pdf") 
```

# ruby-on-rails - 具有 id 属性的自定义路由

> ID：14997524
> 
> 赞同：1
> 
> 时间：2013-02-21T08:21:57.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对如何为我的表演活动整理路线感到困惑。目前，如果我选择特定的指南来“显示”它，网址会说

> /准则/1

其中 1 是指南 ID

我想说

> /标题

（这是正在显示的指南的标题）。我很困惑如何在我的路线中管理这个。目前我的路线有

```
get 'guideline/:id', to: 'guidelines#show', as: :seeguideline 
```

但这只是我提到的guideline/1，所以我意识到我做错了什么

我的观点与此链接

```
<%= link_to guideline.title, seeguideline_path(id: guideline.id) %> 
```

在guidelines_controller.rb 中显示操作是

```
def show
    @guideline = Guideline.where(title: params[:title]).first
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @guideline }

    end
  end 
```

路线是

```
ActiveAdmin.routes(self)

  devise_for :admin_user, ActiveAdmin::Devise.config

  get "guidelines/topic"
  get "guidelines/topichospital"
  get "guidelines/topicspecialty"
  get "guidelines/favourite"

  devise_for :users

  devise_scope :user do
    get 'signup', to: 'devise/registrations#new', as: :register
    get 'login', to: 'devise/sessions#new', as: :login
    get 'logout', to: 'devise/sessions#destroy', as: :logout
    get 'edit', to: 'devise/registrations#edit', as: :edit
    put 'users' => 'devise/registrations#update', :as => 'user_registration'
    get 'about', to: 'about#about', as: :about
  end

  resources :guidelines
  get 'guidelines', to: 'guidelines#index', as: :guidelines
  get 'favourites', to: "favourites#show", as: :favourites
  get 'topics', to: 'guidelines#list', as: :topics
  get 'hospitals', to: 'guidelines#listhospital', as: :hospitals
  get 'specialties', to: 'guidelines#listspecialty', as: :specialties

  root :to => 'guidelines#index'
  get '/:id', to: 'profiles#show', as: :myprofile
  get '/:title', to: 'guidelines#show', as: :seeguideline 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:30:18.047

你可能想看看这个 railscast [http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:29:48.240

如果你想匹配像'/url'这样的url，你需要把它放在你的路由文件的底部，这样它就优先级最低（即，如果你有一个项目控制器，它不匹配'/projects'）。理论上这是通过

```
match '/:title' => 'guidelines#show', as: :seeguideline 
```

然后在你的控制器中

```
def show
  @guideline = Guideline.where(title: params[:title]).first
end 
```

那么在你看来，你可以使用

```
seeguideline_path(@guideline.title) 
```

但您还必须注意要在 url 中使用的标题中的无效字符。

# android - 无法从此 wsdl 中挑选参数以在 web 服务调用中使用

> ID：14997528
> 
> 赞同：1
> 
> 时间：2013-02-21T08:22:09.713
> 
> 标签：android, wsdl, ksoap2

我需要调用以下 Web 服务，并且我有其对应的 WSDL 文件。但是我无法让下面的代码工作。

```
<wsdl:definitions name="ServiceTestService" targetNamespace="http://Rothman.com/">
<wsdl:types>
<schema>
<import namespace="http://Rothman.com/" schemaLocation="http://Rothmanweb.cloudfoundry.com/services/ServiceTestPort?xsd=servicetest_schema1.xsd"/>
</schema>
</wsdl:types>
<wsdl:message name="WhatIsTheAnswerResponse">
    <wsdl:part element="tns:WhatIsTheAnswerResponse" name="parameters"> </wsdl:part>
</wsdl:message>
<wsdl:message name="WhatIsTheAnswer">
   <wsdl:part element="tns:WhatIsTheAnswer" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:portType name="QuestionSEI">
  <wsdl:operation name="WhatIsTheAnswer">
          <wsdl:input message="tns:WhatIsTheAnswer" name="WhatIsTheAnswer"> </wsdl:input>
          <wsdl:output message="tns:WhatIsTheAnswerResponse" name="WhatIsTheAnswerResponse"></wsdl:output>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ServiceTestServiceSoapBinding" type="tns:QuestionSEI">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="WhatIsTheAnswer">
<soap:operation soapAction="" style="document"/>
<wsdl:input name="WhatIsTheAnswer">
  <soap:body use="literal"/>
 </wsdl:input>
 <wsdl:output name="WhatIsTheAnswerResponse"><soap:body use="literal"/>
 </wsdl:output>
 </wsdl:operation>
 </wsdl:binding>
 <wsdl:service name="ServiceTestService">
     <wsdl:port binding="tns:ServiceTestServiceSoapBinding" name="ServiceTestPort">
     <soap:address location="http://Rothmanweb.cloudfoundry.com/services/ServiceTestPort"/>
     </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

现在我有以下代码，但我似乎无法从 WSDL 中找到参数来连接到该服务。服务接受一个字符串作为输入并返回一个字符串作为输出。我有以下代码片段，但我不确定以下最终静态值。

```
 private static final String NAMESPACE = "http://Rothman.com/"; //ok
private static final String METHOD_NAME = "WhatIsTheAnswer"; //ok

private static final String URL = "http://Rothmanweb.cloudfoundry.com/services/ServiceTestPort?wsdl";   
private static final String SOAP_ACTION = "http://Rothman.com/WhatIsTheAnswer"; 
```

这些值的使用如下

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
    SoapSerializationEnvelope envelope =  new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.setOutputSoapObject(request);
    HttpTransport androidHttpTransport = new HttpTransport(URL);
    try 
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
        System.out.println("Received object");
    } catch (Exception e)
    {
        e.printStackTrace();
    } 
```

如果有人能告诉我如何使用此代码从该 Web 服务获得响应，我将不胜感激。我的最终变量是否正确？该服务正常工作，因为我使用soapUI对其进行了测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:03:46.667

**带有WSDL**的URL必须是来自 android 设备的真实可访问地址。并且在**WSDL中导入的****XSD**模式也 必须是可访问的。

 **如果您的 Web 服务需要输入字符串，则必须指定`PropertyInfo`为输入参数。

```
PropertyInfo methodParam = new PropertyInfo();
methodParam.setName("string");
methodParam.setValue(yourString);
methodParam.setType(PropertyInfo.STRING_CLASS);
Request.addProperty(methodParam);

SoapObject soapObject = new SoapObject(NAMESPACE, methodName);
envelope.setOutputSoapObject(soapObject); 
```**

# jquery - 最小高度不缩放

> ID：14997532
> 
> 赞同：0
> 
> 时间：2013-02-21T08:22:14.260
> 
> 标签：jquery, html, css, internet-explorer

我想在所有 IE 浏览器中缩放图像。

我的代码：

```
<div class="outer"><img src="text.png" /></div> 
```

CSS

```
.outer {
   position:absolute;
   top: 0;
   left: 0;
   height: 100%;
   width: 100%;
   text-align: center;
}
img {
   min-height: 100%;
} 
```

像这样 img-Tag 使用宽度进行自动缩放。但这在 IE 中不起作用。图像只是垂直缩放。

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:35:42.083

如果您希望图像宽度始终跨越整个浏览器窗口，则必须确保将`body`父容器（在本例中`outer`）设置为具有`width: 100%`，以便宽度百分比对后代正确工作。然后，为图像设置显式宽度，`100%`高度应自动缩放。

```
body, .outer {
    width: 100%;
}
img {
    width: 100%;
} 
```

[jsfiddle](http://jsfiddle.net/SmNub/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:56:12.477

根据**[msdn](http://msdn.microsoft.com/en-us/library/ie/ms530815%28v=vs.85%29.aspx)**，

> 如果未明确设置包含块的高度，则元素没有最小高度，并且 min-height 属性被解释为 0%。

您需要明确提及父容器的高度。

```
body{height: 800px;}  /* set your own height here */ 
```

根据**[站点点](http://reference.sitepoint.com/css/min-height)**

> 如果包含块的高度没有明确指定（即它取决于内容高度），并且该元素不是绝对定位的，则百分比值被视为零。

# tsql - T-SQL“时间戳”覆盖“rowversion”数据类型列

> ID：14997535
> 
> 赞同：7
> 
> 时间：2013-02-21T08:22:26.553
> 
> 标签：tsql, timestamp, sql-server-2012, rowversion

我正在使用 Miscrosoft SQL Server 2012，因为在这篇[文章](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.110%29.aspx)中说：

> 时间戳语法已弃用。此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。

我决定使用“rowversion”列而不是“timestamp”列。所以，我创建了下表：

```
CREATE TABLE [dbo].[TestTable]
(
     [Col001] [INT] NOT NULL
    ,[Col002] [CHAR](2) NOT NULL
     ...
    ,[Col00N]  [DATETIME2] NOT NULL
    ,[RowVersionID] [ROWVERSION] NOT NULL
    ,CONSTRAINT [PK_ProtoSurveyGlobalizationChanges_RowVersionID] PRIMARY KEY CLUSTERED 
     (
        [RowVersionID] ASC
     )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 
) ON [PRIMARY] 
```

一切看起来都很好，直到我按下“ALT+F1”组合，它为我提供了有关我的表的信息（如列详细信息），并且我看到“RowVersionID”列被标记为“timestamp”类型。

我所做的下一个想法是使用 SQL Server Management Studio 2012“删除并创建我的表”，“生成的 SQL”改变了我的原始查询，如下所示：

```
[RowVersionID] [timestamp] NOT NULL 
```

为什么服务器没有使用我最初设置的类型，为什么在文章中我被建议不要使用“时间戳”，但服务器以某种方式选择了它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T08:27:54.753

它们是同义词，服务器无法告诉（一旦创建表）您实际使用哪个词来创建表。

显然，在深处的某个地方，`timestamp`被弃用的消息还没有传达给负责编写 SQL Server 脚本组件的人——所以脚本仍然说`timestamp`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T08:28:58.930

`rowversion`是一个`timestamp`。他们是一样的东西。

> timestamp 是 rowversion 数据类型的同义词，受数据类型同义词的行为影响。在 DDL 语句中，尽可能使用 rowversion 而不是 timestamp。

[参考](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.110%29.aspx)。

它已被重命名，因为`timestamp`不符合 ISO 标准。而且因为人们错误地认为时间戳可以代表实际的日期时间点的可能性较小。

只需将其声明为`rowversion`. `timestamp`已弃用，可能会在以后删除。

# regex - 仅在 Django 查询中进行全字匹配

> ID：14997536
> 
> 赞同：12
> 
> 时间：2013-02-21T08:22:27.827
> 
> 标签：regex, django, postgresql, django-queryset

我正在尝试编写一个仅匹配整个单词的 Django 查询。根据[此处](https://stackoverflow.com/a/4024355/1256700)的答案，我尝试过类似的方法：

```
result = Model.objects.filter(text__iregex='\bsomeWord\b') 
```

但这并没有返回预期的结果。我也试过

```
result = Model.objects.filter(text__iregex=r'\bsomeWord\b') 
```

无济于事。我的最终目标是能够传入一个字符串变量，例如：

```
result = Model.objects.filter(text__iregex=r'\b'+stringVariable+r'\b') 
```

或者

```
result = Model.objects.filter(text__iregex=r'\b %s \b'%stringVariable) 
```

但现在我什至无法让它与原始字符串一起工作。我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T08:53:26.263

当你使用 PostgreSQL 时，使用“<strong>\y”而不是“<strong>\b”，这是因为 Django 将你的正则表达式直接传递给 PostgreSQL——所以你的 RegEx 需要与它兼容。您应该能够`psql`毫无问题地执行它们。

```
result = Model.objects.filter(text__iregex=r"\y{0}\y".format(stringVariable)) 
```

请参阅[https://www.postgresql.org/docs/9.1/functions-matching.html#POSIX-CONSTRAINT-ESCAPES-TABLE](https://www.postgresql.org/docs/9.1/functions-matching.html#POSIX-CONSTRAINT-ESCAPES-TABLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T19:43:56.933

我在尝试使用 Perl 兼容的转义序列 \b 匹配单词边界时遇到了同样的问题。我的后端数据库是 MySQL。

我通过字符类表达式 [[:space:]] 解决了这个问题，例如

```
 q_sum = Q()
        search_list = self.form.cleaned_data['search_all'].split(' ');
        for search_item in search_list:
            search_regex = r"[[:space:]]%s[[:space:]]" % search_item
            q_sum |= Q(message__iregex=search_regex)
        queryset = BlogMessages.objects.filter(q_sum).distinct() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:26:57.030

您可以通过删除正则表达式并使用一些 django 查找来获得一些东西

```
result = Model.objects.filter(Q(text__contains=' someword ') |
                              Q(text__contains=' someword.') |
                              Q(text__istartswith = 'someword.' |
                              Q(text__istartswith = 'someword.' |
                              Q(text__iendswith = 'someword') 
```

有关文档，请参见[此处](https://docs.djangoproject.com/en/1.4/ref/models/querysets/)。

我意识到这不是那么优雅（但如果您不喜欢正则表达式，则可以轻松维护）。

# r - PCA+lm的交叉验证

> ID：14997541
> 
> 赞同：1
> 
> 时间：2013-02-20T15:29:55.340
> 
> 标签：r, pca, cross-validation

我是一名化学家，大约一年前，我决定进一步了解化学计量学。

**我正在处理这个我不知道如何解决的问题：**

我进行了一个实验设计（具有 3 个因子的*Doehlert*类型），将几种分析物浓度记录为**Y。****然后我在Y**上执行了 PCA ，我使用第一台 PC 上的分数（总方差的 87%）作为线性回归模型的新**y**，我的实验编码设置为**X。**

*现在我需要在对新的“训练集”执行 PCA之前*执行一个留一法交叉验证删除每个对象，然后像以前一样在分数上创建回归模型，预测观察的分数值“测试集”并计算预测的误差，比较预测的分数和测试集中的对象在前一次 PCA 的空间中投影得到的分数。如此重复*n*次（其中 n 是我的实验设计的点数）。我想知道我怎么能用 R 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:38:13.083

进行计算，例如 by`prcomp`然后`lm`。为此，您需要将返回的 PCA 模型`prcomp`应用于新数据。这需要两个（或三个）步骤：

1.  将新数据与计算的相同中心居中`prcomp`
2.  使用与计算的相同缩放向量缩放新数据`prcomp`
3.  应用计算的旋转`prcomp`

前两个步骤是通过`scale`使用prcomp 对象的`$center`和元素来完成的。`$scale`然后你矩阵乘以你的数据 `$rotation [, components.to.use]`

`prcomp`您可以通过计算您输入的数据的分数并将结果与`$x`​​返回的 PCA 模型元素进行比较，轻松检查您是否重建了 PCA 分数计算`prcomp`。

根据评论编辑：

如果 CV 的目的是计算某种误差，那么您可以在计算预测分数**y**的误差（我是这么理解的）和计算**Y**的误差之间进行选择：PCA 还可以让您倒退并预测原始分数与分数不同。这很容易，因为载荷 ( `$rotation`) 是正交的，所以逆只是转置。

因此，原始**Y**空间中的预测是`scores %*% t (pca$rotation)`，计算速度更快`tcrossprod (scores, pca$rotation)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T11:05:52.800

还有 R 库[`pls`](http://cran.r-project.org/web/packages/pls/pls.pdf)（部分最小二乘法），其中包含 PCR 工具（[主成分回归](https://en.wikipedia.org/wiki/Principal_component_regression)）

# shell - 如何删除包含在特定模式之后首先找到的模式的行

> ID：14997544
> 
> 赞同：0
> 
> 时间：2013-02-21T08:22:48.547
> 
> 标签：shell, unix

我正在编写一个 shell 脚本来从特定组中删除一个条目。eg：文件名为dest.xml

```
<domain id="1" group_name="group1">
    <node id="ABC">
    <node id="PQR">
    <node id="XYZ">
</domain>
<domain id="2" group_name="group2">
    <node id="PQR">
    <node id="XYZ">
</domain>
<domain id="3" group_name="group3">
    <node id="ABC">
    <node id="PQR">
 </domain> 
```

我想从 group_name="group1" 中删除节点 id="PQR" 的上述文件（文件名是 dest.xml）中的条目（它不应该从 group2 和 group3 中删除）。我可以通过顺序读取文件 n 然后从特定组中删除它来做到这一点。但是如果文件很大（>10k 行），那么它需要时间。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:27:43.187

您可以在[sed](/questions/tagged/sed "显示标记为“sed”的问题")中执行此操作：

```
echo '<domain id="1" group_name="group1">
    <node id="ABC">
    <node id="PQR">
    <node id="XYZ">
</domain>
<domain id="2" group_name="group2">
    <node id="PQR">
    <node id="XYZ">
</domain>
<domain id="3" group_name="group3">
    <node id="ABC">
    <node id="PQR">
 </domain>' | sed -e '/group_name="group1"/,/<\/domain>/ { /node id="PQR"/d; }'
<domain id="1" group_name="group1">
    <node id="ABC">
    <node id="XYZ">
</domain>
<domain id="2" group_name="group2">
    <node id="PQR">
    <node id="XYZ">
</domain>
<domain id="3" group_name="group3">
    <node id="ABC">
    <node id="PQR">
 </domain> 
```

### 建议用法：

```
mv dest.xml dest.bak && sed -e '/group_name="group1"/,/<\/domain>/ { 
        /node id="PQR"/d; 
    }' dest.bak > dest.xml 
```

### 科恩壳牌：

请注意，环境变量不会在单引号内展开。如果您希望将此命令嵌入脚本中，您需要为[sed](/questions/tagged/sed "显示标记为“sed”的问题")命令使用双引号，然后在程序中转义双引号：

```
#!/bin/ksh
gp_name=group1
entry=PQR
mv dest.xml dest.bak && sed -e "/group_name=\"${gp_name}\"/,/<\/domain>/ {
    /node id=\"${entry}\"/d;
}" dest.bak > dest.xml 
```

# javascript - 如何在javascript中获取请求的响应？

> ID：14997546
> 
> 赞同：-2
> 
> 时间：2013-02-21T08:22:52.123
> 
> 标签：javascript, jquery, ajax

我想使用 javascript 或 jquery 或 ajax调用这个 url [http://www.localhost:8585/doctorsite/login.php?username=xxx&password=password （一个 php restful web 服务）。](http://www.localhost:8585/doctorsite/login.php?username=xxx&password=password)并返回一个 xml 值作为响应。我想将该响应存储在一个变量中。请帮助我解决这个问题。

我正在尝试使用 phonegap 创建 iphone 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:26:29.263

呵呵....你有没有尝试看一下 jQuery 文档？

你可以使用它... [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# .htaccess - htaccess 重定向到 index.html

> ID：14997558
> 
> 赞同：0
> 
> 时间：2013-02-21T08:23:33.157
> 
> 标签：.htaccess, redirect

为了尊重 SEO 指令，我想重定向来自以下的所有流量：

```
http://www.mywebsite.com
http://mywebsite.com
www.mywebsite.com
mywebsite.com 
```

到

```
http://wvw.mywebsite.com/index.html 
```

目前我使用这段代码，但它不能正常工作：

```
RewriteCond %{HTTP_HOST} !^www.mywebsite.com$ [NC]
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [L,R=301]
RewriteRule ^$ index.html [L]. 
```

一切正常，但`www.mywebsite.com/index.html`在`www.mywebsite.com`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:02:01.073

做这项工作

```
RewriteCond %{HTTP_HOST} !^www.mywebsite.com$ [NC]
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [L,R=301] 
```

# cocos2d-iphone - Cocos2d iphone：更改 CCSprite.position 在模拟器上有效，但在设备上无效

> ID：14997564
> 
> 赞同：0
> 
> 时间：2013-02-21T08:23:52.650
> 
> 标签：cocos2d-iphone, ios-simulator, ccsprite

我遇到了一些 cocos2d 代码的问题，它在模拟器上运行良好（意味着在这种情况下，当我触摸和滚动时精灵正在移动）但它在我的 ipod 上不起作用 ccTouchesMoved 在两者上都被调用，但是精灵只在模拟器中移动

```
CCSprite *gradA = [CCSprite spriteWithFile:@"grad.png"];
gradA.anchorPoint = ccp(0, 0);
gradA.position = ccp(0, 0);

[...]

-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{   
    //NSLog(@"ccTouchesMoved called");

    UITouch *touch   = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    int d = (_prevTouch.y - location.y);
    // This code should make the sprite moving
    // And it does on the simulator but not on my ipod
    gradA.position = ccp(PARALAX_X, gradA.position.y - d);

    _prevTouch = location;
}

-(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch   = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    _firstTouch = location;
}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{   
    UITouch *touch   = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    _lastTouch = location;
} 
```

顺便说一句，如果我执行“gradA.position = ccp(0, gradA.position.y - d);” 在 ccTouchesMoved 以外的任何其他方法中，它都可以在设备和模拟器上运行。

这对我来说可能是一个愚蠢的错误（我希望是这样），因为这是我的第一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:25:37.657

以下是我目前移动精灵的方式（在 ccTouchesMoved 中）：

```
 UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];

    CGPoint oldTouchLocation = [touch previousLocationInView:touch.view];
    oldTouchLocation = [[CCDirector sharedDirector] convertToGL:oldTouchLocation];
    oldTouchLocation = [self convertToNodeSpace:oldTouchLocation];

    CGPoint translation = ccpSub(touchLocation, oldTouchLocation);

    CGPoint newPos = ccpAdd(currentFragment.position, translation);
    currentFragment.position = newPos; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:19.640

答案很简单，如果您在设备和模拟器之间遇到问题，您应该检查（以及文件名大小写）NSLog 在设备上的速度非常慢，以至于它阻止设备渲染精灵移动。

我在 ccTouchesMoved 方法的代码中有两个 NSLog，当我删除它们时，它就像一个魅力。

避免在设备上使用 NSLog。

# php - 带有ajax和php的json变量

> ID：14997568
> 
> 赞同：0
> 
> 时间：2013-02-21T08:24:06.470
> 
> 标签：php, javascript, html, ajax, json

我有一个表，它从一个经常更新的数据库中查询，`<span id="totalvotes1"></span>`以及`<span id="totalvotes2"></span>`我需要能够`success: function(data) { $('#totalvotes1').text(data); } });`在我的 ajax 中为每个查询的相应行识别行中的那些......它的设置方式正确现在，我的 ajax 只会将信息显示回`<span id="totalvotes1"></span>`查询的最后一行......显然我需要使用 json 来完成此操作，但我不知道如何......非常感谢任何帮助，谢谢！

```
<?php

$sql = mysql_query("SELECT * FROM blogData ORDER BY id DESC");
$sql2=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 0 ORDER BY mes_id DESC");
$sql3=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 1 ORDER BY mes_id DESC");

$count_variable = 0;

while(($row = mysql_fetch_array($sql))AND($row2 = mysql_fetch_array($sql2))AND($row3 = mysql_fetch_array($sql3)) ){
$id = $row['id'];
$title = $row['title'];
$content = $row['content'];
$category = $row['category'];
$podcast = $row['podcast'];
$datetime = $row['datetime'];

$message1=$row2['msg'];
$mes_id1=$row2['mes_id'];
$totalvotes1=$row2['totalvotes'];

$message2=$row3['msg'];
$mes_id2=$row3['mes_id'];
$totalvotes2=$row3['totalvotes'];

?>

<table class="content">
<tr>
<td>

<div id="main">
<div id="left">
<span class='up'><a href="" class="vote" name="up" data-options="key1=<?php echo $mes_id1;?>&key2=<?php echo $mes_id2;?>"><img src="up.png" alt="Down" /></a></span><br />
<span id="totalvotes1"><?php echo $totalvotes1; ?></span><br />
</div>
<div id="message">
<?php echo $message1; ?>
</div>
<div class="clearfix"></div>
</div>
<div id="main">
<div id="right">
<br />
<span id="totalvotes2"><?php echo $totalvotes2; ?></span><br />
<span class='down'><a href="" class="vote" name="down" data-options="key1=<?php echo  $mes_id1;?>&key2=<?php echo $mes_id2;?>"><img src="down.png" alt="Down" /></a></span>
</div>
<div id="message">
<?php echo $message2; ?>
</div>
<div class="clearfix"></div>
</div>
</td>
</tr>
</table>

<?php
 }
?> 
```

这是我的 general.js 文件

```
$(".vote").click(function()  
{

var id = $(this).attr("id");
var name = $(this).attr("name");
var eData = $(this).attr("data-options");
var dataString = 'id='+ id + '&' + eData ;
var parent = $(this);

if(name=='up')
{

$(this).fadeIn(200).html('');
$.ajax({
type: "POST",
url: "up.php",
data: dataString,
cache: false,

success: function(data) { $('#totalvotes1').text(data); }
});

}
else
{

$(this).fadeIn(200).html('');
$.ajax({
type: "POST",
url: "down.php",
data: dataString,
cache: false,

success: function(data) { $('#totalvotes2').text(data); }

});

}
});

});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:16:24.120

您的代码中的问题是您的页面上有多个具有相同 ids:`totalvotes1`和`totalvotes2`. 因此，当您这样做时`$('#totalvotes1').text(data);`，浏览器不知道要更改哪一个。

为了解决这个问题，您可以考虑以下方法。首先，通过添加产品的唯一键来更改跨度的 ID。

```
<span id="total_vote_up_<?php echo $id; ?>">
<span id="total_vote_down_<?php echo $id; ?>"> 
```

要更改的第二件事是触发事件的链接的 ID。你可以让它的 id 类似于一个 span 必须在没有 JSON 的情况下轻松更改 span 的内容。

```
<a class="vote" name="up" id="vote_up_<?php echo $id; ?>"...>
<a class="vote" name="down" id="vote_down_<?php echo $id; ?>"...> 
```

如您所见，ID 是相似的。这允许您执行以下操作来更改跨度内容：

```
success: function(data) { $('#total_' + $(this).attr("id")). text(data); } 
```

基本上，它将获取链接的 id（例如`vote_up_123`）并将总票数放入 id 为 的 span 中`total_vote_up_123`。

# jsf - 在单击命令按钮时重新加载使用 CRUD 生成的 jsf 数据表

> ID：14997579
> 
> 赞同：0
> 
> 时间：2013-02-21T08:24:23.380
> 
> 标签：jsf

我的 jsf 页面

```
<h:form>
    <h:dataTable id="btable" value="#{ballController.items}" var="item">
         <h:column>
             <h:outputText value="#{item.id}"/>
         </h:column>
         <h:column>
             <h:outputText value="#{item.bname}"/>
         </h:column>
    </h:dataTable>

    <h:commandButton action="#{ballCOntroller.items}" value="test">
          <f:ajax execute="@form" render="btable" />
    </h:commandButton> 
</h:form> 
```

在我的控制器中，此方法由 ballController.items 调用

```
public DataModel getItems() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;
} 
```

但是在单击按钮时，它会给我一个错误消息：

> serverError：classjavax.faces.el.MethodNotFoundException /app/ball/index.xhtml @40,101 action="#{ballController.items}"：找不到方法：ballController@a7150b6.items()

我的目标是在不刷新整个页面的情况下单击命令按钮重新加载数据表。

*已编辑

我的整个 bean 代码

```
@ManagedBean(name = "ballController")
@ViewScoped
public class ballController implements Serializable {

    private ball current;
    private DataModel items = null;
    @EJB
    private ballFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ballController() {
    }

    public ball getSelected() {
        if (current == null) {
            current = new ball();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ballFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {
                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new ball();
        selectedItemIndex = -1;
        return "index";
    }

    public String create() {
        try {

            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballCreated"));
            return prepareCreate();
//            return null;
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;

    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), true);
    }

    @FacesConverter(forClass = ball.class)
    public static class ballControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ballController controller = (ballController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "ballController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof ball) {
                ball o = (ball) object;
                return getStringKey(o.getId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + ball.class.getName());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:33:26.160

要重新加载表，您只需要使用`<f:ajax render="btable" />`

```
<h:commandButton value="test">
      <f:ajax render="btable" />
</h:commandButton> 
```

但是要执行一些操作，例如向表中添加一些数据，您需要将按钮指向一个正确的方法

```
<h:commandButton value="test" action="#{ballController.addItem}"">
      <f:ajax render="btable" />
</h:commandButton> 

public void addItem() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    items.getWrappedData().add(/*something like new MyObject("one","two")*/);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:29:38.020

```
serverError: classjavax.faces.el.MethodNotFoundException /app/ball/index.xhtml @40,101 action="#{ballController.items}": Method not found: ballController@a7150b6.items() 
```

发生是因为您试图以`getItems`不正确的方式访问。

将您的 bean 代码更新为：

```
public DataModel items() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;
} 
```

否则将您的 facelet 动作 EL 表达式更改为`action="#{ballCOntroller.getItems}"`.

**编辑**

您可以更新您`List`的：

```
public class DataTableBean implements Serializable {

    List<String> dataModelList = new ArrayList<DataModel>();

    public List<DataModel> getDataModelList() {
        return dataTableList;
    }

    public void setDataModelList(List<String> dataModelList) {
         this.dataTableList = dataTableList;
    }

    public void addItems(){

        List<DataModel> tempList = getPagination().createPageDataModel(); // Returns a list of type `List<DataModel>`.

        dataModelList.addAll(tempList);

    }
} 
```

# magento - Magento 1.7：致命错误 getBackend()

> ID：14997580
> 
> 赞同：0
> 
> 时间：2013-02-21T08:24:23.770
> 
> 标签：magento, filter, reindex

升级到 Magento 1.7 后，我在自定义目录搜索和自定义相关产品中收到此错误：

> 致命错误：在第 816 行的 \src\app\code\core\Mage\Eav\Model\Entity\Abstract.php 中的非对象上调用成员函数 getBackend()

当文章（后端或导入）中的某些内容发生更改并且未重新索引产品平面表时，会发生此错误。（已激活平桌使用）。在相关文章模块中，我发现

> $related_product_collection->addAttributeToFilter('store_destination', array('eq' => 0));

导致一些问题。调试这个的一个困难是我没有得到错误堆栈跟踪，只有错误本身。

有人知道为什么会出现这个错误，以及如何解决这个问题？（也许是获取堆栈跟踪的提示？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:42:13.020

`store_destination`通常在您的产品集合 sql 中不存在目的地时发生。
像这样检查你的sql：

```
echo $related_product_collection->getSelect()->__toString() 
```

# version-control - 实体框架 NuGet 包不受源代码控制/在 TFS 中？

> ID：14997581
> 
> 赞同：3
> 
> 时间：2013-02-21T08:24:24.573
> 
> 标签：version-control, tfs, visual-studio-2012

我将我的解决方案（使用实体框架）映射到一台新 PC 上。该解决方案报告编译错误，因为找不到 EntityFramework.dll。深入挖掘似乎 TFS 仅将 packages/repositories.config 文件存储在源代码管理中。我无法重新添加实体框架，因为 VS2012 报告它已安装（绿色勾号）。

解决这个问题的正常过程是什么？这是源代码控制和 NuGet 包的更广泛问题吗？我应该只将 DLL 添加到源代码管理吗？

仅供参考，`HintPath`该项目是：..\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll 当然不存在。

我目前的解决方法是破解“packages.config”以删除 EF 项目，然后返回 NuGet 对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:20:45.127

如果您右键单击您的解决方案，您应该可以选择“启用 NuGet 包还原” - 这应该可以解决您的问题。

您可能还需要右键单击您的解决方案并进入“管理 nuget 包等...” - 它可能会为您提供恢复丢失包的选项。

# javascript - 从javascript获取文件

> ID：14997583
> 
> 赞同：1
> 
> 时间：2013-02-21T08:24:33.500
> 
> 标签：javascript, file, hyperlink

我对js不是很熟悉，现在我需要做一些对我来说很重要的事情，但我真的不知道该怎么做。我想在我的网站中包含谷歌翻译 api，但我需要在他们的 js 文件中更改一些代码。我在本地主机上有 element.js 文件：

```
(function () {
  var d = window,
    e = document,
    f = ".",
    g = "UTF-8",
    h = "complete",
    k = "head",
    l = "link",
    m = "script",
    n = "stylesheet",
    p = "text/css",
    q = "text/javascript";
  Math.random();

  function r(b) {
    var a = e.getElementsByTagName(k)[0];
    a || (a = e.body.parentNode.appendChild(e.createElement(k)));
    a.appendChild(b)
  }

  function _loadJs(b) {
    var a = e.createElement(m);
    a.type = q;
    a.charset = g;
    a.src = b;
    r(a)
  }

  function _loadCss(b) {
    var a = e.createElement(l);
    a.type = p;
    a.rel = n;
    a.charset = g;
    a.href = b;
    r(a)
  }

  function _isNS(b) {
    b = b.split(f);
    for (var a = d, c = 0; c < b.length; ++c) if (!(a = a[b[c]])) return !1;
    return !0
  }

  function _setupNS(b) {
    b = b.split(f);
    for (var a = d, c = 0; c < b.length; ++c) a = a[b[c]] || (a[b[c]] = {});
    return a
  }
  d.addEventListener && "undefined" == typeof e.readyState && d.addEventListener("DOMContentLoaded",

  function () {
    e.readyState = h
  }, !1);
  if (_isNS('google.translate.Element')) {
    return
  }
  var c = _setupNS('google.translate._const');
  c._cl = 'en';
  c._cuc = 'googleSectionalElementInit';
  c._cac = '';
  c._cam = '';
  var h = 'translate.googleapis.com';
  var b = (window.location.protocol == 'https:' ? 'https://' : 'http://') + h;
  c._pah = h;
  c._pbi = b + '/translate_static/img/te_bk.gif';
  c._pci = b + '/translate_static/img/te_ctrl3.gif';
  c._phf = h + '/translate_static/js/element/hrs.swf';
  c._pli = b + '/translate_static/img/loading.gif';
  c._plla = h + '/translate_a/l';
  c._pmi = b + '/translate_static/img/mini_google.png';
  c._ps = b + '/translate_static/css/sectionalelement.css';
  c._puh = 'translate.google.com';
  _loadCss(c._ps);
  _loadJs(b + '/translate_static/js/element/main_se.js');
})(); 
```

（如果它很重要，从网页链接到这个文件是 "element.js?cb=googleSectionalElementInit&ug=section&hl=en" ）

而且我还需要在本地主机上获取 main_se.js（文件中的最后一个链接），但我不知道如何将 element.js 中的链接更改为该文件以使其成为本地文件。我需要它，因为我必须替换此文件中的一些 html 标签才能使 api 为我正常工作。

希望有人会建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T11:36:35.350

如果我理解正确，`elements.js`会生成一个带有指向的`<script`标签，并且您希望它指向.`src``translate.googleapi.com``localhost`

在这种情况下，答案很简单，只需按`b+`原样删除即可`b`，`http://translate.googlapi.com`您将获得以下脚本标签

`<script src="/transalte_static/js/element/main_se.js"></script>`

您现在要做的就是确保从该路径返回正确的文件（您的本地主机副本）。

需要帮助请叫我。

# c++ - 64 位 libjingle 无法解析登录 XML 并出现 expat 错误：ERROR_INVALID_TOKEN

> ID：14997586
> 
> 赞同：3
> 
> 时间：2013-02-21T08:24:52.973
> 
> 标签：c++, xml, xmpp, libjingle, expat-parser

只有在尝试在**64-bit**下运行我的登录代码时，我才会无法登录[talk.google.com](http://www.google.com/talk/)进行初始测试。32位工作正常。

启用日志记录宏和 siginput 日志记录后，我可以看到它失败的 XML 是这样的：

```
<stream:stream from="gmail.com" id="3D9A4487B8514DE2" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">\232\231\377 
```

在 expat 内部，我可以看到有人`XML_ERROR_INVALID_TOKEN`被抛出，但我不太确定从那里去哪里。有时它可以进行实际登录，但不久后就死了。它似乎是相对随机的，但总是在前 10 个响应内死亡。我认识到最后的垃圾数据可能是导致无效令牌的原因，但不确定是什么原因造成的。

我最初的想法是切换到**64 位**(??) 时出现编码问题，但老实说，我只是不知道什么会导致发生这种情况。

以下是 libjingle 死亡的日志中的一个附加示例片段：

```
137[000:568] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Thu Feb 21 00:01:31 2013
[000:568]    \332
[000:568]    <iq id="2" type="result">
[000:568]      <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
[000:568]        <jid>
[000:568]          snip@gmail.com/CD6FF
[000:568]        </jid>
[000:568]      </bind>
[000:568]    </iq>
<iq id="2" type="result"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><jid>snip@gmail.com/CD6FF</jid></bind></iq>x\332Mhanism>X-OAUTH2</mechanism></mechanisms></stream:features>p 
```

还有一个：

```
[000:217]    <stream:stream from="gmail.com" id="2462F624C942" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
<stream:stream from="gmail.com" id="246E4B24C942" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">\225\231\377 
```

其他：

```
139[000:178] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Thu Feb 21 00:20:52 2013
[000:178]    <stream:stream from="gmail.com" id="B15C99514B664586" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
<stream:stream from="gmail.com" id="B15C99514B664586" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">\366\231\377 
```

其他：

```
52[000:243] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Thu Feb 21 00:23:44 2013
[000:243]    Q
[000:243]    <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
<success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>\261xml:ns:xmpp-sasl"><mechanism>PLAIN</mechanism><mechanism>X-GOOGLE-TOKEN</mechanism><mechanism>X-OAUTH2</mechanism></mechanisms></stream:features>Q 
```

以前有人遇到过这类问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:32:00.400

假设`\ddd`序列表示八进制数，您的流包含无效 utf-8 中的代码点，这可能是 xml 数据流的默认预期编码。

在将内容提供给 xml 解析器之前，您必须用数字实体替换有问题的字节，例如`\231`-> `&#x99;`。

另一种选择可能是在您的 xml 数据流前面加上一个声明一些 8 位字符集的 xml 序言，例如。`<?xml version="1.0" encoding="iso-8859-1" ?>`.

希望它有帮助，问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:50:37.747

Looks like this was a problem with the openssl 64 bit build I was using. No idea what was wrong with the build, but all I had to do was switch to the libssl.0.9.8, and libcrypto.0.9.8 dylib versions and everything works great.

Hopefully, this will help others diagnose strange junk in SSL interactions.

# sql-server-2008 - SQL Server 2008中存储过程的参数超过8000个字符怎么解决

> ID：14997587
> 
> 赞同：-2
> 
> 时间：2013-02-21T08:24:59.427
> 
> 标签：sql-server-2008

```
Create Proc GetProductDetails
(
 @ProductId varchar(max)
)
as
begin
select ComplexId from ComplexMaster where ProductId in(@ProductId)
end 
```

> @ProductId 参数值 '1,2,3,4,5........13524'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:59:32.907

由于您似乎正在使用参数来传递值列表，因此您可能需要考虑切换到[使用表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx "使用表值参数（数据库引擎）")而不是`varchar`.

[创建](http://msdn.microsoft.com/en-us/library/ms175007.aspx "创建类型 (Transact-SQL)")一个[表值类型](http://msdn.microsoft.com/en-us/library/ms175010.aspx "表 (Transact-SQL)")：

```
CREATE TYPE IdListType AS TABLE (Id int); 
```

将参数定义为该类型（注意必要的 READONLY 关键字）：

```
CREATE PROCEDURE GetProductDetails
(
  @ProductIds IdListType READONLY
)
... 
```

从参数中读取值与读取表变量相同。一个例子：

```
SELECT ComplexId 
FROM ComplexMaster
WHERE ProductId IN (SELECT Id FROM @ProductIds)
; 
```

# javascript - 计算2个坐标之间的距离

> ID：14997589
> 
> 赞同：0
> 
> 时间：2013-02-21T08:25:04.537
> 
> 标签：javascript, coordinates

我试图找到一种使用 JavaScript 来计算两个坐标之间的距离的方法，以公里为单位，到小数点后一位，特别是使用标准的谷歌地图坐标格式：[-33.959771, 18.484708] 而不是这个使用的[公式](http://www.movable-type.co.uk/scripts/latlong.html)UTM 格式。

谢谢您的帮助！

# javascript - 我想绘制一些点（A、B、C、D、E）并将所有这些点链接到自定义地图中？

> ID：14997594
> 
> 赞同：0
> 
> 时间：2013-02-21T08:25:11.663
> 
> 标签：javascript, html

假设我有一组点。我如何在自定义地图上绘制这些点（我自己制作）并一起喜欢它们？ ![在此处输入图像描述](../Images/95ed57ab2373fe4b1062eb92b04c6747.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:40:05.937

假设您的地图是您使用 HTML5 Canvas 构建的。您可以使用简单的画布库将地图定义为对象。现在我也在考虑将画布元素本身划分为网格，因此您可以相对于该网格定位所有对象（如地图，地图上的各个点）。在适当的位置获得所有位置后，您需要将要分组的常见对象与标志相关联，例如属性组与键“喜欢”或“不喜欢”。现在，当您的用户单击任何对象以喜欢它时，该函数会在其他对象上搜索类似的标志并将它们也切换到“喜欢”状态。我希望这是你所期待的？如果您需要代码，请给我们一个指向您的代码的小提琴链接。

# gradle - 调试 Gradle 的并行模式

> ID：14997595
> 
> 赞同：3
> 
> 时间：2013-02-21T08:25:11.453
> 
> 标签：gradle

我们正在为我们非常庞大和复杂的企业应用程序尝试 Gradle。我们正在使用多项目构建结构，并且对 Gradle 的并行执行功能感到非常兴奋。

我们的代码库是在领域层中构造的，如下所示：

UI 模块 (~20) -> 共享 ui -> 域 -> dao -> 框架

依赖关系是单向的，构建发生自下而上。

不幸的是，我们没有看到我们的构建时间有很大的提升。它与我们之前使用 ant 得到的几乎相同。

查看并行模式下任务的执行顺序，几乎没有什么不对劲的地方。我们的期望是 Gradle 在构建核心层时最初会按顺序运行任务。因此，在它组装了框架、dao、域和共享 ui 之后，它应该并行踢其他所有东西。

但是我们看到的执行顺序有点像这样：

framework.assemble -> dao.assemble -> domain.assemble -> shared.ui.assemble -> 其他 UI modules.assmble（并行）-> war -> 其他 UI.check + shared.ui.check + dao.check （并行）-> domain.check -> framework.check

当它按顺序而不是并行运行域和框架检查时，瓶颈处于最后。这两个模块对我们来说是最大的模块，大约有 12k 单元测试，它们大约需要 4 分钟才能运行。

我们花了很多时间使用 gradle 任务查看依赖关系——这些模块的所有和测试任务都是完全独立的，没有什么可以阻止它们的执行。

我们想知道这是否是一个已知问题，或者是否有办法在 Gradle 中启用一些额外的调试，以便更深入地了解 Gradle 如何确定并行模式下的执行顺序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:47:34.803

从 Gradle 1.4 开始，并行任务的执行（有意）受到了一些限制。特别是，在任何时候执行的任务集都不会包含属于同一个项目的两个任务。随着时间的推移，这将得到改善。`--debug`除了从日志中获得的信息（例如，使用）之外，我不知道有任何调试帮助。

请注意，并行测试执行是一个单独的功能。如果您在同一个项目中有很多测试，`test.maxParallelForks = x`x > 1 应该会显示出明显的加速。x 的值最好通过实验确定。一个好的起点是机器上的物理内核数（例如`Runtime.getRuntime().availableProcessors() / 2`）。

# python - 导入某些模块会抑制 Flask 控制台输出

> ID：14997599
> 
> 赞同：2
> 
> 时间：2013-02-21T08:25:31.587
> 
> 标签：python, flask, output, eyed3

我正在用 Flask 编写一个应用程序，它由两个文件组成`app.py`，`tags.py`. `app.py`进口`tags.py`，其中又包含`from eyed3 import load`. [Eyed3](http://eyed3.nicfit.net/index.html)是一个 Python 模块，用于从文件中提取 mp3 标签。由于某种原因， Eyed3 的导入会抑制 Flask 的控制台输出。通常在使用返回值启动 Flask 时`python app.py`：

```
* Running on http://127.0.0.1:17000/ 
```

导入 Eyed3 时，此行不会出现。不管是`import eyed3`or `from eyed3 import load`，或者 import 是 in `app.py`or `tags.py`，还是 Flask 有调试模式开/关都没有关系。我什至试着跑

```
import sys
sys.stdout = sys.__stdout__
sys.stderr = sys.__stderr__ 
```

只是在导入之后或之前`app.run()`，没有成功。为什么以及如何仅导入模块隐藏控制台输出？我怎样才能恢复它？

**编辑：**导入顺序无关紧要。没有任何反应，如果我在 Flask 之前导入 Eyed3，错误仍然存​​在。它与[这行代码有关](https://bitbucket.org/nicfit/eyed3/src/97905ecfcd6c8f8df0349582b90258b154e583b5/src/eyed3/utils/log.py?at=default#cl-54)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:24:59.537

我敢打赌它与 EyeD3 在此文件中所做的日志记录操作有关：[https ://bitbucket.org/nicfit/eyed3/src/97905ecfcd6c8f8df0349582b90258b154e583b5/src/eyed3/utils/log.py?at =默认](https://bitbucket.org/nicfit/eyed3/src/97905ecfcd6c8f8df0349582b90258b154e583b5/src/eyed3/utils/log.py?at=default)

# activemq - 带有电子邮件警报的 ActiveMQ 监控工具

> ID：14997602
> 
> 赞同：1
> 
> 时间：2013-02-21T08:25:44.657
> 
> 标签：activemq, monitor

我想知道可用于监控 ActiveMQ 性能的开源工具，例如

1.  是否能够接受新消息
2.  有没有堆积的队列
3.  来自队列的消息是否正在处理

如果上述任何一项不起作用，请向收件人发送电子邮件警报。

仅供参考，我们遇到了 ActiveMQ 的问题，它不会接受任何传入的新消息，但就像启动并运行一样，没有任何问题。

我正在使用 Web 控制台查看队列状态，但它不会表示它是否能够接受新消息。也没有电子邮件警报机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:45:48.150

这不是现成的解决方案，但它可能是您构建自己的工具的起点。您可以设置一个后台进程来监控队列的运行状况，然后在超出您定义的阈值设置时定义您自己的自定义操作。

[解析统计信息以检查队列运行状况](http://austgate.co.uk/2013/01/parsing-activemq-statistics-to-check-on-queue-health/)

[一些示例监控脚本](https://github.com/ripienaar/monitoring-scripts/tree/master/activemq)

# sql - PostgreSQL：count() 还是保留一个计数器？

> ID：14997603
> 
> 赞同：4
> 
> 时间：2013-02-21T08:25:46.000
> 
> 标签：sql, postgresql

我有两个处于一对多关系的表。假设对于 table 中的每一行， table`foo`中可以有 0 或更多行`bar`引用 中的行`foo`。

客户想知道 中的所有行在 中`bar`引用了多少行。`foo``foo`

我可以通过以下查询完成此操作：

```
SELECT count(bar_id) FROM bar WHERE bar.foo_id = foo.foo_id; 
```

`foo`但是，如果桌子`bar`很大怎么办？Say`foo`有 100 万行，并且`bar`有 1000 万行。假设 99% 的行引用它的行`foo`数少于 1,000行。`bar`假设客户通常`foo`一次要求大约 100 行。

我应该使用带有外键索引的朴素 count() 查询，还是保留一个计数器更好？甚至可以保留一个柜台吗？通过使用触发器更新计数器的原子增量和减量`bar`，我相信这是可能的，但我可能是错的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:38:54.563

也许与直觉相反，您可能会发现简单的`count`方法更快，除非您的工作量非常偏向于读取。

这样做的原因是计数器表的效果将是序列化更新，因此`foo`在任何给定时间只有一个更新给定的事务可以进行。这是因为更新计数器的触发器的更新将锁定`foo`计数器表中的条目，并且在事务回滚或提交之前不会释放它。

更糟糕的是，如果您的事务影响多个事务`foo`并且另一个事务也影响，那么您很有可能由于死锁而中止其中一个事务。

坚持一个简单的计数，直到你有充分的理由改变它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T08:38:25.063

索引的好处在于它们为查询操作提供了对数复杂度。因此，对于`10*10^6`行，索引只需要`ln(10*10^6)=16.1`进行比较即可找到一个特定的 id。让它有 1 亿行，你只需要多做 2 到 3 次比较。简而言之：索引并不太关心表的大小。

当然，您仍然可以使用存储的计数器归档一些性能提升。这是一个典型的权衡。维护计数器将使插入和删除`bar`变得更加昂贵，并使您的计数查询更便宜。

因此，如果您的表很少更改并且查询运行频繁（例如，每小时数千次），则使用存储计数器过程可能会真正获得性能。但是，在大多数情况下，我会说选择索引列，让数据库为您完成其余的工作。

# vb.net - 如何解决这个问题。进程无法访问文件

> ID：14997606
> 
> 赞同：2
> 
> 时间：2013-02-21T08:25:59.403
> 
> 标签：vb.net

该进程无法访问文件“F:\copy back up\system\HRM 2-5-2013\HRM\HRM\lanbased.txt”，因为它正被另一个进程使用。这是我在 sub main 中的代码

```
Public localhost As String
Public username As String
Public port As String
Public database As String
Public conn As New MySqlConnection
Public NAME1 As String = "F:\copy back up\system\HRM 2-5-2013\HRM\HRM\lanbased.txt"

Public Sub main()
    Dim frm As New Form1
    Dim frm1 As New create

    If System.IO.File.Exists(NAME1) = True Then
        Try
            Dim objReader As New System.IO.StreamReader(NAME1)

            localhost = objReader.ReadLine() & vbNewLine
            username = objReader.ReadLine() & vbNewLine
            port = objReader.ReadLine() & vbNewLine
            database = objReader.ReadLine() & vbNewLine
            conn.ConnectionString = "server=" & Trim(localhost) & ";user id=" & Trim(username) & "; password=" & Trim(port) & "; database=" & Trim(database) & ""
            conn.Open()

            Application.Run(New Form1())
        Catch ex As Exception
            MsgBox("Unable  to connect to database", vbCritical)

            Application.Run(New create())
        End Try
    End If
    Exit Sub
End Sub 
```

这是我创建表单中的代码。当文件被另一个进程使用时，如何访问该文件？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim FILE_NAME As String = "F:\copy back up\system\HRM 2-5-2013\HRM\HRM\lanbased.txt"

    If TextBox1.Text = Nothing Or TextBox2.Text = Nothing Or TextBox3.Text = Nothing Or TextBox4.Text = Nothing Then
        MsgBox("fill up mo pa ngot")

    ElseIf System.IO.File.Exists(FILE_NAME) = True Then

        Dim objWriter As New System.IO.StreamWriter(FILE_NAME)

        objWriter.Write(TextBox1.Text + vbCrLf)
        objWriter.Write(TextBox2.Text + vbCrLf)
        objWriter.Write(TextBox3.Text + vbCrLf)
        objWriter.Write(TextBox4.Text + vbCrLf)
        objWriter.Close()

        TextBox1.Clear()
        TextBox2.Clear()
        TextBox3.Clear()
        TextBox4.Clear()

    ElseIf conn.State = True Then

        MsgBox("maka connect naka")

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:45:57.083

首先你打开你的文件在这里阅读：

```
Dim objReader As New System.IO.StreamReader(NAME1)    //1st open 
```

其次，您调用 form1 ：`Application.Run(New Form1())`

在该表格中，您有： `Dim objWriter As New System.IO.StreamWriter(FILE_NAME) //2nd open`

但是请稍等`you didn't close your file`，这样您就无法第二次打开它进行写作。

所以你需要`before calling create form 1` 像这样关闭文件`objReader.close()`

```
 conn.Open()
        objReader.close()    <----- this one
        Application.Run(New Form1()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:38:28.423

看起来您需要在打开新表单之前关闭您的 streamReader：

```
objReader.Close() 
```

这将释放文件。

# android-ndk - JavaCPP 与 Android NDK

> ID：14997608
> 
> 赞同：1
> 
> 时间：2013-02-21T08:26:12.367
> 
> 标签：android-ndk, javacpp

我正在尝试使用 JavaCPP 并尝试在 Eclipse 中构建项目。但是，`java.lang.UnsatisfiedLinkError`当我尝试从我的 Java 类调用 C++ 函数时会遇到这种情况。

我也试过命令

> java -jar libs/javacpp.jar -classpath bin/ -classpath bin/classes/ -properties android-arm -Dplatform.root= -Dcompiler.path= -d libs/armeabi/

JavaCPP 项目附带的 README 文件中提到的空白处填写了适当的值。这些事情到现在都是徒劳的。如果我遗漏了一些非常明显或重要的东西，请告诉我。即使`java.library.path`已设置为适当的值，命令行也不会读取该值。

谢谢

# android - Android：定期发送数据

> ID：14997611
> 
> 赞同：0
> 
> 时间：2013-02-21T08:26:28.677
> 
> 标签：android

`SeekBar`每当我滑动使用 SeekBar 的方法时，我都尝试通过蓝牙发送数据，`onProgressChanged()`并且一切正常。

当我尝试使用加速度计的`onSensorChanged()`方法做同样的事情时，即当我在`onSensorChanged()`方法中编写传输代码时，没有日期被写入蓝牙

我猜加速度计的`onSensorChanged()`方法被调用太频繁（比如每秒 1000 次）。我想降低将数据写入蓝牙的速度。

有没有办法定期传输数据？例如每 3 毫秒读取 1 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:41:51.993

我很确定您可以设置传感器的灵敏度，或者在再次调用侦听器之前进行最小更改（有点像找到您的位置）。

如果失败，您可以随时根据信息自行检查以更改最小数量，或使用系统时间计算与您上次允许写入数据的时间之间的差异，并在任何时候检查您想要延迟。

# javascript - 带有 {{#each}} 的 Javascript 表，过滤不起作用

> ID：14997619
> 
> 赞同：2
> 
> 时间：2013-02-21T08:26:57.233
> 
> 标签：javascript, meteor

我有一张表，我想在其中制作过滤功能。

该表显示了流星通过车把收集的记录`{{#each}}`。

代码如下所示：

```
 keyup #filterbox': function(event){

      var table = document.getElementById('example');

      var len = table.rows.length;

      for(var i=1; i< table.rows.length; i++){

        var cellText = table.rows[i].cells[1].innerHTML.toLowerCase();

        if(!(cellText.match(document.getElementById('filterbox').value.toLowerCase()))){

            table.rows[i].style.display = "none";
        }
        else{
            table.rows[i].style.display = "block";
        }               
      }
   }; 
```

当我输入带有预定义单元格的匹配字母时，此代码有效。

但是当我清除输入框时，整个表格都会折叠起来。只有在我刷新页面后它才能正确显示。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:30:11.757

尝试

`table.rows[i].style.display = "table-row";`

代替

`table.rows[i].style.display = "block";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:47:18.807

你也可以看看几个插件来处理表格排序、过滤和分页。从头开始做很多工作。

*   Tinytable [http://www.scriptiny.com/2009/03/table-sorter/](http://www.scriptiny.com/2009/03/table-sorter/) - 关于陨石`teeble`
*   数据表 ( [http://www.datatables.net/](http://www.datatables.net/) ) - 关于陨石`datatables`

[Meteorite](https://github.com/oortcloud/meteorite)是一个非官方的社区包管理器。

# android - Android 中的活动日历

> ID：14997621
> 
> 赞同：3
> 
> 时间：2013-02-21T08:27:04.660
> 
> 标签：android, events, calendar, android-4.2-jelly-bean

我是 Android 开发新手。我正在使用以下代码在我的 Android 应用程序中添加事件日历。

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

但出现以下错误：

```
02-21 12:33:38.262: E/AndroidRuntime(404): FATAL EXCEPTION: main
02-21 12:33:38.262: E/AndroidRuntime(404): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.EDIT typ=vnd.android.cursor.item/event (has extras) }
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.app.Activity.startActivityForResult(Activity.java:2817)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.app.Activity.startActivity(Activity.java:2923)
02-21 12:33:38.262: E/AndroidRuntime(404):  at com.infrasoft.elara.HomeActivity$1.onClick(HomeActivity.java:36)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.view.View.performClick(View.java:2408)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.view.View$PerformClick.run(View.java:8816)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.os.Handler.handleCallback(Handler.java:587)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.os.Looper.loop(Looper.java:123)
02-21 12:33:38.262: E/AndroidRuntime(404):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 12:33:38.262: E/AndroidRuntime(404):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 12:33:38.262: E/AndroidRuntime(404):  at java.lang.reflect.Method.invoke(Method.java:521)
02-21 12:33:38.262: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 12:33:38.262: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 12:33:38.262: E/AndroidRuntime(404):  at dalvik.system.NativeStart.main(Native Method) 
```

AndroidManifest.xml：

```
<uses-permission android:name="android.permission.WRITE_CALENDAR" />
<uses-permission android:name="android.permission.READ_CALENDAR" />

<activity
    android:name=".CalendarActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.INSERT" />
        <category android:name="android.intent.category.APP_CALENDAR" />
        <data android:mimeType="vnd.android.cursor.item/event" />
    </intent-filter>
</activity> 
```

请告诉我有什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:38:11.140

**已编辑**

我相信您正在尝试在模拟器上运行它。默认情况下，模拟器上没有安装日历应用程序。所以没有什么可以处理这种类型的意图。它应该在具有日历事件的设备上工作。尝试在安装了本机 android 日历应用程序的物理设备上运行它。它会起作用的。

对于模拟器，您可以执行以下操作：

1）下载Calendar.apk（原生安卓日历）

2) 使用以下命令安装它 wia adb ( [http://developer.android.com/guide/developing/tools/adb.html](http://developer.android.com/guide/developing/tools/adb.html) )：

```
adb -e install Calendar.apk 
```

3）然后在安装日历后尝试运行您的应用程序。

您应该在 manifest.xml 中声明以下权限：

```
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

# android - 每秒最多 1000 个项目的 ListView 实时数据集会减慢一切

> ID：14997624
> 
> 赞同：0
> 
> 时间：2013-02-21T08:27:21.850
> 
> 标签：android, android-listview, android-arrayadapter, real-time-data

我有一个 ListView 来观察汽车中不同电子设备之间的消息。对于某些部分，我每秒只能获得几个数据集，但在其他部分可能会达到 1000 个。

ListView 只是我的应用程序的一部分，另一部分可以很好地处理大量数据。

我使用带有以下 getView 的自定义 ArrayAdapter：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    itemp = items.get(position);
    if (convertView == null) {
        tvs = new TextView[7];
        convertView = LayoutInflater.from(mycontext).inflate(container, parent,false);
        tvs[0] = (TextView) convertView.findViewById(R.id.rd_l_c_messzeit);
        tvs[1] = (TextView) convertView.findViewById(R.id.rd_l_c_frameid);
        tvs[2] = (TextView) convertView.findViewById(R.id.rd_l_c_can);
        tvs[3] = (TextView) convertView.findViewById(R.id.rd_l_c_dlc);
        tvs[4] = (TextView) convertView.findViewById(R.id.rd_l_c_typ);
        tvs[5] = (TextView) convertView.findViewById(R.id.rd_l_c_data);
        tvs[6] = (TextView) convertView.findViewById(R.id.rd_l_c_datum);

        convertView.setTag(tvs);
        convertView.setEnabled(false);
    }else {
        tvs=(TextView[]) convertView.getTag();
    }
    if (itemp != null) {
        strings = itemp.getStrings();
        if (container == R.layout.rawdata_list_container) {

            for (int i = 0; i < 7; i++) {
                if (tvs[i] != null) {
                    tvs[i].setText(strings[i]);
                }
            }
            tvs[3].setText(strings[3].substring(1));

        }

    }
    return convertView;
} 
```

我的 Rowlayout 只有 7 个 Textview，所以我的 Holder 是 TextView

StringArray 的内容是在后台线程中定义的，这些线程经过测试并可以顺利运行。

调用 1000 次 notifyDataSetChanged() 会导致完全停止并且我的 UI 没有响应，因此我在后台线程中缓冲 DataItems 并每秒仅更新 5 次真实适配器。

```
Runnable updaterun=new Runnable(){

    @Override
    public void run()
    {
        for(RawdataItem rdi:templist)
        {
            tracelist.add(1,rdi);
            if(tracelist.size()>500)
            {
                tracelist.remove(500);
            }

        }

        for(RawdataItem rdi:templistlight)
        {
            count = 0;
            newtrl=true;
            for (RawdataItem r : tracelistlight) {
                if (rdi.lid == r.lid) {
                    tracelistlight.set(count,rdi);
                    newtrl=false;
                    break;
                }
                count++;
            }
            if(newtrl) {
                tracelistlight.add(rdi);
                    Collections.sort(tracelistlight);           
            }
        }
        update_rdl();
        templist.clear();
        templistlight.clear();
        updatehandler.postDelayed(updaterun, 200);
    }
}; 
```

tracelist 是显示所有项目，而 light 列表是仅显示每个 id 一次 update_rdl 只为两个列表调用 notifidatasetchanged；

我会很高兴你能给我的任何帮助。

# c# - C#中的单元测试如何？

> ID：14997625
> 
> 赞同：0
> 
> 时间：2013-02-21T08:27:22.933
> 
> 标签：c#, unit-testing

我是 C# 单元测试领域的新手。

我有一段代码在我的`Main.cs`

```
public static string Generate(int length)
{
    char[] chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray();
    string password = string.Empty;
    Random random = new Random();

    for (int i = 0; i < length; i++)
    {
        int x = random.Next(1, chars.Length);

        if (!password.Contains(chars.GetValue(x).ToString()))
            password += chars.GetValue(x);
        else
            i--;
    }
    return password;
} 
```

现在我不知道如何用单元测试来测试这段代码有人能给我一个例子吗？

**编辑：**

我做了一个测试代码

```
 [TestMethod]
    [Timeout(1000)]
    public void RenderingPasswordShouldHaveMaximumSize()
    {
        var amountOfCharacters = Int32.MaxValue;
        var generator = new PasswordGenerator();
        var target = generator.Generate(amountOfCharacters);

        // TODO
        Assert.Fail("This method should throw an exception if you try to create a password with too many characters");
    } 
```

但它给了我以下错误：消息：测试'RenderingPasswordShouldHaveMaximumSize'超出了执行超时期限，有人可以帮我解决这个问题，最大尺寸为74！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:29:15.597

一个使用[`NUnit`](http://www.nunit.org/). 在这里，我正在测试当我`0`作为参数传递时，什么都不会生成（也许你应该抛出一个`Exception`？）

```
[TextFixture]
public class Tests {

    [Test]
    public void Test_Length0_ReturnsNothing() {
        string result = Generate(0);

        Assert.IsTrue(string.IsNullOrEmpty(result));
    }
} 
```

然后您可以编写类似的测试（例如，确保它包含您想要的字符等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:30:59.250

单元测试的想法是在你的一个小方法中放入一些东西并检查结果是否正常。

Visual Studio 有一个项目模板。还有其他工具，如 NUnit oderXUnit 用于 C# 中的测试

有一个很棒的[复数课程](http://pluralsight.com/training/courses/TableOfContents?courseName=test-first-development-1&highlight=david-starr_tfd-01-m01-introduction%2a10,11!david-starr_tfd-01-m06-isolation%2a2!scott-allen_tfd-writing-unit-tests-i%2a5,9,11#tfd-01-m01-introduction)：

和 Bob 叔叔的网络广播，他在其中演示了测试驱动开发[http://cleancoders.com/codecast/clean-code-episode-6-part-1/show](http://cleancoders.com/codecast/clean-code-episode-6-part-1/show)

另请参阅msdn 上[的“使用单元测试验证代码”](http://msdn.microsoft.com/en-us/library/dd264975.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:42:42.663

单元测试有很多细微差别。我建议您阅读有关单元测试的书“单元测试的艺术：.Net 中的示例”。

在单元测试中描述了很多技术和方法。您还可以在此处找到许多示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:28:45.287

```
var amountOfCharacters = Int32.MaxValue;
var generator = new PasswordGenerator();
var target = generator.Generate(amountOfCharacters); 
```

您正在指定密码应包含的字符数为 2,147,483,647 个字符...

`chars.Length`

您的数组中只有 74 个可能的值。

毫无疑问，它会超时，因为循环需要更长的时间来迭代 22 亿次试图找到数组中的最后几个值。

`for (int i = 0; i < length; i++)`

您的逻辑也发生了变化，因为您没有指定密码的长度，而是您想要执行的迭代次数。

# c# - 字典线程 lambda add

> ID：14997626
> 
> 赞同：1
> 
> 时间：2013-02-21T08:27:23.193
> 
> 标签：c#, multithreading, dictionary, lambda, steambot

我正在尝试管理线程机器人情况。我想将它们添加到字典中以供以后访问（关闭、暂停、传递变量），但`null`即使在机器人启动后我也总是得到它们（`null`变量是`temp_bot`）。

```
private static
Dictionary<string, Bot> BotsOnline = new Dictionary<string, Bot>();
Bot temp_bot;

new Thread(
    () =>
    {
      int crashes = 0;
      while (crashes < 1000)
      {
        try
        {
          temp_bot = new Bot(config, sMessage, ConvertStrDic(offeredItems),
            ConvertStrDic(requestedItems), config.ApiKey,
            (Bot bot, SteamID sid) =>
            {
              return (SteamBot.UserHandler)System.Activator.CreateInstance(
                Type.GetType(bot.BotControlClass), new object[] { bot, sid });
            },
            false);
        }
        catch (Exception e)
        {
          Console.WriteLine("Error With Bot: " + e);
          crashes++;
        }
      }
    }).Start();

//wait for bot to login

while (temp_bot == null || !temp_bot.IsLoggedIn)
{
  Thread.Sleep(1000);
}

//add bot to dictionary

if (temp_bot.IsLoggedIn)
{
  BOTSdictionary.Add(username, temp_bot);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:23:57.880

新线程不知道 temp_bot 对象，因为您需要将它传递给 lambda 表达式。尝试：

```
new Thread(
  (temp_bot) =>
    {
      int crashes = 0;
      while (crashes < 1000)
      {
        try
        {
           temp_bot = new Bot(config, sMessage, ConvertStrDic(offeredItems),
           ConvertStrDic(requestedItems), config.ApiKey,
             (Bot bot, SteamID sid) =>
               {
                 return (SteamBot.UserHandler)System.Activator.CreateInstance(
                 Type.GetType(bot.BotControlClass), new object[] { bot, sid });
               },
             false);
        } 
      catch (Exception e)
      {
        Console.WriteLine("Error With Bot: " + e);
        crashes++;
      }
    }
  }
).Start(); 
```

# mysql - mysql 存储函数 - 在 varchar 中并返回 varchar - 错误：1172

> ID：14997628
> 
> 赞同：2
> 
> 时间：2013-02-21T08:27:29.507
> 
> 标签：mysql

我无法弄清楚我存储的函数出了什么问题。

```
select batch as bach from test where mfg_code = 'BC-7A1-5' group by batch; 
```

当我运行上面的脚本时，我能够按预期获得行数。

但是我无法使用下面的类似脚本：-

```
DELIMITER $$
DROP FUNCTION IF EXISTS `testdata1970_05`.`listbatch` $$
CREATE FUNCTION `listbatch`(mfgnum VARCHAR(24)) RETURNS VARCHAR(10)

BEGIN
DECLARE bach VARCHAR(10);
SELECT batch into bach FROM test WHERE mfg_code = mfgnum group by batch;
RETURN bach;
END $$

DELIMITER ; 
```

它返回错误：

> “错误 1172 (42000)：结果包含多于一行”

下面是我的查询：

```
select listbatch("BC-7A1-5"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:31:31.390

您的错误消息告诉您查询返回了不止一行，并且结果集不能存储在简单的变量中，因为您定义的变量只能保存一个值！

# php - 如何在 php.. 中解析格式错误的 google CSV 文件？

> ID：14997630
> 
> 赞同：0
> 
> 时间：2013-02-21T08:27:32.660
> 
> 标签：php, csv

我厌倦了使用`fgetcsv`函数解析 Google CSV 文件..

这是我的代码：

```
<?php 

    $fp = fopen("google12.csv", 'r');

    $fileHeader = array();
    $firstRow = array();
    $index = 0;
    while (($data = fgetcsv($fp)) !== FALSE && $index != 2)
    {
        if ($index == 0)
            $fileHeader = $data;
        elseif ($index == 1)
            $firstRow = $data;

        $index++;
    }

    fclose($fp);

    $parameter = array("header" => $fileHeader,"firstRow" => $firstRow);

    echo json_encode($parameter);
    exit;

?> 
```

样本格式错误的 CSV 包含

```
"Name,Given Name,Additional Name,Family Name,Yomi Name,Given Name Yomi,Additional Name Yomi,Family Name Yomi,Name Prefix,Name Suffix,Initials,Nickname,Short Name,Maiden Name,Birthday,Gender,Location,Billing Information,Directory Server,Mileage,Occupation,Hobby,Sensitivity,Priority,Subject,Notes,Group Membership,E-mail 1 - Type,E-mail 1 - Value,E-mail 2 - Type,E-mail 2 - Value,E-mail 3 - Type,E-mail 3 - Value,IM 1 - Type,IM 1 - Service,IM 1 - Value,Phone 1 - Type,Phone 1 - Value,Phone 2 - Type,Phone 2 - Value,Phone 3 - Type,Phone 3 - Value,Address 1 - Type,Address 1 - Formatted,Address 1 - Street,Address 1 - City,Address 1 - PO Box,Address 1 - Region,Address 1 - Postal Code,Address 1 - Country,Address 1 - Extended Address,Address 2 - Type,Address 2 - Formatted,Address 2 - Street,Address 2 - City,Address 2 - PO Box,Address 2 - Region,Address 2 - Postal Code,Address 2 - Country,Address 2 - Extended Address,Organization 1 - Type,Organization 1 - Name,Organization 1 - Yomi Name,Organization 1 - Title,Organization 1 - Department,Organization 1 - Symbol,Organization 1 - Location,Organization 1 - Job Description,Relation 1 - Type,Relation 1 - Value,Relation 2 - Type,Relation 2 - Value,Relation 3 - Type,Relation 3 - Value,Relation 4 - Type,Relation 4 - Value,Relation 5 - Type,Relation 5 - Value,Website 1 - Type,Website 1 - Value,Website 2 - Type,Website 2 - Value,Website 3 - Type,Website 3 - Value,Website 4 - Type,Website 4 - Value,Website 5 - Type,Website 5 - Value,Website 6 - Type,Website 6 - Value,Website 7 - Type,Website 7 - Value"
"Alpesh Vaghasiya,Alpesh,,Vaghasiya,,,,,,,,,,,1986-09-16,,,,,,,,,,,,Facebook ::: MobilePhone ::: All ::: Office ::: * My Contacts,* Home,me@alpeshvaghasiya.com,Other,alpesh@artoongames.com,Work,alpeshvaghasiya7@gmail.com,,,,Mobile,9727056565,,,,,Home,""Surat, Gujarat"
"India"",,Surat,,Gujarat,,India,,,,,,,,,,,,The Logica,,CEO,,,,,Sister,Kerali Vaghasia,cousin,Kairav Vaghasia,,,,,,,twitter,http://www.twitter.com/asvaghasiya,website,www.artoonsolutions.com,linkedin,http://www.linkedin.com/in/alpeshvaghasiya,facebook,http://www.facebook.com/alpesh.vaghasiya,Personal Website,http://www.alpeshvaghasiya.com,Profile,http://www.google.com/profiles/106299312931371348975,Portfolio,http://artoonsolutions.com/portfolio"
"Anand Lathigara,Anand,,Lathigara,,,,,,,,,,,,,,,,,,,,,,,Facebook ::: All ::: Office ::: * My Contacts,Home,anand.lathigara@gmail.com,Other,anand_lathigara@yahoo.com ::: shyam_love2001@yahoo.com,* Other,lathigraanand@yahoo.in,,,,Home,9228412087,,,,,Home,""Surat, Gujarat"
"India"",,Surat,,Gujarat,,India,,,,,,,,,,,,SMSBrain.in - Send SMS with Sense!,,Relationship Manager,,,,,sister,Krishna Lathigara,cousin,Soni Hemal Lathigara,brother,Abhay Garathiya,,,,,twitter,http://www.twitter.com/AnandLathigara,website,anandlathigara.blogspot.com,linkedin,http://www.linkedin.com/pub/anand-lathigara/52/747/ab8,facebook,http://www.facebook.com/anand.lathigara,Profile,http://www.google.com/profiles/101670297624502753179,,,," 
```

给定输出：

```
{"header":[null,"\u0000G\u0000i\u0000v\u0000e\u0000n\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000A\u0000d\u0000d\u0000i\u0000t\u0000i\u0000o\u0000n\u0000a\u0000l\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000F\u0000a\u0000m\u0000i\u0000l\u0000y\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000Y\u0000o\u0000m\u0000i\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000G\u0000i\u0000v\u0000e\u0000n\u0000 \u0000N\u0000a\u0000m\u0000e\u0000 \u0000Y\u0000o\u0000m\u0000i\u0000","\u0000A\u0000d\u0000d\u0000i\u0000t\u0000i\u0000o\u0000n\u0000a\u0000l\u0000 \u0000N\u0000a\u0000m\u0000e\u0000 \u0000Y\u0000o\u0000m\u0000i\u0000","\u0000F\u0000a\u0000m\u0000i\u0000l\u0000y\u0000 \u0000N\u0000a\u0000m\u0000e\u0000 \u0000Y\u0000o\u0000m\u0000i\u0000","\u0000N\u0000a\u0000m\u0000e\u0000 \u0000P\u0000r\u0000e\u0000f\u0000i\u0000x\u0000","\u0000N\u0000a\u0000m\u0000e\u0000 \u0000S\u0000u\u0000f\u0000f\u0000i\u0000x\u0000","\u0000I\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000s\u0000","\u0000N\u0000i\u0000c\u0000k\u0000n\u0000a\u0000m\u0000e\u0000","\u0000S\u0000h\u0000o\u0000r\u0000t\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000M\u0000a\u0000i\u0000d\u0000e\u0000n\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000B\u0000i\u0000r\u0000t\u0000h\u0000d\u0000a\u0000y\u0000","\u0000G\u0000e\u0000n\u0000d\u0000e\u0000r\u0000","\u0000L\u0000o\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000","\u0000B\u0000i\u0000l\u0000l\u0000i\u0000n\u0000g\u0000 \u0000I\u0000n\u0000f\u0000o\u0000r\u0000m\u0000a\u0000t\u0000i\u0000o\u0000n\u0000","\u0000D\u0000i\u0000r\u0000e\u0000c\u0000t\u0000o\u0000r\u0000y\u0000 \u0000S\u0000e\u0000r\u0000v\u0000e\u0000r\u0000","\u0000M\u0000i\u0000l\u0000e\u0000a\u0000g\u0000e\u0000","\u0000O\u0000c\u0000c\u0000u\u0000p\u0000a\u0000t\u0000i\u0000o\u0000n\u0000","\u0000H\u0000o\u0000b\u0000b\u0000y\u0000","\u0000S\u0000e\u0000n\u0000s\u0000i\u0000t\u0000i\u0000v\u0000i\u0000t\u0000y\u0000","\u0000P\u0000r\u0000i\u0000o\u0000r\u0000i\u0000t\u0000y\u0000","\u0000S\u0000u\u0000b\u0000j\u0000e\u0000c\u0000t\u0000","\u0000N\u0000o\u0000t\u0000e\u0000s\u0000","\u0000G\u0000r\u0000o\u0000u\u0000p\u0000 \u0000M\u0000e\u0000m\u0000b\u0000e\u0000r\u0000s\u0000h\u0000i\u0000p\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00001\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00002\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00002\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00003\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000E\u0000-\u0000m\u0000a\u0000i\u0000l\u0000 \u00003\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000I\u0000M\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000I\u0000M\u0000 \u00001\u0000 \u0000-\u0000 \u0000S\u0000e\u0000r\u0000v\u0000i\u0000c\u0000e\u0000","\u0000I\u0000M\u0000 \u00001\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00001\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00002\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00002\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00003\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u00003\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000F\u0000o\u0000r\u0000m\u0000a\u0000t\u0000t\u0000e\u0000d\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000S\u0000t\u0000r\u0000e\u0000e\u0000t\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000C\u0000i\u0000t\u0000y\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000P\u0000O\u0000 \u0000B\u0000o\u0000x\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000R\u0000e\u0000g\u0000i\u0000o\u0000n\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000P\u0000o\u0000s\u0000t\u0000a\u0000l\u0000 \u0000C\u0000o\u0000d\u0000e\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000C\u0000o\u0000u\u0000n\u0000t\u0000r\u0000y\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00001\u0000 \u0000-\u0000 \u0000E\u0000x\u0000t\u0000e\u0000n\u0000d\u0000e\u0000d\u0000 \u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000F\u0000o\u0000r\u0000m\u0000a\u0000t\u0000t\u0000e\u0000d\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000S\u0000t\u0000r\u0000e\u0000e\u0000t\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000C\u0000i\u0000t\u0000y\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000P\u0000O\u0000 \u0000B\u0000o\u0000x\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000R\u0000e\u0000g\u0000i\u0000o\u0000n\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000P\u0000o\u0000s\u0000t\u0000a\u0000l\u0000 \u0000C\u0000o\u0000d\u0000e\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000C\u0000o\u0000u\u0000n\u0000t\u0000r\u0000y\u0000","\u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000 \u00002\u0000 \u0000-\u0000 \u0000E\u0000x\u0000t\u0000e\u0000n\u0000d\u0000e\u0000d\u0000 \u0000A\u0000d\u0000d\u0000r\u0000e\u0000s\u0000s\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000Y\u0000o\u0000m\u0000i\u0000 \u0000N\u0000a\u0000m\u0000e\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000i\u0000t\u0000l\u0000e\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000D\u0000e\u0000p\u0000a\u0000r\u0000t\u0000m\u0000e\u0000n\u0000t\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000S\u0000y\u0000m\u0000b\u0000o\u0000l\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000L\u0000o\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000","\u0000O\u0000r\u0000g\u0000a\u0000n\u0000i\u0000z\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000J\u0000o\u0000b\u0000 \u0000D\u0000e\u0000s\u0000c\u0000r\u0000i\u0000p\u0000t\u0000i\u0000o\u0000n\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00001\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00002\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00002\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00003\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00003\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00004\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00004\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00005\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000R\u0000e\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u00005\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00001\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00001\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00002\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00002\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00003\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00003\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00004\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00004\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00005\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00005\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00006\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00006\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00007\u0000 \u0000-\u0000 \u0000T\u0000y\u0000p\u0000e\u0000","\u0000W\u0000e\u0000b\u0000s\u0000i\u0000t\u0000e\u0000 \u00007\u0000 \u0000-\u0000 \u0000V\u0000a\u0000l\u0000u\u0000e\u0000\"\u0000\r\u0000"],"firstRow":["\u0000\"\u0000A\u0000l\u0000p\u0000e\u0000s\u0000h\u0000 \u0000V\u0000a\u0000g\u0000h\u0000a\u0000s\u0000i\u0000y\u0000a\u0000","\u0000A\u0000l\u0000p\u0000e\u0000s\u0000h\u0000","\u0000","\u0000V\u0000a\u0000g\u0000h\u0000a\u0000s\u0000i\u0000y\u0000a\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u00001\u00009\u00008\u00006\u0000-\u00000\u00009\u0000-\u00001\u00006\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000","\u0000F\u0000a\u0000c\u0000e\u0000b\u0000o\u0000o\u0000k\u0000 \u0000:\u0000:\u0000:\u0000 \u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000P\u0000h\u0000o\u0000n\u0000e\u0000 \u0000:\u0000:\u0000:\u0000 \u0000A\u0000l\u0000l\u0000 \u0000:\u0000:\u0000:\u0000 \u0000O\u0000f\u0000f\u0000i\u0000c\u0000e\u0000 \u0000:\u0000:\u0000:\u0000 \u0000*\u0000 \u0000M\u0000y\u0000 \u0000C\u0000o\u0000n\u0000t\u0000a\u0000c\u0000t\u0000s\u0000","\u0000*\u0000 \u0000H\u0000o\u0000m\u0000e\u0000","\u0000m\u0000e\u0000@\u0000a\u0000l\u0000p\u0000e\u0000s\u0000h\u0000v\u0000a\u0000g\u0000h\u0000a\u0000s\u0000i\u0000y\u0000a\u0000.\u0000c\u0000o\u0000m\u0000","\u0000O\u0000t\u0000h\u0000e\u0000r\u0000","\u0000a\u0000l\u0000p\u0000e\u0000s\u0000h\u0000@\u0000a\u0000r\u0000t\u0000o\u0000o\u0000n\u0000g\u0000a\u0000m\u0000e\u0000s\u0000.\u0000c\u0000o\u0000m\u0000","\u0000W\u0000o\u0000r\u0000k\u0000","\u0000a\u0000l\u0000p\u0000e\u0000s\u0000h\u0000v\u0000a\u0000g\u0000h\u0000a\u0000s\u0000i\u0000y\u0000a\u00007\u0000@\u0000g\u0000m\u0000a\u0000i\u0000l\u0000.\u0000c\u0000o\u0000m\u0000","\u0000","\u0000","\u0000","\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000","\u00009\u00007\u00002\u00007\u00000\u00005\u00006\u00005\u00006\u00005\u0000","\u0000","\u0000","\u0000","\u0000","\u0000H\u0000o\u0000m\u0000e\u0000","\u0000\"\u0000\"\u0000S\u0000u\u0000r\u0000a\u0000t\u0000","\u0000 \u0000G\u0000u\u0000j\u0000a\u0000r\u0000a\u0000t\u0000\"\u0000\r\u0000"]} 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:23:14.147

是的，我得到了答案。

```
<?php 

    $fp = fopen("google12.csv", 'r');

    $fileHeader = array();
    $firstRow = array();
    $index = 0;
    while (($data = fgetcsv($fp)) !== FALSE && $index != 2)
    {
        $data = preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $data); // add line
        if ($index == 0)
            $fileHeader = $data;
        elseif ($index == 1)
            $firstRow = $data;

        $index++;
    }

    fclose($fp);

    $parameter = array("header" => $fileHeader,"firstRow" => $firstRow);

    echo json_encode($parameter);
    exit;

?> 
```

输出 ：

```
{"header":["Name","Given Name","Additional Name","Family Name","Yomi Name","Given Name Yomi","Additional Name Yomi","Family Name Yomi","Name Prefix","Name Suffix","Initials","Nickname","Short Name","Maiden Name","Birthday","Gender","Location","Billing Information","Directory Server","Mileage","Occupation","Hobby","Sensitivity","Priority","Subject","Notes","Group Membership","E-mail 1 - Type","E-mail 1 - Value","E-mail 2 - Type","E-mail 2 - Value","E-mail 3 - Type","E-mail 3 - Value","IM 1 - Type","IM 1 - Service","IM 1 - Value","Phone 1 - Type","Phone 1 - Value","Phone 2 - Type","Phone 2 - Value","Phone 3 - Type","Phone 3 - Value","Address 1 - Type","Address 1 - Formatted","Address 1 - Street","Address 1 - City","Address 1 - PO Box","Address 1 - Region","Address 1 - Postal Code","Address 1 - Country","Address 1 - Extended Address","Address 2 - Type","Address 2 - Formatted","Address 2 - Street","Address 2 - City","Address 2 - PO Box","Address 2 - Region","Address 2 - Postal Code","Address 2 - Country","Address 2 - Extended Address","Organization 1 - Type","Organization 1 - Name","Organization 1 - Yomi Name","Organization 1 - Title","Organization 1 - Department","Organization 1 - Symbol","Organization 1 - Location","Organization 1 - Job Description","Relation 1 - Type","Relation 1 - Value","Relation 2 - Type","Relation 2 - Value","Relation 3 - Type","Relation 3 - Value","Relation 4 - Type","Relation 4 - Value","Relation 5 - Type","Relation 5 - Value","Website 1 - Type","Website 1 - Value","Website 2 - Type","Website 2 - Value","Website 3 - Type","Website 3 - Value","Website 4 - Type","Website 4 - Value","Website 5 - Type","Website 5 - Value","Website 6 - Type","Website 6 - Value","Website 7 - Type","Website 7 - Value"],"firstRow":["Alpesh Vaghasiya","Alpesh","","Vaghasiya","","","","","","","","","","","1986-09-16","","","","","","","","","","","","Facebook MobilePhone All Office My Contacts"," Home","mealpeshvaghasiya.com","Other","alpeshartoongames.com","Work","alpeshvaghasiya7gmail.com","","","","Mobile","9727056565","","","","","Home","Surat"," Gujarat"]} 
```

# javascript - 您可以将多个文件压缩为一个吗？

> ID：14997648
> 
> 赞同：7
> 
> 时间：2013-02-21T08:29:00.193
> 
> 标签：javascript, minify, module-pattern

我将我的 JavaScript 代码拆分为几个文件，所有文件都使用模块模式（更新一个全局变量，比如 MyApp，使用新功能和成员。

是否可以将文件缩小为一个而不破坏范围

我想缩小的例子：

**文件1.js**

```
var Module = (function(ns) {

 ns.fun1 = function() { alert('fun1'); };
 return ns;

})(Module || {}); 
```

**文件2.js**

```
var Module = (function(ns) {

 ns.fun2 = function() { alert('fun2'); };
 return ns;

})(Module || {}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:42:59.413

全局范围实际上是全局的，因为无论您是从一个文件还是多个文件更改它都没有关系。但是，文件的顺序*可能*很重要，具体取决于您使用的模块模式风格。对于一个好的文章，也包括跨文件私有状态，请阅读： http: [//www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:31:24.550

是的，你可以，而且是一种很好的工作方式，对每个人来说，特别是如果有更多的开发人员参与进来并且对应用程序健康。

我使用带有特殊配置文件（[https://beat.snipt.net/minify-config-file-minify-each-folder-from](https://beat.snipt.net/minify-config-file-minify-each-folder-from-project-1-minified-file/)的 Minify 类（[http://code.google.com/p/minify/ ）](http://code.google.com/p/minify/) [-project-1-minified-file/](https://beat.snipt.net/minify-config-file-minify-each-folder-from-project-1-minified-file/)）扫描我的文件夹并为每个子文件夹创建一个文件（JS或CSS）。通过这种方式，我可以制作模块化的 JS 或 CSS 文件，这些文件可以拆分为类或常规文件。

关键是文件的顺序，取决于读取文件夹功能和操作系统类型可能不同（例如 php readdir vs scandir）

# php - 使用 codeigniter 注册时遇到问题

> ID：14997649
> 
> 赞同：1
> 
> 时间：2013-02-21T08:29:03.490
> 
> 标签：php, mysql, codeigniter, registration

我的网站有一个注册表单，它显示需要用户名、密码和密码确认，尽管我提供了所有这些。这是控制器代码：

```
{

    $this->load->library('form_validation');
    $this->form_validation->set_rules('username','Username','trim|required|min_length[4]|xss_clean');
    $this->form_validation->set_rules('email','Email','trim|required|valid_email');
    $this->form_validation->set_rules('pass1','Password','trim|required|min_length[4]|max_length[32]');
    $this->form_validation->set_rules('pass2','Password Confirmation','trim|required|matches[pass1]');

    if ($this->form_validation->run() === FALSE)
    {
        $password = $this->input->post('pass1');

        echo json_encode(array('error' => '1', 'message' => validation_errors('<div class="alert alert-error"><strong>Error!</strong> ', '</div>')));
    }
    else
    {
        $username = $this->input->post('username');
        $password = $this->input->post('pass1');

        $email = $this->input->post('email');
        $date = date('Y/m/d H:i:s');

        $this->load->model('ui_model');
        $this->ui_model->register_user($username,$password,$email,$date);

        echo json_encode(array('error' => '0', 'message' => '<div class="alert alert-success"><strong>Success!</strong> You have been registered!</div>'));

    } 
```

这是视图代码：

```
<div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Registration</h3>
    </div>
    <div class="modal-body">
        <div id="registerModalerror" style="display: none;"></div>
        <?php
            $attributes = array('class' => 'form-horizontal','id' => 'registerModalform');

            echo form_open('',$attributes);
        ?>
        <div class="control-group">
            <label class="control-label" for="Username">Username</label>
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on"><i class="icon-user"></i></span>
                    <input type="text" id="inputUser" placeholder="Username" name="username" value ="" >
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="inputEmail">Email</label>
            <div class="controls">
                <div class="input-prepend">
                <span class="add-on"><i class="icon-envelope"></i></span>
                <input type="text" id="inputEmail" placeholder="email" name="email" value = "">
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="inputPassword">Password</label>
            <div class="controls">
                <div class="input-prepend">
                <span class="add-on"><i class="icon-lock"></i></span>
                <input type="password" id="inputPassword" placeholder="Password" name="pass1" value = "">
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="inputPassword2">Retype Password</label>
            <div class="controls">
                <div class="input-prepend">
                <span class="add-on"><i class="icon-lock"></i></span>
                <input type="password" id="inputPassword2" placeholder="Retype Password" name="pass2" value = "">
                </div>
            </div>
        </div>

        <div class="control-group">

            <div class="controls">
                <button type="submit" class="btn">Register</button>
            </div>
        </div>
    </div>
    <?php echo form_close(); ?>
    <div class="modal-footer">

    </div>

</div>

<script>
    $(document).ready(function() {
             $('#myModalReg').removeData('modal');
             $('#myModalReg').hide();
             $('#registerModalform').submit(registerUser);

        });

        function registerUser(event)
        {
            //Stop the form from submitting
            event.preventDefault();

            //Collect our form data.
            var form_data = {
                username : $("[name='username']").val(),
                password1 : $("[name='pass1']").val(),
                password2 : $("[name='pass2']").val(),
                email : $("[name='email']").val()
            };

            //Begin the ajax call
            $.ajax({
                    url: "http://localhost/fys/index.php/ui/do_register",
                    type: "POST",     
                    data: form_data,
                    dataType: "json",
                    cache: false,
                    async : false,

                    success: function (json) {  
                        // alert(json.pass);    
                        if (json.error==1)
                        {
                           $('#registerModalerror').html(json.message).show();
                        } 
                        else {
                            //Hide our form
                            $('#registerModalform').slideUp();
                            //Show the success message
                            $('#registerModalerror').html(json.message).show();
                        }             
                    },

                    error: function(json)
                    {
                        alert(json.message);
                    }
            });
        }

</script> 
```

我不确定哪里出了问题，它困扰了我将近 24 小时。谁能提供一些帮助？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:32:02.790

您的 POST 对象是

```
{
    username : $("[name='username']").val(),
    password1 : $("[name='pass1']").val(),
    password2 : $("[name='pass2']").val(),
    email : $("[name='email']").val()
} 
```

但是您的控制器的 POST 名称是`pass1`and `pass2`。你正在放弃`password1`并且`password2`

:P

# php - wordpress 相机图像捕获和保存

> ID：14997655
> 
> 赞同：0
> 
> 时间：2013-02-21T08:29:25.813
> 
> 标签：php, wordpress, webcam, image-capture

我目前有一个在前端使用高级自定义字段的项目，可以帮助用户上传他的照片并将其存储在帖子中。我想补充的是可以选择使用网络摄像头即时拍摄照片并保存为第二个选项。有没有办法让这成为可能？

# c# - C# - If/Else 帮助 [用户和计算机输入交互]

> ID：14997656
> 
> 赞同：1
> 
> 时间：2013-02-21T08:29:26.647
> 
> 标签：c#

我试图找出一种方法让计算机玩家基本上通过看到“这个位置被占用，我应该看看另一个是否有空并占用它”来响应我的动作。

到目前为止，我没有做出任何改进（大约 5 小时）。我希望计算机能够意识到如果某个按钮（它随机选择）被选中，它应该考虑另一个选择。不确定 if/else 应该实际去哪里，或者我应该在哪里/什么地方让它尝试另一个位置。

这是对我的想法进行评论的代码片段（可能是我想做的事情的错误位置）：

```
if (c.Enabled == true) //if the button is free
{
    if ((c.Name == "btn" + Convert.ToString(RandomGenerator.GenRand(1, 9)) )) //if a specific button is free
    {
        if ((c.Text != "X")) //if its empty
        {
            //do this
            c.Text = "O"; //O will be inside the button
            c.Enabled = false; //button can no long be used
            CheckComputerWinner(); //check if it finishes task
            return;
        }
        else //if it is an X
        {
            //try a different button choice instead
            //see if that button is empty
                //do stuff
            //else
                //... repeat until all buttons are checked if free
        }
    }
} 
```

我的问题很简单：我该如何解决这个问题并了解发生了什么？还是更有效地做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:38:10.343

您可以使用这些按钮创建一个数组，这样您就不必检查名称：

```
Button[9] gameField; 
```

创建`[3,3]`数组可能更直观，但在这种情况下，普通数组更容易使用。
然后，您可以计算其中有多少是免费的：

```
int freeCount = gameField.Count(b => b.Text != "X"); 
```

如果要随机选择其中一个免费的，请在范围内生成一个随机数`0 - (freeCount - 1)`并选择相应的按钮：

```
int offset = RandomGenerator.GenRand(0, freeCount - 1);
Button target = gameField.Where(b => b.Text != "X").Skip(offset).FirstOrDefault();
if (target != null) {
    // check it
} 
```

扩展方法`Where`过滤你的按钮只返回免费的。`Skip`将跳过指定数量的元素（用于随机选择）并`FirstOrDefault`返回结果序列的第一个元素（或者`null`如果没有）。

注意：您可能需要在随机选择一个字段之前检查某些情况，以使您的 AI 更有野心：

*   电脑玩家有没有连续两个O，第三场是空的？如果是这样，请选择那个。
*   人类玩家是否连续两个 X 并且第三个字段是空闲的？如果是这样，请选择那个。

有一些技巧可以利用该策略，也有更好的启发式方法，但我将把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:55:23.043

你在这里寻找一个while循环。您可以按如下方式修改您的代码：

```
Button c;
// here you look for a Button within the Controls of your Form. It stops when an Enabled Button with Text != "X" is found
do
{
    c = this.Controls.Find("btn" + Convert.ToString(RandomGenerator.GenRand(1, 9)), true).FirstOrDefault() as Button;
} while (c == null || !c.Enabled || c.Text == "X");
c.Text = "O"; //O will be inside the button
c.Enabled = false; //button can no long be used
CheckComputerWinner(); //check if it finishes task
return; 
```

# java - 线程池借用

> ID：14997657
> 
> 赞同：0
> 
> 时间：2013-02-21T08:29:29.660
> 
> 标签：java

当 GenericObjctPool borrowObject 无法借用 Object 时会发生什么。

例如，如果它是在任意循环中借用的，但线程池的大小仅为 2。它会在不可用时阻塞对 borrowObject 的调用还是将其入队？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:31:59.870

直接取自[javadoc](http://commons.apache.org/pool/api-1.6/org/apache/commons/pool/impl/GenericObjectPool.html#borrowObject%28%29)：

> 如果池耗尽（没有可用的空闲实例并且没有创建新实例的能力），此方法将阻塞 (WHEN_EXHAUSTED_BLOCK)、抛出 NoSuchElementException (WHEN_EXHAUSTED_FAIL) 或增长（WHEN_EXHAUSTED_GROW - 忽略 maxActive）。当 whenExhaustedAction == WHEN_EXHAUSTED_BLOCK 时，此方法将阻塞的时间长度由 maxWait 属性确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:09:38.807

无限期阻塞的原因 - 缺少 getPool().returnObject(MyRunnable)

# xml - 使用 xml 生成 ssrs 报告

> ID：14997658
> 
> 赞同：0
> 
> 时间：2013-02-21T08:29:32.013
> 
> 标签：xml, reporting-services, report

我需要使用 xml 生成 ssrs 报告，但是 xml 从存储过程中获取其数据，例如列等。然后一旦创建了报告，我需要使用 sp 获取要显示的数据

1) 输入参数，2) sp1 获取列和参数标题，以便它可以编写 xml 以生成报告 3) 报告然后调用 sp2 使用参数获取其数据并显示到报告中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:18:50.093

rdl 文件只是 xml。如果之前没有做过，请尝试从头开始创建基本报告并尝试模拟它生成的代码。

在说这个时，正如所说的，我没有使用 xml 来完成这个，只是使用 gui。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:14:32.617

好的，我们通过**数据集**和**数据源**

将数据发送到报告， 因此，我们有一种特殊的数据集可以处理 ，例如：Query for a dataset in ssrs ******`XML data`****** 

 ****```
DECLARE @docHandle int DECLARE @xmlDocument varchar(max); DECLARE @listXML nvarchar(max)
SET @listXML = @list
SET @xmlDocument = @listXML EXEC sp_xml_preparedocument @docHandle OUTPUT, @xmlDocument
SELECT *
FROM OPENXML (@docHandle, N'/ENVELOPE/ADDRESS') WITH (NAME nvarchar(max) 'NAME',CONTACT nvarchar(max) 'CONTACT',  STREET nvarchar(max) 'STREET') 
```

这里的**列表**是您将通过**XML**发送到报告的**参数，该数据集将处理它，**

 **作为一个完整的例子，我在[这里](https://stackoverflow.com/a/13416102/1042705)回答了一个问题，如果你仔细阅读它，你就会有解决问题的想法！******

# postgresql - 在 Postgres 中使用 COPY STDIN 仅恢复一些键值？

> ID：14997664
> 
> 赞同：0
> 
> 时间：2013-02-21T08:29:51.487
> 
> 标签：postgresql

我不小心对删除了 5000 多行的实时数据进行了查询。我在做这个之前做了一个备份，备份是这样的格式：

```
COPY table (id, "position", event) FROM stdin;
529 1   5283
648 1   6473
687 1   6853
\. 
```

问题是，如果我运行它，我会得到：

```
ERROR:  duplicate key value violates unique constraint "table_pkey" 
```

有没有办法改变这个查询只插入我删除的行？诸如“如果存在，请忽略”之类的东西？通常我知道这会影响很多事情，但是因为它实际上只是那些需要替换的条目，我认为这样的东西可以工作，但我不知道它是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:50:07.500

最简单的方法可能是创建原始表的副本并还原到该表。然后从原始表中不存在条目的副本插入原始表。例如

```
create table copy_table as select * from table where 1=2;
-- change the copy statement
COPY copy_table from stdin;
...

-- Insert to original
INSERT INTO table t1
SELECT ct.*
  FROM copy_table ct
       LEFT JOIN  table t2 ON t2.id = ct.id -- assuming id is primary key
 WHERE t2.id IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:50:11.307

`COPY`不，很遗憾，使用该命令是不可能的。

您需要将所有行插入到临时表中，然后用于`insert into .. select ... where not exits (...)`将缺少的行从临时表复制到真实表中。

# php - 在 PHP 包含文件夹中保存安全文件

> ID：14997667
> 
> 赞同：0
> 
> 时间：2013-02-21T08:29:59.847
> 
> 标签：php, apache, security, database-connection

在 Apache 服务器上，可以为 PHP 包含定义一个目录。包含文件夹的路径不在根目录中，并且与服务器脚本不冲突。`config.php`我认为将安全文件（如 PHP 全局包含文件夹）存储在 PHP 全局包含文件夹中很好的原因`db-access.php`是，我不必为我的 Web 应用程序中的每个页面定义路径。我可以简单地执行以下操作：

```
<?
require_once('config.php');
require_once('db-access.php');
?> 
```

但是我有一个问题原因，除了包含文件夹在根目录之外，它是否还足够保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:34:05.433

它将足够保存，您不会将它放在您的 htdocs 文件夹下（文件夹，可通过您的网络服务器访问）。所以，你可以把它放在任何其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:36:10.247

从根目录包含文件的方法

```
<?php 
$path = $_SERVER['DOCUMENT_ROOT'];
$path .= '/folder/config.php';
require_once($path);
?> 
```

或 如果它们在您的`public_html`或`www`文件夹中，请使用

```
 Order allow,deny
deny from all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:39:02.580

使用 .htacces

```
order deny,allow
deny from all 
```

# xcode - 计算可可中的目录大小

> ID：14997676
> 
> 赞同：4
> 
> 时间：2013-02-21T08:30:25.713
> 
> 标签：xcode, macos, cocoa

我想计算目录（文件夹）的大小，我必须列出卷（驱动器）中的所有文件和文件夹（子文件夹）及其相应的大小。我正在使用下面的代码来计算大小。这段代码的问题是性能问题。我`NSBrowser`用来显示 .

```
NSArray *filesArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:folderPath error:nil];
NSEnumerator *filesEnumerator = [filesArray objectEnumerator];
NSString *fileName;
unsigned long long int fileSize = 0;

while (fileName = [filesEnumerator nextObject]) 
{
    NSDictionary *fileDictionary = [[NSFileManager defaultManager] attributesOfItemAtPath:folderPath error:nil];
    fileSize += [fileDictionary fileSize];
}

return fileSize; 
```

问题：

1.  有没有可用的内置功能？

2.  如果不是，计算大小的最佳方法是什么？

3.  使用缓存来存储已经计算的文件大小是否很好？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:44:52.850

您可以使用`stat`.

```
-(unsigned long long)getFolderSize : (NSString *)folderPath;

{
    char *dir = (char *)[folderPath fileSystemRepresentation];
DIR *cd;

struct dirent *dirinfo;
int lastchar;
struct stat linfo;
static unsigned long long totalSize = 0;

cd = opendir(dir);

if (!cd) {
    return 0;
}

while ((dirinfo = readdir(cd)) != NULL) {
    if (strcmp(dirinfo->d_name, ".") && strcmp(dirinfo->d_name, "..")) {
        char *d_name;

        d_name = (char*)malloc(strlen(dir)+strlen(dirinfo->d_name)+2);

        if (!d_name) {
            //out of memory
            closedir(cd);
            exit(1);
        }

        strcpy(d_name, dir);
        lastchar = strlen(dir) - 1;
        if (lastchar >= 0 && dir[lastchar] != '/')
            strcat(d_name, "/");
        strcat(d_name, dirinfo->d_name);

        if (lstat(d_name, &linfo) == -1) {
            free(d_name);
            continue;
        }
        if (S_ISDIR(linfo.st_mode)) {
            if (!S_ISLNK(linfo.st_mode))
                [self getFolderSize:[NSString stringWithCString:d_name encoding:NSUTF8StringEncoding]];
            free(d_name);
        } else {
            if (S_ISREG(linfo.st_mode)) {
                totalSize+=linfo.st_size;
            } else {
                free(d_name);
            }
        }
    }
}

closedir(cd);

return totalSize;

} 
```

看看[Mac OS X 没有正确报告目录大小？](https://superuser.com/questions/382120/mac-os-x-not-reporting-directory-sizes-correctly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:02:15.673

```
 1\. Is there any built in function available? 
```

`fileSize`是一个内置函数，可为您提供大小。

```
 2\. If not what is the best way to calculate the size? 
```

此方法足以计算文件夹/目录的大小。

```
 3\. Is it good to use cache to store already calculated file size? 
```

是的，您可以将其存储在缓存中。

# c# - 我如何在 Visual Studio 上观看文件类型或特定文件

> ID：14997678
> 
> 赞同：1
> 
> 时间：2013-02-21T08:30:28.253
> 
> 标签：c#, .net, visual-studio

当特定文件类型或特定文件更改/保存在 Visual Studio 中时，我该如何做某事（或运行一些代码/工具）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:33:31.380

使用 Visual Studio 宏：http: [//msdn.microsoft.com/en-us/library/b4c73967%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/b4c73967%28v=vs.100%29.aspx)

或者

创建 VS 加载项：http: [//msdn.microsoft.com/en-us/library/vstudio/80493a3w.aspx](http://msdn.microsoft.com/en-us/library/vstudio/80493a3w.aspx)

或者

创建监视文件系统的桌面应用程序：http: [//msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# javascript - 为javascript确认对话框显示自定义消息和按钮文本？

> ID：14997680
> 
> 赞同：2
> 
> 时间：2013-02-21T08:30:53.527
> 
> 标签：javascript, confirm

是否可以为按钮提供自定义消息而不是取消/确定并提供我自己的文本？

我看到很多关于用 jquery 对话框替换 js 确认的教程。但是没有办法使用原生 JS 吗？我在 Grooveshark 和许多其他页面中看到了同样的事情。当用户想要离开他们的页面时，会使用带有自定义按钮（如“留在页面/离开页面”）的 js 对话框提示用户？

知道他们如何实施吗？他们的对话框看起来好像是使用原生 JS 生成的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:35:33.357

我相信您看到的对话框略有不同。

将此添加到您的页面：

```
window.onbeforeunload = function() {
    return "Are you sure you want to navigate away?";
} 
```

# sql - 将现有列添加到现有表 MS_Access

> ID：14997682
> 
> 赞同：0
> 
> 时间：2013-02-21T08:31:02.547
> 
> 标签：sql, ms-access, ms-access-2007

一点背景：

在这个项目中，我试图组合从不同应用程序中获取的 2 个表。

其中一个应用程序给了我几个表，我已经成功地将它们组合成一个表：

```
DB_Total 
```

另一个应用程序给了我一个只有标记名的表。此表称为：

```
TagNames_EA 
```

* * *

现在，我想将“TagNames_EA”表中的“Name”列添加到“DB_Total”表中，以便比较“Name”字段中的值。

到目前为止，我有这段代码来比较和过滤掉不匹配的名称：

```
SELECT
    d.Address,
    d.Type,
    d.Name,
    IIf(t.Name Is Null, False, True) AS match_found
FROM
    DB_Total AS d
    LEFT JOIN TagNames_EA AS t
    ON d.Name = t.Name; 
```

这很好用，但我还想查看 DB_Total 表中 TagNames_EA 表中的“名称”值。

* * *

我知道可以使用

```
ALTER TABLE DB_Total
ADD Names_EA 
```

但是，当我尝试这个时：

```
ALTER TABLE DB_Total
ADD Names FROM TagNames_EA AS Names_EA 
```

这没用

是否有捷径可寻？

编辑：我试图简化我解释我的情况的方式。

编辑2：示例

在“DB_Total”表中，我有一个名称列表，它应该与“EA_Names”表中的名称完全相同。

```
DB_Total:
     Name
S1\SVS_AK\ENA[3]
S1\SVS_AK\ENA[4]
S1\SVS_AK\ENA[5]
S1\SVS_AK\ENA[6]
S1\SVS_AK\ENA[7]
S1\SVS_AK\ENA[8] 
```

但是，有时会出错，我想检查是否有不匹配的名称。像这样：

```
TagNames_EA
    Name
S1\SVS_AK\ENA[3]
S1\SVS_AK\ENA[4]
S1\SVS_AK\ENA[5]
S1\SVS_AK\EMA[6]  <--- This is a Mistake and will come up as a mismatch
S1\SVS_AK\ENA[7]
S1\SVS_AK\ENA[8] 
```

目前，我使用的代码向我的 DB_Total 表添加了一个新列，其值为“-1”（用于匹配）或值“0”（用于没有匹配的名称）

看起来像这样：

```
DB_Total:               
     Name               match_found
S1\SVS_AK\ENA[3]            -1
S1\SVS_AK\ENA[4]            -1
S1\SVS_AK\ENA[5]            -1
S1\SVS_AK\ENA[6]             0
S1\SVS_AK\ENA[7]            -1
S1\SVS_AK\ENA[8]            -1 
```

我想要完成的是一个包含以下内容的表格：

```
DB_Total:               
     Name                 Names_EA       match_found
S1\SVS_AK\ENA[3]     S1\SVS_AK\ENA[3]        -1
S1\SVS_AK\ENA[4]     S1\SVS_AK\ENA[4]        -1
S1\SVS_AK\ENA[5]     S1\SVS_AK\ENA[5]        -1
S1\SVS_AK\ENA[6]     S1\SVS_AK\EMA[6]         0
S1\SVS_AK\ENA[7]     S1\SVS_AK\ENA[7]        -1
S1\SVS_AK\ENA[8]     S1\SVS_AK\ENA[8]        -1 
```

在乔发表评论之后，如果我还想在同一个表中查看 EA_Table 的名称值，我开始怀疑这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:18:16.957

您的 ALTER 语句当然行不通。您通常会首先添加一个可以为 NULL 的空列，然后使用第二条`INSERT`语句来填充数据。但是，除了 name 之外，您还必须有另一列来定义 _EA 表中的值对 DB_Total 表的作用，否则您将无法 100% 确定您匹配两者中的正确行表。

您可以尝试以下方法来获得我认为您想要的结果：

```
选择
    d.地址，
    d.类型，
    d.姓名，
    t.name,
    IIf(t.Name Is Null, False, True) AS match_found
从
    DB_Total AS d
    左连接 TagNames_EA AS t
    ON d.Name = t.Name;

```

这应该会显示您两个相邻的名称结果。但是，如果您有一些明确的 ID 值来确保您确实拥有正确匹配的行，则可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:58:28.467

```
SELECT
    d.Address,
    d.Type,
    d.Name,
    IIf(t.Name Is Null, False, True) AS match_found,
    t.name as name_ea
FROM
    DB_Total AS d
    FULL OUTER JOIN JOIN TagNames_EA AS t
    ON d.Name = t.Name; 
```

这给了你不匹配；但是，它实际上并没有向您显示哪个匹配项-稍后由您决定哪个匹配项。

# game-physics - 哪个约束可以保持物体之间的固定距离？

> ID：14997688
> 
> 赞同：3
> 
> 时间：2013-02-21T08:31:25.950
> 
> 标签：game-physics, physics-engine, bulletphysics

我有两个**球体**，它们应该始终彼此保持**恒定的距离**。只要它们的距离保持不变，它们就可以以各种自由度移动。想象它们被一根看不见的杆神奇地连接起来。在物理模拟期间对这些球体施加各种力以移动它们。

我为球体使用了两个 Bullet **SphereShapes**。我可以在这两个球体之间使用什么样的**约束**（关节）来模拟它们的恒定距离和连接？

在我看来，我需要引入一个虚拟形状（圆柱体？胶囊？）来连接这两个球体，并在其两端的每一端引入一个球形约束（球窝接头）以连接到球体。

有没有更好的方法来实现这个设置？我使用什么样的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:48:22.487

我会从[Point2PointConstraint](http://code.google.com/p/bullet/source/browse/bullet-1.5b/BulletDynamics/ConstraintSolver/Point2PointConstraint.cpp?spec=svn22&r=22)（球和插座）创建我自己的约束。

第 98 行是需要更改的。本质上，您应该创建一种新的约束，该约束知道您想要两个对象之间的*距离。**当连接pivotAInW*和*pivotBInW*的向量的长度等于*distance时，**深度*变量应该为零，而不是尝试在世界空间*中将 pivotAInW*和*pivotBInW匹配在一起（* *depth == 0*）。您可能希望保护您的代码免受特殊情况的影响，即两个枢轴都位于空间中的同一点并强制施加脉冲的方向，例如关于 x 轴。

# mysql - 通过 SHOW TABLE STAUS 查询选择特定列

> ID：14997694
> 
> 赞同：4
> 
> 时间：2013-02-21T08:32:08.537
> 
> 标签：mysql, status

我必须通过 SHOW TABLE STATUS 查询选择特定的列。现在看起来像：

```
SHOW TABLE STATUS IN  `myTableName` WHERE  `NAME` LIKE  '%name_substring%'; 
```

...并返回所有列。有没有办法达到这个目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:33:29.217

您可以查询 information_schema.TABLES 以获取特定列。检查演示：[http ://sqlfiddle.com/#!2/38506/3](http://sqlfiddle.com/#!2/38506/3)

```
SELECT * FROM information_schema.TABLES WHERE TABLE_NAME = 'myTableName'; 
```

希望这可以帮助

# codeigniter - 如何在codeigniter的控制器中给出下拉列表的值

> ID：14997697
> 
> 赞同：0
> 
> 时间：2013-02-21T08:32:21.957
> 
> 标签：codeigniter, codeigniter-form-helper

我在codeigniter中有这个代码（codeigniter控制器中的表格部分）：

```
$this->data['SalaryType'] = array(
    'name' => 'SalaryType',
    'id' => 'SalaryType',
    'type' => 'text',
    'value' => $this->form_validation->set_value('SalaryType'),
);
$this->data['DefaultSalary'] = array(
   'name' => 'DefaultSalary',
   'id' => 'DefaultSalary',
   'type' => 'text',
   'value' => $this->form_validation->set_value('DefaultSalary'),
);
$this->data['Salary_options'] = array(
    'language' => 'monthly',
    'world' => 'world'
); 
```

（codeigniter 视图中的表格部分）：

```
 <p>
        Salary Type: <br />
        <?php echo form_dropdown($SalaryType,$Salary_options,'monthly');?>
  </p>

  <p>
        Default Salary: <br />
        <?php echo form_input($DefaultSalary);?>
  </p> 
```

我想使用下拉值，但表单单独发送输入值，我无法访问下拉值。
我检查`print_r($_POST);`但在后数组观察中'DefaultSalary'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:56:54.180

您以错误的方式初始化下拉菜单

```
<?php echo form_dropdown($SalaryType,$Salary_options,'monthly');?> 
```

改为使用

```
<?php echo form_dropdown('DefaultSalary',$Salary_options,'language');?> 
```

**第一个参数**是控件的名称

**第二个参数**是选项数组->这是正确的

**第三个参数**是从选项数组中选择的**索引，而****不是**在您的情况下可以是“语言”而不是“每月”的值

阅读[form_helper](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)

您将能够使用它来访问它`$this->input->post('DefaultSalary');`，它将返回所选选项的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:10:33.610

可能是您的下拉名称 attr 未设置...要将 id 添加到 form_drop down 您可以试试这个..

```
form_dropdown('country', $options_array, '1','id="select_id"') 
```

注意：这未经测试。

# c# - 类型为“类型”的变量中的声明变量

> ID：14997699
> 
> 赞同：1
> 
> 时间：2013-02-21T08:32:35.447
> 
> 标签：c#, .net

我的班级中有“类型”类型的变量：

```
class A
{
    public static Type MyType;
} 
```

我用anywhere构造声明了这个变量。例子：

```
A.MyType = b.GetType(); 
```

第一个问题：我需要声明具有存储在 MyType 中的类型的新变量。

```
<MyType> myValue = new <MyType>; 
```

第二个问题：我需要一个函数来指示“类型”的变量是否可以相互简化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T08:37:12.623

> 第一个问题：我需要声明具有存储在 MyType 中的类型的新变量。

你不能这样做，基本上。

变量类型需要在*编译时*知道。您不能使用仅在执行时才知道的类型来声明变量。您可以使用泛型获得*一些方法：*

```
public class Foo<T>
{
    private T value;
} 
```

你甚至可以添加一个约束来要求它`T`有一个无参数的构造函数，然后你可以调用它：

```
public class Foo<T> : new()
{
    private T value = new T();
} 
```

`Foo<T>`...当您只知道`T`在执行时使用反射的类型时，您可以创建一个：

```
Type genericDefinition = typeof(Foo<>);
Type constructed = genericDefinition.MakeGenericType(A.MyType);
object instance = Activator.CreateInstance(constructed); 
```

...但它会很快变得混乱。您还没有告诉我们您实际想要达到的目标，因此很难提出替代方案 - 但如果您可以重新设计以避免这种情况，我会的。

> 第二个问题：我需要一个函数来指示“类型”的变量是否可以相互简化

您可能正在寻找[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-gb/library/system.type.isassignablefrom.aspx)，但不清楚...

# java - 一个 web dyno 可以处理多少个套接字？

> ID：14997711
> 
> 赞同：2
> 
> 时间：2013-02-21T08:33:13.173
> 
> 标签：java, php, heroku, ruby-on-rails-3.2

我想知道，每个网络测功机可以有多少个打开的套接字？假设我的 Web 应用程序将打开一个套接字以每秒接收 2kb ..

有没有办法计算这个？实施起来容易吗？从哪儿开始？

# java - Libgdx Actor 不响应输入

> ID：14997715
> 
> 赞同：2
> 
> 时间：2013-02-21T08:33:30.580
> 
> 标签：java, libgdx

我这样定义了新的演员：

```
class MyActor extends Image
{
    Texture texMyActor;

    public MyActor()
    {
        super.setTouchable(Touchable.enabled);
        texMyActor = new Texture("data/myActor.png");
        addListener(new InputListener()
        {
            public boolean touchDown(InputEvent event, float x, float y,
                    int pointer, int button)
            {
                System.out.println("down");
                return true;
            }

            public void touchUp(InputEvent event, float x, float y,
                    int pointer, int button)
            {
                System.out.println("up");
            }
        });
    }

    @Override
    public void act(float delta)
    {
        super.act(delta);
    }

    @Override
    public void draw(SpriteBatch batch, float parentAlpha)
    {
        batch.draw(texMyActor, 200, 200);
    }
} 
```

我还将演员添加到舞台，将舞台注册为当前输入处理器。然后我调用 stage.act(deltaTime) 和 stage.draw()。我看到我的演员，但它没有响应输入我的代码有什么问题？:?:

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:53:07.293

你必须 setBounds 你的演员以及添加到你的构造函数：

```
texMyActor = new Texture("data/myActor.png");
//setting width and height according to the texture
setWidth(texMyActor.getWidth());
setHeight(texMyActor.getHeight());
//setting bound of the actor
setBounds(200, 200, getWidth(), getHeight()); 
```

请注意，我将边界位置设置为 200 , 200 ，因为您在那里绘制

# c# - 在 List 中查找对象的更有效方法 Assume that arrRowLength&arrColLength have all been properly defined and assigned, and MyObjectList <myobject>has been instantiated and populated with a few obje 问问题 问问题 2013-02-21T08:33:44.820 252 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Assume that arrRowLength&arrColLength have all been properly defined and assigned, and MyObjectList <myobject>has been instantiated and populated with a few objects. class MyObject { public MyObject() { } public int rowIndex {get; set;} public int colIndex {get; set;} } List <myobject>MyObjectList = new List<myobject>(); for (int r = 1; r <= arrRowLength; r++) { for (int c = 1; c <= arrColLength; c++) { MyObject mo = MyObjectList.Find(item => (item.rowIndex == r && item.colIndex == c)); if(mo != null) { //found, do sth... } } } Above is my current approach to finding a MyObject object from MyObjectList, where rowIndex and colIndex equal to r and c in for loops. However, Find() has O(n) complexity. The larger the MyObjectList gets, the longer it takes. So I wonder if there's a better / more efficient way to find the object. How can I implement this with .BinarySearch() method? It depends on your real requirements, but choosing more appropriate data structures could be one approach. One example would be a Dictionary with a Tuple <int, int="">as the key, where the first item is the row index and the second item is the column index. "Search" would now be a lookup and O(1): Dictionary<tuple<int, int="">, MyObject> MyObjects; MyObject o; if(MyObjects.TryGetValue(Tuple.Create(r, s), out o) { //found, do sth... } Adding a new object to the dictionary would look like this: MyObjects.Add(Tuple.Create(o.rowIndex, o.colIndex), o); If - for some reason - you would need to iterate all objects in another method, you can still do this using the Values property of the dictionary: foreach(var o in MyObjects.Values) { // do something for each of your objects. } c#.netlist 4 4 回答 4 This answer is useful 8 这取决于您的实际需求，但选择更合适的数据结构可能是一种方法。 一个示例是以 aTuple<int, int="">作为键的字典，其中第一项是行索引，第二项是列索引。“搜索”现在将是一个查找和 O(1)： Dictionary<tuple<int, int="">, MyObject> MyObjects; MyObject o; if(MyObjects.TryGetValue(Tuple.Create(r, s), out o) { //found, do sth... } 向字典中添加一个新对象如下所示： MyObjects.Add(Tuple.Create(o.rowIndex, o.colIndex), o); 如果 - 由于某种原因 - 您需要在另一个方法中迭代所有对象，您仍然可以使用Values字典的属性来执行此操作： foreach(var o in MyObjects.Values) { // do something for each of your objects. } 于 2013-02-21T08:37:39.990 回答 This answer is useful 1 You can use SortedList<> with its method IndexOfKey(), which uses a binary search. It returns the zero-based index of the key parameter, if key is found in the SortedList object; otherwise, -1. Take a look at http://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.100).aspx 于 2013-02-21T08:39:51.037 回答 This answer is useful 1 Another way to reduce number of iterations: Sort MyObjectList: by rowIndex Asc -> by colIndex Asc Iterate MyObjectList with foreach loop until rowIndex is equal to arrRowLength This approach eliminates neccessity of iterating wh0le 2d-matrix + reduces number of visited instances in List <myobject>于 2013-02-21T08:52:30.073 回答 This answer is useful 0 Another idea - for cases when you need to find only specific row (or column) and not the cell you can use Lookup class: Lookup <int, myobject="">rowIndex = MyObjectList.ToLookup(o => o.rowIndex, o => o); having this you can quickly retrieve all cells of given row i by simply referencing: IEnumerable <myobject>rowCells = rowIndex[i]; 于 2013-02-21T09:10:59.263 回答 Related 2 java - 多值作为地图集合中的键 3 php - MySQL 刷新 memcached 2 ios - 如何使用 ruby 动作添加 UINavigation 控制器？ 2 prolog - Prolog：子句不在源文件中 1 xcode - XCode 文件未编译 2 input - vhdl 将新输入与旧输入进行比较 2 ruby-on-rails - 在 Rails 中按一列分组并对多个其他列求和 0 css - CSS过渡导致错误 3 php - PHP don't create the folder mkdir() 1 refresh - 如何刷新弹出菜单中的项目？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myobject></int,></myobject></tuple<int,></int,></tuple<int,></int,></myobject></myobject></myobject></myobject>

> ID：14997719
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, .net, list

Assume that `arrRowLength`&`arrColLength` have all been properly defined and assigned, and `MyObjectList<MyObject>` has been instantiated and populated with a few objects.

```
class MyObject
{
    public MyObject() { }
    public int rowIndex {get; set;}
    public int colIndex {get; set;}
} 

List<MyObject> MyObjectList = new List<MyObject>();

for (int r = 1; r <= arrRowLength; r++)
{
    for (int c = 1; c <= arrColLength; c++)
    {
         MyObject mo = MyObjectList.Find(item => (item.rowIndex == r && item.colIndex == c));
         if(mo != null)
         {
              //found, do sth...
         }
    }
} 
```

Above is my current approach to finding a `MyObject` object from `MyObjectList`, where `rowIndex` and `colIndex` equal to `r` and `c` in for loops.

However, `Find()` has **O(n)** complexity. The larger the MyObjectList gets, the longer it takes. So I wonder if there's a **better / more efficient way** to find the object. How can I implement this with `.BinarySearch()` method?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T08:37:39.990

这取决于您的实际需求，但选择更合适的数据结构可能是一种方法。

一个示例是以 a`Tuple<int, int>`作为键的字典，其中第一项是行索引，第二项是列索引。“搜索”现在将是一个查找和 O(1)：

```
Dictionary<Tuple<int, int>, MyObject> MyObjects;
MyObject o;
if(MyObjects.TryGetValue(Tuple.Create(r, s), out o)
{
    //found, do sth...
} 
```

向字典中添加一个新对象如下所示：

```
MyObjects.Add(Tuple.Create(o.rowIndex, o.colIndex), o); 
```

如果 - 由于某种原因 - 您需要在另一个方法中迭代所有对象，您仍然可以使用`Values`字典的属性来执行此操作：

```
foreach(var o in MyObjects.Values)
{
    // do something for each of your objects.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:39:51.037

You can use `SortedList<>` with its method [`IndexOfKey()`](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.indexofkey%28v=vs.100%29.aspx), which uses a binary search.

It returns the zero-based index of the key parameter, if key is found in the `SortedList object; otherwise, -1.`

Take a look at [http://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:52:30.073

Another way to reduce number of iterations:

1.  Sort `MyObjectList`: by rowIndex Asc -> by colIndex Asc
2.  Iterate `MyObjectList` with `foreach` loop until `rowIndex` is equal to `arrRowLength`

This approach eliminates neccessity of iterating wh0le 2d-matrix + reduces number of visited instances in `List<MyObject>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:10:59.263

Another idea - for cases when you need to find only specific row (or column) and not the cell you can use Lookup class:

```
Lookup<int, MyObject> rowIndex = MyObjectList.ToLookup(o => o.rowIndex, o => o); 
```

having this you can quickly retrieve all cells of given row i by simply referencing:

```
IEnumerable<MyObject> rowCells = rowIndex[i]; 
```

# python - 带有 IDLE 的多个 python 会话

> ID：14997729
> 
> 赞同：1
> 
> 时间：2013-02-21T00:31:18.877
> 
> 标签：python, arcgis, python-idle

是否可以同时运行多个 python 脚本？我尝试启动 IDLE 的第二个实例，但是收到一条错误消息：

> “套接字错误：无法建立连接，因为目标机器主动拒绝了它。” 然后“IDLEs 子进程没有建立连接....”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T15:55:44.393

我最终在 CMD shell 中运行 python 脚本，同时在 IDLE 中编辑其他脚本。可能有更好的方法，但这有效。

# python - 高级正方形检测（具有连接区域）

> ID：14997733
> 
> 赞同：10
> 
> 时间：2013-02-21T08:34:53.340
> 
> 标签：python, opencv, image-processing, computer-vision, object-detection

如果正方形在图像中有连接区域，我该如何检测它们。

[我已经测试过OpenCV C++/Obj-C: Advanced square detection](https://stackoverflow.com/questions/10533233/opencv-c-obj-c-advanced-square-detection)中提到的方法

它没有很好地工作。

有什么好主意吗？

![具有连通区域的正方形](../Images/b14fb290546ab6408edf23eec12a0877.png)

```
import cv2
import numpy as np

def angle_cos(p0, p1, p2):
    d1, d2 = (p0-p1).astype('float'), (p2-p1).astype('float')
    return abs( np.dot(d1, d2) / np.sqrt( np.dot(d1, d1)*np.dot(d2, d2) ) )

def find_squares(img):
    squares = []
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    # cv2.imshow("gray", gray)

    gaussian = cv2.GaussianBlur(gray, (5, 5), 0)

    temp,bin = cv2.threshold(gaussian, 80, 255, cv2.THRESH_BINARY)
    # cv2.imshow("bin", bin)

    contours, hierarchy = cv2.findContours(bin, cv2.RETR_CCOMP, cv2.CHAIN_APPROX_SIMPLE)

    cv2.drawContours( gray, contours, -1, (0, 255, 0), 3 )

    #cv2.imshow('contours', gray)
    for cnt in contours:
        cnt_len = cv2.arcLength(cnt, True)
        cnt = cv2.approxPolyDP(cnt, 0.02*cnt_len, True)
        if len(cnt) == 4 and cv2.contourArea(cnt) > 1000 and cv2.isContourConvex(cnt):
            cnt = cnt.reshape(-1, 2)
            max_cos = np.max([angle_cos( cnt[i], cnt[(i+1) % 4], cnt[(i+2) % 4] ) for i in xrange(4)])
            if max_cos < 0.1:
                squares.append(cnt)
    return squares

if __name__ == '__main__':
    img = cv2.imread('123.bmp')

    #cv2.imshow("origin", img)

    squares = find_squares(img)  
    print "Find %d squres" % len(squares)
    cv2.drawContours( img, squares, -1, (0, 255, 0), 3 )
    cv2.imshow('squares', img)

    cv2.waitKey() 
```

我在opencv示例中使用了一些方法，但结果并不好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T14:14:59.007

应用基于距离变换的分水岭变换将分离对象：

![在此处输入图像描述](../Images/52d7ba8dc6784d2fae9b2ee90084881b.png)

在边界处处理对象总是有问题的，并且经常被丢弃，因此左上角的粉红色矩形没有分开根本不是问题。

给定二值图像，我们可以应用距离变换 (DT) 并从中获得分水岭的标记。理想情况下，会有一个现成的函数来寻找区域最小值/最大值，但由于它不存在，我们可以对我们如何阈值 DT 做出适当的猜测。基于标记我们可以使用分水岭进行分割，问题就解决了。现在您可以担心区分矩形组件和非矩形组件。

```
import sys
import cv2
import numpy
import random
from scipy.ndimage import label

def segment_on_dt(img):
    dt = cv2.distanceTransform(img, 2, 3) # L2 norm, 3x3 mask
    dt = ((dt - dt.min()) / (dt.max() - dt.min()) * 255).astype(numpy.uint8)
    dt = cv2.threshold(dt, 100, 255, cv2.THRESH_BINARY)[1]
    lbl, ncc = label(dt)

    lbl[img == 0] = lbl.max() + 1
    lbl = lbl.astype(numpy.int32)
    cv2.watershed(cv2.cvtColor(img, cv2.COLOR_GRAY2BGR), lbl)
    lbl[lbl == -1] = 0
    return lbl

img = cv2.cvtColor(cv2.imread(sys.argv[1]), cv2.COLOR_BGR2GRAY)
img = cv2.threshold(img, 0, 255, cv2.THRESH_OTSU)[1]
img = 255 - img # White: objects; Black: background

ws_result = segment_on_dt(img)
# Colorize
height, width = ws_result.shape
ws_color = numpy.zeros((height, width, 3), dtype=numpy.uint8)
lbl, ncc = label(ws_result)
for l in xrange(1, ncc + 1):
    a, b = numpy.nonzero(lbl == l)
    if img[a[0], b[0]] == 0: # Do not color background.
        continue
    rgb = [random.randint(0, 255) for _ in xrange(3)]
    ws_color[lbl == l] = tuple(rgb)

cv2.imwrite(sys.argv[2], ws_color) 
```

从上图中，您可以考虑在每个组件中拟合椭圆以确定矩形。然后您可以使用一些度量来定义组件是否为矩形。这种方法更有可能适用于完全可见的矩形，并且对于部分可见的矩形可能会产生不好的结果。下图显示了这种方法的结果，如果拟合椭圆的矩形在组件面积的 10% 范围内，则组件是矩形。

![在此处输入图像描述](../Images/35a7e4e2b7756f5e54a9a7f441cdf169.png)

```
# Fit ellipse to determine the rectangles.
wsbin = numpy.zeros((height, width), dtype=numpy.uint8)
wsbin[cv2.cvtColor(ws_color, cv2.COLOR_BGR2GRAY) != 0] = 255

ws_bincolor = cv2.cvtColor(255 - wsbin, cv2.COLOR_GRAY2BGR)
lbl, ncc = label(wsbin)
for l in xrange(1, ncc + 1):
    yx = numpy.dstack(numpy.nonzero(lbl == l)).astype(numpy.int64)
    xy = numpy.roll(numpy.swapaxes(yx, 0, 1), 1, 2)
    if len(xy) < 100: # Too small.
        continue

    ellipse = cv2.fitEllipse(xy)
    center, axes, angle = ellipse
    rect_area = axes[0] * axes[1]
    if 0.9 < rect_area / float(len(xy)) < 1.1:
        rect = numpy.round(numpy.float64(
                cv2.cv.BoxPoints(ellipse))).astype(numpy.int64)
        color = [random.randint(60, 255) for _ in xrange(3)]
        cv2.drawContours(ws_bincolor, [rect], 0, color, 2)

cv2.imwrite(sys.argv[3], ws_bincolor) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:19:48.677

**解决方案1：**

扩大图像以删除连接的组件。查找检测到的组件的轮廓。通过引入一些措施（例如比周长/面积）消除不是矩形的轮廓。

*此解决方案不会检测连接到边框的矩形。*

**解决方案2：**

扩张以删除连接的组件。寻找轮廓。近似轮廓以减少其点（矩形轮廓应为 4 个点）。检查轮廓线之间的角度是否为 90 度。消除没有 90 度的轮廓。

*这应该解决连接到边框的矩形的问题。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:00:05.100

你有三个问题：

1.  矩形不是非常严格的矩形（边缘通常有些弯曲）
2.  他们有很多。
3.  他们经常联系在一起。

似乎您所有的矩形基本上都是相同的大小（？），并且没有太大重叠，但是预处理已经将它们连接起来。

对于这种情况，我会尝试的方法是：

1.  [将您的图像放大](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)几次（正如@krzych 所建议的那样）-这将删除连接，但会导致矩形略小。
2.  使用 scipy[标记](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.find_objects.html)[和](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.label.html)查找对象- 您现在知道图像中每个剩余 blob 的位置和切片。
3.  使用[minAreaRect](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minarearect#minarearect)找到每个矩形的中心、方向、宽度和高度。

您可以使用第 3 步。通过其面积、尺寸比或与边缘的接近程度来测试 blob 是否为有效矩形。

这是一个很好的方法，因为我们假设每个 blob 都是一个矩形，所以`minAreaRect`会找到我们最小封闭矩形的参数。`humoments`此外，如果绝对必要，我们可以使用类似的东西来测试每个 blob 。

这是我在行动中的建议，边界碰撞匹配以红色显示。

![在此处输入图像描述](../Images/ed4802aa2c8cb055466dfee196276b1a.png)

代码：

```
import numpy as np
import cv2
from cv2 import cv
import scipy
from scipy import ndimage

im_col = cv2.imread('jdjAf.jpg')
im = cv2.imread('jdjAf.jpg',cv2.CV_LOAD_IMAGE_GRAYSCALE)

im = np.where(im>100,0,255).astype(np.uint8)
im = cv2.erode(im, None,iterations=8)
im_label, num = ndimage.label(im)
for label in xrange(1, num+1):
    points = np.array(np.where(im_label==label)[::-1]).T.reshape(-1,1,2).copy()
    rect = cv2.minAreaRect(points)
    lines = np.array(cv2.cv.BoxPoints(rect)).astype(np.int)
    if any([np.any(lines[:,0]<=0), np.any(lines[:,0]>=im.shape[1]-1), np.any(lines[:,1]<=0), np.any(lines[:,1]>=im.shape[0]-1)]):
        cv2.drawContours(im_col,[lines],0,(0,0,255),1)
    else:
        cv2.drawContours(im_col,[lines],0,(255,0,0),1)

cv2.imshow('im',im_col)
cv2.imwrite('rects.png',im_col)
cv2.waitKey() 
```

我认为@mmgp 演示的`Watershed`and方法显然更适合分割图像，但这种简单的方法可以根据您的需要有效。`distanceTransform`

# batch-file - 如何以日期方式使用批处理脚本删除文件（用户输入为日期）

> ID：14997734
> 
> 赞同：1
> 
> 时间：2013-02-21T08:35:02.143
> 
> 标签：batch-file

```
@echo off

::setting the local extensions

setlocal enableextensions
setlocal enabledelayedexpansion

::setting the path and date 
:: %~dp0 this cmd fetch the path from where the script is running.(removed)

set /p path=Enter the path where the script has to be Run:
cd %path%
echo.%path%
echo. %date% %time% >>deletionlog.log

del *.* /s /q >null >>deletionlog.log

pause... 
```

这是我正在使用的**脚本**，但因为我是批处理脚本的新手。
我无法从用户那里获取日期，应该删除该日期以下的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:37:45.123

从我的备份脚本中提取：

设置备份目录=“%cd%”

设置 remove_old_after_days=14

forfiles -p %backupdir% -s -m *.zip /D -%remove_old_after_days% /C "cmd /c del @path"

# jsf-2 - 投票标签导致冲突

> ID：14997736
> 
> 赞同：1
> 
> 时间：2013-02-21T08:35:19.987
> 
> 标签：jsf-2, primefaces

下面是 xhtml 正文。

```
 <h:outputText value="#{notificationBean.strMessg}" id="outText" escape="false" styleClass="msgCls"/>
        <p:poll interval="20"  listener="#{notificationBean.browerNotified}" update="outText"  id="notificationPoll" >
        </p:poll>
        <audio id="audio1" src="./images/new_notification.wav"  preload="auto"></audio>

</h:body> 
```

我已将此 xhtml 文件包含在另一个名为“test.xhtml”的 xhtml 中。我的项目由 4-5 个模块组成。当我在 test.xhtml 中调用 poll 标记时，其他 ajax 请求调用失败并显示部分响应错误...

# openlayers - 如何在图层切换器中取消选择图层并仅将所选图层保存在变量中

> ID：14997742
> 
> 赞同：0
> 
> 时间：2013-02-20T22:11:50.270
> 
> 标签：openlayers, layer, arrays

感谢 Richard Greenwood，此功能显示在 layerswitcher 控件中未选择的图层。

```
map.events.register('changelayer', null, function(evt){
       if(evt.property === "visibility") {
          alert(evt.layer.name + " layer visibility changed to " + evt.layer.visibility );
       }
}); 
```

我想知道如何将未选择的图层保存在变量数组中。例如，我在图层切换器中有图层“a”、“b”、“c”，因此未选择“a”，我希望将“b”和“c”保存在 myarray = [b,c] 之类的数组中。然后，我可以遍历这个数组来执行一些只调用层“b”和“c”的过程。

我会很感激一些关于这个的想法，在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:56:07.840

例如：

```
var vlayers = [];
function get_vlayers(){
  vlayers = [];    
  for (var i=0; i<map.layers.length; i+=1) {
    if (map.layers[i].visibility) {
      vlayers.push(map.layers[i]);
    }
  }
}
map.events.register('changelayer', null, get_vlayers) 
```

# java - 最终对象可以修改，但引用变量不能更改

> ID：14997746
> 
> 赞同：7
> 
> 时间：2013-02-21T08:35:51.790
> 
> 标签：java

标记为 final 的引用变量不能重新分配给不同的对象。对象中的数据可以修改，但引用变量不能更改。

根据我的理解，我在下面创建了一个代码，我试图重新分配 155 的新 UserId。随着定义的进行，我只是试图更改对象内的数据。但是参考是一样的。

```
public class FinalClass 
{   
    public static void main(String[] args)
    {
        ChildClass objChildClass = new ChildClass(); 
        objChildClass.UserId = 155;
    }
}

class ChildClass
{
    public static final int  UserId = 145;  
} 
```

我相信我误解了上述概念。

请举例说明。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T08:37:09.000

您**不能**使用“=”运算符更改最终值。如果这样做，您将尝试更改引用（或原语）并`final`声明无法更改。

您**可以**更改现有对象的字段：

```
public static final User user = NewUser(145);

    public static void main(String[] args)
    {
        user.setId(155);
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-05T17:45:16.357

你对这个概念的理解是正确的。等等，我将尝试解释 final 关键字的美妙之处。我把它分成三个部分：

1.  如果您对任何成员（局部变量/实例变量/方法）使用 final 关键字，则意味着您无法在整个程序中修改该特定变量的值（如果方法，则不能被覆盖）。
2.  如果您将一个类声明为最终类，则意味着没有其他类（在相同或不同的包中）可以扩展该类（最终类），换句话说，最终类永远不能被子类化，但是，最终类可以用作“超类参考”。
3.  第三是你所指的情况。如果任何对象引用变量被声明为 final，那么这意味着最终引用变量在其整个生命周期中永远不能引用不同的对象，但可以修改对象中的数据（您的引用变量所引用的对象）。

我在这里写了一个类，希望能澄清你所有的疑惑。

```
public class FinalSampleTestDrive {

public static void main(String[] args) {

    final FinalSample obj = new FinalSample();

    FinalSample obj2 = new FinalSample();
    FinalSample obj3 = new FinalSample();

    obj2.setName("arya");
    System.out.println(obj2.getName());

    obj3 = obj2;  //allowed

    System.out.println(obj3.getName());

    //obj = obj2 //not allowed as obj is final and can not be modified

    obj.setName("shubham");
    System.out.println(obj.getName());

    //but the value of the instance variables, the obj is referring to
    //can change

    obj.setName("shivam");
    System.out.println(obj.getName());

}

} 
```

这是在这里实例化的 FinalSample 类：

```
public class FinalSample {

private String name;
private String age;

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAge() {
    return age;
}
public void setAge(String age) {
    this.age = age;
}

} 
```

你尝试在你的机器上以不同的方式运行它。

快乐编码:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T08:43:28.193

在您修改后的问题中，更改会使其正常工作，我不确定这是否是您想要的。

```
public class FinalClass 
{   
    public static void main(String[] args)
    {
        final ChildClass objChildClass = new ChildClass(); 
        ^^^^^
        objChildClass.UserId = 155;
        //objChildClass = new ChildClass();
    }
}

class ChildClass
{
    public static int  UserId = 145;  
                ^^^
} 
```

现在 objChildClass 是 final 的，你可以修改它的成员，但不能改变它指向的对象。UserId 不再是最终的，因此可以更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T08:37:46.980

int 是原始类型，而不是对复杂类型的引用。[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T08:38:15.877

UserId 是 int 类型，它是一种原始类型，因此适用的规则与 Objects 不同。原始变量不是指针，而是值本身。但即使您使用的是整数（对象类型），您也无法更改其值，因为原语的包装类型是不可变的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T08:39:15.623

> 我相信我误解了上述概念。

你得到它是正确的，但你没有正确地测试它。如果 UserId 是具有`id`（或任何名称）属性的类，那么您将能够更改它的值，但不能更改引用。

在这里，您创建的是原始类型变量而不是对象。尝试使用包装类 Integer 进行相同的测试。

# javascript - RequestAnimationFrame 行为..它是如何工作的？

> ID：14997747
> 
> 赞同：2
> 
> 时间：2013-02-21T08:35:52.260
> 
> 标签：javascript, performance-testing

我一直在玩 chrome 的 requestAnimationframe，想知道它的实际行为如何。

当我加载我的画布并绘制时，我得到了稳定的 60FPS。如果我像点击一样使用偏移量滚动并在地图上拖动，FPS 将下降（如预期的那样）......一旦我停止在地图上拖动，FPS 再次按预期爬回稳定的 60fps。

在这里，我想知道这是否是为 requestAnimationframe 考虑的。如果我拖动地图直到 FPS 下降，长时间下降到 30 以下，一旦我停止拖动，它就会重新爬升，但这次它达到 30FPS 并且不会更高。似乎浏览器决定 30FPS 可能是最好的选择。

这是由浏览器故意完成的，我一直试图找出是否是这种情况。因为如果我不低于 30fps 太久，它将达到 60fps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:52:58.940

是的，这是浏览器能够做的事情。
“它应该如何工作”并不是任何人都可以在这里回答的。

原因很简单，引擎盖下是 100% 特定于浏览器的。
但可以肯定地说，是的，浏览器能够决定何时应该将您锁定为 30Hz 刷新，而不是 60Hz 刷新。

说明为什么会这样：

`requestAnimationFrame()`如果供应商需要，它也与 Page Visibility API 相关联（对于 Chrome 来说非常正确）。
基本上，如果页面不可见，他们可以将`requestAnimationFrame()`更新速度减慢到每秒几次或完全暂停更新。

鉴于这些知识，完全有可能相信正在发生以下两件事之一：

1.  他们故意将您的速度限制在 30fps，因为根据平均性能数据，他们觉得您的体验会在那里更加稳定

2.  他们故意限制你，但是系统中有一些错误（或一些不那么宽松的数学）阻止你在海岸清除后回到 60，如果他们*使用*平均性能数据，那么这可能是问题的一部分。

无论哪种方式，它至少大部分是故意的，唯一未解决的问题是为什么它坚持 30fps。事后你有没有让它静置 20 或 30 分钟，然后看看它是否会在任何时候恢复？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T05:41:10.647

您可以从 Chrome DevTools 运行时间帧分析，以寻找会减慢动画时间的特立独行 JS。
[https://developers.google.com/chrome-developer-tools/docs/timeline](https://developers.google.com/chrome-developer-tools/docs/timeline)

RAF 会找到最好的地方来绘制您的更改，而不是最接近的地方。因此，如果 RAF 回调中的 JS 花费了两帧的时间（在您的 60hz 硬件上每帧大约 16ms），那么您的 FPS 将下降到 30。

来自 Paul Irish 通过 Boris
实际上，“它目前的上限为 1000/(16 + N) fps，其中 N 是执行回调所需的毫秒数。如果你的回调需要 1000 毫秒来执行，那么它的上限是 1fps。如果你的回调需要 1ms 执行，你会得到大约 60fps。” （谢谢，鲍里斯） [http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)

# code-behind - 从后面的 vb 代码中找到 HTML 输入单选按钮，如果值为空，则隐藏单选按钮

> ID：14997751
> 
> 赞同：1
> 
> 时间：2013-02-21T08:36:15.623
> 
> 标签：code-behind, html-input, htmlcontrols

我需要帮助从 onLoadpage 后面的 vb 代码中查找 HTLM 输入单选按钮，如果单选按钮值为空，我需要隐藏单选按钮。我试过`

```
 For Each gvr As DataListItem In DataList1.Items
            Dim hf As HtmlInputRadioButton = gvr.FindControl("RadioButton1")

            If hf.Value = " " Then
                hf.Visible = False
            Else

            End If
        Next` 
```

我收到一条错误消息：无法将“System.Web.UI.WebControl.RadioButton”类型的对象转换为字符串“System.Web.UI.HTMLControl.HTMLINPUTRadioButton”提前谢谢

# iphone - 使用 Kal 日历

> ID：14997752
> 
> 赞同：3
> 
> 时间：2013-02-21T08:36:19.800
> 
> 标签：iphone, ios, xcode, ios6, kal

目前我已经在其中一个中实现了 Kal 日历，`tabBarViewControllers`并且布局非常完美。我现在想创建一个用户单击的按钮，日历会立即在月历视图中突出显示当前日期，即“今天”按钮。

布局再次完美，但下面列出的最后一行代码出现了问题。

```
*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[SecondViewController showAndSelectToday]：无法识别的选择器发送到实例 0x927e6f0”

```

这是我对我`secondViewController`的类所做的所有实现，它是`UIViewController`.

```
- (void)viewDidLoad
{
    KalViewController *calendar = [[KalViewController alloc] init];
    [self.view addSubview:calendar.view];
    [自我addChildViewController：日历]；
    [[self navigationController] initWithRootViewController:calendar];
    calendar.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Today" style:UIBarButtonItemStyleBordered target:self action:@selector(showAndSelectToday)];
}

```

目标：不通过 APP DELEGATE 提供“今天”功能，而是通过单独的课程，比如我的`secondViewController`.

注意：假日示例应用程序正是我希望“今天”的行为，但假日示例项目在应用程序委托中实现了今天的按钮行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T20:59:04.577

您需要将 KalViewController 存储为实例变量（假设为 _calendar），然后在您的 secondViewController 中实现以下方法：

```
- (void)showAndSelectToday
{
    [_calendar showAndSelectDate:[NSDate date]];
} 
```

# iphone - 使用 ASIHttp 不同的下载方式会产生不同的结果

> ID：14997760
> 
> 赞同：0
> 
> 时间：2013-02-21T08:37:06.813
> 
> 标签：iphone, ios, objective-c, asihttprequest, nsoperationqueue

我最近在尝试ASINetworkQueue，在这个过程中我遇到了一个很奇怪的问题。

我尝试从大约 30 MB 大小的服务器下载一个 zip，当我使用简单的 ASIHttpRequest 下载文件时，文件仅在 2 分钟内下载完毕，但是当我尝试将该请求放入 ASINetworkQueue 时，下载时间出人意料地增加了 5 分钟，太奇怪了..如果有人能说有什么不正确的话，我会放代码片段。

```
[self setNetworkQueue:[ASINetworkQueue queue]];
[[self networkQueue] setDelegate:self];
[[self networkQueue] setShouldCancelAllRequestsOnFailure:NO];
[[self networkQueue] setMaxConcurrentOperationCount:1];
[[self networkQueue] setShowAccurateProgress:YES];

if (!progressBar)
{
    progressBar = [[UIProgressView alloc] init];
}
[[self networkQueue] setDownloadProgressDelegate:progressBar];
[[self networkQueue] setRequestDidFinishSelector:@selector(requestFinished:)];
[[self networkQueue] setRequestDidFailSelector:@selector(requestFailed:)];
[[self networkQueue] setQueueDidFinishSelector:@selector(queueFinished:)];

NSArray *arrFilenames = [[NSArray alloc] initWithObjects:@"Audio", nil];

for (NSString *strFilename in arrFilenames)
{

    NSString *strDestFolderName = @"Destination Path";

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:  [NSString stringWithFormat:@"%@.zip", strDestFolderName]];

    if(!fileExists)
    {
        NSURL *url = <File Url to be downloaded>;

        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

        // This file has part of the download in it already
        [request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"%@.zip.download", strDestFolderName]];
        [request setAllowResumeForFileDownloads:YES];
        [request setDownloadDestinationPath:[NSString stringWithFormat:@"%@.zip", strDestFolderName]];

        [request setTimeOutSeconds:30];
        [request setShouldContinueWhenAppEntersBackground:YES];
        [request setNumberOfTimesToRetryOnTimeout:2];
        request.userInfo = [NSDictionary dictionaryWithObjectsAndKeys: strFilename, @"fileName", nil];

        [[self networkQueue] addOperation:request];

    }

}

[[self networkQueue] go]; 
```

通过使用上面的代码，下载 Audio.zip 大约需要 5 分钟。但是当我执行以下操作时，需要 2 分钟。

```
NSArray *arrFilenames = [[NSArray alloc] initWithObjects:@"Audio", nil];

for (NSString *strFilename in arrFilenames)
{

    NSString *strDestFolderName = @"Destination Path";

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:  [NSString stringWithFormat:@"%@.zip", strDestFolderName]];

    if(!fileExists)
    {
        NSURL *url = <File Url to be downloaded>;

        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

        // This file has part of the download in it already
        [request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"%@.zip.download", strDestFolderName]];
        [request setAllowResumeForFileDownloads:YES];
        [request setDownloadDestinationPath:[NSString stringWithFormat:@"%@.zip", strDestFolderName]];

        [request setTimeOutSeconds:30];
        [request setShouldContinueWhenAppEntersBackground:YES];
        [request setNumberOfTimesToRetryOnTimeout:2];
        request.userInfo = [NSDictionary dictionaryWithObjectsAndKeys: strFilename, @"fileName", nil];

        [request setDidFinishSelector:@selector(requestFinished:)];
        [request setDidFailSelector:@selector(requestFailed:)];
        [request setDownloadProgressDelegate:progressBar];

        [request start];

    }

} 
```

注意 - 我只测试一个文件，而不是多个文件，但我的目标是下载多个文件..

谢谢。

# java - 为目录中的每个文件制作 JButton

> ID：14997765
> 
> 赞同：1
> 
> 时间：2013-02-21T08:37:31.560
> 
> 标签：java, swing, file, jbutton

我正处于学习 Java 的早期阶段，目前正在研究 GUI。

我希望能够制作一系列与文件夹中找到的每个文件相对应的按钮。例如，文件名可能出现在按钮内。在这个阶段，按钮不需要做任何事情！

我设法制作了单独的程序，这些程序 (a) 生成文件夹中的文件名数组。(b) 使用 for 循环生成一组按钮。然而，我尝试将两者结合起来是可笑的。我对 OO Java 的了解还不够。

请问有人可以告诉我如何进行吗？请保持简单！

## ButtonGrid.java

```
import javax.swing.JFrame; 
import javax.swing.JButton; 
import java.awt.GridLayout;

public class ButtonGrid {

        JFrame frame=new JFrame(); 
        JButton[][] grid; 

        public ButtonGrid(int width, int length){ 
                frame.setLayout(new GridLayout(width,length)); 
                grid=new JButton[width][length]; 
                for(int y=0; y<length; y++){
                        for(int x=0; x<width; x++){
                                grid[x][y]=new JButton("("+x+","+y+")"); 
                                frame.add(grid[x][y]); 
                        }
                }
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack(); 
                frame.setVisible(true); 
        }
        public static void main(String[] args) {
                new ButtonGrid(3,3);
        }
} 
```

## 列表文件.Java

```
import java.io.File;

public class ListFiles 
{

 public static void main(String[] args) 
{

  String path = "."; 
   String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) 
  {
   files = listOfFiles[i].getName();
          System.out.println(files);
   }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:06:24.000

代码 ：

```
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.io.File;
import javax.swing.JButton;

public class ListFiles
{
    public static void main(String[] args) {
        JFrame frame=new JFrame();
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(2,5));
        String path = ".";
        String file;
        File folder = new File(path);
        File[] listOfFiles = folder.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {
            file = listOfFiles[i].getName();
            panel.add( new JButton( file ) );
        }
        frame.add( panel ) ;
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:08:27.427

将 ListFiles.java 的 main 方法中的代码放入 ButtonGrid.java 的构造函数中

```
public ButtonGrid(){ 

            File folder = new File(path);
            File[] listOfFiles = folder.listFiles();
            // about even width and height but this should be changed
            int width = (int)Math.ceil( Math.sqrt( listOfFiles.length ) );

            frame.setLayout(new GridLayout(width,width)); 
            grid=new JButton[width][width];

            int count = 0;
            for(int y=0; y < width; y++){
                    for(int x=0; x<width; x++){
                        if( count < listOfFiles.length ){
                            grid[x][y]=new JButton(listOfFiles[count].getName()); 
                            frame.add(grid[x][y]); 
                            count++;
                        }
                    }
            }
            ... 
```

它应该很简单，我还没有测试过，但如果没有，一些非常相似的东西应该可以工作。在我打字时还添加了另一个答案，但我的代码更接近您的原始帖子，所以我还是发布了。:)

# c# - 企业库导致运行缓慢？

> ID：14997767
> 
> 赞同：0
> 
> 时间：2013-02-21T08:37:34.603
> 
> 标签：c#, asp.net-mvc, performance, enterprise-library

我已将 Enterprise Libarary 缓存添加到我的 Web 应用程序中。

经过数百个请求（用提琴手模拟）后，我的网络服务变得非常慢。

几个小时后，性能又好了。

这会导致我想到缓存问题吗？

是否有任何智能工具或想法如何以智能方式进行调查？

由于我的 iis 进程，我看到 CPU 变得非常高（90%）

# jquery - jQuery：.load() 已加载页面中的页面

> ID：14997775
> 
> 赞同：2
> 
> 时间：2013-02-21T08:37:48.263
> 
> 标签：jquery, load

我用 .load() 加载一个菜单，它运行良好。但我似乎无法以同样的方式从这个预加载的菜单中加载子菜单。

这是我的菜单：

```
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Titre de la page</title>
  <link rel="stylesheet" href="style.css">
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="loader.js"></script>
</head>
<body>
<div id="wrapper">
    <div id="menu">
        <img src="images/logo.jpg" /><br>
        Illustrator &amp; Art Director
        <p><br><br><br>
        <a href="#" id="about">About Ātman</a><br>
        <a href="#" id="illustration">Illustration</a><br>
        <a href="#" id="graphic">Graphic Art</a><br>
        <a href="#" id="contact">Contact</a></p>
    </div>
    <div id="main"></div>
    <div id="boutons"></div>
</div>
</body> 
```

这是 loader.js：

```
$(document).ready(function(){
    // load index page when the page loads
    $("#main").load("illustration.html #aacc");
    $("#boutons").load("boutons.html #illustrations");
    $("#about").click(function(){
        $("#main").load("about.html");
    });
    $("#illustration").click(function(){
        $("#main").load("illustration.html #aacc");
        $("#boutons").load("boutons.html #illustrations");
    });
    $("#graphic").click(function(){
        $("#main").load("graphic.html #navet");
        $("#boutons").load("boutons.html #graphic");
    });     
    $("#contact").click(function(){
        $("#main").load("contact.html");
    });
$("#img1").click(function(){
    $("#main").load("illustration.html #aacc");
});
$("#img2").click(function(){
    $("#main").load("illustration.html #navet");
});
    $("#lol").click(function(){
        alert('you clicked me!');
    });
}); 
```

这是从菜单加载的子菜单（boutons.html）：

```
<body>
    <div id="illustrations">
        <table border="0" width="200" cellpadding="1" cellspacing="1">
            <tr>
                <td><a href="#" id="img1"><img src="images/bouton/BI1.jpg" alt="" /></a></td>
                <td><a href="#" id="img2"><img src="images/bouton/BI5.jpg" alt="" /></a></td>
                <td><a href="#" id="lol">About Ātman</a></td>
            </tr>
        </table>
    </div>
</body> 
```

这是我想从 illustration.html 加载的内容：

```
<body>
    <div id="aacc">
        <img src="images/I/AACC.jpg" alt="AACC" />
        <div id="en">NO ADVERTISING EXCEPT BETC   poster for open door day (concept, art direction, paper sculpture)</div>
        <div id="fr">PAS DE PUB SAUF BETC   affiche pour la journée porte ouverte (concept, direction artistique, sculpture en papier)</div>
    </div>
    <div id="navet">
        <img src="images/I/navet.jpg" alt="navet" />
        <div id="en">NAVET  illustration for comics cover (paper sculpture)</div>
        <div id="fr">NAVET  illustration pour couverture de bande dessinée (sculpture en papier)</div>
    </div>  
</body> 
```

我为测试做了“大声笑”，但它不起作用。没发生什么事。

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:50:47.973

您应该在 DOM 中加载节点*后*绑定事件，例如：

代替

```
$(document).ready(function(){
     $("#boutons").load("boutons.html #illustrations");
     //...

     //#illustrations is not loaded yet, $('#img1') and $('#img2') are empty
     $("#img1").click(function(){
         $("#main").load("illustration.html #aacc");
     });
     $("#img2").click(function(){
         $("#main").load("illustration.html #navet");
     });
}) 
```

你可以 ：

```
$(document).ready(function(){
     $("#boutons").load("boutons.html #illustrations",
         //this callback is called *after* .load() has completed
         function(){
             $("#img1").click(function(){
                 $("#main").load("illustration.html #aacc");
             });
             $("#img2").click(function(){
                 $("#main").load("illustration.html #navet");
             });
         }
     ); 
```

另一种方法（更干净的恕我直言）是将事件*委托*给从一开始就在这里的节点，并且永远不会离开 DOM：

```
$(document).ready(function(){
    // this basically says "if any child of '#boutons' matches the '#img1'
    // selector, execute this click handler"
    $('#boutons').on( 'click', '#img1', function(){
        //inside this handler, 'this' refers to the '#img1' item
        $("#main").load("illustration.html #aacc");
    });
    $('#boutons').on( 'click', '#img2', function(){
        $("#main").load("illustration.html #navet");
    });

    //...
    $("#boutons").load("boutons.html #illustrations");
}); 
```

有关该`on`函数的更多详细信息，请查看[jQuery 文档](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:55:01.263

我相信事件委托是您正在寻找的。

取决于您的 JQuery 版本，您可能希望使用[`live`](http://api.jquery.com/live/)或[`on`](http://api.jquery.com/on/)代替`click`.

# macos - 在 mac os 上用 nasm 编译汇编程序

> ID：14997777
> 
> 赞同：3
> 
> 时间：2013-02-21T08:37:53.867
> 
> 标签：macos, gcc, assembly, nasm

所以，我在 asm 上写了一些指令，然后编译它们。

```
nasm -f macho test.asm 
```

现在，nasm 生成 obj 文件 test.o

```
gcc test.o 
```

返回下一个错误：

> *   ld：警告：忽略文件 test.o，文件是为不受支持的文件格式构建的，该文件格式不是被链接的体系结构 (x86_64)
> *   架构 x86_64 的未定义符号：“_main”，引用自：
> *   从 crt1.10.6.o 开始 ld：未找到架构 x86_64 collect2 的符号：ld 返回 1 退出状态

在 gcc 行中，我使用了 -arch i386 (x86_64)，返回相同的错误。

有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-29T17:32:55.817

这些命令对我有用（OS X 10.12 x64）：

```
nasm -f macho test.asm -DDARWIN
ld -o test test.o -arch i386 -lc -no_pie -macosx_version_min 10.12 -lSystem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:44:14.913

`macho`是 32 位格式。
尝试使用`macho64`而不是`macho`. 完整线路：

```
nasm -f macho64 test.asm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-24T09:02:48.370

尝试更新您的 nasm 版本并使用以下命令：

```
/usr/local/bin/nasm -f macho64 ${file}
ld  -o ${file_path}/${file_base_name} -e _main ${file_path}/${file_base_name}.o
${file_path}/${file_base_name} 
```

# xamarin.android - 在 GenericTinyMessage 中将“发件人”设置为什么

> ID：14997779
> 
> 赞同：2
> 
> 时间：2013-02-21T08:38:01.383
> 
> 标签：xamarin.android

我在我的 Mono For Android 应用程序中成功使用了 [TinyMessenger][1]，并且正在派生从 GenericTinyMessage 分类的消息，以便我可以使用它们发送内容。

GenericTinyMessage 需要将 Sender 传递给构造函数，如 wiki 中所述：

```
// And if your message needs some "content" we provide a simple
// generic message (GenericTinyMessage<TContent>) out of the box.
//
// We can use that message directly or derive from it to gain a 
// strongly typed "content" property
public class MyMessageAgain : GenericTinyMessage<String>
{
    /// <summary>
    /// Create a new instance of the MyMessageAgain class.
    /// </summary>
    /// <param name="sender">Message sender (usually "this")</param>
    /// <param name="content">Contents of the message</param>
    public MyMessageAgain(object sender, String content)
        : base(sender, content)
    {
        // We now have a public string property called Content
    }
} 
```

*但是，我在静态类中使用它，**因此*没有用于*sender*的。我可以使用*null*，还是必须提供发送对象？

谢谢，

詹姆士

# php - Zend_Db_Adapter_Oracle：使用 ORDER BY、LIMIT 和 WHERE 进行选择

> ID：14997786
> 
> 赞同：3
> 
> 时间：2013-02-21T08:38:25.843
> 
> 标签：php, sql, oracle, zend-framework

我正在尝试从 Oracle 11g 数据库中选择一些记录。该语句用于为 HTML 表实现某种“过滤”功能。

要求：限制分页和排序过滤结果。

查询是用**Zend_Db_Select创建的**

****像魅力一样工作：* ***

```
$select->where('APPLICATIONS LIKE ?', '%MYAPP1%');
$select->where('APPLICATIONS NOT LIKE ?', '%GENESIS%');
$select->limit(20); 
```

= 1 个匹配结果（没关系！）

当我尝试对过滤结果进行排序时会出现问题：

```
$select->order('PATH ASC'); 
```

= 3 个匹配结果 ??

我认为它与 Zend DB Select 生成的查询有关，它看起来像这样：

```
 SELECT z2.*
    FROM (
        SELECT z1.*, ROWNUM AS "zend_db_rownum"
        FROM (
            SELECT "APPS".* FROM "APPS" WHERE (APPLICATIONS LIKE '%MYAPP1%') AND (APPLICATIONS NOT LIKE '%GENESIS%') ORDER BY "PATH" ASC
        ) z1
    ) z2
    WHERE z2."zend_db_rownum" BETWEEN 1 AND 20 
```

*   如果我在没有订单的情况下运行查询，一切都很好。
*   如果我无限制地运行查询，一切都很好。
*   如果我使用 order + limit -> 错误结果运行查询。

如果我接受声明并将订单放在“BETWEEN 1 AND 20”之后，它就像我想要的那样工作。但是Zend DB Select 怎么改呢？

重要提示：我正在对 Oracle VIEW 进行查询，如果我对“表”进行查询，它也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:16:46.213

显然，Oracle 对查询的解释并不是 Zend 框架的意图：Oracle 似乎在排序之前将 ROWNUM 与***内部查询***的行号计数相关联，因此别名 zend_db_rownum 在*外部查询*的 where 子句中提供了错误的数字。

由于我们无法控制 Zend 框架生成 SQL 以响应 limit() 指令的方式，所以我能想到的唯一解决方法是***跳过***Zend limit() 指令，而是按照以下方式进行操作：

```
$select->where('APPLICATIONS LIKE ?', '%MYAPP1%');
$select->where('APPLICATIONS NOT LIKE ?', '%GENESIS%');
$select->order('PATH ASC');

$sql = $select->__toString();

$sql = "select * from (" . $sql . ") where ROWNUM between 1 and 20";

$stmt = $db->query( $sql, array());
$result = $stmt->fetchAll(); 
```

当然，这种解决方法仅在您**不开发跨数据库的情况下****才**合法，因此您的代码不必与数据库**无关**。这意味着，如果您使用我建议的解决方法，您将限制您对 Oracle 的解决方案。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:24:32.323

如果你检查SQL生成没有错误，并且WHERE子句确实没有不同的条件，可能是Oracle服务器错误。要检查它，请在不同的 Oracle 服务器版本或不同的 Oracle 服务器补丁级别上尝试。****

# actionscript-3 - 无法正确识别的 Unicode

> ID：14997790
> 
> 赞同：2
> 
> 时间：2013-02-21T08:38:32.263
> 
> 标签：actionscript-3, apache-flex, unicode, flex4.5, flex4.6

我在我的应用程序中使用 Unicode

```
for(var i:int=0;i<16;i++) {
  for(var j:int=0;j<16;j++) {
    button = new Button();
    button.x = j*35+10;
    button.y = i*20+10;
    button.height = 21;
    button.width = 35;
    button.setStyle("borderColor","red");
    button.setStyle(" fontWeight","bold");
    button.label= String.fromCharCode(0x2190+16*i+j);
    button.addEventListener(MouseEvent.CLICK,greekalpha_clickHandler);
    vgr.addElement(button);
  }
} 
```

但是当我运行这段代码时，一些符号被正确识别，而另一些则没有![](../Images/4154a42d67add037a3222c55dca82fc0.png)

突出显示的单词可以正确识别，而其他单词则不能。我在这段代码中犯了什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T03:02:54.933

（我只是重新发布明显的答案，以将该问题从未回答的列表中删除。欢迎评论中的原始回答者改为发布。根据我自己的经验，我也知道给定的答案应该有效。 )

为了确保 Unicode 符号正确显示，您需要嵌入 Unicode 字体，例如 Arial Unicode MS 或 Lucida Sans Unicode，并将您的文本对象设置为该字体（它不会自动发生）。

然后，通过`advancedAntiAliasing = true;`或通过将 Flash Professional 中的 Anti-alias 属性设置为“Anti-Alias for readability”来打开消除锯齿。

我认为，除此之外的任何问题都是特定于设备的。

# jquery - jQuery 在 jQuery 仍在处理时附加加载图像

> ID：14997794
> 
> 赞同：0
> 
> 时间：2013-02-21T08:38:55.843
> 
> 标签：jquery, loading

我的标题 ![这是我的标题](../Images/97aed1ae9182b94a4cc3c649ecbafa06.png)

这是我的调用函数 jquery/ajax ![这是我的ajaxcall1](../Images/d7d0649115f812972061ffc2c1b2a9a0.png)

这是带有日期选择器的 ajax

![这是ajaxcall2](../Images/deb968e5b0661cc1801acfd9f062e1a8.png)

更新****第一部分 ![这是第一部分](../Images/2ff858d257f5c035e8f4f4bb35823426.png) 第二部分 ![这是加载 jQuery 进程的打印屏幕](../Images/44d8d8f92ebad618293c9456cfed35d5.png)

我的 jQuery 代码

```
jQuery(function() {
    jQuery('<img src="images/ajax-loader.gif" id="loading" />').appendTo(".icompany_quo_for");

    jQuery( "#idatepicker" ).datepicker().find('img#loading').remove();;
}); 
```

我的 jquery 代码正确吗？因为我试图做的是在 jQuery 仍在加载 jQuery 的 UI 时显示正在加载的 .gif 图像，所以这是 datepicker；

更新 ** 因为当 jQuery UI 加载页面时，页面被冻结，我无法键入或单击任何内容......

如果代码不正确，请告诉我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:49:54.030

如果`#loading`是`#iddatepicker`您的代码的孩子是正确的。我不知道 jq ui 的 datepicker 功能，但是查看文档我会这样做：

```
$(function() {
    var $loading = $('<img src="images/ajax-loader.gif" id="loading" />').appendTo('.icompany_quo_for');

    $('#idatepicker').datepicker({
        onClose: function() {
            $loading.remove();
        }
    });
}); 
```

# php - 我应该如何在 mysql 数据库中存储一系列数据？

> ID：14997795
> 
> 赞同：0
> 
> 时间：2013-02-21T08:38:59.057
> 
> 标签：php, mysql

假设我必须制作一个关于药物列表的数据库表。

*   第一列是具有自动增量的唯一标识符字段。例如，“1”
*   第二列包含药物的名称。例如，“曲马多”
*   第三列包含权重列表。例如，“30 克、40 克、50 克、60 克”

使用 php while 循环和数组，我可以使用以下方法回显此数据：

```
while ($row = mysql_fetch_array($result)) {
   echo "Drug Name: {$row[1]} Drug Weights: {$row[2]}"
} 
```

虽然这可行，但我知道这绝对不是最好的方法。权重列表必须是 varchar，而不是实际的单个整数。如第三列所示，存储和回显单个产品的一系列信息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:41:13.660

在单独的联轴器表中。制作一个包含所有可能权重（id、值）的表“weights”，并制作一个包含 2 列（组合主键）的“drugs_to_weights_coupling”：一个带有药物的 id，一个带有重量的 id。

这被称为“多对多”关系，可以[很容易地用谷歌搜索。](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)

# python - 大多数Pythonic方式打印*最多*一些小数位

> ID：14997799
> 
> 赞同：23
> 
> 时间：2013-02-21T08:39:09.343
> 
> 标签：python, floating-point, string-formatting

我想格式化一个最多包含 2 个小数位的浮点数列表。但是，我不想要尾随零，也不想要尾随小数点。

因此，例如，`4.001`=> `4`、`4.797`=> `4.8`、`8.992`=> `8.99`、`13.577`=> `13.58`。

简单的解决方案是。但是，这看起来相当丑陋，而且似乎很脆弱。任何更好的解决方案，也许有一些神奇的格式标志？~~`('%.2f' % f).rstrip('.0')`~~`('%.2f' % f).rstrip('0').rstrip('.')`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T11:31:54.670

`g`格式化程序将输出限制为有效`n`数字，删除尾随零：

```
>>> "{:.3g}".format(1.234)
'1.23'
>>> "{:.3g}".format(1.2)
'1.2'
>>> "{:.3g}".format(1)
'1' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-21T11:30:58.780

您需要将剥离`0`和`.`剥离分开；这样你就永远不会剥离自然`0`。

或者，使用该`format()`函数，但这实际上归结为同一件事：

```
format(f, '.2f').rstrip('0').rstrip('.') 
```

一些测试：

```
>>> def formatted(f): return format(f, '.2f').rstrip('0').rstrip('.')
... 
>>> formatted(0.0)
'0'
>>> formatted(4.797)
'4.8'
>>> formatted(4.001)
'4'
>>> formatted(13.577)
'13.58'
>>> formatted(0.000000000000000000001)
'0'
>>> formatted(10000000000)
'10000000000' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T13:46:07.863

一般来说，使用 String[s] 可能会很慢。但是，这是另一种解决方案：

```
>>> from decimal import Decimal
>>> precision = Decimal('.00')
>>> Decimal('4.001').quantize(precision).normalize()
Decimal('4')
>>> Decimal('4.797').quantize(precision).normalize()
Decimal('4.8')
>>> Decimal('8.992').quantize(precision).normalize()
Decimal('8.99')
>>> Decimal('13.577').quantize(precision).normalize()
Decimal('13.58') 
```

您可以在这里找到更多信息：http: [//docs.python.org/2/library/decimal.html](http://docs.python.org/2/library/decimal.html)

# shell - 如何获得 shell 脚本中最后一个递增的值？

> ID：14997800
> 
> 赞同：0
> 
> 时间：2013-02-21T08:39:12.543
> 
> 标签：shell

我正在尝试获取变量计数的最后一个增量值，但是每次打印初始值 0 时，我如何才能获得变量计数的最后一个增量值。

```
 count=0

 mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT Department FROM
 entrytests_datetime WHERE Discipline='msc'" | while read department
 do

    echo "V,department_$count=$department"
    let "count++"
 done

 echo "V,count=$count"

 echo "E,resume" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:46:41.113

这是因为管道 while 循环创建了一个子 shell，并且子进程无法更改父进程的环境。试试这个：

```
 #!/usr/bin/bash

 count=0

 while read department
 do
    echo "V,department_$count=$department"
    let "count++"
 done < <(mysql -uroot -proot -Dproject_ivr_db -rN --execute \
      "SELECT Department FROM entrytests_datetime WHERE Discipline='msc'")

 echo "V,count=$count"

 echo "E,resume" 
```

我不得不说，这不符合 Posix。`set -o posix`通过在 bash 中设置并查看错误来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:51:20.697

问题是循环在子 shell 中执行，并且值不会（也不能）传播到父 shell。它在子shell中执行，因为管道中的命令必须如此。你有两个选择：

1.  打印子外壳内的值
2.  使循环在主外壳中运行

第一个选项很容易仅使用 POSIX shell 结构。只需将循环用花括号中的最终 echo 包裹起来：

```
count=0
mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT Department FROM
    entrytests_datetime WHERE Discipline='msc'" | {
    while read department; do
        echo "V,department_$count=$department"
        let "count++"
    done
    echo "V,count=$count"
    echo "E,resume"
} 
```

由于脚本似乎到此结束，这应该是可行的。对于第二个选项，我只能在 shell 中看到一种支持*进程替换**扩展***的方法，例如 bash：

```
count=0
while read department; do
    echo "V,department_$count=$department"
   let "count++"
done < <(mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT Department
    FROM entrytests_datetime WHERE Discipline='msc'")
echo "V,count=$count"
echo "E,resume" 
```

我建议*不要*在 bash 中编写脚本；由于性能原因，许多系统现在使用更简单的 shell `/bin/sh`，这些 shell 通常不支持进程替换扩展。

# java - 数组导致我的程序崩溃

> ID：14997802
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:39:18.687
> 
> 标签：java, android, arrays, date, calendar

我正在尝试制作一个检查一年中日期的应用程序。每当我声明一个大于某个数字的数组时，我都会收到停止响应消息。我应该怎么办？

```
 public class Main extends Activity {

int[] payDays = new int[11];
int dayOfYear;
Calendar cal;

Intent goToSales, goToChains, goToCheck, goToReference;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cal = Calendar.getInstance();
    dayOfYear = cal.get(Calendar.DAY_OF_YEAR);

    payDays = new int[11];

    payDays[0] = 60;
    payDays[1] = 88;
    payDays[2] = 123;
    payDays[3] = 151;
    payDays[4] = 179;
    payDays[5] = 214;
    payDays[6] = 242;
    payDays[7] = 270;
    payDays[8] = 305;
    payDays[9] = 333;
    payDays[10] = 361;
    payDays[11] = 31;

    // Phew! Checks when to send the notification
    if (dayOfYear == payDays[0] || 
        dayOfYear == payDays[1] ||
        dayOfYear == payDays[2] ||
        dayOfYear == payDays[3] ||
        dayOfYear == payDays[4] ||
        dayOfYear == payDays[5] ||
        dayOfYear == payDays[6] ||
        dayOfYear == payDays[7] ||
        dayOfYear == payDays[8] ||
        dayOfYear == payDays[9] ||
        dayOfYear == payDays[10] ||
        dayOfYear == payDays[11]) 
    {

        Notification noti = new Notification.Builder(this)
        .setContentTitle("MCHelper")
        .setContentText("It's the end of the year!")
        .setSmallIcon(R.drawable.notify2).build();
        noti.flags |= Notification.FLAG_AUTO_CANCEL;

        NotificationManager notiMan = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
          notiMan.notify(0, noti);

          Context context = getApplicationContext();
          CharSequence text = "Hello toast!";
          int duration = Toast.LENGTH_SHORT;

          Toast toast = Toast.makeText(context, text, duration);
          toast.show();   
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:40:58.873

看这个：

```
int[] payDays = new int[11]; 
```

现在您正在尝试访问索引 11：

```
payDays[11] = 31; 
```

那是行不通的。当您使用`new int[size]`（或任何其他类型的数组，当然）创建包含`size`元素的数组时，从 0 到`size` **独占**。

我怀疑你想要：

```
int[] payDays = new int[12]; 
```

（此外，我会使用循环来检查数组是否包含特定值，或者更改排序以使其有序，然后使用`Arrays.binarySearch`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:40:43.197

您正在声明您的数组错误。而不是`payDays = new int[11];`你想要的`payDays = new int[12];`，否则，你最终会访问元素 11，它超出了界限，你会得到一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T08:53:06.567

数组索引从零开始。当您声明一个大小为 11的数组时，将创建**一个索引范围从 0 到 10（共 11 个元素）的数组元素。**因此访问 payDays[11] 将引发 ArrayIndexOutOfBounds 异常。

解决方案可能是

> 1) 增加数组的大小为**payDays = new int[12]**；
> 
> 2)移除元素payDays[11] = 31；

# java - Java类型和Native类型

> ID：14997804
> 
> 赞同：0
> 
> 时间：2013-02-21T08:39:33.363
> 
> 标签：java, types, native

* * *

我想从 java 代码中调用外部**dll 函数。**我正在使用 Netbeans IDE 7.2。我的dll的功能是：

```
Boolean  isValid(String  word)
List<String> getWords(String  word) 
```

我正在关注[这个](http://blog.mwrobel.eu/how-to-call-dll-methods-from-java/)例子。但我不知道如何声明我的 dll 函数。

`List <String>`匹配原生类型？

# php - Php SoapClient 超时（ubuntu）

> ID：14997805
> 
> 赞同：0
> 
> 时间：2013-02-21T08:39:35.140
> 
> 标签：php, ubuntu, soap, apache2

我试图在网络上调用一个soap，但我一直在超时（我正在使用Linux Mint），我可以告诉它超时，因为它需要一段时间才能返回错误......我尝试了nusoap和soapclient。 .. nusoap 正在抛出“HTTP 错误：不支持的 HTTP 响应状态 303 请参阅其他（soapclient->response 具有响应的内容）”...我在 Windows 操作系统上测试了代码及其工作...下面是代码：

```
 $client=new SoapClient('http://192.168.1.77:8080/project/Login?wsdl');

        $result = $client->__soapCall("checkUserCred", array(
        "checkUserCred" => array(
            "user"        => 'admin',
            "password"    => "admin"        // The ads ID
        )
    ), NULL, NULL);

    echo $result->return; 
```

无论如何要调试这个，我确定它来自 ubuntu(linx mint) 但不能告诉你到底是什么......我试着查看 apache2 日志文件但找不到任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:32:29.603

您的代码看起来不错，看起来或多或少是一个连接问题。在终端上尝试 telnet 到你的服务器，看看你得到了什么......

类似：telnet 192.168.1.77 8080

如果 telnet 确实响应并允许您输入内容，请尝试执行以下操作：GET /project/Login?wsdl

并按回车两次。查看是否正确返回了 WSDL。您还需要查看您的 WSDL 以查看端点在哪里，并执行与端点 URL 类似的操作以确保您具有连接性

或者，您可以以 root 用户身份执行 TCP traceroute，以查看其路由到的位置

```
traceroute -T -p 8080 192.168.1.77 
```

请注意：要执行 TCP 跟踪路由，您必须是 root 用户 / sudo 命令。

# html -   当切换编码类型变成奇怪的字符时

> ID：14997814
> 
> 赞同：0
> 
> 时间：2013-02-21T08:40:32.130
> 
> 标签：html, jsf, jsf-2

我`&nbsp`在我的网页中使用，当在不同的编码之间切换时，它变成了奇怪的字符，从下面的屏幕截图可以看到，它变成了汉字，用其他编码，它变成了`accented A`字符。对于间距，我将不再使用  ，但是我的 JSF 页面，我需要一个空标签，所以我使用

```
h:outputLabel value="&nbsp" 
```

现在我不确定我可以用什么替换上面的代码，以避免这些奇怪的字符出现在我的页面上。请帮忙

![在此处输入图像描述](../Images/70c421503bd95c2f946c6c66dc8e5415.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:27:15.347

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:34:48.953

`&nbsp`使用价值_`&#160;`

请参考[HTML ISO-8859-1 参考](http://www.w3schools.com/tags/ref_entities.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:49:21.660

对于初学者，`&nbsp`最后应该有一个分号：

```
&nbsp; 
```

但是，我认为这不会导致这个问题。

您是否有理由不能简单地使用“”或将其完全留空？

```
h:outputLabel value=" "
h:outputLabel value="" 
```

你不应该用它来做造型。相反，您可以简单地：

```
button.myCancelButton { margin-left:40px; }
radio.myColumnsRadio { margin-left:40px; } 
```

此外，如果您希望单选按钮之间的间距相等，则可以将它们包装在具有固定宽度的容器中或将它们放在表格中：

```
span.myRadioContainer { width:100px; display:inline-block; } 
```

或者（HTML 解决方案，不确定 JSF 是如何工作的）：

```
<table>
    <tbody>
        <tr>
            <td><input type="radio"/></td>
            <td><input type="radio"/></td>
        </tr>
        <tr>
            <td><input type="radio"/></td>
            ...
        </tr>
    </tbody>
</table> 
```

[JSFiddle 示例](http://jsfiddle.net/cdyQN/)。

# iphone - “当前位置”文本应根据 iPhone 中的语言进行更改

> ID：14997816
> 
> 赞同：2
> 
> 时间：2013-02-21T08:40:37.790
> 
> 标签：iphone, ios, objective-c

在我的应用程序中，当我单击当前位置时，它会显示“当前位置”，当我将语言更改为德语时，它会在 iOS 版本 < 6.0 中显示“Aktueller Ort”。但在 iOS >=6.0 中，它总是显示“当前位置”。这是苹果地图的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T08:41:53.817

我遇到了问题.. 我们必须在 info.plist 文件中使“本地化资源可以混合”标签为真。现在它将适用于所有语言.. (Y)

# asp.net - 文件上传在更新面板内的gridview中不起作用

> ID：14997821
> 
> 赞同：2
> 
> 时间：2013-02-21T08:40:55.113
> 
> 标签：asp.net, datagridview, asp.net-ajax

我在gridview中有文件上传控件，当我尝试更新gridview时，gridview在更新面板中，一切正常，但是来自fileupload的图像路径不保存请帮助我...

页面.aspx

```
<asp:GridView ID="GridView1" runat="server"  AutoGenerateColumns="False" BackColor="White" 
                                BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" CellSpacing="4" 
                                DataKeyNames="pid" ForeColor="Black" ShowHeaderWhenEmpty="True" 
                                GridLines="Horizontal" onrowediting="GridView1_RowEditing" 
                                onrowupdating="GridView1_RowUpdating" 
                                onrowcancelingedit="GridView1_RowCancelingEdit" 
                                onrowdeleting="GridView1_RowDeleting">
                                <Columns>
                                    <asp:TemplateField HeaderText="Operation">
                                        <EditItemTemplate>
                                            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton>&nbsp;
                                            <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                                        </EditItemTemplate>
                                        <ItemTemplate>
                                            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" ForeColor="#94b52c"></asp:LinkButton>&nbsp;
                                            <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete" ForeColor="#94b52c"
                                                            OnClientClick="return confirm('Are You Sure Want To Delete ?');"></asp:LinkButton>
                                        </ItemTemplate>
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                        <ItemStyle Font-Bold="True" HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:TemplateField>
                                    <asp:TemplateField HeaderText="Product ID" InsertVisible="False" SortExpression="pid">
                                        <EditItemTemplate>
                                            <asp:Label ID="lblpid" runat="server" Text='<%# Eval("pid") %>'></asp:Label>
                                        </EditItemTemplate>
                                        <ItemTemplate>
                                            <asp:Label ID="lblproductid" runat="server" Text='<%# Bind("pid") %>'></asp:Label>
                                        </ItemTemplate>
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                        <ItemStyle Font-Bold="True" HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:TemplateField>
                                    <asp:TemplateField HeaderText="Product Detail" SortExpression="pdetail">
                                        <EditItemTemplate>
                                            <asp:TextBox ID="txtproductdetail" runat="server" Text='<%# Bind("pdetail") %>'></asp:TextBox>
                                        </EditItemTemplate>
                                        <ItemTemplate>
                                            <asp:Label ID="lblproductdetail" runat="server" Text='<%# Bind("pdetail") %>'></asp:Label>
                                        </ItemTemplate>
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                        <ItemStyle Font-Bold="True" HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:TemplateField>
                                    <asp:TemplateField HeaderText="Product Image" SortExpression="pimage">
                                        <EditItemTemplate>
                                            <asp:FileUpload ID="FileUpload1" runat="server" />
                                        </EditItemTemplate>
                                        <ItemTemplate>
                                            <asp:Image ID="imgproductimage" runat="server" ImageUrl='<%# Bind("pimage") %>' Height="50px" Width="50px"/>
                                        </ItemTemplate>
                                        <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:TemplateField>

                                </Columns>
                                <FooterStyle BackColor="#F0F0F0" ForeColor="Black" />
                                <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" VerticalAlign="Middle"  />
                                <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
                                <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
                                <SortedAscendingCellStyle BackColor="#F7F7F7" />
                                <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
                                <SortedDescendingCellStyle BackColor="#E5E5E5" />
                                <SortedDescendingHeaderStyle BackColor="#242121" />
                            </asp:GridView>
    </ContentTemplate>
                        </asp:UpdatePanel> 
```

这是.cs文件

```
 public void bindgrid()
{
    string qry = "select pid,pdetail,pimage from productdetail p,categorydetail c where p.cid=c.cid";
    GridView1.DataSource = abal.Qry_Fire(qry);
    GridView1.DataBind();
}
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    bindgrid();
}
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    Label l = (Label)GridView1.Rows[e.RowIndex].FindControl("lblpid");
    TextBox txtproductdetail = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtproductdetail");
    FileUpload f = (FileUpload)GridView1.Rows[e.RowIndex].FindControl("FileUpload1");
    string path = "~/user/product_image/" + f.FileName.ToString();
    int msg = abal.Qry_All("update productdetail set pdetail='" + txtproductdetail.Text + "',pimage='" + path 

+ "' WHERE pid='" + Convert.ToInt32(l.Text) + "'");
    if(msg==1)
        f.SaveAs(Server.MapPath(path));
    GridView1.EditIndex = -1;
    bindgrid();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T04:38:58.023

我遇到了同样的问题并使用以下解决方案解决了它。

在你的代码后面添加以下代码。

```
Page.Form.Attributes.Add("enctype", "multipart/form-data");

protected void gvLineItems_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {

    if (e.Row.RowState.Equals(DataControlRowState.Edit))
     {
       Button btnUpload = e.Row.FindControl("btnUpload") as Button;
       ScriptManager.GetCurrent(this).RegisterPostBackControl(btnUpload);
     }
  }
} 
```

添加上述代码后，我可以检索 fileUpload 控件值。

```
protected void UpdateRow(object sender, GridViewUpdateEventArgs e)
{
   FileUpload uploadedFile = (FileUpload)dgDocuments.Rows[editIndex].FindControl("UploadFile");
   if (uploadedFile.HasFile)
   {
    uploadedFile.SaveAs(FileUploadURL + "\\Temp\\" + uploadedFile.FileName);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:00:42.930

只需在后面`PostBackTrigger`添加 如下：`</ContentTemplate>``FileUploader`

```
 </ContentTemplate>
  <Triggers>
  <asp:PostBackTrigger ControlID="FileUpload1" /> 
 </Triggers>
</asp:UpdatePanel> 
```

**更新**如果它在里面，`gridview`那么你可以试试下面的代码：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)  
 {  
   FileUpload flUpload = e.Row.FindControl("FileUpload1") as FileUpload;  
   ScriptManager.GetCurrent(this).RegisterPostBackControl(flUpload);  
 } 
```

**Update2**将事件添加`OnRowDataBound`到`gridview`：

```
<asp:gridview
    id="GridView1" 
    onrowdatabound="GridView1_RowDataBound" 
```

休息添加您的代码`gridview`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T04:11:44.270

添加这个： Page.Form.Attributes.Add("enctype", "multipart/form-data"); 页面加载事件：

```
protected void Page_Load(object sender, EventArgs e)
        {
            Page.Form.Attributes.Add("enctype", "multipart/form-data"); 
             ..............................
         } 
```

试试这个。

```
</ContentTemplate>
  <Triggers>
  <asp:PostBackTrigger ControlID="GridView1" /> 
 </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:17:56.787

更新面板与 Fileupload 类似的某些控件无法正常工作。因此请尝试使用 ajax 调用，这是一个更好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-31T18:47:04.660

只需添加 "Page.Form.Attributes.Add("enctype", "multipart/form-data");" 正如 Jisha Muthuswamy 所发布的。由 UpdatePanel 包裹的 gridview 内的 FileUpload 控件永远无法访问，因此无法设置为 PostBackTrigger ControlID。谢谢

# c# - UserControl 上的公共自定义事件

> ID：14997826
> 
> 赞同：0
> 
> 时间：2013-02-21T08:41:04.557
> 
> 标签：c#, .net, winforms, events, event-handling

我要这个：

```
public partial class ucTest : UserControl  
{
...  
SomeEvent { MessageBox.Show("Inner Call") }
}

public partial class frmTest: Form
{
...  
SomeEvent += OuterEventInstance;
...
void OuterEventInstance(object sender, EventArgs e)
{ MessageBox.Show("Inner Call") }
... 
} 
```

如何在包含此用户控件实例的表单中定义可用（且可扩展）的用户控件上的公共事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:47:12.507

像这样的东西：

```
public partial class ucTest : UserControl  
{
   public event  EventHandler SomeEvent;

   private void OnSomeEvent()
   {
        EventHandler handler = SomeEvent;
        if(handler != null)
             handler(this, EventArgs.Empty);
   } 

}

public partial class frmTest: Form
{
    public frmTest()
    {
        ucTest uc = new ucTest(); 
        uc.SomeEvent += OuterEventInstance;
    }

    //...

    void OuterEventInstance(object sender, EventArgs e)
    {
        MessageBox.Show("Inner Call")
        //...
    }
} 
```

# mongodb - 像 facebook 一样为 Notify 开发数据库模式

> ID：14997828
> 
> 赞同：1
> 
> 时间：2013-02-21T08:41:11.427
> 
> 标签：mongodb, database-design, social, database

我想创建一个简单的社交应用程序来测试 mongoDB 的性能例如我发布一个状态“大家好，祝你有美好的一天”我的社交在其他用户“喜欢”、“评论”、“分享”时发送通知

```
"A like your post" -> create a new notify
"B like your post" -> create a new notify
"C comment in your post" -> new no
"D comment in your post" -> new no 
```

第一次，我尝试这样设计

```
notify_post
{
    "post_id":"",
    "link" : "",//link to post
    "type": ""//like comment or share
    "u_id": // the Id of user that like, comment,...etc

} 
```

哦，有一千条通知，甚至每天都会为考试 A、B、C 创建数百万条通知，也喜欢您的评论，C、D、E 也在您的帖子中发表评论，我不认为每个通知都像我们创建一个新的分别项目。然后我有一个想法

我为这样的发布文件添加了 3 个字段

```
post
 {
      "title":""
      "content" :""
      "like":[]//
      "like_notify" : //0 or 1
      "comment" [uid,uid]
      "comment_notify" : //0 or 1
      "share": [uid,uid]
      "share_notify" //0 or 1

      comment //rest...
 } 
```

每当用户在我的帖子中发表评论时，标志“comment_notify”就会变为 1，告诉我我的帖子有新评论

```
like "A comment in your post",
then C,D,E also comment in my post ,notify will be like that
"E,D and 2 others user also comment in your post"
"like" and "share" is so on 
```

但是文件的大小限制是 16MB，这是个好主意吗？

你有什么想法吗！非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-11-14T07:04:50.950

```
router.post('/index/likestatus', function(req, res, next) {
    // Get form values   
    var username = req.user.username; //get the username from the sessions get current username who is login 
   var name = req.user.name; //same as above line this time get name of user
    var like = {
             "name" : name,
            "username": username
            };// my like is embedded to every status or post store who like this status

        Status.update({
                "_id": req.body.iid //this is status id or post id ...replace status with post in yours case 
            },
            {
                $push:{
                    "likes": like
                }//this $push save the newlike in collection 
            },
            function(err, doc) {
                if(err) {
                    throw err
                } else {
var newnotification = new notification
({postid:req.body.iid,,type:'like',uid:req.user.username,link:'yourlocalhost/'+post_id}).save(function (err) {
                console.log(username+' has posted a new status');
                    res.send({status:'success'});
                }
            }
        );//this save function save new notifications for a user the collection is similar to your req.body.iid is get from form u submit and its status id ,uid:req.user.username you store username in uid as i say username is _id or primary key
    }); 
```

# node.js - 使用 jasmine-node 通过自动测试测试流星应用程序

> ID：14997829
> 
> 赞同：4
> 
> 时间：2013-02-21T08:41:12.480
> 
> 标签：node.js, meteor, jasmine, jasmine-node

我正在使用 jasmine-node 来测试我的 Meteor 应用程序，并且我想使用自动测试功能，这样我就不必一直自己重新运行测试。

我的流星应用程序文件夹结构是这样的：

```
server
    foo.coffee
tests
    foo.spec.coffee 
```

我想使用规范文件测试位于 foo.coffee 中的代码。我用这个 args 启动 jasmine-node：

```
jasmine-node ./ --autotest --coffee --test-dir tests 
```

现在我*假设*自动测试功能将对根文件夹中的所有更改做出反应，但它只会对测试文件夹中的更改做出反应。而且我无法在根文件夹中启动它，因为我在 .meteor 文件中遇到错误（而且我不想让茉莉花测试/包括流星代码）。

因此，即使我更改了服务器文件夹中的代码，我也想让 jasmine 重新运行测试。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T21:59:40.920

使用 --watch 参数和 --autotest 并指定包含您想要观看的任何文件的目录。

# objective-c - 在 Obj C 中的对象之间传递对象

> ID：14997831
> 
> 赞同：1
> 
> 时间：2013-02-21T08:41:15.577
> 
> 标签：objective-c

我在两个类之间传递了几个对象，比如从 A 到 B 的字符串，方法是将字符串分配给 B 类中的字符串属性，该属性的类型为保留。我是否必须在其 dealloc 方法中释放 B 类中的此字符串属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:55:02.953

如果属性类型是retain，那么它会将retain count 增加1，并且要释放一个对象，您需要将其retain count 减少到0。因此，如果您不释放它会导致内存泄漏。Infect 是保留属性的目的，它将所有权授予该类实现属性的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:46:27.317

正如您所说`dealloc`，我将您的问题视为非 ARC。

> 将字符串分配给 B 类中的字符串属性，该属性的类型为保留。我是否必须在 B 类中释放此字符串属性

不。

只有在保留、复制、分配时才需要释放。

此外，NSString 应该分配而不是保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:50:20.383

是的，您需要释放保留的对象。在 dealloc 方法中：

```
- (void)dealloc
{
    if (_yourString)
    {
        [_yourString release];
    }

    ...

    [super dealloc];
} 
```

# python - 使用结构更改 LD_LIBRARY_PATH

> ID：14997834
> 
> 赞同：1
> 
> 时间：2013-02-21T08:41:25.450
> 
> 标签：python, fabric

当我通过 ssh 登录远程服务器时，我看到 LD_LIBRARY_PATH 是：

```
echo $LD_LIBRARY_PATH
:/usr/local/lib 
```

当我在python中使用fabric时，在fabric run api中运行相同的代码，结果为空。

```
from fabric.api import *
def test():
    run("echo $LD_LIBRARY_PATH") 
```

甚至当我尝试使用织物更改 LD_LIBRARY_PATH 时，它根本不起作用。

```
from fabric.api import *
def test():
    run("echo $LD_LIBRARY_PATH")
    run("export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH") 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T03:56:48.967

我遇到了同样的问题，这是一种解决方法。你至少需要fabric 1.5.4 我认为使用shell_env。

```
with shell_env(LD_LIBRARY_PATH ="/usr/local/lib"):
    run('something') 
```

# android - 如何在 Android 中解压缩受密码保护的文件

> ID：14997835
> 
> 赞同：5
> 
> 时间：2013-02-21T08:41:30.570
> 
> 标签：android, unzip

我想解压缩一个受密码保护的文件。我知道如何解压缩不受密码保护的普通 zip 文件。有一些像[Winzip](https://play.google.com/store/apps/details?id=com.winzip.android)这样的应用程序可以做同样的事情。

你们能指点我一些教程或我可以用来实现这个的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T08:48:00.497

如果您想将此功能实现到您的某个应用程序中，您可以使用支持 AES [128/256](http://www.lingala.net/zip4j/)加密和标准 Zip 加密的 Zip4j -Library。如何使用它，与 java 中的标准 zip 库非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T16:35:48.273

我遇到了您提到的问题，但我既没有发现也`Zip4j`没有`severzipjbinding`帮助我解决这个问题。搜索后，我发现[这个站点](http://blog.alutam.com/2009/10/31/reading-password-protected-zip-files-in-java/comment-page-2/#comment-153361)非常有用，并且可以直接在您的代码中使用。

# windows-services - Windows 服务启动超时提示过早

> ID：14997837
> 
> 赞同：0
> 
> 时间：2013-02-21T08:41:30.337
> 
> 标签：windows-services

尝试启动我创建的 Windows 服务时，出现以下错误：

> 错误 1053：服务没有及时响应启动或控制请求

我觉得奇怪的是，一旦我启动服务（在 2 秒内）就会发生错误，所以基本上我的服务根本没有时间启动。我在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control 的注册表中添加了一个新条目，将 ServicesPipeTimeout 设置为 30000 毫秒，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:53:32.663

结果是尝试连接数据库时出现问题。错误消息有点令人困惑。

# python - 是否可以在 setup.py 中定义要执行的命令

> ID：14997842
> 
> 赞同：1
> 
> 时间：2013-02-21T08:41:34.820
> 
> 标签：python, daemon

我想让我的守护程序在**setup.py 安装后自动启动**

在 shell 中，我可以通过以下方式存档：

> update-rc.d kmsd 默认 21

在 setup.py ( [disutil](http://docs.python.org/2/library/distutils.html) ) 中，该怎么做？

是否可以这样做，或者我只能让我的用户在安装后手动调用此命令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:17:46.603

是的，这是可能的。我在自己的代码中执行此操作，以使用旧版构建系统预编译一些库。

像下面这样的东西应该可以工作，尽管我应该警告说我没有测试下面的代码。

```
from distutils.core import setup, Command
import distutils.command.install as InstallCommand
from subprocess import call

class FinallyDoSomething(Command):
    description = "Do my custom stuff"
    user_options = []
    def initialize_options(self):
        pass

    def finalize_options(self):
        pass

    def run(self):
        call(["update-rc.d", "kmsd", "defaults", "21"])

class NewInstall(InstallCommand):
    sub_commands = InstallCommand.sub_commands + [
            ('custom_install', None),]

setup(name='PackageName',
      version='0.1',
      #The rest of the setup config
      cmdclass={
          'install': NewInstall,
          'custom_install': FinallyDoSomething,
          },
      ) 
```

# r - ggplot：堆叠比例条形图中的y轴（中断）值？

> ID：14997846
> 
> 赞同：2
> 
> 时间：2013-02-21T08:41:53.233
> 
> 标签：r, ggplot2, bar-chart

**问题解决！感谢大家！（这篇文章底部的解决方案）**

我喜欢用 ggplot 创建一个堆叠的比例条形图。我的问题是 y 轴的中断，这似乎与每个条形图块的百分比值有关，但不像预期的那样介于 0 到 100 之间。

这是我的数据框：

```
 fg grp  prc
1   1  g1 85.23
2   2  g1 14.77
3   1  g2 73.33
4   2  g2 26.67
5   1  g3 85.53
6   2  g3 14.47
7   1  g4 87.18
8   2  g4 12.82
9   1  g5 72.22
10  2  g5 27.78 
```

这就是我调用绘图函数的方式：

```
require(ggplot2)
ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
  geom_bar(stat="identity", colour="black", show_guide=FALSE) +
  scale_fill_manual(values=c("#235a80", "#80acc8")) +
  labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
  theme(axis.line = element_line(colour="gray"), 
      axis.text = element_text(size=rel(1.3)), 
      axis.title = element_text(face="italic", size=rel(1.4))) 
```

最后，这是我的结果：

![在此处输入图像描述](../Images/7b9683158c07c1cb15495d5ef8fa7ef1.png)

如您所见，y 轴中断对应于 prc 变量的百分比值。

我想有一个从 0 到 100 的 y 轴范围，每隔 10 个位置（`seq(0,100,by=10)`）中断一次。我需要以任何方式准备我的数据吗？我如何设法“修复” y 轴？

提前致谢

*这就是我计算数据和工作解决方案的方式！*

```
clusterDiskriminanz <- function(myData, groups, gcnt) {
  disc <- lda(groups ~ ., data=myData, na.action="na.omit", CV=TRUE)
  ct <- table(groups, disc$class)
  dg <- diag(prop.table(ct, 1))
  # print barplot for correct percentage for each category of groups

  newdat <- NULL
  tmpdat <- NULL
  filldat <- NULL

  perc <- round(100*dg,2)
  percrest <-  round(100-perc,2)

  # looks strange, but for testing purposes
  # I add data this way. Perhaps I also lack
  # a bit of functions which may do this better and faster
  for (i in 1:gcnt) {
    newdat <- rbind(newdat, c(paste("g",i,sep="")))
    newdat <- rbind(newdat, c(paste("g",i,sep="")))
    tmpdat <- rbind(tmpdat, perc[i])
    tmpdat <- rbind(tmpdat, percrest[i])
    filldat <- rbind(filldat, "1")
    filldat <- rbind(filldat, "2")
  }

  # create data frame! prc-values are treated as numeric
  # now! need to convert $g to factors though!
  mydat <- data.frame(filldat, newdat, tmpdat)
  names(mydat) <- c("fg", "grp", "prc")
  mydat$fg <- factor(mydat$fg)

  # ggplot-stuff comes here...
  require(ggplot2)
  ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
    geom_bar(stat="identity", colour="black", show_guide=FALSE) +
    scale_fill_manual(values=c("#235a80", "#80acc8")) +
    labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
    geom_hline(yintercept=totalcorrect, linetype=2, colour="white", alpha=0.8) +
    # Achsenbeschriftung etwas größer machen
    theme(axis.line = element_line(colour="gray"), 
          axis.text = element_text(size=rel(1.3)), 
          axis.title = element_text(face="italic", size=rel(1.4))) + 
    scale_y_continuous(breaks = seq(0, 100, 10)) +
    coord_cartesian(ylim=c(0,100))
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:55:08.373

您可以使用`coord_cartesian(ylim=c(0,100))`来指定`limits`执行数据的*可视化缩放*（然后保持不变）。您也可以将其添加到`scale_y_continuous(limits = c(0, 100), breaks = (seq(0,100,by = 10)))`，但在比例上设置限制将仅使用这些限制内的数据，因此是原始数据的子集。在您的示例中，它将返回相同的图，但它可以大幅更改图（例如箱线图）。

```
dataset<- textConnection("fg grp  prc
1  g1 85.23
2  g1 14.77
1  g2 73.33
2  g2 26.67
1  g3 85.53
2  g3 14.47
1  g4 87.18
2  g4 12.82
1  g5 72.22
2  g5 27.78")

mydat<- read.table(dataset,header=TRUE) 
mydat$fg <- as.factor(mydat$fg)

ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
geom_bar(stat="identity", colour="black", show_guide=FALSE) +
scale_fill_manual(values=c("#235a80", "#80acc8")) +
labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
theme(axis.line = element_line(colour="gray"), 
axis.text = element_text(size=rel(1.3)), 
axis.title = element_text(face="italic", size=rel(1.4))) + coord_cartesian(ylim=c(0,100))+ scale_y_continuous(breaks=(seq(0,100,by=10))) 
```

**编辑**由于评论：

这不起作用：

```
ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
geom_bar(stat="identity", colour="black", show_guide=FALSE) +
scale_fill_manual(values=c("#235a80", "#80acc8")) +
labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
theme(axis.line = element_line(colour="gray"), 
    axis.text = element_text(size=rel(1.3)), 
    axis.title = element_text(face="italic", size=rel(1.4)))+scale_y_continuous(breaks = seq(0, 100, 10))
+coord_cartesian(ylim=c(0,100)) 
```

这样做：

```
ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
geom_bar(stat="identity", colour="black", show_guide=FALSE) +
scale_fill_manual(values=c("#235a80", "#80acc8")) +
labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
theme(axis.line = element_line(colour="gray"), 
    axis.text = element_text(size=rel(1.3)), 
    axis.title = element_text(face="italic", size=rel(1.4)))+scale_y_continuous(breaks = seq(0, 100, 10)) +
coord_cartesian(ylim=c(0,100)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:47:57.510

`scale_y_continuous`您可以使用函数（参数）指定中断`breaks`：

```
mydat <- as.data.frame(mydat)
mydat$fg <- as.factor(mydat$fg)

library(ggplot2)
ggplot(mydat, aes(x=grp, y=prc, fill=fg)) +
  geom_bar(stat="identity", colour="black", show_guide=FALSE) +
  scale_fill_manual(values=c("#235a80", "#80acc8")) +
  labs(title=NULL, x="Cluster-Gruppen", y=NULL) +
  theme(axis.line = element_line(colour="gray"), 
        axis.text = element_text(size=rel(1.3)), 
        axis.title = element_text(face="italic", size=rel(1.4))) +
  scale_y_continuous(breaks = seq(0, 100, 10))         # the new command 
```

![在此处输入图像描述](../Images/97aef013a40c052d6fc8c13225672a73.png)

# workflow - 以编程方式遍历 WF

> ID：14997848
> 
> 赞同：0
> 
> 时间：2013-02-21T08:41:58.257
> 
> 标签：workflow, workflow-foundation-4

我正在使用重新托管的工作流程，业务分析师正在创建 WF。企业提出的一个有趣要求是，他们希望以某种矩阵格式（例如 Excel）输出 WF 的所有可能路径。
这在技术上是否可行，因为我在 .Net 框架中没有找到任何具有这种功能的东西。
基本上，有没有办法遍历/循环 WF 中的活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:16:04.323

检查这个答案：[获取子活动子树](https://stackoverflow.com/a/12538598/87825)

粘贴代码以确保完整性：

```
public static IEnumerable<Activity> GetInnerActivities(this Activity activity)
{
    var children = WorkflowInspectionServices.GetActivities(activity);

    foreach (var child in children)
    {
        children = children.Concat(child.GetInnerActivities());
    }

    return children;
} 
```

此扩展方法递归地遍历活动树。只需根据您的需要调整代码即可。

# c - C 编程中的 FIR 滤波器实现

> ID：14997850
> 
> 赞同：2
> 
> 时间：2013-02-21T08:42:07.290
> 
> 标签：c, signal-processing

谁能告诉我如何使用 c 编程语言实现 FIR 滤波器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T08:59:07.720

设计 FIR 滤波器*不是*一个简单的话题，但实现一个已经设计好的滤波器（假设你已经有了 FIR 系数）也不错。该算法称为[卷积](http://en.wikipedia.org/wiki/Convolution)。这是一个天真的实现......

```
void convolve (double *p_coeffs, int p_coeffs_n,
               double *p_in, double *p_out, int n)
{
  int i, j, k;
  double tmp;

  for (k = 0; k < n; k++)  //  position in output
  {
    tmp = 0;

    for (i = 0; i < p_coeffs_n; i++)  //  position in coefficients array
    {
      j = k - i;  //  position in input

      if (j >= 0)  //  bounds check for input buffer
      {
        tmp += p_coeffs [i] * p_in [j];
      }
    }

    p_out [k] = tmp;
  }
} 
```

基本上，卷积对输入信号进行移动加权平均。权重是滤波器系数，假设总和为 1.0。如果权重总和不是 1.0，则会得到一些放大/衰减以及滤波。

顺便说一句 - 这个函数可能有向后的系数数组 - 我没有仔细检查过，我已经有一段时间没有考虑这些事情了。

对于如何计算特定滤波器的 FIR 系数，背后有相当多的数学知识——你真的需要一本关于数字信号处理的好书。[这个](http://www.dspguide.com/)是免费的PDF，但我不确定它有多好。我有[Rorabaugh](http://www.amazon.co.uk/Digital-Filter-Designers-Handbook-Algorithms/dp/0070538069/ref=sr_1_2?ie=UTF8&qid=1361437667&sr=8-2)和[Orfandis](http://www.amazon.co.uk/Introduction-Signal-Processing-Prentice-Series/dp/0132091720/ref=sr_1_sc_2?s=books&ie=UTF8&qid=1361437726&sr=1-2-spell)，都在九十年代中期出版，但这些东西并没有真正过时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:17:58.577

要组合多个过滤器：

从单位脉冲开始（第一个位置为 1，其他位置为 0 的信号）。应用第一个过滤器。应用第二个过滤器。继续，直到应用所有过滤器。结果显示了组合滤波器如何对单位脉冲进行卷积（假设数组足够长以至于没有数据丢失），因此其中的值是一个滤波器的系数，它是其他滤波器的组合。

这是示例代码：

```
#include <stdio.h>
#include <string.h>

#define NumberOf(a) (sizeof (a) / sizeof *(a))

/*  Convolve Signal with Filter.

    Signal must contain OutputLength + FilterLength - 1 elements.  Conversely,
    if there are N elements in Signal, OutputLength may be at most
    N+1-FilterLength.
*/
static void convolve(
    float *Signal,
    float *Filter, size_t FilterLength,
    float *Output, size_t OutputLength)
{
    for (size_t i = 0; i < OutputLength; ++i)
    {
        double sum = 0;
        for (size_t j = 0; j < FilterLength; ++j)
            sum += Signal[i+j] * Filter[FilterLength - 1 - j];
        Output[i] = sum;
    }
}

int main(void)
{
    //  Define a length for buffers that is long enough for this demonstration.
    #define LongEnough  128

    //  Define some sample filters.
    float Filter0[] = { 1, 2, -1 };
    float Filter1[] = { 1, 5, 7, 5, 1 };

    size_t Filter0Length = NumberOf(Filter0);
    size_t Filter1Length = NumberOf(Filter1);

    //  Define a unit impulse positioned so it captures all of the filters.
    size_t UnitImpulsePosition = Filter0Length - 1 + Filter1Length - 1;
    float UnitImpulse[LongEnough];
    memset(UnitImpulse, 0, sizeof UnitImpulse);
    UnitImpulse[UnitImpulsePosition] = 1;

    //  Calculate a filter that is Filter0 and Filter1 combined.
    float CombinedFilter[LongEnough];

    //  Set N to number of inputs that must be used.
    size_t N = UnitImpulsePosition + 1 + Filter0Length - 1 + Filter1Length - 1;

    //  Subtract to find number of outputs of first convolution, then convolve.
    N -= Filter0Length - 1;
    convolve(UnitImpulse,    Filter0, Filter0Length, CombinedFilter, N);

    //  Subtract to find number of outputs of second convolution, then convolve.
    N -= Filter1Length - 1;
    convolve(CombinedFilter, Filter1, Filter1Length, CombinedFilter, N);

    //  Remember size of resulting filter.
    size_t CombinedFilterLength = N;

    //  Display filter.
    for (size_t i = 0; i < CombinedFilterLength; ++i)
        printf("CombinedFilter[%zu] = %g.\n", i, CombinedFilter[i]);

    //  Define two identical signals.
    float Buffer0[LongEnough];
    float Buffer1[LongEnough];
    for (size_t i = 0; i < LongEnough; ++i)
    {
        Buffer0[i] = i;
        Buffer1[i] = i;
    }

    //  Convolve Buffer0 by using the two filters separately.

    //  Start with buffer length.
    N = LongEnough;

    //  Subtract to find number of outputs of first convolution, then convolve.
    N -= Filter0Length - 1;
    convolve(Buffer0, Filter0, Filter0Length, Buffer0, N);

    //  Subtract to find number of outputs of second convolution, then convolve.
    N -= Filter1Length - 1;
    convolve(Buffer0, Filter1, Filter1Length, Buffer0, N);

    //  Remember the length of the result.
    size_t ResultLength = N;

    //  Convolve Buffer1 with the combined filter.
    convolve(Buffer1, CombinedFilter, CombinedFilterLength, Buffer1, ResultLength);

    //  Show the contents of Buffer0 and Buffer1, and their differences.
    for (size_t i = 0; i < ResultLength; ++i)
    {
        printf("Buffer0[%zu] = %g.  Buffer1[%zu] = %g.  Difference = %g.\n",
            i, Buffer0[i], i, Buffer1[i], Buffer0[i] - Buffer1[i]);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-15T04:39:18.323

我发现这个代码片段对我不起作用（Visual Studio 2005）。

我最终确实发现卷积问题有一个很好的答案：

[ANSI C代码中的一维线性卷积？](https://stackoverflow.com/questions/8424170/1d-linear-convolution-in-ansi-c-code/8425094#8425094?newreg=8b535b1f80ed4f71962cddd2376073a8)

对于那些不知道的人 - 卷积与 FIR 滤波的操作完全相同 - “内核”是 FIR 滤波器脉冲响应，信号是输入信号。

我希望这可以帮助一些正在寻找 FIR 代码的可怜的 sap :-)

# android - 在 Android 中将具有特定 id 的数组列表从一个类传递到另一个类

> ID：14997855
> 
> 赞同：1
> 
> 时间：2013-02-21T08:42:28.993
> 
> 标签：android, android-intent, arraylist

我想通过传递带有 id 的数组列表将数据从一个类传递到另一个类。

```
 listviewfirst.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

                    Intent i= new Intent(MainActivity.this,Questionactivity.class);
                    // To pass data 
                   i.putExtra("uploadarraylist", uploadarraylist);
                   startActivity(i);

        } 
```

在这里，我已经传递了数组列表，但是基于 id no 我想将数据传递到下一个活动页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:50:44.173

您可以通过 Bundle 传递数组列表值。

```
>           Intent i= new Intent(context, QuestionActivity.class); 
>           Bundle bundle = new Bundle();
> 
>           bundle.putStringArrayList("messages", book_mark);
>           bundle.putIntegerArrayList("cell_ids", cell_ids);
>           bundle.putIntegerArrayList("cat_ids", cat_ids);
>           bundle.putIntegerArrayList("bkmId", bkmId); 
>           bookmark.putExtras(bundle);             
>           startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:25:31.843

正如你所拥有的`ArrayList<HashMap<String, Object>> uploadarraylist`

然后你想将特定`HashMap`的给定选定索引传递给下一个活动，

```
listviewfirst.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
         HashMap<String, Object> hashMap = uploadarraylist.get(arg2);
         Intent i= new Intent(MainActivity.this,Questionactivity.class);
         // To pass data                 
         i.putExtra("hashMap", hashMap);
         startActivity(i);
        } 
```

在**Questionactivity**

```
Intent intent = getIntent();    
HashMap<String, Object> hashMap = (HashMap<String, Object>) intent.getSerializableExtra("hashMap"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:47:14.953

将该 arrayList 设为静态列表，然后使用声明的 cals 引用在另一个类上使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:49:58.197

您也可以使用它，如下所示，因此之后无需通过 Intent：

您可以像这样将 ArrayList 声明为静态的：

```
public static ArrayList<String> array = new ArrayList<String>(); 
```

通过这样做，您可以通过以下方式从任何 Activity 访问您的 ArrayList：

```
activityname.array; 
```

其中activityname 是您在其中声明静态ArrayList 的活动或类。

或者，如果您想使用意图，则可以这样做：

```
Intent i = new Intent(this,activityname.class);
Bundle bun = new Bundle();
bun.putIntegerArrayListExtra(String name, ArrayList<Integer> value);
//bun.putParcelableArrayListExtra(String name, ArrayList<? extends Parcelable> value);
//bun.putStringArrayListExtra(String name, ArrayList<String> value);
i.putExtra(String name,bun);
startActivity(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T08:57:17.083

如果您有一个数组列表，例如： `ArrayList<YourClass> list;` 让您的类实现 Serializable 接口。之后，您可以在 putExtra() 方法中添加您的数组列表。

```
import java.io.Serializable;

public class Bicycle implements Serializable{

  public int speed;

  public Bicycle(int startSpeed) {
    speed = startSpeed;
  }        
} 
```

在您的活动中：

```
ArrayList<Bicycle> list = new ArrayList<Bicycle>();
Intent i = new intent(currentActivity.this, nextActivity.class);
i.putExtra("array", list);
startActivity(i); 
```

# javascript - 作为 HTML5 数据属性的一部分调用和传递 Javascript 参数

> ID：14997856
> 
> 赞同：0
> 
> 时间：2013-02-21T08:42:29.280
> 
> 标签：javascript, html, custom-data-attribute

基于Cerbrus here的解决方案；

[具有自定义数据属性的传递函数](https://stackoverflow.com/questions/14141860/passing-function-with-custom-data-attribute)

是否可以将参数作为自定义属性的一部分传递？所以像;

```
<div data-myattr="hello(foo)"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:59:55.853

为什么？

我的意思是，是的，如果你想对括号内的内容进行正则表达式匹配，用逗号分隔，然后注入它们。但这很疯狂。

为什么不创建第二个数据属性？

```
<div data-command="myFunction" data-params="one,two,three"></div> 
```

然后抓住一切，如：

```
var command = document.querySelector("[data-command]"),
    vars = command.dataset.params.split(","),
    funcName = command.dataset.command;

window[funcName](vars[0], vars[1], vars[2]); 
```

或者：

```
window[funcName].apply(undefined, vars); 
```

# jquery - 在提交 ajax 结果时取消定义

> ID：14997857
> 
> 赞同：0
> 
> 时间：2013-02-21T08:42:32.927
> 
> 标签：jquery, ajax

我的代码是：

```
$('form').submit(function(){
                var email           = $('#email').val();
                var dataString      = 'email='+email;
                var datadata;
                $.ajax({
                    type     : "get",
                    url      : "checkEmail.php",
                    data     : dataString,
                    dataType : "html",
                    success  : function(result){
                                 datadata = result;

                              }   
                });

          alert(datadata);
          return false;
            }); 
```

为什么这`datadata`是未定义的？

我开发了一个。我必须在提交之前通过 ajax 检查重复的电子邮件。它返回 catect 结果，但将提交表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:45:17.670

ajax 调用是异步的，这意味着当触发警报时，ajax 调用尚未完成。

尝试将警报放在 ajax 成功函数上，如下所示：

```
$('form').submit(function(){
                var email           = $('#email').val();
                var filename        = '<?php echo basename($_SERVER['PHP_SELF'], '.php'); ?>';
                var dataString      = 'email='+email+'&userlevel='+filename<?php echo isset($_GET['ID']) ? "+'&uid='+".$_GET['ID'] : '';  ?>;
                var datadata;
                $.ajax({
                    type     : "get",
                    url      : "checkEmail.php",
                    data     : dataString,
                    dataType : "html",
                    success  : function(result){
                                 datadata = result;
                                 alert(datadata);

                              }   
                });

          return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:45:33.637

这是因为 onsuccess 是一个异步调用..您正在尝试获取`datadata`它尚未定义。创建一个函数，在其中定义`datadata`@ onsuccess 并传递它，`result`以便在可用时调用它

# java - 在 do while 循环中获取要从队列中删除的项目

> ID：14997859
> 
> 赞同：0
> 
> 时间：2013-02-21T08:42:37.040
> 
> 标签：java, queue, do-while

```
 public class Queue {

  public static void main(String[] args) {

     Queue<Integer> myQueue = new LinkedList<Integer>();
     Random generator  = new Random();

     int totalTime = 60;
     int lineSize=0;
     int serviceTime;
     int currentPatronTimeLeft=50;
     int timeKeeper;
     int newPatron; 
     int totalCheckedOut=0;

     do
     {
        //for new customer 25%of the time
        serviceTime = generator.nextInt(5) + 1;
        newPatron = generator.nextInt(4) + 1;
     //nested if else to control the adding and removing of items based on service time and the 25% stat 
        if(newPatron == 1)
        {
           myQueue.add( new Integer(serviceTime));
           System.out.println("a new customer has been added to line");
           lineSize++;
           System.out.println("The Queue size is now: "+ lineSize);
           currentPatronTimeLeft = myQueue.peek();

        }
        else if(currentPatronTimeLeft == 0 && lineSize != 0)
        {
           myQueue.poll();
           lineSize--;   
           System.out.println("A customer has been removed from the queue");
           totalCheckedOut++;

           System.out.println("The Queue size is now: "+ lineSize);
        }
        else if (lineSize != 0)
        {
           currentPatronTimeLeft =myQueue.peek();
        }

        currentPatronTimeLeft--;
        totalTime--;
        System.out.println();
        System.out.println("---------------------------------------------------");

     }while(totalTime != 0);

     System.out.println();

  } 
```

}

我无法让我的程序在他们应该完成他们的 serviceTime 之后从队列中删除他们。任何帮助将不胜感激。该程序产生的输出有点像这样

```
---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 1

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 2

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 3

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 4

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 5

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 6

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 7

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 8

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 9

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 10

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 11

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 12

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 13

---------------------------------------------------
a new customer has been added to line
The Queue size is now: 14

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

---------------------------------------------------

--------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:56:41.803

从您的代码中删除以下条件：

```
else if(lineSize != 0)
 {
           currentPatronTimeLeft =myQueue.peek();
 } 
```

它应该可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:59:40.070

您所做的 if-else 有问题， currentPatronTimeLeft 将始终是第一个元素，因此永远不会达到零。一个快速的解决方法是将另一个变量用于这些目的之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:56:07.903

您的问题在于这部分代码：

```
else if (lineSize != 0)
{
    currentPatronTimeLeft =myQueue.peek();
}
currentPatronTimeLeft--; 
```

如果没有人被添加到队列中，并且当前没有完成，则更新`currentPatronTimeLeft`为当前客户端的起始值。之后你递减它。如果在下一次迭代中，没有新客户端添加到队列中，那么当前客户端将不会完成，因为他的剩余时间是他从开始的时间 - 1。然后`currentPatronTimeLeft`在递减之前再次更新到它的起始值。这样它就永远不会变成0。

解决方案：

```
else if(currentPatronTimeLeft == 0 && lineSize != 0)
{
    myQueue.poll();
    lineSize--;
    // insert following lines:
    if (lineSize > 0) {
        currentPatronTimeLeft =myQueue.peek() + 1; // +1 <--> following decrement
    }
    // end of my insert
    System.out.println("A customer has been removed from the queue");
    totalCheckedOut++;
    System.out.println("The Queue size is now: "+ lineSize);
} 
```

你**必须**摆脱整个`else if (lineSize != 0)`街区。

# iphone - 将现有的 c 代码移植到 iOS/iPhone

> ID：14997860
> 
> 赞同：2
> 
> 时间：2013-02-21T08:42:39.953
> 
> 标签：iphone, ios, porting, code-reuse

我有一个用 C 语言编写的视频解码器的源代码。

该代码已在 linux OS 下成功编译并执行。后来我还在 ndk 和 JNI 的帮助下将此解码器移植到了一个 android 应用程序中。

现在我的要求是将这个应用程序移植到 iOS（即 iPhone）上。我的查询是：

*   是否有 ndk 和 jni 之类的工具可以将此代码移植到 iOS？
*   这段代码会有任何可靠性问题吗？

我尝试用谷歌搜索相同的信息，但无法获得相当数量的信息来继续移植过程。

任何有关遗嘱的建议或有用的链接将不胜感激。请回复相同的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T14:34:25.670

如上所述，是的，所有 C 代码在 Objective-C 中都是有效的，因为 Objective-C 是 C 的超集。然而，这有点扭曲。该声明实际上是

“所有 C**语法**在 Objective-C 中都有效”

无法保证您的所有代码在 iOS 环境中都能 100% 正常运行。由于您可以执行诸如从 C 或其他机器/操作系统特定的事情进行 UNIX 系统调用之类的事情，因此可能有部分代码在 iOS 中不受支持。如果您编写了您正在使用的所有 C 代码，并且确定它不包含这样的调用或类似的东西，那么您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:46:54.253

好消息！

用于 iPhone 的语言 Objective C 是 C 的超集。这意味着所有 C 代码都是本机支持的。您根本不需要转换代码！

更多信息[在这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T09:06:48.360

它并不那么简单，取决于如何用 C 编写代码。

如果直接添加文件和调用函数不起作用，则需要对文件名进行以下更改 -

*   制作扩展名为 .mm 而不是 .m 的文件
*   将 .c 文件重命名为 .mm
*   将 .h 文件重命名为 .hpp （一旦我在我的项目中移植了 C 文件，它就对我有用）

参考这个[链接](http://iphonedevsdk.com/forum/iphone-sdk-development/82715-using-c-files-in-obj-c-project.html)

# python - 如何在 Python 中创建一组在 Mongodb 中唯一的字段组合

> ID：14997863
> 
> 赞同：9
> 
> 时间：2013-02-21T08:42:49.667
> 
> 标签：python, mongodb, mongoengine

我想创建一个表，其中两个字段组合形成一个索引字段。我用于创建表的 Python 代码如下。我想要做的是使组合字段`course_name`和`group_name`唯一的，以便没有两个组具有相同的`course_name`和`group_name`可以创建。有人可以帮我吗？

```
class SocialGroup(Document):
    timestamp = DateTimeField(default=datetime.now)
    course_name = StringField()
    group_name = StringField(choices=[('A', 1), ('B', 1), ('C', 1),('D', 1), ('E', 1), ('F', 1), ('None',1)], default="None") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T13:26:32.623

您可以在类的字典中指定[索引：](https://mongoengine-odm.readthedocs.io/guide/defining-documents.html?highlight=unique#indexes)`meta`

```
class SocialGroup(Document):
    timestamp = DateTimeField(default=datetime.now)
    course_name = StringField()
    group_name = StringField(choices=[('A', 1), ('B', 1), ('C', 1),('D', 1), ('E', 1), ('F', 1), ('None',1)], default="None")
    meta = {
        'indexes': [
            {'fields': ('course_name', 'group_name'), 'unique': True}
        ]
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-27T10:58:04.617

来自：[http ://docs.mongoengine.org/guide/defining-documents.html#uniqueness-constraints](http://docs.mongoengine.org/guide/defining-documents.html#uniqueness-constraints)

> 您还可以使用 指定多字段唯一性约束 `unique_with`，它可以是单个字段名称，也可以是字段名称的列表或元组

在你的情况下：

```
class SocialGroup(Document):
    timestamp = DateTimeField(default=datetime.now)
    course_name = StringField()
    group_name = StringField(choices=[('A', 1), ('B', 1), ('C', 1),('D', 1), ('E', 1), ('F', 1), ('None',1)], default="None",
                             unique_with='course_name') 
```

或者更复杂：

```
group_name = StringField(choices=[('A', 1), ('B', 1), ('C', 1),('D', 1), ('E', 1), ('F', 1), ('None',1)], default="None",
                         unique_with=['course_name', 'another_field', 'more_field']) 
```

# c++ - 在 C++ 中具有名称绑定的 EDSL

> ID：14997871
> 
> 赞同：2
> 
> 时间：2013-02-21T08:43:11.087
> 
> 标签：c++, haskell, dsl

是否可以在 C++ 中编写将值绑定到变量名的 edsl？例如，我可以在 Haskell 中编写一个 edsl，它允许我编写以下内容[（另请参阅此问题）](https://stackoverflow.com/q/14904048/346587)：

```
prog3 :: StackProg Expr
prog3 = do
  push (IntL 3)
  push (IntL 4)
  a <- pop
  b <- pop
  return (Plus a b) 
```

这会产生一个 AST where`a`和`b`are 变量。在 C++ 中是否有类似的可能？我想要（按重要性排序）

*   生成的 edsl 可接受的语法，
*   明智的 AST
*   对象 (dsl) 语言中的类型安全
*   可理解的力学。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:07:17.797

不，你不能直接用 C++ 建模。但是，在 C++ 中，您可以嵌入其他引擎，例如 Lua，它通常用作扩展引擎，适用于 DSL。

[查看这个答案，也在 StackOverflow 中](https://stackoverflow.com/questions/1591114/embedded-scripting-engine-for-dsl)。

在 C++ 中嵌入 Lua 的步骤：

1.  [这是 Lua 的网页](http://www.lua.org/)。
2.  [在此处下载源代码](http://www.lua.org/download.html)。
3.  [将 Lua 集成到您的 C++ 应用程序](http://www.codeproject.com/Articles/11508/Integrating-Lua-into-C)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T21:04:14.150

如果您想生成有效 C++ 表达式的语法（可能作为所有 C++ 表达式的子集，就像 do-notation 将自身限制为 monad 操作一样），静态验证它们并使用它们，那么您最好的选择是[Boost.Proto](http://www.boost.org/doc/libs/1_53_0/doc/html/proto.html)。简而言之，它本身就是一个 EDSL 来编写和描述 EDSL。

我不会详细介绍如何使用它。虽然它可能很难学会使用，特别是如果你不习惯 C++ 元编程，文档很棒，如果你曾经写过语法，我相信你会找到你的标记。在[我的另一个答案中，](https://stackoverflow.com/questions/10526950/symbolic-differentiation-using-expression-templates-in-c/10528104#10528104)我向某人介绍了如何使用仅接受简单算术表达式并消耗它们来计算它们的导数的语法编写 EDSL，因此您可能需要检查一下。

至于您的确切问题，恐怕答案必须是简短的“不，您不能那样做”，或者是长的“您可以在 Boost.Phoenix 显示的范围内做到这一点，但可能不是考虑到您的 EDSL 用户的隐秘错误和/或额外的编译时间，值得您花时间实施它”。我对此的推理是您想要做的事情适合两个级别：do-notation 是 Haskell 的特定功能，同时在 EDSL 本身的级别上使用语法树并为其赋予语义。

碰巧的是，典型的 Proto 风格的 EDSL 是有效的 C++ 表达式，并且该语言不提供该级别的范围，变量在单独的语句中声明。例如，`_a + _b`是一个有效的 C++ 片段，因为`_a`和`_b`是由 Phoenix 提供的声明的 C++ 变量，但在 EDSL 中不是一个有效的程序，因为`_a`和`_b`未绑定。是的，错误将被捕获，但您必须自己实现。相比之下，do-notation 是 Haskell 的一部分，因此任何 EDSL 都免费继承它。也就是说，`return (a + b)`它本身永远不会有效 - 需要有 some`a`和 some `b`。

不过有一些事情要记住。C++11 提供了 lambda 表达式，因此您实际上可以在这里获得一些作用域——但这些在 EDSL 中是不透明的，语法树只会显示一个变量。一些自省可能会揭示该变量对于某些类型是可调用的，但仅此而已。即使您要求 lambda 在 EDSL 中返回一个值，也不*知道*它们还能做什么。这并不总是值得担心，我会说它非常适合某些 EDSL。

类似地，C++11 使“分解” EDSL 表达式的部分变得更加容易。这并不等同于`a <- foo`do-notation 的糖，但它等同于`let a = foo`. 因此，您实际上可以毫不费力地使以下操作“正确”：

```
auto double_pop = make_tuple(pop(), pop());
auto program = (push(3), push(4), consume(double_pop)); 
```

这可能相当于单调和人为的以下内容：

```
program = do
  let a = pop
  return consume `ap` a `ap` a 
```

（由于 Boost.Proto 最初是一个 C++03 库，因此请确保在使用 C++11 之前仔细阅读文档`auto`，IIRC 有一个警告。）

# html - 主 div 旁边的另一个 div 定位

> ID：14997876
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:43:38.510
> 
> 标签：html, css

我有一个主 DIV，它位于屏幕中心，margin:0 auto; 现在我需要在主 DIV 旁边添加另一个 div（右侧）。如果我增加或减小屏幕尺寸，位置不应该移动......有什么帮助吗？

```
<div style="width:320px; height:500px; background-color:#C60; margin:0 auto;">Main Div</div> <div>Another DIV</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:44:57.397

添加到样式：

```
display:inline-block; 
```

或者

```
float:left; 
```

如果您更喜欢最后一个，那么您可能希望在两个 div 之后添加一个空 div 以清除间距

```
<div style="clear:both"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:54:24.200

`float: left`将正常工作...

HTML 代码：

```
<div class="outer">
    Main Div
</div> 
<div class="inner">Another DIV</div> 
```

CSS 代码：

```
.outer {
    width:220px; 
    height:100px; 
    background-color:#C60; 
    float: left;

}

.inner {
    width:120px; 
    height:100px; 
    background-color:red; 
    float: left;
} 
```

这是 jsfiddle[链接](http://jsfiddle.net/hAWQ3/)

**更新 ：**

jsfiddel[链接](http://jsfiddle.net/hAWQ3/1/)

# ios - 在 UIWebView 中不断丢失 php 会话 cookie

> ID：14997879
> 
> 赞同：4
> 
> 时间：2013-02-21T08:43:54.033
> 
> 标签：ios, objective-c, xcode, cookies, uiwebview

我是论坛的新手，对 iOS 开发也很陌生。我在使用 UIWebView 时遇到问题，我一直失去对设置 phpsession cookie 的 HTML 表单的登录权限（过期设置为 8h，适用于桌面）。似乎 UIWebView 在大约一个小时左右而不是 8 小时后将 cookie 扔掉。我已经阅读了 NSHTTPCookieStorage 应该自动处理 cookie，即使在应用程序进入后台模式或退出后也是如此。

NSHTTPCookie 看起来像这样

**NSHTTPCookie 版本：0 名称："PHPSESSID" 值："6f267fdc94c1ce5fcsdgg49b59a8f46b" expiresDate:2013-02-21 01:27:58 +0000 创建时间：2001-01-01 00:00:01 +0000 (1) sessionOnly:FALSE 域： "mydomain.com" 路径："/" isSecure:FALSE**

我确实在退出/睡眠时将其保存到 NSUserDefaults 中，并在进入前台/打开应用程序时再次加载它，就像这里推荐的那样：[如何设置我的 web 视图加载了已经登录的用户 -iPhone](https://stackoverflow.com/questions/8986963/how-to-set-my-web-view-loaded-with-already-login-user-iphone) - 尽管如此，我仍然失去了登录。

谁能指出我的方向？非常感谢！

我目前正在这样做（根据下面的帖子）：

```
NSURL *lastURL = [[self.webView request] mainDocumentURL];

if (lastURL.absoluteString == NULL) {
    lastURL = [NSURL URLWithString:@"http://mydomain.com/"];
}

NSArray *cookiesForDomain = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString:@"http://mydomain.com"]];
NSMutableURLRequest *newRequest = [NSMutableURLRequest requestWithURL:lastURL];

for (NSHTTPCookie *cookie in cookiesForDomain) {

    NSString *cookieString = [NSString stringWithFormat:@"%@=%@", [cookie name], [cookie value]];

    [newRequest setValue:cookieString forHTTPHeaderField:@"Cookie"];

    NSLog(@"inserted cookie into request: %@", cookie);

}

[self.webView loadRequest:newRequest]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:23:26.060

我在我的应用程序中使用了许多请求，每次发送请求时，我都会从`NSHTTPCookieStorage`. 我不使用`NSUserDefaults`或其他东西来存储 cookie。

当我发送新请求时，我自己设置了所需的 cookie

```
NSURL *myURL = ....
NSMutableRequest *mutableRequest = ....
NSArray *cookiesToSet = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:myURL];
for (NSHTTPCookie *cookie in cookiesToSet) {
    [cookieStringToSet appendFormat:@"%@=%@;", cookie.name, cookie.value];
}

if (cookieStringToSet.length) {
    [mutableRequest setValue:cookieStringToSet forHTTPHeaderField:@"Cookie"];
} 
```

它有效

# c# - 从另一个表和值插入表

> ID：14997883
> 
> 赞同：1
> 
> 时间：2013-02-21T08:44:04.283
> 
> 标签：c#, asp.net, sql, sql-server, sql-insert

我想将表数据和文本框值插入到另一个表中。我正在尝试如下插入命令，但它不起作用。

```
Insert into 
     Table_UserAnswer 
      (
         UserQuizID, 
         QuizID, 
         QuestionID, 
         Title, 
         Answer1, 
         Answer2, 
         Answer3, 
         Answer4,
         CorrectAnswer
       ) 
         '" + m.ToString() + 
      "', 
      select 
         top 5 QuizID, 
         QuestionID, 
         Title, 
         Answer1,
         Answer2,
         Answer3,
         Answer4,
         CorrectAnswer 
     from 
         [Table_Question] 
     order by 
          newid()" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:45:50.360

使用`INSERT INTO...SELECT`声明，

```
INSERT INTO 
    Table_UserAnswer 
    (
      UserQuizID, 
      QuizID, 
      QuestionID, 
      Title, 
      Answer1, 
      Answer2, 
      Answer3, 
      Answer4, 
      CorrectAnswer)  
    SELECT TOP 5 
      'UserQuizIDValue', 
      QuizID, 
      QuestionID, 
      Title,
      Answer1,
      Answer2,
      Answer3,
      Answer4,
      CorrectAnswer 
    FROM   
      Table_Question
    ORDER BY 
      newid() 
```

的值`UserQuizIDValue`来自`m.ToString()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:48:45.897

INSERT INTO TestTable (Col1, Col2) SELECT Col1, Col1 FROM Person.Contact

您必须确保 Insert 查询中的列数应与 Select 语句相同，除非您有任何标识列。

在您的情况下，Select 语句中缺少“UserQuizID”。

# excel - 在不打开源文件的情况下将数据从一个工作簿复制到另一个工作簿

> ID：14997885
> 
> 赞同：0
> 
> 时间：2013-02-21T08:44:06.327
> 
> 标签：excel, vba

我想到了一个新问题：

```
Row  Columns    
7    C  V  M  G
9    X  P  M  N 
```

说明：“7”是写在E列第二个单元格的行号，C、V、M、G是写在“7”前面不同单元格的列名。我想将 C7 、 V7 、 M7 和 G7 的数据分别映射到 X9 、 P9 、 M9 和 N9 请帮忙。

实际上问题是这样的：excel工作簿中有一张表，上面有上面提到的表格。表基本上包含 2 行。在表格的第一个单元格中，第一行的值为 7（由 me 指定的行）。并且第一行中的其他单元格本身具有其他内容，例如 C ， A 等（基本上是其他单元格名称）。第二行基本上是目标地址。描述类似于第一行的描述。现在我想要的是C7的内容将被复制到X9的内容，V7的内容将被复制到P9等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:48:21.153

想象一下，我在 Excel 中有如下设置：

```
 E      F       G       H       I
 1     
 2     7      C       V       M       G
 3     9      X       P       M       N 
```

您可以使用以下代码将 C7 复制到 X9、V7 到 P9 等。

```
Sub CopyCellsUsingTable()
    Dim sourceCells As Range, cl As Range
    Dim sourceRow As Long, targetRow As Long

    Set sourceCells = Range("F2:I2")
    sourceRow = Range("E2")
    targetRow = Range("E3")

    For Each cl In sourceCells
        Range(cl.Value & sourceRow).Copy Destination:=Range(cl.Offset(1, 0).Value & targetRow)
    Next cl
End Sub 
```

您可能需要更新单元格引用。

# azure-virtual-machine - Azure 虚拟机 (IaaS) 之间的通信类型

> ID：14997886
> 
> 赞同：0
> 
> 时间：2013-02-21T08:44:08.543
> 
> 标签：azure-virtual-machine

我正在尝试寻找两个虚拟机 (IaaS) 之间的通信方式。

我尝试了 WCF 通信，但有没有其他方法可以做到这一点？我阅读了有关 Azure Connect 和 VPN 的信息，但它更多地用于本地和云服务之间的通信？

所有可能的方法是什么？

（我是云计算和 Azure 的新手，详细的解释会非常有用。谢谢。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T05:51:45.577

取决于你在找什么

*   如果您正在寻找类似的东西，[VNET通信是可能的。](http://blogs.msdn.com/b/windowsazure/archive/2012/06/19/overview-of-windows-azure-virtual-network.aspx)
*   Azure IaaS 实例具有可用于通过 Internet 进行通信的公共 IP 地址。

# c# - 我的通用列表代码中的 Stackoverflowexception 错误，c#

> ID：14997890
> 
> 赞同：-2
> 
> 时间：2013-02-21T08:44:17.633
> 
> 标签：c#

每次尝试运行我的代码时，我都会收到错误消息：“由于 StackOverFlowException 导致进程终止”。当我查看警告时，我在我的属性上得到了它，上面写着“确保你没有无限循环或无限递归”。这是我的代码：

```
class Book
{
    public string bokensTittle
    {
        get { return bokensTittle; }
        set { bokensTittle = value; }
    }
    public string forfattareFornamn
    {
        get {return forfattareFornamn;}
        set {forfattareFornamn = value;}  // on this line i get the error
    }

    public string forfattareEfternamn
    {
        get {return forfattareEfternamn;}
        set {forfattareEfternamn = value;;} 
    }

    public int lanseringsDatum
    {
        get { return lanseringsDatum; }
        set { lanseringsDatum = value; }
    }

} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:45:35.263

你在这里有一个简单的、无限的递归。

您的两个属性都在访问自己。

有两种修复方法：

1.  自动属性：

    ```
    public string ForfattareEfternamn
    {
        get; set;
    }

    public int LanseringsDatum
    {
        get; set;
    } 
    ```

2.  支持字段：

    ```
    private string _forfattareEfternamn;
    private int _lanseringsDatum;

    public string ForfattareEfternamn
    {
        get { return _forfattareEfternamn; }
        set { _forfattareEfternamn = value; } 
    }

    public int LanseringsDatum
    {
        get { return _lanseringsDatum; }
        set { _lanseringsDatum = value; }
    } 
    ```

顺便说一句：请注意我如何将属性名称更改为以大写字母开头。这是 C# 中公共成员的公认标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:46:24.680

您的属性名称与您在 getter 和 setter 中使用的名称相匹配。只声明 get;set; 如果您不打算使用私有变量，请声明。

```
class Book
{
    public string bokensTittle
    {
        get;set;
    }
    public string forfattareFornamn
    {
        get;set;
    }

    public string forfattareEfternamn
    {
        get;set;
    }

    public int lanseringsDatum
    {
        get;set;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:47:50.193

尝试这个 ：

```
public string forfattareEfternamn
{
    get;
    set;
}

public int lanseringsDatum
{
    get;
    set;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T08:49:31.273

您的两个 get 语句都引用了自己。每当您尝试检索任一属性时，它都会一遍又一遍地调用自己的 get。这就是无限循环和堆栈溢出的原因。

相反，您可以使用支持字段。

```
private string _forfattareEfternamn;

private int _lanseringsDatum;

public string ForfattareEfternamn
{
    get {return forfattareEfternamn;}
    set {forfattareEfternamn = value;;} 
}

public int LanseringsDatum
{
    get { return lanseringsDatum; }
    set { lanseringsDatum = value; }
} 
```

或者，如果您在属性中不需要额外的代码，那么空白的 get/set 对您来说就可以了。

```
public string ForfattareEfternamn
{
    get;
    set;
}

public int LanseringsDatum
{
    get;
    set;
} 
```

（同样在你的二传手中，你有一个额外的；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T08:45:46.420

您正在从 getter 调用属性，后者调用属性等等。

```
public string forfattareEfternamn
{
    get {return forfattareEfternamn;} <-- here you call property getter again
    set {forfattareEfternamn = value;} 
} 
```

如果要使用后备存储，则**字段和属性应具有不同的名称**（通常为后备存储的驼峰式名称和属性的 PascalCase 名称）：

```
private string forfattareEfternamn; // field for storing property value

public string ForfattareEfternamn // property
{
    get {return forfattareEfternamn;} // returning field value
    set {forfattareEfternamn = value;}  // setting field value
} 
```

但在您的情况下，您可以简单地使用自动实现的属性：

```
public string ForfattareEfternamn { get; set; } 
```

我**强烈**建议您阅读[Properties (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T08:46:55.150

```
 public string forfattareEfternamn
    {
        get; 
        set;
    }

    public int lanseringsDatum
    {
        get;
        set;
    } 
```

我相信自动属性是你想要做的。

# c# - 如何从listview实时刷新数据

> ID：14997891
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:44:24.370
> 
> 标签：c#, listview, refresh

如何实时刷新列表视图中的数据获取？当事件将来自另一种形式前。

当我单击 form1 中的添加按钮时，添加的详细信息将反映在 form2 列表视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:58:58.343

您可以尝试使用[ObservableCollections](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，它会在集合更改时引发事件，并且您可以更新您的 UI。

# opencv - 显示来自训练有素的 AdaBoost 分类器的 Haar 特征

> ID：14997892
> 
> 赞同：0
> 
> 时间：2013-02-21T08:44:25.477
> 
> 标签：opencv, classification, adaboost, haar-wavelet

有没有办法直观地显示在分类器的每个阶段使用了哪些 Haar 特征？

我最近使用 opencv_traincascade.exe 训练了一个分类器来检测车辆。为了进一步分析，我希望看到在每个阶段都在评估的功能。

谢谢你的帮助。

**编辑**

如果任何人都可以提供有关 cascade.xml 的信息，那就太好了，节点的含义是什么。谢谢

# javascript - 骨干 - 为什么不渲染到我的 html 页面

> ID：14997893
> 
> 赞同：0
> 
> 时间：2013-02-21T08:44:26.097
> 
> 标签：javascript, jquery, backbone.js

为什么不使用backbone.js 渲染到我的html 页面

这是我的脚本

```
<script type="text/javascript"  src="/jquery-1.7.2.min.js"></script>
<script type="text/javascript"  src="/json2.js"></script>
<script type="text/javascript"  src="/underscore.js"></script>
<script type="text/javascript"  src="/backbone.min.js"></script>

<script>
    (function ($) {

        var ListView = Backbone.View.extend({
            el: $('body'), // el attaches to existing element
            events: {
                'click button#add': 'addItem'
            },
            initialize: function () {
                _.bindAll(this, 'render', 'addItem'); // every function that uses 'this' as the current object should be in here

                this.counter = 0; // total number of items added thus far
                this.render();
            },
            render: function () {
                $(this.el).append("<button id='add'>Add list item</button>");
                $(this.el).append("<ul></ul>");
            },
            addItem: function () {
                this.counter++;
                $('ul', this.el).append("<li>hello world" + this.counter + "</li>");
            }
        });

        var listView = new ListView();

    })(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:48:32.477

请更换

```
<script type="text/javascript"  src="/Sunderscore.js"></script> 
```

到：

```
<script type="text/javascript"  src="/underscore.js"></script> 
```

如果这不起作用，请检查 javascript 库是否与此 HTML 位于同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:53:07.663

你似乎有一个错字

```
<script type="text/javascript"  src="/Sunderscore.js"></script> 
```

你不是说

```
<script type="text/javascript"  src="/underscore.js"></script> 
```

? （underscore.js 代替 Sunderscore.js）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:53:25.863

假设您的下划线声明脚本在您正在测试的项目中是正确的，我会说您的 el 声明错误：

```
el: 'body', 
```

然后你访问它（假设你使用 jQuery 使用 $el 而不是 el.

# c - 长整数中单个位的索引（在 C 中）

> ID：14997894
> 
> 赞同：3
> 
> 时间：2013-02-21T08:44:31.673
> 
> 标签：c, bit-manipulation, bit, pseudocode

我正在尝试找到一个最佳代码来定位长整数（64 位）中的单个位索引。长整数只有一个设置位。（使用C语言）

目前，我只是将整个事情移动一位，然后检查为零。我已阅读有关查找表的信息，但它不适用于整个 64 位。我考虑过检查每个 8 位是否为零，如果不使用查找，但我仍然必须一次移动 8 位。（移位 8 比移位 8 次更好？）

（注意：我正在为移动设备开发，它们 [不足为奇] 很慢）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:57:16.707

每当我需要某种方式来操作比特时，我总是在寻找[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#ZerosOnRightParallel)。对于您的问题，它也很少有解决方案。

这个解决方案似乎是快速和最先进的：

> 并行计算右侧的连续零位（尾随）

```
unsigned int v;      // 32-bit word input to count zero bits on right
unsigned int c = 32; // c will be the number of zero bits on the right
v &= -signed(v);
if (v) c--;
if (v & 0x0000FFFF) c -= 16;
if (v & 0x00FF00FF) c -= 8;
if (v & 0x0F0F0F0F) c -= 4;
if (v & 0x33333333) c -= 2;
if (v & 0x55555555) c -= 1; 
```

对于 N 位字，操作数大致为 3 * lg(N) + 4。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T09:01:26.037

您可以对设置的位进行二进制搜索：

```
int bitn(unsigned long long x)
{
    int n = 0;

    if (x >> 32) {
        n += 32;
        x >>= 32;
    }
    if (x >> 16) {
        n += 16;
        x >>= 16;
    }
    if (x >> 8) {
        n += 8;
        x >>= 8;
    }
    if (x >> 4) {
        n += 4;
        x >>= 4;
    }
    if (x >> 2) {
        n += 2;
        x >>= 2;
    }
    if (x >> 1) {
        n += 1;
    }

    return n;
} 
```

GCC 提供了一个内置的`__builtin_ctzll()`, 来执行此功能（它将利用硬件可能必须快速执行此操作的任何特殊功能）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T08:54:50.493

你应该对照你当前的代码检查这个建议（以及这里给出的任何其他建议）——你可能会发现位移是最有效的方法，或者差异很小，在这种情况下你应该优化可读性。

无论如何，请考虑尝试和基准测试，而不是保证更快的东西。

由于只有 64 个可能的值，因此您可以使用以下内容：

```
int getSetBit (unsigned long x) {
    if (x == 0x8000000000000000UL) return 63;
    if (x == 0x4000000000000000UL) return 62;
    if (x == 0x2000000000000000UL) return 61;
    if (x == 0x1000000000000000UL) return 60;
    if (x == 0x0800000000000000UL) return 59;
    if (x == 0x0400000000000000UL) return 58;
    :
    if (x == 0x0000000000000002UL) return  1;
                                   return  0;
} 
```

您*可能会*发现这更快，但解决方案通常会受到标准范围之外的很多事情的影响（优化策略、数据缓存、流水线等）。

* * *

如果您愿意放弃标准 C，许多环境将优化您可以使用的东西，例如`gcc`：

```
int __builtin_ffs (unsigned int x)
// Returns one plus the index of the least significant
//   1-bit of x, or if x is zero, returns zero. 
```

当然，对于那个，您可能必须将其`long`分成两种`int`类型并单独检查每种类型，例如（未经测试，但您应该了解总体思路）：

```
if (x < 0x80000000UL) return __builtin_ffs((unsigned int)x) - 1;
return __builtin_ffs((unsigned int)(x>>32)) -1 + 32; 
```

或者，`__builtin_clzl()`可以操纵来自的输出来为您提供位位置（它为您提供前导零计数）并且它`unsigned long`已经可以使用。您可以在[此处](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Other-Builtins.html)`gcc`查看内置插件。

# c# - 使用 XML 文档扩展 ApiExplorer

> ID：14997896
> 
> 赞同：1
> 
> 时间：2013-02-21T08:44:35.283
> 
> 标签：c#, xml, asp.net-mvc, asp.net-web-api

我已将 ASP.Net Web API 帮助页面插入到我们的一个项目中，但我希望扩展从 XML 文档文件中读取的信息范围。

具体来说，我们的大多数端点返回资源，除了该资源的数据之外，还包括许多`<Link>`元素，这些元素具有`rel`和`uri`属性，以链接到其他资源和端点。我们已经扩展了 XML 文档以包含关于`rel`每个资源中可能包含的 s 的文档：

```
/// <summary>
/// Retrieves the X Resource
/// </summary>
/// <returns>An X</returns>
/// <resources>
/// <resource rel="self">Self reference</resource>
/// <resource rel="related-item1">Description of related item 1</resource>
/// </resources> 
```

太好了，这一切都进入了 XML 文档文件。但是，[`IDocumentationProvider`](http://msdn.microsoft.com/en-us/library/system.web.http.description.idocumentationprovider%28v=vs.108%29.aspx)它只定义了两种方法 - 一种返回方法的“文档”（作为 a `string`），另一种返回参数的文档（同上）。它是这个接口的一个实现，目前正在通过 XML 文档进行搜索。

我*可以*尝试将额外的 XML 信息与实际文档一起填充到此文档字符串中，但这感觉有些难看。我想用一种新方法来扩展接口，以检索这些更结构化的数据并使用它来填充适当扩展的`HelpPageApiModel`. 但我不确定如何最好地解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:52:19.173

在 Areas\HelpPage\HelpPageConfigurationExtension.cs 的已安装文件中，有以下方法，您可以在其中获取操作的操作描述符并根据需要自定义文档并填充您的“扩展”HelpPageApiModel，并且您可能知道您需要修改 HelpPageApiModel.cshtml 以获取您的“扩展”HelpPageApiModel 属性（如果有）。

私有静态 HelpPageApiModel GenerateApiModel(ApiDescription apiDescription, HelpPageSampleGenerator sampleGenerator)

在此方法中进行自定义会更好，因为 HelpPageApiModel 在第一次调用后被缓存。因此，如果您在上述方法中进行任何自定义，您将自动获得这种缓存体验。

在 IDocumentationProvider 上添加一个额外的方法不会有帮助，因为最终您需要以某种方式自己调用它，因为 web api 框架对此一无所知。

如何获取动作和参数的示例如下：

```
 private static HelpPageApiModel GenerateApiModel(ApiDescription apiDescription, HelpPageSampleGenerator sampleGenerator)
    {
        HelpPageApiModel apiModel = new HelpPageApiModel();
        apiModel.ApiDescription = apiDescription;

        HttpActionDescriptor currentActionDescriptor = apiDescription.ActionDescriptor;

        IEnumerable<HttpParameterDescriptor> currentActionParamDescriptors = ad.GetParameters(); 
```

顺便说一句，目前存在一个错误，即操作的“返回”文档未显示在帮助页面中，但您可以通过进行一些自定义来解决此问题。**[Yao 在此处](http://blogs.msdn.com/b/yaohuang1/archive/2012/12/10/asp-net-web-api-help-page-part-3-advanced-help-page-customizations.aspx)**的帮助页面上有一些不错的博客。

# java - 使用 Grails / Java 获取 404 的主体

> ID：14997897
> 
> 赞同：2
> 
> 时间：2013-02-21T08:44:39.263
> 
> 标签：java, http, testing, groovy

目前我正在测试我们的 REST 实现。我有一个问题，如果发送 404 错误（例如“找不到用户”），我可以获得正确的 HTP-Header，但不能获得页面的正文/内容。

如果我在浏览器中调用页面，我可以看到生成的 JSON 内容。

```
 URLConnection connection = new URL(url).openConnection()
    connection.connect()

    if ( connection instanceof HttpURLConnection) {
        HttpURLConnection httpConnection = (HttpURLConnection) connection
        int code = httpConnection.getResponseCode()
        if (code >= 400) {
            assertTrue("Wrong Error Code", code == 404)
        }
    } 
```

这是我当前的代码，效果很好。但是如何获得 HTTP 响应的正文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:48:41.423

您可以从错误流中获取内容：

```
def url = 'http://www.google.com/notfound'

URLConnection connection = new URL(url).openConnection()
int code = connection.responseCode
if( code >= 400 ) {
  assert code == 404, "Wrong Error Code (expected 404)"
  println connection.errorStream.text
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:08:54.627

InputStream = conn.getInputStream(); 字符串 ur=conn.getURL().toString();

# php - 使用 addurlparameter 重新创建查询字符串

> ID：14997898
> 
> 赞同：0
> 
> 时间：2013-02-21T08:44:40.417
> 
> 标签：php, string, url, parameters

我正在尝试使用此 [php 中的 addUrlParameter 函数-在 url 中添加/更新参数](https://stackoverflow.com/questions/4100538/php-add-update-a-parameter-in-a-url)

但我无法让它解决我的具体问题，我绝望地希望有人能帮助我。

截至目前，我正在使用它来处理表单并从表单帖子创建一个 URL

```
$get_elements = array_filter($_GET, "strlen");        
$url = http_build_query($get_elements);

$search_pattern = array();
$search_pattern[0] = "/([?&]newpage)=[^&]*/";
$search_pattern[1] = "/([?&]next)=[^&]*/";

$search_replacements = array();
$search_replacements[0] = '';
$search_replacements[1] = '';

$new_url = preg_replace($search_pattern, $search_replacements, $url);
header("Location: index.php?page=". $_GET["newpage"] ."&".$new_url); 
```

这很好，但是当我退后一步并为某个参数输入一个新值时，该新值不会在新 URL 中更新 - 它使用旧值。

假设我填写了我想要某种产品的 4 件商品，然后将该表格发布到下一页。然后我意识到我拥有该产品的 7 件商品 - 然后我退后一步输入 7 并再次发布。我的问题是它没有用7更新那个产品的参数，它只是插入一个新的同名参数，以7为值，但最终的url使用以4为值的参数

IE：

```
http://www.domain.com/formhandler.php?vent_45=&udluftning_plast=7&udluftning_fald=&udluftning_ventitegl=&tagfod=fuglegitter&chimney_afstand_tagrende=&udluftning_plast=4&tagfod=fuglegitter&afslutning_sten=dv&topsten=utop&angle_1=45&mainhouse=1&house=1&rooftype=mu&lang=dk&rooftiletype=1&rid=1&producent=h&newpage=inputdims&next=N%C3%A6ste+trin+%C2%BB 
```

此示例中的参数在哪里`udluftning_plast`- URL 有两个该参数，但使用最后一个 - 我需要它来删除旧参数并将其替换为新值。

然后我尝试使用上面链接中的 addUrlParameter 函数，但我无法让它工作。

这里棘手的部分是，在页面上填写项目数量时，需要更新不同的项目，因此它应该以某种方式动态更新 url。

**编辑：**

我可以看到 addUrlParameter 函数删除了设置新值的查询字符串开头的每个重复参数。所以这可能是问题所在。我究竟做错了什么？

如果我 var_dump($url_data) 在 addUrlParameter 的开头，我会得到这个带有所有参数的 URL：

```
array(4) { ["scheme"]=> string(4) "http" ["host"]=> string(22) "www.domain.com" ["path"]=> string(19) "/ny/formhandler.php" ["query"]=> string(431) "vent_45=&udluftning_plast=6&udluftning_fald=&udluftning_ventitegl=2&tagfod=fuglegitter&chimney_afstand_tagrende=&vent_45=&udluftning_plast=4&udluftning_fald=&udluftning_ventitegl=2&tagfod=fuglegitter&chimney_afstand_tagrende=&afslutning_sten=dv&topsten=utop&angle_1=45&mainhouse=1&house=1&rooftype=mu&lang=dk&rooftiletype=1&rid=1&producent=h&newpage=venting&next=N%C3%A6ste+trin+%C2%BB&newpage=inputdims&next=N%C3%A6ste+trin+%C2%BB" } 
```

当我在函数末尾使用 var_dump($url_data) 时，我得到这个 URL 并删除了更新的参数：

```
array(4) { ["scheme"]=> string(4) "http" ["host"]=> string(22) "www.domain.com" ["path"]=> string(19) "/ny/formhandler.php" ["query"]=> string(274) "vent_45=&udluftning_plast=4&udluftning_fald=&udluftning_ventitegl=2&tagfod=fuglegitter&chimney_afstand_tagrende=&afslutning_sten=dv&topsten=utop&angle_1=45&mainhouse=1&house=1&rooftype=mu&lang=dk&rooftiletype=1&rid=1&producent=h&newpage=inputdims&next=N%C3%A6ste+trin+%C2%BB" } 
```

我这样调用函数：

```
foreach($_GET as $key => $value) {      
    addURLParameter("http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]", $key, $value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:33:30.897

addURLParameter 是一个函数，它返回一个新的 url，其中一个新参数插入到提供的 url 中，或者（如果参数已经存在于提供的 url 中）使用新值更新的现有参数。

所以，如果你有：

```
$myUrl = http://www.mysite.com/mypage.php?a=1&b=2 
```

你执行了

```
$myNewUrl = addURLParameter($myUrl, "c", 99); 
```

$myNewUrl 将是

```
http://www.mysite.com/mypage.php?a=1&b=2&c=99 
```

如果你要执行

```
$myNewUrl = addURLParameter($myUrl, "b", 99); 
```

$myNewUrl 将是

```
http://www.mysite.com/mypage.php?a=1&b=99 
```

因此，如果您需要根据从表单提交中传入的值仅更新“udluftning_plast”：

```
$udluftning_plast_val = $_GET["udluftning_plast"];
$url = addURLParameter("http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]", "udluftning_plast", $udluftning_plast_val); 
```

如果表单提交时“udluftning_plast”字段的值为 99，则 $url 将包含对 udluftning_plast 的单个引用：`...&udluftning_plast=99...`

# git - filter-branch 仅在当前分支和当前主管上

> ID：14997900
> 
> 赞同：4
> 
> 时间：2013-02-21T08:44:41.607
> 
> 标签：git, git-filter-branch

我有一个有几个提交的本地分支。现在我需要重写所有这些提交并更改文件名，但只能在一个特定目录中。我不希望对不在本地分支上的提交进行任何更改。

`git filter-branch 'some command' master..HEAD`站在那个目录里跑步给了我

```
You need to run this command from the toplevel of the working tree. 
```

当然我可以从顶层运行它，但这会迫使我用我真正想要改变的目录的路径来编写我的脚本，最终我想在几个目录中运行相同的脚本而不知道那里有什么完整路径是。

有没有办法运行 filter-branch 并使脚本具有当前目录作为它的工作目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:55:44.530

不，那里没有。但是只要让你的脚本接受一个参数，然后在你的顶层运行它：

```
git filter-branch 'yourscript the/sub/directory' master..HEAD 
```

# windows - mac pkg 等效于 windows 使 iTunes 文件-haring 接受文件夹

> ID：14997905
> 
> 赞同：2
> 
> 时间：2013-02-21T08:45:09.620
> 
> 标签：windows, directory, bundle, itunes, file-sharing

我想使用 iTunes 文件共享将最糟糕的文件夹结构 (5G) 中的近 78.000 个文件传输到我的应用程序。iTunes 文件共享只接受文件，所以在 Mac 上我只是将一个文件夹重命名为“package.pkg”或“pakage.rtfd”，然后瞧。这还有一个很大的优势，即只要所有文件都在 iPad 上，我就可以使用 Objective-C 函数“moveItemAtPath”，而不是将每个文件都复制到它的目标位置。这可以节省很多时间。

不幸的是，Windows 将 *.pkg 和 *.rtfd 包识别为普通文件夹，它们实际上是什么。所以我唯一的选择是使用压缩文件夹。也许 *.iso 图像也可以。但是后来我失去了使用“moveItemAtPath”的优势，我必须将每个文件复制到它的目的地。

所以我的问题是：有人知道如何让 Windows 上的 iTunes 接受文件夹吗？或者有人知道 mac 的 *.pkg 文件夹的 Windows 等价物吗？任何可以在一个包中传输多个文件并使用“moveItemAtPath”而不是复制每个文件的想法都会很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T20:44:46.523

我刚发现！Windows 用户可以使用 iExplorer！

1.  启动 iExplorer（可在此 URL [http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)获得）
2.  使用 USB 数据线将 iOS 设备连接到 PC
3.  找到此文件夹：“应用程序”> [YOUR_APP] > “文档”
4.  将包/包拖放到“文档”文件夹中

注意：Mac 上的包/包只是 Windows 上的一个文件夹。在 Windows 上不需要像 .pkg 这样的文件扩展名。

# c# - ASP.NET 3.5：在正则表达式的帮助下允许 URL 中的波浪号（~）

> ID：14997906
> 
> 赞同：0
> 
> 时间：2013-02-21T08:45:15.787
> 
> 标签：c#, asp.net, regex

我有一个输入 URL 的文本框。还为文本框设置了验证器，以检查在文本框中输入的 URL 是否有效。

我用过

```
<asp:RegularExpressionValidator ID="valTargetFormatUrl" runat="server" ControlToValidate="txtTargetUrl" ValidationExpression="(http|https)://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?" SetFocusOnError="True"></asp:RegularExpressionValidator> 
```

上面检查了其中没有特殊字符（如 ~、%）的有效 URL。我需要一个表达式来匹配'~'。

示例：我需要一个表达式来使（[http://www.domainname.com/~/xyz.pdf](http://www.domainname.com/~/xyz.pdf)）有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:06:38.040

```
(http|https)://([\w-]+\.)+[\w-]+(/[\w- ./?%&=~]*)? 
```

对不起，我的错误忘了在表达式中添加〜

# java - 在java中定义构造函数重载

> ID：14997908
> 
> 赞同：-4
> 
> 时间：2013-02-21T08:45:17.827
> 
> 标签：java

什么是构造函数重载以及如何使用示例在 java 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:47:33.697

考虑下面的代码，构造函数被重载，可以用......

```
new Tester(); 
```

或者

```
new Tester("Hello world!"); 
```

这些在给定的类中都是有效的

```
class Tester {
    public Tester() {

    }

    public Tester(String overloaded) {
        System.out.println(overloaded);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:49:26.357

这是一个例子

```
class MyClass{

    public MyClass(){
        System.out.println("Constructor without parameters");
    }

    public MyClass(int a){
        //overloaded constructor
        System.out.println("Constructor with 'a' parameter");
    }

} 
```

您可以创建类构造函数的多个“版本”。这就是方法重载的意思。您几乎可以重载 Java 类的任何方法。

[在http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)上查看官方 Java 教程

有关[http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)和[http://www.java-samples.com/showtutorial.php?tutorialid=284的更多信息](http://www.java-samples.com/showtutorial.php?tutorialid=284)

# django - Django FileField，如何避免长时间的文件复制延迟？

> ID：14997910
> 
> 赞同：0
> 
> 时间：2013-02-21T08:45:27.080
> 
> 标签：django, file-upload, filefield

我有以下课程：

```
class VideoFile(models.Model):
    media_file = models.FileField(upload_to=update_filename, null=True) 
```

当我尝试使用以下请求向其上传大文件（从 100mb 到 2Gb）时，在上传过程之后以及在此**过程**中可能需要很长时间`VideoFile.save()`。

```
def upload(request):
    video_file = VideoFile.objects.create(uploader=request.user.profile)
    video_file.media_file = uploaded_file
    video_file.save() 
```

在我的 Macbook Pro Core i7、8Gb RAM 上，一个 300mb 的上传文件可能需要大约 20 秒才能运行`video_file.save()`

`/tmp`我怀疑这种延迟与从文件永久位置进行磁盘复制操作有关？我已经通过`watch ls -l`在目标目录上运行证明了这一点，一旦`video_file.save()`运行，我可以看到文件出现并在整个延迟过程中增长。

有没有办法消除这种文件传输延迟？通过将文件直接上传到目标文件名，或者只是移动原始文件而不是复制？然而，这不是整个站点的唯一上传操作，因此任何解决方案都需要本地化到此模型。

感谢您的任何建议！

更新：

只是进一步的证据来支持副本而不是移动，我可以`watch lsof`在上传期间看到一个`/private/var/folders/...`从 python 写入的文件，该文件完全映射到上传进度。上传完成后，最终文件位置会出现另一个 lsof 条目，该位置会随着时间的推移而增长。完成后，两个条目都会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:14:50.273

`/tmp`我要提醒的是，上传到然后ing 是最佳实践的原因有很多`cp`，并且将大文件直接上传到其目标是一种潜在的危险操作。

但是，你问的是绝对可能的。Django 定义了[上传处理程序](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#upload-handlers)：

> 您可以编写自定义处理程序来自定义 Django 处理文件的方式。例如，您可以使用自定义处理程序来强制执行用户级配额、动态压缩数据、渲染进度条，**甚至可以直接将数据发送到另一个存储位置，而无需将其存储在本地**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:18:49.327

好的，经过一番挖掘，我想出了一个解决方案。事实证明 Django 的默认存储已经尝试移动文件而不是复制，它首先测试：

```
hasattr(content, 'temporary_file_path') 
```

该属性存在于作为`TemporaryUploadedFile`返回到上传视图的对象的类中，但是该字段本身被创建为由指定的类`FileField.attr_class`

因此，我决定在属性中进行子类化`FieldFile`和`FileField`插槽：`temporary_file_path`

```
class VideoFieldFile(FieldFile):
    _temporary_file_path = None
    def temporary_file_path(self):
        return self._temporary_file_path

class VideoFileField(FileField):
    attr_class = VideoFieldFile 
```

最后在视图中，在保存模型之前，我手动分配了临时路径：

```
video_file.media_file._temporary_file_path = uploaded_file.temporary_file_path() 
```

这意味着我的 1.1Gb 测试文件在大约 2-3 秒内可用，而不是我之前看到的 50 秒左右。它还带来了额外的好处，如果文件存在于不同的文件系统上，它似乎会退回到复制操作。

然而，作为一个旁注，我的网站没有利用`MemoryFileUploadHandler`某些网站可能用来处理较小的文件上传，所以我不确定我的解决方案在这方面的效果如何，但我确信它足够简单，可以检测到上传文件的类并采取相应措施。

# magento-1.7 - Magento 1.7 价格过滤器错误（未找到列：“where 子句”中的 1054 列“e.min_price”未知）

> ID：14997912
> 
> 赞同：4
> 
> 时间：2013-02-21T08:45:31.323
> 
> 标签：magento-1.7

在我的产品列表中，当我过滤价格时，我收到了这个错误。有谁知道，如何解决这个问题？

> SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列'e.min_price'
> 
> 跟踪：0 /var/www/vhosts/domain.nl/httpdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110)：Zend_Db_Statement_Pdo->_execute(Array) 1 /var/www/vhosts/domain。 nl/httpdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array) 2 /var/www/vhosts/domain.nl/httpdocs/lib/Zend/Db/Adapter/Abstract.php( 479): Zend_Db_Statement->execute(Array) 3 /var/www/vhosts/domain.nl/httpdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT COUNT( DI ...'，数组）4 /var/www/vhosts/domain.nl/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php（419）：Zend_Db_Adapter_Pdo_Abstract->query('SELECT COUNT(DI. ..', 数组) 5 /var/www/vhosts/domain.nl/httpdocs/lib/Zend/Db/Adapter/Abstract.php(825): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select),数组）6 /var/www/vhosts/domain.nl/httpdocs/lib/Varien/Data/Collection/Db.php（225）：Zend_Db_Adapter_Abstract->fetchOne（对象（Varien_Db_Select），数组）7 /var/www/vhosts /domain.nl/httpdocs/lib/Varien/Data/Collection.php(225): Varien_Data_Collection_Db->getSize() 8 /var/www/vhosts/domain.nl/httpdocs/lib/Varien/Data/Collection.php( 211): Varien_Data_Collection->getLastPageNumber() 9 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(1036): Varien_Data_Collection->getCurPage () 10 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(871): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false) 11 / var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Review/Model/Observer.php(78)：Mage_Eav_Model_Entity_Collection_Abstract->load() 12 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Model/App.php(1338): Mage_Review_Model_Observer->catalogBlockProductCollectionBeforeToHtml(Object(Varien_Event_Observer)) 13 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Model/App.php(1311): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Review_Model_Observer), 'catalogBlockPro...', 对象(Varien_Event_Observer)) 14 /var/www/vhosts/domain.nl/httpdocs/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('catalog_block_p...', Array) 15 /var/www/vhosts/domain .nl/httpdocs/app/code/core/Mage/Catalog/Block/Product/List.php(163): Mage::dispatchEvent('catalog_block_p...', Array) 16 /var/www/vhosts/domain。 nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(862)：Mage_Catalog_Block_Product_List->_beforeToHtml() 17 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml() 18 /var/www /vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('product_list', true) 19 /var/www/vhosts/domain.nl /httpdocs/app/code/core/Mage/Catalog/Block/Category/View.php(85): Mage_Core_Block_Abstract->getChildHtml('product_list') 20 /var/www/vhosts/domain.nl/httpdocs/app/design /frontend/domain/default/template/catalog/category/view.phtml(67): Mage_Catalog_Block_Category_View->getProductListHtml() 21 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/块/模板.php(241): 包括('/var/www/vhosts...') 22 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/johans...') 23 /var/www/vhosts/domain.nl/httpdocs /app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView() 24 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/块/Abstract.php(863): Mage_Core_Block_Template->_toHtml() 25 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml() 26 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml() 27 /var/www /vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml() 28 /var/www/vhosts/domain。nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true) 29 /var/www/vhosts/domain.nl/httpdocs/app/ design/frontend/domain/default/template/page/2columns-right.phtml(50): Mage_Core_Block_Abstract->getChildHtml('content') 30 /var/www/vhosts/domain.nl/httpdocs/app/code/core/ Mage/Core/Block/Template.php(241): include('/var/www/vhosts...') 31 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core /Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/johans...') 32 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/ Template.php(286): Mage_Core_Block_Template->renderView() 33 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml() 34 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml() 35 /var/www/vhosts/ domain.nl/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput() 36 /var/www/vhosts/domain.nl/httpdocs/app/code /core/Mage/Catalog/controllers/CategoryController.php(159): Mage_Core_Controller_Varien_Action->renderLayout() 37 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Controller/Varien/ Action.php(419): Mage_Catalog_CategoryController->viewAction() 38 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view') 39 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) 40 /var/www/vhosts/domain.nl/httpdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front- >dispatch() 41 /var/www/vhosts/domain.nl/httpdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array) 42 /var/www/vhosts/domain.nl/httpdocs/index. php(92): 法师::run('', 'store')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:58:16.890

找到解决方案：这是一个兼容问题。我在 Magento 1.6 中更改了价格过滤器（app/code/local/Mage/Catalog/Model/Layer/Filter/price.php）

在 1.7 中这个文件已经改变了，所以我也必须在 app/code/local 目录中改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T11:30:56.313

在第 114 行：

app/code/local/Mana/Filters/Resource/Filter/Price.php

改变：

```
$select->group($rangeExpr)->order("$rangeExpr ASC"); 
```

至：

```
$select->group($rangeExpr)->order($rangeExpr, "ASC"); 
```

这解决了我使用 Manadev 分层导航 (Mage 1.9.1) 的问题

# javascript - 延迟查询 ulSlide 插件

> ID：14997923
> 
> 赞同：0
> 
> 时间：2013-02-21T08:45:56.023
> 
> 标签：javascript, jquery, html-lists

所以我使用了很棒的**jQuery ulSlide 插件**。但是我想延迟动画。调用插件时该`.delay()`功能似乎不起作用。有什么建议么？

网站： http: [//www.carlpapworth.com/friday-quiz/#](http://www.carlpapworth.com/friday-quiz/#)

html:

```
<ul id="qBox">
<!--Q1-->           <li class="qContainer">
                        <div class="qQuestion">Question I                       </div>
                        <ul class="qAnswers">
                            <li><a href="#" class=""><h3>Answer a</h3></a></li>
                            <li><a href="#" class=""><h3>Answer b</h3></a></li>
                            <li><a href="#" class=""><h3>Answer c</h3></a></li>
                        </ul>
                    </li>
<!--Q2-->           <li class="qContainer">
                        <div class="qQuestion">Question II                      </div>
                        <ul class="qAnswers">
                            <li><a href="#" class=""><h3>Answer 1</h3></a></li>
                            <li><a href="#" class=""><h3>Answer 2</h3></a></li>
                            <li><a href="#" class=""><h3>Answer 3</h3></a></li>
                        </ul>
                    </li>
<!--Q3-->           <li class="qContainer">
                        <div  class="qQuestion">Question III                        </div>
                        <ul class="qAnswers">
                            <li><a href="#" class=""><h3>Answer 1</h3></a></li>
                            <li><a href="#" class=""><h3>Answer 2</h3></a></li>
                            <li><a href="#" class=""><h3>Answer 3</h3></a></li>
                        </ul>
                    </li>
</ul> 
```

自定义-JS：

```
$(document).ready(function() {  
                    $('#qBox').ulslide({
                            effect: {
                                type: 'slide', // slide or fade
                                axis: 'x',     // x, y
                                distance: 0   // Distance between frames
                            },
                            duration: 2000,
                            autoslide: 0,
                            width: 500,
                            height: 300,
                            mousewheel: false,
                            nextButton: '.qAnswers a',
                            prevButton: '#e1_prev'
                    }); 
}); 
```

# android - OnDetach/onAttach 片段重新创建片段活动

> ID：14997928
> 
> 赞同：0
> 
> 时间：2013-02-21T08:46:13.417
> 
> 标签：android, fragment, detach

我想分离/附加我的片段，但是在附加后如何设置该片段不会重新创建。

在片段中，我有 WebView；当我选择和取消选择选项卡时，webview 加载起始页。

有我的代码：

```
 public class MainActivity extends Activity implements OnClickListener, OnMenuItemClickListener {

    ActionBar bar;
    View v;

     public static TextView tilt;
    LayoutInflater inflater;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        onAddTab();
        View v=getLayoutInflater().inflate(R.layout.action_bar, null);
         ImageButton im = (ImageButton)v.findViewById(R.id.tab_toggle);
        im.setOnClickListener(this);
        getActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.shape_layout));
        getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
        getActionBar().setCustomView(v);
        onToggleTabs();

        }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()){
        case R.id.tab_toggle:

            onAddTab();

            break;
        }

    }

    public void onAddTab() {
        final ActionBar bar = getActionBar();
        View v=getLayoutInflater().inflate(R.layout.layout_tab, null);
        tilt = (TextView)v.findViewById(R.id.tit_le);

        ActionBar.LayoutParams lp = new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT, ActionBar.LayoutParams.WRAP_CONTENT); 
        lp.gravity = Gravity.CENTER;
        v.setLayoutParams(lp);
        closetab = (ImageButton)v.findViewById(R.id.close);
        closetab.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                onRemoveTab();

            }
        });

        bar.addTab(bar.newTab()
                .setCustomView(v)
                .setTabListener(new TabListener<Web>(this, "Tag A", Web.class)));

    }

    public void onRemoveTab() {
        final ActionBar bar = getActionBar();
        Tab tab = bar.getSelectedTab();

            bar.removeTab(tab);

    }

    public void onToggleTabs() {
        final ActionBar bar = getActionBar();

            bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    }

    public void onRemoveAllTabs(View v) {
        getActionBar().removeAllTabs();
    }

    public static class TabListener<T extends Fragment>  implements ActionBar.TabListener{

       private final Activity myActivity;
       private final String myTag;
       private final Class<T> myClass;

       public TabListener(Activity activity, String tag, Class<T> cls) {
           myActivity = activity;
           myTag = tag;
           myClass = cls;
       }

 @Override
 public void onTabSelected(Tab tab, FragmentTransaction ft) {

  Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);

  // Check if the fragment is already initialized
        if (myFragment == null) {
            // If not, instantiate and add it to the activity
            myFragment = Fragment.instantiate(myActivity, myClass.getName());
            ft.add(R.id.fragment0, myFragment, myTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(myFragment);
        }

 }

 @Override
 public void onTabUnselected(Tab tab, FragmentTransaction ft) {

  Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);

  if (myFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(myFragment);

        }

 }

 @Override
 public void onTabReselected(Tab tab, FragmentTransaction ft) {
  // TODO Auto-generated method stub

 }
    } 
```

有片段：

```
public class Web extends Fragment implements OnLongClickListener, OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    c=this.getActivity();

    v = inflater.inflate(R.layout.activity_main, container, false);
    return v;
}

@SuppressWarnings("deprecation")
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
setRetainInstance(true);

wv = (WebView)v.findViewById(R.id.wv);
wv.setWebChromeClient(new WebChromeClient(){
    @Override
    public void onProgressChanged(WebView view, int progress) {
        // TODO Auto-generated method stub
        super.onProgressChanged(view, progress);

               if(progress < 100 && pr.getVisibility() == ProgressBar.GONE){
                   pr.setVisibility(ProgressBar.VISIBLE);

               }
               pr.setProgress(progress);
               if(progress == 100) {
                   pr.setVisibility(ProgressBar.GONE);

               }
            }
});
wv.setWebViewClient(new MyWebViewClient());

wv.loadUrl("http://www.google.com");
wv.setOnLongClickListener(this);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:50:05.450

尝试[setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)

另请查看此帖子： [Android 片段 setRetainInstance(true) 不起作用（Android 支持库）](https://stackoverflow.com/questions/12901760/android-fragments-setretaininstancetrue-not-works-android-support-library) [片段 setRetainInstance 不起作用（Android 支持库）](https://stackoverflow.com/questions/12898901/fragment-setretaininstance-not-works-android-support-lib) [了解片段的 setRetainInstance（布尔）](https://stackoverflow.com/questions/11182180/understanding-fragments-setretaininstanceboolean)

# android - 每当设备屏幕在没有服务的情况下打开时如何进行服务器调用

> ID：14997934
> 
> 赞同：0
> 
> 时间：2013-02-21T08:46:25.040
> 
> 标签：android, broadcastreceiver

仅当应用程序在后台运行时才满足此要求。并且如果屏幕在用户按下以检查任何通知时打开，则如果应用程序在后台运行并调用服务器，则调用 Asynctask。

我尝试在屏幕打开并尝试执行时使用广播接收器，它仅在按下主页按钮后应用程序位于前屏幕上时才有效。然后如果用户在一小时后按下电源按钮，则没有任何反应。

基本上我不确定应用程序是否在后台某个时间后被杀死。请帮助我。我是 Android 中的菜鸟，我认为大多数开发人员可能正在使用此功能，但除了服务调用之外我没有看到任何东西，我真的不想要任何服务/警报管理器，因为我不希望它连续工作。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:05:48.787

> 每当设备屏幕在没有服务的情况下打开时如何进行服务器调用

这是不可能的。`ACTION_SCREEN_ON`是只能由`BroadcastReceiver`注册的 via接收的广播`registerReceiver()`。因此，除非您是前台活动，否则您可以接收此广播的唯一方法是通过始终运行的服务，这不是一个好主意。

> 因为我不希望它连续工作

然后不要“只要设备屏幕打开就进行服务器调用”。为您尝试以这种方式解决的任何业务问题寻找其他解决方案。

# c# - 按键事件 C#

> ID：14997942
> 
> 赞同：2
> 
> 时间：2013-02-21T08:46:50.803
> 
> 标签：c#, windows-ce, device, keypress

我有一个带有 9 个按钮的“主页”屏幕。按钮的所有文本属性设置如下： &Returns 以便 R 在显示中带有下划线。

因此，当我在主屏幕上按 R 时，我希望加载 Returns 屏幕。这就是我所拥有的：

```
private void frmHome_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.R)
    {
        frmReturns R = new frmReturns(empid);
        R.Show();
        this.Hide();
        e.Handled = true;
    }
} 
```

但这绝对没有任何作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:55:49.063

您应该将表单的[KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)属性设置为`true`

```
this.KeyPreview = true; 
```

否则会在表单的一些内部控件中引发按下键的事件，而不是在主表单中。

此外，您的比较区分大小写。`e.KeyChar == (char)Keys.R`仅适用于`R`但不适用于`r`.

```
if(char.ToUpper(e.KeyChar) == (char)Keys.R) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:50:37.843

我认为这篇文章是类似的： [CTRL + S 提交表单和所有输入](https://stackoverflow.com/questions/7205184/ctrl-s-to-submit-form-and-all-inputs)

我做了类似的事情，它确实有效。它可能需要更多输入，因为您不想在完成之前不小心输入 hit r 以使页面重定向到某个地方？

# javascript - 如何更改 html5uploader 中使用的 XmlHttpRequest 或 FileAPI 以支持 IE

> ID：14997943
> 
> 赞同：0
> 
> 时间：2013-02-21T08:46:52.947
> 
> 标签：javascript, html, internet-explorer, cross-browser

我将[html5uploder](http://code.google.com/p/html5uploader/)完美地集成到我开发的网站中，但它并非设计为与 IE 一起使用。但是客户现在希望至少支持 IE 10。即使 IE 支持 FileAPI，拖放文件上传器也不适用于任何 IE 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:09:25.837

IE没有大问题，这段代码很容易适应微软浏览器。

首先确保在 html 文件中强制浏览器进入“IE10”（或更高）模式（无怪癖，无兼容模式）。如果没有，所有的 javascript 都会失败，因为大部分代码不符合 IE9：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

当然，在其他浏览器中是没有考虑到的，所以没问题。

现在，让我们稍微修改一下 html5uploader.js 文件：

*   First`readAsBinaryString`在 IE10 中不被接受。您可以将其替换为`readAsDataURL`，但这会改变您提交文件的方式，以及您必须接收它的方式（在 php 中）

    ```
    if (navigator.appName === "Microsoft Internet Explorer") {  
        reader.readAsDataURL(file); 
    } else {
        reader.readAsBinaryString(file);
    } 
    ```

*   其次，`sendAsBinary`在 IE 上不起作用，并且不相关，因为我们现在正在使用`readAsDataURL`. 所以我们必须将我们的文件作为 base64 字符串提交，之后我们将转换为二进制文件（在 php 中）。只需发送它`xhr.send`

*   最后，`btoa`是 Mozilla 实现的一个功能，在 Chrome 中也可以使用。我认为不能在 IE10 中使用。但没问题，因为`readAsDataURL`会将您的文件读取为 base64 字符串！所以只需发送它`xhr.send((bin));`

所以它给出了：

```
 if(xhr.sendAsBinary != null) { 
        xhr.sendAsBinary(body);
        // Chrome and IE10 sends data but you must use the base64_decode on the PHP side
    } else {
    if (navigator.appName === "Microsoft Internet Explorer") {  
      xhr.open('POST', targetPHP+'?up=true&browser=IE&filename='+encodeURI(file.name), true);
    } else {
      xhr.open('POST', targetPHP+'?up=true&browser=chrome&filename='+encodeURI(file.name), true);
    }
      xhr.setRequestHeader('UP-FILENAME', file.name);
      xhr.setRequestHeader('UP-SIZE', file.size);
      xhr.setRequestHeader('UP-TYPE', file.type);

    if (navigator.appName === "Microsoft Internet Explorer") {  
      xhr.send((bin)); // in IE, it s already base64, no need conversion
    } else {
      xhr.send(window.btoa(bin)); // in Chrome, it s binary, so conversion to base64 is needed
    }
    } 
```

请注意，在服务器端，我无法获取标头，`getallheaders()`因为此功能在 IIS 和 PHP 5.2 上不起作用，所以我直接通过 URL 传输文件名！

所以现在我们在 PHP 中有 3 个案例：

*   Firefox 将作为二进制发送，易于使用`$_FILES['upload']['tmp_name']`然后移动它。
*   在 IE 中，我们得到`$_GET['browser']=='IE'`.

我们得到文件的内容是这样的：

```
 $content = file_get_contents('php://input'); //the string we get contains 2 parts
      $content = str_replace(' ','+',$content); // we need to replace spaces by plusses
      $content = split(",",$content); // we do not need the first part of the string (the one with the file type).
      $content = base64_decode($content[1]); // we decode the base64 to binary 
```

*   在 Chrome 中，我们得到`$_GET['browser']=='chrome'`.

我们得到文件的内容是这样的： `$content = base64_decode(file_get_contents('php://input'));`//easy 因为它已经是一个base64编码的二进制文件，所以只需要解码它！

对于 IE 和 chrome，我们使用以下命令创建文件：

```
 $filename = urldecode($_GET['filename']); // because I cannot get headers...
      file_put_contents($upload_folder.'\\'.$filename, $content); 
```

完毕 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T08:20:14.290

你的方法对我有用。我从 JS 和服务器中删除了 IE 特定条件。它适用于 IE10、IE11、Chrome。

Javascript

```
private onFileChange(e) {
  var file = _.first(e.target.files);
  if (!file) { return; }

  var xhr = new XMLHttpRequest();
  xhr.open("POST", '/upload', true);
  xhr.setRequestHeader("Session-Id", 'secret');

  var reader = new FileReader();
  reader.onload = function(){
    xhr.send(this.result);
  };
  reader.readAsDataURL(file);
} 
```

在 Rails 服务器上

```
class UploadsController < ApplicationController
  def create
    file_id = DateTime.current.strftime('%Y_%m_%d_%H_%M_%S_%L') + '_' +
              SecureRandom.hex

    base64_content = request.body.read.to_s.split(',').last
    file_content = Base64.decode64(base64_content)

    File.open("tmp/#{file_id}", 'wb'){ |f| f.write(file_content) }

    render json: { id: file_id }
  end
end 
```

# c++ - 函数内部的内存分配和删除

> ID：14997946
> 
> 赞同：2
> 
> 时间：2013-02-21T08:46:57.583
> 
> 标签：c++, memory-management, memory-leaks

我正在编写一个大型数值分析程序，我几乎不需要优化内存。

在我的程序中，有些地方我需要计算一个矩阵，然后在某些函数中使用它。我们称之为矩阵`f`。`f`是，一个在创建`winSize x winSize`之前计算的变量。`f`

我有几个功能，这是重要的：

```
double** getF(some params to get f,int winSize){
    double** f=new double*[winSize];
    for(int i=0;i<winSize;i++)
         f[i]=new double[winSize];
    /* 

    Some stuff to fill f

    */
}
void freeF(double** f,int winSize){
     for(int i=0;i<winSize;i++)
         delete [] f[i];
     delete [] f;
} 
```

程序如下：

```
int winSize=computeWindowSize();
double** f=getF(someparams,winSize);

hiIamaFunctionThatWantsToReadF(params...,f,winSize);
soIwant(params2...,f,winSize);
iamJustCurious(f,winSize);

freeF(f,winSize) 
```

请注意，没有人修改 f，只是读取它。

我的问题是这不会释放内存。我认为问题出在我处理 f 的方式上，但不确定....

我的问题是：

*   为什么这不起作用？
*   我应该怎么做才能让它工作？

**编辑：**

如何检查内存没有被释放？

我必须运行这段代码 1000x1400 次，并且在几次迭代中程序崩溃，因为我的计算机中没有更多可用的 RAM 内存......这可能是未释放内存的标志。然后我尝试在函数外创建内存，然后在函数外删除。通过这种方式，我可以看到内存被分配和删除。但是一旦在函数内部，我可以看到分配，但看不到释放。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:51:20.033

似乎信息太少，无法说明您的代码不起作用。

也许它在未显示的代码中。

但是您可以只使用保证工作的构造。

代替

```
double** f=getF(someparams,winSize); 
```

做

```
std::vector<double> f( winSize*winSize ); 
```

然后代替

```
f[y][x] 
```

做

```
f[y*winSize + x] 
```

当然你可以定义一个函数来做那个索引

当然你可以把它包装在一个矩阵类中

但本质上，这是让事情顺利进行的一种方法:)

请注意，它`std::vector`负责分配和释放，如果您愿意，它也可以调整大小和复制

# php - 在 PHP 中加密和解密许可证密钥

> ID：14997947
> 
> 赞同：2
> 
> 时间：2013-02-21T08:46:56.757
> 
> 标签：php, license-key

我需要生成具有给定名称、产品名称和到期日期的许可证密钥。如果我的一位客户购买并使用我的产品，他必须输入此许可证密钥。

我尝试了很多方法，但我不知道如何在 PHP 中实现这一点。密钥应该可以安全复制。在 PHP 中创建许可证密钥加密和解密的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:23:24.567

以下代码可能对您有所帮助：

```
function encrypt($sData, $secretKey){
    $sResult = '';
    for($i=0;$i<strlen($sData);$i++){
        $sChar    = substr($sData, $i, 1);
        $sKeyChar = substr($secretKey, ($i % strlen($secretKey)) - 1, 1);
        $sChar    = chr(ord($sChar) + ord($sKeyChar));
        $sResult .= $sChar;

    }
    return encode_base64($sResult);
} 

function decrypt($sData, $secretKey){
    $sResult = '';
    $sData   = decode_base64($sData);
    for($i=0;$i<strlen($sData);$i++){
        $sChar    = substr($sData, $i, 1);
        $sKeyChar = substr($secretKey, ($i % strlen($secretKey)) - 1, 1);
        $sChar    = chr(ord($sChar) - ord($sKeyChar));
        $sResult .= $sChar;
    }
    return $sResult;
}

function encode_base64($sData){
    $sBase64 = base64_encode($sData);
    return str_replace('=', '', strtr($sBase64, '+/', '-_'));
}

function decode_base64($sData){
    $sBase64 = strtr($sData, '-_', '+/');
    return base64_decode($sBase64.'==');
} 
```

这里

```
$secretKey; // Your secret key can be anything which you only know it. So no one easily decrypt through any tool. (recommended often change the $secretKey). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:51:52.373

那么有[NuCoder](http://www.nusphere.com/products/nucoder.htm)可以提供这种类型的功能

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-30T04:31:38.847

尝试`next service www.e-ll.ro | Encrypt with License Key Any PHP Code/Source/Script/Website`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-18T07:53:33.283

对于本地许可证，请使用 ionCube 或 php 的 openssl，因为 mcrypt 已被放弃。对于远程许可证，请使用 php 的 curl。它可能会让你知道如何做到这一点[http://www.phplicengine.com](http://www.phplicengine.com)我还建议在 github 或 packagist 中查看 phpseclib。它首先使用 openssl，如果不可用，则切换到 mcrypt。使用 openssl 或 mcrypt 你可以加密和解密。至于方法，我建议使用 AES_128。

# fullcalendar - 如何将单元格中的日期移动到完整日历的右下角

> ID：14997950
> 
> 赞同：2
> 
> 时间：2013-02-21T08:47:13.900
> 
> 标签：fullcalendar

我正在使用最新版本的 jQuery Full calendar。目前，默认日期编号位于单元格的右上角。我想把它移到右下角。我尝试通过 CSS 进行操作，即垂直对齐：底部，但它不会影响第一列。

/ ********编辑******* /

好的，css解决方案不起作用，所以我移动了html结构

原来的 ：

```
<td class="fc-sat fc-widget-content fc-day6 fc-last">
  <div>
    <div class="fc-day-number">2</div>
    <div class="fc-day-content">
      <div style="position:relative">&nbsp;</div>
    </div>
  </div>
</td> 
```

新的

```
<td class="fc-sat fc-widget-content fc-day6 fc-last">
      <div>

        <div class="fc-day-content">
          <div style="position:relative">&nbsp;</div>
        </div>
      </div>
      <div class="fc-day-number">2</div>
    </td> 
```

' 如您所见，我已将 .fc-day-number div 移到外部，并将 vertical-align:bottom 添加到 td 。这有效，但现在单元格的高度调整不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:02:23.520

您可以编辑 fullcalendar.css 以**将**这些设置添加到现有标签：

```
.fc-widget-content {
    position: relative;
}

.fc-day-number {
    position: absolute;
    right: 0;
    bottom: 0;
} 
```

这应该将天数移动到右下角。

# html - 列出不能很好地放在导航栏中的项目

> ID：14997955
> 
> 赞同：2
> 
> 时间：2013-02-21T08:47:27.083
> 
> 标签：html, css

以下是工作导航栏的链接

我遇到的问题是在列表项团队中，他们不像其他列表项那样位于彼此下方。我知道这是因为一些团队名称是 2 行和 3 行我不知道如何设置它们，所以它们彼此下方而没有所有空间

[JS小提琴](http://jsfiddle.net/elroyz/SsNXR/)

HTML

```
<div id="wrap">

<ul class="navbar">
      <li><a href="">Home</a></li>
      <li><a href="">Franchises</a>
        <ul>
        <li><a href="">elroyz Xpress</a></li>
        <li><a href="">Skye Stickbeetles</a></li>
        <li><a href="">Hortons Heroes</a></li>
        <li><a href="">The Predators</a></li>
        <li><a href=""> The Greater Western Sandhurst Storm</a></li>
        <li><a href="">Stockyzladz</a></li>
        <li><a href="">General Soreness</a></li>
        <li><a href="">Wild Things</a></li>
        <li><a href="">The Bombsquad</a></li>
        <li><a href="">Chubby Chaser</a></li>
        <li><a href="">Soup-A-Stars</a></li>
        <li><a href="">StayClassy FC</a></li>
        <li><a href="">The Peptides</a></li>
        <li><a href="">Untouchable Saints</a></li>
        <li><a href=""> Langy All Blacks</a></li>
        <li><a href="">McQueenMachine</a></li>
        </ul>
      </li>
      <li><a href="">Fixtures</a>
        <ul>
        <li><a href="">Round 1</a></li>
        <li><a href="">Round 2</a></li>
        <li><a href="">Round 3</a></li>
        <li><a href="">Round 4</a></li>
        <li><a href="">Round 5</a></li>
        <li><a href="">Round 6</a></li>
        <li><a href="">Round 7</a></li>
        <li><a href="">Round 8</a></li>
        <li><a href="">Round 9</a></li>
        <li><a href="">Round 10</a></li>
        <li><a href="">Round 14</a></li>
        <li><a href="">Round 15</a></li>
        <li><a href="">Round 16</a></li>
        <li><a href="">Round 17</a></li>
        <li><a href="">Round 18</a></li>
        <li><a href="">Round 19</a></li>
        <li><a href="">Round 20</a></li>
        <li><a href="">Round 21</a></li>
        <li><a href="">Round 22</a></li>
        <li><a href="">Round 23</a></li>
        </ul>
      </li>
      <li><a href="">Free Agents</a>
        <ul>
        <li><a href="">Adelaide</a></li>
        <li><a href="">Brisbane</a></li>
        <li><a href="">Carlton</a></li>
        <li><a href="">Collingwood</a></li>
        <li><a href="">Essendon</a></li>
        <li><a href="">Fremantle</a></li>
        <li><a href="">Geelong</a></li>
        <li><a href="">Gold Coast</a></li>
        <li><a href="">GWS</a></li>
        <li><a href="">Hawthorn</a></li>
        <li><a href="">Melbourne</a></li>
        <li><a href="">North Melbourne</a></li>
        <li><a href="">Port Adelaide</a></li>
        <li><a href="">Richmond</a></li>
        <li><a href="">St Kilda</a></li>
        <li><a href="">Sydney</a></li>
        <li><a href="">West Coast</a></li>
        <li><a href="">Western Bulldogs</a></li>
        </ul>
      </li>

      <li> <a href="#">De-Listings</a></li>
</ul>
 </div> 
```

CSS

```
#wrap {
    width:100%;
    height: 28px;
    margin: 0;
    z-index:99;
    background-color:#F00;
    text-align:left;}

.navbar {

    padding:0;
    height: 25px;
    margin: 0 auto;
    width: 500px;
    border-right: 1px solid #1c1c1c;
    border-left: 1px solid #1c1c1c;
}

    .navbar li  {
            width: 100px;  
            float: left;  
            text-align: center;  
            list-style: none;  
    font: normal bold 11px Arial, Verdana, Helvetica;  
            padding: 0;
            margin: 0;
            background-color: #F00
                        }

.navbar a   {                           
        padding: 7px 0;  
        border-left: 1px solid #1c1c1c; 
        border-right: 1px solid #1c1c1c; 
        text-decoration: none;  
        color: white; 
        display: block;

        }

 .navbar li:hover, a:hover {
     background-color: #900;
 } 

.navbar li ul   {
        display: none;  
        width: 300px;                                   
        margin: 0; 
        padding: 0;             
        }               

.navbar li:hover ul     {
                        display: block; 
                        }

.navbar li ul li {background-color: #a4a4a4;
}

.navbar li ul li a  {
        border-left: 1px solid #1c1c1c; 
        border-right: 1px solid #1c1c1c; 
        border-top: 1px solid #1c1c1c; 
        border-bottom: 1px solid #1c1c1c; 
        }

.navbar li ul li a:hover    {background-color: #1c1c1c;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:08:26.437

只需添加`height:35px;`到`.navbar li ul li a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:57:35.290

将此属性添加`clear:left`到`.navbar li ul li`

像这样 ：

```
.navbar li ul li {
    background-color: #a4a4a4;
    clear:left;
} 
```

结果：http: [//jsfiddle.net/SsNXR/2/](http://jsfiddle.net/SsNXR/2/)

# java - 使用包含重复键或值的 Map 中的值获取键

> ID：14997957
> 
> 赞同：0
> 
> 时间：2013-02-21T08:47:31.577
> 
> 标签：java, map, bimap

我有一个具有重复值的地图。我现在想在不遍历所有 Map.Entries 的情况下使用 value 获取密钥。我在地图中有 500 多个条目。我不想每次都迭代整个地图。

我想到了使用谷歌收藏的 BiMap。但是，BiMap 不支持重复键。任何人都可以建议可以使用哪些其他第三方库来解决这个问题？

更新：地图包含重复值，它是从包含键值对的文本文件中加载的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:01:41.143

您可以使用[ListMultimap](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ListMultimap.html)，然后使用[Multimaps.invertFrom()](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#invertFrom%28com.google.common.collect.Multimap,%20M%29)来获取逆映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:02:55.793

> 我有一张地图

……嗯，有你的问题！听起来数据不太适合 BiMap 的限制。考虑维护封装为元组（或一对有序集合）的数据的不同有序集合。

# javascript - window.alert 无法删除

> ID：14997961
> 
> 赞同：1
> 
> 时间：2013-02-21T08:47:51.037
> 
> 标签：javascript

我正在阅读有关 JavaScript 删除运算符并对其进行试验的内容。在我尝试从窗口对象中删除方法之前，一切似乎都很好。代码如下所示

```
var log = function(str){
  if(str !== undefined)
  {
    document.write(str);
  }
   document.write("</br>");
};

window.myVar = function(){
  // do something
};

// this deletes custom method 
log(delete  window.myVar);  // true (expected)
log(typeof window.myVar);  // undefined (expected)

log(delete window.alert);  // true (OK)
log(typeof window.alert); // function (Unexpected)

window.alert = 10;
log(typeof window.alert);   // number (Successfully overwritten)
log(delete window.alert);  // true
log(typeof window.alert); // function (Returns back to original object) 
```

似乎它可以让我删除我创建的对象，但不能删除已经定义的对象，但它让我可以覆盖它。谁能解释一下背后的原因是什么？如果删除也没有在这里发生的对象，删除也应该返回“假”。

[更新] 我正在使用 FF 19 并在[http://jsbin.com中运行它](http://jsbin.com)

**[更新]**请注意，我了解如何覆盖 window.alert 并运行我的自定义代码。我的问题是 window.alert 有什么特别之处以至于它不能被删除但删除返回 true？我知道它是一个原生对象，但这并不能解释为什么这是不可能的。是浏览器JavaScript引擎在被我的代码删除后重新添加警报方法吗？我是否可以编写类似的函数，使另一个使用我的库的用户无法删除但只能覆盖？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:50:09.410

很简单，我们可以覆盖现有函数但不能删除它们。现有/标准函数被重置为标准原型，而不是在其上调用 delete 时。但是，如果您确实想中和函数说 windows.alert 然后分配一个空白函数，如下所示：

```
window.alert = function(){}; //blank function makes window.alert now useless 
```

尝试基于控制台（浏览器）的脚本：

```
window.alert = function(data){
    console.log('alerting:'+data)
}; 
window.alert('hi'); // this will print "alerting:hi" in console
delete window.alert
window.alert('hi'); // now this will show regular alert message box with "hi" in it 
```

我希望这能解释它。

更新：

假设您要覆盖标准功能“警报”，然后：

```
//this function will append the data recieved to a HTML element with 
// ID message-div instead of showing browser alert popup
window.alert = function(data){
    document.getElementById('message-div').innerHTML = data;
}
alert('Saved Successfully'); //usage as usual
...
//when you no longer need custom alert then you revert to standard with statement below
delete window.alert; 
```

# liferay - Alfresco 4.0 和 Liferay 集成？

> ID：14997965
> 
> 赞同：0
> 
> 时间：2013-02-21T08:48:08.523
> 
> 标签：liferay, integration, alfresco

我想知道 alfresco 4.0 和 liferay 的所有集成是可能的，因为我正在谷歌搜索它并且也可以找到一些链接，但大多数是用于 alfresco 3+。

[http://www.liferay.com/web/jonas.yuan/blog/-/blogs/integrating-alfresco-3-4-in-liferay-6-1-via-cmis-1-0](http://www.liferay.com/web/jonas.yuan/blog/-/blogs/integrating-alfresco-3-4-in-liferay-6-1-via-cmis-1-0)

[http://www.liferay.com/community/wiki/-/wiki/Main/Alfresco+Portlet](http://www.liferay.com/community/wiki/-/wiki/Main/Alfresco+Portlet)

[http://www.liferay.com/documentation/liferay-](http://www.liferay.com/documentation/liferay-) [http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/document-library-portlet](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/document-library-portlet)

任何人都可以帮助 4.0 吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:25:58.273

如果您使用的是 Liferay 6.1，您可以尝试将 Alfresco 添加为新存储库。

如果您遵循[Liferay wiki](http://www.liferay.com/community/wiki/-/wiki/Main/CMIS+Repository)上的教程，您应该能够直接从 Documents and Media portlet 访问 Alfresco 文档。但我自己还没有尝试过。

# android - 选择图像并发送电子邮件？

> ID：14997967
> 
> 赞同：0
> 
> 时间：2013-02-21T08:48:21.247
> 
> 标签：android, android-layout, android-intent

大家早上好，我是一个没有经验的开发人员，我需要你..
我有这个代码来选择图像并发送（到附件）电子邮件......请帮助我，因为这个代码失败了。

```
private static int RESULT_LOAD_IMAGE = 1;
private static final int PICK_FROM_GALLERY = 2;
private static final int REQ_CODE_PICK_IMAGE = 0;
Uri selectedImage;

public void galleria(View v){
     Intent in = new        Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
         startActivityForResult(in, RESULT_LOAD_IMAGE);  
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

        switch(requestCode) { 
        case REQ_CODE_PICK_IMAGE:
        if(resultCode == RESULT_OK){  
           Uri selectedImage = imageReturnedIntent.getData();         
        final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
          emailIntent.setType("plain/text");
          emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"stefano.pietrella@gmail.com"});
          emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Object");
          emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Message...");

                            //Uri attachment = Uri.parse("file:///sdcard/fil.txt");
          emailIntent.putExtra(Intent.EXTRA_STREAM,selectedImage);
          startActivity(Intent.createChooser(emailIntent, "Send email..."));            
            }
        }
    } 
```

### 日志猫

```
02-21 09:53:20.359: E/AndroidRuntime(16440): FATAL EXCEPTION: 
main 02-21 09:53:20.359: E/AndroidRuntime(16440): java.lang.IllegalStateException: 
Could not find a method k(View) in the activity class com.supermoney.campionatoruzzle.LeagueSummaryV2 for onClick handler on view class android.widget.Button with id 'buttonStartMatch2' 
02-21 09:53:20.359: E/AndroidRuntime(16440): at android.view.View$1.onClick(View.java:3678) 
02-21 09:53:20.359: E/AndroidRuntime(16440): at android.view.View.performClick(View.java:4211) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:57:09.163

从您的日志 cat 稍后发表的评论中，您似乎在 xml 中放置了一个 onclick 方法 k 并且在 java 计数器部分中没有声明

```
private static int RESULT_LOAD_IMAGE = 1;
    private static final int PICK_FROM_GALLERY = 2;
    private static final int REQ_CODE_PICK_IMAGE = 0;
    Uri selectedImage;

public void galleria(View v){
 Intent in = new        Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
     startActivityForResult(in, RESULT_LOAD_IMAGE);  
}

protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case REQ_CODE_PICK_IMAGE:
    if(resultCode == RESULT_OK){  
       Uri selectedImage = Uri.parse("file://"+  getRealPathFromURI(imageReturnedIntent.getData());         
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
      emailIntent.setType("plain/text");
      emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"stefano.pietrella@gmail.com"});
      emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Object");
      emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Message...");

                        //Uri attachment = Uri.parse("file:///sdcard/fil.txt");
      emailIntent.putExtra(Intent.EXTRA_STREAM,selectedImage);
      startActivity(Intent.createChooser(emailIntent, "Send email..."));            
        }
    }
} 
```

好像你从画廊而不是路径中选择它返回一个内容：// uri

```
 Uri selectedImage = Uri.parse("file://"+  getRealPathFromURI(imageReturnedIntent.getData()) 
```

试试这个——如果从画廊和文件管理器去你以前的内容可以在一个if条件检查天气里完成

```
 public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    if (cursor == null) {
        return null;
    }
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

# c# - 在.net 2.0中从后台调用UI线程上的方法

> ID：14997974
> 
> 赞同：0
> 
> 时间：2013-02-21T08:48:57.573
> 
> 标签：c#, multithreading, user-interface, .net-2.0, monodevelop

我正在使用 MonoDevelop (.net 2.0) 开发 iOS 和 Android 应用程序。我使用 BeginGetResponse 和 EndGetResponse 在后台线程中异步执行 webrequest。

```
IAsyncResult result = request.BeginGetResponse(new AsyncCallback(onLogin), state); 
```

但是，回调`onLogin`似乎仍在后台线程上运行，不允许我与 UI 交互。我该如何解决这个问题？

可以看到有 Android 和 iOS 特定的解决方案但是想要一个跨平台的解决方案。

**编辑：**从 mhutch 的回答中我得到了这么多：

```
IAsyncResult result = request.BeginGetResponse(o => {
            state.context.Post(() => { onLogin(o); });
        }, state); 
```

其中 state 包含类型设置为的`context`变量`SynchronizationContext``SynchronizationContext.Current`

它抱怨 Post 需要两个参数，第二个是`Object state`. 插入`state`会出现错误

```
Argument `#1' cannot convert `anonymous method' expression to type `System.Threading.SendOrPostCallback' (CS1503) (Core.Droid) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:07:53.587

Xamarin.iOS 和 Xamarin.Android 都`SynchronizationContext`为 GUI 线程设置了一个。

这意味着您`SynchronizationContext.Current`从 GUI 线程获取并将其传递给您的回调（例如，通过状态对象或在 lambda 中捕获）。然后你可以使用上下文的`Post`方法来调用主线程上的东西。

例如：

```
//don't inline this into the callback, we need to get it from the GUI thread
var ctx = SynchronizationContext.Current;

IAsyncResult result = request.BeginGetResponse(o => {
    // calculate stuff on the background thread
    var loginInfo = GetLoginInfo (o);
    // send it to the GUI thread
    ctx.Post (_ => { ShowInGui (loginInfo); }, null);
}, state); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:51:18.927

我不确定这是否适用于 Mono，但我通常在 WinForm 应用程序上执行此操作。假设您要执行方法`X()`。然后：

```
public void ResponseFinished() {
    InvokeSafe(() => X()); //Instead of just X();
}

public void InvokeSafe(MethodInvoker m) {
    if (InvokeRequired) {
        BeginInvoke(m);
    } else {
        m.Invoke();
    }
} 
```

当然，这是在 Form 类中。

# ios - 通过电子邮件从 Core Data 发送 2 个或更多 PDF

> ID：14997977
> 
> 赞同：0
> 
> 时间：2013-02-21T08:49:09.263
> 
> 标签：ios, email, pdf, core-data

我在 Core Data 中有很多 PDF。如何将核心数据中的一个或多个 PDF 附加到电子邮件？将PDF合并为一个更好吗？

最好的问候安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:03:28.227

该类`MFMailComposeViewController`有一个称为`addAttachmentData:mimeType:fileName:`将二进制对象（如 PDF）附加到电子邮件的方法。获取您的 PDF 并附上它们。是否合并 PDF 取决于您正在做什么以及它是否对您的文档和用户有意义。

Core Data 与此无关——只要你有一个`NSData`，你就可以附加它。它来自哪里并不重要。

# php - 如何取消注册特定的“Registered PHP Streams”？

> ID：14997983
> 
> 赞同：2
> 
> 时间：2013-02-21T08:49:26.750
> 
> 标签：php, security

出于安全原因，我在 php.ini 中禁用了 glob 函数，它按预期工作，但我也注意到 phpinfo 显示以下信息：

已注册的 PHP 流：php、file、glob、data、http、ftp、zip、compress.zlib、phar

因此，如果我采用以下来源：

```
$it = new DirectoryIterator("glob://C:\wamp\www\*");
foreach($it as $f) {    
    printf("%s: %.1FK\n", $f->getFilename(), $f->getSize()/1024);
} 
```

它仍然会返回指定目录的内容。

如何全局注销 PHP 流，例如 glob？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T00:34:13.240

简短的回答是：甚至不要费心去尝试。

PHP 是一种足够完整的语言，如果有人要编写易受攻击的脏代码，他们可以通过您设置的任何块来完成。像这样禁用功能的唯一事情就是让应用程序开发人员的生活陷入困境。

事实证明，类似的东西*实际上*[`safe_mode`](http://blogs.ixiacom.com/ixia-blog/php-safe-mode-considered-harmful/)并[`open_basedir`](http://blog.php-security.org/archives/72-Open_basedir-confusion.html)不能保护任何东西。原因有两个：

 *1.  黑名单（这就是安全模式）不起作用。这已经被一遍又一遍地证明了。

2.  您无法在不安全的基础上确保安全。已经太晚了。PHP 本身已经拥有足够的访问权限，即使您禁用所有有趣的部分，人们仍然可以绕过它。

相反，从下往上保护。安装一个`chroot`监狱，并在里面运行 PHP。使用适当的权限。审查您在服务器上运行的代码。监视服务器的入侵。没有什么花哨。只是好的老式系统管理员工作......

**回答你原来的问题**

取消注册流包装器的唯一方法是自己通过`stream_wrapper_unregister()`. 您可以使用自动前置文件为您执行此操作（在每个脚本之前运行该代码）。

但是要意识到在 PHP 中实现 glob 是微不足道的。所以禁用它真的没有多大意义......*

# javascript - 打印不带逗号分隔符的数组（对象？）

> ID：14997984
> 
> 赞同：3
> 
> 时间：2013-02-21T08:49:27.977
> 
> 标签：javascript, arrays, object, output, comma

我目前正在编写大量代码，但我会保持简单。我有一个 javascript 数组（可能是一个对象，仍然不确定是否完全符合常规命名），这里是初始化代码：

```
var myArray = ["assignS" , ";" , "S"] 
```

这就是我从元素上的萤火虫中得到的 console.log() 。有太多代码要发布，因为它通过许多 for 循环分配了多个值。所以这个数组（或对象）稍后打印如下：

```
document.write("S -> " + myArray); 
```

输出：

```
 S -> assignS,;,S 
```

我不希望结果中有这些逗号，它会带来问题，因为数组中的某些元素本身可能是逗号。因此，我已经排除了 .join() 方法，并且不确定如何继续。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T08:52:18.840

你排除了 join 方法，究竟是为什么？它接受一个参数，即分隔符，然后您可以使用它来指定*无*分隔符：

```
myArray.join(""); 
```

我建议阅读[. `.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)另外，我不推荐你使用 document.write，它很少有好的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:52:47.823

默认情况下，数组上的`.join`方法将使用逗号连接所有项目，但它需要一个参数来覆盖它以用作任何其他字符串以用作胶水 - 包括一个空字符串。

```
myArray.join(''); // is "assignS;S" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T09:40:42.680

```
var a=[1,2,3,4]
var result="";
for(i= a.length-1; i>=0;i--){
    result=a[i]+result;
}

document.getElementById("demo").innerHTML=result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T08:52:47.563

使用此代码：

```
document.write("S -> " + myArray.join(" ")); 
```

# code-signing - 从我的开发者密钥签署 Blackberry10 应用程序

> ID：14997987
> 
> 赞同：0
> 
> 时间：2013-02-21T08:49:41.120
> 
> 标签：code-signing, blackberry-10

我聘请了一位开发人员为我开发 BB10 应用程序。现在他为我提供了一个用他自己的签名密钥签名的 bar 文件。我可以使用我的帐户向 App World 提交此申请吗？或者我需要索取代码并再次签署申请。我们需要匹配的标准是什么？

非常感谢，Apurv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:43:55.870

我不知道 BlackBerry World 是否会根据供应商帐户检查分配给开发人员的密钥，我怀疑他们会这样做。但是，如果您提交使用特定密钥集签名的应用程序，您将只能使用由相同密钥集签名的 BAR 文件升级该应用程序。您的合同是否包括为您提供源代码的开发人员？如果您进行升级，您会使用同一个开发人员吗？这些问题的答案应该可以帮助您做出决定。

# c++ - 不同参数计数的结构方法列表

> ID：14997989
> 
> 赞同：0
> 
> 时间：2013-02-21T08:49:51.947
> 
> 标签：c++, templates, constructor

我有一个这样的工厂，它通过传递的模板类名 T 实例化对象：

```
template<class T>
class Factory0
{
public:
    static void *Create(){ return new T(); }
};

template<class T, class Argument1>
class Factory1
{
public:
    static void *Create( Argument1 &arg1 ){ return new T( arg1 ); } 
}; 
```

我需要做这样的事情：

```
map<string[ClassName], &factory] _builder;
...
template<class T>
Add(){
    if( T derived from BaseClass ) _builder[T] = &factory1::Create
    else if( T derived from BaseClass ) _builder[T] = &factory0::Create;
}
template<class T>
Create() {
    return _builder[T]( (factory0) ? <nothing> : <some_argument> );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:06:36.813

这很难有两个原因：

*   使用错误参数调用 create 只能在运行时被捕获，因此我们需要一些动态类型。
*   C++ 真的不喜欢转换函数指针。或者创建指向模板函数的指针。或者通常用函数指针做任何复杂的事情。

但这是可以完成的：

```
#include<string>
#include<map>
#include<iostream>

using namespace std;

struct returnable {
  // Put some interesting virtual functions here
};

struct foo : public returnable {
  foo() {
    cout << "defaulFoo" << endl;
  }
  foo(int x) {
    cout << "Foo:" << x << endl;
  }
};

struct bar : public returnable {
  bar(char a, char b){
    cout << "bar:" << a << "," << b << endl;
  }
};

template<typename... ARGS>
struct newmakerbase {
  virtual returnable* make(ARGS... args) = 0;
};

template<typename OUT, typename... ARGS>
struct newmaker : public newmakerbase<ARGS...> {
  virtual returnable* make(ARGS... args) {
    return new OUT(args...);
  }
};

// Boost might provide a neater version of this
int nextId = 0;
template<typename... T>
struct typeId {
  static const int id;
};
template<typename... T>
const int typeId<T...>::id = nextId++;

map<string,void*> builders;
map<string,int> argtypes;

template<typename OUT, typename... ARGS>
void registerClas(string name) {
  builders[name] = static_cast<void*>(new newmaker<OUT,ARGS...>());
  argtypes[name] = typeId<ARGS...>::id;
}

template<typename... ARGS>
returnable* create(string name, ARGS... args) {
  int argsgiven =  typeId<ARGS...>::id;
  if (argsgiven != argtypes[name]) {
    // TODO: maybe throw an exception or something?
    return NULL;
  }
  newmakerbase<ARGS...>* builder = static_cast<newmakerbase<ARGS...>*>(builders[name]);
  return builder->make(args...);
}

main() {
  registerClas<foo>("defaultFoo");
  registerClas<foo,int>("foo");
  registerClas<bar,char,char>("bar");

  returnable* a = create("defaultFoo");
  returnable* b = create("foo", 42);
  returnable* c = create("foo", 'a', 'b'); // returns NULL
  returnable* d = create("foo", 42.0); // also returns NULL
  returnable* e = create("bar", 'c', 'd');
  cout << a << " " << b << " " << c << " " << d << " " << e << endl;
} 
```

# css - 更改 jQuery UI 滑块大小

> ID：14997990
> 
> 赞同：2
> 
> 时间：2013-02-21T08:49:52.487
> 
> 标签：css, jquery-ui, jquery-slider

我正在使用[这个 UI 滑块](http://api.jqueryui.com/slider/#entry-examples)，大小也是我网站上的一些（不是宽度，而是按钮的大小 - 演示页面底部）。 - 但[这里](http://jqueryui.com/themeroller/#!zThemeParams=5d00000100410a000000000000003d8888d844329a8dfe02723de3e570162cf18d27450c454aa2f2e374d1d127fabb9ebc66c3ee5a70fb154870371702db6720bcd83f0ecbb2131337f10a086e219c538a2003e4a05b37f637b91dbf9e5ea1a30eee0f7354635c67587b16e39b844855d43f18467d7eaf8e8630b8d1be763e97be1f6d41fe6319979f68179bd8440efaab1fa315e1b203117982c6271a2efd9c841cae644d09b059692771ee3849bed21dc1ef8e25a610ff8cc12b76c247bf91ecc5affa38095834d9d3e770e4b38439b0b62e9db07727f0422aaccb48d9c0242ab4c9e6c75426a8b05e9deecd7b21bc4c4218eee7f72d159b554039df4710e60b427df051f519be5a1292a8d7cb49f0ffb85e0865ad5798a2f66126a96d0b528d9c7a7c554adf79d92e7e4c9e49b0246f8fd61b54ddfce23bb1c02c61d7e98e085f11e76493bc730f79b495717c99a9c1ea416154767a8bedf5cd2ae4ffaa3d127af488725125d56379ec04d1c66190c3c9c766285fcd0aca7567fa99d4197bcbbf300fc4025a9f9245fbb3e774dca1f4c77cc4f3425cf18c1767093b867d6d18493c2ae0112590419f365455205fa267f4de05782d57a286c587dab904e0f2922dbc5106a79b2753402f7f7ca9fd8013ec21a953c3a7232731d40bc4d338a958f72f974672051b95a07d91dafd7ed6f924a8ccc0f395fd21c59ff246a2d1608d8692e9b5a2f78c158a3c41ff062bc5599701e633cd710bc96a9f9ec351283b3ae7987c3aa0a1c0282fc19325fc0b5194907b6946af97c345c84f40d5b9fb68df39d7a6787abf2c07c0d7b54396cbe6f24d78009b5e786e8fc57319dcf098566bc6052265886476062a1cfb9023f7f64cc4af3ba72d1d5b10ff7cef79aea33ce8ba96cb77f4cb23f678b63ebcecff6f9ba0097eb19f29fb3db271a29bbbea2e2d0a85b558a106dca6dd79bef8adff1100d7b801ce3a6ae75c2450fd40ddea28c9b080b9283d02a18b80894997c96c553a711690edcbf0cb19f4d49518982b17c91dbcc4b70628ac4d635879cd3842dc24b223f045e4151fc8594d8ed2ea0cdf4489bc9b2c97119afcb5e2a341a4f936ac53776b3b3964a10a0ad65b0518db9b2a841a4559d4e49749f73b71bf8b733bf1511bf4f295388f9aac65e7dbf44d7062f657611ada868ada039674e56883a9d6b39c8b50bfef1c758404061c2d67566efb97b20dcfa31ed566f4e77138d3cb7402feae884a47ac2e753e5dfbc35685a0bf2171020924e35e261261586686d0fd181e41e9b24d4413fc74cb00c43ac348b3607988c0dee2ebbfd106ae2c4bd25dd3a63eea7ad78cd0406df5c667f5d1a1178259ce0a67d024803dee90a06636a9801f259005947f222bd5ca400faa5fee6506cc8542c5051fcc56344e2bdd05b45f2b02c65837154948b645819ae67410b852c262421ac669546beaf5bea77d20696bfdd2d06dd87511c6b442745fe4ab8cf9a0b703578d932a2524bdeba1f0ad6093285c011d20a9a89376b655c63bce74fcb1954300e2a0d8cbb9d5a61c2819b8eb913d5b77afe257e6db92eb899cffd35b8f3b5417847adfc14298b5041500cdd0890920140f8882c439a002fbfffff92f9a78)滑块按钮的大小更好，更小 - 演示右侧.

那么如何更改 UI Slider 按钮的大小呢？或如何添加其他类型的按钮，例如图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T09:06:02.917

来自示例页面的 CSS：

```
.ui-slider .ui-slider-handle {

    cursor: default;
    height: 1.2em;
    position: absolute;
    width: 1.2em;
    z-index: 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T16:54:28.910

对于谁在使用`vertical slider`我的问题，通过以下方式解决：

```
.ui-slider {
    position: relative;
} 
```

# android - 使用 Web 服务将 Android 客户端与远程 SQL 服务器数据库同步

> ID：14997997
> 
> 赞同：0
> 
> 时间：2013-02-21T08:49:59.240
> 
> 标签：android, sql-server, web-services, synchronization, message-queue

我实现了一个需要一组数据的 Android 应用程序，这些数据由 SQL Server 数据库获取。应用程序获取调用 WS 的数据。在应用程序第一次启动时第一次调用 WS 后，我需要根据服务器端（SQL 服务器数据库）可能发生的修改来保持数据的更新。为了获得此结果，我以预定义的频率执行 WS 调用，以了解数据库上的数据是否已更改。如果有新数据可用，则调用其他 Web 服务来获取它们。

该解决方案适用于我（我不需要实时更新）。但是，我认为这种解决方案在能耗、cpu 消耗和网络流量方面都过于昂贵。因为，我想这是一个非常常见的问题，我会知道是否存在一种通用的方法来处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:33:48.107

我建议您使用额外的字段。在 Android 的本地表中添加四列：

*   TRANSACTING_FLAG ：当您在服务器上发布或更新此资源时，将其设置为 true
*   REQUEST_STATE ：将此标志设置为 POSTING / UPDATING / DELETING 等。
*   RESULT_CODE ：将此字段设置为服务器收到的针对此特定资源的最后一个结果代码。
*   TIMESTAMP ：必须更新数据之后的时间段

工作流程很简单：当您为服务器检索数据时，只需检查资源的最后更新时间戳是否优于您之前定义的缓存时间戳。如果时间戳更好，则执行更新数据的请求。事务处理布尔值让您知道特定资源实际上正在与服务器同步。结果代码让您知道请求是否失败，并最终在网络可用时重试。这样做，您将维护本地和远程数据库之间的持久性，因为由于之前看到的额外字段，您可以随时检查任何本地资源的“同步状态”。

我做了一个图书馆来处理这个。看看[RESTDroid](https://github.com/PCreations/RESTDroid)。即使缓存功能不是句柄，您也可以简单地添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:54:27.240

在大多数情况下，您所做的都可以。您可以利用[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)，但需要时间和精力来实施。我会坚持你的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:06:27.027

[您可以使用 SqlDependency - http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)之类的东西查看查询通知。您可以使用它来跟踪查询结果是否更改，并在发生这种情况时通知应用程序。

您可以使用的查询有限制，服务器上的成本类似于索引视图。顺便说一句，您需要.NET。如果在您的 Web 服务中实现，您必须为您的 android 实现某种订阅功能，以便可以将通知推送到它。

降低检查更改成本的另一个选择可能是 SQL Server 更改跟踪 - [http://msdn.microsoft.com/en-us/library/bb933875.aspx](http://msdn.microsoft.com/en-us/library/bb933875.aspx)

# asp.net - 由于某种原因，链接在 asp.net 母版页中不起作用

> ID：14997999
> 
> 赞同：1
> 
> 时间：2013-02-21T08:50:03.600
> 
> 标签：asp.net, html, hyperlink

我正在使用 webforms 在 asp.net 网站上工作，由于某些未知原因，我遇到了奇怪的问题。

我在页面的不同区域有不同的横幅，在 MasterPage 的标题部分有一个常见的横幅，横幅按应有的方式显示，但问题是与横幅的链接不起作用。

下面是页面显示后生成的部分代码。

```
<div class="horizontalBannerBar">
<!-- Header Banner  -->
    <div class="pnlHeaderBanner" id="pnlHeaderBanner">

        <a target="_blank" href="http://abc.com" class="bannerlink" id="hypLnkHeaderBanner"><img style="border-width:0px;" src="../images/Banners/32dfe9ee-0832-4d89-8c61-45b0ef371f1f.jpg" id="imgHeaderBanner"></a>

</div>
<!-- Header Banner  -->
</div> 
```

我使用 Panel 作为包装器，以便在横幅不存在的情况下隐藏横幅。

下面是我用来为超链接控件和图像控件赋值的代码

```
DataSet ds = DataProvider.GetTopBanner(ArticleID, PageID, IssueID, CategoryID, BannerLayoutPosition, LangID);
if (ds.Tables[0].Rows.Count > 0)
{
    imgHeaderBanner.ImageUrl = ds.Tables[0].Rows[0]["ImagePath"].ToString();
    hypLnkHeaderBanner.NavigateUrl = ds.Tables[0].Rows[0]["BannerURL"].ToString();
}
else
{
    imgHeaderBanner.Visible = false;
    pnlHeaderBanner.Visible = false;
} 
```

实际的 .ASPX 页面代码

```
<div class="horizontalBannerBar">
<!-- Header Banner  -->
    <asp:Panel ID="pnlHeaderBanner" CssClass="pnlHeaderBanner" runat="server">
        <asp:HyperLink ID="hypLnkHeaderBanner" CssClass="bannerlink"  runat="server" Target="_blank">
            <asp:Image ID="imgHeaderBanner" runat="server" BorderWidth="0" />
        </asp:HyperLink>
    </asp:Panel>
<!-- Header Banner  -->
</div> 
```

似乎 HTML 正在某个地方分解，但即使在小提琴上我也看不到它，它在 FF 和 Chrome 中不起作用，而链接在 IE 9 中起作用。

[示例链接](http://jsfiddle.net/hvbZ7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:59:18.733

这是因为`z-index: -999;`在您的 CSS 中。如果您将其设置为 0，那么您的链接将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:02:19.497

此外，`<img />`您在顶部发布的 HTML 示例中的标签也没有正确关闭。我怀疑这是由 ASP.NET 生成的实际 HTML。

```
<div class="horizontalBannerBar">
<!-- Header Banner  -->
    <div class="pnlHeaderBanner" id="pnlHeaderBanner">
        <a target="_blank" href="http://abc.com" class="bannerlink" id="hypLnkHeaderBanner">
            <img style="border-width:0px;" src="../images/Banners/32dfe9ee-0832-4d89-8c61-45b0ef371f1f.jpg" id="imgHeaderBanner" />
        </a>
    </div>
<!-- Header Banner  -->
</div> 
```