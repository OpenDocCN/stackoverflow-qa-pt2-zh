# StackOverflow 问答 13712000-13712999

# database - 您如何为一位客户获取多个地址？

> ID：13712000
> 
> 赞同：0
> 
> 时间：2012-12-04T21:11:33.507
> 
> 标签：database, street-address

例如，我无法弄清楚如何为一位客户获取多个地址。关于如何实现这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:13:12.180

在地址表中使用外键

```
CREATE TABLE Customers
(
C_Id int NOT NULL,
other_stuff whatever,
PRIMARY KEY (C_Id),
)

CREATE TABLE Addresses
(
 A_ID int NOT NULL,
 C_ID int NOT NULL,
 other_stuff whatever,
 FOREIGN KEY (C_Id) REFERENCES Customers(C_Id),
 PRIMARY KEY (A_ID)
) 
```

这可用于实现**一对多**关系。

例如，如果您有 George `Customer`，`C_ID=55`那么如果您想给 George 一个新地址，那么您将在地址表中插入一个值为 5 作为 C_ID 的条目。

```
insert into addresses (C_ID,blah,blah) values (55,blah,blah) 
```

然后如果你想得到乔治的所有地址，你会说：

```
select * from addresses where C_ID=55 
```

如果这没有意义，这里有图片[http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

# javascript - 匹配中的变量（javascript）

> ID：13712001
> 
> 赞同：3
> 
> 时间：2012-12-04T21:11:41.623
> 
> 标签：javascript, regex

```
<body class="reviews"></body>

var body = document.body;
var target = 'reviews';

if (body.className.match('/\b' + target + '\b/'))
    console.log(true);
else
    console.log(false); 
```

此代码返回`false`. 但如果我使用`body.className.match(/\breviews\b/)`它返回`true`.

它出什么问题了？

我试图在正则表达式中转义一个变量，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:13:44.187

您正在搜索文字字符串`'/\breviews\b/'`，它不会被读取为正则表达式。

您需要使用该`new RegExp`方法。

```
body.className.match(new RegExp('\\b' + target + '\\b')) 
```

注意：请勿将分隔符与`new RegExp`. 另外，请注意`\\b`有 2 `\`。

# css - 列表中每隔一个 div 的 CSS 样式

> ID：13712004
> 
> 赞同：9
> 
> 时间：2012-12-04T21:11:45.247
> 
> 标签：css

我的网站上有`div`盒子。每隔一个框应该有一个另一种颜色的边框。

在一种情况下，`div`s 显示为列表。我无法更改 HTML 代码，因为它是自动生成的。在我网站的其他部分，我做这样的样式并且它有效：

```
.displayBlogpost:nth-child(2n+1) {
    border: #B4C556 1px solid;
} 
```

但是，`ol`那不再起作用了。我不知道如何访问每一秒`.displayBlogpost-div`。这是我的代码：http: [//jsfiddle.net/8SbbL/](http://jsfiddle.net/8SbbL/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T21:19:00.437

要使用第 n 个孩子，您需要将其应用于列表项，

[http://jsfiddle.net/8SbbL/6/](http://jsfiddle.net/8SbbL/6/)

你也可以使用`nth-child(even)`，`nth-child(odd)`它比你的读起来更好`2n-1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:15:30.517

该元素在一个 li 内，因此它始终是第一个和最后一个元素。在实际的 li 上使用第 n 个子技巧。

```
#searchresult li:nth-child(2n+1) .displayBlogpost {
    border: #B4C556 1px solid;
} 
```

工作叉：http: [//jsfiddle.net/FJuzm/](http://jsfiddle.net/FJuzm/)

# java - 谷歌应用引擎实体中的乔达时间

> ID：13712005
> 
> 赞同：0
> 
> 时间：2012-12-04T21:11:47.000
> 
> 标签：java, hibernate, google-app-engine, jpa, jodatime

是否可以在谷歌应用引擎中的 jpa 实体上使用 jodatime 注释，例如在 org.hibernate.annotations.Type 中使用 org.jadira.usertype.dateandtime.joda.PersistentDateTime ？

第一个日志：

```
2012-12-06 23:26:25 org.datanucleus.plugin.NonManagedPluginRegistry registerExtensions
WARNING: Extension Point "org.datanucleus.type_converter" not registered, but plugin   "org.datanucleus.store.types.jodatime" defined in file:/C:/Dev/oms/workspace_gae/orders.management.system.gae/war/WEB-INF/lib/datanucleus-jodatime-3.1.1.jar refers to it.
2012-12-06 23:26:25 org.datanucleus.plugin.NonManagedPluginRegistry registerExtensions
WARNING: Extension Point "org.datanucleus.query_method_evaluators" not registered, but plugin "org.datanucleus.store.types.jodatime" defined in file:/C:/Dev/oms/workspace_gae/orders.management.system.gae/war/WEB-INF/lib/datanucleus-jodatime-3.1.1.jar refers to it.
2012-12-06 23:26:25 org.datanucleus.plugin.NonManagedPluginRegistry registerExtensions
WARNING: Extension Point "org.datanucleus.store.rdbms.sql_expression" not registered, but plugin "org.datanucleus.store.types.jodatime" defined in file:/C:/Dev/oms/workspace_gae/orders.management.system.gae/war/WEB-INF/lib/datanucleus-jodatime-3.1.1.jar refers to it.
2012-12-06 23:26:25 org.datanucleus.plugin.NonManagedPluginRegistry registerExtensions
WARNING: Extension Point "org.datanucleus.store.rdbms.sql_method" not registered, but plugin "org.datanucleus.store.types.jodatime" defined in file:/C:/Dev/oms/workspace_gae/orders.management.system.gae/war/WEB-INF/lib/datanucleus-jodatime-3.1.1.jar refers to it.
2012-12-06 23:26:25 org.datanucleus.plugin.NonManagedPluginRegistry resolveConstraints
SEVERE: Bundle "org.datanucleus.store.types.jodatime" requires "org.datanucleus" version "3.1.0.m1" but the resolved bundle has version "3.1.1" which is outside the expected range. 
```

第二个日志

```
Caused by: java.lang.IllegalArgumentException: userRegisterDate: org.joda.time.DateTime is not a supported property type.
at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedSingleValue
at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:158)
at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:124)
at com.google.appengine.api.datastore.Entity.setProperty(Entity.java:339)
at org.datanucleus.store.appengine.DatastoreFieldManager.storeObjectField(DatastoreFieldManager.java:847)
at org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1037)
at pl.mlynarczyk.orders.management.system.model.User.jdoProvideField(User.java)
at pl.mlynarczyk.orders.management.system.model.User.jdoProvideFields(User.java)
at org.datanucleus.state.JDOStateManagerImpl.provideFields(JDOStateManagerImpl.java:2715)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertPreProcess(DatastorePersistenceHandler.java:357)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObjects(DatastorePersistenceHandler.java:267)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:256)
at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3185)
at org.datanucleus.state.JDOStateManagerImpl.flush(JDOStateManagerImpl.java:4513)
at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:2814)
at org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:2754)
at org.datanucleus.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:549)
at pl.mlynarczyk.orders.management.system.dao.UserDaoImpl.persistUser(UserDaoImpl.java:61)
at pl.mlynarczyk.orders.management.system.service.UserServiceImpl.registerUser(UserServiceImpl.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:114)
at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:69)
at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:109)
at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)
at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)
at org.springframework.binding.expression.spel.SpringELExpression.getValue(SpringELExpression.java:84)
at org.springframework.webflow.action.EvaluateAction.doExecute(EvaluateAction.java:75)
at org.springframework.webflow.action.AbstractAction.execute(AbstractAction.java:188)
at org.springframework.webflow.execution.AnnotatedAction.execute(AnnotatedAction.java:145)
at org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51)
... 56 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:52:44.090

什么是“jodatime 注释”？您的意思是您可以将 JodaTime 类型持久保存到 AppEngine 吗？由于 AppEngine 使用 DataNucleus JPA 作为其提供者，并且由于 DataNucleus JPA 还为[主要的 JodaTime 类型提供了一个插件](http://www.datanucleus.org/plugins/store.types.jodatime.html)，所以是的。

编辑：添加到 JodaTime 插件的链接

# android - 在添加行之前检查 SQLite 数据库中的重复项

> ID：13712006
> 
> 赞同：1
> 
> 时间：2012-12-04T21:11:48.670
> 
> 标签：android, sqlite

我正在尝试使用以下代码在 android 中的数据库中添加一行，但我想确保该行不存在，我该怎么做？

```
void addKey(String key, String value, String table) {

            SQLiteDatabase db = this.getWritableDatabase();

            ContentValues values = new ContentValues();
            values.put(KEY_KEY, key);
            values.put(KEY_VALUE, value);

            // Inserting Row
            db.insert(table, null, values);
            db.close(); // Closing database connection          
    } 
```

我尝试使用以下代码，但无法正常工作

```
public boolean check(String key, String value, String table) {
        SQLiteDatabase db = this.getWritableDatabase();
        String sql = "select * from " + table + " where key= " + key + " and value= " + value;
        Cursor cur = db.rawQuery( sql, new String[0] );

        if(cur.getCount() == 0)
        {
            cur.close();
            db.close();
            return false;
        }

        else{
            cur.close();
            db.close();
            return true;
        }

    } 
```

错误：

```
12-04 16:34:46.867: E/AndroidRuntime(2743): Caused by: android.database.sqlite.SQLiteException: no such column: hi: , while compiling: select * from tableOne where key= hi and value= baby
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1428)
12-04 16:34:46.867: E/AndroidRuntime(2743):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1396) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:36:15.627

您必须在 SQL 中正确格式化字符串（这涉及引用字符串本身以及字符串中的任何引号），或者使用*参数*将字符串传递到数据库中：

```
String sql = "SELECT * FROM " + table + " WHERE key=? AND value=?";
Cursor cur = db.rawQuery(sql, new String[] { key, value }); 
```

如果只有值改变，你真的要插入另一条具有相同键的记录吗？还是您更愿意更新该记录？

# php - 解析 XML 文件并在 MySQL 中插入结果

> ID：13712007
> 
> 赞同：0
> 
> 时间：2012-12-04T21:11:52.807
> 
> 标签：php, mysql, xml, foreach

我正在尝试将 XML 文件导入 MySQL 数据库，但在此过程中遇到了一些问题。这是我到目前为止的代码：

```
function convertXML($node){
    foreach($node->Body->Cube as $child)
        {
            echo $child['date'] .",";
                foreach($child->Rate as $child1)
                {
                    echo $response=$child1 . ",";
                }
            echo "<br>";
                   //mysql_query("INSERT INTO table ('date', 'AED', 'AUD', 'BGN', 'BRL') VALUES $response");
        }
}
$row = convertXML($xml); 
```

这是我的 XML 文件的示例：

```
<DataSet>
    <Header>
      <PublishingDate>2012-12-04</PublishingDate>
      <MessageType>DR</MessageType>
    </Header>
    <Body>
      <Subject>Reference</Subject>
      <OrigCurrency>RO</OrigCurrency>
       <Cube date="2012-12-03">
          <Rate currency="AED">0.9439</Rate>
          <Rate currency="AUD">3.6275</Rate>
          .....
          <Rate currency="BGN">2.3170</Rate>
       </Cube>
       <Cube date="2012-12-04">
          <Rate currency="AED">0.93129</Rate>
          <Rate currency="AUD">3.3576</Rate>
           ....
          <Rate currency="BGN">2.245/Rate>
       </Cube>
    </Body>
</DataSet> 
```

我可以获得我感兴趣的结果（日期和来自 RAte 货币子项的数值）并将它们打印在屏幕上，但我很难将它们引入数据库。任何帮助将不胜感激 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:17:52.827

你试过吗`LOAD XML LOCAL INFILE`？？？

```
mysql> LOAD XML LOCAL INFILE 'address.xml'
    ->   INTO TABLE person
    ->   ROWS IDENTIFIED BY '<person>'; 
```

更多信息在这里：

[http://dev.mysql.com/doc/refman/5.5/en/load-xml.html](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)

# java - 有人可以告诉我 += 在 java 中的作用，例如 i += 2;

> ID：13712008
> 
> 赞同：-5
> 
> 时间：2012-12-04T21:11:52.740
> 
> 标签：java

谁能告诉我 += 在 java 中的含义，例如 i +=2; 任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:12:41.883

它增加`2`了 的价值`i`。这是一个简写

```
i = i + 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:14:23.700

`Val1 += Val2`表示添加并将结果分配`Val2`给. `Val1``Val1`

这是一个非常普遍的需求，这就是为什么它内置于大多数语言中。

# ios - 将 RSS 提要解析到 iOS 应用程序中

> ID：13712009
> 
> 赞同：0
> 
> 时间：2012-12-04T21:11:54.973
> 
> 标签：ios, rss, plist, nsxmlparser

我正在构建一个需要解析多个 RSS 提要的应用程序，所以我试图在我的脑海中整理出这个理论:-)

我正在阅读 NSXMLParser 并查看了 MWFeedPaser。查看所有我理解的代码，在我理解它到底在做什么之前需要时间。

我最初的想法是用 RSS 链接填充 Plist，因为我的类别有不同的提要，这样我就可以管理它。

这是一个不好的方法吗？在这种情况下，Plists 的优缺点是什么？

该应用程序是在 UIViewController 中设计的，如果它有所作为，则使用 TableView 而不是 UITableViewController。

感谢您的任何建议。

# ruby-on-rails - 推送到 heroku 时出错 - 中止我的 rake 资产：预编译

> ID：13712012
> 
> 赞同：28
> 
> 时间：2012-12-04T21:11:58.140
> 
> 标签：ruby-on-rails, heroku

**编辑：**我是一名新的 ruby​​ on rails 学生。

在我的 Git Push Heroku Master 之后，我遇到了 Heroku 的问题。这是最新最好的，中止 rake assets:precompile。

```
-----> Preparing app for Rails asset pipeline
   Running: rake assets:precompile
   rake aborted!
   could not connect to server: Connection refused
   Is the server running on host "127.0.0.1" and accepting
   TCP/IP connections on port 5432?
   Tasks: TOP => environment
   (See full trace by running task with --trace)
   Precompiling assets failed, enabling runtime asset compilation
   Injecting rails31_enable_runtime_asset_compilation
   Please see this article for troubleshooting help:
   http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting 
```

以下是我的 Gemfile 的内容：

```
gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.1'
gem 'pg'

group :development, :test do
  gem 'rspec-rails'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'spork'
  gem 'annotate'
  gem 'database_cleaner'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
end

platforms :jruby do
  gem 'trinidad'
  gem 'jruby-openssl'
end

gem 'jquery-rails'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Bundle the extra gems:
gem 'RedCloth', '~> 4.2.9', :require => 'redcloth'
gem 'ruby-openid', :require => 'openid'
gem 'rack-openid', :require => 'rack/openid'
gem 'aaronh-chronic', :require => 'chronic' # Fixes for 1.9.2
gem 'coderay'
gem 'lesstile'
gem 'formtastic'
gem 'will_paginate', '~> 3.0.2'
gem 'exception_notification', '~> 2.5.2'
gem 'open_id_authentication'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
group :test do
  gem 'database_cleaner'
  gem 'cucumber-rails',    :require => false
  gem 'cucumber-websteps', :require => false
  gem 'factory_girl'
  gem 'rspec'
  gem 'nokogiri', '~> 1.5.0'
  gem 'webrat'
end 
```

可能是什么问题？

**更新：**我用 --trace 运行了 rake 命令，它警告我失败，因为生产数据库不存在。我创建了数据库，然后再次运行 --trace，这就是我目前被抛出的内容：

```
Command failed with status (1): [/usr/local/Cellar/ruby/1.9.3-p286/bin/ruby...] 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-04T23:20:36.203

请参阅[Heroku Cedar 上的 Rails 3.1+ Asset Pipeline](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#troubleshooting)文章。故障排除部分介绍了这种确切的情况。

简而言之，您的 Heroku 应用程序在构建（包括资产编译）和运行（您的应用程序可用的地方）之间有很强的分离。[这与12-factor app 原则](http://www.12factor.net/build-release-run)是一致的，但这意味着您的应用程序在构建阶段无法访问任何已配置的资源——包括数据库——这意味着 ActiveRecord 在资产预编译期间不可用。

您可以告诉 Rails 在资产编译期间不要引导您的应用程序`config/application.rb`：

```
config.assets.initialize_on_precompile = false 
```

故障排除部分还建议：

> 如果 rake assets:precompile 仍然无法正常工作，您可以通过在本地配置一个不存在的数据库`config/database.yml`并尝试运行来在本地进行调试`rake assets:precompile`。理想情况下，您应该能够在不连接到数据库的情况下运行此命令。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-11T08:34:28.140

今晚我为同样的问题苦苦挣扎了好几个小时。添加后

```
config.assets.initialize_on_precompile = false 
```

到application.rb，记得做一个

```
git commit 
```

紧接着。我忘了这样做，Heroku 不知道我更改了 application.rb。他们的故障排除页面上没有这条额外的行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-21T15:25:40.573

对于 Rails 4

启用 Heroku Labs 功能来解决这个问题

> heroku 实验室：启用用户环境编译

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-20T15:57:17.013

我在 Rails 4 中遇到了这个问题，其他建议都没有帮助。我终于弄明白了，这是由于 Rollify gem 试图连接到数据库。这已在 Rollify gem 中修复，但是，您可能需要获取最新的源代码才能获得修复。我只是将 Rollify 的 gem 导入更改为：

```
gem 'rolify', :git => 'git://github.com/EppO/rolify.git' 
```

这似乎解决了问题，我不必做任何其他建议。

不要忘记捆绑安装并将更改提交到 git。

此外，如果这也不能解决您的问题，您可能需要开始仔细查看您正在使用的 gem，并确保它们都没有尝试连接到数据库。

# version-control - StarTeam 相当于 'git log' 是什么

> ID：13712016
> 
> 赞同：2
> 
> 时间：2012-12-04T21:12:09.903
> 
> 标签：version-control, starteam

如何在 StarTeam 中查看 Git 命令“git log”提供的等效信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:46:54.577

“*命令 'git log' 显示从最近一次提交开始的提交历史记录。
它包括提交者、提交时间和提交消息。* ”
—— *[Mike Rylander](https://stackoverflow.com/users/444639/mike-rylander)*

在*StarTeam*中，您有“**历史记录”选项卡**-
只需在上面板中选择文件（或您希望查看的其他项目），
其历史记录将显示在下面板中。

还有一些报告允许您将该信息导出为 HTML。

编辑：**要查看属于给定签入的所有文件**：

*   如果所有文件都在单个操作中签入并分配给 CR，
    那么您可以通过以下链接捕获：
    找到链接到该文件修订的 CR 修订，
    然后找到链接到该 CR 修订的其他文件.

*   如果最近签到，您可以按日期查看上次签到。

*   可以指示开发人员通过将相关文件修订加入单个修订标签来跟踪他们的签入操作
    （这将很难执行这个繁琐的流程）。

*   更高版本的 StarTeam 支持**更改数据包**，这应该有助于
    将更改作为对文件组的原子操作进行管理。

# vim - vim中的焦点跟随鼠标

> ID：13712017
> 
> 赞同：8
> 
> 时间：2012-12-04T21:12:14.140
> 
> 标签：vim, mousemove

我知道 mousefocus 选项只应该在 gVim 中工作。但我想知道，如果可以让控制台 Vim 响应鼠标点击切换到不同的窗口，是否也不能轻松地添加以下鼠标移动？

我是 xmonad 用户，我喜欢关注指针功能，我在使用 Vim 编写时会查看和浏览大量 pdf，如果我不必一直在精神上切换回来，我会更快乐在两种不同类型的焦点变化之间。

如果这完全不可能，我想在终端的新实例中打开新的 Vim 窗口（如 :split）并不容易？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T23:34:52.510

添加它一点也不简单。在终端中使用鼠标通过 vim 向终端发送控制代码，请求将鼠标操作作为输入流的一部分发送。终端只报告点击而不是指针位置的变化，所以 vim 无法知道鼠标在哪里。

有了重大更改，支持 X 的 vim 可能可以直接从 X 服务器获取指针活动，但这可能会按像素而不是按字符报告，因此在确定哪个 vim 之前需要做进一步的工作窗口当前位于指针下方。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T21:23:34.167

```
set mouse=a 
```

应该可以解决问题，但它可能取决于您的终端仿真器。见`:help 'mouse'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T15:14:52.307

这适用于 Windows 7/Cygwin 32bit mintty/vim 7.3：（我不使用 gvim！）

安装了这个：[http](http://ehiti.de/katmouse/) ://ehiti.de/katmouse/后，我可以滚动光标下的窗口，而无需单击选择窗口，单击选择单个 vim-windows 也可以。如果另一个窗口与它重叠，它不会将 vim 窗口拉到前台，如果这是你想要的。仍然可以滚动它而无需先单击选择它。

所以：
检查是否存在适用于您的发行版的软件包，该软件包在操作系统级别实现您所需的鼠标行为。当这适用于我在 cygwin 中自编译的 vim 时，它也可以很好地与 linux 上的控制台 vim 一起使用。

这篇文章在这里作为证据，这完全有可能，这就是没有发表评论的原因。当我再次使用 linux 时，我会进一步调查并更新这篇文章，但这可能需要一段时间。

On `set mouse=a`：vim 帮助说明您需要一个能够处理鼠标输入的终端，更多信息可以在[这里](http://www.usevim.com/2012/05/16/mouse/)找到。`:help ttymouse`也可能会有所帮助，即如果您有一个符合 xterm 的控制台，但`:help term`设置为其他内容。

* * *

**更新**：（新安装的带有软件包的 Fedora 19，没有自编译的东西。）

Fedora 19 + `se mouse=a`= 在单个控制台 vim 窗口中滚动，多个缓冲区彼此相邻打开，也可以独立工作。使用的窗口管理器是 LXDE。

# javascript - 将 AJAX 加载程序附加到各个链接上的菜单/导航栏

> ID：13712018
> 
> 赞同：1
> 
> 时间：2012-12-04T21:12:18.403
> 
> 标签：javascript, jquery, html, ajax

我正在为我们的网站使用以下主题：http: [//themes.vivantdesigns.com/vpad/#dashboard.html](http://themes.vivantdesigns.com/vpad/#dashboard.html)

当用户单击左侧向下钻取菜单中的链接时，我希望 ajax 加载程序向链接/选项卡显示 NEXT。正如您从链接中看到的那样，内容是在以下内容中动态加载的：

```
<section id="main-section">Pagename.html loaded here</section> 
```

所以基本上，我希望 ajax 加载器显示在菜单链接的右侧，并在动态内容加载时消失。在演示链接上很难看到这种暂停，但是较重的数据库查询会导致它停在那里片刻，当然连接速度也会变慢。

非常感谢任何即时帮助。

我已经尝试过显示/隐藏 onClick 方法，在准备好的文档上隐藏类，但似乎没有什么能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:59:48.187

好的，经过大量的努力试图找到 ajax 发生的位置，我*想*我已经解决了（对 jQuery 不太熟悉/以前从未听说过 hashchange 或 bbq），所以试一试。

假设您可以访问它，您引用的页面包含一个名为 global.js 的 JavaScript 文件。

在每个菜单项旁边添加一个最初隐藏的“加载”图像/div/whatever，其 id 设置类似于菜单项的名称，例如 id="mediaLoading"。

打开 global.js 并转到第 117 行：

```
$('#'+id).length && $('#'+id).remove(); 
```

在此行之后进行 ajax 调用，因此添加代码以显示 ajax 加载器，例如

```
var loaderId = h.replace(/^\#/, "") + "Loading";
document.getElementById(loaderId).style.display = 'block'; 
//or $("#" + loaderId).show() or whatever you would use in jQuery 
```

最后，要重新隐藏它，将类似的代码添加到内联“完成”函数中（现在大约在第 127 行）：

```
complete: function(jqXHR, textStatus) { 
    document.getElementById(loaderId).style.display = 'none';
} 
```

希望能解决它。很难在本地进行测试。

请记住，由于该文件称为“全局”，这显然可能会影响许多其他页面，因此您可能希望对加载程序或单独的文件使用空检查...

# build - 更改 CMake 文件标准位置

> ID：13712020
> 
> 赞同：22
> 
> 时间：2012-12-04T21:12:21.920
> 
> 标签：build, cmake

我有一个源目录，其中包含一个名为“phantom-dir/”的文件夹，其中放置了所有不需要的生成文件。我想将 CMake 生成的所有文件放在这个幻像目录中（连同其他生成的和“丑陋”的文件）。

一个小例子：

```
$ mkdir cmake-test
$ cd cmake-test
$ echo 'message("Hello World!")' > CMakeLists.txt
$ cmake . | grep "Hello"
Hello World!
$ tree
.
├── CMakeCache.txt
├── CMakeFiles
│   ├── CMakeCCompiler.cmake
│   ├── cmake.check_cache
│   ├── CMakeCXXCompiler.cmake
│   ├── CMakeDetermineCompilerABI_C.bin
│   ├── CMakeDetermineCompilerABI_CXX.bin
│   ├── CMakeDirectoryInformation.cmake
│   ├── CMakeOutput.log
│   ├── CMakeSystem.cmake
│   ├── CMakeTmp
│   ├── CompilerIdC
│   │   ├── a.out
│   │   └── CMakeCCompilerId.c
│   ├── CompilerIdCXX
│   │   ├── a.out
│   │   └── CMakeCXXCompilerId.cpp
│   ├── Makefile2
│   ├── Makefile.cmake
│   ├── progress.marks
│   └── TargetDirectories.txt
├── cmake_install.cmake
├── CMakeLists.txt
└── Makefile

4 directories, 20 files 
```

默认情况下，所有 CMake 文件（CMakeCache.txt、cmake_install.cmake、Makefile、CMakeFiles）都写入工作目录中。但是，我想要这样的东西：

```
$ mkdir cmake-test
$ cd cmake-test
$ mkdir phantom-dir
$ echo 'message("Hello World!")' > CMakeLists.txt
$ // editing CMakeLists.txt to set some cmake variables.
$ cmake . | grep "Hello"
Hello World!
$ tree
.
├── phantom-dir
│   ├── CMakeCache.txt
│   ├── CMakeFiles
│   │   ├── CMakeCCompiler.cmake
│   │   ├── cmake.check_cache
│   │   ├── CMakeCXXCompiler.cmake
│   │   ├── CMakeDetermineCompilerABI_C.bin
│   │   ├── CMakeDetermineCompilerABI_CXX.bin
│   │   ├── CMakeDirectoryInformation.cmake
│   │   ├── CMakeOutput.log
│   │   ├── CMakeSystem.cmake
│   │   ├── CMakeTmp
│   │   ├── CompilerIdC
│   │   │   ├── a.out
│   │   │   └── CMakeCCompilerId.c
│   │   ├── CompilerIdCXX
│   │   │   ├── a.out
│   │   │   └── CMakeCXXCompilerId.cpp
│   │   ├── Makefile2
│   │   ├── Makefile.cmake
│   │   ├── progress.marks
│   │   └── TargetDirectories.txt
│   ├── cmake_install.cmake
├── CMakeLists.txt
└── Makefile

4 directories, 20 files 
```

这意味着：当前目录中的 Makefile（要制作，“cmake . && make”），但“幻影”目录中剩余的生成文件。

我知道我可以做到：

```
$ cd phantom-dir/
$ cmake ../ 
```

但是每次我想重新编译或重新制作cmake时都这样做对我来说有点烦人，最重要的是考虑到我多次修改我的CMakeLists.txt。

为了实现它，我必须在 CMakeLists.txt 文件中设置哪些变量？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-04T23:14:10.320

您可以使用未记录的 CMake 选项`-H`并`-B`避免离开您的源目录。 `-H`指定主 CMakeLists.txt 文件`-B`的路径，并指定所需构建目录的路径。

```
cmake -H. -Bphantom-dir 
```

请注意，这些都是无证的，所以我想 Kitware 的人可以随时更改。

要在不离开源目录的情况下构建项目，您可以使用（官方）选项[`--build`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#opt:--builddir) 这是一种调用您选择的构建工具的跨平台方式，您可以将所需的任何标志传递给该工具。例如

```
cmake --build phantom-dir -- -j3 
```

# ruby-on-rails - RoR 3.2.8：有 HTML5 组合框助手吗？

> ID：13712022
> 
> 赞同：5
> 
> 时间：2012-12-04T21:12:28.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html

现在，我正在使用`form_for.select`和`options_for_select`rails 助手来创建一个包含模型数据的选择框。但是，我真正需要的是一个类似于 HTML5 引入的组合框：

```
<input type=text list=browsers >
<datalist id=browsers >
   <option> Google
   <option> IE9
</datalist> 
```

是否有用于创建此类元素的 rails 助手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:39:41.427

不，但是很容易设置自己的表单构建器辅助方法来实现这样的结果，一个简单的例子是：

**应用程序/form_builders/combobox_form_builder.rb**

```
 class ComboboxFormBuilder < ActionView::Helpers::FormBuilder
  include ActionView::Context # for nested content_tag
  include ActionView::Helpers::FormTagHelper #for sanitize_to_id method access

  def combobox_tag(name, options, opts= {})
     @template.content_tag(:input, :name => name, :id => sanitize_to_id(name), :type => "text", :list => opts[:list_id]) do
       content_tag(:datalist, :id => opts[:list_id]) {options}
     end    
  end    
end 
```

重新启动服务器后，您可以通过在 form_for 调用中指定构建器参数来使用表单构建器来实现新的组合框：

```
<%= form_for @foo, builder: ComboboxFormBuilder do |f| %>
    <%= f.combobox_tag(:browser, options_for_select(["Firefox", "Chrome", "IE9"]), :list_id => "list")%>
<% end %> 
```

输出 HTML：

```
<input type="text" name="browser" list="list" id="browser">
<datalist id="list">
  <option value="Firefox">Firefox</option>
  <option value="Chrome">Chrome</option>
  <option value="IE9">IE9</option>
</datalist> 
```

**请记住，IE 和 Safari 都不提供对 HTML5 Datalist 的支持。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T15:07:18.967

```
<%= form_for @person do |f| %>
  <%= f.label :first_name, "First Name" %>:
  <%= f.text_field :first_name, list: 'first-name' %>
  <datalist id="first-name">
    <% Person.all.each do |person| %>
      <option value="<%= person.first_name %>"></option>
    <% end %>
  </datalist>
  <%= f.submit %>
<% end %> 
```

您可能还想做不同的事情：

`<% Person.select(:first_name).distinct.each do |person| %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T23:52:18.320

只是我的代码中的示例：

```
= form_tag controller:'beer', action: 'create' do
  = text_field :beer, :name, list: 'beer-name'
  %datalist#beer-name
    - Beer.all.each do |beer|
      %option{value: beer.name} 
```

# cakephp - CakePHP 重定向循环

> ID：13712031
> 
> 赞同：0
> 
> 时间：2012-12-04T21:13:00.730
> 
> 标签：cakephp, redirect

我的代码遇到了最奇怪的 Cake 错误。当下面的代码调用 add() 方法（也从不同的控制器复制在这里）时，代码将他重定向回 302 找到的 HTTP 代码到 edit() 操作（本质上，对用户来说，它看起来好像什么都没有发生）。更复杂的是，当我不在该页面上时调用相同的 URL（尽管页面不相互依赖），我会被重定向到我的应用程序的基础，这会导致重定向循环。我尝试从此控制器调用其他方法（使用它们的正确参数）来查看这是否只是 add() 操作的问题，但我得到了相同的重定向循环。我已经检查了整个 SE，但找不到相关的答案。

以下是相关代码：

```
function edit($id=null) {
 if(!$id) {
    $this->Session->setFlash('Invalid!');
    $this->redirect(array(
        'action' => 'index')
        );

 }
 else {
     //Get the slides themselves
    $slides = $this->Slide->find('all', array('conditions' => array('Slide.module_id' => $id)));
    $this->set('slides', $slides);
    //Get the data for the Module
    $module = $this->Module->find('first',
            array(
                'conditions' => array (
                    'Module.id' => $id
                ),
                'fields' => array(
                    'Module.module_name',
                    'Module.id')
            )
        );
 }
 } 
```

这是 add() 代码（同样，来自不同的模块）：

```
 function add($module = null) {
        if ($this->request->is('get')) {
                        //Set some variables for the view (this code I know works as it has been used successfully elsewhere
        } 
        else { //User is POSTing
        $this->Slide->create();
        $this->Slide->save($this->data);
        }
    } 
```

提前感谢大家；没有你们的支持，我做不到！

编辑：这是 AppController 代码：

```
public $components = array(
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
            ),
    'loginAction' => array(
        'controller' => 'users',
        'action' => 'login'
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
             )
        ),
    'logoutRedirect' => array('/')          
    ),
    'Session'
);
public $helpers = array('Html', 'Form', 'Session');
public function isAuthorized() {
    return true;
}
public function Controller() {

} 
```

}

# c# - 对锯齿状数组中的值求和

> ID：13712033
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:13:04.810
> 
> 标签：c#, .net, sum, jagged-arrays

我有一个用于获取学生和主题详细信息的锯齿状数组，我使用了 2 个锯齿状数组，一个用于学生详细信息（姓名和 rollno），另一个用于主题详细信息（主题和分数），现在我想总结所有分数特定学生的，谁能告诉我我该怎么做，下面是我的整个代码。

```
public void GetStudentDetails()
        {

            Console.WriteLine("Please enter number of Students");
            int STUDENTS = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Please enter number of Subjects");
            int SUBJECTS = Convert.ToInt32(Console.ReadLine());    //0 is reserved for the student name, so the marks starts from the index 1, hence if you set the marks for 3, it will ask for 2 marks

            string[][] student_details = new string[STUDENTS][];
            string[][] subject_details = new string[SUBJECTS][];
            string[][] result_details = new string[STUDENTS][];

            StringBuilder stud_sub_info = new StringBuilder();
            stud_sub_info.Append("Name\tRoll-No\t");
            for (int a = 0; a < STUDENTS; a++)
            {
                student_details[a] = new string[STUDENTS * 2];
                for (int b = 0; b < 2; b++)
                {
                    Console.WriteLine("Enter Student {0} {1}:", a + 1, (b == 0) ? "Name" : "Roll-No");
                    student_details[a][b] = Console.ReadLine();
                }
                for (int c = 0; c < SUBJECTS; c++)
                {
                    subject_details[c] = new string[SUBJECTS * 2];
                    for (int d = 0; d < 2; d++)
                    {
                        if (d == 0)
                        {
                            Console.WriteLine("Enter Name for Subject {0}", c + 1);
                            subject_details[c][d] = Console.ReadLine();
                            stud_sub_info.Append(subject_details[c][d] + "\t");
                        }
                        else
                        {
                            Console.WriteLine("Enter Marks for {0}", subject_details[c][d - 1]);
                            subject_details[c][d] = Console.ReadLine();
                        }
                    }
                }
            }
            Console.WriteLine(stud_sub_info.ToString());
            for (int a = 0; a < STUDENTS; a++)
            {
                for (int b = 0; b < 2; b++)
                {
                    Console.Write(student_details[a][b] + "\t");
                }
                for (int c = 0; c < SUBJECTS; c++)
                {
                    for (int d = 0; d < 2; d++)
                    {
                        Console.Write(subject_details[c][d] + "\t");
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:40:26.017

使用 Linq、Collections 和创建类而不是锯齿状数组会更容易做到这一点。这将允许您将 1 个学生链接到许多课程，并且在每个课程中都有许多作业。然后是 Linq 语句，例如：

```
Sum(x => x.StudentGrade) 
```

以下是我将开始使用的存根副本，只是为了了解我可以用总和和其他信息做什么：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace StudentManagement {
  public class Student {

    public static void Main(string[] args) {
      List<Student> students = new List<Student>();

      Console.Write("Enter number of students: ");
      int numStudents = int.Parse(Console.ReadLine());

      for (int i = 0; i < numStudents; i++) {
        Student s = new Student();
        students.Add(s);
      }

      Console.Write("Press any key to continue...");
      Console.ReadKey(true);
    }

    public string FirstName { get; set; }
    public List<Course> Courses { get; set; }

    public Student() {
      this.Courses = new List<Course>();

      Console.Write("Enter First Name: ");
      this.FirstName = Console.ReadLine();

      Console.Write("Enter in number of courses: ");
      int numCourses = int.Parse(Console.ReadLine());

      for (int i = 0; i < numCourses; i++) {
        Course course = new Course();
        this.Courses.Add(course);
      }

    }
  }

  public class Course {
    public string Title { get; set; }
    public string Code { get; set; }
    public string Section { get; set; }
    public List<Assignment> Assignments { get; set; }

    public Course() {
      this.Assignments = new List<Assignment>();

      // Set Title, Code, Section
      Console.Write("Enter nuber of assignments: ");
      int numAssignments = int.Parse(Console.ReadLine());

      for ( int i = 0; i < numAssignments; i++) {
        Assignment assignment = new Assignment();
        this.Assignments.Add(assignment);
      }

    }
  }

  public class Assignment {
    public string Name { get; set; }
    public double MaxGrade { get; set; }
    public double StudentGrade { get; set; }

    public Assignment() {
      // Prompt for Name, MaxGrade, StudentGrade
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:56:27.887

我当然不会使用这样的锯齿状数组。它使编码变得困难。

例如，在您的代码中，您正在捕获每个学生的科目分数，但是当您这样做时，您会清除以前学生的数据。`subject_details`锯齿状数组没有学生索引。您正在有效地覆盖数据。您需要将数组声明为`string[][][]`.

这是您的代码，更简单，可以工作：

```
string[][] student_details = new string[STUDENTS][];
string[][][] subject_details = new string[STUDENTS][][];
string[][] result_details = new string[STUDENTS][];

for (int a = 0; a < STUDENTS; a++)
{
    student_details[a] = new string[STUDENTS * 2];
    subject_details[a] = new string[SUBJECTS][];
    Console.WriteLine("Enter Student {0} {1}:", a + 1, "Name");
    student_details[a][0] = Console.ReadLine();
    Console.WriteLine("Enter Student {0} {1}:", a + 1, "Roll-No");
    student_details[a][1] = Console.ReadLine();
    for (int c = 0; c < SUBJECTS; c++)
    {
        subject_details[a][c] = new string[SUBJECTS * 2];
        Console.WriteLine("Enter Name for Subject {0}", c + 1);
        subject_details[a][c][0] = Console.ReadLine();
        Console.WriteLine("Enter Marks for {0}", subject_details[a][c][0]);
        subject_details[a][c][1] = Console.ReadLine();
    }
}
for (int a = 0; a < STUDENTS; a++)
{
    Console.Write(student_details[a][0] + "\t");
    Console.Write(student_details[a][1] + "\t");
    for (int c = 0; c < SUBJECTS; c++)
    {
        Console.Write(subject_details[a][c][0] + "\t");
        Console.Write(subject_details[a][c][1] + "\t");
    }
} 
```

现在，鉴于我们忽略了每个学生必须拥有相同数量的科目并且您允许科目分数的非数字输入这一事实，您可以使用以下 LINQ 查询将锯齿状数组转换为可行的数组。

```
var query =
    from i in Enumerable.Range(0, STUDENTS)
    let Name = student_details[i][0]
    let RollNo = student_details[i][1]
    let Subjects = (
        from j in Enumerable.Range(0, SUBJECTS)
        let Subject = subject_details[i][j][0]
        let Marks = int.Parse(subject_details[i][j][1])
        select new { Subject, Marks }
    )
    select new { Name, RollNo, Subjects }; 
```

这给了我一个看起来像这样的结构：

![查询数据结构](../Images/348d77261022d89d390a4ee5b5e4296f.png)

现在您可以使用此查询来获取总分：

```
var results =
    query
        .Select(x => new
        {
            x.Name,
            TotalMarks = x.Subjects.Sum(y => y.Marks)
        }); 
```

现在看起来像：

![总分](../Images/caf89c2edbe41b4b767f20773707fb0d.png)

# c# - 添加用户控件并处理父事件c#

> ID：13712037
> 
> 赞同：0
> 
> 时间：2012-12-04T21:13:07.470
> 
> 标签：c#, asp.net, events

我想动态创建一个包含我创建的各种用户控件的提交表单。

前任：

```
<div class="fieldControl">
<asp:Label AssociatedControlID="TextField" runat="server"><%=LabelText %></asp:Label>
<asp:TextBox ID="tbText" runat="server" />
</div> 
```

控件应基于 xml 添加：

```
<Fields>
  <Group name="Main" text="Innhold">
    <Field type="TextBox" name="Name" text="Navn"></Field>
    <Field type="TextBox" name="Test" text="Test"></Field>
  </Group>
</Fields> 
```

当我在我的父控件 Edit.ascx 上单击保存按钮时。我想在每个添加的用户控件上处理这个事件。

你能指出我应该去哪个方向，创建和处理保存事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:11:05.810

一些伪代码：

```
 void building()
    {
        var items = getItemsFromXml();
        foreach (var item in items)
        {
            var control = BuildControl(item);
            this.EventToHandle += control.PublicEventHandlerMethod();
            this.Controls.Add(control);
        }
    } 
```

# haskell - 试图简化 Attoparsec 解析器中 IO Bool 的检查

> ID：13712042
> 
> 赞同：0
> 
> 时间：2012-12-04T21:13:25.637
> 
> 标签：haskell, attoparsec

我正在尝试简化以下代码，该代码是网络数据包的 attoparsec 解析器的一部分，但我不知道如何做这件事。

它首先调用以`atEnd :: IO Bool`确定是否还有更多要解析的内容。我找不到`atEnd`比从 IO 解包然后在 if 语句中使用它更好的使用方法，但似乎必须有一种更简单的方法来检查 monad 中的 bool。这是代码：

```
maybePayload :: Parser (Maybe A.Value)
maybePayload = do
    e <- atEnd
    if e then return Nothing
    else do
        payload' <- char ':' *> takeByteString
        maybe mzero (return . Just) (maybeResult $ parse A.json payload') 
```

目的是在`Nothing`没有有效负载的情况下返回，`Just A.Value`如果有有效的 JSON 有效负载则返回，如果有无效的有效负载则解析器失败。

这是最终创建的数据包记录：

```
data Packet = Packet
    { pID       :: Integer
    , pEndpoint :: String
    , pPayload  :: Maybe A.Value
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:22:47.890

你正在做很多你不需要做的工作。首先，您检查您是否处于数据的末尾，`Nothing`如果不成功则返回。这不是必需的，因为如果你在最后，任何需要内容的解析器都会失败，而 using`maybeResult`会将失败变成`Nothing`.

您的解析器唯一失败的情况是输入具有不以字符开头的数据的情况`:`，其余时间它成功，即使那是通过返回`Nothing`。

唯一实际进行的解析是检查`:`然后使用`A.json`. 我认为您正在尝试在一个解析器中编写整个程序，而您应该自己进行解析，然后根据需要调用它。无需检查数据是否结束，或确保您获得全部内容——这些都是免费内置在解析器中的。一旦你摆脱了所有不必要的检查，你就会得到

```
payload :: Parser A.Value
payload = char ':' *> A.json 
```

如果你愿意，你可以使用它`maybeResult $ parse payload input`来获得一个`Maybe A.Value`没有额外包装在`Parser`. 如果不申请`maybeResult`，可以对返回的[Result](http://hackage.haskell.org/packages/archive/attoparsec/0.10.2.0/doc/html/Data-Attoparsec-ByteString.html#t%3aResult)进行模式匹配，分别处理`Fail`ure、`Partial`success和`Success`.

* * *

编辑：好的，现在更清楚了，谢谢：

*   （如果冒号后跟无效的 json，则失败）
*   如果有一个冒号后跟有效的 json，则成功，将其包装在 Just
*   如果只有输入结束，成功，返回Nothing

所以我们得到：

```
maybePayload :: Parser (Maybe A.Value)
maybePayload = char ':' *> (Just <$> A.json)
            <|> (Nothing <$ endOfInput) 
```

我用过`<$>`and `<$`from `Control.Applicative`，或者如果你喜欢的话， from `Data.Functor`。

`<$>`是 的中缀版本`fmap`，因此`Just <$> A.json`也是如此，`A.json`并将任何输出包装在`Just`.

`<$`is `fmap.const`so 将`()`from`endOfInput`替换为`Nothing`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:19:09.803

当解析器 monad 已经具有内置的失败概念时，为什么需要在 Maybe 中编码失败？以这种方式使用 Maybe 的问题是解析器无法回溯。

您可以尝试这样的事情（我没有尝试过类型检查），然后`option`在调用者中使用：

```
payload :: Parser Value
payload = do
  payload' <- char ':' *> takeByteString
  let res = parse A.json payload'
  case res of
    Error msg -> fail msg
    Success a -> return a 
```

# java - 用于匹配文件名或文件类型的 Java 正则表达式

> ID：13712043
> 
> 赞同：2
> 
> 时间：2012-12-04T21:13:40.763
> 
> 标签：java, regex, pattern-matching, match

我正在尝试编写一个 java 正则表达式，我的应用程序应该限制正则表达式中提到的文件或文件类型的名称附加到电子邮件中。我像这样开始了正则表达式，

```
 .*\\.(?:jpeg|jpg)$. 
```

这个对吗？。现在它不工作（匹配）。另外，如果我想扩展这个正则表达式，如何向这个表达式添加新的文件类型或文件名。比如说，我想在这个正则表达式中添加 vcf 文件类型，我应该怎么做？另外，如果我需要添加文件名，比如说 abc.bmp 被附加，我应该如何以及在哪里将该文件名包含在这个正则表达式中？非常感谢任何帮助，因为我是这个正则表达式的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:15:27.070

关于什么

```
if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) {
    // good
} else {
    // bad
} 
```

我在 m.buttners 回答下阅读了您的评论并提出以下建议：

```
List<String> allowedExtensions = loadExtensionsFromConfig(); // implement this
boolean isFileAllowed = false;
for (String extension : allowedExtensions) {
    if (fileName.endsWith(extension)) { // this is case sensitive!
        isFileAllowed = true;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:19:13.217

它应该是这样的：

```
.*\\.(jpe?g)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:18:12.457

它不匹配的原因只是`.`在最后。这会尝试匹配字符串末尾的字符**。**这显然行不通。删除它，你应该没问题。请注意，您可以减少`(?:jpeg|jpg)`到`jpe?g`.

这并不是说正则表达式是解决这个问题的正确方法。我更喜欢 jlordo 的方法，只要只有少量可能的文件扩展名。这只是为了让您知道正则表达式哪里出错了。

请注意，要么 要么`.*`是`$`多余的。如果您使用`match`它，无论如何都需要模式匹配整个字符串。在这种情况下，您不需要`$`再次断言。如果你使用`find`，那么你不需要匹配任意的字符串部分，所以你可以省略`.*`.

**编辑：**

经过评论中的讨论，如果您有一组允许的扩展名，加上一组允许的特定文件名，这将是一般的正则表达式：

```
^(?:.*\\.(?:all|allowed|file|extensions)|all\\.allowed|file\\.names)$ 
```

# javascript - 需要根据谁登录显示（）或删除（）元素

> ID：13712047
> 
> 赞同：-5
> 
> 时间：2012-12-04T21:13:54.747
> 
> 标签：javascript, jquery

```
(function($){
$(document).ready(function() {

 $('.nlgchat').hide(); // or do it with CSS...

      var usernames = ['Mr.EasyBB','runawayhorses','BL@DE','SirChivas'];

 var nameslist='';
 $('ul li a.mainmenu').each(function( i ){ 
var name = $(this).text().split(' ')[3];
nameslist += '||'+name; // ||dana||roko||john
 });

 for(i=0;i<usernames.length;i++){
 if( nameslist.indexOf( '||'+usernames[i] ) > -1 ){
    $('.nlgchat').show();
    return;
 }else{
    $('.nlgchat').remove();
    return;    
  }
}

 });
})(jQuery); 
```

我使用此代码制作它，因此只有某些人可以看到，`.nlgchat`但该代码仅适用于我的名字，而不适用于列表中的其他任何人。

我希望上面列出的用户能够看到它，其他所有人`.remove`

[http://jsfiddle.net/z62Pf/](http://jsfiddle.net/z62Pf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:42:38.583

您的循环显示或删除循环中`.nlgchat`每个名称之后的元素。这意味着如果在列表中找不到名字（如您的示例中的情况），则该元素将被删除并且无法再次显示。

要修复，请在循环外使用布尔值，并在循环完成后显示或删除元素：

```
 doshow = false;
    for (i = 0; i < usernames.length; i++) {
        doshow = doshow || (nameslist.indexOf('||' + usernames[i]) > -1);
        // once it's true, it stays true
    }
    if (doshow) {
        $('.nlgchat').show();
    } else {
        $('.nlgchat').remove();
    } 
```

[http://jsfiddle.net/mblase75/NR7RG/](http://jsfiddle.net/mblase75/NR7RG/)

顺便说一句，除非`nameslist`在代码的其他地方使用，否则最好用一个简单的数组替换它。某些用户总是有可能`||`在他们的用户名中包含并弄乱您的代码：

```
 var nameslist = [];
    $('ul li a.mainmenu').each(function(i) {
        var name = $(this).text().split(' ')[3];
        nameslist.push(name);
    });

    doshow = false;
    for (i = 0; i < usernames.length; i++) {
        doshow = doshow || ($.inArray(usernames[i],nameslist) > -1);
    } 
```

[http://jsfiddle.net/mblase75/NR7RG/3/](http://jsfiddle.net/mblase75/NR7RG/3/)

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

# javascript - 如何使用 find() 优化 jquery 代码？

> ID：13712049
> 
> 赞同：3
> 
> 时间：2012-12-04T21:14:12.027
> 
> 标签：javascript, jquery, forms, find, each

我有一个带有`id="test"`. 在表单里面我有一些`select`,`input`和`textarea`字段。

我想遍历它们中的每一个并检查它们是否为空，然后对它们做一些事情。

```
var editTest= $('#test');

editGeneric(editTest);

var editGeneric= function(form){
    form.children().find('select').each(
        function(){
            var values = $(this).val();
            if(values === 'select one' || values === 'Select One' || values == 0 || values == 99){
                $(this).css('border', '1px solid red');
            }
        }
    );

    form.children().find('input').each(
        function(){
            var values = $(this).val();
            if(values === ''){
                $(this).css('border', '1px solid red');
            }
        }
    );

    form.children().find('textarea').each(
        function(){
            var values = $(this).val();
            if(values === ''){
                $(this).css('border', '1px solid red');
            }
        }
    );
} 
```

这段代码可以满足我的需要，但你可以看到我重复了几次。

我怎样才能简化这段代码，以便我可以将它与其他形式一起使用？

有什么想法吗，谢谢

编辑：谢谢大家

我将代码归结为：

```
var editGeneric= function(form){

    form.children().find(':input').each( function(){
            var values = $(this).val();

            if ($(this).is('select')){
                if(values === 'select one' || values === 'Select One' || values == 0){
                    $(this).css('border', '1px solid red');
                }
            }
            if ($(this).is('input') || $(this).is('textarea')){
                if(values === ''){
                    $(this).css('border', '1px solid red');
                }
            }
        }
    );

}

editGeneric($('test')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:18:08.980

您可以使用 jQuery 的`:input`选择器，它选择输入、选择和文本区域：

```
form.children().find(':input').each( ... 
```

唯一的问题是您的`select`验证有点不同，因此您可以检查`.is('select')`以更改条件：

```
if (($(this).is('select')
   && (values === 'select one' || values === 'Select One'
   || values == 0 || values == 99) || !$(this).is('select') && values === ''))
   || !$(this).is('select') && values === '') { 
```

你也不必使用`form.children.find()`.. 你可以只使用`$("#test :input")`或`$(":input", form);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:17:05.157

只需组合选择器：

```
form.children().find('select,input,textarea').each(function(){
        if(!$(this).val()){
            $(this).css('border', '1px solid red');
        }
    }
); 
```

然后更改您的`<select>`，以便任何无效选项具有空值或零值属性，而不是“选择一个”或 99。

# apache - 新转移的 Drupal 站点 - 清除 URL 损坏

> ID：13712054
> 
> 赞同：0
> 
> 时间：2012-12-04T21:14:25.333
> 
> 标签：apache, drupal, drupal-7, wamp, clean-urls

我在本地 wamp 服务器上有一个 drupal 站点，但是在重新格式化我的计算机并重新安装 wamp 等之后，Clean URLS 搞砸了。我确保我的 apache 启用了 mod_rewrite，然后我得到了 404 错误。当我尝试登录时，我也收到 404 错误。我能做些什么？我已经找了一段时间，找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:31:14.307

让它工作。必须直接导航到登录页面 (/?q=user) 而不是仅使用登录块。然后直接导航到干净的 url 页面 (www.mydomain.com/?q=admin/config/search/clean-urls) 并禁用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:39:32.353

我相信需要启用 mod_rewrite 。

# javascript - Ruby on Rails：不使用 JavaScript 创建数据库条目

> ID：13712059
> 
> 赞同：2
> 
> 时间：2012-12-04T21:14:46.753
> 
> 标签：javascript, ruby-on-rails-3, rest, web-applications, methods

我是 Web 开发的新手，并尝试使用 Ruby on Rails (3.2.9) 开始一个项目。所以，我有点困惑 RoR 可以在没有 JavaScript 的情况下做什么......例如使用 Rails Scaffold，通过访问 Controller 的新方法在数据库中创建新记录没有问题（然后调用 create 方法并将记录保存到数据库中）我现在想在不使用视图的情况下创建新记录。就像“用户点击按钮->记录已保存”之类的东西我会给你一个例子（我需要这个来学习，这不是一个现实生活中的项目......）

我有一个显示我所有文章的视图（rails 生成脚手架文章），现在添加了一个指向“购买方法”的链接，该链接显示文章名称和可用数量。下面有一个字段，客户可以在其中选择他想购买的商品数量。

```
<p>
  <b>Name:</b>
  <%= @article.name %>
</p>

<p>
  <b>Available:</b>
  <%= @article.stocks %>
</p>

<%= form_for(@article) do |f| %>

 <div class="field">
    <b>How many?</b>
    <br />
    <%= f.number_field :amount %>
  </div>
<% end %> 
```

现在我想添加一个链接（或者我认为更好的按钮），它会导致一个事件，它将文章的名称和选定的数量变成类似订单项目的东西，即在 order_item 表中创建记录。

```
<td><%=link_to "Ja", :controller => "oderItem", :method => "create" %></td><br> 
```

现在我很困惑我该怎么做。我考虑过只使用控制器的 create - 方法（或任何方法），它执行以下操作：

```
def match

    @apo = OrderItem.new(:amount :2, ...)
    @apo.save
end 
```

但这似乎让我接受了控制器的新方法或类似的东西。

所以，有了这个解释（这也许也揭示了我的知识水平......）有人可以告诉我我是否真的在使用 Rails 做错了什么，或者我是否只需要为此使用 javascript？

一些示例代码（用于 Rails 和/或 JS）将不胜感激！（请保持简单，我知道 Ajax 等是最先进的，但我只是想让它运行 :-)）...还链接到代码示例，它只在 Rails 上显示这样的项目（简单地说：- ) ) 会非常好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:23:49.210

Ruby on Rails 不依赖于 Javascript，因此您无需了解 Javascript 即可学习 Ruby 和 Rails。

要回答您的一个问题，`link_to` `method`这不是指您尝试调用的操作，而是指 HTTP 方法，例如“POST”、“GET”、“PUT”、“DELETE”。您应该使用`:action`来告诉控制器（方法）中要执行的操作。

有几个地方可以帮助您开始使用 Ruby 和 Rails。

*   [Code School](http://codeschool.com) - Code school 有一些免费课程，其中一门恰好是 Ruby on Rails 上非常好的一门
*   [Code Academy](http://codeacademy.com) - Code Academy 比 Code School 更加结构化，并且仍然提供许多关于不同 Web 开发技术的课程
*   [Railscasts](http://railscasts.com) - Railscasts 是一个很棒的网站，有一些免费的 Rails 教程视频

也许有些人可以详细说明更多来源。此外，[Github](http://github.com)有许多开源项目，您可以查看并了解人们如何使用 Ruby 和 Rails。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:56:34.330

为了更改页面布局以显示“迷你”表单以响应用户单击特定元素，您将需要呈现新视图或通过 JavaScript 修改当前文档。

如果您选择通过 JavaScript 显示表单，以下是此视图代码的简化版本：

再培训局：

```
# rendering each available article...
<% @articles.each do |article| %>

  <p>
    <b>Name:</b>
    <%= article.name %>
  </p>

  <p>
    <b>Available:</b>
    <%= article.stocks %>
  </p>

  <% button_tag(:type => 'button', :class => 'buy-btn', data-article-id="article.id") do %>
    <strong>Buy Me!</strong>
  <% end %>

  # for each article, create a mini form with which
  # the user can buy n of said article...
  <div class="field hidden-item" id="form-#{article.id}" >
    <%= form_for(OrderItem.new do |f| %>   
      <b>How many?</b>
      <br />
      <%= f.number_field_tag :amount%>
      <%= f.submit %>    
    <% end %> 
  </div>
<% end %> 
```

CSS：

```
.field {
  display: none; //hides the div from all browsers by default
} 
```

JavaScript 帮助将所有内容联系在一起：

```
$(document).ready(function() {
  //... other js code

  // bind all elements with the css class 'buy-btn' to 
  // a click event...
  $(".buy-btn").bind('click', function() {
      var id = $(this).data('article-id');
      $("#form-" + id).slideDown(); // shows the selected element with a nice slide down effect
  });

  //... other js code

}); 
```

因此，在 ERB 中，我们为每篇文章提供一个等待填充和提交的迷你表单。默认情况下，表单在我们的 CSS 中是隐藏的，当用户单击“购买我！”时会显示该表单。相关文章的按钮。

这种方法也可以稍作调整，以允许用户通过稍微移动表单声明并在 OrderItemsController.create 操作中进行适当处理来订购他们想要的许多不同的文章。

要记住的另一件事是，单击表单上的提交按钮将导致页面默认重定向。这可能是您刚开始时想要离开它的方式，但是当您开始适应时，请查看如何`:remote => true`在提交标签上使用以允许通过 AJAX 在后台提交表单。

如果你真的想在没有任何 JavaScript 的情况下做到这一点，你要么必须使用 CSS 做一些非常高级的工作，要么必须安装一个链接，将参数传递给你的视图，指示它显示特定的表单. 这可能是这样的：

```
# rendering each available article, as before...
<% @articles.each do |article| %>

  <p>
    <b>Name:</b>
    <%= article.name %>
  </p>

  <p>
    <b>Available:</b>
    <%= article.stocks %>
  </p>

  # ... but now set up a link that passes a param to the controller...
  <%= link_to( 'Buy Me!', "/articles?article=#{article.id}" ) %>

  # which we then use to render a form on the page if the id in the
  # 'article' param matches the id of the article we are currently
  # rendering...
  <% if params[:article] && params[:article] == article.id %>

    <%= form_for(OrderItem.new do |f| %>   
      <b>How many?</b>
      <br />
      <%= f.number_field_tag :amount%>
      <%= f.submit %>    
    <% end %> 
  </div>
<% end %> 
```

这可能不准确，但我希望它为您指明正确的方向！

# httpmodule - 检查 HTTPModule 中是否匿名

> ID：13712068
> 
> 赞同：0
> 
> 时间：2012-12-04T21:15:07.377
> 
> 标签：httpmodule

我正在用 C#.NET 编写一个 HTTPModule 来管理我们的应用程序在特定服务器上的未处理错误。有些用户在我们的域中，有些是匿名的。如何在我的 HTTPModule 中确定用户是匿名用户还是来自我们的域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:57:10.203

首先在 IIS 中您必须激活[Windows 身份验证](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication#004)。然后您可以访问当前用户`HttpContext.Current.User.Identity`

# python - Python 和 Pyinstaller 文件

> ID：13712069
> 
> 赞同：0
> 
> 时间：2012-12-04T21:15:07.523
> 
> 标签：python, pyinstaller

我使用 PyInstaller（在 Centos 上）在 Python 上打包了一个程序，输出是 /var/pyinstaller/pyinstaller-2.0/test/build/pyi.linux2/test 中的 8 个文件：

```
out00-PYZ.toc
out00-PYZ.pyz
out00-PKG.toc
out00-PKG.pkg
out00-EXE.toc
out00-COLLECT.toc
out00-Analysis.toc
test                     // thats project file name. test.py 
```

我的问题是现在如何使用这些文件在 CentOS 上运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:51:59.167

查看 /var/pyinstaller/pyinstaller-2.0/test/dist/test 文件夹。构建文件夹是分发构建过程的一次性副产品。

祝你好运

麦克风

# sql-server - SQL中的特殊字符

> ID：13712070
> 
> 赞同：8
> 
> 时间：2012-12-04T21:15:08.437
> 
> 标签：sql-server, ascii

我在 SQL Server 2008 R2 的表中插入特殊字符时遇到问题。关键是，当我尝试在表中插入带有字符 º 的字符串（例如 3 ELBOW 90º LONG RADIUS）时，它看起来像这样：3 ELBOW 90� LONG RADIUS，并且当我尝试选择所有包含字符 � 的行结果为空。

我尝试通过以下方式使用 ASCII 进行选择： select * from itemcode where description like '%'+char(63)+'%'

并使其知道该符号的 ASCII 为 63：

选择 ASCII('�')

但这不起作用。我必须做什么来选择所有具有该字符的行，我应该怎么做才能使 SQL 识别字符 º？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T21:45:05.140

学位[符号](http://en.wikipedia.org/wiki/Degree_symbol)

```
U+00B0 ° degree sign (HTML: &#176; &deg;) 
```

不是 ASCII 字符，通常需要 NVARCHAR 列和`N''`字符串文字。（支持符号的代码页等除外）

63 是[问号](http://en.wikipedia.org/wiki/Question_mark)的代码，它是 ASCII 中反问号的后备：

```
select UNICODE('�') => 63
select UNICODE(N'�') => 65533 
```

其中 65533 是用于显示无法转换或显示的字符的[Unicode 替换字符。](http://www.fileformat.info/info/unicode/char/fffd/index.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T21:45:46.853

当我运行这个：

```
print ascii('º') 
```

我得到 186 作为 ascii 代码值，所以尝试：

```
select * from YourTable Where Description like '%'+char(186)+'%' 
```

要查看所有 ascii 代码，请运行以下命令：

```
;WITH AllNumbers AS
(
    SELECT 1 AS Number
    UNION ALL
    SELECT Number+1
        FROM AllNumbers
        WHERE Number<255
)
SELECT Number,CHAR(Number) FROM AllNumbers
OPTION (MAXRECURSION 255) 
```

**编辑**操作在评论中声明他们正在使用 nvarchar 列。

关于 ascii 的伪造者，使用[NCHAR (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms182673.aspx)输出度数符号：

```
print '32'+NCHAR(176)+'F' --to display it

select * from YourTable 
    Where Description like '%'+NCHAR(176)+'%' --to select based on it 
```

并使用[UNICODE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms180059.aspx)获取值：

```
print UNICODE('°') 
```

返回：

```
176 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T10:13:24.047

```
select top 10 * from table_name 
where tbl_colmn like N'%'+  NCHAR(65533) + N'%' 
```

the function NCHAR(65533) will return the character your're looking for.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:44:47.020

除了确保它是 NVARCHAR 之外，我还会使用类似这样的东西

选择（N'''）

[如何在 SQL Server 2008 中显示特殊字符？](https://stackoverflow.com/questions/10512496/how-to-display-special-characters-in-sql-server-2008)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T08:56:47.447

我知道这是旧的，但最近遇到了同样的问题，并在[这里找到了解决方案](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/2754165e-7ab7-44b0-abb4-3be487710f31/black-diamond-with-question-mark?forum=transactsql)

“我知道在 SQL 中找到或摆脱它的最佳方法是使用二进制排序规则检查它。例如”

```
Declare @Foo Table(PK int primary key identity, MyData nvarchar(20));
Insert @Foo(MyData) Values (N'abc'), (N'ab�c'), (N'abc�')
Select * From @Foo Where MyData Like N'%�%'

-- Find rows with the character
Select * From @Foo
Where CharIndex(nchar(65533) COLLATE Latin1_General_BIN2, MyData) > 0

-- Update rows replacing character with a !
Update @Foo
set MyData = Replace(MyData, nchar(65533) COLLATE Latin1_General_BIN2, '!')

Select * From @Foo 
```

# playframework - 在自定义线程池上运行 Play 作业

> ID：13712072
> 
> 赞同：2
> 
> 时间：2012-12-04T21:15:22.417
> 
> 标签：playframework, playframework-1.x

我想在自定义线程池/执行器服务上运行一些作业。

原因是我有很多工作可能会压倒正常的工作池，所以我想将它们分成一个专用池。

我尝试创建一个新的 ExecutorService 并在其上运行作业：

```
public static <T> F.Promise<T> runJobWithExecutor(ExecutorService executor, final Job<T> job) {
    final F.Promise<T> promise = new F.Promise<T>();
    executor.submit(new Callable<T>() {
        public T call() throws Exception {
            T result =  job.call();
            promise.invoke(result);
            return result;
        }
    });
    return promise;
} 
```

但我收到各种 JPA 错误：

> 以下失败引发了 SQLException：java.lang.InterruptedException [原因：com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java) 处的 java.lang.Object.wait(Native Method) 处的 java.lang.InterruptedException :1315) com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557) com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477) com.mchange.v2.c3p0。 impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525) at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128) at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java: 71) 在 org.hibernate.jdbc。ConnectionManager.openConnection(ConnectionManager.java:446) 在 org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167) 在 org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160) 在 org.hibernate.transaction .JDBCTransaction.begin(JDBCTransaction.java:81) 在 org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473) 在 org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60) 在 play.db。 jpa.JPAPlugin.startTx(JPAPlugin.java:350) at play.db.jpa.JPAPlugin.beforeInvocation(JPAPlugin.java:318) at play.plugins.PluginCollection.beforeInvocation(PluginCollection.java:428) at play.Invoker$Invocation .before(Invoker.java:217) at play.jobs.Job.call(Job.java:139) at org.commercesciences.play.Jobs3$1.call(Jobs3.java:16) at java.util.concurrent.FutureTask $Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask.java:166) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:603) 在 java.lang.Thread.run(Thread.java:722)

为了在单独的线程上运行作业，我还需要做些什么吗？

我正在使用 play 1.2.4-mbknor-3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:38:36.850

与您的问题上下文相关的几件事（即使不是直接回应）。

1）。尝试更改最大队列大小。

```
int maxThreads = 50;
int queueSize = 1000; // should be big enough!
ExecutorService newExecutor = new ThreadPoolExecutor(maxThreads, maxThreads, Long.MAX_VALUE, TimeUnit.NANOSECONDS, new ArrayBlockingQueue<Runnable>(queueSize, true)); 
```

2）。另外，在性能方面，如果你不需要 Hibernate，可以考虑 Callable 而不是 Job - play! 的 Job 本质上很重，如果需要，它会根据 Job 初始化 Hibernate 和其他插件。

# css - 防止 jQuery Mobile 单选按钮在屏幕缩小时相互堆叠。

> ID：13712075
> 
> 赞同：0
> 
> 时间：2012-12-04T21:15:32.410
> 
> 标签：css, jquery-mobile, radio-button

我在字段集中有一组带有 data-type="horizo​​ntal 和 data-mini="true" 的 jQuery Mobile 单选按钮。显然我在移动网站上使用它，但是当屏幕尺寸减小时，单选按钮会堆叠起来一个接一个。

我怎样才能防止这种情况发生？

这是一个例子

[http://jsfiddle.net/sg8EJ/3/](http://jsfiddle.net/sg8EJ/3/)

```
 <fieldset  class="changeFulfilment" data-type="horizontal" data-role="controlgroup" data-mini="true">
               <input class="changeFulfillmentInput" type="radio" name="radio-mini" id="radio-mini-1"/>
               <label for="radio-mini-1">long Button----------</label>

               <input class="changeFulfillmentInput"  type="radio" name="radio-mini" id="radio-mini-2" />
               <label for="radio-mini-2">short</label>
       </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:50:14.473

用 css 给它的容器 div 一个最小宽度。这将解决您的问题。

# matlab - 获取所有子矩阵

> ID：13712077
> 
> 赞同：6
> 
> 时间：2012-12-04T21:15:38.063
> 
> 标签：matlab, vectorization, submatrix

我有一个 N×M 矩阵`m`，如：

```
 1  2  3  4
 5  6  7  8
 9 10 11 12
13 14 15 16 
```

我想得到*所有*大小为 P×Q 的子矩阵（P，Q 是奇数）w/o 使用 for 循环。

结果`s`应该是一个 P×Q×((N-P+1)·(M-Q+1)) 矩阵。

例如，如果 P=Q=3：

```
s(:,:,1) = [1 2 3;  5  6  7;  9 10 11]
s(:,:,2) = [2 3 4;  6  7  8; 10 11 12]
s(:,:,3) = [5 6 7;  9 10 11; 13 14 15]
s(:,:,4) = [6 7 8; 10 11 12; 14 15 16] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T05:19:09.973

`im2col`可以在这里为您提供帮助：

```
m =
     1     2     3     4
     5     6     7     8
     9    10    11    12
    13    14    15    16

>> P = 3; Q = 3;
>> columnized = im2col(m,[P Q],'sliding');
>> nMatrices = size(columnized,2);
>> s = reshape(columnized, [P Q nMatrices])

s(:,:,1) =
     1     2     3
     5     6     7
     9    10    11
s(:,:,2) =
     5     6     7
     9    10    11
    13    14    15
s(:,:,3) =
     2     3     4
     6     7     8
    10    11    12
s(:,:,4) =
     6     7     8
    10    11    12
    14    15    16 
```

`im2col`使用该`'sliding'`选项查找所有重叠的子矩阵，并将每个子矩阵作为 (P·Q) 元素列向量返回`columnized`。为了将这些转换回矩阵，我们`reshape`将 (P·Q)×((N-P+1)·(M-Q+1)) 矩阵转换为 P×Q×((N-P+1)·(M -Q+1)) 一。

# asp.net-mvc - 将模型中的复杂对象绑定到数据库

> ID：13712079
> 
> 赞同：0
> 
> 时间：2012-12-04T21:15:58.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, model

今天下午我看了很多文章，但我似乎找不到一篇完整的文章来处理模型中的复杂对象来解决我正在尝试做的事情。

我正在使用 Code First 方法，但我的模型没有直接改变我的数据库结构。因此，如果数据库结构发生变化，我将手动更改模型。

话虽如此，我有下表：

```
Name
Address1
Address2
Address3
City
State
Zip
Latitude
Longitude 
```

我想构建一个如下所示的模型：

```
public class Person
{
  public string Name { get; set; }
  public Address Address { get; set; }
  public Coordinates Coordinates { get; set; }
}
public class Address {
  public string Address1 { get; set; }
  public string Address2 { get; set; }
  public string Address3 { get; set; }
  public string City { get; set; }
  public string State { get; set; }
  public string Zip { get; set; }
}
public class Coordinates
{
  public float Latitude { get; set; }
  public float Longitude { get; set; }
} 
```

在我看来，这似乎是一种整洁的、面向对象的方法，可以处理从数据库返回的一对一数据。代替所有这些单独的变量，相似的数据被分组到子类中。

我的问题是：如何使用 EF 将此复杂模型绑定到我的数据库？如果那不可能，我该如何编写自定义活页夹来以这种方式处理数据。

还是我想错了。是否有不同的方法来解决这个问题，或者数据的结构是否应该不同？

**编辑**

根据下面 Jason Meckley 的回复，这是我用来完成此任务的最终代码。

```
namespace MyNamespace
{
  public partial class Person
  {
    public string Name { get; set; }
    public Address Address { get; set; }
    public Coordinates Coordinates { get; set; }
  }
  [ComplexType]
  public class Address
  {
    [Display(Name = "Address")]
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Address3 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
  }
  [ComplexType]
  public class Coordinates
  {
    public float Latitude { get; set; }
    public float Longitude { get; set; }
  }

  public partial class DATABASE_CONNECTION_NAME : DbContext
  {
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.Address1)
          .HasColumnName("Address1");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.Address2)
          .HasColumnName("Address2");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.Address3)
          .HasColumnName("Address3");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.City)
          .HasColumnName("City");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.State)
          .HasColumnName("State");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.Zip)
          .HasColumnName("Zip");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Coordinates.Latitude)
          .HasColumnName("Latitude");
      modelBuilder
          .Entity<Person>()
          .Property(x => x.Coordinates.Longitude)
          .HasColumnName("Longitude");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:27:07.217

装饰`Address`并`Coordinates`带有属性`[ComplexType]`。在您的 dbcontext 子类中覆盖`OnModelCreating`复杂属性并将其映射到适当的列。

默认情况下，复杂对象将像这样映射`Address_Address`，`Coordinates_Latitude`因此您需要使用类似的东西覆盖默认映射

```
modelBuilder
          .Entity<Person>()
          .Property(x => x.Address.Address1)
          .HasColumnName("Address1"); 
```

# ios - 使用变量 itemSize 时 UICollectionView 未完全更新到新布局

> ID：13712084
> 
> 赞同：2
> 
> 时间：2012-12-04T21:16:16.990
> 
> 标签：ios, cocoa-touch, ios6, uicollectionview

这可能是 中的一个错误`UICollectionView`，一旦 Apple 的错误报告网站停止被破坏，我就会报告它。但我想我会把它放在那里，以防万一有人幸运地绕过它。

我有一个`UICollectionView`使用`UICollectionViewFlowLayout`. 我正在使用`UICollectionViewDelegateFlowLayout`协议为每个单元格指定 itemSize，但我正在使用布局的`sectionInset`属性来设置部分插图。

我需要为集合视图的部分插图设置动画。为此，我正在创建一个新`UICollectionViewFlowLayout`实例，设置其 sectionInset 属性，并调用`-setCollectionViewLayout:animated:`collectionView。

问题是：**如果集合视图的一部分包含大小不同的项目，则该部分不会更新为新的`sectionInset`.** 如果我只使用布局的 itemSize 属性，或者如果我从`UICollectionViewDelegateFlowLayout`方法返回静态大小，则该部分的动画效果正确。只有当该部分包含不更新的不同高度的项目时。

似乎很明显是一个错误，但我仍然对我做错了什么的可能性持开放态度。`UICollectionView`非常灵活，文档也不是很好，所以也许我缺少一些东西。

其他人看到这个问题吗？有幸过去吗？

**更新**

我发现发生此问题的情况比我上面所说的更具体。违规部分中的项目必须足够宽，以确保垂直滚动集合视图的每行只有一个项目。在这些情况下，如果节中项目的宽度**或**高度不统一，则节的 sectionInset 不会正确更新

# objective-c - 如何在可可中将插入符号（光标）移动到行尾

> ID：13712088
> 
> 赞同：1
> 
> 时间：2012-12-04T21:16:31.123
> 
> 标签：objective-c, macos, cocoa

这可能是一项简单的任务，但我是可可的新手，还没有找到解决方案。

我编写的算法接受并验证用户的输入。它只接受数字，然后将输入转换为可接受的形式，即 nn:nn:nn，其中 nn 是两位数。

该算法的工作方式如下：

1.  接受数字
2.  检查我们是否需要插入：
3.  添加到最终字符串

所以发生的情况是，用户在文本字段中输入 123 后，它看起来像：12:|3（其中 | 是光标位置）

正如您所理解的，如果用户键入 12345，例如输入将如下所示： 12:45:|3 这是错误的。

在我执行 : 插入之后，我认为解决这个问题只是将光标简单地移动到行尾。但到目前为止，我找不到这样做的方法。:(

如果有人可以帮助我修复此错误，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:48:36.537

你可以试试这些：

```
[[self.inputFileTextField currentEditor] moveToEndOfLine:nil]; 
```

如果你有 textView 那么，

```
moveToEndOfParagraph: 
```

或者

```
NSTextView * textView = [thePanel textView forObject:theTextField];

NSUInteger text_len = [[textView string] length];

[textView setSelectedRange:(NSRange){text_len, 0}]; 
```

# ruby-on-rails - 如何将动态表格列表添加到完整日历页面？

> ID：13712089
> 
> 赞同：1
> 
> 时间：2012-12-04T21:16:37.927
> 
> 标签：ruby-on-rails, fullcalendar

我在 RoR 页面上实现了 Fullcalendar。我想在日历下方添加一个列表（索引），显示用户选择的那一天的事件。单击日历下方的某一天和该天的事件列表。我希望它是动态的（不要重新加载整个页面）。

请指出正确的方向来学习如何做到这一点。我订阅了 Railscast。但是，我不确定要寻找什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:17:57.733

您可以使用[dayClick](http://arshaw.com/fullcalendar/docs/mouse/dayClick/)回调调用填充您的索引/列表的 ajax 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:01:34.740

我认为你应该制作一个 javascript 函数，它在 Fullcalendar 中监听“tb”的点击事件。它应该触发 ajax 调用以从数据库中获取事件，按日期过滤。[这个 Railscast](http://railscasts.com/episodes/136-jquery-ajax-revised)是一个很好的例子，ajax 调用如何在不重新加载整个页面的情况下刷新一些页面内容。

# android - 滑动以关闭导致充气异常和非法状态异常？

> ID：13712093
> 
> 赞同：0
> 
> 时间：2012-12-04T21:16:48.340
> 
> 标签：android, swipe, android-sqlite, android-listfragment

我正在尝试在我的应用程序的 listfragment 的列表项中实现滑动以消除。我正在使用 Jake Wharton 的 NineOldAndroids backport of Roman Nurik 的代码。但是，当我将它添加到我的片段的 onCreate() 中时，我得到了关于第二个异常的 getListView() 方法的 inflateexception 和非法状态异常。这是我的 ListFragment：

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getReadableDatabase();
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);
    //The problem starts here
    SwipeDismissListViewTouchListener touchListener =
            new SwipeDismissListViewTouchListener(
                    getListView(),
                    new SwipeDismissListViewTouchListener.OnDismissCallback() {
                        public void onDismiss(ListView listView, int[] reverseSortedPositions) {
                            for (int position : reverseSortedPositions) {
                                removeCourse(adapter.getItem(position).toString());
                                adapter.remove(adapter.getItem(position));
                            }
                            adapter.notifyDataSetChanged();
                        }
                    });
    getListView().setOnTouchListener(touchListener);
    getListView().setOnScrollListener(touchListener.makeScrollListener());
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToLast();
    courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
    courseItems.add(courseName);
    c.close();
    adapter.notifyDataSetChanged();
}

public void removeCourse(String deletedCourse) {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();
    while(c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        if (deletedCourse.equals(courseName)) {
            db.delete(DbHelper.TABLE_NAME, DbHelper.C_ID + "=" + 
        db.query(DbHelper.TABLE_NAME,new String[]{DbHelper.C_ID},null,null,null,null,null),null);
        }
    }
    c.close();
}
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

这是我的日志：

```
12-04 16:09:30.155: E/AndroidRuntime(333): FATAL EXCEPTION: main
12-04 16:09:30.155: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sample/com.example.sample.CourseListActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-04 16:09:30.155: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 16:09:30.155: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:521)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-04 16:09:30.155: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
12-04 16:09:30.155: E/AndroidRuntime(333): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.example.sample.CourseListActivity.onCreate(CourseListActivity.java:55)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-04 16:09:30.155: E/AndroidRuntime(333):  ... 11 more
12-04 16:09:30.155: E/AndroidRuntime(333): Caused by: java.lang.IllegalStateException: Content view not yet created
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
12-04 16:09:30.155: E/AndroidRuntime(333):  at com.example.sample.CourseListFragment.onCreate(CourseListFragment.java:96)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:877)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
12-04 16:09:30.155: E/AndroidRuntime(333):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
12-04 16:09:30.155: E/AndroidRuntime(333):  ... 19 more 
```

任何帮助深表感谢！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:28:22.307

您在 OnCreate() 中做了很多工作 - 您的 Fragment 的视图尚未初始化，您正在尝试获取 ListView。尝试使用 OnViewCreated() 或 OnActivityCreated() 回调。

# javascript - 如何通过单击打开javascript菜单并在鼠标移出时关闭

> ID：13712095
> 
> 赞同：-6
> 
> 时间：2012-12-04T21:16:56.617
> 
> 标签：javascript, onclick, onmouseover

这是我的菜单 JavaScript 函数。现在我的菜单通过点击打开并通过点击关闭。我想在鼠标离开按钮时单击并关闭来打开。

```
$("#theme_select").click(function() {
    if (theme_list_open == true) {
        $(".center ul li ul").hide();
        theme_list_open = false;
    } else {
        $(".center ul li ul").show();
        theme_list_open = true;
    }
    return false;
});​ 
```

我与一个人一起编辑并修复了最重要的问题。但是当我想将鼠标移动到打开的菜单项时，菜单已关闭。查看我的完整脚本（更改前）：

```
<script type="text/javascript">

    var theme_list_open = false;

    $(document).ready(function () {

        function fixHeight () {

        var headerHeight = $("#switcher").height();

        $("#iframe").attr("height", (($(window).height() - 1) - headerHeight) + 'px');

        }

        $(window).resize(function () {

            fixHeight();

        }).resize();

        $("#theme_select").click( function () {

            if (theme_list_open == true) {

            $(".center ul li ul").hide();

            theme_list_open = false;

            } else {

            $(".center ul li ul").show();               

            theme_list_open = true;

            }

            return false;

        });

        $("#theme_list ul li a").click(function () {

        var theme_data = $(this).attr("rel").split(",");

        $("li.purchase a").attr("href", theme_data[1]);
        $("li.remove_frame a").attr("href", theme_data[0]);
        $("#iframe").attr("src", theme_data[0]);

        $("#theme_list a#theme_select").text($(this).text());

        $(".center ul li ul").hide();

        theme_list_open = false;

        return false;

        });

    });

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:36:01.867

像这样 ？

示例..（如果您对 jQuery 足够了解，只需编辑您的元素选择器）

**HTML：**

```
<ul>
    <li>Menu#1</li>
    <span>Sub</span>
    <li>Menu#2</li>
    <span>Sub</span>
</ul> 
```

**jQuery :**

```
$("ul li").click(function () {
    $(this).addClass("showing").next("span").show();
});

$('ul').mouseout(function() {
  $("ul li.showing").removeClass().next("span").hide();
}); 
```

演示：http: [//jsfiddle.net/JcKxV/](http://jsfiddle.net/JcKxV/)

**在你的情况下编辑......**看起来像......

```
$("#theme_select").click(function() {
    if (theme_list_open == false) {
        $(".center ul li ul").addClass("showing").show();
        theme_list_open = true;
    }
    return false;
});

$("#theme_select").mouseout(function() {
  $(".center ul li ul.showing").removeClass().hide();
    theme_list_open = false;
}); 
```

或者

```
$("#theme_select").click(function() {
    if (theme_list_open == false) {
        $(".center ul li ul").show();
        theme_list_open = true;
    }
    return false;
});

$("#theme_select").mouseout(function() {
    if (theme_list_open == true) {
      $(".center ul li ul").hide();
        theme_list_open = false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:29:39.340

[@PeeHaa 想说的是] 使用该`jQuery` [`.hover()`](http://api.jquery.com/hover/)功能。

```
$("#theme_select").click(function() {
    if ($("#theme_select").is(":visible")) {
        $(".center ul li ul").hide();
    } else {
        $(".center ul li ul").show();
    }
    return false;
});​

$("#theme_select").hover(function() {
     //Do Nothing
    },function(){
        $(".center ul li ul").hide(); //Mouse leave
});​ 
```

第一个函数表示当鼠标悬停在 theme_select 上时执行的代码。第二个函数表示当鼠标离开theme_select 时执行的代码。

# javascript - 如何防止 javascript 函数在另一个函数呈现之前呈现？

> ID：13712098
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:17:04.967
> 
> 标签：javascript, jquery, function

从理论上讲，假设我有 3 个创建视觉效果的 javascript (jquery) 函数。如果我希望其中一个在前两个渲染后渲染，我该怎么做？

Javascript：

```
 <script type="text/javascript">

 $(function() {
 var transition = 'slow';
 var target1 = $('#somediv');
 var target2 = $('#second_div');
 var target3 = $('#third_div');
 target1.delay(5000).fadeIn();
 target2.delay(target2Time).fadeIn();
 target3.delay(target3Time).fadeIn();
 }); 
 </script>

 <script type="text/javascript">
 $.fn.teletype = function(opts){
 var $this = this,
    defaults = {
        animDelay: 50
    },
    settings = $.extend(defaults, opts);

 $.each(settings.text, function(i, letter){
    setTimeout(function(){
        $this.html($this.html() + letter);
    }, settings.animDelay * i);
 });
 };

 $(function(){
 $('#second_div').teletype({
    animDelay: 200,
    text: 'Hello, this is your classmate!'
 });
 });
</script> 
```

HTML：

```
 <div id="somediv">Some Content</div>
 <div id="second_div"></div>
 <div id="third_div">Some third content</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:31:55.890

我做了这个演示。它演示了如何让一个动画等待另外两个动画完成：

```
var anim1 = $( '#elem1' ).animate({ width: 200 }, 3000 );
var anim2 = $( '#elem2' ).animate({ width: 200 }, 2000 );

$.when( anim1, anim2 ).done(function () {
   $( '#elem3' ).animate({ width: 200 }, 1000 );
}); 
```

**现场演示：http:** [//jsfiddle.net/m67Ua/](http://jsfiddle.net/m67Ua/)

* * *

您可以对衰落要求应用相同的技术：

```
var fade1 = $( '#img1' ).fadeIn( 3000 );
var fade2 = $( '#img2' ).fadeIn( 2000 );

$.when( fade1, fade2 ).done(function () {
   $( '#img3' ).fadeIn( 1000 );
}); 
```

**现场演示：http:** [//jsfiddle.net/m67Ua/1/](http://jsfiddle.net/m67Ua/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:36:18.163

就像改进一样，您可以传递一系列动画

```
 var array = new Array();
 array.push( $( '#img1' ).fadeIn( 3000 ));
 array.push( $( '#img2' ).fadeIn( 2000 )); 
```

**然后诀窍是使用apply**方法从数组更改为 jquery 所期望的列表参数

```
$.when.apply(this, array ).done(function () {
    $( '#img3' ).fadeIn( 1000 );
}); 
```

现场演示：

[http://jsfiddle.net/m67Ua/2/](http://jsfiddle.net/m67Ua/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T11:42:26.810

我需要回调和完成，所以检查一下：

```
$.when(
    $('#container .item')
        .animate({"opacity": "0"}, 1000, 
            function onCallbackForEach () {
                console.log('callback on element called');
            })
).done( function onFinally () {
    console.log('done called');
}); 
```

这使我可以在动画之后处理每个元素（例如用它们替换旧元素），并且在所有动画完成后还有一个回调来完成工作......

# c - 在 C 中通过网络发送/接收数据

> ID：13712099
> 
> 赞同：1
> 
> 时间：2012-12-04T21:17:06.360
> 
> 标签：c, network-programming

我写了这个程序：

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netdb.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int socket_desc;
struct sockaddr_in adress;
int addrlen;
int new_socket;
int bufsize = 1024;

char *you_sent = "You sent: ";

int main() {
    char *buffer = malloc(bufsize);
    socket_desc = socket(AF_INET, SOCK_STREAM, 0);
    adress.sin_family = AF_INET;
    adress.sin_addr.s_addr = INADDR_ANY;
    adress.sin_port = htons(7000);
    bind(socket_desc, (struct sockaddr *)&adress, sizeof(adress));
    listen(socket_desc, 3);
    addrlen = sizeof(struct sockaddr_in);
    new_socket = accept(socket_desc, (struct sockaddr *)&adress, &addrlen);
    while(recv(new_socket,buffer,bufsize,0))
    {
        printf("I recieved: %s", buffer);
        send(new_socket, you_sent, strlen(you_sent), 0);
        send(new_socket, buffer, strlen(buffer), 0);
        memset(buffer, '\0', sizeof(buffer));
    }
} 
```

我可以通过 telnet 连接到服务器。并将内容写入应用程序并从应用程序接收数据。但是我无法理解如何使用另一个 c 程序连接到该程序并从该程序发送和接收数据。我试过这个：

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netdb.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int socket_desc;
struct sockaddr_in adress;
int addrlen;
int new_socket;

char *message_to_send = "Hello world!";

int main() {
    socket_desc = socket(AF_INET, SOCK_STREAM, 0);
    adress.sin_family = AF_INET;
    adress.sin_addr.s_addr = INADDR_ANY;
    adress.sin_port = htons(7000);
    bind(socket_desc, (struct sockaddr *)&adress, sizeof(adress));
    listen(socket_desc, 3);
    addrlen = sizeof(struct sockaddr_in);
    new_socket = accept(socket_desc, (struct sockaddr *)&adress, &addrlen);
    send(new_socket, message_to_send, strlen(message_to_send), 0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:25:15.920

服务器就像交换机上的电话接线员。该人执行以下操作：

*   坐在电话前（即对着`bind`一个号码）
*   等待它响起（即`listen`）
*   拿起电话（即`accept`）

另一端的人只是想给那个人打电话。（即`connect`）。该人仅在需要拨打电话时才需要接听电话。因此不必绑定到电话或必须听它响铃。

我希望这个比喻有助于你的理解。

PS：`socket`部分是墙上的电话插座。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T21:19:57.370

顺序如下：

**服务器端：**

*   `socket`使用系统调用创建套接字；
*   端口与`bind`系统调用的绑定；
*   监听`listen`系统调用（这将启用积压队列）；
*   `accept`使用系统调用 接受传入连接
    *   这是一个*阻塞*操作：您的线程将保持阻塞状态，直到连接进来）；
    *   该`accept`函数将返回一个表示新连接的新*文件描述符。*您将使用它与另一台主机发送/接收数据，而原始*文件描述符*(from `socket`) 将用于新的传入连接。

**客户端：**

*   `socket`使用;创建套接字
*   与 连接`connect`。

[在这里](https://man.openbsd.org/Linux-4.13/tcp.7)，您可以找到一些额外的资源。

# xml - 如何将只有特定标签的 XML 导入 Access 数据库？

> ID：13712101
> 
> 赞同：2
> 
> 时间：2012-12-04T21:17:18.863
> 
> 标签：xml, vba, ms-access

我有一个这样的 XML 文件：

```
<Example>
  <A>
    <a1>1</a1>
    <a2>2</a2>
  </A>
  <B>
    <b1>1</b1>
    <b2>2</b2>
    <b3>3</b3>
  </B>
  <B>
  .
  .
  .
  </B>
</Example> 
```

当我使用`Application.ImportXML Me.XMLpath, acStructureAndData`时，它会同时导入表 A 和 B。那么我怎么能只导入表 B 而没有 A 呢？（A 可能是 10 多个不同的表）。感谢您的热心帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:23:46.013

感谢您的提示，以下是我所做的...

```
Dim db As Database
Set db = CurrentDb()
Dim xDoc As MSXML.DOMDocument
Set xDoc = New MSXML.DOMDocument
Dim xNote As IXMLDOMNode
Dim x As IXMLDOMNodeList
Dim XMLpath, sSQL As String

XMLpath = Me.Text1
xDoc.validateOnParse = False
sSQL = "INSERT INTO Temp VALUES ('"

If xDoc.Load(XMLpath) Then
    Set x = xDoc.getElementsByTagName("_TargetTag")
Else
    MsgBox "XML file ERROR"
    Exit Sub
End If

For j = 0 To x.length - 1
    For i = 0 To lengthOfChildNode
        sSQL = sSQL & x(j).childNodes(i).nodeTypedValue & "','"
    Next i
    sSQL = Left(sSQL, Len(sSQL) - 2) & ");"
    db.Execute sSQL
    sSQL = "INSERT INTO Temp VALUES ('"
Next j 
```

到目前为止，我得到了我需要的东西，但是任何可以改进此代码的想法我都会非常感激。谢谢！

# windows-phone-7 - 如何让返回键返回系统 Windows Phone

> ID：13712104
> 
> 赞同：0
> 
> 时间：2012-12-04T21:17:31.320
> 
> 标签：windows-phone-7

我有一个小应用程序，有 3 秒的介绍页面，然后是内容页面。当我按下后退按钮时，我会回到介绍屏幕，但我想我应该回到系统。怎么做？

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.ServiceModel.Syndication;
using System.Xml;
using Microsoft.Phone.Tasks;

namespace RSS {
    public partial class FeedPage : PhoneApplicationPage {
        public FeedPage() {
            InitializeComponent();
            this.Loaded += new RoutedEventHandler(PhonePage1_Loaded);
        }
        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) {
            clearBackStack();
            base.OnNavigatedTo(e);
        }

        void clearBackStack() {
            while (this.NavigationService.BackStack.Any()) {
                this.NavigationService.RemoveBackEntry();
            }
        }

        void PhonePage1_Loaded(object sender, RoutedEventArgs e) {
         //   clearBackStack();
            WebClient wc = new WebClient();
            wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
            wc.OpenReadAsync(new Uri("http://www.carmagazine.co.uk/Shared/Handlers/RssHandler.ashx?&N=190&Ns=P_Publication_Date|1&?"));
        }
        void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) {
            SyndicationFeed feed;
            try {
                using (XmlReader reader = XmlReader.Create(e.Result)) {
                    feed = SyndicationFeed.Load(reader);
                    lista.ItemsSource = feed.Items;
                }
            } catch (WebException we) { MessageBox.Show("Internet connection is down.");}
        }

        private void Button_Click(object sender, System.Windows.RoutedEventArgs e) {

            WebBrowserTask webBrowserTask = new WebBrowserTask();
            String url = (String)((Button)sender).Tag;
            webBrowserTask.Uri = new Uri(url);
            webBrowserTask.Show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:22:24.527

`OnNavigateTo`您应该在内容页面的方法中清除 BackStack

```
while (this.NavigationService.BackStack.Any())
{
   this.NavigationService.RemoveBackEntry();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:43:58.403

以下代码是后退按钮按键的最佳实践。

```
protected override void OnBackKeyPress(CancelEventArgs e)
    {
        while (NavigationService.CanGoBack)
            NavigationService.RemoveBackEntry();

        base.OnBackKeyPress(e);

    } 
```

这可确保您的应用程序在按下 BackKey 时退出并返回主屏幕。

# javascript - jquery get 方法不做任何事情，但是作为表单做（java servlet）

> ID：13712106
> 
> 赞同：0
> 
> 时间：2012-12-04T21:17:39.457
> 
> 标签：javascript, jquery, ajax, jsp, servlets

我有一个名为 index.jsp 的文件，用户在加载我的网站时会被定向到该文件。我想在加载页面时向我的一个 servlet 发送一个获取请求。

所以我一开始的网址是：localhost:8080/Test/

当 URL 为：localhost:8080/Test/MyServlet?action=fetchdata 时，servlet 将执行某些操作

如果在 html 正文中输入以下内容，我可以让 servlet 执行 fetchdata：

```
<form name="fetchdata" action="MyServlet" method="get">
    <input type='hidden' name='action' value='fetchdata' />
</form> 
```

然后运行一个脚本：

```
<script type="text/javascript">
    document.fetchdata.submit();
    var testresult = '${result}';
    document.write(testresult);
</script> 
```

然而，这看起来不太好，而且它也在 HTML 正文中，看起来非常不专业。因此，我尝试通过将其放在 HTML 头中来在 JQuery 中实现相同的功能：

```
window.onload = function() {
    $.get("MyServlet", { action : "fetchdata"}); 
}; 
```

当我加载页面时没有任何反应。我已经测试过 jQuery 正在工作。知道什么是错的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:20:22.490

试试这个：

```
$("form[name='fetchdata']").trigger('submit'); 
```

# .htaccess - 如何在包含目录名称的同时使用 .htaccess 重新格式化目录列表？

> ID：13712110
> 
> 赞同：0
> 
> 时间：2012-12-04T21:17:53.497
> 
> 标签：.htaccess, apache2

对于目录列表，我创建了一个通用 .htaccess 文件以及一个通用标题（“HeaderName /header.html”）。

一切正常，除了一件事：虽然我*不*想要“/blah 索引”的 derpy h1 版本，但我想显示它的自定义（和正常大小）版本，例如，“CurDir = /废话”。默认情况下，指定 HeaderName 会将所有内容替换为一些静态文本。

我尝试嵌入一些 PHP (getcwd())，但它只返回了 header.html 所在的根目录，无论显示的是什么子树。当然有一些方法可以访问 CWD 而不必在每个子文件夹中添加这样的控制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:25:42.963

在查看 phpinfo() 输出时，我偶然发现了一个合适的环境变量......但是人们是否有更好（更常见）的方式来处理这个问题，甚至可能不使用 PHP？

```
<?php
$dir = getenv("REQUEST_URI");
?> 
```

# python - 计算最终得分时的篮球比赛次数

> ID：13712111
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:17:57.567
> 
> 标签：python, recursion, dictionary, memoization

给定篮球比赛的最终得分，我如何计算导致最终得分的可能得分序列的数量。

每个得分可以是以下之一：3 分、2 分、1 分，由客队或主队得分。例如：

```
basketball(3,0)=4 
```

因为这些是 4 种可能的评分序列：

```
V3
V2, V1
V1, V2
V1, V1, V1 
```

并且：篮球（88,90）=2207953060635688897371828702457752716253346841271355073695508308144982465636968075

此外，我需要以递归方式并且没有任何全局变量（允许使用字典，并且可能是解决此问题的方法）此外，该函数只能将结果作为参数（篮球（m，n））。

对于那些要求解决方案的人：

```
basketballDic={}
def basketball(n,m):
    count=0;
    if n==0 and m==0:
        return 1;
    if (n,m) in basketballDic:
        return basketballDic[(n,m)]
    if n>=3:
        count+= basketball(n-3,m)
    if n>=2:
        count+= basketball(n-2,m)
    if n>=1:
        count+= basketball(n-1,m)
    if m>=3:
        count+= basketball(n,m-3)
    if m>=2:
        count+= basketball(n,m-2)
    if m>=1:
        count+= basketball(n,m-1)
    basketballDic[(n,m)]=count;
    return count; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:01:33.177

当您考虑递归算法时，您需要弄清楚两件事。

1.  什么是基本情况，递归在哪里结束。
2.  什么是递归情况。也就是说，如何从一个或多个先前的值计算一个值？

对于您的篮球问题，基本情况非​​常简单。当没有得分时，恰好有一组可能的篮子碰巧到达那里（它是空集）。所以`basketball(0,0)`需要返回1。

递归的情况考虑起来有点棘手。您需要逐步减少给定的分数，例如 (M,N)，直到达到 (0,0)，然后计算获得每个分数的不同方法。有六种可能的方式可以使得分从以前的任何值变为 (M,N)（每支球队的 1、2 和 3 分篮子），因此达到 (M,N) 的方式的数量是到达 (M-1,N), (M-2,N), (M-3,N), (M,N-1), (M,N-2) 和 ( M,N-3)。所以这些是您想要进行的递归调用（可能在进行一些边界检查之后）。

你会发现一个朴素的递归实现需要很长时间才能解决高分。这是因为它一遍又一遍地计算相同的值（例如，它可能计算出只有一种方法可以达到 (1,0) 数百次不同的分数）。记忆可以通过记住以前计算的结果来帮助防止重复工作。还值得注意的是，问题是对称的（获得 (M,N) 分数的方法与获得 (N,M) 分数的方法数量相同），因此您可以通过记住不仅目前的结果，也是它的逆转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:45:50.160

有两种方法可以做到这一点，而且都无法与您指定的输出相匹配。不太相关的方法是计算最大可能的得分次数。由于篮球有 1 分，这将始终等于我们`basketball()`函数的两个输入的总和。第二种技术是计算得分的最小次数。这可以通过递归轻松完成，如下所示：

```
def team(x):
    if x:
        score = 3

        if x < 3:
            score = 2
        if x < 2:
            score = 1

        return 1 + team(x - score)
    else:
        return 0

def basketball(x, y):
    return team(x) + team(y) 
```

这可以做得更简洁甚至更优雅吗？当然，但这应该为您正在研究的那种无状态的递归解决方案提供一个不错的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:33:20.500

> 尝试使用递归从给定的结果（每一个可能的播放 - 1,2,3 点）中减少，直到我达到 0，但为此我需要全局变量，我不能使用一个。

也许这就是你揭示你需要什么的地方。您可以通过传递当前计数和/或根据需要返回使用的计数（或剩余计数）来避免全局。

在您的情况下，我认为您只需将点传递给递归函数并让它返回计数。返回值将被添加，因此最终总数将随着递归展开而汇总。

## 编辑

我写了一个能够产生正确结果的函数。这个问题被标记为“memoization”，使用它可以**极大**地提升性能。没有它，相同的子序列将被一次又一次地处理。我使用装饰器来实现记忆。

我喜欢@Maxwell 对团队的单独处理，但这种方法不会产生您正在寻找的数字。（可能是因为您的原始措辞根本不清楚，所以我已经重写了您的问题描述）。我最终在一个函数中处理了 6 个家庭和访客评分的可能性。

我的计数是错误的，直到我意识到我需要计算的是我达到最终状态的次数。

## 解决方案

其他解决方案已发布。这是我的（不是很可读）单行：

```
def bball(vscore, hscore):
    return 1 if vscore == 0 and hscore == 0 else \
        sum([bball(vscore-s, hscore) for s in range(1,4) if s <= vscore]) + \
        sum([bball(vscore, hscore-s) for s in range(1,4) if s <= hscore]) 
```

实际上我在函数定义之前也有这一行：

```
@memoize 
```

我使用了 Michele Simionato 的[装饰器模块](http://micheles.googlecode.com/hg/decorator/documentation.html)和 memoize 示例。尽管正如@Blckknght 提到的那样，该函数是[可交换](http://en.wikipedia.org/wiki/Commutative_property)的，因此您可以自定义 memoize 以利用这一点。

虽然我喜欢通用记忆提供的关注点分离，但我也很想用（类似的东西）初始化缓存：

```
cache = {(0, 0): 1} 
```

并删除函数中对 0,0 args 的特殊情况检查。

# .htaccess - 使用 .htaccess 隐藏变量

> ID：13712117
> 
> 赞同：2
> 
> 时间：2012-12-04T21:18:12.090
> 
> 标签：.htaccess, friendly-url

好的，所以这在 IIS 中相对简单，但是我试图确保一切都在 Apache 上运行。

我需要把`http://domain.com/?page=about`（`page`变量和`about`信息在哪里）变成`http://domain.com/about`

我还希望自动更改所有链接（因此，如果链接是 for ，`?page=about`则将其更改为`about`.）

这可能比我做的简单，但对于我的生活，我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:38:50.777

> 但是，我希望它将 /?page=$1 的任何内容重定向到仅 /$1 以便 domain.com/?page=about 变成 domain.com/about

然后你需要添加这个：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?page=([^&\ ]+)
RewriteRule ^/?$ /%1? [L,R=301] 
```

# php - PHP从数组中计算启用的值变量

> ID：13712122
> 
> 赞同：2
> 
> 时间：2012-12-04T21:18:38.693
> 
> 标签：php, count

我有一个可以禁用或启用的值数组，所以我想知道有多少是启用的。这是一段代码：

```
$list = array(
$variable1,
$variable2,
$variable3,
$variable4
);
$count = count($list); 
```

感谢您的回复。

更新：这些值不是真或假，而是启用/禁用。你的回答适用于这种情况吗？再次感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T21:21:52.937

如果唯一有效的选项是布尔值 TRUE 和 FALSE，那么

```
$countTrue = array_sum($list); 
```

**编辑**

使用“启用”和“禁用”作为可能的值：

```
$countTrue = array_reduce(
    $list,
    function($counter, $value) {
        return $counter + ($value == 'ENABLE');
    },
    0
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T21:21:53.973

只需使用`array_filter`

```
$list = array(true,false,true,true);
$count = count(array_filter($list));
echo $count ; 
```

或者

```
$list = array("Enable","DISABLE","ENabLE","ENABLE");
$count = count(array_filter($list,function($v) { return stripos($v, "enable") !== false; } ));
echo $count ; 
```

`ENABLE`并且`DISABLE`是长字符串，但它们分别以`E`&开头，`D`您可以使用它来计数

```
$count = array_reduce($list,function($a,$b){$b{0} == "E" and $a++ ;return $a;},0);
echo $count ; 
```

他们都会输出

```
3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:23:39.767

```
$array = array('ENABLED', 'DISABLED', 'ENABLED', 'ENABLED', 'ENABLED', 'DISABLED');
$count = array_count_values($array); 
```

会产生

```
array(2) {
  ["ENABLED"]=>int(4)
  ["DISABLED"]=>int(2)
} 
```

所以你可以使用它来调用它

```
$count["ENABLED"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:22:01.110

只需遍历数组并计算它们。

```
$trueValues = 0;
foreach ($list as $listItem)
{ 
  if ($listItem)
    $trueValues++;
}

echo "Array has ".$trueValues." TRUE items); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T21:38:46.153

```
$list = array('ENABLE','DISABLE','ENABLE','ENABLE');   

function countTrues($n)
{
    if ($n == 'ENABLE'){return $n;}
}

$x = array_filter($list , "countTrues");

$count =  count($x); 
```

这应该可以解决问题

# ios - iOS 应用解析 - AIR

> ID：13712124
> 
> 赞同：0
> 
> 时间：2012-12-04T21:18:46.943
> 
> 标签：ios, ipad

我刚刚使用 AIR 和 AS3 为 iPad 完成了一个 iOS 应用程序，但 Apple 拒绝了它，因为该应用程序出现在左上角只占屏幕的 1/4。我假设是因为他们已经使用带有视网膜显示屏的 iPad 进行了测试。我没有为视网膜开发应用程序，所以有没有办法仍然为正常和视网膜使用相同的代码和资产？

谢谢

# sql - SQL - 表连接后计数

> ID：13712129
> 
> 赞同：1
> 
> 时间：2012-12-04T21:19:02.790
> 
> 标签：sql, join, count, sqlplus

我正在做课堂作业，似乎在一个问题上遇到了一些麻烦。这个问题需要我两个连接 3 个表并计算每行的出现总数。

这是我到目前为止的连接命令（需要弄清楚我可以在哪里放置一个嵌套计数（不同）：

```
SELECT litwork.btitle,
       bookcopy.copy_num,
       request.rdate
FROM   litwork,
       bookcopy,
       request
WHERE  litwork.lit_id = bookcopy.lit_id
       AND bookcopy.persidh = request.persid
ORDER  BY btitle; 
```

连接给了我这个表作为结果：

```
BTITLE           COPY_NUM        RDATE
--------------- --------------  -------
Bankers          2                18-oct-2012
Bankers          2                30-oct-2012
Blue Ridge       1                20-oct-2012
Linux            1                18-oct-2012
Linux            1                30-oct-2012
My Life          3                31-oct-2012
O-O Design       1                30-oct-2012
O-O Design       3                25-oct-2012
O-O Design       3                18-oct-2012 
```

那么我将如何为该命令中的所有三列进行计数（不同）？我正在使用标准 SQL

编辑以添加问题提示（复制并粘贴）：

显示每本书的请求数量和副本数量。显示书名、请求数、书本数。按标题顺序显示。此问题的 SQL 查询将连接与计数混合在一起。要理解这样的查询，请注意必须在 count 函数之前处理连接。

另请注意，连接可能会创建重复数据，因此您应该在需要时使用 count(distinct ..) 形式的计数。（建议：如果您对这个问题有疑问，请查看没有计数和组的连接结果，并弄清楚如果这些结果是现有表的数据，您将如何执行所需的计数。请不要显示这个额外的查询在你的报告中。）。

假设：给定客户可能对同一本书的请求不超过一个。请注意，将表 REQUEST 与表 BOOK_COPY 连接时，给定书出现的行数是对该书的请求数的乘积以及份数。

更新：它仍然不是 100% 正确..

用于连接的附加表（第一个是 LITWORK 表，第二个是 REQUEST 表，最后一个是 BOOKCOPY 表）

```
 LIT_ID BTITLE                YEAR
---------- --------------- ----------
      1001 The Trojans           2000
      1002 My Life               2001
      1003 Nature                1998
      1004 Blue Ridge            1996
      1005 True Java             2012
      1006 CPlus                 2004
      1007 Streaming             2000
      1008 MyApps                1998
      1009 O-O Design            2012
      1010 Camping               1978
      1011 Bankers               1970
      1012 Linux                 1962

    LIT_ID     PERSID BNAME    RDATE            RTIME
---------- ---------- -------- ----------- ----------
      1001         11 College  18-oct-2012
      1001          7 College  25-oct-2012
      1003          8 La Jolla 20-oct-2012
      1005          7 Pacific  18-oct-2012
      1008         11 Atlantic 30-oct-2012
      1008          1 College  30-oct-2012
      1012          4 La Jolla 31-oct-2012

    LIT_ID   COPY_NUM PERSID_OUT DATE_OUT    DATE_DUE       PERSIDH HDATE       BNAMEP   BNAMEC
---------- ---------- ---------- ----------- ----------- ---------- ----------- -------- --------
      1001          1          4 13-sep-2012 27-nov-2012                        La Jolla
      1002          1                                                           Pacific  Atlantic
      1002          2          1 02-sep-2012 12-oct-2012                        Pacific
      1002          3                                             4 15-nov-2012 La Jolla La Jolla
      1003          1          9 10-dec-2012 30-dec-2012                        Pacific
      1003          2          1 13-dec-2012 22-jan-2013                        La Jolla
      1003          3                                                           Atlantic Atlantic
      1004          1                                             8 19-nov-2012 Pacific  College
      1004          2          4 04-dec-2012 17-feb-2013                        Pacific
      1004          3         10 11-oct-2012 31-oct-2012                        Atlantic
      1005          1          4 27-oct-2012 10-jan-2013                        La Jolla
      1005          2          1 19-sep-2012 29-oct-2012                        Pacific
      1006          1          7 29-jan-2012 09-mar-2012                        Pacific
      1006          2          1 07-jan-2012 16-feb-2012                        College
      1006          3                                                           Pacific  College
      1007          1          1 26-oct-2012 05-dec-2012                        Pacific
      1007          2                                                           Pacific  College
      1007          3          6 15-oct-2012 04-nov-2012                        La Jolla
      1008          1          4 23-oct-2012 06-jan-2013                        College
      1008          2          3 15-oct-2012 24-nov-2012                        Pacific
      1009          1                                             1 20-nov-2012 Pacific  Pacific
      1009          2         11 28-sep-2012 12-dec-2012                        Pacific
      1009          3                                             7 22-nov-2012 La Jolla College
      1010          1          1 01-sep-2012 11-oct-2012                        Pacific
      1011          1          4 31-jan-2012 15-apr-2012                        La Jolla
      1011          2                                            11 20-nov-2012 College  La Jolla
      1012          1                                            11 19-nov-2012 Pacific  Atlantic
      1012          2          3 29-oct-2012 08-dec-2012                        Pacific 
```

**这是我当前的 SQL 命令（不是我从 Gordon Linoff 的评论中得到的那个——它给了我 2-3 额外的行）**

```
select   litwork.btitle, 
         count(distinct bookcopy.copy_num), 
         count(distinct request.rdate)
from     litwork, 
         bookcopy, 
         request 
where    litwork.lit_id=request.lit_id and
         bookcopy.persidh=request.persid 
group by btitle; 
```

这给了我这张表（你可以看到我有所有正确数量的行[当你取出重复项时]，但计数是错误的）

```
BTITLE          COUNT(DISTINCTBOOKCOPY.COPY_NUM) COUNT(DISTINCTREQUEST.RDATE)
--------------- -------------------------------- ----------------------------
Linux                                          1                            1
MyApps                                         2                            1
Nature                                         1                            1
The Trojans                                    3                            2
True Java                                      1                            1 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-04T23:34:58.640

以下内容应适用于 Oracle 的 SQL *Plus：

```
select litwork.btitle, count(distinct bookcopy.copy_num), count(distinct request.rdate)
from litwork, bookcopy, request
where litwork.lit_id = request.lit_id and request.lit_id = bookcopy.lit_id(+)
group by litwork.btitle; 
```

有关联接的更多信息，请参阅[Oracle SQL*Plus Pocket Reference, 2nd Edition](http://oreilly.com/catalog/orsqlpluspr2/chapter/ch01.html)。

计数问题的可能解决方案：

*   更改`count(distinct request.rdate)`为`count(distinct request.PERSID)`。
*   更改`count(distinct request.rdate)`为`count(distinct request.*)`。
*   更改`count(distinct request.rdate)`为`sum(case when request.rdate is null then 0 else 1 end)`
*   `(select lit_id, count(*) as requestCount from request group by lit_id)`您可以加入然后选择 requestCount ，而不是加入请求表。

这可能是我能做的最好的事情，因为我没有字段的详细定义以及它们之间的关系。如果我有预期的结果和 SQL *Plus 来测试它，这也会有所帮助。

# java - 当我使用 lsof 命令查看特定文件描述符时，如何找出它的来源？

> ID：13712130
> 
> 赞同：0
> 
> 时间：2012-12-04T21:19:04.060
> 
> 标签：java, linux, lsof

基本上我输入 lsof 并且我有一堆文件描述符，它们具有以下内容：

```
COMMAND  PID     FD      TYPE  NODE      NAME
java     564     487u    IPv4  TCP       vm3:8003->website.com:5646 (CLOSE_WAIT)
java     564     492u    IPv4  TCP       vm3:8003->website.com:5646 (CLOSE_WAIT) 
```

而且我无法弄清楚文件描述符泄漏的来源。无论如何，我可以使用 FD`487u`来进一步检查程序中泄漏的来源吗？有关 FD 的任何信息都会有所帮助。如果您需要更多信息，请告诉我。

# python - 使用 Python 从 KML BatchGeo 文件中提取坐标

> ID：13712132
> 
> 赞同：7
> 
> 时间：2012-12-04T21:19:09.810
> 
> 标签：python, lxml, geocoding, kml, pykml

我已将一些地址上传到 BatchGeo 并下载了我想要从中提取坐标的结果 KML 文件。我设法在[此处](http://jsbeautifier.org/)在线美化了混乱的文本文件，但我不知道如何解析它以提取坐标。

```
<?xml version="1.0" ?>
<kml xmlns="http://earth.google.com/kml/2.0">
    <Document>
        <Placemark>
            <name>...</name>
            <description>....</description>
            <Point>
                <coordinates>-3.1034345755337,57.144817425039,0</coordinates>
            </Point><address>...</address>
            <styleUrl>#0</styleUrl>
        </Placemark>
    </Document>
</kml> 
```

似乎有几个用于 python 的 kml 库，但文档方式不多（例如[pyKML](http://packages.python.org/pykml/)）。使用本教程，我已经做到了这一点并创建了一个“lxml.etree._ElementTree”对象，但我不确定它的属性：

```
from pykml import parser

kml_file = "BatchGeo.kml"

with open(kml_file) as f:

    doc = parser.parse(f)

coordinate = doc.Element("coordinates")
print coordinate 
```

这给出了错误：

```
AttributeError: 'lxml.etree._ElementTree' object has no attribute 'Element' 
```

那么如何获得坐标列表呢？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T04:19:41.547

```
from pykml import parser

root = parser.fromstring(open('BatchGeo.kml', 'r').read())
print root.Document.Placemark.Point.coordinates 
```

请参阅[pykml 文档](http://packages.python.org/pykml/tutorial.html#parsing-existing-kml-documents)

希望有帮助！

# wordpress - wordpress 主题无法从本地正确导入到在线

> ID：13712134
> 
> 赞同：3
> 
> 时间：2012-12-04T21:19:21.660
> 
> 标签：wordpress

嗨，我目前正在本地服务器上离线开发一个 Wordpress 站点，并希望在线上传到我的域。我不需要转移数据库，但我希望我的页面、主题、小部件能够正常工作。我在做什么：

*   通过 ftp 将 Wordpress 目录复制到域目录。
*   在本地服务器 Wordpress 中导出所有内容并在
    在线 Wordpress 中导入。

我的所有页面/帖子都已转移，并且我的主题已安装但未设置为默认值。当我选择它时，一切都设置为主题的原始默认值，而不是像在本地服务器上更改（例如标语、背景等）。小部件也是默认设置。

难道我做错了什么？我正在使用 Wordpress 3.4.2 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:29:05.560

是的，您刚刚忘记了您的主题的某些选项实际上存储为 WordPress 选项，因此如果您不上传数据库，您将不会传输这些设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:31:26.223

我写了一个教程，逐步解释如何将 WordPress 网站转移到另一台服务器：[http ://www.sebastianbroways.com/wordpress-transfer/](http://www.sebastianbroways.com/wordpress-transfer/)

如果您按照每个步骤操作，该站点应保留所有设置，包括模板首选项。祝你好运。

# java - Java Applet 应用程序错误

> ID：13712138
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:19:28.920
> 
> 标签：java, applet

我在尝试使用浏览器查看小程序时收到此错误。以前有人遇到过这个问题吗？![在此处输入图像描述](../Images/78eacc21bb1dc15774a88e58a716f84d.png)

这是保存为 index.html 的 HTML 文件。我在starApplet.class 文件所在的bin 文件夹中使用eclipse 创建了它。

```
<html>
<applet code="starApplet.class" width="500" height="500">
</applet>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:44:35.820

我不知道你的文件名是对还是错，但假设是对的，你必须删除 .class 扩展名：

```
<html>
    <applet code="starApplet" width="500" height="500">
    </applet>
</html> 
```

# jquery - 每次触发警报 - jQuery 自动完成

> ID：13712139
> 
> 赞同：0
> 
> 时间：2012-12-04T21:19:47.150
> 
> 标签：jquery

在下面的 jQuery 中，每次用户在文本框中键入时都会显示警报“fire”，但应该只在用户键入与“test”匹配的字母时触发。如何更新下面的代码，以便在匹配时触发警报，而不是每次用户键入时触发？

选择一个项目（输入“j”开始）：

```
$(function() {

    $( "#project" ).autocomplete({
        minLength: 0,
 source: "/getfile?param=testerurl",
        focus: function( event, ui ) {
            $( "#project" ).val( ui.item.label );
            return false;
        },
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        alert('fire');
    }; 
```

});

这是由返回的 json

> /getfile?param=testerurl

```
[{ "value": "test","label": "Sizzle JS","desc": "a pure-JavaScript CSS selector engine","icon": "sizzlejs_32x32.png"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:36:05.610

_renderItem 用于编辑/操作/样式化服务器返回的 json，因此每次返回响应时都会触发。

jquery 参考在这里 => [http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

这里有一个工作示例=> [http://jsfiddle.net/GtjEv/](http://jsfiddle.net/GtjEv/)

```
 .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
                .appendTo( ul );
        } 
```

# objective-c - 缺少安装 Reskit 和 libRestKit.a（红色文本）

> ID：13712143
> 
> 赞同：2
> 
> 时间：2012-12-04T21:20:09.203
> 
> 标签：objective-c, ios, restkit

我完全按照 RestKit 设置说明进行操作，但我在 Linked Binary With Libraries 中得到了红色的 libRestKit.a。

安装说明： [https ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

我会尝试将 libRestKit.a 文件拖到我的项目中，但在 Restkit 下载的任何地方都找不到它？

有人遇到这个问题吗？

运行 Xcode 4.5.2

更新：见下面的评论。现在我收到#import 的“找不到文件”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:42:54.533

解决方案*不是*从任何网页复制“$(BUILT_PRODUCTS_DIR)/../../Headers”。输入它，因为 Xcode 不喜欢“复制和粘贴”。我只是用手动输入替换了“复制和粘贴”，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:06:49.153

您可以尝试使用 CocoaPods 安装 RestKit，然后像这样包含：#import "RestKit/RestKit.h"

在此处查看如何使用 cocoapods 和 restkit： [https ://stackoverflow.com/a/13762665/1848750](https://stackoverflow.com/a/13762665/1848750)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:14:08.660

如果您收到“找不到文件”错误，请检查您的项目设置。

*   文件 > 项目设置
*   派生数据位置 > “项目相关”
*   选择“高级”
*   选择“唯一”
*   清洁和建造

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T22:11:10.653

“.a”文件在构建之前不存在。如果你完美地遵循了这些指示，我猜你已经将 RestKit 项目嵌入到你自己的项目中，是吗？

这是说明中的图像；您需要执行的关键步骤（前提是您已将 RestKit.xcodeproj 正确添加到您自己的项目中）。您需要将 .a 文件（尚不存在，但一旦构建就会）作为目标依赖项添加到您自己的应用程序。

![确保将其添加为目标依赖项](../Images/1a2fe6ee713e8a07a10103c46b80e893.png)

# websphere - 如何连接到 WebSphere 7 管理控制台，或者如果它没有启动如何查看错误日志？

> ID：13712154
> 
> 赞同：7
> 
> 时间：2012-12-04T21:20:49.500
> 
> 标签：websphere

我在本地安装了 IBM RAD / WebSphere 7。我正在开发的 Web 应用程序运行良好。

我正在尝试登录 WAS 管理控制台。

在“服务器”视图中，我右键单击服务器 > 管理 > 运行管理控制台 ...但我得到一个“找不到网页”错误页面。

在 Firefox 中，我尝试浏览到管理控制台 URL，我尝试了以下各项但没有运气：

```
http://localhost:9091/ibm/console/logon.jsp
http://localhost:9091/ibm/console/
http://localhost:9060/ibm/console/
http://localhost:9060/admin 
```

任何想法 URL 是什么？

或者，或者，如果管理控制台由于某些错误而没有启动，是否有一个日志文件可以在某处找到错误？

任何帮助是极大的赞赏！

抢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T21:47:58.377

其中第三个通常是正确的，但端口号取决于配置文件创建过程中发生的情况。找到配置文件目录，然后在属性目录中查找 portdefs.props 文件。这将告诉您正确的端口号应该是什么。

可以在没有管理控制台应用程序的情况下创建配置文件，在这种情况下它显然永远不会工作。您还可以尝试从配置文件 bin 目录运行 wsadmin 以查看是否可以通过这种方式连接到管理服务。

来自管理控制台应用程序的任何错误都将在profiles/profilename/logs/servername 目录中的普通日志文件中报告。

# c - 在 c 中实现流密码

> ID：13712158
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:21:21.187
> 
> 标签：c, encryption, mersenne-twister

我想实现以下功能：

*   我正在使用 Mersenne-Twister-Algorithm（来自 Wikipedia）作为我的伪随机数生成器。
*   这是一个流密码
*   伪代码为：密文=CLEARTEXT XOR STREAM；“流”被定义为 PSEUDORANDOM_NUMBER XOR KEY

我写了以下函数：

```
int encrypt(char clear[1000], char key[100], int lk/*length of the cleatext*/, int ls /*length of key*/) {
  int a, i;
  unsigned char result[1000];
  char string[1000];

  for (i = 0; i <= lk; i++) {
    if (i+1-ls >= 0) {          /*if the key is too short*/
      a = mersenne_twister();
      string[i]=key[i+1-ls]^a;      /*XOR */
    } else {
      a=mersenne_twister();
      string[i] = key[i]^a;     /*XOR */
    }
  result[i] = clear[i]^string[i];
  putchar(result[i]);
  }

  return 1;
} 
```

但该功能不能正常工作；它返回（`putchar`部分）不可读的东西。我的错误在哪里？还是整个代码错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:28:18.307

如果你试图`xored`用其他东西打印一个字符，你真的会经常得到奇怪的字符。例如，将“M”与“P”异或将导致“\GS”（组分隔符），这是不可打印的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:44:26.537

不要将结果打印为字符。它*不是*一个字符：你已经对一个带有一些伪随机字节的字符进行了异或运算。结果是一个字节。碰巧，它可能是可打印的，但话又说回来，它可能不是。您应该按原样处理结果，一个字节，并按如下方式打印：

```
/* format a byte as 2 hex digits */
printf("%02X", result[i]); 
```

我还要添加一个警告：不要*使用*这个“密码”。Mersenne twister 不是加密安全的随机数生成器，生成的密码也不安全。

如果您想学习流密码，请从简单的 Vernam 密码开始，然后阅读 RC4。两者都易于理解且易于实施。因此，可以这么说，它们有利于弄湿你的脚。

# jquery - 使用 Jquery 移动 css 顶部位置

> ID：13712161
> 
> 赞同：2
> 
> 时间：2012-12-04T21:21:41.167
> 
> 标签：jquery, css

以下代码似乎不起作用。我将如何更改它以使 div 从顶部更改位置？

```
 div { width:220px; height:170px; margin: 10px 50px 10px 10px;
    background:yellow; border:2px groove; float:right; }

 #alt { width:20px; height:170px; margin: 10px 50px 10px 10px;
        background:blue; border:2px groove; float:right; }

  #altLevel { width:10px; height:20px; 
        background:red; border:2px groove;  }

$('div').mouseclick(function() {
$( '#altLevel').css( 'top', '+=10' );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:24:51.313

您必须先添加`position:absolute`或添加`position:fixed`到样式中，`#altLevel`然后才能更改其位置。此外，给它一个默认位置`top:0`或任何你喜欢的位置：

```
#altLevel { 
    width:10px; height:20px; 
    position:absolute; top:0;
    background:red; border:2px groove;  
} 
```

一旦你这样做了，你的 JavaScript 应该可以通过一个小的修改来工作：

```
$('div').click(function() {
    $('#altLevel').css('top', '+=10');
});​ 
```

[http://jsfiddle.net/mblase75/mGAKe/](http://jsfiddle.net/mblase75/mGAKe/)

# forms - 将占位符添加到重力形式

> ID：13712163
> 
> 赞同：0
> 
> 时间：2012-12-04T21:21:44.457
> 
> 标签：forms, html, wordpress, placeholder, gravity

有没有办法将 HTML5 占位符添加到重力表单？我尝试了许多插件，但它们似乎都不起作用。

重力形式：[http](http://www.gravityforms.com/) ://www.gravityforms.com/ 一个插件（不起作用）：[http](http://wordpress.org/extend/plugins/gravity-forms-auto-placeholders/changelog/) ://wordpress.org/extend/plugins/gravity-forms-auto-placeholders/changelog/ 另一个：[http:// /wordpress.org/extend/plugins/gravity-forms-placeholders/](http://wordpress.org/extend/plugins/gravity-forms-placeholders/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:39:32.013

是的，请在以下线程上查看我的答案： [我可以定义自己的表单标记并映射到使用重力表单（wordpress 插件）生成的表单吗？](https://stackoverflow.com/questions/13341521/can-i-define-my-own-form-markup-and-map-with-to-the-form-generated-using-gravity/13366627#13366627)

这将为文本输入添加一个额外的字段，允许占位符文本。很容易实现，基本上是在functions.php文件中添加一些代码。

# javascript - 根据单选按钮显示 div

> ID：13712168
> 
> 赞同：0
> 
> 时间：2012-12-04T21:21:55.820
> 
> 标签：javascript, jquery

我的单选按钮：

```
<input type="radio" name="radio-269" value="Purchase Only" />
<input type="radio" name="radio-269" value="Sale Only" />
<input type="radio" name="radio-269" value="Purchase and Sale" /> 
```

然后我的div：

```
<div id="sale">
SALE!
</div>

<div id="purchase">
PURCHASE!
</div> 
```

最后我现在的javascript：

```
<script>
$("input[name='radio-269']").change(function() {
    if ($(this).val() == "Purchase and Sale") {
       $('#purchase').removeClass("hidden");
    }
    else {
        $('#purchase').addClass("hidden");
    }
    if ($(this).val() == "Purchase Only" || $(this).val() == "Sale Only") {
       $('#purchase').removeClass("hidden");
    }
    else {
        $('#purchase').addClass("hidden");
    }
});
</script> 
```

如何更改它，以便发生以下情况：

*   当显示“仅购买”单选时，只有 div id“购买”可见
*   当显示“仅限销售”单选时，只有 div id“销售”可见
*   当电台“Purchase and Sale”时，div id“purchase”和“sale”都可见

有人可以告诉我修改我的javascript以实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:29:23.677

在您的示例中，您的电线似乎有些交叉。这应该有效：

```
$("input[name='radio-269']").change(function() {

   if ($(this).val() == "Purchase Only") {
      $('#purchase').removeClass("hidden");
      $('#sale').addClass("hidden");
   }
   else if ($(this).val() == "Sale Only") {
      $('#sale').removeClass("hidden");
      $('#purchase').addClass("hidden");
   }
   else if ($(this).val() == "Purchase and Sale") {
      $('#sale').removeClass("hidden");
      $('#purchase').removeClass("hidden");
   }
});​ 
```

这是一个显示它工作的 JS Fiddle：http: [//jsfiddle.net/yYBSV/1/](http://jsfiddle.net/yYBSV/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:30:00.617

您可以使用**HTML-5** `data-attributes`来保存相应的 id'

```
<input type="radio" name="radio-269" value="Purchase Only" data-id="#purchase" />
<input type="radio" name="radio-269" value="Sale Only" data-id="#sale" />
<input type="radio" name="radio-269" value="Purchase and Sale" 
                                               data-id="#purchase,#sale"  />

<div id="sale">
SALE!
</div>

<div id="purchase">
PURCHASE!
</div> 
```

**JS**

```
$("input[name='radio-269']").change(function() {
    $('div').hide();
    var id = $(this).data('id');
    $(id).show();
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/nSeag/1/)** </p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:30:28.200

将您的 javascript 更改为：

```
$("input[name='radio-269']").change(function() {
    $('#sale, #purchase').removeClass("hidden");

    if ($(this).val() == "Purchase Only") {
       $('#sale').addClass("hidden");
    }
    if($(this).val() == "Sale Only") {
        $('#purchase').addClass("hidden");
    }
}); 
```

这是一个 jsFiddle：http: [//jsfiddle.net/scaillerie/2meM5/](http://jsfiddle.net/scaillerie/2meM5/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:31:34.933

似乎您只需要修改您的 if/else 语句即可使您的代码正常工作。尽管我建议不要使用 val() 和纯文本来进行检测。如果您更改了 html 值，代码将会中断。（它发生的频率比你想象的要多）

解决方案应该看起来像这样：

```
$("input[name='radio-269']").change(function() {
if ($(this).val() == "Purchase and Sale") {
   $('#purchase').show();
   $('#sale').show();
}else if ($(this).val() == "Sale Only") {
   $('#purchase').hide();
   $('#sale').show();
}else if ($(this).val() == "Purchase Only") {
   $('#purchase').show();
   $('#sale').hide();
}
});​ 
```

# jquery - 将外部数据（多个字段）加载到 Twitter Bootstrap 模式中

> ID：13712172
> 
> 赞同：2
> 
> 时间：2012-12-04T21:22:00.473
> 
> 标签：jquery, twitter-bootstrap

这是我的第一个引导程序/jQuery 应用程序。

我有一个应用程序可以显示一个人的多个地址，每个地址都可以通过编辑按钮进行编辑。

我想不出一种方法来单击“编辑”，然后让 ajax 调用脚本来从数据库中加载特定数据，然后将其放置在 twitter 模式窗口中。

编辑按钮代码为：

```
a class="btn btn-small open-EditAddress" data-toggle="modal" data-id="#custom.addr_id#"         href="##edit_address_modal"><i class="icon-pencil"></i> Edit</a> 
```

每个编辑按钮都会传递`Addr_id`，然后会触发一个 twitter 模式窗口，其中填充了数据以进行编辑。

我有模态编辑触发，但不确定下一步将外部数据加载到模态中以进行更新。

![http://i.imgur.com/5ig3k.jpg](../Images/376dc3a53c6a0a6f452fce4338558087.png)

![http://i.imgur.com/Oi98S.jpg](../Images/a5e3376be9c6a2805600a51c3654738e.png)

任何人都可以协助 jQuery 调用外部数据并将其加载到模式中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:59:48.157

将您的链接更新`Edit`为如下所示，以便在单击时不会触发显示模式：

```
<a class="btn btn-small open-EditAddress" data-id="#custom.addr_id#" href="/ControllerName/ActionNameToGetAddressInfo/[locationId]" data-ajax="true" data-ajax-mode="replace" data-ajax-update="#ModalEditAddress"><i class="icon-pencil"></i> Edit</a> 
```

您不想这样做，因为您将在加载表单后通过 JQuery 单独触发它。还要注意所有这些额外的数据属性。他们将启用 ajax 调用以使用所需信息填充您的模态 div。

在页面的某个地方你应该有你的*模态*元素：

```
<div id="ModalEditAddress" class="modal hide fade">
</div> 
```

它是空的，因为它将填充对以下操作的 ajax 调用：

```
public ActionResult ActionNameToGetAddressInfo(int id) // locationId
{
    var model = [get all the address information from DB or however you get it];
    return View("~/Views/[ControllerName]/_EditAddress.cshtml", model);
} 
```

这是您的部分观点`_EditAddress.cshtml`：

```
 @using(Ajax.BeginForm("[ActionNameToSaveAddress]","[ControllerName]", new AjaxOptions{...}))
    {
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Edit Address</h3>
        </div>
        <div class="modal-body">
            [all the form related inputs]
        </div>
        <div class="modal-footer">
            <input type="submit" value="Save Address" />
        </div>
    }
    <script type="text/javascript">
        $('#ModalEditAddress').modal('show');
    </script> 
```

到目前为止，当您单击编辑链接时，它会触发一个 Ajax 调用 Action`ActionNameToGetAddressInfo`并将其结果放入`div`with 中`id="ModalEditAddress"`。发生这种情况时，它将在局部视图的最底部运行脚本并显示模式。

您将不得不编写另一个动作来保存地址和一些 JQuery 来在保存时隐藏模式。

这都是伪代码，因此可能需要对其进行一些调整才能正常工作。

# ruby - jekyll 的崇高文本构建系统

> ID：13712173
> 
> 赞同：1
> 
> 时间：2012-12-04T21:22:02.483
> 
> 标签：ruby, development-environment, sublimetext2

我正在尝试以崇高的文本为 Jekyll gem 构建系统。在我的崇高项目中，我有以下内容：

```
 "build_systems":
  [
    {
      "name":"jekyll",
      "cmd":"/Users/kaass/.rvm/gems/ruby-1.9.3-p327/bin/jekyll",
      "shell":true,
      "path":"/Users/kaass/.rvm/bin/rvm-auto-ruby",
      "working_dir":"$project_path"
    }
  ] 
```

我已经尝试过使用`env`上面的不同选项，但总是会遇到与`ruby`或未`jekyll`找到或`env: ruby_noexec_wrapper not found`

我正在运行 10.8.2 和我的路径：

```
kaass:~ kaass$ echo $PATH
/Users/kaass/.rvm/gems/ruby-1.9.3-p327/bin:/Users/kaass/.rvm/gems/ruby-1.9.3-p327@global/bin:/Users/kaass/.rvm/rubies/ruby-1.9.3-p327/bin:/Users/kaass/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/bin:/usr/X11R6/bin 
```

我试图调用的所有内容都已经在我的路径中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:42:09.243

我在正确的 rvm 环境中运行 rake 时遇到了类似的问题。这是我最终得到的崇高项目文件：

```
{
  "folders":
  [
    {
      "path": "data"
    }
  ],
  "build_systems":
  [
    {
      "name": "rake",
      "cmd": "source ~/.rvm/environments/ruby-1.9.3-p194@mygemset && rake",
      "shell": true,
      "path": "/bin:/usr/bin:/usr/local/bin:~/.rvm/bin",
      "working_dir": "$project_path"
    }
  ]
} 
```

诀窍是将 ~/.rvm/bin 添加到路径并获取 rvm gemset 的环境。然后我什至可以在不指定完整路径的情况下使用“rake”命令。其余的都是直截了当的。

# django - 使用 Django 和 Webtest 测试图像上传

> ID：13712183
> 
> 赞同：6
> 
> 时间：2012-12-04T21:22:59.440
> 
> 标签：django, tdd, webtest, django-webtest

有谁知道我如何使用 WebTest 测试图像上传。我目前的代码是：

```
form['avatar'] =('avatar', os.path.join(settings.PROJECT_PATH, 'static', 'img', 'avatar.png'))
res = form.submit() 
```

在响应中，我收到以下错误“上传有效图像。您上传的文件不是图像或损坏的图像。”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T22:19:15.030

权力是对的。不幸的是（或没有）我花了半个小时调试 webtest 后找到了他的答案。这是更多信息。

尝试仅传递文件的路径会给您带来以下异常：

> webtest/app.py"，第 1028 行，在 _get_file_info
> 
> ValueError:upload_files 需要是 (fieldname, filename, filecontent) 或 (fieldname, filename) 的元组列表；你给了： ...

问题是它没有告诉你它会自动将字段名称附加到元组发送并将 3 项元组变成 4 项元组。最终的解决方案是：

```
avatar = ('avatar',
           file(os.path.join(settings.PROJECT_PATH, '....', 'avatar.png')).read()) 
```

太糟糕了，没有像样的例子，但我希望这对其他人也有帮助）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-10T10:47:11.900

如今选择的答案对我没有帮助。

但我找到了在 .submit() 方法 args 中提供预期文件的方法

```
form.submit(upload_files=[('avatar', '/../file_path.png')]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-11T11:22:27.667

使用 Python 3：

```
form["avatar"] = ("avatar.png", open(os.path.join(settings.PROJECT_PATH, '....', 'avatar.png', "rb").read()) 
```

# apache-flex - Adobe Flex - 竞争条件错误？

> ID：13712184
> 
> 赞同：0
> 
> 时间：2012-12-04T21:23:06.480
> 
> 标签：apache-flex, actionscript, adobe, mxml

我在与 Adob​​e Flex 应用程序交互时遇到了问题。但是，在调试模式下，我无法重现该问题。

`DataGrid`当单独的文本框（选择）更改时， 我正在更新 Flex 。

基于与设置文本框时的值相关的标志值：

如果 flag == true，我添加一个额外`DataGridRow`的类型 T 到`DataGrid`（如果它不存在）如果 flag == false，我删除`DataGridRow`类型 T 如果它已经存在。

这似乎在大约 95% 的情况下有效。我的应用程序达到了某个点，即使该文本框的标志设置为 true，`DataGridRow`也不会添加，即使它应该添加。一旦达到这一点，每次从这一点开始，文本框中此值的标志都不再导致`DataGridRow`添加。

有没有人在调试这个问题上有任何想法或建议？

# c++ - 除了 Qt 中的单选按钮之外，是否有类似 gui 元素的开关

> ID：13712196
> 
> 赞同：1
> 
> 时间：2012-12-04T21:23:49.843
> 
> 标签：c++, qt, user-interface

我正在寻找 Qt 中类似 gui 元素的开关。[它在使用 QML](http://qt-project.org/doc/qt-4.8/declarative-ui-components-slideswitch.html)时确实存在，但我想远离 QML 关注项目。我只需要在两种选择之间切换，所以单选按钮不是很合适。gui 应该看起来像这样（不完全是为了更清楚）

```
 [A o--|    B] 

 [A    |--o B] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:54:21.673

您可以使用[QSlider](http://doc.qt.digia.com/qt/qslider.html)，将其最小值设置为 0，将最大值设置为 1，将步骤设置为 1，这样只有两个值是可能的。

# facebook - Trigger.io forge.facebook.ui 不返回数据

> ID：13712199
> 
> 赞同：1
> 
> 时间：2012-12-04T21:24:12.167
> 
> 标签：facebook, trigger.io

> **可能重复：**
> [forge.facebook.ui 回调从未运行](https://stackoverflow.com/questions/13516726/forge-facebook-ui-callback-never-run)

我正在尝试使用 Trigger.io 的 facebook 方法来显示朋友选择器。它正确显示但从不返回任何数据。

`response``null`即使选择了朋友也总是如此。[根据 Facebook 文档](https://developers.facebook.com/docs/reference/dialogs/requests/)，它应该返回`request`和`to`字段，以便我可以捕获请求发送给谁。

这是一些示例代码：

```
forge.facebook.ui({
    method: 'apprequests',
    title: 'Create Game',
    message: 'I challenge you to a game!'
}, function(response) {
    console.log('success response');
    console.log(''+response); // As string because logging null errors Catalyst
}); 
```

为此，催化剂输出

```
success response
null 
```

触发器工具包输出

```
[DEBUG] Native call: {
[DEBUG]     callid = "F8446A0D-44AE-46E4-A587-16BEC78EE695";
[DEBUG]     method = "facebook.ui";
[DEBUG]     params =     {
[DEBUG]         message = "I challenge you to a game!";
[DEBUG]         method = apprequests;
[DEBUG]         title = "Create Game";
[DEBUG]     };
[DEBUG]     start = "1354655948.023";
[DEBUG] }
[DEBUG] Returning to javascript: {
[DEBUG]     callid = "F8446A0D-44AE-46E4-A587-16BEC78EE695";
[DEBUG]     content = "<null>";
[DEBUG]     status = success;
[DEBUG] } 
```

我做错了吗？还是这个库不能正常工作？

**更新，12/5/12**

这似乎是一个 iOS 唯一的问题。它发生在 iOS5 和 iOS6 的 iOS 模拟器（和设备）上。但在 Android 模拟器上运行良好：

```
[DEBUG] Native call "facebook.ui" with task.params: {"method":"apprequests","title":"Create Game","message":"I challenge you to a game!"}
[DEBUG] Returning: {"content":{"to[0]":"1175220065","request":"349563028475745"},"status":"success","callid":"548FE13D-69D9-415B-9A94-762D9F7C64B1"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:03:44.823

对此的修复将包含在 v1.4.23 Trigger.io 平台版本中。

您的成功回调将被调用（例如，对于 apprequests）：

```
{"request":"519074534448448","to[0]":"105000524002524"} 
```

**注意：**如果用户点击取消，您的成功回调仍将被调用：`{}`将作为回调参数传递。

如果他们点击`x`左上角的，您的失败回调将被调用。

# java - JPA @IdClass - 更新

> ID：13712202
> 
> 赞同：0
> 
> 时间：2012-12-04T21:24:45.437
> 
> 标签：java, jpa

如果你有一个像

```
public class EmployeePK implements Serializable {

 private String empName;
 private Date birthDay;

 public EmployeePK() {
 }

 public String getName() {
     return this.empName;
 }

 public void setName(String name) {
     this.empName = name;
 }

 public Date getBirthDay() {
     return this.birthDay;
 }

 public void setBirthDay(Date date) {
     this.birthDay = date;
 }

 public int hashCode() {
     return (int)this.empName.hashCode();
 }

 public boolean equals(Object obj) {
     if (obj == this) return true;
     if (!(obj instanceof EmployeePK)) return false;
     EmployeePK pk = (EmployeePK) obj;
     return pk.birthDay.equals(this.birthDay) && pk.empName.equals(this.empName);
 } 
```

}

和

```
@IdClass(EmployeePK.class)
@Entity
public class Employee implements Serializable{

   @Id String empName;
   @Id Date birthDay;
   ...

    public Employee (String empName, Date birthDay){
    this.empName= empName;
    this.birthDay= birthDay;
}
...
} 
```

你如何进行更新查询？

```
 EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("JPA_Compositekey");
    EntityManager em = emf.createEntityManager();
    try {
        em.getTransaction().begin();
        Employee anemployee = em.find( **WHAT DO YOU FILL HERE **)
... 
```

或者我是否必须使用 PK 类中的对象以及如果您只有一个需要更新的人该怎么办。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:41:34.380

至于其他所有实体：您提供一个 ID 实例：

```
EmployeePK pk = new EmployeePK(...);
Employee anemployee = em.find(Employee.class, pk); 
```

并且要更新员工，就像任何其他实体一样：您修改其字段，并且新状态在事务提交时自动保持。只需确保不要更新名称和出生日期：因为它们是 PK 的一部分，所以它们是不可变的。这是不使用组合键的众多充分理由之一，尤其是功能组合键。

使用自动生成的代理键，一切都会变得容易得多。

# python - 尝试子类化机械化的浏览器并创建登录方法

> ID：13712207
> 
> 赞同：1
> 
> 时间：2012-12-04T21:25:15.343
> 
> 标签：python, oop, mechanize

这样我所要做的就是输入

```
browser = MyBrowser()
browser.login() 
```

让我的 python 脚本在未来登录。这是我到目前为止所拥有的：

```
import mechanize
class MyBrowser(mechanize.Browser, object):
    _username = 'username'
    _password = 'password'

    def __init__(self):
        super(MyBrowser, self).__init__()
        self.set_handle_robots(False)
        self.set_proxies({"http" : "http://proxy.me.com:80"})

    def login(self):
        self.open('http://login.mypage.com/')
        self.select_form(nr=0)
        self['name'] = self._username
        self['pass'] = self._password
        self.submit() 
```

我使用相同的方法制作了一个运行良好的登录功能。但是现在，当我调用 browser.login() 时，我得到了这个：

```
self['name'] = self._username
TypeError: 'MyBrowser' object does not support item assignment 
```

当它是这样的方法的一部分时，为什么调用 select_form 的行为不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:18:46.537

我得到了它！！！

```
self.select_form(nr=0)
self.form['name'] = self._username
self.form['pass'] = self._password
self.submit() 
```

非常感谢 Lior，我真的很感谢你在这方面的时间，如果没有你的帮助，我不可能得到它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:31:20.143

`self`是 MyBrowser 类的一个对象。您对`self['name']`and所做的`self['pass']`是尝试将值分配给`self`对象本身。

我假设您想在类中声明变量，为此您必须将代码编辑为：

```
self.name = self._username
self.pass = self._password 
```

编辑：试试这个：

```
super(MyBrowser, self).name = self._username
super(MyBrowser, self).password = self._password 
```

# c++ - '迭代器不可取消引用' C++ 堆栈

> ID：13712209
> 
> 赞同：2
> 
> 时间：2012-12-04T21:25:23.490
> 
> 标签：c++, vector, stack, std, l-systems

不知道这里发生了什么。我有一个标准的 Vector3D 堆栈（我的导师给我的一个 3 维矢量类）。我已经将两个 Vector3D 推到堆栈上，但是当我使用 vectorStack.top() 进入顶部时，我遇到了这个非常无用的错误：

调试断言失败！

表达式：deque 迭代器不可取消引用

我认为 Vector3D 复制构造函数可能有问题，但我尝试制作自己的快速 Vector3D 结构（删除给我的旧结构），但这也不起作用！

这是代码：

```
D3Dapp.cpp
if (!lsys.initialised)
{
    LSystem::ReproductionRule r1;
    r1.from = 'F';
    r1.to = "F+F-[FFF]";
    lsys.rules.push_back(r1);

    LSystem::ReproductionRule r2;
    r2.from = 'F';
    r2.to = "FF";
    lsys.rules.push_back(r2);

    lsys.result = lsys.generateResult("F", 0, 5);
    lsys.currentPosition = Vector3D(0.0f,0.0f,0.0f);
    lsys.vectorStack.push(lsys.currentPosition);

    lsys.initialised = true;
}

  lsys.result = "[FF]+FF";

if (!lsys.complete)
{
    for (int i=0; i < lsys.result.length();i++)
    {
  // F move forward
        if (lsys.result[i] == 'F')
        {
            float cosAng = cos(lsys.angle);
            float sinAng = sin(lsys.angle);

    Vector3D currentPosition(lsys.vectorStack.top());

            Vector3D newPosition = Vector3D(
                currentPosition.x + (cosAng * 0.5f), 
                currentPosition.y + (sinAng * 0.5f), 
                currentPosition.z);

            //lsys.vectorStack.push(newPosition);

            Vertex s, e;
            s.x = currentPosition.x;
            s.y = currentPosition.y;
            s.z = currentPosition.z;
            e.x = newPosition.x;
            e.y = newPosition.y;
            e.z = newPosition.z;

            startList.push_back(s);
            endList.push_back(e);

            lsys.currentPosition = newPosition;

    // + turn right
        } else if (lsys.result[i] == '+')
        {
            float rdn = 3.141592f / 180.0f;
            lsys.angle = (lsys.angle + 20.0f);

    // - turn left
        } else if (lsys.result[i] == '-')
        {
            float rdn = 3.141592f / 180.0f;
            lsys.angle = (lsys.angle - 20.0f);

    // [ push stack
        } else if (lsys.result[i] == '[')
  {
    lsys.vectorStack.push(lsys.currentPosition);

    // ] pop stack
  } else if (lsys.result[i] == ']')
  {
    lsys.vectorStack.pop();
  }
    }

    lsys.currentPosition = Vector3D(0.0f,0.0f,0.0f);
}

lsys.complete = true; 
```

lsystem 中的堆栈只是`stack<Vector3D> vectorStack;`

我尝试了多种将 vectorStack.top() 分配给当前位置的方法，但似乎没有任何效果。

为了完整起见，这里是 Vector3D 的构造函数：

```
Vector3D.h
Vector3D() {
    x = y = z = 0;
}

Vector3D(double a, double b, double c) {
    x = a;
    y = b;
    z = c;
}

Vector3D(const Vector3D& v) {
    x = v.x;
    y = v.y;
    z = v.z;
} 
```

编辑：为了证明堆栈中有东西 ![截屏](../Images/1ae1680db7f907e5aa5cc93cb2ac8398.png)

这是堆栈中引发错误的行 ![截图2](../Images/7bae42cee921f3192ab077045b6183cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:35:15.277

我能想到的只有两种方法会导致这样的问题。首先是您的程序中某处存在内存损坏，这可能是但我们应该在消除其他选项后才考虑。

第二个选项是堆栈实际上是空的。您的屏幕截图没有向我们显示堆栈的内部大小，它仅向我们显示它*在某些时候*为两个项目分配了内存并将它们推入堆栈。很可能您已将这些项目弹出并且堆栈为空但仍指向看似有效的内存。您可以通过将一些`cout`s 通过 pushes 和 pops 放入您的堆栈以及`lsys.vectorStack.size()`在调用之前打印来证明或反驳这一点`top`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:50:55.657

事实证明，我正在使用（被迫使用）的框架是在考虑非常严格的内存要求的情况下构建的，有几个对 ZeroMemory 的调用似乎只分配了这个内存量和这个内存量。

因此，当我开始添加大量动态内存结构（如堆栈和向量）时，一切都变得糟糕透顶。

```
ZeroMemory( this, sizeof(D3dApp) ) 
```

在删除上述内容之后，我仍然遇到了一些问题，但我遵循了 Mark B 的建议，现在它已经启动并运行了。

非常感谢。

# c# - 为什么我的 C#/pinvoke DeviceIoControl 调用返回 0 字节读取垃圾数据？

> ID：13712212
> 
> 赞同：3
> 
> 时间：2012-12-04T21:25:42.400
> 
> 标签：c#, deviceiocontrol

我有一个运行良好的非托管 C++ Windows 控制台应用程序。我想要它在 C# 中。我已经为必要的 Kernel32.dll 符号完成了 DllImport 语句：

```
[StructLayout(LayoutKind.Sequential)]
internal struct DiskGeometry
{
    public long Cylinders;
    public int MediaType;
    public int TracksPerCylinder;
    public int SectorsPerTrack;
    public int BytesPerSector;
}

internal static class NativeMethods
{
    internal const uint FileAccessGenericRead = 0x80000000;
    internal const uint FileShareWrite = 0x2;
    internal const uint FileShareRead = 0x1;
    internal const uint CreationDispositionOpenExisting = 0x3;
    internal const uint IoCtlDiskGetDriveGeometry = 0x70000;

    [DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    public static extern SafeFileHandle CreateFile(
        string fileName,
        uint fileAccess,
        uint fileShare,
        IntPtr securityAttributes,
        uint creationDisposition,
        uint flags,
        IntPtr template);

    [DllImport("Kernel32.dll", SetLastError = false, CharSet = CharSet.Auto)]
    public static extern int DeviceIoControl(
        SafeFileHandle device,
        uint controlCode,
        IntPtr inBuffer,
        uint inBufferSize,
        IntPtr outBuffer,
        uint outBufferSize,
        ref uint bytesReturned,
        IntPtr overlapped);
} 
```

然后我有以下应用程序代码：

```
 public static void Main()
    {
        SafeFileHandle diskHandle = NativeMethods.CreateFile(
            "\\\\.\\PhysicalDrive0",
            NativeMethods.FileAccessGenericRead,
            NativeMethods.FileShareWrite | NativeMethods.FileShareRead,
            IntPtr.Zero,
            NativeMethods.CreationDispositionOpenExisting,
            0,
            IntPtr.Zero);
        if (diskHandle.IsInvalid)
        {
            Console.WriteLine("CreateFile failed with error: {0}", Marshal.GetLastWin32Error());
            return;
        }

        int geometrySize = Marshal.SizeOf(typeof(DiskGeometry));
        Console.WriteLine("geometry size = {0}", geometrySize);

        IntPtr geometryBlob = Marshal.AllocHGlobal(geometrySize);

        uint numBytesRead = 0;
        if (0 == NativeMethods.DeviceIoControl(
            diskHandle,
            NativeMethods.IoCtlDiskGetDriveGeometry,
            IntPtr.Zero,
            0,
            geometryBlob,
            (uint)geometrySize,
            ref numBytesRead,
            IntPtr.Zero))
        {
            Console.WriteLine("DeviceIoControl failed with error: {0}", Marshal.GetLastWin32Error());
            return;
        }

        Console.WriteLine("Bytes read = {0}", numBytesRead);

        DiskGeometry geometry = (DiskGeometry)Marshal.PtrToStructure(geometryBlob, typeof(DiskGeometry));
        Marshal.FreeHGlobal(geometryBlob);

        long bytesPerCylinder = (long)geometry.TracksPerCylinder * (long)geometry.SectorsPerTrack * (long)geometry.BytesPerSector;
        long totalSize = geometry.Cylinders * bytesPerCylinder;

        Console.WriteLine("Media Type:           {0}", geometry.MediaType);
        Console.WriteLine("Cylinders:            {0}", geometry.Cylinders);
        Console.WriteLine("Tracks per Cylinder:  {0}", geometry.TracksPerCylinder);
        Console.WriteLine("Sectors per Track:    {0}", geometry.SectorsPerTrack);
        Console.WriteLine("Bytes per Sector:     {0}", geometry.BytesPerSector);
        Console.WriteLine("Bytes per Cylinder:   {0}", bytesPerCylinder);
        Console.WriteLine("Total disk space:     {0}", totalSize);
    } 
```

我的 C# 应用程序打印“Bytes read = 0”并且几何成员值是垃圾。我当然不是 DllImport 和编组方面的专家。请帮助我理解我做错了什么。如果我将第五个参数更改为 DeviceIoControl 为“ref DiskGeometry”并传入一个在调用之前创建的参数（而不是 IntPtr 和 alloc），则所有打印的几何成员值都是 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:12:36.060

你打错了，试试这个：

```
internal const uint IoCtlDiskGetDriveGeometry = 0x70000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:10:57.103

尝试为 DllImport 使用这些签名之一：http: [//pinvoke.net/default.aspx/kernel32.DeviceIoControl](http://pinvoke.net/default.aspx/kernel32.DeviceIoControl)

# jplayer - jPlayer - Flash 后备开始播放的时间比 HTML5 版本的相同视频长 30 倍

> ID：13712215
> 
> 赞同：2
> 
> 时间：2012-12-04T21:25:44.887
> 
> 标签：jplayer

尝试使用 HTML5 视频设置 jPlayer，并为同一视频设置 Flash 后备。

HTML5 视频播放速度快如闪电（只有大约 1 秒的“缓冲”时间）！

我遇到的问题是 Flash 后备。使用 HTML5 版本在 1 秒内开始播放的完全相同的视频，使用 Flash 版本开始播放需要 50 多秒（我使用的是 1.5 Mbps DSL 连接）。在这段时间里，根本没有“进度”栏……只是黑屏。

就好像它试图在开始播放之前下载整个视频一样。我已经在 Firefox、Chrome、IE9、IE8 和 IE7 中对此进行了测试。在所有浏览器中都是一样的。Flash 播放器在所有浏览器中都是最新的。此外，我总是在每次测试之间清除浏览器的缓存，以确保每次测试都是准确的。

有什么想法可能导致这种情况吗？

我尝试了很多不同的视频编码器... Sony Vegas、Handbrake、Miro、Super、Freemake、Any Video Converter，但我得到的结果或多或少都相同（使用 HTML5 视频时即时播放，但非常使用 Flash 后备时的缓冲时间长）。

然后我想我的服务器可能存在 MIME 问题，所以我将以下代码添加到根目录中的 .htaccess 文件中......

```
 # AddType TYPE/SUBTYPE EXTENSION  
    AddType audio/mpeg mp3
    AddType audio/mp4 m4a
    AddType audio/ogg ogg
    AddType audio/ogg oga
    AddType audio/webm webma
    AddType audio/wav wav
    AddType video/mp4 mp4
    AddType video/mp4 m4v
    AddType video/ogg ogv
    AddType video/webm webm
    AddType video/webm webmv 
```

但这并没有什么不同。

然后作为测试，我从jPlayer服务器下载了“Big Buck Bunny”视频（m4v、ogv、webm），然后上传到我的服务器，令我惊讶的是，连Flash版本都可以立即播放！（1 秒内）。很奇怪。

因此，对于另一次测试，我使用我拥有的每个编码器（Sony Vegas、Handbrake、Miro、Super、Freemake、Any Video Converter）将 Big Buck Bunny 视频重新编码为 mp4/m4v，将所有这些文件上传到我的服务器，然后分别使用每个文件测试 Flash 后备。对于每一个，Flash 播放都需要很长时间才能开始（即使是我编码为超小文件大小的那些）。然而，所有 HTML5 版本仍然可以立即播放。

我真的很想知道是什么导致 Flash 回退需要这么长时间才能开始播放。在过去的几天里，我尝试了所有我能想到的可能的测试来查明问题，但仍然无法弄清楚。

有任何想法吗？

如果有帮助，下面是我用来测试的页面之一。在那个特定的页面上，我使用了与其中一个 jPlayer 演示完全相同的 HTML 代码，并将默认解决方案设置为“flash”。唯一不同的是我重新编码了 m4v 文件，以演示 Flash 延迟（对于这个特定的视频，我的延迟大约是 30 秒）......

[http://thebestinfo.org/jplayer/flash.html](http://thebestinfo.org/jplayer/flash.html)

就像我上面提到的，无论我使用什么编码器，或者我压缩文件有多小，使用 Flash 回退时总是会有很大的延迟。

我将非常感谢任何帮助解决这个问题！提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:13:12.733

根据[jPlayer 开发指南的服务器响应](http://www.jplayer.org/latest/developer-guide/#jPlayer-server-response)部分，您所描述的行为可能是由于服务器无法接受字节范围请求或文件头中缺少媒体长度元数据引起的。

> ## 字节范围请求
> 
> 您的服务器必须启用 Range 请求。这很容易通过查看服务器的响应是否在其标头中包含 Accept-Ranges 来检查。大多数 HTML5 浏览器允许在下载期间寻找新的文件位置，因此服务器必须允许请求新的 Range。
> 
> 无法接受字节范围请求会导致某些 HTML5 浏览器出现问题。通常无法从文件中读取持续时间，因为某些格式要求读取文件的开头和结尾以了解其持续时间。如果服务器上没有启用 Range 请求，Chrome 往往是问题最多的浏览器，但所有浏览器都会有一些问题，即使只是您必须等待所有媒体加载完毕才能跳到最后.
> 
> 已知此问题会影响使用默认配置的 Jetty 6 服务器。
> 
> jPlayer 社区已经编写了一个 PHP 函数，它可以提供支持 Range 请求的媒体文件。请参阅有关该主题的此[jPlayer 支持组帖子](https://groups.google.com/d/msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ)。

# c# - 如何创建一个没有可调整大小边框的 WPF 窗口？

> ID：13712218
> 
> 赞同：9
> 
> 时间：2012-12-04T21:26:09.863
> 
> 标签：c#, wpf, window

WPF 中是否有一种方法可以删除主窗口的边框，但允许调整该窗口的大小（没有夹点）？

我意识到有一种方法可以通过将调整大小模式设置为`CanResizeWithGrip`. 但是，我希望能够将调整大小模式设置为`CanResize`.

我尝试设置以下内容：

```
ResizeMode="CanResize" 
WindowStyle="None"
AllowsTransparency="True" 
```

但是，通过设置`AllowsTransparency`，它消除了在没有夹点的情况下调整大小的能力。有什么想法可以解决这个问题吗？

我还应该注意，`AllowsTransparency`无论如何我都不能设置为 true，因为我在我的窗口中使用了一个 winformshost 控件，当`AllowsTransparency` 它是 true 时没有显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-21T13:36:13.590

我知道这是一个老问题，但我只是想为新手提供一个工作样本。

Xaml 窗口：

```
<Window x:Class="CustomWindowDemo.DemoCustomWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CustomWindowDemo"
        mc:Ignorable="d"
        Title="DemoCustomWindow" Height="300" Width="300" Background="{x:Null}" AllowsTransparency="True" WindowStyle="None">
    <Window.Resources>
        <Style x:Key="BorderThumb" TargetType="Thumb">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Rectangle MinWidth="4" MinHeight="4" StrokeThickness="0">
                            <Rectangle.Fill>
                                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.HighlightColorKey}}" Opacity="0.05"/>
                            </Rectangle.Fill>
                        </Rectangle>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Border BorderBrush="#55FFFFFF" BorderThickness="1" CornerRadius="5">
        <Grid>
            <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
            <Border MouseMove="Header_MouseMove" DockPanel.Dock="Top" Height="32"  Grid.Row="1" Grid.Column="1">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,3">
                            <GradientStop Color="#3BB2EA" Offset="0" />
                            <GradientStop Color="#EFF7FA" Offset="0.3" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock VerticalAlignment="Center" HorizontalAlignment="Left" Margin="10,0,0,0" Text="{Binding Path=Title, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"/>
                        <Button x:Name="btn_Minimize" Background="{x:Null}" BorderBrush="{x:Null}" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" BorderThickness="0" Click="btn_Minimize_Click" Grid.Column="1">
                            <Image Source="Resources/Ahmadhania-Spherical-Minimize.ico"/>
                        </Button>
                        <Button x:Name="btn_Maximize" Background="{x:Null}" BorderBrush="{x:Null}" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" BorderThickness="0" Grid.Column="2" Click="btn_Maximize_Click">
                            <Image Source="Resources/1412181205_61002.ico"/>
                        </Button>
                        <Button x:Name="btn_Close" Background="{x:Null}" BorderBrush="{x:Null}" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" BorderThickness="0" Grid.Column="3" Click="btn_Close_Click">
                            <Image Source="Resources/Ahmadhania-Spherical-Close(1).ico"/>
                        </Button>
                    </Grid>
                </Border>
            <Thumb x:Name="ThumbBottom" DragDelta="ThumbBottom_DragDelta" HorizontalAlignment="Stretch" Cursor="SizeNS" Grid.Column="0" Background="{x:Null}"  Margin="3,0" Grid.ColumnSpan="3" Grid.Row="3" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Thumb x:Name="ThumbTop" DragDelta="ThumbTop_DragDelta" HorizontalAlignment="Stretch" Cursor="SizeNS" Grid.Column="0" Background="{x:Null}"  Margin="3,0" Grid.ColumnSpan="3" Height="4" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Thumb x:Name="ThumbBottomRightCorner" DragDelta="ThumbBottomRightCorner_DragDelta" HorizontalAlignment="Right" Cursor="SizeNWSE" Grid.Row="3" Grid.Column="3" Background="{x:Null}" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Thumb x:Name="ThumbTopRightCorner" DragDelta="ThumbTopRightCorner_DragDelta" HorizontalAlignment="Right" Cursor="SizeNESW" Grid.Row="0" Grid.Column="2" Background="{x:Null}" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Thumb x:Name="ThumbTopLeftCorner" DragDelta="ThumbTopLeftCorner_DragDelta" HorizontalAlignment="Left" Cursor="SizeNWSE" Grid.Row="0" Grid.Column="0" Background="{x:Null}" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}" />
            <Thumb x:Name="ThumbBottomLeftCorner" DragDelta="ThumbBottomLeftCorner_DragDelta" HorizontalAlignment="Left" Cursor="SizeNESW" Grid.Row="3" Grid.Column="0" Background="{x:Null}" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}" />
            <Thumb x:Name="ThumbRight" DragDelta="ThumbRight_DragDelta" Cursor="SizeWE" Grid.Column="2" Grid.RowSpan="4" Background="{x:Null}"  Margin="0,3" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Thumb x:Name="ThumbLeft" DragDelta="ThumbLeft_DragDelta" Cursor="SizeWE" Grid.Column="0" Grid.RowSpan="4" HorizontalContentAlignment="Right" Background="{x:Null}" Margin="0,3" Style="{Binding Mode=OneWay, Source={StaticResource BorderThumb}}"/>
            <Grid x:Name="Grid_Content" Background="#EFF7FA" Grid.Row="2" Grid.Column="1">

            </Grid>
        </Grid>
    </Border>
</Window> 
```

后面的 C# 代码：

```
using System.Windows.Interop;
using winforms = System.Windows.Forms;

namespace CustomWindowDemo
{
    /// <summary>
    /// Interaction logic for DemoCustomWindow.xaml
    /// </summary>
    public partial class DemoCustomWindow : Window
    {
        bool Maximized = false;
        int NormalWidth = 0;
        int NormalHeight = 0;
        int NormalX = 0;
        int NormalY = 0;

        public DemoCustomWindow()
        {
            InitializeComponent();
        }

        #region Header & Resize
        void Header_MouseMove(object sender, System.Windows.Input.MouseEventArgs e)
        {
            if (e.LeftButton == System.Windows.Input.MouseButtonState.Pressed)
                this.DragMove();
        }

        void ThumbBottomRightCorner_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Width + e.HorizontalChange > 10)
                this.Width += e.HorizontalChange;
            if (this.Height + e.VerticalChange > 10)
                this.Height += e.VerticalChange;
        }
        void ThumbTopRightCorner_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Width + e.HorizontalChange > 10)
                this.Width += e.HorizontalChange;
            if (this.Top + e.VerticalChange > 10)
            {
                this.Top += e.VerticalChange;
                this.Height -= e.VerticalChange;
            }
        }
        void ThumbTopLeftCorner_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Left + e.HorizontalChange > 10)
            {
                this.Left += e.HorizontalChange;
                this.Width -= e.HorizontalChange;
            }
            if (this.Top + e.VerticalChange > 10)
            {
                this.Top += e.VerticalChange;
                this.Height -= e.VerticalChange;
            }
        }
        void ThumbBottomLeftCorner_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Left + e.HorizontalChange > 10)
            {
                this.Left += e.HorizontalChange;
                this.Width -= e.HorizontalChange;
            }
            if (this.Height + e.VerticalChange > 10)
                this.Height += e.VerticalChange;
        }
        void ThumbRight_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Width + e.HorizontalChange > 10)
                this.Width += e.HorizontalChange;
        }
        void ThumbLeft_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Left + e.HorizontalChange > 10)
            {
                this.Left += e.HorizontalChange;
                this.Width -= e.HorizontalChange;
            }
        }
        void ThumbBottom_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Height + e.VerticalChange > 10)
                this.Height += e.VerticalChange;
        }
        void ThumbTop_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
        {
            if (this.Top + e.VerticalChange > 10)
            {
                this.Top += e.VerticalChange;
                this.Height -= e.VerticalChange;
            }
        }

        void btn_Minimize_Click(object sender, RoutedEventArgs e)
        {
            WindowState = WindowState.Minimized;
        }
        void btn_Maximize_Click(object sender, RoutedEventArgs e)
        {
            if (Maximized == true)
            {
                this.Width = NormalWidth;
                this.Height = NormalHeight;
                this.Left = NormalX;
                this.Top = NormalY;
                Maximized = false;
                Thumbs();
            }
            else
            {
                NormalX = (int)this.Left;
                NormalY = (int)this.Top;
                NormalHeight = (int)this.Height;
                NormalWidth = (int)this.Width;
                this.Left = winforms.Screen.FromHandle(new WindowInteropHelper(this).Handle).WorkingArea.Left;
                this.Top = winforms.Screen.FromHandle(new WindowInteropHelper(this).Handle).WorkingArea.Top;
                this.Width = winforms.Screen.FromHandle(new WindowInteropHelper(this).Handle).WorkingArea.Width;
                this.Height = winforms.Screen.FromHandle(new WindowInteropHelper(this).Handle).WorkingArea.Height;
                Maximized = true;
                Thumbs();
            }
        }
        void btn_Close_Click(object sender, RoutedEventArgs e)
        {
            Close();
        }
        void Thumbs()
        {
            if (Maximized == true)
            {
                ThumbBottom.Visibility = Visibility.Collapsed;
                ThumbLeft.Visibility = Visibility.Collapsed;
                ThumbTop.Visibility = Visibility.Collapsed;
                ThumbRight.Visibility = Visibility.Collapsed;
                ThumbTopLeftCorner.Visibility = Visibility.Collapsed;
                ThumbTopRightCorner.Visibility = Visibility.Collapsed;
                ThumbBottomLeftCorner.Visibility = Visibility.Collapsed;
                ThumbBottomRightCorner.Visibility = Visibility.Collapsed;
            }
            else
            {
                ThumbBottom.Visibility = Visibility.Visible;
                ThumbLeft.Visibility = Visibility.Visible;
                ThumbTop.Visibility = Visibility.Visible;
                ThumbRight.Visibility = Visibility.Visible;
                ThumbTopLeftCorner.Visibility = Visibility.Visible;
                ThumbTopRightCorner.Visibility = Visibility.Visible;
                ThumbBottomLeftCorner.Visibility = Visibility.Visible;
                ThumbBottomRightCorner.Visibility = Visibility.Visible;
            }
        }
        #endregion
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T19:55:54.787

如果`ResizeBorderThickness`设置为 0，就会发生这种情况。

它可以在 XAML 中设置为正值，如下所示：

```
<WindowChrome>
    <WindowChrome.ResizeBorderThickness>
        <Thickness>1</Thickness>
    </WindowChrome.ResizeBorderThickness>
</WindowChrome> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:14:17.950

您可以使用 WPF 可自定义的窗口库，可在此处获得：[http ://wpfwindow.codeplex.com/](http://wpfwindow.codeplex.com/)

然后，当使用库的窗口类型时，您可以设置与上面列出的相同的属性

```
<CustomWindow:EssentialWindow x:Class="CustomWindowDemo.DemoEssentialWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:CustomWindow="clr-namespace:CustomWindow;assembly=CustomWindow"
    AllowsTransparency="True" ResizeMode="CanResize" WindowStyle="None" Title="EssentialWindow"
    Height="300" Width="250"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T21:12:54.877

用户需要与之交互的东西来调整窗口大小。如果您不喜欢默认边框或夹点，则需要添加一些其他控件，通过单击和拖动行为来调整窗口大小。也许在窗口的每个边缘都有一条线？

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-12-04T21:27:53.330

最简单但可能太简单的是

```
this.MouseLeftButtonDown += delegate { this.DragMove(); }; 
```

# django - 过滤 django 管理站点上的查询

> ID：13712221
> 
> 赞同：1
> 
> 时间：2012-12-04T21:26:22.593
> 
> 标签：django, django-admin

我有一个包含近 10,000 个对象的模型会话。每个会话都有一个与主题的外键关系。问题是当加载具有外键字段的页面到会话时，页面需要很长时间才能加载。

为了解决这个问题，我喜欢让管理员从一个 ForeignKey 字段中选择一个主题，并让与该主题有关系的会话出现在第二个 ForeignKey 字段中。

这在 django 管理界面中是可能的吗？我已经检查了 django-smart-selects （虽然我不确定这是否真的会做我想要的），但是当我尝试导入它时，我得到一个错误“没有名为 admin_static 的模块”，我相信可能是因为我使用的是过时版本的 Django (v 1.1)。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:52:45.663

你确定你不只是需要 raw_id_fields 吗？

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields)

当您访问具有 Sessions 外键的管理员更改表单时，它将构建一个包含 10,000 个条目的选择下拉列表。这可能是你的减速。

# facebook - 地点签到交易未显示

> ID：13712222
> 
> 赞同：-3
> 
> 时间：2012-12-04T21:26:22.977
> 
> 标签：facebook, checkin

几天前我为我的公司做了一个签到交易，它被批准了。当我查看我或员工的电话以“签入”以测试交易时，它不会出现。

如果我从 iPhone 上的 Facebook 应用程序检查，它根本没有显示交易，业务显示但没有交易。如果我从 safari 应用程序检查并在单击检查时转到移动 Facebook 页面，它会显示确认该位置交易的小徽标，但是一旦您单击它和/或发布它，就不会显示任何交易。

我一直希望这笔交易从第 1 次开始，现在是第 4 次，但我仍然没有看到。想知道是否有人有任何想法可以让它发挥作用，或者即使在获得批准后也需要时间才能出现在手机上。

编辑：我检查了一部维珍手机，它显示了“签入”徽标，但同样，一旦您单击它或从中签入，什么也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:52:26.963

本论坛针对 Facebook 开发的技术问题，您的问题无法在此得到解答。如果您认为有问题，请在此处向 Facebook 提交错误：[https ://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

# html - 如何使用 Capybara 在灯箱/花式箱中查找物品

> ID：13712223
> 
> 赞同：0
> 
> 时间：2012-12-04T21:26:30.230
> 
> 标签：html, css, ruby, cucumber, capybara

因此，当我的灯箱被识别后，我如何访问其中的内容？

当我输入：

```
within("div.fancybox-wrap.fancybox-desktop.fancybox-type-iframe.fancybox-opened") do
    within(:xpath, "//table[@id='small_calendar'][0]") do
        page.find('td', :text => '5').click
    end
end 
```

为了

```
<table id="small_calendar"> 
```

我得到...

```
Unable to find xpath "//table[@id='small_calendar'][0]" (Capybara::Element
NotFound) 
```

修改后的搜索......

```
sleep(10)
within("div.fancybox-wrap.fancybox-desktop.fancybox-type-iframe.fancybox-opened") do
    within_frame('fancybox-frame') do
        #within(:xpath, ".//table[@id='small_calendar'][0]") do
            page.find(:xpath, ".//table[@id='small_calendar'][0]/td[@text='5']").click
        #end
    end
end 
```

给我这个错误...

```
 findElements execution failed;
   Element does not exist in cache (Selenium::WebDriver::Error::StaleElement
ReferenceError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:45:48.210

如果元素在框架内，则必须使用以下`within_frame`方法明确声明：

```
within_frame('fancybox-frame') do
    within(:xpath, "//table[@id='small_calendar']") do
        page.find('td', :text => '5').click
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:54:26.177

知道了！

问题似乎是框架内和 xpath 不能相处。一旦我从等式中删除它，我就得到了想要的结果。

```
within_frame('fancybox-frame') do
    #within(:xpath, ".//table[@id='small_calendar'][0]") do #chokes
    within(all("table[id='small_calendar']").first) do  #works!
         #page.find(:xpath, ".//table[@id='small_calendar'][0]/td[@text='5']").click #chokes
         page.find("td[id='2013_0_6']").click #works!
    end
end 
```

# java - 码头和 Oracle 配置

> ID：13712224
> 
> 赞同：0
> 
> 时间：2012-12-04T21:26:32.727
> 
> 标签：java, oracle, jetty, oracle-xe

我正在尝试使用 Jetty 7.x 在 IntelliJ 中设置我的 Web 应用程序开发环境 我正在使用 Oracle XE v10.2 的实例

问题 -

目前，我可以使用 Tomcat 7 成功部署我的 Web 应用程序。为此，我构建了我的 WAR，然后将其复制到 Tomcat 中的 /webapps 目录中。然后我发出以下命令 -

```
> catalina.bat jpda start 
```

当我的 Web 应用程序正在部署时，它会读取我的用户主目录，其中我有几个 XML 文件，我在其中指定数据库配置设置。是的，我正在使用 Windows 机器进行开发。

我假设这些配置文件设置是从同一位置静态读取的，无论我使用哪种类型的 Web 服务器部署。显然不是！Jetty - 当它部署时，它会拉取我项目的默认设置并尝试连接到不存在的 MySQL 数据库。呃……

我在哪里专门告诉 Jetty 我的本地 Oracle XE 实例，并将用户名、url 和密码参数传递给它？我已经在 jetty.xml 文件中看到了这一点，但我试过了，但没有成功。

有什么建议么。

如果有人需要我的网络应用程序呕吐的堆栈跟踪 -

```
 2012-12-04 13:21:05,939 [Scanner-2] u:/d: 
    INFO: org.kuali.rice.ksb.messaging.quartz.KSBSchedulerFactoryBean - Starting Quartz Scheduler now
  java.sql.SQLException: Error trying to load driver: com.mysql.jdbc.Driver : com.mysql.jdbc.Driver
at org.enhydra.jdbc.standard.StandardDataSource.getConnection(StandardDataSource.java:184)
at org.kuali.rice.core.database.RiceXADataSource.getConnection(RiceXADataSource.java:54)
at org.enhydra.jdbc.standard.StandardPooledConnection.<init>(StandardPooledConnection.java:65)
at org.enhydra.jdbc.standard.StandardXAConnection.<init>(StandardXAConnection.java:81)
at org.enhydra.jdbc.standard.StandardXADataSource.getXAConnection(StandardXADataSource.java:110)
at org.enhydra.jdbc.pool.StandardXAPoolDataSource.create(StandardXAPoolDataSource.java:159)
at org.enhydra.jdbc.pool.GenericPool.getFromPool(GenericPool.java:251)
at org.enhydra.jdbc.pool.GenericPool.checkOut(GenericPool.java:357)
at org.enhydra.jdbc.pool.StandardPoolDataSource.getConnection(StandardPoolDataSource.java:194)
at org.enhydra.jdbc.pool.StandardPoolDataSource.getConnection(StandardPoolDataSource.java:164)
at org.springframework.scheduling.quartz.LocalDataSourceJobStore$2.getConnection(LocalDataSourceJobStore.java:125)
at org.quartz.utils.DBConnectionManager.getConnection(DBConnectionManager.java:112)
at org.quartz.impl.jdbcjobstore.JobStoreCMT.getNonManagedTXConnection(JobStoreCMT.java:164)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.doCheckin(JobStoreSupport.java:3070)
at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.manage(JobStoreSupport.java:3713)
at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.initialize(JobStoreSupport.java:3700)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.schedulerStarted(JobStoreSupport.java:570)
at org.quartz.core.QuartzScheduler.start(QuartzScheduler.java:449)
at org.quartz.impl.StdScheduler.start(StdScheduler.java:146)
at org.springframework.scheduling.quartz.SchedulerFactoryBean.startScheduler(SchedulerFactoryBean.java:627)
at org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:487)
at org.kuali.rice.ksb.messaging.quartz.KSBSchedulerFactoryBean.afterPropertiesSet(KSBSchedulerFactoryBean.java:87)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:105)
at org.kuali.rice.core.resourceloader.SpringResourceLoader.start(SpringResourceLoader.java:76)
at org.kuali.rice.core.resourceloader.ResourceLoaderContainer.start(ResourceLoaderContainer.java:54)
at org.kuali.rice.core.resourceloader.BaseResourceLoader.start(BaseResourceLoader.java:102)
at org.kuali.rice.core.config.RiceConfigurerBase.loadSpringContext(RiceConfigurerBase.java:152)
at org.kuali.rice.core.config.RiceConfigurerBase.initializeResourceLoaders(RiceConfigurerBase.java:115)
at org.kuali.rice.core.config.RiceConfigurerBase.start(RiceConfigurerBase.java:96)
at org.kuali.rice.core.config.RiceConfigurer.start(RiceConfigurer.java:90)
at org.kuali.rice.core.config.RiceConfigurerBase.afterPropertiesSet(RiceConfigurerBase.java:80)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:308)
at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:947)
at org.springframework.context.support.AbstractApplicationContext.registerListeners(AbstractApplicationContext.java:701)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:377)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at org.kuali.rice.student.core.web.listener.RiceContextLoaderListener.contextInitialized(RiceContextLoaderListener.java:78)
at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:740)
at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1238)
at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:683)
at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
at org.eclipse.jetty.deploy.ContextDeployer.deploy(ContextDeployer.java:359)
at org.eclipse.jetty.deploy.ContextDeployer.access$000(ContextDeployer.java:82)
at org.eclipse.jetty.deploy.ContextDeployer$ScannerListener.fileAdded(ContextDeployer.java:107)
at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:609)
at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:540)
at org.eclipse.jetty.util.Scanner.scan(Scanner.java:403)
at org.eclipse.jetty.util.Scanner$1.run(Scanner.java:353)
at java.util.TimerThread.mainLoop(Timer.java:512)
at java.util.TimerThread.run(Timer.java:462) 
```

堆栈重复几次......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:46:29.250

对于非池化 Oracle 数据源，您需要使用如下所示的数据源条目编辑`jetty.xml`或`WEB-INF/jetty-env.xml`

```
<New id="DSTest" class="org.mortbay.jetty.plus.naming.Resource">
    <Arg></Arg>
    <Arg>jdbc/DSTest</Arg>
    <Arg>
     <New class="oracle.jdbc.pool.OracleConnectionPoolDataSource">
                 <Set name="URL">jdbc:oracle:thin:@localhost:1521:orcl</Set>
                 <Set name="User">user</Set>
                 <Set name="Password">pass</Set>     
     </New>
    </Arg>
</New> 
```

# java - 指向桌面 (Java) 和发布程序的路径

> ID：13712225
> 
> 赞同：0
> 
> 时间：2012-12-04T21:26:34.630
> 
> 标签：java, netbeans, jar, publishing

我有一个要发布的程序，它是使用 Java 构建的。目前，程序在目录中创建文件夹/文件：

“C:\Users\Steve\Documents\myProgram”

除非用户具有完全相同的文件夹结构，否则这显然是行不通的。如何将程序定向到桌面上的文件夹？由于路径“C:\Users\Steve\Desktop”不起作用。

使用 NetBeans 发布程序会创建一个 .jar。由于我希望该程序被许多人使用，是否可以使用命令创建一个批处理文件：

*   在桌面上创建一个文件夹（存储通过程序创建的程序文件）
*   然后启动 .jar

然后我可以得到一个转换器并将.bat更改为.exe。我不确定这是否是正确的方法。

附带说明一下，我很确定这不会起作用，因为用户仍然需要安装 Java 才能运行该程序。我不是100％肯定，因此我问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:26:05.510

> 如何将程序定向到桌面上的文件夹？

```
File desktopDir = new File(System.getProperty("user.home"), "Desktop");
File myFile = new File(desktopDir, "myFile.txt"); 
```

# c++ - 用 unique_ptr<> 实现一个列表？

> ID：13712227
> 
> 赞同：6
> 
> 时间：2012-12-04T18:57:52.063
> 
> 标签：c++, c++11, smart-pointers

据我了解， a`unique_ptr`表示专有所有权。一个单链表似乎适合这个，每个节点都拥有下一个，比如（pseduocode alert）

```
class node{
public:
      unique_ptr<node> next;
      int value;
}; 
```

但我不明白如何执行诸如遍历列表之类的操作，这是我习惯做的

```
here=here->next; 
```

如何使用`unique_ptr`'s 实现数据结构？它们是适合这项工作的工具吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T19:35:03.890

当您遍历节点时，您不需要拥有节点指针，这意味着

> 这里=这里->下一个；

如果这里是 unique_ptr，则不正确。拥有一个对象意味着“对它的生死负责”，这意味着所有者是拥有销毁该对象的代码的人。如果您使用另一种拥有的定义，那么这不是 unique_ptr 的意思。

在您的列表节点代码中，您假设每个节点负责下一个节点（如果您销毁一个节点，所有下一个节点也将被销毁）。它可以是有效的行为，这取决于您的需求，只要确保它是您真正想要的。

你想要的是在不拥有它的情况下读取指针。当前的最佳做法是使用原始指针，向查看此代码的其他开发人员指示“使用但不拥有”的使用方式（unique_ptr 的意思是“如果我死了，指向的对象也死了”）：

```
node* here = nullptr; // it will not own the pointed nodes (don't call delete with this pointer)
here = &first_node(); // assuming first_node() returns a reference to the first node
here = here->next.get(); // to get the next node without owning it: use get() - true in all smart pointers interface 
```

# python - 同时将字典的所有值替换为零python

> ID：13712229
> 
> 赞同：33
> 
> 时间：2012-12-04T21:26:58.820
> 
> 标签：python, dictionary

我有一个非常大的字典，可能是 about`10,000 keys/values`并且我想同时将所有值更改为`0`. 我知道我可以遍历并将所有值设置为`0`但它需要永远。无论如何我可以*同时*将**所有**值设置为`0`？

循环方式，很慢：

```
# example dictionary
a = {'a': 1, 'c': 1, 'b': 1, 'e': 1, 'd': 1, 'g': 1, 'f': 1, 'i': 1, 'h': 1, 'k': 1,
 'j': 1, 'm': 1, 'l': 1, 'o': 1, 'n': 1, 'q': 1, 'p': 1, 's': 1, 'r': 1, 'u': 1,
 't': 1, 'w': 1, 'v': 1, 'y': 1, 'x': 1, 'z': 1}
for key, value in a.items():
    a[key] = 0 
```

输出：

```
{'a': 0, 'c': 0, 'b': 0, 'e': 0, 'd': 0, 'g': 0, 'f': 0, 'i': 0, 'h': 0, 'k': 0,
 'j': 0, 'm': 0, 'l': 0, 'o': 0, 'n': 0, 'q': 0, 'p': 0, 's': 0, 'r': 0, 'u': 0,
 't': 0, 'w': 0, 'v': 0, 'y': 0, 'x': 0, 'z': 0} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-04T21:28:58.743

你想要`dict.fromkeys()`：

```
a = dict.fromkeys(a, 0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T21:31:52.090

感谢@akaRem 的评论 :)

```
a = dict.fromkeys( a.iterkeys(), 0 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T10:27:43.370

请注意，如果您的密钥顺序很重要，则该解决方案可能不合适，因为它似乎重新排序。

要阻止这种情况发生，请使用列表理解：

```
aDictionary =  { x:0 for x in aDictionary} 
```

**注意：**它只是 2.7.x 和 2.x 独有的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:29:54.127

如果您知道您的 dict 值需要是什么类型，您可以这样做：

1.  将 dict 值存储在 array.array 对象中。这使用了一个连续的内存块。
2.  dict，而不是存储实际值，而是存储可以找到实际值的数组索引
3.  使用连续的二进制零字符串重新初始化数组

没有测试性能，但它应该更快......

```
 import array

class FastResetDict(object):

    def __init__(self, value_type):
        self._key_to_index = {}
        self._value_type = value_type
        self._values = array.array(value_type)

    def __getitem__(self, key):
        return self._values[self._key_to_index[key]]

    def __setitem__(self, key, value):
        self._values.append(value)
        self._key_to_index[key] = len(self._values) - 1

    def reset_content_to_zero(self):
        zero_string = '\x00' * self._values.itemsize * len(self._values)
        self._values = array.array(self._value_type, zero_string)

fast_reset_dict = FastResetDict('i')
fast_reset_dict['a'] = 103
fast_reset_dict['b'] = -99

print fast_reset_dict['a'], fast_reset_dict['b']
fast_reset_dict.reset_content_to_zero()
print fast_reset_dict['a'], fast_reset_dict['b'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-03T14:12:56.327

要扩展[@Daniel Roseman](https://stackoverflow.com/users/104349/daniel-roseman) ，答案`a=a.fromkeys(d,0)`的功能相同且速度更快。此外，如果您打算经常这样做`save=dict.fromkeys(a,0)`，然后`a=save.copy()`在某些情况下调用更快（大字典）

# java - MongoDB 选择查询的 Java 等效项

> ID：13712230
> 
> 赞同：6
> 
> 时间：2012-12-04T21:27:03.317
> 
> 标签：java, mongodb

我想检索以下信息：

```
select names from database where names like 'Jon'; 
```

但对于 Java 中的 MongoDB。本质上，它应该返回所有包含单词 Jon 的名称，例如 Jonathan、Jong 等。我知道`$in`MongoDB 中有运算符，但是我如何在 Java 中使用 Java 驱动程序来做同样的事情？我一直试图到处寻找它，但什么也没得到。我试过: `query = new BasicDBObject("names", new BasicDBObject("$in", "Jon"));`, 和`query = new BasicDBObject("names", new BasicDBObject("$in", Jon));`

但他们都没有工作:(请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T21:49:06.730

与该 SELECT 语句等效的 MongoDB Java 驱动程序将是：

```
BasicDBObject fields = new BasicDBObject().append("name", 1); // SELECT name
BasicDBObject query = new BasicDBObject().append("name", "Jon"); // WHERE name = "Jon"
DBCursor results = yourCollection.find(query, fields); // FROM yourCollection 
```

当你想搜索字符串的一部分时，你可以使用`$regex`操作符：

```
query = new BasicDBObject("name", new BasicDBObject("$regex", "Jon")); 
```

这将为您提供名称与[正则表达式](http://www.regular-expressions.info/) `Jon`匹配的所有对象，即在任何地方都包含字符串“Jon”的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:38:43.923

查看 Mongo-Java[官方站点](http://www.mongodb.org/display/DOCS/Java+Tutorial)，以及一个用于映射 mongo 对象的不错的[库](http://code.google.com/p/morphia/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T13:50:26.433

MongoDB 中的运算符`$in`类似于`IN`SQL 中的运算符。例如，它可以用于执行类似 SQL 的查询

```
SELECT * FROM table WHERE id IN {1, 4, 6, 7, 9} 
```

这就是为什么它对你不起作用。正如其他人已经建议的那样，使用正则表达式。

# java - 使用 Java (POST) 提交表单

> ID：13712250
> 
> 赞同：1
> 
> 时间：2012-12-04T21:28:33.367
> 
> 标签：java, forms, http

我正在尝试从 Java（通过 HTTP）向某个网站提交表单，但是在阅读响应时，我看不到我的预期。我具体做什么：首先，我在浏览器中打开网站，手动填写表格并提交。在 Chrome 中，我可以看到通过网络传输的数据，即：

```
Request URL:http://wizzair.com/en-GB/Select
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:1061
Content-Type:application/x-www-form-urlencoded
Cookie:WRUID=0; ASP.NET_SessionId=3e3ahach1d34oyhtoqfshxhe; Culture=en-GB; __utma=17431487.361991764.1292186668.1354138010.1354651562.81; __utmb=17431487.9.9.1354652614319; __utmc=17431487; __utmz=17431487.1319145359.34.18.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=wizz
Host:wizzair.com
Origin:http://wizzair.com
Referer:http://wizzair.com/en-GB/Select
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11
Form Dataview URL encoded
__EVENTTARGET:HeaderControlGroupRibbonSelectView_AvailabilitySearchInputRibbonSelectView_ButtonSubmit
__VIEWSTATE:/wEPDwUBMGRkNSMYF94e4mXCiiJGEJbRixyidoa2QXSambTT2mm6cLs=
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$OriginStation:EIN
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$DestinationStation:OTP
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$DepartureDate:02/02/2013
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$ReturnDate:05/02/2013
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountADT:1
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountCHD:0
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountINFANT:0
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$BaggageCount:0
HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$ButtonSubmit:Search 
```

所以我尝试模拟来自Java程序的相同请求，即：

```
 public void doSubmit(String url, Map<String, String> data) throws Exception {
    URL siteUrl = new URL(url);
    HttpURLConnection conn = (HttpURLConnection) siteUrl.openConnection();
    conn.setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setDoInput(true);

    conn.setRequestProperty("Cookie", "WRUID=0; ASP.NET_SessionId=3e3ahach1d34oyhtoqfshxhe; Culture=en-GB; __utma=17431487.361991764.1292186668.1354138010.1354651562.81; __utmb=17431487.9.9.1354652614319; __utmc=17431487; __utmz=17431487.1319145359.34.18.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=wizz");

    DataOutputStream out = new DataOutputStream(conn.getOutputStream());

    Set keys = data.keySet();
    Iterator keyIter = keys.iterator();
    String content = "";
    for(int i=0; keyIter.hasNext(); i++) {
        Object key = keyIter.next();
        if(i!=0) {
            content += "&";
        }
        content += key + "=" + URLEncoder.encode(data.get(key), "UTF-8");
    }
    System.out.println(content);
    out.writeBytes(content);
    out.flush();
    out.close();
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String line = "";
    while((line=in.readLine())!=null) {
        System.out.println(line);
    }
    in.close();
} 
```

.... 我使用以下参数调用它，如上面的 HTTP 表单数据所示：

```
 String url = "http://wizzair.com/en-GB/Select";
    Map<String, String> data = new TreeMap<String, String>();
    data.put("__EVENTTARGET", "HeaderControlGroupRibbonSelectView_AvailabilitySearchInputRibbonSelectView_ButtonSubmit");
    data.put("__VIEWSTATE", "/wEPDwUBMGRkNSMYF94e4mXCiiJGEJbRixyidoa2QXSambTT2mm6cLs=\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$OriginStation:EIN\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$DestinationStation:OTP\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$DepartureDate:02/02/2013\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$ReturnDate:05/02/2013\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountADT:1\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountCHD:0\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$PaxCountINFANT:0\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$BaggageCount:0\n"+
            "HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$ButtonSubmit:Search" 
```

但是，我得到的响应只是来自该网站的通用网页，而不是我预期的答案。我究竟做错了什么 ？

非常感谢， 问候， 索林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T08:08:19.223

我认为您填充帖子数据的方式不正确。您应该有十个左右的键/值对，而不仅仅是两个。您在 Chrome 中看到的第二项不是一个大字符串。'HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$OriginStation' 之类的东西本身就是一个关键。这也适用于其他非常难看的命名键，它们都以 '​​HeaderControlGroupRibbonSelectView$AvailabilitySearchInputRibbonSelectView$' 开头。

此外，您还需要对每个发布数据项的“键”进行编码，而不仅仅是键的值（因为里面的 $ 字符）。使用单独的调用对双方进行编码，以避免对赋值“=”进行编码。

您还需要在原始第二个末尾删除换行符，但现在拆分键/值，因为它不存在。这也适用于第三、第四等项。

小心解释您在 Chrome 中看到的内容：-P

另一件事：您所指的网站是基于会话的：它使用 cookie 值“ASP.NET_SessionId”跟踪您的当前交互状态。这个价值只是短暂的。一般来说，您应该首先在没有此 cookie 值的情况下调用本网站，然后网站将为您提供（将您重定向到特定国家/地区的本地化包罗万象的页面）。随后，您可以在您的（第二个）请求中使用它的值来收集数据。如果您提供了无效的会话 ID，您将被一次又一次地重定向到相同的默认页面。

# selenium - 地图上的 Selenium IDE 测试（开放层）

> ID：13712252
> 
> 赞同：1
> 
> 时间：2012-12-04T21:28:38.900
> 
> 标签：selenium, openlayers, selenium-ide

我正在使用 Selenium IDE 测试具有开放图层地图的应用程序。我研究了很多关于点击地图上特定点的信息，但我做不到。你能给我一些开始吗？

提前致谢。

问候， 拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T14:31:50.040

如果您不想从 Selenium IDE 更改开放层代码，您可以使用“runScript”作为命令运行您自己的 javaScript 函数，并将您的 javaScript 代码写入目标字段（不要使用注释，因为所有内容都写在一条线）。

使用以下脚本触发 mousedown、mouseup 以及在地图上是否需要单击事件：

```
var mousedownEvent = document.createEvent('MouseEvents'); 

mousedownEvent.initMouseEvent('mousedown', true, true, window, 0, 0, 0, yourX, yourY, false, false, false, false, 0, null); 

// creates an element from where the clickEvent can be fired
// instead of using pixel you can also refer to your dom-Element by id
document.elementFromPoint(16,118).dispatchEvent(mousedownEvent);

var mouseupEvent = document.createEvent('MouseEvents'); 

mouseupEvent.initMouseEvent('mouseup', true, true, window, 0, 0, 0, yourX, yourY, false, false, false, false, 0, null); 

// same element
document.elementFromPoint(16,118).dispatchEvent(mouseupEvent);

// in some cases a click event needs to be fired as well 
```

# php - 这是什么类型的 php 数组，我该如何编辑它？

> ID：13712254
> 
> 赞同：0
> 
> 时间：2012-12-04T21:28:44.270
> 
> 标签：php, oop

我正在处理一个用 php OOP 编码的项目。我创建了一个表单，它回发给自身并获取这些值并将它们放入预定义的数组格式中。我说预定义是因为这是以前的编码人员所做的方式：

```
$plane->add(array('{"name":"Chris","age":"22"}','{"name":"Joyce","age":"45"}')); 
```

因此，当我从`$_POST`数组中获取值时，我认为这很简单，所以我尝试了

```
$plane->add(array("{'name':$customerName,'age':$customerAge}")); 
```

虽然这会触发一个错误，但它似乎将变量的实际名称作为字符串而不是它的值传递。那么如何将这些值传递给该函数。当我们讨论它时，有人能解释一下这是什么类型的数组，我认为数组总是被`$key=>value`设置的，而不是`$key:$value`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:36:34.937

正如其他评论和答案所指出的那样，数据正在以一种称为 JSON 的格式进行序列化。我建议阅读[json_encode()](http://php.net/manual/en/function.json-encode.php)和[json_decode()](http://php.net/manual/en/function.json-decode.php)

要使您的示例正常工作，您必须执行以下操作：

```
$data = array("name" => $customerName, "age" => $customerAge);
$plane->add(array(json_encode($data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:31:28.607

这看起来像 json： [http ://sandbox.onlinephpfunctions.com/code/e1f358d408a53a8133d3d2e5876ef46876dff8c6](http://sandbox.onlinephpfunctions.com/code/e1f358d408a53a8133d3d2e5876ef46876dff8c6)

代码：

```
$array = json_decode('{"name":"Chris","age":"22"}');
print_r( $array ); 
```

您可以使用以下方法将数组转换为 json：

```
 $array = array("Customer" => "John");
 $arrayJson = json_encode( $array); 
```

所以把它放在你的上下文中：

```
$array = array("Name"=>"Chris", "age" => 22);
$array2 = array("Name"=>"John", "age" => 26);
$plane->add(array( json_encode( $array),json_encode( $array2) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:32:28.607

看起来它可能是 JSON，但可能不是。

小心引用他们所做的一切，你的名字或年龄周围没有任何引号。我添加了相同类型的引号，并使用了反斜杠，这样 PHP 就不会使用它们来结束字符串：

```
$plane->add(array("{\"name\":\"$customerName\",\"age\":\"$customerAge\"}")); 
```

警惕用户数据，如果`$customerName`来自`$customerAge`POST 数据，您需要使用经过良好测试的转义功能正确转义它们，而不是您一起破解的东西；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:35:07.997

看起来您的数组是 JSON 编码数组的数组。尝试使用：

```
$plane->add(array('{"name":"' . $nameVar . '","age":"' . $ageVar . '"}', ...)); 
```

如果您使用以下内容：

```
echo json_encode(array('name' => 'Me', 'age' => '75'), array('name' => 'You', 'age' => '30')); 
```

您将获得以下字符串：

```
[{"name":"Me","age":"75"},{"name":"You","age":"30"}] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T21:35:57.923

我相信您遇到了错误，因为您尝试传递给函数的不是 JSON，而（看起来）该函数需要一个数组 json 字符串，手动尝试编写字符串可能不是一个好主意，因为某些字符和类型编码不同。最好使用[json_encode](http://php.net/manual/en/function.json-encode.php)来获取 json 字符串。

```
$plane->add(array(json_encode(array('name'=>$customerName,'age'=>$customerAge)))); 
```

# javascript - jquery 的 on 和 live 问题

> ID：13712266
> 
> 赞同：3
> 
> 时间：2012-12-04T21:29:23.893
> 
> 标签：javascript, jquery

我有以下代码：

```
var $reviewButton = $('span.review_button');

$reviewButton
    .live('click',
        function(){

            $('#add_reviews').show(); 

        }
    ) 
```

稍后在脚本中，我使用 AJAX 调用加载一些内容，并且 $('span.review_button') 的另一个实例进入图片。我更新了上面的代码以使用“.live”，因为单击事件无法与 AJAX 生成的评论按钮一起使用。

此代码有效，因为 .live(click //) 事件适用于静态“span.review_button”和 AJAX 生成的“span.review_button”

但是我看到 .live 已被弃用，所以我尝试通过切换到“.on”来遵循 jquery 文档说明，但是当我切换到下面的代码时，我在切换到“.live”之前遇到了同样的问题click 函数适用于“span.review_button”的原始实例，但不适用于 AJAX 生成的实例：

```
var $reviewButton = $('span.review_button');

$reviewButton
    .on('click',
        function(){

            $('#add_reviews').show(); 

        }
    ) 
```

建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T21:30:32.787

事件委托的正确语法是：

```
$("body").on("click", "span.review_button", function() {
    $("#add_reviews").show(); 
}); 
```

在这里，*您*可以`body`使用.*`"span.review_button"`*

 ***注意力！**[`on()`](http://api.jquery.com/on/)正如评论中所讨论的，您应该在委托事件方法中使用字符串值作为方法的第二个参数，而*不是 jQuery 对象*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T21:30:54.567

这是因为您需要使用`on()`.

```
$("#parentElement").on('click', '.child', function(){}); 
```

`#parentElement`绑定事件时必须存在于 DOM 中。

该事件将冒泡 DOM 树，一旦到达`#parentElement`，就会检查它的来源，如果匹配`.child`，则执行该函数。
因此，考虑到这一点，最好在绑定时将事件绑定到*DOM 中存在的最近的父元素*- 以获得最佳性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T21:36:10.083

将您的第一个选择器（在本例中为 div.content）设置为包含单击按钮以及将使用 AJAX 进入的任何 DOM 的父容器。如果由于某种原因必须更改整个页面，它甚至可以更改为“body”，但是您想尝试使选择器尽可能高效，因此将其缩小到最接近的父 DOM 元素不会改变。

其次，您想将点击动作应用到 span.review_button，这反映在下面的代码中。

```
// $('div.content') is the content area to watch for changes
// 'click' is the action applied to any found elements
// 'span.review_button' the element to apply the selected action 'click' to. jQuery is expecting this to be a string.
$('div.content').on('click', 'span.review_button', function(){
    $('#add_reviews').show(); 
}); 
```*

# java - 如何通过两级路由器upnp转发端口

> ID：13712270
> 
> 赞同：7
> 
> 时间：2012-12-04T21:29:46.297
> 
> 标签：java, networking, port, nat, upnp

我正在使用 java sbbi 库来转发端口。但是我的路由器连接到另一个路由器，所以第一个路由器的外部 ip 是第二个路由器 dhcp 给定的 ip。有没有办法转发第二个路由器上的端口？这是我的代码：

```
InternetGatewayDevice[] devices=InternetGatewayDevice.getDevices( 1000 );
System.out.println("Found "+devices.length+" Devices");
InternetGatewayDevice dev = devices[ 0 ];
System.out.println(dev);
System.out.println( "External IP = " + dev.getExternalIPAddress() );

System.out.println( dev.addPortMapping( "Streamternet", "TCP", null, 1333,
                                        "192.168.0.105", 8888, 0 ) );

System.out.println( "waiting for connection" );
HTTPServer.main(null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-27T17:37:07.027

正如@Danpe 在他的回答中所说，当您位于多个 NAT 之后时，UPnP 不会让您打开端口。

由于我也在开发 P2P 软件，从我收集到的信息来看，这里是一个可以尝试连接两个对等点的方法：

1.  使用 TCP 或 UDP[打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)连接。
2.  如果上述方法不起作用，则任一侧的路由器之一使用[Symmetric NAT](http://en.wikipedia.org/wiki/Network_address_translation#Methods_of_port_translation)。尝试 UPnP 或 NAT-PNP。
3.  如果上述方法不起作用，则应用程序位于不支持 UPnP、NAT-PNP 的路由器后面……或者您位于多个级别的 NAT 后面。现在您可以：

    1.  与应用程序的用户沟通，她需要在这些路由器上打开端口。正如您在评论中提到的那样，这是一个不幸的解决方案，因为它假设用户拥有先进的技术知识。但这似乎确实是一些公司实际所做的。例如，请参见[此处](http://slinkware.com/help/double-nat/)。

    2.  使用中继服务器，例如使用[TURN 协议](http://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT)的中继服务器，关闭端口的用户将通过该中继服务器进行通信。此中继服务器可能是一个或多个端口打开的对等点（如 uTorrent 的情况），或者它可以是您的服​​务器，或两者的组合：如果有打开端口的对等点，则使用这些对等点，否则使用您自己的服务器（Skype 就是这种情况）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T14:10:35.450

据我所知，您当前的设置是不可能的，因为您无法直接访问路由器的网关。

我能想到2个解决方案。

1.  禁用您的路由器 DHCP 服务器，以便他和您都可以从第二个路由器获取您的 IP，然后您将拥有相同的子网，并且您可以访问每个路由器。
2.  让另一台 PC 连接到第二个路由器网络，并让他成为一个服务器来监听您的命令，该服务器将为您执行 UPNP 任务。（这可能需要先手动设置端口转发）

希望我能帮上忙。

# wordpress - wp_query 显示以某个字符开头的页面

> ID：13712272
> 
> 赞同：3
> 
> 时间：2012-12-04T21:29:49.870
> 
> 标签：wordpress, wordpress-theming

对 wordpress 中的 wp-query 功能有疑问。我的问题是，是否可以只显示以某些字符开头的页面。例如，我想显示所有以 char A 开头的页面，并且该页面是某个父页面的子页面。我知道如何用一些全名显示子页面：

```
$query = new WP_Query( 'pagename=contact_us/canada' ); 
```

现在我想要类似的东西：

```
$query = new WP_Query( 'pagename=contact_us/c%' ); 
```

那么所有名称以 c 开头的页面？我使用 SQL 逻辑尝试此操作，并将 % 用于任何字符。但这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:55:29.803

我想通了，如果有人会遇到同样的问题，这里就是解决方案：

```
<?php
    $child_pages = $wpdb->get_results("SELECT *    FROM $wpdb->posts WHERE post_title like 'T%' AND post_parent = '746' AND post_status='publish'");    ?>
    <?php if ( $child_pages ) : foreach ( $child_pages as $pageChild ) : setup_postdata( $pageChild ); ?>
    <div class="leksikon_rezultat">

            <span><?php echo $pageChild->post_title; ?></span>
            <a href="<?php echo  get_permalink($pageChild->ID); ?>" rel="bookmark" title="<?php echo "Opširnije"; ?>"><?php echo "Opširnije"; ?></a>
    </div>
    <?php endforeach; endif; 
```

因此，使用 $wpdb（wordpress 类 wpdb 的对象），您可以使用经典 SQL 从 wordpress 数据库中的任何表中获取任何数据。

# c# - System.Nullable ' 不包含 'TotalMinutes' 的定义

> ID：13712273
> 
> 赞同：4
> 
> 时间：2012-12-04T21:29:59.650
> 
> 标签：c#, c#-4.0, datetime, nullable, timespan

是否有解决此错误的优雅方法，而不是在 if() 中检查 .HasValue 然后添加诸如 DateTimeUtcNow.Value 之类的值？

```
// Compare nullable date time entity.End with utcnow but only compare up to minute precision
// for time.
//
if ((int)(entity.End - DateTime.UtcNow).TotalMinutes < 0) 
{
   // ASSERT: entity.End < UTCNow (i.e. 12/4/2012 3:56 PM < 12/4/2012 3:57 PM) 
} 
```

> 错误：System.Nullable' 不包含 'TotalMinutes' 的定义

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T21:33:24.823

我个人会这样写：

```
if (entity.End > DateTime.Now.AddMinutes(1))
{
    ...
} 
```

`entity.End`如果为空，则该条件将为假。

我经常发现，与其将一个日期/时间与另一个日期/时间进行比较，并将其与一个`TimeSpan`（或您正在使用的任何类型）进行比较，计算下限或上限并将其与变量日期/时间进行比较更清楚。在这种情况下，它肯定会很干净。

编辑：好的，现在问题更清楚*了*，我将其写为：

```
DateTime now = DateTime.UtcNow;
DateTime lowerBound = new DateTime(now.Year, now.Month, now.Hour, now.Minute,
                                   0, 0, DateTimeKind.Utc);
DateTime upperBound = now.AddMinutes(1);
if (entity.End >= lowerBound && entity.End < upperBound)
{
    ...
} 
```

我怀疑我可能仍然误解了...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:59:09.720

一种选择是创建一个扩展方法来访问可为空的值并传播空值：

```
public static TOut? Select<T, TOut>(this T? nullable, Func<T, TOut> func) 
    where T : struct 
    where TOut : struct
{
    return nullable.HasValue ? (TOut?)func(nullable.Value) : null;
} 
```

那么你可以这样做：

```
if ((entity.End - DateTime.UtcNow).Select(t => t.TotalMinutes) > 1)
{
} 
```

# java - 打印两个数组的共同值

> ID：13712275
> 
> 赞同：3
> 
> 时间：2012-12-04T21:30:03.163
> 
> 标签：java, arrays

我正在开发一个 java 项目，需要在两个数组之间打印公共值。

我事先已经按排序顺序打印了两个数组，它们看起来都很好（包含它们应该包含的所有值）。但是，当我遵循最简单的算法时（见下文），即使我可以在两个数组的打印输出中手动看到没有比较的情况下，在执行以下操作后应该打印更多值，我也没有找到所有常见值：

```
 for(int i=0; i<fibList.size(); i++)
        {
            for(int j=0; j<primeList.size(); j++)
            {
                if(fibList.get(i) == primeList.get(j))
                {
                    System.out.print(" " + fibList.get(i));
                    break;
                }
            }
        } 
```

请让我知道你在想什么。希望这只是一个简单的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:32:01.353

`if(fibList.get(i).equals(primeList.get(j)))`可用于。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T21:32:11.747

您很可能想要：

改变：

```
if(fibList.get(i) == primeList.get(j)) 
```

到：

```
if(fibList.get(i).equals(primeList.get(j))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T21:32:34.930

```
List<Integer> result = new ArrayList<Integer>(fibList);
result.retainAll(primeList);
for (Integer i : result) {
    System.out.println(i);
} 
```

# linux - Linux 内核代码覆盖率 - GCOV

> ID：13712280
> 
> 赞同：5
> 
> 时间：2012-12-04T21:30:24.890
> 
> 标签：linux, kernel, code-coverage, gcov, lcov

我正在尝试使用[Linux 测试项目](https://sourceforge.net/projects/ltp/?source=directory)中的一些测试场景并获取[内核源代码覆盖率](http://ltp.sourceforge.net/coverage/gcov.php)。

我正在使用 GCOV/LCOV 这样做。

这是我到目前为止的东西：

*   构建配置中的 GCOV 标志

> 基于 GCOV 的内核分析
> 
> CONFIG_GCOV_KERNEL=y
> 
> CONFIG_GCOV_PROFILE_ALL=y
> 
> Linux内核版本：2.6.32.60+drm33.26

*   构建内核后，我在源文件夹中有所有 .gcov 文件
*   当我使用源文件作为输入时，GCOV/LCOV 工作

我应该拥有但我没有的东西

*   /Proc/GCOV 文件夹
*   GCOV 内核模块 (gcov.o?)

现在我想要的是运行测试场景并使用 LCOV 获取到目前为止已使用的 Linux 内核代码部分。但是当我调用 LCOV -c 时，即使所有构建标志都正常，这也是我得到的。

> 加载所需的 gcov 内核模块。
> 
> lcov: 错误: 无法加载所需的 gcov 内核模块！

< 2.6.30 有一个内核补丁，然后它被内置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:10:07.040

下面是我对 ubuntu 12.04 默认内核的尝试。以为 gcov 未启用，但已安装调试 fs，并且可以在其中找到一些 kvm 调试信息。

```
ubuntu:/sys/kernel# mount -t debugfs none /sys/kernel/debug
mount: none already mounted or /sys/kernel/debug busy
mount: according to mtab, none is already mounted on /sys/kernel/debug
ubuntu:/sys/kernel# umount /sys/kernel/debug
ubuntu:/sys/kernel# mount -t debugfs none /sys/kernel/debug
ubuntu:/sys/kernel# ls debug
acpi  bdi  bluetooth  extfrag  gpio  hid  kprobes  kvm  mce  regmap  regulator  sched_features  suspend_stats  tracing  usb  wakeup_sources  x86
ubuntu:/sys/kernel# cat debug/kvm/
efer_reload          host_state_reload    io_exits             mmio_exits           mmu_pte_write        nmi_window           signal_exits
exits                hypercalls           irq_exits            mmu_cache_miss       mmu_recycled         pf_fixed             tlb_flush
fpu_reload           insn_emulation       irq_injections       mmu_flooded          mmu_shadow_zapped    pf_guest
halt_exits           insn_emulation_fail  irq_window           mmu_pde_zapped       mmu_unsync           remote_tlb_flush
halt_wakeup          invlpg               largepages           mmu_pte_updated      nmi_injections       request_irq
ubuntu:/sys/kernel# cat debug/kvm/io_exits
467789515
ubuntu:/sys/kernel# 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T06:57:16.767

请阅读这份文件

[http://www.mjmwired.net/kernel/Documentation/gcov.txt](http://www.mjmwired.net/kernel/Documentation/gcov.txt)

以下是您的问题的答案：

1.  没有用于内核覆盖的 proc fs。从新的 kenrel 启动后，您必须通过命令安装 debug-fs：“mount -t debugfs none /sys/kernel/debug”并从此文件中读取内核的覆盖日志

2.  内核覆盖率不能构建为模块。如您所见，CONFIG 选项是“Y”，而不是“M”

# drupal - drupal mod_rewrite 不工作

> ID：13712283
> 
> 赞同：1
> 
> 时间：2012-12-04T21:30:42.893
> 
> 标签：drupal, mod-rewrite, centos5

我在 Clean Url Module 中遇到了 drupal 问题。在我的 apache conf 中，我有： LoadModule rewrite_module modules/mod_rewrite.so 取消注释。

当我运行 #/usr/sbin/httpd -M 时，我得到了模块：

rewrite_module（共享）

但是在drupal中我看不到（例如）localhost / mydrupalpath / page（404），而是我需要输入“？q =”以获得结果：localhost / mydrupalpath /？q = page。

在 .htaccess 中，我也有正确的配置：

RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

我的服务器：

服务器版本：Apache/2.2.3 PHP 版本 5.3.19 MySQL 版本 5.5.28 Drupal 6.19 Centos 5.8

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:36:31.230

检查以确保对于 drupal 所在的目录，AllowOverride 未设置为 none。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:35:02.167

是否`RewriteEngine On`出现在您的 Apache 配置或`.htaccess`文件中？由于您使用`.htaccess`的是重写，因此您可能还需要一个[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)指令。

# php - 从发布的表单显示多维数组

> ID：13712284
> 
> 赞同：0
> 
> 时间：2012-12-04T21:30:43.960
> 
> 标签：php, forms, multidimensional-array

您好我正在尝试从表单中显示信息，问题的数量和选择的数量是由用户动态生成的。表格如下：

```
<input name='questions[]' type='text' value='question 1' /><br/>
   <input name='choice[1-1][]' type='text' value='option 1' /><br/>
   <input name='choice[1-1][]' type='text' value='option 2' /><br/>
   <input name='choice[1-1][]' type='text' value='option 3' /><br/>
<input name='questions[]' type='text' value='question 2' /><br/>
   <input name='choice[2-1][]' type='text' value='option 1' /><br/>
   <input name='choice[2-1][]' type='text' value='option 2' /><br/>
   <input name='choice[2-1][]' type='text' value='option 3' /><br/> 
```

ETC...

我在创建生成表单的代码方面没有问题，我的问题在于显示用户放入表单的信息。

到目前为止，我已经尝试使用 foreach 循环来显示问题，然后使用另一个 foreach 循环来显示选择。我也尝试过使用 count() 然后使用 for 循环来计算选择的数量并以这种方式输出它们，但没有成功。

我的问题是，当我尝试显示选项时，它们都在显示下一个问题之前显示，然后在脚本移动到下一个问题之前再次显示所有选项，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:03:09.157

您的预期结果不是很清楚，但这是我认为您想要做的事情的一个想法。

```
$i=1;
foreach ($questions as $question){
echo $question;
echo "<br />";
foreach($choice[$i.'-1'] as $choices){
echo '-'.$choices.'<br />';
}
echo "<br />";
$i++;
} 
```

根据您的`<form>`代码，当它发布时，您将拥有如下数组 -

```
$questions = array('question 1', 'question 2');
$choice['1-1']= array('option 1','option 2','option 3');
$choice['2-1']= array('option 1','option 2','option 3'); 
```

所以`foreach`在这些数组上使用，你会得到 -

```
question 1
-option 1
-option 2
-option 3

question 2
-option 1
-option 2
-option 3 
```

[您可以在 - http://phpfiddle.org/main/code/i4f-k7w](http://phpfiddle.org/main/code/i4f-k7w)看到一个 phpfiddle

# c++ - 将结构评估为布尔值

> ID：13712285
> 
> 赞同：-3
> 
> 时间：2012-12-04T21:30:49.623
> 
> 标签：c++

我坚持将结构评估为 c++ 中的布尔值

```
struct foo {
  int bar;
};
foo* x = (foo*)malloc(sizeof(foo));
int y = ( x ) ? 3 : 4; 
```

这是运行时发生的情况：

```
could not convert 'x' from 'foo' to 'bool' 
```

在搜索布尔运算符时，我只能找到重载比较器布尔运算符的方法。是否有一个直接的评估结构作为布尔运算符？

如果可能的话，我还想将 foo 保留为普通的旧数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T21:35:57.137

没有直接的evaluate-struct-as-a-bool 运算符。这就是*为什么*有一种方法可以*给*结构一个`operator bool`方法。`bool`它告诉编译器在上下文中使用给定结构类型的值时如何解释它。

但是，您显示的代码不会使用这样的运算符，因为该运算符适用于*structs*，而不是*指向*structs 的指针；你有一个类型的表达式`foo*`，不是`foo`。指针会自动转换为，`bool`因为这是编译器知道如何执行的内在转换。空指针为假，非空指针为真。问题中显示的代码永远不会产生报告的错误消息。

如果您确实在编译器期望 a 的地方有一个结构`bool`，并且无论出于何种原因，您都不能为该结构提供一个`operator bool`方法，那么您可以以老式方式执行转换并使用普通函数：

```
bool interpret_foo_as_bool(foo const& f); 
```

实现你想要的函数，然后调用它，传递你的`foo`值。例如：

```
foo* x = ...;
int y = interpret_foo_as_bool(*x) ? 3 : 4; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T21:36:29.853

这不可能是该错误的正确代码。该错误表明它无法`x`从`foo`to转换`bool`，但`x`不是a ，*而是*`foo`a `foo*`。并且 a`foo*` *可以*转换为 bool ¹，因此您给出的代码不会有错误。

如果您希望能够将`foo`对象用作条件，则需要`operator bool`为您的类提供成员函数`foo`：

```
struct foo {
  int bar;
  operator bool() { return true; }
};
foo x;
int y = x ? 3 : 4; 
```

在这种情况下， any`foo`将始终评估为`true`。这种转换被认为是“不安全的”，因为您的对象可能会在一些意想不到的地方`bool`被转换。`bool`为了解决这个问题，在 C++03 中，您可以使用[安全的 bool 习惯用法](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool)，在 C++11 中，您可以将您的标记`operator bool`为`explicit`：

```
struct foo {
  int bar;
  explicit operator bool() { return true; }
}; 
```

仍然会`explicit operator bool`在某些地方自动使用，例如`if`语句和`while`循环中的条件。还有[其他答案](https://stackoverflow.com/a/6242355/150634)涵盖了这一点。

* * *

> ¹算术、无作用域枚举、指针或指向成员类型的指针的纯右值可以转换为类型的纯右值`bool`。零值、空指针值或空成员指针值转换为`false`; 任何其他值都转换为`true`.

# cocoa - 如何获得像 Mail.app 和 Xcode 中的两行工具栏？

> ID：13712287
> 
> 赞同：5
> 
> 时间：2012-12-04T21:30:52.780
> 
> 标签：cocoa, nswindow, nstoolbar

我试图在我的应用程序中的 NSToolbar 之后添加一个“第二行”，它仍然是标题栏的一部分。例如，Mail 在 NSToolbar 下方有一条细的灰色分隔线，下面有一些额外的项目。非常具体地说，当窗口进入全屏模式时，第二个“行”在系统菜单栏下向下滑动时保持连接到标题栏。Xcode 也有类似的故事。

![在此处输入图像描述](../Images/181d17789f4613a77a6fb9c589694b89.png) ![在此处输入图像描述](../Images/123bda81a76f857a0c3928499a752580.png) ![在此处输入图像描述](../Images/3385cbb4e8ee1d2cd31f1a1f3b8bde04.png) ![在此处输入图像描述](../Images/0baf616c262136fb8656a0e46fee5959.png)

我尝试将我的 NSWindow 设置为带纹理的并将我的第二行控件直接放在窗口的内容视图中。虽然这在窗口模式下大部分看起来是正确的，但当它在全屏模式下向下滑动时，这些控件当然不会显示在工具栏上。那么我怎样才能实现与 Mail 和 Xcode 相同的行为呢？我查看了很多工具栏自定义代码，但没有一个真正涵盖这种特定情况。

![在此处输入图像描述](../Images/222929fb36b6a492d75a7c3dc4b0d8c5.png) ![在此处输入图像描述](../Images/36d3a863c24292814e6f81e8bcad6ca3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-14T03:39:19.420

`fullScreenAccessoryView`在 macOS 10.10 中已弃用

为了在最新版本的 macOS 中执行此操作，请使用`addTitlebarAccessoryViewController`您的方法`NSWindow`并传入`NSTitlebarAccessoryViewController`.

例如：

```
NSTitlebarAccessoryViewController *accessoryViewController = [[NSStoryboard storyboardWithName:@"Main" bundle:nil] instantiateControllerWithIdentifier:@"AccessoryViewController"];
[self.mainWindowController.window addTitlebarAccessoryViewController:accessoryViewController]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:34:46.393

我需要做的是调用`[NSToolbar setFullScreenAccessoryView:]`工具栏下方的视图。这导致了我的目标行为。有关此方法，请参阅[NSToolbar 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSToolbar_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:43:00.760

第一个是普通工具栏。对于第二个工具栏，您可以创建所需高度的单独视图并将其添加到主着陆窗口中。

# opengl - OpenGL：纹理内存不足？

> ID：13712291
> 
> 赞同：2
> 
> 时间：2012-12-04T21:31:17.783
> 
> 标签：opengl, memory-leaks, textures

我正在使用 OpenGL 编写一个小游戏（通过 JOGL 在 Java 中，但我认为这并不重要），最近我收到了很多关于人们收到 OpenGL 错误“1285”的错误报告，这似乎表明“内存不足”。我在创建新纹理后检查时发现了这一点`glGetError`，这让我感觉纹理内存快用完了。

然而，这让我有点吃惊。OpenGL不应该为我管理纹理内存，根据需要在GPU和进程内存之间交换纹理吗？当然，规范`glTexImage2D`不包括任何“内存不足”错误作为任何可能的错误条件。

尽管有规范，这是否是 OpenGL 驱动程序普遍接受的做法？尽管有规范，只有一些驱动程序这样做吗？如果我在之后发现此错误，是否需要注意删除一段时间未使用的纹理`glTexImage2D`？或者我可能在这里看到了 OpenGL 的错误报告并没有很简洁地传达给我的完全不同的东西？

编辑：有关更多信息，不幸的是，我无法自己调试问题，因为我没有得到它。从人们发给我的报告中阅读，绝大多数受此困扰的人似乎都在使用英特尔卡，但我也发现了一些 nVidia 卡（甚至是 680）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:39:02.730

这只是一个猜测，但您的程序可能会遭受地址空间碎片的影响。如果确实如此，那么您在 Java 运行时中运行确实很重要。

OpenGL，即实现，必须保留所有数据对象的副本，以便它可以按需交换它们。但是那些副本，它们需要您进程的地址空间。而且，如果您的进程环境进行大量分配/解除分配，这是 Java 的本质（为几乎所有内容创建对象），您的地址空间可能会变得支离破碎，无法再分配更大的卡盘.

需要检查的几点：您的程序是在 32 位还是 64 位 JRE 上运行的。如果它是 32 位可执行文件，请尝试使用 64 位 JRE 会发生什么。如果问题在 64 位环境中消失，而在 32 位环境中的同一台机器上，它们确实存在，这肯定是地址空间碎片问题。

# objective-c - Objective-C – 为后台处理构建 GCD 代码

> ID：13712299
> 
> 赞同：1
> 
> 时间：2012-12-04T21:31:38.950
> 
> 标签：objective-c, cocoa, grand-central-dispatch

我有一些代码需要一些时间来处理，因此它不应该在主队列上运行。但是我不确定如何正确“构造” GCD 代码段。即每次应用程序激活时，我都在进行同步操作：

**AppDelegate.m**

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    AddressBookHelper *abHelper = [AddressBookHelper sharedInstance]; // singleton helper class of NSObject

    [abHelper sync];
} 
```

AddressBookHelper 中的同步代码如下所示：

**地址簿助手.m**

```
- (void)sync {

    NSArray *people = // Fetching some people from Core Data

    NSMutableArray *syncConflicts;
    // Start doing some business logic, iterating over data and so on

    for (id object in people) {
    // Process some data
        [syncConflicts addObject:object];
    }

    self.syncConflicts = syncConflicts;

    // I have separated this method to keep the code cleaner and to separate the logic of the methods
    [self processSyncConflicts];
}

- (void)processSyncConflicts {

    if ([self.syncConflicts count] > 0) {
        // Alert the user about the sync conflict by showing a UIAlertView to take action
        UIAlertView *alert;
        [alert show];

    } else {

        // Syncing is complete
    }
} 
```

那么有了这个代码结构，我该如何正确地使用 GCD 把这个代码放在后台线程上呢？

就这么简单吗？

**AppDelegate.m**

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    AddressBookHelper *abHelper = [AddressBookHelper sharedInstance]; // singleton helper class of NSObject

    dispatch_queue_t queue = dispatch_queue_create("addressbookSyncQueue", 0);
    dispatch_async(queue, ^{
            [abHelper sync];
    });
} 
```

**地址簿助手.m**

```
- (void)processSyncConflicts {

    if ([self.syncConflicts count] > 0) {
        // Alert the user about the sync conflict by showing a UIAlertView to take action
        UIAlertView *alert;
        dispatch_queue_t mainQueue = dispatch_get_main_queue();

        dispatch_async(mainQueue, ^{
            [alert show];
        });

    } else {

        // Syncing is complete
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T22:25:36.850

我在您的代码中看到了几个潜在的问题。

## 多个同时同步

假设您收到`applicationDidBecomeActive:`，但在`[abHelper sync]`完成之前，用户切换离开您的应用程序，然后返回到您的应用程序。现在您收到另一个`applicationDidBecomeActive:`，创建一个新的 GCD 队列，并`[abHelper sync]`在第一个仍在运行时启动另一个。坏的！

更改您的`AddressBookHelper`类以创建自己的 GCD 队列并将其存储在实例变量中。更改接口，以便同步操作将自身放入该队列。例子：

```
@interface AddressBookHelper : NSObject

+ (AddressBookHelper *)sharedInstance;

- (void)syncInBackground;

@end

@implementation AddressBookHelper {
    dispatch_queue_t queue_;
}

- (void)syncInBackground {
    if (!queue_) {
        queue_ = dispatch_queue_create("AddressBookHelper", 0);
    }
    dispatch_async(queue_, ^{ [self syncOnCurrentQueue]; });
}

- (void)syncOnCurrentQueue {
    // This is now a private method that always runs on queue_.
    // ...
}

@end 
```

## 属性线程安全

我假设您的主线程需要访问`syncConflicts`，因为您将其存储在属性中。如果是这样，您应该更新`syncConflicts`主队列，这样您就不会在一些正在使用它的主队列操作中间更改它。

```
 dispatch_sync(dispatch_get_main_queue(), ^{
        self.syncConflicts = syncConflicts;
    }); 
```

## 核心数据线程安全

您没有向我们展示您如何访问 Core Data。您需要注意 Core Data 对象通常不是线程安全的。您的后台同步操作应创建自己的托管对象上下文，作为主托管对象上下文的子项。然后，当操作完成时，它可以告诉子上下文保存，更改将以线程安全的方式推送到父上下文。

由于您`people`将从该子上下文中获取对象，因此无法将它们传递回主线程。相反，您需要存储每个对象的`objectID`，并使用它来使用主线程的上下文重新创建对象。

```
- (void)syncOnCurrentQueue {
    // This is now a private method that always runs on queue_.

    NSManagedObjectContext *syncContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];
    syncContext.parentContext = self.mainContext;

    NSArray *people = nil; // Fetching some people from syncContext

    NSMutableArray *syncConflictIDs = [[NSMutableArray alloc] init];
    // Start doing some business logic, iterating over data and so on

    for (id object in people) {
        // Process some data
        [syncConflictIDs addObject:[object objectID]];
    }

    NSError *error;
    if (![syncContext save:&error]) {
        // save to main context failed...
    }

    dispatch_sync(dispatch_get_main_queue(), ^{
        // assuming main context has NSMainQueueConcurrencyType
        NSMutableArray *syncConflicts = [[NSMutableArray alloc] initWithCapacity:syncConflictIDs.count];
        for (NSManagedObjectID *objectID in syncConflictIDs) {
            [syncConflicts addObject:[self.mainContext objectWithID:objectID]];
        }
        self.syncConflicts = syncConflicts;
    });

    // I have separated this method to keep the code cleaner and to separate the logic of the methods
    [self processSyncConflicts];
} 
```

## UIKit 线程安全

您只能像`UIAlertView`在主线程上那样操作 UIKit 对象。您实际上并没有显示您`alloc/init`的警报视图在哪里，但我假设您并没有强迫它出现在您声明变量的主线程上。您需要确保在主线程上执行此操作。

```
- (void)processSyncConflicts {
    dispatch_async(dispatch_get_main_queue(), ^{
        if ([self.syncConflicts count] > 0) {
            // Alert the user about the sync conflict by showing a UIAlertView to take action
            UIAlertView *alert = [[UIAlertView alloc] init...];
            [alert show];
        } else {
            // Syncing is complete
        }
    }
} 
```

# datagrid - Primefaces dataGrid 内容在删除项目后不会更新

> ID：13712300
> 
> 赞同：3
> 
> 时间：2012-12-04T21:31:46.817
> 
> 标签：datagrid, primefaces

我有一个数据网格组件：

```
<h:form id="myForm">
    <h:panelGroup id="statementDataContent" layout="block">

[... some controlls ...]

    <p:dataGrid id="dg" columns="#{statementDataRequestAction.columnCount}"  var="statement"
       value="#{statementDataRequestAction.data}"  rowIndexVar="#{statement.id}" >
          <p:column>
         <p:panelGrid columns="1" >

              [... some controlls ...]
              <p:commandButton value="-" immediate="true" type="submit" actionListener="#{statementDataRequestAction.remove(statement)}"  process="@form" update="??? " />

         </p:panelGrid>
          </p:column>
    </p:dataGrid> 
```

如您所见，有一个按钮可以删除当前项目。它正确调用 bean，并且该方法从列表中删除支持网格的项目。数据网格甚至刷新（我可以看到显示的列数减少了 1），但不是网格元素内的值。

在代码中，我特意写了??? 因为我尝试了几十个选项，包括：

*   刷新网格：`dg`, `:myForm:dg`, 等
*   刷新整个表单：`@form`、`:myForm`、`:myForm:statementDataContent`等。
*   刷新内部的字段，但很难解决它们
*   甚至一些奇特的东西，比如使用`p:remoteCommand`or `p:collector`*

我的 bean 在 SessionScope 中（无法更改）。

并帮助理解我的问题：想象一下这个起始状态：

![删除前](../Images/fa3dcc63f3f339b52959b1e82e5f6dba.png)

我在数据网格中有三个项目。现在我按下最左边（第一个）项目的删除按钮。日志告诉我们从支持集合中删除了正确的元素：

```
Remove statement: 4 - StatementDataWrapper [id=4, data=Entity: 16 - hu.avhga.entities.StatementData, year=1000]
===============Removed: true :
[StatementDataWrapper [id=5, data=Entity: 17 - hu.avhga.entities.StatementData, year=1010], StatementDataWrapper [id=6, data=Entity: 18 - hu.avhga.entities.StatementData, year=1020]] 
```

此外，以下屏幕截图显示了之后的结果：

![在此处输入图像描述](../Images/9591a7edfbe4b54c631fca18a20a6256.png)

如您所见，网格现在检测到只有两个项目要显示，但显示的两个是前两个。

请给我一些提示，因为我用完了它们。:-(

提前致谢！

巴拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:09:55.577

PrimeFaces 提供的`p:commandButton`默认使用 AJAX，因此您应该设置`process="@none"`而不是设置`immediate`标志（[PrimeFaces 展示中的示例](http://www.primefaces.org/showcase/ui/pprPartialTree.jsf)）。

使用`p:commandButton`inside`p:dataTable`也不能正常工作，但在 3.4 版中已修复（如果我没记错的话）。这也适用于`p:dataGrid`.

# ipad - 如何有效地交换纹理颜色？

> ID：13712303
> 
> 赞同：0
> 
> 时间：2012-12-04T21:31:56.800
> 
> 标签：ipad, opengl-es, textures

我有一个汽车的 ipad opengl-es 1.1 应用程序，我希望用户能够更改颜色。3d 网格是 uv 纹理的，它以基本的灰色开始（带有阴影和高光）。我想向用户展示十几个颜色样本，以给汽车上色。我只是不确定此时我将如何有效/高效地交换颜色。

我的意思是，当前纹理是 1024 x 1024。我是否为我的应用程序中可用的每种颜色都包含一个 1024 x 1024 纹理？我在想可能有一种更简单的方法，如果我可以在原始 1024 x 1024 纹理上为每种颜色定义一个小的 20 x 20 像素表示。然后不知何故，当用户选择颜色样本时，我可以去抓取颜色并将其“应用”到汽车上。这有意义吗？

我已将所有网格照明/颜色烘焙到我的纹理中，因此应用程序本身不使用照明，因此仅尝试更改颜色对我的纹理没有影响。如果我确实使用照明，我可以将灰色纹理与材质颜色变化混合，但我真的不喜欢这个解决方案的外观。我正在寻找纹理特定的解决方案（我认为）

任何想法或建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:16:44.127

我怀疑除了在 opengl 1.1 中制作更多纹理之外，您还能做任何事情。但我认为无论如何这将是你最好的选择。如果您要更改为 opengl 2.0 并使用着色器更改颜色，我认为性能不会太好，因为必须进行大量检查以查看颜色的范围，并将其更改为适当的颜色. 无论如何，这看起来并不顺利。

我会推荐多纹理路线。无论如何，这种大小的纹理只有大约 4mb，所以空间权衡还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:48:32.293

你可以尝试这样的事情：

离线：

1.  创建黑色和白色版本的汽车纹理
2.  从白色中减去黑色以创建新的“delta”纹理。

运行：

1.  当玩家选择一种颜色时，创建一个新纹理（在软件中）将 delta 纹理乘以颜色，并添加到黑色汽车纹理。

您只需要在颜色发生变化时生成该纹理。对于您想要的任何颜色，这应该是一个非常快速的操作，并且存储成本最低（本质上，内存中有两个纹理，一个用于 GL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T04:51:16.000

对于汽车，我实际上需要设置 shouldUseLighting = YES。通过此设置，我可以使用多纹理混合以及颜色选择器弹出窗口来允许用户选择各种颜色。

# entity-framework - Entity Framework 两个 DbContext 在一个数据库中

> ID：13712309
> 
> 赞同：0
> 
> 时间：2012-12-04T21:32:27.263
> 
> 标签：entity-framework, migration

展示

1.  一个 MS SQL 数据库“DB”；

2.  带有迁移的 DbContext1；

3.  不需要 DbContext2 迁移；

任务

1.  如何让他们生活在同一个数据库'DB'中？

2.  如何使用迁移 DbContext1 但不删除数据 DbContext2（表名不相交）？

3.  RecreateDbContext2 方法怎么写

采样这个

```
public void RecreateDbContext2(DbContext2 dbContext2)
{
    dbContext2<Table1>.DropTable();
    dbContext2<Table1>.CreateTable();
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:07:13.590

您可能想在[此处查看 EF6 和多租户迁移](http://entityframework.codeplex.com/wikipage?title=Multi-tenant%20Migrations)

# perl - 新行的 grep 输出

> ID：13712312
> 
> 赞同：0
> 
> 时间：2012-12-04T21:32:30.883
> 
> 标签：perl, bash, sed, awk, text-parsing

我正在开发一个脚本，该脚本解析打开的 xml 文档中的信息并解析脚本的输出以提供 csv 输出。

我被困在最后一个障碍上。

```
find /media/path/to/files -type f -iname '*.xlsx' -exec perl parseXML.py {} \; \
    | grep -v 'Document\ name\|creator\|lastModified\|Printed\|created\|modified' \
    | tr '\n' '.'; echo \n \
    >> list.csv 
```

这个输出的问题是我最终得到了一个包含所有文档的庞大列表，并且在 python 或 perl 中对其进行排序出现在我的知识水平之上。

我希望有一种方法可以通过使用 sed 来避免从偏移量中发生这种情况

```
(find /media/E01880-0-CH5-W001/Working/E01880-4-CH5-E001/ED/ -type f -iname '*.xlsx' -exec perl parseXML.py {} \; | grep 'Document\ name\|creator\|lastModified\|Printed\|created\|modified' | tr '\n' '.'; echo \)n >> list.csv 
```

唉，无济于事，这只是删除了包含修改信息的行。

最后今天晚上我尝试使用 sed 和一些正则表达式来更改输出

```
cat PleaseWork.csv | sed  -i 's/modified[^"\r\n]*\./&\\n/g' >> NewFile.csv 
```

理论上语法应该替换修改的和任何字符，直到匹配表达式和新行的句点，但我收到一个 sed 错误，没有输入文件，我想我现在已经盯着屏幕看够了。

请帮忙。

我正在使用谷歌的 snortdlp 代码：

[http://snortdlp.googlecode.com/svn-history/r115/trunk/src/python/read_open_xml.pl](http://snortdlp.googlecode.com/svn-history/r115/trunk/src/python/read_open_xml.pl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:46:45.187

如果我正确解释了您的问题，您将尝试为与“文档名称”、“创建者”等匹配的所有文件输出整行（但不是换行符），并为行打印整行（和换行符）匹配“修改”。只需跳过 grep 并使用 awk 代替：

```
awk '/Document name|creator/{printf "%s.", $0} /modified/' 
```

（为了清楚起见，我缩短了匹配 - 根据需要添加其他标签。）

# php - 将信息存储在不在数据库中的文本文件中？

> ID：13712317
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:32:44.050
> 
> 标签：php, html, css

大家好，我是 php 新手，我尝试在 php 中处理文件，即将信息存储到不在数据库中的文本文件中。这基本上是将数据插入文本文件并删除文件中的数据，但我是努力删除文本文件中的最后一条记录是我的代码，任何人都非常感谢..

```
 <html>
<head>
<title>
Registration
</title>
<style type="text/css">
table{font-family:calibri;color:black;font-size:11pt,font-style:normal;background-color:white;border-collapse:collapse;border:2px solid navy}
</style>
<script type="text/javascript" src="frnt.js">
</script>
</head>
<body bgcolor="aqua">
<form name="myform" action="writ.php" method="post" onsubmit="return validation()">
<table border="0px"align="center" cellpadding="5" cellspacing="5">
<tr>
<th colspan="2" align="center">Registration</th>
</tr>
<tr>
<td>UserName:</td>
<td><input type="text" name="nme" maxlength='20'>
</td>
</tr>
<tr>
<td>Email:</td>
<td><input type="text" name="mail" maxlength='20'>
</td>
</tr>
<tr>
<td>Mobile:</td>
<td><input type="text" name="mobile" maxlength='10'>
</td>
</tr>
<tr>
<td>Education:</td>
<td><input type="text" name="edu" maxlength='10'>
</td>
</tr>
<tr>
<td>College:</td>
<td><input type="text" name="clg" maxlength='15' >
</td>

</tr>
<tr>
<td colspan="2" align="center"><input type="submit" value="Submit" name="submit"><input type="reset" value="Reset">
</td>
</tr>
</table>
</form>
</body>
</html> 
```

这个页面重定向到 writ.php，这个代码是

```
<html>
    <body>
    <form method = "post">
        <?php

        $body = $_POST['nme'];
        $body1 = $_POST['mail']; 
        $body2 = $_POST['mobile'];
        $body3 = $_POST['edu'];
        $body4 = $_POST['clg'];
        $file_name = "test.txt";               
        $fp = fopen ($file_name, "a"); 

        fwrite ($fp,"Name:".$body."\r");
        fwrite ($fp,"Email:".$body1."\r");
        fwrite ($fp,"Mobile:".$body2."\r");
        fwrite ($fp,"Education:".$body3."\r");
        fwrite ($fp,"College:".$body4."\r\r");

            if(fwrite)  {
                echo "your data added successfully <br><br>";
                echo "<a href='back .php'>Go back to view your page</a>";
            }

        ?>
    </form>
    </body>
    </html> 
```

这是删除文本文件中的整个数据

```
<?php
$v=filesize("test.txt");
echo "<br />";

$file = fopen("test.txt", "a+");
$d=ftruncate($file,0) or die ('could not open'); 
if($d)  {
echo "deleted the whole data's successfully<br><br>";
echo"<a href='frm.php'>Add data to a file </a><br><br>";
echo"<a href='test.txt'>View the file </a><br><br>";
}
fclose($file);
?> 
```

最后我有这个编码的问题

```
<?php 
$file="test.txt";
$str = fopen("test.txt","r");
$s = fgets($str);

$parts = explode("\r",$s);
$content = file_get_contents($file);
$c=count($parts);
$dd=$c-8;
for($i=$c;$i>$dd;$i--)  {

$content = str_replace($parts[$i],'', $content);
/*$content = str_replace($parts[7],'', $content);
$content = str_replace($parts[8],'', $content);
$content = str_replace($parts[9],'', $content);
$content = str_replace($parts[10],'', $content);
*/
$fh = fopen($file, 'w');
$d=fwrite($fh, $content);
}
//unset($parts[$i],'');
if($d)  {
echo"Last data deleted successfully <br><br>";
}

?> 
```

在上面的编码中，当我在文本文件中多次输入相同的电子邮件 ID 时，我面临的问题是，但是当我要删除文件中的最后一条记录时，同名的电子邮件也被删除了！！！！以及如何解决这个问题。请帮忙！非常感激：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:51:38.100

如果更改`fopen("test.txt", "a")`为`fopen("test.text", "w")`它将删除 txt 中的所有内容。“w”的意思是：只供书写；将文件指针放在文件的开头并将文件截断为零长度。如果该文件不存在，请尝试创建它。（根据[PHP.net fopen](http://php.net/manual/en/function.fopen.php)）

# android - 两个按钮的多点触控问题：即使我按下两个不同的按钮，总是得到相同的按钮，为什么？

> ID：13712319
> 
> 赞同：0
> 
> 时间：2012-12-04T21:32:49.657
> 
> 标签：android, button, multi-touch

我有两个按钮，如果按下它们就会发出声音。我想同时按下这两个键来同时听到这两种声音。至今：

@Override // 处理导航箭头的触摸 public boolean onTouch(View v, MotionEvent event) {

```
 int action = event.getActionMasked();

    switch (action){

    case MotionEvent.ACTION_DOWN:
         switch (v.getId()) { // Which button?
            case R.id.cnotebutton: // The upArrow
                Log.i("C", "C");
              //  mSoundPool.stop(mStream1);
                //mStream1= mSoundPool.play(mSoundPoolMap.get(1), streamVolume, streamVolume, 1,0, 1f);
                break;
            case R.id.dnotebutton: // The downArrow
                  Log.i("D", "D");
                 // mSoundPool.stop(mStream2);
                //mStream2= mSoundPool.play(mSoundPoolMap.get(2), streamVolume, streamVolume, 1,0, 1f);
                break;
            default:
            }

            break;
        case MotionEvent.ACTION_UP:

            break;  
        case MotionEvent.ACTION_POINTER_DOWN:
             switch (v.getId()) { // Which button?
                case R.id.cnotebutton: // The upArrow
                    Log.i("C", "C");
                  //  mSoundPool.stop(mStream1);
                    //mStream1= mSoundPool.play(mSoundPoolMap.get(1), streamVolume, streamVolume, 1,0, 1f);
                    break;
                case R.id.dnotebutton: // The downArrow
                      Log.i("D", "D");
                     // mSoundPool.stop(mStream2);
                    //mStream2= mSoundPool.play(mSoundPoolMap.get(2), streamVolume, streamVolume, 1,0, 1f);
                    break;
                default:
                }
            break;
        case MotionEvent.ACTION_POINTER_UP:

            break;
        case MotionEvent.ACTION_MOVE:

            break;
        default:

    }
    return true;
} 
```

这没用。我应该如何解决这个问题？另一个问题，如果我在屏幕上移动手指，我想在手指到达按钮时按下按钮而不抬起它。ACTION_MOVE 也不起作用。抱歉这个愚蠢的问题我在这个领域很初学者。

**更新**

使用此代码，它可以检测到多点触控，但我总是得到两个相同的日志，就好像我用两根手指总是触摸同一个按钮一样。因此，即使我同时按下两个按钮，我得到一个日志“C”和另一个错误的“C”，我应该得到 C 和 D。

感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:07:14.173

你的代码看起来像这样吗？我强调了一些关键点

包be.domore.smokesignaltest；

导入android.app.Activity；导入android.os.Bundle；导入 android.view.MotionEvent；导入android.view.View；导入 android.view.View.OnTouchListener；导入android.widget.Button；

公共类 DummyActivity 扩展 Activity 实现 OnTouchListener { private Button myButton1; 私人按钮 myButton2;

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set the content view
    setContentView(R.layout.activity_dummy);

    // Map controls
    mapControls();
}

private void mapControls() {
    myButton1 = (Button) findViewById(R.id.myButton1);
    myButton1.setOnTouchListener(this);

    myButton2 = (Button) findViewById(R.id.myButton2);
    myButton2.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event) {
    **if (event.getAction() == MotionEvent.ACTION_DOWN)**
        switch (v.getId()) {
        case R.id.myButton1:
            // TODO: put your code here
            **return true;**
        case R.id.myButton2:
            // TODO: put your code here
            **return true;**
        }

    *return false;*
} 
```

}

以下类是我创建的用于管理声音的助手。有趣的部分是函数 AssignSoundToView。不知道对你有没有帮助？

包be.domore.FingerTwister.Game；

导入 java.io.IOException；

导入 be.domore.FingerTwister.Settings；

导入android.app.Activity；导入 android.content.res.AssetFileDescriptor；导入 android.content.res.AssetManager；导入android.media.AudioManager；导入android.media.MediaPlayer；导入 android.media.SoundPool；导入android.util.Log；导入 android.view.MotionEvent；导入android.view.View；导入 android.view.View.OnTouchListener；

公共类 SoundManager2 { 私有静态 SoundManager2 当前 = 新 SoundManager2();

```
public static SoundManager2 getCurrent() {
    return current;
}

private boolean initialized = false;
private MediaPlayer player;
private SoundPool pool;
private AssetManager assetManager;

private int[] soundId = new int[Sounds.values().length];
private int[] soundStream = new int[Sounds.values().length];

private SoundManager2() {

}

public void assignSoundToView(View view, Sounds sound) {
    final int currentSound;

    if (Settings.hasFx() == false) {

    } else if (sound != Sounds.none) {
        currentSound = sound.ordinal();

        view.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                try {
                    if (event.getAction() == MotionEvent.ACTION_DOWN)
                        pool.play(soundId[currentSound], 1.0f, 1.0f, 0, 0,
                                1);
                } finally {
                }
                return false;
            }
        });
    }
}

public boolean initialize(Activity activity) {

    if (initialized == false) {
        player = new MediaPlayer();
        pool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);
        assetManager = activity.getAssets();
        activity.setVolumeControlStream(AudioManager.STREAM_MUSIC);

        for (int idx = 1; idx < Sounds.values().length; idx++)
            soundId[idx] = loadSound(
                    String.format("%s.mp3", Sounds.values()[idx]),
                    assetManager);

        initialized = true;
    } else
        Log.w("SoundManager", "SoundManager was already initialized");

    return initialized;
}

public boolean isInitialized() {
    return initialized;
}

private int loadSound(String filename, AssetManager assetManager) {
    int rc;
    AssetFileDescriptor afd;

    try {
        afd = assetManager.openFd(filename);
        rc = pool.load(afd, 1);
    } catch (IOException e) {
        e.printStackTrace();
        rc = 0;
    }

    return rc;
}

public boolean playMusic(String filename) {
    boolean rc = false;
    AssetFileDescriptor descriptor;

    if (initialized == false)
        Log.e("SoundManager", "SoundManager is not initialized");
    else
        try {
            descriptor = assetManager.openFd(filename);
            player.reset();
            player.setDataSource(descriptor.getFileDescriptor(),
                    descriptor.getStartOffset(),
                    descriptor.getDeclaredLength());
            player.setLooping(true);
            // player.setVolume(1.0f, 1.0f);
            player.prepare();
            player.start();

            rc = true;
        } catch (Exception e) {
            e.printStackTrace();
        }

    return rc;
}

public void playSound(Sounds sound) {
    int index;

    index = sound.ordinal();
    soundStream[index] = pool.play(soundId[index], 1.0f, 1.0f, 0, 0, 1);
}

public void stopAllSound() {
    for (int idx = 1; idx < Sounds.values().length; idx++)
        stopSound(Sounds.values()[idx]);
}

public boolean stopMusic() {
    boolean rc = false;

    if (initialized == false)
        Log.e("SoundManager", "SoundManager is not initialized");
    else {
        player.stop();
        rc = true;
    }

    return rc;
}

public void stopSound(Sounds sound) {
    int index;

    index = sound.ordinal();
    pool.stop(soundStream[index]);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:46:09.470

你在玩 SurfaceView 吗？我感觉不是。为什么不简单设置每个Button的OnClickListener呢？

否则，您需要分别访问每个触摸事件：请参阅[http://android-developers.blogspot.be/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.be/2010/06/making-sense-of-multitouch.html)上的“索引与 ID”段落：也许会有所帮助你

哔叽

# php - 链接到 Magento 中的 CMS 产品页面

> ID：13712325
> 
> 赞同：0
> 
> 时间：2012-12-04T21:33:14.380
> 
> 标签：php, magento

我正在寻找一些关于如何最好地从模板 phtml 文件链接到 CMS 产品页面的建议。我需要使用“foreach”生成一个链接，因为每个产品都有自己的 CMS 产品页面。例如，我的主页上目前显示了六种产品 将用户带到该产品的 CMS 页面的按钮......有没有办法实现这一点？

这是来自 new.phtml 的代码

```
<div class="new-product-content">
<?php if (($_products = $this->getProductCollection()) && $_products->getSize()): ?>
    <h3 class="subtitle new-products"><?php echo $this->__('HOT PRODUCTS') ?></h3>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_products->getItems() as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>

    <ul>
    <?php endif ?>
    <li class="thumb<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>" ><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(175) ?>" width="175" height="175" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" />
            </a>
               <div class="caption">    
                  <h4 class="product-name"> <?php $_productName = $this->helper('core/string')->truncate($this->htmlEscape($_product->getName()),20,'...', $_remainder, true); ?>
                   <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productName ?>">
                    <?php echo $_productName ?><?php echo $this->__('&#8482;'); ?></a></h4>
                     <?php echo $this->getPriceHtml($_product, true, '-new') ?>
                      <div class="clearfix"></div>
                  <div class="desc">                  
                    <?php $sdesc = $_product->getShortDescription();
                    $sdesc = trim($sdesc);
                    $limit = 180;
                    if (strlen($sdesc) > $limit) {
                        $sdesc = substr($sdesc, 0, strrpos(substr($sdesc, 0, $limit), ' '));
                    } ?>
                    <?php echo $sdesc."..."; ?>
                  </div>
                <div class="clearfix"></div> 
<div class="btn-group">
  <button class="btn" type="button" title="<?php echo $this->__('Add to Cart') ?>" onclick="setLocation('<?php echo $this->getProductUrl($_product) ?>')"><?php echo $this->__('Order now...') ?></button>

<!--I NEED TO CHANGE THE DESTINATION OF THIS LINK  <button class="btn" type="button" title="<?php echo $this->__('More info') ?>" onclick="setLocation('<?php echo $this->getProductUrl($_product) ?>')"><?php echo $this->__('More info?') ?></button> --->
</div>
      </li>
      <?php if ($i%$_columnCount==0 || $i==count($_products)): ?>
  </ul>
  <div class="clearfix"></div>  
<?php endif ?>
<script type="text/javascript">
$j('.thumb li').last().css('border-right', 'none');
</script>
<script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
<?php endforeach; ?>
<?php endif; ?>
<div class="clearfix"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:19:44.233

尝试类似，您需要获取 cms 页面的“url 密钥”

```
<button class="btn" type="button" title="<?php echo $this->__('More info') ?>" onclick="setLocation('<?php echo $this->getUrl('url key'); ?>')"><?php echo $this->__('More info?') ?></button> 
```

# linux - 带有守护进程的 Linux IPC 多客户端

> ID：13712337
> 
> 赞同：5
> 
> 时间：2012-12-04T21:33:54.563
> 
> 标签：linux, ipc, unix-socket

这真的很基本，但我现在正在空白。

我有一个守护进程，希望多个客户端能够与之交谈。我希望客户端能够启动然后使用共享库，本质上是向守护进程“注册”。守护进程将为这个新客户端生成一个线程，并在客户端和新线程之间提供一个通信管道。

我正在考虑将 unix 数据报套接字作为所有客户端最初使用的“注册通道”，然后切换到特定于客户端的通道，但随后无法弄清楚我如何为新数据报套接字创建唯一名称而不先设置它们.

*   服务器和客户端在同一台机器上，更喜欢使用数据报套接字，而不必处理将流分解为数据包。
*   将来回发送（非常）高速率的小消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-05T17:37:23.977

如果您愿意，您可以完全避免命名客户端套接字的问题。每个客户端都可以使用 socketpair() 创建一对连接的套接字。然后，客户端通过您众所周知的“注册通道”将其中一个套接字描述符发送到服务器。然后，服务器和客户端有一对私有的、连接的、未命名的套接字用于它们的通信。

使用 sendmsg() 将套接字描述符发送到服务器并填写 msg 的控制消息。

这两个答案有一些相关的信息/链接：

[我将如何使用套接字让多个进程与中央进程通信？](https://stackoverflow.com/questions/2369066/how-would-i-use-a-socket-to-have-several-processes-communicate-with-a-central-pr?rq=1)

[通过 UNIX 域套接字发送文件描述符和 select()](https://stackoverflow.com/questions/4489433/sending-file-descriptor-over-unix-domain-socket-and-select)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:50:15.890

基本上我认为你需要妥协并有一个 2 阶段的过程，其中 SOCK_STREAM 套接字作为第 1 阶段，SOCK_DGRAM 作为第 2 阶段。所以它会是这样的：

服务器：

1.  创建 SOCK_STREAM 套接字“my.daemon.handshake”
2.  接受客户
3.  向客户端发送一个随机生成的字符串 XXX 并关闭套接字
4.  创建一个 SOCK_DGRAM 套接字“my.daemon.XXX”并开始处理它
5.  重复 (2)

客户

1.  连接到套接字“my.daemon.handshake”
2.  读取到 EOF——获取值 XXX
3.  开始与套接字“my.daemon.XXX”上的服务器通信

4.  利润！！！！

# ruby-on-rails - 设计使用 Ajax 登录时返回 401

> ID：13712338
> 
> 赞同：0
> 
> 时间：2012-12-04T21:33:55.237
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我有以下相当简单的代码，应该使用 Devise 将用户登录到我的应用程序中。如果使用 HTML 请求而不是 XHR 完成，这实际上工作得很好。当我这样做时，XHR 就完成了，

```
 = form_for(@user, :url => session_path(@user), :remote => true) do |f|
            = f.label :email
            = f.text_field :email, :size => 15, :maxlength => 32
            = f.label :password
            = f.password_field :password, :size => 15, :maxlength => 32
            %br
            = f.submit "Sign in" 
```

结果是：

```
Started GET "/" for 127.0.0.1 at 2012-12-04 13:24:44 -0800
Processing by HomeController#index as HTML
  Rendered home/_hello_page.html.haml (0.1ms)
  Rendered home/index.html.haml within layouts/application (1.9ms)
Completed 200 OK in 18ms (Views: 16.3ms | ActiveRecord: 0.4ms)

Started POST "/users/sign_in" for 127.0.0.1 at 2012-12-04 13:24:54 -0800
Processing by Devise::SessionsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1cGaycA20NMhK0fOwQyN8e3aSFwCHB6BZcLwmvKTI3U=", "user"=>{"email"=>"obscured@someplace.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
Completed 500 Internal Server Error in 65ms

ActionView::MissingTemplate (Missing template devise/sessions/create, devise/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/sxross/Developer/iPhoneApps/motion/whos_here/whos_here_server/app/views"
  * "/Users/sxross/.rvm/gems/ruby-1.9.3-p327@whos_here_server/gems/devise-2.1.2/app/views"
): 
```

一切都完全符合我的预期，很明显，`Processing by Devise::SessionsController#create as JS`它告诉接收控制器“将我想要的 JSON 寄回给我”。所以问题是为什么设计控制器试图渲染模板而不是 JSON，我能做些什么来修复它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:01:06.600

您在 views/devise/sessions 中缺少 create.js.[erb|haml] 文件

当您发送远程登录请求时，该请求由 Devise::SessionsController#create 完成，如果您不覆盖它

```
respond_with resource, :location => after_sign_in_path_for(resource) 
```

将寻找 create.js.erb。我通常只有

```
window.location = "<%= root_url %>" 
```

在里面。

此外，您需要设置

```
config.http_authenticatable_on_xhr = false
config.navigational_formats = [:"*/*", "*/*", :html, :js] 
```

在 config/initializers/devise.rb 中，它可以正常工作。

对于我自己的情况，我已经用这个覆盖了会话控制器：

```
@resource = warden.authenticate!(:scope => resource_name, :recall => "sessions#failure")
sign_in(resource_name, @resource)
respond_to do |format|
  format.html { respond_with @resource, :location => after_sign_in_path_for(@resource) }
  format.js
end 
```

如果身份验证失败，这会将我抛出一个失败方法，并在 failure.js.erb 中处理它以向用户显示

# python - 自纪元以来将日期转换为浮点数

> ID：13712343
> 
> 赞同：1
> 
> 时间：2012-12-04T21:34:35.847
> 
> 标签：python, datetime, time

我的日期为 2012 年 2 月 12 日（dd-mm--yyyy），并希望将其转换为自纪元以来的浮点数。我将如何使用 time.mktime() 来转换它。如果需要，我很乐意将时间包括为 00:00。

当我尝试这样做时，我得到：

```
TypeError: argument must be 9-item sequence, not str 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:39:10.720

用于[`time.strptime`](http://docs.python.org/2/library/time.html#time.strptime)创建[`struct_time`](http://docs.python.org/2/library/time.html#time.struct_time)期望的`time.mktime`：

```
>>> import time
>>> time.mktime(time.strptime('02-12-2012', '%d-%m-%Y'))
1354424400.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:08:07.890

您可以使用[datetime](http://docs.python.org/2/library/datetime.html)进行转换。

```
>>> import datetime
>>> epoch = datetime.datetime(1970, 1, 1)
>>> my_date = datetime.datetime(2012, 12, 2)
>>> print (my_date - epoch).days * 3600 * 24
1354406400 
```

# xamarin.android - 从 Xamarin Monodroid 中的 FileInputStream 继承

> ID：13712346
> 
> 赞同：0
> 
> 时间：2012-12-04T21:34:48.167
> 
> 标签：xamarin.android, xamarin

我有一个继承自 Java.IO.FileInputStream 的类。它看起来像这样：

```
public class DeviceInputStream : FileInputStream
{
    private FileDescriptor descriptor = null;
    private byte currentValue;

    public DeviceInputStream(FileDescriptor fd) : base(fd)
    {
        descriptor = fd;
    }

    public DeviceInputStream(File file) : base(file){}

    public DeviceInputStream(string fileName):base(fileName){}

    public override int Read()
    {
        int byteRead = base.Read();
        currentValue = (byte) byteRead;
        return byteRead;
    }

    public byte CurrentValue
    {
        get { return currentValue; }
    }
} 
```

但是，当我编译它时，我收到以下错误：

***未报告的异常 FileNotFoundException; 必须被抓住或被宣布为超级（p0）；DeviceInputStream.java:20***

关于可能导致此问题的任何想法？谢谢。

-肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:27:10.347

这似乎是 Xamarin Monodroid 的一个问题，并且已作为一个错误提交，以将 ExportAttribute 扩展到构造函数。详细信息来自这里：

[http://forums.xamarin.com/discussion/500/inheriting-from-fileinputstream](http://forums.xamarin.com/discussion/500/inheriting-from-fileinputstream)

在构建时，会为每个 Java.Lang.Object 子类生成 Android Callable Wrappers (ACW)，其中包括我们的 DeviceInputStream 类型：

```
public class DeviceInputStream
extends java.io.FileInputStream
implements
    mono.android.IGCUserPeer
{
static final String __md_methods;
static {
    __md_methods = 
        "n_read:()I:GetReadHandler\n" +
        "";
    mono.android.Runtime.register ("Scratch.ContentProvidersHateApplications.DeviceInputStream, Scratch.ContentProvidersHateApplications, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", DeviceInputStream.class, __md_methods);
}

public DeviceInputStream (java.io.File p0)
{
    super (p0);
    if (getClass () == DeviceInputStream.class)
        mono.android.TypeManager.Activate ("Scratch.ContentProvidersHateApplications.DeviceInputStream, Scratch.ContentProvidersHateApplications, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "Java.IO.File, Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd", this, new java.lang.Object[] { p0 });
}

public DeviceInputStream (java.io.FileDescriptor p0)
{
    super (p0);
    if (getClass () == DeviceInputStream.class)
        mono.android.TypeManager.Activate ("Scratch.ContentProvidersHateApplications.DeviceInputStream, Scratch.ContentProvidersHateApplications, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "Java.IO.FileDescriptor, Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd", this, new java.lang.Object[] { p0 });
}

public DeviceInputStream (java.lang.String p0)
{
    super (p0);
    if (getClass () == DeviceInputStream.class)
        mono.android.TypeManager.Activate ("Scratch.ContentProvidersHateApplications.DeviceInputStream, Scratch.ContentProvidersHateApplications, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "System.String, mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e", this, new java.lang.Object[] { p0 });
}

    public int read ()
    {
        return n_read ();
    }

    private native int n_read ();

/* ... */
} 
```

由于 ACW 是 Java 代码，因此它们必须是有效的 Java 代码。不幸的是，在这种情况下它们不是，因为例如 DeviceInputStream(String) 构造函数中的 super(p0) 调用是 FileInputStream(String)，它会抛出 FileNotFoundException。

由于 DeviceInputStream(String) 构造函数调用的方法可能会引发异常，因此 DeviceInputStream(String) 必须包含 throws 子句或在 super(p0) 语句周围有一个 try/catch 块。两者都没有发生，因此编译器错误。

不幸的是，目前没有解决方法；没有办法在构造函数主体上向 ACW 添加 throws，也没有其他方法可以自定义 ACW 的构造函数，所以你被卡住了。:-(

支持扩展 ExportAttribute 以便它可以工作已在[错误 8754](https://bugzilla.xamarin.com/show_bug.cgi?id=8754)中提交。

# wordpress - WordPress Foreach 只显示一个结果

> ID：13712347
> 
> 赞同：2
> 
> 时间：2012-12-04T21:34:56.613
> 
> 标签：wordpress, loops, foreach, shortcode

我有以下 WP 功能和我写的简码

```
function selected_inventory_products( $atts ) {
    extract( shortcode_atts( array(
        'brand' => '',
        'product' => '',
    ), $atts ) );

        global $wpdb;
        $inventory_products = $wpdb->get_results("SELECT * FROM wp_inventory, wp_inventory_images WHERE wp_inventory.inventory_id = wp_inventory_images.inventory_id and sort_order = 0 and inventory_manufacturer = '".$brand."'");

        foreach($inventory_products as $i_products){
        $return_string = '<div style="background: #F4F4F4; width: 100%;">';
        $return_string .= '<a href="http://www.devicemondo.com/products/item/'.$i_products->inventory_slug.'/">'.$i_products->inventory_name.'</a>';
        $return_string .= '</div>';
        }

        return $return_string;

}
add_shortcode( 'post_sidebar_products', 'selected_inventory_products' ); 
```

问题是当我在我的 WP 页面中使用简码 [post_sidebar_products] 时，即使有超过 15 个结果，我也只能得到 1 个结果？知道我在哪里犯了错误吗？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:40:33.560

啊! 刚看到。您每次都在循环内重新定义 $return_string ！因为第一行，等号前没有点。所以替换这个：

```
 $return_string = '<div style="background: #F4F4F4; width: 100%;">'; 
```

有了这个 ：

```
 $return_string .= '<div style="background: #F4F4F4; width: 100%;">'; 
```

# python - dict中的映射函数

> ID：13712350
> 
> 赞同：0
> 
> 时间：2012-12-04T21:35:12.970
> 
> 标签：python

我想从 linux 命令提示符运行 python 函数。因此，我定义了一个函数和从 linux 输入到要执行的函数的映射字典。所以，例如。

```
def help():
    print(...)

def dostuff():
    do sth

functions ={
    'help': help()'
    ''dostuff' : dostuff()
    }

def parsecommand():
    return functions[sys.argv]

if __name__='__main__':
    parsecommand() 
```

当我现在从 Linux 运行一个函数时，[python filename.py] 帮助现在的问题是 python 运行字典中的所有函数并在构建字典时执行它们。我怎样才能避免这种情况？或者有什么更好的方法来构建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:37:46.067

像这样改变你的字典：

```
functions = {
    'help': help,
    'dostuff' : dostuff
    } 
```

这将允许您以下列方式调用函数：

```
functions[sys.argv[1]]() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:38:13.330

删除`()`字典中函数名称旁边的。

```
functions ={
  'help': help
  'dostuff' : dostuff
} 
```

您将能够像这样运行这些功能：

```
return functions[sys.argv[1]]() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:38:00.680

```
functions = {
    'help': help,
    'dostuff': dostuff
}

def parsecommand():
    return functions[sys.argv]() 
```

# jquery - JQuery 工具选项卡在悬停时表现异常

> ID：13712353
> 
> 赞同：0
> 
> 时间：2012-12-04T21:35:45.693
> 
> 标签：jquery, tabs, jquery-tools

我正在尝试使用 JQuery 选项卡来构建一个内容区域，当将鼠标悬停在右侧的选项卡上时会发生变化，并且当不将鼠标悬停在内容区域或选项卡上时也会自动旋转。只要我不快速将鼠标悬停在多个选项卡上，我大部分时间都可以正常工作。它似乎中断并导致自动旋转开始不规律地跳过标签。

这是我正在做的事情：

[http://outreachi.com/marketing/2012/1212_tabtest/nav.htm](http://outreachi.com/marketing/2012/1212_tabtest/nav.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:39:52.733

根据[演示](http://jqueryui.com/tabs/#mouseover)，他们使用`event: "mouseover"`而不是`hover`，您尝试过吗？

# soap - 使用 CoreService 2010 在 Tridion 2011 SP1 中发布不返回任何发布事务

> ID：13712358
> 
> 赞同：3
> 
> 时间：2012-12-04T21:35:57.563
> 
> 标签：soap, tridion, tridion-2011

我正在尝试使用 CoreService 2010 Basic HTTP 接口在 Tridion 中发布单个组件。

使用 Soap UI，我正在发送

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <ns4:Publish xmlns="http://www.sdltridion.com/ContentManager/R6" xmlns:ns2="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:ns3="http://www.sdltridion.com/Security" xmlns:ns4="http://www.sdltridion.com/ContentManager/CoreService/2010" xmlns:ns5="http://schemas.microsoft.com/2003/10/Serialization/">
      <ns4:ids>
        <ns2:string>tcm:292-39250</ns2:string>
      </ns4:ids>
      <ns4:publishInstruction>
        <ResolveInstruction>
          <IncludeChildPublications>true</IncludeChildPublications>
          <IncludeComponentLinks>false</IncludeComponentLinks>
          <IncludeWorkflow>false</IncludeWorkflow>
        </ResolveInstruction>
        <RenderInstruction/>
      </ns4:publishInstruction>
      <ns4:targets>
        <ns2:string>tcm:0-5-65537</ns2:string>
      </ns4:targets>
      <ns4:priority>Normal</ns4:priority>
      <ns4:readOptions>
        <ns4:LoadFlags>None</ns4:LoadFlags>
      </ns4:readOptions>
    </ns4:Publish>
  </S:Body>
</S:Envelope> 
```

然后接收：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Header>
      <ActivityId CorrelationId="7bfbbb48-8111-40ba-9e6e-8a7073a21a09" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">00000000-0000-0000-0000-000000000000</ActivityId>
   </s:Header>
   <s:Body>
      <PublishResponse xmlns="http://www.sdltridion.com/ContentManager/CoreService/2010">
         <PublishResult xmlns:a="http://www.sdltridion.com/ContentManager/R6" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"/>
      </PublishResponse>
   </s:Body>
</s:Envelope> 
```

我期待在这里看到一个 PublicationTransaction，我做错了什么？

我的请求基于此网址[http://blog.building-blocks.com/publishing-components-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/publishing-components-using-the-core-service-in-sdl-tridion-2011)，看来我不需要更多，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:52:55.093

发布是针对（发布）目标类型执行的操作，但您在请求中提到了发布目标 (tcm:0-5-65537)。

（出版物）目标类型是 SDL Tridion 用户（即作者和编辑）已知的“逻辑”项目。它是同时设置了安全性的项目，它是当用户想要发布某些内容时在 UI 中选择的项目。典型的名称是“staging”和“live”。官方文档是这样说的：目标类型为一个或多个发布目标指定一个用户友好的名称，并为目标指定权限设置。

发布目标或多或少是“技术”项，它包含不同的目标和启用此目标的发布的配置。这在其属性中链接到目标类型。不幸的是，发布目标的典型名称也是“staging”和“live”，这是最初混淆的地方。官方文档将其表述为：发布目标定义了使用不同协议发布内容所需的信息。

URI 中的项目类型可以显示差异：

```
65537 = Publication Target
65538 = Target Type 
```

# javascript - 在 Javascript 中将图像输入到数组中，然后在表格中显示它们

> ID：13712362
> 
> 赞同：1
> 
> 时间：2012-12-04T21:36:06.843
> 
> 标签：javascript, image

在这段代码中，我加载了一些骰子的图像，并尝试在表格中显示其中的一些。我不确定我是否正确构建了数组，但这是我发现的使用图像传播数组的示例之一。

```
<table id="dicebox">
                <tr>
                    <td id="d1"></td>
                    <td id="d2"></td>
                    <td id="d3"></td>
                    <td id="d4"></td>
                    <td id="d5"></td>
                </tr>
            </table>
<script>

            var diceB = new Array(7);
            //Blue dice
            var diceP = new Array(7);
            //Purple dice
            var diceValue = new Array(0, 1, 2, 3, 4, 5, 6);

            //initializing blue dice array
            diceB[0] = new Image(50, 50);
            diceB[0].src = "images/dice0B.gif"
            diceB[1] = new Image(50, 50);
            diceB[1].src = "images/dice1B.gif"
            diceB[2] = new Image(50, 50);
            diceB[2].src = "images/dice2B.gif"
            diceB[3] = new Image(50, 50);
            diceB[3].src = "images/dice3B.gif"
            diceB[4] = new Image(50, 50);
            diceB[4].src = "images/dice4B.gif"
            diceB[5] = new Image(50, 50);
            diceB[5].src = "images/dice5B.gif"
            diceB[6] = new Image(50, 50);
            diceB[6].src = "images/dice6B.gif"

            for(var i = 1; i < 6; i++) {
                document.getElementById('d' + i).innerHTML = diceB[i].src; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:38:28.860

如何使用[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

```
for(var i = 1; i < 6; i++) {
    document.getElementById('d' + i).appendChild(diceB[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:40:54.040

您没有编写图像标签，您必须执行以下操作：

```
for(var i = 1; i < 6; i++) {
                document.getElementById('d' + i).innerHTML = '<img src="'+diceB[i].src+'" />';

} 
```

# php - PHP 添加计数器

> ID：13712367
> 
> 赞同：-4
> 
> 时间：2012-12-04T21:36:16.077
> 
> 标签：php

所以是的，我有一个搜索功能，它根据条件进行搜索，例如选择了哪个选择选项。

查询一切顺利，但是当我循环数据时，可以说例如：

```
$count=0;
$count=+1;
echo $count;
echo '.'; 
```

因此输出将是 1\. , 2\. 等等？

我想这是可能的，只是想知道这样的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:37:55.423

呃，你的意思是这样吗？

```
$count=0;
$count++;  //same as $count = $count + 1; or $count += 1;
echo $count;
echo '. , '; 
```

编辑：这可能更有帮助。

```
$echoStr = '';
while($some_condition) {
    $count=0;
    //$count++;  //same as $count = $count + 1; or $count += 1;
    $echoStr .= ++$count . '. , ';
}
$echoStr = rtrim($echoStr, ' , ');
echo $echoStr; 
```

请注意，它会删除最后一个逗号。快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:48:29.337

只需查看我在您的代码中看到的内容。看起来你试图制作一个整数，它是前一个的 +1？

我不是 100% 因为缺乏信息；在您的问题中添加一些信息，我将相应地更新此帖子；如果这是您正在寻找的东西：

```
$i = 1;
while ($i <= 10) {
    echo $i++;  /* the printed value would be
                   $i before the increment
                   (post-increment) */
} 
```

[PHP While 文档](http://php.net/manual/en/control-structures.while.php%202)的功劳

# javascript - 监听器之前的谷歌地图功能

> ID：13712368
> 
> 赞同：0
> 
> 时间：2012-12-04T21:36:24.273
> 
> 标签：javascript, google-maps-api-3

我正在尝试找出一种在谷歌地图处理和呈现 kml 时运行进度加载器的方法。

我为 status_changed 设置了一个监听器。

```
google.maps.event.addListener(kmllayer, "status_changed", function() {
    var kmlstatus = kmllayer.getStatus();
    if (kmlstatus != 'OK') {
        $('kmllayerlist').append($('<div class="kmllayeritem">Error Loading KML' + kmlstatus +'</div>'));
    } else {
        var itemhostname = kmllayerURL.split("/");
        $('#kmllayerlist').append($('<div class="kmllayeritem"><input type="checkbox" class="kmllayerchx" CHECKED><img src="http://www.google.com/s2/favicons?domain='+itemhostname[2]+'" class="kmllisticon" alt="kmlurlicon">'+itemhostname[(itemhostname.length - 1)]+'</input></div>'));
        kmllayerarr.push(kmllayerURL);
    }
}); 
```

在触发侦听器之前如何运行函数？我在想像下面这样的事情，但我想不出打破 while 语句的好条件。

```
while () {
  //function to run until listener fires
} 
```

工作代码块

```
function addkmlLayer_m(kmllayerURL) {
kmllayer = new google.maps.KmlLayer(kmllayerURL, {
    preserveViewport: true
});
kmllayer.setMap(map);
var itemhostname = kmllayerURL.split("/");
var kmlstatus_boo;
function kmlProgress() {
    if (kmlstatus_boo != 'done') {
        google.maps.event.addListener(kmllayer, "status_changed", function() {
            kmlstatus_boo = 'done';
            $('#progress').remove();
            kmlstatus = kmllayer.getStatus();
            if (kmlstatus != 'OK') {
                $('#kmllayerlist').append($('<div id="kmllayeritem_error" class="kmllayeritem">Error Loading KML ' + kmlstatus +'<input class="kmldel" type="image" src="../images/delete.png" name="delete kml" OnClick="delkmlerr();" /></div>'));
            } else {
                kmllayerarr.push(kmllayer);

                $('#kmllayerlist').append($('<div id="kmllayeritem_'+kmllayerarr.length+'" class="kmllayeritem"><input type="checkbox" class="kmllayerchx" CHECKED><img src="http://www.google.com/s2/favicons?domain='+itemhostname[2]+'" class="kmllisticon" alt="kmlurlicon">'+itemhostname[(itemhostname.length - 1)]+'</input><input class="kmldel" type="image" src="../images/delete.png" name="delete kml" OnClick="delkmlitem('+kmllayerarr.length+');" /></div>'));
            }
        });
        $('#kmllayerlist').append($('<div/>', {'id':'progress','class':'kmllayeritem','text':'Loading '+itemhostname[(itemhostname.length - 1)]+' KML'}));
        kmlstatus_boo = null; // free the closure
    } else {
        window.setInterval(kmlProgress,400); // Run again in 400ms changed so the user actually sees the loading image.
    }
}
kmlProgress(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:46:53.173

不幸的是，如果你像这样运行一个while循环，等待监听器触发，它永远不会发生。Javascript是单线程的。因此，您需要放弃浏览器的时间，以便它可以完成工作。尝试以下方式：

```
var myRelevantValue = "something";
function myTimer() {
    if (myRelevantValue == "done") {
        // It changed.
        myRelevantValue = null; // free the closure
    } else {
        // Update progress bar
        window.setInterval(myTimer,100); // Run again in 100ms
    }
}
window.setInterval(myTimer,100); // Run in 100ms 
```

在您的侦听器中，将变量的值设置为有用的值，这个计时器会在它发生时捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:51:00.287

您可以使用启动和停止参数设置函数。

```
function progressLoader(status){
    if(status == 'start'){
        //show progress bar
    }
    if(status == 'stop'){
       //hide progress bar
    }
} 
```

那么就

```
google.maps.event.addListener(kmllayer, "status_changed", function() {
var kmlstatus = kmllayer.getStatus();
if (kmlstatus != 'OK') {
    progressLoader(start);
    $('kmllayerlist').append($('<div class="kmllayeritem">Error Loading KML' + kmlstatus +'</div>'));
} else {
    var itemhostname = kmllayerURL.split("/");
    $('#kmllayerlist').append($('<div class="kmllayeritem"><input type="checkbox" class="kmllayerchx" CHECKED><img src="http://www.google.com/s2/favicons?domain='+itemhostname[2]+'" class="kmllisticon" alt="kmlurlicon">'+itemhostname[(itemhostname.length - 1)]+'</input></div>'));
    kmllayerarr.push(kmllayerURL);
    progressLoader(stop);
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:54:43.643

你可以试试这个

```
google.maps.event.addListener(kmllayer, "status_changed", function() {
    $('kmllayerlist').append($('<div/>', {'id':'progress','text':'Loading...', 'style':'color:black;font-weight:bold'})); // style can be changed
    var kmlstatus = kmllayer.getStatus();
    if (kmlstatus != 'OK')
    {
        $('#progress').remove();
        $('kmllayerlist').append($('<div class="kmllayeritem">Error Loading KML' + kmlstatus +'</div>'));
    } 
    else
    {
        var itemhostname = kmllayerURL.split("/");
        $('#progress').remove();
        $('#kmllayerlist').append($('<div class="kmllayeritem"><input type="checkbox" class="kmllayerchx" CHECKED><img src="http://www.google.com/s2/favicons?domain='+itemhostname[2]+'" class="kmllisticon" alt="kmlurlicon">'+itemhostname[(itemhostname.length - 1)]+'</input></div>'));
        kmllayerarr.push(kmllayerURL);
    }
}); 
```

# java - 从 Java 小程序读取数据（最好使用 js）

> ID：13712371
> 
> 赞同：0
> 
> 时间：2012-12-04T21:36:32.940
> 
> 标签：java, javascript, parsing, applet

这是我的问题。我有一个显示一些 KPI 的应用程序......问题是它通过 Java 小程序显示这些 KPI（而且我无权访问它的源代码）。我只需要该小程序中的一些数据。有没有办法从 Java 小程序解析数据？我想用Javascript解析它。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:06:53.460

可以从 JavaScript ( [read](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html) ) 调用 Java 小程序方法，但它必须已经像这样设置。如果您无权访问源代码，则可能检查 Java 控制台输出和/或使用“jar”和“javap”命令检查类以查看是否有可以调用的内容。

# javascript - 如何在javascript中创建嵌套的对象列表

> ID：13712373
> 
> 赞同：-2
> 
> 时间：2012-12-04T21:36:39.057
> 
> 标签：javascript, asp.net

我正在尝试`Product`在 Javascript 中创建实例，而不是使用`[webmethod]`.

```
[WebMethod]
public static void SetProduct(Product product)
{    
     // i want a product instance    
} 
```

以下是`Product`我正在尝试创建的课程：

```
public class Product
{
    public Type Type { get; set; }
    public Foo Foo { get; set; }
    public List<Bar> Bars { get; set; }
}

public class Type
{
    public string ID { get; set; }
}

public class Foo
{
    public string ID { get; set; }
    public string Color { get; set; }
}

public class Bar
{
    public string Name { get; set; }
} 
```

我可以创建但不能使用 Javascript：（有关更多详细信息，请参阅我在代码中的评论`Type`）`Foo``List<Bar>`

Javascript

```
function setProduct() {
    var product = {};
    product.Type = {};
    product.Foo = {};

    product.Type.ID = 'typeID';
    product.Foo.ID = 'fooID';
    product.Foo.Color = 'fooColor';

    //here is my question how can create List<Bar> Bars and add it to product item???

    $.ajax({
        type: "POST",
        url: "Default.aspx/SetProduct",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        data: "{product:" + JSON.stringify(product) + "}",
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:48:30.440

JavaScript 不知道 a`List<T>`是什么。它只知道如何制作数组。因此，您必须构造一个`Bar`s 数组并将其传递到 JSON 中。

幸运的是，这是一个简单的修复：

```
product.Bars = [
    { Name: "bar 1" },
    { Name: "bar 2" },
    { Name: "bar 3" },
]; 
```

* * *

以上可能就是你所需要的。我很确定 ASP.NET 会足够聪明，可以自动将其转换`Bar[]`为一个`List<Bar>`，但以防万一：

```
public class Product
{
    public Type Type { get; set; }
    public Foo Foo { get; set; }
    public IEnumerable<Bar> Bars { get; set; }
} 
```

然后，如果您仍然需要`List<T>`功能，只需将数组转换为 WebMethod 中的列表：

```
[WebMethod]
public static void SetProduct(Product product)
{    
     var list = product.Bars.ToList();
     product.Bars = list;
     return product;
} 
```

现在您仍然可以访问这些不错的`List<T>`方法：

```
((List<Bar>)product).Add(new Bar() { Name = "bar 4" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:40:41.443

```
// create an array
product.Bars = [];

// add an element to the array
product.Bars.push({
    Name: "Foo"
}); 
```

或者，您也可以使用元素初始化数组：

```
// create and initialize array
product.Bars = [{Name:"Foo"}, {Name:"Bar"}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:40:46.290

使用数组，并使用 . 将项目添加到数组中`array.push`。例如：

```
product.Bars = [];
product.Bars.push({ Name: "foo" }); 
```

# quickbooks - QuickBooks 使用 QBFC 添加销售税调整

> ID：13712375
> 
> 赞同：1
> 
> 时间：2012-12-04T21:36:43.470
> 
> 标签：quickbooks, qbfc

我正在尝试使用 QBFC 向 QuickBooks 添加销售税调整，但我无法弄清楚如何实现这一点。任何想法，将不胜感激。为了在 QuickBooks 中执行此操作，您需要右键单击税码，然后选择“调整销售税到期”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:16:21.050

销售税调整是日记帐分录，因此您将使用该`JournalEntryAdd`消息来创建一个。为了了解如何设置税务调整：首先，创建税务调整，然后查看您创建的日记帐分录，方法是转到公司 -> 制作一般日记帐分录，然后将所选日记帐分录列表选择器设置为“这个月”。您应该在列表中看到税收调整。您可以突出显示它以查看由调整创建的借方和贷方，以及税务供应商分配。

# spring - GWT+spring+hibernate错误创建bean SessionFactory

> ID：13712376
> 
> 赞同：0
> 
> 时间：2012-12-04T21:36:51.273
> 
> 标签：spring, hibernate, gwt

我打电话时收到以下错误

> ApplicationContext ctx = new ClassPathXmlApplicationContext("spring.xml") `

```
<bean id="derbyDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="org.apache.derby.jdbc.EmbeddedDriver" />
    <property name="url" value="jdbc:derby:db/analyticsDB;create=true" />
    <property name="username" value="username" />
    <property name="password" value="password" />
    <property name="initialSize" value="5" />
    <property name="maxActive" value="50" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="derbyDataSource" />
    <property name="packagesToScan" value="com.example.analytics.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="dialect">org.hibernate.dialect.DerbyDialect</prop>
            <prop key="hibernate.show_sql">true</prop> 
            <prop key="hibernate.hbm2ddl.auto">create</prop> 
        </props>
    </property>
</bean> 
```

`

将 log4j 版本更改为 1.2.15 会产生[此异常](http://pastebin.com/H8z4rgLE)。

在我将以下内容添加到 spring.xml 后问题已解决 `<prop key="javax.persistence.validation.mode">none</prop>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:39:15.000

这里的重要部分是`java.lang.NoSuchFieldError: TRACE`.

**您使用的log4j** / **slf4j**版本似乎有错误。

您应该只使用**1.2.12**或更高版本的**log4j**，并确保您的类路径中只有一个版本的**log4j** jar。

您还应该确保不要使用低于**1.5.1的****slf4j**版本。

# php - 管理路由（嵌套控制器或捆绑包）

> ID：13712377
> 
> 赞同：1
> 
> 时间：2012-12-04T21:36:55.220
> 
> 标签：php, frameworks, laravel, laravel-3

1 周前我正在学习 Laravel 3，但对路线一无所知。

我的主要问题是：**如何创建管理路线？** 在**Jeffrey Way (Tuts Premium)**的视频课程中，我可以理解两件事：

```
Nested Controllers (/application/controllers/admin/user.php)
Bundles (/bundles/user.php) - He did not say much about it. 
```

无论如何，我注意到两件事（很明显）：

在双方，我都可以有一条路线/管理员/任何东西。

但是正确的方法是什么？

我真的很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:39:18.250

这两种方法都没有对错之分，Laravel 的美妙之处在于有很多方法可以实现相同的目标，因此开发人员可以选择适合他们的方法。

就我个人而言，我从使用嵌套控制器开始，因为它们更容易启动和运行。但是，我建议转向捆绑包。如果您打算坚持使用 Laravel（并且您应该），那么构建一个包含您在已设置的每个项目中使用的身份验证和组件的包是有意义的。这样你只需要安装包就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:51:14.727

Laravel 捆绑包用于开发模块化代码，您可以在 Laravel 中从一个应用程序到另一个应用程序重用这些代码。Bundle 本身与您在 Laravel 安装中作为标准的“应用程序”目录非常相似，允许您在项目中创建模块化子应用程序。我强烈建议您暂时完全避免使用捆绑软件，并专注于学习 Laravel 的核心功能。

根据您的需要，将您的路线放在`routes.php`应用程序目录中的文件中，并将它们嵌套到您的内心深处。这将很好地满足您的目的。如果您不构建/使用捆绑包，则不需要使用捆绑路由。

当你对 Laravel 路由感到满意并且你已经构建了一个或两个应用程序时，你可能会想出一个包来帮助你在未来更快地开发你的应用程序。现在是开始学习包路由的时候了，因为它是将应用程序逻辑与包链接并为其提供 URL 模式的唯一方法。

希望有帮助。

# sqlite - 如何在sqlalchemy迁移脚本或sqlite配置文件中打开'PRAGMA foreign_keys = ON'？

> ID：13712381
> 
> 赞同：3
> 
> 时间：2012-12-04T21:37:21.727
> 
> 标签：sqlite, sqlalchemy, alembic

在合适的 sqlite 版本中，我们可以通过 'PRAGMA foreign_keys = ON' 强制执行外键约束。但是，用户每次建立连接时都无法登录数据库。所以我想知道我们怎样才能让它在 sqlalchemy/alembic 的迁移脚本中工作？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T08:44:49.630

请参阅SA SQLite 文档中的[外键支持](http://docs.sqlalchemy.org/en/rel_0_8/dialects/sqlite.html#foreign-key-support)：

```
import sqlite3

from sqlalchemy.engine import Engine
from sqlalchemy import event

@event.listens_for(Engine, "connect")
def set_sqlite_pragma(dbapi_connection, connection_record):
    if type(dbapi_connection) is sqlite3.Connection:  # play well with other DB backends
       cursor = dbapi_connection.cursor()
       cursor.execute("PRAGMA foreign_keys=ON")
       cursor.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:38:41.453

SQLite 没有登录名。

要在脚本中启用外键，只需将`PRAGMA foreign_keys = ON`命令添加到该脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-19T13:54:53.993

在 Alembic 迁移脚本中，您可以使用原始 SQL 来打开外键支持，如下所示：

```
def upgrade():
    from sqlalchemy.orm.session import Session
    session = Session(bind=op.get_bind())
    session.execute('PRAGMA foreign_keys = ON;')
    session.commit()
    # Actual migration logic would follow. 
```

# python - 使用 gunicorn 和 buildout 部署 Django

> ID：13712383
> 
> 赞同：0
> 
> 时间：2012-12-04T21:37:27.560
> 
> 标签：python, django, deployment, buildout, gunicorn

我编写了一个小 Django 应用程序，使用 websockets 库 (gevent-socketio) 并使用 buildout 构建虚拟环境。目前，为了提供服务，我有一个自定义命令，它构造了 SocketIOServer 类，就像[这里](http://gevent-socketio.readthedocs.org/en/latest/server_integration.html#django-runserver)[1] 一样。正如文档中所说，用 gunicorn 来做这件事并不是一项艰巨的任务。

所以，我想使用 gunicorn 作为服务器，我的问题是关于在 buildout.cfg 中包含 gunicorn，以便在 gunicorn 启动时，它会从 virtualenv（PYTHONPATH）中存在的所有模块开始。

是否有可以在 ./bin/ 下创建二进制文件的 gunicorn 配方？我还没有找到很多关于 buildout+gunicorn 的信息。

我的 buildout.cfg：

```
[buildout]
parts = django
newest = false
versions = versions
eggs = django 
         redis 
         gevent 
         gevent-websocket 
         gevent-socketio 
         greenlet 
         django-extensions 
         gunicorn

extensions = mr.developer
auto-checkout = *
sources-dir = external

[sources]
gevent = git git://github.com/gevent/gevent.git
gevent-websocket = hg https://bitbucket.org/Jeffrey/gevent-websocket
gevent-socketio = git git://github.com/abourget/gevent-socketio.git
redis = git https://github.com/andymccurdy/redis-py.git

[versions]
django = 1.4

[django]
recipe = djangorecipe
settings = development
eggs = ${buildout:eggs}
extra-paths = 
project = cacho_site 
```

谢谢！

[1] [http://gevent-socketio.readthedocs.org/en/latest/server_integration.html#django-runserver](http://gevent-socketio.readthedocs.org/en/latest/server_integration.html#django-runserver)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-22T22:09:41.013

由于构建版本 2.1.1，您可以创建 gunicorn 脚本，请参阅[https://pypi.python.org/pypi/djangorecipe/2.1.1](https://pypi.python.org/pypi/djangorecipe/2.1.1)

比你可以简单地 bin/gunicorn 和其余的论点。

# git - Git Bash 从 Github 获取特定构建版本的完整存储库

> ID：13712384
> 
> 赞同：0
> 
> 时间：2012-12-04T21:37:34.010
> 
> 标签：git, github, git-bash

获取特定构建版本的整个 repo 的语法和命令是什么？

我正在使用适用于 Windows 的 Git Bash，并正在尝试获取 popcorn-js 存储库的版本 [#1290]。

您可以在此处获取最新的克隆：

```
$ git clone git://github.com/mozilla/popcorn-js 
```

但我想获得以前的版本。

我努力了：

```
$ git revert #1290 git://github.com/mozilla/popcorn-js 
```

但我找不到语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:41:04.377

```
$ git clone git://github.com/mozilla/popcorn-js
$ cd popcorn-js
$ git checkout 35c805dab6a9ee39a75391a7d5476d306e3c4a86 
```

[#1290](https://github.com/mozilla/popcorn-js/commit/35c805dab6a9ee39a75391a7d5476d306e3c4a86)

# c++ - 容器类 c++ 的循环

> ID：13712385
> 
> 赞同：0
> 
> 时间：2012-12-04T21:37:38.107
> 
> 标签：c++, loops, vector

我有这个循环

```
for(int i=0;i<vec1.size();++i)
{
    if(vec1[i]==*p)
    {
        vec1[i]=*p;
        cout<<"element updated"<<endl;
    }
    else
    {
        cout<<"push_back"<<endl;
        vec1.push_back(*p);
    }
} 
```

我在容器类中插入对象，我重载了 == 以检查对象内的两个参数，如果它们匹配我想更新它们，如果它们不匹配我想把它们放在向量中，但是我似乎无法正确填充我的向量，当我执行 vec1.size() 时，即使我插入 3 个对象，我也会得到 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:44:20.863

你的问题是你`if`在*你*的搜索循环中。你`if`永远不会被执行，因为你的循环体永远不会运行，因为你`.size()`永远不会大于 0。

尝试这个：

```
// UNTESTED
std::vector<person> vec1;
add(person *p) {
  std::vector<person>::iterator it = std::find(vec1.begin(), vec1.end(), *p);
  if(it == vec1.end())
    vec1.push_back(*p);
  else
    *it = *p;
} 
```

或者，如果您真的想手动编写循环代码：

```
// UNTESTED
std::vector<person> vec1;
add(person *p) {
  int i;
  for(i=0;i<vec1.size();++i) {
    if(vec1[i] == *p)
      break;
  }
  if(i == vec1.size())
    vec1.push_back(*p);
  else
    vec1[i] = *p;
} 
```

* * *

当然，您可能会考虑更改您的容器。使用 a`std::map`会缩短您的代码并减少操作大型数据集所需的时间。

```
std::map<std::string, person> map1;
add(person *p) {
  map1[p->name] = *p;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:55:56.343

当 vec1 从空开始时，for 循环不会运行。因此，您希望在 vec1 中至少有一个元素。如何添加这个：

```
vec1.push_back(*p);
for(int i=0;i<vec1.size();++i){//the rest} 
```

# twig - 使用 twig 变量动态调用导入的宏子函数

> ID：13712387
> 
> 赞同：10
> 
> 时间：2012-12-04T21:37:40.650
> 
> 标签：twig

我正在尝试是否使用变量来调用特定的宏名称。

我有一个正在导入的宏文件

```
{% import 'form-elements.html.twig' as forms %} 
```

现在在那个文件中有所有的表单元素宏：text、textarea、select、radio 等。

我有一个传入的数组变量，其中包含一个元素：

```
$elements = array(
    array(
        'type'=>'text,
        'value'=>'some value',
        'atts'=>null,
    ),
    array(
        'type'=>'text,
        'value'=>'some other value',
        'atts'=>null,
    ),
);

{{ elements }} 
```

我想做的是从宏中生成这些元素。当按名称调用时，它们工作得很好：

```
{{ forms.text(element.0.name,element.0.value,element.0.atts) }} 
```

但是我想做的是这样的：

```
{% for element in elements %}
{{ forms[element.type](element.name,element.value,element.atts) }}
{% endfor %} 
```

我已经尝试了以下所有导致相同的错误：

```
{{ forms["'"..element.type.."'"](element.name,element.value,element.atts) }}
{{ forms.(element.type)(element.name,element.value,element.atts) }}
{{ forms.{element.type}(element.name,element.value,element.atts) }} 
```

不幸的是，这会引发以下错误：

```
 Fatal error: Uncaught exception 'LogicException' with message 'Attribute "value" does not exist for Node "Twig_Node_Expression_GetAttr".' in Twig\Environment.php on line 541 
```

任何有关解决方案或更好使用模式的帮助或建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T17:42:05.637

我只是认为其他人可能想要这个问题的答案，正如 fabpot 提供的那样：

> 这确实是不支持的：调用具有动态名称的宏（我添加了一个适当的异常以更清楚地了解该问题）。
> 
> 如果你真的想这样做，你可以使用以下代码：
> 
> {{ 属性（表单，element.type，[element.name，element.value，element.atts]）}}
> 
> -fabpot

[https://github.com/twigphp/Twig/issues/922#issuecomment-11133299](https://github.com/twigphp/Twig/issues/922#issuecomment-11133299)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-03T13:28:06.103

Twig 可能不支持动态宏。

但是有一个简单的解决方法，因为您可以**动态包含**其他模板。

示例：
假设您的网站有一堆内容模块或内容块（或者您想怎么称呼它们）。你有负责渲染每个模块的 Twig 宏。

```
{# modules.twig #}

{% macro module1(config) %}
  <div>module one</div>
{% endmacro %}

{% macro module2(config) %}
  <div>module two</div>
{% endmacro %}

{% macro module3(config) %}
  <div>module three</div>
{% endmacro %} 
```

现在，动态调用这些宏需要为每个宏添加一个额外的模板，如下所示：

```
{# module1.twig #}

{% import "modules.twig" as modules %}
{{ modules.module1(config) }} 
```

```
{# module2.twig #}

{% import "modules.twig" as modules %}
{{ modules.module2(config) }} 
```

```
{# module3.twig #}

{% import "modules.twig" as modules %}
{{ modules.module3(config) }} 
```

最后，在您的实际页面模板中，您只需包含模板而不是调用宏。

```
{# template.twig #}

{# this is the macro's name to be called #}
{% set macro = 'module2' %}
{# this is just a config object to be passed to the macro #}
{% set config = {} %}

{% include macro ~ '.twig' with { config: config } only %} 
```

等等，（动态产生的）输出将是`<div>module two</div>`.

# linux - 仅对某些文件进行 Grep

> ID：13712388
> 
> 赞同：-9
> 
> 时间：2012-12-04T21:37:41.607
> 
> 标签：linux, perl, cgi

如何获取读入数组的某些文件的列表。

我有几个结构如下的文件：

```
12345_lrg.jpg
12445_sml.jpg
14445_sml.jpg
12345_lrg.jpg
42345_lrg.jpg 
```

我只需要将“_sml.jpg”返回到数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:43:09.637

如果这是用于 perl 代码，正如您的标签所暗示的那样，那么您通常会使用[`grep`](http://perldoc.perl.org/functions/grep.html)：

```
my @all = qw(
    12345_lrg.jpg
    12445_sml.jpg
    14445_sml.jpg
    12345_lrg.jpg
    42345_lrg.jpg
);

my @sml = grep /_sml\.jpg$/i, @all; 
```

# asp.net-mvc-3 - MVC3：设置下拉列表选定值

> ID：13712401
> 
> 赞同：5
> 
> 时间：2012-12-04T21:38:42.177
> 
> 标签：asp.net-mvc-3, drop-down-menu, selectedvalue

我正在使用 mvc3，我的视图中有一个下拉列表。

```
@Html.DropDownListFor(m => m.State,
new SelectList(Model.StateList, "Value", "Text")) 
```

有没有办法在视图中设置选定的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T23:08:58.797

扩展 Romias 所说的内容，在您的控制器中，将 Model.State 设置为您想要的任何值。如果你想要'WI'，那么 Model.State 应该等于它。

**控制器**：

```
public ActionResult Index()
{
    var m = new TestViewModel();
    m.State = "WI";
    return View(m);
} 
```

**查看**：

```
@Html.DropDownListFor(m => m.State, new SelectList(Model.StateList, "Value", "Text", Model.State)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:49:16.700

做就是了：

```
@Html.DropDownListFor(m => m.State, new SelectList(Model.StateList, "Value", "Text", Model.State)) 
```

# python - 用螺旋 python 编组修复 virtualenv 的最快、最轻松的方法是什么？

> ID：13712403
> 
> 赞同：1
> 
> 时间：2012-12-04T21:38:43.667
> 
> 标签：python, marshalling, virtualenv, eof, corruption

它的短处是：

`from mega.capture_classes.class_wc_daemon import WCDaemon`

给我：

`EOFError: EOF read where not expected`

这一切都发生在一个 virtualenv 中。而且，是的，我确保 class_wc_daemon.py 看起来很健康。

现在我收集到这个错误只会在 Python 编组时抛出，而修复错误的最佳方法是重新安装 Python（请参阅[Python 3.2 won't import cookielib](https://stackoverflow.com/questions/9857677/python-3-2-wont-import-cookielib)）我的电脑以一种有趣而多彩的方式崩溃了，所以我想了一些被破坏了，所以这是有道理的......

我一直在谷歌上搜索，找不到我的问题的直接答案：

用螺旋 python 编组修复 virtualenv 的最快、最轻松的方法是什么？

我可以创建一个新的 virtualenv，复制我的所有代码，重新安装所有软件包并使用它运行，但我确定有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:01:00.710

所以问题是一个损坏的 .pyc 文件。我删除了我所有的 pycs 并让 Python 为我制作了一些新的，一切都很好。

感谢 Martjin Pieters 的评论 - 你是一位学者和绅士 :)

# php - PHP：函数的结果转回字符串

> ID：13712404
> 
> 赞同：0
> 
> 时间：2012-12-04T21:38:44.523
> 
> 标签：php, function, eval

我有一个模板 .php 文件，其中包含一堆函数来呈现 html。这是一个片段：

```
$j ='    
table("tb_02", "600", "", "ebebeb", "right", "top", "30 0 30 0","Table content...");
//whole bunch of similar functions here...
'; 
```

表函数如下所示：

```
 function table($tbID, $tbWidth, $tbHeight, $tbBgColor, $tbHzAlign, $tbVtAlign, $tbPad, $tbContent) {
// code omitted here     
$a = "
          <table id=\"$tbID\" width=\"$tbWidth\" $tbHeight $tbBgColor border=\"0\" cellpadding=\"0\" cellspacing=\"0\">
            <tr>
              <td valign=\"$tbVtAlign\" align=\"$tbHzAlign\" width=\"$tbWidth\" style=\"$pad\">
        $tbContent
              </td>
            </tr>
          </table>  
        "; 
          echo $a;
        }; 
```

我想要做的是将模板 .php 文件（仅是 html - 没有 php）中 $j 的结果转换为字符串。我遇到的问题是我首先需要它 eval'd （函数的结果，然后转换它）。我正在追求这样的东西，但找不到将 eval'd 代码恢复为字符串的方法：

```
$j = eval($j);
$j = str_replace("<", "&lt;", $j);
$j = str_replace(">", "&gt;", $j);
echo $j; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:04:32.613

`eval`不是*模板*系统。它很慢，不安全，不应该使用。总有更好的方法来做事。

我建议四处寻找一个*真正的*模板系统，你正在做的是非常糟糕的做法。

首先，你的函数应该是`return`数据，而不是数据`echo`。这样一来，您就可以操纵它，并且`echo`一次将其全部清除。

其次，看看[`HEREDOC`s](http://php.net/heredoc)，它们会让你的生活更轻松。

```
function table($tbID, $tbWidth, $tbHeight, $tbBgColor, $tbHzAlign, $tbVtAlign, $tbPad, $tbContent) {
    // code omitted here     
    $a = <<<HTML
    <table id="$tbID" width="$tbWidth" $tbHeight $tbBgColor border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td valign="$tbVtAlign" align="$tbHzAlign" width="$tbWidth" style="$pad">$tbContent</td>
        </tr>
    </table>
HTML;

    return $a;
} 
```

最后，你不应该尝试`eval`拉弦，这是打击垫练习。我的建议可能不是更好的做法，但它比`eval`.

不要`$j`成为字符串，而是尝试将其设为数组。

```
$j = array(
    'table' => array("tb_02", "600", "", "ebebeb", "right", "top", "30 0 30 0","Table content...")
); 
```

现在您可以做的是使用[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)“评估”代码。

```
$html = '';

foreach($j as $func=>$args){
    $x = call_user_func_array($func, $args);

    $x = str_replace("<", "&lt;", $x);
    $x = str_replace(">", "&gt;", $x);

    $html .= $x;
}

echo $html; 
```

# android - Android 试图将 2 个图像居中，但它们是正确的

> ID：13712406
> 
> 赞同：1
> 
> 时间：2012-12-04T21:38:47.200
> 
> 标签：android, xml

我有一个布局，左侧有一张卡片的图像。右侧顶部有 2 个按钮。然后是它们下方的 2 个图像，以及 2 个图像下方的 1 个图像。

我希望 2 张图片和 1 张图片居中。有 1 个图像的行居中。

**部分代码**

```
<LinearLayout
android:id="@+id/mainLayout"
android:layout_gravity="center"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:orientation="horizontal">

<ImageView
    android:id="@+id/viewfacebook"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:src="@drawable/facebook" />

<ImageView
    android:id="@+id/viewmail"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:src="@drawable/mail" />
</LinearLayout> 
```

我为 2 个图像创建了一个水平容器，并将其重力设置为中心。这是行不通的。我还尝试将重力设置在 2 张图像的中心。但是......他们总是留在左边。

**整个 XML 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<LinearLayout
    android:id="@+id/mainLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="vertical"></LinearLayout>

<LinearLayout
    android:id="@+id/mainLayout"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="@drawable/background"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="horizontal">

        <LinearLayout
            android:id="@+id/mainLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <ImageView
                android:id="@+id/cardpic"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dp"
                android:src="@drawable/bio" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/mainLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <LinearLayout
                android:id="@+id/mainLayout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:orientation="horizontal">

                <ImageView
                    android:id="@+id/buthome"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ok" />

                <ImageView
                    android:id="@+id/butaffirmation"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/affirmation" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/mainLayout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:orientation="horizontal" />

            <ImageView
                android:id="@+id/viewfacebook"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:src="@drawable/facebook" />

            <ImageView
                android:id="@+id/viewmail"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:src="@drawable/mail" />
        </LinearLayout>

        <ImageView
            android:id="@+id/vietwitter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/twitter" />

        <LinearLayout
            android:id="@+id/mainLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal">

            <TextView
                android:id="@+id/housetext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" *A long and happy marriage or commitment is in your future.\n*Emotional security (loyalty and trust) exists in your relationship.\n*You will have a stable home and family life.\nThe marriage card is about a person who is either going get married or who really cherishes the whole institution of marriage."
                android:textColor="#ff000000"
                android:textSize="18px"
                android:textStyle="bold" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:id="@+id/cardtext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" *A long and happy marriage or commitment is in your future.\n*Emotional security (loyalty and trust) exists in your relationship.\n*You will have a stable home and family life.\nThe marriage card is about a person who is either going get married or who really cherishes the whole institution of marriage."
        android:textColor="#ff000000"
        android:textSize="20dp"
        android:textStyle="bold" />
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:07:16.000

遵循您的 XML 有点困难，但这应该会让您走上正确的轨道，试一试。

如果您使用的是线性布局... 在水平线性布局中并排嵌套要居中的图像 为每个图像分配布局权重 您可能必须使用 match_parent 来处理 layout_widths 和 heights （或根据您的填充目标 API），以及 layout_gravity 和重力参数。

```
<LinearLayout android:gravity="center" ... orientation="horizontal">

    <ImageView 
    android:layout_weight="1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/viewmail"
    android:src="@drawable/mail" />

    <ImageView 
    android:layout_weight="1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/vietwitter"
    android:src="@drawable/twitter" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T05:06:51.013

编辑了问题中的代码。我有一段艰难的时间试图看看你想做什么。这个问题的图片可能非常简单（imo）。现在回答您的问题，请了解 LinearLayouts 默认情况下具有左对齐。如果您嵌套了多个 LinearLayout，在决定它们的宽度和高度时要格外小心，因为它们优先于重力。

# c# - 从 asp.net 表单使用 Windows 身份验证

> ID：13712412
> 
> 赞同：0
> 
> 时间：2012-12-04T21:39:10.157
> 
> 标签：c#, asp.net, silverlight, mvvm, windows-authentication

我有一个 MVVM Silverlight RIA 业务应用程序，其中包含一小部分将在 PDA 上运行的 .net 网络表单。Silverlight 应用程序使用 Windows 身份验证，因此我可以在每个页面上调用 AuthenticationDomainService 来获取像这样的登录用户。 ..

```
 LoadOperation loadUserOp = authContext.Load(authContext.GetUserQuery());
        loadUserOp.Completed += new EventHandler(loadUserOp_Completed);

   void loadUserOp_Completed(object sender, EventArgs e)
    {
        try
        {
            User user = authContext.Users.First();
            CurrentUserLogin = user.Name;
        }
        catch
        {
        }
    } 
```

我需要一种方法，以便我可以在 PDA 的 asp.net 登录页面的 Codebehind 中通过 windows 身份验证登录，然后从这些 asp.net 页面后面的代码中访问 authContext。想法？

# c++ - 类定义和使用错误

> ID：13712413
> 
> 赞同：1
> 
> 时间：2012-12-04T21:39:11.957
> 
> 标签：c++, syntax

我收到以下代码错误。错误是`incomplete type is not allowed`和`use of undefined type 'mGame'`。

标头.h：

```
//--Libraries
#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

//--Classes
class mGame; 
```

游戏.cc：

```
#include "header.h"

class mGame
{
private:

public:
    bool intro();
}; 
```

介绍.cc：

```
#include "header.h"

bool mGame::intro() //--Line 3
{
    printf("|-----------------------------|\n");

    printf("\n Welcome to the Guessing Game!\n");

    printf("\n|-----------------------------|\n");
    return false;
} 
```

错误都在 intro.cc 的第 3 行。我试图找到一个解决方案，但我无法为我正在做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:47:48.320

header.h 不知道game.cc 的任何定义，你只告诉header.h，有一个类mGame。将 game.cc 重命名为 game.h 并将其包含在 header.h 中并删除“class mGame;”行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:40:54.997

为了能够使用`mGame`from `Intro.cc`，您必须将类声明移动到`header.h`（或包含 from 的其他一些头文件中`Intro.cc`）。

有一个前向声明`header.h`是不够的（这就是“不允许不完整类型”的意思）。

# excel - 在 VBA 中将 Worksheet.Name 设置为 cell.value 时出现类型不匹配错误

> ID：13712414
> 
> 赞同：1
> 
> 时间：2012-12-04T21:39:21.800
> 
> 标签：excel, vba

我编写了以下代码来创建名称与 Sheet1 第一列中的名称相同的工作表我在尝试在新工作表上设置名称时收到 TypeError 但不知道为什么。有人可以帮忙吗？

```
Sub CreateWorkSheets()
    '
    ' Macro5 Macro
    '
    '
    Dim r As Range
    Set r = Sheets("Sheet1").Columns(1)
    For Each cell In r
        Dim aa As String

        Dim newSheet As Worksheet
        Set newSheet = Sheets.Add(After:=Sheets(Sheets.Count))
        strTemp = cell.Value
        newSheet.Name = strTemp // Error Here
    Next cell
End Sub 
```

我也尝试了以下代码，即使 strValue 有效，它也不起作用

```
Sub Test1()

Sheets("Sheet1").Select
Dim x As Integer
' Set numrows = number of rows of data.
NumRows = Range("A2", Range("A2").End(xlDown)).rows.Count
' Select cell a1.
Range("A2").Select

' Establish "For" loop to loop "numrows" number of times.
For x = 1 To NumRows
    Dim newSheet As Worksheet
    Set newSheet = Sheets.Add(After:=Sheets(Sheets.Count))
    Sheets("Sheet1").Range("B1").Value = "A" + Trim(Str(x))
    strValue = "A" + Trim(Str(x))

    newSheet.Name = Str(Sheets("Sheet1").Range(strValue).Value)
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:09:15.393

显然是因为你设置：

```
Set r = Sheets("Sheet1").Columns(1) 
```

它将单元格对象设置为 $A:$A 列，而不是您想象的 $A$1 列。当我遇到“cell.value”行时，我把它放在即时窗口中：

```
?cell.Address
$A:$A 
```

你应该避免使用一整列来做你想做的事情，我强烈建议你将这些关键字添加到模块的顶部：

```
Option Explicit 
```

这将更彻底地检查您的代码，并帮助您避免不必要的错误。

要解决此问题，您可以获得所需的确切范围，我建议您声明每个变量，使其保持特定类型。

像这样的东西：

```
Option Explicit

Sub CreateWorkSheets()
    Dim r As Range
    Dim sh As Worksheet
    Dim tempSh As Worksheet
    Dim cell As Range
    Dim strTemp As String

    Set sh = Sheets("Sheet1")
    Set r = sh.Range(sh.Cells(1, 1), sh.Cells(sh.Rows.Count, 1).End(xlUp))

    For Each cell In r
        Set tempSh = Sheets.Add(After:=Sheets(Sheets.Count))
        strTemp = cell.Value
        tempSh.Name = strTemp '// no more error
    Next cell
End Sub 
```

# c# - 在 C# MVC 中实现命令模式的问题

> ID：13712415
> 
> 赞同：2
> 
> 时间：2012-12-04T21:39:25.763
> 
> 标签：c#, model-view-controller, command

我希望这是直截了当的。我正在尝试在我正在制作的 MVC 应用程序中实现命令模式。我看到的唯一问题是 Command 对象的数量非常多。

我有 11 个表，每个表有大约 20 个需要更新的字段。

我的问题是我需要为每个字段设置不同的对象吗？

这是一个医疗保健应用程序，所以让我举个例子。我有一个名为 KeyHospital 的表，该表存储医院信息，并且仅存储我们医院客户的医院信息。我使用 Linq to SQL 连接到数据库。就字段而言，KeyHospital 表可能是最大的。我所做的是为每个字段创建一个新对象。

```
public class ChangeHospitalDEA : ICommand
{
    public ChangeHospitalDEA(int id, string newDEA)
    {
        var Thishospital = (from Hospital in _context.Keyhospitals
                            where Hospital.ID == id
                            select Hospital).Single();

        Thishospital.DEAnum = newDEA;
    }
} 
```

我有 ICommand 作为一个抽象类。

```
public abstract class ICommand
{
    public AllkeysDataContext _context = new AllkeysDataContext();

    public void Execute()
    {
        _context.SubmitChanges();
    }
} 
```

我这样做对吗？我只是觉得我为此编写了很多代码，这是我第一次使用命令模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:35:11.437

明显太细了。相反，您应该为诸如插入新实体、（一个或多个相关对象的图形）更新实体等操作定义命令。

每当您要执行操作时，都会使用命令。在某些情况下，更改单个字段可能会构成一项操作，例如返回其他数据或提供建议。例如用于验证输入地址的 AJAX 调用。此外，`ICommand`对于基础抽象类来说，这是一个糟糕的名称选择。`ICommand`是命令体系结构的通用接口。（“I”前缀通常是为接口名称保留的。）我主要处理 MVVM，但我怀疑 MVC 已经有一个通用的命令接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:27:33.053

这可能不是您想听到的，但我会将您的用户界面重组为基于任务的 UI，并将您的 UI 构建为常见任务，例如更改缉毒署编号，这些任务可以随着时间的推移而改进。

如果您有现有的分析，您会注意到某些字段只会一起更改，并且这些字段可以在逻辑上分组为常见任务我也觉得在构造函数中隐藏数据库调用是一种不好的做法，并将该 linq 语句移动到方法并让ctor仅初始化公共属性或私有字段，并让它们在执行方法中使用。

将查询移动到执行方法的主要原因是减少任何乐观并发错误的机会。

另外我也觉得调用基类 ICommand 不是一个好习惯，将来可能会导致混乱，建议您调用它 CommandBase 或再次将其更改为接口。

# cakephp - 传递数据以查看 CakePHP

> ID：13712416
> 
> 赞同：0
> 
> 时间：2012-12-04T21:39:26.580
> 
> 标签：cakephp, controller

这可能很容易，但是我尝试了一些想法，但根本没有解决方案，我不是 cakePhp 专家，但我正在尝试在有限的时间内修改现有项目。

问题是我有一个名为“centro”的实体，但我在另一个控制器“rw”上使用它的模型，但我根本无法让它将该数据传递给视图；似乎是因为当我使用重定向返回“索引”时变量被删除。

我需要这些数据来生成谷歌地图，$this->set(.....) 方法不起作用。

这是“rw”控制器的代码。

```
<?php
class RwController extends AppController {
var $name = 'Rw';
// var $paginate = array(
    // 'Tip' => array(
        // 'limit' => 1,
        // 'order' => array(
            // 'tip.created' => 'desc'
        // ),
    // ),
    // 'Evento' => array(
        // 'limit' => 1,
        // 'order' => array(
            // 'evento.fecha' => 'desc'
        // ),
    // )
// );
function map() {
    $this->helpers[]='GoogleMapV3';
}
function pageForPagination($model) {
    $page = 1;
    // $chars = preg_split('/model:/', $this->params['url']['url'], -1, PREG_SPLIT_OFFSET_CAPTURE);
    // #print_r($chars);
    // if(sizeof($chars) > 1 && sizeof($chars) < 3) {
        // #echo "Belongs to ".$model.": \n";
        // #echo var_dump($chars);
    // }
    // $params = Dispatcher::parseParams(Dispatcher::uri());
    // echo "<p>".var_dump($params)."</p><br />";
    #echo $this->params['named']['model'].$model;
    #echo $this->params['named']['page'];
    $sameModel = isset($this->params['named']['model']) && $this->params['named']['model'] == $model;
    $pageInUrl = isset($this->params['named']['page']);
    if ($sameModel && $pageInUrl) {
        $page = $this->params['named']['page'];
    } else {
        #echo var_dump($this->passedArgs);
    }
    $this->passedArgs['page'] = $page;
    return $page;
}

function index() {

    $this->loadModel('User');
    $this->loadModel('Evento');
    $this->loadModel('Tip');

    $dataEvento = $this->Evento->find('all');
    $dataTip = $this->Tip->find('all');

    $page = $this->pageForPagination('Evento');
    $this->paginate['Evento'] = array(
        'contain' => false,
        'order' => array('Evento.fecha' => 'desc'),
        'limit' => 1,
        'page' => $page
    );
    $dataEvento = $this->paginate('Evento');

    $page = $this->pageForPagination('Tip');
    $this->paginate['Tip'] = array(
        'contain' => false,
        'order' => array('Tip.created' => 'desc'),
        'limit' => 1,
        'page' => $page
    );
    $dataTip = $this->paginate('Tip');

    $this->set('users', $this->User->find('all'));
    $this->set('eventos', $dataEvento);
    $this->set('tips', $dataTip);
    $this->set('rw');

    if(isset($this->params['named']['model'])) {
        if (strcmp($this->params['named']['model'], 'Evento') == 0) {
            if($this->RequestHandler->isAjax()) {
                $this->render('/elements/ajax_rw_evento_paginate');
                return;
            }
        } elseif (strcmp($this->params['named']['model'], 'Tip') == 0) {
            if($this->RequestHandler->isAjax()) {
                $this->render('/elements/ajax_rw_tip_paginate');
                return;
            }
        }
    }
}

function about($id = null) {
    $this->Rw->recursive = 0;
    $this->set('rw', $this->paginate());
}

function beforeFilter() {
        parent::beforeFilter(); 
        $this->Auth->allow(array('*'));
}

function getCentros($id = null ){
    $this->loadModel('Centro');
    $this->log('getcentros','debug');
    $this->log('el id'.$id,'debug');
    if( sizeof($id) > 1){
        $this->set('centros', $this->Centro->query("SELECT centros.id, name, latitud ,longitud 
                                                        FROM `centros`,`centrosmateriales` 
                                                            WHERE centros.id = centro_id 
                                                                AND material_id ='".$id[0]."' 
                                                                    OR material_id='".$id[1]."'"));
        $this->log('size id > 1 ','debug');                                                         
    }elseif( sizeof($id) >0) {
        if($id == 0){
            $this->set('centros', $this->Centro->find('all'));
        }else{
            $this->set('centros', $this->Centro->query("SELECT centros.id, name, latitud ,longitud 
                                                            FROM `centros`,`centrosmateriales` 
                                                                WHERE centros.id = centro_id 
                                                                    AND material_id ='".$id[0]."'"));
            }
        }
        $this->Session->write('saludos', 'Saludando');
        $this->redirect(array('action' => 'index'));
}

}   
?> 
```

我一直在考虑ajax，但我不确定。

无论如何，提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:16:10.193

Using[`redirect()`](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aredirect)将实际的 HTTP 重定向发送到浏览器。这会导致浏览器向服务器发送另一个请求，发送到它被重定向到的 URL。

您传递给的数据`set()`仅在单个 CakePHP 请求周期内可用。之后，所有 PHP 数据都会从内存中擦除。将数据传递给下一个请求的唯一方法是在 URL 或会话中。

在你的情况下，你应该重新考虑你的设计和你在行动`set()`中需要的所有数据。`index()`您可以将逻辑从`getCentros()`您的`Centro`模型中移出。然后，在你的`index()`功能中，你可以做

```
$this->set(
    'centro',
    $this->Centro->getCentros();
); 
```

# windows - 如何处理批处理文件的输入参数？

> ID：13712420
> 
> 赞同：0
> 
> 时间：2012-12-04T21:39:34.050
> 
> 标签：windows, cmd, batch-file

当我调用 script.bat 参数时，我正在尝试处理输入参数。如果缺少参数，接收 script.bat 将弹出一个提示，要求用户分配值。但是现在即使我做了 script.bat 编号，提示仍然出现......不知道为什么。

**代码：**

```
:Loop
IF "%1"=="" GOTO Prompt
  set VAR=%1
SHIFT
GOTO Loop
:Prompt
  set /p VAR="Check which value? "
  GOTO Continue
:Continue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:42:43.197

如果设置了 %1，您必须转到您的继续标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:50:48.637

`:Prompt`如果参数提供正确，您需要跳过：

```
:Loop
IF "%1"=="" GOTO Prompt
  SET VAR=%1
  GOTO Continue
SHIFT
GOTO Loop
:Prompt
  set /p VAR="Check which value? "
  GOTO Continue
:Continue 
```

实际上，您现在可以删除`SHIFT`and `GOTO Loop`; 正如@dbenham 在下面的评论中发布的那样，它是无法访问的代码。这也消除了`:Loop`它本身，因为它从未被使用过。这将其简化为：

```
IF "%1"=="" GOTO Prompt
  SET VAR=%1
  GOTO Continue
:Prompt
  set /p VAR="Check which value? "
  GOTO Continue
:Continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:56:57.023

公认的 Ken White 解决方案将起作用，但可以大大简化。

```
set "VAR=%~1"
if not defined VAR set /p "VAR=Check which value? " 
```

用户可以简单地按下`<Enter>`而不输入任何内容。您可以引入 GOTO 循环来强制输入值。

```
set "VAR=%~1"
:loop
if not defined VAR set /p "VAR=Check which value? "&goto :loop 
```

# mysql - CONCAT 多个字段到单个字段，单行距

> ID：13712423
> 
> 赞同：26
> 
> 时间：2012-12-04T21:39:41.397
> 
> 标签：mysql, concat

我正在尝试连接 a`first` `middle` `maiden`和`last`name 字段并使用它来更新一个名为`fullname`

对于每个用户，可以填写这 4 个字段的任意组合。从 0 到全部 4。但是我还需要每个名称之间有一个空格（而不是多个空格）。

```
UPDATE nameTable SET fullname = CONCAT(first, middle, maiden, last); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-04T21:49:13.313

MySQL 有`CONCAT_WS`- 用分隔符连接

```
CONCAT_WS(' ', first, middle, maiden, last); 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

正如下面所指出的`andr`，确保所有连接的字段都包含`NULL`而不是空字符串 ( `''`)，否则您将在输出中得到一个双空格。

小提琴：[http ://sqlfiddle.com/#!2/1fe83/1](http://sqlfiddle.com/#!2/1fe83/1)

### 进一步应用

因此，如果您将来使用此函数创建一个小的 CSV 列表，请小心，因为您不会得到`NULL`字段的逗号。您必须对`COALESCE(column, '')`每个可为空的列进行包装。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-17T13:45:53.393

空字符串解决方案 `TRIM(BOTH ' ' FROM CONCAT_WS(' ', first, middle, maiden, last))`

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)

# ruby-on-rails - 通过 Rails 中的地理位置查找附近的地址

> ID：13712424
> 
> 赞同：0
> 
> 时间：2012-12-04T21:39:46.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, geocoding

我已经存储了用户 - 包括他们的地址 - 并且需要找到居住在特定位置一定距离内的所有用户。

我正在使用`geocoder`并将经度和纬度存储在用户表中。

我如何找到这些用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:21:35.897

要进行基于纬度/经度的查询，请执行以下操作：

```
User.near([39.41, 90.23], 10) 
```

这将在纬度/经度对 10 英里范围内找到用户。

以下是文档：[https ://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)

# logging - 为什么 EntLib 日志记录会在同一时间戳发出多条消息？

> ID：13712427
> 
> 赞同：0
> 
> 时间：2012-12-04T21:40:06.910
> 
> 标签：logging, time, enterprise-library

使用 Enterprise Library 中的日志记录块，我看到多个日志消息以相同的时间戳发出，尽管知道调用`LogWriter.Write()`间隔为几毫秒（如测量值`System.Diagnostics.Stopwatch`）。

关于可能导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:34:01.143

这可能是由于企业库用于获取当前时间的方法的精度有限，可能是 System.DateTime.Now。如果您需要更高的精度，您可能需要考虑使用不同的库进行日志记录。

[http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:04:12.077

如果您需要精确的日志使用**System.Diagnostics.Stopwatch**来获得精确的时间。请参阅此处的示例[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.gettimestamp。 aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.gettimestamp.aspx) 分辨率取决于您的硬件。可以和纳秒一样好。

手动构建日志条目，

```
//Microsoft.Practices.EnterpriseLibrary.Logging
var logEntry = new LogEntry() ;
/// code re stop watch add here...
FancyTime = StartTime + Elapsedticks // see StopWatch.getTimeStamp
logEntry.TimeStamp = FancyTimeFromStopWatchClass;

LogWriterImpl.Write(logEntry); 
```

换句话说，构建日志条目并调用 Write，而不是使用参数调用重载 write。

# jquery - JQuery UI .sortable 按钮从当前列表中删除并返回到原始列表

> ID：13712431
> 
> 赞同：2
> 
> 时间：2012-12-04T21:40:28.473
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, nested-sortable

我想在移动的项目上附加一个按钮，单击该按钮将从列表中删除该项目并将其返回到其原始位置。[该插件](http://quasipartikel.at/multiselect/)具有我正在寻找的功能，但我一直在搜索一整天，看起来 .sortable 中缺少此功能。

我的结构是：

```
<ul class="sortable">
  <li class="parent old">
    <h3 class="heading">User 1</h3>
    <a class="remove">X</a>
    <ul class="sortable">
      <li class="ui-state-default old">
        <h3>My Image</h3>
      </li>
      <li class="ui-state-default old">
        <h3>My Image 2</h3>
      </li>
    </ul>
  </li>
</ul> 
```

这是js：

```
$('.sortable').sortable({
    connectWith: [".newList"],
    handle: "h3",
    cursor: "move",
    placeholder: "placeHolder",
    opacity: 0.5,
    items: ".old",
    clone: "helper",
    revert: true
});
$('.remove').click(function(){
    $(this).prevAll('.parent:first').remove();
}); 
```

尝试不同的东西我可以成功地调用 .sortable("destroy") 但如果它不会再次出现在原始列表中，那将没有任何好处。[在这个 fiddle](http://jsfiddle.net/B5PH4/)中，我一直在查看另一种可能的（不理想的）解决方案。基本上我对这个解决方案的想法是为按钮添加一个破坏，它总是在原始列表中。这里的问题是，如果相应的项目从新列表中销毁，我确实需要至少从原始列表中隐藏它并显示它。所以理想情况下，如果可能的话，我想用 .sortable 来做这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:49:59.707

借用 jQuery Sortable 示例，这似乎与您想要的非常相似。

关键在于 Sortable 上的 connectWith 属性。此属性可以单向设置。这使您可以使用可以维护的特定排序设置初始列表，同时允许根据需要将项目拖到辅助列表中。示例：http: [//jsfiddle.net/rvAgL/](http://jsfiddle.net/rvAgL/)

html:

```
<ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>​ 
```

js：

```
$(function() {
        $( '#sortable1').sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
        $('#sortable2').sortable({
            update:function(ev, ui){
                var widget = $(this);
                var removeButton = $("<span>X</span>").click(function(){
                    var parentLi = $(this).parent();
                    $(this).remove();
                    parentLi.appendTo($('#sortable1'))
                     $('#sortable1 li').sort(asc_sort).appendTo($('#sortable1'));
                });
                $(ui.item).append(removeButton);
            }
        }).disableSelection();

    function asc_sort(a, b){
        return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase());    
    }

});​ 
```

一点CSS：

```
 #sortable1, #sortable2 { list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; cursor:pointer }​ 
```

# android - 在 Android 中使用 Thread 同时录制和处理音频

> ID：13712433
> 
> 赞同：5
> 
> 时间：2012-12-04T21:40:32.810
> 
> 标签：android, multithreading, audio

我正在编写一个小应用程序，它从 android MIC 捕获音频，对输入执行 FFT，然后将图表绘制给用户。我正在尝试同时进行记录和绘图（显然从记录到绘图有一点延迟）。我正在尝试启动两个线程，一个用于读取，一个用于处理。但是，当我处理它似乎只接收（或不接收）零时，我遇到了同步问题。任何建议将不胜感激。:)

```
public class Plotter extends Activity {

/* plotting objects */
private static GraphicalView mView;
private LineGraph line = new LineGraph();

private boolean recordAudio = true; // record?
private AudioRecord mRecorder = null; // audio object
private Menu mMenu; // app menu

private static final String LOG_TAG = "Frequency Plotter"; // debug tag

private Mfft mfft = null; // FFT class
private static final int BUF_SIZE = 8192; // amount to read in

private Thread listener = null;
private Thread processor = null;

Stack<Float> items = new Stack<Float>();

/* colors for line */
private int[] colors = {Color.BLUE,Color.CYAN,Color.DKGRAY,Color.GRAY,
        Color.GREEN,Color.LTGRAY,Color.MAGENTA,Color.RED,Color.WHITE,Color.YELLOW};

private void processAudio(){

    ArrayList<Double> real = new ArrayList<Double>();

    try{

        Random randomGenerator = new Random();
        float[] in = new float[2048];
        Arrays.fill(in,1);

        while(true){

            synchronized(items){

                while(items.size() < 2048)
                    items.wait();

                items.notifyAll();

                for(int i=0; i < 2048; i++){

                    in[i] = items.pop();    
                }
            }

            double[] ret = mfft.fft(2048,44100,in); // get FFT of data
            TimeSeries dataset = new TimeSeries( (real.size()+1)/2048 + "" ); 
            XYSeriesRenderer renderer = new XYSeriesRenderer(); // customized renderer

            // Customization time
            renderer.setColor(colors[randomGenerator.nextInt(10)]);
            renderer.setPointStyle(PointStyle.SQUARE);
            renderer.setFillPoints(true);
            line.addRenderer(renderer); // add custom renderer

            for(int i = 0; i < 2048; i++){
                real.add(ret[i]);
                dataset.add(real.size()-1,ret[i]); // Add it to our graph
            }

            line.addDataset(dataset); // add data to line
            mView.repaint(); // render lines
        }

    }catch(Exception e){
        Log.e(LOG_TAG, e + " ");
    }
}

private void writeToBuffer(short[] in) {

    synchronized(items){

        for(int i = 0; i < BUF_SIZE; i++){ // copy to create float
            items.push((float)in[i]);   
        }
        items.notifyAll();
    }
}

private void listen(){

    final short[] in = new short[BUF_SIZE];
    mRecorder = new AudioRecord(
            MediaRecorder.AudioSource.MIC, // source
            44100, // frequency (HERTZ)
            AudioFormat.CHANNEL_IN_MONO, // channel
            AudioFormat.ENCODING_PCM_16BIT, // format
            BUF_SIZE // size data packet
            );

    mRecorder.startRecording();

    while(recordAudio){
        try{    
            /* read next part */
            mRecorder.read(in,0,BUF_SIZE); // read from device
            writeToBuffer(in);

        }catch(Exception t){
            /* something went horribly wrong!!!*/
            recordAudio = false;
            Log.e(LOG_TAG, "Failure reading" + t.getMessage());
        }   
    }
}

private void startRecording(){

    /* create a new thread that will run the recording in the background */

    listener = new Thread(
        new Runnable(){

            public void run(){
                listen();
            }
    });
    listener.start();

    /* small delay to produce */
    try {
         Thread.sleep(100);
    } catch (InterruptedException e1) {
         e1.printStackTrace();
    }

    /* create a thread to process the audio */
    processor = new Thread(
        new Runnable(){
            public void run(){
                processAudio();
            }
    });
    processor.start();
}

private void stopRecording(){

    recordAudio = false;
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
}

/** clear the current chart */
private void clearChart(){

    line = new LineGraph();
    this.onStart();
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
protected void onStart() {

    super.onStart();

    /* instantiate */
    mfft = new Mfft(); // instance of the FFT class
    mView = line.getView(this); // get the chart view

    /* new horizontal layout */
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.HORIZONTAL);

    ll.addView(mView); // add chart to layout

    setContentView(ll); // set layout
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    // Handle item selection

    switch (item.getItemId()) {
        case R.id.record:

            startRecording();

            item.setEnabled(false); // disable start
            mMenu.findItem(R.id.stop).setEnabled(true); // enable stop

            return true;
        case R.id.stop:

            stopRecording();

            item.setEnabled(false);  // disable stop
            mMenu.findItem(R.id.clear).setEnabled(true); // enable stop

            return true;
        case R.id.clear:

            clearChart(); // clear chart

            item.setEnabled(false);  // disable clear
            mMenu.findItem(R.id.record).setEnabled(true); // enable stop

            return true;
        default:
            return super.onOptionsItemSelected(item);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    mMenu = menu;
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_menu, menu);
    return true;
}
} 
```

编辑：添加了完整的定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:51:31.117

*   几个想法...

# 类似的示例代码，Audalyzer

不幸的是，作者已经停止了这个项目的开发，但源代码 tarball 仍然可以在线获得。特别注意：`org.hermit.android.io.AudioReader.java`. 您阅读音频并通过`Stack`对象传递它，作者使用`short []`数组。（这似乎不应该是你的问题来源......） [http://code.google.com/p/moonblink/downloads/detail?name=SourceTarball.zip](http://code.google.com/p/moonblink/downloads/detail?name=SourceTarball.zip)

# BUF_SIZE 个想法

您的音频缓冲区 (BUF_SIZE = 8192) 感觉有点小。这有什么关系`AudioRecord.getMinBufferSize()`？我使用了 2x minBufferSize，并且没有对其进行任何计算（仅读/写）。

# `Handler`想法

我仍在审查您的代码，不清楚您的线程如何通信。但是，您的问题听起来需要一种方式让线程进行通信`Handler`。

以下是我一直在查看的链接，以掌握如何使用`Handler`s 并有效地在线程之间进行通信：

*   线程 - 处理程序的很好的概述（没有活套）。带代码示例：http: `com.indy.testing.TestMain.java.MyThread.java` [//indyvision.net/2010/02/android-threads-tutorial-part-3/](http://indyvision.net/2010/02/android-threads-tutorial-part-3/)

*   线程 - 处理程序和循环器的概述 [http://techtej.blogspot.com/2011/02/android-passing-data-between-main.html](http://techtej.blogspot.com/2011/02/android-passing-data-between-main.html)

*   带 2way 通信的线程。带代码示例：sample.thread.messaging.ThreadMessaging.java [http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/](http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/)

# ormlite-servicestack - ORMLite 方言

> ID：13712437
> 
> 赞同：0
> 
> 时间：2012-12-04T21:40:46.630
> 
> 标签：ormlite-servicestack

我已经按照这个[问题]（http://stackoverflow.com/questions/13691575/servicestack-ormlite-with-mutliple-database-servers）给出的答案，但我仍然得到一个错误。错误是：

> {System.Data.SqlClient.SqlException（0x80131904）：无效的对象名称“双重”。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection，操作`1 wrapCloseInAction) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) 在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject state&Obj, Boolean dataReady) 在 System.Data.SqlClient.SqlDataReader.TryConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader.get_MetaData() 在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) 在 System.Data System.Data 中的 .SqlClient.SqlCommand.RunExecuteReaderTds（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，布尔异步，Int32 超时，任务和任务，布尔异步写入）。SqlClient.SqlCommand.RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔返回流，字符串方法，TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior) at ServiceStack.MiniProfiler.Data.ProfiledDbCommand.ExecuteDbDataReader(CommandBehavior behavior) at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader() at ServiceStack.OrmLite.OrmLiteReadExtensions.ExecReader(IDbCommand dbCmd, String sql) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteReadExtensions.cs:line 48 at ServiceStack.OrmLite.OrmLiteReadExtensions.GetScalar[T](IDbCommand dbCmd, String sql, Object[] sqlParams) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteReadExtensions.cs:line 498 at ServiceStack.OrmLite.Oracle.OracleOrmLiteDialectProvider.GetNextValue(IDbCommand dbCmd, String sequence, Object value) at ServiceStack.OrmLite.Oracle.OracleOrmLiteDialectProvider.ToInsertRowStatement(Object objWithProperties, IList`1 insertFields, IDbCommand dbCommand) 在 ServiceStack.OrmLite.OrmLiteDialectProviderBase `1.ToInsertRowStatement(Object objWithProperties, IDbCommand command) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteDialectProviderBase.cs:line 439 at ServiceStack.OrmLite.OrmLiteWriteExtensions.Insert[T](IDbCommand dbCmd, T[] objs) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteExtensions.cs:line 394 at ServiceStack.OrmLite.OrmLiteWriteConnectionExtensions.<>c__DisplayClass42`1.b__41(IDbCommand dbCmd) 在 C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteConnectionExtensions.cs:ServiceStack.OrmLite.ReadConnectionExtensions.Exec( IDbConnection dbConn, Action `1 filter) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\Expressions\ReadConnectionExtensions.cs:line 55 at ServiceStack.OrmLite.OrmLiteWriteConnectionExtensions.Insert[T](IDbConnection dbConn, T[] objs) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteConnectionExtensions.cs:line 164 at ServiceStack.ServiceInterface.Auth.OrmLiteAuthRepository.<>c__DisplayClass5.<CreateUserAuth>b__4(IDbConnection db) at ServiceStack.OrmLite.OrmLiteConnectionFactoryExtensions.Run[T](IDbConnectionFactory connectionFactory, Func`2 runDbCommandsFn) in C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteConnectionFactory.cs:ServiceStack.ServiceInterface.Auth.OrmLiteAuthRepository.CreateUserAuth(UserAuth newUser, String password) 在 ServiceStack.ServiceInterface 的第 171 行.Auth.RegistrationService.OnPost（注册请求）在ServiceStack.ServiceInterface.RestServiceBase`1.Post（TRequest请求）ClientConnectionId：55977ae9-775d-474f-a543-d4cdfeb66a0d}

我正在使用以下代码进行设置：

```
private void ConfigureAuth(Funq.Container container)
{
   ...
   //Create a DB Factory configured to access the UserAuth SQL Server DB
   var connStr = appSettings.Get("SQLSERVER_CONNECTION_STRING", //AppHarbor or Local connection string
   ConfigUtils.GetConnectionString("UserAuth"));
   container.Register<IDbConnectionFactory>(
                new AuthDBConnectionFactory(connStr, //ConnectionString in Web.Config
                SqlServerOrmLiteDialectProvider.Instance)
                {
                    ConnectionFilter = x => new ProfiledDbConnection(x, Profiler.Current)
                });

        //Store User Data into the referenced SqlServer database
    container.Register<IUserAuthRepository>(c =>
            new OrmLiteAuthRepository(c.Resolve<IDbConnectionFactory>())); //Use OrmLite DB Connection to persist the UserAuth and AuthProvider info

     var authRepo = (OrmLiteAuthRepository)container.Resolve<IUserAuthRepository>();
...
} 
```

不久之后，我建立了一个与 Oracle 服务器上的空缺数据库的连接：

```
private void ConfigureVacancies(Funq.Container container)
{
...
var connStr = appSettings.Get ("VACANCIES_CONNECTION_STRING", //AppHarbor or Local connection string
            ConfigUtils.GetConnectionString("VacanciesDB"));

var dbFactory = (OrmLiteConnectionFactory)container.Resolve<IDbConnectionFactory>();

dbFactory.RegisterConnection("vacancies",  connStr, ServiceStack.OrmLite.Oracle.OracleDialect.Provider);
...
} 
```

与 vacancies 数据库的连接工作正常，但是当我尝试在 auth 数据库上注册用户时，出现上述错误。在我看来，它正在坚持甲骨文方言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:19:39.467

我发现在连接工厂中使用了 autodispose 连接来设置 setGlobalConnection 变量：

```
public void RegisterConnection(string connectionKey, string connectionString, IOrmLiteDialectProvider dialectProvider, bool autoDisposeConnection = true)
{
        NamedConnections[connectionKey] = new OrmLiteConnectionFactory(connectionString, autoDisposeConnection, dialectProvider, autoDisposeConnection);
} 
```

这是故意的吗？我修改了我的代码，将 autoDisposeConnection 设置为 False，这解决了我的方言问题并允许服务堆栈查询 Oracle 和 MS SQL。我还没有完全弄清楚将 autoDisposeConnection 设置为 false 的后果是什么。我所有的测试现在都通过了！

# android - 由应用程序组成的 Android 应用程序 (android-maven)

> ID：13712438
> 
> 赞同：1
> 
> 时间：2012-12-04T21:40:46.753
> 
> 标签：android, maven

在开始一个新的 android 项目之前，我想了解一些信息。我读过 android-maven 插件运行良好且流畅......这是真的吗？更重要的是，它的可能性是什么？我有一些想法。

假设我想要一个模块化应用程序。因此，我想要一个由应用程序组成的应用程序（它们都是 android-maven）。想象一下，我有一个用于登录某个服务器的应用程序，一个连接到服务 1 以获取一些信息的应用程序，以及另一个从另一个服务获取信息的应用程序 2。

我可以创建三个单独的应用程序（登录、service1 和 service2），然后将它们用作容器 maven 应用程序的依赖项吗？

值得吗？

谢谢！E.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:21:10.053

Maven 是很棒的项目管理和构建工具，可用于构建带有适当插件的 android 应用程序（maven-android-plugin IIRE 提供 apk 打包）

但是您不是从另一个 apk 构建 PAK，而是普通的 java jars - zou 可以从 jars 的 wast maven 存储库中获取任何你喜欢的东西，但必须记住，并非每个 java jar 或框架都是有用的、有意义的，或者将在 android 上运行.

android 上没有“容器应用程序”之类的东西 - 但您可以定义对其他应用程序和 android 库项目的依赖关系。应用程序可以（并且应该）通过意图和导出的服务进行通信。

# mysql - MySQL 在给定年份的单位/订单分布

> ID：13712446
> 
> 赞同：1
> 
> 时间：2012-12-04T21:41:15.077
> 
> 标签：mysql

我正在寻找一个 MySQL 查询（子查询很好），它将以以下格式获得过去一年中每个订单的单位分布：

```
units_per_order | number_of_orders | percent_of_total
-------------------------------------------------- ------------------
1 | 7500 | 55%
2
3
4
5
6-10
10-20
30-50
50–100
100+

```

***编辑：***

要查询的表和必要的列：

```
表：订单
字段：orders_id、date_purchased

表：orders_products
字段：orders_id、products_quantity

```

这就是我现在所拥有的：

```
选择计数（*）作为数量，数量来自（
        选择 SUM(products_quantity) 作为数量，orders_id
        FROM orders_products op LEFT JOIN orders o USING (orders_id)
        WHERE date_purchased LIKE '2012%'
        GROUP BY orders_id
    ) AS new_table WHERE qty != 0 GROUP BY qty ORDER BY qty

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:05:55.257

好的，这就是我的结果。如果您发现任何提高效率的方法，请告知。

```
SELECT qty, cnt, ROUND(((cnt / total) * 100)) AS percent FROM (
    SELECT qty, COUNT(*) AS cnt, total
    FROM (
        SELECT
            (
                CASE WHEN (SUM(products_quantity) < 6) THEN SUM(products_quantity)
                    WHEN (SUM(products_quantity) BETWEEN 6 AND 10) THEN 6
                    WHEN (SUM(products_quantity) BETWEEN 11 AND 20) THEN 11
                    WHEN (SUM(products_quantity) BETWEEN 21 AND 50) THEN 21
                    WHEN (SUM(products_quantity) BETWEEN 51 AND 100) THEN 51
                    ELSE 101
                END
            ) AS qty,
            orders_id,
            (
                SELECT COUNT(DISTINCT(orders_id))
                FROM orders JOIN orders_products USING (orders_id)
                WHERE date_purchased LIKE '2012%' AND products_quantity != 0
            ) AS total
        FROM orders_products op JOIN orders o USING (orders_id)
        WHERE date_purchased LIKE '2012%'
        GROUP BY orders_id
    ) AS new_table
    WHERE qty != 0 GROUP BY qty
) AS newer_table 
```

# jquery - 根据传入的值选择选项

> ID：13712447
> 
> 赞同：0
> 
> 时间：2012-12-04T21:41:18.917
> 
> 标签：jquery

当我单击一个按钮时，我正在尝试选择某个选项的下拉菜单

我有

html

```
 <select id='selectmenu'>
    <option>
    1
    </option>
    <option>
    2
    </option>
    <option>
    3
    </option>   

    </select>

    <a id='click'>click</a> 
```

jQuery

```
 $('#click').click(function(){

      var option=3;
      //I want the select dropdown menu to select option 3 when I click the button. 
      //$('#selectmenu').select()  //I think it will be something like this....

    }) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:42:36.440

```
$('#selectmenu').val(3); //p00f! 
```

# ruby - 黄瓜 在后台？

> ID：13712449
> 
> 赞同：2
> 
> 时间：2012-12-04T21:41:36.307
> 
> 标签：ruby, cucumber

这是一个关于 Cucumber 的棘手问题：

```
Feature: Some feature

Background:
    Given I am on the root page

Scenario Outline: Relevant flash messages should appear
    When I fill in some_field with: <name>
    Then I should see the text: <relevant_flash>

    Examples:
        | name          | relevant_flash    |
        | Some name     | Some message      |

Scenario Outline: Irrelevant flash messages should not appear
    When I fill in some_field with: <name>
    Then I should not see the text: <irrelevant_flash>

    Examples:
        | name          | irrelevant_flash  |
        | Some name     | Some message      | 
```

我讨厌不得不重复：

```
 When I fill in some_field with: <name> 
```

但由于显而易见的原因，它不能仅仅移动到背景中。或者可以吗？如果您有解决方法，请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:14:00.097

好吧，我可以用这样的东西来简化你的黄瓜：

```
Feature: Some feature

 Scenario Outline: Relevant flash messages should appear
    Given I am on the root page
    When I fill in some_field with: <name>
    Then I should see <message>
  Examples:
        |        name           |        message        |
        | Some name             | Relevant message      |
        | Some other name       | Irrelevant message    |
        | Some another name     | another flash message | 
```

你注意到我把它拿出来了，`Background:`因为我们把它盖上了`Scenario Outline:` 我认为这个步骤会运行并且很简单，没有太多的重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:27:39.640

通过将成功和失败的消息组合在一起，您的方案大纲可以更好地组织以避免重复。

```
Feature: Some feature

Background:
    Given I am on the root page

Scenario Outline: Relevant flash messages should appear
    When I fill in some_field with: <name>
    Then I should see <relevant_message>

    Examples:
        | name                  | relevant_flash     |
        | Some name             | Some message       |
        | Some irrelevant name  | Irrelevant message |
        | Name for blank msg    |                    | 
```

# python - Python 3：从 .txt 文件中提取数据？

> ID：13712452
> 
> 赞同：1
> 
> 时间：2012-12-04T21:41:50.990
> 
> 标签：python, python-3.x

所以，我有这个文件，它的数据设置如下：

```
Bob 5 60
Carl 7 80
Rick 8 100
Santiago 7 30 
```

我需要将每个部分分成三个不同的列表。一个用于名称，一个用于第一个数字，一个用于第二个数字。

但我真的不明白，我究竟是如何提取这些部分的？另外，假设我想用第一行创建一个元组，将每个不同的部分（名称、第一个数字和第二个数字）组成一个元组？

我只是不明白我是如何提取这些信息的。我刚刚学会了如何读写文本文件......所以我很无能为力。

编辑：作为说明，文本文件已经存在。我正在处理的程序需要读取文本文件，它的数据按照我列出的方式格式化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:49:32.813

您可以在空白处拆分每一行：

```
with open(yourfile) as f:
    rows = [l.split() for l in f]

names, firstnums, secondnums = zip(*rows) 
```

`zip(*iterable)`将 3 列重新排列为 3 个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:02:42.470

模块 Pickle 在这里不是很理想吗？Pickle 为 Python 提供了加载和保存需要在 Python 中“可用”的内容的功能，因此，pickle 可以加载它并为您提供您正在尝试的实际容器，而不是仅仅从文本文件中导入字符串并解析它跟...共事。

例子：

```
import pickle

myList = ["Bob", 1, 2]
listToBeSaved = pickle.dumps(myList) # write this data to your save file
#insert code where you work with the file and save it
#.........    
#upon needing to open and work with this file
listToBeLoaded = open(fileYouWroteTo)
listTranslated = pickle.loads(listToBeLoaded) # turns the loaded data back into a proper list 
```

# android - Android Gmail 4.2.1 是否破坏了 html 意图？

> ID：13712454
> 
> 赞同：4
> 
> 时间：2012-12-04T21:41:59.583
> 
> 标签：android, html, android-intent, gmail

我一直在使用 Intents 从其他应用程序使用 Android 上的 Gmail 发送 HTML 格式的电子邮件。今天他们停止了工作。它们在 Gmail 撰写显示中看起来不错，但当 Gmail 发送电子邮件时，所有 HTML 标记都会被删除。

我已经尝试了所有我看到的 Intent 格式的变体，并且所有的 HTML 都被剥离了。结果始终是带有纯文本和包含纯文本的 HTML 化版本的 HTML 部分的多部分/替代。

还有人看到这个吗？

任何解决方法的想法？

# ios - 如果应用程序处于后台模式，则为推送通知调用什么委托

> ID：13712456
> 
> 赞同：1
> 
> 时间：2012-12-04T21:42:09.703
> 
> 标签：ios, apple-push-notifications

我阅读了关于 SO 和 Apple 文档的近十几个问题，但仍然不清楚一个案例（主要是因为每个人都使用了一些不同的术语）。

我感兴趣的案例是：

a) 应用程序在后台运行（例如 VOIP）。我指的是[这里定义的背景状态](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

b) 应用程序已注册远程通知。

c) 提供商发送推送通知。iOS 设备会收到此通知。

接下来会发生什么？

1) iOS 将根据 UI（警报、徽章）显示，并且在用户单击警报上的 VIEW 按钮或点击 Springboard 上的应用程序图标之前，不会调用任何委托。

我的理解是假设会发生这种情况。

或者

2) didReceiveRemoteNotification 委托将立即被调用

如果您能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:50:40.470

在您通过点击通知进入应用程序之前，不会调用任何代理。那么这是回调的顺序：

```
1) applicationWillEnterForeground
2) didReceiveRemoteNotification
2) applicationDidBecomeActive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:37:59.160

```
-(void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo; 
```

将被调用。

# cakephp - CakePHP 2.2 验证 trim() 错误

> ID：13712460
> 
> 赞同：1
> 
> 时间：2012-12-04T21:42:20.810
> 
> 标签：cakephp, trim, cakephp-2.2

这很奇怪，我在注册表单中有一个文本输入，当我在模型中设置 $validate 数组时，我得到一个 trim() 错误 - 警告 (2): trim() 期望参数 1 是字符串，给定数组 [CORE\Cake\View\Helper.php，第 754 行]

表单输入

```
<?=$this->Form->input("lastname", array("label" => array("text" => "Last name *"), "class" => "required", "div" => array("class" => array("input text last")))); ?> 
```

模型验证数组

```
public $validate = array(
        'lastname' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Last name is required'
            )
        )
    ); 
```

似乎当我为该字段执行验证规则时，div 样式数组 - "div" => array("class" => array("input text last")) 导致错误。我将以下代码添加到 Helper.php 文件作为解决方法：

```
if(is_array($options["class"])) {
            $options["class"] = $options["class"][0];
        } 
```

但我想知道它为什么会导致这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:52:41.860

表单助手的嵌套数组太多。尝试这个：

```
$this->Form->input("lastname", array(
    "label" => "Last name", 
    "id" => "MyInputDiv",
    "class" => "input text last required")); 
```

`array("text" => "Last name *")`如果您只是设置标签的文本值，则此处不需要数组。数组是为 html 属性保留的。

`"div" => array("class" => array("input text last"))`不熟悉这个formHelper。也许您正在寻找`before`和`after`属性来设置元素的包装[div](http://api13.cakephp.org/class/form-helper%20here)。

# powershell - “使用“2”个参数调用“DownloadFile”的异常：“WebClient 请求期间发生异常。”

> ID：13712462
> 
> 赞同：27
> 
> 时间：2012-12-04T21:42:32.447
> 
> 标签：powershell

我正在尝试设置下载需要的文件来自动化和安装过程。我每次运行脚本时都会遇到错误，并且从周日开始我已经更改了七种方式，但它仍然给我错误。

脚本是：

```
 if (test-path $java_path)

   {
   Write-Output "Java already installed. Skipping script"
   exit 0
    }

  else 

    {
      $source = "http://our.server.com/java-installer.zip"
      $destination = "c:\CHPACS"
      $client = new-object System.Net.WebClient
      $client.DownloadFile($source, $destination)

      } 
```

我收到的错误消息是

```
 Exception calling "DownloadFile" with "2" argument(s): "An exception occurred during a WebClient request."
 At C:\ps_script\testjava.ps1:41 char:31
 +           $client.DownloadFile <<<< ($source, $destination)
 + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException
 + FullyQualifiedErrorId : DotNetMethodException 
```

我是否需要创建一个函数才能使其正常工作？

谢谢：

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-04T23:03:39.310

如果您查看该`DownloadFile`方法的 MSDN 文档，您会注意到第二个参数是*文件名*，而不是目录。因此，如果您重新定义`$destination`为：

```
$destination = "c:\CHPACS\java-installer.zip" 
```

那么它应该可以工作。

其次检查您尝试下载的文件是否未打开或当前未执行。如果文件正在使用中，将引发此异常。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-16T16:27:20.450

你应该像大卫所说的那样给出一个文件名+该文件夹应该存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-21T14:45:54.283

在我的情况下，我试图执行脚本的机器上无法访问 URL。必须启用代理规则以将其范围限定为机器以下载文件。

# java - 如何运行 Junit 来测试不包含测试的 jar？

> ID：13712468
> 
> 赞同：0
> 
> 时间：2012-12-04T21:42:49.327
> 
> 标签：java, junit

我们正在将 RPM 安装到新系统，并希望运行与源代码相关的所有 Junit 测试，以验证 toe 代码在新系统上工作；新系统上没有缺少库等。问题是 RPM 以及它“安装”的 jar 不会将 Junit 测试编译到其中。我们可以单独访问原始资源，因此也可以访问 RPM；但是我们想测试 RPM，因为它最终会被发布（即没有单元测试的那个）。

我想做的是使用包含所有主要代码的 jar 文件安装 RPM。然后构建仅包含 Junit 测试的第二个 jar，然后运行传入主代码 jar 和 Junit jar 的 jobRunner 类；因此，理想情况下，Junit 测试将针对我们的 RPM 提供的 jar 运行。我不确定如何做到这一点。谁能告诉我从源代码创建“just junit”jar 文件的过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:58:54.853

您可以像创建任何其他 jar 一样创建它。您编译代码并将其压缩到 jar 中。确保它只包含测试文件而不包含实现。然后，您需要将测试 jar 和 JUnit jar（实际的 JUnit 框架）复制到目标机器上。最后，使用包含 JUnit jar、测试 jar、应用程序 jar 以及测试或应用程序需要运行的任何其他 jar 的类路径从命令行运行 JUnit 测试。

# maven - 配置 Maven 以支持创建 .exe 安装程序

> ID：13712469
> 
> 赞同：1
> 
> 时间：2012-12-04T21:42:53.097
> 
> 标签：maven, installation, installshield

我目前正在使用 Maven 3 并且有一个非常简单的**InstallShield 2012**`.ism`文件。

 **我`pom.xml`创建了一个`.jar`文件，该文件是`.ism`. 我可以做这样的事情：

```
C:>IsCmdBld.exe -p "c:\InstallShield Projects\Simple.ism" -r "COMP" -y "1.0" 
```

这在我的 POM 之外，但我想在安装程序创建中使用 POM 中的版本信息和其他元数据。

我知道 Maven 不存在特定的 InstallShield 插件，但我想知道是否有办法让 Maven 通过调用上面的命令块或类似的东西来提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:51:07.797

您可以使用[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/)并传入 ${project.version} 作为执行调用的一部分。

否则，如果 InstallShield 有 anttask，您可以将其与[antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T15:56:37.647

虽然过去有人问过这个问题，而且我已经有一年没有访问 InstallShield，但我确实碰巧在 Maven 插件上工作，以介绍您想要实现的目标。

[https://github.com/tptak/installshield-maven-plugin](https://github.com/tptak/installshield-maven-plugin)

如果我有执照，我可以在某种程度上继续做这件事**

# python - Python：未定义getsize

> ID：13712470
> 
> 赞同：0
> 
> 时间：2012-12-04T21:42:54.460
> 
> 标签：python, python-3.x

我正在尝试根据文件大小对文件进行排序并将日志存储在文件中。但是我收到一个错误，上面写着“getsize”未定义。请帮我解决这个问题。

```
from ClientConfig import ClientConfig
import os
import os.path

class VerifyFileNSize:
    def __init__(self):
        self.config = ClientConfig()
        self.parseInfo()

    def parseInfo(self):
        count = 0
        size = 0
        sort_file = []
        originalPath = os.getcwd()
        os.chdir(self.config.Root_Directory_Path())    
        log = open(self.config.File_Count(),'wb')        
        for root, dirs, files in os.walk("."):            
            for f in files:
                sort_file.append(os.path.join(root, f))

        sorted_file = sorted(sort_file, key=getsize)

        for f in sorted_file:
            log.write((str(os.path.getsize(f)) + " Bytes" + "|" + f  +         os.linesep).encode())                
            size += os.path.getsize(f)
            count += 1
        totalPrint = ("Client: Root:" + self.config.Root_Directory_Path() + " Total     Files:" + str(count) + " Total Size in Bytes:" + str(size) + " Total Size in     MB:" + str(round(size /1024/1024, 2))).encode()
        print(totalPrint.decode())
        log.write(totalPrint)
        log.close()
        os.chdir(originalPath)

if __name__ == "__main__":
    VerifyFileNSize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:52:53.187

如果由于某种原因这些答案都不起作用，那么总会有：

```
sorted_file = sorted(sort_file, key=lambda x: os.path.getsize(x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:44:25.113

尝试前置`os.path`：

```
sorted_file = sorted(sort_file, key=os.path.getsize)
                                    ^^^^^^^^ 
```

或者，您可以只说`from os.path import getsize`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:44:27.147

`getsize`未在`sorted`被调用的名称空间中定义。它是你导入的 module 中的一个函数`os.path`，所以你可以这样引用它：

```
sorted_file = sorted(sort_file, key=os.path.getsize) 
```

另一种可能性是：

```
from os.path import join, getsize 
```

甚至：

```
from os.path import * 
```

这将允许您执行以下操作：

```
sorted_file = sorted(sort_file, key=getsize) 
```

但实际上并不推荐最后一个选项，您应该尝试仅导入您真正需要的名称。

# php - Magento 向客户添加可用的可下载产品

> ID：13712475
> 
> 赞同：1
> 
> 时间：2012-12-04T21:43:40.107
> 
> 标签：php, magento, magento-1.4

**背景**

我正在开发的网站销售具有与之相关的可下载产品（书籍）的网络广播。用户可以购买该书，也可以购买网络直播并免费获得该书。

书籍本身就是手册，每当对最近购买（1 年+1 个月）的书籍用户进行更新时，都需要收到更新通知，以便他们重新下载该书籍。这是有效的。

**问题**

可下载产品的更新方式是添加新链接。基本文件本身永远不会改变，而是添加了新文件，其中包括人们整理书籍如何组装的说明（这是因为他们是一家绿色公司，他们不希望人们每次都完全打印出这 1000 页的手册他们添加了一个页面）。如果进行了新修订并通知用户，他们将没有下载更改的链接，因为他们最初下订单时不存在该链接。他们看到的只是他们最初下订单时存在的文件的链接，因为那是`downloadable_link_purchased_item`表中存在的文件。

我需要的是一种允许客户下载可下载产品的所有修订版（请阅读：所有可用链接）的方法，因为他们已经购买了该产品。

我试过`$productModel->getLinks()`and `$productModel->getDownloadableLinks()`，但都返回 null：

```
$purchased = Mage::getResourceModel('downloadable/link_purchased_collection')
    ->addFieldToFilter('customer_id', $session->getCustomerId())
    ->addOrder('created_at', 'desc');

if(count($purchased)) {
    $this->setPurchased($purchased);
    $purchasedIds = array();
    foreach ($purchased as $_item) {
        $purchasedIds[] = $_item->getId();
        $order = Mage::getModel('sales/order')->load($_item->getOrderId());

        $items = $order->getAllItems();
        foreach($items as $item) {
            if('downloadable' == $item->getProductType()) {

                $product = Mage::getModel('catalog/product')->load($item->getProductId());

                echo('Links: <pre>');
                var_dump($product->getLinks());
                echo('</pre>');
                die;
            }
        }
    }
} 
```

我还认为，`downloadable_link_purchased_item`每当进行更新时，也许我可以为每个购买了更新书的客户在表中添加一个新条目，并为每个条目生成一个新的链接哈希。但是，我不认为这真的是一个好主意（他们当时并没有真正购买它，我必须生成我自己的 link_hash，我真的觉得这样做不太舒服，我真的会就像在不弄乱数据的情况下*让*他们访问）。

我已经被困了半天，试图弄清楚如何解决这个问题，并且非常感谢任何帮助或指向/推动正确/不那么错误的方向。我对可下载产品或它们的 URL 的工作方式没有太多经验。提前致谢。

**更新**

`downloadable_link_purchased_item`我尝试在通过管理员更新产品时触发的观察者中使用以下代码将链接插入表中：

```
$product = $observer->getProduct();
echo('<pre>');
if('downloadable' == $product->getTypeId()) {
    foreach($_POST['downloadable']['link'] as $link) {
        if('0' == $link['link_id']) {
            // This is a new file being added.  Insert a record into 
            // downloadable_link_purchased_item for each customer 
            // that has purchased this item.
            $file = json_decode($link['file']);
            $orderItems = Mage::getModel('sales/order_item')->getCollection()
                ->addFieldToFilter('product_id', $product->getId());
            foreach($orderItems as $orderItem) {

                $order = Mage::getModel('sales/order')->getCollection()
                    ->addFieldToFilter('entity_id', $orderItem->getOrderId())
                    ->getFirstItem();

                $downloadPurchase = Mage::getModel('downloadable/link_purchased')
                    ->setOrderId($orderItem->getOrderId())
                    ->setOrderIncrementId($order->getIncrementId())
                    ->setOrderItemId($orderItem->getId())
                    ->setCreatedAt(date('Y-m-d H:i:s'))
                    ->setUpdatedAt(date('Y-m-d H:i:s'))
                    ->setCustomerId($order->getCustomerId())
                    ->setProductName($product->getName())
                    ->setProductSku($product->getSku())
                    ->setLinkSectionTitle('Click here to download');

                var_dump($downloadPurchase->save());

                // I got this line from /app/code/core/Mage/Downloadable/sql/downloadable_setup/mysql4-upgrade-0.1.12-0.1.13.php
                $linkHash = strtr(base64_encode(microtime() . $downloadPurchase->getId() . $orderItem->getId() . $product->getId()), '+/=', '-_,');
                $downloadItem = Mage::getModel('downloadable/link_purchased_item')
                    ->setProductId($product->getId())
                    ->setNumberOfDownloadsBought(0)
                    ->setNumberOfDownloadsUsed(0)
                    ->setLinkTitle($link['title'])
                    ->setIsShareable($link['is_shareable'])
                    ->setLinkFile($file[0]->file)
                    ->setLinkType('file')
                    ->setStatus('available')
                    ->setCreatedAt(date('Y-m-d H:i:s'))
                    ->setUpdatedAt(date('Y-m-d H:i:s'))
                    ->setLinkHash($linkHash)
                    ->setOrderItemId($orderItem->getId())
                    ->setPurchasedId($downloadPurchase->getId());

                var_dump($downloadItem->save());

                echo('Download Purchase ID: ' . $downloadPurchase->getId() . '<br>');
                echo('Download Item ID: ' . $downloadItem->getId() . '<br>');

            }

        }
    }
}
echo('</pre>');
die; 
```

现在的问题是它的行为就像是将模型保存在数据库中（我得到了一个 ID 以及两个模型的所有内容），但*实际上*都没有保存。我很确定`$downloadItem`可能无法保存的原因是因为我没有指定链接 id（即使我正在使用该`catalog_product_save_after`链接在观察者中不存在的事件，仍然试图找出那个也是）。但是，我不知道为什么`$downloadPurchase`模型不会保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:22:23.793

原来我的`die`声明阻止了模型数据的保存。当我把它拿出来时，可下载产品的链接已正确放入，购买了可下载产品的客户可以立即从他们的帐户屏幕上看到新版本。

I'm not sure why that would be the case, I would think that the moment I call `save()` would be when the database insertion would happen, but apparently that's not how the Lords of Magento view the world.

I still have some issues as far as data integrity is concerned. Like I said above, the `download_link` entry is not created at the moment my observer is being called, but at least users can now see the links in their account.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T07:24:44.727

Here is great free open source solution for update downloadable products version, it should be good base to customise and add extra links also - [https://github.com/ProxiBlue/UpdateDownloadLinks](https://github.com/ProxiBlue/UpdateDownloadLinks)

# android - 更改内容时，警报对话框会调整大小

> ID：13712478
> 
> 赞同：0
> 
> 时间：2012-12-04T21:44:12.040
> 
> 标签：android, dialog, resize, height, alert

I have this `AlertDialog`with and dynamic list in it(when a item from the list is selected the content of the list changes also). 问题是初始对话框的高度与其父级匹配，但是当内容更改并且大小小得多时，对话框会包裹内容。我怎样才能避免这种情况？

```
public ExplorerDialog(Context context, final SettingsDialog settingsDialog, int fileType) {  
    super(context); 

    setIcon(R.drawable.dialog_explorer_file_manager); 
    setTitle("Explorer Dialog"); 
    setView(LayoutInflater.from(context).inflate(R.layout.dialog_explorer_layout, null)); 
    setButton(BUTTON_POSITIVE, "Done", new OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            settingsDialog.show(); 
        } 
    }); 

    setButton(BUTTON_NEGATIVE, "Cancel", new OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            settingsDialog.show(); 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:21:38.157

您可能已将警报对话框的视图设置为列表，这是获得所需内容的快速方法：

```
 d.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, 600) 
```

其中 d 是创建的对话框，这允许您设置宽度和高度的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:39:56.293

您的 cusyom 对话框布局：

```
LinearLayout dialoglayout = (LinearLayout) dialog.findViewById(R.id.dialoglayout);

dialoglayout.setLayoutParams(new FrameLayout.LayoutParams(700,1100)); 
```

或者

如果你想要屏幕尺寸的宽度：

```
dialoglayout.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,1100)); 
```

# php - 将 XMLHTTP 请求与字符串进行比较？设置回调

> ID：13712485
> 
> 赞同：1
> 
> 时间：2012-12-04T21:44:32.473
> 
> 标签：php, javascript, ajax

我是一个很长一段时间的潜伏者，这是我的第一篇文章，所以对我来说放轻松......

所以我对 Javascript 还很陌生，我最终会使用 jQuery，但现在我坚持使用常规的 Javascript。

我已经用 PHP 创建了一个网站，现在我正在尝试设置一些客户端验证。

因此，在对这些论坛进行了一些研究之后，我发现获取 responseText 并不容易，因为它是异步的。所以我研究了回调，但我在设置它们时遇到了很多麻烦。我已经设法设置它，但它不断返回整个 html 页面，而不仅仅是回显的字符串。

```
function checkName(usernameString, callback) {

//
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET","checkName.php?q="+usernameString,true);
xmlhttp.onreadystatechange=function()
{

    if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
//document.getElementById("uMess").innerHTML=xmlhttp.responseText;

    callback(xmlhttp.responseText);

   }
}
//xmlhttp.open("GET","checkName.php?q="+usernameString,true);
xmlhttp.send();

} 

function validateUsername(usernameString) {
 var valid = true;
checkName(usernameString,function(err,response){
if (err) {
    alert('Error: ' + err);

} else {
    alert('Response: ' + response);
} 
});
..... 
```

有人介意指出我要去哪里灾难性的错误吗？在此先感谢各位:)

另外这里是检查用户名是否被使用的PHP文件

```
<?php
    include_once 'header.php';

    $userName = $_GET['q'];

    if ( strlen($userName) < 6 ){

   $response = "Too Short!";
   echo $response;
    }

    else{
    $query = "SELECT user FROM temporaryusers WHERE user='$userName'";
   $result = mysql_query($query);
   if(mysql_num_rows($result))
   {
    $response="Taken";
     echo $response;
   }
   else{
   $response="Available";
   echo $response;
   }
   }
   ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:52:14.350

你打电话给你的回调：

```
callback(xmlhttp.responseText);
         ^^^^^^^^^^^^^^^^^^^^--- one parameter 
```

但函数定义为

```
checkName(usernameString,function(err,response){
                                  ^^^^^^^^^^^--- two params 
```

所以你的 responsetext 实际上是进入`err`变量。您只是从 PHP 脚本传回一个字符串，所以`err`总是要设置为真。

# node.js - 电话间隙 SQLite 3

> ID：13712488
> 
> 赞同：0
> 
> 时间：2012-12-04T21:44:59.533
> 
> 标签：node.js, cordova, angularjs, appjs

我需要一种在没有 Phonegap 配额的情况下使用 SQLite 3 的方法。我查看了几个插件，但它们缺乏良好的文档，并且没有一个说它们可以与 Phonegap 2.0 一起使用（大多数插件都在吹捧 1.5+）。

此外，我不想设置配额。如果需要，我需要能够在应用程序中存储大量信息。有谁知道像Phonegap这样的好框架？一切都需要 100% HTML/CSS/JS。

现在我们的产品在服务器和我们的 AppJS 部署（桌面上的本地）上运行带有 node.js 后端的 AngularJS 前端。我们需要一个等效的移动设备，但恐怕Phonegap可能是一个错误。数据库访问确实是难题中最重要的部分，不仅仅是代码重用和可移植性。我们希望能够在每个平台上移植相同的前端，而无需编写任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:43:34.380

据我所知，目前没有任何东西符合您存储“信息量”的要求。这是因为浏览器被限制为 5-10mb 的信息（参见[http://www.w3.org/TR/webstorage/#disk-space](http://www.w3.org/TR/webstorage/#disk-space)），这就是 PhoneGap 的意义所在。

要解决这个问题，您必须为每个设备编写一个插件。虽然它们将共享相同的接口，但底层代码会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:16:09.453

一两年前有一个解决方案，当安装电话间隙应用程序时，包括一个 50 兆的 sqlite 数据库（可以是虚拟数据），你可能会侥幸逃脱，但文件应该大于配额。通过在安装期间打破配额，即使您随后删除了原始数据并低于配额，也可以写入尽可能多的数据。不知何故，这会阻止 os 应用配额。我知道这之前有效，但尚未在最新的 android 版本上进行测试。

# html - 使用 z-index 定位 DIV

> ID：13712494
> 
> 赞同：1
> 
> 时间：2012-12-04T21:45:34.400
> 
> 标签：html, css, z-index

我目前正在尝试使用 z-index 以特定顺序定位一些 DIV，但它们似乎并没有让我在 jsfiddle 中设置它，以便您查看是否可以看到任何问题。

这是我希望它从后到前的顺序：

红色 绿色 蓝色 黄色

[http://jsfiddle.net/BUWaZ/4/](http://jsfiddle.net/BUWaZ/4/)

**HTML**

```
<div id="green">

   <div id="yellow">
   </div>

   <div id="red">
   </div>

</div>

<div id="blue">
</div> 
```

**CSS**

```
#green{
   background-color:green;
   height:100px;
   width:100%;
   position:fixed;
   top:0;
}

#red {
   margin:-85px auto 0;
   width:406px;
   height:60px;
   background-color:red;
z-index:-99999;   
}

#blue{
   margin:350px auto 0;
   width:60px;
   height:465px;
   z-index:99999;
   background-color:blue;
}

#yellow {
   margin:0px auto 0;
   width:170px;
   height:170px;
   background-color:yellow;
   z-index:99999;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:57:29.067

您必须设置一个位置才能使 z-index 起作用。添加相对于没有它的位置的位置。蓝色和黄色的 z-index 也不相同，否则它不知道该选择哪一个。

[http://jsfiddle.net/SzxT2/1/](http://jsfiddle.net/SzxT2/1/)

```
#green{
    background-color:green;
    height:100px;
    width:100%;
    position:fixed;
    top:0;
}

#red {
    margin:-85px auto 0;
    width:406px;
    height:60px;
    background-color:red;
z-index:-99999;    
    position:relative;
}

#blue{
    margin:350px auto 0;
    width:60px;
    height:465px;
    z-index:99998;
    background-color:blue;
    position:relative;
}

#yellow {
    margin:0px auto 0;
    width:170px;
    height:170px;
    background-color:yellow;
    z-index:99999;   
    position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:29:02.497

除了必须为 z-index'ed 元素定义位置之外，您不能为子元素定义 z-index，这会将他置于其父元素之后。（[另见](https://stackoverflow.com/questions/2503705/html-get-a-child-element-to-show-behind-lower-z-index-than-its-parent)）

看看以下内容是否适合您： [jsfiddle.net/BUWaZ/7/](http://jsfiddle.net/BUWaZ/7/)

HTML

```
<div id="green">
</div>

<div id="yellow_placer">
    <div id="yellow">
    </div>
</div>

<div id="red_placer">
    <div id="red">
    </div>
</div>

<div id="blue">
</div>​ 
```

CSS

```
#red {
   margin:0 auto 0;
   width:406px;
   height:60px;
   background-color:red;
   position:relative;
   z-index:100;   
}
#red_placer {
   width:100%;
   position:fixed;
   top:85px;
   z-index:100; 
}

#green{
   background-color:green;
   height:100px;
   width:100%;
   top:0;
   position:fixed;
   z-index:200; 
}

#blue{
   margin:30px auto 0;
   width:60px;
   height:465px;
   background-color:blue;
   position:relative;
   z-index:300;
}

#yellow {
   margin:0px auto 0;
   width:170px;
   height:170px;
   background-color:yellow;
   position:relative;
   z-index:400;   
}
#yellow_placer {
   width:100%;
   position:fixed;
   top:0;
   z-index:400; 
}​ 
```

# sql - 为什么我的分解后的 SQL 运行速度要快几个数量级？

> ID：13712495
> 
> 赞同：5
> 
> 时间：2012-12-04T21:45:35.670
> 
> 标签：sql, sql-server, tsql

也就是说，为什么会这样：

```
select *
    from tableA
        /* Bunch of inner joins */
    where 
        /* Bunch of clauses */
    and (
        exists (
            select * 
                from tableB, tableC, tableD
                where (tableB.fieldNameA = 'foo') and
                   /* More clauses */
        ) or 
        exists (
            select * 
                from tableB, tableC, tableD
                where (tableB.fieldNameA = 'bar') and
                    /* More clauses */
        )
    ) 
```

运行速度比这快近 500 倍？

```
select *
    from tableA
        /* Bunch of inner joins */
    where
        /* Bunch of clauses */
    and exists (
        select * 
            from tableB, tableC, tableD
            where (tableB.fieldNameA = 'foo' or tableB.fieldNameA = 'bar') and
                /* More clauses */
    ) 
```

我喜欢不重复代码的想法，所以想整合到第二个版本。它们都产生相同的结果集，但第一个运行得快得多，我不能不*使用*它。想法？

* * *

我一直在检查查询计划，但并没有*真正*了解它。我确实注意到的一件事是，对于分解后的示例，聚集索引搜索`[tree].[PK__tree__09746778]`的实际行数接近 93,000。另一个例子没有接近这么高的行数。这是文本输出——不太确定这有多大用处。

第一个示例（已分解）产生：

```
|--Nested Loops(Left Semi Join, OUTER REFERENCES:([initialCategory].[inode]))
   |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[tree].[child]))
   |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[course].[inode])=([OPUSDev2].[dbo].[tree].[parent]), RESIDUAL:([OPUSDev2].[dbo].[course].[inode]=[OPUSDev2].[dbo].[tree].[parent]))
   |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[section].[inode], [Expr1037]) WITH UNORDERED PREFETCH)
   |    |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[course_term].[inode], [Expr1036]) WITH UNORDERED PREFETCH)
   |    |    |    |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[course].[course_number])=([OPUSDev2].[dbo].[course_term].[course_number]), RESIDUAL:([OPUSDev2].[dbo].[course_term].[course_number]=[OPUSDev2].[dbo].[course].[course_number]))
   |    |    |    |    |    |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[course].[PK__course__31B762FC]), WHERE:(CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[course].[show_on_web],0)=(1) AND CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[course].[show_on_nav],0)=(1)))
   |    |    |    |    |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[term].[term_id])=([OPUSDev2].[dbo].[course_term].[term_id]))
   |    |    |    |    |         |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[term].[PK__term__0697FACD]), WHERE:(CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[term].[active_on_web],0)=(1)))
   |    |    |    |    |         |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[course_term].[course_term_pk]))
   |    |    |    |    |--Index Seek(OBJECT:([OPUSDev2].[dbo].[section].[section_idx2]), SEEK:([OPUSDev2].[dbo].[section].[course_term_inode]=[OPUSDev2].[dbo].[course_term].[inode]) ORDERED FORWARD)
   |    |    |    |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[section].[PK__section__7B264821]), SEEK:([OPUSDev2].[dbo].[section].[inode]=[OPUSDev2].[dbo].[section].[inode]),  WHERE:([OPUSDev2].[dbo].[section].[status]='Active') LOOKUP ORDERED FORWARD)
   |    |    |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[tree].[PK__tree__09746778]))
   |    |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[PK__category__2739D489] AS [initialCategory]), SEEK:([initialCategory].[inode]=[OPUSDev2].[dbo].[tree].[child]),  WHERE:([OPUSDev2].[dbo].[category].[active] as [initialCategory].[active]=(1)) ORDERED FORWARD)
   |--Concatenation
        |--Nested Loops(Inner Join)
        |    |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[PK__category__2739D489] AS [childCategory]), SEEK:([childCategory].[inode]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode]) ORDERED FORWARD)
        |    |--Nested Loops(Inner Join, OUTER REFERENCES:([parentCategory].[inode]))
        |         |--Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[idx_category_2] AS [parentCategory]), SEEK:([parentCategory].[category_key]='noncredit_subjects') ORDERED FORWARD)
        |         |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[tree].[PK__tree__09746778]), SEEK:([OPUSDev2].[dbo].[tree].[child]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode] AND [OPUSDev2].[dbo].[tree].[parent]=[OPUSDev2].[dbo].[category].[inode] as [parentCategory].[inode]) ORDERED FORWARD)
        |--Nested Loops(Inner Join)
             |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[PK__category__2739D489] AS [childCategory]), SEEK:([childCategory].[inode]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode]) ORDERED FORWARD)
             |--Nested Loops(Inner Join, OUTER REFERENCES:([parentCategory].[inode]))
                  |--Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[idx_category_2] AS [parentCategory]), SEEK:([parentCategory].[category_key]='credit_subjects') ORDERED FORWARD)
                  |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[tree].[PK__tree__09746778]), SEEK:([OPUSDev2].[dbo].[tree].[child]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode] AND [OPUSDev2].[dbo].[tree].[parent]=[OPUSDev2].[dbo].[category].[inode] as [parentCategory].[inode]) ORDERED FORWARD) 
```

第二个例子（分解）产生：

```
|--Nested Loops(Left Semi Join, OUTER REFERENCES:([initialCategory].[inode]))
   |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[tree].[child]))
   |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[course].[inode])=([OPUSDev2].[dbo].[tree].[parent]), RESIDUAL:([OPUSDev2].[dbo].[course].[inode]=[OPUSDev2].[dbo].[tree].[parent]))
   |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[section].[inode], [Expr1029]) WITH UNORDERED PREFETCH)
   |    |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[course_term].[inode], [Expr1028]) WITH UNORDERED PREFETCH)
   |    |    |    |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[course].[course_number])=([OPUSDev2].[dbo].[course_term].[course_number]), RESIDUAL:([OPUSDev2].[dbo].[course_term].[course_number]=[OPUSDev2].[dbo].[course].[course_number]))
   |    |    |    |    |    |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[course].[PK__course__31B762FC]), WHERE:(CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[course].[show_on_web],0)=(1) AND CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[course].[show_on_nav],0)=(1)))
   |    |    |    |    |    |--Hash Match(Inner Join, HASH:([OPUSDev2].[dbo].[term].[term_id])=([OPUSDev2].[dbo].[course_term].[term_id]))
   |    |    |    |    |         |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[term].[PK__term__0697FACD]), WHERE:(CONVERT_IMPLICIT(tinyint,[OPUSDev2].[dbo].[term].[active_on_web],0)=(1)))
   |    |    |    |    |         |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[course_term].[course_term_pk]))
   |    |    |    |    |--Index Seek(OBJECT:([OPUSDev2].[dbo].[section].[section_idx2]), SEEK:([OPUSDev2].[dbo].[section].[course_term_inode]=[OPUSDev2].[dbo].[course_term].[inode]) ORDERED FORWARD)
   |    |    |    |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[section].[PK__section__7B264821]), SEEK:([OPUSDev2].[dbo].[section].[inode]=[OPUSDev2].[dbo].[section].[inode]),  WHERE:([OPUSDev2].[dbo].[section].[status]='Active') LOOKUP ORDERED FORWARD)
   |    |    |--Clustered Index Scan(OBJECT:([OPUSDev2].[dbo].[tree].[PK__tree__09746778]))
   |    |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[PK__category__2739D489] AS [initialCategory]), SEEK:([initialCategory].[inode]=[OPUSDev2].[dbo].[tree].[child]),  WHERE:([OPUSDev2].[dbo].[category].[active] as [initialCategory].[active]=(1)) ORDERED FORWARD)
   |--Nested Loops(Inner Join)
        |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[PK__category__2739D489] AS [childCategory]), SEEK:([childCategory].[inode]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode]) ORDERED FORWARD)
        |--Nested Loops(Inner Join, OUTER REFERENCES:([OPUSDev2].[dbo].[tree].[parent]))
             |--Clustered Index Seek(OBJECT:([OPUSDev2].[dbo].[tree].[PK__tree__09746778]), SEEK:([OPUSDev2].[dbo].[tree].[child]=[OPUSDev2].[dbo].[category].[inode] as [initialCategory].[inode]) ORDERED FORWARD)
             |--Index Seek(OBJECT:([OPUSDev2].[dbo].[category].[idx_category_2] AS [parentCategory]), SEEK:([parentCategory].[category_key]='credit_subjects' AND [parentCategory].[inode]=[OPUSDev2].[dbo].[tree].[parent] OR [parentCategory].[category_key]='noncredit_subjects' AND [parentCategory].[inode]=[OPUSDev2].[dbo].[tree].[parent]) ORDERED FORWARD) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:50:30.410

确定为什么存在速度差异的唯一方法是查看每个查询的查询计划并查看优化器的不同之处。根据经验，其他人发现将`OR`子句更改为`UNION`子句有助于优化器更好地使用索引，从而提高查询执行时间。

这篇文章很好[地](http://sqlserverplanet.com/optimization/using-union-instead-of-or)解释了影响查询计划的一些变量，包括选择性。

> 为什么 UNION 导致更多的搜索而不是扫描是因为每个操作都需要满足特定的选择性要求才能有资格进行搜索。（选择性是被过滤的特定列的唯一性）。OR 发生在单个操作中，因此当组合每列的选择性并且超过一定百分比时，扫描被认为更有效。

您似乎认为以下代码块使一切变得不同：

```
where (table.fieldNameA = 'foo' or table.fieldNameA = 'bar') 
```

> 由于默认情况下 UNION 对每个语句执行单独的操作，因此不会组合每列的选择性，从而使其执行查找的机会更大。现在由于 UNION 执行两个操作，它们需要使用上面的连接操作来匹配它们的结果集。通常，这不是一项昂贵的操作。

为什么我在`UNION`这里提到是因为您优化的 SQL 的行为与`UNION`.

```
exists (
            select * 
                from tableB, tableC, tableD
                where (table.fieldNameA = 'foo') and
                   /* More clauses */
        ) or 
        exists (
            select * 
                from tableB, tableC, tableD
                where (table.fieldNameA = 'bar') and
                    /* More clauses */
        ) 
```

您有两个单独的子查询，每个子查询都可以并行化，然后在完成时连接在一起。这些子查询中的每一个也具有更好的选择性比，鼓励使用查找而不是扫描。

您的（更新的）查询计划支持这一点。在你的第一个计划中，在底部，你有这个：

```
Concatenation
        |--Nested Loops(Inner Join)
        |    |--Clustered Index Seek
        |    |--Nested Loops
        |         |--Index Seek
        |         |--Clustered Index Seek
        |--Nested Loops(Inner Join)
             |--Clustered Index Seek
             |--Nested Loops
                  |--Index Seek
                  |--Clustered Index Seek 
```

表明`OR`条件已被分成两个可以并行化的独立作业，随着选择性的提高，索引搜索很可能表现得更好。

每当您有一个性能不佳的查询时，有必要查看查询计划以查看哪些子部分花费了很长时间，并首先尝试修复这些子部分。非常类似于您如何优化程序的性能。

查询很难通过肉眼优化，因为很多变量会影响查询计划，例如表中的行数、可用索引和某些列的选择性。

# scala - What are the guarantees for scala access qualifiers?

> ID：13712506
> 
> 赞同：8
> 
> 时间：2012-12-04T21:46:10.817
> 
> 标签：scala, scala-java-interop

I have a class with this code:

```
package shop.orders.services.email

private[services] class EmailService {...} 
```

Then in a different package, I use that class:

```
package shop.ui

import shop.orders.services.email.EmailService

class PaymentConfirmation extends WithFacesContext {

    var emailService: EmailService = null 
```

Looking at the generated bytecode, there is no sign of any access modifier, which makes sense, as Java does not support such access restrictions. So what happens if I create a library containing code like block one, and attempt to compile block two against the library - there is no chance that the compiler will fail, since the information is lost. Or is it contained in something like a manifest?

I'm using Scala 2.9.2.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T22:19:49.897

You could reference `EmailService` from Java, but not from Scala, because Scala stores the signature of the class as a `scala.reflect.ScalaSignature` annotation. The Scala compiler will fail with the following error:

> class EmailService in package email cannot be accessed in package shop.orders.services.email

# javascript - 在响应式设计中使用 Canvas 或 SVG 进行图像遮罩

> ID：13712508
> 
> 赞同：2
> 
> 时间：2012-12-04T21:46:39.423
> 
> 标签：javascript, jquery, html, canvas, svg

我试图在网站上渲染图像，就好像它们是不同的几何形状一样。例如，通常为正方形的图像可以显示为六边形、圆形、五边形、八边形等。

这是一个响应式网站，这意味着原始图像将使用 样式设置`max-width: 100%;`，并且它们的大小将取决于它们的容器元素。

我的第一个想法是创建几个透明的 PNG“叠加图像”，每个所需的几何形状在透明区域“敲出”，然后用于`z-index`将蒙版叠加在原始图像上。

有没有更好的方法来使用画布或 SVG（甚至其他东西）来做到这一点，并且仍然允许图像和蒙版在浏览器窗口调整大小时均匀调整大小？我需要考虑哪些性能注意事项？

最终的生产代码将使用 jQuery，所以如果我需要它用于这些方法中的任何一种，它就会在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:42:41.690

您可以将图像嵌入到 SVG 中并使用剪辑路径（[Tinkerbin](http://tinkerbin.com/lAfVJqWk)）：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
    width="100%" height="100%" viewBox="0 0 100 100">
  <clipPath id="clipCircle">
    <circle r="50" cx="50" cy="50"/>
  </clipPath>
  <clipPath id="clipTriangle">
    <polygon points="0 0 50 100 100 0"/>
  </clipPath>
  <image clip-path="url(#clipCircle)" preserveAspectRatio="none" width="100%" height="100%" xlink:href="http://upload.wikimedia.org/wikipedia/commons/e/e5/Catopsilia_pomona_3_by_kadavoor.jpg"/>
</svg>
<button onclick="document.getElementsByTagName('image')[0]
              .setAttribute('clip-path','url(#clipTriangle)')">
  change clip path
</button> 
```

单击按钮将圆形遮罩更改为三角形遮罩。

# asp.net-mvc - Kendo：具有 2 个字段值的网格列链接

> ID：13712514
> 
> 赞同：1
> 
> 时间：2012-12-04T21:47:02.590
> 
> 标签：asp.net-mvc, kendo-ui

在 MVC 4 中使用 Kendo UI：

我有一个带有列的网格。我需要从网格绑定到的模型中的 2 个字段创建一个链接。“国家”和“国家”

```
 columns.Bound(p => p.Country)
              .ClientTemplate(
                  "<a href='" + Url.Action("Detach", "Edit")">Detach</a>"
               ); 
```

如何将 /Country/State 添加到 URL？这些值来自网格的绑定模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:37:20.220

您可以使用引用字段的模板：

```
columns.Bound(p => p.Country)
          .ClientTemplate(
              "<a href='" + Url.Action("Detach", "Edit") + "/#= Country #/#= State #'">Detach</a>"
           ); 
```

检查此[如何使用操作链接？](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq#how-do-i-use-action-links?)

# kendo-ui - 剑道网格列的 ClientTemplate 可以像 ListView 这样的另一个剑道对象吗？

> ID：13712515
> 
> 赞同：1
> 
> 时间：2012-12-04T21:47:15.653
> 
> 标签：kendo-ui

我真的有2个问题。一是可能，二是怎么做？RoleModel 类型有一个 PermissionModel 的 IEnumberable，我希望该列显示为列表视图。类似的东西。我不确定如何将列表视图绑定到 Permissions 对象。

```
@(Html.Kendo().Grid<RoleModel>()
    .Name("RoleGrid")
    .Columns(x =>
                 {
                     x.Bound(p => p.Name).Width(150);
                     x.Bound(p => p.Description).Width(350);
                     x.Bound(p => p.Permissions).ClientTemplate("test");
             }))

<script type="text/x-kendo-template" id="test" >
    @(Html.Kendo().ListView<PermissionModel>().Name("listView").AutoBind(true).ToClientTemplate()                                                                                                                                                                                                                                                               )
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:41:18.377

您可以 - 您应该使用 Grid 的**dataBound**事件，找到要放置列表视图并初始化列表视图的每个单元格 - 首先传递带有项目的集合，您需要使用网格的 dataItem 方法检索它。

为了更清楚，这里有一个例子：

```
@(Html.Kendo().Grid<Person>().Name("grid")
        .DataSource(dataSource => dataSource
            .Ajax()
            .Model(model=>model.Id(m=>m.PersonID))
                .Read(read => read.Action("GetPersons","Home"))                    
        )

        .Columns(columns =>
        {
            columns.Bound(c => c.PersonID);
            columns.Bound(c => c.Name).ClientTemplate("test");
            columns.Bound(c => c.Children).ClientTemplate("<div class='myView'></div>");                
        })
        .Events(ev=>ev.DataBound("db"))
    )

<script type="text/javascript">
    function db() {
        $.each($('.myView'), function () {
            var grid = $('#grid').data().kendoGrid;
            var row = $(this).closest('tr');
            var dataItem = grid.dataItem(row);
            $(this).kendoListView({
                dataSource: { data: dataItem.Children },
                template: kendo.template($("#templateLV").html())
            });
        });
    }
</script>

<script type="text/foo" id="templateLV"> 
#=TestID# testid is a property of the Child model
</script> 
```

祝你好运

# javascript - chrome 关闭安全 toDataUrl

> ID：13712516
> 
> 赞同：2
> 
> 时间：2012-12-04T21:47:18.960
> 
> 标签：javascript, google-chrome

是否可以关闭 toDataUrl 的谷歌安全
我已经尝试了以下但没有任何运气。

添加`–allow-file-access-from-files –disable-web-security`到*Chrome.exe* Windows 7 将不允许我更改它。
我也尝试输入完整路径，例如：

```
source src=file:///E:/canvas_to_png/Chrome_ImF.mp4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:48:44.823

你可以从命令行运行 chrome，然后在上面附加你的行`--allow-file-access-from-files`我不确定你从哪里得到零件`-disable-web-security`

[您可以在此堆栈问题上](https://stackoverflow.com/questions/4270999/google-chrome-allow-file-access-from-files-disabled-for-chrome-beta-8)找到更多资源链接。

但这应该附加到桌面快捷方式的路径末尾。我实际上一直在使用它。

# jquery - jquery这个选择器问题

> ID：13712521
> 
> 赞同：0
> 
> 时间：2012-12-04T21:47:52.373
> 
> 标签：jquery, html

我想循环循环并在每次用户单击该框时显示状态消息，但现在它只执行一次。我知道问题出在`next`方法上，如何在循环执行结束之前显示 status_message？

[http://jsfiddle.net/N8LMF/](http://jsfiddle.net/N8LMF/)

## HTML

```
 <input type='textbox' class='' name='change_box'>
    <div class='alert_message'></div>
    <input type='textbox' class='' name='change_box'>
    <div class='alert_message'></div> 
```

## jQuery

```
$(document).ready(function(){
    $('input[name=change_box]').live({
        blur: function(){
            var alert_message= $(this).next('.alert_message');
            for (var i=1; i<5; i++) {
                if(i%2 == 0) {
                    alert_message.removeClass().addClass('failure').text('failed').fadeOut(500);    
                }             
                else {
                    alert_message.removeClass().addClass('success').text('success').fadeOut(500);
                }
            }
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:58:01.447

正如其他人所指出的，它不会因为 触发`.removeClass`，但还有另一个问题：您隐藏输入并且不再显示它。

您可能还应该使用`.on`而不是`.live`：

```
$(document).on('blur', 'input[name=change_box]', function () {
    var alert_message= $(this).next('.alert_message');
    ...
    alert_message.removeClass().addClass('failure alert_message').text('failed')
       //show so it can be faded out again
       .fadeOut(500, function () { $(this).show().text(''); });    
}); 
```

您必须对“成功”进行类似的更改

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T21:54:52.030

问题是因为`removeClass()`

这将删除所有类，因此您下次访问时无法选择该 div..

试试这个 if else 循环

```
if (i % 2 == 0) {
         alert_message.show()
                      .removeClass('success')
                      .addClass('failure').text('failed').fadeOut(500);
}
else {             
         alert_message.show()
                      .removeClass('failure')
                      .addClass('success').text('success').fadeOut(500);
} 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/N8LMF/5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:54:42.967

当您的代码执行此操作时`removeClass()`，它也会删除 alert_message 类，因此您无法在下一次通过时选择它。

你的 for 循环也不应该在那里。现在的编码方式是，每次触发事件时运行五次。那是你要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T21:57:41.710

HTML：

```
<input type='textbox' class='' name='change_box' id='change_box'>
<div class='alert_message'></div> 
```

Javascript：

```
$(document).ready(function(){
    $('#change_box').keyup(function() {
        alert('Something changed.');
    });
}); 
```

# javascript - jquery 验证消息：如何通过 php 自定义带有响应的消息

> ID：13712522
> 
> 赞同：1
> 
> 时间：2012-12-04T21:47:52.203
> 
> 标签：javascript, jquery, jquery-validate

我正在创建一个多语言网站。我需要不将消息作为 jQuery 中的常量写入脚本。我试图解决这个问题：

```
$("#frmLogin").validate
({
    rules: 
    {
        'userName': { required: true,
        minlength: 5,
        regex:  "^[a-zA-Z0-9'.\\s]{5,40}$"},
        'passWord': { required: true,
        minlength: 5,}
    },
    messages:
    {
        'userName':{ 
            required:$.post("ajaxError.php",{ error:27,rand:Math.random()},function(data)
            { 
                if(JSON.parse(data)[0]=='') 
                {
                    error= 'Error not found';
                }else{
                    error= JSON.parse(data)[0];
                }
                return error;
            })), 
```

等等

错误变量包含正确的消息，但它没有被 jquery.message 截获。

# ruby-on-rails - Ruby strptime 错误

> ID：13712525
> 
> 赞同：1
> 
> 时间：2012-12-04T21:48:03.557
> 
> 标签：ruby-on-rails, ruby

奇怪...谁能告诉我这里出了什么问题？这是strptime的错误吗？

```
1.9.3p194 :079 > format = "%m/%-d/%Y %-I:%M:%S %p"
 => "%m/%-d/%Y %-I:%M:%S %p" 
1.9.3p194 :080 > now = Time.now.strftime(format)
 => "12/4/2012 1:44:45 PM" 
1.9.3p194 :081 > Time.strptime(now, format)
ArgumentError: invalid strptime format - `%m/%-d/%Y %-I:%M:%S %p'
    from /Users/fedenusy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/time.rb:283:in `strptime'
from (irb):81
from /Users/fedenusy/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
from /Users/fedenusy/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
from /Users/fedenusy/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

编辑：澄清一下，我正在尝试使用这种特定格式的日期，例如“12/4/2012 1:44:45 PM”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:22:19.023

strptime 不支持用于抑制 strftime 中的填充的减号 (-) 标志。

如果您从 Rails 跟踪 Date#strptime 或 Time#strptime 调用，您将看到您最终会进入[strptime](https://github.com/ruby/ruby/blob/trunk/ext/date/date_strptime.c#L170)的 Ruby VM 源代码。您会看到在处理“-”字符的解析器中没有大小写。您可以将此与[strftime](https://github.com/ruby/ruby/blob/trunk/ext/date/date_strftime.c#L552)的实现进行比较，后者确实有这种情况。

因此，您不能使用格式字符串进行解析。您需要删除缺点才能使其有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:53:39.393

试试这个格式

```
format = "%m/%d/%Y %I:%M:%S %p" 
```

要得到：

```
=> `"12/04/2012 02:52:58 PM"` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:59:44.307

Date 或 DateTime 提供`strptime`方法；时间提供了`strftime`方法。对？

# c# - 传递变量并隐藏它们

> ID：13712528
> 
> 赞同：0
> 
> 时间：2012-12-04T21:48:15.203
> 
> 标签：c#, asp.net-mvc

我正在尝试使用 MVC 4 创建一个博客，现在我在将 postid 发送到评论创建页面并将其隐藏起来时遇到问题，直到我点击创建以创建带有帖子 ID 的评论

**这是评论创建视图**

```
@model MVCProjectApp.Models.Comment

@{
    ViewBag.Title = "Create Comment";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Comments</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Message)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Timestamp)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Timestamp)
            @Html.ValidationMessageFor(model => model.Timestamp)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "~/FullPost/Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

**这是我将 postid 传递给评论创建的 Actionlink**

```
 @Html.ActionLink("Comment", "Create", "Comment", ID, null) 
```

**这是评论控制器**

```
 //
        // GET: /Comment/Create

        public ActionResult Create()
        {
            ViewBag.PostID = new SelectList(db.Posts, "PostID", "Title");
            return View();
        }

        //
        // POST: /Comment/Create

        [HttpPost]
        public ActionResult Create(Comment comment)
        {
            if (ModelState.IsValid)
            {
                db.Comments.Add(comment);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewBag.PostID = new SelectList(db.Posts, "PostID", "Title", comment.PostID);
            return View(comment);
        } 
```

**这是评论模型**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MVCProjectApp.Models
{
    public class Post
    {
        public int PostID { get; set; }
        public string Title { get; set; }
        public string Message { get; set; }
        public DateTime Timestamp { get; set; }
        public virtual ICollection<Comment> Comments { get; set; }
    }
    public class Comment
    {
        public int CommentID { get; set; }
        public int PostID { get; set; }
        public string Username { get; set; }
        public string Message { get; set; }
        public DateTime Timestamp { get; set; }
        public virtual Post Post { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:15:17.573

使用 Html.HiddenFor() （如上面的评论中所述）来保存您需要从视图返回给您但不想显示的值。

请记住，这是可破解的。采取适当的措施以确保您传递给视图的 ID 与返回的 ID 相同。查找 AntiForgeryToken。

# php - 使用参数“global”时，PHP函数无法从所需文件中识别数组

> ID：13712529
> 
> 赞同：0
> 
> 时间：2012-12-04T21:48:15.907
> 
> 标签：php, function, require

以下如何工作：

```
require('../PHP/array.txt');
function printarray($includedarray){
print_r($includedarray);
}
printarray($includedarray); 
```

但以下没有：

```
require('../PHP/array.txt');
function printarray(){
global $includedarray;
print_r($includedarray);
}
printarray(); 
```

当所需文件中确实有一个名为“$includedarray”的数组时。在第二个示例中，我没有收到错误消息或任何内容。这怎么可能......我什至不知道从哪里开始寻找这个问题的答案。

请注意，需要的 php 文件`array.txt`以前包含在另一个 PHP 文件中。但这肯定不是问题，因为第一个示例确实有效。

# c# - 在 MessageBox 中显示表格

> ID：13712530
> 
> 赞同：0
> 
> 时间：2012-12-04T21:48:21.483
> 
> 标签：c#

`MessageBox`是否可以在 C#中显示某种类型的表？

我希望它看起来像这样（只有文本部分忘记了按钮和颜色）：

![在此处输入图像描述](../Images/a010aae4d6faa25a0109cb7d2b50e14f.png)

因为现在是这样的：

![在此处输入图像描述](../Images/233d20aa2a503137027d636020a99cd7.png)

如何对齐数字以使其看起来像上图一样漂亮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:50:53.700

您必须为此设计自己的表单，内置的 MessageBox 只会显示一条消息（一个字符串），没有格式。

使用 ShowDialog() 将您的表单显示为像 MessageBox 一样的模式对话框。

# d3.js - 覆盖节点的属性

> ID：13712531
> 
> 赞同：0
> 
> 时间：2012-12-04T21:48:23.313
> 
> 标签：d3.js

有没有人在更新节点的填充属性时遇到问题。我在创建节点时在开始时设置填充值，并且我想在“onClick”中更改它们的颜色。onclick def 有效，因为我有在其中进行翻译的功能，（因此可以更改 x 和 y 属性）......但由于某种原因，填充颜色不会更新。如果我在设置节点时没有设置填充值，它似乎可以正常工作（单击时更改颜色），但我希望我的节点是特定颜色，因此此解决方案将不起作用。有任何想法吗？提前致谢！

# jquery - 如何在jquery mobile中居中元素

> ID：13712532
> 
> 赞同：1
> 
> 时间：2012-12-04T21:48:22.910
> 
> 标签：jquery, html, jquery-mobile, mobile

我有一个宽度为 20% 的输入元素，我想将它水平居中。我试过 text-align center （父元素），但没有帮助。这是它的外观（输入框）：

![在此处输入图像描述](../Images/616acbb12e38407d41d756bc55e74c86.png)

现在元素代码是这样的：

```
<fieldset class="ui-grid-solo" style="text-align:center !important;">
   <input type="number" class="answerIput"/>
</fieldset> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:49:44.453

只需添加`margin: 0 auto`到元素。使用固定宽度的块元素，自动左/右边距将相对于父元素居中：

```
<input type="number" class="answerIput" style="margin: 0 auto;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:50:04.297

使用边距

```
<input type="number" class="answerIput" style="margin-left:auto;margin-right:auto;" /> 
```

# iphone - 向 Web 服务发送多个参数

> ID：13712536
> 
> 赞同：0
> 
> 时间：2012-12-04T21:48:33.503
> 
> 标签：iphone, objective-c, vb.net, web-services, cocoa

我正在将应用程序从 .Net 移植到 iPhone，我需要与 Web 服务通信。我开发原始应用程序的客户说 Web 服务需要接收 2 个参数。他给我发了这个代码：

```
Dim A As AcessoWS.AcessoWS Dim ds As New DataSet Try
        A = New AcessoWS.AcessoWS(Webservice)
        ds = A.ClassesAndCombosList(SupplierID, 1)
        If Not ds Is Nothing Then 
```

SupplierID 和 1 是 2 个参数。有谁知道这些参数是如何在请求中发送的？身体？标头？还要别的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:08:53.203

如果不查看更多代码，就很难确定参数是如何发送到 Web 服务的。您是否有权访问网络呼叫的另一端以查看有效请求？如果不这样做，是否有文档可以检查 Web 服务如何需要通信？

您可以随时尝试在浏览器中使用 Rest 客户端。Firefox 有一个很棒的 Rest 客户端，可以作为插件安装。你可以在这里找到它：[http ://restclient.net/](http://restclient.net/)

# oracle-apex - Oracle APEX - 同一图表中的多个线型（AnyChart，但任何图表服务都可以）

> ID：13712540
> 
> 赞同：2
> 
> 时间：2012-12-04T21:48:54.233
> 
> 标签：oracle-apex, anychart

我目前正在使用 Oracle Apex 4.1 开发一个图表（使用默认的 AnyChart 插件），该图表具有多个系列，其中包含来自 SQL 查询的动态填充数据。虽然我可以轻松更改每个系列的线条颜色，但我还必须区分具有不同线条样式的线条（例如一种实线、一种虚线、一种带有菱形标记的虚线等）据我所知并尝试使用AnyChart 图表的自定义 XML 功能，我似乎无法为每个线条系列设置线条样式。

1) 有没有人通过操作 APEX 构建器页面的 CustomXML 部分来为每个系列设置线条样式的解决方案？我看不到拆分#DATA# 替换屏幕的方法。

2) 有谁知道我可以合并到 APEX 页面中以实现我的目标的另一种解决方案？我不以任何方式依附于 AnyChart。

谢谢您的帮助。下面是我正在寻找的那种解决方案的谷歌图片搜索。

[http://www.google.com/imgres?um=1&hl=en&sa=N&tbo=d&biw=1440&bih=799&tbm=isch&tbnid=gel5t-WrO7YnQM:&imgrefurl=http://www.swiftchart.com/example_1.htm&docid=cL4I17cL558p_M&imgurl= http://www.swiftchart.com/line_ex5.png&w=400&h=300&ei=JW6-UO_4C6H62gWK54DoAw&zoom=1&iact=hc&vpx=4&vpy=494&dur=29&hovh=194&hovw=259&tx=79&ty=185&sig=100543309725245412492&page=1&tbnh=139&tbnw=189&start=0&ndsp= 26&ved=1t:429,r:20,s:0,i:152](http://www.google.com/imgres?um=1&hl=en&sa=N&tbo=d&biw=1440&bih=799&tbm=isch&tbnid=gel5t-WrO7YnQM:&imgrefurl=http://www.swiftchart.com/example_1.htm&docid=cL4I17cL558p_M&imgurl=http://www.swiftchart.com/line_ex5.png&w=400&h=300&ei=JW6-UO_4C6H62gWK54DoAw&zoom=1&iact=hc&vpx=4&vpy=494&dur=29&hovh=194&hovw=259&tx=79&ty=185&sig=100543309725245412492&page=1&tbnh=139&tbnw=189&start=0&ndsp=26&ved=1t:429,r:20,s:0,i:152)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T16:14:42.073

仅适用于那些将寻求相同问题答案的人。

AnyChart 允许对图表元素应用不同的样式。要执行 OP 想要的操作，您需要在自定义 XML 中定义样式并将它们分配给系列。例如，这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<anychart>
  <charts>
    <chart plot_type="CategorizedVertical">

      <styles>
        <line_style name="style1">
          <line enabled="True" thickness="4" color="Rgb(86,86,26)" />
          <effects>
            <bevel enabled="true" highlight_opacity="0.4" shadow_opacity="0.4" distance="2" />
            <drop_shadow enabled="true" opacity="0.3" />
          </effects>
          <states>
            <hover>
              <border color="DarkRed" thickness="6" />
            </hover>
          </states>
        </line_style>
        <line_style name="style2" parent="style1">
          <line color="Rgb(180,180,255)" />
        </line_style>
        <line_style name="style3" parent="style1">
          <line color="Rgb(255,170,170)" dashed="True" dash_length="5" space_length="5" />
        </line_style>
      </styles>

      <data_plot_settings default_series_type="Line">
        <line_series>
          <marker_settings enabled="false" />
        </line_series>
      </data_plot_settings>

      <!--#DATA#-->
      &PAGE_ITEM_WITH_CHART_DATA.

      <chart_settings>
        <title enabled="false" />
        <axes>
          <y_axis>
            <title>
              <text>Salary</text>
            </title>
          </y_axis>
          <x_axis>
            <title>
              <text>Month</text>
            </title>
          </x_axis>
        </axes>
      </chart_settings>
    </chart>
  </charts>
</anychart> 
```

隐藏`PAGE_ITEM_WITH_CHART_DATA`项应包含所有图表数据系列。该`styles`元素定义了与图表部分一起使用的不同样式。我们可以将其中一个分配给整个系列，如下所示：

```
<data>
  <series name="2003 Sales" style="style1">
    <point name="January" y="12000" />
    <point name="February" y="15000" />
    <point name="March" y="16000" />
    <point name="April" y="15000" />
    <point name="May" y="14000" />
  </series>
  ...
</data> 
```

或者我们可以只为一个点指定一个样式：

```
<data>
  ...
  <series name="2004 Sales" style="style2">
    <point name="January" y="10000" />
    <point name="February" y="12000" />
    <point name="March" y="18000" style="style3" />
    <point name="April" y="11000" />
    <point name="May" y="9000" />
  </series>    
<data> 
```

[您可以在此处](http://www.anychart.com/products/anychart/docs/users-guide/Line-Spline-Step-Line-Chart.html#several_styles)找到带有 XML 代码的示例。

# javascript - 使用 Redis 跟踪来自传入流量的页面视图

> ID：13712543
> 
> 赞同：1
> 
> 时间：2012-12-04T21:49:04.563
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, redis

该帖子已从该主题中删除

# php - 如何在php的会话中存储同名数据？

> ID：13712546
> 
> 赞同：0
> 
> 时间：2012-12-04T21:49:10.440
> 
> 标签：php, session

我希望我的用户能够提交表单，然后将这些表单值存储在会话中。表单回发给自己，那么如何在会话中一次又一次地存储数据？

```
<form action="addPerson.php" method="post">
    <input required="required" placeholder="Name" name="personname"/>       
    <label for="gender">Male or Female?</label> 
    <select id="gender" name="gender">      
        <option value="f">Female</option>
        <option value="m">Male</option>
    </select>

<button type="submit">add person</button>
</form> 
```

所以我在想：

```
$_SESSION["personname"] = $_POST['personname'];
$_SESSION["persongender"] = $_POST['gender'] ; 
```

但是每次发布新表单时都会替换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:53:27.300

```
$_SESSION['people'][] = array(
    'personname' => $_POST['personname'],
    'persongender' => $_POST['gender']
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:52:38.143

关于什么：

```
$_SESSION["personname"][] = $_POST['personname'];
$_SESSION["persongender"][] = $_POST['gender'] ; 
```

这些值以这种方式存储在数组中。

或者：

```
$_SESSION['persons'][] = array( $_POST['personname'], $_POST['gender']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:54:16.447

我会这样做。

```
$_SESSION[] = array("personname" => $_POST['personname'], 
                    "persongender" => $_POST['gender']) ; 
```

这样你就得到了一个多维数组，如果你想访问一个旧值，你可以循环遍历它。

# android - mediaplayer 流式传输分块编码的 mp3 流在 droid x2 上不输出声音

> ID：13712549
> 
> 赞同：1
> 
> 时间：2012-12-04T21:49:13.390
> 
> 标签：android, mp3, audio-streaming, android-mediaplayer, motorola-droid

我正在连接到通过 http 1.1 使用分块传输编码流式传输 mp3 帧的服务器。android MediaPlayer api 在我测试过的 4 款不同的手机中成功播放了这个流，包括 Droid X。但是，在摩托罗拉 Droid X2 上，它在大约正确的持续时间（isPlaying() call 一直返回 true），但是耳机没有声音，也没有错误输出。

此外，在此“播放”期间，硬件音量控件管理铃声音量，而不是预期的音乐音量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:12:53.407

似乎 Droid X2 不喜欢小块数据（通过分块传输编码）。单帧块结束，16kb 块导致卡顿。增加块的大小会带来更好的性能。

# css - 带有无序列表的导航栏

> ID：13712554
> 
> 赞同：2
> 
> 时间：2012-12-04T21:49:26.063
> 
> 标签：css, html, navigation, unordered

这个问题应该很简单，上一个 html 类并在尝试完成作业时遇到这个问题。我通过制作一个无序列表来制作我的导航栏，并使用 CSS 对其进行格式化，但现在我无法在页面上制作有序列表，因为我为导航栏所做的格式化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:01:13.733

导航栏 HTML 应该是：

```
<ul id="navbar">
    <li><a href="home.htm">Home</a></li>
    <li><a href="about.htm">About</a>/</li>
    <!-- ... -->
</ul> 
```

CSS应该是：

```
ul#navbar {
    display:inline;
    /* Any other CSS you want */
}
ul#navbar li {
    display:inline;
} 
```

然后该 CSS 不会影响您创建的任何其他 UL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:51:31.027

您需要编写通用列表样式，然后为导航栏覆盖它们：

```
ul { /* Basic UL styles here */ }

#main-navigation ul { /* Navigation menu styles here (assumes a container with ID 'main-navigation') */ } 
```

# r - 绘制两个 xts 对象

> ID：13712558
> 
> 赞同：6
> 
> 时间：2012-12-04T21:49:38.493
> 
> 标签：r, xts

我`xtsExtra`用来绘制两个 xts 对象。

考虑以下对 plot.xts 的调用：

```
plot.xts(merge(a,b),screens=c(1,2)) 
```

它用于在两个单独的面板中绘制 xts 对象 a 和 b。

如何控制 y 轴的间距？具体来说，我遇到了 y 轴标签太靠近甚至重叠的问题。

理想情况下，我想指定要在两个 y 轴标签之间保持的最小填充。任何帮助表示赞赏！

编辑：一个可重现的例子：

```
#install if needed
#install.packages("xtsExtra", repos="http://R-Forge.R-project.org")
library(xtsExtra)

ab=structure(c(-1, 0.579760106421202, -0.693649703427259, 0.0960078627769613, 
0.829770469089809, -0.804276208608663, 0.72574639798749, 0.977165659135716, 
-0.880178529686181, -0.662078620277974, -1, 2.35268982675599, 
-0.673979231663719, 0.0673890875594205, 1.46584597734824, 0.38403707067242, 
-1.53638088345349, 0.868743976582955, -1.8394614923913, 0.246736581314485
), .Dim = c(10L, 2L), .Dimnames = list(NULL, c("a", "b")), index = structure(c(1354683600, 
1354770000, 1354856400, 1354942800, 1355029200, 1355115600, 1355202000, 
1355288400, 1355374800, 1355461200), tzone = "", tclass = "Date"), class = c("xts", 
"zoo"), .indexCLASS = "Date", .indexTZ = "", tclass = "Date", tzone = "")

plot.xts(ab,screens=c(1,2)) 
```

产生：

![y 轴标签太近](../Images/9fb20b3320ce44912dc21f227d65d303.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:03:27.503

抱歉，这花了这么长时间。我试图弄清楚为什么我的图表从 2012 年 12 月 4 日开始，到 2012 年 12 月 13 日结束，而你的图表从 2012 年 12 月 5 日开始，到 2012 年 12 月 14 日结束。你能检查以确保`ab`你在上面发布的是和`ab`你用来绘制图表的一样吗？

另外，我使用 library`xts`而不是`xtsExtra`. 有使用的理由`xtsExtra`吗？

这是代码：

```
library(xts)

ab=structure(c(-1, 0.579760106421202, -0.693649703427259, 0.0960078627769613, 
           0.829770469089809, -0.804276208608663, 0.72574639798749, 0.977165659135716, 
           -0.880178529686181, -0.662078620277974, -1, 2.35268982675599, 
           -0.673979231663719, 0.0673890875594205, 1.46584597734824, 0.38403707067242, 
           -1.53638088345349, 0.868743976582955, -1.8394614923913, 0.246736581314485), .Dim = c(10L, 2L), .Dimnames = list(NULL, c("a", "b")), index = structure(c(1354683600, 
          1354770000, 1354856400, 1354942800, 1355029200, 1355115600, 1355202000, 
          1355288400, 1355374800, 1355461200), tzone = "", tclass = "Date"), class = c("xts", 
          "zoo"), .indexCLASS = "Date", .indexTZ = "", tclass = "Date", tzone = "")

#Set up the plot area so that multiple graphs can be crammed together
#In the "par()" statement below, the "mar=c(0.3, 0, 0, 0)" part is used to change
#the spacing between the graphs.   "mar=c(0, 0, 0, 0)" is zero spacing.
par(pty="m", plt=c(0.1, 0.9, 0.1, 0.9), omd=c(0.1, 0.9, 0.2, 0.9), mar=c(0.3, 0, 0, 0))

#Set the area up for 2 plots
par(mfrow = c(2, 1))

#Build the x values so that plot() can be used, allowing more control over the format
xval <- index(ab)

#Plot the top graph with nothing in it =========================
plot(x=xval, y=ab$a, type="n", xaxt="n", yaxt="n", main="", xlab="", ylab="")
mtext(text="ab", side=3, font=2, line=0.5, cex=1.5)

#Store the x-axis data of the top plot so it can be used on the other graphs
pardat <- par()

#Layout the x axis tick marks
xaxisdat <- index(ab)

#If you want the default plot tick mark locations, un-comment the following calculation
#xaxisdat <- seq(pardat$xaxp[1], pardat$xaxp[2], (pardat$xaxp[2]-pardat$xaxp[1])/pardat$xaxp[3])

#Get the y-axis data and add the lines and label
yaxisdat <- seq(pardat$yaxp[1], pardat$yaxp[2], (pardat$yaxp[2]-pardat$yaxp[1])/pardat$yaxp[3])
axis(side=2, at=yaxisdat, las=2, padj=0.5, cex.axis=0.8, hadj=0.5, tcl=-0.3)
abline(v=xaxisdat, col="lightgray")
abline(h=yaxisdat, col="lightgray")
mtext(text="ab$a", side=2, line=2.3)
lines(x=xval, y=ab$a, col="red")
box() #Draw an outline to make sure that any overlapping abline(v)'s or abline(h)'s are covered

#Plot the 2nd graph with nothing in it ================================
plot(x=xval, y=ab$b,  type="n", xaxt="n", yaxt="n", main="", xlab="", ylab="")

#Get the y-axis data and add the lines and label
pardat <- par()
yaxisdat <- seq(pardat$yaxp[1], pardat$yaxp[2], (pardat$yaxp[2]-pardat$yaxp[1])/pardat$yaxp[3])
axis(side=2, at=yaxisdat, las=2, padj=0.5, cex.axis=0.8, hadj=0.5, tcl=-0.3)
abline(v=xaxisdat, col="lightgray")
abline(h=yaxisdat, col="lightgray")
mtext(text="ab$b", side=2, line=2.3)
lines(x=xval, y=ab$b, col="blue")
box() #Draw an outline to make sure that any overlapping abline(v)'s or abline(h)'s are covered

#Plot the X axis =================================================
axis(side=1, label=format(as.Date(xaxisdat), "%b %d\n%Y\n") , at=xaxisdat, padj=0.4, cex.axis=0.8, hadj=0.5, tcl=-0.3)
mtext(text="Date", side=1, line=2.5) 
```

![在此处输入图像描述](../Images/d7bf813b7b5344485ba9934368f2dc8a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:25:22.147

我玩一些参数

```
 plot.xts(ab, bty = "n",    las = 1,     cex.axis = 0.5 ) 
```

![在此处输入图像描述](../Images/9f52f17465d3ac33df307c86b39a3f17.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T10:21:27.797

由于 y 轴的格式不佳，我放弃了使用 xts 绘图。与此问题中提到的完全相同的问题。

`autoplot.zoo`一直是一个不错的选择。

```
library(ggplot2)
autoplot.zoo(ab) + theme(panel.background = element_blank(),
                         panel.grid.major = element_blank(),
                         panel.grid.minor = element_blank()) +
                         theme_bw() 
```

![在此处输入图像描述](../Images/75034a4e7940196c52626ee111a8d18e.png)

# tfsbuild - TFS 2012 - 构建一个引用另一个团队项目中的类库的 Web 应用程序项目

> ID：13712561
> 
> 赞同：1
> 
> 时间：2012-12-04T21:49:40.613
> 
> 标签：tfsbuild

我无法让 TFS 2012 构建一个 Web 应用程序项目，该项目引用另一个团队项目中的类库项目。

以下是项目在源代码管理中的外观：

```
- $/
  - TP1
    - Development
      - Source
        - WebAppProject
  - TP2
    - Development
      - Source
        - ClassLibraryProject1 
```

为了这个示例的目的，我简化了这个结构 - 每个团队项目中都有其他解决方案和项目。假设它`TP2`包含旨在供其他项目使用的代码，而不仅仅是`TP1`.

包含的解决方案`WebAppProject`还包含`ClassLibraryProject1`. 它是`TP1`使用**Add Existing Project 添加**的。`WebAppProject`也有一个项目参考`ClassLibraryProject1`。

我正在构建一个团队构建，该团队构建跨`TP1`和`TP2`. 我在其中创建了构建定义`TP2`并设置了以下工作区：

*   $/TP1/Development 构建代理文件夹设置为 $(SourceDir)\TP1\Development
*   $/TP2/Development 构建代理文件夹设置为 $(SourceDir)

TFS can't build `WebAppProject`，错误实际上是有道理的......

TFS 正在尝试将引用解析为`ClassLibraryProject1`使用来自的项目引用`WebAppProject`；eg:`..\..\..\TP2\Development\Source\ClassLibrary1`但是，该路径显然不会存在于构建服务器上。

有一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:53:55.277

做到这一点的最佳方法是设置一个工件存储库，例如 NuGet（在规模的复杂端），甚至是通常可访问的网络文件夹（在规模的非常基本端）。

使用单独的构建作业/进程构建共享库并将其输出到工件存储库。

通过工件存储库和一些“获取最新”机制（例如，NuGet 获取，用于 NuGet；xcopy/robocopy 批处理脚本，用于共享网络目录）在使用项目时引用它。

将共享项目直接添加到您的解决方案中很容易导致痛苦，例如，如果有人意外或不知不觉地从您的解决方案中更改了共享项目。

# c++ - 使用 boost 将 C++ 对象传递给 python

> ID：13712563
> 
> 赞同：4
> 
> 时间：2012-12-04T21:49:47.830
> 
> 标签：c++, python, boost, boost-python

我试图弄清楚如何使用 boost python 在 c++ 中创建一个对象并将其传递给 Python。我设法做到了这一点，但随后无法进行垃圾收集。

想象一下 A 类是在 C++ 中的某个地方定义的。passNewAToPython() 函数是从代码中的其他地方调用的，它创建一个 A 对象，然后将它传递给 Python 中的回调函数。我希望将特定实例传递给 python 而不是副本，因此使用 ptr()

```
static PyObject * pythonCallbacks;

void passNewAToPython()
{
  A * a = new A();
  PyGILState_STATE _GILState = PyGILState_Ensure();
  //Should really use a try catch here too but lets ignore that for now
  boost::python::call_method<void>(pythonCallbacks, "newA", boost::python::ptr(a));
  PyGILState_Release(_GILState);
}

void initmodule(PyObject* userCallCallbacks_)
{
   PyEval_InitThreads();

   pythonCallbacks = userCallCallbacks_;
}

BOOST_PYTHON_MODULE(mymodule)
{
    def("initmodule", initmodule);

    class_<A, boost::noncopyable>("A", init<>());
} 
```

Python 代码

```
import mymodule

class pythonCallbacks(object):
    a_list = [];
    def newA(self, a):
         self.a_list.append(a)

callbacks = pythonCallbacks()
mymodule.initmodule(callbacks) 
```

现在想象一下在调用 newA 回调之后的一段时间。我希望存储实例的唯一位置是在 a_list 中。因此，如果我从 a_list 中删除 a ，那么我希望在我使用 new 创建的对象上调用 c++ 删除。那永远不会发生，所以我泄漏了对象。

我尝试了许多技术变体来做到这一点，但从未设法使一切正常。我真的很感激一个完整的例子，也许展示了如何修改上面的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:25:49.650

我很确定`ptr()`与指向的对象的生命周期无关。如果您使用它，则完全由您来管理生命周期。（我相信使用它就像使用 PyCObject。）

您可以做的是将 A 的指针类型定义为 shared_ptr （boost 或 std，没关系）。像这样的东西：

```
class_<A, shared_ptr<A>, boost:noncopyable>("A", init<>()); 
```

然后你可以让你的工厂函数这样做：

```
void passNewAToPython()
{
    A * a = make_shared<A>();
    PyGILState_STATE _GILState = PyGILState_Ensure();     
    //Should really use a try catch here too but lets ignore that for now
    boost::python::call_method<void>(pythonCallbacks, "newA", a);
    PyGILState_Release(_GILState);
 } 
```

# java - 如何找出我的 maven pom 中的哪些依赖项具有特定的依赖项。

> ID：13712564
> 
> 赞同：0
> 
> 时间：2012-12-04T21:49:48.553
> 
> 标签：java, maven

我需要排除一个我知道组 ID、工件 ID 和我想要排除的版本的工件，但我如何才能找出我的 pom 中的哪些依赖项将此特定工件作为依赖项。我正在使用 maven 2x，看不到全局排除的方法。有谁知道我如何在不必查看每个依赖项的情况下找出有问题的依赖项是什么？

我环顾四周，找不到任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T21:54:54.603

`dependency:tree`可以在这里帮助你。从[Maven 依赖插件文档](http://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html)：

```
mvn dependency:tree -Dverbose -Dincludes=commons-collections 
```

会告诉你是什么在拉动`commons-collections`：

```
[INFO] [dependency:tree]
[INFO] org.apache.maven.plugins:maven-dependency-plugin:maven-plugin:2.0-alpha-5-SNAPSHOT
[INFO] +- org.apache.maven.reporting:maven-reporting-impl:jar:2.0.4:compile
[INFO] |  \- commons-validator:commons-validator:jar:1.2.0:compile
[INFO] |     \- commons-digester:commons-digester:jar:1.6:compile
[INFO] |        \- (commons-collections:commons-collections:jar:2.1:compile - omitted for conflict with 2.0)
[INFO] \- org.apache.maven.doxia:doxia-site-renderer:jar:1.0-alpha-8:compile
[INFO]    \- org.codehaus.plexus:plexus-velocity:jar:1.1.3:compile
[INFO]       \- commons-collections:commons-collections:jar:2.0:compile 
```

# r - header=FALSE "Levels" in read.table()

> ID：13712573
> 
> 赞同：-3
> 
> 时间：2012-12-04T21:50:33.747
> 
> 标签：r

为了将标题标签作为矩阵中的条目而不是名称，我使用了带有参数 header=FALSE 的 read.table。

当我将标题条目称为元素时，我会得到以下内容：

TCGA_20_0987_01A_02R_0434_01 21199 级别：10.0039251940782 10.0057778066803 ... TCGA_20_0987_01A_02R_0434_01

现在，第一个值 (TCGA_20...) 就是我想要的。“级别”条目来自哪里，它们是什么，以及如何避免它们，以便只有标题标签显示为矩阵元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:55:33.307

如果您指定 header=FALSE，则第一行作为数据读入。如果第一行都是文本，那么变量都将是因子变量（ .... 不是您想要的。）尝试使用 header=TRUE。我怀疑您在该文件中的第一行是列名。如果您可以粘贴该文本文件的前几行，则将更清楚发生了什么。有一些方法可以强制将特定列读取为指定的类，但我们需要先看看需要什么。

# r - 如何改变grid.draw的位置

> ID：13712574
> 
> 赞同：9
> 
> 时间：2012-12-04T21:50:34.667
> 
> 标签：r, r-grid

我正在安排由 ggplot2 生成的图。我必须使用 print 打印出图和 grid.draw 来显示图例。

示例代码：

```
p0 <- ggplot(data = iris, geom = 'blank',
         aes(y = Petal.Width, x = Petal.Length, color = Species)) + geom_point() +
      theme(axis.title.x = element_blank(),
            axis.title.y = element_blank(),
            legend.position = "none")

p1 <- ggplot(data = iris, geom = 'blank',
         aes(y = Petal.Length, x = Petal.Width, color = Species)) + geom_point() +
       theme(axis.title.x = element_blank(),
             axis.title.y = element_blank(),
             legend.position = "none")

g_legend <- function(a.gplot){
  tmp <- ggplot_gtable(ggplot_build(a.gplot))
  leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
  legend <- tmp$grobs[[leg]]
  return(legend)
}

p <- ggplot(data = iris, geom = 'blank',
        aes(y = Petal.Width, x = Petal.Length, color = Species)) + geom_point()

grid.newpage() 
pushViewport(viewport(layout = grid.layout(2, 4)))
print(p0,vp = viewport(layout.pos.row = 1, layout.pos.col = 1))
print(p0,vp = viewport(layout.pos.row = 1, layout.pos.col = 2:3))
print(p1,vp = viewport(layout.pos.row = 2, layout.pos.col = 2:3))
grid.text("This is x label",gp=gpar(fontsize = 14), vjust = 11,
          vp = viewport(layout.pos.row = 2, layout.pos.col = 2))
grid.text("This is y label",gp=gpar(fontsize = 14), vjust = -11, rot = 90,
          ![enter image description here][1]vp = viewport(layout.pos.row = 2, layout.pos.col = 2))

grid.draw(g_legend(p)) 
```

我想把图例放在第四列。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T22:32:24.057

![在此处输入图像描述](../Images/16fddee554f89485ce453b449f262bf0.png)使用 gridExtra

```
 library(gridExtra)
         grid.arrange(p0 , p1,  g_legend(p), ncol=3,
         heights=c(10, 1),widths =c(1,2,1) ,as.table =TRUE) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-12T11:46:49.483

您可以手动更改 TableGrob 对象中的 x 和 y 坐标。例如，您可以执行以下操作将图例定位在图的中心：

```
leg <- g_legend(p)
leg$vp$x <- unit(.5, 'npc')
leg$vp$y <- unit(.5, 'npc') 
```

当您调用 grid.draw(leg) 时，它将被定位在中心。使用不同的值将其放在您喜欢的任何位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-26T10:24:14.837

在网格中，我们的想法是将视口推到您要绘制的位置，

```
pushViewport(viewport(layout.pos.row = 2, layout.pos.col = 4))
grid.draw(g_legend(p)) 
```

或者，或者，将视口分配给图例 grob，

```
leg = g_legend(p)
leg$vp = viewport(layout.pos.row = 2, layout.pos.col = 4)
grid.draw(leg) 
```

# java - java的openid错误

> ID：13712579
> 
> 赞同：0
> 
> 时间：2012-12-04T21:50:54.307
> 
> 标签：java, servlets, openid

我在我的项目中使用库 openid4java。

我尝试使用示例：

[http://communitygrids.blogspot.com/2009/12/quick-guide-to-using-googles-openid.html](http://communitygrids.blogspot.com/2009/12/quick-guide-to-using-googles-openid.html)

和

[http://crisdev.wordpress.com/2011/03/23/openid4java-login-example/](http://crisdev.wordpress.com/2011/03/23/openid4java-login-example/)

但是当我尝试通过 google 或通过 myopenid 登录时，总是会遇到下一个错误：

> 严重：servlet jsp 的 Servlet.service() 抛出异常 java.lang.IllegalArgumentException：http: [//java.sun.com/xml/jaxp/properties/schemaSource](http://java.sun.com/xml/jaxp/properties/schemaSource) 在 org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(DocumentBuilderFactoryImpl.java:128) 在 org.openid4java.discovery.xrds.XrdsParserImpl.parseXmlInput(XrdsParserImpl.java:169) 在 org.openid4java.discovery.xrds.XrdsParserImpl.parseXrds (XrdsParserImpl.java:50) 在 org.openid4java.discovery.yadis.YadisResolver.retrieveXrdsLocation(YadisResolver.java:448) 在 org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:252) 在 org.openid4java。 discovery.yadis.YadisResolver.discover(YadisResolver.java:232) at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:166) at org.openid4java.discovery.Discovery.discover(Discovery.java:147)在 org.openid4java.discovery.Discovery.discover(Discovery.java:129) 在 org.openid4java.consumer.ConsumerManager。在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax 的 org.apache.jsp.WEB_002dINF.jsps.consumer_005fredirect_jsp._jspService(consumer_005fredirect_jsp.java:108) 发现(ConsumerManager.java:542) .servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java :390) 在 org.apache.catalina.core.ApplicationFilterChain 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 的 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)。 internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core。ApplicationDispatcher.invoke(ApplicationDispatcher.java:684) at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471) at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402) at org .apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329) at photoGallery.EnterOpenIdServlet.doGet(EnterOpenIdServlet.java:17) at javax.servlet.http.HttpServlet.service(HttpServlet.java:621) at javax。 servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java: 210）在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java：224) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) .invoke(StandardHostValve.java:168) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 在 org. apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor. java:987) 在 org.apache.tomcat 的 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)。util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java: 603) 在 java.lang.Thread.run(Thread.java:722)
> 
> org.apache.jasper.JasperException：java.lang.IllegalArgumentException：http: [//java.sun.com/xml/jaxp/properties/schemaSource](http://java.sun.com/xml/jaxp/properties/schemaSource) 在 org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile (JspServlet.java:390) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina。 core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)在 org.apache.catalina.core 的 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)。ApplicationDispatcher.doForward(ApplicationDispatcher.java:402) at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329) at photoGallery.EnterOpenIdServlet.doGet(EnterOpenIdServlet.java:17) at javax.servlet.http.HttpServlet .service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache。 catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java: 169）在 org.apache.catalina.authenticator.AuthenticatorBase.invoke（AuthenticatorBase.java：472) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 在 org.apache.catalina.valves.AccessLogValve 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) .invoke(AccessLogValve.java:927) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org. org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor 的 apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)。在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent 处运行 (JIoEndpoint.java:307)。ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因：java.lang.IllegalArgumentException： [http://java.sun.com/xml/jaxp/properties/schemaSource](http://java.sun.com/xml/jaxp/properties/schemaSource) 在 org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(DocumentBuilderFactoryImpl.java:128) 在 org.openid4java.discovery.xrds.XrdsParserImpl.parseXmlInput(XrdsParserImpl.java:169) 在 org.openid4java.discovery.xrds.XrdsParserImpl.parseXrds (XrdsParserImpl.java:50) 在 org.openid4java.discovery.yadis.YadisResolver.retrieveXrdsLocation(YadisResolver.java:448) 在 org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:252) 在 org.openid4java。 discovery.yadis.YadisResolver.discover(YadisResolver.java:232) at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:166) at org.openid4java.discovery.Discovery.discover(Discovery.java:147)在 org.openid4java.discovery.Discovery.discover(Discovery.java:129) 在 org.openid4java.consumer.ConsumerManager。在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax 的 org.apache.jsp.WEB_002dINF.jsps.consumer_005fredirect_jsp._jspService(consumer_005fredirect_jsp.java:108) 发现(ConsumerManager.java:542) .servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432) ... 28 更多

我在eclipse下编译它并在eclipse下运行（在服务器上运行选项），我没有将war文件部署到tomcat服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:01:19.533

我发现了我的错误。问题在于使用了太新的附加库。为了正确的工作使用您正在使用 openid4java 下载的库

# c# - 与 OutputCacheAttribute 交互

> ID：13712580
> 
> 赞同：4
> 
> 时间：2012-12-04T21:50:57.147
> 
> 标签：c#, asp.net-mvc-3, caching, asp.net-mvc-4

给定一个用 OutputCacheAttribute 修饰的控制器动作，动作本身是否可以与 OutputCacheAttribute 的属性交互？

例如，如果动作是动态的，这将很有用：

*   `CacheItemPriority`在返回 ActionResult 之前 确定并设置它。
*   确定应该为此特定请求禁用缓存，因此该`NoStore`属性设置为 true。

是的，不是吗？如果答案是否定的，那么在 MVC 中使用这种基于动作的动态行为进行输出缓存的后备方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:34:37.197

CacheItemPriority 不是 OutputCacheAttribute 的一部分，因此您需要将 OutputCacheAttribute 子类化并从那里修改或自己滚动（可能通过子类化 ActionFilterAttribute）。

以下文章显示了您尝试执行的操作的示例。看起来它是在标准 MVC OutputCacheAttribute 有任何可用参数之前编写的，因此本文的大部分内容都在展示您想要的东西或非常接近您想要的东西。

[http://blog.maartenballiauw.be/post/2008/06/26/Creating-an-ASPNET-MVC-OutputCache-ActionFilterAttribute.aspx](http://blog.maartenballiauw.be/post/2008/06/26/Creating-an-ASPNET-MVC-OutputCache-ActionFilterAttribute.aspx)

# javascript - 禁止 Omniture st() 调用生成综合浏览量

> ID：13712583
> 
> 赞同：2
> 
> 时间：2012-12-04T21:50:59.547
> 
> 标签：javascript, adobe-analytics

我有一个项目，其中包含标准的、边界不可读的 Omniture JavaScript 跟踪代码，如下所示。

```
<script language="JavaScript">
    var s_account = "{MY ACCOUNT}";
</script>
<!-- START OMNITURE -->
<!-- SiteCatalyst code version: H.1.
Copyright 1997-2005 Omniture, Inc. More info available at
http://www.omniture.com -->
<script type="text/javascript" src="http://MYDOMAIN.com/javascripts/metrics/s_code_trb.js"></script>
<script language="JavaScript">

    s.pageName="Project name"   
    s.server="MYDOMAIN.com" 
    s.prop38="3rd Party";
    s.eVar21="3rd Party";    

/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code=s.t();if(s_code)document.write(s_code) 
</script>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.1\. -->
<!-- END Omniture code --> 
```

但是，此代码始终会生成综合浏览量。

这个项目需要iframe到我们的CMS中，也就是说CMS中的容器页面已经生成了一个pageview。我们希望能够跟踪项目中的点击（例如，点击特定按钮），但是现在，这会导致重复的网页浏览，一个用于 CMS 页面，一个用于 iframe 内的页面。

Adobe 文档说`s.t()`必须始终在之前调用它，`s.tl()`但模糊地暗示`s.t()`可以修改，这样它就不会生成页面浏览量，而是生成一个跟踪链接。

快速谷歌搜索出现了这个[几乎难以理解的 Twitter 对话](https://en.twitter.com/Jenn_Kunz/status/233294348089966593)，似乎暗示了作为参数发送的解决方案`pev1`，`pev2`并且`pe=lnk_o`. 但这仍然超出了我的理解。

这是真的？那里有任何 Omniture 大师可以帮助我弄清楚我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:23:10.870

在调用 s.tl() 之前不需要调用 st()。加载 s_code.js 文件，然后调用 st() 函数将生成一个页面视图，如您所见，但您可以轻松加载 s_code.js 文件，仅从链接中的 onclicks 调用 s.tl()需要跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:32:21.797

如果您只想跟踪自定义链接，而从不跟踪页面浏览量，请废弃整个代码块，除了对 s_code.js 文件的调用。然后在您要跟踪的链接中，使用此骨架：

```
<a href="link.html" onClick="
    var s=s_gi('rsid');
    s.tl(this,'o','Custom Link Name');">
Click this link</a> 
```

在上面的示例中，这将向报表包*rsid发送一个自定义链接，并使用值**Custom Link Name*填充自定义链接报告。请务必将 rsid 更改为您打算将数据发送到的实际报表包。

s.tl函数的参数如下：

*   第一个参数：保存*this*或*true*的值。*这*会在继续之前使页面有 500 毫秒的延迟，因此图像请求有机会触发，而*true*会禁用该 500 毫秒的延迟。
*   第二个参数：可以是*'d'*、*'e'*或*'o'*。它们分别用于下载链接、退出链接或自定义链接。
*   第三个参数：您希望在报告中填充的值，通常是对他们点击的链接的描述。

您可以定义几个额外的变量来启用对道具、eVar 和事件的跟踪。如果您有权访问 SiteCatalyst，所有这些都包含在链接跟踪白皮书中：

[http://microsite.omniture.com/t2/help/en_US/whitepapers/link_tracking/index.html](http://microsite.omniture.com/t2/help/en_US/whitepapers/link_tracking/index.html)

此外，如果您向我提供它说 st() 必须在 s.tl() 之前调用的来源，我很可能会安排更正该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:03:55.697

如果您使用的是 iframe 并且您在同一个域中，则可以让 iframe 文档调用父文档上的 javascript 函数，这样就不需要重新初始化omniture。我已经使用 iframed 到同一域上的页面中的 Backbone 应用程序来完成此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T23:31:51.477

好吧，我不知道您的系统是如何设置的，但是您可能可以针对您以前的页面名称和当前页面名称进行测试。我假设父页面和通过 iframe 引入的页面具有相同的 pageName - 否则它们是两个单独的页面......等等......如果不是，你可以修改这个......

围绕该代码，您可以执行类似的操作。

```
s.prevPage=s.getPreviousValue(s.pageName,'gpv1','');
var s_code=s.t();
if(s.prevPage != s.pageName){
    if(s_code)document.write(s_code)
} 
```

# c# - 检查网页是否在 C# 中作为进程打开后加载？

> ID：13712584
> 
> 赞同：1
> 
> 时间：2012-12-04T21:51:05.140
> 
> 标签：c#, webpage

我正在使用打开不同的浏览器

```
ProcessStartInfo startBrowser = new ProcessStartInfo(internetbrowser, website);
Process.Start(startBrowser); 
```

效果很好。但是，我还需要知道网页何时加载。有没有办法可以检查这个？或者更好的是，在页面完全加载时触发一个事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:39:49.683

您没有在您的问题中注意到您要使用哪个浏览器。

如果你使用`Internet Explorer`比我有一个很好的解决方案。您需要参考`SHDocVw.dll`下面的示例。

测试代码示例：

```
private void Form1_Load(object sender, EventArgs e)
{
            InternetExplorer explorer = new InternetExplorer();

            object Empty = 0;
            object URL = "http://www.yourwebsite.com"; // Here your URL

            // There are many more events.. But we need this one:
            explorer.DocumentComplete += ExplorerOnDocumentComplete; 

            explorer.Visible = true; // If you wish to see the IE, set it to true.

            // Navigate to the provided URL
            explorer.Navigate2(ref URL, ref Empty, ref Empty, ref Empty, ref Empty);

}

private void ExplorerOnDocumentComplete(object pDisp, ref object url)
{
            // The document loaded completly. 
            // Do your work here.
} 
```

# javascript - jQuery 通知栏

> ID：13712587
> 
> 赞同：0
> 
> 时间：2012-12-04T21:51:15.353
> 
> 标签：javascript, jquery, html, notifications

我正在尝试在结帐页面（FoxyCart 模板）上安装[Noty](http://needim.github.com/noty/)（一个 jQuery 通知插件）。我在结帐模板的部分中安装了以下代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<script type="text/javascript" src="http://lavajavamaui.com/js/noty/jquery.noty.js"></script>

<script type="text/javascript" src="http://lavajavamaui.com/js/noty/layouts/top.js"></script>
<script type="text/javascript" src="http://lavajavamaui.com/js/noty/layouts/topLeft.js"></script>
<script type="text/javascript" src="http://lavajavamaui.com/js/noty/layouts/topRight.js"></script>
<!-- You can add more layouts if you want -->

<script type="text/javascript" src="http://lavajavamaui.com/js/noty/themes/default.js">
</script>
<script type="text/javascript">
var noty = noty({text: 'noty - a jquery notification library!'});
</script> 
```

如果我理解正确，这就是让它正确显示所需要做的一切。由于某种原因，通知没有弹出。这条线有问题吗？

```
<script type="text/javascript">
var noty = noty({text: 'noty - a jquery notification library!'});
</script> 
```

这是应该安装 Noty[的页面。](https://lavajavamaui.foxycart.com/checkout.php?fcsid=pmsf8a8nqsil5bidba5pjdll02)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:09:41.820

您正在重现文档中的错误。线

```
var noty = noty({text: 'noty - a jquery notification library!'}); 
```

如果在全局上下文中运行，则重新定义`noty`，将函数替换为函数`noty`的结果`noty`。从理论上讲，第一次调用应该可以工作，但是任何后续调用都`noty`将失败，因为它们试图将对象作为函数调用。我不确定为什么第一个失败，但它可能是相关的。尝试更改要分配结果的对象的名称：

```
var notyObj = noty({text: 'noty - a jquery notification library!'}); 
```

那可能会解决它。

如果您在创建通知后不需要操作通知，您也应该能够在不将结果分配给变量的情况下调用它：

```
noty({text: 'noty - a jquery notification library!'}); 
```

**更新**

如果您在非全局上下文（例如 jQuery 的事件）中执行该语句，它将因为[变量提升](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var#var_hoisting)`ready`而不起作用。提升获取任何语句并将其移动到语句的顶部。该声明：`var`

```
 (function () {
        var noty = noty({text: 'noty - a jquery notification library!'});
    }()); 
```

变成：

```
 (function () {
        var noty; // inside this function noty now refers
                  // to a local variable set to "undefined"

        // JavaScript looks for local variables before it looks at globals,
        // so it will use the new local "noty" when it tries to execute the
        // right side of this line. This will fail because you
        // can't invoke undefined
        noty = noty({text: 'noty - a jquery notification library!'});
    }()); 
```

# ruby-on-rails - 您如何从“model.rb”中的模型本身引用通用对象以进行 Rails 验证？

> ID：13712597
> 
> 赞同：0
> 
> 时间：2012-12-04T21:51:51.510
> 
> 标签：ruby-on-rails

所以我想做这样的事情，我一直在玩弄语法并环顾四周，但仍然没有雪茄。这可能吗？

```
validates :description, presence: false unless object.attached_model.description == "Custom"

has_many: :attached_model 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:44:38.620

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)

```
validates :description, :presence => true,
    :unless => Proc.new { |a| a.attached_model.description == "Custom" } 
```

我看到 Yoshiji 先生也提到了这一点。您可以在指南中查看更多示例。但是请注意，您无法验证 :presence => false （这没有任何作用）。如果要验证它是否为空白，则需要编写自定义验证器。

```
validate :description_not_present

def description_not_present
  errors.add(:description, "should be blank") if description.present? && a.attached_model.description != "Custom"
end 
```

我在这里使用 attach_model （单数），因为这是您在示例中使用的，如果您只有 has_many 则相应地更改它，就像 MrYoshiji 指出的那样。

# ios - ViewController 委托和 viewWillDisappear 计时问题

> ID：13712598
> 
> 赞同：0
> 
> 时间：2012-12-04T21:52:02.623
> 
> 标签：ios, uiviewcontroller, delegates, null, image-loading

我正在使用 Apple 的惰性加载器代码示例将图像加载到 TableView 中。由于视图控制器位于导航堆栈中，因此用户可以快速滚动，然后点击返回并导航出视图。VC 是 IconDownloader 类的委托，该类执行图像下载，并且我在 VC dealloc 中将 IconDownloader 委托设置为 nil。

但是有一个计时问题，滚动委托 scrollViewDidEndDecelerating 触发，它触发图像加载，但在我的 viewWillDisappear 触发之间，但图像加载事件已经排队。当视图消失时，这会导致崩溃，委托也是如此，但 IconDownloader 无论如何都会触发其委托方法。

所以顺序如下：

1.  scrollViewDidEndDecelerating（调用 loadImagesForOnscreenRows）
2.  视图将消失
3.  loadImagesForOnscreenRows

我还在使用 respondsToSelector 而不是 nil 检查 IconDownloader 中的委托状态。

所以我最终在 viewWillDisappear 中设置了一个布尔值，并将委托设置为 nil。然后在 loadImagesForOnscreenRows 我检查布尔值。我觉得有更好的方法可以做到这一点，但我读过的所有内容都表明我正在正确处理委托。大多数帖子建议不要保留 IconDownloader 的委托。只是想知道其他人对此解决方案的看法。谢谢！

代码：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self loadImagesForOnscreenRows];
}

- (void)loadImagesForOnscreenRows
{
    if ([self.entries count] > 0 && !viewIsDisappearing)
    {
        ...
    }
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    viewIsDisappearing = TRUE;
    self.iconDownloader.delegate = nil;
} 
```

并在 IconDownloader NSURL connectionDidFinishLoading 中：

```
// call our delegate and tell it that our icon is ready for display
if (self.delegate != nil && [self.delegate respondsToSelector:@selector(appImageDidLoad:)])
{
    [delegate appImageDidLoad:self.indexPathInTableView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:20:00.163

离开视图控制器时是否取消所有已处理的下载？

我在 dealloc 方法中所做的是：

```
for all iconDownloaders (I have a list of them){
  iconDownloader.delegate = nil;
  [iconDownloader cancelDownload];
} 
```

其中 cancelDownload 是 iconDownloader 类中的方法，例如：

```
- (void)cancelDownload
{
  [self.connection cancel]; //NSURLConnection
  self.connection = nil;    
  self.receivedData = nil;  //data collected while downloading in NSURLConnection Delegate Methods
} 
```

我用这个例子做了一些小的修改，它对我来说非常好。

我同意您评论中的这句话：“大多数帖子建议不要保留 IconDownloader 的代表。”

# web-sql - 如何在 Web SQL 中执行多个语句？

> ID：13712612
> 
> 赞同：10
> 
> 时间：2012-12-04T21:52:46.267
> 
> 标签：web-sql

有没有办法在单个事务中执行多个语句？我想做类似的事情：

```
db.transaction(function (tx) {
    tx.executeSql(
        "CREATE TABLE Foo(ID INTEGER); CREATE TABLE Bar(ID INTEGER)",
        function (tx, result) {
            alert("success!");
        });
    }); 
```

但相反，我发现我必须这样做：

```
db.transaction(function (tx) {
    tx.executeSql("CREATE TABLE Foo(ID INTEGER)");
    tx.executeSql("CREATE TABLE Bar(ID INTEGER)",
        function (tx, result) {
            alert("success!");
        });
    }); 
```

我是否仅限于必须在自己的事务中执行单个语句，然后在最后一个事务中触发 successFn，或者有没有办法可以在单个事务中执行多个语句？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T23:13:41.887

您的第二个代码已经在单个事务中执行多个语句。第一个代码不正确（不支持），因为不清楚返回回调的结果。

即使支持，性能也是一样的，因为在内部，它必须转换为第二条语句。

# php - 将 Javascript 变量附加到 PHP 变量

> ID：13712615
> 
> 赞同：-5
> 
> 时间：2012-12-04T21:53:05.583
> 
> 标签：php, javascript, variables

我在尝试将数字附加到 PHP 变量的末尾时遇到问题。问题是因为我试图附加的数字存储在 Javascript 变量中。这是我的代码：

```
fields.eq(n).attr('value', "<?php echo $_SESSION['fname_" + countItem + "'] ; ?>"); 
```

这是行不通的。我需要将存储在 Javascript 变量`countItem`中的数字附加到变量的末尾`$_SESSION`。最终`$_SESSION`变量应如下所示：`$_SESSION['fname_1']`. 有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:00:29.213

这里的问题是这个页面被解析的顺序。PHP 将首先在服务器上呈现页面，然后发送到浏览器。然后在客户端执行 javascript。

像这样想。介于两者之间的任何东西

```
echo $_SESSION['fname_" + countItem + "'] ; 
```

我很惊讶这没有引发错误？

你实际上需要做什么（更大的图景）。看起来您正在循环并创建多个元素。如果是这种情况，您应该使用 PHP 来完成所有这些工作吗？

如果没有，那么也许您可以使用 AJAX 调用一个 PHP 页面，该页面将提供会话中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:05:05.920

PHP 是一种服务器端语言，一旦页面被解析，输出就会发送到浏览器，仅此而已。因此，当您的页面加载时，您正在调用：

```
$_SESSION['fname_']; 
```

您将需要使用 AJAX 再次调用服务器。然后，您可以将 javascript 变量传递给服务器并执行您需要的操作。

看看： [http ://api.jquery.com/jQuery.get](http://api.jquery.com/jQuery.get)

# matlab - 评估朴素贝叶斯多类预测的结果

> ID：13712622
> 
> 赞同：2
> 
> 时间：2012-12-04T21:53:30.000
> 
> 标签：matlab, machine-learning, artificial-intelligence

我在 MATLAB（内置）中使用朴素贝叶斯来预测我的数据的类标签值。我的类标签可以具有 {1,2,3,4,5} 中的任何值。我也有 testLabels。如何衡量 testLabels 和 predictLabels 的差异是否良好？

我尝试使用 RMSE。但似乎它给了我 1.87124 的价值

我不知道如何解释这个 RMSE 值？

此外，是否有任何标准的评估方法来评估朴素贝叶斯多类结果？

我知道对于二进制标签类，我可以使用 TPR、FPR、Precision、Accuracy 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:38:11.803

多类问题可以通过标准度量的泛化来评分：准确率显然适用于多类情况，召回率和精度可以通过单独查看每个类来概括。看二元问题会产生误导，因为双向分类任务比五向分类任务容易得多。

RMSE 不是一个合适的度量——考虑如果你像以前那样使用标签 1-5，你会得到 0.74 的 RMSE。但是，由于标签是任意的，您可以置换类标签并为*相同的决策*获得完全不同的 RMSE 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:22:46.560

您可以使用各种指标。对于许多情况，准确性（即 testLabel 与 predictLabel 相等的频率）是一个很好的指标。

您还可以查看[precision 和recall](http://en.wikipedia.org/wiki/Precision_and_recall)，它们测量类似于I 型和II 型错误的东西。

不过，有一件事是肯定的——将 RMSE 应用于这种情况没有任何意义。例如，假设您使用字母 A、B、C、D、E 而不是数字 1、2、3、4、5 来标记数据。这是完全相同的问题（因为标签本身是无意义的），但现在 RMSE不可计算，因为它仅适用于数字。

# delphi - GPS年历与德尔福

> ID：13712623
> 
> 赞同：3
> 
> 时间：2012-12-04T21:53:34.620
> 
> 标签：delphi, gps, coordinates

我需要使用 Delphi 创建一个关于 GPS 年历的应用程序。像这样的东西：

![在此处输入图像描述](../Images/d07cb90c5945b9aeafa0ad132edd19db.png)

我在哪里可以下载数据并阅读它们？（绘制它们）。我的用户必须选择一天和一个纬度/经度位置，然后我需要绘制未来 7 天的 GPS 可用性。我在哪里可以下载这些信息并用delphi阅读它们？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T22:25:13.780

您可以使用`GET`a 中的方法并从以下位置`TIdHTTP`获取文件：[http ://www.navcen.uscg.gov/?Do=gpsArchives](http://www.navcen.uscg.gov/?Do=gpsArchives)

例如：

```
IdHTTP.Get('http://www.navcen.uscg.gov/?Do=gpsArchives&path=almanacs&year=2012&file=8101&type=almanacContent--almanacId&name=001.ALM', ms); 
```

# javascript - 在 CSS 中设置活动状态时遇到问题

> ID：13712626
> 
> 赞同：0
> 
> 时间：2012-12-04T21:53:47.663
> 
> 标签：javascript, html, css

[我在我的网站Click Here](http://bodyworksforme.com/?/shop/view-copy/relax)上有一个活动状态，我可以在 firebug 中获取它。我已经为以下选项卡创建了一个活动状态`Relax and unwind`，我按照以下方式编写了脚本

```
<li {if segment_3 == "relax"} class="active"{/if}><a href="{path='shop/view/relax'}">relax &amp; unwind</a></li> 
```

我试图在 css 中设置此选项卡的样式，但它似乎不起作用。

```
.sub-nav-products li .active{
    color: #fff;
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:54:57.693

删除 and 之间的空格`li`并在之后`.active`添加`a`：

```
.sub-nav-products li.active a {
    color: #fff;
} 
```

此示例将样式设置为锚点在具有“活动”类的列表元素内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:12:51.367

`li`和之间的空间`.active`是[后代组合符](http://www.w3.org/TR/selectors/#descendant-combinators)。所以你的选择器：

```
.sub-nav-products li .active 
```

...表示一个`class="active"`元素是一个元素的后代，而该`<li>`元素又是一个`class="sub-nav-products"`元素的后代。

使用该规则，您的 HTML 必须如下所示：

```
<ul class="sub-nav-products">
    <li>
        <span class="active"></span>
    </li>
</ul> 
```

由于您的目标是`<li>`具有该属性的元素，因此`class="active"`您不想在 and 之间使用组合`li`器`.active`，而是使用[一系列简单的选择器](http://www.w3.org/TR/selectors/#selector-syntax)：

> 简单选择器序列是不被组合器分隔的简单选择器链。

...这意味着您应该删除选择器之间的`li`空格`.active`：

```
.sub-nav-products li.active 
```

可是等等！还有更多：网络浏览器可能有一个锚元素的默认规则`<a>`，并且您正在尝试在锚元素中设置文本样式：

```
<ul class="sub-nav-products">
    <li class="active">
        <a href="#">Example</a>
    </li>
</ul> 
```

您需要直接针对该元素编写具有更高[特异性](http://www.w3.org/TR/selectors/#specificity)`<a>`的规则，所以最后我们正在研究：

```
.sub-nav-products li.active a 
```

# java - 为什么将类设为泛型时，“不兼容的类型”编译错误会变成警告？

> ID：13712628
> 
> 赞同：2
> 
> 时间：2012-12-04T21:53:51.083
> 
> 标签：java, generics

我有这段代码，无法编译：

```
import java.util.ArrayList;
import java.util.List;

public class TypeSafetyTest {

    public static void main(String[] args) {
        TypeSafetyTest test = new TypeSafetyTest();
        test.run();
    }

    private void run() {
        Car car = new Car();
        List<String> wheelWeights = car.getWheelWeights();
    }

    private class Car {
        List<Double> wheelWeights = new ArrayList<Double>();

        public List<Double> getWheelWeights() {
            return wheelWeights;
        }

        public void setWheelWeights(List<Double> wheelWeights) {
            this.wheelWeights = wheelWeights;
        }
    }
} 
```

它在行上给出了“不兼容的类型”错误：

```
List<String> wheelWeights = car.getWheelWeights(); 
```

但是，如果我换行：

```
private class Car { 
```

到

```
private class Car<T> { 
```

然后代码成功编译，并在曾经出现编译错误的行上显示警告“未检查的分配”。为什么会这样？我期待它在这两种情况下都会出现编译错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:54:55.953

我看到的一个问题是：

```
 public List<Double> getWheelWeights() {
            return wheelWeights;
        } 
```

返回`Double`type `List`，但您将其分配给`List<String>`

更改时没有看到编译错误的原因`Car<T>`是，因为您的实例创建是原始类型，这告诉编译器由于向后兼容性而在编译时忽略类型安全。

```
Car<Object> car = new Car<Object>(); 
```

如果您像这样更改您的对象，那么您将看到编译器再次抛出该消息。

请参阅[JLS 4.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)了解更多信息。

以下是 JLS 的示例：

```
 class Outer<T>{
        class Inner<S> {
            S s;
        }
    }

Outer.Inner<Double> x = null;  // illegal 
```

不可能将 Inner 作为部分原始类型（“稀有”类型）访问，因为 Outer 本身是原始的，因此它的所有内部类（包括 Inner）也是如此，因此不可能将任何类型参数传递给 Inner

仅允许使用原始类型作为对遗留代码兼容性的让步。**强烈反对在将泛型引入 Java 编程语言之后编写的代码中使用原始类型。**Java 编程语言的未来版本可能不允许使用原始类型。

我建议阅读[泛型（更新）](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T22:16:41.837

当您更改`Car`为 时`Car<T>`，`Car`将成为一个泛型类。因此，您的`car`对象现在具有原始类型`Car`，因为您没有提供任何类型参数。原始类型的非静态非继承成员也是原始类型。这意味着`getWheelWeights()`现在返回一个原始类型。而且由于它是原始类型，因此它会进行未经检查的转换，这意味着您只会收到警告，而不是错误。

您可以通过为`car`. 例如

```
Car<Object> car = new Car(); 
```

请注意，如果您想要泛型的类型安全优势，则根本不应该使用原始类型。它们只是对预通用代码的兼容性修复，因此具有传染性并且缺乏对原始类型的检查。

# ruby-on-rails - ruby 类作为方法中的参数

> ID：13712631
> 
> 赞同：0
> 
> 时间：2012-12-04T21:53:54.917
> 
> 标签：ruby-on-rails, ruby

我在 ruby​​ on rails 应用程序中有这个类

```
class ChartData
  def self.user_logs_by_day(logs)
    days_with_hours = Hash.new{|h, k| h[k] = Hash.new(&h.default_proc)}
      logs.each do |log|
        days_with_hours[log.user.name][log.log_date] = log.total_hours
      end
    days_with_hours
  end

  def self.project_logs_by_day(logs)
    days_with_hours = Hash.new{|h, k| h[k] = Hash.new(&h.default_proc)}
      logs.each do |log|
        if !log.project.nil?
          days_with_hours[log.project.name][log.log_date] = log.total_hours
        else
          days_with_hours[@default][log.log_date] = log.total_hours
        end
      end
    days_with_hours
  end
end 
```

我想像这样把这两种方法合二为一，因为我想在很多模型上都使用这种方法。

```
class ChartData
  def self.logs_by_day(logs, klass)
    days_with_hours = Hash.new{|h, k| h[k] = Hash.new(&h.default_proc)}
      logs.each do |log|
        if !log.klass.nil?
          days_with_hours[log.klass.name][log.log_date] = log.total_hours
        else
          days_with_hours[@default][log.log_date] = log.total_hours
        end
      end
    days_with_hours
  end
end 
```

我想将类或模型传递给这样的方法

```
ChartData.logs_by_day(logs, Project) 
```

如何处理模型中的参数 Project 使其成为日志上的实例方法？

相当笨拙的尝试

```
1.9.3p125 :026 > Project.name.downcase
 => "project" 
```

好点？欢迎其他重构建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:57:34.803

你为什么想通过这门课？你没有在任何地方使用它。传递一个符号。

```
ChartData.logs_by_day(logs, :project) 
```

进而

```
def self.logs_by_day(logs, prop)
  # ...
  log.send(prop).name
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:51:55.887

For Rails, what you probably want is something like `klass.name.underscore`. This and its counterpart `camelize` are designed to convert between method-style naming conventions and module-style naming conventions. In particular, this will work with class names like "UserData", which should be "user_data" rather than the "userdata" you'd get from just downcasing. You can then pass it as the method selector to `send`.

# parsing - Scala 2.9：是否有记录所有 ParseResults 的简单方法？

> ID：13712632
> 
> 赞同：3
> 
> 时间：2012-12-04T21:54:04.873
> 
> 标签：parsing, scala

我已经使用`scala.util.parsing.combinators.Parsers`. 我的作品中至少有一个错误，但我有太多的错误，以至于很难通过眼球来确定问题。

我需要的是我的解析器每次尝试将输入与任何产品匹配的日志；在实例化所有成功和失败对象时记录它们会很可爱。不幸的是，我能看到的唯一方法是扩展库提供的许​​多基本类，然后重写我的大型解析器来扩展新类。

有没有一种简单的方法来获得这种日志记录行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:38:32.993

您可以使用`log`组合器来包装语法的产生。这是 中的定义`Parsers.scala`：

```
def log[T](p: => Parser[T])(name: String): Parser[T] = Parser{ in =>
  println("trying "+ name +" at "+ in)
  val r = p(in)
  println(name +" --> "+ r)
  r
} 
```

否则，我认为您应该能够覆盖`success`and `failure`，但这将提供相当多的信息，因为您不知道生产调用它们的内容。

# java - 如何在 Java 中的列表数组中存储三个不同的对象

> ID：13712648
> 
> 赞同：-2
> 
> 时间：2012-12-04T21:55:05.073
> 
> 标签：java, arrays, object, arraylist

我需要在 java 中创建一个列表数组，它可以容纳三个不同的对象（姓氏、名字、结果）并且想知道如何做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:57:30.587

最好的也是面向对象的方法是创建一个具有姓氏、名字和结果的类作为属性（实例变量），如下所示：

```
class Student{
private String surname;
private String forename;
private String result;
public Details(String surname, String forename, String res){
   //initialize properties here
  }
} 
```

现在，创建一个只接受`Student`对象的列表。

```
List<Student> list = new ArrayList<Student>();
list.add(new Student("surname", "forname", "pass")); 
```

# ruby-on-rails - 如何将方法添加到 gem 中的现有类？

> ID：13712649
> 
> 赞同：2
> 
> 时间：2012-12-04T21:55:09.227
> 
> 标签：ruby-on-rails

我正在尝试使用这样的常规类方法访问哈希：

> 哈希键

但我得到这个错误：

> {:key1=>"value1", :key2=>"value2"}:Hash 的未定义方法 `key1'

[我按照这里](http://www.intridea.com/blog/2007/8/7/bending-ruby-i-user-friendly-hashes-using-method_missing)的建议在 Hash 类中定义了一个“method_missing” ：

```
class Hash
  def method_missing(method, *params)
    method = method.to_sym
    return self[method] if self.keys.collect(&:to_sym).include?(method)
    super
  end
end 
```

我肯定知道，当我调用“aHash.key”时，它不使用我定义的哈希。如果我查看我的宝石上的一个，它会显示：

> 需要“activerecord-postgres-hstore/hash”

所以我检查了这个文件，确实他们已经实现了另一个哈希。我相信我应该在其中添加“method_missing”，但可以在不修改 gem 的情况下完成吗？

也许我不明白类重载如何与 ruby​​ 一起工作，所以答案可能是别的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:20:24.203

就像 SporkInventor 说的那样，你所做的是非常危险和不好的做法，你不应该修补 Hash。相反，就像他说的，使用 Ruby 标准库中的 OpenStruct。如果需要，请更改代码以在返回时将 Hash 包装到 OpenStruct 中。

```
require 'ostruct'
result = OpenStruct.new({ :a => 1, :b => 2 })
result.a # => 1 
```

因此，如果您真的需要猴子补丁，而不是猴子补丁返回哈希的方法以将结果包装在 OpenStruct 中，而不是修补哈希。或者，如果您需要它真正成为一个哈希（obj.is_a？哈希 #=> true），然后使用您的 method_missing 实现创建哈希的子类，然后对返回哈希的方法进行猴子补丁以返回您的 OpenHash（或您调用的任何内容）它）。

```
class OpenHash < Hash
  def self.from_hash(hash)
    h = OpenHash.new
    h.merge!(hash)
    h
  end

  def method_missing(method, *params)
    method = method.to_sym
    return self[method] if self.keys.collect(&:to_sym).include?(method)
    super
  end
end 
```

对于（组成）示例，您有一个 Hstore 类，该类具有返回哈希的方法 return_hash。然后像这样修补它：

```
class Hstore
  def return_hash_with_ostruct
    OpenStruct.new(return_hash_without_ostruct)
  end
  alias_method_chain :return_hash, :ostruct
end
Hstore.new.return_hash.class # => OpenStruct 
```

猴子补丁标准库是非常糟糕的做法！

# jboss - 是什么导致 com.sun.identity.agents.arch.AgentException 并在 JBoss 代理中显示“无效传输字符串”的消息？

> ID：13712650
> 
> 赞同：0
> 
> 时间：2012-12-04T21:55:11.193
> 
> 标签：jboss, openam

> com.sun.identity.agents.arch.AgentException：com.sun.identity.agents.util.TransportToken.initializeFromString(TransportToken.java:135) 在 com.sun.identity.agents.util.TransportToken.( TransportToken.java:115) 在 com.sun.identity.agents.common.SSOTokenValidator.validate(SSOTokenValidator.java:99) 在 com.sun.identity.agents.realm.AmRealm.authenticate(AmRealm.java:141) 在 com .sun.identity.agents.jboss.v40.AmJBossLoginModule.validatePassword(AmJBossLoginModule.java:88) 在 org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:249) 在 sun.reflect.NativeMethodAccessorImpl.invoke0 （本机方法）在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect。DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 javax.security.auth.login.LoginContext.invoke(LoginContext.java:769) 在 javax.security .auth.login.LoginContext.access$000(LoginContext.java:186) at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683) at java.security.AccessController.doPrivileged(Native Method) at javax .security.auth.login.LoginContext.invokePriv(LoginContext.java:680) at javax.security.auth.login.LoginContext.login(LoginContext.java:579) at org.jboss.security.plugins.auth.JaasSecurityManagerBase.defaultLogin (JaasSecurityManagerBase.java:552) 在 org.jboss.security.plugins.auth.JaasSecurityManagerBase.authenticate(JaasSecurityManagerBase.java:486) 在 org.jboss.security.plugins.JaasSecurityManager.isValid(JaasSecurityManager.java:160) 在 org.jboss.web.tomcat 的 org.jboss.security.plugins.auth.JaasSecurityManagerBase.isValid(JaasSecurityManagerBase.java:365) .security.JBossWebRealm.authenticate(JBossWebRealm.java:384) 在 org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:258) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:417 ) 在 org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126) 在 org.jboss.web 的 org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)。 tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.jboss.web.tomcat.service 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) .jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330 ) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 在 org.apache.tomcat.util 的 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)。 net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread.run(Thread.java:662)StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java: 158) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor 的 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 中的 .process(Http11Processor.java:829) org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java :447) 在 java.lang.Thread.run(Thread.java:662)StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java: 158) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor 的 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 中的 .process(Http11Processor.java:829) org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java :447) 在 java.lang.Thread.run(Thread.java:662)ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java: 109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.process(Http11Protocol.java:598) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Thread.java:662)ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java: 109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.process(Http11Protocol.java:598) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Thread.java:662)core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread .run(Thread.java:662)core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread .run(Thread.java:662)java.lang.Thread.run(Thread.java:662) 处的 tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)java.lang.Thread.run(Thread.java:662) 处的 tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:51:39.640

Based on the stacktrace it looks like you may try to use an application-client with your application that has enabled the AMRealm in its security-domain configuration (and/or AMRealm is the default security domain).

The transport string is basically the password that is being provided to the JAAS login module. I suppose you wanted to authenticate on your own (since the filter cannot be found on the stacktrace I'm guessing that this is not a web request..). Without any further info it is hard to help to diagnose your problem..

# iphone - Quick Look 和 UIWebView 支持的文件类型

> ID：13712652
> 
> 赞同：6
> 
> 时间：2012-12-04T21:55:24.650
> 
> 标签：iphone, ios, ios6, uiwebview, quicklook

是否有更新的文件类型列表可以使用**iOS 6.0**`UIWebView`附带的显示？我知道[Apple 文档](https://developer.apple.com/library/ios/#qa/qa2008/qa1630.html)和关于此主题[的较早问题。](https://stackoverflow.com/questions/1320220/file-formats-supported-by-uiwebview)但是，两者都已过时，并且未列出所有支持的类型。例如，可以使用和类型显示但未在文档中列出。同样的问题也适用于 Quick Look 类型。 [它的文档](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)自 2010 年以来也没有更新。**`.mov``.m4a``UIWebView`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T17:33:52.113

UIWebView 的后端是 WebKit（Safari 和其他主要浏览器使用相同的东西。）无论 WebKit 支持什么，UIWebView 也都支持。

这在它如何显示/渲染页面、HTML-5 等方面也是如此。

*注意*：请记住哪个版本的 WebKit 在哪个版本的 iOS 中。我认为它不会经常更改，但是当主要功能更新出现时要牢记这一点。**

# r - data.table 挑战：为经常性事件定义分层变量

> ID：13712656
> 
> 赞同：1
> 
> 时间：2012-12-04T21:55:45.990
> 
> 标签：r, data.table

我正在尝试为经常性事件创建一个名为 strata 的变量。这个想法是定义一个变量来计算事件，但填充以前的记录。定义计数的是变量事件，如下所示：

```
id event   cov    strata      year
1   0       0        1        12
1   0       1        1        13
1   1       1        1        14
1   0       1        2        15
1   1       0        2        16
1   1       1        3        17
1   0       0        4        18
1   0       1        4        19
1   0       1        4        20 
```

我至少为事件记录尝试过这样的事情：

```
id  <- c(rep(1,9), rep(2,5), rep(3,7))
event  <- c(0,0,1,0,1,1,0,0,0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1)
cov  <- c(0,1,1,1,0,1,0,1,1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1)
year  <- c(seq(12,20,1), seq(12,16,1), seq(12,18,1)) 
dat  <- data.table(id,event, cov, year)

dat[,strata:=seq(.N),by="id"] 
```

但它不起作用。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:25:51.860

这是一个更新的解决方案。

```
dat  <- data.table(id,event, cov, year)
dat[, strata := c(1L,head(cumsum(event)+1L,-1L)), by = id] 
```

# c++ - 如何使模板函数头更短

> ID：13712664
> 
> 赞同：1
> 
> 时间：2012-12-04T21:56:27.737
> 
> 标签：c++, templates

我有一个模板类，我们称之为 foo。在实施中，我有：

```
template<class a, class b ... class x>
void foo<a, b, ..., x>::function1() { }

template<class a, class b ... class x>
void foo<a, b, ..., x>::function2() { } 
```

现在我想让它更易于阅读。我可以做类似 typedef 的事情来定义一个东西

```
template<class a, class b... class x> foo<a, b, ..., x> 
```

那么让上面的函数头更简单（更短）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:02:52.813

第一个问题是，你的类模板真的需要那么多参数吗？如果是这样，它们可以以某种方式打包吗？

其次，如果定义所有函数的样板文件超出了实际代码的范围，为什么不在类定义中内联定义它们呢？是的，有些人认为这种风格通常很糟糕，但这是一种权衡——该指南的目标是使您的代码更具可读性，如果它产生相反的效果，请忽略它。

即使您想将实现保留在一个单独`.ipp`的文件中，该文件包含在`.hpp`文件末尾以便更好地组织代码，您也可以将其更改为`.ipp`在中间包含：

foo.hpp：

```
template <class a, class b ... class x>
class foo {
  #include "foo_impl.ipp"
}; 
```

foo_impl.ipp：

```
void function1() {}
void function2() {} 
```

如果这些想法都不吸引您，那么 typedef 或模板别名将无济于事，因为这是为模板的特化命名。无论您做什么，任何仍然免费的模板参数仍然必须列出，否则编译器将不知道您在说什么。

但是你总是可以使用预处理器：

```
#define FOOMETHOD(rettype) template<class a, class b ... class x> \
                           rettype foo<a, b, ..., x>

FOOMETHOD(void)::function1() { }
FOOMETHOD(void)::function2() { } 
```

有很多方法可以修改它——把 放入`::`宏中，把它分成两个宏，这样你就不需要传入 rettype，为每种类型定义一个不同的宏，等等。任何看起来最适合你的使用案例，这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:26:04.557

在 C++ 中，您有点卡在这里，因为您的问题没有直接的解决方案。您可以内联定义函数以避免键入参数，或者将所有类型打包到策略类中：

```
struct Policy1
{
    typedef int B;
    typedef double B;
    typedef Foo C;
};

template<class Policies>
void foo<Policies>::function1() { }

foo<Policy1> FooObject; 
```

综上所述，对于许多模板参数，我强烈建议对您的设计进行双重检查和三重检查。所有参数*真的*必须彼此独立变化吗？如果是这样，您可能会得到成百上千个类的实例化。

# azure - 在 azure 计算模拟器中停止实例

> ID：13712666
> 
> 赞同：1
> 
> 时间：2012-12-04T21:56:32.933
> 
> 标签：azure, azure-web-roles

我正在调试一个使用 azure webrole 托管的网站。它配置为使用两个实例运行。现在我想在调试时停止其中一个模拟器实例，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:34:48.580

前段时间我在博客上写过：[Controlling your instances in the Windows Azure Compute Emulator](http://fabriccontroller.net/blog/posts/controlling-your-instances-in-the-windows-azure-compute-emulator/)。在撰写本文时，我使用的是 1.7 版的 SDK。我注意到，在使用 SDK 1.8 时，在调试时终止实例确实可以正常工作。

因此，如果您想在模拟器中缩小规模，您需要运行以下命令来引用更新的 ServiceConfiguration.csconf 文件（实例数 = 1 而不是 2）：

```
csrun.exe /update:<deployment-id>;<service-configuration-file> 
```

**您还可以通过终止WaIISHost.exe**进程来模拟其中一个实例的故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:22:31.007

您可以缩减到 1 个实例或在实例页面中停止

[http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-scale-a-cloud-service/](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-scale-a-cloud-service/)

# spring - Spring中类似CDI的对话范围

> ID：13712669
> 
> 赞同：2
> 
> 时间：2012-12-04T21:56:40.200
> 
> 标签：spring, jsf-2

一段时间以来，我一直在开发 Spring 3 + JSF 2.0 应用程序。它们在简单的 Tomcat 或 Jetty 容器上运行。看着广告 CDI，我很羡慕对话范围。

你知道 Spring 的简单对话范围实现吗？我不想使用成熟的 SpringMVC + WebFlow + SpringFaces 堆栈。我只需要一个启用对话范围并让我注入对话对象并启动或停止它的 Web 过滤器。就像在 CDI 中一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:10:38.803

不完全是您的问题，但由于您要求解决方案以避免使用 Spring Webflow、Spring Faces 等……看起来您只是将 Spring 用于 DI（我的意思是您并不那么依赖在 Spring 生态系统上）。好吧，也许在这种情况下，考虑迁移到 Java EE 6 堆栈是值得的。我认为迁移不会那么困难，因为您使用的 Spring 并不多，而且如果您在 spring 中有仍然需要的 bean，您可以为它们编写一些 CDI 生产者。您可以搜索一些从 Spring 到 Java EE 6 的迁移路径。

如果你害怕“沉重的 Java EE 容器”，那么 jboss 7.1、Glassfish 3.1.2 和 TomEE 都可以在 2 秒内在我的笔记本上启动，我敢打赌你的 tomcat + spring 容器不会启动得更快。

只是我的观点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:26:25.710

你应该看看 Apache TomEE + CODI 项目（Apache MyFaces 的主题）和/或 Apache Deltaspike（不确定文档是最新的，因为它还很年轻）

TomEE 为您提供了 CDI 的优势，CODI 在 cdi 和 jsf 之间添加了一个小型集成层，使其非常强大（它将集成到 deltaspike 中，但仍在进行中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:24:40.533

MyFaces Orchestra（也与 Mojarra 一起使用）是目前 JSF 2.0 在 Spring 之上的最佳对话范围实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:16:08.990

在托管 bean 上使用 JSF`@ViewScoped`注释，它为您提供与 CDI 对话范围相同的类似对话的语义。CDI 的对话范围和 JSF 的视图范围之间的一个区别是，CDI 为您提供了对对话的明确和直接的控制，而 JSF 视图范围几乎可以使用。但是使用 JSF 的 ViewScope，您可以准确地知道对话的边界在哪里：当您加载一个由`@ViewScoped`bean 支持的页面时，对话开始，并在页面关闭时结束。这对于许多用例都很方便

Primefaces 的 Cagatay 也有[这个 hack](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0)来模拟 Spring 中的 CDI 范围。

[Richfaces 团队的 Max Katz 的本教程](http://mkblog.exadel.com/2009/08/learning-jsf2-managed-beans/)也很好地介绍了 JSF ViewScope

# fortran - 错误：(1) 和 (2) 处的两个主程序

> ID：13712670
> 
> 赞同：0
> 
> 时间：2012-12-04T21:56:50.953
> 
> 标签：fortran

我正在使用 Simply Fortran 编译器，当我尝试编译时出现错误：

prog.f95:35.13:
1 隐式无

prog.f95:53.65:
2 打开 (unit=1,file='in',status='OLD') ！打开带有参数的文件

错误：(1) 和 (2) 处的两个主程序

我只包含了发生错误的代码部分，因为整个事情很长。这从程序的最开始就开始了。让我知道我是否应该包括更多。

```
Implicit None
Integer :: i,j,iter
real(8) :: Elow,Ehigh,chi,B_NS,Vbrprof,Neprof,taues
real(8) :: Xcyclave,a

character(8) systemdate
character(10) systemtime
character(5) timezone
integer dateandtime(8)

character(8) systemdate2
character(10) systemtime2
character(5) timezone2
integer dateandtime2(8)

character(len=40) ::  infname,outfname,comm
include 'common.f95'

open (unit=1,file='in',status='OLD')    ! opens file with parameters

read (1,1)                              ! comment line
read (1,1) outfname
read (1,*) Elow,Ehigh                   ! lower and higher energy
read (1,*) Eminf,Emind,Emaxf            ! min and max energy for fedd
read (1,*) Rin, Rout                    ! inner and outer radii
read (1,*) profpar(1)                   ! for Ne
read (1,*) profpar(2)                   ! Te in keV
read (1,*) profpar(3)                   ! for absorption+emission
read (1,*) profpar(4)                   ! T_bb for neutron star in keV
read (1,*) profpar(5)                   ! for bulk velocity
read (1,*) profpar(6)                   ! other parameter for model
read (1,*) profpar(10)                  ! magnetic moment in 10^27 CGS
1 format (A10)
close (1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:59:19.490

编译器可能会在文件 common.f95 中看到一条 END xxx 语句。文件 common.f95 可能不打算用作 INCLUDE 文件 - 它本身可能是一个程序单元。

# c++ - 在 Boost.Spirit 开始之前解析短语的结尾

> ID：13712671
> 
> 赞同：2
> 
> 时间：2012-12-04T21:56:53.997
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试让 Boost.Spirit 解析 MSVC 损坏的符号。它们采用以下形式：

`?myvolatileStaticMember@myclass@@2HC` 这意味着“volatile int myclass::myvolatileStaticMember”。

解析的“关键”是符号“@@”处的双精度。@@ 之前是符号的名称，它由一个 C++ 标识符组成，后跟零个或多个“@”附加标识符，以完全表示其绝对命名空间层次结构中的符号。@@ 之后是标识符是什么（变量、函数等）的规范。

现在，我可以让 Boost.Spirit 解析@@ 之前的*部分或**@@*之后的部分。我还没有弄清楚如何让 Boost.Spirit 找到 @@ 并将之前的内容提供给一个自定义解析器，并将之后的内容提供给不同的自定义解析器。

 *这是@@之前部分的解析器：

```
// This grammar is for a MSVC mangled identifier
template<typename iterator> struct msvc_name : grammar<iterator, SymbolType(), locals<SymbolType, string>>
{
    SymbolTypeDict &typedict;
    void name_writer(SymbolType &val, const string &i) const { val.name=i; }
    void dependent_writer(SymbolType &val, const string &i) const
    {
        SymbolTypeDict::const_iterator dt=typedict.find(i);
        if(dt==typedict.end())
        {
            auto _dt=typedict.emplace(make_pair(i, SymbolType(SymbolTypeQualifier::None, SymbolTypeType::Namespace, i)));
            dt=_dt.first;
        }
        val.dependents.push_back(&dt->second);
    }
    // These work by spreading the building of a templated type over multiple calls using local variables _a and _b
    // We accumulate template parameters into _a and accumulate mangled symbolness into _b
    void begin_template_dependent_writer(SymbolType &, SymbolType &a, string &b, const string &i) const
    {
        a=SymbolType(SymbolTypeQualifier::None, SymbolTypeType::Class, i);
        b=i;
    }
    void add_template_constant_dependent_writer(SymbolType &a, string &b, long long constant) const
    {
        string i("_c"+to_string(constant));
        SymbolTypeDict::const_iterator dt=typedict.find(i);
        if(dt==typedict.end())
        {
            auto _dt=typedict.emplace(make_pair(i, SymbolType(SymbolTypeQualifier::None, SymbolTypeType::Constant, to_string(constant))));
            dt=_dt.first;
        }
        a.templ_params.push_back(&dt->second);
        b.append(i);
    }
    void add_template_type_dependent_writer(SymbolType &a, string &b, SymbolTypeType type) const
    {
        string i("_t"+to_string(static_cast<int>(type)));
        SymbolTypeDict::const_iterator dt=typedict.find(i);
        if(dt==typedict.end())
        {
            auto _dt=typedict.emplace(make_pair(i, SymbolType(SymbolTypeQualifier::None, type)));
            dt=_dt.first;
        }
        a.templ_params.push_back(&dt->second);
        b.append(i);
    }
    void finish_template_dependent_writer(SymbolType &val, SymbolType &a, string &b) const
    {
        SymbolTypeDict::const_iterator dt=typedict.find(b);
        if(dt==typedict.end())
        {
            auto _dt=typedict.emplace(make_pair(b, a));
            dt=_dt.first;
        }
        val.dependents.push_back(&dt->second);
    }
    msvc_name(SymbolTypeDict &_typedict) : msvc_name::base_type(start), typedict(_typedict)
    {
        identifier=+(char_ - '@');
        identifier.name("identifier");
        template_dependent_identifier=+(char_ - '@');
        template_dependent_identifier.name("template_dependent_identifier");
        dependent_identifier=+(char_ - '@');
        dependent_identifier.name("dependent_identifier");
        start = identifier [ boost::phoenix::bind(&msvc_name::name_writer, this, _val, _1) ] >> *(
            lit("@@") >> eps
            | (("@?$" > template_dependent_identifier [ boost::phoenix::bind(&msvc_name::begin_template_dependent_writer, this, _val, _a, _b, _1) ])
                > "@" > +(( "$0" > constant [ boost::phoenix::bind(&msvc_name::add_template_constant_dependent_writer, this, _a, _b, _1) ])
                    | type [ boost::phoenix::bind(&msvc_name::add_template_type_dependent_writer, this, _a, _b, _1) ])
                >> eps [ boost::phoenix::bind(&msvc_name::finish_template_dependent_writer, this, _val, _a, _b) ])
            | ("@" > dependent_identifier [ boost::phoenix::bind(&msvc_name::dependent_writer, this, _val, _1) ]))
            ;
        BOOST_SPIRIT_DEBUG_NODE(start);
        start.name("msvc_name");
        on_error<boost::spirit::qi::fail, iterator>(start,
            cerr << boost::phoenix::val("Parsing error: Expected ") << _4 << boost::phoenix::val(" here: \"")
                << boost::phoenix::construct<string>(_3, _2) << boost::phoenix::val("\"") << endl);
    }

    rule<iterator, SymbolType(), locals<SymbolType, string>> start;
    rule<iterator, string()> identifier, template_dependent_identifier, dependent_identifier;
    msvc_type type;
    msvc_constant<iterator> constant;
}; 
```

你会注意到“lit("@@") >> eps”，我试图让它在看到@@时停止匹配。现在这里是应该匹配一个完整的损坏符号的部分：

```
template<typename iterator> struct msvc_symbol : grammar<iterator, SymbolType()>
{
    SymbolTypeDict &typedict;
    /* The key to Microsoft symbol mangles is the operator '@@' which consists of a preamble
    and a postamble. Immediately following the '@@' operator is:
    Variable:
    3<type><storage class>
    Static member variable:
    2<type><storage class>
    Function:
    <near|far><calling conv>[<stor ret>]   <return type>[<parameter type>...]<term>Z
    <Y   |Z  ><A|E|G       >[<?A|?B|?C|?D>]<MangledToSymbolTypeType...>      <@>Z
    Member Function:
    <protection>[<const>]<calling conv>[<stor ret>]   <return type>[<parameter type>...]<term>Z
    <A-V       >[<A-D>  ]<A|E|G       >[<?A|?B|?C|?D>]<MangledToSymbolTypeType...>      <@>Z
    */
    msvc_symbol(SymbolTypeDict &_typedict) : msvc_symbol::base_type(start), typedict(_typedict), name(_typedict), variable(_typedict)
    {
        start="?" >> name >> ("@@" >> variable);
        BOOST_SPIRIT_DEBUG_NODE(start);
        on_error<boost::spirit::qi::fail, iterator>(start,
            cerr << boost::phoenix::val("Parsing error: Expected ") << _4 << boost::phoenix::val(" here: \"")
                << boost::phoenix::construct<string>(_3, _2) << boost::phoenix::val("\"") << endl);
    }

    rule<iterator, SymbolType()> start;
    msvc_name<iterator> name;
    msvc_variable<iterator> variable;
}; 
```

所以，它匹配“？” 很容易;)。问题是它在“？”之后发送所有内容。到 msvc_name 解析器，所以不是从 @@ 开始的位到 msvc_variable，其余部分到 msvc_name，msvc_name 消耗直到并包括 @@ 的所有内容。这不直观，因为人们会认为括号意味着首先做那件事。

因此，如果我替换： `start="?" >> name >> ("@@" >> variable);` 与 `start="?" >> name >> variable;` ... 一切正常。

但是我真的不想这样做。理想情况下，我希望 Boost.Spirit 在 @@ 在 msvc_symbol 中干净利落地拆分，并按原样“做正确的事”。我在想我可能没有足够的递归思考？无论哪种方式，我都很难过。

注意：是的，我知道我可以在@@ 处断开字符串并运行两个单独的解析器。这不是我要问的——相反，我要问的是如何配置 Boost.Spirit 以在开始之前解析短语的结尾。

另请注意：我知道可以使用船长来制作 @@ 空格并以这种方式进行拆分。问题是@@ 之前的内容非常具体，@@ 之后的内容也是如此。因此它不是真正的空白。

非常感谢任何可以提供帮助的人。通过在 Google 和 Stackoverflow 上搜索与此相关的问题，克服 Boost.Spirit 的“从左到右的贪婪”是很多人的难题。

尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:39:48.520

看起来你可以做很多事情：

1.  明确禁止您期望“@”的双“@@”。也可以看看

    *   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/difference.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/difference.html)
    *   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/not_predicate.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/not_predicate.html)
2.  首先标记化（使用 Spirit Lex？）

在这里，我向您展示了第一种方法的工作示例：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
namespace qi = boost::spirit::qi;

template<typename T> T reversed(T c) {  return T(c.rbegin(), c.rend()); }

int main (int argc, char** argv)
{
    const std::string input("?myvolatileStaticMember@myclass@@2HC");

    auto f = begin(input), l = end(input);

    auto identifier = +~qi::char_("@");
    auto delimit    = qi::lit("@") - "@@";

    std::vector<std::string> qualifiedName;
    std::string typeId;

    if (qi::parse(f,l,
                '?' >> identifier % delimit >> "@@" >> +qi::char_,
                qualifiedName,
                typeId))
    {
        using namespace boost::spirit::karma;
        qualifiedName = reversed(qualifiedName);
        std::cout << "Qualified name: "  << format(auto_ % "::" << "\n", qualifiedName);
        std::cout << "Type indication: '" << typeId << "'\n";
    }
} 
```

输出：

```
Qualified name: myclass::myvolatileStaticMember
Type indication: '2HC' 
```*

# python - 当 `func = func.__call__` 被执行时，Python 会发生什么？

> ID：13712672
> 
> 赞同：3
> 
> 时间：2012-12-04T21:56:53.573
> 
> 标签：python, testing, attributes, crash, call

最近在 Python 中我想到了一些东西：`x = y(z)`相当于`x = y.__call__(z)`. 但是，测试似乎使该假设无效，并且还导致 Python 的解释器崩溃。

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> def ret(*args):
...     return args
...
>>> ret(1, 2, 3)
(1, 2, 3)
>>> for _ in range(1000000):
...     ret = ret.__call__
...
>>> ret(1, 2, 3) 
```

运行第二个`ret(1, 2, 3)`会导致 Python 崩溃并返回到命令提示符 ( [image](https://docs.google.com/drawings/d/1FzdeqB6Lsz1iEYM327_0BL7I-12ukD2A6JowdlrhrA0/edit) )。

1.  当行`ret = ret.__call__`执行时，后台发生了什么？
2.  为什么 Python 在最后一行停止工作，应该将其报告为错误？

**无用参考：** [Python 函数及其`__call__`属性](https://stackoverflow.com/questions/9707600)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:16:26.040

您正在创建方法包装器的深度嵌套结构。每个方法包装器仍然有一个对 的引用`self`，其中`self`是对父方法包装器的引用，一直回到原始函数：

```
>>> ret, ret.__call__.__self__
(<function ret at 0x10f17a050>, <function ret at 0x10f17a050>)
>>> ret.__call__, ret.__call__.__call__.__self__
(<method-wrapper '__call__' of function object at 0x10f17a050>, <method-wrapper '__call__' of function object at 0x10f17a050>) 
```

注意方法包装器`__self__`属性的内存地址如何指向父对象。

如果您创建足够多的这些包装器，您可能会耗尽内存。

Python 为绑定到实例的所有函数创建这样的包装器。对于具有方法的自定义类也是如此：

```
>>> class Foo: 
...     def bar(self): return
... 
>>> Foo().bar
<bound method Foo.bar of <__main__.Foo object at 0x10f1798d0>>
>>> Foo().bar, Foo().bar.__self__
(<bound method Foo.bar of <__main__.Foo object at 0x10f179710>>, <__main__.Foo object at 0x10f179850>) 
```

当通过属性访问访问方法时，方法是根据需要从函数创建的。因为它们持有对 的引用`self`，所以只要您持有对它们的引用，它们就会保留在内存中。因此，您的引用链拥有 100000 个内存包装器。

# c++ - C/C++ 中用于多个可变大小数组的数据结构

> ID：13712673
> 
> 赞同：-1
> 
> 时间：2012-12-04T21:56:58.453
> 
> 标签：c++, memory-management, data-structures

这是手头的问题：
我有几万个数组。每个数组的长度可以在 2-15 个单位之间。可以使用一些非常低成本的计算来计算所有数组中所有元素的总长度和数组的数量。但是在完成一些相当昂贵的计算之前，每个数组中的确切数字是未知的。

由于我知道所有数组中所有元素的总长度，我想只使用一个 new/malloc 为其分配数据，并在此分配中设置指针。在我当前的实现中，我使用 memmove 在插入某个项目后移动数据并相应地更新所有指针。

有没有更好的方法来做到这一点？

谢谢，

*   席德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:19:41.597

目前尚不清楚您所说的更好的方法是什么意思。如果您正在寻找运行速度更快并且可以提供一些额外内存的东西，那么您可以保留两个数组，一个包含数据，另一个包含它所属数组的索引。添加完所有数据后，您可以按索引排序，然后将所有数据按数组拆分，最后扫描数组并获取指向每个数组所属位置的指针。

关于内存消耗，取决于你有多少数组，以及你的数据有多大，你可以将索引数据压缩到数据的最后一位，如果你有一些数字限制的话。这样，您只需要对数字进行排序，当您扫描检索每个数组开始的指针时，您可以清除最高位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:19:20.127

> 由于我知道所有数组中所有元素的总长度，我想只使用一个 new/malloc 为其分配数据，并在此分配中设置指针。

您可以使用一个大向量。您需要自己手动计算每个子数组的偏移量。

向量保证它们的数据存储在连续的内存中，但是如果向量的使用方式可能会使其重新分配，请注意维护指向单个元素的引用或指针。应该不是问题，因为您没有添加超出初始大小的任何内容。

```
int main() {    
    std::vector<T> vec;
    vec.reserve(calc_total_size());
    // now you'll need to manually translate the offset of
    // a given "array" and then add the offset of the element to that 

    T someElem = vec[array_offset + element_offset];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:04:02.123

您是在寻找内存效率、速度效率还是简单性？

您始终可以编写或下载一个非常简单的池分配器，然后将其作为分配器传递给适当的数据结构。因为您事先知道总大小，并且永远不需要调整向量的大小或添加新的向量，所以这甚至比典型的池分配器更简单。只是`malloc`将所有存储都放在一个大块中，并保留一个指向下一个块的指针。要分配 n 个字节，`T *ret = nextBlock; nextBlock += n; return ret;`. 如果你的对象是微不足道的并且不需要销毁，你甚至可以`free`在最后做一个大的。

这意味着您可以使用任何您想要的数据结构，或者比较和对比不同的数据结构。一个`vector`s `vector`? 一个巨大`vector`的细胞加上一个`vector`偏移量？你想出的其他东西听起来很疯狂，但可能会奏效？您可以比较它们的可读性、可用性和性能，而不必担心内存分配方面的问题。

（当然，如果您的目标是速度，那么以这种方式打包可能不是最好的答案。您通常可以通过浪费一点空间来改善缓存和/或页面对齐来获得很多速度。您*可以*编写一个花哨的分配器，例如，以转置的方式分配向量空间以提高算法的性能，该算法在应该执行行优先的情况下执行列优先，反之亦然，但在这一点上，调整算法可能比分配器更容易。 )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:01:35.677

是的，有一个更好的方法：

```
std::vector<std::vector<Item>> array;
array.resize(cheap_calc());
for(int i = 0; i < array.size(); ++i) {
  array[i].resize(expensive_calc(i));
  for(int j = 0; j < array[i].size(); j++) {
    array[i][j] = Item(some_other_calc());
  }
} 
```

没有指针，没有混乱，没有大惊小怪。

# wpf - UPNP 转发 WPF

> ID：13712674
> 
> 赞同：1
> 
> 时间：2012-12-04T21:57:00.263
> 
> 标签：wpf, upnp, ports

我正在尝试在 WPF 中制作一个端口转发实用程序，我已经在 WinForms 中制作了一个（看起来很糟糕：D），我知道我使用了默认安装的 Microsoft NatUPNP 库。我在想

A) 如果 NatUPNP 库可以在 WPF 中使用；和

B) 如果没有，是否有广泛使用的替代方案？

在我的一生中，我无法在 WPF 的任何工具箱选项中找到该库，也找不到使用与我的 WinForms 应用程序相同的调用来导入它的库：

```
Imports NATUPNPLib 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:29:21.830

就像我在上一条评论中所说的那样，我几乎立即进行了一些研究：D

我在 SourceForge 上找到了 2 个链接：

**安德里亚 UPNP 套件 (.Net)** - [http://sourceforge.net/projects/andrea-upnp/?source=navbar](http://sourceforge.net/projects/andrea-upnp/?source=navbar)

**Platinum UPNP（C++ 可能包括其他框架）** - [http://sourceforge.net/projects/platinum/?source=navbar](http://sourceforge.net/projects/platinum/?source=navbar)

我还没有测试过这些（出去），但我会在回家时测试并更新这个答案，说明至少 Andrea Suite 是如何流线型的（我不做 C++）

# jquery - 单击并再次返回后更改提交按钮文本的javascript

> ID：13712679
> 
> 赞同：1
> 
> 时间：2012-12-04T21:57:04.847
> 
> 标签：jquery, button, text, submit

我正在使用 Gravity Forms 并希望在 onclick 后将其提交按钮文本更改为“正在处理...”。Gravity Forms 告诉我在heading.php 文件中使用一些自定义javascript 来实现这一点。给出了以下脚本（http://stackoverflow.com/questions/1071012/using-jquery-to-change-input-button-text-back-after-a-few-seconds）这个链接指向我正确的方向但我仍在学习，需要一些帮助！有人可以帮我分解一下这段代码吗？

```
$("form.stock").submit(function()
{
    var $form = $(this);
    $.post( $form.attr('action'), { id: '123', stock: '1' } );
    var $submit = $form.find(":submit").attr('value','Saved!');
    window.setTimeout(function()
    {
        $submit.attr('value','Update') 
    }, 2000);
    return false;
}); 
```

form.stock 指的是什么？And- id: '123' stock: '1' 指的是什么？

最后，（这个）有什么作用？-`var $form = $(this);`

感谢您的好意-我知道这些是我应该知道的一些基本问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:10:17.120

```
$("form.stock") // <-- this finds forms with class=stock
    .submit(function() { // <-- binds submit handler to them
    var $form = $(this);  //<-- this caches current form that's triggered event handler
       // ajax post to the current form's action attribute
       $.post($form.attr('action'), {
           id: '123',  // <-- these are the data passed back to your server
           stock: '1'
       });
       //  find's submit button and changes value to 'Saved!'
       var $submit = $form.find(":submit").attr('value', 'Saved!');
       window.setTimeout(function() {
           // after 2000ms update value back to 'Update'
           $submit.attr('value', 'Update')
       }, 2000);          
       return false; // <-- stops any event bubbling and default action of form submit
});​ 
```

虽然你真的应该在成功函数内部进行文本更改。这样只有帖子成功，它会改变。

```
$("form.stock").submit(function() { 
    var $form = $(this);            
       $.post($form.attr('action'), function(){ 
          // these are now in the success function.. so these will only occur if ajax is successful
          var $submit = $form.find(":submit").attr('value', 'Saved!');
          window.setTimeout(function() {
              // after 2000ms update value back to 'Update'
              $submit.attr('value', 'Update')
          }, 2000);
       });        
    return false; // <-- stops any event bubbling and default action of form submit
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:12:17.993

## form.stock 指的是什么

一个`<form>`带有 jQ​​uery 选择器的元素`class=stock`。如果你有：

```
<form class="stock"> 
```

在您的 HTML 中，然后`$("form.stock")`选择它。 `.submit`将函数绑定到它的“提交”事件。

## 和- id：'123' 库存：'1'

这是使用此数据创建一个 HTTP POST 请求。在 GET 形式中，它将是这样的 URL：

```
/action/?id=123&stock=1 
```

该示例可能只是选择了值`123`并`1`随意说明了该示例。您可能应该以某种方式从表单中获取这些值。

## `$form = $(this)`

这只是将方法调用的结果分配`$(this)`给一个变量。

`$`实际上是一个jQuery方法。本质上，`$(this)`在参数上调用一个函数`this`。调用函数相对昂贵并且消耗资源。但是，使用变量并没有那么多。这样做更有效：

```
$form = $(this);
$form.one();
$form.two();
$form.three(); 
```

而不是这个：

```
$(this).one();
$(this).two();
$(this).three(); 
```

前者只有 4 个方法调用，而后者有 6 个。

不要混淆：`$form`只是一个变量名。它可以称为`aform`、`form`、`x`或任何其他有效名称。

# sql - 优化postgresql查询

> ID：13712684
> 
> 赞同：7
> 
> 时间：2012-12-04T21:57:27.617
> 
> 标签：sql, postgresql, query-optimization

我在 PostgreSQL 9.1 中有 2 个表 - flight_2012_09_12 包含大约 500,000 行和 position_2012_09_12 包含大约 550 万行。我正在运行一个简单的连接查询，它需要很长时间才能完成，尽管这些表并不小，但我相信在执行过程中会有一些重大收获。

查询是：

```
SELECT f.departure, f.arrival, 
       p.callsign, p.flightkey, p.time, p.lat, p.lon, p.altitude_ft, p.speed 
FROM position_2012_09_12 AS p 
JOIN flight_2012_09_12 AS f 
     ON p.flightkey = f.flightkey 
WHERE p.lon < 0 
      AND p.time BETWEEN '2012-9-12 0:0:0' AND '2012-9-12 23:0:0' 
```

解释分析的输出是：

```
Hash Join  (cost=239891.03..470396.82 rows=4790498 width=51) (actual time=29203.830..45777.193 rows=4403717 loops=1)
Hash Cond: (f.flightkey = p.flightkey)
->  Seq Scan on flight_2012_09_12 f  (cost=0.00..1934.31 rows=70631 width=12) (actual time=0.014..220.494 rows=70631 loops=1)
->  Hash  (cost=158415.97..158415.97 rows=3916885 width=43) (actual time=29201.012..29201.012 rows=3950815 loops=1)
     Buckets: 2048  Batches: 512 (originally 256)  Memory Usage: 1025kB
     ->  Seq Scan on position_2012_09_12 p  (cost=0.00..158415.97 rows=3916885 width=43) (actual time=0.006..14630.058 rows=3950815 loops=1)
           Filter: ((lon < 0::double precision) AND ("time" >= '2012-09-12 00:00:00'::timestamp without time zone) AND ("time" <= '2012-09-12 23:00:00'::timestamp without time zone))
Total runtime: 58522.767 ms 
```

我认为问题在于位置表上的顺序扫描，但我无法弄清楚它为什么存在。带索引的表结构如下：

```
 Table "public.flight_2012_09_12"
   Column       |            Type             | Modifiers 
--------------------+-----------------------------+-----------
callsign           | character varying(8)        | 
flightkey          | integer                     | 
source             | character varying(16)       | 
departure          | character varying(4)        | 
arrival            | character varying(4)        | 
original_etd       | timestamp without time zone | 
original_eta       | timestamp without time zone | 
enroute            | boolean                     | 
etd                | timestamp without time zone | 
eta                | timestamp without time zone | 
equipment          | character varying(6)        | 
diverted           | timestamp without time zone | 
time               | timestamp without time zone | 
lat                | double precision            | 
lon                | double precision            | 
altitude           | character varying(7)        | 
altitude_ft        | integer                     | 
speed              | character varying(4)        | 
asdi_acid          | character varying(4)        | 
enroute_eta        | timestamp without time zone | 
enroute_eta_source | character varying(1)        | 
Indexes:
"flight_2012_09_12_flightkey_idx" btree (flightkey)
"idx_2012_09_12_altitude_ft" btree (altitude_ft)
"idx_2012_09_12_arrival" btree (arrival)
"idx_2012_09_12_callsign" btree (callsign)
"idx_2012_09_12_departure" btree (departure)
"idx_2012_09_12_diverted" btree (diverted)
"idx_2012_09_12_enroute_eta" btree (enroute_eta)
"idx_2012_09_12_equipment" btree (equipment)
"idx_2012_09_12_etd" btree (etd)
"idx_2012_09_12_lat" btree (lat)
"idx_2012_09_12_lon" btree (lon)
"idx_2012_09_12_original_eta" btree (original_eta)
"idx_2012_09_12_original_etd" btree (original_etd)
"idx_2012_09_12_speed" btree (speed)
"idx_2012_09_12_time" btree ("time")

          Table "public.position_2012_09_12"
Column    |            Type             | Modifiers 
-------------+-----------------------------+-----------
 callsign    | character varying(8)        | 
 flightkey   | integer                     | 
 time        | timestamp without time zone | 
 lat         | double precision            | 
 lon         | double precision            | 
 altitude    | character varying(7)        | 
 altitude_ft | integer                     | 
 course      | integer                     | 
 speed       | character varying(4)        | 
 trackerkey  | integer                     | 
 the_geom    | geometry                    | 
Indexes:
"index_2012_09_12_altitude_ft" btree (altitude_ft)
"index_2012_09_12_callsign" btree (callsign)
"index_2012_09_12_course" btree (course)
"index_2012_09_12_flightkey" btree (flightkey)
"index_2012_09_12_speed" btree (speed)
"index_2012_09_12_time" btree ("time")
"position_2012_09_12_flightkey_idx" btree (flightkey)
"test_index" btree (lon)
"test_index_lat" btree (lat) 
```

我想不出任何其他方式来重写查询，所以在这一点上我很难过。如果当前的设置尽可能好，那就这样吧，但在我看来，它应该比现在快得多。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:29:06.430

行数估计是相当合理的，所以我怀疑这是一个统计问题。

我会尝试：

*   如果您`position_2012_09_12(lon,"time")`经常搜索.`position_2012_09_12("time") WHERE (lon < 0)``lon < 0`

*   设置得`random_page_cost`更低，可能是 1.1。看看 (a) 这是否会改变计划，以及 (b) 新计划是否真的更快。出于测试目的，看看避免 seqscan 是否会更快`SET enable_seqscan = off`；如果是，请更改成本参数。

*   增加`work_mem`这个查询。`SET work_mem = 10M`或运行它之前的东西。

*   如果你还没有运行最新的 PostgreSQL。始终在问题中指定您的 PostgreSQL 版本。（编辑后更新）：您使用的是 9.1；没关系。9.2 中最大的性能改进是仅索引扫描，而且您似乎不太可能从该查询的仅索引扫描中受益匪浅。

如果您可以摆脱列以缩小行，您还将在一定程度上提高性能。它不会有很大的不同，但会有所作为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:08:20.637

您获得顺序扫描的原因是 Postgres 认为它​​会比使用索引读取更少的磁盘页面。这可能是对的。考虑一下，如果使用非覆盖索引，则需要读取所有匹配的索引页面。它本质上是输出一个行标识符列表。然后数据库引擎需要读取每个匹配的数据页。

您的位置表每行使用 71 个字节，加上 geom 类型所需的任何内容（为了说明，我假设 16 个字节），即 87 个字节。Postgres 页面是 8192 字节。因此，每页大约有 90 行。

您的查询匹配 5563070 行中的 3950815 行，约占总数的 70%。假设数据是随机分布的，关于您的 where 过滤器，几乎有 30% ^ 90 的机会找到没有匹配行的数据页。这基本上没什么。因此，无论您的索引有多好，您仍然必须阅读所有数据页。如果您无论如何都必须阅读所有页面，则表扫描通常是一种好方法。

在这里，我说的是非覆盖索引。如果您准备创建可以自己回答查询的索引，则可以完全避免查找数据页面，这样您就可以重新开始游戏了。我建议以下值得一看：

```
flight_2012_09_12 (flightkey, departure, arrival)
position_2012_09_12 (filghtkey, time, lon, ...)
position_2012_09_12 (lon, time, flightkey, ...)
position_2012_09_12 (time, long, flightkey, ...) 
```

此处的点代表您选择的其余列。您只需要一个位置索引，但很难说哪个是最好的。第一种方法可能允许对预排序的数据进行合并连接，但代价是读取整个第二个索引以进行过滤。第二个和第三个将允许对数据进行预过滤，但需要哈希连接。给出哈希连接中的成本有多少，合并连接可能是一个不错的选择。

由于您的查询每行需要 87 个字节中的 52 个字节，并且索引有开销，因此您最终可能不会使索引占用比表本身更少的空间（如果有的话）。

另一种方法是通过查看聚类来攻击它的“随机分布”方面。

# php - HTTP 身份验证在 localhost Zend WAMP 服务器上不起作用

> ID：13712686
> 
> 赞同：0
> 
> 时间：2012-12-04T21:57:29.003
> 
> 标签：php, http, localhost, http-authentication, zend-server

我一直在研究 Robert Nixon（O'Reilly 2012）的 PHP、MySQL、Javascript 和 CSS 第 2 版。我已经设法在我的 WAMP 服务器（Zend 服务器）上建立了一个数据库。

然后，本书展示了如何验证用户名和密码。我设法创建了一些带有密码的用户名，这些用户名已成功添加到我的数据库中。我知道，因为我连接到数据库，读取 SELECT 查询的结果并将它们回显到浏览器。

然后，当我尝试在此处使用身份验证登录时：

```
if (isset($_SERVER['PHP_AUTH_USER']) && isset($_SERVER['PHP_AUTH_PW'])) {....perform database query and compare username/password....} 
```

我的用户名和密码都不起作用。在 Firefox 和 IE 中再次弹出“需要身份验证”窗口。PHP 代码没有通过 if 语句（我尝试在 if 语句之前和之后立即将输出发送到浏览器），因此输入的用户名和密码似乎没有传递给 PHP 服务器。

我确保在 Firefox 上专门授权了“localhost”，但仍然没有成功。

欢迎大家提出意见。

加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:26:10.340

成立！我在尝试相同的示例（！）时遇到了同样的问题，并发现当 php 作为 cgi 运行时会出现问题。您可以通过调用 php_sapi_name() 来检测它：如果函数返回 'cgi-fcgi'（这似乎是 Zend 下的默认值），则基本身份验证不起作用。您可以在服务器 API (CGI/FastCGI) 下的 phpInfo 中找到相同的信息。

在我的情况下，开发版本也有这个问题，而实际版本没有（网站使用 Apache 2.0 处理程序）。到目前为止，我刚刚添加了一个检查，如果检测到 cgi-fgci 则禁用身份验证（我不需要在 localhost 上进行身份验证），但我当然想找到一个可行的替代方案。

# vba - 如何将 ADO 记录集插入 MS Access 表

> ID：13712692
> 
> 赞同：8
> 
> 时间：2012-12-04T21:58:17.083
> 
> 标签：vba, ms-access, insert, ms-access-2010

**问题**

我想将当前记录集行插入到 MS Access 表中。我目前收到此错误

```
Syntax error (missing operator) in query expression 'rs[columnname]' 
```

**代码**

这是我当前的代码，我正在尝试获取所有列并将它们插入到新表中。

```
DoCmd.RunSQL "INSERT INTO tblSummary_Appl_Usage_score VALUES (rs[Configuration], rs[User Input / Output])" 
```

我不太确定我错过了什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T22:15:38.627

打开`tblSummary_Appl_Usage_score`为`DAO recordset`. 然后使用它的`.AddNew`方法创建一个新行并存储 ADO 记录集中的值。

```
Dim db As DAO.database
Dim rsDao As DAO.Recordset
Set db = CurrentDb
Set rsDao = db.OpenRecordset("tblSummary_Appl_Usage_score", dbOpenTable, dbAppendOnly)
rsDao.AddNew
rsDao![Configuration] = rs![Configuration]
rsDao![User Input / Output] = rs![User Input / Output]
rsDao.Update 
```

使用这种方法，您的代码无需根据记录集字段数据类型进行不同的调整。只要匹配的字段是相同或兼容的数据类型，无论数据类型如何，它都可以正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T22:05:40.887

如果表中的类型字段`tblSummary_Appl_Usage_score`是数字，请使用：

```
DoCmd.RunSQL "INSERT INTO tblSummary_Appl_Usage_score VALUES (" & rs![Configuration] & "," & rs![User Input / Output] & ")" 
```

如果类型是字符串，请使用：

```
DoCmd.RunSQL "INSERT INTO tblSummary_Appl_Usage_score VALUES (""" & rs![Configuration] & """,""" & rs![User Input / Output] & """)" 
```

# version-control - StarTeam 注释？

> ID：13712693
> 
> 赞同：1
> 
> 时间：2012-12-04T21:58:19.090
> 
> 标签：version-control, starteam

在 IntelliJ 中有一个显示[注释](http://www.jetbrains.com/idea/webhelp/working-with-annotations.html)的选项（文件的逐行历史记录）；我知道 IntelliJ 不支持 StarTeam，但是否有类似的方法可以使用 StarTeam 查看文件行历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:42:04.913

在 StarTeam 中，您可以选择同一文件的两个修订版（通过“*历史记录”*选项卡）并进行比较。
（我不记得任何类似于StarTeam中*IntelliJ 注释的内容）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T01:10:11.800

StarTeam GUI 客户端在后来的 2008R2 版本中添加了此功能。它位于工具、文件注释下。它在 GUI 中显示为单独的窗格，类似于文件比较窗格。

# html - GravityForms 上的自定义输入名称

> ID：13712695
> 
> 赞同：5
> 
> 时间：2012-12-04T21:58:22.273
> 
> 标签：html, forms, wordpress, input, gravity

如何将自定义输入名称添加到重力形式？我需要将表单提交给需要非常具体的表单名称的第三方服务。

我目前的想法是编写一些 jQuery 来在页面加载时动态重命名所有内容。显然这并不理想。

重力形式：[http ://www.gravityforms.com/](http://www.gravityforms.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:50:19.947

在联系了重力表格的制造商后，听起来他们不支持自定义输入名称。作为一种解决方法，我编写了一些 jQuery 来使用正确的表单名称重命名输入。例如：

```
$("input#input_1_1").attr("name","first_name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T13:36:43.650

只需在functions.php中添加一些代码并填写表格，然后将通过电子邮件向您发送ID名称列表，它们与您可以使用开发人员工具等的名称相同。这对我来说更快。然后更改代码以通过 curl 使用不同的输入名称发布。

这使用php，所以它在服务器上处理。这样您就不必担心浏览器中禁用了 JS 的人。

[http://0to5.com/gravity-forms-submitting-forms-to-3rd-party-applications/](http://0to5.com/gravity-forms-submitting-forms-to-3rd-party-applications/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T12:29:17.093

添加一个新字段（HTML 字段）。在此字段的内容设置中添加此带有脚本标签的 javascript

非jquery解决方案：

```
document.getElementById("input_14_4").setAttribute("name", "email"); 
```

我在这里找到的另一个解决方案

[https://docs.gravityforms.com/gform_field_content/](https://docs.gravityforms.com/gform_field_content/)

```
add_filter( 'gform_field_content', function ( $field_content, $field , $value, $lead_id, $form_id) {
 if ( $form['id'] != 14 ) {
        //not the form whose tag you want to change, return the unchanged tag
        return $field_content;
    }
    if ( $field->id == 3 ) {
        return  preg_replace( "|name='(.*?)'|", "name='email'", $field_content );
    }

    return $field_content;
}, 10, 5 ); 
```

# javascript - 以十六进制设置背景颜色

> ID：13712697
> 
> 赞同：9
> 
> 时间：2012-12-04T21:58:40.010
> 
> 标签：javascript

如何在 JavaScript 中将元素背景颜色设置为十六进制值？`backgroundColor`方法仅在 rgb 中设置。

`square.style.backgroundColor = input_color;` `input_color`是 #123456，但在源集中`rgb(18, 52, 86)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:05:11.403

解决您的问题的更好方法是像这样设置背景颜色

```
square.style.backgroundColor = "rgb(12,34,56)"; 
```

否则我会使用Sheika的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:52:13.890

如果要获取格式元素的颜色，`rgb`则可以将其转换`rgb`为`hex`格式

```
function rgbToHex(col)
{
    if(col.charAt(0)=='r')
    {
        col=col.replace('rgb(','').replace(')','').split(',');
        var r=parseInt(col[0], 10).toString(16);
        var g=parseInt(col[1], 10).toString(16);
        var b=parseInt(col[2], 10).toString(16);
        r=r.length==1?'0'+r:r; g=g.length==1?'0'+g:g; b=b.length==1?'0'+b:b;
        var colHex='#'+r+g+b;
        return colHex;
    }
} 
```

调用函数

```
var col=document.getElementById('myDiv').style.backgroundColor;
alert(rgbToHex(col)); // alerts hex value 
```

[**这是一个例子**](http://jsbin.com/otekon/5/edit)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-28T15:42:53.723

找到了一些应该工作的东西：

```
document.getElementById('square').attributes['style'].textContent='background-color:'+ input_color 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-04T22:08:41.693

如果需要十六进制，可以将其设置为字符串，例如“#123456”，也可以使用十六进制数字`rgb (0x12, 0x34, 0x56)`。

也就是说，square.style.backgroundColor = '#123456'; 和 square.style.backgroundColor = 'rgb(18, 52, 86)'; 工作并具有完全相同的效果。

因此，您的问题的答案：如何将其设置为十六进制值，在您的问题中得到了回答：您可以将十六进制值放入字符串中并进行设置。

您的意思似乎是：如何检索十六进制值？您遇到的问题是由于样式在内部不是您设置的副本，因此无法保证将以何种格式返回。如果您真的需要您设置的字符串的副本在设置样式的同时将该字符串存储在变量中。然后检索该变量而不是读取样式属性。

# python - Python输入标准化值并返回颜色

> ID：13712698
> 
> 赞同：1
> 
> 时间：2012-12-04T21:58:41.010
> 
> 标签：python, color-mapping

我正在尝试创建一个函数，该函数将采用 0 和 1 之间的标准化值并返回红色和蓝色之间的颜色值（彩虹色图）。见创建链接

```
 def normPoint(self,level):
        return .02222*level+2.4444
    def createLink (self, output_level):
        cdict = {'red': ((0., 1, 1),
                 (0.05, 1, 1),
                 (0.11, 0, 0),
                 (0.66, 1, 1),
                 (0.89, 1, 1),
                 (1, 0.5, 0.5)),
         'green': ((0., 1, 1),
                   (0.05, 1, 1),
                   (0.11, 0, 0),
                   (0.375, 1, 1),
                   (0.64, 1, 1),
                   (0.91, 0, 0),
                   (1, 0, 0)),
         'blue': ((0., 1, 1),
                  (0.05, 1, 1),
                  (0.11, 1, 1),
                  (0.34, 1, 1),
                  (0.65, 0, 0),
                  (1, 0, 0))}
        cmap = LinearSegmentedColormap('color_map', cdict,256)
        color_value = self.normPoint(output_level)
        color = self.get_color_name(cmap(color_value))
        print color, color_value
    def closest_color(self,requested_color):
        min_colors = {} 
        for key, name in webcolors.css3_hex_to_names.items():
            r_c, g_c, b_c = webcolors.hex_to_rgb(key)
            rd = (r_c - requested_color[0]) ** 2
            gd = (g_c - requested_color[1]) ** 2
            bd = (b_c - requested_color[2]) ** 2
            min_colors[(rd + gd + bd)] = name
        return min_colors[min(min_colors.keys())] 
```

# php - 抓取重定向的目标链接

> ID：13712701
> 
> 赞同：0
> 
> 时间：2012-12-04T21:58:53.760
> 
> 标签：php, url

希望我只是忽略了这一点。

我正在尝试使用 PHP 获取重定向链接的目标 URL。这是为了获取附属/隐藏链接的站点 URL。

最好的例子： [http](http://tinyurl.com/2tx) ://tinyurl.com/2tx去 google.com

注意：这是一个示例，链接是动态创建的

现在我通过 URL

www.mysite.com/redirect.php?link=http://tinyurl.com/2tx

这是来自该站点的代码 - 注意：由于 URL 中包含与号，因此我必须通过 GET 走这条路线。

```
<?php
    $name = http_build_query($_GET);
    // which you would then may want to strip away the first 'name='
    $name = substr($name, strlen('name='));
    //change link to a nice URL
    $url = rawurldecode($name);
?> 
```

我有一个抓取 URL 的简单脚本，如何处理 URL 以获取目标 URL？

希望这不会太令人困惑。

干杯，罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:02:20.380

下次您应该发布一些代码。我假设您正在使用`cURL`它来执行此操作。这很简单：

```
//sanitize
$ch = curl_init($_GET['link']);

//follow redirects
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

curl_exec($ch);

$url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

编辑：根据 Dagon，您只想“知道网址但不去那里”。如果您只需要知道 url 而不需要获取其内容，则使用此设置会更有效：

```
curl_setopt($ch, CURLOPT_NOBODY, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:02:47.790

向您拥有的 URL 发出 HTTP HEAD 请求。您将收到带有目标 URL 的 HTTP 301 或 302 响应。

示例：将您的 URL 放在[这里](http://web-sniffer.net/)以查看发出 HTTP 头请求时返回的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:36:24.907

这可能是编码问题。您的 URL 中的参数未编码，因此在尝试使用 $_GET 获取它时可能已损坏。

你想使用这个 URL：

```
www.mysite.com/redirect.php?link=http%3A%2F%2Ftinyurl.com%2F2tx 
```

`urlencode()`您可以使用该函数在 PHP 中对 URL 变量进行编码。现在可以像这样访问（我认为）您想要的变量：

```
echo $_GET['link'];  // http://tinyurl.com/2tx 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:43:01.197

这是我的做法（阅读评论）：

```
<?php

// Connect to the page:
$ch = curl_init("http://tinyurl.com/2tx");

// Don't get the body (remove if you want the body):
curl_setopt($ch, CURLOPT_NOBODY, true);

// Follow the page redirects:
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

// Retun the data as a string (Remove to echo to the page):
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Execute:
curl_exec($ch);

// Get data:
print_r($data = curl_getinfo($ch));

// Get just the url:
echo $data["url"]; 
```

# windows-phone-7 - 夜间模式和微软的提交要求

> ID：13712702
> 
> 赞同：0
> 
> 时间：2012-12-04T21:58:54.380
> 
> 标签：windows-phone-7

我听说微软拒绝在“夜间模式”下无法读取的应用程序是什么？我的意思是当手机进入夜间模式时，所有颜色字体都会改变，这使得应用程序无法使用，然后他们拒绝应用程序。

我懒得提交 RSS 应用程序，我什至不知道我必须注意那个夜间模式。请介绍一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:31:02.427

我怀疑你的意思是“轻主题”模式。在这个其他线程上有很多有用的评论。[Windows Phone 7.1 浅色/深色主题管理](https://stackoverflow.com/questions/10181350/windows-phone-7-1-light-dark-themes-management)。

从我个人的经验来看，这有点令人头疼。如果您的应用程序不是很有风格，请尝试为所有控件使用内置颜色，并且无论您做什么都不要在其上放置图像背景（那是我的失败）。

# javascript - 如何从嵌套结构中获取最高数字

> ID：13712706
> 
> 赞同：0
> 
> 时间：2012-12-04T21:59:13.637
> 
> 标签：javascript, algorithm, loops

我有一个类似的数据结构->

```
var prices = [
    {currency: '$', value: 52},
    {currency: '$', value: 139},
    {currency: '$', value: 31},
    {currency: '$', value: 5}
]; 
```

我想从该数据中知道最高价格。我知道我可以遍历数组并收集数据，但是最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T22:03:28.050

这样的代码：

```
Math.max.apply(Math, prices.map(function(p) {return p.value;})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:03:14.467

我们可以通过使用来做到这`Array.prototype.map`一点`Math.max`。由于`.map()`返回一个*Array*，我们可以使用它来调用`Math.max`by `Function.prototype.apply`。结果看起来像

```
var max = Math.max.apply(null, prices.map(function( entry ) {
    return entry.value;
}));

console.log( max ); // 139 
```

* * *

上面的语句等于

```
Math.max( 51, 139, 31, 5 ); 
```

这将返回相同的结果，我们只是以编程方式创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:08:46.133

```
prices.sort(function(a, b) {
    return b.value - a.value;
}); 
```

然后`prices[0].value`将是最高的。

# javascript - 将控制器动态添加到 app.js 控制器中：[] - Ext-JS 4

> ID：13712707
> 
> 赞同：4
> 
> 时间：2012-12-04T21:59:18.903
> 
> 标签：javascript, extjs, controller, extjs4

我有一个很大的应用程序，所以我没有在 app.js 中添加东西：

```
stores: []
controllers: []
views: []
models: [] 
```

里面只有我需要创建应用程序的东西。那么，当我单击节点（左侧面板）时，如何创建我需要的控制器并在该控制器中加载模型、视图、存储和其他内容？仅调用控制器就足够了吗（因为它们是在控制器中导入的）？

就像是

```
Ext.create('MyApp.path.SomeController'); 
```

是否会像我将其添加`controllers: []`到 app.js 中一样添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:01:29.410

从我的 app.js，（因此`this`是一个 Ext JS 应用程序）：

```
addController: function (name) {
        var c = this.getController(name); //controller will be created automatically by name in this getter 
        //perform the same initialization steps as it would have during normal ExtJs process
        c.init(this);
        c.onLaunch(this);
    } 
```

`name`作为班级名称...

还要记住，您可以通过任何其他控制器获取应用程序实例的句柄`this.application`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:11:24.747

我的代码与 Jenson 的代码非常相似。

```
// This function loads a controller dynamically and returns its first view
// Note: We don't call onLaunch(this) here. This method might be called during 
// bootstrap (like if there's a cookie with the recent page), after which 
// the application itself will call onLaunch (once out of the Launch method).
// The other issue is that the view is not added when this method is called
// and we might need to reference the view withing onLaunch, so this is the
// wrong place to call on Launch). Currently we're not relying on onLounch 
// with controllers.
dynamicallyLoadController: function( aControllerName )
{
    // See if the controller was already loaded
    var iController = this.controllers.get(aControllerName);

    // If the controller was never loaded before
    if ( !iController )
    {    
        // Dynamically load the controller
        var iController = this.getController(aControllerName);

        // Manually initialise it
        iController.init();
    }

    return iController;
},

loadPage: function( aControllerName )
{
    // save recent page in a controller
    Ext.util.Cookies.set( 'RecentPage', aControllerName );

    var iController   = this.dynamicallyLoadController( aControllerName ),
        iPage         = iController.view,
        iContentPanel = this.getContentPanel(),
        iPageIndex    = Ext.Array.indexOf(iContentPanel.items, iPage);

    // If the page was not added to the panel, add it.
    if ( iPageIndex == -1 )
        iContentPanel.add( iPage );

    // Select the current active page
    iContentPanel.getLayout().setActiveItem( iPage );
}, 
```

# cmake - 脚本模式下的CMake文件继承变量

> ID：13712708
> 
> 赞同：11
> 
> 时间：2012-12-04T21:59:34.347
> 
> 标签：cmake

如何从其他 cmake 文件以脚本模式 (-P) 调用 cmake 文件，所以这个“cmake child”知道其父级的所有变量？因为，如果我有很多孩子需要的变量，我必须写很多 -D 选项，我想避免它。

例子：

```
// CMakeLists.txt
cmake_minimum_required(VERSION 2.8)

set(teststr "Hello World!")

add_custom_command(test
   ${CMAKE_COMMAND} -Dteststr=${teststr} -P test.cmake
)

// test.cmake
message("${teststr}")

$ cmake .
$ make test
Hello world!
Built target test 
```

工作正常！。但是，没有“-Dteststr”：

```
// CMakeLists.txt
cmake_minimum_required(VERSION 2.8)

set(teststr "Hello World!")

add_custom_command(test
   ${CMAKE_COMMAND} -P test.cmake
)

// test.cmake
message("${teststr}")

$ cmake .
$ make test

Built target test 
```

当然，如果没有 -D 选项，test.cmake 中的“teststr”变量是未设置的，因此输出为空。

在“遗产模式”或类似的情况下调用 test.cmake 的任何选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-30T20:36:51.310

您可以将参数传递给带有`cmake -P`. 如果你打电话：

```
cmake -P <script-file> <arg3> <arg4> <arg5> ... 
```

然后变量`CMAKE_ARGC`, `CMAKE_ARGV0`, `CMAKE_ARGV1`, ... 将可用于脚本。请参阅[CMAKE_ARGC](https://cmake.org/cmake/help/latest/variable/CMAKE_ARGC.html)和[CMAKE_ARGV0](https://cmake.org/cmake/help/latest/variable/CMAKE_ARGV0.html)的文档。

另一种方法是定义变量，就像使用非脚本`cmake`命令一样。但是，需要注意一件事：您需要在之前定义变量`-P`：

```
cmake -DVAR=VALUE -DFOO=BAR -P <script-file> <arg5> <arg6> ... 
```

现在在 cmake 中 VAR 和 FOO 将可用。
另外，请注意，脚本文件之后的 args 编号将相应地移动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T22:59:27.553

据我所知，没有特别简单的方法可以做到这一点。

您可以将父 CMakeLists.txt 中的所有当前变量写入单独的文件，然后`include`在 test.cmake 中写入：

```
# CMakeLists.txt:
cmake_minimum_required(VERSION 2.8)
set(teststr "Hello World!")
set(CacheForScript ${CMAKE_BINARY_DIR}/CMakeCacheForScript.cmake)
file(WRITE ${CacheForScript} "")

get_cmake_property(Vars VARIABLES)
foreach(Var ${Vars})
  if(${Var})
    string(REPLACE "\\" "\\\\" ${Var} ${${Var}})
  endif()
  file(APPEND ${CacheForScript} "set(${Var} \"${${Var}}\")\n")
endforeach()

add_custom_target(test ${CMAKE_COMMAND} -P ${CMAKE_SOURCE_DIR}/test.cmake) 
```

```
# test.cmake
include(${CMAKE_BINARY_DIR}/CMakeCacheForScript.cmake)
message("${teststr}") 
```

# java - 创建可编辑的标签/文本？

> ID：13712709
> 
> 赞同：0
> 
> 时间：2012-12-04T21:59:35.487
> 
> 标签：java, gwt, java-canvas

我想将文本添加到绘制的矩形中。

```
canvas.fillRect(...) 
```

但我希望用户为此矩形输入自定义文本。但是如何在 gwt 画布中创建一个可以接受用户输入的可编辑标签？

我想在 gwt canvas JAVA 中实现这一点！不是JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:03:51.407

这里的拉绳方法可能有一些用处:)

[http://www.c-point.com/javascript_vector_draw.htm](http://www.c-point.com/javascript_vector_draw.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:19:03.867

1) 创建一个与 Graphics.fillRect() 位置相同的 JTextField。

 `````
JTextField txtSomething = new JTextField(...) 
```

2) Make the JTextField background transparent.` 

```
txtSomething.setBackground(new Color(0,0,0,0)) 
```

3) 运行

*还有其他方法可以做到这一点，尝试研究*`

# knockout.js - 淘汰赛映射 + 添加到可观察数组

> ID：13712710
> 
> 赞同：3
> 
> 时间：2012-12-04T21:59:37.643
> 
> 标签：knockout.js, knockout-mapping-plugin, ko.observablearray

小提琴可以在[这里](http://jsfiddle.net/CQ92e/3/)找到。

我正在添加一个由`ko.mapping.fromJS()`.

在我看来，我正在通过使用数组上的属性来构建 URL `attr: { href: '/Users/Summary?userId=' + ID() }`。

如果我想将一个项目添加到我正在使用的数组中`self.Users.push()`。

如果我这样做，我会得到一个错误`ID is not a function`。

所以我的问题是向数组添加项目的正确方法是什么，还是我没有`href`正确构建 attr？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T22:54:07.260

似乎您正在尝试推送一个普通对象（没有可观察对象）。您需要首先构建它，或将其映射到可观察对象。

```
self.Users.push(new User(data)); 
```

或者

```
self.Users.push(ko.mapping.fromJS(data, mapping)); 
```

另一种选择是`()`从表达式中删除。但是随后 observable `ID`-properties 的行为会很奇怪。

# join - 分布式配置中的 SOLR 连接查询

> ID：13712711
> 
> 赞同：1
> 
> 时间：2012-12-04T21:59:39.860
> 
> 标签：join, solr, solrcloud

我正在运行 SOLR4 并运行一些连接查询，例如 -`{!join from=some_id to=another_id}(a_id:55 AND some_type_id:3)`

当我运行 SOLR4 的单个实例（不是云）时，此查询返回 4 个结果，这正是它应该是的。

但是当我在 SOLR 云上运行它时，它有两个分片和两个副本，它只返回一个结果，而如果直接通过 id 搜索，则可以在索引中找到另外 3 个结果。

任何想法有什么问题和/或如何解决它？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T11:41:26.657

加入仅在分片内有效。加入不会跨分片工作。我认为一个分片应该有 3 个符合条件的文档，另一个分片应该有一个。跨分片的复杂连接尚未到来。

如果您想将加入作为强制性功能，请考虑将具有多个复制的单个分片作为解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T15:14:40.173

在 Solr 中创建分片时，您可以将路由器设置为`compositeId`，在索引文档时，您可以将 ID 前缀插入 ID 属性，这将帮助 Solr 为文档选择分片。换句话说，所有具有相同 ID 前缀的文档都将存储在一个分片上。虽然您不能使用它来告诉 Solr 确切使用哪个分片，但您可以指示需要存储在单个分片上的文档。

例如，如果您为 Posts 和 Comments 编制索引，则 Post 的 ID 属性可能看起来像`POSTDATA123!Post 123`，`123`Post ID 在哪里。当索引属于具有 ID`123`的帖子的评论时，ID 属性可以是`POSTDATA123!Comment 321`，其中`321`是评论 ID。Solr 将理解`POSTDATA123!`两个文档上的此前缀，并将 Post 及其 Comments 存储在单个分片上。

当索引多个帖子时，Solr 仍将使用分片并将您的帖子均匀地分布在可用分片中，但连接将起作用，因为评论将始终存储在与其父帖子相同的分片上。

您可以在此处找到有关`compositeId`路由器的更多文档[https://lucene.apache.org/solr/guide/6_6/shards-and-indexing-data-in-solrcloud.html](https://lucene.apache.org/solr/guide/6_6/shards-and-indexing-data-in-solrcloud.html)

# xcode - 将文件添加到 Xcode 4 应用程序

> ID：13712713
> 
> 赞同：-1
> 
> 时间：2012-12-04T22:00:04.260
> 
> 标签：xcode, macos, cocoa, xcode4, applescript

我开发了一个 xcode 4 cocoa-applescript 应用程序。应用程序在单击按钮时执行许多 shell 脚本命令。我想执行一个额外的命令，如下所示：

```
installer -pkg "path to somepackage.pkg" 
```

我正在尝试找到一种将 somepacakge.pkg 包含在 xcode 应用程序中的方法，这样我就可以调用它而无需从网络驱动器中将其拉下。有人知道我如何将完全独立的 .pkg 附加或包含到 xcode 应用程序中吗？

一如既往，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:35:28.793

您可以简单地将整个包放入您的 Xcode 项目并将其添加到“复制文件”构建阶段。将其复制到应用程序的资源文件夹中，然后您可以使用以下命令生成路径：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"<package name>" ofType:@"pkg"]; 
```

# jpa - 同一类型的多个属性的 JPA 映射

> ID：13712715
> 
> 赞同：0
> 
> 时间：2012-12-04T22:00:26.133
> 
> 标签：jpa, jpa-2.0

我正在学习 JPA (2.0)，我想了解如何正确映射同一类类型的多个属性。例如，假设我有一个模型：

```
@Entity
class Person {
   String name;
   int age;
   // getters/setters
}

@Entity
class Family {
   Person dad;
   Person mom;
   List<Person> children;
   // getters/setters
} 
```

如何正确映射妈妈和爸爸的属性？

感谢和抱歉，如果它太基本了。在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:34:26.113

您有两个实例的事实不会改变任何事情。

您将`dad`和`mom`每个映射为一个多对一关联，家庭表中将有两个连接列：一个用于爸爸，一个用于妈妈。

您映射`children`为 OneToMany（假设孩子只能是一个家庭中的孩子），并且在 Family 和 Person 之间会有一个连接表（单向 OneToMany 的默认值），或者在 Person 表中引用一个连接列族表（OneToMany 双向关联的默认值）。

# ruby-on-rails-3 - 如何组织 Rails App 和多个 Engine 的开发

> ID：13712717
> 
> 赞同：4
> 
> 时间：2012-12-04T22:00:27.937
> 
> 标签：ruby-on-rails-3, git, bundler, rails-engines

实际上很难提出这个问题，所以我只是解释一下情况。

我正在开发一个由多个子应用程序组成的应用程序。主应用程序仅提供导航栏和一些基本功能，例如用户和权限配置，而子应用程序提供实际功能。

现在这是一个 Rails 2 应用程序，子应用程序嵌入到框架中，它的设计不是很好，设置也很复杂。幸运的是，我们现在有了引擎，这将是这个应用程序的更明智的解决方案。

到目前为止，一切都存在于颠覆中，并且可以立即更新，共享代码使用外部代码。我们想在重组和重构时迁移到 git。过去几天我一直在网上搜索有关捆绑程序、git 子模块和 git 子树的信息，但我没有找到一个很好的描述，当您在所有这些上进行开发时如何正确管理由多个引擎/宝石组成的大型项目同时。

我特别希望能够：

*   使用 Bundler 管理依赖项
*   不要将我们自己的 Gems 和 Engines 安装到全局 gem 路径中，而是相对于主应用程序，作为 git 存储库
*   将我们自己的 Gems 和 Engines 设置为 git 存储库（可能使用 Bundler 的本地路径覆盖）
*   一种获取所有依赖项（捆绑安装）的简单方法，它可以提取我们自己的 Gems 和 Engines 的最新版本，如果这不可能，那么一个命令可以 git pull 所有自己的 Gems 和 Engines（可能是一个 rake 任务？）
*   使新开发人员可以轻松快速地设置整个开发环境（git 克隆应用程序，在本地捆绑安装依赖项，包括所有自己的 Gem 和引擎）
*   使用 Capistrano 轻松部署

我已经想到的：

*   将所有内容都包含在一个存储库中，这似乎违背了对我来说单独的 Gems/Engines 的目的，而且我认为它不允许我们通过 Bundler 管理主应用程序对引擎的依赖关系
*   使用子模块，我读了太多关于为什么它不好的帖子，并且对于我们的开发人员数量来说，有人提交一个子模块指针指向只存在于他的本地仓库中的提交只是时间问题
*   git subtree 实用程序，对我来说似乎很复杂

那么你们中是否有人有类似的设置，你如何管理它以使更新和提交更改尽可能容易？您将应用程序所依赖的引擎/宝石代码放在哪里？

**TL;DR**如何管理由多个引擎和宝石组成的大型轨道项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:56:36.197

我们公司有一个类似（但可能不太复杂）的案例。我们所做的（就目前而言）也对您有用：

将您的 Rails 应用程序放在自己的 git 存储库中。各种 gem 也都有自己的存储库（虽然可以不这样做，但“一个 gem = 一个 git 存储库”将使您的生活更轻松）。

然后在你的 Rails 应用程序 Gemfile 中，你有几个选项

*   默认应该是将每个 gem 引用到它的 git 存储库（以便 bundle 将从那里加载它们）
*   在本地处理某些 gem 和 Rails 应用程序时，要么将 Gemfile 更改为使用本地路径 ( [http://gembundler.com/v1.2/gemfile.html](http://gembundler.com/v1.2/gemfile.html) )，要么通过在本地覆盖路径来更好地使用 (参见：[http://gembundler.com/v1.2/git.html](http://gembundler.com/v1.2/git.html)）。请注意这两个选项是不同的：第一个使用路径，第二个使用本地 git 存储库（因此第一个可以看到新的未提交更改，而不是第二个）。

为了轻松更新您的所有 gem，我将创建一个小的 .sh 脚本（只是为了启动各种克隆或更新操作，以及捆绑安装，以便一切都变得干净），然后使用主应用程序提交它。我还将在团队中建立一个“标准文件夹组织”（即，每个人都使用他们选择的基本文件夹，在其下有 Rails 应用程序和每个 gem 的文件夹），以使过程更容易。

我希望这可以帮助或得到你的想法（你的问题非常复杂和多方面，所以我不是 100% 确定这是你正在寻找的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:59:41.987

**如何管理您的 Gem 依赖项？**
通过 Gemfile 打包。

**如何管理您的引擎？**
通过 Gemfile 打包。
将您的引擎构建为 Gem，并在您的 Gemfile 中提供它们的 git 存储库位置。如果您需要示例，请查看如何在您的 Gemfile中包含[https://github.com/radar/forem gem。](https://github.com/radar/forem)

此外，这还帮助我学习了 Rails 引擎，[http](http://edgeguides.rubyonrails.org/engines.html) ://edgeguides.rubyonrails.org/engines.html 。

**你是从爪哇岛来的吗？**
Rails 确实有学习曲线，但不像 Java 山崖下落。

# java - Java - 图形 - 传递给 paint() 的图形对象与 JPanel 实例中的图形对象不同

> ID：13712723
> 
> 赞同：2
> 
> 时间：2012-12-04T22:00:36.533
> 
> 标签：java, swing, jpanel, graphics2d, affinetransform

我有一个绘制形状并允许选择这些形状的 JPanel。我开始添加使用 AffineTransform 对象以及 Graphics2D 对象来转换此视图的功能。

在我的paint() 方法中，当然传入了一个Graphics 对象。我在该对象上设置了一个新的变换（在这种情况下，只是将事物缩放2），并且paint() 方法中的所有内容都根据AffineTransform 正确绘制我刚定。在这一点上，绘图形状部分效果很好！现在开始选择形状...

形状选择从 mousePressed() 事件开始（我的 JPanel 实现了 MouseListener 接口）。当我有一个 mousePressed() 事件时，我调用 this.getGraphics() 来获取 JPanel 的 Graphics 对象。然后我将它转换为 Graphics2D 对象并在其上调用 getTransform() 以获取我当前的变换，以便我可以将单击的点映射到变换的点。然而，当我调用 getTransform() 时，AffineTransform 又回到了 [1, 0, 0], [0, 1, 0] 的默认 AffineTransform。

我在想也许传递给 JPanel 的 paint() 的 Graphics 对象与我在 JPanel 中的对象不同，但我不确定。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:21:25.653

是的，你不能确定你会得到相同的 Graphics 对象。事实上，您不应该在`paintComponent()`方法之外使用 Graphics 对象，因为这会破坏 Swing UI 模型。如果您这样做，您可能会得到伪影和/或不完整的绘图。正确的方法是使用一些实例变量来存储 UI/小部件的状态。当`mousePressed()`被调用时，您只需更新这些变量并调用`repaint()`. 然后在您的`paintComponent()`方法中，应用适当的转换并绘制您的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T13:31:38.713

**简单类打印一个对象或 JPanel。**

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.Chromaticity;
import javax.print.attribute.standard.DialogTypeSelection;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TemplateDemo extends JFrame implements Printable, ActionListener {

    JButton btn;
    JTextField name_txt;
    JPanel panel;

    public TemplateDemo() {

        panel = new JPanel(null);
        panel.setBounds(0, 0, 300, 300);
        add(panel);
        name_txt = new JTextField();
        name_txt.setBounds(0, 10, 200, 20);
        panel.add(name_txt);
        btn = new JButton("Click");
        btn.setBounds(0, 240, 200, 30);
        btn.addActionListener(this);
        panel.add(btn);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(0, 0, 400, 400);
        setLayout(null);
        setVisible(true);
    }

    @Override
    public int print(Graphics g, PageFormat pageFormat, int pageIndex) {
        Graphics2D graphics = (Graphics2D) g;
        if (pageIndex == 0) {
            g.translate((int) pageFormat.getImageableX(), (int) pageFormat.getImageableY());
            panel.print(g);
            return PAGE_EXISTS;
        }
        return NO_SUCH_PAGE;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        PrinterJob pj = PrinterJob.getPrinterJob();
        pj.setPrintable(this);
        PrintRequestAttributeSet set = new HashPrintRequestAttributeSet();
        set.add(Chromaticity.COLOR);
        set.add(DialogTypeSelection.COMMON);

        if (pj.printDialog(set)) {
            try {
                pj.print(set);
            } catch (PrinterException ex) {
            }
        }
    }

    public static void main(String[] args) {
        new TemplateDemo();
    }
} 
```

# android - 如何使用按钮更改标签的颜色？闪存生成器 4.6

> ID：13712724
> 
> 赞同：2
> 
> 时间：2012-12-04T22:00:40.043
> 
> 标签：android, actionscript-3, flash-builder

这是我拥有的代码示例。当移动应用程序打开时，您可以输入您想要的颜色（例如，#811fb4 为紫色），当您单击按钮时，它应该会更改标签颜色。但是 lbl1.color 不起作用。有任何想法吗？

```
 <?xml version="1.0" encoding="utf-8"?>
 <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Custom Colour">

<fx:Script>
    <![CDATA[
        public var customColourChosen:String;

        protected function button1_clickHandler(event:MouseEvent):void{
            customColourChosen = txtInput1.text;
            lbl1.color = customColourChosen; // <------ //
        }

    ]]>
</fx:Script>

<s:Label id="lbl1" x="144" y="104" fontSize="36" text="Label"/>
<s:TextInput id="txtInput1" x="50" y="138"/>
<s:Button x="124" y="212" label="Button" click="button1_clickHandler(event)"/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:49:49.663

```
lbl1.setStyle('color', 0xff0000); 
```

这样你甚至可以使用紫色我认为.. :)

# asp.net - ASP.Net - 如何有多个提交按钮并通过 javascript 提交表单？

> ID：13712726
> 
> 赞同：1
> 
> 时间：2012-12-04T22:00:50.803
> 
> 标签：asp.net, controller, submit, viewmodel, form-submit

我是 ASP.Net 的新手，正在尝试使用 MVC2 制作 Web 应用程序。

在一个特定页面上，我需要有多个提交按钮 - 从[这篇文章](https://stackoverflow.com/questions/442704/how-do-you-handle-multiple-submit-buttons-in-asp-net-mvc-framework)阅读后，我发现[这种方法](http://blog.maartenballiauw.be/post/2009/11/26/Supporting-multiple-submit-buttons-on-an-ASPNET-MVC-view.aspx)在我的项目中效果很好。

所以我在控制器中处理了一些提交按钮，如下所示：

```
[HttpPost]
[MultiButton(Key = "action", Value = "Button1")]
        public ActionResult Action1(MyViewModel myViewModel)
{ //do stuff
return View(newViewModel)
}

[HttpPost]
[MultiButton(Key = "action", Value = "Button2")]
     public ActionResult Action2(MyViewModel myViewModel) 
```

我的问题是，现在我还想在各种客户端事件上回发我的表单。我试图通过在某处使用 javascript 在视图中执行此操作。

```
<% using (Html.BeginForm("Index", "MyController")){ %> 
document.forms["form1"].submit(); 
```

在控制器上执行“正常”操作：

```
[HttpPost]
    public ActionResult Index(MyViewModel myViewModel)
    {
    } 
```

但是当我添加这个时，由于 Action1 和 Index 之间的匹配异常不明确，现在多个提交按钮无法正常工作。我意识到他们有相同的签名，但作为一个初学者，我在这一点上有点卡住了！

我该怎么做才能让所有不同的提交选项一起工作？请建议和/或指出我哪里出错了。谢谢

# python - 在 emacs 中设置正确版本的 Python 和 PYTHONPATH 变量

> ID：13712727
> 
> 赞同：4
> 
> 时间：2012-12-04T22:00:56.893
> 
> 标签：python, emacs, pythonpath

我正在尝试学习为 Python 开发的 Emacs，但我发现我的一些项目由于模块导入问题而无法运行，即未导入 SciPy 或 NumPy。我已经尝试过针对此处提出的相关问题提出的解决方案，例如更改 PYTHONPATH 环境变量，但没有一个是好的。在从终端使用 IDLE 和普通解释器时比较了**sys.path**，我发现使用了不同的版本：Python-2.7.3 in IDLE

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "copyright", "credits" or "license()" for more information.
==== No Subprocess ====
>>> from pprint import pprint as pp
>>> import sys
>>> pp(sys.path)
['/home/mench',
'/usr/bin',
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0',
'/usr/lib/pymodules/python2.7',
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
'/usr/lib/python2.7/dist-packages/ubuntuone-couch',
'/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol'] 
```

和 Python-2.7.2 作为默认系统解释器

```
Python 2.7.2 (default, Mar  1 2012, 22:28:45) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from pprint import pprint as pp
>>> import sys
>>> pp(sys.path)
['',
'/home/mench',
'/opt/alps/lib',
'/usr/local/lib/python27.zip',
'/usr/local/lib/python2.7',
'/usr/local/lib/python2.7/plat-linux2',
'/usr/local/lib/python2.7/lib-tk',
'/usr/local/lib/python2.7/lib-old',
'/usr/local/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/site-packages'] 
```

问题是：如何让 Emacs 使用正确版本的 Python？我在 Ubuntu 12.04 上使用 GNU emacs-23.3.1 如果我对问题的假设是错误的，请纠正我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T00:52:58.527

我认为问题在于选择了错误的 python 可执行文件。`sys.path`如果您以正常方式（pip、setup.py 等）安装模块，通常为模块设置适当。

问题是您已经手动安装了python 2.7.2，它通常会在其中`/usr/local/bin`出现。这就是为什么您在终端中的默认 python 是 2.7.2。要明确告诉 Emacs 你想在特定路径（即）中使用 python，你需要一些 Emacs 的 python-mode 配置。`/usr/bin``$PATH``/usr/bin/python`

Emacs 有一些 python 模式，但我猜你使用的是“旧”python.el，因为你使用的是 Emacs 23。要设置 python 可执行文件，我认为在你的 Emacs 配置中添加它就可以了（但我从不使用这个python-mode 所以我不确定它是否有效。）：

```
(setq python-python-command "/usr/bin/python") 
```

评估此代码后，您将需要重新打开 python 文件。或者干脆重启 Emacs。

如果你使用新的 python.el，你必须添加`/usr/bin/`到`python-shell-exec-path`. 如果您使用的是 python-mode.el，我猜它是`(setq py-shell-local-path "/usr/bin/python" py-use-local-default t)`.

# javascript - 同时启动 JavaScript 和新页面

> ID：13712728
> 
> 赞同：0
> 
> 时间：2012-12-04T22:00:58.097
> 
> 标签：javascript

当用户单击超链接时，我想启动 JavaScript 函数并在新窗口中启动页面。如果可能的话，我的偏好是在新页面中使用 HTML，以防人们缺少 JavaScript 作为后备。

以下代码启动页面但不启动 JavaScript。

```
<a href ="http://www.google.com" target ="_blank" onclick="JavaScript:loadText()">click</a> 
```

有人可以推荐正确的方法吗？谢谢

# windows - 如何包含来自外部 bat 脚本的值

> ID：13712730
> 
> 赞同：0
> 
> 时间：2012-12-04T22:01:20.763
> 
> 标签：windows, cmd, batch-file

我有一个由下面 6 个不同的 bat 脚本共享的代码，它接受一个输入参数。我想知道我是否可以在单独的 bat 脚本中将这段代码外部化并导入它，所以每次更新这段代码时，我都不必更新所有 6 个 bat 脚本。

代码：

```
:Loop
IF "%1"=="" GOTO Prompt
  SET VAR=%1
  GOTO Continue
SHIFT
GOTO Loop
:Prompt
  set /p VAR="Check which value? "
  GOTO Continue
:Continue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:28:33.310

您的代码应该将 VAR 设置为第一个参数。如果第一个 arg 缺失，那么您想提示输入一个值。

首先，我会简化你的逻辑。

```
set "VAR=%~1"
if not defined VAR set /p "VAR=Check which value? " 
```

一旦像上面那样简化，我不明白为什么你会觉得需要外部化代码。但这是可以做到的。

在你的主脚本中

```
call getArg.bat %1 
```

这是getArg.bat

```
set "VAR=%~1"
if not defined VAR set /p "VAR=Check which value? "
exit /b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:33:18.407

是的，使用重定向。

拿这个 solution.bat 文件

```
 set /p myvar=< somestring.txt 
```

其中 somestring.txt 包含“abc”

myvar 现在将作为环境变量与 abc 一起存在。

# database - Microsoft Access 2000 数据库表在删除安全性后不显示

> ID：13712734
> 
> 赞同：1
> 
> 时间：2012-12-04T22:01:37.973
> 
> 标签：database, visual-studio, ms-access

我有一个基本上已经解锁的数据库：我已经删除了数据库密码和 VBA 查询密码，但由于某种原因，数据库中没有内容......但结构和字段仍然存在。

我发现它所使用的应用程序已将所有实际数据放在应用程序数据文件夹中的 Windows 虚拟存储中。根据测试，我 100% 确信数据在此数据库中。

有什么我遗漏的东西——可能是我忘记的另一个密码锁——会导致这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:02:08.657

所有的桌子都被隐藏了。

要在 microsoft access 2007 中修复它：

我在数据库打开时单击了 microsoft 按钮，然后转到访问选项 -> 当前数据库 -> 并选中“显示导航窗格”。之后，我转到当前数据库菜单下的导航选项并选中“显示隐藏对象”和“显示系统对象”。

修复了问题！

# php - 想要一个特定页面上的不同导航菜单...不工作

> ID：13712735
> 
> 赞同：0
> 
> 时间：2012-12-04T22:01:40.997
> 
> 标签：php, javascript, navigation, hashtag

好的，首先，我不精通 JS 或 PHP。我通常可以改变现有的脚本来做我想做的事，但不能从头开始写东西。我在这个例子中提到的任何 URL 都是虚构的。

考虑到这一点，我正在使用一个包含 CSS、PHP 和 JS 的模板来设计一个页面，所有这些我都真正修改过。每个页面都有一个页眉、一个导航栏和一个页脚，它们通过 include 语句调用。我理解那部分。但是，在其中*一个*页面上，我想要一个不同的导航栏，它不会改变。

我注意到了什么： JS 似乎将点击的 URL 从[http://www.example.com/test.php](http://www.example.com/test.php)更改为[http://www.example.com/#test.php](http://www.example.com/#test.php)

这样做的目的是什么？另外...如果我在需要新导航栏的页面上手动删除 URL 中的主题标签，则会显示新导航栏！但是，如果我切换页面，它将使 URL 的结尾像 ...test.php#newpage.php

所以我要么需要弄清楚如何修改它以不将主题标签放在 URL 中（但如果有一个令人信服的理由，它当然可以保留），或者如何让那个页面显示备用导航-酒吧。备用导航栏是一个目录，因此 html 中包含主题标签，可将用户引导至页面的特定部分...... html 中的这些主题标签是否会以某种方式发生冲突，这就是它不会显示的原因，或者？？？嘎！

任何帮助，将不胜感激。

好的，这是 javascript 的一部分……它是唯一看起来像在 URL 中引用 # 的部分：

```
 var $fadeWrapper = $("#fade-wrapper"),
    $allNav = $("#main-nav a"),
    $allListItems = $("#main-nav li"),
    url = '',
    liClass = '',
    hash = window.location.hash,
    $ajaxLoader = $("#ajax-loader");

$("body").attr("id", "");    

if (hash) {
    hash = hash.substring(1);
    liClass = hash.substring(0,hash.length-4);
    url = hash + " #inside-content";
    $fadeWrapper.load(url);
    $("." + liClass).addClass("active");
} else {
    $("#main-nav li:first").addClass("active");
} 
```

**更新：我决定完全删除 javascript。在做一些阅读时，我得出的结论是，标签的存在只是为了让脚本可以判断哪个页面处于活动状态，以便 CSS 突出显示导航栏中的项目之一。它还与导航页面时显示的动画 gif 有关。这些项目中的任何一个都不足以让我拉出更多的头发试图弄清楚这些东西：D 谢谢你的建议，不过！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:13:46.863

很可能会添加哈希标记，因为您单击的链接的 href 值为 #。

难道你不能只创建一个新的头文件（如果那是导航栏代码所在的位置），在该头文件中修改你想要的导航栏，并在你想要不同的页面上包含新文件而不是当前标题导航栏？

# wpf - 如何在内容为空时禁止显示 ListView

> ID：13712746
> 
> 赞同：0
> 
> 时间：2012-12-04T22:03:02.157
> 
> 标签：wpf, xaml, listview

我有一个对象，其中包含一个名为 ValidPhones 的 IEnumerable 作为属性。当我将它绑定到这样的 WPF ListView 时：

```
<ListView DataContext="{Binding ValidPhones}">
  <TextBlock>
    <TextBlock.Text>
      <MultiBinding StringFormat='{}{0}: {1}'>
        <Binding Path='Type' />
        <Binding Path='PhoneNumber' />
      </MultiBinding>
    </TextBlock.Text>
  </TextBlock>
</ListView> 
```

即使 Enumerable 为空，它仍会在 UI 中显示“：”。有没有一种简单的方法来抑制这种情况的发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:08:24.253

您在 wpf 中使用什么后端语言？我相当确定它是 c# 或 VB.NET。我不是专家，但我很确定你可以从代码中访问 ListViews 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:01:58.473

**编辑**：对不起......我错过了顶部的评论。当您解决问题时，请将您的线程标记为已关闭，这样像我这样愚蠢的人就不会发布无用的答案。

当然！事实上，有几个选项供您考虑。

选项 1：当列表为空时，您始终可以将控件的可见性更改为“折叠”，这将使您的应用程序无法在 xaml 中呈现它。这可以从您的 C# 代码或您的 xaml 中完成。这是一个可行的解决方案，但请注意您没有其他依赖于列表视图位置的控件，因为将可见性设置为“折叠”将告诉您的 applicaitonPage 根本不呈现列表视图，这可能会造成混乱与您的布局。

选项 2：您可以为 iEnumerable 设置“IsEmpty”属性，然后将该属性绑定到文本块的文本属性。如果你这样做，那么你将需要一个转换器，它可以根据 IEnumerable 的值返回一个空白字符串或正确格式化的字符串。这个选项稍微复杂一些，但它的好处是让你的列表视图不受影响，这样其他控件就不会四处移动。

请让我知道您是否需要这些选项中的任何一个的帮助，或者他们是否需要澄清:)

# php - 为什么不输出第一个元素数组？

> ID：13712753
> 
> 赞同：0
> 
> 时间：2012-12-04T22:03:22.510
> 
> 标签：php

为什么不输出第一个元素数组？

我使用下一个代码

```
$product_idn='123112$2313213';
$count_products=substr_count($product_idn,'$')+1;

$idn_products=explode('$',$product_idn);
$name_products='';
$s=0;
while($s<=$count_products){
$prod=$idn_products[$s];
$res10=mysql_query("..... WHERE `product_idn`='$prod'");
$i10=mysql_fetch_assoc($res10);
$name_products.=$i10['name'].', ';
$s++;
}
echo $name_products;
//give 2313213,, 
```

为什么不输出第一个元素数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:07:24.300

关于什么

```
$product_idn='123112$2313213';

$idn_products=explode('$',$product_idn);
$name_products='';

foreach($idn_products as $val){
$res10=mysql_query("..... WHERE `product_idn`='$val'");
$i10=mysql_fetch_assoc($res10);
$name_products.=$i10['name'].', ';
}
echo $name_products; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:14:13.987

原始代码中使用了许多不寻常的技术。在不知道这段代码的目的的情况下，我最好的猜测是：

```
$product_idn = '123112$2313213';

$idn_products = explode('$', $product_idn);

$name_products = '';
foreach($product_idn as $value) {
    $res10 = mysql_query("SELECT name FROM ... WHERE `product_idn`='$value'");
    if ($res10) {
        $i10 = mysql_fetch_assoc($res10);
        $name_products .= $i10['name'].', ';
    }
}
$name_products = rtrim(', ', $name_products);
echo $name_products; 
```

# html - 调整窗口大小时如何正确显示内容？

> ID：13712756
> 
> 赞同：0
> 
> 时间：2012-12-04T22:03:35.120
> 
> 标签：html, css, twitter-bootstrap, resize

我的页面分为 3 个不同的模块：左侧导航、中心图像和右侧社交侧边栏。下面是格式化此内容的 css。调整窗口大小时遇到​​问题；中心的图像与左侧的导航重叠，侧边栏被推到页面底部并与左侧导航的末尾重叠。导航模块/侧边栏是固定的。

我使用 twitter bootstrap 作为基础。

关于导致此问题的原因以及如何解决此问题的任何想法？

# css

```
div.sidebar{
    width: 120px;
    position:fixed; 
    top:12%; 
    left:2%;
    overflow-y:auto;
    height:100%;
} 
```

# html

```
 <div class ="container-fluid">
<div class = "row-fluid">
<!-- left navigation div -->
    <div class = "span1" style = "width:120px;">
            <div class = "sidebar" >
            #navigation
            </div>
        </div>

<!-- middle images div -->
        <div class = "span8" style = "width: 900px;">
            #lot of images
        </div>

 <!-- social sidebar -->
        <div class = "span2" style = "margin-left: 10px; ">
            #social module with images
        </div>
</div>
</div> 
```

# 当我把窗户变小

![在此处输入图像描述](../Images/b107fb20f1918f873297d7620ad57daf.png)

# 普通的

![在此处输入图像描述](../Images/f41e9f97ce6a90631966697caafb43f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:10:37.243

您是否考虑过响应式网页设计？

你说你使用 twitter 引导程序？看看这个：

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

将此添加到头部

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

更改 HTML：

```
<div class="container-fluid">
 <div class="row-fluid">
   <!-- left navigation div -->
     <div class="span4">
        <div class = "sidebar" >
         #navigation
        </div>
    </div>

    <!-- middle images div -->
     <div class="span6">
        #lot of images
    </div>

     <!-- social sidebar -->
     <div class="span4">
        #social module with images
    </div>
</div> 
```

未测试。我也不是 100% 流体容器有多大，我认为它是 12，如果它是 16，你将不得不改变跨度，所以它们加起来是 16

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:02:10.480

> 我看到的几个问题...

1.  您通过添加宽度完全违背了“.row-fluid”和框架的目的？删除网格元素的所有宽度分配（即.container、.row、.span(x)）并让框架完成它的设计目的......为您创建宽度。如果您需要根据生成的内容调整宽度，请将其添加到 .span(x) 的块级元素内。
2.  你的跨度加起来不超过 12。你有 14 个，这绝对会是最后一个环绕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T23:17:47.577

用内联宽度覆盖跨度会导致奇怪的行为。你可以改用默认的 TBS 脚手架吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T07:34:59.717

**建议：**

1.删​​除你为风格添加的所有额外内容，让 bootstrap 做这些事情！

2.总是用“好”来测试你的div

**把你的代码像这样**

```
<div class="container">
 <div class="row" style="margin-top:20px;">
  <div class="col-lg-3 col-sm-12 ">
    <div class="well"></div>
  </div>
  <div class="col-lg-3 col-sm-12 ">
    <div class="well"></div>
  </div>
  <div class="col-lg-3 col-sm-12 ">
    <div class="well"></div>
  </div>
  <div class="col-lg-3 col-sm-12 ">
    <div class="well"></div>
  </div>
</div> 
```

col-lg-* 用于大型设备 col-xs-* 用于超小型设备 col-sm-* 用于小型设备

像这样使用它你可以实现你想要的

[Plunker 演示](http://embed.plnkr.co/W1BkhjXWEuLuHs4WQJWz/preview)

调整浏览器大小以查看效果

# ios - TableView 不显示博客的所有行

> ID：13712759
> 
> 赞同：0
> 
> 时间：2012-12-04T22:03:40.457
> 
> 标签：ios, uitableview, xml-parsing, blogs

我有许多博客应用程序。最近，他们中的一些人开始遇到一些问题。我使用 ASIHTTP 类和 GDataXML 类来解析 wordpress 提要的 xml，并将每个项目（文章）放入一个可变数组中。然后，tableview 应该将所有故事加载到每篇文章的单元格中。我遇到的问题是第一次运行时没有显示新文章，用户必须拉到刷新，然后显示新文章。我刚才在一个应用程序上进行了测试。这篇文章是几个小时前发布的。我运行了应用程序，它不存在。拉动刷新，它显示。完全关闭应用程序，重新启动它，它又消失了。下面是 TableView 实现中的代码：

```
@implementation RootViewController

- (void)refresh {
    self.allEntries = [NSMutableArray array];
    self.queue = [[[NSOperationQueue alloc] init] autorelease];
    self.feeds = [NSArray arrayWithObjects:@"http://bubblycandacebabbles.wordpress.com/?cat=-2008&feed=rss2",
                  nil];

    for (NSString *feed in _feeds) {
        NSURL *url = [NSURL URLWithString:feed];
        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
        [request setDelegate:self];
        [_queue addOperation:request];
    }

}

- (void)viewDidLoad {
    [super viewDidLoad];    
    [activity startAnimating];
    //[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbarcopy.png"] forBarMetrics:UIBarMetricsDefault];
    self.title = @"Blog";
        CGFloat nRed=111.0/255.0;
    CGFloat nBlue=209/255.0;
    CGFloat nGreen=229.0/255.0;
    UIColor *myColor=[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1];
    UIBarButtonItem *font = [[UIBarButtonItem alloc] initWithTitle:@"Change Font Size" style:UIBarButtonItemStylePlain target:self action:@selector(fontsizes)];
    self.navigationController.navigationItem.rightBarButtonItem = font;
    self.tableView.backgroundColor = myColor;

    self.refreshControl = [[UIRefreshControl alloc] init];

    [self.refreshControl addTarget:self action:@selector(refreshInvoked:forState:) forControlEvents:UIControlEventValueChanged];
    [self refresh];
}
-(void) refreshInvoked:(id)sender forState:(UIControlState)state {
    // Refresh table here...
    [_allEntries removeAllObjects];
    [self.tableView reloadData];
    [self refresh];
}

- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {            

        NSString *blogTitle = [channel valueForChild:@"title"];                    

        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {

            NSString *articleTitle = [item valueForChild:@"title"];
            NSString *articleUrl = [item valueForChild:@"link"];            
            NSString *articleDateString = [item valueForChild:@"pubDate"];        
            NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
            NSString *articleImage = [item valueForChild:@"content:encoded"];
            NSScanner *theScanner;
            NSString *gt =nil;
            theScanner = [NSScanner scannerWithString:articleImage];

            NSString *comments = [articleUrl stringByAppendingString:@"#respond"];
            NSString *commentslink = [NSString stringWithFormat: @"<a href=\"%@\">Leave A Comment</a>",comments];
            // find start of tag
            [theScanner scanUpToString:@"alt=\"\" width=" intoString:NULL] ; 

            // find end of tag
            [theScanner scanUpToString:@"/>" intoString:&gt] ;
            // replace the found tag with a space
            //(you can filter multi-spaces out later if you wish)
            NSString *test = [articleImage stringByReplacingOccurrencesOfString:[ NSString stringWithFormat:@"%@", gt] withString:@"alt=\"\" width=\"150\" height=\"150\""];
            NSString *final = [test stringByReplacingOccurrencesOfString:@"float:none;height:30px" withString:@"float:none;height:1px"]; 
            NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
            [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
            [dateFormatter setDateStyle:NSDateFormatterShortStyle];
            NSString *dateofarticle = [dateFormatter stringFromDate:articleDate];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            NSString *smalltitle = [defaults objectForKey:@"Title"];
            NSString *smallbody = [defaults objectForKey:@"Article"];
            NSString *bodyoftext = [[[[[[[[[[[@"<head><body bgcolor=\"#6fd1e5\" text=\"#CC0099\"><style type='text/css'>a > img {pointer-events: none;cursor: default;max-width: 310;}</style></head><b><font size=" stringByAppendingString: smalltitle ] stringByAppendingString:@"><div align=\"left\"><FONT FACE=\"noteworthy\">" ]stringByAppendingString:articleTitle] stringByAppendingString:@"</font></b><font size=" ] stringByAppendingString:smallbody ] stringByAppendingString:@"><div align=\"left\"><FONT FACE=\"noteworthy\">"] stringByAppendingString:dateofarticle] stringByAppendingString:@"</div></p><FONT FACE=\"noteworthy\">"] stringByAppendingString:final] stringByAppendingString:commentslink]stringByAppendingString:@"</FONT>"];

            RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle
                                                      articleTitle:articleTitle
                                                        articleUrl:articleUrl
                                                       articleDate:articleDate
                                                      articleImage:bodyoftext] autorelease];
            [entries addObject:entry];
        }      
    }

}

- (void)parseFeed:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    if ([rootElement.name compare:@"rss"] == NSOrderedSame) {
        [self parseRss:rootElement entries:entries];
    } else if ([rootElement.name compare:@"feed"] == NSOrderedSame) {                       
        [self parseAtom:rootElement entries:entries];
    } else {
        NSLog(@"Unsupported root element: %@", rootElement.name);
    }    
}

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [_allEntries count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";  

    Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {  
        cell = [[Cell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
    NSString *substring = @"http://bubblycandacebabbles.files.wordpress.com";
    NSRange textRange = [entry.articleImage rangeOfString:substring];

   if(textRange.location != NSNotFound){
        NSString *thearticleImage = entry.articleImage;
        NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"src=\"([^\"]+)\"" options:NSRegularExpressionCaseInsensitive error:NULL];
        NSString *someString = thearticleImage;
        NSString *oneurl = [someString substringWithRange:[expression rangeOfFirstMatchInString:someString options:NSMatchingCompleted range:NSMakeRange(0, [someString length])]];
       NSString *finalstring = [oneurl stringByReplacingOccurrencesOfString:@"src=\"" withString:@""];
       NSString *thefinalstring = [finalstring stringByReplacingOccurrencesOfString:@"\"" withString:@""];
        NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
        [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
        [dateFormatter setDateStyle:NSDateFormatterShortStyle];
       CGFloat nRed=204.0/255.0;
       CGFloat nBlue=0/255.0;
       CGFloat nGreen=153.0/255.0;
       UIColor *myColortext=[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1];
        NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
        UIFont *cellFont = [UIFont fontWithName:@"noteworthy" size:16];
        UIFont *cellFont2 = [UIFont fontWithName:@"noteworthy" size:12];    
        CALayer * l = [cell.imageView layer];
        [l setMasksToBounds:YES];
        [l setCornerRadius:11];
        [l setBorderWidth:2.0];
        [l setBorderColor:[[UIColor blackColor] CGColor]];
        cell.textLabel.text = entry.articleTitle;
       cell.textLabel.numberOfLines = 2;
       cell.detailTextLabel.adjustsFontSizeToFitWidth = YES;

        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ - Mother May I Blog", articleDateString];

        cell.textLabel.font = cellFont;
        cell.detailTextLabel.font = cellFont2;
       cell.textLabel.textColor = myColortext;
       cell.detailTextLabel.textColor = myColortext;
        [cell.imageView setImageWithURL:[NSURL URLWithString:thefinalstring] placeholderImage:[UIImage imageNamed:@"iphoneicon@2x.png"]];

    }
   else    {
        CALayer * l = [cell.imageView layer];
        [l setMasksToBounds:YES];
        [l setCornerRadius:11];
        [l setBorderWidth:2.0];
        [l setBorderColor:[[UIColor blackColor] CGColor]];
        NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
        [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
        [dateFormatter setDateStyle:NSDateFormatterShortStyle];
        NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
        UIFont *cellFont = [UIFont fontWithName:@"noteworthy" size:16];    
        UIFont *cellFont2 = [UIFont fontWithName:@"noteworthy" size:12];    
        cell.imageView.image = [UIImage imageNamed:@"iphoneicon@2x.png"];
        cell.textLabel.text = entry.articleTitle;
       cell.textLabel.numberOfLines = 2;
       cell.detailTextLabel.adjustsFontSizeToFitWidth = YES;

        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ - Mother May I Blog", articleDateString];
       CGFloat nRed=204.0/255.0;
       CGFloat nBlue=0/255.0;
       CGFloat nGreen=153.0/255.0;
       UIColor *myColortext=[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1];
        cell.textLabel.font = cellFont;
        cell.detailTextLabel.font = cellFont2;
       cell.textLabel.textColor = myColortext;
       cell.detailTextLabel.textColor = myColortext;

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:15:49.793

你需要调用

```
[self.tableView reloadData]; 
```

在您的数据完成加载后的某个时间点。你如何做到这一点有点棘手，你需要某种方式来判断你的操作队列何时为空。或者，理论上您可以在队列中的每个操作完成后调用它，这样表将一次填充一个。如果用户连接速度较慢，这可能会导致问题，因为重新加载表可能会导致用户体验跳跃，而且我对`reloadData`从不同线程调用的线程安全性并不乐观

# sql - CASE 语句和 DECODE 是等价的吗？

> ID：13712763
> 
> 赞同：17
> 
> 时间：2012-12-04T22:04:02.377
> 
> 标签：sql, oracle, case

看起来简单的 CASE 表达式和 DECODE 函数是等价的，它们返回的结果应该是相同的。他们是吗？

该文档对[简单的 CASE 表达式](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/fundamentals.htm#CHDJCCGI)有以下说明：

> 简单的 CASE 表达式返回 selector_value 匹配选择器的第一个结果。剩余的表达式不被计算。如果没有 selector_value 匹配 selector，则 CASE 表达式如果存在则返回 else_result，否则返回 NULL。

将此与[DECODE 功能](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions049.htm#SQLRF00631)进行比较，描述似乎相同。

> DECODE 将 expr 与每个搜索值一一进行比较。如果 expr 等于一次搜索，则 Oracle 数据库返回相应的结果。如果未找到匹配项，则 Oracle 返回默认值。如果省略默认值，则 Oracle 返回 null。

由于[搜索到的 CASE 表达式](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/fundamentals.htm#LNPLS281)可以等同于简单的，这也可以解释为相同。

这三个语句似乎都返回相同的结果，0。

```
select case 1 when 2 then null else 0 end as simple_case
     , case when 1 = 2 then null else 0 end as searched_case
     , decode(1, 2, null, 0) as decode
  from dual 
```

简单的 CASE 表达式和 DECODE 函数（以及在特定情况下搜索的 CASE 表达式）是否总是返回相同的结果？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-04T22:04:02.377

简短的回答，不。

稍微长一点的答案是差不多。

似乎从每个语句获得的结果是相同的*。*如果我们使用[DUMP](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions055.htm#SQLRF00635)函数来评估返回的数据类型，你会明白我的意思：

```
SQL> select dump(case 1 when 2 then null else 0 end) as simple_case
  2       , dump(case when 1 = 2 then null else 0 end) as searched_case
  3       , dump(decode(1, 2, null, 0)) as decode
  4    from dual;

SIMPLE_CASE        SEARCHED_CASE      DECODE
------------------ ------------------ -----------------
Typ=2 Len=1: 128   Typ=2 Len=1: 128   Typ=1 Len=1: 48 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/7)

您可以看到 DECODE 的数据类型是 1，而两个 CASE 语句“返回”数据类型为 2。使用 Oracle 的[数据类型摘要](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#BABCGCHG)，DECODE 返回一个 VARCHAR2（数据类型 1），而 CASE 语句“返回” " 数字（数据类型 2）。

我认为这是因为，顾名思义，DECODE 是一个*函数*，而 CASE 不是，这意味着它们在内部的实现方式不同。没有真正的方法可以证明这一点。

你可能认为这并没有真正影响任何事情。如果你需要它是一个数字，Oracle会在[隐式转换规则](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#i53062)下将字符隐式转换为数字，对吗？这也不是真的，它[不会在 UNION 中工作，](https://stackoverflow.com/q/12057748/458741)因为数据类型*必须*相同；Oracle 不会进行任何隐式转换以方便您。其次，这是 Oracle 关于隐式转换的说法：

> Oracle 建议您指定显式转换，而不是依赖隐式或自动转换，原因如下：
> 
> *   使用显式数据类型转换函数时，SQL 语句更容易理解。
>     
>     
> *   隐式数据类型转换会对性能产生负面影响，尤其是在将列值的数据类型转换为常量而不是相反时。
>     
>     
> *   隐式转换取决于它发生的上下文，并且可能不会在每种情况下都以相同的方式工作。例如，从日期时间值到 VARCHAR2 值的隐式转换可能会返回意外年份，具体取决于 NLS_DATE_FORMAT 参数的值。
>     
>     
> *   隐式转换的算法可能会随着软件版本和 Oracle 产品的变化而变化。显式转换的行为更可预测。

这不是一个漂亮的清单。但倒数第二点让我很好地了解了约会。如果我们采用上一个查询并将其转换为使用日期的查询：

```
select case sysdate when trunc(sysdate) then null 
                    else sysdate 
       end as simple_case
     , case when sysdate = trunc(sysdate) then null 
            else sysdate 
       end as searched_case
     , decode(sysdate, trunc(sysdate), null, sysdate) as decode
  from dual; 
```

再一次，在这个查询中使用 DUMP，CASE 语句返回数据类型 12，一个 DATE。DECODE 已转换`sysdate`为 VARCHAR2。

```
SQL> select dump(case sysdate when trunc(sysdate) then null
  2                           else sysdate
  3              end) as simple_case
  4       , dump(case when sysdate = trunc(sysdate) then null
  5                   else sysdate
  6              end) as searched_case
  7       , dump(decode(sysdate, trunc(sysdate), null, sysdate)) as decode
  8    from dual;

SIMPLE_CASE          
---------------------------------- 
Typ=12 Len=7: 120,112,12,4,22,18,7 
SEARCHED_CASE
---------------------------------- 
Typ=12 Len=7: 120,112,12,4,22,18,7
DECODE
---------------------------------- 
Typ=1 Len=19: 50,48,49,50,45,49,50,45,48,52,32,50,49,58,49,55,58,48,54 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/9)

请注意（在 SQL Fiddle 中）已使用会话[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)将 DATE 转换为字符。

将日期隐式转换为 VARCHAR2 可能会导致问题。如果您打算使用[TO_CHAR](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129)将日期转换为字符，那么您的查询将在您不期望的地方中断。

```
SQL> select to_char( decode( sysdate
  2                         , trunc(sysdate), null
  3                         , sysdate )
  4                 , 'yyyy-mm-dd') as to_char
  5    from dual;
select to_char( decode( sysdate
                *
ERROR at line 1:
ORA-01722: invalid number 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/23)

同样，日期算术不再起作用：

```
SQL>
SQL>
SQL> select decode(sysdate, trunc(sysdate), null, sysdate) + 1 as decode
  2    from dual;
select decode(sysdate, trunc(sysdate), null, sysdate) + 1 as decode
       *
ERROR at line 1:
ORA-01722: invalid number 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/22)

有趣的是，如果可能的结果之一为 NULL，则 DECODE 仅将表达式转换为 VARCHAR2。如果默认值为 NULL，则不会发生这种情况。例如：

```
SQL> select decode(sysdate, sysdate, sysdate, null) as decode
  2    from dual;

DECODE
-------------------
2012-12-04 21:18:32

SQL> select dump(decode(sysdate, sysdate, sysdate, null)) as decode
  2    from dual;

DECODE
------------------------------------------    
Typ=13 Len=8: 220,7,12,4,21,18,32,0 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/17)

请注意，解码返回的数据类型为 13。这没有记录，但我认为它是日期算术等的一种日期类型。

简而言之，尽可能避免 DECODE；您可能不一定会得到您期望的数据类型。[引用汤姆凯特的](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1243867216406)话：

> 解码有些晦涩——CASE 非常非常清楚。在解码中容易做的事情在 CASE 中容易做，在解码中很难或几乎不可能做的事情在 CASE 中容易做。案例，逻辑明智，胜出。

* * *

为了完整起见，DECODE 和 CASE 之间存在两个*功能*差异。

1.  DECODE 不能在 PL/SQL 中使用。
2.  CASE 不能用于直接比较空值

    ```
    SQL> select case null when null then null else 1 end as case1
      2        , case when null is null then null else 1 end as case2
      3        , decode(null, null, null, 1) as decode
      4    from dual
      5         ;

         CASE1      CASE2 DECODE
    ---------- ---------- ------
             1 
    ```

    [SQL小提琴](http://www.sqlfiddle.com/#!4/ca3d7/21)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-05T04:07:22.010

Ben 就 DECODE 和 CASE 之间的区别写了一个冗长的答案。他演示了 DECODE 和 CASE 可能会为显然相同的一组值返回不同的数据类型，而没有正确解释为什么会发生这种情况。

DECODE() 非常规范：它始终是第一个*结果*参数的数据类型。Oracle 将隐式转换应用于所有其他结果参数。如果（比如说）第一个结果参数是数字并且默认值是日期，它将引发错误。

```
ORA-00932: inconsistent datatypes: expected NUMBER got DATE 
```

这在文档中有所描述：[了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions049.htm#i1017437)。

在第一种情况下，第一个结果参数是 NULL，Oracle 决定将其视为 VARCHAR2。如果我们将其更改为第一个结果参数为数字且默认值为 null，则 DECODE() 语句将返回一个 NUMBER；一个 DUMP() 证明是这样的。

而 CASE 坚持所有返回的值都具有相同的数据类型，如果不是这种情况，将引发编译错误。它不会应用隐式转换。这也包含在文档中。[在这里阅读](http://docs.oracle.com/cd/E11882_01/server.112/e26088/expressions004.htm#sthref1848)。

差异归结为这一点。以下 DECODE 语句将运行，CASE 语句不会：

```
select decode(1, 1, 1, '1') from dual;

select case 1 when 1 then 1 else '1' end from dual; 
```

[强制性的 SQL 小提琴。](http://sqlfiddle.com/#!4/9869c/1)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-05-27T11:49:50.917

我知道我为时已晚，但在这里发帖是因为如果有人搜索它，希望它会有所帮助。我为此创建了一个 MsSql 脚本-

```
Declare @Var varchar(399)='DECODE(MyColumnName,''A'',''Auto'',''M'',''Manual'')'

Begin
Declare @Count int, @Counter int=1
Declare @TempTable table (ID int identity(1,1),Items varchar(500))
Declare @SqlText varchar(max)
Select @Var=Replace(Replace(@Var,'DECODE(',''),')','')

Insert Into @TempTable
Select * FROM [dbo].[Split] ( @Var ,',')
--Select * from @TempTable
Select @Count=Count(ID) from @TempTable

While(@Counter<=@Count)
Begin
    If(@Counter=1)
    Begin
    Select @SqlText='Case ' +Items from @TempTable Where ID=1
    End

    Else If(@Counter=@Count)
    Begin
    Select @SqlText+=' Then ' +Items +' End' from @TempTable Where ID=@Counter 
    End

    Else If(@Counter%2=0)
    Begin
    Select @SqlText +=' When ' +Items from @TempTable Where ID=@Counter
    End

    Else If(@Counter%2=1)
    Begin
    Select @SqlText +=' Then ' +Items from @TempTable Where ID=@Counter
    End

    Set @Counter+=1
End

Select @SqlText SqlServerCaseStatement
End 
```

我在上面的脚本中使用了 Split 函数，如果你需要这个函数，你可以参考 Romil 的答案 - [How to split a comma-separated value to columns](https://stackoverflow.com/questions/10581772/how-to-split-a-comma-separated-value-to-columns)

# ruby-on-rails - 嵌入文档更改时，Mongoid history_track gem 不跟踪更改

> ID：13712764
> 
> 赞同：1
> 
> 时间：2012-12-04T22:04:02.453
> 
> 标签：ruby-on-rails, ruby, mongoid, versioning

我有以下三个模型：

```
class ItemGroup
    include Mongoid::Document

    embeds_many :item_attributes

    field :name
end

class ItemAttribute
    include Mongoid::Document
    include Mongoid::History::Trackable

    embedded_in :item_group

    track_history :track_create => true

    field :name
    field :min
    field :max
    field :type

    embeds_many :item_attribute_values
end

class ItemAttributeValue
    include Mongoid::Document
    include Mongoid::History::Trackable

    embedded_in :item_attribute

    track_history :on => [:name, :order], :track_create => true, :scope => :item_group_attribute, :track_delete => true

    field :name
    field :order
end 
```

如何使用它的一个例子：

```
item_group: {
  name: "Televisions",
  item_attributes: [
    { name: "Screen Size", min: 14, max: 90 type: "single" },
    { name: "Screen Type", min:0, max: 0, type: "multiple", item_attribute_values: [
        { name: "LCD", order: 0 },
        { name: "LED", order: 1 },
        { name: "Plasma", order: 2 }
     ]}
  ]
} 
```

我真正关心的版本历史是 ItemAttributes。现在，如果 ItemAttribute 中的某些内容发生了更改（例如：名称、最小值、最大值或类型），则会创建一个新版本。但是，如果 ItemAttributeValue 被更新、删除或添加，它不会创建新的 ItemAttribute——这正是我们想要的。例如，如果有人将 ItemAttributeValue { name: 'CRT', order: 3 } 添加到“Screen Types”，则“Screen Types” ItemAttribute 应该获得一个新版本。版本 1 将具有“LCD”、“LED”、“等离子”，版本 2 将具有“LCD”、“LED”、“等离子”、“CRT”。如果有人删除了 ItemAttributeValue，那将创建另一个版本。

以前，ItemAttribute 没有嵌入到 ItemGroup 中，因此我能够使用 Mongoid::Versioning，并且完全按照我的意愿工作。但是，决定将 ItemAttribute 嵌入到 ItemGroup 中，我无法再使用 Mongoid::Versioning，所以我切换到 Mongoid::History::Tracks。这适用于跟踪模型内的更改，但它不跟踪模型嵌入文档的更新时间。

我开始认为我将不得不派生 mongoid_history 以添加具有选项或告诉 gem 跟踪模型嵌入文档的更新的功能。

以前有人遇到过这样的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:06:38.243

找到了解决我的问题的 gem，mongoid-delorean。

# primes - 带素数的代码

> ID：13712766
> 
> 赞同：-1
> 
> 时间：2012-12-04T22:04:09.297
> 
> 标签：primes

我正在尝试从在线评审系统中解决一个问题。我有一个可行的解决方案，但效率不够。这是问题所在：

在产品 n = a∙b 中，我们可以想象出最小的数 n，比如 k 种方式？产品 a∙b 和 b∙a 是其中一种方法，其中所有数字都是自然数 (1≤ k ≤50)。

输入一个数字k。输出一个数字 n。

我的代码没有通过四次测试。k=31,37,47太慢了。我一直在想这个问题2天，但没有改善。这是我的代码，如果您有任何想法，请分享。

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<math.h>

    int prime[10000];
    long x,j,i,flag,k,length,p,checker,count,number;

    int main()
    {

    prime[0]=2;
    scanf("%ld",&k);
    //I find prime numbers between 1 and 1000\. 1000 can be changed, just for testing

    for (i=3;i<=1000;i=i+2)
            {
            flag=0;
            for (j=2;j<=sqrt(i);j++)
                    {
                    if(i%j==0)
                            {
                            flag=1;
                            break;
                            }
                    }
            if(flag==0)
                    {
                    x++;
                    prime[x]=i;
                    }
            }

    length=x;
    //this loop is too big I know, again for testing. I suspect, there must be a way to make some changes to this for loop 

    for (i=1;i<10000000000;i++)
            {
            number=i;
            p=1;
            for(x=0;x<=length;x++)
                    {
                    if(prime[x]>sqrt(i))
                    break;
                    count=0;
                    while(number%prime[x]==0)
                            {
                            number=number/prime[x];
                            count++;       
                            }
                    p=p*(count+1); 
//I find prime factors of numbers and their powers, then calculate number of divisors

                    }
            //printf("%d\n",p);
            //number of ways is just number of divisors/2 or floor (divisors/2)+1
            if(p%2==0)
            checker=p/2;
            else
            checker=floor(p/2)+1;
            if(checker==k)
                    {
                    printf("%ld\n",i);
                    break;
                    }
            }

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:10:07.703

如果我正确理解了这个问题，它会问你哪个是最小的数 n 正好有 2k 个除数（我应该考虑 1 和 n 吗？）

实际上如果一个数有一个除数a，那么n / a = b是一个整数并且n = a* b（只计算一次a和b，所以你应该除以二除数）

编辑

这样做确实很耗时。所以这就是想法；

对于 n = p1^(a1)*p2^(a2)...pn^(an) 形式的数 n （这是数的素数分解），除数的数是 (a1 + 1)(a2 +1)...(一个+1)

因此，如果您想找到一个具有 k 除数的数，请分解 k。然后将最大的因子分配给最小的素数；例如如果 k = 2*5*7，那么 n 应该是 2^7*3^5*5^2

我知道这不是因为我没有考虑到 (a, b) 等于 (b, a) 但是稍微玩一下它应该可以工作

例子

取 k = 37。然后将数字加倍 - （考虑对称性）。你得到 74。现在，如果你可以想象 n 为 n = n * 1，那么你只需要因式 74（即 2 * 37）；然后给 36 到 2 和 1 到 3，前导 n = 2^(36)*3 = 206158430208

如果不能，则需要在之前得到的数字上加 1（在本例中为 74 + 1 = 75 = 25*3）；这样你得到 n = 2^24 * 3^2 = 150994944

如果以上都不是，那我可能是错的......

# python - 将 Django 视图类渲染为字符串或响应

> ID：13712767
> 
> 赞同：3
> 
> 时间：2012-12-04T22:04:11.670
> 
> 标签：python, django

我有一个模板，我希望它既可以直接提供服务，也可以嵌入到我的 Django 应用程序中的任意其他模板中。我试图为它创建一个看起来像这样的视图类：

```
class TemplateView(View):
    def get(self, request):
        context = self._create_context(request)
        return render_to_response('template.html', context)

    def get_string(self, request):
        context = self._create_context(request)
        return render_to_string('template.html', context)

    def _create_context(self, request):
        context = {}
        # Complex context initialization logic...
        return context 
```

我已经连接`get`到我的 Django URL。但是，我无法弄清楚如何实例化`TemplateView`以便可以`get_string`从其他视图调用。

必须有更好的方法来做到这一点。想法？

**更新：**我看到一些人谈论在内部提出请求并使用`response.content`，这将使我不必编写`get_string`方法。所以，也许一个更好的问题是：我如何`TemplateView`从另一个角度提出请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:53:25.073

我会遵循 django 的 CBV 模式：它确定通过`dispatch`什么方法返回。默认基于`request.method`. 为什么不基于传递给的任何其他参数`dispatch()`？

所以子类 dispatch 并给它一个方法来确定是否返回`get_string`。

```
def dispatch(self, request, *args, **kwargs):
    if 'as_string' in kwargs:
         return self.get_string(request)        
    return super(TemplateView, self).dispatch(request, *args, **kwargs)

response = TemplateView.as_view()(request, as_string=True) 
```

# html - 无法在 IE 中渲染 Html5 视频

> ID：13712774
> 
> 赞同：0
> 
> 时间：2012-12-04T22:05:05.330
> 
> 标签：html, internet-explorer-9, html5-video

谁能告诉我为什么以下网站的“MockUps”部分下的视频可以在 chrome 中运行，但不能在 IE9 中运行？

我已经使用 html5 来实现视频

[http://homepages.shu.ac.uk/~a8025613/Index.html](http://homepages.shu.ac.uk/~a8025613/Index.html)

视频元素的编码如下：

```
<video id=0 controls width=320 height=240>
<source src="House_1/House_1.ogv" type='video/ogg; codecs="theora, vorbis"'/>
<source src="House_1/House_1.webm" type='video/webm' >
<source src="House_1/House_1.mp4" type='video/mp4'>
<p>Video is not visible, most likely your browser does not support HTML5 video</p>
</video> 
```

# mysql - MySQL 使用 MaxMind GeoLocation 进行自定义功能

> ID：13712779
> 
> 赞同：0
> 
> 时间：2012-12-04T22:05:13.917
> 
> 标签：mysql, sql, function, geolocation

我按照本教程使用 MaxMind 的最新数据：

[http://www.atomodo.com/code/how-to-really-import-the-maxmind-geoip-free-country-csv-file-into-mysql](http://www.atomodo.com/code/how-to-really-import-the-maxmind-geoip-free-country-csv-file-into-mysql)

我做了一个测试：

```
SELECT locid FROM blocks WHERE INET_ATON('174.36.207.186') BETWEEN startIPNum AND endIPNum 
```

在大约 5 秒内给了我 12120

```
SELECT city FROM location WHERE locid = 12120; 
```

给了我华盛顿。现在，我添加了自定义函数（IPTOLOCID），当我这样测试时确实很快：

```
SELECT IPTOLOCID("174.36.207.186") 
```

它在 0.0007 秒内返回 12120。但是当我尝试这样做时：

```
SELECT city FROM location WHERE locID = IPTOLOCID("174.36.207.186"); 
```

mysql只是挂起......我做错了什么？

# jquery-mobile - 复选框 onclick 和 onchange 事件调用了两次，请看简单示例

> ID：13712781
> 
> 赞同：0
> 
> 时间：2012-12-04T22:05:21.170
> 
> 标签：jquery-mobile

如果我注释掉 jquery.mobile...js 文件，这很好用，包括它，每次我单击复选框时，onclick 事件都会触发两次。onchange 事件也是如此。有任何想法吗？

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <script>
        function tester() { alert("I get called twice on click"); }
    </script>
    <input id="abc" name="myCheckbox" onchange="tester()" type="checkbox" value="true" />

    <label for="myCheckbox">Click me</label>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:36:00.157

这是设计使然，因为这两个事件都在发生。见例子：http: [//jsfiddle.net/Twisty/T3qmG/](http://jsfiddle.net/Twisty/T3qmG/)

**HTML：**

```
<html>
    <head>
        <title>Checkbox Test</title>
    </head>
    <body>
        <div data-role="page">
            <div data-role="header">
                <h2>Checkbox Test</h2>
            </div>
            <div data-role="content">
                    <input type="checkbox" id="checkbox-choice-1" />
                    <label for="checkbox-choice-1">Click me</label>
            </div>
        </div>
    </body>
</html> 
```

**查询：**

```
$(document).ready(function(){
    $("#checkbox-choice-1").click(function(){
        alert("Click event triggerd.");
    });
    $("#checkbox-choice-1").change(function(){
        alert("Change event triggerd.");
    });
}); 
```

如果可能的话，我会建议分离你的脚本代码。您可以为一个或两个事件提供一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:27:51.283

您的标记格式不正确。`<label>`标签指向一个不存在的 id 。它指向“myCheckbox”，但输入标签的 id 是“abc”。此更改解决了您的问题，并且标记得到了正确增强。

```
<input id="abc" name="myCheckbox" onchange="tester()"
    type="checkbox" value="true" />
<label for="abc">Click me</label> 
```

# iphone - 我们如何让应用程序用户知道连接是通过 SSL 建立的？

> ID：13712782
> 
> 赞同：5
> 
> 时间：2012-12-04T22:05:23.100
> 
> 标签：iphone, ios, ipad, ssl

向用户表明他们所在的应用程序正在通过安全连接传输数据的标准程序是什么？我知道移动 Safari 会在 URL 上方显示一个锁，但我不确定我们应该在我们的应用程序中做什么。

美国银行在其登录页面上显示一个锁和“安全区域”。这是否与 Verisign 之类的验证服务相关联，还是只是一个图形，给人一种安全保证的错觉？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:05:08.277

美国银行使用与其网上银行相同的欺诈保护、加密和安全登录。锁定图标只是为了让应用程序的用户知道他们的数据正在安全地传输。

# sql-server - SQL Server 中这两个索引有什么区别？

> ID：13712783
> 
> 赞同：1
> 
> 时间：2012-12-04T22:05:25.457
> 
> 标签：sql-server, sql-server-2008, tsql, indexing

我根据索引向导针对不同场景的建议创建了这两个索引。我想知道它们是相同的还是不同的？

**索引（1）：**

```
CREATE NONClustered Index [IX_Rec_RecoveryDate_RecoveryDateTypeKey_CaseId] 
ON [Rec].[RecoveryDate] ([RecoveryDateTypeKey], [CurrentFlag])
INCLUDE (CaseId) 
```

**索引（2）：**

```
CREATE NONClustered Index [IX_Rec_RecoveryDate_currentFlag] 
ON [Rec].[RecoveryDate] ([CurrentFlag])
INCLUDE (CaseId, RecoveryDateTypekey) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:23:22.360

问题是，您要优化哪些查询？

这两个指标非常不同。第一个索引非常适合这样的查询：

```
SELECT CaseId 
FROM Rec.RecoveryDate
WHERE RecoveryTypeKey = 5
AND CurrentFlag = 1 -- or whatever 
```

第一个索引 WHERE 子句中的列。SQL Server 将能够搜索指定的 RecoveryDateTypeKey 和 CurrentFlag。由于 CaseId 包含在索引叶节点中，SQL Server 不必重新连接到表来获取它。

使用相同的查询，第二个索引的行为会有所不同。如果幸运的话，SQL Server 会搜索 CurrentFlag 为 1 的所有记录。然后，它会遍历这些叶节点，寻找匹配的 RecoveryTypeKey。另一方面，如果有很多 CurrentFlag 为 1 的记录，SQL Server 可能会选择执行索引扫描。

再说一次，如果你想优化这样的查询：

```
SELECT CaseId, RecoveryTypeKey
FROM Rec.RecoveryDate
WHERE CurrentFlag = 1 
```

第一个索引没有用，因为 CurrentFlag 是索引中的第二列。SQL Server 将无法搜索 CurrentFlag = 1，因此它可能会进行索引扫描。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:11:00.497

他们是不同的。索引 1 索引两列，索引 2 索引一列但在节点中包含两列。

区别基本上意味着如果您使用两列进行搜索，索引 1 可能比索引 2 快得多。
索引 2 会比一列的普通索引更好，因为如果您需要结果中的另一列，索引 2已经具有该值，因此不需要使用实际表进行查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:42:47.407

索引存储相同的信息（Recovery 表中每行 1 行，列 caseid、RecoveryDateTypeKey、CurrentFlag），但以不同的顺序组织，因此可用于不同的查询。

第一个索引可以处理 where 子句，例如

```
WHERE RecoveryDateTypeKey = @p1 --Prefix matching! 
```

和

```
WHERE RecoveryDateTypeKey = @p1 AND CurrentFlag = @p2 
```

第二个索引只处理

```
WHERE CurrentFlag = @p2 
```

如果 CurrentFlag 是低基数列，例如 bit 或 char(1) (Y/N)，那么我建议使用过滤索引。

```
CREATE INDEX IX_REC_Yes_fltr on Recovery (RecoveryDateTypeKey) WHERE (CurrentFlag = 'Y')
INCLUDE (CaseId) --Assumes that CurrentFlag = 'Y' is the most used value

--Maybe even a second one.
CREATE INDEX IX_REC_No_fltr on Recovery (RecoveryDateTypeKey) WHERE (CurrentFlag = 'N')
INCLUDE (CaseId) --Maybe handle CurrentFlag = 'N' as well. 
```

每个过滤索引只包含符合条件的值，因此组合起来它们的大小与未过滤索引的大小相同。

# jquery - 如何在jQuery自动完成中将'get'参数发送到'source'回调

> ID：13712785
> 
> 赞同：0
> 
> 时间：2012-12-04T22:05:36.590
> 
> 标签：jquery

我正在尝试向源回调添加一个 get 参数，如下所示：

```
 source: "/getvalues?myparam="+$('#myId).val 
```

但是，当我使用 Chrome 上的“网络”选项卡检查时，实际上它的服务器是什么：

```
getvalues?myparam=&term=a 
```

$('#myId).val 确实包含字符'a'，但我不知道如何/为什么生成'&term='？如何在源回调中发送“get”参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:08:22.807

```
$('#myId').val() //p00f! [that should do it ^_^] 
```

# jquery - JQuery 控制台日志到文件

> ID：13712788
> 
> 赞同：2
> 
> 时间：2012-12-04T22:05:54.867
> 
> 标签：jquery

我正在尝试找到一个好的 jQuery 插件，它将控制台错误记录到文件中，以便我可以跟踪用户遇到的任何错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:10:19.177

您唯一的选择是设置一个函数，将 AJAX 信息发送到您的服务器，然后您可以将其写入本地服务器上的文件。jQuery 本身不会神奇地将文件写入您的服务器。

# c# - Metro - 编写异步 c# 操作并从 javascript 调用

> ID：13712792
> 
> 赞同：3
> 
> 时间：2012-12-04T22:06:11.353
> 
> 标签：c#, javascript, asynchronous, microsoft-metro, runtime-type

我创建了一个 Metro 应用程序，它由 - ac# windows 运行时组件 - 一个 javascript 应用程序组成，它包含 UI 并且是主应用程序。

在 c# 组件中，我创建了一个**异步**方法：

```
async public void createDocument() {
} 
```

但是当我尝试从 javascript 代码中调用它时，我无法使用 .done() 或 then() 函数来处理方法 completed evet，因为出现错误：javascript error, cannot call done() from object not设置为对象的实例。

如果我尝试将 Task 或 Task 分配给该函数，我会遇到另一个错误，这告诉我 Task 不是 Windows 运行时类型，而是使用 IAsyncOperation、IAsyncAction、ecc..。

那么，**如何在 c# windows 运行时组件中创建一个异步函数并从处理 done() 或 then() 事件的 javascript 中调用它**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:36:32.727

我发现一篇文章似乎与您遇到的问题有关。我自己没有这样做，但它的要点是你不能将 C# 中的 async 关键字用于 Javascript 承诺 - 你必须以稍微不同的方式包装该方法：

代替：

```
public sealed class Class1
{
    public async void testAsync()
    {
        // do this asynchronously ...
    }
} 
```

尝试：

```
public sealed class Class1
    {
        public IAsyncActionWithProgress<Result> testAsync()
        {
            return AsyncInfo.Run<Result>((token, result) =>
                Task.Run<Result>(()=>
                    {
                        // do this asynchronously ...
                        return new Result();
                    }

                ));
        }
    }

    public sealed class Result { ... }
    } 
```

我从 Ronald Widha 的这篇文章中复制并粘贴了示例 - [http://www.ronaldwidha.net/2012/05/10/winrt-consumer-preview-calling-c-csharp-async-class-libraries-from-javascript -winjs-promises-using-then-clause/](http://www.ronaldwidha.net/2012/05/10/winrt-consumer-preview-calling-c-csharp-async-class-libraries-from-javascript-winjs-promises-using-then-clause/)它是在消费者预览期间编写的，因此它可能在那时和最终版本之间发生了变化

希望这会对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:59:44.653

仅供参考，如果您需要在过程中调用异步方法，则需要使用：

```
public static IAsyncOperation<IList<string>> DownloadAsStringsAsync(string id)
        {
            return Task.Run<Type retourned>(async () =>
            {
                var data = await AsyncMethod(...);
                return (somethingOfTypeRetourned;
            }).AsAsyncOperation();
        } 
```

# ios - 具有比例宽度和文本驱动高度的动态 UILabel

> ID：13712795
> 
> 赞同：5
> 
> 时间：2012-12-04T22:06:24.600
> 
> 标签：ios, autolayout

我正在尝试以**编程**方式创建一个包含两个 UILabel 子视图的容器视图，其行为如下：

*   容器宽度固定到其父视图；它的高度被限制为适合标签
*   标签水平放置，它们之间有标准间距（8pts）
*   左侧标签宽度为容器宽度的 25%
*   右标签宽度填满可用空间，减去标准水平间距
*   长文本应该在字边界处被打破，跨越多行；两个标签都必须垂直增长以适应长文本

我用`numberOfLines = 0`和定义了标签`lineBreakMode = NSLineBreakByWordWrapping`。

注意容器的大小是完全动态的；它的宽度由它的父视图决定，而它的高度由它的子视图（标签）决定。标签的大小也是动态的；它们的宽度与容器宽度成正比，它们的高度取决于文本的长度。

除了最后一项之外，我已经能够通过以下约束（伪代码）实现上述所有目标。A是左标签，B是右标签。

*   A.top == 容器.top
*   B.top == 容器.top
*   A.leading = container.leading
*   A.trailing == B.leading - 8
*   B.trailing == container.trailing
*   A == .25 * 容器宽度
*   container.height >= A.height
*   container.height >= B.height

最后两个约束旨在拉伸容器以适应较高的标签，但布局引擎似乎忽略了标签可能是多行的事实。也就是说，无论文本的长度如何，我总是会显示一行。

那么我需要添加/修改/删除哪些约束才能实现上述全套行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T20:24:50.143

要使您的标签自动调整高度，您需要执行以下操作：

1.  为标签设置布局约束（您实际所做的）
2.  设置低优先级的高度约束。应该比 ContentCompressionResistancePriority 更爱
3.  设置 numberOfLines = 0
4.  将 ContentHuggingPriority 设置为高于标签的高优先级
5.  为标签设置 preferredMaxLayoutWidth。标签使用该值来计算其高度

例如：

```
self.descriptionLabel = [[[UILabel alloc] init] autorelease];
self.descriptionLabel.numberOfLines = 0;
self.descriptionLabel.lineBreakMode = NSLineBreakByWordWrapping;
self.descriptionLabel.preferredMaxLayoutWidth = 200;

[self.descriptionLabel setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisVertical];
[self.descriptionLabel setContentCompressionResistancePriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisVertical];
[self.descriptionLabel setTranslatesAutoresizingMaskIntoConstraints:NO];
[self addSubview:self.descriptionLabel];

NSArray* constrs = [NSLayoutConstraint constraintsWithVisualFormat:@"|-8-[descriptionLabel_]-8-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(descriptionLabel_)];
[self addConstraints:constrs];
[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-8-[descriptionLabel_]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(descriptionLabel_)]];
[self.descriptionLabel addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[descriptionLabel_(220@300)]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(descriptionLabel_)]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T13:33:37.540

确保你设置

1.  **横向和纵向内容抗压优先**。如果您不希望 label 截断其内容，请将其设置为 1000.ie `required`。
2.  **内容拥抱优先**。查看此[答案](https://stackoverflow.com/a/16281229/1798394)以了解其工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:54:51.923

将标签的高度约束的优先级设置为低值，并尝试在代码中设置约束。

# python - 混合编码的文件 - Python

> ID：13712798
> 
> 赞同：2
> 
> 时间：2012-12-04T22:06:35.143
> 
> 标签：python, unicode, encoding, file-encodings

我有一些混合编码的文件，我相信 UTF-8 和 UTF-16LE。它是一些英文字母的混合，但主要是汉字。目标：使用 Python 将文件全部转换为 UTF-8。'\n' 应该是换行符。

[类似问题](https://stackoverflow.com/questions/10009753/python-dealing-with-mixed-encoding-files)的答案似乎会有所帮助。不幸的是，（我相信）因为 UTF-16 不是可变长度编码，所以当我尝试首先使用 UTF-8 解码文件但又使用 UTF-16 时，我收到此错误：

> UnicodeDecodeError：“utf16”编解码器无法解码位置 0 中的字节 0xff：截断数据。

文件数据如下。我已经玩了一段时间了，似乎什么都做不了。还有很多我也不确定。我知道文件的开头有一个BOM，但是我对其余的编码问题不太了解。谢谢你的帮助！

打印 %r，使用 open 函数：

```
'\xff\xfe"\x00W\x00a\x00n\x00t\x00e\x00d\x00C\x00r\x00o\x00p\x00p\x00e\x00d\x00/\x001\x003\x00.\x00j\x00p\x00g\x00"\x00\t\x00"\x00 \x00\\\x00n\x00\\\x00n\x00\\\x00u\x008\x006\x001\x001\x00,\x00-\x00\'\x00\\\x00u\x006\x00b\x006\x004\x00\\\x00u\x005\x006\x00d\x00b\x00\\\x00u\x009\x000\x00e\x001\x00\\\x00u\x005\x004\x00b\x008\x00\\\x00u\x007\x000\x000\x009\x00]\x00 \x00\\\x00u\x009\x000\x00e\x001\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00"\x00\\\x00u\x005\x004\x000\x00c\x00\\\x00u\x006\x00a\x003\x009\x00\\\x00u\x004\x00e\x004\x00b\x00\\\x00u\x005\x004\x001\x00f\x00[\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x008\x00d\x006\x006\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00u\x009\x000\x002\x003\x00\\\x00u\x004\x00e\x00d\x009\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00u\x005\x009\x008\x002\x00\\\x00u\x004\x00e\x009\x004\x00\\\x00u\x005\x00d\x00b\x00d\x00\\\x00u\x003\x000\x001\x00d\x00Z\x00\\\x00u\x008\x007\x00f\x002\x00\\\x00n\x00\\\x00u\x007\x00e\x003\x00d\x00\\\x00u\x008\x00f\x001\x00d\x00\\\x00u\x002\x000\x002\x006\x00\\\x00u\x005\x007\x00c\x003\x00 \x00\\\x00u\x005\x004\x00e\x00a\x00\\\x00u\x006\x00c\x009\x00b\x00\\\x00u\x005\x007\x000\x00b\x00\\\x00u\x006\x00a\x003\x009\x00\\\x00u\x004\x00e\x005\x00f\x00-\x00 \x00\\\x00u\x005\x00c\x007\x001\x00\\\x00u\x005\x005\x00d\x00a\x00\\\x00u\x003\x000\x001\x005\x00\\\x00u\x005\x000\x001\x001\x00\\\x00u\x007\x00f\x00a\x009\x00\\\x00u\x004\x00e\x001\x008\x00\\\x00u\x008\x007\x003\x004\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00u\x007\x00d\x002\x00b\x00\\\x00u\x009\x006\x007\x00d\x00\\\x00u\x009\x00c\x00f\x003\x00\\\x00u\x009\x006\x007\x00d\x00\\\x00u\x007\x006\x00c\x00e\x00\\\x00n\x00\\\x00u\x006\x007\x009\x00d\x00\\\x00u\x004\x00e\x005\x00f\x00\'\x00 \x00\\\x00u\x008\x008\x006\x001\x00\\\x00u\x005\x00c\x007\x001\x00\\\x00u\x006\x00c\x00f\x000\x00\\\x00u\x005\x00c\x007\x001\x00\\\x00u\x005\x00c\x00b\x001\x00\\\x00u\x005\x00c\x007\x001\x00\\\x00u\x004\x00e\x005\x00f\x00o\x00\\\x00u\x005\x009\x00d\x004\x00\\\x00u\x007\x00b\x00e\x004\x00\\\x00u\x007\x003\x00c\x00a\x00\\\x00u\x007\x006\x007\x00d\x00\\\x00u\x004\x00f\x00d\x007\x00\\\x00u\x005\x006\x00e\x000\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x006\x007\x002\x00c\x00\\\x00u\x008\x00e\x002\x00b\x00\\\x00u\x009\x008\x000\x006\x00!\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00n\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x006\x002\x00b\x005\x00\\\x00u\x004\x00e\x00e\x005\x00\\\x00u\x004\x00e\x000\x000\x00 \x00\\\x00u\x009\x000\x00e\x001\x00\\\x00u\x005\x004\x000\x00d\x00\\\x00u\x008\x000\x000\x00c\x00\\\x00u\x005\x00c\x000\x00a\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x005\x001\x00a\x000\x00\\\x00u\x003\x000\x001\x005\x00\\\x00u\x00f\x00f\x000\x00c\x00\\\x00u\x003\x000\x001\x00d\x00 \x00\\\x00u\x005\x009\x002\x00b\x00[\x00\\\x00u\x008\x00f\x00e\x005\x00\\\x00u\x005\x003\x00c\x00a\x00\\\x00u\x007\x008\x003\x007\x00\\\x00u\x006\x00d\x003\x002\x00\\\x00u\x005\x004\x00a\x00f\x00l\x00\\\x00u\x008\x006\x005\x005\x00\\\x00u\x005\x00b\x002\x004\x00\\\x00u\x005\x005\x00b\x005\x00I\x00\\\x00u\x005\x009\x004\x00f\x00\\\x00n\x00\\\x00u\x008\x008\x00d\x004\x00\\\x00u\x005\x000\x001\x001\x00\\\x00u\x005\x00f\x007\x00c\x00\\\x00u\x006\x00b\x006\x004\x00\\\x00u\x008\x005\x006\x00a\x00\\\x00u\x006\x00c\x006\x00a\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x009\x006\x008\x003\x00o\x004\x00[\x00\\\x00u\x005\x009\x00d\x001\x00\\\x00u\x008\x000\x005\x006\x00\\\x00u\x005\x003\x00e\x00d\x00}\x00]\x00\\\x00u\x004\x00e\x009\x004\x00\\\x00u\x004\x00e\x00f\x000\x00\\\x00u\x006\x000\x009\x004\x00\\\x00u\x008\x000\x001\x000\x00\\\x00u\x005\x00b\x005\x008\x00\\\x00u\x008\x007\x001\x008\x00\\\x00u\x005\x00d\x00f\x002\x00\\\x00u\x005\x004\x001\x000\x00\\\x00u\x007\x004\x002\x00a\x00\\\x00u\x003\x000\x001\x00d\x00 \x00\\\x00u\x008\x00c\x00b\x004\x00\\\x00n\x00\\\x00u\x005\x009\x002\x009\x00\\\x00u\x006\x00d\x00a\x00f\x00\\\x00u\x008\x002\x00e\x005\x00\\\x00u\x005\x003\x001\x007\x00\\\x00u\x009\x001\x003\x000\x00 \x00\\\x00u\x003\x000\x001\x00d\x00\\\x00u\x002\x000\x003\x002\x00 \x00\\\x00u\x008\x000\x006\x00f\x00\\\x00u\x007\x006\x00e\x007\x00\\\x00u\x005\x004\x002\x005\x00\\\x00u\x004\x00e\x00e\x005\x00\\\x00u\x003\x000\x000\x00e\x00\\\x00u\x005\x003\x004\x003\x00\\\x00u\x008\x00f\x000\x009\x00\\\x00u\x009\x001\x00c\x00d\x00\\\x00u\x006\x00b\x006\x001\x00\\\x00u\x005\x003\x00d\x006\x00\\\x00u\x007\x008\x007\x00c\x00\\\x00u\x003\x000\x000\x00d\x00\\\x00u\x005\x00b\x00e\x00b\x00\\\x00u\x005\x001\x00f\x00a\x00\\\x00u\x005\x00b\x005\x000\x00\\\x00u\x003\x000\x001\x00d\x00\\\x00u\x004\x00e\x00c\x003\x00 \x00\\\x00u\x003\x000\x000\x00e\x00\\\x00n\x00\\\x00u\x004\x00e\x004\x00b\x00\\\x00u\x009\x009\x009\x006\x00)\x00 \x00\\\x00u\x008\x002\x00f\x004\x00\\\x00u\x003\x000\x000\x008\x00\\\x00u\x005\x007\x009\x00a\x00\\\x00u\x006\x000\x001\x00d\x00\\\x00u\x006\x005\x00b\x00c\x00\\\x00u\x006\x00b\x006\x004\x00\\\x00u\x008\x000\x003\x003\x00@\x00\\\x00n\x00\\\x00u\x004\x00e\x00c\x001\x00 \x00\\\x00u\x005\x003\x004\x001\x00]\x00 \x00\\\x00u\x006\x007\x002\x00c\x00\\\x00u\x008\x00e\x002\x00b\x00\\\x00u\x005\x00c\x00a\x00b\x00\\\x00u\x007\x00f\x00a\x004\x00\\\x00u\x005\x00c\x004\x001\x00\\\x00u\x003\x000\x000\x008\x00\\\x00u\x005\x00c\x007\x00e\x00}\x00\\\x00u\x005\x004\x007\x001\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x005\x002\x009\x00b\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x005\x006\x00b\x004\x00\\\x00u\x003\x000\x001\x00d\x00\'\x00\\\x00u\x008\x000\x008\x00b\x00\\\x00u\x009\x00e\x00b\x00b\x00\\\x00u\x005\x003\x00e\x00d\x00\\\x00u\x005\x002\x00d\x008\x00\\\x00u\x005\x00c\x007\x00e\x00l\x00\\\x00u\x006\x005\x002\x00f\x00\\\x00u\x006\x00d\x004\x001\x00\\\x00u\x005\x005\x008\x009\x00\\\x00u\x005\x00d\x00f\x00e\x00\\\x00u\x006\x00e\x000\x005\x00_\x00I\x00\\\x00u\x005\x00f\x00d\x006\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x009\x00f\x003\x00b\x00\\\x00n\x00{\x00 \x00\\\x00u\x006\x00b\x002\x001\x00\\\x00u\x006\x001\x00f\x008\x00\\\x00u\x006\x00b\x008\x00a\x00\\\x00u\x009\x008\x006\x00f\x00\\\x00u\x008\x009\x008\x00b\x00\\\x00u\x008\x002\x000\x00a\x00\\\x00u\x006\x007\x002\x00c\x00\\\x00u\x006\x007\x000\x009\x00\\\x00u\x006\x00b\x005\x00f\x00.\x00 \x00\\\x00u\x005\x00f\x008\x001\x00\\\x00u\x005\x00c\x007\x00e\x00\\\x00u\x009\x00b\x00a\x00a\x00\\\x00u\x004\x00e\x00e\x005\x00\\\x00u\x006\x006\x00f\x004\x00)\x00 \x00\\\x00u\x004\x00f\x008\x00b\x00\\\x00u\x005\x009\x008\x002\x00\'\x00\\\x00u\x006\x002\x006\x003\x00_\x00\\\x00u\x003\x000\x000\x00e\x00l\x00\\\x00u\x005\x00c\x007\x00e\x00\\\x00n\x00\\\x00u\x008\x003\x007\x003\x00\\\x00u\x006\x005\x009\x007\x00!\x00\\\x00u\x009\x005\x00a\x009\x00\\\x00u\x004\x00e\x004\x00b\x00\\\x00u\x009\x001\x00d\x001\x00\\\x00u\x009\x001\x00f\x005\x00\\\x00u\x006\x00e\x00a\x00a\x00\\\x00u\x008\x00e\x002\x00b\x00\\\x00u\x005\x005\x008\x00e\x00\\\x00u\x003\x000\x000\x001\x00 \x00\\\x00u\x006\x001\x004\x004\x00\\\x00u\x006\x00c\x009\x00b\x00\\\x00u\x005\x007\x000\x00b\x00 \x00\\\x00u\x009\x000\x00e\x001\x00\\\x00u\x006\x005\x008\x007\x00\\\x00u\x008\x009\x003\x006\x00\\\x00u\x004\x00e\x001\x005\x00\\\x00u\x003\x000\x001\x00e\x00\\\x00u\x005\x000\x002\x003\x00\\\x00u\x004\x00e\x000\x00b\x00\\\x00u\x005\x003\x004\x001\x00 \x00\\\x00u\x005\x00c\x007\x00e\x00\\\x00n\x00\\\x00n\x00 \x00\\\x00n\x00\\\x00n\x00 \x00\\\x00n\x00\\\x00n\x00 \x00\\\x00n\x00\\\x00n\x00 \x00\\\x00u\x003\x000\x001\x001\x00 \x00 \x00\\\x00u\x003\x000\x001\x000\x00I\x00\\\x00u\x000\x002\x00c\x00b\x00 \x00\\\x00u\x003\x000\x001\x000\x00\\\x00u\x003\x000\x001\x001\x00\\\x00u\x008\x005\x001\x004\x00l\x00I\x00_\x00I\x00(\x00\\\x00u\x002\x000\x003\x005\x00\\\x00u\x002\x000\x003\x002\x00l\x00|\x00\\\x00u\x005\x00f\x00d\x006\x00|\x00\\\x00u\x009\x004\x008\x000\x00|\x00\\\x00u\x000\x002\x00c\x00b\x00|\x00 \x00\\\x00u\x000\x002\x00c\x00b\x00 \x00\\\x00u\x000\x002\x00c\x00b\x00 \x00\\\x00u\x003\x000\x000\x009\x00_\x00\\\x00u\x003\x000\x001\x001\x00I\x00L\x00 \x00\\\x00u\x003\x000\x001\x00d\x00l\x00\\\x00n\x00\\\x00n\x00 \x00 \x00 \x00\\\x00n\x00\\\x00n\x00\\\x00u\x003\x000\x001\x00d\x00 \x00\\\x00u\x005\x004\x00b\x00d\x00,\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x006\x003\x00c\x000\x00\\\x00u\x004\x00f\x008\x00d\x00\\\x00u\x007\x006\x00b\x00f\x00^\x00\\\x00u\x005\x002\x00a\x000\x00\\\x00u\x003\x000\x001\x00e\x00\\\x00u\x005\x002\x007\x004\x00]\x00\\\x00u\x009\x005\x007\x007\x00\\\x00u\x004\x00e\x008\x008\x00\\\x00u\x006\x006\x00f\x000\x00\\\x00u\x005\x009\x002\x002\x00\\\x00u\x009\x001\x00d\x001\x00\\\x00u\x006\x001\x00f\x007\x00 \x00\\\x00u\x007\x007\x003\x008\x00\\\x00u\x005\x004\x00e\x00a\x00\\\x00u\x002\x000\x003\x002\x00\\\x00u\x005\x003\x005\x00a\x00\\\x00u\x006\x001\x007\x006\x00)\x00 \x00.\x00\\\x00u\x008\x00a\x005\x00b\x00\\\x00u\x005\x00c\x007\x00e\x00\'\x00\\\x00u\x006\x002\x000\x00c\x00\\\x00u\x002\x000\x002\x006\x00\\\x00n\x00\\\x00u\x006\x007\x005\x000\x00\\\x00u\x004\x00e\x001\x005\x00\\\x00u\x006\x00d\x003\x00e\x00\\\x00u\x004\x00e\x000\x00b\x00\\\x00u\x005\x003\x004\x001\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x005\x00b\x006\x00b\x00\\\x00u\x005\x001\x004\x001\x00\\\x00u\x007\x007\x00f\x003\x00\\\x00u\x005\x002\x000\x000\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x006\x001\x00e\x006\x00\\\x00u\x005\x00b\x00e\x00b\x00\\\x00u\x004\x00e\x008\x008\x00\\\x00u\x003\x000\x000\x001\x00 \x00\\\x00u\x004\x00e\x008\x008\x00_\x00.\x00\\\x00u\x008\x00d\x00b\x004\x00\\\x00u\x006\x006\x00f\x004\x00\\\x00n\x00\\\x00u\x006\x00b\x006\x003\x00o\x00\\\x00n\x00\\\x00n\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x003\x000\x001\x001\x00 \x00\\\x00u\x008\x004\x00b\x00c\x00\\\x00u\x007\x005\x002\x00b\x00\\\x00u\x006\x007\x003\x001\x00\\\x00u\x008\x006\x005\x005\x00\\\x00u\x006\x00d\x003\x00e\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x004\x00f\x00c\x002\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00u\x005\x00c\x007\x00e\x00\\\x00u\x009\x007\x008\x008\x00\\\x00u\x005\x00f\x00e\x00a\x00\\\x00u\x006\x00d\x003\x00e\x00\\\x00u\x004\x00e\x000\x00b\x00\\\x00u\x005\x00e\x00f\x00f\x00\\\x00u\x005\x006\x00d\x00b\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x005\x00b\x006\x00b\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00n\x00\\\x00u\x004\x00e\x001\x005\x00\\\x00u\x005\x009\x00c\x00b\x00\\\x00u\x009\x000\x007\x007\x00)\x00 \x00\\\x00u\x005\x001\x007\x006\x00\\\x00u\x007\x006\x004\x006\x00\\\x00u\x007\x007\x00b\x003\x00\\\x00u\x009\x001\x002\x002\x00\\\x00u\x005\x00e\x00b\x008\x00{\x00\\\x00u\x007\x002\x003\x006\x00)\x00 \x00\\\x00u\x007\x00a\x00c\x00b\x00\\\x00u\x004\x00e\x00e\x005\x00\\\x00u\x002\x000\x003\x002\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00n\x00\\\x00u\x004\x00e\x000\x00b\x00\\\x00u\x004\x00e\x009\x004\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x008\x004\x00c\x000\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x005\x007\x004\x007\x00\\\x00u\x006\x00c\x004\x002\x00\\\x00u\x004\x00e\x001\x005\x00\\\x00u\x007\x000\x000\x009\x00\\\x00u\x008\x000\x008\x007\x00\\\x00u\x005\x007\x00f\x00a\x00\\\x00u\x005\x009\x00c\x00b\x00\\\x00u\x006\x00d\x00d\x00c\x00)\x00 \x00\\\x00u\x007\x00d\x000\x000\x00\\\x00u\x004\x00e\x00e\x005\x00\\\x00u\x005\x00e\x00f\x00f\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00n\x00l\x00l\x00.\x00l\x00I\x00\\\x00u\x005\x00c\x006\x002\x00\\\x00u\x003\x000\x000\x00d\x00o\x00 \x00\\\x00u\x008\x002\x000\x00a\x00\\\x00u\x008\x00b\x005\x00c\x00\\\x00u\x008\x00a\x00a\x004\x00\\\x00u\x005\x007\x002\x008\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00u\x009\x006\x00c\x001\x00\\\x00u\x008\x000\x000\x005\x00\\\x00u\x004\x00e\x004\x00b\x00\\\x00u\x004\x00e\x000\x00a\x00.\x00\\\x00u\x005\x005\x005\x00e\x00\\\x00u\x009\x005\x00c\x006\x00\\\x00u\x008\x003\x007\x00b\x00\\\x00u\x003\x000\x001\x00d\x00\'\x00.\x00\\\x00n\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x006\x006\x002\x00f\x00\\\x00u\x005\x003\x004\x001\x00\\\x00u\x003\x000\x000\x00f\x00^\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x003\x000\x001\x00d\x00 \x00\\\x00u\x007\x00a\x003\x00d\x00\\\x00u\x007\x00a\x007\x004\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x005\x003\x00c\x00b\x00\\\x00u\x008\x006\x009\x005\x00\\\x00u\x007\x005\x001\x00f\x00\\\x00u\x006\x005\x00b\x00c\x00\\\x00u\x006\x006\x000\x00e\x00\\\x00u\x005\x006\x000\x009\x00\\\x00u\x005\x00d\x001\x00d\x00\\\x00u\x007\x005\x003\x002\x00\\\x00u\x008\x00f\x00b\x000\x00\\\x00n\x00\\\x00u\x005\x003\x007\x003\x00\\\x00u\x002\x000\x001\x004\x00\\\x00u\x006\x002\x005\x002\x00\\\x00u\x003\x000\x000\x00f\x00]\x00\\\x00u\x005\x001\x004\x000\x00\\\x00u\x004\x00e\x000\x000\x00 \x00\\\x00u\x004\x00e\x009\x004\x00\\\x00u\x004\x00e\x009\x004\x00\\\x00u\x005\x009\x008\x002\x00\\\x00u\x005\x006\x00d\x00b\x00\\\x00u\x005\x00e\x007\x004\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x004\x00e\x001\x006\x00\\\x00u\x007\x009\x00d\x00f\x00 \x00\\\x00u\x007\x001\x00c\x003\x00\\\x00u\x007\x006\x00b\x00f\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x005\x00c\x004\x005\x00\\\x00u\x009\x000\x001\x005\x00\\\x00u\x005\x003\x00e\x003\x00\\\x00u\x003\x000\x000\x00f\x00\\\x00u\x002\x000\x003\x002\x00\\\x00n\x00\\\x00u\x006\x006\x002\x00f\x00\'\x00\\\x00u\x005\x001\x006\x00c\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x005\x001\x004\x000\x00\\\x00u\x003\x000\x000\x00c\x00\\\x00u\x005\x001\x006\x00b\x00\\\x00u\x004\x00e\x000\x003\x00\\\x00u\x007\x00a\x007\x004\x00\\\x00u\x005\x00e\x007\x004\x00\\\x00u\x002\x000\x003\x005\x00 \x00\\\x00u\x005\x001\x007\x006\x00\\\x00u\x006\x00f\x009\x007\x00\\\x00u\x008\x004\x000\x00b\x00\\\x00u\x008\x00d\x00d\x00d\x00\\\x00u\x006\x007\x000\x009\x00\\\x00u\x005\x00c\x007\x001\x00\\\x00u\x003\x000\x000\x008\x00\\\x00u\x007\x006\x007\x00e\x00\\\x00u\x004\x00e\x000\x003\x00\\\x00u\x005\x003\x004\x001\x00\\\x00u\x003\x000\x000\x00f\x00^\x00\\\x00u\x005\x00e\x007\x004\x00\\\x00n\x00\\\x00n\x00\\\x00u\x009\x006\x006\x001\x00\\\x00u\x008\x000\x007\x006\x00\\\x00u\x007\x00e\x006\x00d\x00\\\x00u\x005\x003\x006\x00f\x00\\\x00u\x007\x00f\x003\x008\x00\\\x00u\x008\x001\x00d\x00f\x00\\\x00u\x006\x006\x00f\x009\x00[\x00\\\x00u\x005\x006\x00c\x00a\x00 \x00\\\x00u\x006\x00b\x006\x002\x00\\\x00u\x005\x005\x008\x00b\x00 \x00.\x00\\\x00u\x005\x00b\x00e\x00c\x00\\\x00u\x008\x002\x00a\x001\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x005\x001\x004\x000\x00\\\x00u\x004\x00e\x000\x000\x00 \x00\\\x00u\x005\x001\x004\x009\x00\\\x00u\x005\x001\x009\x007\x00 \x00\\\x00u\x004\x00e\x000\x000\x00_\x00\\\x00u\x004\x00e\x000\x000\x00\\\x00u\x003\x000\x000\x00d\x00\'\x00\\\x00u\x006\x006\x00c\x004\x00_\x00_\x00\\\x00n\x00\\\x00n\x00\'\x00 \x00 \x00\\\x00n\x00\\\x00n\x00 \x00 \x00 \x00\\\x00n\x00\\\x00n\x00 \x00 \x00\\\x00n\x00\\\x00n\x00 \x00\\\x00n\x00\\\x00n\x00 \x00 \x00 \x00\\\x00n\x00\\\x00n\x00 \x00 \x00 \x00 \x00\\\x00n\x00\\\x00n\x00"\x00\r\x00\n\x00' 
```

使用 MS Word 作为“unicode”打开时的文件文本：

```
"WantedCropped/13.jpg"  " \n\n\u8611,-'\u6b64\u56db\u90e1\u54b8\u7009] \u90e1\u301d\"\u540c\u6a39\u4e4b\u541f[\u300f\u8d66\u301d\u9023\u4ed9\u301d\u5982\u4e94\u5dbd\u301dZ\u87f2\n\u7e3d\u8f1d\u2026\u57c3 \u54ea\u6c9b\u570b\u6a39\u4e5f- \u5c71\u55da\u3015\u5011\u7fa9\u4e18\u8734\u301d\u7d2b\u967d\u9cf3\u967d\u76ce\n\u679d\u4e5f' \u8861\u5c71\u6cf0\u5c71\u5cb1\u5c71\u4e5fo\u59d4\u7be4\u73ca\u767d\u4fd7\u56e0\u2035 \u672c\u8e2b\u9806!\u301d\n\u4e00\u62b5\u4ee5\u4e00 \u90e1\u540d\u800c\u5c0a\u300f\u51a0\u3015\uff0c\u301d \u592b[\u8fe5\u53ca\u7837\u6d32\u54afl\u8655\u5b24\u55b5I\u594f\n\u88d4\u5011\u5f7c\u6b64\u856a\u6c6a\u4e00\u9683o4[\u59d1\u8056\u53ed}]\u4e94\u4ef0\u6094\u8010\u5b58\u8718\u5df2\u5410\u742a\u301d \u8cb4\n\u5929\u6daf\u82e5\u5317\u9130 \u301d\u2032 \u806f\u76e7\u5425\u4ee5\u300e\u5343\u8f09\u91cd\u6b61\u53d6\u787c\u300d\u5beb\u51fa\u5b50\u301d\u4ec3 \u300e\n\u4e4b\u9996) \u82f4\u3008\u579a\u601d\u65bc\u6b64\u8033@\n\u4ec1 \u5341] \u672c\u8e2b\u5cab\u7fa4\u5c41\u3008\u5c7e}\u5471\u300f\u529b\u2035 \u56b4\u301d'\u808b\u9ebb\u53ed\u52d8\u5c7el\u652f\u6d41\u5589\u5dfe\u6e05_I\u5fd6\u4e16\u9f3b\n{ \u6b21\u61f8\u6b8a\u986f\u898b\u820a\u672c\u6709\u6b5f. \u5f81\u5c7e\u9baa\u4ee5\u66f4) \u4f8b\u5982'\u6263_\u300el\u5c7e\n\u8373\u6597!\u95a9\u4e4b\u91d1\u91f5\u6eaa\u8e2b\u558e\u3001 \u6144\u6c9b\u570b \u90e1\u6587\u8936\u4e15\u301e\u5023\u4e0b\u5341 \u5c7e\n\n \n\n \n\n \n\n \u3011  \u3010I\u02cb \u3010\u3011\u8514lI_I(\u2035\u2032l|\u5fd6|\u9480|\u02cb| \u02cb \u02cb \u3009_\u3011IL \u301dl\n\n   \n\n\u301d \u54bd,\u4e16\u63c0\u4f8d\u76bf^\u52a0\u301e\u5274]\u9577\u4e88\u66f0\u5922\u91d1\u61f7 \u7738\u54ea\u2032\u535a\u6176) .\u8a5b\u5c7e'\u620c\u2026\n\u6750\u4e15\u6d3e\u4e0b\u5341\u4e16\u5b6b\u5141\u77f3\u5200\u300f\u61e6\u5beb\u4e88\u3001 \u4e88_.\u8db4\u66f4\n\u6b63o\n\n\u4e00\u3011 \u84bc\u752b\u6731\u8655\u6d3e\u2035 \u4fc2\u53cb\u5c7e\u9788\u5fea\u6d3e\u4e0b\u5eff\u56db\u4e16\u5b6b\u516c\u53cb\n\u4e15\u59cb\u9077) \u5176\u7646\u77b3\u9122\u5eb8{\u7236) \u7acb\u4ee5\u2032\u516c\u53cb\u4e00\u516c\n\u4e0b\u4e94\u4e16\u84c0\u2035 \u5747\u6c42\u4e15\u7009\u8087\u57fa\u59cb\u6ddc) \u7d00\u4ee5\u5eff\u4e00\nll.lI\u5c62\u300do \u820a\u8b5c\u8aa4\u5728\u516c\u53cb\u96c1\u8005\u4e4b\u4e0a.\u555e\u95c6\u837b\u301d'.\n\u53cb\u4e00\u516c\u662f\u5341\u300f^\u4e16\u301d \u7a3d\u7a74\u300f\u53cb\u8695\u751f\u65bc\u660e\u5609\u5d1d\u7532\u8fb0\n\u5373\u2014\u6252\u300f]\u5140\u4e00 \u4e94\u4e94\u5982\u56db\u5e74\u2035 \u4e00\u4e16\u79df \u71c3\u76bf\u516c\u5c45\u9015\u53e3\u300f\u2032\n\u662f'\u516c\u4e00\u5140\u300c\u516b\u4e03\u7a74\u5e74\u2035 \u5176\u6f97\u840b\u8ddd\u6709\u5c71\u3008\u767e\u4e03\u5341\u300f^\u5e74\n\n\u9661\u8076\u7e6d\u536f\u7f38\u81df\u66f9[\u56ca \u6b62\u558b .\u5bec\u82a1\u4e00\u5140\u4e00 \u5149\u5197 \u4e00_\u4e00\u300d'\u66c4__\n\n'  \n\n   \n\n  \n\n \n\n   \n\n    \n\n" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:23:17.943

这看起来根本不像混合，它看起来像纯 UTF-16。但是一旦它被解码，它确实包含一堆`\n`和`\uXXXX`字符串。大概您想将所有这些转换为字符。

```
>>> print x.decode('utf-16').decode('unicode_escape')
"WantedCropped/13.jpg"  " 

蘑,-'此四郡咸瀉] 郡〝"同樹之吟[』赦〝連仙〝如五嶽〝Z蟲 
```

将字符串转换为 Unicode 后，很容易转换为 UTF-8：

```
>>> y = x.decode('utf-16').decode('unicode_escape')
>>> z = y.encode('utf-8') 
```

# php - 如何使用由 aes-256-ecb 加密的 as3crypto 字符串解密？

> ID：13712799
> 
> 赞同：3
> 
> 时间：2012-12-04T22:06:39.327
> 
> 标签：php, actionscript-3, aes, ecb, as3crypto

[字符串在这里](https://stackoverflow.com/a/3422787/1826684)用 php 加密。可以使用[以下](http://www.tools4noobs.com/online_tools/decrypt/)参数对其进行解密：Rijndael-256、ECB 和 Base64。但它不能被我的 ActionScript 代码解密：

```
var text:String = "Some data";
var key:ByteArray = new ByteArray();
key.writeUTFBytes("SomePassword");
key.position = key.length;
for (var i:int = key.length; i < 256 / 8; i++) {
    key.writeByte(0);
}
var pad:IPad = new NullPad();
var cipher:ICipher = Crypto.getCipher("aes-256-ecb", key, pad);
var data:ByteArray = Base64.decodeToByteArray(text);
cipher.decrypt(data);
trace(data.toString()); 
```

**升级版：**

“无法解密”意味着我得到了错误的纯文本。

在 php 中，纯文本首先由 aes-256-ecb 加密。然后用Base64编码。在 ActionScript 中，这些步骤以相反的顺序完成。

**UPD2：**

测试编码解码：

```
var key:ByteArray = new ByteArray();
key.writeUTFBytes("Some password");
key.position = key.length;
for (var i:int = key.length; i < 256 / 8; i++) {
    key.writeByte(0);
}
trace(key.toString());
var data:ByteArray = new ByteArray();//plain text
data.writeUTFBytes("Hello, my dear World! Hello, the Sun! Hello, the Moon! Hello! Hello! Hello!");
var pad:IPad = new NullPad();
var cipher:ICipher = Crypto.getCipher("aes-256-ecb", key, pad);
trace(data.toString());//trace plain text
cipher.encrypt(data);
trace(data.toString());//trace encrypted text
cipher.decrypt(data);
trace(data.toString());//trace decrypted text 
```

停止后的输出`cihper.encrypt(data)`为：

```
Some password
Hello, my dear World! Hello, the Sun! Hello, the Moon! Hello! Hello! Hello!
[Fault] exception, information=Error: Error #2030: End of file found. 
```

**UPD3：**

它适用于 PKCS5 填充：

```
var pad:IPad = new PKCS5();
var cipher:ICipher = Crypto.getCipher("aes-256-ecb", key, pad);
pad.setBlockSize(cipher.getBlockSize()); 
```

输出是：

```
Some password
Hello, my dear World! Hello, the Sun! Hello, the Moon! Hello! Hello! Hello!
$ú^{±àÙ[pm|x¿9¡ÃZsI D¾`©4¾þÂõ,J
('èfÑk1ôì&­ªQƆfbÇåòþ§VµÄs   ¦p<iÿ
Hello, my dear World! Hello, the Sun! Hello, the Moon! Hello! Hello! Hello! 
```

**UPD4：**

对于从 php (as [here](https://stackoverflow.com/a/3422787/1826684) ) 获取的数据，带有 PKCS5 填充的代码在此处停止[运行](https://github.com/timkurvers/as3-crypto/blob/master/src/com/hurlant/crypto/symmetric/PKCS5.as#L34)。并且使用 Null 填充它不会停止但解密的数据是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:57:54.800

引用上一篇文章中的代码：

```
return trim(
    base64_encode(
        mcrypt_encrypt(
            MCRYPT_RIJNDAEL_256,
            $sSecretKey, $sValue, 
            MCRYPT_MODE_ECB, 
            mcrypt_create_iv(
                mcrypt_get_iv_size(
                    MCRYPT_RIJNDAEL_256, 
                    MCRYPT_MODE_ECB
                ), 
                MCRYPT_RAND)
            )
        )
    ); 
```

MCRYPT_RIJNDAEL_256 不是 AES。MCRYPT_RIJNDAEL_128 是。Rijndael 具有可变的块大小。AES 是 Rijndael 的一个子集，具有固定的块大小。

MCRYPT_RIJNDAEL_* 后面的数字是指块大小。所以 MCRYPT_RIJNDAEL_256 是具有 256 位块大小的 Rijndael。MCRYPT_RIJNDAEL_128 是具有 128 块大小的 Rijndael，即 AES。

此外，如果您要使用 MCRYPT_MODE_ECB，我会将 mcrypt_create_iv() 调用替换为由一堆空字节组成的空字符串。ECB 作为块模式不使用 IV。

[最后，我个人的建议是使用phpseclib，一个纯 PHP AES 实现](http://phpseclib.sourceforge.net/crypt/examples.html)，因为这对 mcrypt 来说是非常反直觉的。

# sublimetext2 - 如何在 Sublime Text 2 中使用 rbenv 配置 Compass 构建？

> ID：13712801
> 
> 赞同：0
> 
> 时间：2012-12-04T22:06:40.283
> 
> 标签：sublimetext2, compass-sass, rbenv

尝试在 OSX 下使用[rbenv](https://github.com/sstephenson/rbenv)和默认的 Compass 构建文件构建 SASS 文件会导致：

```
/bin/sh: compass: command not found
[Finished in 0.2s with exit code 127] 
```

怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:06:40.283

将此添加到您的`~/Library/Application Support/Sublime Text 2/Packages/Compass/Compass.sublime-build`文件中：

```
"osx": {
    "path": "/usr/local/bin:/Users/USERNAME/.rbenv/shims:$PATH"
}, 
```

您可能需要重新启动 Sublime。

# android - Android app OOM (Out Of Memory) 进程优先级调整

> ID：13712809
> 
> 赞同：12
> 
> 时间：2012-12-04T22:07:24.973
> 
> 标签：android, out-of-memory, scheduler, launcher

我正在开发一个 Android 启动器（主屏幕替换）应用程序并遇到启动器在低内存情况下被杀死。当用户回到家并且必须等待时，这显然不是很好。

在我的研究中，我发现 Android 将进程分为几个优先级组，从最高到最低：

系统

执着的

前景

可见的

可感知的

服务

家

以前的

B 服务

背景

您可以通过执行以下命令检查哪些进程： adb shell dumpsys meminfo

我能找到的关于这个主题的最全面的文档是：http: [//developer.android.com/guide/components/processes-and-threads.html#Lifecycle](http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle)

但是，它并没有清楚地描述上述所有组。具体来说，

1.  一个过程如何/何时被认为是“可感知的”？一些应用程序（例如[Go Launcher EX](https://play.google.com/store/apps/details?id=com.gau.go.launcherex&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5nYXUuZ28ubGF1bmNoZXJleCJd)）似乎已经知道如何在不在前台时保持在此类别中。这样，它就不会经常被杀死。他们是怎么做到的？

    我从 adb shell dumpsys 活动中发现 Go Launcher Ex 被视为前台服务。我能找到的关于这个主题的唯一文档说你需要在状态栏中放置一个持久通知。然而，Go Launcher Ex 以某种方式绕过了这个要求。我不知道如何：-（

2.  “A 服务”、“家庭”和“B 服务”有什么区别？

3.  关于启动器应用程序如何获得比常规应用程序更高的优先级的任何其他一般建议？我认为这是一个完全合法的请求，因为对于用户来说，启动器*应该*被认为比大多数事情（当前前台活动除外）具有更高的优先级。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T10:03:53.517

回答问题 1) 和 3)
如果您`logcat -b events`可以看到具有可感知优先级的应用程序确实会创建通知。但是所有属性（甚至 contentView）都设置为 null。
因此，在我对相同问题的研究中，我只是尝试创建一个空通知并使用它启动我的服务：

`startForeground(42, new Notification())`

瞧：logcat 说：

```
I/notification_enqueue( 1607): [my.testapp.TestApp,42,NULL,Notification(pri=0 contentView=null vibrate=null sound=null defaults=0x0 flags=0x40 kind=[null])] 
```

和dumpsys meminfo：

```
...
17539 kB: Perceptible  
     ...  
     6164 kB: my.testapp.TestApp (pid 25573)  
... 
```

I don't think this is intended, and it should be understood that this should only be used if really really required. I don't want to imagine every lousy service using this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:47:43.430

根据您引用的文档，您可以尝试在 Launcher 中启动具有更高优先级的长期服务并检查 KILL 次性能。

# excel - 在范围内使用 LastRow

> ID：13712810
> 
> 赞同：1
> 
> 时间：2012-12-04T22:07:25.847
> 
> 标签：excel, vba

我已要求在 Range 中找到最后一行，其中包含以下内容：

```
Dim LastRow As Integer
LastRow = ActiveSheet.UsedRange.Rows.Count 
```

现在，我想选择一个具有已知列和未知最后一行的范围。我想通过插入一个确切的数字来填写整列而不超出行数。这是我所拥有的 -

```
Range("AA2").Select
ActiveCell.FormulaLocal = "=Vlookup(A2,[CP_QR_5_prep.xlsm]Sheet1!A2:LastRow,18,false)"
Selection.AutoFill Destination:=Range("AA2:AA & LastRow) 
```

如何更正我的语法并了解如何使用 lastrow/lastcolumn？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:14:44.410

你很接近。

这些行的语法：

```
ActiveCell.FormulaLocal = "=Vlookup(A2,[CP_QR_5_prep.xlsm]Sheet1!A2:LastRow,18,false)"
Selection.AutoFill Destination:=Range("AA2:AA & LastRow) 
```

应该：

```
ActiveCell.FormulaLocal = "=Vlookup(A2,[CP_QR_5_prep.xlsm]Sheet1!$A$2:$A$" & LastRow & ",18,false)" 'i added absolute referencing which I would think you need... if not take out the "$" signs
Selection.AutoFill Destination:=Range("AA2:AA" & LastRow) 
```

因为，为了将变量值读入字符串，您需要关闭字符串并连接变量名。

我还将补充一点，以获取带有数据的实际最后一行单元格，最好执行以下操作：

```
lastRow = Range("A" & Rows.Count).End(xlUp).Row 
```

因为如果工作表中的单元格具有格式或其他似乎为空白但不是空白的单元格，则使用`UsedRange`可能会给您留下不希望的答案。

# c# - 网站潜在文件锁定问题

> ID：13712812
> 
> 赞同：0
> 
> 时间：2012-12-04T22:07:57.567
> 
> 标签：c#

我正在写一个博客，我将文本文档上传到包含 HTML 的目录。使用下面的代码，您是否预计我会遇到文件锁定问题或其他我没有看到的问题？我最关心的是 File.ReadAllText()。

该目录将包含一个文件列表，例如：

20120101_2300.txt

20120201_0100.txt

ETC...

```
public class Website
{
    private string directory = "C:\\Web";
    public List<BlogEntry> GetArchives()
    {
        return GetArchives("");
    }

    public List<BlogEntry> GetArchives(string date)
    {
        var files = !string.IsNullOrEmpty(date) ? Directory.GetFiles(directory, "*.txt").Where(t => t.Contains(date)) : Directory.GetFiles("C:\\Web", "*.txt");
        var sb = files.Select(file => new BlogEntry {FullPath = file}).ToList();
        return sb.OrderByDescending(t => t.FileDate).Skip(5).ToList();
    }

    public List<BlogEntry> GetRecent()
    {
        var files = Directory.GetFiles(directory, "*.txt");
        var sb = files.Select(file => new BlogEntry {FullPath = file}).ToList();
        return sb.OrderByDescending(t => t.FileDate).Take(5).ToList();
    }
}

public class BlogEntry
{
    public string FullPath { get; set; }

    public DateTime FileDate
    {
        get { return DateTime.ParseExact(Path.GetFileNameWithoutExtension(FullPath), "yyyyMMdd_HHmm", CultureInfo.InvariantCulture); }
    }

    public string FileContents
    {
        get { return File.ReadAllText(FullPath); }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:26:52.293

只要您确定文件只有一个写入者（即：您自己），这可以工作。不仅如此，你很可能会遇到麻烦。但是，如果您同意此限制，您需要做的就是确保将 a[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)与适当的[`FileShare`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)枚举一起使用。如果你把它包装在一个[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx).

像这样写属性：

```
public string FileContents
{
    get { 
       using (var fs = new FileStream(FullPath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
       using (var rdr = new StreamReader(fs))
       {
          return rdr.ReadToEnd();
       }

    }
} 
```

为了提高性能，如果您的服务器有内存，那么在第一次请求每条记录时将它们加载到内存中的字典中，您会希望做得更好*。*您的代码将首先在字典中查找，并且仅在字典没有文件时才读取该文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T22:15:08.830

问题是 ASP.Net 是一个多线程、多并发的用户环境。服务器的文件系统不是。另一方面是数据库。

如果您只是读取文件内容，则没有问题。您只是不能使用您的 Web 进程写入同一个文件。只要两个用户尝试，您就会有 IOException

# google-maps-api-3 - 使用 geoxml3 为 markerclusterer 解析 .kml 文件：标记未弹出信息窗口

> ID：13712814
> 
> 赞同：1
> 
> 时间：2012-12-04T22:07:58.920
> 
> 标签：google-maps-api-3, kml, markerclusterer, geoxml3

我有一张地图，其中包含从 .kml 文件加载的标记，我正在使用 geoxml3 对其进行解析，并使用 markerclusterer 对它们进行聚类。我添加了一些代码来尝试在用户单击标记时将 kml 文件中每个标记上的 and 标记放在 infoWindow 上。但是由于某种原因，当我单击标记时，它不会创建 infoWindow。我之前添加了一个console.log 以确保它正在识别点击，它只是似乎不想制作信息窗口。

[您可以在http://tanagerproductions.com/test/site2/testmap.html](http://tanagerproductions.com/test/site2/testmap.html)查看页面

.kml 文件位于 [http://tanagerproductions.com/test/site2/js/locations.kml](http://tanagerproductions.com/test/site2/js/locations.kml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:05:59.497

看起来您正在使用 geoxml3 的主干版本。这不再是真正的支持。如果您使用 polys 或 kmz 分支，它们都受支持。

[这](http://www.geocodezip.com/geoxml3_test/tanagerproductions_testmapA.html)是使用 polys 分支的页面版本。

这是更新后的 createMarker 函数：

```
createMarker:function(placemark){
    var point = placemark.latlng;
    var info = "<pre" + placemark.name + "<br /><br />" + placemark.description + "</pre>";
    var marker = new google.maps.Marker({position:point});

    google.maps.event.addListener(marker, "click", function(){
        infoWindow.setContent(info);
        infoWindow.open(map, marker);
    });
    markerclusterer.addMarker(marker);
} 
```

您可能只需要 infoWindow.content = info; => infoWindow.setContent(info); 改变。

（历史记录，“主干”版本在 github 上不存在，因此下面的链接不再起作用）
[使用主干 geoxml3 版本的工作版本](http://www.geocodezip.com/geoxml3_test/tanagerproductions_com_testmapB.html)，所以唯一的问题是 API 不再支持 infoWindow.content。

# curl - 如何使用 Fiddler 进行 gzip POST？

> ID：13712817
> 
> 赞同：2
> 
> 时间：2012-12-04T22:08:11.773
> 
> 标签：curl, gzip, fiddler

提琴手，当然，岩石！

所以我需要构建我的请求（一些标头，一个大的 xml 有效负载），并执行一个 gzip 压缩的 http POST（标头指示 gzip 压缩，并且我粘贴的 xml 有效负载被 gzip 压缩......就像规范说的那样）。

如何？

当我使用 gzip 的“规则”选项时，请求出现（据我所知）不被修改。看起来与未压缩时相同。

当前使用提琴手 2.3.9.2

**CURL 参考**：fiddler 中的预期目标可以通过几个步骤在 curl 中完成：

1）gzip payload.xml（使用7-Zip或其他可以创建gzip文件的工具）。调用文件：payload.xml.gz

2) 使用此语法

```
curl --header "Content-Type: application/xml" --header "Content-Encoding: gzip" --data-binary "@payload.xml.gz" https://<yourendpoint> --insecure --trace-ascii - 
```

蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:26:23.100

首先，请升级到当前版本的 Fiddler。

其次，重要的是要了解 Fiddler 的大多数可见压缩功能都与响应的压缩有关，而不是与请求的压缩有关。这是因为许多/大多数服务器不支持请求压缩，因为浏览器没有任何方法可以先验地知道它是否会被支持，因此浏览器不压缩请求。同样，支持压缩请求会使服务器面临 ZIP 炸弹攻击。

现在，话虽如此，一些服务器确实支持压缩请求，而 Fiddler 可以生成这些请求。第一个问题是“你是如何产生你的请求的？”

如果您使用 Composer，请执行以下操作：单击规则 > 自定义规则。滚动到 OnBeforeRequest。添加以下行：

```
static function OnBeforeRequest(oSession: Session) {        
       if (oSession.oRequest.headers.ExistsAndContains("Content-Encoding", "doGZIP"))
        {
          oSession.oRequest.headers.Remove("Content-Encoding");
          oSession.utilGZIPRequest();
        } 
```

现在，任何包含 Content-Encoding: doGZIP 标头的请求都将被 Fiddler 自动压缩，然后再传输到服务器。

# hadoop - 当谈到 mapreduce 时，Accumulo tablet 是如何映射到 HDFS 块的

> ID：13712822
> 
> 赞同：5
> 
> 时间：2012-12-04T22:08:42.543
> 
> 标签：hadoop, mapreduce, accumulo

如果我的环境设置如下：
-64MB HDFS 块
-5 个平板服务器
-10 个平板，每个平板服务器大小为 1GB

如果我有如下表：
rowA | f1 | q1 | v1
行 A | f1 | q2 | v2

行 B | f1 | q1 | v3

行C | f1 | q1 | v4
行C | f2 | q1 | v5
行C | f3 | q3 | v6

从小文档中，我知道有关 rowA 的所有数据都将进入一个平板电脑，该平板电脑可能包含也可能不包含有关其他行的数据，即全部或不包含。所以我的问题是：

平板电脑如何映射到 Datanode 或 HDFS 块？显然，一个平板电脑被分成多个 HDFS 块（在这种情况下为 8 个），所以它们将存储在相同或不同的数据节点上还是无关紧要？

在上面的示例中，关于 RowC（或 A 或 B）的所有数据会进入同一个 HDFS 块还是不同的 HDFS 块？

在执行 map reduce 作业时，我会得到多少个映射器？（每个 hdfs 块一个？或每个平板电脑？或每个服务器？）

提前感谢您的任何和所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:31:33.780

直接回答您的问题：

> 平板电脑如何映射到 Datanode 或 HDFS 块？显然，一个平板电脑被分成多个 HDFS 块（在这种情况下为 8 个），所以它们将存储在相同或不同的数据节点上还是无关紧要？

平板电脑像 HDFS 中的所有其他文件一样存储在块中。您通常会在至少一个数据节点上看到单个文件的所有块（并非总是如此，但当我查看较大文件的块位置时似乎大部分情况都是如此）

> 在上面的示例中，关于 RowC（或 A 或 B）的所有数据会进入同一个 HDFS 块还是不同的 HDFS 块？

取决于您的平板电脑的块大小（`dfs.block.size`或者如果配置了 Accumulo 属性`table.file.blocksize`）。如果块大小与平板电脑大小相同，那么显然它们将位于同一个 HDFS 块中。否则，如果块大小小于平板电脑大小，那么它们是否在同一个块中就是运气。

> 在执行 map reduce 作业时，我会得到多少个映射器？（每个 hdfs 块一个？或每个平板电脑？或每个服务器？）

这取决于您给出的范围`InputFormatBase.setRanges(Configuration, Collection<Ranges>)`。

如果您扫描整个表（-inf -> +inf），那么您将获得与平板电脑数量相等的映射器数量（由 disableAutoAdjustRanges 提供）。如果您定义特定范围，您将获得不同的行为，具体取决于您是否调用过`InputFormatBase.disableAutoAdjustRanges(Configuration)`：

1.  如果您调用了此方法，那么您将在每个定义的范围内获得一个映射器。重要的是，如果您有一个从一个平板电脑开始并在另一个平板电脑结束的范围，您将获得一个映射器来处理整个范围
2.  如果您不调用此方法，并且您有一个跨越平板电脑的范围，那么您将为范围涵盖的每个平板电脑获得一个映射器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:51:11.293

对于写入 Accumulo（数据摄取），运行 MapReduce 作业是有意义的，其中映射器输入是您在 HDFS 上的输入文件。您基本上会遵循 Accumulo 文档中的这个示例：

[http://accumulo.apache.org/1.4/examples/mapred.html](http://accumulo.apache.org/1.4/examples/mapred.html)

（本文的第四部分提供了有关将数据摄取到 Accumulo 的技术的更多背景信息：http: [//ieee-hpec.org/2012/index_htm_files/byun.pdf](http://ieee-hpec.org/2012/index_htm_files/byun.pdf)）

对于从 Accumulo 读取（数据查询），我不会使用 MapReduce。Accumulo/Zookeeper 将自动将您的查询分布在平板服务器上。如果您将行用作原子记录，请使用（或扩展）WholeRowIterator 并在您感兴趣的行范围内启动 Scanner（或 BatchScanner）。Scanner 将在您的平板电脑服务器上并行运行。您真的不想直接从 HDFS 或 MapReduce 访问 Accumulo 数据。

以下是一些示例代码，可帮助您入门：

```
//some of the classes you'll need (in no particular order)...

import org.apache.accumulo.core.client.Connector;
import org.apache.accumulo.core.client.Instance;
import org.apache.accumulo.core.client.ZooKeeperInstance;
import org.apache.accumulo.core.Constants;
import org.apache.accumulo.core.client.Scanner;
import org.apache.accumulo.core.client.IteratorSetting;
import org.apache.accumulo.core.data.Key;
import org.apache.accumulo.core.data.Range;
import org.apache.accumulo.core.data.Value;
import org.apache.hadoop.io.Text;

//Accumulo client code...

//Accumulo connection
Instance instance = new ZooKeeperInstance( /* put your installation info here */ );
Connector connector = instance.getConnector(username, password);

//setup a Scanner or BatchScanner
Scanner scanner = connector.createScanner(tableName, Constants.NO_AUTHS);
Range range = new Range(new Text("rowA"), new Text("rowB"));
scanner.setRange(range);

//use a WholeRowIterator to keep rows atomic
IteratorSetting itSettings = new IteratorSetting(1, WholeRowIterator.class);
scanner.addScanIterator(itSettings);

//now read some data!
for (Entry<Key, Value> entry : scanner) {
    SortedMap<Key,Value> wholeRow = WholeRowIterator.decodeRow(entry.getKey(), entry.getValue());

    //do something with your data!

} 
```

# java - 在数组列表中搜索和更改对象

> ID：13712824
> 
> 赞同：2
> 
> 时间：2012-12-04T22:08:49.453
> 
> 标签：java

我有一个包含对象的 ArrayList。我一直想要/需要做的是在 ArrayList 中搜索特定对象，并在找到时更改其中一个值。IE 我有一个足球运动员队，比如费城老鹰队，其中包含球队名称、总得分、总麻袋数，然后按名字、姓氏、参加的比赛和位置列出所有球员。我正在寻找一个特定的球员，比如 Chad Hall，我想将他从老鹰队中移除，并将他交易到新英格兰爱国者队。到目前为止，我所拥有的是 ArrayList 的迭代，但我的代码没有找到播放器然后退出。

```
case 6:
           String name = "";
           System.out.print("Who would you like to trade? ");
           name = kb.nextLine();
           tradePlayer(nflTeams, name);

public static void tradePlayer(ArrayList<Team> nflTeams, String name)
  {
     Scanner kb = new Scanner(System.in);
     String teamName = "";
     System.out.print("What team do you want to trade this player to?(Team Acronym) "    );
     teamName = kb.nextLine();

     for(Team t: nflTeams){
        if (nflTeams.contains(name.toLowerCase()))
                      t.setName(teamName);
                }
     System.out.println("Cannot find " + name);
  } 
```

该`Player`课程涉及按名字，姓氏，团队，位置，演奏的球员。我想要改变的是团队。在`Team`课堂上，我可以`setName(String)`设置团队名称。

任何建议或想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:14:11.210

`if (nflTeams.contains(name.toLowerCase()))`

你想做什么？您的列表`nflTeams`包含`Team`对象而不是名称。
这是行不通的。
如果您需要`Team`通过它访问 a`name`然后`Map<String,Team>`使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:12:16.650

您必须从团队中获取球员列表并通过指定的方式从那里删除`name`：

```
String teamToAddNewPlayer = "New England Patriots";
String deletedPlayer = null;
for(Team t: nflTeams){
      List<String> players = t.getPlayers();
      if (players.contains(name)){
          deletedPlayer = players.remove(name);
      }
      if (t.getName().equals(teamToAddNewPlayer))
          players.add(name);
}
if (deletedPlayer == null)
//nothing was deleted
else
//player was deleted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:15:19.360

使用 Iterator 将使您能够更好地控制您正在尝试的内容。

```
import java.util.*;

 class IteratorDemo {

public static void main(String args[]) {
      // Create an array list
      ArrayList al = new ArrayList();
      // add elements to the array list
      al.add("C");
      al.add("A");
      al.add("E");
      al.add("B");
      al.add("D");
      al.add("F");

  // Use iterator to display contents of al
  System.out.print("Original contents of al: ");
  Iterator itr = al.iterator();
  while(itr.hasNext()) {
     Object element = itr.next();
     System.out.print(element + " ");
  }
  System.out.println();

  // Modify objects being iterated
  ListIterator litr = al.listIterator();
  while(litr.hasNext()) {
     Object element = litr.next();
     litr.set(element + "+");
  }
  System.out.print("Modified contents of al: ");
  itr = al.iterator();
  while(itr.hasNext()) {
     Object element = itr.next();
     System.out.print(element + " ");
  }
  System.out.println();

  // Now, display the list backwards
  System.out.print("Modified list backwards: ");
  while(litr.hasPrevious()) {
     Object element = litr.previous();
     System.out.print(element + " ");
   }
   System.out.println();
}
} 
```

这个例子来自[源](http://www.tutorialspoint.com/java/java_using_iterator.htm)

# jquery - jQuery Animate 函数和 Each 函数

> ID：13712828
> 
> 赞同：0
> 
> 时间：2012-12-04T22:09:04.323
> 
> 标签：jquery

我正在使用 keyup 函数验证一些文本输入，并且我想在该框被认为已验证时运行复选标记的动画。

问题是，只要我点击任何输入，动画就会开始。如果您在单击后立即键入一次，您将看到动画发生。我假设动画开始了，因为我正在添加类 on `keyup`，它本质上是在您释放鼠标单击它之后触发的。还有其他方法吗？

1.  我在测试时将时间增加到 5 秒
2.  为什么它会触发所有 3 个动画，因为我正在使用`each`和`next`功能。
3.  有没有办法让动画开始`keyup`。

我的代码要点如下，请在此处查看实时版本：http: [//jsfiddle.net/MhMCz/26/](http://jsfiddle.net/MhMCz/26/)

```
$(':input').each(function(){
   var values = $(this).attr('value');

   $(this).keyup(function(){
      if( $(this).val() !== '' && $(this).val() !== values) {
        $(this).addClass('animated');
        $(this).next('span').html("<img src='http://png.findicons.com/files/icons/1581/silk/16/tick.png' />");
    }
    else {
       $(this).removeClass('animated'); 
       $(this).next('span').html('');     
    }                
   });

   if ( $(this).next('span').hasClass('animated') ) { }
   else {
      $(this).next('span').animate({
           marginLeft: '10px'
        }, 5000, function(){
           alert("animation complete")
   });   
}
)}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:39:56.947

我对您的代码进行了一些重构，可以进行更多优化，但看起来相当不错：

[http://jsfiddle.net/MhMCz/30/](http://jsfiddle.net/MhMCz/30/)

```
$('form').on('focus focusin blur focusout keyup', ':input', function(e) {
    var val = this.value,
        def = this.defaultValue,
        $t = $(this),
        $check = $t.next('span');

    switch(e.type){
        case 'focus':
        case 'focusin':
            if( val == def ) {
               this.value = '';
               $t.addClass('active');
            }
        break;
        case 'blur':
        case 'focusout':
            if(val == '') this.value = def;
            $t.removeClass('active');
        break;
        case 'keyup':
            if(val != '' && val != def) {
                $check.animate({
                    opacity: 1,
                    'margin-left': '10px'
                }, 'fast');
            } else {
               $check.animate({
                    opacity: 0,
                    'margin-left': '100px'
               }, 'fast');   
            }
        break;
    }
}); 
```

“表单”的事件委托只是为了性能，请参阅[http://jsperf.com/jquery-live-vs-delegate-vs-on/4](http://jsperf.com/jquery-live-vs-delegate-vs-on/4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:14:57.267

你可以试试：

```
<input type="text" id="name" value="Name" class="validate_me" valid_compare="Name" /><span></span><br />
<input type="email" id="email" value="Email" class="validate_me" valid_compare="Email" /><span></span><br />
<input type="phone" id="phone" value="Phone" class="validate_me" valid_compare="Phone" /><span></span><br /> 
```

​</p>

```
$(function(){
    $('.validate_me').keyup(function(){
        var this_val = $(this).val();
        var valid_compare = $(this).attr("valid_compare");

        if (this_val != "" & this_val != valid_compare ){
            $(this)
                .next()
                .css("margin-left","100px")
                .html("<img src='http://png.findicons.com/files/icons/1581/silk/16/tick.png' />")
                .animate({
                    marginLeft: '10px'
                }, 1000, function(){
            });   
        } else {
            $(this).next().html("");
        }
    });
});​ 
```

**这是一个使用 keyup() 的工作示例：http:** [//jsfiddle.net/9gg3n/4/](http://jsfiddle.net/9gg3n/4/)

因此，我在输入字段的 wach 中添加了一个自定义属性以进行比较以进行验证（例如：！= 名称，！= 电子邮件等...）。当用户移动类型 (keyup()) 时，它会检查它是否有效，如果有效，则为刻度设置动画

# asp.net - 在 Sitecore 中，如何更改或设置 PageMode

> ID：13712832
> 
> 赞同：1
> 
> 时间：2012-12-04T22:09:21.553
> 
> 标签：asp.net, sitecore, page-editor

在 Sitecore 中，我有一些用户正在使用编辑功能区向页面添加内容。但是，有些页面我想完全阻止该用户角色的 EditMode。这是基于分支模板的，所以我不能只撤销每个页面的权限。我需要一些方法将 Sitecore.Context.PageMode 设置为 Normal。

是否有用于设置 PageMode 的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:12:03.757

虽然我找不到 C# API，但我确实发现我可以使用如下所示的 URL 重定向：

```
 if (!Sitecore.Context.PageMode.IsNormal && !IsAdministrator())
        {
            String id = Sitecore.Context.Item.ID.ToString();
            Response.Redirect("/?sc_mode=normal&sc_itemid=" + id + "&sc_lang=en"); 
        } 
```

如果处于任何其他状态，这会将 PageMode 设置为 Normal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:16:22.057

您的重定向方法应该可以工作，但它也会关闭编辑器在重定向后访问的其他页面的 PageEditor 模式。

您还可以检查页面是否处于 EditMode 并且用户是某个角色的一部分，并且该（子）布局显示标准 .NET 控件而不是 Sitecore sc-controls。

```
Like <asp:Literal /> instead of <sc:Text /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:43:37.200

我建议不要将用户/硬编码重定向到您创建的特定页面并使用规则引擎。这将允许您重用代码并通过内容编辑器更轻松地打开/关闭。

已经有选择角色的条件：

```
/sitecore/system/Settings/Rules/Common/Conditions/Security/User Role 
```

所以你只需要创建一个动作来切换到普通模式。在您的操作中，您可以调用以下代码：

```
Context.Site.SetDisplayMode(Sitecore.Sites.DisplayMode.Normal, Sitecore.Sites.DisplayModeDuration.ResetAfterRequest); 
```

像 wilsjd 建议的那样将其包裹在支票中。

关于规则引擎的一些信息，如果你不熟悉的话：
[通过规则引擎解耦](http://adeneys.wordpress.com/2011/04/28/decoupling-through-the-rules-engine/)
[关于 Sitecore ASP.NET CMS 规则引擎](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/All-About-the-Sitecore-ASPNET-CMS-Rules-Engine.aspx)

# android - 在android中使用基于密码的加密

> ID：13712835
> 
> 赞同：6
> 
> 时间：2012-12-04T22:09:36.547
> 
> 标签：android, encryption

下面的代码虽然有效，但是当我连续运行时，有时会抛出“给定最终块没有正确填充”，有时也会抛出。我觉得我在某个地方犯了一个小错误。你能帮我解决这个问题吗？

异常堆栈：

```
Exception in thread "main" javax.crypto.BadPaddingException: Given final block not properly padded
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:811)
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:676)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313)
    at javax.crypto.Cipher.doFinal(Cipher.java:2086)
    at MCrypt.decrypt(MCrypt.java:87)
    at MCrypt.main(MCrypt.java:21) 
```

我的代码：

```
import java.security.SecureRandom;
import java.security.spec.KeySpec;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

public class MCrypt {

    private int iterationCount = 10000;
    private int saltLength = 8; // bytes; 64 bits
    private int keyLength = 128;

    public static void main(String[] args) throws Exception {
        MCrypt mc = new MCrypt();
        String encryptedData = mc.encrypt("1234");
        MCrypt mc1 = new MCrypt();
        System.out.println(new String(mc1.decrypt(new String(encryptedData),
                "1234"), "UTF-8"));
    }

    public MCrypt() {
    }

    public String encrypt(String text) throws Exception {
        if (text == null || text.length() == 0)
            throw new Exception("Empty string");

        byte[] encrypted = null;

        SecureRandom random = new SecureRandom();
        byte[] salt = new byte[saltLength];
        random.nextBytes(salt);

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

        byte[] iv = new byte[cipher.getBlockSize()];
        random.nextBytes(iv);
        IvParameterSpec ivParams = new IvParameterSpec(iv);

        KeySpec keySpec = new PBEKeySpec(text.toCharArray(), salt,
                iterationCount, keyLength);
        SecretKeyFactory keyFactory = SecretKeyFactory
                .getInstance("PBKDF2WithHmacSHA1");
        byte[] keyBytes = keyFactory.generateSecret(keySpec).getEncoded();
        SecretKey key = new SecretKeySpec(keyBytes, "AES");

        cipher.init(Cipher.ENCRYPT_MODE, key, ivParams);

        encrypted = cipher.doFinal(text.getBytes("UTF-8"));
        String encryptedStr = Base64.encodeBytes(encrypted);

        StringBuffer strBuf = new StringBuffer();
        strBuf.append(new String(encryptedStr));
        strBuf.append("]");
        strBuf.append(new String(salt));
        strBuf.append("]");
        strBuf.append(new String(iv));

        return new String(Base64.encodeBytes(strBuf.toString().getBytes()));
    }

    public byte[] decrypt(String code, String pwd) throws Exception {
        if (code == null || code.length() == 0)
            throw new Exception("Empty string");

        String[] fields = new String(Base64.decode(code)).split("]");
        byte[] cipherBytes = Base64.decode(fields[0]);
        byte[] salt = fields[1].getBytes();
        byte[] iv = fields[2].getBytes();

        KeySpec keySpec = new PBEKeySpec(pwd.toCharArray(), salt,
                iterationCount, keyLength);
        SecretKeyFactory keyFactory = SecretKeyFactory
                .getInstance("PBKDF2WithHmacSHA1");
        byte[] keyBytes = keyFactory.generateSecret(keySpec).getEncoded();
        SecretKey key = new SecretKeySpec(keyBytes, "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        IvParameterSpec ivParams = new IvParameterSpec(iv);

        byte[] decrypted = null;
        cipher.init(Cipher.DECRYPT_MODE, key, ivParams);
        decrypted = cipher.doFinal(cipherBytes);

        return decrypted;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T11:17:32.500

**看这个**

```
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

import android.util.Base64;
import android.util.Log;

public class AesFileIo {
//    private static final String AES_ALGORITHM = "AES/CTR/NoPadding";
    private static final String AES_ALGORITHM = "AES/CBC/PKCS5Padding";
    private SecretKeySpec secretKeySpec;
    private IvParameterSpec ivSpec;

    public AesFileIo(byte[] aesKey, byte[] iv) {
        ivSpec = new IvParameterSpec(iv);
        secretKeySpec = new SecretKeySpec(aesKey, "AES");
    }

    public String decrypt(String text) {

        StringBuilder stringBuilder = new StringBuilder(); 
        try {
            Cipher cipher = Cipher.getInstance(AES_ALGORITHM);
            cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, ivSpec);
            byte[] decordedValue =  Base64.decode(text,Base64.DEFAULT);
            String decryptedValue = new String(cipher.doFinal(decordedValue),"UTF-8");
            Log.e("decrypted Value :",decryptedValue);
            return decryptedValue; 
        } catch (Exception e) {
            Log.e(this.getClass().toString(), e.getMessage(), e);
        }
        return stringBuilder.toString();
    }

    public String encrypt(String text) {
        String encryptedValue=null;
        try {
            Cipher cipher = Cipher.getInstance(AES_ALGORITHM); 
            cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, ivSpec);
            byte[] encValue = cipher.doFinal(text.getBytes());
            encryptedValue = Base64.encodeToString(encValue,Base64.DEFAULT);
        } catch (Exception e) {
            Log.e(this.getClass().toString(), e.getMessage(), e);
        }
        return encryptedValue;
    }
} 
```

**如何使用**

```
public static byte[] iv = { '0', '0','0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0' };
    private static final byte[] keyValue = new byte[] { 'b', 'i', 'r', 'a', 'j', 'z', 'a', 'l', 'a', 'v', 'a', 'd', 'i', 'y', 'a', 'r' };
AesFileIo aes = new AesFileIo(keyValue, iv);
String encrypetedText = aes.encrypt(str);
String decryptedText = aes.decrypt(encrypetedText);

System.out.println("EncrypetedText : " + encrypetedText);
System.out.println("DecryptedText : " + decryptedText); 
```

# javascript - Jquery Toggle 仅适用于一篇文章

> ID：13712836
> 
> 赞同：0
> 
> 时间：2012-12-04T22:09:45.227
> 
> 标签：javascript, jquery, toggle

我在提要上使用 Jquery 切换时遇到问题。我有一个名为标签的超链接。当我点击它时，它会在它下面切换一个 div。

它有效 - 但仅适用于提要中的顶部帖子 - 如果提要中有任何其他帖子，则它不起作用。

下面是Jquery：-

```
<script type="text/javascript">
    $(function () {
         $("#hypfeedTagBtn").click(function()  {
             $("#divPostBodyTags").toggle();

             return false;

         });
     });

</script> 
```

以下是 HTML：-

```
 <div id="divPostFoot_64" class="dPostMain dPostFoot">
<span id="Content_ucFeeds_repFeedThread_lblFeedViewCouont_0" class="spFootReplyCount"></span>
<span id="Content_ucFeeds_repFeedThread_lblFeedShareLink_0" class="spFootLinks"></span>
<span id="Content_ucFeeds_repFeedThread_lblFeedDeleteLink_0" class="spFootLinks"></span>
<a id="hypfeedTagBtn" class="spFootLinksShowTags">Tags</a>
<a id="Content_ucFeeds_repFeedThread_hypFeedMessageMe_0" class="spFootLinks" href="/Mail/NewMessage.aspx?FeedID=64">Message Me</a>
</div>

    <div id="divPostBodyTags" class="dPostMain dPostTAGSDIV" style="display: block;">
<ul id="PostBodyTags">
<li class="TAGLiItem">
<a class="TAGaItem">Plumbers</a>
</li>
<li class="TAGLiItem">
<a class="TAGaItem">Plumbers</a>
</li>
</ul>
</div> 
```

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:13:53.310

[MDN 元素.id](https://developer.mozilla.org/en-US/docs/DOM/element.id)

> **ID 在文档中必须是唯一的**，并且通常用于使用 document.getElementById 检索元素。
> 
> 在某些文档（特别是 HTML、XUL 和 SVG）中，可以将元素的 id 指定为元素的属性，如下所示： .
> 
> 但是，如果没有在 DOCTYPE 中正确指定 id 属性的类型，就不能在自定义 XML 文档中使用此属性。
> 
> id 的其他常见用法包括在使用 CSS 设置文档样式时使用元素的 ID 作为选择器。
> 
> 请注意，ID 区分大小写，但您不应创建仅大小写不同的 ID（请参阅类和 id 名称中的区分大小写）。

如果要切换多个部分，请使用类而不是 id。

# apache - Coldfusion10 + Apache Web 服务器

> ID：13712837
> 
> 赞同：0
> 
> 时间：2012-12-04T22:09:46.867
> 
> 标签：apache, coldfusion, coldfusion-10

我正在本地 Windows7 机器上安装 Coldfusion10。我现在想将其配置为在 apache Web 服务器上为站点提供服务（主要是我想使用 apache mod_rewrite 功能来重写 url）。

但是，一旦我将 Coldfusion 配置为使用 Apache（通过 Web 服务器配置工具），我的 Apache 服务就会停止并且我无法重新启动它。

重新启动时出现此错误：

```
Syntax error on line 2 of C:/apache/apache2/conf/mod_jk.conf:
cannot load C:/coldfusion10/config/wsconfig/1/mod_jk.so into server: The specified procedure could not be found. 
```

我已经尝试重新下载应该适用于我的 apache 版本的 mod_jk.so 文件，虽然这会停止显示上述错误，但我的 apache 服务器仍然无法启动。

有没有人经历过或者有什么建议？

干杯

# c++ - 珠排序算法的这个 c++ 实现是如何工作的？

> ID：13712839
> 
> 赞同：-1
> 
> 时间：2012-12-04T22:09:47.710
> 
> 标签：c++, algorithm, sorting

几个小时以来，我一直试图理解这段代码，但没有成功。我编写了自己的珠子排序算法版本，但是速度太慢了。我想了解为什么这个工作得这么快。这里是关于珠排序算法的信息：
[http](http://demonstrations.wolfram.com/ExtendedBeadSort/)
://demonstrations.wolfram.com/ExtendedBeadSort/ 你能帮我理解这个算法是如何工作的吗？

```
#include <iostream>
#include <vector>

using std::cout;
using std::vector;

void distribute(int dist, vector<int> &List) {
    //*beads* go down into different buckets using gravity (addition).
    if (dist > List.size() )
        List.resize(dist); //resize if too big for current vector

    for (int i=0; i < dist; i++)
        List[i]++;
}

vector<int> beadSort(int *myints, int n) {
    vector<int> list, list2, fifth (myints, myints + n);
    cout << "sakums\n";
    cout << myints<< "\n";
 //   for (vector<int>::iterator it = fifth.begin(); it != fifth.end(); ++it) cout << " " << *it << "\n";
    cout << "beigas\n";

    cout << "#1 Beads falling down: ";
    for (int i=0; i < fifth.size(); i++)
        distribute (fifth[i], list);
    cout << '\n';

    cout << "\nBeads on their sides: ";
    for (int i=0; i < list.size(); i++)
        cout << " " << list[i];
    cout << '\n';

    //second part

    cout << "#2 Beads right side up: ";
    for (int i=0; i < list.size(); i++)
        distribute (list[i], list2);
    cout << '\n';

    return list2;
}

int main() {
    int myints[] = {734,3,1,24,324,324,32,432,42,3,4,1,1};
    vector<int> sorted = beadSort(myints, sizeof(myints)/sizeof(int));
    cout << "Sorted list/array";
    for(unsigned int i=0; i<sorted.size(); i++)
        cout << sorted[i] << ' ';
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T20:03:06.377

它是我的实现！我是您在 Rosettacode 上看到的 C++ 中的珠子排序的原作者。

算法这么慢的原因是因为这种排序存在三个主要的减速问题。一个处理每次分发运行 O(S) 时向量的潜在调整大小。这也与每个“极点” O(S)+O(S) 或 O(2S) 的实际数字一一相加相结合，然后执行 n 次，其中 n 是要排序的数字 O(n )+O(2S)。由于在大多数情况下 S 仍然较大，因此该算法仍然是 O(S)。

公平地说，只需要有人对我的代码进行更好的实现和不那么冗长的版本来提高性能。我以这种方式制作了这个算法，以便尽可能容易地向刚接触珠子排序的人展示。

如果您想了解更多信息，请查看 wiki page of bead sort。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:21:32.660

由于分发的工作方式：

其他每个数字都为插槽贡献“珠子” - 有 13 个数字，因此插槽 1 完成第一遍时其中有 13 个。

它在“列”中“分配”珠子，即当您在其侧面打印时，现在有 734 个插槽 - 数量最多。

当再次运行分发时，它通过对列求和来将“珠子”向下移动 - 它将根据最大元素执行一些加法 * 数字的数量 - 加上内存分配

# c++ - 数据库模块抽象（独立）于游戏的其他模块

> ID：13712846
> 
> 赞同：0
> 
> 时间：2012-12-04T22:10:21.650
> 
> 标签：c++, database, module, dependencies

我有一个由几个模块组成的游戏。

其中之一是数据库模块。我想让它变成这样：

```
Database{
    public:
        save(&Object); //all my classes in the all modules inherit from Object
        load(&Object);
}; 
```

使该模块**独立于其他模块**`Database`的最佳方法是什么（其他模块将在使用`save`和功能中存储数据`load`）？

**我考虑了几个解决方案：**

1.  所有对象都有类似`serialize()`从类继承的方法`Object`（类似于Java）。`Database`使用该方法获取字符串并保存。明显的缺点是：所有对象都必须实现新方法，并且保存字符串不是最佳选择（不知道类的结构）。
2.  为所有类制作“清单”（例如，在将发送到的文本文件中`Database`）。该清单将描述类的结构是什么（例如，一个字符串、两个双精度、一个罕见使用的 int）。缺点是灵活性——更改其他模块中的类将对清单产生影响。
3.  所有类都有自己的`save`和`load`方法并`Database`使用它们。我不想要它，因为所有类都必须知道数据库类型，`save`并且`load`应该在`Database`类中，而不是分布在整个代码中（这是制作这样一个模块的要点）。
4.  `Database`了解所有其他模块（并将知道如何保存所有对象）。这里的坏事是很多依赖。任何模块的更改都会影响`Database`.

哪种方式会好？或者也许有更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:06:07.537

我遇到的一个解决方案是让所有 Object 子类实现一个`virtual void serialize(ISerializer& serializer)`方法。

*ISerializer*将具有纯虚方法，如等`void onInt(int value)`，`void onString(const char* string)`由 Object 子类在其`serialize()`-method 中调用。您的 Database 模块可以在两个单独的类*DatabaseReader*和*DatabaseWriter中实现**ISerializer*。稍后您可以添加*ObjectInspectionFileDumper*、*OnScreenObjectStateDebugger*或*NetworkWriter*，它们也实现了*ISerializer*，但在其他模块中。每个对象只需要实现一次 - 方法即可获得所有扩展的可能性。******`serialize()`******

 ***优点：

*   只要您在没有某种版本控制方案的情况下不读取旧版本对象的数据，就几乎可以保证读取和写入匹配。
*   这是一个正交设计，其中 Object 类型和 Serializer 类型的数量可以相互独立地增长。

缺点：

*   主要是一些虚拟功能开销，如果这对您的项目来说是一个问题。不过，这不是您在常规游戏过程中通常会做的事情。

稍后，您可能会遇到不想序列化的要调用 Objects 的东西，然后将其分离到仅包含纯 virtual 方法的*ISerializable*接口类中可能是有意义的`serialize()`。为了适应重要的序列化程序（如调试序列化程序），您可能需要改为`void onInt(const char* name, int value)`etc。

高温高压***

# java - 带有 java.io 的非阻塞服务器

> ID：13712847
> 
> 赞同：2
> 
> 时间：2012-12-04T22:10:22.687
> 
> 标签：java, sockets, io

大家都知道java IO是*阻塞*的，java NIO是*非阻塞的*。在 IO 中，您必须使用每个客户端模式的线程，在 NIO 中，您可以为所有客户端使用一个线程。

现在我的问题如下：是否可以**仅**使用 Java IO api*进行非阻塞*设计。（不是蔚来）

 **我正在考虑这样的模式（显然非常简化）；

```
 List<Socket> li;
        for (Socket s : li) {
            InputStream in = s.getInputStream();
            byte[] data = in.available();
            in.read(data);
            // processData(data); (decoding packets, encoding outgoing packets
        } 
```

**另请注意，客户端将始终准备好读取数据。**

您对此有何看法？这是否适用于至少应该拥有几百个客户端而没有重大性能问题的服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:18:29.290

这是可能的，但毫无意义。java.net 中没有 select()，因此您只能轮询套接字，这意味着在轮询之间休眠，并且您无法确定要休眠多长时间，因此您会睡得比需要的时间更长，因此您将浪费时间，增加延迟等；否则你必须睡很短的时间间隔，因此消耗毫无意义的 CPU。

对于仅仅几百个客户端，没有可能反对每个连接使用一个线程的传统方式。

我不知道“客户端将始终准备好读取数据”是什么意思。你无法从服务器上看出这一点，如果它还没有准备好，写入它可能会阻塞，这会完全破坏你的苹果卡。**

# javascript - javascript 鼠标悬停图像弹出窗口，弹出窗口和关闭按钮中带有文本

> ID：13712854
> 
> 赞同：0
> 
> 时间：2012-12-04T22:10:38.773
> 
> 标签：javascript, jquery, html

当我将鼠标悬停在链接上时，我当前的代码会弹出一个图像。

我想添加除了图像之外的功能，文本描述也在弹出窗口中。

此外，我还希望弹出窗口上有一个“X”关闭按钮，单击该按钮将关闭弹出窗口。目前，当我鼠标移出时，图像会消失。但我也想要关闭按钮。

我该如何添加这些内容？

这是我当前的 javascript 代码：

```
$(document).ready(function() {  
var offsetX = 10;
var offsetY = 5;
$('.menu').mouseover(function(e) {
    console.log(e);
    var href = $(this).attr('href');
    $('<img id="image" src="' + href + '"/>')
    .css('top', e.pageY + offsetY)
    .css('left', e.pageX + offsetX)
    .appendTo('body');
}, function(e) {
    $('#image').remove();
});
$('.menu').mouseout(function(e) {

    $("#image").css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
    $('#image').remove();
});

}); 
```

这是一些示例html代码：

```
<a id='image1' class='menu' href="images/image1.jpg" alt=""><b>Image Description:</b> Text about this image.</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:18:54.450

你会想玩弄一些来让它看起来不错，但这应该是你想要的基础。

```
$('.menu').mouseover(function(e) {
    console.log(e);
    var href = $(this).attr('href');
    var popup = $('<div id="myPopup"></div>');

    var image = $('<img id="image" src="' + href + '"/>');
    popup.append(image);

    var text = $('<p>My Text</p>');
    popup.append(text);

    var closeBtn = $('<button>X</button>');
    popup.append(closeBtn);

    popup.css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
    popup.append('body');

    closeBtn.button().click(function() {
        $('#myPopup').remove();
    });
}, function(e) {
    // do nothing
}); 
```

# php - 用多个参数 PHP Apache 重写 url

> ID：13712856
> 
> 赞同：1
> 
> 时间：2012-12-04T22:10:46.133
> 
> 标签：php, apache, mod-rewrite

我只是在这里看了几个小时，但并没有真正找到解决方案。

我目前有典型的查询字符串，例如；

```
 http://www.site/jobs/results.php?keyword=Accounting+%26+Finance&type=10&state_id=130&location=NSW&order=1&page=1 
```

我想重写

```
 http://www.site/jobs/find/accounting-finance/NSW/free-jobs/1/?order=1 
```

但我不知道会发送什么参数，这取决于用户的操作、过滤器、类别、订单等

我想保持简单并在 PHP 中解析 url 并使用简单的重写规则，但是我需要键/值对，所以我知道哪个值属于哪个参数之类的；

```
http://www.site/jobs/find/keyword/accounting-finance/state/NSW/type/free-jobs/page/1/?order=1 
```

有人告诉我，这不是 seo 的好选择。

除了在 .htacces 中编写许多不同的规则以涵盖所有场景之外，您能否建议一种更好的方法来解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:32:50.263

.htaccess：

```
RewriteEngine on
# skip rewriting if file/dir exists (optionally)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# rewrite all to results.php
RewriteRule . results.php 
```

php（键=>值对的简单方法）：

```
// current URI (/jobs/find/keyword/accounting-finance/state/NSW/type/free-jobs/page/1/?order=1)
$path = $_SERVER['REQUEST_URI'];

// remove base path (/jobs)
if (($len = strlen(basename($_SERVER['SCRIPT_FILENAME'])))) 
    $path = substr($len, $path);

// remove GET params (?order=1)
if (false !== ($pos = strpos($path, '?'))) 
    $path = substr($path, 0, $pos);

$path = explode('/', trim($path, '/'));

// extract action (or whatever 'find' is)
$action = array_shift($path);

// make key => value pairs from the rest
$params = array();
for ($i = 1, $c = count($path) ; $i < $c ; $i += 2) {
    $params[urldecode($path[$i - 1])] = urldecode($params[$i]);
    // or put it to GET (only remember that it will overwrite already existing values)
    //$_GET[urldecode($path[$i - 1])] = urldecode($params[$i]);
} 
```

您可以修改此脚本以仅在没有键的情况下实现值，但问题来了 - 是否可以确定值应该是一个键还是另一个键？如果参数总是在同一个位置并且你只能得到更少或更多的参数，那么它很容易：

```
// skip this step from previous example
//$action = array_shift($path);    

$params = array(
    'action' => null,
    'keyword' => null,
    'state' => null,
    'type' => null,
    'page' => null,
);
$keys = array_keys($params);
for ($i = 0 , $c = min(count($path), count($keys) ; $i < $c ; ++$i) {
    $params[$keys[$i]] = urldecode($path[$i]);
} 
```

但是如果你不知道哪个参数在哪个位置，那么事情就会变得更加复杂。您需要对每个参数进行一些检查并确定它是哪一个 - 如果所有这些值都是从一些已知的值列表中选择的，那么它也不会很困难，例如：

```
$params = array(
    'action' => null,
    'keyword' => null,
    'state' => null,
    'type' => null,
    'page' => null,
);
$params['action'] = array_shift($path);
$keys = array_keys($params);
foreach ($path as $value) {
    if (is_numeric($value)) $params['page'] = intVal($value);
    else {
        $key = null;
        // that switch is not very nice - because of hardcode
        // but is much faster than using 'in_array' or something similar
        // anyway it can be done in many many ways
        switch ($value) {
            case 'accounting-finance' :
            case 'keyword2' :
            case 'keyword3' :
                $key = 'keyword';
                break;
            case 'NSW' :
            case 'state2' :
                $key = 'state';
                break;
            case 'type1' :
            case 'type2' :
            case 'type3' :
                $key = 'type';
                break;
            // and so on...
        }
        if ($key === null) throw new Exception('Unknown value!');
        $params[$key] = $value;
    }
} 
```

您也可以尝试在 .htaccess 中编写一些非常复杂的正则表达式，但 IMO 不是这样的地方 - apache 应该在您的应用程序中将请求与正确的端点匹配并运行它，它不是扩展参数逻辑的地方（如果无论如何它会去你的应用程序中的同一个地方）。在应用程序中保留该逻辑也更方便 - 当您更改某些内容时，您可以在应用程序代码中执行此操作，而无需更改 htaccess 或 apache 配置中的任何内容（在生产环境中，我主要将 .htaccess 内容移动到 apache 配置并关闭 .htaccess 支持 - 当 apache 不搜索这些文件时，这会加快速度，但任何更改都需要重新启动 apache）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:19:46.667

如果您只想将任何与 SEO 相关的内容推送到 URL 中，那么您的重写实际上变得非常容易：根本不进行任何重写，将参数保留在原处，然后`results.php`用您的 SEO 关键字填充该位置：

```
http://myurl/jobs/results.php/seo-keywords/gohere/as-you-like-it?keyword=Accounting+%26+Finance&type=10&state_id=130&location=NSW&order=1&page=1 
```

它不应该对 PHP 产生影响，因为这个不存在的路径最终会被解析为 $_SERVER['PATH_INFO']，但脚本执行保持不变。

现在的问题是：您的 SEO 相关关键字的来源是什么？:)

# c - 使用 gcc 编译基本 x86 代码时出现链接错误

> ID：13712858
> 
> 赞同：0
> 
> 时间：2012-12-04T22:10:49.820
> 
> 标签：c, gcc, compiler-errors, x86

我正在尝试编写非常基本的 x86 代码并在 C 程序中调用它。我正在运行 OSX 10.8.2。这是我的代码：

开始.c：

```
#include <stdio.h>

void _main();  // inform the compiler that Main is an external function

int main(int argc, char **argv) {
    _main();
    return 0;
} 
```

代码.s

```
.text

.globl _main
_main:
    ret 
```

我运行以下命令来尝试编译：

```
gcc -c -o code.o code.s
gcc -c -o start.o start.c
gcc -o start start.o code.o 
```

然后在最终命令之后返回此输出：

```
Undefined symbols for architecture x86_64:
  "__main", referenced from:
      _main in start.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我在编译器调用中遗​​漏了什么吗？我需要更新一些东西/安装一些不同的东西吗？我只是无法在任何地方找到明确的答案，因为这是一个如此普遍的输出。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:13:43.593

您的 asm`_main`符号中需要一个额外的下划线：

```
.text

.globl __main
__main:
    ret 
```

C 符号在编译时会得到一个下划线前缀，因此您的 C`main`实际上是并且实际上需要定义`_main`一个 extern C ，就好像您在 asm 中编写它一样。`_main``__main`

# ios - 水平视差滚动 UIScrollView iOS

> ID：13712863
> 
> 赞同：5
> 
> 时间：2012-12-04T22:11:10.520
> 
> 标签：ios, uiview, uiscrollview, parallax, uiscrollviewdelegate

我正在尝试在分页滚动视图上实现水平视差，这使得一个视图看起来在 x 方向上前进得更快，但在同一位置“着陆”（例如，说（0,0））。这是我的一般设置/视图层次结构：

*   （透明滚动条，拦截/传递滚动事件）
*   （我想在 x 方向上移动 1.2 倍速度的对象叠加层，但不超过它的“着陆点”）
*   （另一个我想在 x 方向以 1.0 倍的速度移动的叠加层）

我知道它必须通过修改 contentOffset 来做一些事情，我让我的代表全部设置好，以便他们都可以以 1 倍的速度朝着同一个方向移动……关于解决方案的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:33:26.300

如果您想保留当前设置，您需要做的就是将`-(void)scrollViewDidScroll:(UIScrollView *)scroller`委托方法与跟踪滚动事件的滚动器一起使用。在这种方法中，您将跟踪内容偏移，然后使用您的速度倍增器以您希望的方式移动您的其他视图。

但是，您只需使用 2 个滚动视图即可轻松完成此操作，当一个滚动视图移动时，您可以`contentOffset`在同一个`-(void)scrollViewDidScroll:(UIScrollView *)scroller`委托方法中跟踪它并相应地移动另一个。

此外，如果两个滚动视图的大小不同，自然视差效果非常容易实现，`contentOffset`在`-(void)scrollViewDidScroll:(UIScrollView *)scroller`委托方法中跟踪，然后使用值和滚动视图`contentSize`获取滚动视图移动距离的百分比，然后简单地`contentOffset`设置辅助滚动视图滚动它的百分比`contentSize`。

如果您需要进一步解释，请告诉我。

# asp.net - .Net - 重复页面部分中元素 ID 的最佳实践

> ID：13712867
> 
> 赞同：0
> 
> 时间：2012-12-04T22:11:17.937
> 
> 标签：asp.net

我不确定如何将这个问题归结为一个合理的单行标题。我也是.Net 的新手。

我想构建发票的网页版本，但我希望发票的每一页都顺着页面向下流动，而不是分页。每个部分的页眉将相同，但行项目和页脚将不同。

我之前通过将 html 写入 stringbuilder 然后将其输出到文字控件来完成此操作，但我认为必须有更好的方法。我只是很难概念化如何使用服务器控件执行此类操作，因为 ID 需要是唯一的。

有人可以在这里指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:45:17.373

您可以创建自定义控件并为其提供一些属性，您可以修改您想要的方式并将相同的页眉和页脚添加到控件。然后在您的页面上使用它多少次。在此处查看教程：

[http://www.codeproject.com/Articles/87474/ASP-NET-Custom-Control](http://www.codeproject.com/Articles/87474/ASP-NET-Custom-Control)

# css - 悬停时更改列背景颜色

> ID：13712868
> 
> 赞同：5
> 
> 时间：2012-12-04T22:11:19.133
> 
> 标签：css, hover, selector

我有一张 .theClass 类的表。该表只有两列。

是否可以选择整列并使整列受到悬停事件的影响？

当悬停该列的任何 td 时，想要更改列中所有 td 的背景颜色。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T00:52:19.453

在[AngularJS](http://angularjs.org/)中，我会这样解决：

html:

```
<td class='sometdstyle'
    ng-class="{ 'active': isActiveCol[0]}"
    ng-mouseover="isActiveCol[0]=true" 
    ng-mouseleave="isActiveCol[0]=false"> 
```

控制器或`ng-init`（初始值）：

```
$scope.isActiveCol = [ false, false ]; 
```

CSS：

```
.className td.active { background-color:black; } 
```

-或者-

```
.className .sometdstyle.active { background-color:black; } 
```

如果矩阵大于 2x2 并且单元格的内容是可编程的，则`ng-repeat`解决了进一步的复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:37:39.037

在 CSS4 父选择器出现之前，我认为您将不得不使用 JavaScript。这是一个 jQuery 解决方案，不需要对表的标记进行任何更改。当一列悬停时，它会计算它在行中的位置 (thisIndex) 并将类“活动”应用于在其父行中具有相同位置 (索引) 的任何列。

演示：http: [//jsbin.com/obeyix/1](http://jsbin.com/obeyix/1)

```
 var $td = $('table td'); // Place outside hover function for performance reasons

    $('td').bind('hover', function() {

        // Position of hovered column within this row
        var thisIndex = $(this).parents('tr').find('td').index( $(this) );

        // Add active class to all columns that have the same index as the hovered one
        $('table tr td:nth-child(' + (thisIndex+1) + ')').addClass('active');

    // Remove active class when mouse leaves a cell
    }).bind('mouseleave', function() {
        $td.removeClass('active');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:54:06.817

这在 CSS 中是不可能的，根本原因是列不构成元素。您可以使用`col`元素，但它们实际上不是列元素：它们不包含作为子元素的单元格，并且只能用于设置单元格的某些属性，因此没有悬停`col`元素的概念。

因此，即使是父选择器也无济于事，因为单元格没有与列对应的父级或祖先。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:16:06.997

只需为每列创建一个不同的类（例如：`col1`、、、`col2`等`col3`），然后您可以根据列号进行选择和更改。

所以（一些非常hacky的代码）：

```
$('td').on('mouseover', function(){

    var className = $(this).attr('class');
    var column = className.match(/\d+$/);
    var columnNumber = column[0];

    $('td.col' + columnNumber).(do something)
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-11T16:35:28.530

仅使用 CSS，我们无法按照前面的答案更改属性。但我遇到了类似的问题，我需要更改悬停单元格列的背景颜色。我有一个技巧来解决我的问题

```
td:hover::after 
```

您可以查看 [https://css-tricks.com/simple-css-row-column-highlighting/](https://css-tricks.com/simple-css-row-column-highlighting/)自己尝试一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-13T04:08:08.483

在`**AngularJS**`我用我的方式解决了这***`with and without using controller`***两个模型`MVVM`，`MVC`我敢打赌你可以***很容易地***理解这些。

***带普通表行（不带`ng-repeat`）***

[![使用 AngularJS 更改表格列背景](../Images/56b059133039edb6b78d3bcf1320089c.png)](https://i.stack.imgur.com/NkR6V.gif)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change table column background using AngularJS</title>
    <style>
        .notth:hover{
            background:rgba(20,200,0,0.5);
        }
        /*If want to change hover background for thead rows also.*/
        /**** then remove the above style class.***/
        /*th:hover{
            /*background:rgba(20,200,0,0.5);*/
        /*}*/
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
</head>
<body ng-app>

<table border="0" width="500">
    <thead>
        <col width="150"/>
        <col width="150"/>
        <col width="150"/>
        <th>First Column</th>
        <th>Second Column</th>
        <th>Third Column</th>
    </thead>
    <tr class="notth">
        <td ng-style="tdaStyle" ng-mouseover="tdaStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdaStyle={}">This is A</td>
        <td ng-style="tdbStyle" ng-mouseover="tdbStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdbStyle={}">This is B</td>
        <td ng-style="tdcStyle" ng-mouseover="tdcStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdcStyle={}">This is C</td>
    </tr>

    <tr class="notth">
        <td ng-style="tdaStyle" ng-mouseover="tdaStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdaStyle={}">This is C</td>
        <td ng-style="tdbStyle" ng-mouseover="tdbStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdbStyle={}">This is D</td>
        <td ng-style="tdcStyle" ng-mouseover="tdcStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdcStyle={}">This is A</td>
    </tr>

    <tr class="notth">
        <td ng-style="tdaStyle" ng-mouseover="tdaStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdaStyle={}">This is E</td>
        <td ng-style="tdbStyle" ng-mouseover="tdbStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdbStyle={}">This is F</td>
        <td ng-style="tdcStyle" ng-mouseover="tdcStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdcStyle={}">This is B</td>
    </tr>

    <tr class="notth">
        <td ng-style="tdaStyle" ng-mouseover="tdaStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdaStyle={}">{{tdaStyle}}</td>
        <td ng-style="tdbStyle" ng-mouseover="tdbStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdbStyle={}">{{tdbStyle}}</td>
        <td ng-style="tdcStyle" ng-mouseover="tdcStyle={'background':'rgba(20,200,0,0.5)'}"
            ng-mouseleave="tdcStyle={}">{{tdcStyle}}</td>
    </tr>

</table>

</body>
</html>
```

***有`ng-repeat`指令***

[![使用 <code>ng-repeat</code> 指令](../Images/b51ccb6d1cc0d9d95f32538ecbeb230d.png)](https://i.stack.imgur.com/6d1FL.gif)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change table column background using AngularJS</title>
    <style>
        .notth:hover{
            background:rgba(20,200,0,0.5);
        }
        .tdStyle{
            background:rgba(20,200,0,0.5);
        }
        /*If want to change hover background for thead rows also.*/
        /**** then remove the above style class.***/
        /*th:hover{
            /*background:rgba(20,200,0,0.5);*/
        /*}*/
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
    <script>
        var app = angular.module("MyApp", []);
        app.controller("HomeController", function($scope){

            $scope.init = function(){
                $scope.data =
                    [{first:"This is A", second:"This is B", third:"Third is C"},
                        {first:"This is B", second:"This is C", third:"Third is D"},
                        {first:"This is C", second:"This is D", third:"Third is E"},
                        {first:"This is D", second:"This is E", third:"Third is F"},
                        {first:"This is E", second:"This is F", third:"Third is G"}];

                $scope.msg = "";
                $scope.reset_td_Styles();
            };

            $scope.reset_td_Styles = function(){
                $scope.td0Style = "";
                $scope.td1Style = "";
                $scope.td2Style = "";
            };

            $scope.changeClass = function(styleName, className){
                $scope.msg = styleName.toString();

                $scope.reset_td_Styles();

                switch(styleName){
                    case "td0Style":$scope.td0Style=className;break;
                    case "td1Style":$scope.td1Style=className;break;
                    case "td2Style":$scope.td2Style=className;break;
                }
            };
        });
    </script>
</head>

<body ng-app="MyApp" ng-controller="HomeController" ng-init="init()">

<table border="0" width="500">
    <thead>
        <col width="150"/>
        <col width="150"/>
        <col width="150"/>
        <th>First Column</th>
        <th>Second Column</th>
        <th>Third Column</th>
    </thead>

    <tr class="notth" ng-repeat="item in data">

        <td ng-class="td0Style" ng-mouseenter="changeClass('td0Style', 'tdStyle')"
            ng-mouseleave="changeClass('td0Style', '')">{{item.first}}</td>

        <td ng-class="td1Style" ng-mouseenter="changeClass('td1Style', 'tdStyle')"
            ng-mouseleave="changeClass('td1Style', '')">{{item.second}}</td>

        <td ng-class="td2Style" ng-mouseenter="changeClass('td2Style', 'tdStyle')"
            ng-mouseleave="changeClass('td2Style', '')">{{item.third}}</td>

    </tr>

</table>

<div>td0Style is : {{td0Style}}</div>
<div>td1Style is : {{td1Style}}</div>
<div>td2Style is : {{td2Style}}</div>
<div>Message is : {{msg}}</div>

</body>
</html>
```

因为比较容易的新手也能很容易理解。

# java - Twitter 抄写员和 clojure “必须使用 request_token 调用 access_token 方法”

> ID：13712871
> 
> 赞同：2
> 
> 时间：2012-12-04T22:11:34.177
> 
> 标签：java, twitter, clojure, oauth-2.0, scribe

（注意如果你不理解 clojure，我可以翻译 Java 中的代码，请询问）

我正在将 scribe 与 clojure 一起使用，我发现使用 twitter 登录有一些问题，我正在使用的代码：

```
(def twitter-service
  (-> (doto
          (ServiceBuilder.)
        (.provider (TwitterApi$Authenticate.))
        (.apiKey "apikey")
        (.apiSecret "apisecret")
        (.callback "https://morgan-siscia.rhcloud.com/tatata/"))
      (.build)))

(def tokens (atom {}))

(defn get-token []
  (.getRequestToken twitter-service))

(defn get-twitter-url [token]
  (swap! tokens assoc (.getToken token) token)
  (.getAuthorizationUrl twitter-service token))

(defn get-info-twitter [oauth-token oauth-veri]
  (let [token (get @tokens oauth-token)
        verifier (Verifier. oauth-veri)
        access-token (.getAccessToken twitter-service token verifier)
        request (doto (OAuthRequest. (Verb/POST)
                                     "https://api.twitter.com/oauth/access_token")
                  (.addOAuthParameter "oauth_token" oauth-token)
                  (.addBodyParameter "oauth_verifier" oauth-veri))]
    (do
      (.signRequest twitter-service access-token request)
      (swap! tokens dissoc oauth-token))
    (.getBody (.send request)))) 
```

该代码是java代码的直接翻译，但是它不起作用。

当我调用 (get-info-twitter "the-oauth-code" "the verifier code") twitter 返回错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<hash>
  <request>/oauth/access_token</request>
  <error>The access_token method must be called with a request_token</error>
</hash> 
```

老实说，我不知道我做错了什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:27:59.603

以下是 Twitter OAuth 的工作原理（我使用 Twitter4j 进行，原理应该与您相同）：

*   你问一个**RequestToken**：

> RequestToken requestToken = twitter.getOAuthRequestToken();

*   从这里，你得到 2 个对象：一个**token**和一个**tokenSecret**：

> 字符串令牌 = requestToken.getToken(); 字符串 secretToken = requestToken.getTokenSecret();

*   用户正在授权您的应用程序， Twitter 调用**回调 URL**，向您传递 2 个参数：**oauth_token**和**oauth_verifier**

*   使用这 2 个参数，您可以询问**AccessToken**：

> AccessToken accessToken = twitter.getOAuthAccessToken(requestToken, oauth_verifier);

requestToken 是从以前的令牌重建的，并且 secretToken 保存在某处

*   这个新对象包含 2 个字符串，您必须保留以备将来调用 Twitter 时使用：

> credentials.token = accessToken.getToken();
> 
> credentials.secret = accessToken.getTokenSecret();

我将此对象保存在数据库中，并在以后调用 Twitter 时重用它。当我对所有这些标记都不太了解时，我遇到了和你一样的错误。

尝试逐步遵循此步骤，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:32:31.453

参数来自`oauth_verifier`回调。使用那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:29:49.250

你为什么不使用clojure-twitter？它会更干净。

例子：

```
(:require twitter [oauth.client :as oauth])

 ;; Make a OAuth consumer
 (def oauth-consumer (oauth/make-consumer 
                      twitter-key
                      twitter-secret
                      "https://api.twitter.com/oauth/request_token"
                      "https://api.twitter.com/oauth/access_token"
                      "https://api.twitter.com/oauth/authorize"
                      :hmac-sha1)) 
```

接着：

```
(twitter/with-oauth oauth-consumer
     oauth-access-token
     oauth-access-token-secret
     (print (twitter/user-timeline :screen-name username))) 
```

[https://github.com/mattrepl/clojure-twitter](https://github.com/mattrepl/clojure-twitter)

# c# - C#抽象和数据库层

> ID：13712872
> 
> 赞同：0
> 
> 时间：2012-12-04T22:11:47.657
> 
> 标签：c#, .net, .net-3.5, data-access-layer, sqlcommand

我想知道将其中一些代码抽象为简单 DAL 的更好方法是什么。目前，我只是在修补代码，现在没有时间或不需要使用 EF、Linq2Sql 或任何 ORM。

```
 public string GetMySpecId(string dataId)
    {
        using (SqlConnection conn = new SqlConnection(this.MyConnectionString))
        {

            conn.Open();

            // Declare the parameter in the query string
            using (SqlCommand command = new SqlCommand(@"select ""specId"" from ""MyTable"" where ""dataId"" = :dataId", conn))
            {
                // Now add the parameter to the parameter collection of the command specifying its type.
                command.Parameters.Add(new SqlParameter("dataId", SqlDbType.Text));

                command.Prepare();

                // Now, add a value to it and later execute the command as usual.
                command.Parameters[0].Value = dataId;

                using (SqlDataReader dr = command.ExecuteReader())
                {
                    while (dr.Read())
                    {
                        specId = dr[0].ToString();
                    }
                }
            }
        }

        return specId;
    } 
```

什么是从 GetMySpecId() 中提取连接、命令等的好方法，因为我将拥有大量这些功能并且不想一遍又一遍地编写 using....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:25:18.893

好吧，您可以编写自己的自定义数据访问助手来封装所有这些内容并返回一个 DataTable：

```
public string GetMySpecId(string dataId)
{
    DataTable result = _dbHelper.ExecuteQuery(
        @"select ""specId"" from ""MyTable"" where ""dataId"" = :dataId",
        new SqlParameter("dataId", dataId);
    return result.Rows[0][0].ToString();
} 
```

或者，如果您坚持使用 DataReader 的想法，您可以将委托传递给助手，该助手在 using 语句中被调用：

```
public string GetMySpecId(string dataId)
{
    return _dbHelper.ExecuteQuery(
        dr => 
           {
               if(dr.Read())
               {
                   return dr[0].ToString();
               }
               // do whatever makes sense here.
           },
        @"select ""specId"" from ""MyTable"" where ""dataId"" = :dataId",
        new SqlParameter("dataId", dataId));
} 
```

您还可以使用像[Dapper](http://code.google.com/p/dapper-dot-net/)这样的轻量级工具来简化一些语法并负责映射到您的数据类型。（您仍然需要处理打开连接等问题。）

### 更新

下面是如何编写第二个示例中使用的 ExecuteQuery 方法的示例：

```
public T ExecuteQuery<T>(
    Func<IDataReader, T> getResult,
    string query,
    params IDataParameter[] parameters)
{
    using (SqlConnection conn = new SqlConnection(this.MyConnectionString))
    {
        conn.Open();
        // Declare the parameter in the query string
        using (SqlCommand command = new SqlCommand(query, conn))
        {
            foreach(var parameter in parameters)
            {
                command.Parameters.Add(parameter);
            }
            command.Prepare();
            using (SqlDataReader dr = command.ExecuteReader())
            {
                return getResult(dr);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:57:24.467

您可以使用 yield return 语句来将连接、命令和读取器对象保留在 using 语句中。

```
public class ScalarReader<T>
{
    const string MyConnectionString = "...";

    private string _returnColumn, _table, _whereCond;
    private object[] _condParams;

    public ScalarReader(string returnColumn, string table, string whereCond,
                        params object[] condParams)
    {
        _returnColumn = returnColumn;
        _table = table;
        _whereCond = whereCond;
        _condParams = condParams;
    }

    public IEnumerator<T> GetEnumerator()
    {
        using (SqlConnection conn = new SqlConnection(MyConnectionString)) {
            conn.Open();
            string select = String.Format(@"SELECT ""{0}"" FROM ""{1}"" WHERE {2}",
                                          _returnColumn, _table, _whereCond);
            using (SqlCommand command = new SqlCommand(select, conn)) {
                for (int p = 0; p < _condParams.Length; p++) {
                    command.Parameters.AddWithValue("@" + (p+1), _condParams[p]);
                }
                using (SqlDataReader dr = command.ExecuteReader()) {
                    while (dr.Read()) {
                        if (dr.IsDBNull(0)) {
                            yield return default(T);
                        } else {
                            yield return (T)dr[0];
                        }
                    }
                }
            }
        }
    }
} 
```

你会这样称呼它

```
var reader = new ScalarReader<string>("specId", "MyTable", "dataId=@1", "x");
foreach (string id in reader) {
    Console.WriteLine(id);
} 
```

请注意，我使用的是参数名称的约定。它们被命名为`@1, @2, @3 ...`.

```
var reader =
    new ScalarReader<DateTime>("date", "MyTable", "num=@1 AND name=@2", 77, "joe"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:19:34.147

您需要从 using 语句的中间返回一个 IDataReader，一旦这样做，您将失去连接和数据。你不能真正做你所追求的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:29:34.187

你可以做这样的事情，抱歉没有实际的代码，但它会给你这个想法。当然，必须小心地将 object[] 转换回有用的东西，但是你已经在使用 specId = dr[0].ToString();

```
class MyDb
{
    public MyDb()
    {
    }

    public void Initialize()
    {
        // open the connection
    }

    public void Finalize()
    {
        // close the connection
    }

    public List<object[]> Query(string command, List<SqlParameter> params)
    {
        // prepare command
        // execute reader
        // read all values into List of object[], and return it
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T22:30:28.690

您可以创建一个基本抽象类，该类将具有一些具有所有使用和基本代码的基本功能，如下所示：

```
public abstract class BaseClass
{
  public abstract void myFunc(SqlConnection conn);

  public void BaseFunc()
  {      
        using (SqlConnection conn = new SqlConnection(this.MyConnectionString))
        {
            conn.Open();
            myFunc(conn);
            ..any other base implementation...
        }
  }
} 
```

每个派生类都将继承 BaseClass 并使用特定查询和每个派生类的所有特定内容实现抽象 MyFunc。您将从基础抽象类的 BaseFunc 函数外部调用。

# solr - 在没有多核的情况下重新加载 Solr 配置

> ID：13712873
> 
> 赞同：1
> 
> 时间：2012-12-04T22:11:51.380
> 
> 标签：solr, lucene, reload, multicore, core

是否可以在不设置 Multicore 或重新启动 servlet 容器的情况下[重新加载 Solr 配置？](http://wiki.apache.org/solr/CoreAdmin#RELOAD)

我想在管理员中使用分析选项卡调整一些 <analyzer> 链，并将参数调整为我的 <requestHandler>，但是在对 schema.xml 或 solrconfig.xml 进行每次小的更改后都必须重新启动 servlet 容器有点的痛苦和耗时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T19:40:16.190

SOLR 中总是有一个核心。默认情况下，SOLR 实例创建一个名为**collection1**的核心。如果你有一个单核并且不确定如何在运行时重新加载，你可以使用这个，

```
http://localhost:8080/solr/admin/cores?action=RELOAD&core=collection1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:41:48.023

据我所知，在线重新加载需要多核配置，事实证明这并不难：

将其`solr.xml`放入 solr 主目录

```
<solr persistent="false" sharedLib="lib">
  <cores adminPath="/admin/cores" defaultCoreName="core0">
    <core name="core0" instanceDir="." />
  </cores>
</solr> 
```

重新启动 servlet 容器。

点击这样的 URL 以重新加载配置：

```
http://localhost:8983/solr/admin/cores?action=RELOAD&core=core0 
```

要消除其余的摩擦，您可以通过在`conf`目录中运行以下脚本将其设置为自动重新加载配置。

```
get_on_fsevent.rb "http://localhost:8983/solr/admin/cores?action=RELOAD&core=core0" 
```

get_on_fsevent.rb：

```
#!/usr/bin/env ruby
require 'rubygems'
require 'rb-fsevent'
require 'net/http'
require 'uri'

uri = URI.parse(ARGV.first)

fsevent = FSEvent.new
fsevent.watch Dir.pwd do |directories|
  puts "Detected change. Requesting #{ARGV.first}"
  puts Net::HTTP.get_response(uri)
end
fsevent.run 
```

# c# - 如何从路径中获取文件名？

> ID：13712876
> 
> 赞同：2
> 
> 时间：2012-12-04T22:12:01.727
> 
> 标签：c#, winforms

我正在使用 SaveFileDialog (svf) 将某些内容从 winform 保存到文件中，并且我想使用文件名，保存后，我该怎么做？

```
sfd.FileName; 
```

这不是正确的方法，因为它也有路径......（例如：c：/asd/asd/asd.doc）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:14:36.640

您将使用`Path.GetFileName()`仅获取文件名。

```
string fileName = Path.GetFileName(sfd.FileName); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T22:16:27.553

您需要使用各种[`Path`方法](http://msdn.microsoft.com/en-us/library/system.io.path_methods.aspx)将路径拆分为您需要的各种组件。

在这种情况下[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

```
string filename = Path.GetFileName(sfd.FileName); 
```

# android - 为启用了文本缩放的智能手机调整文本大小

> ID：13712881
> 
> 赞同：1
> 
> 时间：2012-12-04T22:12:36.623
> 
> 标签：android, css, mobile, blackberry, media-queries

我不知道这是否适用于Android或iPhone。我有一个用于测试的 Android 2.3.3 和一个带有 iOS 5 的第三代 iPod Touch。但我知道这是我朋友的新黑莓手机的问题。

基本上，我的好友打开了文本缩放（或任何你称之为的），以便在他在黑莓上查看的任何网页上，文本以正常大小的 150% 显示。好吧，我已经用媒体查询优化了我的网站，所以小屏幕上的文本已经增加到 150%。在他的设备上，设备设置与我的 CSS 设置相结合，文本变得绝对巨大！

我敢肯定这对很多用户来说都是一个问题，因为那里有很多网站，它们的文字很小，必须针对移动设备进行缩放。

所以我的问题是：是否有某种最佳实践方法或任何解决方案来处理这些打开文本缩放或等效功能的人？我怎样才能使我的文本不会过大并且对他们不可用？我是否只是将其留在他们手中以将文本缩小？

另外，Android 2.3 是否有某种我应该测试的功能？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:58:23.890

对于用户增加文本大小的情况，我认为没有解决方案。如果有人知道，请指出。同时，我发现您可以通过以下方式对移动设备进行特定于设备的调整：

-moz-text-size-adjust -webkit-text-size-adjust -ms-text-size-adjust

详细信息可以在这里找到：https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust

我将把问题标记为已回答，因为我不相信此时确实存在原始问题的解决方案。

# javascript - 鼠标悬停时获取一个单词

> ID：13712885
> 
> 赞同：0
> 
> 时间：2012-12-04T22:12:51.663
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我开发了 chrome 扩展，当鼠标悬停在这个词上时，我需要获取任何网页的词。我不想将所有单词都放到特定的容器中，然后通过 id 获取。例如，如果我`<p>The weather is very good today</p>`想将鼠标悬停在单词“very”上并将其放入我的 js 中（例如，`alert('very')`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:15:06.217

我想向您展示此功能**[的概念证明。](http://jsfiddle.net/X6jvb/)**它非常幼稚和弱，但表明使用适当的正则表达式是可能的。基本上，将鼠标悬停在绿色边框的 div 上即可查看结果。

使用这种方法，每个段落都使用正则表达式分割成多个块。当然，正则表达式越强大，结果就越好。然后，`onmousemove`正在冒泡，被跨度触发。读取 span 的内容是小菜一碟。

这种方法非常具有侵入性，通过修改您可能不想接触的 DOM 结构。它虽然在普通的 JS 中工作。更高级（仍然很简单）的方法如下：

1.  不要碰任何段落。
2.  观察`onmousemove`鼠标下的段落。
3.  保存`clientX`和`clientY`。
4.  复制段落，使其透明和`position: absolute`.
5.  **在副本**上做这`spanify()`件事。
***   使用[document.elementFromPoint](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)查找悬停的跨度。使用已保存 (3.)`clientX`并`clientY`移动副本的位置（左，上）。*   你有跨度。你已经得到了它的内容。*   从 DOM 中删除段落副本。**

 **这个 hack 仍然适用于普通的 JS。快乐编码！;)**

# objective-c - 如何根据计算的属性过滤来自 NSFetchedResultsController 的结果？

> ID：13712889
> 
> 赞同：3
> 
> 时间：2012-12-04T22:13:21.693
> 
> 标签：objective-c, ios, core-data, nspredicate

我有一个在该类的类别中定义的布尔属性的`NSManagedObject`调用。`WorkOrder``isComplete`

我使用 an`NSFetchedResultsController`从数据存储中获取这些并在表格视图中显示它们。我希望能够根据`isComplete`属性过滤结果，但当然，谓词`NSFetchedResultsController`不能这样做，因为属性不是核心数据属性。我也无法过滤控制器的`fetchedObjects`数组，因为该属性是只读的。

有什么方法可以做我想做的事情，而不需要滚动我自己的数据结构来模仿`NSFetchedResultsController`但允许我在获取后过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:27:36.743

正如我在 Adam Eberbach 回答的评论中所说，我使用`NSDictionary`( `self.workOrdersByDate`, 下面) 来存储分组结果，以及`NSArray`( `self.dateSections`, 下面) 来存储字典的排序键。

```
// Fetch all the WorkOrders
NSArray *results = [WorkOrder findAll];

// Filter based on isComplete property
NSPredicate *filter;
if (self.segmentedStatus.selectedSegmentIndex == SegmentAssigned) {
    filter = [NSPredicate predicateWithFormat:@"isComplete == 0"];
} else {
    filter = [NSPredicate predicateWithFormat:@"isComplete == 1"];
}
results = [results filteredArrayUsingPredicate:filter];

// Retain an NSArray of sorted NSDate keys
self.dateSections = [[results valueForKeyPath:@"@distinctUnionOfObjects.scheduledStartDate.beginningOfDay"] sortedArrayUsingSelector:@selector(compare:)];

// Create the dictionary
self.workOrdersByDate = [[NSMutableDictionary alloc] initWithCapacity:self.dateSections.count];
for (int sectionNum = 0; sectionNum < self.dateSections.count; sectionNum++) {
    NSPredicate *sectionPredicate = [NSPredicate predicateWithFormat:@"scheduledStartDate.beginningOfDay == %@", [self.dateSections objectAtIndex:sectionNum]];
    NSArray *workOrdersForSection = [results filteredArrayUsingPredicate:sectionPredicate];
    [resultsDict setObject:workOrdersForSection forKey:[self.dateSections objectAtIndex:sectionNum]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:54:23.180

您从 Core Data 查询中收到一个对象数组，为什么不使用`filteredArrayUsingPredicate`该结果来获取您真正想要的数组？

在这种情况下，您可能会放弃使用 NSFetchedResultsController 直接填充您的表格，但当数据更改时，它仍然对它的委托通知有用。

# python - 更改 Python easy_install 的默认包含路径

> ID：13712891
> 
> 赞同：2
> 
> 时间：2012-12-04T22:13:23.190
> 
> 标签：python, macos, clang, setuptools, easy-install

关于 Python 的 setuptools 的问题。我刚刚全新安装了 Mac OS 10.8 并安装了官方 Python 2.7.3 包。安装二进制模块`py-bcrypt`（或任何其他二进制模块）时，我收到以下错误：

```
bcrypt/bcrypt_python.c:17:10: fatal error: 'Python.h' file not found
#include "Python.h"
         ^
1 error generated.
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

运行`sudo easy_install --verbose py-bcrypt`显示以下对 CLang 的调用：

```
clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c bcrypt/bcrypt_python.c -o build/temp.macosx-10.8-intel-2.7/bcrypt/bcrypt_python.o 
```

...这很好，除了这部分：

```
-I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 
```

因为`Python.h`这里其实是存放在*非*系统库中的：`/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h`

所以最后要直截了当地说：**如何更改 setuptools 使用的默认包含路径？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T08:51:50.507

在 Ubuntu 中，这样做`.bashrc`可以`.zshrc`解决问题：

```
export C_INCLUDE_PATH=/you_name_it/include/python2.7
export CPLUS_INCLUDE_PATH=/you_name_it/include/python2.7 
```

它`gcc`可以找到您需要的其他标题，但我不确定它是否适用于`clang`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T19:12:11.333

我仍然不知道如何实际执行此操作，但我找到了一种解决方法。安装 XCode 的命令行工具（首选项 -> 下载 -> 命令行工具）将 Python 标头放在正确的位置。

# meteor - 在 chrome 扩展中使用流星

> ID：13712893
> 
> 赞同：0
> 
> 时间：2012-12-04T22:13:41.137
> 
> 标签：meteor

是否可以以 todos 应用程序（来自流星示例）为例并将其加载为 chrome 扩展程序？这意味着扩展程序将在我的流星网络应用程序上显示待办事项列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:36:09.287

您可以加载带有扩展名的网页，是的。

如果你想做一些更原生的事情，你必须以某种方式导入数据。您可以创建一个为待办事项列表输出 JSON 的页面，并在扩展中对其进行处理。

# windows-phone-7 - Windows 市场中的应用程序图标

> ID：13712898
> 
> 赞同：0
> 
> 时间：2012-12-04T22:13:52.683
> 
> 标签：windows-phone-7, submission

我将 appIcon 添加到我的应用程序中，它与示例一样是 62x62，但是当我进入市场时，一切都变得更大了。它应该是更高的分辨率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:16:27.853

![Windows Phone 图标](../Images/189d7c5a316e3642a4c2568bb766c64c.png)

请参阅[创建 WINDOWS PHONE 7 应用程序和市场图标。](http://expression.microsoft.com/en-in/gg317447.aspx)

# erlang - 如何告诉一个进程创建另一个进程并跟踪它

> ID：13712900
> 
> 赞同：4
> 
> 时间：2012-12-04T22:14:00.227
> 
> 标签：erlang, distributed

我如何告诉一个特定的进程（我们称之为生成器）在 Erlang 中创建一个新进程？

另外，如何跟踪生成器创建的所有进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:51:00.803

好的。现在，为了学习的目的，让我们做一个非常基本的例子。其他人会谈论`OTP Supervisors, Process dictionaries`等，但我想保持轻松学习目的。举个例子，生成器可以知道它创建了多少进程，它们的`Pids`，知道它们何时死亡等

```
-模块（发电机）。
-编译（export_all）。
-定义（错误（X），错误记录器：错误报告（X））。

开始（）->
    寄存器（发电机，产卵（乐趣（）->发电机（）结束）），
    好的。

生成器（）->
    进程缓冲区 = [],
    process_flag(trap_exit,true),
    循环（进程缓冲区）。

创建（模块，功能，参数）->
    发电机 ！{create_new_proc,{Module,Function,Args}},
    好的。

send_to_kids（消息）->
    发电机 ！{tell_kids，消息}，
    好的。

循环（缓冲区）->
    收到
        {create_new_proc,{M,F,A}} ->
            Pid = spawn(M,F,A),
            链接（PID），
            循环（[Pid|缓冲区]）；
        {tell_kids，消息} ->
            [ 孩子 ！{广播,留言} || 孩子 <- 缓冲区]，
            循环（缓冲区）；
        {'EXIT',SomePid,Reason} ->
            ?ERROR(["孩子崩溃了",{pid,SomePid},{reason,Reason}]),
            循环（列表：删除（SomePid，缓冲区））；
        _ -> 循环（缓冲区）
    结尾。

child_loop()->
    收到
        {广播，消息} ->
            io:format("\n\tChild: ~p got: ~p~n",[self(),Message]),
            child_loop();
        _ -> child_loop()
    结尾。

```

在 shell 中测试

```
E:\应用程序>erl
Eshell V5.9（使用 ^G 中止）
1> c（生成器）。
{好的，发电机}
2> 发生器：开始（）。
好的
3> 生成器：创建（生成器，child_loop，[]）。
好的
4> [生成器：创建（生成器，child_loop，[]）|| _ <- 列表：seq(1,5)]，好的。
好的
5> generator:send_to_kids("Erlang 很好！").
        孩子：<0.45.0> 得到：“二郎好！”
        孩子：<0.44.0> 得到：“二郎好！”
        孩子：<0.43.0> 得到：“二郎好！”
        孩子：<0.42.0> 得到：“二郎好！”
        孩子：<0.41.0> 得到：“二郎好！”
        孩子：<0.39.0> 得到：“二郎好！”
好的
6> 发生器：send_to_kids("1+1 = 2")。
        孩子：<0.45.0> 得到：“1+1 = 2”
        孩子：<0.44.0> 得到：“1+1 = 2”
        孩子：<0.43.0> 得到：“1+1 = 2”
        孩子：<0.42.0> 得到：“1+1 = 2”
        孩子：<0.41.0> 得到：“1+1 = 2”
        孩子：<0.39.0> 得到：“1+1 = 2”
好的
7>

```

注册为`generator`已启动的进程可能会被告知启动任意数量的子进程。子进程通常是从`{M, F, A}`发送到`generator`. 生成器循环保留创建的进程的跟踪记录。然后可以告诉它向所有进程广播消息。

但是，在实践/生产中，您可能不会这样做，因为`generator`随着列表的增长，循环可能会消耗大量内存，`Buffer`因为这是我们保留所有`Pids`进程的地方。您也可以使用`ETS Tables`, or `Mnesia`etc 但我没有在示例中使用它们，因为它们看起来更高级一些。查看此[问题](https://stackoverflow.com/q/11340878/431620)及其[答案](https://stackoverflow.com/a/11344824/431620)以了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:58:37.653

您可以查看：[http](http://www.erlang.org/doc/design_principles/des_princ.html) ://www.erlang.org/doc/design_principles/des_princ.html在 os Erlang 中“生成器”是“主管”

# coldfusion - 如何在不引发 Java_heap_space 错误的情况下更新新的 Solr 搜索集合？

> ID：13712901
> 
> 赞同：1
> 
> 时间：2012-12-04T22:14:03.673
> 
> 标签：coldfusion, solr, coldfusion-10, verity

我们目前正在运行 ColdFusion 8，但计划很快迁移到 ColdFusion 10。这一举措的最大问题之一是，我们运行的最重要的应用程序之一包括当前使用 Verity Collections 构建的全文文档搜索。它基本上允许用户搜索数百个 PDF 文档的文本内容。

我刚刚在我的开发 ColdFusion 9 实例中创建了一个新的 Solr 集合，并尝试使用每天运行的现有索引逻辑更新集合，以使用存储在本地服务器上的 PDF 文档更新集合`F:\PDFS\[documentId].PDF`：

```
<cfsetting requesttimeout="3600" />

<cfquery name="getDocs" datasource="myDB">
    SELECT DISTINCT
        itemNo,
        edition,
        description,
        status,
        'F:\PDFs\'
            CONCAT documentId
            CONCAT '.PDF'   AS  document_file
    FROM    SKU_ATTRIBUTES
</cfquery>

<cfindex
    query="getDocs"
    collection="mysolrcollection"
    action="refresh"
    type="file"
    key="document_file"
    title="description"
    custom1="itemNo"
    custom2="status"
    custom3="edition" /> 
```

它运行了大约 10 分钟，然后被轰炸，但出现以下异常：

```
Java_heap_space__javalangOutOfMemoryError_Java_heap_space___at_orgapacheluceneutilUnicodeUtilUTF16toUTF8UnicodeUtiljava236___at_orgapachelucenestoreIndexOutputwriteStringIndexOutputjava102___at_orgapacheluceneindexFieldsWriterwriteFieldFieldsWriterjava232___at_orgapacheluceneindexStoredFieldsWriterPerFieldprocessFieldsStoredFieldsWriterPerFieldjava56___at_orgapacheluceneindexDocFieldConsumersPerFieldprocessFieldsDocFieldConsumersPerFieldjava37___at_orgapacheluceneindexDocFieldProcessorPerThreadprocessDocumentDocFieldProcessorPerThreadjava234___at_orgapacheluceneindexDocumentsWriterupdateDocumentDocumentsWriterjava762___at_orgapacheluceneindexDocumentsWriterupdateDocumentDocumentsWriterjava745___at_orgapacheluceneindexIndexWriterupdateDocumentIndexWriterjava2215___at_orgapacheluceneindexIndexWriterupdateDocumentIndexWriterjava2187___at_orgapachesolrupdateDirectUpdateHandler2addDocDirectUpdateHandler2java238___at_orgapachesolrupdateprocessorRunUpdateProcessorprocessAddRunUpdateProcessorFactoryjava60___at_orgapachesolrhandlerXMLLoaderprocessUpdateXMLLoaderjava140___at_orgapachesolrhandlerXMLLoaderloadXMLLoaderjava69___at_orgapachesolrhandlerContentStreamHandlerBasehandleRequestBodyContentStreamHandlerBasejava54___at_orgapachesolrhandlerRequestHandlerBasehandleRequestRequestHandlerBasejava131___at_orgapachesolrcoreSolrCoreexecuteSolrCorejava1333___at_orgapachesolrservletSolrDispatchFilterexecuteSolrDispatchFilterjava303___at_orgapachesolrservletSolrDispatchFilterdoFilterSolrDispatchFilterjava232___at_orgmortbayjettyservletServletHandler$CachedChaindoFilterServletHandlerjava1089___at_orgmortbayjettyservletServletHandlerhandleServletHandlerjava365___at_orgmortbayjettysecuritySecurityHandlerhandleSecurityHandlerjava216___at_orgmortbayjettyservletSessionHandlerhandleSessionHandlerjava181___at_orgmortbayjettyhan

Java_heap_space__javalangOutOfMemoryError_Java_heap_space___at_orgapacheluceneutilUnicodeUtilUTF16toUTF8UnicodeUtiljava236___at_orgapachelucenestoreIndexOutputwriteStringIndexOutputjava102___at_orgapacheluceneindexFieldsWriterwriteFieldFieldsWriterjava232___at_orgapacheluceneindexStoredFieldsWriterPerFieldprocessFieldsStoredFieldsWriterPerFieldjava56___at_orgapacheluceneindexDocFieldConsumersPerFieldprocessFieldsDocFieldConsumersPerFieldjava37___at_orgapacheluceneindexDocFieldProcessorPerThreadprocessDocumentDocFieldProcessorPerThreadjava234___at_orgapacheluceneindexDocumentsWriterupdateDocumentDocumentsWriterjava762___at_orgapacheluceneindexDocumentsWriterupdateDocumentDocumentsWriterjava745___at_orgapacheluceneindexIndexWriterupdateDocumentIndexWriterjava2215___at_orgapacheluceneindexIndexWriterupdateDocumentIndexWriterjava2187___at_orgapachesolrupdateDirectUpdateHandler2addDocDirectUpdateHandler2java238___at_orgapachesolrupdateprocessorRunUpdateProcessorprocessAddRunUpdateProcessorFactoryjava60___at_orgapachesolrhandlerXMLLoaderprocessUpdateXMLLoaderjava140___at_orgapachesolrhandlerXMLLoaderloadXMLLoaderjava69___at_orgapachesolrhandlerContentStreamHandlerBasehandleRequestBodyContentStreamHandlerBasejava54___at_orgapachesolrhandlerRequestHandlerBasehandleRequestRequestHandlerBasejava131___at_orgapachesolrcoreSolrCoreexecuteSolrCorejava1333___at_orgapachesolrservletSolrDispatchFilterexecuteSolrDispatchFilterjava303___at_orgapachesolrservletSolrDispatchFilterdoFilterSolrDispatchFilterjava232___at_orgmortbayjettyservletServletHandler$CachedChaindoFilterServletHandlerjava1089___at_orgmortbayjettyservletServletHandlerhandleServletHandlerjava365___at_orgmortbayjettysecuritySecurityHandlerhandleSecurityHandlerjava216___at_orgmortbayjettyservletSessionHandlerhandleSessionHandlerjava181___at_orgmortbayjettyhan request: http://localhost:8983/solr/mysolrcollection/update?commit=true&waitFlush=false&waitSearcher=false&wt=javabin 
```

当我在 ColdFusion Administrator 中查看 Solr 集合时，它比原始的 Verity 集合大得多 - 现有的 Verity 集合约为 84-85MB，包含 9000 多个文档，而这个为 1.3GB，只有 847 个文档。

此搜索功能对应用程序至关重要，我担心如果迁移到 Solr 不起作用，我们将不得不推迟升级到 CF10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:52:21.003

这听起来像是一个一次性的导入过程。您是否尝试过将结果批处理到每次迭代可能有 500 个文档。根据我的经验，当页面超过 1 分钟时，Coldfusion 效果不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:09:36.810

确保您安装了 ColdFusion 9.0.1 的 ColdFusion Hotfix 2。

[累积修补程序 2 | 冷融合 9.0.1](http://helpx.adobe.com/coldfusion/kb/cumulative-hot-fix-2-coldfusion-1.html)

Hotfix 包括 Solr 的一些主要错误修复，尤其是在索引 .PDF 文件时。或者安装 ColdFusion 9.0.2，但它不再支持 Verity。因此，您将无法在 Verity 和 Solr 之间切换。

# android - 单击组时如何在正确位置滚动 ExpandableListView

> ID：13712906
> 
> 赞同：1
> 
> 时间：2012-12-04T22:14:16.293
> 
> 标签：android

我的活动中有一个可以正常工作的 ExpandableListView。我在我的适配器中在RelativeLayout 上设置了一个clickListener，所以当我点击它时，我的组得到扩展。我的组列表是 ArrayList，我的孩子是 HashMap> 其中 Integer 是 ArrayList 的 groupPosition。Children 是任何用户都可以看到的评论列表。用户可以通过 EditText 在评论列表末尾添加评论。我的目标是将 groupView 点击的屏幕顶部定位。我试图这样做，但我的问题是：

我的第一组有 10 条评论。如果我展开第一组，我可以看到它们，并且单击的组的位置是正确的。如果我尝试展开我的第四组，当第一个已经展开时，我屏幕上的 ExpandableListView 位置转到第一组的第四个孩子，而不是刚刚展开的第四组。如果我向下滚动列表后，第四组是打开的，但我会定位在第四组而不是第一组的第四个孩子。如果我只打开没有评论的组，一切都会正常工作......

getGroupView 方法的一小部分：

```
 scanCommFav=(RelativeLayout)v.findViewById(R.id.feedcell_scancommentfavorite);

scanCommFav.setOnClickListener(new OnClickListener(){

@Override 
                            public void onClick(View v)
                            {
                                if(!isExp)
                                {
                                    if(mess==0)
                                    {
                                        setIdx(idx);
                                        addIndex(idx);
                                        getCommentNoList();

                                    }
                                    else
                                    {
                                        callCommentScript(snapId);

                                        setIdx(idx);
                                        addIndex(idx);
                                    }

                                }
                                else if(isExp)
                                {
                                    setIdx(idx);
                                    removeIndex(idx);
                                    closeGroup(idx);

                                }
                            }
                        }); 
```

addIndex(idx) 和removeIndex，添加和删除LinkedList 中打开的组的位置。setIdx(idx) 将我用于不同目的的组位置设置为 int 变量。

这是 openGroup()：

```
private void openGroup(int pos)
{
    feedlistView.setSelectedGroup(pos);
} 
```

这是closeGroup（）：

```
private void closeGroup(int idx)
{
    feedlistView.collapseGroup(idx);
} 
```

这是我的听众：

```
 feedlistView.setOnItemSelectedListener(new OnItemSelectedListener(){

        @Override
        public void onItemSelected(AdapterView<?> arg0, View view,int position, long id) {
            if(ExpandableListView.getPackedPositionForGroup(position)==ExpandableListView.PACKED_POSITION_TYPE_GROUP)
            {
            int pos = feedlistView.getSelectedItemPosition();
            feedlistView.expandGroup(pos);
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    }); 
```

我也尝试实现 setOnGroupClickListener 但不起作用。有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:53:14.437

每次我以这种方式将客户适配器设置为可扩展列表视图时，我都解决了保存实例状态和恢复 Istance 状态的问题：

```
Parcelable state = myExpList.onSaveIstanceState();
myExpList.setAdapter(myAdapter);
myExpList.onRestoreIstanceState(); 
```

在我的方法 openGroup(int position) 之后

```
myExpList.expandGroup(position);
myExpList.setSelectedGroup(position); 
```

我没有使用 setOnItemSelectedListener。

# c# - Windows窗体中的可搜索下拉列表？

> ID：13712913
> 
> 赞同：0
> 
> 时间：2012-12-04T22:14:53.500
> 
> 标签：c#, .net, forms

我有一个应用程序是另一个服务器端应用程序的前端。应用程序的用户可以在应用程序中制定“规则”并为其分配“理由”。问题是有大约 4,000 个理由。分配理由是一项要求。目前我将它放在一个下拉列表中，但我有很多功能要求有一种方法来搜索这个下拉列表，或者输入一些东西来缩小搜索字段。关于如何实现这一目标的任何建议？从未在 Windows 窗体中看到过类似的东西。我能想到的最接近的事情是谷歌自动完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:23:32.820

使用[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)，并将属性[AutoCompleteMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.autocompletemode.aspx)设置为 AutoCompleteMode.Suggest 或 AutoCompleteMode.SuggestAppend

ComboBox 专门设计为具有自动完成/内联搜索功能的下拉菜单。

# git - 如何签出文件，但随后从同步中忽略它

> ID：13712919
> 
> 赞同：0
> 
> 时间：2012-12-04T22:15:08.540
> 
> 标签：git, ignore

对于文件之类的`.project`文件...我确实希望最初签入这些文件...

然而......在最初的 git clone 之后，用户将只编辑这个`.project`文件（每个工作站不同），然后永远不会再触摸它。

我希望 git 然后忽略该文件的所有更改。

但是，有时我可能需要更新`.project`将在结帐期间创建的文件。

有没有办法“结帐然后忽略所有进一步的变化”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:33:57.767

[在这里](http://blog.pagebakers.nl/2009/01/29/git-ignoring-changes-in-trcked-files/)找到它。

*幸运的是，GIT 有一个非常简单的解决方案，只需在要忽略更改的文件或路径上运行以下命令：*

```
git update-index --assume-unchanged <file> 
```

*如果您想再次开始跟踪更改，请运行以下命令：*

```
git update-index --no-assume-unchanged <file> 
```

# .net - OOP 谜题。俱乐部的球员和有球员的俱乐部

> ID：13712922
> 
> 赞同：-1
> 
> 时间：2012-12-04T22:15:19.760
> 
> 标签：.net, oop, class, object

我不知道这是否是正确的地方。但我非常需要回答。

我正在编写锦标赛管理程序。我有一个简单的问题，但对我来说还不是很清楚。

有许多俱乐部（一个城市的一个俱乐部）。俱乐部里有球员。没有没有俱乐部的球员。

我有球员班和俱乐部班。我应该在俱乐部类中保留球员名单还是在他的班级中保留球员俱乐部？哪种方式会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:18:29.227

这取决于您需要如何使用数据。

*   如果您需要能够获得`Player`a 中的所有 s `Club`，那么您的`Club`班级应该维护一个`Player`s 列表。
*   如果您需要能够获取`Club`特定`Player`对象所属的对象，则`Player`该类应维护一个`Club`变量。
*   如果您需要两者，则同时使用两者，但请确保在其中一个更改时使它们保持同步。

为了使它们保持同步，您基本上需要每种方法的两个不同版本。第一个版本（“公共”版本）自动处理调用的副作用并同步两种表示。第二个版本是第一个版本所*调用*的。它不执行任何同步，因为这会导致无限循环。

这看起来类似于以下内容：

*   **Club.AddPlayer（播放器播放器，布尔同步 = true）**
    1.  添加`player`到该俱乐部的球员名单。
    2.  如果同步：
        1.  呼叫当前`RemovePlayer(player,false)`的`player`俱乐部。
        2.  打电话。`SetClub(this,false)`_`player`
*   **Club.RemovePlayer（播放器播放器，布尔同步 = true）**
    1.  `player`从该俱乐部的球员名单中删除。
    2.  如果同步：
        1.  打电话`player.SetClub(null,false)`。
*   **Player.SetClub（俱乐部俱乐部，布尔同步 = true）**
    1.  将玩家的俱乐部设置为`club`。
    2.  如果同步：
        1.  如果球员俱乐部不在`null`，请致电`RemovePlayer(this,false)`。
        2.  如果`club`不是`null`，请在其上调用 AddPlayer(this,false)`。

这似乎不必要地笨重，所以我希望其他人有更好的主意...... :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:19:02.667

由于每个玩家都有一个俱乐部，因此请在 Club 类中保留一份玩家列表。这使得枚举或搜索给定俱乐部中的所有球员变得快速而简单。但是，没有理由不能在 Player 类中也有一个指向其父 Club 的引用。在每个方向都有一个有效的用例，所以两者都这样做。

我假设每个玩家只能属于一个俱乐部。如果不是这样，事情会变得有点复杂。

C# 中的一个示例：（未编译/测试，因此可能有一些小错误）

```
public class Club
{
   // other class members

   // this is private so that code must use Club's methods to get at the Players
   private List<Player> _players;

   public int PlayerCount
   {
      get
      {
         return _players == null ? 0 : _players.Count;
      }
   }

   public void AddPlayer(Player p)
   {
      // null checking etc
      // here you could enforce a rule that p.ParentClub must be null
      // to prevent a Player from being in multiple Clubs
      p.ParentClub = this;
      _players.Add(p);
   }

   public void RemovePlayer(Player p)
   {
      // null checking etc
      _players.Remove(p);
      p.ParentClub = null;
   }
}

public class Player
{
   // other class members

   public Club ParentClub 
   { get; set; }
} 
```

现在，您可以执行以下操作：

```
// add Player Joe to the London Club if it is not full (10 members max)
// otherwise add Joe to the Munich Club
if(londonClub.PlayerCount <= 10)
{
   londonClub.AddPlayer(joePlayer);
}
else
{
   munichClub.AddPlayer(joePlayer);
}

// print how many players are in the club that Joe is in
Console.WriteLine("Number of Players in Joe's Club: " + joePlayer.ParentClub.PlayerCount.ToString());

// move Joe to the Amsterdam club. Note that it does not matter what Club Joe was already in
joePlayer.ParentClub.RemovePlayer(joePlayer);
amsterdamClub.AddPlayer(joePlayer); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:23:59.973

如果你使用依赖注入，那么答案是，你两者都做。在俱乐部中，您有一个数组结构，其中包含一组玩家对象。在 player 中，您有一个存储 Club 对象的 club 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:24:20.910

您可以根据目的链接两种方式。使用 a 编写 Club 类和使用`list<int> PlayerIds`a 编写 Player 类，`int ClubId`并根据操作使用其中任何一种。

例如，如果您显示俱乐部页面，则更容易使用 Club 类，如果您显示 Player 页面，则更容易使用 Player 类。

# c# - 以枚举为键对字典中的条目进行数据绑定

> ID：13712924
> 
> 赞同：2
> 
> 时间：2012-12-04T22:15:32.083
> 
> 标签：c#, silverlight, windows-phone-7, xaml, data-binding

我正在尝试将数据绑定到键是枚举的字典中的条目。我已经咨询过[这个问题](https://stackoverflow.com/q/12690515/102441)，但答案对我不起作用。以下是我的代码的非样板部分：

* * *

SomePage.xaml：

```
<!-- Here I try all the ways I can think of. None of them produce any text -->
<TextBlock Text="{Binding Data[0]}" />
<TextBlock Text="{Binding Data[EnumValueA]}" />
<TextBlock Text="{Binding Data[SomeEnum.EnumValueA]}" />
<TextBlock Text="{Binding Data[(local:SomeEnum)EnumValueA]}" />
<TextBlock Text="{Binding Data[(local:SomeEnum)SomeEnum.EnumValueA]}" /> 
```

SomePage.xaml.cs：

```
public SomePage() {
    DataContext = new SomeVM();
    InitializeComponent();
} 
```

一些VM.cs：

```
public enum SomeEnum {
    EnumValueA, EnumValueB
}
public class SomeVM {
    public Dictionary<SomeEnum, int> Data { get; private set; }
    public SomeVM() {
        Data = new Dictionary<SomeEnum, int> {
            {SomeEnum.EnumValueA, 1337}
        };
    }
} 
```

为什么这个数据绑定不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:25:51.360

这不可能。请参阅 [http://msdn.microsoft.com/en-us/library/cc645024(v=vs.95).aspx#indexdata](http://msdn.microsoft.com/en-us/library/cc645024(v=vs.95).aspx#indexdata)

> # 索引器
> 
> 索引器可用于访问路径中的属性并从列表中获取项目，但有一些明显的限制：
> 
> *   项目清单
> *   支持数字整数索引器。
> *   从 Silverlight 4 开始，支持字符串索引器。
> *   仅支持一维数组索引。
> 
> 被索引的类型必须实现或继承 IList。（接受列表，因为它实现了 IList。但是不接受 IList。）
> 
> 数字整数索引通过在属性名称后的括号 ([]) 字符内声明从零开始的索引来指定；例如，雇员 [2]。
> 
> 属性路径评估首先尝试对集合使用整数索引。如果该索引对集合无效，则 [] 中的信息将作为字符串处理。来自属性路径的字符串索引通常需要一个集合/业务对象，它是一个带有字符串键的字典。字符串索引支持绑定到动态数据对象，其中数据源的 CLR 结构可以更改，但字符串键表示仍然可以由客户端 UI 绑定的数据协定。
> 
> 验证使用索引器访问附加属性集合的项目，作为其属性路径使用的一部分。应用程序的验证结构可以在模板中声明 UI 状态，这些状态仅在引发验证错误时使用，然后可以引用该上下文中的活动错误对象。例如，以下是访问 Validation.Errors 集合中第一项的绑定的属性路径；属性路径的上下文由 RelativeSource 修改，以便仅在运行时在应用的模板上检查错误：

```
 <TextBlock Text="{Binding RelativeSource={RelativeSource
    TemplatedParent}, Path=(Validation.Errors)[0].Exception.Message }"> 
```

# php - PHP 基准测试：解析 $date_string 的最快方法

> ID：13712928
> 
> 赞同：-3
> 
> 时间：2012-12-04T22:16:14.173
> 
> 标签：php, parsing, datetime, microbenchmark

我有`$date_string = '12/1/2014';`

我需要：

1.  将其解析为时间戳号（保存在数据库中）
2.  然后解析该时间戳以以不同的格式输出，例如`December 1, 2014`

我假设使用[DateTime 类](http://www.php.net/manual/en/class.datetime.php)将是首选方法（我个人觉得它非常方便）。

```
// timestamp
$date_string = '12/1/2014'; // input
$d1 = new DateTime($date_string);
$date_timestamp = $d1->getTimestamp(); // output

// re-format
$date_timestamp = '1417410000'; // input
$d2 = new DateTime("@$date_timestamp"); // append @ to hint the timestamp
$date_formatted = $d2->format('F j, Y'); // output 
```

但是，我很好奇执行这两种解析操作的*最快方法是什么。*

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-04T22:16:14.173

在 100,000 个循环中：

*   `date()`= 3.221485 秒
*   `date_parse()`= 1.090016 秒
*   `date_parse_from_format()`= 0.871224 秒（**最快！**）

# database - Drupal 使用外部数据库

> ID：13712930
> 
> 赞同：0
> 
> 时间：2012-12-04T22:16:17.277
> 
> 标签：database, drupal, external

您好我想建立一个连接到外部数据库的站点。该数据存储了大约 10000 种产品（例如玩具，每个玩具都有很少的属性）。我能够将它实施到模块中，最好的方向是什么？我的想法是构建自定义节点模块，该模块将为每个位置创建节点，但这给了我节点植物。（我从来没有机会处理更大的数据库）什么是更好的解决方案？

感谢所有的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:52:38.863

您的选择是使用[Migrate 模块](http://drupal.org/project/migrate)。使用此模块，您可以扩展自定义模块，将所有 10,000 个数据转换为 Drupal 系统中的节点。

相信我，Migrate 可以处理超过 10,000 个数据。实际上它不是一个更大的数据库。

# c++ - E_NOINTERFACE 结果来自 D3DX11CreateEffectFromMemory

> ID：13712933
> 
> 赞同：1
> 
> 时间：2012-12-04T22:16:26.693
> 
> 标签：c++, directx-11

我刚刚开始使用 Dx11。D3DX11CreateEffectFromMemory 正在返回 E_NOINTERFACE。

我知道 E_NOINTERFACE 对 COM 的含义，但我不知道如何解决这个问题。着色器编译器声称已成功编译着色器代码。

我正在将 .fxo（编译着色器）文件加载到缓冲区中。单步执行代码，调试器在指示的行上失败，并出现 0x8004002 错误：

![在此处输入图像描述](../Images/32b5ac76374da72213ac6bfa0f58bb4e.png)

抱歉，调试器指示的行是屏幕截图中的第 20 行。

感谢您的任何见解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:16:04.623

我之前遇到过同样的错误，但是功能不同，如果你使用的是Windows 7，我猜这个功能是不支持的，有些接口只适用于Windows 8，但MSDN没有详细描述。从 DirectX/XNA 论坛看一下[这个问题。](http://xboxforums.create.msdn.com/forums/t/108732.aspx)

# android - 有没有什么好方法可以在应用启动后自动打开网页？

> ID：13712935
> 
> 赞同：0
> 
> 时间：2012-12-04T22:16:35.530
> 
> 标签：android, web

我想问题是描述。简单，简单......我怎样才能以简单易行的方式做到这一点？我以前用普通的 Java 做过这个，但是 android 是如此相似但又如此不同似乎有不同的方式来做这件事。

-谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:18:23.927

你可以在你的`OnCreate()`方法中这样做：

```
Intent openLink = new Intent(Intent.ACTION_VIEW, Uri.parse("yourLink"));
startActivity(openLink); 
```

或者，如果您不想在 Web 浏览器中打开它，您可以像这样在 WebView 中加载它：

```
WebView myWebView  = (WebView) findViewById(R.id.yourWebView);
myWebView.loadUrl("yourLink");
myWebView.setWebViewClient(new MyWebViewClient()); 
```

但不要忘记创建一个 WebViewClient：

```
public class MyWebViewClient extends WebViewClient {

     @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
} 
```

# php - PHP 中的 AJAX 帖子返回 html 注释；使 json 返回无用

> ID：13712940
> 
> 赞同：1
> 
> 时间：2012-12-04T22:16:59.413
> 
> 标签：php, jquery, ajax

我有一个 index.html 页面，它向 PHP 页面发出 AJAX 请求；预期回报是 JSON。该代码似乎运行良好。但是由于某种随机原因，我的 PHP 文件有时会`<!-- end of php tag-->`在 json 文本之前返回。

中断程序的返回如下所示：

`<!-- end of php tag-->{"success":true,"message":"Informacion registrada. Porfavor verifica su telefono."}`

那个html评论破坏了整个事情。返回该注释时，index.html 文件无法正确处理该文件。我不知道为什么该评论会被退回或来自哪里。它不在我的任何代码中......当我对其进行故障排除时，它似乎消失了。但是后来我提交了不同的值，它又回来了……非常奇怪的行为……

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:27:17.513

我希望你在某个地方有这样的东西：

```
<?php

    stuff
?>
<!-- end of php tag --> 
```

`<?php`和标签之外的所有内容都`?>`将输出到浏览器。

找到它并删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T17:41:31.333

我自己也遇到了这个......似乎很奇怪 html 注释会破坏 JSON 响应，但确实如此。

我不得不将一堆我的 html 注释向下移动 2 行，以便在 php 标记内解决问题。

# javascript - 在 DOM 加载之前运行代码

> ID：13712941
> 
> 赞同：0
> 
> 时间：2012-12-04T22:17:13.767
> 
> 标签：javascript, dom

我有一个带有时间列的 HTML 表，我想更改其值。但是，当我在 document.ready() 中执行此操作时，DOM 操作会严重影响我的加载时间。

是否可以在 DOM 加载之前更改表格列单元格的值？我需要用于操作的代码是 -

```
var time_col = rows[i].cells[TimeColumnIndex];    

//Calculate new values
var time_Str = getUpdatedValue(time_col.innerText);

//Set values
time_col.innerText = time_Str;
time_col.innerHTML = time_Str; 
```

我将不胜感激人们提出的任何建议，我仍在尝试了解与 DOM 相关的内容，所以如果无法做到，请随时告诉我。

### 编辑1：

getUpdatedValue() 函数只是获取用户时区与 UTC 相比的差异，并添加所需的分钟数。

我尝试注释掉每一行以查看哪些行实际上增加了加载时间，我发现这只是 DOM 操作需要时间，即以下几行

```
time_col.innerText = time_Str;
time_col.innerHTML = time_Str; 
```

我的 HTML 表有大约 1500 行，所以我遍历每一行并更改时间列的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:19:02.407

如果由于某种原因，您需要在加载表格后立即运行代码，您可以将`<script>`标签紧跟在结束`</table>`标签之后

```
<table>
   <tbody>
     <tr><td>A</td><td>B</td></tr>
   </tbody>
</table>
<script type="text/javascript"> 
    var tables = document.getElementsByTagName("table");
    var tableAbove = tables[tables.length - 1];
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:59:00.990

在 DOM 加载之前，您不能运行在 DOM 上运行的代码。希望您很清楚为什么会出现这种情况，因为 javascript 尚无法访问未加载的 DOM 元素。

您可用的选项如下：

1.  在您要修改的 DOM 部分之后立即在您的页面中找到您的脚本。由于事物是按纯顺序加载的，因此您可以操作 HTML 文件中位于脚本之前的 DOM 的任何部分。

2.  用于`document.ready()`您的代码，只需在加载整个 DOM 后对表进行操作。

3.  最初使用 CSS 隐藏表格，使其最初不可见。使用上述两种方法中的任何一种进行修改，然后在完成修改后显示表格。这可以防止表格在您修改之前可见。

如果 ajax 调用涉及获取表的数据，您可以通过在加载 DOM 之前启动该 ajax 调用来进一步优化事情，并在它完成时存储它的结果（如果 DOM 尚未准备好）。这将两个操作并行化，以便在加载 DOM 的同时获取 ajax 调用。然后，当 ajax 调用完成并加载 DOM 时，您可以将 ajax 结果插入 DOM。

# iphone - Objective C 中的前向类和协议

> ID：13712943
> 
> 赞同：3
> 
> 时间：2012-12-04T22:17:46.760
> 
> 标签：iphone, objective-c, ios, protocols, forward-declaration

我有两个类，它们都有要实现的协议。

我可以将一个类的协议实现到另一个类中，反之亦然吗？

这会导致任何运行时错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:24:56.280

你的问题是循环依赖。前向声明也无济于事，因为您只会让编译器警告您它看不到协议的定义。有两种选择：

### 选项1

将协议拆分为它们自己的头文件：

类A.h：

```
#import <Foundation/Foundation.h>
#import "ClassBProtocol.h"

@interface ClassA : NSObject <ClassBProtocol>
@end 
```

B类.h：

```
#import <Foundation/Foundation.h>
#import "ClassAProtocol.h"

@interface ClassB : NSObject <ClassAProtocol>
@end 
```

ClassAProtocol.h：

```
#import <Foundation/Foundation.h>

@protocol ClassAProtocol <NSObject>
...
@end 
```

ClassBProtocol.h：

```
#import <Foundation/Foundation.h>

@protocol ClassBProtocol <NSObject>
...
@end 
```

### 选项 2

如果您不关心在外部声明您实现了协议，那么您可以使用类延续类别：

类A.h：

```
#import <Foundation/Foundation.h>

@interface ClassA : NSObject
@end 
```

A.m 类：

```
#import "ClassA.h"
#import "ClassB.h"

@implementation ClassA () <ClassBProtocol>
@end

@implementation ClassA
@end 
```

B类.h：

```
#import <Foundation/Foundation.h>

@interface ClassB : NSObject
@end 
```

B类.m：

```
#import "ClassB.h"
#import "ClassA.h"

@implementation ClassB () <ClassAProtocol>
@end

@implementation ClassB
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:43:13.317

但是，我不认为这真的有必要。一旦你实现了一个委托，那么你可以向另一个类发送一条消息，因为它是同一个委托对象。我想一个简单的委托关系为；

**A级**

```
@protocol ClassAProtocol;
@interface ClassA:NSObject
@property(nonatomic, assign) id<ClassAProtocol> delegate;
@end
@protocol ClassAProtocol <NSObject>
-(void)classA:(ClassA*)classa didSomething:(id)object;
@end

@implementation ClassA
-(void)classAFinishedSomething{
    [self.delegate classA:self didSomething:nil];
    [(ClassB*)self.delegate doSomething];
}

@end 
```

**B类**

```
@interface ClassB : NSObject<ClassAProtocol>
-(void)doSomething;
@end
@implementation ClassB
-(void)doSomething{

} 
-(void)classA:(ClassA*)classa didSomething:(id)object{

}
@end 
```

我想这不会在两个对象之间创建循环引用并保持代码干净。如果委托始终是 B 类并且它响应到选择器，则此逻辑是有效的，它作为消息发送到 B 类。但是，如果您想隔离类之间的日志，则 matt 发布的上述示例是严格模式通过标准机制进行通信。

# java - 如何使用一个数组链接到另一个数组？

> ID：13712947
> 
> 赞同：-2
> 
> 时间：2012-12-04T22:18:21.873
> 
> 标签：java, arrays

大家好，基本上我是 Java 新手，从 10 月开始，我在做 ComScience。我需要以下帮助，将不胜感激。

注意：我还没有真正制定代码，可以这么说，我想让程序在结构化/注释等之前先运行。UULIB 是大学图书馆的名称。

目标：找出低于平均分的学生的姓名。

这是我在下面用来尝试找到它的代码，但它跳过了第一个 [0] 数组编号并只给了我一个名字。

```
import uulib.*;

public class Q3
{
    public static void main(String[] args)
    {
        int class_number = Console.getInt("Enter how many students between 1-10");

        while (class_number < 1 || class_number > 10)
            class_number = Console.getInt("Enter how many students between 1-10");

        System.out.println("");

        String[] name = new String[class_number];
        int[] score = new int[name.length];

        for (int i=0; i<class_number; i=i+1)
        {
            name[i] = Console.getString("Enter Name");
            score[i] = Console.getInt("Enter score");

            if ( score[i] < average(score))
                System.out.print(name[i] + " ");
        }

        System.out.println(" ");
        System.out.println("Average mark = " + Num.format(average(score), 1 ));
        System.out.println("Lowset mark = " +lowset(score) );
        System.out.println("Highest mark = " +highestValue(score) );
        System.out.println("Name of students with highest mark =  " );
    }

    public static double average(int[] nums)
    {
        double total = 0;

        for (int i=0; i<nums.length; i=i+1)
        {
            total = total + nums[i];
        }
        return total / nums.length;
    }

    public static int lowset(int[] nums)
    {
        int minimum = nums[0]; //sets the first to be the smallest

        for (int i = 0; i < nums.length; i++) //goes through your array
        {
             if (nums[i] < minimum) //checks and replaces if necessary
             {
                 minimum = nums[i];   
             }
        }
        return minimum;
    }

    private static int highestValue(int[] numbers) 
    {
        int highest = numbers[0];
        for (int i = 0; i < numbers.length; i++) 
        {
            if (numbers[i] > highest) 
            {
                highest = numbers[i];
            }
        }
        return highest;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:35:24.510

您应该将您的 for 循环分成两个 for 循环，因为在收集所有分数之前您无法计算平均值：

```
for (int i=0; i<class_number; i=i+1) {
    name[i] = Console.getString("Enter Name");
    score[i] = Console.getInt("Enter score");
}
for (int i=0; i < class_number; i++) {
    if (score[i] < average(score))
        System.out.print(name[i] + " ");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:30:56.910

看起来你的程序需要做 3 件主要的事情。

1.  收集输入数据（从控制台）
2.  计算平均值（以及您需要计算的任何其他内容）。您的代码有最高和最低，但您的问题文本并未表明该信息是必需的。
3.  输出结果。

这是一个小代码，可帮助改进代码的组织。

```
public static void main(String[] args) {
    collectInputData();
    calculate();
    outputResults();
} 
```

**如果您只记得答案中的一件事，请记住这一点。不要等到您的代码“工作”或“良好”才能改进结构或评论！**您可以通过改进结构和注释来使您的代码变得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:30:19.690

在您的第一次迭代 ( `i == 0`) 中，`score[i] < average(score)`将评估为 false，因为实际上`score[i] == average(score)`，这就是您没有打印名字的原因。

但是，您的整个逻辑是有缺陷的。您应该首先循环并要求用户输入数据，然后计算平均数，最后再次循环数据以确定哪个学生的成绩低于计算的平均值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:31:01.547

您正在检查第一次，这显然不会少于相同的情况。您应该在数组填充完所有成绩后运行 if 语句检查，并执行相同的循环检查哪些成绩低于平均水平。

# ios - “用于开发”在 Xcode 内部做了什么？

> ID：13712951
> 
> 赞同：1
> 
> 时间：2012-12-04T22:18:30.027
> 
> 标签：ios, iphone-privateapi

您可以在 XCode 管理器中将设备标记为用于开发。

它在 iOS 设备内部实际上做了什么？它是否设置了某种标志？它会安装什么东西吗？

设备上是否有 API（包括私有）来检查它是否正在开发？

设备上是否有 API（包括私有）将设备标记为开发？

我想我在这里找到了一小部分信息：[Xcode Organizer 中的“用于开发”按钮对 iOS 设备有什么作用？](https://stackoverflow.com/questions/7154322/what-does-the-use-for-development-button-in-xcode-organizer-to-an-ios-device) 然而，它只涵盖了一个问题，iOS 设备实际发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:29:42.530

用于开发将复制 UDID，将其上传到您的 iTunes Connect 帐户，更新配置文件并允许您刷新开发配置文件以与您的设备一起使用。当您进行构建或临时安装时，这些配置文件将安装在设备上。

与手动执行所有步骤相比，它非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:22:12.930

关于检查设备是否正在开发。显然，这个标志是由锁定管理的。

正如我从这个链接中了解到的，有一种方法可以连接到锁定以获取一些值：http: [//iphonedevwiki.net/index.php/Liblockdown.dylib](http://iphonedevwiki.net/index.php/Liblockdown.dylib)

# vmware - Jython 2.5.3 和 time.sleep

> ID：13712955
> 
> 赞同：2
> 
> 时间：2012-12-04T22:18:43.563
> 
> 标签：vmware, jython, jdk1.6, rhel5

我正在开发一个小型的内部替代 Tripwire，所以我编写了一个小脚本来散列 JBoss EAP 服务器中的文件，并将路径和散列存储在 MySQL 数据库中。

脚本每天都会将文件系统中的哈希值与数据库中保存的哈希值进行比较，因此任何更改都会被记录并最终使用 JasperServer 进行报告。

该脚本在晚上使用 cron 运行，以避免大量脚本在执行有趣的事情之前同时使用 time.sleep(RANDOM_NUMBER_OF_SECONDS) 来查询数据库，但有时 time.sleep 似乎永远处于休眠状态并且脚本结束时没有任何错误，我检查邮件 cron 发送并且没有记录错误。任何帮助，将不胜感激。我正在使用 jython-standalone-2.5.3、IBM 的 JDK 和在 VMWare 中运行的 RHEL 5.6。

我刚刚发现[http://bugs.jython.org/issue1974](http://bugs.jython.org/issue1974)并且代码注释似乎指出操作系统信号可能导致这种行为，但不确定这是否是我的情况。

如果您想在[http://code.google.com/p/pysnapshot/上查看代码结帐](http://code.google.com/p/pysnapshot/)

路易斯·加西亚·布斯托斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:19:19.507

我不知道您为什么认为`time.sleep()`可以减少查询数据库的脚本数量。

IMO ot 最好用于`cron`定期调用该程序。启动后，它应该检查`/tmp/`目录中是否是“信号量”文件，例如`/tmp/snapshot_working.txt`. 如果没有信号量文件，则创建它并写入类似：“快照开始：2012-12-05 22:00:00”。在您的程序完成检查后，它应该删除此文件。如果在启动时程序会找到信号量文件，那么它可以停止或检查保存在此文件中的日期和时间是否看起来“旧”。如果它是“旧的”，则将其删除并开始正常写入日志中发现“旧”文件（管理员可以找到如此长时间的工作快照并终止它）。

在你的情况下做的唯一原因`time.sleep()`是如果你想在正常工作时间使用这样的脚本而不会对你的数据库进行拒绝服务攻击。示例：在进行 100 次 DB 查询后，您可以少睡一会儿，并让 DB 有时间为其他用户查询提供服务。但我认为程序越早完成越好。

# windows-8 - Windows 应用商店应用的图表 (XAML C#)

> ID：13712956
> 
> 赞同：4
> 
> 时间：2012-12-04T22:18:44.623
> 
> 标签：windows-8, charts

我正在寻找有关 Windows 8 XAML/C# 中图表选项的参考或示例。我还将考虑任何第三方选项。

我需要提供一个图表解决方案，包括条形图、饼图和折线图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:32:25.197

您可以查看免费[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)中提供的图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:43:49.787

试试telerik

[http://www.telerik.com/products/windows-8/controls.aspx](http://www.telerik.com/products/windows-8/controls.aspx)

如果这看起来很昂贵，您可以根据下面的博客文章自己构建一些东西：

[http://blogs.msdn.com/b/metroapps/archive/2012/07/24/building-pie-chart-for-windows-8-metro.aspx](http://blogs.msdn.com/b/metroapps/archive/2012/07/24/building-pie-chart-for-windows-8-metro.aspx)

阿伦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:52:29.077

我参与了将 Visiblox 移植到 WinRT 的工作。我们目前发布了一个测试版，并将在接下来的几周内发布完整版。

[http://www.visiblox.com/visibloxcharts-for-winrt](http://www.visiblox.com/visibloxcharts-for-winrt)

# javascript - 保存对话框 javascript firefox

> ID：13712957
> 
> 赞同：2
> 
> 时间：2012-12-04T22:18:52.517
> 
> 标签：javascript, firefox, google-chrome, dialog, save

以下代码在 ul li 中找到所有链接并获取它们的 href 图像路径并添加事件，因此当用户单击链接时，它会打开保存对话框。这仅适用于 Internet Explorer。我怎样才能为其他浏览器做到这一点。注意：我想要这个功能而不使用任何服务器，例如 php、jsp、asp 等。

```
$(document).ready(function () {
    $anchors = $("ul li a").each(function (i) {
        if($(this).attr('href').indexOf("jpg") > -1 || $(this).attr('href').indexOf("jpeg") > -1 || $(this).attr('href').indexOf("gif") > -1 || $(this).attr('href').indexOf("png") > -1){
            image_path = $(this).attr('href');
            if($.browser.msie){
                $(this).attr('href',"javascript:void(0);");
                $(this).click(function() { 
                    win = window.open(image_path,'win');
                    window.setTimeout('check();',1000);
                    return false; 
                });
            }
            else
            {
                // code for other browsers
            }
        }
    });
});

var win = null;
var image_path = null;
function check() {
    if (win.document.readyState=='complete'){
        win.document.execCommand("SaveAs");
        win.close();
    } else {
        window.setTimeout('check();',1000);
    }
} 
```

# ios - ASIHTTPRequest 即使在终止应用程序后仍继续下载

> ID：13712963
> 
> 赞同：0
> 
> 时间：2012-12-04T22:19:14.663
> 
> 标签：ios

你如何暂停和恢复下载？

如何取消下载？

我正在使用 downloadRequest.allowResumeForFileDownloads = YES; 即使在我终止应用程序后，这也会使应用程序恢复下载。

如果我使用它，正常取消和正常暂停和恢复工作。但唯一的问题是上面提到的。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:48:14.803

`[request cancel];`应该做的伎俩。

# python - 使用 if 语句列出理解（或单行）

> ID：13712966
> 
> 赞同：-3
> 
> 时间：2012-12-04T22:19:40.743
> 
> 标签：python, if-statement, list-comprehension

在 python 中，对于可迭代对象，可以构造许多单行迭代命令。

对于某些这样的迭代，需要使用 if 语句。

有时 if 语句和 for 语句的顺序很重要。假设我想找到 0 到 10 之间奇数的总和：

```
>>> sum(i if not i%2==0 for i in range(10))
SyntaxError: invalid syntax
>>> sum(i for i in range(10) if not i%2==0)
25 
```

那些单行语句本质上不是很容易理解，但是我真的不明白为什么 if 语句必须出现**在**for 语句之后。使用前者不是更符合常识`i if not i%2==0 for i in range(10)`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:22:26.013

在生成器表达式（或列表推导式）中，应该像嵌套它们一样列出语句。

您的`sum()`表达式可以嵌套为：

```
for i in range(10):
    if not i%2 == 0:
        # do something with i 
```

您无法更改该顺序，以下内容没有意义，因为`i`未定义：

```
if not i%2 == 0:
    for i in range(10):
        # do something with i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:29:08.520

在您的第一个示例中，您有一个以 if 表达式作为列表理解值的无条件循环。正确的语法是：

```
(a if b else c for i in iterable)
 \___________/
    |
   actual expression 
```

`a if b else c`等效于`a`if`b`计算结果为 true，`c`否则。

在您的第二个示例中，您有一个条件列表理解。您基本上是在跳过可迭代的值；或更准确地说，您正在指定采用哪些：

```
(a for i in iterable if <condition>) 
```

在求和的情况下，您可以使用第一种语法重写列表推导，因为零是加法的空元素（因此求和）：

```
sum(i if i % 2 != 0 else 0 for i in range(10)) 
```

# javascript - 从动态创建的行中检索 id

> ID：13712970
> 
> 赞同：1
> 
> 时间：2012-12-04T22:19:44.287
> 
> 标签：javascript, jquery, html, ajax

我有一个页面显示来自我的数据库的信息。我需要用户能够单击“详细信息”链接以查看与记录有关的更多信息，或者单击输入框（“检查”列），然后提交，这将更新记录的状态。为此，我需要从“id”列中获取 id。

这是页面的样子：

![请求页面](../Images/0df9ce5300f6480d3386a3ee6beace38.png)

这是创建它的代码：

```
 $.ajax({
type: "POST",
url: "lib/req.reqinfo.php",
async: false,
data: {},
success: function(response){
// alert(response);
    var responseArray = response.split(',');    
    for(var x=0;x<responseArray.length;x++){
        id = responseArray[x]; x++;
        dateadded = responseArray[x]; x++;
        needby = responseArray[x]; x++;
        addedby = responseArray[x]; x++;
        unit = responseArray[x]; x++;
        appr = responseArray[x];

        $("#dbinfo").append('<br /><div class="row"><div id="idrow'+x+'" class="onecol bg">'+id+'</div><div class="twocol bg">'+dateadded+'</div><div class="twocol bg">'+needby+'</div><div class="twocol bg">'+addedby+'</div><div class="twocol bg">'+unit+'</div><div class="onecol bg">'+appr+'</div><div class="onecol bg"><label id="detaillink" class="link"><a href="#">details</a></label></div><div class="onecol bg last">'+check+'</div></div>');
    } 
```

我似乎找不到指向该特定 div 以提取所需信息的解决方案

html:

```
 <div class="container">
   <br />
<div id="dbinfo" class="row center">
<div class="onecol bg">ID</div>
<div class="twocol bg">Date Added</div>
<div class="twocol bg">Need By</div>
<div class="twocol bg">Added By</div>
<div class="twocol bg">Unit #</div>
<div class="onecol bg">Appr.</div>
<div class="onecol bg">Details</div>
<div class="onecol bg last">check</div>
<div class="onecol"> &nbsp </div>
</div>

   <br />
<div class="row">
    <label class="link"><a href="home.php">Home</a></label>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:30:43.793

因为您是自己生成“行”，所以您可以直接添加 id 内联。例如：

```
<div class="onecol bg"><label id="detaillink" class="link"><a href="#" data-id="'+x+'>details</a></label></div> 
```

或者：

```
<div class="onecol bg" data-id="'+x+'>Details</div> 
```

顺便说一句，我个人的选择是在表格中显示此类表格数据，并将点击行为附加到行（tr）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:25:08.107

你可以试试这个方法。。

将课程详细信息添加到此

```
<div class="onecol bg details">Details</div>

// Assuming the details cell has a class called details.
$('.details').on('click', function(){
    var $row = $(this).closest('div.row');

    var id = $row.find('div:eq(0)').attr('id');
    // This is the id you are looking for
}); 
```

* * *

```
.attr('id');  If that div has a id..

.html();     If you are looking for the text inside it 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:34:22.730

在 html 中：

*   链接不需要标签。
*   链接需要一些类来更容易选择以进行进一步的事件处理

链接的事件处理程序：

```
$('link class').on('click', function(e) {
   e.preventDefault();
   $(this).parents('div').siblings('div:eq(0)').text();
}); 
```

# javascript - 当页面上存在 Angular ng-include 时，HashChange 事件停止触发

> ID：13712975
> 
> 赞同：1
> 
> 时间：2012-12-04T22:19:54.407
> 
> 标签：javascript, angularjs, hashchange

我有以下 HTML+Angular 应用程序外壳，可以完成我需要做的所有事情：

1.  如果页面加载时 URL 哈希为空，则将其初始化为`#/`.
2.  每当 URL 哈希更改时，`view`变量就会更新。

这很完美：

```
<!DOCTYPE html>
<html ng-app>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.js"></script>
    <script>
      function Router($scope) {
        if (location.hash === "") location.hash = "#/";
        $scope.view = createView(location);
        window.addEventListener("hashchange", function (event) {
          $scope.view = createView(event.newURL);
          $scope.$apply();
        });
      }
      function createView(url) {
        var parser = document.createElement("a");
        parser.href = url.toString();
        var hash = parser.hash;
        return (hash.replace("#/", "/views/") + "/index.html").replace("//", "/");
      }
    </script>
  </head>
  <body ng-controller="Router">
    Navigation:
    <a href="#/one/">one</a>
    <a href="#/two/">two</a>
    Partial: {{view}}
    <!--<div ng-include="view"></div>-->
  </body>
</html> 
```

然后唯一的问题是，一旦我取消注释`div[ng-include]`，一切都会停止工作。具体来说，`hashchange`事件停止触发。我做错了什么还是这是一个错误？任何解决方法？

# android - Android ActivityGroup 后退按钮

> ID：13712979
> 
> 赞同：0
> 
> 时间：2012-12-04T22:20:18.870
> 
> 标签：android, back, activitygroup

我有一个小问题。我浏览了整个互联网，但找不到解决问题的方法。我遇到的问题是：

我有一个有 3 个选项卡的 TabHost。第一个选项卡打开 Activity A。在 Activity A 中，我可以在列表视图中按下，它将更改`setContent()`为 Activity B。当我在 Activity B 中按下后退按钮时，将`onBackPressed()`调用 Activity A 的函数。

如何关闭 Activity B 并返回 Activity A `onBackPressed()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:12:22.937

我就是这样做的

```
private void onBackPressed(){
    RootActivity parentActivity;
    parentActivity = (RootActivity) this.getParent();
    parentActivity.switchToSecondActivity();
} // here RootActivity is the tabhost 
```

在 RootActivity

```
public void switchToSecondActivity(){
    tabHost.setCurrentTab(SECOND); 
} //SECOND is an integer pointing location of the second activity. it starts from 0 
```

# javascript - Javascript通过id获取元素

> ID：13712984
> 
> 赞同：3
> 
> 时间：2012-12-04T22:20:50.993
> 
> 标签：javascript

我的 HTML 包含以下代码：

```
<div id="msg"></div> 
```

在它的身体里。

在头部，我有：

```
var msg = document.getElementByID("msg"); 
```

但是当我在一个函数中调用时：

```
msg.innerHTML = "test"; 
```

它返回一个错误，声明`msg`为空。我应该怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T22:21:16.870

首先，你必须考虑到 JavaScript 是区分大小写的语言，所以你应该使用`getElementById`（注意最后一个字母的大小写）。接下来，如果您通过 id 获取元素，则应将 ID 作为参数（而不是标签名称）传递：

```
var msg = document.getElementById("msg"); 
```

**您可以在MDN**中阅读有关此方法的更多信息：

*   [https://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

此外，一个重要的注意事项是在标记完全加载时使用此代码，即当您的`msg`元素对 JavaScript *“可见”时。*为了实现这一点，一种选择是将您的`<script>`标签（带有相应的 JavaScript 代码）放在 HTML 的末尾，就在`</body>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:23:04.873

> 在头部，我有：
> 
> ```
> var msg = document.getElementByID("div"); 
> ```

三个问题：

1.  如果该代码在 中`head`，但元素在 中定义`body`，则在运行代码时该元素还不存在。

2.  元素`id`是`"msg"`，不是`div`。`div`是它的标签名称，并且不是唯一的。

3.  是`getElementById`，不是`getElementByID`。

如果您将包含代码的脚本元素移动到`</body>`页面上的结束标记之前，并使用`document.getElementById("msg")`，您应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:22:51.317

因为您在页面加载元素之前调用它。您需要等待[文档准备好](https://developer.mozilla.org/en-US/docs/DOM/document.readyState)或[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)才能引用该元素。

# inheritance - JAXB 解组问题

> ID：13712986
> 
> 赞同：2
> 
> 时间：2012-12-04T22:20:57.400
> 
> 标签：inheritance, jaxb

我在使用 jaxb2-maven-plugin(1.5) 解组 XML 时遇到问题。基本上我在我的 XML 文档中有一个类型 B 的元素 A，它是一个基本域类 Class A。类型 B 是一个扩展 A 的域类。现在，我可以看到带有 xsi 的元素 A 的 XML :type="B"。但是当我解组它时，它仍然返回一个 A 类型的 Java 对象。我该如何解决这个问题？我需要能够获得 B 类型的对象。只要 XML 具有符号 xsi:type，它应该能够解组它，正确。还是我还需要 XMLAdapters 等？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:35:47.833

有几件事需要检查：

*   你`JAXBContext`知道`B`类吗？您可以包含在用于创建`JAXBContext`或添加类`@XmlSeeAlso({B.class})`的`A`类中。
*   类型的名称是否与类`B`对应`B`？默认情况下它将是`b`. 您可以使用`@XmlType`注释来指定名称。

**一个**

```
package forum13712986;

import javax.xml.bind.annotation.XmlSeeAlso;

@XmlSeeAlso({B.class})
public class A {

} 
```

**乙**

```
package forum13712986;

import javax.xml.bind.annotation.XmlType;

@XmlType(name="B") // Default name is "b"
public class B extends A {

} 
```

**演示**

```
package forum13712986;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(A.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        String xml = "<A xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:type='B'/>";
        StreamSource source = new StreamSource(new StringReader(xml));
        JAXBElement<A> jaxbElement = unmarshaller.unmarshal(source, A.class);

        System.out.println(jaxbElement.getValue().getClass());
    }

} 
```

**输出**

```
class forum13712986.B 
```

# php - 分页和子目录

> ID：13712990
> 
> 赞同：0
> 
> 时间：2012-12-04T22:21:37.387
> 
> 标签：php, .htaccess, mod-rewrite, pagination, subdirectory

我很难用分页来完善子目录的重写规则。

我有一个名为 /files 的目录，它位于我网站的根目录中。前任：`www.site.com/files`

/files 中的 index.php 脚本显示所有可能文件的列表，如果 URL 是简单的`www.site.com/files`

这是通过以下 .htaccess 脚本实现的：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([a-z0-9]+)$ index.php?fileid=$1 [NC]
</IfModule> 
```

该`/files`目录包括一个名为`/users`

如果 URL 中包含用户 ID，该`/users/index.php`脚本将显示特定于用户的文件列表，例如`www.site.com/files/user/101`

这是使用如下所示的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([a-z0-9]+)$ index.php?userid=$1 [NC]
</IfModule> 
```

我想将分页添加到这两个 index.php 脚本提供的文件列表中。

例如，如果我每页显示 25 个结果：

`www.site.com/files/1`将显示所有文件的第一页，从一到二十五。 `www.site.com/files/2`将显示所有文件的第二页，从二十六到五十。

然后特定于用户的列表将是：

`www.site.com/files/user/101/1`将显示属于用户 101 的所有文件的第一页，从 1 到 25。

`www.site.com/files/user/101/2`将显示属于用户 101 的所有文件的第二页，从 26 到 50。

奖金：

www.site.com/files/1 和 www.site.com/files/1/ 应该返回相同的页面。www.site.com/files/user/101/1 和 www.site.com/files/user/101/1/ 应该返回相同的页面。

我应该使用单个 .htaccess 文件而不是目录中的一个文件`/files`和目录中的一个文件来处理此问题`/user`吗？

有人可以帮我修改重写规则来处理分页吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:11:00.603

RewriteRule ^([a-z0-9]+)/?$ index.php?pages=$1 [NC]

你可以[在这里测试](http://martinmelin.se/rewrite-rule-tester/)

# entity - VHDL实体未在具有未分配“U”输入的模拟器中执行

> ID：13712993
> 
> 赞同：2
> 
> 时间：2012-12-04T22:21:50.430
> 
> 标签：entity, vhdl

我在几个地方遇到过这个问题，我最好的猜测是为什么我没有从设计实体（在本例中为 4:1 多路复用器）获得任何输出，因为其中一个输入未分配（U）。

所以假设这个 Mux 嵌入在许多其他结构中，所以我不能将输入强制为我想要的任何东西，有时它们中的一些将没有任何驱动它们。

说：输入0 =“111111111111111”

但是：输入3 =“UUUUUUUUUUUUUUUU”

我想要的只是输出input0（c0 = c1 = 0），所以input3在逻辑上应该无关紧要

我仍然得到

输出=“UUUUUUUUUUUUUUU”（默认值）

此外，编译或运行中没有错误。

这是代码：

```
USE ieee.std_logic_1164.all;
USE ieee.std_logic_arith.all;

ENTITY Mux4to1 IS
  GENERIC (size : POSITIVE := 16);   -- Size of the input
  PORT (input0, input1, input2, input3 : IN std_logic_vector (size-1 DOWNTO 0);
    output: OUT std_logic_vector (size-1 DOWNTO 0); 
    control0, control1 : IN std_logic ); 
END ENTITY Mux4to1;

--
ARCHITECTURE Behavior OF Mux4to1 IS
BEGIN
   PROCESS ( input0, input1, input2, input3, control0, control1 )
    BEGIN
        IF (control0 = '0') THEN
          IF (control1 = '0') THEN     -- Enable 00
            output <= input0;
          ELSIF(control1 = '1')THEN       -- Enable 10
            output <= input2;
          END IF;
        ELSIF (control0 = '1') THEN
          IF (control1 = '0') THEN     -- Enable 01
            output <= input1;
          ELSIF(control1 = '1')THEN      -- Enable 11
            output <= input3;
          END IF;
        END IF;
  END PROCESS; 
END ARCHITECTURE Behavior; 
```

我能做些什么来解决这个烂摊子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:40:36.700

您不会为和`output`的每一个选项都开车。如果它们中的任何一个不是 0 或 1（它们也可能在模拟开始时），那么您最终不会开车。`control0``control1``U``output`

有多种解决方案...

一是不那么明确：

```
 IF (control0 = '0') THEN
          IF (control1 = '0') THEN     -- Enable 00
            output <= input0;
          ELSE                         -- Enable 10
            output <= input2;
          END IF;
        ELSE
          -- etc 
```

或者，如果您真的想做一些不同的事情（例如报告警告），请`else`在每个`elsif`子句之后添加一个以捕获这些选项和一个`report`.

# rally - 使用 FormattedID 生成 Rally 对象的 URL？

> ID：13712995
> 
> 赞同：16
> 
> 时间：2012-12-04T22:21:56.000
> 
> 标签：rally

我想编写包含 Rally 问题（测试用例、缺陷等）链接的网页。我希望能够生成带有 FormattedID 的 URL。这可能吗？还是我真的需要objectID？例如：

[http://rally1.rallydev.com/363953481d/detail/testcase/TC1665](http://rally1.rallydev.com/363953481d/detail/testcase/TC1665)

（或类似的东西，而不是神秘的对象ID）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T22:44:02.503

以下允许用户直接进入工作产品的详细信息页面，而无需知道对象 ID：

[https://rally1.rallydev.com/#/search?keywords=US1234](https://rally1.rallydev.com/#/search?keywords=US1234)

这依赖于 Rally 搜索功能的一个特性，并且不受官方支持 - 因此上述 URL 不能保证永远有效。然而，使用格式化 ID 作为解决方法是一种不错的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-17T08:51:32.210

仅按关键字搜索将为您提供具有该 ID 的项目和相关项目（例如，在其名称中提及所需 ID 的其他项目）。有时这很好，有时则不然。

仅搜索 DE75700 和 DE72760，不搜索其他使用

```
https://rally1.rallydev.com/#/search?keywords=FormattedID%3ADE75700%20FormattedID%3ADE72760 
```

这相当于手动输入

```
FormattedID:DE75700 FormattedID:DE72760 
```

在 Rally 搜索框中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-10T18:17:52.060

作为[主要答案](https://stackoverflow.com/a/13713310/3195477)的必然结果，我定义了一个**Chrome 浏览器书签**，它将通过其 ID 将我带到任何 Rally 项目。

[![在此处输入图像描述](../Images/1ec8bee488dc6f1a50ca1aea3a9f8455.png)](https://i.stack.imgur.com/cTxvw.png)

此书签的完整 URL 是：

```
javascript:(function(){window.location = "https://rally1.rallydev.com/#/search?keywords=" + prompt("Enter ID:");})(); 
```

当这个书签被激活时，它会这样提示你：

[![在此处输入图像描述](../Images/17e0abadefd1aa1cdc18152a5edf2bf9.png)](https://i.stack.imgur.com/MC3Vm.png)

我发现这可以节省大量时间。

感谢[Displaying a prompt from javascript Chrome 书签](https://stackoverflow.com/q/17920552/3195477)。

# ios - UICollectionView 宽度突然翻倍

> ID：13712996
> 
> 赞同：1
> 
> 时间：2012-12-04T22:22:03.143
> 
> 标签：ios, ios6, storyboard, uicollectionview

所以由于某些原因，我添加到另一个视图的集合视图的宽度加倍到 1536 .... 使一半的项目不可见/可见。布局左侧有 10 像素，右侧有 10 像素。然后每个单元格之间有 20 像素。它们每个都是 364 像素。（因此每行 2 个）。我有大约 10 个项目要展示。在以下代码中，所有日志都打印正确的宽度（768px）：

```
if(!_productionLinesCollectionViewController)
{
    _productionLinesCollectionViewController = [[self storyboard]instantiateViewControllerWithIdentifier:@"ProductionLinesCollection"];
    _productionLinesCollectionViewController.productionLines = [_plant.productionLines allObjects];
}

NSLog(@" before adding it %f", _productionLinesCollectionViewController.collectionView.frame.size.width);
[[self scrollView] addSubview:_productionLinesCollectionViewController.view];
NSLog(@" after added it %f", _productionLinesCollectionViewController.collectionView.frame.size.width); 
```

在函数**- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath**我执行以下操作：

```
 NSLog(@" cell for item at path %f", self.collectionView.frame.size.width); 
```

现在宽度是（出于某种原因）1536。有什么想法吗？（我正在使用情节提要）。

# php - 将 PHP MySQL 结果对象传递给函数

> ID：13712998
> 
> 赞同：0
> 
> 时间：2012-12-04T22:22:26.677
> 
> 标签：php, mysql, function, object

我正在尝试获取 MySQL 结果行并将其传递给函数进行处理，但该行没有通过。我假设这是因为实际行作为对象返回并且对象不能传递给函数？

例如

```
function ProcessResult($TestID,$Row){
    global $ResultArray;
    $ResultArray["Sub" . $TestID] = $Row["Foo"] - $Row["Bar"];
    $ResultArray["Add" . $TestID] = $Row["Foo"] + $Row["Bar"];
}

$SQL = "SELECT TestID,Foo,Bar FROM TestResults WHERE TestDate !='0000-00-00 00:00:00'";
$Result= mysql_query($SQL$con);

    if(!$Result){
        // SQL Failed
        echo "Couldn't find how many tests to get";
    }else{

        $nRows = mysql_num_rows($Result);

        for ($i=0;$i<$nRows;$i++)
        {
            $Row = mysql_fetch_assoc($Result);

            $TestID = $Row[TestID];

            ProcessResult($TestID,$Row);
        }

    } 
```

我需要的是 $ResultArray 填充了来自 MySQL 查询的大量数据。这不是我的实际应用程序（我知道对于显示的内容没有必要这样做），但是将结果传递给函数的原理是相同的。

这实际上可以做一些吗？

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:36:13.213

`mysql_query($SQL$con);`应该是`mysql_query($SQL,$con);`第一个是语法错误。不确定这是否会影响您的程序，或者是否只是此处的拼写错误。

我建议在您的数组键周围加上引号。`$row[TestID]`应该`$row["TestID"]`

其余的看起来应该可以工作，尽管这里有一些奇怪的想法。

您也可以这样做以使您的代码更简洁。

```
if(!$Result){
    // SQL Failed
    echo "Couldn't find how many tests to get";
}else{

    while($Row = mysql_fetch_assoc($Result))
    {
        $TestID = $Row['TestID'];

        ProcessResult($TestID,$Row);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:39:01.073

`mysql_fetch_assoc()`返回一个关联数组 -[查看更多](http://php.net/manual/en/function.mysql-fetch-assoc.php)

如果您需要一个对象，请尝试`mysql_fetch_object()`功能 -[查看更多](http://www.php.net/manual/en/function.mysql-fetch-object.php)

数组和对象都可以传递给函数。因此，您的代码似乎是正确的，除了一行。它应该是：

```
$Result= mysql_query($SQL, $con); 
```

要不就：

```
$Result= mysql_query($SQL); 
```