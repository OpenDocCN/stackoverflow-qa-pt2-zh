# StackOverflow 问答 12818000-12818999

# spring - 例外 - org.springframework.remoting.jaxrpc.JaxRpcPortProxyFactoryBean

> ID：12818004
> 
> 赞同：0
> 
> 时间：2012-10-10T11:14:35.060
> 
> 标签：spring, rest, jax-rpc

我在网址上看到了这个：`localhost:8080/Remo`

> HTTP 错误 503

访问 /Remo 时出现问题。原因：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.schastny.contactmanager.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
Caused by:

org.eclipse.jetty.servlet.ServletHolder$1: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.schastny.contactmanager.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at org.eclipse.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:464)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:510)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:776)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1213)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:514)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.co

...

org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    ... 59 more
Caused by: java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getDeclaredConstructors(Class.java:1853)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:227)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:930)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:903)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:666)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:507)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
    at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:829)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 61 more
Caused by: java.lang.ClassNotFoundException: javax.xml.rpc.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    ... 76 more
Caused by:

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.schastny.contactmanager.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:492)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:776)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1213)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:514)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.schastny.contactmanager.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)

...

y.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 61 more
Caused by: java.lang.ClassNotFoundException: javax.xml.rpc.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    ... 76 more
Caused by:

org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.schastny.contactmanager.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:492)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:776)

...

a:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getDeclaredConstructors(Class.java:1853)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:227)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:930)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:903)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBea

...

s.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 61 more
Caused by: java.lang.ClassNotFoundException: javax.xml.rpc.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    ... 76 more
Caused by:

java.lang.NoClassDefFoundError: javax/xml/rpc/ServiceException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getDeclaredConstructors(Class.java:1853)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:227)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:930)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:903)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:666)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:507)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
    at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:829)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)

...

cationContext(FrameworkServlet.java:442)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:492)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:776)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1213)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:514)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: javax.xml.rpc.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
    at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
    ... 76 more
Caused by:

java.lang.ClassNotFoundException: javax.xml.rpc.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)

...

    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:55:33.600

我正在使用 Spring Roo 并且不再有这个 xml 地狱）

# iphone - 确定用户在 iPhone 中的当前位置及其最近的位置

> ID：12818005
> 
> 赞同：0
> 
> 时间：2012-10-10T11:14:34.890
> 
> 标签：iphone, map, geolocation

我目前正在为 iPhone 开发一个移动应用程序，其中包含需要确定用户当前位置以及最近位置（如存储在手机中的纬度、经度点）的部分。我有以下问题：

1- 用户是否需要连接到互联网，以便我们的应用程序可以确定他/她的位置？GPS 的设计是否不足以确定用户当前位置的纬度、经度？

2- 由于我们将在应用程序中存储一些经纬度的位置，是否可以在没有互联网连接的情况下确定距用户当前位置最近的位置（例如 5 公里内）？

如果可以提供代码示例来缩小上述答案的范围，我们将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:28:53.710

好吧，对于你的第一个问题，你不需要互联网连接来获取你当前的位置。

对于您的第二个问题，如果您能够获得您所说的位置（纬度，经度） `we will be having some locations as lat,long stored in the application`的坐标，那么您可以计算坐标并找到它们之间的距离。

使用以下函数计算距坐标的距离

```
 public static float distFrom(float lat1, float lng1, float lat2, float lng2) {
    double earthRadius = 6371;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
               Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
               Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    return(float)(dist);
    } 
```

它是haversine公式的java实现。用它来寻找距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:40:08.630

是的，您必须使用 google API 找到 5 英里以下的最近位置信息，使用此 API，您将找到所有信息 ..country info ，最近的位置..ect

使用此链接：- [http://maps.google.com/maps/geo?q=%f,%f&output=json&oe=utf8&sensor=true_or_false&key=ABQIAAAAO_WEDXjKUGDDHu8iB2FQ-xTFGipc9T1i1tjtezgvz0dWKwv3jxTjn5y1VrjIixtSrXmeMwiaCfxS8g](http://maps.google.com/maps/geo?q=%f,%f&output=json&oe=utf8&sensor=true_or_false&key=ABQIAAAAO_WEDXjKUGDDHu8iB2FQ-xTFGipc9T1i1tjtezgvz0dWKwv3jxTjn5y1VrjIixtSrXmeMwiaCfxS8g)

# xml - VB6 通过 HTTP 发布 XML (UTF-8)

> ID：12818006
> 
> 赞同：2
> 
> 时间：2012-10-10T11:14:38.133
> 
> 标签：xml, vb6, xmlhttprequest

我已经编写了 Visual Basic 6 代码。它运行良好，但现在我在 UTF-8 中发布带有 cyrilic 的 xml，其他站点看到不同的字符。我想是因为我将 xml 读取并发布为字符串。有没有机会以 utf-8 格式发送它们？

```
xmlContent()=fs.GetFileContent(Replace(Me.txtOutputFileName.Text, fs.GetFileNameByPath(Me.txtOutputFileName.Text), "") & xmlFileNames(i))
xmlString = MFunctions.GetString(xmlContent())

o.Open "POST", server, False, EE_XML_EXCHANGE_ID, EE_XML_EXCHANGE_PWD

o.setRequestHeader "Content-Type", "text/xml" ' "text/xml;charset=utf-8"

o.setRequestHeader "SOAPAction", ""
o.send xmlString

Me.txtResponseHeaders = o.getAllResponseHeaders
Me.txtResponse = o.responseText 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:59:50.223

您似乎发布了一个明确的标签`charset=utf-8`。这也是服务器向报告看到不同字符的其他站点提供数据的方式吗？

# c# - 是否可以使用 Adob e SDK 将 Word Doc 转换为 PDF 而无需在服务器机器上安装 MS Office？

> ID：12818007
> 
> 赞同：2
> 
> 时间：2012-10-10T11:14:40.417
> 
> 标签：c#, asp.net

关于如何使用 Adob​​e SDK 将 word doc 转换为 PDF 而不在服务器机器上安装 MS Office 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:20:29.357

不可以，您不能使用 Adob​​e SDK 将 Word 文档转换为 PDF。

如果您想在服务器机器上不安装 MS Office 的情况下将 Word 文档转换为 PDF，请尝试使用CodePlex 上的[DocX](http://docx.codeplex.com/)项目。

> [DocX](http://docx.codeplex.com/)是一个 .NET 库，允许开发人员以简单直观的方式操作 Word 2007/2010 文件。DocX 速度快、重量轻，最重要的是它不需要安装 Microsoft Word 或 Office。

[教程：将 .docx 转换为（.doc、.pdf、.html）](http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html)

[如何：使用 C# 中的 Open Office 将办公文档转换为 PDF](http://tinyway.wordpress.com/2011/03/30/how-to-convert-office-documents-to-pdf-using-open-office-in-c/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T01:08:59.503

DocX 不能单独工作，当您尝试在同一个项目页面（[http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html](http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html)）中创建 PDF 时，它们建议使用互操作。您最好的“免费”机会是使用 Openoffice SDK。

# blackberry - 带有 kxml 的节点的深层副本（java me）

> ID：12818009
> 
> 赞同：4
> 
> 时间：2012-10-10T11:14:49.050
> 
> 标签：blackberry, java-me, deep-copy, cloning

我在开发黑莓时遇到了问题。我正在使用 KXML2 api 进行 XML 解析（实际上，我得到了其他人的代码来继续和修复，所以我必须使用它）。问题是 java me 中缺乏克隆，并且在尝试深度复制节点时遇到了一些困难。（我不想详细说明，但重点是，我需要将数据替换为 html 的特定点，并且有一个 xml 描述器）所以..！:)

```
XMLElement childNode = node.getElement(ci); 
```

这是我需要复制的元素。XMLElement 是一个简单的包装类，没关系，它包含 Element 属性和一些有用的方法。

现在我想要的有点像这样：

```
XMLElement newChildNode = childNode.clone(); 
```

由于 Java ME 中没有克隆，没有可克隆接口，所以我不能这样做，这只会创建对原始元素的引用，我需要在修改新元素时保留它：

```
XMLElement newChildNode = childNode; 
```

谁能想出一个有用的想法，如何创建我的 childNode 元素的深层副本？非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:54:18.083

我设法用这个简单的实用功能解决了这个问题。它只是遍历属性，复制它们并在需要时递归调用函数。

```
public static Element createClone(Element toClone) {

            String namespace = (toClone.getNamespace() == null) ? "" : toClone.getNamespace();
            String name = (toClone.getName() == null) ? "" : toClone.getName();

            Element result = toClone.createElement(namespace, name);

            int childCount = toClone.getChildCount();
            int attributeCount = toClone.getAttributeCount();

            for (int i = 0; i < attributeCount; i++) {

                result.setAttribute(toClone.getAttributeNamespace(i), toClone.getAttributeName(i), toClone.getAttributeValue(i));
            }                       

            for (int j = 0; j < childCount; j ++) {

                    Object childObject = toClone.getChild(j);
                    int type = toClone.getType(j);

                    if (type == Node.ELEMENT) {

                            Element child = (Element) childObject;
                            result.addChild(Node.ELEMENT, createClone(child));

                    } else if (type == Node.TEXT) {

                        String childText = new String((String) childObject);

                        if (!childText.equals("")) {
                            result.addChild(Node.TEXT, childObject);
                        }

                    } 
                }

            return result;
        } 
```

# android - Android地图路径在点上绘制交叉线

> ID：12818013
> 
> 赞同：0
> 
> 时间：2012-10-10T11:15:13.297
> 
> 标签：android, android-mapview, android-maps

我有这个代码用于在地图点之间画线

```
@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {

    if (!shadow) {
        Projection projection = mapview.getProjection();

        for(int i=0; i< puntos.size()-1; i++) {

            Point origen = new Point();
            Point destino = new Point();

            projection.toPixels(puntos.get(i).getPoint(), origen);
            projection.toPixels(puntos.get(i+1).getPoint(), destino);

            Paint paint = new Paint();

            paint.setStyle(Style.STROKE);
            paint.setStrokeWidth(5);
            paint.setColor(Color.GREEN);
            paint.setAntiAlias(true);

            canvas.drawLine(origen.x, origen.y, destino.x, destino.y, paint);
            mapview.invalidate();
        }
    }
super.draw(canvas, mapview, shadow);
} 
```

但是，当我将地图中的点放置得太近或线与另一条线相交时，地图视图会在附近点绘制多条线。所以如果我有点 1、2、3、4。点 1 有一条到点 2、3、4 的画线

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:28:23.473

试试下面的代码。它还会用一些颜色填充形状。您可以省略该功能。

```
 Paint mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setStyle(Style.FILL_AND_STROKE);
        mPaint.setColor(Color.RED);
        mPaint.setAlpha(9);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        Path path = new Path();

        Projection projection = mapView.getProjection();

        for(int j = 0; j < geoArrayist.size(); j++) 
        {
            Iterator<GeoPoint> it = geoArrayist.iterator();
            while(it.hasNext()) 
            {
                GeoPoint arrayListGeoPoint = it.next();

                Point currentScreenPoint = new Point();
                projection.toPixels(arrayListGeoPoint, currentScreenPoint);

                if(j == 0)
                    path.moveTo(currentScreenPoint.x, currentScreenPoint.y); 
                else
                    path.lineTo(currentScreenPoint.x, currentScreenPoint.y);
            }                 
        }
        canvas.drawPath(path, mPaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:42:30.623

更改您的代码：

```
@Override 
public void draw(Canvas canvas, MapView mapview, boolean shadow) { 

if (!shadow) { 
    if(puntos.size() == 0) return;

    //initialization
    Point origen = new Point(); 
    Point destino = new Point(); 

    Paint paint = new Paint(); 

    paint.setStyle(Style.STROKE); 
    paint.setStrokeWidth(5); 
    paint.setColor(Color.GREEN); 
    paint.setAntiAlias(true); 

    //end of initialization

    Projection projection = mapview.getProjection(); 
    projection.toPixels(puntos.get(0).getPoint(), origen); 

    for(int i=1; i< puntos.size(); i++) { 
        projection.toPixels(puntos.get(i).getPoint(), destino); 
        canvas.drawLine(origen.x, origen.y, destino.x, destino.y, paint); 
    } 
} 
super.draw(canvas, mapview, shadow); 
} 
```

理想情况下，您应该将上面初始化块中的代码移动到覆盖构造函数并制作对象和`origen`全局变量。这样做，它将提高内存利用率，在覆盖的生命周期内只创建每个对象中的 1 个。`destino``paint`

祝你好运。

# php - 字符集 PHP 转换不完全工作

ID：12818028

赞同：0

时间：2012-10-10T11:16:08.993

标签：php, utf-8, character-encoding

# sed - 如何在linux中替换逗号后的IP地址

> ID：12818029
> 
> 赞同：1
> 
> 时间：2012-10-10T11:16:08.780
> 
> 标签：sed, tr

我想将第二个逗号后的 IP 地址替换为 92.2.11.1：

```
pr,th-klmndisj,92.2.11.1
da,th-kl532disj,92.2.11.8
fr,th-klmn4532j,92.2.21.2
pr,th-klmn52sj,92.2.11.3

```

预期视图：

```
pr,th-klmndisj,92.2.11.1
da,th-kl532disj,92.2.11.1
fr,th-klmn4532j,92.2.11.1
pr,th-klmn52sj,92.2.11.1

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:18:26.113

您可能指的是*第二个*逗号。

```
sed 's/^\([^,]*,[^,]*,\).*/\192.2.11.1/' 
```

解释：搜索非逗号，一个逗号，更多非逗号，一个逗号。in 部分`\(...\)`被自身替换（`\1`），该行的其余部分被丢弃并打印新字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:21:34.630

```
sed 's/,[^,]*$/,92.2.11.1/g' file 
```

**测试**

```
kent$  echo "pr,th-klmndisj,92.2.11.1
dquote> da,th-kl532disj,92.2.11.8
dquote> fr,th-klmn4532j,92.2.21.2
dquote> pr,th-klmn52sj,92.2.11.3"|sed 's/,[^,]*$/,92.2.11.1/g'
pr,th-klmndisj,92.2.11.1
da,th-kl532disj,92.2.11.1
fr,th-klmn4532j,92.2.11.1
pr,th-klmn52sj,92.2.11.1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:26:11.720

```
awk -F, '$3="92.2.11.1"' OFS=, file 
```

# javascript - Response very slow in IE-8

> ID：12818030
> 
> 赞同：0
> 
> 时间：2012-10-10T11:16:23.760
> 
> 标签：javascript, html, doctype

I have a strange issue with IE-8 when my table contains around 1000 records. Issue is that I have a table with 1000 records containing some text boxes to get input from user. When I perform some input/tab operation on that table, the response is very slow I mean typed characters are displaying late.

I figured out that when we remove DOCTYPE from that page, response is fast. I am using apache tiles and don't know how to ignore DOCTYPE for specific page only.

There is no problem with javascript/code like when I remove the functions also response is slow.

# jquery - jQuery在另一个元素中添加一个元素，其中包含文本

> ID：12818032
> 
> 赞同：1
> 
> 时间：2012-10-10T11:16:25.293
> 
> 标签：jquery, text, append

我正在寻找在现有 div 中添加一些内容。

我正在使用以下行获取另一个 div 中包含的图像数量

```
var n = $("div#content img").length; 
```

我有那个元素，我正在尝试将内容插入

```
<div id="imgCount"></div> 
```

我知道我可以`n`通过这样做将我的 var的值插入其中

```
$("#imgCount").text(n); 
```

我也知道我可以通过执行以下操作将 HTML 插入其中

```
$('#imgCount').append('<a href="#">sometext</a>'); 
```

但我想将它们结合起来得到以下结果：

```
<div id="imgCount"> <a href="#"> n </a> </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:18:24.727

```
$('#imgCount').append('<a href="#">'+n+'</a>'); 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:18:09.630

好的，这是一个非常非常基本的。您应该尽快开始使用 Javascript 基础知识

```
$('#imgCount').append('<a href="#">' + n + '</a>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:18:57.953

你尝试过这样的事情吗？

```
$('#imgCount').append('<a href="#">' + n + '</a>'); 
```

# java - 奇怪的java字符串比较操作

> ID：12818033
> 
> 赞同：0
> 
> 时间：2012-10-10T11:16:26.173
> 
> 标签：java, string, compare

我面临一个奇怪的 java 字符串比较问题。

```
{

String a,b;
a = "http://www.abc.com/audiofiles/1349866054121.caf";
b = "http://www.abc.com/audiofiles/";

boolean flag = a.contains(b); // This should be true...

} 
```

但不幸的是它返回错误。我尝试过 toLowerCase() 和 trim() 但没有帮助..

任何人都知道这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:47:10.073

对两个字符串执行 a`toCharArray()`并逐个查看字符。这将回答你的问题。将它们输出为整数，以便更容易分辨它们的不同之处。

# c++ - 通过 MSADO 获取在 Access 中工作的查询

> ID：12818040
> 
> 赞同：2
> 
> 时间：2012-10-10T11:16:44.157
> 
> 标签：c++, ms-access

我试图让以下最后两个查询工作，但我只能让第一个工作。

```
 querystream << "select Date, C"<<m_ID<<" from Data" <<nTable <<";";

 querystream << "select Date, C"<<m_ID<<" from Data" <<nTable <<" where Date >= #DateAdd (\"yyyy\", -1, Now())#  ORDER by DATE ASC;";
 querystream << "select Date, C"<<m_ID<<" from Data" <<nTable <<" where Date >= #DateAdd (\"yyyy\", -1, #10/09/2012 09:12#)#  ORDER by DATE ASC;"; 
```

如果你们有任何想法，我将非常感激，谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:26:31.350

`DateAdd()`返回一个日期/时间值，数据库引擎可以按原样使用它的返回值......所以你不需要包含`#`分隔符。

`Date`是保留字。如果您将其用作表中字段的名称，请将其括在方括号中以避免混淆数据库引擎。

```
" where [Date] >= DateAdd(\"yyyy\", -1, #10/09/2012 09:12#) ORDER by [DATE] ASC;" 
```

db 引擎将接受带有间隔参数 (yyyy) 的单引号而不是双引号`DateAdd()`。我不知道这是否会使 c++ 中的任何内容复杂化，但我会这样尝试：

```
" where [Date] >= DateAdd('yyyy', -1, #10/09/2012 09:12#) ORDER by [DATE] ASC;" 
```

如果您有可用的 Access，我认为您最好使用 Access 查询设计器创建和测试您的查询，然后在 c++ 中使用经过验证的 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:31:03.853

这将起作用：

```
querystream << "select Date, C"<<m_ID<<" from Data" <<nTable <<" where Date >= DateAdd (\"yyyy\", -1, Now())  ORDER by DATE ASC;";
querystream << "select Date, C"<<m_ID<<" from Data" <<nTable <<" where Date >= DateAdd (\"yyyy\", -1, #10/09/2012 09:12#)  ORDER by DATE ASC;"; 
```

（基本上，在 DateAdd 函数之前和之后去掉#）

此外，最好对第二个查询使用#YYYY-MM-DD HH:MM# 格式（它将是#2012-09-10 09:12# 或#2012-10-09 09:12#在您的示例中，取决于您的本地化设置

# c# - 具有智能感知功能的内置 C#/VB.Net 编辑器 - Roslyn、VSTA 还是其他？

> ID：12818041
> 
> 赞同：8
> 
> 时间：2012-10-10T11:16:47.043
> 
> 标签：c#, vb.net, roslyn, vsta

我需要在我的应用程序中提供脚本功能，允许客户使用我们的对象模型扩展其功能。我希望提供某种带有智能感知的集成 C#/VB.Net 编辑器，但是在查看了 AvalonEdit 和 ScintillaNet 等产品之后，它们似乎并没有提供真正的代码完成功能，只是一个 API，您可以在其中提供自己的列表出现在弹出自动完成列表中的项目。

因此，我想知道 Roslyn 是否提供了任何此类功能？从我遇到的教程和示例来看，Roslyn 似乎实际上只是一个编译器服务。

作为最后的手段，客户可以使用 VS Express 之类的东西，但集成编辑器显然更好一些。

（我还遇到了 Visual Studio Tools for Applications，这听起来很有希望；但是在线资源已有几年的历史，而且文档/教程不存在，所以我对此一无所知）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T03:45:39.563

我当然不是这方面的专家。但是由于您还没有收到任何其他回复，所以我会试一试。

我认为简短的回答是“是”。

查看 AvalonEdit 和 SharpDevelop 中的代码，代码完成似乎是最困难的部分之一。本质上，您必须编写一个编译器（或解析器，无论如何）来确定完成列表中应该包含哪些项目。Roslyn 似乎提供了构建完成列表的工具。在旧版本中，这些工具与 VS 编辑器绑定，但我看到声明说它们在最新版本中是独立的。如果是这样，这些工具在实现代码完成方面将非常有用。

我根本没有真正研究过细节，但我打算这样做，因为我和你有一些相同的目标，而且 Roslyn 看起来会有所帮助（根据我目前所知道的，这不是很多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:23:49.363

您提出了一个非常有趣的说法，“在查看了 AvalonEdit、SharpDevelop 和 ScintillaNet 等产品之后，它们似乎并没有提供真正的代码完成智能感知”。SharpDevelop 是一个完整的 IDE，为什么找不到“真正的”代码完成 Intellisense？您必须提供一些证据，否则该声明无效。

您想要实现的目标只能通过两个重要的组件来实现，

*   一个语言解析器，您可以使用它获取代码完成的上下文和元素。这就是 Roslyn 提供的，但 Roslyn 还不够成熟，无法解析所有现有的 C# 语法。SharpDevelop（以及 MonoDevelop）使用[NRefactory](http://www.codeproject.com/Articles/408663/Using-NRefactory-for-analyzing-Csharp-code)，它服务于相同的目标。

*   支持语法高亮的 UI 元素。这可以通过 AvalonEdit 或基于您选择的 UI 框架的 ScintillaNet 来实现。

正如@Mystere Man 指出的那样，Visual Studio Shell 可能会为您提供一些帮助。但就个人而言，我对此了解不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:03:25.773

我非常努力地尝试使用其中一个内置组件，但最终自己实现了一个。经过一天的 RichTextBox api 探索后，您可以轻松地构建此支持。只需使用 PreviewKeyDown/Up，确保使用撤消支持等进行一批工作。

# java - 使用配置文件运行 Maven 测试

> ID：12818042
> 
> 赞同：3
> 
> 时间：2012-10-10T11:16:50.147
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

在 Eclipse 中，我有一个依赖于 mvn 项目 BCD 的 MVN 项目 A

项目 B 包含一个`mysettings.xml`我有这样的属性： `<iduser>${my.iduser}</iduser>`

我有一个名为“部署”的 Maven 配置文件，它设置了 iduser 属性。到“管理员”。当我启动一个指定“部署”配置文件的 maven clean 包时，在 mysettings.xml 中我发现`<iduser>ADMIN</iduser>`

然后我创建了一个名为“mytest”的新配置文件，将该属性设置为“TESTUSER”。

如果我调用`mvn -Dtest=MyClassTest -P mytest`项目 C，似乎 maven 不会`${my.iduser}`在项目 B`mysettings.xml`文件中替换。

有谁知道如何在测试阶段运行它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:57:09.403

Maven 不会做你希望的事情。该`mysettings.xml`文件将使用您在构建项目 B 时指定的任何配置文件放入项目 B 的 jar 文件中，并且`${my.iduser}`占位符将消失（过滤掉）。它不会来自项目 B 的源目录。

我从来没有找到一个令人满意的方法来用 Maven 做到这一点。如果`mysettings.xml`是 Spring 配置文件，则可以在运行时使用[PropertySourcesPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.1.0.RELEASE/api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html "PropertySourcesPlaceholderConfigurer")，而不是在构建时使用 Maven 过滤。

# ef-code-first - ef 两个关系

> ID：12818043
> 
> 赞同：4
> 
> 时间：2012-10-10T11:16:52.620
> 
> 标签：ef-code-first, associations, entity-framework-5

我有以下 Entity Framework 5 代码第一类

```
public class Airplane
{
    public int Id { get; set; }

    public int LeftWingId { get; set; }
    public virtual Wing LeftWing { get; set; }

    public int RightWingId { get; set; }
    public virtual Wing RightWing { get; set; }
}

public class Wing
{
    public int Id { get; set; }
} 
```

飞机有一个左翼和一个右翼（两者都是必需的）。机翼可能属于 0..1 飞机（作为左翼或右翼）或其他一些“飞行装置”。删除飞机应该级联删除它的机翼。

如何在代码优先的 fluent API 中进行配置？

是否有可能在 EF 中有两个 0..1 --- 1 关联，并且两者都有级联删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:48:39.523

不幸的是，您不能将两个关联从同一个源表指向同一个目标表，同时对两者进行级联删除。

但是，这不是由于 EF 中的限制，而是由于 SQL Server 中的限制。

引用您可能要检查[的另一个问题的答案：](https://stackoverflow.com/a/852047/408643 "外键约束可能导致循环或多个级联路径？")

> SQL Server 对级联路径进行简单计数，而不是尝试确定是否确实存在任何循环，它假设最坏的情况并拒绝创建引用操作 (CASCADE)：您可以并且仍然应该在没有引用操作的情况下创建约束。如果你不能改变你的设计（或者这样做会影响事情），那么你应该考虑使用触发器作为最后的手段。

# objective-c - How to move cursor position forward for a particular length?

> ID：12818045
> 
> 赞同：0
> 
> 时间：2012-10-10T11:16:59.237
> 
> 标签：objective-c, ios, cocoa-touch

I have a `UITextField`, how can I change the cursor position dynamically based of some condition to a particular length?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:28:10.847

使用`textview.selectedRange`.

```
NSRange selection = [textview.text rangeOfString:@"SomeText" options:NSCaseInsensitiveSearch];
if( selection.location != NSNotFound ){
    textview.selectedRange =  selection;
    textview.selectedRange = NSMakeRange(selection.location, 0);
} 
```

它可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:24:40.917

使用此链接可能会帮助您解决问题。希望有用！！:)

[设置新文本时更改 UITextField 中的光标](https://stackoverflow.com/questions/7196032/change-cursor-in-uitextfield-when-set-new-text)

以及在 UITextField 中查找光标位置

```
// Get the selected text range
    UITextRange *selectedRange = [self selectedTextRange];

    // Calculate the existing position, relative to the end of the field (will be a - number)
    int pos = [self offsetFromPosition:self.endOfDocument toPosition:selectedRange.start];

    // Change the text
    self.text = lastValidated; 

    // Work out the position based by offsetting the end of the field to the same
    // offset we had before editing
    UITextPosition *newPos = [self positionFromPosition:self.endOfDocument offset:pos];

    // Reselect the range, to move the cursor to that position
    self.selectedTextRange = [self textRangeFromPosition:newPos toPosition:newPos]; 
```

快乐的编码......

# tridion - 在 Tridion 中更新链接解析时出错

> ID：12818047
> 
> 赞同：2
> 
> 时间：2012-10-10T11:17:10.747
> 
> 标签：tridion, tridion-2011

我最近将 Tridion 从 2009 升级到 2011 SP1 并致力于解决链接问题。我已经更新了代码如下

```
 public Tridion.ContentDelivery.Web.Linking.ComponentLink ComponentLink
       {
        get
        {
            if (this._componentLink == null)
            {
                this._componentLink = new Tridion.ContentDelivery.Web.Linking.ComponentLink(261);
            }
            return this._componentLink;
        }
      } 
```

但是当我浏览网站时，它给了我以下错误

Java.Lang.Throwable：com.tridion.linking.Linking.getLogger()Lcom/tridion/logging/Logger；

详细错误

[Throwable: com.tridion.linking.Linking.getLogger()Lcom/tridion/logging/Logger;] Codemesh.JuggerNET.NTypeValue.Throw(Int64 inst) +373 Codemesh.JuggerNET.JavaClass.ThrowTypedException(Int64 inst) +1365 Codemesh .JuggerNET.JavaMethod.CallObject(JavaProxy jpo, JavaMethodArguments args) +524 Com.Tridion.Linking.ComponentLink..ctor(Int32 publicationId) +127 Tridion.ContentDelivery.Web.Linking.ComponentLink..ctor(Int32 publicationId) +28 项目.Web.UI.TridionBasePage.get_ComponentLink() +88 ASP.en_includes_controls_rss_items_ascx.get_componentLink() 在 d:\Websites\Project\en\Includes\controls\rss-items.ascx:7 ASP.en_includes_controls_rss_items_ascx.Header_PreRender(Object sender, EventArgs e) 在 d:\Websites\Project\en\Includes\controls\rss-items.ascx:20 System.EventHandler.Invoke(Object sender, EventArgs e) +0 System.Web.UI。Control.OnPreRender(EventArgs e) +8996626 System.Web.UI.Control.PreRenderRecursiveInternal() +103 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 系统。 Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+2496

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:44:44.597

您是否安装了 64 位版本的 Tridion 2011 CD？我认为所有以前的 .jar 文件（例如 cd_link.jar 等）都没有从 lib 目录中删除。请您重新检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:42:36.167

当我在升级后看到这个错误时，通常是因为 now deprecated`cd_broker_conf.xml`仍然存在。您可以将其重命名为`deprecated_cd_broker_conf.xml`，重新启动服务并再次检查。

这种错误的其他常见原因是：

*   您的 Web 应用程序上没有正确的 jar[检查这里](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=linking&sid=lcSearch.runSearch1349868509324&eventType=lcContent.loadDocreference_DB20ECA59C824CC3BBB4644187D2C57A&query=&scope=&filename=ReferenceCDJARs.xml&docid=reference_DB20ECA59C824CC3BBB4644187D2C57A&inner_id=&tid=&addHistory=true&resource=)

# c++ - 具有可变数量参数的宏

> ID：12818049
> 
> 赞同：2
> 
> 时间：2012-10-10T11:17:21.497
> 
> 标签：c++, macros

我一直在开发使用日志记录机制的应用程序，并且我实现了一种 printf 函数，它接受各种数量的参数并打印以记录某些消息，我想要为这个函数添加一个函数名，但我不知道要写什么每个函数调用中的这个参数。

所以我决定写一个宏，结果并不那么容易

```
#define WriteToLogParams(szMessage, nLogLevel, param1, param2) WriteToLogParamsFunc(szMessage, __FUNCDNAME__, nLogLevel, param1, param2) 
```

首先，我认为有某种宏重载，我可以很容易地做到这一点，但事实证明，如果我编写另一个具有相同名称但参数数量不同的宏，它将无法编译。所以为了让它工作，我应该让每个宏名称都是唯一的。

那么有什么聪明的方法可以做到这一点吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:26:49.463

你可以使用`__VA_ARGS__`宏

例如：

```
WriteToLogParamsFunc(const char *__file, int __line, const char* __func, int nLogLevel, const char *szMessage, ...);

#define WriteToLogParams(nLogLevel, szMessage, ...) WriteToLogParamsFunc(__FILE__, __LINE__, __FUNCTION__, nLogLevel, szMessage, __VA_ARGS__ ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:26:35.877

我相信有一些预处理器支持[可变参数宏](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)，但我不确定它是否是标准的，并且肯定有编译器不支持它，因此它不可移植。

但是，与其尝试使用可变数量的参数，不如只使用一个参数。这就是我所做的： -

```
#define WriteToLogParams(args) WriteToLogParamsObject::Instance (__FUNCDNAME__) << args 
```

其中 WriteToLogParamsObject 是由静态成员创建`Instance`并具有重载流操作符的类。这为您提供了使用这些运算符所具有的优势，例如将流重载放入类中：-

```
class SomeClass
{
   static friend WriteToLogParamsObject &operator << (WriteToLogParamsObject &stream, const SomeClass &item_to_log)
   {
     stream << "member1 = " << item_to_log.m_member1 << ", member2 = " << item_to_log.m_member2;
     // and so on (syntax might be off)
     return stream;
   }
 }; 
```

并使用宏：-

```
WriteToLogParams ("some message " << some_value << " another bit of text " << another_value << " and so on"); 
```

# node.js - 如何在猫鼬中执行 findOne 查询

> ID：12818051
> 
> 赞同：2
> 
> 时间：2012-10-10T11:17:28.067
> 
> 标签：node.js, mongodb, mongoose

我有名为管理员的猫鼬模式

```
var administratorSchema = new mongoose.Schema({

username : String,            
password : String,
    active : Boolean,
    level : String
}); 
```

当我尝试这个查询时，我可以得到结果

```
mongoose.connect('mongodb://'+dbServer+'/'+dbName, function(connectionError) {
        var administratorModel = mongoose.model('administrators',administratorSchema);
        administratorModel.findOne({_id,111155dffxv}function(err, resad){
            console.log('into mongoose findone');
        });
});
====> Console output : 'into mongoose findone' 
```

问题是：当我尝试将条件从 _id 更改为“用户名”时，mongoose 不起作用并且 findOne 不会执行：

```
mongoose.connect('mongodb://'+dbServer+'/'+dbName, function(connectionError) {
        var administratorModel = mongoose.model('administrators',administratorSchema);
        administratorModel.findOne({'username','mohamed'}function(err, resad){
            console.log('into mongoose findone');
        });
});
====> Console output : '' 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T12:33:23.117

您的查询对象无效（使用冒号而不是逗号）并且您在`findOne`参数之间缺少逗号。您的通话应如下所示：

```
administratorModel.findOne({'username': 'mohamed'}, function(err, resad){
     console.log('into mongoose findone');
}); 
```

您还应该检查`err`回调的参数以查看是否正常。

不知道为什么它会使用您的标准版本到达回调，`_id`因为那个版本有相同的问题。

# java - Primefaces Schedule Component eventMove issue

> ID：12818052
> 
> 赞同：1
> 
> 时间：2012-10-10T11:17:32.657
> 
> 标签：java, jsf, primefaces

I am using primeface schedule component and having an issue onEventMove event. My event handler method is as the following:

```
 public void onEventMove(ScheduleEntryMoveEvent event) {

        /* I put the id of my object as data of schedule event 
         * while I constructed  event model.
         */

        String id = (String) event.getScheduleEvent().getData();

        /* And when the move event occure, find my object by 
         * using the data of the moved event.
         */

        MyObject myObject = myObjectManager.findMyObject(id);

        /* MyObject also have two attributes, startDate and endDate
         */

        Date startTime = myObject.getStartDate();
        Date endTime = myObject.getEndDate();

        /* I print out startDate and endDate of MyObject and
         * new start date and end date of moved event
         */        

        System.out.println(startTime);
        System.out.println(endTime);
        System.out.println(event.getScheduleEvent().getStartDate());
        System.out.println(event.getScheduleEvent().getEndDate());
    } 
```

My issue here is that the output are being same. I mean the output of the statement:

```
System.out.println(startTime); 
```

is same with the output of

```
System.out.println(event.getScheduleEvent().getStartDate()); 
```

and also the output of the statement

```
System.out.println(endTime); 
```

is being same with

```
System.out.println(event.getScheduleEvent().getEndDate()); 
```

Can anybody suggest me what I am doing wrong please?

**myObjectManager** is an instance of EJB stateless session bean and the souce code of **myObjectManager.findMyObject(id)** is as following:

```
public MyObject findMyObject(String id) {
    return myObjectEAO.find(id);
} 
```

**myObjectEAO** is also an instance of EJB stateless session bean and the source code of **myObjectEAO.find(id)** is as following:

```
public MyObject find(String id) {
    // em, here, is an instance of entity manager
    return em.find(MyObject.class, id);
} 
```

# android - Starting a browser but should not be shown in recents

> ID：12818053
> 
> 赞同：1
> 
> 时间：2012-10-10T11:17:32.887
> 
> 标签：android, android-intent

i am starting the browser with intent using

```
 Intent i = new Intent();
                i.setAction(Intent.ACTION_VIEW);
                i.setData(Uri.parse(url));
                i.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                startActivity(i); 
```

but when i see recent applications i see

> Internet

before my Application. I dont want Internet to be shown at all in recent when i launch it as sub-application of mine. Is there a flag to do so?? thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:26:00.623

根据您的意图使用 Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS

`i.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)`

# ocaml - Function that returns the median? (OCaml)

> ID：12818056
> 
> 赞同：1
> 
> 时间：2012-10-10T11:17:40.350
> 
> 标签：ocaml, median

In OCaml how would I write a median function that takes 5 arguments and returns the median. For example `med5 2 5 7 4 3` would return **4**.

I managed to write a med3 function (returns the median of 3 arguments) using if and else statements but this would be ridiculously complex if I attempted the same technique for 5 arguments :(

```
let med3 a b c =
  if ((b<=a && c>=a) || (c<=a && b>=a)) then a 
  else if ((a<=b && c>=b) || (c<=b && a>=b)) then b else c;; 
```

For the **med5** function, I would like to be able to use the min and max functions (built in to OCaml) to discard the highest and lowest values from the set of 5 arguments. Then I could use the med3 function that I have already written to return the median of the remaining 3 arguments, but how do I discard the minimum and maximum arguments!?!?!?!?

Any help would be much appreciated :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:08:19.460

如果您可以使用`Array`，那么只需将您的 5 个条目放入一个数组中，对其进行排序，然后返回`a[2]`。如果你的作业也禁止它，你可以使用穷人的冒泡排序来选择最大值，然后是最小值：

```
let med5 a b c d e =
  (* move the max towards 'e' *)
  let a,b = if a<=b then a,b else b,a in
  let b,c = if b<=c then b,c else c,b in
  ...
  (* then move the min towards 'd', don't forget to reverse the comparisons *)
  ...
  in med3 a b c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:36:31.460

您可以将这 5 个参数放入一个列表中，然后从列表中删除一个元素很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:28:11.957

如果禁止使用列表和数组，则可以使用三个变量来存储五个中最大的三个元素：

```
let med5 a b c d e =
    let first  = ref min_int in
    let second = ref min_int in
    let third  = ref min_int in

    if      a >= !first  then (third := !second; second := !first; first := a)
    else if a >= !second then (third := !second; second := a)
    else if a >= !third  then (third := a);

    if      b >= !first  then (third := !second; second := !first; first := b)
    else if b >= !second then (third := !second; second := b)
    else if b >= !third  then (third := b);

    (* you guess what to do for c, d, e ;-) *)

    (* return the third largest element: *)
    !third 
```

# google-apps-script - mails sent with Apps Script don't show up in "sent" folder

> ID：12818059
> 
> 赞同：1
> 
> 时间：2012-10-10T11:17:45.977
> 
> 标签：google-apps-script, gmail, mailmerge

While ago there was an issue with mail merge in gmail. We add to bcc ourselves in order to get a copy of what was sent in our "Sent" folder.

I know that someone was working on having the emails sent with Apps Script to show up in "sent" folder. Would you know how to implement this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:56:03.723

[更新] 这个问题现在已经解决了。

唯一可用的解决方法是自己密件抄送。有一个关于此的[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=674)。您应该为它加注星标以跟踪更新并为它投票。

# c# - How to convert enum to type

> ID：12818060
> 
> 赞同：0
> 
> 时间：2012-10-10T11:17:51.560
> 
> 标签：c#, string, types, enums

I have a enum like this.

```
public enum eTypeVar
{
    Int,
    Char,
    Float
}; 
```

and I want to convert it to type , to do something like this:

```
eTypeVar type=eTypeVar .Int;
string str= eTypeVar.ToString .ToLower();
(str as type) a=1; 
```

How would I do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:20:35.357

您可以使用[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559.aspx)例如：

```
YourEnumType realValue = Enum.Parse(typeof(YourEnumType), "int"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:29:34.800

你可以试试这个......例如你有这样的枚举

```
 public enum Emloyee
 {
   None = 0,
  Manager = 1,
  Admin = 2,
  Operator = 3
} 
```

然后将枚举转换为此

```
Emloyee role = Emloyee.Manager;
int roleInterger = (int)role; 
```

结束枚举到字符串..

```
Emloyee role = Emloyee.Manager;
string roleString = role.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:20:46.610

我认为你需要的是：

```
Dictionary<eTypeVar, Type> _Types = new Dictionary<eTypeVar, Type> {
    { eTypeVar.Int, typeof(Int32) },
    { eTypeVar.Char, typeof(Char) },
    { eTypeVar.Float, typeof(Single) }
};

public Boolean Check(eTypeVar type, Object value)
{
    return value.GetType() == _Types[type];
} 
```

~~您不能将一个变量转换为另一个变量声明的类型。你应该重新考虑你的设计。无论如何，你在做什么没有意义。如果您知道要使用 int，为什么不声明它：~~

 ~~```
String name = "int";
int value = 1; 
```~~ 

如果您出于某些原因想要动态代码，您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.100%29.aspx)和通用方法。

```
public void DoSomething<T>(T value)
{
    ....
} 
```

~~然后，您可以在运行时使用反射[构造该方法并](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)[调用](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.invoke.aspx)它。但此时我认为您需要更多的 C# 基础知识才能使用此功能。~~

# excel - 将excel中的数字和非数字数据混合读入Matlab

> ID：12818071
> 
> 赞同：0
> 
> 时间：2012-10-10T11:18:30.467
> 
> 标签：excel, matlab

我有一个矩阵，其中第一列包含日期，第一行包含字母/数字的到期日（例如 16 年）。

其余单元格包含每天的费率，它们是双精度数字。

现在我相信`xlsread()`只能处理数字数据，所以我认为我需要其他东西或功能组合？

我希望能够将 excel 中的表格作为一个数组或一个数组读入 MATLAB，`struct()`以便我可以将所有数据保存在一起。

另一个问题是某些比率以“#N/A”的形式给出。我希望保留存储这些值的单元格，但想将值更改为`blank=" "`. 做这个的最好方式是什么？它可以作为输入过程的一部分来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:53:32.533

好吧，通过查看[xlsread 的 matlab 参考资料，](http://www.mathworks.com/help/matlab/ref/xlsread.html#bthgbmn "xlsread() 的 matlab 参考")您可以使用以下格式

```
[num,txt,raw] = xlsread(FILENAME) 
```

然后您将在**num**中拥有一个数据矩阵，在**txt**中拥有不可读的数据，即您的文本标题，而在**raw**中，您将拥有所有未处理的数据。（包括文本标题）。

所以我想你可以使用**原始**数组，或者**num**和**txt**的组合。

对于您的其他问题，如果您的费率是从其他来源“拉取”的，您可以使用

```
=IFERROR(RATE DATA,"") 
```

然后会有一个空白而不是错误代码`#N\A`。

另一种解决方案（仅适用于 Windows）是使用`xlsread()`允许在导入的数据上运行函数的格式，

```
[num,txt,raw,custom] = xlsread(filename,sheet,xlRange,'',functionHandler) 
```

并让函数`NaN`用空白点替换值。（您将在**自定义**数组中获得输出）

# java - java.lang.String cannot be converted to JSONObject

> ID：12818073
> 
> 赞同：0
> 
> 时间：2012-10-10T11:18:35.827
> 
> 标签：java, android, json

In my android application,i calling one webservice and it is returning one jsonobject.In device i getting one response like this..

```
"{  \"Time_Stamp\" : \"10/10/2012 4:26 PM\",  \"records\" : [ {    \"'Name'\" : \"'LD-00000002'\",    \"'Appointment_Date_Time'\" : \"'null'\",    \"'Phone'\" : \"'9909955555'\",    \"'Home_Country_Address'\" : \"'null'\",    \"'Occupation'\" : \"'null'\",    \"'SR_Appointment_Status'\" : \"'Open'\",    \"'Id'\" : \"'a0OE0000001iLynMAE'\",    \"'SR_Appointment_Comment'\" : \"'testing'\",    \"'ProductsOfInterest'\" : \"'null'\",    \"'ActivityName'\" : \"'Sales'\",    \"documentsList\" : [ ]  }, {    \"'Name'\" : \"'LD-00000002'\",    \"'Appointment_Date_Time'\" : \"'null'\",    \"'Phone'\" : \"'9909955555'\",    \"'Home_Country_Address'\" : \"'null'\",    \"'Occupation'\" : \"'null'\",    \"'SR_Appointment_Status'\" : \"'Open'\",    \"'Id'\" : \"'a0OE0000001iLynMAE'\",    \"'SR_Appointment_Comment'\" : \"'testing'\",    \"'ProductsOfInterest'\" : \"'null'\",    \"'ActivityName'\" : \"'Sales'\",    \"documentsList\" : [ {      \"numberOfImages\" : 3,      \"Name\" : \"new document\",      \"Mandatory\" : false,      \"FilePath\" : null,      \"Category\" : null    } ]  } ]}" 
```

i trying convert it into an object like this

```
 JSONObject jsonObj=new JSONObject(objMngr.getResponse()); 
```

when converting it throwing one exception "java.lang.String cannot be converted to JSONObject"...below is the exact exception that it is throwig ..What is the reason and how can i solve this issue??

```
 {  "Time_Stamp" : "10/10/2012 4:26 PM",  "records" : [ {    "'Name'" : "'LD-00000002'",    "'Appointment_Date_Time'" : "'null'",    "'Phone'" : "'9909955555'",    "'Home_Country_Address'" : "'null'",    "'Occupation'" : "'null'",    "'SR_Appointment_Status'" : "'Open'",    "'Id'" : "'a0OE0000001iLynMAE'",    "'SR_Appointment_Comment'" : "'testing'",    "'ProductsOfInterest'" : "'null'",    "'ActivityName'" : "'Sales'",    "documentsList" : [ ]  }, {    "'Name'" : "'LD-00000002'",    "'Appointment_Date_Time'" : "'null'",    "'Phone'" : "'9909955555'",    "'Home_Country_Address'" : "'null'",    "'Occupation'" : "'null'",    "'SR_Appointment_Status'" : "'Open'",    "'Id'" : "'a0OE0000001iLynMAE'",    "'SR_Appointment_Comment'" : "'testing'",    "'ProductsOfInterest'" : "'null'",    "'ActivityName'" : "'Sales'",    "documentsList" : [ {      "numberOfImages" : 3,      "Name" : "new document",      "Mandatory" : false,      "FilePath" : null,      "Category" : null    } ]  } ]} of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:23:51.943

尝试

```
 JSONObject jsonObj=new JSONObject(objMngr.getResponse().toString().replace("\\", " ")); 
```

你的 jsonString 似乎没问题。但是，您的响应类型可能不是字符串。试试看。问题在于服务器发送的已经转义的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:41:54.480

I think, getResponse() is already string but response isn't valid JSON.If response isn't string,you can convert string with toString() method.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T05:14:11.737

好像您在服务器端两次将对象转储到 JSON 字符串。

object --dumps()--> json 字符串 --dumps()-> json 中的一个字符串

所以你应该删除第二次倾销。

否则，您可以通过这种方式对字符串[进行转义 如何在 Java 中对 Java 字符串文字进行转义？](https://stackoverflow.com/questions/3537706/howto-unescape-a-java-string-literal-in-java).

我认为第一种方法更好，更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:42:00.543

您的字符串上似乎有一些隐藏字符。尝试这个

```
return new JSONObject(json.substring(json.indexOf("{"), json.lastIndexOf("}") + 1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T11:35:42.540

首先将您的响应转换为**字符串**，然后尝试创建一个**JSONObject**

# c# - 使用 C#、SQL Server 设计数据访问层

> ID：12818077
> 
> 赞同：3
> 
> 时间：2012-10-10T11:18:54.193
> 
> 标签：c#, sql-server, dataset, data-access-layer, n-tier-architecture

好的，正如标题所示，我正在为我目前正在研究的调查框架设计一个数据访问层。

我们都熟悉分层架构的概念，我们尝试以一种方式实现层之间的分离，即表示层可以连接到任何业务层，就像业务层可以连接到任何数据访问层一样，无论其实现如何只要它保持相同的接口（相同的方法）。

现在，在使用 SQL Server 构建数据库之后，我正在使用 DataSet (*.xsd) 文件构建 DAL，并在该文件中为每个表适配器和数据库中的相应存储过程创建方法。

在 Visual Studio 中使用数据集可视化设计器工作了一段时间后，我注意到我的目标是提供一个非常灵活的 API，它以方法的形式为用户提供所有可能的查询。例如，我想为用户提供使用任何可能的过滤器或不使用过滤器对表执行检索操作的方法，我还希望用户能够使用她/他想要作为过滤器的任何列删除行，同时更新使用他想要的任何列作为过滤器的所有/单个字段。

我主要完成此任务的方法是为每个可能的查询创建一个方法，无论它是 DDL 还是 DML。现在，当我认为我可能在某个方法中犯了错误，或者我想检查这些方法以确保在快速打字时没有遗漏任何东西时，这似乎很痛苦，因为我最终得到了很多方法。

所以，我的问题是：是否有另一种方法来设计数据访问层，以便可以轻松地重构方法并创建它们？

我希望我没有详细说明，但我想把你放在图片中，这样我才能得到正确的答案，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:28:16.820

好吧，您可以使用 ORM 工具来提供良好的数据访问层。我的意思是因为使用 ORM 工具，您将支持大多数流行的数据库，如 SQL Server、Oracle、MySQL、PostgreSql 等。

根据您使用的 wichi ORM 工具，您不必编写 SQL 语句，这意味着您对查询错误不太敏感。

我建议您检查一个名为[NHibernate](http://nhforge.org/)的工具。使用此 ORM，您可以使用`Linq`另一个（更具体用于 NHibernate）[查询 QueryOver](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)来编写查询。您将有很多灵活性来编写动态查询。使用 ORM 工具，您可以实现[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)并创建方法和查询以获得有效的数据访问。

因此，当您使用这样的东西时，您将获得 Visual Studio 的好处，例如 Refecting，因为`Linq`, 和`QueryOver`是强类型的。但是你也会有 HQL，它就像 Sql Statment。

查看这篇文章：[为什么我不使用数据集](http://www.4guysfromrolla.com/articles/050405-1.aspx)

# jquery - 在 bbUI 中使用 jQuery 库

> ID：12818081
> 
> 赞同：0
> 
> 时间：2012-10-10T11:19:04.197
> 
> 标签：jquery, jquery-mobile, blackberry, blackberry-webworks

当我看到以下问题和答案时：

[带有 bbUI.js 的 jQuery 问题](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/how-where-to-use-jquery-with-webworks-and-bbui/m-p/1940309#M29908)

我想问一下。

是问题中的替换语法（使用普通 jQuery）：

```
$(document).ready(function () {
   $("#Div1").click(function () {
        alert("Hello world!");
   });
}); 
```

并替换为 bbUI 中的部分：

```
ondomready: function(element, id) {
    if (id == 'home') {
        $("#Div1").click(function () {
            alert("Hello world!");
        });
    }
} 
```

没有导致 index.htm 文件中的长语法？？？

因为我知道上面的语法在使用 bbUI lib 时位于 index.htm

如果仅对上述语法进行警报是不可见的。当在一个页面上使用很多行代码时，是否应该像上面的语句那样将其合并到 index.htm 中？

如果我使用我的示例代码如何：

```
$("#DropDownList2").hide();
    $("#pertama").change(function () {
        if ($("#pertama option:selected").text() == "- Pilih Data -") {
            $("#DropDownList2").hide();
            $("select[id$=DropDownList2] > option").remove();
        }

        if ($("#pertama option:selected").text() == "Keren") {
            $("#DropDownList2").show();
            $("select[id$=DropDownList2] > option").remove();
            $("#DropDownList2").append($("<option>" + ("Hyderabad") + "</option>"));
            $("#DropDownList2").append($("<option>" + ("Vijayawada") + "</option>"));
            $("#DropDownList2").append($("<option>" + ("Karimnagar") + "</option>"));
        }
        if ($("#pertama option:selected").text() == "Jelek") {
            $("#DropDownList2").show();
            $("select[id$=DropDownList2] > option").remove();
            $("#DropDownList2").append($("<option>" + ("Madhurai") + "</option>"));
            $("#DropDownList2").append($("<option>" + ("Chennai") + "</option>"));
        }
        if ($("#pertama option:selected").text() == "Tidak Tahu") {
            $("#DropDownList2").show();
            $("select[id$=DropDownList2] > option").remove();
            $("#DropDownList2").append($("<option>" + ("Bangalore") + "</option>"));
        }

    }); 
```

在主文件中会看起来很多代码

唯一的出路是在 jQuery 中使用函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:18:00.043

如果我正确理解你的问题...

您可以通过为每个页面加载声明函数来保持主文件清洁。将您的函数存储在单独的 js 文件中。

```
ondomready: function(element, id) {
    if (id == 'home') {
        loadHomePage();
    }
} 
```

...

```
function loadHomePage() {
    $("#Div1").click(function () {
        alert("Hello world!");
    });
} 
```

这就是我在我的应用程序中所做的。

# javascript - 配对键/值数组

> ID：12818083
> 
> 赞同：1
> 
> 时间：2012-10-10T11:19:08.903
> 
> 标签：javascript, node.js

考虑两个数组。一个带钥匙。另一个有价值观。

输出是由键/值对组成的对象。

是否有比以下更好的（性能）方法来做到这一点：

```
var keys = ["some", "key", "foo", "bar"];
var values = ["this", "are", "values", "dude"];

var result = { };

for(var i = 0, len = keys.length; i < len; i++) {
  result[keys[i]] = values[i];
}

console.log(result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:17:55.590

您可以使用`indexOf`数组的方法从第二个数组中获取相应的值，例如。对于键 'foo'，值 = values[keys.indexOf('foo')];

```
var keys = ["some", "key", "foo", "bar"],
values = ["this", "are", "values", "dude"],
key = 'foo',
value =  values[keys.indexOf('foo')]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:49:17.627

[http://underscorejs.org](http://underscorejs.org) 用于以下

```
_.object(keys, values) 
```

构建的复杂度为 O(N)，检索的复杂度为 O(1)。如果检索是您的目标，我认为您无法击败它。

# java - 如何在 Java 中调用 PostgreSQL 函数？

> ID：12818085
> 
> 赞同：1
> 
> 时间：2012-10-10T11:19:18.093
> 
> 标签：java, postgresql, postgis

我有 PostgreSQL+PostGIS。

我java我想调用这个查询：

```
SELECT num,id,mydata, asText(the_geom) FROM filedata 
```

但是得到`NullPointerException`。
我认为它的原因是我尝试`asText`在此查询中调用函数并做错了。我要做什么？

**更新**

这是我的代码：

```
IndexedContainer container = createContainer("SELECT num,id,mydata, asText(the_geom) FROM filedata");

public IndexedContainer createContainer(String SQL) throws SQLException, ClassNotFoundException
{
    Class.forName("org.postgresql.Driver");
        Connection con= null;
      con =  DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");

    IndexedContainer container = new IndexedContainer();
    String sSQL = SQL;

    PreparedStatement ps = con.prepareStatement(sSQL);
 ////*****////
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:23:07.747

很可能您的问题出在`the_geom`- 它**不是**表列（除非您没有遵循任何命名标准）。如果您尝试在 Java 中构建 SQL 并将 Java 变量中的值传递给 SQL，则可以使用查询参数。
我怀疑您“忘记了”您的 SQL 实际上是在 Java 变量不可用的 SQL 服务器上运行的。

# jsf - 自定义消息不显示（使用Jsf和primeface3.3）

> ID：12818086
> 
> 赞同：1
> 
> 时间：2012-10-10T11:19:22.773
> 
> 标签：jsf, primefaces

我正在使用 primeface 3.3 和 JSF 创建一个演示项目，如果用户没有填写必填字段，那么它应该显示一条消息。这是我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
    <h:head>
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
   <title> growl</title>
</h:head>
<h:body>
<h:form>  

    <p:growl id="growl" showDetail="true" sticky="true" />  

      <p:panel > 
        <h:panelGrid columns="3"> 

            <h:outputText value="Your Name: *" />   
            <p:inputText value="#{someBean}" required="true" label="Name" requiredMessage="User Name Requireds"/>  
       <h:messages style="color:red;margin:5px;" />
        </h:panelGrid>  

        <p:commandButton value="Save"    action="success" />  
    </p:panel>  

</h:form>
</h:body>
</f:view>
</html> 
```

在不填写用户名的情况下单击保存按钮时，它不显示所需的消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:53:26.103

默认情况下`<p:commandButton>`发送一个 ajax 请求，其中默认执行整个表单（如 中`process="@form"`），但默认情况下实际上*不会*更新任何内容（如中`update=""`）。

如果要在完成 ajax 请求时更新 UI，则需要显式指定`update`属性。例如，这会更新整个表单：

```
<p:commandButton ... update="@form" /> 
```

这仅更新特定组件：

```
<h:messages id="messages" ... />
<p:commandButton ... update="messages" /> 
```

您也可以使用`<p:messages>`支持自动更新的 PrimeFaces own。

```
<p:messages ... autoUpdate="true" />
<p:commandButton ... /> 
```

# java - 使用 Struts2 生成报告时获取 ClassCastException

> ID：12818088
> 
> 赞同：0
> 
> 时间：2012-10-10T11:19:27.453
> 
> 标签：java, struts2, jasper-reports

我将*.jasper*文件放在我的项目的 web 内容文件夹中，在我的动作类中只有执行方法，我的*struts.xml*有以下代码：

```
<action name="myJasperTest" class="com.acme.test.action.JasperAction">
    <result name="success" type="jasper">
        <param name="location">/our_jasper_template.jasper</param>
        <param name="dataSource">myList</param>
        <param name="reportParameters">reportParams</param>
        <param name="format">PDF</param>
    </result>
    <result name="error">/Error.jsp</result>
</action> 
```

在运行这个程序时它给了我错误：

```
java.lang.ClassCastException: cannot assign instance of
net.sf.jasperreports.engine.base.JRBaseStyle to field
net.sf.jasperreports.engine.base.JRBaseParagraph.paragraphContainer of type
net.sf.jasperreports.engine.JRParagraphContainer in instance of
net.sf.jasperreports.engine.base.JRBaseParagraph 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:51:16.333

由于项目 lib 文件夹中的 jar 不正确而发生此错误

# python - Django 多用户配置文件 - 在管理员中内联显示用户字段

> ID：12818089
> 
> 赞同：1
> 
> 时间：2012-10-10T11:19:28.763
> 
> 标签：python, django, django-models, django-admin

我对 Django 比较陌生，我正在尝试实现文档中不太清楚的东西。我的应用程序需要多种类型的用户。因此，我扩展了 django User，创建了一个 Profile 模型，其中包含所有 User 类型中常见的附加字段：

```
USER_TYPES = (
    ('A', 'UserTypeA'),
    ('B', 'UserTypeB'),
    ('C', 'UserTypeC'),
)

class Profile(models.Model):
    user = models.OneToOneField(User, unique=True)
    about = models.TextField(blank=True)
    user_type = models.CharField(max_length=3, choices=USER_TYPES, default='A')

    def save(self, *args, **kwargs):
        try:
           existing = Profile.objects.get(user=self.user)
           self.id = existing.id #force update instead of insert
        except Profile.DoesNotExist:
           print "Profile not created yet"
        models.Model.save(self, *args, **kwargs) 

def create_user(sender, instance, created, **kwargs):
    print "User Profile Creation: False"
    if created:
        print "User Profile Creation: ", created
        Profile.objects.create(user=instance)

post_save.connect(create_user, sender=Profile) 
```

在 settings.py 我已经设置：

```
AUTH_PROFILE_MODULE = 'users.Profile' 
```

之后，我定义了派生自 Profile 模型的 UserTypeX 模型，如下所示：

```
class UserTypeA(Profile):
    phone_number = models.CharField(max_length=13,blank=False)

class UserTypeB(Profile):
    company_name = models.CharField(max_length=30,blank=False)
    phone_number = models.CharField(max_length=13,blank=False)

    def __init__(self, *args, **kwargs):
        kwargs['user_type'] = 'B'
        super(UserTypeB, self).__init__(*args, **kwargs)

... 
```

我已将这些用户模型注册到管理员，以便我可以独立管理我的用户。

默认管理员行为正确显示所有 Profile 和 UserTypeX 字段，并且由于 Profile 和 User 模型之间的 OneToOneField 关系，User 字段有一个选择框（旁边有一个加号按钮）。因此，每当我想创建一个新的 UserTypeX 时，我都必须按下加号按钮并在一个新的弹出窗口中填写所有默认 User django 定义的字段。

我现在正在努力做的是显示这些用户字段，而不是在新的弹出窗口中，而是在我的 UserTypeX 添加/编辑页面中内联。我已经阅读了有关 StackedInlines 和 TabularInlines 的文档，但这些文档不适合我的情况，因为我想在祖先的添加/编辑页面中内联父字段，反之亦然。

是否有针对该问题的示例代码（请！）的建议解决方案？提前致谢！

* * *

那么，简而言之，有没有办法在管理员的配置文件添加/编辑屏幕中显示用户字段（而不是由于 OneToOneField 关系而选择/添加功能）？

* * *

**更新：**一个相关的问题（虽然没有回答......）简要解决了这个问题是：

[Django Admin中的反向内联](https://stackoverflow.com/questions/8329856/reverse-inlines-in-django-admin)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-01T09:46:34.773

你不能。但是如果你愿意，你可以让 B 在 A 中内联。或者也许你可以操纵 django 如何显示它

> def **unicode**（自我）：

模型.py

```
class A(models.Model):
    name = models.CharField(max_length=50)
    def __unicode__(self):
        return self.name

class B(models.Model):
    name = models.CharField(max_length=50)
    a = models.ForeignKey(A) 
```

管理员.py

```
class B_Inline(admin.TabularInline):  
    model = B
class A_Admin(admin.ModelAdmin):
    inlines = [
        B_Inline,
    ]
admin.site.register(A, A_Admin)
admin.site.register(B) 
```

或者，也许您想使用多对多关系？

模型.py

```
class C(models.Model):
    name = models.CharField(max_length=50)
    def __unicode__(self):
        return self.name
class D(models.Model):
    name = models.CharField(max_length=50)
    cs = models.ManyToManyField(C) 
```

管理员.py

```
class C_Inline(admin.TabularInline):  
    model = D.cs.through
class D_Admin(admin.ModelAdmin):
    exclude = ("cs",)
    inlines = [
        C_Inline,
    ]
admin.site.register(C)
admin.site.register(D, D_Admin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:33:03.730

我不知道这是如何工作的——你告诉 django`users.Profile`用作你的个人资料模型，但你实际上想使用它的孩子。另外，正如您所说，您想以“错误的方式”使用内联表单。在不了解您到底想要实现什么的情况下，我建议您可以通过定义自定义视图来编辑用户详细信息而不是使用 django admin 来解决内联表单问题。至于不同的配置文件类型 - 我建议只`profile type`在模型中定义一个字段，然后根据其值隐藏/显示不同的字段/属性

# mysql - 来自两个表的Mysql查询

> ID：12818091
> 
> 赞同：1
> 
> 时间：2012-10-10T11:19:32.973
> 
> 标签：mysql, sql

是否可以在一个查询中加入两个 mysql 查询？

喜欢：

```
select * from a + select * from b 
```

这样我就可以在单个 php 循环中使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:20:31.073

如果它们具有相同的列数并且每列中的数据类型相同，则可以使用 a`UNION`或`UNION ALL`：

```
select * 
from a 
UNION ALL
select * 
from b 
```

如果您提供有关表、数据等的更多详细信息，则可能有另一种返回此数据的方式。

A`UNION`将只返回`DISTINCT`值，而 a`UNION ALL`选择所有值。

如果这是您需要走的路线，并且您仍然需要识别数据来自哪个表，那么您始终可以创建一个列来识别数据来自哪个表，类似于这样：

```
select *, 'a' TableName
from a 
UNION ALL
select *, 'b' TableName
from b 
```

这使您可以区分数据来自哪个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:44:01.697

我认为创建 sql“变量”更容易，例如：

```
select varA, varb from TableA, tableB; 
```

你可以在 PHP 中使用值来访问属性。

这样，您可以在查询中获取条件，例如：

```
select varA, varb from TableA, tableB where varA.id = varB.foreingId bla bla... 
```

;)

# perl - 加入功能不起作用

> ID：12818101
> 
> 赞同：1
> 
> 时间：2012-10-10T11:20:00.027
> 
> 标签：perl, join

下面的脚本在每个“E”处中断序列，随后在每个片段上添加一个“E”。但是我没有将'E'附加到我的最后一个元素上，为什么？

```
use strict;
use warnings;

my $s = 'ABCDEABCDEABCDEABCDEABCDE';
my @a = split /E(?!P)/, $s;

my $result = join "E,", @a; 
my @final  = split /,/, $result;
print "@final\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:30:37.543

A在连续元素**之间**`join`连接它的第一个参数。如果你想添加最后的“E”，你可以简单地做：

 **```
$s = 'ABCDEABCDEABCDEABCDEABCDE';
@a = split(/E(?!P)/, $s);
print join ("E ", @a), "E\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:23:04.893

请参阅以下文档`split`：

> 默认情况下，保留空的前导字段，并删除空的尾随字段。**

# python - Pandas 日期时间转换和过滤问题

> ID：12818103
> 
> 赞同：0
> 
> 时间：2012-10-10T11:20:08.780
> 
> 标签：python, pandas

我正在使用 Pandas 0.8.1 获取 Yahoo 股票价格

```
from datetime import datetime
from pandas.io.data import DataReader

stk_price = DataReader('600809.ss', 'yahoo', datetime(2006,1,1), datetime(2012,12,31)).reset_index()

>>> stk_price.Date
0    2010-01-04 00:00:00
1    2010-01-05 00:00:00
2    2010-01-06 00:00:00
3    2010-01-07 00:00:00
4    2010-01-08 00:00:00 
```

我想通过以下方式将日期转换为字符串：

```
>>>stk_price.Date.astype('|S10')
0     1970-01-15
1     1970-01-15
2     1970-01-15
3     1970-01-15
4     1970-01-15
5     1970-01-15 
```

为什么它显示“1970-01-15”而不是“2010-01-04”等？如何解决？

如果我有一个

```
DATE_LIST = [
 u'20090331', u'20090630', u'20090930', u'20091231', \
 u'20100331', u'20100630', u'20100930', u'20101231', \
 u'20110331', u'20110630', u'20110930', u'20111231', \
 u'20120331', u'20120630', u'20120930', u'20121231'
 ] 
```

我只是尝试通过以下方式过滤`stk_price`其日期列所在的行`DATE_LIST`：

```
from datetime import datetime
from pandas.io.data import DataReader
import numpy as np

DATE_LIST = [
 u'20090331', u'20090630', u'20090930', u'20091231', \
 u'20100331', u'20100630', u'20100930', u'20101231', \
 u'20110331', u'20110630', u'20110930', u'20111231', \
 u'20120331', u'20120630', u'20120930', u'20121231'
 ]

DATE_ARRAY = np.array(DATE_LIST,dtype='datetime64[us]')
stk_price = DataReader('600809.ss', 'yahoo', datetime(2006,1,1), datetime(2012,12,31)).reset_index()
rst = stk_price[stk_price.Date.isin(DATE_ARRAY)].Close 
```

但第一个是空的。

如何修复它或任何 Pandas 函数都可以过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:34:05.033

用于`df.Date=df.Date.apply(lambda x:x.date())`转换日期时间列

```
>>> df=DataFrame({'Date':[datetime(2006,1,1)]})
>>> df
                  Date
0  2006-01-01 00:00:00
>>> df.Date=df.Date.apply(lambda x:x.date())
>>> df
         Date
0  2006-01-01 
```

编辑：

格式化 DATE_LIST

```
dates=[datetime.datetime.strptime(i, "%Y%m%d").date() for i in DATE_LIST] 
```

最后用于`isin`过滤掉 DATE_LIST 中的行：

```
df[df['Dates'].isin(dates)] 
```

一口气（假设您有 stk_price 数据框，该数据框有一个名为 Date 的日期列）：

```
import datetime

stk_price = DataReader('600809.ss', 'yahoo', datetime(2006,1,1), datetime(2012,12,31)).reset_index()
stk_price.Date=stk_price.Date.apply(lambda x:x.date())
dates=[datetime.datetime.strptime(i, "%Y%m%d").date() for i in DATE_LIST]
stk_price[stk_price['Dates'].isin(dates)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:53:26.387

除了将 stk_price 日期转换为字符串（由于 numpy 错误而显示错误的日期，另请参见[github 问题 #1802](https://github.com/pydata/pandas/issues/1802)），您还可以将 DATE_LIST 转换为时间戳并直接使用这些来索引 stk_price。下面是一个包含随机数据的帧示例。

```
In [16]: DATE_LIST = [
 u'20090331', u'20090630', u'20090930', u'20091231', \
 u'20100331', u'20100630', u'20100930', u'20101231', \
 u'20110331', u'20110630', u'20110930', u'20111231', \
 u'20120331', u'20120630', u'20120930', u'20121231'
 ]

In [17]: timestamps = [pd.Timestamp(date) for date in DATE_LIST]

In [18]: df = pd.DataFrame(np.random.randn(100,3), index=pd.date_range('20090331', periods=100))

In [19]: df.ix[timestamps].dropna()
Out[19]:
                   0         1         2
2009-03-31  0.520235  1.158889 -0.310227
2009-06-30  1.036449  0.528931 -0.083166 
```

# android - 如何绘制具有透明内部区域的矩形？

> ID：12818104
> 
> 赞同：3
> 
> 时间：2012-10-10T11:20:08.160
> 
> 标签：android, styles

我想在[这个图像](https://stackoverflow.com/questions/7817236/how-do-you-make-a-resizable-rectangle-for-cropping-images-in-android)的视图中心绘制矩形。为此，我使用以下代码

```
public class TransparentView extends View {

    public TransparentView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public TransparentView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TransparentView(Context context) {
        super(context);
    }

    @Override
    public void draw(Canvas canvas) {
        super.draw(canvas);
        canvas.drawColor(Color.parseColor("#60000000"));
        Paint borderPaint = new Paint();
        borderPaint.setARGB(255, 255, 128, 0);
        borderPaint.setStyle(Paint.Style.STROKE);
        borderPaint.setStrokeWidth(4);

        Paint innerPaint = new Paint();
        innerPaint.setARGB(0, 0, 0, 0);
        innerPaint.setAlpha(0);
        innerPaint.setStyle(Paint.Style.FILL);

        RectF drawRect = new RectF();

        drawRect.set(100, 100, 100,100);

        canvas.drawRect(drawRect, innerPaint);
        canvas.drawRect(drawRect, borderPaint);

    }

} 
```

我怎样才能使矩形内部完全透明而外部区域透明性差？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-19T11:36:38.060

只需使用

```
innerPaint.setStyle(Paint.Style.STROKE); 
```

代替

```
innerPaint.setStyle(Paint.Style.FILL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:31:58.863

使用`Path`并添加两个`Rect`s，一个用于完整的视图区域，一个用于“选择”。将路径填充类型设置为 EVEN_ODD。现在用半透明的颜色填充它。

```
Path outerPath = new Path();
// add rect covering the whole view area
outerPath.addRect(0, 0, getWidth(), getHeight(), Path.Direction.CW);
// add "selection" rect;
RectF inner = new RectF(left, top, right, bottom);
outerPath.addRect(inner, Path.Direction.CW);
// set the fill rule so inner area will not be painted
outerPath.setFillType(Path.FillType.EVEN_ODD);

// set up paints
Paint outerPaint = new Paint();
outerPaint.setColor(0x60000000);

Paint borderPaint = new Paint();
borderPaint.setARGB(255, 255, 128, 0);
borderPaint.setStyle(Paint.Style.STROKE);
borderPaint.setStrokeWidth(4);

// draw
canvas.drawPath(outerPath, outerPaint);
canvas.drawRect(inner, borderPaint); 
```

请注意，为了获得更好的性能，您不应在 onPaint() 中创建画图和路径。我建议 onSizeChanged() 更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:28:50.903

我将图像分成 5 个矩形。主要的是完全透明的，在图的中间。其他 4 个将是半透明的。

之后，在 onDraw(Canvas canvas) 内，我用半透明颜色绘制了 4 个矩形。

这是我使用的代码。

```
//On constructor:
float x1,x2,y1,y2;
x1 = (screenWidth - squareSize)/2;
x2 = x1 + squareSize;
y1 = (screenHeight - squareSize)/2;
y2 = y1 + squareSize;
rect = new RectF(x1, y1, x2, y2);
dark = new RectF[]{
        new RectF(0, 0, screenWidth, y1),
        new RectF(0, y1, x1, y2),
        new RectF(x2, y1, screenWidth, y2),
        new RectF(0, y2, screenWidth, screenHeight)
};

semitransparentPaint = new Paint();
semitransparentPaint.setColor(Color.BLACK);
semitransparentPaint.setAlpha((int) (256 * (1-TRANSPARENCY)));

//Inside onDraw(Canvas canvas)
for(RectF r : dark){
    canvas.drawRect(r, semitransparentPaint);
} 
```

这可能对你有用。另外，您没有要求边框，但是在您的代码片段中，我看到您调用**了 canvas.drawRect(drawRect,borderPaint);** 女巫让我相信你也想画它们，所以我将在这里粘贴我用来绘制边框的代码：

```
//Inside onDraw(Canvas canvas)
canvas.drawLines(new float[]{
    rect.left, rect.top, rect.right, rect.top, 
    rect.right, rect.top, rect.right, rect.bottom,
    rect.right, rect.bottom, rect.left, rect.bottom,
    rect.left, rect.bottom, rect.left, rect.top}
    , 0, 16, squareBorderPaint); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-08T17:21:57.880

您可以使用`setXfermode()`Paint**并**传递`PorterDuff.Mode.ADD`和`PorterDuff.Mode.ADD`作为参数以获得内部透明区域。

我在下面提到了一个示例，该示例**在另一个矩形内包含一个透明矩形**，它显示了它如何在 Android 中实现。

```
 Paint outerPaint = new Paint();
    outerPaint.setColor(0x7f0600a6); // mention any background color 
    outerPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.ADD));
    outerPaint.setAntiAlias(true);

    Paint innerPaint = new Paint();
    innerPaint.setColor(Color.TRANSPARENT);
    innerPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    innerPaint.setAntiAlias(true);

    canvas.drawRect(0.0F, 0.0F, width, height, outerPaint);
    canvas.drawRect(150F, 150F, innerWidth, innerHeight, innerPaint); 
```

**请注意：**您可以`drawRect()`根据需要更改其中的值。

# java - java序列化导致utfdataformatexception

> ID：12818106
> 
> 赞同：5
> 
> 时间：2012-10-10T11:20:11.337
> 
> 标签：java, serialization

我正在尝试将多个对象序列化到一个文件中。特别是，当我尝试写

```
public void execute(PipelineContext context) throws Exception {
        FileOutputStream fos = new FileOutputStream("test_audit_trail2.objects");
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        BigInteger rho = (BigInteger) context.get("rho");
        BigInteger p = (BigInteger) context.get("p");
        BigInteger xS = (BigInteger) context.get("xs");
        BigInteger zSBar = (BigInteger)context.get("zsbar");

        int nS  = (Integer) context.get("ns");
        P2PShuffler ownShuff = (P2PShuffler) context.get("shuffler");
        HexCryptor cryptor = (HexCryptor) context.get("cryptor");
        String[] PRPrimePrimeBar = (String []) context.get("pr_prime_prime_bar");
        P2PAuditTrailGenerator ownATG = (P2PAuditTrailGenerator) context.get("p2p_audit_trail_generator");
        int kS = (Integer) context.get("ks");

        oos.writeObject(rho);
        oos.writeObject(p); 
        oos.writeObject(xS);
        oos.writeObject(zSBar);
        oos.writeObject(ownShuff);
        oos.writeObject(cryptor);
        oos.writeObject(PRPrimePrimeBar);
        oos.writeObject(ownATG);
        oos.writeObject(nS);
        oos.writeObject(kS); 
```

这发生了，所有的 writeObject 都成功了，我忠实地关闭了相应的流。但是，当我尝试通过调用 readObject() 来重建所有对象时，我遇到了`UTFDataFormatException`

```
java.io.UTFDataFormatException
    at java.io.ObjectInputStream$BlockDataInputStream.readUTFSpan(ObjectInputStream.java:3081)
    at java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(ObjectInputStream.java:3006)
    at java.io.ObjectInputStream$BlockDataInputStream.readUTF(ObjectInputStream.java:2819)
        at java.io.ObjectInputStream.readUTF(ObjectInputStream.java:1050)
        at java.io.ObjectStreamClass.readNonProxy(ObjectStreamClass.java:614)
        at java.io.ObjectInputStream.readClassDescriptor(ObjectInputStream.java:808)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1564)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)
        at java.io.ObjectInputStream.skipCustomData(ObjectInputStream.java:1911)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
        at edu.foo.peer.pipeline.AuditTrailCheckStageTest.setUp 
```

在逐一注释掉`readObject`and之后，似乎省略了 this 可以让我成功读取所有对象。查看这个类，似乎没有 String 相关的对象。`writeObject``P2PAuditTrailGenerator`

```
public class P2PAuditTrailGenerator implements Serializable {

    private int num;
    private BigInteger phi;
    private BigInteger rho;
    /**
     * @param   auditTrailSecretKeys    The secret keys used for audit trail
     */
    private BigInteger[] auditTrailSecretKeys;
    private BigInteger[] encAuditTrails;
    private Random rnd;

    public BigInteger [] getAuditTrailSecretKeys(){
        return auditTrailSecretKeys;
    }

    public P2PAuditTrailGenerator(int num, BigInteger rho, BigInteger phi) {
        this.num = num;
        this.phi = phi;
        this.rho = rho;
        auditTrailSecretKeys = new BigInteger[num];
        encAuditTrails = new BigInteger[num];
        rnd = new Random();

    }

    public BigInteger[] generateATs() {

        for (int i = 0; i < num; i++) {
            //assuming the security parameter is always 512 or 1024;
            auditTrailSecretKeys[i] = new BigInteger(200, rnd).mod(phi);
            encAuditTrails[i] = rho.modPow(auditTrailSecretKeys[i], phi);

        }
        return encAuditTrails;
    }
} 
```

id-ing 错误的类，或者如果不是，我的实现有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:54:23.900

我猜您已将 P2PAuditTrailGenerator 声明为可序列化，但它没有无参数构造函数。其他一切看起来都不错。

# javascript - 为什么我不能按名称选择表单元素并使用它们的值通过 jQuery 设置变量

> ID：12818111
> 
> 赞同：3
> 
> 时间：2012-10-10T11:20:24.663
> 
> 标签：javascript, jquery, html

我正在尝试选择一组单选按钮的值并使用它来设置变量。这个想法是每次更改单选按钮时变量都会更改。

由于某种原因，这似乎不起作用，我不知道为什么。该变量似乎没有从最初定义的“0”改变。按下黄色按钮时，变量应显示在警告框中。

我已经整理了我想要实现的简化版本 - 见下文。

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
 var paytype = 0;

 $("input [name = paytype]").change(function(){
  var paytype = $(this).val();
  });

 $("#button").click(function(){
  alert ( paytype );
  });
 });
</script>

</head>
<body>
<form id="enrolmentform" action="thanks.php">

<input type="radio" name="paytype" id="bacs" value="Bank Transfer" />
<label for="bacs">Bank Payment/BACS Transfer</label>
<input type="radio" name="paytype" id="cheque" value="Cheque" />
<label for="cheque">Cheque</label>
<input type="radio" name="paytype" id="card" value="Card" />
<label for="card">Card</label>

<div style="width:45px; height: 20px; background-color: yellow; border: thin solid black; margin-top: 20px;"><a href="#" id="button">Button</a></div>
</form>

</body>
</html> 
```

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:22:25.893

您两次声明付款类型。你不需要`var`：

```
$("input [name = paytype]").change(function(){
    paytype = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:25:28.180

请试试这个

```
$("input:radio[name='paytype']").change(function(){
 paytype = $(this).val();
}); 
```

[小提琴链接](http://jsfiddle.net/pintu31/mCdz9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:23:00.387

你在这一行重新定义你的变量

```
var paytype = $(this).val(); 
```

将其替换为

```
paytype = $(this).val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:23:18.310

```
$(document).ready(function(){
 var paytype = 0;

 $("input [name = paytype]").change(function(){
  paytype = $(this).val();
  });

 $("#button").click(function(){
  alert ( paytype );
  });
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T11:28:18.083

你去吧，有几个小错误..

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">            </script>
<script type="text/javascript">
$(document).ready(function(){
 var paytype;

 $("input[name='paytype']").change(function(){
   paytype = $(this).val();
  });

 $("#button").click(function(){
  alert ( paytype );
  });
 });
</script>

</head>
<body>
<form id="enrolmentform" action="thanks.php">

<input type="radio" name="paytype" id="bacs" value="Bank Transfer" />
<label for="bacs">Bank Payment/BACS Transfer</label>
<input type="radio" name="paytype" id="cheque" value="Cheque" />
<label for="cheque">Cheque</label>
<input type="radio" name="paytype" id="card" value="Card" />
<label for="card">Card</label>

<div style="width:45px; height: 20px; background-color: yellow; border: thin solid     black; margin-top: 20px;"><a href="#" id="button">Button</a></div>
</form>

</body>
</html> 
```

# c# - linq 到实体 sqlFunction.string 转换返回 varchar 而不是 nvarchar

> ID：12818127
> 
> 赞同：3
> 
> 时间：2012-10-10T11:21:35.627
> 
> 标签：c#, sql-server, visual-studio-2010, linq

我必须在两个表之间编写 linq to sql server，相关字段的类型不同。一个是 string(nvarchar)，另一个是 int。

**这是我的 linq：**

```
from je in a
join vP in b
on je.BaseRef  equals SqlFunctions.StringConvert((decimal) vP.DocEntry) 
```

**sql 中 linq 的结果是：**

```
SELECT 
[Extent1].[Account] AS [Account]
FROM  [dbo].[a] AS [Extent1]
JOIN [dbo].[b] AS [Extent2] ON ([Extent1].[BaseRef] = (STR( CAST( [Extent2].[DocEntry] AS float)))) OR (([Extent1].[BaseRef] IS NULL) AND (STR( CAST( [Extent2].[DocEntry] AS float)) IS NULL)) 
```

该查询返回 null，因为 sql 无法比较 varchar 和 nvarchar。linq to entity 转换`sqlfunction.stringFormat`为`str('')`而不是`convert(nvarchar,'')`。如何转换为 nvarchar？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T07:14:50.537

有一个解决方法：

```
SqlFunctions.StringConvert((decimal) vP.DocEntry) + "" 
```

这将转化为

```
(STR( CAST( [Extent2].[DocEntry] AS float))) + N'' 
```

这将整个表达式提升到`nvarchar`.

但我怀疑和之间的比较`char`应该`nvarchar`没有问题。该问题更有可能通过修剪转换结果来解决：

```
SqlFunctions.StringConvert((decimal) vP.DocEntry).Trim() 
```

# php - 为什么我收到未定义的索引：HTTP_HOST 错误？

> ID：12818129
> 
> 赞同：2
> 
> 时间：2012-10-10T11:21:57.267
> 
> 标签：php, facebook, cron

我正在使用 Facebook SDK 在我自己的 Facebook 页面上发布一些测试墙帖子。当我在浏览器上运行脚本时它工作正常但是当我从终端运行它时它给我如下错误，我不知道有什么问题请帮忙。我想每 6 小时使用 php CRON 脚本在我的 Facebook 页面上发布一次。

未定义的索引：Facebook/src/base_facebook.php 中的 HTTP_HOST 错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T11:24:31.367

cron 执行 PHP 不像 apache 的模块，所以很多环境变量不是由服务器设置的。从 cron 执行时，您的 PHP 脚本就像 GCI 之一，更准确地说是它的 CLI（命令行界面 - php-cli）。所以你可以想象，没有 Web 服务器，也没有 HTTP_HOST。

PS：您可以将数据（url、主机名或任何您喜欢的）作为命令行参数（环境变量）传输到 PHP：[命令行使用](http://php.net/manual/en/features.commandline.php)

添加：

```
$php -f cronjob.php HTTP_HOST=www.mysite.com #example

<?php
    // cronjob.php
    $host = $_GET['HTTP_HOST']; // Get the host via GET params
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:24:51.707

如果您从终端或 cron 作业运行脚本，则没有 HTTP 环境。

`wget http://.../parameters`一个可能的解决方案是使用 a而不是 with运行脚本`php scriptname`。

# java - SLES Apache Solr start.jar，无法访问 jarfile

> ID：12818130
> 
> 赞同：4
> 
> 时间：2012-10-10T11:21:58.530
> 
> 标签：java, apache, solr

我在启动 Apache Solr 搜索时遇到了一些问题。

在我的 SLES 11 64 位服务器上安装 java 7 后，我将 solr 3.6.1 解压缩到 /srv/apache-solr-3.6.0/

在此之后我想启动该软件，但是当我尝试时：

```
java -jar start.jar 
```

子文件夹：/srv/apache-solr-3.6.0/solr/example/

我收到以下错误：

```
Error: Unable to access jarfile start.jar 
```

? ：-/

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T16:04:08.570

您可能下载了不包含 start.jar 文件的源版本，试试这个：[http://apache.mirrors.tds.net/lucene/solr/3.6.0/apache-solr-3.6.0。 tgz](http://apache.mirrors.tds.net/lucene/solr/3.6.0/apache-solr-3.6.0.tgz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T07:24:32.367

此文件位于 server 文件夹中，`solr-5.3.1`因此如果要运行，需要执行`start.jar`以下步骤：

1.  从您提取 zip 文件的目录中打开命令提示符

2.  转到您的`solr-5.3.1`目录。

3.  打开 bin 文件夹

4.  类型`solr start -e cloud noprompt`

# drupal-6 - drupal 6 认证用户

> ID：12818133
> 
> 赞同：0
> 
> 时间：2012-10-10T11:22:11.820
> 
> 标签：drupal-6, drupal-7

在drupal 6中，默认有两个角色匿名用户和经过身份验证的用户。错误地删除了经过身份验证的用户。它为检查经过身份验证的用户的权限造成了很多问题，因此如何获得经过身份验证的用户角色。或者（回滚该操作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:42:41.797

使用数据库名代替表名。在 phpMmyAdmin 中触发插入查询，如下所示：

```
INSERT INTO database name.role (rid, name) VALUES ('2', 'authenticated user') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:36:10.950

在 phpmyadmin 中触发插入查询

插入到`tablename`. `role`( `rid`, `name`) VALUES ('2', '认证用户')

# php - 我如何发送参数以在 Open Flash Chart 中创建我的数据？

> ID：12818135
> 
> 赞同：0
> 
> 时间：2012-10-10T11:22:16.033
> 
> 标签：php, flash

我正在尝试将参数发送到我的数据文件以完整打开我的闪存图表...根据此框架，它像参数一样将 .php 文件发送到 .swf ，但 .php 文件不接收参数，它只是由 .swf 调用，所以它确实让我捕获了 url 或其他一些参数，我不知道该怎么做，我怎样才能将更多参数发送到通过 swf 调用的 .php 文件？

这是打开闪存图表的链接 [http://teethgrinder.co.uk/open-flash-chart/index.php](http://teethgrinder.co.uk/open-flash-chart/index.php)

任何其他易于用于 php 的图表框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:05:12.280

尝试将文件的路径插入到 encodeURIComponent(); ...它对我有用；）

```
var path = encodeURIComponent(./path/to/your/file.php?param1=x&param2=y);
swfobject.embedSWF("./open-flash-chart.swf", "my_chart", "400", "250", "9.0.0", "expressInstall.swf", {"data-file": path } ); 
```

# magento - Magento：创建发票后如何更改订单状态

> ID：12818142
> 
> 赞同：0
> 
> 时间：2012-10-10T11:22:30.023
> 
> 标签：magento

我在尝试创建发票时遇到问题。我想在创建发票时更改自定义订单状态，目前在生成发票时它会自动完成我想要更改为已发货状态的完成状态。但我不能这样做。

请帮助我尽快解决这个问题。

谢谢，尼莱什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:57:45.470

首先，您需要了解订单状态。

下订单后，它会获得`New`状态。此时，您可以保留、发货、开票或取消，从而分别分配您的订单、、`Hold`或状态。一旦您发货并开具发票，您的订单就会收到状态。 `Processing``Processing``Cancelled``Completed`

现在，这些状态中的每一个都可以有一个单独的状态，您可以自己定义 if `System -> Order statuses`。在您的情况下，如果您希望订单显示`Dispatched`，在您完成运输和开票后，您将添加`Dispatched`订单状态并将其分配给`Complete`订单状态。任何其他订单状态也是如此。

# javascript - 使用 javascript 重定向而不加载母版页

> ID：12818144
> 
> 赞同：2
> 
> 时间：2012-10-10T11:22:32.850
> 
> 标签：javascript, jquery, asp.net, json, web-services

我在 c# 下有一个 asp.net 应用程序

我的应用程序由母版页及其子页组成

在我的母版页中，我设置了一个菜单

我需要当我点击菜单中的一个项目时，我需要调用一个 javascript 函数来重定向到此页面，而无需再次加载母版页。

例如：我在主页，我想重定向到联系我们页面，当我点击菜单中的联系我们链接时，我只需要加载与主页无关的页面部分。

我知道要加载页面的一部分，我必须使用 jquery，这就是为什么我使用 jquery 通过 Web 服务向服务发送 json 请求并获取信息并在联系我们页面中表示这些信息。

**问题：** 如何在不加载母版页的情况下从一个页面重定向到另一个页面？

**注意：** 我在母版页加载方法中尝试 ispostback，在 javascript 方法中尝试 windows.location = "contactus"

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:31:39.800

您要做的不是“重定向”用户，而是加载内容（通过 AJAX），您将用它替换页面的某个区域。就像你说的，你会用 jQuery 来做这件事；

```
jQuery("#selectorToGetTheMainNode").load("http://urlToLoadTheHTMLFrom"); 
```

这将自动加载并用加载的内容替换 MainNode 中存在的 html。

# python - Python argparse 忽略无法识别的参数

> ID：12818146
> 
> 赞同：251
> 
> 时间：2012-10-10T11:22:37.373
> 
> 标签：python, argparse, optparse

Optparse，旧版本只是忽略所有无法识别的参数并继续。在大多数情况下，这并不理想，并且在 argparse 中进行了更改。但是在某些情况下，您希望忽略任何无法识别的参数并解析您指定的参数。

例如：

```
parser = argparse.ArgumentParser()
parser.add_argument('--foo', dest="foo")
parser.parse_args()

$python myscript.py --foo 1 --bar 2
error: unrecognized arguments: --bar 
```

反正有覆盖这个吗？

* * *

## 回答 #1

> 赞同：441
> 
> 时间：2012-10-10T11:28:09.927

代替

```
args = parser.parse_args() 
```

和

```
args, unknown = parser.parse_known_args() 
```

例如，

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--foo')
args, unknown = parser.parse_known_args(['--foo', 'BAR', 'spam'])
print(args)
# Namespace(foo='BAR')
print(unknown)
# ['spam'] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-09-22T04:51:18.997

`parser.add_argument('args', nargs=argparse.REMAINDER)`如果你想使用它们，你可以将剩余的部分放入一个新的参数中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-28T02:19:36.513

实际上 argparse 仍然“忽略” `_unrecognized_args`。只要这些“无法识别”的参数**不使用默认前缀**，您就不会听到解析器的任何抱怨。

使用@anutbu 的配置但使用标准`parse.parse_args()`，如果我们要使用以下参数执行我们的程序。

```
$ program --foo BAR a b +cd e 
```

我们将使用这个命名空间数据集合。

```
Namespace(_unrecognized_args=['a', 'b', '+cd', 'e'], foo='BAR') 
```

如果我们希望忽略默认前缀`-`，我们可以更改 ArgumentParser 并决定我们将使用 a`+`作为我们“已识别”的参数。

```
parser = argparse.ArgumentParser(prefix_chars='+')
parser.add_argument('+cd') 
```

相同的命令将产生

```
Namespace(_unrecognized_args=['--foo', 'BAR', 'a', 'b'], cd='e') 
```

把它放在你的烟斗里抽烟=）

开心！

# objective-c - 时间分析仪仪器未显示目标 c 函数

> ID：12818149
> 
> 赞同：11
> 
> 时间：2012-10-10T11:22:47.193
> 
> 标签：objective-c, instruments

我正在使用仪器，但我在时间分析器中只看到 0x00345 等我没有看到任何目标 c 代码，尽管我启用了“仅显示目标 c”选项......感谢任何帮助！![没有仅显示目标 c 选项](../Images/d6cf49f949f1c5b69b62207674cacd0a.png)

![使用仅显示目标 c 选项](../Images/45a5fd1af022e3176533a757aa7ae902.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T18:55:26.813

问题的最可能原因是没有为您的项目生成调试符号。没有调试符号 Instruments 只显示内存地址，就像你的第一个屏幕截图中显示的那样。

有两种方法可以解决问题。首先，使用 Debug 构建配置分析您的应用程序。使用项目窗口工具栏中的 Scheme 菜单来更改构建配置。其次，将 Release 构建配置的 Generate Debug Symbols 构建设置设置为 Yes。

# java - 例外：getProperty(null, "agent") 的源为空

> ID：12818156
> 
> 赞同：1
> 
> 时间：2012-10-10T11:23:15.683
> 
> 标签：java, html, tapestry

我只是在学习如何使用挂毯，但我不断遇到以下错误

```
Exception: source is null for getProperty(null, "agent")    
ognl.OgnlRuntime.getProperty(OgnlRuntime.java:2203) 
```

这是我的html页面中的代码

```
<tr>
          <td valign="center" align="right" height="30"><span class="label1"> <span key="agentDeletionSalesParentActivityType" />&nbsp;:&nbsp;</span></td>
          <td valign="center" align="left" height="30"><select jwcid="agentDeletionSalesParentActivityType@ActivityTypePropertySelection" regions="ognl:{activity.agent.region}" emptyOption="true" disabled="ognl:disabled" value="ognl:parentActivityType" /></td>
        </tr>
          <tr>
            <td valign="center" align="right" height="30"><span class="label1"> <span key="agentDeletionSalesChildActivityType" />&nbsp;:&nbsp;</span></td>
            <td valign="center" align="left" height="30"><select jwcid="agentDeletionSalesChildActivityType" regions="ognl:{activity.agent.region}" emptyOption="true" disabled="ognl:disabled" value="ognl:childActivityType" parent="component:agentDeletionSalesParentActivityType" /></td>
          </tr> 
```

这是我的java代码

```
@Persist
public abstract ActivityType getParentActivityType();
public abstract void setParentActivityType(ActivityType parent);

@Persist
public abstract ActivityType getChildActivityType();
public abstract void setChildActivityType(ActivityType child);

@Component(id="agentDeletionSalesChildActivityType", type="ActivityTypePropertySelection")
public abstract ActivityTypePropertySelection getChildActivityPropertySelection(); 
```

如果您需要更多代码，我会很乐意将其放上去（保持较小，以免将代码堆积到页面中），任何人都知道为什么会返回此异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:31:20.570

这似乎是说该`activity`对象在此为空：

```
regions="ognl:{activity.agent.region}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T10:56:53.837

不确定您是否设法解决了这个问题，但我遇到了这个问题。

你的配置和我的区别在于嵌套对象引用

```
regions="ognl:{activity.agent.region}" 
```

由于您的例外状态：

```
Exception: source is null for getProperty(null, "agent") 
```

根据我的经验，这意味着这`activity`确实是空的，正如@Stephen C 所说。

我收到的例外是：

```
Exception: source is null for getProperty(null, "question") 
```

这是我的配置。希望您能从中获得一些见解。

SetSecurityQuestions.page

```
<component id="securityQuestion1Dropdown" type="PropertySelection">
    <binding name="model" value="securityQuestion1Model"/>
    <binding name="displayName" value="message:security_question_1"/>
    <binding name="value" value="securityQuestion1.question"/> <!-- the offending line -->
</component> 
```

SetSecurityQuestions.html

```
<div class="formline">
    <span class="formtext">
         <span jwcid="@company:FieldLabelWithColon" 
               field="component:securityQuestion1Dropdown" 
               title="Security Question 1" 
               key="security_question1">Security Question 1</span>
        <span class="mandatory">*</span>
    </span>
    <select jwcid="securityQuestion1Dropdown" tabindex="1"/>
</div> 
```

SetSecurityQuestions.java

```
@Persist("session")
@InitialValue("new com.org.net.SecurityQuestion()") // the solution
public abstract SecurityQuestion getSecurityQuestion1();
public abstract void setSecurityQuestion1(SecurityQuestion securityQuestion1); 
```

希望有帮助。

# cakephp - CakeDC 搜索插件分页不起作用

> ID：12818159
> 
> 赞同：0
> 
> 时间：2012-10-10T11:23:19.993
> 
> 标签：cakephp, cakedc

您好我目前正在为我的 CakePHP（2.2 应用程序）使用 CakeDC 搜索插件。

搜索工具本身工作正常，但是在搜索分页之前我无法获得结果或页面上显示的数据。

这是我的代码

模型：

```
 // Configure Meio file uploader
var $actsAs = array(
    'MeioUpload.MeioUpload' => array(
        'filename' => array(
            'allowedMime' => array('image/jpeg', 'image/pjpeg', 'image/png', 'application/pdf'),
            'allowedExt' => array('.jpg', '.jpeg', '.png', '.pdf'),
            'maxSize' => '8 Mb'
        )
    ),
    'Search.Searchable'
);

// Search plugin filters
public $filterArgs = array(
    'title' => array('type' => 'like'),
    'live' => array('type' => 'value'),
    'search' => array('type' => 'like', 'field' => 'FaqArticle.description'),
    'error' => array('type' => 'like'),
    'description' => array('type' => 'like')
); 
```

控制器：

```
// Search plugin
public $components = array('Search.Prg');
public $presetVars = true; // using the model configuration

public function admin_index() {

$this->Prg->commonProcess();
    $this->paginate = array('conditions' => $this->FaqArticle->parseCriteria($this->passedArgs));
    $this->set('faqArticles', $this->paginate());

    // Count all live articles for intro text
    $this->set('liveArticles', $this->FaqArticle->find('count', array('conditions' => array('FaqArticle.live' => '1')
    )));

    // Count all articles for intro text
    $this->set('countedArticles', $this->FaqArticle->find('count'));

    // Set searched for details
    $this->set('searchedFor', $this->passedArgs);

    // Set layout
    $this->layout = 'admin';
} 
```

看法：

```
<div class="pagination">
    <ul>
    <?php
        echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
        echo $this->Paginator->numbers(array('tag' => 'li', 'separator' => '', 'currentClass' => 'active', 'modulus' => '5'));
        echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
    ?>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:35:39.837

这段代码：

```
public $components = array('Search.Prg');
public $presetVars = true; // using the model configuration 
```

应该在您的控制器中，而不是您的模型中。模型没有“组件”。控制器具有“组件”。并检查 Serach 插件的 doco - $filterArgs 进入模型（您已正确完成），但 $presetVars 进入控制器。

不要将 $presetVars 设置为空数组。只需将它从您的模型移动到您的控制器。正如您在模型中所做的那样，它应该在顶部声明为公共 var，并且不应在 admin_index 方法中声明。

# java - Cobertura + Junit

> ID：12818160
> 
> 赞同：1
> 
> 时间：2012-10-10T11:23:21.473
> 
> 标签：java, ant, build, junit, cobertura

我对与 Ant 脚本有关的 cobertura 有疑问。我已经阅读了 StackOverflow 上的这两篇文章： [SONAR - Measure Code Coverage using Cobertura](https://stackoverflow.com/questions/7747587/sonar-measure-code-coverage-using-cobertura) and [Bamboo + sonar.dynamicAnalysis=reuseReports = 0% Rules Compliance](https://stackoverflow.com/questions/8081246/bamboo-sonar-dynamicanalysis-reusereports-0-rules-compliance)

此外，我在互联网上搜索了我的问题的解决方案。现在我希望你能帮助我。

最初的情况：我有一个 Ant 脚本来编译一个库，然后是一个测试目标。现在我添加了 cobertura。一段时间后，我发现类和 ser 文件都已存储。该报告也会生成，但没有覆盖。但现在的问题是 JUnit 测试不起作用。可以在 xml 中找到以下错误消息：

```
<testcase classname="com.***.***.***.***.***Test" name="test16" time="0.0">
<error message="com/***/***/***/***/***Rule" type="java.lang.NoClassDefFoundError">java.lang.NoClassDefFoundError: com/***/***/***/***/***Rule
at com.***.***.***.***.***Test.setUp(Unknown Source)
at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138) 
```

我目前在 Ant 脚本中使用以下代码：

```
<project name="MainLIB" default="vbuild" basedir="./">
<path id="path.additionaltasks">
    <fileset dir="../BUILD/antlib">
        <include name="cobertura.jar" />
        <include name="log4j-1.2.9.jar" />
        <include name="asm-3.0.jar" />
        <include name="asm-tree-3.0.jar" />
        <include name="jakarta-oro-2.0.8.jar" />
    </fileset>
</path>
<taskdef resource="tasks.properties" classpathref="path.additionaltasks" />

<path id="path.LIB">
    <fileset dir="lib" includes="**/**.jar" />
</path>

<path id="path.UNITTEST">
    <path refid="path.LIB" />
    <pathelement path="build/cobertura/classes" />
    <pathelement path="build/classes" />
    <pathelement path="build/test-classes" />
</path>

<property name="dir.build" value="build" />
<property name="dir.build.classes" value="${dir.build}/classes" />
<property name="dir.build.cobertura" value="${dir.build}/cobertura" />
<property name="dir.build.cobertura.classes" value="${dir.build.cobertura}/classes" />
<property name="dir.build.test.classes" value="${dir.build}/test-classes" />
<property name="dir.build.test.report" value="${dir.build}/test-reports" />
<property name="dir.build.dist" value="${dir.build}/dist" />

<target name="vbuild" depends="build,test" description="Build and run tests" />

<target name="build" description="Compile classes and create .jar file in build/dist">

    <delete dir="${dir.build}" />
    <mkdir dir="${dir.build.classes}" />

    <javac srcdir="src" classpathref="path.LIB" verbose="false" destdir="${dir.build.classes}" includeantruntime="false" includejavaruntime="false" debug="true">
    </javac>

    <mkdir dir="${dir.build.dist}" />

    <jar jarfile="${dir.build.dist}/${jar.name}.jar" basedir="${dir.build.classes}">
    </jar>
</target>

<target name="test" description="Compile and Run jUnit Tests">

    <mkdir dir="${dir.build.test.classes}" />
    <mkdir dir="${dir.build.test.report}" />

    <javac srcdir="test" classpathref="path.UNITTEST" verbose="false" destdir="${dir.build.test.classes}" includeantruntime="false" includejavaruntime="false">
    </javac>

    <delete dir="${dir.build.cobertura}" />
    <mkdir dir="${dir.build.cobertura}" />
    <mkdir dir="${dir.build.cobertura.classes}" />
    <cobertura-instrument todir="${dir.build.cobertura.classes}" datafile="${dir.build.cobertura}/cobertura.ser">
        <fileset dir="${dir.build.classes}" />

    </cobertura-instrument>

    <junit printsummary="yes">
        <classpath>
            <!--<pathelement path="build/cobertura/classes" />-->
            <path refid="path.UNITTEST" />

        </classpath>
        <formatter type="xml" />

        <batchtest todir="${dir.build.test.report}">
            <fileset dir="${dir.build.test.classes}">
                <include name="**/*Test.class" />
            </fileset>
        </batchtest>
    </junit>

    <cobertura-report format="xml" datafile="${dir.build.cobertura}/cobertura.ser" destdir="${dir.build.cobertura}/" />
    <cobertura-report format="html" datafile="${dir.build.cobertura}/cobertura.ser" destdir="${dir.build.cobertura}/" />
</target> 
```

问题是，这些类位于 build/cobertura/classes 目录中。而且我想不通，为什么Junit，找不到课程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:34:49.797

你的类路径：

```
 <classpath>
        <!--<pathelement path="build/cobertura/classes" />-->
        <path refid="path.UNITTEST" />

    </classpath> 
```

包含：

```
<path id="path.LIB">
    <fileset dir="lib" includes="**/**.jar" />
</path>

<path id="path.UNITTEST">
    <path refid="path.LIB" />
    <pathelement path="build/cobertura/classes" />
    <pathelement path="build/classes" />
    <pathelement path="build/test-classes" />
</path> 
```

但它也需要 cobertura 罐子，您在`path.additionaltasks`. Cobertura 使用字节码操作来检测类文件。这些文件仍然需要 cobertura.jar 依赖项才能工作。
要修复它，请将其添加`path.additionaltasks`到 junit：

```
 <classpath>
        <!--<pathelement path="build/cobertura/classes" />-->
        <path refid="path.UNITTEST" />
        <path refid="path.additionaltasks" />
    </classpath> 
```

# flash - 在 flash exe air 应用程序中播放 flv 视频

> ID：12818161
> 
> 赞同：2
> 
> 时间：2012-10-10T11:23:26.500
> 
> 标签：flash, apache-flex, air, flex3

我已将 flv 视频嵌入到 HTML 文件中，当我在浏览器中运行它时，它可以正常播放。我已经使用 air 应用程序创建了一个 exe 文件，我想通过它运行该 flv 视频并显示一些图像，其中图像和 flv 位于同一文件夹中。我在 xml 文件中给出了 flv 和图像的路径。但是当我通过 exe 运行它时，所有图像都会显示，但 fvl 没有播放。有人可以电话原因吗？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:39:11.713

这似乎是空气中的错误，请查看此线程： [http ://forums.adobe.com/message/3718996](http://forums.adobe.com/message/3718996)

您需要文件的绝对路径

```
var File = window.runtime.flash.filesystem.File;
flashVars.setAttribute("value","vid=" + new File(File.applicationDirectory.resolvePath("anFlv.flv").nativePath).url); 
```

# javascript - Mootools：当元素/div不存在时如何停止显示和错误

> ID：12818164
> 
> 赞同：0
> 
> 时间：2012-10-10T11:23:34.303
> 
> 标签：javascript, mootools

js 代码在页脚中，当 div 不在页面上时，它会显示错误。这只发生在我使用`$('id-of-the-div')`not时`$$('#id-of-the-div')`。并且错误停止了孔脚本。

js代码

```
window.addEvent('domready', function() {  

    $('id-of-the-div').addEvent('click', function() { 

          alert('click');
        });

}); 
```

错误

```
Uncaught TypeError: Cannot call method 'addEvent' of null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:38:26.883

元素引用返回一个对象或 null。如果为空，则不真实。您可以像检查当前上下文对象的任何属性一样检查它：

模式一：

```
var el = $('someel');
if (el) { 
    el.addEvent({ ... });
}

// or 
if (!el) return;

// or 
el && el.addEvent({ }); 
```

模式 2，通过将事件分配给父元素来使用事件委托

```
$('main').addEvent('click:relay(#otherid)', function(event, otherel){

}); 
```

模式 3：当没有项目时，集合不会迭代：

```
$$('#someid').addEvent('click', fn); 
```

找不到时，上面根本不会调用 addEvent 。

模式 1 是最常见的

# sql - extractValue 和右外连接 - Oracle SQL

> ID：12818165
> 
> 赞同：0
> 
> 时间：2012-10-10T11:23:39.327
> 
> 标签：sql, xml, oracle, outer-join

我对 SQL 查询有一点（至少我希望如此）问题。这是我的加入

```
WHERE obj.mod_type = 'SER'
   and obj.wrk_id=wrk_lang.id(+)
   and extractvalue(value(shm),'/*/@xmi:id','xmlns:xmi="http://www.omg.org/XMI"') = extractvalue(value(shm_con),'/*/@source')(+) 
```

它给了我一个“ORA-00936：缺少表达式”

当我删除第二个外部连接时，它可以正常工作（也可以使用常规连接）。

能 帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:48:50.390

在我看来，这实际上是一个 LEFT 外连接 - 在旧式 Oracle 语法中，(+) 放在连接的*可选*侧，而在 ANSI 语法中，*需要*的侧（左或右）在 JOIN 中被调用规范 - 有关示例，请参阅[此 AskTom 参考](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:6585774577187)。因此，扩展@FlorinGhita 的建议以使用 ANSI JOIN 语法（并对语句的其余部分进行一些假设），我们会得到类似

```
SELECT *
  FROM OBJ
  LEFT OUTER JOIN WRK_LANG
    ON (obj.wrk_id = wrk_lang.id and
        extractvalue(value(obj.shm),'/*/@xmi:id','xmlns:xmi="http://www.omg.org/XMI"') = 
          extractvalue(value(wrk_lang.shm_con),'/*/@source')
  WHERE obj.mod_type = 'SER'; 
```

分享和享受。

# c# - NHibernate - 暂时关闭身份

> ID：12818166
> 
> 赞同：5
> 
> 时间：2012-10-10T11:23:41.323
> 
> 标签：c#, nhibernate, sql-server-ce, nhibernate-mapping, mapping-by-code

我正在使用 SQL CE 运行 NHIbernate 解决方案。我正在映射一个表中的字段，如下所示。但是，为了运行一些数据导入，我需要能够暂时关闭身份，以便我可以使用现有密钥导入数据，然后在导入完成后重新打开身份。

我试过直接从这样的解决方案运行 SQL 查询：

```
session.CreateSQLQuery(@"SET IDENTITY_INSERT [Article] ON"); 
```

但这似乎没有效果。

有没有办法暂时打开和关闭它？

```
Property(x => x.ArticleId, m =>
{
    m.NotNullable(true);
    m.UniqueKey("UQ_Article_ArticleId");
    m.Column(cm => cm.SqlType("INT IDENTITY"));
    m.Generated(PropertyGeneration.Insert);
    m.Insert(true);
    m.Update(false);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:11:03.723

SQL 应该是一条路，但相信你已经把`IDENTITY_INSERT`.

要允许插入标识列，您需要将其转换为`ON`.

```
session.CreateSQLQuery(@"SET IDENTITY_INSERT [Article] ON"); 
```

完成批量插入后，将其转回`OFF`.

```
session.CreateSQLQuery(@"SET IDENTITY_INSERT [Article] OFF"); 
```

[有关MSDN](http://msdn.microsoft.com/en-us/library/ms188059.aspx)的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:31:29.203

最后，这很简单。

sql 行应该是这样的：

```
session.CreateSQLQuery(@"SET IDENTITY_INSERT [Article] ON").ExecuteUpdate(); 
```

它需要在交易中。但是，每次交易您只能在一张桌子上执行此操作，因此并没有真正帮助我太多。

# django - django tastepie 包含来自模型的 def 作为资源的属性之一

> ID：12818167
> 
> 赞同：0
> 
> 时间：2012-10-10T11:23:40.980
> 
> 标签：django, tastypie

我有：

```
class Item(models.Model):
    # some fields like name,  quantity

    def get_first_image(self):
        instance = ItemImage.objects.filter(parent_id = self.id)[0]
        return instance.images

class ItemImage(models.Model):
    # parent with foreignkey to Item and an ImageField to store images 
```

如何使用 sweetpie 检索 get_first_image 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:39:31.960

您可以尝试将自定义资源与每个字段脱水一起用于您想要“合成”的字段，例如

```
# Imports etc omitted

class ItemResource(ModelResource):
    # some fields like name,  quantity
    first_image = fields.ImageField(readonly=True)

    def dehydrate_first_image(self):
        instance = ItemImage.objects.filter(parent_id = self.id)[0]
        return instance.images 
```

[您可以在美味派资源文档中](http://django-tastypie.readthedocs.org/en/latest/resources.html)获取有关资源的更多信息

这个“每个字段脱水”，再加上一个只读字段，就像你上面的那个应该做的那样。

# php - PHP安全写入文本文件？

> ID：12818173
> 
> 赞同：2
> 
> 时间：2012-10-10T11:23:56.867
> 
> 标签：php

一个 HTML 表单、一个 php 文件和一个文本文件。

该表单有一个输入框，它使用 GET 或 POST 将输入的字符串发送到 PHP 文件。PHP 文件使用 , 将字符串写入文本文件`fopen 'a'`，`fwrite`并且`fclose`根本不进行任何清理。

文本文件设置为权限 777，并且与其他文件位于同一文件夹中。

这里有任何安全问题吗？有人可以使用表格发送会造成任何损害的东西吗？如果是，是什么？

如果txt文件设置为666呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:34:05.140

# 从不执行

根据这个文件的用途，应该不会有太大的风险。只要确保文件**永远不会被执行**。

这意味着，永远不要`eval()`将此文件的内容，或将其更改为一个`.php`或任何其他可执行文件。

但是，如果要在页面上写入内容或供用户查看，则这样做会有安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T20:20:22.583

我通常使用 3 种方法来提高写入文件的安全性。1) 将文件从 webroot 中移出并移到一些访问受限的文件夹中，例如 cgi-bin。文件的路径和任何密码也应该保存在 webroot 之外。2）然后您通过将敏感数据包含在您的页面上来包含它。因此，如果 PHP 解析器失败，人们只会看到变量名而看不到详细信息。3) 如果您正在发帖或访问正在编写的文件，您还可以仔细检查值并删除可能导致问题的字符、脚本等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:30:48.153

从网络安全的角度来看，只要文本文件的路径被硬编码或以任何其他方式保护，我看不到任何问题。尽管文件丢失或只读（是的，它可能发生，例如，如果文件系统被管理员以只读方式挂载），您还没有说任何关于会发生什么的事情。

话虽如此，这个用例也完全没用，因为文本文件仅用作数据接收器。从不读取的数据接收器是无用的。当您想从文件中读取时，可能会出现问题。

# c# - 将 SQL 文本转换为 Linq 命令

> ID：12818177
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:24:28.920
> 
> 标签：c#, sql, linq

我有一个文本框，用户将在其中输入一些 SQL：

例如：`SELECT * FROM Customers;`

我知道 LINQ 看起来像这样：

```
 var query = 
 from c in Customers.AsEnumerable()
 select c; 
```

我遇到的问题是用户要输入一个字符串，所以我需要将此字符串转换为 LINQ 命令：

例如。

我将如何将“ `FROM`”转换为从 --> 文本到命令。

换句话说，我会想要类似的东西：

```
 var query = 
 toCommand("from") c in Customers.AsEnumerable()
 toCommand("select") c; 
```

**忘了提到客户存储在数据表中。**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:28:23.380

你的问题有点不清楚，但你可能需要一些类似的东西

```
var query = 
   from c in Customers
   where c.Name == usersuppliedstring
   select c; 
```

# android - android - ProgressBar 在 HTC ICS 中不起作用

> ID：12818178
> 
> 赞同：1
> 
> 时间：2012-10-10T11:24:29.793
> 
> 标签：android, android-progressbar

ProgressBar 视图在 htc 野火 s(2.1) 中运行良好。但在 Htc one V(4.1) 的情况下，它不能正常工作意味着没有显示进度条。请任何人都可以帮助我。

```
Code

<?xml version="1.0" encoding="utf-8"?>
< LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="180dip"              
  android:layout_height="80dip" 
  android:layout_gravity="center_vertical|center_horizontal"
  android:background="@drawable/findinggifts"
  >

  < ProgressBar 
  android:id="@+id/progress"         
  style="@android:style/Widget.ProgressBar.Small"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"       
  android:layout_gravity="center_vertical|center_horizontal"
  android:paddingTop="45dip"
  /> 

</LinearLayout> 
```

![在此处输入图像描述](../Images/cc02b0dff595eded76a6b13b87f71350.png)

# c# - 在 Entity Framework Power tools beta 2 中首次使用逆向工程代码后移动生成的类

> ID：12818194
> 
> 赞同：2
> 
> 时间：2012-10-10T11:25:43.787
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

我正在`Entity Framework 5.0`使用`Entity Framework Powertools beta 2`. 我们有一个不允许更改的数据库，因此使用逆向工程师代码优先选项来创建类。生成的类放置在映射下方的 Models 文件夹中。

是否有一种安全/最佳的方式将这些生成的类移动到他们自己的项目中，将`DbContext-type`类和映射文件类留在 Models 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:52:10.943

将实体移动到您喜欢的任何项目和/或命名空间都没有问题。只需将文件复制到您想要的位置。但是，您可能想要进入并更改每个文件的名称空间（尽管不是特别需要）。

您当然必须将对新程序集的引用添加到父项目中。

# android - 漫画阅读器无法从 SD 卡获取目录

> ID：12818199
> 
> 赞同：0
> 
> 时间：2012-10-10T11:26:04.113
> 
> 标签：android, android-mapview

我正在使用此代码链接[https://github.com/Juanvvc/ComicViewer](https://github.com/Juanvvc/ComicViewer) 来研究漫画阅读器。但是当我使用它并调试时。我收到一条消息，例如“请选择漫画目录”，当我单击“确定”按钮时，我没有得到任何目录列表，因此我可以选择任何目录进行漫画显示。

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:35:32.440

实现所需功能的最简单方法可能是使用[viewpager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，您可以在其中加载所有图像，并且您将能够在它们之间滚动。您应该查看[视图之间的水平滑动](http://android-developers.blogspot.it/2011/08/horizontal-view-swiping-with-viewpager.html) 您可以使用[android Gallery](http://developer.android.com/reference/android/widget/Gallery.html)但这已经已弃用，因此不再使用它是不明智的。关于缩放和捏合能力，您必须自己实现。[单指变焦](http://developer.sonymobile.com/2010/05/18/android-one-finger-zoom-tutorial-part-1/)可能是学习的良好开端。此外，您的问题非常广泛，您应该改进，首先在该主题上记录自己，并仅在您遇到代码问题时才在这里提问。您没有显示任何研究迹象，也没有显示任何代码。

# java - 在 birt 报告中根据 if 条件显示数据

> ID：12818203
> 
> 赞同：1
> 
> 时间：2012-10-10T11:26:26.687
> 
> 标签：java, jakarta-ee, reporting, birt

我需要根据 . 显示几个值`if condition`。`birt report`有什么办法吗？
我使用 XML 作为一个`datasource`，所以如果标签不为空，我想在报告中显示它。
这是我需要在报告中添加的 xml 示例

```
<wr:if><wr:out/></wr:if><wr:if><wr:out/></wr:if><wr:if><wr:out/></wr:if> 
```

这里`<wr:out/>`对应于我用作数据集的 XML 中的标签。

我想知道如何在 birt 报告中显示这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:58:04.763

您可以分配属性可见性

```
<list-property name="visibility">
  <structure>
     <property name="format">all</property>
     <expression name="valueExpr" type="javascript">your evaluation here</expression>
  </structure>
</list-property> 
```

当表达式计算为真时，元素被隐藏。

看看这个教程

[http://digiassn.blogspot.com.au/2007/03/birt-hide-report-table-when-no-data-is.html](http://digiassn.blogspot.com.au/2007/03/birt-hide-report-table-when-no-data-is.html)

# reporting-services - 在 ssrs 的 Max() 中使用 runningtotal()

> ID：12818208
> 
> 赞同：0
> 
> 时间：2012-10-10T11:26:35.860
> 
> 标签：reporting-services

我正在使用具有 3 行组和 2 列组的矩阵构建报告。现在我想根据行组计算列的总和。我搜索了解决方案，但没有找到。我能想到的唯一解决方案是使用 RunningValue 函数

现在我的运行值列输出就像

```
| Original Values || Running Value |
|-----------------||---------------|
|     6676        ||   6777        | 
|.................||---------------|
|     6859        ||   13625       |
|.................||---------------|
|     5320        ||   66830       | 
```

现在我想要结果 66830 以便我可以用它来计算其他值所以任何人都可以告诉我

如何在 MAX 函数中使用 RunningTotal 函数

我正在做的是

```
=MAX(runningvalue(Fields!NET.Value,sum,"matrix1_MIX")) 
```

但它给了我一个错误

```
 An error occurred during local report processing.
    The defination of the report'Report1' is invalid.
    The Value expression for the textrun 'Textbox106.paragraphs[0]TextRuns[0]' contains an 
aggregate function (or RunningVale or RowNumber functions) in the argument to another 
aggregate functiion (or RunningValue). Aggregate functions cannot be nested inside other 
aggregate functions. 
```

ssrs 中是否有解决此问题的方法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:08:50.537

一个 RunningValue by sum 的最大值与相同值的常规 SUM 相同，取整个组的范围。尝试这样的事情：

```
=Sum(Fields!NET.Value, "matrix1_MIX") 
```

仔细考虑您在第二个参数中使用的内容，这是获得所需数字的关键。

# objective-c - UIGestureRecognizer 阻止 tableview 滚动

> ID：12818215
> 
> 赞同：4
> 
> 时间：2012-10-10T11:27:05.383
> 
> 标签：objective-c, ios, uitableview, uigesturerecognizer

我有一张带有静态单元格的表格。其中一个单元格中有一个视图，上面有一个平移手势识别器。

当我向下滚动我的表格视图时，当我到达带有平移手势识别器的视图的单元格时，滚动似乎不起作用。如果我触摸视图之外（到侧面或顶部或底部）它可以工作并且我可以滚动。我的手势识别器中有一个 if 语句，用于测试某个区域是否已被触摸，如果是则执行操作。

我已经看过这个问题（http://stackoverflow.com/questions/3295239/uigesturerecognizer-blocking-table-view-scrolling）但是将cancelsTouchesInView设置为NO不起作用，我没有任何地方设置状态属性和使用`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer` 我不知道从哪里获取“otherGestureRecognizer”或调用该方法的对象的方法。

我假设我不想把我的手势识别器作为第一个参数，而 tableview 的滚动手势识别器作为 otherGestureRecogniser，对吗？如果是这样，我该如何得到它？

```
UIPanGestureRecognizer *windPanGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveWindHandle:)];

[self.windRangeView addGestureRecognizer:windPanGesture]; 
```

然后在我的 moveWindHandle 中：

```
 -(void)moveWindHandle:(UIPanGestureRecognizer *)gesture
{
    gesture.cancelsTouchesInView = NO;
    isMovingHandle = [self isPoint:startedTouchAt insideHandle:_toHandleWindImageView];
    if(isMovingHandle) {

        if(gesture.state == UIGestureRecognizerStateBegan) {
            //do stuff
        }
    } 
    else
    {
        //i want it to ignore this gesture and just scroll like normal if that is what hte user did
    }
} 
```

我已将 tableviewcontroller 设置为 UIGestureRecognizerDelegate，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T12:01:33.203

你不会是那个打电话的人`-gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`。该方法由系统调用。您需要将表格视图控制器设置为窗口平移手势的委托。

```
windPanGesture.delegate = self; 
```

此时，当您进行平移时，系统将调用委托方法`-gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`，其中您的手势识别器作为一个参数，滚动视图的手势识别器作为另一个参数。

* * *

**更新**

您可能还想实现 -gestureRecognizerShouldBegin: 方法，如果您不在*某些区域*之一，则返回 NO 。

# sql - sql查询获取多列数据

> ID：12818216
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:27:07.343
> 
> 标签：sql, oracle

我在数据库中有几列表说有 option1-option15 列的选择。如果用户没有选择它，则列中的数据可以为空，否则它将为“y”。我只需要获取数据所在的那些列'你'。

```
column_id choice1 choic2 choice3......15

   1         null  y      null
   2         y     null   null 
```

如何使用给定列 ID 的 sql 查询来获取此信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:37:32.070

您正在尝试以与设计相反的方式使用数据库表。

当您应该根据某些条件从字段中选择数据时，您正在尝试在数据存在时从表中选择字段（列）。此外，当您在系统中添加了另一个选项时会发生什么？我假设您必须更改表格设计和使用表格的所有过程/应用程序才能识别这个新选项。

最好创建一个包含选项作为行的表，然后为用户选择所有行。从您的示例数据（每个用户只选择一个选项）中，您将有两行：

```
user_id option_number
------- -------------
      1             2
      2             1 
```

如果用户 1 要选择更多选项，则添加更多行：

```
user_id option_number
------- -------------
      1             2
      1             5
      1            10
      1            15
      2             1 
```

该表的主键是`(user_id, option_number)`确保用户不能两次选择相同的选项。与具有所有可能选项编号的查找表（或约束）的关系将防止选择无效选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:49:34.883

您没有指定您使用的 Oracle 版本。但是您可以使用 a`UNPIVOT`或 a查询此数据`UNION ALL`：

`UNPIVOT`版本（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!4/93433/1)）：

```
select *
from yourtable
unpivot
(
  val
  for col in (choice1, choice2, choice3)
) u
where val = 'y' 
```

`UNION ALL`版本（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!4/93433/3)）：

```
select *
from
(
  select columnid, 'choice1' col, choice1 val
  from yourtable
  union all
  select columnid, 'choice2' col, choice2 val
  from yourtable
  union all
  select columnid, 'choice3' col, choice3 val
  from yourtable
) x
where val = 'y' 
```

执行此过程可以使数据在一列中轻松访问，而不是在多列中访问。

# iphone - 富 UITextView (iOS 6) 中未显示文本属性

> ID：12818217
> 
> 赞同：2
> 
> 时间：2012-10-10T11:27:08.457
> 
> 标签：iphone, ios, ios6, uitextview, nsattributedstring

我正在尝试为 iOS 6 UITextView 中的一些初始文本设置字体颜色。在 UI 6 模拟器中运行时，会出现视图，但不会呈现属性。我错过了什么吗？

```
NSAttributedString *as = [[NSAttributedString alloc] initWithString:boilerText
    attributes:[NSDictionary dictionaryWithObjectsAndKeys:
      NSForegroundColorAttributeName, [UIColor redColor] ,
      NSUnderlineStyleAttributeName,
          [NSNumber numberWithInt:  NSUnderlineStyleSingle],nil]
      ];

_descriptionView.attributedText = as; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T11:34:06.223

该方法说dictionaryWithObjectsAndKeys。你已经把你的对象和钥匙颠倒了。尝试这个：

```
NSAttributedString *as = [[NSAttributedString alloc] initWithString:boilerText
     attributes:[NSDictionary dictionaryWithObjectsAndKeys:
     [UIColor redColor], NSForegroundColorAttributeName, 
     [NSNumber numberWithInt: NSUnderlineStyleSingle], NSUnderlineStyleAttributeName,
     nil]]; 
```

# filter - 处理两个输入引脚以使用 Directshow 过滤器进行处理

> ID：12818218
> 
> 赞同：0
> 
> 时间：2012-10-10T11:27:11.913
> 
> 标签：filter, switch-statement, directshow

我正在研究directshow过滤器并寻找一个带有两个输入引脚和一个输出的过滤器主要想法是我想编写可以从一个输入引脚切换到另一个输入引脚的开关过滤器请帮助我，我是directshow过滤器的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:45:51.127

没有这种标准的过滤器。编写您自己的或寻找第三方解决方案。您要求非常具体的功能（很可能您必须对其操作做出更多假设），因此您可能不得不最终使用自己的自定义过滤器。

# vb.net - wp7找不到密钥

> ID：12818220
> 
> 赞同：0
> 
> 时间：2012-10-10T11:27:14.887
> 
> 标签：vb.net, key

当我想按下按钮时，它会给我错误“找不到密钥”。我想要变量“dzien”的默认值 = 0。

```
Imports System.IO.IsolatedStorage

Partial Public Class _1
Inherits PhoneApplicationPage
Private dzien As Integer

Public Sub New()
    InitializeComponent()

End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button2.Click
    dzien = CInt(IsolatedStorageSettings.ApplicationSettings("dzien"))
    Try
        dzien = CInt(IsolatedStorageSettings.ApplicationSettings("dzien"))
    Catch ex As KeyNotFoundException
        dzien = 0
    End Try
    If dzien = 0 Then
        TextBox1.Text += "dzien jest 0 !"
    End If
End Sub
Private Sub Class_1_Unloaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Unloaded
    IsolatedStorageSettings.ApplicationSettings("dzien") = dzien
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:05:44.733

删除第一`dzien = CInt(IsolatedStorageSettings.ApplicationSettings("dzien"))`行。它应该如下所示：

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button2.Click
    Try
        dzien = CInt(IsolatedStorageSettings.ApplicationSettings("dzien"))
    Catch ex As KeyNotFoundException
        dzien = 0
    End Try
    If dzien = 0 Then
        TextBox1.Text += "dzien jest 0 !"
    End If
End Sub 
```

# html - 在 Metro Apps 中使用推送通知显示具有时间间隔的磁贴数据？

> ID：12818221
> 
> 赞同：2
> 
> 时间：2012-10-10T11:27:17.373
> 
> 标签：html, microsoft-metro, tiles, winjs

我有 Metro 应用程序，在其中我实现了推送通知概念以获取单个消息。如果我收到超过 1 个通知，我的应用程序磁贴仍然只能显示 1 个通知（msg）。我无法显示多个通知特定时间。意味着我是否需要编写任何额外的代码来在我的磁贴上显示多个通知。如果是这样，我应该在哪里编写客户端或服务器端？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:39:58.927

有几种方法可以查看更新，根据您的最终目标，您最终可能会在客户端或服务器上实现代码，或两者兼而有之。

对于您描述的场景，您需要在每次需要新的磁贴通知时使用 Windows 通知服务来推送通知。通常，这是通过在云中运行服务（网站或 Windows Azure 服务或类似服务）来完成的，该服务调用 Windows 通知服务并在发生感兴趣的事情时向应用程序发送磁贴更新。

如果您想要多个通知在磁贴上循环，可以通过调用 TileUpdater 类的 enableNotificationQueue 方法来启用：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue.aspx)

根据下面的评论， enableNotificationQueue 适用于任何通知源。但是，如果您想从远程服务中提取信息，而不是使用推送，则可以使用计划轮询作为使用远程信息更新磁贴的方法，如下所述：

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh761476.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh761476.aspx)

结合对 enableNotificationQueue 的调用，它还可以启用您正在寻找的场景。

# php - 检查 $id = 列值，否则

> ID：12818227
> 
> 赞同：1
> 
> 时间：2012-10-10T11:27:41.697
> 
> 标签：php, mysql

我想检查值 $id 是否已存在于列 id 中。如果它确实我想调用一个查询，否则我想做另一个查询。

看起来很容易，但对我来说不是。

这是重要的代码

```
if (isset($_GET['data'])) {
$data = json_decode($_GET['data'], true);
$id = $data['id'];
$latitude = $data['latitude'];
$longitude = $data['longitude'];
$timestamp = $data['timestamp'];

$result = mysql_query("SELECT * FROM locatie WHERE id='$id'");
if("id='$id'")
{
$query = "Update locatie 
SET     longitude = '$longitude',
   latitude = '$latitude',
   timestamp = '$timestamp'
WHERE id = '$id'";}
else
//Als het nummer bekend is

{
//Als het een nieuw nummer is
$query = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('%s', '%s', '%s', '%s') ", mysql_real_escape_string($id) , mysql_real_escape_string($longitude),  mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp));}

$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Free resultset
mysql_free_result($result);
} 
```

但是现在代码不会做任何事情，我知道这两个查询都可以单独工作，但当我从 SELECT From locatie... 时就不行了。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:29:30.360

您可以简单地使用：

`if( $result && mysql_num_rows($result) )`

因为您正在检查查询中的`id`已经存在的。

由于您没有检查是否存在有效的结果检查，因此我也将其添加到 if 中。

注意：所有 mysql* 函数都已弃用，请改用 pdo 函数的 mysqli。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:33:45.903

看到你正在更新它是否存在，或者如果它不存在则插入你可以使用[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

示例（应该有效但未经测试）

```
$sql = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('%s', '%s', '%s', '%s') ", mysql_real_escape_string($id) , mysql_real_escape_string($longitude),  mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp));
$sql .= " ON DUPLICATE KEY UPDATE longitude=VALUES(longitude), latitude=VALUES(latitude),timestamp=VALUES(timestamp)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:30:15.237

mysql_num_rows() 获取结果中的行数 [http://in2.php.net/manual/en/function.mysql-num-rows.php](http://in2.php.net/manual/en/function.mysql-num-rows.php)

```
if($result && mysql_num_rows($result)>0){
   //$id already exist in the column id. 

}else {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:31:46.187

```
$result = mysql_query("SELECT * FROM locatie WHERE id='$id'");
if(mysql_num_rows($result) > 0)
//do something 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T11:56:39.843

如果您使用**REPLACE**，则不需要执行任何*id*检查。

例如：

```
REPLACE INTO locatie (id, longitude, latitude, timestamp) VALUES (?,?,?,?) 
```

详情： [http ://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T12:30:57.843

您可以这样使用查询

```
if($result = mysql_query("SELECT * FROM locatie WHERE id='$id'"))
{
    // Found
}
else
{
    // Not found
} 
```

仅当资源不为空时，它才会返回 true。

# sql - 将 Oracle 时间戳更新为当前日期

> ID：12818229
> 
> 赞同：8
> 
> 时间：2012-10-10T11:27:53.647
> 
> 标签：sql, oracle, timestamp, sql-update

我在 Oracle 数据库中有一个 TIMESTAMP(6) 字段。该字段的值是格式

```
DD/MM/YYYY HH:MM:SS.000000000 PM 
```

如何将此值更新为当前时间戳？

[指向类似问题的链接：][在 oracle 中更新日期值](https://stackoverflow.com/questions/9337935/update-date-value-in-oracle)

我关注了这个链接，但是下面的查询需要很长时间才能执行。

```
update table_name set start_time = to_char(to_date(start_time, 'yyyy/mm/dd-hh:mi:ss:ff3'), '2012/10/10-19:30:00:00') where column='Q' 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T11:33:48.310

[时间戳](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref158)是一个时间点，它没有格式。要将此类字段更新为当前时间戳，请使用[`SYSTIMESTAMP`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions192.htm#SQLRF06125)或[`CURRENT_TIMESTAMP`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions045.htm#SQLRF00629)（分别为服务器的日期/时间和会话的日期/时间）：

```
UPDATE your_table 
   SET your_column = systimestamp
 WHERE ... 
```

如果查询花费了异常的时间（比具有相同 WHERE 子句的类似 SELECT 长得多），最可能的原因是：

1.  您正在更新的行被另一个会话锁定（对这些行执行 SELECT FOR UPDATE NOWAIT 将确保*您*拥有锁定）。
2.  您有执行额外工作的触发器，
3.  您正在更新由非索引外键引用的列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T11:34:41.290

为什么你不只是

```
update table_name 
set start_date = systimestamp 
where column='Q' 
```

如果您怀疑表上有锁，则需要检查一些表：`dba_locks`,等。当用户在没有or的情况下意外阻塞了某些东西时`v$session`，`v$session_blockers`这些很有用，但是您应该能够查看是否存在阻塞锁来自您的应用程序的架构。您应该在纸上模拟所有场景。`update``commit``rollback`

# windows - IUpdate::BundledUpdates 究竟检索了什么？

> ID：12818231
> 
> 赞同：0
> 
> 时间：2012-10-10T11:27:58.753
> 
> 标签：windows, winapi, desktop-application, windows-update, wmic

当我们尝试使用 WUA API 检索 Windows 更新信息时，以下是我遵循的过程。但我对 IUpdate::BundledUpdates 属性有点困惑。

1.  创建一个 IUpdateSearcher
2.  根据搜索条件进行搜索。我提供的搜索条件为“IsHidden=1 或 IsInstalled=1”
3.  您将获得 IUpdateCollection 作为搜索结果。
4.  在 IUpdateCollection 中使用 get_Item，我检索了每个更新 (IUpdate) 并打印了所需的值（在我的例子中是 KB 编号）。
5.  但同样在 IUpdate 中，您有一个 BundledUpdate 属性，它为 IUpdateCollection 提供了 get_BundledUpdates() 方法。当我迭代 BundledUpdates 的结果时，我没有得到任何结果。

我在检索捆绑更新时遗漏了什么吗？（或）我指定的标准是否包括捆绑更新作为 IUpdateCollection 的第一个结果集的一部分？

同样在 MSDN 中，WUA API 中的每个接口都缺少示例，有人可以提供任何资源来清楚地解释 WUA API 中的每个接口的作用吗？

添加了 C++ 控制台应用程序的完整源代码：

```
#include <wuapi.h>
#include <iostream>
#include <wuerror.h>

using namespace std;

int main()
{

    HRESULT hr;
    hr = CoInitialize(NULL);

    IUpdateSession* iUpdate;
    IUpdateSearcher* searcher;
    ISearchResult* results;
    BSTR criteria = SysAllocString(L"IsInstalled=1 or IsHidden=1 or IsPresent=1");

    hr = CoCreateInstance(CLSID_UpdateSession, NULL, CLSCTX_INPROC_SERVER,
        IID_IUpdateSession, (LPVOID*)&iUpdate);
    hr = iUpdate->CreateUpdateSearcher(&searcher);

    wcout << L"Searching for updates ..."<<endl;
    hr = searcher->Search(criteria, &results);
    SysFreeString(criteria);

    switch(hr)
    {
    case S_OK:
        wcout<<L"List of applicable items on the machine:"<<endl;
        break;
    case WU_E_LEGACYSERVER:
        wcout<<L"No server selection enabled"<<endl;
        return 0;
    case WU_E_INVALID_CRITERIA:
        wcout<<L"Invalid search criteria"<<endl;
        return 0;
    }

    IUpdateCollection * updateList;
    IUpdate *updateItem;
    LONG updateSize;
    BSTR updateName;

    results->get_Updates(&updateList);
    updateList->get_Count(&updateSize);

    if (updateSize == 0)
    {
        wcout << L"No updates found"<<endl;
    }

    for (LONG i = 0; i < updateSize; i++)
    {
        IStringCollection *KBCollection;
        LONG KBCount;
        updateList->get_Item(i, &updateItem);
        updateItem->get_KBArticleIDs(&KBCollection);
        KBCollection->get_Count(&KBCount);
        for(int k=0;k<KBCount;k++)
        {
            BSTR KBValue;
            KBCollection->get_Item(k,&KBValue);
            wcout << L"KB" << KBValue << endl;
        }

        //Retrieve the bundled updates
        IUpdateCollection *updtCollection;
        updateItem->get_BundledUpdates(&updtCollection);
        LONG updtBundledCount;
        updtCollection->get_Count(&updtBundledCount);
        for(LONG j=0;j<updtBundledCount;j++)
        {
            cout<<"Bundled KBs" <<endl;
            IUpdate *bundledUpdateItem;
            updtCollection->get_Item(j,&bundledUpdateItem);
            bundledUpdateItem->get_KBArticleIDs(&KBID);
            if(KBID != NULL)
            {
                LONG KBCount;
                BSTR KBIDValue;

                KBID->get_Count(&KBCount);
                for(LONG j=0;j<KBCount;j++)
                {

                    wcout << "KB" <<(KBIDValue) << endl;
                    temp.setKBID(KBIDValue);
                }
            }
        }
    }

    wcout << L"Total KB Count : " << updateSize << endl;
    CoUninitialize();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:03:41.353

我只是修复您的代码以检索捆绑更新。

```
#include "stdafx.h"
#include <wuapi.h>
#include <iostream>
#include <wuerror.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    HRESULT hr;
    hr = CoInitialize(NULL);

    IUpdateSession* iUpdate;
    IUpdateSearcher* searcher;
    ISearchResult* results;
    BSTR criteria = SysAllocString(L"IsInstalled=1 or IsHidden=1 or IsPresent=1");

    hr = CoCreateInstance(CLSID_UpdateSession, NULL, CLSCTX_INPROC_SERVER, IID_IUpdateSession, (LPVOID*)&iUpdate);
    hr = iUpdate->CreateUpdateSearcher(&searcher);

    wcout << L"Searching for updates ..."<<endl;
    hr = searcher->Search(criteria, &results); 
    SysFreeString(criteria);

    switch(hr)
    {
    case S_OK:
        wcout<<L"List of applicable items on the machine:"<<endl;
        break;
    case WU_E_LEGACYSERVER:
        wcout<<L"No server selection enabled"<<endl;
        return 0;
    case WU_E_INVALID_CRITERIA:
        wcout<<L"Invalid search criteria"<<endl;
        return 0;
    }

    IUpdateCollection *updateList;
    IUpdate *updateItem;
    LONG updateSize;
    BSTR updateName;

    results->get_Updates(&updateList);
    updateList->get_Count(&updateSize);

    if (updateSize == 0)
    {
        wcout << L"No updates found"<<endl;
    }

    for (LONG i = 0; i < updateSize; i++)
    {
        IStringCollection *KBCollection;
        LONG KBCount;
        updateList->get_Item(i,&updateItem);
        updateItem->get_Title(&updateName);
        wcout<<i+1<<" - "<<updateName<<endl;

        IUpdateCollection *updtCollection;
        LONG updtBundledCount;        
        //Retrieve the bundled updates
        updateItem->get_BundledUpdates(&updtCollection);
        hr = updtCollection->get_Count(&updtBundledCount);
        if ((updtBundledCount>0) && (hr ==S_OK))
        {
            wcout << L"Bundled Updates " <<(updtBundledCount) << endl;
            for(LONG j=0;j<updtBundledCount;j++)
            {
                IUpdate *bundledUpdateItem;
                BSTR bundledName;
                updtCollection->get_Item(j,&bundledUpdateItem);   
                bundledUpdateItem->get_Title(&bundledName);
                wcout<<L"    "<<j+1<<" - "<<bundledName<<endl;
            }
        }
    }
    ::CoUninitialize();
    wcin.get();
    return 0;
} 
```

# ruby-on-rails-3 - Rails 3 - 将月份添加到日期字符串

> ID：12818232
> 
> 赞同：0
> 
> 时间：2012-10-10T11:28:02.790
> 
> 标签：ruby-on-rails-3, date

我正在尝试在日期中添加几个月。

我尝试了多种转换日期字符串和添加月份的方法，但我无处可去，非常快。

我有`start_date`哪个是日期字符串“YYYY-MM-DD”，我有`item.product.sub_period`哪个是我想添加的月数。

我尝试了很多方法，但不确定将字符串转换为可以修改的格式的正确方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:35:34.280

尝试以下操作：

```
Date.strptime(start_date, "%Y-%m-%d") + item.product.sub_period.months 
```

只要确保`item.product.sub_period`返回一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:40:49.977

尼尔，我相信你可以做到这一点：

```
require 'date'
x = 3
a = Date.new(2012,2,3)
b = a >> x 
```

只要你的日期是一个日期。

# javascript - 在javascript中获取浏览器类型

> ID：12818233
> 
> 赞同：2
> 
> 时间：2012-10-10T11:28:04.613
> 
> 标签：javascript, html, browser, html5-video, user-agent

我需要根据浏览器类型加载不同的电影格式。具体来说，如果用户使用的是 firefox，那么我需要加载 .ocv 视频。

我试过使用：

```
alert(navigator.appName); 
```

但这总是在 chrome 和 firefox 中返回“Netscape”？

有更好的选择吗？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:48:10.127

**停止！！！**所有提出的解决方案都是网络崩溃的原因！

不要假设浏览器，基于您从 userAgent 中正则表达式的名称，可以做某事或不只是因为它是 IE、Firefox 或 Chrome。UserAgent 可以而且是伪造的！手动进行特征检测或使用诸如[Modernizr之类的功能齐全的东西](http://modernizr.com/)

您想要做的事情是通过 javascript 提供的。检查浏览器是否可以播放html5视频；

```
var canHtml5Video=function(){
    return !!document.createElement("video").canPlayType;
} 
```

要检查浏览器是否可以播放某种类型（mp4、ogg），请使用音频/视频元素的[canPlayType](http://www.w3schools.com/html5/av_met_canplaytype.asp)方法。

```
var elem=document.getElementsByTagName("video")[0];
if (elem.canPlayType("video/mp4")===""){
    //handle firefox and all browser that cant pay the mp4 royality fee
}
else{
    //handle mp4
} 
```

Alternativ，您可以将多个源元素添加到视频元素。浏览器将选择最适合的。

```
<video>
    <source src="http://....mp4" type="video/mp4" />
    <source src="http://....ocv" type="video/ogg" />
</video> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:30:46.033

尝试警报（navigator.userAgent）；

欲了解更多信息：[http ://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:30:56.140

你想使用一些 [这样的](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:53:03.970

用于`navigator.userAgent`获取浏览器详细信息

```
if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
    // Inside firefox
}

if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
    // Inside chrome
}

if (navigator.userAgent.toLowerCase().indexOf("msie") > -1) {
    // Inside IE
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T11:32:46.497

即：

```
var ie = $.browser.msie; 
```

对于火狐：

```
var mozilla = $.browser.mozilla; 
```

对于铬：

```
var chrome = $.browser.webkit && window.chrome; 
```

野生动物园：

```
var safari = $.browser.webkit && !window.chrome; 
```

# c# - 从 C# 中的 SOAP 信封中提取 XML

> ID：12818248
> 
> 赞同：2
> 
> 时间：2012-10-10T11:28:34.157
> 
> 标签：c#, xml, soap

我在 SOAP 信封中收到来自 Web 服务的响应，如下所示：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
  <ProcessTranResponse xmlns="http://www.polaris.co.uk/XRTEService/2009/03/">
    <ProcessTranResult xmlns:a="http://schemas.datacontract.org/2004/07/XRTEService" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <a:PrintFormFileNameContents i:nil="true"/>
      <a:ResponseXML>response_message</a:ResponseXML>
    </ProcessTranResult>
  </ProcessTranResponse>
</s:Body> 
```

我想得到`response_message`一个字符串变量。我试着做

```
XDocument doc = XDocument.Parse(Response);
XNamespace xmlnsa = "http://schemas.datacontract.org/2004/07/XRTEService";
var ResponseXML = doc.Descendants(xmlnsa + "ResponseXML"); 
```

当我使用 watch 时，我在`ResponseXML -> Results View[0] -> Value`我的 中看到`response_message`，但我无法弄清楚从 C# 获取 Value 的下一步是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:38:26.157

[`XContainer.Descendants`](http://msdn.microsoft.com/en-us/library/bb360635.aspx)返回元素的集合。然后你应该尝试这样的事情：

```
foreach (XElement el in ResponseXML)
{
    Console.WriteLine(el.Value);
} 
```

或者，如果您知道始终只有一个响应，则可以执行以下操作：

```
XDocument doc = XDocument.Parse(Response);

XNamespace xmlnsa = "http://schemas.datacontract.org/2004/07/XRTEService";

XElement ResponseXML = (from xml in XMLDoc.Descendants(xmlnsa + "ResponseXML")
                        select xml).FirstOrDefault();

string ResponseAsString = ResponseXML.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-30T09:25:13.907

您可以采用多种解决方案来满足您的目的，而您可能想介绍或不介绍 xml 内容的结构。

**静态姿态**

你可以简单地使用这个：

```
XmlDocument _doc = new XmlDocument();
doc.LoadXml(_stream.ReadToEnd()); 
```

然后找到所需的数据，如下所示：

```
doc.LastChild.FirstChild.FirstChild.LastChild.InnerText; 
```

**读取xml结构**

您可以编写一些额外的代码行来引入命名空间和其他 xml 内容以查找/映射可用数据，方法是查看[extracting-data-from-a-complex-xml-with-linq](https://stackoverflow.com/questions/13073260/extracting-data-from-a-complex-xml-with-linq)

# c++ - 用于持久对象的 C++ 指针

> ID：12818250
> 
> 赞同：0
> 
> 时间：2012-10-10T11:28:36.343
> 
> 标签：c++, pointers

我正在使用 C++ 开发游戏。我在很多地方读到过，基本上应该不惜一切代价避免在 C++ 中使用指针。我仍在学习 C++，对此感到有些困惑。

我想要一个持久的玩家对象，并且在游戏会话期间存在。该对象将包含玩家库存、玩家统计信息等。

玩家的物品栏基本上只是一个包含物品对象的向量（我创建的“物品”类）。

如果有人可以澄清以下内容，它将消除我的困惑：

1.  当人们说“指针不好”时，他们是指标准 C++ 指针吗？智能指针被认为是“好的”吗？
2.  除了指针之外，我还能如何访问分配在堆上的持久对象？
3.  如果我想要一种在玩家库存中找到物品的方法，但如果找不到该物品则返回 NULL，那么在没有指针的情况下如何实现呢？由于从“findItem”返回的项目应该是可编辑的（例如更改项目计数），目前我返回一个指向向量中项目的指针。这是对指针的有效使用吗？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:32:15.610

1.  是的，*原始*的 C 风格指针被认为是不好的。智能指针没问题。在某些情况下，您**需要**使用（智能）指针 - 多态对象的集合，例如：`std::vector<std::unique_ptr<IObject> >`.

2.  持久对象不必在堆上。它可以是一个具有静态存储持续时间的对象，甚至可以是一个*寿命足够长*的自动对象- 即您可以在`main()`.

3.  多种方式 - 您可以抛出异常（可能过于苛刻）或`std`采用返回迭代器的方式 - 类似于`.end()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:54:44.240

我个人建议使用共享指针（来自 boost 或 std）。不要使用原始指针。C++ 还有其他智能指针，比如 auto_ptr，但现在几乎没有人使用它们。如果要在堆上分配一些东西，请执行以下操作：

```
std::shared_ptr<ClassA> A(new ClassA()); 
```

这比使用原始指针更安全。当您超出范围时，共享指针将向您保证它指向的对象将被销毁。原始指针没有这样做，这意味着您必须自己手动销毁所有内容

# sql - 多个外连接语义

> ID：12818258
> 
> 赞同：11
> 
> 时间：2012-10-10T11:29:06.517
> 
> 标签：sql, sql-server-2008, outer-join

一些SQL代码：

```
SELECT *
FROM table1 tab1 
   LEFT OUTER JOIN table2 tab2 ON (tab1.fg = tab2.fg)
   LEFT OUTER JOIN table4 tab4 ON (tab1.ss = tab4.ss)
   INNER JOIN table3 tab3 ON (tab4.xya = tab3.xya)
   LEFT OUTER JOIN table5 tab5 ON (tab4.kk = tab5.kk) 
```

我知道不同类型的 JOIN 做什么，但我想知道的是：对于每个 JOIN，哪个表承担“LEFT”表的角色？会`table1`一直有“LEFT”表的作用吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T11:44:06.597

它们按从上到下的顺序处理，所有连接都与前面的 FROM 子句的“整体”相关联。

所有的事情都是平等：

*   tab1 是 OUTER JOIN 的强制伙伴，可选伙伴 tab2
*   以上是 OUTER JOIN 的强制伙伴与可选伙伴 tab4
*   以上和tab4都是INNER JOIN中的强制伙伴
*   以上是 OUTER JOIN 与可选合作伙伴 tab5 的强制合作伙伴

但是，这个查询的问题

```
SELECT *
FROM table1 tab1 
LEFT OUTER JOIN table2 tab2 ON tab1.fg = tab2.fg
LEFT OUTER JOIN table4 tab4 ON tab1.ss = tab4.ss
INNER JOIN table3 tab3 ON tab4.xya = tab3.xya
LEFT OUTER JOIN table5 tab5 ON tab4.kk = tab5.kk 
```

是不是与 table3 的 INNER JOIN 使用了需要 tab4 参与的条件，使其实际上是保留左侧记录的强制链接，因此总共 tab1/tab4/tab3 必须成功加入，tab2 和 tab5 可选。

# node.js - 在运行时向 mongoose 模型添加默认值

> ID：12818260
> 
> 赞同：1
> 
> 时间：2012-10-10T11:29:10.853
> 
> 标签：node.js, mongoose

我想在我的猫鼬模型中为某些字段设置默认值。诀窍是我不想将这些值存储在数据库中，而是在模型初始化时添加它们。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:04:58.727

您可以为从数据库加载模型实例时运行的模式定义`'init'` [中间件](http://mongoosejs.com/docs/middleware.html)函数。这应该让您可以操作实例以根据需要添加默认值。

另请参阅[此相关问题](https://stackoverflow.com/questions/12221368/mongoose-how-to-tap-schema-middleware-into-the-init)以获取更多详细信息，因为文档对此非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:55:41.223

也许是一个json文件？使用 require('path/to/json' ) 您可以访问它并获取值。我实际上正在做类似的事情，但使用相同的 JSON SCHEMA 是为了验证目的而构建的。

# nhibernate - FluentNHibernate：忽略 Id 列名

> ID：12818261
> 
> 赞同：0
> 
> 时间：2012-10-10T11:29:18.450
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping, automapping

FluentNHibernate：1.3.0.733
NHibernate：3.3.1.4000

我正在**尝试设置**Id 列的列名，但**它似乎被忽略了**。

* * *

**编辑：**
**找到解决方案。属性重新声明（新修饰符）是问题（见答案）。**

* * *

我正在使用带有约定和覆盖的 AutoMapping。

覆盖：

```
public class OrderHeadMapping : IAutoMappingOverride<OrderHead>
{
    public void Override(AutoMapping<OrderHead> mapping)
    {
        mapping.Schema("[database].[dbo]");
        mapping.Table("OrderHeads");            

        mapping.Id(x => x.Id, "desiredColumnName")              
            .Column("desiredColumnName")
            .GeneratedBy.UuidString();
        ...
    }
} 
```

此代码被执行，但列名保持为“Id”。

我已经将映射导出到目录以查看结果：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" schema="[database].[dbo]" name="OrderHead, Core, Version=1.0.4666.19686, Culture=neutral, PublicKeyToken=null" table="OrderHeads">
    <cache usage="read-write" />
    <id name="Id" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Id" />
      <generator class="assigned" />
    </id>
    ...
  </class>
</hibernate-mapping> 
```

我已经在整个解决方案中搜索了“.Id(”和“.Column(”以确保它不会被意外重置，但没有任何结果涉及设置/覆盖 id 列名。所以现在我有点迷失了.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:45:50.600

我终于找到了问题：
我在描述中遗漏的一件事是我有两个基本实体：

```
public abstract class Entity
{
    protected object _id;

    public virtual object Id
    {
        get { return _id; }
        protected internal set { _id = value; }
    }
}

public abstract class Entity<TKey> : Entity
{
    public Entity()
    {
        _id = default(TKey);
    }
    new public virtual TKey Id 
    {
        get { return (TKey)_id; }
        protected internal set { _id = (TKey)value; } 
    }
    ...
} 
```

问题是 FluentNHibernate**两次处理重新定义的属性**：Entity.Id 和 Entity<>.Id 最终用基类版本的映射**覆盖所需**的映射。所以我必须向上**走继承树**来检查这个成员是否是**最顶层的重写**（如果有的话）。

现在我`ShouldMap`在我的实现中处理方法中的问题`DefaultAutomappingConfiguration`：

```
public override bool ShouldMap(Member member)
{
    var res = base.ShouldMap(member);

    if (res == true)                
    {
        var originalDeclaringType = GetOriginalDeclaringType(member.MemberInfo);
        ...
        if(member.Name == "Id")
        {
            if (GetTopMostRedefinedMember(member.MemberInfo) != member.MemberInfo.DeclaringType)
                return false;
        }
    }           
    ...
    return res;
} 
```

GetTopMostRedefinedMember 为：

```
private Type GetTopMostRedefinedMember(MemberInfo member)
    {
        List<Type> types = new List<Type>();

        Type type = member.ReflectedType;
        while (type != null)
        {
            types.Add(type);
            type = type.BaseType;
        }

        foreach (var t in types)
        {
            var tmp = t.GetMember(member.Name, BindingFlags.Public |
                      BindingFlags.NonPublic |
                      BindingFlags.Instance |
                      BindingFlags.DeclaredOnly);
            if (tmp.Length != 0)
            {
                type = t;
                break;
            }
        }
        return type;
    } 
```

免责声明：此代码未经彻底测试。

我希望有一天有人可以免于调试时间！

华拉巴

# performance - 加速 maven 战争插件

> ID：12818262
> 
> 赞同：11
> 
> 时间：2012-10-10T11:29:19.433
> 
> 标签：performance, maven, maven-war-plugin

maven 插件对我来说工作得很慢。在我的项目中，webapp 文件夹有近 15000 个小文件（图像、jsp、css 等）。当我用 maven 组装它时，它首先将所有文件复制到`target/myProject-1.0.0`目录中，然后从中构建`myProject-1.0.0.war`文件。复制过程需要 10 分钟，构建`.war`需要 2 分钟。

`.war`正如我所见，如果文件将直接从 webapp 文件夹中组装，则构建可能会快得多。有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-03T21:35:41.943

在 war 插件的配置部分，使用 warSourceExcludes 排除不需要的文件和目录。在下面的示例中，目录 components 和 node_modules 将被排除在爆炸战争以及最终战争之外。就我而言，这将构建时间从 3 分钟减少到 14 秒。

```
 <configuration>
              <warSourceExcludes>
                components/**,
                node_modules/**
              </warSourceExcludes>
        </configuration> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T08:09:16.723

我建议您将使用`war:inplace`目标[`maven-war-plugin`](http://maven.apache.org/plugins/maven-war-plugin/inplace-mojo.html)与自定义[`maven-antrun-plugin`](http://maven.apache.org/plugins/maven-antrun-plugin/index.html)任务一起使用。

将`war:inplace`在 WAR 源目录中生成 webapp。它将在`webapp`.

`antrun:run`可以根据您的特殊要求进行定制以创建战争。

这可能会提高性能，因为您拥有的大多数资源文件仍将位于`webapp`文件夹中并且不会被复制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T10:02:11.320

只想提一下，有一个[`useCache`](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#useCache)设置可以显着提高性能（约 3 分钟而不是 12 分钟）。然而，它只适用于开发，而不适用于应该始终进行干净构建的 CI 服务器。

# c# - 使用c#线程池或任务调用函数并获取返回值

> ID：12818263
> 
> 赞同：1
> 
> 时间：2012-10-10T11:29:21.687
> 
> 标签：c#, task, threadpool

我是 C# 线程的新手，在实现基本任务时需要帮助。我目前正在使用下面的代码（不使用线程），它运行良好。这个概念是遍历表的记录，在函数中传递一些表参数，除了返回值，然后用返回值更新表。

```
cmd = new OleDbCommand { Connection = con, CommandText = "Select recid,col_A,col_B from tblData"};
dr = cmd.ExecuteReader();

if (dr.HasRows)
{
   cmdRec = new OleDbCommand { Connection = con };
   while (dr.Read())
    {
    sReqResult = DoProcessing(dr["col_A"].ToString(), dr["col_B"].ToString(), dr["PARAM2"].ToString());
        sSql = "update tblData set STATUS='" + sReqResult + "' where recid = '" + dr["recid"] + "'";
    cmdRec.CommandText = sSql;
    cmdRec.ExecuteNonQuery(); 
    }
}
dr.close(); 
```

我想使用线程来实现上述功能以加快进程，这样我就可以并行运行最多 25 个线程，而不是依次处理记录。但要求是从函数中获取返回值并在表中更新相同的值。我已经阅读了线程池和任务（在 .net 4.0 中），但我不确定如何实现它们。请用一些示例代码指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:54:30.687

有了这个答案，我暗示您想自己创建异步实现，而不是使用现有的工具/库。

通常，您不能简单地从异步上下文中“返回”一个值。相反，您可以有一个带有某些“返回”参数（即结果）的回调。

带有线程池的概念示例：

```
if (dr.HasRows)
{
    object someDataToWorkWith = "data";

    Action<object> resultCallback = (theResults) =>
    {
        // Executed once the workItem is finished.
        // Work with and/or present the results here.
    };

    WaitCallback workItem = (dataOrSomeDetails) =>
    {
        // This is the main async-part. Work with or fetch data here.
        // You can also access any variables from the containing method.
        // When finished working, execute callback:
        resultCallback("someResults");
    };

    ThreadPool.QueueUserWorkItem(workItem, someDataToWorkWith);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:36:35.340

为什么不使用异步[ado.net 功能](http://www.codedigest.com/Articles/ADO/173_ADONet_20_Features_-_Asynchronous_SqlCommand_Execution.aspx)？

# servlets - 如何给出从 servlet 运行 jar 文件的路径？

> ID：12818264
> 
> 赞同：1
> 
> 时间：2012-10-10T11:29:21.827
> 
> 标签：servlets

我在从我的 servlet 运行 jar 文件时遇到问题。我必须在 Eclipse 的 web 项目中的一个单独的 sevlet 中运行另一个带有参数的 java 应用程序的 jar 文件。

我使用代码作为

```
Runtime.getRuntime().exec("java -jar myproject.jar param1 param2 abc.xml"); 
```

在上面的代码中，在使用参数 param1 和 param2 运行上面的 jar 文件时，它会将输出存储在 abc.xml 中。但问题是我不知道如何在代码中给出 myproject.jar 的路径。

我将 myproject.jar 复制到项目目录，它没有提供任何输出。我试过使用我不知道如何给出 jar 文件的路径以及将 jar 文件放在哪里以及输出文件将在哪里。

此代码适用于简单的核心 java 应用程序，我将 myproject.jar 文件放在核心 java 项目目录中，并在核心 java 项目目录中创建输出文件 abc.xml。

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:17:43.387

这不是调用类路径中某些 JAR 中包含的 Java 代码的正确方法（我假设您已将它放在`/WEB-INF/lib`. 只需直接导入并调用该 JAR 文件中包含的代码即可。

```
import com.packagefromjar.SomeMainClassInJar;

// ...

SomeMainClassInJar.main(new String[] { "param1", "param2", "/path/to/abc.xml" }); 
```

或者，如果该 API 设计良好，则直接使用其入口类而不是调用`main()`方法。

# excel - 如何使用 vba 在图中自动生成系列

> ID：12818265
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:29:23.020
> 
> 标签：excel, vba

我已经编写了通过按钮单击生成图形的 vba 代码。它工作正常，但问题是我想添加更多系列。

我的代码是

```
Dim ch As Chart
Set ch = ActiveWorkbook.Charts.Add
Set ch = ch.Location(Where:=xlLocationAsObject, name:=assume)
With ch
.ChartType = xlXYScatterLines
 With .Parent
  .Top = Columns(b).Offset(0, 4).Top
  .Left = Columns(b).Offset(0, 4).Left
  .name = "ch"
 End With
End With
Dim sh As Series
 Set sh = ch.SeriesCollection(1)
  With sh
 .Values = Columns(b).Offset(0, 0)
 .XValues = Columns(b).Offset(0, -2)
 End With 
```

这`assume`是保存工作表名称的变量.. 和 in`columns(b)`是`b`保存列名的变量。

如果我单击该按钮，它将生成图形，如果第二次单击该按钮，它将再次生成图形。

我只想要第一个图中的图表线我不想创建多个图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:54:23.167

您需要将其分解为两个单独的代码，1 个用于创建原始图表，另一个用于添加系列。

```
'===== First Chart Run ============

Dim ch As Chart
Set ch = ActiveWorkbook.Charts.Add
Set ch = ch.Location(Where:=xlLocationAsObject, Name:=assume)

With ch

    .ChartType = xlXYScatterLines

    With .Parent
        .Top = Columns(b).Offset(0, 4).Top
        .Left = Columns(b).Offset(0, 4).Left
        .Name = "ch"
    End With

End With

Dim sh As Series
Set sh = ch.SeriesCollection(1)

With sh
    .Values = Columns(b).Offset(0, 0)
    .XValues = Columns(b).Offset(0, -2)
End With

'===== Add More Series ============

Set ch = ActiveWorkbook.Charts("ch")
ch.SeriesCollection.Add _ 
    source:=assume.Range(Columns(b).Offset(0,0),Columns(b).Offset(0,-2)) 
```

# c - 最大 malloc 大小

> ID：12818266
> 
> 赞同：0
> 
> 时间：2012-10-10T11:29:27.460
> 
> 标签：c, windows-7, size, malloc

我在win7上工作，需要使用malloc分配2个缓冲区，每个660M字节第一次分配都可以，第二次缓冲区分配失败。我的磁盘上有 670G 空闲内存 最大 malloc 大小是多少？上述问题的原因可能是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:28:37.170

最大有效`malloc()`大小是适合进程堆状态的大小。堆可以被分段（例如，有一个堆有 600M 空闲内存块，然后是 20M 已用块，然后又是 600MB 空闲块 - 尽管有 1.2GB 空闲内存，但您无法获得 650M）。

此外，AFAIK，加载 DLL 的 Windows 机制将每个库绑定到某个地址，因此内存可能已经被 DLL 碎片化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:47:29.867

你告诉你有 670G 的可用内存，但那是硬盘空间。

正在运行的程序需要 RAM 中的**内存**，并且您的 RAM 内存可能低于您所需的内存。因此，您在使用 malloc 分配内存时遇到错误。

# c# - 死锁分析工具 C#

> ID：12818270
> 
> 赞同：0
> 
> 时间：2012-10-10T11:29:38.920
> 
> 标签：c#, deadlock

有人可以帮助我使用任何开源工具检测程序中的死锁吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:35:48.273

记住我猜是因为你没有提供任何代码或任何东西。但是，它在 Visual Studio 中应该非常简单。假设您的应用程序正在运行并且遇到死锁，这通常意味着多个线程在不使用`lock(...)`操作的情况下卡在共享变量的读/写上。

因此，如果您在 Visual Studio 中**暂停**调试并转到`Threads`窗口，您应该能够双击每个线程并查看它们暂停的行，这至少会告诉您哪些入口点被锁定。修复它将是一个完全不同的故事，因为您需要弄清楚它是如何发生的，但这应该可以为您提供您正在寻找的信息。

[`lock(...)`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)在某些情况下，您可能需要通过操作使用锁定。

# c - 如何创建这个公式？

> ID：12818273
> 
> 赞同：1
> 
> 时间：2012-10-10T11:29:46.903
> 
> 标签：c, pointers, matrix, memory-address

我进行了培训/作业以创建适用于 C 的以下公式：

> 如何计算整数矩阵中元素的地址，如果矩阵的起始地址已知，则大小已知并且元素的行和列已知。

假设矩阵是 a[b][c]。那么起始地址是`a`或者等价的`&a[0][0]`

行数为 b。

列数为 c。

每个元素都应该有大小`sizeof(int)`，所以地址就是`a + b*sizeof(int) + a*sizeof(int)`

这个公式正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:39:01.663

假设您有`int array[b][c]`并且需要找到 element 的地址`array[i][j]`。

```
a + i * c * sizeof(int) + j * sizeof(int) 
```

其中，`c * sizeof(int)`似乎是一个行大小，所以一个通用的公式是

```
array_start + i * row_size + j * item_size 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:41:35.120

假设数组以行为主，这意味着如果您有：

```
int array[N][M]; 
```

然后，首先你有`M` `int`s 对应于`array[0]`，然后你有`M` `int`s 对应于`array[1]`等等。

所以：

*   的地址`array[0][c]`由以下给出：`(char *)array + c * sizeof(int)`
*   的地址`array[1][0]`由以下给出：`(char *)array + 1 * M * sizeof(int)` 因为有`M`int for `array[0]`。
*   的地址`array[1][c]`由以下给出：`(char *)array + 1 * M * sizeof(int) + c * sizeof(int)`
*   的地址`array[2][0]`由以下给出：`(char *)array + 2 * M * sizeof(int)`
*   您现在可以希望看到这种模式。`array[r][c]`给出的地址`(char *)array + r * M * sizeof(int) + c * sizeof(int)` 是，`r * M`跳过第一`r`行，然后是`c`列。

您可以查看[此答案](https://stackoverflow.com/a/7307699/912144)以获取有关 2D 内存布局的更多说明。同样的答案还包含动态数组的内存布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:54:38.657

这是另一种思考方式：

首先使用这个方程计算那个元素的索引

```
i = c + r * w 
```

其中 c 是列，r 是行，w 是矩阵/二维数组的宽度（列数）

然后将它乘以整数的大小，得到元素相对于基地址的内存偏移量

```
offset = i * sizeof(int); 
```

最后，将其添加到基地址：

```
addr = base + offset 
```

所以公式是：

```
addr =  base + (c+r*w) * sizeof(int) 
```

# iphone - 如何仅为 iPhone 3Gs、4、4S 部署应用程序并跳过 iPhone5 支持？

> ID：12818274
> 
> 赞同：0
> 
> 时间：2012-10-10T11:29:49.970
> 
> 标签：iphone, build, app-store

我想将应用程序上传到应用程序商店进行审查，但似乎我还需要 iPhone 5 屏幕截图，但我没有为 iPhone 5 准备的应用程序。请问，我怎样才能只为 iphone 3gs、4、4s 部署应用程序？

我在 Targets/Build Settings/ **Architectures** Standard armv7 中找到了一些东西，而**Base SDK**是最新的 iOS 6.0。那是我必须改变的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:46:02.420

为了绝对清楚起见，Apple 于 2013 年 3 月 21 日发布了一项公告，指出从 2013 年 5 月 1 日开始，**必须**为配备 Retina 显示屏的 iOS 设备构建新的应用程序和应用程序更新，并且 iPhone 应用程序还必须支持 iPhone 5 上的 4 英寸显示屏。

[您可以在此处](https://developer.apple.com/news/?id=3212013b#top)查看公告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:43:24.610

你不能，只有在 iPhone5 发布之前提交的应用程序才能在新 iPhone 上以“iPhone 4 模式”运行。应用程序的所有更新和新提交的应用程序必须支持新的 4 英寸屏幕。

您不能在目标设置中排除 iPhone5，如果有办法做到这一点，Apple 就不会批准它。您可以取消对旧设备的支持，但永远不能取消对新设备的支持。

毕竟，Apple 希望尽可能多的应用程序尽快适应新格式，这就是你必须做的......别担心 - 如果你相当习惯于开发 iOS，你可以在就几个小时……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:45:41.023

我在 iPhone 5 发布后提交了一个应用程序，其中包含在 iPhone 5 上运行 letterboxed 的最新版本 XCode。只需从支持的架构中删除 armv7s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:33:18.403

最好的解决方案是为 iPhone 5 的显示屏正确准备您的应用程序。和不。更改基础 SDK 在这里无济于事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:45:58.930

Apple 表示，如果使用 4.5 之前的 Xcode 版本（因此使用 SDK 5.1 或更早版本）开发，他们仍将（当前）接受不支持特定 iOS 6 和 iPhone 5 的应用程序。以这种方式构建的应用程序明确不允许 568h 支持。

以这种方式构建的应用程序将在 5 上的信箱中运行，或者 iPad 用于仅旧版 iPhone 应用程序的类似 1X/2X 兼容性框。

# php - 如何创建基于两个 sql 查询的分页？(PHP)

> ID：12818275
> 
> 赞同：4
> 
> 时间：2012-10-10T11:29:52.827
> 
> 标签：php, sql, pagination

我有显示来自两个不同表的信息的页面，为此我有两个查询。这两个表之间没有相关信息。由于两个查询都可能包含大量信息，因此我需要创建分页。但是我不想要两个单独的分页，我只想要一个包含查询 1 和查询 2 的结果的分页。

我怎样才能做到这一点？

我唯一的想法是将两个查询的所有信息都提取到数组中，然后将数组合并为一个，然后基于该数组创建分页。这当然无助于节省资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:07:26.767

您可以使用联合 - 您要显示的列必须对齐，所以这样的事情应该可以工作：

```
select
  col1 col1_alias,
  col2 col2_alias,
  ...
from 
  table1
where
  ...

union

select
  col1,
  col2,
  ...
from
  table2
where
  ...
order by col1_alias, col2_alias
limit 10 
```

基本上，联合会将所有数据拉到一起，并且`order by`and`limit`将应用于整个结果集。

列的名称不需要在第二次选择中匹配，而是使用第一次选择中的列名`order by`（或创建别名，根据您的数据集，这可能更具可读性）。

# xamarin.ios - Monotouch 在 DialogViewController 中使用 UITabBarController

> ID：12818284
> 
> 赞同：1
> 
> 时间：2012-10-10T11:30:21.990
> 
> 标签：xamarin.ios, tabbarcontroller, dialogviewcontroller

目前在我的应用程序中，我有这样的设计：

-- 对话框视图控制器 1

-----DialogViewController 2

--------DialogViewController 3

------------TabBarController

--------------DialogViewController4

--------------DialogViewController5

--------------DialogViewController6

--------------DialogViewController7

问题在于对话视图控制器 4-7 打破了单点触控对话流程（可以这么说），因为 TabBarController 介于两者之间。当我创建对话框视图控制器 4-7 时，我需要在其构造函数中创建新的 Root，而 DVC 1-3 不需要。

使用这种方法，某些东西（例如广播组）在 DVC 4-7 中不起作用，例如它将显示广播组选择，但顶部没有导航栏。

我的问题是我能做些什么来解决这个问题？如果有意义，我可以在 DVC 中以某种方式使用 TabBarController 吗？或者我怎样才能将 DVC 4-7 “挂钩”回主“电路”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:44:25.517

根据[iOS HIG](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW52)

> 标签栏出现在屏幕的底部边缘，应该可以从应用程序中的每个位置访问

这意味着它应该是根，而不是嵌套在另一个控制器中。

# odbc - ODBC 到 Lotus Notes

> ID：12818288
> 
> 赞同：0
> 
> 时间：2012-10-10T11:30:35.290
> 
> 标签：odbc, lotus-notes

在 xpage 中，我想使用 odbc 从另一台服务器和系统导入数据（到 Lotus Notes 视图）我该怎么做？

（据我所知，NotesSQL 的作用正好相反）

我想我需要安装 DECS。但后来在帮助文件中我发现：

> 要加载 DECS 服务器任务，必须在 notes.ini 文件中设置实时扩展管理器库变量

Domino 在 linux 服务器上运行。那我的库变量是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:04:11.860

我认为 DECS 与此没有太大关系，特别是因为您正在谈论 XPages。正如这两个先前回答的问题所建议的那样，您可能应该使用 OpenNTF 扩展库：

*   [用于设计的 Lotus Notes XPages 和用于数据的 Oracle（或其他 RDBMS）](https://stackoverflow.com/questions/7401025/lotus-notes-xpages-for-design-and-oracle-or-other-rdbms-for-data)
*   [(Xpages) SOA 或直接数据库访问](https://stackoverflow.com/questions/7414822/xpages-soa-or-direct-database-access)

# html - 文本应始终位于图像框内

> ID：12818291
> 
> 赞同：0
> 
> 时间：2012-10-10T11:30:40.570
> 
> 标签：html, css

我有一个图像框，图像中的文本将动态生成。

请查看随附的屏幕截图以获取更多信息。

当有更多文本时，如何确保图像拉伸？

![在此处输入图像描述](../Images/3046c47fd8a2db92947197286cb6c74d.png)

```
.my-community-box{
        background: url('/assets/my-community-box.png') no-repeat !important;
        background-size: 100%;
        width: 287px;
        min-height: 474px;
        float: right;

        .my-community-details{
            background-color: @mild-gray;
            margin: 20px 10px 10px 10px;
            padding: 5px;

            ul{
                width: 250px;
                margin: 0 0 9px 0;
                li{

                }
            }

            a{
                color: @darker-green;
            }

            a:hover{
                text-decoration: none;
                color: @light-green;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:32:46.497

您将需要`background-repeat: repeat-y;`图像，但必须更改它。就它看起来而言，它是一个单一的图像 - 您必须裁剪它以具有顶部边框，并且图像的“主体”将是您想要垂直重复的部分。

或者，由于设计简单，您可以只使用 css`borders`

编辑也，正如一些评论所建议的，你应该向我们展示一些代码而不仅仅是一张图片，这将有很大帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:35:29.920

为什么不使用边框？

```
.my-community-box{
        background: #F3F3F2;
        width: 287px;
        min-height: 474px;
        float: right;
        border: 3px solid #C5C3C3;
}

.my-community-box-wrap{
        border-left: 2px solid #C2E2A0;
        border-right: 2px solid #C2E2A0;
        float: right;
} 
```

演示：http: [//jsfiddle.net/AWXHr/](http://jsfiddle.net/AWXHr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:35:40.330

使用 css 边框代替图像

```
 div{
    border:#333 solid 6px; border-radius:0 0 6px 6px; 
    box-shadow: 0px 0px 0px 2pt green;   
    height:auto;
    width:200px;
    background:#c1c1c1
}​ 
```

演示[http://jsfiddle.net/wYUFD/12/](http://jsfiddle.net/wYUFD/12/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:39:02.550

***[演示](http://tinkerbin.com/6CxmJ6gD)***

嗨现在习惯`background-size:cover;`或`max-width`

像这样

```
p{
 max-width:200px;
  border:solid 10px red;
  background:url('http://www.gravatar.com/avatar/eb71f65106648cf6618b10423e8b0451?s=32&d=identicon&r=PG') no-repeat;
  background-size:cover;
  color:#fff;
} 
```

***[演示](http://tinkerbin.com/6CxmJ6gD)***

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T11:43:07.227

我希望这对你有帮助

```
.my-community-details{
        background-color: @mild-gray;
        margin: 20px 10px 10px 10px;
        padding: 5px;
        max-width: //set what depends up on your image width
        max-height: //set what depends up on your image height
        overflow-y: auto; 
```

# objective-c - 在 Objective-C 中将八进制字符串转换为十进制？

> ID：12818305
> 
> 赞同：6
> 
> 时间：2012-10-10T11:31:18.917
> 
> 标签：objective-c, ios, cocoa-touch, base-conversion

我试图在 Objective-C 中进行二进制、八进制、十进制和十六进制之间的转换。我在将八进制转换为十进制时遇到问题。

我尝试了以下方法：

```
NSString *decString = [NSString stringWithFormat:@"%d", 077]; 
```

它工作正常，按预期返回 63，但我的八进制值是一个 NSString。我怎样才能告诉计算机它是八进制的？

我知道有一种叫做“scanHexInt:”的方法，我用来将十六进制转换为十进制，但似乎没有scanOctInt ...

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:34:32.070

最干净的解决方案可能是：

```
long result = strtol(input.UTF8String, NULL, 8); 
```

或者

```
long long result = strtoll(input.UTF8String, NULL, 8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T11:39:54.987

在 NSString 上定义一个类别（将其放在任何源代码模块的顶部或放入新的 .m/.h 文件对，@interface 放入 .h，@implementation 放入 .m）：

```
@interface NSString (NSStringWithOctal)
-(int)octalIntValue;
@end

@implementation NSString (NSStringWithOctal)
-(int)octalIntValue
{
    int iResult = 0, iBase = 1;
    char c;

    for(int i=(int)[self length]-1; i>=0; i--)
    {
        c = [self characterAtIndex:i];
        if((c<'0')||(c>'7')) return 0;
        iResult += (c - '0') * iBase;
        iBase *= 8; 
    }
    return iResult;
}
@end 
```

像这样使用它：

```
NSString *s = @"77";
int i = [s octalIntValue];
NSLog(@"%d", i); 
```

该方法返回一个整数，表示字符串中的八进制值。如果字符串不是八进制数，则返回 0。前导零是允许的，但不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:20:47.367

或者，如果你想下拉到 C，你可以使用`sscanf`

```
int oct;
sscanf( [yourString UTF8String], "%o", &oct ); 
```

# java-me - 具有多个组件的 LWUIT 表单

> ID：12818307
> 
> 赞同：0
> 
> 时间：2012-10-10T11:31:20.320
> 
> 标签：java-me, lwuit

我已经将多个组件一一添加到我的 LWUIT 表单中，但问题是我无法像附加在代码中一样一一显示这些添加的组件，我能够在单个上显示日期和图像行（并排）有时标题和日期在一行，我从 Rss 文件中获取详细信息。如何像我在代码中一一添加的那样显示这些组件，而不是在一行中显示两个组件？

谢谢....

这是我的代码：

```
 Label pubDate = new Label(detailNews.getPubDate().substring(0, 16));
        Label title=new Label();
        title.setText(detailNews.getTitle());
        title.startTicker();
        pubDate.getStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_SMALL));
            Image geImage = detailNews.geImage(); 
        Label icon=new Label(geImage);
                form2.addComponent(title);
                form2.addComponent(pubDate);
        textarea.setText(detailNews.getDescription());
        textarea.requestFocus();
      form2.addComponent(icon);
       form2.addComponent(textarea);
        form2.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:41:45.483

我的想法是：

您可以使用 BoxLayoutY 创建一个`Container`，并将其`TextArea`和图标添加到`Container`. 接下来，将此添加`Container`到`Form`. 就像是：

```
 Label pubDate = new Label(detailNews.getPubDate().substring(0, 16));
        Label title=new Label();
        title.setText(detailNews.getTitle());
        title.startTicker();
        pubDate.getStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_SMALL));
            Image geImage = detailNews.geImage(); 
        Label icon=new Label(geImage);

        Container container = new Container(new BoxLayout(BoxLAyout.Y_AXIS));
        container.addComponent(title);
        container.addComponent(pubDate);
        container.addComponent(icon);
        container.addComponent(textarea);
        form2.addComponent(container);

        textarea.setText(detailNews.getDescription());
        textarea.requestFocus();
        form2.show(); 
```

# javascript - 即时生成谷歌地图

> ID：12818308
> 
> 赞同：0
> 
> 时间：2012-10-10T11:31:21.513
> 
> 标签：javascript, html, google-maps-api-3, settimeout

**已编辑**

**长按页面底部的橙色按钮以激活我正在谈论的内容，然后再次按下圆圈，并在出现提示时说“你好”，然后对出现的所有内容说“是”。**

```
<html>

<head>

<title> Home </title>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>

<style type="text/css">

@font-face {
    font-family: "Roboto";
    src: url(System Fonts/Roboto-Light.ttf) format("truetype");
}

@font-face
{
font-family: "Roboto";
src: url('System Fonts/Roboto-Medium.ttf'),
font-weight:bold;
}

body {"Roboto", Arial, Sans-Serif;}

#perdify {
         position:fixed;
         bottom:0px;
         left:0px;
         background: #EFEFEF;
         width:100%;
         height:1.3cm;
}

#magic{   
  background-color: #dd4b39;
  -moz-border-radius: 50%;
  -webkit-border-radius: 50%;
  height:1.2cm; 
  width:1.2cm;
  left: 50%;
  margin-left: -0.6cm;
  position:absolute;
  bottom:0.05cm;

}

#main { 
                background:#ffffff; 
                width:100%;  
                display:none; 
                position:fixed;
                top:0.4cm;
                left:0px;
                bottom:1.3cm;
                overflow:auto;  
                z-index:2;  
}

.welcome { padding:10px; background-color: #EFEFEF; margin-top: 10px; margin-left:5px;  margin-right:5px; font-family: "Roboto", Arial, Sans-Serif;}

#statusbar {
         position:fixed;
         top:0px;
         left:0px;
         background: #EFEFEF;
         width:100%;
         height:0.4cm;
}

#voiceSearchGo::-webkit-input-speech-button {
  -webkit-appearance:none; 
  width:100%; 
  height:100%; 
  position:absolute;
  bottom:0px;
  left:0px; 
}

#voiceSearchGo:focus { outline: none; }

#voiceSearchGo {
  height:100%; 
  width:100%;
  color:transparent;
  background-color:transparent;
  position:absolute;
  bottom:0px;
  left:0px;
  border:none;  
  cursor:default;
}

#voicesearchstimulantcontainer {
  height:1.2cm;
  width:1.2cm;
  position:fixed;
  bottom:0.5mm;
  left: 50%;
  margin-left: -0.6cm; 
  display:none;
}

#micimage {position:absolute; top:0mm; left:0mm; height:1.2cm; width:1.2cm;}

.welcome { padding:10px; background-color: #EFEFEF; margin-top: 10px; margin-left:5px; margin-bottom: 10px; margin-right:5px; font-family: "Roboto", Arial, Sans-Serif;}
        .yousaid { padding:10px; background-color: #DD4B39; margin-bottom: 10px; margin-left:5px;  margin-right:5px; font-family: "Roboto", Arial, Sans-Serif; color:white;}  
        .yousaid h2 {margin: 0 0 5px 0; color:#EFEFEF;}
        .Onesearchsays { padding:10px; background-color: #EFEFEF; margin-top: 10px; margin-bottom: 10px; margin-left:5px;  margin-right:5px; font-family: "Roboto", Arial, Sans-Serif;} 
        .Onesearchsays h2 {margin: 0 0 5px 0; color:#DD4B39;}
        .buttonyes {padding:10px; background-color: #DD4B39;  margin-left:4%;  margin-right:4%; font-family: "Roboto", Arial, Sans-Serif; color:white; border:none; width:44%; font-weight:bold;} 
        .buttonno {padding:10px; background-color: #DD4B39; font-family: "Roboto", Arial, Sans-Serif; color:white; border:none; width:44%; font-weight:bold;}

#map { height:5cm; margin-left:-10px; margin-bottom:-10px; margin-right:-10px; margin-top:10px; }

</style>

</head>
<body>

<!--Start One Talk -->

<div id="main">
<div class="welcome" style=""> <h2 id="welcomemessage" style="margin: 0 0 10px 0; color:#DD4B39;"> How can I help You? </h2> Ps. Say 'help' for a list of Commands. </div>
</div>

<!--End One Talk -->

<!--Start status bar-->

<div id="statusbar"></div>

<!--End Status Bar-->

<!--Start Magic-->

<div id="perdify">  
<div id="magic"></div>

<div id="voicesearchstimulantcontainer">
<img src="System Icons/ic_action_microphone.png" alt="Click To Speak" id="micimage"/>
<input onfocus="this.value = '';" type="text" id="voiceSearchGo" x-webkit-speech></input>
</div>
</div>

<script>

var map;
  var infowindow;

voiceSearchGo.onwebkitspeechchange = function(e) {

var n = voiceSearchGo.value ;

var divYou = document.createElement("div"); 
divYou.id = "div1"; 
divYou.className = "yousaid"; 
divYou.innerHTML = "<h2> You Said . . . </h2>" + n ;
document.getElementById('main').appendChild(divYou); 

if ((n.split(" ",1)) == 'hello')
{

setTimeout(function() {

var time = new Date().getHours();

if (time == 3 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 4 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 5 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 6 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 7 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays";  
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 8 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 9 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 10 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 11 )
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" +  "Good Morning, would You like to check the weather?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='morningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='morningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 12)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" + " Good Afternooon, would you like me to find you a near by cafe?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='noondecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='noondecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 13)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" + " Good Afternooon, would you like me to find you a near by cafe?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='noondecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='noondecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 14)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" + " Good Afternooon, would you like me to find you a near by cafe?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='noondecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='noondecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 15)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search says . . . </h2>" + " Good Afternooon, would you like me to find you a near by cafe?" + "<BR></BR>" +  "<button type='button' class='buttonyes' onclick='noondecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='noondecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 16)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 17)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 18)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 19)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 21)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 22)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 23)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 24)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 1)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you near by Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

if (time == 2)
{
var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search says . . .</h2>" + "Good Evening, would you like me to find you close Restaurants and Bars?" + "<BR></BR>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 
}

},1200);
} 

if ((n.split(" ",1)) == 'help' )
{
setTimeout(function() {

var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> One Search Says . . . </h2>" + "Here is a list of commands . . ." + "<ol> <li>Search - Find an item in Google Search, ie: Search Panda.</li> <li>Show - Find an item in Google Images, ie: Show Panda.</li> <li>Wacth - Find an item on Youtube, ie: Watch Panda.</li> <li>Website - Go to a URL, ie: Website Panda.</li> <li>Weather - Display the current Temperature for your area.</li> <li>Find - Find a place on Google  Maps, ie: Find New York City.</li> <li>Hello - Recomendations based on time of day.</li> </ol>";
document.getElementById('main').appendChild(divGS);

},1200);
}

if ((n.split(" ",1)) == 'search' )
{
setTimeout(function() {

var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2 id='evening'> Search One for . . .</h2>" + "<i><p id='searchterm'>hello</p></i>" + "<button type='button' class='buttonyes' onclick='Eveningdecisionyes()'> Yes </button>" + "<button type='button' class='buttonno' onclick='Eveningdecisionno()'> No </button>";
document.getElementById('main').appendChild(divGS); 

},1200);
}

/* End Voice Commands */

}

function Eveningdecisionyes()
{

setTimeout(function() {

var divYou = document.createElement("div"); 
divYou.id = "div1"; 
divYou.className = "yousaid"; 
divYou.innerHTML = "<h2> You Chose . . . </h2>" + "Yes" ; 
document.getElementById('main').appendChild(divYou); 

},600);

setTimeout(function() {

var divGS = document.createElement("div"); 
divGS.id = "div1"; 
divGS.className = "Onesearchsays"; 
divGS.innerHTML = "<h2> One Search Says . . . </h2>" + "Here are some Restraunts and Bars within 10 kilometres of You . . ." + "<div id='map'>" + "</div>";
document.getElementById('main').appendChild(divGS);

setTimeout(function() { navigator.geolocation.getCurrentPosition(showPosition) },1);

    function showPosition(position)
    {

   var latlon = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: latlon,
      zoom: 15,
      disableDefaultUI: true
    });

    var request = {
      location: latlon,
      radius: 10000,
      types: ['bar', 'restaurant']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.search(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
     }
    }
   }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });
}
    google.maps.event.addListener(marker, 'click', function() {
      alert(place.name);
    });

},1200);

}

function Eveningdecisionno()
{

var divYou = document.createElement("div"); 
divYou.id = "div1"; 
divYou.className = "yousaid"; 
divYou.innerHTML = "<h2> You Chose . . . </h2>" + "no" ; 
document.getElementById('main').appendChild(divYou); 

}

function morningdecisionyes()
{
alert("yes");
}

function morningdecisionno()
{

var divYou = document.createElement("div"); 
divYou.id = "div1"; 
divYou.className = "yousaid"; 
divYou.innerHTML = "<h2> You Chose . . . </h2>" + "no" ; 
document.getElementById('main').appendChild(divYou); 

}

function noondecisionyes()
{
alert("yes");
}

function noondecisionno()
{

var divYou = document.createElement("div"); 
divYou.id = "div1"; 
divYou.className = "yousaid"; 
divYou.innerHTML = "<h2> You Chose . . . </h2>" + "no" ; 
document.getElementById('main').appendChild(divYou); 

}

</script>

<script type="text/javascript">

function playSound(soundfile) {
 document.getElementById("sounds").innerHTML=
 "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
 };

$(window).load(function(){
var pressTimer

$("#magic").mouseup(function(){
  clearTimeout(pressTimer);

  return false;
}).mousedown(function(){
    pressTimer = window.setTimeout(function() { 

    $("#voicesearchstimulantcontainer").fadeIn('slow');

    if ($("#main").is(":hidden")) {
    $("#main").slideDown("slow");
    } else {
    $("#main").hide();
    };

    },500);

    },500);

  return false; 
});
}); 

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:34:15.757

尝试`var map;`使用函数的外部。Google Maps API 要求 map 变量可以全局访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:39:32.817

我已经解决了这个问题，愚蠢的我忘了包含地图 api js 库:( 抱歉所有的麻烦。

# visual-studio-2010 - 在 VS2010 中删除项目依赖项时出错

> ID：12818315
> 
> 赞同：45
> 
> 时间：2012-10-10T11:31:48.247
> 
> 标签：visual-studio-2010, project, dependency-properties

我有一个包含许多项目的大型解决方案。一些项目依赖于其他项目（尽管从来没有循环依赖）。

当我尝试删除项目的依赖项时，我收到一条错误消息，例如“依赖项已由项目系统添加，无法删除”。这个错误的原因是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-21T13:33:57.577

当我尝试手动编辑我们的 CMake 系统生成的项目/解决方案时，有时会遇到这个问题。我手动解决：

*   在您喜欢的文本编辑器中打开相关的 .vcproj 文件。
*   找到你要移除的依赖对应的<ProjectReference>标签（标签的include属性会包含依赖项目的名称）。
*   移除整个 <ProjectReference> 元素（即以 <ProjectReference> 开始并以 </ProjectReference> 结束）。保存文件。
*   重新加载解决方案。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-28T21:56:39.607

我遇到了同样的问题。但我可以通过以下方式解决

*   右键单击项目，选择*Properties*。
*   *在Common Properties*下选择*Framework 和 References*
**   选择不需要的参考。*   单击*删除参考*。*

 ** * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-27T18:11:34.303

或 =>
[在 Visual C# 中删除引用：](http://msdn.microsoft.com/en-us/library/vstudio/wkze6zky%28v=vs.100%29.aspx)

1.  在解决方案资源管理器中，打开项目节点下的引用节点。
2.  右键单击引用，然后单击删除

在 Visual Basic 中删除引用：

1.  在解决方案资源管理器中，右键单击项目的“我的项目”节点并选择“属性”。
2.  单击参考选项卡。
3.  在引用列表中，选择要删除的引用。
4.  单击删除按钮

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-20T18:26:37.037

对于 Visual Studio 2013：在 C++ 项目上（希望其他人也一样）

1.  从**解决方案资源管理器**中，选择项目并右键单击以选择属性
2.  在属性窗口的左窗格中，选择 Common properties => References
3.  在窗口的右侧，您可以选择添加或删除其他依赖项。
4.  然后选择确定，保存

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-26T21:02:49.210

如果您的项目只有 .sln 文件但没有任何 .csproj，您可能需要

1.  检查 ProjectReferences 属性并删除那里的参考项目
2.  将部分从 Project 删除到 EndProject
3.  还删除 GlobalSection(ProjectConfigurationPlatforms) 下的相关行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-05T17:00:14.730

作为上述@malenkiy_scot 的补充说明，对于您要保留的 ProjectReference 项目，请仔细检查项目 guid 是否适合该项目。在依赖的 .vcproj 文件中，找到上面的 ProjectReference 标记，并为每个要保留的标记：

*   在文本编辑器中打开引用项目的 .vcproj 文件
*   在 ProjectGuid 标签中找到它的 guid
*   将此与依赖 .vcproj 文件中该引用的项目标记进行比较（不区分大小写）
*   如果不相同，请将 Project 标记中的 guid 替换为引用项目的 ProjectGuid 标记中的 guid
*   保存项目文件并重新加载解决方案

Visual Studio 使用项目 guid 而不是名称来确定依赖关系。因此，如果您手动编辑了依赖项的名称而不是 guid（就像我所做的那样），您会收到错误消息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-04T17:21:38.660

在 VS17 中，右键单击 References 节点，然后选择 OptimiseReferences... 有助于解决您的依赖关系。另外右键单击项目并单击 BuildDependancies... ProjectDependencies 这可能是您设置依赖项的位置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-16T08:41:01.167

1-右键单击项目的**引用**，然后单击**添加引用...**

2-从解决方案选项卡中取消选中依赖项目

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-20T11:39:44.810

*   在解决方案资源管理器窗口中，右键单击项目并选择“编辑项目文件”。project.csproj 文件将在编辑器中打开。
*   找到嵌套标签的那个。
*   删除整个（连同结束标记）。*

# jakarta-ee - 如何维护 Web 应用程序文件版本？

> ID：12818318
> 
> 赞同：1
> 
> 时间：2012-10-10T11:31:53.200
> 
> 标签：jakarta-ee

Java -- 检索版本的静态方法
XML、JSP 和 SQL -- 添加版本的注释

我将 J2EE (JDK 5) 与 Tomcat 5 和 Oracle 9g 一起使用。请告诉我如何在我的 Web 应用程序中维护各种文件（Java、JSP、XML、属性、SQL 和其他平面文件）的版本。当新开发人员在几年后要更改或添加某些内容时，标准方式将有助于将来参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:28:15.073

看看[http://en.wikipedia.org/wiki/Revision_control](http://en.wikipedia.org/wiki/Revision_control)

还可以了解 SVN 和 GIT

# qt - Qt - QTableView 和 QSqlQueryModel 项目消失

> ID：12818322
> 
> 赞同：1
> 
> 时间：2012-10-10T11:32:02.373
> 
> 标签：qt

我正在使用来自 QSqlQueryModeL 的数据实现 QtableView。

发生的情况是，如果我在视图中选择一个项目，一秒钟后该项目消失，其他行中的项目也消失。

我的代码： ui->medicstableView->setHorizo​​ntalScrollBarPolicy(Qt::ScrollBarAsNeeded); ui->medicstableView->setVerticalScrollBarPolicy(Qt::ScrollBarAsNeeded); ui->medicstableView->setStyleSheet(QString::fromUtf8("背景色: rgb(227, 226, 226);")); //ui->medicstableView->setVisible(true); //ui->medicstableView->setEditTriggers(QAbstractItemView::NoEditTriggers);

```
doctors_table = new QSqlQueryModel(this);

QSqlDatabase mydb;
QString Squery;

QString conn = mydb.connectionName();
if (conn.isEmpty()) {
    mydb = QSqlDatabase::addDatabase("QMYSQL");
}
else
{
    mydb.close();
    QSqlDatabase::removeDatabase(conn);
    mydb = QSqlDatabase::addDatabase("QMYSQL");
}

mydb.setHostName(myhost);
mydb.setUserName(myuser);
mydb.setPassword(mypass);
mydb.setDatabaseName(mybase);

try
{
    if(mydb.open()==true)
    {
        Squery=QString("SELECT id_medico,medico FROM Registos_Medicos");
        doctors_table->setQuery(Squery);

        doctors_table->setHeaderData(0, Qt::Horizontal, QObject::tr("ID"));
        doctors_table->setHeaderData(1, Qt::Horizontal, QObject::tr("Nome do médico"));

        ui->medicstableView->setModel(doctors_table);

        mydb.close();

        //ui->statusbar->addAction();

        ui->medicstableView->resizeColumnsToContents ();
        ui->medicstableView->resizeRowsToContents ();
        ui->medicstableView->setColumnWidth(1,255);

        ui->medicstableView->show(); 
```

QTableView 是在 Qt 设计器中创建的，名称为“medicstableView”

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:16:42.837

好的，让我们试试这个。它对我有用：

```
//pro file:
QT       += core gui sql

TARGET = test1
TEMPLATE = app

SOURCES += main.cpp\
           widget.cpp \
           database.cpp

HEADERS  += widget.h \
            database.h

FORMS    += widget.ui

//database.h:
#ifndef DATABASE_H
#define DATABASE_H

#include <QSqlDatabase>

class Database
{
public:
    Database();
    ~Database();
    QSqlDatabase db;
    bool connection();
    void createTables();
};

#endif // DATABASE_H

//database.cpp:
#include "database.h"
#include <QtGui>
#include <QSqlQuery>

Database::Database()
{
    db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName(":memory:");
}

Database::~Database()
{
    db.close();
}

bool Database::connection()
{
    if (!db.open()) {
        QMessageBox::critical(0, qApp->tr("Cannot open database"),
        qApp->tr("Unable to establish a database connection.\n"
                 "This example needs SQLite support. Please read "
                 "the Qt SQL driver documentation for information how "
                 "to build it.\n\n"
                 "Click Cancel to exit."), QMessageBox::Ok);
        return false;
    }
    return true;
}

void Database::createTables()
{
    QSqlQuery q;
    q.exec("CREATE TABLE test(id integer primary key,name varchar(20))");

    q.exec("INSERT INTO test(name) VALUES('foo')");
    q.exec("INSERT INTO test(name) VALUES('fie')");
    q.exec("INSERT INTO test(name) VALUES('bar')");
}

//widget.h:
#ifndef WIDGET_H
#define WIDGET_H

#include <QWidget>
class QSqlQueryModel;
class Database;

namespace Ui {
class Widget;
}

class Widget : public QWidget
{
    Q_OBJECT

public:
    explicit Widget(QWidget *parent = 0);
    ~Widget();

private:
    QSqlQueryModel *model;
    Database *m_db;
    Ui::Widget *ui;
};

#endif // WIDGET_H

//widget.cpp:
#include "widget.h"
#include "ui_widget.h"
#include "database.h"
#include <QSqlQueryModel>

Widget::Widget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Widget)
{
    ui->setupUi(this);
    m_db = new Database();
    m_db->connection();
    m_db->createTables();
    model = new QSqlQueryModel();
    model->setQuery("SELECT * from test");
    ui->tableView->setModel(model);
}

Widget::~Widget()
{
    delete ui;
}

//widget.ui:
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>Widget</class>
 <widget class="QWidget" name="Widget">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>274</width>
    <height>210</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Widget</string>
  </property>
  <layout class="QVBoxLayout" name="verticalLayout">
   <item>
    <widget class="QTableView" name="tableView"/>
   </item>
  </layout>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <resources/>
 <connections/>
</ui> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:55:38.447

我猜你的错误是关闭数据库连接。数据库连接必须在应用程序关闭时关闭

# java - 在线程中读取时的 BufferedReader readline

> ID：12818341
> 
> 赞同：2
> 
> 时间：2012-10-10T11:32:47.143
> 
> 标签：java, multithreading, concurrency, readline

我是Java并发编程的新手。

我需要阅读、分析和处理一个增长极快的日志文件，所以我必须要快。我的想法是读取文件（逐行），并在匹配相关行后，我想将这些行传递给可以对该行进行进一步处理的单独线程。我在以下示例代码中将这些线程称为“IOThread”。

我的问题是 IOthread.run() 中的 BufferedReader readline 显然永远不会返回。在线程内读取 Stream 的工作方式是什么？有没有比下面的方法更好的方法？

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;

class IOThread extends Thread {
    private InputStream is;
    private int t;

    public IOThread(InputStream is, int t)  {
        this.is = is;
        this.t = t;
        System.out.println("iothread<" + t + ">.init");
    }

    public void run() {
        try {
            System.out.println("iothread<" + t + ">.run");
            String line;

            BufferedReader streamReader = new BufferedReader(new InputStreamReader(is));
            while ((line = streamReader.readLine()) != null) {
                System.out.println("iothread<" + t + "> got line " + line);
            }
            System.out.println("iothread " + t + " end run");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public class Stm {
    public Stm(String filePath) {
        System.out.println("start");

        try {
            BufferedReader reader = new BufferedReader(new FileReader(filePath));

            PipedOutputStream po1 = new PipedOutputStream();
            PipedOutputStream po2 = new PipedOutputStream();
            PipedInputStream pi1 = new PipedInputStream(po1);
            PipedInputStream pi2 = new PipedInputStream(po2);
            IOThread it1 = new IOThread(pi1,1);
            IOThread it2 = new IOThread(pi2,2);

            it1.start();
            it2.start();
//          it1.join();
//          it2.join();

            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println("got line " + line);

                if (line.contains("aaa")) {
                    System.out.println("passing to thread 1: " + line);  
                    po1.write(line.getBytes());
                } else if (line.contains("bbb")) {
                    System.out.println("passing to thread 2: " + line);  
                    po2.write(line.getBytes());
                }
            }
            reader.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        new Stm(args[0]);
    }

} 
```

一个示例输入文件将是：

```
line 1
line 2
line 3 aaa ...
line 4
line 5 bbb ...
line 6 aaa ...
line 7
line 8 bbb ...
line 9 bbb ...
line 10 
```

使用输入文件的文件名作为参数调用上述代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:48:10.273

由于以下原因，您的 iothread 中的阅读器一直停留在 while 循环的第一次迭代的头部：您从 STM 线程传递读取行的内容，但您没有附加换行符 (\n) . 由于您的缓冲阅读器等待换行符（如在 .readLine() 中），它会永远等待。您可以像这样修改您的代码：

```
 if (line.contains("aaa")) {
                System.out.println("passing to thread 1: " + line);  
                byte[] payload = (line+"\n").getBytes();
                po1.write(payload);
            } else if (line.contains("bbb")) {
                System.out.println("passing to thread 2: " + line);  
                byte[] payload = (line+"\n").getBytes();
                po2.write(payload);
            } 
```

但是我不得不说这根本不是一个优雅的解决方案，您可以使用阻塞队列或类似的东西来为您的 IOThreads 提供内容。这样，您可以避免将输入转换为字符串到字节再转换回字符串（不是说摆脱所有的流）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:37:34.687

恕我直言，你把它弄反了。创建多个线程来“处理”东西，而不是从文件中读取数据。从文件中读取数据时，无论如何您都会遇到瓶颈，因此拥有多个线程不会有任何区别。最简单的解决方案是在给定线程中尽可能快地读取行并将这些行存储在共享队列中。然后可以由任意数量的线程访问此队列以进行相关处理。

这样，您实际上可以在 I/O 或读取器线程忙于读取/等待数据时进行并发处理。如果可能，请在阅读器线程中将“逻辑”保持在最低限度。只需阅读这些行，让工作线程完成真正繁重的工作（匹配模式、进一步处理等）。只需使用线程安全队列，您就应该是洁净的。

**编辑：**[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)使用基于数组或基于链表的一些变体。

# android - 对话 onCreateDialog(int dialogID)

> ID：12818342
> 
> 赞同：4
> 
> 时间：2012-10-10T11:32:48.033
> 
> 标签：android, android-alertdialog

要创建对话框，我将覆盖以下方法：

```
protected Dialog onCreateDialog(final int dialogId) {
} 
```

并调用它，我正在使用：

```
showDialog(id); 
```

但现在我想使用`FragmentDialog`，但没有像这样的方法：

```
protected Dialog onCreateDialog(final int dialogId) {
    } 
```

它有

```
Dialog onCreateDialog(Bundle savedInstanceState){} 
```

我的问题是，如何根据不同的 id 显示对话框`FragmentDialog`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:43:50.633

我猜`FragmentDialog`你的意思是在 Fragment 中显示 Dialogs 而不是[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)

但是您可以在 Fragment 中复制此行为，如下所示：

```
class SomeFragment extends Fragment{

  HashMap<Integer, Dialog> mDialogs = new HashMap<Integer, Dialog>();

  public void showDialog(int dialogId){

    Dialog d = mDialogs.get(dialogId);
    if (d == null){

      d = onCreateDialog(dialogId);
      mDialogs.put(dialogId, d);
    }
    if (d != null){
       onPrepareDialog(d, dialogId);
       d.show();
    }

  }

  public Dialog onCreateDialog(int dialogId){
    //just create your Dialog here, once
  }

  public void onPrepareDialog(Dialog d, int dialogId){
      super.onPrepareDialog(d, dialogId);
      // change something inside already created Dialogs here
  }
} 
```

它只是一个简单的对话框缓存

编辑：活动的原始来源：

```
/**
 * Show a dialog managed by this activity.  A call to {@link #onCreateDialog(int)}
 * will be made with the same id the first time this is called for a given
 * id.  From thereafter, the dialog will be automatically saved and restored.
 *
 * Each time a dialog is shown, {@link #onPrepareDialog(int, Dialog)} will
 * be made to provide an opportunity to do any timely preparation.
 *
 * @param id The id of the managed dialog.
 *
 * @see Dialog
 * @see #onCreateDialog(int)
 * @see #onPrepareDialog(int, Dialog)
 * @see #dismissDialog(int)
 * @see #removeDialog(int)
 */
public final void showDialog(int id) {
    if (mManagedDialogs == null) {
        mManagedDialogs = new SparseArray<Dialog>();
    }
    Dialog dialog = mManagedDialogs.get(id);
    if (dialog == null) {
        dialog = createDialog(id, null);
        mManagedDialogs.put(id, dialog);
    }

    onPrepareDialog(id, dialog);
    dialog.show();
}

/**
 * Provides an opportunity to prepare a managed dialog before it is being
 * shown.
 * <p>
 * Override this if you need to update a managed dialog based on the state
 * of the application each time it is shown. For example, a time picker
 * dialog might want to be updated with the current time. You should call
 * through to the superclass's implementation. The default implementation
 * will set this Activity as the owner activity on the Dialog.
 * 
 * @param id The id of the managed dialog.
 * @param dialog The dialog.
 * @see #onCreateDialog(int)
 * @see #showDialog(int)
 * @see #dismissDialog(int)
 * @see #removeDialog(int)
 */
protected void onPrepareDialog(int id, Dialog dialog) {
    dialog.setOwnerActivity(this);
}

 /**
 * Callback for creating dialogs that are managed (saved and restored) for you
 * by the activity.
 *
 * If you use {@link #showDialog(int)}, the activity will call through to
 * this method the first time, and hang onto it thereafter.  Any dialog
 * that is created by this method will automatically be saved and restored
 * for you, including whether it is showing.
 *
 * If you would like the activity to manage the saving and restoring dialogs
 * for you, you should override this method and handle any ids that are
 * passed to {@link #showDialog}.
 *
 * If you would like an opportunity to prepare your dialog before it is shown,
 * override {@link #onPrepareDialog(int, Dialog)}.
 *
 * @param id The id of the dialog.
 * @return The dialog
 *
 * @see #onPrepareDialog(int, Dialog)
 * @see #showDialog(int)
 * @see #dismissDialog(int)
 * @see #removeDialog(int)
 */
protected Dialog onCreateDialog(int id) {
    return null;
} 
```

# version-control - Mercurial 特色工作 - 保持定制工作清洁的最佳做法？

> ID：12818343
> 
> 赞同：4
> 
> 时间：2012-10-10T11:32:56.657
> 
> 标签：version-control, mercurial, workflow, branch, rebase

我已经使用源代码控制系统大约 10 年了，显然每个系统都有自己的习语和实践。

我目前正在使用 Mercurial 进行 .NET 开发，并且有一个特殊要求，我想知道您的意见是什么才能最好地实现我的目标。

我们开发了一个基线产品，它是一种滚动发布。一些客户需要精简产品（由于获得更便宜的许可证）或完成定制工作。我倾向于分支“主干”（Mercurial 中的默认分支），进行定制工作并创建构建。

当在“主干”中完成新工作并且我需要来自定制分支的新构建时，我将使用合并更改`hg merge -r CHANGESET_NUM_FROM_DEFAULT_HERE`然后进行构建。

这很好用，但是定制分支很快就会充满与“主干”相关的提交，而不是真正的定制功能。这意味着当我需要查看此分支的变更集时，它们会很混乱。

我真正希望它转移分支“连接点”开始的位置，因此定制变更列表仅包含定制签入，但定制分支的父级发生了变化。

我尝试使用 rebase 扩展，因为它看起来应该这样做，但它反而做了很多合并并且仍然使我的定制分支变得混乱。

有没有办法让我的定制分店保持清洁？还是我以错误的方式处理事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:47:43.620

您的定制分支现在**很**干净。但是 - 如果你不想在分支日志中看到合并集，只需跳过日志

`hg help log`

> 选项：
> 
> ...
> 
> -M --no-merges 不显示合并

`hg log -r 55:tip --template "{branch}:{rev}\n" -b default`

> 默认值：55
> 
> 默认值：56
> 
> 默认值：57
> 
> **默认值：60**
> 
> 默认值：61
> 
> **默认值：63**
> 
> 默认值：65
> 
> 默认值：66

`hg log -r 55:tip --template "{branch}:{rev}\n" -b default -M`

> 默认值：55
> 
> 默认值：56
> 
> 默认值：57
> 
> 默认值：61
> 
> 默认值：65
> 
> 默认值：66

和 THG 的图表截图

![合并](../Images/10db91d0f0b8bc188d3f2a4a4ee87b03.png)

# android - 如何在谷歌地图上显示多个点？

> ID：12818344
> 
> 赞同：0
> 
> 时间：2012-10-10T11:32:56.550
> 
> 标签：android, google-maps

当启动谷歌地图时，我将注意力集中在地图上的一个点上：

```
GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6), (int) (src_long * 1E6));    
GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6), (int) (dest_long * 1E6));       
DrawPath(srcGeoPoint, destGeoPoint, Color.BLUE, mapView);        
mapView.getController().animateTo(destGeoPoint); 
```

如果我使用`mapView.getController().animateTo(destGeoPoint);` 地图只关注点`destGeoPoint`。我希望地图显示 2 点：`srcGeoPoint` 以及`destGeoPoint`何时启动谷歌地图。这2点已经绘制在地图上。我想在地图打开时看到 2 点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:31:35.873

创建你的 mapOverlay：

```
public class MapOverlay extends Overlay {
    MapView mapView; 
    GeoPoint p;
    private Context c;

    public MapOverlay(Context c, MapView m, GeoPoint p){
        this.c=c;
        mapView=m;
        this.p=p;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(c.getResources(), R.drawable.icon_notif);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
        return true;
    }
} 
```

这是一个启动地图的方法：

```
private void initMapa() {
    try{
        //If you want zoom controls
        mapa.setBuiltInZoomControls(true);

        GeoPoint loc;
        Double lat;
        Double long;

        MapController controlMapa = mapa.getController();
        controlMapa.setZoom(13); // de 1 a 21

        mapa.setSatellite(true);
        mapa.displayZoomControls(true);

        // First point
        ArrayList<GeoPoint> ap=new ArrayList<GeoPoint>();
        latitud = (double) lat1 *1E6;
        longitud = (double) long1 *1E6;
        loc = new GeoPoint(latitud.intValue(), longitud.intValue());
        controlMapa.animateTo(loc);
        ap.add(loc);

        // Second point
    latitud = (double) fichaOtraPersona.getLoc_lan()*1E6;
    longitud = (double) fichaOtraPersona.getLoc_lon()*1E6;
    loc = new GeoPoint(latitud.intValue(), longitud.intValue());
    ap.add(loc);

        controlMapa.animateTo(loc);
        addPointInTheMap(ap);
    } catch (Exception e) {
        showToast("Error");
    }
} 
```

和 addPointInTheMap 方法：

```
private void anadirPuntoEnMapa(ArrayList<GeoPoint> points){
        //---Add a location marker---

        List<Overlay> listOfOverlays = mapa.getOverlays();
        listOfOverlays.clear();

        Iterator<GeoPoint> it=points.iterator();
        while (it.hasNext()){
            MapOverlay mapOverlay = new MapOverlay(getApplicationContext(), mapa, it.next());
            listOfOverlays.add(mapOverlay);   
        }

        mapa.invalidate();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:18:44.137

尝试阅读 Android Cookbook 中的**[位置和地图应用程序](http://androidcookbook.com/Recipe.seam;jsessionid=509EB1AD88ECB395598B6F1F5DC8361D?recipeId=2308)**章节。主要思想是向您的 MapActivity 添加一个内部类，该类扩展 ItemizedOverlay 并实现抽象方法和默认构造函数。ItemizedOverlay 使用您的 createItem 和 size() 方法的实现来获取您的实现中的所有覆盖项并进行聚合。

![在此处输入图像描述](../Images/3c823bb024dd5fb768ece456067e49aa.png)

# sql - 按日期选择查询

> ID：12818346
> 
> 赞同：0
> 
> 时间：2012-10-10T11:33:04.017
> 
> 标签：sql, select

我们有一个表来存储事件。

表有一个类似的模式

```
EventID INT Primary Key
EventName NVARCHAR(100)
StartDate Datetime
EndDate Datetime 
```

所以在前端我们要根据开始时间和结束时间来显示事件。从前端我们传递 StartDate 和 EndDate 作为参数来获取值。

到目前为止，我们已经采取了

```
 Select * from tbl_Events
   where ((startDate BETWEEN @start AND @end) OR (EndDate BETWEEN @start AND @end)) 
```

我们有 2 个视图来显示事件 -

1.  **月视图**-显示当月的所有事件

2.  显示当天事件的**日视图**

假设我有一个活动，开始日期为 2012 年 10 月 23 日，结束日期为 2012 年 10 月 27 日。

我正在`@StartDate as 24 Oct 2012`路过`@EndDate as 25 OCt 2012`

根据上面的查询，它在**月视图**中工作。**但它在日视图**中不起作用。

谁能帮我修改查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:37:04.720

您的重叠逻辑实际上应该是：

```
Select *
from tbl_Events
where startDate <= @end AND @start <= EndDate 
```

# php - 如何使用类似的键在可排序的 PHP 数组中收集值？

> ID：12818356
> 
> 赞同：-2
> 
> 时间：2012-10-10T11:33:37.433
> 
> 标签：php, arrays

我正在根据它们的 id 收集记录的错误消息，例如在下面的代码中，id "2342" 有两个错误。收集这些之后，如何在不遍历所有数组项并测试该 id 的情况下获得“特定 id 的所有错误”？

```
$errorMessages = [];
$errorMessages[] = ['2342','error1'];
$errorMessages[] = ['1236','error2'];
$errorMessages[] = ['2342','error3'];
$errorMessages[] = ['6535','error4'];

//get all error messages that belong to e.g. id=2342 in an array 
```

另一种方法是将数组保存为，例如：

```
$errorMessages['2342'] = 'error1'; 
```

但是后来我第二次向 id='2342' 添加消息时，值被替换而不是添加，所以这不是一个选项。

将这样的多个字符串保存到数组中，然后能够快速检索特定数组的所有字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:35:50.087

只需使用多维数组并存储具有相同 id 的消息数组

```
$errorMessages['2342'][] = 'error1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:36:19.040

制作 $errorMessages['2342'] 数组（）...

```
$errorMessages['2342'] = array();

$errorMessages['2342'][] = 'error1';
$errorMessages['2342'][] = 'error2'; 
```

# xslt - xslt 的 xalan 和自定义函数

> ID：12818357
> 
> 赞同：1
> 
> 时间：2012-10-10T11:33:43.660
> 
> 标签：xslt, xalan, ikvm

我将 Apache FOP 与我的 c# 代码中的 IKVM 一起使用。我通过使用 xslt 样式表生成 pdf 以获取 xsl fo 的结果。我有一个问题，那就是使用自定义函数。我的样式表声明：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
                 xmlns:cal="xalan://m.test"
              extension-element-prefixes="cal"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance http://www.xmlblueprint.com/documents/fop.xsd"> 
```

自定义函数：

```
namespace m
{
    public class test
    {
        public static string zzz(ExpressionContext x, object d)
        {
            return "test";
        }
    }
} 
```

并从 xslt 调用它：

```
 <xsl:value-of select="cal:zzz(1)"/> 
```

编译它的代码：

```
 FopFactory fopFactory = FopFactory.newInstance();
            fopFactory.ignoreNamespace("http://www.w3.org/2001/XMLSchema-instance");
            fopFactory.setUserConfig(new File("fop.xconf"));

            OutputStream o = new DotNetOutputMemoryStream();

            try
            {
                Fop fop = fopFactory.newFop("application/pdf", o);

                TransformerFactory factory = TransformerFactory.newInstance();

                Source xsltSrc = new StreamSource(new File("data.xsl"));
                Transformer transformer = factory.newTransformer(xsltSrc);

                var bytes = System.IO.File.ReadAllBytes("data.xml"); //"HR_CV.fo");
                var stream = new DotNetInputMemoryStream(new System.IO.MemoryStream(bytes));

                Source src = new StreamSource(stream);

                Result res = new SAXResult(fop.getDefaultHandler());

                transformer.transform(src, res);
            }
            finally
            {
                o.close();
            } 
```

我得到的例外是：java.lang.NoSychMethodExtension：对于扩展函数，找不到方法 org.apache.xml.utils.NodeVector.zzz([ExpressionContext,])

我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T09:18:04.923

You're calling the `zzz` function with a single argument (1). But your function expects two arguments. If you provide both arguments, chances are it will work just fine.

# c++ - 继承类类型的c ++容器

> ID：12818362
> 
> 赞同：2
> 
> 时间：2012-10-10T11:33:56.813
> 
> 标签：c++, inheritance, vector, containers

我想要一个容器（比如说一个 std::vector），它可以容纳各种继承的**类型**，并实例化它们，即类向量 --> 对象向量。

例如：

```
class A{};

class B: public class A
{};

class C: public class A
{};

void main()
{
    std::vector<of inherited A types> typesVec;
    std::vector<A*> objectsVec;

    typesVec.push_back(class B);
    typesVec.push_back(class C);

    for (int i = 0; i < typesVec.size(); i++)
    {
        A* pA = new typesVec.at(i);
        objectsVec.push_back(pA);
    }

} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:42:10.600

这在 C++ 中是不可能的（至少不是直接的）。我可以看到这种情况发生在具有反射的语言中，但 C++ 没有。

您可以做的是创建一个工厂或简单的方法来创建指定类型的对象。

您将拥有一个对象生成器向量，而不是一个类型向量（足够接近，对吗？）：

```
class A{};

class B: public class A
{};

class C: public class A
{};

struct AFactory
{
    virtual A* create() { return new A; }
};
struct BFactory : AFactory
{

    virtual A* create() { return new B; }
};
struct CFactory : AFactory
{

    virtual A* create() { return new C; }
};

//...

typesVec.push_back(new BFactory);
typesVec.push_back(new CFactory);

for (int i = 0; i < typesVec.size(); i++)
{
    A* pA = typesVec.at(i)->create();
    objectsVec.push_back(pA);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:25:54.470

模板有一种可重用的方法。这是派生类型的通用工厂，带有一个`install`和一个`create`方法，可以让您编写如下代码：

```
int main() {
    TypeVector<Base> t;
    t.install<Foo>("Foo");
    t.install<Bar>("Bar");

    t.create("Foo")->hello();
} 
```

请注意，这是一个草图实现。在现实世界中，您可以提供另一个模板参数来指定底层容器类型（对于少数类型，`vector`可能比 更有效`set`）。

类型向量是这样的：

```
 template <typename Base>
    class Creator;

    template <typename Base>
    class TypeVector {
    public:
        template <typename Derived>
        void install (std::string const &name) ;

        std::shared_ptr<Base> create (std::string const &name) const;

    private:
        struct Meta {
            Meta(std::shared_ptr<Creator<Base>> creator, std::string const &name)
                : creator(creator), name(name) {}

            std::shared_ptr<Creator<Base>> creator;
            std::string name;
        };

        std::vector<Meta> creators_;
    }; 
```

我们不知何故需要一种以可分配方式*存储类型的方法。*我们这样做`boost::shared_ptr`，它结合了一个抽象基类和一个模板派生类：

```
template <typename Base>
class Creator {
public:
    virtual ~Creator() {}        
    virtual std::shared_ptr<Base> create() const = 0;
};

template <typename Base, typename Derived>
class ConcreteCreator : public Creator<Base> {
public:
    virtual std::shared_ptr<Base> create() const {
        return std::shared_ptr<Base>{new Derived()};
    }
}; 
```

“具体的创建者”能够分配一个实际的对象，并返回一个指向它的指针。

最后，这里是`TypeVector::install`and的实现`TypeVector::create`：

```
template <typename Base>
template <typename Derived>
void
TypeVector<Base>::install (std::string const &name)
{
    creators_.emplace_back(
        std::shared_ptr<Creator<Base>>(new ConcreteCreator<Base, Derived>()),
        name);
}

template <typename Base>
std::shared_ptr<Base> 
TypeVector<Base>::create (std::string const &name) const
{
    for (auto m : creators_) {
        if (name == m.name) return m.creator->create();
    }
    throw std::runtime_error("...");
} 
```

最后，这是一个测试：

```
#include <iostream>
struct Base {
    virtual ~Base() {}
    virtual void hello() const = 0;
};
struct Foo : Base {
    virtual void hello() const { std::cout << "I am a Foo\n"; }
};
struct Bar : Base {
    virtual void hello() const { std::cout << "I am a Bar\n"; }
};

int main() {
    TypeVector<Base> t;
    t.install<Foo>("Foo");
    t.install<Bar>("Bar");

    t.create("Foo")->hello();
} 
```

你可以走得更远，使任何构造函数都可用于代码，例如...

```
...
    Bar(Color, Age, int)
...
t.create("Foo", Color::Red, Age::TooOld, 42) 
```

... but this requires an awesome grasp of variadic template argument lists, and how to fold them into a constructor call (can be done and has been done, but it would explode this answer).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:54:45.187

只是一个快速的解决方案草图：

C++ 标准不提供对构造函数的直接调用。因此，您不能拥有指向构造函数的函数指针；但是，您可以使用包装函数“create”，例如：

```
template<typename T>
T* create () {
   return (new T();
} 
```

为一个参数、两个参数……提供重载的创建定义，或者尝试使用可变参数模板；或者，如果您已经知道需要什么类型，则可以专门创建创建函数。然后你可以有一个指向创建函数的函数指针：

```
&create<TheType> 
```

但请注意，此函数的签名取决于所使用的类型。但是，您可以创建一个结构，其中包含模板类型的 typdef、类型指针的 typedef 以及作为 functor 的 create 函数`operator()`。

因此，您可以有两个向量，一个用于指向创建函数的函数指针，或者替代前面提到的结构，另一个用于实际对象。在您只有继承类型的情况下，您可以为每个继承的类型 B、C、... 定义函数`A* createB() { return new B(); }`, `A* createC() { return new C(); }`, ... 并为指向这些创建函数的指针提供一个向量，并为 A 定义第二个向量指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:10:11.957

我可能会指出 Andrei Alesandrescu 的书 Modern C++ Design（或他在书中描述的 Loki 库）和关于类型列表的章节。这将要求您`typeVec.insert( type )`在编译时执行。

# android - 使用 BaseAdapter 的 ListView

> ID：12818370
> 
> 赞同：1
> 
> 时间：2012-10-10T11:34:22.963
> 
> 标签：android, android-layout

先生，我正在使用 BaseAdapter 从我的 sqlite 数据库中为 listview 编写代码。我搜索了很多，但找不到像我写的任何代码。所以请帮助我。我有一个表 MONEY，它有四个字段 ID，FIRSTNAME，MONEY，DESCRIPTION。我在这一行出错： text1.setText(list1[position]);

```
package com.anurag.main;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Money extends Activity {
ArrayList list1;
TextView text1, text2, text3, text4;
ImageView iv;
ListView mList;
SQLiteDatabase db;
private static String DBNAME = "MainDB.db";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.money);
    mList = (ListView) findViewById(R.id.mList);
    list1 = new ArrayList();
    try {
        db = openOrCreateDatabase(DBNAME, MODE_WORLD_READABLE, null);
        Cursor c = db.rawQuery("select * from MONEY", null);
        while (c.moveToNext()) {
            list1.add(c.getString(1));
        }
    } catch (Exception e) {
        // TODO: handle exception
    }
    mList.setAdapter(new MyArrayAdapter(getApplicationContext()));

}

class MyArrayAdapter extends BaseAdapter {
    Context context;

    public MyArrayAdapter(Context c) {
        context = c;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(R.layout.custom1, null);
        text1 = (TextView) v.findViewById(R.id.text1);
        text1.setText(list1[position]);**// Problem in this line**
        // TODO Auto-generated method stub
        return null;
    }

}
} 
```

实际上我正在从我的数据库中填充数据并希望在列表视图中显示。如果我写错了代码，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:52:56.860

换行

```
View v = inflater.inflate(R.layout.custom1, null); 
```

至

```
convertView = inflater.inflate(R.layout.custom1, null); 
```

并更改`return null`为`return convertView`

所以：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.custom1, null);
        text1 = (TextView) v.findViewById(R.id.text1);
        text1.setText(list1[position]);**// Problem in this line**
        // TODO Auto-generated method stub
        return convertView;
    } 
```

还要更改您的 getCount 方法以返回数组的大小，因此：

```
@Override
    public int getCount() {
        // TODO Auto-generated method stub
        return list1.size();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:41:40.477

你试过改变你的

```
text1.setText(list1[position]); 
```

至

```
text1.setText(list1.get(position)); 
```

# android - 如何以编程方式验证 IMAP 帐户？

> ID：12818372
> 
> 赞同：2
> 
> 时间：2012-10-10T11:34:25.927
> 
> 标签：android, account

在我的 android 应用程序中，我需要对几种类型的帐户进行身份验证。Google 帐户很容易进行身份验证。但是我在**IMAP/POP3**帐户中失败了。是否有任何方法可以通过编程来验证**IMAP/POP3**帐户？

# python - Django，urlpatterns中的名称参数

> ID：12818377
> 
> 赞同：45
> 
> 时间：2012-10-10T11:34:50.203
> 
> 标签：python, django, django-class-based-views, urlconf, url-pattern

我正在关注我的 urlpatterns 的教程：

```
urlpatterns = patterns('',
    url(r'^passwords/$', PasswordListView.as_view(), name='passwords_api_root'),
    url(r'^passwords/(?P<id>[0-9]+)$', PasswordInstanceView.as_view(), name='passwords_api_instance'),
    ...other urls here...,
) 
```

*PasswordListView*和*PasswordInstanceView*应该是基于类的视图。我无法弄清楚**名称**参数的含义。它是传递给视图的默认参数吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-10T12:06:25.663

不，只是 django 让您可以选择命名视图，以防您需要从代码或模板中引用它们。这是有用且良好的做法，因为您避免在代码或模板中硬编码 url。即使您更改了实际的 url，您也不必更改任何其他内容，因为您将通过名称引用它们。

前有意见：

```
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse #this is deprecated in django 2.0+
from django.urls import reverse #use this for django 2.0+

def myview(request):
    passwords_url = reverse('passwords_api_root')  # this returns the string `/passwords/`
    return HttpResponseRedirect(passwords_url) 
```

更多[在这里](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)。

模板中的 ex

```
<p>Please go <a href="{% url 'passwords_api_root' %}">here</a></p> 
```

更多[在这里](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)。

# c# - 对象关联：哪个对象应该引用另一个？

> ID：12818381
> 
> 赞同：0
> 
> 时间：2012-10-10T11:35:14.033
> 
> 标签：c#, asp.net, oop, agile

这是我们制作的那种网站常见的任务，但我不确定设计课程的最佳方式。作为敏捷开发的新手，我想确保避免养成坏习惯。

我正在开发一个包含多个国家/地区的页面的网站。CMS 允许用户更改每个国家/地区页面的内容（标题、副本等）。我们被询问是否可以通过 CMS 管理时间表（可下载的 PDF）。

假设我有一个 Country 课程和一个 Timetable 课程，什么是最好的（从敏捷的角度来看）？

1.  在国家类中创建一个属性：

`public List<Timetable> Timetables`

1.  在 Timetable 类中创建一个属性：

`public Country AssignedCountry`

当然，什么是最好的取决于信息的使用方式。如前所述，每个国家/地区都有一个页面，将显示该国家/地区的时间表。但是，还有一个时间表页面，列出了所有时间表，理想情况下，显示了他们所在的国家/地区。

使用选项 1 意味着国家页面可以轻松列出它的时间表，但时间表页面上的每个时间表都没有参考它分配到的国家/地区。

选项 2 意味着时间表页面更容易，因为我可以列出所有时间表并显示相关国家/地区。然而，国家页面更尴尬，因为每个国家都不知道它的时间表，所以需要一些其他方法来获取相关的时间表。

选项 3？由于时间表并不是一个国家/地区的真正属性，同样，国家/地区也不是 PDF 文件的属性，我想我最好创建一个静态实用程序类（工厂？），其中包含我可以调用的方法来获取我需要的信息 - 按国家/地区的时间表或按时间表的国家/地区的时间表。数据库中的国家/时间表关系是多对多的，因此这似乎是更合乎逻辑的解决方案。

我们的客户通常希望向 CMS 添加更多功能，通常决定事物之间的关系不是问题，但这种事情让我感到厌烦。

我是不是把事情复杂化了？我缺少一个简单的经验法则或技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:43:03.440

我同意选项 1 和选项 2 不是最适合您的。最好的选择可能是使用数据库并使用第三类读取您需要的内容。

当然，您也可以同时使用选项 1 和 2。

在 Country 中，您知道要显示什么 Timetable，在 Timetable 中，您知道 Country 可以显示什么。

你也可以强制使用这两个选项之一，但这样做你至少需要一个列表中的国家列表，当你有一个时间表时，你会循环所有国家，询问“isValidTimetable”，然后你就拥有了所有国家可以显示时间表。

但这一切都取决于你有多少物品，你没有告诉我们的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:44:47.667

它归结为几个简单的问题......

*   每个时间表是否仅适用于一个国家？
*   每个时间表是否必须与一个国家/地区相关联，还是可以自由浮动？

如果每个时间表都必须与一个国家/地区相关联，我很想将国家/地区 ID 放在时间表对象中，然后从带有连接的 sql 中选择以进行显示。如果答案不同，您应该考虑这些对象的完整用例，这应该为您定义答案。

# common-lisp - 十进制浮点包

> ID：12818384
> 
> 赞同：0
> 
> 时间：2012-10-10T11:35:23.440
> 
> 标签：common-lisp, gnu-common-lisp

我了解使用二进制（或 binaryoid）浮点并以十进制表示结果时的复杂性：

```
1 (do ((numerator 1 (* 10 numerator)))
 2     ((>= numerator 1000000000000))
 3   (let ((fred (list 'coerce (/ numerator 3) (quote 'double-float))))
 4     (prin1 fred)
 5     (princ " ")
 6     (prin1 (eval fred))
 7     (terpri)))
(COERCE 1/3 'DOUBLE-FLOAT) 0.3333333333333333d0
(COERCE 10/3 'DOUBLE-FLOAT) 3.3333333333333335d0
(COERCE 100/3 'DOUBLE-FLOAT) 33.333333333333336d0
(COERCE 1000/3 'DOUBLE-FLOAT) 333.3333333333333d0
(COERCE 10000/3 'DOUBLE-FLOAT) 3333.3333333333335d0
(COERCE 100000/3 'DOUBLE-FLOAT) 33333.333333333336d0
(COERCE 1000000/3 'DOUBLE-FLOAT) 333333.3333333333d0
(COERCE 10000000/3 'DOUBLE-FLOAT) 3333333.3333333335d0
(COERCE 100000000/3 'DOUBLE-FLOAT) 3.3333333333333332d7
(COERCE 1000000000/3 'DOUBLE-FLOAT) 3.333333333333333d8
(COERCE 10000000000/3 'DOUBLE-FLOAT) 3.3333333333333335d9
(COERCE 100000000000/3 'DOUBLE-FLOAT) 3.3333333333333332d10 
```

但我希望避免最后一个可变数字的不合理性。在这种情况下，计算速度对我来说并不重要。

那里是否存在任何真正的十进制浮点 LISP 包？

**编辑 1**：理想情况下，这个包将允许任意精度，就像 bignum 对整数一样。

**编辑 2**，回应 Dennis Jaheruddin 的问题：

> [I]如果您对最后一位不感兴趣，而只是希望数字相同，您可能只想观察前 15 位左右的数字？

我想到了那个。它行不通。例如，在 2/3 的情况下，我想要 666667 之类的东西。我看到的是：

```
 1 (do ((numerator 2 (* 10 numerator)))
 2     ((>= numerator 1000000000000))
 3   (let ((fred (list 'coerce (/ numerator 3) (quote 'double-float))))
 4     (prin1 fred)
 5     (princ " ")
 6     (prin1 (eval fred))
 7     (terpri)))
(COERCE 2/3 'DOUBLE-FLOAT) 0.6666666666666666d0
(COERCE 20/3 'DOUBLE-FLOAT) 6.666666666666667d0
(COERCE 200/3 'DOUBLE-FLOAT) 66.66666666666667d0
(COERCE 2000/3 'DOUBLE-FLOAT) 666.6666666666666d0
(COERCE 20000/3 'DOUBLE-FLOAT) 6666.666666666667d0
(COERCE 200000/3 'DOUBLE-FLOAT) 66666.66666666667d0
(COERCE 2000000/3 'DOUBLE-FLOAT) 666666.6666666666d0
(COERCE 20000000/3 'DOUBLE-FLOAT) 6666666.666666667d0
(COERCE 200000000/3 'DOUBLE-FLOAT) 6.6666666666666664d7
(COERCE 2000000000/3 'DOUBLE-FLOAT) 6.666666666666666d8
(COERCE 20000000000/3 'DOUBLE-FLOAT) 6.666666666666667d9
(COERCE 200000000000/3 'DOUBLE-FLOAT) 6.6666666666666664d10 
```

如您所见，我什至无法使用最后一位来确定是否四舍五入；64 舍入到 60，而不是 70。但我可以丢弃最后一个数字并使用前一个数字来舍入其余的数字。不过，我对此感到不舒服，因为（a）此时我开始放弃很多精度，并且（b）我不确定这是否会导致舍入错误的方式. 十进制浮点包，最好具有任意精度，将是理想的。

**编辑 3**：正如 Rainer Joswig 在下面的回答中指出的那样，一个不可移植的潜在解决方案是设置浮点精度。对于那些在家跟随的人，他在[这里](https://stackoverflow.com/questions/11984746/lisp-digits-after-decimal-point/12017220#11985155)指出，这样做是这样的：[`(SETF (EXT:LONG-FLOAT-DIGITS) n)`](http://www.clisp.org/impnotes/num-concepts.html#lfd)

**编辑 4**：在他回答后的评论中，Rainer Joswig 建议研究代数系统 Maxima 和 Axiom。这样做会导致这些优秀的维基百科资源：

*   文章[数学软件](https://en.wikipedia.org/wiki/Mathematical_software)
*   文章[计算机代数系统的比较](https://en.wikipedia.org/wiki/Comparison_of_computer_algebra_systems)
*   那篇文章的[另见](https://en.wikipedia.org/wiki/Comparison_of_computer_algebra_systems#See_also)部分
*   该文章的[外部链接](https://en.wikipedia.org/wiki/Comparison_of_computer_algebra_systems#External_links)部分，其中大部分链接指向软件列表

**编辑5：**我已经确定我不需要十进制浮点包，但我仍然很好奇是否有一个。可能没有。

为什么我不需要一个？答案是（a）Rainer Joswig 指向 wu-decimal 包的指针和（b）wvxvw 提到长除法的组合。

虽然 wu-decimal 没有常规特征和尾数使用以 10 为基数，但它确实引入了一个有趣的想法：将数字存储为比率。所以 1/3 存储为 1/3，而不是重复的（对于有限长度）二进制分数。尽管将存储为比率的数字相乘很快就会产生相当长的比率，但始终保持原始精度。我将使用这个想法。我不需要的是 wu-decimal 在适当的时候非常漂亮地解析和写入比率作为十进制数，所以我不会安装该软件包。如果您有兴趣简化这些值的解析和写入，请查看包。（我没用过。）

那么，剩下的就是将比率打印为十进制数。为此，我将使用长除法，就像 wvxvw 一样。我的代码有些不同，但是对于长除法的想法，我非常感谢他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:48:54.947

没用过：

[http://wukix.com/lisp-decimals](http://wukix.com/lisp-decimals)

在 GNU CLISP 中，您可以设置浮点精度。

# java - JDBC连接池管理

> ID：12818385
> 
> 赞同：1
> 
> 时间：2012-10-10T11:35:24.730
> 
> 标签：java, jdbc, datasource, connection-pooling

我`org.apache.commons.dbcp.BasicDataSource`用作我的数据源实现，我的代码获取连接并关闭连接，如下所示：

```
Connection conn = dataSource.getConnection(); 
```

当我完成连接工作时，我将关闭它

```
conn.close(); 
```

我的问题是：`conn.close()`真的很接近，所以当连接关闭时`conn.close()`，数据源的表现如何。我听说数据源连接关闭并不是真的关闭，只是发布，但我无法从数据源类中找到发布API。我想知道数据源如何管理数据库连接的创建、关闭和释放。

顺便提个小问题：datasource是如何刷新连接的，我的意思是如果datasource的连接已经一年没有使用了，datasource是如何保持连接可用的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:03:38.680

`DataSource`( `javax.sql.DataSource`) 表示您可以从中获取数据库连接的抽象概念。

因此，`DataSource`它本身并没有定义如何管理连接的任何细节，并且不同的实现`DataSource`可能以不同的方式管理连接：

*   一个简单的实现（例如 Spring 的`DriverManagerDataSource`）可能会在您每次请求时创建一个新连接，在这种情况下`close()`实际上会关闭连接。

*   由连接池（例如 Apache DBCP 或 c3p0）支持的实现从池中返回现有连接。`Connection`这种实现返回的对象是一个代理，并且它的`close()`方法被覆盖以返回到池的连接而不是关闭它。

如果您想知道您的连接池是如何管理连接的，请查看[您的连接池实现的文档](http://commons.apache.org/dbcp/configuration.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:55:51.323

来自数据源的`close()`连接调用不一定会关闭数据库连接。它只会将连接返回到池以供重用。这样做的方法是，与数据库的实际连接用一种`PooledConnection`类修饰，并且覆盖`close()`此方法`PooledConnection`以仅将连接标记为可用。

# python - 从字符串生成对象

> ID：12818387
> 
> 赞同：0
> 
> 时间：2012-10-10T11:35:28.433
> 
> 标签：python, string, variables, object

我有一个字符串列表，每个字符串都代表书籍及其一些属性，例如

```
# each book followed by the price and the name of the genre
book_names = ['love 3 romance',
              'rose 6 drama',
              'flower 7 nice_story'] 
```

我想以某种方式为每本书创建一个新对象，并为其创建字符串描述属性的其他部分。

这是我尝试过的（显然，它不起作用）：

```
class Book_Class():
  price=0
  genre=''
  book_content=[]

for i in book_names:
  name=i.split()[0]
  name=Book_Class()
  name.price=i.split()[1]
  name.genre=i.split()[2] 
```

也许有一种简单的方法可以实现我所追求的（请告诉我，因为我对编程还很陌生……）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T11:41:23.270

有几种方法：

1.  改用字典，在许多情况下就足够了：

    ```
    keys = ['name', 'price', 'gender']
    book = { k: v for k, v in zip(keys, i.split()) } 
    ```

2.  给你的`Book`类一个有意义的`__init__`初始化器：

    ```
    class Book(object):
        name = ''
        price = 0
        gender = None

        def __init__(self, name, price, gender):
            self.name = name
            self.price = price
            self.gender = gender 
    ```

    并将您的解析值传递给它：

    ```
    Book(*i.split()) 
    ```

3.  作为最后的手段，您可以使用[`setattr`](http://docs.python.org/library/functions.html#setattr)在现有对象上设置任意属性：

    ```
    book = Book()
    for attr, value in zip(keys, i.split()):
        setattr(book, attr, value) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:26:20.933

完成相同任务的另一种方法是使用命名元组。

```
book_names = ['love 3 romance',
              'rose 6 drama',
              'flower 7 nice_story']

from collections import namedtuple
book = namedtuple("Book", "name price genre")

# convert book_names to books
[book(*b.split()) for b in book_names]

Output: [Book(name='love', price='3', genre='romance'),
         Book(name='rose', price='6', genre='drama'),
         Book(name='flower', price='7', genre='nice_story')] 
```

然后您可以按预期访问属性

```
book1 = [book(*b.split()) for b in book_names][0]
print book1.name, book1.price, book1.genre
Output: ('love', '3', 'romance') 
```

如果你想使用第一个参数作为变量名，你可以这样做：

```
book = namedtuple("Book", "price genre")
for b in book_names:
    globals()[b.split()[0]] = book(*b.split()[-2:])

# now you can access your books:
love.price 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:06:20.317

Ashwini Chaudhary 给出的答案是使用 globals()

```
# each book followed by the price and the name of the genre
book_names = ['love 3 romance',
              'rose 6 drama',
              'flower 7 nice_story']
class Book_Class():
  price=0
  genre=''
  book_content=[]
for i in book_names:
  nnn='name'
  globals()[nnn]=i.split()[0]
  name=Book_Class()
  name.price=i.split()[1]
  name.gender=i.split()[2] 
```

# python - 发出“单击”信号时如何使 GtkMenuToolButton 打开相同的菜单？

> ID：12818397
> 
> 赞同：1
> 
> 时间：2012-10-10T11:35:51.147
> 
> 标签：python, gtk

我正在使用 GtkMenuToolButton，它有一个按钮和一个菜单。当您单击箭头时，将打开菜单。我想让按钮也打开相同的菜单。简单地在“clicked”回调中发出“show-menu”是行不通的。请帮助如何使这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:31:37.753

我目前最终这样做了：

*   而不是 GtkMenuToolButton 我有 GtkToolItem 与自定义内容
*   在自定义内容中，我有 GtkMenuButton
*   在那个里面，我删除了默认的 GtkArrow 并将其替换为具有 Label + GtkArrow 的 1x2 GtkGrid

总的来说，它做我想要的=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:20:42.920

创建菜单时，将对其的引用另存为`self.tool_button_menu`或其他内容；然后在`clicked`回调中，调用

```
self.tool_button_menu.popup(None, None, None, None, 0, Gtk.get_current_event_time()) 
```

前两个`None`是父菜单和父菜单项（不适用）。第二个`None`s 是一个定位回调函数（稍后会详细介绍）和要传递给它的数据。`0`是鼠标按钮，如果菜单是由按下鼠标按钮启动的（但你应该传递 0，因为我认为在你的情况下它是鼠标按钮释放或按键。）最后一个参数是给菜单弹出事件。

现在定位功能。它接受两个参数并返回三个：

```
def positioning_function(menu, data=None):
    # ...magic...
    return x, y, push_in 
```

`push_in``True`如果您希望重新定位菜单以使其始终适合屏幕，则应该是。似乎是个好主意。您可以通过查看工具按钮的`x`;来获得良好的价值。读取该对象的、和属性并计算出放置菜单的好位置。`y``get_allocation()``x``y``width``height`

# mysql - mysql innodb 主键

> ID：12818401
> 
> 赞同：2
> 
> 时间：2012-10-10T11:36:09.663
> 
> 标签：mysql, primary-key, uuid, database-performance

目前我们有类型 4 UUID(random) 作为主键的表。我们的应用层会批量插入数据库。但是由于主键是随机的，这将导致多次磁盘旋转。有四张桌子。

```
CREATE TABLE process (
     process_id binary(16) not null, // uuid
     created_time bigint not null,
     owner varchar(150) not null,
     primary key (process_id),
     index idx_c_t (created_time),
     index idx_o (owner)
)
Records inserted = 2000/min

CREATE TABLE process_job (
     job_id binary(16) not null, //uuid
     process_id binary(16) not null,  //uuid
     info varchar(200),
     text varchar(500),
     primary key(job_id),
     index idx_p_id (process_id)
)
Records inserted = 10000/min

CREATE TABLE ob_status (
     job_id binary(16) not null, //uuid
     status ('STARTED', 'SUCCESS', 'ERROR') not null,
     job_code varchar(100) not null,
     info varchar(200),
     text varchar(500),
     primary key(job_id, status, job_code)
)
Records inserted = 20000/min

CREATE TABLE process_job_custom (
     job_id binary(16) not null, //uuid
     key varchar(100) not null,
     value varchar(500),
     primary key(process_id, key)
)
Records inserted = 10000/min 
```

我们所有的表格都使用 DYNAMIC 格式。

此外，我们会定期删除 15 天前的数据。我们通过考虑大约 1000 条记录分批运行此删除操作。但是当删除运行时，整个数据库的性能都很差。磁盘使用率非常高。（我们怀疑这是由于主键的随机性）

所以我们计划将我们的主键更改为（基于时间的键，uuid）并在（uuid）列上添加索引。

记录可能以随机顺序到达（不完全按照基于时间的密钥顺序）。但是基于时间的密钥的记录大多在 5 分钟内到达。我们的删除也是基于基于时间的键。

这会影响插入的性能吗？

此外，我们的主要用例涉及基于时间的查询。那么选择性能也会提高吗？

此外，我们计划按基于时间的键进行分区。

这会帮助我们提高整体性能吗？

我们怀疑主要问题是主键的随机性。

将基于时间的键（类似于进程的创建时间）添加为所有表中主键的第一部分，并且基于 uuid 列的索引对我们有帮助吗？

# wcf - 如何将 WCF 服务与原始消息一起使用？

> ID：12818405
> 
> 赞同：1
> 
> 时间：2012-10-10T11:36:21.163
> 
> 标签：wcf, message

我正在尝试将 WCF 服务与原始消息一起使用。

1）WCF服务代码：

```
[DataContract]
public class Person
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string LastName { get; set; }
}

public static List<Person> CreateEmployees()
{
    List<Person> lstPersons = new List<Person>()
    {
        new Person { Id = 1, FirstName = "Andrey", LastName = "Andreyev" },
        new Person { Id = 2, FirstName = "Sergey", LastName = "Sergeyev" }
    };

    return lstPersons;
}

[ServiceContract]
public interface ITestService
{
    [OperationContract(Action = TestService.RequestAction, ReplyAction = TestService.ReplyAction)]
    Message GetPersonById(Message id);
}

public class TestService : ITestService
{
    public const String ReplyAction = "http://localhost:4249/Message_ReplyAction";
    public const String RequestAction = "http://localhost:4249/Message_RequestAction";

    public Message GetPersonById(Message id)
    {
        string firstName = Employees.CreateEmployees().First(e => e.Id == id.GetBody<int>()).FirstName;
        Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);
        return response;
    }
} 
```

2）客户端代码：

```
static void Main(string[] args)
{
    TestServiceClient client = new TestServiceClient();
    String RequestAction = "http://localhost:4249/Message_RequestAction";
    int value = 1;
    Message request = Message.CreateMessage(MessageVersion.Default, RequestAction, value);
    Message reply = client.GetPersonById(request);
    string firstName = reply.GetBody<string>();

    Console.WriteLine(firstName);
    client.Close();
} 
```

当我运行客户端时： int value = 1 一切正常。但是，当我使用：int value = 2 时，出现以下错误：

> *第 1 行位置 276 出错。从命名空间“http://schemas.microsoft.com/2003/10/Serialization/”中期待元素“字符串”。遇到名称为“故障”的“元素”，命名空间“http://” www.w3.org/2003/05/soap-envelope'。*

在线：

```
string firstName = reply.GetBody<string>(); 
```

服务已启动，我在 VS2008 中通过“添加服务引用...”添加了服务引用。我使用 .NET Framework 3.5。

我不确定为什么会收到此错误。

提前感谢您的帮助。

戈兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:30:54.590

好吧，您遇到了 SOAP 错误。尝试记录消息（使用 Fiddler、WCF Logging 或仅从客户端从服务器获取的消息中读取 Message.GetReaderAtBodyContents），并查看故障的实际含义。确保在服务器端打开 IncludeExceptionDetailInFaults。

# multithreading - Delphi 静态数组线程安全仅在临界区

> ID：12818411
> 
> 赞同：1
> 
> 时间：2012-10-10T11:36:42.570
> 
> 标签：multithreading, delphi, critical-section, static-array

我有一个 Win32 线程（没有 TThread），它一直运行并迭代一个静态数组。主线程可以修改数组的字段。**没有像 TThreadList**（对于无 vcl 应用程序）这样的组件，只有 Windows 关键部分（TRTLCriticalSection），使这个线程安全的最佳方法是什么？

代码：

```
type
  T = record
    Idx: Integer;
    Str: string;
    Num: Real;
    Enabled: Boolean;
  end;

var
  A: Array[0..9] of T;
  Cnt: Integer;
  CS: TRTLCriticalSection;

procedure thread;
var
  I: Integer;
begin
  while True do
  begin
    for I := Low(A) to High(A) do
    begin
      if A[I].Enabled then
      begin
        //modify some fields from A[I]

        Inc(A[I].Idx);
        if A[I].Idx >= 10 then
        begin
          A[I].Enabled := False;
          InterlockedDecrement(Cnt);
        end;
      end;
    end;
    if Cnt = 0 then Sleep(1);
  end;
end;

procedure Add(...); //called only from mainthread

  function GetFreeField: Integer;
  begin
    for Result := Low(A) to High(A) do
      if not A[Result].Enabled then Exit;
    Result := -1;
  end;

var
  I: Integer;
begin
  I := GetFreeField;
  if I = -1 then Exit;

  //set fields A[I]

  A[I].Enabled := True;
  InterlockedIncrement(Cnt);
end; 
```

在开始时，数组初始化为 enabled = false 和 cnt = 0。

以下修改是否足够？

```
procedure thread;
var
  I: Integer;
begin
  while True do
  begin
    for I := Low(A) to High(A) do
    begin
      EnterCriticalSection(CS);
      if A[I].Enabled then
      begin
        LeaveCriticalSection(CS);
        //modify some fields from A[I]

        Inc(A[I].Idx);
        if A[I].Idx >= 10 then
        begin
          EnterCriticalSection(CS);
          A[I].Enabled := False;
          LeaveCriticalSection(CS);

          InterlockedDecrement(Cnt);
        end;
      end
      else
        LeaveCriticalSection(CS);
    end;
    if Cnt = 0 then Sleep(1);
  end;
end;

procedure Add(...); //called only from mainthread
var
  I: Integer;
begin
  I := GetFreeField;
  if I = -1 then Exit;

  //set fields A[I]

  EnterCriticalSection(CS);
  A[I].Enabled := True;
  LeaveCriticalSection(CS);

  InterlockedIncrement(Cnt);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:02:22.753

在我看来，您的设计是这样的：

1.  主线程只会将`Enabled`标志从切换`False`到`True`。
2.  工作线程只在相反方向切换标志。
3.  除了我们在这里看到的代码之外，没有其他代码可以访问该数组。

如果这是真的，那么没有关键部分的原始代码已经是线程安全的。至少它是在使用强内存模型的硬件上。例如 Intel x86 或 x64 架构。`Enabled`布尔值充当线程之间的同步屏障。

然而，你的整个设计在我看来是有缺陷的。`while True`循环和原因让`Sleep`我有些警觉。该线程无缘无故地重复运行。当然，您应该只在主线程对数组进行修改时才在线程中执行代码。我更喜欢使用信号（例如 Windows 事件）来唤醒线程。

# javascript - 如何检查 URL 末尾是否有特定字符串

> ID：12818413
> 
> 赞同：7
> 
> 时间：2012-10-10T11:36:51.293
> 
> 标签：javascript, jquery, url

我需要根据 URL 末尾的内容来让叠加层向下滑动。

如果（URL 末尾有 'faq'）{ 覆盖下降 }

你怎么能在 jQuery/JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T11:40:28.637

如果你的 URL 看起来像这样`http://yourdomain.com/faq`，你可以这样做：

```
var url = window.location.href;
var lastPart = url.substr(url.lastIndexOf('/') + 1);

if (lastPart === "faq") {
   // Show your overlay
} 
```

这将使检查其他结局并对其采取行动成为可能。

**更新：**

为了让它工作，即使 URL 有一个斜杠，你也可以创建一个这样的函数：

```
function getLastPart(url) {
    var parts = url.split("/");
    return (url.lastIndexOf('/') !== url.length - 1 
       ? parts[parts.length - 1]
       : parts[parts.length - 2]);
} 
```

然后，您可以调用该函数`getLastPart(window.location.href)`来获取当前页面 URL 的最后一部分。

这也是一个工作示例：http: [//jsfiddle.net/WuXHG/](http://jsfiddle.net/WuXHG/)

*免责声明：如果您的 URL 在末尾使用哈希或查询字符串，则必须先从 URL 中删除，以便此脚本正常工作*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T11:39:59.770

您应该可以通过正则表达式使用 window.location 对象，如下所示：

```
/faq$/.test(window.location) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-05T17:45:16.200

`endsWith()`ES6 规范中添加了一个新方法。对于以前的版本，我们可以使用 polyfill

```
if (!String.prototype.endsWith)
  String.prototype.endsWith = function(searchStr, Position) {
      // This works much better than >= because
      // it compensates for NaN:
      if (!(Position < this.length))
        Position = this.length;
      else
        Position |= 0; // round position
      return this.substr(Position - searchStr.length,
                         searchStr.length) === searchStr;
  }; 
```

现在您可以轻松编写

```
If (window.location.href.endsWith("faq")) { 
   // Show your overlay
} 
```

**参考：** [https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:41:18.170

您可以使用以下方式获取当前 URL：

```
 var currentUrl = window.location.href; 
```

然后您可以使用 indexOf 检查您的令牌是否在字符串末尾（此处为常见问题解答）

```
 if (currentUrl.indexOf('faq') == currentUrl.length - 3)
 {
  // Do something here
 } 
```

# c - 为什么 fetestexcept() 在乘以浮点数时有时会抱怨？

> ID：12818419
> 
> 赞同：3
> 
> 时间：2012-10-10T11:37:11.927
> 
> 标签：c, linux, posix

我在 C99 中使用[fetestexcept()](http://pubs.opengroup.org/onlinepubs/009695399/functions/fetestexcept.html)，它有时会抱怨乘以浮点数会产生不精确的结果（[FE_INEXACT](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/fenv.h.html)）。将浮点变量与浮点文字相乘时似乎会发生这种情况。我怎样才能修改这个所以 fetestexcept() 不会抱怨？

gcc -std=c99 -lm test.c

```
#include <stdio.h>
#include <math.h>
#include <fenv.h>

#pragma STDC FENV_ACCESS ON

int main(void)
{
    float a = 1.1f;
    float b = 1.2f;
    float c = a * b * 1.3f;

    int exception = fetestexcept(FE_ALL_EXCEPT);
    if(exception != 0)
    {
        printf("Exception: 0x%x\n", exception); // 0x20 FE_INEXACT
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:43:37.327

好吧，如果您对该异常不感兴趣，请不要测试 FE_INEXACT？例如，而不是

```
 int exception = fetestexcept(FE_ALL_EXCEPT); 
```

做

```
 int exception = fetestexcept(FE_ALL_EXCEPT & ~FE_INEXACT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:49:26.443

您可以使用[Diagnostic-Pragmas](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas)忽略某些警告。

例如，如果我要编译您的代码子集：

```
#include <stdio.h>
#include <math.h> 
#include <fenv.h>  
#pragma STDC FENV_ACCESS ON  
int main(void) {
   float a = 1.1f;
   float b = 1.2f;
   float c = a * b * 1.3f;
   int exception = c;
   return 0;
 } 
```

和：

```
gcc -Wall test.c 
```

我会收到一堆警告，例如：

```
test.c:22:0: warning: ignoring #pragma STDC FENV_ACCESS [-Wunknown-pragmas]
test.c: In function ‘main’:
test.c:28:11: warning: unused variable ‘exception’ [-Wunused-variable] 
```

然后要使它们静音，您可以添加“忽略的”编译指示：

```
#pragma GCC diagnostic ignored "-Wunknown-pragmas"
#pragma GCC diagnostic ignored "-Wunused-variable" 
```

重新编译，警告消失。

# asp.net - 在 asp.net 2.0 中设置默认页面

> ID：12818427
> 
> 赞同：1
> 
> 时间：2012-10-10T11:37:37.793
> 
> 标签：asp.net

我有一个 default.aspx 页面和许多 .aspx 页面。我们仅从 default.aspx 页面导航到其他 .aspx 页面。

要求是假设用户已将任何其他 .aspx 页面添加为书签，如果存在其他 .aspx 页面，则必须强制用户转到默认页面。如何实现这一点，我使用的是 VS2005，而不是使用任何身份验证。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:39:18.027

您可以检查`Request.UrlReferrer`，如果它不是“default.aspx”重定向到默认页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:44:27.793

为此，您必须进行 URL 重写。有关更多信息，请 [阅读此](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)内容并实施[使用此内容](http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET)

# c++ - 自动类型推断和 auto&& vs auto

> ID：12818432
> 
> 赞同：1
> 
> 时间：2012-10-10T11:38:15.280
> 
> 标签：c++, c++11, rvalue-reference, type-deduction

[我刚刚看了C++11 中的](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)Scott Meyers通用引用，有一件事情我不太明白。

我对`auto`作为“通用参考”`auto&&`的 a 和常规的 a 之间有什么区别感到有些困惑，`auto`它们什么时候不同？

```
Foo f;
Foo& lvr = f;

auto lvr_a = f; // Foo&
auto rvr_a = std::move(f); // Foo&& or is it Foo?

auto&& lvr_b = f; // Foo& && => Foo&
auto&& lvr_b = std::move(f); // Foo&& && => Foo&& 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:08:06.030

auto 将衰减为值类型（即使用复制构造函数获取副本），而 auto&& 将保留引用类型。

见这里：[C++11：标准引用，用于 `auto` 对 const 和引用类型的操作](https://stackoverflow.com/questions/12242449/c11-standard-ref-for-action-of-auto-on-const-and-reference-types)

```
auto rvr_a = std::move(f); // Foo&& or is it Foo? 
```

只是`Foo`。所以这与以下内容相同：

```
Foo rvr_a = std::move(f); // Foo&& or is it Foo? 
```

但请注意，如果有的话，这仍然会调用移动构造函数。

# c# - 获取 VariableSizedWrapGrid 进行虚拟化

> ID：12818433
> 
> 赞同：2
> 
> 时间：2012-10-10T11:38:19.637
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我有一个网格视图。但是由于我将大量数据转储到其中，因此会引发过载异常。

我可以通过设置宽度和高度在普通的网格视图上解决这个问题，然后它将虚拟化数据。

这里的区别是我还设置了项目面板。这阻止了虚拟化的开始。

我可以通过在 VariableSizedWrapGrid 上设置宽度来让它再次工作，但这并没有显示滚动条，因此它非常无用。

```
 <GridView x:Name="ItemGridView" Width="500" Height="400" ItemsSource="{Binding ItemList}" Margin="6" Grid.Row="1">
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Width="450" Height="350" />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel> 
```

有什么想法可以让这种组合发挥作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:42:18.837

也许您可以将 GridView 放在 ScrollViewer 元素中，例如：

```
 <ScrollViewer>
  <Grid>
   <GridView x:Name="ItemGridView" Width="500" Height="400" ItemsSource="{Binding ItemList}" Margin="6" Grid.Row="1">
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Width="450" Height="350" />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
    </GridView >
  </Grid>
</ScrollViewer> 
```

# jquery - 如何用数据而不是视图刷新 webgrid？

> ID：12818435
> 
> 赞同：1
> 
> 时间：2012-10-10T11:38:23.333
> 
> 标签：jquery, asp.net-mvc-3

我想向页面添加一个复选框，并且该页面具有网络网格。因此，如果我选中复选框，它必须触发操作并将包含更多记录的视图返回到列表中。但是 webgrid 没有刷新，也没有显示最近的记录。我该如何解决我的问题。请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:40:15.423

IE 使用客户端缓存。所以请确保对代码禁用缓存。如下图。。

```
[OutputCache(Duration = 0, VaryByParam = "None")]        
public ActionResult GetArea(int locationId) 
```

# ruby - 在方法调用中是否有用于记忆的约定？

> ID：12818437
> 
> 赞同：15
> 
> 时间：2012-10-10T11:38:31.303
> 
> 标签：ruby, coding-style, memoization

我想避免重新评估方法调用中的值。直到现在，我正在这样做：

```
def some_method
  @some_method ||= begin
    # lot's of code
  end
end 
```

但它最终变得非常丑陋。在某些代码中，我看到如下内容：

```
def some_method
  @some_method ||= some_method!
end

private

def some_method!
  # lot's of code
end 
```

我不喜欢`!`结尾的 bang ( )，所以我想出了这个：

```
def some_method
  @some_method ||= _some_method
end

private

def _some_method
  # lot's of code
end 
```

*   在前面加上下划线是一个好的约定吗？
*   对于记忆/非记忆的方法对是否有其他约定？
*   是否有一些约定来记忆多行方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-10T12:05:17.187

我会这样做：

```
def filesize
  @filesize ||= calculate_filesize
end

private

def calculate_filesize
  # ...
end 
```

所以我只是以不同的方式命名该方法，因为我认为它更有意义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T03:45:36.673

我认为还有另一种方式，更多Java风格。

首先你应该实现注解，比如“ [Ruby 中的Java 风格的注解](http://bens.me.uk/2009/java-style-annotations-in-ruby)”和“[如何在Ruby 中模拟Java 风格的注解？](https://stackoverflow.com/questions/3157426/how-to-simulate-java-like-annotations-in-ruby) ”。

然后你应该添加像 _cacheable 这样的注释，它将告诉方法它应该返回实例变量，如果它是 null 它应该通过调用方法来计算它，这样你的代码会更清晰：

```
_cacheable
def some_method
   # do_some_work
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-19T18:19:21.827

我使用[memoist](https://github.com/matthewrudy/memoist) gem，它可以让您轻松地记住一个方法，而无需更改原始方法或创建两个方法。

因此，例如，不必使用两个方法`file_size`和`calculate_file_size`，而必须自己使用实例变量来实现记忆：

```
def file_size
  @file_size ||= calculate_file_size
end

def calculate_file_size
  # code to calculate the file size
end 
```

你可以这样做：

```
def file_size
  # code to calculate the file size
end
memoize :file_size 
```

每个记忆函数都带有一种刷新现有值的方法。

```
object.file_size       # returns the memoized value
object.file_size(true) # bypasses the memoized value and rememoizes it 
```

所以调用`object.file_size(true)`就相当于调用`object.calculate_file_size`......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T12:23:10.257

我通常`begin, end`按​​照您的第一个示例使用，但如果有更多代码，我只需查看变量是否存在，无需为此创建另一个方法。

```
def some_method
  return @some_method if @some_method
  # lot's of code
  @some_method
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T05:12:53.103

我也不喜欢砰的一声。我用

```
def some_method 
  @some_method_memo ||= some_method_eval 
end 

private 

def some_method_eval
  # lot's of code 
end 
```

这里`eval`是`evaluation`. 我喜欢它的阅读方式，也喜欢它使公共界面简洁。

我鄙视依赖下划线作为区分标记的约定：它们都容易出错并且要求我记住 YAMC（又一个无意义的约定）。Ada 语言专为安全关键型应用程序而设计，不允许前导、尾随或多个下划线。好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T10:49:20.797

我通常会像在[Agis](https://stackoverflow.com/a/12818921/408011)回答中那样做，或者：

```
def filesize() @filesize ||=
  calculate_filesize
end 
```

顺便提一句：

我经常使用这种记忆技术：

```
def filesize() @_memo[:filesize] ||=
  calculate_filesize
end 
```

这将允许您稍后使用一个简单的`@_memo.clear`. @_memo 变量应该像这样初始化`Hash.new { |h, k| h[k] = Hash.new }`。它为您提供了使用 ActiveSupport::Memoize 和类似的元编程技术的许多冒险，这些技术[可能要慢得多](http://bibwild.wordpress.com/2011/07/14/beware-of-activesupportmemoizable/)。

# c# - 如何获得从0到1的值？

> ID：12818440
> 
> 赞同：3
> 
> 时间：2012-10-10T11:38:38.307
> 
> 标签：c#

我试图寻找这个问题的答案，但我想没有人需要这样的东西，或者这是我无法理解的超级简单的东西。所以：

我的值从 45 变为 20。

我需要一个在 45 到 20 的同时从 0 到 1 的值。我知道 45 - 20 = 25，这将是我的 100%，因此是数字 1。

我会像这样在 Lerp 值中实现它：

```
public float minHeight = 10.0f;
public float maxHeight = 30.0f;
public float convertedValue; 
```

转换值 = ??? （类似于 45 - 20 = 25 = 100%）* 0.01；

```
newValue = Mathf.Lerp(minHeight, maxHeight, convertedValue); 
```

希望有人可以帮助我。我对编码相当陌生，我只是想知道这是否可能。谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:41:47.263

我相信与您的解释相匹配的计算将是

```
newValue = (convertedValue - minHeight) / (maxHeight - minHeight); 
```

即`newValue = 0`@`minHeight`和 1 @`maxHeight`

**编辑**

我以前从未见过 Lerp，但显然它是简单的线性插值。

但是，从[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.mathhelper.lerp.aspx)

Lerp 定义为

```
value1 + (value2 - value1) * amount 
```

即在你的例子中`convertedValue`应该是分数，答案是插值结果，这意味着你的问题/我的（和 Esailja 的）对它的解释是相反的:)

IE

```
Mathf.Lerp(10.0, 30.0, 0.5) = 20.0 
```

然而

```
InvertedLerp(10.0, 30.0, 20) = 0.5 // My / Esailja's calc 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:04:26.563

我认为您[`Mathf.Lerp`](http://docs.unity3d.com/Documentation/ScriptReference/Mathf.Lerp.html)是`Unity3D`API 的一部分。已经存在一个功能来做你想做的事情：[`Mathf.InverseLerp`](http://docs.unity3d.com/Documentation/ScriptReference/Mathf.InverseLerp.html). 你应该使用这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:42:40.160

```
public float minHeight = 10.0f;
public float maxHeight = 30.0f;

float curHeight = 25.0f;

float newValue = ( curHeight - minHeight ) / ( maxHeight - minHeight ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:41:19.323

```
minvalue=20
maxvalue=45
result=(aktvalue-minvalue)/(maxvalue-minvalue) 
```

像这样的东西？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T11:44:57.877

房产怎么样？

```
public int neededvalue
{
    get
    {
        if (value == 45)
            return 1;
        else if (value == 20)
            return 0
        else
            throw new Exception("wrong input");
    }
}

public float neededvaluealternative
{
    get
    {
        return (value - 20) / (45 - 20)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T11:45:34.283

```
 public float AnswerMureahkosQuestion(float input)
{
   const float minValue = 20;
   const float maxValue = 45;
   float range = maxValue - minValue;

   // nominalise to 1
   // NOTE: you don't actually need the *1 but it reads better
   float answer = (input+0.00001/*prevents divbyzero errors*/) / range * 1; 

   // invert so 45 is 0 and 20 is 1
   answer =  1 - answer;
   return answer;
} 
```

# javascript - 如何将一组可拖动对象限制为一个可放置对象，将另一组可拖动对象限制为第二个可放置对象

> ID：12818448
> 
> 赞同：1
> 
> 时间：2012-10-10T11:39:23.240
> 
> 标签：javascript, jquery, css, jquery-ui-draggable

我有一个网站，我有一组要限制为仅在放入特定可放置对象时显示其信息的可拖动对象。

这是我的代码：

```
<script type = "text/javascript"> 

$(function() {

    $(".draggablem").draggable({
        revert: true,
        opacity: .75,
        containment: '.container',

        cursor: 'move',
        cursorAt: {
            top: 25,
            left: 75
        }

    });

    $(".draggableo").draggable({
        revert: true,
        opacity: .75,
        containment: '.container',
        cursor: 'move',
        cursorAt: {
            top: 25,
            left: 75
        }

    });

    $(".dropable").droppable({
        activeClass: 'dragactive',
        hoverClass: 'drophover',
        drop: function(event, ui) {
            $(this).addClass('drophighlight').find('p').html('<br />' + ui.draggable.children("span").text());
        }
    });

    $(".dropable2").droppable({
        activeClass: 'dragactive',
        hoverClass: 'drophover',
        drop: function(event, ui) {
            $(this).addClass('drophighlight').find('p').html('<br />' + ui.draggable.children("span").text());
        }
    });

}); 
</script> 
```

我想限制`.draggablem`to`.dropable`和`.draggableo`to `.dropable2`。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:42:32.287

droppable 有一个选项`accept`，您应该将其设置为与您的可拖动对象匹配的选择器。

```
$('.dropable2').droppable({
    ...,
    accept: '.draggableo'
)}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:49:07.853

你的问题不是很清楚。

您可以使用该`accept`选项来定义允许删除的内容，但这不是您表达问题的方式。

如果允许删除任何元素，但问题状态仅显示何时删除特定类：

```
$(".dropable").droppable({
    drop: function(event, ui) {
        if (ui.draggable.is('.myAllowedClass')) {
            /* do highlight*/      

        }
    }
}); 
```

# excel - Excel 在

> ID：12818449
> 
> 赞同：0
> 
> 时间：2012-10-10T11:39:28.497
> 
> 标签：excel, excel-2010, vba

我有一个包含大约 1000 行的 excel 文件。每行都有一个图像，有点像其中一列中的缩略图大小。图像重叠的单元格有一个注释，实际上包含同一图像的更大版本。

打开文件时时不时地我得到

```
Excel found unreadable content in <filename>.  Do you want to recover
the contents of the file.  If I say No it closes. 
```

如果我说是，它会使用以下日志修复并删除一些部件：

```
Removed Part: /xl/drawings/vmlDrawing1.vml part.  (Drawing shape)
Removed Part: /xl/drawings/vmlDrawing2.vml part.  (Drawing shape) 
```

然后发生的是评论（包含更大版本的图像）在每一行都消失了。

该文件最初包含一个运行的宏，一旦完成，我将文件保存为 xlsx，这样可以去掉宏。

这种行为没有具体的模式，它不像我第一次在保存为 xlsx 或任何东西后重新打开它时发生。可能暂时还好，然后突然发生。

这发生在 Windows 7、Office 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-03T20:56:48.007

我有同样的问题并且能够解决它。问题是由于内存中的缓存。这是为我解决问题的代码。

`Public Sub PT_cache_clear() Dim pc As PivotCache Dim ws As Worksheet
With ActiveWorkbook For Each pc In .PivotCaches pc.MissingItemsLimit = xlMissingItemsNone Next pc End With
End Sub`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T10:39:52.023

我遇到过同样的问题。给我的 XML 消息是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<recoveryLog xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"><logFileName>error076520_01.xml</logFileName><summary>Errors were detected in file 'C:\Work\New Work\SOP New Tool.xlsm'</summary><removedRecords summary="Following is a list of removed records:"><removedRecord>Removed Records: Sorting from /xl/worksheets/sheet5.xml part</removedRecord></removedRecords></recoveryLog> 
```

我现在可以在检查我的代码后修复它。

在该excel的sheet5中的排序功能中，我之前写过如下：

```
L = Worksheets("Early Response to Check").UsedRange.Rows.Count
With Worksheets("Early Response to Check").Sort
    .SortFields.Add Key:=Range("P1"), Order:=xlAscending
    .SortFields.Add Key:=Range("AX1"), Order:=xlAscending
    .SetRange Range("A1:AZ" & L)
    .Header = xlNo
    .Apply
End With 
```

这是它无法阅读的部分，并将其视为不可读的内容。

我需要将其更改为如下：

```
L = Worksheets("Early Response to Check").UsedRange.Rows.Count
With Worksheets("Early Response to Check").Sort
    .SortFields.Add Key1:=Range("P1"), Order1:=xlAscending
    .SortFields.Add Key2:=Range("AX1"), Order2:=xlAscending
    .SetRange Range("A1:AZ" & L)
    .Header = xlNo
    .Apply
End With 
```

瞧……错误消失了。

希望这也有助于其他人纠正此类错误。

谢谢，弥勒佛

# javascript - Javascript If & else 显示和隐藏 的

> ID：12818451
> 
> 赞同：1
> 
> 时间：2012-10-10T11:39:33.987
> 
> 标签：javascript, if-statement

我觉得我的问题属于这个话题，虽然可能有点复杂：

我有一个单独的包装器，它将始终可见并具有 css 背景。

然而，这个 div 中的元素构成了基于产品值的最终视觉图像。

**例如：**

上部分需要有 if & else 来隐藏/显示基于数据库值的内容，因此如果“header_4”下的数据库行例如包含“B”，那么它将只显示`<div id="B_LT"><p>B</p></div><!-- end of 'B_LT' -->`

但同时如果'header_5'下的行内的值包含'D'也会`<div id="D_RT"><p>D</p></div><!-- end of 'D_RT' -->`与上述同时显示`<div>`。

我不需要隐藏两个较低的部分，但除此之外需要始终显示数据库

```
<!-- ########### UPPER SECTION STARTS ########## -->

<div id="wrp">

<div id="left_top">

<div id="A_LT">
<p>A</p>
</div><!-- end of 'A_LT' -->

<div id="B_LT">
<p>B</p>
</div><!-- end of 'B_LT' -->

<div id="C_LT">
<p>C</p>
</div><!-- end of 'C_LT' -->

<div id="D_LT">
<p>D</p>
</div><!-- end of 'D_LT' -->

<div id="E_LT">
<p>E</p>
</div><!-- end of 'E_LT' -->

<div id="F_LT">
<p>F</p>
</div><!-- end of 'F_LT' -->

<div id="G_LT">
<p>G</p>
</div><!-- end of 'G_LT' -->

</div><!-- end of 'left_top' -->

<div id="right_top">

<div id="A_RT">
<p>A</p>
</div><!-- end of 'A_RT' -->

<div id="B_RT">
<p>B</p>
</div><!-- end of 'B_RT' -->

<div id="C_RT">
<p>C</p>
</div><!-- end of 'C_RT' -->

<div id="D_RT">
<p>D</p>
</div><!-- end of 'D_RT' -->

<div id="E_RT">
<p>E</p>
</div><!-- end of 'E_RT' -->

<div id="F_RT">
<p>F</p>
</div><!-- end of 'F_RT' -->

<div id="G_RT">
<p>G</p>
</div><!-- end of 'G_RT' -->

</div><!-- end of 'right_top' -->

<!-- ########### LOWER SECTION STARTS ########## -->

<div id="left_bottom">

<!-- 
Database returns value and Reveals relevant <div> based on returned value
Example: if database returns the numerical value '2' then the associated <div> for 2 bars is revealed.
<div id="BAR2_LB"><img src="bar2.png" /></div><!-- end of 'BAR2_LB' -->
-->

<div id="BAR0_LB">
<img src="bar0.png" />
</div><!-- end of 'BAR0_LB' -->

<div id="BAR1_LB">
<img src="bar1.png" />
</div><!-- end of 'BAR1_LB' -->

<div id="BAR2_LB">
<img src="bar2.png" />
</div><!-- end of 'BAR2_LB' -->

<div id="BAR3_LB">
<img src="bar3.png" />
</div><!-- end of 'BAR3_LB' -->

</div><!-- end of 'left_bottom' -->

<div id="right_bottom">

<div id="DB_RB">
<p>40</p><!-- Database returned value -->
</div><!-- end of 'DB_RB' -->

</div><!-- end of 'right_bottom' -->

</div><!-- end of 'wrp' -->

<!-- ########### HIDE / REVEAL ENDS ########## --> 
```

如果有人能够对此提供帮助，将不胜感激。

///////////////////// 编辑 //////////////////////////// //////////

感谢您的回复，尝试帮助澄清一点。

这个要使用的站点是用ASP.Net 2.0写的（新的一年正在重新开发，但是老板要求尽快到位。）

我正在考虑将 JavaScript 用于隐藏显示功能，但我认为自从发布上述内容以来，我发现了一个更大的问题。

这个问题是我无法找到包含“代码隐藏”文件的站点文件的原始副本（我之前的小伙子）。

在这个阶段我只有预编译的网站。

但我正在考虑使用 JavaScript 来隐藏和显示这些部分，然后简单地使用 ASP 从数据库表中提取数据，但我是 ASP 新手并且迷路了，特别是因为原始站点似乎已被删除我过去的同事尽管可能。

伙计，我需要这方面的帮助.......

感谢所有到目前为止。

# java - 从 URL 解析数据的 JSON 问题

> ID：12818452
> 
> 赞同：0
> 
> 时间：2012-10-10T11:39:35.080
> 
> 标签：java, android, arrays, json

我有一个与**来自 URL 的 JSON 解析数据**相关的查询。

这是我的场景：

我有一个像 URL1 这样的 URL，我可以从其中获取 JSON 数据。

有这样的数据。

```
 {
  "Eat & Drink":{
    "Alfresco":3,
    "Bars":3,
    "Brewery":5,
    "Cafe":0,
    "Distillery":0,
    "Family":5, 
    "Fine Dining":0, 
    "Home Delivery":0,
    "Nightclubs":2,
    "Restaurant":0,
    "TakeAway":0,
    "Wineries":0}
} 
```

我想在不传递的情况下获取 Key 和 Value 字段，因为在这里它在所有地方都是不同的。

所以首先我得到像第一个“ **Alfresco** ”这样的KEY，并且为了使用那个键，我们得到那个键的值，比如“ **3** ”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:56:24.457

```
package com.example.json_parser;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
public class SECOND extends Activity {
    /** Called when the activity is first created. */
     ArrayList<String> listItems ;
     ListView lv ;
     Button btn;
     EditText et;
     Bundle bunn;
    @SuppressWarnings({ "rawtypes", "unchecked" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lv = (ListView)findViewById(R.id.lv);

        lv.setAdapter(new ArrayAdapter(this,android.R.layout.simple_list_item_1,android.R.id.text1, this.fetchTwitterPublicTimeline()));
    }
    public ArrayList<String> fetchTwitterPublicTimeline()
    {
        listItems = new ArrayList<String>();
        try {
            URL twitter = new URL(
                    "MENTION YOUR URL HERE");

            URLConnection tc = twitter.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));
            String line;
            while ((line = in.readLine()) != null) {
                JSONArray ja = new JSONArray(line);
                for (int i = 0; i < ja.length(); i++) {
                    try{
                        JSONObject jo = (JSONObject) ja.get(i);
                        //listItems.add(jo.getString("PUT YOUR NODE ITEM HERE WHICH U WANNA FETCH")+"\n"+jo.getString("PUT YOUR NODE ITEM HERE WHICH U WANNA FETCH")+"\n"+jo.getString("PUT YOUR NODE ITEM HERE WHICH U WANNA FETCH"));
                        listItems.add(jo.getString("PUT YOUR NODE ITEM HERE WHICH U WANNA FETCH")+"\n"+jo.getString("0"));
                    }catch(Exception e){

                    }

                }
            }

            lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(),listItems.get(arg2).toString() , Toast.LENGTH_SHORT).show();

                }
            });

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return listItems;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:56:56.827

试试下面的代码：

```
 try {
        JSONObject jsonObject =new JSONObject(response);
        Iterator keys = jsonObject.keys();
        while(keys.hasNext()) {
            String key = (String) keys.next();
            Log.d("MainActivity", "key : " + key + "    name : " + jsonObject.optString(key));
        }
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

# c++ - 必须阅读 C++ 文档以了解“幕后”性能？

> ID：12818460
> 
> 赞同：0
> 
> 时间：2012-10-10T11:40:14.387
> 
> 标签：c++, performance, architecture, latency

为了准确理解在编写 C++ 时“幕后”发生了什么，您会推荐哪些文档？

到目前为止，我有：

*   GNU C++ 编译器文档（我认为这会很好地了解实际发生的情况）
*   C++ ABI(?) 规范

图书：

*   C++ 对象模型内部
*   迈耶斯有效系列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:45:24.307

对于真正的底层理解，您应该熟悉 G++ 源代码。编译器代码会告诉你很多关于语言的信息。

对于较低级别的理解，您应该熟悉最新的 C++ 标准 (C++11)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:47:29.300

使用编译到汇编器：`g++ -fverbose-asm -S`在 GCC 的情况下，以及在其他编译器中的 kindred 切换。这就像它得到的“引擎盖下”一样接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:50:04.940

我首先学习了 x86 汇编指令集和指令时钟时序。一旦你知道了这一点，你就会知道编译器实际上将你的代码转换成什么，你就会知道它可以做什么和不能做什么。从那里，如果我对一段特定的代码感兴趣，我会从编译器获取汇编器输出，并尝试各种编码方式。多年来，我发现了一些事情...... 1) 编译器非常擅长优化，通常即使以几种不同的方式编码一些东西，最终得到相同的汇编输出，2) 我经常对内联多少感到惊讶编译器确实如此，并且 3) 我经常对有时很少的 C++ 代码会导致大量的汇编输出感到惊讶。因此，当您复制多重继承 C++ 对象时，您 你会意识到那是多么昂贵，当你编写小的实用方法来保护对象数据时，你会意识到这个工具是多么的便宜。狩猎愉快。

# asp.net - 从面包屑中删除超链接

> ID：12818462
> 
> 赞同：0
> 
> 时间：2012-10-10T11:40:15.250
> 
> 标签：asp.net, client-side, breadcrumbs

我有一个面包屑：

1 级 --> 2 级

我想删除第一个链接（级别 1）的超链接，但文本应该保留。这是一个用户控件，因此我无法对其进行硬编码。

无论如何我可以删除仅用于第一级且仅在特定页面中的超链接吗？

任何指针??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:51:02.550

遍历控件中的子控件（通过`ctl.Controles`集合），调查代码中的每个子控件，然后根据您的逻辑取消超链接。其中一种方法可能是隐藏或删除原始超链接，然后注入一个`asp:literal`。

# ejb - EJB 3.1 JSR 定义

> ID：12818465
> 
> 赞同：3
> 
> 时间：2012-10-10T11:40:28.537
> 
> 标签：ejb, jndi, jsr

在 EJB 3.1 JSR 中，它在第 16.3.4 节中声明

> 容器必须确保企业 bean 实例对其环境变量只有读访问权。容器必须从修改环境命名上下文及其子上下文的 javax.naming.Context 接口的所有方法中抛出 javax.naming.OperationNotSupportedException。

**问题 1**：根据 JSR，从无状态 bean 方法向 JNDI 添加/编辑对象（例如字符串“hello”）是不合法的？

因此，如果这是真的，下面的代码应该会失败，但是在我的 jboss 6 中对其进行测试时，它工作得很好。

```
public void RebindVars() throws NamingException{
    Context ctx = new InitialContext();
    String testString = (String) ctx.lookup("java:comp/env/testString");
    String newString = "helloRebindFromJndi"; //Assume that this is a valid call.
    if (!testString.equals(newString)) {
        ctx.rebind("java:comp/env/testString", newString);
    }
} 
```

**问题 2**：既然它在我的 jboss 中工作，是 jboss 的实现允许更多的需求还是我完全误解了 JSR？

我正在接受 EJB 认证，这就是我问这个的原因，所以不需要评论我为什么会这样做 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:26:54.327

I do believe what EJB specification says is true. The ENC is a read-only naming space - try it on JBoss AS 7.1.1 and it should fail.

Some further reading which you might be interested in:

*   [ENC and JNDI relation - Javaranch](http://www.coderanch.com/t/536918/java-EJB-SCBCD/certification/EJB-questions-newbie)
*   [Automatic JNDI implementation - JBoss AS 7](https://issues.jboss.org/browse/AS7-421)

# objective-c - 自我的主要用途是什么？

> ID：12818469
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:40:33.363
> 
> 标签：objective-c, xcode, self

我正在做一个基于 ARC 的项目。我只是想知道 self 的主要用途是什么？

我有一个数组如下

```
@property(strong,nonatomic)NSMutable *dataArray; 
```

我正在初始化数组如下

```
-(void)viewDidLoad{

 self.dataArray=[[NSMutableArray alloc]initWithObjects:@"one",@"two",nil];  //first method

} 
```

或者

```
-(void)viewDidLoad{

 dataArray=[[NSMutableArray alloc]initWithObjects:@"one",@"two",nil];  //second method

} 
```

谁能告诉我我的第一种和第二种方法有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:45:11.897

第一次调用：`self.dataArray = ...`调用 的访问器方法`self`，如下所示：`[self setDataArray:...]`

第二次调用：`dataArray = ...`定义名为的实例变量（ivar）的内容`dataArray`。

那不是一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:06:54.937

经过大量谷歌搜索后，我找到了问题的答案，

**@property (nonatomic, 保留) NSDate *timestamp;**

Objective C 将生成 getter 和 setter，如下所示

```
(NSDate *)timestamp
{
   return timestamp;
}

(void)setTimestamp:(NSDate *)newValue
{
   if (timestamp != newValue)
   {
      [timestamp release];

      timestamp = [newValue retain];
   }
} 
```

只能按如下方式调用 setter 方法

self.timestamp = [NSDate 日期];

然而

时间戳=[NSDate 日期];

不调用 setter 方法。

没有 self 对象和点，我们不再向对象发送消息，而是

直接访问名为时间戳的 ivar。

结论：当我们不使用 self 时，旧值不会被释放，因为 setter

方法不会被调用，即在 ARC 之前。但在 ARC 中，我对此不太确定。至于

正如我所听说的，对于内存管理而言，使用 ARC 设置 ivar 的任何一种方式都是正确的

被关注到。

# c# - Mvc 3 动作签名

> ID：12818471
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:40:42.070
> 
> 标签：c#, asp.net-mvc-3

覆盖 OnActionExecuting 以在客户端发送的参数类型与所需的操作参数类型之间进行匹配时，是否可以获得操作参数签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:07:12.270

是的，首先使用 filterContext.ActionParameters.ContainsKey("myParameter") 按名称检查，然后尝试使用“as”关键字来查看它是否与类型匹配。

# java - 创建子类（特定）或超类（通用）类型的对象？

> ID：12818475
> 
> 赞同：0
> 
> 时间：2012-10-10T11:40:56.530
> 
> 标签：java, coding-style

使用以下代码：

```
public class Animal {
   ....// class stuff here
}

public class Cat extends Animal {
   ....// class stuff here
} 
```

尝试创建新的 Cat 对象时，有什么区别？：

```
 Cat myCat = new Cat(); //and
    Animal myCat = new Cat(); 
```

我以前读过你应该在左边声明最通用的列表（即

`List<String> = new LinkedList<String>();`) 因此，如果您想更改实现以改用 ArrayList，则需要更改的代码更少。

是否在所有情况下都应始终在 laft 上声明最通用（最不具体）（在这种情况下`Animal myCat = new Cat();`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:45:50.527

创建的内容没有区别。唯一的区别在于引用的类型。如果你引用了 Animal，并尝试使用 Cat 中不存在于 Animal 中的方法，编译器会报错。如果你调用一个在 Cat 中被覆盖的方法（注意：与重载不同），它会正确调用 Cat 的方法，即使引用是 Animal 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:45:03.270

最具体**的就是相关的**。否则，所有变量都是`Object`.

根据经验，如果您的逻辑需要调用特定于 的方法`Cat`，那么您应该将变量声明为`Cat`。如果没有，那么它应该是一个`Animal`如果你需要任何方法`Animal`，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:45:15.157

假设我们有以下代码

```
public class Animal {
  public void doSomething() {
       // ...
  }
}

public class Cat extends Animal {
  public void miau() {
       // ...
  }
} 
```

不同的是

```
Cat myCat1 = new Cat(); //and
Animal myCat2 = new Cat();
myCat1.miau(); //ok
myCat1.doSomething(); //ok
myCat2.miau(); // doesn't compile
myCat2.doSomething(); // ok 
```

这取决于您打算使用哪个站点。一个例子是一个列表。如果您知道您只将 Cat's 放入此列表，请将其声明为：

```
ArrayList<Cat> list = new ArrayList<Cat>(); 
```

但是如果你知道你放了各种各样的动物，你需要做如下声明

```
ArrayList<Animal> list = new ArrayList<Animal>(); 
```

您还可以执行以下操作：

```
ArrayList<Object> list = new ArrayList<Object>(); 
```

但这不是好的编码风格。因为如果你想调用一个方法，`miau`你首先需要检查你要调用它的元素是否是`Cat`. 然后你甚至需要投射它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:51:03.650

和...之间的不同

```
Cat myCat = new Cat(); //and 
Animal myCat = new Cat(); 
```

是前者是针对具体实现进行编程，而后者是针对接口/超类型进行编程。

后一种方法是首选，这样实际的运行时对象就不会绑定在您的代码中。并且使用你的动物类的类不必知道实际的动物对象（除了一只猫之外，它可能是相当大的数量）。

因此，您可以 `animal.makeSound()`使用后者，这使您可以多态地引用动物（在您的情况下是猫/任何其他动物）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T11:49:36.037

只是用**外行的语言**解释，这**一切都取决于你想要什么**，我将举一个非常简单的例子，因为你可以从我提供的链接中获得**其余的解释。**

*   假设你想计算你的篮子里有多少只猫，那么你当然不能用第二种情况。你必须创建一个`List<Cat>`并将`Cat`引用存储到它们中。因为`Animal`引用也可以指向`Dog`正确的？因此，一个`List<Animal>`可以容纳一个`Dog`..所以，您可能无法正确计算 Cat.. 或者，您可以得到，但需要做更多的工作..

*   如果您只想了解`Animal`一般信息，例如您总共拥有多少种不同类型的动物，您可以愉快地使用第一个..使用`Animal`引用创建一个对象..它可以容纳您所有的动物..

# android - 如何使用 achartengine 在片段中膨胀 Intent

> ID：12818476
> 
> 赞同：1
> 
> 时间：2012-10-10T11:40:56.517
> 
> 标签：android, android-intent, android-fragments, achartengine

下面的代码有效，但是当我调用自身时，图表的整个主视图都被替换了。

我想问题出在我如何在 startActivity(chart); 中启动图表 Activity；在我的片段中。如果删除它，该片段无需更换即可正常工作。

我怎么能把它发送到主视图？？？

```
public class Graph extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

    // LineGraph - class which draws the graph using achartengine
    final LineGraph lineGraph = new LineGraph();
    final Intent chart = lineGraph.getIntent(inflater.getContext());

    startActivity(chart);

    return inflater.inflate(R.layout.graph1, container, false);  

}

} 
```

这里的活动：

```
 public class MainCharts extends Activity {
    Button btn1;

    @TargetApi(11)
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dash_app);

        btn1=(Button)findViewById(R.id.button1);

        FragmentManager fm = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        StartFragment myFragment = new StartFragment();
        ft.add(R.id.myFragment, myFragment);
        ft.commit();

        btn1.setOnClickListener(btnOnClickListener);

    }

    Button.OnClickListener btnOnClickListener = new Button.OnClickListener(){

        @SuppressLint("NewApi")
        @Override
        public void onClick(View v){

            Fragment newFragment;

            newFragment = new Graph();

            FragmentTransaction transaction = getFragmentManager().beginTransaction();
            transaction.replace(R.id.myFragment, newFragment);
            transaction.addToBackStack(null);
            transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            transaction.commit();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:42:07.307

看一下[这个](https://github.com/siddhuwarrier/ElasticDroid-Tablet/blob/develop/src/org/elasticdroid/fragments/ChartFragment.java)示例，了解如何在片段中添加 AChartEngine 图表。

# html - 不同操作系统/屏幕的不同代码

> ID：12818481
> 
> 赞同：0
> 
> 时间：2012-10-10T11:41:15.137
> 
> 标签：html, css

我有[一个我正在努力完善的网站](http://www.eurobytes.nl/)，我想要的是这样的

```
if screen=1920x900 set size="100%"
if screen=1280x600 set size="50%"
if os="windows" set font="100%"
if os="osx" set font="50%"
if os="linux" set font="25%" 
```

```
...width="{size}"
font-family="{font}" 
```

注意上面的代码只是例子！

我希望能够像在其他浏览器/操作系统的屏幕尺寸中一样，在屏幕尺寸为 XXXX 的窗口中完全在浏览器中查看我的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:45:35.423

你好现在习惯了`CSS Media queries`

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

更多信息请参阅下面的链接。

[http://cssmediaqueries.com/](http://cssmediaqueries.com/)

[http://www.css3.info/preview/media-queries/](http://www.css3.info/preview/media-queries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:45:49.977

对于屏幕尺寸，您可以使用**`@media`查询**。

### 例子：

```
@media screen
and (min-width: 600px)
and (max-width: 900px) {
  .class {
    background: #333;
  }
}

@media screen
and (min-width: 900px) {
  .class {
    background: #333;
  }
} 
```

在这里了解更多：

*   [网页设计师墙](http://webdesignerwall.com/tutorials/css3-media-queries)
*   [CSS技巧](http://css-tricks.com/css-media-queries/)
*   [CSS 媒体查询](http://cssmediaqueries.com/)
*   [CSS3 预览 » 媒体查询](http://www.css3.info/preview/media-queries/)

* * *

针对不同版本的IE，可以使用**条件注释**。

### 例子：

```
<p class="accent">
<!--[if IE]>
According to the conditional comment this is IE<br />
<![endif]-->
<!--[if IE 6]>
According to the conditional comment this is IE 6<br />
<![endif]-->
<!--[if IE 7]>
According to the conditional comment this is IE 7<br />
<![endif]-->
<!--[if IE 8]>
According to the conditional comment this is IE 8<br />
<![endif]-->
<!--[if IE 9]>
According to the conditional comment this is IE 9<br />
<![endif]-->
<!--[if gte IE 8]>
According to the conditional comment this is IE 8 or higher<br />
<![endif]-->
<!--[if lt IE 9]>
According to the conditional comment this is IE lower than 9<br />
<![endif]-->
<!--[if lte IE 7]>
According to the conditional comment this is IE lower or equal to 7<br />
<![endif]-->
<!--[if gt IE 6]>
According to the conditional comment this is IE greater than 6<br />
<![endif]-->
<!--[if !IE]> -->
According to the conditional comment this is not IE<br />
<!-- <![endif]-->
</p> 
```

* * *

检测操作系统**不是**一个好主意。但是要检测它们，有很多**插件**。

*   [jQuery 浏览器和操作系统检测插件](http://www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/)
*   [jQuery.browser](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:44:46.543

您将需要使用 jQuery 来检测浏览器大小和操作系统版本。

您可以使用： http: [//www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/](http://www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/)插件。

然后使用 If/Selects/Switches 等，您可以根据浏览器/操作系统/大小等使用不同的 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:47:06.983

你到底想做什么？要为不同的屏幕尺寸设置 css 规则，请查看 CSS 媒体查询（例如：[http](http://www.w3.org/TR/css3-mediaqueries/) ://www.w3.org/TR/css3-mediaqueries/ ）。

您可以通过 PHP 找到更多的过滤器，如操作系统和事物（例如：[http](http://www.danielkassner.com/2010/06/11/get-user-operating-system-with-php) ://www.danielkassner.com/2010/06/11/get-user-operating-system-with-php ）

# xml - VB.NET 通过 http 发布 XML

> ID：12818490
> 
> 赞同：1
> 
> 时间：2012-10-10T11:41:43.340
> 
> 标签：xml, vb.net

我在 VB6 中有很好的工作代码。但我需要发布 xml 文件 utf-8 编码（包括西里尔字母）。所以我想将代码转换为 VB.NET，但结果是错误 500 - 内部服务器错误

原始 vb6 代码（succesfull witchout cyrilic）：

```
Dim o As New xmlHttp
xmlContent() = fs.GetFileContent(Replace(Me.txtOutputFileName.Text, fs.GetFileNameByPath(Me.txtOutputFileName.Text), "") & xmlFileNames(i))
  xmlString = MFunctions.GetString(xmlContent())
o.Open "POST", server, False, EE_XML_EXCHANGE_ID, EE_XML_EXCHANGE_PWD
  o.setRequestHeader "Content-Type", "text/xml" ' "text/xml;charset=utf-8"
  o.setRequestHeader "SOAPAction", ""
  o.send xmlString
  Me.txtResponseHeaders = o.getAllResponseHeaders
  Me.txtResponse = o.responseText 
```

VB.NET 代码（返回错误 500 - 内部服务器错误）：

```
Dim xdoc As XDocument = XDocument.Load("z:\Operations\RU\_TEST\xml\send\RUWP121001_01_05_01.xml")
    Dim request As WebRequest = WebRequest.Create("http://217.159.234.77:8080/epmx/services/messagesService")

    request.Method = "POST"
    Dim postData As String = xdoc.ToString
    Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
    request.ContentType = "text/xml"
    request.ContentLength = byteArray.Length
    request.Credentials = New System.Net.NetworkCredential(EE_XML_EXCHANGE_ID,EE_XML_EXCHANGE_PWD)

    Dim dataStream As Stream = request.GetRequestStream()
    dataStream.Write(byteArray, 0, byteArray.Length)
    dataStream.Close()

    Dim response As WebResponse = request.GetResponse()
    Console.WriteLine(CType(response, HttpWebResponse).StatusDescription)
    dataStream = response.GetResponseStream()
    Dim reader As New StreamReader(dataStream)
    Dim responseFromServer As String = reader.ReadToEnd()
    Console.WriteLine(responseFromServer)
    reader.Close()
    dataStream.Close()
    response.Close() 
```

有什么问题吗？

谢谢

# ruby-on-rails - 更改“删除”的位置 " ActiveAdmin 中的按钮 (Rails 3.2.8)

> ID：12818491
> 
> 赞同：1
> 
> 时间：2012-10-10T11:41:46.437
> 
> 标签：ruby-on-rails, activeadmin

我正在使用带有 ActiveAdmin 0.4.4 的 Rails 3.2.8 。

如果`:destroy`在 ActiveAdmin 资源控制器中启用了该操作，则默认情况下，该按钮将显示在资源页面`Delete <resource>`的右上角。`show`

那个删除按钮有点太突出，太容易点击，我不喜欢。我承认单击按钮时会出现一个确认对话框，但我仍然想重新定位按钮并将其放在其他位置。我可能也会把它做成一个小链接，而不是把它设计成一个按钮。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:13:19.033

删除操作项添加在 add_default_action_items 中 path/to/activeadmin_gem/lib/active_admin/resource/action_items.rb 中

```
module ActiveAdmin
  class Resource
    module ActionItems
    ...
    def add_default_action_items
       ...
    end
  end
end 
```

因此，您可以做的就是将删除按钮全部擦除或添加一个特定的 css 类。不是通过更改 gem 源，而是通过将以下内容添加到 /config/initializers/activeadmin.rb 的底部，从而动态打开私有模块方法

```
module ActiveAdmin
  class Resource
    module ActionItems
      private
        def add_default_action_items
          # New Link on all actions except :new and :show
          add_action_item :except => [:new, :show] do
            if controller.action_methods.include?('new')
              link_to(I18n.t('active_admin.new_model', :model =>       active_admin_config.resource_name), new_resource_path)
            end
          end

          # Edit link on show
          add_action_item :only => :show do
            if controller.action_methods.include?('edit')
              link_to(I18n.t('active_admin.edit_model', :model =>       active_admin_config.resource_name), edit_resource_path(resource))
            end
          end

          # Destroy link on show
          add_action_item :only => :show do
            if controller.action_methods.include?("destroy")
              link_to(I18n.t('active_admin.delete_model', :model =>       active_admin_config.resource_name),
                resource_path(resource),
                :method => :delete, :confirm =>       I18n.t('active_admin.delete_confirmation'),
                :class => 'Anjan_styles_its_own_destroy_button_class')
            end
          end
        end          
    end
  end
end 
```

现在，您可以随意设置样式，或者您可以将整个破坏链接注释掉。索引屏幕仍然有资源的删除链接。不要忘记重新启动服务器。

祝你阅读源码好运！

# c++ - 在不同的线程上调用和执行函数

> ID：12818493
> 
> 赞同：2
> 
> 时间：2012-10-10T11:41:50.620
> 
> 标签：c++, multithreading, tbb

假设我有一个这样的程序代码：

```
 #include <iostream>  
    #include <Windows.h>

    #include <tbb/tbb.h>

    void SomeFunction()
    {
            // do something
    }        

    void MyThread(int arg)
    {
        std::cout << "This is a thread function\n" << std::endl;

        for (int i = 0; i < 10000; i++)
        {
            arg++;
            Sleep(1);
        }

            SomeFunction();
    }

    int main ()
    {
        tbb::tbb_thread pMyThread = tbb::tbb_thread(MyThread, 3);

        pMyThread.join();

        return 0;
    } 
```

从上面我们可以看到 main() 正在另一个线程 pMyThread 上调用 MyThread()。MyThread() 正在调用 SomeFunction()。现在，SomeFunction()（或 MyThread() 调用的任何其他函数）是否也会在 pMyThread 上执行？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:43:21.823

是的，从线程的主函数发出的任何函数调用都将存在于该线程的私有堆栈中。

# django - 覆盖查询集的更新方法 - Django

> ID：12818495
> 
> 赞同：4
> 
> 时间：2012-10-10T11:41:57.857
> 
> 标签：django, django-models, django-managers

我们如何更改 django 中查询集的更新方法的默认过程，因为它不会为每个对象调用保存方法。由于我已经覆盖了 save 方法，所以每次更改对象时都需要调用它。我找了[django doc](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)，但这只是为了`get_query_set`，更新方法是否也有类似的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T12:50:56.237

这对我有用

* * *

```
class MyQuerySet(models.query.QuerySet):
    def update(self, *args, **kwargs):
        # here queryset update method overridden
        pass

class NewManager(models.Manager):
    def get_queryset(self):
        # this is to use your custom queryset methods
        return MyQuerySet(self.model, using=self._db)

class MyModel(models.Model):
    objects = NewManager()
    myfield = models.SomeTypeOfField(**kwargs) 
```

# .net - ESRI.ArcGIS 地图加载动态 KML

> ID：12818500
> 
> 赞同：1
> 
> 时间：2012-10-10T11:42:14.487
> 
> 标签：.net, c#-2.0, kml, esri, esri-arc-engine

我正在加载 ESRI 地图和 KML 图层，一切正常！

**问题：** KML 数据更改（经常更改）后，我无法在地图中显示新更改。我每次都需要强制清除浏览器缓存。我尝试刷新图层没有成功。

我的代码

```
// Create a new KmlLayer object. 
  ESRI.ArcGIS.Client.Toolkit.DataSources.KmlLayer theKmlLayer = new ESRI.ArcGIS.Client.Toolkit.DataSources.KmlLayer();

  // Set the KmlLayer's ID.
  theKmlLayer.ID = "SampleData";

  // Set the Url of the KmlLayer. Note the Url takes a Uri object!
  theKmlLayer.Url = new Uri("localhost/KML/east.kml");//Here is the New KML Data

  // Need to use a ProxyUrl on the KmlLayer since the service is not hosted locally or on a local network.
  theKmlLayer.ProxyUrl = "http://serverapps.esri.com/SilverlightDemos/ProxyPage/proxy.ashx";

  // Add the KmlLayer to the Map. An automaic refresh of the Map and Legend Controls will occur.
  Map1.Layers.Add(theKmlLayer); 
```

我尝试**了 KmlLayer.Refresh();**

我需要通过代码清除浏览器缓存还是可以加载新数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:28:17.763

KML 缓存的常用解决方案（谷歌在服务器上缓存数据几个小时）是在 URL 中使用随机或基于时间的缓存破坏参数（因此它永远不会相同）。

缓存破坏参数的一个示例：

```
'?dummy=' + (new Date()).getTime()); 
```

# spring - 春季自动装配

> ID：12818501
> 
> 赞同：0
> 
> 时间：2012-10-10T11:42:18.300
> 
> 标签：spring

我正在使用`Spring`，我不使用`JSF`，使用`ajax`等。

我有服务

```
@Service(value="mailService")
public class MailService{
//an autowired dao, etc here
} 
```

我有一个 bean，我希望这个 bean 有一个 MailService。

```
//Here i have tried so far individually @Service, @Component, @Controller
public class EmailAgent{

private MailService mailService;

    public MailService getMailService() {
        return mailService;
    }

    @Autowired
    public void setMailService(MailService mailService) {
        this.mailService = mailService;
    }

} 
```

我在 applicationContext.xml 下面

```
<context:component-scan base-package="mypack.containing.emailagent.path.too" />
<context:annotation-config/> 
```

EmailAgent 中的 mailService 在调用一个 EmailAgent 方法时为空。

我请求一些建议，并且我想了解为什么在服务器启动期间我没有收到任何异常，例如“我无法自动装配 mailService”。不久前我正在使用`JSF`，我能够在服务器启动时看到这样的警告。

问题已明确，如何解决

我用`EmailAgent ea=new EmailAgent();` It is my sillyness 生成 ea 但是，当我尝试获取一个上下文时，例如：

```
ClassPathXmlApplicationContext cont=new ClassPathXmlApplicationContext("classpath:applicationContext.xml");
                  mailService=()cont.getBean("mailService"); 
```

我面临着非唯一缓存等问题，关于生成更多上下文的问题。那么我怎样才能“获取”上下文，防止“生成”一个呢？

解决了

我添加了

```
<bean class="email.EmailService" id="emailService"> 
  <dwr:remote javascript="emailService"> 
    <dwr:include method="sendMail"/>
    <dwr:include method="readAllMails"/>
    <dwr:include method="removeMailsById"/> 
  </dwr:remote> 
</bean> 
```

到 dwr.xml 并从 emailService 中删除关于 dwr 的注释。

如我所见， dwr 和 spring 的注释确实相互冲突。

感谢@NimChimpsky 提供有关检测问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:13:30.820

除非您进行集成测试，否则您不需要其他上下文。

emailagent 在哪里使用？像往常一样在那里注入它。正如您对邮件服务所做的那样。

您可以使用 Component 或 Service 对其进行注释，两者都是合适的。

# php - Magento 编译器 - 命令行

> ID：12818502
> 
> 赞同：0
> 
> 时间：2012-10-10T11:42:18.323
> 
> 标签：php, magento, command-line, compiler-construction

当我通过商店根目录中的命令行单击“shell”文件夹内的编译器状态时，它返回编译器已启用，以便在管理员中启用，但是当我在我的 Magento 站点的根文件夹中检查时返回状态为禁用！

```
$/var/www/magento# php shell/compiler.php 状态
编译器状态：禁用
编译状态：已编译
收集的文件数：6764
编译范围数：4
$/var/www/magento# cd shell/
$/var/www/magento/shell# php compiler.php 状态
编译器状态：已启用
编译状态：已编译
收集的文件数：6764
编译范围数：4

```

尽管我尝试通过关闭编译器模式、重新编译然后重新打开来解决此问题，但我得到了相同的结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:04:19.657

编辑`includes/config.php`并注释掉这两`define`行。这就是 Magento 为启用/禁用编译器所做的一切。

[http://svn.magentocommerce.com/source/branches/1.7/includes/config.php](http://svn.magentocommerce.com/source/branches/1.7/includes/config.php)

代码片段来自`shell/compiler.php`

```
$compiler = $this->_getCompiler();
$compilerConfig = '../includes/config.php';
if (file_exists($compilerConfig)) {
    include $compilerConfig;
}
$status = defined('COMPILER_INCLUDE_PATH') ? 'Enabled' : 'Disabled'; 
```

此外，我建议只使用[APC](http://php.net/manual/en/book.apc.php)或任何其他 OPCode 缓存，因为它可以解决同样的问题，而且不会让人头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:11:29.363

这“按设计工作”（除了设计不佳）。`compiler.php`这是确定状态的代码位。

```
$compilerConfig = '../includes/config.php';
if (file_exists($compilerConfig)) {
    include $compilerConfig;
}
$status = defined('COMPILER_INCLUDE_PATH') ? 'Enabled' : 'Disabl    ed'; 
```

关键是`$compilerConfig = '../includes/config.php';`. 此路径从当前目录上**移**一个目录以查找`config.php`. PHP shell 脚本的工作目录是**从中调用**它的目录，而不是它所在的目录。所以你说

```
$/var/www/magento# php shell/compiler.php state 
```

该脚本在

```
/var/www/magento/../includes/config.php 
```

或者

```
/var/www/includes/config.php 
```

因为它没有找到一个，它假定一个禁用状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T14:56:43.067

我意识到这是一篇旧帖子，但看起来这个错误仍然存​​在于 Magento 1.9 中。如果您希望能够从其他目录检查您的编译器状态，只需修改此行：

```
$compilerConfig = '../includes/config.php'; 
```

改成

```
$compilerConfig = dirname(__FILE__).'/../includes/config.php'; 
```

# java - 字符串比较返回错误结果

> ID：12818507
> 
> 赞同：0
> 
> 时间：2012-10-10T11:42:30.463
> 
> 标签：java, android, string, string-comparison

我试图比较 Java 中的 2 个字符串以确定它们是否相同：

```
System.out.println("app version: "+ appversion + " latest version: "+ latestversion); 

if(!appversion.equals(latestversion))
{            
    System.out.println("not the same"); 
} 
```

然而，鉴于输出，这给了我意想不到的结果：

```
app version: v1.1.2 latest version: v1.1.2
not the same 
```

我曾经`.replaceAll("\\s","");`从字符串中删除任何空格，但没有成功。

对此可能有一个非常明显的答案，但谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:45:29.417

您是否尝试过在两个字符串上使用 .trim() ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:45:43.360

代替 .replaceAll() 方法，使用 trim() 方法在比较字符串变量时删除空格。

如下更改您的代码，

```
if(!appversion.trim().equals(latestversion.trim()))
{            
    System.out.println("not the same"); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:47:36.097

哥们试试这个

```
System.out.println("app version: "+ appversion.trim() + " latest version:"+latestversion.trim()); 

if(!appversion.trim().equals(latestversion.trim()))
{            
    System.out.println("not the same"); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:50:21.667

代码运行良好：-

```
 String appversion=" v1.1.2";
      String latestversion=" v1.1.2";
      if(!appversion.equals(latestversion))
      {            
      System.out.println("not the same"); 
      } 
```

或者您可以使用：-

```
if(!appversion.trim().equals(latestversion.trim())) 
```

# android - Android AnimationListener 没有被击中

> ID：12818510
> 
> 赞同：0
> 
> 时间：2012-10-10T11:42:35.827
> 
> 标签：android, animation, listener

我想用两种不同的动画创建某种 imageGallery。单击当前可见的图像时，“OK-Image”将淡入（1秒，不重复），动画完成后，应显示下一个图像

每个图像都有一个无限重复的动画（普通视图、缩放视图）

所以 ..

*   第 1 步：图像的无限动画（正常 => 缩放 => 正常..）
*   第 2 步：点击
*   第 3 步：显示“OK-Image”（在 1 秒内淡入）
*   步骤1 ...

问题是，OK-Animation 的 Animation Listener 被击中，而无限动画的 AnimationListener 没有..

```
@Override
public void onCreate(Bundle savedInstanceState) {
   fadeInOKAnimation = AnimationUtils.loadAnimation(this, R.anim.fadeinonce);
   fadePermanentAnimation = AnimationUtils.loadAnimation(this, R.anim.fadeininfinite);
   fadeInOKAnimation.setAnimationListener(fadeInOKAnimationListener);        
   fadePermanentAnimation.setAnimationListener(fadePermanentAnimationListener);
}

AnimationListener fadeInOKAnimationListener = new Animation.AnimationListener() {

   public void onAnimationEnd(Animation animation) 
   { 
      ThreadHelper.sleep(500);
      imgMessung.clearAnimation();
      int currentImageId = currentStateImage.getNormalImage();
      imgMessung.clearAnimation();
      imgMessung.setImageResource(currentImageId);
      imgMessung.startAnimation(fadePermanentAnimation);
   }

   public void onAnimationRepeat(Animation animation) { }

   public void onAnimationStart(Animation animation) { }
};

AnimationListener fadePermanentAnimationListener = new Animation.AnimationListener() {

   public void onAnimationEnd(Animation animation) { }

   public void onAnimationRepeat(Animation animation) {

      StateImage currentStateImage = messung.GetCurrentImage();

      if(currentImageState == ImageState.Normal)
      {
         int currentImageId = Integer.parseInt(currentStateImage.getNormalImage());
         imgMessung.setImageResource(currentImageId);
      }
      else
      {
         int currentImageId = Integer.parseInt(currentStateImage.getZoomedImage());
         imgMessung.setImageResource(currentImageId);
      }
   }

   public void onAnimationStart(Animation animation) { }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:55:58.470

无尽的动画没有尽头，所以什么都不会触发。您可能想使用[onAnimationRepeat](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html#onAnimationRepeat%28android.view.animation.Animation%29)来知道动画在哪里重新启动（但是然后-您需要无休止的重复做什么？如果您需要一些元素来无休止地制作动画（即旋转繁忙的标记），请将其包裹在 ie 上`FrameLayout`并在那里种植您的动画和侦听器

# java - Selenium - 不一致的 StaleElementReference 错误

> ID：12818512
> 
> 赞同：1
> 
> 时间：2012-10-10T11:42:46.170
> 
> 标签：java, listview, selenium, webdriver, wait

我正在为列表视图编写 Java Selenium 测试，特别是用于验证然后从列表视图中选择一个项目的测试。

不过，这让我发疯了，因为测试在一半的时间里运行良好，但另一半会给出 StaleElementReference 或类似的错误，通常每次都发生在不同的阶段。这是在相同条件下运行它们时。

每次列表视图页面更改时，我都会重新分配 WebElement 变量，因为我收集到这可能是问题，但它仍然会发生。然后我认为这可能与需要等待页面完全加载有关，但我不完全确定如何使用我看到其他人建议的 WebDriverWait 之类的东西。但是我知道我们现有的基本页面对象类已经包含了一些等待的东西，所以我认为这可能已经被覆盖了：

```
 public abstract class PageObject {

protected WebDriver driver;
protected WebDriverWait wait;
    ...
    public PageObject(WebDriver driver, String relativePath) {
            ...
            this.driver = driver;
            this.wait = new WebDriverWait(driver, 8);
            ... 
```

这够了吗，还是我需要更具体的“等待”形式来解决这个问题？

除此之外，任何人都可以想到任何可能导致这种情况的常见问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:40:24.477

呵呵，遇到类似的问题。问题是当你在页面上有很多 AJAX 时，处理它的最好方法（恕我直言）和我最喜欢的等待是`fluentWait()`

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(1, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              
     }; 
```

因此，您实际上需要找到 Web 元素的定位器（xpath 或 css 选择器）并将其传递给 fluent wait。而流利的等待，反过来，返回你找到的网页元素。来自文档： *Wait 接口的实现，可以动态配置其超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。* **用法：**

```
String xPathElement =".....blablabla...";
WebElement neededElement =fluentWait(By.xpath(xPathElement));
 neededElement.click();
//neededElement.getText().trim(); 
```

你可以在[这里获得更多信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

导致此类问题的问题可能（根据我的经验）有两种类型：1）第一种

您与导致页面呈现或其他一些“慢”操作的元素交互。Selenium 测试继续进行，但页面实际上没有呈现 >> `staleElement`。

2）第二个。你与一个元素交互。然后您与另一个导致大量 AJAX 交互（未完成页面重新加载和第一个元素刷新）。并立即返回到前一个（例如 getText 或单击）>> `staleElement`。

所以我总是使用流利的等待。从您可以设置忽略的任意例外的角度来看，这很舒服。希望这对你有用。

# java - 如何杀死或停止java小程序中的其他线程

> ID：12818520
> 
> 赞同：1
> 
> 时间：2012-10-10T11:43:14.363
> 
> 标签：java, applet, thread-safety, threadpool, jchart2d

在 java 小程序中，我正在通过 JCChart 绘制图表。现在，当我查看任务调度程序绘制图表后，它显示 Java.exe 的 CPU 利用率仍然大于 50。现在我使用带有插件的 JConsole 来观察 java 中的哪个线程占用了大量的 CPU 使用率。然后它表明 AWT-EventQueue-2 正在花费大量时间并且该线程处于 Runnable 状态并且永远不会启动。它所做的是一些像下面这样的..

```
sun.java2d.loops.FillRect.FillRect（本机方法）
sun.java2d.pipe.LoopPipe.fillRect（未知来源）
sun.java2d.pipe.ValidatePipe.fillRect（未知来源）
sun.java2d.SunGraphics2D.fillRect（未知来源）
com.klg.jclass.chart.JCChart.paintComponent(JCChart.java:670)
javax.swing.JComponent.paint（未知来源）
com.klg.jclass.chart.JCChart.paint(JCChart.java:593)
javax.swing.JComponent.paintChildren（未知来源）
javax.swing.JComponent.paint（未知来源）

```

那么任何人都可以告诉我如何防止我的小程序发生这种情况，或者我该如何阻止这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:53:23.993

在 Java 中停止线程的推荐方法是以线程自行完成执行的方式实现逻辑。如果你有一个循环，你可以考虑根据一个动作来结束它（例如，用户点击完成的停止按钮）。从您的详细信息看来，小程序正在重新绘制。可能你应该看看是什么触发了重绘。

# html - 内联块 div 中的文本将其向下推

> ID：12818528
> 
> 赞同：13
> 
> 时间：2012-10-10T11:43:39.610
> 
> 标签：html, css

今天早上我发现了一个奇怪的 CSS 问题，我希望 CSS 专家能帮助我。在[这个演示](http://jsfiddle.net/7HBCe/)中，为什么红色 div 中的文字会往下推？我预计这两个 div 会彼此相邻。谢谢！
编辑：谢谢大家的回答。我会接受一个答案。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T11:48:38.310

…………………………………………………………………………………………………………………………

你好现在习惯了 `vertical-align: top;`

```
div {
    display: inline-block;
    height: 50px;
    width: 50px;
    vertical-align: top;
} 
```

***[演示](http://jsfiddle.net/rohitazad/7HBCe/5/)***

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-10T11:47:22.403

添加`float:left`解决了这个问题。

**[工作样本](http://jsfiddle.net/7HBCe/)**

# javascript - 是否可以在同一页面上使用两种不同的颜色框样式？

> ID：12818531
> 
> 赞同：1
> 
> 时间：2012-10-10T11:43:45.487
> 
> 标签：javascript, jquery-plugins, styles, colorbox

我使用颜色框在一页上显示图像和 html 内容。这个元素的初始化是不同的，一个用于图像，另一个用于 html 内容。窗口的设计不同，“image”颜色框的 cboxLoadedContent div 中的填充为“padding:15px”，“html”颜色框的 cboxLoadedContent div 中的填充为“padding:0px 15x”。单击“html”链接时，我可以添加特殊类，并且填充将是正确的。但主颜色框窗口不会改变他的高度。两个链接旁边是不同画廊的一部分。所以我不能为具有强宽度和高度的 html 调用颜色框。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:56:46.307

我喜欢评论中提供的解决方案，但进行了一些小的更改以使代码更通用。这个想法是所有颜色框 css 文件都包含在“head”中，但被禁用。然后当打开一个colorbox窗口时，只启用对应主题的css文件。

有很多方法可以实现这一目标，其中之一：

```
function useColorboxTheme() {
    var selectedTheme = $(this).attr("data-theme");

    $(".colorboxTheme").attr("disabled", "disabled");
    $("#" + selectedTheme).removeAttr("disabled");
}

function defaultColorboxTheme() {
    $(".colorboxTheme").attr("disabled", "disabled");
    $(".colorboxTheme.default").removeAttr("disabled");
}

$(document).ready(function(){
    $("a.colorbox").colorbox({
        onOpen: useColorboxTheme,
        onClosed: defaultColorboxTheme
    });
}); 
```

useColorboxTheme()`data-theme`在您的颜色框锚点中查找属性，例如：

```
<a data-theme="theme1" class="colorbox" title="This is pic1" href="http://pics/pic1.jpg"></a> 
```

请注意，“theme1”对应于头部中“链接”标签的 id。例如：

```
<link id="theme1" class="colorboxTheme" rel="stylesheet" type="text/css" href="css/colorbox/example1/colorbox.css"> 
```

您可能希望将其调整为您正在使用的代码或 CMS，但这给出了总体思路。这是一个[小提琴](http://jsfiddle.net/pbKkd/2/)。

但是请注意，这不是 colorbox 的预期用途。您必须在所有浏览器中对其进行彻底测试，以确保您不会在使用多个主题时遇到问题。我注意到的一个怪癖是示例 5 主题需要在其他主题之前链接，以便所有主题一起工作。

# wordpress - Wordpress 从表单中读取帖子数据并以编程方式创建新帖子

> ID：12818536
> 
> 赞同：0
> 
> 时间：2012-10-10T11:44:04.207
> 
> 标签：wordpress

我创建了一个 HTML 表单，数据将提交到 wordpress 插件以编程方式创建新帖子。但是，我怎样才能通过 URL 调用这个 wordpress 插件，以便我可以定义`form`动作标签的 URL？

以编程方式创建新帖子的wordpress插件可以参考[这里](http://www.webmaster-source.com/2010/02/09/programmatically-creating-posts-in-wordpress/)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:02:48.467

你不能做一个自定义的 PHP 文件来处理表单并使用[wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)创建一个新帖子吗？

插件通常使用随机数或其他方法来防止未经授权的用户直接访问它们。

# c# - 为什么异或两个 ushort 值不返回 ushort？

> ID：12818539
> 
> 赞同：0
> 
> 时间：2012-10-10T11:44:07.577
> 
> 标签：c#, implicit-conversion, xor, ushort

> **可能重复：**
> [两个字节变量上的 C# XOR 不会在没有强制转换的情况下编译](https://stackoverflow.com/questions/2726920/c-sharp-xor-on-two-byte-variables-will-not-compile-without-a-cast)

为什么在此 C# 代码中出现编译错误？

```
void test()
{
   ushort a = 0;
   ushort b = 0;
   ushort c = a ^ b; //ERROR
} 
```

*错误 CS0266：无法将类型“int”隐式转换为“ushort”。存在显式转换（您是否缺少演员表？）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:49:59.750

看看这个：[C# XOR on two byte variables will not compile without a cast](https://stackoverflow.com/questions/2726920/c-sharp-xor-on-two-byte-variables-will-not-compile-without-a-cast)

基本上，使用位运算符，任何小于 int 的操作数都会自动转换为 int。

# javascript - 使用 javascript 突出显示用户选择的文本

> ID：12818544
> 
> 赞同：0
> 
> 时间：2012-10-10T11:44:29.620
> 
> 标签：javascript, html

我正在使用其他人的代码，如果我更改太多，它就会中断。我需要突出显示用户突出显示的部分文本。它需要根据该元素的 ID 而不是实际文本突出显示。如果它基于实际文本，它将突出显示该文本的每个实例，我只想要用户选择的实例。一个星期以来，我一直在绞尽脑汁，试图弄清楚如何编辑这段代码，以便它能够完成我需要它做的事情。谁能帮我弄清楚我需要编辑什么才能完成这项工作？

```
//-------------------------------------------------------
// Name: doHighlight()
// Find all occurences of the search term in the given text,
// and add some "highlight" tags to them (we're not using a
// regular expression search, because we want to filter out
// matches that occur within HTML tags and script blocks, so
// we have to do a little extra validation)
//-------------------------------------------------------
function doHighlight(bodyText, searchTerm, highlightStartTag, highlightEndTag)
{
    var newText = "";
    var i = -1;
    var lcSearchTerm = searchTerm.toLowerCase();
    var lcBodyText = bodyText.toLowerCase();
    var temp = 0;
    var counter = 0;

//********************************************************************
//********************************************************************
//********************************************************************
//Here is the ID of the <p> element where our text was selected
    alert(textId);
//Here is the text of the ID of the <p> element we selected
     alert(document.getElementById(textId).innerHTML);
//********************************************************************
//********************************************************************
//********************************************************************

    while (bodyText.length > 0)
    {
        i = lcBodyText.indexOf(lcSearchTerm, i++);

        if (i < 0)
    {
        newText += bodyText;
        bodyText = "";
    }
    else
    {
        // skip anything inside an HTML tag
         if (bodyText.lastIndexOf(">", i) >= bodyText.lastIndexOf("<", i))
        {
            // skip anything inside a <script> block
            if (lcBodyText.lastIndexOf("/script>", i) >= lcBodyText.lastIndexOf("<script", i))
            {   
//********************************************************************
//********************************************************************
//********************************************************************
// Writes the document til it reaches the search term, then adds highlightStartTag then the search term then highlightEndTag
// Then writes more of the document until the search term is reached again 
// Needs to search for the term based on the id="" given to the <p> element
// Then add the highlightStartTag and highlightEndTag
                newText += bodyText.substring(0, i) + highlightStartTag + bodyText.substr(i, searchTerm.length) + highlightEndTag;
                bodyText = bodyText.substr(i + searchTerm.length); 
                lcBodyText = bodyText.toLowerCase();
                i = +1;
//********************************************************************
//********************************************************************
//********************************************************************
                }
            }
        }
        //break;
    }
    //newText += bodyText;
    return newText;
}
//------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:03:17.737

我不确定这是否正是您所需要的，但这可能足以让您入门；我设法扩充了代码，以便`<font>`搜索词不是通用标签，而是使用一个`<span>`带有`.hilite`. 然后，该脚本搜索该 span 标记的第一个匹配项，并将父项的 ID 设置为变量 ( `firstParent`)。

[更新示例](http://jsfiddle.net/66fK3/5/)

该示例使用 jQuery，因此您可以像这样引用父元素：

```
$('#' + firstParent).before('<img src="myicon.png" />'); 
```

这将在包含父级之前插入一个图标。

您可以将此作为起点来根据您的需要扩充脚本。您可能应该构建一个额外的错误检查层，以防找不到搜索词，或者父元素没有 ID...

# c# - 模拟硬件设备

> ID：12818545
> 
> 赞同：2
> 
> 时间：2012-10-10T11:44:41.727
> 
> 标签：c#, c++, .net, emulation

我被分配了一项任务，我要模拟我公司的一个硬件设备。

我将使用用非托管 C++ 编写的设备固件 不一定是所有代码，但通信协议之类的东西在设备中运行良好，我想重用该代码。

我主要用 C# .NET 4 编写软件。

我很难破解这个坚果。至少，我想输入从哪里开始这项任务。

我非常了解 C#，并且我也使用过 C++。

固件在设备的芯片上运行，该芯片具有相当复杂的操作系统。如果不显示一些代码，这有点难以解释，但我不能那样做。

无论如何，我很乐意看到对此的一些意见。另外我不确定我应该写[模拟器还是模拟器](https://stackoverflow.com/a/2175146/915296)。

硬件具有不同的接口，包括 RS-232、GSM 数据包和蓝牙。最重要的是使 RS-232 和 GSM 工作。

硬件代码编写得相当好，分层和结构化，所以我想可以用我自己的代码替换通信 API。

**TLDN**：我要复制/模拟/模拟硬件设备的行为，但这似乎是一个非常大的项目，我不知道从哪里开始。非常感谢您的输入。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:59:53.583

我的想法基本上是分离和提取设备的逻辑层，并考虑将它们编译成您的仿真环境中的可执行文件。你需要做硬件部分和通信部分，这是更高和更低的级别。通信部分可能很简单，只需实现接口并让您的模拟器用户与模拟设备进行交互。对于硬件设备仿真部分，如果是通用的，可以考虑使用现有的项目模型，例如QEMU设备。

简而言之，更重要的工作是知道什么是公司特定的逻辑，什么是常见的设备逻辑，然后你就知道在哪里可以找到重复使用的代码。之后，将它们粘在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:50:30.780

这将完全是特定于项目的。基本思想是找到合适的位置在每个设备上画线。您不想实际模拟实际的 RS-232 位，然后必须测量它们以获取数据。通常，对于您必须编写的任何代码，请尽可能使用实际代码。但是任何代码，你只需要撤消，不要使用。如果可能的话，在干净的接口处画线，然后在线的“下”侧重新实现代码（或硬件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:01:01.507

> 固件在设备的芯片上运行，该芯片具有相当复杂的操作系统。如果不显示一些代码，这有点难以解释，但我不能那样做。

你知道设备是如何工作的。您知道给定输入的输出是什么。您需要确定需要复制哪些功能。

> 硬件具有不同的接口，包括 RS-232、GSM 数据包和蓝牙。最重要的是使 RS-232 和 GSM 工作。

您首先创建一个可以通过 RS-232 和 GSM 协议进行通信的应用程序。完成此操作后，您可以使用已经编写的库函数来获得预期的输出。

> 无论如何，我很乐意看到对此的一些意见。另外我不确定我应该编写模拟器还是模拟器。

你需要确定你的老板到底想要什么。我们无法根据您为我们概述的模糊要求帮助您做出此决定。

# azure-sql-database - Azure Blob 存储的事务访问

> ID：12818546
> 
> 赞同：11
> 
> 时间：2012-10-10T11:44:42.440
> 
> 标签：azure-sql-database, azure-blob-storage

我想将文件存储在 Azure Blob 存储中。到目前为止，一切都很好。我还想存储有关文件的附加元数据；为此，我使用了 Azure SQL 数据库（因此我可以轻松地查询 blob 存储上的文件）。

因此，当我向商店添加新文件时，我想确保 blob 以及元数据已成功写入。因此，我想到了使用诸如事务上下文之类的东西。

有什么方法可以使用 blob 存储和 sql 存储来创建这样的事务上下文？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T13:46:31.803

据我所知，没有任何内置功能可以做到这一点；您需要自己管理。最简单的方案是先保存 Blob，然后添加数据库记录。由于数据库用作满足您需求的索引，因此在保存数据库记录之前，Blob 对您的代码基本上是不可见的。

一个更复杂的选项是实现您自己的提交逻辑。您将处理数据库插入（例如，记录上的标志设置为 0），保存 Blob，如果成功，则将数据库中的标志设置为 1。

您也可以将元数据保存在 Azure Tables 中，但如果您有大量记录，在 Azure Tables 中搜索可能会显着减慢速度。大多数情况下，在 SQL 数据库中搜索会更快。

您选择哪种方法取决于您的目标，但我认为第一个选项是最简单的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-28T18:58:56.860

现有的 blob 是无害的，但指向不存在的 blob 的数据库记录会很糟糕。因此，我将使用以下逻辑实现事务。

在创建时...首先添加 blob，然后创建数据库记录。如果 blob 上传失败，则返回。如果 blob 上传成功，但数据库记录失败，则删除 blob 并返回。关键是在成功上传 Blob 之前，您不希望创建数据库记录。如果无法更新数据库记录，您还需要清理 blob。如果 blob 清理失败，我只需要一个定期运行的服务来清理*一个多小时前创建的*未引用 blob ，这样它就不会尝试在上传和创建数据库记录之间删除一个。

删除时... 首先删除数据库记录。如果失败，只需返回，blob 和数据库记录都仍然存在。如果数据库记录被删除，那么 blob 不会因为保留在那里而造成任何伤害，因此您可以尝试立即删除它，也可以将其留给清理服务稍后处理。

# c# - 在 MVC 3 中，如何在代码中检测到 View POST 是从哪个代码中生成的？

> ID：12818547
> 
> 赞同：0
> 
> 时间：2012-10-10T11:44:43.357
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想知道如何签入一个动作，我从哪个视图对其进行了 POST。因此，在操作完成后，我可以返回到同一个视图。

像：

```
if (enteredfromView1)
{
    return RedirectToAction("View1","Controller");
}
else
    return RedirectToAction ("View2","Controller"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:50:23.470

您可以使用 Request.UrlReferrer 来实现这一点。

```
public ActionResult TryMeOut()
{
   TempData["ReturnPath"] = Request.UrlReferrer.ToString();
   //return your users to the correct view.
} 
```

如果这不是您想要的，那么您应该看看这篇文章。也许这可以帮助你：[在控制器中获取视图名称，ASP.NET MVC](https://stackoverflow.com/questions/3610855/obtain-view-name-in-controller-asp-net-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:47:04.377

如果您的操作是动态的（因为多个视图可以重定向到同一个操作），您可以使用请求的 UrlReferrer 属性。更多信息可以在[MSDN 站点](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)上找到。您将不得不实现一个`Redirect("URL")`，或者解析 URL 以推断控制器和视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:04:59.647

在表单中添加一个隐藏的输入来指示视图的名称。

```
<input type="hidden" id="ViewName" name="ViewName" value="View1" /> 
```

然后在您的操作中使用`Request.Form["ViewName"]`来检索它。

```
string viewName = Request.Form["ViewName"];

switch (viewName)
{
    case "View1":
        return RedirectToAction("View1","Controller");

    case "View2":
        return RedirectToAction("View2","Controller");

    // ...

    default:
        return RedirectToAction("SomeDefault", "Controller");
} 
```

# java - 如何从 xml 文件中提取数据作为我的代码的输入

> ID：12818552
> 
> 赞同：0
> 
> 时间：2012-10-10T11:44:46.517
> 
> 标签：java, c, xml

如何从 xml 文件中提取数据并将它们存储到我的代码中的数据结构中以使用它们？我可能正在使用 java 或 c 进行编码，但我需要方便地从 xml 文件中提取数据才能继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:28:01.100

如果您的 XML 文件具有相应的架构（或多个架构），那么最简单的方法是使用[JAXB](http://jaxb.java.net/)生成可用于编组（将 Java 对象转换为 XML）和解组（将 XML 读取为 Java 对象）的 Java 类。

即使您没有模式，它仍然是值得的，但是在这种情况下，您必须手动创建和注释与您的 XML 结构相对应的 Java 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:48:06.830

好吧，作为您可以使用[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)的可能选项之一， PHP 官方网站上有大量可用的文档。包括的例子。

# ruby-on-rails - 控制器中带有参数的 Rails 3.2 ajax 示例

> ID：12818555
> 
> 赞同：1
> 
> 时间：2012-10-10T11:44:58.267
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

如何在下一个示例中创建 ajax：

在控制器中：

```
def index
    if params[:p] == "one"
        @record = "Hello, 1!"
    elsif params[:p] == "two"
        @record = "Hello, 2!"
    else
        @record = "something else"
    end
end 
```

在视图中（hellos 控制器，索引操作）：

```
<%= link_to "One", hellos_path(:p => "one") %>
<%= link_to "Two", hellos_path(:p => "two") %>
<%= render :partial => 'record' %> 
```

部分_record.html.erb：

```
<%= @record %> 
```

就这样。索引控制器中的所有操作和只有参数都在变化。我不想重新加载整页 - 只使用新的控制器变量记录部分内容。

如何“AJAXize”呢？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:52:12.557

1-将 :remote => true 添加到您的链接：

```
<%= link_to "One", hellos_path(:p => "one"), :remote => true %> 
```

2-创建一个视图 index.js.erb ：

```
$("#your_div").html("<%= render :partial => "record" %>") 
```

3- 在 index.html.erb 中创建一个 ID 为 your_div 的 div。此 div 将使用 @record 对象填充。

# c# - 通过网络将 C# 应用程序与 SQL Server 2008 连接

> ID：12818557
> 
> 赞同：1
> 
> 时间：2012-10-10T11:45:09.120
> 
> 标签：c#, sql-server-2008, networking, connection

尝试连接时出现错误

> *你调用的对象是空的。*

该应用程序正在使用 SQL Server 数据库在我的笔记本电脑上运行，但我需要连接笔记本电脑上的应用程序并`Sharkawy-PC`通过网络与我的 PC () 上的 SQL Server 连接我需要`app.config`代码和代码帮助以使用来自`app.config`.

```
 private void btnlogin_Click(object sender, EventArgs e)
    {
        SqlCommand cmd;
       string UserName = txtusername.Text;
      var Connectionstring = ConfigurationManager.ConnectionStrings["BookingConnectionString"].ConnectionString;
      SqlConnection conn = new SqlConnection(Connectionstring);

       //////SqlConnection conn = new SqlConnection();
       //////conn.ConnectionString = System.Configuration.ConfigurationSettings.AppSettings["BookingConnectionString"];

        string strsql = "select * from UserInfo,UsersGroup  where UserInfo.GroupID=UsersGroup.GroupID and UserName = '" + UserName + "' and UserPassword='" + txtusername.Text + "'";
        cmd = new SqlCommand(strsql, conn);
        conn.Open();

        dr = cmd.ExecuteReader();
        if (dr.HasRows)
        {
            dr.Read();
            string d = dr.GetString(9).ToString();

            if (d == "Admin")
            {
                AdminMainfrm adminmainfrm = new AdminMainfrm(txtusername.Text);
                this.Hide();
                adminmainfrm.ShowDialog();
            }
            else
            {
                UserMainfrm UserMainfrm = new UserMainfrm();
                this.Hide();
                UserMainfrm.ShowDialog();
            }
        }
        else
        {
            label5.Text = "Invalid Username or password, please try again";

        }
        conn.Close();
    } 
```

这是我在 app.config 中的连接

```
<add name="Booking.Properties.Settings.BookingConnectionString"
     connectionString="DRIVER=SQL Server;SERVER=SHARKAWY-PC;UID=sa;PWD=123456;APP=Microsoft® Windows® Operating System;WSID=SHARKAWY;DATABASE=Booking;Network=DBMSSOCN"          
     providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:51:23.650

您需要做的一件事是更改此行：

```
var Connectionstring = ConfigurationManager.ConnectionStrings["BookingConnectionString"].ConnectionString; 
```

到：

```
var Connectionstring = ConfigurationManager.ConnectionStrings["Booking.Properties.Settings.BookingConnectionString"].ConnectionString; 
```

那应该可以解决对象引用错误。

* * *

我要推荐的下一件事是您简化连接字符串，您不需要所有这些信息，只需使用以下内容：

```
<add name="Booking.Properties.Settings.BookingConnectionString"
     connectionString="SERVER=SHARKAWY-PC;UID=sa;PWD=123456;DATABASE=Booking"
     providerName="System.Data.SqlClient" /> 
```

接下来我要推荐的是，即使在测试期间，您**也不要**使用该`sa`帐户，如果您习惯了它，您将采用这种方式进行部署。

我要推荐的最后一件事是您使用参数化查询来防止 SQL 注入，因此请更改您的查询逻辑：

```
string strsql = "select * from UserInfo,UsersGroup  where UserInfo.GroupID=UsersGroup.GroupID and UserName = '" + UserName + "' and UserPassword='" + txtusername.Text + "'";
cmd = new SqlCommand(strsql, conn);
conn.Open();

dr = cmd.ExecuteReader(); 
```

对此：

```
string strsql = "select * from UserInfo,UsersGroup  where UserInfo.GroupID=UsersGroup.GroupID and UserName = @UserName and UserPassword=@UserPassword";

cmd = new SqlCommand(strsql, conn);
cmd.AddParameterWithValue("@UserName", UserName);
cmd.AddParameterWithValue("@UserPassword", txtusername.Text);

conn.Open();

dr = cmd.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:53:33.490

请查阅SQL Server 网络配置下**的 SQL Server 配置管理器**，您将找到协议。确保 TCP/IP 已启用。初始安装后，通常禁用此功能。

# sql - 具有多个连接的关系代数

> ID：12818560
> 
> 赞同：2
> 
> 时间：2012-10-10T11:45:12.467
> 
> 标签：sql, relational-algebra

我正在尝试将以下问题写为关系代数：

所有具有较低价格替代产品的产品的 Pnr 和 pname。

我的关系如下：

```
Product(Pnr, Pname, Price) //Product info
Substprod(Pnr, Subst-Pnr) //Product which can replace other products 
```

如果我在 SQL 中这样做，它看起来像这样：

```
SELECT p.pnr, p.pname
FROM Product p1, Substprod s, Product p2
WHERE p1.pnr = s.pnr
AND s.subst_pnr = p2.pnr
AND p1.price > p2.price 
```

但我看不出如何在关系代数中得到相同的结果。我猜我也需要在这里进行 3-way-join，但是在特定产品的一个价格应该低于其替代品的情况下遇到了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:04:50.073

也许是这样的？确切的语法有点生疏，但总体思路就在那里。

```
T1 <- ρ pris = substpris (Product ⨝ Substprod)
T2 <- σ price > substprice (T1 ⨝ Product)
T3 <- π pnr,name (T2) 
```

# voice - 如何获得 iLBC 语音长度？

> ID：12818579
> 
> 赞同：0
> 
> 时间：2012-10-10T11:46:07.703
> 
> 标签：voice

是否可以通过查看文件大小来获得 iLBC 语音长度？这有什么公式吗？

文件大小是否与语音长度成正比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:28:56.820

只需使用 NSFileManager：

```
NSFileManager *fm = [[NSFileManager alloc] init];
NSDictionary *attrs = [fm attributesOfItemAtPath:recordedFile.path error: NULL];
NSLog(@"File size: %@", [NSString stringWithFormat:@"%lld", [attrs fileSize]]); 
```

# c# - 从第二种形式将项目添加到列表框

> ID：12818581
> 
> 赞同：3
> 
> 时间：2012-10-10T11:46:39.043
> 
> 标签：c#, listbox

我正在尝试将项目从另一个表单添加到列表框中。Form1 有一个带有“虚拟”项目的列表框，当我尝试从该表单添加更多项目时，一切正常。但是，当我尝试从不同的表单 (AddContact.cs) 添加项目时，没有添加任何项目。我将提供两种形式的代码。

PS：列表框设置为公共，以便能够从 Form1 外部访问它。

表格1：

```
 public Form1()
    {
        InitializeComponent();
    }
    private void Form1_Load(object sender, EventArgs e)
    {
        list_names.Items.Add("Dummy");
    }

    private void btn_check_Click(object sender, EventArgs e)
    {
        if (list_names.SelectedItem == null)
        {
            MessageBox.Show("No item has been selected.", "Error",
                MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else if (list_names.SelectedItem.ToString() == "Dummy")
        {
            //Dummy code for testing
            MessageBox.Show("Dummy has been selected!");
        }
    }

    private void btn_add_Click(object sender, EventArgs e)
    {
        new AddContact().Show();
    }

    private void btn_remove_Click(object sender, EventArgs e)
    {
        //TODO: Remove items from listbox
    } 
```

增加联系人：

```
 Form1 form;

    public AddContact()
    {
        InitializeComponent();
        form = new Form1();
    }

    private void btn_add_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == string.Empty)
        {
            MessageBox.Show("No input has been given.");
        }
        else
        {
            //This doesn't work
            string s = textBox1.Text;
            form.list_names.Items.Add(s);
            textBox1.Text = "";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:50:10.163

问题是您在 中创建新表单`AddContact`，您需要对`Form1`.

```
Form1 form;

public AddContact(Form1 frm)
{
    InitializeComponent();
    form = frm;
} 
```

并且

```
private void btn_add_Click(object sender, EventArgs e)
{
    new AddContact(this).Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:56:05.610

一个小解决方法是事件处理程序

只需派生您自己的 EventArgs

```
public class AddItemEventArgs : EventArgs
{
    public string Item { get; set; } 
} 
```

并将此代码添加到您的 AddContanct-Form：

```
public event EventHandler OnAddItemNeeded(object sender, AddItemEventArgs); 
```

在`btn_add_click`方法中，您必须触发此事件：

```
this.OnAddItemNeeded(this, new AddItemEventArgs() { Item = textBox1.Text }); 
```

在 Form1 中调用 AddContact 的新实例时：

```
AddContact ac = new AddContact();
ac.OnAddItemNeeded += new EventHandler(this.OnAddItemNeeded);
ac.Show(); 
```

还有一个在 Form1 中完成工作的处理程序：

```
private void OnAddItemNeeded(object sender, AddItemEventArgs e)
{
    list_names.Items.Add(e.Item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:07:15.470

```
public partial class Form1 : Form
{
    public static List<string> lst=new List<string>();
    private void Form1_Load(object sender, EventArgs e)
    {
          if (lst != null)
            listBox1.DataSource = lst;
    }
}

public partial class Form2 : Form
{
       private void button1_Click(object sender, EventArgs e)
       {             
         Form1.lst.Add(textBox1.Text);
         textBox1.Text = string.Empty;
       }
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T11:50:20.497

好吧，您在 AddContact 构造函数中初始化 Form1，这就是问题所在。

试试这个：

增加联系人：

```
Form1 form;

public AddContact(Form1 f)
{
    InitializeComponent();
    form = f;
}

private void btn_add_Click(object sender, EventArgs e)
{
    if (textBox1.Text == string.Empty)
    {
        MessageBox.Show("No input has been given.");
    }
    else
    {
        string s = textBox1.Text;
        form.list_names.Items.Add(s);
        textBox1.Text = "";
    }
} 
```

并添加按钮：

```
private void btn_add_Click(object sender, EventArgs e)
{
    new AddContact(this).Show();
} 
```

# windows-phone-7 - MVVM WP7 - 页面导航和过渡动画

> ID：12818582
> 
> 赞同：3
> 
> 时间：2012-10-10T11:46:53.480
> 
> 标签：windows-phone-7, mvvm, mvvm-light, transition

我是 WP7 中 MVVM 模型的初学者。我无法实现页面之间的导航以及动画过渡。

我想要达到的目标：

1.  当*Page1*导航到*Page2*将开始过渡动画*animation1*但当*Page1*导航到*Page3*将开始不同的过渡动画*animation2*。

2.  ViewModel 可以取消 GoBack 导航，例如打开搜索模式时（TextBox 可见，用户按返回键后，TextBox 将被隐藏，ViewModel 将切换到搜索模式关闭，并防止页面导航返回）

我创造了这样的东西：

ExtendedPhoneApplicationPage : PhoneApplicationPage - 特殊控件，继承自PhoneApplicationPage，通过接口INavigation调用ViewModel的请求

MainViewModel : INavigation - MainViewModel 是 ViewModel，并实现接口 INavigation。

这个怎么运作 ？

1.  用户点击返回键
2.  ExtendedPhoneApplicationPage 询问 MainViewModel（或实现 INavigation 的不同）现在应该开始什么动画
3.  MainViewModel 将正确的动画返回给 View

**MVVM 是否正确？如果没有怎么能做到这一点？**

**编辑：**

可能我上面写的不是很好的解决方案，我读到 ViewModel 应该只通过 Data Binding 和 Command 与 View 通信。我今天在想这个，我明白了。

在 XAML 中应该是这样的：

```
<Navigation>
        <NavigationInTransition>
            <NavigationInTransition.ForwardTransitions>
                <ForwardTransition NavigateTo="page2.xaml">
                    <ForwardTransition.Animation>
                        <SlideTransitionAnimation Mode="ForwardIn"/>
                    </ForwardTransition.Animation>
                </ForwardTransition>
                <ForwardTransition NavigateTo="page3.xaml">
                    <ForwardTransition.Animation>
                        <TurnstyleTransitionAnimation Mode="ForwardIn"/>
                    </ForwardTransition.Animation>
                </ForwardTransition>
            </NavigationInTransition.ForwardTransitions>
        </NavigationInTransition>
        <BackKeyPressed IsPrevent="{Binding SomethingBool}" Command="{Binding BackKeyPressed}"/>
</Navigation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:33:58.610

在 App.xaml 创建资源

```
 <Style x:Key="PageStyle" TargetType="phone:PhoneApplicationPage">
  <Setter Property="toolkit:TransitionService.NavigationInTransition">
    <Setter.Value>
      <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
          <toolkit:TurnstileTransition Mode="BackwardIn" />
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
          <toolkit:TurnstileTransition Mode="ForwardIn" />
        </toolkit:NavigationInTransition.Forward>
      </toolkit:NavigationInTransition>
    </Setter.Value>
  </Setter>
  <Setter Property="toolkit:TransitionService.NavigationOutTransition">
    <Setter.Value>
      <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
          <toolkit:TurnstileTransition Mode="BackwardOut" />
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
          <toolkit:TurnstileTransition Mode="ForwardOut" />
        </toolkit:NavigationOutTransition.Forward>
      </toolkit:NavigationOutTransition>
    </Setter.Value>
  </Setter>
</Style> 
```

对于具有过渡样式 =“{StaticResource PageStyle}”的页面

# wpf - 我可以将 TextBox 的 CaretIndex 用作按钮中的 CommandParameter 吗？

> ID：12818585
> 
> 赞同：1
> 
> 时间：2012-10-10T11:47:01.790
> 
> 标签：wpf, mvvm, textbox

我想要一个按钮将在列表框中选择的文本插入到文本框中。我正在尝试为此使用命令，我将当前插入符号索引作为命令参数传递，然后命令处理程序将在此索引处插入选定的文本。是否可以？我不知道如何在 xaml 中引用 aTextBox.CaretIndex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:18:41.067

这个问题类似于[这个问题](https://stackoverflow.com/questions/4994000/textbox-caretindex-property-in-viewmodel)。

关键是绑定属性 CaretIndex 是没有用的，因为它不是 DependencyProperty，因为您不会收到值更改的通知。具体来说，如果您直接绑定到 CaretIndex 程序将编译，但数据绑定中的 CaretIndex 的值将始终为 0，即使您在文本框中移动光标也是如此。

您可以改为创建可以绑定的附加属性，而不是 CaretIndex。[此处](https://stackoverflow.com/questions/2245928/mvvm-and-the-textboxs-selectedtext-property)提出了一种解决方案，其中添加了附加属性以绑定 SelectedText 属性，该属性也不是依赖项属性。这个想法是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:06:16.023

你可以绑定到`TextBox`by name 并`CaretIndex`给`Path`prop

```
<TextBox Name="MyTextBox" Text="My Text" />
<Button Command="{Binding MyCommand}" CommandParameter="{Binding ElementName=MyTextBox Path=CaretIndex}"/> 
```

# web-services - 批量更新（错误代码 0x81020016）

> ID：12818590
> 
> 赞同：2
> 
> 时间：2012-10-10T11:47:10.010
> 
> 标签：web-services, sharepoint-2007, sharepoint-list, innerxml

我已经使用网络服务来更新 Sharepoint 列表。我正在使用网络凭据访问 remort 服务器。

```
mylist.Credentials = new NetworkCredential(_username, _password, _domain); 
```

这是我的 innerXml 代码：

```
 StringBuilder innerXml = new StringBuilder();
              innerXml.AppendFormat("<Method ID='1' Cmd='Update'>" +
              "<Field Name='ID'>" + id + "</Field>" +
              "<Field Name='Title'>" + title + "</Field>" +
              "<Field Name='CostCTRShortText'>" + CostCTRShortText + "</Field>" +
              "<Field Name='ActTyp'>" + ActTyp + "</Field>" +
              "<Field Name='Employee'>" + Employee + "</Field>" +
              "<Field Name='Price'>" + Price + "</Field>" +
              "<Field Name='ITECCategory'>" + ITECCategory + "</Field>" +
              "<Field Name='ServicePrice'>" + ServicePrice + "</Field>"
              );

        innerXml.AppendLine("</Method>"); 
```

不幸的是，我在更新时遇到错误：

```
<Result ID="1,Update" xmlns="http://schemas.microsoft.com/sharepoint/soap/"><ErrorCode>0x81020016</ErrorCode><ErrorText>Item does not exist

The page you selected contains an item that does not exist.  It may have been deleted by another user.</ErrorText></Result> 
```

这仅在我尝试更新远程服务器中的列表项时发生。相同的代码将按预期工作并更新本地站点中的列表项。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:10:04.893

我发现了这个问题。这`ID`是重要的角色。确保您的`ID`字段检索到正确的值。就我而言，我的本地列表从 ID =1 开始，但生产服务器列表没有 ID=1 的行。

您可以简单地从您的 SharePoint 列表中看到此 ID 列。并检查值。

# asp.net-mvc-3 - asp.net mvc3 - 显示 RadioButtons 列表

> ID：12818591
> 
> 赞同：0
> 
> 时间：2012-10-10T11:47:16.657
> 
> 标签：asp.net-mvc-3

我正在尝试从控制器获取单选按钮列表并将其显示在视图上，但它似乎正在工作。我有以下型号

```
public class Module
{

    public int ModuleId { get; set; }

    public string Title { get; set; }

    public string Description { get; set; }

    public bool IsActive { get; set; } 
```

}

在控制器中，我获取模块列表并将其传递给视图：

```
[HttpGet]
    public ActionResult SelectAdmin()
    {
        //getting the list of modules from db
        List<Module> modulelst = GetModules(); 
        ViewBag.lstm = modulelst;

        return PartialView();
    } 
```

现在在视图中，我试图以 RadioButtons/Checkboxes 的形式显示模块列表，并获取所选模块的相应 ID。

我正在尝试的视图代码如下：

```
@model List<MyFriday.Domain.Model.Client> 
```

@using (Ajax.BeginForm("SelectAdmin", "CMAdmin", null, new AjaxOptions { UpdateTargetId = "update-message", InsertionMode = InsertionMode.Replace, HttpMethod = "POST", OnSuccess = "UpdateSuccess" }, new { @ id = "EditForm" })) { @Html.ValidationSummary(true)

```
<fieldset>

<div class="content">                     
            @using (Html.BeginForm())
            {
                <div>
                Select the Admin Type:
                 </div>
                <div id="divModules">
                @foreach (var Modules in ViewBag.lstm)
                {
                    <div class="formlabel">
                        <div align="right" class="label" style="cursor: pointer; position: relative;">
                            @(Modules.First().Title)
                        </div>
                    </div>
                    <div class="formelement">
                        <input type="radio" id=""/>
                            @(Modules.First().ModuleId)

                    </div>
                    <div style="clear: both;">
                    </div>
                }
                </div>
                <input id="Submit1"  type="submit" value="Submit"/>
                <input type="button" value="Cancel" onclick="javascript:cancelconfirm(this)"/>   

            }
            <div style="clear: both;">
                &nbsp;</div>

        </div>

</fieldset> 
```

}

上面的视图没有显示

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:00:57.200

首先我会改变控制器：

```
[HttpGet]
public ActionResult SelectAdmin()
{
    //getting the list of modules from db
    List<Module> modulelst = GetModules(); 
    // ViewBag.lstm = modulelst;

    return PartialView(modulelst);
} 
```

然后更改视图...在第一行添加它使用模型的 decalration：

```
@model List<Module> 
```

然后将for循环更改为：

```
 @foreach (var module in Model)
            {
                <div class="formlabel">
                    <div align="right" class="label" style="cursor: pointer; position: relative;">
                        @Html.DisplayFor(modelItem => module.Title, true)

                    </div>
                </div>
                <div class="formelement">
                    <input type="radio" id=""/>
                        @RadioButtonFor(modelItem => module.ModuleId, new { @id="ModuleId"})

                </div>
                <div style="clear: both;">
                </div>
            } 
```

# git - 迁移 git 以强制导入

> ID：12818594
> 
> 赞同：3
> 
> 时间：2012-10-10T11:47:25.110
> 
> 标签：git, perforce, migrate, git-p4

我从 git 迁移到 perforce 时遇到问题：

我的情况：我想从一台 perforce 服务器转移到我自己的 perforce 服务器。我只能访问我的 Perforce 用户被允许的仓库。

所以我尝试使用 git-p4 导出我的 perforce 仓库以及所有历史记录。这行得通，我现在将数据保存在 git 存储库中。

但现在我正试图在我的新 perforce 服务器上获取这个 git 存储库（包含所有历史记录），但我不知道该怎么做。我尝试将 P4 配置 (P4PORT,P4USER) 设置为

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:14:57.983

试试 Git 融合。您基本上可以将 Perforce 用作上游 Git 存储库并推送您的历史记录。

# java - java桌面浏览：如何获取当前URL？

> ID：12818599
> 
> 赞同：1
> 
> 时间：2012-10-10T11:47:41.427
> 
> 标签：java, authentication, browser, external, vk

我正在尝试在 VKontakte - 俄罗斯社交网络上实现我的独立 Java 应用程序的身份验证。

我想避免向用户请求密码，所以我的方法是这样的：

1.  使用特殊生成的 URL 打开默认浏览器
2.  在打开的页面中，用户单击接受按钮
3.  浏览器被重定向到一个特殊的 URL，我可以从中提取 access_token 应该用于任何其他进一步的请求。

但问题是我不知道如何从浏览器中获取新的 URL。我正在使用的代码是

```
if (Desktop.isDesktopSupported()) {
        Desktop desktop = Desktop.getDesktop();
        if (desktop.isSupported(Desktop.Action.BROWSE)) {
            try {
                URI uri = new URI("some URL here");
                desktop.browse(uri); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:57:56.487

你不能用 Desktop.browse() 做到这一点。您正在初始化 java 无法访问的程序（浏览器）的实例。Java 只传递了您提供的 URL。

（理论上这是可能的，如果 ie Desktop.browse() 将启动一个定制的浏览器，您可以通过 Java API 与之通信）

# wpfdatagrid - DataGrid MVVM Light中的SelectedItem

> ID：12818610
> 
> 赞同：3
> 
> 时间：2012-10-10T11:48:36.457
> 
> 标签：wpfdatagrid, wpftoolkit, selecteditem

我在 DataGrid（WPF Toolkit）中绑定 SelectedItem 时遇到问题。当我从主窗体 SelectedItem 打开 UserControl 时，DataGrid 中不显示。但是如果在调试器中查看，一切都很好，并且 selecteditem 有一些价值。然后例如，如果我再次设置值 SelectedItem（在代码中），DataGrid 开始正确显示 SelectedItem。

这是我的代码的一部分：

DictionaryView.xaml

```
<UserControl x:Class="AccountingCatridge.Views.DictionaryView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" 
         xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"
         DataContext="{Binding Source={StaticResource Locator}, Path=Dictionary}">
<Grid>
    <Label Content="{Binding Title}" HorizontalAlignment="Left" VerticalAlignment="Top" Width="300" FontWeight="Bold" HorizontalContentAlignment="Center" FontSize="14" />
    <my:DataGrid x:Name="dataGrid"
                 Height="247" 
                 HorizontalAlignment="Left" 
                 Margin="0,53,0,0" 
                 VerticalAlignment="Top"
                 Width="300" 
                 IsReadOnly="True"
                 AutoGenerateColumns="False"
                 ItemsSource="{Binding DataItems}" 
                 SelectedItem="{Binding SelectedDictionaryItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 HeadersVisibility="None">
        <my:DataGrid.Columns>
            <my:DataGridTextColumn Header="ID" Width="50" Binding="{Binding ID}" IsReadOnly="True"/>
            <my:DataGridTextColumn Header="Value" Width="*" Binding="{Binding Value}" IsReadOnly="True" />
        </my:DataGrid.Columns>

    </my:DataGrid>
    <ToolBarTray Height="26" HorizontalAlignment="Left" Margin="0,27,0,0" Name="toolBarTray1" VerticalAlignment="Top" Width="300" IsLocked="True">
        <ToolBar>
            <ToolBar.Items>
                <Button Content="Add" Command="{Binding AddElementCommand}"/>
                <Button Content="Edit" Command="{Binding EditElementCommand}"/>
                <Button Content="Delete" Command="{Binding DeleteElementsCommand}"/>
            </ToolBar.Items>
        </ToolBar>
    </ToolBarTray>
</Grid> 
```

字典视图模型

```
public DictionaryRecord SelectedDictionaryItem
{
    get { return _selectedDictionaryItem; }
    set
    {
        if (_selectedDictionaryItem == value) return;
        _selectedDictionaryItem = value;
        RaisePropertyChanged("SelectedDictionaryItem");
    }

}

public IEnumerable<DictionaryRecord> DataItems
{
    get { return _dataItems; } 
    set
    {
        if (_dataItems == value) return;
        _dataItems = value;
        RaisePropertyChanged("DataItems");
        SelectedDictionaryItem = _dataItems.First();
    }
}

public DictionaryViewModel(IDataService dataService)
{
    _dataService = dataService;
    Messenger.Default.Register<ShowDictionaryMessage>(this, ShowDictionary);
}

private void ShowDictionary(ShowDictionaryMessage mes)
{
    _typeDict = mes.TypeDict;
    Title = StringEnum.GetStringValue(_typeDict);

    switch (_typeDict)
    {
        case TypeDictionary.Employees:
            DataItems = _dataService.GetEmployees();
            break;
        case TypeDictionary.ModelPrinters:
            DataItems = _dataService.GetPrinters();
            break;
    }
} 
```

它是更多的代码和图像。

```
 public RelayCommand EditElementCommand
        {
            get { return _editElementCommand ?? (_editElementCommand = new RelayCommand(EditElement)); }
        }

        private void EditElement()
        {
            if (SelectedDictionaryItem == null) return;
            Messenger.Default.Send(new ShowDictionaryRecordMessage{ Action = TypeRecordAction.Edit, Dictionary = _typeDict, Record = SelectedDictionaryItem});
        }

public RelayCommand SomeSimpleCommand
        {
            get { return _someSimpleCommand ?? (_someSimpleCommand = new RelayCommand(SomeSimpleAction)); }
        }

        private void SomeSimpleAction()
        {
            SelectedDictionaryItem = _dataItems.Last();
        } 
```

我在打开表格时看到的这里

![...........](../Images/4b92e7f0003c9bafc14606634df06a04.png)

但是 SelectedDictionaryItem 具有价值，如果我按下“编辑”，带有我所需数据的表单将正确打开。

如果我执行 SomeSimpleCommand。我看到以下内容

![...........](../Images/32808d6e14be6b1acadb703ad790f2f3.png)

我需要知道为什么在第一种情况下我没有看到 SelectedItem 的深蓝线。

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:55:08.410

dit：好的 - 可以看到你现在想要做什么......

我过去也遇到过类似的问题，尽管那是第 3 方控制。我认为我遇到的是在将数据加载到网格之前设置了 Selected 项。

我最终不得不做一些软糖，在网格的数据加载事件后面有一些代码。vm 是一个模块级变量，它存储对 ViewModel 的引用 - 或者您可以通过 this.DataContext 作为 ViewModel 来获取它，因为您似乎使用定位器来获取您的：

```
 private void CaseGridView_DataLoaded(object sender, EventArgs e) 
    { 
        var grid = sender as GridView; 
        if (grid != null) 
        { 
            grid.SelectedItem = vm.CurrentlySelectedItem; 
        } 
    } 
```

另一件值得尝试的事情是 UpdateLayout() 以确保它刷新

# azure - 关于 BlobRequest.PutBlock 方法

> ID：12818618
> 
> 赞同：1
> 
> 时间：2012-10-10T11:49:14.493
> 
> 标签：azure, blob

我想知道如何形成 Blobrequest.PutBlock(Uri uri,int timeout,string blockid,string leaseid);

当用户尝试上传像 100 MB 这样的大文件时，我会将它们分成内存中每个 4MB 的块（将 4 MB 数据读入字节 []）..

如何将传入的文件流拆分为块并使用 BlobRequest.PutBlock 和 BlobRequest.PutBlockList 上传到 blob，因为我有与 blob 关联的租约。如果我需要拆分文件并使用可用的 Azure 上传带有租约 id 的块，这是唯一的选择开发工具包 1.7.0

问候， 维维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:04:07.773

只需在调用[PutBlock](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.protocol.blobrequest.putblock.aspx)时将 leaseId 作为最后一个参数传递：

```
public static HttpWebRequest PutBlock (
    Uri uri,
    int timeout,
    string blockId,
    string leaseId
) 
```

如果您有 CloudBlob，则该 URL 很容易构建（[有关更多信息，请参阅 Steve 的博客文章](http://blog.smarx.com/posts/leasing-windows-azure-blobs-using-the-storage-client-library)）：

```
var creds = blob.ServiceClient.Credentials;
var transformedUri = new Uri(creds.TransformUri(blob.Uri.ToString()));
BlobRequest.PutBlock(transformedUri, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:23:16.897

您可以发现此链接对于研究将文件上传到块中的 azure blob 很有用：
[http ://wely-lau.net/2012/02/26/uploading-big-files-in-windows-azure-blob-storage-with- putlistblock/](http://wely-lau.net/2012/02/26/uploading-big-files-in-windows-azure-blob-storage-with-putlistblock/)
我在这里复制代码以删除外部依赖项：

```
 protected void btnUpload_Click(object sender, EventArgs e)
{
    CloudBlobClient blobClient;
    var storageAccount = CloudStorageAccount.FromConfigurationSetting("DataConnectionString");
    blobClient = storageAccount.CreateCloudBlobClient();

    CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");
    container.CreateIfNotExist();

    var permission = container.GetPermissions();
    permission.PublicAccess = BlobContainerPublicAccessType.Container;
    container.SetPermissions(permission);

    string name = fu.FileName;
    CloudBlockBlob blob = container.GetBlockBlobReference(name);

    blob.UploadFromStream(fu.FileContent);

    int maxSize = 1 * 1024 * 1024; // 4 MB

    if (fu.PostedFile.ContentLength > maxSize)
    {
        byte[] data = fu.FileBytes; 
        int id = 0;
        int byteslength = data.Length;
        int bytesread = 0;
        int index = 0;
        List<string> blocklist = new List<string>();
        int numBytesPerChunk = 250 * 1024; //250KB per block

        do
        {
            byte[] buffer = new byte[numBytesPerChunk];
            int limit = index + numBytesPerChunk;
            for (int loops = 0; index < limit; index++)
            {
                buffer[loops] = data[index];
                loops++;
            }
            bytesread = index;
            string blockIdBase64 = Convert.ToBase64String(System.BitConverter.GetBytes(id));

            using (var ms = new MemoryStream(buffer, true))
              blob.PutBlock(blockIdBase64, ms, null); 
```

无效的）; blocklist.Add(blockIdBase64); 身份证++; } while (byteslength - bytesread > numBytesPerChunk);

```
 int final = byteslength - bytesread;
        byte[] finalbuffer = new byte[final];
        for (int loops = 0; index < byteslength; index++)
        {
            finalbuffer[loops] = data[index];
            loops++;
        }
        string blockId = Convert.ToBase64String(System.BitConverter.GetBytes(id));
        using (var ms = new MemoryStream(finalbuffer, true))
          blob.PutBlock(blockId, ms, null);
        blocklist.Add(blockId);

        blob.PutBlockList(blocklist); 
    }
    else
        blob.UploadFromStream(fu.FileContent);            
} 
```

您还可以在此处找到由 Steve Marx 开发的用于大文件上传（例如）的 silverlight 控件[。](http://blog.smarx.com/posts/uploading-windows-azure-blobs-from-silverlight-part-1-shared-access-signatures)

# c# - SQL更新丢失顺序的列？

> ID：12818619
> 
> 赞同：5
> 
> 时间：2012-10-10T11:49:23.083
> 
> 标签：c#, sql

我有一种情况，我在 SQL 方面很弱。这里是。

我已归档项目，这些项目存储有一个数字。在数据库表中是这样的。

```
RowId   Number  CaseId
234        1       787
235        2       787
236        3       787
237        4       787
238        5       787 
```

这是第一次插入时的样子。但是删除后，取号3被删除，现在DB上是这样的。

```
RowId   Number  CaseId
234        1       787
235        2       787   
237        4       787
238        5       787 
```

3 不见了，但我需要的是这个。

```
RowId   Number  CaseId
234        1       787
235        2       787   
237        3       787
238        4       787 
```

数字也应该更新。但我想不出办法做到这一点。顺便说一句，有很多 CaseId。我不会更新整个表，我将通过 CaseId 选择它。你能告诉我怎么做吗？我正在使用 C# .NET

我是否应该将它们放入列表（从 Select 查询中对它们进行排序的方式）并一一检查然后更新它们？我可以在 C# 上一一写检查，但我认为它不会有效率。什么是有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:55:32.570

Number 是否必须在数据库本身中更新？如果没有，你甚至需要存储这个吗？您还在编写 SQL 查询吗？或者只是使用实体框架？如果您正在编写实际查询，并且如果您在选择数据时只需要行号，则可以尝试以下操作：

```
SELECT RowId, ROW_NUMBER() OVER (ORDER BY RowId ASC) AS [Number], CaseId 
FROM [MyTable] 
WHERE CaseID = 787 
```

编辑：正如@Mike 在评论中指出的那样，对此提出看法可能是有意义的。您可以从主表中删除 [Number] 并制作如下视图：

```
CREATE VIEW dbo.MyView 
AS 
    SELECT RowId, 
    ROW_NUMBER() OVER (PARTITION BY CaseId ORDER BY RowId ASC) AS Number, 
    CaseId FROM MyTable 
```

PARTITION 语句将确保 Number 为每个不同的 RowId 重置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:59:06.403

这可以通过 ROW_NUMBER()、一个表变量和跨两个表的更新来实现！

```
-- Declare a variable to hold case id

-- This can easily be moved into the signature
-- of a sproc.
DECLARE @caseId INT;
SELECT @caseId = 787;

-- Table variable to hold results
DECLARE @newOrder TABLE 
(
   CaseId int,
   RowId int,
   SortOrder int
)

-- Use row number to work out the new sort order
-- positions
INSERT INTO 
  @newOrder
SELECT
  CaseId,
  RowId,
  ROW_NUMBER OVER (ORDER BY [Number]) AS SortOrder
FROM
  [Cases]
WHERE
  CaseId = @caseId

-- Finally, perform a multi-table update using
-- the new sort orders from the table variable
UPDATE
  c
SET
  [Number] = o.SortOrder
FROM
  Cases c,
  @newOrder o
WHERE
  c.RowId = o.RowId
AND c.CaseId = @caseId 
```

# python - PostgreSQL。在选择查询中创建数组

> ID：12818621
> 
> 赞同：0
> 
> 时间：2012-10-10T11:49:29.527
> 
> 标签：python, sql, postgresql

如何将以下 python 表达式转换为 postgesql？

```
>>> ','.join([30 for x in range(3)])
30,30,30 
```

我有列表：

```
id | entry | type | size
1 10 0 10 
2 20 0 10 
3 30 1 10
4 30 2 15 
```

我想这样查询它：

```
SELECT id,
       CASE WHEN type = 1
          THEN 
              --For entry 30 and size 10 (300) - get 150,90,60
          WHEN type = 2
          THEN
              --For entry 10 and size 15 (150) - get 30,30,30,30,30 
       ELSE 
          entry*size
       END
 FROM table; 
```

**UPD** 预期结果：

```
id | prize_pool
1 | 100
2 | 200
3 | 150,90,60
4 | 30,30,30,30,30 
```

**python中的UPD2** 等效函数：

```
def prize_pool(entry,type,size):
    prize = entry*size
    if type == 0: 
        return [prize]
    if type == 1:
        return [prize * x for x in [0.5,0.3,0.2]]
    if type == 2:
        return [prize/int(size/3) for x in range(int(size/3))] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:13:37.303

假设您的起始表已命名`plop`

```
SELECT
  plop.id,
  CASE
    WHEN plop.type = 1 THEN (SELECT array_agg(plop.entry * plop.size * val.x) FROM (VALUES (0.5), (0.3), (0.2)) val (x))::int4[]
    WHEN plop.type = 2 THEN (SELECT array_agg(3 * plop.entry * x/x ) FROM generate_series(1, plop.size / 3) x)::int4[]
    ELSE ARRAY[plop.entry * plop.size]::int4[]
  END AS prize_pool
FROM plop
; 
```

返回：

```
┌────┬──────────────────┐                                                                                                                                                                                       
│ id │    prize_pool    │                                                                                                                                                                                       
├────┼──────────────────┤                                                                                                                                                                                       
│  1 │ {100}            │                                                                                                                                                                                       
│  2 │ {200}            │                                                                                                                                                                                       
│  3 │ {150,90,60}      │                                                                                                                                                                                       
│  4 │ {90,90,90,90,90} │                                                                                                                                                                                       
└────┴──────────────────┘ 
```

因为`entry x size / ( size / 3 ) = 3 x entry`

注意`x/x`总是等于 1 并且需要向 Postgres 指示它必须将结果聚合为数组。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:00:17.527

要查看的两个函数是 array_agg()，它允许您将元素的聚合作为数组，以及 string_agg，它允许您将这些元素附加到字符串中。

例如：

```
SELECT type, array_agg(size) from mytable group by type; 
```

会显示

```
type | size
-----------------
   0 | {10,10}
   1 | {10}
   2 | {15}
(3 rows) 
```

我不了解 Python 的驱动程序，但它可能会为您将其解析为 Python 结构。

# sockets - 在 select 中给出大于 1024 的套接字描述符值

> ID：12818634
> 
> 赞同：1
> 
> 时间：2012-10-10T11:50:19.217
> 
> 标签：sockets

在执行FD_SET时调用select socket调用之前，如果我们设置一个大于1024(FD_SETSIZE)的描述符值有什么问题吗？它会产生任何未定义的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:56:35.097

您需要检查您正在使用的操作系统的文档`select`，但很可能会。从 Linux 手册页：

> fd_set 是一个固定大小的缓冲区。*执行*FD_CLR() 或 FD_SET() 的 fd 值为负数或等于或*大于 FD_SETSIZE* 将导致**未定义的行为**。此外，POSIX 要求 fd 是有效的文件描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:56:14.503

是的，它会导致错误（perror = `EINVAL`）或导致缓冲区溢出（在分配的缓冲区之外读取）。

许多实现允许`FD_SETSIZE`重新定义为更大的值。在包含 socket.h 之前将其定义为更大的值，你应该没问题。只需确保首先查看 C 编译器的手册即可。

# javascript - jQuery 元素不能在 iframe 上滑动

> ID：12818640
> 
> 赞同：1
> 
> 时间：2012-10-10T11:50:50.053
> 
> 标签：javascript, html, iframe

我正在为我的公司开发一个报告网站。它曾经有谷歌图表，但现在正在使用从 spago 获得的数据的 highcharts。

以前，使用 gogole 图表时，我有一个不错的菜单，当您单击一个按钮时，它会在整个图表上向右滑动。这是通过 z-index 和相对定位完成的，并且工作得很好。然而，现在，新图表显示在一个中`<iframe>`，它很顽皮。

当我单击按钮时，图表会避开滑动菜单并下拉到其下方。z-index 和相对定位似乎无法修复它。我的第一个想法是将 iframe 放在具有这些位置设置的 div 标签内，但这也不起作用。

你们有什么建议或意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:56:13.943

iframe 是可能的最高元素（它实际上不是元素，而是嵌入在窗口中的窗口）。它是唯一可以越过 Flash 对象的元素。

所以; 不，这对于任何 CSS 技巧都是不可能的。您可以通过调整 iframe 的大小并更改 iframe 中 wrapper 元素的左边距以匹配覆盖页面的滑块来伪造效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:03:40.853

只需将新图表（或 iframe）的代码放入 a 中，`div`然后在正文中的所有其他元素之后将其添加到`div`正文的末尾。

然后它将出现在所有元素的顶部。

# ios - iOS 6 Safari阅读器的实现细节

> ID：12818644
> 
> 赞同：0
> 
> 时间：2012-10-10T11:51:03.500
> 
> 标签：ios, css, safari, typesetting

我最近将我的 iPad 升级到 iOS 6，并惊讶地发现 Safari 中的 Reader 插件在排版方面非常完美。现在它的英文和中文对齐都很好，左右两边对齐整齐。我相信在以前的版本中没有这样做。

所以我的问题是有人知道它是如何实施的吗？任何细节或提示将不胜感激，因为我一直在寻找一种排版英文和非英文网页内容的方法。对于英语来说，使用像 text-justify 这样的 CSS 会更容易一些，但对于非英语来说，这很难。

谢谢和问候，约翰尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T15:41:21.370

检查下

```
/Applications/MobileSafari.app/Reader~iphone.html 
```

这是 iOS 7 版本的 Mobile Safari 中使用的路径，但我想它也应该适用于 iOS 6。

相同的文件可通过 SDK 或 iPhone 模拟器获得。

# c# - 类型化数据集和多个事务

> ID：12818648
> 
> 赞同：1
> 
> 时间：2012-10-10T11:51:10.477
> 
> 标签：c#, .net, ado.net

我正在使用类型化数据集 (.xsd) 来访问和更新我的数据库。我有两个表适配器用于更新两个不同表中的记录。

我无法找到在单个事务中执行两个更新的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:58:19.837

您可以使用`TransactionScope`：

```
 using (var ts = new TransactionScope())
            {
                // Perform updates using different table adapters
                using (var ta1 = new tbl1TableAdapter())
                using (var ta2 = new tbl2TableAdapter())
                {
                    ta1.Update(yourDataSet.tbl1);
                    ta2.Update(yourDataSet.tbl2);
                }

                ts.Complete();
                yourDataSet.AcceptChanges();
            } 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)阅读有关`TransactionScope`课程的信息

# javascript - 使用 ObjectId 获取子文档属性的最佳方法是什么？

> ID：12818649
> 
> 赞同：1
> 
> 时间：2012-10-10T11:51:21.347
> 
> 标签：javascript, node.js, mongodb, mongoose

我有 2 个集合：文档和类型。在文档中我有文档：

```
{
    '_id': ObjectId('0000'),
    'name': 'someName',
    'type': ObjectId('1111') // id i have
} 
```

在类型中：

```
{
    '_id': ObjectId('2222'),
    'for': 'Docs',
    'types': [
        {
            '_id': ObjectId('1111'), // type i need
            'name': 'someType' // want to get this name
        }
         // , and so on
    ]
} 
```

在`Docs.findOne({_id: '0000'})`我拥有`type = ObjectId('1111')`（'someType'的id）之后。获取 someType 的名称值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:22:53.383

您可以[`$`](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)在字段选择参数中使用位置运算符`findOne`来仅提取匹配元素：

```
Types.findOne({'types._id': someTypeId}, {'types.$': 1}, function (err, type) {
    if (type) {
        console.log('Type name is: ' + type.types[0].name);
    }
}); 
```

# encoding - SequenceInputStream 的奇怪行为

> ID：12818654
> 
> 赞同：1
> 
> 时间：2012-10-10T11:51:39.400
> 
> 标签：encoding, inputstream, sequence

我试图创建一个 UTF-16 编码文件的 SequenceStream。

```
public class sequenceStream {

public static void main(String[] args) {        
    try {

        File f1 = new File("C:\\Temp\\sequence1.txt");
        File f2=  new File("C:\\Temp\\sequence2.txt");
        File f3=  new File("C:\\Temp\\sequence3.txt");
        InputStream is = getSequencedInputStream(f1,f2,f3);
        BufferedReader br = new BufferedReader(new InputStreamReader(is, "UTF-16"));

        String line;
        int count=0;
        while((line = br.readLine()) !=null){
            count++;
            System.out.println(count + " : " + line);
        }
        br.close();

    } catch (FileNotFoundException e) {
    } catch (IOException e) {

    }

}

private static InputStream getSequencedInputStream(File ... files)  {
    Vector v = new Vector(files.length);
    for (int i=0; i<files.length;i++){
        if(files[i].exists()){
            try {
                v.add(new FileInputStream(files[i]));
            } catch (FileNotFoundException e) {     
            }
        }

    }
    return new SequenceInputStream(v.elements());
} 
```

}

如果我运行这个，我得到这个作为输出：

```
1 : first file, first line
2 : first file, second line?second file, first line
3 : second file, second line?third file, first line
4 : third file, second line 
```

如果我运行它，只有一个文件它工作正常：

```
InputStream is = getSequencedInputStream(f1); 
```

输出：

```
1 : first file, first line
2 : first file, second line 
```

问号从哪里来？我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T17:02:28.617

我怀疑问题在于您的文件的终止。例如，最后一行之后是否有换行符？

# linux - 想要Linux库监控工具

> ID：12818659
> 
> 赞同：0
> 
> 时间：2012-10-10T11:51:59.853
> 
> 标签：linux, shared-libraries, static-libraries

我需要知道哪些应用程序使用该库`xxx.so`。

我知道命令`ldd`。但这不是我要找的。

一个告诉我类似的工具

> app1 和 app2 使用 xxx.so

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:04:51.240

不是应用程序，而是使用文件的[进程。](http://en.wikipedia.org/wiki/Process_%28computing%29)

您可以使用[lsof](http://linux.about.com/library/cmd/blcmdl8_lsof.htm)命令找出哪些进程正在访问或使用某个给定文件。

您可能还对`pmap`命令和[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页（关于`/proc/`文件系统）感兴趣，例如`/proc/1234/maps`pid `/proc/1234/fd/`1234 的进程。

请注意，静态库并没有真正使用，而是在可执行文件中链接（即“混合”）（在构建时）。

您可能还对包依赖项感兴趣。详细信息因您的 Linux 发行版而异（例如`.deb`基于或`.rpm`基于软件包）。

# import - CRM Dynamics 2011 导入：无数据

> ID：12818660
> 
> 赞同：0
> 
> 时间：2012-10-10T11:52:01.617
> 
> 标签：import, dynamics-crm, dynamics-crm-2011, crm, no-data

我尝试将数据从在线 CRM 试用环境迁移到 2011 版的本地 CRM 安装。我首先迁移了解决方案。现在我想迁移我的自定义实体的数据。在导出中，我包含列标题以方便导入到本地 CRM 实例中。我尝试通过导入向导来做到这一点。一切正常：在系统任务概述中，我可以看到文件内容被解析、转换和导入，但实际上没有导入数据，尽管导入 xml 文件包含数据。任何想法如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:06:50.497

当您从列表中打开导入的 crm 文件时，“完全导入”实体列表中是否有任何记录？我想，像你一样难过导入具有“已完成”状态。如果此处有记录，请尝试更改实体列表的视图。（所有的东西）

![在此处输入图像描述](../Images/0e0a45c901c7d6e365caa0dec4bc1c91.png)

编辑：

试试[本教程](http://crmbusiness.wordpress.com/2011/03/24/crm-2011-importingexporting-data-between-organisations/)导出/导入 crm 数据。注意这个注释：

> 不要选中使此数据可用于重新导入复选框，因为此功能旨在导出和更新同一组织中的数据，而不是用于跨组织数据迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:31:16.467

您要导入什么类型的文件？

根据我使用 excel 中可用的 2003 xml 工作簿格式的经验，效果最好。

如果你得到更好的结果，请告诉我。还要确保你只有一张工作表！！

# c++ - 函数调用在 C++ 中有可察觉的开销吗？

> ID：12818665
> 
> 赞同：0
> 
> 时间：2012-10-10T11:52:25.657
> 
> 标签：c++, performance, function-call

在我的项目中，我有一个以执行时间为首要目标的课程。对于它我不太关心维护，订单等。至少我直到昨天才在意……现在我也不得不有点担心了。

我有一个类，比如 A，它对来自相机的图像执行多次扫描，即可变宽度窗口实时扫描它们。

```
 class A{  
    // methods and attributes of A:  
    ...  
    void runiterator(){  
      ...  
    for{    // change window’s dimension  
      for{  // rows  
       for{ // columns  
          // many lines of code of operations to be executed for each window at each position  
          ...      
       }  
      }   
     }  
    }  
    }; 
```

性能显示已经有一点延迟，但我可以跳过图像的有限区域来解决它。此外，我还有第二个函数，比如 B，它具有与 A 完全相同的方案，并且在每次扫描时执行不同的操作（幸运的是比 A 快得多）。

好吧，现在是时候加入所有操作以显着受益于整体结果。只是代码真的会变得混乱，庞大并且混合了真正不同的东西。我想定义一个执行迭代的类 X，并在每次扫描时执行对 A_new 中的一个函数和 B_new 中的一个函数的函数调用。但我担心每个图像大约 200000x2 的函数调用会导致性能损失。

你有什么建议？

编辑
对于只调用 Anew 的 X 类（所以它只能与现在的 A 进行比较），平均而言，我得到了多次重复：

在一系列 56 个图像上执行 X 的
时间 = 6.15 s 在同一系列 56 个图像上执行 A 的时间 = 5.98 s

看来我的嫌疑人并没有那么天真。
差价大约是3%，不算多，但还是对损失感到抱歉。

X 的 __forceinline 时间也是 5.98 秒，但我不想依赖它。

我认为代码已经过优化，进一步改进的余地很小。
事实上，它在相对较短的时间内对图像做了很多事情。
在 A 类中顺序处理数据是不可能的，因为它基于来自无法预测的图像的值。这就是为什么 B 级（设法做到这一点）要快得多的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:57:13.477

在担心它之前，您确实必须衡量它是否会导致性能问题。

如果有*问题*，请尝试使用模板来解决。编写函数的两个变体，然后将它们用作执行迭代的函数模板中的函子。您将实例化这两个版本，并调用适当的版本。编译器应该内联调用（但更好地验证这一点）。

我将它用于医学图像处理，它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:11:57.197

函数调用开销很大程度上取决于您调用的函数类型。在汇编程序级别（假设没有偷偷摸摸的操作系统页面错误处理）`call address`现代英特尔处理器上的指令需要 0 个周期（指令也是如此`jmp address`）。如果函数地址是从某个数据源计算的，例如 vtbl 查找、对外部 DLL 的调用（如果您使用的是 Win32）或涉及条件，则会引入开销。这些涉及访问内存和污染缓存。这把我们带到了大事上。

大多数性能都在等待数据到达 CPU 时损失。CPU 的速度远远大于从 RAM 中读取数据的速度。这就是为什么有多个缓存级别的原因，每个级别通常比前一个级别更大且更慢。一个函数调用的成本，即使是一个复杂的调用，也比在读取数据时丢失缓存所损失的时间要少。

这类事情属于标题：微优化。

通常，避免随机数据访问，按顺序处理数据，即执行第 n 项，然后执行 n+1、n+2 等而不是 n、n+100、n+200 等，n+1、n+101、n +201 等

此外，让编译器有机会内联函数 - 如果结果产生更快的代码，则内联将完成（并且编译器非常清楚何时这样做是有益的）。

Also note that big functions can be slower than lots of small functions (it's to do with the buffer of uops the CPU caches locally). Iterating over the data several times might be quicker than doing everything in one go. Only profiling the code will tell you which one is quicker.

Finally, a better algorithm is usually the way to better performance. Is your algorithm optimal?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:58:44.703

您必须测量效果，因为很难判断编译器真正产生了什么——尤其是在`O3`. 当然，如果函数没有被编译器内联，函数调用就会产生开销。`inline`如果可以内联函数，请尝试向编译器提供提示。

# jquery - 尝试在 Magento 中使用 jQuery 进行悬停下拉

> ID：12818668
> 
> 赞同：0
> 
> 时间：2012-10-10T11:52:53.960
> 
> 标签：jquery, magento, drop-down-menu, hover

我正在尝试在 Magento 的导航栏上创建一个下拉菜单。正如您将在我的代码中看到的，当我将鼠标悬停在其中一个列表项上时，所有下拉菜单都会折叠。但是我不知道如何在不为每个 li 制作悬停功能的情况下只显示正确的内容，这似乎是一种无效的方式来达到我的目标。

所以我希望你们能帮助我:)

这是我到目前为止所拥有的：

HTML：

```
<div class="navigation-bar">
<ul class="mainLevel">
    <li class="navLink mainCategory1"><a href="http://fabriqmagento.development.cream.nl/new-in.html" class="level-top"><span>New in</span></a></li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory2"><a href="http://fabriqmagento.development.cream.nl/merken.html" class="level-top"><span>Merken</span></a>
        <ul class="level0">
            <li class="navLink mainCategory1"><a href="http://fabriqmagento.development.cream.nl/merken/diesel.html"><span>Diesel</span></a></li>
            <li class="listSeperator"></li>
            <li class="navLink mainCategory2"><a href="http://fabriqmagento.development.cream.nl/merken/becksondergaard.html"><span>Becksondergaard</span></a></li>
            <li class="listSeperator"></li>
        </ul>
    </li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory3"><a href="http://fabriqmagento.development.cream.nl/categorie.html" class="level-top"><span>Categorie</span></a></li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory4"><a href="http://fabriqmagento.development.cream.nl/tassen.html" class="level-top"><span>Tassen</span></a></li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory5"><a href="http://fabriqmagento.development.cream.nl/accessoires.html" class="level-top"><span>Accessoires</span></a></li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory6"><a href="http://fabriqmagento.development.cream.nl/jeans.html" class="level-top"><span>Jeans</span></a></li>
    <li class="listSeperator">|</li>
    <li class="navLink mainCategory7"><a href="http://fabriqmagento.development.cream.nl/outlet.html" class="level-top"><span>Outlet</span></a></li>
    <li class="listSeperator">|</li>
</ul>
</div> 
```

CSS：

```
ul.level0{ display:none;} 
```

jQuery：

```
(function(window, $, undefined) {

    jQuery(function(){
        $('li.navLink').hover(function(){
            $('ul.level0').show();
        }, function(){
            $('ul.level0').hide();
        })
    });

})(window, jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:58:34.503

您只需要对脚本进行一些更改...

[http://jsfiddle.net/8846T/](http://jsfiddle.net/8846T/)

```
(function($) {

    jQuery(function(){
        $('li.navLink').hover(function(){
            $('ul.level0').hide();
            $(this).find('ul.level0').show();
        }, function(){
            $('ul.level0').hide();
        })
    });

})(jQuery); 
```

我让它在悬停时隐藏所有 level0 ul 元素，然后显示悬停 li 的子 level0 ul 元素。

我还从您的函数调用中删除了一些代码，因为它不需要:)

# mysql - Mysql UUID_SHORT() 是否与 UUID() 可比

> ID：12818671
> 
> 赞同：9
> 
> 时间：2012-10-10T11:52:56.400
> 
> 标签：mysql, sql, database, guid, uuid

一个快速的问题或意见，如果你愿意的话。

我需要为数据库表生成一些 UUID。

自动递增密钥不会削减它，因为我需要密钥在数据库和系统中也是唯一的。UUID 可以正常工作，但是对于将要导出行的某些系统来说，它的输出太长了。UUID_SHORT() 做得很好，我已经阅读了 MYSQL 关于保证其唯一性的条件。

但我只是想仔细检查一下，如果我不时使用 UUID_SHORT() 为行生成 UUID，它们在时间和空间上确实会像 UUID() 一样在时间和空间上是唯一的。

干杯。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-08T20:42:18.800

`uuid_short()`生成服务器 ID、相当静态的时间分量和顺序增加的 24 位整数的按位聚合。这些位被填充到一个 8 字节整数中。时间组件基于服务器的启动时间。

`uuid()`生成表示 16 字节版本 1 UUID 的十六进制字符串。版本 1 UUID 是服务器 ID、当前时间戳、在超速生成 ID 时发挥作用的几个字节以及一些实用程序位的按位组合。

回答您的问题：是否`uuid_short`提供了可与竞争对手媲美的时间和空间独特性`uuid`？答案是不。例如，a 中的服务器 ID`uuid_short`只有一个字节。因此，如果您有 256 台或更多服务器，则其中至少有一些将具有相同的节点 ID，这意味着您将失去空间唯一性。作为比较，版本 1 UUID 中的服务器 ID 为 6 个字节长，有效地消除了除了最大的企业服务器场之外的所有服务器场重复的机会 :)

一个更好的问题是是否`uuid_short`足够好。如果您执行以下操作，您可能会看到 ID 冲突：

1.  在短时间内从同一台服务器生成超过 1600 万个 IDS。***
2.  以完全相同的服务器 ID 启动所有服务器，并在它们之间共享数据。
3.  摆弄系统时钟，然后重新启动服务器。

对于大多数人来说，第二个问题似乎不太可能，但第一个问题值得在您承诺制作`uuid_short`密钥的基础之前进行调查。

*** 根据 mysql 文档`uuid_short`，如果您在单个服务器正常运行期间生成超过 1600 万个 ID，您似乎会看到冲突。但那将是愚蠢的。mysql 文档继续说，只要您不每秒生成 1600 万个 ID，您就可以了。这意味着如果您用尽 1600 万个顺序 ID，它们必须碰撞时间戳中的一些位。我没有测试过这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T13:21:16.290

你的关键问题是，确实`UUID_SHORT()`创造了在时间和空间上独一无二的价值`UUID()`。简短的回答是肯定的，只要你遵守 MySQL 要求的特殊条件。

长答案是肯定的，但你为什么要使用它？唯一明显的缺点`UUID()`是它的表示存储效率较低（生成 36 个字符的字符串而不是 64 位整数），并且不能用于基于语句的复制。但是`UUID()`有一个很大的好处，那就是永远不必考虑 MySQL 需要的特殊条件`UUID_SHORT()`。如果您确定条件对您来说永远不会成为问题，并且您渴望保存每条记录的所有 224 位，`UUID_SHORT()`则可以使用。但是，如果您对特殊情况有任何疑虑，那么最好避免它。

您对特殊条件的关注程度在很大程度上取决于您的操作环境。在重新启动之间永远不要向后设置系统时钟的要求`mysqld`对我来说是一个大问题。服务器通常配置为使其时钟与其他时间源自动同步（例如`ntp`，在 unix 中，Windows 中的时间服务），如果此行为未达到您的预期，那么您可能无法保证该条件得到一致的满足。

* * *

# java - 启动调试器的 Java 关键字？

> ID：12818673
> 
> 赞同：1
> 
> 时间：2012-10-10T11:52:57.860
> 
> 标签：java, eclipse, debugging

我很好奇Java中是否有一个关键字可以让eclipse或IDE停止运行代码并在代码到达特定点时启动调试器。

我知道断点对于这个特定问题非常有用，但是我希望只在达到特定条件时才开始调试程序，而这个条件是程序不定期检查的条件，所以我必须编程它纯粹用于调试。

例如，

```
if(condition_is_met){
    //throw debugger and begin to step through here
} 
```

我能想到的唯一其他方法是......

```
if(condition_is_met){
    System.out.println("Something"); //Then set a breakpoint here in Eclipse.
} 
```

这看起来很混乱，这意味着我以后清理代码时可能会错过它。Java 是否有一个关键字，可能类似于 Javascript 的`debugger`关键字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:58:12.850

它没有关键字，但您可以在 Eclipse 中指定条件调试。

检查下面

1.  [FAQ 如何设置条件断点？](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F)
2.  [有效调试：条件断点](http://eclipse.dzone.com/tips/effective-debugging)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T12:03:27.717

创建一个实用程序类：

```
public final class DebugHelper {
    public final static void breakpoint() {} // Set break point here
} 
```

然后，您可以`DebugHelper.breakpoint()`在您希望 Eclipse 停止的所有地方使用。

在运行时，该方法最终会被 JIT 替换为空（当调试被禁用时），因此对于经常使用的代码是免费的。

这种方法有两个优点：

1.  保留此代码并没有什么坏处
2.  如果要删除，很容易找到（只需在工作区中搜索该方法的所有引用即可）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T11:56:47.247

Java 中没有这样的关键字可以启动 eclipse 调试器。请记住，Java 不适合 Eclipse，但它正好相反。如果你想要这样的东西，在eclipse中使用条件断点，你可以通过eclipse的断点属性窗口设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:59:15.050

Eclipse 有条件断点：使用编辑器左边距或 Debug 透视图的 Breakpoints 视图中断点上的上下文菜单，并选择断点的属性。在对话框中勾选Enable Condition，输入任意Java条件，如list.size()==0

（来自：[http](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F) ://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F ）

# java - 从java代码运行shell脚本：语法错误：“（”意外

> ID：12818674
> 
> 赞同：0
> 
> 时间：2012-10-10T11:52:57.793
> 
> 标签：java, shell, unix

我正在尝试从 Java 代码运行 shell 脚本。

外壳脚本：

```
 function print() {
            echo "First Script"
        }
        print
        echo "Hello" 
```

Java 代码：

```
 final String cmd = "sh test.sh";
        final Process p = Runtime.getRuntime().exec(cmd);
        InputStream is = p.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        String line;
        while ((line = br.readLine()) != null) {
          System.out.println(line);
        }

        is = p.getErrorStream();
        isr = new InputStreamReader(is);
        br = new BufferedReader(isr);
        while ((line = br.readLine()) != null) {
          System.out.println(line);
        } 
```

但是当我运行上面的代码时，我得到了这个错误`test.sh: 1: Syntax error: "(" unexpected`。

当我在命令行中尝试时，相同的代码工作正常并且我能够看到输出。我也尝试`dos2unix`并运行了 java 代码，但仍然没有运气。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:55:05.633

如果您使用`bash`它运行它，它将起作用。

我会（也）用`#!/bin/bash`. 这样脚本本身就决定了它将使用哪个 shell，而不是依赖于调用它的人。如下所述，您仍然可以使用任何脚本进程调用脚本，但*shebang*将突出显示正在使用的脚本语言/方言。

还要注意[从 Java 调用进程和收集 stdout/sterr 的问题](https://stackoverflow.com/a/882795/12960)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:57:04.347

最有可能的是，在您的系统`/bin/sh`上是与 POSIX 兼容的 shell 而不是 Bash（在 Ubuntu 和 Debian 以及大多数商业 Unices 上就是这种情况）。在[POSIX shells](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_09_05)中，不要使用`function`关键字：

```
print() {
    echo "First Script"
}
print
echo "Hello" 
```

应该管用。（而且这种形式也适用于 Bash。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-10T14:52:34.527

验证您的 Java 版本是否与您的操作系统匹配。您的操作系统可能是 32b，而 Java 可能是 64 版本。

# c# - 如何引用包含数组的类之外的数组元素？

> ID：12818677
> 
> 赞同：2
> 
> 时间：2012-10-10T11:53:06.440
> 
> 标签：c#, reference

我在一个类中有一组类（体素）。我使用以下方法在数组中添加和删除。备忘录模式用于存储每个方法的操作，以便可以在任何时候撤消/重做。

```
 public void AddVoxel(int x, int y, int z)
    {
        int index = z * width * height + y * width + x;

        frames[currentFrame].Voxels[index] = new Voxel();

        // Undo/Redo history
        undoRedoHistories[currentFrame].Do(new AddMemento(index));
    }

    public void RemoveVoxel(int x, int y, int z)
    {
        int index = z * width * height + y * width + x;

        // Undo/Redo history
        undoRedoHistories[currentFrame].Do(new RemoveMemento(index, frames[currentFrame].Voxels[index]));

        frames[currentFrame].Voxels[index] = null;      // Does not update 'voxelSelected' reference
    } 
```

在一个单独的类中，我希望引用上述类所持有的体素数组中的特定体素。

```
private Voxel voxelSelected = null; 
```

作为引用类型，我希望这个值能够自动知道它“指向”的数组部分何时包含体素或为空。这在使用撤消命令时很重要，因为体素可以从数组中删除并变为空，反之亦然。

要从数组中获取体素，我使用以下方法。

```
public Voxel GetVoxel(int x, int y, int z)
{
    return frames[currentFrame].Voxels[z * width * height + y * width + x];
} 
```

然后我如下设置对体素的引用。

```
public void SetVoxelSelected(ref Voxel voxel)
{
    voxelSelected = voxel;
}

    voxelMeshEditor.AddVoxel(0, 0, 0);

    var voxel = voxelMeshEditor.GetVoxel(0, 0, 0);  // Copies rather than references?

    SetVoxelSelected(ref voxel);

    Console.WriteLine(voxelSelected == null); // False

    voxelMeshEditor.RemoveVoxel(0, 0, 0);

    Console.WriteLine(voxelSelected == null); // False (Incorrect intended behaviour) 
```

如何正确引用数组中的体素，以便在数组更新时 voxelSelected 值自动更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:09:51.133

> 如何正确引用数组中的体素，以便在数组更新时 voxelSelected 值自动更新。

不要存储 a `Voxel`，而是存储获取体素所需的坐标。

代替

```
Voxel voxelSelected;
public void SetVoxelSelected(ref Voxel voxel) { voxelSelected = voxel; } 
```

有

```
int selectedX, selectedY, selectedZ
public void SetVoxelSelected (int x, int y, int z) { selectedX = x; ... }
public Voxel GetVoxelSelected() { return voxelMeshEditor.GetVoxel(x, y, z) } 
```

给予

```
SetVoxelSelected(0, 0, 0);                     //Set selected
Console.WriteLine(GetVoxelSelected() == null); // False, CORRECT !
voxelMeshEditor.RemoveVoxel(0, 0, 0);          //REMOVE
Console.WriteLine(GetVoxelSelected() == null); // True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:24:12.120

您可以尝试使用以下包装器：

```
public class VoxelReference
{
    private readonly Voxel[] m_array;
    private readonly int m_index;

    public Voxel Target
    {
        get { return m_array[m_index]; }
    }

    public VoxelReference(Voxel[] array, int index)
    {
        m_array = array;
        m_index = index;
    }

    public static explicit operator Voxel(VoxelReference reference)
    {
        return reference.Target;
    }
} 
```

并在各处传递 VoxelReference 的实例而不是 Voxel。然后您可以通过以下方式使用它：`((Voxel)voxelReference)`或`voxelReference.Target`

当然，您可能希望将上述类更改为 T 的通用类。或者存储坐标而不是索引。

```
public class ArrayElementReference<T>
{
    private readonly T[] m_array;
    private readonly int m_index;

    public T Target
    {
        get { return m_array[m_index]; }
    }

    public ArrayElementReference(T[] array, int index)
    {
        m_array = array;
        m_index = index;
    }

    public static explicit operator T(ArrayElementReference<T> reference)
    {
        return reference.Target;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:57:08.797

**If** `Voxel`是一个`reference`类型，你已经有一个对它的直接*引用*，以你在提供的代码中呈现的方式进行。

应该注意，这`Undo/Redo`很容易实现`value types`，具有一些`Lightweight`仅包含适合它们的属性`Undo/Redo`和分配给它们的值的结构。

在这种情况下，具有不变性会使事情变得容易得多。

但是，自然地，我不知道在您的具体情况下这是否是一个方便的选择。

在您的示例中：

```
var voxel = voxelMeshEditor.GetVoxel(0, 0, 0);  // Copy REFERENCE, and NOT value

SetVoxelSelected(ref voxel);   //Set selctede vortex reference

Console.WriteLine(voxelSelected == null); // False, CORRECT !

voxelMeshEditor.RemoveVoxel(0, 0, 0); //REMOVE

Console.WriteLine(voxelSelected == null); 
/* Selected vortex still pointing to the memroy location it was pointing before. 
   The fact is that memory location is not more in array, doesn't matter. 
   So CORRECT ! */ 
```

# java - 基于 Java 的配置和扫描

> ID：12818679
> 
> 赞同：5
> 
> 时间：2012-10-10T11:53:15.827
> 
> 标签：java, spring, configuration

在我的 xml 配置文件中，我可以编写

```
 <context:component-scan base-package="com.my.stuff"/> 
```

现在我继续基于 java 的配置。如果没有那里，我怎么能在我`@Configuration`的基础课程中做到这一点`ApplicationContext`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T11:54:44.600

您可以在配置类中使用[@ComponentScan](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/ComponentScan.html)注释。

例子 ：

```
@Configuration
@ComponentScan("com.acme.app.services")
 public class AppConfig {
     @Bean
     public MyBean myBean() {
         // instantiate, configure and return bean ...
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T12:03:04.207

如果 spring < 3.1，您可以在 @Configuration 类的 @PostConstruct 方法中使用[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathBeanDefinitionScanner.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathBeanDefinitionScanner.html)。当然，您需要将 ApplicationContext 自动装配到您的 @Configuration 中。

# iphone - 根据选择的段从单个视图调用 2 个视图

> ID：12818689
> 
> 赞同：0
> 
> 时间：2012-10-10T11:53:52.430
> 
> 标签：iphone, objective-c, uitableview

对我来说有点困惑，但我确信我犯了一个很小的错误。请指导我正确的方向。情况是这样的。

我有一个有 2 个段的 OneViewController。Segment1 的代码已经在 OneViewController 中编写（不是 tableviewController，但我想显示一个 tableView，因此手动为其编写代码），因为默认情况下选择了 Segment1。当我单击段 2 时，我必须显示另一个 tableViewController（为此我创建了一个名为 TwoTableViewController 的类）。而且我希望两个 tableViews 都应该出现在同一个视图中（不推送新视图）。**最重要的是分段控件不应该消失。**

我还附上了代码的相关部分。我知道我以前也问过类似的问题，但这真的很混乱，所以我想重新开始。希望我被原谅！:)

这是代码：

```
 -(void)viewDidLoad
{
  //has the elements I want to display when I click on segment 1\. since it is already selected , I have written it here
}
    -(IBAction) segmentedControlChanged
    {
         switch(segmentedControl.selectedSegmnentIndex)
         {
            case 0:
             //default first index selected. 
             [tableView setHidden:NO];
             if(self.view viewWithTag==9999]{
              [[self.view viewWithTag:9999]removeFromSuperView]; 
                  }
              break;

             case 1:
             NewTableViewController *controller=[[NewTableViewController alloc] initWithNibName:@"NewTableViewController" bundle:nil];
             [controller.view setTag:9999];         
             break;
             default:
             break;
         }
    } 
```

NewTableViewController 具有单独的方法，并且数据源和委托在 IB 中设置为 TableView。我要做的就是在单击 Segment2 时调用这个 NewTableViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:38:17.523

```
//view1,view2 are uiviews not a view controllers-(IBAction) segmentedControlChanged

-(void)segcontrol
{
    if(segments.selectedSegmentIndex==0)
    {
      self.view=view1;

    }
    else 
    {
        self.view=view2;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:25:48.357

`Case 1:`在您的中添加以下代码`-(IBAction) segmentedControlChanged`

```
[self.view addSubview:self.YourTableView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:07:20.023

最好在同一类中填充和编写 UITableViews 的代码（在**OneViewController**中）

您可以通过以下方式识别当前的tableView

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

     int numberOfSections = 0;

     if(tableView == yourTableViewOne){

           numberOfSections =  5;
       }

     else if (tableView == yourTableViewTwo){

          numberOfSections = return 3;
     }

  return numberOfSections;
} 
```

在所有其他 UITableView 委托中使用相同的检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:17:20.847

您可以通过将第二个视图控制器推送到导航控制器上或通过模态呈现或使用标签栏控制器而不是分段控制来显示第二个视图控制器。

我的建议是

声明一个继承 UIViewController 的类。在底部添加一个segmentedControl，在其上方添加一个uitableview。

每当用户单击一个段时，使用相应的数据重新加载 tableview。这样可以节省内存。而且您无需承担删除/添加/隐藏视图的痛苦..

# php - 使用 Composer 的自动加载

> ID：12818690
> 
> 赞同：70
> 
> 时间：2012-10-10T11:53:55.380
> 
> 标签：php, autoload, composer-php

我一直在网上四处寻找，但在这个问题上没有运气。我在我的以下代码中使用了作曲家的自动加载`composer.json`：

```
"autoload": {
    "psr-0": {"AppName": "src/"}
} 
```

但我需要在比供应商文件夹更高的级别上自动加载。

做这样的事情是行不通的：

```
"autoload": {
    "psr-0": {"AppName": "../src/"}
} 
```

有谁知道修复或我该怎么做？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-10T12:13:43.950

每个包都应该负责自动加载自己，你想用你定义的包之外的自动加载类来实现什么？

如果它适用于您的应用程序本身，一种解决方法是将命名空间添加到加载器实例，如下所示：

```
<?php

$loader = require 'vendor/autoload.php';
$loader->add('AppName', __DIR__.'/../src/'); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-12T09:18:36.007

[作曲家文档](http://getcomposer.org/doc/01-basic-usage.md#autoloading)指出：

> 添加 autoload 字段后，您必须重新运行 install 以重新生成 vendor/autoload.php 文件。

假设您的“src”目录与“vendor”目录位于同一级别：

*   源代码
    *   应用名称
*   小贩
*   作曲家.json

以下配置绝对正确：

```
{
    "autoload": {
        "psr-0": {"AppName": "src/"}
    }
} 
```

但是您必须重新更新/安装依赖项以使其适合您，即运行：

```
php composer.phar update 
```

此命令将获取最新版本的依赖项并更新文件“vendor/composer/autoload_namespaces.php”以匹配您的配置。

同样正如@Dom 所指出的，您可以使用`composer dump-autoload`更新自动加载器而无需进行更新。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-09-21T14:15:06.243

还有其他使用作曲家自动加载功能的方法。加载没有命名空间的包或带有自定义自动加载功能的包的有用方法。

例如，如果您想包含一个包含自动加载功能的单个文件，您可以使用“files”指令，如下所示：

```
"autoload": {
    "psr-0": {
        "": "src/",
        "SymfonyStandard": "app/"
    },
    "files": ["vendor/wordnik/wordnik-php/wordnik/Swagger.php"]
}, 
```

在`Swagger.php`我们得到的文件中：

```
function swagger_autoloader($className) {
    $currentDir = dirname(__FILE__);
    if (file_exists($currentDir . '/' . $className . '.php')) {
        include $currentDir . '/' . $className . '.php';
    } elseif (file_exists($currentDir . '/models/' . $className . '.php')) {
        include $currentDir . '/models/' . $className . '.php';
    }
}
spl_autoload_register('swagger_autoloader'); 
```

[https://getcomposer.org/doc/04-schema.md#files](https://getcomposer.org/doc/04-schema.md#files)

否则，您可能需要使用类映射参考：

```
{
    "autoload": {
        "classmap": ["src/", "lib/", "Something.php"]
    }
} 
```

[https://getcomposer.org/doc/04-schema.md#classmap](https://getcomposer.org/doc/04-schema.md#classmap)

**注意：**在您的测试期间，请记住启动 composer`dump-autoload`命令，否则您将看不到任何更改！

```
./composer.phar dump-autoload 
```

快乐的自动加载 =)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-06-16T10:25:56.533

在我看来，[Sergiy 的](https://stackoverflow.com/a/15357306/2273611)答案应该是给定问题的选定答案。我分享我的理解。

我正在寻找使用我在下面给出的目录结构下的作曲家自动加载我的包文件。

```
<web-root>
    |--------src/
    |           |--------App/
    |           |
    |           |--------Test/
    |
    |---------library/
    |
    |---------vendor/
    |           |
    |           |---------composer/
    |           |           |---------autoload_psr4.php
    |           |           
    |           |----------autoload.php
    |
    |-----------composer.json
    | 
```

我正在使用[psr-4](http://www.php-fig.org/psr/psr-4/)自动加载规范。

必须在项目的 composer.json 中添加以下行。我打算将我的类文件放在 src/App 、 src/Test 和库目录中。

```
"autoload": {
        "psr-4": {
            "OrgName\\AppType\\AppName\\": ["src/App", "src/Test", "library/"]
        }
    } 
```

这几乎是自我解释。*OrgName\AppType\AppName*是我想要的命名空间前缀。例如对于***src/App/Controller/Provider/User.php***中的类用户-

```
namespace OrgName\AppType\AppName\Controller\Provider; // namespace declaration

use OrgName\AppType\AppName\Controller\Provider\User; // when using the class 
```

另请注意“src/App”、“src/Test”.. 来自您的 web-root，即您的 composer.json 所在的位置。与供应商目录无关。看看 vendor/autoload.php

现在，如果 composer 安装正确，只需要 **#composer update**

在作曲家更新我的类后成功加载。我观察到的是 composer 在 vendor/composer/autoload_psr4.php 中添加了一行

```
$vendorDir = dirname(dirname(__FILE__));
$baseDir = dirname($vendorDir);

return array(
    'Monolog\\' => array($vendorDir . '/monolog/monolog/src/Monolog'),
    'OrgName\\AppType\\AppName\\' => array($baseDir . '/src/App', $baseDir . '/src/Test', $baseDir . '/library'),
); 
```

这就是作曲家的映射方式。对于 psr-0 映射在 vendor/composer/autoload_classmap.php

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-10T12:12:45.310

只需在您的 src 文件夹中为指向包含您的类的文件夹的命名空间创建一个符号链接...

```
ln -s ../src/AppName ./src/AppName 
```

您在作曲家中的自动加载看起来是一样的......

```
"autoload": {
    "psr-0": {"AppName": "src/"}
} 
```

现在，您的 AppName 命名空间类将从您当前工作目录的文件夹中启动一个目录`src`......这应该可以工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-10T12:15:55.373

自动加载配置确实在供应商目录下启动。所以你可能想改变供应商目录，例如

```
{
    "config": {
        "vendor-dir": "../vendor/"
    },
    "autoload": {
        "psr-0": {"AppName": "src/"}
    }
} 
```

或者这在你的项目中是不可能的？

# javascript - Spotify App：如何访问网络摄像头？

> ID：12818691
> 
> 赞同：0
> 
> 时间：2012-10-10T11:53:54.483
> 
> 标签：javascript, html, spotify

我试图通过 js/html (getUserMedia) 访问网络摄像头。该应用程序在我的 apache 机器上运行，但不是作为 spotify 应用程序中的静态文件。

**有任何想法吗？**

```
function start()
{
    if ((typeof window === 'undefined') || (typeof navigator === 'undefined')) log('This page needs a Web browser with the objects window.* and navigator.*!');
    else if (!(video && canvas)) log('HTML context error!');
    else
    {
        log('Get user media…');
        if (navigator.getUserMedia) navigator.getUserMedia({video:true}, gotStream, noStream);
        else if (navigator.oGetUserMedia) navigator.oGetUserMedia({video:true}, gotStream, noStream);
        else if (navigator.mozGetUserMedia) navigator.mozGetUserMedia({video:true}, gotStream, noStream);
        else if (navigator.webkitGetUserMedia) navigator.webkitGetUserMedia({video:true}, gotStream, noStream);
        else if (navigator.msGetUserMedia) navigator.msGetUserMedia({video:true, audio:false}, gotStream, noStream);
        else log('getUserMedia() not available from your Web browser!');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:02:13.510

不幸的是，目前 Spotify 应用程序环境不支持此功能。

# opencart - OpenCart 分类产品视图修改

> ID：12818695
> 
> 赞同：2
> 
> 时间：2012-10-10T11:54:31.247
> 
> 标签：opencart

如何将 Opencart 中的类别产品列表视图更改为 6 个产品框滑块？

通过按下下一个按钮，我可以转到接下来的六个项目，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:57:40.197

您需要的解决方法是*[Combining Carousel 和 Latest Module](http://www.opencartnews.com/tutorials/combining-carousel-and-latest-module/)*。我不知道您是否在寻找付费解决方案，但似乎像其中一个这样的模块可以解决问题：

*   *[奥卡特产品轮播](http://opencartart.com/ocart-product-carousel)*

*   *[3D 轮播选择器列表](http://opencartmarket.com/featured-categories-wall-3d-carousel-selector-list.html)*

（PS：我不是任何模块或与它们相关的作者。）

# php - MYSQL 中的 PHP 变量使用 PDO 选择

> ID：12818696
> 
> 赞同：1
> 
> 时间：2012-10-10T11:54:30.237
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [在 MySQL 中查找重复记录](https://stackoverflow.com/questions/854128/find-duplicate-records-in-mysql)

我是一个新手，试图使用此功能在数据库中查找重复项：

```
function uni($field, $value) {
        $sql= "SELECT * FROM user WHERE ".$field." = '".$value."'";
        $result = $pdo->query($sql);
        $rows = $result->fetchAll(PDO::FETCH_COLUMN, 1);
        return count($rows);
    }

$username = $_POST['username']; 
$result = uni("username", $username); 
```

......我正要用头撞到坚固的东西。由于某种原因，查询不会返回结果，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:12:38.780

好的，所以你正在使用`PDO`，很好。但是，您的代码段仍然容易受到注入攻击：您仍在将原始用户输入传递给查询。`SELECT *`此外，如果您想要的只是找到的行数，请不要使用，并且*不要获取完整的结果集*来计算它们！

```
function uni($field,$value)
{
    $db = new PDO();//make connection, which you don't seem to do
    //or (not so good approach):
    //global $db;
    //Best approach would be to pass the connection to the function, as an extra argument, though
    $stmt = $db->prepare('SELECT '.$field.' FROM user WHERE '.$field.' = :value');
    if ($stmt->execute(array(':value' => $value)))
    {
        return $stmt->rowCount();
    }
    //query failed, throw errors or something
} 
```

阅读[文档](http://www.php.net/manual/en/pdostatement.execute.php)以获取更多示例。
无论如何，您的代码应该如下所示：

```
function uni($field,$value,$db)
{
    $stmt = $db->prepare('SELECT '.$field.' FROM user WHERE '.$field.' = :value');
    if ($stmt->execute(array(':value' => $value)))
    {
        return $stmt->rowCount();
    }
    return false;
}
$username = $_POST['username']; 
$result = uni('username', $username,$pdo);//<--pass connection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:03:58.633

`$pdo`您在函数内使用对对象的引用，但`$pdo`未定义该对象。

```
function uni($field, $value) {
  $sql= "SELECT * FROM user WHERE ".$field." = '".$value."'";
  $result = $pdo->query($sql);
//          ^^ undefined object

  $rows = $result->fetchAll(PDO::FETCH_COLUMN, 1);
  return count($rows);
} 
```

要么将 $pdo 传递给您的函数，要么将其设为全局。

打开错误报告，这样您就可以看到代码中的错误在哪里。

# ruby-on-rails - 如何使用papercrop gem将纵横比设置为不受限制的比例？

> ID：12818703
> 
> 赞同：0
> 
> 时间：2012-10-10T11:54:45.320
> 
> 标签：ruby-on-rails, ruby, paperclip, jcrop

我只想使纵横比不受限制，以便用户可以选择上传照片所需的任何尺寸。默认值为 1:1。所以我怎样才能将它设置为就像这个 [演示一样](http://deepliquid.com/projects/Jcrop/demos.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:14:50.230

默认情况下，裁剪区域和预览框将具有`aspect ratio of 1:1`. 您可以通过传递一个新方面来修改它。

crop_attached_file :snapshot, :aspect => "16:9"

在下面的链接中有 Papercrop 的文档。

[http://rubydoc.info/gems/papercrop/0.0.5/frames](http://rubydoc.info/gems/papercrop/0.0.5/frames)

在您的查看页面上，只需将 Jquery 设置为

```
$(function() {
  $('#cropbox').Jcrop({
    onChange: update_crop,
    onSelect: update_crop,
    setSelect: [0, 0, 500, 500],
    aspectRatio: 1
  });
});

function update_crop(coords) {
  var rx = 100/coords.w;
  var ry = 100/coords.h;
  $('#preview').css({
    width: Math.round(rx * <%= @user.avatar_geometry(:large).width %>) + 'px',
    height: Math.round(ry * <%= @user.avatar_geometry(:large).height %>) + 'px',
    marginLeft: '-' + Math.round(rx * coords.x) + 'px',
    marginTop: '-' + Math.round(ry * coords.y) + 'px'
  });
  var ratio = <%= @user.avatar_geometry(:original).width %> / <%= @user.avatar_geometry(:large).width %>;
  $("#crop_x").val(Math.round(coords.x * ratio));
  $("#crop_y").val(Math.round(coords.y * ratio));
  $("#crop_w").val(Math.round(coords.w * ratio));
  $("#crop_h").val(Math.round(coords.h * ratio));
} 
```

在 Set select 上，我们可以将其更改为不受约束的值。

# c# - .NET MVC Membership - 在网页上显示当前用户密码

> ID：12818705
> 
> 赞同：0
> 
> 时间：2012-10-10T11:54:55.577
> 
> 标签：c#, asp.net-mvc, asp.net-membership

.NET 成员存储所有密码编码。像这样：

```
TcsrrZQK9xZw3A4lXTKmeDC5LbJ6sAePCBuAipqnM4M= 
```

我有客户的要求，在用户配置文件系统中需要显示当前用户密码。

是否有可能（出于安全原因，我仍然需要在数据库中编码密码）？有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:03:32.393

通常/最佳做法是对密码存储使用单向加密。

您只能通过使用对称加密和覆盖内置密码存储方法来做您想做的事。

更好的解决方案是将临时密码通过电子邮件发送给必须在下次登录时更改密码的用户。作为一个非常不安全的扩展，您可以在屏幕上显示此密码。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:01:27.357

对的，这是可能的。

您将需要具有以下属性的自定义[成员资格提供程序](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)：

```
 EnablePasswordRetrieval = true 
```

这又需要一些其他设置，例如

```
 PasswordFormat = Encrypted   (normally: Hashed) 
```

我不确定这样的提供者是否存在，但你可以写一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:57:00.240

您无法显示密码，因为 ASP.net MVC 使用一种方式加密。

# sql - 使用此 SQL 语句按用户名分组的最佳方法是什么？

> ID：12818707
> 
> 赞同：0
> 
> 时间：2012-10-10T11:54:56.443
> 
> 标签：sql, sql-server, sql-server-2008

```
SELECT 
  M.FromUserID,
  UF.Fname + ' ' + UF.Sname As FullName,
  UF.URL as Username,
  Subject,
  Body,
  M.Ctime,
  M.ViewedDate,
  M.MessageID,
  M.Starred,
  M.Deleted,
  M.ToUserID,
  (SELECT TOP 1 Fname + ' ' + Sname as FullName FROM user_basics UB WHERE UB.UserID = M.ToUserID) as ToName,
  (SELECT TOP 1 URL FROM user_basics UB WHERE UB.UserID = M.ToUserID) as ToUserName 
FROM Messages M 
  LEFT JOIN User_Basics UF ON UF.userID = M.FromUserID 
WHERE M.ToUserID = 1433 AND Deleted IS NULL ORDER BY M.Ctime DESC 
```

我想显示一条消息历史记录，其中最新消息首先按用户名分组...

当我使用 group by 方法时，它告诉我需要添加所有其他列...

`Column 'Messages.FromUserID' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.`

肯定有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:01:15.733

使用`ROW_NUMBER() OVER (PARTITION BY M.FromUserID ORDER BY M.ViewedDate DESC)`：

```
WITH CTE AS
(
   SELECT 
     M.FromUserID,
     UF.Fname + ' ' + UF.Sname As FullName,
     UF.URL as Username,
     Subject,
     Body,
     M.Ctime,
     M.ViewedDate,
     M.MessageID,
     M.Starred,
     M.Deleted,
     M.ToUserID,
     (SELECT TOP 1 Fname + ' ' + Sname as FullName FROM user_basics UB WHERE UB.UserID = M.ToUserID) as ToName,
     (SELECT TOP 1 URL FROM user_basics UB WHERE UB.UserID = M.ToUserID) as ToUserName, 
     RN = ROW_NUMBER() OVER (PARTITION BY M.FromUserID ORDER BY M.ViewedDate DESC)
  FROM Messages M 
  LEFT JOIN User_Basics UF ON UF.userID = M.FromUserID 
  WHERE M.ToUserID = 1433 
  AND Deleted IS NULL 
)
SELECT * FROM CTE
WHERE RN = 1
ORDER BY Ctime DESC 
```

# android - 如何在android中找到今天或昨天的时间

> ID：12818711
> 
> 赞同：97
> 
> 时间：2012-10-10T11:55:21.413
> 
> 标签：android, time

我正在开发一个发送短信的应用程序。我正在存储当前时间并通过从数据库中检索时间来显示在发送的历史记录页面中。在发送历史记录页面中，我想显示消息的发送时间。在这里，我想检查消息是今天还是昨天或前天发送的那样。如果消息是昨天发送的，那么我需要像这样显示“昨天 20:00”，甚至昨天之前发送的消息也意味着“星期一 20:00”。我不知道该怎么做。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2013-04-22T11:38:54.947

要检查日期是否是今天，请使用 Android utils 库

```
DateUtils.isToday(long timeInMilliseconds) 
```

这个 utils 类还提供了相对时间的人类可读字符串。例如，

```
DateUtils.getRelativeTimeSpanString(long timeInMilliseconds) -> "42 minutes ago" 
```

您可以使用几个参数来定义时间跨度的精确度

请参阅[DateUtils](http://developer.android.com/reference/android/text/format/DateUtils.html)

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2017-03-30T18:12:29.140

如前所述，`DateUtils.isToday(d.getTime())`将用于确定是否`Date d`是今天。但是这里的一些回复实际上并没有回答如何确定日期是否是昨天。您也可以通过以下方式轻松做到这一点`DateUtils`：

```
public static boolean isYesterday(Date d) {
    return DateUtils.isToday(d.getTime() + DateUtils.DAY_IN_MILLIS);
} 
```

之后，您还可以确定日期是否为明天：

```
public static boolean isTomorrow(Date d) {
    return DateUtils.isToday(d.getTime() - DateUtils.DAY_IN_MILLIS);
} 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-10-11T04:22:20.780

您可以使用 android.text.format.DateFormat 类轻松做到这一点。尝试这样的事情。

```
public String getFormattedDate(Context context, long smsTimeInMilis) {
    Calendar smsTime = Calendar.getInstance();
    smsTime.setTimeInMillis(smsTimeInMilis);

    Calendar now = Calendar.getInstance();

    final String timeFormatString = "h:mm aa";
    final String dateTimeFormatString = "EEEE, MMMM d, h:mm aa";
    final long HOURS = 60 * 60 * 60;
    if (now.get(Calendar.DATE) == smsTime.get(Calendar.DATE) ) {
        return "Today " + DateFormat.format(timeFormatString, smsTime);
    } else if (now.get(Calendar.DATE) - smsTime.get(Calendar.DATE) == 1  ){
        return "Yesterday " + DateFormat.format(timeFormatString, smsTime);
    } else if (now.get(Calendar.YEAR) == smsTime.get(Calendar.YEAR)) {
        return DateFormat.format(dateTimeFormatString, smsTime).toString();
    } else {
        return DateFormat.format("MMMM dd yyyy, h:mm aa", smsTime).toString();
    }
} 
```

检查[http://developer.android.com/reference/java/text/DateFormat.html](http://developer.android.com/reference/java/text/DateFormat.html)以进一步了解。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-05-13T15:06:53.143

今天你可以`DateUtils.isToday`从[android API](http://developer.android.com/reference/android/text/format/DateUtils.html#isToday(long))使用。

昨天您可以使用该代码：

```
public static boolean isYesterday(long date) {
    Calendar now = Calendar.getInstance();
    Calendar cdate = Calendar.getInstance();
    cdate.setTimeInMillis(date);

    now.add(Calendar.DATE,-1);

    return now.get(Calendar.YEAR) == cdate.get(Calendar.YEAR)
        && now.get(Calendar.MONTH) == cdate.get(Calendar.MONTH)
        && now.get(Calendar.DATE) == cdate.get(Calendar.DATE);
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-05-31T11:44:33.247

* * *

## 没有使用库

* * *

**昨天**

**今天**

**明天**

**今年**

**任何一年**

```
 public static String getMyPrettyDate(long neededTimeMilis) {
    Calendar nowTime = Calendar.getInstance();
    Calendar neededTime = Calendar.getInstance();
    neededTime.setTimeInMillis(neededTimeMilis);

    if ((neededTime.get(Calendar.YEAR) == nowTime.get(Calendar.YEAR))) {

        if ((neededTime.get(Calendar.MONTH) == nowTime.get(Calendar.MONTH))) {

            if (neededTime.get(Calendar.DATE) - nowTime.get(Calendar.DATE) == 1) {
                //here return like "Tomorrow at 12:00"
                return "Tomorrow at " + DateFormat.format("HH:mm", neededTime);

            } else if (nowTime.get(Calendar.DATE) == neededTime.get(Calendar.DATE)) {
                //here return like "Today at 12:00"
                return "Today at " + DateFormat.format("HH:mm", neededTime);

            } else if (nowTime.get(Calendar.DATE) - neededTime.get(Calendar.DATE) == 1) {
                //here return like "Yesterday at 12:00"
                return "Yesterday at " + DateFormat.format("HH:mm", neededTime);

            } else {
                //here return like "May 31, 12:00"
                return DateFormat.format("MMMM d, HH:mm", neededTime).toString();
            }

        } else {
            //here return like "May 31, 12:00"
            return DateFormat.format("MMMM d, HH:mm", neededTime).toString();
        }

    } else {
        //here return like "May 31 2010, 12:00" - it's a different year we need to show it
        return DateFormat.format("MMMM dd yyyy, HH:mm", neededTime).toString();
    }
} 
```

**Kotlin 扩展功能：**

```
fun Long.toPrettyDate(): String {
    val nowTime = Calendar.getInstance()
    val neededTime = Calendar.getInstance()
    neededTime.timeInMillis = this

    return if (neededTime[Calendar.YEAR] == nowTime[Calendar.YEAR]) {
        if (neededTime[Calendar.MONTH] == nowTime[Calendar.MONTH]) {
            when {
                neededTime[Calendar.DATE] - nowTime[Calendar.DATE] == 1 -> {
                    //here return like "Tomorrow at 12:00"
                    "Tomorrow at " +  SimpleDateFormat("HH:mm", Locale.getDefault()).format(Date(this))
                }
                nowTime[Calendar.DATE] == neededTime[Calendar.DATE] -> {
                    //here return like "Today at 12:00"
                    "Today at " +  SimpleDateFormat("HH:mm", Locale.getDefault()).format(Date(this))
                }
                nowTime[Calendar.DATE] - neededTime[Calendar.DATE] == 1 -> {
                    //here return like "Yesterday at 12:00"
                    "Yesterday at " +  SimpleDateFormat("HH:mm", Locale.getDefault()).format(Date(this))
                }
                else -> {
                    //here return like "May 31, 12:00"
                    SimpleDateFormat("MMMM d, HH:mm", Locale.getDefault()).format(Date(this))
                }
            }
        } else {
            //here return like "May 31, 12:00"
            SimpleDateFormat("MMMM d, HH:mm", Locale.getDefault()).format(Date(this))
        }
    } else {
        //here return like "May 31 2022, 12:00" - it's a different year we need to show it
        SimpleDateFormat("MMMM dd yyyy, HH:mm", Locale.getDefault()).format(Date(this))
    }
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-01-11T17:54:23.460

你可以试试这个：

```
Calendar mDate = Calendar.getInstance(); // just for example
if (DateUtils.isToday(mDate.getTimeInMillis())) {
  //format one way
} else {
  //format in other way
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-02-04T09:33:58.317

如果您的 API 级别为 26 或更高，那么您最好使用 LocalDate 类：

```
fun isToday(whenInMillis: Long): Boolean {
    return LocalDate.now().compareTo(LocalDate(whenInMillis)) == 0
}

fun isTomorrow(whenInMillis: Long): Boolean {
    return LocalDate.now().plusDays(1).compareTo(LocalDate(whenInMillis)) == 0
}

fun isYesterday(whenInMillis: Long): Boolean {
    return LocalDate.now().minusDays(1).compareTo(LocalDate(whenInMillis)) == 0
} 
```

如果您的应用具有较低的 API 级别，请使用

```
fun isToday(whenInMillis: Long): Boolean {
    return DateUtils.isToday(whenInMillis)
}

fun isTomorrow(whenInMillis: Long): Boolean {
    return DateUtils.isToday(whenInMillis - DateUtils.DAY_IN_MILLIS)
}

fun isYesterday(whenInMillis: Long): Boolean {
    return DateUtils.isToday(whenInMillis + DateUtils.DAY_IN_MILLIS)
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-11-26T07:58:41.383

另一种方法。在**kotlin**中使用推荐的 lib **ThreeTen**

1.  添加三十

    ```
    implementation 'com.jakewharton.threetenabp:threetenabp:1.1.0' 
    ```

2.  添加 kotlin 扩展。

    ```
    fun LocalDate.isYesterday(): Boolean = this.isEqual(LocalDate.now().minusDays(1L))

    fun LocalDate.isToday(): Boolean = this.isEqual(LocalDate.now()) 
    ```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-04-12T21:49:50.040

## 科特林

@Choletski 解决方案，但在 Kotlin 中只需几秒钟

```
 fun getMyPrettyDate(neededTimeMilis: Long): String? {
        val nowTime = Calendar.getInstance()
        val neededTime = Calendar.getInstance()
        neededTime.timeInMillis = neededTimeMilis
        return if (neededTime[Calendar.YEAR] == nowTime[Calendar.YEAR]) {
            if (neededTime[Calendar.MONTH] == nowTime[Calendar.MONTH]) {
                if (neededTime[Calendar.DATE] - nowTime[Calendar.DATE] == 1) {
                    //here return like "Tomorrow at 12:00"
                    "Tomorrow at " + DateFormat.format("HH:mm:ss", neededTime)
                } else if (nowTime[Calendar.DATE] == neededTime[Calendar.DATE]) {
                    //here return like "Today at 12:00"
                    "Today at " + DateFormat.format("HH:mm:ss", neededTime)
                } else if (nowTime[Calendar.DATE] - neededTime[Calendar.DATE] == 1) {
                    //here return like "Yesterday at 12:00"
                    "Yesterday at " + DateFormat.format("HH:mm:ss", neededTime)
                } else {
                    //here return like "May 31, 12:00"
                    DateFormat.format("MMMM d, HH:mm:ss", neededTime).toString()
                }
            } else {
                //here return like "May 31, 12:00"
                DateFormat.format("MMMM d, HH:mm:ss", neededTime).toString()
            }
        } else {
            //here return like "May 31 2010, 12:00" - it's a different year we need to show it
            DateFormat.format("MMMM dd yyyy, HH:mm:ss", neededTime).toString()
        }
    } 
```

您可以通过此处`date.getTime()`获取输出，例如

```
Today at 18:34:45
Yesterday at 12:30:00
Tomorrow at 09:04:05 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-01-25T12:30:15.940

**这是获取诸如今天、昨天和日期之类的值的方法，例如 Whtsapp 应用程序具有**

```
public String getSmsTodayYestFromMilli(long msgTimeMillis) {

        Calendar messageTime = Calendar.getInstance();
        messageTime.setTimeInMillis(msgTimeMillis);
        // get Currunt time
        Calendar now = Calendar.getInstance();

        final String strTimeFormate = "h:mm aa";
        final String strDateFormate = "dd/MM/yyyy h:mm aa";

        if (now.get(Calendar.DATE) == messageTime.get(Calendar.DATE)
                &&
                ((now.get(Calendar.MONTH) == messageTime.get(Calendar.MONTH)))
                &&
                ((now.get(Calendar.YEAR) == messageTime.get(Calendar.YEAR)))
                ) {

            return "today at " + DateFormat.format(strTimeFormate, messageTime);

        } else if (
                ((now.get(Calendar.DATE) - messageTime.get(Calendar.DATE)) == 1)
                        &&
                        ((now.get(Calendar.MONTH) == messageTime.get(Calendar.MONTH)))
                        &&
                        ((now.get(Calendar.YEAR) == messageTime.get(Calendar.YEAR)))
                ) {
            return "yesterday at " + DateFormat.format(strTimeFormate, messageTime);
        } else {
            return "date : " + DateFormat.format(strDateFormate, messageTime);
        }
    } 
```

**使用这种方法只需通过毫秒**

```
 getSmsTodayYestFromMilli(Long.parseLong("1485236534000")); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-04-30T06:34:10.750

用作 kotlin 扩展也相当漂亮：

```
fun Calendar.isToday() : Boolean {
    val today = Calendar.getInstance()
    return today[Calendar.YEAR] == get(Calendar.YEAR) && today[Calendar.DAY_OF_YEAR] == get(Calendar.DAY_OF_YEAR)
} 
```

并使用：

```
if (calendar.isToday()) {
    Log.d("Calendar", "isToday")
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-03T10:53:16.460

```
 Calendar now = Calendar.getInstance();
    long secs = (dateToCompare - now.getTime().getTime()) / 1000;
    if (secs > 0) {
        int hours = (int) secs / 3600;
        if (hours <= 24) {
            return today + "," + "a formatted day or empty";
        } else if (hours <= 48) {
            return yesterday + "," + "a formatted day or empty";
        }
    } else {
        int hours = (int) Math.abs(secs) / 3600;

        if (hours <= 24) {
            return tommorow + "," + "a formatted day or empty";
        }
    }
    return "a formatted day or empty"; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-10T12:01:20.803

我可以建议你一件事。当您发送短信时，将详细信息存储到数据库中，以便您可以在历史页面中显示发送短信的日期和时间。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-14T20:46:44.487

`DateUtils.isToday()`应被视为已弃用，因为`android.text.format.Time`现在已弃用。在他们更新 isToday 的源代码之前，这里没有解决方案可以检测今天、昨天、处理与夏令时之间的转换，并且不使用已弃用的代码。这是在 Kotlin 中，使用`today`必须定期更新的字段（例如`onResume`等）：

```
@JvmStatic
fun dateString(ctx: Context, epochTime: Long): String {
    val epochMS = 1000*epochTime
    val cal = Calendar.getInstance()
    cal.timeInMillis = epochMS
    val yearDiff = cal.get(Calendar.YEAR) - today.get(Calendar.YEAR)
    if (yearDiff == 0) {
        if (cal.get(Calendar.DAY_OF_YEAR) >= today.get(Calendar.DAY_OF_YEAR))
            return ctx.getString(R.string.today)
    }
    cal.add(Calendar.DATE, 1)
    if (cal.get(Calendar.YEAR) == today.get(Calendar.YEAR)) {
        if (cal.get(Calendar.DAY_OF_YEAR) == today.get(Calendar.DAY_OF_YEAR))
            return ctx.getString(R.string.yesterday)
    }
    val flags = if (yearDiff == 0) DateUtils.FORMAT_ABBREV_MONTH else DateUtils.FORMAT_NUMERIC_DATE
    return DateUtils.formatDateTime(ctx, epochMS, flags)
} 
```

我提交了[https://code.google.com/p/android/issues/detail?id=227694&thanks=227694&ts=1479155729](https://code.google.com/p/android/issues/detail?id=227694&thanks=227694&ts=1479155729)，去投票吧

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-08T15:59:07.643

这是我现在结束的代码：

```
import android.text.format.DateFormat

fun java.util.Date.asPrettyTime(context: Context): String {
    val nowTime = Calendar.getInstance()

    val dateTime = Calendar.getInstance().also { calendar ->
        calendar.timeInMillis = this.time
    }

    if (dateTime[Calendar.YEAR] != nowTime[Calendar.YEAR]) { // different year
        return DateFormat.format("MM.dd.yyyy.  ·  HH:mm", dateTime).toString()
    }

    if (dateTime[Calendar.MONTH] != nowTime[Calendar.MONTH]) { // different month
        return DateFormat.format("MM.dd.  ·  HH:mm", dateTime).toString()
    }

    return when {
        nowTime[Calendar.DATE] == dateTime[Calendar.DATE] -> { // today
            "${context.getString(R.string.today)}  ·  ${DateFormat.format("HH:mm", dateTime)}"
        }
        nowTime[Calendar.DATE] - dateTime[Calendar.DATE] == 1 -> { // yesterday
            "${context.getString(R.string.yesterday)}  ·  ${DateFormat.format("HH:mm", dateTime)}"
        }
        nowTime[Calendar.DATE] - dateTime[Calendar.DATE] == -1 -> { // tomorrow
            "${context.getString(R.string.tomorrow)}  ·  ${DateFormat.format("HH:mm", dateTime)}"
        }
        else -> { // other date this month
            DateFormat.format("MM.dd.  ·  HH:mm", dateTime).toString()
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-12T09:52:00.550

这是我使用的一个简单解决方案：

```
public static boolean isTomorrow(Calendar c) {
    Calendar tomorrow = Calendar.getInstance();
    tomorrow.add(Calendar.DATE,1);
    return (tomorrow.get(Calendar.YEAR) == c.get(Calendar.YEAR)) && (tomorrow.get(Calendar.DAY_OF_YEAR) == (c.get(Calendar.DAY_OF_YEAR)));
}

public static boolean isToday(Calendar c) {
    Calendar today = Calendar.getInstance();
    return (today.get(Calendar.YEAR) == c.get(Calendar.YEAR)) && (today.get(Calendar.DAY_OF_YEAR) == c.get(Calendar.DAY_OF_YEAR));
} 
```

**这涵盖了所有可能发生的边缘情况。**

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2020-10-02T12:57:03.920

无需任何库和简单代码，即可处理每个 Kotlin 项目

```
//Simple date format of the day
val sdfDate = SimpleDateFormat("dd/MM/yyyy")

//Create this 2 extensions of Date
fun Date.isToday() = sdfDate.format(this) == sdfDate.format(Date())
fun Date.isYesterday() =
    sdfDate.format(this) == sdfDate.format(Calendar.getInstance().apply { 
          add(Calendar.DAY_OF_MONTH, -1) }.time)

//And after everwhere in your code you can do
if(myDate.isToday()){
   ...
}
else if(myDate.isYesterday()) {
...
} 
```

# html - 从数据库的下拉列表中选择的值

> ID：12818713
> 
> 赞同：1
> 
> 时间：2012-10-10T11:55:24.053
> 
> 标签：html, asp.net-mvc

我想将下拉列表中的存储值显示为选定值。我不知道如何在 MVC 中做到这一点。

我的代码是

```
<%: Html.DropDownList("basic-qualification-container" + i.ToString(), 
         new SelectList((IEnumerable<Dial4Jobz.Models.Degree>)ViewData["CandidateBasicQualifications"], "Id", "Name", (IEnumerable<int>)ViewData["BasicQualificationDegrees"]), 
         new { @class = "qualification" })%> 
```

我从下拉列表中选择一些选项并提交。加载页面后，将显示最后存储的值。这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:16:40.630

您可能为 selectedValue 参数发送了错误的值。您应该在 SelectList 构造函数中设置值。

```
<%: Html.DropDownList("basic-qualification-container" + i.ToString(), 
         new SelectList((IEnumerable<Dial4Jobz.Models.Degree>)ViewData["CandidateBasicQualifications"],
                        "Id", 
                        "Name",
                        ViewData["selectedValue"]), //set selected value here
         new { @class = "qualification" })%> 
```

更好的方法是将 ViewData 中的所有数据放入模型中，然后将其强类型化到您的视图中。

以下是您定义模型的方式：

```
public class SampleModel
{
    private string SelectedOption { get; set; }
    private IEnumerable<SelectListItem> Options { get; set; }
} 
```

然后在您的操作方法中提供值：

```
public ActionResult Index()
{
    //get data from db
    SampleModel model = new SampleModel
                            {
                                SelectedOption = selectedOption,
                                Options = new SelectList(options, "Id", "Name")
                            };
    return View(model);
} 
```

在将视图强输入到 SampleModel 之后，您可以在视图中使用 Html.DropDownListFor 助手。

```
<%: Html.DropDownListFor(model => model.SelectedOption,
                         Model.Options,
                         new { @class = "qualification" }) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:10:44.130

SomeAction 视图中的 DropDownList 助手

```
Html.DropDownList(
    string name,
    IEnumerable<SelectListItem> selectList,
    ViewData["lastSelected"],  // String Selected Option
    object htmlAttributes) 
```

您可以使用 viewData 显示选定的值，如下所示。

控制器

```
// Set Default selected
public ActionResult SomeAction()
{
    ViewData["lastSelected"] = "Default Text";
    return View();
} 
```

发布后，您应该再次设置所选值中显示的 viewData。

```
// Set selected value after posting
[HttpPost]
public ActionResult SomeAction()
{
    .....
    ViewData["lastSelected"] = "Changed Text (selected value)";
    return View();
} 
```

# c# - C# mysqldrivercs 数据集更新命令

> ID：12818716
> 
> 赞同：1
> 
> 时间：2012-10-10T11:55:28.017
> 
> 标签：c#, mysql

我正在使用 mysqldrivercs 连接到我的 mysql 数据库。

现在我有一些问题。我将数据读入数据集并进行了一些更改。我想更新对我的数据库的更改。

但是mysqldrivercs没有提供像“sqlcommandbuilder”这样的方法，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:08:37.790

不是有`MySqlCommandBuilder`吗？我想你正在使用 mysql 网络连接器。

[http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommandbuilder.html](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommandbuilder.html)

# java - Android 上的 WebRTC AEC

> ID：12818721
> 
> 赞同：4
> 
> 时间：2012-10-10T11:55:53.757
> 
> 标签：java, android, c, webrtc, aec

我正在为**Android开发一个****SIP 软电话**应用程序，并面临回声消除问题。我尝试使用**Speex**解决它，但没有成功。所以我的下一个镜头是**WebRTC AEC**（声学回声消除），但我找不到任何关于如何使用它的文档。

 ******在我的应用程序中，音频由 Java 中的 AudioTrack 和 AudioRecord 类管理，但发送和接收的套接字在 C 代码中（与 JNI 集成）。WebRTC 是一个大型项目，我只想集成 AEC 模块。

有人知道我必须包含哪些文件，编译器需要哪些标志，要执行哪些函数调用，等等？我有 CSipSimple 代码，它也使用 WebRTC（但也用于其他用途），我找不到包含和使用它的简单和正确的方法。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T18:11:45.233

您将需要以下文件：

```
aec/modules/audio_processing/aec/aec_core_sse2.c
aec/modules/audio_processing/aec/aec_core.c
aec/modules/audio_processing/aec/aec_rdft_sse2.c
aec/modules/audio_processing/aec/aec_rdft.c
aec/modules/audio_processing/aec/aec_resampler.c
aec/modules/audio_processing/aec/echo_cancellation.c
aec/modules/audio_processing/utility/ring_buffer.c
aec/modules/audio_processing/utility/delay_estimator.c
aec/modules/audio_processing/utility/delay_estimator_wrapper.c
aec/system_wrappers/source/cpu_features.cc
aec/common_audio/signal_processing/randomization_functions.c 
```

用法：

```
void * aec = 0;
int status = WebRtcAecm_Create(&aec);
status = WebRtcAecm_Init(aec, 8000 /* sample rate */);

// Buffer the far end frames
int status = WebRtcAecm_BufferFarend(
    aec, play_frm, 160
);

// Cancel echo
status = WebRtcAecm_Process(
    aec, (WebRtc_Word16 *)buf, (WebRtc_Word16 *)buf,
    tmp_frm, 160,
    echo_tail / tail_factor
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:00:28.203

这不能回答您的问题，但如果您在[webrtc.org](http://webrtc.org)上找不到您需要的内容，请尝试使用Discussion [-webrtc](https://groups.google.com/forum/?fromgroups#!forum/discuss-webrtc)组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:24:29.720

注意：下面引用的 android 版本是 4.1 (JellyBean)

反应可能为时已晚。但是，对于任何对**dbaustista**问题的答案感兴趣的人，请考虑以下内容：

AEC 由 AudioEffect 类建模。因此，需要将 AEC AudioEffect 对象添加到 RecordThread 的“效果链”中。我相信 AEC 的实现是内置在`libaudioprocessing`库中的。请参阅下面的附加说明。

**图书馆**

```
/system/etc/audio_effects.conf
libraries {
...
   pre_processing {
     path /system/lib/soundfx/libaudiopreprocessing.so
   }
} 
```

**界面**

```
media/AudioEffect.h 
```

**例子**

下面的示例向您展示了如何将 AudioEffect 对象添加到**PlaybackThread**。对 RecordThread 应用类似的逻辑，即将 AEC 对象添加到 RecordThread 的效果链。

媒体框架测试/功能/音频/MediaAudioEffectTest.java

```
 AudioTrack track = new AudioTrack(
                                  AudioManager.STREAM_MUSIC,
                                  44100,
                                  AudioFormat.CHANNEL_OUT_MONO,
                                  AudioFormat.ENCODING_PCM_16BIT,
                                  AudioTrack.getMinBufferSize(44100,
                                  AudioFormat.CHANNEL_OUT_MONO,
                                  AudioFormat.ENCODING_PCM_16BIT),
                                  AudioTrack.MODE_STREAM);
      assertNotNull(msg + ": could not create AudioTrack", track);
      AudioEffect effect = new AudioEffect(AudioEffect.EFFECT_TYPE_ENV_REVERB,
              AudioEffect.EFFECT_TYPE_NULL,
              0,
              0);

      track.attachAuxEffect(effect.getId());
      track.setAuxEffectSendLevel(1.0f); 
```

**AEC 配置选项**

TODO：添加 AEC 的示例配置******

# javascript - JavaScript 搜索表单多功能

> ID：12818729
> 
> 赞同：0
> 
> 时间：2012-10-10T11:56:22.737
> 
> 标签：javascript, ajax

我有一个我无法解决的问题。

我必须修改使用 Ajax 的搜索表单。

[这是一个显示设置的小提琴](http://jsfiddle.net/dompl/J3FtG/)

没有，有两个过滤器字段：`keyword`和`job_location`。我添加了另一个过滤器字段`job_title`。

不幸的是，结果并没有从数据库中提取任何内容`job_title.`

# javascript - 关于 JavaScript OnFocus 的新手问题

> ID：12818732
> 
> 赞同：1
> 
> 时间：2012-10-10T11:56:30.117
> 
> 标签：javascript, asp.net, vb.net, onfocus

我必须在 ASP.net 页面的文本字段中添加默认灰色文本，如下所示：

![图片01](../Images/c6957107c2e4e05ece4daa2b85b7ce0d.png)

当用户单击/输入字段时，默认文本会消失。

如何在文本框事件中执行此操作？

我设法实现 onFocus 事件来更改文本颜色；在我的`.aspx`页面中，我`<script>`为 JS 代码创建了一个标签：

```
<script type="text/javascript">
    function test(obj) {
        obj.style.color = "grey";
    }
</script> 
```

后面的代码：

```
txtBox.Attributes.Add("OnFocus", "test(this)")
'txtBox is the ID of text Box 
```

现在，关于 JavaScript OnFocus 事件的非常基本的问题令人尴尬。

但是*问题是知识的关键*:)

**编辑：**我不能在我的 ASP.Net 页面中使用任何 HTML 标签

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:34:01.127

**尝试使用 jQuery**

如何实现 jQuery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

html:

```
<input type="text" /> 
```

CSS：

```
.grey { color:#aaa; } 
```

jQuery：

```
var inputval = "";
$(document).ready(function() {
    // Define your default value to show on input
    $("input[type='text']").val("Enter your text here...");
    // Add grey color or optionally blur effect
    $("input[type='text']").addClass('grey');
    // Save your default value
    inputval = $("input[type='text']").val();
    $("input[type='text']").focusin(function() {
    // if textbox is empty or got the default value
    if ($(this).val() == "" || $(this).val() == inputval) {
        // Clear the box
        $(this).val("");
        // Remove grey color
        $(this).removeClass('grey'); }
    }).focusout(function() {
        // if textbox is empty
        if ($(this).val() == "") {
            // Put your Default value back
            $(this).val(inputval);
            // Add grey color
            $(this).addClass('grey'); }
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/BerkerYuceer/SWc6g/](http://jsfiddle.net/BerkerYuceer/SWc6g/)

这实际上是一个非常糟糕的编码，但它应该让你了解它是如何工作的。

**编辑：**这是更有效的版本

html:

```
<input type="text" /> 
```

jQuery：

```
$(document).ready(function() {
    Watermark("input[type='text']","Enter your text here...");
});

function Watermark(element, WatermarkString) {
    $(element).val(WatermarkString).css('color','#aaa');
    $(element).focusin(function() {
        if ($(this).val() == "" || $(this).val() == WatermarkString) {
            $(this).val("").css('color','#000'); }
    }).focusout(function() {
        if ($(this).val() == "") {
            $(this).val(WatermarkString).css('color','#aaa'); }
    });
}; 
```

jsfiddle：http: [//jsfiddle.net/BerkerYuceer/vLJ2U/](http://jsfiddle.net/BerkerYuceer/vLJ2U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:58:31.987

有可能产生这样的东西吗？

```
<input type="text" placeholder="Enter your text here..." /> 
```

因此，您需要实际将此`placeholder="Enter your text here..."`属性添加到`<input />`标签中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:26:59.323

这是你的意思吗？

```
<html>
<head></head>
<body>
    <input id="serachbox" type="text" onFocus="initText(this);" />

    <script type="text/javascript">

        var defaultText = 'Enter your serach here...'
        var initText = function(el){
            if(el.value == defaultText){
                el.value = "";
            }
        }

        var input = document.getElementById('serachbox');

        input.value = defaultText;
    </script>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:41:05.107

我对 ASP.NET 一无所知，但是由于您可以添加 onfocus 侦听器，因此您应该能够执行以下操作：

```
txtBox.Attributes.Add("Value", "Enter your text here...")
txtBox.Attributes.Add("OnFocus", "updateValue(this)")
txtBox.Attributes.Add("OnBlur", "updateValue(this)") 
```

其中 updateValue 函数是：

```
function updateValue(el) {
    if (el.value == el.defaultValue) {
      el.value = '';
    } else {
      el.value = el.defaultValue;
    }
} 
```

上面模仿了占位符属性，它（IMO）是一个烦人的界面功能，应该很少使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T12:54:01.990

我猜您正在寻找文本字段中的**水印效果？**

如果是这样，有几种方法可以做到这一点。

1）使用[AjaxToolKit](http://ajaxcontroltoolkit.codeplex.com/releases/view/87024)库（[水印效果演示在这里](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)）
2）使用HTML + CSS + jQuery

```
<input type="text" id="text1" value="some text"/>
<script type="text/javascript">
  $(document).ready(function() {
    var tbval = $('#text1').val();
    $('#text1').focus(function() { $(this).val('');});
    $('#text1').blur(function() { $(this).val(tbval);});
  });
</script> 
```

来源：

*   [http://blogs.planetcloud.co.uk/mygreatdiscovery/post/A-simple-jQuery-watermark-textbox.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/A-simple-jQuery-watermark-textbox.aspx)
*   [http://www.misfitgeek.com/textbox-input-watermark-using-jquery/](http://www.misfitgeek.com/textbox-input-watermark-using-jquery/)

# jquery - 带有 $.cookie 的完整日历不起作用

> ID：12818744
> 
> 赞同：0
> 
> 时间：2012-10-10T11:57:02.650
> 
> 标签：jquery, jquery-plugins, fullcalendar, jquery-cookie

我一直在试图解决这个问题，因为我找不到任何解决方案，所以我创建了一个 jsfiddle，以便有人可以帮助我。

我已经集成了 jquery cookie 插件的完整日历，这样我就可以“缓存”用户最后使用的视图。

它在 Windows XP 中的 Firefox、Chrome、IE8 上运行良好，但在 Windows 7 下的 IE9 上不起作用。

日历根本没有出现，我收到一条错误消息，说“对象不支持属性或方法'cookie'”。

谁能帮我一把？

这是小提琴：http: [//jsfiddle.net/ECQA6/](http://jsfiddle.net/ECQA6/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:26:41.097

好吧，没有 jQuery 方法`cookie()`。

您可能指的是[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)中的方法。在使用此方法之前，您需要[包含插件脚本。](https://github.com/carhartl/jquery-cookie/blob/master/README.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:56:36.737

好吧，我已经能够解决这个问题，所以我会在这里给出答案，以防万一有人遇到相同或类似的问题。

问题是我直接从 github 包含一个文件，并且没有成功处理。底线，下次我不会尝试直接从 github 包含文件。

# javascript - 如何判断变量是否为空

> ID：12818746
> 
> 赞同：3
> 
> 时间：2012-10-10T11:57:04.223
> 
> 标签：javascript, variables

我有一个不起作用的功能。我不知道当我想找出变量是否不为空然后显示/写入变量时的语法是什么？

```
function contactUsMailer(e) {
try {
var recipient = "test@test.dk";
var timestamp = e.values[0];
var email = e.values[1];
var buffet = e.values[12];    
var message = 'Kantine Rekvisition'+'<br>'

    +'Afdeling:        '+e.values[2]+'<br>'
    +'Afd. nr.:        '+e.values[3]+'<br>'
    +'Til dato/kl.:    '+e.values[8]+'<br>'+'<br>'

    **if (buffet!='') {
      +'Antal Buffet: '+ buffet + '<br>'**

    var body = message;
 var advancedArgs = {htmlBody:body, replyTo:email};
 MailApp.sendEmail(recipient, "Kantine Rekvisition", body, advancedArgs);
} catch(e){
 MailApp.sendEmail(recipient, "Error - Contact Us Form", e.message);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:10:26.880

你可以简单地使用：

```
if (buffet) {
    // buffet is not undefined, null, false, 0 or empty string
} 
```

您现有的条件`buffet!=''`也应该有效，请记住这`null!=''`也是真实的。

**编辑**

顺便说一句，在字符串连接中使用，您应该使用三元运算符：

```
var message = 'Kantine Rekvisition'+'<br>'
  +'Afdeling:        '+e.values[2]+'<br>'
  +'Afd. nr.:        '+e.values[3]+'<br>'
  +'Til dato/kl.:    '+e.values[8]+'<br>'+'<br>'
  +(buffet ? 'Antal Buffet: '+ buffet + '<br>' : ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:04:26.877

您可以像这样检查变量是否为空白..

```
if(variable.length != 0){
   // not blank
}else{
   // blank
} 
```

# ios - 你如何判断 UIImagePickerController cameraOverlayview 是否会旋转？

> ID：12818748
> 
> 赞同：1
> 
> 时间：2012-10-10T11:57:07.557
> 
> 标签：ios, overlay, uiimagepickercontroller, uiinterfaceorientation

Ipad 上的 IOS 6 在横向模式下旋转 UIImagePickerController cameraOverlayView，但 iphone 3GS 上的 IOS 6 不会 - 谢谢 Apple！

我不知道 IOS 5 或其他设备的行为，所以有没有办法预测这种行为，以便我可以在覆盖视图上应用旋转变换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:46:11.707

我也有这个问题。这是我发现的：

在 Target 的“iPad 部署信息”配置中，确保您已启用“横向左侧”和“横向右侧”模式 - 即使您的应用程序并不真正支持这些（也可以通过 info.plist 文件完成） ， 明显地）。

![在此处输入图像描述](../Images/3cfe2f836160537b866b92e560e9ece6.png)

接下来，在您的`UIViewController`(s) 中，强制他们使用 Portrait：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

现在，`UIImagePickerController`当 iPad 旋转为横向时，应该可以正确旋转 - 但您`UIViewController`仍将是纵向的。

# asp.net-mvc - 在 MVC3 视图中显示动态图表

> ID：12818751
> 
> 赞同：1
> 
> 时间：2012-10-10T11:57:15.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, charts

我有一种情况，我需要在 MVC3 视图中显示图表。到目前为止，我已经在我的控制器中完成了以下操作

```
public ActionResult MyChart()
        {
            var bytes = new Chart(width: 400, height: 200)
                .AddSeries(
                    chartType: "bar",
                    xValue: new[] {"Math", "English", "Computer", "Urdu"},
                    yValues: new[] {"60", "70", "68", "88"})
                .GetBytes("png");
            return File(bytes, "image/png");
        } 
```

在我的 Jquery 文件中

```
function getChart() {
    $.ajax({
        url: ('/Home/MyChart'),
        type: 'GET',
        cache: false,
        success: function (result) {
            alert(result.length);
            $('#BottomGrid').html(result);
        },
        error: function () { alert("error"); }
    });
    } 
```

在我看来，我只是在调用 getChart() 方法。我的视图是一个 .aspx 视图，bottomgrid 是视图上的一个 div，我需要在其中显示图表。

在 IE 中运行上面的代码会给我一个 png 标志，在 Firefox 中它会显示特殊字符。

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:55:25.387

编辑您的“getChart()”函数：

```
 success: function (result) {
        alert(result.length);
        $('#BottomGrid').append('<img id="myChart" />');
        $('#myChart').attr("src", "/Home/MyChart")
    } 
```

但我认为这不是一个理想的解决方案，因为它两次请求图像，第一次是在您执行 ajax 时（它需要一种将返回的文本呈现为图像的方法），第二次是在浏览器解析“img”标签时.

# javascript - 从转换为 JSON 的 XML 中选择 JSON 项

> ID：12818755
> 
> 赞同：0
> 
> 时间：2012-10-10T11:57:24.770
> 
> 标签：javascript, xml, json

我有一个需要解析的外部 XML 提要。因为我正在使用 node.js，所以提要被转换为 JSON。然后使用 Javascript 提取相关信息。

XML 如下所示：

```
<name>blahblahblah</name> 
<price currency="EUR">10.95</price> 
```

转换为 JSON：

```
name: [ 'blahblahblah' ],
price: 
   [ { _: '10.95',
   '$': { currency: 'EUR' } } ] 
```

现在选择名称很容易：

```
var name = record.name[0] ;
print name; //outputs blahblahblah 
```

我试过了：

```
var price = record.price[0];
var price = record.price;
var price = record.price._;
var price = record.price._[0]; 
```

但是这些显然不起作用;-)我希望能够选择价格，更具体地说，根据它的属性（“货币”）选择价格。即在 XML 中：//price["@currency='EUR'"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:05:46.107

```
var record={name: [ 'blahblahblah' ], price:     [ { _: '10.95',    '$': { currency: 'EUR' } } ]};
record.price[0]._ // giving price 
record.price[0].$.currency // giving currency 
```

# android - smsManager.sendTextMessage 崩溃的应用程序

> ID：12818761
> 
> 赞同：0
> 
> 时间：2012-10-10T11:57:36.597
> 
> 标签：android, sms

我正在尝试从我的应用程序发送短信，但它崩溃了。

日志猫：

```
10-10 17:23:08.420: ERROR/AndroidRuntime(279): FATAL EXCEPTION: main
    java.lang.NullPointerException
    at android.os.Parcel.readException(Parcel.java:1253)
    at android.os.Parcel.readException(Parcel.java:1235)
    at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:369)
    at android.telephony.SmsManager.sendTextMessage(SmsManager.java:87)
    at com.example.SendAsSmsActivity.onClickSend(SendAsSmsActivity.java:101)
    at com.example.SendAsSmsActivity$1.onClick(SendAsSmsActivity.java:39)
    at android.view.View.performClick(View.java:2408)
    at android.view.View$PerformClick.run(View.java:8816)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method) 
```

代码类似于[SMS 管理器示例](http://mobiforge.com/developing/story/sms-messaging-android)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:07:28.187

你能写你的代码吗？

这段代码对我有用：

```
 private void sendSMS(String phoneNumber, String message)
   {
       SmsManager sms = SmsManager.getDefault();
       sms.sendTextMessage(phoneNumber, null, message, null, null);
    } 
```

在清单中：

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:06:10.117

用这种东西发短信...

```
 //---sends an SMS message to another device---
@SuppressWarnings("deprecation")
private void sendSMS(String phoneNumber, String message)
{        
    Log.v("phoneNumber",phoneNumber);
    Log.v("MEssage",message);
 //   PendingIntent pi = PendingIntent.getActivity(this, 0,
 //       new Intent(this, Main.class), 0);                
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, null, null);        
} 
```

称之为...

```
sendSMS("+4956421246", "test"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:04:59.497

试试这个

```
public void send_sms(String Docket_no,String mob_no)
{
    String phoneNo = mob_no;
    String sms = "Docket succesfully added.  Docket No :" + Docket_no;

    try {
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(phoneNo, null, sms, null, null);
        Toast.makeText(getApplicationContext(), "SMS Sent!",
                Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        Toast.makeText(getApplicationContext(),
                "SMS faild, please try again later!",
                Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }   
} 
```

# sql - 如何在 SQL Server 2005 中合并多行单列？

> ID：12818765
> 
> 赞同：1
> 
> 时间：2012-10-10T11:58:05.627
> 
> 标签：sql, sql-server, sql-server-2005

我从查询中得到如下表所示的输出

![在此处输入图像描述](../Images/a4cac75b0aab0d46cb45d71bbce39738.png)

现在我需要我的输出应该类似于下表

![在此处输入图像描述](../Images/e0be7faa88821f05c7423d9f00049128.png)

它将多行的公共字段合并到一个单元格中。

我怎样才能写一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:37:28.610

这种类型的格式化通常更适合在表示层或报告工具中执行，但这是在 T-SQL 中执行类似操作的一种方法：

```
select
    case when rownumber = 1 then cast(id as varchar(11)) else '' end as id
  , code
  , value
from (
  select
      *
    , id as idsort
    , row_number() over (partition by id order by code) as rownumber
  from yourtable
) as a
order by idsort, rownumber 
```

同样，这不会像 html 表格或任何东西那样显示，也不会有各种格式和对齐选项。

感谢 @bluefeet 设置[fiddle](http://sqlfiddle.com/#!3/c0bbc/20)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:16:42.163

目前尚不清楚您要做什么，但这会将代码和值列中的项目放在一行中：

```
select distinct id,
  stuff((select ', ' + code
        from yourtable t2
        where t1.id = t2.id
        for XML path('')),1,1,'')  code,
  stuff((select ', ' + cast(value as varchar(10))
        from yourtable t2
        where t1.id = t2.id
        for XML path('')),1,1,'')  value
from yourtable t1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c0bbc/9)

# asp.net-mvc - 如何在 Razor 中使 DropDownListFor 不可选

> ID：12818766
> 
> 赞同：2
> 
> 时间：2012-10-10T11:58:06.457
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在我的 Razor 视图中，我使用 DroDownList 我希望此控件不可选择。怎么做，（请张贴样本）？

```
 <div class="editor-field">
        @Html.DropDownListFor(x => x.CandidateId, Model.CandidatesList)
    </div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T12:07:27.807

您使用`disabled`具有 true 和 false 值的属性。

```
<div class="editor-field">
    @Html.DropDownListFor(x => x.CandidateId, Model.CandidatesList, new { disabled = "true" })
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:05:06.403

您可能希望查看 DropDownListFor 的覆盖，它采用 HTML 属性字典，并可能通过类似 'disabled = "true"' 的内容。

[http://msdn.microsoft.com/en-us/library/ee703436(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/ee703436(v=vs.108).aspx)

```
 <div class="editor-field">
        @Html.DropDownListFor(x => x.CandidateId, Model.CandidatesList, new { disabled = "true" })
    </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:04:51.397

```
@Html.DropDownListFor(x => x.CandidateId, Model.CandidatesList, 
                       new { @disabled = "disabled" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T10:22:54.600

你可以试试这个：

```
@Html.DropDownListFor(
    x => x.CandidateId,
    Model.CandidatesList,
    new { @disabled = "disabled" }
) 
```

但是提交后无法获取控制器中的下拉值。您可以使用隐藏字段来设置下拉值。

# database - 仅在 1 个数据库上的 VB 应用程序（不是 vb.net）

> ID：12818770
> 
> 赞同：0
> 
> 时间：2012-10-10T11:58:18.920
> 
> 标签：database, vb6, ms-access-2007

我只是想问一下，你怎么可能用 1 个数据库连接 2 个或多个 Visual Basic 应用程序。1 台计算机将充当服务器 pc，而另一台 pc 将只共享它的数据库（如果适用，在 Microsoft Access 上）。这是一个投票系统，类似于应用程序，选民可以访问电脑并从指定的电脑提交投票......

对不起，如果这是一个长篇大论，我只是想进一步澄清它..

到目前为止，我已经为此工作了将近 2 周……但仍然找不到解决方案。

非常感谢你..我希望你能分享你在这方面的专业知识..

笔记：

它是一个 Visual Basic 6.0 或 2010 驱动的应用程序...

非常感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:59:09.200

最简单的方法是在 Access 中创建数据库和表单，然后将 Access 数据库拆分为后端数据库和前端应用程序。这是 microsoft 关于如何在 Access 2010 中执行此操作的一个很好的链接。[http://office.microsoft.com/en-us/access-help/split-an-access-database-HA010342026.aspx](http://office.microsoft.com/en-us/access-help/split-an-access-database-HA010342026.aspx)。如果您决定升级数据库或前端应用程序，这将使您在未来变得更容易。似乎也更喜欢使用 vb 6，在 Access 中您可以使用与 VB 6 相比非常相似的 VBA

# javascript - 仅重绘最大值和最小值 - jqPlot

> ID：12818775
> 
> 赞同：0
> 
> 时间：2012-10-10T11:58:38.560
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jqplot

我正在尝试将 jquery datepicker 与 jqplot 插件结合使用。基本上，我正在使用默认值加载绘图，然后当按下按钮时，我试图用新的最大值和最小值重新绘制绘图。

我一直在阅读[文档](http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.replot)，但我似乎无法为我的问题找到明确的答案。这是我的代码：

```
 $(document).ready(function(){

                            var ajaxDataRenderer = function(url, plot, options) {
                                var ret = null;
                                $.ajax({
                                    async: false,
                                    url: url,
                                    type: "GET",
                                    dataType:"json",
                                    data: {metricName: ""},
                                    success: function(data) {
                                        ret = data;
                                    },
                                    error:function (xhr, ajaxOptions, thrownError){
                                        alert(xhr.responseText);
                                    }    
                                });
                                return ret;
                            };

                            //var jsonurl = "/reports/reportData.json";
                            var jsonurl = "/tenant/metrics/get.json";

                            var currentTime = new Date()
                            var month = currentTime.getMonth() + 1;
                            var day = currentTime.getDate();
                            var year = currentTime.getFullYear();
                            var today = month + "-" + day + "-" + year;

                            var currentDatePlus = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
                            var dayPlus = currentDatePlus.getDate()
                            var monthPlus = currentDatePlus.getMonth() + 1
                            var yearPlus = currentDatePlus.getFullYear()
                            var tomorrow = monthPlus + "/" + dayPlus + "/" + yearPlus;

                            function getLastWeek(){
                                var today = new Date();
                                var lastWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);
                                return lastWeek ;
                            }

                            var lastWeek = getLastWeek();
                            var lastWeekMonth = lastWeek.getMonth() + 1;
                            var lastWeekDay = lastWeek.getDate();
                            var lastWeekYear = lastWeek.getFullYear();

                            var lastWeekDisplay = lastWeekMonth + "/" + lastWeekDay + "/" + lastWeekYear;

                            var datepickerBegin = $("#datepicker_start").val();
                            var datepickerEnd = $("#datepicker_to").val();

                            $('#applyBtn').click( function() {
                                // Check to make sure the datepicker isn't empty
                            if ($("#datepicker_start").val() !== "" && $("#datepicker_to").val() !== "") {

                                var datepickerBegin = $("#datepicker_start").val();
                                var datepickerEnd = $("#datepicker_to").val();
                                alert(datepickerBegin);
                                alert(datepickerEnd);
                                //redraw the plot now.
                                plot2.reInitialize({});
                                plot2.redraw({});
                                //
                                alert('hasd')

                                }
                            })

                                if (datepickerBegin == "") {
                                    var startingDate = lastWeekDisplay;
                                } else {
                                    var startingDate = datepickerBegin;
                                }

                                if (datepickerEnd == "") {
                                    var endingDate = tomorrow;
                                } else {
                                    var endingDate = datepickerEnd;
                                }

                            //

                            var plot2 = $.jqplot('chart2', jsonurl,{
                                title: "",
                                dataRenderer: ajaxDataRenderer,
                                dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                axes: {
                                    xaxis: {
                                        //'numberTicks' : 7,
                                        min: startingDate,
                                        max: endingDate,
                                        renderer:$.jqplot.DateAxisRenderer,
                                        rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                        tickInterval: '1 day',
                                        tickOptions:{formatString:'%#m/%#d/%Y'

                                        }
                                        //rendererOptions: {sdaTickInterval: [1, 'month']}

                                    },
                                    yaxis: {
                                        label: "MB",
                                        tickOptions:{formatString:'%d '},
                                        // Comment the next line out to allow negative values (and therefore rounded ones)
                                        min: 0
                                    }

                                },
                                highlighter: {
                                    show: true,
                                    sizeAdjust: 7.5
                                }
                            });

                        }); 
```

有人可以帮我吗？我可能只是在逻辑上也存在根本缺陷。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:43:43.937

好的，所以答案，无论多么丑陋，都是在点击事件上完全重新创建情节。这是代码的样子：

```
 $('#applyBtn').click( function() {
                                // Check to make sure the datepicker isn't empty
                            if ($("#datepicker_start").val() !== "" && $("#datepicker_to").val() !== "") {

                                var datepickerBegin = $("#datepicker_start").val();
                                var datepickerEnd = $("#datepicker_to").val();

                                        //Recreate the plot
                                        var plot2 = $.jqplot('chart2', jsonurl,{
                                        title: "",
                                        dataRenderer: ajaxDataRenderer,
                                        dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                        axes: {
                                            xaxis: {
                                                //'numberTicks' : 7,
                                                min: datepickerBegin,
                                                max: datepickerEnd,
                                                renderer:$.jqplot.DateAxisRenderer,
                                                rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                                tickInterval: '1 day',
                                                tickOptions:{formatString:'%#m/%#d/%Y'

                                                }
                                                //rendererOptions: {sdaTickInterval: [1, 'month']}

                                            },
                                            yaxis: {
                                                label: "MB",
                                                tickOptions:{formatString:'%d '},
                                                // Comment the next line out to allow negative values (and therefore rounded ones)
                                                min: 0
                                            }

                                        },
                                        highlighter: {
                                            show: true,
                                            sizeAdjust: 7.5
                                        }
                                    });
                                //redraw the plot now.
                                //plot2.reInitialize({});
                                plot2.replot({});

                                }
                            }) 
```

我无法得到任何工作的答案——但是，如果有人有意见或解决方案，请告诉我！

# android - Viewpager 未正确保留视图

> ID：12818783
> 
> 赞同：4
> 
> 时间：2012-10-10T11:59:05.270
> 
> 标签：android, android-viewpager, retain, fragmentpageradapter

我有一个 SherlockFragment，它正在膨胀一个包含 viewpager 的布局，它允许我滑动到我创建的许多选项卡片段。
在第一次将此片段附加到我的活动时，一切正常且符合预期，但如果我返回并重新输入片段，viewpager 或其适配器*（看起来像这样：“TabAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener")*导致问题：

1.  存储在viewpager中的fragment的视图是不可见的
2.  实际上我有 4 个选项卡，如果我设置“setOffscreenPageLimit”，无论我在做什么，在娱乐的 viewpager 中都看不到任何东西；
    如果**未**设置“setOffscreenPageLimit”，则仅当我向左或向右滑动至少两个选项卡时才会显示 viewpager 内的视图。
3.  **此外，如果未使用**“setOffscreenPageLimit”，寻呼机现在似乎在滑动时跳过了一些选项卡。

感谢您提供任何可以解决此问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:52:33.640

我遇到了同样的问题。经过一番研究，我发现了以下线程：

[http://code.google.com/p/android/issues/detail?id=19001](http://code.google.com/p/android/issues/detail?id=19001)

答案 #10 解决了我的问题。

# android - 解析 json 数据并在列表视图中显示

> ID：12818787
> 
> 赞同：2
> 
> 时间：2012-10-10T11:59:11.787
> 
> 标签：android, json, android-listview

我的项目是从服务器获取 json 数据并在运行代码时显示在列表视图中我的代码不起作用：

```
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, this.datadrinks()));

}
public ArrayList<String> datadrinks()
{
    ArrayList<String> listItems = new ArrayList<String>();
    try {
        URL twitter = new URL("http://10.0.2.2:50667/expression%20web4/GetAllDrinkItems.ashx");
        URLConnection tc = twitter.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream()));

        String line;
        while ((line = in.readLine()) != null) {
            JSONObject ja = new JSONObject(line);
            JSONArray jobj=ja.getJSONArray("lstDrinkItems");

        for (int i = 0; i < jobj.length(); i++) {
            JSONObject jo = jobj.getJSONObject(i);
            listItems.add(jo.getString("Name"));
        } 
        }
    }catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return listItems;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:09:10.343

我在您的代码中找不到明显的错误。

但是你在设计上有一个很大的问题。您正在 UI 线程上发出服务器请求。你不应该那样做。在较新版本的 Android 上，您甚至不允许这样做。

您应该改用专门的类，例如[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)：

*   `doInBackground`：发出请求并解析响应
*   `onPostExecute`：填充列表视图

希望这对您未来的项目有所帮助！

# java - 哪个 Java 集合允许廉价追加？

> ID：12818789
> 
> 赞同：6
> 
> 时间：2012-10-10T11:59:19.497
> 
> 标签：java, list

我正在用 Java 搜索一个列表数据结构，它允许廉价地附加长列表。我试过 LinkedList 但我在[addAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html#addAll%28java.util.Collection%29)的文档中发现，一个迭代器用于附加两个列表。这意味着附加的列表在操作期间被克隆。迭代器遍历整个列表，返回每个元素。是否有任何可用的集合在附加两个列表时省略了迭代？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T12:07:08.540

您可以使用[Guava 的](https://code.google.com/p/guava-libraries/) [Iterables.concat](http://docs.guava-libraries.googlecode.com/git-history/v10.0.1/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable,%20java.lang.Iterable%29)方法来创建连接的 Iterable View..

```
Iterable<T> combined = Iterables.concat(list1, list2); 
```

*   这**不会将元素**从一个列表复制到另一个列表。
*   因此，它**不会更改**您的任何列表..
*   此外，**这不会创建**一个新列表（它会创建一个`Iterable`不是列表）

基本上它创建了一个`Iterable`你可以通过它迭代`two`列表背靠背（它从list1然后从list2迭代元素..

**注意**： - **如果您想要一个列表**作为 的串联，那么这可能对您没有多大帮助..因为它不会创建一个列表，而是一个 Iterable.. 在这种情况下，除了列表`two lists`之外，您别无选择`Iterating`和`copy`你的每一个参考..

从[文档](http://docs.guava-libraries.googlecode.com/git-history/v10.0.1/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable,%20java.lang.Iterable%29)： -

> 它将两个可迭代对象组合成一个可迭代对象。返回的可迭代对象有一个迭代器，它遍历 a 中的元素，然后是 b 中的元素。直到必要时才会轮询源迭代器。当对应的输入迭代器支持时，返回的迭代器的迭代器支持 remove()。

你也有这个方法的一个**`var-args`版本..**[参见文档](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable%29)..这可以接受任意数量的列表，并返回可以按顺序迭代这些列表的 Iterables..所以，你可以这样做..

```
Iterable<T> combined = Iterables.concat(list1, list2, list3, list4, ...); 
```

这个链接 --> [google-guava-libraries-essentials](http://www.javacodegeeks.com/2011/09/google-guava-libraries-essentials.html)你可能也感兴趣..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T12:02:44.670

并非如此，因为所有“附加”操作都不会对基础集合做出任何假设。从技术上讲，可以直接附加两个链表，但附加必须是通用的，因此它使用迭代。

不允许直接连接的另一个很好的理由是，在追加更改一个列表后也会影响另一个列表，我确信这不是一个理想的属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T12:03:13.113

[ArrayList 中的addAll](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll%28java.util.Collection%29)将其转换为 Array，然后使用系统调用进行复制（[System.arraycopy](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)）。这应该比在 java 中循环更快，因为它是本机的，我认为没有便宜的附加程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T12:05:16.747

可能是 ArrayList 的 addAll 应该更快，因为它不迭代，而是使用 System.arrayCopy。代码看起来像

```
public boolean addAll(Collection<? extends E> c) {
    Object[] a = c.toArray();
        int numNew = a.length;
    ensureCapacity(size + numNew);  // Increments modCount
        System.arraycopy(a, 0, elementData, size, numNew);
        size += numNew;
    return numNew != 0;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T12:15:02.287

> 这意味着附加的列表在操作期间被克隆。

创建迭代器不会克隆集合。

在大多数情况下，addAll 方法调用 toArray() 以确保以原子方式提取数据，从而将集合的元素克隆为数组，这很可能使用 Iterator 来完成。

> 是否有任何可用的集合在附加两个列表时省略了迭代？

不，但如果这*真的很*重要，您可以自己迭代集合。

* * *

最有效的可能是

```
List<E> list1 = ... random access list ...
List<E> list2 = ... random access list ...

for(int i = 0; i < list2.size(); i++)
    list1.add(list2.get(i)); 
```

这不会创建任何对象，并且有`O(n)`时间`n`list2 的大小在哪里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T12:04:09.990

即使您确实找到了这样一个集合类，您也不能保证它会在未来的 Java 版本中继续以这种方式工作。这是因为这是 Collection 接口中未指定的行为，因此受类开发人员的突发奇想影响。

当然，您可以编写自己的集合类，但即便如此，您也会对其他集合类的行为做出假设

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T12:05:22.803

`addAll`方法的默认实现`AbstractCollections`使用迭代器添加**，但`addAll`方法在提供自定义特定实现的子类中被覆盖**

像

*   ArrayList 使用`System.arraycopy`
*   LinkedList 使用循环遍历元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T12:06:55.777

我认为标准 API 没有办法，但根据您的需要，您可以尝试自己实现一个。例如，您可以实现一个内部有一个集合引用列表，每次调用 addAll 方法时添加。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T12:21:42.193

通过这种行为，添加到第一个列表的列表将被消耗（即修改）或导致第二个列表成为具有各种陷阱的较大列表的子列表（例如，如果您添加两次列表会发生什么......），

addAll 有一个隐含的 const 参数（意味着第二个列表将在多次调用中保持不变），因此除非您自己滚动，否则此行为将不存在

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-10T12:32:55.840

我会简单地采用 ArrayList，并愉快地将我的东西添加到它。选择的 List 实现如何执行 addAll() 操作并不重要，迭代或 toArray 都相对便宜，而且这不太可能成为性能瓶颈（假设您的应用程序*对*列表元素进行了有用的工作，而不仅仅是创建列表...）。

addAll() 中的迭代确实没有办法，如果你想要一个包含 N 个源列表中的元素的独立列表，则*必须*将元素引用复制到某个地方（你可以在 addAll() 之后更改源列表，但是不得影响已联系的列表，因此副本是不可避免的）。

如果你真的*不需要*List 语义（独立于源），那么使用已经建议的 Guava 创建多个列表的*视图*（或者滚动你自己的，如果你不想要依赖，它不是火箭科学） .

# javascript - 选择框的选择检查

> ID：12818795
> 
> 赞同：1
> 
> 时间：2012-10-10T11:59:53.147
> 
> 标签：javascript, jquery

我卡在检查 StartAll 和 StopAll

我想要实现的是->

1> 选中 All 复选框后，所有功能（stopall 除外）都将被选中和禁用。

2>在选择 Stopall 时，所有功能将被取消选择并禁用。

3>B,D & E 的值将在文本框中选择。

这是 jsfiddle 链接：http: [//jsfiddle.net/bigzer0/PKRVR/5/](http://jsfiddle.net/bigzer0/PKRVR/5/)

```
<div align="center" id="checkboxes">
<input type="checkbox" name="startall" data-name="Startall" class="check" id="check" value="all"> All &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="stopall" data-name="Stopall" class="check" id="check" value="stopall"> STOPall &nbsp;&nbsp;
<input type="checkbox" name="apple" data-name="Apple" class="check" id="check" value="a"> Apple &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="ball" data-name="Ball" disabled="disabled" checked="checked"  id="check" value="b"> Ball
    &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="cat" data-name="Cat" class="check" id="check" value="c"> Cat &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="dog" data-name="Dog" checked="checked" disabled="disabled"  id="check" value="d"> Dog
    &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="elephant" data-name="Elephant" disabled="disabled" checked="checked"  id="check" value="e">
    Elephant &nbsp;&nbsp;&nbsp;
</div>

<input type="text" name="policyName" id="policyName" title="Policy Name" class="cpolicyname" value="Start" readonly="readonly" >

<input type="text" name="features" title="Policy Features" class="cfeatures" id="features" readonly="readonly" size="60"> 
```

我的（噩梦）jquery：

```
$(document).ready(function() {
    $('.check').click(function(){
        $("#policyName").val('Start');
        $("#features").val('');
                  $(".check").each(function(){
            if($(this).prop('checked')){

                $("#policyName").val($("#policyName").val() + $(this).val());    
                $("#features").val($("#features").val() + $(this).data('name'));
                }            
        });

     });
}); 
```

任何意见都将受到赞赏和欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:09:36.673

你为什么还要这样做？您甚至不检查单击了哪个按钮。为 Stopall 和 Startall 以外的复选框提供另一个类，如“checkable”

```
$('.check').click(function(){
    if ($(this).attr('name')=='Stopall') {
        $('.checkable').attr('disabled',true).attr('checked',false);

    } else if ($(this).attr('name')=='Startall') {
        $('.checkable').attr('disabled',true).attr('checked',true);
    }
} 
```

您可以像这样在 css 上提供多个类：

```
 <input type="checkbox" name="anything" class="class1 class2 class3" /> 
```

我认为其余的真的在你身上；）

# c++ - 在 VC++ 中从 MSI（数据库）中定位文件路径

> ID：12818796
> 
> 赞同：2
> 
> 时间：2012-10-10T11:59:52.960
> 
> 标签：c++, visual-c++

我需要计算 MSI 中文件的相对路径。目前，我正在查询*File*表以获取 FileName 对应的 Component。然后，我正在使用这个组件来查询组件表并找到 Directory_。接下来我用这个Directory_查询Directory表，找到Directory_的Parent Directory。

随后，我一直在 Directory 表中查询 Parent_Directory 到我以前的 Parent 并构建文件的路径，直到我点击 $TARGETDIR。这里我只是替换 $TARGETDIR 的属性值来获取绝对路径。

我的问题是，由于所有这些都需要跨 MSI 数据库中的表进行大量查询，因此会对性能产生相当大的影响。C++ 中是否有任何 API 或 VC++ 中的任何库以不同的方式实现它，或者 Microsoft 是否提供类似（但现成的）解决方案？将非常感谢任何形式的帮助！

谢谢，香卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:03:38.260

如果我很好地理解了您的问题，那么您需要使用字符串和字符串操作。C++ 在字符串类中提供了这个。在替代方案中，Qt 提供了一些东西来处理文件路径。

# gnuplot - 如何在 Gnuplot 的一个文件中绘制多个带有标题的数据集？

> ID：12818797
> 
> 赞同：36
> 
> 时间：2012-10-10T12:00:03.833
> 
> 标签：gnuplot

假设我有一个看起来像这样的文件（**注意双换行符**）：

```
"p = 0.1"
1 1
3 3
4 1

"p = 0.2"
1 3
2 2
5 2 
```

是否可以让 Gnuplot 将这两个数据集绘制在一个图中，并在每个数据集的第一行给出标题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-10T14:31:53.233

这绝对是可能的，您的数据文件已经是正确的格式。您正在寻找的功能是内置`columnheader(N)`的，它读取第 N 列顶部的数据并将其用作绘图标题：

```
 plot 'test.dat' i 0 u 1:2 w lines title columnheader(1),\
      'test.dat' i 1 u 1:2 w lines title columnheader(1) 
```

可以使用迭代来浓缩：

```
plot for [IDX=0:1] 'test.dat' i IDX u 1:2 w lines title columnheader(1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-06T11:24:37.633

这是[Bruce_Warrior](https://stackoverflow.com/a/29495496/482758)和[Ciro Santilli 的](https://stackoverflow.com/a/39211206/482758)答案，但没有中间`stats`：

```
# plot.gpi
datafile = ARG1
plot for [i=0:*] datafile index i using 1:2\
with lines title columnheader(1) 
```

`for`循环可以直接遍历文件中的所有数据集。它适用于 gnuplot 5.0.5，但我不确定何时`for`获得此功能。它记录在[5.0 手册](http://www.gnuplot.info/docs_5.0/gnuplot.pdf#section*.184)中，但没有记录[在 4.6 手册](http://www.gnuplot.info/docs_4.6/gnuplot.pdf#section*.180)中。

除非线条颜色应由`linecolor variable`（根据布鲁斯的回答）消耗的第三个输入列确定，否则 gnuplot 将自动分配不同的颜色和线条样式。在这种特定情况下`using 1:2`也可以省略。

```
$ gnuplot --version
gnuplot 5.0 patchlevel 5
$ gnuplot --persist -c plot.gpi test.dat 
```

[![情节](../Images/2d8609ab6c64bc320069f735330b7fb9.png)](https://i.stack.imgur.com/I1KrN.png)

`test.dat`是

```
"p = 0.1"
1 1
3 3
4 1

"p = 0.2"
1 3
2 2
5 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-07T15:38:03.787

基于 andyras 给出的答案（[答案 1](https://stackoverflow.com/questions/12818797/gnuplot-plotting-several-datasets-with-titles-from-one-file/12820073#12820073)和[答案 2](https://stackoverflow.com/a/14825558/783646)）自动化所有过程的解决方案是使用：

```
datafile = 'test.dat'
stats datafile
plot for [IDX=1:STATS_blocks] datafile index (IDX-1) u 1:2 w lines t\ 
columnheader(1) lc variable 
```

这样，脚本会自动检测数据块的数量，并使用不同的颜色和在每个数据块的第一行中定义的相应标题进行绘图。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-29T16:46:10.117

**gnuplot 5.1 (2016/08/28)**

这类似于[https://stackoverflow.com/a/29495496/895245](https://stackoverflow.com/a/29495496/895245)但对更高版本进行了一些修复。

[https://stackoverflow.com/a/43819870/895245](https://stackoverflow.com/a/43819870/895245)教会了我`for [i=0:*]`分配的语法，`stats`因此更好一点。

脚本：

```
datafile = 'test.dat'
stats datafile nooutput
plot for [IDX=0:STATS_blocks-1] \
    datafile \
    index IDX \
    using 1:2 \
    with lines \
    title columnheader(1) 
```

测试数据：

```
a
1, 1
2, 2
3, 3

"b"
1, 1
2, 4
3, 9

"c, c"
1, 1
2, 8
3, 27 
```

输出：

![](../Images/c14339e44e838702a82c2879d9e1c1f4.png)

这适用于 gnuplot 2016/08/28，稍后将成为 gnuplot 5.1，但不适用于 gnuplot 5.0.3 (Ubuntu 16.04)，因为在 5.0.3 中，`stats`由于列标题不是有效数据，该命令会出错。而在 2016/08/28，它只是一个警告。

我在以下位置询问了如何删除警告：[https ://groups.google.com/forum/#!topic/comp.graphics.apps.gnuplot/Pi4aBE2PwZ8](https://groups.google.com/forum/#!topic/comp.graphics.apps.gnuplot/Pi4aBE2PwZ8)

使用如下评论：

```
#a
1, 1
2, 2
3, 3 
```

在我测试过的任何一个版本中都不起作用，它只是被忽略了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T13:06:44.050

稍微修改您的数据集（以便标题作为注释给出）：

```
#"p = 0.1"
1 1
3 3
4 1

#"p = 0.2"
1 3
2 2
5 2 
```

您可以将这两个数据集绘制为单独的线，如下所示：

```
plot 'data.dat' i 0 t "p = 0.1", '' i 1 t "p = 0.2" 
```

plot 命令的`index`（`i`简称）选项告诉 gnuplot 绘制第`i`th 个数据集。我找不到让 gnuplot 自动从标题中获取标题的方法，这就是为什么我使用`title`（`t`简称）选项手动指定它们的原因。

# css - 如何使用 Div 标签而不是表格

> ID：12818798
> 
> 赞同：0
> 
> 时间：2012-10-10T12:00:09.820
> 
> 标签：css, html

> **可能重复：**
> [如何仅使用 <div> 标签和 Css 创建表](https://stackoverflow.com/questions/3053205/how-create-table-only-using-div-tag-and-css)

我的 jsp 页面中有一个包含 1000 条记录的表。在 IE-8 中执行制表符/输入操作时，浏览器响应缓慢。因此，我想用 div 标签更改所有表格标签，这可能会加快响应速度。

如何在 html 中更改为下表代码的 div 标签。

```
<div style="overflow: auto; height: 240px;">
                <TABLE BORDER=0 CELLSPACING=2 CELLPADDING=2 WIDTH="100%">
                    <TR>
                        <TD ALIGN="CENTER">
                            <TABLE BORDER=0 CELLSPACING=2 CELLPADDING=2>
                                <TR>
                                    <TH ALIGN="left" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>AAAAA</B>
                                    </TH>
                                    <TH ALIGN="left" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>BBBBBB</B>
                                    </TH>
                                    <TH ALIGN="left" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>CCCCC</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>DDDDDD</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>EEEEEEE</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>${aaaaa}</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>${bbbbb}</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>Next</B>
                                    </TH>
                                    <TH ALIGN="right" VALIGN=MIDDLE HEIGHT="20" BGCOLOR="#C0C0C0">
                                        <B>Ready</B>
                                    </TH>
                                </TR>

                                <c:forEach items="${items}" var="item" varStatus="status">                              
                                    <TR>
                                        <TD ALIGN="right" width=120 VALIGN=MIDDLE HEIGHT="20">
                                            ${aaaaa}
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            ${bbbbbb}
                                        </TD>
                                        <TD ALIGN="left" VALIGN=MIDDLE HEIGHT="20">
                                            ${cccccc}
                                        </TD>
                                        <TD BGCOLOR="gray" ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="total" SIZE="7" MAXLENGTH="7"
                                                VALUE="0">
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="tbHd" SIZE="7"
                                                MAXLENGTH="7" VALUE="0">
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="tbHd" SIZE="7"
                                                MAXLENGTH="7" VALUE="0">
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="tbHd" SIZE="7"
                                                MAXLENGTH="7" VALUE="0">
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="tbHd" SIZE="7"
                                                MAXLENGTH="7" VALUE="0">
                                        </TD>
                                        <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                            <input type="text" NAME="tbHd" SIZE="7"
                                                MAXLENGTH="7" VALUE="0">
                                        </TD>
                                    </TR>

                                </c:forEach>
                                <TR>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                        <B>Total:</B>
                                    </TD>
                                    <TD ALIGN="right" VALIGN=MIDDLE HEIGHT="20">
                                        <input type="text" NAME="tbTotal" SIZE="7"
                                            MAXLENGTH="7" VALUE="0">
                                    </TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                    <TD></TD>
                                </TR>

                            </TABLE>
                        </td>
                    </tr>
                </table>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:25:04.250

根据您对待/样式化`div`s 的方式，您的页面不一定会渲染得更快，而且看起来它会使其语义和可访问性降低。相反，您可能想尝试将以下规则添加到样式表中：

```
table { table-layout: fixed } 
```

它有一些缺点，但它可能会渲染得更快。（此外，在使用 s 时，您会遇到同样的缺点`div`；同样，这取决于您对待/设计它们的方式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:06:42.920

使用 CSS 属性 display:table 和 display:table-row 和 display:table-column 设置 div 标签的样式并调整它们以使其看起来像一个表格

但是看看这篇文章，它有一个例子 [How create table only using <div> tag and Css](https://stackoverflow.com/questions/3053205/how-create-table-only-using-div-tag-and-css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:04:02.693

尝试这个

```
<div style="float: left; width: 30px; height: 100%; background-color: green;">left</div>
<div style="float: right; width: 30px; height: 100%; background-color: blue;">right</div>
<div style="margin-left: 30px; margin-right: 30px; height: 100%; background-color: yellow;">Content!...</div>​ 
```

演示[http://jsfiddle.net/DrFhT/](http://jsfiddle.net/DrFhT/)

# java - 如何使用java（Applet）获取系统信息？

> ID：12818799
> 
> 赞同：0
> 
> 时间：2012-10-10T12:00:18.640
> 
> 标签：java, applet, system

我想获取一些特定的系统信息，例如；处理器速度、处理器系列、操作系统版本（例如：“5.1 Service Pack 1”）、颜色深度、系统目录。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:14:11.410

使用`System.getProperties()`哪个返回`java.util.Properties`对象。这包含所有系统属性。查看[Java API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getProperties%28%29)了解更多信息，并查看所有需要的属性可供您使用。

# android - 我应该在生产代码中留下蓝牙反射黑客吗？

> ID：12818800
> 
> 赞同：22
> 
> 时间：2012-10-10T12:00:20.587
> 
> 标签：android, reflection, bluetooth

我正在一个项目中工作，我需要通过蓝牙连接到打印机。打印机制造商声明只有具有 SPP（串行端口配置文件）的 android 手机才能与打印机连接。

这是我最初打开连接的方式：

```
 UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); //SPP long UUID
        BluetoothSocket socket = device.createRfcommSocketToServiceRecord(uuid); 
```

从 JellyBean 开始，使用 UUID 是使用 Android 公共 API 打开 RFCOMM 连接的唯一方法。之前在不需要 UUID 的 BlackBerry 和 JavaME 中使用 SPP 连接，我发现这有点奇怪。UUID 是关于服务发现的，即使用 SDP 查询设备中存在的服务。我真的不需要启动发现，因为我已经提前配对了我的打印机，而且我知道它支持 SPP。然而，这正是`BluetoothDevice.createRfcommSocketToServiceRecord`方法和不安全版本所做的。这是 SPP 堆栈，我们可以在其中看到 SDP 是同一层的不同协议，因此应该可以使用 RFCOMM 而无需先启动发现：

```
 -----------------------------------
        |        My Application           |
        ----------------------------------- 
        |     Serial Port Emulation       |
        |          or other API           |
        -----------------------------------
        |      RFCOMM          |    SDP   |
        -----------------------------------
        |  LMP   |   L2PCAP               |
        -----------------------------------
        |           Baseband              |
        ----------------------------------- 
```

我开始在一些旧的 HTC 设备上测试我的应用程序没有问题。后来在三星手机上测试，多台设备无法打开连接。~~根据制造商和第 3 方规范，这些手机据称不支持 SPP 配置文件~~（*编辑：第 3 方规范将 SPP 列为支持，并且制造商规范不够准确*）。抛出了 IOException（服务发现失败），我遵循了这个问题中显示的方法：

[在 Android 上使用蓝牙的服务发现失败异常](https://stackoverflow.com/q/3397071/813951)

那里提出的解决方案是使用反射黑客，如下所示：

```
 Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
        BluetoothSocket socket = socket = (BluetoothSocket) m.invoke(device, 1); 
```

黑客对我有用。令人惊讶的是，这个`BluetoothDevice`类中的方法是公共的，但它通过@hide 注释从 API 中删除。这是 JellyBean 的源代码：

```
 /**
         * Create an RFCOMM {@link BluetoothSocket} ready to start a secure
         * outgoing connection to this remote device on given channel.
         * <p>The remote device will be authenticated and communication on this
         * socket will be encrypted.
         * <p> Use this socket only if an authenticated socket link is possible.
         * Authentication refers to the authentication of the link key to
         * prevent man-in-the-middle type of attacks.
         * For example, for Bluetooth 2.1 devices, if any of the devices does not
         * have an input and output capability or just has the ability to
         * display a numeric key, a secure socket connection is not possible.
         * In such a case, use {#link createInsecureRfcommSocket}.
         * For more details, refer to the Security Model section 5.2 (vol 3) of
         * Bluetooth Core Specification version 2.1 + EDR.
         * <p>Use {@link BluetoothSocket#connect} to initiate the outgoing
         * connection.
         * <p>Valid RFCOMM channels are in range 1 to 30.
         * <p>Requires {@link android.Manifest.permission#BLUETOOTH}
         *
         * @param channel RFCOMM channel to connect to
         * @return a RFCOMM BluetoothServerSocket ready for an outgoing connection
         * @throws IOException on error, for example Bluetooth not available, or
         *                     insufficient permissions
         * @hide
         */
        public BluetoothSocket createRfcommSocket(int channel) throws IOException {
            return new BluetoothSocket(BluetoothSocket.TYPE_RFCOMM, -1, true, true, this, channel,
                    null);
        } 
```

我不明白为什么以这种方式从 API 中删除公共方法。但是让这个appart，这个方法和官方支持的使用UUID的方法都是薄信封，调用`BluetoothSocket`具有不同参数的相同构造函数：

```
 public BluetoothSocket createRfcommSocketToServiceRecord(UUID uuid) throws IOException {
            return new BluetoothSocket(BluetoothSocket.TYPE_RFCOMM, -1, true, true, this, -1,
                    new ParcelUuid(uuid));
        } 
```

在源代码中挖掘更多信息，我意识到两者都打开了 RFCOMM 连接，但 UUID 方法会启动发现，而隐藏的则不会。

总而言之，反射黑客在我测试过的每台设备上都能完美运行，从 OS 2.2 到 4.1。*编辑：“故障”设备确实支持 SPP，只是他们对 BT 堆栈的自定义实现弄乱了发现过程；还有其他错误，例如在 ICS 中显示已配对设备的配对对话框。使用反射调用这个隐藏的 API 可以解决所有这些错误或不同制造商引入的不同行为*。

**我应该将黑客保留在生产代码中吗？有没有办法通过公共 API 实现相同的目标？**

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T13:34:23.833

很棒的问题。基本上你可以随心所欲地使用反射。即使我做了类似的事情来计算应用程序的启动时间，通过反射获得了一个方法，它的工作方式就像从 FroYo 到 Jelly Bean 的魅力。你唯一需要注意的是，

*   由于它不是公共 API，google 可以随时更改它而不会发出警告
*   如果它发生变化，使用它的系统应用程序或 HAL 将被相应地修改，而不会影响任何应用程序。

您需要注意哪些地方？

> 此方法的参数将来可能会被修改。

因此，您需要在每个新的操作系统版本中检查这一点，以使您的应用程序不会中断。否则，您不必担心使用此 hack。当 API 未公开内容时，许多应用程序会使用此类 hack。

# android - Android ActivityGroup 生命周期已弃用？

> ID：12818803
> 
> 赞同：0
> 
> 时间：2012-10-10T12:00:29.897
> 
> 标签：android, android-activity, activitygroup, activity-lifecycle

因此，从几天开始，我在整个应用程序中看到有关`super.onPause()`,`super.onDestroy()`等的警告`super.onResume()` 已被弃用。我想问的是，这是否意味着将来这些方法不会像以前那样被调用……这是控制和调用我想在这些方法中使用或初始化的特定事物的新方法。碎片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:04:51.703

阅读[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)上的文档。这是一个相关的引用（您似乎已经阅读过，但未来的读者可能不会）：

> 此类已弃用。改用新的 Fragment 和 FragmentManager API；这些也可以通过 Android 兼容包在旧平台上使用。

如果我是你，我会`ActivityGroup`尽可能更换使用（即假设它们会按预期停止工作）。

# html - achor标签中的tabindex，下沉图像大小

> ID：12818810
> 
> 赞同：0
> 
> 时间：2012-10-10T12:00:44.457
> 
> 标签：html, css, logging

```
<a id="advertiser_modal" class="min-button in-block" tabindex="-1"> 
 <img width="9" height="10" src="/themes/default/css/images/new-window-icon.png"> Select an Advertiser
</a> 
```

在上面的 html 代码中，我将 img 包裹在锚标记中，具有 tabindex，当我单击 new-window-icon.png 时，图像的大小会下沉，

但是当我尝试删除tabindex时，

```
<a id="advertiser_modal" class="min-button in-block"> <!--tabindex="-1"-->
  <img width="9" height="10" src="/themes/default/css/images/new-window-icon.png"> Select an Advertiser
</a> 
```

现在，当我单击图像 new-window-icon.png 时，它没有下沉，工作正常，但我希望那个 tabindex 在那里，

请有任何建议，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:08:29.027

添加`outline:none !important`

```
.min-button{outline: none !important; }​ 
```

演示[http://jsfiddle.net/jQLd4/](http://jsfiddle.net/jQLd4/)

感谢您的回复，只是它无法解决我的问题，当我单击图像时，同样的事情正在发生，我的意思是，图像正在下沉。

使用的 CSS

```
.min-button {
    -moz-border-bottom-colors: none !important;
    -moz-border-left-colors: none !important;
    -moz-border-right-colors: none !important;
    -moz-border-top-colors: none !important;
    background: -moz-linear-gradient(center top , #EF8C41 0%, #D97726 100%) repeat scroll 0 0 transparent;
    border-color: #DE8038 #DE8038 #A3563C !important;
    border-image: none !important;
    border-style: solid !important;
    border-width: 1px !important;
    margin-left: -12px;
} 
```

# maven - 如何使用 maven 从 ivy 存储库下载工件

> ID：12818812
> 
> 赞同：8
> 
> 时间：2012-10-10T12:00:47.510
> 
> 标签：maven, ivy, dependency-management, pom.xml, artifactory

我们正在从 ivy 转向 maven。我们在工件中有很多使用 ivy 发布的工件，因此工件文件夹/路径结构类似于

1.  `artifactory/libs-release/[organization]/[module]/[revision]/[type]s/[module](-[classifier]).[ext]`

2.  `artifactory/libs-release/[organization]/[module]/[revision]/[type]s/ivy.xml`

但是，当我们在 maven pom.xml 中添加依赖项时，依赖项名称将类似于`com.abc.xyz`. 但是 maven 试图查看路径`com/abc/xyz/`文件夹，而我们在 artifactory 中有工件`com.abc.xyz/my-artifact/1.0.0/jars/my-artifact.jar`

我如何告诉 maven (pom.xml) 阅读和理解工件中的路径。

我尝试使用 ivy-maven-plugin 但它为某些 groovy 类提供了 classNotFound 错误，即使我在本地 m2 存储库文件夹中需要 groovy jar。

*** 回答** 好，这就是我们所做的。我们手动创建了文件夹，然后我们现在使用 makepom 插件将 ivy.xml 转换为 maven pom.xml 感谢您的所有建议，欢迎更多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:13:05.693

你为什么要尝试让 Maven 适应 Ivy。Ivy 在那里利用和模仿当时 Maven 已经拥有的东西。

由于 Ivy 可以读取 Maven 存储库，但不能相反，我建议您使用[Nexus](http://nexus.sonatype.org)或[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)设置自己的本地网络（或公司）Maven 存储库。然后您可以将工件一一上传到那里，并将这些 Ivy 构建标准化以指向新的 Maven 存储库。这在开始时需要一些额外的努力，但我相信它会在以后得到回报。

还有另一种选择，将 Maven 配置为读取非标准存储库布局，但你为什么要走这条路呢？一旦你选择了这条路，一切都会变得更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T18:02:42.790

看看我的[Ivy 集成包](https://github.com/qazwart/ivy.dir)。`jar.macro`特别方便，因为它会在您构建 jar 时自动构建`pom.xml`。`jar`宏与任务非常相似。

我所做的是使用我的每个 jar 构建 pom.xml，然后使用`mvn deploy:deploy-file`将我的 jar 部署到 Maven 存储库。

```
mvn deploy:deploy-file -Dfile=$jar_file
    -D pomFile=pom.xml
    -D repositoryId=$repo_id
    -D url=$repo_url 
```

# java - Android Gridview - 将子布局方向更改为向下然后穿过？

> ID：12818815
> 
> 赞同：2
> 
> 时间：2012-10-10T12:01:14.593
> 
> 标签：java, android, gridview

如果这是一个菜鸟问题，我深表歉意。另外，我用谷歌搜索了很多，找不到答案。我的主要语言是 C#，刚开始学习为 Android 编程。

默认情况下，GridView 似乎从左到右然后向下排列其子控件，如下所示：

*   1 2 3 4 5
*   6 7 8 9 0
*   abcde

是否有可能让 GridView 将其控件放下然后像这样横穿？：

*   1 4 7 0 ℃
*   2 5 8 广告
*   3 6 9 是

我有固定数量的要显示的数组项，因此我只需将这些项添加到数组中的适当位置，它就会像这样显示。但是我想知道是否有更简单的方法可以让 GV 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:57:22.120

做你想要实现的最简单的方法是使用位置系统。

你只需要你的 GridView，然后 getChildAt()。您使用的 int 是孩子的位置。然后，您只需使用该位置的 int 即可。

01234

56789

请记住，GridView 总是从 0 而不是 1 开始。

获取孩子编号 8 的代码示例：

```
View theChild =gridView.getChildAt(7); 
```

如果您想在 Child 中获取某些内容，请改用：

```
SomeView theChild = (SomeView)gridView.getChildAt(7); 
```

# iphone - 不要删除单元格

> ID：12818822
> 
> 赞同：-2
> 
> 时间：2012-10-10T12:01:27.993
> 
> 标签：iphone, objective-c

我在单元格中是水平滚动，它创建了 5 - 10 张通过互联网加载的图像。怎么做更好？保存数组中的图片和滚动位置的数量还是干脆不从内存中删除单元格？单元格到50个左右。最好不要只从内存中删除单元格，告诉我怎么做？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
     return [self.conteinerHotels count];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:07:57.760

使用[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)。

此示例演示了加载和显示 UITableView 的多阶段方法。它首先从 RSS 提要中加载相关文本，以便尽快加载表格，然后异步下载每行的应用程序图像，以便 UI 响应更快。

# php - Base href 在 IE 上不起作用 - 替代方案？

> ID：12818827
> 
> 赞同：2
> 
> 时间：2012-10-10T12:01:47.843
> 
> 标签：php, internet-explorer, include, href, base

所以在做了很多研究之后，我发现了 base href，我决定应该用它来建立我的网站。完成后，我注意到它可以在所有浏览器（最新版本）上运行：Chrome/Firefox/Opera 除了 IE 9。

我的网站是这样构建的，在 localhost 上：

```
<base href="/My_Site/" /> 
```

然后我使用 php include 添加在根目录中找到的元素，而不是在与当前页面相同的文件夹中：

```
<?php include "../header.php"?> 
```

现在，由于我将把它上传到网上，我想 base href 将从 My_Site 更改为[http://mysite.com/](http://mysite.com/)我想知道这样做之后是否一切正常？我必须做些什么才能使它也能在 IE 上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:22:55.260

您必须在 IE 中为 base 使用 close 标签，其他浏览器只需要 self-close。所以应该是：

```
<base href="/My_Site/" /><!--[if IE]></base><![endif]--> 
```

（假设 href 值是正确的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T15:39:54.087

您必须使用完整路径。

例子：

```
<base href="<?="http://".$_SERVER['HTTP_HOST']."/"?>My_Site/" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:03:42.613

在这种情况下，我的猜测是在标签之前有一些字符，在任何标签之外。考虑一下：

```
<base href="http://domain.net/qu/en/" />
<a href="sample">Sample Link</a> 
```

# c - 内核模式访问用户空间变量

> ID：12818829
> 
> 赞同：0
> 
> 时间：2012-10-10T12:01:49.477
> 
> 标签：c, linux, memory-management, linux-kernel

我正在编写一个内核函数 foo ，它以结构指针作为参数

```
void foo(struct struct1 *param)
{

    if(param!=NULL)
    {
        if(param->param1!=NULL)
        {
            if(param->param1->bool_value)
                Some code
        }
    }
    some code
} 
```

该函数在进程上下文中运行。我在上述函数的这一行发生了崩溃。`if(param->param1->bool_value)`. 这次崩溃是一次崩溃，并且再也没有发生过。

BADVA 地址指向用户空间地址。这个地址是param1->bool_value的地址吗？如果是这样，内核模式代码是否可以在不使用 copy_from_user 的情况下访问该地址以进行读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:05:20.720

`param->param1`可能未初始化或已被覆盖。

初始化`struct1`时，是否总是将其成员设置为 NULL？如果您不这样做，您的问题可能与使用未初始化的数据有关，并且处理起来相对简单。如果您总是初始化为 NULL，则其他一些代码可能已经覆盖了该成员；这将更难诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:32:59.527

您是否确保（使用锁）在测试和访问之间不会从您的下方修改结构？也许你可以使用

```
void foo(struct somestruct *const param)
{
    if (param) {
        struct otherstruct *const param1 = param->param1;

        if (param1 && param1->bool_value) {
            /* Do stuff */
        }
    }
} 
```

请注意，C 为 指定短路逻辑`&&`，因此如果`param1`在最里面的测试中为 NULL，`param1`则**不会**取消引用。

这种访问模式（没有最外层的`if (param)`）在 Linux 内核中很常见。唯一需要注意的是，丢弃`param1`仍然必须受到某种锁的保护，以便在其他 CPU 仍在访问它时（通过缓存指针）它不会被释放。

# python - web开发python中会话和cookie的概念

> ID：12818830
> 
> 赞同：1
> 
> 时间：2012-10-10T12:01:49.930
> 
> 标签：python, session, authentication, cookies, web.py

我对 Web 开发非常陌生，我正在`web.py`开发一个小型 Web 应用程序的框架。假设登录屏幕是`localhost:9090/login`，成功登录后重定向到下一页`localhost:9090/details`，单击另一个按钮后`add`再次重定向到`localhost:9090/details/details_entry`。

但是当我直接`localhost:9090/details`在浏览器上尝试它的工作并且能够在没有登录的情况下看到页面。所以在谷歌搜索之后，我知道我需要使用`session concept`，但我现在已经厌倦了在谷歌搜索网络概念的繁忙日程。谁能告诉我这个概念

1.  `session`（实际上是为什么创建它以及在python中通过页面登录后如何使用它）

2.  实际上是什么完整的概念`user authentication`，创建用户登录页面要遵循的步骤以及用户登录后要遵循的详细信息用户注销时会发生什么以及如何在python中会话代码

我希望它是什么语言，但开发登录屏幕和通过创建一些会话 id 重定向到下一个 url 的概念是相同的，所以用户身份验证概念非常重要，可能这个问题对其他人有用。

**编辑代码**

**--------------**

**登录.py**

```
import os
import sys
import web
from web import form

render = web.template.render('templates/')

urls = (
  '/',   'Login',
  '/projects',  'Projects',
  '/project_details',  'Project_Details',  
)

app = web.application(urls, globals())

web.config.debug = False
db = web.database(dbn='mysql', db='Python_Web', user='root', pw='redhat')
settings = {}
store = web.session.DBStore(db, 'sessions')
session = web.session.Session(app, store, initializer={'user': None})

class Login:

    login_form = form.Form( 
        form.Textbox('username', form.notnull),
        form.Password('password', form.notnull),
        form.Button('Login'),
        )

    def GET(self):
        form = self.login_form()
        return render.login(form)

def POST(self):
    if not self.login_form.validates():
        return render.login(self.login_form)
    i = web.input()
    username = i.username
    password = i.password
    user = db.select('user',
        where = 'user_login = $username', 
        vars = {'username': username}
    if username == user['username'] and password == user['password']:
        session.user = username
        raise web.seeother('/projects')

    else:
        return render.login_error(form)    

def auth_required(func):
    def proxyfunc(self, *args, **kw):
        print session.user,"=======> Session stored"
        try:
            if session.user:
              return func(self, *args, **kw)
        except:
            pass
        raise web.seeother("/")
    return proxyfunc

class Projects:

    project_list = form.Form( 
        form.Button('Add Project'),
        )

    @auth_required
    def GET(self):
        project_form = self.project_list()
        return render.projects(project_form)  

   def POST(self):
        raise web.seeother('/project_details')

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

在成功登录后的上述代码中，页面将重定向到下一页。这里我需要实现会话概念，但是我被困在上面代码中在哪里实现会话代码。谁能指出我在上述登录页面的py代码中在哪里编写会话代码的正确方法。完成此工作后，需要在同一个 py 文件中实现注销功能

实现功能后编辑代码`auth_required`并得到以下错误

**结果：**

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/web/application.py", line 239, in process
    return self.handle()
  File "/usr/lib/python2.7/site-packages/web/application.py", line 230, in handle
    return self._delegate(fn, self.fvars, args)
  File "/usr/lib/python2.7/site-packages/web/application.py", line 420, in _delegate
    return handle_class(cls)
  File "/usr/lib/python2.7/site-packages/web/application.py", line 396, in handle_class
    return tocall(*args)
  File "/home/local/user/python_webcode/index.py", line 102, in proxyfunc
    print session.user,"=======> Session Stored"
  File "/usr/lib/python2.7/site-packages/web/session.py", line 71, in __getattr__
    return getattr(self._data, name)
AttributeError: 'ThreadedDict' object has no attribute 'user' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:12:33.827

web.py 提供[会话](http://webpy.org/cookbook/sessions)抽象和几个会话存储。你要做的就是编写登录控制器，在 GET 上显示表单，在 POST 上找到用户并执行密码检查，然后将用户存储在会话中并在注销时终止会话。在它之后，您可以编写装饰器来检查用户是否存在于会话中以通过控制器方法使用它。无论如何，用户身份验证概念在所有 Web 应用程序中基本相同。

如果您需要已经为 web.py 工作的解决方案，那么您可以看看这个模块：http: [//jpscaletti.com/webpy_auth/](http://jpscaletti.com/webpy_auth/)

如果您决定自己实现登录，最简单的身份验证装饰器可能如下所示：

```
def auth_required(func):
    def proxyfunc(self, *args, **kw):
        try:
            if session.user:
              # user is logged in
              return func(self, *args, **kw)
        except:
            pass
        # user is not logged in
        raise web.seeother("/login")
    return proxyfunc 
```

然后，您将能够在控制器中的 GET 和 POST 方法之前使用 @auth_required，如下所示：

```
class Projects:
    @auth_required
    def GET(self):
        pass 
```

# c# - 如何舍入一个双精度值

> ID：12818831
> 
> 赞同：-7
> 
> 时间：2012-10-10T12:01:55.453
> 
> 标签：c#

我需要在 C# 中将 39197.47 的值设为 39198.00。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:03:14.280

要将 num n 舍入到小数点后 0 位并取上限，请使用：

```
num = Math.Ceiling(num); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:03:46.530

你可以使用`Math.Ceiling:`

```
Math.Ceiling( 39197.47 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:05:35.080

试试这个：

```
double x = Math.Ceiling(39197.47); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:05:52.657

我认为你需要`Math.Ceiling(39197.47)`，因为你想四舍五入

# html - 使用 iPhone 中的 SMS url 向多个收件人发送短信

> ID：12818832
> 
> 赞同：11
> 
> 时间：2012-10-10T12:01:57.563
> 
> 标签：html, sms

如何使用 iPhone 中的 SMS url 向多个收件人发送 SMS？

我正在尝试这个，但它不起作用。有什么方法可以发送或不发送吗？

```
<a href="sms:phone number">sms</a> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-04T02:37:27.797

用这个：

```
sms:/open?addresses={phone number 1},{phone number 2},... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T10:05:21.823

不幸的是，目前还没有办法通过 sms 方案从 iPhone 上的 Web 应用程序向多个收件人发送 SMS。

如果您特别了解您的 web 应用程序的受众，我相信一种解决方法是可能的。您可能需要安装具有自定义 URL 方案的本机应用程序，该应用程序会根据请求创建 SMS。
这个应用程序可以注册`multiplesms://`，读取多个电话号码，并创建短信（我认为这可能来自我在互联网上看到的不同应用程序，但从未使用过它们）。
所以在你的 webapp 中，你可以写：
`<a href="multiplesms:+3581234567,+3582234567">Two numbers, no body text</a>`.
但请记住，您必须要求在用户的 iPhone 上安装本机应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-02T10:38:33.090

自定义 uri 方案似乎是解决此问题的一种有趣方法，但我们必须制作特定的 iOS 应用程序或使用现有且兼容的 iPhone 应用程序，我没有找到。实际上，仅使用列表的第一个数字，iOS 排除逗号后的所有数字。如果没有办法解决这个问题，这是 iPhone 特有的，我们必须使用 SMS 网关（并为每条短信付费）。

希望有人有解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:09:14.280

尝试

```
<a href="sms:+3581234567,+3582234567">Two numbers, no body text</a> 
```

来源：[developer.nokia.com](http://www.developer.nokia.com/Community/Wiki/SMS_URI_scheme_in_Series_40_web_apps)和[openmobilealliance.org](http://www.openmobilealliance.org/Technical/release_program/docs/URI_Schemes/V1_0-20080626-A/OMA-TS-URI_Schemes-V1_0-20080626-A.pdf)（第 20 页）

如果它不起作用，我会尝试

```
<a href="sms:+3581234567;+3582234567">Two numbers, no body text</a> 
```

# c++ - 列表 test() 和列表 测试区别？

> ID：12818833
> 
> 赞同：0
> 
> 时间：2012-10-10T12:01:58.480
> 
> 标签：c++

> **可能重复：**
> [使用空括号调用默认构造函数时出错](https://stackoverflow.com/questions/180172/error-on-calling-default-constructor-with-empty-set-of-brackets)
> [Test t; 之间有什么区别？和测试 t();? 如果测试是一个类](https://stackoverflow.com/questions/12686298/whats-the-differences-between-test-t-and-test-t-if-test-is-a-class)

这段代码第一个编译第二个没有什么区别。我对 C++ 很陌生。

**第一个样本**

```
list<string> str;
list<string>::iterator it;

it = str.begin(); 
```

**第二个样本**

```
list<string> str();
list<string>::iterator it;

it = str.begin(); 
```

我认为没有 parantethiss 的调用调用默认构造函数女巫与 () 变体相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:03:08.133

```
list<string> str; 
```

声明一个变量。

```
list<string> str(); 
```

声明一个不带参数的函数并返回一个`list<string>`.

这通常被称为令人烦恼的解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:03:21.447

`list<string> str();`被视为函数原型声明。请参阅[“最令人烦恼的解析”](http://en.wikipedia.org/wiki/Most_vexing_parse)。

# delphi - 在 TMetafileCanvas 上绘制位图没有结果

> ID：12818835
> 
> 赞同：0
> 
> 时间：2012-10-10T12:02:07.950
> 
> 标签：delphi, delphi-7

我正在执行： TMetafileCanvas 类型的 fcanvas 上的 FCanvas.Draw 方法。

问题是绘制的图像是：

*   文档打印到 QPrinter 本地 pdf 打印机时不可见
*   在 BullzipPdf 本地打印机上可见
*   在 xps 文件类型中可见

它取决于什么？为什么它会这样？

编辑我忘了提到画布是通过在 Printer.Canvas 上使用 StretchDraw 打印的。

* * *

我偶然发现了以下页面： http: [//www.code4sale.com/texcellent/prndib.htm](http://www.code4sale.com/texcellent/prndib.htm)

他们出售一些库，保证在每台打印机上都能打印出位图……老实说，我很惊讶……

打印位图真的有可能如此……复杂……吗？

# compilation - MonoTouch 样板代码生成

> ID：12818840
> 
> 赞同：0
> 
> 时间：2012-10-10T12:02:22.660
> 
> 标签：compilation, mono, xamarin.ios, boilerplate, aot

您好我正在构建一个小框架来帮助我快速构建应用程序。我正在使用泛型技术来帮助我避免重复编写样板代码。

我认为对于我的框架来说，基于模型对象生成一些代码是个好主意，我知道在 MonoTouch 中不支持 JIT 编译，但是我认为在编译之前立即使用一些模板生成代码应该很有用。

是否有一个实用程序可以帮助我在 MonoTouch 中编译之前生成代码？

有人尝试过这种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:33:01.647

在 MonoDevelop 上使用 T4 模板，就像在 VS 中使用一样。

创建一个带有 .tt 扩展名和内容的新文件，如下所示：

```
<#@ template language="C#v3.5" #>
<#@ assembly name="Path/To/your/assembly" #>

<#@ import namespace="Your.Namespace1" #>
<#@ import namespace="Your.Namespace1" #>

// Write your T4 template transformations. 
```

每次保存 .tt 文件时，都会生成一个嵌套的 .cs 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:10:16.183

我不明白为什么生成额外的代码会有用，除非你有一个非常具体的理由这样做。

MonoTouch 中的 AOT 进程将自动确定您正在使用的泛型类型，并仅为这些类型生成本机代码。

您可能遇到的具体原因是在某些情况下 AOT 编译器无法确定您正在使用哪些泛型类型（但您不应该在实际遇到此问题之前尝试解决此问题 - 生成代码以防万一只会让你的编译时间变慢，你的应用程序更大，上传到设备/安装过程会更慢......没有任何收获）。

# ajax - Wicket 异步作业

> ID：12818841
> 
> 赞同：1
> 
> 时间：2012-10-10T12:02:28.200
> 
> 标签：ajax, wicket, wicket-1.5

我有一个页面，我在该页面上加载了更多选择列表，其中包含从数据库填充的许多值。现在从数据库我不能做更多的优化选择我想知道是否有可能从检票口做一些事情，一些东西来异步填充该列表，或者使用 ajax 加载选择异步的东西，因为我的页面打开非常困难：|

```
<select>
<option1>Value1</option>
<option2>Value2</option>
<option1000>Value1000</option>
</select> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:41:29.520

Wicket 本身没有分页下拉菜单或“无限滚动”组件。

但是在 Apache License 下的 jQuery 中有一个组件：

[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

还有一个 Wicket 组件：

[https://github.com/ivaynberg/wicket-select2](https://github.com/ivaynberg/wicket-select2)

由于 Wicket 6.x 原生使用 jQuery，它应该很合适。

塞巴斯蒂安

# android - 如何将更多参数传递给另一个活动？

> ID：12818842
> 
> 赞同：0
> 
> 时间：2012-10-10T12:02:29.870
> 
> 标签：android

我如何传递超过 1 个参数来传递花药活动？我以这种方式传递我的 2D 字符串作为参数传递成功但现在我想要两个传递更多参数 semrately 现在使用 bean 类我如何发送？

```
 Intent j = new Intent(AgAppTransUtilityBalanceInquiry.this, AgAppTransUBIResponse.class);

         MyBean bean = new MyBean();
         bean.set2DArray(xmlResponse);
         Bundle b = new Bundle();
            b.putSerializable("mybean", bean);

            j.putExtra("obj", b);

          and get like this

         Bundle b = getIntent().getBundleExtra("obj");
                   MyBean dData = (MyBean) b.getSerializable("mybean");
                   xmlResponse =dData.get2DArray();

         public class MyBean implements Serializable{
 String[][] data = null;
 public void set2DArray(String[][] data){
    this.data = data;
 }
 public String[][] get2DArray(){
    return data;
 }
  }

             but i want pass two more parameters

             b.putString("otheraccount", otheraccount.getText().toString());
           b.putString("choicess" ,(String)provider.getSelectedItem());

            how do i pass this two more parameters seprately?? 
```

# php - 为文件上传开始服务器端验证的正确方法

> ID：12818843
> 
> 赞同：0
> 
> 时间：2012-10-10T12:02:33.673
> 
> 标签：php, validation

开始验证多部分/表单表单发送的数据的正确方法是什么。我将从隐藏字段中收到一个文件和 1 个文本标识符。

我不是在问如何检查文件类型和大小等等。我能做到。我要问的是：以正常形式，我这样做：

```
<?php

If ($_POST)
{

if (isset($_POST['myField]) && $_POST['myField'] == 1)
{
//Proceed
}else{
echo 'Error';
}
}
else
{
echo 'Some Error';
}

?> 
```

当涉及到多部分/表单数据时，最好的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:16:35.883

您想[`filter_input`](http://php.net/filter_input)在普通 PHP 设置中使用...

如果你想检查你的文本字段是否包含一个整数，这样的事情......

```
$textInput = filter_input(INPUT_POST, 'myField', FILTER_VALIDATE_INT) 
```

对于您的文件上传，您需要查看[`is_uploaded_file`](http://php.net/manual/en/function.is-uploaded-file.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:08:38.780

我不太清楚你到底想要什么。如果您想知道在验证文件上传时应该记住哪些事情，那么答案可能就是这样。

1）您绝对应该检查上传文件的文件类型/ mime 类型。2）你不应该像“image.php.jpg”这样的双重扩展文件 3）你应该检查文件大小，如果超过2MB，那么你需要增加php.ini中的MAXIMUM FILE UPLOAD Size，默认为2MB。

谢谢，乌塔姆

# ocean - 如何移动自定义模拟器规则定义

> ID：12818849
> 
> 赞同：1
> 
> 时间：2012-10-10T12:02:44.123
> 
> 标签：ocean

似乎自定义模拟器规则的 DLL、版本和命名空间被编码到 .ptd 中的开发策略中。

我想将自定义规则的代码等移动到新的命名空间/DLL 中。

我们使用序列化绑定代码处理自定义域对象样式。是否可以对自定义模拟器规则做同样的事情？

干杯，

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:28:29.880

罗伯特的答案：

Petrel 2012 为工作步骤和流程提供了一个新属性：您需要实现 UniqueIdCore 方法以提供一个全局（跨所有项目）唯一 ID，该 ID 以 Guid 的形式固定且稳定。这个 UniqueId 将被序列化到 Petrel 项目中；它用于序列化的工作流程。在 2012 版本之前，如果您更改了工作步骤的程序集或命名空间，序列化的工作流将会中断。如果您稍后想要更改工作步骤类型，只要您提供相同的唯一标识符，您就可以在不破坏序列化工作流程的情况下这样做。

尼尔的答案：

关于与同事的对话，这是一个 arg pack 软化标识字符串问题，因此不幸的是，这意味着您无法将其移至不同的程序集，甚至无法更改类名。现在只有一个半解决办法（没有检查）：将 arg 包留在旧的程序集/类名中并移动其他所有内容，但这当然不是一个好的解决方案。

# android - 没有视图的输入法

> ID：12818850
> 
> 赞同：0
> 
> 时间：2012-10-10T12:02:45.000
> 
> 标签：android

我有一个通过 WiFi 获取 Unicode 字符的服务，它应该输入到光标当前所在的 EditText 中（类似于远程桌面）

我试图找出将文本输入到 EditText 视图（和类似视图）而不在屏幕上显示键盘布局的最佳方式。

IME 是正确的方向吗？或者有没有办法向系统注入按键（Unicode 字符）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:37:30.537

我想我找到了解决方案：

我已经将一个 IME（实际使用 Google 的 SoftKeyboard 示例来测试我的解决方案）导入到我的服务器项目中。

覆盖 InputMethodService onEvaluateInputViewShown() 并返回 false 以隐藏键盘视图。

现在我用请求的字符调用 onKey() 函数。这样，我将 Unicode 字符传递给焦点视图。

有人有更好的方法吗？

# javascript - Backbone.js：视图/模型之间的自定义订阅和发布自定义事件

> ID：12818854
> 
> 赞同：1
> 
> 时间：2012-10-10T12:02:59.557
> 
> 标签：javascript, events, javascript-events, backbone.js

这是我的情况：我使用 jQuery.Forms 在提交表单时进行 ajax 调用。当 ajax 调用开始并返回时，我需要各种模型/视图来响应这些事件（模型使用从调用返回的数据进行更新，某些控件被禁用然后启用等等）。

我在视图中映射了表单。我如何才能从视图中触发自定义“formSubmitting”“formSubmitted (with data)”并让任意数量的模型/视图响应这些事件？使用 Backbone.js 执行此操作的最惯用方式是什么？

**编辑：**

这就是我想要做的：

```
 window.UploaderView = Backbone.View.extend({
        initialize: function() {
            this.setElement(this.options.base_div);
            this.$el.find('form').ajaxForm({
                beforeSubmit: function() {
                    this.trigger('ajax-calling');
                },
                success: function(responseJSON) {
                    this.trigger('ajax-called', responseJSON);
                },
                dataType: 'json,'
            });
        },
    });

    var update_uploader = new window.UploaderView({
        base_div: $('#update-upload-action'),
    });

    var trigged = new window.UploaderView({
        parent_view: update_uploader,
        initialize: function() {
            this.options.parent_view.on('ajax-calling', function() {
                alert('calling!');
            });
        },
    }); 
```

但这不起作用（不显示警报消息）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:21:00.540

AJAX 响应超出了视图的范围，因此“this”不属于视图。将响应移动到视图并应​​用 _.bindAll(this); 解决您的问题。

```
window.UploaderView = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this);
        this.setElement(this.options.base_div);
        this.$el.find('form').ajaxForm({
            beforeSubmit: this.onBeforeSubmit,
            success: this.onSuccess,
            dataType: 'json,'
        });
    },
    onBeforeSubmit : function() {
        this.trigger('ajax-calling');
    },
    onSuccess: function(responseJSON) {
        this.trigger('ajax-called', responseJSON);
    }
});

var update_uploader = new window.UploaderView({
    base_div: $('#update-upload-action'),
});

var trigged = new window.UploaderView({
    initialize: function() {
        this.options.parent_view.on('ajax-calling', function() {
            alert('calling!');
        });
    },
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:01:42.170

当您创建新实例时，您的`initialize`函数永远不会执行`window.UploaderView`，而是放置在视图的选项中（请参阅 Backbone.js[视图构造文档](http://backbonejs.org/#View-constructor)）。

您需要的是一个事件总线，从`Backbone.Events`您的所有视图/模型继承并可用于所有视图/模型的单个对象：

```
var eventBus = _.clone(Backbone.Events);

window.UploaderView = Backbone.View.extend({
    initialize: function() {
        this.setElement(this.options.base_div);
        this.$el.find('form').ajaxForm({
            beforeSubmit: function() {
                eventBus.trigger('ajax-calling');
            },
            success: function(responseJSON) {
                eventBus.trigger('ajax-called', responseJSON);
            },
            dataType: 'json,'
        });
    },
});

window.AnotherView = Backbone.View.extend({
    initialize: function() {
        eventBus.on('ajax-calling', this.ajaxCallingHandler);
    },
});

window.AnotherModel = Backbone.Model.extend({
    initialize: function() {
    eventBus.on('ajax-called', this.ajaxCallingHandler);
    },  
}); 
```

PS 另请注意，示例中的 ajaxForm`success`和`beforeSubmit`处理程序是在 ajax 设置对象的范围内执行的。因此，您不能只`this.trigger()`在其中使用它们，而必须将这些函数绑定到`window.UploaderView`with`_.bind()`或使用闭包。[更多关于范围绑定](http://www.robertsosinski.com/2009/04/28/binding-scope-in-javascript/)。

# android - 如何从 Android 中的多个活动中接收数据？意外停止

> ID：12818861
> 
> 赞同：0
> 
> 时间：2012-10-10T12:03:12.363
> 
> 标签：android

我正在开发一个示例 android 应用程序，其中包含三个名为 Stationary、Books 和 Pens 的活动。我想将 Books and Pens 活动的数据发送到 Stationary 活动。在固定活动中，当我从书籍或笔中的一项活动接收数据时，它工作正常，但是当我从这两个活动中接收数据时，我的应用程序“意外停止”

我在这方面开发了一些代码，您可以在下面查看。

在我的 Book 活动中，我使用以下代码。

```
 // in Book Activity
public boolean onKeyDown(int keyCode, KeyEvent event) 
     {
         if ((keyCode == KeyEvent.KEYCODE_BACK))
         {  

                if(myBookSelected)
                {   
                Intent intent = new Intent(Books.this,Stationary.class);
                intent.putExtra("bookSelected", books.toString());
                startActivity(intent);
                }

                else
                {
                    Toast.makeText(getApplicationContext(), "Please select books", Toast.LENGTH_LONG).show();
                }

          }

         return true;
     } 
```

并在我的 Pens Activity 中使用流动代码。

```
// in Pen Activity
public boolean onKeyDown(int keyCode, KeyEvent event) 
     {
         if ((keyCode == KeyEvent.KEYCODE_BACK))
         {  

                if(myPenSelected)
                {   
                Intent intent = new Intent(Pens.this,Stationary.class);
                intent.putExtra("penSelected", pens.toString());
                startActivity(intent);
                }

                else
                {
                    Toast.makeText(getApplicationContext(), "Please select Pens", Toast.LENGTH_LONG).show();
                }

          }

         return true;
     } 
```

从上述两个活动即书籍和笔中接收固定活动中的数据。我正在使用以下代码。

```
// in Stationary Activity
Bundle extras = getIntent().getExtras();

            if (extras != null)
            {   
                numberOfBooks = extras.getString("bookSelected");
                numberOfPens = extras.getString("penSelected");
            } 
```

注意：当我从 Books 或 Pens 一项活动接收数据时，它工作正常，但是当我从这两项活动接收数据时，我的应用程序“意外停止”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:07:04.140

这是因为当您尝试从 BookActivity 传递 Intent 时，您的“penSelected”将为空，而在另一种情况下，“bookSelected”将为空。所以很明显你会在这里遇到 NullPointerException 。

一个简单的讨厌的解决方案是将它们包围在单独的 try catch 块中。或者您可能必须发送另一个数据来识别您从哪个活动传递，并基于该数据仅获取必填字段。

例如，假设您来自 PenActivty，那么您只能获得“penSelected”而留下另一个，反之亦然。

因此，您必须在这里了解的是，在这两种情况下，您的对象“附加项”都不会为 null ，但只有上述任何一个键将为 null。所以你不能在那里检查 null 。

**编辑**

我相信这毕竟不是真的。您可以使用以下代码检查 Bundle Oject 是否包含密钥，

```
 if(getIntent().hasExtra("bookSelected"))
{
         // do your code.. 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:09:04.837

“每次新活动开始时，前一个活动都会停止，但系统会将活动保留在堆栈（“后堆栈”）中。” [活动](http://developer.android.com/guide/components/activities.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:24:21.937

我认为将您的选择简单地保存在首选项文件中会更容易。这样您就不必担心发送数据、活动顺序或它们是否仍然存在，甚至在手机重置后您仍然可以保存数据。请参阅[有关保存数据的教程](http://developer.android.com/training/basics/data-storage/shared-preferences.html)，但基本上是这样的：

```
...
SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPref.edit();
editor.putString(getString(R.string.pen_selected), penSelected);
editor.commit();
.... 
```

我认为您收到强制关闭的原因是因为您只能从以前的活动中接收数据。如果您希望活动 A 将*a*发送到活动 C，而活动 B 将*b*发送到 C，那么您应该：

Step1）从活动A发送*a*到活动B（并开始）

Step2）从活动B发送*b* **和*a***到活动C（并开始）

希望能帮助到你：）

# r - 如何与来自 R 的孩子一起写入 json

> ID：12818864
> 
> 赞同：18
> 
> 时间：2012-10-10T12:03:14.890
> 
> 标签：r, format

我想将 R data.frame 转换为 JSON 对象，以便将其用于使用 d3.js 准备数据可视化。我发现了很多关于如何将 JSON 导入 R 的问题，但很少有关于如何将数据从 R 写入 JSON 的问题。

一个特殊的问题是 JSON 文件需要使用因子嵌套，即 data.frame 的列。我认为从嵌套列表写入可能是一个解决方案，但我已经无法从 data.frame 创建嵌套列表:(

我准备了一个例子：

这代表我的 data.frame（称为“MyData”）。

```
ID  Location Station   Size Percentage
1     Alpha    Zeta    Big       0.63
2     Alpha    Zeta Medium       0.43
3     Alpha    Zeta  small       0.47
4     Alpha    Yota    Big       0.85
5     Alpha    Yota Medium       0.19
6     Alpha    Yota  small       0.89
7      Beta   Theta    Big       0.09
8      Beta   Theta Medium       0.33
9      Beta   Theta  small       0.79
10     Beta    Meta    Big       0.89
11     Beta    Meta Medium       0.71
12     Beta    Meta  small       0.59 
```

现在，我想把它变成这样的有效 json 格式，包括子节点：

```
 {
 "name":"MyData",
 "children":[
   {
     "name":"Alpha",
     "children":[
        {
           "name":"Zeta",
           "children":[
              {
                 "name":"Big",
                 "Percentage":0.63
              },
              {
                 "name":"Medium",
                 "Percentage":0.43
              },
              {
                 "name":"Small",
                 "Percentage":0.47
              }
           ]
        },
        {
           "name":"Yota",
           "children":[
              {
                 "name":"Big",
                 "Percentage":0.85
              },
              {
                 "name":"Medium",
                 "Percentage":0.19
              },
              {
                 "name":"Small",
                 "Percentage":0.89
              }
           ]
        }
    ]   
},
    {
     "name":"Zeta",
     "children":[
        {
           "name":"Big",
           "Percentage":0.63
        },
        {
           "name":"Medium",
           "Percentage":0.43
        },
        {
           "name":"Small",
           "Percentage":0.47
        }
     ]
  },
  {
     "name":"Yota",
     "children":[
        {
           "name":"Big",
           "Percentage":0.85
        },
        {
           "name":"Medium",
           "Percentage":0.19
        },
        {
           "name":"Small",
           "Percentage":0.89
        }
     ]
  }
  ]
 } 
```

如果有人可以帮助我，我将非常感激！谢谢你

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T16:15:32.727

这是一种更简洁的递归方法：

```
require(RJSONIO)

makeList<-function(x){
  if(ncol(x)>2){
    listSplit<-split(x[-1],x[1],drop=T)
    lapply(names(listSplit),function(y){list(name=y,children=makeList(listSplit[[y]]))})
  }else{
    lapply(seq(nrow(x[1])),function(y){list(name=x[,1][y],Percentage=x[,2][y])})
  }
}

jsonOut<-toJSON(list(name="MyData",children=makeList(MyData[-1])))
cat(jsonOut) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:37:48.323

使用`split`和的组合`subset`可能会得到你想要的。例如

```
library(RJSONIO)
list1<-split(subset(MyData,select=c(-Location)),Mydata$Location)
list2<-lapply(list1,function(x){split(subset(x,select=c(-Station)),x$Station,drop=TRUE)})
list3<-lapply(list2,function(x){lapply(x,function(y){split(subset(y,select=c(-Size,-ID)),y$Size,drop=TRUE)})})
jsonOut<-toJSON(list(MyData=list3))
jsonOut1<-gsub('([^\n]*?): \\{\n "Percentage"','\\{"name":\\1,"Percentage"',jsonOut)
jsonOut2<-gsub('"([^"]*?)": \\{','"name":"\\1","children":\\{',jsonOut1)

cat(jsonOut2)
{
 "name":"MyData","children":{
 "name":"Alpha","children":{
 "name":"Yota","children":{
{"name": "Big","Percentage":   0.85 
},
{"name":"Medium","Percentage":   0.19 
},
{"name":"small","Percentage":   0.89 
} 
},
"name":"Zeta","children":{
{"name": "Big","Percentage":   0.63 
},
{"name":"Medium","Percentage":   0.43 
},
{"name":"small","Percentage":   0.47 
} 
} 
},
"name":"Beta","children":{
 "name":"Meta","children":{
{"name": "Big","Percentage":   0.89 
},
{"name":"Medium","Percentage":   0.71 
},
{"name":"small","Percentage":   0.59 
} 
},
"name":"Theta","children":{
{"name": "Big","Percentage":   0.09 
},
{"name":"Medium","Percentage":   0.33 
},
{"name":"small","Percentage":   0.79 
} 
} 
} 
} 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T17:46:33.277

我正在放弃 user1609452 的回答并回答有关非常规文件层次结构的问题。如果您有一个列，其中某些数据有子级，而有些则没有，请使用以下内容：

```
makeList<-function(x){ 
if(ncol(x)>2){
    listSplit<-split(x[-1],x[1],drop=T)
    lapply(names(listSplit),function(y){
        if(as.character(listSplit[[y]][1,1]) > 0){
            list(name=y,children=makeList(listSplit[[y]]))
        } else {
            list(name=y,size=listSplit[[y]][1,2])
        }
        })
}else{
    lapply(seq(nrow(x[1])),function(y){list(name=x[,1][y],size=x[,2][y])})
}
} 
```

基本上我们检查当前行是否有更多的孩子，或者它是否只需要附加大小。

# php - 使用 git 部署 php webapp

> ID：12818867
> 
> 赞同：1
> 
> 时间：2012-10-10T12:03:19.760
> 
> 标签：php, git

我用 PHP 开发了一个网络应用程序，并且一直在本地机器上使用 GIT 对其进行源代码控制。

现在我在 MediaTemple 有一个简单的主机，我想发布我的网站，只使用 GIT。那么，我该怎么做呢？

我想`git init`在服务器上制作并克隆我的本地仓库，之后，我可以将本地仓库远程源设置为服务器，所以我要做的就是`git push origin master`在本地机器上发布。`.git/`但我担心我的服务器将拥有多少文件夹和文档，以及这是否对服务器造成危险。

我只想在那里拥有所需的文件，阅读：源文件，而不是源代码控制文件。

**有什么建议吗？还是我应该这样做而忘记隐藏文件？**

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:12:55.890

当您执行 git push 时，您的远程工作目录不会更新（即`git checkout`不会在远程端自动发生）。您可以从远程使用 git pull ，例如：

```
ssh root@my-server 'cd /my/remote/repo && && git pull origin master' 
```

如果您可以远程控制您的服务器。

# button - 黑莓 - 将图像添加到按钮？

> ID：12818869
> 
> 赞同：0
> 
> 时间：2012-10-10T12:03:24.593
> 
> 标签：button, blackberry, blackberry-jde

就像我想定制它一样。我得到了一张图片，我想将它设置在我的登录按钮上。

我试过 Login.setBackground("loginbackground.png"); 但这不符合我的要求。这个问题有重复，但我没有找到完美的解决方案，这就是为什么发布它：S

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:50:07.893

如果您想在后台将图像添加到按钮，请尝试使用以下代码：

```
Bitmap bitmap = Bitmap.getBitmapResource("rectangle.png");
Background background = BackgroundFactory.createBitmapBackground(bitmap);
button1 = new ButtonField("Button1", ButtonField.USE_ALL_WIDTH);
button1.setBackground(background);
add(button1); 
```

或者您可以通过以下方式添加图像并为其添加点击功能来做到这一点：

```
Bitmap msg = Bitmap.getBitmapResource("msg.png");
BitmapField message = new BitmapField(msg, Field.FOCUSABLE)
{
    protected boolean navigationClick(int status,int time)
    {
        label.setText("Messages");
        Dialog.alert("Message icon selected");
        return true;
    }
};
add(message) 
```

# java - 这在 Java 代码中指的是什么？

> ID：12818872
> 
> 赞同：0
> 
> 时间：2012-10-10T12:03:32.050
> 
> 标签：java, this

我是 JAVA 的初学者，我完全对`this`Java 中的定义感到困惑。我读过它指的是`current object`有关方面。

但是，这是什么意思 ？`Who`将对象分配给 `this`? 以及我在编写代码时如何知道此刻`what should be`的价值`this`。

简而言之，我对`this`. 谁能帮我摆脱我的困惑？我知道这`this`非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:06:28.543

按照这两个链接： -

[http://javapapers.com/core-java/explain-the-java-this-keyword](http://javapapers.com/core-java/explain-the-java-this-keyword)

[http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:09:13.333

这很简单。

当前对象是其代码在该点运行的对象。因此，它是`this`出现代码的类的一个实例。

实际上，除非您在对象和本地范围内具有相同的标识符，否则`this`通常可以将其删除并且它的工作方式完全相同。

无法删除的示例

```
public class myClass {
  private int myVariable;
  public setMyVariable(int myVariable) {
    this.myVariable = myVariable; // if you do not add this, the compiler won't know you are refering to the instance variable
  }
  public int getMyVariable() {
    return this.myVariable;  // here there is no possibility for confussion, you can delete this if you want
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:07:56.090

`this`是 Java 中的一个关键字，代表`object`自身。这包含在基础知识中。也许你可以浏览任何关于它的好文章。我从[Oracle（以前的 Sun Java 教程）中提供一份](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:08:04.280

`this`用于引用类中的变量。例如

```
public class MyClass {
    private Integer i;

    public MyClass(Integer i) {
      this.i = i;
    }
} 
```

在这段代码中，我们将参数 i 分配给类中的字段 i。如果你没有 this 那么参数 i 将被分配给它自己。通常你有不同的参数名称，所以你不需要这个。例如

```
public class MyClass {
    private Integer i;

    public MyClass(Integer j) {
      this.i = j;
      //i = j; //this line does the same thing as the line above.
    }
} 
```

在上面的示例中，您不需要在`this`前面`i`

总之，您可以使用它在所有类字段之前。大多数时候您不需要，但如果有任何类型的名称隐藏，那么您可以使用`this`明确表示您指的是一个字段。

您也可以使用`this`来引用一个对象。当您处理内部类并想要引用外部类时使用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T12:06:37.713

`this`指您当前的实例类。`this`通常用于您的访问器。例如：

```
public void Sample{
 private String name;

 public setName(String name){
  this.name = name;
 }
} 
```

请注意，它`this`专门用于指向类`Sample`的**变量**名，而不是方法中的**参数**`setName`。

# model-binding - asp.net 4.5 模型在 formview 中绑定用户控件

> ID：12818873
> 
> 赞同：0
> 
> 时间：2012-10-10T12:03:36.407
> 
> 标签：model-binding, formview, asp.net-4.5

如何在 formview 中绑定用户控件。如果我不使用 usercontrol 一切正常，当我移动到 usercontrol 模型绑定中的输入时，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:04:45.017

你可以试试这个作为 ascx 控件吗？

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="MyGridView1.ascx.cs" Inherits="MyGridView1" %>

<asp:GridView ID="MyGridView" runat="server" SelectMethod="GetCustomers" PagerSettings-Position="Bottom"
    AllowSorting="true" AllowPaging="true" PageSize="5" PagerSettings-Visible="true"
    PagerSettings-Mode="NumericFirstLast" AutoGenerateDeleteButton="true" Caption="MyGridViewControl"
    CellPadding="4" GridLines="None" ForeColor="#333333">
    <AlternatingRowStyle BackColor="White"></AlternatingRowStyle>
</asp:GridView>
<asp:ValidationSummary ID="ValidationSummary1" runat="server" ShowModelStateErrors="true"
    ShowValidationErrors="true" />` 
```

并在控件后面的代码中添加 SelectMethod。注册`<%@ Register Src="~/MyGridView1.ascx" TagPrefix="uc1" TagName="MyGridView1" %>`并使用这个控件作为`<uc1:mygridview1 runat="server" id="MyGridView1" />`

# objective-c - 如何检测 NSURLConnection 的 sendSynchronousRequest:returningResponse:error: 是否超时或其他错误

> ID：12818887
> 
> 赞同：5
> 
> 时间：2012-10-10T12:03:53.177
> 
> 标签：objective-c, ios, cocoa, nsurlconnection

我使用`NSURLConnection's` `sendSynchronousRequest:returningResponse:error:`方法（在单独的`NSOperation`线程中）连接到外部服务器以检索数据。我如何知道操作结束是否超时，或其他网络错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T12:24:58.013

如果有错误，返回时错误参数将非零`sendSynchronousRequest:returningResponse:error:`。

您可以通过检查返回的值来检索错误代码`[NSError code]`。超时的错误代码是`NSURLErrorTimedOut`。

例如：

```
NSError *error = nil;
[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]

if (error.code == NSURLErrorTimedOut) {
// Handle time out here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T13:59:42.080

检查这个`extension`：

```
extension Error {

    var isConnectivityError: Bool {
        guard _domain == NSURLErrorDomain else { return false }

        let connectivityErrors = [NSURLErrorTimedOut,
                                  NSURLErrorNotConnectedToInternet,
                                  NSURLErrorNetworkConnectionLost,
                                  NSURLErrorCannotConnectToHost]

        return connectivityErrors.contains(_code)
    }
} 
```

您可以在文档中检查`NSURLError`域中的其他错误以扩展您的`connectivityErrors`阵列。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T12:17:13.233

您可以向用户显示警报并将错误参数传递`sendSynchronousRequest:returningResponse:error:`给警报的消息。

代码将是这样的：

```
[NSURLConnection sendSynchronousRequest: req returningResponse: &response error: &error];

if (error)
{
UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
} 
```

希望能帮助到你！！

# php - 将 var 变量从 document.getElementById('name') 获取到 php 变量中

> ID：12818891
> 
> 赞同：-1
> 
> 时间：2012-10-10T12:04:03.223
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)
> [将 javaScript 变量发送到 php 变量](https://stackoverflow.com/questions/8191124/send-javascript-variable-to-php-variable)

我在文档中有 document.getElementById('name') 字段，它的值由脚本更改，当我发帖（到服务器）时，我想获取 document.getElementById('name') 的当前值并设置它在

在

```
$temp= document.getElementById('name');
?> 
```

ps我知道脚本代码在客户端和php i服务器端，但我需要这个解决方法，所以请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:07:57.947

我认为您拥有的最佳选择是`AJAX`使用这些值提出请求。有了这个，您可以将值发送并分配给您的`PHP variables`.

否则，您可以使用`COOKIE`etc. 临时存储该值，然后在接下来调用服务器端函数时在服务器端使用它。

阿贾克斯代码

```
<script type='text/javascript'>
    function getXMLHTTPRequest() {
    try {
    req = new XMLHttpRequest();
    } catch(err1) {
      try {
      req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (err2) {
        try {
        req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (err3) {
          req = false;
        }
      }
    }
    return req;
    }

      var http = getXMLHTTPRequest();
       function sendValue() {
    var myurl = "session.php";  // to be present in the same folder
     var myurl1 = myurl;
    var value = document.getElementById('urDIV').value;
      myRand = parseInt(Math.random()*999999999999999);
      var modurl = myurl1+"?rand="+myRand+"url"+value ; // this will set the url to be sent

      http.open("GET", modurl, true);
      http.onreadystatechange = useHttpResponse;
      http.send(null);
    }

    function useHttpResponse() {
       if (http.readyState == 4) {
        if(http.status == 200) {
          var mytext = http.responseText;
          // I dont think u will like to do any thing with the response
          // Once you get the response, you are done.
            }
         }
         else {
             // don't do anything until any result is obtained
            }
        } 
</script> 
```

HTML 部分

```
// considering you are calling on a button call

<input type='button' onclick='sendValue();'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:06:59.197

发出一个包含数据的新 HTTP 请求。

*   您可以生成`<form>`并提交它。
*   你可以使用 Ajax
*   您可以设置`location`为新值
*   ETC

# mysql - MySQL GROUP_CONCAT vs. COALESCE 关于 NULL 值

> ID：12818897
> 
> 赞同：3
> 
> 时间：2012-10-10T12:04:13.783
> 
> 标签：mysql, null

## 更新

我刚刚注意到，在服务器中，列`table3.note`值是`NULL`，而在我的本地机器上，它们是空字符串。在这个令人尴尬的发现之后，我进行了一些测试，并且在两个平台上一切都一样。

如果我有两个单元格并且第二个单元格包含实际值（第一个是 ），这就是它们产生的结果`NULL`：

```
//1st
GROUP_CONCAT(COALESCE(`table3`.`note`, '') SEPARATOR ';') AS `table3_note`
//var_dump(): array(2) { [0]=> string(0) "" [1]=> string(4) "Test" } 

//2nd
GROUP_CONCAT(`table3`.`note`) SEPARATOR ';') AS `table3_note`
//var_dump(): array(1) { [0]=> string(4) "Test" } 
```

因此，第一个查询 ( `COALESCE`) 将 s 检索`NULL`为空字符串，第二个查询`NULL`从结果集中删除所有值。（这是不可接受的，因为我有很多数组，它们需要同步。）

由于我的错误，原来的问题得到了解决。我仍然想知道为什么即使选中也会`GROUP_CONCAT`忽略s 。`NULL`

这是正常工作的查询（不剥离`NULL`s）：

```
SELECT `table1`.*
  GROUP_CONCAT(COALESCE(`table3`.`id`, '') SEPARATOR ';') AS `t3_id`,
  GROUP_CONCAT(COALESCE(`table3`.`note`, '') SEPARATOR ';') AS `t3_note`,
  FROM `table1`
    LEFT JOIN `table3` ON `table3`.`id` = `table1`.`id`
      GROUP BY `table1`.`id` 
```

那么为什么这个忽略`NULL`s呢？（更多忽略值的查询选项`NULL`位于原始问题部分。）

```
SELECT `table1`.*
  GROUP_CONCAT(`table3`.`id` SEPARATOR ';') AS `t3_id`,
  GROUP_CONCAT(`table3`.`note` SEPARATOR ';') AS `t3_note`,
  FROM `table1`
    LEFT JOIN `table3` ON `table3`.`id` = `table1`.`id`
      GROUP BY `table1`.`id` 
```

## 原始问题（不重要，我的错......）

我的查询的一部分使用三个表（1:n 关系，我将多行从单行映射`table2`到`table3`单行`table1`）。获取单个单元格值的两种选择：

```
 //1st
 GROUP_CONCAT(COALESCE(`table3`.`note`, '') SEPARATOR ';') AS `table3_note`

 //2nd
 GROUP_CONCAT(`table3`.`note`) SEPARATOR ';') AS `table3_note` 
```

两者都可以在本地机器上正常工作，但只能在服务器上运行第一个。在我的本地机器上，当使用第一个或第二个选项（使用`var_dump()`）时，我得到了正确数量的空数组值。在服务器上，如果没有任何值，则第二个选项仅返回一个空数组`table3_note`（查询中未显示许多`table3_id`s 和其他字段）。

**那么问题是为什么？**`NULL`如果根据手册没有非空值，这两个函数都声称返回。

*   [http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)
*   [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

以下信息是否相关，或者我是否遗漏了手册中的某些内容？

*   本地机器：MySQL Client API 版本 5.1.44
*   服务器：MySQL 客户端 API 版本 5.0.51a

答案是否如此简单，以至于服务器`COALESCE`像我的本地机器一样处理函数，但`GROUP_CONCAT`由于 MySQL 客户端 API 版本不匹配，函数的处理方式不同？

我现在有一个可行的解决方案，所以从某种意义上说，这不是一个真正的问题，我需要解决这个问题。我只是想知道为什么会这样。`COALESCE`像我这样使用有什么陷阱吗？使用`for`循环打印数组时是否存在未正确同步的危险？（至少快速测试没有发现任何问题。）

* * *

最后的笔记。我尝试使用这些方法和其他一些方法（`IFNULL`等`IS NULL`），例如在这些问题中建议的方法：

*   [如果任何值为 NULL，GROUP_CONCAT 返回 NULL](https://stackoverflow.com/questions/12101191/group-concat-return-null-if-any-value-is-null)
*   [未返回 group_concat 的空值行](https://stackoverflow.com/questions/4614316/rows-with-null-value-for-group-concat-not-returned)

但结果是一样的：在本地机器上工作，但在服务器上不行。以下查询：

```
//another option for the query
IF(SUM(`table3`.`note` IS NULL) = 0, GROUP_CONCAT(`table3`.`note` SEPARATOR ';'), NULL) AS `table3_note`

//and another one...
ISNULL(GROUP_CONCAT(`table3`.`note` SEPARATOR ';'), '') AS `table3_note` 
```

[MySQL手册还说](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

> 除非另有说明，否则组函数会忽略 NULL 值。

这是否意味着即使选中也不会像那样`COALESCE`忽略`NULL`值？`GROUP_CONCAT`这仍然不能解释服务器和本地机器的不同行为。或者是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:12:28.587

这是正常工作的查询（不剥离`NULL`s）：

```
SELECT `table1`.*
  GROUP_CONCAT(COALESCE(`table3`.`id`, '') SEPARATOR ';') AS `t3_id`,
  GROUP_CONCAT(COALESCE(`table3`.`note`, '') SEPARATOR ';') AS `t3_note`,
  FROM `table1`
    LEFT JOIN `table3` ON `table3`.`id` = `table1`.`id`
      GROUP BY `table1`.`id` 
```

原始问题保持不变。它非常混乱且难以理解，但上面的查询对我有用。

# android - android BlutoothChatService 在多个类中使用

> ID：12818898
> 
> 赞同：1
> 
> 时间：2012-10-10T12:04:21.133
> 
> 标签：android, bluetooth

我正在使用 BluetoothChat 示例来建立蓝牙通信。我现在创建了 SecondView.java，我想从那里发送和接收数据，而不必重新连接到蓝牙。有什么方法可以将 BluetoothChat.java 示例中使用的发送和接收方法访问到我的 SecondView.java？我发现一种工作方法是使用绑定服务，但我不知道如何实现这个..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:38:03.427

如果您正在关注蓝牙聊天示例，那么您将使用线程进行蓝牙通信，例如，具有蓝牙通信读取和写入方法的连接线程。

能够从应用程序中的任何位置读取和写入实际上非常简单。您只需要为您的应用程序提供对该线程的全局引用。

在 android 应用程序中，应用程序有一个在整个应用程序中是全局的上下文。您可以从任何活动中使用 getApplication() 方法获取此信息。要在“应用程序”上下文中设置自己的变量，您需要扩展应用程序类，并将清单指向它。

这是一个例子。我已经扩展了应用程序类，并使用 getter 和 setter 方法为连接的线程创建了一个变量。

```
class MyAppApplication extends Application {
        private ConnectedThread mBluetoothConnectedThread;

        @Override
        public void onCreate() {
            super.onCreate();
        }

        public ConnectedThread getBluetoothConnectedThread() {
            return mBluetoothConnectedThread;
        }

        public void setBluetoothConnectedThread(ConnectedThread mBluetoothConnectedThread) {
            this.mBluetoothConnectedThread = mBluetoothConnectedThread;
        }

    } 
```

并且要将清单指向该类，您需要将应用程序元素的 android:name 属性设置为我们在上面创建的应用程序类的类名。例如

```
 <application
        android:name="com.myapp.package.MyApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"> 
```

完成后，您可以通过调用在活动中的任何位置访问 ConnectedThread

```
MyAppApplication.getBluetoothConnectedThread().write()
MyAppApplication.getBluetoothConnectedThread().read() 
```

请注意，您需要在创建模型后首先将线程设置为模型：

```
MyAppApplication.setBluetoothConnectedThread(MyNewConnectedThread); 
```

希望有帮助。

# postgresql - 最长公共子序列 Postgresql

> ID：12818900
> 
> 赞同：3
> 
> 时间：2012-10-10T12:04:22.923
> 
> 标签：postgresql, plpgsql

我需要postgresql中最长的公共子序列函数。典型的安装对它不起作用。我在 plpgsql 上写了代码，但运行速度很慢。是否有一些具有此类功能的 postgres 插件（或其他东西）？

编辑：我需要比较 2 个字符串，但不使用 = 运算符，也不喜欢。例如，如果我必须找到 abcba，结果可以是 adbcbdac。为此，我想实现 LCS（最长公共子序列，而不是字符串）

编辑：我找到了一些名为fuzzystrmatch 的postgre 扩展，但它只适用于最大255 字节的文本。有谁知道那个扩展的类似物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:56:00.350

我同意 Erwin、Craig 和 Deer Hunter 的观点，您可以通过告诉我们您正在进行什么样的比较来提供更多信息？假设您比较文本文件并且比较完整的行就足够了。那么您能否将最短文件的行与最长文件的行进行比较。比较有三种可能性： 1\. 文件 A 中的一行与文件 B 中的任何行都不匹配， 2\. 文件 A 中的一行与文件 B 中的一行匹配。 3\. 文件 A 中的一行匹配并且两者都匹配行与上一场比赛是连续的。如果是情况 1，请关闭任何打开的对象。如果存在打开的对象，请将其添加到数组中。如果是情况 2 并且没有打开的对象，则创建一个新对象。如果有一个打开的对象，那么它应该是第 3 种情况，因此将行（或行号）添加到打开的对象。

然而，我会用另一种语言执行这种操作，然后是 plpgsql。在我的情况下，它会是 Java 还是 PHP。只需将数据转换为这种类型的语言并完成工作。这些语言更适合这种类型的行动。

# postgresql - postgresql 表中的默认递增值

> ID：12818903
> 
> 赞同：0
> 
> 时间：2012-10-10T12:04:30.257
> 
> 标签：postgresql

我进行了很多搜索，但无法找到我的查询的答案。但是，我要问的可能是不可能的：

我有一系列表格，但为了简化，让我们假设我有以下内容

文章文章 ID SERIAL

ArticlePageNumber articleId /*参考*Article.articleId / pageNumber Int

这是相当不言自明的，但是可以接受的数据是

```
 Article
 -------
 articleiId
 1
 2

 ArticlePageNumber
 -----------------
 articleiId   pageNumber
 1            1
 1            2
 1            3
 1            4
 1            5
 1            6
 2            1
 2            3
 2            5
 2            2
 2            4 
```

不可接受的表是 ArticlePageNumber

```
 ArticlePageNumber
 -----------------
 articleiId   pageNumber
 1            1
 1            1
 1            2
 1            3
 1            4
 1            5
 2            1
 2            3
 2            5
 2            4 
```

我希望 ArticlePageNumber.pageNumber 的默认值以类似于 serial 的方式递增，但是对于具有该特定 articleId 的条目，下一个值将取决于前一个值（如果没有，则为 1）。

我更愿意将其作为 SQL 中的约束和检查而不是代码，但我猜这可能是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:47:28.543

您需要的行为并非不可能，但很棘手：

**易于完成**- 一个不知道它附加到什么文章的页码序列

首先，为页码创建一个序列，如下所示：

```
CREATE SEQUENCE page_number_sequence; 
```

如果您需要调整分配大小，开始等[看这里](http://www.postgresql.org/docs/8.1/static/sql-createsequence.html)

那么：在定义“article_page_number”表时，定义pageNumber字段如下：

```
# omitted boilerplate
pageNumber integer not null default nextval('page_number_sequence') 
```

这将自动以递增的方式为您填写页码。如果您不想要“gappy”序列号，请在设置序列时将增量设置为 1（默认值）并将缓存设置为 1（默认值）。

**Trickier** - 了解文章的自动递增页码序列

您可以使用*每行*触发器来侦听文章页码表上的保存，并且：

*   检查特定于该文章 ID 的序列是否存在并创建它不存在
*   如果不存在，则从该序列中分配一个页码

下面的代码只经过了轻微的测试，但它应该说明了这个想法......

```
CREATE TABLE IF NOT EXISTS article (
  articleId SERIAL PRIMARY KEY
);

CREATE TABLE IF NOT EXISTS article_page_number (
  articleId INTEGER NOT NULL,
  pageNumber INTEGER NOT NULL,
  CONSTRAINT article_fk FOREIGN KEY (articleId)
      REFERENCES article (articleId)
);

CREATE OR REPLACE FUNCTION page_number_trg()
  RETURNS trigger AS
$BODY$ DECLARE 
  seqname VARCHAR(60):= NULL;
BEGIN
  IF (TG_OP = 'INSERT') THEN
    BEGIN
      seqname:= 'pageno_seq_'||NEW.articleId;
      IF NOT EXISTS (SELECT 0 FROM pg_class where relname = seqname) THEN
        EXECUTE 'CREATE SEQUENCE '||seqname;
      END IF;
      IF NEW.pageNumber IS NULL THEN
        NEW.pageNumber := nextval(seqname);
      END IF;
    END;
  END IF;
  IF TG_OP = 'DELETE' THEN RETURN OLD; ELSE RETURN NEW; END IF; 
END
; $BODY$
LANGUAGE plpgsql;

CREATE TRIGGER page_number_trg
BEFORE INSERT ON article_page_number
FOR EACH ROW
EXECUTE PROCEDURE page_number_trg(); 
```

# jquery - 动态创建 div 时不显示画布中的图像

> ID：12818904
> 
> 赞同：0
> 
> 时间：2012-10-10T12:04:37.210
> 
> 标签：jquery, html, canvas

**代码：**

```
$(document).ready(function(){
    $("#AddButton").bind('click', function(event){

    if(document.getElementById('optionselectthree').value=='drawtab')
    {
    divshow();
    clone();
    event.stopPropagation();

    }
    else if(...)
    {

    ..

    }

    });
 }); 
```

**divshow() 函数：**

```
function divshow(){

var newImageBoxdiv = $(document.createElement('div')).attr("class",'demo');

newImageBoxdiv.html('<img id="Imagedisplay" style="background-repeat: no-repeat; width:auto; width:100%; height:100%; cursor:move; position:absolute;" />');

newImageBoxdiv.insertAfter("#imagedemo");
$('.demo').show(); 
} 
```

**克隆（）函数：**

```
function clone(){

var c=document.getElementById("can");
var d=c.toDataURL("image/png");

document.getElementById("Imagedisplay").src=d;

} 
```

大家好，我正在尝试在画布上绘制图像，然后在使用 divshow() 函数动态调用的 div 上显示绘制的图像（clone() 函数）。问题是当我单击#AddButton 时，当图像src 正确时，它会显示没有图像的div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:26:16.187

我怀疑您在 toDataURL 完成之前设置了 src 。一旦 toDataURL 完成，您可能需要使用回调来触发，并在其中设置 src 。尝试在设置 src 之前记录 d 的值以进行检查。

不幸的是，我自己也遇到了这个问题，并且不知道向 toDataURL 添加回调的可靠方法；toBlob 有一个，但似乎还没有正确实施。

# php - 将值回显到下拉列表中以进行编辑和保存

> ID：12818905
> 
> 赞同：0
> 
> 时间：2012-10-10T12:04:45.887
> 
> 标签：php, mysql

我有 3 个下拉框，效果很好。我可以从 3 个不同的表中选择值并通过各种表 ID 提交/保存到汇总表。但是，我还希望能够在相同的下拉字段中编辑这些值。我有一个编辑函数，它将汇总表 ID 发送到 $_GET 函数以识别行。这些值当前显示在 3 个文本框中，但我希望它们填充到相同的下拉字段中。我无法使选项语法正确。我想我需要在某个地方有一个“选定”选项。我只希望更新 proj_hours 列，但仍然希望所有 3 个下拉列表都填充值。

我希望这是有道理的？我想摆脱文本框。

最新代码：

```
<?php

    // Connect to server and select database.
    $link = mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    //grabs ID from the initial edit submit 
//grabs ID from the initial edit submit 
    if(isset($_GET['id']))
echo "<pre>Value of \$_GET:</br>";print_r($_GET);echo"</pre>";  
    {
        $summary_id = $_GET['summary_id'];
        $res = mysql_query("SELECT *
                    FROM summary S
                    JOIN projects P ON S.proj_id = P.proj_id
                    JOIN departments D ON D.dept_id = S.dept_id
                    JOIN hours H ON H.hours_id = S.hours_id
                    WHERE S.summary_id = '$_GET[id]'
                    ORDER BY D.dept_id
                    LIMIT 0 , 30");

        $rows = mysql_fetch_array($res);

//echo "<pre>Value of \$rows:</br>";print_r($rows);echo"</pre>";  //was using to check what's going on 
        }

//submits the edited values, does a join to find out what's what, and inserts the correct digits into the summary DB        
    if (isset($_POST['btnsubmit']))  
echo "<pre>Value of \$_POST:</br>";print_r($_POST);echo"</pre>";
    {
//echo "<pre>Value of \$_POST:</br>";print_r($_POST);echo"</pre>";
        $summary_id     = $_POST['summary_id'];     
        $nclarity_id    = $_POST['nclarity_id'];
        $nproj_hours    = $_POST['nproj_hours'];
        $ndept_name     = $_POST['ndept_name'];

        $sql1           = "UPDATE summary S
                            SET S.hours_id = (
                            SELECT H.hours_id  
                            FROM Hours H 
                            WHERE H.proj_hours = '$nproj_hours' )
                            WHERE S.summary_id = '$summary_id'" 
                            or die ("couldn't update".mysql_error());

//multiple queries to get the field edited - i know this can be done more efficiently and safely, but I'm not proficient enough                         
        $query1 = mysql_query($sql1);
        if ($query1)
{
echo "success_1!";
}
else
            {
        die('error inserting new record_1'.mysql_error());
    } // end of the nested if statement

}

 if (isset($_POST['btnnew']))  

    {
    //echo "<pre>Value of \$_POST:</br>";print_r($_POST);echo"</pre>";

        $nclarity_id    = $_POST['nclarity_id'];
        $nproj_hours    = $_POST['nproj_hours'];
        $ndept_name     = $_POST['ndept_name'];
        $proj_id        = $_POST['nclarity_id'];
        $hours_id       = $_POST['nproj_hours'];
        $dept_id        = $_POST['ndept_name'];

        $sql        = "INSERT INTO `summary` VALUES (null,'$proj_id','$hours_id','$dept_id',NOW(),null)" 
                            or die ("couldn't update".mysql_error());
        $query = mysql_query($sql);

        if ($query)
{
echo "success_2!";
}
else
            {
        die('error inserting new record_2'.mysql_error());
    } // end of the nested if statement
}

    $res = mysql_query("SELECT *
                    FROM summary S
                    JOIN projects P ON S.proj_id = P.proj_id
                    JOIN departments D ON D.dept_id = S.dept_id
                    JOIN hours H ON H.hours_id = S.hours_id
                    WHERE P.proj_status = 'open'
                    ORDER BY D.dept_id
                                        LIMIT 0 , 30"); 

?>

<table width="500" border="0" cellspacing="1" cellpadding="0">
   <tr>
   <td>
   <table width="100%" border="0" cellspacing="1" cellpadding="0">
   <tr>
   <td>&nbsp;</td>
   <td colspan="3"><strong>Update data in mysql</strong> </td>
   </tr>
   <tr>
   <td align="center">&nbsp;</td>
   <td align="center">&nbsp;</td>
   <td align="center">&nbsp;</td>
   </tr>
   <tr>
   <td align="center">&nbsp;</td>
   <td align="center"><strong>Clarity ID</strong></td>
   <td align="center"><strong>Hours</strong></td>
   <td align="center"><strong>Department</strong></td>
   </tr>
   </table>
   </td>
   </form>
   </tr>
   </table>

<table width="500" border="0" cellspacing="1" cellpadding="0">

<form method="post" action="index.php">
<tr>
<td>&nbsp;</td>

<select name="nclarity_id">
<option name="">
<?php
$sql = "SELECT proj_id, clarity_id FROM projects WHERE proj_status='open'";

$rs = mysql_query($sql);

$id = -9999; // a value that cannot exist in your database
if(isset($_GET['proj_id'])) { // check if there is an id in the $_GET variable
    $id = $_GET['proj_id']; // if so, set the $id variable
}
while($row = mysql_fetch_array($rs))
{
    $selectedText = "";
    if($row['proj_id'] == $id) { // if this row id is the same as the post id
        $selectedText = ' selected="selected"'; // set some text to be included in the markup
    }
    echo "<option value=\"".$row['proj_id']."\"".$selectedText.">".$row['clarity_id']."</option>\n  ";
}
?>
</select>

<select name="nproj_hours">
<option name="">
<?php
$sql = "SELECT hours_id, proj_hours FROM hours";
$rs = mysql_query($sql);
$id = -9999; // a value that cannot exist in your database
if(isset($_GET['hours_id'])) { // check if there is an id in the $_GET variable
    $id = $_GET['hours_id']; // if so, set the $id variable
}
while($row = mysql_fetch_array($rs))
{
    $selectedText = "";
    if($row['hours_id'] == $id) { // if this row id is the same as the post id
        $selectedText = ' selected="selected"'; // set some text to be included in the markup
    }
    echo "<option value=\"".$row['hours_id']."\"".$selectedText.">".$row['proj_hours']."</option>\n  ";

}
?>
</select>
<select name="ndept_name">
<option name="">
<?php
$sql = "SELECT dept_id, dept_name FROM departments";
$rs = mysql_query($sql);
$id = -9999; // a value that cannot exist in your database
if(isset($_GET['dept_id'])) { // check if there is an id in the $_GET variable
    $id = $_GET['dept_id']; // if so, set the $id variable
}
while($row = mysql_fetch_array($rs))
{
    $selectedText = "";
    if($row['hours_id'] == $id) { // if this row id is the same as the post id
        $selectedText = ' selected="selected"'; // set some text to be included in the markup
    }
    echo "<option value=\"".$row['dept_id']."\"".$selectedText.">".$row['dept_name']."</option>\n  ";

}
?>
</select>
<td align="center">
<input type="submit" name="btnnew" value="Enter New Record">
<input type="submit" name="btnsubmit" value="Save Edited Record">
</td>
</tr>
</form>
</table>

<table width="700" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>
<table width="700" border="1" cellspacing="0" cellpadding="3">
<tr>
<td colspan="5"><strong>Project Information </strong> </td>
</tr>

<tr>
<tr>
<td align="center"><strong>Clarity ID</strong></td>
<td align="center"><strong>Estimated Hours</strong></td>
<td align="center"><strong>Department</strong></td>
<td align="center"><strong>Date Submitted</strong></td>
<td align="center"><strong></strong></td>
</tr>

<?php
while($row=mysql_fetch_array($res))
{

?>

<tr>
<td align="center"><?php echo $row['clarity_id']; ?></td>
<td align="center"><?php echo $row['proj_hours']; ?></td>
<td align="center"><?php echo $row['dept_name']; ?></td>
<td align="center"><?php echo $row['date_entered']; ?></td>
<td align="center"><a href="index.php?id=<?php echo $row['summary_id']; ?>">Edit</a></td>
</tr>

<?php
}

?>

</table>
</td>
</tr>
</table>

<?php
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:21:13.910

您可以构建相同的选项列表，但检查 id 是否与您在 $_POST 或 $_GET 数组中找到的 id 相同。

编辑：刚刚意识到您指定了 $_GET - 在下面的示例中将 $_POST 替换为 $_GET 。

就像是：

```
$id = -9999; // a value that cannot exist in your database
if(isset($_POST['proj_id'])) { // check if there is an id in the $_POST variable
    $id = $_POST['proj_id']; // if so, set the $id variable
}
while($row = mysql_fetch_array($rs))
{
    $selectedText = "";
    if($row['proj_id'] == $id) { // if this row id is the same as the post id
        $selectedText = ' selected="selected"'; // set some text to be included in the markup
    }
    echo "<option value=\"".$row['proj_id']."\"".$selectedText.">".$row['clarity_id']."</option>\n  ";

} 
```

希望这可以帮助。

编辑回答评论：

嗨，迈克，我再次检查了您的代码，`$_POST`和`$_GET`变量有点混淆。`$_POST`提交时，您可以从表单中找到变量。`$_GET`变量来自 URL 。当您单击“编辑”链接时，您将重定向到 index.php，并且您正在传递一个名为“id”的变量。此时，您的`$_GET`数组将包含一个键/值对，称为“id”及其值。然而，我注意到在您的代码中，您正试图从`$_GET`数组中获取一个名为“summary_id”的变量，该变量可能不存在。此外，在构建每个选项列表之前，您正在寻找`$_GET['proj_id']`,`$_GET['hours_id']`和`$_GET['dept_id']`，这又不存在了。总之，在“编辑”页面上，您正在搜索未在 URL 中传递的变量。这可能是您的下拉列表没有被填充的原因。一种解决方案是更改您的“编辑”链接，以便您也传递`proj_id`,`dept_id`和`hours_id`变量。另外，请记住 $_POST 数组仅在提交表单时填充，并且仅可用于表单元素的“action”属性中指定的页面。一旦您离开该页面（即使您导航到同一页面，就像您使用“编辑”链接所做的那样），$_POST 数组也不再填充。

# javascript - 将动态参数发送到数字也可能不同的服务器

> ID：12818908
> 
> 赞同：0
> 
> 时间：2012-10-10T12:04:48.263
> 
> 标签：javascript, jquery, html, ajax, post

我在一个数组中有许多参数。这些参数的数量不是固定的。它们可以是 2 个、3 个，有时甚至是 10 个。

```
[["tag1", "value1"], ["tag2", "value2"], ["tag3", "value3"]] ... 
```

我想在
我正在使用的 jquery 加载函数中将所有这些参数发送到服务器（php）

```
$("#LB").load("serverSideFile.php", {
    //parameters for eg {name: "value"}
}); 
```

那就是我要添加所有参数的地方。使用 for 循环？请帮我。

由于某些参数可能有很多字符，我想使用 post 方法发送它们。因此，我避免将它们全部附加到 url 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:13:52.347

您只需要遍历它们并将它们分配给一个对象（尽管首先将它们放在一个对象而不是数组中会更好）。

```
var data = {},
    arr = [["tag1", "value1"], ["tag2", "value2"], ["tag3", "value3"]];

for (var i=0; i<arr.length; i++) {
   var key = arr[i][0],
       value = arr[i][1];

   data[key] = value;
}

$("#LB").load("serverSideFile.php", data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:08:40.947

```
var myData = [["tag1", "value1"], ["tag2", "value2"], ["tag3", "value3"]];    

var requestData = {};

$.each(myData, function(i, item) {
   requestData[item[0]] = item[1];
});

$("#LB").load("serverSideFile.php", requestData); 
```

# java - Android：返回Activity时如何在EditText中保存值

> ID：12818912
> 
> 赞同：1
> 
> 时间：2012-10-10T12:04:54.143
> 
> 标签：java, android, savestate

我正在尝试将输入的值保存到表单中，以便当用户返回活动时输入的内容保持填充状态。因为它现在起作用了。用户可以输入详细信息并单击“发送按钮”。下一个活动将显示用户输入内容的详细信息。如果用户选择“后退按钮”，用户会返回上一个活动，但会从表单中的字段中擦除内容。任何建议，将不胜感激。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
     public final static String EXTRA_FROM = "com.example.assignment1.FROM";
     public final static String EXTRA_TO = "com.example.assignment1.TO";
     public final static String EXTRA_CC = "com.example.assignment1.CC";
     public final static String EXTRA_SUBJECT = "com.example.assignment1.SUBJECT";
     public final static String EXTRA_COMPOSE = "com.example.assignment1.COMPOSE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        String from = emailFrom.getText().toString();
        outState.putString(EXTRA_FROM, from);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedState)
    {
        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        String from = savedState.getString(EXTRA_FROM);
        emailFrom.setText(from);
    }
    public void emailSend (View sendButton) 
    {
        Intent intent = new Intent(this,DisplayEmailActivity.class);
        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        EditText emailTo =(EditText) findViewById(R.id.editEmailTo);
        EditText emailCc =(EditText) findViewById(R.id.editEmailCc);
        EditText emailSubject =(EditText) findViewById(R.id.editEmailSubject);
        EditText emailCompose =(EditText) findViewById(R.id.editEmailCompose);

        String from = emailFrom.getText().toString();
        String to = emailTo.getText().toString();
        String cc = emailCc.getText().toString();
        String subject = emailSubject.getText().toString();
        String compose = emailCompose.getText().toString();

        intent.putExtra(EXTRA_FROM,from);
        intent.putExtra(EXTRA_TO,to);
        intent.putExtra(EXTRA_CC,cc);
        intent.putExtra(EXTRA_SUBJECT,subject);
        intent.putExtra(EXTRA_COMPOSE,compose);

        startActivity(intent);
    }

    public void emailClear (View clearButton) {
         ((EditText) findViewById(R.id.editEmailFrom)).setText("");
         ((EditText) findViewById(R.id.editEmailTo)).setText("");
         ((EditText) findViewById(R.id.editEmailCc)).setText("");
         ((EditText) findViewById(R.id.editEmailBcc)).setText("");
         ((EditText) findViewById(R.id.editEmailSubject)).setText("");
         ((EditText) findViewById(R.id.editEmailCompose)).setText("");  
    }

} 
```

第二次活动……

```
public class DisplayEmailActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_email);

        Intent intent = getIntent();

        String from = intent.getStringExtra(MainActivity.EXTRA_FROM);
        String to = intent.getStringExtra(MainActivity.EXTRA_TO);
        String cc = intent.getStringExtra(MainActivity.EXTRA_CC);
        String subject = intent.getStringExtra(MainActivity.EXTRA_SUBJECT);
        String compose = intent.getStringExtra(MainActivity.EXTRA_COMPOSE);

        TextView textFrom =(TextView)findViewById(R.id.displayEmailFrom);
        TextView textTo =(TextView)findViewById(R.id.displayEmailTo);
        TextView textCc =(TextView)findViewById(R.id.displayEmailCc);
        TextView textSubject =(TextView)findViewById(R.id.displayEmailSubject);
        TextView textCompose =(TextView)findViewById(R.id.displayEmailCompose);

        textFrom.setText(from);
        textTo.setText(to);
        textCc.setText(cc);
        textSubject.setText(subject);
        textCompose.setText(compose);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_display_email, menu);
        return true;
    }

    public void emailBack (View backButton){
        Intent intent = new Intent(this,MainActivity.class);

        startActivity (intent);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:07:39.303

`emailBack`开始一个全新的活动。只是`finish`打电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:11:36.650

使用共享首选项...要创建字符串值，请使用 -

```
String string12 = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getString("butname12", " "); 
```

如果你想改变它或重写 -

```
getSharedPreferences("PREFERENCE", MODE_PRIVATE)
                    .edit()
                    .putString("butname12", "0" )
                    .commit(); 
```

调用保存值的​​含义-

```
String ss = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getString("butname12", " "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:11:48.087

换成这样的方法，

```
public void emailBack (View backButton){

    onBackPressed();
} 
```

# database - 没有可用备份介质时如何恢复 MaxDB 实例？

> ID：12818920
> 
> 赞同：1
> 
> 时间：2012-10-10T12:05:16.047
> 
> 标签：database, disaster-recovery, maxdb

我有一个关于将 MaxDB 数据库实例从损坏的服务器（当该服务器的文件已恢复）移动到新安装的服务器的问题？

我问的问题在这里：[http ://scn.sap.com/thread/3249060](http://scn.sap.com/thread/3249060)

是否可以从仅复制配置和数据文件夹的另一个数据库服务器恢复数据库？

**这是我的情况：**

1.  有一台服务器（MaxDB 版本 7.5.00.31）坏了，所有文件都恢复了 - 只有一个数据库，比如说 mydb。

2.  我安装了另一个服务器版本 7.5.00.34 并创建了 mydb 数据库的新实例。

3.  由于数据库没有备份介质，我从旧服务器复制了配置和数据文件夹并尝试启动数据库。它未能创建 Data-1-1.bad 文件，说 -8888 错误断开连接。

是否可以仅从不同服务器上的数据卷重新创建数据库？假设我们可以保留目录结构。

我很感激任何帮助:)

谢谢，

西尔韦斯特

**更新：** 我会回答这个问题，因为我几乎按照我在问题中描述的方式做到了这一点。恢复后数据文件必须已损坏。下一个恢复方法必须克服这个问题。

所以步骤是：

1.  安装新的 MaxDB 环境。

2.  创建数据库的新实例，保持目录结构与粉碎前相同。不知道是否必须维护目录结构。

3.  停止数据库（它将在创建后启动）。

4.  交换数据库的数据和配置文件。

5.  重新启动数据库 - 如果数据文件没有损坏，应该没问题。

我也在这里更新了问题：http: [//scn.sap.com/thread/3249060](http://scn.sap.com/thread/3249060)

谢谢，

西尔韦斯特

# html - 如何将 XSLT 标记放在 HTML 属性中？

> ID：12818924
> 
> 赞同：0
> 
> 时间：2012-10-10T12:05:17.867
> 
> 标签：html, xslt

我在元描述 HTML 标记中设置了一个带有“meta_words”命名空间的 XSLT 变量“描述”。

你有解决办法吗？

这是代码错误

```
<meta name="description" content="<xsl:value-of match="meta_words" select="$description" />" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:16:19.537

> 这是代码错误
> 
> ```
> <meta name="description" content="<xsl:value-of match="meta_words" select="$description" />" /> 
> ```

的确，这是错误的。该`xsl:value-of`指令没有`match`属性——因此不清楚您实际想要做什么以及结果应该是什么样子。

这就是我*猜*你想要的。

**使用**：

```
<meta name="description" content="{$description}"/> 
```

**更新**：

从 OP 发表的评论看来，似乎有一个名为的参数`$meta_words:description`——而不是一个名为的参数/变量`$description`。

在这种情况下，上述解决方案必须修改为：

```
<meta name="description" content="{$meta_words:description}"/> 
```

并且前缀的正确命名空间定义`"meta_words"`必须在范围内（通常将此类命名空间定义放在`xsl:stylesheet`元素上）。

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:meta_words="some:meta_words" exclude-result-prefixes="meta_words">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="meta_words:description" select="'XYZ'"/>

 <xsl:template match="/">
     <meta name="description" content="{$meta_words:description}"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未用于此演示）时，将产生所需的正确结果**：

```
<meta name="description" content="XYZ"/> 
```

# asp.net - html5 的视频无法播放

> ID：12818927
> 
> 赞同：0
> 
> 时间：2012-10-10T12:05:25.940
> 
> 标签：asp.net, visual-studio-2010, html, html5-video

我有一个 html5 的视频元素。我已将其实现为

```
 </head>
<body>
    <form id="form1" runat="server">

    <div>
    <video id="ss" runat="server"  controls="controls" tabindex="5"   class="video-js vjs-default-skin" data-setup="{}" poster="my_video_poster.png">
      <source src="Videos/2.mp4" type="video/mp4">
      </video>
     </div>

     <asp:Button ID="Button1" runat="server" Text="View" onclick="Button1_Click" />

    </form>
</body> 
```

在`cs`文件中

```
protected void Button1_Click(object sender, EventArgs e)
    {

        ss.Attributes.Add("src", "~/Videos/1.mp4");

    } 
```

我想通过单击按钮更改 html5 的 Src。但是这种特殊方法无法运行。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:45:47.203

该属性不翻译路径，甚至不知道这是一个路径，所以符号`~`不翻译为url路径。

`ss.Attributes.Add("src", "~/Videos/1.mp4");`

第二个错误，您尝试设置的属性不在源上。

`<source src="Videos/2.mp4" type="video/mp4">`

所以更正路径，以及属性的位置，可能是可行的。

# asp.net - 删除/更新后刷新 DataGrid

> ID：12818930
> 
> 赞同：0
> 
> 时间：2012-10-10T12:05:36.060
> 
> 标签：asp.net, linq-to-sql, sharepoint-2010, datagrid, linqdatasource

**设置**

我有一个应用程序页面，我尝试将其部署到 SharePoint 2010。该页面包含一个 SPGridView 和一个 LinqDataSource，如下所示：

```
<asp:UpdatePanel ID="Update" runat="server" >
    <ContentTemplate>
        <center>
            <asp:LinqDataSource runat="server"                    
                    ID="EntitiesSource" 
                    onSelecting="EntitiesSource_Selecting"                                
                    EnableDelete="true"
                    EnableUpdate="true"
                    EnableInsert="true" />

            <SharePoint:SPGridView runat="server"
                    ID="EntitiesGrid"
                    AutoGenerateColumns="false"
                    DataKeyNames="Key"
                    FilteredDataSourcePropertyName="Where"
                    FilteredDataSourcePropertyFormat='{1} == "{0}"'
                    OnRowDeleting="EntitiesGrid_RowDeleting"
                    OnRowUpdating="EntitiesGrid_RowUpdating"
                    AllowPaging="true"
                    AllowSorting="true"
                    PageSize="20"
                    ShowFooter="true"
                    DataSourceID="EntitiesSource">

                <pagersettings mode="Numeric"
                       position="Bottom"           
                       pagebuttoncount="20"/>

                <pagerstyle backcolor="Control"
                       verticalalign="Bottom"
                       horizontalalign="Center"/>

                <Columns>                            

                    <asp:CommandField HeaderText="Actions" ButtonType="Link" ShowEditButton="true" ShowDeleteButton="true" ShowCancelButton="true"  />
                    <asp:BoundField HeaderText="Key" DataField="Key" SortExpression="Key" />
                    <asp:BoundField HeaderText="Var a" DataField="A" SortExpression="A" />
                    <asp:BoundField HeaderText="Var b" DataField="B" SortExpression="B" />
                    <asp:BoundField HeaderText="Var c" DataField="C" SortExpression="C" />

                </Columns>                                    

            </SharePoint:SPGridView>  
        </center>

    </ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码如下所示：

```
public partial class EntitiesPage: LayoutsPageBase
{
    private MyContext _dbcontext;
    private MyContext DBContext
    {
        get
        {
            if (_dbcontext == null)
            {
                string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["entitiesConnectionString"].ConnectionString;
                _dbcontext = new MyContext(connectionString);
            }

            return _dbcontext;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        EntitiesGrid.PagerTemplate = null;
    }

    protected void EntitiesGrid_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {         
        string key = (string)e.Keys[0];
        DBContext.RemoveEntity(key);
        DBContext.SubmitChanges();

        //the entity is gone from the context now             
        EntitiesGrid.DataBind();                      
    }

    protected void EntitiesGrid_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        string key = (string)e.Keys["Key"];
        string newKey = (string)e.NewValues["Key"];

        if (string.Equals(key, newKey))
        {
            Entity entity = DBContext.GetEntity(key);
            entity.A = (string)e.NewValues["A"];
            entity.B = (string)e.NewValues["B"];
            entity.C = (string)e.NewValues["C"];
            DBContext.SubmitChanges();
        }
        else
        {
            //We need to remove the old one and make a new one since we can't edit the key
            DBContext.RemoveEntity(key);
            DBContext.AddEntity(new Entity{ Key = newKey, A = (string)e.NewValues["A"], B = (string)e.NewValues["B"], C = (string)e.NewValues["C"] });
            DBContext.SubmitChanges();
        }
    }

    protected void EntitiesSource_Selecting(object sender, LinqDataSourceSelectEventArgs e)
    {
        e.Result = DBContext.Entities;
    } 
```

'MyContext' 类是一个自定义类，它继承 DataContext 并使用 linq2sql。它有一个我自己的实体类的表。

**问题**

从数据库中读取数据，排序和分页工作得非常好而且非常快。我的网格更改而无需重新加载页面。但是，当我更新或删除一行时，我需要手动刷新才能看到对数据库所做的更改。我确信我所做的更改会立即针对 DataContext 和数据库进行。这里缺少的链接似乎是让 DataSource 或 GridView（或两者）刷新。

调试这一直很痛苦，我真的无法判断（或者我不知道如何判断）问题是更新我的 DataSource/GridView 的对象，还是在这些对象之后向用户发送回调已更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:47:51.710

您是否尝试创建一个将数据源绑定到网格的方法并在进行更改后调用该方法？

```
// Create a method for binding the data
public void bindTheGrid()
{
     EntitiesGrid.Datasource = variables; //This is whatever your properties are etc
     EntitiesGrid.DataBind();
}

//Call the method after you succesffuly make changes to the database etc
bindTheGrid(); 
```

# objective-c - 如何在 uiTableviewCell 中获取下一个 indexPath

> ID：12818936
> 
> 赞同：0
> 
> 时间：2012-10-10T12:05:53.637
> 
> 标签：objective-c, ios, uitableview, nsfetchedresultscontroller

我想用 5 个不同的图像视图填充我的自定义表格视图单元格。在我的 customTableViewCell 中，我这样做了。

```
-(void)setImage:(UIImage *)image forPosition:(NSUInteger)position{
    if(position == 1){
        _img_Player1.image = image;
    }else if(position == 2){
        _img_Player2.image = image;
    }else if(position == 3){
        _img_Player3.image = image;
    }else if(position == 4){
        _img_Player4.image = image;
    }else if(position == 5){
        _img_Player5.image = image;
    }else if(position == 6){
        _img_Player6.image = image;
    }

} 
```

在我的 CellForRowAtIndexPath 中，我这样做了。

```
 static NSString *simpleTableIdentifier = @"PlayerCustomCell";

    PlayerCustomCell *cell = (PlayerCustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PlayerCustomCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }
    Team *team = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team.image]];
    UIImage* image = [[UIImage alloc] initWithData:imageData];
    for(int i=0;i<=5;i++)
    {
        [cell setImage:image forPosition:i];

    }

    return cell; 
```

目前我的 tableview 看起来像这样。

```
|---------------------------------------------------------------------|
|                                                                     |
|    bird image   bird image   bird image     bird image  bird image  |
|---------------------------------------------------------------------|
|                                                                     |
|   dog image    dog image    dog image    dog image   dog image      |
|---------------------------------------------------------------------|
|                                                                     |
|  cat image     cat image    cat image    cat image     cat image    |
|---------------------------------------------------------------------| 
```

我希望你能看到问题所在。我认为在设置图像之后它应该转到下一个 indexPath。我的问题是现在我该怎么做？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:20:50.410

首先在.h文件中添加5个这样的NSData

```
 NSData *birdImgData;
  NSData *dogImgData;
  NSData *catImgData;
  NSData *aImgData;
  NSData *bImgData; 
```

在 CellForRowAtIndexPath 中这样做：

```
 static NSString *simpleTableIdentifier = @"PlayerCustomCell";

PlayerCustomCell *cell = (PlayerCustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PlayerCustomCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

if(indexPath.row == 0){

Team *team = [self.fetchedResultsController objectAtIndexPath:indexPath];
if(!birdImgData){
   birdImgData = [[NSData alloc] initWithContentsOfURL:[NSURL 
URLWithString:team.image]];
   UIImage* image = [[UIImage alloc] initWithData:birdImgData];
   [cell setImage:image forPosition:1];
}

NSIndexPath *path1 = [NSIndexPath indexPathForRow:indexPath.row+1 inSection:0];
Team *team1 = [self.fetchedResultsController objectAtIndexPath:path1];
if(!dogImgData){
    dogImgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team1.image]];
   UIImage* image = [[UIImage alloc] initWithData:dogImgData];
   [cell setImage:image forPosition:2];
}

NSIndexPath *path2 = [NSIndexPath indexPathForRow:indexPath.row+2 inSection:0];
Team *team2 = [self.fetchedResultsController objectAtIndexPath:path2];
if(!catImgData){
   catImgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team2.image]];
   UIImage* image = [[UIImage alloc] initWithData:catImgData];
   [cell setImage:image forPosition:3];
}

NSIndexPath *path3 = [NSIndexPath indexPathForRow:indexPath.row+3 inSection:0];
Team *team3 = [self.fetchedResultsController objectAtIndexPath:path3];
if(!aImgData){
   aImgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team3.image]];
   UIImage* image = [[UIImage alloc] initWithData:aimageData];
   [cell setImage:image forPosition:4];
}

NSIndexPath *path4 = [NSIndexPath indexPathForRow:indexPath.row+4 inSection:0];
Team *team4 = [self.fetchedResultsController objectAtIndexPath:ipath4];
if(!bImgData){
   bImgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team4.image]];
   UIImage* image = [[UIImage alloc] initWithData:bimageData];
   [cell setImage:image forPosition:5];
}
}
else
{
  if(birdImgData){
    UIImage* image = [[UIImage alloc] initWithData:birdImgData];
   [cell setImage:image forPosition:1];
  }
  if(dogImgData){
    UIImage* image = [[UIImage alloc] initWithData:dogImgData];
   [cell setImage:image forPosition:2];
  }
  if(catImgData){
    UIImage* image = [[UIImage alloc] initWithData:catImgData];
   [cell setImage:image forPosition:3];
  }
  if(aImgData){
    UIImage* image = [[UIImage alloc] initWithData:aImgData];
   [cell setImage:image forPosition:4];
  }
  if(bImgData){
    UIImage* image = [[UIImage alloc] initWithData:bimageData];
   [cell setImage:image forPosition:5];
  }
} 

return cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:46:07.393

你的代码

```
UIImage* image = [[UIImage alloc] initWithData:imageData];
for(int i=0;i<=5;i++)
{
    [cell setImage:image forPosition:i];

} 
```

为单元格中的每个 imageView 设置相同的图像。此代码可以展开为类似

```
UIImage* image = [[UIImage alloc] initWithData:imageData];
[cell setImage:image forPosition:0];
[cell setImage:image forPosition:1];
[cell setImage:image forPosition:2];
[cell setImage:image forPosition:3];
[cell setImage:image forPosition:4];
[cell setImage:image forPosition:5]; 
```

因此，您得到的正是您所要求的：单元格中每个位置的相同图像。如果您希望每个单元格中有不同的图像，则需要为六个不同的播放器图像获取六个不同的链接，然后您需要下载这些图像并将每个图像设置在单元格中的适当位置。

# sql - 如何按范围创建包含日期的表格

> ID：12818942
> 
> 赞同：1
> 
> 时间：2012-10-10T12:06:18.037
> 
> 标签：sql, oracle, oracle-sqldeveloper

我正在尝试从 oracle 开发人员那里获得结果。我需要加入 3 个带日期的表，输出应该是：

```
Date        sum    count   num
2012-10-01  5000   30      15
2012-10-02  0      0       0
2012-10-03  60     150     350
2012-10-04  20     200     300
2012-10-05  1000   100     200
2012-10-06  1500   109     400 
```

输入范围在 2012-10-01 和 2012-10-06 之间。如果找不到数据，则在所有其他列中将日期设为 0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:15:36.013

您应该生成所有日期，然后在日期上加入表格。

类似的东西（我用了两张桌子）：

```
select date_col, nvl(sum(t1.val),0) + nvl(sum(t2.val,0)) as sum
from 
  (select to_date('01-OCT-2012','dd-mon-yyyy') + level - 1 as date_col
   from dual connect by level <= to_date('06-OCT-2099','dd-mon-yyyy') - to_date('01-OCT-2012','dd-mon-yyyy') + 1
   ) d
left join table1 t1 on (t1.date_column = d.date_col)
left join table2 t2 on (some_t1_t2_join_condition and t2.date_column = d.date_col); 
```

# c# - 用空行填充 DatagridView

> ID：12818947
> 
> 赞同：0
> 
> 时间：2012-10-10T12:06:27.993
> 
> 标签：c#, winforms, datagridview

我的 Windows 窗体中有一个 datagridview。那是根据组合框中的选定值从数据库中填充数据。对于某些选定的项目，数据库中有记录。有些人没有记录。那时我需要维护一个固定大小的datagridview，其中没有填充任何记录。有没有办法做到这一点。如果是，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:22:42.873

如果您的数据源看起来与此类似：

```
 public class MyDataSource : IEnumerable<SomeClass>
    {} 
```

- 你可以简单地这样做：

```
 public IEnumerator<SomeClass> GetEnumerator()
    {
        if (sourceItems == null)
        {
            yield return SomeClass.Empty;
            //as many times as you want "empty" lines in datagrid
        }
        else
        {
            foreach (var item in sourceItems)
               yield return item;
        }
    } 
```

“sourceItems”是“SomeClass”类型的项目的内部列表。有很多方法可以做到这一点，这只是其中之一。

您今天所做的是从数据库加载数据并将结果直接写入 datagridview。我的建议是从数据库加载数据（就像现在一样），而不是将数据写入数据网格，而是创建一个类来保存项目（数据源类）。然后将该类提供给类似于以下的数据网格：

```
MyDataSource ds = new MyDataSource();
GetDataFromDatabase().Select(p=>ds.Add(p));
BindingSource bs = new BindingSource(ds, ");
theDataGrid.DataSource = bs; 
```

然后使用 BindingSource 来控制内容（只是为了展示一些你可能会做的事情）：

```
 bs.AllowNew = false;
 bs.Position = bs.Count - 1;
 bs.ListChanged += new ListChangedEventHandler(bindingSource_ListChanged);
 bs.CurrentItemChanged += new EventHandler(bindingSource_CurrentItemChanged); 
```

# sonarqube - 在声纳中重用 FindBugs 和 Checkstyle 报告

> ID：12818952
> 
> 赞同：0
> 
> 时间：2012-10-10T12:06:54.557
> 
> 标签：sonarqube

我正在使用 ANT 作为构建工具，并希望在声纳中重用我的 checkstyle 和 findbugs 报告。我正在使用 sonar-runner 来获取代码覆盖率概述，所以请有人建议我一种方法来实现它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:15:44.273

我的建议是简化您的 ANT 构建并使用 Sonar 运行 findbugs 和 checkstyle。

Sonar 旨在默认运行针对 Java 代码的 findbugs、checkstyle 和 PMD 等工具。它将下载软件并自动执行此分析，最重要的是，它将根据您在 Sonar 服务器上设置的质量配置文件设置执行此操作。

只有像代码覆盖率报告这样的“动态”指标报告是从外部加载的。

# 更新

Sonar 有一个[ANT 任务](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Ant+Task)，可以集成到您的构建中。

以下答案提供了将 Sonar 与 ANT 结合使用的示例

*   [SONAR - 使用 Cobertura 测量代码覆盖率](https://stackoverflow.com/questions/7747587/sonar-measure-code-coverage-using-cobertura/7760960#7760960)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T06:59:27.530

您可以为此目的使用 Ant 任务。

自 sonar 2.6 以来，人们改进了对 ANT 的支持。

下载[Sonar Ant 任务](http://www.java2s.com/Code/Jar/s/Downloadsonaranttask21jar.htm)，更新您的脚本

# php - 我的表格应该如何在我的 PhpMyAdmin 中看起来像（代码），才能让这个“喜欢”按钮起作用

> ID：12818954
> 
> 赞同：0
> 
> 时间：2012-10-10T12:06:53.793
> 
> 标签：php, sql

我想在我的 PhpMyAdmin 中创建一个表，以便能够使用此代码...

```
if($_POST['like']) 
{   
echo "BlahBlahBlah.";
$sql = "UPDATE table set `likes` = `likes`+1 where `product_id` = '1'";
$result=mysql_query($sql);
}

<form action="<?php echo $_SERVER['PHP_SELF']?>" method="POST">
<input type = "submit" name="like" value = 'like'"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:10:13.643

您的表格将包含两个字段，如下所示

```
like int()

product_id primary key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:14:22.703

我会这样做：

表名：“表”字段：

1.  “product_id” int primary_key auto_increment
2.  “喜欢” int 默认值：0

自动增量不是必需的，但建议使用。此外，您可能还需要一些额外的字段以及额外的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:17:00.493

你需要知道你喜欢什么。哪个视频、消息、项目或其他东西。我总是做这样的事情（以视频为例）：

![like 的表关系](../Images/90ec8f4a7ff062437ff7ac6d7aafc7a4.png)

现在我们能够知道哪个视频有多少赞。在您的保存脚本中，您必须知道`video_id`能够更新喜欢的内容。

希望这可以帮助。

# xml - XML 模式中子元素的命名空间前缀

> ID：12818957
> 
> 赞同：3
> 
> 时间：2012-10-10T12:07:01.650
> 
> 标签：xml, xsd, parent-child, xml-namespaces

我目前正在学习 XML，并且已经了解了与多个名称空间一起使用的 XML Schema 的奇妙世界。

我的问题是我应该何时不必声明命名空间前缀。

考虑以下 XML 模式片段：

```
<A:schema   xmlns:A="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="B" 
        xmlns:B="B" 
        elementFormDefault="qualified">

    <A:element name="foo">
        <complexType>                   <!-- or A:complexType?-->
            <element name="bar" type="B:myType"/>       <!-- or A:element?-->
        </complexType>
    </A:element>

    <B:complexType name="myType">
        <choice>                         <!--or B:choice?-->
            <element name="baz" type="string"/>      <!--or B:element?-->
            <element name="bas" type="string"/>      <!--or B:element?-->
        </choice>
    </B:complexType>

</A:schema> 
```

我是否必须在具有命名空间前缀的节点的所有子节点上指定命名空间前缀，或者这是继承的？或者`A:complexType`与`complexType`它的父节点附加了 A 命名空间前缀时不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:30:58.130

前缀与命名空间 URI的*绑定*由子元素继承，但元素本身不会自动放置在与其父元素相同的命名空间中。如果它们是，将无法用*不在*命名空间中的子元素来表达命名空间中的元素。在您的示例中，作为架构定义一部分的所有元素都需要位于`http://www.w3.org/2001/XMLSchema`命名空间中（通常映射到`xsd`or`xs`前缀）：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="urn:B" 
        xmlns:B="urn:B" 
        elementFormDefault="qualified">

    <xs:element name="foo">
        <xs:complexType>
            <xs:element name="bar" type="B:myType"/>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="myType">
        <xs:choice>
            <xs:element name="baz" type="xs:string"/>
            <xs:element name="bas" type="xs:string"/>
        </xs:choice>
    </xs:complexType>

</xs:schema> 
```

例外情况是当您使用`xmlns="..."`which 为没有前缀的元素定义默认命名空间时，例如

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" ...>
   <element ...>
      <complexType ...> 
```

相当于

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" ...>
   <xs:element ...>
      <xs:complexType ...> 
```

`type="B:myType"`是正确的，因为它指的是架构中命名的类型，`myType`而`targetNamespace`您又将其映射到前缀`B`。

# android - 无法通过“Graph API”获得所有朋友

> ID：12818960
> 
> 赞同：1
> 
> 时间：2012-10-10T12:07:03.693
> 
> 标签：android, facebook, facebook-graph-api

我们正在开发一款 APP 将 Facebook 好友同步到手机联系人，我们尝试根据 API 参考通过“Graph API”获取联系人：

朋友：[https](https://graph.facebook.com/me/friends?access_token=) ://graph.facebook.com/me/friends?access_token= ...

但我们未能获得我 Facebook 帐户的所有朋友。返回的 JSON 数据中总是有一些朋友不在。

在我的一个测试帐户中，有 19 个好友，但无论我尝试多少次，总是失去 1 个指定好友。

我用其他账号，有136个朋友，但是失去了10个朋友。

“Graph API”只是对开发者开放的部分数据，还是facebook不能返回正确的结果？

还有其他人遇到这个问题吗？或者还有什么要注意的如何获得朋友？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:40:30.827

就像之前在这里解释的那样——如果用户禁用平台上的所有应用程序，您的应用程序将根本无法“看到”他**。**这包括朋友列表——如果您的朋友完全禁用了平台应用程序，那么您将**不会**通过`/me/friends`连接返回他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:13:53.080

为此使用[Hackbook](http://developers.facebook.com/docs/mobile/android/hackbook/)。它有graph_or_fql两种方式来结交朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:22:59.167

使用偏移量和限制

```
https://graph.facebook.com/me/friends?access_token= &offset= &limit 
```

# javascript - .js 文件中用于简单幻灯片的重新加载按钮，无法使其工作

> ID：12818968
> 
> 赞同：1
> 
> 时间：2012-10-10T12:07:23.907
> 
> 标签：javascript, reload

解决了

大家好，我刚开始使用基本的 javascript，只是想知道如何在将所有代码保留在 gallery.js 中的同时从按钮调用此函数

```
<input type="button" value="Reload Page" onClick="window.location.reload()"> 
```

画廊.js 文件

```
var slideShow = new Array();
slideShow[0]="images/1.jpg";
slideShow[1]="images/2.jpg";
slideShow[2]="images/3.jpg";
slideShow[3]="images/4.jpg";
slideShow[4]="images/5.jpg";//loads pictures
slideShow[5]="images/6.jpg";
var thisPic = 0;

function reloadURL()
{
    window.location.reload();
}   

function processNext() {
    if (document.images && thisPic < 5) { //process checks if this pic is less than 2
        thisPic++;
        document.getElementById("picture").src=slideShow[thisPic];
    else if( window.location.reload()
    }
}
window.onload = init; //initially loads

function init() {
document.getElementById("next").onclick=processNext; //on button click next picture     is shown

} 
```

画廊.html

```
<div id="content">
<h2>Gallery</h2>
    <p>This is the gallery</p>
    <img src="images/1.jpg" id="picture" alt="displays a slide show of 5 pictures"/><br/>
    <input type="button" value="Press this button for next picture" id="next" />
    <input type="button" value="Reload" onclick="reloadURL();" />

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:11:25.643

尝试： `<input type="button" value="Reload Page" onClick="processNext();">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:13:16.470

首先，您应该在`<head>`html 文件的部分中包含 JavaScript 文件：

```
<script type="text/javascript" src="gallery.js"></script> 
```

然后您可以调用该文件中包含的任何函数：

```
<input type="button" value="Reload Page" onClick="processNext();"> 
```

# c# - Socket.Bind 然后连接到 MS Loopback NIC

> ID：12818970
> 
> 赞同：1
> 
> 时间：2012-10-10T12:07:26.907
> 
> 标签：c#, java, windows, tcp, loopback

我在**Windows 7 x64中创建了一个环回接口卡**

说我**本地机器**的IP是

20.200.20。**30** / 255.255.255.128

**Loopback 适配器**的 IP是

20.200.20。**65** / 255.255.255.128

我在端口 7800 上的 20.200.20.30 上打开了一个监听套接字

在另一个线程/应用程序上，我在 20.200.20.65 上绑定了一个套接字，然后连接 20.200.20.30 但它因连接超时而*失败*。

不过，它在 Windows XP 上运行良好。

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:30:39.780

将出站套接字绑定到环回地址，然后尝试将其连接到非环回地址没有任何意义。只需跳过绑定步骤。几乎没有理由在 VPN 之外执行此操作，但事实并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:01:07.663

完毕。

我所要做的就是为两个网卡启用弱主机

netsh 接口 ipv4 设置接口“MainNIC”weakhostsend=启用 netsh 接口 ipv4 设置接口“MainNIC”weakhostreceive=启用

netsh 接口 ipv4 设置接口“LoopbackNIC”weakhostsend=启用 netsh 接口 ipv4 设置接口“LoopbackNIC”weakhostreceive=启用

# c#-4.0 - TabOrder 不起作用

> ID：12818974
> 
> 赞同：2
> 
> 时间：2012-10-10T12:07:36.700
> 
> 标签：c#-4.0, combobox, textbox, tablelayoutpanel, tab-ordering

我正在使用 Visual Studio 2010，我试图将制表符顺序放在我的`textbox`和`combobox`控件中。

控件放在 a 中`TableLayoutPanel`，很难`tab order`为控件选择。

有没有更好的方法来设置`tab order`？

![没有 <code>Tab 顺序</code>](../Images/e4e4d8b24b4dfa68748aacdb8b9a53d4.png)

![按下“标签顺序”键](../Images/3f47f2d87b75fa50733b37f9ae56d00c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:32:09.930

找到一篇关于[Windows 窗体的自动运行时选项卡顺序管理](http://www.codeproject.com/Articles/8406/Automatic-Runtime-Tab-Order-Management-for-Windows)的好文章。可以为任何应用程序下载和导入此 dll。它提供垂直和水平`Tab Order`。和我一起工作得很好。:)

# c# - 无法调试 Outlook 的应用程序级加载项

> ID：12818975
> 
> 赞同：7
> 
> 时间：2012-10-10T12:07:37.357
> 
> 标签：c#, outlook, vsto, ms-office, outlook-addin

这是我第一次使用 .NET 为 Outlook 创建应用程序级插件。通过使用教程，我写下了一些代码，并且成功构建了，但我无法调试代码。在调试警报框时显示：

> 您无法运行或调试此项目，因为未安装所需版本的 Microsoft 应用程序。

我正在使用**Visual Studio 2010**和**MS Office 2007**。为了调试代码我应该怎么做？我可以对代码进行任何更改以便调试它。

这是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using Outlook = Microsoft.Office.Interop.Outlook;
using Office = Microsoft.Office.Core;
using Microsoft.Office.Interop.Outlook;
namespace OutlookAddIn1
{

    public partial class ThisAddIn
    {
        Outlook.Inspectors inspectors;
        event InspectorsEvents_NewInspectorEventHandler NewInspector;

        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            inspectors = this.Application.Inspectors;
            inspectors.NewInspector +=
            new Microsoft.Office.Interop.Outlook.InspectorsEvents_NewInspectorEventHandler(Inspectors_NewInspector); 
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {

        }
        void Inspectors_NewInspector(Microsoft.Office.Interop.Outlook.Inspector Inspector)
        {
            Outlook.MailItem mailItem = Inspector.CurrentItem as Outlook.MailItem;
            if (mailItem != null)
            {
                if (mailItem.EntryID == null)
                {
                    mailItem.Subject = "This text was added by using code";
                    mailItem.Body = "This text was added by using code";
                }

            }
        }
        #region VSTO generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T14:02:25.497

问题不在于您的代码 - 它是您的项目文件和您安装的 MS Office 版本的错误配置。请参阅有关[在 中进行编辑](https://stackoverflow.com/a/12284425/175679)[以匹配正确的 Office 版本的](https://stackoverflow.com/a/12284425/175679)[相关 SO 帖子`DebugInfoExeName``csproj`](https://stackoverflow.com/a/12284425/175679)。

```
Office Version | Version Number
---------------+-----------------
    2007       |   12.0
    2010       |   14.0
    2013       |   15.0
    2016       |   16.0 
```

对于**MS Office 2007**，您的项目文件`DebugInfoExeName`应为：

> DebugInfoExeName="#Software\Microsoft\Office\12.0\Outlook\InstallRoot \Path#outlook.exe"

# c++ - （数字）和（-数字）的含义

> ID：12818978
> 
> 赞同：16
> 
> 时间：2012-10-10T12:07:52.123
> 
> 标签：c++, c

是什么意思 `(number) & (-number)`？我已经搜索了它，但无法找到含义

我想`i & (-i)`在 for 循环中使用，例如：

```
for (i = 0; i <= n; i += i & (-i)) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-10T12:10:39.867

假设 2 的补码（或`i`无符号）`-i`等于`~i+1`。

`i & (~i + 1)`是提取 的最低设置位的技巧`i`。

它之所以有效，是因为 +1 实际上所做的是设置最低清除位，并清除所有低于该位的位。`i`因此，两者中唯一设置的`~i+1`位是最低设置位`i`（即 中的最低清除位`~i`）。低于 的位在 中清零`~i+1`，高于 的位在`i`和之间不相等`~i`。

除非循环体修改`i`，否则在循环中使用它似乎很奇怪，因为`i = i & (-i)`它是幂等操作：执行两次会再次给出相同的结果。

[编辑：在其他地方的评论中，您指出代码实际上是`i += i & (-i)`. 因此，对于非零值所做的`i`是清除 的最低组设置位`i`，并在其上方设置下一个清除位，例如 101100 -> 110000。对于`i`没有高于最低设置位（包括`i = 0`）的清除位，它设置为 0。因此，如果不是因为从 开始`i`的事实，每个循环将*至少*增加前一个循环的两倍，有时甚至更多，直到最终它超过并中断或进入并永远循环。`i``0``i`*`n``0`*

 *在没有注释的情况下编写这样的代码通常是不可原谅的，但根据问题的领域，这*可能*是一个“明显”的值序列循环。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T12:51:34.770

我想我只需花一点时间来展示它是如何工作的。此代码为您提供最低设置位的值：

```
int i = 0xFFFFFFFF; //Last byte is 1111(base 2), -1(base 10)
int j = -i;         //-(-1) == 1
int k = i&j;        //   1111(2) = -1(10) 
                    // & 0001(2) =  1(10)
                    // ------------------
                    //   0001(2) = 1(10). So the lowest set bit here is the 1's bit

int i = 0x80;       //Last 2 bytes are 1000 0000(base 2), 128(base 10)
int j = -i;         //-(128) == -128
int k = i&j;        //   ...0000 0000 1000 0000(2) =  128(10) 
                    // & ...1111 1111 1000 0000(2) = -128(10)
                    // ---------------------------
                    //   1000 0000(2) = 128(10). So the lowest set bit here is the 128's bit

int i = 0xFFFFFFC0; //Last 2 bytes are 1100 0000(base 2), -64(base 10)
int j = -i;         //-(-64) == 64
int k = i&j;        //   1100 0000(2) = -64(10) 
                    // & 0100 0000(2) =  64(10)
                    // ------------------
                    //   0100 0000(2) = 64(10). So the lowest set bit here is the 64's bit 
```

对于无符号值，它的工作原理相同，结果始终是最低设置位的值。

鉴于您的循环：

```
for(i=0;i<=n;i=i&(-i)) 
```

没有设置位 ( `i=0`)，因此您将在此操作的增量步骤中返回 0。所以这个循环将永远持续下去，除非`n=0`或被`i`修改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-16T20:16:16.030

假设负值使用二进制补码。然后`-number`可以计算为`(~number)+1`，翻转位并加 1。

例如，如果`number = 92`。那么这就是它在二进制中的样子：

```
number               0000 0000 0000 0000 0000 0000 0101 1100
~number              1111 1111 1111 1111 1111 1111 1010 0011
(~number) + 1        1111 1111 1111 1111 1111 1111 1010 0100
-number              1111 1111 1111 1111 1111 1111 1010 0100
(number) & (-number) 0000 0000 0000 0000 0000 0000 0000 0100 
```

您可以从上面的示例中看到，这`(number) & (-number)`给了您最少的信息。

可以在IDE One上看到在线运行的代码：http: [//ideone.com/WzpxSD](http://ideone.com/WzpxSD)

这是一些C代码：

```
#include <iostream>
#include <bitset>
#include <stdio.h>
using namespace std;

void printIntBits(int num);
void printExpression(char *text, int value);

int main() {
  int number = 92;

  printExpression("number", number);
  printExpression("~number", ~number);
  printExpression("(~number) + 1", (~number) + 1);
  printExpression("-number", -number);
  printExpression("(number) & (-number)", (number) & (-number));

  return 0;
}

void printExpression(char *text, int value) {
  printf("%-20s", text);
  printIntBits(value);
  printf("\n");
}

void printIntBits(int num) {
    for(int i = 0; i < 8; i++) {
        int mask = (0xF0000000 >> (i * 4));
        int portion = (num & mask) >> ((7 - i) * 4);
      cout << " " << std::bitset<4>(portion);
    }
} 
```

这里还有一个 C# .NET 版本：[https ://dotnetfiddle.net/ai7Eq6](https://dotnetfiddle.net/ai7Eq6)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-07T19:20:08.860

该操作`i & -i`用于隔离相应整数的最低有效非零位。

*   在二进制符号`num`中可以表示为`a1b`，其中`a`表示最后一位之前的二进制数字，表示最后一位`b`之后的零。

*   `-num`等于`(a1b)¯ + 1 = a¯0b¯ + 1`。`b`由全零组成，所以`b¯`由全一组成。

    *   `-num = (a1b)¯ + 1`=> `a¯0b¯ + 1`=> `a¯0(0…0)¯ + 1`=> `¯0(1…1) + 1`=> `a¯1(0…0)`=>`a¯1b`
*   现在，`num & -num`=> `a1b & a¯1b`=>`(0..0)1(0..0)`

例如，如果 i = 5

```
| iteration | i | last bit position | i & -i|
|-------- |--------|-------- |-----|
| 1    | 5 = 101     | 0 | 1 (2^0)|
| 2    | 6 = 110     | 1 | 2 (2^1)|
| 3    | 8 = 1000    | 3 | 8 (2^3)|
| 4    | 16 = 10000  | 4 | 16 (2^4)|
| 5    | 32 = 100000 | 5 | 32 (2^5)| 
```

此操作主要用于二**叉索引树**中的上下移动树

PS：出于某种原因，stackoverflow 将表格视为代码:(*

# iphone - 视图切换和使用 Tab Bar Controller

> ID：12818981
> 
> 赞同：0
> 
> 时间：2012-10-10T12:07:56.263
> 
> 标签：iphone, ios5, uitabbarcontroller, tabbar

我有基于标签栏控制器的应用程序，在第一个栏项目有名为“主要”的项目

在主视图控制器上（根据选项卡栏上的“主”项）我有`UIScrollView`用于通过页面控件切换一些视图，这些视图包含 UIButtons（用于此上下文按钮）。

1）我如何去导航控制器（表格视图）与按钮操作的 TabBar 控制器关系，如果我使用：

```
TableViewController *newsViewController = [self.storyboard instantiateViewControllerWithIdentifier@"NewsViewController"];
[self.tabBarController presentViewController:newsViewController animated:YES completion:NULL]; 
```

有没有 Root TabBar 的 View，但期待它。

2）我怎样才能从按钮操作转到导航控制器（表格视图）不在 TabBar 控制器关系中，在这种情况下，我需要在目标`UITabBar`视图上也有 Root

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:34:08.200

这个示例应用程序可以为您提供很多帮助：

[示例应用程序链接](https://github.com/benbruscella/iPhone-TabBarController-With-NavigationController/downloads)

同一个问题的另一个链接是：

[类似的问题..](https://stackoverflow.com/questions/8681319/implement-uitabbarcontroller-uinavigationbar-in-project)

# linux - 将 ATTR{idVendor} 作为 udev 脚本中的参数传递

> ID：12818987
> 
> 赞同：11
> 
> 时间：2012-10-10T12:08:15.203
> 
> 标签：linux, shell, usb, udev

我有一个脚本，只要连接了供应商 1004 的 USB 设备，就会运行该脚本。我正在使用的 udev 规则有效并且看起来像这样。

```
SUBSYSTEM=="usb", ATTR{idVendor}=="1004", RUN+="/var/www/beta/trigger.php" 
```

现在我想在连接任何 USB 设备时运行此脚本，并将供应商 ID 作为参数传递。（因此脚本可以决定是否必须运行。）

到目前为止，添加一个可以在脚本中访问的参数已经奏效：

```
SUBSYSTEM=="usb", RUN+="/var/www/beta/trigger.php myparam" 
```

有人可以告诉我如何用 ATTR{idVendor} 的值替换“myparam”吗？我尝试了各种组合，但我从未得到预期的结果......

非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T16:36:53.560

只是为了补充这个答案， udev 还允许您将参数传递给`RUN`and `PROGRAM`。

从 udev 手册页：

```
 The NAME, SYMLINK, PROGRAM, OWNER, GROUP, MODE and RUN fields support simple
   printf-like string substitutions. The RUN format chars gets applied after
   all rules have been processed, right before the program is executed. It
   allows the use of device properties set by earlier matching rules. For all
   other fields, substitutions are applied while the individual rule is being
   processed. 
```

例如，您可以有这样的规则：

```
# Passes major, minor and serial number as parameters to script.
ACTION=="add", SUBSYSTEM=="usb", RUN+="/tmp/test.sh %M %m $attr{serial}" 
```

可用的替代品有：

```
 $kernel, %k
       The kernel name for this device.

   $number, %n
       The kernel number for this device. For example, ´sda3´ has kernel number
       of ´3´

   $devpath, %p
       The devpath of the device.

   $id, %b
       The name of the device matched while searching the devpath upwards for
       SUBSYSTEMS, KERNELS, DRIVERS and ATTRS.

   $driver
       The driver name of the device matched while searching the devpath
       upwards for SUBSYSTEMS, KERNELS, DRIVERS and ATTRS.

   $attr{file}, %s{file}
       The value of a sysfs attribute found at the device, where all keys of
       the rule have matched. If the matching device does not have such an
       attribute, follow the chain of parent devices and use the value of the
       first attribute that matches. If the attribute is a symlink, the last
       element of the symlink target is returned as the value.

   $env{key}, %E{key}
       A device property value.

   $major, %M
       The kernel major number for the device.

   $minor, %m
       The kernel minor number for the device.

   $result, %c
       The string returned by the external program requested with PROGRAM. A
       single part of the string, separated by a space character may be
       selected by specifying the part number as an attribute: %c{N}. If
       the number is followed by the ´+´ char this part plus all remaining
       parts of the result string are substituted: %c{N+}

   $parent, %P
       The node name of the parent device.

   $name
       The current name of the device node. If not changed by a rule, it
       is the name of the kernel device.

   $links
       The current list of symlinks, separated by a space character. The
       value is only set if an earlier rule assigned a value, or during a
       remove events.

   $root, %r
       The udev_root value.

   $sys, %S
       The sysfs mount point.

   $tempnode, %N
       The name of a created temporary device node to provide access to the
       device from a external program before the real node is created.

   %%
       The ´%´ character itself.

   $$
       The ´$´ character itself. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T12:15:49.520

`udev`为您设置了几个可以使用的环境变量，等等`ID_VENDOR`。试试那个小脚本：

```
#!/bin/bash

echo "Called by udev" >> /tmp/testenv
env >> /tmp/testenv
echo "Vendor id is $ID_VENDOR" >> /tmp/testenv 
```

把它放在一个规则中，你会看到为你设置了多少东西。

# android - 为什么构建Android ICS后会生成system.img.ext4？

> ID：12818989
> 
> 赞同：0
> 
> 时间：2012-10-10T12:08:20.710
> 
> 标签：android, linux, boot, android-build

在构建 Android ICS 时，会生成 system.img 和 system.img.ext4。为什么会生成 2 张这样的图像？我是否需要同时刷新它们才能使 ICS 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:26:46.833

不，您只需要刷新 system.img。

# c# - 调试代码时是否在 VS2010 中异步进行集成测试（使用 C# 代码）？

> ID：12818991
> 
> 赞同：0
> 
> 时间：2012-10-10T12:08:25.643
> 
> 标签：c#, asp.net-mvc-3, testing, integration-testing

关于集成测试，我遇到了以下问题。

代码（使用其他一些函数很简单）。我在`AddItem`函数上设置了断点。

```
[TestInitialize]
      public void MyTestInitialize() {
         Assert.IsTrue( AddItem() );
      }

 [TestCleanup]
      public void MyTestCleanup() {
         Assert.IsTrue( RemoveItem() );
      }

[TestMethod]
public void ListTest(){
   AClass test = new AClass();
   Assert.IsTrue(test.List().Count > 0);
}

private bool AddItem() {
  AClass obj = new AClass();

  Assert.IsTrue(obj.Add("test", "123")); //no duplicate will be allowed ! (return false if duplicate found)

  obj.Files = ConstructFiles();
  ...
  ...
}

private string[] ConstructFiles(){
  return Directory.GetFiles(@"/folder/files", "*.doc"); 
    //when execute the above code then the breakpoint from `AddItem` is reached !!!
} 
```

测试`ListTest`时会自动调用`AddItem`（因为`TestInitialize`属性）。

第一次调用没问题，但是当这个函数（`AddItem`）调用另一个函数时`ConstructFiles`，会到达断点`AddItem`并再次执行该函数。

为什么 ？

当然，我还有另一个使用`TestMethod`属性的测试，但是第一次调用时有些不清楚`AddItem`，它调用`ConstructFiles`.

# java - Spring 安全 LDAP 成功处理程序

> ID：12818992
> 
> 赞同：2
> 
> 时间：2012-10-10T12:08:27.083
> 
> 标签：java, spring, authentication, spring-security, ldap

我试图在我的 Web 应用程序中使用带有 LDAP 的 Spring 安全性实现登录成功处理程序。在线搜索后，我发现的唯一方法是实现自定义用户详细信息映射器，如下所示：

```
public class CustomUserDetailsMapper extends LdapUserDetailsMapper{

private static final String ROLE_NORMAL_USER = "Normal User";
private static final String ROLE_ADMIN = "Administrator";
@Override
public UserDetails mapUserFromContext(DirContextOperations ctx,
        String username, Collection<? extends GrantedAuthority> authority) {
    UserDetails originalUser = super.mapUserFromContext( ctx, username, authority );

    originalUser.getAuthorities();

    Set<AndaAuthority> roles = EnumSet.noneOf(AndaAuthority.class);

    roles.add(AndaAuthority.ROLE_ADMIN);

    for (GrantedAuthority auth : authority) {
        if (ROLE_NORMAL_USER.equalsIgnoreCase(auth.getAuthority())) {
            roles.add(AndaAuthority.ROLE_USER);
        } else if (ROLE_ADMIN.equalsIgnoreCase(auth.getAuthority())) {
            roles.add(AndaAuthority.ROLE_ADMIN);
        }
    }

    SecurityContextHolder.getContext().getAuthentication().getCredentials();

    User newUser = 
            new User( 
            originalUser.getUsername(), 
            originalUser.getPassword() != null? originalUser.getPassword():"", 
            originalUser.isEnabled(), 
            originalUser.isAccountNonExpired(), 
            originalUser.isCredentialsNonExpired(), 
            originalUser.isAccountNonLocked(), 
            roles );

            return newUser;
}
} 
```

这是有效的——当我在这里放一个断点时它停止了。但是，有没有更好的方法来为这种情况实现处理程序？我的意思是，整个身份验证部分是在“幕后”完成的，如果出现问题并且没有调用此方法，我无法真正调试，我没有其他方法可以知道哪里出了问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:10:00.893

对于其他想知道的人：您必须将成功处理程序声明为 bean，以便可以在 Spring 安全配置中链接它。

[此处](http://thinkinginsoftware.blogspot.ro/2011/07/redirect-after-login-to-requested-page.html)的实现 效果很好，您只需`authentication-success-handler-ref`在`<form-login>`配置标签中声明您的并覆盖该`onAuthenticationSuccess`方法。

可能存在其他更好的解决方案，但这是我发现并在我的案例中工作的解决方案。