# StackOverflow 问答 12739000-12739999

# c# - 是否有任何好的平面文件到 C#/.Net 的对象映射库？

> ID：12739000
> 
> 赞同：3
> 
> 时间：2012-10-05T03:17:25.903
> 
> 标签：c#, .net, orm, mapping, flat-file

我一直在四处寻找，想知道是否有任何好的库，特别是在 c# 或 .net 中专门用于映射平面文件？

到目前为止，我发现的唯一一个是[峡谷](http://sourceforge.net/projects/canyons/)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:01:45.137

以下链接指定了用于处理平面文件的 Altova MapForce 工具 [http://www.altova.com/mapforce/flat-file-mapping.html](http://www.altova.com/mapforce/flat-file-mapping.html)

以下链接指定使用 c# 进行平面文件验证：http: [//blog.flat-file.net/2011/12/flat-file-checker-validation-using-cnet.html](http://blog.flat-file.net/2011/12/flat-file-checker-validation-using-cnet.html)

希望这可以帮助。谢谢。

# visual-studio-2010 - 修改winnt.h

> ID：12739006
> 
> 赞同：0
> 
> 时间：2012-10-05T03:17:59.803
> 
> 标签：visual-studio-2010, visual-studio

我不小心在 Visual Studio 2010 中更改了这个文件

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\winnt.h 
```

我在这里修改了周围：

```
1082 extern "C++" // templates cannot be declared to have 'C' linkage
1083 template <typedef T, size_t N>
1084 char (*RtlpNumberOf( UNALIGNED T (&)[N] ))[N];
1085
1086 #define RTL_NUMBER_OF_V2(A) (sizeof(*RtlpNumberOf(A))) 
```

如果有人有这个文件的相同版本，你能把这部分的好代码发给我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:28:49.460

刚刚在其他地方找到了来源。问题是

```
template <typedef T, size_t N> 
```

应该是模板

```
template <typename T, size_t N> 
```

# javascript - 如何对齐表格中的表单字段以进行内联编辑？

> ID：12739008
> 
> 赞同：5
> 
> 时间：2012-10-05T03:18:21.550
> 
> 标签：javascript, jquery, html, css, spring

我正在使用 Spring、jsp、javascript、jquery 开发一个 webapp。

我使用数据表显示一个表格。当我单击表格行时，我希望它将所有字段更改为内联编辑输入、选择等。此外，我想在下一行显示一些额外的输入字段和一个保存按钮。

现在我看到了几种方法。我不确定该拿哪一个。

1.  我可以获得所选行的句柄，然后遍历 td 并将它们转换为输入/选择字段。然后我可以为新字段和保存按钮插入一个额外的行。我不认为这是一个干净的解决方案。我将不得不手动发布一个帖子，而不是使用表单的 Spring ModelAttribute 绑定。（我还能在这里使用 ModelAttribute 吗？）

2.  我可以在 jsp 文件中创建一个编辑表单，如下所示：

    `<form:form action="" commandName=""> <td> <input ... > </td> <td> <select ... > </td> </tr> <tr> <td> <label> <input new field> </td> <td> <button> </td> </tr>`

注意我在 jsp 文件中没有开头，因为我计划重用表中现有行中的 tr。这样我就可以拥有一个干净的表单，并且还可以使用我已经编写的将表单绑定到 Java 类的更新方法。此外，我不必担心输入字段与列名的对齐。

生成的 html 看起来像...

这种方法的问题是在 html 中放置表单元素会导致整个表单被限制在表格的一个单元格中，这看起来不太好并且弄乱了整个布局。有出路吗？我是否应该将表的内容替换为具有 colspan 的内容，然后将 div 放入此元素中并微调 css 以确保输入字段与表中的列名对齐？

![显示错误对齐的图像](../Images/227cec518d6b7861dae7eb1aa5a1bc11.png)

您可以提出更好的解决方案吗？如果问题不是很清楚，我可以填写更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:59:21.877

这就是我要做的（来自服务器端开发背景，因为我知道开发人员喜欢简单的解决方案）

1.  用一个表格包裹表格
2.  在编辑行（单击行）上打开一个 ajax 请求，该请求返回看起来像精确 tr 的纯 html，只有您想要包含的任何额外内容：

* * *

```
<tr><td><input type="text" name="text1" ... /></td><td>second row... </td></tr>
<tr><td colspan="2">And hey, here is more, and the save button ... </td></tr> 
```

* * *

1.  在 jQuery 中，将 tr 替换为检索到的内容`(myTr.replace($(ajaxResponse)))`或类似内容

2.  现在保存按钮是表单的常规提交

3.  如果你想通过 ajax 提交，一旦完成，在你的 ajax 响应中返回旧的 html 并用旧的 tr 替换两个 trs （你只需要通过给新的 trs 一个你可以在 jquery 中轻松找到的属性来挂钩它）

4.  不要忘记关闭全局键以防止重复编辑，用户可以一次编辑一行

* * *

**更新：添加第二个解决方案以在客户端而不是服务器上转储负载**

为了避免服务器超载（尽管在它成为一种常规习惯之前我不会担心它），您可以将表单字段作为 HTML 中的模板并使用字符串替换（或 jQuery 模板），而不是 ajaxing在第 2 步中获得响应，调用模板，并将字符串替换为保存在每一行中的属性......就像这样：

```
<div id="myTemplate"> // or you can use jQuery script templates
    <tr><td><input type="text" name="${Name}" ... /> id is ${Id}</td><td>${SecondRow}... </td></tr>
    <tr><td colspan="2">Save button here.... and may be more text ${MoreText}</td></tr>  
</div> 
```

在代码的每一行中添加足够的属性或 ID 以了解您想要替换的内容，如下所示：

```
<tr data-itemid="34"><td ><input type="text" name="text1" id="findme" ... /></td><td data-moretext="here is more text">second column </td></tr>...etc 
```

所以现在在你的替换脚本中：

```
$("#myTemplate").html().replace("${Name}", $(thisrow).find("#findme").attr("name"))
    .replace("${Id}",$(thisrow).attr("data-itemid")); 
```

ETC...

当然，提交后它必须是一个到服务器，但如果用户“取消”你可以有另一个只读模板

顺便说一句，这是我通常使用的方式，我使用 jQuery 模板，创建编辑和查看模板，但我也重复编辑表单，我手动使用 jQuery ajax 提交......但是......我的朋友，是恐怕不是一个简单的清洁和可维护的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:49:18.233

怎么样`contenteditable`？

演示：http: [//jsfiddle.net/SO_AMK/XQekC/](http://jsfiddle.net/SO_AMK/XQekC/)

jQuery：

```
var ctrlDown = false;
$(document).keydown(function(e) {
    if (e.which = "ctrlKey") {
        ctrlDown = true;
    }
}).keyup(function(e) {
    if (e.which = "ctrlKey") {
        ctrlDown = false;
    }
});

$('#example').dataTable();

$("#example tr").click(function() {
    if ($(this).hasClass("row_selected") && ctrlDown) {
        submitRow($(this));
        return false; // Break out so the next if doesn't run
    }
    else if ($(this).hasClass("row_selected") && ctrlDown == false) {
        return false; // Break out so the next if doesn't run
    }

    if ($(this).siblings(".row_selected").length && ctrlDown == false) {
        $(this).siblings(".row_selected").each(function() {
            submitRow($(this));
        });
    }

    $(this).addClass("row_selected");
    $(this).children("td").each(function() {
        $(this).attr("contenteditable", true);
    });
});

function submitRow(elm) {
    var data = [];
    $(elm).removeClass("row_selected").children("td").each(function() {
        data.push($(this).text());
    });
    alert(data); // This will stop the keyup from firing, but you won't (I hope) really be using alerts
}​ 
```

除了提交到服务器功能外，它具有所有功能，它也是完全内联的，并且支持选择多行。

唯一的错误是，当它显示数据警报时，焦点会离开主窗口，因此 keyup 事件永远不会触发，因为您可能不会使用警报，这应该不是问题。要在小提琴中修复它，请在警报关闭后按下并释放 ctrl，然后再单击一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:52:43.833

There is another solution, but I'm under the impression you won't like it very much... you can use a single form for the whole datatable (wrapping the whole table in a form is permitted) generate input fields for the current row and if it's updated submit the form asyncronously with javascript and restore td contents to the original html, if you name your fields such as name="field[]" you can also submit multiple rows at a time (I don't know if you'd want that though).

You can write html code such as

```
<form action="">
<table>
<tr><td><input type="hidden" name="row[]" value="1"/><input name="field[]"/></td></tr>
<tr><td>field value for row2</td></tr>
<tr><td><input type="hidden" name="row[]" value="3"/><input name="field[]"/></td></tr>
</table>
</form> 
```

you can just grab the form with jquery and submit it via xmlhttprequest as I suspect you would if each row was a separate form (which is illegal), if you don't want multiple rows, just remove the [] and submit each row and upon submitting the values you get them numbered correctly, don't know exactly how it would behave in java but in php I'd get the following:

```
$_GET[row][0] = 1;
$_GET[field][0] = 'value typed in row1';
$_GET[row][1] = 3;
$_GET[field][1] = 'value typed in row3'; 
```

Alternative table definition to avoid having the same name again

```
<form action="">
<table>
<tr><td><input name="field[1]"/></td></tr>
<tr><td>field value for row2</td></tr>
<tr><td><input name="field[3]"/></td></tr>
</table>
</form> 
```

It's the same table as above only you set explicit indexes for each entry thus avoiding duplicate names in the response, preferrably use a unique identifier which can describe the row from the table that you're modifying in there (when possible I use the primary key) instead of the row number, just in case that wasn't clear enough.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T05:02:19.020

一年前我就遇到过这样的问题。这是一个混乱的问题。无论哪种方式，如果您遍历行的每个 td 并将其转换为文本字段，或者您可以为此创建一个单独的 jsp 文件。

但是在这种情况下最好的是将 td 的内容更改为输入字段并手动发布数据。因为在这种情况下，您不能将表单标签包裹在 tr 周围。您必须手动发布每个输入字段的值。

PS 最好的解决方案是创建一个编辑对话框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T11:52:08.563

你有没有尝试过：

1.  将整个表格包裹在表格中
2.  将数据条目作为禁用输入，通过 CSS 隐藏其边框
3.  当用户单击编辑时，启用输入并显示边框
4.  您可能需要每个字段的隐藏元素
5.  当用户提交表单时，通过 ajax 发布并将输入设置回禁用并隐藏边框

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T04:38:58.753

我看到几个问题

1.  你没有。表格中的列与您显示的编辑列不同
2.  您可能没有完整的数据来编辑该行，因此您可能需要进行 Ajax 调用并获取它

如果您有完整的数据，那么您不需要第 2 点，假设您有一个函数 f 以单击的 tr 作为参数调用

```
function f(row)
{
     var newRow = yourTable.insertRow(parseInt(row.rowIndex,10)+1);
     //you can place the above or below the clicked row , or you can even make the row visible false And then show the new row
     Var newCell = newRow.insertCell(0);
     newCell.colspan = 6;//the count if columns in your table row
     NewCell.innerHTML = " put your HTML content here";
} 
```

# css - 固定宽度表 - 具有不同宽度的单元格？

> ID：12739012
> 
> 赞同：1
> 
> 时间：2012-10-05T03:18:38.637
> 
> 标签：css, html-table, width

```
<table>
    <tr>
        <td>One</td>
        <td>Two</td>
        <td class="skinny">$$</td>
        <td>Four</td>
    </tr>
</table> 
```

我正在尝试使所有 tds 的宽度都相同，除了具有“skinny”类的那个。不过，我似乎不能只改变瘦的那个。

[http://jsfiddle.net/tZHgV/](http://jsfiddle.net/tZHgV/)

我正在尝试使表格看起来像这样：

```
|   One   |   Two   |$$|   Four   | 
```

其中`one`, `two`, 和`four`是相同的宽度。**如何仅更改一类 tds 的宽度？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T03:22:03.063

将您的 CSS 更改为此

```
.skinny {
    width: 5px;
    min-width: 5px;
} 
```

# c++ - 使用 `%` 与 `&` 时的时序差异/增加不同

> ID：12739014
> 
> 赞同：1
> 
> 时间：2012-10-05T03:18:51.457
> 
> 标签：c++, performance

在尝试确定给定 CPU 的缓存大小时，我尝试对内存/缓存的内存访问进行计时，例如：

```
lengthMod = sizes[i]/sizeof(int)  - 1; // where sizes[i] is something like 1024, 2048 ... 
for (unsigned int k = 0; k < REPS; k++) {
    data[(k * 16) & lengthMod]++;
}

1, 0.52 
4, 0.52 
8, 0.52 
16, 0.52 
32, 0.52 
64, 1.11 // << note the jump in timing. L1 cache size is 32K
128, 1.12 
256, 1.19 
```

所以我认为如果 lengthMod 不是 2 的幂，我不能这样做。所以我试着做

```
lengthMod = sizes[i]/sizeof(int);
for (unsigned int k = 0; k < REPS; k++) {
    data[(k * 16) % lengthMod]++;
}

1, 2.67 
4, 2.57 
8, 2.55 
16, 2.51 
32, 2.42 
64, 2.42 // << no jump anymore ...
128, 2.42 
256, 2.42 
```

然后我发现我预期的时间增加不再存在......我预计时间会增加，但它应该适用于所有值？因此，如果`x`使用时的秒数`&`，我希望`~x+c`秒数（其中`c`近似恒定），但事实并非如此，事实上，它将时间差减少到不存在，为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:28:04.417

您所看到的是瓶颈的权衡。

*   在第一个示例中，您的缓存带宽成为瓶颈。
*   在第二个示例中，您遇到了整数除法的瓶颈。

在继续之前，让我们看一下两个示例之间的区别：

*   在第一种情况下，您使用`&`which 是一种快速的按位运算。
*   在第二种情况下，您使用`%`which 是非常慢的除法。

分区*很*慢。当除数/模数是编译时常量时，现代编译器会尝试优化它们。

但这里不是这样。***因此，您需要支付硬件部门的全部费用。***这就是为什么第二个示例中的时间比第一个慢得多的原因。

* * *

使用`&`，代码足够快以最大化缓存带宽。但是，使用`%`时，代码要慢得多 - 速度不足以跟上缓存的速度。所以你一直看到相同的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:27:51.570

看起来在第二种情况下编译器生成的优化代码较少（因为“除以余数”）。

# .net - 使用 HTML 作为桌面应用程序的 UI 是否正常？

> ID：12739020
> 
> 赞同：0
> 
> 时间：2012-10-05T03:19:19.367
> 
> 标签：.net, html, browser, user-interface, mono

我有一个计划。我想支持的一件事是使用 Mono 或 .Net。这会导致 UI 出现问题。Winforms 适用于两者（大部分情况下），但它相当陈旧，如果不需要，我宁愿不使用它。GTK# 适用于两者，但我宁愿不必为 Windows 捆绑它，它可以生成在 Windows 上看起来并不真正原生的应用程序。（我也必须学习它）

就 UI 而言，我的应用程序在很大程度上将非常简单。我考虑把它做成一个网络应用程序，但它需要用户经常上传文件，这对于互联网连接不佳的用户来说可能是一个很大的痛点。因此，为了可移植性和易于开发，HTML 作为桌面应用程序的 UI 可能是最好的。我已经看到有人将 Web 浏览器控件嵌入到他们的应用程序中。因为我的目标是单声道兼容性，所以这对我不起作用。我必须将用户的浏览器指向 127.0.0.1

**TL;博士**：

使用 Web 浏览器作为用户界面的桌面应用程序有多普遍？这样做有什么大问题？优缺点都有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:43:10.223

我正在考虑做同样的事情。在我看来，您可以在桌面应用程序中实现一个简单的 Web 服务器，该服务器使用现有的众多 javascript UI 包之一（例如 jQuery UI）为包含 UI 的页面提供服务。

史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:54:26.193

如果您要求的话，在桌面应用程序中使用浏览器或浏览器控件是很常见的。但如果它是桌面应用程序中的浏览器控件，则应考虑与 IE 的兼容性问题。

# sql - UNION ALL Sql 查询——如何绑定三张表

> ID：12739022
> 
> 赞同：1
> 
> 时间：2012-10-05T03:19:41.517
> 
> 标签：sql, db2, union, union-all

我有以下表格：

T1

```
 ID  PRIORITY
  1      1
  2      1
  3      2
  4      4 
```

T2

```
ID  SERVICE
1   PSTN
1   ADSL
3   ADSL 
```

T3

```
ID   DEVICE
1    BSC1
3    BSC7 
4    BSC7 
```

我想作为输出

```
ID  PRIORITY SERVICE/DEVICE
1      1        PSTN
1      1        ADSL
1      1        BSC1
2      1
3      2        ADSL
3      2        BSC7 
```

如何使用 UNION ALL 绑定这些表？我还必须为 T1 放置 WHERE 子句 `WHERE PRIORITY!=4`

一个 id 的输出表中的总数应该是 T2+T3 的摘要（对于 ID=1 2+1=3），但对于 ID=2，它也**应该**存在于表输出中，第二列为空白。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:48:04.313

如果你可以只使用 a`UNION`而不是`UNION ALL`这应该给你你想要的

```
SELECT t1.Id, t1.Priority, COALESCE(t2.Service, '') AS [Service/Device]
FROM t1
LEFT JOIN t2 ON t1.Id = t2.Id
WHERE t1.Priority != 4

UNION 

SELECT t1.Id, t1.Priority, COALESCE(t3.Device, '') AS [Service/Device]
FROM t1
LEFT JOIN t3 ON t1.Id = t3.Id
WHERE t1.Priority != 4 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/3d695/18/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:21:11.747

```
select T1.id , T1.PRIORITY ,T2.SERVICE  as service/Device from  t1 
left outer join T2 on T2.id=T1.id where T1.PRIORITY!=4
union all
select T1.id , T1.PRIORITY ,T3.DEVICE as service/Device from  t1 
left outer join T3 on T3.id=T1.id where PRIORITY!=4 
```

# php - MySQL IN() 与 PDO 查询一起工作

> ID：12739026
> 
> 赞同：0
> 
> 时间：2012-10-05T03:20:38.570
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [PHP PDO：我可以将数组绑定到 IN() 条件吗？](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

我只是出于一种爱好用 PHP 和 MySQL 制作网站，我一生都在使用未经准备的语句，直到昨晚我决定尝试 PDO 查询。我已经成功地让它们全部工作了，除非我使用 IN()。例如，当我这样做时：

```
$stmt3 = $dbConnection->prepare("SELECT * FROM member_search WHERE zip IN(:zip_codes_in_distance)");
$stmt3->execute(array(':zip_codes_in_distance' =>   $zip_codes_in_distance ));
foreach ($stmt3 as $user_list) {
   //do cool stuff here
} 
```

这将返回此错误：

```
Syntax error or access violation: 1064 
```

谷歌搜索后，我尝试了一些解决方案但没有成功，比如使用`query()`而不是`execute()`

这仅在我使用时发生`IN()`

是`$zip_codes_in_distance`这种格式的邮政编码 '07110', '07109', '07050'

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:27:45.330

使用 PDO 无法使其正常工作，所以我改用 MySQLi。在单独的文件中建立数据库连接：

```
$Connect = new mysqli($host, DB_Username, DB_password, DB_Name); 
```

像这样运行查询：

```
include 'DbConnectFIle.php';
$zips = "07110, 07109";
$sql = "SELECT * FROM table WHERE zip IN(".$zips.") ";
        $result = $Connect->query($sql);
        while($row = $result->fetch_assoc()){
                     $MemberName = $row['first_name'];
        }
$Connect->close();

echo $MemberName; 
```

使用 PDO 尝试了四个小时，MySQLi 是我让它工作的唯一方法。我使用了本教程：[http ://codular.com/php-mysqli](http://codular.com/php-mysqli)

# haskell - Haskell 中的 DFS 实现

> ID：12739028
> 
> 赞同：7
> 
> 时间：2012-10-05T03:20:47.440
> 
> 标签：haskell, depth-first-search

由于我不知道如何在 Haskell 中编写 DFS，我已经把头撞到墙上几个小时了。

我的图实现为邻接列表，其中键（或图的节点名称）是列表索引：

```
0 -> 1
1 -> 0, 2
2 -> 1

As a Haskell list: [[1],[0,2],[1]] 
```

到目前为止，这是我的 DFS 代码：

```
dfs graph visited node = helper graph visited (graph !! node) node
    where helper _ _ visited [] _ = visited
          helper graph visited (x:xs) currNode
            | elem x visited = helper graph visited xs currNode
            | otherwise = dfs graph (currNode:visited) x 
```

我知道问题在于一旦到达图表的一端，它就不会回溯并尝试另一个相邻节点。我一直在尝试修改守卫的其他部分以尝试修复它，但似乎无法提出可行的方法。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:17:19.597

你想要做什么对我来说仍然不是很清楚。我写了一些与你类似的东西，虽然它有同样的问题，`!!`不是 O(1)，但它仍然是 dfs。

```
mydfs graph visited [] = reverse visited
mydfs graph visited (x:xs) | elem x visited = mydfs graph visited xs
                           | otherwise = mydfs graph (x:visited) ((graph !! x) ++ xs) 
```

dfs 回溯的想法是保留一个待访问列表，然后从中取出第一个条目并访问它，每当您发现未访问的条目时，将其相邻顶点推到待访问列表顶部。

您可以将数组或向量用于邻接列表以避免 O(n) 查找，但最好将图形库用于您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-09T20:11:18.563

我能想到的最短的

```
dfs current visited =
    foldl (\visited next -> if elem next visited then visited else dfs next visited)
           (visited ++ [current]) (graph !! current) 
```

与python比较：

```
def dfs(v, visited):
    visited.append(v)
    for u in graph[v]:
        if u not in visited:
            visited = dfs(u, visited)
    return visited 
```

# c# - 如何在 C# 中拥有一个匹配和替换部分字符串的函数

> ID：12739029
> 
> 赞同：0
> 
> 时间：2012-10-05T03:20:53.050
> 
> 标签：c#

我有如下网页 HTML 代码：

```
<html>
<div class="code" id="one">
<pre>
      int i = 1;
      int j = 2;
</pre>
</div>
<h1>Sample heading</h1>
<div class="code" id="two">
<pre>
      int i = 1;
      int j = 2;
</pre>
</div> 
```

代码在 C# 字符串中，我需要做的是找到一些方法来替换这些`<pre>`区域，如下所示：

```
<table>
<tr><td>1</td><td><code>   int i = 1</code></td></tr>
<tr><td>2</td><td><code>   int j = 2</code></td></tr>
</table> 
```

如何获取原始字符串并创建一个包含原始数据但具有一些功能来转换`<pre>`应用于`<pre>`文本区域的文本的新字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:28:31.740

如果我是你，我会使用某种形式的 XML 解析器来定位`<pre>`元素。

```
 XDocument loDoc = XDocument.Parse(lcHTML);

    foreach (XElement loElement in loDoc.Descendants("pre"))
    {
        //-- Modify the html to your heart's content.
        //-- You can split the html on newline character, prefix each line with your table stuff along with the line index. Then write the XML back out.
    } 
```

# php - 为什么有些变量需要引号而其他变量不需要

> ID：12739031
> 
> 赞同：0
> 
> 时间：2012-10-05T03:21:23.393
> 
> 标签：php, mysql

为什么有些变量需要引号而其他变量不需要？例如，当我连接到数据库变量时不需要引号，但是当我选择或插入数据库时​​，我需要引号。

例子：

```
//variables
    $username="username";
    $password="password";
    $first=$_POST['first'];
    $last=$_POST['last'];

//connect to DB
   mysql_connect(localhost,$username,$password);
   @mysql_select_db($database) or die( "Unable to connect to database");

//values assigned
    $query = "INSERT INTO guestbook VALUES           
    ('','$first','$last','$email','$web','$comment')";
    mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T03:29:01.370

这是一个字符串文字：`"username"`. 它是一个*值*。
这是一个*变量*：`$username`。它可以保持任何*值*。将其视为占位符。
这是字符串文字中的一个*变量*`"foo $username bar"`： 。它创造了一个新的*价值*。

创建 SQL 查询时，您只需将字符串传递给数据库，它将根据 SQL 语法规则进行解析。SQL 语法要求您在某些部分加上引号。它与 PHP 变量无关。

此外，这是一个常数：`localhost`。您没有定义该名称的常量，它实际上是 PHP 通过动态创建字符串`'localhost'`来从中恢复的错误。但这实际上是一个错误。

阅读 PHP 语法的这些单独部分：[http](http://www.php.net/manual/en/langref.php) ://www.php.net/manual/en/langref.php 。

* * *

如果您要创建新字符串，则只需要引号，例如：`"foo"`。变量***永远***不需要引号。您可以在字符串文字中使用变量，因此它的值将被插值：`"foo $bar baz"`。但`"$foo"`总是不必要的，因为它只是创建一个新字符串，其唯一内容是变量的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T03:27:16.127

我认为您混淆了 PHP 变量：

```
$username = "bobby tables"; 
```

使用[字符串插值](http://en.wikipedia.org/wiki/String_interpolation#PHP)：

```
$interp = "foo $username bar"; 
```

前者将字符串分配给`"bobby tables"`变量`$username`，后者将字符串分配给`"foo bobby tables bar"`变量`$interp`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:41:04.333

你混淆了 PHP 和 Mysql。对于 PHP，变量不需要引号。

```
mysql_connect('localhost',$username,$password); 
```

如果我理解正确，您会感到困惑：

```
$query = "INSERT INTO guestbook VALUES ('','$first','$last','$email','$web','$comment')"; 
```

您需要在这些变量周围加上引号的原因是因为它是 mySQL 语法，而不是 PHP。如果你在 mysql 中这样做，你会得到一个错误：

```
"INSERT INTO guestbook VALUES ('',$first,$last,$email,$web,$comment)"; 
```

原因是 PHP 变量被转换为 mySQL 的值，mysql 会像读取留言簿一样读取这些值，从而导致错误。

另外，当我开始时，我花了一段时间才掌握了 php 引号的区别：" 可以像这样在里面包含 php 变量：

```
$name = "Eric"; 
echo "this is $name"; // prints  this is Eric 
```

但是如果你使用 ' 而不是 " 你会得到：这是 $name ' 是一个字符串文字。如果你使用 ' 并且实际上想要变量，你需要像这样转义它：

```
echo 'this is \$name'; 
```

反之亦然，如果你想让它打印出 $name 而不是 Eric，你可以这样做：

```
echo "this is \$name"; 
```

希望这能澄清，并继续学习 PHP！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T03:27:26.823

PHP 将某些字符序列解释为未定义的常量，并将它们视为字符串。

```
$ php -r 'var_dump(OH_YEAH);'
PHP Notice:  Use of undefined constant OH_YEAH - assumed 'OH_YEAH' in Command line code on line 1
string(6) "OH_YEAH" 
```

因此`localhost`，在您的调用中，将`mysql_connect()`被解析为常量并按原样进行评估`"localhost"`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T03:28:13.330

查询中的变量（字符串变量）需要引号以使它们作为变量可读。如果您不添加引号，您将插入变量的名称而不是变量值本身。
连接到数据库时不必执行此操作的原因仅仅是因为您没有在此处使用字符串变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T03:29:10.323

将变量内容插入数据库的正确代码如下：

```
 //variables
$username="username";
$password="password";
$first=$_POST['first'];
$last=$_POST['last'];

    //connect to DB
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to connect to database");

    //values assigned
$query = "INSERT INTO guestbook VALUES           
('','.$first.','.$last.','.$email.','.$web.','.$comment.')";
mysql_query($query); 
```

# android - 在没有 Google 帐户的情况下查询日历提供程序

> ID：12739035
> 
> 赞同：1
> 
> 时间：2012-10-05T03:21:38.867
> 
> 标签：android, android-2.2-froyo

我知道允许我们向日历提供程序插入/更新数据的 Google 帐户，但是是否可以在没有 Google 帐户的情况下使用日历提供程序？我的意思是我们可以在日历中查询数据吗？

我们可以在 SDK 8（Android 2.2）中使用日历提供程序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:23:30.863

您无需 Google 帐户即可查询本地内容提供商。只要不需要任何特殊权限，您就可以访问它公开的数据。你试过了吗？如果是这样，您遇到了什么错误？

# c# - 协方差/逆变不应该在 C# 4.5 中允许这样做吗？

> ID：12739040
> 
> 赞同：2
> 
> 时间：2012-10-05T03:22:10.847
> 
> 标签：c#, c#-4.0, covariance, contravariance

```
private Dictionary<Type, List<IDataTransferObject>> dataStore = new Dictionary<Type, List<IDataTransferObject>>();

public void Insert<T>(T dto) where T : IDataTransferObject
{
    if (!dataStore.ContainsKey(typeof(T)))
    {
        dataStore.Add(typeof(T), new List<T>());
    }

    dataStore[typeof(T)].Add(dto);
} 
```

上面的代码在 dataStore.Add 行上给了我一个编译错误，因为它不喜欢我尝试将 a 分配`List<T>`给 a `List<IDataTransferObject>`。由于我的方法将 T 限制为仅 IDataTransferObject，.Net 4 中的协变/逆变东西不应该允许此代码吗？

我知道我可以将其更改为新的`List<IDataTransferObject>`并且它会起作用，但我很好奇为什么原始代码不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T03:31:39.017

很确定 a`List<SubClass>`与 不协变`List<BaseClass>`。`IEnumerable<T>`也许，但不是 List 因为您可以自由添加一个非`T`（但仍然`IDataTransferObjects`）会引发运行时异常，因此它在编译时被捕获。

虽然您的代码在运行时可能是安全的（因为您按类型使用键），但编译器并不知道这一点。

```
List<Animal> animalList = new List<Animal>();
animalList.Add(new Dog()); //ok!

List<Cat> catList = new List<Cat>();
animalList = catList; //Compiler error: not allowed, but it's what you're trying to do
animalList.Add(new Dog()) //Bad stuff! Trying to add a Dog to a List<Cat> 
```

如果您试图将其视为`IEnumerable<IDataTransferObject>`无法通过代码修改的那些，那么您正在做的事情将起作用（除非您首先将其强制转换，如果您使用错误的类型，它将通过/失败）。但`List`绝对可以通过编译时代码进行更改。

编辑：如果您不介意强制转换，并且真的想要一个`List<T>`（因此您的调用代码是类型安全的，并且`T`一旦检索到就不会添加非对象）您可以执行以下操作：

```
private Dictionary<Type, object> dataStore = new Dictionary<Type, object>();

public void Insert<T>(T dto) where T : IDataTransferObject
{
    object data;
    if (!dataStore.TryGetValue(typeof(T), out data))
    {
        var typedData = new List<T>();
        dataStore.Add(typeof(T), typedData);
        typedData.Add(dto);
    }
    else
    {
        ((List<T>)data).Add(dto);
    }
}

//you didn't provide a "getter" in your sample, so here's a basic one
public List<T> Get<T>() where T : IDataTransferObject
{
    object data;
    dataStore.TryGetValue(typeof(T), out data);
    return (List<T>)data;
} 
```

调用代码如下：

```
Insert(new PersonDTO());
Insert(new OrderDTO());
Insert(new PersonDTO());

List<PersonDTO> persons = Get<PersonDTO>();
List<OrderDTO> orders = Get<OrderDTO>();

Console.WriteLine(persons.Count); //2
Console.WriteLine(orders.Count); //1 
```

所以从外部看，所有 API 的使用都是类型安全的。它不是`orders`a `List<IDataTransferObject>`（这意味着您可以添加非`OrderDTO`对象），而是强类型并且不能混合和匹配。

当然，在这一点上，没有真正需要限制到`IDataTransferObject`，但这取决于您和您的 API/设计/使用。

# facebook - Facebook fbsr cookie 即将过期

> ID：12739042
> 
> 赞同：0
> 
> 时间：2012-10-05T03:22:45.043
> 
> 标签：facebook, cookies, facebook-javascript-sdk

所以我正在围绕 facebook oauth 构建我的应用程序，并希望使用 fbsr_ 令牌来识别登录用户（以便 facebook-js 的内容与我的网站保持同步）。

不幸的是，这些 fbsr_* cookie 似乎设置为在一天内过期。这意味着如果用户在一天后访问我的网站，他们没有 cookie 并且显示为注销体验。

然后 facebook-js 运行，识别它们，创建 fbsr_* cookie，并给我一个回调。我可以选择进行硬页面刷新（相当不和谐），或者尝试进行花哨的就地 ajax 更新（大量复杂的代码，仍然有点不和谐）。这些 cookie 没有更长的过期时间，因此用户保持无缝登录是否有原因？大多数网站都允许您在登录时“记住我”以避免 cookie 不断过期，所以我宁愿不要让我的启用 facebook 的网站一直让我退出。

对此我能做些什么吗？我怀疑我可能会切换到我自己管理身份和 cookie 过期的服务器端 oauth（是吗？）。但是 clientside-oauth 会有这样的限制似乎很奇怪，所以我希望我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:25:41.170

> 对此我能做些什么吗？

不，不是。

确定用户当前是否登录 Facebook 的唯一方法是查看为域 facebook.com 设置的 cookie。

JS SDK 能够做到这一点，因为它在客户端运行，并且可以发出跨域请求以检查这些 cookie 是否已设置。

但是没有办法从*您的*域中检查这些 cookie 服务器端 - 您的服务器只能访问为您自己的域设置的 cookie。

> 我怀疑我可能会切换到我自己管理身份和 cookie 过期的服务器端 oauth（是吗？）

如果您在自己的域上设置了自己的 cookie，那么您就是在实施自己的登录系统。

即使你“伪造”了 JS SDK 在你的域下设置的 cookie，也不会带来相同的结果。

您的域中可能有一个 cookie，上面写着“是的，用户 XYZ 已登录 Facebook”——但不一定是这种情况。我本可以在此期间退出 Facebook，而您的 cookie 根本不会反映这一点。因此，无论您接下来尝试做什么，例如 fe 从您的应用中代表我发布某些内容，很可能会失败，因为您只*认为*我仍然登录到 Facebook，但实际上您没有有效的访问令牌我不再是我了，因为我并没有真正登录到 Facebook。

> 然后 facebook-js 运行，识别它们，创建 fbsr_* cookie，并给我一个回调。我可以选择进行硬页面刷新（相当不和谐），或者尝试进行花哨的就地 ajax 更新（大量复杂的代码，仍然有点不和谐）。

这些是您唯一可行的选择。

# apache - NSIS：检测 Tomcat 安装

> ID：12739044
> 
> 赞同：0
> 
> 时间：2012-10-05T03:22:48.150
> 
> 标签：apache, tomcat, nsis

我一直在尝试检测 Tomcat 是否安装在我的 NSIS 脚本中的主机系统上。这是执行此操作的部分

```
Section Tomcat
ClearErrors 

Var /GLOBAL tomcatVersion
ReadRegStr $tomcatVersion HKLM "SOFTWARE\Apache Software Foundation\Tomcat\7.0\Tomcat7" "InstallPath"
;ExecWait "$EXEDIR\apache-tomcat-7.0.22.exe"
DetailPrint "$tomcatVersion"
SectionEnd 
```

当我转到“regedit”并检查该特定键的路径时，它有一个值，但打印语句返回一个空白。

有人可以建议解决此问题和/或我可能面临的任何错误的最佳方法吗？

我注意到一个有趣的事情，就是如果在上面的代码中，如果我指向 ReadRegStr 命令来读取

```
HKLM "SOFTWARE\JavaSoft\Java Runtime Environment" "CurrentVersion" 
```

它返回一个值，因此在语法上，代码确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:56:38.150

*   如果 Tomcat 安装程序是 64 位安装程序，则 32 位进程将找不到该密钥，在 NSIS 中您可以使用`SetRegView 64`.

*   如果您`RequestExectionLevel`在脚本中使用并且 Tomcat 安装程序是由 UAC 虚拟化的，那么您必须从[VirtualStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)中读取它（在您的情况下不太可能，因为您可以在 regedit 中看到密钥）

*   [进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)也很方便调试注册表问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:24:24.170

聚会有点晚了，但是如果你用谷歌搜索“nsis install tomcat”，这个帖子就会出现，所以我想我会分享这个我发现的好例子......

[https://github.com/mathiaslin/openmrs-pgh-190/blob/master/metadata/installer/installer_setup.nsh](https://github.com/mathiaslin/openmrs-pgh-190/blob/master/metadata/installer/installer_setup.nsh)

# visual-studio - Windows 窗体应用程序崩溃上的 Visio 2013 预览绘图控件

> ID：12739046
> 
> 赞同：1
> 
> 时间：2012-10-05T03:23:25.437
> 
> 标签：visual-studio, vb6, visio

打开包含 Visio 2013 预览绘图控件的窗体时，Visual Studio 2012 崩溃。（Microsoft Visio 15.0 绘图控件 - Com 组件）。

重现此问题的步骤。

1.  打开 Visual Studio 2012

2.  创建一个新的 Windows 窗体应用程序 (C#)

3.  将 COM Component Microsoft Visio 15.0 绘图控件添加到工具箱。

4.  将 Visio 绘图控件放在 Form2.cs[Design] 上。

5.  保存所有文件、项目和解决方案。

6.  在 Visual Studio 2012 IDE 中关闭 Form1.cs [Design]。

7.  在解决方案资源管理器中双击 Form1.cs 以编辑表单 [设计] 视图。

8.  Visual Studio 应用程序此时崩溃。

这是 Visio 2013 Preview 中的一个已知错误。

在 VB6 应用程序中使用 Visio 2013 绘图控件也会产生类似的结果，并显示 &H80004005 (-2147467259) 错误消息。

我们的产品在 VB6 应用程序中使用 Visio 2013 控件。这也是 Visual Studio 2012 中的一个问题。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:22:23.050

这确实是一个已知的错误：请参阅[http://connect.microsoft.com/VisualStudio/feedback/details/766229/visio-2013-preview-drawing-control-on-a-windows-forms-application-crashes](http://connect.microsoft.com/VisualStudio/feedback/details/766229/visio-2013-preview-drawing-control-on-a-windows-forms-application-crashes)

到目前为止，我能想到的最好的解决方法是仅在代码中实例化绘图控件。换句话说。不要将它从 IDE 的工具箱中拖到您的表单（等）上，而只能从代码中创建和实例化控件。这样，控件就不会出现在 GUI 表单编辑器中，也不会冻结您的 Visual Studio 实例。

如果您不确定如何执行此操作，您可以随时将其临时拖到表单中，并从您的 FormName.Designer.cs（或 .vb）文件中提取控件的相关代码。

请注意，我的经验仅适用于 VS2012。我不确定您是否甚至可以使用 VB6 中的控件（没有安装它来测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:18:07.397

```
 Option Explicit

Private WithEvents moo As Visocxctl.DrawingControl

Private Sub Command1_Click()
    Set moo = Form1.Controls.Add("VisOcx.DrawingControl.1", "VisioRuntime")
    moo.Left = 0
    moo.Top = 0
    moo.Visible = True

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:14:07.230

试试这个解决方法： [Visio Drawing Control Fails in Visual Studio 2012](https://stackoverflow.com/questions/12095726/visio-drawing-control-fails-in-visual-studio-2012)。用 Visio 2013 的 Office15 替换 Office14。我可以在设计时成功删除控件并运行示例 Windows 窗体应用程序。当使用任何版本的 Visio 绘图控件时，这是 VS2012 中的一个已知错误。

# windows-phone-7 - Window Phone 有 Android 回调功能吗？或者从浏览器活动事件中获取事件？

> ID：12739048
> 
> 赞同：0
> 
> 时间：2012-10-05T03:23:50.007
> 
> 标签：windows-phone-7, callback

在 Android 中，我可以在 XML 中定义模式，这样当浏览器或短信有这个回调 url 时，会自动打开应用程序。

```
<data android:scheme="http"      
      android:host="test.demo.com" /> 
```

我想知道 Window Phone 是否具有与 Android 一样的 CallBack 功能？

我正在考虑开发一个应用程序，其中某些部分使用 webapp，但某些部分使用纯应用程序。当用户登录应用程序时，有一个包含网站的 webapp 页面，如果用户单击该网页中的特定链接，例如`http://test.demo.com`，我希望 Window Phone 应用程序可以获取回调 url，以便我可以启动纯应用程序在 Window Phone App 上查看。（纯应用程序视图包含在同一个应用程序中，而不是打开其他应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:38:58.600

如果您在应用程序内的控件上打开了网页，`WebBrowser`并且用户单击该网页上的任何链接，则该链接将在该控件本身内打开，并且不会启动任何其他应用程序。这是我从你的问题中了解到的。

# elasticsearch - 弹性搜索批量 api 为每个源/记录指定更新/创建行为

> ID：12739050
> 
> 赞同：1
> 
> 时间：2012-10-05T03:24:04.343
> 
> 标签：elasticsearch

在某个地方，我的印象是我可以选择“创建”和“创建或更新”。我希望能够为批量上传中的每个源指定 _id 冲突的行为。如果识别的记录不存在，其中一些应该创建，如果存在则更新。如果记录不存在，其他人应该创建，如果存在则什么都不做。

下面的例子似乎做了一个“更新或创建”

```
{ "index" : { "_index" : "test", "_type" : "type1", "_id" : "1" } }
{ "field1" : "value1" } 
```

如果索引/类型/id 的记录存在，希望这只会“创建”而不更新

```
{ "create" : { "_index" : "test", "_type" : "type1", "_id" : "3" } }
{ "field1" : "value3" } 
```

我愿意提出实现这一目标的最佳方法的建议。如果有人没有先到达那里，我会发布我发现的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:04:42.180

看起来您将能够在 2.0 中使用脚本功能执行此操作。[https://github.com/elasticsearch/elasticsearch/issues/2008](https://github.com/elasticsearch/elasticsearch/issues/2008)

现在我正在用两个请求来做这件事。首先是 _create 以添加任何新文档，然后是更新以更改现有文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:05:34.713

我认为操作类型功能应该回答。

[从文档](http://www.elasticsearch.org/guide/reference/api/index_.html)中提取

操作类型 索引操作还接受一个`op_type`可用于强制创建操作，允许**put-if-absent**行为。使用 create 时，如果索引中已存在该 id 的文档，则索引操作将失败。

下面是一个使用`op_type`参数的例子：

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/1?op_type=create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elastic Search"
}' 
```

指定创建的另一个选项是使用以下 URI：

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/1/_create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elastic Search"
}' 
```

# c++ - 介绍 C++ 和蒙特卡洛方法

> ID：12739052
> 
> 赞同：2
> 
> 时间：2012-10-05T03:24:49.320
> 
> 标签：c++, loops, montecarlo

所以我刚开始接触编程，我不得不说这是我做过的最有成就感但最令人沮丧的事情。我正在承担难度越来越大的项目，其中最近的项目涉及使用蒙特卡洛方法和大量循环。以下是目前完成的代码：

```
#include <iostream>
#include <cstdlib>
#include <cmath>
#include <string>
#include <ctime>

using namespace std;

int main ()
{
    srand (time(0));
    string operation;
    cout << "Using the letters 'o', or 'q', please indicate if you would like to simulate once, or quit the program: " << endl;
    cin >> operation;
    string reservoir_name; // Creating variables for reservoir
    double reservoir_capacity;
    double outflow;
    double inflow_min;
    double inflow_max;

    if (operation == "q")
    {
        cout << "Exiting program." << endl;
        system ("pause");
        return 0;
    }

    while (operation == "o") // Choose one or multiple simulations.
        {

                string reservoir_name; // Creating variables for reservoir function
                double reservoir_capacity;

                double inflow_min = 0;
                double inflow_max = 0;
                double inflow_range = inflow_min + inflow_max;
                double inflow_difference = inflow_max - inflow_min;
                double inflow_threshold = .9 * inflow_range/2; // Math for acceptable flow threshold.

                cout << "What is the name of the reservoir?" << endl;
                cin.ignore ();
                getline (cin,reservoir_name); // Grab whole string for reservoir name.
                cout << "What is the capacity of the reservoir in MAF (Millions of Acre Feet)?" << endl;
                cin >> reservoir_capacity;
                cout << "What is the minimum inflow?" << endl;
                cin >> inflow_min;
                cout << "What is the maximum inflow?" << endl;
                cin >> inflow_max;
                cout << "What is the required outflow?" << endl;
                cin >> outflow;
                inflow_range = inflow_min + inflow_max;
                inflow_threshold = .9 * inflow_range/2;
                cin.ignore ();

                if (outflow > inflow_threshold) // Check for unacceptable outflow levels.
                {
                    cout << "Warning! The outflow is over 90% of the average inflow. Simulation aborted. Returning to main menu." << endl;
                }
                else
                {
                    const int number_simulations = 10;
                    double fill_level = 0;
                    int years = 1;
                    cout << "Running simulation." << endl;
                    for (int i = 1; i < number_simulations; i++) // Each year
                    {

                        for (years; fill_level < reservoir_capacity; years++ ) 
                        {
                            double r = rand() * 1.0 / RAND_MAX;
                            double x = inflow_min + inflow_range * r;// SHOULD be between minimum inflow and maximum inflow.
                            if (fill_level < 0)
                            {
                            fill_level = 0;
                            }
                        }   // Simulate the change of water level.
                    cout << years << endl;
                    }

                }
                    cout << "What would you like to do now?" << endl; // Saving for later. The menu re-prompt message and code.
                    cout << "Using the letters 'o', or 'q', please indicate if you would like to simulate once, or quit the program: " << endl;
                    cin >> operation;
    }

    system ("pause");
    return 0;
} 
```

所以我想我的主要问题是我遇到了关于在“运行模拟”下面设置 for 循环的问题的内部 for 循环从查询随机值中得出可接受结果范围内的随机数。有人告诉我，这个想法是使用蒙特卡洛方法，即

```
double r = rand() * 1.0 / RAND_MAX;
double x = inflow_min + inflow_range * r;// SHOULD be between minimum inflow and maximum inflow. 
```

所以程序将为流入创建一个随机值。这个想法是内部 for 循环将继续运行，直到从 0 开始的水库的填充水平达到水库容量。模拟多少年的过程（内部for循环的每次迭代代表一年）要由fill_level模拟for循环的父for循环重复10次。

当我尝试运行您在此处看到的程序时，它会一直运行到“运行模拟”，然后它不会继续进行。是否有比我更有经验的人理解我在说什么并知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:29:39.330

```
for (years; fill_level < reservoir_capacity; years++ ) 
{
    double r = rand() * 1.0 / RAND_MAX;
    double x = inflow_min + inflow_range * r;// SHOULD be between minimum inflow and maximum inflow.
    if (fill_level < 0)
    {
    fill_level = 0;
    }
}   // Simulate the change of water level. 
```

你永远不会`fill_level`在这个循环中增加。这是一个无限循环。

# vba - 使用 ppDisp 控制用户窗体中的弹出窗口

> ID：12739053
> 
> 赞同：0
> 
> 时间：2012-10-05T03:24:49.730
> 
> 标签：vba, vbscript

我已经设置了一个 userform1 来使用 VBA/Excel 中的 Web 浏览器控件浏览 Intranet。我遇到的问题是，当用户通过 Web 浏览器控件启动弹出窗口时，该弹出窗口默认在 IE 中运行，超出了 Web 浏览器控件的范围，因此在弹出窗口中不包含正确的会话数据。此弹出窗口从下拉框、onchange 命令启动，然后将弹出窗口中的输入插入到页面上的 Web 表单中。下面的代码拦截弹出事件并让您处理它，通过将其传输到 userform2

```
Private Sub WebBrowser1_NewWindow2(ppDisp As Object, Cancel As Boolean)

Dim frm As UserForm2
'Dim ppDisp As Object

Set frm = New UserForm2

Set ppDisp = frm.WebBrowser1.Application

frm.Show

End Sub 
```

问题是，当我暂停时，它现在卡在 frm.show 上，并且似乎没有积极地将网页正确传输到 userform2。我不确定我的逻辑在哪里错了，任何建议都会有所帮助。大多数指南显示：

```
Set ppDisp = frm.WebBrowser1.object 
```

但我无法在任何地方的对象浏览器中找到它，并且做 .object 炸弹，因为错误 438：对象不支持此属性或方法。但到目前为止，我能找到的所有内容都显示使用 .object。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:29:53.883

对于任何阅读本文的人，VBA 不会像上面所说的那样支持这种方法。它在.net中完美运行，我会假设，vb6

# c# - c#中没有类名的新关键字

> ID：12739057
> 
> 赞同：9
> 
> 时间：2012-10-05T03:25:36.757
> 
> 标签：c#

在浏览 ASP.NET MVC 文档时，我看到这个成语被大量使用：

```
new { foo = "bar", baz = "foo" } 
```

这是字典文字语法吗？它是具有被调用函数定义推断的类型的新类/结构吗？如果是为什么 vars 不需要类型定义，甚至不需要`var`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T03:28:21.950

这是一个匿名类型。

> 匿名类型提供了一种方便的方法，可以将一组只读属性封装到单个对象中，而无需先显式定义类型。类型名称由编译器生成，在源代码级别不可用。每个属性的类型由编译器推断。

[http://msdn.microsoft.com/en-us/library/bb397696.aspx](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

*   匿名类型是强类型的。从公共语言运行时的角度来看，匿名类型与任何其他引用类型没有什么不同。

*   如果同一程序集中的两个或多个匿名类型具有相同数量和类型的属性，以相同的顺序，编译器将它们视为相同的类型。它们共享相同的编译器生成的类型信息。

*   匿名类型不应该在程序集之间传递，甚至不应该作为方法的[返回值](https://stackoverflow.com/q/534690/453277)（可能，但很少，很少建议）。

*   匿名类型是一种便利机制，例如在使用 LINQ 时，例如以下[投影](http://msdn.microsoft.com/en-us/library/bb546168.aspx)：

**LINQ 示例**

```
var result = myEnumerable.Select( o => new { foo = o.Foo, bar = o.Bar } );
// "result" is an enumerable of a new anonymous type containing two properties 
```

**其他问题**

> 这是字典文字语法吗？

不，虽然有很多相似之处。ASP .Net MVC`RouteValueDictionary`在许多方法重载中使用匿名类型来表示相同的信息。

> 为什么 vars 不需要类型定义，甚至 var 都不需要？

推断值类型，但推断并非总是可能的：http: [//msdn.microsoft.com/en-us/library/bb531357.aspx](http://msdn.microsoft.com/en-us/library/bb531357.aspx) ^(（VB 版本，如果有人知道 c# 等效项的 URL，请更新）)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T03:28:07.820

这是一种[匿名类型语法](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。类型名称由编译器生成，在源代码级别不可用。每个属性的类型由编译器推断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T03:28:56.120

这是**匿名类型**。这意味着它返回的东西有一个`foo`属性，一个`baz`字符串类型的属性。

# validation - 防止 IE “重新显示网页”消息

> ID：12739060
> 
> 赞同：0
> 
> 时间：2012-10-05T03:26:02.503
> 
> 标签：validation, refresh, postback

我有一个简单的 ASP.net（代码隐藏）网页，其中包含几个文本框。每个文本框都有一个关联的验证控件（必需、比较等）以及一个验证摘要控件（在单个对话框中显示所有错误）。我没有添加或修改任何生成的 HTML 或 Javascript。

如果表单成功验证，我想显示一条成功消息。我添加的唯一代码隐藏函数是：

```
Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSubmit.Click
    If Page.IsValid Then
        ClientScript.RegisterStartupScript(Me.GetType(), "key", "<script>alert('Form completed successfully!')</script>")
    End If
End Sub 
```

除非用户刷新页面，否则这会正常工作，这会导致消息“要再次显示网页，Internet Explorer 需要重新发送您之前提交的信息”。

按下重试或取消按钮会导致再次显示成功消息。

我疯狂地搜索，没有找到合适的答案。除了重定向到另一个页面或禁用 IE 的错误检查之外，还有其他 [简单] 解决方案吗？

# java - java程序以整数形式打印数字作为随机播放

> ID：12739062
> 
> 赞同：-1
> 
> 时间：2012-10-05T03:26:17.063
> 
> 标签：java, int, shuffle

抱歉，如果我的问题不清楚，可以说我有`int a = 1234;`。如何打印如下，任意长度？

`123 132 213 231 321 312`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:38:19.830

```
public class Test  {
    private static void swap(int[] p, int i, int j) {
        int t= p[i];
        p[i]= p[j];
        p[j]= t;
        return;
    }
        private static boolean nextPerm(int[] p) { // need p.length > 1
        int n= p.length;
        int i= n;
        if (i-- < 1) return false;
        for(;;) {
            int ii= i--;
            if (p[i] < p[ii]) {
                int j= n;
                while (!(p[i] < p[--j]));
                swap(p, i, j);
                for (j= n; j > ii; swap(p, --j, ii++));
                return true;
            }
            if (i == 0) {
                for (int j= n; j > i; swap(p, --j, i++));
                return false;
            }
        }
    }
    public static void main(String[] args) {
        int x = 123;
        String s = "" + x;
        int n = s.length();
        int[] p = new int[n];
        for (int i = 0; i < n; i++){
            p[i] = i;
        }
        do {
            for (int i = 0; i < n; i++){
                System.out.print(s.charAt(p[i]));
            }
            System.out.println();
        }
        while (nextPerm(p));
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T03:42:04.137

最后我发现，下面是代码，

```
class ShuffleNumber {
private static int[] a = {1,2,3};

private static void print(int[] a) {
for (int i = 0; i < a.length; i++)
    System.out.print("  " + a[i]);
    System.out.println();
}

private static void shuffle(){
int[] b = (int[])a.clone();
for (int i = b.length - 1; i > 0; i--) {
    int j = (int)Math.floor(Math.random() * (i+1));
    int temp = b[j];
    b[j] = b[i];
    b[i] = temp;
}
print(b);
}

public static void main(String[] args) {
    for (int i = 0; i < 10; i++) 
        shuffle();
} 
```

}

# node.js - NodeJS - 让用户输入数据的独立应用程序

> ID：12739064
> 
> 赞同：0
> 
> 时间：2012-10-05T03:26:33.610
> 
> 标签：node.js

NodeJS 是否具有通过用户的标准输入接受输入的任何功能。在基于浏览器的 JS 中，我们曾经使用“提示”功能来实现相同的功能，但这不适用于 NodeJS 独立应用程序。

```
node one.js

Enter any number:

<program accepts the number and does the processing> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:34:56.940

正如vinayr所说，你应该使用readline。你想要的一个例子：

```
var readline = require('readline');

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

rl.question("Input number:", function(numAnswer) {
  // TODO: Log the answer in a database
  var num = parseInt(numAnswer);
  processingFunctionYouUse(num);
  rl.close();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:30:51.913

使用 readline 提示[http://nodejs.org/api/readline.html](http://nodejs.org/api/readline.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T01:48:05.607

我想建议你使用[stdio](https://www.npmjs.com/package/stdio)。它是一个旨在通过标准输入/输出简化您的生活的模块。它的主要特点之一是逐行读取标准输入，可以按如下方式进行：

```
var stdio = require('stdio');
stdio.readByLines(function (line) {
    // This function is called for every line while they are being read
}, function (err) {
    // This function is called when the whole input has been processed
}); 
```

PD：我是`stdio`创造者。:-)

[![新PM](../Images/e2664f2f45180474dae5a7a30c8a79e6.png)](https://nodei.co/npm/stdio/)
[（来源：[nodei.co](https://nodei.co/npm/stdio.png)）]

# twitter-bootstrap - 使用 url 和 hash 和 bootstrap scrollspy

> ID：12739065
> 
> 赞同：3
> 
> 时间：2012-10-05T03:26:39.147
> 
> 标签：twitter-bootstrap

我有一个基于 twitter bootstrap 的导航菜单栏，我想将 scrollspy 应用于高亮显示。我使用普通的 php 包含将菜单包含到多个页面中。因此，我使用文件名和书签（例如 products.php#foo）链接到文件。

但是 scrollspy 希望 url 工作的方式是使用 format `<a href="#id-of-target">my link</a>`，这样当`<div id="id-of-target">`滚动到视图中时，href 会根据 href 属性匹配并获取活动类。

这意味着如果我有一个这样的链接`<a href="products.php#my-catalogue">my catalogue</a>`，它将与 id 不匹配，并且链接不会突出显示。

我不知道如何修改scrollspy，以便它只匹配`#`href值中的id。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T03:40:54.247

**新答案**

(1) 您可以像这样向链接添加数据目标：

```
<a href="products.php#my-catalogue" data-target="#my-catalogue">my catalogue</a> 
```

(2) Bootstrap 在导航链接中使用您的 href 或 data-target 来查找页面上的目标区域。如果您`products.php#my-catalogue`在代码中有诸如正则表达式检查器之类的东西，则会失败。但是，如果您事先进行修剪，它将起作用

在滚动间谍引导代码中，您可以更改（在 ScrollSpy 的“刷新”功能中）：

```
.map(function () {
    var $el = $(this)
              , href = $el.data('target') || $el.attr('href')
              , $href = /^#\w/.test(href) && $(href) 
```

至

```
.map(function () {
    var $el = $(this)
              , href = $el.data('target') || $el.attr('href')
              , trimmed = href.match(/#\w*/)[0]
              , $href = /^#\w/.test(trimmed) && $(trimmed) 
```

然后有类似的东西

```
<a href="products.php#my-catalogue">my catalogue</a> 
```

应该没有问题

* * *

**旧答案**

也许您可以尝试在引导 js 代码中编辑滚动间谍选择器？

有一条线（对我来说大约是 1442）：

```
selector = this.selector
      + '[data-target="' + target + '"],'
      + this.selector + '[href="' + target + '"]' 
```

如果改为

```
 selector = this.selector
      + '[data-target="' + target + '"],'
      + this.selector + '[href="products.php' + target + '"]' 
```

可以解决你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T07:17:36.350

添加 data-target="#target" 效果很好。我在服务子页面中使用它。这是一个工作示例：

[http://calebserna.com/services/web-design/](http://calebserna.com/services/web-design/)

访问者可以非常流畅地浏览链接到另一个页面的服务列表。

# javascript - 谷歌地图 api3 不会在 Chrome 或 IE 中显示

> ID：12739067
> 
> 赞同：0
> 
> 时间：2012-10-05T03:26:57.087
> 
> 标签：javascript, firefox, google-chrome, maps

我的页面中间有一个谷歌地图。如果我加载保存在桌面上的页面，但如果我从 Chrome 或 IE 的 Dropbox 加载，它就可以工作。它仅适用于 FireFox。谁能告诉我为什么？

[https://dl.dropbox.com/u/32241044/Blue%20Wolf%20Coding/page.html](https://dl.dropbox.com/u/32241044/Blue%20Wolf%20Coding/page.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:05:42.120

查看 Chrome 中的开发者控制台，您将看到以下消息：

```
[blocked] The page at https://dl.dropbox.com/u/32241044/Blue%20Wolf%20Coding/page.html ran insecure content from http://maps.googleapis.com/maps/api/js?key=AIzaSyDoXopD-LqdzB0iH92fs09t_YDjyo9rX_4&sensor=true. 
```

这意味着 Dropbox 阻止了 Google Maps API 的加载。当您在本地运行页面时，您使用 HTTP URL 访问它，但 Dropbox 上有 SSL。更改您对 Google Maps API 的包含以包含 HTTPS 版本：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=API_KEY&sensor=true"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:23:59.287

您需要使用这样的协议相对路径：

```
<link rel="stylesheet" href="//example.com/style.css">
<script src="//example.com/script.js"></script> 
```

检查这个答案：

[如何在需要时通过 HTTPS 包含 CSS 和 JS 文件？](https://stackoverflow.com/questions/2725523/how-to-include-css-and-js-files-via-https-when-needed)

# jsf - PrimeFaces 登录

> ID：12739069
> 
> 赞同：1
> 
> 时间：2012-10-05T03:27:10.050
> 
> 标签：jsf, session, jakarta-ee, primefaces

> **可能重复：**
> [JSF HTTP 会话登录](https://stackoverflow.com/questions/3841361/jsf-http-session-login)
> [避免 JSF+Primefaces 应用程序](https://stackoverflow.com/questions/10305718/avoid-back-button-on-jsfprimefaces-application)
> [Primefaces 登录应用程序上的后退按钮](https://stackoverflow.com/questions/12667449/primefaces-login-application)

我已经使用 Prime Faces 开发了 Web 应用程序。现在我想改进这里的登录系统，到目前为止我已经做了以下工作。

**1\. index.xhtml**

```
<h:form>
<h:panelGrid columns="2" cellpadding="5">
<h:outputLabel for="username" value="Username:" />
<p:inputText value="#{loginBean.username}" 
                id="username" required="true" label="username" />
<h:outputLabel for="password" value="Password:" />
<h:inputSecret value="#{loginBean.password}" 
                id="password" required="true" label="password" />
<f:facet name="footer">
<p:commandButton id="loginButton" value="Login" update=":growl" action="#{loginBean.doLogin}" actionListener="#{loginBean.login}" oncomplete="handleLoginRequest(xhr, status, args)" style="height: 30px; font-size: 12px"  />
<p:commandButton type="reset" value="Clear" style="height: 30px; font-size: 12px"/>
</f:facet>
</h:panelGrid>
</h:form> 
```

**2.LoginBean.java**

```
public class LoginBean {
private String username;
private String password;

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public List<user> getUser() {
    List<user> tableList = new ArrayList<user>();    
    String query = "SELECT * FROM users";

    try {

        Connection conn = new Connector().getConn();
        Statement select = conn.createStatement();
        ResultSet result = select.executeQuery(query);

        while (result.next()) {

            user c = new user();

            c.setID(result.getInt("ID"));
            c.setName(result.getString("name"));
            c.setPassword(result.getString("password"));

            tableList.add(c);
        }
        select.close();
        // result.close();
        conn.close();
    } catch (SQLException e) {
        System.err.println("Mysql Statement Error: " + query);
        e.printStackTrace();
    }
    //System.out.println(tableList);
    return tableList;
}

public void login(ActionEvent actionEvent) {

            List<user> tableList3=getUser();

    RequestContext context = RequestContext.getCurrentInstance();
    FacesMessage msg = null;
    boolean loggedIn = false;

    for(int i=0;i<tableList3.size();i++){
             String user_name = tableList3.get(i).getName();
             String pass_word = tableList3.get(i).getPassword();

    if(username != null  && username.equals(user_name) && password != null  && password.equals(pass_word)) {
        loggedIn = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", username);
                    //return "table?faces-redirect=true";

    } else {
        loggedIn = false;
        msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid credentials");
                    //return "new?faces-redirect=true";
    }

    FacesContext.getCurrentInstance().addMessage(null, msg);
    context.addCallbackParam("loggedIn", loggedIn);
}
  }

 public String doLogin(){  
List<user> tableList2=getUser();
String msg = null;

for(int i=0;i<tableList2.size();i++){
String user_name = tableList2.get(i).getName();
String pass_word = tableList2.get(i).getPassword();

if(username != null  && username.equals("admin") && password != null  && password.equals("admin")){
msg = "table?faces-redirect=true";
}

else if(user_name.contains(username)&& pass_word.contains(password)&& !user_name.contains("admin")) {
msg = "table1?faces-redirect=true";
    }
}

            return msg;
        }

public String logout() {
           return "index?faces-redirect=true";
}
} 
```

在这里，用户可以在未登录系统的情况下加载页面。我想通过使用会话来防止这种情况。但我不清楚如何做到这一点。所以请帮助我一步一步地做到这一点。

谢谢你。

# path - PATH 变量：如何将 mvim 脚本“放在路径中的文件夹中”？

> ID：12739076
> 
> 赞同：0
> 
> 时间：2012-10-05T03:28:11.517
> 
> 标签：path, macvim

我电脑上的 vim 版本有点旧（6.2），所以我安装了 MacVim（7.3）。它带有一个 shell 脚本，你可以放在某个地方从终端启动 MacVim。文档说“将此脚本放在路径中的文件夹中”，而我是菜鸟，我试图弄清楚这意味着什么。我已经搜索并阅读过，但我仍然不知道我需要做什么。另外，我在 ppc mac 上运行 Tiger，所以不幸的是 Homebrew 不是一个选项。

请帮助一个菜鸟！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:43:01.370

“路径”是指操作系统搜索以查找可执行文件的目录列表。在 Mac 上，在终端中，您可以通过键入以下内容来查看： `echo $PATH`

如果您将该脚本放在这些目录中的任何一个中，您应该能够运行该脚本。

# matlab - 查找不在地图中的第一个子字符串

> ID：12739078
> 
> 赞同：1
> 
> 时间：2012-10-05T03:28:20.437
> 
> 标签：matlab

我在 Matlab 中使用 containers.Map 类作为字典，我想找到不在我的地图中的第一个子字符串（从左到右）。

例如，假设我有字符串**“数学”**，而我的地图是这样的

```
核心价值
米 1
马2
. .
. .
. .

```

因此，如果我从左到右开始阅读，则不在 map 中的第一个子字符串将是**'mat'**。

我想到的显而易见的答案是循环每个字符并进行一些连接，以便使用方法**iskey(map, key)**找到不在我的地图中的子字符串，其中 key 是每次迭代中的子字符串。

有没有更有效的方法来做到这一点？也许是 matlab 中的一些预定义函数，或者至少是更优雅的代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:26:03.897

这个怎么样。

地图=容器。地图；

```
% Initialise map
map('m') = 1;
map('ma') = 2;
map('burt') = 3;

% Define search string
m = 'math';

% Create cell array element for first 1,2,3... letters of search
ma = repmat(m,length(m),1);
ma = cellstr(char(ma .* tril(ones(length(m)))));

% Find first substring that isn't in map
index = find(~map.isKey(ma),1,'first') 
```

# xslt - 使用 xsl 从节点结构生成面包屑路径

> ID：12739089
> 
> 赞同：2
> 
> 时间：2012-10-05T03:29:21.580
> 
> 标签：xslt, libxml2, libxslt

我很难编写一个从节点结构生成面包屑试验的模板。到目前为止它无法正常工作，我认为它应该如何走**项目**路径存在一些缺陷。

考虑以下页面结构：

```
<!-- ===== SITE PAGE STRUCTURE ===================================== -->
<index>
   <item section="home" id="index"></item>
   <item section="service" id="index">
      <item id="content-management-systems">
         <item id="p1-1"/>
         <item id="p1-2"/>
         <item id="p1-3"/>
      </item>
      <item id="online-stores"></item>
      <item id="search-engines-and-ir"></item>
      <item id="web-applications"></item>
   </item>

   <item section="solutions" id="index">
      <item id="document-clustering"></item>
   </item>
   <item section="company" id="index">
      <item section="company" id="about"></item>
      <item section="company" id="philosophy" ></item>
      ...
   </item>
...
</item> 
```

此站点索引表示其层次结构中的 xml 内容页面的站点结构（将其视为菜单）。它包含*部分*，代表站点部分，就像*主页、公司、服务、解决方案*等。这些部分可以包含带有页面*的子部分*，或者只是常规内容页面。内容页面（其 xml 内容，如标题、文本内容等）由项目树中的 @id 属性标识。@id 属性主要用于获取将呈现为 html 的整个页面的内容。面包屑模板使用*项目*节点@id 属性来获取页面的标题（将显示在面包屑路径中）。

我尝试通过检查树中的目标部分属性@section 和目标页面属性@id 来实现以下*遍历*树的模板。我希望它通过将祖先的@section 属性和@id 与该轴中每个节点的$item_target 进行比较来找到目标item_target，直到找到目标为止。

例如：属性 *$item_section=service* 和页面 id *target item_target=p1-1* 现在应该递归地“步行”到*部分*​​分支“ **service** ”（深度 1），检查目标页面 @id 是否在这个级别。在这种情况下，它没有找到，因此它对下一个*项目*节点级别进行下一次递归调用（通过应用模板）（在这种情况下它将是**content-management-systems**，在那里找到目标项目页面 p1-1 ，所以跟踪过程完成：

结果应该是这样的：

**首页 >> 服务 >> 内容管理系统 >> p1-1**

但不幸的是，它不能正常工作，至少不是在所有情况下。也许它可以更容易地解决。我尝试将它实现为一个递归模板，该模板作为叶子从顶部（级别 0）到目标页面（项目节点）。

```
 <!-- walk item path to generate a breadcrumb trail -->
    <xsl:template name="breadcrumb">
        <a>
            <xsl:attribute name="href">
                <xsl:text>/</xsl:text>
                <xsl:value-of select="$req-lg"/>
                <xsl:text>/home/index</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="'Home'"/>
        </a>

        <xsl:apply-templates select="$content/site/index" mode="Item-Path">
            <xsl:with-param name="item_section" select="'service'"/>
            <xsl:with-param name="item_target" select="'search-engines-and-ir'"/>
            <xsl:with-param name="depth" select="0"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="item" mode="Item-Path">
        <xsl:param name="item_section" />
        <xsl:param name="item_target" />
        <xsl:param name="depth" />
        <!--
        depth=<xsl:value-of select="$depth"/>
        count=<xsl:value-of select="count(./node())"/><br/>
-->
        <xsl:variable name="cur-id" select="@id"/>
        <xsl:variable name="cur-section" select="@section"/>
        <xsl:choose>    
            <xsl:when test="@id=$item_target">
                &gt;&gt;
                <a>
                    <xsl:attribute name="href">
                        <xsl:text>/</xsl:text>
                                            <!-- req-lg: global langauge variable -->
                        <xsl:value-of select="$req-lg"/>
                        <xsl:text>/</xsl:text>
                        <xsl:value-of select="$item_section"/>
                        <xsl:text>/</xsl:text>
                        <xsl:if test="$depth = 2">
                            <xsl:value-of select="../@id"/>
                            <xsl:text>/</xsl:text>
                        </xsl:if>
                        <xsl:value-of select="@id"/>
                    </xsl:attribute>
                    <xsl:value-of 
                        select="$content/page[@id=$cur-id]/title"/>
                </a>
            </xsl:when>
            <xsl:otherwise>
                <xsl:if test="ancestor-or-self::item/@section = $item_section and count(./node()) > 0">
                &gt;&gt;:
                <a>
                    <xsl:attribute name="href">
                        <xsl:text>/</xsl:text>
                                            <!-- req-lg: global langauge variable -->
                        <xsl:value-of select="$req-lg"/>
                        <xsl:text>/</xsl:text>
                        <xsl:value-of select="$item_section"/>
                        <xsl:text>/</xsl:text>
                        <xsl:if test="$depth = 2">
                            <xsl:value-of select="../@id"/>
                            <xsl:text>/</xsl:text>
                        </xsl:if>
                        <xsl:value-of select="@id"/>
                    </xsl:attribute>
                    <xsl:value-of 
                        select="$content/page[@id=$cur-id and @section=$item_section]/title"/>
                </a>
                </xsl:if>
            </xsl:otherwise>
        </xsl:choose>

        <xsl:apply-templates select="item" mode="Item-Path">
            <xsl:with-param name="item_section" select="$item_section"/>
            <xsl:with-param name="item_target" select="$item_target"/>
            <xsl:with-param name="depth" select="$depth + 1"/>
        </xsl:apply-templates>

    </xsl:template> 
```

因此，作为模板**面包屑**中的硬编码参数，目标部分 = 'service' 和目标页面 = 'search-engines-and-ir'，我希望输出类似

**首页 >> 服务 >> search-engines-and-ir**

但输出是

**主页 >> 服务 >> 内容管理系统 >> search-engines-and-ir**

这显然是不正确的。

谁能给我一个提示如何纠正这个问题？避免这种深度检查会更加优雅，但到目前为止我想不出其他方法，我相信有一个更优雅的解决方案。

我使用 XSLT 1.0（通过 PHP5 的 libxml）。

希望我的问题足够清楚，如果没有，请询​​问:-)提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:19:26.717

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kNodeById" match="item" use="@id"/>

 <xsl:template match="/">
  <xsl:text>home</xsl:text>
  <xsl:call-template name="findPath">
   <xsl:with-param name="pStart" select="'service'"/>
   <xsl:with-param name="pEnd" select="'search-engines-and-ir'"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="findPath">
  <xsl:param name="pStart"/>
  <xsl:param name="pEnd"/>

  <xsl:for-each select=
  "key('kNodeById', $pEnd)
       [ancestor::item[@section=$pStart]]
        [1]
         /ancestor-or-self::item
                [not(descendant::item[@section=$pStart])]
  ">

   <xsl:value-of select=
    "concat('>>', @id[not(../@section)], @section)"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**产生了想要的正确结果：**

```
home>>service>>search-engines-and-ir 
```

**请注意**：

1.  此解决方案从任何节点打印面包屑——层次结构中的任何位置到其任何后代节点——层次结构中的任何位置。更准确地说，对于属性等于 的第一个（`item`按文档顺序），面包屑是从其属性等于-- 的最内层祖先到该元素生成的。`id``$pEnd``section``$pStart``item`

2.  这个解决方案应该比任何使用 的解决方案更有效`//`，因为我们正在使用一个键来有效地定位“结束”`item`元素。

* * *

**二、XSLT 2.0 解决方案：**

更短更容易——一个 XPathe 2.0 单一表达式：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kNodeById" match="item" use="@id"/>

 <xsl:template match="/">
  <xsl:value-of select=
  "string-join(
       (
        'home',
       key('kNodeById', $pEnd)
          [ancestor::item[@section=$pStart]]
              [1]
                /ancestor-or-self::item
                [not(descendant::item[@section=$pStart])]
                       /(@id[not(../@section)], @section)[1]

        ),
      '>>'
        )
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:51:52.973

您可以只遍历祖先或自我:: 轴。这很容易做到，无需递归。例如...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>

<xsl:template match="/">
  <html><body>
    <xsl:call-template name="bread-crumbs">
      <xsl:with-param name="items" select="*/item" />
      <xsl:with-param name="section" select="'service'" />
      <xsl:with-param name="leaf" select="'p1-2'" />
    </xsl:call-template>  
  </body></html>
</xsl:template>

<xsl:template name="bread-crumbs">
  <xsl:param name="items" />
  <xsl:param name="section" />
  <xsl:param name="leaf" />
  <xsl:value-of select="concat($section,'&gt;&gt;')" />
  <xsl:for-each select="$items/self::item[@section=$section]//item[@id=$leaf]/
                        ancestor-or-self::item[not(@section)]">
    <xsl:value-of select="@id" />
    <xsl:if test="position() != last()">
      <xsl:value-of select="'&gt;&gt;'" />
    </xsl:if>  
  </xsl:for-each>  
</xsl:template>  

</xsl:stylesheet> 
```

...在您的样本输入产量...

```
<html>
  <body>service&gt;&gt;content-management-systems&gt;&gt;p1-2</body>
</html> 
```

...呈现为...

```
service>>content-management-systems>>p1-2 
```

# unix - Grep OR 运算符不工作

> ID：12739090
> 
> 赞同：6
> 
> 时间：2012-10-05T03:29:27.770
> 
> 标签：unix, grep, operator-keyword

我需要有关 Unix 的帮助。我正在尝试查看两个语句（printf 和 fprintf）之一是否在文件中。我使用了命令：

```
search=`cat $file | grep -w "fprintf\|printf"` 
```

出于某种原因，它在这两者之一存在的文件中都找不到。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T03:36:01.317

你有两个问题。

首先，[标准`grep`](http://pubs.opengroup.org/onlinepubs/009695399/utilities/grep.html)不支持`|`运营商。您需要使用`egrep`或`-E`标志。

其次，在双引号内，`\|`表示`\|`. 反斜杠被传递给`grep`命令，因此即使`grep`理解`|`运算符，反斜杠也会将其转换为普通字符。

尝试这个：

```
search=`cat $file | egrep -w "fprintf|printf"` 
```

或者，您可以将每个备选方案作为单独的参数提供给`grep`：

```
search=`cat $file | grep -w -e fprintf -e printf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:34:21.933

```
grep -w "fprintf\|printf" $file 
```

这在我的外壳中运行良好。不过，这里有一些替代方案：

```
egrep -w 'fprintf|printf' $file
grep -wE 'fprintf|printf' $file
grep -we 'fprintf\|printf' $file 
```

# wordpress - 为什么这个响应式 CSS 不起作用？

> ID：12739091
> 
> 赞同：0
> 
> 时间：2012-10-05T03:29:27.427
> 
> 标签：wordpress, css, responsive-design

我正在尝试通过添加页面宽的图形横幅和类型处理来修改 Portfolio Page Wordpress 主题。它是一个响应式主题，但我显然把事情搞砸了。css 在 x 轴上使用背景重复来在全屏上重复一些木板，然后在其上放置其他图形，这些图形响应地居中。这是我正在谈论的CSS：

```
#bgImageCornerTL
{
position:relative;
top:0px;
left:0px;
margin-top:0px;
height: 274px;
width: 100%;
z-index: 10;
background-image:url(http://chalupaholics.com/bob/wp-content/uploads/2012/10/PanelWStripe.png);
background-repeat:repeat-x;
background-position: center center;
}
#LogoContent {
    position: relative;
    display: block;
    margin-left: auto;
    margin-right: auto;
    margin-top: -250px;
    width: 872px;
    height: 198px;
    z-index: 12;
    background-repeat: no-repeat;
    background-image: url("/bob/wp-content/uploads/2012/10/BufBobwords.png");
    opacity: 0.9;
} 
```

重复在 iphone 上不起作用。所以，我写了一些应该通过“媒体”查询运行的 css，但我的 iphone 没有拿起它，页面看起来仍然错误。（对于 iphone，我使用单个图形作为标题，图形和木板被压平成一个图形。）有人能发现我做错了什么吗？这是CSS：

```
@media screen and (max-device-width: 480px) {

{
#bgImageCornerTL
    {
    position:relative;
    top:0px;
    left:0px;
    margin-top:0px;
    height: 147px;
    width: 100%;
    z-index: 10;
    background-image:url(http://chalupaholics.com/bob/wp-content/uploads/2012/10/TopBannerIphone.png);
    background-repeat:no-repeat;
    background-position: center center;
    }
#LogoContent,#Tasty,#Address,#Order {
    display:none;
}

} 
```

等等...

这是 header.php 文件的相关区域，我在其中添加了一些 div 来处理新图形：

```
<div id="bgImageCornerTL"></div>
<div id="navwrap"></div>
</head>

<body>

<div id="LogoContent">
<div id="Tasty"></div>
<div id="Address"></div>
<div id="Order"></div>
</div>

<div id="wrapper"> 
```

等等...在普通尺寸的屏幕上看起来不错，但在 iphone 上会中断。我还没有尝试过其他设备。

这是网址，如果你想看看：

```
http://www.chalupaholics/bob/ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:25:46.923

您在媒体查询中的 #bgImageCornerTL 选择器上方有一个额外的“{”

# flash-builder - 有没有办法将控制台文本链接到 Flash Builder 中的源代码？

> ID：12739094
> 
> 赞同：1
> 
> 时间：2012-10-05T03:30:34.377
> 
> 标签：flash-builder, flash-builder4.5

有没有办法在 Flash Builder 的控制台文本中链接到源代码？它与此问题相同，但针对 Flash Builder。

[如何让 Eclipse 控制台将文本超链接到源代码文件？](https://stackoverflow.com/questions/6469445/how-link-eclipse-console-text-to-source-code)

# apache - 用斜线和无斜线重写

> ID：12739097
> 
> 赞同：0
> 
> 时间：2012-10-05T03:31:00.270
> 
> 标签：apache, .htaccess, rewrite

我有一个棘手的情况，我不确定如何完成。

我有以下代码重定向`mysite.com/i/somelink/`到`mysite.com/view.php?i=somelink`

```
RewriteRule ^/?i/([^/]+)/$ /view.php?i=$1 [L] 
```

问题是，上面的代码只有在结尾有斜杠时才有效`mysite.com/i/somelink/`

我需要它在有的时候工作，而不是斜线。

棘手的部分是我也试图不使用单独的规则来减少系统压力，并且规则需要以不干扰的方式编写`mysite.com/i/somelink.ext`，它也存在，并将嵌入我也在重定向文件（view.php）。

我可能让它变得比它需要的复杂得多，但基本上我只需要使上面的规则在有和没有斜杠的情况下都有效。

任何提示表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:59:47.857

将其更改为：

```
RewriteRule ^/?i/([^/]+)/?$ /view.php?i=$1 [L] 
```

# java - 将 Amazon SimpleDB 与 Android 结合使用

> ID：12739101
> 
> 赞同：2
> 
> 时间：2012-10-05T03:31:46.420
> 
> 标签：java, android, amazon-simpledb

我正在尝试将 Amazon 的 SimpleDB 与我正在构建的应用程序一起使用。

我在亚马逊网站上找不到*完整的教程。*所以我想知道是否有人可以提供这方面的教程？希望有人可以分享他们的知识。

# iphone - 为动态创建的 UIView 设置动画

> ID：12739102
> 
> 赞同：1
> 
> 时间：2012-10-05T03:31:54.897
> 
> 标签：iphone, objective-c, ios, xcode

我想出了如何动态添加 UIView 的大部分内容，但现在我被困在尝试创建 alpha 动画时，单击 uibutton 并显示 uiview。不确定我在这里缺少什么：

```
- (void)buttonPressedAction:(id)sender
{
    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    frame.size = self.scrIcon.frame.size;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];

    UIView* view = [[UIView alloc] initWithFrame:frame];

    view.alpha = 1.0;

    [UIView commitAnimations];

    view.backgroundColor = [UIColor redColor];
    [scrIcon addSubview:view];

    /*
    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    CategoryViewController* theView = [sb instantiateViewControllerWithIdentifier:@"categoryIdentifier"];

    theView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:theView animated:YES];*/

} 
```

scrIcon 是一个 UIScrollView

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:01:27.187

你可以试试这个方法：animateWithDuration:animations:

```
UIView *view = [[UIView alloc] initWithFrame:self.scrIcon.frame];
view.backgroundColor = [UIColor redColor];
view.alpha = 0.0;

[scrIcon addSubview:view];

[UIView animateWithDuration:1.0 animations:^{
    view.alpha = 1.0;
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T03:49:33.200

修改了您的代码，将视图 1st 添加到 scrIcon。然后执行动画。

```
- (void)buttonPressedAction:(id)sender
{
    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    frame.size = self.scrIcon.frame.size;

    UIView* view = [[UIView alloc] initWithFrame:frame];

    view.alpha = 0.0f;

    view.backgroundColor = [UIColor redColor];
    [scrIcon addSubview:view];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];

    view.alpha = 1.0;

    [UIView commitAnimations];

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T04:15:16.747

在 ViewDidLoad 中：只需初始化您的视图…..

```
YourAnimateView = [[UIView alloc]initWithFrame:CGRectMake(-320, 0, 320, 320)];
[self.view addSubview:YourAnimateView];

In Your Button Action Method : just put this

[UIView animateWithDuration:0.5 delay:0.1 
                            options:UIViewAnimationOptionTransitionCurlDown
                         animations:^{
                             //animation code
                             YourAnimateView.frame = CGRectMake(0, 0, 320, 345);

                         } completion:^(BOOL finished) {
                             //completion code

                         }]; 
```

# c++ - 加法与比较

> ID：12739107
> 
> 赞同：1
> 
> 时间：2012-10-05T03:32:51.700
> 
> 标签：c++, performance, optimization, micro-optimization

假设我有一个包含 1,000,000 个元素的数组，其中大约 90% 的 0 和 10% 的 1。

为了数1，我可以做

```
sum=0;
for(int i=0;i<size;i++) {
    sum+=x[i]
} 
```

但我想也许比较比加法便宜，所以这会更好。

```
sum=0;
for(int i=0;i<size;i++) {
    if(x[i]==1)
        sum++;
} 
```

但我不确定。哪个更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:35:23.133

如果不尝试，很难说哪个会更快，但是由于[流水线和分支预测](https://stackoverflow.com/a/11227902/335858)，即使是稍微慢一点的没有分支的指令通常也会更快。

在您的情况下，分支预测器在 90% 的情况下都会出错，从而大大降低了速度。

# gcc - 假人的 SSE 浮点点积

> ID：12739109
> 
> 赞同：2
> 
> 时间：2012-10-05T03:33:22.723
> 
> 标签：gcc, sse, simd, dot-product

我已经阅读了许多关于 SSE/SIMD 的 SO 问题（例如，[SSE 入门](https://stackoverflow.com/questions/1389712/getting-started-with-sse)），但我仍然对所有这些问题感到困惑。我想要的只是两个双精度浮点向量之间的点积，用 C 语言（C99 FWIW）。我正在使用 GCC。

有人可以发布一个简单而完整的示例，包括如何将双向量转换为 SSE 类型并再次转换回来？

[编辑2012-10-08]

这是我设法拼凑起来的一些 SSE2 代码，批评？

```
#include <emmintrin.h>

double dotprod(double *restrict a, double *restrict b, int n)
{
   __m128d aa, bb, cc, ss;
   int i, n1 = n - 1;
   double *s = calloc(2, sizeof(double));
   double s2 = 0;

   ss = _mm_set1_pd(0);

   for(i = 0 ; i < n1 ; i += 2) 
   {
     aa = _mm_load_pd(a + i);
     bb = _mm_load_pd(b + i);
     cc = _mm_mul_pd(aa, bb);
     ss = _mm_add_pd(ss, cc);
   }

   _mm_store_pd(s, ss);
   s2 = s[0] + s[1];

   if(i < n)
      s2 += a[i] * b[i];

   free(s);

   return s2;
} 
```

# python - 在一个while循环python中崩溃

> ID：12739111
> 
> 赞同：0
> 
> 时间：2012-10-05T03:33:34.443
> 
> 标签：python, loops, while-loop

如何解决这个错误？我想从 get_robotxya() 和 get_ballxya() 传递值并在循环中使用它，但它似乎会在一段时间后崩溃我该如何解决这个问题？我想获得值而不会从while循环中崩溃

```
import socket
import os,sys
import time
from threading import Thread

HOST = '59.191.193.59'
PORT = 5555

COORDINATES = []

def connect():   
    globals()['client_socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

def update_coordinates():
    connect()
    screen_width = 0
    screen_height = 0
    while True:
        try:
            client_socket.send("loc\n")
            data = client_socket.recv(8192)
        except:
            connect();
            continue;

        globals()['COORDINATES'] = data.split()

        if(not(COORDINATES[-1] == "eom" and COORDINATES[0] == "start")):
            continue

        if (screen_width != int(COORDINATES[2])):
            screen_width = int(COORDINATES[2])
            screen_height = int(COORDINATES[3])
            return

def get_ballxy():
    update_coordinates()
    ballx = int(COORDINATES[8])
    bally = int(COORDINATES[9])

    return ballx,bally

def get_robotxya():
    update_coordinates()
    robotx = int(COORDINATES[12])
    roboty = int(COORDINATES[13])
    angle = int(COORDINATES[14])
    return robotx,roboty,angle

def print_ballxy(bx,by):

    print bx
    print by

def print_robotxya(rx,ry,a):

    print rx
    print ry
    print a

def activate():

    bx,by = get_ballxy()
    rx,ry,a = get_robotxya()
    print_ballxy(bx,by)
    print_robotxya(rx,ry,a)

Thread(target=update_coordinates).start()
while True:
    activate() 
```

这是我得到的错误： ![在此处输入图像描述](../Images/00d87dd3eff4686d4877d36e71c63bf4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:39:56.073

我想你会发现，因为你不断地创建新的连接而不关闭它们，你最终会耗尽资源。

这可能是本地限制，也可能是服务器端厌倦了来自单个 IP 的太多连接。

无论如何，要么创建一个连接并反复使用它，要么在完成连接后关闭它们。

* * *

一种可能的方法是`connect()`在调用之前在主代码中`activate()`：

```
connect()
update_coordinates()
while True:
    activate() 
```

然后`connect()`从`update_coordinates()`函数的开头删除初始值，因为这是每次尝试更新坐标时都会进行新连接的位。

如果会话由于某种原因关闭，该`except`位将重新创建它并重试。

这应该有望大大缓解您的资源问题。

# asp.net-mvc - ASP.NET MVC 4 异步子操作

> ID：12739114
> 
> 赞同：28
> 
> 时间：2012-10-05T03:34:36.050
> 
> 标签：asp.net-mvc, asp.net-mvc-4, async-await

我有一个面向 .NET 4.5 的 ASP.NET MVC 4 应用程序。我们的子操作之一使用 HttpClient 调用 Web 服务。

由于我们阻塞了等待 HttpClient 响应的 IO，因此将代码转换为 async/await 模式非常有意义。但是，当 MVC 4 尝试执行子操作时，我们会收到以下错误消息：

> HttpServerUtility.Execute 在等待异步操作完成时被阻塞。

乍一看，MVC 4 似乎不支持子操作中的异步/等待。剩下的唯一选择是使用同步代码运行并在异步任务上强制“等待”。

众所周知，在 ASP.NET 上下文中的异步任务上触摸 .Result 或 .Wait() 将导致立即死锁。我的异步逻辑包含在类库中，所以我不能使用“await blah.ConfigureAwait(false)”技巧。请记住，在子操作上标记“异步”并使用等待会导致错误，这会阻止我配置等待。

在这一点上，我被画到了一个角落。有*没有*办法在 MVC 4 子操作中使用异步方法？似乎是一个没有解决方法的完全错误。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-05T09:23:42.707

MVC 的某些部分仍然`async`不友好；我希望这些将在未来得到解决。请为此创建 Connect 或 UserVoice 问题。

> 我的异步逻辑包含在类库中，所以我不能使用“await blah.ConfigureAwait(false)”技巧。

您可能*应该*添加`ConfigureAwait(false)`到您的类库中的调用（如果可以的话）。

你也可以破解一个替代解决方案。**如果**您的类库方法不需要 ASP.NET 上下文，那么您可以让线程池线程执行 (a) 等待您：

```
try
{
    var result = Task.Run(async () => { await MyHttpRequest(...); }).Result;
}
catch (AggregateException ex) { ... } 
```

效果类似于`ConfigureAwait(false)`: 因为`MyHttpRequest`在线程池上下文中运行，所以它在完成时不会尝试进入 ASP.NET 上下文。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-27T07:47:54.770

斯蒂芬回答的格式对我来说不太适用（也许这是一个异步菜鸟问题，但是嘿）。

我必须以这种格式编写异步表达式才能获得强类型的返回值。

```
Person myPerson = Task.Run(() => asyncMethodWhichGetsPerson(id)).Result; 
```

# sql - 为什么 SQLite3 使用覆盖索引而不是我创建的索引？

> ID：12739115
> 
> 赞同：1
> 
> 时间：2012-10-05T03:34:40.623
> 
> 标签：sql, sqlite

我有一个非常大的数据库（`contacts`有大约 30 亿个条目，`people`有大约 2.8 亿个条目，而其他表的条目数量可以忽略不计）。我运行的大多数其他查询都非常快。但是，我遇到了一个更复杂的查询，它真的很慢。我想知道是否有任何方法可以加快速度。

首先，这是我的架构：

```
CREATE TABLE activities (id INTEGER PRIMARY KEY, name TEXT NOT NULL);
CREATE TABLE contacts (
        id INTEGER PRIMARY KEY,
        person1_id INTEGER NOT NULL,
        person2_id INTEGER NOT NULL,
        duration REAL NOT NULL, -- hours
        activity_id INTEGER NOT NULL
    --  FOREIGN_KEY(person1_id) REFERENCES people(id),
    --  FOREIGN_KEY(person2_id) REFERENCES people(id)
    );
CREATE TABLE people (
        id INTEGER PRIMARY KEY,
        state_id INTEGER NOT NULL,
        county_id INTEGER NOT NULL,
        age INTEGER NOT NULL,
        gender TEXT NOT NULL, -- M or F
        income INTEGER NOT NULL
    --  FOREIGN_KEY(state_id) REFERENCES states(id)
    );
CREATE TABLE states (
        id INTEGER PRIMARY KEY,
        name TEXT NOT NULL,
        abbreviation TEXT NOT NULL
    );
CREATE INDEX activities_name_index on activities(name);
CREATE INDEX contacts_activity_id_index on contacts(activity_id);
CREATE INDEX contacts_duration_index on contacts(duration);
CREATE INDEX contacts_person1_id_index on contacts(person1_id);
CREATE INDEX contacts_person2_id_index on contacts(person2_id);
CREATE INDEX people_age_index on people(age);
CREATE INDEX people_county_id_index on people(county_id);
CREATE INDEX people_gender_index on people(gender);
CREATE INDEX people_income_index on people(income);
CREATE INDEX people_state_id_index on people(state_id);
CREATE INDEX states_abbreviation_index on states(abbreviation);
CREATE INDEX states_name_index on states(name); 
```

请注意，我已经在数据库中的每一列上创建了一个索引。我不关心数据库的大小；速度是我所关心的。

下面是一个查询示例，正如预期的那样，它几乎可以立即运行：

```
SELECT count(*) FROM people, states WHERE people.state_id=states.id and states.abbreviation='IA'; 
```

这是麻烦的查询：

```
SELECT * FROM contacts WHERE rowid IN
    (SELECT contacts.rowid FROM contacts, people, states
        WHERE contacts.person1_id=people.id AND people.state_id=states.id AND states.name='Kansas'
            INTERSECT
    SELECT contacts.rowid FROM contacts, people, states
        WHERE contacts.person2_id=people.id AND people.state_id=states.id AND states.name='Missouri'); 
```

现在，我认为会发生的是每个子查询都会使用我创建的每个相关索引来加快速度。但是，当我显示查询计划时，我看到：

```
sqlite> EXPLAIN QUERY PLAN SELECT * FROM contacts WHERE rowid IN (SELECT contacts.rowid FROM contacts, people, states WHERE contacts.person1_id=people.id AND people.state_id=states.id AND states.name='Kansas' INTERSECT SELECT contacts.rowid FROM contacts, people, states WHERE contacts.person2_id=people.id AND people.state_id=states.id AND states.name='Missouri');
0|0|0|SEARCH TABLE contacts USING INTEGER PRIMARY KEY (rowid=?) (~25 rows)
0|0|0|EXECUTE LIST SUBQUERY 1
2|0|2|SEARCH TABLE states USING COVERING INDEX states_name_index (name=?) (~1 rows)
2|1|1|SEARCH TABLE people USING COVERING INDEX people_state_id_index (state_id=?) (~5569556 rows)
2|2|0|SEARCH TABLE contacts USING COVERING INDEX contacts_person1_id_index (person1_id=?) (~12 rows)
3|0|2|SEARCH TABLE states USING COVERING INDEX states_name_index (name=?) (~1 rows)
3|1|1|SEARCH TABLE people USING COVERING INDEX people_state_id_index (state_id=?) (~5569556 rows)
3|2|0|SEARCH TABLE contacts USING COVERING INDEX contacts_person2_id_index (person2_id=?) (~12 rows)
1|0|0|COMPOUND SUBQUERIES 2 AND 3 USING TEMP B-TREE (INTERSECT) 
```

事实上，如果我显示我发布的第一个查询的查询计划，我会得到：

```
sqlite> EXPLAIN QUERY PLAN SELECT count(*) FROM people, states WHERE people.state_id=states.id and states.abbreviation='IA';
0|0|1|SEARCH TABLE states USING COVERING INDEX states_abbreviation_index (abbreviation=?) (~1 rows)
0|1|0|SEARCH TABLE people USING COVERING INDEX people_state_id_index (state_id=?) (~5569556 rows) 
```

最后，这是一个使用我创建的索引之一的查询，以证明它们确实被使用：

```
SELECT contacts.* FROM contacts, people, states WHERE contacts.person1_id=people.id AND people.state_id=states.id AND states.name='Iowa'; 
```

该查询生成以下查询计划：

```
sqlite> EXPLAIN QUERY PLAN SELECT contacts.* FROM contacts, people, states WHERE contacts.person1_id=people.id AND people.state_id=states.id AND states.name='Iowa';
0|0|2|SEARCH TABLE states USING COVERING INDEX states_name_index (name=?) (~1 rows)
0|1|1|SEARCH TABLE people USING COVERING INDEX people_state_id_index (state_id=?) (~5569556 rows)
0|2|0|SEARCH TABLE contacts USING INDEX contacts_person1_id_index (person1_id=?) (~12 rows) 
```

为什么 SQLite 使用覆盖索引而不是我创建的索引？这是正确的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:47:09.433

感谢拉里，我只是误解了覆盖索引是什么。SQLite*正在*使用我创建的索引。洗澡的时候想了想，我想只是因为数据库太大了，需要大量的操作来生成我的答案。

堪萨斯州有大约 260 万人。密苏里州有约 540 万人。选择 person1 在堪萨斯州的联系人需要 260 万 * log(30 亿) = 260 万 * 10 = 2600 万次查找。然后，我需要再进行 5400 万次查找，以找到 person2 在密苏里州的联系人。

```
sqlite> SELECT count(*) FROM contacts, people, states WHERE contacts.person1_id=people.id AND people.state_id=states.id AND states.name='Kansas';
31665994
sqlite> SELECT count(*) FROM contacts, people, states WHERE contacts.person2_id=people.id AND people.state_id=states.id AND states.name='Missouri';
69436970 
```

我现在必须在一组大小 ~3170 万和一组大小 ~7000 万之间执行集合交集。

所以减速与数据库或查询设计无关。这只是很多事情要做。

# php - PHP - 将数据库信息写入 PHP 文件？

> ID：12739118
> 
> 赞同：1
> 
> 时间：2012-10-05T03:35:07.293
> 
> 标签：php, mysql, content-management-system

首先，很抱歉，如果这没有显示不是 Stack Overflow 的代码。但我不知道从哪里开始。我有一个我制作的基本 CMS，我正在尝试分发它。我想做到这一点，例如，在转到 /cms/install 时，他们设置数据库信息和不同的信息以集成到 CMS 中。现在我的问题是，允许用户存储该数据库信息的最佳方法是什么？cookie 似乎不是正确的方法。我可以将数据库信息存储在数据库中吗？不太清楚该去哪里。或多或少。在完整 CMS 到达之前临时存储用户提供的数据库信息的最佳方法是什么？

```
<?php 
$fopen = fopen('config.php', 'w'); 
fwrite($fopen, '1'); 
write($fopen, '<?php $dbname = '$_POST['database']'; $dbpassword = '$_POST['password']';     ?>'); fclose($fopen); 
?> 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:39:09.553

创建一个脚本，该脚本使用数据库连接变量生成配置文件（例如 config.php）。完成新配置文件后，不要忘记设置正确的文件权限。

**更新：**

```
$config .= "<?php\n"; 
$config .= "\$database = '".$_POST['database ']."';\n";
$config .= "\$user= '".$_POST['user']."';\n";
$config .= "\$pass= '".$_POST['pass']."';\n"; 
$config .= "?>\n"; 

file_put_contents("config.php", $config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:40:13.467

您必须动态创建一个文件并将信息存储在该文件上。

在此步骤之前，您必须根据用户输入决定要在此处使用的变量和要存储的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:41:13.437

把它放在一个文件中并包含它：

```
<?php
$dbname = 'database';
$dbpassword = 'password';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T03:54:07.227

试试这样

```
<?php 
$fopen = fopen('config.php', 'w'); 
fwrite($fopen, '1'); 
write($fopen, '$dbname = '$_POST['database']';
$dbpassword =               '$_POST['password']';     ');
fclose($fopen); 
 ?> 
```

# c# - 难以创建类和构造函数 C#

> ID：12739119
> 
> 赞同：1
> 
> 时间：2012-10-05T03:35:18.727
> 
> 标签：c#, class, constructor, visual-studio-2012

我正在尝试为我在学校做的一个项目实施离散傅立叶变换算法。但是创建一个类似乎很困难（不应该如此）。我正在使用 Visual Studio 2012。

基本上我需要一个名为 Complex 的类来存储我从 DFT 获得的两个值；实部和虚部。

到目前为止，这就是我所拥有的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SoundEditor_V3
{
    public class Complex
    {
        public double real;
        public double im;

        public Complex()
        {
            real = 0;
            im = 0;
        }
    }
} 
```

问题是它不能将构造函数识别为构造函数，我只是在学习C#，但我在网上查了一下，这就是它应该的样子。但它将我的构造函数识别为一种方法。

这是为什么？我创建的课程错了吗？

它对我的傅立叶课也做同样的事情。所以每次我尝试创建一个傅立叶对象然后使用它的方法......没有这样的事情。

例如，我这样做：

```
Fourier fou = new Fourier();
fou.DFT(s, N,  amp, 0); 
```

它告诉我**fou 是一个“字段”，但被用作“类型”，** 为什么这么说？

这也是我的傅立叶类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SoundEditor_V3
{
   public class Fourier
   {

        //FOURIER
        //N = number of samples
        //s is the array of samples(data)
        //amp is the array where the complex result will be written to
        //start is the where in the array to start
        public void DFT(byte[] s, int N, ref Complex[] amp, int start)
        {
            Complex tem = new Complex();
            int f;
            int t;

            for (f = 0; f < N; f++)
            {

                tem.real = 0;
                tem.im = 0;

                for (t = 0; t < N; t++)
                {
                    tem.real += s[t + start] * Math.Cos(2 * Math.PI * t * f / N);
                    tem.im -= s[t + start] * Math.Sin(2 * Math.PI * t * f / N);

                }
                amp[f].real = tem.real;
                amp[f].im = tem.im;

            }
        }

        //INVERSE FOURIER
        public void IDFT(Complex[] A, ref int[] s)
        {
            int N = A.Length;
            int t, f;
            double result;
            for (t = 0; t < N; t++)
            {
                result = 0;
                for (f = 0; f < N; f++)
                {
                    result += A[f].real * Math.Cos(2 * Math.PI * t * f / N) - A[f].im * Math.Sin(2 * Math.PI * t * f / N);
                }
                s[t] = (int)Math.Round(result);
            }
        }
    }
} 
```

我现在非常困惑，任何和所有的帮助都将不胜感激。谢谢你。

编辑：

这是我试图访问我的所有课程的地方：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace SoundEditor_V3
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        string filename;
        NAudio.Wave.WaveStream waveStream;

        private NAudio.Wave.DirectSoundOut sout = null;

        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {

            OpenFileDialog open = new OpenFileDialog();
            open.Filter = "Wave File (*.wav)|*.wav";
            if (open.ShowDialog() != DialogResult.OK)
            {
                return;
            }
            waveStream = new NAudio.Wave.WaveFileReader(open.FileName);
            filename = open.FileName;
            sout = new NAudio.Wave.DirectSoundOut();
            sout.Init(new NAudio.Wave.WaveChannel32(waveStream));

        }

        //Play
        private void Play_btn_Click(object sender, EventArgs e)
        {
            sout.Play();
        }

        //Stop
        private void Stop_btn_Click(object sender, EventArgs e)
        {
            sout.Stop();
            waveStream.Position = 0;
        }

        //Pause
        private void Pause_btn_Click(object sender, EventArgs e)
        {
            sout.Pause();
        }

        //display fourier
        //N = number of samples(length of array)
        //s is the array of samples(data)
        //amp is the array where the complex result will be written to
        //start is the where in the array to start
        static int N = 8;
        byte[] s = {1,2,3,4,5,6,7,8};

        Complex[] amp = new Complex[N];

        Fourier xfo = new Fourier();

        //xfo.DFT(s, N,  amp, 0); 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:20:35.873

此调用应在方法内。截至目前，它看起来直接在一个类之下。

```
//xfo.DFT(s, N,  amp, 0); 
```

还`ref`为`amp`. （因为`void DFT(...., ref Complex[] amp,....)`需要一个`ref amp`参数。

```
xfo.DFT(s, N, ref amp, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:41:45.850

哦，男孩，还有很大的改进空间。

首先，您将类 Complex 用作结构，实际上不需要将其作为类，因此将其设为结构：

```
public struct Complex
{
    public double Imaginary;
    public double Real;
} 
```

不需要构造函数，默认构造函数（编译器添加）将根据字段的类型将字段设置为其默认值，并且`double`默认值是`0.0`（无论如何，这是您分配给它们的值*）。

我还将 im 重命名为 Imaginary，不要告诉我你必须输入更多，因为你有智能感知。如果你没有去下载 Mono Develop 或 Visual Studio Express。哦，我能感觉到你的想法：我们不应该依赖工具。嗯，没错，这是编写易于阅读的代码的另一个原因，即使对于那些不熟悉这些概念的人也是如此（它也使搜索更容易）。

*：我想指出它`0`是一个整数文字并且`0.0`是双精度的，但是编译器会重新调整它并优化转换，所以它在实际用途中是相同的。

让我们转到您的傅立叶类，首先是方法 DFT，我在下面复制它（重命名了 Complex 的字段名称）：

```
 //FOURIER
    //N = number of samples
    //s is the array of samples(data)
    //amp is the array where the complex result will be written to
    //start is the where in the array to start
    public void DFT(byte[] s, int N, ref Complex[] amp, int start)
    {
        Complex tem = new Complex();
        int f;
        int t;

        for (f = 0; f < N; f++)
        {

            tem.real = 0;
            tem.im = 0;

            for (t = 0; t < N; t++)
            {
                tem.real += s[t + start] * Math.Cos(2 * Math.PI * t * f / N);
                tem.im -= s[t + start] * Math.Sin(2 * Math.PI * t * f / N);
            }
            amp[f].real = tem.real;
            amp[f].im = tem.im;

        }
    } 
```

首先要注意的是，您说 N 是样本数，s 是样本数组。好吧，如果您有一个数组，您可以查询数组的大小，即使您只想允许处理数组的一部分（我认为您想要），这也是一个好主意。但是，真的 N 和 s？

看，这就像魔术：

```
 //FOURIER
   //amp is the array where the complex result will be written to
   //start is the where in the array to start
   public void DFT(byte[] samples, int samplesCount, ref Complex[] amp, int start)
   {
       Complex tem = new Complex();
       int f;
       int t;

       for (f = 0; f < samplesCount; f++)
       {

           tem.Real = 0;
           tem.Imaginary = 0;

           for (t = 0; t < samplesCount; t++)
           {
               tem.Imaginary += samples[t + start] * Math.Cos(2 * Math.PI * t * f / samplesCount);
               tem.Imaginary -= samples[t + start] * Math.Sin(2 * Math.PI * t * f / samplesCount);
           }
           amp[f].Real = tem.Real;
           amp[f].Imaginary = tem.Imaginary;
       }
   } 
```

好的，接下来你说 amp 是输出。那么如果它是输出，你为什么不让它te方法返回呢？

砰！

```
 //FOURIER
   //start is the where in the array to start
   Complex[] DFT(byte[] samples, int samplesCount, int start)
   {
       var = new Complex[samplesCount];
       Complex tem = new Complex();
       int f;
       int t;
       for (f = 0; f < samplesCount; f++)
       {

           tem.Real = 0;
           tem.Imaginary = 0;

           for (t = 0; t < samplesCount; t++)
           {
               tem.Imaginary += samples[t + start] * Math.Cos(2 * Math.PI * t * f / samplesCount);
               tem.Imaginary -= samples[t + start] * Math.Sin(2 * Math.PI * t * f / samplesCount);
           }
           result[f].Real = tem.Real;
           result[f].Imaginary = tem.Imaginary;
       }
       return result;
   } 
```

它真的需要是一个数组吗？[`yield`](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)我认为这是使用关键字和 return的好机会[`IEnumerable<Complex>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)。但我会认为你确实想要一个数组。

现在，您可能不想返回一个数组。可能您只想修改预先存在的数组的一部分。在这种情况下，您应该开始检查您的界限。即使那是真的，你根本不需要 ref ！因为数组是引用类型。它是按值传递的引用，如果您不能完全理解这个想法，请相信我，您可以修改数组的内容并在没有引用的情况下看到它反映在外部...按引用传递引用允许您更改由另一个人引用，而您没有这样做。

演示：

```
void Main()
{
    var x = new int[1];
    Do(x);
    Console.WriteLine(x);
}

void Do (int[] array)
{
    array[0] = 1;
} 
```

上一个程序（用 LinqPad 编译）的输出是“1”。

但是让我们回到你的代码，好吗？

我不知道`f`和是什么`t`。谢天谢地，我知道我是虚构的（它是，对吧？）。所以我不会重命名它们。但我会将它们的定义移到循环中：

```
 Complex[] DFT(byte[] samples, int samplesCount, int start)
   {
       var result = new Complex[samplesCount];
       Complex tem = new Complex();
       for (int f = 0; f < samplesCount; f++)
       {
           tem.Real = 0;
           tem.Imaginary = 0;
           for (int t = 0; t < samplesCount; t++)
           {
               tem.Imaginary += samples[t + start] * Math.Cos(2 * Math.PI * t * f / samplesCount);
               tem.Imaginary -= samples[t + start] * Math.Sin(2 * Math.PI * t * f / samplesCount);

           }
           result[f].Real = tem.Real;
           result[f].Imaginary = tem.Imaginary;
       }
       return result;
   } 
```

请注意我对[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)关键字的使用。有了它，编译器将变量的类型分配给我用来初始化它的类型。所以在这种情况下，结果是 a`Complex[]`但我不必在代码中写两次。

最后，复制`Complex`对象内容的那部分，好吧，我也会改变它。为什么？因为 Complex 现在是一个结构体，而结构体是值类型。所以它的内容被复制而不是参考。

```
 //FOURIER
   //start is the where in the array to start
   Complex[] DFT(byte[] samples, int samplesCount, int start)
   {
       var result = new Complex[samplesCount];
       Complex tem = new Complex();
       for (int f = 0; f < samplesCount; f++)
       {
           tem.Real = 0;
           tem.Imaginary = 0;
           for (int t = 0; t < samplesCount; t++)
           {
               tem.Imaginary += samples[t + start] * Math.Cos(2 * Math.PI * t * f / samplesCount);
               tem.Imaginary -= samples[t + start] * Math.Sin(2 * Math.PI * t * f / samplesCount);

           }
           result[f] = tem;
       }
       return result;
   } 
```

* * *

我知道您真的只想处理数组的一部分。但是请耐心等待……您将学到一些东西，并且无论如何该代码都会很有用。

我想要的下一件事是返回一个`IEnumerable<Complex>`接口，它表示可以迭代以获取复杂类型对象的任何内容。我也会使用`yield`关键字。

此外，我已经摆脱了 sampleCount 并改用 samples.Length 。

看看它有多漂亮：

```
 //FOURIER
    public IEnumerable<Complex> DFT(byte[] samples, int startIndex)
    {
        int samplesLength = samples.Length;
        for (int f = 0; f < samplesLength; f++)
        {
            Complex resultItem = new Complex();
            for (int t = 0; t < samplesLength; t++)
            {
                resultItem.Real += samples[t + startIndex] * Math.Cos(2 * Math.PI * t * f / samplesLength);
                resultItem.Imaginary -= samples[t + startIndex] * Math.Sin(2 * Math.PI * t * f / samplesLength);
            }
            yield return resultItem;
        }
    } 
```

事实上，我也会去掉 startIndex （无论如何我们都不会检查边界*）。

*：也就是说，我们不检查索引是否在数组大小内。我知道，我知道，您稍后会添加它们……可能。

不管怎样，你在这里学习了一些 C#。

```
 //FOURIER
    public IEnumerable<Complex> DFT(byte[] samples)
    {
        int samplesLength = samples.Length;
        for (int f = 0; f < samplesLength; f++)
        {
            Complex resultItem = new Complex();
            for (int t = 0; t < samplesLength; t++)
            {
                resultItem.Real += samples[t] * Math.Cos(2 * Math.PI * t * f / samplesLength);
                resultItem.Imaginary -= samples[t] * Math.Sin(2 * Math.PI * t * f / samplesLength);
            }
            yield return resultItem;
        }
    } 
```

好吧，接下来困扰我的事情是傅立叶类没有状态（它没有字段，或者任何值被持久化的变量......不知何故）。所以，让它成为一个带有静态方法的静态类：

```
public static class Fourier
{
    //FOURIER
    public static IEnumerable<Complex> DFT(byte[] samples)
    {
        int samplesLength = samples.Length;
        for (int f = 0; f < samplesLength; f++)
        {
            Complex resultItem = new Complex();
            for (int t = 0; t < samplesLength; t++)
            {
                resultItem.Real += samples[t] * Math.Cos(2 * Math.PI * t * f / samplesLength);
                resultItem.Imaginary -= samples[t] * Math.Sin(2 * Math.PI * t * f / samplesLength);
            }
            yield return resultItem;
        }
    }
} 
```

当然你注意到我没有添加 IDFT。那是家庭作业。

现在，让我们看看你如何使用它。就我而言，我创建了一个 ConsoleApplication，只是为了让它快速启动并运行（不浪费时间设计 GUI）。

我想要的是调用 Fourier.DFT，因为它是静态的，所以我可以在没有 Fourier 类型的对象的情况下调用它（实际上我无法创建 Fourier 类型的对象，因为它是静态的）。

此方法接收类型为 的参数`byte[]`。那一个将是`new byte[] { 1, 2, 3, 4, 5, 6, 7, 8 }`。该方法将返回一些我可以用来迭代以获取 Complex 类型的对象的东西。所以我想把它放在一个循环中。

这就是我的代码的样子：

```
class Program
{
    static void Main(string[] args)
    {
        //display fourier
        foreach (var item in Fourier.DFT(new byte[] { 1, 2, 3, 4, 5, 6, 7, 8 }))
        {
            Console.WriteLine(item);
        }
    }
} 
```

现在......输出是......鼓声......

好吧，我看不到它，我忘记了，`Console.ReadLine();`但是在添加了输出之后...

```
Namespace.Complex
Namespace.Complex
Namespace.Complex
Namespace.Complex
Namespace.Complex
Namespace.Complex
Namespace.Complex
Namespace.Complex 
```

等等，什么？碰巧我还没有告诉它如何将 Complex 类型的对象转换为字符串。所以让我们补充一下：

```
public struct Complex
{
    public double Imaginary;
    public double Real;

    public override string ToString()
    {
        return string.Format("Complex [Real: {0}, Imaginary: {1}]", Real, Imaginary);
    }
} 
```

现在我的输出是：

```
Complex [Real: 36, Imaginary: 0]
Complex [Real: -4, Imaginary: 9,65685424949238]
Complex [Real: -4, Imaginary: 4]
Complex [Real: -4, Imaginary: 1,65685424949239]
Complex [Real: -4, Imaginary: -3,91874033223161E-15]
Complex [Real: -4,00000000000001, Imaginary: -1,65685424949239]
Complex [Real: -4,00000000000002, Imaginary: -4,00000000000001]
Complex [Real: -3,99999999999997, Imaginary: -9,65685424949237] 
```

~~输出是否正确？我没有什么鬼主意！我必须更多地了解傅立叶（但它看起来是合法的）。~~

经过验证，输出是正确的。

* * *

最后一点：使用调试器逐步检查代码，您可能会发现一个惊喜（提示：yield）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:52:59.753

你需要一个方法，试试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SoundEditor_V3
{
    public class Complex
    {
        public double real;
        public double im;

        public Complex()
        {
            real = 0;
            im = 0;
        }

        public Setval (double newReal, double newIm)
        {
            real = newReal;
            im = newIm;
        }
    }
} 
```

关于你的其他类，构造函数在哪里？;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:28:16.517

谢谢你的帮助; 我实际上最终弄清楚了一切。我无法访问我试图访问它们的区域中的方法。我不得不将它们放在一个方法块中，因为这一切都被编码在一个表单中。反正这是我的理解。

但是，再次感谢您的所有建议，它们都很有帮助。

# swing - JTable 中的 JTextField 与 JComboBox 行为

> ID：12739123
> 
> 赞同：1
> 
> 时间：2012-10-05T03:35:54.850
> 
> 标签：swing, jtable, jcombobox, jtextfield

好的，这很难解释，但我会尽力而为。

我在 JTable 中有一个 JTextField 和一个 JComboBox，其 getCellEditor 方法已被覆盖，如下所示：

```
public TableCellEditor getCellEditor( int row, int column ) {
        if ( column == 3 ) {
              // m_table is the JTable

              if ( m_table.getSelectedRowCount() == 1 ) {             
                JComboBox choices = new JComboBox();
                choices.setEditable( true );
                choices.addItem( new String( "item 1" ) );

                return new DefaultCellEditor( choices );
         }

         return super.getCellEditor( row, column );
} 
```

以下是行为差异（请注意，从现在开始，当我说 JTextField 或 JComboBox 时，我指的是 JTable 中包含任一组件的 CELL）：

1.  当我在 JTextField 上单击一次时，单元格会突出显示。双击会弹出插入符号，我可以输入文本。而对于 JComboBox，单击会调出插入符号以输入文本，以及组合下拉按钮。

2.  当我使用 Tab 键或使用箭头键导航到 JTextField 然后开始输入时，我输入的字符会自动输入到单元格中。然而，当我以相同的方式导航到 JComboBox 然后开始输入时，除了出现组合下拉按钮之外什么都没有发生。除非我先按 F2，否则我输入的任何字符都不会被输入。

所以这是我的问题：在上述两个实例中，我需要做什么才能让 JComboBoxes 的行为与 JTextFields 完全一样？

请不要问我为什么要做我正在做的事情或建议替代方案（它就是这样，我需要这样做），是的，我已经阅读了所有相关组件的 API......问题是，它是一个swing API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:12:48.220

进一步谷歌搜索使我看到以下文章：

[http://www.jroller.com/santhosh/entry/keyboard_handling_in_tablecelleditor](http://www.jroller.com/santhosh/entry/keyboard_handling_in_tablecelleditor)

尽管它没有描述与我相同的问题，但它肯定具有一些共同特征。

使用那篇文章中的一些建议，我能够（至少）解决我的问题的键盘位（我的问题第 2 点中描述的那个）。我通过覆盖以下`processKeyBinding`方法来做到这一点`JTable`：

```
protected boolean processKeyBinding( KeyStroke key_stroke, KeyEvent e, int condition, boolean pressed ) {
        Object source = e.getSource();

        if ( source instanceof JTable ) {
          JTable table = (JTable) source;
          Component comp = table.getEditorComponent();

          if ( comp instanceof JComboBox ) {
            JComboBox combo_box = (JComboBox) comp;

            // this bit is quite hacky. Since I want comboboxes to behave exactly like textfields,
            // simply check to see how a textfield would handle this event.
            JTextField tmp_field = new JTextField();
            InputMap input_map = tmp_field.getInputMap( condition );
            ActionMap action_map = tmp_field.getActionMap();

            if( input_map != null && action_map != null && isEnabled() ) {
                Object binding = input_map.get( key_stroke );
                Action action = ( binding == null ) ? null : action_map.get( binding );

                if( action != null ) {
                    combo_box.requestFocus();
                    ComboBoxEditor combo_editor = combo_box.getEditor();
                    JTextField text_field = (JTextField) combo_editor.getEditorComponent();

                    if ( e.getKeyChar() == ' ' ) {    // backspace
                      String cur_val = text_field.getText();
                      if ( ! cur_val.equals( "" ) )
                        text_field.setText( cur_val.substring( 0, cur_val.length() - 1 ) );
                    }                          
                    else
                      text_field.setText( text_field.getText() + e.getKeyChar() );

                    return false;
                }
            }
          }
        }

        return super.processKeyBinding( key_stroke, e, condition, pressed );
} 
```

这种方法对我来说似乎有点像黑客，但又是摇摆不定，所以它可能是合理的。

如果有人想尝试一下，在我的问题第 1 点（即使用鼠标时）描述的场景中，让 JComboBoxes 表现得像 JTextFields 的问题仍然存在。

灰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:56:12.120

项目符号 2 的替代方法是将 keyEvents 的所有传递移动到自定义 JComboBox 实现中：在那里，实现类似于 table.processKeyBinding 的 processKeyBinding。就像是：

```
public static class JTableEditorComboBox extends JComboBox {

    @Override
    protected boolean processKeyBinding(KeyStroke ks, KeyEvent e,
            int condition, boolean pressed) {
        boolean result = super.processKeyBinding(ks, e, condition, pressed);
        if (!result) 
            result = processKeyBindingForTextField(ks, e, condition, pressed);
        return result;
    }

    private boolean processKeyBindingForTextField(KeyStroke ks, KeyEvent e,
            int condition, boolean pressed) {
        // sanity check: really used as cellEditor
        if (!Boolean.TRUE.equals(getClientProperty("JComboBox.isTableCellEditor")) 
               || !isEditable() 
               || !(getEditor().getEditorComponent() instanceof JTextField)) return false;
        JTextField field = (JTextField) getEditor().getEditorComponent();
        // basically c&p JComponent.processKeyBinding (it's protected so
        // can't call directly from here)
        InputMap map = field.getInputMap(WHEN_FOCUSED);
        ActionMap am = field.getActionMap();

        if(map != null && am != null && isEnabled()) {
            Object binding = map.get(ks);
            Action action = (binding == null) ? null : am.get(binding);
            if (action != null) {
                return SwingUtilities.notifyAction(action, ks, e, field,
                                                   e.getModifiers());
            }
        }

        return false;
    }

} 
```

然后，在您的 cellEditor 中使用该实例，例如：

```
JTable table = new JTable(new AncientSwingTeam()) {

    @Override
    public TableCellEditor getCellEditor(int row, int column) {
        if (column == 1) {
            // m_table is the JTable

            JComboBox choices = new JTableEditorComboBox();
            choices.setEditable(true);
            choices.addItem(new String("item 1"));

            DefaultCellEditor editor = new DefaultCellEditor(choices);
            editor.setClickCountToStart(2);
            return editor;
        }

        return super.getCellEditor(row, column);
    }

}; 
```

# jquery - 通过 ajax 将图像发送到 WCF 时出错

> ID：12739125
> 
> 赞同：0
> 
> 时间：2012-10-05T03:36:05.910
> 
> 标签：jquery, file-upload, multipartform-data, form-data

这是我的表格：

```
<form id="register" enctype="multipart/form-data">
    <input type="text" name="first_name" placeholder="First Name" id="first_name" />
    <input type="text" name="last_name" placeholder="Last Name" id="last_name" />        
    <input type="text" name="input_email" placeholder="Confirm your email"  id="input_email" class="loginEmail" />
    <input type="password" name="input_password" placeholder="Password" id="input_password" class="loginPassword" />
    <input type="password" name="repeat_password" placeholder="Repeat password" id="repeat_password" class="loginPassword" />
    <input type="file" name="image_file" id="image_file" />

    <div class="logControl">
        <div class="memory"></div>
        <input type="submit" name="submit" value="Register" class="buttonM bBlue" id="register_submit"/>
        <div class="clear"></div>
    </div>
    <p><h3>Or click <a href="login.html">here</a> to login</h3></p>
</form> 
```

这是我进行的 jquery 调用：

```
 function WCFJSON() {
         $(".memory").html('<img src="images/elements/loaders/7s.gif" />');
         Data = new FormData($('form')[0]);
         $.ajax({
             type: 'POST', //GET or POST or PUT or DELETE verb
             url: "WCFService/Service.svc/Register", // Location of the service
             data: Data, //Data sent to server
             async:false,
             cache:false,
             contentType: false, // content type sent to server
             dataType: "json", //Expected data format from server
             processdata: false, //True or False
             success: function(msg) {//On Successfull service call
                 ...
             },
             error: ...// When Service call fails
         });
     }

     $(document).ready(function(){
         $("#register").submit(function(){              
            WCFJSON();
            return false;
        });
    }); 
```

现在，当我提交表单时，页面会使用 url 中的 get 元素刷新。但是如果我从表单中删除文件输入，jquery 工作正常。

# css - 为什么一列似乎首先在 Wordpress 中加载？

> ID：12739126
> 
> 赞同：0
> 
> 时间：2012-10-05T03:36:17.950
> 
> 标签：css, wordpress, html

我有一个 Wordpress 网站正在做一些非常奇怪的事情。如果你去：

[http://digitaldemo.net/joy/krippen-abc/](http://digitaldemo.net/joy/krippen-a-b-c/)

当它加载时，主要内容 div 加载到页面的右侧，然后一旦侧边栏加载，它就会被推到它应该在的位置。

它仅在 Firefox 中才真正引人注目，但我想找出导致它的原因并解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:06:14.117

我解决了这个问题！我添加`position:relative`到#content div，然后添加`position:absolute`到`left:30px`#content-left div。瞧！

感谢所有试图帮助我的人！

# iphone - iPad：如何使用静态图像实现滚动时间线？

> ID：12739128
> 
> 赞同：0
> 
> 时间：2012-10-05T03:36:25.963
> 
> 标签：iphone, ios, ipad

我正在潜入 iOS 开发，并且正在使用我已经拥有的静态时间线图像构建一个简单的时间线应用程序。时间线图像不适合屏幕。图像的宽度大约是 iPad 屏幕宽度的五倍，所以我必须允许用户水平滚动图像。这是一个模型...

![在此处输入图像描述](../Images/b6ec8af5c916358e188061b91967be5d.png)

对于时间线上的每个项目，用户可以点击它以在屏幕底部接收描述。我的问题是...

1.  我打算在底部使用带有 PageControl 的 UIScrollView。UIScrollView 可以保存一个包含整个时间轴图像的视图，还是我必须将时间轴图像分解为多个视图？
2.  使用静态图像使用 UIScrollView 实现此功能时，是否需要考虑任何性能问题？
3.  除了使用 UIScrollView 之外，我还应该考虑实现这个可滚动时间线的其他方法吗？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:36:39.323

是的，你需要一个 UIScrollView。但是，您可以使用 CATiledLayer 使其表现良好。您只需要预先平铺静态图像。[在应用商店中](http://itunes.apple.com/us/app/shutterstock-for-ipad/id473347409?mt=8)试用ShutterStock 应用（它是免费的）。他们有一个非常出色的水平滚动实现，我相信它使用了 CATiledLayer（尽管我不完全确定）。

不久前我做了一个关于使用 CATiledLayer 的教程。你可以在这里查看：[http ://www.cimgf.com/2011/03/01/subduing-catiledlayer/](http://www.cimgf.com/2011/03/01/subduing-catiledlayer/)

如果您只支持 iOS 6 及更高版本，您可以考虑使用非常高效的 UICollectionView。它的工作方式类似于具有单元格重用模式的 UITableView，但允许您像您正在寻找的那样进行水平滚动。

# delphi - 我需要 Free() 一个 TDateTime 吗？

> ID：12739132
> 
> 赞同：2
> 
> 时间：2012-10-05T03:37:24.483
> 
> 标签：delphi

它似乎正在工作，但我正在挠头试图找到内存泄漏，而且我不太擅长那种事情:-(

```
const UNIX_START_DATE: TDateTime = 25569.0;

function UnixToDateTime(USec: Longint): TDateTime;
begin
  Result := (Usec / 86400) + UNIX_START_DATE;
end; 
```

我实际上并没有打电话`TDateTime.Create()`- 但是是编译器（这意味着我必须在某个地方释放它）？或者，由于`TDateTime`基本上只是一个双倍，编译器是否只是将它推入堆栈以分配给调用者？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T04:52:41.397

没有什么可以免费的。`TDateTime`是一个简单的类型`Double`，因此它不是在堆上分配的。

# sms - 如何使用 nexmo 服务在 asp.net 上接收短信

> ID：12739135
> 
> 赞同：1
> 
> 时间：2012-10-05T03:38:21.163
> 
> 标签：sms, nexmo

我需要一些关于我应该遵循哪些步骤来使用 www.nexmo.com 的服务接收短信的指导。我对 asp.net 不熟悉，但我对 windows 上的 C# 非常熟悉，所以如果你能提供一些步骤让我继续前进，那么我可以从那里拿起它。现在我在 www.godaddy.com 有一个帐户，所以我希望我可以编写代码将其放置在那里。我真的不需要太多关于如何使用nexmo服务的细节，我主要需要知道我应该在我的网站上做什么来接收来自nexmo的短信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:45:01.700

传入的 SMS 只是对您的“页面”的 HTTP 请求。Nexmo 发送 SMS 和相关数据，就像 HTML 一样，使用 GET（查询字符串）或 POST（表单编码）将数据提交到 URL，

因此，您所要做的就是将 Nexmo 指向您要使用的 URL，然后检查传入的数据请求。这是[传入消息的文档](http://nexmo.com/documentation/index.html#mo)。

这是一个[社区创作的 C# 库](https://github.com/siutin/Nexmo-CSharp-lib)，可能会有所帮助。

（*免责声明：我为 Nexmo 做一些开发人员宣传。*）

# lisp - 跟踪递归函数中的全局变量

> ID：12739136
> 
> 赞同：-1
> 
> 时间：2012-10-05T03:38:28.823
> 
> 标签：lisp

在过去的几个小时里，我一直在努力解决这个问题，在互联网上寻求帮助，但我似乎仍然无法弄清楚。

问题很简单：

编写一个递归程序（在 lisp 中），它接受一个列表并返回列表中 'a 原子的数量。

从我所做的研究来看，LISP 似乎有一个隐含的计数器，如果你只做 (+ 1) 它会在哪里跟踪？这是关了吗？

请帮忙，我很沮丧...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:53:02.603

您只需要在参数中携带一个计数器。我一直没有使用 LISP，但只是一个简单的 (+ counterName 1) 作为参数应该跟踪。不过不要忘记给它一个起始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:22:55.560

这里的想法不是使用全局变量，而是将计数保持在“堆栈中”。

这是一个方案解决方案。我相信您可以将其转换为您正在使用的任何 Lisp 方言：

```
(define (count-a lst)
  (cond ((null? lst) 0)
        ((eq? (car lst) 'a) (+ (count-a (cdr lst)) 1))
        (else (count-a (cdr lst))))) 
```

如果这对你来说还不够 DRY，这里有一个更精简的版本：

```
(define (count-a lst)
  (if (null? lst) 0
      (+ (count-a (cdr lst)) (if (eq? (car lst) 'a) 1 0)))) 
```

# ruby-on-rails - 使用 capistrano 和“主机密钥验证失败”进行部署。问题

> ID：12739138
> 
> 赞同：0
> 
> 时间：2012-10-05T03:38:56.607
> 
> 标签：ruby-on-rails, deployment, ssh, capistrano, linode

我正在尝试在 Linode 上设置我的 Rails 应用程序，我正处于尝试设置 Capistrano 的阶段。

我在与我部署的服务器相同的服务器上设置了一个 git 服务器。我已经设置了 SSH 密钥（我认为）——至少我可以 SSH 没有问题。

'cap deploy:setup' 和 'cap deploy:check' 都运行没有错误。

但是当我尝试运行'cap deploy：migrations'时，我得到以下信息：

```
ray@ray-ThinkPad-SL:~/mini-saler$ cap deploy:migrations
  * executing `deploy:migrations'
  * executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@XX.207.243.215:mini-saler.git master"
    command finished in 12446ms
  * executing "if [ -d /home/railsu/bianbian.com/shared/cached-copy ]; then cd /home/railsu/bianbian.com/shared/cached-copy && git fetch  origin && git fetch --tags  origin && git reset  --hard 8e8aa8f849a9438851a3767b338ab711d6470299 && git clean  -d -x -f; else git clone git@XX.207.243.215:mini-saler.git /home/railsu/bianbian.com/shared/cached-copy && cd /home/railsu/bianbian.com/shared/cached-copy && git checkout -b deploy 8e8aa8f849a9438851a3767b338ab711d6470299; fi"
    servers: ["XX.207.243.215"]
    [XX.207.243.215] executing command
 ** [XX.207.243.215 :: out] Cloning into /home/railsu/bianbian.com/shared/cached-copy...
 ** [XX.207.243.215 :: err] Host key verification failed.
 ** [XX.207.243.215 :: err] fatal: The remote end hung up unexpectedly
    command finished in 2009ms
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'if [ -d /home/railsu/bianbian.com/shared/cached-copy ]; then cd /home/railsu/bianbian.com/shared/cached-copy && git fetch  origin && git fetch --tags  origin && git reset  --hard 8e8aa8f849a9438851a3767b338ab711d6470299 && git clean  -d -x -f; else git clone git@XX.207.243.215:mini-saler.git /home/railsu/bianbian.com/shared/cached-copy && cd /home/railsu/bianbian.com/shared/cached-copy && git checkout -b deploy 8e8aa8f849a9438851a3767b338ab711d6470299; fi'" on XX.207.243.215 
```

部署.rb

```
set :user, 'railsu'
set :domain, 'XX.207.243.215'
set :application, 'mini-saler'
# adjust if you are using RVM, remove if you are not
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, '1.9.3'
set :rvm_type, :user
# file paths
set :repository, "git@#{domain}:mini-saler.git"
set :deploy_to, "/home/railsu/bianbian.com"
# distribute your applications across servers (the instructions below put them
# all on the same server, defined above as 'domain', adjust as necessary)
role :app, domain
role :web, domain
role :db, domain, :primary => true

# miscellaneous options
set :deploy_via, :remote_cache
set :scm, 'git'
set :branch, 'master'
set :scm_verbose, true
set :use_sudo, false
set :rails_env, :production

namespace :deploy do
  desc "cause Passenger to initiate a restart"
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end
  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; rake db:seed RAILS_ENV=#{rails_env}"
  end
end

after "deploy:update_code", :bundle_install
desc "install the necessary prerequisites"
task :bundle_install, :roles => :app do
  run "cd #{release_path} && bundle install"
end 
```

我可以使用 ssh 连接我的 vps。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:52:31.047

我不记得是否调用了任何 git 命令，`cap deploy:setup`或者`cap deploy:check`- 我认为没有。

假设您使用的是 gitolite，请检查以确保您的配置有您的`railsu`用户的公钥在`keydir`目录中。

或者也许代理转发是您想要的？ [使用 Capistrano 进行部署](https://help.github.com/articles/deploying-with-capistrano)可以帮助您。

# iphone - 通过透明视图传递触摸的更快方法？

> ID：12739142
> 
> 赞同：1
> 
> 时间：2012-10-05T03:39:22.583
> 
> 标签：iphone, objective-c, ios, xcode

我有一些对象只是具有重叠透明区域的 PNG 的 UIImageViews。我在透明部分重叠的地方堆叠了几张彼此靠近的图像。当其中一个被触摸时，我会播放一些音频。

为了让触摸穿过透明区域，从而让正确的对象被识别，我通过透明层传递触摸：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{
    unsigned char pixel[1] = {0};
    CGContextRef context = CGBitmapContextCreate(pixel, 
                                                 1, 1, 8, 1, NULL,
                                                 kCGImageAlphaOnly);
    UIGraphicsPushContext(context);
    [self.image drawAtPoint:CGPointMake(-point.x, -point.y)];
    UIGraphicsPopContext();
    CGContextRelease(context);
    CGFloat alpha = pixel[0]/255.0;
    BOOL transparent = alpha < 0.01;
    if(transparent){
        return NO;
    } else {
        return YES;
    }

} 
```

问题：当大约 3 或 4 个堆叠在屏幕上时，触摸开始出现明显的延迟。IE。顶层立即触发，但底层需要几毫秒。

有没有更快的方法可以通过我的 PNG 的透明区域传递触摸？

谢谢

# android - Android 加速度计最大值

> ID：12739143
> 
> 赞同：5
> 
> 时间：2012-10-05T03:39:33.770
> 
> 标签：android, android-sensors, android-hardware

所以我一直在寻找大约 3 个小时，我还没有想出一个好的答案/解决方案。

我的问题是：为什么我得到的最大加速度值只有大约 34 m/s^2 或大约 3.5 Gs (34/9.81)。

是因为硬件限制还是软件限制？如果它是硬件，我知道我对此无能为力（或者至少不容易）。如果是软件限制，那么我该如何消除该限制，有什么办法吗？像 API 什么的？

我会很感激任何帮助，谢谢。

*注意*：我使用的是 Galaxy S，如果有区别的话。我也看过这个问题，但这对我没有帮助：[What is android accelerometer min and max range](https://stackoverflow.com/questions/4691097/what-is-android-accelerometer-min-and-max-range)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:08:35.400

看看这个： [https](https://electronics.stackexchange.com/questions/11372/samsung-galaxy-s-accelerometer-details) ://electronics.stackexchange.com/questions/11372/samsung-galaxy-s-accelerometer-details 问题包括似乎是 Galaxy S 中使用的加速度计的数据表。显然有三个可能的范围 +/-2g、+/-4g 和 +/-8g。我不是电子专家，所以不会提供比这更多的解释。

根据 developer.android.com，加速度计读数仅与硬件相关： [developer.android.com/guide/topics/sensors/sensors_motion.html](http://developer.android.com/guide/topics/sensors/sensors_motion.html) 因此，您可能更有机会获得有关电气方面的专家答案上面已经引用了工程 stackexchange 论坛：[electronics.stackexchange.com](http://electronics.stackexchange.com)。

祝你的项目好运！

编辑：关于原始问题的评论：我明白了，因为它在您引用的[页面上说 -](https://groups.google.com/forum/#!msg/android-kernel/2RYrDvgJDsM/--uF40t3rU0J)

> “我的理解是，Android 加速度计的默认设置是在 +-2g 的预定义范围内运行。如何通过公共 API 以编程方式更改此范围？有一个 getMaximumRange() 方法，但没有相应的 setMaximumRange() 方法。 "

您想知道是否有基于软件的方法来更改预选范围。同样，我认为 Android API 文档会提到这一点。尝试在[electronics.stackexchange.com](http://electronics.stackexchange.com)上询问“动态可选范围”是什么，以及它们是否由物理硬件开关（或类似的东西）设置，或者它们是否可以通过编程方式更改。

第二次编辑：我更彻底地阅读了我向您推荐的页面，并注意到原始提问者检查了 Google API 并得出结论，无法通过它更改范围：

API 不允许更改它们。我认为我可以在api源中找到这些数据，但这并不简单。现在我试试。– MarcoBiagi 2011 年 3 月 13 日在 10:36

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T15:10:11.683

鉴于您从 Galaxy S 读取的最大加速度幅度为 3.5 g，您的 Galaxy S 加速度计似乎设置为每轴加速度计范围为 +/- 2g（即 sqrt(2.0*2.0 + 2.0*2.0 + 2.0 *2.0) = 3.5)。作为参考，以下是 Galaxy S、Moto G 和 Nexus Android 设备的每轴加速度计范围：

Galaxy S：+/- 2g
Moto G：+/- 2g
Nexus 1：+/- 2g
Nexus S：+/- 2g
Nexus 4：+/- 4g
Nexus 5：+/- 2g

每轴加速度计范围通常不会在手机的规格表中给出。因此，如果其他读者碰巧知道他们手机加速度计的最大范围，请随时将其添加到此列表中。

不幸的是，加速度计 Sensor.getMaximumRange() API 不一致：在大多数设备上返回“零到峰值”值，但在某些设备（例如，Moto G）上返回“峰值到峰值”，如[跟踪的 Android OS 问题](http://code.google.com/p/android/issues/detail?id=63828)中所述。了解特定设备是否将 Sensor.getMaximumRange() 返回为“零到峰值”或“峰值到峰值”的一种方法是运行免费的传感器数据绘图应用程序（如[ftNote）](https://play.google.com/store/apps/details?id=com.eduneer.ftnote)并大力摇晃设备以查看加速度计读数夹在哪里绘制的传感器值。

# javascript - 关于 liferay webform 中的 javascript 验证

> ID：12739144
> 
> 赞同：0
> 
> 时间：2012-10-05T03:39:46.817
> 
> 标签：javascript, validation, webforms, liferay, liferay-6

我使用liferay 6.1 ga1。在我的网络表单中，我想验证输入电子邮件，所以我尝试了：

```
if(typeof currentFieldValue.match('^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})')[0] !== 'undefined'){return true;}else{return false}; 
```

它不起作用，但这不是我的麻烦，它返回 javascript 错误，我无法更改我的 javascript 验证代码-> 大麻烦要修复 javascript 验证代码，我必须：

```
- Stop server
- Change validation.script.enabled to false 
- Start server
- Change javascript validate code
- Stop server
- Change validation.script.enabled to true
- Start server
- Check and Hope my code will work ( but it usually will not ) 
```

:(( 有没有更快更好的方法，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:25:46.230

这里有两件事。

1.  请发布您的 javascript 错误并尝试找出它出现的原因？

2.  如果这个过程太麻烦，您可以简单地删除 portlet 并再次添加一个新的，然后尝试修复它。

所有 webform 设置和配置都存储为 portlet 首选项。Portlet 首选项临时存储在数据库中，如果您从页面中删除该 Portlet，首选项将随之删除。

# html - HTML5 Geolocation 不请求许可并且在三星 S3 上不起作用

> ID：12739146
> 
> 赞同：5
> 
> 时间：2012-10-05T03:40:10.493
> 
> 标签：html, geolocation, w3c-geolocation

使用标准的 HTML5 地理位置代码，我可以在桌面浏览器（Chrome、Firefox）上访问地理位置，但不能在我的三星 Galaxy S3（默认浏览器、Chrome）上访问。在默认浏览器中，什么都没有发生。在 Chrome 中，黄色权限表单会在底部弹出，但随后弹出太快而无法按下任何内容。我已在“设置”中检查了“位置”是否已启用。我正在考虑寻找一个 PHP 解决方案作为 JavaScript/HTML5 解决方案像这样崩溃的情况的备份，但希望 JavaScript 解决方案更健壮。

有没有人遇到过这个并修复它？有任何想法吗？

作为参考，我所指的“标准”HTML5 地理位置代码是这样的（示例代码来自：[HTML5 中的基本地理位置](http://aiminstitute.org/blog/2010/07/basic-geolocation-in-html5/)）：

```
<script type="text/javascript">
      if( navigator.geolocation )
      {
           // Call getCurrentPosition with success and failure callbacks
           navigator.geolocation.getCurrentPosition( success, fail );
      }
      else
      {
           alert("Sorry, your browser does not support geolocation services.");
      }

      function success(position)
      {
            // GeoPosition Object
           alert("Your coordinates are " + position.latitude + ", " + position.longitude);
      }
      function fail()
      {
           // Could not obtain location
      }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:25:59.057

奇怪的。我做了 3 件事，现在它可以在两种手机浏览器中使用（默认和 chrome）

1.  我把主要代码放在一个被调用的函数中`<body onload="">`
2.  我重启了手机
3.  我关闭了省电模式

我怀疑重新启动对它的影响最大，因为我看到权限在 chrome 屏幕上闪现。

# typescript - 具有可变参数计数的函数的 TypeScript 类型签名

> ID：12739149
> 
> 赞同：138
> 
> 时间：2012-10-05T03:40:37.587
> 
> 标签：typescript

我在使用接受可变数量参数的函数成员定义接口时遇到问题。以下面的对象字面量为例：

```
var obj = {
    func: () => {
        for(var i = 0; i < arguments.length; i++) {
            console.log(arguments[i]);
        }
    }
}; 
```

我希望能够定义一个接口，例如：

```
interface IExample {
    func: ( ??? ) => void;
} 
```

这样下面的代码就可以无误地编译：

```
var test = (o: IExample) {
    o.func("a");
    o.func("a", "b");
    o.func("a", "b", "c");
    ...
} 
```

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-10-05T03:53:12.203

TypeScript 使用 ECMAScript 6 传播提案，

> [http://wiki.ecmascript.org/doku.php?id=harmony:spread](http://wiki.ecmascript.org/doku.php?id=harmony:spread)

但是添加了类型注释，所以看起来像，

```
interface Example {
    func(...args: any[]): void;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-04T12:49:53.953

只是为了添加查克的答案，您不需要这样定义接口。您可以`...`直接在方法中执行：

```
class Header { constructor(public name: string, public value: string) {} }

getHeaders(...additionalHeaders: Header[]): HttpHeaders {
    let headers = new HttpHeaders();
    headers.append('Content-Type', 'application/json')

    if (additionalHeaders && additionalHeaders.length)
        for (var header of additionalHeaders)
            headers.append(header.name, header.value);

    return headers;
} 
```

然后你可以调用它：

```
headers: this.getHeaders(new Header('X-Auth-Token', this.getToken())) 
```

或者

```
headers: this.getHeaders(new Header('X-Auth-Token', this.getToken()), new Header('Something', "Else")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-21T14:34:31.277

如果不使用 ...args[] 参数，Typescript 仍会在 Javascript 中创建一个数组并将参数复制到其中。

为了避免这种不必要的情况，您可以为函数和函数制作原型，因此：-

```
function format_n(str: string, ... $n: any[]): string;
function format_n(str: string): string {
    return str.replace(/%(\d+)/g, (_, n) => format_n.arguments[n]);
} 
```

# c++ - 如何在地图中找到上一个和下一个键/值？

> ID：12739150
> 
> 赞同：3
> 
> 时间：2012-10-05T03:40:39.127
> 
> 标签：c++, stl, map, vector, stdmap

我有一张包含以下数据的地图：

```
id    prev abundance  thing
1573  -1      0       book
1864  1573    39      beds
2075  1864    41      tray
1760  2075    46      cups 
```

地图是：

```
map<int id, Abund*> oldMap;
struct Abund
{
int prev;
int abundance;
string thing;
} 
```

我现在需要创建一个应该如下所示的新地图：

```
 id2    prev2 prevAbun next2  nextAbun  thing2
 1573     -1            1864   39        book
 1864   1573     0      2075   41        beds
 2075   1864     39     1760   46        tray
 1760   2075     41                      cups 
```

地图 1 中的上一行和下一行应该成为 newMap 中的列 到目前为止，我已经创建了一个新地图和新结构：

```
struct NewAbund
{
vector<int> prev2;
vector<int> prevAbun;
vector<int> next2;
vector<int> nextAbun;
string thing2;
}
map<int id2, NewAbund*> newMap; 
```

现在我不知道从 oldMap 获取前一行并将其作为值放入 newMap 的逻辑应该如何工作。提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:32:58.387

如果您只是遍历地图，您将获得指向按键顺序配对的迭代器。因此，如果您在迭代期间记得上一个迭代器，您将有两个连续的迭代器，您可以从中填充新向量。

另一方面，由于您始终可以在有序映射中找到下一个和上一个键（尽管确实需要 O(log n) 时间），因此可能没有必要费尽心思对数据进行非规范化。如果您使用的是 c++11，您会发现 std::next 和 std::prev 这将使执行这些操作变得非常容易。（如果不是——为什么不呢？——你可以很容易地用 std::advance 来定义它们。）

# javascript - 带有数组和整数的 JavaScript TypeError

> ID：12739153
> 
> 赞同：1
> 
> 时间：2012-10-05T03:40:50.790
> 
> 标签：javascript, arrays, object, random, undefined

所以，我在 JavaScript 中遇到了数组的这个问题。我初始化了一些变量，如下所示：

```
var world = new Array;
var monsters = new Array;
var items = new Array;
var x = 0;
var y = 0; 
```

并尝试在其上运行此代码：

```
 while (y <= 49) { //generate world
                world[x][y] = parseInt(Math.floor(Math.random()*2)); //0 = flatland, 1 = desert, 2 = mountain, 3 = swamp
                x++;
                if (x >= 49) {
                    x = 0;
                    y++;
                }
            }
            x = 0;
            y = 0; 
```

但是我在**Math.random()**行上遇到了这个错误： **“TypeError: can't convert undefined to object” 。**我已经尝试了我能想到的一切，但它仍然会引发该错误。任何帮助将不胜感激！

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:48:24.687

`world[x][y]`未初始化。那就是问题所在。您需要在`while`语句下方进行初始化

```
while (y <= 49) {
    world[x] = new Array(); //add this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:53:02.593

`world[x]`不是数组，因此在尝试为 赋值时会出错`world[x][y]`，填充数组的方法对我来说似乎很奇怪，我会这样做

```
world = [];
for (x = 0; x <= 49; x++) { //generate world
    world[x] = [];
    for (y = 0; y <= 49; y++){
        world[x][y] = parseInt(Math.floor(Math.random()*2)); //0 = flatland, 1 = desert, 2 = mountain, 3 = swamp
    }
}
x = 0;
y = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:45:06.010

你错过了`()`. World 必须定义为二维数组`world[x] = new Array();`使用 [] 表示法更方便。**

# javascript - 鼠标滚动 - 捕捉到 div

> ID：12739160
> 
> 赞同：3
> 
> 时间：2012-10-05T03:41:39.963
> 
> 标签：javascript, jquery

我目前有一个页面形式为

```
<div id="content">
    <div id="content-page-1">
    <!--content-->
    </div>
    <div id="content-page-2">
    <!--content-->
    </div>
</div> 
```

有什么办法可以滚动

1.  粘贴/捕捉到 div（这些是显示区域的 100% 高度和 100% 宽度）
2.  检测到滚动时自动滚动到下一个 div

用jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:50:29.920

如果您在节点上监听滚动事件，您可以轻松地使用像[scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)这样的插件来平滑滚动到“下一个 div”或上一个 div（无论您如何定义）。

```
var prevScrollTop = 0;
var $scrollDiv    = $('div#content');
var $currentDiv   = $scrollDiv.children('div:first-child');
$scrollDiv.scroll(function(eventObj)
{
    var curScrollTop = $scrollDiv.scrollTop();
    if (prevScrollTop < curScrollTop)
    {
    // Scrolling down:
        $currentDiv = $currentDiv.next().scrollTo();
    }
    else if (prevScrollTop > curScrollTop)
    {
    // Scrolling up:
        $currentDiv = $currentDiv.prev().scrollTo(); 
    }
    prevScrollTop = curScrollTop;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:14:55.680

我尝试了不同的插件，但它们都在 mvc 中触发多个事件时遇到了问题，所以我使用 underscore.js 提出了这个解决方案

```
<script  type="text/javascript">
    $(document).ready(function () {
            var isc = _.throttle(function (event) {
                if ($(window).scrollTop() + $(window).height() > $(document).height() - 200) {
                    if (event.handled !== true) {
                        $.post('@path', function (html) {
                            $('#user-feed').append(html);
                        });
                    }
                }
            }, 300);

            $(window).scroll(isc);
    });

</script> 
```

# java - 如何从远离应用程序根目录的非上下文类访问 xml 描述的资源？

> ID：12739169
> 
> 赞同：0
> 
> 时间：2012-10-05T03:43:08.507
> 
> 标签：java, android, resources

需要从非上下文类访问资源，而无需通过深层调用堆栈传递上下文。

我已经阅读了关于这个主题的所有答案，但是这个类不是从创建的`Activity`，而且离它真的很远。通过所有调用发送上下文的方式不是一种变体，因为它需要通过许多类和方法来发送它，而这些类和方法不需要了解有关**context**的任何信息。

我是否有机会在不通过非常深的调用堆栈传递**上下文的情况下访问****资源？**需要什么静态方法吗？如果无法以简单自然的方式从任何应用程序的地方获取应用程序资源，那将是非常惊人的。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:01:21.410

您可以扩展 Android 的 Application 类并将其实现为单例，这将使其全局可用。

```
public class SampleApplication extends Application {
    private static SampleApplication INSTANCE;

    @Override
    public void onCreate() {
        super.onCreate();
        INSTANCE = this;
    }

    public static SampleApplication instance() {
        return INSTANCE;
    }
} 
```

如果您这样做，则需要在 AndroidManifest.xml 中进行一些工作。这将告诉框架加载您的应用程序而不是默认应用程序。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.yourdomain"
  android:versionCode="1"
  android:versionName="1.0">

<application 
    android:icon="@drawable/icon" 
    android:label="@string/app_name"
    android:name=".SampleApplication">
    <activity android:name=".SampleActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这将很容易地为您提供一种在必要时获取应用程序上下文的机制。您甚至可以实现一个返回资源的静态方法，但以下应该可以工作。

```
SampleApplication.instance().getResources(); 
```

不知道你是否试过这个，但它应该工作。我没有测试这段代码，所以可能需要一些调整，但你应该明白了。**

# javascript - Javascript 纪元时间（以天为单位）

> ID：12739171
> 
> 赞同：10
> 
> 时间：2012-10-05T03:43:12.913
> 
> 标签：javascript, epoch, days

我需要以天为单位的纪元时间。我看过有关如何将其翻译至今的帖子，但几天内都没有。我对纪元时间很不好......我怎么能得到这个？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-05T03:50:13.763

> 我需要以天为单位的纪元时间

我会解释你想要自纪元以来的天数。纪元本身是第 0 天（或第 1 天的开始，但是您想查看它）。

JavaScript Date 对象的核心是自 1970-01-01T00:00:00Z 以来的毫秒数。因此，要获取从那时到现在的天数，您只需获取当前时间值并将其除以一天中的毫秒数：

```
var now = new Date();
var fullDaysSinceEpoch = Math.floor(now/8.64e7); 
```

对于 2012-10-05，您应该得到 15618。不确定它是否允许闰秒等，但如果系统时钟准确，它应该足够接近（几秒钟内）。

只有在读取 Date 对象（例如[`getHours()`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.18)和[`toString()`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.2)）的值时，才会应用时区偏移来给出本地时间。

# c# - 如何使测试中的变量在块外部可用？

> ID：12739172
> 
> 赞同：1
> 
> 时间：2012-10-05T03:43:14.280
> 
> 标签：c#

我有以下代码：

```
if (question.DetailsJSON != null) {
   var details = JSON.FromJSONString<List<Question.Detail>>(question.DetailsJSON);
} 
```

这可行，但在块之外，详细信息不可用。

在没有预先声明 details 变量的情况下，有没有一种方法可以让我在 if 测试中执行此操作，并且在 if 之外仍然有可用的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:45:51.360

您可以结合声明和初始化，并使用条件运算符来避免在`if`语句中引入新范围：

```
var details = question.DetailsJSON != null
?   JSON.FromJSONString<List<Question.Detail>>(question.DetailsJSON)
:   null; 
```

# c - 如何在C中的字符串中插入多个字符

> ID：12739176
> 
> 赞同：3
> 
> 时间：2012-10-05T03:44:25.293
> 
> 标签：c, string

我希望在 C 中的字符串中插入一些字符：

例子：`char string[100] = "20120910T090000";`

我想让它像`"2012-09-10-T-0900-00"`

到目前为止我的代码：

```
void append(char subject[],char insert[], int pos) {
    char buf[100]; 

    strncpy(buf, subject, pos); 

    int len = strlen(buf);

    strcpy(buf+len, insert); 

    len += strlen(insert);  

    strcpy(buf+len, subject+pos); 
    strcpy(subject, buf);   
} 
```

当我第一次调用它时，我得到：`2012-0910T090000`

但是，当我第二次调用它时，我得到：`2012-0910T090000-10T090000`

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:27:46.003

这是一些工作代码，它给了我输出：

```
String: <<20120910T090000>>
String: <<2012-0910T090000>>
String: <<2012-09-10T090000>>
String: <<2012-09-10-T090000>>
String: <<2012-09-10-T-090000>>
String: <<2012-09-10-T-0900-00>> 
```

使用`memmove()`它是因为可以保证复制的字符串重叠。

```
#include <assert.h>
#include <string.h>
#include <stdio.h>

static void insert(char *str, size_t len, char c, size_t pos)
{
    memmove(&str[pos+1], &str[pos], len - pos + 1);
    str[pos] = c;
}

int main(void)
{
    char string[25] = "20120910T090000";
    // I want to make it something like "2012-09-10-T-0900-00"
    char inschr[] = "-----";
    int  inspos[] = { 4, 7, 10, 12, 17 };
    enum { NUMCHR = sizeof(inschr) / sizeof(inschr[0]) };
    enum { NUMPOS = sizeof(inspos) / sizeof(inspos[0]) };
    assert(NUMCHR == NUMPOS + 1);
    size_t length = strlen(string);

    printf("String: <<%s>>\n", string);
    for (int i = 0; i < NUMPOS; i++)
    {
        insert(string, length, inschr[i], inspos[i]);
        length++;
        printf("String: <<%s>>\n", string);
    }
    return(0);
} 
```

当然，我假设 C99 支持`for`循环符号。还要注意，在经典 C 风格中，代码不采用目标字符串的大小，因此不能确保没有缓冲区溢出。添加参数并进行检查并不难；问题区域是如何指示函数失败。您可以对函数使用不同的接口，将任意长度的字符串插入任意位置；这并不难...

```
String: <<20120910T090000>>
String: <<2012-0910T090000>>
String: <<2012-09-10T090000>>
String: <<2012-09-10-T090000>>
String: <<2012-09-10-T-090000>>
String: <<2012-09-10-T-0900-00>>

#include <assert.h>
#include <string.h>
#include <stdio.h>

static int insert(char *str, size_t max, size_t len, char *ins, size_t pos)
{
    assert(str[len] == '\0');
    assert(len < max);
    size_t inslen = strlen(ins);
    if (len + inslen + 1 >= max)
        return -1;
    memmove(&str[pos+inslen], &str[pos], len - pos + inslen);
    memmove(&str[pos], ins, inslen);
    return len + inslen;
}

int main(void)
{
    char string[25] = "20120910T090000";
    // I want to make it something like "2012-09-10-T-0900-00"
    char *insstr[] = { "-", "-", "-", "-", "-" };
    int   inspos[] = {   4,   7,  10,  12,  17 };
    enum { NUMSTR = sizeof(insstr) / sizeof(insstr[0]) };
    enum { NUMPOS = sizeof(inspos) / sizeof(inspos[0]) };
    size_t length = strlen(string);
    assert(NUMSTR == NUMPOS);

    printf("String: <<%s>>\n", string);
    for (int i = 0; i < NUMPOS; i++)
    {
        int newlen = insert(string, sizeof(string), length, insstr[i], inspos[i]);
        if (newlen < 0)
        {
            printf("Oops! failed to insert [%s] into [%s]\n", insstr[i], string);
            break;
        }
        length = newlen;
        printf("String: <<%s>>\n", string);
    }
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:29:59.510

你可以这样做：

```
 char src[100] = "20120910T090000";
  char mask[] = "NNNN-NN-NN-C-NN-NN-NN";
  char dest[100] = {0};

  for (size_t s = 0,m = 0, d = 0; s < strlen(src) && m < strlen(mask); ++m)
  {
    switch (mask[m])
    {
    case 'N':
      assert(isdigit(src[s]));
      dest[d++] = src[s++];
      break;
    case 'C':
      assert(isalpha(src[s]));
      dest[d++] = src[s++];
      break;
    default:
      dest[d++] = mask[m];
      break;
    }
  } 
```

# java - 需要一种在 HashMap 中查找值的方法

> ID：12739180
> 
> 赞同：0
> 
> 时间：2012-10-05T03:45:02.500
> 
> 标签：java, hashmap

> **可能重复：**
> [如何对 Java 中的值对 Map<Key, Value> 进行排序？](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

我有一个 HashMap 如下：

```
 Key Value
  A    5
  B    3
  C    10
  D    4
  E    1
  F    11 
```

我需要找到价值最高的那个，你建议我怎么做？我应该对它们进行排序并获得第一个还是有其他更快的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:59:52.190

我不建议对搜索要求进行排序。正如@David Lam 所建议的，您可以执行如下搜索（迭代）以找到最高值的键。

```
 Set<String> keys = myMap.keySet();
    Iterator<String> keyIter = keys.iterator();
    String highestValueKey = null;
    while(keyIter.hasNext()){
         String key = keyIter.next();
         if(highestValueKey == null){
             highestValueKey = key;
         }else if(myMap.get(key).intValue() > myMap.get(highestValueKey).intValue()){
             highestValueKey = key;
         }
    } 
```

最后，`highestValueKey`将引用最高值元素的键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T04:02:46.727

`SortedMap`这通过使用 a并传入 a`Comparator`值更容易解决：

```
final Map<String, Integer> map = new HashMap<String, Integer>();
map.put("A", 5);
map.put("B", 3);
map.put("C", 10);
map.put("D", 4);
map.put("E", 1);
map.put("F", 11);
map.put("G", 11);
map.put("H", 10);

TreeMap<String, Integer> sorted = new TreeMap<String, Integer>(new Comparator<String>() {
  // Note: this comparator imposes orderings that are inconsistent with equals.
  @Override
  public int compare(String a, String b) {
    if (map.get(a) >= map.get(b)) {
      return -1;
    } else {
      return 1;
    } // returning 0 would merge keys
  }
});
sorted.putAll(map);

Entry<String, Integer> first = sorted.firstEntry();
System.out.println("Highest value: " + first.getValue() + is for key: " + first.getKey());

// If duplicate keys are never a concern, you can stop here.  Otherwise, one may 
// continue below to find all keys that may be mapped to an equal highest value:
List<String> others = new LinkedList<String>();
for (Entry<String, Integer> entries : sorted.entrySet()) {
  if (entries.getValue().equals(first.getValue())) {
    others.add(entries.getKey());
  } else {
    break;
  }
}

System.out.println("All keys mapped to this highest value: " + others); 
```

打印出来：

```
Highest value: 11 is for key: G
All keys mapped to this highest value: [G, F] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T03:48:10.877

只需遍历键并跟踪最高的 O(n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T03:51:55.327

如果你需要经常做“找最大值”的操作，我建议你使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。

[否则，如果您将值插入 HashMap 并对其进行完全控制，则在将值插入HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)时跟踪最大值。

编辑：您需要以任何一种方式使用 HashMap，如此处[所示](https://stackoverflow.com/a/1283722/548634)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-05T03:55:06.317

或者您可以使用冒泡排序找到最高值

# javascript - 使用带有 twitter bootstrap scrollspy 的模态覆盖 - 不正确的激活

> ID：12739184
> 
> 赞同：3
> 
> 时间：2012-10-05T03:45:26.727
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我有一个基于 twitter bootstrap 的导航菜单栏，它使用 scrollspy 来进行高亮显示。

这通过匹配链接中# 之后的值来工作（例如`<a href="#foo">`，当`<div id="foo">`滚动到视图中时）。非常基本，这里是文档：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

当我在被监视的元素中引入指向引导模式对话框的链接时，我的问题就出现了。想象我有：

```
<ul class="nav">
  <li><a href="#info">a link</a></li>
  <li><a href="#demo" role="button" data-toggle="modal">modal</a></li>
  <li><a href="#products">a different link</a></li>
</ul>
<p> .. my page .. </p>
<div id="info"><a name="info"></a>info on my product</div>
<div id="products"><a name="products"></a>a list of my products</div>
<div class="modal hide fade" id="demo" tabindex="-1" role="dialog">
  <div class="modal-header">my header</div>
  <div class="modal-body">some content</div>
  <div class="modal-footer"><button>close</button></div>
</div>
<p> .. more page </p> 
```

代表我的模态叠加层的 div 也使用 #id-of-target 格式作为其 href，但由于它包含在导航中（当然），因此当（隐藏的）div 处于视图中时，scrollspy 也会突出显示。根据页面上模式代码的位置，这会混淆菜单系统的突出显示。

我可以看到应该将scrollspy修改为仅链接到*可见*的项目（因此当“演示”滚动到视图中时不会激活）但无法弄清楚如何修改插件以仅在元素可见时触发，或者以其他方式覆盖事件。

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:34:58.083

*有趣的是，有时输入一个问题会让你以正确的方式思考来解决它，而仅仅考虑它却不会。*

为了完成这项工作，我修改了 bootstrap 的 scrollspy 组件，以便它测试目标是否隐藏并退出激活例程（也不会引发激活事件，因为它不是活动的）

在这里：对我来说大约是第 1432 行（+if ..

```
, activate: function (target) {
    var active
      , selector

     if (target.is(":hidden")) return 

    this.activeTarget = target 
```

# javascript - WebRTC 和 Websockets。有没有区别

> ID：12739185
> 
> 赞同：52
> 
> 时间：2012-10-05T03:45:36.913
> 
> 标签：javascript, html, websocket, socket.io, webrtc

我假设 WebRTC 是一个解码/编码音频和视频的 API，尽管服务器和客户端之间的通信是通过 Web 套接字或其他网络协议完成的？我有点困惑。WebRTC 有自己的通信协议吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-05T03:57:48.830

WebRTC 有两个方面。

1.  `getUserMedia`允许应用访问摄像头和麦克风硬件的JavaScript API ( )。您可以使用此访问权限在本地简单地显示流（可能[应用效果](http://neave.com/webcam/html5/)），或通过网络发送流。您可以将数据发送到您的服务器，或者您可以使用...
2.  `PeerConnection`，一种允许浏览器建立**直接对等**套接字连接的 API。您可以直接与其他人的浏览器建立连接并直接交换数据。这对于像视频这样的高带宽数据非常有用，您不希望您的服务器必须处理大量数据的中继。

查看[演示](http://www.webrtc.org/demo)以了解 WebRTC 的两个部分的实际运行情况。

简而言之：

*   WebSockets 允许浏览器和 Web 服务器之间的全双工通信。
*   WebRTC`PeerConnection`允许两个浏览器之间的全双工通信。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-05T08:01:21.810

WebRTC 使用 RTP（基于 UDP 的协议）进行媒体传输，但需要带外信令通道来设置通信。信号通道的一种选择是 WebSocket。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T14:45:16.320

除了`peerConnection`你还可以查看 WebRTC 数据通道草案：[https](https://datatracker.ietf.org/doc/html/draft-jesup-rtcweb-data-protocol-00) ://datatracker.ietf.org/doc/html/draft-jesup-rtcweb-data-protocol-00 ，它基本上是双向 udp。这可能是 WebSockets 的一个非常有价值的替代方案，因为它没有 tcp 连接的“负面”方面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-19T07:43:42.487

不，信令不是由 WebRTC 定义的。

这是 IETF 的一篇文章，很好地解释了为什么它不是： [http ://www.ietf.org/mail-archive/web/rtcweb/current/msg01143.html](http://www.ietf.org/mail-archive/web/rtcweb/current/msg01143.html)

这意味着您可以自由选择交换网络信息的方式。即你可以使用 websockets、HTTP 甚至电子邮件，但这会有点困难 :)

# java - 简单的 Java 数学小程序

> ID：12739186
> 
> 赞同：0
> 
> 时间：2012-10-05T03:45:42.930
> 
> 标签：java, applet

如何创建可以显示作为参数提交的数字的平方根的应用程序？到目前为止，我有：

```
import java.awt.*;

public class RootApplet extends javax.swing.JApplet {
int number; 

public void init() {
number = 225;
}

public void paint(Graphics screen) {
Graphics2D screen2D = (Graphics2D) screen; 
screen2D.drawString("The square root of " + arguments[0] +

" is"
Math.sqrt(number));
}
} 
```

但是根据运行时错误，我显然遗漏了一些东西。`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:55:47.703

你的绘画方法不正确。用下面的替换它。`drawString`接受三个参数`String`, `x pos`,`y pos`

```
@Override
public void paint(Graphics screen) {
    Graphics2D screen2D = (Graphics2D) screen;
    screen2D.drawString("The square root of "+number+" - "+(int) Math
            .sqrt(number),10,10);
} 
```

# mysql - sphinx会和mysql数据源占用相同的内存空间吗？

> ID：12739190
> 
> 赞同：0
> 
> 时间：2012-10-05T03:46:19.837
> 
> 标签：mysql, database, indexing, sphinx

目前正在索引我的 135GB 数据的 mysql 数据库。我担心索引后它是否会使数据翻倍。我有两个需要索引的主表。一个是大约 600 万行，另一个是 1000 万行。数据涉及文本丢失。

感谢您的任何评论...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:19:58.520

没有 mysql 和 sphinx 不共享内存。

Sphinx 获取数据的副本，以创建索引。该索引将使用磁盘空间和内存。

就像在 mysql 中一样，您将使用实际数据的存储空间和索引的存储空间。（检查显示表状态）

Sphinx 维护一个类似于此的索引（只是在 mysql 外部进行）

一般来说，索引通常小于原始文档，因为 sphinx 不存储原始文本只是建立一个倒排索引。这种倒排索引非常适合以紧凑的形式存储。

您可以（在一定程度上）配置多少 sphinx 存储在内存中，如果内存不足，可以使 sphinx 在 RAM 中保留很少，大部分数据在磁盘上。

# java - jexcel - 获取单元格或行的页码

> ID：12739191
> 
> 赞同：0
> 
> 时间：2012-10-05T03:46:24.057
> 
> 标签：java, excel, xls, jxl

我必须实现一个导出 excel 功能。导出的 excel 文件必须有一行来计算每页末尾的总和（该页中的行总和）。

给定一个单元格或行，任何人都知道如何获取该单元格或行所在的页码吗？

我的意思是工作表中的页面。例如，您在工作表中有 10 页，以分页符分隔。从随机单元格或行 (1 -> 10) 中获取页码。

我现在这样做的唯一方法是获取页面大小（纸张大小）并根据每一行的大小进行计算以确定一行是否在特定页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T11:23:39.037

试试这个：

```
 sheet.getSettings().getPrintArea().getBottomRight(); 
```

您将获得位于页面右下角的单元格。只需调用 getRow() 或 getColumn() 即可获得 int。

对于测试，您还可以设置它以获得更快的预览：

```
 sheet.getSettings().setPrintGridLines(true); 
```

# iphone - UITableView 滚动虽然 numberOfRows 为 0

> ID：12739194
> 
> 赞同：0
> 
> 时间：2012-10-05T03:47:15.633
> 
> 标签：iphone, objective-c, ipad, uitableview

我很难理解这一点。我有一个 UITableView，它的 frameHeight 设置为 200。虽然我将 numberOfRows 设置为 0，但这个 UITableView 仍然滚动，知道为什么吗？我的理解是，它只会在 contentView 高度大于 frameHeight 的情况下滚动，对吗？但是在numberOfRows为0的情况下，contentView应该是0吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:08:48.043

**第一个解决方案**使用 UITableViewStyleGrouped 样式

因为默认情况下它设置为 UITableViewStylePlain ，它在显示填充单元格后也显示空单元格。

**第二种间接方式**

```
if (table.contentSize.height < table.frame.size.height) {
   table.scrollEnabled = NO;
 }
else {
   table.scrollEnabled = YES;
 } 
```

您可以在对表调用 reloadData 后运行此代码，它会计算正确的大小并且似乎可以工作。

**编辑 1**

另一种方法是禁用 Bounce -> Bounces/ Bounce Vertically

希望这能解决你的问题

# php - 在 WordPress 函数文件中包含 JS（使用 PHP）的最佳实践

> ID：12739197
> 
> 赞同：4
> 
> 时间：2012-10-05T03:48:07.540
> 
> 标签：php, javascript, jquery, wordpress, wordpress-theming

我正在构建一个自定义 WordPress 主题，并有一个关于 WordPress 和 Functions.php 的快速问题

`jQuery`我的自定义主题管理面板的一部分运行了 500 行。该`jQuery`代码位于我的`functions.php`文件中，在显示自定义管理菜单页面时调用。

理想情况下，我想将 JavaScript 移出`functions.php`文件并使用 wp_register_script + wp_enqueue_script，但我也有一些 php 代码与脚本混合。见下文：

```
//Function that Provides Options within the Menu Page
function quz_custom_theme_options(){
  global $quz_default_colors, $quz_default_fonts;

    ?>

   <style type="text/css">';

    <?php   include('admin-style.php'); ?>

   </style>';

<script type="text/javascript">
function asf_toggle_box(element)
{
  if (jQuery(element).next('.expandable').is(':visible') )
  {
    jQuery(element).next('.expandable').fadeOut('slow', function(){
      jQuery(element).val('+ Settings');
      jQuery(element).next('.expandable').find('.indicator').val('');  
    });
  } else {
    jQuery(element).next('.expandable').fadeIn('slow', function(){
      jQuery(element).val('- Settings');
      jQuery(element).next('.expandable').find('.indicator').val('visible');  
    });
  }
} 
```

js内部的PHP示例

```
function quz_reset_colors(t)
  {
    var theme_name = jQuery(t).attr('id').substr(6);
    var color_fields = jQuery(t).parent().find('div.color_admin_area').find('.color-input-wrap > input[type="text"]');
    // jQuery(color_fields).css('border', '1px solid red');
    // console.log(color_fields);
    var colors = new Array();
    <?php
    foreach ($quz_default_colors as $key => $value)
    {
      echo 'var ary = new Array(\'' . implode('\',\'', $value) . '\');' . "\r\n";
      echo 'colors[\'' . $key . '\'] = ary;' . "\r\n";
    }
    ?>
    jQuery(color_fields).each(function(index, elem){
      jQuery(elem).val(colors[theme_name][index]);    
    }); 
```

处理这个问题的最佳方法是什么？我是否应该将所有**JS**放在一个单独的 php 文件中并使用`include('my_script.php');`就像我在上面的语句中对**CSS所做的那样？**

我有多种方法可以完成这项工作，但我想以最好的方式做到这一点。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:07:33.530

[我在我的Easy Retweet WordPress 插件](http://sudarmuthu.com/wordpress/easy-retweet)中做了一个小技巧。

```
// Enqueue the script
add_action('template_redirect', 'add_script');

function add_script() {
    wp_enqueue_script('retweet', get_option('home') . '/?retweetjs');
}

add_action('init', 'deliver_js');

function deliver_js() {
    if ( array_key_exists('retweetjs', $_GET) ) {

        header('Content-Type: text/javascript');
        print_retweet_js($options);

        // die after printing js
        die();
    }
}

function print_retweet_js($options) {
     include_once('path/to/your/js/script.php');
} 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:20:47.920

```
function theme_script() {
?>
    < script type="text / javascript" >
      here is your script
    < /script >
<?php
 wp_enqueue_script( 'theme_script_id', get_bloginfo('template_directory').'/js/theme_script.js', array( 'jquery' ) );
}
 add_action( 'wp_print_scripts', 'theme_script' ); 
```

# makefile - 用于指定目录下的多个文件的括号在 Makefile 中不起作用

> ID：12739202
> 
> 赞同：1
> 
> 时间：2012-10-05T03:48:38.503
> 
> 标签：makefile, brackets

我在终端上试过这个 `g++ hello_world.cc -Iinclude /some/path/{file1,file2}.a`，效果很好。但是，我将此行放入**Makefile**，它说**file /some/path/{file1,file2}.a not found**。似乎括号在 Makefile 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:08:39.847

目前尚不清楚您的问题是什么，但请尝试添加以下行：

```
SHELL=/bin/bash 
```

# android - xml用于android中的多个屏幕

> ID：12739203
> 
> 赞同：2
> 
> 时间：2012-10-05T03:48:50.233
> 
> 标签：android

我正在开发 2.2 版本的 android，xml 是根据这个版本设计的 模拟器规格：2.2 版，内置：HVGA，内存：1024

现在我需要将此应用程序转换为 4.0 版本的三星 Galaxy S3 但屏幕非常拉长，看起来不太好

如果有任何帮助，请提前感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T04:39:07.830

您必须为您的应用程序创建多个资源。Android 有 4 种分辨率（ldpi、mdpi、hdpi 和 xhdpi）和 4 种通用屏幕尺寸（小、中、大和特大）。因此，您必须制作 4 种布局（如果您不打算支持平板电脑，则需要 3 种布局，因为平板电脑属于超大类别）以支持屏幕尺寸。

这是一个一般指南：

将小、中、大和特大的布局放在 res/ 文件夹中，如下所示：

```
res/layout/sample_layout.xml             // default layout
res/layout-small/sample_layout.xml       // layout for small screen size
res/layout-large/sample_layout.xml       // layout for large screen size
res/layout-xlarge/sample_layout.xml      // layout for extra large screen size 
```

你也可以使用

`res/layout-land/sample_layout.xml`适用于所有屏幕尺寸的横向，或者您可以将特定屏幕尺寸的横向布局定位为`res/layout-medium-land/sample_layout.xml`

请注意，所有布局都具有相同的名称。

准备好布局后，还需要注意图像分辨率

再次在您的 res/ 文件夹中添加如下图像：

```
res/drawable-ldpi/sample_image.png         // low density
res/drawable-mdpi/sample_image.png         // medium density
res/drawable-hdpi/sample_image.png         // high density
res/drawable-xhdpi/sample_image.png        // extra high density 
```

再一次，所有图像都具有相同的名称。

设计图像的一般准则是：

```
ldpi is 0.75x dimensions of mdpi
hdpi is 1.5x dimensions of mdpi
xhdpi is 2x dimensinons of mdpi 
```

通常，我为 320x480 屏幕设计 mdpi 图像，然后按照上述规则将尺寸相乘以获得其他分辨率的图像。

Android 将根据设备自动选择布局和图像的最佳组合。例如，对于高分辨率中等尺寸设备，将向用户显示布局中等和高密度的图像。

确保为所有这些组合创建模拟器并彻底测试您的应用程序。这是官方文档以获取更多信息：

[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:51:25.133

您必须维护您的 xml 文件

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

检查此[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)了解如何设计布局以支持多个屏幕

也可用于图像

```
 res/drawable-mdpi/my_icon.png        // bitmap for medium density
 res/drawable-hdpi/my_icon.png        // bitmap for high density
 res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

# c# - 时间：2019-05-10 标签：c#how to grep through ~300mb log file fast

> ID：12739204
> 
> 赞同：3
> 
> 时间：2012-10-05T03:49:22.433
> 
> 标签：c#, arrays, file, grep

我试图在 c# 中读取一个巨大的日志文件 - 大约 300mbs 的原始文本数据。我已经在大约 1mb 的较小文件上测试我的程序，它将所有日志消息存储到一个字符串 [] 数组中并使用包含进行搜索。

但是这太慢并且占用太多内存，我将永远无法处理 300mb 的日志文件。我需要一种 gr​​ep 文件的方法，它可以快速过滤它以找到有用的数据并打印与搜索相对应的日志信息行。

最大的问题是规模，我认为 300mb 将是我的最大值，但需要我的程序来处理它。我可以使用哪些函数、数据结构、搜索来以速度和效率很好地扩展来读取这么大的日志文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T04:16:46.153

[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)可能是您最好的选择，因为它为您提供`IEnumerable`文本文件的一行，并在您遍历`IEnumerable`. 然后，您可以使用任何方法来搜索您想要使用的行（`Regex`、`Contains`等）并对其进行处理。我下面的示例生成了一个线程来搜索该行并将其输出到控制台，但您几乎可以做任何事情。当然，TEST、TEST、TEST 对大文件看你的性能里程。我想如果下面生成的每个单独的线程花费太长时间，您可能会遇到线程限制。

```
IEnumerable<string> lines = File.ReadLines("myLargeFile.txt");
foreach (string line in lines) {
    string lineInt = line;
    (new Thread(() => {
        if (lineInt.Contains(keyword)) {
            Console.WriteLine(lineInt);
        }
    })).Start();
} 
```

**编辑**：通过我自己的测试，这显然更快：

```
foreach (string lineInt in File.ReadLines("myLargeFile.txt").Where(lineInt => lineInt.Contains(keyword))) {
    Console.WriteLine(lineInt);
} 
```

# android - 我想在 TextView 中显示表格字段 ExpNo

> ID：12739207
> 
> 赞同：0
> 
> 时间：2012-10-05T03:49:38.287
> 
> 标签：android, sqlite, android-cursor

我想显示`table field ExpNo`在`TextView,`请帮我用光标或你知道的方式写查询...

Sql Query 是这样的：（`Select Max(ExpNo) from table;` 如何在 android 中编写此查询）

请帮我...

我是这样写的：

```
public void dispExpNo()  
   {
    String[] exno = {"ExpNo"};  
    Cursor c = db.query("tb_expense",exno,null,null,null,null,null);                
    txtExpno.setText(""+c.getInt(0));
    c.close();          
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:10:59.683

如果你想这样，你可以使用 rawQuery：

```
Cursor c=db.rawQuery("select Max(ExpNo) from table", null);
txtExpno.setText(c.getString(c.getColumnIndex("ExpNo"))); 
```

或者您也可以像这样使用标准的 android 查询：

```
Cursor c=db.query("tb_expense",exno,"MAX(ExpNo)",null,null,null,null);
txtExpno.setText(c.getString(c.getColumnIndex("ExpNo"))); 
```

# sql-server - 如何在 SQL Server 中使用 RANK()

> ID：12739208
> 
> 赞同：77
> 
> 时间：2012-10-05T03:49:41.277
> 
> 标签：sql-server, tsql

我[`RANK()`](https://msdn.microsoft.com/en-us/library/ms176102.aspx)在 SQL Server 中使用时遇到问题。

这是我的代码：

```
SELECT contendernum,
       totals, 
       RANK() OVER (PARTITION BY ContenderNum ORDER BY totals ASC) AS xRank
FROM (
   SELECT ContenderNum,
          SUM(Criteria1+Criteria2+Criteria3+Criteria4) AS totals
   FROM Cat1GroupImpersonation
   GROUP BY ContenderNum
) AS a 
```

该查询的结果是：

```
contendernum    totals    xRank
          1       196        1
          2       181        1
          3       192        1
          4       181        1
          5       179        1 
```

我想要的结果是：

```
contendernum    totals    xRank
          1       196        1
          2       181        3
          3       192        2
          4       181        3
          5       179        4 
```

我想根据 对结果进行排名`totals`。如果有相同的值喜欢`181`，那么两个数字将有相同的`xRank`。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-05T03:52:15.973

改变：

```
RANK() OVER (PARTITION BY ContenderNum ORDER BY totals ASC) AS xRank 
```

至：

```
RANK() OVER (ORDER BY totals DESC) AS xRank 
```

* * *

看看这个例子：

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4964/0)

您可能还想看看[RANK (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms176102%28v=sql.100%29.aspx)和[DENSE_RANK (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173825%28v=sql.100%29.aspx)之间的区别：

> **排名**(Transact-SQL)
> 
> 如果两个或更多行并列排名，则每个并列的行都获得相同的排名。例如，如果两个顶级销售人员具有相同的 SalesYTD 值，则他们都排名第一。SalesYTD 次高的销售人员排名第三，因为有两行排名较高。因此，RANK 函数并不总是返回连续的整数。
> 
> **DENSE_RANK** (Transact-SQL)
> 
> 返回结果集分区内的行排名，排名中没有任何间隙。行的排名是相关行之前的不同排名数的加一。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-07-16T14:02:25.783

要回答您的问题标题“如何在 SQL Server 中使用 Rank()”，它是这样工作的：

我将以这组数据为例：

```
create table #tmp
(
  column1 varchar(3),
  column2 varchar(5),
  column3 datetime,
  column4 int
)

insert into #tmp values ('AAA', 'SKA', '2013-02-01 00:00:00', 10)
insert into #tmp values ('AAA', 'SKA', '2013-01-31 00:00:00', 15)
insert into #tmp values ('AAA', 'SKB', '2013-01-31 00:00:00', 20)
insert into #tmp values ('AAA', 'SKB', '2013-01-15 00:00:00', 5)
insert into #tmp values ('AAA', 'SKC', '2013-02-01 00:00:00', 25) 
```

您有一个基本上指定分组的分区。

在此示例中，如果您按 column2 进行分区，则 rank 函数将为 column2 值组创建排名。column2 = 'SKA' 的行与 column2 = 'SKB' 的行的排名不同，依此类推。

排名是这样决定的：每条记录的排名是其分区中位于它之前的排名数量的 1 加。仅当您选择的字段之一（分区字段除外）与之前的字段不同时，排名才会增加。如果所有选定的字段都相同，则排名将平局，并且都将被分配值一。

知道了这一点，如果我们只想从第二列的每个组中选择一个值，我们可以使用这个查询：

```
with cte as 
(
  select *, 
  rank() over (partition by column2 
             order by column3) rnk
  from t

) select * from cte where rnk = 1 order by column3; 
```

## 结果：

```
COLUMN1 | COLUMN2   | COLUMN3                           |COLUMN4 | RNK
------------------------------------------------------------------------------
AAA     | SKB   | January, 15 2013 00:00:00+0000    |5   | 1
AAA     | SKA   | January, 31 2013 00:00:00+0000    |15  | 1
AAA     | SKC   | February, 01 2013 00:00:00+0000   |25  | 1 
```

[SQL 演示](http://sqlfiddle.com/#!6/1a5a9/50/0)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-05T03:53:58.673

您必须使用 DENSE_RANK 而不是 RANK。唯一的区别是它不会留下空隙。您也不应该按竞争者编号进行分区，否则您会将每个竞争者排名在一个单独的组中，因此每个竞争者在其隔离组中排名第一！

```
SELECT contendernum,totals, DENSE_RANK() OVER (ORDER BY totals desc) AS xRank FROM
(
SELECT ContenderNum ,SUM(Criteria1+Criteria2+Criteria3+Criteria4) AS totals
FROM dbo.Cat1GroupImpersonation
 GROUP BY ContenderNum
) AS a
order by contendernum 
```

使用 StackOverflow 的提示，请发布 DDL 和示例数据，以便人们可以帮助您减少自己的时间！

```
create table Cat1GroupImpersonation (
contendernum int,
criteria1 int,
criteria2 int,
criteria3 int,
criteria4 int);

insert Cat1GroupImpersonation select
1,196,0,0,0 union all select
2,181,0,0,0 union all select
3,192,0,0,0 union all select
4,181,0,0,0 union all select
5,179,0,0,0; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-28T11:48:25.843

DENSE_RANK() 是一个没有间隔的等级，即它是“密集的”。

```
select Name,EmailId,salary,DENSE_RANK() over(order by salary asc) from [dbo].[Employees] 
```

RANK() - 它包含等级之间的差距。

```
select Name,EmailId,salary,RANK() over(order by salary asc) from [dbo].[Employees] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T09:17:24.207

```
SELECT contendernum,totals, RANK() OVER (ORDER BY totals ASC) AS xRank FROM
(
SELECT ContenderNum ,SUM(Criteria1+Criteria2+Criteria3+Criteria4) AS totals
FROM dbo.Cat1GroupImpersonation
 GROUP BY ContenderNum
) AS a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-20T11:52:39.677

您已经按 ContenderNum 分组，无需再按它进行分区。使用 Dense_rank() 并按总计 desc 排序。简而言之，

```
SELECT contendernum,totals, **DENSE_RANK()** 
OVER (ORDER BY totals **DESC**) 
AS xRank 
FROM
(
   SELECT ContenderNum ,SUM(Criteria1+Criteria2+Criteria3+Criteria4) AS totals
   FROM dbo.Cat1GroupImpersonation
   GROUP BY ContenderNum
) AS a 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-10T15:56:23.723

`RANK()`很好，但它为相等或相似的值分配相同的等级。如果你需要唯一的排名，那么 ROW_NUMBER() 可以解决这个问题

```
ROW_NUMBER() OVER (ORDER BY totals DESC) AS xRank 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-23T11:05:53.883

Select T.Tamil, T.English, T.Maths, T.Total, Dense_Rank()Over(Order by T.Total Desc) as Std_Rank From (select Tamil,English,Maths,(Tamil+English+Maths) as Total From学生）作为 T

[在此处输入图像描述](https://i.stack.imgur.com/ZZ0tU.png)

# python - 将 ASCII 输出转换为 UTF-8

> ID：12739209
> 
> 赞同：1
> 
> 时间：2012-10-05T03:49:49.280
> 
> 标签：python, json, csv, utf-8

我真的很接近拥有一个从纽约时报 API 获取 JSON，然后将其转换为 CSV 的脚本。但是，有时我会收到此错误：

> UnicodeEncodeError：“ascii”编解码器无法在位置 21 编码字符 u'\u201c'：序数不在范围内（128）

如果我将输出转换为 UTF-8，我想我可以避免这一切，但我不确定如何去做。这是我的python脚本：

```
import urllib2
import json
import csv

outfile_path='/NYTComments.csv'

writer = csv.writer(open(outfile_path, 'w'))

url = urllib2.Request('http://api.nytimes.com/svc/community/v2/comments/recent?api-key=ea7aac6c5d0723d7f1e06c8035d27305:5:66594855')

parsed_json = json.load(urllib2.urlopen(url))

print parsed_json

for comment in parsed_json['results']['comments']:
    row = []
    row.append(str(comment['commentSequence']))
    row.append(str(comment['commentBody']))
    row.append(str(comment['commentTitle']))
    row.append(str(comment['approveDate']))
    writer.writerow(row) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:06:31.943

一些东西...

*   我对 NewYork Times API 一无所知，但我猜您可能不应该使用您的“api-key”发布代码片段。只是对这一点的猜测（我以前从未使用过这个 API）

*   如果您查看，API 会告诉您编码。您将在标题中返回以下内容：

    ```
    Content-Type=application/json; charset=UTF-8 
    ```

*   谷歌搜索“python and UnicodeEncodeError”会给你很多帮助。但是在这里，您的问题似乎可能是在评论中调用“str”。在这种情况下，它将使用“ascii”编解码器。如果有 128 以上的字符，则繁荣。你得到你所看到的错误。 [这](http://www.stereoplex.com/blog/python-unicode-and-unicodedecodeerror)是一篇关于该主题的非常好的博客文章。它可能会帮助您阅读它。

编辑：这个解决方案对我有用：

```
for comment in parsed_json['results']['comments']:
    row = []
    row.append(str(comment['commentSequence']))
    row.append(comment['commentBody'].encode('UTF-8', 'replace'))
    row.append(comment['commentTitle'].encode('UTF-8', 'replace'))
    row.append(str(comment['approveDate']))
    writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:41:55.197

用 unicode() 替换对 str() 的第二次和第三次调用。

```
for comment in parsed_json['results']['comments']:
    row = []
    row.append(str(comment['commentSequence']))
    row.append(unicode(comment['commentBody']))
    row.append(unicode(comment['commentTitle']))
    row.append(str(comment['approveDate']))
    writer.writerow(row) 
```

# java - OutputCollector 空指针异常 hadoop

> ID：12739211
> 
> 赞同：0
> 
> 时间：2012-10-05T03:50:05.880
> 
> 标签：java, hadoop, mapreduce

我正在尝试在内存排序中实现，即基于编号进行排序。的计数。我面临以下问题，在 Reduce 类的 close 方法中 output.collect 中出现 null pinter 异常。请帮忙！

我的编码逻辑正确吗？我将来自 reduce 方法的不同实例的标记保存在内存中。请帮我！我想要一个基于 TCounts 的排序输出。

```
package com.a;

import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;

import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reporter;

public class Map1 extends MapReduceBase implements Mapper<LongWritable, Text, Text, 
Text >{
    public void map(LongWritable key, Text value, OutputCollector<Text, Text> output,
            Reporter reporter) throws IOException {

        StringTokenizer tokenizer = new StringTokenizer(value.toString());

        String tk = tokenizer.nextToken();
        String id = tokenizer.nextToken();
        String name = tokenizer.nextToken();

        StringTokenizer tkz = new StringTokenizer(name, ",");

        ArrayList<String> al = new ArrayList<String>();

        while(tkz.hasMoreTokens())
        {
            name = tkz.nextToken();
            al.add(name);
        }

        for(int i = 0; i<al.size(); i++)
        {
            output.collect(new Text(t+" "+al.get(i)), new Text("1"));
            System.out.println("out key:----->"+t+" "+al.get(i));
        }

    }

}

public class Reduce1 extends MapReduceBase implements Reducer<Text, Text, Text, Text>{
    //  @SuppressWarnings("unchecked")

    ArrayList<TCount> al = new ArrayList<TCount>();
    String key_str = null;
    private OutputCollector<Text, Text> output;

    public void reduce (Text key, Iterator<Text> values, OutputCollector<Text,
            Text> output, Reporter reporter) throws IOException {

        int sum = 0;

        while(values.hasNext())
        {
            String val = values.next().toString();
            sum = sum+Integer.parseInt(val);;

        }

        String str_val = String.valueOf(sum);
        key_str = key.toString();
        //output.collect(key, new Text(str_val));
        TCount tc = new TCount(key.toString(), sum);
        al.add(tc);

    }

    private Text t = new Text();
    private Text txt_key = new Text();

    public void close() throws IOException {
        Collections.sort(al);

        for(int i = 0; i<al.size(); i++)
        {

            String tkn = al.get(i).getT();
            System.out.println("token:-------------------> "+tkn);

            System.out.println("output: "+output);
            txt_key = new Text(t);
            txt = new Text(String.valueOf(al.get(i).getCount()));
            output.collect(txt_key, t);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:17:38.383

在 Reduce1 类中，您要声明**输出**对象：

```
private OutputCollector<Text, Text> output; 
```

没有初始化它->所以此时它为空。

同样在方法中，`reduce()`您传递相同类型的参数 ( `OutputCollector<Text, Text> output`) -> 所以在此方法中，我猜您想说：

```
this.output=output;
// if the object is null, initialize it if you wanna use it 
```

问题是，只要您的对象未初始化（实例化），您就会得到一个空指针异常。

# dapper - Dapper 可以将多个删除插入或更新实现为 QueryMultiple 吗？

> ID：12739218
> 
> 赞同：7
> 
> 时间：2012-10-05T03:50:53.483
> 
> 标签：dapper

我从 Dapper 官方文档中看到了 QueryMultiple，如下所示，很方便！

```
 var sql = @"
select * from Customers where CustomerId = @id
select * from Orders where CustomerId = @id
select * from Returns where CustomerId = @id";

using (var multi = connection.QueryMultiple(sql, new {id=selectedId}))
{
   var customer = multi.Read<Customer>().Single();
   var orders = multi.Read<Order>().ToList();
   var returns = multi.Read<Return>().ToList();
   ...
} 
```

现在，当我从父表中删除记录时，我想从子表中删除相关记录。Dapper 能适应吗？它看起来如下。

```
 var sql = @"delete from tb_role where roleid=@ID
                            delete from tb_rolepermission where roleid=@ID
                            delete from tb_userrole where roleid=@ID
        ";
        var param = new { ID=id };

 connection.EXECUTEMultiple(sql, param).......... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T06:07:43.590

是的，您可以简单地调用 connection.Execute 并且它已经允许您尝试执行多个命令，就像 SqlCommand 上允许的 ExecuteQuery 一样，这就是 Dapper 无论如何都在调用的所有命令。

# apache-flex - Flash Builder 将数字转换为字符串

> ID：12739219
> 
> 赞同：1
> 
> 时间：2012-10-05T03:51:09.630
> 
> 标签：apache-flex, flex3, flash-builder, flexbuilder

我正在尝试计算 BMI 并为数字设置标签，但它一直返回“NaN”而不是数字。

完整代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="BMI Calculator">

<fx:Script>
    <![CDATA[
        public var weightnum:Number;
        public var heightnum:Number;
        public var resultvar:Number;
        protected function button1_clickHandler():void
        {
            weightnum = Number(weightvar);
            heightnum = Number(heightvar);
            resultvar = weightnum * 4.4 / (heightnum * heightnum);
            resultstr.text = resultvar.toString();
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Label left="30" top="30" text="Your Weight (lbs)"/>
<s:TextInput id="weightvar" restrict="0-9" x="30" y="53" width="80%"/>
<s:Label x="30" y="104" text="Your Height (feet)"/>
<s:TextInput id="heightvar" restrict="0-9" x="30" y="127" width="80%"/>
<s:Button x="30" y="202" label="Calculate" click="button1_clickHandler()"/>
<s:Label id="resultstr" x="30" y="253" text="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:53:33.993

而不是使用 String() 进行强制转换，而是使用 number.toString()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:35:41.203

您正在尝试将`TextInput`'s 转换为数字 ( `Number(weightvar);`)。那显然行不通。

您需要做的是将`TextInput`'`text`属性转换为数字，就像这样：

```
weightnum = Number(weightvar.text); 
```

# objective-c - IOS Facebook API 用户状态返回 NULL

> ID：12739220
> 
> 赞同：1
> 
> 时间：2012-10-05T03:51:21.160
> 
> 标签：objective-c, ios, facebook-fql, status

我正在尝试使用 FQL 语句获取用户名、pic_square 和状态对象：

使用 Graph API Explorer 效果很好。结果如下：

```
{
  "data": [
    {
      "uid": 657asdf, 
      "name": "Name1", 
      "pic_square": "http://profile.ak.fbcdn.net/hprofile-ak-snc7/371062_657477736_1asd.jpg", 
      "status": {
        "message": "who want's to bring me a burrito?", 
        "time": 1349381334, 
        "status_id": "1015110984sadf", 
        "comment_count": 0
      }
    }, 
    {
      "uid": 123asdf, 
      "name": "name2", 
      "pic_square": "http://profile.ak.fbcdn.net/hprofile-ak-snc6/275748_607345433_91234.jpg", 
      "status": {
        "message": "my excitement for tonight on a scale of 1-10 just went from a 15 to a 3 pretty quick", 
        "time": 1349386828, 
        "status_id": "1015216195asdf", 
        "comment_count": 0
      }
    }, 
```

但在 Xcode 中我得到以下结果，请注意状态为`<null>`：

```
data =     (
                {
            name = "Name1";
            "pic_square" = "http://profile.ak.fbcdn.net/hprofile-ak-ash4/371941_803145_672321642_q.jpg";
            status = "<null>";
            uid = 801asdf;
        },
                {
            name = "Name2";
            "pic_square" = "http://profile.ak.fbcdn.net/hprofile-ak-ash4/276004_2403715_8811asdf.jpg";
            status = "<null>";
            uid = 240asdf;
        }, 
```

这是我[从这里移植的代码](http://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

```
NSString *query =
    @"SELECT uid, name, pic_square, status FROM user WHERE (uid IN "
   @"(SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 1055)) ORDER BY status.time";

    NSDictionary *queryParam =
    [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
    // Make the API request that uses FQL

    [FBRequestConnection startWithGraphPath:@"/fql"
                                 parameters:queryParam
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error) {
                              if (error) {
                                  NSLog(@"Error: %@", [error localizedDescription]);
                              } else {
                                  NSLog(@"Result: %@", result);  

                              }
                          }]; 
```

这是 IOS Facebook API FBRequestConnection 方法的限制吗？有替代方法吗？我确信我不是唯一一个尝试在一个 FQL 查询中同时获取用户名和状态的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:13:45.623

It was user error. I did not set the appropriate permissioning to get the status. I had to include "frends_status" to the permissions array.

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes",
                            @"read_stream",
                            @"friends_status",
                            nil]; 
```

# android - 调用 invalidate 时未调用 OnDraw()

> ID：12739222
> 
> 赞同：0
> 
> 时间：2012-10-05T03:51:24.750
> 
> 标签：android, ondraw

我正在使用从视图组扩展的视图，当我调用 invalidate 时没有调用 onDraw。有人可以解释一下吗？代码如下

```
public class BarGraph extends View {    
private int viewHeight;
private int viewWidth;                          // height and width of bar graph dynamically calculated.
private int mGraphColor;                        // the colour of the bar graph.

private ArrayList<Integer> mTodays;             // The array list that handles the input to draw the graph.
private final int barCount  =   20;             // Number of bars in the bar graph...here set as 20.

/* 
 * The maximum action value a bar can take.
 * This is calculated based on the action array
 * passed to the chart.
 */

private int yMax    =   0;

private Paint graphColor;

public BarGraph(Context context, int graphColor) {
    super(context);
    this.setWillNotDraw(false);
    mGraphColor     =   graphColor;
    setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    initializePaintObjects();
}

public BarGraph(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.setWillNotDraw(false);
    initializePaintObjects();
}

private void initializePaintObjects(){
    graphColor = new Paint();
    graphColor.setColor(mGraphColor);       
    graphColor.setStyle(Style.FILL);
}

@Override 
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    if(mTodays == null)                     // If the array list is empty.
        return;
    if(yMax <= 0)                       
        return;
    int left    =   0;

    viewHeight  = getHeight();
    viewWidth   = getWidth();

    if((viewWidth % barCount) > 0){     //adjusting the view width so that bars correctly fits in 
        int newWidth    =   (int) (Math.floor(viewWidth / barCount) * barCount);
        left            =   (int) Math.floor(((viewWidth - newWidth)/2));
        viewWidth       =   (int) Math.floor((viewWidth / barCount) * barCount);
    }

    int columnWidth     =   2;
    columnWidth         =  (int) Math.floor(viewWidth / barCount);

    int xFactor         =   1;    
    xFactor             =   (int) Math.ceil(columnWidth * 0.33);

    int barWidth        =   1;
    barWidth            =   columnWidth - xFactor;

    graphColor.setStrokeWidth(barWidth);

    int j = 0;

    for(int i = 0; i < mTodays.size() ; i++){
        int todayValue      =   mTodays.get(i);
        float todaysHeight;
        if(todayValue == 0){
            todaysHeight    =   (float) (viewHeight-viewHeight*(.001));
        }else{
            todaysHeight    =   getYValue(todayValue);
        }

        canvas.drawLine(((j*columnWidth)+xFactor + left) , viewHeight, ((j*columnWidth)+xFactor + left), todaysHeight, graphColor);
        j++;
    }

}

public void setData(ArrayList<Integer>todays){

    mTodays         =   todays;

    yMax            =   0;
    for (int val : mTodays){
        yMax        =   yMax > val ? yMax : val;
    }
    invalidate();
}

private int getYValue(int item){
   int percent = (item * 100)/yMax;
   return (viewHeight) - ((percent * viewHeight)/100);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:23:37.497

感谢您的所有尝试。问题实际上出在主要活动中。以下是正确的代码

```
final Handler handler = new Handler(); 
                Timer timer2 = new Timer(); 
                TimerTask testing = new TimerTask() {
                    public void run() { 
                        handler.post(new Runnable() {
                            public void run() {
                                for(int j=0;j<19;j++){
                                    todays.set(j, todays.get(j+1));
                                }
                                Random diceRoller = new Random();
                                todays.set(19,  diceRoller.nextInt(100)*10+1);
                                MainActivity.this.runOnUiThread(new Runnable() {

                                    @Override
                                    public void run() {
                                        // TODO Auto-generated method stub
                                        bargraph.setData(todays);    
                                    }
                                });
                            }

                        }); 
```

起初我没有写 runOnUiThread ......我的坏......

# scheme - 方案 - 从参数顺序运行两个过程？

> ID：12739223
> 
> 赞同：4
> 
> 时间：2012-10-05T03:51:46.323
> 
> 标签：scheme, racket

我正在尝试创建一个将两个函数作为参数并执行它们的函数。

我尝试使用`cond`，但它只执行`action1`。

```
(define seq-action
  (lambda (action1 action2)
    (cond
     ((procedure? action1) (action1))
     ((procedure? action2) (action2))))) 
```

我觉得一个接一个地跑应该不会太难。它们不需要同时运行。

我只是`(action1) (action2)`并排尝试过，但它只返回`action2`. 这是我为`action1`and定义的内容`action2`：

```
(define ax 
  (lambda ()
    (+ 1 2)))
(define bx 
  (lambda ()
    (+ 5 2))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T04:00:30.207

一个接一个地执行一个过程就这么简单：

```
(define seq-action
  (lambda (action1 action2)
    (action1)
    (action2))) 
```

但是，上面只会返回最后一个过程的结果。如果您需要两个结果，则返回一个包含值的列表，如下所示：

```
(define seq-action
  (lambda (action1 action2)
    (list (action1) (action2)))) 
```

或者，您可以使用以下过程*同时*返回多个值：`values`

```
(define seq-action
  (lambda (action1 action2)
    (values (action1) (action2)))) 
```

要在调用最后一个版本后检索这两个值，您需要使用`let-values`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:56:14.510

Scheme 函数将返回它评估的最后一件事。如果您需要两个退货，您可以尝试将它们打包成一个列表并将其退回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:17:32.743

如果您想`procedure?`在调用之前检查参数，您可以使用以下解决方案。

```
(define seq-action
  (lambda (action1 action2)
    (and (procedure? action1) (action1))
    (and (procedure? action2) (action2)))) 
```

# url - 我可以使用 Apache FileNameUtils 从 Url 获取 Unix 路径吗

> ID：12739225
> 
> 赞同：1
> 
> 时间：2012-10-05T03:51:58.003
> 
> 标签：url, file-upload, filepath, apache-commons-io

我第一次将我的 Web 应用程序部署到 unix 服务器。我们的应用程序中有文件上传功能。文件上传路径为

```
 String url = "\\\\corp.test.sample.com\\corp\\Docs\\Upload\\test"; 
```

但是当我在 Unix 服务器上使用它时，我得到了空指针异常。我在网站上发现我可以[Apache FileNameUtills](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html) 通过使用方法在 Unix 中获取上述路径，`FileNameUtils.separatorsToSystem(url);`返回我可以在 Unix 环境中使用的路径。这是最好的，还是有其他我可以在 Unix 上运行的 API？

# c# - object.object 的最佳重载匹配有一些无效参数

> ID：12739229
> 
> 赞同：2
> 
> 时间：2012-10-05T03:52:36.400
> 
> 标签：c#, class, object, properties

我正在尝试创建一个发票类型的新对象。我以正确的顺序传入必要的参数。

但是，它告诉我我包含了无效的论点。我可能在这里忽略了一些非常简单的事情，但也许有人可以指出来。

我正在做作业，但是包含 Invoice.cs 文件以供项目使用。

我正在寻求的唯一解决方案是为什么我的对象不接受这些值。我以前从未遇到过对象问题。

这是我的代码：

```
static void Main(string[] args)
{
    Invoice myInvoice = new Invoice(83, "Electric sander", 7, 57.98);
} 
```

这是实际的 Invoice.cs 文件：

```
// Exercise 9.3 Solution: Invoice.cs
// Invoice class.
public class Invoice
{
   // declare variables for Invoice object
   private int quantityValue;
   private decimal priceValue;

   // auto-implemented property PartNumber
   public int PartNumber { get; set; }

   // auto-implemented property PartDescription
   public string PartDescription { get; set; }

   // four-argument constructor
   public Invoice( int part, string description,
      int count, decimal pricePerItem )
   {
      PartNumber = part;
      PartDescription = description;
      Quantity = count;
      Price = pricePerItem;
   } // end constructor

   // property for quantityValue; ensures value is positive
   public int Quantity
   {
      get
      {
         return quantityValue;
      } // end get
      set
      {
         if ( value > 0 ) // determine whether quantity is positive
            quantityValue = value; // valid quantity assigned
      } // end set
   } // end property Quantity

   // property for pricePerItemValue; ensures value is positive
   public decimal Price
   {
      get
      {
         return priceValue;
      } // end get
      set
      {
         if ( value >= 0M ) // determine whether price is non-negative
            priceValue = value; // valid price assigned
      } // end set
   } // end property Price

   // return string containing the fields in the Invoice in a nice format
   public override string ToString()
   {
      // left justify each field, and give large enough spaces so
      // all the columns line up
      return string.Format( "{0,-5} {1,-20} {2,-5} {3,6:C}",
         PartNumber, PartDescription, Quantity, Price );
   } // end method ToString
} // end class Invoice 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T03:55:47.067

您的方法需要一个`decimal`参数，因为您正在传递一个`double`值（57.98）。

根据[MSDN](http://msdn.microsoft.com/en-us/library/y5b434w4%28v=vs.71%29.aspx)（请参阅备注部分），

> 浮点类型和十进制类型之间没有隐式转换。

对于小数，您应该添加后缀“m”或“M”

所以，在你的情况下，通过 57.98m 而不是 57.98

> [这个 SO 答案](https://stackoverflow.com/a/3271831/441860)列出了各种后缀。

# jquery - jquery高亮asp.net gridview行的一部分

> ID：12739230
> 
> 赞同：0
> 
> 时间：2012-10-05T03:52:57.113
> 
> 标签：jquery

我有一个 asp.net gridview，它呈现以下表结构：

```
<table>
<tr><th>Header 1</th><th>Header 2</th><th>Header 3</th></tr>
<tr><td>cell1</td><td>cell2</td><td>cell3</td></tr>
</table> 
```

我正在使用以下 jQuery 语句来突出显示每个非标题行的整行。

```
$("table tr:has(td)").css({ background: "ffffff" }).hover(
  function () { $(this).css({ background: "#FC6" }); },
  function () { $(this).css({ background: "#ffffff" }); }
); 
```

我将如何更改此代码以突出显示每个非标题行而不是该行的第三个（最后一个）单元格？例如同时突出显示该行的前两个单元格，而不是第三个单元格。

如果有人对选择器逻辑有一个不错的网络参考，那也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:27:07.263

您可以使用[:not() 选择器](http://api.jquery.com/not-selector/)和[:last-child() 选择器](http://api.jquery.com/last-child-selector/)来完成此操作，如下所示：

```
$("tr:has(td)").hover(function() {
    $(this).find("td:not(:last-child)").css("background-color", "#FC6");
}, function() {
    $(this).find("td").css("background-color", "#FFF");
});​ 
```

这将带来额外的好处，即不被绑定到三列。这是一个证明这一点的[小提琴。](http://jsfiddle.net/bhayden1/gtw8t/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:13:16.977

请参考此链接[小提琴](http://jsfiddle.net/CG9d2/1/)，如果我不习惯请让我..

```
<table>
<tr><th>Header 1</th><th>Header 2</th><th>Header 3</th></tr>
<tr><td class="c1">cell1</td><td class="c2">cell2</td><td>cell3</td></tr>
<tr><td class="c1">cell1</td><td class="c2">cell2</td><td>cell3</td></tr>
</table>

$(".c1").closest('td').css('background-color', 'red');
$(".c2").closest('td').css('background-color', 'red'); 
```

# python - 如何编写测试集来测试 Python 程序中的决策？

> ID：12739236
> 
> 赞同：0
> 
> 时间：2012-10-05T03:53:18.783
> 
> 标签：python, testing

我已经用 Python 编程了一个月，但我从来没有写过测试用例。我正在尝试为以下程序的测试决定编写 2 个测试集：

```
#!/usr/bin/python3

def books():
    a = input("Enter number of books:")
    inp = int(a)
    if inp==0:
        print("You earned 0 points")
    elif inp==1:
        print("You earned 5 points")
    elif inp==2:
        print("You earned 15 points")
    elif inp==3:
        print("You earned 30 points")
    elif inp==4:
        print("You earned 60 points")
    else:
        print("No Negatives")

books() 
```

如何编写 2 个测试集来测试该程序的决定？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:06:30.027

听起来您正在寻找一个测试示例。我会通过说这是在 Python 2.7 中完成的，但我相信它也可以在 3 中工作（我所做的只是将 print 语句更改为一个函数 - 不确定其余的是否有效:)）。我对您的代码进行了一些编辑（正如 cdarke 所提到的，有更简单的方法来设置点数，但我会保持它接近您的原始代码，以便您可以看到测试它可以采取的步骤）。这是您的代码，有一些修改（注释）：

```
def Books(num_books):
    # We let books take a parameter so that we can test it with different
    # input values.
    try:
      # Convert to int and then choose your response
      num_books = int(num_books)
      if num_books < 0:
          response = "No Negatives"
      elif num_books == 0:
          response = "You earned 0 points"
      elif num_books == 1:
          response = "You earned 5 points"
      elif num_books == 2:
          response = "You earned 15 points"
      elif num_books == 3:
          response = "You earned 30 points"
      elif num_books == 4:
          response = "You earned 60 points"
      else:
          response = "That's a lot of books"

    except ValueError:
        # This could be handled in a better way, but this lets you handle
        # the case when a user enters a non-number (and lets you test the
        # exception)
        raise ValueError("Please enter a number.")

    return response

def main():
    # Here we wrap the main code in the main function to prevent it from
    # executing when it is imported (which is what happens in the test case)

    # Get the input from the user here - this way you can bypass entering a
    # number in your tests.
    a = input("Enter number of books: ")

    # Print the result
    print(Books(a))

if __name__ == '__main__':
    main() 
```

然后是测试，您可以简单地运行为`python my_program_test.py`：

```
import my_program
import unittest

class MyProgramTest(unittest.TestCase):

  def testBooks(self):
      # The results you know you want
      correct_results = {
          0: "You earned 0 points",
          1: "You earned 5 points",
          2: "You earned 15 points",
          3: "You earned 30 points",
          4: "You earned 60 points",
          5: "That's a lot of books"
          }

      # Now iterate through the dict, verifying that you get what you expect
      for num, value in correct_results.iteritems():
          self.assertEqual(my_program.Books(num), value)

  def testNegatives(self):
      # Test a negative number to ensure you get the right response
      num = -3
      self.assertEqual(my_program.Books(num), "No Negatives")

  def testNumbersOnly(self):
      # This is kind of forced in there, but this tests to make sure that
      # the proper exception is raised when a non-number is entered
      non_number = "Not a number"
      self.assertRaises(ValueError, my_program.Books, non_number)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:07:02.430

问题的第二个版本的编辑：

```
def books(): 

    points = [0,5,15,30,60];    #  list of the points
    inp = 0;

    while inp < 0 or inp >= len(points):
        a = input("Enter number of books:") 
        inp = int(a)

    print("You earned",points[inp],"points") 

books() 
```

如果书籍数量和点数之间存在直接相关性，您将能够避免该列表，但我不知道您的算法。

如果值`inp`是字符串，那么您可以使用字典而不是列表。

# sql - 用日期对sqlserver中的记录进行排序（从表中获取“n”条最新添加的记录）

> ID：12739237
> 
> 赞同：0
> 
> 时间：2012-10-05T03:53:31.157
> 
> 标签：sql, sql-server, tsql, sql-order-by

我有一个包含项目列表的表格。我从 UI（asp.net 网页）添加记录当我添加记录时，我还在每条记录的列中添加“创建日期”。现在我想获取 5 个最新项目的列表，具体取决于日期。查询将是什么？我的 Created_date 列具有以下格式的条目：2012-09-21

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:56:50.330

```
select top 5 [columns] from table_name order by Created_date [desc] 
```

`order by Created_date`默认情况下会按升序排列（最早的在前），如果你想最新的在前，请使用`order by Created_date desc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:01:09.690

> 现在我想获取 5 个最新项目的列表，具体取决于日期。

所以你真的希望它们按 DESCending 顺序排列。

```
 select top(5) *
    from tbl
order by created_date desc 
```

> 我的 Created_date 列具有以下格式的条目：2012-09-21

您可能会这样认为，但数据库中 DATETIME 字段的条目是 8 字节结构，而不是某种格式化的字符串表示形式。除非那是一个 varchar 列，在这种情况下，您将来会遇到一些痛苦。至少排序仍然有效，因为您使用的是可排序格式（yyyy-mm-dd）。

# c# - 从文本文件值填充 x 和 y 坐标（生命逻辑游戏）

> ID：12739243
> 
> 赞同：0
> 
> 时间：2012-10-05T03:54:27.843
> 
> 标签：c#

我正在通过使用 C# the Game of Life 编写代码来经历一个学习过程。我已经能够使用 a`pictureBox`并在上方显示一个网格，以便用户可以轻松地单击每个单元格。在`button1`我能够为布尔变量分配`fill_in`一个值，单击该值将填充某个单元格。但我现在正在尝试从文本文件中抓取选定单元格的加载`x`和`y`坐标。这样的文本文件将在第一行具有值：`260`(space) `50`。任何想法我怎么能做到这一点？

**代码**

```
namespace life
    {
        public partial class Form1 : Form
        {

            Graphics paper;
            bool[,] fill_in = new bool[450, 450];

        public Form1()
            {
                InitializeComponent();
                paper = pictureBox1.CreateGraphics();

            }

    //makes grid in picture box
    private void drawGrid()
            {
                int numOfCells = 100;
                int cellSize = 10;
                Pen p = new Pen(Color.Blue);
                paper.Clear(Color.White);

                for (int i = 0; i < numOfCells; i++)
                {   
                    // Vertical
                    paper.DrawLine(p, i * cellSize, 0, i * cellSize, numOfCells * cellSize);
                    // Horizontal
                    paper.DrawLine(p, 0, i * cellSize, numOfCells * cellSize, i * cellSize);
                }
            }

    // populate bool fill_in with true (alive) or false (dead)
            private void clearGrid()
            {
                for (int x = 0; x < 450; x = x + 10)
                {
                    for (int y = 0; y < 450; y = y + 10)
                    {
                        fill_in[x, y] = false;
                    }
                }
            }

     private void button1_Click(object sender, EventArgs e)
            {
                drawGrid();
                clearGrid();

        //randomly populate grid squares
         fill_in[50, 50] = true;
                 fill_in[60, 50] = true;
                 fill_in[30, 40] = true;
                 fill_in[40, 40] = true;

                for (int x = 0; x < 440; x = x + 10)
                {
                    for (int y = 0; y < 440; y = y + 10)
                    {
                        if (fill_in[x, y] == true)
                            paper.FillRectangle(Brushes.Black, x, y, 10, 10);
                    }
                }
            }

     private void button2_Click(object sender, EventArgs e)
        {
            OpenFileDialog openReport = new OpenFileDialog();
            openReport.Filter = "Text Files | *.txt";
            openReport.ShowDialog();          
            StreamReader infile = File.OpenText(openReport.FileName);

        //Need Help/Guidance read text file coordinates and populate grid

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:17:23.263

我假设当您从文本文件中获取值对“x y”时，您希望将 fill_in[x, y] 设置为 true。所以这里有一个代码片段来做到这一点。

```
 while (infile.Peek() >= 0) 
 {
     string[] values = infile.ReadLine().Split(' ');
     fill_in[int.Parse(values[0]), int.Parse(values[1])] = true;
 } 
```

基本思想很简单，您从文件中逐行读取，直到没有剩余。然后，您根据将有两个整数用空格分隔的标准拆分所述行。这种方法非常快速和粗略，因为它不检查文本文件中的格式错误的数据，也不处理异常，但如果你小心地形成文本文件，它就会完成工作。

从文件中读取和解析数据在编程中非常重要，因此我建议您搜索该主题并熟悉这些概念。

# php - 组合两个多维数组并仅对一个带有数值的键求和 - PHP

> ID：12739245
> 
> 赞同：1
> 
> 时间：2012-10-05T03:54:54.653
> 
> 标签：php, multidimensional-array

我必须组合两个多维数组（4 级深），同时总结每个项目下的数值。除了提到的值之外，这两个数组的结构是相同的。

阵列1：

```
 Array
(
    [0] => Array
        (
            [item_code] => AB00
            [item_text] => Alcoholic beverages
            [value] => 233
            [children] => Array
                (
                )

        )

    [1] => Array
        (
            [item_code] => AP00
            [item_text] => Apparel and services
            [value] => 1080
            [children] => Array
                (
                    [0] => Array
                        (
                            [item_code] => APC0
                            [item_text] => Apparel, Children under 2
                            [value] => 79
                            [children] => Array
                                (
                                )

                        )

                    [1] => Array
                        (
                            [item_code] => APO0
                            [item_text] => Other apparel products and services
                            [value] => 131
                            [children] => Array
                                (
                                )

                        )

                    [2] => Array
                        (
                            [item_code] => APM0
                            [item_text] => Apparel, Men and boys
                            [value] => 204
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [item_code] => APM2
                                            [item_text] => Apparel, Boys, 2 to 15
                                            [value] => 41
                                            [children] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [item_code] => APM1
                                            [item_text] => Apparel, Men, 16 and over
                                            [value] => 163
                                            [children] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [3] => Array
                        (
                            [item_code] => APF0
                            [item_text] => Footwear
                            [value] => 241
                            [children] => Array
                                (
                                )

                        )

                    [4] => Array
                        (
                            [item_code] => APW0
                            [item_text] => Apparel, Women and girls
                            [value] => 425
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [item_code] => APW2
                                            [item_text] => Apparel, Girls, 2 to 15
                                            [value] => 78
                                            [children] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [item_code] => APW1
                                            [item_text] => Apparel, Women, 16 and over
                                            [value] => 347
                                            [children] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        ) 
```

和 Array2：

```
 Array
(
    [0] => Array
        (
            [item_code] => AB00
            [item_text] => Alcoholic beverages
            [value] => 296
            [children] => Array
                (
                )

        )

    [1] => Array
        (
            [item_code] => AP00
            [item_text] => Apparel and services
            [value] => 1225
            [children] => Array
                (
                    [0] => Array
                        (
                            [item_code] => APC0
                            [item_text] => Apparel, Children under 2
                            [value] => 73
                            [children] => Array
                                (
                                )

                        )

                    [1] => Array
                        (
                            [item_code] => APO0
                            [item_text] => Other apparel products and services
                            [value] => 163
                            [children] => Array
                                (
                                )

                        )

                    [2] => Array
                        (
                            [item_code] => APF0
                            [item_text] => Footwear
                            [value] => 265
                            [children] => Array
                                (
                                )

                        )

                    [3] => Array
                        (
                            [item_code] => APM0
                            [item_text] => Apparel, Men and boys
                            [value] => 278
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [item_code] => APM2
                                            [item_text] => Apparel, Boys, 2 to 15
                                            [value] => 61
                                            [children] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [item_code] => APM1
                                            [item_text] => Apparel, Men, 16 and over
                                            [value] => 217
                                            [children] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [4] => Array
                        (
                            [item_code] => APW0
                            [item_text] => Apparel, Women and girls
                            [value] => 447
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [item_code] => APW2
                                            [item_text] => Apparel, Girls, 2 to 15
                                            [value] => 95
                                            [children] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [item_code] => APW1
                                            [item_text] => Apparel, Women, 16 and over
                                            [value] => 353
                                            [children] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        ) 
```

我的目标是组合这两个数组并对 [value] 数字键求和。到目前为止我的进展：

```
foreach ($Array2 as $key => $values) {
foreach ($values as $name => $value) {
    if(!is_array($Array1[$key])) {
        $Array1[$key] = array(); 
    }
    $finalArr[$key][$name] += $value;
} 
```

}

抱歉，我的问题啰嗦了。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:09:41.397

这将递归地合并两个数组并应用回调来确定如何处理匹配键的非数组值。

```
function array_merge_map_recursive($r1, $r2, $callback) {
    $merged = array();
    foreach ($r1 as $k => $v) {
        if (!isset($r2[$k])) {
            $merged[$k] = $v;
        }
        elseif (!is_array($v)) {
            $merged[$k] = $callback($k,$v,$r2[$k]);
        }
        else {
            $merged[$k] = array_merge_map_recursive($v,$r2[$k],$callback);
        }
    }
    return $merged;
} 
```

如果键是“值”，回调将把这两个元素相加，否则如果它们相同，它将不理会它，如果它们不相同，它将把它们包装在一个数组中。如果要对任何数值求和，无论键如何，都可以将第一个更改`if`为`if (is_numeric($v1))`.

此语法需要 PHP 5.3，但可以很容易地为早期版本重写。

```
$sumIfValue = function($key,$v1,$v2) {
    if ($key==='value') {
        return $v1 + $v2;
    } elseif ($v1===$v2) {
        return $v1;
    } else {
        return array($v1,$v2);
    }
}; 
```

然后你可以这样称呼它（你的两个数组是`$array1`和`$array2`）：

```
$merged = array_merge_map_recursive($array1, $array2, $sumIfValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:02:51.860

节省资源[首先使用合并数组](http://php.net/manual/en/function.array-merge.php)

# php - 如何在给定的日期范围和时间使用 PHP 生成 .ics 文件

> ID：12739247
> 
> 赞同：7
> 
> 时间：2012-10-05T03:55:06.900
> 
> 标签：php, icalendar

我正在尝试根据给定的日期范围（开始日期 - 结束日期）和提醒时间找到一种有效的方法来使用 PHP 生成可下载的“.ics”文件。

任何人都可以为我提供一个示例 PHP 代码来创建此功能。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-05T07:09:04.327

[http://web.archive.org/web/20120419230026/http://jamiebicknell.tumblr.com/post/413492676/ics-generator-php-class](http://web.archive.org/web/20120419230026/http://jamiebicknell.tumblr.com/post/413492676/ics-generator-php-class)

**注：**原博文不见了；使用 arhcive.org 链接保存。

* * *

复制并粘贴以上链接的信息：

```
<?php
class ICS {
    var $data;
    var $name;
    function ICS($start,$end,$name,$description,$location) {
        $this->name = $name;
        $this->data = "BEGIN:VCALENDAR\nVERSION:2.0\nMETHOD:PUBLISH\nBEGIN:VEVENT\nDTSTART:".date("Ymd\THis\Z",strtotime($start))."\nDTEND:".date("Ymd\THis\Z",strtotime($end))."\nLOCATION:".$location."\nTRANSP: OPAQUE\nSEQUENCE:0\nUID:\nDTSTAMP:".date("Ymd\THis\Z")."\nSUMMARY:".$name."\nDESCRIPTION:".$description."\nPRIORITY:1\nCLASS:PUBLIC\nBEGIN:VALARM\nTRIGGER:-PT10080M\nACTION:DISPLAY\nDESCRIPTION:Reminder\nEND:VALARM\nEND:VEVENT\nEND:VCALENDAR\n";
    }
    function save() {
        file_put_contents($this->name.".ics",$this->data);
    }
    function show() {
        header("Content-type:text/calendar");
        header('Content-Disposition: attachment; filename="'.$this->name.'.ics"');
        Header('Content-Length: '.strlen($this->data));
        Header('Connection: close');
        echo $this->data;
    }
}
?> 
```

将 ICS 文件输出到浏览器并为用户提供打开或保存的选项

```
<?php
$event = new ICS("2009-11-06 09:00","2009-11-06 21:00","Test Event","This is an event made by Jamie Bicknell","GU1 1AA");
$event->show();
?> 
```

将 ICS 文件保存到服务器的当前工作目录中

```
<?php
$event = new ICS("2009-11-06 09:00","2009-11-06 21:00","Test Event","This is an event made by Jamie Bicknell","GU1 1AA");
$event->save();
?> 
```

# c# - 无法加载文件或程序集或其依赖项之一

> ID：12739251
> 
> 赞同：0
> 
> 时间：2012-10-05T03:55:30.503
> 
> 标签：c#, asp.net, dependencies, .net-assembly

在我的解决方案中，我有 3 个项目（1 个网站、1 个数据层、1 个商务层）。我的 biz 层在我的网站和数据层中都有程序集引用，我的数据层在网站中也有引用。在我的网站中，我有 3 个 Web 服务，它们基本上使用这些数据层和商务层来工作。

现在我面临的问题是最近我对这个 BizEntity 中的一个类进行了一些更改，这是我的 biz 层项目名称，并向当前类之一添加了一些字段，然后在我的网站上添加了一个 rdlc 以提供报告但是在我的 rdlc 设计页面中，当我从工具中删除表格时，出现以下错误：

```
 "Could not load file or assembly 'BizEntity', Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified." 
```

*BizEntity 是包含对象的我的 biz 层的项目名称。

我一直在互联网上寻找解决方案，但我找不到任何可行的解决方案。任何帮助或建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:20:34.520

复制数据层和商务层dll

> 服务器根目录：\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\CommonExtensions\DataDesign

重启VS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:45:37.317

我对 ajaxtoolkit 有同样的问题，将 ajax 库添加到提到的文件夹中解决了这个问题。我添加了*SanitizerProviders.dll*、*AjaxControlToolkit.dll*、*HtmlSanitizationLibrary.dll*，最后重启了VS2010。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:08:23.080

检查存储 BizEntity 的文件夹属性是否为“只读”。

# d3.js - 使用 d3.js 散点图上的多个矩形？

> ID：12739263
> 
> 赞同：3
> 
> 时间：2012-10-05T03:57:08.417
> 
> 标签：d3.js

我有一个散点图。我需要通过鼠标在散点图上拖动来绘制多个矩形。

我知道如何在图表上绘制单个矩形或选择。

这可能使用 d3.js

另外我想知道是否可以使用 d3.js 在散点图上通过鼠标拖动来绘制多边形？

# .net - 如何限制部署后脚本在 Visual Studio 数据库项目中仅运行一次

> ID：12739266
> 
> 赞同：1
> 
> 时间：2012-10-05T03:58:03.710
> 
> 标签：.net, visual-studio-2010, database-project, database-deployment, schema-compare

我们的 Visual Studio 数据库项目中有一个部署后脚本。它用数据填充查找表。问题是每次我们更改架构并生成更新脚本时，部署后脚本都会附加到部署脚本的末尾。有没有办法将 VS2010 中的特定部署后脚本标记为只运行一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:26:00.660

**免责声明：**我来自 ReadyRoll 软件，该软件为数据库部署提供了商业工具。

您使用的 DataDude 项目系统和新的 SSDT 项目都不支持一次性脚本。这些项目本质上是*声明*性的这一事实意味着，除非该工具具有本地支持的带有数据的查找表填充（目前不支持），否则只能使用“始终运行”部署后脚本执行操作。

如果您尚未使用它，则可以考虑使用该`MERGE`语句进行查找数据部署，如果您要部署到 SQL Server 2008 或更高版本。这为您提供了一种有点声明性的填充表的方式，您不必在部署之前检查数据是否已经插入。

如果您想尝试一个只运行每个脚本一次的项目系统，您可能想考虑*命令式*方法（有时称为迁移）。有很多 OSS 可以做到这一点，但是您可能想考虑 ReadyRoll，因为它与 Visual Studio 集成： [http ://ready-roll.com](http://ready-roll.com)

# android - Android 如何从 DialogFragment 正按钮单击调用片段方法

> ID：12739267
> 
> 赞同：6
> 
> 时间：2012-10-05T03:58:15.640
> 
> 标签：android, android-dialogfragment

我扩展了 DialogFragment 并从 Fragment 调用它（使用支持库，例如 android.support.v4.app.Fragment）

Fragment 实现了以下包含 doPositiveClick() 方法的接口。

```
public interface CustomFieldsFragmentAlertDialog {
    public abstract void doPositiveClick();
} 
```

为了显示对话框，我调用：

```
CustomFieldsDialogFragment dialog = CustomFieldsDialogFragment.newInstance();
dialog.show(getFragmentManager(), "fragmentDialog"); 
```

这是我的 DialogFragment 类

```
public static class CustomFieldsDialogFragment extends DialogFragment{          

        public static CustomFieldsDialogFragment newInstance() {

            CustomFieldsDialogFragment frag = new CustomFieldsDialogFragment();             
            return frag;
        }   

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {               

            Builder builder = new AlertDialog.Builder(getActivity()); 
            builder.setTitle("Title");                
            builder.setPositiveButton(posButtonText, new DialogInterface.OnClickListener() {                        

                    @Override
                    public void onClick(DialogInterface dialog, int which) {                            
                        ((CustomFieldsFragmentAlertDialog)getTargetFragment()).doPositiveClick();

                    }
                });
            }                

            return builder.create();

        }       
    } 
```

尝试执行**((CustomFieldsFragmentAlertDialog)getTargetFragment()).doPositiveClick(); 行时，应用程序因空指针异常而崩溃**

> 10-05 13:45:23.550: E/AndroidRuntime(29228): java.lang.NullPointerException 10-05 13:45:23.550: E/AndroidRuntime(29228): 在 com.company.app.CustomFieldsFragment$CustomFieldsDialogFragment$1.onClick (CustomFieldsFragment.java:194)

如何调用调用 CustomFieldsFragmentAlertDialog 的片段中存在的 doPositiveClick() 方法？

请注意，android 开发者网站显示了一个示例[http://developer.android.com/reference/android/app/DialogFragment.html#AlertDialog](http://developer.android.com/reference/android/app/DialogFragment.html#AlertDialog)使用**((FragmentAlertDialog)getActivity()).doPositiveClick();** 但我是从片段而不是活动中调用的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:53:15.290

活动正在`((FragmentAlertDialog)getActivity()).doPositiveClick();`实现接口，以便您可以将活动转换为接口类。

在您的情况下，您希望将目标片段转换为接口，因此您的目标片段必须实现接口，否则它将为您提供`ClassCastException`。但是你得到了`NullPointerExeception`确保该`getTargetFragment()`方法没有返回空对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T09:36:18.933

我看不到您在调用它之前正在初始化您的界面，您可以按如下方式实现：

```
CustomFieldsFragmentAlertDialog mListener;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception.
    try {
        mListener = (CustomFieldsFragmentAlertDialog) getFragmentManager().findFragmentByTag(hostFragmentTag);
    } catch (ClassCastException e) {
        throw new ClassCastException(getFragmentManager()
                .findFragmentByTag(hostFragmentTag).toString()
                + " must implement CustomFieldsFragmentAlertDialog");
    }
} 
```

> 不要忘记在调用（主机）片段中实现你的监听器，否则它会抛出异常。

为了避免在调用侦听器之前始终检查其是否为 null 的良好做法，因此您的代码将如下所示

```
if(mListener != null)
    mListener.doPositiveClick(); 
```

# grails - 使用 hasMany 关系在 grails 中创建标准

> ID：12739268
> 
> 赞同：2
> 
> 时间：2012-10-05T03:58:38.527
> 
> 标签：grails, criteria, hibernate-criteria

我有两节课

```
Quiz{
  String name
  static hasMany[tags:Tag]
}

Tag{
    String tag
} 
```

如何使用标准构建器在 grails 中编写以下查询

```
select count(tag_id),tag  from quiz_tag 
left outer join tag on tag_id=id
group by tag_id,tag 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:25:35.500

如果您将多对多表与域类映射，您可以使用条件查询来执行此操作，如此[处](http://grails.org/Many-to-Many+Mapping+without+Hibernate+XML)所述。

```
class QuizTag {
    Quiz quiz
    Tag tag

    ...
}

def counts = QuizTag.withCriteria {
    projections {
        groupProperty('tag')
        rowCount()
    }
} 
```

该`counts`变量将是一个`List`列表`[Tag object, count of the Tag]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:03:10.040

您似乎想知道每个标签在测验中使用了多少次。通过像你一样定义你的域类，你得到了一个中间表 quiz_tag，通过使用行 SQL，你可以找到这个问题的结果。

但似乎这对于 critera builder 是不可能的，即 Hibernate，因为从 Tag 你不能访问连接表。你可以从测验中做到这一点，因为测验有`hasMany[tags:Tag]`

如果您像这样修改它，您可以从 Tag 访问连接表：

```
Tag{
    String tag

    static belongsTo = Quiz
    static hasMany[quizes:Quiz]
  } 
```

您的数据库模型保持不变，但现在 Hibernate 可以从标记转到连接表。你可以试试这个 HQL 查询，它会在测验中给你标签和出现次数：

```
Tag.executeQuery("SELECT t, count(q) FROM Tag t JOIN FETCH t.quizes q GROUP BY t") 
```

我认为仅使用 HQL 会更容易，但我想您也可以使用标准构建器来完成，如果支持的话，也许可以使用 sqlGroupProjection 进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T10:01:56.407

我有一个类似的问题，客户与商店有很多关联。可以使用以下代码使用标准来计算商店。

```
class Customer {
    static hasMany = [stores : Store]
    ... 
}

class Store {
    Customer customer
    ...
}

def c = Store.createCriteria()
def results = c.list {
    customer {
        'in'("customerNumber",['1-1','1-2','1-3'])
    }
    projections {
        sqlGroupProjection 'customer_id, count(customer_id) as numberOfStores', 'customer_id', ['customer_id', 'numberOfStores'], [INTEGER, INTEGER]
    }
} 
```

结果：[[1, 3], [2, 3]]

返回字段是 [customer.id, numberOfStores]

# mysql - 从 1GB 日志文件中拆分最后 1MB

> ID：12739270
> 
> 赞同：5
> 
> 时间：2012-10-05T03:58:44.107
> 
> 标签：mysql

我正在尝试在 Mac 上提取 1GB 日志文件的最后 1MB。当我使用

```
split -b 1m 
```

它创建了很多文件。有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T04:25:18.003

这是命令，如果您还没有找到它。

```
tail -c 1048576 file.log > last1mb.log 
```

# mysql - 如何执行选择查询，而不锁定更新查询

> ID：12739271
> 
> 赞同：0
> 
> 时间：2012-10-05T03:58:48.817
> 
> 标签：mysql, mysql5, mysql-5.5

我有一张表，每隔几秒钟我就会收到大量的选择查询。因此，我的更新查询被锁定了很长时间。有什么方法可以让我的选择查询执行，同时不锁定我的更新查询而不将我的表转换为innoDB。我正在使用 mysql 5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:43:30.903

许多其他问题的重复——例如[这个](https://stackoverflow.com/questions/917640/any-way-to-select-without-causing-locking-in-mysql)问题——关于 MyISAM 的脏读。如果不更换引擎，您无能为力，只能根据某些标准将数据分段到多个表中以减少行数和并发访问数。

而且，实际上，没有人愿意以任意且不必要的复杂方式分割他们的数据。

如果您的所有查询都是按索引列，您可能想看看 [Handler] ( [http://dev.mysql.com/doc/refman/5.0/en/handler.html](http://dev.mysql.com/doc/refman/5.0/en/handler.html) )，但我从未使用过它所以我不能说它对你有多好。

# c# - EF Code First 架构设计 - 用户和联系人

> ID：12739272
> 
> 赞同：0
> 
> 时间：2012-10-05T03:59:00.767
> 
> 标签：c#, entity-framework, ef-code-first, poco, entity-framework-5

我正在尝试提出一个管理人员及其朋友的模型。

*   一个人有 0 对多的朋友
*   朋友也是一个人——虽然不是同一个
*   朋友可以属于一个或多个组

大致来说，架构看起来像这样：

![在此处输入图像描述](../Images/1dfe525009ac0175c7c40662404c906a.png)

我无法弄清楚如何使用 EF Code First 来实现相同的目标。这是我到目前为止所拥有的，但这并没有创建所需的架构

```
public class Person 
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public virtual ICollection<Person> Friends { get; set; } // is this right?
}

public class Friend {
    public long Id { get; set; }
    public long PersonId { get; set; }  // Person whose Friend this guy is
    public virtual ICollection<Group> Groups { get; set; } 

    // other fields 
}

public class Group{
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

有人可以帮我弄清楚这个烂摊子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:33:18.610

您需要自我引用多对多关系，`Person`因为您当前的模型允许每个人有很多朋友，但同时每个人只能与另一个人成为朋友。

尝试这个：

```
public class Person 
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public virtual ICollection<Person> FriendWith { get; set; } 
    public virtual ICollection<Person> FriendOf { get; set; } 
} 
```

你可以添加这个 fluent-API 映射：

```
modelBuilder.Entity<Person>()
            .HasMany(p => p.FriendWith)
            .WithMany(p => p.FriendOf)
            .Map(m => {
                 m.MapLeftKey("PersonId");
                 m.MapRightKey("FriendId");
                 m.ToTable("PersonFriends");
            }); 
```

这可能看起来很奇怪，但 EF 中的关联构建了有向图 => 如果一个人 A 与一个人 B 是朋友，则它被认为是不同的关系，那么如果一个人 B 是一个人 A 的朋友。这些关系之一将被`FriendWith`收集和另一个将被`FriendOf`收集。

# php - 为什么这种比较不起作用？

> ID：12739275
> 
> 赞同：1
> 
> 时间：2012-10-05T04:00:24.183
> 
> 标签：php, javascript, programming-languages

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

`If(0.3-0.2==0.2-0.1)`大多数编程语言都显示结果`false`。所以我想知道哪种语言支持此语句`true`以及为什么大多数语言显示`false`。

`Javascript`在和中测试`PHP`。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:03:57.030

发生这种情况的原因不一定与语言*本身*有关，而是与实现有关。这个问题的答案是，当你写的时候`If(0.3-0.2==0.2-0.1)`，你认为执行的操作是有理数的，这是错误的，它们确实是浮点运算。事实上，在浮点运算中，这*是*错误的！所以答案是：任何默认以任意精确算术解释常量的语言。（例如，如果这些是在 Haskell 中使用[Rational](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aRational)数编写的，那么测试将“有效”。）为了完整性：[Racket](http://racket-lang.org)语言执行此操作。

# java - 虚拟码和扫码的区别

> ID：12739278
> 
> 赞同：4
> 
> 时间：2012-10-05T04:00:28.067
> 
> 标签：java, c++, c, scancodes

`Virtual Key Code`和有什么区别`Scan Code`。[我在这里](http://en.wikipedia.org/wiki/Scancode)阅读了有关扫描码的信息，但我不明白虚拟代码的用途是什么，以及扫描代码与虚拟代码有何不同？

例如在*Java*中：

```
private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {                                       
   int code = evt.getKeyCode(); // WHAT DO I GET ? A Scan code or a Virtual Code..?
} 
```

在*C*中：

```
KBDLLHOOKSTRUCT *kbhook = (KBDLLHOOKSTRUCT *) lParam;
printf("%u\n",kbhook->vkCode); // WHAT DO I GET ? A Scan code or a Virtual Code..? 
```

以上只是示例，我不希望在此基础上阐明概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:27:54.657

扫描代码表示特定键的硬件相关代码，但虚拟代码表示同一键的硬件无关代码和操作系统相关代码。因此，作为程序员，我们应该始终使用虚拟代码...

现在让我们来看看 Java 和 C++。VK_ 关键字是微软定义的，Java 使用自己的 VK_ 关键字......因此它们可能引用相同的字符代码，但它们的值不同。

# jquery - How to extract html element into a variable after data is successfully returned from an ajax response?

> ID：12739282
> 
> 赞同：0
> 
> 时间：2012-10-05T04:00:52.670
> 
> 标签：jquery

How to extract html element into a variable after data is successfully returned from an ajax response?

This is the ajax call containing the following returned data

```
 $.getJSON("test.php",function(data)
   {
        $.each(data, function(key, value)
        {
             alert(value); // this is working but don't know how to extract the strong element from the p element into a variable
        });
   }); 
```

I get the following html data returned from an ajax response

```
 <p id="testResults"><strong id="testNumber">Test 1</strong> passed - date </p> 
```

How do I get the strong html element into a variable for later usage like this....

```
 var testNumberHtml = "<strong id='testNumber'>Test 1</strong>"; 
```

and then put the p element into another variable, like this...

```
 var testResultsHtml =  "<p id="testResults"> passed - date </p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:03:53.043

You might have to do a little trickery to separate those. I would suggest having server side send them separated like this:

```
{p: "<p id="testResults"> passed - date </p>", 
 strong: "<p id="testResults"> passed - date </p>"} 
```

If that is not an option, you can probably do it [like this in javascript](http://jsfiddle.net/ZfXeX/2/):

html

```
<div id="contentResult" style="display:none;"></div>​ 
```

js

```
var jsonResult = '<p id="testResults"><strong id="testNumber">Test 1</strong> passed - date </p>';

var jsonDiv = document.createElement("div");
jsonDiv.innerHTML = jsonResult;
var content = document.getElementById("contentResult");
content.appendChild(jsonDiv);
var strongElement = document.getElementById("testNumber");
var strongCopy = $(strongElement).clone(true);
strongElement.parentNode.removeChild(strongElement);
var testResult = document.getElementById("testResults");
var testCopy = $(testResult).clone(true);
testResult.parentNode.removeChild(testResult);
jsonDiv.parentNode.removeChild(jsonDiv);
console.log(testCopy);
console.log(strongCopy); 
```

# ember.js - 在使用 Ember 的 connectOutlet 初始化控制器后，通过轮询 REST 调用来更新控制器

> ID：12739285
> 
> 赞同：3
> 
> 时间：2012-10-05T04:01:15.563
> 
> 标签：ember.js

只需深入研究 Ember JS 并阅读[http://trek.github.com/](http://trek.github.com/)上关于路由器使用和构建 ember 应用程序的精彩指南。该框架很棒，并且基于一些早期的教程已经取得了长足的进步。

我的问题是，是否有人对更新由路由器和方法初始化的控制器实例有任何强烈的意见/好的示例/最佳实践`connectOutlet`：

```
connectOutlets: function(router,context){           
    router.get('applicationController').connectOutlet(
        'attlist',
        'smartSensor',
        App.SmartSensor.getSensorData(context)
    );
} 
```

SmartSensor 模型的`getSensorData()`函数调用后端 REST API。然后我想定期轮询服务器以查看控制器的属性是否已更新，如果需要更新控制器。我可以想出几种可以强制它的方法，但似乎没有什么干净的。有什么想法还是我想多了？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:40:38.383

我会：

a) 创建一个新`poller`对象并为其提供对`smartSensorController`. 路由器将在您的方法中调用`startPolling()`轮询器，并在离开需要它的状态时调用（假设它在您的应用程序中变得不需要）`connectOutlets``stopPolling()`

...或者...

b) 让`smartSensorController`投票负责。调用 connectOutlet 后，在路由器的适当位置执行相应`router.get('smartSensorController').startPolling()`操作。`stopPolling()`

希望有帮助！

# python - Python过滤器日志文件

> ID：12739286
> 
> 赞同：0
> 
> 时间：2012-10-05T04:01:15.517
> 
> 标签：python, logfiles

我尝试对日志文件使用 python 创建过滤器，例如

```
 Thu Oct  4 23:14:40 2012 [pid 16901] CONNECT: Client "66.249.74.228"
 Thu Oct  4 23:14:40 2012 [pid 16900] [ftp] OK LOGIN: Client "66.249.74.228", anon     password "googlebot@google.com"
 Thu Oct  4 23:17:42 2012 [pid 16902] [ftp] FAIL DOWNLOAD: Client "66.249.74.228",   "/pub/10.5524/100001_101000/100039/Assembly-2011/Pa9a_assembly_config4.scafSeq.gz",  14811136 bytes, 79.99Kbyte/sec
 Fri Oct  5 00:04:13 2012 [pid 25809] CONNECT: Client "66.249.74.228"
 Fri Oct  5 00:04:14 2012 [pid 25808] [ftp] OK LOGIN: Client "66.249.74.228", anon password "googlebot@google.com"
 Fri Oct  5 00:07:16 2012 [pid 25810] [ftp] FAIL DOWNLOAD: Client "66.249.74.228", "/pub/10.5524/100001_101000/100027/Raw_data/PHOlcpDABDWABPE/090715_I80_FC427DJAAXX_L8_PHOlcpDABDWABPE_1.fq.gz", 14811136 bytes, 79.99Kbyte/sec
 Fri Oct  5 00:13:19 2012 [pid 27354] CONNECT: Client "1.202.186.53"
 Fri Oct  5 00:13:19 2012 [pid 27353] [ftp] OK LOGIN: Client "1.202.186.53", anon password "mozilla@example.com"
 Fri Oct  5 00:13:33 2012 [pid 27355] [ftp] FAIL DOWNLOAD: Client "1.202.186.53", "/pub", 0.00Kbyte/sec
 Fri Oct  5 00:26:04 2012 [pid 341] [ftp] OK DOWNLOAD: Client "210.72.156.68", "/pub/10.5524/100001_101000/100030/RNA-Seq/Mgo_2.fq.gz", 1985229528 bytes, 85.87Kbyte/sec
 Fri Oct  5 00:55:45 2012 [pid 2766] CONNECT: Client "157.82.250.217"
 Fri Oct  5 00:55:45 2012 [pid 2765] [ftp] OK LOGIN: Client "157.82.250.217", anon password "mozilla@example.com"
 Fri Oct  5 00:56:05 2012 [pid 2767] [ftp] FAIL DOWNLOAD: Client "157.82.250.217", "/pub/10.5524/100001_101000/100036/Gene_catalogue/Gene_catalogue.pep", 1638400 bytes, 81.81Kbyte/sec
 Fri Oct  5 00:57:27 2012 [pid 3056] CONNECT: Client "157.82.250.217"
 Fri Oct  5 00:57:27 2012 [pid 3055] [ftp] OK LOGIN: Client "157.82.250.217", anon password "-wget@" 
```

日志文件中有一些机器人访问记录，那么如何使用python过滤器来实现真人访问记录。我已经建立了一个过滤器来获取每周记录，所以你能帮我在里面添加它吗？

```
import time
f= open("/opt/CLiMB/Storage1/log/vsftp.log")
def OnlyRecent(line):
    if  time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y")>  time.gmtime(time.time()-(60*60*24*7)): 
        return True
    return False
filename= time.strftime('%Y%m%d')+'.log'
f1= open(filename,'w')
for line in f:
    if OnlyRecent(line):
            print line
            f1.write(line)
f.close()
f1.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:12:44.940

您可以按某些标识符对事件进行分组。我想到了 pid，但您日志中的所有行似乎都有不同的 pid。您可以为每个组使用 IP 地址并在找到时启动新组`CONNECT: Client "[IP]"`，但如果来自某些 IP 地址的客户端一次有多个会话，这将失败。如果没有会话标识符，很难确定哪些线路用作一个会话（组）。

当您对事件进行分组时，对于每个组，您必须检查此事件中是否是机器人留下的“标志”，例如：`"anon password "googlebot@google.com"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:47:00.710

如果您确定使用您的系统的客户端实际上是机器人，通过查看他的密码（**googlebot@google.com**看起来像一个实际的机器人），那么您可以拆分一个字符串并查看第二部分是否包含机器人 e - 邮件：

```
# Add additional robot e-mails here
robot_emails = ["googlebot@google.com"]

def isRobotRecord(line):

    for email in robot_emails:
        if email in line.split("Client")[1]:
            return True
        else:
            return False 
```

# php - PHP 用户认证

> ID：12739291
> 
> 赞同：1
> 
> 时间：2012-10-05T04:01:38.543
> 
> 标签：php, authentication

我从 W3Schools 网站上的几本书中自学了 PHP，并使用了 Stack Overflow 的一大堆帖子。

为了尝试将某些东西付诸实践，我正在尝试制作一个实现用户身份验证系统的小型图片库。用户具有确定他们是否具有读取、读写访问权限或可以管理其他用户等的安全访问权限。我只了解登录和添加用户内容。

我以我的工作为模型，每个人都有一个唯一的员工 ID 和 8 位数的电子邮件 ID。

我知道这是一个很长的镜头，但我只是想知道是否有人能够看一下并告诉我我的代码是否正朝着正确的方向前进？将这样的“现实世界”与书中提供的基本示例放在一起是非常不同的。任何意见和建议将不胜感激......

**登录.php**

```
<!DOCTYPE html>
<?php       
   // Connect to the database
   include('./helpers/db.php');
   include('./helpers/general.php');

   // Check if the user has submitted their details.
   if ($_SERVER['REQUEST_METHOD'] == 'POST') {
       $loginId = htmlspecialchars(($_POST['userId']));
       $loginPass = htmlspecialchars(sha1($_POST['password']));

       // Check if they've submitted blank details.
       if (!checkLoginId($loginId) || (!checkPassword($_POST['password']))) {
           $errorMsg = "Please enter a valid username or password!";
       }

       else {
       // Select the details we want for the session info.
       $stmt = $dbh->prepare("SELECT firstName, lastName, securityLevel FROM 
                            userDetails WHERE registeredNumber = :loginId 
                            AND password = :loginPass" );
       $stmt->bindParam(':loginId', $loginId);
       $stmt->bindParam(':loginPass', $loginPass);
       $stmt->execute();

            // Make sure the user is found, and that there security level is 1 or more.
            if ($stmt->rowCount() > 0) {
                $userDetails = $stmt->fetch();

                if ($userDetails['securityLevel'] < 1) {
                    $errorMsg = "Insufficient access for this user.";
                }

                else {

                // Start a new session and set up the regularly used info.
                session_start();
                $_SESSION['loggedIn'] = 1;
                $_SESSION['userID'] = $loginId;
                $_SESSION['fname'] = $userDetails['firstName'];
                $_SESSION['lname'] = $userDetails['lastName'];
                $_SESSION['security'] = $userDetails['securityLevel'];
                header("Location: ./browser/");
                }
            }

            else {
                $errorMsg = "Invalid User ID or Password!";
            }
       }
   }
?>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<style type="text/css">
       body {font-family:sans-serif;}
       .warning {color:red;font-weight:bold;}
       #login {margin-left:auto;margin-right:auto;width:200px;border-style:solid;border-width:1px;padding:20px;}
</style>
<body>
   <!-- Display the login form -->
    <div id="login">
        <form action="login.php" method="POST">
        <?php 
        if (isset($errorMsg)) {
            echo '<span class="warning">'. $errorMsg . '</span>';
        } 
        ?>
        <p><label for="userId">User Name:</label><br />
            <input type="text" maxlength="5" name="userId"
              title="Enter your User ID:">
        </p>
        <p><label for="pasword">Password:</label><br/>
            <input type="password" maxlength="12" name="password"
              title="Enter your password:"/>
        </p>
        <p><input id="submit" type="submit" name="submit" value="Submit"></p>
        </form>
    </div>
</body> 
```

**数据库.php**

```
<?php
$hostname = 'localhost';
$dbname = 'dam';
$dbuser = 'root';
$dbpass = '****';

// Try and connect to the database and catch the error if it doesn't work.

try 
{
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $dbuser, $dbpass);
    echo "Connected to Database<br/>";
}

catch (PDOException $e) 
{
    print "Error! " . $e->getMessage() . '<br/>';
    die();
}

?> 
```

**通用.php**

```
<?php

// Checks wether the loginID/Registered Number is valid
function checkLoginId($login) {
if ($login == '' || $login == NULL || (!is_numeric($login))) {
    return 0;
}

else return 1;
}

// Checks whether the password is valid
function checkPassword($password) {
if ($password == '' || $password == NULL) {
    return 0;
}

else return 1;
}

function verifyNewUser($userID, $upass, $fname, $lname, $email) {
$hasErrors = 0;
$errorMsg = array();

if ($userID == '' || $userID == NULL || (!is_numeric($userID)) || (strlen($userID) != 5)) {
    $hasErrors++;
    $errorMsg[] = "User ID is either missing, or does not have 5 digits";
}

if ($upass == '' || $upass == NULL || (strlen($upass) <  6)) {
    $hasErrors++;
    $errorMsg[] = "Password is either missing, or does not meet minimum length of six";
}

if ($fname == '' || $fname == NULL || empty($fname)) {
    $hasErrors++;
    $errorMsg[] = "First name is missing.";
}

if ($lname == '' || $lname == NULL || empty($lname)) {
    $hasErrors++;
    $errorMsg[] = "Last name is missing.";
}

if ($email == '' || $email == NULL || empty($email) || (strlen($email) != 8)) {
    $hasErrors++;
    $errorMsg[] = "Check email id, should be 8 characters.";
}

if ($hasErrors == 0) {
    return 1;

}

else {
    echo "Returning with errors<br/>";
    return $errorMsg;
    } 
}
?> 
```

**添加用户.php**

```
include ("./helpers/general.php");
include('./helpers/db.php');

session_start();

// If the user isn't logged in, send them away...
if (!(isset($_SESSION['loggedIn']) && $_SESSION['loggedIn'] != '')) {
header("Location: ./login.php");
exit();
}

// Get the users full name so we can politely tell them to rack off if they 
// don't have sufficient access to add users.
$uname = $_SESSION['fname'] . ' ' . $_SESSION['lname'];

// Check if the user has the security clearence to add a new user:
if ($_SESSION['security'] != 4) {
echo "Sorry $uname, only level 4 administrators can manage users.<br/>";
echo '<a href="./browser/">Back to Browser</a>';
exit();
}

// Check if they have submitted the form and validate the input
if ($_SERVER['REQUEST_METHOD'] == 'POST') {

$userID = htmlspecialchars($_POST['registeredNumber']);
$upass = htmlspecialchars($_POST['password']);
$fname = ucfirst(htmlspecialchars($_POST['firstName']));
$lname = ucfirst(htmlspecialchars($_POST['lastName']));
$email = htmlspecialchars($_POST['emailID']);
$secLev = $_POST['securityLevel'];
$creator = $_SESSION['userID'];

$valid = verifyNewUser($userID, $upass, $fname, $lname, $email);

if ($valid == 1) {
    // Encrypt the password
    $upass = sha1($upass);

    // Create the array to feed the SQL statement.
    $data = array($userID, $upass, $fname, $lname, $email, $secLev, date('Y-m-d H:i:s'), $creator);

    $dbh->beginTransaction();
    $stmt = $dbh->prepare("INSERT INTO userDetails VALUES('', ?, ?, ?, ?, ?, ?, ?, ?)");
    $stmt->execute($data);
    $dbh->commit();

    if ($stmt->rowCount() > 0) {
        echo "Success, new user $fname $lname added!<br/>";
        echo "Email ID: $email<br/>";
        echo "Security Level: $secLev<br/>";
    }
}    

else if (isset($valid)) {
    foreach($valid as $error) {
        echo '<span style="color:red;font-weight:bold">' . $error . "<span><br/>";
    }
}
}

?>

<!DOCTYPE html>
<html>
<head>
    <title>Add A New User</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <form action="adduser.php" method="post">
    <table>
        <tr>
            <td><label for="registeredNumber">Registered Number:</label></td>
            <td><input type="text" maxlength="5" name="registeredNumber"/></td>
        </tr>
        <tr>
            <td><label for="password">Password:</label></td>
            <td><input type="password" maxlength="12" name="password"/></td>
        </tr>
        <tr>
            <td><label for="firstName">First Name:</label></td>
            <td><input type="text" maxlength="20" name="firstName"/></td>
        </tr>
        <tr>
            <td><label for="lastName">Last Name:</label></td>
            <td><input type="text" maxlength="20" name="lastName"/></td>
        </tr>
        <tr>
            <td><label for="emailID">Email ID:</label></td>
            <td><input type="text" maxlength="8" name="emailID"/></td>
        </tr>
        <tr>
            <td><label for="securityLevel">Security Level:</label></td>
            <td>
                <select name="securityLevel">
                    <option value="0" selected="selected">0 - No Access</option>
                    <option value="1">1 - Read Access</option>
                    <option value="2">2 - Read/Write Access</option>
                    <option value="3">3 - Read/Write/Delete Access</option>
                    <option value="4">4 - User Administrator</option>
                </select>
            </td>
        </tr>
    </table>
    <input type="submit" name="submit" value="Submit"/>
    </form>
</body>
 </html> 
```

**注销.php**

```
<?php

// Destroy the session and go to the login screen.
session_start();
session_destroy();
header("Location: login.php");
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T04:07:01.163

您的方法存在严重的安全问题。

最大的问题是您将密码存储在数据库中。您不需要将密码存储在数据库中，这是一个糟糕的主意，可能会成为有人在法庭上起诉您的理由。

有多种加密和散列选项可让您在不将密码存储在数据库中的情况下构建这样的系统，使用其中一种是标准程序。任何不这样做的人都在询问将来的问题（谷歌搜索“PSN 密码泄露”）。

一个不错的选择是 PBKDF2 [http://en.wikipedia.org/wiki/PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)

然而，这只是最明显的问题。还有一些其他的事情你做的并不完美，这确实是你需要学习如何正确做的事情，或者你根本不应该尝试。即使您使用的是 PBKDF2，您仍然需要学习如何正确使用它。

我建议在尝试编写自己的身份验证系统之前，几乎听完 Security Now 的每一集。[http://www.grc.com/securitynow.htm](http://www.grc.com/securitynow.htm)

# c++ - Pthread 数组

> ID：12739293
> 
> 赞同：2
> 
> 时间：2012-10-05T04:02:14.793
> 
> 标签：c++, pthreads

我正在尝试使用 pthread 将两个矩阵相乘。对于矩阵中的每个元素，将创建一个单独的 pthread。在我的程序中，我这样做了，但使用了一个 pthread_t 数组，动态声明为两个矩阵中元素总数的大小。

我遇到的问题是我创建的线程很好，但是作为我的运行器函数中的一个测试，我有一个 cout 语句似乎甚至没有执行一次。为了简洁起见，我删除了从文件中读取两个矩阵并将它们存储到两个数组中的代码部分。它还计算了两个矩阵中元素的数量，并用它来设置 pthread 数组的大小。我已经单独测试了该代码，所以我很确定它与我的问题无关。

这是与我的问题有关的代码：

```
int main(int argc, char **argv)
{
pthread_attr_t attr;
pthread_t *workers;
workers = new pthread_t[numThreads];
int counter = 0;
for(int count1 = 0; count1 < (rows2 * cols2); count1++)
{
    infile2 >> array2[count1];
}
for(int i = 0; i < rows1; i++)
{
    for(int j = 0; j < cols1; j++)
    {
        location *data = new location;
        data->row = i;
        data->col = j;
        pthread_create(&(workers[counter]), &attr, runner, data);
        counter++;
    }
}
for(int i = 0; i < rows2; i++)
{
    for(int j = 0; j < cols2; j++)
    {
        location *data = new location;
        data->row = i;
        data->col = j;
        pthread_create(&(workers[counter]), &attr, runner, data);
        counter++;
    }
}
for(int add = 0; add < 24; add++)
{
    pthread_join(workers[add], NULL);
}
return 0;
} 
```

和我的跑步者功能：

```
void *runner(void *param)
{
    cout << "bob" << endl;
    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:39:27.957

`pthread_attr`您是否在真实代码中的任何地方进行了初始化？如果您不使用它，则不使用`pthread_attr_init()`或将其作为 NULL 传递。看起来`pthread_create`因为“无效参数”而失败。此外，如果您尚未在真实代码中这样做，请检查所有返回代码。Pthread 参数在成功时返回 0，在失败时返回正整数。

# jquery - jQuery .hide() 不会被媒体查询撤销

> ID：12739294
> 
> 赞同：2
> 
> 时间：2012-10-05T04:02:15.620
> 
> 标签：jquery, html, css, media-queries

所以，我有一个在宽显示器上是 2up 的布局，然后是使用媒体查询在较小显示器上的列表视图。除了我在宽屏设置上还有 jQuery .show()/.hide()ing 元素之外，一切都运行良好。**这**也很好用，但是当我调整窗口大小时：jQuery 当前拥有的任何 .hide()d 都**不会**显示，尽管我的媒体查询定义了 display: block; 对于那些尺寸的元素。

有问题的站点位于[此处](http://www.jessekeane.me)，源代码[在 GitHub 上](https://github.com/jarofghosts/jk.me)。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:47:39.467

首先，jQuery 会替换您更改的元素的样式，因此无论您使用之前的 CSS 是什么：

```
$("#myelement").hide(); 
```

它将强制更改 CSS 显示属性，这里有 2 个选项。

1）创建一个隐藏类，这样你就可以为这个类创建一个媒体查询，所以当窗口> 1000px时它会有display:none；但如果它有 1000< 它可以有 display:block; 使用：

```
$("#myElement").addClass("hidden"); 
```

而不是隐藏（）。

[2) 使用绑定到窗口的jQuery http://api.jquery.com/resize/](http://api.jquery.com/resize/)的resize() 事件，这样你可以这样做：

```
$(window).resize(function(){
    if($(window).width()> 1000){
        //Hide or show, or do some pirate stuff
    }else{
        //More pirate stuff
    }
}); 
```

我希望这就是你要找的。

# php - joomla 2.5 中的保守缓存和渐进式缓存有什么区别？

> ID：12739297
> 
> 赞同：24
> 
> 时间：2012-10-05T04:02:36.867
> 
> 标签：php, joomla, joomla2.5, joomla3.0, joomla3.1

在 joomla 的全局配置中，有 2 个缓存是保守的和渐进的，两者有什么区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-05T06:17:49.607

> **保守缓存**是标准的缓存类型。以下是它的工作原理：
> 
> *   访问者访问您网站上的页面。
>     
>     
> *   Joomla 检查其缓存目录中是否有该页面的未过期版本。
>     
>     
> *   如果缓存页面存在（并且没有过期），那么 Joomla 会将其提供给访问者——否则，将创建页面的缓存版本，并且该缓存版本将提供给访问者以及所有其他后续访问者，只要它（“它”是指页面）没有过期。
> 
> 上述场景很典型，也是大多数开发人员实现缓存的方式。
> 
> **渐进式缓存**的工作方式如下：
> 
> *   访问者访问您网站上的页面。
>     
>     
> *   Joomla 检查该访问者是否存在该页面的缓存版本并且它尚未过期。
>     
>     
> *   如果该缓存页面存在，那么它将提供给访问者，否则，Joomla 将为该特定访问者创建缓存页面，然后将其提供给他。
>     
>     
> *   如果另一个访问者（从未访问过该页面）访问该页面，则 Joomla 将不会提供前一个访问者的缓存页面，而是会
>     专门为该用户创建该页面的缓存版本，然后将其提供给他。
>     
>     
> 
> 如您所见，渐进式缓存仅在同一访问者在页面缓存版本的生命周期内访问同一页面时才提供性能改进。在大多数情况下，渐进式缓存会导致比禁用缓存更糟糕的性能损失，因为几乎每次访问，Joomla 都必须处理请求，创建页面的缓存版本，然后将页面提供给访问者（而不仅仅是在禁用缓存的情况下处理请求并提供页面）。哦，别忘了 Joomla 生成的所有缓存文件——如果你有一个高流量的新闻网站（有很多页面），你只能想象你的缓存文件夹中有多少这些文件。
> 
> 现在您可能想知道，渐进式缓存在哪些情况下有用？好吧，假设您有一个视频网站（类似于 youtube）。您希望根据每个访问者的位置和/或浏览器设置和/或安装的插件显示他的自定义页面。因此，对于访问者加载的每个页面，您都可以使用此信息生成该页面的自定义版本并将其缓存。如果访问者再次访问同一页面，则 Joomla 不需要重做工作来生成自定义页面。
> 
> 当然，渐进式缓存在很多场景下确实有用，但我们认为，只有在网站接收到大量访问者并且这些访问者主要是重复访问者时，才应考虑渐进式缓存。在其他情况下使用它会对网站的性能造成重大影响。

[从这里](http://www.itoctopus.com/why-progressive-caching-in-joomla-should-be-avoided-in-most-cases)提取。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-19T08:26:19.710

每个**访问者的唯一缓存**

*   **保守缓存**向您网站的所有访问者显示完全相同的缓存内容。

*   **然而，渐进式缓存**为每个用户唯一地缓存内容。

来自@Tornado 评论提供的[链接](http://www.inmotionhosting.com/support/edu/joomla-25/caching/global-module-caching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T14:45:22.617

渐进式缓存的工作方式与保守式缓存类似，不同之处在于缓冲区是渐进式更新的。

如果您查看 JApplicationCMS 中的渲染功能（其中设置了渐进式缓存），您会发现它不适用于已登录的用户。 [https://github.com/joomla/joomla-cms/blob/staging/libraries/cms/application/cms.php](https://github.com/joomla/joomla-cms/blob/staging/libraries/cms/application/cms.php)

```
if ($this->isSite() && $this->get('caching') && $this->get('caching', 2) == 2 && !JFactory::getUser()->get('id'))
    {
        $caching = true;
    } 
```

此外，如果您跨浏览器或 ips 转储同一页面的缓存 ID，您将获得相同的缓存 ID。

渐进式缓存的典型工作发生在 JCache 的 getWorkarounds 和 setWorkarounds 中。但是请注意，cbuffers 有时会变得非常大，从而导致问题。

# list - 如何在 MongoDB 中查询项目在文档数组中的匹配文档

> ID：12739299
> 
> 赞同：0
> 
> 时间：2012-10-05T04:02:38.880
> 
> 标签：list, mongodb

如果我存储的文档如下所示：

```
doc = {
    'Things' : [ 'one' , 'two' , 'three' ]
    } 
```

如何查询包含`one`in的文档`Things`？

我知道`$in`操作员根据列表查询文档项，但这有点相反。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:23:40.237

使用 MongoDB 的[多键](http://www.mongodb.org/display/DOCS/Multikeys)支持：

> MongoDB 提供了一个有趣的“多键”功能，可以自动索引对象值的数组。
> [...]
> 
> ```
> db.articles.find( { tags: 'april' } )
> {"name" : "Warm Weather" , "author" : "Steve" , 
>  "tags" : ["weather","hot","record","april"] , 
>  "_id"  : "497ce4051ca9ca6d3efca323"} 
> ```

基本上，您不必担心 的数组`Things`，MongoDB 会为您处理；在 MongoDB shell 中这样的事情会起作用：

```
db.your_collection.find({ Things: 'one' }) 
```

# sql - 如何在工作日获取日期？

> ID：12739305
> 
> 赞同：0
> 
> 时间：2012-10-05T04:03:56.150
> 
> 标签：sql, sql-server, date

我想问一下如何在工作日约会

![在此处输入图像描述](../Images/26dd8accc3d0a1e2cee6e8745440ab87.png)

`green is weekday`

`red is sunday`

所以当我在 2012 年输入 sql 命令（如 27）时，它将显示日期 2012-07-2 直到 2012-07-08

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:15:55.967

此查询使用单个参数`@weekno`作为输入并返回该周的 7 天，将星期一作为一周的第一天。WeekNo 的定义**不**遵循 SQL Server 的定义，`DatePart(Week)`因为这取决于 @@Datefirst。这没有。

该`dateadd..`行是返回一年中的第一个星期一的表达式。我从[这里](http://www.sqlservercentral.com/Forums/Topic1161577-391-2.aspx#bm1162727)得到的。它上面的行只是添加了周数和 0-6 来创建 7 天。要验证这对于任何年份都是正确的，`CURRENT_TIMESTAMP`请将查询更改为日期，例如`20180708`. 仅供参考，2018 年 1 月 1 日是星期一。

```
declare @weekno int = 27;
select
    (@weekno-1)*7+v.num+
    dateadd(dd,(datediff(dd,0,dateadd(yy,datediff(yy,0,CURRENT_TIMESTAMP),6))/7)*7,0)
from (values(0),(1),(2),(3),(4),(5),(6))v(num)
order by num

-- results
July, 02 2012 00:00:00+0000
July, 03 2012 00:00:00+0000
July, 04 2012 00:00:00+0000
July, 05 2012 00:00:00+0000
July, 06 2012 00:00:00+0000
July, 07 2012 00:00:00+0000
July, 08 2012 00:00:00+0000 
```

# ruby-on-rails - 使用 RVM 监控 resque

> ID：12739311
> 
> 赞同：3
> 
> 时间：2012-10-05T04:05:13.863
> 
> 标签：ruby-on-rails, ruby, ubuntu, resque, monit

我以前使用以下 Monit 脚本进行了 Monit 监控 resque

```
check process resque_worker_production_QUEUE
  with pidfile /var/tmp/resque_production.pid
  start program = "/usr/bin/env HOME=/home/eg RACK_ENV=production PATH=/usr/local/bin:/usr/local/ruby/bin:/usr/bin:/bin:$PATH /bin/sh -l -c 'cd /apps/eg/production/current; nohup bundle exec rake environment resque:work RAILS_ENV=production QUEUE=mailer VERBOSE=1 PIDFILE=/var/tmp/resque_production.pid & >> log/resque_worker_production_QUEUE.log 2>&1'" as uid eg and gid eg
  stop program = "/bin/sh -c 'cd /apps/eg/production/current && kill -9 $(cat 
```

然后我改变了一些东西，最值得注意的是删除了系统范围的 rvm 安装，我假设在 /usr/local/ruby/bin 安装了 ruby​​。大约在这个时候，monit 无法再启动 resque。也许原因是其他原因，但我认为是这些卸载导致了损坏。

所以我查看了脚本并注意到 /usr/local/ruby/bin 不存在，所以我尝试将其更改为我认为应该指向的内容，因为我的 rvm 中的 ruby​​ 是 /home/ 周围唯一的一个例如/.rvm/rubies/ruby-1.9.3-p194/bin

但这没有用。所以我谷歌了一些，发现这个建议也没有用：

```
check process resque_worker_production_QUEUE
  with pidfile /var/tmp/resque_production.pid
  start program = "/bin/bash -l -c 'cd /apps/eg/production/current; nohup bundle exec rake environment resque:work RAILS_ENV=production QUEUE=mailer VERBOSE=1 PIDFILE=/var/tmp/resque_production.pid & >> log/resque_worker_production_QUEUE.log 2>&1'" as uid eg and gid eg 
```

我在日志中得到的只是：

```
[UTC Oct  5 03:06:38] error    : 'resque_worker_production_QUEUE' process is not running
[UTC Oct  5 03:06:38] info     : 'resque_worker_production_QUEUE' trying to restart
[UTC Oct  5 03:06:38] info     : 'resque_worker_production_QUEUE' start: /bin/bash
[UTC Oct  5 03:07:08] error    : 'resque_worker_production_QUEUE' failed to start 
```

所以我不确定如何进一步调试。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T17:31:46.480

可以肯定的是，你在 bash 文件中有 RVM 加载脚本吗？就像是：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

对我来说，它适用于：

```
check process <%= pid_name %>
  with pidfile <%= pid %>
  start program = "/bin/bash -c -l -i 'cd <%= current_path %> && NEWRELIC_ENABLE=false HOME=/home/<%= resque_user %> RAILS_ENV=<%= rails_env %> QUEUE=<%= queue %> PIDFILE=<%= pid %> BACKGROUND=yes VERBOSE=1 <%= fetch(:bundle_cmd, "bundle") %> exec rake resque:work >> <%= shared_path %>/log/resque.log 2>&1'" as uid <%= resque_user %> and gid <%= resque_group %> with timeout 180 seconds 
```

我看到**-i flag**的差异，不确定是否需要，并且按照**env 变量的****顺序**

 **你**检查过resque日志**吗？（我看到的日志/resque_worker_production_QUEUE.log）

**要尝试的另一件事是在以root**（或另一个监视用户）身份 ssh 到服务器后运行此命令， ***sudo su***还不够，因为您已经加载了 rvm，所以最好从头开始尝试。它可以揭示一些错误。

另请查看此页面[http://rvm.io/integration/cron](http://rvm.io/integration/cron)以获取提示**

# android - 位图/ImageViews android的批量选择

> ID：12739312
> 
> 赞同：3
> 
> 时间：2012-10-05T04:05:13.430
> 
> 标签：android, select, batch-file, imageview, batch-processing

假设我有一个图像网格，你如何在批处理模式下选择图像视图或位图？您如何进行“全选”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:16:26.367

不要在 GridView 中添加 ImageView，而是添加由 ImageView 和 Checkbox 组成的自定义布局。

You can add a OnCheckedChangeListener to the Checkbox, so that whenever an image selected/deselected, you can add/remove the id of that image to an ArrayList.

或者，当您选择一个按钮以对所选项目执行操作时，您可以遍历 GridView 并检查复选框是否被选中。

如果要实现“全选”功能，请遍历 GridView 并将 CheckBox 状态设置为选中。

# ios - iPhone 5 和 iPhone 4S 的独立故事板

> ID：12739313
> 
> 赞同：15
> 
> 时间：2012-10-05T04:05:27.163
> 
> 标签：ios, storyboard, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

如何为 iPhone 5 和 iPhone 4S/4/3G 加载单独的故事板？

我想这样做是因为 iPhone 5 的屏幕尺寸不同。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T06:57:20.923

In your app delegate, you will need to add/replace the following code in `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_4inch" bundle:nil];
} else {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
} 
```

where `ViewController_4inch` is the name of the nib file that is designed for iPhone 5 screen

**UPDATE (STORYBOARD-SPECIFIC ANSWER):**

To load different storyboards on launch, use this code:

```
 CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

    if (iOSDeviceScreenSize.height == 480)
    {   
        // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone35
        UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone35" bundle:nil];

        // Instantiate the initial view controller object from the storyboard
        UIViewController *initialViewController = [iPhone35Storyboard instantiateInitialViewController];

        // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Set the initial view controller to be the root view controller of the window object
        self.window.rootViewController  = initialViewController;

        // Set the window object to be the key window and show it
        [self.window makeKeyAndVisible];
    }

    if (iOSDeviceScreenSize.height == 568)
    {   // iPhone 5 and iPod Touch 5th generation: 4 inch screen
        // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4
        UIStoryboard *iPhone4Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone4" bundle:nil];

        UIViewController *initialViewController = [iPhone4Storyboard instantiateInitialViewController];
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        self.window.rootViewController  = initialViewController;
        [self.window makeKeyAndVisible];
    } 
```

# javascript - 社区在 JavaScript 中的匿名函数声明周围加上一对括号的意图是什么？

> ID：12739314
> 
> 赞同：2
> 
> 时间：2012-10-05T04:05:28.957
> 
> 标签：javascript, closures, anonymous-function, parentheses

这两个代码片段之间的语义差异是什么？

*   *示例 1*

    `var x = (function () {} ());`

*   *示例 2*

    `var x = (function () {} )();`

写作的不同之处在于我们将括号对放在哪里，`()`它告诉 JavaScript 解释器立即执行代码块。从技术上讲，没有区别。如果我可以改写我的问题的措辞并删除“语义”这个词，那么新问题已经在这里得到了回答和详细说明：[https ://stackoverflow.com/a/6645915/1268003](https://stackoverflow.com/a/6645915/1268003)

**但是**，语义部分是我的困境，我希望这个线程能有所启发。由于它是“语义的”，因此没有客观的答案，根据Stackoverflow的[常见问题](https://stackoverflow.com/faq)解答，我的问题无疑处于无效的边缘。但是，我可以争论这个问题的有效性，这可能会在评论中发生。现在，让我们继续。

## 定义问题

绝大多数JavaScript 开发者似乎都在**使用**`example 2`. 实际上，我还没有发现该规则的一个例外（或者我最近在哪里？）。尤其是 jQuery 插件开发人员，编写代码如下：

*   *示例 3*（参见[示例示例](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)）

    `(function ($) {} )(jQuery);`

我的圣经[JavaScript: The Definitive Guide](http://shop.oreilly.com/product/9780596805531.do)根本没有使用这种做法——一次也没有。作者大卫弗拉纳根坚持`example 1`（第 249 页是作者评论这种做法的地方）。

没关系，添加括号都有**一个**且只有一个目的：最大化可读性。**澄清**。那么，请问，澄清什么？

## 我的推理

在 JavaScript 中编写闭包时，我们在函数中定义了一个局部变量，该变量不应被外部代码访问。在大多数情况下，由于上下文，我们的函数是一个匿名函数，没有绑定到标识符。像这样：

*   *示例 4*

    `function () { var local = "Local variable!"; }`

同样由于上下文和通常的做法，我们希望立即执行该代码片段。所以我们加上几个括号。这将告诉 JavaScript 解释器运行该函数：

*   *示例 5*

    `function () {} ()`

为了在代码中澄清这一点，最佳实践是添加一对括号，这也澄清了闭包：

*   *例 6*

    `(function () {} ())`

这是一个精确的复制品`example 1`。因此，我的推理给出了`example 1`我们“应该”编写代码的方式。每当我选择使用`example 2`时，我只澄清闭包的使用，而不是我们的匿名函数立即执行的事实。但是通过将我们的澄清括号放在整个代码片段的外部的最小努力，我们可以抓住两者。

*是的，我可以批评我的推理*。在`example 3`中，我觉得“嘿，外部引用被复制到内部的别名”很有吸引力。替代方案：

*   *例 7*

    `(function ($) {} (jQuery))`

..在这方面不太清楚。但是，`example 2`不使用这种按值传递的技术。就我个人而言，在我写闭包的大部分时间里，我不需要传递任何东西。而且，如果我们被允许成为原教旨主义者，jQuery 插件实践永远不会明确我们匿名函数的立即执行。

## 示例 1 用户

如果我的推理成立，那么为什么整个社区都在使用`example 1`？他们的唯一目的是只做两个澄清之一吗？也许只是也许，他们甚至没有目的，而是遵循我们可能无法解释的纯粹传统的引导？我还没有写过 jQuery 插件，也没有使用过，`example 2`因为我的职业生涯开始于阅读圣经。但是，如果您是众多使用`example 1`并有理由的人之一，请分享=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:26:40.197

**为什么？可读性**

由于“可读性”的口头禅，许多事情都是用代码完成的。它在编写代码时是无价的。您的代码应该很容易被其他开发人员继承。

**你忘了一个**

或者说是零。

*   *示例 0*

    ```
    var x = function(){ }(); 
    ```

    这就是人们不使用它的原因：它很难阅读。通常这些闭包会变得非常大，非常快。有人不应该走到闭包的*最后*来确定它只是一个名为 x 的变量，没有自执行 - 例如`var x = function(){};`为此，开发人员用括号包装他们的自执行闭包: `var selfExecuting = (function(){})();`，甚至简单地`(function(){})();`说从第 1 行可以明显看出这是自动执行的。这也意味着如果你遇到这样的函数：`var notExecuting = function(){};`你通常可以在第 1 行假设它不是自执行的。

    编码时可读性非常重要。对维护很重要。这对于一致性很重要。这对文档很重要。

    尽管请记住，开发代码不应该是生产代码。

# logic - 这张卡诺图是如何组织的？

> ID：12739316
> 
> 赞同：0
> 
> 时间：2012-10-05T04:06:26.577
> 
> 标签：logic, digital-logic, karnaugh-map

一个 K-map 生成器为我生成了这个！[卡诺地图](http://i.stack.imgur.com/OVJFH.png)

我一直在试图弄清楚这些价值观是如何相互匹配的。例如。表上的值 7 似乎由 01101 标识，而不是 7，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:26:43.773

K-map 中的行和列元素与引用单元格中的值没有数字对应关系；它们具有*逻辑*对应关系，其中单元格或列标题的每个数字代表特定命题的二进制值。卡诺图的[Wikipedia 页面](http://en.wikipedia.org/wiki/Karnaugh_map)为如何将逻辑真值表分解为 K-map 提供了极好的参考。

在您的原始示例中，您似乎有五个真值，它们组合在一起产生一个输出值：`01101 => 7`.

将数字中的每个二进制位置视为单独的值而不是整数：

```
01101
ABCDE 
```

您可以将其分解为以下逻辑：

`If((Not A) and B and C and (not D) and E) then 7.`

# python - 如何将项目添加到 collection.Counter？然后将它们分类到 ASC 中？

> ID：12739318
> 
> 赞同：1
> 
> 时间：2012-10-05T04:06:40.870
> 
> 标签：python, collections, preprocessor, normalization, spam-prevention

目前我正在尝试[`lingspam dataset`](http://www.aueb.gr/users/ion/)通过计算 600 个文件（400 封电子邮件和 200 封垃圾邮件）中单词的出现来进行处理。我已经用[`Porter Stemmer`Aglorithm](https://stackoverflow.com/questions/12683932/porter-stemmer-algorithm-not-returning-the-expected-output-when-modified-into-d)使每个单词都通用，我还希望我的结果在每个文件中都标准化，以便进一步处理。但我不确定我如何能做到这一点..

**迄今为止的资源**

*   [8.3\. 集合 - 容器数据类型](http://docs.python.org/release/3.1.5/library/collections.html#collections.Counter)
*   [如何在 python 中计算与 collections.Counter() 的共现？](https://stackoverflow.com/questions/11883194/how-to-count-co-ocurrences-with-collections-counter-in-python)
*   [词袋模型](http://en.wikipedia.org/wiki/Bag-of-words_model)

为了获得下面的输出，我需要能够按升序添加文件中可能不存在的项目。

```
printing from ./../lingspam_results/spmsgb164.txt.out
[('money', 0, 'univers', 0,  'sales', 0)]
printing from ./../lingspam_results/spmsgb166.txt.out
[('money', 2, 'univers', 0,  'sales', 0)]
printing from ./../lingspam_results/spmsgb167.txt.out
[('money', 0, 'univers', 0,  'sales', 1)] 
```

然后我计划将其转换为`vectors`使用`numpy`.

```
[0,0,0]
[2,0,0]
[0,0,0] 
```

代替..

```
printing from ./../lingspam_results/spmsgb165.txt.out
[]
printing from ./../lingspam_results/spmsgb166.txt.out
[('univers', 2)]
printing from ./../lingspam_results/spmsgb167.txt.out
[('sale', 1)] 
```

如何将`Counter`模块中的结果标准化为`Ascending Order`（同时还将项目添加到我的可能不存在的计数器结果中`search_list`）？我已经在下面尝试了一些东西，它只是从每个文本文件中读取并基于`search_list`.

```
import numpy as np, os
from collections import Counter

def parse_bag(directory, search_list):
    words = []
    for (dirpath, dirnames, filenames) in os.walk(directory):
        for f in filenames:
            path = directory + "/" + f
            count_words(path, search_list)
    return;

def count_words(filename, search_list):
    textwords = open(filename, 'r').read().split()
    filteredwords = [t for t in textwords if t in search_list]
    wordfreq = Counter(filteredwords).most_common(5)
    print "printing from " + filename
    print wordfreq

search_list = ['sale', 'univers', 'money']
parse_bag("./../lingspam_results", search_list) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:39:46.040

从您的问题来看，听起来您的要求是您希望在所有文件中以一致的顺序排列相同的单词，并进行计数。这应该为你做：

```
def count_words(filename, search_list):
    textwords = open(filename, 'r').read().split()
    filteredwords = [t for t in textwords if t in search_list]
    counter = Counter(filteredwords)
    for w in search_list:
        counter[w] += 0        # ensure exists
    wordfreq = sorted(counter.items())
    print "printing from " + filename
    print wordfreq

search_list = ['sale', 'univers', 'money'] 
```

样本输出：

```
printing from ./../lingspam_results/spmsgb164.txt.out
[('money', 0), ('sale', 0), ('univers', 0)]
printing from ./../lingspam_results/spmsgb166.txt.out
[('money', 2), ('sale', 0), ('univers', 0)]
printing from ./../lingspam_results/spmsgb167.txt.out
[('money', 0), ('sale', 1), ('univers', 0)] 
```

我认为您根本不想使用`most_common`，因为您特别不希望每个文件的内容影响排序或列表长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:57:35.973

jsbueno 和 Mu Mind 的结合

```
def count_words_SO(filename, search_list):
    textwords = open(filename, 'r').read().split()
    filteredwords = [t for t in textwords if t in search_list]
    counter = Counter(filteredwords)
    for w in search_list:
        counter[w] += 0        # ensure exists
    wordfreq = number_parse(counter)
    print "printing from " + filename
    print wordfreq

def number_parse(counter, n=5):
     freq = sorted (((value ,item) for item, value in counter.viewitems() ),    reverse=True)
     return [item[0] for item in freq[:n]] 
```

出来了，只需多做一点工作，我就准备好了，`Neurel Network`谢谢大家:)

```
printing from ./../lingspam_results/spmsgb19.txt.out
[0, 0, 0]
printing from ./../lingspam_results/spmsgb2.txt.out
[4, 0, 0]
printing from ./../lingspam_results/spmsgb20.txt.out
[10, 0, 0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T04:54:50.960

您在示例中使用的调用`Counter(filteredwords)`可以计算所有单词，就像您打算的那样 - 它不会给您最常用的单词 - 即没有“most_common”方法 - 为此您必须重新处理所有计数器中的项目，以便具有包含（频率，单词）的元组序列，并对其进行排序：

```
def most_common(counter, n=5):
     freq = sorted (((value ,item) for item, value in counter.viewitems() ), reverse=True)
     return [item[1] for item in freq[:n]] 
```

# websphere - Websphere 中的“A”日志指示器是什么意思？

> ID：12739322
> 
> 赞同：-1
> 
> 时间：2012-10-05T04:07:25.280
> 
> 标签：websphere

IBM Websphere Process Server 中的“A”日志记录指示器是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:36:41.760

下面是 WebSphere 日志和跟踪中的消息类型列表；

*   `1,2,3`追踪信息：fine, finer, best
*   `￼A`审计 ￼</li>
*   `W`警告
*   `￼Z`无法识别类型
*   ￼<code>E 错误
*   ￼<code>D 细节 ￼</li>
*   `C`配置
*   ￼<code>F 致命（退出进程）
*   ￼<code>I 信息
*   `￼O`程序输出
*   ￼<code>R 程序输出 (sys.err)

# c++ - GCC 没有链接库。它可以编译，但生成的库缺少必要的引用

> ID：12739324
> 
> 赞同：3
> 
> 时间：2012-10-05T04:07:40.843
> 
> 标签：c++, linux, gcc, linker, dynamic-linking

> **可能重复：**
> [GCC C++ 链接器错误：未定义对“xxx 的 vtable”的引用，未定义对“ClassName::ClassName()”的引用](https://stackoverflow.com/questions/1095298/gcc-c-linker-errors-undefined-reference-to-vtable-for-xxx-undefined-refere)

好的，所以我正在尝试编译一个由 2 个对象文件和一个静态库组成的共享对象库。我正在链接到库，但只有 Lua 实际用于 MY 对象，其他对象用于 .a 文件。

这是 IDE 生成的链接步骤：

```
g++ -shared  obj/Debug/GL/Window/Window.o obj/Debug/main.o   -o bin/Debug/libLOOGL.so -lX11 -lXrandr -lGL -llua5.2  /home/matt/Desktop/Development/LOOGL/lib/bin/OOGL.a 
```

这是 ldd 对结果的输出：

```
ldd loogl.so
  linux-vdso.so.1 =>  (0x00007fff30b3e000)
  liblua5.2.so.0 => /usr/lib/x86_64-linux-gnu/liblua5.2.so.0 (0x00007f521b53e000)
  libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f521b23e000)
  libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f521b027000)
  libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f521ac68000)
  libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f521a96e000)
  libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f521a769000)
  /lib64/ld-linux-x86-64.so.2 (0x00007f521b991000) 
```

必要的库没有链接，结果不会运行，它缺少引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:17:19.143

链接行上库的顺序很重要：

尝试：

```
g++ -shared  obj/Debug/GL/Window/Window.o obj/Debug/main.o   -o bin/Debug/libLOOGL.so /home/matt/Desktop/Development/LOOGL/lib/bin/OOGL.a -lX11 -lXrandr -lGL -llua5.2 
```

# postgresql - POSTGRESQL 9.1 备份和恢复到 8.4

> ID：12739326
> 
> 赞同：4
> 
> 时间：2012-10-05T04:07:46.290
> 
> 标签：postgresql, backup, restore, backwards-compatibility

我正在尝试将我在本地开发的数据库上传到我们的开发服务器中。

我在我的机器上安装了 PostgreSQL 9.1，开发服务器使用 8.4。

尝试使用 9.1 创建的转储文件将数据库还原到 8.4 时，出现错误：

```
pg_restore: [archiver (db)] could not execute query: ERROR:  syntax error at or near "EXTENSION"
LINE 1: CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalo... 
```

一项快速研究告诉我，在 9.1 之前不存在“扩展”。

我不确定我是否应该在 pg_dump 中寻找一个忽略“扩展”的选项，因为我尝试上传的数据库依赖于 PostGIS 扩展来获取大部分数据。

虽然升级开发服务器并在开发服务器中安装 PostGIS 是一种选择，但我想知道一条不同的路线，其中我不需要在服务器上编辑任何内容，同时维护我开发的数据库的功能。

当然，欢迎使用其他解决方法，我将数据库上传到服务器的唯一目的是减少我在需要为我们的团队部署某些东西时必须对我的项目进行的重新配置量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-13T08:23:02.817

这是一篇旧帖子，但我今天遇到了同样的问题，并且有一种更好更可靠的方法可以将 PG 9.1 db 加载到 PG 8.4 服务器中。Craig 提出的方法在目标机器上会失败，因为不会创建 PLPGSQL 语言。

```
pg_dump -Upostgres -hlocalhost > 9.1.db 
```

替换这一行

```
CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog; 
```

用这条线

```
CREATE LANGUAGE plpgsql; 
```

删除此行或将其注释掉

```
COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language'; 
```

您可以使用 sed 进行更改

由于应用程序依赖性，通常无法升级 8.4 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:13:12.687

向后移植数据库可能是痛苦和困难的。

您可以尝试使用 8.4`pg_dump`来转储它，但它可能会失败。

您可能希望从`--schema-only`转储文本文件中提取表和函数定义，手动将它们加载到旧数据库中，然后执行`pg_dump --data-only`并恢复以导入数据。

在那之后，如果您还要继续在您的机器上工作，请安装 PostgreSQL 8.4 并将其用于进一步的开发，这样您就不会引入更多的不兼容性，因此很容易移动转储。

在你的位置，我只是将过时的目标服务器升级到 9.1。

# php - %20 在 $_GET 数组中转换为 Unerscore。还有其他这样的角色吗？

> ID：12739329
> 
> 赞同：0
> 
> 时间：2012-10-05T04:07:52.520
> 
> 标签：php, forms, url, get, validation

我正在尝试创建一个允许用户定义自己的自定义查询键的表单，当我测试表单的验证功能时，我注意到`%20`在 url 查询键被转换为 $_GET 数组中的下划线.

```
$key = 'a b';
$key = rawurlencode($key);
$value = 'value';

print_r($_GET); // output: Array ( [a_b] => value )

echo '<p>key:' . $key . '</p>';
echo '<p>value:' . $value . '</p>';
echo '<p><a href="' . $_SERVER["REQUEST_URI"] . '?' . $key . '=' . $value . '">test</a></p>'; 
```

是否有其他字符转换不规则？我不确定“不规则”在这里是不是正确的词，因为这种行为可能有一个规则，但我没想到会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:18:34.907

PHP 用下划线替换某些字符，因为它们在变量名中是非法的。尽管它们在数组键中是合法的，但早期版本的 PHP 会将表单变量直接放在变量中（即`$a_b`；参见[Register Globals](http://php.net/manual/en/security.globals.php)），因此进行了这种转换。这是用空格、点、开方括号和控制字符完成的介于 128 和 159 之间。

这仅适用于名称本身，而不适用于例如任何数组键参数（即`http://example.com/foo.php?a[b.%20c]=1`），因为任何字符在数组键中都是合法的。（请注意，数组参数特性本身意味着在某些情况下，方括号不会被`_`上面所暗示的那样替换 - 该示例将给出`$_GET['a']['b. c'] == 1`。）

来源：[http ://ca.php.net/variables.external](http://ca.php.net/variables.external)

相关问题：[让 PHP 停止替换 '.' $_GET 或 $_POST 数组中的字符？](https://stackoverflow.com/questions/68651/can-i-get-php-to-stop-replacing-characters-in-get-or-post-arrays)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T06:03:09.107

此函数将修复这些字符串。

```
$key = 'a b.c[d';
$key = fix_key($key);
$value = 'value';
$_GET[$key] = $value;
print_r($_GET);
echo '<p><a href="' . $_SERVER["REQUEST_URI"] . '?' . $key . '=' . $value . '">test</a></p>';

function fix_key($strKey) {
    $search = array(chr(32), chr(46), chr(91));
    for ($i=128; $i <= 159; $i++) array_push($search, chr($i));
    return str_replace ( $search , '_', $strKey);
} 
```

# java - SWIG 接口通过函数参数在 Java 中接收不透明的结构引用

> ID：12739331
> 
> 赞同：7
> 
> 时间：2012-10-05T04:08:34.150
> 
> 标签：java, swig, spotify

我正在尝试使用 SWIG 来使用适用于 Android 的 Spotify API (libspotify)： [https ://developer.spotify.com/technologies/libspotify/](https://developer.spotify.com/technologies/libspotify/)

我在定义 SWIG 接口文件以便能够成功调用以下本机 C 函数时遇到问题：

```
sp_error sp_session_create(const sp_session_config * config, sp_session ** sess); 
```

在 C 中会这样调用：

```
//config struct defined previously
sp_session *sess;
sp_session_create(&config, &sess); 
```

但在 Java 中，我需要这样称呼它：

```
//config object defined previously
sp_session javaSess = new sp_session();
sp_session_create(config, javaSess); 
```

sp_session 是一个不透明的结构，仅在 libspotify 的 API.h 文件中定义为：

```
typedef struct sp_session sp_session; 
```

我期待 libspotify 库创建它并给我一个参考。我唯一需要该引用的就是传递给 API 中的其他函数。

我相信答案在 SWIG 界面和类型映射中，但我在尝试应用我在文档中[找到的](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Java_using_typemaps_return_arguments)[示例时没有成功。](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Java_struct_pointer_pointer)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T09:33:54.400

At the most basic level you can make code that works using the [cpointer.i](http://www.swig.org/Doc2.0/Library.html#Library_nn4) part of the SWIG library to allow a direct "pointer to pointer" object to be created in Java.

For example given the header file:

```
#include <stdlib.h>

typedef struct sp_session sp_session;

typedef struct {} sp_session_config;

typedef int sp_error;

inline sp_error sp_session_create(const sp_session_config *config, sp_session **sess) {
  // Just for testing, would most likely be internal to the library somewhere
  *sess = malloc(1);
  (void)config;
  return sess != NULL;
}

// Another thing that takes just a pointer
inline void do_something(sp_session *sess) {} 
```

You can wrap it with:

```
%module spotify

%{
#include "test.h"
%}

%include "test.h"

%include <cpointer.i>

%pointer_functions(sp_session *, SessionHandle) 
```

Which then allows us to write something like:

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    SWIGTYPE_p_p_sp_session session = spotify.new_SessionHandle();
    spotify.sp_session_create(new sp_session_config(), session);
    spotify.do_something(spotify.SessionHandle_value(session));
  }
} 
```

in Java. We use `SessionHandle_value()` to derference the double pointer and `new_SessionHandle()` to create a double pointer object for us. (There are other functions for working with the double pointer object).

* * *

The above works and is very simple to wrap, but it's hardly "intuitive" for a Java programmer and ideally we'd expose the whole library in something that looks more like Java.

A Java programmer would expect that the new session handle object would be returned from the creator function and that an exception would be used to indicate failures. We can make SWIG generate that interface with a few typemaps and some careful use of `%exception`, by changing the interface file somewhat:

```
%module spotify

%{
#include "test.h"
%}

// 1:
%nodefaultctor sp_session;
%nodefaultdtor sp_session;
struct sp_session {};

// 2:
%typemap(in,numinputs=0) sp_session ** (sp_session *tptr) {
  $1 = &tptr;
}

// 3:
%typemap(jstype) sp_error sp_session_create "$typemap(jstype,sp_session*)"
%typemap(jtype) sp_error sp_session_create "$typemap(jtype,sp_session*)"
%typemap(jni) sp_error sp_session_create "$typemap(jni,sp_session*)";
%typemap(javaout) sp_error sp_session_create "$typemap(javaout,sp_session*)";

// 4:
%typemap(out) sp_error sp_session_create ""
%typemap(argout) sp_session ** {
  *(sp_session **)&$result = *$1;
}

// 5:
%javaexception("SpotifyException") sp_session_create {
  $action
  if (!result) {
    jclass clazz = JCALL1(FindClass, jenv, "SpotifyException");
    JCALL2(ThrowNew, jenv, clazz, "Failure creating session");
    return $null;
  }
}

%include "test.h" 
```

The numbered comments correspond with these points:

1.  We want the `sp_session` opaque type to map to a "nice" Java type but not allow creation/deletion of the type directly within Java. (If there is a `sp_session_destroy` function to could arrange for that to get automatically called when the Java object is destroyed if that's desirable using the javadestruct typemap). The [fake, empty definition combined with `%nodefaultctor` and `%nodefaultdtor`](https://stackoverflow.com/a/10008434/168175) arranges for this.
2.  For the input parameter which we're making into a return instead we need to hide it from the Java interface (using `numinputs=0`) and then supply something to take its place in the generated C part of the interface.
3.  To return the `sp_session` instead of the error code we need to adjust the typemaps for the return from the function - the simplest way to do that is to substitute them for the typemaps that would have been used if the function was declared as returning a `sp_session` using `$typemap`.
4.  As far as the output is concerned we don't want to do anything where it would usually be marshaled, but we do want to return the pointer we used as a placeholder for the extra input parameter in 2.
5.  Finally we want to enclose the whole call to `sp_session_create` in some code that will check the real return value and map that to a Java exception should it indicate failure. I wrote the following exception class by hand for that as well:

    ```
    public class SpotifyException extends Exception {
      public SpotifyException(String reason) {
        super(reason);
      }
    } 
    ```

Having done all this work we are now in a position to use that in Java code as follows:

```
public class run {
  public static void main(String[] argv) throws SpotifyException {
    System.loadLibrary("test");
    sp_session handle = spotify.sp_session_create(new sp_session_config());
    spotify.do_something(handle);    
  }
} 
```

Which is vastly simpler and more intuitive than the original but simpler to write interface. My inclination would be to use the [advanced renaming feature](http://www.swig.org/Doc2.0/SWIG.html#SWIG_advanced_renaming) to make the type names "look more Java" also.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:35:24.803

You should inform swig about your `typedef` declaration. In order to do that you should edit your interface file with :

```
typedef struct sp_session sp_session; 
```

But be careful to inform SWIG about your typedef before it sees any sp_session (I mean before including API.h). I had the same problem with typedef recognition. Maybe this [link](https://stackoverflow.com/questions/12257437/swig-typedef-recognition) will help.

# .htaccess - htaccess 如何摆脱可选的最后一个目录列表分隔符？

> ID：12739335
> 
> 赞同：0
> 
> 时间：2012-10-05T04:09:02.493
> 
> 标签：.htaccess

例如，我正在使用 .htaccess 重写我的网址

```
RewriteRule ^jobs/([^/]+)$ jobs.php?job_id=$1  [QSA,L] 
```

这适用于

```
http://www.xxx.com/jobs/980 
```

但这失败了

```
http://www.xxx.com/jobs/980/ 
```

有没有办法在一行中写这个而不用再次用反斜杠重做相同的模式行......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:02:56.467

尝试：

```
RewriteRule ^jobs/([^/]+)/?$ jobs.php?job_id=$1  [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:37:10.663

也许试试这个：

```
RewriteRule ^jobs/(.*)/?$ jobs.php?job_id=$1 
```

# logic - 在 LC3 中使用迭代右移

> ID：12739337
> 
> 赞同：0
> 
> 时间：2012-10-05T04:09:13.560
> 
> 标签：logic, bit-manipulation, mask, lc3

所以我正在开发 LC3 中的一个程序，但我遇到了屏蔽问题。我可以创建一个适当长度的所有 1 的掩码，很好地将所有内容转移到适当的字段，但是一旦我完成 AND 比较，我就无法将事情转移回右侧。你如何在 LC3 中右移？我在迭代比较中看到了一些东西，但我不知道如何比较不同位置的位，并且要在相同位置比较它们，无论如何我最终都必须向右移动一个。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:22:54.793

要模拟右移，您只需要制作两个掩码，一个用于源位，一个用于目标位：

```
src_mask=0x04;  // read from bit position 2 
dst_mask=0x01;  // write to bit position 0

while(src) {  // or while src_mask, because that too will eventually go to zero
   if (src & src_mask) dst+=dst_mask;  // or dst|=dst_mask
   src &= (~src_mask);
   dst_mask=dst_mask+dst_mask;
   src_mask=src_mask+src_mask;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:23:45.270

在这种情况下，您可能根本不需要右移 - 只需在左移之前保存起始字段，然后再从内存中恢复它。

# php - PHP 特殊字符解析错误

> ID：12739341
> 
> 赞同：0
> 
> 时间：2012-10-05T04:09:46.043
> 
> 标签：php, mysql, xml, unicode, encoding

我正在解析 XML 并将其放入 MySQL。现在 MySQL 显示一些特定记录插入的以下错误：

```
SQLSTATE[HY000]: General error: 1366 Incorrect string value: '\xEAm-Kh\xEA...' 
```

当我检查 XML 中的数据时，它显示为`iêm-Khê`
所以特殊字符`ê`正在转换为`xEA`
它是什么？

**我怎样才能解决维护并将其原始字符放入数据库的问题？**

仅供参考，这里有一些信息：

*   我的整个 MySQL DB 本身正在使用`latin1_swedish_ci`
*   但是那个 TABLE & COLUMN 正在使用`utf8_general_ci`
*   ** 当我直接手动将该值复制/粘贴`iêm-Khê`到 MySQL 记录中时，它会被保存。（我的意思是，MySQL 正在接受特殊字符。）所以我认为问题出在编码方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:14:29.220

经过一些额外的研究，我遇到了两种可能的解决方案：

```
- the first option is to use php's utf8_encode() function.
- the second option uses some code with the PDO using set names (though there seemed to be some discussion as to whether or not this worked for everyone.

$handle = new PDO("mysql:host=localhost;dbname=dbname",
    'username', 'password', 
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

以下链接有一些其他有用的信息： [见这里](http://akrabat.com/php/utf8-php-and-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:19:07.957

您应该定义`UTF-8 charset`mysql DB，通过`default`它曾经是`latin charset`，我们可以定义`utf-8`连同`table definition`或在`database`创建时，

到表

```
 create table `my_table` (.....

  .... ) DEFAULT CHARSET=utf8; 
```

到数据库

```
CREATE DATABASE mydb  DEFAULT CHARACTER SET utf8 
```

如果我穿了，请纠正我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:13:08.163

您需要将数据库的字符集设置为`UTF-8`.

***命令：***

```
ALTER DATABASE db_name CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

***对于更改列：***

```
ALTER TABLE [table_name] MODIFY
[column_name] [data_type]
CHARACTER SET utf8
COLLATE utf8_general_ci; 
```

# image - 在移动设备上使用的最佳图像尺寸是多少？(HTML)

> ID：12739342
> 
> 赞同：1
> 
> 时间：2012-10-05T04:09:59.153
> 
> 标签：image, mobile, device

我会为此使用谷歌，但它会显示过时的信息，这不是我想要的。

根据 2012 年的统计数据，手机和平板电脑已经改变了我们与网站互动的方式。因此，我计划完全移动，我想知道我应该实施的“标准”图像尺寸（仅用于移动显示），这样它们就不会减慢蜂窝连接和浏览会话。当然......他们也不应该看起来很糟糕

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T12:52:56.010

40 kb 似乎是最好的图像大小，您原始网站中使用的所有图像都应该从原始大小减小到这个大小。因为大多数移动设备将不兼容任何比这更大的图像尺寸。

# android - 将专辑文件夹显示为堆栈或甲板android

> ID：12739344
> 
> 赞同：0
> 
> 时间：2012-10-05T04:10:25.563
> 
> 标签：android, android-layout, html, android-image, categorization

我想对我设备上的图像进行分类并将其显示在不同的相册中，这些相册看起来像一堆或一副图像。这是默认图库或 QuickPic 等应用程序中非常常见的功能。

这是如何实现的？这是一个简单的努力吗？这项工作预计需要多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:21:10.320

您可以从设备中获取图像并将它们放入不同的文件夹中。您的应用逻辑会将每个文件夹识别为专辑。然后将创建一个布局，将每个专辑中的前 3 或 5 个随机图像显示为一副纸​​牌（为此使用相对布局将图像放在另一个之上，并使用可以使用变换函数来旋转如果您也愿意，可以稍微使用它们）。对于每个相册，您将拥有一副卡片，当用户选择相册时，您将启动另一个活动，该活动将是您的自定义 android 图库，用于显示特定相册中的图像。这是有关如何构建这些自定义画廊之一的好教程：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-displaying-images-with-an-enhanced-gallery/](http://mobile.tutsplus.com/tutorials/android/android-sdk-displaying-images-with-an-enhanced-gallery/)

至于时间要求，这真的取决于你的技能水平。我想它可以从大约一周到 2 个月或更长时间不等。一旦您掌握了 android 文件系统的基础知识、一些图形和操作图库，这并不难做到。

希望这可以帮助 ：-）

# c# - 如何解析枚举逻辑和？

> ID：12739346
> 
> 赞同：2
> 
> 时间：2012-10-05T04:10:32.793
> 
> 标签：c#, enums

说，我们有一个字体：

```
 Font f = new Font("Arial", 10, FontStyle.Italic | FontStyle.Bold); 
```

如何通过它的风格？

```
 foreach (FontStyle style in Enum.GetValues(typeof(FontStyle))
                                        .OfType<FontStyle>()
                                        .Where(fs => f.Style.HasFlag(fs)))
        {
            Console.WriteLine(style);
        } 
```

这是一种方式。但

1.  它也返回`FontStyle.Regular`。为什么？
2.  有没有更好的方法来完成任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:29:21.900

从[方法的](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)[文档`HasFlag`](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)：

> 如果 flag 的基础值为零，则该方法返回 true。如果此行为不可取，您可以使用 Equals 方法测试是否与零相等，并仅在 flag 的基础值非零时调用 HasFlag

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:51:59.417

为什么你想要每种风格？如果您只想打印它，我建议`style.ToString("F")`。

[FontStyle 枚举](http://msdn.microsoft.com/en-us/library/system.drawing.fontstyle.aspx)足够短，我只需对每个案例进行编程，而不是使用 LINQ 和反射。他们不太可能会添加另一种样式，从而导致需要更新此代码。

```
if  (f.Style.HasFlag(FontStyle.Bold)) { Console.WriteLine(style); }
if  (f.Style.HasFlag(FontStyle.Italic)) { Console.WriteLine(style); }
if  (f.Style.HasFlag(FontStyle.Underline)) { Console.WriteLine(style); }
if  (f.Style.HasFlag(FontStyle.Strikeout)) { Console.WriteLine(style); } 
```

否则更新你的 where 语句：

```
.Where(fs => fs != FontStyle.Regular && f.Style.HasFlag(fs))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T04:29:26.317

`FontStyle.Regular == 0`. 所以它总是“存在”在这个枚举类型的值中，因为任何`&`0（二进制与）都是 0。

```
value &  FontStyle.Regular == FontStyle.Regular 
```

根据您的需要，您可以明确忽略`Flags`枚举的 0 值或`if`对样式进行显式处理。

# objective-c - 在 UIScrollView 缩放期间保持子视图不转换

> ID：12739348
> 
> 赞同：2
> 
> 时间：2012-10-05T04:10:59.637
> 
> 标签：objective-c, uiscrollview, zooming

我`UIScrollView`的内容视图上有很多不同的子视图（包括一些标签）。在内容视图的缩放期间，所有这些不同的子视图都按预期进行缩放。但是我希望`UILabel`子视图的文本没有改变。我接下来尝试了：

```
-(void)scrollViewDidZoom:(UIScrollView *)scrollView  {
   // ...
   UILabel* label = (UILabel*)[scrollView viewWithTag:labelTag];
   [label setTransform:CGAffineTransformMakeScale(1/scrollView.zoomScale, 1/scrollView.zoomScale)];  
} 
```

尽管结果文本看起来很难看（尤其是当比例因子很大时），即使我`[label setContentScaleFactor:scaleFactor]`在`scrollViewDidEndZooming:`. 解决这个问题的可能性有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:50:50.073

将 uilabel 放在滚动视图之外。那会解决你的问题。一切都会远离标签。

# javascript - 调整 div 大小和对齐背景

> ID：12739350
> 
> 赞同：0
> 
> 时间：2012-10-05T04:11:44.957
> 
> 标签：javascript, jquery, css, html

```
<div style="width: 600px;">  
    <div class="header">
    <img src="logo.png"/>
</div>

<div class="container">
    <div class="div1">Div 1</div>
    <div class="div2">Div 2</div>
    <div class="div3">Div 3</div>
    <div class="div4">Div 4</div>
    <div class="div5">Div 5</div>
</div>

.header
{
    height:200px;
    background-image: url('http://www.imgur.com/YLVpI.png');
    margin:0;
    width:100%;
    background-position:left;  
}
.header img
{
    margin-left:auto;
    margin-right:auto;
}
.container .div1
{
    background-color: black;
    background-position:left;  
    float:left;
    width:20%;
    margin: 0px;

}
.container .div2
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;  
    float:left;
    width:100px;
    margin:0; padding:0;
    border-bottom-left-radius: 20px;
}
.container .div3
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;  
    float:left;
    margin:0; padding:0;
}
.container .div4
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;  
    float:left;
    width:100px;
    margin:0; padding:0;
    border-bottom-right-radius: 20px;
}
.container .div5
{
    background-color: black;
    float:left;
    display:inline-block; width:90px;
    width:20%;
    margin:0;
} 
```

有几件事我不能同时工作：

1.  使页眉跨度为页面宽度的 100%。
2.  将 div 2 和 4 设置为每个 30px 的宽度。
3.  将 div 3 设置为 400px 的宽度。
4.  无论窗口有多大，都让 div 1 和 5 填充剩余空间。
5.  将所有内容居中，使其看起来不错。
6.  使背景正确对齐。

有谁知道如何做到这一点？[http://jsfiddle.net/jaTuu/](http://jsfiddle.net/jaTuu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:57:20.243

Try to centering all background images.

```
background: url('http://www.imgur.com/YLVpI.png') center center; 
```

Like this demo: [http://jsfiddle.net/ongisnade/PThcc/](http://jsfiddle.net/ongisnade/PThcc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:34:49.313

据我所知，您自己解决了 5 个问题，据我所知，如果没有多余的东西，您需要 Javascript 来执行第 4 个问题。如果没有访问您的图像，我无法尝试 6 个。不过，我认为你可以自己解决这个问题。

以下是我根据您的代码提出的解决方案：

```
<div id="header_container" style="width: 600px;">

    <div class="header">
    <img src="logo.png"/>
</div>

<div class="container"><div class="div1">Div 1</div><div class="div2 width30">Div 2</div><div class="div3 width300">Div 3</div><div class="div4 width30">Div 4</div><div class="div5">Div 5</div>
</div> 
*
{
    padding:0;
    margin:0;
}

#header_container {
    background-color: #000;
    min-width: 100%;
}

.width30 {
    width: 30px;
}

.width300 {
    width: 300px;
}

.header
{
    height:200px; 
    background-image: url('http://www.imgur.com/YLVpI.png'); 
    margin:0;
    background-position:left;  
}
.header img
{
    margin-left:auto; 
    margin-right:auto;
}
.container
{
    text-align:center;
}
.container .div1
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;  
    display:inline-block; 
    background-color: yellow;
    width:90px;
    border-bottom-left-radius: 20px;
}
.container .div2
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;  
    background-color: purple;
    display:inline-block; 
    /*width:90px;*/
    margin:0; padding:0;
}
.container .div3
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left; 
    background-color: green;    
    display:inline-block; 
    /*width:90px;*/
}
.container .div4
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left; 
    background-color: blue;    
    display:inline-block; 
    /*width:90px;*/

}
.container .div5
{
    background-image: url('http://www.imgur.com/YLVpI.png');
    background-position:left;
    background-color: orange;    
    display:inline-block; 
    width:90px;
    border-bottom-right-radius: 20px;
} 
```

这里有几点需要注意：

假设您希望元素名称保持不同，您可以通过添加根据上述定义大小的类来修改项目的宽度。如果你这样做，就像我做的那样，你将不得不删除你在 CSS 中定义的元素的宽度（也如上所示）。

还有一点需要注意：您似乎正在尝试制作导航菜单。如果是这种情况，使用列表来表示项目可能是一个更好的主意。

# django - django-registration：配置不当：没有名为 backends.default 的模块

> ID：12739355
> 
> 赞同：1
> 
> 时间：2012-10-05T04:12:02.367
> 
> 标签：django, django-registration

我在 django-registration 中遇到了一个非常奇怪的问题，我对如何进行有点不知所措。在我运行 OS X 10.8.2、python 2.7.2 和 virtualenv 1.8.2 的本地开发机器上，我正在使用 django-registration 0.8 和 django-email-usernames 1.0 的破解版本（有一些问题使用 django-registraiton 0.8）。一切正常，我没有错误。

在我的开发服务器上，如果我尝试登录或注册新帐户，我会收到以下错误：

配置不当

导入身份验证后端时出错 *site-name*registration.backends.EmailOrUsernameModelBackend：“没有名为 backends.default 的模块”

我相信相关的代码是：

```
from registration.backends.default import DefaultBackend

class EmailOrUsernameModelBackend(DefaultBackend): 
```

两种环境之间的唯一区别是暂存服务器上的操作系统和 python 版本（分别为 Debian Squeeze 和 1.66）。我不确定支持完全相同代码库的完全相同的软件包版本如何可能会遇到完全不同的行为。对于任何人可以提供的任何见解，我将不胜感激。

以防万一其中有任何有用的信息，这里是我远程机器上的 pythonpath：

```
['/usr/local/*virtualenv*/*site-name*', '/usr/local/*virtualenv-name*/lib/python2.6/site-packages/distribute-0.6.10-py2.6.egg', '/usr/local/*virtualenv*/lib/python2.6/site-packages/pip-0.7.2-py2.6.egg', '/usr/local/*virtualenv*/lib/python2.6', '/usr/local/*virtualenv*/lib/python2.6/plat-linux2', '/usr/local/*virtualenv*/lib/python2.6/lib-tk', '/usr/local/*virtualenv*/lib/python2.6/lib-old', '/usr/local/*virtualenv*/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/usr/lib64/python2.6/lib-tk', '/usr/local/*virtualenv*/lib/python2.6/site-packages', '/usr/local/*virtualenv*/lib/python2.6/site-packages/PIL'] 
```

我注意到的其他一些奇怪的事情： from registration.backends.default import DefaultBackend 在 shell 中工作正常。

# arrays - 包含 n-2 个整数 1 到 n 的数组，O(n) 算法用 O(1) 额外空间查找丢失的 2 个数字？

> ID：12739357
> 
> 赞同：2
> 
> 时间：2012-10-05T04:12:15.830
> 
> 标签：arrays, algorithm, sorting

> **可能重复：**
> [找到两个缺失的数字](https://stackoverflow.com/questions/10218791/find-two-missing-numbers)

我想了一会儿，似乎无法得到答案......所以除了由给定数组。如何在 O(n) 时间内找到数组中缺少的从 1 到 n 的两个整数？

例如，a = [4,3,1,6] 和 O(1) 额外空间 你如何在 O(n) 时间内找到 2、5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:46:56.193

这是一个想法：只需保留一些统计数据，即可为您提供有关缺失数字的信息。例如，如果您将所有数字的总和计算为 S，则：

```
(1+2+..+N) - S = a+b 
```

其中 a 和 b 是您丢失的数字。在您的示例中，您得到：

```
1+2+3+4+5+6 - 4+3+1+6 = 7 = a+b 
```

然后你也可以做同样的事情，例如，乘法并得到：

```
(1*2*..*N) / S = a*b 
```

在你的情况下：

```
(1*2*3*4*5*6) / 72 = 10 = a*b 
```

所以答案是 2 和 5。

基本上有很多统计数据可以通过这种方式使用......

# mysql - Glassfish mysql连接使用

> ID：12739358
> 
> 赞同：2
> 
> 时间：2012-10-05T04:12:28.403
> 
> 标签：mysql, glassfish

我使用 MYSQL 连接池在 GF 3.1.1 上运行 Web 应用程序。当我使用以下命令检查与数据库的连接时：“show processlist;” 我可以看到每次只使用一个连接。为什么会这样？有很多线程对 DB 做一些事情。请问有人可以回答我的问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:43:33.593

您的连接池是一个可用连接池。您可能有 32 个可用连接，但这并不意味着它将全部连接。它将为您管理连接。随着需求的增加，打开连接的数量将增加，直到达到您的最大值。同样，随着需求的减少，您的开放连接将减少到最低限度。

假设您的查询速度很快，GF 可能决定只需要 1 个连接。

说了这么多，默认的最小连接数是 8，所以登录到您的管理控制台并查看您的连接池设置。打开的连接数也应该至少是设置的最小值。

![连接池设置](../Images/7fe7d670a1b5324673e29b76bcc9ff4d.png)

![数据库中的休眠连接](../Images/18a0569b6bb5b1b7cd44dfc1617969ad.png)

# php - === 和 != 可以互换使用吗？

> ID：12739366
> 
> 赞同：2
> 
> 时间：2012-10-05T04:13:30.797
> 
> 标签：php

关系运算符 === （用于相同）可以与 != 运算符互换使用并获得相同的结果吗？或者当我做更大的程序时，我最终会遇到问题吗？

我知道我会在下面的示例中得到相同的结果，这总是正确的吗？

```
//example 1  
   <?php
        $a = 1; //integer
        $b = '1'; //string
        if ($a === $b) {     
            echo 'Values and types are same'; 
        }
        else {
            echo 'Values and types are not same';
        }
    ?> 

 // example 2
    <?php
        $a = 1; //integer
        $b = '1'; //string
        if ($a != $b) {     
            echo 'Values and types are not same'; 
        }
        else {
            echo 'Values and types are same';
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T04:15:53.230

简短的回答是，不，你不能互换它们，因为它们检查不同的东西。它们不是等效的运算符。

你会想要使用 !==

这基本上意味着被比较的两个值必须是相同的类型。

当您使用 == 时，如果需要，正在比较的值会进行类型转换。

如您所知， === 也会检查类型。

当您使用 != 时，值也是类型转换的，而 !== 严格检查值和类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T04:23:22.863

您本质上是在询问是否`!($a != $b)`将始终与`$a === $b`. 简单回答是不。`!($a != $b)`可以归结为`$a == $b`，这显然与 不同`$a === $b`：

```
php > var_dump(!('0' != 0));
bool(true)

php > var_dump('0' === 0);
bool(false) 
```

`!==`显然是相反的`===`，所以`!($a !== $b)`总是与 相同`$a === $b`。

# java - JAVA：如何按下一个最接近的值对数组进行排序？

> ID：12739375
> 
> 赞同：0
> 
> 时间：2012-10-05T04:14:52.047
> 
> 标签：java, arrays, sorting, numbers, closest

我对java有点陌生。我已经看到了按升序/降序对数字进行排序的算法，其中第一个条目是最小/最大的。我从未见过可以将元素排序到最接近的值保持第一个条目不变的算法。

例如：数组= **53, 98, 183, 37, 122, 14, 124, 65, 67**

并返回：

数组= **53, 65, 67, 37, 14, 98, 122, 124, 183**

只是为了更好地解释这个例子，请注意在输出中，第一个条目`53`是不变的。下一个条目是`65`所有剩余条目中最接近的，最小差异为`12`。之后`65`，其余条目（不包括和）之间的`67`差异。同样，下一个条目是最接近剩余条目的条目。`2``53``65``37``67`

***任何帮助表示赞赏！***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:34:04.643

这应该这样做。

```
 int[] array = new int[] {53, 98, 183, 37, 122, 14, 124, 65, 67};

    for(int i = 0; i < array.length; i++) {
        int currentValue = array[i];
        int distance = Integer.MAX_VALUE;
        for(int j = i+1; j < array.length ; j++) {
            if(Math.abs(array[j] - currentValue) < distance ) {
                distance = Math.abs(array[j] - currentValue);
                int temp = array[i+1];
                array[i+1] = array[j];
                array[j] = temp;
            }
        }
    } 
```

输出`53 65 67 37 14 98 122 124 183`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:32:02.273

伪代码，未经测试：

```
for i in 0..array.length-1
{
  min=MAX_INT
  minIndex=0
  for j in i+1..array.length-1
  {
    diff=abs(a[j]-a[i])
    if diff < min
    {
      min = diff
      minIndex=j
    }
  }
  swap a[i+1] with a[minIndex]
} 
```

# java - 为什么我的 if 语句会这样？

> ID：12739382
> 
> 赞同：5
> 
> 时间：2012-10-05T04:15:50.940
> 
> 标签：java

我今天遇到了这个难题。显然，这不是正确的风格，但我仍然很好奇为什么没有输出。

```
int x = 9;
int y = 8;
int z = 7;

if (x > 9) if (y > 8) System.out.println("x > 9 and y > 8");

else if (z >= 7) System.out.println("SHOULD OUTPUT THIS x <= 9 and z >= 7");

else
  System.out.println("x <= 9 and z < 7"); 
```

以上运行时没有输出。但是，当我们为 if 语句添加括号时，突然间逻辑的行为与我预期的一样。

```
int x = 9;
int y = 8;
int z = 7;

if (x > 9) {
  if (y > 8) System.out.println("x > 9 and y > 8");
}

else if (z >= 7) System.out.println("SHOULD OUTPUT THIS x <= 9 and z >= 7");

else
  System.out.println("x <= 9 and z < 7"); 
```

这将输出“应该输出 x <= 9 和 z >= 7”。这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T04:19:33.527

如果您像这样重写第一种方式（这是它的行为方式），则更容易理解

```
if (x > 9)
  if (y > 8) System.out.println("x > 9 and y > 8");
  else if (z >= 7) System.out.println("SHOULD OUTPUT THIS x <= 9 and z >= 7");
  else
    System.out.println("x <= 9 and z < 7"); 
```

由于 x 不 > 9，因此该块永远不会执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T04:22:24.557

这：

```
if (x > 9) ... if (y > 8) ... else if (z >= 7) ... else 
```

是模棱两可的，因为在解析过程中`else`可能会绑定到第一个`if`或第二个`if`。（这称为[悬空`else`问题](http://en.wikipedia.org/wiki/Dangling_else)）。Java（和许多其他语言）处理这个问题的方式是使第一个含义非法，因此`else`子句总是绑定到最里面的`if`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:20:07.780

只需修复代码上的缩进，问题就会变得清晰：

```
int x = 9;
int y = 8;
int z = 7;

if (x > 9)
    if (y > 8)
        System.out.println("x > 9 and y > 8");
    else if (z >= 7)
        System.out.println("SHOULD OUTPUT THIS x <= 9 and z >= 7");
    else
        System.out.println("x <= 9 and z < 7"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T04:22:44.423

因为您在最内层使用 else 块

您的代码被视为以下代码

```
if (x > 9) // This condition is false, hence the none of the following statement will be executed
{
    if (y > 8) 
    {
        System.out.println("x > 9 and y > 8");
    } else if(z >= 7)
    {
        System.out.println("SHOULD OUTPUT THIS x <= 9 and z >= 7");
    }
    else 
    {
        System.out.println("x <= 9 and z < 7");
    }
} 
```

if 语句指定的第一个条件为假，控制不进入与该条件相关的代码，只是到达程序的末尾并且不打印任何内容。

这就是为什么它的正常做法是用括号括起来语句，即使您正在编写单个语句。

# python - 调整 tkinter 框中的文本大小

> ID：12739386
> 
> 赞同：0
> 
> 时间：2012-10-05T04:16:09.550
> 
> 标签：python, tkinter

是否可以在 python 的 tkinter 框中调整文本的大小？我知道我可以添加文本，并且在这样做时，除其他特征外，还可以定义字体大小。如果说某些东西触发程序这样做，是否可以调整文本大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:04:34.890

如果你使用的是一个`Text`盒子，你可以使用标签来格式化它的内容。例如：

```
#!/usr/bin/env python

import Tkinter
import tkFont

class App:
    def __init__(self):

        # Set up the text box
        self.root = Tkinter.Tk()
        self.text = Tkinter.Text(self.root, width=20, height=5)
        self.text.insert(Tkinter.INSERT, "Hello...")
        self.text.pack()

        # set up a mouse event
        self.text.bind("<Button-1>", self.click)

        # Set Tkniter's main loop
        self.root.mainloop()

    def click(self, event):
        self.text.tag_add("here", "1.0", "1.4")
        self.text.tag_config("here", background="yellow", font=tkFont.Font(size=36))

if __name__ == "__main__":
    App() 
```

当您用鼠标单击框时，将更改输入文本部分的背景和大小。

# maven - 将 Java 应用程序部署到 Heroku 导致 jackson-mapper-asl Maven 错误

> ID：12739388
> 
> 赞同：0
> 
> 时间：2012-10-05T04:16:28.190
> 
> 标签：maven, heroku, jackson

部署到 heroku 时的确切 maven 错误消息是：

```
No versions available for org.codehaus.jackson:jackson-mapper-asl:jar:[1.9,1.9.9] within specified range 
```

我相信这个问题与这个[答案](https://stackoverflow.com/a/12669345/720805)和这个杰克逊存储库 maven-metadata.xml[错误](http://jira.codehaus.org/browse/JACKSON-871)有关。

maven 部署日志中的以下条目表明 jackson-mapper-asl 1.9.9 正在从 heroku maven 存储库下载：

```
Downloaded: http://s3pository.heroku.com/jvm/org/codehaus/jackson/jackson-mapper-asl/1.9.9/jackson-mapper-asl-1.9.9.pom (2 KB at 12.3 KB/sec) 
```

jackson maven-metadata.xml[文件](http://s3pository.heroku.com/jvm/org/codehaus/jackson/jackson-mapper-asl/maven-metadata.xml)的 heroku 版本使用了不正确的版本号 - 在使用版本范围时导致 maven 错误。

有没有办法在部署时告诉 heroku 为这个依赖项使用不同的 Maven 存储库？更好的是，有没有办法修复 heroku jackson-mapper-asl maven-metadata.xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:45:32.473

[这](https://devcenter.heroku.com/articles/local-maven-dependencies)足以作为一种解决方法吗？您可以只使用存储库配置部分并指向其他地方，或者像使用自定义项一样自己提供文件。

无论如何，你可以做到。在 pom.xml 中定义一个常规存储库，这里是中央存储库：

```
<repositories>
  <repository>
    <id>central</id>
    <name>Maven Repository Switchboard</name>
    <layout>default</layout>
    <url>http://repo1.maven.org/maven2</url>
    <snapshots>
      <enabled>false</enabled>
    </snapshots>
  </repository>
</repositories> 
```

在 pom.xml 中定义一个指向本地“repo”项目的存储库，该项目仅存在于应用程序部署中：

```
<repositories>
    <!--other repositories if any-->
    <repository>
        <id>project.local</id>
        <name>project</name>
        <url>file:${project.basedir}/repo</url>
    </repository>
</repositories> 
```

在任何情况下，您都应该联系 Heroku 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:37:43.980

**跟进** 我联系了 Heroku 支持（超级有帮助，顺便说一句），他们发现 Heroku Maven 缓存不仅对 Jackson 无效。Heroku 支持启动了一个更新过程，*帮助*解决了这个问题，但并没有完全解决它。为了完全解决这个问题，我必须在我的 pom.xml 中添加对 jackson-mapper-asl 1.9.9 的显式依赖，然后才能将我的应用程序部署到 Heroku。

# ruby - 如何在没有类的 ruby 文件上使用 Test:Unit（仅方法）

> ID：12739389
> 
> 赞同：2
> 
> 时间：2012-10-05T04:16:41.217
> 
> 标签：ruby, unit-testing

我必须为家庭作业编写代码，并且我希望从一开始就进行 TDD。作业由一个 ruby​​ 文件组成，其中包含方法，没有类。

我在 Internet 上找到的所有示例都针对类进行了测试。我该如何测试以下方法？

**作业.rb**

```
#!/usr/bin/env ruby

def count_words(str)
  # SOME CODE HERE
end 
```

有一个自动评分系统，它采用为作业定义的方法将一个 ruby​​ 文件作为输入。所以，我必须在一个单独的文件（test_homework.rb）中编写我的测试，或者在提交之前注释掉我的测试（我发现这会适得其反……）。

我将如何使用 Test:Unit 测试 count_words 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:24:12.720

做这样的事情：

```
require File.join(File.expand_path(File.dirname(__FILE__)), 'homework.rb')
require "test/unit"

class TestWordCounter < Test::Unit::TestCase
  def test_count_words
    assert_equal 3, count_words("one two three")
  end
end 
```

# java - 从同一 JVM 中的另一个项目加载属性文件

> ID：12739397
> 
> 赞同：1
> 
> 时间：2012-10-05T04:17:50.733
> 
> 标签：java

我有两个 Maven 项目`A`并且`B`在同一个 JVM 中。项目`B`取决于项目`A`。在一类项目`A`中，我需要加载项目的属性文件，`B`例如`/B/src/main/resource/foo.properties`在静态块中，如下所示：

```
 Class bar{//this class is in project A
    static{
     //do the magic to load the property file in project B
    }
   } 
```

访问项目中提到的属性文件的正确路径是什么`B`？

请帮助处理伪语句。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:59:35.947

由于您已经指定了 Maven 依赖关系，因此所有类路径资源都来自另一个项目，可用于另一个项目。

试试这个代码

```
public void doSomeOperation() throws IOException {
        // Get the inputStream
        InputStream inputStream = Bar.class.getClassLoader()
                .getResourceAsStream("myApp.properties");

        Properties properties = new Properties();

        System.out.println("InputStream is: " + inputStream);

        // load the inputStream using the Properties
        properties.load(inputStream);
        // get the value of the property
        String propValue = properties.getProperty("abc");

        System.out.println("Property value is: " + propValue);
    } 
```

# php - 需要PHP PDO的一些解释......！

> ID：12739398
> 
> 赞同：2
> 
> 时间：2012-10-05T04:18:10.023
> 
> 标签：php, mysql, sql, pdo

```
function get_actor_info( $actor_id ) {

    global $pdo;

    $stmt = $pdo->prepare('
            SELECT film_info, first_name, last_name 
            FROM actor_info
            WHERE actor_id = :actor_id
            LIMIT 1');

    $stmt->execute( array( ':actor_id' => $actor_id ) );

    return $stmt->fetch( PDO::FETCH_OBJ );
} 
```

在上面的示例中为什么 MYSQL 选择 WHERE...`:actor_id`后跟此`:`列和`return $stmt->fetch( PDO::FETCH_OBJ );`为什么使用双列中的相同内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:21:05.783

字符串 :actor_id 不是变量。它是一个将实际变量 $actor_id 值绑定到 SQL 字符串的占位符。

您的 $stmt 字符串是带有占位符的查询。

where 子句的实际值在执行时使用 execute() 方法传递。

你为什么想做这个？PDO 允许准备好的语句，并且它的绑定有助于抽象出必须转义变量的字符串，就像您只是将 $actor_id 连接到您的 SQL 字符串中一样。

这有助于查询的可重用性和安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T04:22:03.963

`:colunm_name`用作占位符，就像`?`.

不同之处在于`:column_name`您可以使用关联数组来绑定参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T04:41:23.477

末尾的双冒号完全不同。这是一种单独的符号，与查询中的单个冒号完全无关。

双冒号表示您要访问在类中定义的常量或函数。如果它是在一个对象中定义的，你会使用更熟悉的`->`符号；在这种情况下`FETCH_OBJ`，是 PDO 类本身内部的常量，而不是任何特定的 PDO 对象。当您将该常量作为参数传递给 时`fetch()`，它会告诉函数以对象而不是数组的形式返回一行。

双冒号称为[范围解析运算符](http://php.net/manual/en/keyword.paamayim-nekudotayim.php)。它还被命名为“paamayim nekudotayim”，这是希伯来语中“双冒号”的意思，可能是计算机科学史上最糟糕的命名约定选择之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T07:20:22.020

上面示例中的第一个问题 为什么 MYSQL 选择 WHERE... **:actor** _id 后跟这个 : 冒号

```
$stmt->execute( array( ':actor_id' => $actor_id ) ); 
```

该语句使用了一些类似于变量调用占位符的方法，通过使用：冒号，您可以将变量解析为 sql。

第二部分..

`return $stmt->fetch( PDO::FETCH_OBJ )`为什么要使用双列？

这是您的定义，目标是**PDO**中的特定对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T04:24:35.320

请阅读[**本**](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)教程以了解 PDO 的基础知识。

# c++ - 优先队列 ADT 的运行时间

> ID：12739404
> 
> 赞同：-1
> 
> 时间：2012-10-05T04:19:04.313
> 
> 标签：c++

如果我们通过适配 STL 优先级队列来实现（标准）优先级队列 ADT 的每个功能的运行时间是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:25:42.380

复杂性保证可以在 c++ 标准的第 25.4.6 节中找到。（搜索 n3242.pdf；我相信您会找到的。）或者，查看[此处](http://en.cppreference.com/w/cpp/algorithm)列出的每个堆操作。

# hibernate - Hibernate Search 的条件索引是否与 MassIndexer API 一起使用？

> ID：12739409
> 
> 赞同：2
> 
> 时间：2012-10-05T04:19:34.593
> 
> 标签：hibernate, lucene, hibernate-search

我在其中一个实体类上使用带有条件索引的 Hibernate Search。该`@Indexed`实体的注释指定了一个自定义拦截器，该拦截器可防止对处于特定状态的实例进行索引。

这按预期完美运行。但是，我注意到当我使用 a`MassIndexer`重新索引所有内容时，它会忽略该实体类上的自定义拦截器。我已经通过调试模式确认拦截器甚至从未被调用，并且该实体的*所有*实例都被索引，即使它们符合被跳过的标准。

我错过了什么吗？在休眠搜索中是否有一种方法可以在实体类上使用任何自定义拦截器来重新索引？

## 更新

我尝试使用以下代码片段切换到 Sanne 建议的“旧式”方法：

```
FullTextSession fullTextSession = Search.getFullTextSession(session);
fullTextSession.setFlushMode(FlushMode.MANUAL);
fullTextSession.setCacheMode(CacheMode.IGNORE);
fullTextSession.beginTransaction();

// Kill the current index
fullTextSession.purgeAll(MyEntity.class);
int batchSize = 10;
ScrollableResults results = fullTextSession.createCriteria(MyEntity.class)
        .setFetchSize(batchSize)
        .scroll(ScrollMode.FORWARD_ONLY);
int index = 0;
while(results.next()) {

    // Re-index entites in batches of 10, freeing up memory after each batch
    index++;
    fullTextSession.index(results.get(0));
    if (index % batchSize == 0) {
        fullTextSession.flushToIndexes();
        fullTextSession.clear();
    }
}
fullTextSession.getTransaction().commit(); 
```

但是，我看到的行为与`MassIndexer`. `MyEntity`不调用条件映射拦截器，并且所有`MyEntity`实例都被索引，无论它们是否应该被索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:59:22.400

不，没有：[HSEARCH-1190](https://hibernate.onjira.com/browse/HSEARCH-1190)。

致力于它，欢迎贡献和测试者！

您可以使用仅向前滚动的旧式索引，直到修复：[Using flushToIndexes()](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#search-batchindex-flushtoindexes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:32:51.890

我遇到了同样的问题。不幸的是，我在任何地方都没有找到好的解决方案。我尝试开发自己的解决方案，但我并不为此感到自豪。也许有人可以改进它。

```
int index = 0;
EntityIndexingInterceptor eii = 
        ((SearchFactoryIntegrator) fullTextSession.getSearchFactory())
        .getIndexBindingForEntity(MyEntity.class)
        .getEntityIndexingInterceptor();
while(results.next()) {
    if (eii.onAdd(results.get(0)) != IndexingOverride.SKIP){  // explit call interceptor
        index++;
        fullTextSession.index( results.get(0) ); 
        if (index % BATCH_SIZE == 0) {
            fullTextSession.flushToIndexes();
            fullTextSession.clear(); 
        }
    }
}
fullTextSession.flushToIndexes(); 
```

我正在寻找更简单的方法来触发拦截器但没有成功:(

顺便提一句。如果您查看 EntityIndexingInterceptor 声明，您可以看到：

```
//FIXME should we add onPurge and onIndex? 
```

# java - GAE：进程终止，因为后端在后端作业中关闭的时间过长

> ID：12739411
> 
> 赞同：8
> 
> 时间：2012-10-05T04:19:54.967
> 
> 标签：java, google-app-engine, cron, backend

我的后端工作是在 cron 工作的基础上工作的（每 4 小时一次）。但它在不处理数据的情况下终止。服务器日志显示如下：

```
500 15377121ms 0kb instance=0 AppEngine-Google; (+http://code.google.com/appengine)
E 2012-10-05 01:50:18.044 Process terminated because the backend took too long to shutdown. 
```

如何在我的程序中处理这种错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T05:11:23.397

当 App Engine 需要关闭您的后端但后端未能在 30 秒内退出时会生成该错误。[此处](https://developers.google.com/appengine/docs/java/backends/overview#Shutdown)列出了可能发生这种情况的一些原因。根据错误的类型，App Engine 可能会向您的后端发送即将关闭的通知，因此最好[注册一个关闭处理程序](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/LifecycleManager#setShutdownHook%28com.google.appengine.api.LifecycleManager.ShutdownHook%29)，这样您就可以在这即将发生时收集有关应用程序状态的更多数据。

如果您经常看到这种情况，则可能有系统的解释，例如您的作业内存超过了后端类的最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T16:22:03.590

处理同样的问题。查看了官方文档中列出的原因。从统计数据来看，内存消耗似乎还可以。数据存储争用问题也在我的代码中处理。超时也。改变任务机制以在可恢复的块中工作似乎是唯一的出路。

在追踪这个错误一段时间后，AppEngine 开发范式似乎围绕着 url 处理程序，在时间、内存等方面有限制。这也适用于长时间运行的任务。我将我的长期任务重新安排为执行小任务。任务队列触发了较小的任务，这些任务在完成队列下一个任务之前依次运行。从来没有失败过一次！

优点是 taskqueuus 比一个巨大的 cron 作业有更好的故障保护/移交。一项任务失败并不意味着庞大任务列表的其余部分失败。

# php - 为什么 fopen() 给我的 IP 与 $_SERVER['SERVER_ADDR'] 不同？

> ID：12739414
> 
> 赞同：0
> 
> 时间：2012-10-05T04:20:31.437
> 
> 标签：php, ip, ip-address, fopen

使用此代码：

在服务器 AI 上有这个：

```
$handle = fopen('http://www.server_b.com/get_ip.php', 'r'); //This is just a PHP file that echoes the REMOTE_ADDR
echo "IP looks like ".fread($handle, '100000')." to external server.\n";
fclose($handle);
echo "IP looks like ".$_SERVER['SERVER_ADDR']." to this server."; 
```

在服务器 BI 上有这个：

```
echo $_SERVER['REMOTE_ADDR']; 
```

我从服务器 A 得到以下输出：

```
IP looks like xxx.xxx.223.90 to external server. //xxx.xxx on both lines are the same
IP looks like xxx.xxx.223.94 to this server. 
```

为什么我得到两个不同的 IP？请注意，我们确实拥有 .90-.94 的 IP 范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:31:39.697

由于它是 VPS，您可能在 server_b 上看到的是运行 server_a 的 VPS 主机的 IP 地址。

要么就是这样，要么还有其他一些代理机制正在运行。

可能有办法解决这个问题：

在 server_b 上做一个`print_r()`。`$_SERVER`

根据所涉及的各种服务器的配置，除此之外，`REMOTE_ADDR`您还可能获得类似`$_SERVER['HTTP_FORWARDED']`. 这将是代理传递的原始计算机的 IP 地址，并且应该是您所期望的。

这个问题可能会进一步帮助您：[在 PHP 中检索用户正确 IP 地址的最准确方法是什么？](https://stackoverflow.com/questions/1634782/what-is-the-most-accurate-way-to-retrieve-a-users-correct-ip-address-in-php)

# php - 当文件达到一定大小时，将数据添加到新文件

> ID：12739416
> 
> 赞同：1
> 
> 时间：2012-10-05T04:20:34.220
> 
> 标签：php, createfile

如果字符串会使文件大小大于 1 MB 并在需要第 4 个文件时中断循环，我将如何停止写入文件并创建一个新文件。

```
$max_size = 1048576; // 1 MB
$max_files = 3;
$i = 1;
$loop = true;
$size = 0;
$x = 0;

while($loop)
{
        $str = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n";

        $file = 'C:\xampplite\htdocs\moo\file_'.$i.'.tmp';

        if(file_exists($file))
        {
                $size = filesize($file);
                echo 'File exists with size: '.$size.'<br>';
        }
        else
        {
                $size = 0;
                echo 'No file exists, size: '.$size.'<br>';
        }

        $fh = @fopen($file, 'a');

        if( ! $fh)
        {
                echo 'Failed to write to temp file "'.$file.'".';
        } 

        fwrite($fh, $str);  
        fclose($fh);

        $x++;

        if($x == 100)
        {
            break;
        }
} 
```

**更新** 请有人解释为什么文件大小总是相同的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:24:22.340

跟踪您正在写出的数据量。在你写之前，将文本的长度添加到你已经写出的长度上。如果达到限制，则增加 i，重置写出的字节数，然后继续。如果要写入现有文件，请使用获取文件大小`filesize().`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:41:59.643

这是我最终得到的结果，我想如果其他人迟到并摸不着头脑，我会分享它。

我想出了为什么在循环中`filesize()`不更新（第一篇文章），你必须在每次使用之前调用。`$size``clearstatcache()``filesize()`

PHP手册注意：这个函数的结果是缓存的。有关更多详细信息，请参阅。[`filesize()`](http://www.php.net/manual/en/function.filesize.php)
[`clearstatcache()`](http://www.php.net/manual/en/function.clearstatcache.php)

```
$start = microtime(true);
$max_size = 1048576; // 1 MB
$max_files = 3;
$file_num = 1;
$size = 0;
$lines = 0;
$total_lines = 0;

while(true)
{                    
        $file = '/path/to/file_'.$file_num.'.tmp';            
        $str = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n";

        if($lines === 0)
        {
                if(file_exists($file))
                {
                        clearstatcache();
                        $size = filesize($file);
                        print("<pre>" . print_r('File exists with size = '.$size, true). "</pre>");
                }
                else
                {
                        $size = 0;
                        print("<pre>" . print_r('No file exists, size = '.$size, true). "</pre>");

                }
        }

        // add string length to size
        $size = ($size + strlen($str));

        if($size > $max_size)
        {
                print("<pre>" . print_r('Max file size exceeded for file '.$file_num.'. Total lines written '.$lines, true). "</pre>");
                $file_num++;
                $lines = 0;

                // escape loop after creating 3 files
                if($file_num > $max_files)
                {
                        break;
                }

                continue;
        }

        $lines++;
        $total_lines++;

        $fh = @fopen($file, 'a');

        if( ! $fh)
        {
                echo 'Failed to write to temp file "'.$file.'".';
        } 

        fwrite($fh, $str);
        //print("<pre>" . print_r('Writing to file: '.$file, true). "</pre>");
        fclose($fh);    
}

$end = microtime(true);

$time = $end - $start;
print("<pre>" . print_r('------------------------------------------------------------', true). "</pre>");
print("<pre>" . print_r('Total time: '.$time.' seconds.', true). "</pre>");
print("<pre>" . print_r('Total lines: '.$total_lines, true). "</pre>"); 
```

希望这对任何人都有帮助。

# ruby-on-rails - Rails3 迁移，:joins 现在被忽略，但我想将它用于条件

> ID：12739423
> 
> 赞同：0
> 
> 时间：2012-10-05T04:21:15.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, join

我正在迁移到 Rails 3。我想我终于在测试和开发中完成了所有工作，但现在在生产中（实际上是在暂存中，Rails 不相信该环境存在）某个查询不起作用。似乎 :joins 现在被忽略了。

```
class Organisation
  # Maybe this is relevant, because it has :dongle in it too.
  LICENCE_TABLE_INCLUDES = [:organisation, :user, :owner_organisation, :profile, :dongle,
                            {:nested_licences => [:profile]} ]

  has_many :dongles

  def latest_received_licences_for_each_dongle
    Licence.find(:all,
                 :joins => [:dongle],
                 :include => LICENCE_TABLE_INCLUDES,
                 :conditions => { 'dongles.organisation_id' => id },
                 #  :group => 'dongles.id',       # broken
                 :order => 'dongles.name ASC, licences.created_at DESC').
      group_by {|l| l.dongle.name}.
      sort_by {|d,ls| d}.
      map {|d,ls| ls[0]}

    # Tried to modernise it a little - same results.
    #Licence.
    #  joins(:dongle).
    #  includes(LICENCE_TABLE_INCLUDES).
    #  where(:dongles => { :organisation_id => id }).
    #  order('dongles.name ASC, licences.created_at DESC').
    #  group_by {|l| l.dongle.name}.
    #  sort_by {|d,ls| d}.
    #  map {|d,ls| ls[0]}
  end
end

class Dongle
  has_many :licences
  belongs_to :organisation
end

class Licence
  belongs_to :dongle
end 
```

调用它会导致错误：

```
Mysql2::Error: Unknown column 'dongles.organisation_id' in 'where clause': SELECT `licences`.* FROM `licences` WHERE `licences`.`parent_licence_id` IS NULL AND ((`dongles`.organisation_id = 143)) AND (`licences`.parent_licence_id IN (22,23))
mysql2 (0.2.18) lib/active_record/connection_adapters/mysql2_adapter.rb:265:in `query' 
```

如您所见，它没有将联接添加到查询中。（rails 3.0.17，mysql2 0.2.18 - 尚未更新到 Rails 3.2，因为我正试图让 3.0 首先工作。）

# ios - iOS Phonegap 更改软键盘返回键

> ID：12739424
> 
> 赞同：2
> 
> 时间：2012-10-05T04:21:47.213
> 
> 标签：ios, cordova, phonegap-plugins, soft-keyboard

我想更改 phonegap iOS 应用程序的“返回”键。我用谷歌搜索，发现可以使用本机代码[链接](https://stackoverflow.com/questions/2872218/i-want-change-the-return-key-of-iphone-virtual-key-to-a-another-name)。但是我怎样才能对 phonegap 应用程序做同样的事情呢？

# java - Java：ftp连接中带有@符号的URL

> ID：12739426
> 
> 赞同：0
> 
> 时间：2012-10-05T04:22:04.280
> 
> 标签：java, url, ftp, url-encoding

在[使用 ftp 协议连接到密码包含“@”符号的服务器](https://stackoverflow.com/questions/8489220/connecting-to-the-server-which-password-contains-symbols-using-ftp-protocol/)的问题之后，答案是正确的。URLEncoder 将 @ 编码为 %。但是假设密码已经包含 % 并且我没有对其进行编码，那么 URL 类将如何知道未编码的密码呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:33:39.157

浏览器（或解析 FTP URL 的方法）是 URL 解码密码。因此，如果您不对密码进行 URL 编码并且您传递了一个 % ，它无论如何都会尝试对其进行解码，因此将无法正常工作。同样的事情也适用于@和:。 [Super User 上的这个答案](https://superuser.com/questions/60443/encoding-in-ftp-user-password-within-url)包括更详细的证据，证明这实际上是正在发生的事情（他们使用 Wireshark 检查了原始 TCP/IP 流量以查看正在传递的内容）。

# api - 使用 Node.js 提供 api 时如何管理数据模板

> ID：12739427
> 
> 赞同：0
> 
> 时间：2012-10-05T04:22:07.043
> 
> 标签：api, node.js, architecture

我目前正在尝试使用 Node.js 为我的 Web 应用程序创建一个 api。该 api 旨在将 JSON 数据返回给 api 用户。

例如，我有以下端点/对象： - 文章（文章集合） - 文章（单篇文章，每篇文章都有标签） - 标签

每个拥有自己的 json 数据格式的端点/对象都需要返回，例如：

*   文章：[{articleObject}、{articleObject}、{articleObject}]

*   文章

    { id: 12, title: '我的精彩文章*我说过而且我知道', content: 'blah blah blah blah', 标签: [{tagObject}, {tagObject}, {tagObject}] }

每个端点都可以调用其他端点来获取所需的数据，例如：文章端点可以调用标签端点来获取文章标签集合，标签端点将返回数组对象。

我的问题：

1.  如何管理对象结构，所以如果一个端点从另一个端点调用它将返回数组/对象，而当从 api 用户调用时它将返回 JSON 字符串。

2.  我应该为每个端点创建对象模板。该过程将是：

    *   端点将调用对象模板；
    *   对象模板将从数据库中获取数据；
    *   当从其他端点调用时，端点将返回对象模板；
    *   Endpoint 将调用模板引擎将对象模板解析为 api 用户的 JSON 字符串。将为每个端点提供 JSON 字符串视图。
3.  什么模板引擎可以在对象模板下处理并将它们视为变量，在 PHP 中我使用 Twig 可以接收 PHP 对象并将它们视为变量。[在这里你可以找到我是如何使用 Twig 做到这一点的](https://stackoverflow.com/questions/11304109/twig-event-listener-hook-in-template-variable/11322083)

对象模板文件内容示例：

```
var Tags = require('./tags');

module.exports = function(param){
  /* do fetching data from database for specified parameters */
  /* here */
  var data = {};

  return {
    id: function() {
      return data.id;
    },
    title: function() {
      return data.title;
    },
    description: function() {
      return data.description;
    },
    tags: function() {
      return Tags(data.id);
    }
  }
} 
```

希望有人能给我指路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:29:21.660

我使用 express 来做我的 apis ......你可以做这样的事情：

```
app.get('/api/article', authenticate, routes.api.article.get); 
```

authenticate 只是一个对用户进行身份验证的中间件功能，通常这是从会话中获取用户并确保他们已登录。

在 ./routes/api.js 里面

```
var Article = require('../models/article.js');

exports.api = {}
exports.api.article = {}
exports.api.article.get = function(req, res){
 //get article data here
 Article.find({created_by: req.session.user._id}).populate('tags').populate('created_by').exec(function(err, list){
   res.json(list);
 });
}; 
```

这假设您使用的是 mongoose 和 mongodb 并且具有与此类似的 Article 架构，其中包括对 Tag 架构的引用：

```
var ArticleSchema = new Schema({
    name    : { type: String, required: true, trim: true }
  , description: { type: String, trim: true }
  , tags  : [{ type: Schema.ObjectId, ref: 'Tag', index: true }]
  , created_by  : { type: Schema.ObjectId, ref: 'User', index: true }
  , created_at    : { type: Date }
  , updated_at    : { type: Date }
}); 
```

# android - Android 如何将总天数准确地更改为年、月和日？

> ID：12739428
> 
> 赞同：5
> 
> 时间：2012-10-05T04:22:13.330
> 
> 标签：android, calendar, date-format

我正在做一个与根据生日日期的给定输入获取一个人的年龄相关的应用程序。为此，我从下面的代码中获取了从该日期到当前日期的总天数。

```
 String strThatDay = "1991/05/10";
      SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");
      Date d = null;
      try {

      try {
      d = formatter.parse(strThatDay);
      Log.i(TAG, "" +d);
      } catch (java.text.ParseException e) {

      e.printStackTrace();
      }
      } catch (ParseException e) {

      e.printStackTrace();
      } 
      Calendar thatDay = Calendar.getInstance();
      thatDay.setTime(d); //rest is the same....

      Calendar today = Calendar.getInstance();
      long diff = today.getTimeInMillis() - thatDay.getTimeInMillis(); 
      long days = diff / (24 * 60 * 60 * 1000); 
```

从这段代码中，我得到了总天数。所以我的要求是将总天数准确地转换为年、月和日..请帮助....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T04:34:15.367

你应该使用这个[`Duration`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/Duration.html)类：

```
Duration duration = new Duration();
duration.add( today );
duration.substract( birthDate);
int years = duration.getYears();
int months = duration.getMonths();
int days = duration.getDays(); 
```

其他一些替代方法包括使用专门用于时间管理的库：Joda time。请参阅[以年、月、日、小时、分钟和秒为单位计算年龄](https://stackoverflow.com/questions/4710206/calculate-age-in-years-months-days-hours-minutes-and-seconds?rq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:56:55.357

```
 String strThatDay = "1991/05/10";
  SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");
  Date thatDate = null;
  try {

  try {
  thatDate = formatter.parse(strThatDay);

  Calendar thatDay = Calendar.getInstance();
  thatDay.setTime(thatDate);
  Calendar toDay = Calendar.getInstance();
  toDay.setTime(thatDate);

  toDay.add(Calendar.DATE, noOfDays);

  int year = toDay.getTime().getYear() - thatDay.getTime().getYear();
  int month  = toDay.getTime().getMonth() - thatDay.getTime().getMonth();
    if(month<0){
       year--
       month = month+12;
     }
  int days  = toDay.getTime().getDate() - thatDay.getTime().getDate();
     if(month<0){
       month--
       days = days+ toDay.getMaximum(Calendar.MONTH);;
     } 
```

# arrays - Perl Data::Dumper 在数组中散列？

> ID：12739431
> 
> 赞同：3
> 
> 时间：2012-10-05T04:22:37.353
> 
> 标签：arrays, perl, hash, data-dumper

我有一个使用 .xml 解析一些 XML 的程序`XML::Simple`。在某些时候，XML 中似乎有多余的条目，这些条目会被序列化，但我终其一生都无法弄清楚如何将这些数据作为简单的字符串取回。该 XML 的一个子集似乎被`XML::Simple`. `Dumper($data)`运行where data is my parsed XML时，相关小节如下。

```
Audio = [
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      }
    ]; 
```

我将我的 XML 解析输出的一小部分传递给一个变量，如下所示：

`my @audiostuff = $data->{ClipContent}->{EssenceList}->{Audio};`

当我输出这个转储时，我得到以下信息

```
$VAR1 = [
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      },
      {
        'AudioIndex' => {
                        'StartByteOffset' => '32768',
                        'DataSize' => '3071872'
                      },
        'SamplingRate' => '48000',
        'BitsPerSample' => '16',
        'AudioFormat' => 'MXF'
      }
    ]; 
```

所以在捕获的数组中一切似乎都是正确的。该数组似乎有一个元素，并且在该元素内有四个哈希值。这就是我卡住的地方。我不知道如何将这些散列中的信息再次取出。我已经尝试了大约 40 种不同的东西，但我只是用头撞墙。我很想将每个散列的值传递给一个简单的本地数组（`@samplingrate`例如），其中我有所有这四个条目，并且可以通过`$samplingrate[0]`等简单地引用它们。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T06:18:16.093

我相信您的意思是取消引用数组，如下所示：

```
my @audiostuff = @{ $data->{ClipContent}->{EssenceList}->{Audio} };
# do stuff with $audiostuff[0], etc. 
```

或者只使用 arrayref

```
my $audiostuff = $data->{ClipContent}->{EssenceList}->{Audio};
# do stuff with $audiostuff->[0], etc. 
```

有关处理引用和数据结构的一些易记规则，请参阅[http://perlmonks.org?node=References+quick+reference](http://perlmonks.org?node=References+quick+reference)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:32:27.373

```
my @audiostuff = $data->{ClipContent}->{EssenceList}->{Audio}; 
```

您将不得不遍历您的数组 ex：使用`for`.

以下是您如何访问它

```
 $audiostuff[0]->{'AudioIndex'}  # This will give you hashref

     # Below will give you value 32768, Similarly you can get value for 'DataSize' 

    $audiostuff[0]->{'AudioIndex'}->{'StartByteOffset'} 

    # To access other elements/values.

     $audiostuff[0]->{'SamplingRate'}

     $audiostuff[0]->{'BitsPerSample'}

     $audiostuff[0]->{'AudioFormat'} 

     # How it works is,

    $audiostuff[0] # is first element of array, 

    $audiostuff[0]->{'AudioIndex'} # -> is used because element we get 
above is hash reference and then we get value at key 'AudioIndex'.

     # Similarly for 

$audiostuff[0]->{'AudioIndex'}->{'StartByteOffset'} 
```

# scala - 如何使用用户定义的相等性实现 Set

> ID：12739432
> 
> 赞同：15
> 
> 时间：2012-10-05T04:22:40.250
> 
> 标签：scala, set

这个问题与这个问题有关[：](https://stackoverflow.com/questions/2341672/equality-relations-in-scala)是否有可能在 Scala 中创建一个类似 Set 的类（意味着它正在扩展`Set`特征），其中用于定义包含关系的相等性由用户定义而不是定义`==`？

测试这是否真的有效的一种方法是检查是否`filter`返回相同的集合类型。

```
// typeclass for equality
trait Equals[T] {
  def isEqual(t1: T, t2: T): Boolean
}

// an object representing plane coordinates
case class Coordinate(i: Int, j: Int)

// an equality saying that 2 coordinates are equal if they are on 
// the same horizontal line
implicit def horizontalEquality: Equals[Coordinate] = new Equals[Coordinate] {
   def isEqual(t1: Coordinate, t2: Coordinate) = t1.i == t2.i
}

// we create an EqualitySet[T] where T must verify [T : Equals]     
val set = EqualitySet[Coordinate]()

// set2 must be of type EqualitySet[Coordinate]
val set2 = set.filter(_.i > 0) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T04:22:40.250

我们在 Miles Sabin (@milessabin) 的 Scala 培训中作为一个小组创建了这个解决方案。

```
import scala.collection.mutable.ListBuffer
import scala.collection.generic.CanBuildFrom
import scala.collection.SetLike
import scala.collection.mutable.Builder

/**
 * we extend Set[T] to provide the Set-like interface
 * we extends SetLike[T, EqualitySet[T]] to specify that Set methods will return
 *   instances of type EqualitySet (and not simply Set)
 */
trait EqualitySet[T] extends Set[T] with SetLike[T, EqualitySet[T]] { outer =>
  /** we need to provide an Equals[T] instance to create an EqualitySet[T] */
  implicit def equality: Equals[T]  

  /** our internal implementation as a list of elements */
  protected val set = ListBuffer[T]()

  /** we need to implements those 4 methods */
  def contains(t: T) = set.exists(equality.isEqual(_, t))
  def +(t: T) = { if (!contains(t)) set += t; this }
  def -(t: T) = { set -= t; this }
  def iterator = set.iterator

  /** we must be able to provide an empty set with the proper equality definition */
  override def empty = new EqualitySet[T] { 
    override def equality = outer.equality
  }
}  

/** 
 * Companion object for the EqualitySet class
 */
object EqualitySet {

  /** 
   * this implicit is absolutely necessary to be able to preserve the resulting
   * collection type when calling `filter`
   */
  implicit def canBuildFrom[T] = new CanBuildFrom[EqualitySet[T], T, EqualitySet[T]] {
    def apply(from: EqualitySet[T]): Builder[T, EqualitySet[T]] = 
      new Builder[T, EqualitySet[T]] {
        // use a ListBuffer internally to accumulate elements
        private val elems = ListBuffer[T]()
        def +=(t: T) = { 
          if (!elems.exists(from.equality.isEqual(_, t))) elems += t
          this
        } 
        def clear() = elems.clear

        // when we finish building the collection
        // we can return an EqualitySet with the original equality relation
        def result() = new EqualitySet[T] {
          override val set = elems
          override def equality = from.equality
        }
     }
     def apply(): Builder[T, EqualitySet[T]] = 
       sys.error("this can't be implemented, because no equality instance is provided")
  }

  /** @return an EqualitySet for a type T having an Equals instance */
  def apply[T : Equals](ts: T*) = {
    var set  = new EqualitySet[T] {
      def equality = implicitly[Equals[T]]
    }.empty
    ts.foreach { t => set += t }
    set
  }
} 
```

然后，当我们使用上面的代码时，我们得到：

```
scala> val set = EqualitySet[Coordinate](Coordinate(-1, 2), 
                                         Coordinate(-1, 3), 
                                         Coordinate(1, 4))

set: java.lang.Object with test.EqualitySet[Coordinate] = 
     Set(Coordinate(-1,2)
         Coordinate(1,4))

scala> val set2 = set.filter(_.i > 0)

// still an EqualitySet[Coordinate] \o/ */
set2: test.EqualitySet[Coordinate] = Set(Coordinate(1,4)) 
```

# c - 理解一些源代码

> ID：12739436
> 
> 赞同：0
> 
> 时间：2012-10-05T04:22:46.607
> 
> 标签：c, windows

```
gcc 4.7.2
c89 
```

你好，

我正在审查某人的源代码，我遇到了这个。

我有这个声明和定义，我不明白它的作用。我知道静态意味着它不会从文件中导出。

```
static SERVICE_STATUS_HANDLE g_win_status_handle = NULL; 
```

因为它被设置为 NULL 它看起来像一个指针。SERVICE_STATUS_HANDLE 没有在其他任何地方定义。只有这个文件。

它是这样使用的，这是比较 SERVICE_STATUS_HANDLE 转换为 0 或 NULL 后 g_win_status_handle 是否等于 NULL：

```
if(g_win_status_handle == (SERVICE_STATUS_HANDLE)0) {
    /* do something */
} 
```

像这样：

```
if(!SetServiceStatus(g_win_status_handle, &g_win_status)) {
    /* do something */
} 
```

非常感谢，如果有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:52:02.540

我做了小程序

```
#include<stdio.h>

static SERVICE_STATUS_HANDLE g_win_status_handle = NULL;
int main()
{
if(g_win_status_handle == (SERVICE_STATUS_HANDLE)0) {
        printf("ksdfbhdejkfb");
}
return 0;
} 
```

编译于`gcc (GCC) 4.5.1 20100924 (Red Hat 4.5.1-4)`

带有 c89 标志，例如

```
gcc -std=c89 temp.c 
```

它的错误

```
temp.c:3:30: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘g_win_status_handle’
temp.c: In function ‘main’:
temp.c:6:4: error: ‘g_win_status_handle’ undeclared (first use in this function)
temp.c:6:4: note: each undeclared identifier is reported only once for each function it appears in
temp.c:6:28: error: ‘SERVICE_STATUS_HANDLE’ undeclared (first use in this function)
temp.c:6:50: error: expected ‘)’ before numeric constant 
```

很明显，SERVICE_STATUS_HANDLE 必须在某个地方定义。如果没有定义，那么你的代码将如何编译？

可能会在某些头文件中定义..

* * *

**更新了评论的答案**

`SERVICE_STATUS_HANDLE`被定义`windows.h`并且它将会包括。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)

# iis - 有没有一种对用户隐藏 url 的好方法？

> ID：12739440
> 
> 赞同：0
> 
> 时间：2012-10-05T04:23:14.680
> 
> 标签：iis

我知道的三个选项：

1.  在网络服务器上重命名
2.  html5 history.pushstate()
3.  据称元标签

我正在开发一个严重依赖于知道客户端的 url 的应用程序。我同意这是一个糟糕的设计，但那是另一个问题。就是这样。

有没有什么好的安全方法可以使 URL 只是域名而不是其他任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:46:53.617

我认为这也取决于您用于实现的技术，但我想可以使用 URL 重写？

有关的

*   [http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)
*   [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)
*   [MVC - 重写 URL 以仅显示域](https://stackoverflow.com/questions/12495577/mvc-rewrite-url-to-display-domain-only)[ASP.NET MVC]

# perl - 在 Perl 中写入文件

> ID：12739443
> 
> 赞同：16
> 
> 时间：2012-10-05T04:23:26.887
> 
> 标签：perl, file-handling

考虑：

```
#!/usr/local/bin/perl
$files = "C:\\Users\\A\\workspace\\CCoverage\\backup.txt";
unlink ($files);
open (OUTFILE, '>>$files');
print OUTFILE "Something\n";
close (OUTFILE); 
```

上面是我用Perl写的一个简单的子程序，但是好像不行。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-05T04:30:51.433

变量仅在使用双引号的字符串中插入`"`。如果您使用单引号`'`，`$`则将被解释为美元。

尝试使用`">>$files"`而不是`'>>$files'`

始终使用

```
use strict;
use warnings; 
```

这将有助于获得更多警告。

无论如何也要声明变量

```
my $files = "..."; 
```

您还应该检查的返回值`open`：

```
open OUTFILE, ">>$files"
  or die "Error opening $files: $!"; 
```

**编辑**：正如评论中所建议的那样，打开了三个参数的版本以及其他一些可能的改进

```
#!/usr/bin/perl

use strict;
use warnings;

# warn user (from perspective of caller)
use Carp;

# use nice English (or awk) names for ugly punctuation variables
use English qw(-no_match_vars);

# declare variables
my $files = 'example.txt';

# check if the file exists
if (-f $files) {
    unlink $files
        or croak "Cannot delete $files: $!";
}

# use a variable for the file handle
my $OUTFILE;

# use the three arguments version of open
# and check for errors
open $OUTFILE, '>>', $files
    or croak "Cannot open $files: $OS_ERROR";

# you can check for errors (e.g., if after opening the disk gets full)
print { $OUTFILE } "Something\n"
    or croak "Cannot write to $files: $OS_ERROR";

# check for errors
close $OUTFILE
    or croak "Cannot close $files: $OS_ERROR"; 
```

# php - 在此代码中正确放置 strtolower()

> ID：12739444
> 
> 赞同：-1
> 
> 时间：2012-10-05T04:23:27.897
> 
> 标签：php

我想将 strtolower() 添加到下面的代码中

```
$skin = new skin('movie/similar_rows'); $similar_rows = '';
while ($TMPL = mysql_fetch_assoc($similar_result)) {
$TMPL['title_encoded'] = str_replace("+", "-", urlencode($TMPL['title'])); 
```

我尝试了以下代码，但它不起作用：

```
$skin = new skin('movie/similar_rows'); $similar_rows = '';
while ($TMPL = mysql_fetch_assoc($similar_result)) {
$TMPL['title_encoded'] = strtolower(str_replace("+", "-", urlencode($TMPL['title']))) 
```

有什么建议么？

我对编码很陌生，所以不要跳到我身上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:31:46.953

您错过了已修改行末尾的分号。

要调试这种情况（假设您在本地机器上开发，而不是在生产中），最好：

1.  将`error_reporting`级别设置为`E_ALL`
2.  将错误输出到屏幕：`display_errors = on`

[您可以在手册http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)中详细了解这些指令

# c# - WaitCallback 中下划线的含义

> ID：12739448
> 
> 赞同：7
> 
> 时间：2012-10-05T04:23:39.033
> 
> 标签：c#, .net, multithreading, linq

```
ThreadPool.QueueUserWorkItem(new WaitCallback((_) => { MyMethod(param1, Param2); }), null); 
```

您能解释一下 WaitCallBack 构造函数中下划线 (_) 的含义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T04:28:28.860

unsercore 实际上是匿名方法的参数。如果需要一个接受输入参数的 lambda 表达式，但实际上并没有使用输入参数，这是一种常见的技术。

它完全等同于：

```
new WaitCallback(x => { MyMethod(param1, Param2); }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:29:52.130

**下划线是一个有效的 C# 标识符名称**，通常与 lambda 表达式一起使用，以指定将被忽略的表达式的参数

您可能会看到：[Nice C# idiom for parameterless lambdas](http://charlieflowers.wordpress.com/2009/04/02/nice-c-idiom-for-parameterless-lambdas/)

# c++ - 为什么 X(X&) 可以被调用两次？

> ID：12739452
> 
> 赞同：3
> 
> 时间：2012-10-05T04:24:20.080
> 
> 标签：c++, constructor, destructor

我写了这段代码：

```
 struct X{
        int val;

        void out(const string& s, int nv)
            {cerr<<this<<"->"<<s<<": "<<val<<"("<<nv<<")\n";}

        X() {out("X(int)",0); val=0;}
        X(int v){out("X(int)",v); val=v;}
        X(const X& x){out("X(X&)",x.val); val=x.val;}
        X& operator=(const X& a)
            {out("X::operator=()",a.val); val=a.val; return *this;}
        ~X() {out("~X()",0);}
    };

    X copy(X a) {return a;}

    int main{
        X loc2;
        X loc(5);
        loc2 = copy(loc);
        return 0;
    } 
```

输出是这样的（在 VS2010 中）：

```
003BFAA0->X(int): -858993460(0)
003BFA94->X(int): -858993460(5)
003BF964->X(X&): 723486321(5)
003BF994->X(X&): -858993460(5)
003BF964->~X(): 5(0)
003BFAA0->X::operator=(): 0(5)
003BF994->~X(): 5(0) 
```

前两行很好。但是第三行和第四行显示它调用了 X(X&) 两次。副本（X a）中只有一个“X a”。为什么 X(X&) 可以被调用两次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T04:27:13.510

> **为什么`X(X&)`会被叫两次？**

使用函数调用：

```
loc2 = copy(loc); 
```

`copy(loc);`两次调用复制构造函数：

1.  `loc`创建传递给函数的参数的副本。
2.  创建返回对象的副本`a`。

在 C/C++ 中，函数的参数默认***按值传递***。因此，在函数调用中接收到的不是实际参数，而是传递的对象/变量的副本。这个副本是通过调用复制构造函数创建的。
您的`copy()`函数还会再次***按值返回，***从而导致调用复制构造函数。

请注意，在某些情况下，编译器可能会省略（删除）对复制构造函数的调用并内联构造对象，这种现象称为**复制省略**。通常，您不应该编写任何会根据复制次数产生副作用的代码正在调用构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:58:02.337

当“return a”被执行时，类型 X 的对象的副本被创建，因为返回类型是 X（不是 X&）。（如果是 X& - 这也是一个错误 - 复制函数“a”的形式参数是一个具有局部范围的变量）

# jquery - Blackberry OS 5 Web 应用程序性能调优

> ID：12739455
> 
> 赞同：1
> 
> 时间：2012-10-05T04:24:36.853
> 
> 标签：jquery, performance, jquery-mobile, browserfield, blackberry-os5

我们在 jquerymobile 1.0.1 和 jquery 1.7.1 中有一个 Web 应用程序。对于 BB 设备，我们使用 BrowserField JDE 5 API 创建了一个包装应用程序，用于启动应用程序 UI。使用 web DOM 缓存在离线模式下工作。

性能方面，该应用程序在 OS6+ 设备上运行良好，但在 OS5+ 设备上却非常痛苦。浏览应用程序太慢。

由于动态性质，我们有 6 页中的 3 页；它们是用 jquery 编写的。

请建议一些有助于提高应用程序性能的良好性能调整步骤。

# string - 如何在mips程序集中迭代字符串

> ID：12739463
> 
> 赞同：3
> 
> 时间：2012-10-05T04:25:27.353
> 
> 标签：string, loops, mips, system-calls

所以我现在正在做一个项目，我们必须接受一个字符串并将其转换为所有大写字母，然后如果 toUpper 或 toLower 字节不是 0，则转换为小写字母。现在我仍在处理大写部分（猜测小写字母几乎相同）但是当我通过字符串查找大写字母或调用系统调用进行打印时，我被卡住了。任何帮助都会很棒。这是我到目前为止所拥有的：

```
 .data

    toUpper: .byte   1
    toLower: .byte   0

    string:
        .asciiz "   A long time ago in a Galaxy far, far away...."

# Your code goes below this line

    origString:
        .asciiz "Original string:\n"

    toUpForwardStr:
        .asciiz "\nConverted to upper-case:\nForward:\n"

    toLowerForwardStr:
        .asciiz "\nConverted to lower-case:\nForward:\n"

    backwardStr:
        .asciiz "Backward:"

.text

main:   
    # Function prologue
    subu    $sp, $sp, 24                    # allocate stack space -- default of 24 here
    sw      $fp, 0($sp)                     # save caller's frame pointer
    sw      $ra, 4($sp)                     # save return address
    addiu   $fp, $sp, 20                    # setup main's frame pointer

    la      $a0, origString             #Print "Original String:"
    addi    $v0, $zero, 4
    syscall

    la      $a0, string                 #Print string
    addi    $v0, $zero, 4
    syscall

    la      $s0, toUpper
    sb      $s1, 0($s0)                 #toUpper stored in $s1

    la      $s0, toLower
    sb      $s2, 0($s0)                 #toLower stored in $s2

    bne     $s1, $zero, toUpperCase     #Jump toUpperCase if toUpper ≠ 0

    toUpperCase:
        la      $a0, toUpForwardStr     #Print "Converted to upper-case:"
        addi    $v0, $zero, 4               #      "Forward:"
        syscall

        la      $s3, string             #$s3 holds address to string

        addi    $s1, $zero, 0               #$s1 = i = 0

        j   upperCaseLoop                   #Goto upperCaseLoop

        upperCaseLoop:

            # Compute address of string[i]

            add     $t2, $s3, $s1           # $t2 = address of string[i]
            lb      $t3, 8($t2)             # $t3 = elements[i]

            beq     $t3, $zero, upperDone   # test if for loop is done

            addi    $t6, $zero, 96          #$t6 = 96 (lowercase letters)
            bgt     $t3, $t6, isLowercase1#If letter is lowercase goto isLowercase1

            comeBackFromLowercaseIfs:

            move    $t3, $a0
            addi    $v0, $zero, 11
            syscall

            addi    $s1, $s1, 1             # i++
            j       upperCaseLoop

    upperDone:

    bne     $s2, $zero, toLowerCase     #Jump toLowerCase if toLower ≠ 0

    toLowerCase:

        la      $a0, toLowerForwardStr  #Print "Converted to lower-case:"
        addi    $v0, $zero, 4               #      "Forward:"
        syscall
        j       done                        #The END!!

    isLowercase1:
        addi    $t7, $zero, 123         #$t7 = 123
        blt     $t3, $t7, isLowercase2  #Goto isLowercase2
        j       comeBackFromLowercaseIfs    #Go back to uppercaseLoop

    isLowercase2:
        addi    $t3, $zero, -30         #changes letter to lowercase
        j       comeBackFromLowercaseIfs    #Go back to uppercaseLoop

done:       
    # Epilogue for main -- restore stack & frame pointers and return
    lw    $ra, 4($sp)     # get return address from stack
    lw    $fp, 0($sp)     # restore the caller's frame pointer
    addiu $sp, $sp, 24    # restore the caller's stack pointer
    jr    $ra             # return to caller's code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:15:49.877

1 这个

```
move    $t3, $a0 
```

应该

```
move    $a0, $t3 
```

2 这个

```
lb      $t3, 8($t2) 
```

应该

```
lb      $t3, 0($t2) 
```

3 这个

```
addi    $t3, $zero, -30         #changes letter to lowercase 
```

应该

```
addi    $t3, $t3, -32         #changes letter to lowercase 
```

# apache-flex - 在应用字体之前如何检测字体是否适用于文本层？

> ID：12739466
> 
> 赞同：0
> 
> 时间：2012-10-05T04:25:41.757
> 
> 标签：apache-flex

我在 flex 中创建了一个面板，它将有 2 个组合框，它们将显示系统字体系列和字体样式，当用户从组合框中选择任何字体系列或样式时，字体将应用于所选文本层。但是当我尝试为例如欧元符号应用一些字体时，所选文本图层中的文本将变为所有矩形。我发现 Photoshop 的字符面板没有在所选文本图层上应用字体（欧元符号）。

flex中是否有任何方法可以帮助我们检测字体是否适用于所选文本层？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:30:00.250

对于您的问题。我需要一种可以告诉我是否可以应用系统字体的方法？在这里，我有示例，您可以在其中阅读系统字体并检查组合框是否该字体在系统字体中可用。请找到以下代码： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            private var systemFontsCollection:ArrayCollection = new ArrayCollection(); 

            private function getSystemFont():void
            {
                var fonts:Array = Font.enumerateFonts(true).sortOn("fontName");
                for (var i:int = 0; i < fonts.length; i++) {
                    systemFontsCollection.addItem(new String(fonts[i].fontName));
                }
            }

            private function init():void 
            {
                var fontName:String = fontName.selectedLabel;

                if(systemFontsCollection.contains(fontName))
                {
                    trace(" ----System Font is applied ----");
                }
                else{
                    trace(" ----System Font is NOT applied ----");
                }

            }
        ]]>
    </fx:Script>

    <mx:Form>
        <mx:FormItem label="Font name:">
            <mx:ComboBox id="fontName" change="init();" creationComplete="getSystemFont()">
                <mx:dataProvider>
                    <fx:Array>
                        <fx:String>Arial</fx:String>
                        <fx:String>ArialEmbedded</fx:String>
                        <fx:String>Verdana</fx:String>
                        <fx:String>VerdanaEmbedded</fx:String>
                    </fx:Array>
                </mx:dataProvider>
            </mx:ComboBox>
        </mx:FormItem>
    </mx:Form>
</s:Application> 
```

# c# - 嵌套 LINQ 查询，错误消息

> ID：12739467
> 
> 赞同：5
> 
> 时间：2012-10-05T04:25:47.300
> 
> 标签：c#, asp.net, linq

我目前正在尝试在 linq 中进行嵌套查询，但收到一条错误消息：

```
var subcatquery = from categories in mydb.Categories
                  where categories.ParentId == null
                  select new
                  {
                      category = categories.Name,
                      subcat = (from sub in mydb.Categories
                                where sub.ParentId == sub.Id
                                select new
                                {
                                    subcatItem = sub.Name,
                                    subcatId = sub.Id
                                 })
                    }; 
```

结果视图 =`The type '<>f__AnonymousType0<subcatItem,subcatId>' exists in both 'myapplication.dll' and 'System.Web.dll'`

我无法理解为什么..如果我删除子查询并将其放在自己的位置上...那就很好了。

`subcat`类型是 a ，这`collection<>`是问题所在吗？

```
 class categoryGroup 
    {
        public string category;
        public Collection<subcategoryGroup> subcat;

    }
    class subcategoryGroup
    {
        public string subcatItem;
        public int subcatId;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:58:34.330

您是否尝试定义/命名类型而不是保持匿名，

```
var subcatquery = from categories in mydb.Categories
                   where categories.ParentId == null
                   select new categoryGroup()
                   {
                       category = categories.Name,
                       subcat = (from sub in mydb.Categories
                                 where sub.ParentId == sub.Id
                                 select new subcategoryGroup()
                                 {
                                     subcatItem = sub.Name,
                                     subcatId = sub.Id
                                  })
                     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:01:58.343

在我的项目中，我正在使用这样的子查询，如下所示

```
 var data = (from con in dbData.tblPresenters
                        where con.PresenterID == ID
                        select new
                        {
                            Name = con.Name,

                            Title = dbData.tblTitles.Where(x => x.TitleID == con.PresenterTitleID).FirstOrDefault()
                        }).ToList(); 
```

我想这会对你有所帮助....

# mips - MIPS 将键盘输入（整数）存储到数组

> ID：12739468
> 
> 赞同：0
> 
> 时间：2012-10-05T04:25:50.437
> 
> 标签：mips

我正在尝试从键盘中取出 4 个数字并将其存储到一个数组中。我想出了以下代码，但是当我尝试打印数组中的第一个数字时，它会打印 0。为什么它不打印数组中的第一个值？

```
main: 
li $v0, 5 # read integer 
syscall
add $s0, $v0, $zero #store input1 to s0

li $v0, 5 # read integer 
syscall
add $s1, $v0, $zero #store input2 to s0

li $v0, 5 # read integer 
syscall
add $s2, $v0, $zero #store input3 to s0

li $v0, 5 # read integer 
syscall
add $s3, $v0, $zero #store input4 to s0

.data 
list:   $s0, $s1, $s2, $s3 #set array from keyboard values
.text

#get the array into a register
la $t3, list # put address of list into $t3
lw $t4, 0($t3) # get the value from the array cell

li $v0, 1 # print integer 
move $a0, $t4 # what to print is stored at $s1 
syscall # make system call

exit:    
    li $v0, 10 # exit system call 
syscall 
```

想法来自： [http](http://www.cs.pitt.edu/~xujie/cs447/AccessingArray.htm) ://www.cs.pitt.edu/~xujie/cs447/AccessingArray.htm 但他们使用硬编码的整数而不是从键盘保存到寄存器的值。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:04:17.963

这：

```
.data 
list:   $s0, $s1, $s2, $s3 #set array from keyboard values
.text 
```

不能这样工作。您需要`sw`将寄存器的值存储到内存中。

因此，在程序开始时，保留一些空间来存储值：

```
.data 
list:  .space 16
.text 
```

然后，在读取值后，将它们存储为`sw`：

```
sw $s0, list
sw $s1, list + 4
sw $s2, list + 8
sw $s3, list + 12 
```

# unit-testing - 为 codeigniter 自动生成测试用例

> ID：12739470
> 
> 赞同：-1
> 
> 时间：2012-10-05T04:25:51.357
> 
> 标签：unit-testing, codeigniter, phpunit

如何使用命令**phpunit-skelgen**为 codeigniter 或任何其他基于 MVC 的项目生成测试用例，我必须自动创建带有断言的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:34:14.547

刚才我得到了这个问题的解决方案，

我们可以在**netbeans**中使用 bootstrap 文件，然后启用创建单元测试用例复选框，然后右键单击相应的文件，我们可以创建单元测试用例。

[http://netbeans.org/kb/docs/php/phpunit.html](http://netbeans.org/kb/docs/php/phpunit.html)

# solr - Select 和 More Like This(MLT) 搜索之间的区别

> ID：12739471
> 
> 赞同：2
> 
> 时间：2012-10-05T04:26:05.407
> 
> 标签：solr

`/select?q=`我的应用程序在使用 SOLR的普通搜索 () 中运行良好。

普通查询网址： `/select?q=title:lovely`

现在想在我的应用程序中实现 More Like This (MLT)。像这样在 Solr 中配置 MLT。

## **solrconfig.xml**

```
 <requestHandler name="/mlt" class="solr.MoreLikeThisHandler">
  <lst name="defaults">
            <str name="mlt.fl">title</str>
            <str name="mlt.mintf">1</str>
            <str name="mlt.mindf">2</str>
            <str name="mlt.boost">true</str> 
  </lst>
  </requestHandler> 
```

**网址**：

`/mlt?q=title:lovely&mlt.fl=title`

我得到结果并使用 MLT 进行计数，就像普通的选择查询一样。如果我对 MLT 做了任何错误的配置，你能指导我吗？

提前致谢，

阿尼尔贾扬蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:35:26.207

solrconfig.xml 中的设置对我来说是正确的。`termVectors=true`正如 Paige Cook 在他的回答中提到的那样，如果您使用的字段设置为在 schema.xml中存储术语向量，您将获得更好的结果。事后无法添加术语向量，因此您必须重建索引才能添加它们。您可以考虑将`mlt.count`参数添加到您的请求中以仅获取前 N 个结果。

我获得良好 MLT 结果的经验是，参数需要根据实验进行一些微调，特别是`mlt.mintf`. 从低位开始，然后慢慢增加，直到您开始获得“感觉正确”的结果。相似性是一个非常主观的东西，试图量化并且需要一些实验来获得正确的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:14:59.437

根据 Solr Wiki 上的[MoreLikeThis](http://wiki.apache.org/solr/MoreLikeThis)文档，您需要为架构中的字段启用 TermVectors，或者必须存储该字段。

此外，您可能需要考虑在上面链接中概述的 SearchHandler 中使用 MoreLikeThisComponent。但这将取决于您计划如何在应用程序中使用/实现 MLT 功能。

# c++ - 确定缓存是回写还是通过

> ID：12739472
> 
> 赞同：3
> 
> 时间：2012-10-05T04:26:22.740
> 
> 标签：c++, caching, profiling

如何通过测试写入来确定缓存类型（回写/直通）？我可以使用类似的方法，通过记录修改缓存的时间来确定缓存的级别和大小，但我需要与某些东西进行比较。例如。如果时间明显短于已知的 L1 通过缓存写入，我可以说它的回写。但是，我需要一个基线来比较，不是吗？

**[这是我在 GitHub 上的尝试](https://github.com/jiewmeng/cs3210-assign1/blob/master/cache-write.cpp)**

主要思想是：

*   如果它的写入，写入时间`x`与`x * 100`时间的关系大约是 100 倍
*   如果它写回，时间会差不多吗？

因此，时间循环的`WRITES_BASE`时间与时间的`WRITES`时间减去它们各自的仅执行循环的时间（无内存访问），并比较它们......这给我的印象是我的 Core i3 2100 有所有通过缓存写入......

```
16, 0.03, 1.04 (31.28) 
128, 0.07, 2.31 (31.78) 
2048, 0.10, 3.19 (31.74) 
```

上述值为：`test size (KB), time for WRITES_BASE, time for WRITES (t(WRITES)/t(WRITES_BASE))`

我猜我的实验的问题是我没有消除我运行`WRITES`更多次的时差......

**更新**

我注意到一个奇怪的是，如果我保留我的`WRITES = 64 * WRITES_BASE`，那么如果我有我的`WRITES_BASE = 4 million`。

```
16, 0.01, 0.13 (17.16) 
128, 0.01, 0.29 (31.60) 
2048, 0.01, 0.41 (30.53) 
```

如果我增加`WRITES_BASE = 16 million`

```
16, 0.02, 0.52 (25.53) 
128, 0.04, 1.16 (31.74) 
2048, 0.05, 1.57 (31.89) 
```

注意，`WRITES_BASE`越小，时间差越小，可能告诉我L1是回写缓存。但是，因为它并不总是正确的，例如。当我增加 WRITES_BASE 时，我想知道我是否有一些逻辑错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:16:52.243

使用此过程，您无法真正区分写回缓存和直写缓存。考虑：如果您使用回写缓存，则执行循环中的指令需要 X 时间，而将其写回需要 Y 时间。Y 不是由您的代码测量的（您没有围绕显式缓存刷新或类似的任何时间）。当您循环 N 次时，需要 N * X 时间，加上代码执行完成后的 Y 时间来刷新缓存。

使用直写高速缓存，X 更高，Y 为零。但是单个循环与多个循环的比率是相同的。因此，您无法区分此过程。

也就是说，有一些方法可以检测到这一点。关键是在计时时强制缓存刷新其缓存行。尝试比较写入各种大小的数组需要多长时间。在写入之间确保通过读取大量不相关的数据来刷新任何写回缓存（注意：不要只是分配一个大数组并从中读取而不写入它 - 在程序启动时写入一次，然后读取整个东西在计时运行之间。否则阵列中的所有页面可能指向物理内存中相同的归零页面，具体取决于您的操作系统）。

您还可以尝试查看写入大量数据时会影响*读取*速度。在直写式缓存中，读取永远不会因为您最近写入数据而花费更长的时间。在回写式高速缓存中，读取可能必须等待高速缓存刷新 - 因此定时读取本身与写入后立即可能会给您一些有趣的结果。

# shell - 带模运算的 Shell 编程

> ID：12739475
> 
> 赞同：3
> 
> 时间：2012-10-05T04:26:35.137
> 
> 标签：shell, modulus

我正在尝试编写一个 shell 程序，给定一个参数，打印程序的名称和参数中的每个奇数字（即，不是偶数字）。但是，我没有得到预期的结果。在跟踪我的程序时，我注意到，尽管奇数单词的模数返回值为 1（例如，第 5 个单词，5 % 2 = 1），但程序仍然将结果视为 0（偶数单词）并且不打印这个单词。这里可能出了什么问题？

这里包括我的代码和跟踪的输出，以确切了解我得到了什么。（很抱歉没有将代码包含为文本，我是 vim 新手，还不知道复制/粘贴） ![代码](../Images/1c03fd91ac20cc6212c7443cfd511511.png) ![输出](../Images/8e27cc2e21794b871dd5d35d90f20f82.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:28:42.997

`$result` （需要美元符号）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:31:12.117

更改`echo \$$#`为`echo $1`。但是重写脚本可能会更简单：

```
#!/bin/sh

echo $0
while [ $# -gt 0 ]; do
    expr $# % 2 > /dev/null && echo $1
    shift
done 
```

# java - 二元运算符的错误操作数类型

> ID：12739481
> 
> 赞同：4
> 
> 时间：2012-10-05T04:27:13.387
> 
> 标签：java

我是编程新手，我不明白为什么`||`在第十行`while (one%6||one%17){`被认为**是二元运算符的坏操作数类型**。如果有人可以帮助我理解这一点，将不胜感激。

```
import java.util.Scanner;

public class DivisibleBy6or17 {
    public static void main(String[] args){             
        Scanner in = new Scanner(System.in);
        System.out.print("Enter Value: ");
        int one = in.nextInt();
        int sum=0;

        while (one%6||one%17){
            System.out.print("Enter Value: ");
            sum=+1;
        }
        System.out.print("Numbers read: " + sum);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T04:28:48.147

在 Java 中，您必须在`||`. 而且，既不是布尔值`one % 6`也不`one % 17`是布尔值。然而，`one % 6 != 0`并且`one % 17 != 0`是。

# struts2 - 在struts2中提交另一个jsp时更新一个jsp的值

> ID：12739483
> 
> 赞同：0
> 
> 时间：2012-10-05T04:27:45.040
> 
> 标签：struts2

嗨，我有两个 jsp 的功能。结果.jsp 和数据.jsp。当点击按钮 data.jsp 在弹出窗口中打开。我以该表格添加数据并提交数据。提交弹出窗口将关闭并希望在 result.jsp 上汇总数据。

如何在提交 data.jsp 时更新 result.jsp 并更新值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:49:16.283

您可以在弹出式 jsp 中包含的 javascript 中使用类似的内容

**下面的url**是您在提交弹出窗口后需要调用的操作，这通常只是对 result.jsp 的刷新（您用于查看 result.jsp 的操作）

```
//earlier code . now refresh the final page.
   window.opener.document.forms[0].action="url.action";
   window.opener.document.forms[0].submit();
 //more code 
```

# objective-c - NSURLConnection（同步请求）返回（空）

> ID：12739489
> 
> 赞同：0
> 
> 时间：2012-10-05T04:28:39.513
> 
> 标签：objective-c, nsurlrequest

我想从网站获取 HTML。我写了下面的代码，但这会返回`(null)`。

```
NSString *strURL = @"http://www.googole.com";

- (NSString *)getHtml
{
    NSURL *url = [NSURL URLWithString: strURL];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    NSURLResponse *response = nil;
    NSError *error = nil;
    NSData *data = [NSURLConnection sendSynchronousRequest : req
                                         returningResponse : &response
                                                     error : &error];
    NSString *strData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    return strData;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:31:38.687

我认为您输入了错误的网址。它应该是`NSString *strURL = @"http://www.google.com";`

# iphone - 使用外部模态控制器输入数据时，UITableViewController 不会重新触发

> ID：12739495
> 
> 赞同：0
> 
> 时间：2012-10-05T04:29:24.757
> 
> 标签：iphone, xcode, uitableview

我有一个`UITableViewController`允许通过另一个`TableviewController`用户可以输入其数据的单元格添加到它的单元格中。我将数据正确地作为状态传递`NSString`回第一个。但是，第一个不是重新射击。我相信这是因为我使用了模态转换。有人会向我解释如何通过模态转换重新启动吗？`TableViewController``NSLog``TableViewController``UITableViewController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:26:19.253

在

```
-(void)viewWillAppear:(BOOL)animated 
```

添加到表输入数组（数据源）调用后

```
 [tableView reloadData]; 
```

# jquery - 来自 MySQL 结果的 jQuery 自动完成（无 JSON - 如果可能）

> ID：12739497
> 
> 赞同：0
> 
> 时间：2012-10-05T04:29:35.830
> 
> 标签：jquery, mysql

我需要在我的网站上具有自动完成功能，但我不是 JSON 专家。我从不处理 JSON，所以我希望我仍然可以从普通的 MySQL 结果中自动完成。

但从我在这里看到的：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)我看不到从 MySQL 结果中获取自动完成的任何可能性。是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:34:13.067

你也可以简单地使用php

[在这里检查](http://www.mix26.com/demo/ajax-autocomplete/test.php)

这是 ajax 演示 :)

[下载](https://docs.google.com/file/d/0BzB2od8c0umkZGE2ZDA2MzctMjA3Mi00YmJlLWExNTMtMzY5OGVhNDAxNzlh/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:33:11.683

您只需要进行 AJAX 调用并获取搜索结果，然后将它们作为 JSON 发送回客户端。然后只需将其与自动完成文本框绑定即可。

要使用的 jQuery 插件是[http://docs.jquery.com/UI/API/1.8/Autocomplete](http://docs.jquery.com/UI/API/1.8/Autocomplete)

```
Example- A textbox with ID 'txtlocation' is added with autocomplete functionality here.
$(document).ready(function(){

   $("#txtlocation").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/PublicHome/AutoPopulateLocation", //Call to Server Side 
            data: "{ 'searchText': '" + request.term + "' }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function (data) { return data; },
            success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            value: item.Suburb 

                    }))
                },
            error: function (XMLHttpRequest, textStatus, errorThrown) {

            }
        });
    },
    open: function (event, ui) {
        $(this).autocomplete("widget").css({
            "width": 344,
            "font-size": 11,
            "font-family": "Arial"
        });
      }
   });

}); 
```

# c# - 尝试通过 ashx 处理程序显示图像时出错 - 无法显示图像“http://localhost:57157/......”，因为它包含错误

> ID：12739498
> 
> 赞同：0
> 
> 时间：2012-10-05T04:29:49.887
> 
> 标签：c#, asp.net, asp.net-mvc

这是我的代码：

HTML：`<img src="thumbCreate.ashx?Id=223" alt="asd" />`

HTTP 处理程序：`

```
public void ProcessRequest (HttpContext context)
    {
        CreateThumbNail(context);
    }
private void CreateThumbNail(HttpContext context)
{
        string resourceId = context.Request.QueryString["Id"];
        context.Response.Write("No resource found for Id = " + resourceId);
        Bitmap original = new Bitmap("C:/Devp/My work/ASHXSampleApp/Images/Desert.jpg");
        int oWidth = original.Width;
        int oHeight = original.Height;

        int preferredWidth = 80;
        int preferredHeight = 100;

        int thumbWidthFactor = oWidth / preferredWidth;
        int thumbHeightFactor = oHeight / preferredHeight;

        int maxFactor = Math.Max(thumbWidthFactor, thumbHeightFactor);

        int thumbNailWidth = oWidth / maxFactor;
        int thumbNailHeight = oHeight / maxFactor;
        Bitmap thumbNailImage = (Bitmap)original.GetThumbnailImage(thumbNailWidth, thumbNailHeight, ThumbNailCallback, IntPtr.Zero);

        context.Response.ContentType = "image/Jpeg";
        thumbNailImage.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);

}` 
```

但是此代码不显示图像。当我手动尝试在 Firefox 中运行处理程序时，它给了我一个错误：-“无法显示图像“http://localhost:57157/ASHXSampleApp/thumbCreate.ashx?Id=223”，因为它包含错误。” 任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:34:31.883

问题来自您的这部分代码。

```
string resourceId = context.Request.QueryString["Id"];
context.Response.Write("No resource found for Id = " + resourceId); 
```

您总是在响应流中添加一个字符串，然后再写入图像数据，这将导致字符串损坏。删除它（或使其有条件，以便在发生错误或其他情况时添加它），它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:14:38.373

context.Response.WriteFile() 是否有效？

# iphone - 如何从 iPhone 应用程序发送彩信

> ID：12739506
> 
> 赞同：8
> 
> 时间：2012-10-05T04:31:25.110
> 
> 标签：iphone, objective-c, ios, mms

在我的新 iOS 项目中，我希望最终用户能够`MMS text and/or images`（来自 TextField）在 UIButton Action 中。我见过具有此功能的类似应用程序（带有文本，还没有看到带有图像的应用程序）。

我在谷歌搜索但找不到如何做到这一点，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T04:42:45.383

这将正常工作

```
MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];

UIPasteboard *pasteboard = [UIPasteboard generalPasteboard]; 
pasteboard.persistent = YES;
pasteboard.image = [UIImage imageNamed:@"PDF_File.png"];

NSString *phoneToCall = @"sms:";
NSString *phoneToCallEncoded = [phoneToCall stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSURL *url = [[NSURL alloc] initWithString:phoneToCallEncoded];
[[UIApplication sharedApplication] openURL:url];    

if([MFMessageComposeViewController canSendText]) {
    NSMutableString *emailBody = [[NSMutableString alloc] initWithString:@"Your Email Body"];
    picker.messageComposeDelegate = self;
    picker.recipients = [NSArray arrayWithObject:@"123456789"];
    [picker setBody:emailBody];// your recipient number or self for testing
    picker.body = emailBody;
    NSLog(@"Picker -- %@",picker.body);
    [self presentModalViewController:picker animated:YES];
    NSLog(@"SMS fired");
} 
```

# php - 通过 PHP 设置的 crontab 定期备份 MySQL 数据库不起作用

> ID：12739509
> 
> 赞同：0
> 
> 时间：2012-10-05T04:31:33.147
> 
> 标签：php, mysql, linux, cron, crontab

我提供了一个选项来通过我的 php 应用程序安排定期 mysql 转储。为用户“www-data”设置了 Crontab，如下所示：

```
1 * * * * mysqldump --user=root --password=1 --host=localhost dbname > /var/www/myapp/../backups/db_`date '+%F-%H-%M-%S'`.sql 
```

当我这样做时，`crontab -u www-data -l`我可以看到上面的 cron。

问题是这个 cron 没有被执行。它应该每 1 分钟执行一次，对吗？我还设置了`/var/www`as 777 的权限。仍然没有创建文件。

```
mysqldump --user=root --password=1 --host=localhost dbname > /var/www/myapp/../backups/db_`date '+%F-%H-%M-%S'`.sql 
```

当我在终端中输入这个文件时，文件创建得很好。问题仅在于 cron 作业。请帮忙。

## 更新

我把它改成

```
* * * * * mysqldump --user=root --password=1 --host=localhost dbname > /var/www/myapp/../backups/db_`date '+%F-%H-%M-%S'`.sql 
```

即使现在它也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:39:57.173

有时 crontab 并不具备常规 shell 所具备的所有环境变量。

也许它不知道在哪里可以找到 mysqldump。您可以尝试提供命令的完整路径，如下所示：

```
* * * * * /usr/bin/mysqldump --user=root --password=1 --host=localhost dbname > /var/www/myapp/../backups/db_`date '+%F-%H-%M-%S'`.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:01:02.513

您列出的 cron 应该在每小时的第一分钟执行。

我用一个简单的 python 脚本做类似的事情：

```
import os
os.system('dump command for database1')
os.system('dump command for database2') 
```

它让我的一切都井井有条。我在 cronjob 上运行脚本。

```
1 * * * * python /path/to/script 
```

# bash - 一次将多个字段设置为 awk 变量

> ID：12739515
> 
> 赞同：1
> 
> 时间：2012-10-05T04:31:52.760
> 
> 标签：bash, awk

我正在尝试一次将一个 awk 变量字段设置为多个字段。

现在我只能一一设置变量。

```
for line in `cat file.txt`;do
    var1=`echo $line | awk -F, '{print $1}'`
    var2=`echo $line | awk -F, '{print $2}'`
    var3=`echo $line | awk -F, '{print $3}'`

    #Some complex code....
done 
```

我认为这是昂贵的，因为它会多次解析 linux 变量。是否有一种特殊的语法可以一次设置变量？我知道 awk 有一个 BEGIN 和 END 块，但我试图避免 BEGIN 和 END 块的原因是为了避免嵌套的 awk。

我计划在 #Some complex code.... 部分放置另一个循环和 awk 代码。

```
for line in `cat file.txt`;do
    var1=`echo $line | awk -F, '{print $1}'`
    var2=`echo $line | awk -F, '{print $2}'`
    var3=`echo $line | awk -F, '{print $3}'`

    for line2 in `cat file_old.txt`;do
        vara=`echo $line2 | awk -F, '{print $1}'`
        varb=`echo $line2 | awk -F, '{print $2}'`

        # Do comparison of $var1,var2 and $vara,$varb , then do something with either
    done
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:50:18.703

You can use the `IFS` internal field separator to use a comma (instead of whitespace) and do the assignments in a `while` loop:

```
SAVEIFS=$IFS;
IFS=',';
while read line; do
    set -- $line;
    var1=$1;
    var2=$2;
    var3=$3;
    ...
done < file.txt

IFS=$SAVEIFS; 
```

This will save a copy of your current `IFS`, change it to a `,` character, and then iterate over each line in your file. The line `set -- $line;` will convert each word (separated by a comma) into a numeric-variable (`$1`, `$2`, etc.). You can either use these variables directly, or assign them to other (more meaningful) variable names.

Alternatively, you could use `IFS` with the answer provided by William:

```
IFS=',';
while read var1 var2 var3; do
    ...
done < file.txt 
```

They are functionally identical and it just comes down to whether or not you want to explicitly set `var1=$1` or have it defined in the `while`-loop's head.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T04:33:59.603

你为什么要使用`awk`？

```
while IFS=, read var1 var2 var3; do
  ...
done < file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:20:01.587

```
#!/bin/bash    
FILE="/tmp/values.txt"

    function parse_csv() { 
    local lines=$lines;
    > $FILE
    OLDIFS=$IFS;
    IFS=","
    i=0
    for val in ${lines}
    do
      i=$((++i))
      eval var${i}="${val}"
    done
    IFS=$OLDIFS;
    for ((j=1;j<=i;++j))
    do
      name="var${j}"
      echo ${!name} >> $FILE
    done

    }

    for lines in `cat file_old.txt`;do
     parse_csv;
    done 
```

您描述的问题只有 3 个值，是否有可能 3 个值可能不同并且是 4 或 5 或 undefined ？

如果是这样，上面将逐行解析 csv 并在名为 /tmp/values.txt 的文件中的新行上一次输出每个值

随意修改以符合您的要求，它比定义 3 个值更具动态性

# php - 如何在网页上自动列出 Web 服务器内的文件夹内容

> ID：12739525
> 
> 赞同：0
> 
> 时间：2012-10-05T04:33:18.700
> 
> 标签：php, javascript, file, download, webserver

我有一个程序可以将文件上传到我的网络服务器上的特定文件夹，我现在要做的是让用户自动访问该文件，所以在他上传文件后，它将被列在网页上，并且它将可供下载。无论如何这有可能吗？只要满足结果，任何javascript或php都可以，提前谢谢。

我想让网页自动列出用户上传文件的文件夹的内容，以便他们可以下载。我不想要索引，而是网页内的实际列表。就像您将文件上传到谷歌文档时一样，然后它会自动列出以供下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:49:42.950

Store the file paths of all uploaded files in a database. You can get the list of all uploaded files for the user with ajax and display them in real time. I believe Google uses ajax to accomplish what you're describing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:27:54.370

听起来您想使用[scandir 之](http://php.net/manual/en/function.scandir.php)类的东西。请记住，您传递的目录应该是一个绝对的服务器路径，这与您将用于形成实际页面链接的 www 根目录不同。

所以如果你有一个 index.php 和一个 /images/ 目录，你需要这样的东西：

```
$images_directory = "/images/";
$path_to_files = dirname(__FILE__) . $images_directory;

$dir_contents = scandir( $path_to_files ); 
```

然后，您可能希望过滤目录内容以仅显示图像：

```
$images = preg_grep("/(?i).(gif|jpg|png)$/", $dir_contents); 
```

现在你有了一组图像，你只需要格式化你的 html 链接：

```
foreach( $images as $image ){
    $file = $image_directory . $image;
    echo "<a href='$file'>$image</a>";
} 
```

综上所述，这是一种非常盲目的做法。它在某些情况下肯定很有用，但是如果您想做一些事情，例如按用户限制图像，并保存名称/描述/标签等图像信息，您可能希望在上传目录时简单地将目录保存在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:28:28.843

上传文件时，将路径和文件名保存在数据库中。成功上传后，通过ajax获取文件名并显示文件，当他/她下载时，从db中获取文件名和路径，如果找到则在目录中搜索，然后将其下载到客户端计算机。

# c# - 执行转发器项目服务器端

> ID：12739529
> 
> 赞同：0
> 
> 时间：2012-10-05T04:33:51.327
> 
> 标签：c#, javascript, asp.net

我有一个包含中继器的 asp:LinkLabels 列表。

当用户单击此按钮时，我有一个显示“开始”的按钮，我希望它执行转发器中的第一项。

我的这段代码在 Chrome 中运行良好，但在任何其他浏览器中都没有：

```
 <asp:Button ID="SubmitInfo" runat="server" Text="Save and Get Started" Width="218px" OnClientClick="__doPostBack('rptList$ctl01$Label15','')" CssClass="submit-button-huge" OnClick="SubmitInfo_Click" /> 
```

有没有办法在不使用 __doPostBack javascript 的情况下执行此服务器端？

这里有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:09:03.130

没有你的整个代码很难回答。我假设您的 LinkLabels 是名为“lb1”的 LinkBut​​ton，并且您使用 commandName 和 CommandArgument、Repeater_ItemCommand

我会在 repeater.ItemCreated 中尝试这样的事情

```
 private void Repeater_ItemCreated(object sender, System.Web.UI.WebControls.RepeaterItemEventArgs e)
    {
        if(e.Item.ItemType==ListItemType.Item || e.Item.ItemType==ListItemType.AlternatingItem)
        {
            var lb = (LinkButton)e.Item.FindControl("lb1");
            if(IsPostBack && e.Item.ItemIndex==0)
            {
                SubmitInfo.Click+= (source,args)=>Repeater_ItemCommand(lb,new RepeaterCommandEventArgs(e.Item,lb,new CommandEventArgs(lb.CommandName,lb.CommandArgument)));
            }
... 
```

希望这会有所帮助

# html - 当 DIV1 的高度略大于 DIV2 和 DIV3 时，有没有办法在同一类的第一个 DIV1 下浮动 DIV4？

> ID：12739530
> 
> 赞同：1
> 
> 时间：2012-10-05T04:33:54.930
> 
> 标签：html, css, css-float

我知道从标题很难理解这个问题，所以我会用实际例子来解释。

1.  服务器生成带有内容的 DIV 并发送到浏览器。
2.  每个 DIV 都有相同的类：例如。' `.column`'。
3.  所有 DIV 的高度“几乎”相同。一个可以比另一个稍高或稍短。

目标是强制**FLOAT:left**所有列，即使上面的第一列高于其兄弟列。请参阅下面的屏幕截图。

![截屏](../Images/c5ba2e880d786a1297381a6f5ba60c84.png)

在上图中，您可以看到Col4**不在****Col1****之下**，因为 Col1 的高度高于其兄弟姐妹的高度。**有没有办法强制 Col4 DIV 在 Col1 DIV 下浮动？**

如果可能，我正在寻找原生 CSS 解决方案。而且我**不需要**简单的解决方案，比如创建 3 列并将 DIV 推入每一列。

如果真的不可能，如果您能回答**为什么 Col6**不“坚持” **Col1** ，我将不胜感激？

以上可从以下渠道获得：

```
.col{
  float:left;
  height:50px;
  width:130px;
  border-left: 1px solid;
  border-bottom: 1px solid;
}

.col1{
  height:60px
} 
```

和 HTML：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="col col1">Col1</div>
  <div class="col">Col2</div>
  <div class="col">Col3</div>
  <div class="col">Col4</div>
  <div class="col">Col5</div>
  <div class="col">Col6</div>
</body>
</html> 
```

这是 jsbin 中的[实时示例](http://jsbin.com/ajikoq/1/edit)。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:37:21.793

您应该能够简单地清除浮动：

```
.col:nth-child(4) {
  clear: left;
} 
```

如果您需要支持旧版浏览器，请改用此选择器：

```
.col1 + .col + .col + .col {
  clear: left;
} 
```

但是，如果您需要将第 5 列和第 6 列分别与第 2 列和第 3 列的底部边框齐平，则仅使用浮点数是无法实现的。你需要找到另一种方法来解决它，或者使用[jQuery Masonry](http://masonry.desandro.com)之类的东西来布置你的页面。

你的第 6 列没有贴到你的第 1 列的唯一可能原因是因为它换行了，并且根据浮动模型，一个盒子不能高于其前面浮动盒子的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:51:25.913

您可以简单地尝试从您的 CSS 上的“ **col ”类中删除“** **float:left;** ”并将其替换为“ **display:inline-block;** ”，它可能会起作用。不确定它是否适用于所有浏览器。只在chrome和mozilla上试过这个。

 ****```
 .col{
     /*float:left;*/
     height:50px;
     width:130px;
     border-left: 1px solid;
     border-bottom: 1px solid;

     display:inline-block; 
  } 
```

[http://jsbin.com/ajikoq/11/edit](http://jsbin.com/ajikoq/11/edit)上的实时示例****

# sql - SQL如何检查数据库数据的有效性？

> ID：12739532
> 
> 赞同：1
> 
> 时间：2012-10-05T04:33:57.017
> 
> 标签：sql, validation

有没有一种简单的方法可以在重新打开约束后对数据库进行检查，以检查以下内容：

外键仍然存在于它们的主表中，主键是唯一的，等等......

我正在使用 MS-SQL Server 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T00:35:01.317

米奇小麦链接到正确答案。

```
DBCC CHECKCONSTRAINTS WITH ALL_CONSTRAINTS 
```

# shell - 从 ant 调用 shell 脚本

> ID：12739535
> 
> 赞同：1
> 
> 时间：2012-10-05T04:34:09.183
> 
> 标签：shell, ant, cygwin

> **可能重复：**
> [从 ANT 运行 .cmd 文件](https://stackoverflow.com/questions/3713350/running-a-cmd-file-from-ant)

是否可以通过在 Windows 机器上安装 cygwin 从 ant 脚本调用 shell 脚本？我有 2 个需要从 ant 脚本调用的 shell 脚本。ant 脚本用于从 Windows 机器构建代码。需要在 ant 执行之间调用第一个 shell 脚本，之后将使用 ant 完成一些其他处理，然后需要调用第二个 ant 脚本。您能否让我知道执行相同操作的 ant 命令。

# android - 使用 android 中的警报框弹出窗口从 gridview 更新数据库

> ID：12739538
> 
> 赞同：5
> 
> 时间：2012-10-05T04:34:28.497
> 
> 标签：android, android-alertdialog, android-gridview

我正在使用 android 中的网格视图为商店开发客户详细信息。我使用我的数据库获取客户的详细信息。我需要使用警报框更新客户处理的股票，以便在执行交易时输入股票数量。

客户网格.xml

```
 <?xml version="1.0" encoding="utf-8"?>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/tab1"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" >

      <GridView
          android:id="@+id/grid"
          android:layout_width="fill_parent"
          android:layout_height="357dp"
          android:numColumns="1"
          android:stretchMode="columnWidth" />

      <Button
          android:id="@+id/cancel"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="cancel" />

  </LinearLayout> 
```

而且，对于每一行，我都使用了一个自定义的 Xml 文件。

客户行.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <TableLayout  xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent" >
     <TableRow>
         <TextView
             android:layout_width="50px"
             android:layout_height="wrap_content"
             android:id="@+id/row_ID"
             android:padding="5px"
             android:layout_weight="1" />
         <TextView 
             android:layout_width="50px"
             android:layout_height="wrap_content"
             android:id="@+id/key_ID"
             android:padding="5px"
             android:layout_weight="1" />
         <TextView 
             android:layout_width="50px"
             android:layout_height="wrap_content"
             android:id="@+id/key_Description"
             android:padding="5px"
             android:layout_weight="1" />
     </TableRow>
 </TableLayout> 
```

我在 Oncreate() 方法上使用了 customergrid.xml，并在网格创建中使用 customerrow.xml，如下面的代码。

```
 public void FillGrid() {
     DatabaseHelper sqdb = new DatabaseHelper(this);
     sqdb.openDataBase();
     Cursor cursor;
     GridView grid = (GridView) findViewById(R.id.grvData);
     cursor = sqdb.getGridData();
     sqdb.close();
     if (cursor != null) {
         startManagingCursor(cursor); 
         SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
             R.layout.customerrow, cursor, new String[] { CustomerActivity.KEY_ROW_ID,
             CustomerActivity.KEY_ID, CustomerActivity.KEY_DESCRIPTION }, new int[] {
             R.id.txtGrv_id, R.id.txtGrvid, R.id.txtGrvDescription } );
         adapter.setViewResource(R.layout.gridlayout);
         grid.setAdapter(adapter);
 } 
```

最后，我使用带有编辑框的警报框来获取客户库存数量的输入。我用这个来完成那个任务..

```
grid.setOnItemClickListener(new  OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position, long arg3) {
        AlertDialog.Builder b=new AlertDialog.Builder(MarkSheet.this);
        b.setTitle("Employee Details");
        LayoutInflater li=LayoutInflater.from(MarkSheet.this);
        View v=li.inflate(R.layout.dialog, null);
        b.setIcon(android.R.drawable.ic_input_get);
        b.setView(v);
        final TextView txtName=(TextView)v.findViewById(R.id.txtName);
        final EditText Quantity=(EditText)v.findViewById(R.id.Quantity);

        // Here I need to update the table while clicking the positive button, if I click negative button I need to cancel the Dialog box..

     }
 }); 
```

任何人都帮我完成这项任务..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:44:12.213

您可以在此处找到更新数据库表的代码，并在[此处](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)[找到](http://codinglookseasy.blogspot.in/2012/07/alert-box-code.html) 警报框的概念

您需要从单击“确定”按钮的代码中调用 sqlite 的更新方法。

# python - 使用带有套接字的 CMD 模块

> ID：12739539
> 
> 赞同：3
> 
> 时间：2012-10-05T04:34:30.920
> 
> 标签：python

我一直很难让 CMD 模块使用标准输入的套接字。这是我所拥有的：

```
class Server(cmd.Cmd):
    use_rawinput = False 

    def __init__(self, port): 
        self.port = port
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        self.sock.bind(("", port))
        f = self.sock.makefile(mode='rw') 
        cmd.Cmd.__init__(self, stdin = f, stdout=sys.stdout) 

    def do_register(self, username):    
        print username 
```

当我与客户端连接并尝试命令`register user1`时，我在服务器的控制台上没有得到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:44:15.793

返回的文件`makefile`仅适用于`SOCK_STREAM`套接字。`SOCK_DGRAM`套接字没有连续字节流的概念（只有单个数据包），因此不能使用`read`or `write`。

`socket.SOCK_STREAM`您应该使用而不是初始化套接字`socket.SOCK_DGRAM`。

# jquery - jquery 将动画加速到最后，并为下一张幻灯片加急 setTimeout

> ID：12739544
> 
> 赞同：1
> 
> 时间：2012-10-05T04:34:58.030
> 
> 标签：jquery, settimeout, window-resize

我正在尝试编写一个 jQuery 可调整大小的幻灯片。通过调整大小，我的意思是只要调整屏幕大小，幻灯片元素就会调整大小。

我有幻灯片的核心工作。但是，**我想在调整浏览器屏幕大小时加速当前的幻灯片动画，然后加快当前动画时设置的最后一个 setTimeout （将拟合元素调用到当前窗口大小并为它们设置动画）开始了**。

现在，当屏幕重新调整大小时，当前幻灯片的动画会以之前的窗口比例大小继续。当这张幻灯片的动画完成后，下一个动画就会加载适当的大小。

您可以在此处查看幻灯片示例（重新调整窗口大小以更好地了解我要传达的内容）：[http ://websonalized.com/myplugin/myplugin.php](http://websonalized.com/myplugin/myplugin.php)

这是我调用函数以适应幻灯片元素、动画和函数本身的函数，以实现永无止境的循环：

```
function recycle(){

    //this here is the slides array (i.e. $slides)              
    var this_duration = $(this[0]).data('duration') - 300;
    //prepare sizes and positions for all slide elements (i.e. background, and elements)
    processslide(this[0], slider_config, slides_original_fonts[0]);
    push.apply($slides, splice.call($slides, 0, 1));
    push.apply(slides_original_fonts, splice.call(slides_original_fonts, 0, 1));

    var next_slide = setTimeout(function(){ recycle.call($slides); }, this_duration);
    next_slide;

}; 
```

上面调用的函数：

```
 function processslide(slide, slider_config, slide_original_fonts){

            fitslide(slide, slider_config, slide_original_fonts);

            animateslide.call(slide, slider_config, slide_original_fonts);

        }; 
```

动画幻灯片的功能是：

```
function animateslide(slide_config, slide_original_fonts){

    var current_width = $('#' + slider_config.id).parent().width();
    var percent_difference = current_width/slider_config.slider_width;
    var current_height = slider_config.slider_height * percent_difference;

    var z_counter = 2;

    var slide = $(this);
    var background = $($(this).children('.slidebg'));
    var slide_default = {
        easing  : 'swing',
        duration: 500,
        squares : 125,
        transition : 'fade',
        speedIn: 1000,
        speedOut: 300,
        yInit: parseInt(background.css('top').replace('px', '')),
        xInit: parseInt(background.css('left').replace('px', ''))                   
    };

    var _config = $.extend({}, $(this).data(), background.data());
    $.each(slide_default, function(k, m){ if(_config[k] == ''){ _config[k] = m; } });

    _config = $.extend({}, slide_config, slide_default, _config);
    var elements = $(this).find('.slide_elements').children();
    var elements_default = {
        easing: 'swing',
        speed: 500,
        start: 500,
        travel: 'fade',
        y: 0,
        x: 0

    };

    var elements_cummulative_time = _config.speedIn;
    background.css('z-index', z_counter);
    z_counter++;

    background.animate({
        opacity: 1,
        top: _config.yTravel,
        left: _config.xTravel 
        }, _config.speedIn, _config.easing, function(){

            var background = $(this);

            $(elements).each(function(i){
                var element = $(this);
                element.css('z-index', z_counter);
                z_counter++;
                var element_configuration = element.data();
                $.each(elements_default, function(l, o){ if(element_configuration[l] == '') element_configuration[l] = o; });
                element_configuration = $.extend({}, elements_default, element_configuration);
                elements_cummulative_time = elements_cummulative_time + element_configuration.start;

                setTimeout(function(){
                    element.animate({
                        opacity: 1,
                        top: percent_difference*element_configuration.y,
                        left: percent_difference*element_configuration.x
                    }, element_configuration.speed, element_configuration.easing);
                       }, element_configuration.start); 

            });
    });

    setTimeout(function(){
        elements.animate({
            top: _config.yInit,
            left: _config.xInit
        }, _config.speedOut, _config.easing, function(){
            elements.each(function(){ $(this).css('z-index', 0)}); });

            //we remove the slide elements before we remove the background
    }, parseInt((_config.duration - 200) - _config.speedOut));

    setTimeout(function(){
        background.animate({
            top: _config.yInit,
            left: _config.xInit 
        }, _config.speedOut, _config.easing, function(){
            var currentTime= new Date();
            background.css('z-index', 0);
            fitslide(slide, slide_config, percent_difference, slide_original_fonts);
        });
    }, parseInt(_config.duration - _config.speedOut));

    $(window).resize( function(){
        console.log('STOPPING ELEMENTS');
        elements.stop(true);
        background.stop(true,true);
    });

}; 
```

ANDDDDDDDDDDDD窗口调整大小函数：

```
function debouncer( recycle, timeout) {

                var timeoutID , timeout = timeout || 100;

                return function () {

                    var scope = this , args = $slides;
                    timeoutID = setTimeout( function () {

                        recycle.apply( scope , Array.prototype.slice.call( args ) ); } , timeout );
                                }

            };

            $(window).resize( debouncer( function ( e ) {
                    // do stuff 
            })); 
```

同样，我希望将当前的幻灯片动画加速到最后，或者触发在当前幻灯片动画后立即设置的 setTimeout（回收函数），或者以不同的方式调用回收函数以实现相同的结束，两者当浏览器的屏幕重新调整大小时。

呜呜呜……谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:57:21.143

我只知道加速 jQuery 动画的两种方法：

1.  将其停止在原处，`.stop(true)`然后以相同的终点再次启动，但持续时间要短得多。这似乎会加快最终结果的速度。

2.  使用自定义缓动函数，您可以在条件要求时动态更改该函数。

第一个选项可能要容易得多。

* * *

`clearTimeout()`如果您已将计时器 ID 保存在持久变量中，则可以取消计时器。

# java - 创建的 url 有效，但是当应用程序发送它时出错

> ID：12739545
> 
> 赞同：0
> 
> 时间：2012-10-05T04:35:52.427
> 
> 标签：java, google-maps

当我使用我的应用程序发送以下 URL 时，我遇到了以下错误：

服务器返回 HTTP 响应代码：400 用于 URL：[http](http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Medical) : //maps.googleapis.com/maps/api/distancematrix/xml?origins=Medical Centre+ 308 George Street+ Sydney&destinations= Science Museum Exhibition Road London SW7 2DD&mode=driving&sensor=false

但是通过在浏览器中输入 URL 会发现它是正确的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:48:24.567

在获取它之前，您可能需要对 url 进行 urlencode。看一下[查询字符串参数的Java URL编码](https://stackoverflow.com/questions/10786042/java-url-encoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:18:27.727

您可以在打开连接以读取数据之前对请求 URL 进行编码。请查看以下代码以更好地理解：

```
package com.stackoverflow.works;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.URL;
import java.net.URLEncoder;

public class URLReader {
    /*
     * @author: sarath_sivan
     */

    public static void read(String url) throws IOException {
        setProxy();//only invoke this method if you are using any proxy to open connection
        URL httpURL = new URL(url);
        BufferedReader bufferedReader = new BufferedReader(
        new InputStreamReader(httpURL.openStream()));

        String inputLine;
        while ((inputLine = bufferedReader.readLine()) != null) {
            System.out.println(inputLine);
        }   
        bufferedReader.close();
    }

    public static void setProxy() {
        System.getProperties().put("http.proxyHost", "xxx.xxx.xx.xx");//replace with your proxy
        System.getProperties().put("http.proxyPort", "8080");
    }

    public static String encodeURL(String url) throws UnsupportedEncodingException {//encoding your request url parameters here
        StringBuilder encodedURL = new StringBuilder(url);
        encodedURL.append("?origins=").append(encode("Medical Centre+ 308 George Street+ Sydney"));
        encodedURL.append("&destinations=").append(encode(" Science Museum Exhibition Road London SW7 2DD"));
        encodedURL.append("&mode=").append("driving");
        encodedURL.append("&sensor=").append("false");
        return encodedURL.toString();
    }

    public static String encode(String string) throws UnsupportedEncodingException {
        return URLEncoder.encode(string, "ISO-8859-1");
    }

    public static void main(String[] args) throws IOException {
        String url = "http://maps.googleapis.com/maps/api/distancematrix/xml";
        read(encodeURL(url));
    }

} 
```

**输出如下所示：** ![在此处输入图像描述](../Images/14029cc4ea0deec67af3e3ea01e7eb35.png)

# java - Java套接字，设置连接超时等超时，但在获取inputStream时仍然卡住

> ID：12739546
> 
> 赞同：0
> 
> 时间：2012-10-05T04:36:06.060
> 
> 标签：java, sockets, timeout, bufferedreader

**这是我的代码**

```
Socket s = new Socket();
s.setSoTimeout(5000);
s.connect(url, 5000);
InputStreamReader inputStreamReader = new InputStreamReader(s.getInputStream());
BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
String line;
while ((line = bufferedReader.readLine()) != null){
    System.out.println(line);
} 
```

所以设置了连接超时和读取超时

但我遇到了一个链接**：** [http ://scfire-mtc-aa01.stream.aol.com:80/stream/1023](http://scfire-mtc-aa01.stream.aol.com:80/stream/1023)

我的代码停留在这一行**：**

```
bufferedReader.readLine()； 
```

现在我在调用之前检查输入流的内容类型

```
bufferedReader.readLine()； 
```

为了避免这个问题，但我仍然想知道为什么

```
bufferedReader.readLine()； 
```

卡住？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:55:26.370

您正在与 HTTP 站点通信，但您没有发送任何 HTTP 请求。因此，您不会收到任何 HTTP 响应。您正在等待响应，但服务器仍在等待请求。

不要为此使用套接字，使用 URL 和 URLConnections。

# ruby-on-rails - Rails - 使用 rspec 测试 ApplicationController

> ID：12739553
> 
> 赞同：0
> 
> 时间：2012-10-05T04:36:57.760
> 
> 标签：ruby-on-rails, rspec

我想将常见的控制器操作、索引、显示、创建等放在 ApplicationController 中，如下所示：

```
class ApplicationController < ActionController::Base
  respond_to :json

  def index
    #implementation
  end

  def show
   #implementation
  end

  def update
    #implementation
  end
end 
```

该应用程序将仅返回 JSON。

我已经编写了以下规范以使用 RSPEC 的匿名控制器进行测试

```
describe ApplicationController do
  controller do ; end

  describe 'Get :index' do
    it 'should respond to index' do
      get :index

      response.code.should eq "200"
    end
  end
end 
```

上面的规范给出了以下错误：

> ActionView::MissingTemplate: 缺少模板匿名/索引、应用程序/索引与 {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder]}。搜索：*“#”

任何人都可以建议一种使用匿名控制器进行这项工作的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:12:39.053

描述“获取索引”做

```
it "returns correct JSON" do
  # @groups.should have(2).items
  get :index, :format => :json
  response.should be_success
  body = JSON.parse(response.body)
  body.should include('group')
  groups = body['group']
  groups.should have(2).items
  groups.all? {|group| group.key?('customers_count')}.should be_true
  groups.any? {|group| group.key?('customer_ids')}.should be_false
end 
```

结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:43:24.693

试试这个可能会有帮助

你的控制器喜欢

```
def index
end 
```

你的 rspec 测试像

```
describe "GET index" do
  it "should respond to index" do
    get :index
    response.code.should eq "200"
  end
end 
```

**在您的 application/ 文件夹中创建 index.html.erb**

然后测试它。

# security - 我们是否需要对公共 URL 进行 CSRF 保护

> ID：12739556
> 
> 赞同：1
> 
> 时间：2012-10-05T04:37:18.617
> 
> 标签：security, csrf, csrf-protection

我有一个没有任何表单的网络应用程序（禁用了网络服务器中的所有表单请求）。它只有几个公共 URL（在 URL 中有一些 GET 参数）。没有登录，它不使用任何cookies。

我需要为这个 Web 应用程序提供 CSRF 保护吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:27:33.237

只有使用 cookie 的域才需要 XSRF 或 CSRF 保护。即使请求来自不受您控制的网页，对您网站的每个请求都带有您的 cookie。当您在服务器上修改状态时，这是最重要的，但在某些情况下，即使在状态未更改的情况下它也很有用。

[http://j.mp/learn-xsrf](http://j.mp/learn-xsrf)包含有关 XSRF 以及如何避免它的简短教程，并允许您实际尝试一下。

如果您有一个用户看到的图像以识别他们在您的真实站点上，那么您可能存在带有非状态更改请求的 XSRF 漏洞的一个示例。一些银行这样做，每个用户的形象都不同。但是，如果该图像使用依赖于 cookie 的静态 url 提供，则它很容易受到 XSRF 的攻击，并且可以很容易地托管在攻击者的站点上。您可以通过在 url 中包含 XSRF 令牌来避免该问题。（仅仅为每个用户使用不同的 url 是不够的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T20:26:06.977

CSRF 保护通常适用于您希望确保用户提交来自您自己站点的请求的表单（即，不是`<img>`其他站点上的某些标签利用）。此外，如果您在公共页面上使用 CSRF 令牌，它只是一个小的保护屏障。这意味着，攻击者总是可以定期 DOM 抓取您的网站并获取令牌以在他们自己的网站上使用，因为这些页面是公开的。这是攻击者必须做的更多工作，但攻击者仍然可以公开使用。CSRF 令牌真正适用于私人（登录后）页面上的表单。

# ou - 错误：使用“1”参数调用“MoveTo”的异常：“服务器不愿意处理请求。”

> ID：12739559
> 
> 赞同：2
> 
> 时间：2012-10-05T04:37:40.700
> 
> 标签：ou

我正在尝试编写一个脚本来移动 AD 2008 中的用户 OU

```
$Alias = "hareeshvm"

# Finding the location of the user account harveesm:

$Root = [ADSI]("LDAP://DC=corp,DC=bharatpetroleum,DC=com")
$searcher = new-object System.DirectoryServices.DirectorySearcher($root)

$searcher.filter = "(&(objectClass=user)(mailNickName= $Alias))"

$User = $searcher.findone()

# Binding the user account to $AUser and the OU to move to to $MovetoOU
$ADSPath = $User.Properties.adspath

$MoveToOU = [ADSI]("LDAP://OU=Temp,DC=corp,DC=bharatpetroleum,DC=com")

$AUser = [ADSI]("$ADSPath") 
```

# 执行实际移动的命令

$AUser.PSBase.moveto($MoveToOU)

我得到下面提到的错误

*使用“1”参数调用“MoveTo”的异常：“服务器不愿意处理请求。”在 D:\Ashish\MS Exchange\New User\newuserscreation.ps1:39 char:21 + $AUser.PSBase .moveto <<<< ($MoveToOU) + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException*

提前谢谢

# android - AchartEngine：如何使用具有两种不同比例的 TimeSeries

> ID：12739561
> 
> 赞同：3
> 
> 时间：2012-10-05T04:37:56.940
> 
> 标签：android, achartengine

由于 AchartEngine API 的 TimeSeries Construstor 仅将字符串作为参数，并且没有其他参数作为比例参数传递。那么我将如何在两种不同的尺度上使用它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T01:00:35.353

我想提出一个更简单的解决方案。

您不能使用 TimeSeries 拥有多个比例组的原因仅仅是因为作者忘记（或觉得没有必要）添加必要的构造函数以允许您设置系列应该属于哪个比例组。TimeSeries 是 XYSeries 的子类，非常简单（在[此处](https://code.google.com/p/achartengine/source/checkout "这里")查找源代码）。它所做的唯一特别的事情是为您提供了一个 add 方法，该方法采用 Date 而不是 double。实际上，TimeSeries 中的 add 方法只是进行以下调用，将 x 值作为毫秒时间传递：

```
super.add(x.getTime(), y); 
```

因此，完成您想要做的最简单的方法是使用 TimeChart，但不要使用 TimeSeries，而是使用 XYSeries 并以毫秒为单位传递您的日期（就像 TimeSeries 一样！）。使用这种方法，您不需要弄乱自定义 x 轴标签。

另一种方法可能是编写自己的 XYSeries 子类。

希望将来会将必要的构造函数添加到 TimeSeries 中，因此这些都不是必需的。

**更好的解决方案** 我发现最好只用我自己的 TimeSeries 子类化 XYSeries 并使用必要的构造函数来支持比例组。这是因为 XYSeries 中有一个填充值，它在 TimeSeries 中被覆盖。因此，由于该填充值，使用 XYSeries 时间可能会出现问题。这是我正在使用的简单子类（注意 getPadding 方法返回 1，你需要拥有它）：

```
 private class MyTimeSeries extends XYSeries {

    public MyTimeSeries(String title, int scaleNumber) {
        super(title, scaleNumber);
    }

    public synchronized void add(Date x, double y) {
        super.add(x.getTime(), y);
    }

    @Override
    protected double getPadding(double x) {
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:28:47.640

我建议你不要尝试使用`TimeSeries`多尺度图表。

您最好构建一个常规的多比例折线图，在 X 轴上设置时间戳并设置您的自定义标签。

```
// disable the default labels
renderer.setXLabels(0);
// add your formatted dates, several of these calls
renderer.addXTextLabel(x, "formatted date"); 
```

# python - 在 python 中解析电子邮件 BodyStructure

> ID：12739563
> 
> 赞同：2
> 
> 时间：2012-10-05T04:38:34.337
> 
> 标签：python, parsing, email

> **可能重复：**
> [在 python 的 imaplib 中解析带括号的列表](https://stackoverflow.com/questions/3973963/parsing-parenthesized-list-in-pythons-imaplib)

Python 的电子邮件包可让您获取电子邮件消息的全文并将其解析为多个部分并遍历各个部分。`BODYSTRUCTURE`但是，是否有一个库可以将 IMAP 协议返回的响应解析为多个`email.message.Message`部分？

**编辑：**

PHP 中的等效方法是[`imap_fetchbody()`](http://www.php.net/manual/en/function.imap-fetchstructure.php)，它自动处理结构的解析。

**编辑2**：

这个问题被错误地关闭为重复。它是将`BODYSTRUCTURE`嵌套表达式解析为有用的格式（例如字典），而不是将原始字符串解析为 python 类型。无论如何，我最终推出了自己的解决方案，这里是将来遇到类似问题的任何人的代码。`imapclient`它旨在与库一起使用

```
# ----- Parsing BODYSTRUCTURE into parts dictionaries ----- #

def tuple2dict(pairs):
    """get dict from (key, value, key, value, ...) tuple"""
    if not pairs:
        return None
    return dict([(k, tuple2dict(v) if isinstance(v, tuple) else v)
                 for k, v in zip(pairs[::2], pairs[1::2])])

def parse_singlepart(var, part_no):
    """convert non-multipart into dic"""
    # Basic fields for non-multipart (Required)
    part = dict(zip(['maintype', 'subtype', 'params', 'id', 'description', 'encoding', 'size'], var[:7]), part_no=part_no)
    part['params'] = tuple2dict(part['params'])

    # Type specific fields (Required for 'message' or 'text' type)
    index = 7
    if part['maintype'].lower() == 'message' and part['subtype'].lower() == 'rfc822':
        part.update(zip(['envelope', 'bodystructure', 'lines'], var[7:10]))
        index = 10
    elif part['maintype'].lower() == 'text':
        part['lines'] = var[7]
        index = 8

    # Extension fields for non-multipart (Optional)
    part.update(zip(['md5', 'disposition', 'language', 'location'], var[index:]))
    part['disposition'] = tuple2dict(part['disposition'])

    return part

def parse_multipart(var, part_no):
    """convert the multipart into dict"""
    part = { 'child_parts': [], 'part_no': part_no }

    # First parse the child parts
    index = 0
    if isinstance(var[0], list):
        part['child_parts'] = [parse_part(v, ('%s.%d' % (part_no, i+1)).replace('TEXT.', '')) for i, v in enumerate(var[0])]
        index = 1
    elif isinstance(var[0], tuple):
        while isinstance(var[index], tuple):
            part['child_parts'].append(parse_part(var[index], ('%s.%d' % (part_no, index+1)).replace('TEXT.', '')))
            index += 1

    # Then parse the required field subtype and optional extension fields
    part.update(zip(['subtype', 'params', 'disposition', 'language', 'location'], var[index:]))
    part['params'] = tuple2dict(part['params'])
    part['disposition'] = tuple2dict(part['disposition'])

    return part

def parse_part(var, part_no=None):
    """Parse IMAP email BODYSTRUCTURE into nested dictionary

    See http://tools.ietf.org/html/rfc3501#section-6.4.5 for structure of email messages
    See http://tools.ietf.org/html/rfc3501#section-7.4.2 for specification of BODYSTRUCTURE
    """
    if isinstance(var[0], (tuple, list)):
        return parse_multipart(var, part_no or 'TEXT')
    else:
        return parse_singlepart(var, part_no or '1') 
```

# c++ - 2组并集；返回简单对象 - C++

> ID：12739565
> 
> 赞同：2
> 
> 时间：2012-10-05T04:38:45.037
> 
> 标签：c++

执行以下操作的最佳方法是什么？我正在尝试找到 2 组的并集。我正在创建 2 个对象（一个称为 set1，一个称为 set2）。我的目标是创建第三个对象，它是两者的 UNION，而不必使用复制构造函数。必须使用动态内存分配和指针和/或引用。感谢任何人解决这个困境，任何指针（没有双关语）都会有所帮助。

感谢码农。

头文件

```
 #ifndef INTEGERSET_H_
                #define INTEGERSET_H_

                class IntegerSet
                {
                private:
                    int * set;
                    int set_size;
                public:
                    IntegerSet(int size);    //default constructor
                    ~IntegerSet();           //destructor
                    IntegerSet * unionOfSets(const IntegerSet & set2);      
                    void insertElement(int k) const;
                    void printSet(int size) const;
                };
                #endif 
```

主要文件

```
 #include <iostream>
            #include "integerset.h"

            using std::cout;
            using std::endl;

            int main()
            {
                IntegerSet set1(11);

                //testing below
                set1.insertElement(3);
                set1.insertElement(4);
                set1.insertElement(6);
                set1.insertElement(10);

                set1.printSet(11);
                cout << endl;

                IntegerSet set2(8);
                set2.insertElement(3);
                set2.insertElement(6);
                set2.insertElement(7);

                set2.printSet(11);
                cout << endl;

                IntegerSet * obj3 = new IntegerSet(11);
                obj3 =  set1.unionOfSets(set2);                    
                obj3->printSet(11);

            //  system("pause");
                return 0;
            } 
```

实施文件

```
 #include "integerset.h"
            #include <iostream>

            IntegerSet::IntegerSet(int size)
            {
                set = new int[size];
                set_size = size;                    
                for (int i = 0; i < size; i++)
                    set[i] = 0;
            }

            IntegerSet::~IntegerSet()
            {
                delete [] set;
            }

            void IntegerSet::insertElement(int k) const
            {
                (*this).set[k] = 1;
            }

            void IntegerSet::printSet(int size) const
            {
                int temp = 0;
                for (int i = 0; i < size; i++)
                {
                    if (set[i] == 1)
                    {
                        std::cout << i << " ";
                        temp++;
                    }
                }
                if (temp == 0)
                    std::cout << "----";
             }

            IntegerSet * IntegerSet::unionOfSets(const IntegerSet & set2) //make this return the union of 2 sets; THIS and the passed ARG reference; return address
            {

                   return this;
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T05:25:33.113

### 随机的早晨咆哮

您尝试创建的`std::bitset`不仅仅是 a `std::set`。集合通常是[*“定义明确的不同对象的集合”*](http://en.wikipedia.org/wiki/Set_%28mathematics%29)（康托尔的定义有点复杂，但让我们坚持这一点）。因此，一个集合可以包含几个成对的不相关对象。

现在，说了这么多，看看[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)。请注意，它的大小由模板参数固定`N`。`std::bitset::set`几乎等同于你的`IntegerSet::insertElement`，除了它抛出`std::out_of_range`. 我建议您检查索引是否有有效位置：

```
void IntegerSet::insertElement(int k) const
{
    if( k < 0 || k >= set_size)
        throw std::out_of_range; 
    else
        this->set[k] = 1;
} 
```

但是，`std::bitset`不支持工会，所以是时候解决你的问题了。

### IntegerSet::unionofSets

看看那些线。

```
IntegerSet * obj3 = new IntegerSet(11);
obj3 =  set1.unionOfSets(set2); 
```

第一行`obj3`用一个指针初始化，该指针包含一个新创建的 IntegerSet 的内存，其内部集大小为 11。在下一行，你扔掉那个指针。因此，您正在丢弃资源并造成内存泄漏。

如果您要创建一个*新*的IntegerSet，您的解决方案将非常简单：

```
IntegerSet IntegerSet::unionOfSets(const IntegerSet & set2) const
{
    IntegerSet tmp (std::max(set2.set_size, this->set_size));

    for(int i = 0; i < set_size; ++i)
        tmp.set[i] = this->set[i];

    for(int i = 0; i < set2.set_size; ++i)
        tmp.set[i] |= set2.set[i];

    return tmp;
} 
```

但是你的实现改变了它被调用的对象，所以它并没有`const`什么不同：

```
IntegerSet * IntegerSet::unionOfSets(const IntegerSet & set2) // not const!
{
    if(set2.set_size > set_size){
        // the resulting set is bigger, we need new memory
        int * newset = new int[set2.set_size];

        // copy old values
        for(int i = 0; i < this->set_size; ++i)
            newset[i] = this->set[i];

        // replace old size
        this->set_size = set2.set_size;
        delete[] this->set; // remove old data
        this->set = newset; // replace pointer
    }

    for(int i = 0; i < set2.set_size; ++i)
        this->set[i] |= set2.set[i];

    return this;
} 
```

这应该足够了。请记住，您不得使用`new IntegerSet`以下命令创建联合：

```
IntegerSet * obj3 = new IntegerSet(11); // new memory, lets say obj3 = 0x500a
obj3 = set1.unionOfSets(set2); // new memory gone forever

if(obj3 == &set1)
    std::cout << "obj3 is a pointer to set1, changes to obj3 will affect set1" << std::endl; 
```

如果您不想创建此行为，请使用临时版本的第一个版本。

另外，请检查是否[`std::set<int>`](http://en.cppreference.com/w/cpp/container/set)足够，因为您可以使用[`std::set_union`](http://en.cppreference.com/w/cpp/algorithm/set_union)from `<algorithm>`。

### 编辑

> 1.  提供一个 unionOfSets 成员函数，该函数创建第三个 IntegerSet，它是两个现有 IntegerSet 实例的并集（因此，此函数创建的第三个集合包含用于创建它的两个集合中的所有成员——因此，如果其中一个或两个集合union 执行时有一个元素，第三组将有该元素）

在这种情况下，忘记`IntegerSet * IntegerSet::unionOfSets(const IntegerSet&)`并使用`IntegerSet IntegerSet::unionOfSets(const IntegerSet&) const`（第一个变体带有返回的对象而不是返回的指针）。

### 编辑2

由于您没有遵循三规则，因此返回的内存`IntegerSet`将无效。您要么必须实现复制构造函数/赋值运算符才能解决此问题，要么提供具有动态存储持续时间的新对象 ( `new`)。为此，您只需稍微调整方法：

```
IntegerSet * IntegerSet::unionOfSets(const IntegerSet & set2) const
{
    IntegerSet * tmp  = new IntegerSet( set2.set_size > this->set_size ? set2.set_size : this->set_size);

    for(int i = 0; i < set_size; ++i)
        tmp->set[i] = this->set[i];

    for(int i = 0; i < set2.set_size; ++i)
        tmp->set[i] |= set2.set[i];

    return tmp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:44:26.877

使用标准设施...

*   `std::vector`比手卷阵列好
*   `std::sort``std::unique`是善良

所以：

```
std::vector<int> set1;
set1.push_back(1); // ... and others

std::sort(set1.begin(), set1.end());   // sorts
std::unique(set1.begin(), set1.end()); // removes duplicates

// same with set2

std::vector<int> set3(set1);
set3.insert(set3.end(), set2.begin(), set2.end());

std::sort(set1.begin(), set1.end());   // sorts
std::unique(set1.begin(), set1.end()); // removes duplicates 
```

# clojure - 为什么 core.logic 的输出重复给出相同的值？

> ID：12739569
> 
> 赞同：5
> 
> 时间：2012-10-05T04:39:09.173
> 
> 标签：clojure, clojure-core.logic, minikanren

我在 core.logic 中试过这个

```
（需要 [clojure.core.logic :as l]）

(升/运行* [q]
  （升/新鲜 [abc]
    (l/membero a [1])
    (l/成员 b [4 5])
    (l/membero c [1 2])
    (l/== q [ab])))

```

期望结果是`[1 4] [1 5]`

但它是`[1 4] [1 4] [1 5] [1 5]`

然后我开始玩它并发现了这个：

```
（需要 [clojure.core.logic :as l]）

(升/运行* [q]
  （升/新鲜 [abc]
    (l/membero a [1])
    (l/成员 b [4 5])
    (l/memberoc [1 1 1 1 1 1 1 1])
    (l/== q [ab])))

```

```
 ;; => ([1 4] [1 4] [1 4] [1 5] [1 4] [1 4] [1 5] [1 4] [1 5] [1 4] [1 5] [1 5] [1 5] [1 5]) 
```

哪里有`[1 5]`穿插`[1 4]`

怎么了？这种重复的东西应该是一个特性还是一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T05:11:33.120

`c`这是因为没有统一使用不需要的逻辑变量`q`。如果您删除`c`，那么您将获得所需的结果。基本上，您需要了解替换在 core.logic 中的工作原理，以了解为什么您会因为`c`.

在较高级别上，该过程就像在树中搜索解决方案，在这种情况下，向量中的每个元素都会`membero`导致`c`搜索树中的一个节点，这会导致重复结果，因为对于由`c`可能值引入的每个节点都会导致正确的结果as`c`没有在统一中使用`(l/== q [a b])`

# c++ - 与移动构造函数配对时发生意外的析构函数调用

> ID：12739570
> 
> 赞同：1
> 
> 时间：2012-10-05T04:39:15.373
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

以下代码在 Visual Studio 2012 Express for Windows Desktop 中编译并运行，作为学习练习。

```
#include <cstdio>

class X
{
public:
    X()  { printf("default constructed\n"); }
    ~X() { printf("destructed\n");}
    X(const X&) { printf("copy constructed\n"); }
    X(X&&) { printf("move constructed\n"); }
    X & operator= (const X &) { printf("copy assignment operator\n"); }
};

X A() {
    X x;
    return x;
}

int main() {
    {
        A();
    }
    std::getchar();
} 
```

在禁用编译器优化 (/Od) 的情况下编译时，结果输出表明析构函数被调用了两次。这是一个问题，因为只构造了一个对象。**为什么析构函数被调用两次？**如果班级管理自己的资源，这不是问题吗？

```
default constructed
move constructed
destructed
destructed   <<< Unexpected call 
```

我尝试了几个实验来尝试解释输出，但最终这些并没有导致任何有用的解释。

实验 1：在启用优化（/O1 或 /O2）的情况下编译相同的代码时，结果输出为：

```
default constructed
destructed 
```

这表明命名返回值优化已经省略了对移动构造函数的调用，并掩盖了潜在的问题。

实验 2：禁用优化并注释掉移动构造函数。生成的输出是我所期望的。

```
default constructed
copy constructed
destructed
destructed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T05:19:54.823

请记住，当一个对象是移动操作的源时，它仍然会被销毁。所以移动的源需要将自己置于一个状态，使得被破坏不会释放它不再拥有的资源（因为它们被移动到另一个对象）。例如，源对象中的任何原始指针（现在将由移动构造的对象拥有）应设置为 NULL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:42:26.927

A 中的 X 在超出范围时被销毁。

A 返回一个临时对象（由移动构造函数从 X 构造），它是一个单独的实例。这在调用者的范围内被销毁。这将导致再次调用析构函数（临时）。

之所以选择移动构造函数，是因为编译器检测到 X 将在之后立即被销毁。要使用这种方法，移动构造函数应该使原始对象中的任何数据无效或重置，以便析构函数不会使移动目标所接管的任何数据无效。

> 当您按值传递右值，或从函数按值返回任何值时，编译器首先获得省略副本的选项。如果副本没有被省略，但所讨论的类型具有移动构造函数，则编译器需要使用移动构造函数。

[http://cpp-next.com/archive/2009/09/move-it-with-rvalue-references/](http://cpp-next.com/archive/2009/09/move-it-with-rvalue-references/)

> 当您退出创建临时对象的范围时，它会被销毁。如果引用绑定到临时对象，则临时对象在引用超出范围时被销毁，除非它在控制流中断之前被销毁。

[http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr382.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr382.htm)

RVO 可以产生与非优化版本不同的行为：

> 返回值优化，或简称为 RVO，是一种编译器优化技术，涉及消除为保存函数返回值而创建的临时对象。 [1] 在 C++ 中，特别值得注意的是允许更改结果程序的可观察行为。 [2]

[http://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T08:06:48.023

尽管 Michael 和 jspcal 的答案是准确的，但他们并没有回答我的问题的核心，这就是为什么要进行两次析构函数调用。我只期待一个。

答案是函数 A() 返回一个临时对象。总是。这就是函数返回值的工作方式，而移动语义与这一事实无关。我猜迈克尔和 jspcal 认为我没有错过这样一个基本事实。我将“移动”一词等同于“交换”的概念。交换时，不会构造和销毁对象。因此，我只期待一个析构函数调用。

由于必须构造和销毁返回的对象，因此进行了第二次析构函数调用（以及第二次构造函数调用）。

现在，选择执行的实际构造函数取决于类定义中提供的内容。如果移动构造函数可用，则会调用它。否则将调用复制构造函数。

# c# - 在 DotLiquid 的自己的标签中访问当前范围

> ID：12739573
> 
> 赞同：2
> 
> 时间：2012-10-05T04:39:49.610
> 
> 标签：c#, dotliquid

当我在 DotLiquid 模板中循环一个 IEnumerable 时

```
{% for block in Blocks -%}

    // this works
    {{ block.Structure }}

    // this doesn't
    {% RenderObject block.Structure %}

{% endfor -%} 
```

我可以直接通过渲染成员，`block.Structure`但我不知道如何在我自己的标记类中访问此 Structure 对象`RenderObject`：

```
public class RenderObject : Tag
{
    private string _tagName;
    private string _markup;

    public override void Initialize(string tagName, string markup, List<string> tokens)
    {
        _tagName = tagName;
        _markup = markup.Trim();
        base.Initialize(tagName, markup, tokens);
    }

    public override void Render(Context context, TextWriter result)
    {
        // HERE COMES THE QUESTION
        // How to access the block.Structure object here?
        var structure = ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:25:19.863

您可以使用`context`传递给您的`RenderObject.Render`方法的对象。上面有一个索引器`Context`，可以将变量名解析为变量。（并且`For`标签将循环变量，即`block`在您的示例中，放入`context`.）

剩下的问题是获取变量名（“block.Structure”）。幸运的是，这正是`markup`传递给 的变量的`RenderObject.Initialize`用途。

所以这应该工作：

```
public class RenderObject : Tag
{
    private string _tagName;
    private string _markup;

    public override void Initialize(string tagName, string markup, List<string> tokens)
    {
        _tagName = tagName;
        _markup = markup.Trim();
        base.Initialize(tagName, markup, tokens);
    }

    public override void Render(Context context, TextWriter result)
    {
        var structure = context[_markup];
    }
} 
```

# javascript - javascript中的表格行长度显示一个额外的

> ID：12739577
> 
> 赞同：1
> 
> 时间：2012-10-05T04:40:07.303
> 
> 标签：javascript

我有一个 id 的表，`myPicks`当我执行下面的代码时，结果总是比我拥有的行数多一？这是它应该表现的方式吗？谢谢。

```
var table =document.getElementById("myPicks");
var rowCount = table.rows.length; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:42:51.963

你有标题吗？这可以解释额外的“行”

# jquery - 来自 IFrame 的 JQuery Post 不起作用

> ID：12739578
> 
> 赞同：0
> 
> 时间：2012-10-05T04:40:16.177
> 
> 标签：jquery, post, iframe

```
<script>
function sendForm() {
  $.post("http://www.website.com/main/post.cfm",$("#testForm").serialize(),function(data,status){
    $("#result").html(data)
  });
  return false
}

  $(document).ready(function() {
  $("#testForm").submit(sendForm);
});
</script> 
```

以及 IFrame 的以下代码：

```
<form id="testForm" method="post">
<label for="subscriberEmail">Enter your email</label> <input id="subscriberEmail" name="subscriberEmail" type="text" required="yes" validate="email" message="Please enter a valid email address" class="replaceText" value="Enter your email"/>
<input id="subscribe" type="image" src="signup.png"/>
</form>

<div id="result"></div> 
```

div.result 中不显示任何内容。但是，如果我使用 common action="http://www.website.com/main/post.cfm"，它会成功返回重新加载整个 IFrame 的消息。

$.post 到 ColdFusion 页面会不会有问题？有什么解决方法或替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:12:34.863

检查服务器的跨域策略。对于跨域 get 方法调用，使用 JSONP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:10:37.987

简短的回答是“不，不会有 $.post 到 ColdFusion 页面的问题”。CFM 代码 - 在 ColdFusion 服务器上运行 - 完全不知道它接收到的请求是如何实现的：在地址栏中键入 URL、单击链接、提交表单或某些客户端脚本触发请求之间似乎没有区别. 所以这不是 ColdFusion 问题。

您对此处的故障排除（或其报告）有点了解：* 是否有任何 Javascript 错误？（如果是：什么？） * post() 请求实际上是在发出的，如果是，HTTP 请求的详细信息是什么，它是否得到响应？

暂时将您的 post() 调用转换为 vanilla ajax() 调用可能是值得的，这样您就可以指定一个错误处理程序，这样您就可以在出现错误时做出反应（例如将错误写到控制台等）。

# c++ - 为什么结果是0？

> ID：12739582
> 
> 赞同：1
> 
> 时间：2012-10-05T04:41:01.870
> 
> 标签：c++, c

请参阅以下代码：

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
 char a[1000];
 int i;
 for(i = 1;i<1000;i++)
 {
  a[i] = 5;
 }

 printf("%d\n",strlen(a));

 return 0;
} 
```

结果是 0 ，为什么？任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T04:43:08.330

您永远不会分配或初始化`a[0]`. 在这种情况下，它恰好是`'\0'`，所以`strlen(a)`返回 0。

值得注意的是，`strlen`在`a`这里调用是未定义的行为，因为您间接尝试读取未初始化的垃圾内存，这是`a[0]`搜索空终止符的第一步。即使将其显式设置为 0 仍然会导致它在数组末尾运行时出现问题，直到它找到 0、崩溃或爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:59:00.910

strlen() 从 0 而不是 1 开始计数。执行此操作，您将：

for(i = 0;i<1000;i++)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T19:06:01.900

```
 #include<stdio.h>
 #include<stdlib.h>
 int main()
 {
     char a[1000];
     int i;
     for(i = 0;i<1000;i++)//starts with 0 not 1
       a[i] = 5;
     a[i] = '\0';//NULL terminator shall be there 
     printf("%d\n",strlen(a));//1000

     return 0;
 } 
```

# jquery - JQuery datepicker 在文本框旁边添加了一个新按钮

> ID：12739595
> 
> 赞同：0
> 
> 时间：2012-10-05T04:41:54.130
> 
> 标签：jquery, datepicker

我有一个文本框和一个下拉菜单。根据从下拉菜单中选择的值，如有必要，我将文本框更改为日期选择器字段。该功能工作正常，但我看到激活日期选择器时文本框和下拉列表之间有一个小按钮。当日期选择器被销毁时它就消失了。

当我使用 firebug 查看 HTML 时，我看到添加了以下行

```
<button class="ui-datepicker-trigger" type="button">
      <img src="/images/drop-down.gif" alt="..." title="...">
</button> 
```

知道如何摆脱此按钮并在用户单击文本框时触发日期选择器日历吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:59:00.347

我认为这来自使用此选项`datepicker`：

```
buttonImage: '/images/drop-down.gif' 
```

如果您不想要按钮，请不要使用该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:11:27.797

确保在将文本框与 datepicker 绑定时不提供以下属性

```
 buttonImage: 'images/icon_calendar.gif',
 buttonImageOnly: true, 
```

# ruby-on-rails-3 - Rails 3 - 参数数量错误（0 代表 1）

> ID：12739597
> 
> 赞同：2
> 
> 时间：2012-10-05T04:42:07.627
> 
> 标签：ruby-on-rails-3

我正在尝试为我的应用程序构建身份验证系统

注册用户填写表格，然后提交调用 user#signup

```
def signup  
    @user = User.new(params[:user])
    @user.password(params[:user][:password])
    @user.save 
end` 
```

我的用户模型包含

```
def password(pass)
    @password=pass
    self.salt = User.random_string(10)
    self.hashed_password = User.encrypt(@password, self.salt)
end 
```

尝试调试时，我检查了 @user 哈希中包含的内容：

*   在 `@user = User.new(params[:user])`哈希包含我的参数 exept 'id'、'hashed_pa​​ssword' 和 'salt'（加上时间戳）之后，它们是空的

*   哈希后`@user.password(params[:user][:password])`现在包含“hashed_pa​​ssword”和“salt”的值

*   @user.save 返回

    用户控制器中的参数错误#signup

    参数数量错误（0 代表 1）

堆栈跟踪

```
Started POST "/users/signup" for 127.0.0.1 at Fri Oct 05 14:23:49 +1000 2012
Processing by UsersController#signup as HTML
  Parameters: {"user"=>{"last_name"=>"last", "first_name"=>"first", "login"=>"myusername", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "email"=>"me@gmail.com", "dob(1i)"=>"1980", "dob(2i)"=>"4", "dob(3i)"=>"2"}, "authenticity_token"=>"R8/BNPox9F9rkUXZQ84xjnsplRjqLJYe35EtGjKEAWk=", "utf8"=>"✓", "commit"=>"Create User"}
   (0.1ms)  begin transaction
   (0.0ms)  rollback transaction
Completed 500 Internal Server Error in 10ms

ArgumentError (wrong number of arguments (0 for 1)):
  app/controllers/users_controller.rb:17:in `signup'
  app/controllers/users_controller.rb:16:in `signup'

  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:58:48.397

我猜你有一个名为的列`password`和/或你有一个验证引用`:password`。

在这种情况下，问题在于您已经`password`用单参数设置器覆盖了隐式零`password(pass)`参数获取器。您应该将您的 setter 移至`password=`，并创建一个始终返回 nil 的 getter：

```
def password
  nil
end

def password=(pass)
  @password = pass
  self.salt = User.random_string(10)
  self.hashed_password = User.encrypt(@password, self.salt)
end 
```

作为奖励，这意味着您可以消除显式密码设置调用，因为`User.new(:password => 'xyz')`会`password=`自动调用。

# performance - 只检查一次的语句？Haskell

> ID：12739604
> 
> 赞同：2
> 
> 时间：2012-10-05T04:42:30.060
> 
> 标签：performance, haskell

我有两个长度不等的列表。当我添加它们时，我希望最终列表具有最长列表的长度。

```
addtwolists [0,0,221,2121] [0,0,0,99,323,99,32,2332,23,23]
>[0,0,221,2220,323,99,32,2332,23,23]
addtwolists [945,45,4,45,22,34,2] [0,34,2,34,2]
>[945,79,6,79,24,34,2]

zerolist :: Int -> [Integer]
zerolist x = take x (repeat 0)

addtwolists :: [Integer] -> [Integer] -> [Integer]
addtwolists x y = zipWith (+) (x ++ (zerolist ((length y)-(length x)))) (y ++ (zerolist ((length x)-(length y)))) 
```

这段代码效率低下。所以我尝试了：

```
addtwolist :: [Integer] -> [Integer] -> [Integer]
addtwolist x y = zipWith (+) (x ++ [head (zerolist ((length y)-(length x))) | (length y) > (length x)]) (y ++ [head (zerolist ((length x)-(length y))) | (length x) > (length y)]) 
```

还有其他提高效率的方法吗？您只能检查一次以查看哪个列表更大吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T05:48:02.097

您的实现很慢，因为看起来您在 zipWith 的每个步骤中多次调用每个列表上的长度函数。Haskell 通过遍历整个列表并计算它遍历的元素数来计算列表长度。

我想到的第一个快速方法是显式递归。

```
addLists :: [Integer] -> [Integer] -> [Integer]
addLists xs     []     = xs
addLists []     ys     = ys
addLists (x:xs) (y:ys) = x + y : addLists xs ys 
```

我不知道有任何标准的 Prelude 函数可以满足您的确切需求，但是如果您想将其推广到更高阶的函数，您可能会做得比这更糟。传递给 zip 函数的两个新值是用于在短列表用完后计算长列表的剩余部分的填充物。

```
zipWithExtend :: (a -> b -> c) -> [a] -> [b] -> a -> b -> [c]
zipWithExtend f []     []     a' b' = []
zipWithExtend f (a:as) []     a' b' = f a  b' : zipWithExtend f as [] a' b'
zipWithExtend f []     (b:bs) a' b' = f a' b  : zipWithExtend f [] bs a' b'
zipWithExtend f (a:as) (b:bs) a' b' = f a b   : zipWithExtend f as bs a' b' 
```

用法：

```
> let as = [0,0,221,2121]
> let bs = [0,0,0,99,323,99,32,2332,23,23]
> zipWithExtend (+) as bs 0 0
[0,0,221,2220,323,99,32,2332,23,23] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T05:15:46.153

这可以在一次迭代中完成，这对于长列表来说应该是一个显着的改进。使用显式递归可能最简单：

```
addTwoLists xs [] = xs
addTwoLists [] ys = ys
addTwoLists (x:xs) (y:ys) = x+y:addTwoLists xs ys 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T08:42:07.650

只是因为我忍不住要骑自行车，你可能会喜欢这个功能：

```
Prelude Data.Monoid Data.List> :t map mconcat . transpose
map mconcat . transpose :: Monoid b => [[b]] -> [b] 
```

例如：

```
> map (getSum . mconcat) . transpose $ [map Sum [0..5], map Sum [10,20..100]]
[10,21,32,43,54,65,70,80,90,100] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:18:01.860

两个建议：

```
addtwolists xs ys = 
  let common = zipWith (+) xs ys
      len = length common
  in common ++ drop len xs ++ drop len ys   

addtwolists xs ys | length xs < length ys = zipWith (+) (xs ++ repeat 0) ys
                  | otherwise = zipWith (+) xs (ys ++ repeat 0) 
```

# javascript - 如何使用 node.js 执行多个 http 请求

> ID：12739605
> 
> 赞同：0
> 
> 时间：2012-10-05T04:42:34.130
> 
> 标签：javascript, node.js, asynchronous, design-patterns

我需要执行几个 http 请求。我有一个 url 数组，当每个请求完成时，`JSON object`它被推入一个数组。当所有请求完成后，将`JSON object`使用新构建的`Array`. 如果我在做这个客户端，我会使用类似`jQuery`的 Deferred 对象。是否有另一种`node.js`无需使用的方法`import jQuery's Deferred object`？似乎不会使用事件发射器来处理这个问题。还是会？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:09:19.070

确保首先在**Node.js**中允许多个连接

```
require('http').globalAgent.maxSockets = 1000 
```

此代码段允许您的 Node.js 服务器为每个客户端接受 1000 个 http 请求。

* * *

Node.js中有很多**流控制**库。

著名的是[async](https://github.com/caolan/async)和[step](https://github.com/creationix/step)。

我个人更喜欢`async`，因为它的功能类似于[underscore](http://underscorejs.org)或[lodash](http://lodash.com)但它的异步版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:15:01.943

这是一个可能的解决方案。

此类扩展 EventEmitter。它的作用是对每个异步请求响应，我们发出完成的异步请求的计数并存储响应的主体。

```
var UrlHandler, events, request, urlHandler,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

events = require("events");
request = require("request");

UrlHandler = (function(_super) {
  __extends(UrlHandler, _super);

  function UrlHandler() {
    return UrlHandler.__super__.constructor.apply(this, arguments);
  }

  UrlHandler.prototype.getUrls = function(urls) {
    var processedUrls, url, urlhandler, _i, _len, _results;
    processedUrls = 0;
    urlhandler = this;
    urlhandler.urlResponse = [];
    _results = [];
    for (_i = 0, _len = urls.length; _i < _len; _i++) {
      url = urls[_i];
      _results.push(request({
        uri: url
      }, function(error, response, body) {
        urlhandler.urlResponse.push(response);
        processedUrls++;
        return urlhandler.emit("processed:" + processedUrls);
      }));
    }
    return _results;
  };

  return UrlHandler;

})(events.EventEmitter);

urlHandler = new UrlHandler();

module.exports = {
  urlHandler: urlHandler
}; 
```

然后在您的主应用程序中，我们将侦听器设置为`'processed:' + urls.length`这样，一旦完成所有异步请求，它将触发。

```
urls = ['http://stackoverflow.com/questions/12739605/how-to-perform-several-http-requests-with-node-js', 'http://stackoverflow.com'];

UrlHandler.getUrls(urls);
UrlHandler.once("processed:" + urls.length, function() {
  return res.json(UrlHandler.urlResponse);
}); 
```

# html - 使用 sql server 以 html 格式显示表格的 sql 查询

> ID：12739606
> 
> 赞同：0
> 
> 时间：2012-10-05T04:42:40.873
> 
> 标签：html, sql-server, stored-procedures

我有一张这样的桌子：

```
create table testjob
(
  jobid int,  
  jobname varchar(100),  
  time float,  
  name varchar(50)  
) 
```

和该表中的样本数据：

```
insert into testjob values ( 1001,'java work',4.5,'arjun')   
insert into testjob values ( 1005,'sql work',10,'arjun')  
insert into testjob values ( 1010,'.net work',7.5,'arjun')  
insert into testjob values ( 1040,'java work',5.5,'ravi')  
insert into testjob values ( 1023,'php work',2.5,'arjun')  
insert into testjob values ( 1027,'.net work',3.5,'ravi') 
```

我想创建一个过程，以便我的输出如下 html 格式，如下面的 sql

我们将编写 select * from testjob 但我希望使用存储过程左右将输出显示在 html 中

```
Name    Jobname     Time

arjun   Javawork     4.5  
arjun   sql work     10  
arjun   .net work    7.5  
ravi     java work   5.5   
arjun    php work    2.5  
ravi     .net work   3.5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:59:51.267

应该这样做，返回数据的 vanilla table/tr/td 形式。

```
select
    '<table>'+
    (
    select '<tr><td>'+name+'</td><td>'+jobname+'</td><td>'+cast(time as varchar(10))+'</td>'
    from testjob
    for xml path(''),root('a'),type
    ).value('(/a)[1]','nvarchar(max)')
    +'</table>'; 
```

现在，如果您想要一些特定的行顺序，您将`ORDER BY`在 FOR XML 行之前添加一个。

# jsf - primefaces 图表上的数字刻度

> ID：12739615
> 
> 赞同：1
> 
> 时间：2012-10-05T04:43:19.810
> 
> 标签：jsf, charts, primefaces

当我们创建`primefaces`图表时，它会以小数点显示数字刻度。我想显示没有小数位，比如简单的 munbers。有没有办法？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:40:57.957

**更新：**

虽然下面发布的解决方法仍然有效，但我找到了一个更合适的解决方案来做到这一点。数字刻度可以通过函数格式化`extender`：

```
<p:barChart value="#{testClazz.categoryModel}" legendPosition="ne"
            widgetVar="barChartObj1" extender="ext1"/> 
```

`<head></head>`在页面上的标签之间放置以下函数：

```
<script type="text/javascript">
    function ext1() {
        this.cfg.axes.yaxis.tickOptions = {
            formatString : '%d'
        };
    }
</script> 
```

* * *

在用 jqPlot 进行了一些试验后，我发现如果在绘图完成后重置轴，小数点被清除后的小数。如果您的 barChart 定义如下：

```
<p:barChart id="basicPlot" value="#{testClazz.categoryModel}" 
    legendPosition="ne" widgetVar="barChartObj"
    title="Basic Bar Chart" min="0" max="270"/> 
```

页面加载完成后调用以下函数：

```
<script type="text/javascript">
    $(document).ready( function() {
        setTimeout(formatAxisNumbers, 500);
    });
    function formatAxisNumbers() {
        window.barChartObj.plot.resetAxesScale();
        window.barChartObj.plot.replot();
    }
</script> 
```

请注意，`resetAxesScale`您可以通过执行以下操作分别重置*x*或*y* ，而不是重置两个轴：

`window.barChartObj.plot.axes.xaxis.resetScale();`

或者

`window.barChartObj.plot.axes.yaxis.resetScale();`

您还可以尝试将超时减少到更小的数字，以实现更平滑的重新绘制。有关其他选项，请参阅[jqPlot 文档](http://www.jqplot.com/docs/files/usage-txt.html)。

在 Google Chrome 22.0.1229.94（官方版本 161065）中测试。

# facebook - 在 Facebook 页面上发帖、隐私设置和图形 API

> ID：12739618
> 
> 赞同：0
> 
> 时间：2012-10-05T04:43:28.307
> 
> 标签：facebook, facebook-graph-api, settings, privacy

我有一个公司的 Facebook 页面，用户可以首先“喜欢”然后发布消息。当我作为已关闭平台功能（通过隐私设置 -> 广告、应用程序和网站）的用户发布到此页面并使用图形 API/实时流 API 访问此页面上的帖子时，我前面提到过帖子未返回（如预期的那样 -> 由于用户隐私设置）。

是否知道（通过 API）用户已发布但具有强大的隐私设置，因此我没有收到任何帖子？

# geany - Geany 类成员侧边栏

> ID：12739623
> 
> 赞同：1
> 
> 时间：2012-10-05T04:43:47.197
> 
> 标签：geany

在 Eclipse 中，当我打开一个文件时，会有一个侧边栏显示文件中的所有方法和全局变量。有没有办法让 Geany 获得类似的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:18:19.773

Geany 在侧边栏上也显示了这个，它位于标有“符号”的选项卡上。你可以在这里看到一个例子： ![符号列表](../Images/c8e66ade8bb0e29e877ff8556788f383.png)

我不确定它支持哪些语言。它适用于我迄今为止尝试过的每一种语言（JavaScript、Java、C、Python、C++），但它似乎并不总是有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:07:01.550

您可以通过在编辑菜单中选择“首选项”来打开符号侧边栏。在“接口”选项卡中，选中“显示符号列表”。

# jquery - jQuery droppable 不能被禁用

> ID：12739624
> 
> 赞同：0
> 
> 时间：2012-10-05T04:44:04.310
> 
> 标签：jquery, jquery-ui, user-interface, droppable

我对 droppable 有一个奇怪的问题。[http://jsfiddle.net/samanth/dykcV/16/](http://jsfiddle.net/samanth/dykcV/16/)这个例子效果很好。一旦我在 droppable 上放置了一个 div，它就不允许我在其上放置任何其他东西。我的应用程序中有相同的代码，但 droppable 接受 drop。

在放弃之前我有一个 AJAX 调用。这会是个问题吗？

这是我的实际代码。

```
$(".dropItem").droppable({
    accept:'.dragItem',
    hoverClass: 'hovered',

    drop:function (event, ui) {
        var answerNumber = $(this).attr( 'id' );
        var questionNumber = ui.draggable.attr( 'id' );

        $(this).append($(ui.draggable));

        //Send ajax query and get the response here..
        // generating form data

        send('matchAnswer?gameId=' + gameId + '&answerId=' + answerNumber + '&questionId=' + questionNumber, function (e) {
            if (this.status == 200) {
                var resp = this.responseText;
                if ( resp == "true" ) {
                    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" }).draggable ("disable").css ({ opacity : 1 });
                    $(this).droppable('option', 'disabled', true);
                } else {
                    // do something here
                }
            }
        }, formData);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:22:35.267

Ajax 调用是问题所在。让我们分解正在发生的事情：

1.  可拖动项目被拖放到可放置项目中
2.  您的 drop 方法将可拖动项目附加到可放置项目中
3.  然后你的 drop 方法执行一个 ajax 调用
4.  当 ajax 调用完成并且状态代码为 200 时，您会进行一些小的 css 调整，然后禁用 droppable 接收任何更多可拖动项目的能力。

您概述的问题是 droppable 允许将超过 1 个可拖动项目放置在其中。因此，Ajax 调用会出现问题。如果无法自己进行测试，我会说您遇到以下问题之一：

* * *

**您的 AJAX 调用永远不会成功**

检查：打开 firebug 并检查 AJAX 调用的响应

* * *

**您的 AJAX 调用返回的状态代码不是 200**

检查：使用 firebug 调试 AJAX 调用返回时执行的函数。你的状态码是200吗？

* * *

**此关键字未引用您认为的元素**

检查：使用 firebug 调试 AJAX 调用返回时执行的函数。$(this) 的值是多少？

如果 $(this) 不是你想的那样，那么我相信这个 javascript 代码会为你工作：

```
send('matchAnswer?gameId=' + gameId + '&answerId=' + answerNumber + '&questionId=' + questionNumber,
    $.proxy( function (e) {
    if (this.status == 200) {
        var resp = this.responseText;
        if ( resp == "true" ) {
            $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" }).draggable ("disable").css ({ opacity : 1 });
            $(this).droppable('option', 'disabled', true);
        } else {
            // do something here
        }
    }
}, this), formData); 
```

上面代码中的关键是我使用 $.proxy 来确保执行的函数将保持正确的范围。更多信息：[http ://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

# python - 嵌套列表或集合理解的正确语法

> ID：12739626
> 
> 赞同：3
> 
> 时间：2012-10-05T04:44:12.727
> 
> 标签：python, set, list-comprehension

想象一下这个对象：

```
my_obj = {
    'Episodes' : [
        {'Tags' : ['one','two','three']},
        {'Tags' : ['three','four','five']}
            ]
        } 
```

我想创建一组标签：

```
tags = set(tag for tag in e['Tags'] for e in my_obj['Episodes']) 
```

但是，它不起作用，因为`e`没有定义。我该怎么做？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T04:46:35.893

```
tags = set(tag  for e in my_obj['Episodes'] for tag in e['Tags']) 
```

您需要更改订单并先获取e ... :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T05:20:53.040

我用来避免被这些嵌套推导混淆的技巧是*按照循环在推导中出现的顺序展开循环*。

所以在你的例子中，你有一个[genex](http://www.python.org/dev/peps/pep-0289/)：

`tag for tag in e['Tags'] for e in my_obj['Episodes']`

您可以像这样在精神上将其扩展为双循环：

```
for tag in e['Tags']:
  for e in my_obj['Episodes']:
    yield tag 
```

现在有了这个结构，你可以很清楚地看到你的错误在哪里，`e`没有定义，并且看到它真的应该是：

```
for e in my_obj['Episodes']:
  for tag in e['Tags']:
    yield tag 
```

哪个崩溃回到嵌套的理解中

`tag for e in my_obj['Episodes'] for tag in e['Tags']`

正如您已经从之前的答案中看到的那样。希望这可以帮助！

# android - 哪些 Android 设备支持 jni？

> ID：12739627
> 
> 赞同：7
> 
> 时间：2012-10-05T04:44:39.810
> 
> 标签：android, bluetooth, android-ndk, java-native-interface, equinox

我为 Archos 43 开发了一个使用 JNI（ **java 本机接口）的 Android 应用程序。**

没有问题，我能够顺利运行应用程序。后来我尝试在**Samsung I9100G Galaxy S II**和**Samsung I9100 Galaxy S II**上运行相同的应用程序。

我能够在**I9100G**上运行该应用程序，但不能在**I9100**上运行。

> 原因是 I9100 不支持应用程序的 JNI 部分。

我确实试图了解这个原因，并能够发现 I9100G 使用`Ti OMAP 4430 chipset`和`PowerVR SGX540 as GPU whereas I9100 uses Exynos 4210 chipset and Mali-400MP as GPU.`

我怀疑原因可能是芯片组的变化（因为 Archos 43 也使用了 Ti OMAP）。但是从我的搜索中无法获得任何进一步的结果。

**更新**应用程序使用蓝牙。在尝试连接到自定义硬件 (CH) 时，在 I9100 上运行应用程序时无法从 CH 获得任何响应。蓝牙通信部分使用jni编写。

所以我的问题是，由于芯片组的原因，我是否无法在**I9100**上使用 JNI 运行我的应用程序，如果是，为什么？

还有一个更普遍的问题是哪些设备支持 Android JNI 应用程序以及设备运行 Android JNI 应用程序所需的基本功能是什么？（我花了相当多的时间试图找到所有这些问题的答案，任何帮助将不胜感激。）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:55:34.663

所有 Android 设备都“支持”JNI，这就是操作系统的很大一部分是如何实现的：Java 服务和框架通过 JNI 使用本机库。然而，有不同的架构，如果你有一个本地模块，你需要确保为你想要支持的每个架构构建一个。即使您只针对 ARM 设备，也有 ARMv5 和 ARMv7 设备。ARMv5 应该适用于所有，但速度较慢。

Galaxy SII 设备可能使用相同的架构，因此您遇到了其他一些问题/错误。你得到了什么错误？如果可用，请发布 logcat。也许您正在尝试访问其中一台设备上不可用的硬件？或者链接到由于某种原因丢失的系统库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:54:13.913

既然您透露该问题可能与 2.3.3 上的 BT 有关，这一切都是有道理的。4.0 之前的 Android 蓝牙接口未标准化，您的代码很可能是 TI OMAP 特定的。因此，如果您想支持其他芯片组，则需要与其他驱动程序或具有 ICS 或更高版本的目标设备通信。

# gnuplot - Gnuplot 代码：绘制以单独块组织的数据

> ID：12739628
> 
> 赞同：2
> 
> 时间：2012-10-05T04:44:47.970
> 
> 标签：gnuplot

我需要在每个第 2 块的第 2 行中绘制迭代（不是 i）与 f(i) 的关系。我用“*”标记了这些值。我尝试使用“每个”提出一些解决方案，但无法弄清楚如何将来自两个单独块的数据相互绘制。有多个块以这种模式进行。我选择只显示 1 次重复。这是重新格式化数据的最后手段。我想设计一种以当前格式绘制数据的方法。谁能提供一些见解？

```
 i     f(i)       x(i)    iteration =   0*

 1  0.000E+00  1.478E-02  Vlnp                                    
 2 -1.000E-06* 7.352E-01  Vvnp                                    
 3  0.000E+00  7.512E-01  rhovnp                                  
 4 -9.721E-01  9.180E+02  Pnp                                     
 5  9.721E-01  4.380E+06  hvnp                                    
 6  1.000E-06  1.000E-06  mdevap                                  

 i     f(i)       x(i)    iteration =   1*

 1 -2.776E-17 -1.265E+02  Vlnp                                    
 2  1.985E-10* 1.273E+02  Vvnp                                    
 3 -1.224E-03  4.292E+03  rhovnp                                  
 4 -9.983E-01  9.180E+02  Pnp                                     
 5  1.018E+00 -2.560E+10  hvnp                                    
 6  4.468E-08  3.250E+06  mdevap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:00:44.193

我强烈建议重组您的数据。这也可以在 gnuplot 中使用`grep`,`awk`和`sed`. 这是一个工作示例。

```
 plot "< grep '*' kxkdata | awk '/^ i/ {printf $6\" \"} /^ 2/ {print $2}' | sed 's/\*//g'" 
```

基本上`<`意味着从一种子shell中读取（我称你的文件为kxk7607）。关于命令行工具的使用，可以在网上找到相关资料。

# oracle11g - Oracle - 获取数据库中所有表的字段

> ID：12739629
> 
> 赞同：0
> 
> 时间：2012-10-05T04:45:06.807
> 
> 标签：oracle11g, sqlplus

我知道要查找表的所有字段，我应该使用类似

```
sqlplus > desc testtable; 
```

这列出了一个表的所有字段（这里是 testtable）

但是现在，我的数据库中有一个表列表。

**使用 sqlplus 获取给定数据库中所有表的字段的方法是什么？** 我试过

```
 sqlplus > desc <Databasename>; which didnot work. 
```

有人告诉我使用

```
sqlplus > select * from INFORMATION_SCHEMA.TABLES ; //gives error.

SQLPLUS > SELECT * FROM INFORMATION_SCHEMA.COLUMNS; //gives some error. 
```

（归根结底，我正在尝试获取数据库模式。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:49:56.320

我不相信您可以在其他数据库（SQL Server、PostGres、MySQL 等）中找到的 information_schema 表在 Oracle 中。我曾经使用 ALL_TAB_COLUMNS 表来获取该类型的信息....也许是另一种选择。

链接：[ALL_TAB_COLUMNS](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2094.htm)

# wpf - 为什么 Telerik RadTimeLine 不显示某些属性

> ID：12739631
> 
> 赞同：0
> 
> 时间：2012-10-05T04:45:51.340
> 
> 标签：wpf, silverlight, reference, telerik, rad-controls

首先，我在查找、引用和使用控件时遇到了一些困难，我尝试引用了很多 Telerik.Windows.Something，当我输入 telerik:RadTimeLine 时，VS intellisense 没有显示任何内容。我最终引用了所有 Telerik dll，现在，标记向我显示 RadTimeLine，但是当我编译 projetc 时找不到某些属性

这是测试项目[（MyTestProject）](https://docs.google.com/open?id=0Bzamt5nikt3KVzRxV3V4X0ctbnc)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:52:50.030

事实上，RadTimeLine 仅包含在 2012 版本中。很抱歉之前没有搜索此信息

# regex - 跨语言的 RegEx 标准

> ID：12739633
> 
> 赞同：17
> 
> 时间：2012-10-05T04:46:07.207
> 
> 标签：regex

我问这个问题是因为我注意到不同语言之间的 RegEx 语法存在一些细微差别。

我想知道某处是否维护了 RegEx 标准？如果是这样，我在哪里可以找到这份文件？此外，如果我在 .NET 中创建 RegEx 表达式，是否保证相同的表达式 100% 兼容并与其他语言（例如 Perl、Javascript 或 Java）一起使用？

最后，在使用 RegEx 时是否有任何“最佳实践”可以帮助使其在其他平台语言中更易于维护？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T05:01:28.563

最古老的标准化正则表达式集之一是 POSIX BRE（基本正则表达式）和 ERE（扩展正则表达式），记录在[正](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)则表达式 下。

其他语言可能会定义自己的标准。例如，C++ 2011 在第 28 条（大约 46 页标准）中定义了一个正则表达式库。 [Perl](http://perldoc.perl.org/perlre.html)定义了它的正则表达式。其他语言从这些来源和其他来源借用。Lex 和 Flex 使用它们自己的一组正则表达式。Sed 在正则表达式上使用它自己的变体。Java、JavaScript 和……定义了它们自己的版本，有时使用[PCRE](http://pcre.org/)（Perl 兼容的正则表达式）作为他们设计的基础。一些细节受到使用正则表达式的语言所提供的设施的影响。

Jeff Friedl 的《[掌握正则表达式](http://regex.info/)》一书涵盖了许多不同的正则表达式集，确定了哪些是常见的，哪些是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:56:29.383

不，没有这样的标准。当然还有 PCRE，POSIX BRE，POSIX ERE，...

但实际上任何语言都会有“小”差异。对于大多数风格，您可以传递非常基本的东西，例如`.`任何字符或量词`+*?`，字符类也很常见，但它已经从预定义的类开始，例如`\w`，它是否支持？还是基于 ASCII 或 Unicode？

一个很好的帮助是Jan [Goyvaerts](https://stackoverflow.com/users/33358/jan-goyvaerts)[对正则表达式信息的风味比较](http://www.regular-expressions.info/refflavors.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:56:42.093

最佳实践

`positive-negative lookbehinds`在某些情况下避免使用and`lookaheads`

# visual-studio-2010 - 如何使用 Visual Studio 在构建项目中自动复制文件

> ID：12739634
> 
> 赞同：0
> 
> 时间：2012-10-05T04:46:12.097
> 
> 标签：visual-studio-2010

我有一些定制的 XML 文件和一个已包含在我的项目中的自述文件。

如何在构建项目时自动将这些文件复制到我的调试/发布文件夹中？我尝试将“复制到输出目录”属性设置为“始终复制”，但这似乎不起作用。

我正在使用 VS2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:55:58.330

我找到了答案。如果您只想直接将文件复制到输出文件夹，则需要将构建操作设置为**内容。**

![在此处输入图像描述](../Images/9bf56d029aea57686902eda465d9453e.png)

# javascript - 在javascript中设置asp.net MVC4 web api路由url返回空字符串

> ID：12739635
> 
> 赞同：4
> 
> 时间：2012-10-05T04:46:27.967
> 
> 标签：javascript, asp.net-mvc-3, razor, asp.net-web-api, asp.net-routing

这是我用来设置 api url 的代码：

```
var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Client"})'; 
```

在我的 route.config 中，路线如下所示：

```
routes.MapHttpRoute(
            name: "ApiControllerAction",
            routeTemplate: "api/{controller}/{action}/{id}"
        ); 
```

我试图在我的控制器上执行的操作是：

```
[ActionName("clients")]
    public IQueryable<Client> GetClients(int id)
    {
        return Uow.Clients.GetClients(id);
    } 
```

我在 javascript 中有一个函数试图访问这个 api，但我得到了 404：

```
var getClients = function (id) {
            return $.ajax(clientUrl + "/clients/" + id)
        }; 
```

当我调用 getClients(1) 时，url 试图点击是这样的：

```
localhost:12345/clients/1 
```

而不是我预期的网址：

```
localhost:12345/api/client/clients/1 
```

知道这是哪里出错了吗？我有这个在另一个项目中工作，不记得是否还有其他我应该做的事情。如果我检查 javascript clientUrl = ''.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T16:38:49.283

我遇到了这个答案[How to create ASP.NET Web API Url?](https://stackoverflow.com/questions/9502306/how-to-create-asp-net-mvc-web-api-url) 这有帮助。

[我在GitHub 上](https://github.com/markyjones/StackOverflow/tree/master/ApiControllerRouteUrlExample)的答案的示例代码

您可以更改您的 @Url.RouteUrl 代码以包含**操作**名称和“ID”，这目前似乎不是您的操作路线可选的......这可能是它无法找到匹配项并返回空字符串的原因. 所以试试：

```
var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Client", action = "clients" id=@... })'; 
```

**注意。** `id=@... })';`最后......成为模型上的 var 或属性的任何 id 等等......

## **或者**

您当然可以将 ID 设为可选，这也可以：

```
config.Routes.MapHttpRoute(
        name: "ApiControllerAction",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional } 
```

## **或者**

您可能会发现避免使用操作更简洁......客户端可以住在自己的控制器中`ClientsController`，您可以使用路由和默认值路由到它：

```
routes.MapHttpRoute(
        name: "ApiControllerAction",
        routeTemplate: "api/client/clients/{id}",
        defaults: new { controller="Clients" }
    ); 
```

那么这应该会给你所需的响应：

```
var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Clients" })';

//api/client/clients/ 
```

和...

```
var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Clients", id=@... })';

//api/client/clients/x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:51:50.200

尝试设置`clientUrl`如下：

```
var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Client", action = "clients"})'; 
```

然后改变`getClients`这个：

```
var getClients = function (id) {
    return $.ajax(clientUrl + "/" + id)
}; 
```

# c# - 如何清除 DataGridView 中的数据？

> ID：12739636
> 
> 赞同：0
> 
> 时间：2012-10-05T04:46:33.997
> 
> 标签：c#, datagridview

我是 C# 新手。如何清除中的数据`DataGridView`？

我有一些`data`，每次改变 `datagridview`我都有一个`drop down box``index`

我想要`datagrid view`的会改变。但我没有得到解决方案只是我添加到

以前的数据可以帮助任何人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:51:07.607

如果您使用数据源填充网格，请使用：

```
dataGridView1.DataSource=null;
dataGridView1.DataBind(); 
```

如果您以编程方式填充网格，请使用：

```
dataGridView1.Rows.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:02:25.567

如果您希望在下拉列表更改时更改 DataGridView，那么您只需将代码授予值重用于 Datagridview。

# django - 在 AngularJS 中绑定（和总计）任意数量的输入值

> ID：12739641
> 
> 赞同：0
> 
> 时间：2012-10-05T04:47:02.610
> 
> 标签：django, angularjs

我正在学习一点 AngularJS 并且遇到了一个似乎应该很容易解决的问题，但是我对文档和各种论坛的搜索证明它要么有点复杂，要么我只是不知道正确的术语。无论如何，这是它的短处。我想绑定到任意数量的输入字段并汇总它们的值（例如，我可以显示用户输入数字的运行总数）。然而，不仅输入字段的数量是任意的，而且字段本身可能每次都有不同的名称。

具体来说，我的数据后端是 Django，由于各种原因，表单本身必须由 Django 的模型表单生成，然后通过 ajax 调用发送到 Angular 前端。我真的想避免与每个表单过于紧密地耦合（即我不想为 Django 可能发送的每个可能的表单排列编写一个 Angular 函数，而是想要一个知道如何选择要绑定的正确内容的单个函数至）。

我确实可以通过 Django 控制表单的构建，并且一直在尝试找出我需要注入哪些 Angular 指令，但由于我仍在学习曲线上，任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:10:36.550

使用javascript数组怎么样？您可以制作一个`ng-model`引用数组元素的表单。并`total()`函数遍历数组元素并获得总和。

它可以通过这种方式支持任意数量的输入元素。如果只涉及输入元素和总功能，则满足要求。

[http://plnkr.co/edit/ZJCQ2m](http://plnkr.co/edit/ZJCQ2m)

# .htaccess - .htaccess - 影响所有子域，如何排除？

> ID：12739642
> 
> 赞同：0
> 
> 时间：2012-10-05T04:47:05.583
> 
> 标签：.htaccess, mod-rewrite

我有以下代码：

```
RewriteEngine on 
#Options +FollowSymLinks 

RewriteCond %{HTTP_HOST} ^raal.co.il
RewriteRule (.*) http://www.raal.co.il/$1 [R=301,L]

RewriteCond %{SCRIPT_FILENAME} !\.(gif|jpg|JPG|png|css|php|js|html|htm|psd|rar|htc)$
RewriteRule ^(.*)$ index.php?a=$1 [L] 
```

但是当我创建子域时，由于此代码而出现错误。

我希望 - fb.raal.co.il - 不受主路径的 .htaccess 影响。

我尝试在主 .htaccess 中添加类似这样的内容：

```
RewriteCond %{HTTP_HOST} ^fb\.raal\.co\.il
RewriteRule (.*) http://fb.raal.co.il/$1 
```

但它不会工作..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:27:30.427

只是否定（！）你不想重定向fb

```
RewriteCond %{HTTP_HOST} ^raal\.co\.il
RewriteCond %{HTTP_HOST} !^fb\.raal\.co\.il
RewriteRule (.*) http://www.raal.co.il/$1 [R=301,L] 
```

您可以对一个 RewriteRule 使用多个条件 (RewriteCond)

并使用`\.`而不是`.`

```
RewriteCond %{HTTP_HOST} ^raal\.co\.il 
```

点是正则表达式中的一个字符

# html - 在 BooStrap 中使用背景图像显示图像

> ID：12739644
> 
> 赞同：1
> 
> 时间：2012-10-05T04:47:46.160
> 
> 标签：html, css, twitter-bootstrap

我刚刚使用 Twitter 的 BootStrap 完成了我网站的一部分构建，但我正在寻找改进它的方法。这个模块有一个**已知宽度**但**未知高度**的图像（图像高度会变化但具有固定宽度）并且在图像顶部有文本。我最初是通过在 div 中添加一个图像标签来构建它，然后使用`position:absolute; top:0;`它来移动一个图层上方的文本。

我不喜欢使用`position:absolute;`. 我的替代解决方案是将图像视为包含文本的 div 的背景。但是，通过这样做，我遇到了两个问题：

1.  我不知道如何指定 div 的高度，因为这是基于图像高度的变量。宽度将始终为 span4 (300px)。每个图像最多只有几个单词，因此不足以占据 div 的整个垂直空间。
2.  随着浏览器宽度的缩小，部分背景 div 会被裁剪掉。这是因为 BootStrap 正在尝试调整响应能力。我将如何解决这个问题？

我完全被难住了，我觉得如果不能定义一个明确的高度，这种替代解决方案是不可能的。有更好的选择吗？

我的代码：

```
<div class="span4 cell">
    This is a placeholder image
</div>

.cell { background: url(http://www.placehold.it/300x200) no-repeat; } 
```

为了清楚起见，这是我要创建的图像： ![在此处输入图像描述](../Images/113a21a2db3216e661b4e42ec8127d22.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:50:14.887

***[Demo](http://tinkerbin.com/LstdK65j)***................................

HI now used to this

```
.span4.cell { 
background:url("http://www.placehold.it/300x200.jpg") no-repeat;
width:300px;
height:200px;
 } 
```

***[Live demo](http://tinkerbin.com/LstdK65j)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:21:41.217

试试这个 CSS 代码。它将高度设置为自动。如果您不想要边框，请删除。

```
.cell {
background:url("http://i.stack.imgur.com/klttw.jpg") no-repeat;
width:300px;
height:200px;
border: 1px solid red;
} 
```

试试这个演示：[jsfiddle](http://jsfiddle.net/sselvamani22/mwcTx/)

# java - Java 字符串中的字符数

> ID：12739648
> 
> 赞同：4
> 
> 时间：2012-10-05T04:48:23.473
> 
> 标签：java, unicode, utf-8, thai

> **可能重复：**
> [Java：使用 unicode overline 显示平方根时的字符串长度？](https://stackoverflow.com/questions/7704426/java-length-of-string-when-using-unicode-overline-to-display-square-roots)

如何获取字符串中的 Unicode 字符数？

给定一个`char[]`泰语字符：

```
[อ, ภ, ิ, ช, า, ต, ิ] 
```

这在字符串中显示为：อภิชาติ</p>

`String.length()`返回 7。我知道（技术上）有 7 个字符，但我需要一个可以返回 5 的方法。这是屏幕上显示的字符空间的确切数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T05:25:57.083

似乎您只是不想将 unicode 标记计为单独的字符；

```
static boolean isMark(char ch)
{
    int type = Character.getType(ch);
    return type == Character.NON_SPACING_MARK ||
           type == Character.ENCLOSING_MARK ||
           type == Character.COMBINING_SPACING_MARK;
} 
```

可以用作；

```
String olle = "อภิชาติ";
int count = 0;

for(int i=0; i<olle.length(); i++)
{
    if(!isMark(olle.charAt(i)))
        count++;
}

System.out.println(count); 
```

并返回“5”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:54:27.917

您可以在此处调整发布到此问题的解决方案：

[Java中的Unicode到字符串转换](https://stackoverflow.com/questions/1934842/unicode-to-string-conversion-in-java)

通过剥离“#”字符并计算字符串中剩余的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:09:44.923

您可以使用 a`java.text.BreakIterator`来查找字素（“视觉字符”）之间的间隙并计算它们。这是一个例子：

```
import java.text.BreakIterator;

..

int graphemeLength(String str) {
    BreakIterator iter = BreakIterator.getCharacterInstance();
    iter.setText(str);

    int count = 0;
    while (iter.next() != BreakIterator.DONE) count++;

    return count;
} 
```

现在`graphemeLength("อภิชาติ")`将返回 5。

# forms - 使用文本框下载文件

> ID：12739650
> 
> 赞同：0
> 
> 时间：2012-10-05T04:48:26.250
> 
> 标签：forms, textbox

我是一名教师，我希望学生在我评分后能够下载他们的作业。所有作业的名称都是“studentid.docx”，所以我想知道是否有一种方法可以创建一个文本框，学生只需输入他们的 id，它就会抓取他们的文件。我只想将它指向一个公共目录，例如 mysite.com/assignment1/studentid.docx。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:54:15.047

您可以使用 javascript 将 id 附加到字符串“student”，从中获取字符串“studentid”，然后在学生单击提交按钮时在表单的 action 属性中指向名称为“studentid.docx”的文件在表格中输入他的身份证后。

# php - 无法分配命令/var

> ID：12739652
> 
> 赞同：1
> 
> 时间：2012-10-05T04:48:42.317
> 
> 标签：php, mysql

我试图让这段代码从这张表中删除一行，但我得到了这些错误。如果我删除我的 $action 标签。然后 $IDnum 会导致错误。抱歉这个愚蠢的问题，还在学习 php =}

```
if ($action == "deletead") {  // remove AD
    mysql_query("DELETE FROM ads where ID = '$IDnum'") or die(mysql_error());
    $i=$i++;
}

    $letknown = "<b>User account removed</b><br>";

    echo "<div class=\"adcode\"><b>$ID : $adname</b><br /><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br /><br />$adcode</div><br />\n";
    echo "<br /><hr />"; 
```

注意：未定义变量：第 38 行 C:\Program Files (x86)\Zend\Apache2\htdocs\adgate\displayads.php 中的操作

注意：未定义变量：C:\Program Files (x86)\Zend\Apache2\htdocs\adgate\displayads.php 中的 IDnum 位于第 39 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:51:32.277

尝试获取 echo $action 和 $IDnum 并查看您获得的价值。

我认为 $action 和 $IDnum 没有得到任何价值，这就是为什么只有这个通知来的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:53:29.253

像这样正确编码您的结构并使用 $_GET['action'] 获取 url 参数

```
if ($_GET['action'] == "deletead") {  // remove AD
mysql_query("DELETE FROM ads where ID = '$_GET[IDnum]'") or die(mysql_error());
$i=$i++;
}

$letknown = "<b>User account removed</b><br>";

echo "<div class=\"adcode\"><b>$ID : $adname</b><br /><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br /><br />$adcode</div><br />\n";
echo "<br /><hr />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:52:09.363

应该是这样的，你没有通过url得到变量的值

```
if ($_GET['action'] == "deletead") {  // remove AD
    mysql_query("DELETE FROM ads where ID = $_GET['IDnum']") or die(mysql_error());
    $i=$i++;
}

    $letknown = "<b>User account removed</b><br>";

    echo "<div class=\"adcode\"><b>$ID : $adname</b><br /><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br /><br />$adcode</div><br />\n";
    echo "<br /><hr />"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T04:53:20.023

发生错误是因为您没有获取在该 href 中传递的值。试试这个，你应该使用 `$IDnum = $_REQUEST['IDnum']` Same 来行动 `$action = $_REQUEST['action']`

# c# - 带有一个强制参数和一个可选参数的 ASP.NET MVC 路由？

> ID：12739653
> 
> 赞同：13
> 
> 时间：2012-10-05T04:48:48.200
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, url-routing

在过去一个月左右的时间里，我一直在开发一个大型 MVC 应用程序，但这是我第一次需要定义自定义路由处理程序，并且遇到了一些问题。基本上我有两个参数要传递。第一个是必需的，第二个是可选的。

我在[这里](https://stackoverflow.com/a/2246508)关注这个答案。

这是我的自定义路线：

```
routes.MapRoute(
    "MyRoute",
    "{controller}/{action}/{param1}/{param2}",
    new { 
        controller = "MyController", 
        action = "MyAction", 
        param1 = "", 
        param2 = "" // I have also tried "UrlParameter.Optional" here.
    }
); 
```

还有我的动作方法签名：

```
public ActionResult MyAction(string param1, string param2) 
```

如果我尝试使用 URL `http://[myserver]/MyController/MyAction/Test1/Test2`，那么它会像我期望的那样工作，param1 = "Test1" 和 param2 = "Test2"

如果我尝试 URL `http://[myserver]/MyController/MyAction/Test1`，那么两个参数都为空。

希望有人能告诉我我在这里做错了什么，因为我迷路了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T05:45:02.633

我假设您创建了新路线并留下了与您的非常相似的默认路线。您应该知道遍历路由集合以找到第一个匹配的路由。因此，如果您保留了默认值：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

在您的路线上方，然后它将匹配请求`http://[myserver]/My/MyAction/Test1`并调用`MyController.MyAction`并将“Text1”设置为名为的参数`id`。这将失败，因为此操作未声明名为`id`.

您需要做的是将您的路线作为路线列表中的第一个移动并使其更具体，然后是现在：

```
routes.MapRoute(
            "Route",
            "My/{action}/{param1}/{param2}",
            new
            {
                controller = "My",
                action = "MyAction",
                param1 = "",
                param2 = ""
            }); 
```

这将强制所有经过路由的流量`My`与此路由匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:31:57.450

嗨，你像这样创建你的溃败，我认为这会帮助你

```
routes.MapRoute(
                "Regis", // Route nameRegister
                "Artical/{id}", // URL with parameters
                new { controller = "Artical", action = "Show", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T06:09:46.257

试试这个

```
routes.MapRoute("MyRoute",
                 "myRoute/{param1 }/{param2 }",
                 new { controller = "MyController", action = "MyAction", param2 = UrlParameter.Optional },
                 new { param2 = @"\w+" }); 
```

您可以使用“ **UrlParameter.Optional** ”将一个参数指定为可选参数，并使用 DataType 指定第二个参数意味着如果您传递整数值，则 DataType (@"\d+") 和我上面提到的字符串。

注意： **参数的顺序**非常重要**可选参数必须最后传递**并**在 Gloab.asax 中的默认路由之前注册您的新路由**。

然后你的动作链接就像

```
<a href="@Url.RouteUrl("MyRoute", new { param2 = "Test1",param1 = "Test2"})">Test</a> 
```

或只有一个参数

```
 <a href="@Url.RouteUrl("MyRoute", new { param2 = "Test1"})">Test</a> 
```

在你的控制器中

```
 public ActionResult MyAction(string param2,string param1)
 {
   return View()
 } 
```

# r - split.xts 在自定义时间

> ID：12739654
> 
> 赞同：1
> 
> 时间：2012-10-05T04:49:05.947
> 
> 标签：r, split, time-series, xts

我目前正在使用 split.xts 的形式`split(xts.obj,'days')`创建日内数据列表，以便列表的每个元素代表一天。这从午夜到第二天午夜（就在之前）打破了一天有没有办法在任意时间将数据拆分到列表中，例如早上 9 点到第二天早上 8:59.59.999？

这是一个相当普遍的问题，但如果你想要样本数据......这里是......下面应该说明我关于午夜发生的分裂的观点。

```
require(xts)
x <- xts(rnorm(1000000),Sys.time()-1000000:1)
x1 <- split(x,'days')
head(x1[[2]]) 
```

编辑：

该解决方案与该问题的答案非常相似...[如何通过 R 中的 xts 从分钟数据中提取/子集 day+0 到 day+1 索引时间？](https://stackoverflow.com/questions/9908643/how-do-i-extract-subset-day0-to-day1-index-times-from-minutely-data-via-xts)，但如果有更直接的方法，将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:32:21.590

这将创建一个时间向量（对于 GMT 9AM）：

```
as.POSIXct(as.Date( seq(range(index(x))[1], range(index(x))[2], by="days") )) + 60*60*9
cts <- .Last.value
xp9 <- split(x, cut(index(x), cts) )
str(xp9)
#List of 11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:19:37.970

This is the same as [your other question](https://stackoverflow.com/q/12740851/841830) (?), with the same possible solution:

```
library(xts)
set.seed(42)
x <- xts(rnorm(1000000), as.POSIXct('2012-10-07') - (1000000:1) )

index(x) = index(x) - (9*3600)
x1 <- lapply ( split(x,'days'), function(one_day){ index(one_day) = index(one_day) + 9*3600; one_day } )
index(x) = index(x) + (9*3600) 
```

Here is x:

```
2012-09-25 10:13:20  1.3709584
2012-09-25 10:13:21 -0.5646982
2012-09-25 10:13:22  0.3631284
...
2012-10-06 23:59:57  0.7505021
2012-10-06 23:59:58 -0.4726833
2012-10-06 23:59:59  1.1356617 
```

Here is x1[[1](https://stackoverflow.com/q/12740851/841830)]:

```
2012-09-25 10:13:20  1.3709584
2012-09-25 10:13:21 -0.5646982
2012-09-25 10:13:22  0.3631284
...
2012-09-26 08:59:57 -0.7079315
2012-09-26 08:59:58 -0.2135840
2012-09-26 08:59:59 -1.8307128 
```

x1[[2]]:

```
2012-09-26 09:00:00  2.3205603
2012-09-26 09:00:01  1.8911404
2012-09-26 09:00:02 -0.8547244
...
2012-09-27 08:59:57 -0.5731661
2012-09-27 08:59:58 -1.5224021
2012-09-27 08:59:59 -0.5316183 
```

And x1[[12]]:

```
2012-10-06 09:00:03  0.9222899
2012-10-06 09:00:04 -0.2010127
2012-10-06 09:00:05 -1.8403161
...
2012-10-06 23:59:54 -0.5931701
2012-10-06 23:59:55 -1.1656284
2012-10-06 23:59:56  0.7000441 
```

If you want an alternative approach, you could also just change the timezone:

```
Sys.setenv(TZ = "UTC")
library(xts)
set.seed(42)
x <- xts(rnorm(1000000), as.POSIXct('2012-10-07') - (1000000:1) )
indexTZ(x) = 'UTC+9'
x1 <- lapply ( split(x,'days'), function(one_day){ indexTZ(one_day) = 'UTC'; one_day } ) 
```

If your 9am day break is actually 8am in summertime, then you should use the timezone approach, as R will do the summertime adjustments automatically for you. If not, I prefer the previous approach: I'm then describing exactly what I mean, and not vulnerable to a bug in the timezone database. (I think the TZ database might also work differently on Windows... I've not had chance to test that yet.)

# url - URL转义：在URL中将多字节字符“%83%4a”写为“%83J”是否合法？

> ID：12739656
> 
> 赞同：0
> 
> 时间：2012-10-05T04:49:35.090
> 
> 标签：url, escaping

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:42:37.990

我的答案基于[RFC 2396](https://www.rfc-editor.org/rfc/rfc2396)，因为那是[HTTP 1.1](https://www.rfc-editor.org/rfc/rfc2616)所使用的。

根据[第 2.1 节](https://www.rfc-editor.org/rfc/rfc2396#section-2.1)，有 2 个单独的步骤，后者是可选的：

1.  URI 字符序列->八位字节序列
2.  八位字节序列->原始字符序列

所以答案是：是的，没关系。

# flash-builder - How do I do a project wide find/replace in Flash Builder 4.6?

> ID：12739659
> 
> 赞同：5
> 
> 时间：2012-10-05T04:49:52.380
> 
> 标签：flash-builder, replace

I am trying to do a project wide find and replace in Flash Builder 4.6 but it is not obvious to me how this can be done.

I have tried Edit->Find/Replace then Replace All but it only replaces matches in the file that is currently open.

There is a Replace option in Search->Search but I'm not sure how to use this if it is what I am looking for.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T05:35:34.953

搜索 -> 搜索是正确的地方。在上部文本输入中输入搜索词，然后在底部选择您的工作集。您可以显式选择类或包或整个项目。底部的替换按钮可让您在搜索完成后指定替换词。

真的很简单，试试吧。;)

# javascript - jquery redirect issues

> ID：12739660
> 
> 赞同：1
> 
> 时间：2012-10-05T04:49:55.033
> 
> 标签：javascript, jquery

I am having problems in redirecting page with jquery. I have a variable `url` which contains `localhost/abc#123`. When i write `document.location.href = url;`, the page redirects to `localhost/abc` leaving `#123`. How to resolve this issue

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:57:02.170

```
var url = "http://bing.com/refresh/test.html#123";

document.location.href=url 
```

它在我的 Firefox 中对我来说很好。您是否尝试过调试您身边发生的事情。我已经在 IE8 + firefox + chrome 中测试了这段代码。我希望它对你有用。

如果此代码对您不起作用，请尝试

```
window.location.replace(url) 
```

作为您的评论，您似乎使用过 Anchor，所以尝试了这个。

```
$("#myanchor").click(function(e){
e.preventDefault();

// redirect code here
}); 
```

# visual-studio - Debugging private NuGet packages?

> ID：12739662
> 
> 赞同：40
> 
> 时间：2012-10-05T04:50:12.007
> 
> 标签：visual-studio, debugging, nuget

I've published some private/internal libraries as NuGet packages, using the symbols option. The packages and symbols are hosted on an internal network share. How can I step into these packages when debugging?

When I step to code from these packages, Visual Studio displays a "No Source Available" / "No Symbols Found" page. Clicking the "Load Symbols" only allows pdb files, not symbol packages.

These packages are not suitable for publishing on NuGet Gallery/SymbolSource.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T09:34:56.647

您用来生成带有符号的包的命令是什么？我试图做同样的事情`nuget.exe pack -Prop Configuration=Release Framework.csproj -Symbols`这会创建两个文件：**Framework.nupkg**和**Framework.symbols.nupkg**。我将这些文件放在网络共享上，从另一个项目中使用它们并且调试工作正常。

您是否尝试将 *.nupkg 和 *.symbols.nupkg 文件放在本地磁盘而不是网络共享上？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-19T02:22:17.653

有几个选择；一种是[设置和配置您自己的符号服务器](http://support.microsoft.com/kb/311503)。

您还可以下载 Inedo 的[ProGet](http://inedo.com/proget)，在目标源上启用符号服务，然后将您的包发布到 ProGet。所有这些都可以通过 ProGet 的免费版来完成。

* * *

*免责声明——我的日常工作是在[Inedo](http://inedo.com/)*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-13T22:15:40.437

现在还有一个名为 GitLink ( [https://github.com/GitTools/GitLink](https://github.com/GitTools/GitLink) ) 的工具，它可以将链接插入到源代码的版本化 GIT 文件的符号文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T12:06:22.287

您可以使用这些网络共享在内部设置自己的符号源服务器。您可以在我的博客上找到[分步教程。](http://www.xavierdecoster.com/setting-up-your-own-symbolsource-server-step-by-step)

它基本上归结为创建一个空的 MVC 应用程序并运行

> 安装包 SymbolSource.Server.Basic

从那里开始，您需要设置托管基础结构并配置 Visual Studio 和构建代理。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-13T08:11:20.553

我们这样做（和工作）的方式：

1.  生成“*.symbols.nupkg”
2.  将符号包部署到 SymbolSource 服务器（私有）
3.  配置 IDE
4.  使用 NuGet（来自我们的 SymbolSource 服务器）将所需的库添加到项目中
5.  调试！

可能有用的链接：

1.  *   [SymbolSource 服务器安装](http://www.xavierdecoster.com/setting-up-your-own-symbolsource-server-step-by-step)

    *   重要提示：如果“Windows 调试工具”检测到系统中的 Visual C++ Redist 版本比它需要/预期的更新，则不会安装

2.  *   使用 SymbolSource 进行调试的[Vs 配置](http://www.symbolsource.org/Public/Home/VisualStudio)

    *   要添加的 URL 就像`http://your.symbolsource-server.com:[port]/[appContext]/WinDbg/pdb`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-02T13:44:57.457

我发现它根本不起作用。NuGet 包引用已关闭，无法在调试器中使用。我所做的是从项目中删除程序集引用，而是直接通过路径添加对 DLL 的调试版本的引用。

然后为了使调试器在该代码中的某个位置停止，我在该代码中插入了调用`System.Diagnostics.Debugger.Break();`。运行时，调试器将在该行停止，这基本上是代码定义的断点。这将打开正确的源文件并自动跳转到该行。

在第二个 VS 实例中打开库项目，并根据需要移动`Break`调用并重建库。完成后，从库代码中删除这些调用并恢复原始引用（可能需要重新安装 NuGet 包）。

# php - 异步运行 PHP

> ID：12739667
> 
> 赞同：-1
> 
> 时间：2012-10-05T04:50:55.130
> 
> 标签：php, asynchronous

给定 PHP 中的一个输入和一个按钮，我需要在输入中输入一个时间量，然后按下按钮，它应该在该时间量之后执行一个 PHP 函数。

我该怎么做呢？

编辑：

**我不需要客户端解决方案。这是服务器端的问题。**

当用户离开页面时，JavaScript 的超时终止。用户离开页面后，我需要该超时仍然存在。

我没有尝试任何东西，我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:23:37.637

由于几乎所有时间都在处理数据库中的数据，因此[在 mysql 中创建事件](http://www.sitepoint.com/how-to-create-mysql-events/)可能是一种选择。此外，如果你设法全部用 mysql 代码编写，它会比从 php 到 mysql 来回来回更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:22:09.617

我最近也有类似的需求。不确定这是否适合您。让我知道它是否有效。

```
if (isset($_GET['async'])) {

    for( $i = 0 ; $i < 10 ; $i++ )
    {
        append_log(date('l jS \of F Y h:i:s A') . ': background process.<br />');
        sleep(1);
    }

    exit;
}

header( 'Content-type: text/html; charset=utf-8' );
pseudo_async(array('async' => true));   // this runs this php script in the backbround

echo 'Begin ...<br />';
for( $i = 0 ; $i < 10 ; $i++ )
{
    output_buffer('appended to the log <br />');
    append_log(date('l jS \of F Y h:i:s A') . ': main process.<br />');
    sleep(1);
}
echo 'End ...<br />';

function pseudo_async($query) {

    $timeout = array('http' => array('timeout' => 0.01));
    $context = stream_context_create($timeout);

    @file_get_contents(selfurl() . '?' . http_build_query($query), false, $context);
}

function append_log($msg) {
    $file = __DIR__ . '/log.html';
    file_put_contents($file, $msg, FILE_APPEND);
}

function selfurl() {
    $pageURL = (@$_SERVER["HTTPS"] == "on") ? "https://" : "http://";
    if ($_SERVER["SERVER_PORT"] != "80")
        $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    else 
        $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    return $pageURL;
}

function output_buffer($str) {
    echo $str;
    flush();
    ob_flush(); 
} 
```

# ruby - Rails- form_for 字段名称中的索引

> ID：12739668
> 
> 赞同：0
> 
> 时间：2012-10-05T04:51:02.637
> 
> 标签：ruby, ruby-on-rails-3, forms, form-for

我有一个我正在尝试构建的表单来编辑多个记录。它很复杂，不直接映射到数据库，并且可以有任意数量的记录。我编写了代码，因此所有数据都作为散列传递给视图。像这样：

```
 @formdata = {"datafield_1"=>"value_1", "datafield_2"=>"value_2"} 
```

我想做的是创建类似的东西：

```
 f.textfield :datafield_1
 f.textfield :datafield_2
 f.textfield :datafield_3
 etc. etc. etc. 
```

但我不知道如何将我的 for 循环的索引传递给变量名。简而言之，我该怎么做 :datafield_i 我的索引在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:53:18.437

```
<% %w(1 2 3).each do |i| %>
  <%= f.textfield(:"datafield_#{i}") -%>
<% end %> 
```

或者

```
<% @formdata.keys.each do |datafield| %>
  <%= f.textfield(datafield.to_sym) -%>
<% end %> 
```

# javascript - 带有javascript的asp中的动态文本框

> ID：12739670
> 
> 赞同：2
> 
> 时间：2012-10-05T04:51:13.773
> 
> 标签：javascript, asp.net

我正在尝试在单击按钮时在表格中创建文本框。我在按钮单击中编写了 javascript 代码，它可以工作。我的问题是在添加下一行文本框时清除了上一行文本框中输入的数据。给出了代码和屏幕截图。请帮助解决这个问题。

```
function addRow(tableID) {
   var table = document.getElementById(tableID);
   var count = table.rows.length - 1;
   table.innerHTML += "<tr> <td>"+count+"</td> <td><input type='text' id='date" + count + "' size='20'></td> <td><input type='text' id='from" + count + "' size='20'></td> <td><input type='text' id='to" + count + "' size='20'></td> <td><input type='text' id='mode" + count + "' size='20'></td> </tr>";
} 
```

![](../Images/fd2f72555c9c202ab4b5e55398264f21.png)

单击添加按钮时，我会丢失与 Sl.no1 相关的数据]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T04:58:32.467

`innerHTML`不是您的方案的方式。你真的应该使用 Javascript 提供的`insertRow`和`insertCell`方法。它是否更清洁，可维护且更易于阅读。`innerHTML`覆盖元素的内容，这是你的问题。如果您使用`.innerHTML += "something"`它，那么它可能会起作用，但是您不能每次`addRow`调用时都构造您的表格 - 您只需通过 HTML 附加一个新行。

[https://developer.mozilla.org/en-US/docs/DOM/table.insertRow](https://developer.mozilla.org/en-US/docs/DOM/table.insertRow)

[https://developer.mozilla.org/en-US/docs/DOM/tableRow.insertCell](https://developer.mozilla.org/en-US/docs/DOM/tableRow.insertCell)

这样，您不必每次`addRow`调用函数时都完全构建表。您可以使用`insertRow`并附加一个新的，里面有一个文本框。您之前的行根本不会被覆盖、重新创建或弄乱（只要您做对了）。尽管链接中有示例，但我会在几分钟后发布一个包含您的代码的示例。

更新：

[http://jsfiddle.net/MJ2md/](http://jsfiddle.net/MJ2md/)

为了证明我的意思。它可能不是最干净的，我只是想快点写出来！

# c++ - 随着用户需求的增加创建对象数组？

> ID：12739671
> 
> 赞同：0
> 
> 时间：2012-10-05T04:51:14.500
> 
> 标签：c++, arrays, visual-c++, c++11

我想知道是否可以根据用户需要创建数组。例如

1.  我问用户“你想要咖啡吗” 2.如果用户说是，我创建一个咖啡对象数组。......
2.  我问用户“你想再喝一杯咖啡吗”？
3.  如果用户说是，那么我创建另一个咖啡类数组，如果不是，我不创建。

这是可以实现的还是我必须创建固定数量的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:56:08.837

您不能在 C++ 中在运行时创建固定大小的数组，除非某些编译器（如 g++）为[VLA](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)提供扩展。

改为使用[`std::vector`](http://www.cplusplus.com/reference/stl/vector/)。它会根据您的控制增长，并在完成要求时自动释放。

**编辑**：由于`std::vector`提问者不能使用，以下是使用`new[]`“一些”伪代码的方式：

```
Coffee **pQuestions = new Coffee* [n]; // n - number of times coffee is asked
for(uint i = 0; i < N; ++i)
{
  /* ask for Coffee */
  if(/* yes */)
    pQuestion[i] = new Coffee[size]; // whatever array size you want
} 
```

^(`n`根据您的需要，这里`size`是变量（可以是常数也可以不是常数）)

稍后当你完成后，将所有内存释放为`delete[] pQuestions[i];`和`delete[] pQuestions;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:56:20.487

您可以使用标准容器类，例如[std::vector](http://www.cplusplus.com/reference/stl/vector/)，它为您提供一些任意但给定类型的可调整大小的向量。当然，你可以有向量的向量，或者队列的向量等。

^(（您可以使用手动分配的指针和代码 à la C，但您最好使用 STL 提供的强大容器）。)

# android - 表格布局将文本视图添加到表格行

> ID：12739674
> 
> 赞同：0
> 
> 时间：2012-10-05T04:51:44.513
> 
> 标签：android, android-layout

这是我的带有表格布局的 .xml ......

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:stretchColumns="*"

android:background="@drawable/s21" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip" >

    <EditText
        android:id="@+id/editText1"
        android:layout_span="2"
        android:text="Column 1 &amp; 2" />
</TableRow>

<TableRow 
    android:id="@+id/tableRow2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="140dip"
        android:layout_height="140dip"
        android:src="@drawable/bb"
         />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="140dp"
        android:layout_height="140dp"
        android:src="@drawable/bb" />

</TableRow>

<TableRow 
    android:id="@+id/tableRow3"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip" >

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="140dip"
        android:layout_height="140dip"
        android:src="@drawable/bb" />
    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="140dp"
        android:layout_height="140dp"
        android:src="@drawable/bb" />

</TableRow> 
```

它看起来像带有 4 个方形图像视图的布局......我想在每个方形图像视图上添加“名称”......我怎样才能在 xml 中或以编程方式......？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:32:13.900

将您的每个 ImageView 放入 LinearLayout 并将 TextView 添加到这样的线性布局中

```
 <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="140dip"
    android:layout_height="140dip"
    android:src="@drawable/bb"
     />
<TextView 
    android:text="Image desc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"/>
</LinearLayout> 
```

你完整的 xml 文件将是这样的

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:stretchColumns="*">

<TableRow
android:id="@+id/tableRow1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dip" >

<EditText
    android:id="@+id/editText1"
    android:layout_span="2"
    android:text="Column 1 &amp; 2" />
</TableRow>

<TableRow 
android:id="@+id/tableRow2"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dip" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="140dip"
    android:layout_height="140dip"
    android:src="@drawable/bb"
     />
<TextView 
    android:text="kiran"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"/>
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="140dip"
    android:layout_height="140dip"
    android:src="@drawable/bb"
     />
<TextView 
    android:text="kiran"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"/>
 </LinearLayout>

</TableRow>

<TableRow 
android:id="@+id/tableRow3"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dip" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView3"
    android:layout_width="140dip"
    android:layout_height="140dip"
    android:src="@drawable/bb"
     />
<TextView 
    android:text="kiran"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"/>
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
<ImageView
    android:id="@+id/imageView4"
    android:layout_width="140dip"
    android:layout_height="140dip"
    android:src="@drawable/bb"
     />
<TextView 
    android:text="kiran"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"/>
</LinearLayout>

</TableRow>
</TableLayout> 
```

# linux - Perforce 无法检索数据

> ID：12739678
> 
> 赞同：0
> 
> 时间：2012-10-05T04:51:53.050
> 
> 标签：linux

> [build@RHEL6 ~]$ /usr/bin/p4 -p perforce.ges.example.com:1666 工作区

**OUTPUT** *用户构建不存在。*

> [build@RHEL6 ~]$ /usr/bin/p4 -p perforce.ges.example.com:1666 个工作区

**OUTPUT** *用户构建不存在。*

perforce 服务器是可 ping 的，以下是我的 perforce 服务器详细信息：

> [build@RHEL6 ~]$ /usr/bin/p4 -p perforce.ges.example.com:1666 信息

用户名：build
客户端名称：RHEL6
客户端主机：RHEL6.3-64-BuildMac
客户端未知。
当前目录：/home/build
为什么我无法从我的 RHEL 6.3 机器运行 perforce 命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:06:30.643

我怀疑该用户`build`（您在 Linux 中登录）尚未在 perforce 服务器上创建。perforce服务器用户数据库和Linux用户数据库是独立的；您可能需要询问您的 perforce 管理员您应该使用哪个 perforce 用户。然后，您可以使用该`-u username`标志来指定正确的 perforce 用户，而不是使用从 Linux 用户名派生的默认用户名。

# iphone - 更改具有透明背景的灰度图像的亮度

> ID：12739679
> 
> 赞同：0
> 
> 时间：2012-10-05T04:51:54.540
> 
> 标签：iphone, objective-c, ios4

我使用一个函数来改变图片的亮度（不使用openGL），效果很好。

我使用另一个函数将我的图像转换为灰度，这也很有效。

但是当我组合它们时，当我在灰度图像上应用我的亮度函数时，我在图像上得到了一些条纹，当背景是透明的（alpha 0）时，它被黑色背景取代。你有什么想法吗？

请在下面找到我的灰度函数和亮度函数：

```
// ## Brightness without OpenGL call
+(UIImage *) changeImageBrightness:(UIImage *)aInputImage withFactor:(float)aFactor
{
    CGImageRef img=aInputImage.CGImage;
    CFDataRef dataref = CGDataProviderCopyData(
                  CGImageGetDataProvider(aInputImage.CGImage));

    int length=CFDataGetLength(dataref);
    UInt8 *data=(UInt8 *)CFDataGetBytePtr(dataref);

    // Perform operation on pixels
    for(int index=0;index<length;index+=4) {
        // Go For BRIGHTNESS
        for(int i=0;i<3;i++) {
            if(data[index+i]+aFactor<0) {
                data[index+i]=0;
            } else {
                if(data[index+i]+aFactor>255) {
                    data[index+i]=255;
                } else {
                    data[index+i]+=aFactor;
                }
            }
        }
    }

    // .. Take image attributes
    size_t width=CGImageGetWidth(img);
    size_t height=CGImageGetHeight(img);
    size_t bitsPerComponent=CGImageGetBitsPerComponent(img);
    size_t bitsPerPixel=CGImageGetBitsPerPixel(img);
    size_t bytesPerRow=CGImageGetBytesPerRow(img);

    // .. Do the pixel manupulation
    CGColorSpaceRef colorspace=CGImageGetColorSpace(img);
    CGBitmapInfo bitmapInfo=CGImageGetBitmapInfo(img);
    CFDataRef newData=CFDataCreate(NULL,data,length);
    CGDataProviderRef provider=CGDataProviderCreateWithCFData(newData);

    // .. Get the Image out of this raw data
    CGImageRef newImg = CGImageCreate(width, height, bitsPerComponent,
                bitsPerPixel, bytesPerRow, colorspace, bitmapInfo, provider,
                                      NULL, true, kCGRenderingIntentDefault);

    // .. Prepare the image from raw data
    UIImage* rawImage = [[UIImage alloc] initWithCGImage:newImg];

    // .. done with all,so release the references
    CFRelease(newData);
    CGImageRelease(newImg);
    CGDataProviderRelease(provider);
    CFRelease(dataref);
   // return rawImage.CGImage;
    UIImage *imageApresFiltreEtRotationCGI = [UIImage
                        imageWithCGImage:rawImage.CGImage];
    return imageApresFiltreEtRotationCGI;
}

+ (UIImage *)convertImageToGrayScale:(UIImage *)image
{
    // Create image rectangle with current image width/height
    CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);
    // Grayscale color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    // Create bitmap content with current image size and grayscale colorspace
    CGContextRef context = CGBitmapContextCreate(nil, image.size.width,
                 image.size.height, 8, 0, colorSpace, kCGImageAlphaNone);
    // Draw image into current context, with specified rectangle
    // using previously defined context (with grayscale colorspace)
    CGContextDrawImage(context, imageRect, [image CGImage]);
    /* changes start here */
    // Create bitmap image info from pixel data in current context
    CGImageRef grayImage = CGBitmapContextCreateImage(context);
    // release the colorspace and graphics context
    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);
    // make a new alpha-only graphics context
    context = CGBitmapContextCreate(nil, image.size.width,
                 image.size.height, 8, 0, nil, kCGImageAlphaOnly);
    // draw image into context with no colorspace
    CGContextDrawImage(context, imageRect, [image CGImage]);
    // create alpha bitmap mask from current context
    CGImageRef mask = CGBitmapContextCreateImage(context);
    // release graphics context
    CGContextRelease(context);
    // make UIImage from grayscale image with alpha mask
    UIImage *grayScaleImage = [UIImage imageWithCGImage:
             CGImageCreateWithMask(grayImage, mask) scale:image.scale
                                       orientation:image.imageOrientation];
    // release the CG images
    CGImageRelease(grayImage);
    CGImageRelease(mask);
    // return the new grayscale image
    return grayScaleImage;
    /* changes end here */
} 
```

这是我得到的图片。

![http://ch4v.atopiq.net/background-php/IMG_0143.JPG](../Images/79290da33ad0e9a9c71a1d287b772832.png)

在我进行灰度/比例和光线转换之前，婴儿背后的背景是透明的。

# java - 在 Windows 中从命令行运行 java 的问题

> ID：12739683
> 
> 赞同：1
> 
> 时间：2012-10-05T04:52:03.850
> 
> 标签：java, windows-7, command-line

我正在尝试使用命令行编译和运行 java 文件，但它不起作用。我已经按照[http://introcs.cs.princeton.edu/java/15inout/windows-cmd.html](http://introcs.cs.princeton.edu/java/15inout/windows-cmd.html)上的步骤，使用正确的文件路径和当前的 jdk，我仍然`javac is not recognized`在键入时得到`javac -version`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:53:20.593

您需要将`javac`存在的文件夹添加到您的 PATH 中。它可能与给定链接中指定的路径不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:58:04.593

请按照此[链接](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)在 windows中设置`PATH`和`CLASSPATH`用于 java

# iphone - ios 6：问题 - 不推荐使用两阶段旋转动画。此应用程序应使用更流畅的单阶段动画

> ID：12739684
> 
> 赞同：2
> 
> 时间：2012-10-05T04:52:07.193
> 
> 标签：iphone, ios

开始运行应用程序时出现错误，之后应用程序无法触摸或响应

```
Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation. 
```

我的 iPhone 应用程序仅支持纵向模式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T05:07:34.410

我们遇到了这个问题，并通过将窗口的 rootViewController 的分配移动到将视图控制器添加到 tabBarController 来修复它。不确定为什么会生成该特定错误或是否适合您的代码。

# web-services - drupal服务模块

> ID：12739686
> 
> 赞同：0
> 
> 时间：2012-10-05T04:52:17.397
> 
> 标签：web-services, drupal

我在那里的评论服务中使用服务模块 drupal 6。它包含 count all 方法，用于计算特定节点的评论数。然后如何传递该方法的 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:30:53.677

在 post 方法中使用此 URL

端点/your_module_name/name_of_method/

并在海报 nid = your_node_id 中传递参数

然后点击发布方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:44:18.613

在 post 方法中使用此 URL

端点/评论/countAll/

传递参数 nid=0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:47:17.723

使用海报，这是 Firefox 的附加组件，在海报中使用 url

端点/your_module_name/name_of_method/

并在海报 nid = your_node_id 中传递参数，如 (22)

然后点击发布方法

# windows-phone-7 - 将字符串列表（xml 或 json）从 windowsphone 发送到 mvc4 webapi

> ID：12739687
> 
> 赞同：0
> 
> 时间：2012-10-05T04:52:36.210
> 
> 标签：windows-phone-7, asp.net-mvc-4, asp.net-web-api

我是 windows-phone 以及 mvc4 Web-API 的新手。我正在尝试从 windows-phone 发送详细信息，并希望在 mvc4 web-API 中获取这些详细信息作为查询字符串。我现在有数据列表，但我不知道如何在 Web-API 中发送和接收它需要建议或示例链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:05:12.157

您可以从查看此[Contact Manager Web API 示例](http://code.msdn.microsoft.com/wpapps/Contact-Manager-Web-API-0e8e373d.)开始。

> 我正在尝试从 windows-phone 发送详细信息，并希望在 mvc4 web-API 中获取这些详细信息作为查询字符串

**解决方案 #1：**
通过从查询字符串传递字符串列表，您需要将操作参数标记为 [FromUri] ...

```
public class ValuesController : ApiController
{
    // POST api/values
    public void Post([FromUri] List<string> arrOfString)
    {
    }
} 
```

...并且查询字符串需要采用 arrOfString[]=item1&arrayOfString[]=item2&...&arrayOfString[]=itemN 的形式。以下是您的 Windows Phone 的外观示例：

```
 WebClient client = new WebClient();
        client.UploadStringCompleted += new UploadStringCompletedEventHandler(...);
        client.UploadStringAsync(new Uri("http://localhost/api/values?arrOfString[]=a&arrayOfString[]=b&arrayOfString[]=c"), string.Empty); 
```

**解决方案#2：**
或者，您可以没有硬性要求在查询字符串中传递数据，在请求正文中传递字符串列表更简单：

Web API 服务器：

```
public class ValuesController : ApiController
{
    // POST api/values
    public void Post(List<string> arrOfString)
    {
    }
} 
```

Windows 电话客户端：

```
 WebClient client = new WebClient();
        client.Headers["Content-Type"] = "application/json";

        var data = JsonConvert.SerializeObject(new List<string>() { "a", "b", "c" });

        client.UploadStringCompleted += new UploadStringCompletedEventHandler(...);
        client.UploadStringAsync(new Uri("http://localhost/api/values"), "POST", data); 
```

# iphone - ios - 创建函数

> ID：12739690
> 
> 赞同：0
> 
> 时间：2012-10-05T04:53:00.827
> 
> 标签：iphone, objective-c, ios, function

我知道函数是什么，但我正在尝试在我的项目中编写一些函数。我刚刚从 Lynda.com 观看了一个关于 Objective-C 的视频系列，我从那里得到了这个想法。

在视频中解释说我可以编写这样的函数：

```
void declareWebView () 
```

但是，如果我将它这样写到我的代码中，则会出现错误并说我的 _webView 和 self（作为 self.view）不可用。

如果我这样写：

```
-(void) declareWebView 
```

那我就没有问题了。

关于如何正确处理第一个的任何想法？据我所知，我无法用第二种写法设置任何参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:58:26.007

第一个是你所说的函​​数。它是Objective-C的C部分的一部分，与对象或类无关，因此对象的变量`self`或任何实例变量没有任何意义。您可以像这样传递它是对象的变量：

```
void my_func(NSString *string, id someObject, int someInt);

void my_func(NSString *string, id someObject, int someInt)
{
    NSLog(@"string = %@, someObject = %@, someInt = %d",string,someObject,someInt);
} 
```

第二个是方法，在方法中可以访问自身，在实例方法中，可以访问实例变量。用“+”替换方法前面的“-”使其成为类方法。在类方法中，您不能访问实例变量`self`，而是引用类本身，而不是实例。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:56:49.880

第一种方式是用 C 语言编写的。第二种方式是用 Objective-C 编写的。Objective-C 方法必须以第二种方式声明。您不能直接从 C 函数中访问对象的私有成员和属性，但可以在 Objective-C 对象上使用访问器方法并从 C 函数中调用它们。

# c - int 变量的大小

> ID：12739693
> 
> 赞同：3
> 
> 时间：2012-10-05T04:53:16.040
> 
> 标签：c, int, 32bit-64bit, processor

int 的大小是如何决定的？

int 的大小是否真的取决于处理器。对于 32 位机器，它将是 32 位，对于 16 位，它是 16。

在我的机器上它显示为 32 位，尽管该机器安装了 64 位处理器和 64 位 Ubuntu。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T04:56:07.487

这取决于实施。C标准唯一保证的是

```
sizeof(char) == 1 
```

和

```
sizeof(char) <= sizeof(short) <= sizeof(int) <= sizeof(long) <= sizeof(long long) 
```

以及类型的一些可表示的最小值，这意味着`char`至少 8 位长，`int`至少 16 位等。

所以它必须由实现（编译器，操作系统，......）决定并记录在案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:55:18.790

这取决于编译器。

例如：尝试使用旧的 turbo C 编译器，它会为 int 提供 16 位的大小，因为在编写编译器时字长（处理器可以轻松解决的大小）为 16。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:31:26.120

整数的大小基本上取决于`architecture`您的系统。一般来说，如果你有一`16-bit`台机器，那么你的`compiler`意志必须支持 int`size 2 byte.` 如果你的系统是 32 位的，那么编译器必须支持 4 字节的整数。

更详细地说，

*   `data bus`是的，16 位，32 位的概念`size of data bus`在您的系统中只意味着什么。
*   数据总线大小是确定整数大小所必需的，因为，数据总线的目的是向处理器提供数据。它可以在单次取指时向处理器提供的最大值很重要，这个最大大小是首选编译器在时间给出一个数据。
*   根据您系统的数据总线大小，编译器旨在提供数据总线的最大大小作为整数大小。

> ```
> x06->16-bit->DOS->turbo c->size of int->2 byte
> x306->32-bit>windows/Linux->GCC->size of int->4 byte 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:09:48.373

它取决于主编译器。如果您使用 turbo c 表示整数大小为 2 个字节。否则，您使用的是 GNU gccompiler 意味着整数大小为 4 个字节。它仅取决于 C 编译器中的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-21T21:39:33.577

尽可能`int`宽不是最好的选择。（选择由[ABI](https://en.wikipedia.org/wiki/Application_binary_interface)设计人员做出。）

像 x86-64 这样的 64 位架构可以`int64_t`在`long`. （Microsoft`long`在其 x86-64 ABI 中保留 32 位，出于各种可移植性原因，考虑到现有的代码库和 API，这很有意义。这基本上是无关紧要的，因为应该使用真正关心类型大小的可移植代码，而`int32_t`不是`int64_t`对. )`int``long`

在许多情况下，拥有实际上可以生成更好、更高效的代码`int`。每个元素仅使用 4B 的数组`int32_t`只有. 此外，特定于 x86-64，32 位操作数大小是默认值，因此 64 位指令需要一个额外的代码字节作为 REX 前缀。因此，32 位（或 8 位）整数的代码密度比 16 位或 64 位的要好。（有关文档/指南/学习资源的链接，请参阅[x86](/questions/tagged/x86 "显示标记为“x86”的问题") wiki。）`int``int64_t`

如果程序需要 64 位整数类型才能正确操作，则不会使用`int`. （将指针存储在 an`int`而不是 an`intptr_t`是一个错误，我们不应该让 ABI 变得更糟以适应这样的损坏代码。）编写程序的程序员`int`可能期望使用 32 位类型，因为大多数平台都是这样工作的。（标准当然只保证16bits）。

**由于一般不期望`int`64 位（例如在 32 位平台上），并且将其设为 64 位会使某些程序变慢（几乎没有程序更快），`int`因此在大多数 64 位 ABI 中是 32 位。**

此外，需要有一个 32 位整数类型的名称，for`int32_t`是一个`typedef`for。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-07T06:16:49.977

是的。 `int`大小取决于编译器大小。对于 16 位整数，整数范围在 -32768 到 32767 之间。对于 32 位和 64 位编译器，它会增加。

# javascript - 单击gridview中的超链接字段时没有地址和菜单栏的弹出窗口

> ID：12739699
> 
> 赞同：0
> 
> 时间：2012-10-05T04:54:13.807
> 
> 标签：javascript, asp.net

我正在 c# dot net 中开发一个屏幕，其中我有一个搜索屏幕，其中包含一个包含一些查询字符串值的超链接字段，在超链接字段的单击上，我必须打开一个工作正常的弹出窗口，但我不想要地址栏或菜单要在弹出窗口中显示的项目的大小也应该是特定的，谁能告诉我如何实现它。

我正在使用下面的代码，但是它只是改变窗口的大小而不是隐藏菜单等，而且第一个弹出窗口以全尺寸加载，然后更改为我指定的大小。

```
<asp:HyperLinkField DataNavigateUrlFields="FileName" DataTextField="FileName"
Target="_blank" DataNavigateUrlFormatString="javascript:var NewWin=window.open
('abc.aspx?EMPId={0}',null,'width=800,height=200,top=100,left=100,scrollbars=no,
directories=no,status=no,toolbar=no,resizable=no');"HeaderText="EMPId">

</asp:HyperLinkField> 
```

另外，我可以使用一个链接按钮，这个弹出窗口工作正常，但是我需要在网格的行数据绑定中添加查询字符串到 URL，单击我的链接按钮和弹出窗口会打开，但是我不能这样做所以通过使用下面的代码。

```
protected void grdDisplayResult_RowDataBound(object sender, GridViewRowEventArgs e)
{

if (e.Row.RowType == DataControlRowType.DataRow)
{
HyperLink hyperlink = (HyperLink)e.Row.Cells[2].Controls[0];
Label lblRowNumber = ((Label)e.Row.FindControl("lblRowNum"));
hyperlink.NavigateUrl += "&RowNum=" + lblRowNumber.Text;
}
} 
```

如果我为其中任何一个找到解决方案，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:35:16.723

我想也许你可以使用链接按钮而不是超链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:38:29.073

尝试使用`HTMLAnchor`而不是`asp:Hyperlink`

**网格：**

```
 <asp:TemplateField HeaderText="Options">
   <ItemTemplate>
       <a href="javascript:void(0);" id="aFooLink" runat="server">
        ClickMeDamnit</a>
   </ItemTemplate>
 </asp:TemplateField> 
```

**代码隐藏：**

```
protected void grdDisplayResult_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        HyperLink aFooLink = (HyperLink)e.Row.Cells[2].Controls[0];
        aFooLink.Attributes.Add("onclick", "window.open('abc.aspx?EMPId=0','window','toolbar=no, menubar=no, resizable=yes,location=no,center:no;height=200px,width=300px,Top=1500,left=1500;statusbar:no;');");            
    }
} 
```

希望对你有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T06:46:19.860

您可以通过调用 javascript 函数并向其传递参数来实现此目的。您可以使用 gridview 事件找到您的控制服务器端`RowDataBound`并附加客户端事件以打开弹出窗口。`Eval`在那里，您可以使用& 打开带有所需查询字符串值的弹出窗口将参数传递给您的函数。像这样的东西在aspx上

```
 <script language="text/javascript">
     function OpenPopup(id,name)
     {
          window.open('myWindow.aspx?id='+id+'&name='+name,'_blank',width=800,height=200,top=100,left=100,scrollbars=no,menubar=no,directories=no,status=no,toolbar=no,resizable=no,url=no');
     }
     </script> 
```

在gridview的服务器端内部`RowDataBound`事件

```
if (e.Row.RowType == DataControlRowType.DataRow)
        { 
          LinkButton myLinkBtn= (LinkButton)e.Row.FindControl("yourControlid");
          if(myLinkBtn !=null)
          {
              myLinkBtn.Attributes.add('onclick','javascript:OpenPopup('"+ Eval(e.row.DataItem,"yourDbField1")+ "','"+ Eval(e.row.DataItem,"yourDbField2")+ "');return false;");
          }
        } 
```

# iphone - 在我的 App 内的 App Store 中打开我的应用列表

> ID：12739703
> 
> 赞同：11
> 
> 时间：2012-10-05T04:54:34.633
> 
> 标签：iphone, objective-c, ios, app-store

我已经检查了 Apple 网站上的（热门付费应用程序）示例代码，您可以在其中查看 App Store 中的所有热门应用程序，我想在我的应用程序中执行相同的操作，但仅在 App Store 中显示我的应用程序。这是我在该示例中找到的 URL：

> [http://phobos.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/toppaidapplications/limit=75/xml](http://phobos.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/toppaidapplications/limit=75/xml)

我需要在此 URL 中更改什么以仅显示我的应用程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T19:49:07.630

这在 iOS 6 中引入非常简单`SKStoreProductViewController`。用户可以直接在应用程序中购买您的其他应用程序。

首先将 StoreKit.framework 添加到您的项目中。然后使用 iTunes 找到链接到您的应用程序的 iTunes URL。您可以从 iTunes Store 复制链接。例如，Apple 应用程序的 URL 是[http://itunes.apple.com/de/artist/apple/id284417353?mt=12](http://itunes.apple.com/de/artist/apple/id284417353?mt=12) 它包含您传递给`SKStoreProductViewController`.

示例代码：

```
#import "ViewController.h"
#import <StoreKit/SKStoreProductViewController.h>

@interface ViewController ()<SKStoreProductViewControllerDelegate>
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self showMyApps];
}

-(void)showMyApps
{
    SKStoreProductViewController* spvc = [[SKStoreProductViewController alloc] init];
    [spvc loadProductWithParameters:@{SKStoreProductParameterITunesItemIdentifier : @284417353}
                    completionBlock:nil];
    spvc.delegate = self;
    [self presentViewController:spvc animated:YES completion:nil];

}

-(void)productViewControllerDidFinish:(SKStoreProductViewController *)viewController
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T08:38:09.943

您可以使用[DAAppsViewController](https://github.com/danielamitay/DAAppsViewController)。它可以配置一个开发者 ID 以显示该开发者的所有应用程序。如果可用，它将使用 StoreKit，否则将回退到切换到 App Store。

# shell - Unix Shell 等效于 Java .hasNext()？

> ID：12739704
> 
> 赞同：1
> 
> 时间：2012-10-05T04:54:44.850
> 
> 标签：shell, unix

或者shell脚本中的任何东西来实现同样的事情？

我正在做一个任务，要求我们编写一个 Bourne shell 脚本来显示一堆的最后一个参数，例如：

**最后一个参数 arg1 arg2 arg3 ..... argN**

这将显示：

**精氨酸**

我不确定 Java 中的 hasNext 是否有任何等价物，因为它很容易实现。对不起，如果我粗鲁和不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:56:44.867

```
 #!/bin/bash
   all=($@)

   # to make things short:
   # you can use what's in a variable as a variable name
   last=$(( $# )) # get number of arguments
   echo ${!last} # use that to get the last argument. notice the !

   # while the number of arguments is not 0
   # put what is in argument $1 into next
   # move all arguments to the left
   # $1=foo $2=bar $4=moo
   # shift
   # $1=bar $2=moo
   while [ $# -ne 0 ]; do
       next=$1
       shift
       echo $next
   done

   # but the problem was the last argument...
   # all=($@): put all arguments into an array
   # ${all[n]}: get argument number n
   # $(( 1+2 )): do math
   # ${#all[@]}: get the count of element in an array

   echo -e "all:\t ${all[@]}"
   echo -e "second:\t ${all[1]}"
   echo -e "fifth:\t ${all[4]}"
   echo -e "# of elements:\t ${#all[@]}"
   echo -e "last element:\t ${all[ (( ${#all[@]} -1 )) ]}" 
```

好的，最后一次编辑（天哪：p）

```
$ sh unix-java-hasnext.sh  one two three seventyfour sixtyeight
sixtyeight
one
two
three
seventyfour
sixtyeight
all:     one two three seventyfour sixtyeight
second:  two
fifth:   sixtyeight
# of elements:   5
last element:    sixtyeight 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:03:25.880

基于 POSIX 的 shell 语言不实现迭代器。

您唯一拥有的东西是`for V in words ; do ... ; done`或使用`while`手动实现循环来更新和测试循环变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:05:33.507

这仍然不是胡乱猜测的地方：Bash 提供[移位](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_07.html)运算符、for 循环等。

（如果这是用于参数处理，则您有 getopt 库。[在 bash shell 脚本中使用 getopts 获取长短命令行选项中的](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options)更多信息）

# math - 在 GAS 中添加两个数字

> ID：12739708
> 
> 赞同：0
> 
> 时间：2012-10-05T04:54:50.670
> 
> 标签：math, assembly, type-conversion, gnu-assembler

我是 GAS 组件的新手，我的目标是显示用户输入的两个数字的总和。我使用 char 到数字的转换，反之亦然，结果总是错误的（非数字）。有人能告诉我哪里错了吗？提前致谢。

```
.section .data
prompt_str1:
    .ascii "Enter first number: "
str1_end:
    .set STR1_SIZE, str1_end-prompt_str1
prompt_str2:
    .ascii "Enter second number: "
str2_end:
    .set STR2_SIZE, str2_end-prompt_str2

.section .bss 
.lcomm      input1  2
.lcomm      input2  2
.lcomm      ans     1

.macro write str,str_size
    movl $4, %eax
    movl $1, %ebx
    movl \str, %ecx
    movl \str_size, %edx
    int $0x80
.endm

.macro writenum str
    movl $4, %eax
    movl $1, %ebx
    movl \str, %ecx
    int $0x80
.endm

.macro read buff, buff_size
    movl  $3, %eax
    movl  $0, %ebx
    movl  \buff, %ecx
    movl  \buff_size, %edx
    int   $0x80
.endm

.section .text
.globl _start

_start:
write $prompt_str1, $STR1_SIZE
read $input1, $2

write $prompt_str2, $STR2_SIZE
read $input2, $2

subl $0x30, input1
subl $0x30, input2
movl $input1, %eax
addl $input2, %eax
movl %eax, ans
addl $0x30, ans
writenum $ans

exit:
movl $1, %eax
movl $0, %ebx
int $0x80 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:26:27.023

 `````
movl $input1, %eax
addl $input2, %eax 
````  `您将 input1 的地址移动到 %eax 并添加 input2 的地址。输了`$`！

这段代码可能有更多错误。由于您只能处理单个数字（包括总和！），因此您可能应该在这里使用字节，而不是“长整数”，而只是转储`$`至少可以为您提供数字结果。

地址和“该地址的内容”之间的区别非常重要！不幸的是，每个汇编程序的做法都不一样……叹息……``

# javascript - 使用 Jquery / javascript 在客户端的简单 XSLT

> ID：12739713
> 
> 赞同：0
> 
> 时间：2012-10-05T04:56:02.043
> 
> 标签：javascript, jquery, xslt, jquery-plugins, google-ajax-api

我有这个：

```
<Item name="Alpha">
    <Field name="CreationDateTime">2012-04-26</Field>
    <Field name="Material" readOnly="X"> Congress </Field>
</Item>
<Item name="Beta">
    <Field name="CreationDateTime">2012-05-26</Field>
    <Field name="Material" readOnly="X"> Democracy </Field>
</Item>
   .
   .
   .
 and so on... 
```

我希望它以这种格式转换：

```
<Item name="Alpha">
   <CreationDateTime >2012-04-26</CreationDateTime>
   <Material readOnly="X"> Congress </Material>
</Item>
<Item name="Beta">
   <CreationDateTime >2012-05-26</CreationDateTime>
   <Material readOnly="X"> Democracy </Material>
</Item>
    .
    .
    .
and so on... 
```

我需要在客户端执行此操作（即在 javascript 和 jQuery 中）。我可以为此使用一个 jQuery 插件（例如 Google 的 AJAXSLT）。问题是 - 我以前从未做过 XSLT（而且也使用过 javascript！），并且不知道如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:15:15.097

> 问题是 - 我以前从未做过 XSLT（而且也使用过 javascript！），并且不知道如何去做。

XSLT 是一种用于将 XML 文档转换为其他（主要是 XML，但也包括 HTML、纯文本等）文档的语言。您需要的是一个可以工作的输入 XML，一个应该应用于输入以获取输出的转换，以及一个 XSLT 处理器来完成它。

XSLT 处理器可以是一个工具、一个库、一些由框架或操作系统提供的功能，或者在这种情况下（使用 JavaScript）是一个浏览器。

您已经有了 XML 输入，因此您需要一个处理器和一个转换。不幸的是，处理器是特定于浏览器的（例如，Mozilla的[XSLTProcessor ，IE 的](https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)[ActiveX](https://stackoverflow.com/questions/10657532/xml-xslt-in-javascript)等），您需要编写代码来测试您正在使用的特定浏览器（例如，可以[在本页的源代码中](http://markbucayan.appspot.com/xslt/index.html)看到它）。

不过幸运的是，您不必这样做，因为您提到的 Google AJAXSLT 之类的 javascript 库隐藏了下面的细节并公开了一个可以跨浏览器使用的统一 API。所以现在您只需要编写一个 XSL 文件来进行转换。

根据您的样本，如果输入是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
    <Item name="Alpha">
        <Field name="CreationDateTime">2012-04-26</Field>
        <Field name="Material" readOnly="X">Congress</Field>
    </Item>
    <Item name="Beta">
        <Field name="CreationDateTime">2012-05-26</Field>
        <Field name="Material" readOnly="X">Democracy</Field>
    </Item>
</Items> 
```

使用这样的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <Items>
            <xsl:apply-templates />
        </Items>
    </xsl:template>

    <xsl:template match="Item">
        <Item>
            <xsl:attribute name="name">
                <xsl:value-of select="@name" />
            </xsl:attribute>
            <xsl:apply-templates />
        </Item>
    </xsl:template>

    <xsl:template match="Field">
        <xsl:variable name="fieldName" select="@name" />
        <xsl:element name="{$fieldName}">
            <xsl:if test="@readOnly">
                <xsl:copy-of select="@readOnly" />
            </xsl:if>
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

你得到这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
    <Item name="Alpha">
        <CreationDateTime>2012-04-26</CreationDateTime>
        <Material readOnly="X">Congress</Material>
    </Item>
    <Item name="Beta">
        <CreationDateTime>2012-05-26</CreationDateTime>
        <Material readOnly="X">Democracy</Material>
    </Item>
</Items> 
```

希望这能让您更快地开始在 javascript 中执行 XSLT。

最后，请确保您专注于 XSLT 1.0，因为浏览器尚不支持 2.0。

# android - 如何在 Android 中通过 webView 下载文件

> ID：12739717
> 
> 赞同：3
> 
> 时间：2012-10-05T04:56:25.287
> 
> 标签：android

我想通过 android 中的 webView 下载文件。但无法理解如何做到这一点？webView 的代码如下。你能建议我在 webView 中下载文件该怎么做吗？

```
 wv = (WebView) findViewById(R.id.mainwebview);
        WebSettings ws = wv.getSettings();
     //   ws.setBuiltInZoomControls(true);
    //     wv.loadUrl("http://www.ebooksdownloadfree.com/");
        wv.getSettings().setJavaScriptEnabled(true);

        this.wv.getSettings().setSupportZoom(false);
        this.wv.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        this.wv.loadUrl("http://www.ziddu.com/download/20520057/MPTOH.pdf.html");
     wv.setDownloadListener(new DownloadListener() {
        public void onDownloadStart(String url, String userAgent,
                String contentDisposition, String mimetype,
                long contentLength) {
          Intent i = new Intent(Intent.ACTION_VIEW);
          i.setData(Uri.parse(url));
          startActivity(i);
        }
    }); 
```

运行此代码后，我收到以下错误，如图所示： ![在此处输入图像描述](../Images/47009cdc68bd3924091fabafde8487be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:58:08.070

我认为[这](https://stackoverflow.com/questions/4860484/download-a-file-from-webview-to-a-custom-folder)对你有帮助。用于在 android 的 webview 上下载文件。

**编辑 ：-**

试试下面的代码。

```
mWebView.setDownloadListener(new DownloadListener() {
    public void onDownloadStart(String url, String userAgent,
            String contentDisposition, String mimetype,
            long contentLength) {
      Intent i = new Intent(Intent.ACTION_VIEW);
      i.setData(Uri.parse(url));
      startActivity(i);
    }
}); 
```

# c# - 解析此过程输出的最佳方法是什么（Tshark putput）

> ID：12739724
> 
> 赞同：0
> 
> 时间：2012-10-05T04:57:06.357
> 
> 标签：c#

我的 Tshark 输出给了我 IP 表，我想按降序显示它们，这是我获得进程输出的代码：

```
 _process = new ProcessStartInfo(_tsharkPath);
    _process.Arguments = (string.Format("-r {1}{0}{1}  -q -z ip_hosts,tree ", _filePath, "\""));
    _process.WindowStyle = ProcessWindowStyle.Hidden;
    _process.UseShellExecute = false;
    _process.RedirectStandardOutput = true;
    _process.RedirectStandardError = true;
    _process.CreateNoWindow = true;
    _process.UseShellExecute = false;
    _process.ErrorDialog = false;
    Process tsharkProcess = Process.Start(_process);

    StreamReader reader = tsharkProcess.StandardOutput;
    tsharkProcess.WaitForExit(10000);
    List<string> list = new List<string>();
    SortedDictionary<string, string> table = new SortedDictionary<string, string>();

    while (!reader.EndOfStream)
    {
        string read = reader.ReadLine();
        list.Add(read);
    } 
```

我收到了我列表中的表格

这是我的表，我只想重视 IP 和 precent：

```
===================================================================
 IP Addresses                                 value             rate         percent
-------------------------------------------------------------------
 IP Addresses                                31584       0.322127
  159.0.89.20                                  6002       0.061215          19.00%
  192.168.0.100                               31288       0.319108          99.06%
  60.240.244.115                                 16       0.000163           0.05%
  204.83.232.29                                2698       0.027517           8.54%
  177.16.241.40                                2499       0.025487           7.91%
  90.231.37.56                                  848       0.008649           2.68%
  117.204.2.26                                  172       0.001754           0.54%
  69.247.52.146                                1909       0.019470           6.04%
  188.126.75.143                                 75       0.000765           0.24%
  173.212.107.113                                 8       0.000082           0.03%
  114.47.15.111                                  26       0.000265           0.08%
  219.192.199.2                                   2       0.000020           0.01%
  59.97.56.175                                  986       0.010056           3.12%
  50.53.9.249                                  2376       0.024233           7.52%
  76.18.194.203                                 123       0.001254           0.39%
  41.233.19.39                                  428       0.004365           1.36%
  203.84.186.210                                659       0.006721           2.09%
  58.40.202.85                                    2       0.000020           0.01%
  88.160.36.13                                    2       0.000020           0.01%
  117.199.195.22                                432       0.004406           1.37%
  112.202.141.240                               443       0.004518           1.40%
  46.240.116.228                                  7       0.000071           0.02%
  41.46.174.7                                  1259       0.012841           3.99%
  112.135.159.14                                  1       0.000010           0.00%
  201.215.244.25                                 66       0.000673           0.21%
  223.67.159.170                                  2       0.000020           0.01%
  67.204.32.252                                 626       0.006385           1.98%
  2001:0:9d38:6ab8:aa:a1a:b048:3f7d             286       0.002917           0.91%
  2001:0:9d38:953c:2481:166c:90bb:db19           50       0.000510           0.16%
  2607:5300:10:101::1:209                         8       0.000082           0.03%
  83.248.5.18                                     6       0.000061           0.02%
  98.221.248.250                                 80       0.000816           0.25%
  83.100.249.165                                 60       0.000612           0.19%
  89.254.132.166                                 14       0.000143           0.04%
  119.50.230.109                                 40       0.000408           0.13%
  190.193.144.107  

                          33       0.000337           0.10% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:45:59.290

`Regular Expressions`会让你在这里的生活更轻松。首先，定义要捕获的数据的基本结构：

```
private struct TSharkOutput
{
    public IPAddress ip;
    public uint value;
    public decimal rate;
    public decimal percent;
}; 
```

您可以根据需要添加/删除部分并更改数据类型。

接下来是处理这个问题的正则表达式。我将 IPAddress 匹配的首当其冲留给了内部类。

```
var regTshark = new Regex(@"^\s*(?<ip>[\d.:]+)\s+(?<val>\d+)\s+(?<rate>\d+\.\d+)\s+(?<perc>\d+\.\d+)%", RegexOptions.Compiled); 
```

现在对于您的解析功能，我会做这样的事情；

```
_process = new ProcessStartInfo(_tsharkPath);
_process.Arguments = (string.Format("-r {1}{0}{1}  -q -z ip_hosts,tree ", _filePath, "\""));
_process.WindowStyle = ProcessWindowStyle.Hidden;
_process.UseShellExecute = false;
_process.RedirectStandardOutput = true;
_process.RedirectStandardError = true;
_process.CreateNoWindow = true;
_process.UseShellExecute = false;
_process.ErrorDialog = false;

var tsharkProcess = Process.Start(_process);
var reader = tsharkProcess.StandardOutput;
tsharkProcess.WaitForExit(10000);
var list = new List<TSharkOutput>();
var regTshark = new Regex(@"^\s*(?<ip>[\d.:]+)\s+(?<val>\d+)\s+(?<rate>\d+\.\d+)\s+(?<perc>\d+\.\d+)%", RegexOptions.Compiled);
Match current;
string line = "";

while (!reader.EndOfStream)
{
    line = reader.ReadLine();
    if ((current = regTshark.Match(line)).Success)
    {
        var shark = new TSharkOutput()
        {
            value = uint.Parse(current.Groups["val"].Value),
            rate = decimal.Parse(current.Groups["rate"].Value),
            percent = decimal.Parse(current.Groups["perc"].Value)
        };

        if (IPAddress.TryParse(current.Groups["ip"].Value, out shark.ip))
            list.Add(shark); // all good add to the list.

    }
}
// sorted is an IEnumerable<TSharkOutput> which has been ordered by the percentage in descending order
var sorted = list.OrderByDescending(ts => ts.percent); 
```

请注意，我现在不在家，所以我无法尝试编译上面的代码，但我相当有信心它的大部分应该可以工作。让我知道。

干杯。

# batch-file - 批处理文件 - 如何使用 for 循环对所有特定变量进行大规模更改

> ID：12739725
> 
> 赞同：3
> 
> 时间：2012-10-05T04:57:07.350
> 
> 标签：batch-file

以下代码接受批处理文件的所有命令行参数。在我的例子中，我有大约 30 个命令行参数，它们都是 1、2 或 3 的数字。我将它们放入然后想将它们重新分配给其他字符。我想要每个var，如果是1，就改成/*，如果是2，就改成*/，如果是3，就改成#。

第一部分效果很好，这是我无法获得语法的重新分配的第二部分。

```
SETLOCAL ENABLEDELAYEDEXPANSION
set count=1
FOR %%i IN (%*) DO (
  set var!count!=%%i
  set var!count!=!var!count!:1=/*!  <--don't work
  set var!count!=!var!count!:2=*/!  <--don't work
  set var!count!=!var!count!:3=#!   <--don't work
  set /a count=!count!+1
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:59:17.607

我认为 jeb 有最简单的解决方案，但还有其他选择。

1) 您可以将 count 的当前值传输到 FOR 变量中。这就是我倾向于这样做的方式。

```
SETLOCAL ENABLEDELAYEDEXPANSION
set count=1
FOR %%i IN (%*) DO (
  for %%N in (!count!) do (
    set "var%%N=%%i"
    set "var%%N=!var%%N:1=/*!"
    set "var%%N=!var%%N:2=*/!"
    set "var%%N=!var%%N:3=#!"
  )
  set /a count+=1
) 
```

2) 可以使用 CALL 来延迟外部变量的扩展，但我不喜欢这个选项，因为正常扩展不如延迟扩展安全。

```
SETLOCAL ENABLEDELAYEDEXPANSION
set count=1
FOR %%i IN (%*) DO (
  set "var!count!=%%i"
  call set "var!count!=%%var!count!:1=/*%%"
  call set "var!count!=%%var!count!:2=*/%%"
  call set "var!count!=%%var!count!:3=#%%"
  set /a count+=1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:06:58.617

问题是访问*数组*成员的方式。

在您的情况下，最好的方法似乎是使用临时变量。

```
SETLOCAL ENABLEDELAYEDEXPANSION
set count=1
FOR %%i IN (%*) DO (
  set "temp=%%i"
  set "temp=!temp:1=/*!"
  set "temp=!temp:2=*/!"
  set "temp=!temp:3=#!"
  set "var!count!=!temp!"
  set /a count+=1
) 
```

# c - 这个指针符号是什么意思？

> ID：12739726
> 
> 赞同：1
> 
> 时间：2012-10-05T04:57:08.220
> 
> 标签：c

```
#define START ((void (**)(int)) 0x0fff)

*START = &fun_foo(); 
```

我以前没见过这个。这里发生了什么？void (**)(int) 是函数指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:00:20.250

`void (**)(int)`是一个指向一个函数的指针，该函数接受一个`int`并且什么也不返回。

`START`指向函数指针的指针也是如此，并且设置`*START`为指向的实际函数指针也是如此`fun_foo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T04:59:27.413

在您的情况下，是指向函数指针`START`的指针（位于固定地址）。`0x0fff`

但正如我在[这个答案](https://stackoverflow.com/a/8310429/841108)中所建议的那样，出于可读性原因，您可能希望使用 a`typedef`作为该指向函数的签名。

# css - 如何在 Bootstrap 网格中制作列（而不是堆叠）？

> ID：12739727
> 
> 赞同：3
> 
> 时间：2012-10-05T04:57:18.350
> 
> 标签：css, twitter-bootstrap, bootstrap-4, css-grid, jsfiddle

我正在尝试使用[Bootstrap](http://twitter.github.com/bootstrap/)并使用 jsfiddle.net 创建一些快速而肮脏的测试。

然而，我在一个非常简单的测试中遇到了一堵砖墙。我只是想在 Bootstrap 中看到网格系统，所以我复制了他们的第一个示例：

```
<div class="row">
  <div class="span4">Span 4</div>
  <div class="span8">Span 8</div>
</div> 
```

但是，它似乎不起作用——“Span 4”和“Span 8”看起来是堆叠的，而不是预期的两列布局。

我错过了一些明显的东西吗？这是小提琴：http: [//jsfiddle.net/8Xf2j/1/](http://jsfiddle.net/8Xf2j/1/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:30:40.807

如果使用该`bootstrap-combined.min.css`文件，则意味着[响应式布局](http://twitter.github.com/bootstrap/scaffolding.html#responsive)处于活动状态。

此外，您必须使用 a`.container`来设置最小宽度（如果没有，主体将适合窗口，这将导致堆叠 - 在小屏幕上）。

这是使用网格的一种方法：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/8Xf2j/4/)

```
<div class="container">
    <div class="row">
      <div class="span4">Span 4</div>
      <div class="span8">Span 8</div>
    </div>
</div> 
```

您应该注意到只有`bootstrap.min.css`文件包含在资源中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:11:12.673

请注意，**跨度**的宽度已经定义。它的总宽度是 960px(span4(320px) + span8(640px) = span12(960px))。所以 jsfiddle 正在显示这样的结果。创建一个 html 文件并尝试它，设置边框供您参考。

# android - 在 Android 上嵌入 org.apache.cordova.CordovaWebView 抛出错误

> ID：12739729
> 
> 赞同：2
> 
> 时间：2012-10-05T04:57:20.847
> 
> 标签：android, cordova

我正在 Android 应用程序中使用 Phonegap、cordova-2.0.0。我想在我的主布局中使用 org.apache.cordova.CordovaWebView。我的主要布局看起来像下面的 xml。

## 布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<org.apache.cordova.CordovaWebView
android:id="@+id/mainView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_centerInParent="true"
/>
</RelativeLayout> 
```

这是一个非常简单的测试应用程序，我按照[http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html)中的步骤进行操作。除了创建 cordova-xxxjar 文件之外，我遵循了所有步骤。我从 phonegap 下载中获得了 cordova-2.0.0.jar 并将这个 jar 文件复制到 \libs 文件夹中。

如果我`org.apache.cordova.CordovaWebView`从主布局中删除元素，那么它会毫无例外地运行。

作为 Android 应用程序运行会产生以下错误输出。

* * *

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_03
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

Error
Thu Oct 04 21:13:45 PDT 2012
org.apache.cordova.CordovaWebView failed to instantiate.

java.lang.NullPointerException
at org.apache.cordova.CordovaWebView.loadConfiguration(CordovaWebView.java:600)
at org.apache.cordova.CordovaWebView.<init>(CordovaWebView.java:121)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T09:48:54.107

这是一个老话题，但由于我遇到了同样的问题并且我可以解决它，所以我发布了允许我解决问题的解决方案，如果有人遇到同样的问题。

在被覆盖的函数中，`getActivity()`从`CordovaInterface`中`MainActivity`，您必须使用以下几行代码来实现它：

```
@Override
public Activity getActivity() {
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:34:00.770

您的 Android 应用程序的 res/xml 目录中似乎缺少 config.xml。

# php - 有没有一种简单的方法来获取在 PHP 中实例化类的文件？

> ID：12739730
> 
> 赞同：1
> 
> 时间：2012-10-05T04:57:31.717
> 
> 标签：php, class

我想复制这个：

```
$myObject = new object( __FILE__ );

class object {

    protected $path_to_caller;

    public function __construct( $file ){
        $this->path_to_caller = dirname( $file );
    }
} 
```

无需传递参数，因为每次调用都相同。有没有办法在不使用的情况下访问成员函数中的调用文件/目录`debug_backtrace()`？

本质上，我想要：

```
$myObject = new object();

class object {

    protected $path_to_caller;

    public function __construct(){
        $this->path_to_caller = special_function(); // dirname( __FILE__ ) of caller
    }
} 
```

# android - 在 Windows 7 64 位中安装 Android SDK 时出错？

> ID：12739740
> 
> 赞同：0
> 
> 时间：2012-10-05T04:58:54.787
> 
> 标签：android, java

您好我正在尝试在我的 windows 7 home basic 64 位中安装 android 最新的 SDK。在那之前，我在我的系统中安装了 Java su 7。我在 cmd 和 Path 中使用 java -version 检查了 java 安装，它给出了正确的 . 但是当我尝试安装 SDK 时，它说它找不到 Java 路径。

*   我在安装 Java JDK 时遵循的步骤......
*   从 oracle 站点下载的 JDK ......
*   安装在我的系统中............
*   它采用路径 C:\Program Files\Java\jdk1.6.0_35\bin .... 像这样
*   我去了高级系统设置和环境变量，然后系统变量选择了路径变量，点击了编辑选项，最后添加了路径。

再次点击新系统变量 JAVA_HOME 添加 jdk 路径..........

我遵循的安装步骤是否有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:02:38.643

使用`JDK-6`代替，`JDK-7`然后将 jdk 路径添加到系统`PATH`和`JAVA_HOME`. 在环境变量中。

像这样`Computer-->Properties-->Advanced System settings-->advanced tab-->system variables-->add PATH in user variables and JAVA_HOME in System variables.`

# c - (*ptr)[10] 是什么意思？

> ID：12739743
> 
> 赞同：2
> 
> 时间：2012-10-05T04:59:06.937
> 
> 标签：c, arrays, pointers

```
void main()
{
    int (*d)[10];
    d[0] = 7;
    d[1]=10;
    printf("%d\n",*d);
} 
```

它应该打印`10`，但编译器显示错误，如下所示：

> test.c:4:7：错误：从类型“int”分配给类型“int[10]”时类型不兼容</p>

请注意，我包含了一些错误，而不是全部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T05:11:36.193

正如克里斯所指出的，`d`是一个*指向*数组的*指针*。这意味着您在访问它时不正确地使用了该变量，而且除非您分配`d`指向有效数组，否则您将访问随机内存。

改变你的程序如下：

```
int main(void)
{
    int (*d)[10];  /* A pointer to an array */
    int a[10];     /* The actual array */

    d = &a;  /* Make `d` point to `a` */

    /* Use the pointer dereference operator (unary prefix `*`)
       to access the actual array `d` points to */
    (*d)[0] = 7;
    (*d)[1] = 10;

    /* Double dereference is okay to access the first element of the
       arrat `d` points to */
    printf("%d\n", **d);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:41:43.780

在 C 中，[] 与 * 相同，是指针语法。因此以下几行是相同的：

```
int** array2d1;
int* array2d2[];
int array2d3[][]; 
```

再举一个更接近的例子，main 函数有以下流行的形式：

```
int main(int argc, char** argv){ ... } 
```

或者

```
int main(int argc, char* argv[]){ ... } 
```

因此

```
int (*d)[10] 
```

是相同的

```
int* d[10] 
```

这与

```
int** d;
int firstArray[10];
d = &firstArray; 
```

实际上，您正在创建一个指向指针的指针（它是指向数组的指针）并将第一个指针分配给包含 10 个元素的数组。因此，当您运行以下行时：

```
d[0] = 7;
d[1] = 10; 
```

您将第一个数组的地址分配给 7，将第二个数组的地址分配给 10。所以正如 Joachim 所提到的，要分配值，您需要尊重两次：

```
(*d)[0] = 7
(*d)[1] = 10 
```

上面写着“在 d 指向的值处将 7 分配给第 0 个索引”。我希望这是有道理的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:39:54.563

`d`是一个指向 10 个整数数组的指针。

`int (*d)[10]`是指向 10 个整数数组的点的声明。

对比

`int *d[10]`，这是一个由 10 个 int 指针组成的数组。

对于像这样更复杂的语法（通常涉及指针），我使用[cdecl](http://cdecl.org/)来帮助我对其进行解码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:02:11.493

它以这种形式使用 int d[10]

我猜你误认为 d 必须是一种“指针”，因此你在 d 之前放了一个 *。但这不是你想要的。你想命名一个整数数组，上面可以看到它的符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T05:45:49.717

在 C 中，指针的概念有时会让人感到困惑。

考虑一个数组`int d[6] = {0,1,2,3,4,5}`

那么，*d 等价于 d[0]。d 本身是一个指向数组的指针， *d 取消引用该指针并为我们提供值。

因此，以下代码将打印相同的值：

```
int main()
{
    int (d)[10];
    *d = 7;
    *(d + 1)=10;
    printf("%d\n",*d);
    printf("%d\n",d[0]);
    return 0;
} 
```

结果：

```
7
7 
```

请参阅[http://codepad.org/LYY9ig1i](http://codepad.org/LYY9ig1i)。

如果您按如下方式更改代码：

```
#include<malloc.h>
int main()
{
    int *d[10]; //not (*d)[10]
    d[0] = (int *)malloc(sizeof(int *) * 10);
    d[0][0] = 7;
    printf("%d\n",d[0][0]);
    return 0;
} 
```

希望这对你有帮助！

# symfony - 根据 matchig 路由 (KnpMenuBundle) 将当前项目设置为行动

> ID：12739746
> 
> 赞同：1
> 
> 时间：2012-10-05T04:59:19.530
> 
> 标签：symfony, knpmenubundle

我有这个建设者

```
namespace Telnet\CSSBundle\Menu;
use Knp\Menu\FactoryInterface;
use Symfony\Component\DependencyInjection\ContainerAware;
class Builder extends ContainerAware
{
    public function mainMenu(FactoryInterface $factory, array $options)
    {
        $menu = $factory->createItem('Main Menu');
        $menu->addChild('Главная', array('route' => 'pages_index'));
        $menu->addChild('Форум', array('uri' => '/forum'));
        $menu->addChild('Демки', array('route' => 'pages_dem'));
        $menu->addChild('SourceBans', array('uri' => '/sourcebans'));
        $menu->addChild('HLStatsX', array('uri' => '/hlstatx'));
        return $menu;
    }
} 
```

如何在任何操作中获取此菜单以设置当前项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:19:16.423

您缺少这部分逻辑：

```
$menu->setCurrentUri($this->container->get('request')->getRequestUri()); 
```

# autolayout - Lion 中使用 WebView 的自动布局警告（但不是 Mountain Lion）

> ID：12739747
> 
> 赞同：1
> 
> 时间：2012-10-05T04:59:21.920
> 
> 标签：autolayout

在 Lion 中使用具有自动布局的 WebView 时，我收到以下警告：

调用 -[WebHTMLView 布局] 后布局仍然需要更新。
WebHTMLView 或其超类之一可能已覆盖 -layout 而不调用 super。或者，某些东西可能在更新过程中弄脏了布局。两者都是 Cocoa Autolayout 中的编程错误。如果某些前 Cocoa Autolayout 类有一个称为 layout 的方法，则很可能会出现前者，但它应该被修复。

该线程解释了原因：[Mac OS X 中的自动布局警告](https://stackoverflow.com/questions/9958576/autolayout-warning-in-mac-os-x?lq=1)

在 Mountain Lion（MacBook Pro，13 英寸，2009 年中）中，问题消失了——那么为什么我的 Lion 机器（Mac Pro1,1 2006）上仍然出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:17:13.807

这是一个烦人但良性的日志。这是不可避免的，但无害的，这并不意味着你做错了什么。

# jquery - 如何从json中获取数据表列名

> ID：12739749
> 
> 赞同：1
> 
> 时间：2012-10-05T04:59:28.230
> 
> 标签：jquery, json, datatable

我有包含列名和数据的 json 文件。我能够在 jsp 中使用带有硬编码列名的数据填充数据表。但我也想从 json 中读取列名。

有谁知道如何做到这一点？

下面是json文件和我的js代码。

json文件

```
{
"aaData": [

    [
     "Name",
     "Description",
     "Date"
    ],
    [
        "Ronaldo",
        "Brazil",
        "1983"
    ],
    [
        "Rooney",
        "England",
        "1999"
    ]
] 
```

}

js代码

```
$(document).ready(function() {
    $('#genericTable').dataTable( {
        "bProcessing": true,
        "sAjaxSource": "resources/json/" + key + ".json"
    }).columnFilter({ sPlaceHolder: "head:after",
        aoColumns: [ { type: "text" },
                     { type: "text" },
                     null
                   ]
    }); 
}); 
```

# actionscript-3 - Flash Actionscript3：在 Flash 中按下按键时会话被删除

> ID：12739754
> 
> 赞同：0
> 
> 时间：2012-10-05T04:59:59.067
> 
> 标签：actionscript-3, session-cookies

我有一个应用程序，当用户登录时，会为用户创建一个会话，他可以玩不同的游戏。我已经在我的 flash swf 中处理了箭头键来选择不同的游戏。但是每当我使用键盘选择游戏时，我的会话就会过期。当我通过鼠标选择时，会话不会过期。我已将我的 keylistener 添加到舞台上。

# python - 检查传递给函数的函数

> ID：12739755
> 
> 赞同：1
> 
> 时间：2012-10-05T05:00:10.313
> 
> 标签：python

我有一个函数，它将函数作为其参数之一，但根据上下文，该函数可能是几个函数之一（它们都是用于为`sorted`方法创建规则的比较器函数）。有没有办法检查哪个函数被传递到函数中？我在想的是某种像这样的条件逻辑：

```
def mainFunction (x, y, helperFunction):
    if helperFunction == compareValues1():
         do stuff
    elif helperFunction == compareValues2():
         do other stuff 
```

等等。这行得通吗？在检查函数是否存在时，我是否需要传入函数的所有参数？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:09:58.047

您走在正确的轨道上，您只需要删除这些括号：

```
def mainFunction (x, y, helperFunction):
    if helperFunction == compareValues1():  <-- this actually CALLS the function!
         do stuff
    elif helperFunction == compareValues2():
         do other stuff 
```

相反，你会想要

```
def mainFunction (x, y, helperFunction):
    if helperFunction is compareValues1:
         do stuff
    elif helperFunction is compareValues2:
         do other stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T05:10:37.083

```
>>> def hello_world():
...    print "hi"
...
>>> def f2(f1):
...    print f1.__name__
...
>>> f2(hello_world)
hello_world 
```

重要的是要注意这只检查名称而不是签名..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T05:00:59.763

```
helperFunction==compareValues1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:03:41.577

由于函数本身是python中的一个对象，因此，当您将函数传递给函数时，会复制对该参数的引用。因此，您可以直接比较它们以查看它们是否相等：-

```
def to_pass():
    pass

def func(passed_func):
    print passed_func == to_pass   # Prints True
    print passed_func is to_pass   # Prints True

foo = func    # Assign func reference to a different variable foo
bar = func()  # Assigns return value of func() to bar..

foo(to_pass)  # will call func(to_pass)

# So, you can just do: - 

print foo == func   # Prints True

# Or you can simply say: - 
print foo is func   # Prints True 
```

因此，当您传递`to_pass`给函数时，在参数中复制了`func()`一个引用`to_pass``passed_func`

# ruby-on-rails - Ruby on Rails - 销毁操作返回 404

> ID：12739761
> 
> 赞同：0
> 
> 时间：2012-10-05T05:00:45.320
> 
> 标签：ruby-on-rails, ruby

我在 route.rb 中有一些这样的路由设置

```
resources :users do
      resources :lists do
        resources :tasks
      end
  end 
```

当我运行“rake routes”时，我可以看到我的销毁操作的路线：

> 删除 /users/:user_id/lists/:id(.:format)

我对这个动作的实现如下所示：

```
 def destroy
    @user = User.find(params[:user_id])
    @user.lists.find(params[:id]).destroy
     render json: { status: "success" }
  end 
```

如果我注释除 'render' 行之外的所有行，我将返回 JSON 结果。然而，我收到了 404 行。我对 Rails 很陌生。有人可以告诉我我有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:21:05.167

尝试使用它可能对您有帮助

```
<%= link_to 'Destroy', [user,list], method: :delete, data: { confirm: 'Are you sure?' } %> 
```

在你的控制器中

```
def destroy
  @user = User.find(params[:user_id])
  @list = @user.lists.find(params[:id]) if @user.present?
  if @list.present? && @user.present?
     @list.destroy
     status = "success"
  else
     status = "fail"
  end
  render json: {status: status}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:21:30.940

尝试这个

```
List.delete_all(["ID = ? AND user_id = ?", params[:id], params[:user_id]]) 
```

或者`destroy_all`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:10:25.957

你能发布你的观点吗？我怀疑您需要在链接中指定一个方法，例如：`<%= link_to "Delete", [@user, list], method: :delete, remote: true %>`

# javascript - javascript: 我想记住用户输入的 FileList 到 input:files

> ID：12739767
> 
> 赞同：0
> 
> 时间：2012-10-05T05:01:20.423
> 
> 标签：javascript, input, file-io

我需要一个 input:file 来上传文件，但用户多次添加了文件。最后，我需要上传用户选择的所有文件。

但是我遇到了问题，为什么我尝试设置 FileList。如何调整 Filelist 对象的大小并输入另一个新文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:11:59.673

您也可以在当前文件的基础上创建另一个输入文件，当用户单击它时，另一个输入文件将打开，前一个文件将存储以前的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:35:56.877

如果我正确理解您的问题，您希望通过单击多个否按钮来继续选择文件。次。

为此，您可以执行以下操作：

1.  为输入文件添加 onchange 事件
2.  维护一个哈希表（简单地说，一个对象）来保存所有选定的文件。
3.  在 onchange 事件处理程序内部填充哈希表。（注意：根据您的要求，您可能希望更改为此哈希表创建“键”的方式）。

> ```
> <input type="file" multiple="multiple" id="fname" onchange="pp()" />​ 
> ```

```
<script type="text/javascript">
var x={};
function pp()
{
    var k = document.getElementById("fname");
    for (var i = 0; i < k.files.length; i++){
      x[k.files[i].name]=k.files[i];
    }
    console.log(x);
}
</script> 
```

# java - 端口已在使用中的 SNMP 错误

> ID：12739768
> 
> 赞同：3
> 
> 时间：2012-10-05T05:01:21.120
> 
> 标签：java, port, snmp

我创建了一个 SNMP 代理模拟器应用程序，它使用端口号 161 来模拟设备。有时会出现端口已经在使用的异常。我怎么知道161端口是否忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:15:43.457

只需启动您的应用程序。如果它得到一个 BindException，则该端口正在使用中。如果没有，您的应用程序可以运行。提前知道这一点并不能真正为你买任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:06:12.107

通过使用**netstat**命令。

具体来说，

> netstat -s [PORT_NO]

例如，

> 网络统计 -s 161

1.  [http://www.techrepublic.com/blog/security/list-open-ports-and-listening-services/443](http://www.techrepublic.com/blog/security/list-open-ports-and-listening-services/443)
2.  [http://www.speedguide.net/faq_in_q.php?qid=115](http://www.speedguide.net/faq_in_q.php?qid=115)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:02:57.853

只是补充说明。我认为您可能被禁止使用低端口号（如果不是 root 用户，则安全策略） - 尝试使用更高的端口号，即 10161。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:23:06.697

在 Windows 上，您可以使用`netstat`和`tasklist`。例如，

```
netstat -aon | findstr 161 
```

它的输出应该是

```
C:\Program Files\Microsoft Visual Studio 9.0\VC>netstat -aon |findstr 161
  UDP    0.0.0.0:161            *:*                                    1620
  UDP    [::]:161               *:*                                    1620 
```

然后使用`tasklist`

```
tasklist /fi "PID eq 1620"

Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
snmp.exe                      1620 Services                   0      1,172 K 
```

在我的情况下，显然是 Windows SNMP 服务使用端口 161。在你的情况下，它可能是另一个进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:44:54.430

```
1)ps -efww | grep 161   

2)netstat -anp | grep 161 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T09:13:23.587

以下陈述对我有用。

```
netstat -lnp 
```

**示例用法：**

```
appuser@-app:~$ sudo netstat -lnp |grep 162
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      1162/mysqld
udp6       0      0 127.0.0.1:162           :::*                                6830/java 
```

# xml - 如何打印 Oracle 生成的大型 XML 字符串？

> ID：12739770
> 
> 赞同：2
> 
> 时间：2012-10-05T05:01:35.587
> 
> 标签：xml, oracle

我需要比 varchar2(2000) 更大的东西才能打印我生成的 XML。要么推荐比 dbms_output.put_line(x) 更好的方法，要么推荐不同的数据类型来存储结果然后打印。我是 Oracle 新手，全职工作是 UI 开发。

```
declare
    v_ctx dbms_xmlgen.ctxHandle;
    x varchar2(2000); -- I need something bigger than varchar2(2000)
begin
    v_ctx := DBMS_XMLGen.newContext('
        select
            baz as "Baz"
        from schema.table_with_10000_rows');
    DBMS_XMLGen.setRowsetTag(v_ctx, 'Foo');
    DBMS_XMLGen.setRowTag(v_ctx, 'Bar');
    x := dbms_xmlgen.getxml(v_ctx);
    dbms_output.put_line(x);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:23:37.870

`CLOB`如果您有超过 4000 个字符，则需要使用 a ，这就是`getxml`返回的数据类型。[这个问题](https://stackoverflow.com/q/1576478/266304)似乎正在解决同样的问题，并显示了一种简单的循环和打印块的方法，尽管它有一个缺陷 - 它应该使用`dbms_output.put()`而不是`put_line`（编辑：循环后可能带有终端`dbms_output.new_line`；未经测试我是害怕）。

如果您在 SQL*Plus 中执行此操作，则可以`dbms_output`完全避免使用[客户端绑定变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve050.htm)：

```
var x clob;

declare
    v_ctx dbms_xmlgen.ctxHandle;
begin
    v_ctx := DBMS_XMLGen.newContext('
        select table_name as "Baz"
        from all_tables');
    DBMS_XMLGen.setRowsetTag(v_ctx, 'Foo');
    DBMS_XMLGen.setRowTag(v_ctx, 'Bar');
    :x := dbms_xmlgen.getxml(v_ctx);
end;
/

print x 
```

`x`在 PL/SQL 块之外声明，并与它一起用作绑定变量 - 注意赋值中的冒号，`:x := ...`.

```
X
--------------------------------------------------------------------------------
<?xml version="1.0"?>
<Foo>
 <Bar>
  <Baz>DUAL</Baz>
 </Bar>
 <Bar>
  <Baz>SYSTE 
```

默认情况下，您可能只会看到 XML 的开头；您需要[`set long <some big number>`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2699121)查看所有内容，并且（从 11g 开始）您被限制为 2GB。（我想你还想设置反馈和标题，也许还有长块）。

* * *

我会质疑您为什么要像这样将其打印到屏幕上，而不是存储在表格中。如果最终目标是将其放入文件中，则`utl_file`可能更合适；可能是[这样](https://stackoverflow.com/a/1434527/266304)的。

# c# - 使用 Excel 和 C# 进行仓库管理

> ID：12739772
> 
> 赞同：-1
> 
> 时间：2012-10-05T05:01:46.377
> 
> 标签：c#, excel, search

我需要使用 Excel 和 C# 进行仓库管理的基本概念。

实际上，仓库文件由 30 列和 40,000 条以上记录组成。

1.  我只需要从上传的 Excel 文件（）中选择选择列（假设 12 `.XLSX`）
2.  我需要使用自定义列显示 40,000 行数据（全部）
3.  提供用户自动搜索文本框（假设为 5 列，如卡车编号、订单编号、订单日期、wh-name）并在网格视图中显示搜索结果
4.  编辑和更新自动搜索搜索到的数据（任何行或对所有行实施更新）
5.  最后将数据保存到新的 Excel 或 PDF 文件中

请使用 C# 和 Excel 帮助实现这些。

我试过了，但将数据从数据网格保存到新的 Excel 文件需要 7-10 分钟。我对动态自动搜索列有疑问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:49:52.917

作为建议：使用[http://epplus.codeplex.com/](http://epplus.codeplex.com/)读取传入文件。然后将所有传入的材料放在一些DataTables中。这些数据表可用于更轻松地实现其他功能，因为它们是为支持此类操作而构建的。将任何修改后的数据保存到这些数据表中。将它们导出到一个新的 xlsx 文件，您可以将其交回。Agian，你可以使用 epplus

# php - 上传文件后如何显示链接

> ID：12739773
> 
> 赞同：0
> 
> 时间：2012-10-05T05:01:46.553
> 
> 标签：php, html

我很难找到这个问题的答案。我想显示一个指向包含视频文件的页面的链接，但我不希望该链接在视频文件上传之前出现。

这是一个用户上传视频的网站，所以我不想在他们上传视频后手动为他们放置链接，我也不想提前制作链接，因为用户会点击它们并且不会有视频可用。

那么，有没有办法在上传文件之前隐藏链接。文件上传后，链接所在的 php 页面会检查它是否存在，如果存在则显示链接，否则链接将保持隐藏状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:59:26.967

1.  每次发送客户端用于上传文件的表单时，都会将文件的信息存储在数据库中。
2.  每次客户端请求视频列表时，查询数据库并根据结果构建网页。

确保将上传的文件与用户相关联，以免混淆。您是否已经在管理身份验证？

如果您希望在上传完成后立即显示链接而不重新加载页面，那么您需要 ajax。

# ruby-on-rails - 如何在视图中查看 RoR 控制器实例变量？

> ID：12739775
> 
> 赞同：1
> 
> 时间：2012-10-05T05:02:02.207
> 
> 标签：ruby-on-rails

我有一个表项目，每个项目都有 0 个或更多类别。在我看来，我想显示 0 个项目，直到与每个类别相关联的 JQuery 单击事件——即当用户单击“食物”时，我想显示所有具有食物类别的项目；当用户单击“照片”时，我想同时显示与食物和照片相关的项目。

因此，在 jQuery click 事件中，我定义了一个 ajax 调用：

```
params = 'category_name=' + cat;
$.ajax({
  url: "/projects_controller/filter_list",
  data: params
}) 
```

其中“cat”是所选类别的名称（格式为“Food Photography Journal etc”）

在我的 projects_controller 中，我启动了一个 filter_list 方法：

```
def filter_list
    @categories = []
    words = params[:category_name].split(/\W+/)
    words.each { |word| @categories.push(Category.where("name = ?", word))  }
   @projects = ...
end 
```

但现在我被困住了。1) 如何获取与@categories 中的任何类别相关的所有项目？和 2) 如何在我的视图上显示 @projects 变量？现在我只是这样显示：

```
<% Project.all.each do |project| %>
              <tr style="display:none" class="project <% project.categories.all.each do |cat| %><%= cat.name %> <% end %>">
                <td><%= project.filename %></td>
                <td><a href='project/<%= project.id %>'><%= project.location %></a>
                <td><% project.categories.all.each do |cat| %><%= cat.name %>, <% end %></td>
            <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:09:09.700

您的实例变量 $categories, @projects 在视图中已经可用。所以在视图中你可以使用`@project`而不是访问类`Project`本身。

```
<% @projects.each do |project| %>
  ...
<% end %> 
```

但可能您没有正确设计模型。在模型中建立正确的[关系](http://guides.rubyonrails.org/association_basics.html)。如果一个项目属于一个类别，您可以将它们关联如下：

```
#models/category.rb
class Category < ActiveRecord::Base
 has_many :projects
end

#models/project.rb
class Project < ActiveRecord::Base
  belongs_to :category
end

#controllers/categories_controller.rb
def index
  @categories = Category.all #or use your own query
end

#views/categories/index.erb
<% @categories.each do |category| %>
  # here you can get all projects under this category using 
  # category.projects
<% end %> 
```

注意：我习惯了 HAML，如果我的 ERB 语法错误，请见谅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:10:37.953

控制器的相应视图`class`可以访问*类级别的实例变量*（即`@my_variable`）。

只需让`@projects = Project.all.each`您的*控制器*进入并在您的*视图*中替换`Project.all`为。`@projects`

# windows-services - 如何在后台杀死 Rackup 进程？

> ID：12739778
> 
> 赞同：2
> 
> 时间：2012-10-05T05:02:10.117
> 
> 标签：windows-services, redmine, rackup, puma

通过在 CMD 中运行以下代码，我设法使用 Rackup 和 Puma 托管 RedMine。

```
rackup -I "script/rails" -s "puma" -O "-q" -E "production" 
```

但这将使 CMD 保持正常运行。因此，我创建了一个 Windows 服务来运行将执行此命令的 .BAT 文件。它起作用了，RedMine 现在托管在后台

现在我的问题出现了。我现在无法停止 RedMine。即使我停止了运行 .BAT 文件的服务，RedMine 仍然是托管的。这是因为我不知道如何在 windows 服务的 OnStop() 函数中杀死 rackup 进程。

我可以杀死它的唯一方法是杀死 ruby​​.exe 进程。希望大家能指导我以更好的方式做到这一点。谢谢

# html - Twitter Boostrap 能否变得更适合移动设备？

> ID：12739781
> 
> 赞同：1
> 
> 时间：2012-10-05T05:02:20.653
> 
> 标签：html, twitter-bootstrap, responsive-design

我网站的 CSS 目前由 Twitter Bootstrap 处理，它在高分辨率下看起来/工作得很好，比如我的 1920x1200 显示器之一。然而，当我使用更小的设备（例如智能手机，甚至是我的高分辨率 iPad 3）时，我会注意到我的电脑屏幕上根本不存在的各种怪癖。我当然可以通过水平调整浏览器窗口的大小来模拟它们。

怪癖通常是某种形式的随机调整大小（图像将在标题文本之前调整大小），最终所有内容都变成一个大列，这对于浏览网站的任何人来说几乎是无用且难以理解的。

如何使网站在较小的屏幕上看起来完全一样？查看[apple.com](http://apple.com)和[nest.com](http://nest.com)，您会发现它们在您用来访问它们的任何设备上都是相同的。

我知道这是 Bootstrap 试图更具响应性/流畅性，但我觉得除非我花费大量精力针对不同的水平分辨率微调该行为，否则我最好在任何屏幕上向用户显示相同的版本。有什么我可以在 Bootstrap 中关闭的东西，可以防止跨度的智能堆叠并在任何地方保持相同的形状？

非常感谢！

# sed - 使用 awk 或 sed 在两列之间进行减法

> ID：12739783
> 
> 赞同：1
> 
> 时间：2012-10-05T05:02:34.677
> 
> 标签：sed, awk

我有一些文本文件。我需要在每个文件的第二列和第四列之间进行减法。减去的值应作为第五列打印到原始文件中。如何使用 awk 或 sed 执行此操作？

```
HII 62.0    HII 35.1
MEE 21.3    MEE 21.3
GLL 42.3    GLL 18.5
ASS 105.9   ASS 105.9
RRG 65.6
GLL 48.3
SES 83.5    

Desired output

HII 62.0    HII 35.1   26.9
MEE 21.3    MEE 21.3    0
GLL 42.3    GLL 18.5   23.8
ASS 105.9   ASS 105.9   0
RRG 65.6
GLL 48.3
SES 83.5 
```

如果第三列和第四列是空白的，则无需减去。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T05:06:14.863

```
awk 'NF == 2 { print }
     NF == 4 { print $0, $2 - $4 }' 
```

这可以全部放在一条线上，但是当它分布在两条线上时，它在做什么会更清楚。

如果您想更好地控制格式，您可以使用`printf()`而不是仅使用`print`.

在清理数据中的尾随空格后，它会产生：

```
HII 62.0    HII 35.1 26.9
MEE 21.3    MEE 21.3 0
GLL 42.3    GLL 18.5 23.8
ASS 105.9   ASS 105.9 0
RRG 65.6
GLL 48.3
SES 83.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:47:25.847

这可能对您有用（GNU sed 和 Bash）：

```
sed -ri '/^\S+\s+(\S+)\s+\S+\s+(\S+)/s//echo "&\t$(echo \1-\2|bc)"/e' file 
```

# android - 如何在片段中使用 startmanagingcursor？

> ID：12739785
> 
> 赞同：2
> 
> 时间：2012-10-05T05:02:54.793
> 
> 标签：android, sqlite, android-fragments

如何在片段中使用 startmanagingcursor？因为我需要在 Fragment 中从 SQLite 中提取数据，但我不能在其中使用 startmanagingcursor。

这是我的编码

```
 @Override  
 public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);
        dbUtil.open();
        Cursor cursor = dbUtil.fetchNews(getArguments().getString("title"));
        getActivity().startManagingCursor(cursor);
        newsTitle = cursor.getString(0);
        dbUtil.close();
 } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T05:13:14.860

由于其他人似乎都想向您传教而不给您答案，因此我实际上会回答您的问题（然后传教：p）。

```
getActivity().startManagingCursor(yourCursor); 
```

就这么简单。

正如其他人所指出的那样，它已被弃用，并且`CursorLoader`出于多种原因推荐使用...将数据处理远离 UI 线程作为主要线程。

但是如果你真的需要/想要`startManagingCursor`在片段中使用，上面的片段就是你将如何做到的。

鉴于您发布的更多信息，另一个问题可能是您尝试从哪里调用数据库。您不应该`onCreate`在片段类中使用该方法（至少对于这些操作），您应该使用`onActivityCreated`. 这样你就可以确定控制你的片段的活动在你尝试使用任何与之相关的东西之前已经完成了自己的设置。

# javascript - 闭包中不可用的变量

> ID：12739786
> 
> 赞同：0
> 
> 时间：2012-10-05T05:03:01.730
> 
> 标签：javascript, jquery, closures

我无法在 javascript 类/jQuery 插件的闭包范围内分配一些变量。

当我像在 Article 类的构造函数中那样进入 Article.initObj() 时，我在闭包范围内看不到`domElement`or `settings`，但我**可以**看到`me`and `testVar`。这让我很困惑。任何人都可以阐明这里可能发生的事情吗？

**编辑**：我在 Firefox 和 chrome 中都试过这个。

这是我的 HTML：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="ArticleNav.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                // Init our Viomedia article graph
                var articleList = $("#entityList").children().ArticleNav();             
            });
        </script>
    </head>
    <body>
        <div id="leftPanel" class="vpanel">
            <div id="#search">
                <label for="searchField">Search </label>
                <input style="float: right;" name="searchField" id="searchField"/>
            </div>
            <div id="tree">
            </div>
        </div>
        <div id="rightPanel" class="vpanel">
            <div id="entityList" >
                <div class="article program" id="1">
                    <div class="title">The Simpsons</div>
                    <div class="article playlist" id="2">
                        <div class="title">Classic Episodes</div>
                        <div class="article episode" id="6">
                            <div class="title">Homer the Heretic</div>
                        </div>
                    </div>
                    <div class="article season" id="3">
                        <div class="title">Season 4</div>
                        <div class="article episode" id="4">
                            <div class="title">Kamp Krusty</div>
                        </div>
                        <div class="article episode" id="5">
                            <div class="title">A Streetcar Named Marge</div>
                        </div>
                        <div class="article episode" id="6">
                            <div class="title">Homer the Heretic</div>
                        </div>
                        <div class="article episode" id="7">
                            <div class="title">Lisa the Beauty Queen</div>
                        </div>
                    </div>
                </div>
                <div class="artist article" id="7">
                    <div class="title">Electric Light Orchestra</div>
                    <div class="article album" id="8">
                        <div class="title">The Essential Electric Light Orchestra</div>
                        <div class="article album" id="9">
                            <div class="title">Disc 1</div>
                            <div class="article track" id="10">
                                <div class="title">So Serious</div>
                            </div>
                        </div>
                        <div class="article album" id="11">
                            <div class="title">Disc 2</div>
                            <div class="article track" id="12">
                                <div class="title">Last Train to London</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="program article" id="13">
                    <div class="title">Archer</div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

这是我的 jQuery 插件：

```
(function($){

    var Article = function (element, options)
    {
        var me = this;
        var testVar = "I can read this";
        var domElement = $(element);

        var settings = $.extend({}, options || {});

        this.initObj = function()
        {
            me.test();
        };

        this.test = function()
        {
            console.log(testVar);
        };

        this.initObj();
    };

    var construct = function(element) {
        var element = $(element);
        // If this element already has this plugin attached to it.
        if(element.data('Article')) {
            return;
        }

        var ArticlePlugin = new Article(element);
        element.data('Article', ArticlePlugin);
    };

    $.fn.ArticleNav = function(func) {

        return this.each(function()
        {
            switch (func) {
                default:
                    construct(this);
                    break;
            }
        });
    };

}( jQuery )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:25:32.647

`domElement`可从`.initObj()`父闭包范围获得。您是否真的尝试使用它，或者您只是在调试器中没有看到它？

如果您`initObj()`在调试器中单步执行，您将不会在调试器中看到`domElement`局部变量，因为它位于更高的范围内，但如果您对其进行显式监视，您将能够看到它。如果您在其中编写`initObj()`引用它的代码，它将起作用。

对`settings`.

# c++ - C ++如何从类cpp文件创建.h

> ID：12739787
> 
> 赞同：0
> 
> 时间：2012-10-05T05:03:00.593
> 
> 标签：c++

> **可能重复：**
> [关于 C++ 包含另一个类](https://stackoverflow.com/questions/12733888/regarding-c-include-another-class)

我是新手，想了解更多关于如何将我的 C++ 文件拆分为 .h 和 .cpp 的信息

这是我的 File2.cpp

```
#include <iostream>
#include <string>

using namespace std;

class ClassTwo
{
private:
string myType;
public:
void setType(string);
string getType();
};

void ClassTwo::setType(string sType)
{
myType = sType;
}

void ClassTwo::getType(float fVal)
{
return myType;
} 
```

我想将其拆分为 2 个文件，即 .h 和 .cpp 我如何将其拆分为一个具有私有和公共的类。

我想在 File1.cpp（另一个 cpp 文件）中使用 ClassTwo

我如何链接它，以便我可以在 ClassTwo 中使用它

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T05:05:18.313

//**文件2.h**

```
#include <iostream>
#include <string>

class ClassTwo
{
private:
   std::string myType;
public:
   void setType(std::string);
   std::string getType();
}; 
```

**//文件2.cpp**

```
#include"File2.h"

void ClassTwo::setType(std::string sType)
{
    myType = sType;
}

std::string ClassTwo::getType()
{
    return myType;
} 
```

**//文件1.cpp**

```
#include "File1.h"   //If one exists
#include "File2.h"

int main()
{
    ClassTwo obj;
    return 0;
} 
```

**[附带说明一下，我已经在此处对您之前的问题](https://stackoverflow.com/a/12733966/452307)**进行了非常详细的解释。
你甚至读过它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:06:08.380

我们可以继续讨论将文件分成 .cpp 和 .h/.hpp 所涉及的不同方面，但是，我认为此链接对您很有用：

[http://www.learncpp.com/cpp-tutorial/89-class-code-and-header-files/](http://www.learncpp.com/cpp-tutorial/89-class-code-and-header-files/)

此外，您还需要避免“使用命名空间标准；” 因为编译器不必要地加载了整个 C++ 标准命名空间。除此之外，这样做可能会无意中导致函数名冲突等。在实践中，只加载您将使用或将经常使用的标准命名空间中的内容。

请参阅此处了解更多信息：

[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

# massive - 海量的 ORM 和 sql 函数

> ID：12739789
> 
> 赞同：0
> 
> 时间：2012-10-05T05:03:10.200
> 
> 标签：massive

我似乎找不到任何好的示例，但是进行这样的查询的最佳方法是什么

```
tbl.Query(SELECT * FROM PRODUCTS WHERE ProductId IN (@Ids)", idlist) 
```

我看到 Dapper ORM，您只需放入一个列表，它就知道该做什么。你能用 Massive 做到这一点，还是我必须构建像@0、@1、@2 这样的参数并将列表转换为数组 idList.ToArray()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:00:14.107

看起来这是不可能的。当我尝试（`ids`在我的情况下是一个数组）时，我得到了错误：

```
No mapping exists from object type System.Int32[] to a known managed provider native type. 
```

这往往让我认为 Massive 在很大程度上让底层 SQL 提供程序处理查询的参数化。所以是的，你将不得不像你说的那样构建参数。你可以这样做：

```
productTable.Query(string.Format("SELECT * FROM PRODUCTS WHERE ProductId IN ({0})",
    string.Join(",", ids.Select((id, ix) => "@" + ix).ToArray())),
    ids.Cast<object>().ToArray()); 
```

# mongodb - 如何在 MongoDB 中存储一个以 $ 开头的键的对象

> ID：12739793
> 
> 赞同：3
> 
> 时间：2012-10-05T05:03:38.083
> 
> 标签：mongodb

我想保存对我的文档所做的更改。最简单的方法是存储对文档所做的实际更改。我的意思是说：

```
var changes = {
  $set: {
    text: 'Some text.'
  }
}

db.posts.update({
  _id: _id
}, changes)

db.changes.insert({
  postid: _id,
  changes: changes
}) 
```

但是我得到了错误（有充分的理由）：

```
Error: key $set must not start with '$' 
```

存储更改的最简单方法是什么？

或者，也许我处理的问题是错误的，而您有更好的解决方案。我希望用户能够看到人们对任何帖子或实际上任何内容所做的更改日志。我不会为每次更改都创建一个函数。编辑文本只是对文档进行更改的众多方法之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-10T21:20:32.063

另一种选择（有很多保留）是将您的更改日志存储为 json 字符串。当然，内容不会那么容易搜索，但您可以保留将原始数据存储为字符串并在检索时解码 json 的简单性。如果您只是存储更改日志，则此方法可能有效。

db.changes.insert({ postid: _id, changes: JSON.stringify(changes) })

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:08:46.190

这是 MongoDB 中的一个限制。有某些保留字符，其中之一是`$`由于查询必须如何工作。使用运算符时，集合中的文档和用于更新的文档之间会出现歧义。

我建议去掉`$`符号。我会改为使用这些词代替您尝试使用的运算符：

*   创造
*   放
*   删除

# iphone - 用iPhone App替换Sqlite中单行中的单列值

> ID：12739795
> 
> 赞同：1
> 
> 时间：2012-10-05T05:03:55.847
> 
> 标签：iphone, ios, xcode, sqlite

我刚开始在 iPhone 应用程序中使用 sqlite。现在的问题是我在表中有 3 列。ID、Channel_Name 和 Channel_IP。这是表格示例。

```
ID  |   Channel_Name  |  Channel_IP   
1   |   XYZ           |  http://0.0.0.0/indez.sdp/playlist.m3u8
2   |   ABC           |  http://0.0.0.0/index.sdp/playlist.m3u8 
```

现在我只想更新 Channel_IP 列中的 IP 地址，而不是整个 URL 链接中的 IP 地址（如仅将 0.0.0.0 更新为 1.1.1.1 的 IP 地址）。也在谷歌上搜索，但没有找到任何相关的解决方案，所以如果有知道的请告知。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:27:13.127

使用下面的查询

```
UPDATE yourtableName SET  Channel_IP = replace(Channel_IP, '0.0.0.0', '1.1.1.1'); 
```

# php - 通过 .htaccess 文件修改 URL

> ID：12739797
> 
> 赞同：3
> 
> 时间：2012-10-05T05:04:08.280
> 
> 标签：php, .htaccess

我有一个看起来像的 URL

```
localhost/myapp/index.php?mod=user&page=createuser 
```

我希望 URL 看起来像

```
localhost/user/createuser 
```

如何使用 htaccess 文件执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:17:41.430

尝试这个

```
RewriteEngine on
RewriteRule ^myapp/(.+)/(.*) myapp/index.php?mod=$1&page=$2 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:08:20.230

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)$ /myapp/index.php?mod=$1&page=$2 [L] 
```

# ruby-on-rails - 引导模式的 turbolinks 问题

> ID：12739800
> 
> 赞同：11
> 
> 时间：2012-10-05T05:04:17.640
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, turbolinks

我做这样的模态：

### 显示模式的链接：

```
<%= link_to "versão resumida", resumed_rep_life_animal_path(animal, :partial => true), 'data-toggle' => 'modal', 'data-target' => '#myModal', 'data-no-turbolink' => true %> 
```

### 模态html本身：

```
<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-body"></div>
  <div class="modal-footer">
    <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Fechar</button>
  </div>
</div> 
```

但是，`data-no-turbolink`没有按预期工作。如果我刷新页面，它可以正常工作，但是，当我浏览带有 turbolinks 的页面时，看起来`data-no-turbolink`只是被忽略了。

难道我做错了什么？我有一些模态，例如我的应用程序中的示例，不想删除它们，也不想删除 turbolinks...

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-30T18:11:55.507

正如 davydotcom 所说，模式不起作用的原因是因为它们被绑定到`$(document).ready`而不是`$(document).on('page:change')`turbolinks 使用的。

jquery-turbolinks gem 将使准备好的调用也响应 turbolink 的 page:change 调用。

***第 1 步：***将 gem 添加`jquery-turbolinks`到您的 Gemfile。

***第 2 步：***按以下顺序将其添加到您的 JavaScript 清单文件中：

```
//= require jquery
//= require jquery.turbolinks
//= require jquery_ujs
//
// ... your other scripts here ...
//
//= require turbolinks 
```

***第三步：***重启你的服务器。繁荣！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:31:43.157

data-no-turbolinks 不是这里的问题......

开箱即用的 bootstrap js 似乎只监控 document.ready，并且 bootstrap JS 可能需要修改以检查 page:load

[看第222行](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js#L222)

这只会在包含引导程序的第一个请求上触发。它也需要修改为在 page:load 上触发。

我可以提出的一个建议是使用 gem 'twitter-bootstrap-turbo' 来获取引导程序。这是[twitter-bootstrap-rails](https://github.com/davydotcom/twitter-bootstrap-rails)的一个分支，增加了 turbolinks 处理程序。

# iphone - 我们可以为 UITableview 的滚动条设置自定义图像吗？

> ID：12739801
> 
> 赞同：1
> 
> 时间：2012-10-05T05:04:36.020
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

我想为`UITableView`滚动条设置我的自定义图像。

为此我找到了这个链接：[WKVerticalScrollBar for iOS](http://www.cocoacontrols.com/platforms/ios/controls/wkverticalscrollbar)

但是实现起来似乎太复杂了。它只是`TableView`滚动条的图像。

有没有其他简单的方法可以做到这一点？

**更新 - 1**

我的 Tableview 只有这 2 个子视图

```
"<UIImageView: 0x6c2c9f0; frame = (0 778; 360 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x6c2ca60>>",
"<UIImageView: 0x6c06680; frame = (353 778; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x6c2be70>>" 
```

有了这个，我已经尝试了两个索引，但其中任何一个都不起作用

```
 tblvw.showsVerticalScrollIndicator = YES;
    NSLog(@"tblview subview : %@",tblvw.subviews);
    UIImageView *imgview = [tblvw.subviews objectAtIndex:0];
    imgview.image = [UIImage imageNamed:@"Slider-strip.png"]; 
```

制作后`tblvw.showsVerticalScrollIndicator = NO;` 我才知道我没有将第二个图像视图作为子视图而只有第一个图像视图。所以我尝试使用`[tblvw.subviews objectAtIndex:1];`但也无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:49:00.107

完美工作：

**编辑**：注意：最好的实现是拥有 **Vertical Image**。例如…………………………………………………………………………………………………………![在此处输入图像描述](../Images/b46cc5b8b8fada71756e8d9cf595d6fc.png)

```
 if([self.tableView.subviews count] > 2){
 UIImageView *scrollViewBarImgView = [self.tableView.subviews objectAtIndex:2];
 UIImage *imgBar = [UIImage imageNamed:@"image.png"]; //your image here
 [scrollViewBarImgView setImage:imgBar];
 }
 else{

   UIImageView *scrollViewBarImgView = [self.tableView.subviews objectAtIndex:1];
   UIImage *imgBar = [UIImage imageNamed:@"image.png"]; //your image here
   [scrollViewBarImgView setImage:imgBar];
 } 
```

# c# - 无法隐式转换类型'System.Collections.Generic.List ' 到 'System.Collections.Generic.IList

> ID：12739802
> 
> 赞同：0
> 
> 时间：2012-10-05T05:04:44.240
> 
> 标签：c#, entity-framework, linq-to-sql

我正在尝试使用“GROUP BY”im MVC

这是我的功能

```
 private readonly ICacheManager _cacheManager;

public virtual IList<ShippingByWeightRecord> GetAll()
        {
            string key = SHIPPINGBYWEIGHT_ALL_KEY;
            return _cacheManager.Get(key, () =>
            {

                var query = from sbw in _sbwRepository.Table
                            group sbw by new
                            {
                                sbw.ShippingMethodId,
                                sbw.From,
                                sbw.To,
                                sbw.ShippingChargeAmount,
                                sbw.RegionId,
                                sbw.ItemRangeId

                            }
                                into grouping
                                select new { grouping.Key,
                                             Id = grouping.Max(sbw => sbw.Id)
                                 };     

                 var records = query.ToList();
                return records;
            });
        } 
```

但是有错误。怎么做？？这是我的 sql 命令。

```
SELECT     MIN(Id) AS id, ShippingMethodId, [From], [To], ShippingChargeAmount, RegionId, ItemRangeId
FROM         ShippingByWeight
GROUP BY ShippingMethodId, [From], [To], ShippingChargeAmount, RegionId, ItemRangeId 
```

我想用 MVC 写它？你有什么主意吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:12:08.870

您需要创建`ShippingByWeightRecord`in 的实例`select`。应该：

```
var query = from sbw in _sbwRepository.Table
                        group sbw by new
                        {
                            sbw.ShippingMethodId,
                            sbw.From,
                            sbw.To,
                            sbw.ShippingChargeAmount,
                            sbw.RegionId,
                            sbw.ItemRangeId

                        }
                            into grouping
                            select new ShippingByWeightRecord {
                                    Id = grouping.Max(sbw => sbw.Id),
                                    ShippingMethodId = grouping.Key.ShippingMethodId,
                                    From = grouping.Key.From,
                                    To = grouping.Key.To,
                                    ShippingChargeAmount = grouping.Key.ShippingChargeAmount,
                                    RegionId = grouping.Key.RegionId,
                                    ItemRangeId = grouping.Key.ItemRangeId  
                             }; 
```

# ruby-on-rails - rails 保存 select_tag 值

> ID：12739810
> 
> 赞同：-1
> 
> 时间：2012-10-05T05:05:27.390
> 
> 标签：ruby-on-rails, html-select

我正在使用`select_tag`，当我更新所选值时未存储

当我更新 :name, :tag 值时获得第一个选项

编辑.html.erb

```
 <%= form_for(@name) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :lname%><br />
    <%= f.text_field :lname%>
  </div>

  <div class="field">
    <%= f.label :tag %><br />
    <%= f.select :tag, "<option>1</option><option>2</option><option>3</option><option>4</option>".html_safe %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

**解决方案**

```
<%= f.collection_select(:tag, [1,2], :to_i, :to_s, :prompt => 'Categories') %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:56:38.047

也许？

```
= f.select :tag, (1..4).to_a, :prompt => '---' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:09:41.540

尝试使用此链接中的选择标签

[选择标签](http://shiningthrough.co.uk/Select-helper-methods-in-Ruby-on-Rails)

```
<%= select_tag "tag", "<option>1</option><option>2</option>" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:09:55.377

尝试这个

```
<%= f.select "tag", "<option value="1">1</option><option value="2">2</option></select>".html_safe %> 
```

阅读[http://ashleyangell.com/2009/11/form-select-helper-in-ruby-on-rails/](http://ashleyangell.com/2009/11/form-select-helper-in-ruby-on-rails/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T06:51:23.597

**解决方案**

```
<%= f.collection_select(:tag, [1,2], :to_i, :to_s, :prompt => 'Categories') %> 
```

# c++ - 学习使用 Boost 共享指针，控制台输出正确吗？

> ID：12739811
> 
> 赞同：0
> 
> 时间：2012-10-05T05:05:32.343
> 
> 标签：c++, arrays, pointers, boost, shared-ptr

我有几个类：数组、形状、点。点是一种形状。

我创建了一个 ShapePtr 数组，并为第一个元素分配了一个点。当我打印数组的第一个元素时，它只显示一个奇怪的数字（我想是内存位置？）。这是正常的吗？有没有办法打印分配给该位置的点？还是Point已经被摧毁了？我的主要是这样的：

```
{   

// Typedef for a shared pointer to shape
typedef boost::shared_ptr<Shape> ShapePtr;

// a typedef for an array with shapes stored as shared pointers.
typedef Array<ShapePtr> ShapeArray;

ShapeArray my_ShapeArray;

ShapePtr my_Point (new Point(3.1459));

my_ShapeArray[0] = my_Point;

cout  << my_ShapeArray[0] << endl;

return 0;

} 
```

输出是（我对构造函数和析构函数有一些评论）：

> 数组构造函数调用（默认）
> 
> 形状构造函数调用（默认）
> 
> 点构造函数调用（默认）
> 
> 002DDA20
> 
> 点析构函数调用
> 
> 形状析构函数调用
> 
> 数组析构函数调用

我有点困惑，因为似乎在我打印点之后调用了析构函数，但不是打印点，它似乎只是打印内存地址。你能帮我理解吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:19:57.493

指针（大致）是一个内存位置，所以当你打印指针时，这就是你得到的。如果您希望该对象位于该内存位置，则可以通过在前面放置一个星号来取消引用它：

```
cout  << *my_ShapeArray[0] << endl; 
```

# bash - Bash：在执行时从命令回显

> ID：12739814
> 
> 赞同：1
> 
> 时间：2012-10-05T05:05:40.910
> 
> 标签：bash

我想在通过 bash 执行时查看脚本的整个输出（不仅仅是返回值），如下所示：

```
#!/bin/sh    
cmd="$(script.py $arg)" 
```

script.py 在执行时打印多行，但我无法在 bash 中看到它们。有没有办法将输出通过管道传输到标准输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:16:54.453

这将显示脚本运行时“生成”的每一行：

```
while read line; do echo $line; done < <(script.py $arg 2>&1) 
```

正如上面帖子中所建议的，它还将stderr重定向到stdout

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:10:54.673

也许它正在输出到标准错误。尝试这个：

```
#!/bin/sh    
cmd="$(script.py $arg 2>&1)" 
```

# google-tv - 在 GTV 设备 (Revue) 中模拟视频源？

> ID：12739815
> 
> 赞同：1
> 
> 时间：2012-10-05T05:06:01.890
> 
> 标签：google-tv

学校正在举办一个科学展览，我们将在其中展示一个 Google TV 应用程序，但问题是没有可连接的电缆线，并且 GTV 模拟器无法与 Anymote 协议进行通信（我们需要多屏）。

我们唯一的方法是至少将频道阵容模拟到真实设备（Revue）中，但有没有办法做到这一点？听说频道列表是通过 ContentsProvider 实现的，可以把 Emulated Channel List 推送到真机吗？我们不需要展示一个节目什么的，我们只需要获取频道列表并像模拟器一样更改它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:25:45.980

只是为了澄清这个答案的范围：

*   这不会播放任何内容，“电视信号”将是一个空白屏幕。
*   所有这一切都是为了正确填充内容提供者的频道队列，以便应用程序将看到一组“有效”的频道。

*   作为附带好处 - 这还将在“电视和电影”应用程序中显示当前的节目和电影列表，以用于演示目的。当然，当您选择播放频道时，上述规则适用，您会看到黑屏。

带着这些期望......这就是你的做法：

*   进入**系统设置**
*   选择**视频输入**
*   选择**手动添加设备**

此时您会看到一个窗口，上面写着“您应该看到上面播放的电视信号”。自然，由于您没有连接机顶盒，因此这将是一个黑色窗口。当系统要求您确认您看到电视信号正在播放时，选择**“下一步”**

*   在下一个屏幕上，您选择**“有线电视盒，卫星接收器”**选项的单选框，然后选择**下一步**
*   下一个屏幕为您提供您所在地区的卫星和有线电视提供商列表（取决于您的邮政编码，确保您之前设置了有效的邮政编码，或在设置->位置中进行更改）
*   选择一个可用的提供商——我在我所在地区最喜欢的是“Dish Networks”。他们有很多选择。
*   根据提供商的不同，下一个屏幕可能会让您选择“基本”或“完整”集成。鉴于此选择，选择**"basic"**。（完全集成实际上需要与机顶盒进行双向通信！）
*   在下一个标题为*“IR Blaster Setup”*的屏幕上，您配置了一个假机顶盒。例如，选择以下选项：

    *   设备类型：有线/IPTV
    *   制造商：通用仪器
    *   型号：DCT1000
    *   命令集：C0476（或选项中提供的任何内容）
*   接下来，您会看到一个屏幕，您可以在其中测试“频道向上/向下”，忽略并说**“下一步”**

完成设置 - 恭喜，您现在已经为您的 Google TV 配置了一个“假”机顶盒。

频道阵容内容提供者将返回您选择的提供者的频道信息。注意：可用服务和阵容的选择可能因地域而异。如果上述选择不适合您，请使用其他当地可用的服务提供商。唯一真正的关键是选择“基本”集成，此后Google TV 设备不会收到来自机顶盒的任何反馈，并且无法知道它是否真的连接到“真正的”机顶盒。

*额外功能*：如果您演示此功能，您可以简单地将 HDMI 输入连接到 DVD 播放器或任何其他设备（例如笔记本电脑 HDMI 输出）。这样，即使频道更改没有任何效果，您至少可以播放*一些演示视频。*在没有“实时”视频信号的地方演示 Google TV 时，我经常使用此设置。

# perl - 如何在保留 API 的同时弃用行为？

> ID：12739826
> 
> 赞同：0
> 
> 时间：2012-10-05T05:06:24.957
> 
> 标签：perl

我有一个 API，我想改变它的行为。我原来的方法`is_success`是指“绿灯”，但“红灯”也不例外，它仍然意味着灯工作正常。我现在`is_success`只想在有建议的情况下是假的，并且在我的 API 中添加了`is_green`和`is_red`（注意：还有状态“黄色”和“紫色”）以补充特定检查（目前黄色和紫色抛出异常，但是以后可能会得到状态检查）。

有什么好的方法可以让我从代码中发出行为正在改变的警告吗？还是变了？同时允许在用户知道的情况下关闭这些警告？（注：已经在变更日志中放了弃用通知）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:30:41.377

您可以使用 Perl 的词法警告类别。有一个`deprecated`类别，或者您可以将包/模块注册为警告类别。

```
{
    package My::Foo;
    use warnings;

    sub method {
        (@_ <= 2) or warnings::warnif('deprecated', 'invoking ->method with ... ')
    }
}

{
    package My::Bar;
    use warnings;
    use warnings::register;

    sub method {
        (@_ <= 2) or warnings::warnif('invoking ->method with ... ')
    }
}

{
    use warnings;
    My::Foo->method(1);
    My::Foo->method(1, 2);
    My::Bar->method(1, 2);
}

{
    no warnings 'deprecated';
    My::Foo->method(1, 2);
    no warnings 'My::Bar';
    My::Bar->method(1, 2);
} 
```

查看[警告](http://search.cpan.org/dist/perl/lib/warnings.pm)和[perllexwarn](http://search.cpan.org/dist/perl/pod/perllexwarn.pod#Reporting_Warnings_from_a_Module)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:15:21.537

是的，您可以使用警告命令。**它将显示警告，但也可以通过为 $SIG{' WARN** '}指定一个空子来捕获它们，这将阻止消息显示。

```
# warnings are thrown out with this BEGIN block in your code.
BEGIN {
  $SIG{'__WARN__'} = sub {  }
}

# prints the warning to STDOUT, if $SIG{'__WARN__'} is set to the default
warn "uh oh, this is deprecated!"; 
```

有关更多信息和其他示例，请参见 perdocs，[http](http://perldoc.perl.org/perllexwarn.html) ://perldoc.perl.org/functions/warn.html和[http://perldoc.perl.org/perllexwarn.html](http://perldoc.perl.org/functions/warn.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:47:04.873

我一直觉得[MIME::Head](http://p3rl.org/MIME%3a%3aHead#decode-FORCE-)使用的方法有用且有趣。

> 此方法已被弃用。完整原因请参见 MIME::Parser 中的“decode_headers”。如果您绝对必须使用它并且不喜欢该警告，请提供 FORCE：
> 
> “I_NEED_TO_FIX_THIS” 闭嘴做吧。不建议。仅提供给那些需要保持旧脚本正常运行的人。
> 
> “I_KNOW_WHAT_I_AM_DOING” 闭嘴做吧。不建议。提供给那些真正知道自己在做什么的人。

这个想法是，只能通过提供一个神奇的参数来抑制弃用警告，该参数记录了警告被抑制的原因。

# css - 在页面加载时更改文本框的颜色

> ID：12739838
> 
> 赞同：0
> 
> 时间：2012-10-05T05:08:17.250
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3

有没有办法改变模型中定义的文本框的颜色。颜色应该在页面加载时出现，而不是在点击提交按钮并且任何失败时出现。

我需要这个而不在视图中分配任何额外的类或 id。有没有这样的财产？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:26:45.223

您应该将此规则放在您的 css 文件中：

```
input[type=text][data-val-required]{color:red /* or any other color */} 
```

**注意：** IE7 和 IE8 仅在指定了 !DOCTYPE 时才支持属性选择器

更多信息[https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

# fluent-nhibernate - 流畅的 NHibernate API 文档

> ID：12739847
> 
> 赞同：0
> 
> 时间：2012-10-05T05:09:43.440
> 
> 标签：fluent-nhibernate, documentation

到目前为止，我掌握 Fluent NHibernate 的最大障碍是为我需要通过我找到的示例（博客文章、SO 问题等）工作的类找到命名空间。我四处寻找一个 CHM 或类似 MSDN 的网站，这样可以更容易地找到东西，但我发现是空的。我可以找到 NHibernate API 文档，但找不到 Fluent NHibernate API 文档。

任何人都可以确认我需要在构建源代码后生成自己的代码，或者将我指向我错过的某个地方吗？

我一直在使用 Reflector 来查找东西并且它可以工作，但它并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:38:40.993

我建议使用某种能够自动解析命名空间的 IDE（Visual Studio、Sharpdevelop 等），然后您只需复制粘贴示例并使用它。

有用的资源

*   [入门](https://github.com/jagregory/fluent-nhibernate/wiki/Getting-started)
*   [显示自动映射的示例项目](https://github.com/jagregory/fluent-nhibernate/tree/master/src/Examples.FirstAutomappedProject)

抽象的

```
namespace    | used for
-----------------------
.Cfg         | fluently configuring the NHibernate.Cfg.Configuration object
.Mapping     | contains classes used to create Fluent Mappings
.Automapping | all you need to automaticly create mappings for classes
.Conventions | Interfaces to define Conventions used for Auto and Fluent mappings 
```

# mysql - 如何以特定格式获取表格中的日期值？

> ID：12739848
> 
> 赞同：0
> 
> 时间：2012-10-05T05:09:42.773
> 
> 标签：mysql, c#-4.0, date, datetime

我的工具有一个问题。我正在使用一个名为日历的 MySQL 表。从这张表中，我正在获取一些日期值。日历表中日期的格式为 yyyy-mm-dd。但是在我的系统中有 dd-mmm-yy。在我的 c# 应用程序中，我从日历中获取日期，如果我在 c# 应用程序中显示日期意味着日期格式（2012-10-05）更改为系统格式（05-oct-12）。但我需要以 yyyy-mm-dd 格式显示。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:12:34.093

要以特定格式显示 DateTime，您可以在方法中指定格式，`.ToString()`例如：

```
DateTime dt = DateTime.Now; //your DateTime variable
Console.WriteLine(dt.ToString("yyyy-mm-ddd")); 
```

您可能会看到文章：[标准日期和时间格式字符串 - MSDN](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.110%29.aspx)

# c - 是什么导致错误“无法转换'unsigned char'”？

> ID：12739856
> 
> 赞同：-3
> 
> 时间：2012-10-05T05:10:09.463
> 
> 标签：c

我的函数将十六进制符号转换为 2 个字符的字符串，然后将其分解为 2 个 1 个字符的字符串。当我将结果字符串与常量字符串进行比较时，出现错误：`Cannot convert 'unsigned char' to 'char *' first_ascii_code = 0x30;`

编译器：C++ Builder 6

代码：

```
BYTE from_byte_to_ascii_codes(int input_byte);
// transformation hex into string with of 2 characters and then 
// its transformation into 2 hex bytes. compiler - C++ Builder 6

BYTE from_byte_to_ascii_codes(int input_byte)
{
BYTE broken_input_byte[] = "";
input_byte = 0x01;
itoa(input_byte, broken_input_byte, 16);
// now broken_input_byte[] = "01";
if (broken_input_byte[0] == "0") { // here is mistake   
//Cannot convert 'unsigned char'  to 'char *'
first_ascii_code = 0x30;
} 
```

我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:13:42.817

测试`broken_input_byte[0] == "0"`不正确。您可能想测试第一个字符是否是`'0'`char，因此您应该编写代码`broken_input_byte[0] == '0'`（假设`BYTE`，实现特定名称，是`typedef`-ed 到`char`）。

在 C 中，任何类似`foo == "string"`的测试肯定是错误的；这是一个[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，因为`"string"`实际上是一些常量字符串文字数据的*地址*，所以这样的测试会将指针`foo`与某个常量指针进行比较（甚至`"aa" == "aa"`可能是错误的，因为编译器可能会构建两个`"aa"`位于不同地址的常量字符串！）。顺便说一句，使用最近的 GCC 编译器，您会收到警告（使用 编译时`gcc -Wall`）。

您可能想使用[strcmp](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html)来比较以空字符结尾的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:12:28.190

`"0"`is a string not character in `C`while等效于in ，因此两者的类型不同，因此出现错误。`broken_input_byte[0]``BYTE``char``C`

如果要比较字符串`strcmp`是函数不是`==`运算符。

# cocos2d-x - 在 Cocos-2d-x 中滑动时改变 Slider 图片

> ID：12739859
> 
> 赞同：0
> 
> 时间：2012-10-05T05:10:32.073
> 
> 标签：cocos2d-x

我希望在 Cocos-2d-x 中使用一个滑块，当你滑动它时，应该会显示一个新的精灵图像，它显示滑块的值。我的意思是当我们增加滑块值时，这个图像的宽度会增加，反之亦然。

是否有任何内置功能。

# three.js - 在 Haxe 中，如何加载从 Blender 导出的 json 模型？

> ID：12739873
> 
> 赞同：0
> 
> 时间：2012-10-05T05:11:39.400
> 
> 标签：three.js, haxe

我最近开始使用 Haxe 和 Three.js。如何使用 JSONLoader 加载 3D 对象。我对 Haxe 的做事方式非常陌生，并且还没有完全了解外部事物。

我正在使用这个库来简化事情：

[https://github.com/rjanicek/three.js-haXe](https://github.com/rjanicek/three.js-haXe)

除了 JSONLoader 或任何加载器之外，大多数 Three.js 类都在 lib 中抽象。如何在 Haxe 中加载从 Blender 导出的 json 模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:16:56.327

好像我使用了错误的库:)

这是一个更好的抽象：

[https://github.com/labe-me/haxe-three.js](https://github.com/labe-me/haxe-three.js)

要加载 3D 模型，您可以这样做：

```
package co.za.anber;
import js.three.Three;
import js.Lib;

class Main 
{
    static private var scene:Scene;

    static function main() 
    {
        //Get the dimensions of the scene
        var w = Lib.window.innerWidth;
        var h = Lib.window.innerHeight;

        scene = new Scene();

        //add some light
        var pointLight = new PointLight(0xffffff, 1, 0);
        pointLight.position.set(10, 50, 130);
        scene.add(pointLight);
        //add a camera
        var camera = new PerspectiveCamera(70, w/h, 1, 1000);
        camera.position.z = 500;
        scene.add(camera);

        //setup renderer in the document
        var renderer = new WebGLRenderer(null);
        renderer.setSize(w, h);
        Lib.document.body.appendChild(renderer.domElement);

        //Load the Blender exported Mesh. 
        //This is where we load the Mesh and setup the onload handler. This was the part I wasn't so sure about.
        var loader:JSONLoader = new JSONLoader(true);
        //I don't like in-line functions. You need to make the returning function into a Dynamic type.
        var callbackModel:Dynamic  = function( geometry:Dynamic ){createScene(geometry); };
        loader.load("Suzanne.js", callbackModel);

        //Listen for mouse move. In-line function from somewhere else.
        var mouseX = 0, mouseY = 0;
        untyped Lib.document.addEventListener('mousemove', function(event){
            mouseX = (event.clientX - Lib.window.innerWidth/2);
            mouseY = (event.clientY - Lib.window.innerHeight/2);
        }, false);

        //Render the scene @60 frames per second. Inline function from somewhere else.
        var timer = new haxe.Timer(Math.round(1000/60));
        timer.run = function(){
            camera.position.x += (mouseX - camera.position.x) * 0.05;
            camera.position.y += (-mouseY - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
            renderer.render(scene, camera);
        }
    }

    /**
     * Onload complete handler. Here we can add our Mesh.
     * @param   geometry
     */
    static function createScene( geometry:Dynamic):Void{
        var mesh:Mesh = new Mesh( geometry, new MeshLambertMaterial( { color: 0x00FF00 } ) );
        //We scale it up to be visible!
        mesh.scale.set( 150.15, 150.5, 150.5 );
        scene.add( mesh );
    }

} 
```

希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:08:50.327

看看[这个](https://github.com/mrdoob/three.js/tree/master/utils/exporters/blender)，应该对你有帮助。

# iphone - 取消 MFMailComposeViewController 的 ActionSheet 剪辑

> ID：12739876
> 
> 赞同：1
> 
> 时间：2012-10-05T05:12:00.683
> 
> 标签：iphone, objective-c, ios, uiactionsheet, mfmailcomposeviewcontroller

我整天都在尝试解决这个问题，我将 mainWindow.xib 升级到了 4 英寸 iPhone 5 版本，并且我所有的 ActionSheets 在 4 英寸模拟器上都表现正常。但是，如果我取消在 3.5 英寸设备上以纵向模式撰写电子邮件，则操作表不会完全显示（取消按钮被隐藏）。

我感谢提供的任何帮助。

这是纵向问题的屏幕截图：

![一只忙碌的猫](../Images/a7b7fcb606b29ec678c8b78ffbbac8e3.png)

由于我的 mainWindow.xib 现在是 4 英寸版本，因此我使用以下代码来显示 3.5 英寸屏幕尺寸的操作表和反作用：

```
sheet = [[UIActionSheet alloc] initWithTitle:nil
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                  destructiveButtonTitle:nil
                                       otherButtonTitles:@"Share via iMessage/SMS", @"Share via E-Mail", @"Review App", nil];

            // This code is for the iPhone 5 portrait & landscape, 3.5" landscape, and iPad

            if ([[UIScreen mainScreen] applicationFrame].size.height == 548 | orientation == UIInterfaceOrientationLandscapeLeft | orientation == UIInterfaceOrientationLandscapeRight | UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
            {
                [sheet showInView:self.parentViewController.view];
            }

            // This code is for 3.5" portrait

            else
            {
                [sheet showInView:self.parentViewController.view];
                [sheet setFrame:CGRectMake(0, 220, 320, 320)];
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:03:09.890

找到解决方案；我不得不将我的 mainWindow.xib 大小更改为 None，并在我的应用程序委托中添加以下行：

```
self.window.frame = CGRectMake(0, 0, [[UIScreen mainScreen]bounds].size.width, [[UIScreen     mainScreen]bounds].size.height); 
```

# php - print_r($_REQUEST) 显示少量数据后未显示所有数据

> ID：12739877
> 
> 赞同：0
> 
> 时间：2012-10-05T05:12:00.810
> 
> 标签：php

`print_r($_REQUEST)`从提交表单的页面重定向后，未显示所有数据。在重定向页面中，它显示了一些数据，但不是全部。在本地主机中，所有请求的数据都显示正常，但在服务器中出现了问题。我创建了一个`php.ini`& 放入`max_execution_time = 160; post_max_size = 250M;`文件 & 上传到服务器。但仍然无法得到任何解决方案。

这是代码。实际上，在检查条件后会包含一些页面，然后在填写字段后提交表单。

```
include("configuration.php");
if(isset($_REQUEST["save_update"]) && $_REQUEST["save_update"]!="")
{
   include("quotation_save.php");
   header("location:http://mpsinfoservices.com/projects/topline/quotation.php?enquiry_id=".$_REQUEST["enquiry_id"]."&displaying_id=".$_REQUEST["displaying_id"]);
}
$enqid = $_REQUEST["enquiry_id"];
$displaying_id = $_REQUEST["displaying_id"];
$len_of_disp = strlen($displaying_id);
/*if(preg_match('/E/',$displaying_id))
{
  echo substr($displaying_id,0,6);
  echo "<br/>".substr($displaying_id,strlen(substr($displaying_id,0,6)));
  if(preg_match('/F/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
  $ch_from_find_str = 'F';
  $find_str = substr($displaying_id,0,7);
  $ch_from_find_str = substr($find_str,6,1);

}
if(preg_match('/PKG/',$displaying_id))
{
  $find_str = substr($displaying_id,0,9);
  echo $find_str;
}
*/
$sql_enquiry = mysql_query("SELECT * FROM `enquiry_master` WHERE `id`='".$enqid."' AND `displaying_id`='".$displaying_id."'");
$row_enquiry = mysql_fetch_assoc($sql_enquiry);
$sql_client_info = mysql_query("SELECT * FROM `client_info` WHERE `client_id`='".$row_enquiry['customer_id']."'");
$row_client_info = mysql_fetch_assoc($sql_client_info);
?>
<link type="text/css" href="css/cupertino/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
<link type="text/css" href="css/jquery.dataTables_themeroller.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="js/function.js"></script>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>

<link type="text/css" href="css/style.css" rel="stylesheet">

<style>
  .client_name
  {
    border:none;
  }
  .client_name_mouseover
  {
    border:1px solid #000;
  }

</style>
</head>

<body>
<?php include("includes/header.php"); ?>
    <div id="page-container">
        <?php
            include("includes/left_menu.php");
        ?>
        <div id="page_content" style="float:left;">
            <div style="margin-top:25px;">
            <div style="padding-top:10px;">
                <div style="color:#000;font-weight:bold;font-size:12px;font-family:verdana;">Client Details</div>
                <div>Name:- <input type="text" name="client_name" id="client_name" class="client_name" value="<?php echo $row_client_info["client_firstname"].$row_client_info["client_middlename"].$row_client_info["client_lastname"];?>" readonly="readonly"/></div>
                <div>Email:- <?php echo $row_client_info["client_email_id"]; ?>
            </div>
            <div>
            <?php
              $sql_quotation_insert_status = mysql_query("SELECT `status` FROM `quotation_insert_status` WHERE `enquiry_id`='".$enqid."'");
              if( mysql_num_rows($sql_quotation_insert_status)>0)
              {
              $res_quotation_insert_status = "insert";
              }
              else
              {

                $res_quotation_insert_status = "";
              }

            ?>
            <form name="quotation" class="quotationfrm" method="post" enctype="multipart/form-data" action="quotation.php">
            <input type="hidden" name="displaying_id" value="<?php echo $displaying_id; ?>"/>
            <input type="hidden" name="enquiry_id" value="<?php echo $enqid; ?>"/>

            <input type="hidden" name="save_update" <?php if($res_quotation_insert_status=="insert"){?>value="update" <?php } if($res_quotation_insert_status==""){?> value="save_quotation" <?php } ?>/>
            <?php
             if(preg_match('/E/',$displaying_id))
            {
              if(preg_match('/F/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/flight_quotation.php");
              }
              if(preg_match('/T/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/train_quotation.php");
              }
              if(preg_match('/H/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/hotel_quotation2.php");
              }
              if(preg_match('/CC/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/carrental_quotation.php");
              }
              if(preg_match('/I/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/insurance_quotation.php");
              }
              if(preg_match('/V/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/visa_quotation.php");
              }
              if(preg_match('/CR/',substr($displaying_id,strlen(substr($displaying_id,0,6)))))
              {
                include("quotation/cruise_quotation.php");
              }
            }
            if(preg_match('/PKG/',$displaying_id))
            {
               if(preg_match('/H/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/hotel_quotation2.php");
              }
              include("quotation/package_quotation.php");

              if(preg_match('/F/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/flight_quotation.php");
              }
               if(preg_match('/V/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/visa_quotation.php");
              }
              if(preg_match('/T/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/train_quotation.php");
              }

              if(preg_match('/CC/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/carrental_quotation.php");
              }
              if(preg_match('/I/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/insurance_quotation.php");
              }
              if(preg_match('/CR/',substr($displaying_id,strlen(substr($displaying_id,0,7)))))
              {
                include("quotation/cruise_quotation.php");
              }

            }
            ?>

            <input type="button" class="save_quotation" <?php if($res_quotation_insert_status=="insert"){?> value="Update" <?php } if($res_quotation_insert_status==""){ ?> value="Save The Quotation" <?php } ?> style="margin-top:20px;" <?php if($res_quotation_insert_status=="insert"){ ?> name="save" <?php } if($res_quotation_insert_status==""){ ?> name="update" <?php } ?>/>
            <?php if($res_quotation_insert_status=="insert"){?>
              <input type="button" class="sendQuotation" value="Send Quotation"/>
            <?php
            }
            ?>

            </form>
</div>
</div>
<script>
  $(function(){
    var no=0;

      $("form").each(function(){
        no++;
      });
      var suc = 0;

      $("#client_name").live("mouseover",function(){
          $(this).removeClass("client_name");
          $(this).addClass("client_name_mouseover");
      });
       $("#client_name").live("mouseout",function(){
          $(this).removeClass("client_name_mouseover");
          $(this).addClass("client_name");
      });
      $(".mail_to_client").live("click",function(){
            $.post("flight_quotation_mail.php?enquiry_id=<?php echo $enqid; ?>",$(".flight_quotation_frm").serialize(),function(data){
                if(data=="success")
                {
                  suc++;
                }
                if(no==suc)
                {
                  $.post("mail_to_client.php?enquiry_id=<?php echo $enqid; ?>");
                }
            });
            $.post("train_quotation_mail.php?enquiry_id=<?php echo $enqid; ?>",$(".train_quotation_frm").serialize(),function(data){
                if(data=="success")
                {
                  suc++;

                }
                if(no==suc)
                {
                  $.post("mail_to_client.php?enquiry_id=<?php echo $enqid; ?>");

                }
            });
            /*$.post("hotel_quotation_mail.php?enquiry_id=<?php echo $enqid; ?>",$(".hotel_quotation_frm").serialize(),function(data){
                if(data=="success")
                {
                  suc++;

                }
                if(no==suc)
                {
                  $.post("mail_to_client.php?enquiry_id=<?php echo $enqid; ?>");

                }
            });*/
        });
        $(".save_quotation").live("click",function(){
            $(".quotationfrm").submit();
        });

         $(".sendQuotation").live("click",function(){
         for(var instanceName in CKEDITOR.instances)
        CKEDITOR.instances[instanceName].updateElement();
                       var formData = $(".quotationfrm").serialize();

                               $.post("quotation_pdf.php",function(){
                                       window.open("quotation_pdf.php?"+formData);
                               });
  });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:40:55.640

在某些情况下，由于数据中的 html 元素只会呈现很少，请尝试检查该页面的查看源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:46:10.760

的内容和顺序`$_REQUEST`受`variables_order`指令中的影响`php.ini`（请参阅[核心 php.ini 指令的说明](http://www.php.net/manual/en/ini.core.php#ini.variables-order)）

因此，您的生产环境中的`variables-order`指令值可能与您的开发环境（本地主机）中的值不同。

例如，设置`variables_order = "GPCS"`以具有 G- `$_GET`、 P- `$_POST`、 C- `$_COOKIE`、 S-`$_SERVER`数组以及来自该数组的所有值`$_REQUEST`。

# c# - 如何动态解析类

> ID：12739883
> 
> 赞同：0
> 
> 时间：2012-10-05T05:12:36.963
> 
> 标签：c#, design-patterns, .net-4.0, mef

我必须为客户生成账单，但根据他们居住的地方，账单包含几乎相同的数据，但它们的格式却大不相同。我想了几种方法来处理这个问题，例如：

```
public void GenerateBill(User user)
{
if(user.Location == "blah blah")
{
  //Code specific to this location
}
else if (user.Location == "dah dah")
{
  //Code specific to this location
}
} 
```

上述方法似乎会变得很长，尤其是当不同位置的新用户不断出现时。我想过做类似的事情：

```
public void GenerateBillForUserInBlah();

public void GenerateBilForUserInDah(); 
```

但上述情况似乎也会失控，成为维护的噩梦。

我的另一个想法是使用一个接口，例如`IGenerateBill`，然后执行以下操作：

```
class UserInBlah : IGenerateBill
{
//Implement IGenerateBill members

} 
```

但在上面，我必须为每个用户创建一个类。我可能仍然需要执行上述操作，但我认为如果这`Managed Extension Framework`在这里有用的话。有替代解决方案吗？主要问题是直到运行时我才知道用户的位置，所以我必须在运行时根据用户的位置调用正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:18:40.663

当然，这种方法：

```
public interface IGenerateBill {} 
```

是一个比其他的更优雅和可扩展的。是的，MEF 可以在这里为您提供帮助。
MEF 有一个“部分元数据”的概念。如果你不熟悉它，你可以在[这里](http://blogs.microsoft.co.il/blogs/bnaya/archive/2010/01/20/mef-for-beginner-metadata-part-8.aspx)阅读它。

从概念上讲，MEF 元数据允许您编写`IGenerateBill`实现，例如包含国家代码或语言环境。稍后，在运行时，您可以通过以下方式检索正确的实现：

```
[BillGenerator("en-us")]
public class EnUsGenerateBill : IGenerateBill {}
[BillGenerator("ru-ru")]
public class RuRuGenerateBill : IGenerateBill {}
[BillGenerator("de-de")]
public class DeDeGenerateBill : IGenerateBill {}

container.GetExports<IGenerateBill, BillGeneratorMetadata>().Single(export => export.Metadata.Locale == "en-us"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:39:25.933

您可以在每个类中都有一个属性来返回您的位置名称

例如：

```
 interface IGenerateBill
        {
            void GenerateBill();
            string SupportedCountry { get; }
        }

        class UserInUs : IGenerateBill
        {
        //Implement IGenerateBill members

            public void GenerateBill()
            {
                //generate bill
            }

            public string SupportedCountry
            {
                get { return "US"; }
            }
        }
        class UserInRussia : IGenerateBill
        {
        //Implement IGenerateBill members

            public void GenerateBill()
            {
                //generate bill
            }

            public string SupportedCountry
            {
                get { return "Russia"; }
            }
        } 
```

客户端代码将是：

```
 string country = //Get from user in runtime
        var billGenerator = BillgeneratorFactory.ResolveAll().ToList().First
        (x => x.SupportedCountry == country);
        billGenerator.GenerateBill; 
```

# c# - 如何将新数据添加到现有 xml 文件和 xml 文件必须保留旧数据以及在 windows 窗体应用程序中使用 DATASET 新添加的数据

> ID：12739890
> 
> 赞同：0
> 
> 时间：2012-10-05T05:13:30.867
> 
> 标签：c#, xml, c#-4.0, dataset

我正在使用 Windows 窗体开发超市应用程序。在这个项目中，我有一个表单可以在填写该表单并单击提交按钮时添加新产品详细信息，新添加的产品详细信息应添加到用于存储所有产品详细信息的现有 xml 文件中，并且它必须保留旧产品详细信息还。我想使用数据集/数据表创建这个 xml 文件。我可能不得不添加“n”不。单个 XML 文件中的产品。在下面的 xml 文件中，“P2”是新添加的产品，xml 必须存储这个“P2”产品并保留旧数据，如“P1”产品

```
<?xml version="1.0" standalone="yes" ?> 
 - <SuperMarketStock>
 -   <ProductDetails>
      <ProductName>P1</ProductName> 
      <ProductId>PID 1</ProductId> 
      <Date>5/10/2012</Date> 
      <Quantity>10</Quantity> 
      <CostPrice>10.50</CostPrice> 
      <SellingPrice>12.00</SellingPrice> 
   <ProductDetails>
<ProductDetails>
    <ProductName>P2</ProductName> 
    <ProductId>PID2</ProductId> 
    <Date>06/10/2012</Date> 
    <Quantity>10</Quantity> 
    <CostPrice>50.00</CostPrice> 
    <SellingPrice>55.00</SellingPrice> 
</ProductDetails>
 ........
 ........
 .......
</SuperMarketStock> 
```

我使用下面的代码，但我无法得到我的要求请指导我......

```
private void btnAdminSubmit_Click(object sender, EventArgs e)
  {
    if(rbtnAddNew.Checked.Equals(true))
     {
    DataTable adminDT = new DataTable("ProductDetails");
    adminDT.Columns.Add("ProductName");
    adminDT.Columns.Add("ProductId");
    adminDT.Columns.Add("Date");
    adminDT.Columns.Add("Quantity");
    adminDT.Columns.Add("CostPrice");
    adminDT.Columns.Add("SellingPrice");
    adminDT.Rows.Add(tbxAdminProductName.Text, tbxAdminProductID.Text,   tbxAdminDate.Text, tbxAdminQuantity.Text, tbxAdminCostPrice.Text, tbxAdminSellingPrice.Text);
      DataSet adminDS = new DataSet("SuperMarketStock");
      adminDS.Tables.Add(adminDT);
      adminDS.WriteXml("stockDetails.xml");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:25:45.787

您可以用此代码替换

```
adminDT.Rows.Add(tbxAdminProductName.Text, tbxAdminProductID.Text,   tbxAdminDate.Text, tbxAdminQuantity.Text, tbxAdminCostPrice.Text, tbxAdminSellingPrice.Text); 
```

解决方案

```
var row = adminDT.NewRow();
row[0] =  tbxAdminProductName.Text;
row[1] =  tbxAdminProductID.Text;
row[2] =  tbxAdminDate.Text;
row[3] =  tbxAdminQuantity.Text;
row[4] =  tbxAdminCostPrice.Text;
row[5] =  tbxAdminSellingPrice.Text;

adminDT.Rows.Add(row);
adminDS.Tables.Add(adminDT);
adminDS.WriteXml("stockDetails.xml"); 
```

# python - Python 创建按钮和条目小部件

> ID：12739897
> 
> 赞同：0
> 
> 时间：2012-10-05T05:14:11.723
> 
> 标签：python, tkinter

我一直在谷歌上搜索这个问题，找不到任何好的网站......我想创建按钮和条目小部件，如下所示：

> [A] [B] [C] [D] [E] [F]
> 
> [在此输入小工具] [确定]

我的代码如下所示：

> 类控制器（框架）：
> 
> ```
> def __init__(self,parent):
>     Frame.__init__(self, parent)
>     self.parent = parent
>     self.button1 = Button(parent, text = "A")
>     self.button1.pack(side = TOP)
>     self.button1 = Button(parent, text = "B")
>     self.button1.pack(side = TOP)
>     self.button1 = Button(parent, text = "C")
>     self.button1.pack(side = TOP)
>     self.button1 = Button(parent, text = "D")
>     self.button1.pack(side = TOP)
>     self.button1 = Button(parent, text = "E")
>     self.button1.pack(side = TOP)
>     self.button1 = Button(parent, text = "F")
>     self.button1.pack(side = TOP)
> 
>     self.myentrybox = Entry(parent, width = 50)
>     self.myentrybox.pack(side = LEFT)
>     self.button = Button(parent, text = "OK")
>     self.button.pack(side = RIGHT ) 
> ```

这看起来与我正在尝试创建的完全不同..

任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:01:54.797

你可以把你的按钮放到*另一个* `Frame`.

* * *

**例子：**

```
from Tkinter import *
from ttk import *

class Controller(Frame):

    def __init__(self,parent):
        Frame.__init__(self, parent)

        buttons = Frame(parent)
        buttons.pack(side=TOP)
        for letter in 'ABCDEF':
            Button(buttons, text=letter).pack(side=LEFT)

        Entry(parent, width=50).pack(side=LEFT)
        Button(parent, text='OK').pack(side=RIGHT)

root = Tk()
app = Controller(root)
root.mainloop() 
```

**结果：**

![结果](../Images/b3df37bda83f086acd3de54183f4d0e9.png)

**编辑以回答您的评论**

如果您想坚持使用`for`循环来创建按钮，应用事件处理程序的一个好方法是使用 a创建`button`<=>的映射：`function to call``dict`

```
 handler = {'A': function_A,
               'B': function_FooBar,
               'C': function_SomeThing}

    for letter, func in ((k, handler[k]) for k in sorted(handler)):
        Button(buttons, text=letter, command=func, width=10).pack(side=LEFT) 
```

这样，它很容易扩展。如果你不关心按钮的顺序，你可以使用

```
for letter, func in handler.items(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:13:58.717

或者，您可以使用另一个布局管理器，例如使用[`grid()`](http://infohost.nmt.edu/tcc/help/pubs/tkinter/layout-mgt.html)更具表现力的方法。

```
def __init__(self,parent=None):
    Frame.__init__(self, parent)
    self.grid()
    # create buttons in row 1
    for i, c in enumerate("ABCDEF"):
        self.button = Button(parent, text=c)
        self.button.grid(row=1, column=i+1)
    # create textfield and 'ok' in row 2    
    self.myentrybox = Entry(parent, width = 50)
    self.myentrybox.grid(row=2, column=1, columnspan=6)
    self.button = Button(parent, text = "OK")
    self.button.grid(row=2, column=7) 
```

# javascript - jQuery Autocomplete 不适用于 onKeyUp 事件

> ID：12739898
> 
> 赞同：0
> 
> 时间：2012-10-05T05:14:15.677
> 
> 标签：javascript, jquery

我目前正在开发一个带有 jQ​​uery 自动完成功能的 UI。自动建议工作正常，但我无法使用键盘选择值。当我使用键盘选择一个值时，它会立即被取消选择。用鼠标选择就好了。我已将以下函数绑定到 onKeyUp 事件：

```
function setCreators(startDate, endDate) {
  $(document).ready(function() {
    $("#txtCreator").autocomplete(
      "getCampaignAuthors?stDate=" + startDate + "&enDate=" + endDate
    );
}); 
```

为什么我不能使用键盘选择值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:04:06.667

我找到了解决方案。就是那个 onKeyUp 事件绑定。我认为 jquery 自动完成使用相同的 onkeyUp 事件进行内部处理。所以我把触发事件改成了onfocus。现在它工作正常。

# c++ - 为什么构造函数 Zlib_init 在 Bjarne Stroustrup 的书中的类 Zlib_init 中保持私有

> ID：12739902
> 
> 赞同：3
> 
> 时间：2012-10-05T05:14:32.417
> 
> 标签：c++, private-constructor

在 Bjarne Stroustrup 的《C++ 编程语言》一书中，作者说：

> 有时，当您设计一个库时，有必要或者只是为了方便，发明一种具有构造函数和析构函数的类型，其唯一目的是初始化和清理。这种类型只能使用一次：分配一个静态对象，以便调用构造函数和析构函数。例如：
> 
> ```
>  class  Zlib_init
> {
>     Zlib_init() ; //get Zlib ready for use
>    ~Zlib_init()  ; //clean up after Zlib
> };
> Class Zlib
> {
>    static  Zlib_init   x;
>    /  /...
> }; 
> ```
> 
> 不幸的是，不能保证这样的对象在它第一次使用之前被初始化并且在它最后一次在由单独编译的单元组成的程序中使用之后被销毁。

为什么作者将构造函数和析构函数保留为私有成员？如果我们在由单独编译的单元组成的程序中使用它，为什么这种方法不起作用？它不需要定义成员`x`来调用构造函数`Zlib_init()`和析构函数`~Zlib_init()`吗？那么这个方法有什么用呢？它在本书的第 10.4.9 节中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T06:36:57.767

> **为什么作者将构造函数和析构函数保留为私有成员？**

构造函数和析构函数`private`似乎是一个错字。需要**定义**
类成员才能**使用**它们。为了定义静态成员，构造函数需要可访问。如果不是，链接器将抱怨未定义的引用。 `static`****`x`****

 ******[在线样品](http://ideone.com/95lMZ)**：

```
class  Zlib_init 
{    
   Zlib_init() ; //get Zlib ready for use  
  ~Zlib_init()  ; //clean up after Zlib 
   public:
     int j;
};
class Zlib 
{  
   public:  
   static  Zlib_init   x;    
}; 

Zlib_init Zlib::x;

int main()
{
    Zlib::x.j = 10;

    return 0;
} 
```

**输出：**

```
prog.cpp:3: error: ‘Zlib_init::Zlib_init()’ is private     
prog.cpp:14: error: within this context      
prog.cpp: In static member function ‘static void Zlib::__static_initialization_and_destruction_0(int, int)’:     
prog.cpp:4: error: ‘Zlib_init::~Zlib_init()’ is private     
prog.cpp:14: error: within this context 
```

> **如果我们在由单独编译的单元组成的程序中使用它，为什么这种方法不起作用？**

如果您通过[创建构造函数和析构函数`public`](http://ideone.com/WxsBw)或通过[`Zlib`类的朋友来`Zlib_init`](http://ideone.com/Dd6EW)修复上面提到的错字，代码仍然面临另一个问题。
这个问题通常被称为C++ 中的**静态初始化惨败**。

**好读：**

[[10.14] 什么是“静态初始化命令惨败”？](http://www.parashift.com/c++-faq/static-init-order.html)
[[10.17] 如何防止我的静态数据成员出现“静态初始化顺序失败”？](http://www.parashift.com/c++-faq/static-init-order-on-first-use-members.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:04:35.630

> 为什么作者将构造函数和析构函数保留为私有成员？

我只是猜测，但我认为作者将声明剥离到了传达他的想法所需的最低限度。尽管用 a`struct`代替 a`class`也可以，但在他书中的其他地方，作者在这种情况下使用了省略号 (...)。所以我不确定。

> 如果我们在由单独编译的单元组成的程序中使用它，为什么这种方法不起作用？

静态对象的构造函数会在之前运行`main`，所以如果你只`Zlib`在调用 from 的东西中使用`main`，一切都会很好。如果其他编译单元中的其他静态对象尝试`Zlib`在其构造函数中使用，问题就会开始。无法保证这两个构造函数的执行顺序，因此您可能会遇到一些尝试使用未初始化`Zlib`类的代码。****

# css - chrome 22 和 css（左负）可访问性问题

> ID：12739905
> 
> 赞同：1
> 
> 时间：2012-10-05T05:14:38.450
> 
> 标签：css, google-chrome, accessibility

我目前正在开发一个可访问的 AA 界面。通过将 Chrome 更新到版本 22，所有 CSS left:-99999999999999999999px 不再起作用。

该项目基于导航选项卡。

是否有另一种方法可以隐藏内容，同时保持屏幕阅读器可以访问而不会降低显示效果？

谢谢您的帮助。

**我找到了解决方案：left:-9999999px 是 Chrome 22 接受的最大负值** 对不起我不能发布答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:42:53.373

另一种选择是剪辑方法。将 class="hidden" 分配给要隐藏的元素：

```
.hidden { 
  clip: rect(1px, 1px, 1px, 1px);
  position: absolute !important;
} 
```

然后在要显示内容时删除该类。这里有关于这个和其他各种方法的更多细节：http: [//snook.ca/archives/html_and_css/hiding-content-for-accessibility](http://snook.ca/archives/html_and_css/hiding-content-for-accessibility)

# android - SQlite 数据库，其中多个表填充到不同的列表视图

> ID：12739906
> 
> 赞同：0
> 
> 时间：2012-10-05T05:14:39.490
> 
> 标签：android, sqlite, listview, datatable, populate

我正在制作应用程序。我的第一个活动显示了几个按钮。每个按钮都应该从数据库中的一个表中读取数据。我在 assets 文件夹中有数据库，并将 android 元数据和 _id 添加到数据库中。在我的主要活动中，我正在使用以下代码“导入”数据库：

```
public class DataBaseHelper extends SQLiteOpenHelper{

    private static final String DB_PATH = "/data/data/com.mypackage/databases/";

    private static final String DB_NAME = "dbname.sqlite";

    private SQLiteDatabase myDataBase;

    private final Context myContext;

    /**
      * Constructor
      * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
      * @param context
      */
    public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
    }   

    /**
      * Creates a empty database on the system and rewrites it with your own database.
      * */
    public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
    //do nothing - database already exist
    }else{

    //By calling this method and empty database will be created into the default system path
    //of your application so we are gonna be able to overwrite that database with our database.
    this.getReadableDatabase();

    try {

    copyDataBase();

    } catch (IOException e) {

    throw new Error("Error copying database");

    }
    }

    }

    /**
      * Check if the database already exist to avoid re-copying the file each time you open the application.
      * @return true if it exists, false if it doesn't
      */
    private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
    String myPath = DB_PATH + DB_NAME;
    checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

    //database does't exist yet.

    }

    if(checkDB != null){

    checkDB.close();

    }

    return checkDB != null ? true : false;
    }

    /**
      * Copies your database from your local assets-folder to the just created empty database in the
      * system folder, from where it can be accessed and handled.
      * This is done by transfering bytestream.
      * */
    private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
    myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

    }

    public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

    if(myDataBase != null)
    myDataBase.close();

    super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    } 
```

上面的代码足够了吗？该数据库是否可用于其他活动？

从我现在的主要活动中，我想单击示例按钮“植物”。这应该将我重定向到下一个活动并创建一个列表视图，其中包含数据库植物表中的所有植物名称。

我正在使用以下代码进行重定向：

```
Button plantsBtn = (Button) findViewById(R.id.button5);

    plantsBtn.setOnClickListener(new View.OnClickListener() {

                 public void onClick(View view) {
       //              Intent myIntent = new Intent(view.getContext(), plantslist.class);
                     startActivityForResult(myIntent, 0);
                 }

    }); 
```

这是我卡住的地方。我现在不知道如何只用名称填充列表视图。同样在单击列表视图中的植物名称后，我想转到另一个线性布局，该布局显示单击的特定植物的同一表中其他列的所有其他详细信息。

在数据库中，有许多表格，例如“汽车”，它们将遵循相同的原则，但我认为如果我能让它在一张桌子上工作，我就可以自己为其他桌子调整它。

我知道那里已经有很多教程，但我还没有真正找到一个让我理解或适应我的情况的教程。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:25:45.083

要使`myDataBase`所有活动都可用，您可以创建自己的扩展应用程序类`Application`，并在那里声明它。然后，您可以使用 getter 从您的活动中检索它。

关于你想用数据库中的数据完成什么，我认为你应该研究`Cursors`和`CursorAdapter`（如果你还没有）。这是一个很好的解释如何使用它：http `Loaders`: [//developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

你可以和你的朋友谷歌一起找到**很多教程:)**

# iphone - 如何在 iphone 应用程序中集成或获取多个 PDF

> ID：12739908
> 
> 赞同：1
> 
> 时间：2012-10-05T05:14:55.763
> 
> 标签：iphone, objective-c, ios, ios5, ios4

您好，我想在我的 iphone/ipad 应用程序中获取超过 500 个 pdf。我怎样才能做到这一点 ？有教程和例子吗？请帮忙

在此先感谢 Nivrit Gupta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:21:52.353

**这会帮助你**

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLDownload.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLDownload.html)

[在Objective C中提取pdf文本](https://stackoverflow.com/questions/2960195/extracting-pdf-text-in-objective-c)

[通过 iPhone 应用程序以字符串形式读取 PDF 文件](https://stackoverflow.com/questions/2362393/reading-pdf-files-as-string-through-iphone-application)

[https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:27:56.490

从服务器下载文件的最佳 API 是[ASIHTTPRequest](http://allseeing-i.com/)。

您可以使用 设置下载文件的数量`setMaxConcurrentOperationCount`。

# android - 在Android中将数据从活动发送到片段

> ID：12739909
> 
> 赞同：352
> 
> 时间：2012-10-05T05:15:03.560
> 
> 标签：android, android-fragments

我有两节课。首先是活动，其次是我有一些`EditText`. 在活动中，我有一个带有异步任务的子类，在方法中`doInBackground`我得到了一些结果，我将其保存到变量中。如何将这个变量从子类“我的活动”发送到这个片段？

* * *

## 回答 #1

> 赞同：729
> 
> 时间：2012-10-05T05:21:46.390

从 Activity 你发送数据的意图是：

```
Bundle bundle = new Bundle();
bundle.putString("edttext", "From Activity");
// set Fragmentclass Arguments
Fragmentclass fragobj = new Fragmentclass();
fragobj.setArguments(bundle); 
```

并在片段 onCreateView 方法中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    String strtext = getArguments().getString("edttext");    
    return inflater.inflate(R.layout.fragment, container, false);
} 
```

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2014-02-27T10:35:50.567

您还可以从片段访问活动数据：

**活动：**

```
public class MyActivity extends Activity {

    private String myString = "hello";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my);
        ...
    }

    public String getMyData() {
        return myString;
    }
} 
```

**分段：**

```
public class MyFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        MyActivity activity = (MyActivity) getActivity();
        String myDataFromActivity = activity.getMyData();
        return view;
    }
} 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2014-01-13T22:44:05.133

我在这里@stackoverflow.com 找到了很多答案，但这绝对是正确答案：

### “在 android 中将数据从活动发送到片段”。

**活动：**

```
 Bundle bundle = new Bundle();
        String myMessage = "Stackoverflow is cool!";
        bundle.putString("message", myMessage );
        FragmentClass fragInfo = new FragmentClass();
        fragInfo.setArguments(bundle);
        transaction.replace(R.id.fragment_single, fragInfo);
        transaction.commit(); 
```

**分段：**

读取片段中的值

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        Bundle bundle = this.getArguments();
        String myValue = bundle.getString("message");
        ...
        ...
        ...
        } 
```

要不就

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        String myValue = this.getArguments().getString("message");
        ...
        ...
        ...
        } 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-08-03T10:50:08.567

这个答案可能为时已晚。但它对未来的读者很有用。

我有一些标准。我已经编码从意图中选择文件。并将选定的文件传递给特定片段以进行进一步处理。我有许多具有文件选择功能的片段。当时，每次检查条件并获取片段并传递值是非常恶心的。所以，我决定使用接口传递值。

**步骤 1：**在 Main Activity 上创建界面。

```
 public interface SelectedBundle {
    void onBundleSelect(Bundle bundle);
   } 
```

**第 2 步：**在同一 Activity 上创建 SelectedBundle 引用

```
 SelectedBundle selectedBundle; 
```

**第 3 步：**在同一活动中创建方法

```
 public void setOnBundleSelected(SelectedBundle selectedBundle) {
       this.selectedBundle = selectedBundle;
   } 
```

**第 4 步：**需要初始化 SelectedBundle 引用，这些引用都是片段需要文件选择器功能。您将此代码放在片段`onCreateView(..)`方法中

```
 ((MainActivity)getActivity()).setOnBundleSelected(new MainActivity.SelectedBundle() {
          @Override
         public void onBundleSelect(Bundle bundle) {
            updateList(bundle);
        }
     }); 
```

**第 5 步：**我的情况，我需要将图像 Uri 从 HomeActivity 传递到片段。所以，我在 onActivityResult 方法上使用了这个功能。

来自 MainActivity 的 onActivityResult，使用接口将值传递给片段。

**注意：** 您的情况可能有所不同。您可以从 HomeActivity 的任何位置调用它。

```
 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent  data) {
       selectedBundle.onBundleSelect(bundle);
  } 
```

就这样。在 FragmentClass 上实现您需要的每个片段。你很棒。你已经完成了。哇...

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-11-22T07:37:50.423

最好和方便的方法是调用片段实例并在那时发送数据。 **默认情况下，每个片段都有实例方法**

> 例如：如果您的片段名称是**MyFragment**

所以你会像这样从活动中调用你的片段：

```
getSupportFragmentManager().beginTransaction().add(R.id.container, MyFragment.newInstance("data1","data2"),"MyFragment").commit(); 
```

***R.id.container 是我的 FrameLayout 的 id**

所以在**MyFragment.newInstance("data1","data2")**您可以将数据发送到片段，在您的片段中，您可以在**MyFragment newInstance(String param1, String param2)中获取此数据**

```
public static MyFragment newInstance(String param1, String param2) {
        MyFragment fragment = new MyFragment();
        Bundle args = new Bundle();
        args.putString(ARG_PARAM1, param1);
        args.putString(ARG_PARAM2, param2);
        fragment.setArguments(args);
        return fragment;
    } 
```

然后在片段的**onCreate**方法中，您将获得数据：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (getArguments() != null) {
            mParam1 = getArguments().getString(ARG_PARAM1);
            mParam2 = getArguments().getString(ARG_PARAM2);
        }
    } 
```

> 所以现在**mParam1 有 data1**而**mParam2 有 data2**
> 
> 现在您可以在片段中使用这个**mParam1**和**mParam2** 。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-12-26T20:21:24.700

使用 Fragments (F) 的基本思想是在 android 应用程序中创建可重用的自维持 UI 组件。这些片段包含在活动中，并且有从 A -> F 和 FA 创建通信路径方式的常见（最佳）方式，必须通过活动在 FF 之间进行通信，因为只有片段才会解耦和自我维持。

因此，从 A -> F 传递数据将与 ρяσѕρєя K 所解释的相同。除了那个答案之外，在 Activity 中创建 Fragments 之后，我们还可以将数据传递给 Fragments 中调用方法的 Fragment。

例如：

```
 ArticleFragment articleFrag = (ArticleFragment)
                    getSupportFragmentManager().findFragmentById(R.id.article_fragment);
    articleFrag.updateArticleView(position); 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2018-01-16T12:40:28.997

我想为初学者补充一点，这里两个最受好评的答案之间的区别是由片段的不同使用给出的。

如果您在具有要传递数据的 java 类中使用片段，则可以应用第一个答案来传递数据：

```
Bundle bundle = new Bundle();
bundle.putString("edttext", "From Activity");
Fragmentclass fragobj = new Fragmentclass();
fragobj.setArguments(bundle); 
```

但是，如果您使用例如 Android Studio 为选项卡式片段提供的默认代码，则此代码将不起作用。

即使您将默认 PlaceholderFragment 替换为 FragmentClasses，它也不起作用，即使您将 FragmentPagerAdapter 更正为新情况，为 getItem() 添加一个开关，为 getPageTitle() 添加另一个开关（如此处[所示](https://www.youtube.com/watch?v=00LLd7qr9sA&list=PL200JxfhYIgAfRaMIg7aIIjLrpM9EiAdl)）

*警告：上面提到的剪辑有代码错误，我稍后会在这里解释，但有助于了解如何从默认代码变为选项卡式片段的可编辑代码）！如果您考虑该剪辑中的 java 类和 xml 文件（代表初学者场景首次使用选项卡式片段），我的其余答案会更有意义。*

此页面上最受好评的答案不起作用的主要原因是，在选项卡式片段的默认代码中，片段在另一个 java 类中使用：FragmentPagerAdapter！

因此，为了发送数据，您很想在 MotherActivity 中创建一个包并将其传递给 FragmentPagerAdapter，使用答案 2。

只是那又错了。（*也许你可以这样做，但这只是一个并不真正需要的并发症*）。

我认为，正确/更简单的方法是使用答案 2 将数据直接传递给相关片段。是的，Activity 和 Fragment 之间会有紧密的耦合，但是对于选项卡式 Fragment，这是意料之中的。我什至建议您在 MotherActivity java 类中创建选项卡式片段（作为子类，因为它们永远不会在 MotherActivity 之外使用） - 这很容易，只需在 MotherActivity java 类中添加您需要的尽可能多的片段，如下所示：

```
 public static class Tab1 extends Fragment {

    public Tab1() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.your_layout_name_for_fragment_1, container, false);
        return rootView;
    }
}. 
```

因此，要将数据从 MotherActivity 传递到这样的 Fragment，您需要在 Mother 活动的 onCreate 上方创建私有字符串/捆绑包 - 您可以填充要传递给 Fragment 的数据，并通过在 onCreate 之后创建的方法（这里称为 getMyData()）。

```
public class MotherActivity extends Activity {

    private String out;
    private Bundle results;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mother_activity);

       // for example get a value from the previous activity
        Intent intent = getIntent();
        out = intent.getExtras().getString("Key");

    }

    public Bundle getMyData() {
        Bundle hm = new Bundle();
        hm.putString("val1",out);
        return hm;
    }
} 
```

然后在片段类中，使用 getMyData：

```
public static class Tab1 extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public Tab1() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.your_layout_name_for_fragment_1, container, false);
            TextView output = (TextView)rootView.findViewById(R.id.your_id_for_a_text_view_within_the_layout);

            MotherActivity activity = (MotherActivity)getActivity();

            Bundle results = activity.getMyData();
            String value1 = results.getString("val1");

            output.setText(value1);
            return rootView;
        }
    } 
```

如果您有数据库查询，我建议您在 MotherActivity 中执行它们（并将它们的结果作为附加到包内的键的字符串/整数传递，如上所示），就像在选项卡式片段中一样，您的语法将变得更加复杂（这成为 getActivity () 例如，getIntent 变为 getActivity().getIntent)，但您也可以选择随心所欲。

我对初学者的建议是专注于小步骤。首先，让您的意图是打开一个非常简单的选项卡式活动，而不传递任何数据。它有效吗？它会打开您期望的标签吗？如果不是，为什么？

从那开始，并通过应用[本剪辑](https://www.youtube.com/watch?v=00LLd7qr9sA&list=PL200JxfhYIgAfRaMIg7aIIjLrpM9EiAdl)中提供的解决方案，看看缺少什么。对于该特定剪辑，从不显示 mainactivity.xml。那肯定会让你感到困惑。但是，如果您注意，您会看到例如 xml 片段文件中的上下文 (tools:context) 是错误的。每个片段 XML 需要指向正确的片段类（或使用分隔符 $ 的子类）。

您还将看到，在主活动 java 类中，您需要添加 tabLayout.setupWithViewPager(mViewPager) - 就在 TabLayout tabLayout = (TabLayout) findViewById(R.id.tabs); 行之后 没有这一行，您的视图实际上并没有链接到片段的 XML 文件，但它只显示主要活动的 xml 文件。

除了主活动java 类中的行之外，在主活动XML 文件中，您需要更改选项卡以适合您的情况（例如添加或删除TabItems）。如果您在主活动 XML 中没有选项卡，那么您可能在最初创建它时没有选择正确的活动类型（新活动 - 选项卡式活动）。

请注意，在最后 3 段中，我谈到了视频！所以当我说主要活动 XML 时，它是视频中的主要活动 XML，在您的情况下是 MotherActivity XML 文件。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-10-05T05:21:35.363

如果您将片段（的具体子类）的引用传递给异步任务，则可以直接访问片段。

将片段引用传递到异步任务的一些方法：

*   如果您的异步任务是一个成熟的类 ( `class FooTask extends AsyncTask`)，则将您的片段传递给构造函数。
*   如果你的异步任务是一个内部类，只需在定义异步任务的范围内声明一个最终的 Fragment 变量，或者作为外部类的一个字段。您将能够从内部类访问它。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-06-22T10:42:07.937

从`Activity`您使用 Bundle 发送数据为：

```
Bundle bundle = new Bundle();
bundle.putString("data", "Data you want to send");

// Your fragment
MyFragment obj = new MyFragment();
obj.setArguments(bundle); 
```

并在`Fragment`onCreateView 方法中获取数据：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    String data = getArguments().getString("data");// data which sent from activity  
    return inflater.inflate(R.layout.myfragment, container, false);
} 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-02-12T14:34:53.920

有时您可以在活动中收到 Intent，您需要将信息传递给您的工作片段。
如果您需要启动片段，则给出的答案是可以的，但如果它仍在工作，`setArguments()`则不是很有用。
如果传递的信息会导致与您的 UI 交互，则会出现另一个问题。在那种情况下，你不能调用类似的东西，`myfragment.passData()`因为 android 会很快告诉只有创建视图的线程才能与之交互。

所以我的建议是使用接收器。这样，您可以从任何地方发送数据，包括活动，但工作将在片段的上下文中完成。

在你的片段中`onCreate()`：

```
protected DataReceiver dataReceiver;
public static final String REC_DATA = "REC_DATA";

@Override
public void onCreate(Bundle savedInstanceState) {

    data Receiver = new DataReceiver();
    intentFilter = new IntentFilter(REC_DATA);

    getActivity().registerReceiver(dataReceiver, intentFilter);
}

private class DataReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        int data= intent.getIntExtra("data", -1);

        // Do anything including interact with your UI
    }
} 
```

在你的活动中：

```
// somewhere
Intent retIntent = new Intent(RE_DATA);
retIntent.putExtra("data", myData);
sendBroadcast(retIntent); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-10-16T05:24:16.567

很老的帖子，我仍然敢于添加一些对我有帮助的解释。

从技术上讲，您可以直接在活动的片段中设置任何类型的成员。
那么为什么要捆绑呢？
原因很简单 - Bundle 提供了统一的处理方式：
-- 创建/打开片段
-- 重新配置（屏幕旋转） - 只需在 onSaveInstanceState() 中将初始/更新的 bundle 添加到 outState
-- 后台垃圾收集后的应用程序恢复（与重新配置一样）。

您可以（如果您喜欢实验）在简单的情况下创建一个解决方法，但 Bundle-approach 只是看不出一个片段和一千个片段之间的区别 - 它保持简单明了。
这就是为什么**@Elenasys**的答案是最优雅和通用的解决方案。
这就是为什么**@Martin**给出的答案有**陷阱**

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-07-26T06:32:09.587

如果`activity`需要`fragment`在初始化后执行某个操作，最简单的方法是`activity`调用`fragment`实例上的方法。在 中`fragment`，添加一个方法：

```
public class DemoFragment extends Fragment {
  public void doSomething(String param) {
      // do something in fragment
  }
} 
```

然后在 中`activity`，`fragment`使用`fragment`管理器访问并调用`method`：

```
public class MainActivity extends FragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DemoFragment fragmentDemo = (DemoFragment) 
            getSupportFragmentManager().findFragmentById(R.id.fragmentDemo);
        fragmentDemo.doSomething("some param");
    }
} 
```

然后可以通过调用 this`activity`直接与 通信。`fragment``method`

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-08-12T03:00:29.630

将数据从活动类发送到片段的更好方法是通过 setter 方法传递。像

```
FragmentClass fragmentClass = new FragmentClass();
fragmentClass.setMyList(mylist);
fragmentClass.setMyString(myString);
fragmentClass.setMyMap(myMap); 
```

并轻松地从课堂上获取这些数据。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-10-11T10:27:35.990

使用以下接口在活动和片段之间进行通信

```
public interface BundleListener {
    void update(Bundle bundle);
    Bundle getBundle();
} 
```

或使用以下通用侦听器进行使用接口的双向通信

```
 /**
 * Created by Qamar4P on 10/11/2017.
 */
public interface GenericConnector<T,E> {
    T getData();
    void updateData(E data);
    void connect(GenericConnector<T,E> connector);
} 
```

片段展示方法

```
public static void show(AppCompatActivity activity) {
        CustomValueDialogFragment dialog = new CustomValueDialogFragment();
        dialog.connector = (GenericConnector) activity;
        dialog.show(activity.getSupportFragmentManager(),"CustomValueDialogFragment");
    } 
```

你也可以将你的上下文投射`GenericConnector`到`onAttach(Context)`

在你的活动中

```
CustomValueDialogFragment.show(this); 
```

在你的片段中

```
...
@Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        connector.connect(new GenericConnector() {
            @Override
            public Object getData() {
                return null;
            }

            @Override
            public void updateData(Object data) {

            }

            @Override
            public void connect(GenericConnector connector) {

            }
        });
    }
...
    public static void show(AppCompatActivity activity, GenericConnector connector) {
            CustomValueDialogFragment dialog = new CustomValueDialogFragment();
            dialog.connector = connector;
            dialog.show(activity.getSupportFragmentManager(),"CustomValueDialogFragment");
        } 
```

注意：永远不要像`"".toString().toString().toString();`这样使用它。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-07-31T11:22:35.430

只是偶然发现了这个问题，而上面的大多数方法都可以。我只想补充一点，您可以使用[Event Bus Library](http://greenrobot.org/eventbus/)，尤其是在尚未创建组件（Activity 或 Fragment）的情况下，它适用于各种规模的 android 项目和许多用例。我个人在 Playstore 上的几个项目中使用过它。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-04-21T09:44:29.153

您可以在片段中创建公共静态方法，您将在其中获取该片段的静态引用，然后将数据传递给该函数并将该数据设置为同一方法中的参数，并通过片段的 oncreate 方法上的 getArgument 获取数据，并将该数据设置为本地变量。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-15T16:10:08.380

我在使用最新的导航架构组件时遇到了类似的问题。通过将包从我的调用活动传递到片段来尝试所有上述代码。

遵循 Android 最新发展趋势的最佳解决方案是使用 View Model（Android Jetpack 的一部分）。

在父 Activity 中创建并初始化一个 ViewModel 类，请注意这个 ViewModel 必须在 Activity 和 Fragment 之间共享。

现在，在片段的 onViewCreated() 中，初始化相同的 ViewModel 并设置观察者来监听 ViewModel 字段。

如果您需要，这是一个有用的、深入的教程。

[https://medium.com/mindorks/how-to-communicate-between-fragments-and-activity-using-viewmodel-ca733233a51c](https://medium.com/mindorks/how-to-communicate-between-fragments-and-activity-using-viewmodel-ca733233a51c)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-10T07:47:33.590

在片段和活动之间传递数据的最聪明的尝试和测试方法是创建一个变量，例如：

```
class StorageUtil {
  public static ArrayList<Employee> employees;
} 
```

然后将数据从片段传递到活动，我们在 onActivityCreated 方法中这样做：

```
//a field created in the sending fragment
ArrayList<Employee> employees;

@Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
         employees=new ArrayList();

       //java 7 and above syntax for arraylist else use employees=new ArrayList<Employee>() for java 6 and below

     //Adding first employee
        Employee employee=new Employee("1","Andrew","Sam","1984-04-10","Male","Ghanaian");
        employees.add(employee);

      //Adding second employee
       Employee employee=new Employee("1","Akuah","Morrison","1984-02-04","Female","Ghanaian");
         employees.add(employee);

        StorageUtil.employees=employees;
    } 
```

现在您可以从任何地方获取 StorageUtil.employees 的值。祝你好运！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-10-31T07:25:44.147

我的解决方案是在片段中编写一个静态方法：

```
public TheFragment setData(TheData data) {
    TheFragment tf = new TheFragment();
    tf.data = data;
    return tf;
} 
```

这样，我确信我需要的所有数据都在 Fragment 中，然后再进行任何其他可能需要使用它的操作。在我看来，它看起来更干净。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-12-11T17:00:34.173

您可以在片段中创建一个 setter 方法。然后在 Activity 中，当您引用片段时，调用 setter 方法并将来自您的 Activity 的数据传递给它

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-06-08T08:00:36.433

**科特林**版本：

在`Activity`：

```
val bundle = Bundle()
bundle.putBoolean("YourKey1", true)
bundle.putString("YourKey2", "YourString")

val fragment = YourFragment()
fragment.arguments = bundle
val fragmentTransaction = parentFragmentManager.beginTransaction()
fragmentTransaction.replace(R.id.your_container, fragment, fragment.toString())
fragmentTransaction.commit() 
```

在`Fragment`onCreate() 中：

```
var value1 = arguments?.getBoolean("YourKey1", default true/false)
var value2 = arguments?.getString("YourKey2", "Default String") 
```

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2018-04-28T07:15:25.850

在您的活动中声明静态变量

```
public static HashMap<String,ContactsModal> contactItems=new HashMap<String, ContactsModal>(); 
```

然后在你的片段中做如下

```
ActivityName.contactItems.put(Number,contactsModal); 
```

# python - 如何在列表中拆分字符串以在 Python 中创建键值对

> ID：12739911
> 
> 赞同：26
> 
> 时间：2012-10-05T05:15:28.727
> 
> 标签：python, string

我有一个看起来像这样的列表：

```
[ 'abc=lalalla', 'appa=kdkdkdkd', 'kkakaka=oeoeoeo'] 
```

我想用'='分割这个列表，这样左边的所有东西都将成为键，而在右边，值。

```
{ 
    'abc':'lalalla',
    'appa':'kdkdkdkd',
    'kkakaka':'oeoeo'
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-05T05:18:29.987

```
a = [ 'abc=lalalla', 'appa=kdkdkdkd', 'kkakaka=oeoeoeo']
d = dict(s.split('=') for s in a)
print d

Output:
{'kkakaka': 'oeoeoeo', 'abc': 'lalalla', 'appa': 'kdkdkdkd'} 
```

[http://codepad.org/bZ8lGuHE](http://codepad.org/bZ8lGuHE)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-03T21:18:56.187

此外，确保将拆分限制为 1，以防右侧包含“=”。

```
d = dict(s.split('=',1) for s in a) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-05T05:17:19.963

```
print dict([s.split("=") for s in my_list]) 
```

像这样

```
>>> my_list = [ 'abc=lalalla', 'appa=kdkdkdkd', 'kkakaka=oeoeoeo']
>>> print dict(s.split("=") for s in my_list) #thanks gribbler
{'kkakaka': 'oeoeoeo', 'abc': 'lalalla', 'appa': 'kdkdkdkd'} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-23T17:15:40.220

您可以将`map`对象直接提供给`dict`. 对于没有参数的内置函数，`map`应该表现出相似或更好的性能。引入参数时，您会看到性能下降：

```
from functools import partial

L = ['abc=lalalla', 'appa=kdkdkdkd', 'kkakaka=oeoeoeo']
L2 = ['abc lalalla', 'appa kdkdkdkd', 'kkakaka oeoeoeo']

n = 100000
L = L*n
L2 = L2*n

%timeit dict(map(partial(str.split, sep='='), L))  # 234 ms per loop
%timeit dict(s.split('=') for s in L)              # 164 ms per loop

%timeit dict(map(str.split, L2))                   # 141 ms per loop
%timeit dict(s.split() for s in L2)                # 144 ms per loop 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-25T10:51:02.150

使用[map](https://docs.python.org/3/library/functions.html#map)函数的示例

```
a = ["abc=lalalla", "appa=kdkdkdkd", "kkakaka=oeoeoeo"]
d = dict(map(lambda s: s.split('='), a)) 
```

# c# - 存储过程输出参数返回舍入值

> ID：12739914
> 
> 赞同：6
> 
> 时间：2012-10-05T05:15:49.613
> 
> 标签：c#, sql-server, sql-server-2008, stored-procedures, output-parameter

我正在使用输出参数从存储过程中返回值。

存储过程中的声明是：`@GrandTtl DECIMAL(19,3) OUT`

`SELECT`查询是：

```
SET @GrandTtl = (SELECT TOP 1 Bill_Amount 
                 FROM Tbl_Restaurant_Kitchen_Order_Bill_Details 
                 WHERE Bill_Number = @billno) 
```

例如，选择查询返回值，`4087.67`然后输出参数值`4088`从 SQL Server 返回到 C#。

下面是调用存储过程的 C# 代码：

```
SqlCommand cmd = new SqlCommand("Sp_RestCC_BillDetails", con);
cmd.CommandType = CommandType.StoredProcedure;

SqlParameter OutParam26 = cmd.Parameters.Add("@GrandTtl", SqlDbType.Decimal,19);

da = new SqlDataAdapter(cmd);

con.Open();
da.Fill(ds, "dtRestCC_Items");
con.Close();

objRCCBEL.GrandTtlOut = Convert.ToDecimal(cmd.Parameters["@GrandTtl"].Value); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T05:26:40.713

您需要将 C# 参数设置为

1.  输出——显然你已经做到了
2.  十进制类型，具有正确/兼容的比例

* * *

```
SqlParameter parm = new SqlParameter("@GrandTtl", SqlDbType.Decimal); 
parm.Precision = 19;
parm.Scale = 3;
parm.Direction = ParameterDirection.Output; 
cmd.Parameters.Add(parm); 
```

如果不设置比例，则默认为 0。参考：[SqlParameter.Scale 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx)

> > Value 解析到的小数位数。默认值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:25:51.523

根据[Microsoft](http://technet.microsoft.com/en-us/magazine/dd424925.aspx) decimal(p,s) 应该为您工作。money 和 smallmoneyt 类型只是小数的子集，精度为 4 位。所以我认为你的问题来自绑定到 C# 中的 OUT 参数的变量的类型。

# vb.net - 在 vb.net 中使用 AddDays 函数

> ID：12739917
> 
> 赞同：0
> 
> 时间：2012-10-05T05:16:34.147
> 
> 标签：vb.net, datetime

需要一些帮助来完成这个程序，一切都像我想要的那样工作和运行，但我需要显示一个输入框，允许用户输入他们想要存储在 service_date 中的发票的日期，然后这个日期将显示在列表框中我放在那里的所有其他物品。我知道我需要使用 AddDays 功能，但我不知道如何使用它，并且在线研究让我发现了 100 件其他不是这样的事情。

所以这是我的代码：

```
 Dim Customer As String
Dim Phone As String
Dim Hours As Double
Dim Parts As Double
Dim due_date As String
Dim service_date As String

Private Sub cmdInputBox_Click()

    Dim service_date = InputBox("Enter the date of service. (MM/DD?YYYY)")
    MsgBox("That's your date, " & service_date.ToString)
    Exit Sub
End Sub

Private Sub CustInfo_Click()

    Customer = txtCustomer.Text
    Phone = mtbPhone.Text

    Double.TryParse(txtHours.Text, Hours)
    Double.TryParse(txtParts.Text, Parts)

    If Customer.Length < 0 Then
        MessageBox.Show("Please enter customer information.")
    End If

    If Phone = "" Then
        MessageBox.Show("Please enter phone number.")
    End If

    If Not Double.TryParse(txtHours.Text, Hours) Then
        MessageBox.Show("Please enter labor hours.")
    End If

    If Not Double.TryParse(txtParts.Text, Parts) Then
        MessageBox.Show("Please enter parts and supplies.")
    End If

    ''Perform calculations

    Dim Total_Cost As Double
    Dim Labor_Cost As Double
    Dim Parts_Cost As Double

    Parts_Cost = (Parts * 0.5 * 2)
    Labor_Cost = (Hours * 35)
    Total_Cost = (Hours + Parts)

    Customer = txtCustomer.Text
    Phone = mtbPhone.Text

    lstBill.Items.Clear()
    lstBill.Items.Add("Customer: " & vbTab & Customer.ToUpper)
    lstBill.Items.Add("Phone: " & vbTab & vbTab & Phone)
    lstBill.Items.Add("Service Date: " & vbTab & due_date)
    lstBill.Items.Add("Invoice Date: " & vbTab & service_date)
    lstBill.Items.Add("Labor Cost: " & vbTab & FormatCurrency(Labor_Cost))
    lstBill.Items.Add("Parts Cost: " & vbTab & FormatCurrency(Parts_Cost))
    lstBill.Items.Add("Total Cost: " & vbTab & FormatCurrency(Total_Cost))
    Exit Sub
End Sub

Private Sub btnBill_Click(sender As System.Object, e As System.EventArgs) Handles btnBill.Click

    cmdInputBox_Click()

    CustInfo_Click()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:52:19.370

试试这个：

```
Dim strDate As String = InputBox("Enter date?", , "")
If strDate = "" Then Exit Sub
Dim dteDate As Date
Dim enUS As New System.Globalization.CultureInfo("en-US")
If Date.TryParseExact(strDate, "MM/dd/yyyy", enUS, Globalization.DateTimeStyles.AssumeLocal, dteDate) Then
  MsgBox("Date is " & dteDate.ToString)
End If 
```

# html - 如何让收藏夹图标在所有版本的 IE 中显示？

> ID：12739918
> 
> 赞同：0
> 
> 时间：2012-10-05T05:16:36.143
> 
> 标签：html, internet-explorer, icons, favicon

如何让收藏夹图标在所有版本的 IE 中显示？我在网站的根目录和子目录中插入了收藏图标。它将显示在 Chrome、Firefox 和 Safari 中。但是，它不会在任何版本的 IE 中显示（我已经测试了 IE 8 和 9，并使用兼容性功能更改了早期版本之间的环境）。我该如何进行这项工作？

我在我的 html 和标签中使用此代码：

```
<head>
     <link rel="shortcut icon" href="http://www.domain.com/icons/favicon.ico" type="image/x-icon">
     <link rel="icon" href="http://www.domain.com/icons/favicon.ico" type="image/x-icon">
</head> 
```

我有关于 Stack Overflow 以及外部资源的研究相关问题，他们同意我的 HTML 中使用的实现。我想知道问题可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:31:15.400

```
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" /> 
```

您的 favicon.ico 必须放在 head 标签大小之间：16x16 + 32x32，颜色：256colors 和 32 位，对于 Internet Explorer，它必须是透明的（外部白色部分不可见）

# android - 从 ASyncTask 或 Thread 运行服务？

> ID：12739925
> 
> 赞同：2
> 
> 时间：2012-10-05T05:17:58.047
> 
> 标签：android, multithreading, android-asynctask, android-service, android-lifecycle

我有一个 Android 应用程序，它使用服务在应用程序打开时不断更新视图中的文本视图。它使用向其发送意图的广播接收器对其进行更新。根据应用程序的性质，即使在应用程序退出/视图消失后，服务也需要继续运行。显然在这种情况下在主线程上运行服务是不明智的，因为这会占用太多并最终强制关闭并使应用程序崩溃。那么保持此服务运行的最佳方法是什么？异步任务？一个单独的线程？我该怎么做呢？我用这样的 ASyncTask 进行了尝试：

```
private class MyTask extends AsyncTask {

    @Override
    protected Object doInBackground(Object... objects) {
        return getActivity().getApplicationContext().startService(intent);
    }

    @Override
    protected void onCancelled() {
        getActivity().getApplicationContext().stopService(intent);
        super.onCancelled();
    }
} 
```

哦，是的，我正在使用 getActivity().getApplicationContext() 因为这是在片段内部。

所以这很好用；我想启动它时调用 MyTask.execute() ，当我想停止它时调用 MyTask.cancel(true) ，但我很确定我没有使用它应该如何使用它。我什至不知道我应该使用什么作为执行方法的参数（？？）。并且仅在其中启动服务似乎不是最好的主意，而仅使用线程肯定会更好吗？为了让它按照预期的方式工作，正确的方法是什么？顺便说一句，虽然这确实比在主线程上运行它的工作时间要长得多，但它仍然在几个小时后崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:25:41.350

您可以使用异步任务在 android 中执行后台任务。除非在特定情况下，否则不建议您自己处理线程。即使用户切换到另一个视图，异步任务也将在后台线程中运行，您也可以使用 onProgress() 更新定期获取回调。这里有一些关于异步任务的好教程，可以帮助您入门。请仔细阅读它们，因为异步任务将在 android 开发中为您提供很多帮助。

[http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

这里是官方文档： [https ://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T04:03:53.033

更新：我想我明白了。我在我认为我需要做的事情上还差得很远，显然对于我所拥有的那种服务，我只需要在前台运行它（所以使用 startForeground() 方法）。它现在似乎正在工作。对不起！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:23:14.767

您不应该在除事件线程之外的另一个线程中启动服务，而是如果某些代码需要更长的时间在服务中执行，则将该代码仅放在服务类中的另一个线程中。

要在主应用程序以外的其他进程中执行服务，您应该在服务的清单文件中定义进程标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:31:33.133

在后台线程上调用 startService 不会使服务在后台线程上运行。您应该正常调用 startService，而不使用 Async Task。在您的服务中，您应该创建一个新线程来完成这项工作。在这里你不应该使用 AsyncTask 因为这个服务可以无限期地运行，它不是一个定义的任务。

# javascript - 使用带有 ID 的数组将数据添加到高图表

> ID：12739926
> 
> 赞同：2
> 
> 时间：2012-10-05T05:18:18.097
> 
> 标签：javascript, highcharts, scatter-plot

我想将一个系列添加到一个高图散点图中，我在其中命名系列中的每个点。我通过以下方式创建图表：

```
var chart; // globally available

makeCharts = function(){

      chart = new Highcharts.Chart({
         chart: {
            renderTo: 'container1',
            type: 'scatter'
         },        
         series: [{
            name: 'a',
                data: [{                    
                    'id': 'point1',
                    'x': 1,
                    'y': 2
                }, {
                    'id': 'point2',
                    'x': 2,
                    'y': 5
                }]
            }]

      });
} 
```

我希望能够使用以下内容更新图表上的点：

```
chart.series[0].setData([{id:['point3', 'point4', 'point5'], y:[0,1,2], x:[1,2,3]}]) 
```

但这不正确。是否可以使用这种方法更新图表，其中每个点都有一个 ID？

编辑：

澄清一下，我希望能够直接传递数组，而不是使用`addPoint()`. 我可以遍历一个数组并使用`addPoint()`做这样的事情：

```
id:['point3', 'point4', 'point5'];
y:[0,1,2];
x:[1,2,3];

for (i=0; i<x.length; i++)
  {
  chart.series[0].addPoint({
    x:  x[[i],
    y:  y[i],
    id: id[i]
});

  } 
```

但是，这非常缓慢。使用以下方法添加数据要快得多：

```
chart.series[0].setData([[1,0],[2,1],[3,2]]); 
```

我发现我可以添加这样的数据：

```
 chart.series[0].setData([[1,0, 'point3'],[2,1, 'point4'],[3,2, 'point5']]); 
```

但是，当我选择要点时，我可以访问的唯一途径`id`是通过`this.point.config[2]`。使用以下方法，`chart.get('pointID')`由于我没有设置`ID`. 我希望能够仅使用`ID`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:04:54.007

广义上讲，有两种方法可以动态修改图表数据

1.  [**Series.setData()**](http://api.highcharts.com/highcharts#Series.setData%28%29)当你想用一些新数据完全替换现有数据时使用这种方法
2.  [**Series.addPoint()**](http://api.highcharts.com/highcharts#Series.addPoint%28%29)当您想要动态添加点的子集时，请使用此方法。这个方法不只是一次加一个点，如果你再仔细阅读文档你会发现这个方法接受一个布尔重绘参数，参数细节如下

> **redraw** : Boolean
> 默认为真。添加点后是否重绘图表。添加多个点时，强烈建议将 redraw 选项设置为 false，而是在添加点完成后显式调用 chart.redraw()。

在您的情况下，由于您想动态添加一些点，但保留现有点，您应该使用方法 2。但是您需要在循环中使用它，并将重绘设置为 false（因此解决了很慢），然后在循环之后，显式调用重绘方法

**代码**

```
var id = ['point3', 'point4', 'point5'],
    y = [0, 1, 2],
    x = [1, 2, 3];

for (var i = 0; i < x.length; i++) {
    chart.series[0].addPoint({
        x: x[i],
        y: y[i],
        id: id[i]
    },false);
}
chart.redraw(); 
```

[动态添加多个点 | Highcharts 和 Highstock @ jsFiddle](http://jsfiddle.net/jugal/4Skzq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:03:30.157

Try using [series.addPoint](http://api.highcharts.com/highcharts#object-Series).

```
chart.series[0].addPoint({
    x:  0,
    y:  0,
    id: 'anything'
}); 
```

But if you need to set data for series, use

```
chart.series[0].setData([{
    x:  0,
    y:  0,
    id: 'anything'
},{
    x:  2,
    y:  2,
    id: 'another'
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:49:08.767

只要您可以像这样传递数据：

```
chart.series[0].setData([[1,0, 'point3'],[2,1, 'point4'],[3,2, 'point5']]); 
```

（正如您在问题中所说），我可以建议您使用一些技巧。

我们需要在`applyOptions`Highcharts.Point 原型的方法中添加另一个语句。

```
if (typeof options[0] === 'number' && options[2] && typeof options[2] === 'string') this.id = options[2]; 
```

[在这里](http://jsfiddle.net/hEGbM/)你可以看到它的作用。

# mysql - 为什么我的 SQL LEFT JOIN 查询不起作用？

> ID：12739928
> 
> 赞同：1
> 
> 时间：2012-10-05T05:18:26.610
> 
> 标签：mysql, sql, select, left-join

当应该有一些结果时，它返回 0 行。

这是我第一次尝试使用 JOIN 但从我读过的内容来看，这看起来非常正确，对吧？

```
"SELECT pending.paymentid, pending.date, pending.ip, pending.payer, pending.type, pending.amount, pending.method, pending.institution, payment.number, _uploads_log.log_filename 
FROM pending 
LEFT JOIN _uploads_log 
ON pending.paymentid='".$_GET['vnum']."' 
AND _uploads_log.linkid = pending.paymentid" 
```

我需要从每个表中返回指定的值，其中`pending.paymentid`和`_uploads_log.log_filename`都等于`$_GET['vnum]`

这样做的正确方法是什么？为什么我没有得到任何结果？

如果比我更有经验的人能指出我正确的方向，我将非常感激。

**编辑**

对于`pending`主键是`paymentid`，对于主键`_uploads_log`是一个 col 调用并列`log_id`为`log_filename`索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T05:20:35.663

尝试这个

```
 SELECT  pending.paymentid, 
         pending.date, 
         pending.ip, 
         pending.payer, 
         pending.type, 
         pending.amount, 
         pending.method, 
         pending.institution, 
         payment.number, 
         _uploads_log.log_filename 
FROM     pending 
         LEFT JOIN _uploads_log 
              ON _uploads_log.linkid = pending.paymentid
WHERE   _uploads_log.log_filename = '" . $_GET['vnum']  . "' 
```

您当前的查询容易受到 SQL 注入的影响。请花时间阅读下面的文章。

[**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:27:16.823

该`ON`子句只应具有链接两个表的条​​件，特别是如果它是`LEFT JOIN`。该`WHERE`子句则具有实际条件。否则，如果没有相应的条目，您将一无所获`_uploads_log`。在我看来，它也更容易阅读。

作为另一句话。最好使用绑定参数来避免 SQL 注入。

# ios - iOS 应用内购买拒绝：缺少 IAP

> ID：12739931
> 
> 赞同：4
> 
> 时间：2012-10-05T05:18:36.233
> 
> 标签：ios, in-app-purchase

我已经提交了一个带有应用内购买的 iphone 应用但我的二进制文件被拒绝了，我收到了来自 Apple 的以下消息

来自苹果。缺少 IAP

我们无法完成对您应用的审核，因为您的一项或多项应用内购买尚未提交审核。

请务必采取行动并提交您的应用内购买并在 iTunes Connect 中上传新的二进制文件。在 iTunes Connect 开发人员指南中了解有关提交应用内购买以供审核的更多信息。

一旦您提交了应用内购买并上传了新的二进制文件，我们就可以继续您的审核。

我的问题是我应该创建一个新的二进制文件并上传它，还是我可以重新提交应用内购买被拒绝的二进制文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:08:25.873

看起来像一个旧帖子，但由于我自己面对它并让我搜索多个帖子以了解实际步骤，所以它变得更加详细。

首先，您不需要创建新的二进制文件，因为您只是忘记选择 In App purchase 进行审核。以下是如何执行此操作的步骤

在使应用程序“准备上传”之前，您需要在应用程序的详细信息页面中选择所有应用内购买。

在 iTunes Connect -> 单击您的应用程序 -> 单击编辑 -> 滚动到底部，您将看到 In App Purchase 链接，选择您想要作为应用程序提交流程一部分的 In Apps。确认后，将您的产品状态更改为“准备上传二进制文件”

如果您以某种方式忘记这样做，那么只有一种方法。这是拒绝然后重新执行我上面提到的过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T07:09:46.627

您错过了提交应用内购买以供审核。现在，您的每个应用内都必须具有“等待审核”的状态。您可以将您的二进制和相关应用内购买提交给苹果审核流程。您应该创建一个新的二进制文件并将其提交给应用商店审核流程。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-19T10:17:23.213

这是我的情况。所有信息都包含在对 Apple 的回复中。

```
Thanks very much for reviewing the app.

On IAP a few days before, 
our Product Manager did not know in-app purchase products subscription well . 
In order to get more free user, 
he sent three months subscription for free to new registered users
by adjusting member date on the server side.

After a lot of querying, 
we will use IAP App Store Promotions to get more free user, 
instead of changing the member date simply on the server side.

We have completed in-app purchases, 
and will upload a new binary in App Store Connect soon. 
```

### 订阅问题，不在 iOS 客户端，而是在服务器端。

* * *

我回答。过了一会儿，我在 App Store 的一个 iOS 产品中看到了一次“提交应用内购买”的地方。

我处理了，它消失了。很有意思。

[![00](../Images/aeac8a2c54c9f198d5c544b22ec0a0f7.png)](https://i.stack.imgur.com/zaPKa.png)

[![111](../Images/c32ace53852b62ca26b9d42931861c55.png)](https://i.stack.imgur.com/7pVuQ.png)

[![222](../Images/e618f8557b68597af83ec0e2251613ed.png)](https://i.stack.imgur.com/Uyy9P.png)

我没有在 App Store 的 iPad 产品中看到“提交应用内购买”的地方。

* * *

## 在 App Store Reviewing 问题上，诚实的沟通非常重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-20T04:12:33.837

是的，您应该创建一个新的二进制文件并上传它。

你应该按照苹果告诉你的去做。

* * *

这是我的情况。

首先，您应该向 IAP 产品添加元信息。

元信息是带有描述的图像。

**准备好。**

[![00](../Images/de8e0e76e661e0df67dec00418749cab.png)](https://i.stack.imgur.com/nkRbX.png)

然后苹果会在app版本页面添加**IAP Add Options**，待审核一段时间后。

[![111](../Images/0ff2ab25fa9b054b9e816eef167e6620.png)](https://i.stack.imgur.com/6VyfT.png)

[![222](../Images/9932b4c0652f95d5896eccfa37393c20.png)](https://i.stack.imgur.com/a2Atd.png)

[![333](../Images/247375c0fd415ec3832d60977f023a9b.png)](https://i.stack.imgur.com/rMcXu.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T02:17:05.353

来自 Apple 的六个步骤，[用于配置应用内购买的工作流程](https://help.apple.com/app-store-connect/#/devb57be10e7)

*   签署付费申请协议

*   在 App Store Connect 中配置应用内购买

我以为 In App Purchase 链接在这里，Ahsan.Amin 的意思是，iOS 版本 13.2

[![000](../Images/65f673a48282e08f47d3fb659866590f.png)](https://i.stack.imgur.com/OB7a2.png)

*   在 Xcode 中启用应用内购买

*   设计和创建您的应用内购买

*   测试应用内购买

*   在 App Store 上发布您的应用和应用内购买

# php - 使用php将文件上传到两个不同的服务器？

> ID：12739938
> 
> 赞同：0
> 
> 时间：2012-10-05T05:19:33.210
> 
> 标签：php, forms, file-upload

我想将两个不同的文件上传到位于两个不同位置的两个不同服务器。

我有一个图像文件要上传到托管 PHP 脚本的服务器上，另一个视频文件要上传到不在同一台服务器上的其他服务器上。

有没有可能这样做？如果可能的话，谁能解释我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:22:52.920

这对于 HTML 表单是不可能的 - 该`action`属性只允许指定单个 URL。

您在这里有几个选择：

*   使用 JavaScript 创建两个`<iframe>`s，在其中填充您要提交的数据`<form>`，然后调用`.submit()`每个表单。由于您提到这两个位置位于不同的服务器上，我将假设它们也位于不同的域上 - 因此您将在至少其中一个表单上遇到同源策略的问题。出于这个原因，以及很多用户在他们的浏览器中关闭了 JavaScript 的事实，我建议尽可能避免使用此选项。

*   让服务器上的 PHP 脚本获取`$_POST`数据并将包含该信息的 POST 请求发送到另一台服务器。例如，这可以通过 PHP 的[cURL 扩展](http://php.net/manual/en/book.curl.php)轻松完成。这可以按如下方式完成：

    ```
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://...');
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($_POST));
    curl_exec($ch);
    curl_close($ch); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:26:35.857

有很多方法可以解决这个问题。例如，您可以有 2 个表单，每个服务器一个，例如：

```
<form action="http://server1/upload_server1.php" method=post ...>
</form> 
```

和

```
<form action="http://server2/upload_server2.php" method=post ...>
</form> 
```

但这不会是用户友好的。

您还可以将所有文件上传到其中一台服务器，并使用例如 php ftp 库将您想要的文件传输到第二台服务器：

[http://php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php)

但是在服务器之间传输文件的时间可能会有开销。

当然，您会在这里找到更多答案。选一个你最喜欢的:)

# java - 需要从 Android 相机图片中获取标准输出尺寸

> ID：12739941
> 
> 赞同：1
> 
> 时间：2012-10-05T05:19:55.073
> 
> 标签：java, android, bitmap

我正在为 iPhone 和 Android 开发一个照相亭类型的应用程序。在 iPhone 上，我知道前置摄像头的准确分辨率，并且能够始终按预期输出 4 张迷你照片并从中制作照片条。但是对于 Android，我需要一种方法来调整我拍摄的 4 张图像的大小，每张图像的宽度为 48 像素，高度为 320 像素。这样，我可以构建与 iPhone 版本相同大小的照片条，并轻松地在网站上以一致的方式显示照片条（我不希望它们的大小因平台而异）。在 Android 上，即使 Android 相机不输出该纵横比，我如何才能调整到该分辨率 (48x320)？基本上，我想在 Android 上调整大小，并让它根据需要自动缩放，直到达到 48x320 并且它看起来不会被拉伸/扭曲......我' 可以通过丢失部分图像（如外部边框）来获得 48x320 图像。也许这只是一个直接的Java问题......

非常感谢！

# c# - win 8 应用程序中的 windows 身份验证

> ID：12739947
> 
> 赞同：3
> 
> 时间：2012-10-05T05:20:18.160
> 
> 标签：c#, xaml

我正在使用 c# 和 xaml 开发一个 Windows 8 应用程序。我的应用程序应该能够实现 Windows 身份验证，以便它可以允许登录用户启动应用程序。谁能帮助或给我一个代码片段来解决这个问题？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:54:56.360

在 Windows 8 应用程序中启用 Windows 身份验证

转到*Package.appxmanifest*文件。

转到*功能*选项卡。检查页面上的*企业认证*功能。

**使用 Windows.System.UserProfile**包含命名空间 ； 例如使用配置文件用户名： *txtUserName.Text = await UserInformation.GetFirstNameAsync();*

您将通过这种方式获取 Windows 身份验证用户的详细信息。希望这对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:45:14.400

你不能那样做。Windows 8“沉浸式”应用程序是沙盒的，无法访问 Windows 自己的用户管理。在任何情况下，用户密码都经过哈希处理（单向转换），即使您有权访问 SAM 文件，也无法读回原始密码。

如果您想要用户的 Windows 密码，您必须事先询问他们，但我保证没有（智能）用户会自愿同意这一点，如果您确实提交，您的应用程序可能会在 Windows 应用商店被拒绝它。

# asp.net-mvc - 如何从数据库中检索数据并在 mvc 的下拉列表中显示

> ID：12739948
> 
> 赞同：1
> 
> 时间：2012-10-05T05:20:22.397
> 
> 标签：asp.net-mvc

我想从数据库中检索数据并显示在下拉列表中。我使用了模型，所以我也可以从模型中获取。但它没有正确检索。如果在数据库中 4 个条目意味着它显示 4 个下拉按钮，但在下拉列表中没有值。谁能帮我解决这个问题？

我的代码在视图中

```
 <div class="editor-label">
    <%: Html.Label("Basic Qualification")%>
    </div>
    <div class="editor-field">

    <div id="basic-qualification-container1" style="margin-bottom:4px;" class="basic-qualification-container left">
           <% if (ViewData["BasicQualificationDegrees"]!=null){ %>
           <% for (int i=0; i < Model.CandidateQualifications.Count();i++) {%>

                        <%: Html.DropDownList("BasicQualificationDegree1", new SelectList((IEnumerable<Dial4Jobz.Models.Degree>)ViewData["CandidateBasicQualifications"], "Id", "Name", (IEnumerable<int>)ViewData["BasicQualificationDegrees"]), new { @class = "qualification" })%> 
                        <%: Html.TextBox("BasicQualificationSpecialization1", "", new { @title = "Enter basic qualification degree", @class="specialization" })%> 
                <%} %>  
            <%} else { %>
                <select id="BasicQualificationDegree1" name="BasicQualificationDegrees"></select>
            <%} %>
         </div>
         <div class="left">               
         <input type="button" id="btnAddBasicQualification" value="Add" />
         <input type="button" id="btnDelBasicQualification" value="Remove" />
         </div>
         </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:28:56.857

根据你的问题，

```
 <% for (int i=0; i < Model.CandidateQualifications.Count();i++) {%> 
```

这是什么？你为什么要计算viewdata？

**代码** <% if (ViewData["BasicQualificationDegrees"]!=null){ %>

```
 <% var containerId = "basic-qualification-container" + i.ToString(); %>
                      <div id="<%: containerId %>" style="margin-bottom:4px;" class="basic-qualification-container left">
                          <%: Html.DropDownList("BasicQualificationDegree" + i.ToString(), new SelectList((IEnumerable<Dial4Jobz.Models.Degree>)ViewData["CandidateBasicQualifications"], "Id", "Name", basicQualifications.ElementAt(i-1).DegreeId), new { @class = "qualification" })%> 
                           <%: Html.TextBox("BasicQualificationSpecialization" + i.ToString(), basicQualifications.ElementAt(i-1).Specialization, new { @title = "Enter basic qualification degree", @class = "specialization" })%> 
                       </div>
                 <% } %>  
             <% } else { %>
                    <div id="basic-qualification-container1" style="margin-bottom:4px;" class="basic-qualification-container left">
                        <%: Html.DropDownList("BasicQualificationDegree1", new SelectList((IEnumerable<Dial4Jobz.Models.Degree>)ViewData["CandidateBasicQualifications"], "Id", "Name"), new { @class = "qualification" })%> 
                        <%: Html.TextBox("BasicQualificationSpecialization1", "", new { @title = "Enter basic qualification degree", @class = "specialization" })%> 
                    </div> 
```

希望能帮助到你！。

# python - 获取 twitter 流 api 时如何在龙卷风中重新启动 ioloop？

> ID：12739951
> 
> 赞同：2
> 
> 时间：2012-10-05T05:20:31.710
> 
> 标签：python, twitter, tornado

我正在使用 TweetStream (https://github.com/joshmarshall/TweetStream)，这是一个基于龙卷风的推特流媒体模块来监控流 API。

如果想更改跟踪的单词，我想知道如何重新启动提取过程。

我当前的解决方案（不完全是解决方案）给了​​我一些错误。

```
stream = tweetstream.TweetStream(configuration,ioloop=main_io_loop)

stream.fetch("/1.1/statuses/filter.json?track="+tornado.escape.url_escape(words), callback=callback)

def check_words():
    global words
    with open('words.txt') as file:
        newwords = file.read()
        if words != newwords:
            words = newwords
        try:
            print newwords
            stream.fetch("/1.1/statuses/filter.json?track="+tornado.escape.url_escape(words), callback=callback)
        except:
            pass
        file.close()

interval_ms = 1000*10
scheduler = tornado.ioloop.PeriodicCallback(check_words,interval_ms,io_loop = main_io_loop)
scheduler.start()
main_io_loop.start() 
```

这是我得到的错误

```
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 305, in wrapper
    callback(*args)
  File "/home/user/PycharmProjects/observrenv/src/tweetstream/tweetstream.py", line 155, in on_connect
    self._twitter_stream.read_until("\r\n\r\n", self.on_headers)
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 151, in read_until
    self._set_read_callback(callback)
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 369, in _set_read_callback
    assert not self._read_callback, "Already reading"
AssertionError: Already reading
ERROR:root:Exception in callback <tornado.stack_context._StackContextWrapper object at 0x2415cb0>
Traceback (most recent call last):
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/ioloop.py", line 421, in _run_callback
    callback()
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 305, in wrapper
    callback(*args)
  File "/home/user/PycharmProjects/observrenv/src/tweetstream/tweetstream.py", line 155, in on_connect
    self._twitter_stream.read_until("\r\n\r\n", self.on_headers)
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 151, in read_until
    self._set_read_callback(callback)
  File "/home/user/PycharmProjects/observrenv/local/lib/python2.7/site-packages/tornado/iostream.py", line 369, in _set_read_callback
    assert not self._read_callback, "Already reading"
AssertionError: Already reading 
```

通过在调用 check_words 时再次启动 ioloop，我取得了更好的结果（不是最好的）。

```
stream = tweetstream.TweetStream(configuration,ioloop=main_io_loop)

stream.fetch("/1.1/statuses/filter.json?track="+tornado.escape.url_escape(words), callback=callback)

def check_words():
    global words, stream
    with open('words.txt') as file:
        newwords = file.read()
    if words != newwords:
        words = newwords
        print newwords
        try:
            stream = tweetstream.TweetStream(configuration,ioloop=main_io_loop)
            stream.fetch("/1.1/statuses/filter.json?track="+tornado.escape.url_escape(words), callback=callback)
            interval_ms = 1000*10
            scheduler = tornado.ioloop.PeriodicCallback(check_words,interval_ms,io_loop = main_io_loop)
            scheduler.start()
            main_io_loop.start()
        except:
            pass
        file.close()

interval_ms = 1000*10
scheduler = tornado.ioloop.PeriodicCallback(check_words,interval_ms,io_loop = main_io_loop)
scheduler.start()
main_io_loop.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:57:19.630

正如一位推特员工所说[，](https://dev.twitter.com/discussions/921#comment-3478)建议做我已经在做的事情（但以更温和的方式）。如果您的查询条件发生变化，只需偶尔重新连接一次。否则，只需保持连接打开。监视 twitter 可能发送给您的错误或您可能被禁止的错误也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:55:46.017

看起来，您缺少 Streaming API 的主要思想。与它的连接永久打开。

```
stream = tweetstream.TweetStream(configuration,ioloop=main_io_loop)

#What you are doing in callback? 
stream.fetch("/1.1/statuses/filter.json?track="+tornado.escape.url_escape(words), callback=callback)

def check_words():
    #I guess, don't do it at all. 
    #global words
    #with open('words.txt') as file:
    #    newwords = file.read()
    #    if words != newwords:
    #        words = newwords
    #    try:
    #        #Don't open new stream here
    #        print newwords
    #    except:
    #        pass
    #    file.close()
    pass

interval_ms = 1000*10
scheduler = tornado.ioloop.PeriodicCallback(check_words,interval_ms,io_loop = main_io_loop)
scheduler.start()
main_io_loop.start() 
```

通过分析你的代码，我认为你只需要在回调中使用新单词就可以了。

# shell - Shell 编程文件搜索和追加

> ID：12739959
> 
> 赞同：0
> 
> 时间：2012-10-05T05:21:07.280
> 
> 标签：shell, search

我正在尝试编写一个 shell 程序，它将搜索我的当前目录（例如，我的包含 C 代码的文件夹），读取关键字“printf”或“fprintf”的所有文件，如果不是，则将包含语句附加到文件中t 已经完成了。

我已经尝试编写搜索部分（目前，它所做的只是搜索文件并打印匹配文件的列表），但它不起作用。下面是我的代码。我究竟做错了什么？

![代码](../Images/bea80e516a106283041de7aeb82781ef.png)

编辑：新代码。

```
#!/bin/sh
#processes files ending in .c and appends statements if necessary

#search for files that meet criteria
for file in $( find . -type f )
do
    echo $file
    if grep -q printf "$file"
    then
        echo "File $file contains command"
    fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:25:22.147

要在子 shell 中执行命令，您需要`$( command )`. 注意`$`括号前面的。

您不需要将文件列表存储在临时变量中，您可以直接使用

```
for file in $( find . ) ; do
    echo "$file"
done 
```

与

```
find . -type f | grep somestring 
```

您*不是*在搜索文件**内容**，而是在搜索文件**名**（在我的示例中，所有文件**名**都包含“somestring”）

要 grep 文件的内容：

```
for file in $( find . -type f ) ; do
  if  grep -q printf "$file" ; then
    echo "File $file contains printf"
  fi
done 
```

请注意，如果您匹配`printf`它也将匹配`fprintf`（因为它包含`printf`）

如果您只想搜索以`.c`您结尾的文件，可以使用该`-name`选项

```
find . -name "*.c" -type f 
```

使用`-type f`仅列出文件的选项。

无论如何检查您`grep`是否`-r`可以选择递归搜索

```
grep -r --include "*.c" printf . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:35:12.140

你可以用 做这种事情`sed -i`，但我觉得那很恶心。`ed`相反，使用( `sed`is for 流似乎是合理的，因此当您不使用流时`ed`使用它是有意义的)。`ed`

```
#!/bin/sh

for i in *.c; do
    grep -Fq '#include <stdio.h>' $i && continue
    grep -Fq printf $i && ed -s $i << EOF > /dev/null
1
i
#include <stdio.h>
.
w
EOF
done 
```

# java - Java 数组打印星号

> ID：12739960
> 
> 赞同：3
> 
> 时间：2012-10-05T05:21:14.347
> 
> 标签：java, arrays

我知道这只是一个简单的java数组问题，但我不知道该怎么做。我想做的是这样的：

学生分数图
John 3    ***** ****
Mark 2 **
James 1 *

我想到的是这样的数组：

```
String[][] students = { { "John", "Mark", "James" }, { "3", "2", "1" } }; 
```

如何在不在数组中添加另一组变量的情况下打印折线图？我希望它只根据分数显示星号（*）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:24:01.477

像这样？

```
int gradeAsInt = Integer.parseInt (students [1][n]);
for (int i = 0; i < gradeAsInt; ++i) System.out.print ("*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:40:48.590

您可以执行以下操作

```
 String[][] students = { { "John", "Mark", "James" }, { "3", "2", "1" } };
    for (int i = 0; i < students[0].length; i++) {
        StringBuilder asterix = new StringBuilder();
        for (int acnt = 0; acnt < Integer.parseInt(students[1][i]); acnt++)
            asterix.append("*");
        System.out.printf("%s\t%s\t%s", students[0][i], students[1][i],asterix.toString());
        System.out.println();
    } 
```

输出

```
John    3   ***
Mark    2   **
James   1   * 
```

# objective-c - 配置为使用 30 分钟间隔时，UIDatePicker 设置不正确的时间

> ID：12739962
> 
> 赞同：4
> 
> 时间：2012-10-05T05:21:16.903
> 
> 标签：objective-c, ios, nsdate, uidatepicker

我有一个`UIDatePicker`只需要 30 分钟间隔的时间。On`viewDidLoad`我想将当前时间精确到最接近的半小时。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T07:32:32.267

用于`NSDateComponents`获取和操作日期的小时和分钟。我是这样做的：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) //Need to pass all this so we can get the day right later
                                           fromDate:[NSDate date]];
[components setCalendar:calendar]; //even though you got the components from a calendar, you have to manually set the calendar anyways, I don't know why but it doesn't work otherwise
NSInteger hour = components.hour;
NSInteger minute = components.minute;

//my rounding logic is maybe off a minute or so
if (minute > 45)
{
    minute = 0;
    hour += 1;
}
else if (minute > 15)
{
    minute = 30;
}
else
{
    minute = 0;
}

//Now we set the componentns to our rounded values
components.hour = hour;
components.minute = minute;

// Now we get the date back from our modified date components.
NSDate *toNearestHalfHour = [components date];
self.datePicker.date = toNearestHalfHour; 
```

希望这可以帮助！

# android - 仅包含文本的 Android ActionBar 项

> ID：12739967
> 
> 赞同：18
> 
> 时间：2012-10-05T05:21:45.353
> 
> 标签：android

我想在只有文本的操作栏中放置一个项目。我正在使用 ActionBarSherlock。我怎样才能做到这一点。一种是用文本定义图标。我不想那样做。是否可以从我的字符串资源中获取文本项？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T05:52:35.137

只是不定义

```
android:icon 
```

该项目的 menu.xml 中的字段。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-31T08:52:17.520

刚刚想通了，确保添加 android:showAsAction="always"

```
<item 
    android:id="@+id/menu_item"
    android:showAsAction="always"
    android:title="@string/menu_title" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-11T22:37:52.480

为了将来参考，我发现必须在命名空间和命名空间中定义`showAsAction`属性，以提供与不同Android版本的兼容性。因此，您的 menu.xml 文件应如下所示：`http://schemas.android.com/apk/res/android``http://schemas.android.com/apk/res-auto`

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res-auto"
      xmlns:tools="http://schemas.android.com/tools"
      tools:context="net.taptools.android.sportshistory.PlayerProfileActivity" >
<item android:id="@+id/action_settings"
    android:title="Statistics"
    app:showAsAction="always"
    android:showAsAction="always"/>
</menu> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-08T17:17:45.500

如果你希望它是一个按钮，你可以创建一个菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res-auto"
      xmlns:tools="http://schemas.android.com/tools"
      tools:context="net.taptools.android.sportshistory.PlayerProfileActivity" >
<item android:id="@+id/action_settings"
    android:title="Statistics"
    app:showAsAction="always"
    android:showAsAction="always"/>
</menu> 
```

但如果你只想要一个`TextView`你可以使用：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
    TextView tv = new TextView(this);
            tv.setText(getString(R.string.matchmacking)+"  ");
            tv.setTextColor(getResources().getColor(R.color.WHITE));
            tv.setOnClickListener(this);
            tv.setPadding(5, 0, 5, 0);
            tv.setTypeface(null, Typeface.BOLD);
            tv.setTextSize(14);
            menu.add(0, FILTER_ID, 1, R.string.matchmacking).setActionView(tv).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
} 
```

这只是做一个`TextView`.

# templates - SilverStripe3：模板中的多行注释

> ID：12739970
> 
> 赞同：0
> 
> 时间：2012-10-05T05:21:53.343
> 
> 标签：templates, comments, multiline, silverstripe

在 SilverStripe 3 中，如何在模板文件中添加多行注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:24:27.533

可以使用单行注释（或将发送到浏览器但隐藏不显示`<%-- my comment --%>`的html方式。）`<!-- my comment -->`

据我所知，silverstripe 模板中没有多行注释。一个丑陋的解决方法是`<% if false %>`，像这样：

```
<% if false %>
    some
    comment
    text
    here
<% end_if %> 
```

# java - 巨大的哈希表排序 - 值的数量 - 553685

> ID：12739971
> 
> 赞同：0
> 
> 时间：2012-10-05T05:21:56.743
> 
> 标签：java, sorting, hashtable

我创建了一个哈希图来存储多个文件中出现的单词，例如 10,000 个文本文件。然后我想从 hashmap 中对它们进行排序并打印前 10 个单词。Hashmap 定义为，

```
 Hashtable <String, Integer> problem1Counter = new Hashtable<String, Integer> (); 
```

当我将文件保持在 1000 左右时，我能够使用这样的简单排序获得前十个单词，

```
String[] keysProblem1 = (String[]) problem1Counter.keySet().toArray(new String[0]);
  Integer [] valuesProblem1 =  (Integer[])problem1Counter.values().toArray(new Integer[problem1Counter.size()]); 
```

诠释 kk = 0; 字符串 ii = null;

```
 for (int jj = 0; jj < valuesProblem1.length ; jj++){
        for (int bb = 0; bb < valuesProblem1.length; bb++){
            if(valuesProblem1[jj] < valuesProblem1[bb]){
            kk = valuesProblem1[jj];
            ii = keysProblem1[jj];
            valuesProblem1[jj] = valuesProblem1[bb];
            keysProblem1[jj] = keysProblem1[bb];
            valuesProblem1 [bb] = kk;
            keysProblem1 [bb] = ii;}}} 
```

因此，当 hashtable 的值超过 553685 时，上述方法不起作用。那么任何人都可以建议并展示一种更好的方法来对它们进行排序吗？我是 java 的新手，但曾在 actionscript 中工作过，所以我有点舒服。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T05:50:31.617

当您分开并尝试使每个索引处的事物保持连接时，您的问题就开始`keys`了`values`。相反，让它们保持耦合，并对`Map.Entry`java 给你的对象进行排序。

我不确定这是否编译，但它应该给你一个开始。

```
// HashMap and Hashtable are very similar, but I generally use HashMap.
HashMap<String, Integer> answers = ...

// Get the Key/Value pairs into a list so we can sort them.
List<Map.Entry<String, Integer>> listOfAnswers =
    new ArrayList<Map.Entry<String, Integer>>(answers.entrySet());

// Our comparator defines how to sort our Key/Value pairs.  We sort by the
// highest value, and don't worry about the key.
java.util.Collections.sort(listOfAnswers,
    new Comparator<Map.Entry<String, Integer>>() {
        public int compare(
                Map.Entry<String, Integer> o1,
                Map.Entry<String, Integer> o2) {
            return o2.getValue() - o1.getValue();
        }
    });

// The list is now sorted.
System.out.println( String.format("Top 3:\n%s: %d\n%s: %d\n%s: %d", + 
        listOfAnswers.get(0).getKey(), listOfAnswers.get(0).getValue(), 
        listOfAnswers.get(1).getKey(), listOfAnswers.get(1).getValue(), 
        listOfAnswers.get(2).getKey(), listOfAnswers.get(2).getValue())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T05:57:48.127

为了更好地进行排序，我会这样做：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
    HashMap<String, Integer> counter = new HashMap<String, Integer>();

    // [... Code to populate hashtable goes here ...]
    // 

    // Extract the map as a list
    List<Map.Entry<String, Integer>> entries = new ArrayList<Map.Entry<String, Integer>>(counter.entrySet());

    // Sort the list of entries.
    Collections.sort(entries, new Comparator<Map.Entry<String, Integer>>() {
        @Override
        public int compare(Entry<String, Integer> first, Entry<String, Integer> second) {
        // This will give a *positive* value if first freq < second freq, zero if they're equal, negative if first > second.
        // The result is a highest frequency first sort.
        return second.getValue() - first.getValue();
        }
    });

    // And display the results
    for (Map.Entry<String, Integer> entry : entries.subList(0, 10))
        System.out.println(String.format("%s: %d", entry.getKey(), entry.getValue()));
    }

} 
```

**编辑解释为什么这样做**

您的原始算法看起来像[选择排序](http://en.wikipedia.org/wiki/Selection_sort)的变体，它是一个 O(n^2) 算法。你的变种也做了很多额外的交换，所以很慢。

作为 O(n^2)，如果将问题大小乘以 10，则运行时间通常需要 100 倍。对 50 万个元素进行排序需要进行 2500 亿次比较，其中许多会导致交换。

Collections#sort 中的内置排序算法是[Merge Sort](http://en.wikipedia.org/wiki/Mergesort)的闪电般快速的变体，它在 O(n.log(n)) 时间内运行。这意味着每次将问题大小乘以 10，只需要大约 30 倍的时间。对 50 万个元素进行排序只需要进行大约 1000 万次比较。

这就是为什么有经验的开发人员会建议您尽可能使用库函数。编写自己的排序算法对学习很有帮助，但要实现一个与库中的算法一样快速和灵活的算法需要做很多工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T05:46:13.677

*   创建一个实现 Comparable 的内部类 Word
*   覆盖 public int compareTo(Word w) 以使其使用出现次数
*   创建一个 HashMap 大小的单词数组
*   遍历 HashMap 填充数组
*   在数组上调用 Arrays.sort

或者，由于您只需要前 10 名，因此您可以遍历您的单词并在进行过程中维护前 10 名列表。

# facebook-graph-api - 使用 Facebook 应用获取用户的隐私列表

> ID：12739972
> 
> 赞同：0
> 
> 时间：2012-10-05T05:22:03.343
> 
> 标签：facebook-graph-api, facebook-fql

谁能建议我如何通过 facebook-graph-api 或 FQL 获取用户的隐私列表？我需要使用我的应用程序在用户的 Facebook 墙上投票问题，让他可以选择限制 UI 上问题的可见性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:01:11.983

[您可以使用以下 FQL 查询 [ 1](https://developers.facebook.com/docs/reference/fql/privacy_setting) ]检索用户在您的应用中发布的帖子的默认可见性设置：

```
SELECT name, value, description, allow, deny, networks, friends FROM privacy_setting WHERE name = "default_stream_privacy" 
```

某些对象（当然是专辑，可能是时间轴帖子？[未记录]...）允许您在创建时指定可见性设置，前提是可见性设置不超出默认可见性设置的范围。

可以使用 FQL 查询 [ [2](https://developers.facebook.com/docs/reference/fql/privacy) ] 检索特定对象（一旦创建）的隐私设置：

```
SELECT value, description FROM privacy WHERE id = 10151177771869615 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:02:36.173

> 谁能建议我如何通过 facebook-graph-api 或 FQL 获取用户的隐私列表？

您的意思是他们为墙贴等设置的默认隐私设置？

做不到。

> 我需要使用我的应用程序在用户的 Facebook 墙上投票问题，让他可以选择限制 UI 上问题的可见性。

用户自己可以限制您的应用将代表他们发布的任何内容的可见性，在首次连接到您的应用时在身份验证对话框中，然后在他们的帐户设置中。

在发布新问题时，应用程序无法使用任何参数来即时设置隐私选项。

您可以在您的应用程序设置中将*默认活动隐私设置为**只有我*- 但是，如前所述，用户可以随时覆盖它。

# php - PHPExcel_IOFactory::createWriter 导致错误行为

> ID：12739973
> 
> 赞同：4
> 
> 时间：2012-10-05T05:22:04.903
> 
> 标签：php, phpexcel

创建 PHPExcel 程序后，最后一步是保存工作表，为此，我想应用这些规则以便在 Excel 2007 中生成文件：

```
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="workbook1.xlsx"');
header('Cache-Control: max-age=0');
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('php://output'); 
```

而不是获取 Excel2007 文件，任何类型的浏览器的输出都类似于：

> 07:31:12 创建新的 PHPExcel 对象 07:31:12 设置属性 07:31:12 添加一些数据 07:31:12 重命名工作表 07:31:12 写入 Excel2007 格式 PKæ;È< —![[Content_Types] .xml”MNÃ0…÷=…å-JÜ²@%í,Â*Q`ìIcÕ±-{úw{&I ˆE j7±"û½oüg÷œ%”NKë”ü‰Ï¦£by‰]*y„Hª† F¦Üp4SùØH¤ß¸Aªµ\¸ï„òÁa†ŸŽXñJD£-dÄÙHì .....

我尝试了各种浏览器，但得到了相同的结果。另一方面，如果我用下面的这些行保存文件，它工作正常：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); 
$objWriter->save('/usr/local/myWorkbooks/workbook1.xlsx'); 
```

知道为什么它不能通过我的浏览器工作吗？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:27:04.943

如果您将输出流式传输到 php://output，则不得将其他任何内容回显到该输出流。你清楚地呼应了这些台词：

```
07:31:12 Create new PHPExcel object 
07:31:12 Set properties 
07:31:12 Add some data 
07:31:12 Rename sheet 
07:31:12 Write to Excel2007 format 
```

在 Excel 文件本身之前输出

删除那些回声线

这是标准的 PHP 行为，过去在这里已经回答了数千次的问题： echoes go to php://output.... 我很惊讶您没有收到“标头已发送”错误以及

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-18T15:47:53.287

您必须在保存之前清理输出缓冲区并关闭缓冲使用`ob_end_clean()`。改为这样做：

```
 $objWriter =  PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');

    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename="workbook1.xlsx"');
    header('Cache-Control: max-age=0');

    ob_end_clean();
    $objWriter->save('php://output');
    exit; 
```

# c# - 将鼠标点击事件添加到面板

> ID：12739979
> 
> 赞同：3
> 
> 时间：2012-10-05T05:22:42.030
> 
> 标签：c#, asp.net, panel, mouseclick-event

我想将`mouseclick`事件分配给`asp.net panel`：

```
protected void Page_Load(object sender, EventArgs e)
{
    Panel p = new Panel();
    p.Click += new EventHandler(b_Click);//but, this doesn't compiles correctly
}
protected void b_Click(object sender, EventArgs e) 
{
     //C#code
} 
```

有没有办法将点击事件添加到面板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T06:39:08.133

以下是您可以执行的操作，以使您的面板可点击并在服务器端处理事件。

在您的网络表单中放置面板

```
<asp:Panel runat="server" ClientIDMode="Static" ID="clickMe">
    Click here
</asp:Panel> 
```

将 jQuery 脚本库添加到您的页面。

```
<script src="http://code.jquery.com/jquery.min.js" language="javascript"
        type="text/javascript"></script> 
```

定义以下客户端事件处理程序

```
$(document).ready(function() {
    $("#clickMe").click(function () {
        __doPostBack('clickMe', '');
    });
}); 
```

在服务器端处理事件。

```
protected void Page_PreRender(object sender, EventArgs e)
{
    this.Page.ClientScript.GetPostBackEventReference(clickMe, "");
}

protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Form["__EVENTTARGET"] == "clickMe")
    {
        ClickMeOnClick();
    }
} 
```

PreRender 事件处理程序中的代码用于 asp.net 框架在客户端呈现 __doPostBack 函数。如果您的页面包含导致自动回发的控件，则不需要此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:15:41.257

jQuery 1.7 的 Mouseclick 事件：

```
$('#placeholderID').on('click', '#panelID', function(e){ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T08:03:03.297

如果您想要更简单的解决方案，请在面板结束标记之前放置一个按钮，制作，设置 css 样式以覆盖整个面板和 opacity:0，调整 z-index 以不覆盖您的其他元素，然后使用您的 onclick 方法在后面的代码中。

例子：

CSS：

```
btn-panel{
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    opacity: 0;
    z-index: -1;
} 
```

ASP：

```
<asp:Panel ID="myPanel" runat="server" >

            //all your other elements here...
            <asp:Button ID="Button1" runat="server" Text="" CssClass="btn-panel"
                OnClick="YourButton_Click" />
</asp:Panel> 
```

后面的代码：

```
protected void YourButton_Click(object sender, EventArgs e)
    {
       // Your Code Here...
    } 
```

你去吧，没有 javascript 也没有 jquery 来做魔术！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-01T15:39:31.473

将面板更改`asp:Panel`为`asp:LinkButton`或将面板包装在 LinkBut​​ton 中。这也可以防止`OnClick`与子控件单击发生冲突，例如`asp:CheckBox`.

# php - 如果 MySql row(field) 有任何文本输出

> ID：12739982
> 
> 赞同：0
> 
> 时间：2012-10-05T05:23:17.657
> 
> 标签：php, mysql

我不知道在我的代码的第一行中放什么。如果我的字段中有任何形式的文本，我希望它输出`<p> say hi! </p>`我会在我的第一行代码中输入什么来实现这一点？如果有文本，这将是真实的，如果没有文本，它将被忽略。

```
<?php if ($row['userid'] == What do i put here? ): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

我知道如何使用数值而不是文本来做到这一点。所以我卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:27:37.610

你可以做

```
<?php if ($row['userid'] != "" ): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:30:07.003

你可以这样做：

```
<?php if ($row['userid']): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:29:58.783

正如 aljx0409 回答的那样，你也可以试试这个

```
<?php if (isset($row['userid']) && $row['userid'] != ""): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:31:26.677

或者您可以使用`empty()`：

```
<?php if (!empty($row['userid'])): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T05:32:05.163

```
<?php if (strlen($row['userid']) > 0 ): ?>
 <p> say hi! </p>
<?php endif; ?> 
```

也检查一下:)

# php - 在函数中调用数组

> ID：12739983
> 
> 赞同：0
> 
> 时间：2012-10-05T05:23:31.760
> 
> 标签：php, email

我有一个函数，其中有一个数组。我想调用该函数 foo 并在我的脚本中使用 $result 索引（文本、html、附件）。请帮助我，因为我对 php 完全陌生。我正在尝试将数组调用到 mail() 方法。并得到错误提示字符串和它的 id 数组。如何将数组插入相关的邮件方法。

```
function foo($a)    
{
    if (is_resource($b))
    {
        $result = array
        (
            'text' => null,
            'html' => null,
            'attachments' => array(),
        );
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:27:20.677

您不能将数组传递给[mail](http://php.net/manual/en/function.mail.php)函数，因为它只需要字符串。如果您希望电子邮件的文本为 $result['text']，请尝试

```
mail ($to, $subject, $result['text'] 
```

但是，看起来您正在尝试让一个数组填充电子邮件的附件和内容。PHP 中没有这样的东西。您可能需要寻找一些第三方库。[SwiftMailer](http://swiftmailer.org/docs/messages.html)也许是你想要的。

# java - 是否从被视为反模式的父类访问子类

> ID：12739990
> 
> 赞同：0
> 
> 时间：2012-10-05T05:23:50.017
> 
> 标签：java, oop, design-patterns, anti-patterns

例如

```
public abstract class Foo
{
    public Bar f1()
    {
        return new Bar();
    }
} 
```

和

```
public class Bar extends Foo
{

} 
```

从设计的角度来看，你同意这种设计是反模式的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:21:39.583

是的。

它不好的原因是它破坏了封装。如果有人更改`Foo`，他们会意识到他们可能会更改所有子类。如果有人改变了`Bar`，他们不应该考虑改变它的超类；无论`Bar`.

# iphone - ios - 代码 VS 故事板意见

> ID：12739991
> 
> 赞同：2
> 
> 时间：2012-10-05T05:23:52.350
> 
> 标签：iphone, xcode, coding-style, interface-builder, storyboard

我刚刚花了很多时间重新编写我的应用程序，以便将所有内容都放在代码中，而不是使用故事板。主要是因为我想了解故事板为我做了什么。

显然，我注意到我的文件在代码行方面变得非常大。

根据他们的 WWDC 视频，Apple 似乎更倾向于故事板而不是编写代码行。

作为开发人员，您是否仍然觉得用代码编写所有内容是更好的方法？我希望对此有一些意见，因为我想看看我对此事的感受是否得到您的想法的支持，毫无疑问，我已经这样做了更长的时间。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:49:19.303

两者的优点和缺点都很少。

**通过代码添加控件的优点**

*   如果大多数控件都是动态的，那么您可能更愿意将所有内容都编写为代码。这样您就可以在需要时加载控件。

*   它易于重用代码并使应用程序更具动态性，例如您想为应用程序制作 UI 主题

**Storyboard/XIB的优势**

*   使用 Storyboard/XIB 一次加载所有控件（如果应用程序是静态的则更好），您必须正确绑定该视图。

*   与代码相比，使用故事板/ XIB 设计 UI 很容易。

根据我的理解，这些都是两者的几个优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:37:47.107

通过代码制作应用程序，对开发人员有很大帮助，它提供了灵活性。但是通过故事板减少了代码行。对于移动应用程序开发，减少代码行数或减少代码总是受欢迎的。

# api - 面向未来的 RESTful Web 服务的各个方面

> ID：12739993
> 
> 赞同：0
> 
> 时间：2012-10-05T05:24:03.553
> 
> 标签：api, rest, versioning, jax-rs, resteasy

我们将 REST Web 服务视为一种“面向未来”我们的业务的方式，等等。我正在考虑对 REST Web 服务进行版本控制的各种方法的权衡，我想了解其他人在对 REST Web 服务进行版本控制时学到了什么。

关于 SO 和其他地方有很多关于版本控制 Web 服务的很好的讨论，但大多数都集中在是否将版本号放在 URL 或请求标头中。

版本控制 Web 服务有多个方面。在 Web 服务调用本身（URL 或标头）中指定了版本。在源代码中管理多个版本的业务逻辑。正在构建版本化的 Web 服务。存在版本控制问题。还有如何弃用和删除过时版本的问题。

我们正在编写移动客户端的合作伙伴希望将版本放在 URL 中，这就是我的方法（目前）。此外，这些网络服务的新版本可能与旧版本不兼容。例如，不同版本中可能有不同的安全实现。

当涉及到版本化 URL 时，通常建议使用两种方法 - 将版本号放在 URL 中或将其作为参数

```
context-root/service/rest/v0.1/restMethod/param1

context-root/service/rest/restMethod/param1?version=v0.1 
```

第二种方法需要一些控制器逻辑来将请求路由到正确的实现，但这并不难。两者之间的选择并不难。

第三种选择是将版本号放在上下文根本身中，这意味着将其放在 .war 文件名前缀或部署描述符中：

```
restarchive-v0.1/service/rest/restMethod/param1 
```

这意味着为当前支持的所有版本部署多个档案。

我喜欢在文件名中包含版本号。它使查看部署的内容变得容易。这种方法的缺点是它需要为每个版本化存档单独构建，可能使用 maven 配置文件。

这是第一种方法的代码的样子。每个 Web 方法都为该方法的所有受支持版本执行其自己的控制器逻辑。每个版本的业务逻辑都可以以一种明智的方式处理（即在包中放入版本号）。

```
 @ApplicationPath("/service/rest")
    @Path("/{version}/")
    public class RestService extends Application {

    @GET
    @Path("/user/{id}")
    @Produces(MediaType.APPLICATION_JSON)
    public User getUser(@PathParam("version") String version, @PathParam("id") int id) {

        User user;
        if (version.equals("v0.1")) {
            //  call v0.1 code to get the User
         }
         else if (version.equals("v0.2")) {
            //  call v0.2 code to get the User
         }
         else {

             throw new WebApplicationException(Response.Status.NOT_FOUND);
         }

         return user;
    }

} 
```

我的第一个实现在不同的包中使用了 javax.ws.rs.core.Application 的多个子类，包中的版本号。这应该可以，但是 JBoss RESTeasy 实现不允许在一个 .war 中使用多个 Application 子类。这显然违反了 JAX-RS 1.1 规范，但如果您使用 JBoss 或 RESTeasy，您将不得不忍受这种限制。

我倾向于将第一种方法与上述类似的实现一起使用。由于我正在努力尽量减少未来的问题，我想听听其他人通过版本 Web 服务的各个方面的经验学到了什么。

这是一种合理的方法，还是会导致我在这里没有提到的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:32:22.560

这个话题是在 JavaOne 上提出来的，并没有正确的答案。

提供该演示文稿的人说，他的偏好是将版本保留在标题中，并避免将其放在 URL 中或作为查询参数。

就个人而言，我们自己对文件进行版本控制。无论如何，我们必须部署单独的版本化构建，所以它没有太多额外的麻烦。我们只是从 Manifest 中提取版本号并将 ?{version} 附加到文件中。

# magento - 产品属性显示在产品页面的静态块内？

> ID：12739995
> 
> 赞同：0
> 
> 时间：2012-10-05T05:25:05.790
> 
> 标签：magento, content-management-system, magento-1.7, static-block

我有一个 magento 模板，它在产品视图页面上放置了一些静态块。我创建了一些额外的产品属性，例如“产品兼容性”，并希望在产品页面的静态块中显示此产品属性。也就是说，对于您查看的每个产品，产品属性内容会有所不同，但在页面上的位置将是相同的，因为它位于静态块内。

我尝试过使用标签，例如

`{{block type="core/template" template="catalog/product/compatibility.phtml"}}`

在我的静态块中，但它似乎没有做任何事情，只是在前端显示该代码。我已经关闭了编辑器的所见即所得，并创建了一个名为 compatibility.phtml 的文件，并在其中填充了以下测试 php 代码：

`<?php echo 'I am working!' ?>`

我不知道是否甚至需要让它看起来像这样的 ta 文件才能获取产品属性数据。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:55:28.287

是可能的，但有点复杂，如果您不是开发人员，除了任何自定义属性都可以显示在产品视图页面上，而在附加信息部分没有任何静态块。您只需创建属性，将“在前端的产品视图页面上可见”设置为“是”并将该属性分配给“属性集”。

# android - ImageView 的无效不工作

> ID：12739996
> 
> 赞同：0
> 
> 时间：2012-10-05T05:25:06.373
> 
> 标签：android

我已经为 viewpager 创建了页面指示器。当用户在 viewpager 中滑动时，我正在更改指示器图像。

下面是我的 onPageSelected#ViewPager.OnPageChangeListener 代码

```
public void onPageSelected(int position) {
    int childCount = this.layout.getChildCount();
    for (int i = 0; i < childCount; i++) {
        PageItem child = (PageItem) this.layout.getChildAt(position);
        if (i == position) {
            child.setActiveState();
        } else {
            child.resetState();
        }
    }
    this.layout.invalidate();
} 
```

下面是我的 PageItem 类

```
public class PageItem extends ImageView {

private int activeBitmap;
private int inActiveBitmap;
private boolean isActive;

public PageItem(Context context, AttributeSet attrs, int defStyle,
        int activeBitmapId, int inActiveBitmapId) {
    super(context, attrs, defStyle);
    this.activeBitmap = activeBitmapId;
    this.inActiveBitmap = inActiveBitmapId;
    this.setImageResource(inActiveBitmap);
    isActive = false;
}

public PageItem(Context context, AttributeSet attrs, int activeBitmapId,
        int inActiveBitmapId) {
    super(context, attrs);
    this.activeBitmap = activeBitmapId;
    this.inActiveBitmap = inActiveBitmapId;
    this.setImageResource(inActiveBitmap);
    isActive = false;
}

public PageItem(Context context, int activeBitmapId, int inActiveBitmapId) {
    super(context);
    this.activeBitmap = activeBitmapId;
    this.inActiveBitmap = inActiveBitmapId;
    this.setImageResource(inActiveBitmap);
    isActive = false;
}

public void resetState() {
    this.setImageDrawable(this.getContext().getResources()
            .getDrawable(inActiveBitmap));
    this.invalidate();
    isActive = false;
}

public void setActiveState() {
    this.setImageDrawable(this.getContext().getResources()
            .getDrawable(activeBitmap));
    this.invalidate();
    isActive = true;
} 
```

}

现在，当我第一次滑动时启动我的应用程序后，它会更改图像，但之后不会更改图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:09:48.890

看起来应该是：

```
PageItem child = (PageItem) this.layout.getChildAt(i); 
```

# sql - SSIS将转义字符转换为asc（不可打印字符）

> ID：12739997
> 
> 赞同：0
> 
> 时间：2012-10-05T05:25:06.273
> 
> 标签：sql, csv, ssis, escaping, non-printable

我使用 SSIS 将一些 csv 文件（来自 UNIX）迁移到 SQL 中。一个 csv 文件包含如下数据：

ID、名称、描述

1,12345\t,12345\177

如果 Name 或 Desc 的架构必须是 varchar(6)，则迁移将失败，因为不可打印字符显示为 \t、\177...

如何将转义字符转换为 SSIS 中的不可打印字符？

\t 到 Char(9)

\177 到 Char(127)

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:08:40.020

您应该能够使用正则表达式 regex.unescape 来执行此操作。我建议加载程序集并使用临时表在 SQL 服务器中执行此操作，请查看[http://msdn.microsoft.com/en-us/magazine/cc163473.aspx](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)