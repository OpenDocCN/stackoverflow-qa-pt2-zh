# StackOverflow 问答 14929000-14929999

# android - Android shell 作为另一个用户问题执行命令

> ID：14929007
> 
> 赞同：1
> 
> 时间：2013-02-18T03:24:35.833
> 
> 标签：android, shell

我正在尝试以系统用户身份执行以下命令

```
su - system -c "ls -l /" 
```

这是输出

```
shell@android:/data/xxxx/xxxx # su - system -c "ls -l /"
su - system -c "ls -l /"
SuperSU - Copyright (C) 2012 - Chainfire 
```

这是否意味着在 Android 中我不能使用 shell 作为另一个用户执行命令？还是`su`二进制问题？

如何让 shell 作为另一个用户执行？我也尝试为此创建一个 shell 脚本，但输出仍然相同。请指教。

设备已经植根。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T18:50:58.620

问题是 SuperSU 包含一个`su`与标准 GNU 不兼容的二进制文件`su`。

如果您`su`使用 NDK 为 android 编译，并替换二进制文件就可以了。

您可以使用以下代码：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <pwd.h>
#include <sys/types.h>
#include <string.h>
#include <errno.h>
int main (int ac, char **av, char **env) {
    int iret;

    if (ac == 1) { // Run /bin/bash as root
        iret = setuid(0);
        if (iret == -1) {
            fprintf(stderr, "This binary is u-s, use chmod u+s %s as root.\n", av[0]);
            exit(-1);
        }

        strcpy(av[0], "/bin/bash");
        iret = execve(av[0], av, env);
        if (iret == -1) {
            fprintf(stderr, "Can't execute a shell.\n");
            exit(-1);
        }
    } else {
        struct passwd *pswd = getpwnam(av[1]); 
        //printf("%d\n", pswd->pw_uid);
        if (pswd == NULL) {
            fprintf(stderr, "User %s does not exist.\n", av[1]);
            exit(-1);
        }
        iret = setuid(pswd->pw_uid);
        if (iret == -1) {
            fprintf(stderr, "This binary is u-s, use chmod u+s %s as root.\n", av[0]);
            exit(-1);
        }
        iret = execve(av[2], (char **)&av[2], env);
        if (iret == -1) {
            fprintf(stderr, "%s\n", strerror(errno));
            exit(-1);
        }
    }
    return 0;
} 
```

编译它并将所有者更改为root。然后以 root 身份运行 chmod u+s ./su。最后作为普通用户运行您的命令：

$ ./su 系统 /bin/bash -c "ls -l /"

# javascript - jQuery插件：如何在点击时调用插件功能并将其保持在范围内

> ID：14929012
> 
> 赞同：3
> 
> 时间：2013-02-18T03:24:49.077
> 
> 标签：javascript, jquery, jquery-plugins, plugins

我有一个插件，每次单击指定链接时都会打开一个模式。我在插件的 init() 函数中附加了 click 事件，然后运行插件的另一个函数。

但问题是点击时调用的插件函数无法访问插件的其他属性。相反，它似乎是在窗口范围内调用的，而不是插件。

所以在本例中，**toggleModal() 无权访问 this.config.container。**

如何在点击时触发插件功能，使其保持在插件的范围内？

插件如下：

```
;(function($, window, document, undefined){

var Modal = function(elem, options){
    this.elem = elem;
    this.$elem = $(elem);
    this.options = options;
    this.metadata = this.$elem.data('modal-options');
};

Modal.prototype = {
    defaults: {
        container: '#pageModal'
    },

    init: function() {
        this.config = $.extend({}, this.defaults, this.options, this.metadata);

        this.$elem.bind('click', this.toggleModal);

        if(!$(this.config.container).length) {
            this._build();
        }

        return this;
    },

    toggleModal: function() {
        $(this.config.container).fadeIn();
        return false;
    },

    _build: function() {
        var structure = '<section id="' + this.config.container.replace('#', '') + '"><section class="modalContent"></section></section>';

        $(structure).appendTo($('body')).hide();
    },
}

Modal.defaults = Modal.prototype.defaults;

$.fn.modal = function(options) {
    return this.each(function() {
        new Modal(this, options).init();
    });
};

})(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:28:39.310

它不是窗口，而是您绑定到的 jQuery 对象（作为 jQuery 所做的产品）。jQuery 包含一个有用的方法[`$.proxy`](http://api.jquery.com/jQuery.proxy/)来解决这个问题：

```
this.$elem.on('click', $.proxy(this.toggleModal, this)); 
```

# linux - 将具有空列的行添加到制表符分隔的文件

> ID：14929013
> 
> 赞同：0
> 
> 时间：2013-02-18T03:24:51.027
> 
> 标签：linux, bash, shell, awk

我有一些带有不同列号的制表符分隔的数据文件。我想为这些文件添加一个标题行，标题行仅在第一列中包含“ID”，但是标题行的总列号应该与文件相同。我可以用一些linux命令吗？非常感谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:41:10.157

```
for file in *
do
   awk 'NR==1{hdr=$0; gsub(/[^\t]/,"",hdr); print "ID" hdr}1' "$file" > tmp &&
   mv tmp "$file"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:29:30.340

```
sed -i '1 { h; s/[^\t]//g; s/^/ID/; p; g; }' *.tsv 
```

复制第一行，删除所有非标签（以清除字段内容），添加“ID”，然后打印此行加上原件。

# jquery - JQuery 中的十进制验证

> ID：14929014
> 
> 赞同：1
> 
> 时间：2013-02-18T03:24:53.867
> 
> 标签：jquery, asp.net-mvc-3

我在当前项目中使用 MVC3。我只是想用十进制验证来验证我的输入字段。我在使用 JQuery 方面没有太多经验。我的 DB 十进制类型字段是这样的 (decimal(9, 2))。我想根据允许的规范验证用户。

我尝试使用 jquery 的测试方法。但在 IE8 中，当我触发验证检查时会抛出不可用错误。

我找到了正则表达式来做到这一点。但我不知道我应该触发验证检查的文本框的哪个事件。请帮助我为上述声明提供确切的表达方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:39:24.803

只需将此行添加到您的项目并从[此处下载源代码](http://jquery.com/download/)

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

然后进行十进制验证

```
$.validator.addMethod('Decimal', function(value, element) {
    return this.optional(element) || /^\d+(\.\d{0,3})?$/.test(value); 
}, "Please enter a correct number, format xxxx.xxx"); 
```

或允许使用逗号：

```
$.validator.addMethod('Decimal', function(value, element) {
    return this.optional(element) || /^[0-9,]+(\.\d{0,3})?$/.test(value); 
}, "Please enter a correct number, format xxxx.xxx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:07:28.457

听说过[ASP.NET MVC 中的数据注解](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)吗？

用这个

```
[RegularExpression(@"^[0-9,]+(\.\d{0,3})?$")]
public decimal UnitPrice { get; set; } 
```

然后用这个

```
<p>
    <label for="UnitPrice">Price:</label>
    @Html.TextBox("UnitPrice")
    @Html.ValidationMessage("UnitPrice", "*")
</p> 
```

# sass - 如何在 Foundation 中使用语义网格？

> ID：14929015
> 
> 赞同：2
> 
> 时间：2013-02-18T03:24:57.133
> 
> 标签：sass, response, zurb-foundation

我在使用语义网格混合时遇到了一些问题。如果我遗漏了一些明显的东西，我很抱歉，但我寻求你的帮助。我有以下代码：

索引.html

```
<header>
  <a id="logo" href="#">Logo Link</a>
  <div id="search">
      <span class="prefix">#</span>
      <input type="text">
  </div>
</header> 
```

应用程序.scss

```
header { @include outerRow();
  #logo { @include column(8); }
  #search { @include column(4); @include innerRow(collapse);
    span { @include column(3); }
    input { @include column(9); }
  }
} 
```

这适用于屏幕宽，但前缀在窄模式下会延伸到全宽。我是这次冒险的新手，但我相信它会自行重新计算窄屏幕，还是我必须 @media 才能正常工作？

新来张贴图片所以这里是链接：

宽（正确）-http: [//imgur.com/dtsGtxM](http://imgur.com/dtsGtxM)

狭窄的（foofed）-http: [//imgur.com/jX4D1NU](http://imgur.com/jX4D1NU)

编辑：嗯，解决方案似乎是：

```
span { @include column(3); @include mobileColumn(1); }
input { @include column(9); @include mobileColumn(3); } 
```

虽然我并不完全理解。仍然不确定在列中调用新的嵌套行是否可以接受，如下所示，但它似乎有效：

```
#search { @include column(3); @include innerRow(collapse); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T11:46:52.493

Foundation 使用媒体查询在 768px 处有一个默认断点。

因此，当在较大的设备上查看时，它使用 column() mixin，然后在较小的屏幕尺寸上使用 mobileColumn() mixin。

此外，设置一个 div （在你的情况下 #search 是一个列和一个内行会产生意想不到的结果。你应该将你的列包装在一个单独的内行容器中：

```
<header>
  <a id="logo" href="#">Logo Link</a>
  <div id="search">
      <div class="inner-row">
          <span class="prefix">#</span>
          <input type="text">
      </div>
  </div>
</header> 
```

和

标头 { @include outerRow(); #logo { @include 列（8）；} #search { @include 列(4); 跨度{@包括列（3）；} 输入 { @include 列（9）；} } .inner-row { @include innerRow(collapse); } }

[http://foundation.zurb.com/old-docs/f3/media-queries.php](http://foundation.zurb.com/old-docs/f3/media-queries.php)

# cordova - 当我点击按钮时，它会触发两次（在手机中）（jquery+phonegap）

> ID：14929018
> 
> 赞同：3
> 
> 时间：2013-02-18T03:25:37.877
> 
> 标签：cordova, jquery

当我`tap`在我的应用程序中使用事件时，当我点击它时它会触发不止一次。我想知道如何解决它（使用 jquery+phonegap）。换句话说，我是否能找到一种方式并使用那种方式，它只会在很小的时间间隔内触发一次事件，

```
$('.a').live('tap',function(){...}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:28:36.967

尝试

```
$('.a').live('tap',function(e){
    e.preventDefault();
});
```

**或者**

```
$('.a').live('tap',function(e){
    e.stopPropagation();
});
```

**或者**

使用[**.one**](http://docs.jquery.com/Events/one)。

```
$('.a').one('click', function() {
    // other code
});
```

**OP 评论回复。**

尝试使用：

```
$('.a').live('vclick', function()
{
   console.log("works once");
)};
```

您还可以测试哪个事件正在触发

```
$('.a').live('click tap', function(e) {
    console.log("Which Event: "+e.which + " Event Type: "+e.type);
)};
```

有关更多信息，请参阅[**jQuery 移动事件**](http://jquerymobile.com/demos/1.0.1/docs/api/events.html)

# gwt - 如何通过事件总线告诉 GWT 单元小部件数据已更改？

> ID：14929019
> 
> 赞同：6
> 
> 时间：2013-02-18T03:25:47.143
> 
> 标签：gwt, event-bus

我有一个 GWT 单元树，用于显示来自 CMS 的文件结构。我正在使用`AsyncDataProvider`从我创建的自定义 RPC 类加载数据。我还有一个 Web Socket 系统，它将广播来自也在系统中工作的其他客户端的事件（文件创建、重命名、移动、删除等）。

我想要解决的是当我收到这些事件之一时，我如何正确更新我的细胞树？

我想这个问题类似于在页面上有两个我的 Cell Tree 实例，它们呈现相同的服务器端数据，并希望确保当用户更新一个时，另一个也更新，通过使用`EventBus`.

我觉得这应该很简单，但我现在已经花了大约 6 个小时，没有任何进展。我的代码包括在下面：

注意：我没有使用 RequestFactory，即使它看起来像是我的自定义 RPC 框架。此外， FileEntity 只是一个文件的简单表示，其名称可由`getName()`.

```
private void drawTree() {

        // fileService is injected earlier on and is my own custom rpc service
        TreeViewModel model = new CustomTreeModel(new FileDataProvider(fileService));
        CellTree tree = new CellTree(model, "Root");

        tree.setAnimationEnabled(true);

        getView().getWorkspace().add(tree);

    }

    private static class CustomTreeModel implements TreeViewModel {

        // I am trying to use a single AsyncDataProvider so I have a single point of loading data which I can manipulate (Not sure if this is the correct way to go)
        public CustomTreeModel(FileDataProvider dataProvider) {
            this.provider = provider;
        }

        public <T> NodeInfo<?> getNodeInfo(final T value) {

            if (!(value instanceof FileEntity)) {

                                // I already have the root File loaded in my presenter, if we are at the root of the tree, I just add it via a list here
                ListDataProvider<FileEntity> dataProvider = new ListDataProvider<FileEntity>();

                dataProvider.getList().add(TreeWorkspacePresenter.rootFolder);

                return new DefaultNodeInfo<FileEntity>(dataProvider,
                        new FileCell());
            } else {

                                // Otherwise I know that we are loading some tree child data, and I invoke the AsyncProvider to load it from the server
                provider.setFocusFile(value);

                return new DefaultNodeInfo<FileEntity>(provider,
                        new FileCell());
            }
        }

        public boolean isLeaf(Object value) {

            if(value == null || value instanceof Folder)
                return false;
            return true;
        }

    }

    public class FileDataProvider extends AsyncDataProvider<FileEntity> {

        private FileEntity focusFile;
        private FileService service; 

        @Inject
        public FileDataProvider(FileService service){
            this.service = service;
        }

        public void setFocusFile(FileEntity focusFile){
            this.focusFile = focusFile;
        }

        @Override
        protected void onRangeChanged(HasData<FileEntity> display) {

                service.getChildren(((Folder) focusFile),
                        new Reciever<List<FileEntity>>() {

                            @Override
                            public void onSuccess(List<FileEntity> files) {

                                updateRowData(0, files);

                            }

                            @Override
                            public void onFailure(Throwable error) {

                                Window.alert(error.toString());
                            }

                        });

            }
        }

    /**
     * The cell used to render Files.
     */
    public static class FileCell extends AbstractCell<FileEntity> {

        private FileEntity file;

        public FileEntity getFile() {
            return file;

        }

        @Override
        public void render(Context context, FileEntity file, SafeHtmlBuilder sb) {
            if (file != null) {
                this.file = file;
                sb.appendEscaped(file.getName());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:16:11.927

目前，即使在最新的 gwt 版本中，也没有直接支持单个树项刷新。

但是有一个解决方法。每个树项都与一个值相关联。使用此值，您可以获得相应的树项。

在您的情况下，我假设您知道要更新/刷新的项目，即您知道哪个文件实体已更改。使用此文件实体搜索相应的树项。获得树项后，您只需要展开和折叠或折叠并展开其父项。这使得父项重新渲染其子项。您更改的文件实体是子项之一。所以它得到刷新。

```
public void refreshFileEntity(FileEntity fileEntity)
{
       TreeNode fileEntityNode = getFileEntityNode(fileEntity, cellTree.getRootTreeNode() 

       // For expnad and collapse run this for loop

       for ( int i = 0; i < fileEntityNode.getParent().getChildCount(); i++ )
    {
        if ( !fileEntityNode.getParent().isChildLeaf( i ) )
        {
            fileEntityNode.getParent().setChildOpen( i, true );
        }
    }

}

public TreeNode getFileEntityNode(FileEntity fileEntity, TreeNode treeNode)
{
       if(treeNode.getChildren == null)
       {
           return null;
       }
       for(TreeNode node : treeNode.getChildren())
       {
            if(fileEntity.getId().equals( node.getValue.getId() ))
            {
                 return node;
            }
            getEntityNode(fileEntity, node); 
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:42:12.510

您可以使用 dataprovider 来更新 celltree。您可以使用以下命令更新完整的单元格树：

```
provider.setList(pList);
provider.refresh(); 
```

如果您只想更新一个特殊的单元格，您可以从 dataprovider 获取 listwrapper 并只设置一个元素。

```
provider.getList().set(12, element); 
```

# python - Rpy2 完全支持 ggplot2.layer 吗？

> ID：14929025
> 
> 赞同：2
> 
> 时间：2013-02-18T03:26:44.917
> 
> 标签：python, r, ggplot2, rpy2

我正在尝试`layer`在通过 Rpy2 绘制的图表中使用 ggplot2，我在手册中没有看到它（[http://rpy.sourceforge.net/rpy2/doc-2.1/html/graphics.html](http://rpy.sourceforge.net/rpy2/doc-2.1/html/graphics.html)）

`layer`调用函数的正确形式是否如下？从 R，

```
p <- p + layer(data=df, mapping=aes(x=x, y=y, label=foo), geom='text', hjust=1, vjust=1) 
```

应该在 Rpy2 中：

```
p += ggplot2.layer(**{"data": df,
                      "mapping": ggplot2.aes_string(x="x", y="y", label="foo"),
                      "geom": "text"})
                      "hjust": 1,
                      "vjust": 1}) 
```

当我尝试这个时，我收到如下错误：

```
TypeError: new() got an unexpected keyword argument 'vjust' 
```

和：

```
TypeError: new() got an unexpected keyword argument 'mapping' 
```

只是想知道这是否是`layer`从 Rpy2 向情节添加 a 的正确方法，或者是否有不同的习语？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:33:26.097

有不同的方法可以做到这一点（在评论中回答）。

除此之外，rpy2 中有一个错误阻止`layer()`指定参数参数，现在（希望）在两个分支`version_2.3.x`（将包含在版本 2.3.3 中）和`default`.

# php - 获取每个月的数据

> ID：14929030
> 
> 赞同：2
> 
> 时间：2013-02-18T03:26:58.233
> 
> 标签：php, mysql

所以我想做的基本上是这样的：

月份和年份：

- 该月和该年发送的所有数据

例如：2013 年 2 月：

- 该日期的帖子

2013 年 3 月：

- 该日期的帖子

等等。

我的桌子上有一个日期列，格式如下：day.month.year

我正在使用 PHP 和 MySQL。

我有自己正在使用的 MVC 框架。我将简化它以使其在这里更容易理解。获取数据的函数：

```
function selectAll($sql){

    $find = $this->prepare($sql);     
    $find->execute();                      
    $fetchdata = $find->fetchAll(PDO::FETCH_ASSOC);        
    return $fetchdata;
} 
```

以及获取日期的代码：

```
 $sql = "Select YEAR(Date) AS year, MONTH(Date) AS month, Headline from blog";
$data =  $this->db->selectAll($sql);
foreach($data as $key => $value) { 
        $date[] = $value['month'].'.'.$value['year'];

        }
$dateunique = array_unique($date); 
```

这给了我日期的结果，但我无法弄清楚如何在每个日期下放置正确的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:53:04.327

使用`DATE_FORMAT`mysql 功能。

**例子**

```
SELECT DATE_FORMAT(date_field,'%M') as Month,DATE_FORMAT(date_field,'%Y') as Year FROM table_name
```

然后`query`您的调试结果将看到两个额外的列`month`，`year`然后将其显示为您的愿望。

如果`date_field`是`varchar`则使用`str_to_date`mysql函数。

```
SELECT STR_TO_DATE(date_field,'%M') as Month, STR_TO_DATE(date_field,'%Y') as Year FROM table_name;
```

**OP问题更新**

尝试`GROUP_CONCAT`

```
SELECT
*,
GROUP_CONCAT(created) AS month
FROM
table_name
GROUP BY MONTH(created) DESC;
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:54:32.113

1.  [使用str_to_date](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数将 varchar 日期字段转换为精确日期
2.  使用[DATE_FORMAT](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)您可以选择按月记录
3.  `$input`格式在哪里`%Y-%m`// 例如：02-2013-> 2013 年 2 月

> ```
> SELECT * FROM `table` 
> WHERE DATE_FORMAT(str_to_date(`date_column`, '%d/%m/%Y'), '%Y-%m')= '".$input."'; 
> ```

# php - 带有一个包含explode()的循环的循环

> ID：14929032
> 
> 赞同：1
> 
> 时间：2013-02-18T03:27:09.333
> 
> 标签：php, loops, nested-loops

我有一个关联数组返回一个从我的数据库中提取问题的 SQL 查询。标记字段存储为分隔文本 VarChar。我想遍历我的所有数据库条目，同时使用explode 创建一个数组，然后遍历标签数组以创建一个带有标签的UL，不幸的是它运行得不是很好。这是我到目前为止所拥有的：

```
<?php foreach($questionRow as $questionShow) { ?>
    <?php echo ($questionShow['netvotes']) ;?>
    <?php echo ($questionShow['views']) ;?>
    <?php echo ($questionShow['q_answer_count']) ;?>
    <?php echo ($questionShow['title']) ;?>
    Tags:
    <ul style="display: inline">
        <?php
            $tagname = explode(",",$questionShow['tags']);
            foreach ($tagname as $tagList) {  ?>
                <li class="label label-inverse" style="margin-left: 5px"><?php echo($tagList) ;?></li>
        <?php }; ?>
    </ul>
<?php }; ?> 
```

结果很奇怪

我还尝试使用以下内容来运行我的外循环

```
<?php while($questionShow =$questionResult>fetch_assoc() ) { ?> 
```

这导致主记录集结果实际上没有循环。希望我已经正确解释了这一点，并且有人可以提供帮助。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:01:22.073

好吧，这可能很简单：

```
<?php
$query = mysql_query("SELECT * FROM `questions` LIMIT 30"); // replace this with your query
while($data=mysql_fetch_array($query)){
    echo $data['netvotes'];
    echo $data['views'];
    echo $data['q_answer_count'];
    echo $data['title']) ;?>
?>
Tags:
<ul style="display: inline">
    <?php
         foreach(explode(",",$data['tags']) as $tag){
    ?>
            <li class="label label-inverse" style="margin-left: 5px"><?php echo $tag; ?></li>
    <?php
    }
    ?>
</ul>
<?php
}
?> 
```

# javascript - 处理 IRC 聊天机器人应用程序的全球禁令

> ID：14929033
> 
> 赞同：2
> 
> 时间：2013-02-18T03:27:14.443
> 
> 标签：javascript, node.js, bots, irc

我有一个使用 Node.js + JavaScript 为 TwitchTV 上的广播公司开发的 IRC 聊天机器人。我在家用电脑上运行它，我知道 IRC 将在全球范围内禁止一个 IP 地址，如果它发送太多消息或泛滥。

我想向其他广播公司开放聊天机器人，但我担心如果不同的机器人我会被全球禁止（我设置了它，以便广播公司可以为他们的机器人创建一个新帐户，以便名称适合他们的频道）正在从单个全局 IP 发送消息。

我可以使用哪些技术让每个广播公司在不被全球禁令的情况下从机器人获取他们的消息？

这是一个机器人的示例，它可以同时进入多个频道，发送消息并且不会被禁止：

[http://www.twitch.tv/moobot](http://www.twitch.tv/moobot)

我问过那个创作者是否可以给我一些建议，但他们几乎都拒绝了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:22:49.207

## 您应该知道一些限制并且可以/不应该超过：

*   **每个 IP/子网的**克隆**
    大多数网络限制来自单个 IP 的并发连接数量（有时，尤其是 IPv6 甚至整个子网）。这个限制对于每个网络都是不同的，当超过这个限制时如何处理也是不同的。一些网络会创建一条 g-line（您的 IP 的全球网络禁令），而另一些则只是丢弃任何新连接。**

***   **每个连接的**通道限制**
    您可以同时使用的通道数量是有限制的。此限制是针对每个连接的，因此添加其他连接会使您需要克隆的最大通道数倍增。**

    ***   **每个连接的速率限制**每个连接只允许在给定时间内向服务器发送一定数量的数据。这可以很容易从 5 个命令/秒到复杂的，其中不同的命令将不同的数量添加到阈值。**** 

 ***** * *

## 那么如何绕过这个限制呢？

*   **克隆**
    最好的方法是获得例外，获得信任。您如何获得一个，或者您是否能获得一个取决于网络（策略）。

*   **频道限制**
    网络中的某些服务器可能允许更多数量的频道进入。某些网络可以允许某些用户获得更高的限制。再次询问您的 IRCop 或使用克隆。

*   **速率限制**
    询问您的 IRCop 或使用克隆。实现一个队列以避免断开连接`Excess Flood`。

## 总结一下：

*每个通道不应使用单个连接。*虽然这使您可以为每个频道选择不同的名称，但这在大多数网络上被视为资源浪费。
最好使用中性名称并将其用于多个频道。达到通道上限后，请使用克隆。

*为了避免因`excess flood`实施队列以阻止线路*而被踢（您这边的速率限制）。

*切勿将超过允许的并发连接数量连接到网络。*
这包括“Ghosts”，即最近断开但仍“在服务器上”的连接。（为防止 g 线将限制除以 2 或等待 3 分钟（或更长时间）再重新连接）

## 编辑

在 twitch 上环顾四周后，看起来 twitch 没有使用 IRC 网络，而是使用了多个 IRC 服务器。这使它变得更简单和更复杂：

*   如果可能，您应该查找适当的 DNS 名称并使用现有连接（具有相同的 ip）。
*   使用单个用户名。****

# iphone - PushViewController 导致黑屏

> ID：14929039
> 
> 赞同：12
> 
> 时间：2013-02-18T03:27:49.883
> 
> 标签：iphone, objective-c, xcode

```
SettingsViewController *viewController = [[SettingsViewController alloc] init];
    [[self navigationController] pushViewController:viewController animated:YES]; 
```

在 NavigationController 中使用此代码时，显示的场景只是一个黑屏。在情节提要中，它会显示内容，但不会显示在手机上。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T04:12:37.807

尝试这个：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
SettingsViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"setting"];
[self.navigationController pushViewController:viewController animated:YES]; 
```

将 settingviewcontroller 的标识符设置为“setting”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:30:35.143

用这个：

```
SettingsViewController *viewController = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:[NSBundle mainBundle]]; 
[[self navigationController] pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T18:00:39.443

一种简单的方法是使用情节提要进行实例化。你必须给你的 viewcontroller 一个 Storyboard ID，然后使用下面的代码：

```
YourView *view = [self.storyboard instantiateViewControllerWithIdentifier:@"YourViewID"]; 
```

完成后，只需按下：

```
[[self navigationController] pushViewController:view animated:YES]; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T08:37:43.520

尝试这个

```
 SettingsViewController *viewController = [[SettingsViewController alloc]initWithNibName:@"SettingsViewController" bundle:[NSBundle mainBundle]]; 
  [self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-20T11:48:06.113

我通过目标视图控制器的自定义初始化解决了这个问题。

您的目标视图控制器：

```
-(id) initWithSender:(UINavigationController*)sender
{
        self=[sender.storyboard instantiateViewControllerWithIdentifier:@"DestinationVCIdentifier"];
    if (self) {
        //custom initialisation
    }
    return self;
} 
```

并使用它：

```
DestinationVC *viewController = [[SettingsViewController alloc] initWithSender:self.navigationController];
[[self navigationController] pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-05T11:32:09.377

因此您可以按照每个人的建议使用 xib 或故事板的名称进行初始化，这是有效的。

虽然如果您使用故事板并且您的初始视图控制器在故事板上，他们可能宁愿执行以下操作，

```
// Method in your initial viewcontroller 
- (void)youPushMethod { 

// Name your segue on your storyboard, e.g. SegueIndentifier 
[self performSegueWithIdentifier:@"SegueIndentifier" sender:self];
} 
```

然后，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

     if ([segue.identifier isEqualToString:@“SegueIndentifier"]) {
     SettingsViewController *settingsViewController= segue.destinationViewController;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T08:37:32.383

嗨，您必须将顶栏属性（导航栏）设置为为视图控制器**推断**。就我而言，我之前将顶部栏设置为*“半透明导航栏”*

通常会发生这种情况，您从模态视图控制器执行 segue。

# ios - NSDateFormatter 的意外输出

> ID：14929045
> 
> 赞同：2
> 
> 时间：2013-02-18T03:28:52.890
> 
> 标签：ios, objective-c, nsdateformatter

我一直在使用以下 NSDateFormatter 代码来格式化我的日期字符串，输出如下：'2013-02-18 03:23:32.928000 +0000'

这一直有效，直到添加了使用欧洲 iPhone 的用户，其中输出更改为：'2013-02-18 02:00:40 AM.118000 +0000'

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];    
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];    
[dateFormatter setTimeZone:timeZone];    
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSSSSS Z"]; 
```

关于格式化程序为什么不能始终如一地工作的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T03:33:02.497

在 iOS 文档中，有这一行：

> 在 iOS 中，用户可以覆盖默认的 AM/PM 与 24 小时时间设置。这可能会导致 NSDateFormatter 重写您设置的格式字符串。

这就是为什么您使用 AM/PM 而不是 24 小时格式的原因。

您可以通过覆盖`NSDateFormatter`.

```
[dateFormatter setLocale:
 [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]] autorelease]; 
```

# asp.net-mvc - 使用剃刀视图中不同表中的值在标签中显示值

> ID：14929046
> 
> 赞同：2
> 
> 时间：2013-02-18T03:28:59.177
> 
> 标签：asp.net-mvc, razor

我希望在 RoundDetails/Create razor 视图中的 RoundDetails 类中显示 Holes 类中的 Hole_Num 值。

这是我的孔类：

公共部分类孔 { public Hole() { this.RoundDetails = new HashSet(); }

```
 public int HoleId { get; set; }
    public int FacilityId { get; set; }
    public int CourseId { get; set; }
    public int TeeTypeId { get; set; }
    public int Hole_Num { get; set; }
    public int Yardage { get; set; }
    public byte Par { get; set; }
    public short Handicap { get; set; }

    public virtual ICollection<RoundDetail> RoundDetails { get; set; }
    public virtual TeeType TeeType { get; set; }
} 
```

这是我的 RoundDetails 课程：

公共部分类 RoundDetail { public int RoundId { get; 放; } 公共 int GolferId { 获取；放; } 公共 int FacilityId { 获取；放; } 公共 int CourseId { 获取；放; } 公共 int TeeTypeId { 获取；放; } 公共 int HoleId { 获取；放; } 公共十进制微分 { get; 放; } 公共可空日期 { 获取；放; } 公共字节分数 { 获取；放; } 公共可空推杆 { 得到；放; } 公共可空 GIR { 获取；放; } 公共可空 FIR { 获取；放; } 公共 Nullable Up_And_Down { 获取；放; } 公共可空 Par_Save { 获取；放; } 公共可空 Sand_Save { 获取；放; } public Nullable Driving_Distence { 得到；放; } public Nullable Proximity { get; 放; } public Nullable Green_Fee { get; 放; }

```
 public virtual Course Course { get; set; }
    public virtual Facility Facility { get; set; }
    public virtual Golfer Golfer { get; set; }
    public virtual Hole Hole { get; set; }
    public virtual TeeType TeeType { get; set; }
} 
```

这是我的剃刀观点：

```
 <td>
                        @Html.LabelFor(model => model.Hole.Par)

                    </td> 
```

如何使用孔表中的标准杆信息填充此标签？我假设使用 RoundDetailController 的 Create 方法进行一些操作或创建某种 ViewModel 是可行的方法，但我不确定哪个或如何开始。请帮助！

# java - 随机字母/符号的正则表达式

> ID：14929047
> 
> 赞同：1
> 
> 时间：2013-02-18T03:29:01.193
> 
> 标签：java, regex

我已经使用正则表达式生成器和检查器搜索了几个小时，但我似乎无法让它工作......

我有这个字符串：`hdr("");cr(92);cl(3,"",4,"420720250","random message here");etr();`

到目前为止我的代码是：

```
private void strchecker() {

    Pattern pattern = Pattern.compile("(\\d{9})");
    Matcher matcher = pattern.matcher(strLine);
    if (matcher.find()) {
        System.out.println(matcher.group(0)); //prints /{item}/
    } else {
        //System.out.println("Match not found");
    }

} 
```

此代码有效，它在字符串中找到 9 位数字。我试图做的是找到正则表达式代码来搜索“cl（3”或“cl（2”），如果存在则将 9 位数字发送到变量。我只是不知道如何找到那个 cl（ 3 或 2..

有什么建议吗？

谢谢马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:39:29.293

由于您注意到您使用的是javascript，我认为您可以这样做，因为您不能使用lookbehind；你只需要抓住捕获组而不是使用完整的匹配。

```
cl\\([23].*?(\\d{9}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:42:29.203

```
/cl\([23].*(\d{9})/ 
```

最后的括号将捕获第 1 组中的 9 位数字。

# c# - 从子窗体捕获并不断发送到主窗体

> ID：14929049
> 
> 赞同：2
> 
> 时间：2013-02-18T03:29:15.200
> 
> 标签：c#, winforms, capture, subforms

我做到了，但是 Mainform.cs 出现了太多异常

```
Subform subform = new Subform();
subform.GetCapture += new Subform.GetCapture(SetSubformImage);
subform.Show();
//Set subform image to a pictureBox
void SetSubformImage(Image img) {
this.pic.Image = img;
} 
```

子窗体.cs

```
public delegate void CaptureHandle(Image img);
public event CaptureHandle GetCapture;
public Image ImgSubForm {
set{
if(GetCapture != null)
GetCapture(value);
}
}
//...Function GetFormImage return current form image
//Event form activated
private void Subform_Activated(object sender, EvenAgrs e) {
timer.Enable = true;
//With timer.Tick += { ImgSubForm = GetFormImage(); }
} 
```

上面的代码可以获取图像并发送到主窗体，但是 RAM 在 1 分钟内增加了 2GB。我不明白为什么，如果我没有关闭计时器，但 RAM 不会减少，直到关闭子窗体。为什么或任何解决方案？

# c++ - 提升python库构建

> ID：14929053
> 
> 赞同：1
> 
> 时间：2013-02-18T03:29:42.820
> 
> 标签：c++, python, boost

我正在使用带有 gcc 工具集版本 4.4.3 的 ubuntu 10.04

我的升压安装在

```
/usr/local/boost_1_50_0 
```

我正在寻找构建 python 库。为此，在我的安装文件夹中，我指示

```
sudo ./bootstrap.sh --with-libraries=python 
```

我收到以下回复

```
Building Boost.Build engine with toolset gcc... tools/build/v2/engine/bin.linuxx86/b2
Detecting Python version... 2.6
Detecting Python root... /usr
Unicode/ICU support for Boost.Regex?... not found.
Backing up existing Boost.Build configuration in project-config.jam.6
Generating Boost.Build configuration in project-config.jam...

Bootstrapping is done. To build, run:

./b2

To adjust configuration, edit 'project-config.jam'.
Further information:

- Command line help:
  ./b2 --help

- Getting started guide: 
  http://www.boost.org/more/getting_started/unix-variants.html

- Boost.Build documentation:
  http://www.boost.org/boost-build2/doc/html/index.html

 aditya@aditya:/usr/local/boost_1_50_0$ g++ --version
 g++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
 Copyright (C) 2009 Free Software Foundation, Inc.
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

然后我执行

```
 sudo ./b2 
```

然后我收到大量构建错误 - 基本上没有构建。

我怀疑这与某些 python 开发库不可用有关。

这台机器没有连接到互联网，所以我需要自己构建这些（而不是 sudo apt-get install 它们）。

# python - 在 SQLAlchemy 中删除左外连接右侧的 NULL

> ID：14929061
> 
> 赞同：3
> 
> 时间：2013-02-18T03:31:00.887
> 
> 标签：python, sqlalchemy

我有一张`Track`桌子和一张`Artist`桌子。该`Artist`表有一个`id`，`Track`表有一个外键，`artist_id`。我想删除所有没有关联曲目的艺术家。

在 SQL 中：

```
delete from artists 
 where id in (select artists.id
                from artists left outer join tracks 
                  on tracks.artist_id = artists.id
               where tracks.id is null); 
```

效果很好。但是当我尝试在 SQLAlchemy 中复制它时：

```
artists = session.query(Artist.id).outerjoin((Track, Artist.id == Track.artist_id)).filter(Track.id == None)
print('deleting %d unused artists' % artists.count())
session.query(Artist).filter(Artist.id.in_(artists.all())).delete() 
```

工作`print()`正常（并显示正确的行数）但删除给出了错误：

```
...
sqlalchemy.orm.evaluator.UnevaluatableError: Cannot evaluate clauselist with operator <function comma_op at 0x2d3e0d8>
During handling of the above exception, another exception occurred:
...
"Could not evaluate current criteria in Python. "
sqlalchemy.exc.InvalidRequestError: Could not evaluate current criteria in Python. Specify 'fetch' or False for the synchronize_session parameter. 
```

那么我如何在 SQLAlchemy 中做到这一点？我不介意方法是否不同，只要我可以删除所有不属于任何轨道的艺术家。

PS我也尝试过`artists.delete()`（在选择Artist实例时，而不是上面的ID），这也给出了一个错误——在这种情况下，外连接“丢失”并且SQL不一致。

**更新**

万一这对任何人都有用，如果您`artists`的模型中有一个反向引用（，下面），则有一种比外连接更简单的方法：

```
session.query(Artist).filter(Artist.tracks == None).delete(synchronize_session=False) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T05:40:37.777

例外是确切地告诉您如何解决问题，您需要将 a 指定`synchronize_session`为`"fetch"`or之一`False`。Sqlalchemy 试图避免做一些额外的工作，通过`session`将删除直接应用于 python 对象来更新附加到的对象的状态以反映数据库中的更改。

不幸的是，它不能为这个查询做到这一点，所以你需要告诉它要么“获取”活动`Artist`的 s 以查看它们是否被删除，或者只是忽略它，并使会话处于无效状态。

您还会在`in_(query.all())`制作过程中遇到麻烦；因为 sqlalchemy 不知道如何绑定元组列表，并且也是原始查询的不完美再现。就够`in_(query)`了。

# php - 如何获取灯箱图像的标题

> ID：14929063
> 
> 赞同：3
> 
> 时间：2013-02-18T03:31:16.287
> 
> 标签：php, lightbox

我正在使用 php 灯箱（这个 - [http://www.fatbellyman.com/webstuff/lightbox_gallery/index.php](http://www.fatbellyman.com/webstuff/lightbox_gallery/index.php)）来自动显示缩略图和图像。我想让标题和图像描述显示在较大的灯箱图像上，从单独的列表（文本文件？）中提取。如果可以在不使用数据库的情况下做到这一点，那将是最好的。

这是在我的画廊页面上：

```
<?php include 'lightbox_display_function.php'; ?>
<?php lightbox_display('apparel/soiled/icarus/', 'lightbox[icarus]'); ?> 
```

这是 lightbox_display_function.php：

```
<?php function lightbox_display($dir_to_search, $rel){
        $image_dir = $dir_to_search;
        $dir_to_search = scandir($dir_to_search);
        $image_exts = array('gif', 'jpg', 'jpeg', 'png');
        $excluded_filename = '_t';
            foreach ($dir_to_search as $image_file){
            $dot = strrpos($image_file, '.');
            $filename = substr($image_file, 0, $dot);
            $filetype = substr($image_file, $dot+1);
            $thumbnail_file = strrpos($filename, $excluded_filename);
                if ((!$thumbnail_file) and array_search($filetype, $image_exts) !== false){
echo "<a href='".$image_dir.$image_file."' rel='".$rel."'>
<img src='".$image_dir.$filename."_t.".$filetype."' alt='".$filename."' width='70' height='70' title='$filename'/>
</a>"."\n";
                }
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:11:30.733

您是否有一些示例代码说明您目前如何构建页面，您能否不将它们硬编码为某种关联数组？

图像文件名是否是关键，以便您可以将标题与必要的文件配对？

如果您发布到目前为止的内容，我们可以看看并希望提出建议。

**- 更新 -**

在调用之前对页面的数组进行硬核，并将数组作为参数包含在内，以便其中的元素可以与函数中的适当图像配对。

```
<?php include 'lightbox_display_function.php'; ?>
<?php
$titleArray=array();
$titleArray['RedCar.jpg']="Picture of red car";
$titleArray['BlueCar.jpg']="Picture of blue car";
$titleArray['GreenCar.jpg']="Picture of green car";
lightbox_display('apparel/soiled/icarus/', 'lightbox[icarus]',$titleArray); 
?> 
```

所以现在在函数中我们有了可以使用的信息

```
 <?php function lightbox_display($dir_to_search, $rel,$titleArray){
            $image_dir = $dir_to_search;
            $dir_to_search = scandir($dir_to_search);
            $image_exts = array('gif', 'jpg', 'jpeg', 'png');
            $excluded_filename = '_t';
                foreach ($dir_to_search as $image_file){
                $dot = strrpos($image_file, '.');
                $filename = substr($image_file, 0, $dot);
                $filetype = substr($image_file, $dot+1);
                $thumbnail_file = strrpos($filename, $excluded_filename);

                $title="";
                if (array_key_exists($filename, $titleArray)) { //check if the filename matches a key in the array
                   $title = $titleArray[$filename]; //match, so set $title to equal the title set for that image name in the array
                }

                if ((!$thumbnail_file) and array_search($filetype, $image_exts) !== false){
                     //At this point $title can be included in the echo or used in some fashion, put is paired up with the appropriate image.
                     echo "<a href='".$image_dir.$image_file."' rel='".$rel."'>
                     <img src='".$image_dir.$filename."_t.".$filetype."' alt='".$filename."' width='70' height='70' title='$filename'/>
                     </a>"."\n";
                    }
                }
        } 
```

我还没有测试过，但它应该给你一些可以使用的东西，如果没有别的理论的话。

# asp.net-mvc-4 - 用于控制器的 asp.net mvc 4 依赖解析器

> ID：14929066
> 
> 赞同：1
> 
> 时间：2013-02-18T03:31:29.530
> 
> 标签：asp.net-mvc-4, controller, inversion-of-control, autofac, service-locator

我正在使用 asp.net mvc 4 开发一个多租户 mvc 应用程序。

我将 Autofac 用于 IOC 容器，并已将控制器配置为在不同程序集中为每个客户端注册。

Autofac 将根据当前的客户端上下文切换它返回的控制器，这取决于当前的客户端上下文，这是通过查看路由数据来确定的。

我遇到了一个例外

> 找到了与名为“Home”的控制器匹配的多种类型。

这似乎表明 Autofac 返回的匹配项不止一个，但是仔细检查后，似乎 MVC 甚至没有调用 Autofac 进行控制器解析。

我可以看到一个呼叫，它要求`IControllerFactory`来自控制器本身，`DependencyResolver`但从不要求控制器本身。

我是否需要在使用依赖解析器的基础上实现自己的控制器工厂？

我已经查看了 mvc 的源代码，从我可以看出`DefaultControllerFactory`使用依赖解析器并应该解析控制器，但我在调试它以查看到底发生了什么时遇到了麻烦。

租户 dll 不被主网站引用，而是在构建后复制。

我的`global.asax`外观如下： // 首先，使用标准的 // ContainerBuilder 创建您的应用程序级默认值，就像您习惯的那样。var builder = new ContainerBuilder(); var appContainer = builder.Build();

```
// Once you've built the application-level default container, you
// need to create a tenant identification strategy. The details of this
// are discussed later on.
var tenantIdentifier = new RouteDataTenantIdentificationStrategy();

// Now create the multitenant container using the application
// container and the tenant identification strategy.
var mtc = new MultitenantContainer(tenantIdentifier, appContainer);

// Configure the overrides for each tenant by passing in the tenant ID
// and a lambda that takes a ContainerBuilder.

var assemblies = AppDomain.CurrentDomain.GetAssemblies()
    .AsQueryable()
    .Where(a => a.IsDefined(typeof (PluginAssemblyAttribute), false));

foreach (var assembly in assemblies)
{
    var pluginSpecification =
        assembly.GetCustomAttributes(typeof(PluginAssemblyAttribute), false)
            .OfType<PluginAssemblyAttribute>()
            .Single();
    var assembly1 = assembly;
    mtc.ConfigureTenant(pluginSpecification.Tenant, 
        b => b.RegisterControllers(assembly1));
}

DependencyResolver.SetResolver(new AutofacDependencyResolver(mtc)); 
```

租户识别策略如下所示：

```
public class RouteDataTenantIdentificationStrategy 
    : ITenantIdentificationStrategy
{
    public bool TryIdentifyTenant(out object tenantId)
    {
        tenantId = null;
        var context = HttpContext.Current;
        try
        {
            if (context == null || context.Request == null)
            {
                return false;
            }
        }
        catch (HttpException)
        {
            // This will happen at application startup in MVC3
            // integration since the ILifetimeScopeProvider tries
            // to be resolved from the container at the point where
            // a new AutofacDependencyResolver is created.
            tenantId = null;
            return false;
        }

        var routeData = RouteTable.Routes.GetRouteData(
            new HttpContextWrapper(context));

        if (routeData != null)
            tenantId = routeData.Values.ContainsKey("tenant") ? 
                routeData.Values["tenant"] : null;

        return tenantId != null;
    }
} 
```

编辑：完整的例外是

```
The request for 'Home' has found the following matching controllers:
MultiTenantViewEngine.Web.Controllers.HomeController
MultiTenantViewEngine.Web.Tenant1.Controllers.HomeController]
   System.Web.Mvc.DefaultControllerFactory.GetControllerTypeWithinNamespaces(RouteBase route, String controllerName, HashSet`1 namespaces) +230
   System.Web.Mvc.DefaultControllerFactory.GetControllerType(RequestContext requestContext, String controllerName) +833
   System.Web.Mvc.DefaultControllerFactory.System.Web.Mvc.IControllerFactory.GetControllerSessionBehavior(RequestContext requestContext, String controllerName) +196
   System.Web.Mvc.MvcRouteHandler.GetSessionStateBehavior(RequestContext requestContext) +267
   System.Web.Mvc.MvcRouteHandler.GetHttpHandler(RequestContext requestContext) +61
   System.Web.Mvc.MvcRouteHandler.System.Web.Routing.IRouteHandler.GetHttpHandler(RequestContext requestContext) +44
   System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(HttpContextBase context) +352
   System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(Object sender, EventArgs e) +144
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +239
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +114 
```

更深入地查看这一点似乎表明发生此错误是因为 GetControllerTypeWithinNamespaces() 返回多个命名空间。

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:32:51.273

您必须在所有路由中指定命名空间：

```
routes.MapRoute(
"Default",                                              // Route name
    "{controller}/{action}/{id}",                           // URL with parameters
    new { controller = "Home", action = "Index", id = "" },  // Parameter defaults
    "Some.NameSpace.To.Controllers" // required
); 
```

如果您想在租户 DLL 中使用主控制器：要么从主站点重定向到它，`HomeController`要么创建您的自定义路由（从 继承`Route`）并在其中进行命名空间选择。

# java - 如何将结果添加到具有长字段列表的对象？

> ID：14929067
> 
> 赞同：5
> 
> 时间：2013-02-18T03:31:34.127
> 
> 标签：java, database, resultset

我有一个名为employee 的对象，它有很长的属性列表，我正在从数据库中检索值并需要将它们放入employee 对象中，我正在执行以下操作，但是由于代码太长，我想知道是否有任何它的捷径。

```
 Employee emp = new Employee();
        try {

             ps = con.prepareStatement("select * from Employee WHERE username = ?");

            ps.setString(1, username);
            ResultSet r = ps.executeQuery();
 if (r.next()) {

        // 12 lines to put values into employee object need to be shorter            
        emp.setID(r.getInt(1));
        emp.setTitle(r.getString(2));
        emp.setFname(r.getString(3));
        emp.setLname(r.getString(4));
        emp.setMobile(r.getString(5));
        emp.setPhone(r.getString(6));
        emp.setEmail(r.getString(7));
        emp.setPosition(r.getString(8));
        emp.setUsername(r.getString(9));
        emp.setPassword(r.getString(10));
        emp.setQuestion(r.getString(11));
        emp.setAnswer(r.getString(12));

 }
 }..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:44:03.587

使用 Apache Commons [BeanProcessor](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/BeanProcessor.html)。它有两个非常有用的方法，分别是 toBean 和 toBeanList。

在这种情况下，您只需执行以下操作：

```
if (r.next()) {
    BeanProcessor bp = new BeanProcessor();
    emp = bp.toBean(r, Employee.class);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:42:24.033

正如 Jigar Joshi 在评论中提到的，像[Hibernate](http://www.hibernate.org/)这样的 ORM 框架将是一个不错的选择。

这是一个帮助您入门的示例。

[http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/#hibernate-gsg-tutorial-basic-test-list](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/#hibernate-gsg-tutorial-basic-test-list)

# ruby - xmpp4r 在登录时引发异常：“解析器线程中捕获的异常！（Jabber::ServerDisconnected）”

> ID：14929069
> 
> 赞同：2
> 
> 时间：2013-02-18T03:31:43.440
> 
> 标签：ruby, xmpp, xmpp4r

我尝试在 ruby​​ 中使用 xmpp4r 连接到我的 XMPP 服务器，我的代码非常简单，但我不知道为什么会出错。我可以成功使用 ichat 使用 chat@localhost 登录，也可以登录 5280/admin 网站。

```
require 'xmpp4r/client'
include Jabber
Jabber::debug = true
jid = Jabber::JID.new('chat@localhost')
client = Jabber::Client.new(jid)
client.connect
client.auth('123456')
client.close 
```

错误是：

```
D, [2013-02-18T03:24:55.768029 #15238] DEBUG -- : Debugging mode enabled.
W, [2013-02-18T03:24:55.768341 #15238]  WARN -- : Warnings mode enabled.
D, [2013-02-18T03:24:55.772467 #15238] DEBUG -- : RESOLVING:
_xmpp-client._tcp.localhost (SRV)
D, [2013-02-18T03:24:55.778631 #15238] DEBUG -- : CONNECTING:
localhost:5222
D, [2013-02-18T03:24:55.780122 #15238] DEBUG -- : SENDING:
<stream:stream xmlns:stream='http://etherx.jabber.org/streams'     
xmlns='jabber:client' to='localhost' xml:lang='en' version='1.0' >
D, [2013-02-18T03:24:55.782276 #15238] DEBUG -- : RECEIVED:
<stream:stream from='localhost' id='3021975152' xml:lang='en' 
xmlns:stream='http://etherx.jabber.org/streams' version='1.0'     
xmlns='jabber:client'/>
D, [2013-02-18T03:24:55.784022 #15238] DEBUG -- : RECEIVED:
<stream:features><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>    
<mechanism>SCRAM-SHA-1</mechanism><mechanism>DIGEST-MD5</mechanism>
<mechanism>PLAIN</mechanism></mechanisms><c hash='sha-1' 
node='http://www.process-one.net/en/ejabberd/' 
ver='yy7di5kE0syuCXOQTXNBTclpNTo=' xmlns='http://jabber.org/protocol/caps'/>
<register xmlns='http://jabber.org/features/iq-register'/></stream:features>
D, [2013-02-18T03:24:55.784203 #15238] DEBUG -- : FEATURES: waiting...
D, [2013-02-18T03:24:55.784785 #15238] DEBUG -- : FEATURES: received
D, [2013-02-18T03:24:55.785290 #15238] DEBUG -- : PROCESSING:
<stream:features xmlns='jabber:client'><mechanisms 
xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>SCRAM-SHA-1</mechanism>    
<mechanism>DIGEST-MD5</mechanism><mechanism>PLAIN</mechanism></mechanisms><c 
hash='sha-1' node='http://www.process-one.net/en/ejabberd/' 
ver='yy7di5kE0syuCXOQTXNBTclpNTo=' xmlns='http://jabber.org/protocol/caps'/>
<register xmlns='http://jabber.org/features/iq-register'/></stream:features> 
(REXML::Element)
D, [2013-02-18T03:24:55.785360 #15238] DEBUG -- : FEATURES: waiting finished
D, [2013-02-18T03:24:55.785450 #15238] DEBUG -- : TRYING stanzacbs...
D, [2013-02-18T03:24:55.785556 #15238] DEBUG -- : TRYING 
message/iq/presence/cbs...    
D, [2013-02-18T03:24:55.785987 #15238] DEBUG -- : SENDING:
<auth mechanism='DIGEST-MD5' xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>
D, [2013-02-18T03:24:55.787784 #15238] DEBUG -- : RECEIVED:
<challenge xmlns='urn:ietf:params:xml:ns:xmppsasl'>bm9uY2U9IjE5NzEzNzk5NzQiLHFvcD0iYXV0aCIsY2hhcnNldD11dGYtOCxhbGdvcml0aG09bWQ1LXNlc3M=</challenge>
D, [2013-02-18T03:24:55.788143 #15238] DEBUG -- : SASL DIGEST-MD5 challenge:
nonce="1971379974",qop="auth",charset=utf-8,algorithm=md5-sess
{"nonce"=>"1971379974", "qop"=>"auth", "charset"=>"utf-8", "algorithm"=>"md5-sess"}
D, [2013-02-18T03:24:55.788475 #15238] DEBUG -- : SASL DIGEST-MD5 response:
nonce="1971379974",charset=utf-8,username="chat",realm="localhost",cnonce="92a37c018b9c32339c4b52ee0b02d67e",nc=00000001,qop=auth,digest-uri="xmpp/localhost",response=9c6bca9f4cf6f8daf3197a914023729a
{"nonce"=>"\"1971379974\"", "charset"=>"utf-8", "username"=>"\"chat\"", "realm"=>"\"localhost\"", "cnonce"=>"\"92a37c018b9c32339c4b52ee0b02d67e\"", "nc"=>"00000001", "qop"=>"auth", "digest-uri"=>"\"xmpp/localhost\"", "response"=>"9c6bca9f4cf6f8daf3197a914023729a"}
D, [2013-02-18T03:24:55.788761 #15238] DEBUG -- : SENDING:
<response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>bm9uY2U9IjE5NzEzNzk5NzQiLGNoYXJzZXQ9dXRmLTgsdXNlcm5hbWU9ImNoYXQiLHJlYWxtPSJsb2NhbGhvc3QiLGNub25jZT0iOTJhMzdjMDE4YjljMzIzMzljNGI1MmVlMGIwMmQ2N2UiLG5jPTAwMDAwMD
   AxLHFvcD1hdXRoLGRpZ2VzdC11cmk9InhtcHAvbG9jYWxob3N0IixyZXNwb25zZT05YzZiY2E5ZjRjZjZm
OGRhZjMxOTdhOTE0MDIzNzI5YQ==</response>
D, [2013-02-18T03:24:55.818548 #15238] DEBUG -- : RECEIVED:
<challenge xmlns='urn:ietf:params:xml:ns:xmpp-    
sasl'>cnNwYXV0aD01NTQ2NTVlYjljYWUzZGExMjhmZjBkMWUzNDUzYmIwZQ==</challenge>
D, [2013-02-18T03:24:55.819064 #15238] DEBUG -- : SENDING:
<response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>
D, [2013-02-18T03:24:56.147820 #15238] DEBUG -- : RECEIVED:
<success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>
D, [2013-02-18T03:24:56.148432 #15238] DEBUG -- : SENDING:
<stream:stream xmlns:stream='http://etherx.jabber.org/streams' 
xmlns='jabber:client' to='localhost' xml:lang='en' version='1.0' >
D, [2013-02-18T03:25:56.151018 #15238] DEBUG -- : SENDING:

W, [2013-02-18T03:25:56.212617 #15238]  WARN -- : EXCEPTION:
Jabber::ServerDisconnected
Server Disconnected!
/home/ubuntu/.rvm/gems/ruby-1.9.3-p385/gems/xmpp4r-
0.5/lib/xmpp4r/streamparser.rb:68:in `block in parse'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-
p385/lib/ruby/1.9.1/rexml/parsers/sax2parser.rb:195:in `call'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-
p385/lib/ruby/1.9.1/rexml/parsers/sax2parser.rb:195:in `block in handle'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-
p385/lib/ruby/1.9.1/rexml/parsers/sax2parser.rb:195:in `each'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-
p385/lib/ruby/1.9.1/rexml/parsers/sax2parser.rb:195:in `handle'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-
p385/lib/ruby/1.9.1/rexml/parsers/sax2parser.rb:95:in `parse'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p385/gems/xmpp4r-    
0.5/lib/xmpp4r/streamparser.rb:79:in `parse'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p385/gems/xmpp4r-
0.5/lib/xmpp4r/stream.rb:75:in `block in start'
W, [2013-02-18T03:25:56.212740 #15238]  WARN -- : Exception caught in Parser 
thread! (Jabber::ServerDisconnected)
/home/ubuntu/.rvm/gems/ruby-1.9.3-p385/gems/xmpp4r-    
0.5/lib/xmpp4r/streamparser.rb:68:in `block in parse' 
```

有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T12:39:32.457

[如文档](http://home.gna.org/xmpp4r/rdoc/classes/Jabber/Client.html)中所述，有一种更好的方法来处理错误：

`If you want your connection to survive disconnects and timeouts, catch exception in Stream#on_exception and re-call Client#connect and Client#auth. Don‘t forget to re-send initial Presence and everything else you need to setup your session.`

[Stream#on_exception 链接](http://home.gna.org/xmpp4r/rdoc/classes/Jabber/Stream.html#M000636)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T15:54:21.300

使用 Jabber 通过 facebook 发送消息时，我也遇到了这个问题。

即使包裹在 try/catch 中，有时也会`Jabber::ServerDisconnected`抛出并导致 Web 服务器停止。在 xmpp4r 源代码中，它们`Jabber::ServerDisconnected`在收到断开连接的信号时和`Thread.abort_on_exception = true`在每个线程中抛出

参考[https://github.com/lnussbaum/xmpp4r/blob/master/lib/xmpp4r/streamparser.rb](https://github.com/lnussbaum/xmpp4r/blob/master/lib/xmpp4r/streamparser.rb)和[https://github.com/lnussbaum/xmpp4r/blob/master/lib/xmpp4r/stream.rb](https://github.com/lnussbaum/xmpp4r/blob/master/lib/xmpp4r/stream.rb)

我猜在孤立线程中抛出了异常。我没有解决方案，但有一个`Thread::abort_on_exception = false`全局设置的解决方法（在使用 Jabber 的类/方法中）。所以仍然抛出异常，但我们忽略它。

# css - 如何仅使用适用于印刷的媒体查看网站？

> ID：14929070
> 
> 赞同：2
> 
> 时间：2013-02-18T03:31:44.083
> 
> 标签：css, printing, media-queries, chromium, print-css

我正在尝试在我们的网站上设置一个页面以正常打印，我遇到的问题是，为了测试它，我需要继续打印到文件。

如果有一种方法可以在打印页面时显示页面，我更愿意这样做。

这可能吗？（铬）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:19:13.523

您可以为不同的需求指定不同的 CSS。看看这种编码 CSS 的风格......

```
<html>
<head>
<style>
@media screen
  {
  p.test {font-family:verdana,sans-serif;font-size:14px;}
  }
@media print
  {
  p.test {font-family:times,serif;font-size:10px;}
  }
@media screen,print
  {
  p.test {font-weight:bold;}
  }
</style>
</head>

<body>
....
</body>
</html> 
```

# c# - 用 2 的补码表示十六进制值

> ID：14929072
> 
> 赞同：6
> 
> 时间：2013-02-18T03:32:15.493
> 
> 标签：c#, bit-manipulation

我有一个字符串十六进制值，我需要用 2 的补码表示它。

```
string hx = "FF00"; 
```

我所做的是，将其转换为二进制：

```
 string h = Convert.ToString(Convert.ToInt32(hx, 16), 2 ); 
```

然后反转它，但我不能使用`NOT`运算符。

有没有什么捷径可以反转位然后加 1（2 的补码运算）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T03:59:01.123

答案可能取决于值的位宽对您是否重要。

简短的回答是：

```
string hx = "FF00";
uint intVal = Convert.ToUInt32(hx, 16);      // intVal == 65280
uint twosComp = ~v + 1;                      // twosComp == 4294902016
string h = string.Format("{0:X}", twosComp); // h == "FFFF0100" 
```

的值`h`是“FFFF0100”，它是 hx 的 32 位 2 的补码。如果您期望“100”，那么您需要使用 16 位计算：

```
string hx = "FF00";
ushort intVal = Convert.ToUInt16(hx, 16);    // intVal = 65280
ushort twosComp = (ushort)(~v + 1);          // twosComp = 256
string h = string.Format("{0:X}", twosComp); // h = "100" 
```

请记住，这`uint`是类型的别名`UInt32`和`ushort`别名`UInt16`。为了清楚地了解这种类型的操作，您最好使用显式名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T03:57:17.087

两个补语真的很简单：

```
int value = 100;

value = ~value // NOT
value = value + 1;

//Now value is -100 
```

请记住，二补系统需要反转和加 1。

十六进制：

```
int value = 0x45;

value = ~value // NOT
value = value + 1; 
```

# html - 表格单元格中的图像对齐问题

> ID：14929073
> 
> 赞同：0
> 
> 时间：2013-02-18T03:32:24.903
> 
> 标签：html, css

我有一张桌子，里面有大约 45 张图片和一些图片下方的说明文字。我遇到的问题是当图像后面跟着大文本标题时，每个图像都正确对齐（参见 4.jpg 的标题）。当有多于一行文本时，顶部的图像会略微推到该行中的其他图像之上。我很难弄清楚这是为什么。

这是表格元素的第一行：

```
<table>
    <tr>
    <td><a href="photos/1.jpg" title="354 Address Way"><img src="photos/1_t.jpg" width="72" height="72" alt="" /></a>House</td>
    <td><a href="photos/2.jpg" title="354 Address Way"><img src="photos/2_t.jpg" width="72" height="72" alt="" /></a>House</td>
    <td><a href="photos/3.jpg" title="Foyer"><img src="photos/3_t.jpg" width="72" height="72" alt="" /></a>Foyer</td>
    <td><a href="photos/4.jpg" title="Family Room with small fireplace"><img src="photos/4_t.jpg" width="72" height="72" alt="" /></a>Family Room with small Fireplace</td>
    <td><a href="photos/5.jpg" title="Family Room 2"><img src="photos/5_t.jpg" width="72" height="72" alt="" /></a>Family Room 2</td>
    </tr> 
```

表格 CSS：

```
table {
    width: 570px;
    font-size: .5em;
    text-align: center;
}

table td {
    width: 128px;
    padding: 0px 10px 0px 10px;
}

table img {
    border: 5px solid #3e3e3e;
    border-width: 2px 2px 2px;
}

table a:hover img {
    border: 5px solid #fff;
    border-width: 2px 2px 2px;
    border-color: #8f8f8f;
    color: #fff;
} 
```

无论字幕的长度如何，我都希望图像均匀排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:34:26.627

默认情况下，表格单元格将垂直对齐到中间。只需将它们设置为`vertical-align: top`，可能还有一些额外的填充。

[http://jsfiddle.net/LBb6B/](http://jsfiddle.net/LBb6B/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:34:35.243

`vertical-align:top`向表格单元格添加规则。默认值为[基线](http://www.w3.org/wiki/CSS/Properties/vertical-align)，但您希望将该值设置为顶部。

```
table td {
    width: 128px;
    padding: 0px 10px 0px 10px;
    vertical-align:top;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/N8zSe/)**

# seo - 从 google 和 yahoo 中删除子域

> ID：14929074
> 
> 赞同：1
> 
> 时间：2013-02-18T03:32:41.277
> 
> 标签：seo, robots.txt

如果我有一个名为 abc.aaa.com 的子域

现在我已经搬到 aaa.com/abc

更多我的服务器管理员帮助我在 aaa.com/abc 上重定向到 aaa.com/abc

因此，无论访问 aaa.com/abc 中的哪个页面/部分/文件，它都会强制进入 aaa.com/abc 的主页

因此我不能使用 robots.txt 禁止子域

甚至我不能同时提交给雅虎和谷歌网站管理员

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:52:38.233

重定向子域是正确的做法。您**不想**使用 robots.txt。如果你这样做了，googlebot 将无法再抓取它，并看到它现在驻留在新家中。

不过，您的重定向听起来有问题。您**不**应该将所有内容都重定向到主页。您应该将每个文档重定向到该文档的新位置。当您重定向到主页时，Google 认为重定向与 404 大致相同。他们称之为“软 404”。重定向到主页将失去这些页面拥有的任何搜索引擎排名，并失去进入该子域的入站链接的任何信用。

在没有 robots.txt 的情况下实现了重定向，谷歌和雅虎都将继续前进。它应该在几周内发生。您无需采取进一步行动。

# ios - ios CLLocationManager didUpdateToLocation 经纬度迁移

> ID：14929077
> 
> 赞同：1
> 
> 时间：2013-02-18T03:33:35.347
> 
> 标签：ios

我使用此代码获取经度和纬度。

```
 (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
         fromLocation:(CLLocation *)oldLocation {
    NSLog(@"%f",newLocation.coordinate.latitude);
    self.location = newLocation;
} 
```

但是我得到的经度和纬度与实际地理位置有偏差。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:24:50.920

您应该测试返回的 CLLocation 对象的准确性，并确保它符合您的位置准确性标准。

```
if (newLocation.horizontalAccuracy > 1000) {
  // Throw away this location and wait for another one as this is over 1km away
} 
```

此外，该`locationManager:didUpdateToLocation:fromLocation:`方法在 iOS6 中已被弃用，因此`locationManager:didUpdateLocations:`如果您的目标是 iOS6+，则应使用该方法。

# javascript - css 100 带边框的高度

> ID：14929081
> 
> 赞同：2
> 
> 时间：2013-02-18T03:33:50.720
> 
> 标签：javascript, html, css

我正在使用 html/css/javascript 编写卡片列表。
这是两个示例实现：http:

[//jsfiddle.net/235Tp/](http://jsfiddle.net/235Tp/)

```
#wrapper {
    background: #EEE;
    width: 100%;
    height: 100%;
}

#cards-div {
    background: green;
    width: 100%;
    height: 70%;
    overflow-y:auto;
}

#cards-list {
    width: 100%;
    height: 100%;
}

#cards-list li {
    vertical-align: middle;
    text-align: center;
    height: 100%;
    width: 20%;
    float: left;
    background: #EEE;
    margin-left: -14%;
    border: 1px solid #000;
}

#cards-list li:first-child {
    margin-left: 0;
} 
```

[http://jsfiddle.net/scctk/](http://jsfiddle.net/scctk/)

你可以看到一个有边界，而另一个没有。
带边框的有一个 y-asix 滚动条，我不想包括在内。
如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:37:53.243

只需简单地更改`overflow-y:auto`为`overflow-y:hidden;`如图所示：

```
#cards-div {
background: green;
width: 100%;
height: 70%;
overflow-y:hidden; 
```

}

这是[**演示**](http://jsfiddle.net/235Tp/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:41:03.573

使用`box-sizing: border-box`(and `-moz-box-sizing`) 将边框包含在盒子模型的宽度/高度计算中。

[http://jsfiddle.net/235Tp/3/](http://jsfiddle.net/235Tp/3/)

# pdf - 什么是“打包 PDF”，如何阅读？

> ID：14929086
> 
> 赞同：5
> 
> 时间：2013-02-18T03:34:40.250
> 
> 标签：pdf, pdfbox

我收到了“打包 PDF”文件的版本，其中顶级 PDF 包含子 PDF。

顶级 PDF 主要用作容器。打包在 Adob​​e 阅读器中并不总是很明显（例如，当使用 pdftk 打包时，链接不显示）。我在谷歌上搜索这个词或在我 2012 年的书（“Whittington”、“PDF Explained”、O'Reilly）中几乎找不到。

这是 PDF 的标准部分吗？如果是这样，我将不胜感激指针。PDFBox可以分析吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:23:27.770

关于使用 PDF 作为容器文件格式是否是 PDF 的标准部分的问题：

是的。[ISO 32000-1:2008](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf)在第 7.11.4 节*嵌入式文件流*中对其进行了描述。

最突出的是与某些文档页面相关联的文件，请参见 12.5.6.15，*文件附件注释*，以及通过 PDF 文档名称字典中的 EmbeddedFiles 条目 (PDF 1.4) 与整个文档相关联的文件（请参见 7.7.4，*名称字典*）。

@JesseGood在 PDFBox 网站上的[PDF 文件规范](http://pdfbox.apache.org/userguide/file_references.html)链接解释了如何处理后者。

我对 PDFBox 不是很了解，因此不知道它是否也允许轻松访问其他类型的附件。如果没有，您基本上必须迭代所有页面的注释以查找文件附件注释并根据 PDF 规范处理内容。

# c# - 将 FileName 作为参数传递给 .exe 文件

> ID：14929088
> 
> 赞同：1
> 
> 时间：2013-02-18T03:34:42.603
> 
> 标签：c#, winforms

我有一个使用 C# 和 WinForms 构建的 .exe 应用程序。我有一个注册表项，允许我右键单击文件，然后选择 .exe 来运行该文件。我的问题是 - 如何将所选文件的文件名传递给 .exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:39:35.110

使用`%L`注册表项中的变量作为程序的参数。

例如：

> [HKEY_CLASSES_ROOT*\shell\yourcommand\command] @="Path\To\Your\App.exe \"%L\""

# python - python - 列表中列表之间的通用列表

> ID：14929091
> 
> 赞同：3
> 
> 时间：2013-02-18T03:35:15.930
> 
> 标签：python, list, coordinate

我需要能够在可变数量的列表之间找到第一个公共列表（在这种情况下是坐标列表）。

即这个列表

```
>>> [[[1,2],[3,4],[6,7]],[[3,4],[5,9],[8,3],[4,2]],[[3,4],[9,9]]] 
```

应该返回

```
>>> [3,4] 
```

如果更容易，我可以使用包含坐标的列表之间的所有常见列表（坐标）的列表。

我不能使用集合或字典，因为列表不可散列（我认为？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T03:43:36.370

正确，`list`对象不可散列，因为它们是可变的。 `tuple`对象是可散列的（前提是它们的所有元素都是可散列的）。由于您最里面的列表都是整数，这为解决列表的不可散列性提供了一个绝佳的机会：

```
>>> lists = [[[1,2],[3,4],[6,7]],[[3,4],[5,9],[8,3],[4,2]],[[3,4],[9,9]]]
>>> sets = [set(tuple(x) for x in y) for y in lists]
>>> set.intersection(*sets)
set([(3, 4)]) 
```

在这里，我给你一个集合，其中包含所有子列表中存在的坐标元组。要获取您开始时的列表列表：

```
[list(x) for x in set.intersection(*sets)] 
```

成功了。

为了解决@wim 的问题，如果您真的想要**引用**交集中的*第一个*元素（其中`first`由 first in 定义`lists[0]`），最简单的方法可能是这样的：

```
#... Stuff as before
intersection = set.intersection(*sets)
reference_to_first = next( (x for x in lists[0] if tuple(x) in intersection), None ) 
```

`None`如果交叉点为空，这将返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:53:47.480

如果您正在寻找所有父列表中常见的第一个子列表，则以下内容将起作用。

```
def first_common(lst):
    first = lst[0]
    rest = lst[1:]
    for x in first:
        if all(x in r for r in rest):
            return x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:05:13.110

具有递归函数的解决方案。:)

这将获得第一个重复的元素。

```
def get_duplicated_element(array):
    global result, checked_elements
    checked_elements = []
    result = -1
    def array_recursive_check(array):
        global result, checked_elements
        if result != -1: return
        for i in array:
            if type(i) == list:
                if i in checked_elements:
                    result = i
                    return
                checked_elements.append(i)
                array_recursive_check(i)
    array_recursive_check(array)
    return result

get_duplicated_element([[[1,2],[3,4],[6,7]],[[3,4],[5,9],[8,3],[4,2]],[[3,4],[9,9]]])
[3, 4] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T04:42:48.513

您可以通过列表理解来实现这一点：

```
>>> l = [[[1,2],[3,4],[6,7]],[[3,4],[5,9],[8,3],[4,2]],[[3,4],[9,9]]]
>>> lcombined =  sum(l, [])
>>> [k[0] for k in [(i,lcombined.count(i)) for i in lcombined] if k[1] > 1][0]
[3, 4] 
```

# jquery - 如何将“面纱”div添加到表格行

> ID：14929095
> 
> 赞同：1
> 
> 时间：2013-02-18T03:36:09.927
> 
> 标签：jquery, html-table

我不知道如何正确地将 a 添加`veil`到表格行中。

请看这个[http://jsfiddle.net/gKVpm/](http://jsfiddle.net/gKVpm/)

我想要发生的是，在加载表格的第一行和第三行时，将通过添加一个 div 来禁用它，该 div 将充当面纱来覆盖它。我试图动态创建一个 div（面纱），但我不知道将面纱添加到行的正确方法。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:52:41.363

你可以试试

```
function putVeil (rowNumber) {
    $("#tblData tbody tr:eq("+rowNumber+")").each(function(i) {
        var offset = $(this).offset();
        var veil = $('<div class="divVeil"></div>').appendTo('body').css({
            position: 'absolute',
            top: offset.top,
            left: offset.left,
            height: $(this).outerHeight(),
            width: $(this).outerWidth()
        });
    });
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/gKVpm/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:51:09.723

面纱的目的究竟是`div`什么？从您的小提琴的外观来看，您只想更改背景颜色，在这种情况下，您可以将 jQuery 的[`.addClass()`](http://api.jquery.com/addClass/)功能与 CSS 规则结合使用，直接向您`tr`的 s 添加一个类。

你的 JavaScript 是这样的：

```
function putVeil (rowNumber) {
    $("#tblData tbody tr:eq("+rowNumber+")").addClass("veil");
} 
```

这适用于 CSS 规则：

```
.veil {
    background-color: #C3C3C3;
} 
```

摆弄小提琴：http: [//jsfiddle.net/gKVpm/1/](http://jsfiddle.net/gKVpm/1/)

如果您想将您的“面纱”想法用于更复杂的事情，请告诉我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T03:44:48.757

更容易，我建议向该行添加一个类，而不是使用确定它已禁用的“面纱”，然后使用该 css 类名称使用 jquery 进行验证，此外，如果您可以使用该 css 类作为禁用样式这也是你所要求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T03:48:15.747

将您的类的样式定义放在 CSS 中。因为大小由父元素决定，所以您可以将它们都设置为 100% `width`。`height`

[http://jsfiddle.net/UjcB2/2](http://jsfiddle.net/UjcB2/2)

# java - 我找不到我的拼写/标点错误。我的代码运行良好，但有问题

> ID：14929096
> 
> 赞同：-2
> 
> 时间：2013-02-18T03:37:07.153
> 
> 标签：java, punctuation, spelling

我用 Java 编写了一个程序，它允许用户使用扫描仪根据运动员人数命名某些运动，反之亦然。我几乎使用了我能想到的所有组合来运行它，并且效果很好。在作为类项目提交以进行评分后，我们应该使用的自动在线编译器返回 2 个错误。教授告诉我，我的拼写/标点符号应该有问题，但我无法确定。有人可以看看并告诉我他们是否找到了什么吗？感谢所有帮助！

```
import java.util.Scanner;

public class SportsQuiz {

public static void main(String[] args) {

    Scanner s = new Scanner(System.in);

    final String PROMPT = "Enter 1 to guess a sport, 2 to guess how"
            + " many players: ";

    final int NUMOFBASKET = 5;
    final int NUMOFBASE = 9;
    final int NUMOFCURL = 4;
    final int NUMOFFOOT = 11;

    System.out.print(PROMPT);

    int promptnum = s.nextInt();

    if(promptnum == 1) {

        System.out.print("Choose number of players: ");

        int numplayers = s.nextInt();

        s.nextLine();

        if(numplayers != NUMOFBASKET && numplayers != NUMOFBASE 
                && numplayers != NUMOFCURL && numplayers != NUMOFFOOT){

            System.out.print("Invalid choice.");

        } else {

            System.out.print("Which sport has " + numplayers
                    + " players? ");

            String playsport = s.nextLine();

            if(playsport.equals("Basketball")
                    ||playsport.equals("basketball")
                    && numplayers == NUMOFBASKET) {

                System.out.print("Correct!");

            } else if(playsport.equals("Football")
                    ||playsport.equals("football") 
                    && numplayers == NUMOFFOOT) {

                System.out.print("Correct!");

            } else if(playsport.equals("Baseball")
                    ||playsport.equals("baseball")
                    && numplayers == NUMOFBASE) {

                System.out.print("Correct!");       

            } else if(playsport.equals("Curling")
                    ||playsport.equals("curling")
                    && numplayers == NUMOFCURL) {

                System.out.print("Correct!");

            } else {

                System.out.print("Incorrect");

            }

        }

    } else if(promptnum == 2) {

        System.out.print("Choose a sport: ");

        s.nextLine();

        String sport = s.nextLine();

        if(sport.equals("Basketball")||sport.equals("basketball")) {

            System.out.print("How many players are on a " + sport 
                    + " team? ");

            int numsportplayers = s.nextInt();

            if(numsportplayers == NUMOFBASKET){

                System.out.print("Correct!");

            } else {

                System.out.print("Incorrect!");

            }

        } else if(sport.equals("Baseball")||sport.equals("baseball")) {

            System.out.print("How many players are on a " + sport 
                    + " team? ");

            int numsportplayers = s.nextInt();

            if(numsportplayers == NUMOFBASE){

                System.out.print("Correct!");

            } else {

                System.out.print("Incorrect!");

            }

        } else if(sport.equals("Football")||sport.equals("football")) {

            System.out.print("How many players are on a " + sport 
                    + " team? ");

            int numsportplayers = s.nextInt();

            if(numsportplayers == NUMOFFOOT){

                System.out.print("Correct!");

            } else {

                System.out.print("Incorrect!");

            }

        } else if (sport.equals("Curling")||sport.equals("curling")) {

            System.out.print("How many players are on a " + sport 
                    + " team? ");

            int numsportplayers = s.nextInt();

            if(numsportplayers == NUMOFCURL){

                System.out.print("Correct!");

            } else {

                System.out.print("Incorrect!");
            }

        } else {

            System.out.print("Invalid Choice.");

        }

    } else {

        System.out.print("Invalid Choice.");

    }

  }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:50:22.047

在一种情况下，您的“不正确”没有感叹号。

此外，在一种情况下，您有“无效的选择”。但在另一个你有“无效的选择”。（大写 C）。

我猜这是两个错误。

# python - 有没有办法为python中的每个实例创建唯一的字典属性

> ID：14929098
> 
> 赞同：1
> 
> 时间：2013-02-18T03:37:13.663
> 
> 标签：python, class, dictionary

使用一个类在字典中创建多个实例，它们的属性不是唯一的。我希望他们每个人都有自己独特的属性。你怎么做到这一点？

代码：

```
class a(object):

    attr_a = {}

    def __init__(self, a={}):

        self.attr_a = a

if __name__ == '__main__':

    b = a()
    c = a()
    b.attr_a['abc'] = 'abc'
    c.attr_a['abc'] = 'def'

    print(b.attr_a)
    print(c.attr_a) 
```

结果：

```
{'abc': 'def'}
{'abc': 'def'} 
```

想要的结果：

```
{'abc': 'abc'}
{'abc': 'def'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:43:27.957

这里有两个问题：

1) 对于实例级属性，与类级属性相反，不要在类级声明。所以，`attr_a = {}`在你的课堂上删除。

2）默认值`a={}`是在类/函数声明时评估的，而不是实例创建/函数调用时，所以很少应该使用可变对象作为默认值。这会导致使用默认值创建的类的所有实例`a`共享相同的`attr_a`字典。您应该将`a=None`其用作默认值，然后在其中实例化它`__init__`，如下所示：

```
def __init__(self, a=None):
        self.attr_a = a or {} 
```

# mysql - 给定这个关系图，如何执行这个 MySQL 查询

> ID：14929102
> 
> 赞同：0
> 
> 时间：2013-02-18T03:37:54.537
> 
> 标签：mysql, foreign-keys, relational-database

我有以下关系图，其中箭头代表外键。蓝色的单词是表名，下面的单词是列名。

![在此处输入图像描述](../Images/1a9b554c2d413395595645870a84fedb.png)

我的问题是如何从该表中提取以下数据：

- ID=1 的学生的 GPA 是多少？

- 按部门划分的学生的平均 GPA 是多少？

鉴于：只有五个字母等级，其值为 A=4、B=3、C=2、D=1 和 F=0，而 GPA 是课程学分 x 课程等级值除以总学分 x 4 的总和. （所以 take.grade 是一个从 0 到 4 的整数）。

我一直试图解决这个问题几个小时，但无济于事。谁能引导我朝着正确的方向前进？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:58:03.530

好的，我实际上在 15 年前就必须为一个客户做这个，并且为所有学生的整个数据库做了这个，一旦你有了这些部分就不那么困难了。

没有您需要指导的确切查询。

从将数据拉入 TEMPORARY 表的单个查询开始

```
CREATE TEMPORARY TABLE AllStudentsCourses
SELECT blah... from blah... join blah.. where... order by ... 
```

一个人已注册的所有课程的列表，当你在它的时候，有列在每类基础上计算获得 AF 的成绩。您还需要课程的学分，因为这是计算 GPA 的基础。

一个 3 小时的 A 课程可以获得 3 学分的 GPA。一个 6 小时的 A 课程可以获得 6 学分的 GPA。B 的 6 小时课程对 GPA 的加权值较少，您需要汇总汇总。

现在，一旦您完成了学生尝试的所有课程，您将需要按照示例所述计算每个课程。如果您想在第一个查询中应用它，请执行此操作。

一旦你有了它，你就可以汇总尝试的总学分与获得的学分。

基础数学应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:46:32.247

我不太明白 GPA 是如何计算的，认为您的原始帖子有问题。这是一个可能正确也可能不正确的起点：

```
SELECT avg(t.grade) 
FROM takes t 
   INNER JOIN course c 
   ON t.course_id = c.course_id 
WHERE t.ID = 1;

SELECT c.dept_name, avg(grade)
FROM takes t 
    INNER JOIN course c 
    ON t.course_id = c.course_id
GROUP BY c.dept_name 
```

# javascript - 有人可以解释为什么我得到“需要对象”错误

> ID：14929103
> 
> 赞同：0
> 
> 时间：2013-02-18T03:37:54.660
> 
> 标签：javascript, html

“前几天我发布了一个类似的问题，感谢@Alnitak 的帮助！但是，我正在尝试在 2 个给定时间之间启用/禁用/启用 2 个链接（a href）并收到“需要对象”错误。就像id 使用失去焦点。page_load 函数通过 onload 调用。nStart & nExpired 相等的开始和结束时间，我使用 SetInterval 而不是 setTimeout（我修改了 Alnitak 的代码）。

如果这些是按钮或者我可以使用 PHP，我不会有问题，但是“权力”会通过超链接获得它。请告诉我这是可能的..大声笑

错误发生在第二个 IF 条件的第一行，即使链接可见。

```
var myInterval;

function page_load() {
    myInterval = setInterval(function(){ShowLink()},60000);
}

function ShowLink() {
    var now = new Date();
    var clock = now.toTimeString();
    var nStart = 1310;
    var nExpired = 1312;
    var MigTime = 60 * now.getHours() + now.getMinutes();

    var disable = (day === 0 && (MigTime >= nStart && MigTime < nExpired));
    if (disable == true) {
        //hide links
        document.getElementById("prdlnk").style.visibility = "hidden";
        document.getElementById("viewlnk").style.visibility = "hidden";
        document.getElementById("MigMsg").innerHTML= "Scheduled Migration in Progress. Please try later.";

    }

    if (MigTime > nExpired) {
        //visible
        document.getElementById("prdlnk").style.visibility = "visible";
        document.getElementById("viewlnk").style.visibility = "visible";
        document.getElementById("MigMsg").innerHTML= "";
        //     clearInterval(myInterval);
    }
} 
```

在此先感谢，弗农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:40:44.040

可能是错误的复制粘贴，但此行缺少`'`

```
document.getElementById(prdlnk').style.visibility = "visible"; 
```

应该

```
document.getElementById('prdlnk')... 
```

另外，为什么要混合引号和双引号？选择一种风格并坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:43:57.680

```
var disable = (day === 0 && (MigTime >= nStart && MigTime < nExpired)); 
```

在这行代码中，day === 0 背后的意图是什么？=== 是对对象类型和值的测试，它不是赋值运算符。尝试日 = 0

# mysql - MYSQL；IF 然后 SET 语句

> ID：14929107
> 
> 赞同：0
> 
> 时间：2013-02-18T03:39:12.790
> 
> 标签：mysql

似乎无法使以下声明起作用，有什么建议吗？

```
Set @input := '1234567';
if length(@input)= 7 then SET id=@input; end if; 
```

提前致谢，

雷内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:48:31.540

尝试这个：

```
Set @input := '1234567';
SELECT IF(length(@input)=7, @input, '((something here))') AS id; 
```

# ios - AFNetworking AFHTTPRequestOperation 块永远不会被调用

> ID：14929115
> 
> 赞同：4
> 
> 时间：2013-02-18T03:40:35.210
> 
> 标签：ios, objective-c-blocks, afnetworking, nsmutableurlrequest

我正在使用 AFNetworking 将多部分表单发送到 Web 服务器，但我的`AFHTTPRequestOperation`. 在我启动它之后，它的成功和失败块永远不会被调用。

这是我的代码（它的简历）

```
 NSMutableURLRequest *request = [[ServerAPI sharedClient] multipartFormRequestWithMethod:@"POST" path:postUrl parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
        [formData appendPartWithFileData:picture.picture_data name:@"InputFile" fileName:picture.name mimeType:@"image/jpg"];
    }];

    AFHTTPRequestOperation *operation = [[ServerAPI sharedClient] HTTPRequestOperationWithRequest: request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Success");
    } failure: ^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Failure");
    }];

    [operation setUploadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        NSLog(@"%f", (totalBytesRead / (float) totalBytesExpectedToRead));
    }];         
    [[ServerAPI sharedClient] enqueueHTTPRequestOperation:operation]; 
```

我可以看到进度日志，但从不调用成功和失败块。

`picture.picture_data`是用 ServerAPI`NSData`初始化的，是 的子类，是单例方法。`UIImageJPEGRepresentation(image, 0.7)``AFHTTPClient``sharedCliend`

AFNetworking 不调用我的块的原因是什么，即使没有正确的错误消息？

谢谢你们！

**编辑**

我在此之前使用相同的 URL 执行了一个获取请求，并且它照常工作。我使用的网址是：`part/_layouts/UploadEx.aspx?List=%7BD432BF97-7175-40C1-8E0D-27D8661CBC90%7D&RootFolder=%2Fpwa%2Fpart%2FLibrary&Source=http%3A%2F%2Fwww%2Emysite%2Ecom%2Fpwa%2Fpart%2FLibrary%2FForms%2FAllItems%2Easpx&IsDlg=1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:16:58.120

在您的代码中，检查您的`postUrl`. `BaseURL+postURL`必须有效。尝试使用 URL 使用普通网络浏览器上传图像`BaseURL+postURL`。

**编辑**

方法`HTTPRequestOperationWithRequest:success:failure:`不适用于文件上传，但适用于 json/html 获取。尝试使用

```
AFHTTPRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:request];

[operation setUploadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        NSLog(@"%f", (totalBytesRead / (float) totalBytesExpectedToRead));
    }];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Success");
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Failure");
    }];

[[ServerAPI sharedClient] enqueueHTTPRequestOperation:operation]; 
```

# c++ - 如何修改函数中的字符串？

> ID：14929123
> 
> 赞同：1
> 
> 时间：2013-02-18T03:42:12.730
> 
> 标签：c++, string, function, pointers

说我有

```
string stringInput = "hello";

alter(stringInput);

cout << stringInput; 
```

和一个功能：

```
void alter(string stringIn){
     stringIn[0] = stringIn[3];
} 
```

理想情况下，我希望 cout 制作“lello”。但现在它只是像原来一样返回“hello”。我知道这与地址和指针有关......我将如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:43:20.827

您需要做的就是通过引用传递字符串：

```
void alter(string& stringIn){
     //          ^
     stringIn[0] = stringIn[3];
} 
```

您还应该相应地修改您对`alter()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T03:44:35.677

这实际上只是因为创建了一个新的字符串副本以在函数中使用。要直接在函数中修改字符串，请在函数头中的字符串名称前添加一个 &，如下所示：

```
 void alter(string &stringIn){ 
```

通过引用传递字符串。否则，您可以只从函数返回一个字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T03:46:21.300

您的 stringIn 是一个局部变量。因此，当您将它作为值传递给函数时，它只会创建一个具有不同地址的新 stringIn。因此，您在 alter 中所做的更改只会影响新的 stringIn。您需要接收 stringIn 的引用`alter`以使其工作。

```
void alter(string& stringIn){

 stringIn[0] = stringIn[3];
} 
```

# c# - SqlDatasource 中的空白值

> ID：14929124
> 
> 赞同：0
> 
> 时间：2013-02-18T03:42:15.600
> 
> 标签：c#, asp.net, database, sql-server-2008, datasource

在另一个页面上设置我`SqlDataSource`的值以显示这些值后，我在评论页面上输入了 2 次测试值，它们显示为 2 个空白。

我想我在将它们放入 SQL Server 数据库值的表中时遗漏了什么？

我不确定这里需要什么信息，所以请告诉我。

提前致谢

**EDIT #1 用于用户对 CODE 的请求**

```
protected void btnSend_Click(object sender, EventArgs e)
{
    Page.Validate("vld2");
    SendMail();
    lblMsgSend.Visible = true;

    //SQL Server Database
    SqlConnection conn; //manages connection to database
    SqlCommand cmd; //manages the SQL statements

    string strInsert; //SQL INSERT Statement

    try
    {
            //create a connection object
            conn = new SqlConnection("Data Source=localhost\\sqlexpress;" +
                                     "Initial Catalog=RionServer;" +
                                     "Integrated Security=True;");
            //Build the SQL INSERT Document
            strInsert = "INSERT INTO CommentsAdmin (Name,Phone,Email,Comments)"
                + "VALUES(@Name,@Phone,@Email,@Comments);";

            //associate the INSERT statement with the connection
            cmd = new SqlCommand(strInsert, conn);

            //TELL the SqlCommand WHERE to get the data from
            cmd.Parameters.AddWithValue("Name", txtName.Text);
            cmd.Parameters.AddWithValue("Phone", txtPhone.Text);
            cmd.Parameters.AddWithValue("Email", txtEmail.Text);
            cmd.Parameters.AddWithValue("Comments", txtComment.Text);

            //open the connection
            cmd.Connection.Open();

            //run the SQL statement
            cmd.ExecuteNonQuery();

            //close connection
            cmd.Connection.Close();

            //display status message on the webpage
            lblMsgSend.Text = "Thank you for the comment! Please hit the 'Return to Main Page' to return to the Main Page!";
        }
        catch (Exception ex)
        {
            lblMsgSend.Text = ex.Message;
        }

    txtPhone.Text = "";
    txtEmail.Text = "";
    txtName.Text = "";
    txtComment.Text = "";
} 
```

**编辑#2**

数据库中的名称、电话、电子邮件和评论的值似乎是空的，当我测试查询时，我认为它正在注册条目，只是没有将值带入 SQL？

**编辑#3**

由于 coder 和 rs 的建议，我已经按照他们所说的做了。现在我得到了这个错误。“字符串或二进制数据将被截断。语句已终止。” 代码也已更新。

**编辑#4**

![](../Images/0841c4de55e43c2403799dc518d14406.png)

![](../Images/c7a56df5b99b225c6c1230cf46f91160.png)

[这个问题是SQL Server Error, 'Keyword not supported 'datasource'](https://stackoverflow.com/questions/14928700/sql-server-error-keyword-not-supported-datasource)的后续问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:58:26.360

在将值输入到 SQL 作为服务器之前删除所有与`""`此类似的内容，`txtPhone.Text = "";`您正在输入空值。因此，即使您为文本框提供了一些值，它也会采用预定义的 NULL 值，并且不会输入其中任何一个值。

# sql - 提取时间并转换为列然后按日期分组

> ID：14929128
> 
> 赞同：0
> 
> 时间：2013-02-18T03:43:11.503
> 
> 标签：sql, sql-server

这是我的第一篇文章。当我试图找到解决问题的方法时，我想向大家寻求帮助。

我目前有这个数据

```
Date                    Status   
----------------------- -------------
2013-01-02 08:49:31.000 A
2013-01-02 18:03:29.000 B
2013-01-03 08:54:59.000 A
2013-01-03 18:04:43.000 B
2013-01-04 08:53:26.000 A
2013-01-04 18:08:43.000 B 
```

我想要这样的输出

```
Date                     A              B   
----------------------- ------------    ------------
2013-01-02 00:00:00.000 08:49:31.000    18:03:29.000
2013-01-03 00:00:00.000 08:54:59.000    18:04:43.000
2013-01-04 00:00:00.000 08:53:26.000    18:08:43.000 
```

我目前的输出是什么

```
Date                    A               B   
----------------------  ------------    ------------------
2013-01-02 00:00:00.000 08:49:31.000    NULL
2013-01-02 00:00:00.000 NULL            18:03:29.000
2013-01-03 00:00:00.000 08:54:59.000    NULL
2013-01-03 00:00:00.000 NULL            18:04:43.000
2013-01-04 00:00:00.000 08:53:26.000    NULL
2013-01-04 00:00:00.000 NULL            18:08:43.000 
```

我以前做过行到列的查询，但是数据可以求和，所以很容易把它做成一列，但是这个包含同一字段的日期和时间。

任何将不胜感激，TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:49:40.360

试试这个

```
SELECT DATE_Field, 
MAX(CASE STATUS WHEN 'A' THEN Date_Time END) A,
MAX(CASE STATUS WHEN 'B' THEN Date_Time END) B
FROM 
(
SELECT CONVERT(Date,DateField,101) Date_Field, 
CONVERT(Time,DateField) Date_Time, Status
FROM YourTable
) v
GROUP BY DATE_Field 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:56:31.543

您可以尝试一下，您可能需要一个子字符串而不是转换时间。不确定该转换是否正常工作...

```
select convert(varchar(10),isnull(a.Date,b.Date),101),
   convert(time,a.Date) A,
   convert(time,b.Date) B
from table a
inner join table b 
on convert(varchar(10),a.Date,101) = convert(varchar(10),b.Date,101)
where a.Status = 'A'
and b.Status = 'B' 
```

# mysql - DML和DDL语句可以一起在一个事务中吗

> ID：14929129
> 
> 赞同：0
> 
> 时间：2013-02-18T03:43:15.263
> 
> 标签：mysql, sql

我想创建一个表并在一个事务中执行插入操作。这可以在 MySQL 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:49:03.867

根据 MySQL：

> 有些语句不能回滚。通常，这些包括数据定义语言 (DDL) 语句，例如创建或删除数据库的语句，创建、删除或更改表或存储例程的语句。

[文档](http://dev.mysql.com/doc/refman/5.0/en/cannot-roll-back.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:48:06.330

不，MySQL（好吧，InnoDB）不支持 DDL 语句的事务。

# jquery - 需要 JQuery Graph 插件

> ID：14929132
> 
> 赞同：1
> 
> 时间：2013-02-18T03:43:25.027
> 
> 标签：jquery, html, jquery-ui, graph

任何人都可以推荐任何易于使用的 jQuery 图形绘制插件吗？

我有一些条件

*   数据必须取自 JSON。
*   图表必须有 PIE、LINE、BAR、COLUMN 选项。
*   它必须是免费软件。
*   可能会向下钻取支持。
*   跨平台/浏览器兼容 IE 9+。

我找不到任何满足我需求的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:51:14.053

请查看以下链接，这些链接可能会帮助您找出满足您的需求所需的东西，

[28个丰富的数据可视化工具](http://www.developria.com/2009/12/28-rich-data-visualization-too.html)

[13 个图表和图形绘图 javascript 插件](http://www.queness.com/post/10781/13-chart-and-graph-plotting-javascript-plugins)

# php - Heroku 上的 redis 是否可以在没有插件的情况下使用？

> ID：14929136
> 
> 赞同：10
> 
> 时间：2013-02-18T03:43:51.877
> 
> 标签：php, heroku, redis

我正在研究将 Heroku 用于使用 Redis 的 PHP 应用程序。我已经看到了各种 redis 插件。例如，使用 Redis To Go，您可以在 PHP 代码中使用环境变量 $_ENV['REDISTOGO_URL'] 作为 Redis 服务器的 URL。

这些附加组件中的大多数都有自己的定价方案，我想避免这些方案。我对heroku的工作方式有点困惑。有没有一种方法可以在没有插件的情况下在我自己的 Dynos 上安装 Redis？

例如，有一个充当服务器的工作人员测功机，而另一个充当客户端的工作人员测功机？如果可能的话，我会怎么做：

1.  在 Dyno 上安装和运行 redis 服务器？这与在任何其他 unix 机器上安装一样吗？我可以 ssh 到它并安装我想要的任何东西吗？

2.  让一台测功机通过 TCP 使用 IP/端口连接到另一台测功机？工作人员测功机是否有自己的可参考 IP 地址或我可以使用的命名 URL？我可以以某种方式从 PHP 动态获取它们吗？

redis 客户端的 php 代码假设有一个可以连接的主机和端口，但不知道它会是什么？

```
$redis = new Predis\Client(array(
        "scheme" => "tcp",
        "host" => $host, //how do i get the host/port of a dyno? 
        "port" => $port)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T05:17:41.130

在测功机上运行 redis 是一个有趣的想法。您可能需要创建一个 redis [buildpack](https://devcenter.heroku.com/articles/buildpacks)，以便您的 dynos 可以下载并运行 redis。由于[“redis 除了工作的 GCC 编译器和 libc 之外没有其他依赖项”，](http://redis.io/topics/quickstart)这在技术上应该是可行的。

但是，您可能会遇到以下问题：

1.  Heroku dynos 没有静态 IP 地址

    > [“测功机没有静态 IP 地址……您永远无法通过 IP 直接访问测功机”](https://devcenter.heroku.com/articles/dynos#isolation-and-security)

    即使您在测功机上设置并运行 Redis，我也不知道有一种方法可以找到该测功机实例并向其发送 redis 请求。这意味着您的 Redis 服务器可能必须在与您的 Web 服务器/主应用程序相同的测功机上运行。

    这**也**意味着，如果您尝试通过创建更多 Web dyno 来扩展您的应用程序，您还将创建更多本地 redis 实例。他们之间不会共享数据。这并不是一个特别可扩展的设计，但如果您的应用程序小到只需要一个网络测功机，它可能会起作用。

2.  Heroku dynos 有一个临时文件系统

    > [“任何其他测功机中的进程都看不到写入的文件，并且在测功机停止或重新启动时，写入的任何文件都将被丢弃”](https://devcenter.heroku.com/articles/dynos#isolation-and-security)

    默认情况下，Redis 将其 RDB 文件和 AOF 日志写入磁盘。您需要定期在某处备份这些内容，以便在您的测功机重新启动后获取和恢复。请参阅[有关 Redis 持久性的文档](http://redis.io/topics/persistence)。

3.  Heroku dynos 经常重启

    > [“测功机每天至少循环一次，或者每当测功机歧管检测到底层硬件出现故障时”](https://devcenter.heroku.com/articles/dynos#the-dyno-manifold)

    每次 dyno 启动并恢复数据时，您都需要能够启动您的 redis 服务器。

4.  Heroku dynos 有 512MB 的 RAM

    > [“每个测功机都分配了 512MB 的内存来运行”](https://devcenter.heroku.com/articles/dynos#memory-behavior)

    如果您的 Redis 服务器与您的 Web 服务器在同一台测功机上运行，​​请减去您的主应用程序所需的 RAM。你需要多少 Redis 内存？

    以下是一些试图估计和跟踪 Redis 内存使用的问题：

    *   [Redis：数据库大小与内存的比率？](https://stackoverflow.com/questions/4731873/redis-database-size-to-memory-ratio)
    *   [分析 Redis 内存使用情况](https://stackoverflow.com/questions/5532701/profiling-redis-memory-usage)

--

**总体而言：**我建议阅读[12 Factor Apps](http://www.12factor.net/)以进一步了解 heroku 的预期应用程序模型。

简短的版本是 dynos 旨在成为可以轻松创建和丢弃以满足需求的独立工作人员，并且 dynos 访问各种资源以读取或写入数据并为您的应用程序提供服务。redis 实例是资源的一个示例。正如您从上面的项目中看到的那样，通过使用 redis 附加组件，您可以获得一些保证是静态的、稳定的和可访问的。

**阅读材料：**

1.  [http://www.12factor.net/](http://www.12factor.net/) - 特别是[流程](http://www.12factor.net/processes)和[服务](http://www.12factor.net/backing-services)
2.  [Heroku 过程模型](https://devcenter.heroku.com/articles/process-model)
3.  [Heroku 博客 - 过程模型](https://blog.heroku.com/archives/2011/6/20/the_new_heroku_1_process_model_procfile/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T04:11:53.563

redis 具有客户端服务器架构，您可以将其安装在一台机器上（在您的情况下为 dyno）并从任何客户端访问它。

有关库的更多帮助，您可以参考[此链接](http://redis4you.com/code.php) ，或者您可以浏览此[Redis 文档](http://redis.io/topics/twitter-clone)，这是一个使用 Redis 广告数据库和 PHP 实现 twitter 克隆的简单案例研究

# winforms - XtraGrid & DataNavigator 控制问题

> ID：14929140
> 
> 赞同：0
> 
> 时间：2013-02-18T03:44:06.223
> 
> 标签：winforms, devexpress, xtragrid

我有一个包含 12 条记录的 GridControl，我正在使用 DataNavigator 控件在记录之间导航。
当我单击 gridview 中的任何记录（例如第 3 条记录）时，DataNavigator 显示如下内容：`Records 7 of 12`
看起来它显示**随机**值，使用 TextStringFormat 格式化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:45:00.863

当使用属于 GridControl 的 DataNavigator 控件时，此行为是可重现的，并且数据在除键列之外的任何列上排序。此行为是正确的，因为 DataNavigator 控件绑定到数据视图或数据表。**DataNavigator 控件不直接绑定到显示此数据的控件。**

[请用ControlNavigator](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsControlNavigatortopic)控件替换 DataNavigator控件。[ControlNavigator.NavigatableControl](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsControlNavigator_NavigatableControltopic)属性必须设置为您的 GridControl 。在这种情况下，导航器将根据 XtraGrid 中的行顺序移动焦点。
或者使用 GridControl 的[Embedded Navigator 功能](http://documentation.devexpress.com/#WindowsForms/CustomDocument522)。
您可以在以下帮助文章中阅读有关这些方法的更多信息：[使用导航器](http://documentation.devexpress.com/#WindowsForms/CustomDocument1030)

# c# - 我需要两个 xmlns:local="clr-namespace" 吗？

> ID：14929141
> 
> 赞同：10
> 
> 时间：2013-02-18T03:44:08.663
> 
> 标签：c#, silverlight, windows-phone-7, settings, xml-namespaces

这是我希望在 Visual Studio 2010 中使用 c# 为我的 Windows Phone 应用程序进行的设置：

`**MainPage.xaml**`包含具有附加属性的元素，其值可由用户修改/保存。

```
**MainPage.xaml.cs** 
```

第一个命名空间是 PhoneApp ，它内部是一个名为 MyNamespace 的嵌套命名空间，它声明了依赖属性。它有效（谢谢，丹尼尔）

`**SettingsSample.xaml**`这将允许用户更改`MainPage.xaml`任何元素的附加属性的值并自动保存更改。

`**AppSettings.cs**`一个完全重现本教程中第一个清单的类：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769510%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769510%28v=vs.105%29.aspx)

该页面声明与 MainPage.xaml.cs (PhoneApp) 相同的 NameSpace，然后是一个名为 AppSettings 的公共类，与教程中的完全一样。

为了将所有内容结合在一起，我做了：

```
**MainPage.xaml**

xmlns:local="clr-namespace:PhoneApp.MyNamespace" 
```

我需要这个来使用附加的属性

```
<phone:PhoneApplicationPage.Resources>
    <local:AppSettings x:Key="appSettings"></local:AppSettings>
</phone:PhoneApplicationPage.Resources> 
```

混乱开始。在教程中，他们将其放在设置页面上，但我猜是因为他们的设置页面也是包含具有绑定到已保存设置的属性的元素的页面。我的在主页上，所以我把它放在这里。回顾一下，我的设置页面将只使用方法来更改/保存这些值（这些方法在 AppSettings.cs 中）。同样在教程中，他们添加了这个：

```
xmlns:local="clr-namespace:SettingsSample" 
```

到设置页面（其中“SettingsSample”是包含可保存设置的声明/get-Set 方法的命名空间），但出于同样的原因，我尝试将其放在主页上，但只能完成一个 xmlns:local 声明. 我尝试了几件事将它们一个接一个地放置，但它不起作用。这是我将在下面列出的两个错误的关键。

主页的一些元素有这个，例如：

```
local:MyClass.Son="{Binding Source={StaticResource appSettings}, Path=son1, Mode=TwoWay}" Style="{StaticResource pad}" 
```

“儿子”是附属物

好的，所以我尝试了不同的不同的东西，但它从来没有奏效。我能得到的最好的结果是在 MainPage.xaml 中它无法创建 AppSettings 的实例。现在不同了，我有两个错误。

- 本地类型：AppSettings 未找到

- xml 命名空间 PhoneApp.MyNamespace 中不存在标签 AppSettings。

我想这是因为我没有把

```
 xmlns:local="clr-namespace:PhoneApp" 
```

但我已经有了

```
xmlns:local="clr-namespace:PhoneApp.MyNamespace" 
```

并且不能两者兼而有之。（对我来说，一个包含在另一个中......）我列出所有情况的原因是因为我有点期待在我解决这个问题后会遇到其他麻烦。我希望这个信息足够清楚，有人可以帮助我。我花了这么多时间，我开始失去理智，所以我希望没有愚蠢的错误。当然，我可以添加任何需要的信息。无论如何感谢您的阅读！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T07:34:16.227

这些是 XML 名称空间映射。具有以下内容：

```
xmlns:local="clr-namespace:PhoneApp" 
```

该`local`部分是 XML 命名空间，`PhoneApp`而是来自您的 .NET 代码的命名空间。有了这个定义，您就可以在 XML 中引用这个命名空间中的类，如下所示：

```
<local:MyClassInPhoneAppNamespace/> 
```

因为该`local`部分只是一个名称，您可以将其更改为您喜欢的任何名称：

```
xmlns:fish="clr-namespace:PhoneApp" 
```

并使用如下：

```
<fish:MyClassInPhoneAppNamespace/> 
```

这应该意味着您不再有碰撞。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T07:07:12.303

在这种情况下，“local”只是您引用的命名空间的友好名称。它是完全可以互换的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-24T08:52:10.410

我需要在同一个文件中导入两个本地文件，如下所示

```
xmlns:local="clr-namespace:Generique.Views.Assets.Entries"
xmlns:local="clr-namespace:Generique.Views.Assets" 
```

我只是更改名称，它工作正常

```
xmlns:local="clr-namespace:Generique.Views.Assets.Entries"
xmlns:footer="clr-namespace:Generique.Views.Assets" 
```

# php - AJAX 调用 PHP 以从数据库构建和显示表

> ID：14929150
> 
> 赞同：0
> 
> 时间：2013-02-18T03:45:17.730
> 
> 标签：php, ajax

我正在学习使用 mysqli 和 AJAX 并使用 AJAX 构建一个简单的应用程序，以将数据插入数据库并在数据库的表中显示数据。该表应在加载网页时显示当前信息，然后在使用 HTML 表单将记录添加到数据库时随时更新。我有几个问题。

1.  到目前为止，该表单在我的主 HTML 文件中工作，除了它离开页面并打开 addActorInfo.php，而不是仅仅刷新主页。
2.  当我在浏览器中打开 getActorInfo.php 文件时，我的表格正在工作，但它没有被拉入主页。

任何建议，将不胜感激。

**编辑信息：**我解决了第 1 个问题并更新了 HTML 代码以反映更改。目前，我相信我的 drawTable() 函数中某处存在一个错误，该错误阻止了 PHP GET FILE 生成的表格返回到主页。我尝试使用语句“document.getElementById("actor_display").innerHTML=xmlhttp.responseText;”，但它仍然没有出现。

**主要 HTML**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:51:11.837

为什么不在ajax 上使用[jQuery ？](http://jquery.com/)

```
var data = $('#yourdatainsertionform');
$.ajax({
  data:data,
  method:'POST', //Or get
  url:'yourphp.php',
  success:function(result){
    $('#actor_display').html(result);
  },
  error:function(){
    alert("Something went wrong");
}); 
```

通过使用 jQuery，你会让你的生活更轻松。不再有 IE 的头发撕裂时刻，以及如此简单的 ajax 请求和表单验证。基本上，你可以用 javascript 做的事情，用 jQuery 做起来更容易。

用法很简单，只需要包含

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在加载您将使用 jQuery 的文件之前，在您的页面上。

# php - 如何使用 CakePHP 第三方库函数？

> ID：14929155
> 
> 赞同：3
> 
> 时间：2013-02-18T03:45:53.263
> 
> 标签：php, cakephp

我正在尝试从控制器文件中调用 CakePHP 中的第三方库函数。

我的控制器文件中有这个：

```
public function index() {
    App::import('vendor', 'simple-html-dom.php');
    App::import('vendor', 'utils.php');

    set_time_limit(0);

    $html = file_get_html("google.com");
    ...
} 
```

我也有和`app/vendor`文件。`simple-html-dom.php``utils.php`

`file_get_html`是一个公共函数`simple-html-dom.php`（并且它不属于任何类）。我最终得到这个错误：

> ```
> Error: Call to undefined function file_get_html() 
> ```

我一直在寻找如何解决这个问题，但我没有找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T17:14:41.197

我得到了我的工作。尝试这个，

```
App::import('Vendor', 'simple_html_dom', array('file'=>'simple_html_dom.php'));

$html = file_get_html("google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T07:55:14.150

尝试

```
public function index() {
    App::import('vendor', 'simple-html-dom.php');
    App::import('vendor', 'utils.php');

    set_time_limit(0);
    $SimpleHtmlDom = new SimpleHtmlDom(); // create object for html dom
    $html = $SimpleHtmlDom->file_get_html("google.com");
}
```

确保`simple-html-dom.php`文件包含类，然后`create object`在`class`加载后需要`vendor`。

因为要访问`methods`和`property`类，您需要创建`object`该类。

您也可以使用`method`with 在同一个类中访问，`Self::file_get_html();`但这是用于 inside `class declaration`。

**更多帮助**

```
App::import('Vendor', 'example', array('file' => 'Example.php'));
$example = new Example();
```

在上面的代码中，我包括供应商文件。

**解释**

上面的代码将加载目录`Example.php`内的`vendors/example`文件。

在您的情况下，您的`vendor`文件未正确加载，这就是您收到`class not found`错误的原因。

# command-line - 如何设置 c++/cli 程序来处理参数并像 find 命令一样以文本管道传输

> ID：14929156
> 
> 赞同：-1
> 
> 时间：2013-02-18T03:45:54.330
> 
> 标签：command-line, visual-studio-2012, c++-cli

如果我的程序名称是 Test.exe 使用下面的代码，我该如何正确设置我的参数？我在想我需要添加参数来检查 | 命令，但如果我使用重定向命令“>”，则不需要这样做。所以我认为我需要在 c++ 中使用 Stream 阅读器，但我不是 100% 确定如何为管道中的任意数量的行实现它：

```
 using namespace System;   
 using namespace System::IO;
    int main(array<System::String ^> ^args)
    {
      // this doesn't work with piped in text
      Console::WriteLine(":::{0}:::", args[0]);
    } 
```

在命令提示符下，我输入“test a”并回车。

```
:::a::: 
```

在命令提示符下，我输入“echo hello world | test”

```
:::hello world::: 
```

在 Windows 命令提示符下如何实现此功能的一个示例是使用 find 命令。我正在尝试使用 Visual Studio 2012 在我的 c++/cli 程序中实现这一点。示例：“帮助查找”：

```
If a path is not specified, FIND searches the text typed at the prompt
or piped from another command. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:55:13.293

您的程序看不到管道。管道是外壳用来`stdout`从第一个程序重定向到`stdin`第二个程序的东西。这意味着在 中`Test.exe`，您将通过以下方式获得输入`Console::Readline`：

```
Console::WriteLine(":::{0}:::", Console::ReadLine()); 
```

# html - 没有实时音频输入：[object NavigatorUserMediaError]

> ID：14929157
> 
> 赞同：0
> 
> 时间：2013-02-18T03:46:17.870
> 
> 标签：html

我正在尝试此处给出的示例[https://github.com/mattdiamond/Recorderjs](https://github.com/mattdiamond/Recorderjs) - example_simple_exportwav.html。但是，我收到了这个错误

```
No live audio input: [object NavigatorUserMediaError] 
```

我在 WindowsXP 上并为 Chrome 启用了 WebAudio（版本 24.0.1312.56 m）。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T04:36:48.247

我遇到了同样的问题，同样的例子。事实证明，您必须从 HTTP 服务器提供页面，因为 Chrome 不允许来自“file:///”页面的音频输入。如果你安装了 Python，一个简单的方法是在包含示例文件的目录中运行以下命令：

```
python -m SimpleHTTPServer 
```

现在，点 Chrome localhost:8000 并且该示例应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T16:19:13.887

您好，您必须在 HTTPS 而不是 HTTP 中运行它。

当您在 https 中时，浏览器会要求您获得麦克风的许可。

希望你觉得这很有帮助。

# php - 通过会话访问数组变量

> ID：14929163
> 
> 赞同：0
> 
> 时间：2013-02-18T03:47:04.587
> 
> 标签：php, arrays

我有一个像这样存储在会话中的数组

```
 $front_door_array = Array (
                                        "front_door_model" => $_SESSION['front_door'],
                                        "front_door_qty"   => $_SESSION['front_qty']
                                      );

            $_SESSION['front_door_array'] = $front_door_array; 
```

我现在需要通过会话访问另一个页面`front_door_model`，`front_door_qty`但不确定如何访问。通常我只会做类似的事情，`$front_door_array['front_door_qty'];`但我不知道如何通过会话做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:48:03.573

只需使用`$_SESSION['front_door_array']`变量:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:07:05.727

尝试这个 ：

```
$_SESSION['front_door_array']['front_door_model'] 
```

要查看 session 中分配的所有值：

```
echo "<pre>";
print_r($_SESSION); 
```

# css - LESS .inner-shadow 问题

> ID：14929164
> 
> 赞同：2
> 
> 时间：2013-02-18T03:47:09.407
> 
> 标签：css, less, mixins

我正在学习 tuts+ 的 PSD 切片和转换为 HTML 的教程，我学到了很多东西，但是我遇到了一些非常烦人的事情。当我尝试使用 .inner-shadow 将内部阴影添加到主 CTA 时，我得到一个灰色条，它与我想要的颜色或位置不相近。即使我完全按照课程中可用的源代码文件复制代码，也会发生这种情况。

以下是所有相关信息（我希望，如果缺少任何密钥，请告诉我）：使用：Sublime Text 2、用于 LESS 编译的 Winless、Chrome（版本 24.0.1312.57 m）和 Firefox（v. 18.0.2）来显示地点。相关的LESS混合：

```
.inner-shadow (inset, @x: 0, @y: 0, @blur: 1px, @color: #000) {
-webkit-box-shadow: @arguments;
box-shadow: @arguments; 
```

CTA下的代码：

```
.inner-shadow(inset, 0, -8px, 0, rgba(0, 0, 0, 0.2)); (rgba used to make the black less harsh and more transparent) 
```

使用 Eric Meyer 的重置。

我期望的是这个（来自 PSD 文件）：

![](../Images/562bbfc07df9279785a38eb776c6133a.png)

我得到的是：

![](../Images/4be021434d293c6effd5129a9912468c.png)

请注意，要使阴影到达正确的位置，我实际上必须在 .inner-shadow 中为 Y 轴输入 8px 而不是 -8px。不知道为什么轴会被翻转，但放置 -8px 实际上会将阴影放在盒子的顶部！

对此感到非常困惑，非常感谢任何帮助。

谢谢！

-编辑-这是它的CSS：

```
 -webkit-box-shadow: 0 8px 0 rgba(0,0,0,0.2);
    box-shadow: 0 8px 0 rgba(0,0,0,0.2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:25:12.497

试试这个

```
.inner-shadow (@inset: inset, @x: 0, @y: 0, @blur: 1px, @color: #000) {
    -webkit-box-shadow: @arguments;
    box-shadow: @arguments;
} 
```

# php - 页眉、菜单和页脚被截断？

> ID：14929165
> 
> 赞同：-3
> 
> 时间：2013-02-18T03:47:16.027
> 
> 标签：php, html, css, wordpress

好的，我有一个在 WordPress 上制作的网站，并且已经编辑了很多 CSS。该网站看起来不错，但是当您缩小浏览器时，页面会被切断。这不是一个响应式网站，问题不是出现滚动条，您需要滚动才能看到更多内容，问题是页眉、页脚和菜单被剪裁了。

一些css代码是

```
/*
    Theme Name: thememagic
    Theme URI: http://themeszen.com/thememagic
    Description: A very neat and clean black and white business theme. The theme supports widgets. And features 
    theme-options, threaded-comments and multi-level dropdown menu. A simple and neat typography. This theme is the free version of our pro theme.
    Version: 1.4.10
    Author: Manish Gori
    Author URI: http://themeszen.com
    Tags: black,two-columns,theme-options
    License: GNU General Public License v2.0
    License URI: http://www.gnu.org/licenses/gpl-2.0.html
    */

@import "css/reset.css";

    /* general */
    /*////////////////////////////////////////////////////////////////////////////////////////////*/

a.special {
    font-color: #FFFFFF;
    outline: 0;
    font-family: 'Raleway', sans-serif;
    font-size: 13px;
}

a.special:link {
    color: #FFFFFF;
    outline: 0;
    font-family: 'Raleway', sans-serif;
    font-size: 13px;
}

a.special:visited {
    color: #FFFFFF;
}

a.special:active,
    a.special:hover {
    color: #E6E6E6;
    outline: 0;
    font-family: 'Raleway', sans-serif;
    font-size: 13px;
}

body {
    background-color: #ffffff;
    font-family: 'Raleway', sans-serif;
    color: #333333;
    3
        line-height: 1.5em;
}

a {
    color: #464646;
    outline: 0;
    font-family: 'Raleway', sans-serif;
    font-size: 17px;
}

a:link {
    color: #464646;
}

a:visited {
    color: #464646;
}

a:active,
    a:hover {
    color: #000;
    text-decoration: none;
}

h2.name {
    font-size: 12px;
    font-family: 'Raleway', sans-serif;
    padding-bottom: 15px;
}

h2.quote {
    font-size: 20px;
    font-family: 'Bad Script', cursive;
    text-shadow: 4px 4px 4px #aaa;
}

h1,h2,h3,h4,h5 {
    margin-bottom: 6px;
    padding: 0px;
    color: #1b1b1b;
    font-family: 'Margarine', cursive;
}

h2.shadow {
    font-size: 24px;
    font-family: 'Margarine', cursive;
    text-shadow: 4px 4px 4px #aaa;
    padding-bottom: 15px;
}

h1 {
    font-size: 30px;
    font-family: 'Margarine', cursive;
    text-shadow: 4px 4px 4px #aaa;
    padding-bottom: 15px;
}

h2 {
    font-size: 24px;
}

h3 {
    font-size: 20px;
}

h4 {
    font-size: 24px;
    font-family: 'Raleway', sans-serif;
    font-size;
}

h5 {
    font-size: 17px;
    font-family: 'Raleway', sans-serif;
    font-size;
}

h6 {
    font-size: 13px;
    font-family: 'Raleway', sans-serif;
    color: #ffffff;
}

hr {
    background-color: #FFFFFF;
    border: 0;
    height: 1px;
    margin-bottom: 18px;
    clear: both;
}

p {
    padding: 0 0 0.5em;
    line-height: 1.6em;
}

ul {
    list-style: square;
    margin: 0 0 18px 0;
} 
```

header.php 代码为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes(); ?>>

    <head profile="http://gmpg.org/xfn/11">
        <meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" />

               <title>  

        <?php 

                 wp_title( '|' );

    // Add the blog description for the home/front page.
    $site_description = get_bloginfo( 'description', 'display' );
    if ( $site_description && ( is_home() || is_front_page() ) )
        echo " | $site_description"; ?>

        </title>

<link href='http://fonts.googleapis.com/css?family=Bad+Script' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Margarine' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=McLaren|Raleway:500' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" media="all" href="<?php echo get_stylesheet_uri(); ?>" />

<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />

    <?php wp_head(); ?>

</head>

<body <?php body_class(); ?>>

    <!--wrapper-->
    <div id="wrapper">

    <!--headercontainer-->
    <div id="header_container">

        <!--header-->
        <div id="header">

            <?php if ( ( of_get_option('logo_image') ) != '' ) { ?>
        <div id="logo"><a href="<?php echo home_url(); ?>" title="<?php bloginfo('description'); ?>"><img src="<?php echo of_get_option('logo_image'); ?>" alt="<?php echo of_get_option('footer_cr'); ?>" /></a></div><!--logo end-->
    <?php } else { ?>
            <div id="logo2"><a href="<?php echo home_url(); ?>" title="<?php bloginfo('description'); ?>"><?php bloginfo( 'name' ); ?></a></div><!--logo end-->
    <?php } ?>

            </div><!-- header end-->
            <div class="clear"></div>
        </div><!--header container end-->       

    <div class="clear"></div>

        <!--menu-->
    <div id="menu_container">

        <div id="menubar">

        <?php $navcheck = '' ; ?>

    <?php $navcheck = wp_nav_menu( array( 'container_class' => 'menu-header', 'theme_location' => 'primary' , 'menu_class' => 'nav', 'fallback_cb' => '', 'echo' => false ) ); ?>

 <?php  if ($navcheck == '') { ?>

    <ul class="nav">
        <li class="page_item"><a href="<?php echo home_url(); ?>" title="Home"><?php _e( 'Home', 'thememagic' ); ?></a></li>                
        <?php wp_list_pages('title_li=&sort_column=menu_order'); ?>

    </ul>
<?php } else echo($navcheck); ?>  

    </div>  
    <div class="clear"></div>
</div><!--menu container end--> 
    <!--menu end--> 
```

该网站是[http://www.shoalhavenspecialas.com/](http://www.shoalhavenspecialas.com/) 请如果有人可以帮助这样做，因为我正在努力解决这个问题，并且需要在几个小时内完成。感谢您的所有时间！:) 我希望你永远不会遇到一个无法解决的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:01:33.933

要调整标题尺寸，您需要`#logo` `<img/>`在容器宽度（964 像素）内设置 CSS 的宽度。

```
#logo img {
    width: 964px;
    height: auto;
} 
```

要将所有内容放在一个盒子内，限制为您喜欢的宽度，请进行以下更改：

header.php：就在`<body>`打开之后：

`<div id="wrapperbox">`

footer.php：就在`</body>`收盘前：

`</div>`

样式.css：

```
#wrapperbox {
    width: 964px;
    margin: 0px auto;
    text-align: left;
}

body {
    text-align: center;
} 
```

# ios - 为什么要在 @property 上为子视图设置保留？

> ID：14929167
> 
> 赞同：3
> 
> 时间：2013-02-18T03:47:36.350
> 
> 标签：ios, cocoa, properties, retain, assign

相当简单的问题分为两部分。

1.  如果一个视图保留了它的子视图，并且我们在 Interface Builder 中创建了一个视图层次结构，其中视图嵌套在其他视图中，为什么需要将嵌套子视图的 IBOutlet 属性设置为保留？不会为这些子视图属性分配一个可接受的参数吗？

2.  我有一个 UIView 子类，它在初始化时向自身添加了一些子视图。要捕获对特定子视图的引用，@property (nonatomic, assign) 将足以满足该需求，对吗？例如，主 UIView 添加了一个玩家得分子视图，然后想要与该玩家得分对话以更新它。该引用只需要分配，因为正确的视图是由 UIView 类自动保留的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:15:02.457

1）不需要。 `assign`很好。是什么让你认为你*必须*使用`retain`？

2) 是的

顺便问一下，您使用的是 ARC 吗？如果是，就用`weak`instead of `assign`（请不要问为什么，在堆栈溢出的各个角落和互联网上都有很好的解释）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:51:15.617

是的，确实，在您的情况下，子视图将被视图保留，因此我们在技术上不需要再次保留它。然而，这有点脆弱。如果将来您添加一些从其父视图中删除该子视图的代码怎么办？然后你有一个悬空指针，除非你确保它为零。

保留实例变量是一般惯例，除非必须不保留（例如，对于委托）。如果我们说“哦，我们不需要保留这个实例变量，因为它保留在这里；哦，我们确实需要保留另一个，因为它没有保留；等等”，那么我们最终会非常随意内存管理，每次我们添加一个实例变量，我们都要去思考它是否被其他东西保留；然后每次我们使用它时，我们必须记住我们是否决定保留它。这正是内存管理规则旨在避免的那种内存管理噩梦。

并且保留实例变量，有什么害处呢？在这种情况下，它只是在我们分配它时导致额外的保留和释放。没什么大不了的，为了简单和一致性。

# android - 使菜单项填充操作栏的高度

> ID：14929168
> 
> 赞同：2
> 
> 时间：2013-02-18T03:47:46.033
> 
> 标签：android, styles, android-actionbar, android-3.0-honeycomb

我有一个带有操作栏的应用程序。**我需要菜单项来填充操作栏的高度**。我尝试使用操作视图上的`android:padding="0dp"`设置来设置操作栏的样式`android:layout_height="fill_parent"`，但无济于事。

这张图片显示了浏览主题的 actionview 例如没有填满 actionbar。

![在此处输入图像描述](../Images/3e7229e56105f8a2b0317b30f1395bfb.png)

这是我的菜单声明的简化版本。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/menu_more"
          android:title="More"
          android:showAsAction="always"
          android:actionProviderClass="pacakge.action_providers.MoreProvider"
            />
</menu> 
```

动作提供者类膨胀并返回一个插入到 ActionBar 中的视图。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:09:28.403

最终只是将按钮高度硬编码为 50dp。不是一个非常优雅的解决方案，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:44:31.343

嗯....看起来你需要使用更大的图标。

此外，在按钮的布局中，使用 android:layout_height 作为“fill_parent”。

最后一个提示，使用 android:showAsAction="ifRoom"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T09:10:32.353

尝试将菜单项布局更改为 RelavtiveLayout

# android - 具有不同状态图像大小的 ImageButton

> ID：14929169
> 
> 赞同：10
> 
> 时间：2013-02-18T03:47:48.283
> 
> 标签：android, android-layout, imagebutton

如何防止 an`ImageButton`具有固定大小？选择器中使用的可绘制对象具有不同的大小，我希望`ImageButton`调整自身大小以匹配图像大小。

我试过`adjustViewBounds`没有成功。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="8dp" >

    <ImageButton
        android:id="@+id/picture_imagebutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@drawable/tab_background_selector" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T06:30:42.163

而不是使用`ImageButton`，使用`ImageView`因为`ImageButton`不能基于 调整自身的大小`ImageSize`。`ImageView`是我可以针对您的问题提出的最佳替代方法。通过以下方式实现：

**布局.xml：**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/image_selection"/>

 </RelativeLayout> 
```

**image_selection.xml：**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">    
   <item android:state_focused="true" 
       android:state_pressed="true" 
       android:drawable="@drawable/default_image"/> //default_image.png is displayed when the Activity loads.   
   <item android:state_focused="false" 
       android:state_pressed="true" 
       android:drawable="@drawable/default_image_hover" />  //default_image_hover.png is an image displaed during Onclick of ImageView  
   <item android:state_focused="true"
       android:drawable="@drawable/default_image_hover" />   
   <item android:state_focused="false" 
       android:drawable="@drawable/default_image"/>
 </selector> 
```

**SampleActivity.java：**

```
 ImageView myImage= (ImageView)findViewById(R.id.image);
    myImage.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:45:13.930

您可能已经知道在选择器中设置可绘制对象并不容易，而且我认为没有基于 XML 的解决方案来解决您的问题。试试这个。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageButton 
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/default_image"
        android:contentDescription="@null"/>

</RelativeLayout> 
```

然后你需要将此代码添加到 onCreate 或 onResume

```
 final ImageButton button = (ImageButton) findViewById(R.id.button);

    button.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN)
                button.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("pressed_image", "drawable", getPackageName())));
            else if(event.getAction() == MotionEvent.ACTION_UP)
                button.setImageDrawable(getResources().getDrawable(getResources().getIdentifier("default_image", "drawable", getPackageName())));

            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:44:28.310

不要使用 ImageButton，只需使用 Image 并通过 onClick 方法提供它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T21:56:11.773

正如其他人所提到的，您最好使用 an `ImageView`，因为它会调整其高度。设置属性`setClickable`以像按钮一样使用它。还将您的换成`RelativeLayout`a `LinearLayout`，这会将其高度包装到您的`ImageButton`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="8dp" >

<ImageView
    android:id="@+id/picture_imagebutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:setClickable="true"
    android:src="@drawable/tab_background_selector" />

</LinearLayout> 
```

或者，您可以使`LinearLayout`可点击并添加背景资源（未点击时透明，点击时着色）作为选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T06:16:34.730

尝试

```
android:background="@drawable/tab_background_selector" 
```

安装的

```
android:src="@drawable/tab_background_selector" 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T20:26:37.500

您可以使用样式并根据 ImageBUtton 的状态设置不同的样式。因为样式支持背景、大小和许多其他属性，可帮助您根据手头的问题完全控制样式。

# ember.js - 使用 Ember.js 的 Hashbang URL

> ID：14929170
> 
> 赞同：15
> 
> 时间：2013-02-18T03:47:53.197
> 
> 标签：ember.js, ember-router, hashbang

我正在尝试设置我`Router`使用“hashbang”网址（`#!`）。

我试过这个，但显然它不起作用：

```
App.Router.map(function() {
    this.route("index", { path: "!/" });
    this.route("otherState", { path: "!/otherState" });
}); 
```

这可以在 Ember 中完成吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T23:59:41.100

Teddy Zeenny 的回答大部分是正确的，并且`registerImplementation`似乎是实现这一点的一种干净的方式。我试图只编辑他的答案以使其完全回答问题，但我的编辑被拒绝了。

无论如何，这里是让 Ember 使用 hashbang URL 的完整代码：

```
(function() {

var get = Ember.get, set = Ember.set;

Ember.Location.registerImplementation('hashbang', Ember.HashLocation.extend({ 

    getURL: function() {
        return get(this, 'location').hash.substr(2);
    },

    setURL: function(path) {
        get(this, 'location').hash = "!"+path;
        set(this, 'lastSetURL', "!"+path);
    },

    onUpdateURL: function(callback) {
        var self = this;
        var guid = Ember.guidFor(this);

        Ember.$(window).bind('hashchange.ember-location-'+guid, function() {
                Ember.run(function() {
                    var path = location.hash.substr(2);
                    if (get(self, 'lastSetURL') === path) { return; }

                    set(self, 'lastSetURL', null);

                    callback(location.hash.substr(2));
                });
        });
    },

    formatURL: function(url) {
        return '#!'+url;
    }

}));

})(); 
```

然后，一旦您创建了您的应用程序，您需要更改路由器以利用“hashbang”位置实现：

```
App.Router.reopen({
    location: 'hashbang'
}) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-18T10:07:08.250

扩展`Ember.HashLocation`将是要走的路。

对于干净的实施，您可以执行以下操作。

```
Ember.Location.registerImplementation('hashbang', Ember.HashLocation.extend({
  // overwrite what you need, for example:
  formatURL: function(url) {
    return '#!' + url;
  }
  // you'll also need to overwrite setURL, getURL, onUpdateURL...
}) 
```

然后指示您的 App Router 使用您的自定义实现进行位置管理：

```
App.Router.reopen({
  location: 'hashbang'
}) 
```

# iphone - 错误：此类与键 keyPath 的键值编码不兼容

> ID：14929171
> 
> 赞同：9
> 
> 时间：2013-02-18T03:48:03.400
> 
> 标签：iphone, objective-c, xcode

```
 UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"SettingsViewController"];
    [[self navigationController] pushViewController:vc animated:YES]; 
```

尝试从 Storyboard 中的 NavigationController 推送视图控制器，但我不断收到此错误。

> *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<SettingsViewController 0x1f98f100> setValue:forUndefinedKey:]：此类与键 keyPath 的键值编码不兼容。” *** First throw call stack: (0x31f4a3e7 0x39c3b963 0x31f4a0d5 0x327b87d9 0x327b4543 0x31ed08a5 0x33ef5e69 0x340e5b09 0x71aa3 0x33e1b31d 0x33e9dda9 0x32859657 0x31f1f857 0x31f1f503 0x31f1e177 0x31e9123d 0x31e910c9 0x35a6f33b 0x33dad2b9 0x6567d 0x3a068b20) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-14T11:59:14.367

我收到此错误是因为我在“身份检查器”选项卡的“用户定义的运行时属性”字段中添加了一些内容。我冒昧地为 Key Path 列保留了默认的 keyPath 值，这导致了问题。

![xcode 界面生成器的屏幕截图](../Images/03c80de304532e49d385cc505b9e8530.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T04:33:22.310

很可能，故事板中定义的 SettingsViewController 包含对名为 keyPath 的 IBOutlet 的引用，但 keyPath 未在类中定义。

要进行补救，请在情节提要中选择视图控制器，选择连接检查器（右窗格中最右侧的选项卡），然后查看连接。那里可能有一个叫做 keyPath，它可能有一个“！” 靠近它。删除那个（以及任何其他带有“！”的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T03:53:12.767

使用这个并检查：

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
 SettingsViewController *myVC = (SettingsViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:@"SettingsViewController"];
[self.navigationController pushViewController:myVC animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T06:13:19.987

右键单击xib文件，作为源代码打开以找到“keyPath”。

# random - 与 rand 运算符有关的计算

> ID：14929174
> 
> 赞同：0
> 
> 时间：2013-02-18T03:48:10.937
> 
> 标签：random, modulus

所以，我使用模数和 rand 作为我正在编写的函数的一部分。现在，我明白了：

`rand() % 6 + 1;`在这种情况下，给我一个介于 1 到 6 之间的随机数。不过，我也知道

`rand();`给我一个从 0 到 32767 的随机值并`srand;`更改序列

但我想...

`%``a`=之后的任何剩余部分`a / b`。

……那么，如果要分手`rand() % 6 + 1;`，会是什么样子？

为了我自己的利益，我需要理解这一点，因为我是`rand() % 6 + 1;`这样看的：

一些随机数/ 6 =随机剩余的余数。然后添加一个。

所以，我的问题有两个：

1 - 如何`rand()`突然限制为 1 - 5 而不是 0 - 32767 的数字范围？

2 - 这些数字中的任何一个（1-5）除以 6 都会给你一个小数，而不是一个整数，我认为模数只适用于整数。我在这里缺少什么信息？

如您所见，我对此感到困惑。总是感谢帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:59:36.820

`rand()%6`给出除以 6 时生成的随机数的提示

例如`rand()`生成一个数字 100，那么 100%6 的结果就是 100 除以 6 得到的提醒，即 4。所以无论从函数 rand() 生成数字，当 %6 完成时，输出将在 0-5 之间（除以 6 时的提醒）。

“rand() 是如何突然被限制为 1 - 5 而不是 0 - 32767 的数字谱？”

rand() 不限于“0-5”，它仍然输出 0 - 32767 之间的数字（或任何不知道最大限制的数字）。但是当我们执行 rand()%6 时，输出将在 0-5 范围内

# php - 在 PHP 代码中使用 @since

> ID：14929179
> 
> 赞同：12
> 
> 时间：2013-02-18T03:48:45.407
> 
> 标签：php, phpdoc, comments

我在我的 PHP 代码中使用 @since 注释。我有一个关于它的使用的问题。假设我有一个执行特定任务的函数，它已在 1.0 版中实现。

所以我目前有@since 1.0.

现在我继续更改函数的名称，尽管里面的代码保持不变。现在应该说@since 3.0（当前版本）还是保持@since 1.0？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T16:43:50.263

函数名在 1.0 中不存在，因此`@since`应该是 3.0。不同名称的函数在旧版本中提供相同的功能是无关紧要的。您将无法在旧版本中使用新名称。[文档](https://www.phpdoc.org/docs/latest/references/phpdoc/tags/since.html)说：

> 用于`@since`记录修订，如“此功能自 2.0 版以来一直是此软件包的一部分”

的目的`@since`是告诉使用您的包的人“从版本*x*开始，存在一个名为的函数`foo`。如果您在 v3 中更改`foo`为但保留为 v1，那么您的文档将错误地声明在 v1 中调用是安全的。事实上, v1 中没有，调用会抛出错误。`bar``@since``bar()``bar()`

您还可以考虑使用旧名称（仅调用实际函数）保留函数存根，并将其标记为[`@deprecated`](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.deprecated.pkg.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:13:18.490

@since 标记指示相关结构元素在哪个版本可用。

*句法*

```
@since [version] [<description>] 
```

@since 标记可用于指示从哪个版本特定的结构元素可用。

此信息可用于生成一组 API 文档，其中告知消费者哪个应用程序版本对于特定元素是必需的。

版本必须遵循与@version 标签的向量相同的规则，并且可以有描述以提供附加信息。

这个标签可以在一个 PHPDoc 中出现多次。在这种情况下，每次出现都被视为更改日志的条目。建议您还为每个此类标签提供描述。

*例子*

```
 /**
  * @since 1.0.1 First time this was introduced.
  *
  * @return integer Indicates the number of items.
  */
 function count()
 {
     <...>
 }

 /**
  * @since 1.0.2 Added the $b argument.
  * @since 1.0.1 Added the $a argument.
  * @since 1.0.0
  *
  * @return void
  */
 function dump($a, $b)
 {
     <...>
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:55:50.197

因为是一个`phpDoc`标签

PHPDoc 标签与一些编辑器一起工作，以显示有关一段代码的更多信息。对于使用这些编辑器的开发人员来说，了解他们在代码中使用它的目的和位置很有用。

允许 PHPdoc 块的约定是具有 @since 信息（即使当时不可用）和 @package 信息，除非它是外部库，否则应始终为“WordPress”。喜欢以下

```
/**
 * ... Description(s) here
 *
 * @package WordPress
 * @since 2.1 or {@internal Unknown}}
 *
 * ... More information if needed.
 */ 
```

请阅读以下文章以获取有关 phpDoc 标签的更多信息

[PHPDocumentor 0.4.1](http://phpdocu.sourceforge.net/howto.php)

[记录何时（在哪个版本）首次将元素添加到包中](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.since.pkg.html)

[phpDocumentor 教程](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html)

[phpDocumentor tags - 如何在 DocBlocks 中使用标签](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.pkg.html)

[@since - phpDocumentor](http://www.phpdoc.org/docs/latest/for-users/phpdoc/tags/since.html)

# css - 空 div 需要是 100% 的父级

> ID：14929180
> 
> 赞同：1
> 
> 时间：2013-02-18T03:48:50.503
> 
> 标签：css, wordpress, position, height

我遇到了一个令人沮丧的问题……我以为我在这里找到了一些答案，但到目前为止似乎还没有任何效果。

这是一个开始的图像：

[http://www.shaunmbaer.com/wordpress/wp-content/uploads/2013/02/Melissliss_01.jpg](http://www.shaunmbaer.com/wordpress/wp-content/uploads/2013/02/Melissliss_01.jpg)

然后这里是html：

```
<section class="A">
  <aside class="B"></div>
  <header class="C">Title</header>
  <article class="D">Lorem ipsum...</article>
</section> 
```

截至目前的CSS：

```
A{width:100%}
B{width:220px; height:100%; float: right; background= #fff url("foo") repeat}
C{width:450px}
D{width:450px} 
```

我正在使用 wordpress（这个位是一个帖子），所以所有的内容都是自动生成的。我需要 div "B" 是父 div 的 100%。除了重复的背景图片外，它没有任何内容（网站是响应式的，这个 div 将在下一个断点处消失）。

我不能绝对定位它们，因为我不能给文章（“D”）一个固定的高度（至少我认为这种说法是正确的......）

任何人都可以帮助或将我指向可以的地方吗？最好是 CSS 解决方案，但此时 jQuery 也可以！

非常感谢²。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:55:02.567

我很确定您*可以*对 B 元素使用绝对定位，并指定要坚持的元素的 3 个边：

```
.A {
    position: relative;
}

.B {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 220px;
} 
```

# function - 如何在具有特定字符串的文件名上添加某些搜索和替换模式

> ID：14929183
> 
> 赞同：2
> 
> 时间：2013-02-18T03:49:26.877
> 
> 标签：function, vim

我写了一个函数，它对我正在编辑的文件进行一些搜索和替换。但是对于某些文件（文件名中有一些特定的关键字），我需要添加一些仅限于这些文件的特定搜索和替换。

我需要知道如何修复以下代码：

```
function! Test()
    " basic search and replace for all the files
    %s/I'll /I will /ge
    " if the filename starts with "blah-" the following additional search and replace needed otherwise not
    if match(readfile(expand('%:t')),"^blah-")
      %s/could'nt /could not /gec
    endif
endfunc 
```

在调用该函数时，`:call Test()`所有这些模式都将被执行。因此，我不需要担心某些文件类型的具体说明。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:15:28.700

如果没有匹配`-1`则从[`match()`](http://vimdoc.sourceforge.net/htmldoc/eval.html#match%28%29). 此外，您可能不需要调用[`readfile()`](http://vimdoc.sourceforge.net/htmldoc/eval.html#readfile%28%29)来检查文件名。因此，改变

```
if match(readfile(expand('%:t')),"^blah-") 
```

...至...

```
if match(expand('%:t'), '^blah-') != -1 
```

...并且您的`blah-`文件（并且只有您的`blah-`文件）将执行额外的替换。

# flash - 按钮仅在 Flash 中每隔一段时间有效

> ID：14929188
> 
> 赞同：0
> 
> 时间：2013-02-18T03:49:50.293
> 
> 标签：flash, button, actionscript, adobe

我的 Flash 项目中的“环顾四周”按钮仅在您每隔一次单击时才起作用。我所有的其他按钮都有相同的代码并且工作正常。这是我的 ActionScript 代码：

```
import flash.events.Event;

escape_btn.addEventListener(MouseEvent.CLICK, pressedEscape)
function pressedEscape(event:MouseEvent):void
{
    animations.gotoAndPlay("escape");
}

bio_btn.addEventListener(MouseEvent.CLICK, pressedBio);
function pressedBio(event:MouseEvent):void
{
    gotoAndStop("biography");
}

home_btn.addEventListener(MouseEvent.CLICK, pressedHome);
function pressedHome(event:MouseEvent):void
{
    gotoAndStop("home");
}

analysis_btn.addEventListener(MouseEvent.CLICK, pressedAnalysis);
function pressedAnalysis(event:MouseEvent):void
{
    gotoAndStop("analysis");
}

lookaround_btn.addEventListener(MouseEvent.CLICK, pressedLookAround)
function pressedLookAround(event:MouseEvent):void
{
    animations.gotoAndPlay("look around");
}

stop(); 
```

这是我的动画时间线的一些屏幕截图： ![在此处输入图像描述](../Images/efc1eefb699b957921e86e87e4d93c90.png) ![在此处输入图像描述](../Images/07fa7f6c229aa81fdae54ae3420083df.png) ![在此处输入图像描述](../Images/73d8fa28c664430add26606ed660fead.png) ![在此处输入图像描述](../Images/4e4785dbd5c71fbf2329230128c94f5a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:45:41.130

我怀疑问题出在与“环顾四周”标签相同的框架上。

我猜那里有一个 stop() 命令；我发现在使用 gotoAndPlay 时，如果在 gotoAndPlay 跳转到的帧上还有一个 stop() ，它可能会出现问题。Flash 感到困惑，因为它被告知要播放但也要停止。

# javascript - 使用 Javascript 中的 Ajax 函数将对象列表视图传递给控制器

> ID：14929192
> 
> 赞同：0
> 
> 时间：2013-02-18T03:50:42.967
> 
> 标签：javascript, json, asp.net-mvc-3

我有一个列表对象。我想通过 Ajax 函数将列表视图传递给控制器​​ 我的代码如下：

```
 function Save()
    {
        debugger;
        if(!ValidateInput()) return;
        var oRecipe=RefreshObject();
        var oRecipeDetails=$('#tblRecipeDetail').datagrid('getRows');
        var postData = $.toJSON(oRecipe);
        var mydetailobj= $.toJSON(oRecipeDetails);
//        postData="Hello world!!!!!!! Faruk";
        //return;
        $.ajax({
            type: "GET",
            dataType: "json",
            url: '/Recipe/Save',
            data: { myjsondata : postData, jsondetailobject : mydetailobj},
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                oRecipe = jQuery.parseJSON(data);
                if (oRecipe.ErrorMessage == '' || oRecipe.ErrorMessage == null) {
                    alert("Data Saved sucessfully");
                    window.returnValue = oRecipe;
                    window.close();
                }
                else {
                    alert(oRecipe.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    } 
```

通常，如果我的列表长度 <=3/4，我的代码会成功运行，但是当我的列表长度 >4 时，就会出现问题。我找不到什么是错误？请任何人建议我

注意：这里我尝试通过列表对象转换为 JSON 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:44:22.720

为什么要输入“GET”？很明显，您希望将数据发布回控制器。将其更改为“POST”并尝试。

```
$.ajax({
            type: "POST",
            dataType: "json",
            ... 
```

# java - 在 Android 中用户注销后禁用通知

> ID：14929193
> 
> 赞同：1
> 
> 时间：2013-02-18T03:50:58.670
> 
> 标签：java, android

我正在开发一个类似于 Line/Whats 应用程序的 Android 应用程序，即基本上是即时通讯工具。我面临的问题是，即使在用户注销后，通知仍然显示。

换句话说，一旦用户注销，就无法禁用通知。相反，通知永远不会被禁用，并且即使在注销后仍会继续重复出现，从而使应用程序高度无法使用。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:10:33.577

一旦用户退出您的应用程序，使用 NotificationManager 取消所有通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:26:22.687

我想通知是通过在后台接收消息的服务显示的。我的建议如下：

a) 这个应该是最简单的了，既然用户正在注销，就不需要后台有后台服务了，所以可以`stopSelf()`在触发注销的时候调用。如果注销操作发生在活动上，您可以通过广播或消息通知服务，具体取决于您建立服务的方式。

b）如果您想尝试其他方法，可以在服务类中添加一个标志：`isUserLoggedOut`并在执行注销工作流程时将其设置为 true。然后，您可以在决定是否通知用户时检查此标志。

```
private void showNotification () {
    if (isUserLoggedOut)
       return;
    //shownotification otherwise
} 
```

c) 老实说，我强烈建议您修改您的注销工作流程，清除该用户的现有持久数据（访问令牌等），关闭聊天的主要活动并再次显示登录活动，并禁用任何消息处理在服务中，因为假设用户退出，您的服务不应该为任何帐户处理消息。

# php - 数组中的对象

> ID：14929195
> 
> 赞同：0
> 
> 时间：2013-02-18T03:51:01.667
> 
> 标签：php, html, mysql

所以我有一个 SQL 调用，它获取一组标签并用逗号分隔它们，其中包含 implode 和 explode 但对于链接区域，我想使用我保存在 db 中的 slug 而不是直接值。

```
$cg;
    $tag=$mysqli->query("SELECT * FROM wp_pod_tbl_tags");
    while($tags = $tag->fetch_object()){ 
    $ct = explode(",", $categories);
    foreach($ct as $c) {
        if($tags->id == $c) {
            $cg[] = $tags->name;            
        }
    }
}   
    $arrs = implode(", ", $cg);
    $arr = explode(",", $arrs);
    $links = array();.0
    foreach ($arr as $value) {
        $links[] = "<a href='#". trim($value) ."'>". trim($value) ."</a>";
    }
    $links_str = implode(",", $links);
?>
    <span><?=$links_str?></span> 
```

目前它出现了，`<a href=#beer garden>Beer Garden</a>`但在我的数据库中，我有一个啤酒花园的蛞蝓。所以我希望它是`<a href="#beer-garden">Beer Garden</a>`。但不知道如何添加它。调用它是 $tags->slug。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:01:20.190

要从这个`beer-garden`到这个`Beer Garden`，您需要以两种方式操作字符串：

```
$value = 'beer-garden';
$value = str_replace('-',' ',$value);
$value = ucwords($value);
echo $value; // Beer Garden 
```

您将不得不根据您的情况对其进行调整，从表面上看，这可能是行不通的。特别是当名称应该有破折号时。

# linux - 如何在 BASH 中将两个表相乘

> ID：14929198
> 
> 赞同：0
> 
> 时间：2013-02-18T03:51:20.347
> 
> 标签：linux, bash, shell, awk

我有两个这样的数据文件：

文件1：

```
 a1    a2  a3  ... aN
  b1    b2  b3  ... bN
  .
  .
  . 
```

文件1：

```
 A1    A2  A3  ... AN
  B1    B2  B3  ... BN
  .
  .
  . 
```

我想将这两个表相乘，即

```
 a1*A1 a2*A2   a3*A3   ... aN*AN
  b1*B1 b2*B2   b3*B3   ... bN*BN
  .
  .
  . 
```

我可以用 AWK 或 BASH 中的其他东西来做吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:59:44.727

这是使用 的一种方法`GNU awk`，假设您在每个文件中具有相同数量的字段和行。像这样运行：

```
awk -f script.awk file1 file2 
```

内容`script.awk`：

```
FNR==NR {
    for (i=1;i<=NF;i++) {
        a[NR][i]=$i
    }
    next
}

{
    for (j=1;j<=NF;j++) {
        $j = $j * a[FNR][j]
    }
}1 
```

或者，这是一个班轮：

```
awk 'FNR==NR { for(i=1;i<=NF;i++) a[NR][i]=$i; next } { for(j=1;j<=NF;j++) $j = $j * a[FNR][j] }1' file1 file2 
```

测试：

内容`file1`：

```
1 2 3   
2 4 6 
```

内容`file2`：

```
3 4 5
6 7 8 
```

结果：

```
3 8 15
12 28 48 
```

* * *

***编辑：***

如果，我的意思是，如果一个文件具有另一个文件没有的额外字段，请更改：

```
$j = $j * a[FNR][j] 
```

至：

```
$j = (a[FNR][j] ? $j * a[FNR][j] : $j) 
```

这将打印现有值而不是零。HTH。

# c# - 圆圈在 Windows Phone 8 地图中被裁剪

> ID：14929201
> 
> 赞同：1
> 
> 时间：2013-02-18T03:51:33.170
> 
> 标签：c#, windows-phone-8

我试图在适用于 Windows phone 8 的诺基亚的[Map Explorer](http://projects.developer.nokia.com/mapexplorer)示例（[直接下载链接](http://projects.developer.nokia.com/mapexplorer/downloads/7)`_accuracy = 200;`）中绘制一个圆圈，并在文件`MainPage.xaml.cs`中`line no. 592`发现当我们继续放大时，圆圈会被裁剪。谁能告诉我出了什么问题？我认为地图图块呈现在圆圈上方。下面是屏幕截图

![在此处输入图像描述](../Images/89738a4439e18a059a35e11b21b7e8f7.png)

**PS我也在[诺基亚开发者网站上提交了一张票](http://projects.developer.nokia.com/mapexplorer/ticket/2)**

# iphone - 当方向改变时重新定位控件

> ID：14929207
> 
> 赞同：13
> 
> 时间：2013-02-18T03:52:51.367
> 
> 标签：iphone, ios, objective-c, screen-orientation, autolayout

我知道当方向改变时，自动布局可用于使尺寸和位置保持一致。方向改变时是否可以完全改变布局？

例如，请看下面一个简单的纵向模式登录屏幕的线框图。

![在此处输入图像描述](../Images/741b6784bc45edd179b1e162bdb97a8f.png)

现在，如果我旋转设备，我想完全重新定位控件。

![在此处输入图像描述](../Images/95cfb7ed2b63ff1e2186a612a984a88d.png)

这种事情可以通过使用自动布局来完成吗？如果没有，我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:13:54.417

在您的情况下，可以通过两种方法来实现，而不是重新构建每个组件，您可以对控件进行分组，如下所示..

1.  父视图-> 用户信息视图-> 所有用户信息控件.. 通过这样做，您只需重新构建**用户信息视图**而不是所有控件..

    然后只剩下徽标和公司名称需要重新构建。如果您对控件进行分组，总共需要重新构建 3 个控件。

2.  创建两个视图，一个用于纵向模式，另一个用于横向模式，只需添加和删除旋转。这是最快的方法，因为您不必通过繁琐的代码重新调整框架。

以上希望有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T04:01:47.603

你不能以不同的方式设置框架：-

```
-(void)setFramesForPotrait
{

// set frames here

}

-(void)setFramesForLandscaeMode
{

// set frames here

}

-(bool)shouldAutorotate.....
{
return Yes
}

-()willAutoRotate......
{
if(orientation = uiinterfaceOrientationPotrait)
{
[self setFramesForPotrait];
}
else
{
[self setFramesForLandscape];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-30T13:32:07.040

我遇到了同样的问题，这就是我到目前为止所发现的。我正在使用的方法是针对不同的屏幕尺寸或方向设置两组（可能是多组）约束。所以我只是为纵向设计并将所有纵向特定的约束连接到 IBOutletCollection： ![在此处输入图像描述](../Images/0912ed025fc035abdb1153d6db29b676.png) 然后将 InterfaceBuilder 中的 VC 方向切换为 Landscape 并为此方向添加所需的约束并连接到相应的插座： ![在此处输入图像描述](../Images/8973e6fcfe21852a61574e9a9714b90a.png)

然后在代码中，我根据需要删除或添加约束：

```
- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];
    [self updateViewConstraints];
}

- (void)updateViewConstraints
{
    [super updateViewConstraints];
    if (self.view.frame.size.width >= kSize * 2 + kPadding * 3)
    {
        [self.view removeConstraints:self.constraintsForPortrait];
        [self.view addConstraints:self.constraintsForLandscape];
    } else
    {
        [self.view removeConstraints:self.constraintsForLandscape];
        [self.view addConstraints:self.constraintsForPortrait];
    }
} 
```

您可以使用此代码获得类似的结果，基于方向而不是框架大小添加/删除约束：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [self updateViewConstraints];
} 
```

但请记住，有传言称苹果将发布具有不同屏幕纵横比的设备并废弃 UIInterfaceOrientation 和旋转事件，这可能值得提前准备。将看到未来会带来什么。

这种方法的缺点是 Xcode 会抱怨设计模棱两可，实际上是这样，因为 Xcode 不知道我们将在运行时消除模棱两可。为了解决这个问题，您可以将约束的优先级设置为对于您在此特定时刻未设计的所有其他方向是可选的（例如，如果您正在为纵向设计，则为横向选择约束）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:17:08.390

使用自动布局时，您可以**覆盖 updateViewConstraints**以在方向更改时修改布局：

```
- (void)updateViewConstraints{

  [super updateViewConstraints];
  //portrait
  if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)){

  }
  //landscape
  else{
    //
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T04:57:44.040

它可以通过布局约束来完成，如下所示。这不太有效，因为您的草图不太有效 - 与您在风景中实际看到的相比，您的风景视图太长了。您必须缩短登录文本字段以适应所有内容，但这应该让您了解它是如何完成的。buttonWidth 约束显示了如何在视图的宽度和按钮的宽度之间建立负相关关系——也就是说，按钮的宽度在横向比纵向要小。我有几个 IBOutlets 到我在代码中引用的约束。如果您有兴趣，我可以为您描述它们，但我现在就把它扔在那里：

```
@implementation ViewController {
    IBOutlet NSLayoutConstraint *buttonWidth;
    IBOutlet NSLayoutConstraint *logoTop;
    IBOutlet NSLayoutConstraint *logoAlignToLabel;
    IBOutlet NSLayoutConstraint *logoSpaceToLabel;
    IBOutlet NSLayoutConstraint *coNameToButtonAlignment;
    IBOutlet UIButton *b;
    IBOutlet UIImageView *logo;
    IBOutlet UILabel *coName;
    NSLayoutConstraint *con2;
    NSArray *cons1;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [b removeConstraint:buttonWidth];
    buttonWidth = [NSLayoutConstraint constraintWithItem:b attribute:NSLayoutAttributeWidth relatedBy:0 toItem:self.view attribute:NSLayoutAttributeWidth multiplier:-.2193 constant:350];
    [self.view addConstraint:buttonWidth];
    [self.view layoutSubviews];
}

- (void)updateViewConstraints{
    [super updateViewConstraints];
    if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)){
        if (con2 != nil) {
            [self.view removeConstraints:cons1];
            [self.view removeConstraint:con2];
            [self.view addConstraints:@[logoAlignToLabel,logoSpaceToLabel,logoTop,coNameToButtonAlignment]];
        }
    }else{
        NSLog(@"Landscape");
        [self.view removeConstraints:@[logoAlignToLabel,logoSpaceToLabel,logoTop,coNameToButtonAlignment]];
        cons1 = [NSLayoutConstraint constraintsWithVisualFormat:@"|-8-[logo]-4-[coName]" options:NSLayoutFormatAlignAllCenterY metrics:0 views:@{@"logo":logo, @"coName":coName}];
        con2 = [NSLayoutConstraint constraintWithItem:logo attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:self.view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
        [self.view addConstraints:cons1];
        [self.view addConstraint:con2];
    }
} 
```

在轮换时，徽标和公司名称标签的约束被移除，新的约束被放置到位。我在 viewDidLoad 中添加的按钮的新约束会自动处理旋转，因此在旋转过程中我根本不需要调整它。

# c - C 中的快速排序：语法错误和未声明的标识符

> ID：14929208
> 
> 赞同：-1
> 
> 时间：2013-02-18T03:53:02.263
> 
> 标签：c, function, recursion, quicksort

作为我编程课作业的一部分，我一直在编写 C 中的递归快速排序代码。我已经编写了所有内容，但是当我编译时出现以下错误：

```
- 1>quick_sort.c(32): error C2143: syntax error : missing ';' before 'type'
- 1>quick_sort.c(33): error C2143: syntax error : missing ';' before 'type'
- 1>quick_sort.c(35): error C2065: 'right' : undeclared identifier
- 1>quick_sort.c(36): error C2065: 'pivot' : undeclared identifier
- 1>quick_sort.c(39): error C2065: 'right' : undeclared identifier
- 1>quick_sort.c(39): error C2065: 'pivot' : undeclared identifier
- 1>quick_sort.c(40): error C2065: 'right' : undeclared identifier
- 1>quick_sort.c(42): error C2065: 'right' : undeclared identifier 
```

这是我的代码：

```
/*This code will take input for 10 integers given by the user
into an array and then sort them with a recursive quicksort
function and then print the updated array. */

#include <stdio.h>
#define ARRSIZE 10

void partition (int arr[],int size);
void val_swap (int a, int b);

int main (void){
    int arr[ARRSIZE], left, right, i = 0;

    while(i<ARRSIZE){
        printf("\nInteger value %d:", i+1);
        scanf("%d", &arr[i]);
        i++;
    }
    left = 0;
    right = ARRSIZE - 1;

    partition(arr, right-left, left);

    printf("\nThis is your updated array:");
    printf("\n{");
    for(i=0; i<ARRSIZE; i++){
        printf("%d,", arr[i]);
    }
    printf("}");
    return 0;
}    

void partition (int arr[],int size, int left){
    if(size < 2){
        return;
    }
    int pivot = size/2;
    int left = 0, right = size;

    while(left < right){
        while(arr[left] < arr[pivot]){
            left++;
        }
        while(arr[right] > arr[pivot]){
            right++;
        }
        val_swap(arr[left], arr[right]);
    }

    partition(arr,left, 0);
    partition(arr, size-left, left+1);
}    

void val_swap (int a, int b){

    int temp = b;
    b = a;
    a = temp;
} 
```

有没有人有什么建议？

编辑：好的，我修复了所有错误，其中很多是由于视觉工作室很愚蠢。我的代码现在可以正常工作了，比如当我输入数字 1-10 作为从 10 开始的输入并倒数到 1 时，该功能就起作用了。但是，一旦我给了它更复杂的数字，它只能正确排序大约一半的数组。

这是我更新的代码：

```
/*This code will take input for 10 integers given by the user
into an array and then sort them with a recursive quicksort
function and then print the updated array. */

#include <stdio.h>
#define ARRSIZE 10

void partition (int arr[],int size, int left);
void val_swap (int *a, int *b);

int main (void){
    int arr[ARRSIZE], left, right, i = 0;

    while(i<ARRSIZE){
        printf("\nInteger value %d:", i+1);
        scanf("%d", &arr[i]);
        i++;
    }
    left = 0;
    right = ARRSIZE - 1;

    partition(arr, right-left, left);

    printf("\nThis is your updated array:");
    printf("\n{");
    for(i=0; i<ARRSIZE; i++){
        printf("%d,", arr[i]);
    }
    printf("}");
}

void partition (int arr[],int size, int left){
    int pivot, right;
    pivot = size/2;
    right = size;

    if(size < 2){
        return;
    }

    while(left < right){
        while(arr[left] < arr[pivot]){
            left++;
        }
        while(arr[right] > arr[pivot]){
            right--;
        }
        val_swap(&arr[left], &arr[right]);
    }

    partition(arr,left, 0);
    partition(arr, size-left, left+1);
}

void val_swap (int *a, int *b){

    int temp = *b;
    *b = *a;
    *a = temp;
} 
```

还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:55:59.247

你传入左，然后尝试重新声明左。

我想你想要`int right = size;` 注意，这只是语法建议，而不是这是否能让你的 qs 工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:05:25.103

你的交换功能应该是这样的

```
void val_swap (int* a, int* b){

    int temp = *b;
    *b = *a;
    *a = temp;
} 
```

函数中的这个循环是错误的

```
 while(arr[right] > arr[pivot]){
            right++;
        } 
```

`arr[right]`是最后一个元素。通过递增`right++`，您正在访问无效元素。修改如下。请测试一下

```
while(arr[right] > arr[pivot]){
    right--;
} 
```

还必须删除`left`函数内部变量的重新声明`partition`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:09:32.210

这仅解决了您的部分问题：

```
void val_swap (int *a, int *b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
} 
```

# javascript - 根据 d3.js 中的事件处理程序更改文本属性

> ID：14929212
> 
> 赞同：3
> 
> 时间：2013-02-18T03:53:15.587
> 
> 标签：javascript, d3.js

我根据以下数据生成了一系列圆圈和一个文本字段。请参阅下面的代码。

```
var data = [{"x":534.720996869109,"y":188.402300350323,"label":"ATP","size":5},
{"x":526.793135268385,"y":494.495864118909,"label":"PK","size":10},
{"x":539.854817710164,"y":332.435549874068,"label":"rpoA","size":10},
{"x":528.357841173126,"y":236.960433131191,"label":"rpoB","size":10}]

var width = 1000,height = 1000;

var x = d3.scale.linear()
       .domain([0, 1000])
       .range([0, width]);

var y = d3.scale.linear()
    .domain([0, 1000])
    .range([0, height]);

var svgContainer = d3.select("body")
.append("svg:svg")
.attr("width", width)
.attr("height",height);

//text
var text = svgContainer.selectAll("text")
        .data(data)
        .enter()
        .append("text");

var textbAttributes =   text
.attr("x", 800)
.attr("y", 100)
.text(function(d) { return ''})
.attr("font-family", "sans-serif")
.attr("font-size", "20px")
.attr("fill","black");

//circles
var nodesGroup = svgContainer.append("g");

var nodes = nodesGroup.selectAll("circle")
.data(data)
.enter()
.append("svg:circle");

var nodeattr = nodes
.attr("cy", function(d,i){return y(d.y);  })
.attr("cx", function(d,i){return x(d.x); }) 
.on("click", function(){
    d3.select("text")
    .text(function(d,i){return d.label;})
    })
.attr("r", function(d,i){return d.size;}); 
```

我希望能够在单击圆圈时使用 svg 文本元素“文本”中的相应数据元素“标签”刷新文本字段。然而，上面的代码只返回第一个标签元素，而不管我点击的圆圈。感谢所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T04:48:23.563

我不完全确定您要对文本元素做什么 - 您正在为每个数据项创建一个文本元素，所有这些都在相同的坐标上彼此重叠。

我的猜测是您想要一个显示已单击圆圈标签的文本元素？如果是这种情况，您可以将文本元素的创建更改为仅单个元素：

```
//text  
var text = svgContainer.append("text")
    .attr("x", 800)
    .attr("y", 100)
    .text('')
    .attr("font-family", "sans-serif")
    .attr("font-size", "20px")
    .attr("fill","black"); 
```

您可以将圆形点击处理程序更改为：

```
.on("click", function(d){d3.select("text").text(d.label);}) 
```

这里的工作示例[http://jsfiddle.net/yyESt/](http://jsfiddle.net/yyESt/)

这是你想要做的吗？

# javascript - javascript随机数在点击时重新生成

> ID：14929213
> 
> 赞同：0
> 
> 时间：2013-02-18T03:53:17.477
> 
> 标签：javascript, jquery, random

我有一个变种..

```
var random = Math.ceil(Math.random() * 8.8); 
```

我有一个点击功能

```
$('.passShort').bind('click', function() {
     // do something here and get new random number
}); 
```

我正在尝试更改全局随机变量，而不仅仅是在这个特定函数内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:04:44.873

当全局变量需要真正全局时，我喜欢严格定义它们，并且尽可能避免重复代码：

```
setRandom();

$('.passShort').bind('click', setRandom);

function setRandom() { window.random = Math.ceil( Math.random() * 8.8 ); }; 
```

在对象上设置变量`window`可确保它是真正的全局变量。您可以在`random`任何地方引用它，它会给您，`window.random`但使用`window.random`确保您正在设置全局`random`变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:57:01.017

在函数外部使用`var`，但不在函数内部使用：

```
var random = Math.ceil(Math.random() * 8.8);
$('.passShort').bind('click', function() {
     random = Math.ceil(Math.random() * 8.8);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:58:58.363

根据您声明`random`变量的位置，将确定它的范围。如果你想让它成为全局的，只需声明它而不使用`var`关键字。

```
random = Math.ceil(Math.random() * 8.8); 
```

真的，如果您可以将您正在寻找的功能组合到一些可重用的对象（随机数生成器）中会更好吗？一个例子可能是：

```
var RNG = {      
  get randInt() { return Math.ceil(Math.random() * 8.8); },
  get randFloat() { return Math.random() * 8.8; },
  randRange: function(min, max) { 
    return min + Math.floor(Math.random() * (max - min + 1));
  }
};

console.log(RNG.randInt);
console.log(RNG.randFloat);
console.log(RNG.randRange(5,10));

$('.passShort').bind('click', function() {
  console.log(RNG.randInt); // Whatever you want here.
}); 
```

# css - 网站解析问题

> ID：14929214
> 
> 赞同：0
> 
> 时间：2013-02-18T03:53:20.140
> 
> 标签：css

我对所有内容都使用 %，因此我的网站在所有屏幕分辨率下都可以正常工作。然而，内容的位置是错位的，并且因分辨率和浏览器而异。我注意到并且可能与该问题有关的一件事是背景图像对缩放没有反应。然而，内容会做出反应。

> html {高度：200%; 宽度：100%；}
> 
> 身体{最小宽度：99%；高度：100%；边距：0；填充：0；颜色：#969696；背景颜色：黑色；文本对齐：居中；字体系列：宋体；字体大小：100%；}
> 
> # 容器 {
> 
> ```
> position: relative;
> height: 100%;
> margin: auto;
> width: 85%;
> text-align: center;
> border: 1px solid red;
> background-image: url('images/bgmain.png');
> background-repeat: no-repeat;
> background-size: 100% 100%;
> overflow: hidden; } 
> ```
> 
> # 导航栏{
> 
> ```
> position: relative;
> min-height: 2%;
> margin-top: 21%;
> margin-left: 2%;
> padding: 0 auto;
> width: 95%;
> text-align: center;
> overflow: hidden; } 
> ```

例如，我的分辨率中的导航栏很好，而在其他分辨率上它放错了位置。有什么错误吗？我错过了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:01:39.083

重置 CSS 样式将有助于获得对样式的更多控制。请参阅此链接[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)和此[http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)以及此[http://sixrevisions.com/css/css -tips/css-tip-1-resetting-your-styles-with-css-reset/](http://sixrevisions.com/css/css-tips/css-tip-1-resetting-your-styles-with-css-reset/)

# symfony - Symfony2 始终使用 ngix + FastCGI PHP 在生产环境中

> ID：14929215
> 
> 赞同：0
> 
> 时间：2013-02-18T03:53:25.717
> 
> 标签：symfony, nginx, environment-variables

我有以下环境

*   视窗 8
*   Nginx 1.3.12
*   PHP 5.3.3

将 php 作为 CGI 运行

```
php-cgi -b 127.0.0.1:9000 
```

设置 nginx

```
upstream phpfcgi {
    server  127.0.0.1:9000;
}    

server
{
    //...
    location / {
        index app_dev.php;
        try_files $uri @rewriteapp;
    }

    location @rewriteapp {
        rewrite ^(.*)$ /app_dev.php/$1 last;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    location ~ ^/(app|app_dev)\.php(/|$) {
        fastcgi_pass phpfcgi;
        fastcgi_split_path_info ^(.+\.php)(/.*)$;
        include fastcgi_params;
        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
        fastcgi_param  HTTPS              off;
    }
} 
```

我有默认的 app_dev.php 用于将应用程序运行到`dev`环境中，但总是当我尝试`http://localhost/any/path`运行时`prod`，我知道为什么会出现这种行为。即使我已经删除了文件`app.php`

```
#app_dev.php
<?php

use Symfony\Component\HttpFoundation\Request;

// If you don't want to setup permissions the proper way, just uncomment the following PHP line
// read http://symfony.com/doc/current/book/installation.html#configuration-and-setup for more information
//umask(0000);

// This check prevents access to debug front controllers that are deployed by accident to production servers.
// Feel free to remove this, extend it, or make something more sophisticated.
if (isset($_SERVER['HTTP_CLIENT_IP'])
    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])
    || !in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', 'fe80::1', '::1'))
) {
    header('HTTP/1.0 403 Forbidden');
    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');
}

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';

$kernel = new AppKernel('dev', true);
$kernel->loadClassCache();
$request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response); 
```

# mysql - SQL 查询事故

> ID：14929217
> 
> 赞同：0
> 
> 时间：2013-02-18T03:53:37.443
> 
> 标签：mysql

新的 SQL'er 在这里。好的，对于学校作业，我决定在问题中构建表格，这样我就可以测试我的查询是否正确。

问题之一是简单地显示共享同一办公室的所有员工。容易我觉得

```
SELECT office, name
 FROM my_db.employee
 GROUP BY office; 
```

但是当我运行它时，它只返回每个唯一办公室的第一个元组，而不是全部按办公室分组。

我的逻辑有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:56:15.470

您只能选择 group by 语句中的列，或者使用聚合函数（sum、count 等）

所以，

```
select office, count(name) from my_db.employee group by office; 
```

会工作，但这当然不是你想要的。

你可能想要一些简单的东西

```
select office, name from my_db.employee order by office 
```

这将显示他们按办公室“分组”。GROUP BY 要求 SQL 每个 GROUP BY 变量 [s] 只发出一行 - 我认为这不是你的任务要求的“分组”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:18:21.633

作为 SQL 的新手，您将需要学会区分所问的内容......

我希望所有为 Office "X" 工作的人（使用您感兴趣的 WHERE 子句 -- Office = 'X'）

我想知道每个办公室有多少工作（使用 GROUP BY 子句，并包括您“分组依据”的所有字段）。

Group By 与在您想要共同的某些列上进行聚合相关联。经销商的汽车销售量。经销商每月有多少汽车销售......每个车型每月。

在进行聚合时，这些通常与 MIN()、MAX()、SUM()、AVG() 等相关联，并且许多引擎中的 group by 要求您列出所有非聚合字段以进行分组。

Explosion Pills 的答案可能最接近您想要的，并且是非数字或不可比较的聚合函数的例外（例如 min()、max()）。Group_Concat() 告诉引擎一个接一个地构建一个字符串列表，只要它们都在同一个“组”分类（例如您的 Office）示例中。

祝你的教育好运，这里有很多人可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:59:10.923

考虑到您可以直观地检查行以查看谁在哪个办公室，或者非常简单地使用 MySQL 以外的其他语言进行聚合，您收到的问题对于如何呈现数据有点不清楚。也许他想要这样的东西？

```
SELECT
    office, GROUP_CONCAT(name)
FROM
    my_db.employee
GROUP BY
    office 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T03:55:53.000

SELECT 部分中的所有内容都必须出现在 GROUP BY 部分中，聚合字段除外。也就是说，您正在选择“办公室，姓名”，但仅按“办公室”分组。您需要按“办公室，姓名”分组。

# google-calendar-api - Google Calendar API 不显示事件列表

> ID：14929221
> 
> 赞同：2
> 
> 时间：2013-02-18T03:54:28.830
> 
> 标签：google-calendar-api, google-apps

我正在尝试从 Google 日历中检索事件。我打电话给这个网址：

```
GET https://www.googleapis.com/calendar/v3/calendars/riteshmehandiratta%40gmail.com/events

Authorization:  Bearer ya29.AHES6ZSvz3O7V2p7z_k_ZWAiUZqWX35Eyx5V_J4XC5pVSNxLjS6CNzQ 
```

我得到了这个回应：

```
{
 "kind": "calendar#events",
 "etag": "\"ZrhdJMCgpoUK_a5fT7XOC6xn46g/_4_AQ2FVvAtAEiDFDj8_pH_usqc\"",
 "summary": "riteshmehandiratta@gmail.com",
 "updated": "2013-02-18T03:45:37.728Z",
 "timeZone": "Asia/Calcutta",
 "accessRole": "owner",
 "defaultReminders": [
  {
   "method": "email",
   "minutes": 10
  },
  {
   "method": "popup",
   "minutes": 10
  }
 ],
 "nextPageToken": "CigKGnR0ZG1xbjAyNHQ1Y3RycjYwY2x0ZGxtcTk0GAEggIDA28aNo-cT"
} 
```

日历中有许多过去、未来和当前日期的事件。

为什么它不提供日历事件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:10:28.550

我看到了同样的问题。有时列表 API 会返回一个带有 nextPageToken 的空项目列表，即使我没有限制响应的数量。解决方法是检查是否有nextPageToken，然后再次请求下一页，直到得到没有nextPageToken 的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:25:11.597

这里肯定有一些奇怪的东西，在您发布的响应中，我看到您正在获取*nextPageToken*标记，因此实际上还有更多结果，您可以使用添加了变量*pageToken*的类似请求调用下一个结果“页面”，就像是

```
GET https://www.googleapis.com/calendar/v3/calendars/riteshmehandiratta%40gmail.com/events?pageToken=CigKGnR0ZG1xbjAyNHQ1Y3RycjYwY2x0ZGxtcTk0GAEggIDA28aNo-cT 
```

这样你会得到更多的结果。

无论如何，这很奇怪，因为如果您不使用诸如*maxResults*之类的变量限制查询，则不会显示*nextPageToken*。请检查您是否没有在其他地方限制查询。

 *也许您会发现对进行测试很有用，[文档页面](https://developers.google.com/google-apps/calendar/v3/reference/events/list)，底部有一个可以为您构建查询的请求表。

希望这会有所帮助，问候

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-12-08T05:00:40.407

我遍历请求，直到没有 nextPage 令牌，将事件列表附加到本地列表，这提供了事件的完整列表。*

# html - 如何在网页中添加纯文本代码？

> ID：14929223
> 
> 赞同：11
> 
> 时间：2013-02-18T03:54:33.640
> 
> 标签：html

我知道这是可能的，因为这个网站可以做到，但我尝试研究如何获得一堆垃圾，那么如何在浏览器不将其解释为代码的情况下将标签添加到网站段落。

例如，如果我有`<p><div></div></p>`，我希望 div 在浏览器中显示为文本，而不是让浏览器将其解释为 html。这样做复杂吗？

我一直在为学校写教程，如果我可以将代码直接以文本形式而不是图像的形式添加到网页中，这样学生就可以复制和粘贴它会容易得多。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T03:57:12.670

看看这个网站本身是如何做到这一点的：

```
<p>For example, if I have <code>&lt;p&gt;&lt;div&gt;&lt;/div&gt;&lt;/p&gt;</code>, I want the div to display in the browser as text not have the browser interpret it as html. Is this complicated to do?</p> 
```

您需要将 < 和 > 替换为它们的 HTML 字符实体。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-02T17:25:24.923

使用方法有很多：

1.  替换`<`为`&lt;`

    ```
    `&lt;h1>This is heading &lt;/small>&lt;/h1>` 
    ```

2.  将代码放在`</xmp><xmp>`标签内

    ```
    <xmp>
        <ul>
            <li>Coffee</li>
            <li>Tea</li>
        </ul>
    </xmp> 
    ```

我不推荐其他方式，因为它们不适用于所有浏览器，例如`<plaintext>`or `<listing>`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T04:01:09.957

你想研究一个叫做`HTML Entities`.

例如，如果您希望`<`字符出现在网站上，您可以编写以下 HTML 代码：`&lt;`. 这些是五个基本`HTML Entities`及其源代码等价物：

```
< &lt;
> &gt;
" &quot;
' &apos;
& &amp; 
```

如果您使用的是编程语言（例如 PHP 或 ASP.NET），那么可能有一个内置命令会为您进行转换（分别为`htmlspecialchars()`和）。`Server.HtmlEncode`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-22T20:13:20.190

`<PRE>`在重新格式化的文本块之前和之后使用标签`</PRE>`。这些标签之间的文本呈现为等宽字符，在与原始文件相同的点处带有换行符和空格。这可能有助于在不添加大量 HTML 代码的情况下渲染诗歌。试试这个：

```
玛丽有只小羊羔。
    它的羊毛像雪一样白。
玛丽去过的所有地方
    小羊肯定会去的。

```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-11T04:23:37.060

要在网页中添加纯文本代码，需要对五个字符进行**HTML 字符转义：**

`< as &lt;
> as &gt;
& as &amp;
' as &apos;
" as &quot;`

（或者）

`<xmp>`标签也可以用作替代品，这个标签扰乱了风格并且已经过时了。

```
<xmp>Code with HTML Tags like <div> etc. </xmp> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T03:56:49.473

使用标签的html实体/特殊字符，如`&lt;`（for less than）

```
&lt;p&gt; in html -> <p> in browser 
```

你也可以写`&lt;p>`，因为开始标签没有歧义。

许多语言都内置了转换 HTML 特殊字符的方法，例如 php 的`htmlspecialchars`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T03:58:27.163

您需要转义 HTML 标记，即小于号。将其写为`&lt;` ，它将在 HTML 页面上显示为 <。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T04:41:54.457

您的 html 不需要在标签中。如果您使用 <> 标签，您会将其转换为代码而不是文本，如果我要`<br>`在句子中间写，
那么它会这样做您需要使用 <> 将代码写成代码可以这么说`(&lt; &gt;)` 然后你得到你需要的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-16T19:27:46.563

我刚刚在 CSS-Tricks 发现了一个更简单的解决方案......只需让最外层的包装器成为“pre”标签，然后是“code”标签，然后在代码标签内将代码放在括号中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-17T06:22:32.780

无需使用实体重新格式化文本的最简单方法是使用 JQuery。

```
<div id="container"></div>

<script>
    $('#container').text("<div><h1>Hello!</h1><p>I like you.</p></div>");
</script> 
```

如果你这样做`alert($('#container').prop('innerHTML'));`，你会得到`&lt;div&gt;&lt;h1&gt;Hello!&lt;/h1&gt;&lt;p&gt;I like you.&lt;/p&gt;&lt;/div&gt;`

该技术的有用程度在某种程度上取决于您的材料来自何处。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-06T22:59:37.017

使用 iframe 和 txt 文件： `<iframe src="html.txt"></iframe>`

# c - 在 Xcode 4.6 中使用 gcc

> ID：14929225
> 
> 赞同：0
> 
> 时间：2013-02-18T03:54:43.237
> 
> 标签：c, xcode, gcc

对于本学期我的 CPS 课程，我们正在从 C++ 过渡到 C。对于我的 C++，我越来越喜欢 xCode，它是快速简单的调试器。然而，对于 C，xCode 允许我做很多 C++ 中我不应该被允许在 C 中做的事情。

例如，我可以在循环中初始化和声明一个循环变量，这在 C 中是不允许的。

C：

```
int i
for(i = 0; i < 100; i++)
{
     printf("This is a number: %i", i);
} 
```

但在 C++ C++ 中允许：

```
for(int i = 0; i < 100; i++)
{
     printf("This is a number: %i", i);
} 
```

我所有的工作都必须在实验室机器上编译（运行 linux 并使用 gcc 编译）才能计算在内，所以我正在寻找一种方法来继续使用 xCode 来使用 gcc 运行我的程序（或者至少赢得了不要让我做 C++ 的东西）。似乎 xCode 已经放弃了 gcc 支持。无论如何我可以继续使用xCode，但让它以“老派”学校的方式编译，这样它就会捕捉到这样的东西？

现在我一直在使用 sublime2 并且只是在终端中编译。现在这很好，但是在调试方面，我在使用 xCode 这么长时间后对 gdb 产生了仇恨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:09:14.750

您可以使用编译器的参数[告诉 clang 要使用哪种 C 语言。](http://clang.llvm.org/docs/UsersManual.html#c)`-std`听起来您可能想要`-std=c89`或`-std=gnu89`。

在 Xcode 中，在您的项目或目标的构建设置中，将“C 语言方言”设置为您想要的任何内容。

我不会指望这能抓住一切，但它应该让你更接近。

# android - 横向显示 Intent.ACTION_PICK

> ID：14929229
> 
> 赞同：0
> 
> 时间：2013-02-18T03:55:14.420
> 
> 标签：android, gallery, landscape

我正在开发一个应用程序，让用户从他们的画廊中选择照片。问题是我只需要以横向显示画廊。有可能做到吗？

我使用这段代码：

```
Intent galleryIntent = new Intent(Intent.ACTION_PICK,MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(galleryIntent, RQC_GALLERY); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:24:10.670

当您使用显式意图启动任何活动时，您会失去对应用程序的控制。Android 找出并执行意图对象中描述的应用程序。

[意图对象属性详细信息](http://developer.android.com/reference/android/content/Intent.html)

从任何地方您都可以控制有关视图的下一个应用程序。

如果您想满足特定要求，而不是使用网格视图创建自己的活动并使用图像适配器设置图像。

[这](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)是一个显示如何在适配器中设置图像的链接。如有必要，它将有助于设计您的代码。

# ssis - 我们可以在运行时而不是在设计时将 OleDB 源映射到 Excel 目标吗？

> ID：14929232
> 
> 赞同：0
> 
> 时间：2013-02-18T03:55:55.463
> 
> 标签：ssis

我正在尝试创建一个将 csv 数据导出到 excel 文件的 SSIS 包。这个包将从 C# 中调用，将 csv 文件作为包的输入。我对 SSIS 很陌生，我已经能够使用相同的标题产生预期的结果。

我采用了以下方法 -

1.  脚本任务 - 从 csv 标头创建脚本以创建临时表、批量插入、excel 表脚本。
2.  执行 SQL 任务 - 在数据库中创建一个临时表
3.  执行 SQL 任务 - 将 csv 数据批量插入表中
4.  执行 SQL 任务 - 创建 Excel 文件
5.  数据流任务 - OleDB 源到 Excel 目标
6.  执行 SQL 任务 - 删除创建的临时表

我面临的挑战是我的 csv 可能有不同的标题（文本和标题数量可能不同）。我想要一个包来达到这个目的。

由于标题不同，上述步骤 5 中 OleDB 源到 Excel 目标之间的映射不适用于动态标题，并且在 excel 输出中给出了意外结果。有什么方法可以在运行时而不是在设计时确定这些映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:35:24.590

我不相信您**可以**在 SSIS 运行时指定数据流的列或列映射。您可以即时构建 SSIS 包，这将允许您的 C# 代码创建列映射，但必须在包可以运行之前创建映射。有关详细信息，请参阅在 MSDN 中以[编程方式构建包。](http://msdn.microsoft.com/en-us/library/ms345167.aspx)

另一方面，如果您只想将 CSV 文件转换为 Excel 电子表格，那么使用Office 对象模型的[Workbook.SaveAs方法对我来说似乎是合乎逻辑的。](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas%28v=vs.110%29.aspx)

# python - Python：按字母顺序打印所有术语的计数，即使为零

> ID：14929238
> 
> 赞同：0
> 
> 时间：2013-02-18T03:56:43.747
> 
> 标签：python

我正在循环运行 360 多个 txt 文件，这些文件计算每个文件中某些单词的出现次数。代码如下：

```
>>> cnt=Counter()
>>> def process(filename):
words=re.findall('\w+',open(filename).read().lower())
for word in words:
    if word in words_fra:
        cnt[word]+=1
    if word in words_1:
        cnt[word]+=1
print cnt
    cnt.clear()

>>> for filename in os.listdir("C:\Users\Cameron\Desktop\Project"):
process(filename) 
```

我有两个列表，words_fra 和 words_1，每个列表大约 10-15 个单词。这会输出带有计数的匹配单词，但它不会打印计数为零的单词，而是按频率顺序列出单词。

输出示例：

```
Counter({'prices': 140, 'inflation': 107, 'labor': 46, 'price': 34, 'wage': 27,     'productivity': 26, 'capital': 21, 'workers': 20, 'wages': 19, 'employment': 18, 'investment': 14, 'unemployment': 13, 'construction': 13, 'production': 11, 'inflationary': 10, 'housing': 8, 'credit': 8, 'job': 7, 'industry': 7, 'jobs': 6, 'worker': 4, 'tax': 2, 'income': 2, 'aggregates': 1, 'payments': 1})
Counter({'inflation': 193, 'prices': 118, 'price': 97, 'labor': 58, 'unemployment': 42, 'wage': 32, 'productivity': 32, 'construction': 22, 'employment': 18, 'wages': 17, 'industry': 17, 'investment': 16, 'income': 16, 'housing': 15, 'production': 13, 'job': 13, 'inflationary': 12, 'workers': 9, 'aggregates': 9, 'capital': 5, 'jobs': 5, 'tax': 4, 'credit': 3, 'worker': 2}) 
```

我对格式没问题，除了我需要显示所有字数，即使它为零，而且我需要按字母顺序而不是频率返回的字数。

我可以在我的代码中添加什么来实现这一点？我也可以将其转换为一个不错的 csv 格式，将单词作为列标题并将计数作为行值。

谢谢！

编辑：顶部是当前输出的样子。底部是我希望它们看起来的样子。

```
Wordlist="a b c d"
Counter({'c': 4, 'a': 3, 'b':1})
Counter({'a': 3, 'b': 1, 'c': 4, 'd': 0}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:00:17.800

要打印单词列表中的所有单词，您可以在开始在文件中查找单词之前遍历单词列表中的单词，并将它们添加到结果字典中，计数为 0。

要以正确的顺序打印它们，请使用内置的[sorted() 。](http://docs.python.org/2/howto/sorting.html)

像这样的东西：

```
import re

wordlist = words_fra + words_1
cnt = {}
for word in wordlist:
    cnt[word] = 0

words=re.findall('\w+',open('foo.html').read().lower())
for word in words:
    if word in wordlist:
        cnt[word]+=1

for result in sorted(cnt.items()):
    print("{0} appeared {1} times".format(*result)) 
```

如果你想排序，最常见的词排在第一位，你可以这样做：

```
for result in sorted(cnt.items(), key=lambda x:x[1]):
     print("{0} appeared {1} times".format(*result)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:12:45.087

如果你想得到结果，`Counter`那么你必须覆盖接受`__add__`的方法。例如 ..`Counter``0`

```
In [8]: from collections import  Counter

In [9]: Counter({'red': 4, 'blue': 2,'white':0})+Counter({'red': 4, 'blue': 2,'white':0})
Out[9]: Counter({'red': 8, 'blue': 4})

In [10]: 
    ...: class Counter(Counter):
    ...:     def __add__(self, other):
    ...:         if not isinstance(other, Counter):
    ...:             return NotImplemented
    ...:         result = Counter()
    ...:         for elem, count in self.items():
    ...:             newcount = count + other[elem]
    ...:             result[elem] = newcount
    ...:         for elem, count in other.items():
    ...:             if elem not in self:
    ...:                 result[elem] = count
    ...:         return result
    ...:     

In [11]: Counter({'red': 4, 'blue': 2,'white':0})+Counter({'red': 4, 'blue': 2,'white':0})
Out[11]: Counter({'red': 8, 'blue': 4, 'white': 0}) #<-- now you see that `0` has been added to the resultant Counter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:15:24.723

```
for word in sorted(words_fra + words_1):
    print word, cnt[word] 
```

# ruby-on-rails-3 - 有条件的轨道中的动态路线

> ID：14929244
> 
> 赞同：1
> 
> 时间：2013-02-18T03:57:01.903
> 
> 标签：ruby-on-rails-3, routing, routes

我有一组具有公共属性的页面。我希望路由文件处理动态路由，但仅适用于公共页面。

我目前有以下，但没有限制，所有页面都是可见的。我想要的是只有在页面公开时才进入页面，否则会引发 404。

```
Page.public.each do |page|
  get "/:slug", controller: 'pages', action: 'show' if page.public?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:04:40.813

我会将这种行为放在控制器中而不是在 routes.rb 中，因为页面可能在运行时从私有更改为公共，并且生产中的路由在开始时仅初始化一次。

```
class PagesController

  before_filter :is_public, only => [:show]

  protected

    # Check if the page is public, otherwise raise a routing error.
    def is_public
      raise ActionController::RoutingError.new unless Page.find(params[:slug]).public?
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:53:55.433

工作代码是（缺少“未找到”）

```
class PagesController

  before_filter :is_public, only => [:show]

  protected

  # Check if the page is public, otherwise raise a routing error.
  def is_public
    raise ActionController::RoutingError.new('Not Found') unless Page.find(params[:slug]).public?
  end
end 
```

# php - 关于 wordpress 中的 register_shutdown_function 和 destruct 函数

> ID：14929250
> 
> 赞同：0
> 
> 时间：2013-02-18T03:57:43.093
> 
> 标签：php, wordpress

我有 2 个关于 wordpress ( `wp-includes/wp-db.php`) 代码的问题：

1.  为什么破坏函数返回true？这是什么意思？！

    > ```
    > function __construct( $dbuser, $dbpassword, $dbname, $dbhost ) {
    >     register_shutdown_function( array( &$this, '__destruct' ) );
    >     ....
    > }
    > function __destruct() {
    >     return true;
    > } 
    > ```

2.  还有为什么[`register_shutdown_function`](http://php.net/register_shutdown_function)输入参数是数组？可以`register_shutdown_function`接受数组作为输入吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:51:59.720

1.  在发布的代码`__destruct()`中没有做任何事情。它只是返回。
2.  `array( $this, 'method-name' )`如果回调是类方法并且您在传递回调时处于对象上下文中，那么是如何传递回调函数的。

例如：

```
class DummyObject() {
  class __construct() {
    function_that_takes_callback( array($this,'callback_function') );
  }

  function callback_function() {
    // do stuff
  }
} 
```

在一个想要的类之外：

```
function_that_takes_callback( 'callback_function');
function callback_function() {
  // do stuff
} 
```

# php - IE 不显示表 UL 的内容

> ID：14929252
> 
> 赞同：0
> 
> 时间：2013-02-18T03:57:56.790
> 
> 标签：php, css, internet-explorer, browser, mozilla

UL 区域在 IE 中为空白，在 Chrome、Firefox 和 safari 中显示内容正常。

//在 IE 中查看源代码可以看到以下代码，但浏览器中的 ul 区域为空：

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>

    <div id="container">
        <div id="header">

            <div id="table">
                <center>
                    <ul>                           
                            <li onmouseover="ChangeColor(this, true);" onmouseout="ChangeColor(this, false);" onclick = "descriptionPage('Drinks','Frappuccino');"><p  class="Quor_Widget_item_nameIndex">Frappuccino </p> 
                                <p class="item_priceIndex">$2.50</p></li>

                            <li onmouseover="ChangeColor(this, true);" onmouseout="ChangeColor(this, false);" onclick = "descriptionPage('Drinks','Latte');"><p  class="Quor_Widget_item_nameIndex">Latte </p>
                                <p class="tem_priceIndex">$2.50</p></li>

                    </ul>

                </center>

            </div>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:03:02.557

```
<ul>

                            <li onmouseover="ChangeColor(this, true);" onmouseout="ChangeColor(this, false);" onclick = "descriptionPage('Drinks','Coffee');"><p  class="Quor_Widget_item_nameIndex">Coffee  
                                <p class="Quor_Widget_item_priceIndex">$2.50</p></li> 
```

您打开两个`<p>`标签，但每`<li></li>`对只关闭一个。Chrome 和 firefox 很聪明，他们解决了这个问题，IE 很笨。妈的傻了

PS你应该格式化你的代码。

编辑：还有一个失踪`</div>`，你看到了吗？请检查您是否关闭了所有标签。

# sql - 在 MS Access 中而不是在 VBScript 中获取 SQL 查询结果

> ID：14929254
> 
> 赞同：3
> 
> 时间：2013-02-18T03:58:16.587
> 
> 标签：sql, vbscript, ms-access-2007

当我通过 MS Access 执行 SQL 查询时，我会返回结果，但如果我在 VBScript 中执行相同的查询，我的 RecordCount 是-1。我不知道这是否是连接错误。我没有得到任何结果，但很明显 SQL 确实在 Access 中返回了结果。我在下面的连接代码中得到 0 次点击。

```
sqlquery = "SELECT * FROM i2cner WHERE Authors Like 'Ish*';"
dim conn
set conn=Server.CreateObject("ADODB.Connection")
conn.Provider="Microsoft.Jet.OLEDB.4.0"
conn.Open "d:/inetpub/ga/sarina/i2cner/contacts2000.mdb"
set r = Server.CreateObject("ADODB.recordset")
if r.state = 1 then r.close
r.Open sqlquery, conn
hits = r.RecordCount
session("hits") = hits
set session("r") = r 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:43:54.843

如果您只需要记录数，那么您可以给出

```
sqlquery = "SELECT COUNT(*) AS cnt FROM i2cner WHERE Authors LIKE 'Ish%'" 
```

请注意，`;`SQL 字符串中没有。当您必须检索计数时，您可以拥有

```
hits = r.fields("cnt") 
```

或者

```
hits = r("cnt") 
```

`Recordcount`有时是骗人的，所以我用的不多。我每次都使用上述方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T07:08:39.740

```
r.CursorLocation = 3 'adUseClient. Thanks @HansUp 
```

在使用之前添加上面的行`r.Open`。是。
_ 因此，记录会随着您的进行而被获取（类似于 .net datareader）。将其更改为会将所有记录带到客户端，这将提供正确的.`CursorLocation``adUseServer``adUseClient``RecordCount`

编辑：另外，在会话中存储记录集没有意义。并且，您应该在完成使用后关闭连接 -

`conn.Close` `set conn = Nothing`

在会话中存储记录集有什么需要？

# java - 循环双链表无限循环

> ID：14929255
> 
> 赞同：1
> 
> 时间：2013-02-18T03:58:21.920
> 
> 标签：java

我的 CS 教授要求我们使用循环链表开发​​自己的 Java 程序。我的项目是从循环列表中添加或删除名称（字符串类型）。到目前为止，我的 add 方法运行良好；但是，我的 removeNode() 方法不起作用并且不会删除所需的元素。它也进行了无限循环，我尝试了很多代码，但它们都不起作用。我的删除方法如下：

```
public E removeNode(E nodeToBeDeleted)
{
    Node<E> nodeFound = findNode(nodeToBeDeleted);

    if(nodeFound != null)
    {
        nodeFound.prev.next = nodeFound.next;
        nodeFound.next.prev = nodeFound.prev;
        size--;
        return nodeFound.data;  
    }
    return null;
} 
```

基本上， findNode() 搜索其数据等于作为参数插入的字符串的节点，但是当我调用 outputList() 方法时，该方法返回屏幕上当前节点的字符串表示，它继续无限循环.

outputList 方法是：

```
public void outputList()
{   
    Node<E> position = head;
    do 
    {
        System.out.print(position.data + " ==> ");
        position = position.next;

    } while((position != null) && (position.next != position));
} 
```

任何帮助将不胜感激..提前致谢。

节点类是：

```
 static class Node<E> {

    /** The data value. */
    private E data;
    /** The link to the next node. */
    private Node<E> next = null;
    /** The link to the previous node. */
    private Node<E> prev = null;

    private Node(E dataItem) {
        data = dataItem;
    }

    private Node(E newData, Node<E> nodeRef)
    {
        data = newData;
        next = nodeRef;
    }

    private Node(Node<E> prevRef, E newData)
    {
        data = newData;
        prev = prevRef;
    }

   //set next link
    private Node(Node<E> newData, Node<E> nodeRef)
    {
        data = (E) newData;
        next = nodeRef;
    }
} //end class Node 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T04:03:12.570

```
while((position != null) && (position.next != position)) 
```

这应该是：

```
while((position != null) && (position.next != head)) 
```

想象一下，如果你有一个单例 - 遍历的绝对基本情况。 `head`并且`position`在你开始时都会指向它，当你想前进时，会再次`position`指向同一个地方。`head`这将无限期地继续*下去*。

当您再次到达起点时，迭代必须停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:06:44.530

```
while(position.next != head) 
```

我认为检查上述条件对于双循环 LinkedList 来说已经足够了。

# ruby - Ruby 错误 Webrick 或 CGI？

> ID：14929260
> 
> 赞同：2
> 
> 时间：2013-02-18T03:58:54.010
> 
> 标签：ruby, webrick

我使用`Webrick`+`CGI`并且当我实例化时，返回一个错误：`(offline mode: enter name=value pairs on standard input)`

> ```
> irb(main):001:0> require 'cgi'
> => true
> irb(main):002:0> cgi = CGI.new
> (offline mode: enter name=value pairs on standard input) 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T04:29:11.390

不，不是错误。这就是它的工作方式。

来自[ruby​​-docs CGI 文档](http://www.ruby-doc.org/stdlib-1.9.2/libdoc/cgi/rdoc/CGI.html)

> 如果 CGI 对象不是在标准 CGI 调用环境中创建的（也就是说，它无法在其环境中找到 REQUEST_METHOD），那么它将以“离线”模式运行。在这种模式下，它从命令行或（失败）从标准输入读取其参数

在 irb 控制台中，在`(offline mode: enter name=value pairs on standard input)`消息之后，控制台正在等待您输入值。Enter`key value pairs`后跟`Ctrl``d`以完成输入数据。

```
 irb(main):001:0> require 'cgi'
 => true
 irb(main):002:0> cgi = CGI.new
 (offline mode: enter name=value pairs on standard input)
 name=Prakash
 number=432 
```

`Ctrl``d`

```
 => #<CGI:0x007fa4eb2abd30 @options={:accept_charset=>"UTF-8"}, @accept_charset="UTF-8", @multipart=false, @params={"name"=>["Prakash"], "number"=>["432"]}, @cookies={}, @output_cookies=nil, @output_hidden=nil> 
irb(main):003:0> 
```

有关在 ruby​​ 中使用 CGI 的更多代码示例，请参阅[PLEAC-Ruby 上的 CGI 编程文档。](http://pleac.sourceforge.net/pleac_ruby/cgiprogramming.html)

# php - 可以发送我们在会话中使用的用户名吗？

> ID：14929266
> 
> 赞同：0
> 
> 时间：2013-02-18T03:59:14.323
> 
> 标签：php, mysql

我想发送存储在会话变量中的用户 ID。当用户提交表单时，数据库应该接收用户提交的数据并从数据库中获取用户ID。这是我所拥有的：

```
session_start();

if (!isset($_SESSION['username']));

{

header('Location: index.php');

}

<p>Welcome, <b>  echo $_SESSION['username'];</b>

if(isset($_POST['submit']))

{

$dbhost = 'localhost';

$dbuser = 'root';

$dbpass = '';

$conn = mysql_connect($dbhost, $dbuser, $dbpass);

if(! $conn )

{

die('Could not connect: ' . mysql_error());

}

if(! get_magic_quotes_gpc() )

{

$complaint = addslashes ($_POST['complaint']);

}

else

{

$complaint = $_POST['complaint'];

}$sql = "INSERT INTO employee ".

"(complaint) ".

"VALUES('$complaint')";

mysql_select_db('sistempinjaman');

$retval = mysql_query( $sql, $conn );

if(! $retval )

{

die('Could not enter data: ' . mysql_error());

}

echo "You complaint sent. We will respon soon via email  \n";

mysql_close($conn);

} 
```

用户名可以与提交表单一起发送吗？

当我们想要显示数据时，表格将具有：

```
| username | complaint | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:03:46.250

表中的所有字段是什么`employee`？`username`如果不存在则添加字段并存储存储在 SESSION 中的用户名。

例子：

```
 $sql = "INSERT INTO employee (username,complaint) 
         VALUES('".$_SESSION['username']."','".$complaint."')"; 
```

# r - 如何为 smooth.spline() 选择平滑参数？

> ID：14929268
> 
> 赞同：10
> 
> 时间：2013-02-18T03:59:32.627
> 
> 标签：r, lambda, smooth, spline, smoothing

我知道平滑参数（lambda）对于拟合平滑样条曲线非常重要，但是我在这里没有看到任何关于如何选择合理的 lambda（spar=?）的帖子，我被告知 spar 通常范围从 0 到 1 . 任何人都可以分享你使用smooth.spline() 的经验吗？谢谢。

```
 smooth.spline(x, y = NULL, w = NULL, df, spar = NULL,
          cv = FALSE, all.knots = FALSE, nknots = NULL,
          keep.data = TRUE, df.offset = 0, penalty = 1,
          control.spar = list(), tol = 1e-6 * IQR(x)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T06:29:55.977

agstudy 提供了一种直观的选择方式`spar`。我记得我从线性模型类中学到的（但不准确）是使用交叉验证来选择“最佳” `spar`。这是从 agstudy 借来的一个玩具示例：

```
x = seq(1:18)
y = c(1:3,5,4,7:3,2*(2:5),rep(10,4))
splineres <- function(spar){
  res <- rep(0, length(x))
  for (i in 1:length(x)){
    mod <- smooth.spline(x[-i], y[-i], spar = spar)
    res[i] <- predict(mod, x[i])$y - y[i]
  }
  return(sum(res^2))
}

spars <- seq(0, 1.5, by = 0.001)
ss <- rep(0, length(spars))
for (i in 1:length(spars)){
  ss[i] <- splineres(spars[i])
}
plot(spars, ss, 'l', xlab = 'spar', ylab = 'Cross Validation Residual Sum of Squares' , main = 'CV RSS vs Spar')
spars[which.min(ss)]
R > spars[which.min(ss)]
[1] 0.381 
```

![在此处输入图像描述](../Images/84d7da22d41f91153f19c52caff91185.png)

代码不是最整洁的，但你很容易理解。此外，如果您`cv=T`在 中指定`smooth.spline`：

```
R > xyspline <- smooth.spline(x, y, cv=T)
R > xyspline$spar
[1] 0.3881 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T05:34:20.000

在你的帮助下`smooth.spline`，有以下几点：

> 使用的计算 λ（作为 \code{spar} 的函数）是 λ = r * 256^(3*spar - 1)

晶石可以大于 1（但我猜不会太多）。我认为您可以通过绘制不同翼梁的拟合值来更改此参数并以图形方式选择它。例如：

```
spars <- seq(0.2,2,length.out=10)          ## I will choose between 10 values 
dat <- data.frame(
  spar= as.factor(rep(spars,each=18)),    ## spar to group data(to get different colors)
  x = seq(1:18),                          ## recycling here to repeat x and y 
  y = c(1:3,5,4,7:3,2*(2:5),rep(10,4)))
xyplot(y~x|spar,data =dat, type=c('p'), pch=19,groups=spar,
       panel =function(x,y,groups,...)
       {
          s2  <- smooth.spline(y,spar=spars[panel.number()])
          panel.lines(s2)
          panel.xyplot(x,y,groups,...)
       }) 
```

例如，在这里，我得到了 spars = **0.4的最佳结果**

![在此处输入图像描述](../Images/8ff63cf89d122cc5ec15702e2fc20923.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T06:02:11.537

如果在相同的 x 值处没有重复点，请尝试设置 GCV=TRUE - 广义交叉验证 (GCV) 过程是一种聪明的方法，可以选择一个很好的 stab 来为 lambda（跨度）选择一个好的值。关于 GCV 的一个简洁细节是，它实际上不必费心为每一组遗漏的点进行计算——正如 Simon Wood 的书中所强调的那样。[有关这方面的更多详细信息，请查看 Simon Wood 在MGCV](http://people.bath.ac.uk/sw283/mgcv/)上的网页上的注释。

Adrian Bowman 的 (sm) r-package 有一个函数`h.select()`专门用于选择 lambda 值的繁重工作（尽管我不能 100% 确定它是否与`smooth.spline()`基本包中的函数兼容。

# java - 确保恶意 apk 没有与我的服务器通信

> ID：14929274
> 
> 赞同：3
> 
> 时间：2013-02-18T04:00:26.997
> 
> 标签：java, php, android, security

我试图确保有人无法重新编译我的混淆应用程序，然后将恶意数据发送到我的服务器。我正在对我的应用程序的 versionCode 和 packageName 进行 SSLed PHP_POST。这些 POSTED 变量都通过非对称加密以及签名验证进行加密，每次版本升级都会更改。我曾考虑过使用校验和，但这些方法不受 Google 官方支持，研究表明它们不能防错，这意味着它们可能会破坏合法用户。

最重要的是，当检测到 100% 不合法的东西时，通过 IP/Mac 地址/IMEI/Serial/Android_ID/etc 禁止站点。

我知道没有什么是 100% 安全的，好的安全和坏的安全之间的区别在于破坏安全所需的时间/金钱/努力的价值高于受安全保护的项目。考虑到这一点，是否有任何其他方法可以用来保护我的应用程序或我应该实施的任何想法以添加到当前安全性？

在旁注中，反编译/重新编译一个被混淆的 apk(jar) 有多容易，一旦完成一次会更容易吗？（也就是说，我更改密钥的次数并不重要，因为应用程序已经受到攻击，反编译器可以简单地查看我最后一个密钥所在的位置）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:33:46.237

首先，首先，不要自己做加密。如果您正确（！）执行 SSL 可能足以保护传输中的数据免受篡改等。您需要做的是以某种方式验证您的应用程序，这通常很棘手，因为您需要将凭据保留在应用程序中。有不同的方法，但目前的标准（和谷歌认可的方式）是使用谷歌播放服务来获取一个令牌并在你的服务器应用程序中验证它。详情在这里：[http ://android-developers.blogspot.jp/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.jp/2013/01/verifying-back-end-calls-from-android.html)

这并不完美，但可能比您能想出的大多数非标准解决方案要好。

反编译通常很容易，并且混淆不会有太大变化，因为找到调用系统 API 的位置（获取 MAC 地址、哈希、加密等）是微不足道的。

# android - 插入 android.database.sqlite.sqliteconstraintexception 错误代码 19 约束失败

> ID：14929277
> 
> 赞同：4
> 
> 时间：2013-02-18T04:00:46.710
> 
> 标签：android, android-intent, android-sqlite, android-spinner, sqliteopenhelper

我知道有很多关于这个问题的线程，但我自己的问题都没有。我在数据库中连接了一个微调器，它显示特定表的外键。并且出现插入错误。

`02-18 11:44:34.500: E/SQLiteDatabase(20811): Error inserting ConsumerName=android.database.sqlite.SQLiteCursor@4144fa58 kWh=801.0 _id=65324 Date=2013 -2-18 Previous=98 Current=899`

`02-18 11:44:34.500: E/SQLiteDatabase(20811): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed`

```
public class ElectricMeterReader extends Activity {

    private long rowID;

    private EditText meterNoEt;
    private EditText currentEt;
    private EditText previousEt;
    private EditText kWhEt;
    private TextView dateTv;
    private Spinner spinner;
    private int mSpinnerSpeciesId;

  private ElectricMeterReader mContext;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.electric_meter_reader);

    Bundle extras = getIntent().getExtras();

    // rowID = extras.getLong(ConsumerList.ROW_ID);

    dateTv = (TextView) findViewById(R.id.dateEmr);
    meterNoEt = (EditText) findViewById(R.id.meterNumberEmr);
    currentEt = (EditText) findViewById(R.id.currentReadingEmr);
    previousEt = (EditText) findViewById(R.id.passReadingEmr);
    kWhEt = (EditText) findViewById(R.id.kwhEmr);

    spinner = (Spinner) findViewById(R.id.spinner);

    // Loading spinner data from database
    SQLiteDatabase db = new DatabaseOpenHelper(this).getWritableDatabase();

    // Spinner Drop down elements
    // List<String> lables = db.getAllLabels();
    Cursor c = db.rawQuery(
            "SELECT AccountID AS _id, ConsumerName FROM Consumers", null);
    // Creating adapter for spinner
    startManagingCursor(c);
    String[] from = new String[] { "_id" };
    int[] to = new int[] { android.R.id.text1 };
    SimpleCursorAdapter dataAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, c, from, to);

    // Drop down layout style - list view with radio button
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
    // set spinner listener to display the selected item id
    mContext = this;

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
            // On selecting a spinner item
            //String label = parent.getItemAtPosition(position).toString();

             Cursor c = (Cursor) parent.getItemAtPosition(position);
              mSpinnerSpeciesId = c.getInt(c
              .getColumnIndexOrThrow("ConsumerName"));

            // Showing selected spinner item

        /*  Toast.makeText(parent.getContext(), "You selected: " + label,
                    Toast.LENGTH_LONG).show();*/

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub
        }
    });

    final Calendar ca = Calendar.getInstance();
    int yy = ca.get(Calendar.YEAR);
    int mm = ca.get(Calendar.MONTH);
    int dd = ca.get(Calendar.DAY_OF_MONTH);
    dateTv.setText(new StringBuilder()
            // Month is 0 based, just add 1
            .append(yy).append(" ").append("-").append(mm + 1).append("-")
            .append(dd));

    if (extras != null) {

        rowID = extras.getLong("_id");
        // meterNoEt.setText(extras.getString("MeterNumber"));
        // set current date into textview
        // Spinner click listener

        currentEt.setText(extras.getString("Current"));
        previousEt.setText(extras.getString("Previous"));
        kWhEt.setText(extras.getString("kWh"));
        // dateTv.setText(extras.getString("Date"));

    }

    Button calButton = (Button) findViewById(R.id.calculateDef);
    calButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            float result = Float.parseFloat(currentEt.getText().toString())
                    - Float.parseFloat(previousEt.getText().toString());
            kWhEt.setText(Float.toString(result));

        }

    });

    Button saveButton = (Button) findViewById(R.id.addConsumption);

    saveButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (kWhEt.getText().length() != 0) {

                AsyncTask<Object, Object, Object> saveContactTask = new AsyncTask<Object, Object, Object>() {

                    @Override
                    protected Object doInBackground(Object... params) {

                        saveContact();
                        return null;

                    }

                    @Override
                    protected void onPostExecute(Object result) {
                        /*
                         * Intent addContact = new Intent(
                         * ElectricMeterReader.this,
                         * ConsumerReadList.class);
                         * startActivity(addContact);
                         */
                        finish();
                    }
                };

                saveContactTask.execute((Object[]) null);

            }

            else {
                AlertDialog.Builder alert = new AlertDialog.Builder(
                        ElectricMeterReader.this);
                alert.setTitle(R.string.errorTitle);
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null);
                alert.show();
            }
        }
    });
}

public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.consumer_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.addConsumerItem:
        Intent addContact = new Intent(ElectricMeterReader.this,
                AddEditConsumer.class);
        startActivity(addContact);
        return true;

    case R.id.consumerInfo:
        Intent electricMeterReader = new Intent(ElectricMeterReader.this,
                ViewConsumer.class);
        startActivity(electricMeterReader);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }

}

private void saveContact() {

    DatabaseConnector dbConnector = new DatabaseConnector(this);

    if (getIntent().getExtras() == null) {

        dbConnector.insertConsumption(meterNoEt.getText().toString(),
                currentEt.getText().toString(), previousEt.getText()
                        .toString(), kWhEt.getText().toString(), dateTv
                        .getText().toString(),
                spinner.getItemAtPosition(mSpinnerSpeciesId).toString()

        );

    } else {
        dbConnector.updateConsumption(rowID,
                currentEt.getText().toString(), previousEt.getText()
                        .toString(), kWhEt.getText().toString(), dateTv
                        .getText().toString(),
                spinner.getItemAtPosition(mSpinnerSpeciesId).toString());

    }
} 
```

}

插入编码到我的数据库连接器中的方法

```
 public void insertConsumption(String meter_number, String current,
        String previous, String kWh, String date, String consumer_name) {

    ContentValues newCons = new ContentValues();

    newCons.put("_id", meter_number);
    newCons.put("Current", current);
    newCons.put("Previous", previous);
    newCons.put("kWh", kWh);
    newCons.put("Date", date);
    newCons.put("ConsumerName", consumer_name);

    open();

    database.insert("Consumptions", null, newCons);

    close();
} 
```

我的数据库 Openhelper

```
public class DatabaseOpenHelper extends SQLiteOpenHelper {

    static final String dbName = "ElectricMeterDB";

    static final String tableLabels = "labels";
    static final String consumptionsTable = "Consumptions";
    static final String colMeterNumber = "_id";
    static final String colCurrent = "Current";
    static final String colPrevious = "Previous";
    static final String colkWh = "kWh";
    static final String colDate = "Date";
    static final String colConsumer = "ConsumerName";

    static final String consumersTable = "Consumers";
    static final String colAccountID = "AccountID";
    static final String colName = "ConsumerName";
    static final String colAddress = "Address";

    public static final String viewReads = "ViewReading";

    public DatabaseOpenHelper(Context context) {
        super(context, dbName, null, 2);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE " + consumersTable + " (" + colAccountID
            + " INTEGER PRIMARY KEY NOT NULL," + colName + " TEXT NOT NULL, "
            + colAddress + " TEXT NOT NULL);");

    db.execSQL("CREATE TABLE " + consumptionsTable + " (" + colMeterNumber
            + " INTEGER PRIMARY KEY NOT NULL," + colCurrent + " INTEGER, "
            + colPrevious + " INTEGER, " + colkWh + " INTEGER, " + colDate
            + " TEXT, " + colConsumer + " INTEGER NOT NULL, FOREIGN KEY ("
            + colConsumer + ") REFERENCES " + consumersTable + " ("
            + colAccountID + "));");

    db.execSQL("CREATE TRIGGER fk_cmpcons_consid" + " BEFORE INSERT "
            + " ON " + consumptionsTable + " FOR EACH ROW BEGIN"
            + " SELECT CASE WHEN ((SELECT " + colAccountID + " FROM "
            + consumersTable + " WHERE " + colAccountID + " =new."
            + colConsumer + ") IS NULL)"
            + "THEN RAISE (ABORT, 'Foreign Key Violation') END;" + "END;");

    db.execSQL("CREATE VIEW " + viewReads + " AS SELECT "
            + consumptionsTable + " . " + colMeterNumber + " AS _id, "
            + consumptionsTable + " . " + colCurrent + " ,"
            + consumptionsTable + " . " + colPrevious + " ,"
            + consumptionsTable + " . " + colkWh + ", " + consumptionsTable
            + " . " + colDate + "," + consumersTable + "." + colConsumer
            + " FROM " + consumptionsTable + " JOIN " + consumersTable
            + " ON " + consumptionsTable + " . " + colConsumer + " = "
            + consumersTable + "." + colAccountID);
    // Inserts pre-defined consumers

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    db.execSQL("DROP TABLE IF EXISTS" + consumptionsTable);
    db.execSQL("DROP TABLE IF EXISTS" + consumersTable);

    db.execSQL("DROP TRIGGER IF EXISTS consumers_id_trigger");
    db.execSQL("DROP TRIGGER IF EXISTS consumers_id_trigger22");
    db.execSQL("DROP TRIGGER IF EXISTS fk_cmpcons_consid");
    db.execSQL("DROP VIEW IF EXISTS" + viewReads);
    onCreate(db);
}

public void insertLabel(String label) {

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(colName, label);

    // Inserting Row
    db.insert(tableLabels, null, values);
    db.close(); // Closing database connection
}

    /**
     * Getting all labels returns list of labels
     * */
    public List<String> getAllLabels() {

        List<String> labels = new ArrayList<String>();

        // Select All Query
        String selectQuery = "SELECT * FROM " + consumersTable;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                labels.add(cursor.getString(1));
            } while (cursor.moveToNext());
        }

        // closing connection
        cursor.close();
        db.close();

        // returning lables
        return labels;
    }
} 
```

我被这个问题困住了。请帮我。感谢您未来的回应。

日志.d

```
02-18 13:49:59.870: D/saveContact(30881): _id: 36698521 ConsumerName: android.database.sqlite.SQLiteCursor@4144f700 
```

我的阵列适配器；

```
public void arrayAdapterList() {

    final String[] from = new String[] { DatabaseOpenHelper.colAccountID };
    // int[] to = new int[] { android.R.id.text1 };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, from);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner = (Spinner) findViewById(R.id.spinner);
    // attaching data adapter to spinner
    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
            // On selecting a spinner item
            // String col= c.getString(c.getColumnIndex("_id"));
            int item = spinner.getSelectedItemPosition();
            Toast.makeText(getBaseContext(), "You Selected: " + from[item],
                    Toast.LENGTH_SHORT).show();

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T04:20:11.517

似乎您插入的某些值对于 NOT NULL 字段（在您的情况下为 ConsumerName）或 PK（在您的情况下为 _id）可能是 NULL 已经存在。错误代码 19 表示在操作（INSERT 等）期间违反了表约束（NOT NULL、UNIQUE 等）。以下是[SQLITE 错误代码列表](http://www.sqlite.org/c3ref/c_abort.html)

android.database.sqlite.SQLiteCursor@4144fa58 是分配给 ConsumerName 的垃圾值。因此，请采取一些解决方法以从光标中为 ConsumerName 获取正确的 FK。

你的 SimpleCursorAdapter 有问题。所以请看一下。如果您在微调器中获得正确的值，那么请像这样从 spiner 中获取选定的值，`spinner.getSelectedItem().toString();`而不是`spinner.getItemAtPosition(mSpinnerSpeciesId).toString()`.

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T14:55:24.943

我遇到了同样的错误，并通过在代码中设置 ID NULL 来解决它。由于 ID 为 PK SqlLite 自动递增其值，因此无需设置。

```
public void insertConsumption(String meter_number, String current,
    String previous, String kWh, String date, String consumer_name) {

    ContentValues newCons = new ContentValues();

    //newCons.put("_id", meter_number);
    newCons.put("Current", current);
    newCons.put("Previous", previous);
    newCons.put("kWh", kWh);
    newCons.put("Date", date);
    newCons.put("ConsumerName", consumer_name);

    open();

    database.insert("Consumptions", null, newCons);

    close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T06:25:12.393

约束失败通常表明您执行了类似将空值传递到您在创建表时声明为非空的列的操作。

因此，在创建表时删除 not null 并放置 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T10:10:02.010

您将列“colAccountID”声明为 PRIMARY KEY，因此当您尝试一次又一次地插入相同的 ID 时，SQLite db 会抛出错误。

# php - PHP 裁剪不起作用，返回黑色图像 - 图像裁剪系统

> ID：14929278
> 
> 赞同：0
> 
> 时间：2013-02-18T04:00:47.387
> 
> 标签：php

基本上，我正在开发一个图像裁剪系统。我正在尝试调整图像大小并将其转换为 jpeg，然后允许执行裁剪功能。但是，它调整大小和转换没有问题。但是当我添加裁剪功能时，问题是它返回裁剪后的黑色图像。这方面的信息将与 jQuery Ajax 一起发布。而且我知道 ajax 发布可以正常工作，因为我对其进行了调试。我可以为您提供我的客户端脚本，尽管我不相信这是必要的，因为问题似乎出在 PHP 中。

更新：我已经修改了我的脚本。问题仍然存在。

```
$old_file_path = $user_data['profile_pic'];
$new_width = $_POST['width_img'];
$new_height = $_POST['height_img'];
$dst_x = 0;
$dst_y = 0;
$src_x = $_POST['left'];
$src_y = $_POST['top'];
$dst_w = $_POST['width'];
$dst_h = $_POST['height'];
$src_w = $_POST['width'];
$src_h = $_POST['height'];

    $file_path = 'core/images/profile/'.  substr(md5(time()), 0, 15) . '.' . 'jpg';

    $old_file_name = $user_data['profile_pic'];
    $allowed = array('jpg','jpeg','gif','png');
    $file_extension= explode('.', $old_file_name); 
    $file_extn= strtolower(end($file_extension));

    $image_p = imagecreatetruecolor($new_width, $new_height);

    if($file_extn == 'jpg' || $file_extn == 'jpeg'){
    $image = imagecreatefromjpeg($old_file_name);
}if ($file_extn == 'png'){
    $image = imagecreatefrompng($old_file_name);
}

list($width, $height) = getimagesize($old_file_name);

imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
imagejpeg($image_p, $file_path);
//Begin cropping!
$dst_image = imagecreatetruecolor($dst_w,$dst_h);
$src_image = imagecreatefromjpeg($old_file_name);

imagecopyresampled($dst_image, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h);
imagejpeg($dst_image, $file_path);

crop_profile_image($session_user_id, $file_path, $old_file_path);

function crop_profile_image($user_id, $file_path, $old_file_path){
    if(file_exists($old_file_path) === true){unlink($old_file_path);}   
    mysql_query("UPDATE `users` SET `profile_pic` = '". mysql_real_escape_string($file_path) ."' WHERE `user_id` = " . (int)$user_id);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:43:53.363

使用 timthumb 代替它的单个文件并且非常易于使用，并且它有很多选项。更多信息请访问：[http ://code.google.com/p/timthumb/](http://code.google.com/p/timthumb/)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T10:54:27.533

您可以在它之后找到`imagecreatetruecolor`并添加`function` `imagecolorallocate`它。例如：

```
$newImage = imagecreatetruecolor($newImageWidth,$newImageHeight); //find this function
imagecolorallocate($newImage, 0, 0, 0); //add this function
imagecolortransparent($newImage, $transpatent); 
```

# c++ - 创建链表时遇到问题

> ID：14929287
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:01:28.470
> 
> 标签：c++, arrays, string, linked-list

我有一个字符串数组，我应该用它来创建一个链表。问题是我只能使用数组。我查找的所有内容都说使用结构和节点，我不确定从这里去哪里。我知道我的代码不正确，每个指针都指向数组的一个元素，因此它们并没有真正链接。如果有人能指出我正确的方向，那就太棒了

这是我到目前为止所拥有的

```
#include <iostream>
#include <string>

using namespace std;

int main ()
{
string names [4] = {"Dick", "Harry", "Sam", "Tom", " "};
string *nameptr[4];

for(int x = 0; x < 4; x++)
{
    nameptr[x] = &names[x];
    cout << *nameptr[x] << " is at position " << x << " and points to ";
    cout << &nameptr[x] << endl;
}
return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:12:39.900

以下是 C++ 中链表的教程：

[http://www.dreamincode.net/forums/topic/31357-c-linked-lists-custom-linked-lists-part-1/](http://www.dreamincode.net/forums/topic/31357-c-linked-lists-custom-linked-lists-part-1/)

您应该先搜索并尝试一下，然后当您向这里的人询问时，将能够更好地帮助您解决您的问题。事实上，也读过这个：

[http://mattgemmell.com/2008/12/08/what-have-you-tried/](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T04:19:48.450

实际上如果使用数组，你只需要一个指向第一个元素的指针，你可以通过指针算法访问数组的其余部分。

但是，如果您想要一个真正的链接列表。那么你可以做这样的事情：

```
struct mydata{
    std::string data;
    struct mydata* next;
}

mydata names[4] = {{"Dick",NULL}, {"Harry",NULL}, {"Sam",NULL}, {"Tom",NULL}, {" ",NULL}};
//here you establish the link
names[0].next = &names[1];
names[1].next = &names[2];
names[2].next = &names[3];
names[3].next = &names[4];
//here is the pointer to the head;
mydata* nameptr = names;

while(nameptr)
{
    cout << nameptr->data;
    nameptr = nameptr->next;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:13:46.280

“我只能使用数组”是什么意思？您只知道如何使用数组，或者您仅限于使用数组，或者？？

您查找了一些告诉您使用结构的东西 - 您尝试过这样做吗？它不在您的代码中。

与您的实际问题无关，但您已经声明了一个包含 4 个字符串 ( `string names [4]`) 的数组，然后您尝试使用 5 个项目初始化该数组。

我的建议与您所看到的类似：使用结构，我还要补充一点，您还需要使用堆（`malloc`在 c 中，`new`在 c++ 中）。该结构将需要一个指向下一个列表元素的链接指针，以及存储数据本身的位置，在这种情况下可能只是一个`char`指针。

# logging - 无法获取“用户计算机名”

> ID：14929297
> 
> 赞同：0
> 
> 时间：2013-02-18T04:02:45.447
> 
> 标签：logging, localhost, computer-name

如上所述，在做了很多尝试和错误之后，我仍然坚持这一点，到目前为止我发现的所有参考仍然无法解决这个问题，因为我根本无法获得真正的计算机名称，而是我之前尝试过的大多数示例将返回服务器名称或最接近的服务器名称将返回“10”，无论它捕获了多少用户。我正在为我的系统创建一个日志功能，到目前为止，我可以在下面的代码中获取域名、用户 IP 地址、用户 ID：

请有人指导我如何获得“用户计算机名”......TQ大家

```
using System;
using System.Net;
using System.Net.NetworkInformation;
using System.Net.Mail;
using System.IO;
using System.Globalization;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using Microsoft.SharePoint; 
```

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

```
 {
        SPSite spSite = SPContext.Current.Site;
        SPSite spConvSite = new SPSite("www.mywebsite.com");
        SPWeb spWeb = SPContext.Current.Web;
        SPWeb spConvWeb = spConvSite.OpenWeb();
        SPUser spUser = spWeb.CurrentUser;

        string strDateLogCreated = DateTime.Now.ToString("ddMMyyyy-hhmmsstt", CultureInfo.InvariantCulture);
        string LogFolder = "D:\\Logs\\Client";
        string[] LocalComputerName = System.Net.Dns.GetHostEntry(Request.ServerVariables["remote_addr"]).HostName.Split(new Char[] { '.' });
        String ecn = System.Environment.MachineName;
        string domainName = System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName;
        string hostName = Dns.GetHostName();
        IPGlobalProperties  ipProperties = IPGlobalProperties.GetIPGlobalProperties();
        string testHost = ipProperties.HostName;
        string testDomain = ipProperties.DomainName;
        string strLocalIPAddress = HttpContext.Current.Request.UserHostAddress.ToString();

        string hName = "";      
        System.Net.IPHostEntry host = new System.Net.IPHostEntry();
        host = System.Net.Dns.GetHostEntry(HttpContext.Current.Request.ServerVariables["REMOTE_HOST"]);

        //Split out the host name from the FQDN
        if (host.HostName.Contains("."))
        {
        string[] sSplit = host.HostName.Split('.');
        hName = sSplit[0].ToString();
        }
        else
        {
        hName = host.HostName.ToString();
        }
        //return hName;

        StreamWriter swLogFile = File.AppendText(String.Format(@"{0}\Client-{1}.log", LogFolder, strDateLogCreated));

        swLogFile.WriteLine("*** Date & Time : " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture));
        swLogFile.WriteLine("*** Initiated By : " + spUser.Name.ToString());
        swLogFile.WriteLine("*** LAN ID : " + spUser.LoginName.ToString());
        swLogFile.WriteLine("*** Computer Name : " + LocalComputerName[0].ToString());
        swLogFile.WriteLine("*** IP Address : " + strLocalIPAddress.ToString());
        swLogFile.WriteLine("---------------------------------------------------");
        swLogFile.WriteLine(DateTime.Now.ToString("hh:mm:ss tt", CultureInfo.InvariantCulture) + " - " + "Successfully captured.");
        swLogFile.WriteLine("=====================================================================================================");
        swLogFile.WriteLine("Test 1 : " + domainName.ToString());
        swLogFile.WriteLine("Test 2 : " + hostName.ToString());
        swLogFile.WriteLine("Test 3 : " + testHost.ToString());
        swLogFile.WriteLine("Test 4 : " + System.Environment.GetEnvironmentVariable("COMPUTERNAME"));
        swLogFile.WriteLine("Test 5 : " + System.Net.Dns.GetHostEntry(Request.ServerVariables["REMOTE_HOST"]).HostName);
        swLogFile.WriteLine("Test 6 : " + hName.ToString());
        swLogFile.Flush();
    } 
```

像这样的输出示例：

```
Date & Time : 18/02/2013 11:45:26 AM

Initiated By : USER NAME

LAN ID : DOMAIN\ID99999

Computer Name : 10 //I don't get the real user computer name here!

IP Address : 99.999.99.999

//-----------------------------------//

11:45:26 AM - Successfully captured.

//===================================//

Test 1 : DOMAIN.COMPANYDOMAIN.com

Test 2 : SERVERNAME

Test 3 : SERVERNAME

Test 4 : SERVERNAME

Test 5 : 99.999.99.999

Test 6 : 10 //Also return the same result 
```

更新 ：

我现在设法得到答案，答案链接到我在另一篇文章中的答案：

[https://stackoverflow.com/a/38953637/1785641](https://stackoverflow.com/a/38953637/1785641)

Kelsey 在上面的链接上发布的更新版本：

```
$(function GetInfo() {
    var network = new ActiveXObject('WScript.Network');
        alert('User ID : ' + network.UserName + '\nComputer Name : ' + network.ComputerName + '\nDomain Name : ' + network.UserDomain);
        document.getElementById('<%= currUserID.ClientID %>').value = network.UserName;
        document.getElementById('<%= currMachineName.ClientID %>').value = network.ComputerName;
        document.getElementById('<%= currMachineDOmain.ClientID %>').value = network.UserDomain;
}); 
```

要存储值，请添加以下控件：

```
<asp:HiddenField ID="currUserID" runat="server" /> <asp:HiddenField ID="currMachineName" runat="server" /> <asp:HiddenField ID="currMachineDOmain" runat="server" /> 
```

你也可以像这样从后面调用它：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "MachineInfo", "GetInfo();", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:10:48.650

嗯，你设置`LocalComputerName`为

```
System.Net.Dns.GetHostEntry(
Request.ServerVariables["remote_addr"]).HostName.Split(new Char[] { '.' }) 
```

如果您将其更改为：

```
System.Net.Dns.GetHostEntry(Request.ServerVariables["remote_addr"]) 
```

如果您最终获得了 IP 地址，请尝试使用`nslookup`该地址并查看是否获得了主机名。如果你不这样做，你的问题在于 DNS 解析。

顺便问一下，实际的 IP 地址是否以 开头`10.`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:00:54.057

我现在快接近了，这是我的 .ascx 文件的代码：

```
<style type="text/css">
    .hiddenText
    {
        display: none;
    }
</style>
<script type="text/jscript">
<!--
    $(document).ready(function () {
        var net = new ActiveXObject("WScript.Network");
        var vPCName = net.ComputerName;
        document.getElementById('<%= txtPCName.ClientID %>').value = vPCName;
    });
//-->
</script> 
```

这是保存计算机名称的文本框，它应该是隐藏的，但如果它被隐藏它将不起作用。

```
<asp:TextBox ID="txtPCName" runat="server" /> 
```

这是后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Collector();
    }
    protected void Collector()
    {
        if (txtPCName.Text != null || txtPCName.Text != "")
        {
            SPSite spSite = SPContext.Current.Site;
            SPSite spConvSite = new SPSite("https://www.mywebsite.com");
            SPWeb spWeb = SPContext.Current.Web;
            SPWeb spConvWeb = spConvSite.OpenWeb();
            SPUser spUser = spWeb.CurrentUser;

            string strDateLogCreated = DateTime.Now.ToString("ddMMyyyy-hhmmsstt", CultureInfo.InvariantCulture);
            string LogFolder = "D:\\Logs\\Client";
            string[] LocalComputerName = System.Net.Dns.GetHostEntry(Request.ServerVariables["remote_addr"]).HostName.Split(new Char[] { '.' });
            String ecn = System.Environment.MachineName;
            string domainName = System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName;
            string hostName = Dns.GetHostName();
            string strLocalIPAddress = HttpContext.Current.Request.UserHostAddress.ToString();

            StreamWriter swLogFile = File.AppendText(String.Format(@"{0}\Client-{1}.log", LogFolder, strDateLogCreated));

            swLogFile.WriteLine("*** Date & Time : " + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture));
            swLogFile.WriteLine("*** Initiated By : " + spUser.Name.ToString());
            swLogFile.WriteLine("*** LAN ID : " + spUser.LoginName.ToString());
            swLogFile.WriteLine("*** Computer Name : " + txtPCName.Text);
            swLogFile.WriteLine("*** IP Address : " + strLocalIPAddress.ToString());
            swLogFile.WriteLine("---------------------------------------------------");
            swLogFile.WriteLine(DateTime.Now.ToString("hh:mm:ss tt", CultureInfo.InvariantCulture) + " - " + "Successfully captured.");
            swLogFile.WriteLine("=====================================================================================================");
            swLogFile.Flush();
        }
    } 
```

But the problem is, txtPCName cannot be hidden either by using Visible="false" or Style="display: none" cause it will not be able to store the value from Javascript to txtPCName. How do I solve this? I cannot let the textbox showing on the page.

# python - 带有棺材扩展的 Babel 和 jinja2

> ID：14929304
> 
> 赞同：2
> 
> 时间：2013-02-18T04:03:29.490
> 
> 标签：python, django, python-babel, coffin

我正在尝试使用命令行工具用 Babel 翻译 jinja2/coffin 模板。问题是函数 babel_extract 卡在 {% url %} 或 {% csrf_token %} 等棺材标签上。

首先，为了检测问题，我修改了 jinja.ext.babel_extract 并在渲染时在异常上添加了“print e”。

```
try:
    node = environment.parse(source)
    tokens = list(environment.lex(environment.preprocess(source)))
except TemplateSyntaxError, e:
    # skip templates with syntax errors
    print e
    return 
```

当我使用 Babel 运行 extract 方法时，它会打印出以下错误：

```
Encountered unknown tag 'url'. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'. extracting messages from templates/contact.html (encoding="utf-8") 
```

然后我编辑了我的 babel 配置以添加棺材库。我还设置了环境变量以将我的 django 项目添加到我的 python 路径并将 django 设置模块设置为我的 settings.py。

```
[python: src/**.py]

[jinja2: templates/**.html]
encoding = utf-8
extensions = coffin.template.Library

[extractors]
jinja2 = jinja2.ext:babel_extract 
```

现在，当我运行 extract 方法时，会发生此错误：

`extracting messages from templates/brands.html (extensions="coffin.template.Library", encoding="utf-8") Traceback (most recent call last): File "/usr/local/bin/pybabel", line 9, in <module> load_entry_point('Babel==0.9.6', 'console_scripts', 'pybabel')() File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 1107, in main return CommandLineInterface().run(sys.argv) File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 651, in run return getattr(self, cmdname)(args[1:]) File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 912, in extract for filename, lineno, message, comments in extracted: File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 171, in extract_from_dir strip_comment_tags): File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 201, in extract_from_file strip_comment_tags)) File "/Library/Python/2.7/site-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 275, in extract for lineno, funcname, messages, comments in results: File "/Library/Python/2.7/site-packages/jinja2/ext.py", line 588, in babel_extract auto_reload=False File "/Library/Python/2.7/site-packages/jinja2/environment.py", line 279, in __init__ self.extensions = load_extensions(self, extensions) File "/Library/Python/2.7/site-packages/jinja2/environment.py", line 76, in load_extensions result[extension.identifier] = extension(environment) TypeError: __init__() takes exactly 1 argument (2 given)`

# python - python语言的语法分析器

> ID：14929307
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:03:46.747
> 
> 标签：python

我正在为***PYTHON ***语言创建一个语法分析器。有谁知道python中**STRINGS的词法规则和语法？**提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:07:01.653

我认为你的意思是字符串文字？语法[在这里](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)定义。[`ast`](http://docs.python.org/2/library/ast.html)但实际上，当 python模块已经做了你想要的（为 python 提供了词法分析器）时，你不应该费心重新发明轮子。

# asp.net-mvc-3 - 如何获取 RAZOR 模板引擎的输出作为字符串，然后将其写入文件？

> ID：14929308
> 
> 赞同：1
> 
> 时间：2013-02-18T04:03:53.990
> 
> 标签：asp.net-mvc-3, razor

在我的 ASp.Net MVC 3 应用程序中，我使用 RAZOR 引擎生成带有模板的 html。它非常适合在浏览器中查看。但我想将剃刀引擎的输出转换为字符串，然后将其写入文件。例如：

**测试.cshtml**

```
<html>
  <head>
    <title>
      @websiteTitle
    </title>
  </head>
  <body>
    @websiteBody
  </body>
</html> 
```

我想像这样在我的控制器代码中进行调用：

```
String output = processTemplate(...)
//code to write 'output' to a file 
```

..where`processTemplate()`获取模板文件名和所需的模板参数并生成字符串输出。

我[尝试](http://www.google.co.in/search?q=asp.net%20template%20engine&sourceid=ie7&rls=com.microsoft%3aen-us%3aIE-Address&ie=&oe=&redir_esc=&ei=LKQhUaG9K4r8rAfT2YCYAw#hl=en&tbo=d&rls=com.microsoft%3aen-us%3aIE-Address&sclient=psy-ab&q=asp.net%20razor%20write%20to%20file&oq=asp.net%20razor%20write%20to%20file&gs_l=serp.3..33i21.467751.472196.1.472232.27.20.0.5.5.0.370.4392.0j6j12j1.19.0.les;..0.0...1c.1.3.psy-ab.R_G8UPgqEoU&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42553238,d.bmk&fp=ca85679e4aaec60f&biw=1280&bih=625)[在 Google](http://www.google.co.in/search?q=asp.net%20template%20engine&sourceid=ie7&rls=com.microsoft%3aen-us%3aIE-Address&ie=&oe=&redir_esc=&ei=LKQhUaG9K4r8rAfT2YCYAw#hl=en&tbo=d&rls=com.microsoft%3aen-us%3aIE-Address&sclient=psy-ab&q=asp.net%20razor%20output%20to%20file&oq=asp.net%20razor%20output%20to%20file&gs_l=serp.3...10491.11156.2.11301.7.6.0.0.0.4.261.1204.0j3j3.6.0.les;..0.0...1c.1.3.psy-ab.hPfdOg5L4Ig&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42553238,d.bmk&fp=ca85679e4aaec60f&biw=1280&bih=625)中搜索，但找不到任何有关如何执行此操作的文档。是否可以？如果是，如何？

**注意：**我可以在 Java Web 应用程序中使用 FreeMarker 来做到这一点——我们可以输出到控制台、文件或 StringWriter。这很方便。我想有类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:10:14.233

使用“剃刀引擎”

有关使用示例，请查看[http://www.hanselman.com/blog/NuGetPackagesOfTheWeek12AccessingGoogleSpreadsheetsWithGDataFromCAndHostingRazorTemplatesToGenerateHTMLFromAConsoleApp.aspx](http://www.hanselman.com/blog/NuGetPackagesOfTheWeek12AccessingGoogleSpreadsheetsWithGDataFromCAndHostingRazorTemplatesToGenerateHTMLFromAConsoleApp.aspx)

# php - 从 PHP 中的父类中的方法调用派生的静态方法

> ID：14929309
> 
> 赞同：0
> 
> 时间：2013-02-18T04:04:00.200
> 
> 标签：php, class, static, call

我有以下课程：

```
<?php
    Abstract Class A{
        public function foo(){
            self::bar();
        }

       Abstract public static function bar($arg);
    }

    Class B extends A{ 
        public static function bar(){
            echo "Class B";      
        }
    }

    Class C extends A{
        public static function bar(){
            echo "Class C";
        }
    }
?> 
```

我需要从 foo() 调用实例化类的方法 bar()：

```
<?php
  $obj1 = new B();
  $obj2 = new C();

  $obj1->foo(); // I expect to get 'Class B'
  $obj2->foo(); // I expect to get 'Class C'
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:15:44.697

您为此使用[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)

基本上在你调用的抽象类中`static::method()`。这使用进行调用的类的方法。

```
Abstract Class A{
    public function foo(){
        // Late static binding
        static::bar();
    }

   abstract public static function bar();
} 
```

# asp.net-mvc - 将 @Html.DisplayNameFor() 与 PagedList 一起使用

> ID：14929311
> 
> 赞同：48
> 
> 时间：2013-02-18T04:04:16.203
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4, pagedlist

我一直在尝试 PagedList 包来为我的索引视图获取分页。一切进展顺利，在控制器级别一切正常，每页仅显示 5 条记录，并根据查询字符串显示适当的页面。

我的问题在视图中。我将 @Model 更改为，`PagedList.IPagedList`以便可以访问`Model.HasNextPage`和其他属性，但现在`@Html.DisplayNameFor(model => model.ItemName)`不再工作。我收到此错误：

`PagedList.IPagedList<Dossier.Models.Item>' does not contain a definition for 'ItemName' and no extension method 'ItemName' accepting a first argument of type 'PagedList.IPagedList<Dossier.Models.Item>' could be found (are you missing a using directive or an assembly reference?)`

以下是视图的相关部分：

```
@model PagedList.IPagedList<Dossier.Models.Item>
@using Dossier.Models.Item

...

<th>
    @Html.DisplayNameFor(model => model.ItemName)
</th> 
```

似乎 IPagedList 与 DisplayNameFor() 不兼容。知道为什么会发生这种情况，以及我该如何解决？我知道我可以手动输入列名，但我希望该信息稍后保留（并且可以更改）在模型中。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-02-27T01:35:18.820

你可以试试这个

```
@Html.DisplayNameFor(model => model.FirstOrDefault().ItemName) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-06-30T11:09:17.580

作为已接受答案的替代解决方案，请记住 IPagedList 继承自 IEnumerable。这意味着你可以写：

```
@model IEnumerable<Dossier.Models.Item> 
```

在页面的开头，并在需要时将模型转换为 IPagedList：

```
@Html.PagedListPager((IPagedList)Model, page => Url.Action("Index", new { page = page })) 
```

您甚至可以在标题中声明转换变量，以便在页面中多次使用它：

```
@{
    ViewBag.Title = "My page title";
    var pagedlist = (IPagedList)Model;
} 
```

这将允许您使用 DisplayNameFor 辅助方法，并访问所有 PagedList 方法/属性，而无需虚拟元素，也无需为每个字段调用 .FirstOrDefault()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-10T14:43:26.730

我通过创建一个`DisplayNameFor`接受`IPagedList<TModel>`.

```
namespace PagedList.Mvc
{
    public static class Extensions
    {

        [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
        public static MvcHtmlString DisplayNameFor<TModel, TValue>(this HtmlHelper<IPagedList<TModel>> html, Expression<Func<TModel, TValue>> expression)
        {
            return DisplayNameForInternal(html, expression);
        }

        [SuppressMessage("Microsoft.Usage", "CA1801:ReviewUnusedParameters", Justification = "This is an extension method")]
        internal static MvcHtmlString DisplayNameForInternal<TModel, TValue>(this HtmlHelper<IPagedList<TModel>> html, Expression<Func<TModel, TValue>> expression)
        {
            return DisplayNameHelper(ModelMetadata.FromLambdaExpression(expression, new ViewDataDictionary<TModel>()),
                                     ExpressionHelper.GetExpressionText(expression));
        }

        internal static MvcHtmlString DisplayNameHelper(ModelMetadata metadata, string htmlFieldName)
        {
            string resolvedDisplayName = metadata.DisplayName ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last();

            return new MvcHtmlString(HttpUtility.HtmlEncode(resolvedDisplayName));
        }
    }
} 
```

我将向 PageList 项目发送一个拉取请求，以将其包含到每个人的项目中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-25T12:49:21.463

你不需要改变`@Html.DisplayNameFor`。在视图中声明模型为：

```
@model IEnumerable<Dossier.Models.Item> 
```

只需将您的寻呼机移动到局部视图（让我们将其命名为“_Pager”）：

```
@model IPagedList

...

@Html.PagedListPager(Model, 
   page => Url.Action("Index", new { page, pageSize = Model.PageSize }))

... 
```

在您的视图中渲染寻呼机：

```
@Html.Partial("_Pager", Model) 
```

就是这样。

PS 您可以创建 Html 助手而不是部分视图...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-05T21:16:05.183

作为替代解决方案，您可以尝试：

```
@Html.DisplayNameFor(x => x.GetEnumerator().Current.ItemName) 
```

即使列表为空，它也会起作用！

# jquery - 拉取简单的天气变量（JSON/API）

> ID：14929312
> 
> 赞同：0
> 
> 时间：2013-02-18T04:04:27.220
> 
> 标签：jquery, html, json, api

我想从以下 API URL 中提取一个简单的“当前天气”状态，以集成到网站中：

[http://free.worldweatheronline.com/feed/weather.ashx?q=67554&format=json&num_of_days=2&key=794496e1c2020558131802](http://free.worldweatheronline.com/feed/weather.ashx?q=67554&format=json&num_of_days=2&key=794496e1c2020558131802)

我正在寻找解决问题的两种方法之一。关于为什么此代码不会返回简单的“测试”的一些见解。（如果我删除“$.getJSON”行，它会这样做）。或者我需要包含的成熟的 jQuery，用于 current_conditions > temp_F。

```
<script>
    $(document).ready(function(){
      $.getJSON(
                'http://free.worldweatheronline.com/feed/weather.ashx?q=67554&format=json&num_of_days=2&key=794496e1c2020558131802',
                function(data) {
                  var output="Testing.";
                  document.getElementById("weather").innerHTML=output;   
                });
    });
</script> 
```

提前感谢您的帮助；对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:12:54.920

这是因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。您应该使用`jsonp`并将您的代码更改为：

```
$(document).ready(function () {
    $.ajax({
        url: 'http://free.worldweatheronline.com/feed/weather.ashx?q=67554&format=json&num_of_days=2&key=794496e1c2020558131802',
        type: "GET",
        dataType: "jsonp",
        success: function (data) {
            console.log(data); //to see that data is indeed returned
            var output = "Testing.";
            $("#weather").html(output);
        }
    });
}); 
```

# javascript - 我们可以在对象构造函数中分配一个公共方法吗？(javascript)

> ID：14929314
> 
> 赞同：2
> 
> 时间：2013-02-18T04:04:37.530
> 
> 标签：javascript, prototype

我正在阅读 javascript 中的原型，在一篇文章[http://phrogz.net/js/classes/OOPinJS.html](http://phrogz.net/js/classes/OOPinJS.html)我读到我们不能在 javascript 的对象构造函数中分配公共方法？原型方法与静态方法有何不同，使用它们有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:52:34.663

> 我读到我们不能在 javascript 的对象构造函数中分配公共方法？

是的，文章指的是这个：

```
function MyObj(name)
{
    this.name = name;
}

MyObj.prototype.sayHello = function() {
    alert('hello ' + this.name);
}

new MyObj('world').sayHello(); 
```

如您所见，公共方法`sayHello()`是在原型中声明的，这是在构造函数之外完成的。这就是 JavaScript 的工作原理。

> 原型方法与静态方法有何不同，使用它们有什么优势？

原型方法仅“附加”到对象。对于静态方法，您需要使用此构造：

```
var MyStaticThing = {
    name: 'world',
    sayHello: function() {
        alert('hello ' + this.name);
    }
}

MyStaticThing.sayHello(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T04:36:40.137

JavaScript 不太适合大多数 OOP 概念和范例，尤其是当您尝试模拟继承时。与其在 OOP 术语中考虑原型与“特权”方法，不如从 JavaScript 如何实例化对象的角度来考虑。学习这个简单的“类”：

```
var id = 0;

function myClass()
{
     var that = this;
     id++; //closure, each new instance gets a unique id
     this.id = id;

     this.toString = function()
     {
         return that.id.toString();
     }
} 
```

这个类是这样实例化的：

```
var classInstance = new myClass(); 
```

这不是我必须推荐的模式，重点是说明对于每个实例化，*每个实例都有自己独特的`toString`function*。这意味着如果您实例化 100 `classInstances`，并且您更改`toString`其中一个以执行其他操作，那么只有一个实例将具有该新功能。

这*也*意味着对于每个实例，每个特权方法也随之实例化。如果您要实例化大量实例，则可能会产生很大的性能差异。我有一个案例，通过将我的特权方法转换为原型方法，我看到了可衡量的速度提升。

说到原型方法，可能看起来像这样：

```
var id = 0;

function myClass()
{
     id++; //closure, each new instance gets a unique id
     this.id = id;
}

myClass.prototype.toString = function()
{
    return this.id.toString();
} 
```

在这种情况下，无论`myClasses`您有多少，您只实例化该`toString`方法一次。如果它改变，它会改变所有的`myClasses`。

就个人而言，我在我的大多数 JavaScript 类中使用特权方法，因为它看起来更干净，并且只有在我知道它将被实例化很多次时才会打扰原型链。还能够访问私有变量使您可以隐藏一些信息，而不是被迫公开任何访问的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:35:43.750

“使用它们的优势”...您指的是哪一个？通常，优势将是使用原型方法（以及一般的对象构造），而不是 javascript 中的静态或经典方法。您正在寻找的答案真的太长了，无法在这里解决，但简短的答案是 javascript 基于原型对象继承系统（这意味着对象可以动态创建并且可以相互继承），而不是经典系统（对象只能从类继承，即 Java、C++ 等）

虽然您可以以经典方式在 javascript 中创建对象——因为该语言非常灵活——但这是一种糟糕且令人困惑的方式。原型对象构造允许您做重要且有益的事情，例如数据隐藏、访问超级方法等。就像我说的那样，这是一个冗长的主题，在一个小文本框中进行处理真的太大了。

# python-2.7 - Python MySQLdb没有插入数据

> ID：14929318
> 
> 赞同：16
> 
> 时间：2013-02-18T04:05:09.350
> 
> 标签：python-2.7, mysql-python, ubuntu-12.10

ubuntu 版本：12.10
mysql 服务器版本：5.5.29-0
python 版本：2.7

我正在尝试使用 MySQLdb 将数据插入到我的 localhost mysql 服务器中。运行脚本时我没有收到任何错误，但数据没有输入到我的表中。我用 phpmyadmin 查看表。

我尝试回到基础并按照教程进行操作，但结果相同。奇怪的是我可以创建和删除表但不能输入数据。

该代码来自教程，甚至报告插入了 4 行。当脚本报告一切正常时，是什么阻止数据输入到表中？

```
cursor = conn.cursor () 
cursor.execute ("DROP TABLE IF EXISTS animal") 
cursor.execute (""" 
        CREATE TABLE animal 
        ( 
            name CHAR(40), 
            category CHAR(40) 
        ) 
    """) 
cursor.execute (""" 
        INSERT INTO animal (name, category) 
        VALUES 
            ('snake', 'reptile'), 
            ('frog', 'amphibian'), 
            ('tuna', 'fish'), 
            ('racoon', 'mammal') 
    """) 
print "%d rows were inserted" % cursor.rowcount 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-19T08:13:58.117

添加 ：

```
conn.commit() 
```

在脚本的底部。

附带说明一下，看看以下内容：http: [//mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

# java - 在我从 Java 中的方法返回之前需要等待异步 api 回调

> ID：14929322
> 
> 赞同：26
> 
> 时间：2013-02-18T04:05:38.503
> 
> 标签：java, asynchronous, concurrency, callback

```
 import java.util.concurrent.CountDownLatch;

  import quickfix.Initiator;

  public class UserSession {
    private final CountDownLatch latch = new CountDownLatch(1);

public String await() {
        try {
            System.out.println("waiting...");
            if (latch.await(5, TimeUnit.SECONDS))
                System.out.println("released!");
            else
                System.out.println("timed out");
            return secret;
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
        return null;
    }

    public void countdown(String s) {
        System.out.println("In countdown: "+s+ ". Latch count: "+latch.getCount());
        secret = s;
        latch.countDown();
        System.out.println("Latch count: "+latch.getCount());
    }
  }

  public class LogonHandler extends AbstractHandler {

    public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) 
        throws IOException, ServletException
        {
            Map<String,String[]> query = request.getParameterMap();

            if (query.containsKey("method")) {
                if (query.get("method")[0].compareTo(method) == 0) {
                    baseRequest.setHandled(true);
                    response.getWriter().println(logon(query));
                }
            }
            else
                baseRequest.setHandled(false);
        }

    private String logon(Map<String,String[]> query) {
        if (query.containsKey("username") && query.containsKey("password") &&           query.containsKey("sendercompid")) {

            app.mapUser(query.get("sendercompid")[0], new   UserSession(query.get("username")[0], query.get("password")[0]));

            SessionID session = new SessionID(new BeginString("FIX.4.4"), new SenderCompID(query.get("sendercompid")[0]), new TargetCompID("PARFX"));

            try {
                ThreadedSocketInitiator tsi = new ThreadedSocketInitiator(app, app.getFileStoreFactory(), settings, app.getLogFactory(), app.getMessageFactory());
                UserSession userSession = new UserSession(query.get("username")[0], query.get("password")[0]);
                userSession.setInitiator(tsi);

                tsi.start();
                return userSession.await();
            } catch (ConfigError e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return e.toString();
            }
        }
        return "fail";
    }
  }

public class QuickfixjApplication implements Application {
    private Map<String,UserSession> users = new HashMap<String,UserSession>();

    public void mapUser(String s, UserSession u) {
        users.put(s, u);
    }

    public void toAdmin(Message message, SessionID sessionId) {

        try {
            if (message.getHeader().getField(new StringField(MsgType.FIELD)).valueEquals(Logon.MSGTYPE)) {
                UserSession user = users.get(sessionId.getSenderCompID());
                message.setField(new Username(user.getUsername()));
                message.setField(new Password(user.getPassword()));
            }
        } catch (FieldNotFound e) {
            e.printStackTrace();
        }
    }

    public void fromAdmin(Message message, SessionID sessionId)
        throws FieldNotFound, IncorrectDataFormat, IncorrectTagValue, RejectLogon {

        if (message.getHeader().getField(new StringField(MsgType.FIELD)).valueEquals(Logon.MSGTYPE)) {
            System.out.println(message.toString());
            UserSession user = users.get(sessionId.getSenderCompID());
            user.countdown(message.toString());
        }
    }
} 
```

好的，我试图在这里只包含最少量的代码。有三个有趣的类，UserSession 是 Jetty 处理程序和 QuickFix/j 应用程序之间的内部粘合剂。

LogonHandler 接收 HTTP 登录请求并尝试将用户登录到 QuickFix/j 应用程序会话。

QuickFix/j 正在向 FIX 服务器发送登录消息，此登录请求/响应是异步的。HTTP 登录请求当然是同步的。因此，我们必须等待 FIX 服务器的回复，然后才能从 HTTP 请求返回。我使用 CountDownLatch 和这个 UserSession 对象来做到这一点。

当我创建 QuickFix/j 会话对象时，我还创建了一个 UserSession 对象并将其添加到地图中（这发生在 LogonHandler 登录方法中）。

QuickFix/j 应用程序对象中有两个回调，toAdmin() 和 fromAdmin()。在 fromAdmin() 中，我检查消息是否是登录响应，如果是，我调用 UserSession 的方法来倒计时锁存器。在调试代码时，我看到 fromAdmin() 方法被命中，在 map 中找到 UserSession 对象并调用 countdown() 方法，并且 latch.getCount() 从 1 变为 0，但是 latch.await( ) UserSession await() 中的方法永远不会返回。它总是超时。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-18T04:09:24.203

你可以这样使用`CountDownLatch`：

```
public class LogonHandler implements Handler {
    private final CountDownLatch loginLatch = new CountDownLatch (1);

    private boolean callbackResults;

    public void serverResponseCallback(boolean result) {
        callbackResults = result;
        loginLatch.countDown ();
    }

    public boolean tryLogon(Credentials creds) throws InterruptedException {
        SomeServer server = new SomeServer(address);
        server.tryLogon (creds.getName (), creds.getPass ());
        loginLatch.await ();
        return callbackResults;
    }
} 
```

如果您想将等待时间限制为例如 5 秒，则不要`loginLatch.await ()`使用以下命令：

```
if (loginLatch.await (5L, TimeUnit.SECONDS))
    return callbackResults;
else
    return false; // Timeout exceeded 
```

# python - 使atexit注册函数根据退出状态动作

> ID：14929330
> 
> 赞同：3
> 
> 时间：2013-02-18T04:07:19.743
> 
> 标签：python, python-2.7

```
import atexit
import sys 

@atexit.register
def goodbye():
    print "Good Bye"

print "Hello World"
#sys.exit(0) or sys.exit(1) 
```

在上面的代码中，`Good Bye`每次退出时都会执行。我可以根据退出状态打印不同的消息吗？如果退出状态为 1，则打印`FATAL: Good Bye`

我也检查`sys.exitfunc`过，但这似乎也不支持这一点？这不是应该支持的基本内容，还是有更好的方法用于此类情况。是使用包装函数退出我的程序的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:14:30.343

`sys.exit`您可以很容易地进行猴子补丁：

```
>>> import sys
>>> sys.my_exit = sys.exit
>>> def func(status):
...     if status:
...        print "Fatal!"
...     sys.my_exit(status)
... 
>>> sys.exit = func
>>> sys.exit(1)
Fatal! 
```

当然，这只`sys.exit`在代码中的某个地方实际调用时才会运行......

您也可以将 main 函数包装在 try/except 中：

```
import sys
def main():
    pass
    sys.exit(2) #comment this out, or change the exit status to 0 to test.

try:
    main()
except SystemExit as e:
    if e.args[0]:  #non-zero exit status
        print "Failed"
    else:
        print "Success"
    raise
else:
    print "Success" 
```

# java - 字符串拆分异常

> ID：14929336
> 
> 赞同：0
> 
> 时间：2013-02-18T04:08:11.217
> 
> 标签：java, string

我有一个简单的代码，它拆分了一个用逗号分隔的字符串缓冲区对象。但是这样做时它给了我一个例外？

```
Method "toString" with signature "()Ljava/lang/String;" is not
  applicable on this object 
```

## 代码

```
StringBuffer sb = new StringBuffer();
sb.append("a,b,c");     
String [] str = sb.toString().split(","); //gives the exception 
```

我在这个项目中使用 java 1.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:56:38.090

相同的代码执行没有任何错误，stringbuffer.append(String) 和 split(regex) 来自 java 1.4 本身。虽然如果您正在尝试这个 stringbuffer.append(CharSequence) 那么它可能会出错。

# css - 使文本正确格式化并且不包含在 div 列中

> ID：14929337
> 
> 赞同：0
> 
> 时间：2013-02-18T04:08:12.647
> 
> 标签：css, html, text

我只能找到如何执行我的文本当前正在执行的操作。不阻止它。我希望文字不要包裹在图像下。但是我不能使用固定宽度。调整页面大小时，文本需要在同一列中继续。

[http://jsfiddle.net/avHcA/](http://jsfiddle.net/avHcA/)

```
 <div id="apDiv1">
    <div id="apDiv2">
    <strong>image goes here</strong>
    </div>
    <div id="apDiv3" ><p><strong>Name Goes here in div with main text</strong></p>
    <p>text that I want to stay in its it div and not wrap underneath the 
    image goes here</p></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:30:07.470

如果您使用百分比宽度，如下所示：

```
#apDiv2 {
    float: left;
    padding-right: 2%;
    width: 38%;
    z-index: 2;
}

#apDiv3 {
    float: left;
    width: 60%;
    z-index: 3;
} 
```

然后文本将继续在同一列中，即使调整窗口大小也是如此。请务必在每个#apDiv1 之后清除浮动。要清除浮动，请添加类似于`<div class="clear"></div>`clear 类的 css 的内容，如下所示：

```
.clear { clear: both; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:22:30.350

最好的方法是使用一张桌子。[http://jsfiddle.net/YymYF/](http://jsfiddle.net/YymYF/)

我刚刚将 div 复制到他们自己的表格单元格中

```
<table>
    <tr>
    <td>
        <strong><a href="http://climatemaryland.org/wp-content/uploads/2013/01/Casciani_Cheryl.jpg"><img class="alignleft  wp-image-131" style="border: 0px none;" alt="" src="http://climatemaryland.org/wp-content/uploads/2013/01/Casciani_Cheryl.jpg" width="166" /></a></strong>
    </td>
    <td>
        <p><strong>Cheryl Casciani</strong></p>
        <p>Cheryl Casciani is the Director of Neighborhood Sustainability for the
        Baltimore Community Foundation (BCF) where she is responsible for management
        of a range of initiatives aimed at strengthening Baltimore neighborhoods
        and making Baltimore a more sustainable city. Cheryl also serves as the
        Chair of the Baltimore Commission on Sustainability, which was created
        in 2008 and charged with developing and monitoring the implementation of
        Baltimore's Sustainability Plan. She has a Master's in Public and Private
        Management from the Yale School of Management and a Bachelors of Science
        in Economics and Bachelors of Applied Science from the University of Pennsylvania.</p>
    </td>
    </tr> 
```

使用表格属性使其看起来更可取。

# javascript - 我正在尝试在给定地址的网站上加载多个谷歌地图。最后一张地图是唯一显示的

> ID：14929339
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:08:27.950
> 
> 标签：javascript, jquery, html, google-maps-api-3

我正在尝试获取 N 个地址，并能够在 N 个 Google 地图上显示这些地址。我有 N 个 div 元素，其 class 属性设置为“canvas”。当我运行我的代码时，最后一个表格单元格元素包含我需要的位置的地图。其他表格单元格均不包含地图。

JavaScript：

```
// JavaScript Document

var geocoder;
var mapOptions;
var newLocation;
var element;

$(document).ready(function()
{

    $.each($(".canvas"),function(i,value)
    {   
        element = value;
        initialize($("tr").eq(i).children("td").text());
    });
});

function initialize(tr) 
{
geocoder = new google.maps.Geocoder();
codeAddress(tr);

}

function codeAddress(address) 
{       
    geocoder.geocode({ 'address': address}, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            newLocation = results[0].geometry.location;
            mapOptions = 
            {
                center: new google.maps.LatLng(newLocation.Ya,newLocation.Za),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(element, mapOptions);

        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
    });
} 
```

HTML：

```
 <html>
      <head>
      </head>
      <body>
         <table>
             <tr>
                  <td>Address 1</td><td class="canvas"></td>
                  <td>Address 2</td><td class="canvas"></td>
                  <td>Address 3</td><td class="canvas"></td>
                  <td>Address 4</td><td class="canvas"></td>
                  <td>Address 5</td><td class="canvas"></td>
                  <td>Address 6</td><td class="canvas"></td>
             </tr>
         </table>
     </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:17:50.543

`element`您在每个循环中覆盖`$.each()` .

将其作为参数传递给`codeAddress`：

```
$.each($(".canvas"),function(i,element)
    {   
        initialize($(element).prev().text(),element);
    }); 
```

......

```
function codeAddress(address,element){
  //your code
} 
```

# vba - 将一些工作表从 Excel 工作簿导出为 PDF

> ID：14929344
> 
> 赞同：3
> 
> 时间：2013-02-18T04:08:53.503
> 
> 标签：vba, excel, excel-2007

我正在编写一个 VBA 代码，以将 excel 中的一些工作表导出到相同的 PDF。我的 excel 文件中有几个图表表，每个表的名称都以“(name)_Chart”结尾。我想将所有名称以图表结尾的工作表导出到一个 PDF 文件。这是我正在尝试编写的代码。

```
Sub FindWS()
        'look if it at least contains part of the name
        Dim s As Worksheet
        Dim strPath As String

        strPath = ActiveWorkbook.Path & "\"

        For Each s In ThisWorkbook.Sheets
            If InStr(1, s.Name, Chart) Then
                s.Activate
                ActiveSheet.ExportAsFixedFormat xlTypePDF, strPath & s.Name & ".pdf"
                Exit Sub
            End If
        Next s
End Sub 
```

此代码不仅限于导出图表，而是导出整个工作簿。谁能帮我弄清楚我的代码中缺少什么。

谢谢！

**修改后的代码：**

```
Sub FindWS()
'look if it at least contains part of the name
Dim s As Worksheet
Dim strPath As String

strPath = ActiveWorkbook.Path & "\"

For Each s In ThisWorkbook.Worksheets
      If InStr(1, s.Name, "Chart") = 0 Then
          ' Hide the sheet so it is not exported as PDF
          s.Visible = False
             End If
Next s
          With ActiveWorkbook
          .ExportAsFixedFormat xlTypePDF, strPath & "TEST.pdf"
                End With 
```

结束子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:12:28.683

我很惊讶您的代码首先在运行:) 您实际上应该遇到错误`run time error '13', type mismatch`

`Sheets`在 Excel中`Worksheets`是两个不同的东西

该`Worksheets`集合是指定或活动工作簿中所有 Worksheet 对象的集合。每个 Worksheet 对象代表一个工作表。而`Sheets`另一方面，该集合不仅包括工作表集合，还包括其他类型的工作表，包括图表工作表、Excel 4.0 宏工作表和 Excel 5.0 对话框工作表。

因此，如果您将对象声明为`Worksheet`

```
Dim s As Worksheet 
```

然后确保在循环时循环正确的集合

```
For Each s In ThisWorkbook.Worksheets 
```

并不是

```
For Each s In ThisWorkbook.Sheets 
```

否则你会得到一个`run time error '13', type mismatch`

**跟进（基于评论）**

> @Siddharth：1\. 是的，我想导出以名称“Chart”结尾的图表工作表。2\. 我想要一个 PDF 中的所有这些图表，并且 PDF 的名称应该是“原始”文件名。（我必须将最终的 PDF 文件保存在不同的位置，以免文件重叠。） - 以数据为中心

```
Option Explicit

Sub Sample()
    Dim ws As Object
    Dim strPath As String, OriginalName As String, Filename As String

    On Error GoTo Whoa

    '~~> Get activeworkbook path
    strPath = ActiveWorkbook.Path & "\"
    '~~> Get just the name without extension and path
    OriginalName = Left(ActiveWorkbook.Name, (InStrRev(ActiveWorkbook.Name, ".", -1, vbTextCompare) - 1))
    '~~> PDF File name
    Filename = strPath & OriginalName & ".pdf"

    '~~> Loop through Sheets Collesction
    For Each ws In ActiveWorkbook.Sheets
        '~~> Check if it is a Chart Sheet and also it ends in "Chart"
        If ws.Type = 3 And UCase(Right(Trim(ws.Name), 5)) = "CHART" Then
            ws.Visible = True
        Else
            ws.Visible = False
        End If
    Next ws

    '~~> Export to pdf
    ActiveWorkbook.ExportAsFixedFormat xlTypePDF, Filename

LetsContinue:
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:35:34.460

此代码将查看所有工作表。如果工作表名称不匹配，它将隐藏它。完成后，它将所有可见工作表导出到一个 PDF 中。确保您以后不要保存 Excel 文件，否则工作表将保持隐藏状态。

当然，此代码未经测试，因此如果您有问题请回问（或尝试自行解决，因为您可能会学到一些东西）

```
Sub FindWS()
    'look if it at least contains part of the name
    Dim s As Worksheet
    Dim strPath As String

    strPath = ActiveWorkbook.Path & "\"

    For Each s In ThisWorkbook.Sheets
        If InStr(1, s.Name, "Chart") = 0 Then
              ' Hide the sheet so it is not exported as PDF
              s.Visible = False 
        End If
    Next s

    ' Export all sheets as PDF         
    ActiveSheet.ExportAsFixedFormat xlTypePDF, strPath & "TEST.pdf"
End Sub 
```

# http - 如何在 nginx 中处理“OPTIONS *”请求？

> ID：14929347
> 
> 赞同：13
> 
> 时间：2013-02-18T04:09:13.037
> 
> 标签：http, nginx, bad-request, http-options-method

在我的环境中，我使用 perlbal 将请求重定向到 nginx。如果**verify_backend**开启。perbal 将向 nginx 发送“OPTIONS *”请求，但 nginx 将其响应为错误请求。

根据[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)：

> 如果 Request-URI 是星号 (" *")，则 OPTIONS 请求通常适用于 ?server 而不是特定资源。由于服务器的通信选项通常取决于资源，因此“* ”请求仅用作“ping”或“no-op”类型的方法；除了允许客户端测试服务器的功能之外，它什么也不做。例如，这可用于测试代理的 HTTP/1.1 合规性（或不合规性）。

我认为 perlbal 正在尝试发送这种请求，但默认情况下 nginx 无法处理。

当我尝试发送请求“OPTIONS * HTTP/1.0”时，总是收到“HTTP 400 bad request”：

> 127.0.0.1 - - [18/Feb/2013:03:55:47 +0000]“选项 * HTTP/1.0”400 172“-”“-”“-”

但它适用于没有星号请求的“OPTIONS / HTTP/1.0”选项：

> 127.0.0.1 - - [18/Feb/2013:04:03:56 +0000]“选项/HTTP/1.0”200 0“-”“-”“-”

如何配置 nginx 让它响应 http return 200 而不是 HTTP return 400 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T20:19:28.927

我知道这是一种矫枉过正，但一种解决方案是将 HAProxy 放在它前面以捕获该 OPTIONS 请求，然后在 HAProxy 中构建您自己的响应：

```
location * {
    if ($request_method = OPTIONS ) {
        add_header Content-Length 0;
        add_header Content-Type text/plain;
        return 200;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T15:08:03.553

在这种情况下，我发现修改行为的唯一方法是通常响应 400：

```
error_page 400 =200 /empty_reply.html; 
```

您可以对您无法处理的所有内容发送空响应。对于想要尝试以另一种方式解决此问题的人，您可以使用以下命令模拟此请求：

```
 curl -X OPTIONS $yourserverip --request-target "*" --http1.1 
```

# python - 删除包含特定值的行并删除奇数列

> ID：14929349
> 
> 赞同：1
> 
> 时间：2013-02-18T04:09:16.303
> 
> 标签：python, rows

试图在 python 中处理两个文本文件。目标是首先删除所有包含 3 或 4 的行。之后，完全删除前 6 列。我已经想出了如何删除 6 列：

```
f = open("filename.txt", "r")
g = open("filename1.txt", "w")

for line in f:
    if line.strip():
        g.write("\t".join(line.split()[6:]) + "\n")
f.close()
g.close() 
```

但是，我无法弄清楚如何根据重复的字符/出现来删除一行（在这种情况下，连续出现的数字 3 或 4 应该完全删除该行）。最后，删除所有奇数列，但不完全删除它们。本质上，删除奇数列并将它们添加到文本文件的结尾（要写入的新文本文件，即——所有内容都被写入下一个文本文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:40:58.950

```
lines = [line.strip() for line in open('file.txt')]
nlines=[]
for line in lines:
    if 3 not in map(int,line.split()) and 4 not in map(int,line.split()): nlines.append(line)
for x in nlines:
    y=x.split()
    y=y[1::2]
    print ' '.join(y) 
```

文件.txt

```
3 4 5 6 7 12 34 56
2 5 6 7 8 11 10 7
4 5 6 7 8 44 55 12
33 66 88 99 79 1 2 5 
```

通过删除包含 3 或 4 的行并删除奇数列

输出

```
5 7 11 7
66 99 1 5 
```

# python - 在 OpenERP 中创建动态视图时对象错误

> ID：14929353
> 
> 赞同：0
> 
> 时间：2013-02-18T04:10:13.007
> 
> 标签：python, field, openerp

我是 OpenERP 开发的新手，我正在尝试创建一个动态视图，该视图将为我的文件`categories`中的类创建的表的每个元素创建一个复选框。`categories()``module.py`

现在在我的课堂上，我使用以下代码`users()`创建了函数`fields_view_get`

```
def fields_view_get(self, cr, uid, view_id=None, view_type='form', context=None, toolbar=False,submenu=False):
    result = super(categories, self).fields_view_get(cr, uid, view_id, view_type, context, toolbar,submenu)
    school_obj = self.pool.get('sim.categories')
    result['arch'] = '''<field name="father_name" />'''
    return result 
```

正如您所看到的，我的代码甚至还没有接近生成动态字段，我还远远没有做到这一点，但即使这个测试也给了我以下错误

```
TypeError: super(type, obj): obj must be an instance or subtype of type 
```

我发现如果我改变错误`categories`的`result = ...`行，`users`就会让位给新的错误，但我为什么要在类中继承`users`类`users`。

任何关于可能有问题或我缺少什么的提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:30:00.067

`if view_type == 'form':`我通过添加之前解决了这个错误`result['arch'] =`

看起来在查看`tree`视图时`result`被称为触发错误，因为这是我单击菜单链接时出现的第一个视图，所以每次都会触发它。

# javascript - 如何获得“this”的价值？

> ID：14929357
> 
> 赞同：1
> 
> 时间：2013-02-18T04:10:28.760
> 
> 标签：javascript, jquery

我有这个代码：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>To Do</title>
        <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <h2>To Do</h2>
        <form name="checkListForm">
            <input type="text" name="checkListItem"/>
        </form>
        <div id="button">Add!</div>
        <br/>
        <div class="list"></div>
    </body>
</html> 
```

Javascript/Jquery：

```
$(document).ready(function()
{
 $(button).click(function(){
  var toAdd = $('input[name=checkListItem]').val();
  $('.list').append('<div class="item">' + toAdd + '</div>');

 });
 $(document).on('click','.item', function(){
   $(this).remove();
  });
}); 
```

此代码获取用户的输入，当您单击按钮时将其添加到列表中，并在您单击 div 类项中的输入时从列表中删除输入。

我怎样才能让它返回“this”的值？

例如，如果我将单词“test”添加到列表中，然后单击它以将其删除....如何从“this”中获取 test 的值？

就像.. document.write(this) 返回 [object HTMLDivElement]。

如果我在 div 中单击它，我希望 document.write 返回“test”。

我不能做 document.write(toAdd) 因为 toAdd 在第二个 jquery ("on") 函数中不存在。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:14:40.517

```
$(document).ready(function () {
    $('#button').on('click', function () {
        var toAdd = $('input[name=checkListItem]').val();
        $('.list').append('<div class="item">' + toAdd + '</div>');

    });
    $(document).on('click', '.item', function () {
        alert( $(this).text() ); // You can have `.html()` here too.
        $(this).remove();
    });
}); 
```

小提琴链接[在这里](http://jsfiddle.net/96LLB/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:12:38.207

使用`.innerHTML`：

```
$(document).ready(function()
{
 $(button).click(function(){
  var toAdd = $('input[name=checkListItem]').val();
  $('.list').append('<div class="item">' + toAdd + '</div>');

 });
 $(document).on('click','.item', function(){
   document.write(this.innerHTML);
   $(this).remove();
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:17:09.270

您可以通过 检索单击项目内的文本`$(this).text()`。因此，您可以`document.write($(this).text())`在删除项目之前执行类似的操作。

# use-case - 覆盖设置的用例图？

> ID：14929363
> 
> 赞同：0
> 
> 时间：2013-02-18T04:11:48.353
> 
> 标签：use-case

我在房间里有一个风扇。风扇有两种速度1、2、3、4、5。1 是最慢的，5 是最快的。风扇的速度取决于温度。

这些是我对风扇的常规设置：如果温度是冷的 - 速度 = 1，如果温度是正常的 - 速度 = 2，如果温度是热的 - 速度 = 3

假设有人想在我外出时使用我的房间。他想改变速度，如图所示：冷= 2，正常= 3，热= 5

对于这个系统，我做了一个用例——setFanProperties，它可以让我根据我的需要设置风扇速度。

我想为常规设置创建一个用例，并为覆盖这些常规设置创建一个用例。不要让我改变我的系统。我的系统中必须有常规设置和覆盖设置用例。

我该怎么做？我应该扩展 setFanProperties 用例吗？如果可以，那么我可以将 overrideFanProperties 用例作为 setFanProperties 用例的实例吗？

**编辑 -**

**我希望我的系统能够正常工作，如果有覆盖，然后根据覆盖的人更改设置。在此人离开房间的那一刻，使用常规设置。**

鉴于这些新信息，扩展仍然是最佳选择吗？

到目前为止，这是我的图表-

![扩展用例图](../Images/25c678924d207b586f5a26f87c0a3afb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:59:59.740

我认同。用例 setFanProperties 将使用常规设置配置系统，并提供一个可关联到 overrideFanProperties 的扩展点，该扩展点扩展了 setFanProperties。

UML 2.4.1 表示，*如果在扩展用例执行期间到达第一个扩展点时扩展的条件为真，那么扩展用例的所有适当行为片段也将被执行。如果条件为假，则不会发生扩展。*然后，如果“覆盖”条件为假，则不会执行 overrideFanProperties 用例并应用默认设置，但如果条件为真，则将执行 overrideFanProperties，有效地覆盖默认设置）。

（顺便说一句，用例是分类器，所以我不认为用例可能是另一个用例的实例，就像一个类不是另一个类的实例一样）。

编辑：

UML 标准规定“*关系的条件以及对扩展点的引用可选地显示在附加到相应扩展关系的注释中。* ”

条件是一个约束（可以用自然语言或诸如 OCL 之类的正式语言来表示）。“对扩展点的引用”只是扩展点的名称。（当然，详细程度取决于您要建模的内容以及您的目标读者）。

*扩展点位置的描述以合适的形式给出，通常作为普通文本（...）。*在此示例中，我选择为每个用例附加注释，详细说明它们的行为（以及可以执行扩展点的位置）。您可以用任何用于记录用例的方式编写它。

![](../Images/2fdc0728600d32e165ce3a9c0bdf9288.png)

# c++ - 计算快速排序算法中的基本操作？

> ID：14929367
> 
> 赞同：1
> 
> 时间：2013-02-18T04:11:58.200
> 
> 标签：c++, algorithm, code-analysis

我写了一个可以工作的快速排序程序。我需要包括一个计算迭代次数的计数器。在课堂上，我们讨论了算法并得出结论，元素比较是基本操作。但是，我不知道把柜台放在哪里。我似乎无法获得正确的输出。我已经包含了我的代码，谢谢！

```
void partition( vector<int> & S, int low, int high, int & pivotpoint )
{
vector<int> U;
int pivotitem = S.at(low);
int j = low;
int i;
for( i = low + 1; i <= high; i++)
    if( S.at(i) < pivotitem)
    {
        j++;
        swap( S[i], S[j] );
    }
pivotpoint = j;
swap( S[low], S[pivotpoint] );
}

void quicksort( vector<int> & S, int low, int high, int &basic_ops )
{
int pivotpoint = low;
if( high > low) 
{   
    partition( S, low, high, pivotpoint );
    quicksort( S, low, pivotpoint -1, basic_ops );
    quicksort( S, pivotpoint + 1, high, basic_ops );
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:41:59.147

1.  将快速排序称为快速排序（数组，0，长度-1，指向计数器的指针）

    ```
    void quicksort( vector<int> & S, int low, int high, int &basic_ops )

    {

    int pivotpoint = low;
    if( high > low) 
    {

        *basic_ops += high - low;

        partition( S, low, high, pivotpoint );

        quicksort( S, low, pivotpoint -1, basic_ops );

        quicksort( S, pivotpoint + 1, high, basic_ops );

    }

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:48:52.340

将计数器放在要更改枢轴的位置

# google-app-engine - 使用类型扩展自定义 AppEngine Image Service Serving Url

> ID：14929377
> 
> 赞同：0
> 
> 时间：2013-02-18T04:13:25.613
> 
> 标签：google-app-engine, flowplayer

我想要实现的是让 AppEngine Image Service 生成一个以文件类型作为扩展名的服务 URL。

例如，在我的本地，服务 url 可能如下所示：

```
http://0.0.0.0:8898/_ah/img/u4EXyF53eLVd8s5wHrE3tg 
```

是否可以将其覆盖为类似的形式

```
http://0.0.0.0:8898/_ah/img/u4EXyF53eLVd8s5wHrE3tg/filename.jpg 
```

我需要这样做的原因是我正在使用 Flowplayer 并希望通过使用播放列表功能添加启动图像。但是，如果没有正确的图像扩展名，Flowplayer 似乎无法识别图像文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:59:09.253

网络上没有“文件”，只有资源。每个资源都有一个 URL。资源的类型由`Content-type`标头定义。网络上没有“文件类型作为扩展名”之类的东西。

图像服务设置`Content-type`正确，因此所有标准客户端都应该能够显示它。

另外，Flowplayer 的初始图像似乎只是[以 HTML 显示的普通图像](http://flash.flowplayer.org/demos/skinning/splash-info.html)，所以应该没有问题。

你能在 HTML 中正常显示你的 Url 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:13:06.750

实际上有一个解决方法。基本上，您可以在 url 的末尾添加一个虚假的查询参数，Google 会一视同仁。

因此，例如，一个 url `http://0.0.0.0:8898/_ah/img/u4EXyF53eLVd8s5wHrE3tg`，您可以制作它

`http://0.0.0.0:8898/_ah/img/u4EXyF53eLVd8s5wHrE3tg?.png`或者`http://0.0.0.0:8898/_ah/img/u4EXyF53eLVd8s5wHrE3tg?.jpg`

取决于你的需要。谷歌不会关心查询参数，但我得到了我需要的东西，我的客户端软件（Flowplayer）对这个新链接很满意。

# php - 浮点精度问题是否只影响计算？

> ID：14929379
> 
> 赞同：2
> 
> 时间：2013-02-18T04:13:44.470
> 
> 标签：php, floating-point

我有一些价格和折扣金额将存储在 PHP 代码的配置变量中。我想知道是否需要将它们存储为字符串。

例如，执行以下操作是否安全？

```
$price = 14.95;
$volume_discount = 0.3; 
```

还是我应该将它们存储为字符串？

```
$price = '14.95';
$volume_discount = '0.3'; 
```

我知道比较浮点数和用浮点数进行计算会产生意想不到的结果，除非你使用 BC Math。但我想知道是否按原样打印出存储的值。我尝试回显浮动版本，它们按预期显示，但我想知道这是否可靠。

**注意**：我使用了*预期*这个词来解释外行人的期望。正如 Eric 指出的那样，精确的十进制浮点数实际上*不是*预期的结果。

**编辑**：我现在关心的代码检查数量并确定是否应该应用折扣。然后进行以下计算：

```
$price -= round($price * $volume_discount, 2); 
```

我通常`number_format`用来格式化显示价格，但我注释掉了我的测试格式。到目前为止，无论价格或折扣值如何，PHP 都给了我想要的结果。然而，JavaScript 并不总能给我想要的结果。这就是让我再次查看我的 PHP 代码的原因。

显然，我将调整 JavaScript，因为这是错误出现的地方，但我试图决定是否需要重构我的 PHP 代码。

向我说明问题的数字是 149.95 * 0.3。PHP 显示 44.985，JavaScript 显示 44.98499999999999。所以，即使四舍五入到小数点后两位，我也会得到不同的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:27:17.473

解释十进制数字“14.95”并将其存储在二进制浮点对象中需要浮点运算：从十进制到二进制浮点的转换。因此，这是一个浮点运算，会出现舍入误差。

当编译器或解释器或在运行时解释源文本时，可能会发生这种转换，但它确实会发生并且会出现舍入错误。

（您的问题断言与浮点数进行比较和计算会产生意想不到的结果。仅当您不期望操作遵守这些操作的规范时，这才是正确的。您可以通过学习规范来避免意外结果，从而了解要做什么预计。）

# jquery - 在媒体查询/浏览器调整大小时重新加载 jquery 脚本

> ID：14929380
> 
> 赞同：0
> 
> 时间：2013-02-18T04:13:45.880
> 
> 标签：jquery, resize, load, slider, refresh

我正在使用[这个](https://github.com/magalhini/jQuery-MaskifySlider)jquery/css3 滑块，并希望它具有响应性。

```
<http://jsfiddle.net/mj13/dQTS4/2/> 
```

这个滑块的问题在于它使用切片/蒙版来显示图像。在页面加载时，脚本“获取”图像大小并基于该图像创建切片/蒙版。

我设法使滑块切片在调整浏览器大小时缩放（宽度：33%）。但是，当我调整图像大小时，问题就出现了，因为缩放的“切片”是最初以 100% 抓取的图像的切片。

我已经尝试创建媒体查询以在不同的屏幕尺寸下显示不同的图像。不幸的是，该脚本会根据页面加载时的屏幕尺寸创建这些图像切片！

是否有某种方法可以重新加载 jquery 脚本或在调整页面大小时创建图像切片的部分？我愿意考虑其他选择。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:24:37.790

尝试编写您的代码`window.resize function`：

```
$(window).resize(function() {
  // add the stuff here to execute the your slider again;
}); 
```

# objective-c - 导入的头文件 Xcode 4.5 的链接器错误

> ID：14929394
> 
> 赞同：0
> 
> 时间：2013-02-18T04:15:11.457
> 
> 标签：objective-c, xcode4.5

我从网上下载了一个头文件和静态库文件（.a 文件）。它们由我为我的 iphone 购买的无线打印机提供，并试图使打印功能在我的应用程序中工作。问题是当我运行他们提供的示例应用程序来测试打印机时，我收到以下链接器错误......显然该应用程序是在以前版本的 Xcode 中设计的，而我使用 Xcode 4.5。非常感谢如果有人可以指导我..![在此处输入图像描述](../Images/2ce42aba251ab68ea61b7be9b163bf78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:31:58.533

如果您正在构建一个 iOS 项目并且它正在使用该`i386`架构，那么您必须为模拟器构建。当您为实际的 iOS 设备构建时会发生什么？

该库可能仅针对真实 iOS 设备的处理器架构编译，通常是`armv6`、`armv7`或`armv7s`. 您可以使用`file`终端中的命令查看`.a`库文件中的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:26:40.840

检查这些答案[Symbols not found for architecture i386？](https://stackoverflow.com/questions/10107920/symbols-not-found-for-architecture-i386)和[符号未找到](https://stackoverflow.com/questions/11900848/symbols-not-found-for-architecture-i386-in-sdwebimagedownloader)。

检查您的**项目-> 构建阶段-> 将二进制文件与库链接**是否存在`libwspr240.a`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T09:41:56.820

删除`libwspr240.a`文件，然后使用

`Project --> Build Phases --> Link Binary with Libraries`点击`'+'`按钮添加。

然后**清理**并**构建**项目

# vb.net - 在 vb.net 中打印表单

> ID：14929400
> 
> 赞同：1
> 
> 时间：2013-02-18T04:15:57.143
> 
> 标签：vb.net

我编写了一个小程序来存储并希望打印联系信息（在 vb.net 中）。该程序包含几个文本字段和一个图片框。保存信息等。任何人都可以推荐一种将表单保存为一种格式的快速方法，然后可以将其传输到她的工作计算机并打印（她无法在工作中安装我的程序，禁忌政策等）。使用 printform 控件，将 PrintAction 设置为 PrintToFile 的 printform.print() 只会给我乱码。我想我可以一点一点地打印到一个 html 文件，但我想我会问是否有人知道更好的方法。此外，对于 html 路由，我不确定如何添加图片框的内容。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:18:52.980

您可以尝试使用[DrawToBitmap 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap%28v=vs.110%29.aspx)将表单保存到位图，然后可以将其保存为图像，然后稍后打印出来，使用此方法遇到的主要问题是屏幕和打印机之间的 DPI 设置不同。

```
Dim bmp As Bitmap = New Bitmap(Me.Width, Me.Height)
Me.DrawToBitmap(bmp, New Rectangle(New Point(0, 0), Me.Size))
bmp.Save("C:\temp\123.bmp") 'Set your path and your filename here 
```

# javascript - 让jquery触发一个类的onclick

> ID：14929403
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:16:14.283
> 
> 标签：javascript, jquery, ajax

如果这是一个简单的解决方法，我深表歉意，我对 jquery 有点陌生。首先，我不认为这是我最初的调用搞砸了，因为如果我放入一个简单的警报函数，它会在点击时正常工作，基本上当`<li>`点击它时，jquery 会触发一个 ajax 到 php 函数发送类到`<li>`php 脚本并返回，打开带有结果的警报。据我所知，它应该可以工作，但我的知识还是相当有限的。任何更改任何人都可以看看我有什么，看看你是否可以清理它，目前点击时没有任何反应，控制台中甚至没有出现错误。但我想即使是我的 ajax 调用也是错误的。任何想法为什么点击时什么都没有发生？

HTML：

```
 <li title = "Previous Month"  id = "changeMonthBack" class = "<?php echo date('n'); ?>"><img src="images/leftArrow.gif" width="54" height="45" alt="previous month"></li> 
```

jQuery/javascript：

```
//javascript document

$(document).ready(function(){
//need to do an onclick for getting the new month(previous)
$(".changeMonthBack").click(function(){
  function calendar(){
    //set the id for php
    var identifier = 1;
    //get the class to use for month
        var str = document.getElementById("changeMonthBack").class;
    //get the month number
    //if the month is 1, we obviously need it to be 12
    if str == 1{
        var month = 12;
    }
    else{
        var month = str - 1;
    }
      $.post("redraw.php"),{
        identifier: identifier,
        month: month
      },
        function(data,status){
          alert("Data: " + data + "\nStatus: " + status);
  };
})//end function 1 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:18:41.340

脚本存在多个问题。
1\. 正如 Esthete 建议的那样，选择器应该是一个 id 选择器`#changeMonthBack`
2\. 您正在创建一个名为`calendar`但从未调用它的闭包方法
3\. 存在多个语法错误（使用像[spket](http://www.spket.com/)这样的 javascript 编辑器）

您正在创建一个名为`calendar`但从不调用它的函数。

```
$(document).ready(function() {
            // need to do an onclick for getting the new month(previous)
            $("#changeMonthBack").click(function() {
                        // set the id for php
                        var identifier = 1;
                        // get the class to use for month
                        var str = parseInt($(this).attr('class'),10);
                        // get the month number
                        // if the month is 1, we obviously need it to be 12
                        if (str == 1) {
                            var month = 12;
                        } else {
                            var month = str - 1;
                        }
                        $.post("redraw.php", {
                                    identifier : identifier,
                                    month : month
                                },

                                function(data, status) {
                                    alert("Data: " + data + "\nStatus: "
                                            + status);
                                });
                    });
        }); 
```

# python - python twisted transport.write 从不发送数据

> ID：14929405
> 
> 赞同：0
> 
> 时间：2013-02-18T04:16:15.890
> 
> 标签：python, twisted.client

我有一个基于 Twisted 示例聊天服务器的服务器。它适用于远程登录。现在我想要一个客户端连接到它。我复制了示例一次性客户端。问题是服务器永远不会收到应该启动“对话”的“hello”字符串。我在常见问题解答中读到，一个常见的错误是阻止反应器运行，但我看不到在下面的代码中可以在哪里执行此操作。谁能告诉我出了什么问题？

```
from twisted.internet import reactor
from twisted.internet.protocol import Factory, Protocol
from twisted.internet.endpoints import TCP4ClientEndpoint

class Greeter(Protocol):
    def sendMessage(self, msg):
        self.transport.write("%s\n" % msg)

class GreeterFactory(Factory):
    def buildProtocol(self, addr):
        return Greeter()

def gotProtocol(p):
    p.sendMessage("hello")
    reactor.callLater(1, p.sendMessage, "/p2")
    reactor.callLater(2, p.transport.loseConnection)

point = TCP4ClientEndpoint(reactor, "localhost", 8123)
d = point.connect(GreeterFactory())
d.addCallback(gotProtocol)
reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:04:35.113

好的。我希望这对其他人有帮助。我上面的问题是我的服务器（使用 lineReceived）：

```
 def lineReceived(self, line):
        print "line received: %s" % line
        if self.state == "GETNAME":
            self.handle_GETNAME(line)
        else:
            self.handle_CHAT(line) 
```

期望回车和换行。因此，通过将上面的 sendMessage 更改为：

```
 def sendMessage(self, msg):
        self.transport.write("%s\r\n" % msg) 
```

它现在神奇地工作！简单得令人沮丧。

# php - PHP代码替换白色正则表达式

> ID：14929406
> 
> 赞同：2
> 
> 时间：2013-02-18T04:16:19.220
> 
> 标签：php, replace, expression

我有我的系列网站，通常所有系列都按季节和剧集划分，我有以下字符串：The Mentalist S05E14

`where **S05E14** is like **Episode 14 Season 05**`我需要更改表达式：

```
**S05E14** 
   for 
**05x14** 
```

此外，对于任何季节和剧集，我都会删除“S”并将“E”替换为“x”

我怎样才能使用正则表达式或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:19:35.693

您可以使用：

```
$repl = preg_replace('/S(\d+)E(\d+)/i', '$1x$2', 'S05E14'); 
```

**[代码演示](http://ideone.com/amVU9C)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:22:11.447

```
echo preg_replace( '/S(\d+)E(\d+)/', '\1x\2', $str ); 
```

[键盘](http://codepad.org/fE8xKHbS)上的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:20:27.263

2种没有正则表达式的方法

```
$e = 'S05E14';
echo implode( 'x', explode( 'E', substr( $e, 1 ) ) );
echo str_replace( array( 'S', 'E' ), array( '', 'x' ), $e ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:24:52.180

尝试这个：

```
$string_val="The Mentalist S05E14";
$data = explode(' ', $text);
$count = count($data);
$last_word = $data[$count-1];
$newStr = str_replace("S", "", $last_word);
$newStr = str_replace("E", "x", $newStr); 
```

# drupal - 我的节点类型不会显示它的字段

> ID：14929407
> 
> 赞同：0
> 
> 时间：2013-02-18T04:16:45.283
> 
> 标签：drupal, drupal-7, drupal-modules

我正在尝试创建我的第一个 drupal 模块，该模块创建一个简单的节点类型 wcNames。此节点类型有两个字段，名字和姓氏。我可以让我的模块为节点类型创建数据库表并将其添加到 node_type 表中，但是当我打开节点/添加/wc-name 字段时，名字和姓氏不会出现。下面是我的代码。请建议。

```
<?php
// wc_name.install file 
/*
 * hook_schema Implementation: Creates the DB and it's fields
 */
function wc_name_schema(){
    $schema['wc_name_names'] = array(
    'fields' => array(
      'nmid'              => array('type' => 'serial', 'unsigned' => TRUE, 'not null' => TRUE),
      'firstname'        => array('type' => 'varchar', 'length' => 50, 'not null' => FALSE),
      'lastname'         => array('type' => 'varchar', 'length' => 50, 'not null' => FALSE),
    ),
    'primary key'        => array('nmid'),
    'unique keys'        => array(),
    'indexes' => array(
      'nmid'       => array('nmid'),
    ),
  );
    return $schema;
}

//function wc_name_install(){ } // Use this function to set variables for the module. 

function wc_name_uninstall(){ 
    //unset variables if any set 

   // Delete all wc_name nodes
  db_delete('node')->condition('type', 'wc_name')->execute();

  // Delete all wc_name tables
  db_drop_table('wc_name_names');
}
?>

<?php
// wc_name.module
/*
 * Implementation of _node_info(): define node
 */
function wc_name_node_info(){
    return array(
    'wc_name' => array(
      'name' => t('wcName'),
      'base' => 'wc_name',
      'base' => 'page',
      'description' => t("A smaple module to save names."),
      'has_title' => TRUE,
      'title_label' => t('Title'),
      'has_body' => FALSE,
    )
  );

}

function wc_name_menu() {
  $items = array();
  $items['wc_name'] = array(
    'title' => 'wcNames',
    'page callback' => 'wc_name',
//   'access arguments' => array('access wcNames'),
  );
}
?>

<?php
// wc_name_form.inc 
function wc_name_form($node, &$form_state){

    // Add fields
    $form['first_name'] = array(
    '#type' => 'textfield',
    '#title' => t('First name'),
    '#required' => FALSE,
    '#default_value' => $node->wc_name['firstname'],
  );

    $form['last_name'] = array(
    '#type' => 'textfield',
    '#title' => t('Last name'),
    '#required' => FALSE,
    '#default_value' => $node->wc_name['lastname'],
  );
    return $form;
}
?> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:24:15.023

尝试这个：

```
function createTextFieldByName($type, $fieldname, $fieldlabel)
{
    $field = field_info_field($fieldname);
    if (empty($field)) {
        $field = array(
            'field_name' => $fieldname, 
            'type' => 'text', 
            'entity_types' => array('node'), 
            'translatable' => TRUE,
        );
        $field = field_create_field($field);
    }

    $instance = field_info_instance('node', $fieldname, $type);
    if (empty($instance)) {
        $instance = array(
      'field_name' => $fieldname, 
      'entity_type' => 'node', 
      'bundle' => $type, 
      'label' => $fieldlabel, 
        );
        $instance = field_create_instance($instance);
        return $instance;
    }

    return null;
}

$type =
array(
      'type' => 'MY_TYPE', 
      'name' => t('NAME'), 
      'base' => 'node_content', 
      'description' => t("DESCRIPTION"), 
      'custom' => 1, 
      'modified' => 1, 
      'locked' => 0,
);

$type = node_type_set_defaults($type);
node_type_save($type);

createTextFieldByName($type,'firstname','First name');
createTextFieldByName($type,'lastname','Last name'); 
```

# c# - FormClosed 事件未触发

> ID：14929408
> 
> 赞同：0
> 
> 时间：2013-02-18T04:16:48.573
> 
> 标签：c#, .net, winforms, events

```
private void GameForm_FormClosed(object sender, FormClosedEventArgs e)
{
    infform.Show();
} 
```

GameForm 还有另一种形式，通知。表单关闭时不会显示。这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:55:34.557

要记住的一件事......当你的主`form`关闭时，整个应用程序都会退出。如果你想赶上那个事件，你可以注册到`Application.ApplicationExit`。

每当`Application`退出时都会触发此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:22:05.363

这有帮助吗？

```
 private void GameForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        this.Hide();
        infform.ShowDialog();
    } 
```

# javascript - 我可以像在 Chromium Smooth Scroller 中那样在 html 页面中实现平滑滚动吗？

> ID：14929415
> 
> 赞同：0
> 
> 时间：2013-02-18T04:17:33.207
> 
> 标签：javascript, html, web

我如何使用一些 javascript 将 Chromium Smooth Scroller 中的功能集成到网页中。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:07:12.527

Try this [smooth scroll plugin](http://manos.malihu.gr/jquery-custom-content-scroller/)

In configuration options,there are parameters like `scrollinertia,scroll speed,and scroll amount`

# netbeans - 使用 NetBeans 时看不到 Log4j2.xml 文件

> ID：14929416
> 
> 赞同：0
> 
> 时间：2013-02-18T04:17:35.617
> 
> 标签：netbeans, log4j, log4j2

我在运行 Java 1.7.0_13/64 的 Windows7/64 机器上看到我的 logj2.xml 时遇到问题。我正在尝试通过调试器使用 NetBeans/64 7.2.1 IDE 运行应用程序。

log4j2.xml 位于我的 r:\ 目录中。（用户）类路径是“.;r:\”。显然没有看到，因为当我在调试器中查看 Logger 的“config.config.name”时，它给了我“Default”的值。此外，我无法在我的机器的任何驱动器上的任何位置找到 log4j2.xml 文件中指定的文件。我还在我的机器上查找了包含“默认”一词的任何新文件，但找不到任何最新的文件。

所以我怀疑我做错了两件事之一：

1）错误地设置了我的类路径。2) 将我的 log4j2.xml 文件错误地放在一起。

任何帮助，将不胜感激。我的钥匙因为用前额敲打而变得粘稠。

这是配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="debug" name="xxx" packages="" >
  <appenders>
      <RollingFile name="log" fileName="qqq.log"
           immediateFlush="true" filePattern="qqq-%d{yyyy-MM-dd}.log">
         <PatternLayout>
            <pattern>"%d{YYYY-MM-dd HH:mm:ss}   [%t]   %-5level   %logger{36} - %n%msg%n%n%n"</pattern>
         </PatternLayout>
         <Policies>
            <TimeBasedTriggeringPolicy />
            <SizeBasedTriggeringPolicy />
         </Policies>
         <DefaultRolloverStrategy max="92"/>
      </RollingFile>
  </appenders>
  <loggers>
     <root level="trace">
        <appender-ref ref="log"/>
    </root>
  </loggers>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:25:01.050

好的，我知道了。我已将此问题重命名为包括 NetBeans，因为这是我的问题的要点。

回顾一下，log4j2.xml 文件需要放在类路径上。虽然我可以通过将 jar 文件添加到项目中来影响 netbeans 中的类路径，但我最初并没有考虑在类路径中查找配置文件。无论如何，一旦我意识到这一点，我就在项目属性中玩了一下，最后发现只需将文件夹添加到“编译时库”对话框（在本例中为“r:\”）即可将配置文件放在类路径，我的日志记录就像它应该的那样工作。

哇！

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:50:11.143

感谢 joe7pak，您的帖子是解决我在 NetBeans 中的 log4j 属性问题的最后一块拼图。我的问题需要几个额外的步骤来帮助解决这个问题。

[首先，我使用http://wiki.apache.org/logging-log4j/Log4jXmlFormat](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)中的默认 xml 在 src 目录中创建了一个 log4j.xml 文件。

然后，我将 Properties\Run 中的 NetBeans VM 选项设置为：`-Dlog4j.debug`。我注意到默认情况下加载了一个 jar (httpbuilder) log4j.xml 文件，而不是我的。

因此，我使用您的建议将 src 文件夹添加到 Properties\Libraries 中的编译时库中。但是，它仍在从 jar 中加载 log4j.xml 文件。

最后一步是将 src 文件夹移动到编译时库的顶部。

感谢您的帖子和回答自己。

# java - 这些方法如何在不被调用的情况下使用？

> ID：14929417
> 
> 赞同：0
> 
> 时间：2013-02-18T04:17:45.643
> 
> 标签：java

我将这组精简的类文件作为 OO 的示例。它们工作得很好，但我不明白来自*WorkerTest.java*`println`的调用是如何通过*Worker.java 一直*到*Date.java*的？Worker.java和*Date.java**都有*方法，但都没有被显式调用，但我可以从输出中看出两者都被使用了。 *****`toString`*****

 ***这是如何工作的或者我应该研究什么概念？

```
public class WorkerTest {
   public static void main( String[] args ) {
      Date birth = new Date( 7, 15, 1922 );
      Worker worker = new Worker( birth );

      System.out.println( worker );
   }
} 
```

* * *

```
public class Worker {
    private Date birthday;

    public Worker(  Date inboundBirthday ) {
      birthday = inboundBirthday;
    }

   public String toString() {
      return String.format( "Birthday: %s",  birthday );
   }
} 
```

* * *

```
public class Date {

    private int month;
    private int day;
    private int year;

    public Date( int inboundMonth, int inboundDay, int inboundYear ) {
        month = inboundMonth;
        day = inboundDay;
        year = inboundYear;
    }

    public String toString() {
       return String.format( "%d/%d/%d", month, day, year );
    }
} 
```

* * *

输出： `Birthday: 7/15/1922`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T04:21:26.040

`PrintStream.println(obj)`来电`obj.toString()`。（或者更准确地说：它调用`String.valueOf(obj)`，而后者又调用`obj.toString()`除非`obj`是空引用。）

请参阅[Javadoc 了解`java.io.PrintStream`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.Object%29).

（也许你缺少的是它`toString`实际上是`java.lang.Object`?上的一个方法`Worker`并且`Date`只是覆盖它。所以*所有*对象都有那个方法，JDK 方法可以依赖它的存在。有关列表，请参阅[Javadoc 中的 `java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)所有对象拥有的所有方法。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T04:23:23.460

当 println 遇到一个变量时，它会尝试确定应该如何打印它。它检查相关类的 toString() 方法是否已被覆盖。所以这就是发生的事情：println 需要打印一个 class worker 的实例，所以它会检查 Worker 类中的 toString() 方法。在工人类中，它找到了这一行：

```
return String.format( "Birthday: %s",  birthday ); 
```

现在它必须弄清楚如何打印生日。由于生日是 Date 的一个实例，它检查 Date 的 toString() 方法。理解这一切的关键是 Java 的内置类也有 toString() 方法，只是你看不到它们。这是一个很好的例子，因为它向您展示了幕后发生的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T04:23:14.243

[`PrintStream.println()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.Object%29)显式调用[`String.valueOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29)，然后调用`Object.toString()`，这在您的两个对象中被覆盖。***

# sql - 如何找到所有具有相同社会保险号后四位数字的记录？

> ID：14929420
> 
> 赞同：0
> 
> 时间：2013-02-18T04:17:55.353
> 
> 标签：sql, sql-server, sql-server-2008

我在一所大学工作，我被分配对开发人员进行更改的逻辑进行一些测试。

我需要什么：我需要一个 SQL Server 查询，它可以查看 Persons 表并查找具有相同社会安全号码最后四位数字的记录。除此之外，我还想看看这些记录（SSN 的后四位相同）是否也具有相同的姓氏。

这是我到目前为止所拥有的：
--我对 SQL 很陌生，所以我一直想弄清楚我如何只能比较 SSN 的最后四位数字，并找到具有相同 SSN 的最后四位数字和相同姓氏的学生。

```
SELECT t1.PersonsID, 
   t1.LastName, 
   t1.GovernmentID, 
   t2.PersonsID, 
   t2.LastName, 
   t2.GovernmentID
FROM Persons t1, Persons t2
WHERE t1.GovernmentID = t2.GovernmentID
AND t1.PersonsID <> t2.PersonsID 
```

任何帮助，将不胜感激。

谢谢！

看了乔说的话，我又做了一次尝试：

```
 SELECT
  t1.cmn_personsID,
  t1.governmentID,
  t1.lastname,
  t2.cmn_personsID,
  t2.governmentID,
  t2.lastname,
  case when t1.LastName = t2.lastName then 1 else 0 end as SameLastName
  from
  CMN_Persons t1, cmn_persons t2 
  WHERE right(t1.GovernmentID, 4) = right(t2.GovernmentID, 4) 
  AND t1.cmn_PersonsID <> t2.cmn_PersonsID 
```

这东西已经运行了五分钟了。当我尝试使用前 10 名时，它似乎并没有给我政府 ID 的最后四位数字相同且姓氏相同的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:33:31.287

GovernmentID 是数字吗？如果是这样，那么模将起作用。

```
SELECT t1.PersonsID, 
   t1.LastName, 
   t1.GovernmentID, 
   t2.PersonsID, 
   t2.LastName, 
   t2.GovernmentID,
   case when t1.LastName = t2.lastName then 1 else 0 end as SameLastName
FROM Persons t1, Persons t2
WHERE t1.GovernmentID % 10000 = t2.GovernmentID % 10000
AND t1.PersonsID ne t2.PersonsID 
```

要回答第 2 部分，您可以添加一个标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:25:11.733

尝试像这样使用 GROUP BY 和 HAVING。

```
SELECT 
Z.PersonID,
Z.Last4,
Z.Cnt
LastName = (SELECT LastName FROM Persons WHERE PersonID = Z.PersonID) 
FROM 
( 
    SELECT t1.PersonsID, 
    t1.GovermentID % 10000 as Last4, 
    COUNT(*) as Cnt
    FROM Persons t1
    GROUP BY t1.GovermentID % 10000, PersonID
    HAVING COUNT(*) > 1
) Z
ORDER BY Last4 
```

# ruby-on-rails - 如何通过导航链接传递参数？

> ID：14929421
> 
> 赞同：0
> 
> 时间：2013-02-18T04:18:04.317
> 
> 标签：ruby-on-rails

我用`meta_search`宝石。

`controllers/feed_entries_controller.rb`是

```
class FeedEntriesController < ApplicationController
  def index
    @search = FeedEntry.search(params[:search])
    @feed_entries = @search.all
  end
end 
```

并`Models/feed_entry.rb`具有`:is_to_read`属性（布尔数据类型）

```
class FeedEntry < ActiveRecord::Base
  attr_accessible :name, :summary, :url, :published_at, :guid, :is_to_read
end 
```

我的问题是，如何在以下条件下制作导航链接+传递参数`views/feed_entries/index.html.erb`？

条件：通过`is_to_read(attribute) = true`，所以我只能`feed_entries`用`is_star = true.`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:22:36.370

你的意思是你希望你的 URL 是这样的`/feed_entries?is_to_read=true`吗？

如果是这样：

```
feed_entries_path(is_to_read: true) 
```

# scala - 隐式类是否应该始终扩展 AnyVal？

> ID：14929422
> 
> 赞同：61
> 
> 时间：2013-02-18T04:18:13.763
> 
> 标签：scala, implicit-conversion

说我正在写一个扩展方法

```
implicit class EnhancedFoo(foo: Foo) {
  def bar() { /* ... */ }
} 
```

你应该总是包含`extends AnyVal`在类定义中吗？在什么情况下你不想让一个隐式类成为一个值类？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-18T07:23:20.440

让我们看看[为值类列出的限制，](http://docs.scala-lang.org/overviews/core/value-classes.html#summary_of_limitations)并思考它们何时可能不适合隐式类：

1.  “必须只有一个主构造函数，其中只有一个公共的 val 参数，其类型不是值类。” 因此，如果您要包装的类本身就是一个值类，则不能使用 an`implicit class`作为包装器，但可以这样做：

    ```
    // wrapped class
    class Meters(val value: Int) extends AnyVal { ... }

    // wrapper
    class RichMeters(val value: Int) extends AnyVal { ... }

    object RichMeters { 
      implicit def wrap(m: Meter) = new RichMeter(m.value)
    } 
    ```

    如果您的包装器也有隐式参数，您可以尝试将它们移动到方法声明中。即代替

    ```
    implicit class RichFoo[T](foo: Foo[T])(implicit ord: Ordering[T]) {
      def bar(otherFoo: Foo[T]) = // something using ord
    } 
    ```

    你有

    ```
    implicit class RichFoo[T](foo: Foo[T]) extends AnyVal {
      def bar(otherFoo: Foo[T])(implicit ord: Ordering[T]) = // something using ord
    } 
    ```

2.  “可能没有专门的类型参数。” 在包装本身具有专用类型参数的类时，您可能希望包装器是专用的。

3.  “可能没有嵌套或本地类、特征或对象”同样，这对于实现包装器很有用。
4.  “可能没有定义一个`equals`或`hashCode`方法。” 无关紧要，因为隐式类也不应该有`equals/hashCode`.
5.  “必须是顶级类或静态可访问对象的成员” 这也是您通常定义隐式类的地方，但不是必需的。
6.  “只能有 defs 作为成员。特别是，它不能有惰性 vals、vars 或 vals 作为成员。” 隐式类可以拥有所有这些，尽管我想不出`var`s 或`lazy val`s 的合理用例。
7.  “不能被另一个类扩展。” 同样，可以扩展隐式类，但可能没有充分的理由。

此外，使您的隐式类成为值类可能会使用反射改变代码的某些行为，但反射通常不应该看到隐式类。

如果您的隐式类确实满足所有这些限制，我想不出不将其设为值类的理由。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-18T04:38:02.740

我感觉到您将[Value Classes](http://docs.scala-lang.org/overviews/core/value-classes.html)与[Implicit Classes](http://docs.scala-lang.org/sips/pending/implicit-classes.html)混淆了。在为增强定义隐式类时，您很少扩展任何东西，而值类*必须*扩展`AnyVal`。

# android-source - 从哪里获得 Dalvik 的源代码？

> ID：14929424
> 
> 赞同：2
> 
> 时间：2013-02-18T04:18:23.057
> 
> 标签：android-source, dalvik

当我尝试获取 Dalvik 源时，项目页面上列出的链接不起作用：

[http://code.google.com/p/dalvik/](http://code.google.com/p/dalvik/)

此链接已列出，但不起作用：

[http://android.git.kernel.org/?p=platform/dalvik.git;a=tree](http://android.git.kernel.org/?p=platform/dalvik.git;a=tree)

有关的：

[如何浏览特定版本的 Android 源代码？](https://stackoverflow.com/questions/4504576/how-to-browse-android-source-code-at-a-particular-version)

[https://stackoverflow.com/questions/7669329/since-android-git-kernel-org-is-down-where-do-i-get-source-code-for-android](https://stackoverflow.com/questions/7669329/since-android-git-kernel-org-is-down-where-do-i-get-source-code-for-android)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T06:13:57.933

试试这个：[https ://android.googlesource.com/platform/dalvik/](https://android.googlesource.com/platform/dalvik/)

[Internet Archive 的 Wayback Machine](http://web.archive.org/web/20130901000000*/http://android.git.kernel.org/)显示[http://android.git.kernel.org/](http://android.git.kernel.org/)前段时间重定向到[http://android.googlesource.com/ 。](http://android.googlesource.com/)

# php - 如何在magento中设置新的选择类型客户地址属性的来源？

> ID：14929425
> 
> 赞同：0
> 
> 时间：2013-02-18T04:18:23.987
> 
> 标签：php, zend-framework, magento

在这里，我尝试添加一个选择类型的客户地址属性。我可以使用数组来设置选项值和标签吗？

```
$newAttributeName = "adt";

$attribute  = array(
'type'          => 'int',
'input'         => 'select',
'label'         => 'Ad TYPE',
'visible'       => true,
'required'      => true,
'user_defined'  => true,
'searchable'    => true,
'filterable'    => true,
'comparable'    => true,
'visible_on_front' => true,
'source' => 
```

);

```
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

$setup->addAttribute('customer_address', $newAttributeName, $attribute); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:50:11.177

此页面包含一些可能有助于回答您的问题的信息。这与客户属性无关，但它确实讨论了向产品添加下拉属性，并且应该为您指明正确的方向。

[设置产品的下拉选项值](http://scott.donnel.ly/magento-set-dropdown-attribute-value-of-a-product-add-option-if-not-present/)

# c# - 与实体框架表连接的对象

> ID：14929434
> 
> 赞同：0
> 
> 时间：2013-02-18T04:19:49.927
> 
> 标签：c#, .net, linq, entity-framework

我有ac#课

```
public class VendorLocation
{
    public string VendorCode { get; set; }
    public string Location { get; set; }
} 
```

和一个列表

```
var lstVendorLocation = new List<VendorLocation>(); 
```

以下 LINQ 查询被编译并在运行时引发异常：

```
var query = from s in DB.Sales
           where lstVendorLocation.Any(vendorLoc => s.VendorCode.Equals(lstVendorLoc.VendorCode) && s.Location.Equals(lstVendorLoc.Location)) 
           select s;` 
```

异常消息是：

> 无法处理类型'匿名类型，因为它没有已知的值层映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:26:29.333

`lstVendorLocation`当前状态为空时，您如何获取项目？

你的意思是这样的吗？

```
var query = from s in DB.Sales
           where ...
           select new VendorLocation
           {
              ....
           };` 
```

# haskell - Haskell：递归地将十六进制字符串转换为整数？

> ID：14929437
> 
> 赞同：5
> 
> 时间：2013-02-18T04:20:01.450
> 
> 标签：haskell, recursion, hex, type-conversion

对于我的家庭作业，我需要使用递归函数（根据需要使用尽可能多的辅助方法）将十六进制字符串转换为以 10 为底的整数。

这是我到目前为止所得到的：

```
-- Question 1, part (c):
hexChar :: Char -> Integer
hexChar ch
    | ch == '0' = 0
    | ch == '1' = 1
    | ch == '2' = 2
    | ch == '3' = 3
    | ch == '4' = 4
    | ch == '5' = 5
    | ch == '6' = 6
    | ch == '7' = 7
    | ch == '8' = 8
    | ch == '9' = 9
    | ch == 'A' = 10
    | ch == 'B' = 11
    | ch == 'C' = 12
    | ch == 'D' = 13
    | ch == 'E' = 14
    | ch == 'F' = 15
    | otherwise     = 0

parseHex :: String -> Integer
parseHex hxStr 
    | length hxStr /= 0 = (hexChar(last(hxStr)))+(10*parseHex(init(hxStr)))
    | otherwise         = 0 
```

但是，这不会产生正确的结果。有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:29:28.550

你真的很亲近。你的错误在这一行：

```
 | length hxStr /= 0 = (hexChar(last(hxStr)))+(10*parseHex(init(hxStr))) 
```

想想为什么要乘以 10。记住……十六进制是以 16 为底的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T10:35:38.643

现在你得到了正确的答案，你应该考虑风格。使用模式匹配，这看起来已经更清晰了：

```
parseHex :: String -> Integer
parseHex [] = 0
parseHex hxStr = (hexChar(last(hxStr)))+(16*parseHex(init(hxStr))) 
```

而且它也更有效，因为您不需要`length hxStr`在每次递归调用时评估（即 O(N)）来决定适用哪种情况。总运行时间从 O(N**2) 到 O(N)。

正如 groovy 建议的那样，当你去掉一些括号时，它看起来会更好：

```
parseHex :: String -> Integer
parseHex [] = 0
parseHex hxStr = hexChar (last hxStr) + 16 * parseHex (init hxStr)) 
```

不幸的是，您无法`hStr`立即进行模式匹配，因为您需要`init`and`last`而不是`head`and `tail`。`reverse`但是您可以通过使用和助手来缓解这种情况：

```
parseHex :: String -> Integer
parseHex hxStr = go (reverse hxStr)
    where go []     = 0
          go (x:xs) = hexChar x + 16 * parseHex xs 
```

最后一个可能只是口味问题。`hexChar`也变得更短：

```
hexChar '0' = 0
hexChar '1' = 1
...                  -- other cases here
hexChar _ = 0        -- 'otherwise' case; maybe throw an error instead? 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T12:49:22.493

问题解决后，这里写一个更短的方法：

```
import Data.List
import Data.Maybe

hexChar ch = fromMaybe (error $ "illegal char " ++ [ch]) $ 
    elemIndex ch "0123456789ABCDEF"

parseHex hex = foldl' f 0 hex where
    f n c = 16*n + hexChar c 
```

# ruby - 如何在 Ruby Prawn 中获取文本和单行表以内联呈现

> ID：14929438
> 
> 赞同：0
> 
> 时间：2013-02-18T04:20:03.287
> 
> 标签：ruby, prawn

我想渲染一些文本，然后是几个单行表。如果我尝试以下操作：

```
pdf.text "Credit Card Number: "
4.times do
  pdf.table [Array.new(4, Prawn::Text::NBSP)]
  pdf.text " "
end 
```

...每个元素都以自己的行结束。有没有一种简单的方法可以让它们内联渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:02:05.550

只需创建带有子表的表，如下所示：

```
require 'prawn'

Prawn::Document.generate('ccn.pdf') do |pdf|
  pdf.text "Credit Card Number: "
  tbl = pdf.make_table([Array.new(4, Prawn::Text::NBSP)])
  pdf.table([[ tbl, " ", tbl, " ", tbl, " ", tbl ]],
    :cell_style => { :borders => []} )
end 
```

# opengl - GLSL 黑白过渡

> ID：14929463
> 
> 赞同：1
> 
> 时间：2013-02-18T04:24:20.243
> 
> 标签：opengl, glsl

我以前多次看到过这种效果，但规模要小得多。现在我有一堵长墙。它从白色开始，当你到达它的时候逐渐变成黑色。随着过渡的进行，墙壁似乎被一些垂直线分开。 ![在此处输入图像描述](../Images/6d4f5827c3e9246aca535bb48e91f74b.png)

近距离观察效果更明显： ![在此处输入图像描述](../Images/d5e61acbd238ea65edafe7819708bf5e.png)

为什么会发生这种情况，有没有办法解决这个问题，使过渡尽可能平滑，没有可见的线条？我的墙由约 78 个顶点组成，它们仅放置在墙的角落。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T06:10:36.610

这个问题被称为[Colour_banding](http://en.wikipedia.org/wiki/Colour_banding)。只是没有足够的颜色分辨率来表示 8 位的灰度梯度。你可以试试抖动。

# syntax - 是否可以为不同的参数计数定义同名运算符？

> ID：14929470
> 
> 赞同：2
> 
> 时间：2013-02-18T04:24:52.600
> 
> 标签：syntax, f#, operators

是否可以为不同的参数计数定义同名运算符？

如果有可能，那怎么办？

例如我想要：

```
let (-) x y = x - y
let (-) x  = -x 
```

*遗憾的是，我不能只调用 -x，我需要 (-)x 才能使用它，但这是另一个与主要问题无关的子问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:11:55.157

这对于 let 绑定是不可能的

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd233204.aspx)

> 您可以通过这种方式重新定义常规算术运算符，因为 F# 的范围规则规定新定义的运算符优先于内置运算符。

但是，您可以使用 `static member (+)`重载版本（[相同的 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd233204.aspx)）

特别是，这有效：

```
> type t() =                   
-  static member (+) (a, b) = 1
-  static member (+) a = 5;; 
```

# neo4j - 使用嵌入式 java API 计算 Neo4j 的性能

> ID：14929471
> 
> 赞同：0
> 
> 时间：2013-02-18T04:24:58.657
> 
> 标签：neo4j

我开始为一个程序测试 Neo4j，但我遇到了一些性能问题。正如标题中提到的，Neo4j 是直接嵌入在 java 代码中的。

我的图表包含大约 400 万个节点和数亿个关系。我的测试只是发送一个查询，计算一个节点的入站关系数。

该程序使用**ExecutionEngine** *执行*过程发送以下查询：

```
start n=node:node_auto_index(id="United States") match s-[:QUOTES]->n return count(s) 
```

通过简单地添加一些打印，我可以看到这个查询花费了多少时间，通常是大约 900 毫秒，这很多。

最让我惊讶的是，我在响应中收到了一个“查询执行时间”，这真的很不一样。

例如一个查询返回：

```
+----------+
| count(n) |
+----------+
| 427738   |
+----------+
1 row
1 ms 
```

根据这个回复，我知道 Neo4j 的查询花费了 1 毫秒，但是当我打印一些日志消息时，我可以看到它实际上花费了 917 毫秒。

我猜 1 毫秒等于找到索引对象“美国”所需的时间，这意味着 Neo4j 需要大约 916 毫秒来完成其余部分，比如计算关系的数量。在这种情况下，如何获得此查询的吸气剂性能？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:48:23.110

查询计时器在 1.8.1 和 1.9.M04 中被破坏，当密码懒惰的东西被修复时。（对于大多数用例来说绝对是值得的交易）。但是，是的，我认为它很快就会修复。

现在你必须在外部计时。

**更新**：至于你关于那个时间是否合理的问题......它基本上需要扫描所有〜400k节点来计算它们。这可能是合理的，即使缓存已预热并且所有这些都适合 RAM。如果可以避免的话，拥有这样的“超级节点”通常不是最佳实践，尽管他们将在未来的版本中为这种情况做出很多改进（至少，这是我听到的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:11:42.993

确保不要测量第一个查询 b/c，它只测量将数据从磁盘加载到内存所需的时间。

确保给 Neo4j 足够的内存来缓存你的数据。

如果它更快，请尝试此查询。

```
start n=node:node_auto_index(id="United States") 
return length(()-[:QUOTES]->n) as cnt 
```

# divide-and-conquer - 分而治之的算法

> ID：14929476
> 
> 赞同：0
> 
> 时间：2013-02-18T04:25:44.140
> 
> 标签：divide-and-conquer

我们开始在我的数据结构课程中使用分而治之的算法，我在完全理解我应该做什么时遇到了很多麻烦。下面是基本上要求我编写一个对数组求和的程序，但它必须划分并征服它，直到基数为 4，我认为这意味着将数组以 4 的块加在一起，然后将所有块在一起。我什至不知道从哪里开始。我只需要一点解释和理解。老师帮不上什么忙。该数组包含一行数字，其数量为 2 的次方，小于 1000

问题 编写一个分治算法，对一个包含 n 个整数的数组求和。该算法的基本情况是子问题的大小小于或等于 4，在这种情况下，您将使用迭代循环来对子问题的整数求和。您需要执行以下操作：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:30:42.540

我猜您打算编写一个递归方法，将数组 A 拆分为两个（或更多）子数组，每个子数组的一半，然后将生成的数组传递给自身以继续拆分，直到您拥有一个大小为 4 的数组；然后您可以执行求和并返回这 4 个单位的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T04:38:42.780

让我们暂时不要考虑编程语言，而是考虑抽象的方法是什么。

* * *

想象一下，如果你在一个有二十叠纸的房间里，每叠纸上都有一个数字。你愿意做将所有数字的总数汇总在一起的工作，但你意识到逐个计算将花费很长时间。所以，你打电话给一个朋友，你们每个人都得到了十个堆栈来工作。*打电话*给朋友的工作量减少了一半。

你们都意识到十叠纸是无用的，所以你们每个人都打电话给另一个朋友伸出援助之手，让你们四个人每人拿着五叠纸。有道理，但还是压倒性的。因此，每个人再一次将另一个朋友叫过来并与其他朋友减半 - 让每个人都有 2.5 叠带有数字的纸。

你们都同意这是由一个人完成的合理数量的工作，因此您可以将这些数字加在一起。从最后一组进入你自己的人开始工作，每个人都会返回他们所拥有的数字的总和，直到你得到其他人的总和，而你拥有自己的总和。您将这两者相加并得出结果。

这就是**分而治之的原则：**您的工作堆栈被划分为一部分工作，然后您可以调用其他方法来完成这些工作。

这是 Python 中的一个伪示例。

```
def sum(*args):
    if len(args) == 0:  # Nothing in my list, so I'm done
        return 0
    elif len(args) == 1:  # One thing in my list, return that
        return args[0]
    else:  # Too much for me to handle; call in the Calvary!
        return args[0] + sum(args[1:]) 
```

# android - 将 pcm/wav 音频从 22khz 下采样到 8khz

> ID：14929478
> 
> 赞同：0
> 
> 时间：2013-02-18T04:25:55.007
> 
> 标签：android, pcm, downsampling

我的 android 应用程序需要将 PCM(22khz) 转换为 AMR ，但 API [AmrInputStream](https://github.com/android/platform_frameworks_base/blob/master/media/java/android/media/AmrInputStream.java)仅支持**pcm 为 8khz**。

如何将pcm 从 22 khz**下采样****到 8 khz？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:35:02.150

采样率在 AmrInputStream.java 中硬编码。

```
// frame is 20 msec at 8.000 khz
private final static int SAMPLES_PER_FRAME = 8000 * 20 / 1000; 
```

所以你必须先将PCM转换为AMR。

```
InputStream inStream;
inStream = new FileInputStream(wavFilename);
AmrInputStream aStream = new AmrInputStream(inStream);

File file = new File(amrFilename);        
file.createNewFile();
OutputStream out = new FileOutputStream(file); 

//adding tag #!AMR\n
out.write(0x23);
out.write(0x21);
out.write(0x41);
out.write(0x4D);
out.write(0x52);
out.write(0x0A);    

byte[] x = new byte[1024];
int len;
while ((len=aStream.read(x)) > 0) {
    out.write(x,0,len);
}

out.close(); 
```

对于下采样，您可以尝试[Mary API](http://mary.dfki.de/javadoc/4.0.0/marytts/util/data/audio/AudioConverterUtils.html#downSampling%28javax.sound.sampled.AudioInputStream,%20int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T23:41:33.403

我找到了一个 java downsample 库：[https](https://github.com/hutm/JSSRC) ://github.com/hutm/JSSRC 还有一个 ac 版本可以被 jni 使用

# javascript - 如何在javascript中显示一个函数？

> ID：14929481
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:26:29.660
> 
> 标签：javascript

我只想让这个 int 在我的页面上可见。

我的脚本区有这个功能

```
function showCount()
{
var count = document.getElmentById('friend') 
      count.style.visibility = 'visible'
      count.innerHTML = dDone.toString()
  } 
```

在我的网页末尾，我有

```
<div id="friend"> 
</div> 
```

同样在我的身体标签中

```
body onload="showCount()" 
```

--

```
var qDone = 0 
```

高于功能。我不明白为什么它没有显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:29:06.743

你有一个拼写错误：

```
document.getElmentById('friend')
//            ^
//             \__ missing an "e" 
```

查看您的 JS 控制台并阅读错误消息。他们很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T04:29:23.680

`qDone`并且`dDone`（显然）不一样。

此外，检查拼写`getElem***e***ntById`

最后，你应该`;`在每一行的末尾加上一个，否则你会让浏览器猜测，这最终会导致后面的莫名其妙的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:45:16.907

试试这个

```
var count = document.getElementById('friend').innerHTML = qDone.toString(); 
```

# android - 有没有办法进行多线程 sqlite 事务并检查数据库锁定状态

> ID：14929482
> 
> 赞同：1
> 
> 时间：2013-02-18T04:26:31.223
> 
> 标签：android, multithreading, sqlite

我有一个正在执行大量 sqllite 事务的应用程序，我目前遇到了一些问题，因为我正在 UI 线程上执行 sqllite 操作……是的，很糟糕……

所以我让每个项目都有一个线程并在其上执行假设 sqllite api 足够聪明，可以对它们进行 FIFO ......不......现在我得到了数据库被锁定的异常

[这说它应该工作](https://stackoverflow.com/questions/12350582/how-to-execute-threads-in-parallel-and-insert-corresponding-data-in-sqlite-datab)

没有完全重写我的代码，并且有一个事务列表排队并在同一个线程上执行它们（许多不同的类，会有点痛苦）

有没有办法让我检查，除非没有锁，否则不执行线程？锁检查本身，或类似的东西可以让它工作，是有效的，不是一个巨大的重写？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:54:04.470

您引用的我的回答似乎令人困惑。当您使用具有多个线程的*同一个*数据库对象访问同一个 Android 数据库时，您不必做任何*特别的事情。*在幕后，Sqlite 有自己的锁定来保证数据库不会被破坏。引用[我的回答](https://stackoverflow.com/questions/12350582/how-to-execute-threads-in-parallel-and-insert-corresponding-data-in-sqlite-datab)；

 *> Android下的Sqlite是单线程的。即使多个线程使用同一个数据库连接，我的理解是它们会被阻止并发运行。没有办法绕过这个限制

它有自己的锁来序列化请求。这意味着不幸的是，添加多个线程*不会*提高数据库的性能。

正如我的其他答案所提到的，您*不能*从多个线程将多个数据库对象用于同一个数据库，因为没有锁定并且您将损坏您的数据库。*

# javascript - 将图像分配给对象会给出解释性警告

> ID：14929488
> 
> 赞同：0
> 
> 时间：2013-02-18T04:27:05.290
> 
> 标签：javascript, html

我已经在我的对象中创建了一个图像，所以我可以将它绘制到我的画布上......我是这样做的：

```
item[id].img = new Image();
item[id].img.src = './image_folder/'+data[i][j].image; 
```

然后我的画布在这条线上绘制：

```
canvas[2].ctx.drawImage(item[theID].imge, px, py); 
```

它工作正常，但在 Chrome 控制台中它说：

```
Resource interpreted as Image but transferred with MIME type text/html 
```

我很好奇这实际上意味着什么以及如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:58:38.833

当您从服务器请求内容时，它们将发送“标头”以及正在发送的任何内容。

这就是浏览器如何弄清楚如何使用视频或音乐，或者知道如何使用 JS 或 CSS。

现代浏览器在处理这些事情方面非常聪明，但是如果您尝试将 .mp3 发送到不知道如何使用 .mp3s 的浏览器，它可能会尝试将文件作为文本加载，您会得到很多有趣的人物。

大多数情况下，MIME 类型可以避免这种情况。如果您要求下载 .mp3，服务器可能会发送一个类似于“Content-Type: audio/mpeg codecs=mp3”的标头。
相比之下，常规网页将作为“Content-Type: text/html”发送，而 .png 图像将作为“Content-Type: image/png”发送。

如果您在使用 WAMP 安装程序或 EasyPHP 或其他方式安装的测试服务器上玩耍，您的服务器可能不知道`.png`使用“image/png”MIME 类型提供文件。

智能浏览器将读取文件的内容并尝试找出它们应该是什么，如果它们被赋予了错误的文件 MIME 类型（这就是你的图像首先工作的原因）。

这个特定的错误可能不会伤害任何人（因为无法确定您有 .png 文件的浏览器可能是没有 .png 文件的浏览器`<canvas>`）。
但是要在其他情况下修复它（例如`.ogg`文件`<audio>`和`<video>`支持，这很重要），您应该弄清楚您正在运行哪种服务器（我的钱在 Apache 上），并弄清楚如何添加 mime-type 和 file-类型声明。

您可以通过 Google 搜索找到它，例如“将 mime-types 添加到 apache”。

如果这是一个在线的服务器，并且您正在为托管付费，那么您需要通过您的托管站点进行设置。

# vba - For循环在第一次迭代后终止-Excel VBA

> ID：14929493
> 
> 赞同：1
> 
> 时间：2013-02-18T04:27:28.837
> 
> 标签：vba, excel

我正在尝试做一个简单的循环，其中我已将一些变量声明为数组条目。我最初将它们用作要覆盖的变量，但是当我读到这些变量不会在每次循环时自动覆盖时更改了它。

我的问题是这个循环在第一次迭代后终止（没有错误）。我似乎无法弄清楚为什么...

该代码本质上是为工作表中`cons_sum(i,2)`的每个`i`或行查找`Pre-Summary`并在另一个工作表中汇总一些数据`BOPE`，然后将该总和插入`Pre-Summary`.

这是我的第一篇文章，我正在自学 vba，所以请原谅任何代码失败。

这是我的代码：

```
Option Explicit

Sub Create_GAR080()
    Consmonth = Sheets("GAR080").Range("B2").Value

    Sheets("Pre-Summary").Select

    LastRow_summary = Cells(Rows.Count, "A").End(xlUp).Row
    LastRow = 156
    LastCol = 16

    Dim cons_sum() As Variant
    ReDim cons_sum(LastRow_summary, 4)

    For i = 1 To LastRow_summary Step 1

        cons_sum(i, 1) = Cells(i, 2).Value & "" 'pulls participant
        cons_sum(i, 2) = cons_sum(i, 1) & Cells(i, 1) ' participant and gas gate concatenated

        If cons_sum(i, 1) = "BOPE" Then
             Sheets(cons_sum(i, 1)).Select

             cons_sum(i, 3) = WorksheetFunction.Match(cons_sum(i, 2), Sheets(cons_sum(i, 1)).Range("A:A")) ' find participant gas gate combo

             cons_sum(i, 4) = Application.Sum(Sheets(cons_sum(i, 1)).Range(Cells(cons_sum(i, 3), 5), Cells(cons_sum(i, 3), 16)))

             If cons_sum(i, 4) > 0 Then
                Sheets("Pre-Summary").Cells(i, 4).Value = cons_sum(i, 4)
             End If
        End If
    Next i

    On Error Resume Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:16:40.367

正如 Siddharth 指出的那样，您更换床单将导致`cons_sum(i, 1) = "BOPE"`始终是负面的。因此，虽然循环将运行 1,848 次，但它不会改变任何东西。

此外，还有几点说明：

*   您正在使用 1848x4 数组在每一行中执行多个操作 - 但仅存储每个操作的值，之后不使用该数组。因此，您不需要 1848x4，而只需要 1x4，因为您可以重用变量
*   与其使用数组，不如使用口语变量。这将使您的代码更容易理解
*   您对隐藏在 VBA 公式/语句中的工作簿结构有很多假设，例如行数、名称“BOPE”等。最好将它们存储在宏开头的常量中 - 甚至最好将它们存储在设置表上的某个位置并使用命名范围引用它们
*   您很可能忘记`FALSE`(or `0`) 作为 match 函数的第三个参数。因此，如果列未排序，该函数可能会返回错误的值
*   而不是`Range(Cells(x1,y1),Cells(x2,y2))`你可以使用`Range.Resize`和`Range.Offset`（及其组合）。这使得代码更容易阅读！
*   `On Error Resume Next`除非您确切知道您乐于忽略什么错误，否则不要使用！即使您使用它，也要在允许产生错误的操作之后使用另一个 On Error 语句。

考虑到这一点，我将您的代码修改为以下内容：

```
Sub Create_GAR080_reworked()
    Const cStrTerm As String = "BOPE"

    Dim wsData As Worksheet
    Dim lngRowCount As Long, i As Long
    Dim strParticipantGasID As String
    Dim lngParticipantGasCombo As Long
    Dim dblSum As Double

    Set wsData = Sheets(cStrTerm)

    With Sheets("Pre-Summary")
        lngRowCount = .Cells(Rows.Count, 1).End(xlUp).Row
        For i = 1 To lngRowCount

            If .Cells(i, 2) = cStrTerm Then
                strParticipantGasID = cStrTerm & .Cells(i, 1)   ' participant and gas gate concatenated

                lngParticipantGasCombo = WorksheetFunction.Match( _
                    strParticipantGasID, wsData.Range("A:A"), 0)  ' find participant gas gate combo

                dblSum = Application.Sum( _
                    wsData.Range("E1:P1").Offset(lngParticipantGasCombo - 1))

                If dblSum > 0 Then
                   .Cells(i, 4).Value = dblSum
                End If
            End If
        Next i
    End With
End Sub 
```

由于我没有你的工作表，我无法调试它。另外，不确定我是否打对了名称，因为我不知道每个变量的真正含义。但它应该给你一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:11:00.003

如果代码的第一次迭代`Sheets(cons_sum(i, 1)).Select`被击中，您将永远不会回到预汇总表。

尝试：

```
Option Explicit

Sub Create_GAR080()
    Consmonth = Sheets("GAR080").Range("B2").Value

    Sheets("Pre-Summary").Select

    LastRow_summary = Cells(Rows.Count, "A").End(xlUp).Row
    LastRow = 156
    LastCol = 16

    Dim cons_sum() As Variant
    ReDim cons_sum(LastRow_summary, 4)

    For i = 1 To LastRow_summary Step 1
        Sheets("Pre-Summary").Select

        cons_sum(i, 1) = Cells(i, 2).Value & "" 'pulls participant
        cons_sum(i, 2) = cons_sum(i, 1) & Cells(i, 1) ' participant and gas gate concatenated

        If cons_sum(i, 1) = "BOPE" Then
             Sheets(cons_sum(i, 1)).Select

             cons_sum(i, 3) = WorksheetFunction.Match(cons_sum(i, 2), Sheets(cons_sum(i, 1)).Range("A:A")) ' find participant gas gate combo

             cons_sum(i, 4) = Application.Sum(Sheets(cons_sum(i, 1)).Range(Cells(cons_sum(i, 3), 5), Cells(cons_sum(i, 3), 16)))

             If cons_sum(i, 4) > 0 Then
                Sheets("Pre-Summary").Cells(i, 4).Value = cons_sum(i, 4)
             End If
        End If
    Next i

    On Error Resume Next
End Sub 
```

# .net - 将程序集安装到 COM+ 时出错

> ID：14929496
> 
> 赞同：1
> 
> 时间：2013-02-18T04:27:39.560
> 
> 标签：.net, com, com+, dllregistration

我正在使用托管 C++，即从我的 C++ 代码访问 .Net Framework 功能。有问题的代码是从自定义操作 dll 调用的，并且是我们的 .msp 包之一的一部分。

场景：我们正在使用 [`RegistrationHelper::InstallAssembly Method (String, String%, String%, InstallationFlags)`](http://msdn.microsoft.com/en-us/library/xxt2z474.aspx)命名`System.EnterpriseServices`空间将程序集安装到 COM+ 中。上面的代码通过使用磁盘上的类型库文件将程序集安装到 COM+ 中。

这段代码是从系统上下文中运行的。我们在 20% 的服务器上使用上述方法失败。代码失败，出现以下异常：

> *System.EnterpriseServices.RegistrationException：无法将类型库“[.tlb 文件的路径]”安装到应用程序“[应用程序名称]”中。在 System.EnterpriseServices.RegistrationDriver.InstallAssembly(RegistrationConfig regConfig, Object obSync) 在 System.EnterpriseServices.RegistrationHelper.InstallAssemblyFromConfig(RegistrationConfig& regConfig) 在 System.EnterpriseServices.RegistrationHelper.InstallAssembly（字符串程序集，字符串和应用程序，字符串分区，字符串和 tlb，InstallationFlags installFlags ）在 System.EnterpriseServices.RegistrationHelper.InstallAssembly（字符串程序集，字符串和应用程序，字符串和 tlb，InstallationFlags installFlags）在 ComPlusRegistrationWrapper.CtxRegsvcs.RegisterComPlus（字符串程序集，字符串应用程序名称，字符串 TLB）*

上述异常已通过使用`ToString()`System.Exception 类的方法捕获。

请注意，在上述异常中： [.tlb 文件的路径] - 磁盘上类型库文件的路径 [应用程序名称] - COM+ 应用程序的名称。

该代码正在 Windows 2008 R2 上执行。Reflector 确认有问题的程序集是针对 .Net FW 2.0 编译的

我不明白为什么这只发生在一部分服务器上。

为了收集更多数据，这就是我的想法：

- 要求客户运行 ctxregsvcs.exe 将程序集手动安装到 COM+ 中，看看是否成功。

有没有人对如何进一步调试有任何指示？

# deployment - 在 Weblogic 服务器中部署 Java 项目

> ID：14929497
> 
> 赞同：2
> 
> 时间：2013-02-18T04:27:56.320
> 
> 标签：deployment

我创建了一个 Java 项目。其中有一个 JMS 监听器 onMessage。如何在 weblogic 服务器中部署这个 java 项目？weblogic 服务器中有另一个 webproject 将在队列中放置一个对象，该对象需要由我的 Java 项目使用。我需要独立部署这个 Java 项目。请帮忙。

谢谢，阿文斯

# mysql - 如何对主从数据库 MySQL 服务器的只读请求进行负载平衡？

> ID：14929500
> 
> 赞同：0
> 
> 时间：2013-02-18T04:28:36.060
> 
> 标签：mysql, load-balancing, connection-pooling, master-slave

我可以配置 MySQL 请求或数据库池属性（当前使用 c3p0）来负载平衡对数据库服务器的只读请求，我从某处读到它说你可以通过将请求设置为只读标志（在应用程序级别）来做到这一点，这可能很麻烦，因为这意味着我需要更改整个遗留系统中的代码。

那么无论如何配置MySQL连接，数据库池让它自动负载平衡只读连接而不接触应用程序代码，谢谢你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:20:01.557

看一下[MySQL-Proxy](http://dev.mysql.com/downloads/mysql-proxy/)和读/写拆分，例如[MySQL Proxy learns R/W Splitting](http://jan.kneschke.de/projects/mysql/mysql-proxy-learns-r-w-splitting/)和[MySQL Proxy: more R/W spliting](http://jan.kneschke.de/projects/mysql/mysql-proxy-more-r-w-splitting/) in principle 中的解释。

# vba - 在工作表下多次运行宏

> ID：14929510
> 
> 赞同：1
> 
> 时间：2013-02-18T04:29:52.947
> 
> 标签：vba, loops, excel

我有一个表格，它接受用户输入数据并从数据中填充表格的其余部分。到目前为止，我已经创建了一个自动从用户数据填充表格的宏。

我想让用户输入他们想要运行宏的次数（因为每个表显示一天的输入）但是每次宏运行时它只是填充相同的空间并且不显示多天的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:32:23.180

不知道您的宏，假设您有一个通用宏，将用户输入存储在列中：

```
Sub InputMacro()
    Range("B1:B100").Value = InputBox("What do you want to store in column B")
End Sub 
```

如果你想循环这个，你首先需要参数化宏，即使你想在每个循环步骤中改变它的部分灵活。例如，如果你想在多个列上运行，你可以这样做：

```
Sub InputMacro_new(intColNumber As Integer, Optional lngRowNumber As Long = 100)
    Cells(1, intColNumber).Resize(lngRowNumber) = _
        InputBox("What do you want to store in column " & _
        Split(Cells(1, intColNumber).Address, "$")(1))
End Sub 
```

这现在将接受一个参数`intColNumber`，即您可以调用`InputMacro_New 2`以填充 B 列。请注意，我还提供了一个*可选参数* `lngRowNumber`，默认情况下为 100。您不需要提供此参数 - 但如果您愿意，您可以覆盖默认值，例如`InputMacro_New 2, 50`)

现在您可以在另一个宏中创建一个循环来调用您的宏：

```
Sub MyLoop()
    Dim intCol As Integer, varMaxCols As Variant
    varMaxCols = InputBox("How many columns do you want to fill?")

    If Not IsNumber(varMaxCols) Then Exit Sub
    ElseIf varMaxCols < 1 Or varMaxCols > 255 Then Exit Sub

    For intCol = 1 To varMaxCols
        InputMacro_new intCol
    Next intCol

End Sub 
```

当然，如果您愿意，您也可以将两者组合成一个更大的宏 - 但尤其是。对于较大的宏，最好将其拆分为较小的过程。

# ruby - rails devise how to specify view/controller action need sign in

> ID：14929511
> 
> 赞同：1
> 
> 时间：2013-02-18T04:30:05.787
> 
> 标签：ruby, ruby-on-rails-3, devise

I simply can do a

```
if not user_signed_in? 
      redirect_to new_user_session_path 
```

for each action need authentication. I imagine there should be more elegant way to do so.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:55:09.037

Add `before_filter :authenticate_user!` in the controllers that should have user authentication.

Reference: [https://github.com/plataformatec/devise#controller-filters-and-helpers](https://github.com/plataformatec/devise#controller-filters-and-helpers)

If not all actions in the controller require user authentication, implement a custom before filter as explained in [https://stackoverflow.com/a/6034498/429758](https://stackoverflow.com/a/6034498/429758)

If the whole application needs user authentication, then the above line belongs in `app/controllers/application_controller.rb` file.

# javascript - 动态 iPad & iPhone CSS 切换

> ID：14929514
> 
> 赞同：0
> 
> 时间：2013-02-18T04:30:20.763
> 
> 标签：javascript, css

我在使用 js switch ipad & iphone css 时遇到问题。

我目前正在设置

```
screen.width == 768, height == 481 // will switch to landscape.css 

screen.width == 481, height == 768 // will switch to portrait.css

<script type="text/javascript">
         if ((screen.width == 640) && (screen.height == 480))
            {document.write("<link href='640x480.css' rel='stylesheet' type='text/css'>")}

        else if ((screen.width == 800) && (screen.height == 600))
              {document.write("<link href='800x600.css' rel='stylesheet' type='text/css'>")}

        else if ((screen.width == 1600) && (screen.height == 900))
              { document.write("<link href='main.css' rel='stylesheet' type='text/css'>")}

        else if ((screen.width == 768) && (screen.height == 481))
              { document.write("<link href='landscape.css' rel='stylesheet' type='text/css'>")}

        else if ((screen.width == 481) && (screen.height == 768))
              { document.write("<link href='portrait.css' rel='stylesheet' type='text/css'>")}

        else
              {document.write("<link href='main.css' 'type=text/css' rel='stylesheet' />")}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:35:40.763

您可以在单个样式表中使用 CSS 媒体查询来实现此效果：

```
@media all and (max-width: 640px) {
    /* relevant styles from 640x480.css */
}
@media all and (max-width: 768px) and (orientation: landscape) {
    /* relevant styles from landscape.css */
} 
```

# javascript - 有没有办法在 HTML5 中播放 mpeg 视频？

> ID：14929516
> 
> 赞同：13
> 
> 时间：2013-02-18T04:30:39.357
> 
> 标签：javascript, html, mpeg

我基于 PC 的 Web 应用程序使用 HTML5，我想导入 mpeg 文件以在我的浏览器中播放，这些文件已被其他应用程序以这种方式保存。有没有办法用 HTML5 播放这些视频文件？

**编辑：**

该应用程序尝试从本地硬盘驱动器而不是从服务器播放 mpeg 文件。因此，用户可以选择 mpeg 文件来播放选定的 mpeg 文件。

HTML：

```
<input id="t20provideoinput" type="file" multiple accept="video/*"/>
<video id="t20provideo" controls controls> 
```

Javascript：

```
(function localFileVideoPlayerInit(win) {
    var URL = win.URL || win.webkitURL;
    var sources = [];
    var j = 1;
    var videoNode = document.querySelector('video');
    var videoNode1 = document.querySelector('object');
    var groupElement = document.getElementsByClassName('metric')[0];
    console.log('this is group element ' + groupElement);

    var playSelectedFile = function playSelectedFileInit(event) {
            for(var i=0; i<this.files.length; i++){
                var file = this.files[i];

                var type = file.type;

                var fileURL = URL.createObjectURL(file);

                sources.push(fileURL);
            }

            groupElement.addEventListener('click', function(){
                videoNode.src = sources[0];
            });
        };

    var inputNode = document.getElementById('t20provideoinput');

    videoNode.addEventListener('ended', function(){
       videoNode.src = sources[j++];
       videoNode.load();
       videoNode.play();
    }, false);

    if (!URL) {
        displayMessage('Your browser is not ' + 
           '<a href="http://caniuse.com/bloburls">supported</a>!', true);

        return;
    }                

    console.log(inputNode);
    if (inputNode != null) { 
        inputNode.addEventListener('change', playSelectedFile, false);
    }

}(window)); 
```

修改自[http://jsfiddle.net/dsbonev/cCCZ2/embedded/result,js,html,css/presentation/](http://jsfiddle.net/dsbonev/cCCZ2/embedded/result,js,html,css/presentation/)

我尝试了一些东西，比如在浏览器中添加插件，used `Mediaelement.js`， used`object`标签来查看是否可以播放这些选定的 mpeg 文件。但是，这些尝试都没有成功。

下面是我在 html5 中使用 object 标签的代码片段

```
<object type="video/mpeg" data="test.mpeg" width="200" height="40">
  <param name="src" value="test.mpeg" />
  <param name="autoplay" value="false" />
  <param name="autoStart" value="0" />
</object> 
```

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T02:02:10.497

### 通过“mpeg”，如果您指的是**[H.264/MP4](http://en.wikipedia.org/wiki/H264)**：

* * *

**更新**（2017 年 12 月）：

*   现在所有主流浏览器都[支持](http://caniuse.com/#search=mp4)MP4 。（IE9+，以及所有现代桌面和移动浏览器）。
*   不要再使用 Flash 作为后备，Flash 几乎已经死了。

其他注意事项（来自 caniuse）：

*   Firefox 自版本 21 起在 Windows 7 及更高版本上支持 H.264。
*   如果安装了适当的 gstreamer 插件，Firefox 从版本 26 开始支持 Linux 上的 H.264。
*   在 Windows 7 中，软件和 DXVA 解码支持的最大分辨率为 1920 × 1088 像素。MSDN）。
*   Chrome 在处理长 h.264 视频时存在性能问题。
*   浏览器在视频中有多个音轨时会遇到问题（用于多语言支持）：IE 11 支持，Firefox 播放最后一首曲目，Chrome 播放第一首曲目。

* * *

**旧答案** *（出于历史目的保留）：*

~~答案是“不是在每个浏览器上”。Firefox 和 Opera 不支持 HTML5`<video>`标签内的 MP4。~~

此外，[Google 已**宣布**](http://blog.chromium.org/2011/01/html-video-codec-support-in-chrome.html)（2011 年）他们**将从 Chrome 中删除 H.264 支持**。原因似乎是谷歌[**收购**](http://en.wikipedia.org/wiki/HTML5_video#Google_purchase_of_On2)了[**On2 Technologies**](http://en.wikipedia.org/wiki/On2_Technologies)和**[VP8 编解码器](http://en.wikipedia.org/wiki/VP8)**。这是一个同样强大的编解码器，在收购后被谷歌[免版税。](http://en.wikipedia.org/wiki/Royalty-free)Chrome、Firefox 和 Opera 通过由 VP8 视频和 Vorbis 音频组成的 **[WebM](http://en.wikipedia.org/wiki/WebM)**支持此编解码器。

所以可能很快，**Internet Explorer**和**Safari**将成为唯一支持 H.264 的浏览器；这不是免版税的编解码器，**微软**和**苹果**是专利持有者！..

所以你可以做的（跨浏览器支持）是；

1.  在不支持 H.264 时回退到[**Adob​​e Flash**（播放器） 。](http://helpx.adobe.com/flash/kb/supported-codecs-flash-player.html)
2.  为您的视频创建多个编码版本，包括 MP4、WebM 和 Ogg（按顺序）。

或者更好的是，请参阅以下后备机制示例（由[**Kroc Camen**](http://camendesign.com/code/video_for_everybody)提供），它结合了所有这些：

***注 1****：我稍微修改了它以添加 WebM 支持。
**注意 2**：您应该在顶部包含 MP4，因为 iPad 错误会在搜索源时停止视频。*

```
<!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise -->
<!-- warning: playback does not work on iOS3 if you include the poster attribute! fixed in iOS4.0 -->
<video width="640" height="360" controls>
    <!-- MP4 must be first for iPad! -->
    <source src="__VIDEO__.MP4" type="video/mp4" /><!-- IE / Safari / iOS video    -->
    <source src="__VIDEO__.WEBM" type="video/webm" /><!-- Firefox / Chrome / Opera / Android  -->
    <source src="__VIDEO__.OGV" type="video/ogg" /><!-- Firefox / Opera / Chrome10 -->
    <!-- fallback to Flash: -->
    <object width="640" height="360" type="application/x-shockwave-flash" data="__FLASH__.SWF">
        <!-- Firefox uses the `data` attribute above, IE/Safari uses the param below -->
        <param name="movie" value="__FLASH__.SWF" />
        <param name="flashvars" value="controlbar=over&amp;image=__POSTER__.JPG&amp;file=__VIDEO__.MP4" />
        <!-- fallback image. note the title field below, put the title of the video there -->
        <img src="__VIDEO__.JPG" width="640" height="360" alt="__TITLE__"
             title="No video playback capabilities, please download the video below" />
    </object>
</video>
<!-- you *must* offer a download link as they may be able to play the file locally. customise this bit all you want -->
<p> <strong>Download Video:</strong>
    Closed Format:  <a href="__VIDEO__.MP4">"MP4"</a>
    Open Formats:   <a href="__VIDEO__.WEBM">"WebM"</a>, <a href="__VIDEO__.OGV">"Ogg"</a>
</p> 
```

### 通过“mpeg”，如果您指的是**[MPEG-1 或 MPEG-2](http://en.wikipedia.org/wiki/Mpeg#Standards)**：

那就不要 ：（

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-26T23:06:56.000

很明显，您不能使用 html5 播放 mpeg1 或 mpeg2。我也在研究类似的事情。你可以嵌入一个 VLC 网络播放器，它可以很容易地处理这些视频格式。也许考虑... [https://wiki.videolan.org/Documentation:WebPlugin/](https://wiki.videolan.org/Documentation:WebPlugin/)

```
<html>
     <title>VLC Mozilla plugin test page</title>
     <body>
          <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org"
              width="640" height="480" id="vlc">
          </embed>
     <script language="Javascript">
         <!--
         var vlc = document.getElementById("vlc");
         vlc.audio.toggleMute();
         //!-->
     </script>
     </body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-29T10:09:39.633

对于 MPEG1，您可以尝试[jsmpeg](https://github.com/phoboslab/jsmpeg)。JSMpeg 延迟较低。

您可以检查[https://jsmpeg.com/](https://jsmpeg.com/)的优缺点

# django - Django ModelChoiceField 没有为无效选择引发 ValidationError

> ID：14929518
> 
> 赞同：1
> 
> 时间：2013-02-18T04:30:50.317
> 
> 标签：django, django-forms

我正在为 ModelForm 开发单元测试，当我传入一个在为字段定义的查询集中不可选择的值时，我发现表单上的 ModelChoiceField 没有引发 invalid_choice ValidationError。

我相信原因是没有像文档在[https://docs.djangoproject.com/en/1.4/ref/forms/validation/#form-and-field-validation](https://docs.djangoproject.com/en/1.4/ref/forms/validation/#form-and-field-validation)中所说的那样首先调用 ModelChoiceField 的 to_python()或 to_python() 在调用表单和模型的 clean 方法之前没有捕获 DoesNotExist 异常，后者会导致以下未处理的异常：

```
# Test Results       
E
======================================================================
ERROR: test_clean (tickets.tests.PaymentFormTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/anand/Ubuntu One/paytickets/park_db/tickets/tests.py", line 187, in test_clean
    self.assertFalse(form.is_valid())
  File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py", line 124, in is_valid
    return self.is_bound and not bool(self.errors)
  File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py", line 115, in _get_errors
    self.full_clean()
  File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py", line 272, in full_clean
    self._post_clean()
  File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py", line 332, in _post_clean
    self.instance.clean()
  File "/home/anand/Ubuntu One/paytickets/park_db/tickets/models.py", line 133, in clean
    fine = self.ticket.fine_amount
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/related.py", line 343, in __get__
    raise self.field.rel.to.DoesNotExist
DoesNotExist 
```

现在，当我注释掉模型的 clean 方法时，表单会按预期运行，并且会引发 invalid_choice 错误；这告诉我在 to_python 方法之前调用了我的模型的 clean 方法。

请帮助我了解这里发生了什么。我怎样才能使这个测试工作？我正在使用 Django 1.4.3。我的代码如下：

```
# models.py
class Payment(TimeStampedModel): # TimeStampedModel is an abstract base class

    user = models.ForeignKey(User, editable=False)
    ticket = models.ForeignKey('Ticket', to_field='number')
    payment_amount = models.DecimalField(max_digits=7, decimal_places=2)

    def clean(self):

        fine = self.ticket.fine_amount
        payment_sum = self.ticket.sum_payments()
        remaining = fine - payment_sum

        if self.payment_amount < 1:
            msg = 'The minimum payment is $1.'
            raise ValidationError(msg)            
        elif remaining == 0:
            msg = 'That ticket has already been fully paid.'
            raise ValidationError(msg)
        elif remaining < self.payment_amount:
            msg = ('You cannot pay more than the oustanding fine: $%0.2f' %
                   remaining)
            raise ValidationError(msg) 

    def __unicode__(self):
        return u'%s; %s; %s' % (self.created, self.ticket, self.payment_amount)

# forms.py
class PaymentForm(forms.ModelForm):

    class Meta:
        model = Payment

    def __init__(self, user=None, *args, **kwargs):
        super(PaymentForm, self).__init__(*args, **kwargs)

        # passing in user and performing query for ModelChoiceField options
        self._user = user                
        vehicles = self._user.vehicle_set.all().prefetch_related('ticket_set')

        ticket_list= []
        for i in vehicles:
            for j in i.ticket_set.all():
                ticket_list.append(j.pk)

        self.ticket_queryset = Ticket.objects.filter(pk__in=ticket_list)        
        self.fields['ticket'].queryset = self.ticket_queryset

    def save(self, commit=True):
        instance = super(PaymentForm, self).save(commit=False)
        instance.user = self._user
        if commit:
            instance.save()
        return instance

# tests.py
class PaymentFormTests(TestCase):

    fixtures = ['test_users.json', 'tickets_app.json']

    def test_clean(self):

        user = User.objects.get(username="test_external_active")

        form_data = {
            "ticket": 1000007, # this is not a valid ticket number
            "payment_amount": 1.00
            }

        form = PaymentForm(user=user, data=form_data)
        self.assertFalse(form.is_valid()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:54:00.770

您需要将该要求添加到您的代码中。仔细阅读[有关表单和字段验证的文档](https://docs.djangoproject.com/en/1.4/ref/forms/validation/#form-and-field-validation)。

您可以在很多地方添加验证（例如，在模型上、在表单中的模型字段上等）。我建议您按照[此处](https://docs.djangoproject.com/en/1.4/ref/forms/validation/#cleaning-a-specific-field-attribute)所述将您的验证添加到表单字段中。

就像是 -

```
def clean_ticket(self):
    # get your valid ticket queryset
    if ticket not in valid_ticket_queryset:
        raise forms.ValidationError("You have added an invalid ticket!")
    return data 
```

# reportviewer - 报表查看器中的分页

> ID：14929519
> 
> 赞同：1
> 
> 时间：2013-02-18T04:30:52.687
> 
> 标签：reportviewer

我在 ASP.NET MVC 4 应用程序中使用报表查看器控件。因为为此我没有遵循 MVC 结构。我为报告创建了一个单独的 aspx 页面。它工作正常。但我面临分页问题。我想每页显示有限的行数。例如，如果我有 1000 行，那么我想在每页上显示 10 行（我想要这个网页分页，我不是在谈论当我们用 PDF 或 Excel 打印报告时）。我正在使用表格（来自报告工具箱的控件）我在网上搜索，但有人建议我设置“InteractiveSize”，但这取决于大小，我想将其修复为每页 10 行，就像我们在 Gridview 中使用的一样。指定分页符和页面大小也不适合我。我认为我们使用“分页符和页面大小”对 pdf 或 excel 文件进行分区。请给我解决方案。

# android - 在不同布局的 ViewPagerIndicator 中设置数据

> ID：14929521
> 
> 赞同：2
> 
> 时间：2013-02-18T04:31:42.767
> 
> 标签：android, android-viewpager, viewpagerindicator

我的 ViewPagerIndicator 上有 3 种不同的布局 - [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

我的项目是从网站加载数据并将数据相应地设置为 ViewPager 的 3 种不同布局。

我该如何去实现它？

在我的 TestFragment 中，我有

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.i("mContent", mContent);
        View view = null;
        if (mContent.equalsIgnoreCase("title1")) {
            view = inflater.inflate(R.layout.one, container, false);

        } else if (mContent.equalsIgnoreCase("title2")) {
            view = inflater.inflate(R.layout.two, container, false);
        } else if (mContent.equalsIgnoreCase("title3")) {
            view = inflater.inflate(R.layout.three, container, false);
            //Textview data = (TextView)view.findViewById(id)
        }
        return view;
    } 
```

我知道这是为了根据 fling'd 标题设置布局。我知道如何 findViewById 来获取小部件的 id 并设置数据。但是，数据是在代码本身中静态设置的。

对我来说，我必须从互联网上获取数据并相应地放入数据。我如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:57:36.360

我几乎知道你想要什么。这是我的答案，效果很好。您可以按照以下步骤进行。

1.创建三个不同的Fragment类，如LoadImageFragment1、LoadImageFragment2、LoadImageFragment3，它们都继承了Fragment。跟随是我的例子。

```
public class LoadImageFragment1 extends Fragment {
ListView listView;
LayoutInflater mInflater;
LoadImageAdapter adapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mInflater = inflater;
    View view = inflater.inflate(R.layout.loadimage_layout, null);
    listView = (ListView) view.findViewById(R.id.listview);
    adapter = new LoadImageAdapter();
    adapter.initList();
    listView.setAdapter(adapter);
    return view;
}

private class LoadImageAdapter extends BaseAdapter{
    ArrayList<String> list = new ArrayList<String>();

    public void initList(){
        for(int i = 0 ; i < 30;i ++){
            list.add("" + i);
        }
    }

    @Override
    public int getCount() {

        return list.size();
    }

    @Override
    public Object getItem(int position) {

        return position;
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null){
            convertView = mInflater.inflate(R.layout.loadimage_item, null);
        }
        return convertView;
    }

} 
```

2.然后修改您的 SampleTabsDefault 类。

```
 class GoogleMusicAdapter extends FragmentPagerAdapter {
    public GoogleMusicAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
      //  return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
        switch(position){
        case 0:
            return new LoadImageFragment1();
        case 1:
            return new LoadImageFragment2();
        case 2:
            return new LoadImageFragment3();
        }

    }

    @Override
    public CharSequence getPageTitle(int position) {
        return CONTENT[position % CONTENT.length].toUpperCase();
    }

    @Override
    public int getCount() {
      return CONTENT.length;
    }
} 
```

我只是使用 SampleTabsDefault 的类作为示例。您可以在其他类中执行此操作。这里我只是使用 ListView 作为示例，您可以从内部加载图像和文本，还可以在 LoadImageAdapter 的 getView() 方法中执行其他操作。希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:57:13.173

创建并实现`Loader`( `AsyncTaskLoader`) 以从 Internet 加载数据。

拥有您的`TestFragment`工具`LoaderCallbacks`，以便在`Loader`( `AsyncTaskLoader`) 完成从 Internet 加载数据时收到通知。

在您的 TestFragment 的实现中`onActivityCreated`，初始化或重新启动加载程序：

```
getLoaderManager().initLoader(0, null, this); 
```

在您`TestFragment`的 onLoadFinished 实现中，将数据分配给小部件。

[https://developer.android.com/reference/android/content/AsyncTaskLoader.html](https://developer.android.com/reference/android/content/AsyncTaskLoader.html)

[https://developer.android.com/reference/android/app/LoaderManager.html](https://developer.android.com/reference/android/app/LoaderManager.html)

[https://developer.android.com/reference/android/app/LoaderManager.LoaderCallbacks.html](https://developer.android.com/reference/android/app/LoaderManager.LoaderCallbacks.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:14:00.600

在开始之前，从 ViewPagerIndicator 复制示例 [https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample/src/com/viewpagerindicator/sample](https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample/src/com/viewpagerindicator/sample)

要完成的步骤是，

1.  创建一个自定义 FragmentPagerAdapter（例如：[https](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/TestFragmentAdapter.java) ://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/TestFragmentAdapter.java ）

2.  为每个布局创建自定义片段（在您的情况下为 3） [https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/TestFragment.java](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/TestFragment.java)

3.  `onActivityCreated`在片段类中覆盖

在方法中，您可以像在方法`onActivityCreated`中一样访问 UI 组件`onCreate`

这样您就可以进行 Web 服务调用，将其绑定到该段中的您的 UI 组件。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:38:58.050

> 我的 ViewPagerIndicator 上有 3 种不同的布局

ViewPagerIndicator 只是一个**指标**

我以为你的意思是你的viewadapter有三个视图要显示。

使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)处理不同的视图。您应该阅读 ViewPagerIndicator[示例](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/SampleTabsStyled.java)

# uitabbarcontroller - 如何从 uiviewcontroller 跳转到 tabbarcontroller？

> ID：14929527
> 
> 赞同：1
> 
> 时间：2013-02-18T04:32:28.740
> 
> 标签：uitabbarcontroller, viewcontroller

我有一个 ViewController 作为初始视图控制器和 TabbarController。视图控制器上有 3 个按钮，TabbarController 有 3 个选项卡。我想点击第一个按钮跳转到第一个选项卡，第二个按钮 - 到第二个选项卡等。我应该怎么做？我正在使用故事板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:13:57.173

尝试这个，

第 1 步 -> 在 ViewController.m 中导入 appDelegate 类

#import "AppDelegate.h"

```
 - (IBAction) BtnOneClicked: (id) sender
 {
  AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
   [appDelegate.tabBarController setSelectedIndex:0];
 }
- (IBAction) BtnTwoClicked: (id) sender 
 {
   AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [appDelegate.tabBarController setSelectedIndex:1];
 }
- (IBAction) BtnThreeClicked: (id) sender 
{
   AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
   [appDelegate.tabBarController setSelectedIndex:2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:43:40.610

如果您只想通过单击按钮来移动您的标签，请澄清您的问题，该按钮使用 selectedatindex 方法用于标签栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-02T10:00:34.247

一个普通的视图控制器按钮单击事件我们可以像普通一样简单地跳转到标签栏控制器上，只需创建一个`cocoatouch`类，我们将作为子类`UitabBarController`并呈现给视图。

```
 @IBAction func goActivityView(_ sender: Any) {

   let gotoActivityView = storyboard?.instantiateViewController(withIdentifier: "TabBarViewController") as! TabBarViewController

  self.present(gotoActivityView, animated: false, completion: nil)
  } 
```

# iphone - 移动图像后显示登录视图 - facebook登录，ios

> ID：14929530
> 
> 赞同：1
> 
> 时间：2013-02-18T04:33:02.780
> 
> 标签：iphone, ios, objective-c, core-animation, grand-central-dispatch

给定：

```
 1.logo 
 2.viewA contains:
    a.username (uitextfield)
    b.password (uitextfield)
    c.login button 
```

目标

```
1\. shift a logo upward
2\. when shifting is done, the view will be shown 
```

**第一种方法**

使用 [UIView animateWithDuration: 选项：动画：完成：]

```
[UIView animateWithDuration:.4 delay:0
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     CGRect     newFrame   =   self.logo.frame;
                     newFrame.origin.y     =   29;
                     self.logo.frame       =   newFrame;
                 }
                 completion:^(BOOL finished) {
                     self.viewA.alpha      =   1;

                 }
 ]; 
```

这个非常适合我

但是，我仍然在说服下面的第二种方法

**第二种方法**

首先将标志向上移动，我正在做

```
 CABasicAnimation *theAnimation;
   theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.translation.y"];
   theAnimation.duration=1;
   theAnimation.autoreverses=NO;

   theAnimation.fromValue           =  [NSNumber numberWithFloat:0];
   theAnimation.toValue             =  [NSNumber numberWithFloat:-60];
   theAnimation.removedOnCompletion =  NO;
   theAnimation.fillMode            =  kCAFillModeForwards;
   [self.flipgiveLogo1.layer addAnimation:theAnimation forKey:@"animateLayer"]; 
```

其次，我可以

```
self.viewA.alpha                    =  1; 
```

显示视图。可悲的是，这些操作没有按顺序执行。

第一种方法不太可能使用*块*来保证按顺序执行的操作。我确实尝试过像下面这样使用 Grand Central Dispatch

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);  
dispatch_async(queue, ^{
   // shifting logo goes here

    dispatch_sync(dispatch_get_main_queue(), ^{
        //displaying viewA goes here
    });
}); 
```

这仍然困扰着我。请帮忙，如果你知道我在这里用 GCD 做错了什么。所有评论都在这里表示赞赏

# java - MediaPlayer 继续播放，即使按钮被禁用

> ID：14929532
> 
> 赞同：1
> 
> 时间：2013-02-18T04:33:06.173
> 
> 标签：java, android, media-player

我尝试了stackoverflow上可用的大多数选项，请你帮帮我！我有一个在单击时播放 MediaPlayer 实例的按钮，但是如果我在播放媒体期间单击双击或单击，即使我设置了 button.setEnable(false) 和 button.setClickable(false)，它也会播放两次，下面是Main.java 中的代码，我在 xml 中设置了 android:onClick="playMedia"

```
MediaPlayer playMedia;
private void playGeneric(MediaPlayer mp, int name, Button button) {
    button.setEnabled(false);
    button.setClickable(false);
    mp = MediaPlayer.create(this, name);
    mp.start();
    while (mp.isPlaying()) {
    }
    mp.stop();
    mp.release();
    mp = null;
    button.setEnabled(false);
    button.setClickable(false);

}

// play the Media
public void playMedia(View button) {
    playGeneric(Media, R.raw.Media, (Button) findViewById(R.id.button1));
} 
```

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:36:49.270

1-每个活动/服务应该有一个（最好是`static`）实例`MediaPlayer`

2-这个循环`while (mp.isPlaying())`是非常糟糕的做法，你只需要听适当的事件

3-在创建新`MediaPlayer`实例之前，您必须检查当前实例是否不为空，然后停止并释放它

要解决您的代码，您可以执行以下操作：

1-让您的类实现`OnCompletionListener`并覆盖在完成和清理资源`onCompletion(MediaPlayer mp)`时通知的方法`MediaPlayer`（但是当您的活动/服务被破坏时，您也需要清理它）

2-

```
static MediaPlayer playMedia;

private void playGeneric(MediaPlayer mp, int name, Button button) {
    button.setEnabled(false);
    button.setClickable(false);
    if(mp !=null){
      mp.stop();
      mp.release();
    }
    mp = MediaPlayer.create(this, name);
    mp.start();

}

@Override
public void onCompletion(MediaPlayer mp) {
    mp.release();
    playMedia = null;
    button.setEnabled(true);
    button.setClickable(true);
} 
```

# javascript - 页面加载和页面刷新的价值差异

> ID：14929536
> 
> 赞同：0
> 
> 时间：2013-02-18T04:33:37.060
> 
> 标签：javascript, jquery, browser

所以我试图读取通过 jquery 创建的 img 元素的高度和宽度。

这是我要执行的代码

```
$(document).ready(function() 
{
    $.ajax({
            url: 'res/script/getImage.php', 
            type: 'POST',
            data: {
                param  : 'Load'
            },
            success: function(result)
            {
                ImageArray = JSON.parse(result);
               for(i=0; i<ImageArray.length; i++)
                {
                        //Read the Image element and update to gallery

                        document.getElementById("gallery").innerHTML += ImageElement;
                        ImageArrayComplete[ImageCounter] = ImageArray[i].image;
                        UserArrayComplete[ImageCounter]  = ImageArray[i].user;

                }

             //Create Canvas
            $('#gallery img').each(function() {
                console.log(this);
                console.log('Width=' + this.width+ 'Height='+this.height);
                createCanvas(this);
            });

            }
        });
}); 
```

的输出`console.log(this);`是预期的图像路径。

但是`console.log('Width=' + this.width+ 'Height='+this.height);`在初始页面加载期间，宽度和高度的输出均为 0。

刷新页面后，该值将重置为 200 的实际宽度。

在 Firefox 和 chrome 中都没有抛出任何其他错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:52:36.103

你的`ImageElement`对象是未定义的。尝试这个：

改变

```
document.getElementById("gallery").innerHTML += ImageElement; 
```

至

```
$('<img/>').attr('src', ImageArray[i].image).appendTo($('#gallery')); 
```

and`this`对象没有`height`and`width`属性。如果你想获得它的高度，请使用：

```
console.log('Width=' + $(this).width() + 'Height=' + $(this).height()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:45:08.740

您确定***img***选择具有高度和宽度值吗？

# javascript - jQuery通过模板创建元素

> ID：14929538
> 
> 赞同：0
> 
> 时间：2013-02-18T04:33:43.013
> 
> 标签：javascript, jquery, xhtml

我可以使用 jQuery 轻松创建新元素：

```
var $e = $("<element>"); 
```

追加后的结果将是：

```
<element></element> 
```

但我真的需要：

```
<element/> 
```

如何达到理想的结果？例如，如何创建：

```
<path id="p2" d="M0,0"/> 
```

我试过了`$("<path/>")`，`$("<path />")`但它不起作用。我相信：

```
$("#parent").html("<path id='p2'/>");
var $p = $("#p2");
$p.attr({'d': "M0,0"});
... 
```

会起作用，但这对我来说是**噩梦**

* * *

**更新 1**：

甚至`$("#parent").html("<group><path id='p2'/></group>");`不工作！它产生：

```
<... id="parent"><group><path id='p2'></path></group></...> 
```

* * *

**更新 2**：

甚至`$parent[0].innerHTML = '<group><path id="p1"/></groups>';`产生：

```
<... id="parent"><group><path id='p2'></path></group></...> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:49:02.393

`$("#parent").html("<path id='p2'/>");`

如果在上述语句中，您希望在 id='parent' 的标记或属性中显示 ` 的值，则必须如下所示：

`$("#parent").html(document.getElementById('p2'));`

# opengl - 在 Ubuntu 上安装 ruby -opengl 0.60.1？...为了添加“gl”、“glu”和“glut”扩展

> ID：14929541
> 
> 赞同：1
> 
> 时间：2013-02-18T04:34:43.580
> 
> 标签：opengl, rubygems, glut, glu, libgosu

如何在 Ubuntu 上安装 ruby​​-opengl-0.60.1？

我不断尝试

```
$ gem install ruby-opengl --version 0.60.1 
```

我遇到了以下错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
ERROR: 'rake/gempackagetask' is obsolete and no longer supported. Use 
'rubygems/package_task' instead.
/home/matias/.rvm/gems/ruby-1.9.3-p362@sampleGemset/gems/ruby-opengl-0.60.1/
Rakefile:24:in `<top (required)>' 
```

也许我可以手动更改 Rakefile 中的“包任务”参数，然后尝试本地 gem 安装？...

我找到了以下网址，可以下载软件包以进行手动安装：

```
rubyforge.org/frs/?group_id=2103

launchpad.net/ubuntu/+source/ruby-opengl/0.60.1+dfsg1-2 
```

以下似乎是一个补丁或一个小的修改：

```
gist.github.com/tociyuki/2479308 
```

我尝试从启动板 url 下载 gem，然后从下载文件夹尝试 $ gem install ruby​​-opengl-0.60.1.gem，它给了我很多错误。

我最终尝试了： $ sudo apt-get install libopengl-ruby

这似乎有效，现在当我这样做时： $ gem list -r ruby​​-opengl 我得到：

```
\*** REMOTE GEMS \***
ruby-opengl (0.61.0, 0.60.0 i386-mswin32)
ruby-opengl2 (0.60.6) 
```

我相信 i386-mswin32 是适用于 windows 的 0.60.1 版本。

使用此配置，我尝试运行 Sapphire.rb，但它仍然无法正常工作。

我已经安装了 ruby​​-opengl 版本 0.60.0 和 0.61.0，但我需要 0.60.1，因为它创建了运行某些 .rb 文件所需的“gl”、“glu”和“glut”扩展名我从其他人那里复制的。这些 .rb 文件是使用[Gosu gem](http://github.com/jlnr/gosu)创建的视频游戏。

这是专门与 Gosu gem 一起使用的。更具体地说，我正在尝试运行蓝宝石游戏 (github.com/KoBeWi/Sapphire)，这也需要[Texplay gem](http://github.com/banister/texplay)。

还是有另一种方法来激活“gl”、“glu”和“glut”扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:09:38.390

感谢 libgosu 的好心人提供答案：

```
$ gem install opengl --pre 
```

照顾一切！现在，如果其他人遇到同样的困难，答案就在这里！

# facebook-graph-api - 如何获取 Facebook 相册在 Facebook 上的日期？

> ID：14929543
> 
> 赞同：1
> 
> 时间：2013-02-18T04:35:16.873
> 
> 标签：facebook-graph-api, facebook-fql

有没有一种方法可以让我获得在 Facebook 上看到的专辑的专辑日期？

这是我希望检索数据的专辑之一的示例屏幕截图。

请查看这张专辑[https://www.facebook.com/media/set/?set=a.470385546361350.110064.186460284753879&type=3](https://www.facebook.com/media/set/?set=a.470385546361350.110064.186460284753879&type=3)

我想专门获取**1 月 24 日**的数据。

我使用了[http://graph.facebook.com/470385546361350](http://graph.facebook.com/470385546361350)但它只返回创建和更新日期，如下所示

```
{
   "id": "470385546361350",
   "from": {
      "category": "Local business",
      "name": "Philippine Business for the Environment",
      "id": "186460284753879"
   },
   "name": "BFI, Letran, PBE Ink MOA for GHG Management Course",
   "description": "Start them young. This was the intention of BPI Foundation Inc. (BFI), Colegio de San Juan de Letran, and the Philippine Business for the Environment (PBE) upon forging an agreement last January 22 in training select Letran college students on greenhouse gas (GHG) inventory and management. On hand were Mr. Florendo G. Maranan, Executive Director of BFI; Fr. Tamerlane R. Lana, OP, President of Letran; and Mr. Bonar A. Laureto, Executive Director of PBE.  The program, known as \u201cBPI Greenhouse Gas Inventory and Management Program for University Students,\u201d is made available to 100 Letran college students who have the aptitude in understanding the relationship between environmental stewardship and good business praxis and who are willing to participate in future GHG inventory services. The students are also encouraged to donate one history book to Letran\u2019s partner public school, promoting the spirit of social justice and development.  The syllabus and material for the five-day course, prepared by PBE, will make use of an Activity-Analysis-Abstraction-Application process. This will enable the students to gain technical and applied knowledge and skills on GHG inventory and management that are currently applied in various workplaces.  At the end of the program, the students are expected to become active in GHG inventory and management and other environmental advocacies of Letran.",
   "link": "https://www.facebook.com/album.php?fbid=470385546361350&id=186460284753879&aid=110064",
   "cover_photo": "470385596361345",
   "count": 3,
   "type": "normal",
   "created_time": "2013-02-05T08:00:04+0000",
   "updated_time": "2013-02-06T04:36:38+0000",
   "can_upload": false,
   "likes": {
      "data": [
         {
            "id": "100002097532966",
            "name": "Krex Lopezbaliza"
         }
      ],
      "paging": {
         "next": "http://graph.facebook.com/470385546361350/likes?limit=25&offset=25&__after_id=100002097532966"
      }
   }
} 
```

# c# - 通过序列号找不到证书

> ID：14929546
> 
> 赞同：15
> 
> 时间：2013-02-18T04:35:40.887
> 
> 标签：c#, asp.net, x509certificate

我已将证书导入个人 -> 证书。

我使用以下代码行按序列号查找我的证书，但我不能：

```
 public X509Certificate2Collection FindCerts(string serialNumber)
    {
        var searchType = X509FindType.FindBySerialNumber;
        var storeName = "MY";

        var certificatesStore = new X509Store(storeName, StoreLocation.LocalMachine);
        certificatesStore.Open(OpenFlags.OpenExistingOnly);

        var matchingCertificates = certificatesStore.Certificates.Find(searchType, serialNumber, true);

        certificatesStore.Close();

        return matchingCertificates;
    } 
```

你能告诉我为什么我找不到我的证书，即使它在certificatesStore.Certificates 列表中？

注意：我的证书是由 Go Daddy 创建的

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T04:48:17.017

我通过输入序列号而不是从属性窗口复制来解决了这个问题。我不知道为什么从这个窗口复制时，它在序列号的开头包含一个奇怪的字符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-07T14:54:58.523

因为我也遇到了这个问题，所以我尝试了一种解决方法，以便能够从 certmgr.msc 复制粘贴值

我所做的总结：

```
// The value below is pasted from certmgr.msc
var sslCertificateSerialNumber="‎47 9f da c4 ad d7 33 a6 4c ad 54 d3 d9 95 67 1c"; 

// Remove all non allowed characters that entered the value while copy/paste
var rgx = new Regex("[^a-fA-F0-9]");
var serial = rgx.Replace(sslCertificateSerialNumber, string.Empty).ToUpper(); 
```

现在我找到了带有复制/粘贴值的正确证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:53:19.327

如果您确定机器存储中存在证书，您可以尝试将 Find() 的第三个参数设置为“false”吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T06:21:28.823

证书序列号是一个二进制数据序列，表示一个无限长的大整数。如果您在某处看到该文本，这可能意味着该文本是串行编写的，或者（更有可能）您看到的是 Base64 或 Base16 编码的二进制串行。在后一种情况下，您不会以直接的方式找到它 - 您需要解码序列并尝试这种方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T07:37:02.840

如果您尝试提取的是 GoDaddy 颁发的证书，您可以使用此：

```
var certificateStore= new X509Store(StoreLocation.LocalMachine);
certificateStore.Open(OpenFlags.ReadOnly);
var certificates = certificateStore.Certificates;
foreach (var certificate in certificateStore)
            {
                if (certificate.Issuer.Contains("GoDaddy"))
                { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-21T10:53:22.470

确保 serialNumber 是大写字符串。当 sn 为小写时，我在查找证书时遇到了一些问题。如果您从证书的详细信息窗口中复制 sn，还要删除空格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-24T13:30:25.983

如果您从 windows 证书属性窗口复制，您可能会不小心复制一些额外的不可见字符，这会破坏您的序列号搜索。

有关更多信息，请参阅此问题： [X509 store can not find certificate by SerialNumber](https://stackoverflow.com/questions/18356362/x509-store-can-not-find-certificate-by-serialnumber?rq=1)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-27T15:09:32.107

昨天我遇到了一个类似的问题，花了几个小时试图找出为什么没有找到现有的证书。似乎 Certificates.Find 方法执行区分大小写的搜索。我采用了使用 String.Compare 的递归方法。

```
X509Certificate2 storedCert = null;
for (int i = 0; i < store.Certificates.Count; i++)
{
    if (String.Compare(store.Certificates[i].SerialNumber, MySerialNum, true) == 0)
    {
        storedCert = store.Certificates[i];
        break;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-04T13:22:47.903

要按序列号查找，从 mmc 管理单元报告的序列号开始，删除所有空格和大写所有 alpha。为我工作。这会给你类似...

```
008CC59B72BE954F93F1435F6B86227600 
```

正如其他人所说，要特别注意字符串开头的“隐形特殊字符”。复制进出记事本以剥离它。从证书属性窗口复制的所有字段也是如此。

# c# - 无法设置为 Single 类型的 Double 值、非空值

> ID：14929550
> 
> 赞同：0
> 
> 时间：2013-02-18T04:36:13.587
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有一个我试图找到的问题，但我仍然找不到解决它的方法。当我运行程序时，消息抛出如下

'tblssscr' 上的 'fldscr1' 属性无法设置为 'Double' 值。您必须将此属性设置为“Single”类型的非空值。

这是我运行我的项目的课程：

```
public class tblssscr
{
    [Key]
    public int tblssscrId { get; set; }

    [DisplayName("Request code")]
    public int fldssrid { get; set; }

    [DisplayName("StudentId")]
    public int tblss_studentId { get; set; }
    public virtual tblss_student tblss_student { get; set; }

    [DisplayName("Student Tempcode")]
    public string fldstdtmpcode { get; set; }

    [DisplayName("Attandence")]
    public int fldatt { get; set; }   

    [DisplayName("Discount (%)")]
    public int flddiscount { get; set; }

    [Required(ErrorMessage = "Score 1 is required!")]
    [DisplayName("Score 1")]       
    public float? fldscr1 { get; set; }   

    [DisplayName("Score 2")]       
    public float fldscr2 { get; set; }    

    [DisplayName("Total Score")]       
    public float fldtscr { get; set; }    

    [DisplayName("Offer Code")]
    public int fldrst { get; set; }              
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:38:45.997

如果您想存储一个双精度数，`fldscr1`请将其设置为这样的双精度数

```
[Required(ErrorMessage = "Score 1 is required!")]
[DisplayName("Score 1")]   
public double fldscr1 { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:38:15.453

更改此行：

```
[DisplayName("Score 1")]       
public float? fldscr1 { get; set; } 
```

至：

```
[DisplayName("Score 1")]       
public float fldscr1 { get; set; } 
```

# php - 非常奇怪的数据库插入/选择 phpmyadmin

> ID：14929552
> 
> 赞同：0
> 
> 时间：2013-02-18T04:36:43.313
> 
> 标签：php, mysql, select, insert, phpmyadmin

我将 CodeIgniter 与我自己的 PDO 语句（硬编码）一起使用。当我尝试单击作为另一个表的外键的 id 时，phpmyadmin 中出现错误。*如果在 Phpmyadmin 中使用外键，则外键将显示为该表的超链接*

这是一个例子：![错误](../Images/15b312d2cbb9e70955e3071c148b702b.png)

但是，当我转到命令行时，我得到了这个：

```
mysql> select * from session WHERE anum = 'A00163047';
+------------+-----------+------+---------+---------------------+-----------------+--------+
| session_id | anum      | why  | aidyear | signintime          | studentcomments | status |
+------------+-----------+------+---------+---------------------+-----------------+--------+
|        184 | A00163047 |    4 | 14-15   | 2013-02-17 23:21:47 |                 |      0 |
+------------+-----------+------+---------+---------------------+-----------------+--------+
1 row in set (0.00 sec) 
```

还要注意的是，它们是不同的 ID，但仍然存在错误。

似乎添加 anum = 'whatever id' 似乎返回了一个查询。在检索要放入表中的数据时，我应该担心吗？

我尝试在打开和关闭 XSS 的情况下（全局）复制它，我尝试了 form_validation 的每一种不同的可行组合，但我仍然得到相同的错误。为什么会这样？这让我担心我的数据在某些地方被损坏了。

编辑 1：

根据人们认为实际值为_27A0000000_27

**事实并非**如此。当我点击 phpmyadmin 超链接 _27(whatever)_27 被添加给我一个错误。我知道如何选择

例如：`select * from whatever WHERE anum = 'Whatever';`

编辑 2：

![测试](../Images/73b3a618f99ff3ffd4583f29853f28c9.png)

当您在 phpmyadmin 中点击超链接时，将自动生成一个 select 语句，如下所示：

![测试11](../Images/84dda9611dc6ea7fd996be04414767da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T06:48:06.380

一定是编码问题。0x27 是单引号字符 ( `'`)的 ASCII 十六进制值

或者您的 PDO 是否以单引号的方式进行编码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:40:54.067

您必须绑定引号中的值，因为 varchar 字段的值应始终包含在引号中。

所以查询将是

```
SELECT * FROM `citest`.`student`

WHERE `anum` = '_27A00000000_27'

Limit 0,30 
```

谢谢。

# php - 在 ARC2 中作为 RDF 插入数据

> ID：14929555
> 
> 赞同：0
> 
> 时间：2013-02-18T04:37:06.353
> 
> 标签：php, semantic-web

我正在使用 php 和 ARC2 开发语义 Web 应用程序。我找不到任何带有实际示例的好教程。我想做的是使用 ARC 将一些文章作为 RDF 文档保存在数据库中，然后在它们上运行 SPARQL。我已经阅读了 ARC 文档，但我找不到好的实用示例，特别是插入。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:04:42.487

这是我硕士项目的一个示例：

```
if($variableName){

prefix PREFIX: <http://yourprefix.owl#>
INSERT INTO <http://localhost/yourontologyfilename.owl>{
 <http://yourprefix.owl#some-identifier> rdf:Type PREFIX:Category;
         PREFIX:Title $variableName; 
} 
```

它对我来说很好，这应该可以解决问题！当然你必须添加理智和安全检查:-)

在我的情况下，protege' 你会以这种方式运行查询：

```
prefix SEMKNOW: <http://sk.owl#>
INSERT INTO <http://localhost/SEMKNOW.owl>{
 <http://sk.owl#C-21> rdf:Type SEMKNOW:ConferencePapers;
         SEMKNOW:Title "A semantic knowledge management system for scholarly repositories"; 
} 
```

您应该阅读 sparql 1.1 和 1.0 官方文档并使用 protege 来测试您的查询，它肯定会加快您的开发过程。还可以在[这里查看](https://web.archive.org/web/20160720072101/http://answers.semanticweb.com:80/questions/16454/help-with-insert-query-arc2)该[网站](http://answers.semanticweb.com/)通常更具体地针对您的线路，因此查看它不会受到伤害。

# javascript - 从文本框中检索输入值

> ID：14929556
> 
> 赞同：0
> 
> 时间：2013-02-18T04:37:10.323
> 
> 标签：javascript

我需要制作一个盒子，这样当用户输入 1 到 6 的值时，它会掷出那么多骰子。我是 javascript 的完整初学者，任何帮助将不胜感激。

这是我的功能：

```
function NumberValue() {
        for (i = 0; i <['randNumber']; i++){
            var numberRoll = Math.floor(Math.random() * 6) + 1;
            var userNumber = '../images/die' + numberRoll + '.gif';
            myNewTag = "<img id='dieImgRandom' src='" + userNumber + "'>"
            document.getElementById('dieDivRandom').innerHTML += myNewTag; 
```

这是我的身体元素：

```
<h1>Why don't you pick please?</h1>

<div id="dieDivRandom" style="text-align:center">

<p>

<div id="dieImageRand">

<img id="dieImgRandom" alt="die image" src="../images/die1.gif">

<br>

<input type="text" id="randNumber" size=20 value="Enter 1 through 6">

<input type="button" value="Click to Roll" onclick="NumberValue();">

</div> 
```

该功能需要允许用户提交数字一、二、三、四、五或六，并且需要在屏幕上显示那么多图像。图像重新定位在我的图像文件夹中，因此相对链接可以正常工作。这实际上是我需要使用的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:39:20.797

代替：

```
for (i = 0; i <['randNumber']; i++){ 
```

和：

```
for (i = 0; i <document.getElementById('randNumber').value; i++) { 
```

* * *

`<input />`可以使用以下任一方式访问该标签：

1.  `document.getElementById('inputId').value;`
2.  `document.formName.inputName.value`

* * *

最后，您的代码变为：

```
function NumberValue() {
    for (i = 0; i < document.getElementById('inputId').value; i++) {
        var numberRoll = Math.floor(Math.random() * 6) + 1;
        var userNumber = '../images/die' + numberRoll + '.gif';
        myNewTag = "<img id='dieImgRandom' src='" + userNumber + "'>"
        document.getElementById('dieDivRandom').innerHTML += myNewTag;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:40:41.540

使用它从文本框中读取值

```
function NumberValue() {     
var ranNum = document.getElementById('randNumber').value;

        for (i = 0; i <ranNum ; i++){

        }

} 
```

编辑：

如果要验证输入的数字

添加此代码块

```
function NumberValue() {     
var ranNum = document.getElementById('randNumber').value;
        if(ranNum < 1 || ranNum > 6) {
           alert("Please enter number from 1 to 6 only");
           return false;
          }

        for (i = 0; i <ranNum ; i++){

        }

        return true;

} 
```

# c# - 将数据添加到数组时索引数组的边界

> ID：14929558
> 
> 赞同：0
> 
> 时间：2013-02-18T04:37:46.747
> 
> 标签：c#, arrays

所以我有一些代码将一些数据存储在一个数组中。当新数据进入时，它会被放入一个新的数组项（数组项的总数）中，然后添加数组项的总数，以便为下一位数据做好准备。但是当我尝试将数据添加到数组中时，无论是数组 [0] 还是任何它抛出数组索引超出范围的东西？

宣言：

```
string[] TabMessages = { };
int TotalTabs = 0; 
```

使用它：

```
DevComponents.DotNetBar.TabItem Tab = TabStrip.CreateTab(TabName);
Tab.Tooltip = id + "|" + TabIndex;
TabMessages[TotalTabs] = "";//index out of bounds of array
TabStrip.SelectedTab = Tab;
TotalTabs++; 
```

任何帮助，这真的让我很烦，因为当我尝试为数组创建一个新条目时，它会抛出关于索引超出数组范围的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:42:47.600

数组是静态长度。您定义了一个长度为 0 的数组，然后尝试访问该数组中不存在的元素。您必须创建一个足够大的数组来保存您打算使用的所有值，或者使用非静态集合`List<string>`而不是静态大小的集合，例如`string[]`.

```
List<string> TabMessages = new List<string>();
TabMessages.Add(""); 
```

如果您想要可以通过索引访问的内容，但又不想提供所有可能的值，请使用字典：

```
Dictionary<int, string> TabMessages = new Dictionary<int, string>();
TabMessages[TotalTabs] = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:39:55.660

C# 中的数组不是动态的 - 它们是固定大小的。尝试使用某些列表 a`List<string>`并使用该`Add`方法将新条目插入其中。

`TabMessages`是一个 0 元素的数组（这就是你声明它的方式）。因此，您将无法在其上添加（或设置）任何元素 - 您每次都会获得索引越界异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:42:13.520

这段代码：

```
string[] TabMessages = { }; 
```

相当于：

```
string[] TabMessages = new string[0]; 
```

这意味着您创建了大小为 0 的数组。这就是您遇到这种异常的原因。因此，您可以使用`List<string>`动态大小：

```
var TabMessages = new List<string>(); 
```

然后你可以添加第一项：

```
TabMessages.Add(string.Empty); 
```

或者，根据您的业务规则创建具有固定大小的字符串数组：

```
string[] TabMessages = new string[5];  // create string array with 5 elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:44:59.540

数组被定义为具有固定大小。声明`string[] TabMessages = {}`是一样的`string[0] Tabmessages;`

您可以调整数组的大小（但我认为这是一个相当昂贵的过程） - 请参阅[http://www.dotnetperls.com/array-resize](http://www.dotnetperls.com/array-resize)

或者（最好），尝试使用某种类型的 List 构造

# c++ - 可以定义一个 C++ 变量来接受任何双向迭代器吗？

> ID：14929559
> 
> 赞同：2
> 
> 时间：2013-02-18T04:37:58.283
> 
> 标签：c++, stl, iterator

无论设计是否良好，我的方法都声明了一个变量，该变量需要根据正在使用的数据结构（由输入参数确定）`main()`来预期满足`BidirectionalIterator`定义（特别是`list<>::iterator`or ）的任何迭代器。`vector::iterator`由于我无法模板化该`main()`方法，如何做到这一点？

例如，而不是：

```
int main(int argc, const char* argv[]) {
    vector<Person>::iterator iterator0;
    list<Person>::iterator iterator1);
    multimap<string, Person>::iterator iterator2;
} 
```

由于所有迭代器都满足 的要求`BidirectionalIterator`，我想做：

```
int main(int argc, const char* argv[]) {
    bidirectionaliterator iterator0;
} 
```

然后，我不必不断检查程序使用哪种数据结构和 if 语句来存储迭代器并使用我想要的迭代器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:40:44.060

我认为您正在寻找的是**Type Erasure**。您可以将其视为接口的反面。您可以将接口想象为位于类的底部，确定它需要提供哪些方法。类型擦除对象在顶部附加，并“提取”某些方法，引入鸭子类型。即将推出的[Boost Type Erasure 库](http://steven_watanabe.users.sourceforge.net/type_erasure/libs/type_erasure/doc/html/index.html)将使它成为一个易于使用的概念。

以下是它在普通 C++11 中的工作方式（它也可以很容易地在 pre-11 C++ 中工作，但我想使用`unique_ptr`）：

```
#include<iostream>
#include<vector>
#include<list>
#include<memory>
using namespace std;

class Person{};

template <class T>
class TypeErasedBidirectionalIterator {
public:
    virtual void operator++()=0;
    virtual void operator--()=0;
    virtual T& operator*()=0;
};

template <class T, class Iterator> 
class BidirectionalIteratorAdaptor: public TypeErasedBidirectionalIterator<T> {
    Iterator it;
public:
    BidirectionalIteratorAdaptor(Iterator it): it(it){}
    void operator++(){it++;}
    void operator--(){it--;}
    T& operator*(){*it;}
};

template <class Iterator>
unique_ptr<BidirectionalIteratorAdaptor<typename Iterator::value_type,Iterator> > makeIterator(Iterator it) {
    typedef typename Iterator::value_type T;
    return unique_ptr<BidirectionalIteratorAdaptor<T,Iterator> >(new BidirectionalIteratorAdaptor<T,Iterator>(it));
}

typedef TypeErasedBidirectionalIterator<Person> PersonIterator;
typedef unique_ptr<PersonIterator> PersonIteratorPtr;

int main() {
    vector<Person> vec;
    list<Person> lst;
    lst.push_back(Person());
    PersonIteratorPtr it = makeIterator(vec.begin());
    it = makeIterator(lst.begin());
    ++*it;
    --*it;
    **it;
} 
```

请注意，通过将`PersonIteratorPtr`另一个直接公开方法的类包装在内部，您可以摆脱类似指针的行为，但我不想让概念验证更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:12:31.373

听起来你想要typedef：

```
typedef std::vector<Person> person_container;
typedef person_container::iterator mybidirectionaliterator; 
```

然后，无论何时您想要更改底层容器，您所要做的就是更改`std::vector<Person>`为其他内容。虽然，您仍然不能在这里分配任何迭代器，但您必须使用兼容的迭代器。但是，您熟悉`auto`C++11 中的关键字吗？很多时候你再也不用写出迭代器了，即`auto myiter = some_container.begin();`足够了。

此外，为了获得更好的答案，它有助于展示您如何使用迭代器，而不仅仅是声明它。

# android - 如何在谷歌市场设置只有平板用户或手机用户才能看到的Android APK？

> ID：14929561
> 
> 赞同：0
> 
> 时间：2013-02-18T04:38:03.210
> 
> 标签：android, permissions

我写了一个平板和手​​机版本的Android应用程序。由于两个版本差别不大，我想分别为手机和平板制作两个APK文件。我可以在清单文件中设置一些权限，以便谷歌市场可以筛选出合适的版本吗？

换句话说，当用户使用平板电脑时，他/她可以只搜索平板电脑版本。用户在使用手机时，只需搜索手机版本即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:56:41.540

您应该为您的解决方案提供[多个 APK 支持](http://developer.android.com/google/play/publishing/multiple-apks.html)。

> 多 APK 支持是 Google Play 上的一项功能，它允许您为您的应用程序发布不同的 APK，每个 APK 针对不同的设备配置。每个 APK 都是您的应用程序的完整且独立的版本，但它们在 Google Play 上共享相同的应用程序列表，并且必须共享相同的包名称并使用相同的发布密钥进行签名。此功能对于您的应用程序无法通过单个 APK 访问所有所需设备的情况很有用。

# macos - 符号链接上的 Mac Apache 403 错误

> ID：14929565
> 
> 赞同：1
> 
> 时间：2013-02-18T04:38:42.817
> 
> 标签：macos, apache

我正在尝试在一个单独的目录中为我的一些 php github 项目设置目录，然后在 web 文档根目录中创建指向它们的符号链接。

文档根目录是 /Users/aharris88/sites。我设置了这样的符号链接：

```
ln -s ~/dropbox/github/tester/ ~/sites/tester 
```

现在我有一个简单的 index.php 文件，其中包含以下代码：

```
<?php
echo "hello";
?> 
```

但是当我去 localhost/~aharris88/tester 我得到一个 403 Forbidden 错误。当我转到 localhost/~aharris88 时，它没有与其他目录一起列出。

我去了 /etc/apache2/users 并添加了 aharris88.conf 与以下内容：

```
<Directory /Users/aharris88/Sites/>
Options Indexes MultiViews FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

我正在使用库存的 OS X Apache 安装，但是当我运行 mamp 并转到 localhost:8888/tester/ 时它可以工作。那么我怎样才能使这个符号链接与库存的 OS X Apache 安装一起工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:15:49.923

该解决方案基于@davidr 的评论：

我使用以下代码创建了一个名为 whoami.php 的 php 文件：

```
<?php echo exec('whoami'); ?> 
```

我使用 mamp (localhost:888/whoami.php) 运行此页面，然后使用 os x apache install (localhost/~aharris88/whoami.php)，因为符号链接使用 mamp 而不是 apache。

Mamp 返回了我的本地用户（aharris88），而 apache 返回了 _www。所以这意味着 _www 无权访问符号链接指向的目录（~/Dropbox/github/tester）。

当我检查权限时，我注意到 dropbox 目录设置为 700 aharris88，所以我将其设置为 755。

```
sudo chmod 755 dropbox 
```

这解决了我的问题。

# iphone - 如何在 objc_msgSend() 中将直接字符串作为参数传递？

> ID：14929567
> 
> 赞同：0
> 
> 时间：2013-02-18T04:38:53.607
> 
> 标签：iphone

我正在尝试在 ios 中使用 c 来制作一个简单的示例。我编写了以下代码来呈现一个视图。它工作正常。但问题是我想将直接文本传递给我拥有的 UILabel创建的对象。

```
BOOL AppDel_didFinishLaunching(struct AppDel *self, SEL _cmd, void *application, void *options)
{
    self->window = objc_msgSend(objc_getClass("UIWindow"), sel_getUid("alloc"));
    self->window = objc_msgSend(self->window, sel_getUid("initWithFrame:"), (struct CGRect) { 0, 0, 320, 480 });

    id viewController = objc_msgSend(objc_msgSend(objc_getClass("UIViewController"), sel_getUid("alloc")), sel_getUid("init"));

    id view = objc_msgSend(objc_msgSend(objc_getClass("View"), sel_getUid("alloc")), sel_getUid("initWithFrame:"), (struct CGRect) { 0, 0, 320, 480 });

    id label=objc_msgSend(objc_msgSend(objc_getClass("UILabel"), sel_getUid("alloc")), sel_getUid("initWithFrame:"),(struct CGRect){20,20,200,30});
    objc_msgSend(label, sel_getUid("setBackgroundColor:"),objc_msgSend(objc_getClass("UIColor"), sel_getUid("greenColor")));

    objc_msgSend(label, sel_getUid("setText:"),?); //here how to set text by direct string?

    objc_msgSend(view, sel_getUid("addSubview:"),label);
    objc_msgSend(objc_msgSend(viewController, sel_getUid("view")), sel_getUid("addSubview:"), view);
    objc_msgSend(self->window, sel_getUid("setRootViewController:"), viewController);
    objc_msgSend(self->window, sel_getUid("makeKeyAndVisible"));

    return YES;
} 
```

**objc_msgSend(label, sel_getUid("setText:"),?); //在这一行中我必须传递字符串。**

你知道吗？谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:14:48.593

```
objc_msgSend(label, sel_getUid("setText:"),CFSTR("This is my string.")); 
```

# c# - wpf 列表视图中的工具提示

> ID：14929573
> 
> 赞同：2
> 
> 时间：2013-02-18T04:39:26.253
> 
> 标签：c#, wpf, listview, tooltip

我创建了一个 WPF 应用程序，其中有一个 listview 控件。当用户单击浏览按钮并从浏览窗口中选择文件时，ListView 将被填充。Listview 将仅显示选定的文件名。同时，所选文件的整个路径将被添加到哈希表中。要求是当用户将鼠标移动到 listview 的文本块上时，文件的确切路径必须显示在工具提示中。我在listview的鼠标移动事件中编写了如下代码。

```
private void _listFiles_MouseMove(object sender, MouseEventArgs e)
        {
            _listFiles.ToolTip = null;
            string _text = null;
            var item = Mouse.DirectlyOver;

            if (item != null && item is TextBlock)
            {
                if (_listFiles.Items.Count != 0)
                {
                    _text = _arraylist[(item as TextBlock).Text].ToString();
                    _listFiles.ToolTip = _arraylist[(item as TextBlock).Text];
                }
                else
                    _listFiles.ToolTip = "";
            } 

        } 
```

显示工具提示。但在某些情况下，当鼠标光标移出列表视图然后再次放置在列表视图中时，它不会显示它不显示工具提示。我的方法是正确的还是有其他方法可以实现这一点。

问候桑吉塔

# mysql - 如何在不手动解析文档的情况下使用 java 运行 .sql 文件

> ID：14929574
> 
> 赞同：2
> 
> 时间：2013-02-18T04:39:33.507
> 
> 标签：mysql, sql, parsing

如何在不手动解析文档的情况下使用 java 运行 .sql 文件。如果必须进行解析，是否有任何预先编写的类来进行解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:49:09.757

我不确定，但这可能会对您有所帮助。

在 MySQL JDBC 实现中：[setLocalInfileInputStream()](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-implementation-notes.html)设置一个 InputStream 实例，该实例将用于为 LOAD DATA LOCAL INFILE 语句向 MySQL 服务器发送数据，而不是 FileInputStream 或 URLInputStream ，后者表示作为语句参数给出的路径。

# jaxb - 使用 JAXB，XML 被加载到一个类中。然后在另一个类中使用这个类以不同方式编组

> ID：14929583
> 
> 赞同：0
> 
> 时间：2013-02-18T04:41:03.317
> 
> 标签：jaxb, marshalling, unmarshalling

给定一个产品的 XML 文件，然后通过 JAXB 将其加载到名为产品的类中。

该类具有以下内容：名称、价格子类、修饰符、订购规则等。

然后我创建一个订单并在该订单内

**命令**

```
public class ProductOrder {

    private String OrderId;
    private Date createDate;
    private OrderStatus orderStatus;
    private int CustomerOrderID;
    private ArrayList<ProductOrderItem> productOrderItems = new ArrayList<ProductOrderItem>();
} 
```

**订单项目**

```
public class ProductOrderItem {
    private int OrderItemID;
    private **Offering** offering;
    private Map<String, Integer> qtylist = new HashMap<String, Integer>();
    private ArrayList<Modifier> modifiers = new ArrayList<Modifier>();
    private int qty;
} 
```

**提供**

```
@XmlRootElement(name = "offering")
@XmlAccessorType(XmlAccessType.FIELD) // NONE) 
public class Offering {    
    @XmlAttribute
    private String id;

    @XmlElement
    private String offeringName;

    @XmlElement
    private String description;

    @XmlElement
    private Integer price;
} 
```

Offer 和 Modifiers 已经是带有 JAXB 的类，我只想推送部分 XML。我将如何更改注释以便只发送部分元素？例如不是提供 -> 修饰符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:03:22.360

使用`@XmlTransient`而不是`@XmlElement`标签。

# android - 2D游戏动画安卓

> ID：14929585
> 
> 赞同：3
> 
> 时间：2013-02-18T04:41:32.010
> 
> 标签：android, android-canvas, android-animation

我是 android 新手，特别是画布。我想开发小型2D游戏。在那个游戏中，我想显示物体在地面上运行并且背景不断变化的东西。但我没有找到开始我的作业的正确方法。我想要一些示例项目示例。请指导我。我怎样才能改变我的背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:50:18.590

您可以使用开源 2D 游戏引擎 AndEngine。这是官方网站

[http://www.andengine.org/](http://www.andengine.org/)

对于教程，这是一个很好的来源：- [http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/](http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T04:45:42.737

作为一个 JavaScript 狂热者，我遵循这个 - [这可能会对你有所帮助](http://digipiph.com/blog/creating-sprite-character-movement-javascript-and-jquery-ver-12)

您可以从以下链接开始 -

[按键活动](http://jsfiddle.net/stackmanoz/4Xfdc/6/)

[径向帆布下的球](http://jsfiddle.net/stackmanoz/cggkp/)

[鼠标在画布下移动](http://jsfiddle.net/stackmanoz/U4nd2/5/)

Canvas 允许您创建基于 javascript 的游戏，作为初学者，没有比使用画布制作动画更好的方法了。只需创建画布-

```
<canvas></canvas> 
```

并开始探索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T01:38:50.100

如果您的意思是您不确定如何开始编写这样的游戏，那么这将对您有很大帮助。

[简单的游戏循环](http://obviam.net/index.php/a-very-basic-the-game-loop-for-android/)

正如它所说，它为您提供了使用 SurfaceView 的基本 Android 游戏循环的骨架代码，并很好地解释了正在发生的事情。

希望它有所帮助 - 祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T04:45:41.563

从一开始你就应该学习游戏编程的基础知识。请从弹跳球和太空射击游戏开始。使用 JavaScript 和使用 html5 的画布。

寻求帮助

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial)

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas)

[http://sixrevisions.com/html/bouncing-a-ball-around-with-html5-and-javascript/](http://sixrevisions.com/html/bouncing-a-ball-around-with-html5-and-javascript/)

[http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/)

[http://asgaard.co.uk/misc/html5canvas.php](http://asgaard.co.uk/misc/html5canvas.php)

# xaml - 资源本地化：使用 x:Uid 引用另一个程序集的资源

> ID：14929590
> 
> 赞同：10
> 
> 时间：2013-02-18T04:41:56.907
> 
> 标签：xaml, windows-8, localization, visual-studio-2012, winrt-xaml

我正在编写一个 win8 应用程序，并将使用内置的资源管理系统：我的 XAML 代码中的`resw`文件和`x:Uid`标签。

所以我创建让我们`TextBox`这样说：

```
<TextBlock Style="{StaticResource HeaderTextStyle}" x:Uid="ResourceTest"/> 
```

我在我的程序集中用一个`ResourceTest.Text`条目创建了相应的资源文件，它工作正常：在运行时显示正确的文本。

现在，我想将我所有的 resx 文件移动到另一个 C# 库以进行维护。所以我把资源文件放在一个全新的项目中，并从主程序集中引用这个新程序集。

但这会导致先前的构造失败（不显示文本）。

但是，如果我使用以下代码从侧面程序集（称为 ResourcesLibrary）以编程方式检索资源值，我会正确获取字符串：

```
static ResourceLoader resourceLoader = null;
public static string GetString(string resourceName)
{
    if (resourceLoader == null)
        resourceLoader = new ResourceLoader ("ResourcesLibrary/Resources");
    return resourceLoader.GetString (resourceName);
} 
```

**`x:Uid`在处理装配外资源时如何启用该机制？**

我尝试了一些事情，`x:Uid`例如`ResourcesLibrary/Resources/ResourceTest`但没有运气。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-03T01:41:04.903

很长一段时间我都有同样的问题。但是经过一点测试后，我通过在 XAML 代码中编写资源的整个路径来解决它。

像这样的东西：

```
<TextBlock x:Uid="/ResourcesLibrary/Resources/ResourceTest" /> 
```

不幸的是，这个答案来得很晚，但它可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T07:20:40.767

根据我的理解，如果资源保存在 .resx 文件中，则不能使用 x:Uid 。

如果您使用 .resw 文件，则可以访问字符串，无论它们位于哪个程序集中。

可以像您在问题中提到的那样访问它们，例如“ResourcesLibrary/Resources/ResourceTest”

# c# - TPL 队列处理

> ID：14929592
> 
> 赞同：2
> 
> 时间：2013-02-18T04:42:05.813
> 
> 标签：c#, queue, task-parallel-library

我目前正在做一个项目，我需要排队处理一些工作，这是要求：

1.  作业必须一次处理一个
2.  排队的项目必须能够等待

所以我想要类似于：

```
Task<result> QueueJob(params here)
{
   /// Queue the job and somehow return a waitable task that will wait until the queued job has been executed and return the result.
} 
```

我试过有一个后台运行任务，它只是从队列中拉出项目并处理作业，但困难在于从后台任务到方法。

如果需要，我可以只在 QueueJob 方法中请求完成回调，但如果我能得到一个透明的 Task 回来，让您等待作业被处理（即使有作业），那就太好了在队列之前）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:40:32.517

你可能会发现[`TaskCompletionSource<T>`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)它很有用，它可以用来创建一个`Task`在你想要的时候完全完成的。如果将它与 结合使用`BlockingCollection<T>`，您将获得队列：

```
class JobProcessor<TInput, TOutput> : IDisposable
{
    private readonly Func<TInput, TOutput> m_transform;

    // or a custom type instead of Tuple
    private readonly
        BlockingCollection<Tuple<TInput, TaskCompletionSource<TOutput>>>
        m_queue =
        new BlockingCollection<Tuple<TInput, TaskCompletionSource<TOutput>>>();

    public JobProcessor(Func<TInput, TOutput> transform)
    {
        m_transform = transform;
        Task.Factory.StartNew(ProcessQueue, TaskCreationOptions.LongRunning);
    }

    private void ProcessQueue()
    {
        Tuple<TInput, TaskCompletionSource<TOutput>> tuple;
        while (m_queue.TryTake(out tuple, Timeout.Infinite))
        {
            var input = tuple.Item1;
            var tcs = tuple.Item2;

            try
            {
                tcs.SetResult(m_transform(input));
            }
            catch (Exception ex)
            {
                tcs.SetException(ex);
            }
        }
    }

    public Task<TOutput> QueueJob(TInput input)
    {
        var tcs = new TaskCompletionSource<TOutput>();
        m_queue.Add(Tuple.Create(input, tcs));
        return tcs.Task;
    }

    public void Dispose()
    {
        m_queue.CompleteAdding();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:48:34.807

我会去做这样的事情：

```
class TaskProcessor<TResult>
{
    // TODO: Error handling!

    readonly BlockingCollection<Task<TResult>> blockingCollection = new BlockingCollection<Task<TResult>>(new ConcurrentQueue<Task<TResult>>());

    public Task<TResult> AddTask(Func<TResult> work)
    {
        var task = new Task<TResult>(work);
        blockingCollection.Add(task);
        return task; // give the task back to the caller so they can wait on it
    }

    public void CompleteAddingTasks()
    {
        blockingCollection.CompleteAdding();
    }

    public TaskProcessor()
    {
        ProcessQueue();
    }

    void ProcessQueue()
    {
        Task<TResult> task;
        while (blockingCollection.TryTake(out task))
        {
            task.Start();
            task.Wait(); // ensure this task finishes before we start a new one...
        }
    }
} 
```

根据使用它的应用程序的类型，您可以将 BlockingCollection/ConcurrentQueue 切换为更简单的东西（例如，只是一个普通队列）。您还可以根据要排队的方法/参数来调整“AddTask”方法的签名......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T05:08:56.170

`Func<T>`不接受任何参数并返回 T 类型的值。作业一个接一个地运行，您可以等待返回的任务以获取结果。

```
public class TaskQueue
{
    private Queue<Task> InnerTaskQueue;

    private bool IsJobRunning;

    public void Start()
    {
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                if (InnerTaskQueue.Count > 0 && !IsJobRunning)
                {
                     var task = InnerTaskQueue.Dequeue()
                     task.Start();
                     IsJobRunning = true;
                     task.ContinueWith(t => IsJobRunning = false);
                }
                else
                {
                     Thread.Sleep(1000);
                }
            }
        }
    }

    public Task<T> QueueJob(Func<T> job)
    {
        var task = new Task<T>(() => job());
        InnerTaskQueue.Enqueue(task);
        return task;
    }
} 
```

# xmpp - activemq 5.7 和 5.8 中的 XMPP 代理支持

> ID：14929597
> 
> 赞同：0
> 
> 时间：2013-02-18T04:42:38.130
> 
> 标签：xmpp, activemq

在 activemq 版本 5.7 和 5.8 中支持 IS XMPP 代理。我可以创建主题，但在创建队列期间它会抛出异常。

任何帮助表示赞赏。

谢谢洛克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:26:30.723

XMPP 模块有 v5.7 和 v5.8。从 v5.8 开始，它已被弃用，并且不会继续包含在内。该模块没有得到很好的维护，并且很难正常工作，这就是我们选择放弃它的原因。

由于您没有指出异常是什么，因此无法猜测可能出了什么问题。我建议研究 AMQ 中很好支持的许多其他协议之一，例如 STOMP。

编辑：从您在评论中给出的异常看来，activemq-xmpp.jar 似乎不在类路径中。确保将 jar 放入正确的位置，以便代理可以找到 XMPP 传输的虚构 bean。

# testing - 使用 arquillian incontainer 模式，为什么测试方法会得到数据提供者在 testng 中返回值的时间的平方？

> ID：14929602
> 
> 赞同：3
> 
> 时间：2013-02-18T04:42:52.507
> 
> 标签：testing, testng, jboss-arquillian

我使用 TestNG 作为单元测试框架和 Jboss AS7.1.1 Final 作为服务器

数据提供者和测试方法在客户端模式下运行良好

相同的数据提供者将返回 10 行，并且我的测试方法在容器模式下执行了近 100 次

**测试方法**

```
 @Test(groups="bean-tests",dataProvider="Presenter-Data-Provider")

   public void findByIdPositiveTest(long presenterId,String expectedPresenterName)

   {

   } 
```

**数据提供者方法：**

```
@DataProvider(name = "Presenter-Data-Provider")

public  Object[][] presenterTestDataProvider()

{

    EntityManagerFactory emf=null;

    EntityManager em=null;

    Object testcaseData[][]=null;

    Session session=null;

    try

    {

        emf=Persistence.createEntityManagerFactory("TestCaseDataSource");

        em=emf.createEntityManager();

        session=em.unwrap(Session.class);

        Criteria query=session.createCriteria(TestPresenter.class).setFirstResult(0).setMaxResults(10);

        List<TestPresenter> rowList=query.list();

        testcaseData=new Object[rowList.size()][2];

        for(int loopCount=0;loopCount<rowList.size();loopCount++)

        {

            TestPresenter row=rowList.get(loopCount);

            testcaseData[loopCount][0]=row.getPresenterId();

            testcaseData[loopCount][1]=row.getExpectedPresenterName();

        }

    }

    catch(Exception exception)

    {

      mLog.error(exception.getMessage()); 

    }

    return testcaseData;

} 
```

我正在使用以下套件配置作为测试套件运行

```
<test name="Bean testing">

    <groups>

        <run>

            <!-- This has to be added by default while using arquillian Test Runner -->

            <include name="arquillian" />

            <include name="bean-tests" />

        </run>

    </groups>

    <classes>

        <class name="blah.blah.blah.PresenterManagerBeanTest" />

    </classes>

</test> 
```

请让我知道我做错了什么或者指导我如何从数据库获取值到数据提供者并使用容器模式进行测试

提前致谢

沙迪亚希兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T08:12:32.883

看起来它与[https://issues.jboss.org/browse/ARQ-1282](https://issues.jboss.org/browse/ARQ-1282)有关。问题仍然是开放的。

# android - 如何将此 JSON 对象转换为字符串数组？

> ID：14929603
> 
> 赞同：2
> 
> 时间：2013-02-18T04:42:53.647
> 
> 标签：android, json

我从 Internet 上的 PHP 文件中获取此 JSON 对象：

```
{
"1": "bar",
"2": "foo",
"3": "umIar",
"4": "shubham"
} 
```

我尝试了很多，但无法将其转换为`String`数组。怎么做？

我使用了这个 JAVA 代码：

```
public class showNewsFeed extends AsyncTask <String, Void, String> {
        HttpClient httpclient = new DefaultHttpClient();

         HttpPost httppost = new HttpPost("http://www.ludlowcastle.co.in/getNotifiedDTU/newsFeed.php");
         String result;
         protected String doInBackground(String... voids ){
             try {
                 HttpResponse response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();
                 InputStream is = entity.getContent();
                 String result = convertStreamToString(is);
                 System.out.println("String response = " + result);
             } catch (Exception e){
                 e.printStackTrace();
             }

             return result;
         }
        protected void onProgressUpdate(Void...voids){

        }

        protected void onPostExecute(String result){
            super.onPostExecute(result);

            try {
                JSONObject obj=new JSONObject(result);
                Iterator iter = obj.keys();
                 while(iter.hasNext()){
                   String key = (String)iter.next();
                   System.out.println(obj.getString(key));
                }

              } catch (Exception e) {
                e.printStackTrace();
              }
        }

    } 
```

这是日志猫：

```
02-18 04:58:19.412: W/System.err(1268): java.lang.NullPointerException
02-18 04:58:19.431: W/System.err(1268):     at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
02-18 04:58:19.431: W/System.err(1268):     at org.json.JSONTokener.nextValue(JSONTokener.java:94)
02-18 04:58:19.431: W/System.err(1268):     at org.json.JSONObject.<init>(JSONObject.java:154)
02-18 04:58:19.431: W/System.err(1268):     at org.json.JSONObject.<init>(JSONObject.java:171)
02-18 04:58:19.431: W/System.err(1268):     at com.umair.shubham.fragment1$showNewsFeed.onPostExecute(fragment1.java:71)
02-18 04:58:19.431: W/System.err(1268):     at com.umair.shubham.fragment1$showNewsFeed.onPostExecute(fragment1.java:1)
02-18 04:58:19.441: W/System.err(1268):     at android.os.AsyncTask.finish(AsyncTask.java:631)
02-18 04:58:19.441: W/System.err(1268):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-18 04:58:19.441: W/System.err(1268):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-18 04:58:19.451: W/System.err(1268):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 04:58:19.451: W/System.err(1268):     at android.os.Looper.loop(Looper.java:137)
02-18 04:58:19.451: W/System.err(1268):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-18 04:58:19.451: W/System.err(1268):     at java.lang.reflect.Method.invokeNative(Native Method)
02-18 04:58:19.451: W/System.err(1268):     at java.lang.reflect.Method.invoke(Method.java:511)
02-18 04:58:19.451: W/System.err(1268):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-18 04:58:19.461: W/System.err(1268):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-18 04:58:19.471: W/System.err(1268):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:49:31.873

试试这个

```
ArrayList<String> arr=new ArrayList<String>();
JSONObject obj=new JSONObject(response);
Iterator iter = obj.keys();
 while(iter.hasNext()){
   String key = (String)iter.next();
   arr.add(obj.getString(key));
} 
```

# android - 禁用点击

> ID：14929604
> 
> 赞同：3
> 
> 时间：2013-02-18T04:43:21.803
> 
> 标签：android, android-layout, onclicklistener

我设计了一个包含 5-6 个按钮和 2 个画廊的 UI。单击按钮后，从右上角部分显示列表视图（不覆盖整个屏幕）。当 listView 可见时，我想禁用其他按钮和画廊的 onClick 和滚动。

也就是我想实现一个类似于alertDialog的场景。我不想单独禁用每个按钮的 onClick，因为我可能需要稍后添加或删除按钮，并且维护代码可能会变得乏味。有什么方法可以禁用 onClick 和一般滚动。

PS：如果可以禁用布局的 onClick 和滚动，也会很有帮助。在这种情况下，我可以禁用除弹出的 listView 之外的所有布局的 onClick

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:08:19.997

用这个-

```
button.setEnabled(false); 
```

或者

```
 button.setVisibility(View.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:04:10.947

您可以像[这样使用视图组](http://developer.android.com/reference/android/view/ViewGroup.html)

并且可以禁用该视图组的点击事件。

# jquery - jquery限制.load中的字符数

> ID：14929605
> 
> 赞同：0
> 
> 时间：2013-02-18T04:43:34.410
> 
> 标签：jquery, text, load

我正在使用 jquery 加载从页面加载内容，我试图限制它在 div 中允许的字符数量，我的函数有效，但只是有时，我不知道为什么。

```
$('#violin_1_title').load('http://www.klossal.com/klossviolins/inventory.html .violin:first .about .about_txt .about_summary h3:eq(1)', function() {

    $(".txt_limit").text($(this).text().substr(0, 450)+'...');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:47:59.910

尝试

```
$('#violin_1_title').load('http://www.klossal.com/klossviolins/inventory.html .violin:first .about .about_txt .about_summary h3:eq(1)', function(response) {

    $(".txt_limit").text(response.substr(0, 450)+'...');

}); 
```

这使用回调函数中的参数，该参数具有来自服务器的响应数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:47:46.040

作为服务器响应的输出将是 HTML。因此，在这种情况下，您需要获取完整内容，然后将其转换为文本/HTML 输出，并从输出中应用子字符串。

```
$('#violin_1_title').load('http://www.klossal.com/klossviolins/inventory.html .violin:first .about .about_txt .about_summary h3:eq(1)', function(data) {

    $(".txt_limit").text(data.substr(0, 450)+'...');

}); 
```

如果你擅长使用 CSS，如果它是单行的，你可以这样做：

```
.txt_limit {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:48:17.777

我相信`.txt_limit`是动态加载的元素，那么你应该`.find()`在现有的父级中使用它：

```
$('#violin_1_title').find(".txt_limit").text().substr(0, 450)+'...'; 
```

或这个：

```
$(".txt_limit","#violin_1_title").text().substr(0, 450)+'...'; 
```

# java - 如何比较存储在链表中的整数 - Java

> ID：14929608
> 
> 赞同：1
> 
> 时间：2013-02-18T04:43:47.083
> 
> 标签：java, linked-list, compare

我正在寻找有关 Java 作业的一些建议。我被要求做的是对存储在链表中的数字执行不同的操作，每个数字都在一个单独的节点中。重点是编写一个可以对非常大的数字进行算术运算的程序。

我正在寻求帮助的特定问题是编写一个比较两个数字的方法，类似于整数的常规 compareTo() 方法。如果 this.num < num 则返回 -1，如果 this.num > num 则返回 +1，如果相等则返回 0。

让我感到困难的是，赋值指定链表应该以相反的顺序存储数字。例如，数字 145 的链表如下所示：

5 => 4 => 1 => 空

这使得将数字相加更容易，但在尝试比较时让我很头疼。这是我想出的，评论解释了它应该如何工作。

```
public int compareTo(LLNum list)
{ // Compares two numbers.
  // If the two numbers are of a different length, clearly the shortest is the smallest.
  // If the two numbers are of equal length, call traverseToCompare to do the comparison.
  if (this.len > list.len)
  {
    compareResult = 1;
  }
  else if (this.len < list.len)
  {
    compareResult = -1;
  }
  else if (this.len == list.len)
  {
    traverseToCompare(this.head, list.head);
  }

  return compareResult;
}

public void traverseToCompare(ListNode node1, ListNode node2)
{ // In the case that both numbers are of the same length, recursively traverse the list.
  // compare each digit individually while unwinding the stack.
  // Once two digits are found to be different, break out of the unwinding (Note: I could not find a way of breaking out)
  // Since the dominant digit is at the tail end, this ensures the least number of   comparisons.
  if (node1 == null || node2 == null) 
  { // Base case. Handles the case where both numbers are identical.
    compareResult = 0;
    return;
  }
  traverseToCompare(node1.getNext(), node2.getNext());
  if (node1.getItem() > node2.getItem())
  {
    compareResult = 1;
  }
  if (node1.getItem() < node2.getItem())
  {
    compareResult = -1;
  }

  return; 
} 
```

倒序的数字是让我走向递归的原因。我以为我会递归地遍历列表，然后在输出时比较每个数字，并以某种方式在不相同的第一个数字处打破递归。我意识到这不是使用递归的常用方法，但我不知道该怎么做。有没有一种方法可以在不抛出异常的情况下中断？我觉得这可能有点太草率了。或者关于如何在没有递归的情况下做到这一点的任何建议？

请不要只给我一些代码来复制和粘贴。我只是想指出正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:52:52.007

如果我必须这样做，我会首先检查两个列表的长度（就像你做的那样）。如果它们相等，进行比较的更好方法是为每个列表创建一个迭代器。然后，您可以同时递增迭代器并比较链表中该位置的值。这样做，一旦您确定一个列表包含比另一个更大的数字，您就可以简单地停止比较列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:54:14.657

最好的方法是遍历每个数字的列表并构造数字，然后比较两个数字。

从列表中构造数字的方法是

```
int i = 0
int f = 1
Do while GetNext() <> Null
    i = i + GetCurrentItem() * f
    f = f * 10
End Do 
```

例如。如果数字是 145，那么列表将有 5->4->1

所以运行上面的代码

```
i = 0
f = 1

i = i + 5*1 = 5
f = f * 10 = 10

i = i + 4*10 = 45
f = f * 10 = 100

i = i + 1*100 = 145
f = f * 10 = 1000 
```

所以得出 i = 145。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:56:16.130

使用纯字符串会容易得多；因为您可以存储任何长度的数据。但无论如何，要求是 LinkedList ：

现在数据以相反的顺序存储；这意味着您在浏览完整列表之前无法决定`compareTo`方法的响应，因为最重要的数据存储在最后一个位置。

```
 5 --> 4  --> 1    == 145
  1 --> 4 --> 5     == 541 
```

所以至少通读一遍；然后您可以将值存储在**String**中，然后决定`compareTo`方法结果。

**为相同长度的项目调用traverseToCompare**方法。因此，您可以编写自己的算法来比较存储在**String**中的两个数字。

**编辑** 如果不允许字符串

然后会建议你手动做同样的事情；遍历整个列表比较最后一个节点，如果最后一个节点相同，则比较前一个节点，依此类推...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:58:00.593

在 traverseToCompare 中，您需要处理一些情况。如果你不使用递归，它会更好更干净。以下可以是一个解决方案

```
boolean areSame = true;
boolean digitDiffer = false;
int compareResult = 0;
int length = node1.length
for(int i=0; i<length; i++)
{
   if(!digitDiffer && ((node1.getItem() == node2.getItem()))
   {
     continue
   }
   else
   {
      digitDiffer = true;
      if(node1.getItem() >= node2.getItem())
      {
         compareResult = 1
      }
      else
      {
        compareResult = -1;
      }
   }
}

return compareResult; 
```

# use-case - 什么都不做的用例？

> ID：14929611
> 
> 赞同：1
> 
> 时间：2013-02-18T04:43:55.483
> 
> 标签：use-case

我可以做一个“什么都不做”的用例吗？例如，考虑一个汽水自动售货机：它可以出售一罐汽水或一杯汽水。

所以我的顶级用例是“买苏打水”。扩展用例是“买罐汽水”和“买一杯汽水”。我可以将“买苏打水”设为空白，即没有步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:33:08.843

不，因为“买一罐汽水”和“买一杯汽水”是扩展用例，而扩展关系需要至少一个扩展用例中的 ExtensionPoint。（UML 上层建筑 v2.4.1 第 16.3.3 节）。*扩展点是对用例中某个位置的引用，在该位置可以插入其他用例的部分行为*（第 16.3.4 节）。

换句话说，您必须指定如何以及何时将“买罐苏打水”和“买一杯苏打水”中定义的行为插入到“买苏打水”中定义的行为中。

标准中有一个类似的示例（图 16.3），我根据您的用例进行了调整。见：[http ://tinypic.com/r/huisg3/6](http://tinypic.com/r/huisg3/6)

# php - PHP 设置 proc_open 直接输出给用户

> ID：14929612
> 
> 赞同：3
> 
> 时间：2013-02-18T04:44:08.107
> 
> 标签：php, stream, pdftk, proc-open

我正在使用 proc_open 和 pdftk 来预填充一些表格的数据，这很好用，但不是将结果保存到文件然后读回文件，我想直接打印文件。我有这个工作，所以我没有任何问题。但是我想将 proc_open 的输出直接指向返回给用户的流，这样我就不必在 php.ini 中保存内存中的值。到目前为止，我有以下内容：

```
$descriptorspec = array(
0 => array("pipe","r"),
1 => array("pipe","w"),
2 => array("file","error.txt","a") );
$process = proc_open($command, $descriptorspec, $pipes);
if( is_resource( $process ) ) {
  fwrite($pipes[0], $fdf);
  fclose($pipes[0]);
  echo stream_get_contents($pipes[1]));
  fclose($pipes[1]);
  proc_close($process);
} 
```

我想将结果直接用于使用上面的代码，而不是将值实际保存在变量中然后打印出来。有没有办法将php输出中的流直接指向输出。我想这样做是为了节省内存并减少代码运行所需的时间。

有谁知道 php 中的流函数可以直接打印流结果。或者是否有 proc_open 的设置可以做到这一点。无论哪种方式，我担心这可能根本不起作用，因为我可能需要在输出中添加一个内容长度标题以直接显示 PDF。如果有人知道直接打印流的功能，是否还有一种方法可以在不实际读取流的情况下获取流的字节长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T00:55:01.033

由于没有人发布答案，因此我不妨发布我找到的答案。

使用 fopen 模式 w 打开一个流到 php://output，并使用 stream_copy_to_stream 将数据从 proc_open 进程直接发送给用户。然而，似乎没有一种简单的方法可以获取流中数据的长度或大小。

```
$descriptorspec = array(
0 => array("pipe","r"),
1 => array("pipe","w"),
2 => array("file","error.txt","a") );
$process = proc_open($command, $descriptorspec, $pipes);
if( is_resource( $process ) ) {
  fwrite($pipes[0], $fdf);
  fclose($pipes[0]);

  /* New Code */  
  if( $fout = fopen("php://output","w") ) {
    stream_copy_to_stream($pipes[1],$fout);
    fclose($fout);
  }  

  fclose($pipes[1]);
  $result = proc_close($process);
} 
```

# c# - 如何用c#中的另一个字符串替换数据表字段的子字符串

> ID：14929615
> 
> 赞同：0
> 
> 时间：2013-02-18T04:44:35.043
> 
> 标签：c#, replace, datatable

我有一个数据表![在此处输入图像描述](../Images/d2dbc1ae4c7f465476fdd4d621fbc853.png)

我想用基于 cust_Id 的字符串替换所有 ESM 的 estm_suffix 值。我正在检索字符串

```
 for (int i=0; i < dtRefNos.Rows.Count; i++)
        {
            intCustId = int.Parse(dtRefNos.Rows[i]["cust_Id"].ToString());
            dsCustmr = custDCCls.FillCustDataSet(intCustId);
            string shrtName = dsCustmr.Tables[0].Rows[0]["cust_Sname"].ToString();
        } 
```

现在我只想将 estm_suffix 中的 ESM 子字符串替换为 shrtName 作为 ESM/00001/12-13 到 shrtName/00001/12-13 并且必须返回数据表。请任何人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:00:37.860

对于您的评论

> 每一行都有各自的 shrtNames

和

> 我不想替换 estm_sufffix 的所有值。我只想替换 ESM/00001/12-13 中的 ESM 子字符串

您可以简单地在循环中再添加一行以使用[string.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)`for`替换`estm_suffix`值，例如：`shrtName`

```
for (int i=0; i < dtRefNos.Rows.Count; i++)
        {
            intCustId = int.Parse(dtRefNos.Rows[i]["cust_Id"].ToString());
            dsCustmr = custDCCls.FillCustDataSet(intCustId);
            string shrtName = dsCustmr.Tables[0].Rows[0]["cust_Sname"].ToString();
            //New Line
            dtRefNos.Rows[i]["estm_suffix"] = dtRefNos.Rows[i].Field<string>("estm_suffix")
                                          .Replace("ESM", shrtName);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:06:59.630

只需使用正则表达式。

```
using System.Text.RegularExpressions;

for (int i=0; i < dtRefNos.Rows.Count; i++)
{
    intCustId = int.Parse(dtRefNos.Rows[i]["cust_Id"].ToString());
    dsCustmr = custDCCls.FillCustDataSet(intCustId);
    string shrtName = dsCustmr.Tables[0].Rows[0]["cust_Sname"].ToString();
    string str = dtRefNos.Rows[i]["estm_suffix"].toString();
    str = Regex.Replace(str, "ESM", dtRefNos.Rows[i]["shrtName"].toString());
    dtRefNos.Rows[i]["estm_suffix"] = str;
} 
```

# javascript - 如何根据用户输入动态创建我的 html 表单的操作属性（URL）

> ID：14929616
> 
> 赞同：0
> 
> 时间：2013-02-18T04:44:36.843
> 
> 标签：javascript, html

抱歉 - 仍然是初学者 - 如何使用用户输入的文本动态创建操作 url？

```
 <form name="myInstitution"  action="" method="GET">
        <div>
            <label for="names" class="bold">Institution Name</label>
            <input id="names" name="schoolName" type="text"></input>                

        </div>

        <div class="bold"></div>

        <div>
            <input type="submit" value="Submit" id="sbutton" name="submit" />
            <input type="reset" value="Reset" />
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:49:57.923

由于您似乎没有使用 javascript 库，我[将从这个 answer 复制纯 javascript 中的绑定代码](https://stackoverflow.com/a/2967114/597122)。

```
var on = (function(){
    if ("addEventListener" in window) {
        return function(target, type, listener){
            target.addEventListener(type, listener, false);
        };
    }
    else {
        return function(object, sEvent, fpNotify){
            object.attachEvent("on" + sEvent, function(){
                fpNotify(window.event);
            });
        };
    }
}());

on(document.getElementById("sbutton"), "click", function(){
    this.action = document.getElementById( "names" ).val() + ".ext";
}); 
```

如果您使用的是[jQuery](http://www.jquery.com)之类的 javascript 库，则可以像这样绑定到事件处理程序：

```
$( "form[name=\"myInstitution\"]" ).on( "submit", function( e ){
    var $this = $(this),
        text  = $this.find( "input#names" ).val();

    $this.prop( "action", text + ".ext" );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:46:51.833

```
$('#myForm').submit(function ()
{
    var action = '';
    // compute action here...
    $(this).attr('action', action);
}); 
```

希望对你有帮助。。

# sql - 如何使用组选择前 2 行

> ID：14929618
> 
> 赞同：1
> 
> 时间：2013-02-18T04:44:56.930
> 
> 标签：sql, sql-server, tsql, sql-server-2005, greatest-n-per-group

我有：

**表格1**

```
ID  date       amt
-------------------    
001 21/01/2012 1200
001 25/02/2012 1400
001 24/03/2012 1500
001 21/04/2012 1000
002 21/03/2012 1200
002 01/01/2012 0500
002 08/09/2012 1000
..... 
```

我想从DESC`ID`排序的每组中选择前两行。`date``Table1`

查询如下所示：

```
SELECT TOP 2 DATE, ID, AMT FROM TABLE1 GROUP BY ID, AMT --(NOT WORKING) 
```

预期输出：

```
ID  date       amt
-------------------
001 21/01/2012 1200
001 25/02/2012 1400
002 21/03/2012 1200
002 01/01/2012 0500

..... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:47:57.263

您可以利用使用`Common table Expression`和`Window Function`

```
WITH recordList
AS
(
    SELECT  ID, DATE, Amt,
            DENSE_RANK() OVER (PARTITION BY ID ORDER BY DATE ASC) rn
    FROM    tableName
)
SELECT  ID, DATE, Amt
FROM    recordList
WHERE   rn <= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d26ba/1)

根据上面您想要的结果，您订购的日期是`ASCENDING`。

好的，您可以使用`DENSER_RANK()`，或者`ROW_NUMBER()`但在我的回答中，我使用了，`DENSE_RANK()`因为我正在考虑重复项。无论如何，使用 OP`ROW_NUMBER()`代替`DENSE_RANK()`.

*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

# jquery - 以编程方式更改 jQuery Mobile 的可折叠集

> ID：14929621
> 
> 赞同：0
> 
> 时间：2013-02-18T04:45:01.367
> 
> 标签：jquery, html, jquery-mobile, collapsable

我有一个包含 7 个元素的可折叠套装。它工作正常。当我尝试更改每个可折叠项目的标题时，它会更改标题但会删除可折叠样式。

有人遇到过这样的问题吗？？

![在此处输入图像描述](../Images/ccbb8fcfb89d29ab30ae1b398a020538.png)

请在下面找到我的代码。

jQuery

```
$('#MonColHead').text("Monday "+pad2((dateArray[0].getMonth()+1))+"-"+pad2(dateArray[0].getDate()));
$('#collapReadOnlyProj').selectmenu('refresh'); 
```

html

```
<div data-role="collapsible-set" id="collapReadOnlyProj">

        <div data-role="collapsible">
        <h3 id="MonColHead">Monday</h3>
            <table align="center">
                <tr><th>Hours</th><th>Minutes</th></tr>
                <tr><td><input type="number" name="name" id="name" value=""  /> </td><td><input type="number" name="name" id="name" value=""  /></td></tr>
            </table>

            <div data-role="fieldcontain">
            <label for="textarea">External Notes</label>
                <textarea name="textarea" id="textarea" style="min-height:120px"></textarea>
            </div>  
            <div data-role="fieldcontain">
            <label for="textarea">Internal Notes</label>
                <textarea name="textarea" id="textarea" style="min-height:120px"></textarea>
            </div>  
        </div>

        <div data-role="collapsible">
        <h3 id="SunColHead">Sunday</h3>
            <table align="center">
                <tr><th>Hours</th><th>Minutes</th></tr>
                <tr><td><input type="number" name="name" id="name" value=""  /> </td><td><input type="number" name="name" id="name" value=""  /></td></tr>
            </table>

            <div data-role="fieldcontain">
            <label for="textarea">External Notes</label>
                <textarea name="textarea" id="textarea" style="min-height:120px"></textarea>
            </div>  
            <div data-role="fieldcontain">
            <label for="textarea">Internal Notes</label>
                <textarea name="textarea" id="textarea" style="min-height:120px"></textarea>
            </div>  
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:57:03.533

代替

```
$('#MonColHead').text("Monday "+pad2((dateArray[0].getMonth()+1))+"-"+pad2(dateArray[0].getDate()));
$('#collapReadOnlyProj').selectmenu('refresh'); 
```

试试这个

```
$('#MonColHead .ui-btn-text').text("Monday "+pad2((dateArray[0].getMonth()+1))+"-"+pad2(dateArray[0].getDate())); 
```

# c# - Battlelog 游戏管理器如何工作？

> ID：14929625
> 
> 赞同：0
> 
> 时间：2013-02-18T04:45:27.307
> 
> 标签：c#, asp.net-mvc

我知道它使用插件，但它在 Chrome 等中如何工作？我无法解释它大声笑。

基本上我需要一些与此非常相似的东西，但对于我的一个应用程序。所以我有一个网站，当他们访问某个页面时，我需要它向我将制作的插件发送一个函数并返回一些数据。我不知道我应该如何开始做这样的事情，并且想知道这里是否有人有任何想法？

**------------ EDIT----------------** 为了让问题更容易一些，我怎样才能为chrome创建一个插件，它可以让我运行用户计算机上的应用程序，就像 Battlelog 所做的那样。

# android - phonegap logcat 错误外部/chromium/net/disk_cache/stat_hub.cc:213：

> ID：14929629
> 
> 赞同：2
> 
> 时间：2013-02-18T04:45:52.703
> 
> 标签：android, cordova

在 logcat 中不断出现错误

```
02-18 12:13:00.849: E/chromium(6915): external/chromium/net/disk_cache/stat_hub.cc:213: 
[0218/121300:ERROR:stat_hub.cc(213)] StatHub::Init - App  isn't supported. 
```

应用程序仍在运行，但想知道是什么导致了这个错误，这会是一个问题

更新：谷歌地图脚本导致错误

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCh2vwRCwkFWuEy8q-wbTF9vGobuyXC5G0&sensor=false"></script> 
```

试图把它放在 config.xml

```
<access origin="*.googleapis.com" />
<access origin="*.gstatic.com" /> 
```

仍然无法正常工作并获得

```
Application Error
The connection to the server was unsuccessful. (file:///android_asset/www/index.html) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T23:04:00.123

对子域使用通配符目前不起作用。我建议改为执行以下操作：

```
<access origin="googleapis.com" subdomains="true" />
<access origin="gstatic.com" subdomains="true" /> 
```

我将在问题跟踪器中添加一个错误以修复此问题。当我们将配置拉到它自己的类时，我们似乎丢失了一些正则表达式逻辑。

# javascript - 检测用户是否没有使用 javascript 在网页上进行任何活动

> ID：14929635
> 
> 赞同：1
> 
> 时间：2013-02-18T04:46:51.147
> 
> 标签：javascript, html

如果他在网页上没有做任何鼠标点击/键盘按下/鼠标滚动，我想向用户显示一个弹出窗口

有什么方法可以使用 javascript 来跟踪它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T04:49:41.237

```
var timeout = false;
function checkActivity() {
    clearTimeout(timeout);
    timeout = setTimeout(function () { alert('inactive'); }, AmountOfTime);
}
document.addEventListener('keydown', checkActivity);
document.addEventListener('mousedown', checkActivity);
document.addEventListener('mousemove', checkActivity);
checkActivity(); 
```

`AmountOfTime`这样做是在几毫秒后运行一个函数。它会在文档上的任何用户活动上重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:32:40.913

您可以使用此（库）[https://github.com/mikesherov/jquery-idletimer] 来检测用户是否空闲。

例子：

```
$(document).on('idle.idleTimer', function() {
    //do something on idle;
    });
$(document).on('active.idleTimer', function() {
    //so something on activity;
    });
$(document).idleTimer(1000, {
    startImmediately: false,
    idle: true,
    enabled: true,
    events: 'keydown' //there are more events in the docs;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:50:46.727

您可以在 JavaScript中处理[键盘事件](http://javascript.info/tutorial/keyboard-events)和[鼠标事件。](http://www.quirksmode.org/js/events_mouse.html)

您可以让计时器倒计时到应该向用户显示该消息的时间，并在您收到符合条件的事件时重置计时器。

# c++ - C++ 中的 cin 忽略空格——基本编程

> ID：14929638
> 
> 赞同：2
> 
> 时间：2013-02-18T04:47:13.377
> 
> 标签：c++, input, space, cin, comma

我正在为入门级编程课程创建一个基本搜索功能并遇到了这个问题。

```
string query; 
cout<<"Enter a query: ";
cin>>query;

cout<<query<<endl; // debug line
find(query); // calls to another function 
```

*   如果我输入：`Wellington, Florida`，我得到输出：`Wellington,`
*   如果我输入：`Miami, Florida`，我得到输出`Miami,`

似乎`cin`忽略了空格之后的所有内容并使我的函数调用混乱。有没有办法解决 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:48:43.263

**尝试使用：**

```
getline(cin,query); 
```

而不是`cin >> query;`.

# php - 计数来自选择查询的记录。

> ID：14929639
> 
> 赞同：0
> 
> 时间：2013-02-18T04:47:17.843
> 
> 标签：php, mysql, sql

我正在尝试从查询中计算记录。但我有一个问题。

我的查询是这样的：

```
SELECT name, address, mobile 
  FROM users 
WHERE city = 'beegin' 
```

此查询获取多行。所以我能知道有没有办法在这个选择查询中添加计数列来计算从查询中给出的记录数。

我不能在这里使用 mysqli_num_rows() 。这就是为什么我正在寻找不同的解决方案。

希望有人能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:24:01.477

您可以像这样使用 SQL_CALC_FOUND_ROWS 函数

```
SELECT SQL_CALC_FOUND_ROWS name, address, mobile FROM users WHERE city = 'beegin' 
```

之后进行第二次查询。

```
SELECT FOUND_ROWS() 
```

但是如果你使用 LIMIT，这个方法将不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:49:26.950

```
SELECT name, address, mobile, totalCount
  FROM users 
       CROSS JOIN (SELECT COUNT(*) totalCount FROM users WHERE city = 'beegin') b
WHERE city = 'beegin' 
```

# jquery - Jquery循环错误执行

> ID：14929646
> 
> 赞同：0
> 
> 时间：2013-02-18T04:48:20.317
> 
> 标签：jquery, loops

我有一个滑动图像的功能，我把它分成10个小div，每个div都有一部分图像，然后我使用这个功能：

```
 function change()
{
    $(document).ready(function(){
        for(var i=1,t=0,s="";i<=10;i++)
        {
        s= "#img2_" + i;
        setTimeout(function(){$(s).slideDown(2000)},t);
        t= t+300;
        }
    });
} 
```

我有一个问题，只有 i=10 的 div 是 slideDown，我试图改变 i 的最大值，只有 i 的 div 是 slideDown。那么我的问题是什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:33:10.953

到执行超时时，“s”将等于循环结束时分配的值。这是因为传递给 setTimeout 的函数没有它自己对 s 的引用，它使用的是“全局”引用。要解决此问题，请围绕对 setTimeout 的调用创建一个闭包，如下所示：

```
function change() {
  $(document).ready(function(){
    for(var i=1,t=0,s="";i<=10;i++) {
      s= "#img2_" + i;
      (function(img, delay){
        setTimeout(function(){$(img).slideDown(2000)}, delay);
      })(s, t);
      t= t+300;
    }
  });
} 
```

# ruby-on-rails - 在 Rails 应用程序中放置 Facebook 元标记

> ID：14929653
> 
> 赞同：3
> 
> 时间：2013-02-18T04:49:08.610
> 
> 标签：ruby-on-rails, facebook-opengraph, meta-tags

我已经实现了 Omniauth 和 Koala7 gem 来将我的应用程序与 Facebook 集成。一切都很好，除了发布自定义对象的自定义操作的一个小问题。

问题是我的对象 url 应该是新创建的帖子的显示页面，例如 /posts/1。为了使这个页面被识别为 facebook 对象，我需要将 facebook 元标记放在*show.html.erb*的顶部，如下所示：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# sdff: http://ogp.me/ns/fb/sdff#">
  <meta property="fb:app_id" content="myid" /> 
  <meta property="og:type"   content="sdff:post" /> 
  <meta property="og:url"    content="<%= "http://sdff.herokuapp.com" + post_path(@post) %>" /> 
  <meta property="og:title"  content="Sample" /> 
  <meta property="og:image"  content="https://fbstatic-a.akamaihd.net/images/devsite/attachment_blank.png" /> 
</head> 
```

问题是 facebook[对象调试器](http://developers.facebook.com/tools/debug)将其识别为 a`type:webpage`而不是`type:post`. 我认为这是因为**/layouts/application.html.erb**中已经有默认的 head 标签，如下所示：

```
<head>
  <title>sdff</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head> 
```

我假设这是因为对象调试器特别指出：

*正文中的元标记：您的 . 这可能是因为您的格式错误并且它们在解析树中的位置较低，或者您不小心将 Open Graph 标记放在了错误的位置。无论哪种方式，您都需要在标签可用之前对其进行修复。*

那么我该如何解决这个问题呢？我需要将 facebook 元标记放在我的 中`show.html.erb`，但页面本身已经是整个应用程序布局主体的一部分。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T05:01:56.640

根据您发布的错误消息，我认为您的元标记不在`<head>`应有的范围内。这是使用`content_for`块的好例子。在您的 show.html.erb 视图中，将所需的元标记放入一个`content_for :head`块中。这会保存 html 并允许您将其插入布局中的其他位置。

```
<% content_for :head do %>
  <meta property="fb:app_id" content="myid" /> 
  <meta property="og:type"   content="sdff:post" /> 
  <meta property="og:url"    content="<%= "http://sdff.herokuapp.com" + post_path(@post) %>" /> 
  <meta property="og:title"  content="Sample" /> 
  <meta property="og:image"  content="https://fbstatic-a.akamaihd.net/images/devsite/attachment_blank.png" /> 
<% end %> 
```

然后只需将一个添加`yeild(:head)`到您的应用程序模板。您放置在显示视图中的 html 将插入到应用程序模板中的该位置。我们在这里检查 nil 以便认为收益率是可选的。

```
<head>
  <title>sdff</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= content_for?(:head) ? yield(:head) : '' %>
</head> 
```

# asp.net - 将 doc 文件转换为 pdf 后关闭它

> ID：14929657
> 
> 赞同：0
> 
> 时间：2013-02-18T04:49:23.640
> 
> 标签：asp.net, webforms

我正在将 doc 文件转换为 pdf 文件，但使用我当前的代码，即使在转换后文件似乎也是打开的。我在输出文件夹中看到 pdf 文件，但如果我尝试重新上传，它会告诉我它已在另一个程序中打开（我在任何地方都看不到）。

代码部分错误：

```
if (getExt == ".doc")
{
    Microsoft.Office.Interop.Word.Application appWord = new Microsoft.Office.Interop.Word.Application();
    wordDocument = appWord.Documents.Open(DocumentUNCPath.Text);

    wordDocument.ExportAsFixedFormat(@"c:\temp\DocTo.pdf", WdExportFormat.wdExportFormatPDF);
} 
```

**完整的方法：**

```
private void btnSubmitStep2_Click(object sender, EventArgs e)
{
    string getExt = Path.GetExtension(DocumentUNCPath.Text);
    if (getExt == ".doc")
    {
        Microsoft.Office.Interop.Word.Application appWord = new Microsoft.Office.Interop.Word.Application();
        wordDocument = appWord.Documents.Open(DocumentUNCPath.Text);

        wordDocument.ExportAsFixedFormat(@"c:\temp\DocTo.pdf", WdExportFormat.wdExportFormatPDF);
    }

    // Frame up the record of submission
    using (var dc = new DocMgmtDataContext())
    {
        DocumentLibrary.Document doc = new DocumentLibrary.Document()
        {
            LibraryID = (AssignmentListStep2.SelectedItem as Library).ID,
            OwnedByUserID = (StudentListStep2.SelectedItem as User).ID,
            UploadedByUserID = (StudentListStep2.SelectedItem as User).ID,
            UploadDT = DateTime.UtcNow,
            ID = Guid.NewGuid()
        };

        dc.Documents.InsertOnSubmit(doc);
        dc.SubmitChanges();

        // Copy file into managed storage
        doc.StoragePath = FILESTORELOCATION + doc.ID + ".pdf";
        File.Copy(DocumentUNCPath.Text, doc.StoragePath);

        doc.Pages = CompatiblePdfReader.VerifyAndFixPdfDocument(doc.StoragePath);
        dc.SubmitChanges();
    }

    // Refresh the list of student submissions
    UpdateStudentSubmissionGrid();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:06:54.897

尝试使用 关闭子文件末尾的文档`wordDocument.Close SaveChanges:=wdDoNotSaveChanges`，因为`ExportAsFixedFormat`不会为您关闭文件。

# php - php手动异常示例

> ID：14929660
> 
> 赞同：0
> 
> 时间：2013-02-18T04:49:34.150
> 
> 标签：php, exception, manual, extending

所以我正在阅读关于*扩展异常*的 php 手册并阅读示例代码。我对以下代码的问题是：为什么`var_dump($o)`评估为`null`？是因为类的构造函数`TestException`抛出异常，因此不允许完成对象吗？我几乎可以肯定这就是原因。

不过这里是检查代码：

```
<?php
/**
 * Define a custom exception class
 */
class MyException extends Exception
{
    // Redefine the exception so message isn't optional
       public function __construct($message, $code = 0, Exception $previous = null) {
    // some code

    // make sure everything is assigned properly
    parent::__construct($message, $code, $previous);
}

// custom string representation of object
public function __toString() {
    return __CLASS__ . ": [{$this->code}]: {$this->message}\n";
}

public function customFunction() {
    echo "A custom function for this type of exception\n";
    }
}

/**
 * Create a class to test the exception
 */
class TestException
{
    public $var;

    const THROW_NONE    = 0;
    const THROW_CUSTOM  = 1;
    const THROW_DEFAULT = 2;

    function __construct($avalue = self::THROW_NONE) {

        switch ($avalue) {
            case self::THROW_CUSTOM:
                // throw custom exception
                throw new MyException('1 is an invalid parameter', 5);
                break;

            case self::THROW_DEFAULT:
                // throw default one.
                throw new Exception('2 is not allowed as a parameter', 6);
                break;

            default: 
                // No exception, object will be created.
                $this->var = $avalue;
                break;
        }
    }
}

// Example 1
try {
    $o = new TestException(TestException::THROW_CUSTOM);
} catch (MyException $e) {      // Will be caught
    echo "Caught my exception\n", $e;
    $e->customFunction();
} catch (Exception $e) {        // Skipped
    echo "Caught Default Exception\n", $e;
}

// Continue execution
var_dump($o); // Null
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:58:56.890

[从 PHP 官方网站查看 PHP 异常。](http://php.net/manual/en/language.exceptions.php)

例子：

```
<?php

class MyException extends Exception { }

class Test {
    public function testing() {
        try {
            try {
                throw new MyException('foo!');
            } catch (MyException $e) {
                /* rethrow it */
                throw $e;
            }
        } catch (Exception $e) {
            var_dump($e->getMessage());
        }
    }
}

$foo = new Test;
$foo->testing();

?> 
```

# android - Android - 在编辑文本中为外来字符设置不同的限制

> ID：14929661
> 
> 赞同：1
> 
> 时间：2013-02-18T04:49:37.993
> 
> 标签：android, android-edittext, input-filter

您好我正在尝试使用限制编辑文本，我已经成功地为字母创建了它，但是现在我想为日文字符和中文字符设置不同的限制是否可能？

这是我现在的代码

```
 etComment = new EditText(context);
        LayoutParams lpComment = new LayoutParams(
                (Util.getDisplayWidth(context) * 3) / 5,
                Util.getDisplayHeight(context) * 3 / 10);
        etComment.setLayoutParams(lpComment);
        if (BaseID.user_language == BaseID.LANGUANGE_JP) {
            etComment.setHint(context.getResources().getString(
                    R.string.CommentHint_jp));
        } else if (BaseID.user_language == BaseID.LANGUANGE_EN) {
            etComment.setHint(context.getResources().getString(
                    R.string.CommentHint_en));
        }
        int maxLength = 10;
        InputFilter[] FilterArray = new InputFilter[1];
        FilterArray[0] = new InputFilter.LengthFilter(maxLength);
        etComment.setFilters(FilterArray); 
```

现在字母是 10 我想限制日文和汉字只有 5 我该怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:21:09.573

试试这个东西

`if (BaseID.user_language == BaseID.LANGUANGE_JP) { maxLength = 10; } else if (BaseID.user_language == BaseID.LANGUANGE_EN) { maxLenght = 8; }`

# android - 即使在flex spark中脱离上下文后，如何使视图运行？

> ID：14929667
> 
> 赞同：0
> 
> 时间：2013-02-18T04:50:04.733
> 
> 标签：android, apache-flex, air, adobe, flex-spark

我正在为 android 设计一个在服务器端使用 flex 和 red5 的视频会议应用程序。我有 3 个视图：**聊天视图（文本聊天）-流视图（将显示其他用户流的位置）和我的视图（将显示您自己的相机）**。

现在的问题是，每当我切换视图时，例如从聊天视图到流视图，都不会收到传入的聊天消息。有没有办法解决这个问题。我希望即使在切换到另一个视图后也能显示传入的聊天消息。任何帮助将不胜感激。我附上了一些图片：

首先，我以 [jamie] 身份从我的手机打开应用程序，然后转到显示用户 [clientFromWindows] 流的成员选项卡（即流视图）： ![观点i](../Images/a57c28c27999493c3170a70af43f8255.png)

现在我开始从 [clientFromWindows] 发送消息，它是运行相同应用程序的 android 模拟器：

![在此处输入图像描述](../Images/fa0cf6659f9f70b0cb4d2838a43a2200.png)

现在，在我的手机中，当我回到聊天视图时，即。[jamie] 的聊天视图 [clientFromWindows] 显示的消息未显示。

![在此处输入图像描述](../Images/902980f66a2e3567a93678f36c892340.png)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:43:59.340

为了做你想做的事，你需要有一个控制器、一个表示模型、一个单例，或者“在此处插入你的设计模式” *，它们存在于你的视图之外*。该控制器将包含从服务器获取数据并更新应用程序模型的所有逻辑。

因此，当您从聊天视图转到视频视图时，控制器仍将与服务器通信以接收新的聊天消息。新的聊天消息将被添加到您的应用程序的“聊天模型”中。下次用户访问聊天视图时，可以从模型中呈现新消息。

因为移动设备的资源有限（与台式机/笔记本电脑相比），`View`Flex 移动应用程序中的类在您离开它们时会被丢弃。

我已经简化了一点，您的控制器不一定与服务器通信，您可能会将与后端的通信委托给另一个类。但是为了解释的目的，我忽略了构建 MVC 应用程序时可能遵循的设计模式和/或最佳实践。

# regex - sed 给出的前面的正则表达式无效

> ID：14929668
> 
> 赞同：17
> 
> 时间：2013-02-18T04:50:07.400
> 
> 标签：regex, bash, command-line, sed

我正在并且一直在处理 sed 脚本文件，当我运行它时遇到“无效的前面的正则表达式”错误。以下是整个文件。

我已经对此进行了很多搜索，无论是在这个网站上还是在其他地方。这里提出的许多问题导致需要扩展正则表达式，某些东西被错误地转义。我已经将其定义为扩展表达式，因为它是电子邮件替换所需要的。

```
#!/bin/sed -rf
#/find_this thing/{
#s/ search_for_this/ replace_with_this/
#s/ search_for_this_other_thing/ replace_with_this_other_thing/
#}

#Search and replace #ServerAdmin (with preceding no space) email addresses using a regular expression that has the .com .net and so on domain endings as option so it will find root@localhost and replace it in line with admin's email address.

ServerAdmin/ { 
s/\b[A-Za-z0-9._%-]+@(?:[a-zA-Z0-9-]+\.)+(\.[A-Za-z]]{2,4})?\b/email@example.com/
}
#Enable user's Public HTML directories
/UserDir/ {
s/disable$/enable/ 
s/^#User/User/
}
#Replace the only #ServerName (with preceding no space) followed space and text with Our server ip
/#ServerName */ c\ ServerName server.ip.address.here/ 
```

我从 termal 中将其称为 ./config-apache.sed /etc/httpd/conf/httpd.conf 并返回它。

```
/bin/sed: file ./apache-install.sed line 12: Invalid preceding regular expression 
```

`}`vim 第 12 行的内部被标识为上面的单行`#Enable user's Public HTML directories`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T04:58:50.617

看来 GNU`sed`不喜欢 PCRE 非捕获符号：

```
...(?:...)... 
```

尝试：

```
s/\b[A-Za-z0-9._%-]+@([a-zA-Z0-9-]+\.)+(\.[A-Za-z]]{2,4})?\b/email@example.com/ 
```

GNU`sed`似乎对此没意见。但是，您还有一些工作要做。给定下面的第一行作为输入，输出是第二行：

```
abc def@ghi.jk aaa
abc email@example.comjk aaa 
```

给出这个结果有两个问题：

1.  应该`]]`是一个.`]`
2.  您正在前面的正则表达式中寻找一个尾随点，因此您不希望在域后缀的最后部分出现一个点。

这可以完成工作：

```
s/\b[A-Za-z0-9._%-]+@([a-zA-Z0-9-]+\.)+([A-Za-z]{2,4})?\b/email@example.com/

abc def@ghi.jk aaa
abc email@example.com aaa 
```

# c++ - 实时用户输入回显

> ID：14929670
> 
> 赞同：1
> 
> 时间：2013-02-18T04:50:12.923
> 
> 标签：c++, kernel, user-input, iostream, 68hc12

我正在尝试创建和“优雅”的方式来实时显示用户输入到自定义内核中的内容，对于 68hc12，我正在研究。

```
#include "hc12sci.h"
#include "iomanip.h"

int main()
{
    Hc12Sci hc12sci(sci0,16,36); // serial port, rxlen, txlen
    ostream os(&hc12sci);
    istream is(&hc12sci);

    char cmd[16];
    char c;

    os << "hello world!" << endl;
        while(1)
    {
            for(int i = 0; i<=15; i++)
        {
                  is >> c
              cmd[i] = c;
              os << c << flush;
                  if(c == '\r')          // test for carriage return
                        os << cmd << endl;
             }
             os << endl;
    }                      
    return 0; 
```

我敢肯定，许多问题是它似乎永远不会输入回车 if 语句。我正在 Ubuntu 中构建它，尽管我在 if 语句中做错了什么？如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:12:45.220

我可以看到的第一个问题是您正在检查回车。Ubuntu/Unix 不使用回车作为行尾。相反，它使用换行符：'\n' (0x0A)。

所以尝试将其更改为：

```
if ( c == '\n') 
```

# c++ - exe中未解决的外部符号错误但在dll中没有

> ID：14929673
> 
> 赞同：1
> 
> 时间：2013-02-18T04:50:23.547
> 
> 标签：c++, linker-errors

我有一个库（dll），它公开了一个类及其构造函数，这些构造函数应该在其他模块（exe 和 dll）中使用。我能够从其他库模块而不是 exe 模块实例化该类。我在链接期间收到链接器错误 - 'error LNK2019: unresolved external symbol'。我很困惑为什么在其他库项目而不是 exe 项目中使用时链接成功。有人可以帮我吗？

以下是类声明：

```
class __declspec(dllimport) MyException
{
public:
MyException(unsigned int _line, const char *_file, const char *_function, MyExceptionType _type, const wchar_t* _message = 0, ...);
}; 
```

这是整个错误：错误 LNK2019: 无法解析的外部符号 "__declspec(dllimport) public: __cdecl MyException::MyException(unsigned int,char const *,char const *,enum MyException::MyExceptionType,unsigned short const *,... )" (_ *imp* ??0MyException@@QAA@IPBD0W4MyExceptionType@0@PBGZZ) 在函数 "public: __thiscall MyClassUsesMyException::MyClassUsesMyException(class SomeClass *,int)" (??0MyClassUsesMyException@@QAE@PAVSomeClass@@H@ Z)

MyClassUsesMyException 正在“MyApp.cpp”中实例化。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:29:08.443

**更新：`wchar_t`并不总是原生的**

经过相当长时间的信息交流并从 OP 获得更多信息后，问题很重要：

```
class __declspec(dllimport) MyException
{
public:
    MyException(unsigned int _line, 
        const char *_file, 
        const char *_function, 
        MyExceptionType _type, 
        const wchar_t* _message = 0, // <<== note wchar_t type
        ...);
}; 
```

Visual C++ 可以配置为将其`wchar_t`视为本机类型或不视为本机类型。当不被视为本机类型时，`unsigned short`是指定的宏替换`wchar_t`. 链接器抱怨上述函数无法解析，但真正引起我注意的是未定义符号的尾部：

```
,unsigned short const *,...) 
```

注意`unsigned short`. 这向我暗示编译器`wchar_t`在编译 EXE 时使用的是非本机。我认为可能是 DLL 编译时`wchar_t`配置为本机，因此引入了不同的签名，因此在链接时不匹配。

如果你对这就是问题感到惊讶，想象一下我和 Rakesh 有多惊讶 =P

* * *

**原始答案**

该类应位于具有预处理器逻辑的单个公共标头中，以确定声明的正确导入/导出状态。像这样：

**我的DLL.h**

```
#ifndef MYDLL_H
#define MYDLL_H

// setup an import/export macro based on whether the 
//  DLL implementing this class is being compiled or
//  a client of the DLL is using it. Only the MyDLL.DLL
//  project should define MYDLL_EXPORTS. What it is 
//  defined as is not relevant. *That* it is defined *is*.

#ifdef MYDLL_EXPORTS
#define MYDLL_API __declspec(dllexport)
#else
#define MYDLL_API __declspec(dllimport)
#endif

class MYDLL_API MyException
{
    // your class definition here...
};

#endif 
```

然后，在实现异常的 DLL 项目中（并且**仅**在该项目中），将 MYDLL_EXPORTS 添加到项目配置中的预处理器定义列表中。

# c# - 如何在数据库C#中查找表的主键

> ID：14929674
> 
> 赞同：0
> 
> 时间：2013-02-18T04:50:23.980
> 
> 标签：c#, mysql, datagridview, datatable, dataset

嗨，我正在使用 C# 窗口窗体和 mySQL 数据库，我能够连接到数据库、检索数据并将其显示在 DataGridView 中。

现在，如果用户单击 DataGridView 中的一行并按 Delete 按钮，我希望在数据库中删除该选定行。

问题是我需要知道哪些列是主键，以便使用以下 SQL 查询将其从数据库中删除：

DELETE FROM (selected table) WHERE ( **Primary column's name(s) = value(s) of primary key column(s) of selected row** )

粗体部分是我被困的地方，有人可以帮助我还是知道如何以其他方式删除数据库中的选定行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T05:04:24.823

您可以使用 sql 查询从表中获取主键`SHOW KEYS FROM table WHERE Key_name = 'PRIMARY'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:00:49.210

如果您事先不知道主键列是什么，那么您需要检查表的信息才能找到它。[这个问题](https://stackoverflow.com/questions/893874/mysql-determine-tables-primary-key-dynamically)的答案应该为您提供有关如何使用[此处](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)`SHOW INDEX`记录的 MySQL 调用继续使用 MySQL 的线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:54:08.057

您可以在另一列（隐藏）中分配datagridview中主键的值，以便在调用Delete()函数时，可以获取主键的值：

```
Int64 iRecordId =0;
int selectedIndex = 0;

if (datagridview1.SelectedRows.Count > 0)
{
   selectedIndex = datagridview1.SelectedRows[0].Index;
   iRecordId = Convert.toInt64(datagridview1.Rows[selectedIndex].Cells[0].Value.toString());
   // insert delete commands heere
} 
```

假设第一列是主键。

# vbscript - VB 脚本将文件名从一个位置回显到另一个位置，包括子文件夹

> ID：14929675
> 
> 赞同：0
> 
> 时间：2013-02-18T04:50:23.343
> 
> 标签：vbscript, powershell-2.0

来源：网络位置 UNC 路径 目标：远程服务器并希望在此服务器上运行脚本。

我一直在寻找许多脚本，但无法满足我的确切要求。下面是看起来更接近我的要求的 VBscript，但这不适用于子文件夹，它看起来是特定于几个小时的，我正在寻找特定于多种文件类型的天数。任何帮助深表感谢 ？

提前感谢您帮助我！

我可以接受任何其他脚本，但必须满足我的要求。

==================================================== ====

```
Option Explicit 

On Error Resume Next

Dim fso, FileSet, Path, File, DDiff, Date1, Date2, DestPath

Path = "C:\source"
DestPath = "\\server\destination\" 
'DestPath must end with \
FileSet = GetDirContents(Path) 

For each File in FileSet 
Set File = fso.GetFile(Path & "\" & File)
Date1 = File.DateLastModified 
'.DateCreated if you want 24hrs of life, this example is 24hrs since last written
Date2 = Now()

DDiff = Abs(DateDiff("h", Date1, Date2))

If DDiff >= 168 Then
If Not fso.FileExists(DestPath & File.Name) Then
File.Move DestPath
'wscript.echo File.Name
Else
wscript.echo "Unable to move file [" & File.Name & "]. A file by this name already exists in the target directory."
End If
End If
Next 

Function GetDirContents(FolderPath) 
Dim FileCollection, aTmp(), i 
Set fso = CreateObject("Scripting.FileSystemObject") 
Set FileCollection = fso.GetFolder(FolderPath).Files 

Redim aTmp(FileCollection.count - 1) 
i = -1 

For Each File in FileCollection 
i = i + 1 
aTmp(i) = File.Name 
Next 

GetDirContents = aTmp 
End Function 
```

==================================================== =======================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:06:08.487

您可以使用`DateDiff`带有“d”的函数作为间隔（代表天），替换为“h”（代表小时）。剩下的问题是如何制作这个递归函数，对吧？

MoveByDate "C:\source", "\server\destination\", 7

```
Sub MoveByDate(SrcPath, DestPath, DaysDiff)
    Dim oFSO, oFile, oFolder, oSubFolder, Date1, Date2
    Set oFSO = CreateObject("Scripting.FileSystemObject")
    Set oFolder = oFSO.GetFolder(SrcPath)
    Date1 = Now

    For Each oFile In oFolder.Files
        Date2 = oFile.DateLastModified
        If Abs(DateDiff("d", Date1, Date2)) >= DaysDiff Then
            If Not oFSO.FileExists(DestPath & oFile.Name) Then
                oFile.Move DestPath
            End If
        End If
    Next

    For Each oSubFolder In oFolder.SubFolders
        MoveByDate oSubFolder, DestPath, DaysDiff
    Next
End Sub 
```

# c - 指针的编译问题

> ID：14929678
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:50:38.897
> 
> 标签：c, pointers

我刚刚被介绍给 C 中的指针，并且一直在玩弄它们以尝试更熟悉它们。

有人可以向我解释为什么下面的代码无法编译吗？

```
int *high = (int *)malloc(sizeof(int)),*low = (int *)malloc(sizeof(int));
*high = 100;
*low = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:19:32.123

If you have #included stdlib.h it should compile.

To ensure that your code is correct, replace it with this:

```
#include <stdlib.h>

int *high = malloc(sizeof(int));
int *low  = malloc(sizeof(int));

if(high == NULL || low == NULL)
{
  // no memory, error handling here
}

*high = 100;
*low = 0;

...

free(high);
free(low); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:19:45.890

Wrapping the code like shown below whould make it compile and work as expected:

```
#include <stdlib.h>

int main()
{
  int *high = malloc(sizeof(int)),*low = malloc(sizeof(int));
  *high = 100;
  *low = 0;

  return 0;
} 
```

Anyway, the code lacks error checking on system calls. Always check the return value of system calls, In the case of `malloc()` a value of `NULL` would be returned if memory could not have been allocated as requested. In such case the line

```
*high = 100; 
```

would most likely cause the program to crash, as dereferencing `*NULL` provokes undefined behavior.

* * *

In C it is **not** necessary to cast functions returning a value of `void*`. Even more it is not recommended to do so, as doing so might hide errors, for example if protoyping for the function in question is missing, the error/warning which would be given by the compiler without casting is surpressed if using casting.

# java - Egit / Github - 从合作伙伴那里获取文件

> ID：14929680
> 
> 赞同：1
> 
> 时间：2013-02-18T04:50:52.657
> 
> 标签：java, android, eclipse, github, egit

这可能是一个愚蠢的问题，但经过几次试图做到这一点后，我感到很沮丧。我想使用 github 来托管我的项目，我们是 2 个人从事该项目，目的是分享工作。并互相帮助。

我设法创建了 resepetory，并致力于 master 分支。如果另一个人删除了整个项目，他会得到最新的更新，但我确信这不是它应该工作的方式。

假设我提交了一个新的类文件。我提交了这个文件，别人怎么下载这个文件？我们已经尝试过拉、同步等，但没有任何运气。我们发现给他“我的”最新更新的唯一方法是让他删除所有内容并从头开始制作项目。

我错过了什么？我们如何同步工作空间？所以我可以在打开 Eclipse 时查看并下载他的更改？（我们不在同一个班级工作）。所以我真正想做的就是下载他的最新提交。

编辑：我的解决方案是我的伙伴正在本地 git 工作区的副本中工作。因此，他没有修改本地 repo，而是在 Eclipse 工作区中修改它的副本。因此，当他拉动时，没有任何更新。我也从 Egit 切换到 GitHub 命令行工具，我爱上了。谢谢大家 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:07:06.873

通常使用 GitHub，您所描述的所有内容都可以完美运行，我没有遇到任何类似的问题。

关于 git 的一件事，提交与 SVN 中的提交有点不同。使用 git，您可以使用`push`并`pull`与远程存储库进行交互。

我不确定你说的是什么意思：

> 如果另一个人删除了整个项目，他会得到最新的更新，但我确信这不是它应该工作的方式。

话虽如此，我从未使用过 Egit，我更喜欢坚持使用命令行来满足我所有的 git 需求。我在使用其他软件（Sublime Text 2）时遇到了问题，我必须退出编辑器，然后运行我的所有提交和其他 git 操作。我不知道 Eclipse 与 git 的总体表现如何。

尝试让您的合作伙伴运行`git remote -v`，以确保他正确跟踪回购。另外，您知道他是否为 GitHub 设置了 SSH 密钥，还是您通过 https 发送推送和拉取？

请记住，这很难帮助您，因为我没有坐在您的电脑前。[GitHub 帮助](https://help.github.com/)有一些关于设置 git 和远程存储库的非常好的演练。

另外，我强烈建议您花时间阅读[CodeSchool](http://www.codeschool.com/courses/try-git)对 git 的介绍。如果这是您第一次使用 Git，那么这是最好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T05:12:03.007

还有更复杂的场景，但基本上，您需要将您的提交“推送”到上游，并拉动您的同事的。

克隆回购。通过克隆它，您将保证它有一个“来源”，即 github 远程。您在本地存储库中进行更改，随时提交。当您处于里程碑时，使用 Team > Push 将您的所有提交推送到 github。您的同事将拉动它们，如下所述。

当您尝试推送时，您可能会发现您的同事已经推送了更改，并且 git 不允许您推送，直到您合并。尝试 Team > Pull 它将远程更改合并到您的本地存储库中。如果没有冲突，您现在可以推送。如果存在冲突，请修复它们然后提交。然后推。

这是一个实质性的简化，但可以帮助您入门。要点是，在 git 中，SVN 提交的等价物是两个，也许是三个操作：添加、提交、推送。Git pull 有点类似于 SVN 结账。

花一天时间阅读 git。GitHub 上有很棒的文档。一旦你掌握了它的窍门，你就会爱上它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T05:02:39.500

使用 git 协作项目时，您同时管理本地和远程存储库。当您*提交*时，您只是将更改保存到本地存储库。提交后，您需要进行*推送*以将更改保存到远程存储库。之后，如果您的合作者*拉动*，他将获得您的更改。

# c# - 如何将参数传递给 TypeConverter 派生类

> ID：14929681
> 
> 赞同：8
> 
> 时间：2013-02-18T04:51:00.343
> 
> 标签：c#, .net, typeconverter

我想将一些参数传递给从 TypeConverter 派生的类。请告诉我，我该怎么做？例如，我有这个类：

```
public class DDlExample
{
        [TypeConverter(typeof(ExClassConverter))]
        public int Bounds { get; set; }
}

class ExClassConverter : TypeConverter
{
  public int FirstParam{get;set;}
...
} 
```

我想像这样传递值 FirstParam：

```
public class DDlExample
{
        [TypeConverter(typeof(ExClassConverter), ***FirstParam=2***)]
        public int Bounds { get; set; }
} 
```

可能吗？

看来这个任务没有解决办法。我会尝试重申这个问题。我有一个派生自 TypeConverter 的类，并将其应用于不同的属性以显示不同的值下拉列表。如何定义`ExClassConverter : TypeConverter`要使用适当值填充下拉列表的属性？

```
[AttributeUsage(AttributeTargets.Property,AllowMultiple=true,Inherited=true)]   
public class ParamDesc:Attribute
{
    public ParamDesc(int PD) { DictID = PD; }
    public int DictID { get; set; }
}

public class DDlExample
{
    [ParamDesc(1)]
    [TypeConverter(typeof(ExClassConverter))]
    public int Bounds { get; set; }

    [ParamDes(2)]
    [TypeConverter(typeof(ExClassConverter))]
    public int Rounds { get; set; }
}

class ExClassConverter : TypeConverter
{

private List<string> LSValues1 = new List<string>(new string[] {"first","second","third"});
private List<string> LSValues2 = new List<string>(new string[] {"apple","melon","grapes"});

public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
{
   if (sourceType == typeof(string))
      return true;
    return base.CanConvertFrom(context, sourceType);

}

public override bool CanConvertTo(ITypeDescriptorContext context, Type sourceType)
{            
   if (sourceType == typeof(int))
           return (sourceType == typeof(int)?true:false);
    return base.CanConvertTo(context, sourceType);
}

public override object ConvertTo(ITypeDescriptorContext context,
    CultureInfo culture, object value, Type destType)
{
        if (value is int)
        {          
            return LSValues1[(int)value];
        }
        return base.ConvertTo(context, culture, value, destType);
}
public override object ConvertFrom(ITypeDescriptorContext context,
CultureInfo culture, object value)
{
    if (value is string)
    {
        return LSValues1.IndexOf(value.ToString());
    }
    return base.ConvertFrom(context, culture, value);

}

public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
{
    return true;
}

public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
{
    return true;
}

public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
{
    StandardValuesCollection svc = new StandardValuesCollection(LSValues1);
    return svc;
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:02:10.423

我已经解决了这个任务。我`ITypeDescriptorContext context`在 ConvertTo 和 ConvertFrom 方法中使用过：

```
if (context != null)
{
    AttributeCollection ua = context.PropertyDescriptor.Attributes;                    
    ParamDesc cca = (ParamDesc)ua[typeof(ParamDesc)];    
    if (cca != null)
        System.Console.WriteLine("Attribute value is " + cca.DictID.ToString());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-20T15:28:03.357

老问题，但是...

为了完整起见，似乎是 OP 问题的解决方案是：只需检查调用类型转换器的属性名称。例如，

```
public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
{
    StandardValuesCollection svc;
    if (context.PropertyDescriptor.Name == "Bounds")
        svc = new StandardValuesCollection(LSValues1);
    else if (context.PropertyDescriptor.Name == "Rounds")
        svc = new StandardValuesCollection(LSValues2);
    return svc;
} 
```

此解决方案避免了将 OP 的额外属性应用于属性的需要。

# python - 如何将本地图片的超链接写入openpyxl中的单元格？

> ID：14929683
> 
> 赞同：2
> 
> 时间：2013-02-18T04:51:02.937
> 
> 标签：python, excel, hyperlink, openpyxl

我使用 Python 2.7.3 我需要通过 openpyxl 库将本地图片的超链接写入单元格。

当我需要向网站添加超链接时，我会写如下内容：

从 openpyxl 导入工作簿

```
wb = Workbook()

dest_filename = r'empty_book.xlsx'

ws = wb.worksheets[0]

ws.title = 'Name'

hyperlink to local picture

ws.cell('B1').hyperlink = ('http://pythonhosted.org/openpyxl/api.html')

hyperlink to local picture

ws.cell('B2').hyperlink = ('1.png') # It doesn't work! 

wb.save(filename = dest_filename) 
```

我有3个问题：

1.  我们如何像 VBA 的样式函数那样编写超链接： `ActiveCell.FormulaR1C1 = _ "=HYPERLINK(""http://stackoverflow.com/questions/ask"",""site"")"` 使用 hyherlink 和她的名字
2.  我们如何编写本地图像的超链接？ `ws.cell('B2').hyperlink = ('1.png') # It doesn't work! And I don't now what to do ) Plese, help me )`
3.  我们可以使用 unicode 超链接来图像吗？例如当我使用 `ws.cell('B1').hyperlink = (u'http://pythonhosted.org/openpyxl/api.html') It fail with error! for example we have picture 'russian_language_name.png' and we create hyperlink in exel without any problem. We click to the cell, and then print '=Hyperlink("http://stackoverflow.com/questions/ask";"site_by_russian_language")`

保存文件，解压他。然后我们去他的目录到 xl->worksheets->sheet1.xml 我们看到标题

`<?xml version="1.0" encoding="UTF-8" standalone="true"?>`

接着 ...

`row r="2" x14ac:dyDescent="0.25" spans="2:6">-<c r="B2" t="str" s="1"><f>HYPERLINK("http://stackoverflow.com/questions/ask","site_by_russian_language")</f><v>site_by_russian_language</v></c>`

一切正常 =) Exel 支持 unicode，但是 python 的库 openpyxl 呢？它支持超链接中的 unicode 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:37:42.283

由于文件中的`.xlsx`文件是带有`UTF-8`编码的 XML 文件，因此 Unicode 超链接不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T03:15:31.527

关于问题 2，我认为您需要包含文件链接的完整路径。如果您无法访问 Excel 文件中的文件链接，则是 Excel 的安全策略禁止此类操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-29T07:15:34.363

我回答了一个类似的问题。希望这可以帮助。

好吧，我可以做到这一点。虽然没有直接的方法来建立超链接，但在您的情况下，我们可以这样做。我能够使用以下代码构建到现有文件的超链接。

`wb=openpyxl.Workbook() s = wb.get_sheet_by_name('Sheet') s['B4'].value = '=HYPERLINK("C:\\Users\\Manoj.Waghmare\\Desktop\\script.txt", "newfile")' s['B4'].style = 'Hyperlink' wb.save('trial.xlsx')` 通过将样式属性提及为“超链接”是关键。我拥有的所有其他代码对您来说可能并不重要。否则样式属性将具有“正常”值 奇怪的是，即使没有样式属性，我们工作的超链接也只是缺少样式！当然。虽然很奇怪，但我见过更奇怪的事情。希望这可以帮助。

# cassandra - 无法更新 Cassandra 中的复制因子

> ID：14929685
> 
> 赞同：4
> 
> 时间：2013-02-18T04:51:19.550
> 
> 标签：cassandra, cluster-computing

我正在运行一个具有 3 个节点的 cassandra 集群。keyspace1 配置为运行 NetworkTopologyStrategy，

> ```
> [default@Keyspace1] describe Keyspace1;
>    Keyspace: Keyspace1:
>    Replication Strategy: org.apache.cassandra.locator.NetworkTopologyStrategy
>    Durable Writes: true
>    Options: [datacenter1:1] 
> ```

我尝试通过在 cassandra CLI 中的 Node1 上运行此命令来更新复制因子

> 使用 strategy_options = {datacenter1:3} 更新键空间 Keyspace1；

但是当我再次使用 describe Keyspace1 检查时，我仍然看到选项：[datacenter1:1]，复制因子没有改变。我尝试重新启动 cassandra，尝试在所有节点上进行修复和清理，但仍然没有效果。我错过了什么？

`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:51:55.353

您缺少`[` `]`围绕策略选项的内容。您的更新代码应为：

```
UPDATE KEYSPACE Keyspace1 WITH strategy_options = [{datacenter1:3}]; 
```

如果您需要有关如何通过 CLI 更新 KS 的复制因子的更多详细信息，我建议您查看[Datastax](http://www.datastax.com/docs/0.8/operations/cluster_management#changing-the-replication-factor)文档。

# jquery - 在多个类实例中选择不包含类的元素

> ID：14929687
> 
> 赞同：0
> 
> 时间：2013-02-18T04:51:52.323
> 
> 标签：jquery

我试图删除表中不包含特定类的所有行，但每行至少包含 2 个类

```
 <tbody id='orderlist'>
     <tr class='big selected'><td></td></tr>
     <tr class='big'><td></td></tr>
     </tbody>

     $('#orderlist').not('.selected').fadeOut('slow',function(){
     $(this).remove();
     }); 
```

我希望能够通过将其淡出视图来删除不包含首先选择的类的任何行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:57:43.477

您的链式选择器`.not('.selected')`试图作用于`$('#orderlist')`（将是`tbody`自身）选择的元素，而不是子元素（行）。尝试这样的事情（添加`tr`到您的`orderlist`选择器以获取您的子行`tbody`）：

```
$('#orderlist tr').not('.selected').fadeOut('slow',function(){
    $(this).remove();
}); 
```

小提琴：http: [//jsfiddle.net/WcWex/](http://jsfiddle.net/WcWex/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:57:06.207

您可以使用[filter()](http://api.jquery.com/filter/)并应用条件来过滤掉所需的元素集。

```
$('#orderlist tr').filter(function(){
    if(!$(this).hasClass('selected') && this.className.split(' ').length == 2)
        return $(this);
}).fadeOut('slow').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:57:31.630

尝试这个：

```
$('#orderlist .big').not('.selected').fadeOut('slow',function(){
    $(this).remove();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:57:46.770

使用`.children()`：http: [//jsfiddle.net/UpHcu/](http://jsfiddle.net/UpHcu/)

```
$('#orderlist').children().not('.selected').fadeOut('slow', function () {
    this.remove();
}); 
```

# r - 列结合行操作的最小值（大于 0）

> ID：14929693
> 
> 赞同：3
> 
> 时间：2013-02-18T04:52:54.680
> 
> 标签：r

我试图从矩阵中的列中获取最小值（大于 0），然后使用发生最小值的行号来计算一个值（作为公式）应用于最小值行以下的所有行（已识别之前）。

让我用一个例子来演示：如果我将 x 定义为：

```
x<-rbind(c(0, 0, 0), c(0,0,3), c(0,3,5)) 
```

就是这样`x`：

```
 [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    3
[3,]    0    3    5 
```

那么我想确定第 1 列没有最小值，第 2 列在索引 3 处有最小值，第 3 列在索引 2 处有最小值。

因此，我创建了以下尝试来创建最小值向量：

```
min<-apply(x,2,function (v) min(which(v>0), na.rm = TRUE)) 
```

这给了我一个警告：

```
Warning message:
In min(which(v > 0), na.rm = TRUE) :
  no non-missing arguments to min; returning Inf 
```

（问题1）：我不知道如何避免。

（问题2）：我现在需要取最小值的结果（存在一个）并根据向量min的值计算一个函数的值，以及使用向量min的索引来选择一个值从不同的矩阵`st` 这我玩了一点，没有诉诸循环，我不确定该怎么做。

回到例子，第一个值`min`是`Inf`，所以我的向量`calc.results`得到 0，下一个值是 3，所以我想`min`从矩阵中选择第 2 列 (3) 中的第 3 行，然后使用这个值来计算`st`中第 2 列的结果`calc.results`等。操作完成后`calc.results`看起来像（例如简单性，没有对来自 的值做任何事情`st`）：

```
[1] 0 3 3 
```

然后，我需要通过仅在到达前面标识的行（索引等于 的列）之后减去 的值来应用`calc.results`回矩阵。所有其他行都保持不变。`st``calc.results``min``min``st`

在示例中，最终结果将如下所示：

```
 [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    0    0    2 
```

因为在第 2 列中， 的值为`min`3，第 2 列中的值为 3，仅在第 3 行的第 2`calc.results`列`st`中减去了 3，依此类推（请注意，列被清零的事实是这个例子并不普遍）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:00:39.610

听起来你正在尝试做这样的事情：

```
apply(x, 2, function(y) { y[y > 0] <- (y[y > 0] - min(y[y > 0])); y })
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    0    0    2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:58:08.387

问题(1)

警告是由于您`min`使用的是非数字，即`integer(0)`

```
# try this to see the warning clearly: 
min(integer(0))

# try this to see where you are getting integer(0)
apply(x,2,function (v) which(v>0)) 
```

为避免警告，您可以添加 if 语句，`function(v)`例如：

```
apply(x, 2, function (v) min(ifelse(any(v>0), which(v>0), 0), na.rm = TRUE)) 
```

但是，请记住，这只是一个警告，只要您知道具体是什么原因造成的，就不必太担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:04:27.570

问题（1）：您至少可以识别没有任何最小值的列，然后根据需要删除它们。

```
min <- apply(x,2,function (v) ifelse(max(v)==0, NA , min(which(v>0), na.rm = TRUE))) 
```

# sql - 如果存在空值或空值，如何在sql中设置变量

> ID：14929695
> 
> 赞同：-2
> 
> 时间：2013-02-18T04:53:11.650
> 
> 标签：sql, sql-server, sql-server-2008

```
set val=isnull(FLD380,'Null') 
```

***我需要为 SPACE('') 编写相同的语句。*像这样***

```
 set val=space(FLD380,'Space') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T06:07:10.403

您*特别*要求的是[用户定义的函数](http://msdn.microsoft.com/en-us/library/ms186755.aspx)。请注意，此语法适用于 SQL Server。

```
CREATE FUNCTION IsSpace (
  @check_expression NVARCHAR(max),
  @replacement_value NVARCHAR(max)
)
RETURNS NVARCHAR(MAX)
BEGIN
  IF @check_expression = N''
    RETURN @replacement_value

  RETURN @check_expression
END 
```

可以这样调用：

```
set @val = IsSpace(FLD380, N'Space') 
```

或者，这里是 Explosion Pills 响应的 SQL Server 语法。

```
SET @val =
  CASE
    WHEN FLD380 = '' THEN 'Space'
    ELSE ISNULL(FLD380, 'null')
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:28:45.927

```
SET val= CASE WHEN FLD380 = '' THEN 'Space' ELSE 
(CASE WHEN FLD380 IS NULL THEN 'Null' END) END 
```

[见小提琴](http://sqlfiddle.com/#!3/7d7c6/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:03:02.600

```
SET val = IF(FLD380 = '', 'Space', IFNULL(FLD380, 'Null')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T05:22:45.523

如何使用`COALESCE`

```
SET val = IF(TRIM(FLD380) = '', 'SPACE', COALESCE(FLD380, 'NULL')) 
```

# mysql - 在 qt 中创建表检索的时间

> ID：14929697
> 
> 赞同：0
> 
> 时间：2013-02-18T04:53:17.940
> 
> 标签：mysql, qt

```
QSqlQuery query;
QString querytime="SELECT CREATE_TIME FROM information_schema.tables WHERE TABLE_SCHEMA ='test_150' AND TABLE_NAME ='"+table+"'";
if(query.exec(querytime)){
   cout<<"TIME STAMP>>>>>"<<query.value(0).toString().toStdString()<<endl;
} 
```

我已经使用上面的代码从 QT 中的 MYSQL 检索表的创建时间。但它不起作用。我在 MYSQL 前端尝试了这个查询，它在那里正常工作。这段代码有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:01:51.923

尝试以下操作：

```
QSqlQuery query("SELECT CREATE_TIME FROM information_schema.tables WHERE TABLE_SCHEMA ='test_150' AND TABLE_NAME ='"+table+"'");
while(query.next()){
    cout<<"TIME STAMP>>>>>"<< query.value(0).toTime().toString().toStdString()<<endl;
} 
```

我不确定是什么`CREATE_TIME type`，所以我使用了，`toTime()`但它可能是其他类型，所以如果它不起作用，请尝试`toDateTime()`和`toDate()`.

# xcode - 释放视图控制器的实例

> ID：14929698
> 
> 赞同：0
> 
> 时间：2013-02-18T04:53:17.113
> 
> 标签：xcode, memory-management, uiviewcontroller, delegates

我在 Xcode 中发布 myCameraViewController 时遇到问题。我已经设置了一个委托并将消息从 cameraViewController 发送到我的 UploadView。在我的 UploadView 中，有一个按钮将创建一个 cameraViewController 实例并调用它的 useCamera 方法。use Camera 方法将让用户拍照，一旦用户完成拍照，delegate 会将照片返回给 UploadView。

```
- (void)camButtonClick:(id)sender{
    cameraViewController *myCameraViewController = [[cameraViewController alloc] init];
    myCameraViewController.delegate = self;
    [myCameraViewController useCamera];
    //[myCameraViewController release]; 
} 
```

我的问题是我不确定应该在哪里发布 myCameraView？如果我在 camButtonClick 块中释放它，它将导致 EXC_BAD_ACCESS。我猜是因为发布太早了，因为我们需要等待委托返回才能释放 myCameraViewController。

# node.js - 我应该使用什么？Socket.io 房间还是 Redis pub-sub？

> ID：14929700
> 
> 赞同：38
> 
> 时间：2013-02-18T04:53:32.243
> 
> 标签：node.js, redis, socket.io, publish-subscribe

很简单的问题。我正在使用 nodejs 作为我的后端构建一个实时游戏，我想知道是否有任何可用信息说明哪个更可靠，哪个更有效？我在整个代码中大量使用 Redis 和 Socket.io。所以我想知道我是应该使用 Socket.io 的[Rooms还是使用 redis 的](https://github.com/LearnBoost/socket.io/wiki/Rooms)[pub-sub](http://redis.io/topics/pubsub)会更好？

**更新：** 刚刚意识到您可能希望在 socket.io 房间上使用 redis pub/sub 有一个非常重要的原因。使用 Socket.io 房间，当您发布到侦听器时，（浏览器）客户端接收消息，使用 redis 实际上是（redis~on 服务器）客户端接收消息。出于这个原因，如果您想通知所有（服务器）客户端特定于每个客户端的信息，并且可能在传递给浏览器客户端之前进行一些处理，那么最好使用 redis。使用 redis 你可以触发一个事件来生成每个用户的个人数据，而与 socket.io 一样，你必须一次真正地生成所有用户的唯一数据，然后遍历它们并将他们的个人数据发送给他们，这几乎打败了房间的目的，至少对我来说。

不幸的是，出于我的目的，我现在被 redis 困住了。

**更新 2：**最终开发了一个插件以仅使用 2 个 redis 连接，但仍允许单独的客户端处理，请参见下面的答案....

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-19T22:43:38.380

如果所有客户端都可以直接访问 redis，那么 Redis pub/sub 非常有用。如果您有多个节点服务器，一个可以将消息推送给其他节点。

但是如果您在浏览器中也有客户端，则需要其他东西将数据从服务器推送到客户端，在这种情况下，socket.io 很棒。

现在，如果您将 socket.io 与 Redis 存储一起使用，socket.io 将在后台使用 Redis pub/sub 在服务器之间传播消息，而服务器将向客户端传播消息。

因此，使用配置了 Redis 存储的 socket.io 的 socket.io 房间对您来说可能是最简单的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-27T09:50:02.227

我最终编写了一个节点插件来允许许多 pub-sub 客户端，但只需要 2 个 redis 连接，而不是每个 socketio 连接上的一个新连接，它应该可以正常工作，认为其他人可能会找到它的用途。

这段代码假设你有 socket.io 运行和设置，基本上在这个例子中任意数量的 socket.io 客户端都可以连接，它仍然只使用 2 个 redis 连接，但所有客户端都可以订阅他们自己的频道。在此示例中，所有客户端都会收到一条消息“甜蜜的消息！” 10 秒后。

socket.io 示例（使用 redis pub-sub）：

```
var
    RPubSubFactory = require('rpss.js');

var 
    redOne = redis.createClient(port, host),
    redTwo = redis.createClient(port, host);

var pSCFactory = new RPubSubFactory(redOne);

io.sockets.on('connection', function(socket){
    var cps = pSCFactory.createClient();
    cps.onMessage(function(channel, message){
        socket.emit('message', message);
    });
    io.sockets.on('disconnect', function(socket){
        // Dont actually need to unsub, because end() will cleanup all subs, 
        // but if you need to sometime during the connection lifetime, you can.
        cps.unsubscribe('cool_channel');
        cps.end();
    });
    cps.subscribe('cool_channel')
});

setTimeout(function(){
    redTwo.publish('cool_channel', 'sweet message!');
},10000); 
```

实际插件代码：

```
var RPubSubFactory = function(){

    var 
        len,indx,tarr;
    var
        dbcom = false,
        rPubSubIdCounter = 1,
        clientLookup = {},
        globalSubscriptions = {};

    // public
    this.createClient = function()
    {
        return new RPubSupClient();
    }

    // private
    var constructor = function(tdbcom)
    {
        dbcom = tdbcom;
        dbcom.on("message", incommingMessage);
    }
    var incommingMessage = function(rawchannel, strMessage)
    {
        len = globalSubscriptions[rawchannel].length;
        for(var i=0;i<len;i++){
            //console.log(globalSubscriptions[rawchannel][i]+' incomming on channel '+rawchannel);
            clientLookup[globalSubscriptions[rawchannel][i]]._incommingMessage(rawchannel, strMessage);
        }
    }

    // class
    var RPubSupClient = function()
    {
        var 
            id = -1,
            localSubscriptions = [];

        this.id = -1;
        this._incommingMessage = function(){};

        this.subscribe = function(channel)
        {
            //console.log('client '+id+' subscribing to '+channel);
            if(!(channel in globalSubscriptions)){
                globalSubscriptions[channel] = [id];
                dbcom.subscribe(channel);
            }
            else if(globalSubscriptions[channel].indexOf(id) == -1){
                globalSubscriptions[channel].push(id);
            }
            if(localSubscriptions.indexOf(channel) == -1){
                localSubscriptions.push(channel);
            }
        }
        this.unsubscribe = function(channel)
        {
            //console.log('client '+id+' unsubscribing to '+channel);
            if(channel in globalSubscriptions)
            {
                indx = globalSubscriptions[channel].indexOf(id);
                if(indx != -1){
                    globalSubscriptions[channel].splice(indx, 1);
                    if(globalSubscriptions[channel].length == 0){
                        delete globalSubscriptions[channel];
                        dbcom.unsubscribe(channel);
                    }
                }
            }
            indx = localSubscriptions.indexOf(channel);
            if(indx != -1){
                localSubscriptions.splice(indx, 1);
            }
        }
        this.onMessage = function(msgFn)
        {
            this._incommingMessage = msgFn;
        }
        this.end = function()
        {
            //console.log('end client id = '+id+' closing subscriptions='+localSubscriptions.join(','));
            tarr = localSubscriptions.slice(0);
            len = tarr.length;
            for(var i=0;i<len;i++){
                this.unsubscribe(tarr[i]);
            }
            localSubscriptions = [];
            delete clientLookup[id];
        }        
        var constructor = function(){
            this.id = id = rPubSubIdCounter++;
            clientLookup[id] = this;
            //console.log('new client id = '+id);
        }        
        constructor.apply(this, arguments);
    }    
    constructor.apply(this, arguments);
};

module.exports = RPubSubFactory; 
```

我四处乱转，尽可能地提高效率，但在做了一些不同的速度测试后，我得出结论，这是我能得到的最快速度。

对于最新版本：[https ://github.com/Jezternz/node-redis-pubsub](https://github.com/Jezternz/node-redis-pubsub)

# ocaml - OCaml 无效参数（“等于：抽象值”）

> ID：14929707
> 
> 赞同：4
> 
> 时间：2013-02-18T04:54:18.920
> 
> 标签：ocaml, refs

似乎我无法为 ref 分配抽象值，我不知道该怎么做。

```
open Big_int
let largest = ref zero_big_int;;
let depth = ref zero_big_int;;
let rec big i = (add_int_big_int i zero_big_int)
and collatz = fun num depth ->
  print_endline (string_of_big_int num);
  (if(eq_big_int  (add_int_big_int (-1) num) zero_big_int)then(depth)else(
    if eq_big_int (mod_big_int num (big 2)) zero_big_int then (collatz (div_big_int num (big 2)) (succ_big_int depth)) else (collatz (succ_big_int (mult_int_big_int 3 num)) (succ_big_int depth))))
and euler14 i =
  print_endline (string_of_big_int i);
  (if(lt_big_int i (big 1000000))then (
    let ret = (collatz i unit_big_int) in
    if(ret> !depth)then (largest:=i;depth:=ret; (euler14 (succ_big_int i))) else (euler14 (succ_big_int i))
  ) else (!largest));;
print_endline (string_of_big_int (euler14 (big 2)));; 
```

当我尝试都是 Big_nums 的最大：=i 和深度：=ret 时，代码似乎崩溃了。有没有办法解决？

```
2
2
1
3
3
10
5
16
8
4
2
1
Fatal error: exception Invalid_argument("equal: abstract value") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T05:25:55.097

您不能将 type 的值`Big_int.big_int`与多态的`=`, `>`,进行比较`>=`。相反，您必须为所有包含 a 的类型编写自己的比较函数`Big_int.big_int`，即使它是深度嵌入的。

使用 OCaml 3.12.1 或更高版本，您可以将多态比较函数与`Z.t`外部库[Zarith](http://forge.ocamlcore.org/projects/zarith)中实现的类型值一起使用，这是 Big_int的现代替代品。

与多态操作兼容只是 Zarith 相对于 Big_int 的优势之一。它的内存也更紧凑，速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:04:38.217

失败的事情似乎是多态比较`ret > !depth`，而不是对 ref 的赋值。我假设你可以使用`Big_int.compare_big_int`.

```
# let x = big_int_of_int 3;;
val x : Big_int.big_int = <abstr>
# let y = big_int_of_int 4;;
val y : Big_int.big_int = <abstr>
# x > y;;
Exception: Invalid_argument "equal: abstract value".
# compare_big_int x y;;
- : int = -1
# 
```

（多态比较是 OCaml 中的敏感点之一。）

# oracle - 如何在避免使用 oracle 的唯一约束的同时插入

> ID：14929708
> 
> 赞同：1
> 
> 时间：2013-02-18T04:54:48.213
> 
> 标签：oracle, locking, duplicates

我们有一个聚合一些数据并将结果插入到另一个表中的过程，该表用于高效查询。我们面临的问题是我们现在有多个聚合器几乎同时运行。

我们使用原始记录 id 作为这个新表中的主键 - 一个唯一约束。但是，如果两个聚合进程同时运行，其中一个会因违反唯一约束而出错。

有没有办法指定某种锁定机制，让第二个作家等到第一个作家完成？或者，有没有办法告诉 oracle 忽略该特定行并继续其余的？

不幸的是，将聚合减少到单个过程是不切实际的，因为以下过程依赖于可用数据的最新版本，并且这些过程确实需要扩展。

编辑：

以下是我的 [已编辑] 查询：

```
INSERT INTO
agg_table
SELECT
h.id, h.col, h.col2
FROM history h
JOIN call c
ON  c.callid = h.callid
WHERE
h.id > (SELECT coalesce(max(id),0) FROM agg_table) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:20:41.450

可以运行带有错误日志记录子句的[INSERT语句。](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables004.htm#sthref1779)Oracle 文档中的示例如下：

```
INSERT INTO dw_empl
  SELECT employee_id, first_name, last_name, hire_date, salary, department_id 
  FROM employees
  WHERE hire_date > sysdate - 7
  LOG ERRORS INTO err_empl ('daily_load') REJECT LIMIT 25 
```

或者，您可以尝试使用`[MERGE][2]`语句。您将通过从明细表中进行选择合并到汇总表中。如果未找到匹配项，则您`INSERT`和如果找到匹配项，您将`UPDATE`. 我相信这个解决方案将处理您的并发问题，但您需要对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:21:27.427

看看[FOR UPDATE](http://docs.oracle.com/javadb/10.6.1.0/ref/rrefsqlj31783.html)子句。如果您在更新/插入语句之前在事务中正确编写带有 FOR UPDATE 子句的 SELECT 语句，您将能够“锁定”所需的记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:58:10.277

序列化插入可能是最好的方法，因为没有任何方法可以解决多个插入无法看到每个插入在做什么的问题。

DBMS_Lock 可能是适当的序列化机制。

# c - 什么是执行C程序后的回溯和内存映射

> ID：14929710
> 
> 赞同：5
> 
> 时间：2013-02-18T04:55:06.513
> 
> 标签：c

我在正确运行程序并获得准确结果后遇到以下问题，但我不明白。

```
glibc detected *** ./programa: double free or corruption (out): 0x089300a0 ***

======= Backtrace: =========
/lib/libc.so.6[0x8f8c65]
/lib/libc.so.6(cfree+0x59)[0x8fcc59]
./programa[0x804880a]
/lib/libc.so.6(__libc_start_main+0xdc)[0x8a4ebc]
./programa[0x80483e1]
======= Memory map: ========
00870000-0088b000 r-xp 00000000 08:04 1384259    /lib/ld-2.5.so
0088b000-0088c000 r-xp 0001a000 08:04 1384259    /lib/ld-2.5.so
0088c000-0088d000 rwxp 0001b000 08:04 1384259    /lib/ld-2.5.so
0088f000-009e6000 r-xp 00000000 08:04 1384270    /lib/libc-2.5.so
009e6000-009e8000 r-xp 00156000 08:04 1384270    /lib/libc-2.5.so
009e8000-009e9000 rwxp 00158000 08:04 1384270    /lib/libc-2.5.so
009e9000-009ec000 rwxp 009e9000 00:00 0
00ab3000-00abe000 r-xp 00000000 08:04 1384276    /lib/libgcc_s-4.1.2-20080825.so.1
00abe000-00abf000 rwxp 0000a000 08:04 1384276    /lib/libgcc_s-4.1.2-20080825.so.1
00ddb000-00ddc000 r-xp 00ddb000 00:00 0          [vdso]
08048000-08049000 r-xp 00000000 00:17 8620696    /users/c//programa
08049000-0804a000 rw-p 00000000 00:17 8620696    /users/c/programa
08930000-08951000 rw-p 08930000 00:00 0          [heap]
b7fcd000-b7fcf000 rw-p b7fcd000 00:00 0
b7fd8000-b7fda000 rw-p b7fd8000 00:00 0
bfe6f000-bfe84000 rw-p bffe9000 00:00 0          [stack]

Aborted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:59:58.747

这是一个崩溃。要解决此问题，您可以采用以下方法之一。

使用像[GDB](http://www.gnu.org/software/gdb/)这样的调试器来运行你的程序并使用回溯功能来找出崩溃函数。

或者

双重免费查看您的代码。（可能是您为免费资源编写的代码。因为您提到您正在获得准确的结果。）

或者

在编译程序时使用 `-Xlinker -Map=output.map`选项 with 。`gcc`这将为具有所有功能地址的可执行文件生成一个映射文件。您可以映射错误指令地址或堆栈跟踪以找到导致崩溃的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:59:27.090

这是您的程序中发生的崩溃。原因在第一行中说明`double free or corruption`

由于您的预期输出很好，我的猜测是，当您在最后释放资源时，您在某处的同一内存位置调用 free 两次。

如果不容易找到发生这种情况的位置，请使用 GDB（如 CCoder 建议的那样）或任何其他此类调试器来跟踪它。发生此错误时，它们应该中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:55:39.823

最有可能的问题在于`multiply`指针的分配。这段代码有问题：

```
 multiply = malloc(m * sizeof(int)); /* Should be "int*" and not "int" */
   for (i = 0; i < q; i++)
                   ^ - Allocation was for m in statement above
      multiply[i] = malloc(q * sizeof(int)); 
```

`int`您已经为而不是`int *`为分配了内存`multiply`。
为避免此类错误，最好使用在对 的调用中分配的指针，`malloc`例如`malloc (m * sizeof *multiply)`
Also，正如您所看到的，您已经为元素`malloc`编辑了`m`元素，`multiply`但为 分配了`q`。尝试在分配和释放中更改`q`为。 类似的东西： `m`

```
multiply = malloc(m * sizeof *multiply);
for (i = 0; i < m; i++)
  multiply[i] = malloc(q * sizeof *multiply[i]); 
```

旁注：
的签名`main`应该是`int main(void)`，请注意 in `C`，`main()`与 不同`main(void)`。

希望这可以帮助！

# jquery - Rails 3.2 中的 JQuery 问题

> ID：14929712
> 
> 赞同：0
> 
> 时间：2013-02-18T04:55:17.707
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2

我只是想让 Jquery 与我的 rails 应用程序一起工作。

我想在我的 new.html.erb 文件中放置一些 JQuery，我在 chrome 的控制台中收到以下错误：

```
 Uncaught SyntaxError: Unexpected token ( 
```

这是我的 new.html.erb：

```
<% provide(:title, "New Stat") %>
<% provide(:heading, "Welcome, #{ current_user.email }!") %>

<div id="stats-page-container">
  <div id="stat-form" >
    <div id="stat-form-inner"> 

    <% render 'layouts/init_stats_form' %> 
    <% render 'layouts/stat_input_form' %>

    <script>
       $.('#stat-form-inner').addClass('test-class');
    </script>

   </div>
 </div>
  <%= render 'layouts/progress' %> 
</div> 
```

错误与 JQuery 代码一致：

```
$.('#stat-form-inner').addClass('test-class'); 
```

这是我的 application.html.erb 文件：

```
<html>
<head>
  <title><%= full_title(yield(:title)) %></title>    
  <h1> <%= yield(:heading) %> </h1>  
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= csrf_meta_tags %>
</head>
<body>
  <% flash.each do |key, value| %>
    <%= content_tag(:div, value, class: "alert alert-#{key}")%>
  <% end %>

  <%= render 'layouts/header' %>

  <% if user_signed_in? %>
    <%= render 'layouts/subheader' %>
  <% end %>

  <%= yield %>
  <%= debug(params) if Rails.env.development? %>

  <%= javascript_include_tag 'application' %>  
</body>
</html> 
```

并且具有该 id stat-form-inner 的元素没有添加该类。

我的 application.js 文件中有这个：

```
// = require jquery
// = require jquery_ujs
// = require_tree . 
```

我也加了

```
<%= javascript_include_tag 'application' %> 
```

直接在结束正文标签上方。

我还缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:31:33.013

1.  确保正确加载 JQuery。为此，删除/注释 $('#stat-form-inner').addClass('test-class') 并在 FF/chrome 中打开应用程序，然后在 Firebug 控制台中键入 $ 或 jQuery。如果它打印 function()，则 jQuery 已正确加载。如果它抛出一个错误**Reference Error, jQuery is not defined**，则没有加载 JQuery 框架。

2.  如果 JQuery 加载正确，请尝试以下建议

    将此语句**<%= javascript_include_tag 'application' %>**放在 head 标记内或视图/布局文件的顶部。

    尝试使用下面的代码段将类添加到元素，最好是在页面末尾（即使在结束 HTML 标记之后也可以放置）

    ```
    <script type="text/javascript">
       $(document).ready(function() {
        $('#stat-form-inner').addClass('test-class');
       });
    </script> 
    ```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:25:38.893

将你的脚本放在文件夹`app/assets/javascript`中，确保使用`$("...")`，而不是`$.()`.

欢迎来到 Rails！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:24:49.163

您正在结束正文标记上方添加 javascript_include_tag。所以这意味着你的脚本是在页面加载 jquery 之前执行的。将 javascript_include_tag 调用移动到 head 标签，它应该可以工作。

# .htaccess - 使用 PHP 上传大文件

> ID：14929714
> 
> 赞同：-1
> 
> 时间：2013-02-18T04:55:24.617
> 
> 标签：.htaccess, file-upload, php

我正在处理 PHP 文件上传。首先，我尝试使用没有任何上传器（uploadify）等的 HTML/PHP 代码。

HTML 代码

```
<form method="post" action="" enctype="multipart/form-data">
    <label for="upload">Select : </label>
    <input type="file" name="file_upload" id="upload" multiple="multiple" />
    <!-- 1024 x 1024 x 1024 -->
    <input type="hidden" name="MAX_FILE_SIZE" value="1073741824" />
    <input type="submit" name="fsubmit" id="fsubmit" value="Upload" />
</form> 
```

PHP 代码

```
if (isset($_FILES['file_upload']) && $_FILES['file_upload']['error'] == 0) {
    move_uploaded_file($_FILES[$field_name]['tmp_name'], '../somepath/.../' . $_FILES['file_upload']['name');
} else {
    echo $_FILES['file_upload']['error'];
} 
```

它正在上传小于 8Mb 的文件。为了覆盖 PHP 默认值，我更改`.htaccess`为此并重新启动 apache。

```
php_value upload_max_filesize 1024M # also tried "1024M"
php_value post_max_size 1024M # also tried "1024M"
php_value max_execution_time 3600
php_value max_input_time 3600 
```

但没有运气，它总是需要 default `8M`。我也尝试像这样动态更改 PHP 代码的设置

```
ini_set('upload_max_filesize', '1024M');
ini_set('post_max_size', '1024M');
ini_set('max_execution_time', '600');
ini_set('max_input_time', '600');
ini_set('memory_limit', -1); // no memory limit 
```

`echo ini_get('post_max_size')`当我显示时，这也没有效果`8M`。错误代码返回为 2。显示 PHP 说

```
UPLOAD_ERR_FORM_SIZE

Value: 2; The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form. 
```

现在我的问题是为什么它不能覆盖 from`.htacess`或 PHP 代码？**注意**我在 VPS 服务器上。当我将 8M 更改为`xM`手动时，它可以工作。希望我清楚，提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:05:04.667

似乎您错过了在站点目录的 apache 配置中添加“AllowOverride All”...因为这个您在 htaccess 中的值没有被覆盖..

检查这些链接

[http://forum.owncloud.org/viewtopic.php?f=8&t=1809](http://forum.owncloud.org/viewtopic.php?f=8&t=1809)

[http://blog.triphp.com/lessons/htaccess/allow-override](http://blog.triphp.com/lessons/htaccess/allow-override)

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:58:38.757

如果你直接用这样的东西编辑 php.ini：

```
php_value upload_max_filesize 750M
php_value post_max_size 750M 
```

它有效，有什么问题？您无法以其他方式做到这一点，但是这种方式有什么问题？

# zend-framework - 尽管付出了所有努力，Jplayer 还是没有在 Firefox 中玩

> ID：14929715
> 
> 赞同：0
> 
> 时间：2013-02-18T04:55:29.540
> 
> 标签：zend-framework, jplayer

嗨，伙计们，我已经尝试了几乎所有关于这个问题的方法，并尝试了这个论坛上的所有解决方案，但仍然无法找出这个问题的解决方案。尽管提供了正确的 swf 路径，但我无法从 Jplayer 播放 mp3 文件。文件在 chrome 和 IE 中播放，但不是 firefox

```
 <script>

    $(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
    ready: function () {
    $(this).jPlayer("setMedia", {
            mp3:"<?php echo Zend_Registry::getInstance()->constants->img_profilepath .       $this->acc->Username . '/' . Zend_Registry::getInstance()->constants->img_albumpath . '/' . $this->album->Id . '/' . Zend_Registry::getInstance()->constants->audio_path . '/' . $this->playsong->Id . $this->playsong->Audio; ?>"
        }).jPlayer("play");
    },
    swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
    solution:"html,flash",
    supplied: "mp3",
    cssSelectorAncestor: ""

});
document.getElementById("track-title").innerHTML='<h6 class="subheader"><marquee><?php     echo$this->playsong->Title;?></marquee></h6>';

 });
 </script> 
```

这是播放媒体时执行的脚本

```
function play(url,title,songid)
{

    $("#jquery_jplayer_1").jPlayer("setMedia", 
    { 
    mp3: url

    }); 
$("#jquery_jplayer_1").jPlayer("play", 0);
document.getElementById("track-title").innerHTML='<h6 class="subheader"><marquee>'+title+'</marquee></h6>';

$.post('/audioplayer/played',
    {'songid' : songid});

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:05:57.760

谢谢你们，disqus插件导致了这个问题。当我删除它时，播放器开始正常工作。再次感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:47:22.150

请注意以下行：

```
swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf", 
```

我以前见过人们这样做，这是有问题的。这就是我的建议

*   下载 swf 文件
*   把它放在你有 jPlayer 的 javascript 的目录中
*   更改 swfPath 以指向该位置 - 不指定 swf 文件的名称

因此，例如，假设您有一个像 /js/jplayer 这样的目录 - 将 swf 下载到那里......然后更改您的代码：

```
swfPath: "/js/jplayer" 
```

# php - 如何在 modrewrite 中不包含某些 URL？

> ID：14929716
> 
> 赞同：0
> 
> 时间：2013-02-18T04:56:02.697
> 
> 标签：php, .htaccess

到目前为止，我的 .htaccess 是这样的：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /school
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?page=$1
RewriteRule ^([a-zA-Z0-9]+)$ index.php?page=$1

ErrorDocument 404 /school/index.php?page=404 
```

但是，我需要`mysite.com/school/admin`像普通 url 一样通过，进入子目录。我已经看过并用谷歌搜索过，但一直没能找到它。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:10:35.193

尝试类似的东西，

```
RewriteRule ^(admin)($|/) - [L] 
```

在您的其他 RewriteRules 之前，因为这将在该行结束重写过程。

# string - 如果单元格中的字符串不同，excel公式可以放置不同的值

> ID：14929723
> 
> 赞同：0
> 
> 时间：2013-02-18T04:56:46.660
> 
> 标签：string, excel, search, partial

我在日常笔记中编码了单词

这些就像日记条目，末尾有编码......

```
I took some advil today,tired=.5,headache=.75, etc  
rode a bike for 3 hours,tired=.75,headache=.75, etc 
```

我可以编写一个公式来搜索短语tired=.5 或tired=.75 并将0.5 或0.75 放入单元格中吗？级别 0.25、.5、.75 和 1 只有 4 种可能性。如果它没有找到累的语句，它应该返回 0。这适用于绝对短语匹配。

```
=IF(A1="tired=.75",.75),IF(A1="tired=.5",.5),IF(A1="tired=.25",.25) 
```

但我不确定如何使用搜索来做同样的事情。

这是我使用搜索失败的尝试。

```
=IF(ISNUMBER(SEARCH("tired=.75",B1484)),0.75,0),IF(ISNUMBER(SEARCH("tired=.25",B1484)),0.25,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:45:38.323

我认为这会做到：

```
=VALUE(MID(A1,SEARCH("tired=",A1)+6,FIND(",",(MID(A1,SEARCH("tired=",A1),12)))-6-1)) 
```

没有理由使用 IF 语句，只需 FIND 并直接转换文本。我在这里混合使用 FIND 和 SEARCH，您可以根据需要使用一个或两个（FIND 区分大小写，SEARCH 不区分）。

# javascript - 如何在 ASP.NET 页面和 javascript 之间连接

> ID：14929726
> 
> 赞同：0
> 
> 时间：2013-02-18T04:57:24.063
> 
> 标签：javascript, asp.net

我正在尝试将当前时间放在 ASP.NET 页面上。如何从 Javascript 获取控件 ID？我正在使用 C# ASP.NET

在我的表格上

```
<body onload="updateClock(); setInterval('updateClock()', 1000 )">
    <form id="form1" runat="server" >
       <span id="clock">&nbsp;</span>
   </form>
</body> 
```

Javascript 函数

```
function updateClock ( )
{
   document.getElementById("clock").firstChild.nodeValue = currentTimeString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:09:41.373

试试这个：

```
<script type="text/javascript">
   function ShowTime() {
   var dt = new Date();
   document.getElementById("<%= TextBox1.ClientID %>").value = dt.toLocaleTimeString();
   window.setTimeout("ShowTime()", 1000);
 }  
</script>

<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

<script type="text/javascript">
    // a startup script to put everything in motion
    window.setTimeout("ShowTime()", 1000);
</script> 
```

***如果您使用的是普通的 Web 表单，那么它也可以在 Body onload 事件中调用。如果您使用 MasterPage，则可以在呈现所有控件后最后在 ContentTemplate 中调用它。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:05:53.403

您可以直接使用 JavaScript 在页面上显示当前时间。

这是链接：- [http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_clock](http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_clock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:07:09.440

像这样写函数

```
 function updateClock ( )
 {
   document.getElementById("clock").innerHTML = currentTimeString;
 } 
```

# c# - 如何在特定字符之前获取字符串的内容？

> ID：14929728
> 
> 赞同：-4
> 
> 时间：2013-02-18T04:57:32.090
> 
> 标签：c#

我想从字符串中的某个字符中获取以前的字符。例如：myString = "26+"，所以我想得到不带 + 的 26。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:02:49.397

使用[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)和[IndexOf](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)。

```
 string str =  "26+";
 string requiredString = str.Substring(0, str.IndexOf('+')); 
```

`strings`在 C# 中是不可变的，您必须将结果分配给字符串`itself`或某个`other`字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:59:58.210

函数 String.Substring 将满足您的需求。

```
yourString.Substring(0, keepCharactersBeforeHere); 
```

# events - wxPython 鼠标进入/离开事件方法在 Linux 上不起作用

> ID：14929733
> 
> 赞同：2
> 
> 时间：2013-02-18T04:57:49.773
> 
> 标签：events, wxpython, mouse, bind

我正在尝试提供一个需要悬停才能正常工作的自定义按钮类。因此，我正在使用 StaticBitmap 并对其进行扩展。但是我发现 Windows 和 Linux 之间使用相同的代码在两者之间存在差异。以下简单的小示例在 Linux 中无法正常工作，但在 Windows 中可以正常工作：

```
import wx
class MyForm(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Test")
        panel = wx.Panel(self, wx.ID_ANY, size=(200,100))
        panel.SetBackgroundColour("Black")

        # create a normal bitmap button
        bitmap = wx.Bitmap("images/power.png", wx.BITMAP_TYPE_ANY)
        self.image1 = wx.StaticBitmap(panel, bitmap=bitmap, size=bitmap.GetSize())
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.image1)
        panel.SetSizer(sizer)

        # This works on Windows, but not on Linux
        #self.image1.Bind(wx.EVT_ENTER_WINDOW, self.OnHover)
        #self.image1.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveHover)

        # This (used by itself) gets events for both Linux/Win, but 
        # doesn't find e.Entering() or e.Leaving() on Linux!
        self.image1.Bind(wx.EVT_MOUSE_EVENTS, self.OnMouseEvents)

    def OnHover(self, e):
        print "Hover"

    def OnLeaveHover(self,e):
        print "Leaving Hover"

    def OnMouseEvents(self,e):
        print "Mouse event"
        #print dir(e)
        if e.Entering():
            print "Hover"
        elif e.Leaving():
            print "Leaving Hover"
        else:
            e.Skip()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

这是一个已知的问题？是否有其他方法可以绑定事件以使鼠标悬停/悬停操作在 Linux 中正常工作？

此外，`self.Bind()`这里没有在 Linux 或 Windows 上工作的形式。为什么？IE：

```
self.Bind(wx.EVT_ENTER_WINDOW, self.OnHover, self.image1)
self.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveHover, self.image1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T14:06:37.583

您应该将**wx.EVT_ENTER_WINDOW/wx.EVT_LEAVE_WINDOW**事件绑定到**self.panel**。这样可行。

**wx.EVT_ENTER_WINDOW/wx.EVT_LEAVE_WINDOW**不是**wx.CommandEvent**类的子类。它不会被扔到父窗口来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:23:21.467

嗯......，我只能告诉你我在 Ubuntu 12.04 中使用你的代码时的体验

1）我的图片永远不会出现（即灰色窗口仅此而已）

2）当将 EVT_ENTER/LEAVE_WINDOW 绑定到 self 而不是 image1（见下文）时，它可以工作

```
# This now works on Linux
    #self.Bind(wx.EVT_ENTER_WINDOW, self.OnHover)
    #self.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveHover) 
```

我希望这以某种形式对您有所帮助。另外我想补充一点，不幸的是，我在 wxpython 的跨平台兼容性方面取得了许多糟糕的体验。我非常喜欢这个库，但是一旦它深入到更晦涩的小部件中，Windows 和 Linux 之间的行为可能会大不相同。

我记得尝试使用 MPlayerCtrl 一次，对于 Windows 中的相同方法，它会返回 0，而在 Linux 中它会返回 -1（不介意它到底是哪种方法，一旦我注意到它，该项目就被丢弃了）

也许，这是另一种奇怪的行为……

* * *

又想了一些。

您可以将事件绑定到显示它的小部件，例如您的面板，而不是将事件绑定到图片。

```
 self.panel = wx.Panel(self, wx.ID_ANY, size=(200,100))
    self.panel.SetBackgroundColour("Black")

    ...

    #self.panel.Bind(wx.EVT_ENTER_WINDOW, self.OnHover)
    #self.pane.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveHover) 
```

# android - Android如何从有效的JSON数据中获取`pageid`和`title``ns`键？

> ID：14929734
> 
> 赞同：0
> 
> 时间：2013-02-18T04:57:54.443
> 
> 标签：android, json

这是我的有效 JSON 数据

```
 {
    "query": {
       "pages": {
          "8691": {
             "pageid": 8691,
             "ns": 0,
             "title": "d"
           }
       }
    }
} 
```

这是我的数据如何获取`pageid`和`title`值。

`EDIT:`所以我得到了一个 JSONObject `pages`，我想从中获取 JSONObjects `pages`，但问题是它们的名字每次都不一样。所以我不能只做 json.getJSONObject("8691");。所以有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:02:51.850

您可以解析当前的 json 字符串以获取`pageid`和`title`：

```
 JSONObject json =new JSONObject("json string");

//get query json object
JSONObject jsonquery =json.getJSONObject("query");

//get pages json object
JSONObject jsonpages =jsonquery.getJSONObject("pages");

//get names for jsonpages
JSONArray namejsonarray = jsonpages.names();

// now get json object from jsonpages
JSONObject jsonnew =jsonpages.getJSONObject(namejsonarray.get(0));

//get pageid from jsonnew json object
String str_pageid =jsonnew.getString("pageid");

//get title from jsonnew json object
String str_title =jsonnew.getString("title"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:09:15.737

```
jsonString="  {
    "query": {
       "pages": {
          "8691": {
             "pageid": 8691,
             "ns": 0,
             "title": "d"
           }
       }
    }
}";

JSONObject json = new JSONObject(jsonString);

JSONObject json_query = json.getJSONObject("query");
JSONObject json_pages = json_query.getJSONObject("pages");
JSONArray pagesjsonarray = json_pages.names();
JSONObject jsonobject =json_pages.getJSONObject(pagesjsonarray.get(0));

 jsonobject .get("pageid");// it will return 8691
 jsonobject .get("title");// it will return d 
```

检查这个链接[看看这个](http://developer.android.com/reference/org/json/JSONObject.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T05:10:40.047

你可以尝试这样的事情：

```
 JSONObject mainJson = new JSONObject("{\"query\": {\"pages\": {\"8691\": {\"pageid\": 8691,\"ns\": 0,\"title\": \"d\"}}}}");
        JSONObject jsonOnb = mainJson.getJSONObject("query").getJSONObject("pages") ;
        JSONObject pagesObj = jsonOnb.getJSONObject(jsonOnb.names().getString(0));
        System.out.println("pageid : " + pagesObj.get("pageid"));
        System.out.println("title : " + pagesObj.get("title")); 
```

由于您的 pageId 是动态的，因此您可以获取 JSONObject 中第一个索引对象的名称

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T05:21:49.350

假设您已经被`JSONObject`调用`pages`：

```
final JSONObject pages = ...;
final JSONArray names = pages.names();

if (names != null && names.length() > 0) {
    for (int i = 0; i < names.length(); i++) {
        final String name = names.getString(i);
        final JSONObject page = pages.optJSONObject(name);

        if (page != null) {
            final String id = page.getString("pageid");
            final String ns = page.getString("ns");
            final String title = page.getString("title");

            System.out.println("Id " + id);
            System.out.println("ns " + ns);
            System.out.println("title " + title);
        }
    }
} 
```

# java - 在 Java 中使用带有字符串和整数的 HashMap 时遇到问题

> ID：14929743
> 
> 赞同：1
> 
> 时间：2013-02-18T04:58:53.927
> 
> 标签：java, string, hashmap

我正在研究一个涉及字符串的非常常见的 Java 问题的解决方案。我想写一个方法来查看一个字符串是否是另一个的排列（字谜）。

我的解决方案是这样的：我正在编写一个需要两个字符串的方法。我遍历一个 String 并将找到的字符放入 HashMap 中，其中键是字母，值是该字母的出现次数，作为 int。一旦我完成了第一个字符串的迭代，我将迭代第二个字符串并递减在同一个 HashMap 中找到的每个字符的值。

一旦键达到零，我就从 HashMap 中完全删除键/值对。一旦我完成了对第二个字符串的迭代，我就只检查 HashMap 是否为空。如果是，那么这两个字符串是彼此的排列/字谜，否则该方法返回 false。

我的方法如下：

```
public boolean checkPermutation (String stringA, String stringB) {

        if (stringA.length() != stringB.length()) {

            return false;

        }

        else {

        HashMap alpha = new HashMap();

        for (int i = 0; i < stringA.length(); i++) {

            if (!alpha.containsKey(stringA.charAt(i))) {

                alpha.put(stringA.charAt(i), 0);
            }

            else {

                Integer value = (Integer) alpha.get(stringA.charAt(i));
                int newValue = value.intValue();
                alpha.put(stringA.charAt(i), newValue++);

            }

        }

        for (int j = 0; j < stringB.length(); j++) {

            if (alpha.containsKey(stringB.charAt(j))) {

                Integer value = (Integer) alpha.get(stringA.charAt(j));
                int newValue = value.intValue();//null pointer exception here

                if (newValue > 1) {

                    alpha.put(stringB.charAt(j), newValue--);

                }

                else {

                    alpha.remove(stringB.charAt(j));

                }

            }

        }

        if (alpha.isEmpty())
            return true;

        else
            return false;

        }
    } 
```

我的问题是我的解决方案是区分大小写的（即如果我输入“Hello”和“oellH”，我会得到一个空指针异常）。我想让这个解决方案不区分大小写，并弄清楚为什么我得到一个空指针异常。谁能看到我做错了什么？

作为一个小的后续问题，尽管有两个 for 循环，但这种类型的解决方案是否为 O(n)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:09:45.160

```
Integer value = (Integer) alpha.get(stringA.charAt(j)); 
```

尝试将 stringA 更改为 stringB。

```
Integer value = (Integer) alpha.get(stringB.charAt(j)); 
```

因为如果您提供不同的字符串，其中没有相同的字符，则该值将为空，并且它将通过 NPE。

将两个字符串都更改为小写或大写。

```
stringA= stringA.toLowercase();
stringB= stringB.toLowercase(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:24:01.097

抛出空指针异常是因为您正在检查 hashmap 中 stringB 的 char，然后提取 stringA 的值，此时可能会从 hashmap 中删除该特定值，从而引发空指针错误。

如果你仔细调试你的代码

```
if (alpha.containsKey(stringB.charAt(j))) {
    Integer value = (Integer) alpha.get(stringA.charAt(j));
 ///Your code
} 
```

将其更改为

```
if (alpha.containsKey(stringB.charAt(j))) {
    Integer value = (Integer) alpha.get(stringB.charAt(j));
///Your code
} 
```

对于您的其他问题，使其不区分大小写，在开始操作之前将字符串都设为小写或大写

```
stringA = stringA.toLowerCase();
stringB = stringB.toLowerCase(); 
```

# opencv - 使用轮廓分析 blob 的混淆

> ID：14929746
> 
> 赞同：0
> 
> 时间：2013-02-18T04:58:58.270
> 
> 标签：opencv

我想分析使用轮廓接收到的斑点。但是，我遇到了一个小问题，在使用以下代码之前和之后分析 blob 有什么区别？

```
for(unsigned int i = 0; i < rects3.size(); i++) {
    Scalar color = Scalar(255,255,255);
    drawContours( drawing3, contours3, i, color, CV_FILLED, 8);
} 
```

在使用上述之前，只有一些边界线，使用代码后我们可以看到白色斑点。附上它的例子。

![在此处输入图像描述](../Images/cb32607b0a0b4a69b4a7a096fdbcb74a.png)

![在此处输入图像描述](../Images/0f3a803a30e9a45108075722946cf0c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:33:11.857

**您想遍历可能的 blob，然后对其进行分析（面积、周长等）。**

您的轮廓位于称为 rects3 的向量中。

```
// iterating trough
for(unsigned int i = 0; i < rects3.size(); i++) {
    // get the bounding box of one contour
    Rect rect = boundingRect(rects3[i]);

    //area
    double area = contourArea(rects3[i]);

    //perimiter
    double perimiter = arcLength(rects3[i], true);

} 
```

见[http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html)

# selenium - 如何在 Selenium IDE 中查找按钮是否被禁用

> ID：14929747
> 
> 赞同：15
> 
> 时间：2013-02-18T04:59:04.187
> 
> 标签：selenium, selenium-webdriver, selenium-ide

我想检查按钮是否被禁用`selenium IDE`但我不能。我试过下面的代码，但它不起作用。有没有其他方法可以找到按钮是否被禁用...？ `<tr><td>assertElementPresent</td><td>
//button[contains(text(), 'Save')]</td><td>/td></tr>`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-18T07:14:39.857

在网络驱动程序中。有一个方法 isEnabled 如果元素被启用则返回 true，否则返回 false。

```
driver.findElement(By.id("elementID")).isEnabled(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-18T11:34:44.380

在这种情况下，您可以使用 VerifyNotEditable 检查您的元素、按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T09:55:34.017

可以通过多种方式禁用按钮...因此您需要考虑这一点，但一个简单的解决方案是`assertAttribute`使用属性的命令`disabled`。

这将确保元素具有`disabled`值集，这是禁用元素的常用方法，**但不是唯一方法**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-29T18:54:01.237

3年后......我正在使用Selenium IDE测试DOM按钮是否已被禁用：

```
Command: assert element present
Target: xpath=//button[@disabled] 
```

现在，我也有一个按钮的 id，所以我将它包含在方括号中以确保我正在“查看”正确的按钮。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-08T11:26:24.257

我通过以下方式得到了答案。我通过使用“window.document.getElementById('requiredId').className”获取所有样式类，并通过以下表达式搜索所需的禁用样式类。

```
|assertExpression | javascript{storedVars['classname'].search("disabled-style-cl‌​ass") == -1} | false | 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T05:21:16.800

您可以使用`assertVisible`命令检查元素可见性。

**代码：**

`Command =`assertVisible
`Target =`定位器值

`true`如果指定元素可见则返回，否则返回 false

确定指定元素是否可见。通过将 CSS 的“visibility”属性设置为“hidden”或将“display”属性设置为“none”，可以将元素呈现为不可见，无论是元素本身还是其祖先。如果元素不存在，此方法将失败。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-09T11:12:28.157

而不是 is_enable 使用 get_property ：

```
element = driver.find_element_by_name("element_name")
prop = element.get_property('disabled') 
```

# vb.net - vb.net 和水晶报表打印标签（如果存在）

> ID：14929752
> 
> 赞同：0
> 
> 时间：2013-02-18T04:59:30.250
> 
> 标签：vb.net, crystal-reports

我正在使用 vb.net 和水晶报表进行打印。我想要做的是，如果该项目与数据库一起存在，那么标签和值将显示在水晶报表打印中。有可能的？谁能给出如何做到这一点的想法。

提前致谢

提尔索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:13:30.287

在您的报告中为这些字段添加一个部分，并在 supress 中编写公式以显示或隐藏此部分

```
ISNULL({tablename.fieldname}) 
```

# android - 意图——转移一个按钮标签？

> ID：14929753
> 
> 赞同：0
> 
> 时间：2013-02-18T04:59:31.930
> 
> 标签：android, android-intent, android-button

我的一个布局中有一个无边框按钮。单击它时，我希望意图传输按钮的标签及其包含的文本。我很难做到这一点。

这是单击按钮时我所拥有的：

```
public void openGoalWeek (View view) {
    Intent intent = new Intent(this, ViewGoal.class);
    Button button = (Button) findViewById(R.id.week_goal);
    Bundle bundle = new Bundle();
    bundle.putString(EXTRA_MESSAGE, button.getText().toString());
    bundle.putString(EXTRA_TAG, button.getTag().toString());
    intent.putExtras(bundle);
    startActivity(intent);
} 
```

这是我在`ViewGoal`课堂上的内容：

```
public class ViewGoal extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_view_goal);

        // make sure running on honeycomb or higher for actionbar API
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
        // get the message from the intent
        Intent intent = getIntent();
        String message = intent.getBundleExtra(MainActivity.EXTRA_MESSAGE).toString();
        String tag = intent.getBundleExtra(MainActivity.EXTRA_TAG).toString();

        String text = "null";

        if (tag == "year_tag") {
            DatabaseHandler db = new DatabaseHandler(this);
            Goal goal = db.getYearGoal(message);
            text = goal._title + "\n" + goal._description;
        }

        if (tag == "month_tag") {
            DatabaseHandler db = new DatabaseHandler(this);
            MonthGoal goal = db.getMonthGoal(message);
            text = goal._title + "\n" + goal._description;
        }

        if (tag == "week_tag") {
            DatabaseHandler db = new DatabaseHandler(this);
            WeekGoal goal = db.getWeekGoal(message);
            text = goal._title + "\n" + goal._description;
        }

        // create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(10);
        textView.setText(text);

        // display the content
        setContentView(textView);
    }
} 
```

它向我抛出了一个错误，我不知道为什么。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:11:36.847

你为什么不这样做，只是把你的额外而不是使用捆绑：

```
...
Intent intent = new Intent(this, ViewGoal.class);
intent.putExtra( EXTRA_MESSAGE, button.getText().toString());
intent.putExtra( EXTRA_TAG, button.getTag().toString());
.... 
```

稍后在其他活动中：

```
....
// get the message from the intent
Intent intent = getIntent();
String id   = intent.getStringExtra(EXTRA_MESSAGE);
String name = intent.getStringExtra(EXTRA_TAG);
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:14:21.260

在 onClick 按钮中，而不是这个使用`classname.this` 了我的一些错误被这个删除了。试试看对你有没有帮助。

```
public void openGoalWeek (View view) {
Intent intent = new Intent(className.this, ViewGoal.class);
Button button = (Button) findViewById(R.id.week_goal);
Bundle bundle = new Bundle();
bundle.putString(EXTRA_MESSAGE, button.getText().toString());
bundle.putString(EXTRA_TAG, button.getTag().toString());
intent.putExtras(bundle);
startActivity(intent); 
```

# json - Go：未解析 JSON 值？

> ID：14929757
> 
> 赞同：2
> 
> 时间：2013-02-18T04:59:47.480
> 
> 标签：json, go

我有非常简单的测试：[http](http://play.golang.org/p/wY4sN9AUky) ://play.golang.org/p/wY4sN9AUky 。从 JSON 解析的配置，第一个字符串值解析成功，但第二个解析为空字符串，但事实并非如此。

```
type Config struct {
    Address      string "address"
    Debug        bool   "debug"
    DbUrl        string "dburl"
    GoogleApiKey string "google_api_key"
}

func (cfg *Config) read(json_code string) {
    if e := json.Unmarshal([]byte(json_code), cfg); e != nil {
        log.Printf("ERROR JSON decode: %v", e)
    }
}

func main() {
    var config Config
    config.read(`{
  "address": "10.0.0.2:8080",
  "debug": true,
  "dburl": "localhost",
  "google_api_key": "the-key"
}`)
    log.Printf("api key %s", config.GoogleApiKey)  // <- empty string. why?
    log.Printf("address %v", config.Address)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T05:11:08.267

您在结构中错误地指定了 JSON 名称。

```
GoogleApiKey string "google_api_key" 
```

应该

```
GoogleApiKey string `json:"google_api_key"` 
```

JSON 包`json`在文本中查找标题。反引号分隔了一个原始字符串，它允许我们在 google_api_key 周围包含引号。

[http://play.golang.org/p/KNxYhzGLAp](http://play.golang.org/p/KNxYhzGLAp)

```
package main

import (
  "log"
  "encoding/json"
)

type Config struct {
  Address string `json:"address"`
  Debug bool `json:"debug"`
  DbUrl string `json:"dburl"`
  GoogleApiKey string `json:"google_api_key"`
}

func (cfg *Config) read(json_code string) {
  if e := json.Unmarshal([]byte(json_code), cfg); e != nil {
    log.Printf("ERROR JSON decode: %v", e)
  }
}

func main() {
  var config Config
  config.read(`{
  "address": "10.0.0.2:8080",
  "debug": true,
  "dburl": "localhost",
  "google_api_key": "the-key"
}`)
  log.Printf("api key %s", config.GoogleApiKey)
  log.Printf("address %v", config.Address)
} 
```

# c# - 将资源转换为字节[]

> ID：14929760
> 
> 赞同：2
> 
> 时间：2013-02-18T05:00:01.177
> 
> 标签：c#, wpf

我无法将图像资源转换为字节 []。

例如，我有以下资源：

```
pack://application:,,,/AppName;component/Assets/Images/sampleimage.jpg 
```

在我的程序中。如何将其转换为字节 []。

我试过使用 BitMapImage，但它的 ImageSource 在初始化后最终为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T05:27:38.540

这似乎有效：

```
var info = Application.GetResourceStream(uri);
var memoryStream = new MemoryStream();
info.Stream.CopyTo(memoryStream);
return memoryStream.ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:25:28.900

`BitmapSource`将 a 转换为 a的一般解决方案`byte[]`如下所示：

```
public byte[] GetImageBuffer(BitmapSource bitmap, BitmapEncoder encoder)
{
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var stream = new MemoryStream())
    {
        encoder.Save(stream);
        return stream.ToArray();
    }
} 
```

您可以使用它，如下所示，与WPF 中可用的任何[BitmapEncoder一起使用。](http://msdn.microsoft.com/en-us/library/ms619208.aspx)

```
var uri = new Uri("pack://application:,,,/AppName;component/Assets/Images/sampleimage.jpg");
var bitmap = new BitmapImage(uri);
var buffer = GetImageBuffer(bitmap, new JpegBitmapEncoder()); 
```

# c# - DataGridView 行更新事件

> ID：14929761
> 
> 赞同：0
> 
> 时间：2013-02-18T05:00:04.000
> 
> 标签：c#, winforms

我一直在寻找某种机制，该机制允许**检测 a 的任何时候`DataGridViewRow`发生`DataGridView`变化**，一旦`DataGridView`没有直接的方法来做到这一点。我已经做了这个实现

```
public partial class MyDatagrid : DataGridView
{
    public event EventHandler<RowChangingArgs> RowUpdating; 
    public MyDatagrid()
    {
        InitializeComponent();
        this.CellBeginEdit += OnCellBeginEdit;
    }

    private DataGridViewRow oldRow;
    private int currentRow;
    private void OnCellBeginEdit(object sender, DataGridViewCellCancelEventArgs args)
    {
        if(oldRow == null || currentRow != args.RowIndex)
        {
            if(currentRow != args.RowIndex && oldRow != null)
            {
                var newRow = this.Rows[args.RowIndex];
                foreach (var cell in oldRow.Cells)
                {
                    foreach (var cell1 in newRow.Cells.Cast<object>().Where(cell1 => !cell.Equals(cell1)))
                    {
                        if(RowUpdating!= null)
                           RowUpdating.Invoke(this, new RowChangingArgs { OldRow = oldRow, NewRow = newRow});
                        oldRow.Dispose();
                        goto called;
                    }
                }
            }
            called:
            oldRow = this.Rows[args.RowIndex].Clone() as DataGridViewRow;
            currentRow = args.RowIndex;
        }
    }

    public class RowChangingArgs : EventArgs
    {
        public DataGridViewRow OldRow { get; set; }
        public DataGridViewRow NewRow { get; set; }
    }
} 
```

示例：
用户编辑第 1 行和第 1 列，通过编辑同一行的 n 列来保持。用户开始编辑其他行。带有第 1 行旧内容和第 1 行新内容的触发事件。

这是这样做的好方法，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:04:48.377

你能试试这个：

```
 public string origData { get; set; }

    private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        if (e.ColumnIndex == 1)
            origData = dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString().Trim(); //Get the original data
    }

    private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dataGridView1.IsCurrentCellDirty)
        {
            if (e.ColumnIndex == 1)
            {
                if (origData != dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString().Trim()) //If not equal to original data will trigger
                {
                    //Do stuff
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:34:12.867

另一种选择...如果您的数据来自“DataTable”或“DataView”（例如来自后端的查询结果），则网格的绑定数据源可能是 DataView。

如果是这种情况，您总是可以通过它的 columnChanging 或 columnChanged 事件直接从表控件管理中的事件处理程序中获得它……无论您要查找的是哪个（更改前/更改后的值）。

如果是这样，在表级别，在为网格填充查询和填充数据之后，您可以...

```
YourDataTable.ColumnChanging += MyColumnChanging; 
```

然后有一个方法...

```
private void MyColumnChanging(object sender, DataColumnChangeEventArgs e)
{
   // just to enforce column name representation, forcing to lower
   string colName = e.Column.ColumnName.ToLower();

   // e.Row has the row that had the change for you to work with, validate, etc...

   switch (colName)
   {
      case "yourcolumnfieldx":
         doSomething;
         break;

      case "anotherfield":
         doSomethingElse;
         break;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T18:35:08.437

Well you can use This which is more faster than other. Use **CellEndEdit** Event of The DataGridView

```
 private void datagridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
        {
            updateCounter();
        } 
```

# arrays - 基本 bash 脚本参数

> ID：14929763
> 
> 赞同：0
> 
> 时间：2013-02-18T05:00:07.570
> 
> 标签：arrays, bash, variables

我是 bash 脚本的新手，想知道如何执行以下操作。基本上我有以下行

```
./application [channels] -> [message] 
```

我想将这些存储到 2 个 bash 变量中，并以 '->' 作为分隔符。

IE：

$channels = 频道 $message = 消息

`,`此外，可以存在由a和/或空格分隔的多个通道。所以整行将是这样的：

./application Channel1, Channel2,Channel3 -> 这是一条消息。

现在在 bash 中，我希望通道存储在一个通道数组中，由分隔的通道数组`,`（如果它存在则去掉空间）和消息存储在一个消息变量中。目前我唯一能整理的就是这个：

```
#!/bin/bash
for i
    do
        echo $i
    done 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:19:59.103

由于您的消息中可能有空格，请将您的论点放在引号中，并保持简单：

```
for CHANNEL in $(echo $1 | tr " ," "\n")
do
  echo Channel: ${CHANNEL}
done

echo Message: ${2} 
```

例子：

```
anew@buddha:~/dev/so$ bash example.sh "channel1 channel2 channel3" "this is the message"
Channel: channel1
Channel: channel2
Channel: channel3
Message: this is the message 
```

# c# - 我可以指定 resharper 添加的默认“使用”吗？

> ID：14929764
> 
> 赞同：3
> 
> 时间：2013-02-18T05:00:10.493
> 
> 标签：c#, resharper, using

默认情况下，Resharper 不会`using`在 .cs 文件中指定任何 s。`using`能不能配置成默认加一两个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:30:05.197

首先，您可以使用一种称为`Import symbol`(Shift-Alt-Space) 的特殊智能感知。它会向您显示所有可用的方法，而不管它们的名称空间如何，然后它将导入所有内容。

但是，如果您仍然想要其他用途，那么除了@Hadi Eskandari 的建议之外，我还可以建议`ReSharper | Options -> Code Editing | C# | Namespace imports`您将您的命名空间添加到“应始终导入的命名空间”中。这样，ReSharper 不会建议删除您的命名空间，而是始终在代码清理期间添加它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:39:41.467

转到***Resharper -> Template Explorer...***菜单，然后从那里选择***File Templates***选项卡，然后在屏幕上选择***Class***模板并对其进行自定义。***现在，当您在上下文菜单中使用 Resharper 的New From Template***项创建新类时，您将获得所需的模板。

# c++ - Qt - 将 QString 转换为 QByteArray 的索引 - 将设备 ID 分为 3 个索引

> ID：14929769
> 
> 赞同：1
> 
> 时间：2013-02-18T05:00:57.773
> 
> 标签：c++, qt, type-conversion, qstring, qbytearray

我正在使用 QtSerialPort 通过 COM 端口将串行消息发送到 INSTEON PowerLinc 2413U 调制解调器。我可以很好地硬编码和发送消息，但是我需要使用可变设备 ID 发送相同的消息。以下是我用来发送静态消息的结构：

```
QByteArray msg;
bool msgStatus;   

msg.resize(8);
msg[0] = 0x02;
msg[1] = 0x62;
msg[2] = 0x1B;
msg[3] = 0xE9;
msg[4] = 0x4B;
msg[5] = 0x11;
msg[6] = 0x05;
msg[7] = 0x00;
send(msg,&msgStatus); 
```

索引位置 2、3 和 4 表示设备 ID。在这种情况下为“1BE94B”。我的函数接受应该通过 QString 执行操作的设备 ID。

如何转换 QString 以适应 3 个索引的所需结构。我使用以下方法成功获取了 3 字节地址的每个字节：

```
devID.mid(0,2)
devID.mid(2,2)
devID.mid(4,2) 
```

我的目标实现是让 QByteArray 看起来像这样：

```
QByteArray msg;
bool msgStatus;   

msg.resize(8);
msg[0] = 0x02;
msg[1] = 0x62;
msg[2] = devID.mid(0,2)
msg[3] = devID.mid(2,2)
msg[4] = devID.mid(4,2)
msg[5] = 0x11;
msg[6] = 0x05;
msg[7] = 0x00;
send(msg,&msgStatus); 
```

I have tried many different conversions schemes, but have been unable to resolve what I need. Ultimately my `msg` should be structured as:

```
 02621DE94B151300 
```

The only way I have successfully seen the intended device action is by individually assigning each byte in the QByteArray, using `msg.append()` does not seem to work.

Thank you for your suggestions!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:17:06.887

Part of the problem here is that QString is unicode/short based and not char based. For me it works when I use `toLocal8Bit`

```
QByteArray id;
idd.resize(3);
id[0] = 0x1B;
id[1] = 0xE9;
id[2] = 0x4B;

QString devId( bytes );

QByteArray msg;
msg.resize(8);
msg[0] = 0x02;
msg[1] = 0x62;
msg.replace( 2, 3, devId.toLocal8Bit() );
msg[5] = 0x11;
msg[6] = 0x05;
msg[7] = 0x00; 
```

If your id is text, and not bytes, then the fromHex must be added:

```
QString devId( "1BE94B" );
msg.replace( 2, 3, QByteArray::fromHex( devId.toLocal8Bit() ) ); 
```

# iphone - 从 XML 获取数据时 ios 中的内存泄漏

> ID：14929773
> 
> 赞同：0
> 
> 时间：2013-02-18T05:01:53.567
> 
> 标签：iphone, ios, ipad

是否有任何通用![在此处输入图像描述](../Images/525118ef132938f61c9f54dbf534c6a5.png)方法来修复 ios 应用程序中的这种内存泄漏。

我正在从服务器获取 5000 张图像，然后将其保存在文档目录中，同时将它们的路径保存在核心数据中。

这是代码

```
-(void)connectionDidFinishLoading:(NSURLConnectionWithTag *)connection
{
    NSNumber* nn66 =  [NSNumber numberWithInt:2];

    if ([nn66 isEqualToNumber:connection.tag])
    {
        NSXMLDocument* rElement  = [[NSXMLDocument alloc] initWithData:[dataFromConnectionsByTag objectForKey:connection.tag] options:0 error:nil];
        NSXMLElement* element    = [rElement rootElement];

        NSArray*  shadowElement3 = [element elementsForName:@"PRODUCT_NAME"];

        for (int i = 0; i <  [shadowElement3 count]; i++)
        {
            @autoreleasepool
            {
                NSMutableArray* array = [[NSMutableArray alloc] init];

                Product* failedBankInfo = [NSEntityDescription insertNewObjectForEntityForName:@"Product"                                                                    inManagedObjectContext:context];

                NSXMLElement* element11 = [shadowElement3 objectAtIndex:i];

                NSString* strPath = [element11 stringValueForNode:@"B1_COD"];

                NSArray *paths                =  NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
                NSString *documentsDirectory  =  [paths objectAtIndex:0];
                NSString *savedImagePath      =  [documentsDirectory stringByAppendingPathComponent:strPath];

                [array        addObject:savedImagePath];

                if (getimages == NO)
                {
                    //**************************************************
                    NSData* receivedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[element11 stringValueForNode:@"img"]]];
                    [receivedData writeToFile:savedImagePath atomically:YES];
                    //**************************************************

                    //**************************************************
                    int testNo = ((i+1)*100)/[shadowElement3 count];
                    NSMutableDictionary* dic = [[NSMutableDictionary alloc] initWithDictionary:[tableDataArray objectAtIndex:lineNo]];
                    [dic setObject:[NSString stringWithFormat:@"%d",[[NSNumber numberWithInt:testNo] intValue]] forKey:@"status"];
                    [dic setObject:[NSString stringWithFormat:@"%@",[self onlyDateFromDate:[NSDate date]]]      forKey:@"syncDate"];
                    [dic setObject:[NSString stringWithFormat:@"%d/%d",[[NSNumber numberWithInt:i+1] intValue],[[NSNumber numberWithInt:[shadowElement3 count]] intValue]] forKey:@"totalloaded"];

                    [tableDataArray replaceObjectAtIndex:lineNo withObject:dic];
                    [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"settingdata"];
                    [[NSUserDefaults standardUserDefaults] setObject:tableDataArray forKey:@"settingdata"];
                    [_mtable reloadData];
                   // [self performSelectorInBackground:@selector(ricaelleupdatecompleted:) withObject:dic];

                    [NSThread detachNewThreadSelector:@selector(ricaelleupdatecompleted:) toTarget:self withObject:dic];
                    //**************************************************
                }
                else
                {
                    NSString* newImagePath = [NSString stringWithFormat:@"%@_t",strPath];
                    NSString *savedImagePath1      =  [documentsDirectory stringByAppendingPathComponent:newImagePath];

                    [array        addObject:savedImagePath1];

                    int testNo = ((i+1)*100)/[shadowElement3 count];
                    NSMutableDictionary* dic = [[NSMutableDictionary alloc] initWithCapacity:0];
                    [dic setObject:[NSString stringWithFormat:@"%d%@ Completo",[[NSNumber numberWithInt:testNo] intValue],@"%"] forKey:@"status"];
                    [dic setObject:[NSString stringWithFormat:@"%@",[self onlyDateFromDate:[NSDate date]]]      forKey:@"syncDate"];
                    [dic setObject:[NSString stringWithFormat:@"%d/%d",[[NSNumber numberWithInt:i+1] intValue],[[NSNumber numberWithInt:[shadowElement3 count]] intValue]] forKey:@"totalloaded"];
                    [NSThread detachNewThreadSelector:@selector(allimagesCompleted:) toTarget:self withObject:dic];
                }

                failedBankInfo.images = array;
                failedBankInfo.DA1_FILIAL = [element11 stringValueForNode:@"DA1_FILIAL"];
                failedBankInfo.DA1_CODTAB = [element11 stringValueForNode:@"DA1_CODTAB"];
                failedBankInfo.DA1_CODPRO = [element11 stringValueForNode:@"DA1_CODPRO"];
                failedBankInfo.DA1_ITEM   = [element11 stringValueForNode:@"DA1_ITEM"];
                failedBankInfo.DA1_PRCVEN = @"100"; //[element11 stringValueForNode:@"DA1_PRCVEN"];
                failedBankInfo.DA1_X_PROM = @"10"; //[element11 stringValueForNode:@"DA1_X_PROM"];
                failedBankInfo.DA1_X_ALTE = [element11 stringValueForNode:@"DA1_X_ALTE"];
                failedBankInfo.DA1_X_PRFI = [element11 stringValueForNode:@"DA1_X_PRFI"];
                failedBankInfo.B2_FILIAL  = [element11 stringValueForNode:@"B2_FILIAL"];
                failedBankInfo.B2_COD     = [element11 stringValueForNode:@"B2_COD"];
                failedBankInfo.B2_LOCAL   = [element11 stringValueForNode:@"B2_LOCAL"];
                failedBankInfo.B2_QATU    = @"25";// [element11 stringValueForNode:@"B2_QATU"];
                failedBankInfo.B1_FILIAL  = [element11 stringValueForNode:@"B1_FILIAL"];
                failedBankInfo.B1_COD     = [element11 stringValueForNode:@"B1_COD"];
                failedBankInfo.B1_DESC    = strPath;
                failedBankInfo.B1_TIPO    = [element11 stringValueForNode:@"B1_TIPO"];
                failedBankInfo.B1_UM      = [element11 stringValueForNode:@"B1_UM"];
                failedBankInfo.B1_LOCPAD  = [element11 stringValueForNode:@"B1_LOCPAD"];
                failedBankInfo.B1_GRUPO   = [element11 stringValueForNode:@"B1_GRUPO"];
                failedBankInfo.B1_IPI     = [element11 stringValueForNode:@"B1_IPI"];
                failedBankInfo.B1_POSIPI  = [element11 stringValueForNode:@"B1_POSIPI"];
                failedBankInfo.B1_ALTER   = [element11 stringValueForNode:@"B1_ALTER"];
                failedBankInfo.B1_X_ALT_P = [element11 stringValueForNode:@"B1_X_ALT_P"];
                failedBankInfo.B1_X_LAR_P = [element11 stringValueForNode:@"B1_X_LAR_P"];
                failedBankInfo.B1_X_COM_P = [element11 stringValueForNode:@"B1_X_COM_P"];
                failedBankInfo.B1_PESO    = [element11 stringValueForNode:@"B1_PESO"];
                failedBankInfo.B1_PESBRU  = [element11 stringValueForNode:@"B1_PESBRU"];
                failedBankInfo.B1_X_ALT_C = [element11 stringValueForNode:@"B1_X_ALT_C"];
                failedBankInfo.B1_X_LAR_C = [element11 stringValueForNode:@"B1_X_LAR_C"];
                failedBankInfo.B1_X_COM_C = [element11 stringValueForNode:@"B1_X_COM_C"];
                failedBankInfo.B1_X_DIA_P = [element11 stringValueForNode:@"B1_X_DIA_P"];
                failedBankInfo.B1_X_DIA_C = [element11 stringValueForNode:@"B1_X_DIA_C"];
                failedBankInfo.B1_X_PLI_C = [element11 stringValueForNode:@"B1_X_PLI_C"];
                failedBankInfo.B1_X_PBR_C = [element11 stringValueForNode:@"B1_X_PBR_C"];
                failedBankInfo.B1_X_ALT_M = [element11 stringValueForNode:@"B1_X_ALT_M"];
                failedBankInfo.B1_X_LAR_M = [element11 stringValueForNode:@"B1_X_LAR_M"];
                failedBankInfo.B1_X_COM_M = [element11 stringValueForNode:@"B1_X_COM_M"];
                failedBankInfo.B1_X_DIA_M = [element11 stringValueForNode:@"B1_X_DIA_M"];
                failedBankInfo.B1_X_PBR_M = [element11 stringValueForNode:@"B1_X_PBR_M"];
                failedBankInfo.B1_X_PLI_M = [element11 stringValueForNode:@"B1_X_PLI_M"];
                failedBankInfo.B1_X_PGCAT = [NSNumber numberWithInt:[[element11 stringValueForNode:@"B1_X_PGCAT"] intValue]];
                failedBankInfo.B1_X_CXMAS = [element11 stringValueForNode:@"B1_X_CXMAS"];
                failedBankInfo.B1_CODBAR  = [element11 stringValueForNode:@"B1_CODBAR"];
                failedBankInfo.B1_X_DUN14 = [element11 stringValueForNode:@"B1_X_DUN14"];
                failedBankInfo.B1_TS      = [element11 stringValueForNode:@"B1_TS"];
                failedBankInfo.B1_TE      = [element11 stringValueForNode:@"B1_TE"];
                failedBankInfo.B1_X_DESCR = [element11 stringValueForNode:@"B1_X_DESCR"];
                failedBankInfo.B1_QE      =  [NSNumber numberWithInt:4];     //[[element11 stringValueForNode:@"B1_QE"] intValue]]; //[eleme

                NSError *error;

                if (![context save:&error])
                {
                    NSLog(@"error occured");
                }
                else
                {
                    NSLog(@"clientes Saved copupons");
                }
            }
        }
    }

    [SVProgressHUD dismiss];

    if (getimages == NO)
    {
        [SVProgressHUD showWithStatus:@"Please wait we are processing images"];
        [self performSelector:@selector(complieImage) withObject:nil afterDelay:.1];
    }

    NSNumber* nnn =  [NSNumber numberWithInt:3];
    if ([connection.tag isEqualToNumber:nnn])
    {
        [self  saveClientTableData:nnn];
    }

    NSNumber* nn5 =  [NSNumber numberWithInt:5];
    if ([nn5 isEqualToNumber:connection.tag])
    {
        [self saveBannerData:nn5];
    }

    [SVProgressHUD dismiss];
    [Utils readAllCoreData];
    [dataFromConnectionsByTag removeObjectForKey:connection.tag];
} 
```

# jquery - 如何将参数从一个页面传递到其他页面？

> ID：14929777
> 
> 赞同：1
> 
> 时间：2013-02-18T05:02:13.440
> 
> 标签：jquery, parameter-passing

通过使用 Jquery 和 localStorage.setItem() 和 localStorage.getItem() 等命令，我可以将参数从一个页面传递到另一个页面。但我不知道如何在后面的代码中使用它。例如将它们设置在变量中并在方法中使用它们。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:33:39.517

由于 LocalStorage 只能在客户端浏览器上访问，因此您无法从后面的代码（ASP.NET、PHP、...）访问它的内容。您将需要使用 GET、POST、Cookies 等已知方法之一传递要在代码中使用的内容...

例如，您可以这样做：

```
document.location = "YourPage.aspx?data=" + localStorage.getItem ('whatever'); 
```

然后在你的asp.net页面加载中使用这样的东西：

```
string data = Request.QueryString["data"]; 
```

瞧，你有你需要的。我希望这有帮助。

# hadoop - pig udf 计算博客中的时间差

> ID：14929780
> 
> 赞同：0
> 
> 时间：2013-02-18T05:02:34.577
> 
> 标签：hadoop, user-defined-functions, hive, apache-pig, hdfs

是否有一个 Pig UDF 可以计算博客中的时间差？

假设我有以下格式的博客：

```
10.171.100.10 - - [12/Jan/2012:14:39:46 +0530] "GET /amazon/navigator/index.php
 HTTP/1.1" 200 402 "someurl/page1" "Mozilla/4.0 (
compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; InfoPath.2; .NET CLR 3.0.4506
.2152; MS-RTC LM 8; .NET CLR 3.5.30729; .NET CLR 2.0.50727)"
10.171.100.10 - - [12/Jan/2012:14:41:47 +0530] "GET /amazon/header.php HTTP/1.1
" 200 4376 "someurl/page2" "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; InfoPath.2; .NET CLR 3.0.450
6.2152; MS-RTC LM 8; .NET CLR 3.5.30729; .NET CLR 2.0.50727)"
10.171.100.10 - - [12/Jan/2012:14:44:15 +0530] "GET /amazon/navigator/navigator
.php HTTP/1.1" 200 912 "someurl/page3" "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; InfoPath.2; .NET
 CLR 3.0.4506.2152; MS-RTC LM 8; .NET CLR 3.5.30729; .NET CLR 2.0.50727)" 
```

`10.171.100.10`访问过IP 的用户`somurl/page1 at 12/Jan/2012:14:39:46`（博客中的第一个条目）。下一个用户访问`someurl/page2`于`12/Jan/2012:14:41:47`。因此，用户在 page1 上停留了 2mts 1sec。同样，用户在 page2 上停留了 2mts 28 秒（14.44:15 - 14:41.47）。我不在乎用户在 page3 上停留了多长时间，因为我没有什么可以与之比较的。输出可以是：

```
10.171.100.10 someurl/page1 121 sec 
10.171.100.10 someurl/page2 148 sec etc .. 
```

博客将有数百万行，IP 不一定按排序顺序。关于如何使用 Pig UDF 或任何其他技术进行此操作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:20:37.740

我不知道默认情况下会使用以下行中的内容来生成一些内容的任何函数，因为序列是可变的，因此非常不可靠。

您必须编写自己的 UDF。为了优化计算（如果您有数十亿行），您可能希望在每个 IP（或 IP 组）上启动 MapReduce 作业之前`ORDER`通过`IP`和`date`、和到`GROUP`您的数据集，`IP`以确保所有行对应于特定的IP由同一个节点处理。

另外，我建议您多考虑一下您要用来计算在页面上花费的时间的规则：用户何时仍然活跃，用户何时返回？您最终可能会得到很长的时间范围。

# php - 在 PHP 中的 XPath 中选择具有不同类的节点

> ID：14929788
> 
> 赞同：1
> 
> 时间：2013-02-18T05:03:04.627
> 
> 标签：php, xpath

我正在尝试使用 XPath 来选择具有不同类的节点。在这种情况下，只有两个。一个是“msg_head”，另一个是“msg_sub_head”。

以下是我经过数小时的谷歌搜索并在 Stack Overflow 上搜索后正在运行的字符串。我觉得我很接近，但并不完全在那里。

```
//*[contains(concat(' ',@class,' '),' msg_head') and (contains(concat(' ',@class,' '),' msg_sub_head'))] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:12:25.407

看来您只是缺少`contains` *搜索*参数末尾的空格。例如，在你拥有 的地方`' msg_head'`，你实际上想要`' msg_head '`。

# c++ - 将 int 转换为 wstring

> ID：14929791
> 
> 赞同：12
> 
> 时间：2013-02-18T05:03:27.107
> 
> 标签：c++, string, type-conversion

我想将一个整数值 (int) 转换为 std::wstring。做这个的最好方式是什么？我正在为 windows phone 开发，所以我宁愿避免使用外部库（例如 boost::lexical_cast）。我正在寻找一些简单的东西，最好是只将 int 分配给 wstring 的一行代码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-18T05:05:39.903

你在寻找[`std::to_wstring`](http://en.cppreference.com/w/cpp/string/basic_string/to_wstring)

```
std::wstring to_wstring( int value );   (since C++11) 
```

> 将有符号十进制整数转换为内容与 std::swprintf(buf, sz, L"%d", value) 为足够大的 buf 生成的内容相同的宽字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-11T12:03:30.997

```
 size_t myInteger = 10;
    std::wostringstream myStringStream;
    myStringStream<< L"myText" << myInteger;
    std::wstring concatenatedStr = myStringStream.str(); 
```

将数字连接到 wstring。

在旧的 C++ 98 Visual Studio 2010 中。

# android - 谷歌API在Android本机应用程序中给出请求被拒绝错误

> ID：14929795
> 
> 赞同：0
> 
> 时间：2013-02-18T05:03:57.933
> 
> 标签：android, google-maps

url [http://maps.googleapis.com/maps/api/geocode/json?address=Pune&sensor=false/true](http://maps.googleapis.com/maps/api/geocode/json?address=Pune&sensor=false/true) 在桌面浏览器上工作正常，但是当我从 android 本机应用程序调用它时，它给了我 Request Denied 错误。

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:23:56.330

那是因为您正在尝试这样：

```
http://maps.googleapis.com/maps/api/geocode/json?address=pune&sensor=false/true 
```

试试这个：

```
http://maps.googleapis.com/maps/api/geocode/json?address=pune&sensor=false 
```

`true`并`false`根据您的要求制作传感器值。

我得到的结果就[在这里](http://maps.googleapis.com/maps/api/geocode/json?address=pune&sensor=false)。

# iphone - NSURL 传递一个参数

> ID：14929800
> 
> 赞同：0
> 
> 时间：2013-02-18T05:04:15.060
> 
> 标签：iphone, xcode

```
NSString *myString = @"1994";
    NSString *post =[[NSString alloc] initWithFormat:@"data=%@",myString];

    NSURL *url=[NSURL URLWithString:@"http://nyxmyx.com/Kinkey/KinkeyPHP/lastid2.php/?data=%@",myString];
    NSLog(@"URL%@",url);

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSLog(@"postDATA%@",postData);
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSLog(@"postLENGTH%@",postLength);
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    NSError *error1 = [[NSError alloc] init];
    NSHTTPURLResponse *response = nil;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error1];
    NSString *string;
    if ([response statusCode] >=200 && [response statusCode] <300)
        {
        string = [[NSString alloc] initWithData:urlData encoding:NSMacOSRomanStringEncoding];
        UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"alert1" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert1 show];
        } 
```

我是目标 c 的新手。当我发送带有参数的 NSURL 时，它会给出错误，因为“参数太多需要 1 有 2”如何用一个参数更改我的 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:05:59.097

代替

```
NSURL *url=[NSURL URLWithString:@"http://nyxmyx.com/Kinkey/KinkeyPHP/lastid2.php/?data=%@",myString]; 
```

和

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://nyxmyx.com/Kinkey/KinkeyPHP/lastid2.php/?data=%@",myString]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T06:14:24.043

我已经纠正了一些事情并测试了您的代码，现在应该没问题：

```
NSString *myString = @"1994";
NSString *post =[[NSString alloc] initWithFormat:@"data=%@",myString];

NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://nyxmyx.com/Kinkey/KinkeyPHP/lastid2.php/?data=%@",myString]];
NSLog(@"URL%@",url);

NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
NSLog(@"postDATA%@",postData);
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSLog(@"postLENGTH%@",postLength);
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];

NSError *error1 = [[NSError alloc] init];
NSHTTPURLResponse *response = nil;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error1];
NSString *string;
if ([response statusCode] >=200 && [response statusCode] <300)
    {
    string = [[NSString alloc] initWithData:urlData encoding:NSMacOSRomanStringEncoding];
    UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"alert1" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alert1 show];
    } 
```

上述电话的回应：

1995，Prabu，1231231233，Antab，80808080,1360738531881.jpg
，808080,1360708080 ，null，+ 6142022444442.jpg，no 1999，josh，0417697070，null，+ 61420224346,1356047464383.jpg，no 2000，josh，0417697070，null，+ 61420224346,1361160816141.jpg，no 2001，wooza，0420224346，j Wratt ,+61417697070,2013-55-1803-55-54.jpg,No 2002,wooza,0420224346,J Wratt ,+61417697070,2013-56-1803-56-17.jpg,No 2003,testing,9894698946,ggh hjj,9894598945,2013-11-1811-11-40.jpg,是的

# xslt - 复制 XML，同时排除父节点、删除特定子节点和覆盖某些子节点

> ID：14929804
> 
> 赞同：2
> 
> 时间：2013-02-18T05:04:29.307
> 
> 标签：xslt, insert, copy, parent-child

我已经查看了几篇分别做这些事情的帖子，但还没有成功地将它们组合在一起。

我有一个类似于这个结构的输入：

```
 <Response>
    <Confirmation>Success</Confirmation>
    <SecondResponse>
       <InquiryResponse>
          <ID>99999</ID>
          <Confirmation>Success</Confirmation>
          <Exception/>
          <!-- The following structure repeats a varying amount of times -->
          <DataNode1>
             <!-- Child nodes could be null, transform should remove null nodes -->
             <Child1>data</Child1>
             ...
             <Childn>dataN</Childn>
          </DataNode1>
          ...
          <DataNodeN>
             <Child1>data</Child1>
             ...
             <Childn>dataN</Childn>
          </DataNodeN>
       </InquiryResponse>
    </SecondResponse>
 </Response> 
```

现在，我需要完成以下事情：

1）复制`<InquiryResponse>`（但不是`<InquiryResponse>`自身）的所有子节点

2）排除`<Confirmation>`和`<Exception>`节点

3) 排除 DataNode 中的任何 null 子节点

4）在DataNode中插入一个新的子元素

所以所需的输出如下所示：

```
 <ID>99999</ID>
 <DataNode1>
   <Child1>data</Child1>
   <ChiildInsert>newData</ChildInsert>
   <Childn>dataN</Childn>
 </DataNode1>
 ...
 <DataNodeN>
    <Child1>data</Child1>
    <ChildInsert>newData</ChildInsert>
    <Childn>dataN</Childn>
 </DataNodeN> 
```

我相信我必须通过为每个 DataNode 创建一个模板（我知道所有可能出现的值）和模板来删除我不想要的节点，然后将它们全部应用于忽略 null 的主副本模板节点。这是我目前使用 2.0 的 XSLT 化身 - 虽然我知道它并不完全完整，但据我所知：

```
 <xsl:stylesheet version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!-- Remove Unwanted Nodes -->
  <xsl:template match='Confirmation|Exception'/>

  <!-- DataNode Template -->
  <template match='DataNode1'>
    <xsl:copy>
       <xsl:apply-templates select="@*|node()"/>
       <ChildInsert>
          <xsl:value-of select='newData'/>
       </ChildInsert>
    </xsl:copy>
  </xsl:template>

  <!-- Identity Transform -->
  <xsl:template match='@*|node()'> 
    <xsl:if test='. != ""'>
       <xsl:copy>
         <xsl:apply-templates select='@*|node()'/>
       </xsl:copy>
    </xsl:if>
  </xsl:template>

  </xsl:stylesheet> 
```

这是我使用 Saxon-PE 9.3.0.5 生成的输出

```
 <Response>
   <SecondResponse>
     <InquiryResponse>
         <ID>99999</ID>
         <DataNode1>
            <Child1>data</Child1>
            <ChiildInsert>newData</ChildInsert>
            <Childn>dataN</Childn>
         </DataNode1>
         ....
         <DataNodeN>...</DataNodeN>
     </InquiryResponse>
   </SecondResponse>
 </Response> 
```

显然，我仍然得到了父母的所有回应，因为我没有指定处理它们的方法；但是，每当我尝试将模板与 XPath 匹配时，我得到的是数据，而不是 XML。我知道我可以通过另一个只复制 的子节点的转换来传递它`<InquiryResponse>`，但我觉得应该有更优雅的方式来代替它。以下是我仍然面临的问题/疑问。

1）由于使用这样的模板：`<xsl:template match='Response'/>`将使我的整个响应无效，我尝试切换识别模板以匹配`Response/SecondResponse/InquiryResponse/*`但结果只产生文本数据，而不是 XML。

2）当`<Exception>`节点填充了一个值时，它会继续被复制而不是像`<Confirmation>`节点一样被移除。

3）如果我想更新一个不为空的子节点的值，我会这样做吗？更新一些子节点还有一个额外的要求，所以我还在考虑怎么做，这似乎是正确的方法，但我想验证一下。

```
 <xsl:template match='childNodeA'>
     <childNodeA>
        <xsl:value-of select='someValue/>
     </childNodeA>
 </xsl:template> 
```

如果不清楚，我深表歉意，但请随时要求您提供所需的任何进一步详细信息，并提前非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T07:22:41.393

您发布的输出 XML 格式不正确，因为它没有根元素，但是这个 XSLT 1.0 样式表应该可以满足您的要求：

**样式表**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" encoding="utf-8"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Apply all child nodes; don't copy the element itself -->
  <xsl:template match="Response | SecondResponse | InquiryResponse">
    <xsl:apply-templates/>
  </xsl:template>

  <!-- Drop elements -->
  <xsl:template match="Confirmation | Exception"/>

  <xsl:template match="DataNode1 | DataNode2 | DataNodeN">
    <xsl:copy>
      <!-- Apply Child1, ignore children with no text content -->
      <xsl:apply-templates select="Child1[normalize-space(.)]"/>
      <!-- Insert new element -->
      <ChildInsert>newData</ChildInsert>
      <!-- Apply all other child elements except Child1 -->
      <xsl:apply-templates select="*[normalize-space(.)][not(self::Child1)]"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**输入**：

```
<Response>
  <Confirmation>Success</Confirmation>
  <SecondResponse>
     <InquiryResponse>
        <ID>99999</ID>
        <Confirmation>Success</Confirmation>
        <Exception/>
        <!-- The following structure repeats a varying amount of times -->
        <DataNode1>
           <!-- Child nodes could be null, transform should remove null nodes -->
           <Child1>data</Child1>
           <Childn>dataN</Childn>
        </DataNode1>
        <DataNodeN>
           <Child1>data</Child1>
           <Childn>dataN</Childn>
        </DataNodeN>
     </InquiryResponse>
  </SecondResponse>
</Response> 
```

**输出**：

```
<?xml version="1.0" encoding="utf-8"?>
<ID>99999</ID>
<DataNode1>
  <Child1>data</Child1>
  <ChildInsert>newData</ChildInsert>
  <Childn>dataN</Childn>
</DataNode1>
<DataNodeN>
  <Child1>data</Child1>
  <ChildInsert>newData</ChildInsert>
  <Childn>dataN</Childn>
</DataNodeN> 
```

请注意，由于您没有指定“null”的含义，我假设它表示没有文本内容的元素。所以上面的代码会删除一个`<Child1>`像这样的元素：

```
<Child1>
  <GrandChild1/>
</Child1> 
```

# jquery - 为什么我不能拖出可调整大小的容器？

> ID：14929806
> 
> 赞同：1
> 
> 时间：2013-02-18T05:04:40.363
> 
> 标签：jquery, drag-and-drop, resizable

我有两个 div，其中一个是可调整大小的。我需要能够来回拖动元素；出一入二，两种方式。

```
$(".item").draggable({
helper: 'clone'
});

$( ".container" ).droppable({   
drop: function( event, ui ) {
    if($(ui.draggable).parent() !==$(this)){
        $(ui.draggable).appendTo($( this ));
    }
}}); 
```

从不可调整大小的元素到可调整大小的元素时，拖放工作完美。但是，当尝试拖出可调整大小的元素时，被拖出的元素会在可调整大小的容器中消失。拖放有效，但是一旦鼠标移出可调整大小的容器，您就看不到拖动的项目。

关于提起拖出的任何建议，所以我看到它附着在鼠标上以进行整个拖动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:52:42.897

很难说这是否会在没有看到您的代码运行的情况下解决您的问题，但请尝试指定[appendTo](http://api.jqueryui.com/draggable/#option-appendTo)选项，以便帮助器的父级将成为`<body>`元素而不是原始元素的父级：

```
$(".item").draggable({
    appendTo: "body",
    helper: "clone"
}); 
```

# jquery - 如何获取 jqwidget 网格过滤器文本框

> ID：14929812
> 
> 赞同：0
> 
> 时间：2013-02-18T05:04:53.103
> 
> 标签：jquery, jquery-ui, jqxgrid

我正在使用 jqwidget 网格（jqxgrid）。我想获取 Filter 文本框的对象。 [这是 jqwidget 网格链接。](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/filterrow.htm) 任何人都可以帮助我如何获得这个名称文本框过滤器对象。谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:53:28.020

完成后应用过滤器，然后使用 $('#jqxgrid').jqxGrid('refreshfilterrow'); 刷新网格

# javascript - 如何将js变量值传递并显示到html页面中？

> ID：14929817
> 
> 赞同：0
> 
> 时间：2013-02-18T05:05:20.837
> 
> 标签：javascript

我有一个 Javascript 文件（当用户在我的应用程序中选择一个项目时从我的应用程序调用该文件时将启动）。
在该文件中，我有一个变量，并且在该变量中存储了一个大的动态字符串（基于用户选择）。

现在我想从 Javascript 打开一个新页面并显示存储在该页面中的字符串变量中的值。

如何传递变量值并将其显示在该页面中？

我可以使用 window.open() 打开一个新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:34:49.700

步骤1

打开新窗口，如下所示

```
newWindow = window.open('newpage.html',/* other parameters */); 
```

第2步

在新窗口中写一个函数

```
function passValue(val){
// do stuff
} 
```

第三步

窗口打开后，调用函数传递值，如下所示

```
newWindow.passValue('your value') 
```

你完成了..!!

干杯

# java - 如何将结果集复制到对象中？

> ID：14929818
> 
> 赞同：0
> 
> 时间：2013-02-18T05:05:21.137
> 
> 标签：java, database, javabeans, resultset

我正在使用以下内容将检索到的值添加到类中。所有值都将添加到类的属性中，但我使用的是 compisition（在类中有一个类对象）并且它在输出中不显示任何内容。

```
class employee 
{
....
private Address address = new Address();
.....
}
 ...
Employee emp = new Employee();
        try {

            ps = con.prepareStatement("select * from employee,address "
                    + "WHERE employee.username = ? AND "
                    + "employee.ADD_ID = address.ID");

            ps.setString(1, username);
            ResultSet r = ps.executeQuery();
            if (r.next()) {

                BeanProcessor bp = new BeanProcessor();
                emp = bp.toBean(r,Employee.class);
                System.out.println("blockkkk:"+emp.getAddress().getBlock());  
                                            //output of above line is blockkkk:null
            }

            con.close();
            ps.close();
        } catch (SQLException e) {
            System.err.println(e.getMessage());

        }
       return emp; 
```

地址类如下：

```
 public class Address {
    .....
    private String block;
    ....
      public String getBlock() {
            return block;
        }

        public void setBlock(String block) {
            this.block = block;
        }
    ....
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:12:40.917

`BeanProcessor.toBean`作品是这样的：

将 ResultSet 行转换为 JavaBean。此实现使用反射和 BeanInfo 类将列名与 bean 属性名匹配。属性与基于几个因素的列匹配：

*   该类具有与列同名的可写属性。名称比较不区分大小写。
*   可以使用 ResultSet.get* 方法将列类型转换为属性的设置方法参数类型。如果转换失败（即属性是 int 并且列是 Timestamp），则抛出 SQLException。

当从 ResultSet 返回 SQL NULL 时，原始 bean 属性将设置为其默认值。数字字段设置为 0，布尔值设置为 false。返回 SQL NULL 时，对象 bean 属性设置为 null。这与 ResultSet get* 方法的行为相同。

可能是地址不是可写属性。请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:19:48.333

```
 public static Object copyFromResultSet(Class clazz, ResultSet resultSet)
{
    ArrayList objectArrayList = new ArrayList(1);
    try
    {
        Object object = clazz.newInstance();
        objectArrayList.add(object);
        copyFromResultSet(objectArrayList, resultSet);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    return objectArrayList.get(0);
} 
```

然后：

```
public static void copyFromResultSet(ArrayList<Object> objectArrayList, ResultSet resultSet)
{
    ArrayList arrayList = null;
    try
    {
        if (objectArrayList != null)
        {
            int objectArrayList_len = objectArrayList.size();
            int objectArrayList_index = 0;
            java.beans.BeanInfo toBeanInfo[] = new java.beans.BeanInfo[objectArrayList_len];

            Vector<Method> objectMethodVector[] = new Vector[objectArrayList_len];
            Vector<Type> objectTypeVector[] = new Vector[objectArrayList_len];
            int totalMethod[] = new int[objectArrayList_len];
            int[][] indexes = new int[objectArrayList_len][];

            for (objectArrayList_index = 0; objectArrayList_index < objectArrayList_len; objectArrayList_index++)
            {
                toBeanInfo[objectArrayList_index] = java.beans.Introspector.getBeanInfo(objectArrayList.get(objectArrayList_index).getClass());
            }
            if (objectArrayList_len > 0 && resultSet != null)
            {
                Method method = null;
                Type type[] = null;
                int cols = 0;
                String colName = null;
                for (objectArrayList_index = 0; objectArrayList_index < objectArrayList_len; objectArrayList_index++)
                {
                    //toBeanInfo[objectArrayList_index]=java.beans.Introspector.getBeanInfo(objectArrayList.get(objectArrayList_index).getClass());
                    java.beans.PropertyDescriptor toPropertyDescriptor[] = toBeanInfo[objectArrayList_index].getPropertyDescriptors();
                    int toPropertyDescriptor_length = toPropertyDescriptor.length;
                    method = null;
                    type = null;

                    ResultSetMetaData resultSetMetaData = resultSet.getMetaData();

                    cols = resultSetMetaData.getColumnCount();
                    colName = null;

                    Vector<Method> methodVector = new Vector(cols);
                    Vector<Type> typeVector = new Vector(cols);

                    indexes[objectArrayList_index] = new int[cols];
                    totalMethod[objectArrayList_index] = -1;
                    for (int i = 1; i <= cols; i++)
                    {
                        colName = resultSetMetaData.getColumnName(i);
                        for (int j = 0; j < toPropertyDescriptor_length; j++)
                        {
                            if (toPropertyDescriptor[j].getName().equalsIgnoreCase(colName))
                            {
                                totalMethod[objectArrayList_index]++;
                                method = toPropertyDescriptor[j].getWriteMethod();
                                type = method.getGenericParameterTypes();
                                methodVector.add(method);
                                typeVector.add(type[0]);
                                indexes[objectArrayList_index][totalMethod[objectArrayList_index]] = i;
                                break;
                            }
                        }
                    }
                    objectMethodVector[objectArrayList_index] = (methodVector);
                    objectTypeVector[objectArrayList_index] = (typeVector);
                }

                if (resultSet.next())
                {
                    arrayList = new ArrayList();
                    for (objectArrayList_index = 0; objectArrayList_index < objectArrayList_len; objectArrayList_index++)
                    {
                        for (int i = 0; i <= totalMethod[objectArrayList_index]; i++)
                        {
                            //System.out.println(objectMethodVector[objectArrayList_index].get(i));
                            objectMethodVector[objectArrayList_index].get(i).invoke(objectArrayList.get(objectArrayList_index), getObject(indexes[objectArrayList_index][i], objectTypeVector[objectArrayList_index].get(i), resultSet));
                        }
                        arrayList.add(objectArrayList.get(objectArrayList_index));
                    }
                }
                while (resultSet.next())
                {
                    for (objectArrayList_index = 0; objectArrayList_index < objectArrayList_len; objectArrayList_index++)
                    {
                        for (int i = 0; i <= totalMethod[objectArrayList_index]; i++)
                        {
                            objectMethodVector[objectArrayList_index].get(i).invoke(objectArrayList.get(objectArrayList_index), getObject(indexes[objectArrayList_index][i], objectTypeVector[objectArrayList_index].get(i), resultSet));
                        }
                        arrayList.add(objectArrayList.get(objectArrayList_index));
                    }
                }
            }
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

只需复制粘贴此代码调用方法 copyFromResultSet(class, ResultSet) 传递两个参数，第一个是类名，第二个是结果集。

我确信这工作正常

# javascript - 为什么 ECMAScript 5 中的 Object 上没有 forEach 方法？

> ID：14929819
> 
> 赞同：40
> 
> 时间：2013-02-18T05:05:22.587
> 
> 标签：javascript, foreach, ecmascript-5

ECMAScript 5`array.forEach(callback[, thisArg])`对数组的迭代非常方便，并且与使用 for 的语法相比具有许多优势：

*   它更简洁。
*   它不会创建我们仅用于迭代目的的变量。
*   它为循环的局部变量创建了一个可见范围。
*   它提高了性能。

**没有`object.forEach`更换的原因是什么`for(var key in object)`？**

当然，我们可以使用 JavaScript 实现，例如 _.each 或 $.each，但它们是性能杀手。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-18T05:18:59.510

好吧，自己装起来很容易。为什么要进一步污染原型？

```
Object.keys(obj).forEach(function(key) {
  var value = obj[key];
}); 
```

我认为一个重要的原因是想要避免将内置属性添加到`Object`. `Object`s 是 Javascript 中所有内容的构建块，但也是该语言中的通用键/值存储。添加新属性`Object`会与您的 Javascript 程序可能想要使用的属性名称冲突。因此，在添加内置名称时要`Object`格外小心。

数组是由整数索引的，所以它没有这个问题。

这也是我们有`Object.keys(obj)`而不是简单的原因`obj.keys`。污染`Object`构造函数，因为它通常没什么大不了的，但不要管实例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T05:28:14.640

1.  `.forEach` *确实*创建变量只是为了迭代......只是不是你自己创建的。
    如果您使用 shim，那么它们是闭包中的 JS 变量，否则它们可能是 C++ 或任何浏览器的本机实现。

2.  ES6`for ... of`将遍历您传递的任何内容。

3.  `let`ES6 还使用, 而不是获取块级变量（而不是函数范围）`var`

4.  您将能够在 ES6 中将迭代器添加到特定类型的对象（即：您构建以支持迭代器的对象）。

但这里的问题是 ES5 旨在保留 ES3 的大部分语法（很少有新关键字，并且在常规使用中没有新关键字）。
大多数附加功能必须是方法调用（通常是原型）。
考虑到自 ES3 推出以来 JS 的使用量越来越大，数组需要做大量工作。

对象不需要`.map()`/`.reduce()`能力，除非您正在构建非常特定的对象，在这种情况下，您正在自己实现这些对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T05:21:27.603

您必须记住，javascript 中的每个对象都继承自`Object`. 并非 javascript 中的每个对象都需要对其属性进行迭代。这些主要限于数据模型对象。添加 forEach 方法只会不必要地增加**每个对象的原型。**

如果您当前看到 Object 及其方法，它们的存在只是为了识别对象，或将一个对象与另一个对象区分开来。

# spring - POST 到 login-processing-url 产生 HTTP/404

> ID：14929824
> 
> 赞同：1
> 
> 时间：2013-02-18T05:05:53.403
> 
> 标签：spring, spring-security

环境：Spring 3.1.3 Spring 安全性：3.1.3 Spring ldap：1.3.1 JDK1.6

问题：我的登录处理 URL 上出现 404。

详细信息：我有三个 http 拦截块：一个公共的，第二个用于拦截和保护管理员的 URL（使用身份验证管理器 1），第三个用于普通用户（使用身份验证管理器 2）。

当 http 拦截块 1 中的登录表单将凭据发布到表单登录的 login-processing-url 时，它会产生 404。我确实明白这一点 - 因为表单登录宣布了 login-processing-url，不应该这样过滤器链识别那个 URL？

另外，我应该在表单的登录处理 url 上明确地执行“permitAll”，还是在幕后自动完成？

最后，有不同的 http 拦截器块有不同的登录处理 URL 是否有问题？（我不明白为什么 - 但我还是问）。

# 配置：

弹簧安全配置：

```
//...
<debug />
<global-method-security secured-annotations="enabled" />
<http pattern="/public/**" security="none"/>
<http use-expressions="true" pattern="/protected/x/support/**" authentication-manager-ref="lAdminAuthManager">
    <intercept-url pattern="/protected/x/support/**" access="hasRole('ROLE_ADMIN')"/>
    <form-login login-page="/public/login.jsp"
            login-processing-url="/protected/x/support/j_spring_security_check"
            username-parameter="username"
            password-parameter="password"
            authentication-failure-url="/login/form?error"
            default-target-url="/protected/x/support/index.html"/>
</http>
<http use-expressions="true" entry-point-ref="lUserLoginEntryPoint">
    <intercept-url pattern="/protected/x/foo1/**" access="permitAll"/>
    <intercept-url pattern="/protected/x/foo2/**" access="permitAll"/>
    <intercept-url pattern="/j_spring_security_check" access="permitAll"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <custom-filter ref="lUserLoginFilter" position="FORM_LOGIN_FILTER"/>
    <custom-filter ref="lPreauthAuthenticationFilter" position="PRE_AUTH_FILTER" />
</http>

//... 
```

非常感谢任何提示！

谢谢，

乌玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:04:39.133

任何方式检查以下链接。它可以帮助你

访问[http://krams915.blogspot.com/2010/12/spring-security-mvc-integration_18.html](http://krams915.blogspot.com/2010/12/spring-security-mvc-integration_18.html)

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html)

**即使配置文件中的小 url 冲突也会导致 404 错误。**

# c# - 使用 MySqlBackup.NET 导出数据库时出现异常

> ID：14929830
> 
> 赞同：3
> 
> 时间：2013-02-18T05:06:08.057
> 
> 标签：c#, mysql, mysqlbackup.net

我使用[以下代码](http://mysqlbackupnet.codeplex.com/wikipage?title=Documentation%20for%20MySqlBackup.NET%20V1.5)备份 MYSQL 数据库。

```
 private void button2_Click(object sender, EventArgs e)
    {
        string file = "D:\\backup.sql";
        //string conn = "server=localhost;user=root;pwd=qwerty;database=test;";
        String str = @"server=192.168.1.219;database=abc;userid=sha;password='123';";
        MySqlBackup mb = new MySqlBackup(str);
        mb.ExportInfo.FileName = file;
        mb.Export();
    } 
```

我的堆栈跟踪如下 -

```
A first chance exception of type 'System.NullReferenceException' occurred in MySqlBackup.dll
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>TestAppMysqlDBConnect.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Object reference not set to an instance of an object.</Message><StackTrace>   at MySql.Data.MySqlClient.MySqlBackup.ExportExecute()
   at MySql.Data.MySqlClient.MySqlBackup.Export()
   at TestAppMysqlDBConnect.Form1.button2_Click(Object sender, EventArgs e) in C:\Users\Shashika\Documents\Visual Studio 2010\Projects\TestAppMysqlDBConnect\TestAppMysqlDBConnect\Form1.cs:line 52
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   .. 
```

但是有一个例外，就是说有一个空引用异常。当我通过 C# 程序将数据传递到数据库时。插入成功，无一例外。此异常仅发生在我尝试通过 C# 程序备份数据库时。我使用了上面链接中的 2 个 Dll 文件。这些是 - MySql.Data.dll MySqlBackup.dll

我无法解决这个异常。请帮忙。

![例外](../Images/c15b95c87927b9804441813f693dae5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-04T02:12:39.973

尝试使用此功能（不要忘记您必须将 MySqlBackup.dll 添加到您的项目引用中）：

```
public void Backup()
    {
        try
        {
            // Backup...
            DateTime Time = DateTime.Now;
            year = Time.Year;
            month = Time.Month;
            day = Time.Day;
            hour = Time.Hour;
            minute = Time.Minute;
            second = Time.Second;
            millisecond = Time.Millisecond;

            //Save file to Path with the current date as a filename
            string path;
            path = txb_Path.Text + year + "-" + month + "-" + day + "--" + hour + "-" + minute + "-" + second + ".sql";
            string file = path;
            using (MySqlConnection conn = new MySqlConnection(connectionString))
            {
                using (MySqlCommand cmd = new MySqlCommand())
                {
                    using (MySqlBackup mb = new MySqlBackup(cmd))
                    {
                        cmd.Connection = conn;
                        conn.Open();
                        mb.ExportToFile(file);
                        conn.Close();
                    }
                }
            }
            //Done----
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error , unable to backup!" + ex.Message);
        }
    } 
```

# javascript - 在卸载前发送 AJAX 到服务器

> ID：14929832
> 
> 赞同：11
> 
> 时间：2013-02-18T05:06:25.563
> 
> 标签：javascript, jquery, cross-browser, onbeforeunload

[所以据说从 Firefox > 4 开始](https://stackoverflow.com/questions/5398772/firefox-4-onbeforeunload-custom-message)，将窗口 jQ​​uery 对象绑定到`beforeunload`不再起作用。

我想做的是提交一个 AJAX 帖子来删除我服务器的内存缓存数据。

当我刷新唯一打开的选项卡时，我可以看到`beforeunload`在 firefox 和 chrome 中都使用以下代码调用了该事件，console.log 消息“firefox/NON-firefox delete”证明了这一点。问题是我从未看到 console.log 消息“memcache delete”，表明我的服务器从未看到该`$.ajax`请求。

我意识到进行浏览器嗅探是不好的，并且 if 和 else 语句中包含的内容没有区别。我只是展示了我在 Firefox 中尝试失败的代码。

有人有想法么？

```
$(window).bind('beforeunload', function(){ 
  if(/Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4) {
    console.log('firefox delete');
     memcacheDelete();
     return null;
  } 
  else {
    console.log('NON-firefox delete');
    memcacheDelete();
    return null;
  }
});

function memcacheDelete() {
   $.ajax({
      url: "/memcache/delete", 
      type: "post",
      data:{}, 
      success:function(){
          console.log('memcache deleted');
      }//success
  }); //ajax
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T05:25:29.650

***Ajax 是异步的。***

当您刷新（或关闭）浏览器时，`beforeunload`正在调用。这意味着一旦`beforeunload`完成执行，页面将刷新（或关闭）。

当您执行 ajax 请求时，（因为它是异步的）javascript 解释器不会等待 ajax`success`事件被执行，而是向下移动完成`beforeunload`.

`success`ajax 应该在几秒钟后被调用，但你看不到它，因为页面已被刷新/关闭。

**边注：**

*`.success()`方法已弃用并由`.done()`方法替换*

[参考](http://api.jquery.com/jQuery.ajax)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T06:14:41.737

只是为了完成，这就是我所做的，感谢@Jashwant 的指导：我注意到[这个其他 SO Q&A 提出了相同的解决方案](https://stackoverflow.com/questions/9701734/how-to-execute-ajax-function-onbeforeunload?rq=1)。 *关键是*在下面`async:true(false)`的`$.ajax`调用中：

```
$(window).bind('beforeunload', function(){ 
  if(/Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4) {
    console.log('firefox delete');
     var data={async:false};
     memcacheDelete(data);
     return null;
  } 
  else {
    console.log('NON-firefox delete');
     var data={async:true};
     memcacheDelete(data);
    return null;
  }
});

function memcacheDelete(data) {
  $.ajax({
    url: "/memcache/delete", 
    type: "post",
    data:{}, 
    async:data.async,
    success:function(){
      console.log('memcache deleted');
    }//success
  }); //ajax
} 
```

# c# - Excel c#问题 - 未重新计算公式

> ID：14929833
> 
> 赞同：0
> 
> 时间：2013-02-18T05:06:25.740
> 
> 标签：c#, excel

我正在做一个文档级的 excel 项目。这是第三个版本。

其中一个工作表包含一个列表对象（来自数据库的数据）。然后有单元格包含如下公式

this.Range["F15"].Formula = "=COUNTIFS(HotList_ListObject[Product],E15,HotList_ListObject[Got_Interest],\"<>\")"

以前，我只是通过拖放来创建表格。然后只需在工作表中创建一个公式。并且公式被重新计算为 listobject 中的数据（上面的 HotList_ListObject）。

这一次，我通过代码创建了表格。因为在应用程序运行之前 Hotlist_ListObject 不在工作表上，所以我在通过代码创建列表对象后提供了公式。

我浏览了互联网并进行了一些测试。

当我按 F9、SHIFT+F9 和 CTRL+ALT+F9 时，它不会重新计算。

只有当我按 CTRL+SHIFT+ALT+F9 时，它才会重新计算

我为 CTRL+SHIFT+ALT+F9 找到的解释是

重新检查相关公式，然后计算所有打开的工作簿中的所有公式，无论它们自上次以来是否已更改。

似乎因为公式是通过代码在工作表中提供的，所以它不会创建指向依赖公式或其他东西的链接，因此它不会重新计算。（我想是这样的）

我的用户不会在每次修改/添加/删除列表中的记录时按下按钮。

我能做些什么来解决这个问题？如何告诉 Excel 每次在 listobject 中发生任何变化时，公式都需要重新计算。

感谢您提前提供任何建议！

亲切的问候马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:55:14.253

是否将计算设置为手动：

```
xlApp.Calculation = XlCalculation.xlCalculationManual;
xlApp.ScreenUpdating = false;
xlApp.DisplayAlerts = false;
xlApp.UserControl = false;
xlApp.EnableEvents = false; 
```

然后填充您的 Hotlist_ListObject *（在应用程序运行之前不在工作表上），*然后将计算设置为自动：

```
xlApp.Calculation = XlCalculation.xlCalculationAutomatic;
xlApp.ScreenUpdating = true;
xlApp.DisplayAlerts = true;
xlApp.UserControl = true;
xlApp.EnableEvents = true; 
```

解决问题？如果不能，请发布一些基本代码来说明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:57:22.800

你检查选项设置了吗？`Alt`这可能会被宏重置为手动（使用+ `F11`for使用宏编辑器检查`xlCalculateManual`并确保宏在`Application.Calculation = xlCalculationAutomatic`执行之前没有停止以将计算设置回自动。关闭计算​​是加速宏的常用方法，但是当宏中途退出，此手动计算设置将保留。

这里是手动设置。

![在此处输入图像描述](../Images/d4c759a934d01774d6b85d98115ef27e.png)

# iphone - 如何以简单的方式在滑动表格单元格上显示自定义选项

> ID：14929842
> 
> 赞同：1
> 
> 时间：2013-02-18T05:07:31.020
> 
> 标签：iphone, objective-c, uitableview

![在此处输入图像描述](../Images/f2f26cfee5b7853af92bb8a7060dd34e.png)我正在开发一个包含表格单元格的应用程序。我希望当我滑动表格单元格时它显示两个选项，第一个是关于那个单元格值，另一个是删除那个值。我如何以单元格值显示在单元格的一半中并且选项显示在单元格的一半中的方式显示这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T06:49:21.240

有一个开箱即用的解决方案，称为[HHPanningTableViewCell](https://github.com/gloubibou/HHPanningTableViewCell)。它完全满足您的需求！

> HHPanningTableViewCell 是一个 UITableViewCell 实现“滑动显示”抽屉视图。这样的视图通常包含应用于当前行的操作按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T23:17:40.453

这个库，SWTableViewCell，应该可以帮助你： [https ://github.com/CEWendel/SWTableViewCell](https://github.com/CEWendel/SWTableViewCell)

> 一个易于使用的 UITableViewCell 子类，它实现了一个可滑动的内容视图，它公开了实用按钮（类似于 iOS 7 邮件应用程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T06:09:05.437

您必须创建一个自定义单元格并覆盖 Apple 向左滑动以删除然后显示您的选项的行为。您可以将手势识别器添加到单元格并在向左滑动时为单元格内容视图设置动画，并在您的选项视图中进行动画处理，或者您喜欢它。如果需要，我可以编写示例代码。

# ios - IOS设备上的MAC ID检索是否有效？

> ID：14929846
> 
> 赞同：0
> 
> 时间：2013-02-18T05:07:42.833
> 
> 标签：ios

有人可以告诉苹果是否允许在 iOS 设备上检索 MAC ID，还是在提交到 App Store 时拒绝我的应用程序？

# c# - 使用 jquery 实现 ajax

> ID：14929851
> 
> 赞同：0
> 
> 时间：2013-02-18T05:08:28.947
> 
> 标签：c#, jquery, ajax, json

我尝试使用 jQuery 实现 ajax。这是我第一次使用 ajax.so 在按钮单击中我需要显示当前日期时间。为此，我编写了以下代码

//==============aspx页面===============

```
<script type="text/javascript">

    $(document).ready(function (){
        var Button1 = $("#Button1");
        var Label1 = $("#Label1");
        Button1.click(function (){
          $.ajax({
                type: "POST",
                url: "/myownajax14/WebService/WebService1.asmx/GetDateTime",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#Label1").text(msg.d);
                    //alert('hi');
                    },
                error:alert('error');     
            });     

        });
    }); 
```

//================asmx.cs页面===========

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    [WebMethod]
    public string GetDateTime()
    {
        return DateTime.Now.ToString();
    }
} 
```

我的问题是，它没有给出答案..它没有显示任何错误。这段代码有任何错误吗？请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:09:10.647

您是否尝试过使用浏览器直接访问 ASMX？这样，您可以轻松查看您的 ASMX 正在产生什么样的响应......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:14:02.697

我也有类似的问题，很简单试试这个：

您需要指定`type="button"`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:22:27.293

内容类型：“应用程序/json；” 表示客户端需要服务器响应一个json类型的数据，但是服务器响应的是一个字符串类型的数据。

在“成功”块中，“msg”必须像“2010-10-10”，所以在 msg.d 中会发生错误。

尝试以下字符串类型数据，或在服务器代码中响应 json 类型数据，例如 {"y":2010,"m":10,"d":10}。

```
contentType: "application/text; charset=utf-8",
success: function (date) {
    $("#Label1").text(date);
} 
```

# iphone - iPhone应用提交到applestore

> ID：14929854
> 
> 赞同：-1
> 
> 时间：2013-02-18T05:08:42.337
> 
> 标签：iphone, ipad

我将在 Apple Store 上提交我现有应用程序的更新版本。我不确定何时提交我的新版本以供批准，而不是在此期间我在 Apple Store 上运行的应用程序将被删除或保留。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:11:44.907

当您提交您的应用程序时，需要 10 天才能接受，在此期间您正在运行的应用程序不会被删除。但是当您的更新版本被接受时，您以前的版本会被新版本替换。

# excel - 在带有变量的 VBA 函数中使用单元格值

> ID：14929855
> 
> 赞同：2
> 
> 时间：2013-02-18T05:08:47.180
> 
> 标签：excel, vba

我是新手，`VBA`虽然很简单，但我无法做我想做的事。

我需要自动修改一个大（333x333）空（全零）电子表格的单元格。

在一个单独的电子表格中，我有所有要修改的单元格的行和列。（其中 5000 个）

`for`循环似乎适合此目的。

这是我的宏的代码。问题出现在最后一行之前。

```
Dim val1 As String, val2 As String, i As Integer

For i = 1 To 333

  Sheets("Feuil2").Activate
  ActiveSheet.Cells(i, 1).Select

    val1 = Cells(i, 1).Value
    val2 = Cells(i, 2).Value

Sheets("Classeur2.csv").Select
Cells(val1, val2).Select

ActiveCell.FormulaR1C1 = "1"

Next i 
```

导致问题的行是这一行： Cells(val1, val2).Select

我相信我的错误是语法错误。但我不知道我应该在我的两个变量“val1”和“val2”之前、之后或周围添加什么

你怎么看 ？

非常感谢你的帮助。尼古拉斯。

**编辑**

我的问题现在解决了：

第一个答案正是我的宏观工作所需要的。第二个答案是正确且更快的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T07:15:19.830

如果您使用 VBA，则无需激活或选择工作表或单元格。您可以直接访问它。编码：

```
Dim rng As Range
For Each rng In Sheets("Feuil2").Range("A1:A333")
    Sheets("Classeur2.csv").Cells(rng.Value, rng.Offset(, 1).Value) = "1"
Next rng 
```

产生与乔的代码相同的结果。

如果由于某些原因需要切换工作表，`Application.ScreenUpdating = False`请在宏的开头（和`Application.ScreenUpdating=True`结尾）使用。这将消除屏幕闪烁 - 并加快执行速度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T05:14:30.763

VAL1 和 VAL2 需要变暗为整数，而不是字符串，才能用作 Cells 的参数，它以整数而不是字符串作为参数。

```
Dim val1 As Integer, val2 As Integer, i As Integer

For i = 1 To 333

  Sheets("Feuil2").Activate
  ActiveSheet.Cells(i, 1).Select

    val1 = Cells(i, 1).Value
    val2 = Cells(i, 2).Value

Sheets("Classeur2.csv").Select
Cells(val1, val2).Select

ActiveCell.FormulaR1C1 = "1"

Next i 
```

# shell - SED和整线

> ID：14929856
> 
> 赞同：0
> 
> 时间：2013-02-18T05:08:54.760
> 
> 标签：shell, sed

我正在尝试为我的包创建规范文件。要列出我正在使用`find`命令的文件并将其重定向到文件：

```
readonly TOPDIR=`pwd` 
cd package_folder
find . -iname >>$TOPDIR/list_files 
```

现在我的问题是我需要`%dir`为每个目录添加前缀，否则我会得到文件列出两次错误。假设我的文件内容是：

```
$ cat list_files
/bin
/bin/file_a
/bin/my_folder
/bin/my_folder/file_b 
```

我所做的是寻找 dir's

```
for file_name in `cat $TOPDIR/list_files`
do
  chk_1=`ls -l $file_name |grep "^d"`
  if [ "chk_1" ] ;then
   sed -i "s@^$file_name@%dir $file_name@" $TOPDIR/list_files
  fi
done 
```

现在我的输出文件（list_files）看起来像这样：

```
%dir /bin
%dir /bin/file_a
%dir /bin/my_folder
%dir /bin/my_folder/file_b 
```

原因`/bin`是一个目录，所以它替换`/bin`为`%dir`. 好吧，这有点奇怪，因为我没有给出`@g`选项，但它仍然在替换 all `/bin`。有什么办法可以加入`"\n"`吗`sed`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:58:52.370

你的脚本很容易出错。改用这个：

```
while IFS= read -r file_name
do
   [ -d "$file_name" ] && pfx="%dir " || pfx=""
   printf "%s%s\n" "$pfx" "$file_name"
done < "$TOPDIR/list_files" > tmp &&
mv tmp "$TOPDIR/list_files" 
```

它将保护您免受包含空格、制表符、@ 符号、反斜杠等的文件名的影响，并且如果您的 tmp 文件空间不足（sed 即时创建），它将阻止您损坏原始文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:21:22.717

使用您当前的技术，确保模式与整行匹配`$`以标记行尾：

```
sed -i "s@^$file_name\$@%dir $file_name@" $TOPDIR/list_files 
```

需要反斜杠以防止外壳扩展`$@`；`sed`看不到反斜杠。

# asp.net - 如何显示 facebook 之类的图像或添加下一个和上一个图像

> ID：14929860
> 
> 赞同：3
> 
> 时间：2013-02-18T05:09:25.693
> 
> 标签：asp.net

当我点击相册到下一页时，已显示相册中的所有图像

eachalbum.aspx 页面

```
<%@ Page Title="" Language="C#" MasterPageFile="~/master_Main.master" AutoEventWireup="true" EnableEventValidation="true" CodeFile="each_album.aspx.cs" Inherits="each_album" %>

<%@ Register src="user_control/AddAlbumUserControl.ascx" tagname="AddAlbumUserControl" tagprefix="uc1" %>
<%@ Register src="user_control/AddPhotosUserControl.ascx" tagname="AddPhotosUserControl" tagprefix="uc2" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <link href="css/photostyle.css" rel="stylesheet" />
    <link href="css/NewAlbumCreationStyleSheet.css" rel="stylesheet" />
    <script src="js/myjqsecond.js"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <div id="DimAllDivs">
        <div id="EachImageDiv">
            <div id="previousButton" onclick="DirectionImage('previous');"></div>
            <div id="showImage">
           </div>
            <div id ="nextButton" onclick="DirectionImage('next');"></div>
        </div>
    </div>

    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <div id="user_div">

        <div id="user_image_div">40x40</div>

        <div id="user_name_div"><a href="javascript:void(0)">Nisar Ahmad Albums</a></div>
        <div id="EachAlbumButtons">
            <div><asp:Button ID="btnAddPhotos" runat="server" Text="Add Photos" CssClass="AlbumButton" OnClick="btnAddPhotos_Click"/></div>
            <div><asp:Button ID="btnAddAnotherAlbum" runat="server" Text="Add Album" CssClass="AlbumButton" OnClick="btnAddAnotherAlbum_Click"/></div>
            <div><asp:Button ID="btnAlbumSetting" runat="server" Text="Settings" CssClass="AlbumButton"/></div>
        </div>
    </div>
    <div style="clear:both;"></div>

    <div id="AddAlbumDiv">
        <asp:Panel ID="pnlAddAlbum" runat="server" Visible="false">
            <%-- This control is used for adding Photos and And Albums --%>
            <uc1:AddAlbumUserControl ID="AddAlbumUserControl1" runat="server" />
        </asp:Panel>
    </div>

    <div id="AddPhotosDiv">
        <asp:Panel ID="pnlAddPhotos" runat="server" Visible="false">
            <uc2:AddPhotosUserControl ID="AddPhotosUserControl1" runat="server" />
        </asp:Panel>
    </div>
    <div id="user_photos_generaldiv">
<div id="your_photos_text">
<h1>Visit to Agha Khan University Karachi</h1>

</div>

<div id="folders">
       <asp:DataList id="dlImagesDisplay" runat="server" RepeatDirection="Horizontal" RepeatColumns="4">
                <ItemTemplate>
                    <div id='<%#DataBinder.Eval(Container.DataItem,"PhotoID")%>' class="imageDelete">
                        <a href="javascript:void(0)" onclick="ibtnDel_Click" runat="server"><img src="images/icons/mono-icons/stop32.png" 
                                   id='<%#DataBinder.Eval(Container.DataItem,"PhotoID")%>'class="ibtnDel" /></a>
                    </div>
                    <div class="displayImage">
                        <a href='javascript:void(0)' onclick="showLargImage('<%# DataBinder.Eval(Container.DataItem,"PhotoID")%>'
                            ,'<%# "Gallery/"+DataBinder.Eval(Container.DataItem,"Title")+"/"%>'
                            ,'<%# DataBinder.Eval(Container.DataItem,"AlbumID")%>')" rel="">
                                    <img src='<%# "Gallery/"+DataBinder.Eval(Container.DataItem,"Title")+"/"
                                    +DataBinder.Eval(Container.DataItem,"PhotoName") %>'
                                         class="displayImage"
                                         onmouseover="OnMouvseOverPict(<%#DataBinder.Eval(Container.DataItem,"PhotoID")%>)"
                                         onmouseout="OnMouseOutPict(<%#DataBinder.Eval(Container.DataItem,"PhotoID")%>)"/></a>
                    </div>
                    <div id="LikeComment">
                        like Comment
                    </div>
</ItemTemplate>
            </asp:DataList>

</div>

</div>
</asp:Content> 
```

jQuery编码

```
function showLargImage(imgId,Loc,AlbumID)
{

    //alert(imgId);
    $.ajax({

        type: 'POST',
        url: 'AjaxFiles/forImage.aspx',
        data: 'ImageId=' + imgId + '&Loc=' + Loc + '&AlbumID=' + AlbumID,
        success: function (data) {
            //$('#requestsentdiv').html(data);
            //$('#requestsentdiv').show();
            $('#DimAllDivs').slideDown();
            $('#showImage').html(data);

        }
    });
}

function LargCancel()
{
    $('#DimAllDivs').slideUp();
} 
```

forImage.aspx.cs 文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class AjaxFiles_forImage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        InsertionDAL obj = new InsertionDAL();
        string Phtml="";
        List<EachPicture> picInfo = new List<EachPicture>();
        string imageName = null;
        int ImageId = Convert.ToInt32(Request["ImageId"]);
        string Location = Request["Loc"];
        int albumID = Convert.ToInt32(Request["AlbumID"]);

        string direction = Request["Direction"];
       // Response.Write(ImageId);

        picInfo = obj.GetAlbumPictures(albumID);

        foreach (EachPicture pic in picInfo)
            {
                if (pic.PictureID == ImageId)
                {
                   imageName = pic.PictureName ;
                }
            }

        if(direction == "next")
        {

        }
        else if (direction == "previous")
        {

        }
        int i = 0;
        int var = picInfo.Count();
        //Phtml = picInfo[0][0] + "/////" + picInfo[0][1];
        //rdr = obj.GetPictureInfo(Convert.ToInt32(ImageId));
        //if (rdr.HasRows)
        //{
        //    Phtml = Phtml + "GetInfo";

        Phtml = @"<img src='" + Location + imageName + @"' width='600' height='400' alt='User Image ' onmouseover='showPreviousNext();'
onmouseout='hidePreviousNext();'/><br/>

            <input type='button' id='LCancel' value='Cancel' onclick='LargCancel();' />";

        //}
        //else
        //{
        //    Phtml = "<h3>Record Not Found</h3>";
        //}
        Response.Write(Phtml);
    }
} 
```

当我单击单个图像时，单个图像已打开，我将如何转到相册中的下一张和上一张图像？

# c# - 动态页面 - 访问事件中的元素

> ID：14929864
> 
> 赞同：-3
> 
> 时间：2013-02-18T05:10:13.853
> 
> 标签：c#, asp.net

如何在 pageload() 事件中创建动态页面，以及如何在按钮单击事件或任何其他事件中调用文本框或单选按钮等值？

请举一个小例子。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:23:01.440

您可以动态创建创建任何 ASP.NET 控件并将它们添加到页面。

文本框 txtBox = new TextBox();

如果您必须在回发中访问这些值。那么在 Page_Init() 中创建它们比在 Page_Load() 中创建它们更好。如果您正在创建一个动态元素，那么您必须在每次回发时创建它们。

有一些关于这些主题的好文章。谷歌他们

# visual-studio - Web Deploy 3.0 发布时出现令人愤怒的 401 错误

> ID：14929866
> 
> 赞同：2
> 
> 时间：2013-02-18T05:10:24.067
> 
> 标签：visual-studio, iis, webdeploy

我似乎无法将简单的应用程序部署到我作为管理员的 IIS 服务器上。这是我从 VS2010 得到的错误信息（域名被修改以保护无辜者）：

```
 ------ Build started: Project: HelloWorldWeb, Configuration: Debug Any CPU ------
      HelloWorldWeb -> D:\$Data\mhtest\HelloWorldWeb\bin\HelloWorldWeb.dll
    ------ Publish started: Project: HelloWorldWeb, Configuration: Debug Any CPU ------
    Transformed Web.config using Web.Debug.config into obj\Debug\TransformWebConfig\transformed\Web.config.
    Auto ConnectionString Transformed Account\Web.config into obj\Debug\CSAutoParameterize\transformed\Account\Web.config.
    Auto ConnectionString Transformed obj\Debug\TransformWebConfig\transformed\Web.config into obj\Debug\CSAutoParameterize\transformed\Web.config.
    Copying all files to temporary location below for package/publish:
    obj\Debug\Package\PackageTmp.
    Start Web Deploy Publish the Application/package to http://www.myserver.com/MSDEPLOYAGENTSERVICE ...
    C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): Error : Web deployment task failed.(Remote agent (URL http://www.myserver.com/MSDEPLOYAGENTSERVICE) could not be contacted.  Make sure the remote agent service is installed and started on the target computer.)
    Make sure the site name, user name, and password are correct. If the issue is not resolved, please contact your local or server administrator.
    Error details:
    Remote agent (URL http://www.myserver.com/MSDEPLOYAGENTSERVICE) could not be contacted.  Make sure the remote agent service is installed and started on the target computer.
    An unsupported response was received. The response header 'MSDeploy.Response' was 'V1' but 'v1' was expected.
    The remote server returned an error: (401) Unauthorized.
    Publish failed to deploy.
    ========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
    ========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

到目前为止，我有：

*   在 IIS 服务器上安装 Web Deploy 3.0
*   安装了 Web 管理服务，虽然我不认为我正在尝试使用它，但我想暂时在端口 80 上执行所有这些操作（而不是 8172）。
*   确保服务 MsDepSvc 以管理员成员身份运行
*   确保我在部署期间在 VS2010 中使用的凭据是管理员成员的用户
*   确保我输入的站点和应用程序与 IIS 服务器上已经存在的内容相匹配

其他详情：

*   IIS 服务器是远程的，位于防火墙后面，不在我工作站的域中。我认为我应该使用基本身份验证来执行此操作，尽管如果它还不是默认设置，我无法找到指定它的方法。
*   如果我打开浏览器并导航到[http://www.myserver.com/MSDEPLOYAGENTSERVICE](http://www.myserver.com/MSDEPLOYAGENTSERVICE)，肯定会提示我输入凭据。如果我输入有效的管理员凭据，我会看到一个空白屏幕 - 网络跟踪显示服务器以 401 响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T01:36:52.530

我设法让它工作。我返回到故障排除文档： [http ://www.iis.net/learn/publish/troubleshooting-web-deploy/troubleshooting-common-problems-with-web-deploy](http://www.iis.net/learn/publish/troubleshooting-web-deploy/troubleshooting-common-problems-with-web-deploy)

大约三分之一的地方引用了 401 错误，我更仔细地阅读了它：

## 尝试以非管理员身份访问远程代理服务

症状

*Microsoft.Web.Deployment.DeploymentException：*

```
Could not complete the request to remote agent URL 'http://DestinationServer/msdeployAgentService'. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized. 
```

根本原因

*远程代理服务要求调用者是管理员组的成员或来自已添加到管理员组的域帐户。**由于 Web Deploy 2.0 中的错误，不是内置帐户的本地管理员将无法使用远程代理服务。***

修复/解决方法

*提供管理凭据*

所以，我不需要使用“一个”管理员帐户，我需要使用“该”管理员帐户。如果它没有使用令人困惑的双重否定，并且很清楚当前版本中也存在的错误，我可能第一次注意到这一点，即在撰写本文时为 3.0。

# asp.net - 如何在 aweber 中进行 ajax 调用以从 asp.net 中的代码隐藏中获取订阅者列表？

> ID：14929869
> 
> 赞同：0
> 
> 时间：2013-02-18T05:10:38.053
> 
> 标签：asp.net, aweber

我想从网站获取订阅者电子邮件列表，那么如何从代码后面获取 ajax 调用？

```
 WebClient client = new WebClient();
  WebRequest req =   WebRequest.Create("https://api.aweber.com/1.0/accounts/1/lists/xxxxxx/");
  req.ContentType = "application/json";
  WebResponse response = req.GetResponse(); 
```

上面的“xxxxx”表示一个列表名。但它给了我一个错误的请求错误，所以我如何从asp.net c#中的代码发出请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:06:55.023

URL 是导致您的问题的最可能原因。AWeber 资源通过数字 ID 而非名称来寻址。因此，对于您的“xxxxx”，您将需要列表 ID 而不是您指定的列表名称。

当您检索时，列表 ID 和列表名称在“列表”集合 JSON 中可见：

```
https://api.aweber.com/1.0/accounts/<ACCOUNT ID>/lists/ 
```

我注意到的另一件事是，您的 URL 将帐户 ID 设置为 1。我怀疑在您的情况下这不是准确的帐户 ID。

最后，为了实现检索电子邮件地址的目标，您需要在 URL 的末尾添加“订阅者”，以便访问适当的资源。虽然“列表”资源包含特定于所讨论列表的数据，但订阅者数据是一个完整的附加级别的详细信息。

示例网址：

`https://api.aweber.com/1.0/accounts/<ACCOUNT ID>/lists/<LIST ID>/subscribers`

如果您在进行这些更改后仍然遇到异常，请在 AWeber API 支持 (api@aweber.com) 上写下详细信息。

# actionscript-3 - 如何在 AS3 中播放麦克风字节数组中的声音？

> ID：14929872
> 
> 赞同：1
> 
> 时间：2013-02-18T05:11:04.833
> 
> 标签：actionscript-3, audio, bytearray, playback, microphone

我正在尝试播放从麦克风捕获的 ByteArray 的声音，我希望听到麦克风发出的声音，但我得到的只是随机的失真声音。这是我现在使用的代码：

```
var playBa:ByteArray;

var player:Sound = new Sound();
sound.addEventListener(SampleDataEvent.SAMPLE_DATA, playMic);
sound.play();

var mic:Microphone = Microphone.getMicrophone();
mic.gain = 100;
mic.rate = 44;
mic.setSilenceLevel(0, 4000);
mic.addEventListener(SampleDataEvent.SAMPLE_DATA, onMicSample);

function playMic(e:SampleDataEvent):void
{
    if (playBa != null) e.data.writeBytes(playBa, 0, playBa.length);
}

function onMicSample(e:SampleDataEvent):void
{
    playBa = e.data;
    playBa.position = 0;
    player.play();
} 
```

在几秒钟的失真声音之后，这就是我在输出窗口中得到的：

```
RangeError: Error #2004: One of the parameters is invalid.
at flash.media::Sound/play()
at vclass_fla::MainTimeline/onMicSample() 
```

请帮我。我是 AS3 和这里的新手。非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:27:25.850

有些麦克风非常敏感。您需要调整适度的设置，如下所示。此外，如果扬声器更靠近麦克风，声音会循环播放。

```
var myMic:Microphone = Microphone.getMicrophone(); // detect microphone
myMic.gain = 50;
myMic.setUseEchoSuppression(true);
myMic.setLoopBack(true);
myMic.setSilenceLevel(50, 1000); 
```

有关声音捕获的更多信息，请尝试此， [捕获麦克风声音数据](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7d0b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T20:57:43.750

问题是样本数据事件需要 2048 到 8192 个样本块。如果麦克风在调用“playMic”时记录的样本，则运行时会抛出“RangeError: Error #2004 ...”。

```
function playMic(event:SampleDataEvent):void
{
    trace("sample event");
    for (var ii:uint = 0; ii < 8192 && playBa.bytesAvailable > 0 ; ii++)
    {
        var n1:Number = playBa.readFloat();
        //trace(n1);
        event.data.writeFloat(n1);
        event.data.writeFloat(n1);
        if(playBa.bytesAvailable == 0)
        {
            trace("data_finished");
            break;
        }
    }

} 
```

# java - 如何检查 JSP 中的 URL 模式？

> ID：14929876
> 
> 赞同：0
> 
> 时间：2013-02-18T05:11:13.300
> 
> 标签：java, spring, jsp, tags

如何将当前页面 URL 与特定模式匹配。例如，我想根据当前 JSP 页面的 URL 模式做出使页面上某个区域出现或消失的 if 语句。

据我所知，我必须使用标签：

```
<c:if test="the conditional test">Region</c:if> 
```

例如，如果 URL 的结尾与 /me/* 匹配，我希望该区域出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:35:55.893

您可以使用

> HttpServletRequest#getRequestURI()

获取请求 URI。这

> 获取ServletPath()

正如其他答案所建议的那样不一定有用，因为它代表 servlet 路径（JSP/Servlet URL 模式中的匹配部分），而不是请求 URI（最终用户在浏览器地址栏中看到）。如果 JSP 由某个前端控制器 servlet 转发，您将获得 JSP 自己的路径，而不是浏览器地址栏中的虚拟路径。

假设您有一个由应用程序范围内的 List 表示的菜单，其中 Page 类具有 url 和 name 属性

，您可以使用此代码查找当前页面 url，然后执行您的任务

```
<c:set var="active" value="${fn:endsWith(pageContext.request.requestURI, page.url)}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:37:52.027

类似于以下内容：

```
<c:set var="url" value="${pageContext.request.requestURL}" />

<c:set var="pathinfo" value="${fn:split(url, '/')}" />
<c:set var="pathnode" value="${pathinfo[pathinfo.length - 1]}" />

<c:if test="${pathnode == 'me'}">
   <p>Show this region</p>
</c:if> 
```

# android - 陀螺仪传感器Android的结果

> ID：14929889
> 
> 赞同：0
> 
> 时间：2013-02-18T05:12:27.923
> 
> 标签：android, sensors, gyroscope

我刚刚完成了获取数据陀螺仪传感器的项目。如果我将手机水平放在桌子上，陀螺仪传感器的结果是： Roll (X) : 5.326322E-7 Pitch (Y) : 5.326322E-7 Yaw (Z) : 5.326322E-7

从逻辑上讲，结果应该是 0，因为手机放在桌子上。那么，有人可以帮助我吗？我在下面给出我的代码。非常感谢您提前回复:)。

```
public void onSensorChanged(SensorEvent event) {
if(event.sensor.getType()==Sensor.TYPE_GYROSCOPE)
    {

        float roolX = event.values[0];
        float pitchY = event.values[1];
        float yawZ = event.values[2];

        koordinatrollX.setText("Orientation X (Roll) :" + Float.toString(event.values[0]));
        koordinatpitchY.setText("Orientation Y (Pitch) :" + Float.toString(event.values[1]));
        koordinatyawZ.setText("Orientation Z (Yaw):" + Float.toString(event.values[2]));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:30:06.613

E-7 = 10^-7 所以它非常接近于 0。你不能指望硬件完美校准或桌子完美平整。您可以让用户根据手机所处的表面重新校准，但您得到的结果已经非常接近于零。

# android - 让用户更改默认方向

> ID：14929891
> 
> 赞同：2
> 
> 时间：2013-02-18T05:12:29.577
> 
> 标签：android, android-layout, actionbarsherlock, android-preferences, android-orientation

我想允许用户更改允许 Android 以纵向或横向显示的选项。我所做的是允许用户设置首选项，然后将其强制应用到程序中。

在这一点上，我在里面使用这样的代码`onCreate`：

```
prefs = PreferenceManager.getDefaultSharedPreferences(this);
if (prefs.getBoolean("landscapeModeEnabled", false)) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
}
else { 
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}

super.onCreate(savedInstanceState); 
```

现在的问题是，如果屏幕不是“强制”方向，**它会创建两次 Activity 。**也就是说，如果用户想要横向，默认（纵向）方向的手机将加载屏幕两次。

我知道我可以使用 XML 进行设置，但这不允许用户更改方向的偏好。

如果这很重要，我正在使用`SherlockFragmentActivity`来自*Action Bar Sherlock*的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:35:06.927

有2个这样的活动：

> 移动乐园
> 
> mActivityPort

中具有不同的方向`Manifest`。

检查上一个活动中的首选项并启动相应`Activity`的 . 可能不是最好的解决方案:(

# c# - 进程正在进行时退出应用程序

> ID：14929893
> 
> 赞同：0
> 
> 时间：2013-02-18T05:12:39.603
> 
> 标签：c#, winforms

在我的表单应用程序中单击一个按钮时，所有其他控件都被冻结，但是如果该过程很耗时，我想使用一个按钮来退出应用程序。我怎样才能做到这一点？由于所有按钮都被冻结。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:23:08.303

你可以试试[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。您可以在不影响 UI 响应能力的情况下运行该过程。此外，您可以取消该处理。

参考链接中的示例，将您的流程逻辑放在`backgroundWorker1_DoWork`方法中，只需按照示例源代码中的注释即可。

# algorithm - 特定遗传算法成本函数

> ID：14929899
> 
> 赞同：1
> 
> 时间：2013-02-18T05:13:04.257
> 
> 标签：algorithm, genetic, fitness

我被分配了创建遗传算法的任务，这是一个分配问题，其目标是将组件分配到两个设备机架中，以最小化互连程度。

基本上我要做的就是读取一个矩阵`A`，它是组件连接的邻接列表。`cij`表示组件`i`和组件之间的连接数`j`。每次都应该是对称的。我们有一个人口，所有的值都存储在二维数组中，这就是我的实现。

读入的矩阵`A`是我们的邻接矩阵，而人口将决定我们如何对项目进行分类。如果将读入的矩阵中的相应元素放入其中，则机架是`bin0`和`bin1`，并且如果 ，则适用相同的规则。`population[cij] = 0``A``bin0``population[cij] = 1`

现在的问题是在人口矩阵中找到提供最少互连量的行，它是不同箱中组件之间的权重之和。

这是我们的基本案例的图像：

![屏幕截图](../Images/4cdb5fc6f3fa0488f9a2184346b04d1b.png)

...其中`A`读入的矩阵在右侧，人口如下所示，矩阵`A`中元素的分箱方式显示在中间。到目前为止，我可以计算罚分，这是教授给出的约束，我还可以确定每个 bin 中有多少元素，但是到目前为止，我还没有按照描述和图片所示计算成本。到目前为止，这是我的成本函数：

```
public static int[] calcCost(int[][] matrix, int[][] population){
int cost[] = new int[size];

for(int m=0;m<size;m++){
    for(int i=0; i<size; i++){
        for(int j=0; j<size; j++){
            //System.out.println(m + "\t" + i + "\t" + j);
            if(population[i][j] == 1){
                cost[m] += matrix[i][j];
                }
            }//end for 3
        }// end for 2
    }//end for 1
    //printArrayI(cost);
    return cost;
} 
```

这个想法是`m`跟踪我们在整体计算和元素中的位置`i`，并`j`扫描行和列以查找总体中的连接，当找到连接时，`cost[i]`应该将该连接反映为交叉边的权重总和两个垃圾箱。到目前为止，这还不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:16:34.493

我已经解决了这个问题，我只是迭代错误。这是我找到的解决方案。

```
public static int[] calcCost(int[][] matrix, int[][] population){
int cost[] = new int[size];

for(int m=0;m<size;m++){
    for(int i=0; i<size; i++){
        if(population[m][i] == 0){
            for(int j=0; j<size; j++){
                if(population[m][j] == 1){
                    cost[m] += matrix[i][j];
                    }
                }
            }
        }// end for 2
    }//end for 1
    printArrayI(cost);
    return cost;
} 
```

# jquery - jquery选择具有动态ID的选项列表

> ID：14929901
> 
> 赞同：1
> 
> 时间：2013-02-18T05:13:26.787
> 
> 标签：jquery

我有一个选项列表，其 id 有时可能是其中之一：

```
edit-panes-billing-billing-zone
edit-panes-billing-billing-zone--1
edit-panes-billing-billing-zone--2
edit-panes-billing-billing-zone--3
edit-panes-billing-billing-zone--4 
```

一次只有一个选择元素。

是否可以使用 jQuery 动态选择选项列表？
这是我尝试过的，但它不起作用：

```
$("select[id^='edit-panes-billing-billing-zone--']").each(function() {
    alert('test'):              
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:27:47.557

您的代码中有许多失败的语法错误：

```
alert('test'): 
```

应该

```
alert('test'); 
```

和

```
alert('test'):              
} 
```

应该

```
alert('test');              
}); 
```

最终结果应该是：

```
$("select[id^='edit-panes-billing-billing-zone--']").each(function() {
    alert('test');             
}); 
```

这在我运行的所有测试中都成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:19:41.897

尝试

```
$(document).ready(function() {
    $('select option[id^="edit-panes-billing-billing-zone--"]').each(function(){
         alert($(this).text());
    });
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:19:48.370

为您拥有的每个选择提供属性类，例如

```
<select class="my-select" id="edit-panes-billing-billing-zone"></select>
<select class="my-select" id="edit-panes-billing-billing-zone--1"></select>
<select class="my-select" id="edit-panes-billing-billing-zone--2"></select>
<select class="my-select" id="edit-panes-billing-billing-zone--3"></select>
<select class="my-select" id="edit-panes-billing-billing-zone--4"></select> 
```

然后代码是（按类获取元素）：

```
$(document).ready(function() {
    $(".my-select").each(function() {
       alert('test');              
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T05:26:51.047

你的问题不是很清楚*`I have an option list with an id`*：

`option list`，我相信这些是一堆`<select>`标签。

```
$("select[id^='edit-panes-billing-billing-zone--']").change(function() {
    alert('test'):              
}); 
```

如果我们使用您的代码，那么您应该尝试这种方式：

```
$("select[id^='edit-panes-billing-billing-zone--']").each(function() {
    $(this).change(function(){
        alert('test');
    });              
}); 
```

## 笔记：

最后缺少您的代码`});`，并且您的警报以`colon-> :`not结尾`semicolon ';'`

而是`.each()`尝试`.change()`事件。

# wordpress - 如何在 the_content 之外使用 WP oembed 脚本

> ID：14929902
> 
> 赞同：6
> 
> 时间：2013-02-18T05:13:26.920
> 
> 标签：wordpress, video, custom-post-type

我有一个自定义帖子类型“视频”，并希望使用 WP 默认 oembed 脚本在指定区域显示 youtube、dailymotion 等视频。所以我使用了自定义字段“video url”，但问题是**oembed**在**the_content**中的工作不是使用自定义字段。那我该怎么做。或任何其他解决方案

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T05:29:25.637

如果自定义字段仅包含视频 URL ，那么您可以使用[wp_oembed_get](http://codex.wordpress.org/Function_Reference/wp_oembed_get)`http://www.youtube.com/watch?v=dQw4w9WgXcQ`获取 oEmbed HTML 代码：

```
$videourl = 'http://www.youtube.com/watch?v=dQw4w9WgXcQ';
$htmlcode = wp_oembed_get($videourl);
echo $htmlcode; 
```

如果您的自定义字段不仅仅包含 URL，您可以使用过滤器执行-function`the_content`执行的相同操作：`the_content`

```
$content = "<h2>this video is great</h2>\n<p>check it out</p>\n"
  . "[embed]http://www.youtube.com/watch?v=dQw4w9WgXcQ[/embed]";

$htmlcode = apply_filters('the_content', $content);
echo $htmlcode; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-07T19:18:49.993

这是您问题的完整答案。它也是一种更简洁、更快捷的方法，使用`wp_oembed_get`，而不是短代码。当然，更改`video_url`为您的自定义字段的名称。

此代码检查该`video_url`字段是否为空，然后嵌入视频。

```
<?php if (!((get('video_url', TRUE))=='')) {
    echo wp_oembed_get( get('video_url', true) );
}?> 
```

# jquery - jQuery Accordion 和 jQuery Tooltip 不能一起工作

> ID：14929905
> 
> 赞同：0
> 
> 时间：2013-02-18T05:13:45.283
> 
> 标签：jquery, widget, tooltip, accordion

更新：我使用了更多代码并让它工作。感谢您的意见。

我对 jQuery 很陌生，所以请多多包涵。我在让手风琴和工具提示很好地配合使用时遇到了一些问题。

我首先使用 jQuery UI 站点中的 Accordion Widget 创建了我的手风琴。每个手风琴部分都包含一个表格，表格中带有文本标签和一个小图像，当鼠标悬停在上面时应该会产生一个工具提示。

我使用此 Tooltipster 插件 ( [http://calebjacob.com/tooltipster/](http://calebjacob.com/tooltipster/) ) 分别创建了工具提示。我使用这个插件是因为我不知道如何使用 jQuery UI 站点 Tooltip 小部件以我想要的方式格式化工具提示（工具提示包含图像以及 HTML 和 CSS 格式的文本和链接）。

工具提示仅在我从其中一个手风琴部分中拉出一个表格并将其放置在没有包含手风琴代码的页面上时才起作用。当它们组合时，手风琴仍然有效，但工具提示不显示。

任何想法为什么会发生这种情况？任何有关如何修复的提示将不胜感激。如果需要更多信息，我很乐意提供。

谢谢

# parsing - Sml解析csv文件？

> ID：14929906
> 
> 赞同：1
> 
> 时间：2013-02-18T05:13:50.403
> 
> 标签：parsing, sml

这些是我定义的函数（内部使用的其他函数经过测试并且工作正常）：

qstring ：接受不包含双引号字符 (") 的字符串。

```
val qstring : string parser = (many (sat (fn c => not (c = #"\"")))) >>= (fn cs => 
          return (String.implode cs)) 
```

sepBy ：一个解析器，它接受一个解析器，该解析器将两个解析器作为输入；第一个匹配分隔符，第二个匹配内容。

```
val sepBy1 = fn s => fn p => p >>= (fn v1 => many (s >>= (fn _ => 
                 p >>= (fn v2 => return v2))) >>= (fn v2 => 
                             return (v1::v2)))

val sepBy = fn s => fn p => (sepBy1 s p) +++ (return [])

val csvline : record parser = sepBy1 (ch #",") field >>= 
                             (fn l => newline >>= (fn _ => return l))

val csvfile : csvfile parser = many csvline 
```

输入示例：

```
val csvEx = "\"John Smith\",72,1782,\"Colon, Cristobal\"\n198,2,3,4,5,64434,\"two\"\n" 
```

我得到 # 代替应该解析字符串的位置。有什么提示吗？

```
- parse csvfile csvEx;
val it =
SOME
    ([[String #,Number #,Number #,String #],
     [Number #,Number #,Number #,Number #,Number #,Number #,
     String #]],"") : (csvfile * string) option 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:08:45.713

我想你在这里使用 SML/NJ。这只是 NJ 漂亮打印机的一个限制。环境

```
Control.Print.printDepth := 20  (* or whatever *) 
```

应该举起它。

# android - 仅在第二次导航到 Fragment 时导致 java.IllegalStateException 错误，No Activity

> ID：14929907
> 
> 赞同：35
> 
> 时间：2013-02-18T05:13:50.683
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, android-support-library

我遇到了一个非常令人费解的错误，我什至不知道如何开始解决。

我有一个带有一个活动的简单应用程序，视图是用片段实现的。其中一个片段内部有一个 ViewPager；所以我决定我想使用 v4 支持库的 getChildFragmentManager 类。我还必须使用 ActionBarSherlock，这会导致问题，因为它没有随 v4 库的 v11 一起提供。

我通过将 ABS 中的 v4 支持库替换为 v11 库来解决此问题，并且所有已编译并似乎正在工作，包括 ViewPager。

这是奇怪的部分：

带有 ViewPager 的片段第一次打开时，它可以正常工作；但是第二次导航到，应用程序崩溃，给出一个无用的堆栈跟踪。通过调试，我发现问题出在 getChildFragmentManager 返回的 FragmentManager 上；它抛出无活动错误。

有人知道是什么原因造成的吗？

我将发布您认为相关的代码。

谢谢你，大卫

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-09-18T14:45:11.733

我点击了[jeremyvillalobos 答案](https://stackoverflow.com/a/16602540/2203164)中的链接（这很有帮助），这让我找到了[这个解决方法](https://code.google.com/p/android/issues/detail?id=42601#c10)。

```
public class CustomFragment extends Fragment {
    private static final Field sChildFragmentManagerField;

    static {
        Field f = null;
        try {
            f = Fragment.class.getDeclaredField("mChildFragmentManager");
            f.setAccessible(true);
        } catch (NoSuchFieldException e) {
            Log.e(LOGTAG, "Error getting mChildFragmentManager field", e);
        }
        sChildFragmentManagerField = f;
    }

    @Override
    public void onDetach() {
        super.onDetach();

        if (sChildFragmentManagerField != null) {
            try {
                sChildFragmentManagerField.set(this, null);
            } catch (Exception e) {
                Log.e(LOGTAG, "Error setting mChildFragmentManager field", e);
            }
        }
    }

    ...
} 
```

它对我很有效，无需重新实例化片段。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-17T06:09:30.600

这似乎是报告的错误

[https://code.google.com/p/android/issues/detail?id=42601](https://code.google.com/p/android/issues/detail?id=42601)

变量

FragmentManagerImpl mChildFragmentManager;

在 Fragment.java 中，分离时未设置为 null。所以下次加载片段时，变量仍然指向最后一个父级。

正如在该线程上所讨论的，一种解决方法是重新实例化 Fragment。

就我而言，我在 ActionBar 选项卡中的片段之间切换。有问题的 Fragment 嵌套了 Fragment 并且在返回文件加载器 Fragment 时正在崩溃应用程序。所以这是解决方法代码：

```
class MainTabsListener implements ActionBar.TabListener {
    public Fragment fragment;
    public int TabPosition;

    public MainTabsListener(Fragment fragment, int tab_position) {
        this.fragment = fragment;
        TabPosition = tab_position;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        CurrentFragment = fragment;
        CurrentTabSelectedPos = TabPosition;

        /**
         * This is a work-around for Issue 42601
         * https://code.google.com/p/android/issues/detail?id=42601
         * 
         * The method getChildFragmentManager() does not clear up
         * when the Fragment is detached.
         */
        if( fragment instanceof FileLoaderFragment ){
            fragment = reinstatiateFileLoaderFragment();
        }

        ft.replace(R.id.fragment_container, fragment);

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-13T09:51:46.960

可悲的是，这是支持 v4 的错误，仍然存在 :(

当您通过导航抽屉或其他类似的东西选择其他片段时，具有子片段的片段被分离。所以那些子片段的 fragmentManager(getChildFragmentManager()) 不再存在。当这些片段返回时，发生了错误。炸弹！

显然，support v4 应该在 onDetach() 中清理 mChildFragmentManager，但它没有，所以我们必须依靠自己。例如具有子片段的片段中的以下代码：

```
@Override
    public void onDetach() {
        try {
            Field childFragmentManager = Fragment.class.getDeclaredField("mChildFragmentManager");
            childFragmentManager.setAccessible(true);
            childFragmentManager.set(this, null);
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        super.onDetach();
    } 
```

一切都会好的，祝你有美好的一天:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T05:32:58.043

你的错误可能是android.view.InflateException？

如果是这样，你应该动态地膨胀 Fragment，不要使用 XML 布局。

并且，您不应将定义为 XML 布局的片段定位到片段事务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T11:14:18.320

我也有同样的问题。

在一项活动中，我有 3 个按钮可以用 transaction.replace(...) 切换片段

`FragmentTransaction transaction = getSupportFragmentManager().beginTransaction(); transaction.replace(R.id.layout_tablet_paneau, mLigneMessageFragment);`

其中一个片段包含一个带有自定义 FragmentPagerAdapter 的 ViewPage。因此，我必须执行 getChildFragmentManager() 以允许嵌套片段。

构造函数在这里：

```
public LignePagerAdapter(Fragment ligneMessageTabletFragment) {
        super(ligneMessageTabletFragment.getChildFragmentManager());
    } 
```

所以我有同样的错误：这个片段的第一次显示工作，但是当我显示其他片段并返回这个片段时，我得到了这个异常：

```
02-26 11:57:50.798: D/ACRA(776): 等待 Toast + worker 结束。杀死应用程序？真的
02-26 11:57:50.798: E/AndroidRuntime(776): 致命异常: main
02-26 11:57:50.798: E/AndroidRuntime(776): java.lang.IllegalStateException: 没有活动
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1075)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1861)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1474)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.os.Handler.handleCallback(Handler.java:587)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.os.Handler.dispatchMessage(Handler.java:92)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.os.Looper.loop(Looper.java:132)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 android.app.ActivityThread.main(ActivityThread.java:4126)
02-26 11:57:50.798: E/AndroidRuntime(776): at java.lang.reflect.Method.invokeNative(Native Method)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 java.lang.reflect.Method.invoke(Method.java:491)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
02-26 11:57:50.798: E/AndroidRuntime(776): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
02-26 11:57:50.798: E/AndroidRuntime(776): at dalvik.system.NativeStart.main(Native Method)
02-26 11:57:52.818: I/dalvikvm(776): threadid=4: 对信号 3 做出反应
02-26 11:57:52.818: I/dalvikvm(776): 将堆栈跟踪写入“/data/anr/traces.txt”

```

因此，我可以重新创建它以解决问题，而不是放置相同的片段实例，但我似乎效率不高。

```
transaction.replace(R.id.layout_tablet_paneau, LigneMessageTabletFragment.newInstance()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-09T12:50:52.377

参考@lopisan 答案：

我使用他的解决方案很长一段时间。

但我想有更好的方法来做到这一点！

如果 mChildFragmentManager.mActivity 为 null，则将 mChildFragmentManager 设置为 null。当 performActivityCreated 方法时。

```
@Override
void performActivityCreated(Bundle savedInstanceState) {
    if (getFragmentManagerActivity(mChildFragmentManager) == null) {
        setChildFragmentManager(this, null);
    }
    super.performActivityCreated(savedInstanceState);
}

public static FragmentActivity getFragmentManagerActivity(FragmentManager fragmentManager) {
    FragmentManagerImpl fm = (FragmentManagerImpl) fragmentManager;
    return fm.mActivity;
}

private static final Field sChildFragmentManagerField;
static {
    /**
     * BUG : causing a java.IllegalStateException error, No Activity, only
     * when navigating to Fragment for the SECOND time
     * http://stackoverflow.com /questions/15207305/getting-the-error-java-lang-illegalstateexception-activity-has-been-destroyed
     * http://stackoverflow.com/questions/14929907/causing-a-java-illegalstateexception-error-no-activity-only-when-navigating-to
     */
    Field f = null;
    try {
        f = Fragment.class.getDeclaredField("mChildFragmentManager");
        f.setAccessible(true);
    } catch (NoSuchFieldException e) {
        Log.e(TAG, "Error getting mChildFragmentManager field", e);
    }
    sChildFragmentManagerField = f;
}

public static void setChildFragmentManager(Fragment fragment, FragmentManager fragmentManager) {
    if (sChildFragmentManagerField != null) {
        try {
            sChildFragmentManagerField.set(fragment, fragmentManager);
        } catch (Exception e) {
            Log.e(TAG, "Error setting mChildFragmentManager field", e);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-05T06:52:31.803

我在使用 BottomNavigationView 开关和替换导致应用程序崩溃的片段时遇到了同样的错误。在正常速度下它工作得非常好，如果用户快速切换它曾经崩溃说

> IllegalStateException 无活动

在日志中

在我有之前

```
fragmentA = new FragmentA();
fragmentB = new FragmentB();
fragmentC = new FragmentC();

mBottomNavigationView.setOnNavigationItemSelectedListener(item -> {
        switch (item.getItemId()) {
   case R.id.fragmentA:
         replaceFragment(fragmentA);
   case R.id.fragmentB:
        repalceFragment(fragmentB);
   case R.id.fragmentC:
        repalceFragment(fragmentC);
   }
}; 
```

我认为这种片段的预先创建和使用它们是为了替换正在创建问题，现在我每次都重新创建它。它开始工作正常

```
mBottomNavigationView.setOnNavigationItemSelectedListener(item -> {
        switch (item.getItemId()) {
   case R.id.fragmentA:
        fragment = new FragmentA();
         replaceFragment(fragment);
   case R.id.fragmentB:
        fragment = new FragmentB();
        repalceFragment(fragment);
   case R.id.fragmentC:
        fragment = new FragmentC();
        repalceFragment(fragment);
   }
};

 public void repalceFragment(Fragment fragment) {
    if (!this.isFinishing()) {
        if (!fragment.isAdded()) {
            if (!this.mDisplayedFragment.isRemoving()) {
                getFragmentManager().beginTransaction().replace(R.id.layout_fragment_container, fragment).commit();
                this.mDisplayedFragment = fragment;
            }
        }
    }
} 
```

希望它对某些人有所帮助，我做了太多的防御性编码，但它解决了我快速切换片段的问题

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-12-15T10:35:40.197

请检查此链接的第 32 号：

[分离父 Fragment 后保留的子 FragmentManager](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened&groupby=&sort=&id=42601)

脚步：

1.  [下载这个类并将其复制到您的项目中](https://code.google.com/p/android/issues/attachmentText?id=42601&aid=426010032000&name=BaseFragmentStatePagerAdapter.java&token=ABZ6GAcZwo9JDO4-4Mj5xNacEX82j8IfQQ%3A1450178714492)
2.  使用支持 v4 扩展每个片段（最佳实践）
3.  使用该类而不是 FragmentStatePagerAdapter

# php - PHP & IIS：用于密码更改的 LDAPS 连接

> ID：14929915
> 
> 赞同：3
> 
> 时间：2013-02-18T05:14:34.380
> 
> 标签：php, iis, active-directory, ldap

我的目标是通过使用 PHP 和 IIS 的 Web 界面更改 Active Directory 中的密码。

我一直在遵循[http://www.ashleyknowles.net/2011/07/iis-php-and-ldaps-with-active-directory/上的说明](http://www.ashleyknowles.net/2011/07/iis-php-and-ldaps-with-active-directory/)

在遵循这些说明之前，我无法为 LDAPS 连接绑定到 AD，但是在遵循这些说明之后，它似乎成功连接，但是当我尝试更改“unicodePwd”时出现“服务器不愿意执行”错误“ 价值。

请注意，下面的代码将成功更改 AD 中用户的任何**其他**值。

```
<?php

$ldaprdn  = 'CN=Admin User,OU=*******,OU=Staff,OU=********,DC=********,DC=*******,DC=******,DC=*****';
$ldappass = "*******";  // associated password

$ldapconn = ldap_connect("ldaps://***.***.***.***:636" ) or die("Could not connect to LDAP server.");

ldap_set_option($ldapconn, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldapconn, LDAP_OPT_REFERRALS, 0);

if ($ldapconn) {

    // binding to ldap server
    $ldapbind = ldap_bind($ldapconn, $ldaprdn, $ldappass);

    // verify binding
    if ($ldapbind) {
        echo "LDAP bind successful...";

        $username = '******';

        $dn = "CN=Bob Smith,OU=******,OU=******,OU=******,DC=******,DC=******,DC=******,DC=******";

        $newPassword = 'blah';

        $newEntry = array('unicodePwd' => encodePwd($newPassword));

        print_r($newEntry);

        if(ldap_mod_replace($ldapconn, $dn, $newEntry)) {
            print "<p>succeded</p>";
        } else {
            print "<p>failed</p>";
        }

        print_r(ldap_error($ldapconn));

    } else {
        echo "LDAP bind failed...";
        print_r(ldap_error($ldapconn));
    }

}

// Credit: http://www.cs.bham.ac.uk/~smp/resources/ad-passwds/
function encodePwd($pw) {
    $newpw = '';
    $pw = "\"" . $pw . "\"";
    $len = strlen($pw);
    for ($i = 0; $i < $len; $i++)
        $newpw .= "{$pw{$i}}\000";
    $newpw = base64_encode($newpw);
    return $newpw;
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:25:09.273

**解决了！！**

事实证明，通过遵循[Ashley Knowles 教程](http://www.ashleyknowles.net/2011/07/iis-php-and-ldaps-with-active-directory/)，我*成功*地通过 LDAP 建立了 SSL 连接，但是由于密码编码而发生错误。

成功密码编码的功劳归于这个[论坛帖子上的](http://forums.devshed.com/showpost.php?p=2148059&postcount=152)[hd42](http://forums.devshed.com/member.php?u=239564)，这使我能够相应地修改我的代码。

因此，一旦您在 IIS 服务器的硬盘驱动器中正确安装了证书等，此代码将通过 IIS Web 服务器使用 PHP 成功修改 Active Directory 中的用户密码（假设 $ldaprdn 用户具有足够的管理员权限）：

```
<?php

$ldaprdn  = 'CN=Admin User,OU=*******,OU=Staff,OU=********,DC=********,DC=*******,DC=******,DC=*****';
$ldappass = "*******";  // associated password

$ldapconn = ldap_connect("ldaps://***.***.***.***:636" ) or die("Could not connect to LDAP server.");

ldap_set_option($ldapconn, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldapconn, LDAP_OPT_REFERRALS, 0);

if ($ldapconn) {

    // binding to ldap server
    $ldapbind = ldap_bind($ldapconn, $ldaprdn, $ldappass);

    // verify binding
    if ($ldapbind) {
        echo "LDAP bind successful...";

        $dn = "CN=Bob Smith,OU=******,OU=******,OU=******,DC=******,DC=******,DC=******,DC=******";

        $newPassword = 'blah';

        $newPassword = "\"" . $newPassword . "\""; 
        $newPass = mb_convert_encoding($newPassword, "UTF-16LE");

        $newEntry = array('unicodePwd' => $newPass);

        print_r($newEntry);

        if(ldap_mod_replace($ldapconn, $dn, $newEntry)) {
            print "<p>succeded</p>";
        } else {
            print "<p>failed</p>";
        }

        print_r(ldap_error($ldapconn));

    } else {
        echo "LDAP bind failed...";
        print_r(ldap_error($ldapconn));
    }

} 
```

# c# - 使用 ASP.NET 时 SQL 查询在触发器中获取服务器名称

> ID：14929920
> 
> 赞同：0
> 
> 时间：2013-02-18T05:15:09.573
> 
> 标签：c#, asp.net, sql-server, triggers

我在 SQL 表上设置了一个触发器用于审计跟踪目的。这是触发代码。

```
ALTER TRIGGER [dbo].[tri_bowzer_UPDATE] ON [dbo].[Bowzer] 
For Update 
AS
    INSERT Table_Audit(TableName, Action, UserName, ComputerName) 
       SELECT  
          'bowzer', 'U', suser_sname(), host_name() 
```

它工作正常，并在桌面应用程序中显示用户名和计算机（客户端）名称。但是在 ASP.NET 应用程序中，我使用了一个常见的 SQL 登录名，以便可以使用此登录名执行数据库操作。我了解 SQL Server 由于此 ID 正在获取服务器机器名称。但是，我想在执行数据库操作时捕获客户端计算机名称。

可以进行哪些更改来获取客户端计算机名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:11:45.127

这种设计并不真正适合您想要实现的目标。我会考虑在您的数据库中添加更新的列，您可以在其中存储更新数据的用户的用户 ID 或机器名称。

这样，您将保持触发器逻辑简单，并避免与数据库的过多连接可能会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:29:43.537

您需要调整连接字符串以指定连接字符串属性 WSID（工作站 ID），如下所示

```
string strconn = "data source=SQLSERVER;initial catalog = DBNAME ; uid=sa;pwd=password;  WSID=" + (System.Net.Dns.GetHostEntry(Request.ServerVariables["remote_addr"]).HostName); 
```

然后您将`HOST_NAME()`在触发器中获得值作为客户端计算机名称

MSDN：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:18:42.310

您可以使用 T-SQL 设置客户端的 IP 地址，并使用该函数[`SET CONTEXT_INFO`](http://msdn.microsoft.com/en-us/library/ms187768.aspx)在触发器中检索此数据。[`CONTEXT_INFO`](http://msdn.microsoft.com/en-us/library/ms180125.aspx)

# c# - HtmlAgilityPack XML 捕获以下兄弟姐妹

> ID：14929921
> 
> 赞同：0
> 
> 时间：2013-02-18T05:15:24.767
> 
> 标签：c#, xml, xpath, html-agility-pack

下面是我的 HAP 的示例输入。

```
<?xml version="1.0" encoding="UTF-8"?>

<html>
  <div class="category">Name:</div>
  <div class="category1">Company ABC</div>
  <div class="category">ID:</div>
  <div class="category1">1</div>
  <div class="category">Location:</div>
  <div class="category1">Home ABC</div>
  <div class="category1">Home DEF</div>
</html> 
```

使用`XPath`是否可以捕获由前一个元素属性值分隔的元素的后续兄弟？在这种情况下，我想将它存储在一个列表中：

```
"Name" , {"Company ABC"}
"ID", {"1"}
"Location", {"Home ABC", "Home DEF"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:57:31.263

我不相信仅使用 XPaths 是可能的，但使用 XSLT 绝对是可能的。

这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="div[@class='category']">
    <div>
      <div class="category">
        <xsl:value-of select="."/>
      </div>
      <div>
        <xsl:variable name="nextCategoryCount" select="count(following-sibling::div[@class='category'])"/>
        <xsl:for-each select="following-sibling::div[count(following-sibling::div[@class='category']) = $nextCategoryCount]">
          <xsl:copy-of select="."/>          
        </xsl:for-each>
      </div>
    </div>

  </xsl:template>

  <xsl:template match="/html">
    <html>
      <xsl:apply-templates select="div[@class='category']"/>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

应用于示例 XML 会产生以下结果：

```
<html>
  <div>
    <div class="category">Name:</div>
    <div>
      <div class="category1">Company ABC</div>
    </div>
  </div>
  <div>
    <div class="category">ID:</div>
    <div>
      <div class="category1">1</div>
    </div>
  </div>
  <div>
    <div class="category">Location:</div>
    <div>
      <div class="category1">Home ABC</div>
      <div class="category1">Home DEF</div>
    </div>
  </div>
</html> 
```

这项工作由 XPath 完成：

```
following-sibling::div[count(following-sibling::div[@class='category']) = $nextCategoryCount] 
```

where`$nextCategoryCount`设置为当前类别之后的类别数。这不能在纯 XPath 中工作，因为在执行表达式之前无法设置该变量。

# xml - 如何使用 xslt 复制前面的节点？

> ID：14929923
> 
> 赞同：0
> 
> 时间：2013-02-18T05:15:52.537
> 
> 标签：xml, xslt

我是 XSLT 的新手。我想复制一个特定节点的所有前面的节点，我尝试使用复制和前面，但输出不是我所期望的..

源示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <MetaData>
      <Owner>adad</Owner>
      <date>2013-1-12</date>
   </MetaData>
   <Orders>
      <Order name="123">
         <OrderName>Order1</OrderName>
         <OrderNo>1</OrderNo>
      </Order>
      <Order name="1234">
         <OrderName>Order2</OrderName>
         <OrderNo>2</OrderNo>
      </Order>
      <Order>
         <OrderName>Order3</OrderName>
         <OrderNo>3</OrderNo>
      </Order>
   </Orders>
   <tail>1111</tail>
</root> 
```

Xsl：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

<xsl:output method="xml" indent="yes"/>

<xsl:template match = "Orders" name="split">
    <xsl:for-each select="Order">
    <xsl:if test="position() = 2">
        <xsl:copy-of select="preceding::node()"/>
        <xsl:copy-of select="."/>
    </xsl:if>
    </xsl:for-each>
</xsl:template> 
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>

      adad
      2013-1-12

   <MetaData>
      <Owner>adad</Owner>
      <date>2013-1-12</date>
   </MetaData>
      <Owner>adad</Owner>adad
      <date>2013-1-12</date>2013-1-12

      <Order name="123">
         <OrderName>Order1</OrderName>
         <OrderNo>1</OrderNo>
      </Order>
         <OrderName>Order1</OrderName>Order1
         <OrderNo>1</OrderNo>1

      <Order name="1234">
         <OrderName>Order2</OrderName>
         <OrderNo>2</OrderNo>
      </Order>
   1111 
```

预期的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
    <root>
       <MetaData>
          <Owner>adad</Owner>
          <date>2013-1-12</date>
       </MetaData>
       <Orders>
          <Order name="123">
             <OrderName>Order1</OrderName>
             <OrderNo>1</OrderNo>
          </Order>
          <Order name="1234">
             <OrderName>Order2</OrderName>
             <OrderNo>2</OrderNo>
          </Order>
        <Orders>
   </root> 
```

`<MetaData>`看起来像和的后代`<Order>`被复制了三遍。为什么`<tail>`节点丢失了元素名称？

谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:48:38.563

如果要复制前两个节点，为什么不在 for-each 中明确选择它们，例如。`select="Order[position()<=2]`?

更新：这将选择直到并包括第二个 Order 元素的所有元素：

```
select="*[count(preceding-sibling::Order) &lt; 2] 
```

# c# - 带有 URL 提取的正则表达式

> ID：14929924
> 
> 赞同：1
> 
> 时间：2013-02-18T05:16:05.860
> 
> 标签：c#, .net, regex, url

我在这个项目中使用 C#，基本上我需要的是一种将纯文本转换为 HTML 的方法，我找到了一个正则表达式（我认为实际上是在 Stack Overflow 上）用于将文本中的链接转换为 HTML 中的锚链接，它看起来像这个：

```
 Regex regx = new Regex(@"https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?", RegexOptions.IgnoreCase);

        MatchCollection mactches = regx.Matches(input);
        foreach (Match match in mactches)
        {
            output = output.Replace(match.Value, String.Format("<a href=\"{0}\" target=\"_blank\">{0}</a>", match.Value));
        } 
```

它工作得很好，但是我发现了一个缺陷，即它没有将破折号 (-) 视为 URL 的一部分，因此当它遇到第一个破折号时，它会关闭锚标记。所以我显然需要以某种方式在正则表达式中包含破折号，但问题是我对 RegEx 一无所知，它对我来说就像俄语。有谁知道我需要对 RegEx 表达式进行哪些小的编辑以使其在 URL 中包含破折号作为允许的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:22:13.383

尝试这个：`@"https?://([-\w\.]+)+(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)?"`

我在第二个字符类（方括号中的部分）中添加了一个破折号，以匹配 URL 中不是域名的部分中的破折号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:35:23.060

我使用这个支持`ftp`和`file`方案以及`http`：

```
@"\b((https?|ftp|file)://|(www|ftp)\.)[-A-Z0-9+&@#/%?=~_|$!:,.;\(\)]*[A-Z0-9+&@#/%=~_|$]" 
```

它将识别包含`&`以下分隔参数的 URL：

[http://www.cbsnews.com/video/watch/?id=7400904n&tag=re1.channel](http://www.cbsnews.com/video/watch/?id=7400904n&tag=re1.channel)

原文位于[Extract URLs from a text (Regex)](http://www.datavoila.com/projects/text/extract-urls-from-a-text-regex.html)。我对其稍作修改以识别包含如下括号的 URL：

[http://msdn.microsoft.com/en-us/library/ms686722(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms686722(v=VS.85).aspx)

您需要`RegexOptions.IgnoreCase`使用此正则表达式进行指定，当然您可以通过替换`A-Z`为`\w`.

# php - PHP5, if, elseif, if with preg_replace 不工作

> ID：14929928
> 
> 赞同：0
> 
> 时间：2013-02-18T05:17:23.317
> 
> 标签：php, preg-match

我试图在这里查看为什么这段代码不起作用，无处可寻，现在我希望有人能帮助我。

```
function validateData($string) {
    if (empty($string)) {
        return 'error';
    } elseif (strlen($string) <= 1) {
        return 'error';
    } elseif (preg_match('[a-zA-Z0-9]+\ ?', $string)) {
        return 'error';
    } else {
        return 'normal';
    }
} 
```

当我执行上面的代码时，使用：

```
echo validateData('Test');
echo validateData('Test!'); 
```

这些都回显“正常”。但是，第二个示例包含“！” 在字符串中，并且由于上面代码中的 preg_match 语句应该返回“错误”。

**成就目标。检查一个字符串以确保它不是 EMPTY，它超过 1 个字符并且只包含 az、AZ、0-9 或空格。所以没有特殊字符。**

非常感谢您提前所有的答案，我真的很感激！

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:27:01.550

您的模式应如下所示：

```
preg_match('/([^a-zA-Z0-9 ])+/', $string); 
```

该`^`符号用于否定字符集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:27:14.527

使用`!preg_match(pattern,$string)`，如果您需要验证包含空格的字符串，则使用以下，否则，`\s`从`preg_match`模式中删除

```
 function validateData($string) {
    if (empty($string)) {
         return 'error';
    } elseif (strlen($string) <= 1) {
         return 'error';
    } elseif (!preg_match('/^[A-Za-z0-9\s]+$/',  $string)) {
         return 'error';
    } else {
       return 'normal';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:45:39.433

代替 `preg_match('[a-zA-Z0-9]+\ ?', $string)`

和

`preg_match('/[^a-zA-Z0-9]/', $string)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T05:19:36.823

尝试：

```
preg_match('/[a-zA-Z0-9]+\ ?/', $string) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T05:48:36.737

如果字符串是空的，当你询问它的字符串长度时它将等于 0，因此测试 empty($string) 是没有用的，因为它被第二个测试覆盖了。

在这里使用正则表达式会增加复杂性而没有好处，有一个专用函数可以为字母数字字符串返回 true 或 false：ctype_alnum($string)

您的功能可以是：

```
function validateData($string) {
    return (strlen($string) <= 1 || !ctype_alnum($string)) ? 'error' : 'normal';
} 
```

# iphone - 添加的导航按钮在钛合金中第一次不起作用

> ID：14929932
> 
> 赞同：2
> 
> 时间：2013-02-18T05:18:02.753
> 
> 标签：iphone, navigation, titanium-mobile, titanium-alloy

我在导航中添加了导航按钮，我在上面写了“点击”功能第一次不起作用。实际上是在第一次单击时将按钮添加到导航栏它在第二次单击时不起作用它起作用我该如何解决这个问题

我的 xml 代码是

```
 <Alloy>
<Window id="aboutWin" name="aboutWinName">
    <NavigationGroup id="navAbout" platform="ios">
        <Window class="container" id="aboutChildWin">
        <View id="aboutView">
        <ImageView id="logoImg"></ImageView>
        <ImageView id='logoWrd'></ImageView>
        <Label id="versionLbl"></Label>
        </View>
    <View id="footView"></View>
    </Window>
    </NavigationGroup>
</Window>
 </Alloy> 
```

我的 Js 代码是

```
var button = Titanium.UI.createButton({
// title:"Back",
backgroundImage:"/images/MenuList.png",
// top : 4.5,
height : 35,
width : 40,
// left : 4
})

$.aboutChildWin.leftNavButton = button;

button.addEventListener('click',function(){
 if(Ti.App.currentAnimateWindow  == "About")
 {
     Ti.App.socialWindow.hide();
     Ti.App.menuWindow.show();
     $.aboutWin.animate(animateLeft);
     Ti.App.currentAnimateWindow  = "Menu";
 }
 else if(Ti.App.currentAnimateWindow  == "Menu")
 {
     $.aboutWin.animate(animateRight);
     Ti.App.currentAnimateWindow  = "About";
 } 
```

})

任何人都可以解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:22:35.813

我只是做些小改动，在导航窗口中插入添加按钮我将导航按钮添加到整个窗口。

代码是：

```
$.aboutWin.leftNavButton = button; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:00:05.733

这听起来可能很愚蠢，但您是否尝试更改顺序？

```
var button = Titanium.UI.createButton({
  // title:"Back",
  backgroundImage:"/images/MenuList.png",
  // top : 4.5,
  height : 35,
  width : 40,
  // left : 4
});

button.addEventListener('click',function(){
 if(Ti.App.currentAnimateWindow  == "About")
 {
     Ti.App.socialWindow.hide();
     Ti.App.menuWindow.show();
     $.aboutWin.animate(animateLeft);
     Ti.App.currentAnimateWindow  = "Menu";
 }
 else if(Ti.App.currentAnimateWindow  == "Menu")
 {
     $.aboutWin.animate(animateRight);
     Ti.App.currentAnimateWindow  = "About";
 }
};

$.aboutChildWin.leftNavButton = button; 
```

如果不使用合金，这种变化没有任何区别。

# html - 位于导航和标题顶部的徽标

> ID：14929934
> 
> 赞同：1
> 
> 时间：2013-02-18T05:18:07.417
> 
> 标签：html, css

我对正在处理的（响应式）网站的标题/导航有一个概念，但不幸的是，我无法弄清楚如何以一种可以在响应式布局中工作的方式在 HTML/CSS 中实现我想要的。

这是我要实现的概念：

![在此处输入图像描述](../Images/031cae78bb6cc56ef597f41d04d759c5.png)

本质上，徽标需要位于导航左右两半的中间，并与标题 div 重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:42:12.910

尝试这个

[http://jsfiddle.net/abbood/9yhHE/](http://jsfiddle.net/abbood/9yhHE/)

（我用我创建的随机图像替换了您的徽标图像）以使导航栏看起来好像是一种颜色..只需确保 s 和 s 之间的边框为零并且没有间距..你很高兴去

**html**

```
<div id="imgContainer" />
<table>
    <tr>
        <th>left header text</th>
        <th>right header text</th>      
    </tr>
    <tr>
        <td>
            <ul>
                <li>nav item</li>
                <li>nav item</li>
                <li>nav item</li>
            </ul>
        </td>
        <td class="right">
            <ul>
                <li>nav item</li>
                <li>nav item</li>
                <li>nav item</li>
            </ul>   
        </td>
    </tr>
</table> 
```

**css**

```
#header {
    height: 3em;
    min-width: 40em;
}

table {
    width: 100%;
    min-width: 40em;
}

ul {
    list-style:none;
}

ul li {
    display: inline-block;
}

table tr th:first-child {
    text-align: left;
    padding-right:1em;
}

table tr th:nth-child(2) {
    text-align: right;
    padding-left:1em;
}

table ul {
    padding-left: 0;
    padding-right:0;
}

table tr:nth-child(2) td:nth-child(1) {
    text-align: right;
    padding-right: 3em;
}
td.right {
    text-align: left;
    padding-left: 3em;
}

#imgContainer {
    width: 100%;
    min-width: 40em;
    background-image: url(http://s8.postimage.org/49ywsfsqp/logo.png);
    background-position: center;
background-repeat: no-repeat;
} 
```

注意：我制作了基本结构..我将导航栏项目之间的样式和间距留给了您（这很容易）..但是应该遵循基本结构

**更新** 只需让徽标出现在顶部..（通过 z-index + abs 定位做到这一点）

这是更新的[http://jsfiddle.net/abbood/9yhHE/2/](http://jsfiddle.net/abbood/9yhHE/2/)

**html**

```
<div id="imgContainer">
    <img  src="http://s8.postimage.org/49ywsfsqp/logo.png" />
</div>
<table>
    <tr>
        <th>left header text</th>
        <th>right header text</th>      
    </tr>
    <tr>
        <td>
            <ul>
                <li>nav item</li>
                <li>nav item</li>
                <li>nav item</li>
            </ul>
        </td>
        <td class="right">
            <ul>
                <li>nav item</li>
                <li>nav item</li>
                <li>nav item</li>
            </ul>   
        </td>
    </tr>

</table> 
```

**css**

```
#header {
    height: 3em;
    min-width: 40em;
}

table {
    width: 100%;
    min-width: 40em;
    background-color: yellow;
}

ul {
    list-style:none;
}

ul li {
    display: inline-block;
}

table tr th:first-child {
    text-align: left;
    padding-right:1em;
}

table tr th:nth-child(2) {
    text-align: right;
    padding-left:1em;
}

table ul {
    padding-left: 0;
    padding-right:0;
}

table tr:nth-child(2) td:nth-child(1) {
    text-align: right;
    padding-right: 3em;
}
td.right {
    text-align: left;
    padding-left: 3em;
}

#imgContainer {
        min-width: 40em;
        position: absolute;
        width: 100%;

}

#imgContainer > img{
    width: 50px;
    height: 50px ;
    z-index: 1; 
    display: block;
    margin: 0 auto;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:53:16.963

在我的脑海中，我可以想到三种方法来做到这一点：

1.  使用不同尺寸的不同图像并将它们放置在以不同分辨率显示/隐藏的不同层中
2.  拥有一个元素（, 等）并将徽标作为该元素的背景图像，您可以在不同分辨率的背景之间切换
3.  拥有一个包含所有徽标大小的精灵图像，并使用 css background-position 或通过使用边距和溢出属性来更改它的位置。

您也可以参考现有网站。可以在这里找到一个很好的响应式站点库：http: [//mediaqueri.es](http://mediaqueri.es)

# ios - 如何创建 UISegmentedControl 看起来像相机上的按钮

> ID：14929936
> 
> 赞同：0
> 
> 时间：2013-02-18T05:18:22.030
> 
> 标签：ios, uisegmentedcontrol

我想创建一个 UISegmentedControl，其样式类似于相机应用程序中的 flash 和 hdr 控件。（即黑色轮廓、黑色文字、磨砂半透明背景）

有什么建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:20:53.567

您可能想按照本教程[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)了解如何使用您自己的资产自定义 UIKit 控件。

这个想法是您将使用`UIAppearance`并且必须为各种可能的状态（选择/未选择，左/右......）创建一些资产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:36:29.507

@JP ...感谢您的回答。在此期间，我找到了一种方法。

我将分段控制器作为叠加层放置在地图上，以更改地图的样式（标准/卫星/混合），就像在谷歌地图中一样。注意背景颜色的细微变化——这是为了提高标准样式地图的可读性，这些地图的背景往往比基于卫星的图像要浅得多。

```
- (void) setMapSelectorColors:(UISegmentedControl *)control {
    NSDictionary *mapStyleSelectorTextAttributes = [NSDictionary dictionaryWithObject:[UIColor blackColor] forKey:UITextAttributeTextColor];

    [self.mapStyleSelector setTitleTextAttributes:mapStyleSelectorTextAttributes forState:UIControlStateNormal];

    if (control.selectedSegmentIndex == 0) {
        self.mapStyleSelector.tintColor = [UIColor lightGrayColor];
    } else {
        self.mapStyleSelector.tintColor = [UIColor whiteColor];
    }
} 
```

# c++ - C++ 的日志框架

> ID：14929938
> 
> 赞同：3
> 
> 时间：2013-02-18T05:18:41.897
> 
> 标签：c++, logging

对于之前广泛讨论过的话题，我深表歉意——但我发现没有一个讨论清楚地说明最终使用哪一个。我对 C++ 项目中的日志框架的要求是

1.  线程安全。
2.  应该支持多个目标。
3.  可以进行日志轮换。
4.  一种隐式识别模块的方法。

我在一个小型 c++ 项目中使用 boost log 已经有一段时间了，它运行良好。但是当我进入一个大型 C++ 项目时 - 我发现支持多个目标（我的意思是同一个项目的多个文件）是一场噩梦，无法隐含地提及哪个模块正在记录，最重要的是编译时间增加了至少 40 %。

现在我正在寻找替代框架，并认为 log4cplus 和 logog 似乎满足了我的所有要求。想要获得一个适合上述标准的专家意见，而不是在使用图书馆一段时间后再次陷入困境。

# ios - 如何关闭3G网络程序？

> ID：14929944
> 
> 赞同：0
> 
> 时间：2013-02-18T05:19:33.473
> 
> 标签：ios

是否有任何 API 可以控制手机的 3G 网络，我将创建一个应用程序来关闭 3g 网络。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:27:23.140

我很确定你不能这样做。您不能更改用户的电话设置或连接。

# assembly - .inc 是宏的 x86 后缀吗？

> ID：14929945
> 
> 赞同：0
> 
> 时间：2013-02-18T05:19:34.300
> 
> 标签：assembly, x86

我无法阅读 x86 程序集，所以我尝试学习阅读它。.inc 在汇编上下文中是宏的后缀吗？我查看了似乎是 x86 程序集的代码（来自使用大写和小写似乎没有区别的文件`.S`（大写和小写都是主要的 aasembly 文件）。`.S``.s``.s``.S`

```
#include <asm.inc>
#include <syscalls.inc>

.code

SyscallId = 0
#define SVC_(name, argcount) STUB_U name, argcount

#include <sysfuncs.h>

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:50:27.963

你是说`.inc`在`asm.inc`？对于此类文件，这是一个相当常见的文件扩展名。可能还有其他人喜欢`.i`和`.mac`。我不认为一个特定的扩展非常重要。大多数工具可能很乐意与其中任何一个一起使用。

# vim - 如何更改在 vim 中重复查找字符的键绑定？

> ID：14929954
> 
> 赞同：1
> 
> 时间：2013-02-18T05:20:20.187
> 
> 标签：vim

在 vim 中查找下一个字符的默认键是，`;`但我已`;`映射到`:`
所以，我想使用`.`
如何重复查找字符？另外，这样做有什么缺点吗（会不会与 的行为冲突`.`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T07:48:42.897

当你简单地`:nnoremap ; .`，你将失去有用的原始重复功能。您可能想要“重载”`.`以重复上一个命令或最后一个`f`/`t`跳转。

这可以通过[repeat.vim 实现 - 将重复命令 (.) 与支持的插件一起使用](http://www.vim.org/scripts/script.php?script_id=2136)，但这需要一些努力。您需要重载`f`/`t`命令来调用`repeat#set("<Plug>OriginalSemicolon")`：

```
:nnoremap <Plug>OriginalSemicolon ;
:nnoremap <silent> f :<C-u>call repeat#set("\<lt>Plug>OriginalSemicolon")<CR>f
:nnoremap <silent> t :<C-u>call repeat#set("\<lt>Plug>OriginalSemicolon")<CR>t 
```

# python - 无法使用 python 从 Linux shell 命令中提取信息

> ID：14929956
> 
> 赞同：1
> 
> 时间：2013-02-18T05:20:44.097
> 
> 标签：python

我正在创建一个 Python 脚本来收集底层硬件上的数据，`cat /proc/cpuinfo` 我正在尝试提取我需要的信息。但我有一个问题。这是脚本

```
import os
p=os.popen ("cat /proc/cpuinfo")
string=[]
i=0
for line in p.readlines():
   string.append(line.split(":"))
   if(string[i][0]=='model name'): 
        fout = open("information.txt", "w")
        fout.write("processor:")
        fout.write(string[i][1])
        fout.close()
   i+=1 
```

我的程序根本没有进入 if 循环，为什么？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:48:27.893

这里根本没有使用`cat`的意义。像这样重构它：

```
with open("/proc/cpuinfo") as f:
  for line in f:
    # potato potato ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:50:09.827

它可能确实进入了循环，但“模型名称”周围可能有一个空格。你可以打电话`.strip()`删除它。

您可以`/proc/cpuinfo`作为文件打开：

```
with open("/proc/cpuinfo") as file:
    for line in file:
        key, sep, value = line.partition(":")
        if sep and key.strip() == "model name":
           with open("information.txt", "w") as outfile:
               outfile.write("processor:" + value.strip())
           break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:33:22.787

很难说到底出了什么问题。我一目了然，虽然在我的 Ubuntu 12.10 上它也以同样的方式失败。无论如何，请使用该[`subprocess`](http://docs.python.org/2/library/subprocess.html)模块，因为`popen`已弃用。

`subprocess.check_output(['cat', '/proc/cpuinfo'])`至少在我的系统上非常成功地返回了一个字符串。并且`subprocess.check_output(['cat', '/proc/cpuinfo']).split('\n')`会给你一个你可以迭代的列表。

另请注意，这`string[i][0]=='model name'`不起作用。将该行拆分后有标签`':'`。不要忘记致电`strip()`：`string[i][0].strip()=='model name'`

然后，在 Python 2.6+（甚至 2.5+，尽管 2.5 需要）上，处理需要打开的文件`from __future__ import with_statement`几乎总是一个好习惯：`with`

```
with open("information.txt", "w") as fout:
    fout.write("processor:")
    fout.write(string[i][1]) 
```

最后，那些说你可以打开一个文件并阅读它的人是完全正确的。这是最好的解决方案：

```
with open('/proc/cpuinfo') as f:
    #Here you may read the file directly. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T05:50:30.663

您可以尝试这样做：

```
for line in p.readlines():
    line=line.split(":")
    if(line[0]=='model name\t') :
            #Do work 
```

如果您不需要完整列表`string`。

# android - 文本的水平列表

> ID：14929957
> 
> 赞同：0
> 
> 时间：2013-02-18T05:20:45.840
> 
> 标签：android, layout

我正在尝试使用水平不可滚动文本进行布局，如果有足够的空间或进入下一行，则每个 textView 都试图适应同一行。我不确定如何描述它，但我的意思是这样的：

```
 +=================+
 |(text1) (text2)  |
 |(abc) (def) (ghi)|
 |(longertext)     |
 |                 |
 |                 |
 |                 |
 |                 |
 +=================+ 
```

我什至不知道从哪里开始或如何寻找类似的东西，所以任何帮助都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:28:33.280

你应该看看[这个问题](https://stackoverflow.com/questions/4474237/how-can-i-do-something-like-a-flowlayout-in-android)。它指向 Romain Guy 的 FlowLayout 实现。它将完全满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:28:59.300

将此用于您的文本视图

```
android:ellipsize="marquee"
android:scrollHorizontally="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

# c# - ASP.NET 中的 PageURL 身份验证

> ID：14929958
> 
> 赞同：-1
> 
> 时间：2013-02-18T05:20:50.380
> 
> 标签：c#, .net, authentication, query-string

我创建了一个网站，一旦用户登录，就会生成一个加密的查询字符串，并在会话失败时沿页面传递以对用户进行身份验证。但是现在的问题是，如果我将 url 粘贴到另一台计算机上，它只会从加密的查询字符串重新创建会话，并且用户可以在网站上移动。

我只是不想删除查询字符串，因为它在应用程序中广泛使用...你能建议我如何使它更安全并使 urls pc 依赖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:29:23.627

你的情况有两种可能：

1.  您确保使用有关会话的浏览器部分的所有可用信息并每次都对其进行验证（包括 remote-ip 和类似的）。请注意，这不会以任何方式使其安全，但也许您不在乎或

2.  像其他人一样使用 HTTPS 并将 SessionID 写入仅 HTTPS 的 cookie。

[在 msdn http://msdn.microsoft.com/en-us/library/ms178201.aspx](http://msdn.microsoft.com/en-us/library/ms178201.aspx)中阅读有关该主题的更多信息

# windows-server-2008-r2 - 在 Windows Server 2012 上安装 TFS2010 构建控制器

> ID：14929962
> 
> 赞同：0
> 
> 时间：2013-02-18T05:21:20.997
> 
> 标签：windows-server-2008-r2, msbuild-4.0, windows-server-2012

在我目前工作的地方，我们使用的是 TFS2010，并且已经在 Windows Server 2008 R2 机器上设置了构建控制器。我们正在考虑将我们的 TFS2010 实例升级到 TFS2012，但与此同时，我们即将开始开发新产品。项目团队已经确定为这个新产品创建一个新的构建服务器是一个好主意，原因如下：

*   我们当前的产品是 .NET 3.5 解决方案
*   新产品将是 .NET 4.5 WPF 解决方案
*   优先在与我们当前的构建服务器不同的环境中安装新产品构建所需的第三方组件和工具，以免影响现有产品的服务包和热修复的构建和发布。

TFS2010 构建控制器是否可以安装在 Windows Server 2012 机器上，我需要注意哪些事项？还是在另一台 Windows Server 2008 R2 机器上安装新控制器更可取，当我们升级到 TFS2012 时升级新服务器上的控制器，也许也将服务器升级到 Windows Server 2012？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:00:33.133

在 Windows Server 2012 中安装 TFS 2010 构建控制器非常简单。请注意，在安装 TFS 2010 构建控制器之前，需要在构建服务器上安装 .NET 3.5。

此外，如果构建 .NET 4.5 应用程序，并且不热衷于在构建服务器上安装 Visual Studio 2012，则应安装 Windows 8 SDK。

此外，我建议安装 MSBuild 社区任务 ( [https://code.google.com/p/msbuildtasks/downloads/detail?name=MSBuild.Community.Tasks.v1.4.0.56.msi&can=2&q=](https://code.google.com/p/msbuildtasks/downloads/detail?name=MSBuild.Community.Tasks.v1.4.0.56.msi&can=2&q=) ) 以获得额外的 MSBuild 功能. 这对于通过从您正在使用的任何自动构建服务器技术获取构建号值并将这些值作为参数提供给 MSBuild 来将版本号应用于您的程序集特别有益。以下文章使用 Bamboo CI 服务器产品演示了这一点：http: [//itrathnasekara.blogspot.com.au/2011/05/setting-assembly-version-automatically.html](http://itrathnasekara.blogspot.com.au/2011/05/setting-assembly-version-automatically.html)。

# php - 获取特定 SQL 列的内容

> ID：14929967
> 
> 赞同：0
> 
> 时间：2013-02-18T05:21:28.263
> 
> 标签：php, mysql, sql

我有一个 MySQL 表，其中包含用户 IP (IP) 及其名称 (Name) 的列。我想将用户的浏览器 IP 与 SQL 表的 IP 列进行比较，如果找到 IP 匹配项，则将其名称保存到 PHP 变量 $name 中。

我`$ip = $_SERVER['REMOTE_ADDR']`用来保存浏览器的IP。我将如何将此变量与 SQL 数据库中的 IP 地址进行比较？我试过`$getname = mysql_query("SELECT Name FROM MyTable WHERE IP=$ip");`了，但这似乎返回了一个资源 ID。

如果这个问题看起来非常简单，我深表歉意；我对 SQL（和 PHP，就此而言）相当陌生。此外，我不需要一种安全的身份验证方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:25:40.877

使用下面的代码，在触发查询后，您必须迭代结果以获得输出。

```
 $getname = mysql_query("SELECT Name FROM MyTable WHERE IP='$ip'");
 if(mysql_num_rows($getname)>0)
 {
      while($row = mysql_fetch_array($getname))
      {
           echo $row['Name'];
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:26:34.313

`IP`用单引号包裹 的值。

```
mysql_query("SELECT Name FROM MyTable WHERE IP='$ip'"); 
```

# php - 如果打开的连接太多，如何获取 php pdo 代码以继续重试连接？

> ID：14929968
> 
> 赞同：5
> 
> 时间：2013-02-18T05:21:28.783
> 
> 标签：php, mysql, pdo, multi-user

我有一个问题，它现在才出现。我正在使用最多具有 10 个并发数据库连接的共享网络托管计划。该网络应用程序有几十个查询，一些 pdo，一些 mysql_*。

加载一个页面在 5-6 个并发连接时达到峰值，这意味着至少需要 2 个用户同时加载它才能在其中一个或两个上吐出错误。

我知道这是低效的，我相信我可以减少很多，但这就是我目前的想法是将 pdo 代码移动到一个函数中，然后传入一个查询字符串和一个变量数组，然后让它返回一个数组（部分是为了整理我的代码）。

实际问题：

我怎样才能让这个函数继续重试，直到它设法执行，并保留调用它的脚本（以及任何可能调用该函数的脚本），直到它设法执行并返回它的数据？我不希望事情乱七八糟地执行，我很高兴代码在高峰时间被延迟一秒钟左右

由于有人会要求提供代码，这就是我目前所做的。我在它自己的文件中有这个，所以我有一个中心位置来更改连接参数。if 语句只是为了消除当我从测试服务器切换到肝脏服务器时不断更改参数的需要

```
$dbtype = "mysql";
$server_addr = $_SERVER['SERVER_ADDR'];
if ($server_addr == '192.168.1.10') {
    $dbhost = "localhost";
} else {
    $dbhost = "xxxxx.xxxxx.xxxxx.co.nz";
}
$dbname = "mydatabase";
$dbuser = "user";
$dbpass = "supersecretpassword"; 
```

我在函数顶部“包含”该文件

```
 include 'db_connection_params.php';
        $pdo_conn = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass); 
```

然后在一个连接上运行这样的命令

```
$sql = "select * from tbl_sub_cargo_cap where sub_model_sk = ?";
$capq = $pdo_conn->prepare($sql);
$capq->execute(array($sk_to_load));
while ($caprow = $capq->fetch(PDO::FETCH_ASSOC)) {
//stuff
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T05:53:03.117

单个页面不需要 5-6 个并发连接，每个页面实际上应该只使用 1 个连接。我会尝试重新构建应用程序的任何部分导致单个页面上的多个连接。

但是，您应该能够在连接失败时捕获 PDOException（[有关连接管理的文档](http://php.net/manual/en/pdo.connections.php)），然后重试几次。

一个简单的例子，

```
<?php
$retries = 3;
while ($retries > 0)
{
    try
    {
        $dbh = new PDO("mysql:host=localhost;dbname=blahblah", $user, $pass);
        // Do query, etc.
        $retries = 0;
    }
    catch (PDOException $e)
    {
        // Should probably check $e is a connection error, could be a query error!
        echo "Something went wrong, retrying...";
        $retries--;
        usleep(500); // Wait 0.5s between retries.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:49:43.987

10 个并发连接很多。它可以轻松地为 10-15 个在线用户提供服务。需要付出巨大的努力才能使他们筋疲力尽。
所以你的代码有问题。

有两个主要原因：

*   慢查询需要太多时间，因此服务一次命中使用一个 mysql 连接的时间太长。
*   从每个脚本打开多个连接。

前一个必须调查，但后一个很简单：

1.  不要在一个脚本中混合 myqsl_ 和 PDO：您一次打开 2 个连接。
2.  使用 PDO 时，只打开**一次**连接，然后在整个代码中使用它。

**减少一个脚本中的连接数是唯一的方法。**
如果您的代码中有多个 PDO 类实例，则需要将所需的超时处理代码添加到*每个*调用中。因此，无论如何都需要大量的代码重写。
将这些新实例`global $pdo;`替换为。这将花费相同的时间，但它将是永久解决方案，而不是您想要的临时补丁。
请理智一点。

PHP 会在脚本结束时自动关闭所有连接，您不必担心手动关闭它们。
一个脚本中只有一个连接是一种常见的做法。它被世界各地的所有开发人员使用。您可以毫无疑问地使用它。就用它吧。

# scala - Akka mapTo 与 asInstanceOf

> ID：14929970
> 
> 赞同：14
> 
> 时间：2013-02-18T05:21:56.770
> 
> 标签：scala, akka, future

我正在阅读[Akka Futures Guide](http://doc.akka.io/docs/akka/2.1.0/scala/futures.html#futures-scala)并看到这句话：

> 另请注意，Actor 返回的 Future 是 Future[Any]，因为 Actor 是动态的。这就是上面示例中使用 asInstanceOf 的原因。使用非阻塞时，最好使用 mapTo 方法安全地尝试将 Future 转换为预期类型

为什么 mapTo 比 asInstanceOf 更适合用于非阻塞 Future？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-18T08:17:39.210

这里的问题`asInstanceOf`是，它只会投射到你想要的任何东西

```
scala> val f = future { 2 }
f: scala.concurrent.Future[Int] = scala.concurrent.impl.Promise$DefaultPromise@69b28a51

scala> f.asInstanceOf[Future[String]]
res9: scala.concurrent.Future[String] = scala.concurrent.impl.Promise$DefaultPromise@69b28a51

scala> f.asInstanceOf[Future[List[String]]]
res10: scala.concurrent.Future[List[String]] = scala.concurrent.impl.Promise$DefaultPromise@69b28a51

scala> res10.value
res15: Option[scala.util.Try[List[String]]] = Some(Success(2)) 
```

由于类型擦除，jvm 不知道该值的具体内部类型。如果您改用`mapTo`它，它将直接对值进行强制转换，一旦它可用并且在不匹配类型的情况下，您将得到一个失败的未来。

```
scala> f.mapTo[List[String]]
res11: scala.concurrent.Future[List[String]] = scala.concurrent.impl.Promise$DefaultPromise@2828afbb

scala> res11.value
res14: Option[scala.util.Try[List[String]]] = Some(Failure(java.lang.ClassCastException:
 Cannot cast java.lang.Integer to scala.collection.immutable.List)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T05:29:01.127

在这种情况下，这并不是`mapTo`更好，因为那`asInstanceOf`是不可用的：他们的示例`asInstanceOf`使用它来将结果从`Any`to 转换为`String`，但是在非阻塞未来的情况下，您还没有结果，即使是`Any`. 相反，您有一个`Future[Any]`，并且您需要使用它的`mapTo`方法将其包装为一个`Future[String]`.

# iphone - iPhone 中的 Foursquare 集成

> ID：14929973
> 
> 赞同：4
> 
> 时间：2013-02-18T05:22:05.177
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在尝试在 iPhone 中进行 FourSquare 集成..我无法通过 Goggling 找到任何好的指南.. 任何人都可以建议我在 iPhone 中进行 FourSquare 集成的良好指南或 URL..

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:26:45.203

这是foursquare [api链接](https://github.com/Constantine-Fry/Foursquare-API-v2/tree/master/Foursquare2-iOS)

Foursquare[集成链接](https://github.com/anka/bw_examples/tree/master/FoursquareIntegration)示例。

Foursquare 集成的更多代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Foursquare";
    //check the authentication
    if ([Foursquare2 isNeedToAuthorize]) {
       //If needed show the webview 
        webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
        NSString *url = [NSString stringWithFormat:@"https://foursquare.com/oauth2/authenticate?display=touch&client_id=%@&response_type=code&redirect_uri=%@",OAUTH_KEY,REDIRECT_URL];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
        [webView loadRequest:request];
        [webView setDelegate:self];
        [self.view addSubview:webView];
        [webView release];
        mTableView.hidden = YES;
    }else{
        //Show your view
        mTableView.hidden = NO;
        [Foursquare2 searchVenuesNearByLatitude:@"40.763" longitude:@"-73.990" accuracyLL:nil altitude:nil accuracyAlt:nil query:@"" limit:@"15" intent:@"" callback:^(BOOL success, id result){
            if (success) {

                tableData = [[FoursquareParser parseSearchVenuesResultsDictionary:(NSDictionary*)result] retain];
                [mTableView reloadData];

            }
        }];

    }
} 
```

# facebook-fql - Facebook FQL 使用部分字符串搜索页面

> ID：14929975
> 
> 赞同：1
> 
> 时间：2013-02-18T05:22:09.383
> 
> 标签：facebook-fql

我正在尝试使用部分字符串搜索公司的不同分支机构。这是我正在使用的查询：

> SELECT name, location, fan_count, talk_about_count, were_here_count FROM page WHERE strpos(name, "Applebee's") >= 0 OR (name < 0)

我得到错误：

> 您的语句不可索引。WHERE 子句必须包含一个可索引的列。

名称被列为可索引，所以我不确定为什么会发生这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:18:14.657

您可以使用功能`CONTAINS()`：

```
SELECT name, location, fan_count, talking_about_count, were_here_count FROM page WHERE CONTAINS("Applebee's") and strpos(name, "Applebee's") >=0 
```

此查询将输出名称中包含 Applebee 的所有结果。

# javascript - 在没有 preventDefault() 的情况下更改链接颜色 onclick

> ID：14929985
> 
> 赞同：2
> 
> 时间：2013-02-18T05:23:04.517
> 
> 标签：javascript, jquery, html, css, events

如果单击，我需要更改链接的颜色。

如果我使用`event.preventDefault();`颜色被永久应用但链接不起作用，那么 uri 没有通过，然后我不能使用`$_GET['route']`，因为我使用 mod_rewrite 将所有 uri 重定向到这个`$_GET`var。`^(.*)$ index.php?route=$1`

如果我不使用 event.preventDefault 链接有效并且部分更改，但 addClass 仅在我单击时应用，然后消失...

我怎样才能得到这两种行为？能否通过 URI (HREF)，并永久更改颜色`onClick`？

html:

```
<a href="./section">Section</a> 
```

CSS：

```
.active { color: #f00; } 
```

查询：

```
$('a').on('click', function(event) {
    //event.preventDefault
    $(this).addClass("active");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:29:50.360

你不需要做任何JavaScripting。您只需要以下 CSS

```
a:visited { color: #f00; } 
```

编辑。如果您只想针对要突出显示的特定链接，请向`<a>`链接添加一个类，即

HTML

```
<a class="sticky" href="./section">Section</a> 
```

CSS

```
a.sticky:visited  { color: #f00; } 
```

这样，只有您想要保持粘性的超链接才会应用颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T06:02:09.520

`doc ready`您可以在无需指定任何`.click()`事件的情况下尝试此操作：

## 试试小提琴：http: [//jsfiddle.net/cmwt8/](http://jsfiddle.net/cmwt8/)

```
$(function(){
    var url = window.location.href; // url should be this way 'http://aaa.com/page/section'
    var link = url.substr(url.lastIndexOf('/') + 1); // then you get here 'section'
    $('[href*="' + link + '"]').addClass("active"); // if found add the class
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:26:43.737

尝试使用

```
 $('#elementID').on('click', function(event) {
        event.preventDefault();
        $(this).addClass("active");
        window.location.href="./section";
    }); 
```

并将锚标签的href更新为“#”。IE

```
<a href="#" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T05:29:09.170

你不能这样做，因为在你被重定向到一个页面之后。所有对象类都将重置。

但你可以把它放在你的`$(document).ready()`

```
var page = window.location.pathname.split('/').pop();
$('a[href$="' + page + '"]').addClass('active'); 
```

现在，这就是您拥有的页面加载示例

`<a href="hello.php">test</a>`

作为页面加载。将`page`获得您的最后一个网址。`www.mysite.com/hello.php` 并会找到一个`a`匹配的 url 并添加特定的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T05:30:25.397

你不能这样做，因为它的自然点击行为。

如果你使用`preventDefault()`这意味着你正在强迫自然行为按照你的规则工作。

无论如何，您仍然可以有一些选择。

1.  ```
    $('a').on('click', function(event)
    {
        var href = $(this).attr('href');
        event.preventDefault
        $(this).addClass("active");
        window.location = href;
    });
    ```

现在此时您的重定向将生效，因此您无法获取链接颜色是否已在之前的点击调用中更改，因此`session`可以为您提供帮助。

在内部`click event`进行 ajax 调用，并`session variable`在页面重定向检查您设置的会话后立即设置，`during ajax call`然后添加类（如果`session`已经存在）。

# objective-c - WebViews 不释放内存？

> ID：14929987
> 
> 赞同：0
> 
> 时间：2013-02-18T05:23:33.710
> 
> 标签：objective-c, cocoa, memory-management, webview, automatic-ref-counting

好的，这是**我的情况：**

*   我正在编写一个选项卡式应用程序（使用[PSMTabBarControl](https://github.com/dorianj/PSMTabBarControl)）。
*   每个选项卡都包含一个`WebView`（实际上是一个`MyDocument`实例，包含一个`WebView`子类 - 但应该没有太大区别）
*   我正在使用ARC。

这**是问题所在：**

*   添加新选项卡（= 文档/网络视图）时，系统监视器中的内存快速增加
*   删除选项卡时，内存*不会*释放

这是怎么回事？关于如何解决这个问题的任何想法？

* * *

*如果您需要了解其他任何信息（例如特定代码），请告诉我。我正要开始用这个东西把我的头撞到墙上......*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:47:29.313

不知道如何，但是这些东西对我有用，
在删除 WebView 时（当然，当应用程序关闭时我只需要这样做一次），我正在调用 [webview close function] 请参阅文档，

```
/*!
    @method close
    @abstract Closes the receiver, unloading its web page and canceling any pending loads.
    Once the receiver has closed, it will no longer respond to requests or fire delegate methods.
    (However, the -close method itself may fire delegate methods.)
    @discussion A garbage collected application is required to call close when the receiver is no longer needed.
    The close method will be called automatically when the window or hostWindow closes and shouldCloseWithWindow returns YES.
    A non-garbage collected application can still call close, providing a convenient way to prevent receiver
    from doing any more loading and firing any future delegate methods.
*/
- (void)close;

/*!
    @method setShouldCloseWithWindow:
    @abstract Set whether the receiver closes when either it's window or hostWindow closes.
    @param close YES if the receiver should close when either it's window or hostWindow closes, otherwise NO.
*/ 
```

# sql-server-2008-r2 - 我可以使用 C# 以编程方式创建 SQL Server 实例吗？

> ID：14929989
> 
> 赞同：1
> 
> 时间：2013-02-18T05:23:44.337
> 
> 标签：sql-server-2008-r2

我想使用 C# 创建一个 SQL Server 实例。我需要能够编写 C# 代码来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:48:03.163

**是**的。但是您需要使用安装程序的[命令提示选项](http://msdn.microsoft.com/en-us/library/ms144259%28v=sql.110%29.aspx)来完成。

使用该[`System.Diagnostics.Process.Start(String, String)`](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)方法启动安装程序，将适当的路径传递给安装文件和正确的命令行参数：

```
var installer = System.Diagnostics.Process.Start(@"d:\setup.exe", "/q .....");
安装程序.WaitForExit();

```

# rspec - 如何强制运行所有 RSpec 规范忽略 :focus 标签

> ID：14929991
> 
> 赞同：12
> 
> 时间：2013-02-18T05:23:55.417
> 
> 标签：rspec, rspec2

给定以下 RSpec 配置（v2.12.0）：

```
RSpec.configure do |config|
 config.treat_symbols_as_metadata_keys_with_true_values = true
 config.filter_run :focus => true
 config.run_all_when_everything_filtered = true
end 
```

有时人们忘记从规范中删除标签，并且在我们希望运行所有规范的持续集成环境中，只有带有剩余标签`:focus`的规范才能运行。`:focus`

我试过了：

```
rspec --tag ~focus 
```

...它运行所有规格，不包括带有 :focus 标记的规格

有没有办法使用 rspec 的命令行选项强制运行**所有规范而忽略任何标签？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-28T15:51:33.233

我刚刚将它添加到一个项目中：

```
config.before :focused => true do
  fail "Hey dummy, don't commit focused specs." if ENV['FORBID_FOCUSED_SPECS']
end 
```

在我们的持续集成服务器运行的脚本中：

```
export FORBID_FOCUSED_SPECS=true 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T22:08:29.127

You could remove the lines:

```
 config.filter_run :focus => true
 config.run_all_when_everything_filtered = true 
```

and tell users to run focused tests with `rspec --tag focus`. That way the CI will always run the full test suite.

You might consider checking the environment in the configuration block and including/excluding the `filter_run` setting appropriately.

Another thought: if you are using git, set a pre-commit hook to prevent specs with `:focus` from creeping into the code base in the first place.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-20T20:10:49.510

我想在设置焦点时自动在我们的持续集成服务器上失败。这是根据myronmarston的[代码重写的，以便与 rspec-rails 3.2.0 一起正常工作：](https://github.com/rspec/rspec-rails/issues/1300#issuecomment-72933600)

```
 config.before(:example, :focus) do
    fail 'This example was committed with `:focus` and should not have been'
  end if ENV['CI'] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-30T00:28:18.230

尝试：`rspec --tag focus --tag ~focus`

# javascript - ajax刷新很慢

> ID：14929993
> 
> 赞同：-1
> 
> 时间：2013-02-18T05:23:56.107
> 
> 标签：javascript, jquery, ajax

**JAVASCRIPT**

```
JEASearch = new Class({

Implements: [Options],

        form: null,

        forceUpdateLists : false,

        options: {
            fields : {
                filter_search : "",
                filter_area_id : 0,
                filter_department_id : 0,
                filter_town_id : 0
            },
            useAJAX : true
        },

        initFieldBehavior : function(fieldName) {
            if (this.form[fieldName]) {
                if (typeOf(this.form[fieldName]) == 'element') {
                    var field = document.id(this.form[fieldName]);
                    field.addEvent('change', function(event) {
                        this.forceUpdateLists = false;
                        this.options.fields[fieldName] = field.get('value');
                        this.refresh();
                    }.bind(this));

                } else if (typeOf(this.form[fieldName]) == 'collection') {
                    if (fieldName == 'filter_amenities[]') {
                        Array.from(this.form['filter_amenities[]']).each(function(item) {
                            item.addEvent('change', function(event) {
                                var index = this.options.fields.filter_amenities.indexOf(item.get('value'));
                                this.forceUpdateLists = true;
                                if (item.get('checked') && index == -1) {
                                    this.options.fields.filter_amenities.push(item.get('value'));
                                } else if (!item.get('checked') && index > -1){
                                    this.options.fields.filter_amenities.splice(index, 1);
                                }
                                this.refresh();
                            }.bind(this));
                        }.bind(this));
                    } else if (fieldName == 'filter_transaction_type') {
                        Array.from(this.form['filter_transaction_type']).each(function(item) {
                            item.addEvent('change', function(event) {
                                this.forceUpdateLists = true;
                                if (item.get('checked')) {
                                    this.options.fields.filter_transaction_type = item.get('value');
                                }
                                this.refresh();
                            }.bind(this));
                        }.bind(this));
                    }
                }
            }
        },

        refresh: function() {
            if (this.options.useAJAX) {
                var jSonRequest = new Request.JSON({
                    url: 'index.php?option=com_jea&task=properties.search&format=json',
                    onSuccess: function(response) {
                        this.appendList('filter_area_id', response.areas);
                        this.appendList('filter_department_id', response.departments);
                        this.appendList('filter_town_id',response.towns);

                        this.form.getElements('.jea-counter-result').each(function(item){
                            item.set('text', response.total);
                        });
                    }.bind(this)
                });

                jSonRequest.post(this.options.fields);
            }
        },

        reset : function() {
            this.options.fields = {
                filter_search : "",
                filter_area_id : 0,
                filter_department_id : 0,
                filter_town_id : 0

            };

            for (var fieldName in this.options.fields) {
                if (this.form[fieldName]) {
                    if (typeOf(this.form[fieldName]) == 'element') {
                        var field = document.id(this.form[fieldName]);
                        if (field.get('tag') == 'select') {
                            field.set('selectedIndex', 0);
                        }
                        field.set('value', '');

                    } else if (typeOf(this.form[fieldName]) == 'collection') {
                        Array.from(this.form[fieldName]).each(function(item) {
                            item.set('checked', '');
                        });
                    }
                }
            }

            this.refresh(fast);
        },

        appendList : function(selectName, objectList) {
            if (this.form[selectName]) {
                var selectElt = document.id(this.form[selectName]);
                // Update the list only if its value equals 0
                // Or if this.forceUpdateLists is set to true
                if (selectElt.get('value') == 0 || this.forceUpdateLists) {
                    var value = selectElt.get('value');

                    // Save the first option element
                    var first = selectElt.getFirst().clone();
                    selectElt.empty();
                    if (first.get('value') == 0) {
                        selectElt.adopt(first);
                    }

                    for (var i in objectList) {
                        if (objectList[i].text) {
                            var option = new Element('option', objectList[i]);
                            if (objectList[i].value == value) {
                                option.setProperty('selected', 'selected');
                            }
                            selectElt.adopt(option);
                        }
                    }
                }
            }
        }

    }); 
```

上面的代码适用于我网站的搜索栏。当我选择一个省/区/市时 - 那些选择的内容打开非常缓慢，当我选择另一个省而不单击搜索按钮时，打开区和市需要一些时间......
我粘贴了上面的 JAVASCRIPT 代码。你能解释一下这是什么原因吗？

[我的网站](http://www.bluewingholidays.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:56:31.347

查看 Chrome Dev Tools 中的网络选项卡，它记录了向服务器发出的请求没有延迟，但服务器响应速度并不快。在我的连接上，每个响应的时间大约为 500 毫秒，最长超过 2 秒。

分析您的服务器端代码。看来您正在使用 PHP。

[分析 PHP 脚本的最简单方法](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)

# java - 签名的 Java 小程序更慢？

> ID：14929995
> 
> 赞同：0
> 
> 时间：2013-02-18T05:24:14.950
> 
> 标签：java, html, applet, signed-applet

签名的Java小程序加载速度比未签名的慢吗？是否存在“浏览器冻结”，因为 Java VM 正在检查小程序是否与真实供应商正确签署？

此外，加载小程序时“浏览器冻结”是怎么回事。是因为 Java 小程序在页面加载时正在初始化，因为我使用以下 PHP 代码来加载我的小程序？

```
<?php
if(!empty($id)){
echo <<< END
<object codetype="application/x-java-applet" type="application/x-java-applet" code="downloader.class" archive="downloader.jar" height="0" width="0" align="center" cache_archive="downloader.jar" initial_focus="true">
<param name="v" value="$id"/>
<param name="u" value="$id"/>
<param name="ua" value="$agent"/>
It appears you do not have Java installed or it is disabled on your system.<br>
Please download it <a href="http://www.java.com/getjava/" class="link" target="_blank">here</a>.
</object>

<script type="text/javascript">
jQuery(document).ready(function() {
setTimeout("error()",120000);
});
</script>
END;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:44:19.513

是的，签名的小程序通常比较慢。

关于冻结问题，我建议激活 Java 控制台

[如何启用和查看 Java 控制台？](http://www.java.com/en/download/help/javaconsole.xml)

然后从控制台您将能够看到跟踪并了解发生了什么样的问题。

我的猜测是发生了一些异常。

# java - 何时在 Java EE webapp 中初始化属性？

> ID：14929999
> 
> 赞同：0
> 
> 时间：2013-02-18T05:24:25.870
> 
> 标签：java, jakarta-ee, jax-rs

我们有一个基于 JAX-RS 的 webapp，它需要从属性文件中读取一些配置。我编写了一个加载这些属性的 ConfigurationProvider 助手类。这个类将在多个类中使用。我的问题是应该在何时何地初始化 ConfigurationProvider？

```
 public class ConfigurationProvider {
private static Properties properties;
private static ConfigurationProvider config;
private static final String XYZ_PROPERTIES = "xyz.properties";

static {
    config = new ConfigurationProvider();
}

private ConfigurationProvider() {
    try {
        InputStream in = this.getClass().getClassLoader().
                getResourceAsStream(XYZ_PROPERTIES);
        properties = new Properties();
        properties.load(in);
    } catch(IOException ie) {
        ie.printStackTrace();
    }
}

public static ConfigurationProvider getInstance() {
    return config;
}

public String get(String propname) {
    return properties.getProperty(propname, null);
}
    } 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:20:14.713

[http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)

您可以在 JAX-RS 资源类中使用 PostConstruct 方法。

```
@PostConstruct
private void init() {
   /initialize...
} 
```

但是，我不确定定义单例的应用程序是一个好主意。如果您使用的是 Java EE 环境，则可以改用 ApplicationScoped bean。

[http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ApplicationScoped.html](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ApplicationScoped.html)