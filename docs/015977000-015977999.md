# StackOverflow 问答 15977000-15977999

# java - 从 Java 剪贴板对象作为图像检索时，Outlook 的剪贴板副本始终设置为黑色背景

> ID：15977001
> 
> 赞同：1
> 
> 时间：2013-04-12T17:01:13.167
> 
> 标签：java, image, background, clipboard, bufferedimage

以下是申请步骤

1.  从 html 电子邮件消息或网站复制一些富文本（文本 + 图像的组合）
2.  在您的 java 代码中检索从剪贴板对象复制的内容作为 BufferredImage
3.  将检索到的图像对象保存为磁盘上的图像文件

您会注意到在保存的文件中，图像很好，任何非黑色文本都很好，但黑色文本似乎在黑色背景中丢失。找不到覆盖生成图像的黑色背景的方法。下面的一些示例代码。

```
 BufferedImage image = null;
try {
     image = (BufferedImage) transferable.getTransferData(DataFlavor.imageFlavor);

} catch (UnsupportedFlavorException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
      } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
}

saveImageToDisk(image);

      private void saveImageToDisk(BufferedImage image) {
    File outputFile = new File("c:\\image.png");
    try {
        ImageIO.write(image, "png", outputFile);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

找到了解决方案 - 它是使用一个自定义系统风格，它理解“image\x-emf”的 mimetype。剥离前 8 个字节并将剩余内容写入 Bufferred 图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:41:08.570

找到了解决方案 - 它是使用一个自定义系统风格，它理解“image\x-emf”的 mimetype。剥离前 8 个字节并将剩余内容写入 Bufferred 图像

# c# - 在搜索不存在的对象名称时检测错误

> ID：15977004
> 
> 赞同：0
> 
> 时间：2013-04-12T17:01:20.657
> 
> 标签：c#, object

在下面的代码中，当`MyGlobals.ListOfItemsToControl[i].sItemName`对象中不存在时`HWRes.HWResObj`，我想在不跳转到 catch 语句的情况下检测到这个问题。

我怎样才能做到这一点？

```
try
{
    String HWTemp = "";
    // Ref http://stackoverflow.com/questions/15628140/c-sharp-eliminate-switch-requirement
    HWTemp = HWRes.HWResObj.GetType().GetProperty(MyGlobals.ListOfItemsToControl[i].sItemName, BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance).GetValue(HWRes.HWResObj, null).ToString();

 // Somehow here I should detect if the value MyGlobals.ListOfItemsToControl[i].sItemName does not exist in the object HWRes.HWResObj
// Detect issue without jumping to catch

}
catch
{
    // I dont want to go here when MyGlobals.ListOfItemsToControl[i].sItemName does not exist in the object HWRes.HWResObj
    .....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:08:05.063

像这样检查返回值`GetProperty`：

```
var property = HWRes.HWResObj.GetType().GetProperty(MyGlobals.ListOfItemsToControl[i].sItemName, BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance);
if (property != null)
{
    string HWTemp = property.GetValue(HWRes.HWResObj, null).ToString();
}
else
{
    // property does not exist
} 
```

# mysql - 如何解决 MySQL INSERT INTO... SELECT 导致 SELECTed 表的写锁定？

> ID：15977008
> 
> 赞同：2
> 
> 时间：2013-04-12T17:01:35.910
> 
> 标签：mysql, locking

我有一个单一的、未复制的 MySQL 服务器。

我们遇到了 INSERT INTO ... SELECT 语句导致源表上的写锁定的问题。

原始表在一个数据库中。目标表是另一个数据库中的临时表。

遵循此问题已接受答案的建议：[如何改进 INSERT INTO ... SELECT 锁定行为](https://stackoverflow.com/questions/2640898/how-to-improve-insert-into-select-locking-behavior)

我在 my.cnf 中更改了以下三个配置变量并重新启动了服务器：

```
innodb_autoinc_lock_mode=2
binlog_format=row
transaction-isolation=READ-COMMITTED 
```

这似乎使问题变得更糟，尽管在这种情况下相关性可能不是因果关系。

如何防止这种写锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:32:14.260

[这](https://dev.mysql.com/doc/refman/4.1/en/internal-locking.html)会有帮助吗？

> 如果您使用 LOCK TABLES 显式获取表锁，则可以请求 READ LOCAL 锁而不是 READ 锁，以使其他会话能够在您锁定表时执行并发插入。
> 
> 要在无法进行并发插入时对表 real_table 执行许多 INSERT 和 SELECT 操作，您可以将行插入到临时表 temp_table 中，并使用临时表中的行定期更新实际表。这可以通过以下代码完成：
> 
> mysql> LOCK TABLES real_table WRITE, temp_table WRITE;
> 
> mysql> INSERT INTO real_table SELECT * FROM temp_table;
> 
> mysql> 从 temp_table 中删除；
> 
> mysql>解锁表；
> 
> InnoDB 使用行锁，BDB 使用页锁。这些存储引擎可能会出现死锁，因为它们会在 SQL 语句的处理过程中自动获取锁，而不是在事务开始时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:25:42.067

在我看来，您的事务隔离级别好像在对相同数据进行顺序读取时不允许插入。

明白这可能是件好事。MySQL 不会在这里无缘无故地阻塞。这只是意味着您的一条语句正在读取的数据在原子操作期间可能不会更改。因此，不授予 INSERT 插入数据的权限，否则会更改您现在插入到临时表中的数据。

您可以查看[此页面](http://dev.mysql.com/doc/refman/5.1/en/dynindex-isolevel.html)，从 MySQL 的角度描述有关事务隔离的所有信息。

# c - strcpy 的问题

> ID：15977009
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:01:36.883
> 
> 标签：c, strcpy

我对 C 语言很糟糕，并且在使用 strcpy 时遇到了麻烦。我正在尝试获取其中一个函数参数并将其存储在 char 数组中。当我运行它时，我得到一个分段错误，但我不明白为什么。我究竟做错了什么？谢谢！

```
struct bb_state {
    FILE *logfile;
    char *rootdir;
};

struct bb_state *bb_data;
bb_data = malloc(sizeof(struct bb_state));
strcpy(bb_data->rootdir, argv[argc-2]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:05:44.153

您必须为`char* rootdir`.

例子：

```
int len=strlen(argv[argc-2])+1;
bb_data->rootdir=malloc(len); 
```

之后你可以这样做：

```
strcpy(bb_data->rootdir, argv[argc-2]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:32:19.587

> 我正在尝试获取其中一个函数参数并将**其存储在 char 数组**中。

您的代码的问题是您没有一个字符**数组**来存储复制的参数。你所拥有的是一个指针。您必须分配要在其中复制参数的存储空间。或者，您可以`rootdir`使用数组代替指针，但必须小心防止副本溢出固定大小的数组。

**分配存储**

```
bb_data->rootdir = malloc(strlen(argv[argc - 2]) + 1); // +1 is for the NULL 
```

**使 rootdir 成为一个数组**

```
#include <limits.h>
#include <stddef.h>
#include <stdlib.h>

...

    struct bb_state {
        FILE *logfile;
        char  rootdir [PATH_MAX];
    };

    struct bb_state *bb_data;
    size_t           len;
    len = strlen(argv[argc - 2]);
    if (len >= PATH_MAX) {
        // Argument is too long.
        fprintf(stderr, "Argument is too long: %s\n", argv[argc - 2]);
        return EXIT_FAILURE;
    }
    bb_data = malloc(sizeof(struct bb_state));
    strcpy(bb_data->rootdir, argv[argc - 2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:13:25.230

您需要为`rootdir`. 估计你要复制多少个字符，你可以`malloc`为`rootdir`:

确保`argv`足够大以使用`argc-2`. 这也可能导致崩溃。

```
bb_data->rootdir = malloc(strlen(argv[argc-2]+1)); 
```

# prolog - 在 Prolog 中求解方程组

> ID：15977010
> 
> 赞同：7
> 
> 时间：2013-04-12T17:01:50.547
> 
> 标签：prolog, equation-solving, constraint-programming

假设我有一个数字 X，我希望求解方程组，比如 Y+Z=X，Z*Y=1。

现在，这有解决方案 Y=1/Z 和 Z = (sqrt(X*X-4)+X)/2 或 (X-(sqrt(X*X-4)))/2。

所以我可以用 Prolog 写：

```
solve(X,Y,Z):- Y is (sqrt(X*X-4)+X)/2, Z is 1/Y.
solve(X,Y,Z):- Y is (X-(sqrt(X*X-4)))/2,Z is 1/Y. 
```

这行得通。

但

它需要我做大量的初步工作，基本上是事先解决它，然后让 Prolog 评估答案。

有什么方法可以在不事先求解 X 的情况下得到 Z 和 Y？

我不能只写像

```
solve(X,Y,Z):- X is Y+Z, Z is 1/Y. 
```

因为实例化错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:24:37.427

我认为您需要一个 CAS 来象征性地解决系统问题，就像您“手动”所做的那样。这样的软件既不容易找到也不容易构建。

如果实用的方法可以为您做到这一点，图书馆（[clprq](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.8%27,swi%28%27/doc/Manual/clpqr.html%27%29%29)）可以帮助：

```
:- [library(clpr)].
solve(X,Y,Z) :- {Y+Z=X, Z*Y=1}. 
```

产量

```
?- solve(3,Y,Z).
{Z=3.0-Y, -1.0+Z*Y=0.0},
{-1.0+Z*Y=0.0},
{-1.0+Z*Y=0.0}. 
```

这有意义吗？

# apache-camel - Apache Camel FOP 组件未传播标头

> ID：15977012
> 
> 赞同：0
> 
> 时间：2013-04-12T17:02:03.157
> 
> 标签：apache-camel, apache-fop, eip

FOP 组件似乎没有传播标头。在下面的路由中，标头可用于 XSLT 组件，并且确实将它们传递到另一端。但是在fop之后，它们都消失了。

这是一个错误吗？有人可以提出解决方法吗？

```
<route>
    <from uri="direct:render"/>
    <to uri="xslt:file:{{rootDir}}/Report.xsl"/>
    <to uri="fop:application/pdf"/>
    <log message="Headers after fop ${headers}"/>
</route> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:57:16.440

好的，我的解决方法如下：

```
<route>
    <from uri="direct:render"/>

    <!-- Retain header value in property before it's lost -->
    <setProperty propertyName="lostHeader">
        <simple>${header.lostHeader}</simple>
    </setProperty>

    <to uri="xslt:file:{{rootDir}}/Report.xsl"/>
    <to uri="fop:application/pdf"/>

    <!-- Restore it again -->
    <setHeader headerName="lostHeader">
        <simple>${property.lostHeader}</simple>
    </setHeader>

    <log message="Headers after fop ${headers}"/>

    <!-- Now it's available again here -->
    <to uri="jms:jms/happyQueue"/>
</route> 
```

正如我所说，这是一种解决方法，当然，您必须单独处理您需要的任何标题。我可能会在 fop 组件上记录一个 jira 错误。

# android - 显示 ProgressDialog、运行 worker 并等待 worker 完成的 Android 方法

> ID：15977017
> 
> 赞同：0
> 
> 时间：2013-04-12T17:02:17.893
> 
> 标签：android, progressdialog, looper

我需要编写显示 ProgressDialog 的静态方法，在线程中运行 worker 并且在 worker 完成后 ProgreesDialog 必须关闭并且我的方法返回 worker 所做的。这是我的代码：

```
public static TOut execute(final Context c, final String title, final String message, final IProgressWorker worker, final TIn param)
{

        最终 ValueHolder 结果 = 新 ValueHolder();
        最终 ProgressDialog 进度=新 ProgressDialog(c,R.layout.progress_impl_layout);
        线程主 = 新线程（新可运行（）{
            @覆盖
            公共无效运行（）{
                Looper.prepare();//创建新的Looper以立即显示progressDialog
                最终 Looper looper=Looper.myLooper();
                AsyncTask async = new AsyncTask(){
                    @覆盖
                    受保护的无效onPostExecute（布尔结果）{
                        super.onPostExecute(结果);
                        完成=真；
                        looper.quit();//退出 Looper.loop
                        progress.dismiss();
                    }
                    @覆盖
                    受保护的无效onPreExecute（）{
                        super.onPreExecute();
                        progress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                        progress.setTitle(title);
                        进度.setMessage（消息）；
                        进度.show();
                    }

                    @覆盖
                    受保护的布尔doInBackground（整数...参数）{
                        IProgressImpl progressImpl=new MyProgressImpl(progress);
                        worker.execute(progressImpl, param);
                        返回真；
                    }
                };

                async.execute(0);
                如果（！完成）{
                    Looper.loop();//立即显示progressDialog
                }
            }
        });
        main.start();
        尝试 {
            main.join();
        } 捕捉（InterruptedException e）{
            // TODO 自动生成的 catch 块
            e.printStackTrace();
        }
        返回结果。值；
    }
```

一切正常，但 ProgressDialog 不会解雇。我怀疑 looper.quit() 做错了什么，但我需要停止 Looper.loop()。我调用 loop() 因为我需要立即显示 ProgressDialog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:07:30.973

## 如何在 AsyncTask 中更新 Android UI

我建议您使用[Activity.runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)来更新 UI，而不是`Looper`在您的方法中使用和。`AsyncTask``ProgressDialog``show()``dismiss()`

**示例**：

```
runOnUiThread(new Runnable() {
    @Override
        public void run() {
        progress.dismiss();       
    }
}); 
```

如果你的`Context c`，上面，是一个`Activity`上下文，你可以使用它来访问`runOnUiThread()`：

```
 c.runOnUiThread()... 
```

您可能必须`Activity`通过各种方法为您的处理类提供可用的方法，例如将其传递到您的`execute()`方法或使用 Android`Application`实例。

否则，您可以使用常规的`Context`，但`Runnable`上面的相同必须在线程或任务中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:28:14.833

首先，存储到变量中的线程*不是*`main`主（也就是 UI）线程。

 *至于`runOnUIThread()`，您可以在 UI 线程上创建一个处理程序，`post(Runnable r)`并将`postDelayed(Runnable r, long delayMillis)`替换`runOnUIThread()`. [或者，您的函数已经有一个 Context 参数；你可以要求它是一个活动。]

另请注意，在 Android 2 中，在 UI 线程以外的线程上初始化 AsyncTask 类会导致错误。

最后，如果您使用 AsyncTask，为什么需要一个单独的线程？或者，如果您已经有一个工作线程，为什么要使用 AsyncTask？你绝对不需要他们两个。*

# javascript - 了解 SVG 查询字符串参数

> ID：15977018
> 
> 赞同：7
> 
> 时间：2013-04-12T17:02:20.193
> 
> 标签：javascript, parameters, svg, query-string

我创建了一个 SVG 文件，打算在 CSS 中用作背景图像。我希望能够使用查询字符串参数更改 SVG 中的填充颜色，如下所示：

```
#rect     { background-image: url( 'rect.svg' ); }
#rect.red { background-image: url( 'rect.svg?color=red' ); } 
```

据我了解，使用 SVG 中的脚本标签，我能够获取`color`参数并更新填充颜色。这是一个示例 SVG：

```
<!DOCTYPE svg PUBLIC "-//W3C//DDTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
    <rect width="100%" height="100%" />

    <script>
    <![CDATA[
        var params = { };
        location.href.split( '?' )[1].split( '&' ).forEach(
            function( i )
            {
                params[ i.split( '=' )[0] ] = i.split( '=' )[1];
            }
        );

        if( params.color )
        {
            var rect = document.getElementsByTagName( "rect" )[0];
            rect.setAttribute( "fill", params.color );
        }
    ]]>
    </script>
</svg> 
```

直接进入文件，或者使用对象标签似乎可行，但对于 CSS 背景图像或 img 标签，颜色参数被忽略。

我不确定这里发生了什么，我希望对我想要完成的事情有一个解释或替代解决方案（最好不诉诸服务器端处理）。

这是一个显示不同渲染方法的 jsFiddle：http: [//jsfiddle.net/ehb7S/](http://jsfiddle.net/ehb7S/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:25:14.713

您可以使用隐藏的内联 SVG，对其进行更改并将其动态编码为您放入`background-image`属性的数据 URL。您的 HTML 可能如下所示：

```
<div id="backgroundContainer" style="display:none">
    <svg width="100px" height="100px" id="backgroundSvg" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="green"/>
    </svg>
</div>

<div id="divWithBackground" onclick="changeBackground(event)">
    Click to change background SVG to random color
</div> 
```

和你的 JavaScript 一样

```
changeBackground = function(event) {
  var backgroundSvg = document.getElementById("backgroundSvg");
  var backgroundContainer = document.getElementById("backgroundContainer");
  backgroundSvg.getElementsByTagName("circle")[0].setAttribute(
    "fill",
    ["red","green","blue","black"][Math.floor(4*Math.random())]
  );
  event.target.setAttribute(
    "style",
    "background-image:url(data:image/svg+xml,"
    + encodeURI(backgroundContainer.innerHTML)
    + ")"
  );
} 
```

请参阅[jsFiddle 上的概念证明](http://jsfiddle.net/cTYdL/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T15:47:53.430

我最终创建了一个服务器端解决方案，允许我将颜色填充注入 SVG 文件。本质上，我将所有 SVG 请求重定向到一个 PHP 文件，该文件对它们执行以下操作：

```
$filename = $_SERVER['SCRIPT_FILENAME'];

$svg = simplexml_load_file( $filename );
if( isset( $_GET['color'] ) )
{
    $svg->path->addAttribute( 'fill', '#' . $_GET['color'] );
}

header( "Content-type: image/svg+xml" );
echo $svg->asXML( ); 
```

显然，还有更多的东西，处理缓存等等，但这就是肉-n-土豆。可能还想检查该`fill`属性是否已经存在。

# java - Java 多线程 - 单个数组更新

> ID：15977019
> 
> 赞同：1
> 
> 时间：2013-04-12T17:02:22.677
> 
> 标签：java, multithreading

我想在不同的线程中修改一个数组，让我解释一下。

我有一个包含对象数组的“父”线程，最初它是空的。我想用多线程实现的是一种填充这个数组的方法。例如，线程 1 将发出请求并填充位置 0-20，线程 2 21-40 等等。在 C 中这很容易，我只需传递指针并从那里开始工作。

由于java不允许它我不知道该怎么做。我不能从 run() 返回任何东西，也不能将它作为参数传递给线程构造函数，因为无法从上面的线程访问数组。我希望有人知道这样做的干净方法。

myclass 扩展线程并覆盖运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:07:57.577

没有理由扩展 Thread。线程是用于执行工作单元的资源，您不是在创建一种新类型的资源，而是在定义一个工作单元。只需实现runnable，然后你就可以定义自己的构造函数并传入Array。

```
public class ArrayPopulator implements Runnable {

  private Object[] array;
  private int minIndex;
  private int maxIndex;

  public ArrayPopulator(Object[] array, int minIndex, int maxIndex) {
    //assignments
  }

  public void run() {
    for (int i = minIndex; i <= maxIndex; i++) {
      //you get the idea
    }
  }
}

Thread thread1 = new Thread(new ArrayPopulator(array, 0, 19));
Thread thread1 = new Thread(new ArrayPopulator(array, 20, 39)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:07:28.110

```
public void fillPositions(int[] array, int lowerBound, int upperBound) {
    for(int i = lowerBound; i < upperBound; i++) { ... }
}

fillPositions(array, 0, 20);
fillPositions(array, 20, 40); 
```

等等。它与 C 几乎相同，除了不是传递指向起始数组元素的指针，而是传递整个数组以及要由该线程修改的数组下限和上限。

# eclipse - Eclipse中的Tomcat：它运行但无论如何在启动期间超时，也许

> ID：15977023
> 
> 赞同：0
> 
> 时间：2013-04-12T17:02:33.863
> 
> 标签：eclipse, tomcat, timeout, tomcat5.5

我在 Eclipse 中遇到了与 Tomcat 相同的问题：只要我在启动服务器之前就开始运行与我的 Tomcat 5.5 服务器关联的应用程序，[它就会在启动期间运行但超时。](https://stackoverflow.com/questions/4905290/tomcat-in-eclipse-it-runs-but-time-out-during-startup-anyway)

但是如果我在 Eclipse 中自己运行服务器，Eclipse 会识别启动并且不会超时。然后我也可以在 Eclipse 中运行我的关联应用程序，它会在已经启动的服务器上正常启动。

这是一个小小的不便，但是有谁知道是什么导致我通过选择运行应用程序启动它时无法识别服务器启动，但当我单独启动服务器时识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T13:43:23.793

Java 的某些更新会导致 Eclipse 的网络操作出现问题。具体来说，Eclipse 尝试使用 IPv6 而不是 IPv4，但有时会失败。当 Eclipse 启动 Tomcat 时，它所做的最后一步是测试对 Tomcat 的调试调用。这很可能是挂起的部分。幸运的是，修复非常简单。我们只是告诉 Eclipse 使用 IPv4。

为此，请编辑 eclipse.ini 文件（位于 Eclipse 目录中）并将以下内容添加到文件末尾的单独行中：

```
-Djava.net.preferIPv4Stack=true 
```

重新启动 Eclipse，您应该一切顺利。

# php - 如何在 laravel 中获取所有服务器会话的列表？

> ID：15977024
> 
> 赞同：7
> 
> 时间：2013-04-12T17:02:39.653
> 
> 标签：php, session, frameworks, laravel

我正在使用 Laravel 3。我想知道有多少用户在线，所以我想我可能会计算所有服务器会话。任何人都知道我怎么能做到这一点？注意：我`'driver' => 'file',` 在会话配置中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:32:16.907

你可以配置会话类来使用数据库来存储会话数据，然后你可以查询会话表来执行你的查询，这是 Laravel 本身的一个特性。

配置会话的确切方法因您使用的数据库类型而异，这里是使用数据库设置会话的指南：http: [//laravel.com/docs/session/config#database](http://laravel.com/docs/session/config#database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T11:27:58.793

这对我有用。

```
Session::instance()->session['data']; 
```

# ruby-on-rails - 无法连接到数据库 - 无法将 PostgreSQL 数据库推送到 heroku

> ID：15977025
> 
> 赞同：1
> 
> 时间：2013-04-12T17:02:41.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, postgresql-9.1

我创建了一个非常简单的博客应用程序，其中包含几个条目，我要做的就是将其推送到 heroku，但出现以下错误：

```
$ heroku db:push [git@github.com:appname/blog.git]
Loaded Taps v0.3.24
Auto-detected local database: postgres://benjaminw@127.0.0.1/blog_development?en
coding=WIN1252
Warning: Data in the app 'afternoon-taiga-2755' will be overwritten and will not
be recoverable.

!    WARNING: Destructive Action
!    This command will affect the app: afternoon-taiga-2755
!    To proceed, type "afternoon-taiga-2755" or re-run this command with --conf
irm afternoon-taiga-2755

> afternoon-taiga-2755
Failed to connect to database:
Sequel::AdapterNotFound -> LoadError: cannot load such file -- pg 
```

但是我已经安装了 pg gem 并安装了 sequel gem。这是我的宝石文件。我排除了几行，因为它们被注释掉了。有没有人遇到过这个问题？

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

 gem 'pg'
 gem 'activerecord-postgresql-adapter'
 gem 'sequel'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T12:32:45.297

我对 db:pull 有同样的问题。在确保我安装了所有的 gems 之后，它工作了（帽子提示：[heroku db:pull not working](https://stackoverflow.com/questions/3841237/heroku-dbpull-not-working)）。

`gem install pg heroku taps sequel`

# javascript - 当远程站点关闭时，来自远程站点的 JavaScript 会导致我们的站点出现问题

> ID：15977030
> 
> 赞同：0
> 
> 时间：2013-04-12T17:03:06.910
> 
> 标签：javascript, jquery

欢迎大家在我们的站点中，我们包含来自远程站点的 javascript，用于在远程站点的某人启动它时弹出紧急横幅/窗口。如果发生学校范围内的紧急情况，这是向所有人发出警报的一种方式。远程站点不是我们的，我们只包含对他们 js 的调用：

```
<script src="https://embanner.univcomm.cornell.edu/OWC-emergency-banner.js" type="text/javascript"> </script> 
```

问题：当远程站点出现故障时，无论出于何种原因，我们站点中使用我们自己开发的 javascript/jquery 的某些页面都会出现与 javascript 相关的问题。我只是想知道是否有人可能知道这是为什么？当远程站点工作时，我们没有问题。当他们的网站出现故障时，我们的一些使用我们的 js 的网站就会出现问题。

当他们的网站关闭时，我们显然无法提取他们的 javascript 文件，但为什么会对我们的代码产生不利影响呢？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:08:02.077

它以创建所谓的“阻塞操作”的方式加载。考虑异步加载它以避免这种情况。

此处描述的非阻塞操作：[http ://en.wikipedia.org/wiki/Non-blocking_algorithm](http://en.wikipedia.org/wiki/Non-blocking_algorithm)

# java - 无赋值的 Java 三元

> ID：15977031
> 
> 赞同：33
> 
> 时间：2013-04-12T17:03:07.640
> 
> 标签：java, ternary-operator, ternary

有没有办法在不进行分配或伪造分配的情况下进行 java 三元运算？

我喜欢在执行一堆 if/then/else 时的简洁三元代码。

我希望能够基于布尔代数语句调用两个 void 函数之一。

就像是：

`(bool1 && bool2) ? voidFunc1() : voidFunc2();`

我的函数是返回类型的`void`，所以如果有办法在分配中伪造它以使其工作，那么我可以接受......我想看看如何做到这一点:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T17:09:52.763

不，你不能那样做。[规范是这么说](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)的。

> 条件运算符具有三个操作数表达式。? 出现在第一个和第二个表达式之间，并且 : 出现在第二个和第三个表达式之间。
> 
> 第一个表达式必须是 boolean 或 Boolean 类型，否则会发生编译时错误。
> 
> **第二个或第三个操作数** 表达式调用**void**方法是编译时错误。

[编辑]

既然你问反射，这里有一个解决方案。我不推荐这个。我发布它只是因为你问了。

```
public class MyCall
{

    public void a(){System.out.println("a");}
    public void b(){System.out.println("b");}

    public static void main(String... args)
    {
        new MyCall().go();
    }

    public void go()
    {
        Class<? extends MyCall> class1 = this.getClass();
        Method aMethod = class1.getMethod("b", null);
        Method bMethod = class1.getMethod("a", null);
        Object fake = false ? aMethod.invoke(this, null) : bMethod.invoke(this, null);
        Object fake2 = true ? aMethod.invoke(this, null) : bMethod.invoke(this, null);
    }
} 
```

归根结底，您必须问自己，简洁是否可以提高代码的可读性（想想 for-each 循环）。这些解决方案都没有提高代码的可读性恕我直言。如果我是你，我宁愿选择这个。

```
if(condition)
    a();
else
    b(); 
```

即使循环只包含一行，我实际上也**包含大括号，但是由于您要使用清晰的代码，所以上面的代码片段应该可以。**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T17:05:05.300

不，你不能这样做。

如果不喜欢让它更多的陈述，你可以更喜欢这种风格。

```
if(bool1 && bool2) voidFunc1(); else voidFunc2(); 
```

在三元运算符中，操作数必须是非空表达式；即它们必须产生一些实际价值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:24:19.660

如果您真的真的想使用 ternany 操作，那么有一个技巧。但这是非常糟糕的代码，仅用于展示语言能力。我绝不会建议将此代码投入生产，甚至不会向您的朋友展示。

```
int dummy = (bool1 && bool2) ? new Object(){
        public int hashCode() {
            yourFunction1();
            // ...
            yourFunctionN();
            return 0;
        };
    }.hashCode() : new Object(){
        public int hashCode() {
            yourAnotherFunction1();
            // ...
            yourAnotherFunctionN();
            return 0;
        };
    }.hashCode(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-17T10:58:22.733

> 有没有办法在不进行赋值或伪造赋值的情况下进行 java 三元运算？

好的，所以当您编写这样的语句时：

```
 (bool1 && bool2) ? voidFunc1() : voidFunc2(); 
```

代码有两个明显的问题：

1.  ^(条件表达式1)的第二个和第三个操作数不能调用 void 方法。参考：[JLS 15.25](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.25)。

2.  表达式不是语句，除非它是赋值表达式或方法调用或对象创建。参考：[JLS 14.8](http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.8)。

事实上，第二个问题是*语法*错误，我希望任何主流 Java 编译器都会报告它而不是第一个问题。只有当你做了这样的事情时，第一个问题才会暴露出来：

```
 SomeType dummy = (bool1 && bool2) ? voidFunc1() : voidFunc2(); 
```

或者

```
 gobble((bool1 && bool2) ? voidFunc1() : voidFunc2()); 
```

where`gobble`是一个什么都不做的方法......除了“消耗”其参数的值。

AFAIK，没有可以接受原始表达的上下文。

但是，有一些方法可以包装`void`函数，以便可以在条件表达式中调用它们。这是一个：

```
 int dummy = (bool1 && bool2) ? 
     () -> {voidFunc1(); return 0;} : 
     () -> {voidFunc2(); return 0;}; 
```

* * *

^(1 - “条件表达式”是 Java 语言规范中用于此构造的主要术语。它在 Oracle Java 教程中被称为“三元条件运算符”。)

# javascript - 使用 jQuery 预加载 fancybox 图像 iframe

> ID：15977032
> 
> 赞同：0
> 
> 时间：2013-04-12T17:03:08.923
> 
> 标签：javascript, jquery, html, iframe, fancybox

我有`iframe`一个画廊。在我的主网页中，我有一张图片，点击后，它会打开带有fancybox 的“那个”iframe。

**代码是这样的：**

```
<a class="fancybox fancybox.iframe popup" href="http://tambooflores.com.mx/iframe_colores.html" height="100%" width="100%" > 

some IMAGE here
</a> 
```

**fancybox 的脚本是：**

```
 $('.fancybox').fancybox();

    $("a.popup").fancybox({
        'hideOnContentClick' : true,
        'width' : 676,
        'height' : 630,
        'type' : 'iframe',
        'padding' : 16,
        'onComplete' : function() {
            $('#fancybox-frame').load(function() { // wait for frame to load and then gets it's height

            $('#fancybox-content').height($(this).contents().find('body').height()+30);
        });
    }
    }); 
```

问题是我有 8 个 iframe 和 8 个不同的画廊（每个画廊有 20 张图像）。当我单击其中任何一个时，显示需要很长时间。

所以我想在加载主网页时加载一半的图像。

我还想在每个 iframe 中添加这个：

```
The content of IFrame
<script type="text/javascript">
//<![CDATA[
   fireOnReadyEvent();
   parent.IFrameLoaded();
//]]>
</script> 
```

请看[fiddle](http://jsfiddle.net/JyxSt/) 1.如何减少加载时间？2.如何提高加载或加载功能中加载一半的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:16:44.383

我遇到了同样的问题。我是这样解决的：

获取将要加载的图像大小（高度或宽度）并将此结果变量作为 div 高度或宽度值。就这样。

# django - Django/Forms：如何根据收到的数据验证初始数据（如果匹配）？

> ID：15977034
> 
> 赞同：1
> 
> 时间：2013-04-12T17:03:19.770
> 
> 标签：django, django-forms, hidden-field, code-access-security, django-models

假设我正在创建一个表单，并且我正在通过绑定传递一些隐藏值，这些值不能更改。我的问题是如何测试恶意用户是否更改了此隐藏值？我不确定表单中的绑定数据到底是什么以及初始数据之间的区别。

在 Django 的[forms.py](https://github.com/django/django/blob/1.3/django/forms/forms.py)中有一个名为[changed_data](https://github.com/django/django/blob/1.3/django/forms/forms.py#L322)的属性，但我不知道是否有帮助。

演示代码：

**表格.py**

```
class ConfirmForm(forms.Form):
    client_id = forms.CharField(widget=forms.HiddenInput())
    identifier = forms.CharField(widget=forms.HiddenInput())

    def clean(self):
        # Maybe here the validation process of cliend_id and identifier like:
        clean_client_id = self.cleaned_data.get('client_id')
        clean_identifier = self.cleaned_data.get('identifier')
        if last_client_id == clean_client_id and 
           last_identifier == clean_identifier:
            return self.cleaned_data
        else:
            raise forms.ValidationError("False data.") 
```

**视图.py**

```
def form_confirm_handler(request):
    if request.method == 'POST':
        form = ConfirmForm(request.POST)
        if form.is_valid():
            #Do something...
            return redirect('home:index')

    #The following values are not fixed. Are generated variables!
    bound_data = {'client_id':'123456','identifier':'wuiy5895'}
    form = ConfirmForm(bound_data)
    return render(request, 'client/theform.html', {'form':form}) 
```

**html模板**

```
<form action="{% url 'client:confirm' %}" method="post">
    <p>Do you really want to proceed?</p>
    {% csrf_token %}
    {{ form.client_id }}
    {{ form.identifier }}
    <button id="submit" type="submit" name="submit" class="btn" value="accept">Accept</button>
    <button id="cancel" type="submit" name="cancel" class="btn btn-primary" value="cancel">Cancel</button>
</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T13:10:09.817

我找到了 4 个（简单的）可能的解决方案来解决这个问题。

对 Django 最有效的解决方案是：

```
class TheFormName():
    client_id = forms.CharField(show_hidden_initial=True, widget=forms.HiddenInput())
    identifier = forms.CharField(show_hidden_initial=True, widget=forms.HiddenInput())

def clean(self):
    if self.has_changed():
        raise forms.ValidationError('Fields are not valid.')

    return self.cleaned_data 
```

第二种解决方案是使用`changed_data`来查看发生了什么变化：

```
def clean(self):
    for field_name in self.changed_data:
        # loop through the fields which have changed
        print "field {} has changed. New value {}".format(field_name, cleaned_data['field_name'] 
```

对于我的情况是这样翻译的，但与方法完全相同`has_changed()`：

```
def clean(self):
    if len(self.changed_data) > 0:
        raise forms.ValidationError('Fields are not valid.')

    return self.cleaned_data 
```

另一个看起来更像黑客的解决方案是：

```
self.cleaned_data['cliend_id'] == self.instance.cliend_id
self.cleaned_data['identifier'] == self.instance.identifier 
```

最终的解决方案有点复杂，是在`clean()`方法内部（和视图之外）使用会话。[来自Django 文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/#using-sessions-out-of-views)的示例：

```
from django.contrib.sessions.backends.db import SessionStore
import datetime
s = SessionStore()
s['last_login'] = datetime.datetime(2005, 8, 20, 13, 35, 10)
s.save()
s.session_key
>>> '2b1189a188b44ad18c35e113ac6ceead'

s = SessionStore(session_key='2b1189a188b44ad18c35e113ac6ceead')
s['last_login'] 
```

这篇文章也很有用[在 Django 1.4 中，未记录的 Form.has_changed() 和 Form.changed_data 是否按预期工作？](https://stackoverflow.com/questions/11710845/in-django-1-4-do-form-has-changed-and-form-changed-data-which-are-undocument)由@LarsVegas 提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:59:21.313

我一直在考虑是否可以使用会话变量。

```
def form_confirm_handler(request):
    if request.method == 'POST':
        form = ConfirmForm(request.POST)
        if form.is_valid():

            if form.cleaned_data.get['client_id'] == request.session.get('client_id'):
                //.....
            else:
                //.....

            //delete the session after comparing
            del request.session['client_id']
            del request.session['identifier']

            return redirect('home:index')

    #The following values are not fixed. Are generated variables!

    request.session['client_id'] = '123456'
    request.session['identifier'] = 'wuiy5895'

    bound_data = {
        'client_id': request.session.get('client_id'), 
        'identifier': request.session.get('identifier')
    }

    form = ConfirmForm(bound_data)
    return render(request, 'client/theform.html', {'form':form}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:18:21.923

创建一个名为的新隐藏字段`temper_seal`

```
temper_seal = forms.CharField(widget=forms.HiddenInput()) 
```

将 的初始值设置为和`temper_seal`的哈希值，`client_id`以及`identifier`一些只有您的服务器知道的随机常量字符串。

当表单返回用户数据时，对 和 的值`client_id`以及`identifier`之前使用的常量字符串进行哈希处理。`temper_seal`将此值与隐藏字段中提交的值进行比较。如果它们相同，则用户没有更改`client_id`和中的数据`identifier`。

# c - 有没有适用于 linux iptables 的 api，以便我的程序可以添加防火墙规则

> ID：15977037
> 
> 赞同：6
> 
> 时间：2013-04-12T17:03:38.350
> 
> 标签：c, linux, gcc, iptables, libc

我正在使用 libc 编写应用程序，因为我正在寻找 iptables 的 api，以便我可以使用我的程序添加防火墙规则。是否有任何可用的 api 集来执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:06:50.137

您可以使用 libiptc

从howto页面引用：

> libiptc 是用于与 netfilter 通信的库，netfilter 是负责防火墙和数据包过滤的内部内核代码。此代码和 iptables 由 Paul “Rusty” Russell 编写。iptables 是使用 libiptc 调用开发的以完成工作。

[http://tldp.org/HOWTO/Querying-libiptc-HOWTO/whatis.html](http://tldp.org/HOWTO/Querying-libiptc-HOWTO/whatis.html)

# curl - 如何启动 Mintty 并运行脚本文件？

> ID：15977038
> 
> 赞同：14
> 
> 时间：2013-04-12T17:03:40.257
> 
> 标签：curl, cmd, mintty

我写了一个简单的 CURL 并将它放在一个脚本文件中。

如果我先运行 mintty，然后运行“test.sh”，它运行文件中的脚本就好了。完美运行。

但是，如果我尝试使用以下任何命令行运行 mintty，它将不会运行。我在 CMD 中运行这些

```
C:\>c:\cygwin\bin\mintty.exe --exec '/cygdrive/c/cygwin/bin/test.sh'

C:\>c:\cygwin\bin\mintty.exe --exec '/bin/test.sh'

C:\>c:\cygwin\bin\mintty.exe --exec '/test.sh'

C:\>c:\cygwin\bin\mintty.exe --exec 'test.sh'

C:\>c:\cygwin\bin\mintty.exe --exec 'c:/test.sh'

C:\>c:\cygwin\bin\mintty.exe --exec 'c:\test.sh' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T20:32:13.577

对于对此感兴趣的人......这是解决方案

`mintty`在 windows 中为以下目标创建快捷方式

假设您的 shell 文件位于 c:\cygwin\bin

```
C:\cygwin\bin\mintty.exe /bin/bash -l -e '/cygdrive/c/cygwin/bin/test.sh' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T13:37:10.787

尝试直接运行 bash.exe（或使用 cygwin 安装的其他 shell）。

在 Windows shell 中，将目录更改为您的 cygwin 安装并运行：

```
C:\cygwin\bin>bash.exe /cygdrive/c/cygwin/bin/test.sh 
```

通过双击快捷方式来运行 shell 脚本

1) 将命令放入 .bat 文件中

```
test.bat
---------------------------------------------------------------------
c:\cygwin\bin\bash.exe /cygdrive/c/cygwin/bin/test.sh

--------------------------------------------------------------------- 
```

2) 使用 test.bat 作为目标创建一个快捷方式。

我尝试使用 bash.exe 和命令作为目标创建快捷方式。由于某种原因会出错。但是，将命令包装在 .bat 文件中是可行的。去搞清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-20T08:17:08.913

我也使用 nkman 提供的解决方案，但我添加了“-h always”选项，以便控制台保持打开状态，直到我按 Enter 键，看看发生了什么。所以这是我的快捷方式的目标：

```
C:\cygwin\bin\mintty.exe -h always /bin/bash -l -e '/cygdrive/c/cygwin/home/Administrator/startup.sh' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-09T18:48:36.187

# 我认为的最佳解决方案：

调用正确的 shell，没有不必要的窗口，然后调用一个 bash 脚本，该脚本将被保留。

*   **`mintty.exe`例如，在桌面上**创建快捷**方式**

***   **编辑快捷方式的**属性并更改目标（保留路径）：****

    ***   `C:\Program Files\Git\usr\bin\mintty.exe" -h always /bin/bash -l -e 'D:\folder\script.sh'`****

# c# - 如何单元/集成测试依赖于 NSNotificationCenter 的类（在 MonoTouch 中）？

> ID：15977045
> 
> 赞同：0
> 
> 时间：2013-04-12T17:04:14.467
> 
> 标签：c#, objective-c, testing, xamarin.ios, nunit

我正在使用 MonoTouch 编写一个 iOS 应用程序，该应用程序有很多信息要在很多不同的屏幕上输入。信息 A、B 和 C 可能会在屏幕 1 上输入，但我需要在屏幕 3 上显示信息 B 以及信息 X、Y、Z 等的输入。用户可以从屏幕 1 跳到屏幕 7，然后返回屏幕 3。

因此，我创建了一个静态类来接收所有信息（通过 NSNotifications）并缓存它。它还监听来自各个屏幕的信息请求（同样，通过 NSNotifications），从缓存中打包相关信息（在私有静态方法中），并发出另一个通知作为响应。此类应始终具有最新信息，因此无论用户跳转到哪个屏幕都应如此。

```
public static class InformationFlowController
{
    static List<NSObject> _observers;
    static Dictionary<SomeEnum, Object> _data;

    static InformationFlowController()
    {
        _observers = new List<NSObject>();
        _data = new Dictionary<SomeEnum, Object>();

        _observers.Add(NSNotificationCenter.DefaultCenter.AddObserver(Notifications.PayloadA, HandlePayloadA));
        ...
        _observers.Add(NSNotificationCenter.DefaultCenter.AddObserver(Notifications.RequestA, HandleRequestA));
    }

    // receive information A
    static void HandlePayloadA(NSNotification ntf)
    {
        var infoA = (InfoA)ntf.Object;
        if (A == null) { /* throw an exception */ }

        if (_data.ContainsKey(EnumA))
        {
            _data.Remove(EnumA);
        }

        _data.Add(EnumA, infoA);
    }

    // receive request for info A
    static void HandleRequestA(NSNotification ntf)
    {
        InfoA info = null;

        if (_data.ContainsKey(EnumA))
        {
            info = _data.GetValue(EnumA);
        }

        // its up to the receiver what it wants to do if it gets null
        NSNotificationCenter.DefaultCenter.PostNotificationName(Notifications.ResponseA, info);
    }
} 
```

这一切都很好。

**我的问题是如何进行单元/集成测试？** 由于 app/policy/yadda-yadda 的性质，我必须有 ~100% 的代码覆盖率。这是我尝试过的和遇到的。

我试图为此编写集成测试的问题是确保如果我请求信息 A，我会得到信息 A 的响应。

```
[Test]
public void HandleRequestForATest()
{
    // setup the data in the IFC here

    NSNotificationCenter.DefaultCenter.AddObserver(Notifications.ResponseA, delegate(NSNotification ntf)
    {
        var info = ntf.Object as InfoA;
        Assert.IsNotNull(info, "Info is null!");
        // some other asserts to check the data within info
    }

    NSNotificationCenter.DefaultCenter.PostNotificationName(Notifications.RequestA, null);        
} 
```

测试以 0 个断言通过。我放了一个断点`var info = ntf.Object as InfoA;`，它永远不会被触及。我想也许它在收到响应之前就被 GC 处理了，但是我在`IFC.HandleRequestA`方法中设置了一个断点，它永远不会被调用。通过检查，我可以看到通知正在向 DefaultCenter 注册，但它们似乎没有被解雇。

除此之外，我如何测试以确保在一定时间内收到通知，如果没有，则测试失败？我尝试添加一个类变量：

```
bool assertsCompleted = false; 
```

并修改测试：

```
[Test]
public void HandleRequestForATest()
{
    // setup the data in the IFC here

    NSNotificationCenter.DefaultCenter.AddObserver(Notifications.ResponseA, delegate(NSNotification ntf)
    {
        var info = ntf.Object as InfoA;
        Assert.IsNotNull(info, "Info is null!");
        // some other asserts to check the data within info
        assertsCompleted = true;
    }

    NSNotificationCenter.DefaultCenter.PostNotificationName(Notifications.RequestA, null);        

    NSTimer.CreateTimer(2, delegate
    {
        if (!assertsCompleted)
        {
            Assert.IsTrue(false, "Notification not received or Asserts not complete!");
        }
    } 
} 
```

我放了一个断点`if (!assertsCompleted)`，也没有被击中。

请帮忙！:)

**EDIT2** 我将 IFC 类从静态更改为非静态（以及方法），并解决了未调用处理程序的问题。这意味着我必须在 AppDelegate 和 TestFixtureSetUp 中实例化它，但我认为我们可以忍受这一点。 **/EDIT2**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:42:54.587

你可以尝试这样的事情：

```
[Test]
public void HandleRequestForATest()
{
    // setup the data in the IFC here

    var resetEvent = new ManualResetEvent(false);
    InfoA info = null;

    var observer = NSNotificationCenter.DefaultCenter.AddObserver(Notifications.ResponseA, delegate(NSNotification ntf)
    {
        info = ntf.Object as InfoA;
        resetEvent.Set();
    }

    NSNotificationCenter.DefaultCenter.PostNotificationName(Notifications.RequestA, null);        

    Assert.IsTrue(resetEvent.WaitOne(250), "Reset event timed out!");
    Assert.IsNotNull(info, "Info is null!");
    // some other asserts to check the data within info

    //Make sure you do this! I'd put in try-finally block
    NSNotificationCenter.DefaultCenter.RemoveObserver(observer);
} 
```

# r - 使用转换和调用函数将列添加到数据框——一个令人讨厌的奇怪行为

> ID：15977046
> 
> 赞同：0
> 
> 时间：2013-04-12T17:04:15.133
> 
> 标签：r

***可重现和简化的示例来解释我的核心问题***：

我从一个以向量作为参数的函数开始，比如：`fVec <- function(v) v[1]*v[2]`.

出于比较目的，使用显式参数来表达相同功能的直接方式是：`fDirect <- function(a, b) a*b`.

在我的用例中，我想用`fDirect`上面的显式参数构建一个函数，但通过调用初始函数来实现它`fVec`。所以为了这个目的，我定义了：`fIndirect <- function(a, b) fVec(c(a, b))`. （我在下面解释为什么我想做这样的事情显然没有任何意义！）

正如预期的那样，`fVec(c(2, 3))`,`fDirect(2, 3)`和`fIndirect(2, 3)`返回 6，到目前为止一切顺利。

现在出于绘图目的，我使用要绘制的数据构建一个数据框，如下所示：

1.  创建函数参数值：`mydf <- data.frame(a=1:3, b=2:4)`.
2.  使用 将函数值添加到新列中`transform`。

使用`fDirect`,`transform(mydf, v=fDirect(a, b))`确实按预期工作，它返回：

```
> transform(mydf, v=fDirect(a, b))
  a b  v
1 1 2  2
2 2 3  6
3 3 4 12 
```

但是，使用`fIndirect`，它不会返回所需的函数值：

```
> transform(mydf, v=fIndirect(a, b))
  a b v
1 1 2 2
2 2 3 2
3 3 4 2 
```

在调试中，我意识到使用`fIndirect`,`transform`传递给`fVec`作为列`a`和`b`数据框的并集的向量参数，即：`c(mydf[["a"]], mydf[["b"]])`. 因此，`fVec`做了它被编程做的事情，即评估前两个元素的乘积，因此返回`1*2=2`所有行。

到目前为止，我能想出的解决这一挑战的最佳**解决方案**是使用以下方法：`transform``apply`

```
cbind(mydf, v=apply(mydf, 1, function(row) fIndirect(row["a"], row["b"]))) 
```

***问题***：为什么`transform`将两个数据框列都传递给`fVec`through`fIndirect`而不是与调用它时的行为方式相同，`fDirect`在那里它一次评估函数一行？是 R 的错误还是我误解了 R 工作方式的基本原理，比如关于范围界定和/或参数转换？

***上下文***：

本节解释了为什么我遵循这样的过程，也许有人可以指出一种更好的架构方法。

我有一个相当复杂的目标函数，我试图优化（即`fVec`角色）。为了方便起见，这个函数有可变数量的参数作为命名向量参数传入，我使用这个函数的各种方式，特别是使用 BBoptim 优化器，它期望一个向量作为目标函数的参数。

在变量参数的数量为 1 或 2 的某些情况下，我想绘制我的目标函数（我`plot`在 1-dim 情况下使用；我在 2-dim 情况下使用`levelplot`和`wireframe`from lattice 包）。

因此，我构建了一个带有显式参数（即`fIndirect`角色）的临时函数，以便于将要绘制的数据构建到数据框（即`mydf`角色）中。由于我的目标函数相对复杂，并且我需要一个带有向量参数的版本，我希望`fIndirect`通过调用我的原始目标函数来实现我的临时函数`fVec`。

谁能提出比我在上面的简化示例中展示的过程更好的方法来实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:48:06.680

所以我可以将此问题标记为已回答，感谢 Joran，关键问题不在`transform`; 问题是`fIndirect`不支持*矢量化*操作。

`fDirect`带有支持向量化操作的向量参数：

```
fDirect(1:3,2:4)
[1]  2  6 12 
```

`fIndirect`具有相同的向量参数**不支持**向量化操作：

```
fIndirect(1:3,2:4)
[1]  2 
```

这是有道理的`fIndirect(1:3,2:4) = fVec(c(1:3,2:4))`，这是前两个元素的乘积。

我的误解是相信会在数据框的每一行上`transform(mydf, v=fct(a, b))`调用该函数，即对于每个调用都带有一对标量的每个行索引。相反，我了解到数据框中的新列是通过将函数的矢量化形式调用为. 我在自学 R 时错过了这种基本的操作模式！`fct``mydf``fct(mydf[i, "a"], mydf[i, "b"])``i``v``fct(mydf[["a"]], mydf[["b"]])`

`fIndirect`因此，支持*矢量化*操作的正确实现可能类似于：

```
fIndirect <- function(a, b)
  vapply(1:length(a), function(row) fVec(c(a[row], b[row])), FUN.VALUE=1) 
```

最重要的是，在实现函数时，请确保通过**在**函数实现中循环遍历向量元素来支持向量参数！

关于我的上下文中的整个过程，我认为这很好。如果不需要自动化流程，作为在 R 中编写流程的替代方案，我想可以使用一些*UI*交互包（如`Rcmdr`.

我希望我所学到的细节可能对某人有用。

# revmob - Revmob 架构 armv7 的未定义符号

> ID：15977050
> 
> 赞同：0
> 
> 时间：2013-04-12T17:04:19.113
> 
> 标签：revmob

我正在使用 OSX 10.7.5、XCode 4.5、RevMob v 5.5.1。

当我单击左上角的播放按钮时，XCode 生成了以下错误：

```
Undefined symbols for architecture armv7:
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[BCFAdsReachability connectionRequired] in RevMobAds(BCFAdsReachability.o)
      -[BCFAdsReachability currentReachabilityStatus] in RevMobAds(BCFAdsReachability.o) 
```

截图： ![在此处输入图像描述](https://i.stack.imgur.com/PCuKb.png)

这是编译源和链接库列表，以防有人向我推荐一些旧线程：

![在此处输入图像描述](https://i.stack.imgur.com/CPXNQ.png)

我想我已经正确链接了所有二进制文件。但是，我确实使用模拟器和我的 iPhone 来尝试该应用程序，但它仍然显示上述错误。

你能告诉我缺少什么以及应该做些什么来解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:40:23.193

您忘记按照他们的[文档中的要求添加](http://sdk.revmob.com/ios#configuration)**SystemConfiguration**框架。

# sql - 同一张表上的 SQL 更新和防止重复

> ID：15977054
> 
> 赞同：0
> 
> 时间：2013-04-12T17:04:44.617
> 
> 标签：sql

我正在尝试更新可能有重复的表上的值，我想避免这些重复以避免错误：

**桌子：**

```
TicketID : UserID
  0      :   1
  0      :   5
  0      :   6
  1      :   4
  1      :   5 
```

我想要做的是将所有票证 ID 更新`that = 0,`为`1`. 如您所见，已经有一个值`1 : 5`导致了冲突。我已经尝试过`merge, insert into`，`where`但无法获得忽略更新可能存在的行的查询。

更新后我会手动删除剩余的`0 : 5`，因为它不会被更新，我认为合并可以为我做到这一点，但我无法让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:13:27.687

首先检查重复项并删除它们 - 然后执行 ubdate。

```
BEGIN TRAN

DELETE FROM Table
WHERE TicketID = 0 AND UserID IN(SELECT UserID FROM TABLE WHERE TicketID=1);

UPDATE TABLE
SET TicketID = 1
WHERE TicketID = 0;

/*If no error run*/
COMMIT TRAN
/*If error run*/
ROLLBACK TRAN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:22:36.327

尝试如下。它会帮助你..

```
UPDATE TABLENAME
SET TicketID = 1
WHERE TicketID = 0 AND UserID Not IN(SELECT distinct UserID FROM TABLENAME 
WHERE TicketID=1)

DELETE FROM TABLENAME WHERE TicketID = 0 
```

# directx - 顶点处理与像素着色的相对开销

> ID：15977055
> 
> 赞同：0
> 
> 时间：2013-04-12T17:04:47.400
> 
> 标签：directx, shader

我即将开发的 DirectX 应用程序可以通过两种方式实现——一种是我们有大量具有相关颜色的三角形，另一种是我们有少量三角形但通过生成纹理的纹理映射添加细节。

我对 GPU 硬件还很陌生，所以我对这两种方法的代价没有直觉 - 我的猜测是处理大量顶点比处理少量顶点更昂贵，但从像素中添加了一些细节着色器，但在硬件方面并不能真正证明这一点。

谁能解释一下如何思考这个问题，或者这是否是正确的心态？

任何帮助表示赞赏

阿农德夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:20:14.797

使用大多边形并使用纹理对其进行详细说明会更有效。这就是纹理映射存在的原因。这是一种使平面看起来更细致的尝试。凹凸贴图技术通过使照明表现得好像多边形不平坦，进一步增强了效果。

然而，这永远不会像使用多边形那样逼真，因为诸如剪影是平坦的等问题。

如果你想象三角形如此之小以至于它们最终占据屏幕上的一个像素。每个像素都必须使用矩阵数学计算其位置，每个多边形将被交给光栅化器并转换为单个像素，每个像素将被发送到像素着色器。这是很多工作，并且像素着色器仍然需要运行才能计算出这个像素的光照。

相反，如果我们有一个大三角形填充屏幕，则使用矩阵数学仅转换三个顶点，光栅化器将一个三角形转换为像素。像素着色器的执行次数与前面的示例相同。唯一的区别是像素着色器需要进行纹理贴图查找，这相对便宜。

# opengl - OpenGL纹理查找错误

> ID：15977064
> 
> 赞同：0
> 
> 时间：2013-04-12T17:05:17.453
> 
> 标签：opengl, textures

执行以下片段着色器时出现错误：

```
#version 430 core

in vec4 pos;           // <-- input (x,y,z) position normalized to [0, 1] 
in vec4 screenPos;     // <-- input screen position normalized to [-1, 1] 
out vec4 outColor;

uniform sampler3D volumeTex;    // <-- a volume
uniform sampler2D backFaceTex;  // <-- the backface of a cube previously saved to texture

void main()
{
    if(gl_FrontFacing) {
        vec4 front = pos;
        vec4 back = texture(backFaceTex, (screenPos.xy/screenPos.w+1.0)/2.0);

        // only one of the following 4 lines is uncommented at a time
        outColor = front;                          // <-- Ok
        outColor = back;                           // <-- Ok
        outColor = texture(volumeTex, front.xyz);  // <-- Ok
        outColor = texture(volumeTex, back.xyz);   // <-- Error
    }
    else {
        discard;
    }
} 
```

正如您从我的评论中看到的那样，该程序运行良好，在前三种情况下渲染了我期望的图像，但在第四种情况下失败了（我唯一需要的）。

没有呈现任何内容，并且我从主应用程序中的 glGetError() 收到错误。

似乎禁止使用纹素作为另一个纹理提取操作的坐标参数。

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:02:23.320

使用纹理提取的结果作为另一个纹理提取的坐标称为依赖纹理提取，并且是完全有效的（尽管与独立 fecth 相比它可能对性能产生一些负面影响）。

您的代码中的问题很可能是

```
vec4 back = texture(backFaceTex, (screenPos.xy/screenPos.w+1.0)/2.0); 
```

行，你基本上有一个 (vec2(...) + 1.0) 操作，这是不允许的，应该会导致编译错误。这也可以解释这样一个事实，即没有绘制任何内容，并且在尝试绘制时出现错误（没有有效的程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:25:43.077

谢谢derhass，

我发现问题出在哪里：我为 3D 和 2D 采样器使用了相同的纹理单元，这是非法的。保持代码不变，例如，简单地将纹理单元 0 用于 sampler3D，将纹理单元 1 用于 sampler2D，即可解决问题！

干杯，马西莫

# javascript - 将下拉框中所选项目的值分配给单选按钮

> ID：15977068
> 
> 赞同：0
> 
> 时间：2013-04-12T17:05:28.650
> 
> 标签：javascript, jquery, html, drop-down-menu

我有一个选择下拉列表，其值来自数据库，如下所示：

```
<aui:select id="empName" name="empName">
 <%
    List<Employee> EmpList =     EmployeeLocalServiceUtil.getEmployees(-1,-1);
for(Employee emp : EmpList ) {
  %>
  <aui:option value='<%=emp.getEmpFname()%>'><%=emp.getEmpFname()%><%=emp.getEmpLname()%></aui:option>
  <% } %>
</aui:select> 
```

我使用以下代码将此值分配给标签：

```
 $(document).ready(function(){
     $('select[id*=empName]').change(function(){
        var value = $(this).val();      
        $('#myUniqueLabelId').text(value);
     });
   }); 
```

`myUniqueLabelId`标签的id在哪里。

我有单选按钮说-

```
 <input type = "radio" name = "radioex" id = "radio1 value = "ex1"/>
 <input type = "radio name = "radioex" id = "radio2"/> 
```

到单选按钮，`id = radio2`我想分配从下拉框中选择的值，以便我可以在我的操作类中使用它。我应该如何使用**jQuery**来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:07:31.940

您可以使用此代码分配 #radio2 的值

```
$('select[id*=empName]').change(function(){
    var value = $(this).val();      
    $("#radio2").val(value);
}); 
```

# java - 为什么我的开关不工作？

> ID：15977069
> 
> 赞同：0
> 
> 时间：2013-04-12T17:05:29.877
> 
> 标签：java, switch-statement

我正在使用`System.currentTimemillis`. 我有一个每秒刷新 10 次的方法，下面的代码：

Start 是活动的开始时间，它在 onCreate 方法中被“询问”。我知道这很`Integer.parseInt(Long.toString(y))`有效，因为当我这样做时，`System.out.println(Integer.parseInt(Long.toString(y)));`它会正确返回我的时间。

所以，我的问题是我不知道为什么 swich 不能正常工作。

```
long y=System.currentTimeMillis()-start;

switch (Integer.parseInt(Long.toString(y))) {           
    case 1000:
        time.setText("3");
        time.setAnimation(anim);
        break;

    case 2000:
        time.setText("2");
        time.setAnimation(anim);
        break;

    case 3000:
        time.setText("1");
        time.setAnimation(anim);
        break;

    case 4000:
        time.setText("GOOO!");
        time.setAnimation(anim);
        count.setVisibility(View.VISIBLE);
        cuenta = 0;
        count.setText("0");
        break;

    case 5000:
        time.setText("1");
        time.setAnimation(anim);
        break;

    case 6000:
        time.setText("2");
        time.setAnimation(anim);
        break;

    case 7000:
        time.setText("3");
        time.setAnimation(anim);
        break;

    case 8000:
        time.setText("4");
        time.setAnimation(anim);
        break;

    case 9000:
        time.setText("5");
        time.setAnimation(anim);
        break;

    case 10000:
        time.setText("Time!");
        time.setAnimation(anim);
        count.setVisibility(View.INVISIBLE);
        break;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:07:28.657

因为它不会准确地给出这些数字 1000,2000,3000...

如果数字或多或少，则案例将失败

**编辑：**

尝试这个

```
public static boolean isBetween(int x, int lower, int upper) {
  return lower <= x && x <= upper;
}

if (isBetween(num, 0, 1000)) {

  // do something

} else if (isBetween(num, 1001, 2000)) {

// do domething

}
... 
```

...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:11:22.890

您的代码的问题是您检查了一个特殊的时间。我想你可能想使用这样的代码：

```
Integer val = Integer.parseInt(Long.toString(y));
if(val<1000) {
    time.setText("3");
    time.setAnimation(anim);
} else if(val<2000) {
    time.setText("2");
    time.setAnimation(anim);
} else if(val<3000) {
    time.setText("1");
    time.setAnimation(anim);
} else if(val<4000) {
    time.setText("GOOO!");
    time.setAnimation(anim);
    count.setVisibility(View.VISIBLE);
    cuenta = 0;
    count.setText("0");
} else /* and so on */ 
```

基本上，如果不检查下一个，您只需检查您是否处于特殊间隔。

# python - 导入模块而不导入模型导入

> ID：15977072
> 
> 赞同：1
> 
> 时间：2013-04-12T17:05:49.783
> 
> 标签：python, import

我正在尝试导入一个 python 模块而不导入该模块的导入。我正在挖掘一点，但是在导入文件时排除任何命令运行的唯一方法是`if __name__ == "__main__":` 但是该模块也被其他各种支持模块导入的模块导入，所以我不能将导入放在下面 `if __name__ == "__main__":` 知道如何解决吗？

我不想导入这些模块的原因是这些模块也可以从 jar jython 环境中运行并导入 java.lang 函数。我只需要访问该文件中的一些函数，而不需要全部并导入这些模块中断 make 脚本。我试图访问的功能不需要任何依赖模块啊。

我通过“从 moduleX 导入 f1、f2、f3”导入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:07:10.303

您也许可以使用导入挂钩来解决此问题。该`sys.meta_path`变量是可以覆盖正常导入处理的导入器列表。您可以使用它们来存根仅存在于 Jython 中的模块。这是一个例子：

```
import types, sys

class Stub(object):
    def __getattr__(self, name):
        return self

class StubModule(types.ModuleType):
    def __getattr__(self, name):
        return Stub()

class StubJavaImporter(object):
    def find_module(self, fullname, path = None):
        if fullname == 'java' or fullname.startswith('java.'):
            return self
        else:
            return None

    def load_module(self, fullname):
        mod = sys.modules.setdefault(fullname, StubModule(fullname))
        mod.__file__ = "<%s>" % self.__class__.__name__
        mod.__loader__ = self
        mod.__path__ = []
        mod.__package__ = fullname
        return mod

sys.meta_path.append(StubJavaImporter()) 
```

运行此代码后，您可以导入任何以开头的模块`java.`并访问其中的任何属性路径。例如：

```
In [2]: from java.lang import Object

In [3]: Object.equals
Out[3]: <__main__.Stub at 0x14d8b90>

In [4]: Object
Out[4]: <__main__.Stub at 0x14d8b90>

In [5]: Object.foo.bar.baz
Out[5]: <__main__.Stub at 0x14d8b90> 
```

这可能足以使事情正常进行。这是一个*讨厌的，讨厌的*黑客，但如果你真的不能修改有问题的模块，这可能是你能做的最好的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T17:22:57.860

如果您想使用`from module import *`并且不包含其中导入的所有内容，`module`那么您应该`__all__`在`module`. 这个变量应该是一个字符串列表，命名应该导入的类、变量、模块等。

来自 python 文档

> 如果标识符列表被星号 ( `*`) 替换，则模块中定义的所有公共名称都绑定在 import 语句的本地命名空间中

和

> 模块定义的公共名称是通过检查模块命名空间中的变量来确定的`__all__`；如果已定义，它必须是由该模块定义或导入的名称的字符串序列。中给出的名称`__all__`都被认为是公开的，并且必须存在。如果`__all__`未定义，则公共名称集包括在模块命名空间中找到的所有名称，这些名称不以下划线字符 ( `_`) *[...]开头，* **旨在避免意外导出不属于 API 的项目（例如作为在模块中导入和使用的库模块）**。*（强调我的）*

# csv - ElementTree.ParseError：格式不正确（无效标记）

> ID：15977075
> 
> 赞同：0
> 
> 时间：2013-04-12T17:06:05.990
> 
> 标签：csv, encoding, python-3.x, xml-parsing

我创建了两个应用程序：

*   将 csv（以 latin-1 编码）转换为 xml

    ```
    import xml.etree.ElementTree as xml
    xml.ElementTree(xmlData).write(xmlFile, encoding='ISO-8859-1') 
    ```

*   将以前的 xml 加载到我的数据库（mysql）

    *   没有解析器

        ```
        from xml.etree import ElementTree as etree
        etree.parse(xmlFile) 
        ```

    *   解析器

        ```
        from xml.etree import ElementTree as etree
        myparser = etree.XMLParser(encoding='ISO-8859-1')
        etree.parse(xmlFile, parser=myparser) 
        ```

加载 CSV 文件并将其转换为 XML 文件是可行的。

**问题**：我无法将 XML 文件加载/解析到 Elementree

**错误信息：**

```
 "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/xml/etree/ElementTree.py",    line 1726, in parse
parser.feed(data)
    xml.etree.ElementTree.ParseError: not well-formed (invalid token): line 14443, column 0 
```

**笔记：**

*   每个文件都以 latin-1/ISO-8859-1 编码
*   CSV 文件的大小约为 1GB
*   我使用python v3.3
*   用 latin-1 替换 ISO-8859-1 没有帮助

**更新：** 第 14443 行以（十六进制）开头：0xc 0x44 0x4c 0x56 0x36 0x32 ...

由于解析错误发生在第 14443 行的第 0 列中，因此错误是由 0xc 产生的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:20:47.463

**解决方案：**

```
tr -dc '[\011\012\015\040-\176\200-\377]' < input.xml > output.xml 
```

这不是最佳解决方案，因为我们创建了另一个（大）文件。

# c++ - 拥有一个具有原始指针访问器的 unique_ptr 成员是不好的做法吗？

> ID：15977077
> 
> 赞同：4
> 
> 时间：2013-04-12T17:06:24.663
> 
> 标签：c++, c++11, std

我有一个具有 unique_ptr 成员的类，并且该类保留该对象的唯一所有权。但是，外部类可能需要访问该对象。在这种情况下，我应该只返回一个原始指针吗？shared_ptr 似乎不正确，因为这意味着访问类现在共享该内存的所有权，而我想明确指出原始类是唯一的所有者。

例如，也许我有一个拥有根节点的树类。另一个类可能出于某种原因希望探索树，并且需要一个指向根节点的指针来执行此操作。部分实现可能如下所示：

```
class Tree
{    
public:
    Node* GetRoot()
    {
        return m_root.Get();
    }

private:
    std::unique_ptr<Node> m_root;
}; 
```

这是不好的做法吗？更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:15:01.767

更正常的实现可能是`Tree`暴露迭代器或提供`visit`探索树的机制，而不是暴露`Tree`自身的实现细节。公开实现细节意味着您永远无法更改树的底层结构，而不会有破坏该代码的谁知道多少客户的风险。

如果您绝对坚持需要这样做，至少将指针返回为`const`，例如`const Node* GetRoot() const`因为外部客户端绝对不应该改变树结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:24:17.747

Scott Meyers，*Effective C++* Item 15 说是的，尽管主要原因是与遗留代码的交互性。如果你在一个受控的环境中——例如一个很少有遗留代码的初创公司，并且很容易根据需要或在家庭作业中扩展一个类——可能没有什么需要，它可能只会鼓励错误地使用这个类。但更可重用的方法是公开原始资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:27:38.157

请记住，当人们说“避免指针”时，他们的真正意思是“使用所有权语义”，并且指针本质上并不是坏事。

返回非拥有指针是一种可接受的获取引用的方法，这些引用也可能为空，并且不再比其他方法危险。现在，在你的情况下，这只有在你的树被用作 tree 时才有意义*，*而不是在内部使用 tree `std::map`。

尽管通常您希望将指针和资源抽象出来，但这样做并不常见。

# javascript - JavaScript 无响应验证

> ID：15977078
> 
> 赞同：5
> 
> 时间：2013-04-12T17:06:29.187
> 
> 标签：javascript, html

我是 javascript 新手，我正在尝试创建一个简单的表单验证。当我点击提交按钮时，没有任何反应。我已经看了一段时间的例子，我似乎无法弄清楚我哪里出错了。有什么建议么：

在这篇文章之后，我将把它分解并从更小的开始。但与此同时，我认为另一双眼睛不会受伤，很可能我做错了什么。

HTML：

```
<form name="form" action="index.html" onsubmit="return construct();" method="post">
    <label>Your Name:<span class="req">*</span> </label>
    <input type="text" name="name"  /><br />
    <label>Company Name:<span class="req">*</span> </label>
    <input type="text" name="companyName" /><br />
    <label>Phone Number:</label> 
    <input type="text" name="phone" /><br />
    <label>Email Address:<span class="req">*</span></label> 
    <input type="text" name="email" /><br />
    <label>Best Time to be Contacted:</label> 
    <input type="text" name="TimeForContact" /><br />
    <label>Availability for Presenting:</label> 
    <input type="text"  name="aval" /><br />
    <label>Message:</label>
    <textarea name="message" ROWS="3" COLS="30"></textarea>
    <label>First Time Presenting for AGC?:<span class="req">*</span></label> 
    <input type="radio" name="firstTime" value="Yes" id="yes" /><span class="small">Yes</span>
    <input type="radio" name="firstTime" value="No" id="no"/><span class="small">No</span><br /><br />
    <input type="submit" name="submit" value="Sign-Up" />
</form> 
```

JavaScript：

```
function construct() {
    var name = document.forms["form"]["name"].value;
    var companyName = document.forms["form"]["companyName"].value;
    var email = document.forms["forms"]["email"].value;
    var phone = document.forms["forms"]["phone"].value;
    var TimeForC = document.forms["forms"]["TimeForContact"].value;
    var availability = document.forms["forms"]["aval"].value;

    if (validateExistence(name) == false || validateExistence(companyName) == false)
        return false;
    if (radioCheck == false)
        return false;
    if (phoneValidate(phone) == false)
        return false;
    if (checkValidForOthers(TimeForC) == false || checkValidForOthers(availability) == false)
        return false;
    if (emailCheck(email) == false)
        return false;
}
function validateExistence(name) {
    if (name == null || name == ' ')
        alert("You must enter a " + name + " to submit! Thank you."); return false;
    if (name.length > 40)
        alert(name + " is too long for our form, please abbreviate."); return false;
}

function phoneValidate(phone) {
    if (phone.length > 12 || phone == "" || !isNaN(phone))
        alert("Please enter a valid phone number."); return false;
}

function checkValidForOthers(name) {
    if (name.length > 40)
        alert(name + " is too long for our form, please abbreviate."); return false;
}

function messageCheck(message) {
    var currentLength = name.length;
    var over = 0;
    over = currentLength - 200;

    if (name.length > 200)
        alert(name + " is too long for our form, please abbreviate. You are " + over + " characters over allowed amount"); return false;
}

function radioCheck() {
    if (document.getElementById("yes").checked == false || document.getElementById("no").checked == false)
        return false;
}

function emailCheck(email) {
    var atpos = email.indexOf("@");
    var dotpos = email.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= email.length) {
        alert("Not a valid e-mail address");
        return false;
    }
} 
```

我是否错误地调用了我的函数？老实说，我不确定我哪里出错了。
我不明白如何调试我的代码......我正在使用 chrome，但在控制台中没有收到任何错误。有没有办法设置断点来单步执行 javascript？

我意识到我只是在那里扔了很多代码，所以提前感谢您筛选它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:18:46.397

这是错误：

代替`var email = document.forms["forms"]["email"].value;`

经过`var email = document.forms["form"]["email"].value;`

您的 js 中有很多地方：

var email = document.forms[" **forms** "]["email"].value;

var phone = document.forms[" **forms** "]["phone"].value;

var TimeForC = document.forms[" **forms** "]["TimeForContact"].value;

var 可用性 = document.forms[" **forms** "]["aval"].value;

您将**form**错误输入为**forms 的**地方。

**有没有办法设置断点来单步执行 javascript？**

是的，有一种方法可以设置断点：

![在此处输入图像描述](https://i.stack.imgur.com/NKrbE.gif)

请参阅以下链接以了解在 Chrome 的调试器控制台中设置断点的方法：

**[链接 1](https://stackoverflow.com/questions/5156388/how-to-set-breakpoint-in-inline-javascript-in-google-chrome-browser-for-linux)**

**[链接 2](https://stackoverflow.com/questions/10050465/set-a-javascript-breakpoint-in-code-in-chrome)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:18:47.860

以下应该可以解决眼前的问题：

```
function construct(form) {
  var 
    name = form["name"].value,
    companyName = form["companyName"].value,
    email = form["email"].value,
    phone = form["phone"].value,
    TimeForC = form["TimeForContact"].value,
    availability = form["aval"].value
  ;
  if (!validateExistence(name) || !validateExistence(companyName)) {
    return false;
  }
  else if (!radioCheck) {
    return false;
  }
  else if (phoneValidate(phone) == false) {
    return false;
  }
  else if (!checkValidForOthers(TimeForC) || !checkValidForOthers(availability)) {
    return false;
  }
  else if (emailCheck(email) == false) {
    return false;
  }
} 
```

您在表单中有错字`document.forms["forms"]`，其中不存在“表单”。`this`您可以使用将当前元素传递给您的函数，而不是总是遍历对象来获取您的表单。

```
<form action="index.html" onsubmit="return construct(this);" method="post"> 
```

如果您刚开始，确保设置所有大括号（即大括号）也是一个好主意，因为这将帮助您避免在对齐和大括号匹配方面感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:23:37.140

你的第一个问题是`forms`你的意思`form`。看[这里](http://jsfiddle.net/FCwYW/)

但是您的验证代码还有其他问题，例如：

```
if (name == null || name == ' ') 
```

在这里，您正在检查是否`name`为 null 或 name 是否为单个空格。我假设您想检查该字段是否为空白，但是在您的情况下，一个完全空的字符串将评估为 false，两个空格也是如此。您可能想要做的是这样的事情：

```
if (!name) {
    // tell the user they need to enter a value
} 
```

方便地（或有时不是），Javascript 将 null、空字符串或充满空格的字符串解释为 false，所以这应该涵盖您。

您还有很多其他问题，请参见：

[http://jsfiddle.net/FCwYW/2/](http://jsfiddle.net/FCwYW/2/)

大多数问题已经被其他人指出。

*   如果语句 `{}`后面有多行，则 需要使用大括号。`if`
*   当您通过验证测试时，您需要返回 true，否则 Javascript 会将缺少返回值解释为 false。
*   **只有选中两个**单选按钮，您`radioCheck`才会通过。
***   您在哪里检查您的电话号码不是 NaN（即它是一个数字），如果是则返回 false。**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T17:47:05.597

我建议学习一些新的调试技能。有一些方法可以分解这样的问题，从而快速隔离您的问题：

*   注释掉代码并一点一点地启用部分
*   使用调试器，例如 Firebug
*   使用`console.log()`或`alert()`调用
*   逐行审查您的代码并考虑它应该做什么

在您的情况下，我会首先查看是否通过语句`name`获得值`console.log(name)`，然后从那里继续前进。您会立即看到该名称没有获得值。这将导致发现您有错字（`"forms"`而不是`"form"`）。

您的代码中的其他一些错误：

*   您在以下`if`语句之外返回 false `validateExistence()`：

    ```
    if (name == null || name == ' ')
        alert("You must enter a " + name + " to submit! Thank you."); 
        return false; 
    ```

    `{}`在这种情况下，您的语句周围没有括号。它**看起来**像`return false`在 中`if(){}`，但它不是。 **每次**调用此代码都会`return false`. 不使用方括号适用于单个调用，但我不推荐它，因为当您添加其他代码时会导致此类问题。

*   在同一代码中，当它实际上是字段的值时，您将其`name`用作字段名称：

    ```
    alert("You must enter a " + name + " to submit! Thank you."); return false; 
    ```

    您真的想单独传递字段名称：

    ```
    function validateExistence(name, field) {
        if (name == null || name == ' ') {
            alert("You must enter a " + field + " to submit! Thank you."); 
            return false;
        } else if (name.length > 40)
            alert(field + "value is too long for our form, please abbreviate."); 
            return false;
        }
    } 
    ```

*   你没有打电话`radioCheck()`是因为你缺少括号：

    ```
    if (radioCheck == false) 
    ```

*   在`radioCheck()`中，您正在使用`||`而不是`&&`。因为根据定义，至少 1 将始终未选中，因此您将始终无法通过此检查：

    ```
    if (document.getElementById("yes").checked == false || document.getElementById("no").checked == false) return false; 
    ```

*   和更多...

我的建议是一次启用一项检查，对其进行测试，一旦它按预期工作，就继续进行下一项检查。尝试一次全部调试是非常困难的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T17:20:39.330

代替`var email = document.forms["forms"]["email"].value;`

经过

```
var email = document.forms["form"]["email"].value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-17T12:50:07.763

**尝试不同的逻辑**。您可以使用波纹管代码检查所有四 (4) 个条件以进行验证，例如非空、非空白、非未定义和非零仅在 javascript 和 jquery 中使用此代码 (!(!(variable)))。

```
function myFunction() {
var data;  //The Values can be like as null,blank,undefined,zero you can test

if(!(!(data)))
 {
 alert("data "+data);
 } 
 else 
 {
    alert("data is "+data);
}

} 
```**

# c++ - 这种模板编程技术的名称是什么，这是标准的 C++ 吗？

> ID：15977079
> 
> 赞同：1
> 
> 时间：2013-04-12T17:06:41.697
> 
> 标签：c++, templates

编写此代码的老板称其为默认模板参数，但我不确定它的名称。这看起来有点像偏特化，但语法更直观。它甚至是标准的 C++ 吗？

```
template<class T, bool auto_delete=true> class ArrayPtr : public  Array<T*> {
public:
    ArrayPtr(){}
    ~ArrayPtr(){Done();}

    bool    Done() { 
                if (auto_delete){
                    FOR(i, Array<T*>::GetSize()) delete (*this);
                }
                return Array<T*>::Done();}
} ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:09:53.913

除了其他问题，使用的`bool auto_delete=true`是标准 C++。

正式地，这被称为*默认模板参数*。从 C++11 **14.1 模板参数**：

> 9*默认模板参数*是在模板参数之后指定的模板*参数**(* 14.3) 。可以为不是模板参数包 (14.5.3) 的任何类型的*模板参数*（类型、非类型、模板）指定*默认模板参数。*`=`

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:27:37.430

代码是标准C++；有时声明一个默认模板参数很有用。例如，如果您定义一个类`Vector3D<T>`（在数学 3D 向量的意义上），默认`T`为`double`. 至于标准库`std::vector`模板，声明如下：

```
template < class T, class Alloc = allocator<T> > class vector; 
```

请注意类使用的分配器如何默认为特征类提供的特定分配器；我们大多数人通常只指定`class T`并让默认分配器处理底层数据结构。C++ 标准库中的大多数其他模板都使用一些默认参数进行了类似的定义。

这让我想到了你所说明的具体案例。除了其他样式问题，其目的似乎适用于类型特征：类型`T`可以具有`auto_delete_trait`如下声明的关联：

[实时代码示例](http://liveworkspace.org/code/1eZZ21%240)

```
#include<iostream>

template<typename T>
struct auto_delete_trait {
  static const bool value = true;
};

template<typename T>
struct myclass {
  void method(T val) {
    std::cout<<"value: "<<val<<std::endl;
    if(auto_delete_trait<T>::value) {
      std::cout<<"auto_delete enabled"<<std::endl;
    } else {
      std::cout<<"auto_delete disabled"<<std::endl;
    }
  }
};

// suppose that ints are not supposed to be auto-deleted (obviously
// this is an example; the concept of "auto-delete" does not make
// sense here)
template<> 
struct auto_delete_trait<int> {
  static const bool value = false;  
};

int main() {
  myclass<double> c1;
  myclass<int> c2;
  c1.method(1.234);
  c2.method(1);

  // expected output:
  // value: 1.234
  // auto_delete enabled
  // value: 1
  // auto_delete disabled

  return 0;
} 
```***

# ruby - 如何从 Ruby 中的 GData JSON 访问对象数组？

> ID：15977086
> 
> 赞同：1
> 
> 时间：2013-04-12T17:07:09.580
> 
> 标签：ruby, json, gdata, jekyll, liquid

我正在尝试编写一个 Jekyll 扩展，它将嵌入来自 Blogger 博客的评论。
我能够以 JSON 格式获取评论提要，并对其进行足够的处理以提取评论总数。但是，我还没有弄清楚如何处理提要中的每条评论。

```
json_url = "http://www.blogger.com/feeds/8505008/593465383646513269/comments/default/?alt=json"
json_rep = Net::HTTP.get_response(json_url)
json_rep = JSON.parse(json_rep.body)
json_rep['feed']['openSearch$totalResults']['$t'] # => "4"
json_rep['feed']['entry'].class # => Array

json_rep['feed']['entry'].length
# => Liquid Exception: undefined method `length' for nil:NilClass in post 
```

这是我第一次用 Ruby 编写任何代码。我究竟做错了什么？

[这是我试图解析](http://www.blogger.com/feeds/8505008/593465383646513269/comments/default/?alt=json)的 JSON 的相关部分。

```
{
  "feed": {
    "openSearch$totalResults": {
      "$t": "4"
    },
    "entry": [
      {
        "id": {
          "$t": "tag:blogger.com,1999:blog-8505008.post-491866073982779922"
        },
        "published": {
          "$t": "2013-01-08T15:23:47.322-04:00"
        },
        "content": {
          "type": "html",
          "$t": "Recently, my sister has updated it more than I have. \u00dcber-fail on my part. :p"
        }
      }
    ]
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:21:59.587

这是你应该做的事情：

```
require 'rubygems'
require 'json'
require 'net/http'
require 'net/https'
require 'uri'

url = "http://www.blogger.com/feeds/8505008/593465383646513269/comments/default/?alt=json"
uri = URI.parse(url)
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Get.new(uri.request_uri)
response = http.request(request)

json_rep = JSON.parse(response.body)

puts json_rep['feed']['openSearch$totalResults']['$t']

entries = json_rep['feed']['entry']
entries.each do |entry|
    puts entry["id"]["$t"]
    #add what ever code you like here
end 
```

这输出：

```
4
tag:blogger.com,1999:blog-8505008.post-491866073982779922
tag:blogger.com,1999:blog-8505008.post-4792479891671746788
tag:blogger.com,1999:blog-8505008.post-4766604955439002209
tag:blogger.com,1999:blog-8505008.post-5484003770204916000 
```

# arrays - 在 UIImageView 上播放动画 GIF 图像

> ID：15977088
> 
> 赞同：1
> 
> 时间：2013-04-12T17:07:11.927
> 
> 标签：arrays, uiimageview, animated-gif, xcode4.6

我一直在谷歌上寻找一种在 StoryBoard (iOS6) 的 UIImageView 中“播放”我的动画 gif 的方法，而不使用数组或其他东西。

真的没有其他方法可以查看我的 gif，然后用所有帧制作一个数组吗？如果有，请告诉我怎么做。

提前致谢

# android - 如何添加谷歌adsense？

> ID：15977089
> 
> 赞同：2
> 
> 时间：2013-04-12T17:07:12.283
> 
> 标签：android, adsense

我正在使用这段代码，它看起来很完美，没有任何错误 bt 不知道为什么每次运行我的应用程序时我的应用程序都会崩溃..

```
<com.google.ads.AdView
    android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId= "idthatigotthroughadmob"
    ads:loadAdOnCreate="true"
    ads:adSize="BANNER"
/> 
```

在 android manifest.xml 中

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

在

```
<application><activity
 android:name="com.google.ads.AdActivity"
 android:configChanges="keyboard|keyboardHidden|orientation"
 ></activity> </application> 
```

logcat 显示

```
04-12 21:30:09.655: E/dalvikvm(272): Could not find class 'com.google.ads.AdView', 
referenced from method com.project.hisaabkikitaab.MainActivity.onCreate
04-12 21:30:09.655: W/dalvikvm(272): VFY: unable to resolve check-cast 471 (Lcom/google
/ads/AdView;) in Lcom/project/hisaabkikitaab/MainActivity;
04-12 21:30:09.655: D/dalvikvm(272): VFY: replacing opcode 0x1f at 0x000e
04-12 21:30:09.655: D/dalvikvm(272): VFY: dead code 0x0010-02b9 in Lcom/project  
/hisaabkikitaab/MainActivity;.onCreate (Landroid/os/Bundle;)V
04-12 21:30:09.815: D/AndroidRuntime(272): Shutting down VM
04-12 21:30:09.815: W/dalvikvm(272): threadid=1: thread exiting with uncaught     
exception  (group=0x4001d800)
04-12 21:30:09.845: E/AndroidRuntime(272): FATAL EXCEPTION: main
04-12 21:30:09.845: E/AndroidRuntime(272): java.lang.NoClassDefFoundError:    
com.google.ads.AdView
04-12 21:30:09.845: E/AndroidRuntime(272):  at    
com.project.hisaabkikitaab.MainActivity.onCreate(MainActivity.java:42)
04-12 21:30:09.845: E/AndroidRuntime(272):  at   
.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:09:13.943

您还需要将`ads`命名空间添加到布局根节点

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

您可能从中获取示例的教程已经有了它：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
  <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="MY_AD_UNIT_ID"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                         ads:loadAdOnCreate="true"/>
</LinearLayout> 
```

来源：[https](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals) ://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals，Android标签

另一种可能的解决方案：

`libs`您的项目中有文件夹吗？如果有，有`admob`图书馆吗？如果您对其中任何一个说不，请确保`libs`创建了一个文件夹（在 and 的同一级别`res`，`src`并将您的库复制`admob`到那里。清理项目并重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-08T15:57:36.823

参考：

[https://developers.google.com/admob/android/banner](https://developers.google.com/admob/android/banner)

build.gradle（应用程序）

```
implementation 'com.google.android.gms:play-services-ads:20.1.0' 
```

AndroidManifest.xml

```
<application
    .....
   <meta-data
        android:name="com.google.android.gms.ads.APPLICATION_ID"
        android:value="ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy"/>
</application> 
```

activity_main.xml

```
<com.google.android.gms.ads.AdView
  xmlns:ads="http://schemas.android.com/apk/res-auto"
  android:id="@+id/adView"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_centerHorizontal="true"
  android:layout_alignParentBottom="true"
  ads:adSize="BANNER"
  ads:adUnitId="ca-app-pub-3940256099942544/6300978111">
</com.google.android.gms.ads.AdView> 
```

在 MainActivity

```
private AdView mAdView;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MobileAds.initialize(this, new OnInitializationCompleteListener() {
        @Override
        public void onInitializationComplete(InitializationStatus initializationStatus) {
        }
    });

    mAdView = findViewById(R.id.adView);
    AdRequest adRequest = new AdRequest.Builder().build();
    mAdView.loadAd(adRequest);

    mAdView.setAdListener(new AdListener() {

    @Override
    public void onAdLoaded() {

    }

    @Override
    public void onAdFailedToLoad(LoadAdError adError) {

    }

    @Override
    public void onAdOpened() {

    }

    @Override
    public void onAdClicked() {

    }

    @Override
    public void onAdClosed() {

    }
  });
} 
```

# ruby - 将推特搜索结果保存到 JSON 文件

> ID：15977090
> 
> 赞同：1
> 
> 时间：2013-04-12T17:07:12.713
> 
> 标签：ruby, twitter

我正在使用 twitter ruby​​ gem 来获取 twitter 搜索结果。Github 的示例代码从搜索结果中提取信息。我想知道如何将搜索结果（我认为是 JSON）保存到单独的 JSON 文件中。
以下是示例代码的一部分：

```
results = @search.perform("$aaa", 1000)
aFile = File.new("data.txt", "w")
results.map do |status|
myStr="#{status.from_user}: #{status.text}  #{status.created_at}"
aFile.write(myStr)
aFile.write("\n")
end 
```

有没有办法将所有搜索结果保存到单独的 JSON 文件中，而不是将字符串写入文件？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:45:42.630

如果你想保存到一个文件，你需要做的就是打开文件，写入它，然后关闭它：

```
File.open("myFileName.txt", "a") do |mFile|
    mFile.syswrite("Your content here")
    mFile.close
end 
```

使用时`open`，如果文件不存在，您将创建该文件。

需要注意的一件事是打开文件有不同的方法，这些方法将决定程序写入的位置。`"a"`表示它会将您写入文件的所有内容附加到当前内容的末尾。

以下是一些选项：

```
r   Read-only mode. The file pointer is placed at the beginning of the file. This is the default mode.
r+  Read-write mode. The file pointer will be at the beginning of the file.
w   Write-only mode. Overwrites the file if the file exists. If the file does not exist, creates a new file for writing.
w+  Read-write mode. Overwrites the existing file if the file exists. If the file does not exist, creates a new file for reading and writing.
a   Write-only mode. The file pointer is at the end of the file if the file exists. That is, the file is in the append mode. If the file does not exist, it creates a new file for writing.
a+  Read and write mode. The file pointer is at the end of the file if the file exists. The file opens in the append mode. If the file does not exist, it creates a new file for reading and writing. 
```

因此，在您的情况下，您需要提取要保存的数据，然后将其写入文件，如我所示。您还可以通过执行以下操作指定文件路径：

```
File.open("/the/path/to/yourfile/myFileName.txt", "a") do |mFile|
    mFile.syswrite("Your content here")
    mFile.close
end 
```

要注意的另一件事是它`open`不会创建目录，因此您需要自己创建目录，或者您可以使用您的程序来创建目录。这是一个有助于文件输入/输出的链接：

[http://www.tutorialspoint.com/ruby/ruby_input_output.htm](http://www.tutorialspoint.com/ruby/ruby_input_output.htm)

# vb.net - 在 VB (2012) 中使用文本框的内容作为变量

> ID：15977091
> 
> 赞同：0
> 
> 时间：2013-04-12T17:07:13.800
> 
> 标签：vb.net, variables, textbox

在下面的代码中，b 文本框将包含字符串“a.text”，我希望 b 文本框作为字符串“a.text”的内容的评估，即单词 Test。请不要建议： `b.text = a.text`

```
Public Class Form1

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim t As String
    a.Text = "Test"
    t = "a.text"
    b.Text = t
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:44:29.580

查看表单的控件集合。您可以根据其名称找到一个项目。

另请查看此答案 [VB .NET Access a class property by string value](https://stackoverflow.com/questions/4191076/vb-net-access-a-class-property-by-string-value)

因此，您可以获取您的字符串，用“.”分割它，使用控件集合找到控件，然后使用反射使用字符串的后半部分获取属性。

当然，如果你只是在寻找文本框的Text，你只需要使用集合而忘记反射。像这样..

```
 For i As Integer = 1 To 25
        .fields("Field" & i).value = Me.Controls("QAR" & i).Text
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:37:00.987

你可以做你要求使用[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)......我不是这样的东西的超级粉丝，但这是它在你的代码中的样子：

```
Imports System.Reflection

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        a.Text = "Hello"

        Dim t As String = "a.Text"

        b.Text = DirectCast(SetValue(t), String)
    End Sub

    Public Function SetValue(ByVal name As String) As Object

        Dim ctrl As Control = Me.Controls(name.Split("."c)(0))
        Return ctrl.GetType().GetProperty(name.Split("."c)(1)).GetValue(ctrl, Nothing)
    End Function
End Class 
```

这会将文本框 a 的值设置为“Hello”，然后使用反射方法将其复制到文本框 b。

希望这可以帮助！

# mysql - 印度铁路数据库错误连接车站之间的火车

> ID：15977094
> 
> 赞同：2
> 
> 时间：2013-04-12T17:07:19.650
> 
> 标签：mysql, database

我有火车、火车时刻表、火车号的mysql数据库。

现在我想查询斋浦尔到焦特布尔两个车站之间的火车，所以我这样查询

```
SELECT distinct d1.train_no
FROM   train_schedule d1
INNER JOIN train_schedule d2 ON d2.train_no=d1.train_no
WHERE d1.stn_code = 'JU' and d2.stn_code = 'JP' 
```

它给出了正确的结果，但它显示了焦特布尔到斋浦尔和斋浦尔到焦特布尔的火车，所以结果变成了火车的两倍。

我想查询仅从斋浦尔到焦特布尔的火车，而不是从焦特布尔到斋浦尔的火车。如果我选择日期，则必须从火车数据库中找到匹配的火车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:34:00.413

您不是在查询火车表，而是查询火车时刻表表，这意味着查询不会给您 2 列火车，而是给您 2 列火车时刻表。

我会从 trains 表中开始 SELECT ，如下所示：

```
SELECT trains.train_number, count(*) as "Number of schedules"
FROM trains
INNER JOIN train_schedule a USING (train_number) WHERE train_schedule.station_code = 'JU'
INNER JOIN train_schedule b USING (train_number) WHERE train_schedule.station_code = 'JP' 
```

（伪 MySQL 代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:46:26.613

确保您加入不同的记录：

```
 SELECT distinct d1.train_no
      FROM train_schedule d1
INNER JOIN train_schedule d2 ON (     d2.train_no =  d1.train_no
                                  AND d2.stn_code <> d1.stn_code )
     WHERE d1.stn_code = 'JU'
       AND d2.stn_code = 'JP'
         ; 
```

否则，您的结果集将填充不需要的身份匹配（代表从一个车站到其本身的虚构火车部分）。

# solr - 如果字段存在，则提高 solr3 相关性分数

> ID：15977100
> 
> 赞同：1
> 
> 时间：2013-04-12T17:07:41.730
> 
> 标签：solr

我是一个solr新手。如果存在字段，我的任务是提高 solr doc 的相关性分数。我们在 solr3.4 上。升级不是一种选择。我们使用 lucene 解析器，所以 dismax 不是一个选项。我的另一个选择是向 solr 索引添加一个字段，该字段指示该字段是否存在，然后提高存在字段的相关性。

还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-07T13:12:41.700

我会尝试以下语法：

```
email_address:*^2000000 
```

这会提升在“email_address”字段中具有任何值的所有文档。根据[Lucene 语法](https://lucene.apache.org/core/2_9_4/queryparsersyntax.html)文档，Lucene 支持冒号 ( **:** ) 和 boost ( **^** ) 运算符，所以这应该在那里工作。

# c - 位域中不可预测的答案

> ID：15977101
> 
> 赞同：2
> 
> 时间：2013-04-12T17:07:42.577
> 
> 标签：c

你能解释一下为什么这段代码的输出是 12 (1100b)

以及 sizeof(bit1) 是 4byte 的？

```
#include <stdio.h>
#include <stdlib.h>
struct bitfield
  {
   unsigned a:5;
   unsigned c:5;
   unsigned b:6;

  };

void main()
{

 char *p;
 struct bitfield bit1={1,3,3};  //a=00001 ,c=00011 ,b=000011
 p=&bit1;                           // p get the address of bit1
 p++;                               // incriment the address of p in 1

 printf("%d\n",*p); 

 printf("%d\n",sizeof(bit1));            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:14:44.283

您已将位字段声明为`unsigned`. 在大多数现代系统上，这是一个 32 位整数。（unsigned short 是 16、char 8、long 64 等）所以，您声明的是 32 位位域容器。每个单独的位域参数的大小由位域名称后面的整数给出，但它们所在容器的大小是指定数据类型的倍数……通常是指示的总位数的最小倍数适合——尽管单词边界和其他东西会起作用。

我很惊讶它的其余部分都可以正常工作。除了指针中的转换问题之外，printf 正在打印整个字段的前 8 位......一个单个字符。这不会在位字段本身上中断，而是在字节/字符内存边界上中断。根据您的系统是大端还是小端，它将是整个字段的 MSB 或 LSB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:37:17.740

指针`p`包含结构变量的地址`bit1`。

我相信您的系统**几乎没有字节序**寻址，因此变量`b`被放置在指针 p 指向的位置，并且 *p 打印`bit1`.

在你的情况下`b=3 (000011)`

但是这两个字节包含，

```
00000000 00001100  (12)
         ------
            ^
            |
         Value of b 
```

为了更好地理解这一点，

将 的值更改`b`为 5 (000101)，如下所示，

```
struct bitfield bit1={1,1,5}; 
```

那么你的输出将是 20 因为，

```
00000000 00010100  (20)
         ------
           ^
           |
        Value of b 
```

该结构将,和`bitfield`打包成一个无符号整数。无符号整数的大小为**4 字节**。`a``c``b`

# sql-server - SQL Server 连接

> ID：15977105
> 
> 赞同：0
> 
> 时间：2013-04-12T17:07:53.633
> 
> 标签：sql-server, excel, database-connection

我们有一个 Excel 文件，它从 SQL Server DB 中检索信息。

这是代码片段：

```
 Provider=SQLOLEDB.1;Persist Security Info=True;User ID=mjone;Initial  Catalog=pff_db;Data Source=.... 
```

我的问题是，对于 mjone，他如何能够连接到 SQL Server 数据库？我正在查看 SQL Server Management Studio，但没有看到使用任何 mjone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:25:42.010

检查这些：

```
 Check the users under `pff_db`
 Check global SQL Server Users
 Check if that user exists in the server (Windows) 
```

# azure - 增加共享 Azure 网站（单实例）上经典 ASP 页面的会话超时

> ID：15977111
> 
> 赞同：1
> 
> 时间：2013-04-12T17:07:59.580
> 
> 标签：azure, asp-classic, azure-web-app-service

*   我们已将经典的 asp 网站迁移到 Azure 网站（共享模式单实例）。
*   我们注意到用户会话在 20 分钟内超时，并且以编程方式设置 session.timeout = 120 不起作用。

*   任何其他可能有助于共享 Azure 网站上的经典 asp 页面的设置？

*   我也尝试在 web.config (sessionState timeout="120") 中设置会话超时，但对于经典的 asp 页面没有任何运气。任何帮助表示赞赏。谢谢你。

     `````
    <system.web>
     <sessionState timeout="120"/> 
    </system.web> 
    ````` 

 ``* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:29:35.640

The web.config setting only affects ASP.NET. For Classic ASP you can globally set the timeout in the global.asa file, like this:

```
<script language="VBScript" runat="Server">
    Sub Session_OnStart
        Session.Timeout = 120
    End Sub
</script> 
`````

# c# - 如何查找DetailsView中的哪个页面包含选定的GridView行

> ID：15977112
> 
> 赞同：2
> 
> 时间：2013-04-12T17:08:01.187
> 
> 标签：c#, asp.net, gridview, detailsview

我正在设置`HealthMonitoring`，我正在写几页来管理事件日志。

我有一页有一个`GridView`，另一个有一个`DetailsView`。每一行`GridView`都有一个带有 onClick 事件的模板按钮，该事件加载第二个页面`DetailsView`。

我想做的是；当我单击它上的模板按钮时`GridView`，然后加载第二页`DetailsView`并将该特定记录从表中`GridView`插入`DetailsView`。

`DetailsView`必须启用分页。我被困在试图找出要从`GridView`. 目前它只会加载第一页索引，然后我必须点击我需要的记录旁边。

如果不启用分页，我可以读取我的 2 个全局变量，然后将正确的记录加载到`DetailsView`表中，但是启用分页后我不知道该怎么做。

在`GridView`页面上：

```
protected void Details1_ButtonClick(object sender, EventArgs e)
{
    //I set 2 global variables here of the selected EventId and 
    //Details to read when the next page loads
    Response.Redirect("ErrorDetails.aspx");
} 
```

在`DetailsView`页面上。

```
protected void Page_Load(object sender, EventArgs e)
{
    //without paging I can set the SqlDataSource1.SelectCommand to select 
    //the correct record using one of the global variables
} 
```

我尝试使用`DetailsView1_PageIndexChanged`,`DetailsView1_Load`并`Page_Load`获取第一行中的值，但由于某种原因，它总是落后一页。该变量在加载时始终显示上一页的 ID。我打算尝试跟踪删除记录的页面，但它也不起作用。

这是 ErrorDetails.aspx 中的 DataSource 和 DetailsView：

```
<asp:SqlDataSource 
    ID="SqlDataSource1" 
    runat="server" 
    ConnectionString="<%$ ConnectionStrings:DefaultConnection %>" 
    ProviderName="<%$ ConnectionStrings:DefaultConnection.ProviderName %>">
    <DeleteParameters>
        <asp:Parameter Name="EventId" />
    </DeleteParameters>
</asp:SqlDataSource>

<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" DataSourceID="SqlDataSource1" DataKeyNames="EventId" AutoGenerateRows="False" OnItemDeleted="DetailsView1_ItemDeleted" OnItemDeleting="DetailsView1_ItemDeleting" AllowPaging="True" OnLoad="DetailsView1_Load" OnPageIndexChanged="DetailsView1_PageIndexChanged" OnPageIndexChanging="DetailsView1_PageIndexChanging">
    <AlternatingRowStyle CssClass="alt" />
    <Fields>

        <asp:CommandField ShowDeleteButton="True" />

        <asp:BoundField DataField="EventId" HeaderText="EventId" />
        <asp:BoundField DataField="EventTimeUtc" HeaderText="EventTimeUtc" />
        <asp:BoundField DataField="EventTime" HeaderText="EventTime" />
        <asp:BoundField DataField="EventType" HeaderText="EventType" />
        <asp:BoundField DataField="EventSequence" HeaderText="EventSequence" />
        <asp:BoundField DataField="EventOccurrence" HeaderText="EventOccurrence" />
        <asp:BoundField DataField="EventCode" HeaderText="EventCode" />
        <asp:BoundField DataField="EventDetailCode" HeaderText="EventDetailCode" />
        <asp:BoundField DataField="Message" HeaderText="Message" />
        <asp:BoundField DataField="ApplicationPath" HeaderText="ApplicationPath" />
        <asp:BoundField DataField="ApplicationVirtualPath" HeaderText="ApplicationVirtualPath" />
        <asp:BoundField DataField="MachineName" HeaderText="MachineName" />
        <asp:BoundField DataField="RequestUrl" HeaderText="RequestUrl" />
        <asp:BoundField DataField="ExceptionType" HeaderText="ExceptionType" />

        <asp:TemplateField HeaderText="Details">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server">
                    <%= EventVariables.EventDetails %>
                </asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:CommandField ShowDeleteButton="True" />

    </Fields>
    <PagerSettings Mode="NextPreviousFirstLast" />
    <PagerStyle CssClass="pager" />
</asp:DetailsView> 
```

这是父窗体中的 DataSource 和 GirdView：

```
<asp:GridView 
        ID="ErrorGrid" 
        runat="server" 
        AutoGenerateColumns="False" 
        DataSourceID="SqlDataSource1"  
        DataKeyNames="EventId"
        OnRowDeleting="ErrorGrid_RowDeleting" 
        AllowPaging="True" 
        AllowSorting="True" 
        Font-Size="Small" 
        CellPadding="10" 
        CellSpacing="1" >
        <Columns>
            <asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Delete" OnClientClick="return confirm('Are you sure you want to delete this record?');" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:LinkButton ID="Details1" Text="Details" runat="server" AutoPostBack="true" OnClick="Details1_ButtonClick" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="EventId" HeaderText="EventId" SortExpression="EventId" />
            <asp:BoundField DataField="EventTime" HeaderText="EventTime" SortExpression="EventTime" />
            <asp:BoundField DataField="RequestUrl" HeaderText="RequestUrl" SortExpression="RequestUrl" />
            <asp:BoundField DataField="ExceptionType" HeaderText="ExceptionType" SortExpression="ExceptionType" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource 
        ID="SqlDataSource1" 
        runat="server" 
        ConnectionString="<%$ ConnectionStrings:DefaultConnection %>" 
        SelectCommand="SELECT * FROM [aspnet_WebEvent_Events]" 
        DeleteCommand="DELETE FROM [aspnet_WebEvent_Events] WHERE [EventId]=@EventId">
        <DeleteParameters>
            <asp:Parameter Name="EventId" />
        </DeleteParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:58:08.650

我设法通过计算解决了这个问题。由于每页有 10 行，因此`GridView`我可以通过执行以下操作来计算页面：

```
EventVariables.EventPage = ((((ErrorGrid.PageIndex + 1) * 10) - 10) + Row.RowIndex); 
```

然后在加载`DetailsView`时从变量中加载页面。

# javascript - 如果窗口小于 ()，则更改 CSS 类

> ID：15977118
> 
> 赞同：1
> 
> 时间：2013-04-12T17:08:11.017
> 
> 标签：javascript, css

在浏览器窗口小于 600 像素时如何更改 CSS 类的属性。默认属性如下：

```
.side { height:400px; width:700px; } 
```

我想将其更改为：

```
.side { height:300px; width:550px; } 
```

当窗口高度小于 600px 时。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T17:08:53.757

它称为媒体查询：

```
@media all and (max-height: 600px) {
    .side { height:300px; width:550px; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:47:32.780

你可以试试：

```
(function($) {

    var $sides = $('.side');

    var setCss = function() {
        if($(window).height() > 600) {
            $sides.css('width', 400).css('height', 700);
        } else {
            $sides.css('width', 300).css('height', 550);
        }
    };

    $(document).ready(function() {
        setCss();
        $(window).resize(setCss);
    );

})(jQuery); 
```

# php - 如何将 Flash 制作的注册表单连接到 phpMyAdmin？

> ID：15977123
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:08:24.867
> 
> 标签：php, actionscript-3, phpmyadmin, flash-cs4

我使用 Flash 制作了这个简单的注册表单，我希望它使用 PHP 连接到我的本地主机中的数据库，这是我到目前为止的代码，

```
function register(evt:MouseEvent):void{
    var jpa:URLVariables = new URLVariables;
    var varRequest:URLRequest = new URLRequest("register.php");

    varRequest.method = URLRequestMethod.POST;
    varRequest.data = jpa;
    var varLoader:URLLoader = new URLLoader();
    varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
    varLoader.addEventListener(Event.COMPLETE, completeHandler);

    jpa.fname = form.fname.text;
    jpa.lname = form.lname.text;
    jpa.uname = form.uname.text;
    jpa.pass = form.pass.text;
    jpa.age = form.age.text;
    jpa.sendRequestReg = "successReg";

    varLoader.load(varRequest);

    function completeHandler(event:Event):void{
        form.msg.text = event.target.data.myVarPHP;
    }
} 
```

这是我的php文件代码

```
<?php
if($_POST['sendRequestReg'] == "successReg"){
    $server = "localhost";
    $username = "root";
    $pass = "";
    $dbname = "flashdb";

    $d1 = $_POST['fname'];
    $d2 = $_POST['lname'];
    $d3 = $_POST['uname'];
    $d4 = $_POST['pass'];
    $d5 = $_POST['age'];

    mysql_connect($server,$username,$pass);
    mysql_select_db($dbname);

    $myQuery = "INSERT INTO users VALUES('$d1', '$d2', '$d3', '$d4', '$d5')";
    mysql_query($myQuery) or die (mysql_error(). "AN ERROR");

    echo "myVarPHP=Registration Successful";
}
else{
    echo "myVarPHP=Failed Try Again";
}
?> 
```

当我单击*注册*按钮时，数据不会插入到数据库中。

顺便说一句，我有一个使用相同代码的更简单示例，并且运行良好。数据被插入到数据库中，但它是在 CS6 中制作的；此代码是在 CS4 中制作的。

我不知道是什么问题，PHP文件和Flash都没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:23:21.740

确保您的（`XAMP`或`WAMP`？）正在运行并测试此设置，将您粘贴`register.php`到 htdocs 文件夹（我使用 XAMP）并更改`URLRequest`类似内容，

```
var varRequest:URLRequest = new URLRequest("http://localhost/register.php"); 
```

这对我有用（使用`XAMP`）。

好运。

# android - Android android.widget.ImageView setCropToPadding() 绕过

> ID：15977125
> 
> 赞同：0
> 
> 时间：2013-04-12T17:08:35.493
> 
> 标签：android, android-widget, android-imageview, android-gridview

`setCropToPadding() NoSuchMethodError`在版本 < 4.1 上运行我的应用程序时出现此错误。如何将cropToPadding 设置为加载到没有ImageView XML 的GridView 单元格的图像？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:22:12.060

发现[这](https://gist.github.com/mrmans0n/2924241)是我的问题的最佳答案......现在。复制并粘贴过来，它很简单！

```
try {
    Field field = ImageView.class.getDeclaredField("mCropToPadding");
    field.setAccessible(true);
    field.set(imageView, true);
} catch (Exception e) {
    e.printStackTrace();
} 
```

参考： [https ://gist.github.com/mrmans0n/2924241](https://gist.github.com/mrmans0n/2924241)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:16:04.993

`setCropToPadding()`在 API 级别 16 (JellyBean) 中引入。看右上角：[https://developer.android.com/reference/android/widget/ImageView.html#setCropToPadding(boolean)](https://developer.android.com/reference/android/widget/ImageView.html#setCropToPadding(boolean))

# sql - 选择与列表中的所有项目匹配的行组

> ID：15977126
> 
> 赞同：48
> 
> 时间：2013-04-12T17:08:37.730
> 
> 标签：sql, sql-server, tsql, relational-division

假设我有两张桌子：

`cars`– 汽车清单

```
carname | modelnumber | ... 
```

`passedtest`– 包含汽车通过的所有测试：

```
id | carname | testtype | date | ...
1  | carA    | A        | 2000 |
2  | carB    | C        | 2000 |
3  | carC    | D        | 2001 |
4  | carA    | C        | 2002 | 
```

现在，我如何从`passedtest`通过所有测试（A、B、C、D）的表中选择一辆汽车？

我尝试了该`IN`声明，但它也与通过一项测试的汽车相匹配。我正在寻找一个语句来匹配列表中所有行的*所有值。*

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-12T17:11:19.660

这个怎么样？

```
SELECT carname
FROM PassedTest
GROUP BY carname
HAVING COUNT(DISTINCT testtype) = 4 
```

您还可以将其用作从表中获取信息的内部语句`cars`：

```
SELECT *
FROM cars
WHERE carname IN (
    SELECT carname
    FROM PassedTest
    GROUP BY carname
    HAVING COUNT(DISTINCT testtype) = 4
) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-12T17:11:28.407

这种类型的问题称为`Relational Division`。

```
SELECT  a.*
FROM    Cars a
        INNER JOIN
        (
            SELECT  CarName
            FROM    PassedTest 
            WHERE   testType IN ('A', 'B', 'C', 'D')
            GROUP   BY CarName
            HAVING  COUNT(*) = 4
        ) b ON a.CarName = b.CarName 
```

如果没有对每个表`UNIQUE`强制执行约束，则需要关键字，因此它只会计算唯一值。`TestType``CarName``PassedTest``DISTINCT``COUNT()`

```
SELECT  a.*
FROM    Cars a
        INNER JOIN
        (
            SELECT  CarName
            FROM    PassedTest 
            WHERE   testType IN ('A', 'B', 'C', 'D')
            GROUP   BY CarName
            HAVING  COUNT(DISTINCT TestType) = 4
        ) b ON a.CarName = b.CarName 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

但如果您只对表格感兴趣，`CARNAME`则无需加入表格。在表上查询`PassedTest`将满足您的需求。

```
SELECT  CarName
FROM    PassedTest 
WHERE   testType IN ('A', 'B', 'C', 'D')
GROUP   BY CarName
HAVING  COUNT(*) = 4 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-10T11:49:59.713

您想要执行关系除法，这是一种在 SQL 中未实现的操作。这是一个示例，其中我们有一个**product-supplier**表和一个**required-products**表：

```
CREATE TABLE product_supplier (
    product_id int NOT NULL,
    supplier_id int NOT NULL,
    UNIQUE (product_id, supplier_id)
);
INSERT INTO product_supplier (product_id, supplier_id) VALUES
(1, 1),
(2, 1),
(3, 1),
(1, 2),
(2, 2),
(3, 2),
(4, 2),
(2, 3),
(3, 3),
(4, 3);

CREATE TABLE reqd (
    product_id int NOT NULL,
    UNIQUE (product_id)
);
INSERT INTO reqd (product_id) VALUES
(1),
(2),
(3); 
```

......我们希望找到所有供应商提供所有必需的产品，也许还有其他产品。上述示例中的结果将是供应商 1 和 2。

最直接的解决方案是：

```
SELECT product_supplier.supplier_id
FROM product_supplier
LEFT JOIN reqd ON product_supplier.product_id = reqd.product_id
GROUP BY product_supplier.supplier_id
HAVING COUNT(reqd.product_id) = (SELECT COUNT(*) FROM reqd); 
```

```
+-------------+
| supplier_id |
+-------------+
|           1 |
|           2 |
+-------------+ 
```

如果我们想找到所有供应商提供所有需要的产品而没有其他供应商（精确除法/没有余数），那么在上面再添加一个条件：

```
SELECT product_supplier.supplier_id
FROM product_supplier
LEFT JOIN reqd ON product_supplier.product_id = reqd.product_id
GROUP BY product_supplier.supplier_id
HAVING COUNT(reqd.product_id) = (SELECT COUNT(*) FROM reqd)
AND COUNT(product_supplier.product_id) = (SELECT COUNT(*) FROM reqd); 
```

```
+-------------+
| supplier_id |
+-------------+
|           1 |
+-------------+ 
```

另一种解决方案是重新表述问题：选择供应商提供的产品中不存在所需产品的供应商。嗯：

```
SELECT DISTINCT supplier_id
FROM product_supplier AS ps1
WHERE NOT EXISTS (
    SELECT *
    FROM reqd
    WHERE NOT EXISTS (
        SELECT *
        FROM product_supplier AS ps2
        WHERE ps1.supplier_id = ps2.supplier_id AND ps2.product_id = reqd.product_id
    )
); 
```

```
+-------------+
| supplier_id |
+-------------+
|           1 |
|           2 |
+-------------+ 
```

# python - 如何创建字典值列表？

> ID：15977128
> 
> 赞同：-2
> 
> 时间：2013-04-12T17:08:41.567
> 
> 标签：python, dictionary

我将如何制作字典的值列表？例如，如果我有

```
{1:Apple,2:Red,3:Purple,4:Green} 
```

我将如何收到一份清单

```
['Apple','Red','Purple','Green'] 
```

在 python 上鬼混一个小时后，我似乎仍然无法弄清楚。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:09:38.313

查字典[`.values()`](http://docs.python.org/2/library/stdtypes.html#dict.values)。

在 Python 3 中，这将返回一个[dict view](http://docs.python.org/3/library/stdtypes.html#dict-views)，所以调用`list()`它。

蟒蛇2：

```
>>> d = {1:'Apple', 2:'Red', 3:'Purple', 4:'Green'}
>>> d.values()
['Apple', 'Red', 'Purple', 'Green'] 
```

蟒蛇 3：

```
>>> d = {1:'Apple', 2:'Red', 3:'Purple', 4:'Green'}
>>> d.values()
dict_values(['Apple', 'Red', 'Purple', 'Green'])
>>> list(d.values())
['Apple', 'Red', 'Purple', 'Green'] 
```

# shell - 使用 zsh 的内置寻呼机而不是 less

> ID：15977131
> 
> 赞同：1
> 
> 时间：2013-04-12T17:08:51.477
> 
> 标签：shell, unix, zsh, less-unix

假设我有一个巨大的命令

```
echo "start string `complexcommand -with -many args | cut -d ' ' -moreargs | sed 's/you/get/g' | grep -v "the idea" | xargs echo` ending string" | program | less -S 
```

它产生数百行数千个字符的输出。

`less`可以很好地处理垂直滚动，因为它大部分时间都在使用它，但是左右滚动非常耗费 CPU，`top`而且我不知道有任何“page-left”或“page-right”样式的命令走得更快。

所以我希望像 zsh 的内置寻呼机这样的东西可以更快地处理这个任务，但是我很难弄清楚使用它的命令。它需要一个文件输入。有没有办法让 oneliner 使用寻呼机，而不必先将其转储到文件中？

或者，如果有人对更好的编辑器有建议。接下来我可能会尝试使用 vim。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:56:31.983

如果要调用 zsh 的寻呼机，请使用`some-complex-pipeline | zsh -c '< /dev/fd/0'`. /dev/fd/0 文件是代表当前进程的标准输入流的设备。

# python - 运行 os.path 的 Python 目录

> ID：15977133
> 
> 赞同：0
> 
> 时间：2013-04-12T17:08:59.387
> 
> 标签：python, if-statement, for-loop, path, directory

我尝试创建一个可以递归遍历多个目录并以分层方式打印文件列表的程序，例如：

```
Folder
----x.c
----x.bin
----Folder
---------x.c 
```

我尝试使用（带有文件/文件夹详细信息）之类的程序：

```
#!/usr/bin/python

import os
for item in os.listdir(".") :
        if os.path.isdir(item) :
                print "-" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        elif os.path.isfile(item) :
                print item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print "Nothing \n" 
```

但我不能进入我尝试使用的任何目录（A 是这里的目录）：

```
#!/usr/bin/python

import os
for item in os.listdir(".") :
        if os.path.isdir(item) :
                print "-" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        elif os.path.isfile(item):
                print item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print "Nothing"

for item in os.listdir("A") :
        if os.path.isdir("A") :
                print "-" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)

        elif os.path.isfile("A") :
                print "--" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print "Nothing" 
```

清单是错误的，我不明白为什么我不能从 . 到 A 以及如何做。最糟糕的是，如果我继续 B（这里的第二个文件夹）：

```
#!/usr/bin/python

import os
for item in os.listdir(".") :
        if os.path.isdir(item) :
                print "-" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        elif os.path.isfile(item):
                print item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print "dunno"

for item in os.listdir("A") :
        if os.path.isdir("A") :
                print "-" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)

        elif os.path.isfile("A") :
                print "--" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print "lulz"

for item in os.listdir("A/B") :
        if os.path.isfile("A/B") :
                print "---" + item + '\t' + str(os.stat(item).st_size) + "kb" + '\t' + str(os.stat(item).st_atime)
        else :
                print 'Nothing' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:15:40.653

我想你想用`os.walk`

```
for (cur, dirs, files) in os.walk('.'):
    pass 
```

这将为您提供当前目录、当前目录中的目录列表和当前目录中的文件列表。

我想你想要类似的东西

```
for (cur, dirs, files) in os.walk('.'):
    depth = len(cur.split('/'))
    print "--" * depth, cur
    for fname in files:
        print "--" * (depth + 1), fname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:25:59.743

从这个答案中借了一点：[List directory tree structure using Python](https://stackoverflow.com/a/9728478/64203)

```
import os

def list_files(path, spaceChar=' ', spaceWidth=4):
    for root, dirs, files in os.walk(path):
        level = root.replace(path, '').count(os.sep)
        indent = spaceChar * (spaceWidth * level)
        print('{}{}/'.format(indent, os.path.basename(root)))
        subindent = spaceChar * spaceWidth * (level + 1)
        for f in files:
            print('{}{}'.format(subindent, f))

list_files(".", "-", 3) 
```

# ios - iOS6 中的社交分享调色板

> ID：15977134
> 
> 赞同：0
> 
> 时间：2013-04-12T17:09:07.417
> 
> 标签：ios, cocoa-touch

我注意到在 iOS6 中，当您在照片库中选择一张照片并按下“方形按钮中的箭头”时，它会弹出一个带有图标的调色板，使用户能够共享照片（即邮件、消息、照片流、推特、脸书等）。我想知道，iOS6 中有没有内置这样的调色板的库？（我知道有`SLComposeViewController`和`MFMailComposeViewController`）。如果没有，如果您构建的调色板与他们拥有的调色板相同（相同的图标等），Apple 会有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:18:25.610

这是一个`UIActivityViewController`.

# java - 如何将一个字节附加到Java中的字符串？

> ID：15977137
> 
> 赞同：2
> 
> 时间：2013-04-12T17:09:13.527
> 
> 标签：java, string, hex, byte

我有这个操作需要执行，我需要将一个字节（如 0x10）附加到 Java 中的某个字符串。我想知道我该怎么做呢？

例如：

```
String someString = "HELLO WORLD";
byte someByte = 0x10; 
```

在此示例中，我将如何将 someByte 附加到 someString？

我问这个问题的原因是因为我正在开发的应用程序应该向某个服务器发送命令。服务器能够接受命令（base64 编码），对命令进行解码，并解析出这些不一定与任何类型的 ASCII 编码标准兼容的字节，以执行某些特殊功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:18:06.343

如果要将 a 的实际值连接`byte`到 a`String`使用`Byte`包装器及其`toString()`方法，如下所示：

```
String someString = "STRING";
byte someByte = 0x10;
someString += Byte.toString(someByte); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:12:28.630

如果您想将字节的字符串表示为 ascii char，请尝试以下操作：

```
public static void main(String[] args) {
    String a = "bla";

    byte x = 0x21; // Ascii code for '!'

    a += (char)x;

    System.out.println(a); // Will print out 'bla!'
} 
```

如果您想将字节值转换为字符串的十六进制表示形式，请查看[Integer.toHexString](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toHexString%28int%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T17:21:23.280

如果你只是想扩展一个字符串文字，那么使用这个：

```
System.out.println("Hello World\u0010"); 
```

除此以外：

```
String s1 = "Hello World";
String s2 = s1 + '\u0010'; 
```

并且没有 - 字符不是字节，反之亦然。但是这里的近似值已经足够接近了:-)

# c# - 在linq查询中合并不同类型的列值

> ID：15977141
> 
> 赞同：1
> 
> 时间：2013-04-12T17:09:25.220
> 
> 标签：c#, casting, linq-to-entities

这是我如何返回合并两个字符串列的结果：

```
 context.DBSET.Select(e => e.STRING_PROPERTY + e.STRING_PROPERTY)... 
```

如何将 e.STRING_PROPERTY + e.INTEGER_PROPERTY 合并到一个字符串结果中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:13:51.977

您必须使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd487127.aspx)将其转换为字符串：

```
var results = context.DBSET
                     .Select(e => e.STRING_PROPERTY + SqlFunctions.StringConvert((double)e.INTEGER_PROPERTY)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:24:56.693

Linq to Entities 和 Linq to Sql 在幕后支持几个 C# 成员。其中包括 String.ToString() 和 DateTime.Now。你可以写：

```
 context.DBSET.Select(e => e.STRING_PROPERTY + e.INTEGER_PROPERY.ToString())... 
```

正如@Reed 指出的那样，SqlFunctions 也可以工作，并且会提供一组更通用但可读性较差的操作，可以在您的查询中执行。

# iphone - 删除 UITableViewCells 之间的间距

> ID：15977149
> 
> 赞同：3
> 
> 时间：2013-04-12T17:09:54.297
> 
> 标签：iphone, ios, objective-c, uitableview

我在同一部分中有 UITableViewCells，它们之间有差距。我为每个单元格的 contentView 背景着色并做了一个 NSLog 以显示它与单元格的高度相同。

不过，他们之间还是有差距的。他们肯定在同一个部分。关于什么可能导致差距的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:27:27.423

我不确定你是否使用过这个：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 78;
} 
```

并检查了 IB 中的 Cell 确实是 78（只是为了争论）。然后使用：

```
tableView.sectionHeaderHeight = 0.0; 
```

并设置tableView的样式：

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

多年来我遇到的最后一个解决方案是，有时出于某种原因，您需要使用像素扩展背景图像。我认为这根本不是一个好的解决方案，因为它并没有真正解决真正的问题，而是在上面贴了一个蹩脚的创可贴。

```
cellFrameBackground.size.height += 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:15:02.290

您是否尝试将分隔符样式设置为无？

```
tableview.separatorType = UITableViewCellSeparatorStyleNone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:15:16.333

如果您谈论的是 1 个像素的间隙，那就是单元分隔符。您可以通过在表格视图上设置属性来删除它：

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

如果您想更改该分隔符的颜色，请使用该`separatorColor`属性。

* * *

如果您在谈论大于 1 像素的间隙，您可以发布屏幕截图和您的单元格代码吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T11:37:52.193

要添加一组出色的答案，有时您只需要扩展 Leeloo 提到的背景高度：

```
cellFrameBackground.size.height += 1; 
```

然后，使您的单元格剪辑到边界：

```
cell.clipsToBounds = YES; 
```

而且，瞧。

# xml - 如何从 XSD 中提取命名空间？

> ID：15977150
> 
> 赞同：0
> 
> 时间：2013-04-12T17:09:56.807
> 
> 标签：xml, groovy, xsd

我有一个 XSD，我想用它来将我的域对象序列化为 XML。我正在使用 StreamingMarkupBuilder 生成 XML，但我希望能够从 XSD 中提取命名空间以用于构建 XML。我见过的大多数示例要么不使用 XSD，从 XSD 创建 JAXB 类，要么只使用 XSD 进行验证。我认为有一种 Groovy 方法来处理 XSD 以提取名称空间信息以创建 XML，但我还没有找到它。有任何想法吗？

```
def xmlBuilder = new StreamingMarkupBuilder()
def xmlString = xmlBuilder.bind {
  mkp.declareNamespace(ns: extractedFromXSD)
  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:33:36.777

我猜您正在使用`XmlParser`从您的 XSD 获取信息。要获取命名空间，您无需验证即可实例化`XmlParser` [namespace-awareness](http://prystash.blogspot.com.br/2009/09/groovy-xml-retrieve-namespace-of-nested.html) : `new XmlParser(false, false)`。

我使用了 w3schools 的剥离[xsd 示例](http://www.w3schools.com/schema/schema_example.asp)：

```
xml = '''<?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="shiporder">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="orderperson" type="xs:string"/>
            </xs:sequence>
            <xs:attribute name="orderid" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element>
</xs:schema>'''

xsd = new XmlParser(false, false).parseText xml

assert xsd.'@xmlns:xs' == 'http://www.w3.org/2001/XMLSchema' 
```

# ajax - 在 Chrome 打包应用程序中通过 XHR 加载本地内容

> ID：15977151
> 
> 赞同：5
> 
> 时间：2013-04-12T17:10:00.627
> 
> 标签：ajax, google-chrome, xmlhttprequest, google-chrome-app

我正在尝试加载使用 Backbone 构建的 Web 应用程序，它会提取本地存储的 JSON 和 HTML 模板文件。我想知道 Chrome 打包应用程序是否可以通过使用某种“get”/ajax 请求来加载这些文件？

目前我得到这个...

```
OPTIONS chrome-extension://fibpcbellfjkmapljkjdlpgencmekhco/templates/templates.html Cannot make any requests from null. jquery.min.js:2
XMLHttpRequest cannot load chrome-extension://fibpcbellfjkmapljkjdlpgencmekhco/templates/templates.html. Cannot make any requests from null. 
```

我找不到任何关于如何做到这一点的真实信息，所以任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T03:31:52.633

是的，这是完全可能的，而且很容易。这是一个工作示例。尝试从这个开始，确认它有效，然后添加回您自己的代码。如果您遇到障碍并提出一个比 XHR 是否适用于打包应用程序更具体的问题，您可能想问一个新问题。

清单.json：

```
{
  "name": "SO 15977151 for EggCup",
  "description": "Demonstrates local XHR",
  "manifest_version" : 2,
  "version" : "0.1",
  "app" : {
    "background" : {
      "scripts" : ["background.js"]
    }
  },
  "permissions" : []
} 
```

背景.js：

```
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create("window.html",
    { bounds: { width: 600, height: 400 }});
}); 
```

窗口.html：

```
<html>
<body>
  <div>The content is "<span id="content"/>"</div>
  <script src="main.js"></script>
</body>
</html> 
```

主.js：

```
function requestListener() {
  document.querySelector("#content").innerHTML = this.responseText;
};

onload = function() {
  var request = new XMLHttpRequest();
  request.onload = requestListener;
  request.open("GET", "content.txt", true);
  request.send();
}; 
```

内容.txt：

```
Hello, world! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-08T05:10:00.227

您正在从沙盒页面发出请求，而沙盒页面的来源为空。

~~我已经在 Google Group 上发布了这个[问题。](https://groups.google.com/a/chromium.org/d/topic/chromium-apps/L4wGujO4F-0/discussion)~~

~~除非 Chrome 决定更改沙盒策略，否则似乎唯一的解决方法是从非沙盒页面发出 XHR 请求，并使用 Chrome 的消息传递 API 将其提供给您的沙盒页面。~~

我不知道为什么它必须如此困难。

编辑：

Chrome 团队的[回答](https://groups.google.com/a/chromium.org/forum/#!searchin/chromium-apps/xhr%2420sandbox/chromium-apps/ORNkwvYlSsY/e3-R3LUZA9oJ)是将 CORS 标头更改为 *.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:39:18.367

我相信您的问题出在服务器端，而不是客户端。服务器需要为 jQuery 发送以下标头来处理响应：

```
Access-Control-Allow-Origin: * 
```

然而，问题在于任何页面现在都可以加载该内容。知道扩展程序的 ID 后，您可以将该标头更改为：

```
Access-Control-Allow-Origin: chrome-extension://gmelhokjkebpmoejhcelmnopijabmobf/ 
```

对以下内容的简短测试表明这些是有效的：

```
<h1>Content Below</h1>
<div id="loadme"></div>
<script src="jquery-1.9.1.min.js"></script>
<script src="app.js"></script>

// app.js
$(document).ready(function() {
  $.get('http://localhost:8080/content.php', function(data) {
    $('#loadme').html(data);
  });
}); 
```

如果我没有添加`Access-Control-Allow-Origin`标题，这将失败并显示以下消息：

```
XMLHttpRequest cannot load http://localhost:8080/newhope/deleteme.php.
Origin chrome-extension://gmelhokjkebpmoejhcelgkfeijabmobf is not allowed by
Access-Control-Allow-Origin. 
```

一旦我`Access-Control-Allow-Origin`在 php 响应中添加了标头，它就可以正常工作了。

同样，将其设置为`*`可能存在安全风险，因为任何地方的任何浏览器页面都允许内联加载它。

# php - 根据字母顺序在html表格中的两种颜色之间交替

> ID：15977152
> 
> 赞同：0
> 
> 时间：2013-04-12T17:10:07.260
> 
> 标签：php, jquery, mysql

我有一个从 mysql 生成的表，它显示如下数据：
LastNam - Hrs - Total
Anderson - 33 - 1,000
Anderson - 30 - 2,000
Anderson - 23 - 1,000
Ballestero - 12 - 3,000
Ballestero - 05 - 2,000
Castrinsky - 38 - 8,000
Castrinsky - 96 - 6,000

我想通过为所有安德森设置背景颜色来格式化这些行，为巴列斯特罗设置背景颜色，然后为卡斯特林斯基设置相同的背景颜色。

喜欢：
LastNam - Hrs - Total
**Anderson - 33 - 1,000
Anderson - 30 - 2,000
Anderson - 23 - 1,000** Ballestero - 12 - 3,000
Ballestero - 05 - 2,000
**Castrinsky - 38 - 8,000
Castrinsky - 96 - 6,000** 

与大多数 jquery 表插件或 css 上的备用行非常相似，但不是每隔一行，而是每次上一行与当前行不同时都需要。我曾尝试使用此处找到的 HeatColor 插件：[http](http://www.jnathanson.com/blog/client/jquery/heatcolor/) ://www.jnathanson.com/blog/client/jquery/heatcolor/但有两个问题，1）它显示的颜色太多，我只需要两个；2）它似乎更适合数字而不是字母。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:14:41.800

您可以从姓氏生成的哈希码中驱动热图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:25:50.440

你基本上想存储你开始的姓氏和你的班级，遍历循环，当你的姓氏改变时，让你的班级改变......

这是一些伪代码......展示基本思想。这是假设您正在从服务器动态写入表......

```
$prevLastName = (row 1 last name);
$rowClass = 'firstColor';
//start your loop here...
for (...)
{
    //output table row
    echo '<tr id="uniqueIdentifier"  class="rowClass">....</tr>';
    if ($prevLastName === ($currentRowLastName))
    {
        $prevLastName == $currentRowLastName;
        if ($rowClass === 'firstColor')
            $rowClass = 'secondColor';
        else $rowCloass = 'firstColor';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:25:57.870

那么这里有一些伪代码。希望能帮助到你 ：）

```
var lastLastName = "";
var zebra = 0;
foreach (row in rows) {
    if (row.lastName != lastLastName) {
        if (zebra == 1) {
            zebra = 0;
        }
        else {
            zebra = 1;
        }
        lastLastName = row.lastName;
    }

    if (zebra == 0) {
        add an odd class;
    }
    else {
        add an even class;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T17:26:27.837

为什么不自己检查第一个字母，而不是使用另一个 jQuery 插件？这很简单，例如：

```
var previousLetter = '';
var styleVariant = 1; // Let's use 1 or 2 to indicate the styling

$('table tr').each(function()
{
    var name = $(this).children('td').first().text();
    var firstLetter = name.charAt(0);

    // If we're at the row where the next letter starts
    if (firstLetter != previousLetter)
    {
        previousLetter = firstLetter;

        // Switching the style to the other variant
        styleVariant = styleVariant == 1 ? 2 : 1;
    }

    $(this).addClass('style' + styleVariant);
}); 
```

当然，代码不是那么好，但我希望你能明白要点。我从问题标题中假设您要替换字母，因为您提到了字母顺序，但如果您需要在特定单词之间进行替换，这是相同的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T17:49:40.763

[**例子**](http://jsfiddle.net/AM7QL/1/)

**HTML**

```
<table>
    <thead>
        <tr>
            <th>Last Name</th>
            <th>Hours</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Anderson</td>
            <td>33</td>
            <td>1,000</td>
        </tr> 
        <tr>
            <td>Anderson</td>
            <td>30</td>
            <td>2,000</td>
        </tr>
        <tr>
            <td>Anderson</td>
            <td>23</td>
            <td>1,000</td>
        </tr> 
        <tr>
            <td>Ballestero</td>
            <td>12</td>
            <td>3,000</td>
        </tr>          
        <tr>
            <td>Ballestero</td>
            <td>05</td>
            <td>2,000</td>
        </tr>          
        <tr>
            <td>Castrinsky</td>
            <td>38</td>
            <td>8,000</td>
        </tr>          
        <tr>
            <td>Castrinsky</td>
            <td>96</td>
            <td>6,000</td>
        </tr>         
    </tbody>    
</table> 
```

**CSS**

```
.a1{
    background-color: wheat
}
.a2{
    background-color: gray;
} 
```

**JavaScript/jQuery**

```
var $tableBodyRows = $("table tbody tr");
var placeHolder = $("td:eq(0)", $tableBodyRows).text().trim().charAt(0);

$tableBodyRows.each(function(i){
    var letter = $("td:eq(0)", this).text().trim().charAt(0);

    if(letter === placeHolder){
        var c = ($(this).prev().attr('class') !== undefined ? $(this).prev().attr('class') : "a1")
        $(this).addClass(c);
    }else{
        var c = ($(this).prev().attr('class') === "a1" ? "a2" : "a1");
        $(this).addClass(c);
    }

    placeHolder = letter;
}); 
```

# php - wkhtmltopdf 有时不呈现 javascript

> ID：15977153
> 
> 赞同：0
> 
> 时间：2013-04-12T17:10:17.690
> 
> 标签：php, javascript, linux, wkhtmltopdf

我正在使用 wkhtmltopdf 通过 php 将页面转换为 pdf。这在 Windows 和 ubuntu 服务器上运行良好，但是，在不同的 linux 服务器上，有时（大约 6 次中有 5 次）不执行 javascript（pdf 仅包含不是由 javascript 生成/修改的数据）。

例如，我用它来渲染一些包含 jqplot 图形的页面。有问题的服务器似乎可以很好地处理外部链接，但是当使用指向自身的链接时，它大多数时候都无法加载 javascript。

我使用了静态二进制文件（v 0.9.9 和 v0.11.0），它们都以同样的方式失败。使用--javascript-delay（或--redirect-delay）没有任何效果（除了等待更长时间生成pdf）。在 v0.11.0 上，我还使用了 --window-status，它通常会在短时间内阻塞服务器（可能是因为从未加载过 javascript，因此未设置 window.status）。

此外，当未加载 javascript 时，wkhtml 的输出不会显示任何错误/警告。

关于可能导致这种情况的任何想法或建议都会有所帮助。

**编辑：**

```
<script type="text/javascript">
$(function(){
$.atk4(function(){ $('#myrealm_charts_jqplot').univ().jqplot(...pramas);
$('#myrealm_charts_jqplot_5').univ().jqplot(...params);
$('#myrealm_charts_jqplot_6').univ().jqplot(...params);
$('#myrealm_charts_jqplot_7').univ().jqplot(...params);
; });
});
</script> 
```

...

```
<body class="atk-fullscreen gs-10-fluid atk-sticky">
    <div class="gs-wrap atk-layout">
        <div id="Content">
            <div id="myrealm_charts" class="page_charts">
                <div style="height: '' ;width:'600px';">
                    <div id="myrealm_charts_jqplot" class=" pdf-analytics-chart" style="">

                    </div>
                </div>
                ...
            </div>

        </div>
    </div>
</body> 
```

该页面没有任何由 firebug 报告的错误。

# php - wkhtmltopdf 正在为某些 url 返回空白页

> ID：15977155
> 
> 赞同：1
> 
> 时间：2013-04-12T17:10:23.703
> 
> 标签：php, pdf-generation, wkhtmltopdf

我在我们的生产 Debian 服务器上安装了出色的软件 wkhtmltopdf，用于从 URL 创建 PDF。我们将生成的 PDF 流式传输（我希望这是正确的术语）到客户端，我们没有兴趣将它们存储在服务器端。

我们仅从本地 URL 生成 PDF（在自己的服务器上）。但是，URL 仍然基于域而不是本地 IP，因为服务器上有多个站点。

我们的问题是，对于某些本地页面，我们得到的只是一个完全空白的页面（甚至不是 PDF）。响应代码为 200，但内容类型为 text/html。对于那些将 PDF 成功流式传输到客户端的页面，内容类型为 application/pdf。

我认为在生成 PDF 时可能出现问题，所以我运行了与 PHP 执行完全相同的命令，然后成功生成了 PDF。

我正在使用[此页面](http://mikehaertl.github.io/phpwkhtmltopdf/ "这")上的库使 PHP 与 wkhtmltopdf 连接。

```
$pdf = new WkHtmlToPdf(array(
        'margin-left'=>0,
        'margin-right'=>0,
        'margin-top'=>0,
        'margin-bottom'=>0,
        'print-media-type',
        'disable-smart-shrinking'
    ));
    $url = "http://myserver.se/$url";
    $pdf->addPage($url);
    $pdf->send(); 
```

为什么我会返回某些 URL 的空白页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:58:27.303

事实证明，问题出在我正在使用的库中。我无法准确说出问题所在，但是当成功创建 PDF 时，wkhtmlpdf 类的 send 方法中的 proc_close 返回 2 而不是预期的 0。这导致库认为没有创建 PDF，它只是返回 false，表示没有任何内容输出给客户端。我通过使用 PHP 的 file_exists 函数检查文件是否存在来解决它。

# ios - 支持 Web 服务的 iOS 应用程序的控制流

> ID：15977156
> 
> 赞同：0
> 
> 时间：2013-04-12T17:10:30.787
> 
> 标签：ios, objective-c

我正在学习 iOS 开发的基础知识，我想制作一个连接到 Web 服务的简单应用程序。我在 Web 应用程序方面有很多经验，所以我对应用程序需要发送/接收什么样的请求等感到满意。我不确定的部分是服务的总体架构支持的移动应用程序看起来像。

当我的应用程序运行时，我有一个主要要求：用户必须通过 Web 服务进行身份验证。Web 服务可以发回一个令牌，应用程序可以将其用于所有后续请求。我希望用户能够登录一次，并让应用程序无限期地保持登录状态（即令牌对该设备仍然有效），除非他们注销。

直到用户登录应用程序才真正应该只是一个登录屏幕。如果他们注销，也一样。否则，他们根本不需要看到登录屏幕。

所以我的问题是，构建这个的正确方法是什么？

在`AppDelegate`中，我是否要制作 a`LoginViewController`并将其设置为`rootViewController`？那么如果用户已登录，则推送到应用程序其余部分的主视图？

还是我想初始化应用程序的主要部分（例如，`UITabBarController`其中有几个视图），并检查令牌，然后在没有令牌可用时显示模式登录屏幕？

我不清楚的是这样`rootViewController`的应用程序应该是什么，以及应用程序应如何跟踪用户是否登录，并确定打开应用程序时要显示的屏幕。

如果有人能给我一个关于如何构建这样一个应用程序的高级概述，我将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:52:53.587

没有真正正确的方法可以做到这一点，任何一种流程都可能适合应用程序。如果我有一些用户未登录时将显示的 UI 或数据，那么我会将其用作初始 rootViewController 并使用模式登录对话框来强制用户登录。另一方面，如果在用户登录之前我什么都没有显示，那么如果用户当前未登录，我会将登录视图控制器设置为初始 rootViewController。

为了跟踪正在登录的用户，您应该利用 NSUserDefaults 来保存身份验证令牌。然后在 application:didFinishLaunchingWithOptions: 调用你的应用程序委托在 NSUserDefaults 中查找这个令牌（并可能使用服务器验证它），然后根据需要设置 rootViewController。

# r - 如何将“顶点序列”列表转换为向量

> ID：15977157
> 
> 赞同：7
> 
> 时间：2013-04-12T17:10:42.507
> 
> 标签：r, igraph

我在 R 中使用 Igraph 包，当我通过 V(graph) 访问顶点名称列表时，我得到以下结果：

```
Vertex sequence:
 [1] "d66cp96igcdnt25brjeics9d11" "bovlonq25tmuaiak6do92v9cj0" "simj1u4714pa07p38vhstusf36" "6t6tnkoh4ftbgt787pvpmp1323"
 [5] "mf987tcmm8u8j3pdo4cts6jml3" 
```

我需要这些名称的向量的问题，但这是`structure(1:20, class = "igraph.vs", env = <environment>)`

我用 as.vector() 转换它的想法，as.factor 没有产生结果。有没有办法将其转换为字符串向量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T18:03:28.903

....好吧，我找到了出路：

`V(graph)$name`会给我一个名字的向量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-01T21:40:44.317

对于更一般的情况，只需使用该`as_ids()`功能。

# php - 基于学年的 PHP 和 MySQL 存档

> ID：15977161
> 
> 赞同：0
> 
> 时间：2013-04-12T17:11:01.903
> 
> 标签：php, mysql, date, archive

* * *

我需要帮助创建基于学年的帖子存档。[**在这个网站**](http://www.daniweb.com/web-development/php/threads/238393/php-mysql-archive)的帮助下，我设法创建了一个正常的存档。我仍然是 PHP 新手，感觉我错过了一些对普通后端开发人员来说可能很明显的东西。

这是我的存档当前外观的树形视图：

```
 2013

  April
      Post Title
  March
      Post Title
  February
      Post Title
      Post Title
      Post Title
  January
      Post Title
      Post Title
      Post Title

  2012

  December
      Post Title
      Post Title
      Post Title
  November
      Post Title
      Post Title
      Post Title 
```

我不禁觉得它快到了，但我不知道如何让网站知道要显示哪些日期范围。我尝试过的一件事是添加此查询：

```
$result = mysql_query("SELECT * FROM table WHERE table_date BETWEEN '2012-08' and '2013-07'") or die(mysql_error()); 
```

它奏效了，这几乎就是我想要的……但我不想在结束之前为每个学年添加查询！必须有一种比每年手动添加这些范围更好的方法。

**编辑**：这是我当前的代码。它给了我错误“未定义的索引：hound_date”

```
$result = mysql_query("SELECT CONCAT(   YEAR(hound_date-INTERVAL 7 MONTH),'-', 
                1+YEAR(hound_date-INTERVAL 7 MONTH))  AS 'academic year',
        COUNT(*) AS 'number of events'
   FROM hound
  GROUP BY CONCAT(   YEAR(hound_date-INTERVAL 7 MONTH),'-', 
                   1+YEAR(hound_date-INTERVAL 7 MONTH))") or die(mysql_error());

// An array to store the data in a more managable order.
$data = array();

// Add each entry to the $data array, sorted by Year and Month
while($row = mysql_fetch_array($result))
    {
    $hound_date=my_date($row['hound_date']);
    list($year,$month)=explode(" ", $hound_date);

    $data[$year][$month][] = $row;

    }   

    // Go through each Year and Month and print a list of entries, sorted by month.
    foreach($data as $_year => $_months)
        {
        echo '<hr/>';
        echo "<h2>{$_year}</h2>";
        foreach($_months as $_month => $_entries)
            {
            echo '<hr/>';
            echo "<h3>{$_month}</h3>";
            echo "<ul>";
            foreach($_entries as $_entry)
                {
                echo '<li><a href="/?story='.$_entry["hound_id"].'">'.$_entry["hound_name"].'</a> </li>';

                }
            echo "</ul>";

            }
        } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:29:10.913

首先要做的是决定如何定义你的学年。它们似乎定义如下：

2012 年 8 月 1 日至 2013 年 7 月 31 日为 2012-2013 学年

也就是说，学年从第七个月开始。

如果是这种情况，那么您可以使用这个 MySQL 表达式将任何特定的日期列转换为文本字符串，例如“2012-2013”​​，表示它发生的学年。

```
CONCAT(YEAR(datecol-INTERVAL 7 MONTH),'-', 1+YEAR(datecol-INTERVAL 7 MONTH)) 
```

例如，您可以编写这样的查询来计算每个学年的行数。

```
 SELECT CONCAT(   YEAR(datecol-INTERVAL 7 MONTH),'-', 
                1+YEAR(datecol-INTERVAL 7 MONTH))  AS 'academic year',
        COUNT(*) AS 'number of events'
   FROM table
  GROUP BY CONCAT(   YEAR(datecol-INTERVAL 7 MONTH),'-', 
                   1+YEAR(datecol-INTERVAL 7 MONTH)) 
```

关键是，您使用的一点日期算术`- INTERVAL 7 MONTH`应该可以很好地将日历年转换为学年。

# zend-framework2 - 如何使用 Forward Plugin 将数据转发到另一个动作并在 Zend Framework 2 中读取它？

> ID：15977162
> 
> 赞同：1
> 
> 时间：2013-04-12T17:11:14.030
> 
> 标签：zend-framework2, forward, zend-controller, zend-controller-plugin

我在控制器中有两个动作：`actionA()`和`actionB()`. 根据条件，`actionA()`应该返回一个`ViewModel`对象或被转发到`actionB()`（并返回其结果）：

类 MyController 扩展 AbstractActionController {

```
public function aAction() {
    ...
    $data = ...
    ...
    if (...) {
        $result = new ViewModel(array(
            'data' => $data,
        ));
    } else {
        $result = $this->forward()->dispatch('MyModule\Controller\My', array(
            'action' => 'b',
        ));
    }
    return $result;
} 
```

我试过了

```
 $result = $this->forward()->dispatch('MyModule\Controller\My', array(
            'action' => 'b',
            'data' => $data,
        )); 
```

但我不知道现在如何获取这些数据。

我确定，这是可能的。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:51:41.607

```
 public function bAction() {
        ...
        // so:
        $params = $this->params()->fromRoute();
        // or so:
        $params = $this->getEvent()->getRouteMatch()->getParams();
        ...
    } 
```

# javascript - 基于键的骨干关系定义的正确方法

> ID：15977170
> 
> 赞同：3
> 
> 时间：2013-04-12T17:11:43.313
> 
> 标签：javascript, backbone.js, backbone-relational

我已经看过文档好几次了，但这方面我仍然不清楚。我认为骨干关系完全有可能做一些它没有做的事情。

我正在寻找基于键定义关系的方法，以避免所有的样板文件都是胡说八道。

以规范的艺术家和专辑为例：一个艺术家有许多专辑，由专辑.artist_id 定义

/api/artist/62351 可能会返回

```
{
  id: 62351,
  name:"Jimi Hendrix"
} 
```

同样 /api/album?artist_id=62351 可能会返回

```
[
 {
   id:5678,
   name: "Are You Experienced?"
   artist_id: 62351
 },
 {
   id: 4321,
   name: "Axis: Bold as love",
   artist_id: 62351
 }
] 
```

我如何定义艺术家和专辑关系，这样

```
var hendrixInstance = new Artist({id:62351});
hendrixInstance.get('albums'); 
```

会根据专辑foreign_key Artist_id 获取并返回专辑集合吗？它一定只是我还没有尝试过的 key/keySource/keyDestination 的一些排列，或者是骨干关系没有试图解决的问题，但是我的 doc groking 失败了，我认为对此有一个简明的答案SO 可能会帮助未来的 Google 员工。

```
var Artist = Backbone.RelationalModel.extend({
  urlRoot: '/api/artist',
  relations:[{
    key: 'albums', //Docs say this is the foreign key name, but in practice it doesn't appear that way. Need keySource/Destination?
    type: Backbone.HasMany,
    reverseRelation: {
      key: 'artist',
      type: Backbone.HasOne
    }
  }]
});
var Album = Backbone.RelationalModel.extend({
  urlRoot: '/api/album'
}); 
```

奖励指向一个示例模型，该模型使用 parent_id 引用其自身邻接列表样式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:24:15.450

所以，@xzhang 上面的方法让我一直在迭代这个问题。首先，我很想在这方面被证明是错误的，但我还没有找到一种无需额外自定义代码就可以让骨干关系处理这个问题的方法。由于在我看来这是一个非常基本的 OneToMany 关系示例，我仍然希望我只是没有得到明显的东西。

这就是我最终为处理这种情况所做的事情。不幸的是，当调用 someobject.fetch('somerelationship') 时，它仍然不会自动从服务器获取，这是我真正想要的。parse 函数对大多数人来说不是必需的，但它是我调用的 api 所必需的。

首先，我建立了一个基础集合来扩展：

```
 var BaseCollection = Backbone.Collection.extend({
    initialize: function(models, options) {
      if (_.isObject(options.relation)) {
      this.url = '/api/'
        + options.relation.keySource
        + '?search.'+options.relation.reverseRelation.keySource
        + '=' + options.foreignId;
      }
    },
    parse: function(res) { return res.success ? res.list : res },
  }); 
```

然后是一个可重用的辅助函数（可能会滚动到 BaseCollection 中）来帮助创建关系

```
 function collectionOptions(instance) {
    return {"relation":this, "foreignId":instance.get('id') };
  }; 
```

最后，这些关系被告知使用 BaseCollection 作为它们的 CollectionType，collectionOptions() 助手被分配来设置 collectionOptions。

```
 var Form = BaseModel.extend({
    urlRoot: '/api/form',
    relations:[
      {
        key: 'fills',
        keySource: 'fill',
        relatedModel: Fill,
        type: Backbone.HasMany,
        collectionOptions: collectionOptions,
        collectionType: BaseCollection,
        reverseRelation: {
          key: 'form',
          keySource: 'form_id',
          type: Backbone.HasOne
        }
      },{
        key: 'children',
        keySource: 'form',
        relatedModel: 'Form',
        type: Backbone.HasMany,
        collectionOptions: collectionOptions,
        collectionType: BaseCollection,
        reverseRelation: {
          key: 'parent',
          keySource: 'parent_id',
          type: Backbone.HasOne
        }
      }
    ]
  }); 
```

这使我可以避免更改服务器端 API 以返回 id 列表，然后单独获取这些 id。相反，我可以：

```
var form = new Form({id:1});
form.get('children').fetch();
form.toJSON(); //now has {id:1, ..., ..., children:[child,child,child,...]} 
```

在第一次调用 .get('children') 时对 autoFetch 子项的扩展只是门票，但我还没有发现如何在不修改骨干关系本身的情况下做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:40:37.327

我正面临着确切的问题（[Backbone-relational hasmany best practice](https://stackoverflow.com/questions/15954406/backbone-relational-hasmany-best-practices)），经过 2 天的研究并查看源代码，我认为 key/keySource/keyDestination 无法完成工作（如果我错了，请纠正我）。

所以我最终创建了自己的关系类型，到目前为止工作正常。这可能不是一个好的解决方案，但希望可以帮助你。

```
var LazyMany = Backbone.HasMany.extend({
  setRelated: function (related) {
    var relation = this.options
      , instance = this.instance
    ;

    if (related && !_.result(related, 'url')) {
      related.url = relation.relatedModel.prototype.urlRoot + 
        '?' + relation.reverseRelation.key + '=' + instance.id;
    }
    return LazyMany.__super__.setRelated.apply(this, arguments);
  }
}); 
```

然后在你的模型中：

```
var Album = Backbone.RelationalModel.extend({
  urlRoot: '/api/album/'
});

var Artist = Backbone.RelationalModel.extend({
  urlRoot: '/api/artist/',
  relations:[{
    key: 'albums',
    type: LazyMany,
    includeInJSON: false,
    relatedModel: Album,
    reverseRelation: {
      key: 'artist',
      // I didn't test this, I don't have artist_id, artist is "id" in my app
  keySource: 'artist_id',
  keyDestination: 'artist_id',
      includeInJSON: 'id'
    }
  }]
}); 
```

因此，如果您没有定义 collectionType 或者您的集合没有 url 字段，则 LazyMany 将使用 url: 创建一个集合`/api/album/?artist=62351`。然后你只需要获取集合：`artist.get('albums').fetch()`。

希望这会有所帮助，我仍在寻找更好的解决方案。

# linux - 为什么，当我重新启动终端时，环境变量会重新启动？

> ID：15977171
> 
> 赞同：2
> 
> 时间：2013-04-12T17:11:49.443
> 
> 标签：linux

我做下一个：

```
export M2_HOME=/usr/local/apache-maven/apache-maven-3.0.4
export M2=$M2_HOME/bin
export PATH=$M2:$PATH 
```

然后验证一切是否正确：

mvn-版本

它可以工作，但是当我关闭终端并打开其他终端时，环境变量被删除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:15:23.820

因为这就是变量的工作方式。您正在为该会话设置它们。如果您希望它们持续存在，请将它们放入您的环境中`.profile`，以便在每次启动新的 shell 实例时设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:19:05.520

进程在启动时从其父进程继承其环境变量。如果要为所有新进程设置一些环境变量，请编辑 `~/.profile`或`/etc/profile`，登录 shell 会读取这些变量。

# java - 从受保护的 void 类中获取价值

> ID：15977173
> 
> 赞同：0
> 
> 时间：2013-04-12T17:11:55.830
> 
> 标签：java, android

我将在 java 中迈出第一步：我有以下问题。从我的受保护类“onActivityResult”中，我需要在我的类“ImageUploadTask”中有字符串。我怎样才能做到这一点？

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case PICK_IMAGE:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImageUri = data.getData();
            String filePath = null;

            try {
                ...

                } else if (filemanagerstring != null) {
                    filePath = filemanagerstring;
                } 
                if (filePath != null) {
                    decodeFile(filePath);
                    // get fileName //
                    String fileName = new File(filePath).getName();
                    Log.e(TAG, "Filename:" + fileName);

                } 
        break;
    default:
    }
}

class ImageUploadTask extends AsyncTask<Void, Void, String> {
    private static final String TAG = "GalleryPreviewView";

    @Override
    protected String doInBackground(Void... unsued) {
        try {
            ....
                     Log.e(TAG, "Filename:" + fileName);
        }

    }

    @Override
    protected void onProgressUpdate(Void... unsued) {

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:18:06.813

> 我将在 java 中迈出第一步：我有以下问题。从我的受保护类“onActivityResult”中，我需要在我的类“ImageUploadTask”中有字符串。我怎样才能做到这一点？

可能您想将**fileName**变量传递给您的 AsyncTask 子类。你有几个选择：

您可以声明“类范围”变量并仅在 onActivityResult 方法中对其进行初始化：

```
if (filePath != null) {
   decodeFile(filePath);
   fileName = new File(filePath).getName();
   Log.e(TAG, "Filename:" + fileName);
} 
```

然后像这样将变量传递给 AsyncTask 类：

```
class ImageUploadTask extends AsyncTask<String, Void, String> {
    private static final String TAG = "GalleryPreviewView";

    @Override
    protected String doInBackground(String... params) {
       String fileName = params[0];
    } 
```

一个用法：

```
ImageUploadTask task = new ImageUploadTask();
task.execute(fileName); 
```

但是由于您的 ImageUploadTask 可能是您的 Activity 类的内部类，您可以直接访问在“父”类中声明的所有变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:17:44.653

如果您将`ImageUploadTask`其用作活动类的嵌入式类，则可以执行以下操作：

```
MyActivityClass.this.activityfunction();

or 

MyActivityClass.this.activityFieldVariable; 
```

# javascript - jquery 插件中断只是因为我删除了 '.css({display: 'none'})'

> ID：15977175
> 
> 赞同：1
> 
> 时间：2013-04-12T17:12:01.517
> 
> 标签：javascript, jquery, css

我正在使用一个 jquery 插件，它用 div 替换表单的文件输入，因此当您单击 div 时，文件浏览器会弹出。当您选择一个文件时，表单会自动提交，结果会进入隐藏的 iframe。所有这一切背后的想法是，您可以只拥有一张图片，上面写着“点击上传”，然后单击一个文件浏览器，当您选择文件时，它会在后台上传。

无论如何，我知道文件提交时我的 php 中发生了问题，但是由于结果被加载到隐藏的 iframe 中，我看不到错误是什么！

所以显然从iframe中删除了隐藏样式，但问题是插件在插件的javascript中添加了display：hidden。它确实：

```
var iframe = $(
        '<iframe '+
            'id="iframe'+id+'" '+
            'name="iframe'+id+'"'+
        '></iframe>'
    ).css({
        display: 'none'
    }); 
```

但是，如果我删除：

```
.css({
        display: 'none'
    }); 
```

位，然后整个事情似乎中断了，用“点击上传”点击图像不再打开文件浏览器。

插件 javascript 不长，但可能太长无法在此处发布，但您可以在此处查看：http: [//liquidlizard.net/jquery.ocupload.js](http://liquidlizard.net/jquery.ocupload.js)如果有人可以帮助我，那就太好了！

为什么只删除那个 css() 函数会阻止整个工作？还有其他方法可以查看隐藏 iframe 的内容吗？

**编辑** 这是评论中建议的jsfiddle。[http://jsfiddle.net/VF6Qb/](http://jsfiddle.net/VF6Qb/) 如果删除 .css({display:'none'}); 则从第 35 行开始的 javascript 中 然后单击 div 将不再打开文件浏览器对话框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:31:38.323

当您删除 时`display:none;`，它`<iframe>`会以某种方式与文件输入和单击的 div 重叠，因此它不会触发文件浏览器。您可以在我交换 iframe 和提交表单的 DOM 位置的地方测试[这个小提琴，瞧——它有效。](http://jsfiddle.net/VF6Qb/1/)

但是，对于仅检查 iframe 中的错误文档，您不会使 iframe 可见，而只需在[FireBug 的*net panel*](http://getfirebug.com/wiki/index.php/Net_Panel)中检查其源代码（和 HTTP 标头） 。

# powershell - 如何将命名函数作为参数传递（脚本块）

> ID：15977178
> 
> 赞同：4
> 
> 时间：2013-04-12T17:12:20.693
> 
> 标签：powershell, scriptblock

让我们以经典的一阶函数为例：

```
function Get-MyName { "George" }

function Say-Hi([scriptblock]$to) {
  Write-Host ("Hi "+(& $to))
} 
```

这工作得很好：

```
Say-Hi { "Fred Flintstone" } 
```

这不会：

```
Say-Hi Get-MyName 
```

因为 Get-MyName 被评估，而不是作为值本身传递。如何将 Get-MyName 作为值传递？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T17:45:30.880

您必须将 Get-Myname 作为脚本块传递，因为这就是您定义变量类型的方式。

```
Say-Hi ${function:Get-MyName} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-21T05:09:51.247

如果您准备牺牲`[scriptblock]`参数类型声明，那么还有另一种方法，可以说是最简单且有效的方法。只需`[scriptblock]`从参数中删除（或将其替换为`[object]`）：

```
function Get-MyName { "George" }

function Say-Hi($to) {
  Write-Host ("Hi "+(& $to))
}

Say-Hi Get-MyName
Say-Hi { "George" } 
```

所以 now`$to`可以是脚本块或命令名称（不仅仅是函数，还可以是别名、cmdlet 和脚本）。

唯一的缺点是声明`Say-Hi`不是那么自我描述。当然，如果您不拥有代码并且无法更改它，那么这根本不适用。

我希望 PowerShell 对此有特殊类型，请参阅此[建议](https://connect.microsoft.com/PowerShell/feedback/details/863243/a-type-command-is-needed-to-combine-command-names-and-script-blocks)。在那种情况下`function Say-Hi([command]$to)`将是理想的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-27T20:02:13.263

这可能是一个更好的例子来说明问题和执行范围的细节。@mjolinor 的答案似乎很适合这个用例：

```
function Get-MyName($name) { $name; throw "Meh" }

function Say-Hi([scriptblock]$to) {
  try {
      Write-Host ("Hi "+(& $to $args)) # pass all other args to scriptblock
  } catch {
      Write-Host "Well hello, $_ exception!"
  }
} 
```

命令及其输出：

```
PS C:\> Say-Hi ${function:Get-MyName} 'George'
Well hello, Meh exception 
```

特别是，我使用这种模式来包装与不稳定的远程 SQL Server 数据库连接一起工作的函数，该连接休眠，然后重试几次，最终成功或引发更高的异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-20T19:11:17.467

严格根据您的代码，正确答案是：

```
Say-Hi {(Get-MyName)} 
```

这将产生“嗨乔治”

# xml - 确定as3中的xml节点属性是否为空

> ID：15977179
> 
> 赞同：0
> 
> 时间：2013-04-12T17:12:27.740
> 
> 标签：xml, actionscript-3, flash

我正在尝试查找以下哪个“**对象**”节点在**linkurl**属性中包含一个 url。即使属性中没有内容，linkurl 属性也将始终存在。我没有任何运气，因为我无法找到一种方法来确定第一个对象节点中的 linkurl 的第一个实例是否为空，然后转到第二个，然后是第三个等。该属性始终包含某些内容，即使属性本身没有内容。

这是xml

```
<object id='graphic1' active='1' url='media/00360691.swf' x='445' y='125' alt='' altfr='' altes='' tabIndex='1' layer='0' linkurl=''/>
<object id='graphic2' active='0' url='media/00360691.swf' x='0' y='0' alt='' altfr='' altes='' tabIndex='1' layer='0' linkurl='html/AnalyticalReviewAnalysis.pdf'/>
<object id='graphic3' active='0' url='media/00360692.swf' x='0' y='0' alt='' altfr='' altes='' tabIndex='1' layer='0' linkurl=''/>
<object id='graphic4' active='0' url='media/00360693.swf' x='0' y='0' alt='' altfr='' altes='' tabIndex='1' layer='0' linkurl=''/>
<object id='graphic5' active='0' url='media/' x='0' y='0' alt='' altfr='' altes='' tabIndex='1' layer='0' linkurl=''/>
<object id='activity' active='0' url='media/' x='0' y='0'/> 
```

这是我到目前为止所尝试的：

```
if(myXML.object[7].hasOwnProperty("@linkurl")){
        trace("graphic 1 is not empty");
        linkURL = myXML.object[7].attribute("linkurl")[0];
} else {
        trace("graphic 1 is empty");
}

    trace("length: "+myXML.object[7].attribute("linkurl")[0].length());
    trace(myXML.object[7].attribute("linkurl")[0]);

    trace("linkURL: "+ linkURL); 
```

这是什么痕迹：

```
graphic 1 is not empty
length: 1

linkURL: 
```

无论属性是否包含内容，长度始终为 1。因此，我无法忽略空节点，然后继续下一个。if 语句总是出现不为空，因为即使 if `linkurl=""`，它仍然有一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:21:29.263

1 的长度是正确的 - 您的 xml 对象中有 1 个 linkurl 属性。

以空字符串为值的属性仍然是属性

要获得零长度，xml根本不应包含**linkurl=''**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:27:10.997

尝试这个：

```
if ( myXML.object[7].@linkurl && myXML.object[7].@linkurl != '' ) {
    // linkurl contains data
}
else {
    // linkurl is empty
} 
```

基本上，您验证 linkurl 属性确实存在（这只是避免空引用的好习惯）并查看字符串是否不是空字符串。如果这是真的，您可以设置您的 AS3 linkurl 属性。否则，你忽略它。

# c - 在 C 中连接到 Postgres 数据库时出错 - 使用 libpq-fe.h

> ID：15977181
> 
> 赞同：-2
> 
> 时间：2013-04-12T17:12:34.050
> 
> 标签：c, postgresql, libpqxx

嘿，我正在尝试使用 postgres 连接到数据库

```
#include <stdio.h>
#include <stdlib.h>
#include <libpq-fe.h>

int main(int argc, char* argv[])
{
//Start connection
PGconn* connection = PQconnectdb("host=webcourse.cs.nuim.ie dbname=cs621      sslmode=require user=ggales password=1234");

if (PQstatus(connection) ==CONNECTION_BAD)
{
printf("Connection error\n");
PQfinish(connection);
return -1; //Execution of the program will stop here
}
printf("Connection ok\n");
//End connection
PQfinish(connection);
printf("Disconnected\n");

return 0;
} 
```

我不断收到这个编译错误：

```
main.c: In function ‘main’:
main.c:9:35: warning: missing terminating " character [enabled by default]
main.c:9:2: error: missing terminating " character
main.c:10:2: error: ‘dbname’ undeclared (first use in this function)
main.c:10:2: note: each undeclared identifier is reported only once for each function it      appears in
main.c:10:9: error: ‘cs621’ undeclared (first use in this function)
main.c:10:15: error: expected ‘)’ before ‘sslmode’
main.c:10:56: warning: missing terminating " character [enabled by default]
main.c:10:15: error: missing terminating " character
main.c:16:1: error: expected ‘,’ or ‘;’ before ‘}’ token
main.c:16:1: error: expected declaration or statement at end of input 
```

谁能明白为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:58:03.670

您的代码编译得很好。如果我将它粘贴到`x.c`我可以毫无问题地编译它：

```
gcc -I /usr/pgsql-9.2/include -L /usr/pgsql-9.2/lib x.c -lpq 
```

（您的系统上的路径可能不同）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-05T10:16:41.413

您可以在 32 位程序中使用 64 位 libpq.lib。您可以使用 32 位 libpq.lib 或将平台更改为 x64。

32 位客户端 + 64 位服务器无法正常工作。

# hadoop - HBase 批量放置问题排查

> ID：15977185
> 
> 赞同：1
> 
> 时间：2013-04-12T17:13:06.840
> 
> 标签：hadoop, hbase, batch-processing

是否可以对 HBase 批量放置进行故障排除？我一次使用 5000 条记录的 HBase 批量放置，并且我想在放置失败时找出哪一行或哪几行导致问题并记录它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T18:27:32.350

方法 HTable.batch(List actions) 接收一个 Puts 列表并返回一个与操作列表大小相同的数组（您提供给函数的 puts 列表）。如果 actions(i) 失败，则 result[i] 将为空。

请注意，当 batch() 内部的失败是由于尝试写入的最大次数导致的，您需要捕获 RetriesExhaustedWithDetailsException，并调用 getExceptions()，以获取包含错误到导致它的 put 的映射的数组。

[在此处](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.hbase/hbase/0.94.5/org/apache/hadoop/hbase/client/HConnectionManager.java#HConnectionManager.HConnectionImplementation.processBatchCallback%28java.util.List,byte%5B%5D,java.util.concurrent.ExecutorService,java.lang.Object%5B%5D,org.apache.hadoop.hbase.client.coprocessor.Batch.Callback%29)查看代码

# sql - 更新列的值，使其与其他列形成唯一约束

> ID：15977186
> 
> 赞同：1
> 
> 时间：2013-04-12T17:13:07.823
> 
> 标签：sql, oracle, sql-server-2008

我有 a1、a2、a3 列的表 A 和 b1、b2 列的表 B。当前 a2 列（表 A）包含所有空值，我想通过 b2（表 B）中的随机值更新 a2 值。但是在更新 a2 时，我需要检查它与 a1 列形成的唯一性。意味着它应该是 (a1,a2) 应该是唯一的。实现这一目标的最佳方法是什么。我正在使用 sql 2008。但我需要确保它也可以使用 oracle。

我已经尝试以下选择随机它发生得很好。

`update A set a2 = (SELECT TOP 1 b2 FROM B ORDER BY newid())
where a2 is null
[but also need to form unique (a1,a2)]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:52:21.703

*注意：在澄清 table`b`的行数少于 table后，我更改了此答案`a`。*

这可以通过`MERGE`.

首先，假设表`a`中的行具有以下`a1`值：`1, 1, 1, 1, 2, 2, 2, 2, 7, 7, 10, 10, 10, 10, 12, 12, 13, 13, 13, 13, 15, 15`.

接下来，假设表`b`具有具有以下`b2`值的行：`102, 103, 104, 105, 106, 107, 108`.

使用此查询，每个`a1`值都可以与`b2`值轮流配对：

```
SELECT * FROM
 (SELECT a1, ROW_NUMBER() OVER (PARTITION BY a1 ORDER BY NULL) AS RowA
    FROM a) TableA
INNER JOIN
 (SELECT b2, ROW_NUMBER() OVER (Order by b2) AS RowB
    FROM b) TableB
ON Tablea.RowA = TableB.RowB

 A1 ROWA  B2 ROWB
--- ---- --- ----
  1    1 102    1 <-- first a1=1 goes with b2=102
  1    2 103    2 <-- second a1=1 goes with b2=103
  1    3 104    3 <-- third a1=1 goes with b2=104
  1    4 105    4 <-- fourth a1=1 goes with b2=105
  2    1 102    1 <-- start again: first a1=2 goes with b2=102
  2    2 103    2 <-- and so on...
  2    3 104    3
  2    4 105    4
  7    1 102    1
  7    2 103    2
 10    1 102    1
 10    2 103    2
 10    3 104    3
 10    4 105    4
 12    1 102    1
 12    2 103    2
 13    1 102    1
 13    2 103    2
 13    3 104    3
 13    4 105    4
 15    1 102    1
 15    2 103    2 
```

这对于合并来说是不够的，因为它不能`a`唯一地标识表行，但`ROWID`可以解决这个问题。这是完整的查询：

```
MERGE INTO a
USING (
  SELECT * FROM
   (SELECT
        a.ROWID as ID,
        a1,
        ROW_NUMBER() OVER (PARTITION BY a1 ORDER BY a2) AS RowA
      FROM a) TableA
  INNER JOIN
   (SELECT b2, ROW_NUMBER() OVER (Order by b2) AS RowB
      FROM b) TableB
  ON Tablea.RowA = TableB.RowB) AtoB
ON (a.ROWID = AtoB.ID)
WHEN MATCHED THEN UPDATE SET a.a2 = AtoB.b2 
```

这是`a`更新后的表格：

```
SELECT a1, a2 FROM a ORDER BY a1, a2;

 A1   A2
--- ----
  1  102
  1  103
  1  104
  1  105
  2  102
  2  103
  2  104
  2  105
  7  102
  7  103
 10  102
 10  103
 10  104
 10  105
 12  102
 12  103
 13  102
 13  103
 13  104
 13  105
 15  102
 15  103 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:30:52.040

您可以像这样使用查询

```
 CREATE TABLE A(a1 INT ,a2 INT, a3 int)

    CREATE TABLE B(b1 INT ,b2 INT )

    INSERT A VALUES (2,NULL,1)
    INSERT A VALUES (3,NULL,1)
    INSERT A VALUES (4,NULL,1)
    INSERT A VALUES (5,NULL,1)
    INSERT A VALUES (2,NULL,1)

    INSERT B VALUES (2,7)
    INSERT B VALUES (12,7)
    INSERT B VALUES (2,7)
    INSERT B VALUES (2,7)
    INSERT B VALUES (2,17)
    INSERT B VALUES (2,70)

    INSERT B VALUES (22,1)

    SELECT * FROM A

    UPDATE A SET a2=(SELECT TOP 1 b2 FROM B WHERE NOT EXISTS
    (SELECT 1 FROM A T2 WHERE A.a1=T2.a1 AND A.a2=B.B2 )
    ORDER BY NEWID())

    SELECT * FROM A

    SELECT * FROM B

    DROP TABLE A

    DROP TABLE B 
```

如果您提供创建和插入语句来快速诊断问题会更好。

# ruby-on-rails-3 - 型号名称“资源” - 安全吗？

> ID：15977187
> 
> 赞同：0
> 
> 时间：2013-04-12T17:13:10.990
> 
> 标签：ruby-on-rails-3

我检查了 Rails 和 Ruby 限制关键字，看起来 Resource 作为模型名称应该没问题。不过，我想从高级 Rails 开发人员那里得到一些确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:29:12.667

我为保留关键字 rails 做了一个快速的谷歌搜索，虽然我发现您的型号名称`Resource`不在任何列表中，但我认为不使用它是明智的。

这样做的原因是，这些列表往往会随着时间而改变，这正是编程和框架的本质。

所以现在看起来不错的命名想法，在未来可能不是一个好主意。**仅出于这个原因，我就**不会使用看起来像是保留关键字的东西。

也许使用`namespaces`？

# php - wordpress posts_orderby 过滤器与插件中的自定义表

> ID：15977188
> 
> 赞同：1
> 
> 时间：2013-04-12T17:13:16.193
> 
> 标签：php, mysql, wordpress, add-filter

我正在开发一个 Wordpress 插件，需要使用我使用插件创建的自定义表格来订购网站的帖子。

我不想更改主题中的代码，所以我在 codex 上找到了过滤器`posts_orderby`和`posts_join`（在这里找到：[https](https://codex.wordpress.org/Custom_Queries) ://codex.wordpress.org/Custom_Queries ）。

自定义表具有以下值：

```
ID    slug    price 
```

在我添加这些行的插件文件中：

```
add_filter('posts_orderby','custom_orderby');
add_filter('posts_join','custom_join');

function custom_join($join){
    global $wpdb;
    $customTable = $wpdb->prefix.'custom_table';

    if(!is_admin()){
        $join .= " LEFT JOIN $customTable ON $wpdb->postmeta.meta_value = $customTable.slug";
    }
    return $join;
}
function custom_orderby($orderby_statement){
    global $wpdb;
    $customTable = $wpdb->prefix.'custom_table';

    if(!is_admin()){
        $orderby_statement = "$customTable.price DESC"; 
    }
    return $orderby_statement;
} 
```

当我刷新索引页面时，它给了我这个错误消息：

```
No Results Found

The page you requested could not be found. Try refining your search, or use the navigation above to locate the post. 
```

我尝试使用以下代码直接在我的数据库上进行查询：

```
SELECT * FROM wp_posts t1
    LEFT JOIN wp_postmeta t2 ON t1.ID = t2.post_id
    LEFT JOIN wp_custom_table t3 ON t2.meta_value = t3.slug

ORDER BY t3.price DESC 
```

它有效。

所以我的插件文件中编写的代码有问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T06:41:17.540

好的，我解决了。

问题是 post 查询不包含 postmeta 表，所以我在`custom_join`函数上添加了它，如下所示：

```
add_filter('posts_join','custom_join');
add_filter('posts_orderby','custom_orderby');

function custom_join($join){
    global $wpdb;
    $customTable = $wpdb->prefix."custom_table";

    if(!is_admin){
        $join .= "LEFT JOIN $wpdb->postmeta p1 ON $wpdb->posts.ID = p1.post_id";
        $join .= "LEFT JOIN $customTable p2 ON p1.meta_value = p2.slug";
    }

    return $join;
}

function custom_orderby($orderby_statement){
    global $wpdb;

    if(!is_admin){
        $orderby_statement = "p2.price DESC, $wpdb->posts.post_date DESC";
    }

    return $orderby_statement;
} 
```

我还添加了`posts_groupby`过滤器，因为新查询给了我重复的帖子（很多重复的帖子）。

这是代码：

```
add_filter('posts_groupby','custom_groupby');

function custom_groupby($groupby){
    global $wpdb;

    if(!is_admin){
       $groupby = "$wpdb->posts.ID";
    }

    return $groupby;
} 
```

一切都写在插件文件中，但你也可以写在`function.php`你的主题文件中。

**如果您只想**在前端查看自定义查询，请记住包含该`if(!is_admin)`语句。

# ios - 如何在 ios 应用程序中包含皮肤

> ID：15977189
> 
> 赞同：2
> 
> 时间：2013-04-12T17:13:17.433
> 
> 标签：ios, objective-c, ipad

我开发了一个新的 iPad 计算器，并正在对其进行更新，它有一个设置选项，您可以在其中更改应用程序的皮肤。目前，我为此使用了不同`UIViewController`的 s，但这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:22:21.650

为了建立@MJN 的答案，一旦你选择了一个皮肤/主题类，你可以使用它轻松地将它应用到你的应用程序中，它可以让你为常见类[`UIAppearance`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)的所有实例设置样式，如、、等。`UIKit``UIButton``UIBarButtonItem``UINavigationBar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:18:24.883

您可以制作一个`AppSkinProtocol`具有以下方法的

```
- (NSString*)skinIdentifier;
- (UIColor*)highlightedButtonColor;
- (UIImage*)successfulDownloadAlertBackground; 
```

然后创建符合您的 AppSkinProtocol 的 NSObject 子类。

然后，您可以`AppSkinManager`将选定的皮肤保存到`NSUserDefaults`. 当应用程序启动时，使用与保存为默认值的字符串匹配的标识符加载皮肤。

# android - PhoneGap Screenshot 插件不适用于 Android？

> ID：15977192
> 
> 赞同：1
> 
> 时间：2013-04-12T17:13:26.737
> 
> 标签：android, cordova, phonegap-plugins, phonegap-build

我目前正在为phonegap android项目使用截图插件（插件版本2.0.0），该插件返回一些错误，如

未捕获的类型错误：无法在 file:///android_asset/www/index.html 处调用未定义的方法“saveScreenshot”

我的代码：

```
 <script src="cordova-2.5.0.js"></script>
 <script src="js/jquery-1.8.1.min.js"></script>
 <script src="js/Screenshot.js"></script>
 <script>
  document.addEventListener("deviceready",onDeviceReady,false);
  function onDeviceReady() {
   $('#screen').click(function(){
   window.plugins.screenshot.saveScreenshot();
  });
 } 
</script>

 <button id="screen">ScreenSave</button> 
```

我做错了什么有人指导我。
谢谢

**编辑**

* * *

## 配置文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <cordova>
      <!--
        access elements control the Android whitelist.
        Domains are assumed blocked unless set otherwise
         -->

      <access origin="http://127.0.0.1*"/>
      <!-- allow local pages -->

      <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
      <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
      <access origin=".*"/>

      <!-- <content src="http://mysite.com/myapp.html" /> for external pages -->
      <content src="index.html" />
      <log level="DEBUG"/>
      <preference name="useBrowserHistory" value="true" />
      <preference name="exit-on-suspend" value="false" />
      <plugins>
        <plugin name="App" value="org.apache.cordova.App"/>
        <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
        <plugin name="Device" value="org.apache.cordova.Device"/>
        <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
        <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
        <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
        <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
        <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
        <plugin name="File" value="org.apache.cordova.FileUtils"/>
        <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
        <plugin name="Notification" value="org.apache.cordova.Notification"/>
        <plugin name="Storage" value="org.apache.cordova.Storage"/>
        <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
        <plugin name="Capture" value="org.apache.cordova.Capture"/>
        <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
        <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
        <plugin name="Echo" value="org.apache.cordova.Echo" />
        <plugin name="Globalization" value="org.apache.cordova.Globalization"/>
        <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>
        <plugin name="Screenshot" value="org.apache.cordova.Screenshot"/>
      </plugins>
    </cordova> 
```

**EDIT-2**
**AndroidManifest.xml**

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:35:13.773

这里缺少很多东西。您需要将[screenshot.java](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Screenshot/v2.0.0/src/org/apache/cordova)文件添加到您的项目中，并在 index.html 中添加对[screenshot.js的引用。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Screenshot/v2.0.0/www)此外，您还需要提供写入本地存储的权限，如此处[所述](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Screenshot/)。

# xml - 从响应中获取 XML 元素

> ID：15977195
> 
> 赞同：0
> 
> 时间：2013-04-12T17:13:33.293
> 
> 标签：xml, vb.net, parsing, xml-parsing, xmlreader

我有以下代码：

```
Using reader As XmlReader = XmlReader.Create(New StringReader(xmlString))
    reader.ReadToFollowing("GridChannel")
    Dim Channel As String = reader.GetAttribute("Channel")
    Dim DisplayName As String = reader.GetAttribute("DisplayName")

    reader.ReadToFollowing("Airings")

    While reader.ReadToFollowing("GridAiring")
        Dim Title As String = reader.GetAttribute("Title")
        Dim EpisodeTitle As String = reader.GetAttribute("EpisodeTitle")
        Dim AiringTDurationime As String = reader.GetAttribute("AiringTDurationime")
        Dim isHD As Boolean = Convert.ToBoolean(reader.GetAttribute("isHD"))
        Dim TVRating As String = reader.GetAttribute("TVRating")
    End While

    reader.MoveToElement()
    reader.ReadToFollowing("ImageGrid")
    Dim ImageUrl As String = reader.GetAttribute("ImageUrl")

End Using 
```

我的 XML 看起来像这样：

```
<GetGridScheduleResult xmlns="http://api.rovicorp.com/v9/listings" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Locale="en-US" ServiceId="5122" Name="Cityhere - Comcast" StartDate="2013-04-12T14:18:24.2054325Z" Duration="240">
<GridChannels>
  <GridChannel ServiceId="890138" SourceId="1280" Order="20002" Channel="2" CallLetters="WGNAMER" DisplayName="WGNAMER" SourceLongName="WGN America" Type="24-Hours" SourceType="Basic" ParentNetworkId="0" IconAvailable="false" IsChannelOverride="false" SourceAttributes="0">
    <ChannelSchedules/>
    <SourceAttributeTypes/>
    <Airings>
        <GridAiring ProgramId="35951" SeriesId="3490" Title="Matlock" EpisodeTitle="Santa Claus" AiringTime="2013-04-12T14:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="drama" Sports="false"/>
        <GridAiring ProgramId="828869" SeriesId="1409" Title="In the Heat of the Night" EpisodeTitle="Hatton's Turn" AiringTime="2013-04-12T15:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
        <GridAiring ProgramId="978338" SeriesId="1409" Title="In the Heat of the Night" EpisodeTitle="Hatton's Turn" AiringTime="2013-04-12T16:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
        <GridAiring ProgramId="4210626" Title="WGN Midday News" AiringTime="2013-04-12T17:00:00Z" Duration="60" Color="Color" AiringType="New" CC="true" LetterBox="false" Stereo="true" HD="false" SAP="false" TVRating="None" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="News" Subcategory="newscast" Sports="false"/>
        <GridAiring ProgramId="878716" SeriesId="1028666" Title="Walker, Texas Ranger" EpisodeTitle="El Coyote, Part 2" AiringTime="2013-04-12T18:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="true" HD="false" SAP="false" TVRating="TV-14@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
    </Airings>
    <ChannelImages>
        <ImageGrid ImageUrl="http://cps-static.rovicorp.com/2/Open/TV%20Guide%20Widget%20Logos/WGN_2010.png" ImageId="427700" ImageTitle="WGN America" ImageCaption="Widget Logo" ObjectId="1280" ObjectName="WGN America" ImageCreditDisplay="false" ImageType="Station Logo" ImageHorizontalResolution="92" ImageVerticalResolution="36" ImageFormatId="0" AspectRatio="5:2" ParentImageId="16818227">
            <ObjectType>Source</ObjectType>
            <ImageFormat xsi:nil="true"/>
            <ImageExpiryDateTime xsi:nil="true"/>
            <LastUpdate>2012-01-24T15:20:46.453Z</LastUpdate>
        </ImageGrid>
    </ChannelImages>
  </GridChannel>
  etc etc...
</GridChannels>
</GetGridScheduleResult> 
```

我在**ImageUrl中得到****Nothing**作为值。为了深入了解该元素并获取这些值，我缺少什么？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:28:55.907

那是因为以下循环：

```
While reader.ReadToFollowing("GridAiring")
    Dim Title As String = reader.GetAttribute("Title")
    Dim EpisodeTitle As String = reader.GetAttribute("EpisodeTitle")
    Dim AiringTDurationime As String = reader.GetAttribute("AiringTDurationime")
    Dim isHD As Boolean = Convert.ToBoolean(reader.GetAttribute("isHD"))
    Dim TVRating As String = reader.GetAttribute("TVRating")
End While 
```

`GridAiring`在找到最后一个元素后将文件读取到末尾。

试试看：

```
Using reader As XmlReader = XmlReader.Create(New StreamReader("Input.txt"))
    reader.ReadToFollowing("GridChannel")
    Dim Channel As String = reader.GetAttribute("Channel")
    Dim DisplayName As String = reader.GetAttribute("DisplayName")

    reader.ReadToFollowing("Airings")

    While reader.Read() AndAlso Not reader.NodeType = XmlNodeType.Element
    End While

    While reader.Name = "GridAiring"
        Dim Title As String = reader.GetAttribute("Title")
        Dim EpisodeTitle As String = reader.GetAttribute("EpisodeTitle")
        Dim AiringTDurationime As String = reader.GetAttribute("AiringTDurationime")
        Dim isHD As Boolean = Convert.ToBoolean(reader.GetAttribute("isHD"))
        Dim TVRating As String = reader.GetAttribute("TVRating")

        reader.ReadToNextSibling("GridAiring")
    End While

    reader.MoveToElement()
    reader.ReadToFollowing("ImageGrid")
    Dim ImageUrl As String = reader.GetAttribute("ImageUrl")

End Using 
```**

# java - 许多 selectOneMenu 在不同的行中相互依赖

> ID：15977196
> 
> 赞同：0
> 
> 时间：2013-04-12T17:13:45.780
> 
> 标签：java, jsf, selectonemenu

我有很多行（在表格中）。
在第一行中，我有三个 selectOneMenu：

1.  第一个包含大陆的名称

2.  第二个包含城镇的名称（取决于在第一个 selectOneMenu 中选择的大陆）

3.  第三个包含村庄的名称（这取决于在第二个 selectOneMenu 中选择的拖车）

在第二行和下一行中，它是相同的三个 selectOneMenu，但具有其他值。

所有这些 selectOneMenu 都使用转换器。像这样

```
<p:selectOneMenu id="id" value="#{xValue}"  converter="xConverter" >
    <f:selectItem itemLabel="-----"  />
    <f:selectItems value="#{lstItemsForSelectOneMenu}" />
    <p:ajax event="valueChange" listener="#{xChange()}" update="thingsToUpdate"/>
</p:selectOneMenu> 
```

我的问题是转换器`xConverter`在方法之前执行`xChange()`。

以下示例解释了为什么这对我来说是个问题：

如果用户在第一行选择：
1.Continent : `America` 2\. Town: `Washington` 3\. Village:`Baltimore`
在第二行中他选择
1.Continent : `Africa` 2\. Town: `Tunisia` 3\. Village:`Sfax`

选择后`Sfax`他立即返回到第一行第二个selectOneMenu，在这种情况下，系统怎么知道用户已经选择了转换器第一行的selectOneMenu？

谢谢

# c# - 使用 DocX 库在 DOCX 文件中查找表

> ID：15977202
> 
> 赞同：4
> 
> 时间：2013-04-12T17:14:12.893
> 
> 标签：c#, winforms, docx

我已经下载并开始使用[DocX 库](http://docx.codeplex.com/)。我有一个名为的文档`template.docx`正在加载到内存中。我在该文档中有一个表格，其中包含`id = 241`. 我想通过其 id 获取该表并向其添加行。我怎样才能做到这一点？这是我的代码：

```
using (DocX document = DocX.Load("template.docx"))
{
    int tableId = 241, i = 0;
    Table t = //here I need to find the table

    foreach(DataGridViewRow row in produseFacturate.Rows)
    {
         i++;

         //here I want to add rows to the table
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T08:48:52.690

我自己找到了解决方案。

因为，`document.Tables`是一个列表，我可以这样称呼它：

```
Table t = document.Tables[3]; // I found out that the table index is actually 3; 
```

# compiler-construction - 在 flex 中定义标记“int matrix”

> ID：15977204
> 
> 赞同：-5
> 
> 时间：2013-04-12T17:14:21.327
> 
> 标签：compiler-construction, bison, flex-lexer

我正在尝试在 flex 中定义两个标记。第一个返回“tINTTYPE”，当它在输入中看到字符串“int”时返回，另一个是“TINTTYPE”，当它在输入中看到“int matrix”时返回。

这是我的 flx 文件的相关部分：

```
int {yylval.type_id.Type=1;return tINTTYPE;}
int[ \t\n]+matrix {yylval.type_id.Type=2;return tINTMATRIXTYPE;} 
. return yytext[0]; 
```

问题是，当输入是**int matrixm=4;** 扫描仪将其识别为**int 矩阵 m=4；**并返回 tINTMATRIXTYPE，但实际上，我们有一个名为 matrixm 的整数类型，我希望它被识别为 this，即它应该返回 tINTTYPE。我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:42:31.240

```
int                       {yylval.type_id.Type=1;return tINTTYPE;}
int[ \t\n]+matrix[ \t\n]+ {yylval.type_id.Type=2;return tINTMATRIXTYPE;} 
. return yytext[0]; 
```

# javascript - JavaScript 自定义排序函数来确定字母的优先级

> ID：15977206
> 
> 赞同：3
> 
> 时间：2013-04-12T17:14:24.527
> 
> 标签：javascript, performance, sorting

我已经有一个排序数组（最多可以包含 1,000 个项目），我只想获取以指定字符开头的项目块并将它们移动到顶部。

```
// Before sort
{ "alpha", "beta", "delta", "delta frequency", "gamma", "theta" } 

// After sort with "d" as the specified letter
{ "delta", "delta frequency", "alpha", "beta", "gamma", "theta" } 
```

我对 JavaScript 不够熟悉，不知道有什么好方法可以做到这一点。我的第一个想法是遍历每个项目并查看指定起始字符的索引是否为“0”以找到第一个和最后一个数组索引，并将该范围移动到数组的顶部，但这似乎可能是浪费。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:24:49.310

```
var array = [ "alpha", "beta", "delta", "delta frequency", "gamma", "theta" ];
var startingWithD = array.filter(function(s) {
    return s[0] == "d";
});
var others = array.filter(function(s) {
    return s[0] != "d";
});
array = startingWithD.concat(others); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:36:05.987

这是一个选项：

```
function sortWithPriority(arr, letter) {
    var numFound = 0,
        i = arr.length,
        cur;
    while (i-- > numFound) {
        cur = arr[i];
        if (cur.charAt(0).toLowerCase() === letter.toLowerCase()) {
            arr.unshift(arr.splice(i, 1)[0]);
            numFound++;
            i++;
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/kU8wK/](http://jsfiddle.net/kU8wK/)

它将删除以指定字母开头的任何项目，并将其移动到数组的开头。所以数组被修改到位。

它可以很容易地修改为允许传递项目必须以开头的字符串（不仅仅是字母）。

**更新：**

至于性能，当谈到这个问题的当前答案时，这种方法似乎是最快的。

这是我所做的性能测试：http: [//jsperf.com/sort-with-letter-priority](http://jsperf.com/sort-with-letter-priority)

它使用一个包含数百个按字母顺序排列的项目的数组（比 10 个左右更好的测试用例）。它可能不是生成数组的最佳方法，但它可以正确执行，并且该部分与实际时序无关（它在时序之外运行）。

请注意，我的函数被修改为不使用`toLowerCase`，因此在将第一个字母与目标字母进行比较时，所有函数都应该“相等”。当然，如果你想让它更准确，如果数组中项目的第一个字母可能是大写的（或者你传递一个大写字母），你必须同时使用`toLowerCase`两者**来**获得准确的比较。对于性能测试，我忽略了所有测试用例的这种可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:37:59.193

这是一个排序算法，它实际上将对以“d”开头的数组加权字符串进行排序。请注意，我稍微重新排列了起始数组，以表明排序工作正常。

```
array = [ "beta", "alpha", "delta frequency", "delta 2", "delta 1", "delta", "gamma", "theta" ];
array.sort(function(a,b) {
    if (a[0] == "d" && b[0] != "d") {
        return -1
    }
    if (b[0] == "d" && a[0] != "d") {
        return 1;
    }
    return a > b;
});

console.log(array); 
```

[http://jsfiddle.net/ryanbrill/RqfgL/](http://jsfiddle.net/ryanbrill/RqfgL/)

# django-cms - Django CMS 自定义插件不呈现模板

> ID：15977210
> 
> 赞同：3
> 
> 时间：2013-04-12T17:14:31.670
> 
> 标签：django-cms

运行全新安装的 django-cms 2.4.0-RC1、django 1.5.1 和 python 2.7。我正在尝试使用单个字段创建一个非常简单的自定义插件。该插件在管理员中注册并且工作正常。它成功存储在数据库中。它只是没有在我的模板中呈现。

我已经验证了 render_template 路径并尝试使用硬编码的绝对路径。我尝试过覆盖 CMSSelectDegreeLevelPlugin 中的渲染方法。

我是否忽略了一些明显的东西？我之前做过非常相似的插件（在不同版本的 django-cms 中）并且没有遇到任何问题。

**模型.py：**

```
from cms.models.pluginmodel import CMSPlugin
from django.db import models

class SelectDegreeLevel(CMSPlugin):
    degree_level = models.CharField('Degree Level', max_length=50) 
```

**cms-plugins.py**

```
from cms.plugin_base import CMSPluginBase
from cms.plugin_pool import plugin_pool
from django.utils.translation import gettext_lazy as _
from models import SelectDegreeLevel

class CMSSelectDegreeLevelPlugin(CMSPluginBase):
    model = SelectDegreeLevel
    name = _('Degree Level')
    render_template = "cms/plugins/select_degree_level.html"

plugin_pool.register_plugin(CMSSelectDegreeLevelPlugin) 
```

**select_degree_level.html**

```
<h1>static text test {{ instance.degree_level }}</h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:55:39.923

我认为你的领域不在上下文中。我通常通过这种方式进行操作。将此功能添加到您的 CMSSelectDegreeLevelPlugin 类

```
# Way to decide what comes in the context
def render(self, context, instance, placeholder):
        extra_context = {
            'degree_level': instance. degree_level,
        }
        context.update(extra_context)
        return context

# Simplest Way
def render(self, context, instance, placeholder):
    context['instance'] = instance
    return context 
```

[您也可以在文档中阅读更多信息](http://docs.django-cms.org/en/2.4.0.rc1/extending_cms/custom_plugins.html#storing-configuration)

# c# - 从 Android 调用到 C# 的服务不起作用

> ID：15977217
> 
> 赞同：4
> 
> 时间：2013-04-12T17:14:48.157
> 
> 标签：c#, android, web-services, post, web

我想做的是将我的图像从 Android 发送到我的 C# 网络服务。在 Android 方面，我没有收到任何错误和警告，但在服务上没有任何可显示的内容，它根本没有真正获取图像。

我对这种方式的服务仍然特别陌生，因此将不胜感激任何帮助！

我的**Android** AsyncTask 看起来像这样：

```
@Override
        protected String doInBackground(File... file) {

            String imageDescriptionTemp = "Photo Temp Description.";
            String PostRequestUri = "https://demo.relocationmw.com/ws_docmgmt/Service1.svc";
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(PostRequestUri);
            FileBody bin1 = new FileBody(file[0]);
            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("Image", bin1);
            post.setEntity(entity);
            HttpResponse response;
            try {
                response = client.execute(post);
                resEntity = response.getEntity();
                final String response_string = EntityUtils.toString(resEntity);
                if(resEntity != null){
                Log.i("RESPONSE", response_string); 
                }
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        } 
```

那里只是调用服务器上的服务文件，发送图像以及很快的描述和所有内容。

这是我的**C#**服务代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.IO;
using System.Drawing;
using System.Drawing.Imaging;
using System.Xml;

// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
public class Service1 : IService1
{
    #region vars
    XmlDocument doc = new XmlDocument();// Create the XML Declaration, and append it to XML document
    XmlElement root;

    #endregion

    public Stream GetImage(string path)
    {
        FileStream stream = File.OpenRead(@System.Web.Hosting.HostingEnvironment.MapPath("~/attachments/test/") + "SrvTest.jpg");
        WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg";
        return stream as Stream;
    }

    public XmlDocument UpImage(string path, Stream filecontents)
    {

        XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", null, null);

        doc.PreserveWhitespace = true;

        doc.AppendChild(dec);// Create the root element

        root = doc.CreateElement("UpImage");

        doc.AppendChild(root);

        XmlElement xml_item;
        xml_item = doc.CreateElement("Response");

        Image img = System.Drawing.Image.FromStream(filecontents);
        img.Save(System.Web.Hosting.HostingEnvironment.MapPath("~/attachments/test/") + "SrvTest.jpg", ImageFormat.Jpeg);

        XmlElement item;
        item = doc.CreateElement("Success");
        item.InnerText = "Success";
        xml_item.AppendChild(item);

        return doc;

    }
} 
```

这应该接受我的文件并返回一个带有 SUCCESS 的 XML 供我记录。再次，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:48:31.013

假设该服务是可操作的，您的问题可能在于 WCF 在流的开头添加了一个 MIME 标头这一事实。

这意味着接收的字节数似乎比发送的字节数长。

我在这里找到了一个很好的例子： [http](http://www.ideatoappster.com/android-to-wcf-streaming-multi-part-binary-images/) ://www.ideatoappster.com/android-to-wcf-streaming-multi-part-binary-images/ 在标题下：**WTF？！当我在 WCF 中读取 Stream 时，我的二进制数据包含的字节数比从 Android 发送时多**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:55:48.290

假设您的应用程序是加载到 IE 中的常见 html 表单，并准确发送该表单将发送的内容。这样您就可以使用一个简单的测试表单来测试您的服务器组件。

首先，编写一个向您的服务提交图像的纯 html 表单。使用 type 属性设置为“file”的 input 元素，并确保为元素命名，而不仅仅是 id ...

一旦您可以确认 html 表单发布成功，您就会知道问题出在您的 android 客户端代码中。

如果问题出在您的 android 代码中，请检查正文的内容。看到它不为空等，然后检查是否正确设置了 Content-Type 和 Content-Disposition 标头。

如果上述所有测试都通过，请检查帖子的边界线。几年前，我两次差点被这个问题脱轨。（不可见的字符数。）

这是一个很好的例子：[Uploading image to server in Multipart with JSON data in Android](https://stackoverflow.com/questions/5416038/uploading-image-to-server-in-multipart-along-with-json-data-in-android)

虽然它有不同的后端（Java），但 http 规则是相同的。

-布兰登

# vb6 - 验证文本框中的用户输入

> ID：15977225
> 
> 赞同：1
> 
> 时间：2013-04-12T17:15:29.367
> 
> 标签：vb6

用户在`txtAmount`TextBox 中提供值，我稍后以这种方式处理：

```
c = txtAmount.Text 'GET AN ERROR HERE BECAUSE I NEED C TO BE AN  INT 
```

我希望用户能够更正输入的值，所以我可以得到`c`一个整数：

```
If Not (IsNumeric(txtAmount.Text)) Then
  lblMsg.Caption = " Please enter you answer numericly "
  txtAmount.Text = ""
  txtAmount.SetFocus 'HERE IS WHAT I WANT TO FIX
End If
If (txtAmount.Text = "") Then
  lblMsg.Caption = " Please enter amount to convert"
  txtAmount.SetFocus
End If 
```

在处理输入的值之前，我应该在哪里放置验证码以便调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:59:33.630

下面是一个示例项目来说明我的意思：

```
'1 form with:
'  1 textbox: name=Text1
Option Explicit

Private Sub Text1_KeyPress(KeyAscii As Integer)
  KeyAscii = NrOnly(KeyAscii)
End Sub

Private Function NrOnly(intKey As Integer) As Integer
  Dim intReturn As Integer
  intReturn = intKey
  Select Case intKey
    Case vbKeyBack        'allow backspace
    Case vbKey0 To vbKey9 'allow numbers 0 to 9
    Case Else             'block all other input
      intReturn = 0
  End Select
  NrOnly = intReturn
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:52:58.903

您可以选择在键入时对其进行验证。为此，请使用如下更改事件：

```
Private Sub txtAmount_Change()

    On Error GoTo ErrManag

    If txtAmount.Text = "" Then Exit Sub
    If Not ((CInt(txtAmount.Text) >= 0) And (CInt(txtAmount.Text) <= 10)) Then MsgBox " Some max-min-error message"

ErrManag:

    If Err.Description <> "" Then
        MsgBox Err.Description 'This will prompt the error if a char is inserted
    End If

End Sub 
```

在此示例中，用户将有机会更正它，但如果他没有，您必须稍后在单击“发送”按钮时重新检查它，就像 Hrqls 建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T06:20:46.007

```
Private Sub txtName_Validate(Cancel As Boolean)
   If txtName.Text = "" Then
      MsgBox "Please enter your name!", vbExclamation, ""
      Cancel = True
   End If
End Sub 
```

当 Cancel 参数为`True`时，输入焦点回到`txtName`控件。

```
Private Sub txtPhone_Validate(Cancel As Boolean)
   If Len(txtPhone.Text) < 10 Then
      MsgBox "Enter the phone number in 10 digits!", vbExclamation, ""
      Cancel = True
   End If
End Sub 
```

`txtPhone`在这种情况下，当 Cancel 参数设置为 时，输入焦点会移回控件`True`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-06T09:08:42.510

您可以在文本框控件的验证事件中输入语句。在输入框中时，它会自动验证文本框中的数据，以便可以识别插入的数据

# java - 在 PreparedStatement 中使用“DEFAULT”值

> ID：15977228
> 
> 赞同：2
> 
> 时间：2013-04-12T17:15:42.240
> 
> 标签：java, mysql, prepared-statement, default

我有两张桌子：

```
CREATE TABLE possible_noise 
    (id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT, text VARCHAR(50) NOT NULL, 
    PRIMARY KEY(id)); 
```

和

```
CREATE TABLE diagnostic
    (id BIGINT UNSIGNED NOT NULL, 
    noise SMALLINT UNSIGNED DEFAULT NULL, 
    friction ....., 
    FOREIGN KEY (noise) 
    REFERENCES possible_noise(id), 
    FOREIGN KEY(friction) ...... ); 
```

第一个表是噪声测试可能值的表，其中“文本”是一些文本值，例如“噪声正常”或“太大声”或类似的东西。第二个表是带有产品 id 和 x 列的产品表，其中所有列都用于一种类型的测试。如果测试未完成，则为 NULL

* * *

这是我的问题：

当我需要使用这样的东西时......

```
PreparedStatement prepState = conn.prepareStatement("UPDATE diagnostic SET noise=?, diagnostic_result=?, software_version=?, .... WHERE id=?;"); 
```

...并且需要放 NULL

```
prepState.setInt(2, java.sql.Types.INTEGER) 
```

它抛出错误：

> 无法添加或更新子行：外键约束失败 ( `eps_remanufacturing_system`. `diagnostic`, CONSTRAINT `diagnostic_ibfk_3`FOREIGN KEY ( `noise`) REFERENCES `possible_noise`( `id`))

我的问题 ：

是否有可能如何在preparedStatement中使用sql（[http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)）中的DEFAULT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:19:00.323

您必须用 DEFAULT 替换占位符：

```
...
SET noise=DEFAULT
... 
```

# java - 油漆（）如何工作

> ID：15977233
> 
> 赞同：0
> 
> 时间：2013-04-12T17:15:57.957
> 
> 标签：java, applet, paint

谁能简单地告诉我java小程序中的paint()方法是如何工作的？比如，什么时候调用，怎么调用？因为有时它会被多次调用，我不知道这是怎么发生的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:20:15.927

要理解这一点，您需要了解 Applet Lifecycle..

小程序的生命周期：

Applet 类中的四个方法为您提供了构建任何重要小程序的框架：

1) init：此方法适用于您的小程序所需的任何初始化。在applet标签内的param标签被处理后调用它。

2）start：该方法在浏览器调用init方法后自动调用。每当用户在离开到其他页面后返回到包含小程序的页面时，也会调用它。

3) stop：当用户离开小程序所在的页面时，会自动调用此方法。因此，它可以在同一个小程序中重复调用。

4）destroy：该方法只在浏览器正常关闭时调用。因为applet 是要存在于HTML 页面上的，所以通常不应在用户离开包含applet 的页面后留下资源。

5)**绘制：在 start() 方法之后立即调用，也可以在小程序需要在浏览器中重新绘制自身的任何时候调用。paint() 方法实际上继承自 java.awt。**

第二种情况，**paint() 调用是在程序调用 repaint() 或 update() 时生成的。** repaint() 方法是由程序调用来进行绘图的方法。它们是此方法的 4 个版本，但通常使用不带参数的版本。通过 repaint() 进行绘制通常是为了响应用户输入。

**repaint() ==> update() ==（通常调用）==> paint()**

repaint() 不直接调用paint()。它安排对中间方法 update() 的调用。最后， update() 调用paint() （除非您覆盖更新）。

# php - 多用户级别角色可见内容 wordpress 和 buddypress

> ID：15977234
> 
> 赞同：0
> 
> 时间：2013-04-12T17:16:00.647
> 
> 标签：php, wordpress, buddypress

我正在尝试使某些内容仅对特定角色可见，但它似乎不适用于多个用户角色。

这是我用来尝试使其与多个用户角色一起使用的代码：

`if ( user_can( bp_displayed_user_id(), 'level_10','level_1' ) ) {`

这是唯一一个可以正常工作的：

`if ( user_can( bp_displayed_user_id(), 'level_10' ) ) {`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:31:33.957

您是否在 WordPress Codex 中查看过此功能的说明。[在这里](http://codex.wordpress.org/Function_Reference/user_can)。如您所见，此函数不允许使用第三个参数。

所以你需要这样写：

```
if ( user_can( bp_displayed_user_id(), 'level_10' ) || user_can( bp_displayed_user_id(), 'level_1' ) ) { 
```

# jquery - 多个 JQuery 事件；想使用 $(this)

> ID：15977241
> 
> 赞同：1
> 
> 时间：2013-04-12T17:16:26.307
> 
> 标签：jquery, this, multiple-instances

我在同一个文档中有两个相同的事件，但只有一个有效，另一个无效。此代码显示相同的 ID，这是一个愚蠢的疏忽，我使用了不同的 ID，但无济于事。

如何使用 $(this) 来影响这两个事件？

这是我的代码。

```
<fieldset class="clear">
    <div class="auth_98">
        <legend>Is this a conference?</legend>
        <input class="authradio" type="radio" name="conf" id="confyes" value="yes">
        <label>Yes</label>
        <input class="authradio" type="radio" name="conf" value="no" checked="checked">
        <label>No</label>
        <!-- begin Conference Toggle -->
        <script>
            $(document).ready(function() {
                $('.hideme').hide()
                $('.authradio').change(function() {
                    var $stat = $('#confyes')[0].checked;
                    if ($stat == true) $('.hideme').slideDown();
                    else $('.hideme').slideUp();
                });
            });
        </script>
        <!-- end Conference Toggle -->
        <!-- hidden conference section -->
        <div class="hideme">
            <div class="auth_50">
                <legend>Conference Role</legend>
                <input class="authradio" type="radio" name="conference" value="Atendee" checked="checked">
                <label>Attendee</label>
                <input class="authradio" type="radio" name="conference" value="Presenter">
                <label>Presenter</label>
                <input class="authradio" type="radio" name="conference" value="invitedspeaker">
                <label>Invited Speaker</label>
            </div>
            <div class="auth_50">
                <label>
                    <legend>Conference Website</legend>
                </label>
                <input class="authurl" type="url" placeholder="www.amazingsciencestuff.com">
            </div>
        </div>
    </div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:38:08.930

您不应该有 2 个元素具有相同的 id，因此如果您尝试将该代码应用于同一 html 的 2 个实例，则`$('#confyes')`选择器只会找到该 id 的第一个实例。

您可以使用类选择器`.authradio`，然后导航 dom 以找到`.hideme`要显示的关联 div。我假设你想要这样的东西

```
$('.authradio').change(function() {
    if ($(this).val() == 'yes') 
        $(this).parent().find('.hideme').slideDown();
    else 
        $(this).parent().find('.hideme').slideUp();
}); 
```

[小提琴](http://jsfiddle.net/AWXMW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:30:28.790

问题是代码有一个带有 id 的输入（confyes）。如果该代码的实例不止一个，则该 id 的实例不止一个，这是不允许的。每个实例都需要一个唯一的 ID。

当使用诸如 $('#confyes') 这样的 ID 选择器时，jQuery 选择器将始终只作用于 id 的第一个实例。也许第一个是 confyes_98，第二个是 confyes_99。或者，也许您可​​以使用类而不是 ID。

# jquery - jQuery - 从 xml 加载图像在 chrome 中不起作用

> ID：15977242
> 
> 赞同：1
> 
> 时间：2013-04-12T17:16:26.790
> 
> 标签：jquery, xml, image, google-chrome

我正在尝试基于 XML 将图像加载到屏幕上。这是我正在使用的 xml

```
<item>
    <heading>Heading 1</heading>
    <content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fringilla tempus   varius. Nulla facilisi. In nisi leo, commodo id vestibulum non, mollis quis justo. Nunc elementum feugiat gravida. Praesent condimentum nisi id sapien placerat sed posuere velit fringilla. Curabitur ac purus odio. </content>
    <image>image.jpg</image>
</item>
<item>
   <heading>Heading 2</heading>
   <content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fringilla tempus varius. Nulla facilisi. In nisi leo, commodo id vestibulum non, mollis quis justo. Nunc elementum feugiat gravida. Praesent condimentum nisi id sapien placerat sed posuere velit fringilla. Curabitur ac purus odio. </content>
   <image>image.jpg</image>
</item> 
```

我正在用这样的 jQuery 检索元素。

```
$.get('feed1.xml', function(xml) {
     $(xml).find('item').each(function() {
     content+= "\<li class=\"paginate\"\>";
     content+= '\<img src=\"' + $(this).find('image').text() + '\"\/\>';
     content+= "\<h3\>" + $(this).find('heading').text() + "\<\/h3\>" ;
     content+= "\<p\>" + $(this).find('content').text() + "\<\/p\>";
     content+="\<\/li\>";
 }); 
```

这在 Firefox 中运行良好。然而，在 Chrome 和 IE 中，“标题”和“内容”按预期加载，但图像部分返回一个空字符串。我调试了一下，发现如果我只是将元素名称“图像”更改为其他名称，那么相同的代码在 Chrome 中也可以工作。然后我做了一点console.log 来了解后台发生了什么。

```
 $(xml).find('item').children().each(function(){
   console.log((this).nodeName);
 }); 
```

这回来了，

```
HEADING
CONTENT
IMG 
```

在 chrome 中，而 FF 保留了元素名称。

我还尝试将源代码更改为此 content+= '\';

但这也不起作用。

任何想法为什么 Chrome 将元素名称“图像”更改为“img”？另外，为什么当它存在于 DOM 中时它无法定位对象“img”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:08:19.687

我尝试了相同的示例，并在您的 xml 中发现了问题。

XML 文件必须是

```
<?xml version="1.0" encoding="utf-8"?>
<hello>
<item>
    <heading>Heading 1</heading>
    <content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fringilla tempus   varius. Nulla facilisi. In nisi leo, commodo id vestibulum non, mollis quis justo. Nunc elementum feugiat gravida. Praesent condimentum nisi id sapien placerat sed posuere velit fringilla. Curabitur ac purus odio. </content>
    <image>image.jpg</image>
</item>
<item>
   <heading>Heading 2</heading>
   <content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fringilla tempus varius. Nulla facilisi. In nisi leo, commodo id vestibulum non, mollis quis justo. Nunc elementum feugiat gravida. Praesent condimentum nisi id sapien placerat sed posuere velit fringilla. Curabitur ac purus odio. </content>
   <image>image.jpg</image>
</item>
</hello> 
```

所以你的jQuery代码工作正常......

如果你仍然有问题，那么你可以使用这个

```
$.get('feed1.xml', function(xml) {
         $(xml).find('item').each(function() {
         content+= "<li class='paginate'>";
         content+= "<img src='" + $(this).find("image").text() + "'/>";
         content+= "<h3>" + $(this).find("heading").text() + "</h3>" ;
         content+= "<p>" + $(this).find("content").text() + "</p>";
         content+="</li>";
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:34:49.770

试着告诉它期望什么数据类型。

```
$.get('feed1.xml', function(xml) {
     $(xml).find('item').each(function() {
     content+= "\<li class=\"paginate\"\>";
     content+= '\<img src=\"' + $(this).find('image').text() + '\"\/\>';
     content+= "\<h3\>" + $(this).find('heading').text() + "\<\/h3\>" ;
     content+= "\<p\>" + $(this).find('content').text() + "\<\/p\>";
     content+="\<\/li\>";
 }, dataType: "xml"); 
```

jQuery`get`函数是函数的简写`ajax`。我猜在 jQuery 的内部，chrome 实现猜测文档的类型是 html 而不是 xml，并且可能用“img”替换“image”。

# file - 如何制作可执行的文本文件

> ID：15977245
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:16:48.730
> 
> 标签：file, ubuntu, executable

我正在使用 Ubuntu，我想制作一个可执行的文本文件。我看过一些可执行文本文件的源代码，但我似乎无法理解任何东西。有人可以显示一些显示可执行文本文件结构的代码。更具体地说，我正在尝试为应用程序启动一个 .class 文件。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:53:53.397

我猜你正在寻找[UnityLaunchers](https://help.ubuntu.com/community/UnityLaunchersAndDesktopFiles)。

# java - Dropwizard - 组织你的项目，理解术语等

> ID：15977248
> 
> 赞同：17
> 
> 时间：2013-04-12T17:16:51.887
> 
> 标签：java, http, rest, dropwizard

我正在学习使用 Dropwizard。我能够按照快速入门指南运行基本的 REST API。

在本[文档](https://dropwizard.github.io/dropwizard/0.7.1/docs/manual/core.html#organizing-your-project)中，有一个名为“组织您的项目”的部分。

它建议将您的项目组织为以下部分：project-api、project-client、project-service。

这是我的问题/疑问：

1.  请概括地解释“api”、“服务”和“客户端”之间的区别。

2.  有没有使用 dropwizard 严格遵循上述约定的示例？

3.  “...project-client 应该使用这些类和 HTTP 客户端来为您的服务实现一个成熟的客户端” --- 既然 'project-service' 将具有 REST API，那么我们为什么需要使用 HTTP 客户端?

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T18:56:09.290

1.  Dropwizard 建议您遵循以下项目结构：

    {project_name}（即具有以下模块的父级）

    *   {project_name}-api ：应该包含您在项目中使用的所有值对象/POJO。
    *   {project_name}-client ：应包含用于从外部休息服务获取数据的客户端代码。可以排除，如果你没有。
    *   {project_name}-service ：包含剩余的（服务、配置、资源、dao...等）。
2.  您可能会发现[此](https://github.com/bucharest-jug/dropwizard-todo)示例很有帮助，即使客户端部分是空的。

3.  正如第 1 点中对客户端的简短描述中所述，如果您的项目有任何对外部休息服务的调用，那么相关的（HTTP）客户端代码应该放在客户端模块中。否则排除模块本身。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-10T12:12:47.577

1) **api** - 顾名思义，它是在项目中定义为 Representations(Pojo -Json/Xml) 的接口/合约。这些模型定义了您的 API 合约，可以与使用您的 API 的不同项目共享。

2）**服务**——实际的业务逻辑和持久性。表示不必与您的实体对象（域对象）相同。这以更清晰的方式拆分您的域和表示。域逻辑将不再与您的表示耦合。尽管这会在对象结构方面造成大量重复。

项目依赖 - 依赖于“api”、“client”

3)**客户端**- 一个 Http 客户端包装器，用于通过使用 HttpClient 或 Jersey 客户端的 HTTP 调用来调用其他 Web 服务。为合约编写基于（最终用户）的测试。

项目依赖 - 依赖于“api”

希望这可以帮助。

# ios - 如何在解除其顶部的 UIViewController 后处理初始 UIViewController

> ID：15977256
> 
> 赞同：0
> 
> 时间：2013-04-12T17:17:43.437
> 
> 标签：ios, objective-c, uistoryboard

m大家好

如果我使用了不正确的术语，请先原谅我。我在使用 viewController 时遇到问题。我有一个通过 navigationController 访问的 viewController（触发的 segues：rootViewcontroller->firstviewcontroller）

现在我在 firstviewcontroller 上，它调用“viewdidLoad”，如果用户没有登录，它会对 loginViewController 执行模态搜索。

在我处理此视图上的登录问题后，我执行

```
 [self.presentingViewController dismissViewControllerAnimated:NO completion:nil]; 
```

它会关闭 logincontroller 并毫无问题地将我带回 firstviewController。

现在我的问题是，这个解除操作 - 毫无疑问 - 不会再次调用“viewDidLoad”（这样我就可以检查用户是否已登录）。我想知道我是否可以在关闭第二个视图控制器后自动调用我的第一个视图控制器的任何部分，以便我可以自动检查登录状态并相应地执行操作。

非常感谢

阿尔达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:37:06.383

您可以覆盖`-viewWillAppear:`firstViewController 中的方法。关闭登录控制器后将调用它。

另一种方法是让您的 firstViewController 成为登录控制器的代表。完成登录过程后，您可以调用委托来关闭呈现的视图控制器并更新子视图

# c - 注意到linux中的一个进程没有显示在进程列表中是怎么发生的？

> ID：15977258
> 
> 赞同：-4
> 
> 时间：2013-04-12T17:17:44.490
> 
> 标签：c, linux, unix, libc

我最近注意到一个隐藏进程，它没有出现在进程列表中，但它消耗 CPU 时间和内存。这是如何发生的，它是如何编写的，它在做什么，我们如何杀死该进程。

**`Is There any way to unhide such process which are hidden`**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:20:45.097

简而言之，您只能使用内核级代码执行此操作。要么你必须从源代码修改你的内核，要么编写一个有很多安全漏洞的应用程序，除非你故意削弱操作系统本身的现有安全功能，否则它不会在现代操作系统上运行。

如果这种追求是学术性的，那么下面的链接应该提供更多帮助。如果您试图做一些恶意的事情，请注意这种方法会失败。

最后，您应该意识到这种进程没有有效或合法的用例，除了某种严厉的 DRM 机制以某种方式削弱操作系统，或者可能故意隐藏某个用户/组拥有的处理重要的进程即使是 ROOT 用户也不应该尝试杀死/终止/杀死的设备驱动程序。在 seLinux、QNX 或将进入具有管理用户访问权限的任务关键型系统的其他东西上，它可能会防止新手/新手管理员自爆。

学分： [https ://unix.stackexchange.com/questions/17164/how-to-make-a-process-invisible-to-other-users](https://unix.stackexchange.com/questions/17164/how-to-make-a-process-invisible-to-other-users)

# java - 如何将我的 *.py 文件转换为 *.class 文件？

> ID：15977260
> 
> 赞同：-6
> 
> 时间：2013-04-12T17:17:49.583
> 
> 标签：java, python, class

我需要将[`.py`](http://en.wikipedia.org/wiki/Python_%28programming_language%29)文件转换为[`.class`](http://en.wikipedia.org/wiki/Java_class_file)文件，以便可以在 Java 环境中使用我的 Python 代码。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:19:10.660

集成 Python 和 Java 的最简单方法是使用[Jython](http://www.jython.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:20:33.747

使用 Jython。它有一个内置编译器将`.py`文件转换`.class`为[.jythonc](http://www.jython.org/archive/21/docs/jythonc.html)。

# jsf - 将 HTML 传递到消息包中

> ID：15977273
> 
> 赞同：2
> 
> 时间：2013-04-12T17:18:42.003
> 
> 标签：jsf, internationalization, seam, jsf-1.2

我正在“国际化”我的应用程序，它基于 SEAM 2 / JSF 1.2

让我烦恼的一件事是在消息包中有 HTML 标记，如果可能的话，我想避免这种情况，例如我有以下 HTML

```
<p>Click <span class="link" id="trigCl">here</span> to register your account.</p> 
```

我想将其分解为以下内容：

```
<h:outputFormat escape="false" value="#{messages['registerAccountText']}">
    <f:param value="<span class='link' id='trigCl'>#{messages['here']}</span>" />
</h:outputFormat> 
```

使用以下捆绑条目：

```
registerAccountText=Click {0} to register your account. 
```

但正如你猜到的那样，我得到以下...

```
The value of attribute "value" associated with an element type "f:param" must not contain the '<' character. 
```

是否有 a) 解决此问题的方法，或 b) 解决此问题的更好方法（不涉及完全重写标记）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:29:50.840

刚刚从无处不在的 BalusC 中发现了一个类似问题的答案，它演示了一种在 f:param 中转义 HTML 的[方法](https://stackoverflow.com/questions/15589583/how-to-use-jsf-navigation-rules-with-resourcebundle-content)

```
<h:outputFormat escape="false" value="#{messages['registerAccountText']}">
    <f:param value="&lt;span class='link' id='trigCl'&gt;#{messages['here']}&lt;/span&gt;" />
</h:outputFormat> 
```

不完全是最干净的解决方案，但在我可以升级到 JSF 2.0 之前，它必须这样做

# sakai - Sakai 偏好工具

> ID：15977274
> 
> 赞同：0
> 
> 时间：2013-04-12T17:18:43.533
> 
> 标签：sakai

我无法在 Sakai2.8.2 中看到偏好工具。是否有任何配置可以在 sakai 中启用首选工具？

请让我知道是否需要这样做。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:41:04.170

默认情况下，Sakai 管理员有一个与管理工作区相同的 My Workspace，但不包含首选项工具。如果您在第一次访问 Mt Workspace 时创建普通用户，`!user`则会创建带有 ID 的站点副本。

您可以使用管理工作区中的站点工具查看站点。

# jquery - 使用 jQuery 对 tr td 进行 jQuery 包装

> ID：15977282
> 
> 赞同：1
> 
> 时间：2013-04-12T17:19:02.377
> 
> 标签：jquery

我正在尝试用新的 tr 包裹我的桌子，然后将所有 td 都放在包裹 tr 内。

我的代码如下：

```
$('.ccbnBgTblTxt td').wrap('<tr class="new"/>'); 
```

我想做的是..这个

```
<tr class="new"><td></td><td></td><td></td></tr> 
```

现在我得到这样的结果。

```
<tr class="new"><td></td></tr><tr class="new"><td></td></tr> 
```

无论如何要包装所有的td？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:20:39.450

尝试使用该`.wrapAll()`功能

```
$('.ccbnBgTblTxt td').wrapAll('<tr class="new"/>'); 
```

# foursquare - 可以使用 Foursquare 获得我附近的城市吗？

> ID：15977285
> 
> 赞同：0
> 
> 时间：2013-04-12T17:19:10.070
> 
> 标签：foursquare

如果我向foursquare api发送经度和纬度，是否可以找到我附近的所有城市？

我一直在看他们的api，但没有看到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:48:03.673

不幸的是，这不是 Foursquare API 支持的东西。

# asp.net - 浏览器关闭后，Asp.Net Cookie 确实存在

> ID：15977289
> 
> 赞同：1
> 
> 时间：2013-04-12T17:19:31.167
> 
> 标签：asp.net, cookies, iis-7, asp.net-4.0

我基本上在做的是创建一个cookie并使用表单身份验证。

这就是我用来创建 cookie 的内容。

```
 Session.Add("username", userName);
            Session.Add("password", passWord);

            FormsAuthenticationTicket tkt;
            string cookiestr;
            HttpCookie ck;
            tkt = new FormsAuthenticationTicket(1, userName, DateTime.Now,
            DateTime.Now.AddMinutes(1), false, "your custom data");
            cookiestr = FormsAuthentication.Encrypt(tkt);
            ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiestr);
            ck.Path = FormsAuthentication.FormsCookiePath;
            Response.Cookies.Add(ck);` 
```

因为我正在登录安全的东西，所以我想要发生的是当浏览器关闭以删除该站点创建的 cookie 时。但是，这不会发生，我可以登录到我网站的安全部分。

我错过了什么？

基本上，如果我登录 /secure/secure.aspx 然后关闭我的浏览器，我可以输入 www.myaddress.com/secure/secure.aspx 并且我会登录。我 100% 肯定它会拒绝如果用户从未登录过，则为用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:25:36.007

该行为由浏览器设置控制。您可以控制作者 cookie 何时过期，但现在何时从客户端计算机中删除。

一种策略是将 cookie 设置为对每个请求在 X 分钟内过期。这样，如果用户在站点上处于非活动状态超过 X 分钟，他们将不得不再次登录。

# haskell - 在 yesod 中呈现应用程序形式

> ID：15977291
> 
> 赞同：1
> 
> 时间：2013-04-12T17:19:38.280
> 
> 标签：haskell, yesod

当我渲染（使用 renderDivs 或 renderTable）一个应用表单时，所有字段都垂直渲染。

我想制作一个包含多行但每行包含多个字段的表单。

我可以在不直接使用 html 的情况下做到这一点吗？

# ajax - 重定向到新 jsp 的新 Ajax.Request 失败。

> ID：15977292
> 
> 赞同：0
> 
> 时间：2013-04-12T17:19:44.863
> 
> 标签：ajax, glassfish, struts, prototype

我有 2 个登录页面，login.jsp 和 loginMobile.jsp。Login.jsp 是默认登录页面，在 web.xml 中配置。
在输入 login.jsp 时，调用了一个 JavaScript 方法 isMobile。

无需更改 URL，需要将请求转发到 loginMobile.jsp。

框架：struts1，AJAX + 原型 + GLASSFISH 3.1.2

2个登录页面：

登录.jsp

```
<script src="scripts/prototype.js" type="text/javascript"></script>
<script src="scripts/login.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8">
    isMobile();
</script>

<html>
<body>
<p> AM IN LOGIN PAGE </p>
</body>
</html> 
```

loginMobile.jsp

```
<script src="scripts/prototype.js" type="text/javascript"></script>
<script src="scripts/login.js" type="text/javascript"></script>

<html>
<body>
<p> AM IN MOBILE PAGE </p>
</body>
</html> 
```

在 login.js 中

```
function isMobile()
{
//check some conditions then call below AJAX
new Ajax.Request('/loginMobile.jsp', { method:'post' });
 } 
```

//没有找到投诉的文件！找不到“C:\Users\dummy\AppData\Roaming\NetBeans\7.2.1\config\GF3\domain1\docroot\loginMobile.jsp”

也试过了

```
function isMobile()
{
//check some conditions then call below AJAX

var athena_login_url =  window.location.href+'/loginMobile.jsp';
new Ajax.Request(athena_login_url, { method:'post' });

} 
```

// 直接进入默认 login.jsp

任何建议表示赞赏。先感谢您。

# javascript - 如果未选中复选框，如何减去一个值

> ID：15977293
> 
> 赞同：1
> 
> 时间：2013-04-12T17:19:49.433
> 
> 标签：javascript

我做了一个计算函数（游戏统计计算器），它工作正常，但是当我取消选中该值时，它不会减去它通过选中框添加的值，我知道代码看起来有点难看，但我是初学者在 JS 中：

```
function MC () {
check=document.getElementById('check').checked;

if(check){

    var hp=Number(document.form.hp.value),
        sp=Number(document.form.sp.value),
        ea=Number(document.form.ea.value),
        ed=Number(document.form.ed.value),
        pa=Number(document.form.pa.value),
        pd=Number(document.form.pd.value);

    var hpSum = 0,spSum=0,eaSum=0,edSum=0,pdSum=0,paSum=0;

    eaSum = ea + 11;
    edSum = ed + 17;
    pdSum = pd + 17;
    paSum = pa + 11;

    document.form.ea.value=eaSum;
    document.form.ed.value=edSum;
    document.form.pa.value=paSum;
    document.form.pd.value=pdSum;
} 

if(check == false){
    eaSum = ea - 11;
    edSum = ed - 17;
    pdSum = pd - 17;
    paSum = pa - 11;

    document.form.ea.value=eaSum;
    document.form.ed.value=edSum;
    document.form.pa.value=paSum;
    document.form.pd.value=pdSum;

    }
}; 
```

当我取消选中 NaN 时它会返回（但它应该是一个数字）。另外请不要认为 MC 应该是我刚刚在那里进行初始化的一项，因为我在这个例子中需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:25:02.343

我会尝试这样的事情：

```
function MC () {
    var check=document.getElementById('check').checked;

    var hp=Number(document.form.hp.value),
        sp=Number(document.form.sp.value),
        ea=Number(document.form.ea.value),
        ed=Number(document.form.ed.value),
        pa=Number(document.form.pa.value),
        pd=Number(document.form.pd.value);

    var hpSum = 0,spSum=0,eaSum=0,edSum=0,pdSum=0,paSum=0;

    if(check){
        eaSum = ea + 11;
        edSum = ed + 17;
        pdSum = pd + 17;
        paSum = pa + 11;
    } else {
        eaSum = ea - 11;
        edSum = ed - 17;
        pdSum = pd - 17;
        paSum = pa - 11;
    }

    document.form.ea.value=eaSum;
    document.form.ed.value=edSum;
    document.form.pa.value=paSum;
    document.form.pd.value=pdSum;
} 
```

您的代码中的一般问题：

*   检查局部变量错过了var；
*   仅当检查变量为真时才初始化其他本地变量，这会导致您报告的 NaN 值；
*   如果你必须检查一个条件和他的对立面，最好是上面的 `if(condition)/else`表格`if(condition)/if(!condition)`；
*   要挑剔：你不会在你的函数中返回任何值，只是设置一些 dom 元素的值
*   您声明`spSum`局部变量，将其设置为 0 并且不使用它。
*   也已`hpSum`声明但未使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:55:51.927

因为您仅在`check`is时才分配变量的值`true`。您必须将它们放在`if`声明中：

```
function MC () {
   // user `var`! Otherwise you're polluting the global scope
   var checked = document.getElementById('check').checked;

   // if it's checked then the `sign` is +, otherwise -.
   var sign = ~-(checked << 1);

   // don't repeat yourself, and cache `form` for a faster access.
   // I assume from your code that `form` is the name of your form, so:
   var form = document.forms["form"]; // reduce ambiguity

   // Unary plus operator: 
   // https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators
   var ea = +form.ea.value;
   var ed = +form.ed.value;
   var pa = +form.pa.value;
   var pd = +form.pd.value;
   // I removed `hp` and `sp` because not used

   // the multiplication operator takes the precedence
   var eaSum = ea + 11 * sign;
   var edSum = ed + 17 * sign;
   var pdSum = pd + 17 * sign;
   var paSum = pa + 11 * sign;

   // set the values back
   form.ea.value = eaSum;
   form.ed.value = edSum;
   form.pa.value = paSum;
   form.pd.value = pdSum;
}; 
```

# controls - 控制显示多行文本？

> ID：15977295
> 
> 赞同：43
> 
> 时间：2013-04-12T17:19:59.670
> 
> 标签：controls, javafx-2

我需要显示多行只读文本 - 可以使用哪个控件？它应该只显示文本，就像标签一样，但是标签不支持多行？

感谢您的任何提示:-)

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-13T00:43:29.180

您可以在[`Label`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Label.html).

如果文本中有`\n`（换行符）字符，则标签将换行到换行符所在的新行。

如果标签已[`wrapText`](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#wrapTextProperty)设置为 true 并且没有足够的空间来显示单行文本，则标签会将文本换行到新行。

* * *

如果您想要不同样式的文本，那么，如果使用 JavaFX 2，请将多个标签放在 a 中[`FlowPane`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/FlowPane.html)，或者，如果您使用 Java 8+，则将标签放在一个[`TextFlow`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/TextFlow.html)组件中。

* * *

![爱情观](https://i.stack.imgur.com/Qbv8f.png)

由以下代码产生：

```
import javafx.scene.Scene;

import javafx.application.Application;
import javafx.scene.control.Label;
import javafx.scene.image.*;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class LoveMeNot extends Application {

  public static void main(String[] args) throws Exception { launch(args); }

  @Override public void start(final Stage stage) throws Exception {
    Label label = new Label(WORDS);
    label.setWrapText(true);
    label.setStyle("-fx-font-family: \"Comic Sans MS\"; -fx-font-size: 20; -fx-text-fill: darkred;");

    ImageView image = new ImageView(IMAGE);
    image.setOpacity(0.3);

    StackPane layout = new StackPane();
    layout.setStyle("-fx-background-color: mistyrose; -fx-padding: 10;");
    layout.getChildren().setAll(image, label);

    stage.setTitle("Love Me Not");
    stage.setScene(new Scene(layout));
    stage.show();
  }

  // creates a triangle.
  private static final String WORDS = 
    "Love not me for comely grace,\n" +
    "For my pleasing eye or face,\n" +
    "Nor for any outward part,\n" +
    "No, nor for my constant heart,\n" +
    "For these may fail, or turn to ill.\n" +
    "So thou and I must sever.\n" +
    "Keep therefore a true woman’s eye,\n" +
    "And love me still, but know not why,\n" +
    "So hast thou the same reason still\n" +
    "To doat upon me ever.";

  private static final Image IMAGE = 
    new Image("http://icons.iconarchive.com/icons/artdesigner/gentle-romantic/256/rose-icon.png");
} 
```

尝试运行上述程序并调整窗口大小以查看`\n`标签文本中新行值的效果以及标签上的`wrapText`属性。将设置从 true 更改为 false，以查看打开和关闭`wrapText`之间的区别。`wrapText`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-27T20:18:48.297

如果你为你的 设置一个你想要的最大宽度`Label`，那么你设置`setWrapText`为`true`它显示文本多行：

```
Label label = new Label("Your long text here");
label.setMaxWidth(180);
label.setWrapText(true); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-21T07:09:12.223

您也可以使用[`Text`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/Text.html)多行显示，[`wrappingWidthProperty`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/Text.html#wrappingWidthProperty--)根据您的需要进行设置。

```
Text text = new Text();
text.wrappingWidthProperty().set(345); 
```

在这段代码中，我将最大宽度设置为`345.0`，所以当文本的大小超过`345`像素时，将被换行到下一行。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-30T17:16:23.300

> 如果文本中包含 \n （换行符）字符，则标签将在换行符所在的任何位置换行。

当您从 FXML 文件和可视 FXML 编辑器设置文本时，它不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-24T22:04:45.313

文本类也可用。这个答案中的一个很好的解释[label-and-text-differences-in-javafx](https://stackoverflow.com/a/24389619/5353824)基本上在没有输入的地方使用 Text，否则 Label 更好。

# c# - ASP.NET 页面周期的实用观点

> ID：15977296
> 
> 赞同：0
> 
> 时间：2013-04-12T17:20:02.537
> 
> 标签：c#, asp.net, webforms

我有如下表格：

```
<form id="form1" runat="server">
<div>
    <asp:PlaceHolder ID="plcHolder" runat="server">        
    </asp:PlaceHolder>

    <asp:Button ID="btnSubmit" Text="submit" runat="server" 
        onclick="btnSubmit_Click" />
</div>
</form> 
```

这是我的代码：

```
protected string FetchDataFromDatabase()
{
    return "some long string";
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    { 
        this.plcHolder.Controls.Add(new Label() { Text = FetchDataFromDatabase() } );
    }
} 
```

`Page_Load()`从数据库中获取一个长字符串。

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    this.plcHolder.Controls.Add(new Label() { Text = "new text" });
} 
```

我`Button`将新文本添加到我的页面。但是，当我单击按钮时，我只看到字符串“新文本”，但我正在寻找两个文本（“一些长字符串新文本”）。

我不想在每次单击按钮时调用我的数据库，因为文本已经加载到页面中。我如何实现这一目标？

我知道这个例子看起来有点奇怪，这是因为我试图给出最小的工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:23:28.353

在加载中，当你从数据库中获取值时，将其存储在 Session 中：

```
Session["textFromDatabase"] = GetTextFromDatabase(); 
```

然后在这两个地方利用该价值。因此，如果您在点击中，您会说：

```
... Text = Session["textFromDatabase"] + " new text"; 
```

现在您可以在不是回发时从数据库中获取值，就像您所说的那样，但可以一遍又一遍地利用它。

而且我很确定，根据您所说，这与您想要的条件相反，抛出一个！在它面前：

```
if (Page.IsPostBack) 
```

# linux - 将 stderr 从 mbuffer 获取到变量

> ID：15977302
> 
> 赞同：0
> 
> 时间：2013-04-12T17:20:25.060
> 
> 标签：linux, bash, variables, stdout, stderr

当`mbuffer`在接收端完成时，它会打印我想进入的时间和`$time`速度`$speed`。

试图实现[这个](https://stackoverflow.com/a/963857)答案

```
#!/bin/bash
exec 3>&1 4>&2 #set up extra file descriptors
error=$( { mbuffer -v 0 -4 -s 128k -m 1G -I 8023 3>&1 4>&2 > /tank3/fs5/tst; } )
exec 3>&- 4>&- # release the extra file descriptors
echo "The message is \"${error}\"" 
```

执行此操作并在另一个终端中执行

```
echo secret | mbuffer -4 -s 128k -m 1G -O localhost:8023 
```

我明白了

```
# ./fff 

summary:  0.0 KiByte in  0.1 sec - average of  0.0 KiB/s
The message is ""
secret 
```

我希望在`""`.

**问题**

我假设摘要消息必须打印到 STDERR，因为我将 STDOUT 管道传输到文件，并且其内容是正确的。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:58:54.050

尝试这个：

```
#!/bin/bash
exec 3>&1
error=$({ mbuffer options >&3 ; } 2>&1)
exec 3>&-
echo "The message is \"${error}\"" >&2 
```

这将通过 mbuffer 将标准输入管道传输到标准输出，并将处理后的标准错误写入标准错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:10:51.253

我想你可能试图应用错误的解决方案。你提到的那个处理了一个更复杂的问题。如果您的目标是将标准输出定向到文件并捕获标准错误，那么应该这样做（是的，将标准错误映射到标准输出然后标准输出到文件是违反直觉的，但这就是重定向的工作原理，您将流 2 发送到流 1 的位置指向那一刻，即标准输出）

```
error=$(mbuffer -v 0 -4 -s 128k -m 1G -I 8023 2>&1 > /tank3/fs5/tst)
echo "The message is \"${error}\"" 
```

# c++ - 如何在我的二进制文件中包含调试信息？

> ID：15977308
> 
> 赞同：1
> 
> 时间：2013-04-12T17:20:42.623
> 
> 标签：c++, visual-studio-2008, pdb

我有一个使用 VS2008 的 C++ 应用程序，我想将调试信息包含到二进制文件中，这样我就不需要在我的应用程序中发布“.pdb”文件。我的应用程序使用了 dgbhelp.dll，我确实需要这些调试信息，以便在发生异常时获取源代码行号。但是如果没有“.pdb”文件，我的应用程序无法获取行号，如果我可以将“.pdb”文件中的调试信息包含到二进制文件中会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:43:10.123

根据文档，您需要`/Z7`代替`/Zi`. （虽然我从未尝试过。）

# c - 如何用 grep 解决“错误：未知类型名称 'boolean'”

> ID：15977312
> 
> 赞同：2
> 
> 时间：2013-04-12T17:20:53.467
> 
> 标签：c

我正在尝试使用 Android [NDK](http://developer.android.com/tools/sdk/ndk/index.html)编译项目并收到以下错误...

> 错误：未知类型名称“布尔”

我假设我缺少一个标题或一些描述布尔值的标题。但是，我似乎找不到它。有没有一种简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:28:33.483

这似乎对我有用：

```
grep -r "typedef boolean" ./ 
```

# java - 如何让搜索栏响应方法

> ID：15977313
> 
> 赞同：0
> 
> 时间：2013-04-12T17:21:02.517
> 
> 标签：java, android, xml

我正在创建一个音板 Android 应用程序，以便更多地了解应用程序背后发生的事情。

目前在一个名为 ChangeSounds 的活动中有三个搜索栏。它们控制音量、平移和播放速度。我编写了一个名为 SoundManager 的 java 文件来处理这些参数。我正处于将 soundManager 的功能链接到 ChangeSounds 活动的阶段，但我不知道应该如何去做。我应该使用意图吗？或者我应该使用广播接收器？任何帮助将不胜感激。

ChangeSounds.java

```
package com.example.beatpadmaker;

// Importing necessary libraries
import android.app.Activity;
import android.os.Bundle;

public class ChangeSounds extends Activity {

// sets the layout to changesounds
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.changesounds);  
} 
```

更改声音.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/metalbackground"
android:orientation="vertical" >

<!-- Creates the settings text -->
<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/titlesettings"
    android:textColor="#FFFFFF"
    android:textSize="30sp" >
</TextView>

<!-- Creates the volume text -->
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/volumebar"
    android:textColor="#FFFFFF" >
</TextView>

<!-- Creates the seekbar for volume -->
<SeekBar 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" 
    android:id="@+id/VolBar1" 
    android:max="100" 
    android:progress="100">
</SeekBar>

<!-- Creates the balance text -->
<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/balance"
    android:textColor="#FFFFFF" >
</TextView>

<!-- Creates the seekbar for audio balance -->
<SeekBar 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:max="200" 
    android:id="@+id/BalBar" 
    android:progress="100">
</SeekBar>

<!-- Creates the speed text -->
<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/speed"
    android:textColor="#FFFFFF" >
</TextView>

<!-- Creates the seekbar for speed -->
<SeekBar 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:id="@+id/SpeedBar" 
    android:max="200" 
    android:progress="100">    
</SeekBar>

</LinearLayout> 
```

声音管理器.java

```
package com.example.beatpadmaker;

//Importing necessary libraries
import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;

public class SoundManager {

//Initialising all variables    
private Context pContext;
private SoundPool sndPool;
private float rate = 1.0f;
private float masterVolume = 1.0f;
private float leftVolume = 1.0f;
private float rightVolume = 1.0f;
private float balance = 0.5f;

// Constructor that is used to setup the audio manager and store the  application context
public SoundManager(Context appContext)
{
  sndPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 100);
  pContext = appContext;
}

// Load up a sound and return the id
public int load(int sound_id)
{
    return sndPool.load(pContext, sound_id, 1);
}

// Play a sound
public void play(int sound_id)
{
    sndPool.play(sound_id, leftVolume, rightVolume, 1, 0, rate);    
}   

// Set volume values based on existing volume value
public void setVolume(float vol)
{
    masterVolume = vol;

    if(balance < 1.0f)
    {
        leftVolume = masterVolume;
        rightVolume = masterVolume * balance;
    }
    else
    {
        rightVolume = masterVolume;
        leftVolume = masterVolume * ( 2.0f - balance );
    }

}

// Determine the speed of audio playback
public void setSpeed(float speed)
{
    rate = speed;

    // Speed of zero is invalid 
    if(rate < 0.01f)
        rate = 0.01f;

    // Speed has a maximum of 2.0
    if(rate > 2.0f)
        rate = 2.0f;
}

// Recalculate volume levels
public void setBalance(float balVal)
{
    balance = balVal;
    setVolume(masterVolume);
}

// Releases the soundpool's contents
public void unloadAll()
{
    sndPool.release();      
}

} 
```

主菜单.java

```
package com.example.beatpadmaker;

//Importing necessary libraries
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.media.AudioManager;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;

public class MainMenu extends Activity {

//Initializing all variables as well as a tag string for testing my life cycle in logcat
private static final String TAG= MainMenu.class.getSimpleName();
SoundManager snd;
int sound1, sound2, sound3, sound4, sound5, sound6, sound7, sound8, sound9, sound10, sound11, sound12;
OnSeekBarChangeListener barChange;
OnClickListener buttonClick;

//Creating the layout
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu); 

Log.d(TAG, "onCreate() called!");   

// Create an instance of our sound manger
snd = new SoundManager(getApplicationContext()); 

// Set volume rocker mode to media volume
this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

// Load the samples from res/raw as oggs
sound1 = snd.load(R.raw.sound1);
sound2 = snd.load(R.raw.sound2);
sound3 = snd.load(R.raw.sound3);
sound4 = snd.load(R.raw.sound4);
sound5 = snd.load(R.raw.sound5);
sound6 = snd.load(R.raw.sound6);
sound7 = snd.load(R.raw.sound7);
sound8 = snd.load(R.raw.sound8);
sound9 = snd.load(R.raw.sound9);
sound10 = snd.load(R.raw.sound10);
sound11 = snd.load(R.raw.sound11);
sound12 = snd.load(R.raw.sound12);

// Create a seek bar handler
barChange = new OnSeekBarChangeListener() 
{
    @Override
    public void onStopTrackingTouch(SeekBar seekBar) 
    {   

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) 
    {  

    }
    //Creating the three cases for the different seekbars to get the progress of volume, balance and speed
    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) 
    {
        switch (seekBar.getId())
        {
         case R.id.VolBar1:
             snd.setVolume((float)progress/100.0f);
             break;

         case R.id.BalBar:
             snd.setBalance((float)progress/100.0f);
             break;

         case R.id.SpeedBar:
             snd.setSpeed((float)progress/100.0f);
             break;
        }
    }
};

}

// Button listener assigned in XML layout
public void clickHandler(View v)
{
    int id = v.getId(); 
    // Use the button id to determine which sample should be played

    switch (id)
    {
     case R.id.button1:
     snd.play(sound1);
     break;

     case R.id.button2:
     snd.play(sound2);
     break;

     case R.id.button3:
     snd.play(sound3);
     break;       

     case R.id.button4:
     snd.play(sound4);
     break;       

     case R.id.button5:
     snd.play(sound5);
     break;       

     case R.id.button6:
     snd.play(sound6);
     break;

     case R.id.button7:
     snd.play(sound7);
     break; 

     case R.id.button8:
     snd.play(sound8);
     break;

     case R.id.button9:
     snd.play(sound9);
     break; 

     case R.id.button10:
     snd.play(sound10);
     break; 

     case R.id.button11:
     snd.play(sound11);
     break; 

     case R.id.button12:
     snd.play(sound12);
     break;    
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:24:01.343

在 onCreate() 中，使用

`SeekBar bar = (SeekBar) findViewById(R.id.volume);`

然后在上面设置监听器。

`bar.setOnSeekBarChangeListener(barChangeListener);`

确保如果你这样做，你定义了侦听器。

```
private OnSeekBarChangeListener barChangeListener = new OnSeekBarChangeListener() {
    // implement abstract methods 
} 
```

# c++ - 如何设置属性表的背景颜色

> ID：15977315
> 
> 赞同：0
> 
> 时间：2013-04-12T17:21:07.930
> 
> 标签：c++, windows, propertysheet

如何更改属性表的背景颜色？我可以通过处理 WM_CTLCOLOR... 消息来更改实际页面的颜色，但属性表的选项卡和其他部分似乎超出了我的能力范围。

回调中可能有什么东西吗？

这是我在页面对话框中处理 WM_CTLCOLOR 消息时的样子。

![在此处输入图像描述](https://i.stack.imgur.com/ijBG6.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:02:56.517

众所周知，标签控件很难使用。您可能必须实现一个所有者绘制的选项卡控件才能获得所需的自定义级别。

# r - 求给定区间内标准正态分布的均值

> ID：15977316
> 
> 赞同：5
> 
> 时间：2013-04-12T17:21:12.590
> 
> 标签：r, mean, normal-distribution

我想找到给定区间内标准正态分布的平均值。

例如，如果我将标准正态分布分成两个 ([-Inf:0] [0:Inf]) 我想得到每一半的平均值。

以下代码几乎完全符合我的要求：

```
divide <- 2
boundaries <- qnorm(seq(0,1,length.out=divide+1))
t <- sort(rnorm(100000))
means.1 <- rep(NA,divide)
for (i in 1:divide) {
    means.1[i] <- mean(t[(t>boundaries[i])&(t<boundaries[i+1])])
  } 
```

但我需要一种更精确（和优雅）的方法来计算这些数字（means.1）。

我尝试了以下代码，但它不起作用（可能是因为我缺乏概率知识）。

```
divide <- 2
boundaries <- qnorm(seq(0,1,length.out=divide+1))
means.2 <- rep(NA,divide)
f <- function(x) {x*dnorm(x)}
for (i in 1:divide) {
  means.2[i] <- integrate(f,lower=boundaries[i],upper=boundaries[i+1])$value
} 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:03:33.980

问题是 dnorm(x) 在区间（-Inf 到 0）中的积分不是 1，这就是你得到错误答案的原因。要更正，您必须将得到的结果除以 0.5（积分结果）。像：

```
func <- function(x, ...) x * dnorm(x, ...)
integrate(func, -Inf, 0, mean=0, sd=1)$value / (pnorm(0, mean=0, sd=1) - pnorm(-Inf, mean=0, sd=1)) 
```

适应不同的间隔应该很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:29:04.253

谢谢回答我的问题。

据我了解，我结合了所有答案：

```
 divide <- 5
    boundaries <- qnorm(seq(0,1,length.out=divide+1))
# My original thinking        
    t <- sort(rnorm(1e6))
    means.1 <- rep(NA,divide)
    for (i in 1:divide) {
        means.1[i] <- mean(t[((t>boundaries[i])&(t<boundaries[i+1]))])
      }    

# Based on @DWin
    t <- sort(rnorm(1e6))
    means.2 <- tapply(t, findInterval(t, boundaries), mean)

# Based on @Rcoster
    means.3 <- rep(NA,divide)
    f <- function(x, ...) x * dnorm(x, ...)
    for (i in 1:divide) {
      means.3[i] <- integrate(f, boundaries[i], boundaries[i+1])$value / (pnorm(boundaries[i+1]) - pnorm(boundaries[i]))
    }   

# Based on @Kith
    t <- sort(rnorm(1e6))
    means.4 <- rep(NA,divide)    
    for (i in 1:divide) {
      means.4[i] <- fitdistr(t[t > boundaries[i] & t < boundaries[i+1]], densfun="normal")$estimate[1]
    } 
```

# 结果

```
>   means.1
[1] -1.4004895486 -0.5323784986 -0.0002590746  0.5313539906  1.3978177100
>   means.2   
[1] -1.3993590768 -0.5329465789 -0.0002875593  0.5321381745  1.3990997391 
>   means.3
[1] -1.399810e+00 -5.319031e-01  1.389222e-16  5.319031e-01  1.399810e+00
>   means.4
[1] -1.399057073 -0.531946615 -0.000250952  0.531615180  1.400086731 
```

我相信@Rcoster 是我想要的。与我的相比，休息是创新的方法，但仍然是近似的。谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:56:25.047

您可以结合使用 fitdistr 和向量索引。

这是一个如何获取正值的均值和标准差的示例：

```
library("MASS")
x = rnorm(10000)
fitdistr(x[x > 0], densfun="normal") 
```

或者只是区间 (0,2) 中的值：

```
fitdistr(x[x > 0 & x < 2], densfun="normal") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T18:00:18.550

假设您的切点是 -1、0、1 和 2，并且您对模拟标准法线的截面的平均值感兴趣。

```
 samp <-   rnorm(1e5)
 (res <- tapply(samp, findInterval(samp, c( -1, 0, 1, 2)), mean) )
#         0          1          2          3          4 
#-1.5164151 -0.4585519  0.4608587  1.3836470  2.3824633 
```

请注意，标签可以改进。一项改进可能是：

```
names(res) <-  paste("[", c(-Inf, -1, 0, 1, 2, Inf)[-6],  " , ", 
                      c(-Inf, -1, 0, 1, 2, Inf)[-1], ")", sep="")
> res
[-Inf , -1)    [-1 , 0)     [0 , 1)     [1 , 2)   [2 , Inf) 
 -1.5278185  -0.4623743   0.4621885   1.3834442   2.3835116 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T18:05:48.470

使用**distrEx**和**distr**包：

```
library(distrEx)
E(Truncate(Norm(mean=0, sd=1), lower=0, upper=Inf))
# [1] 0.797884 
```

（有关`vignette(distr)`distr**套件**和相关包的出色概述，请参阅**distrDoc**包。）

* * *

`lb`或者，仅使用基数 R，这是一个替代方案，它在和之间的区间内构造期望的离散近似值`ub`。调整近似矩形的底边，使它们都具有相等的面积（即，一个点落在每个矩形中的概率相同）。

```
intervalMean <- function(lb, ub, n=1e5, ...) {
    ## Get x-values at n evenly-spaced quantiles between lower and upper bounds
    xx <- qnorm(seq(pnorm(lb, ...), pnorm(ub, ...), length = n), ...)
    ## Calculate expectation
    mean(xx[is.finite(xx)])
}

## Your example
intervalMean(lb=0, ub=1)
# [1] 0.4598626

## The mean of the complete normal distribution
intervalMean(-Inf, Inf)
## [1] -6.141351e-17

## Right half of standard normal distribution
intervalMean(lb=0, ub=Inf)
# [1] 0.7978606

## Right half of normal distribution with mean 0 and standard deviation 100
intervalMean(lb=0, ub=Inf, mean=0, sd=100)
# [1] 79.78606 
```

# mysql - MySQL选择特定的行值作为列名

> ID：15977322
> 
> 赞同：1
> 
> 时间：2013-04-12T17:21:31.553
> 
> 标签：mysql, sql, pivot

这是我的基本`participants`表（显示为关联数组）：

```
[id] => 1
[campaign_id] => 41
[firstname] => Jeff
[lastname] => Berube 
```

在另一个名为 的表上`participants_custom`，我可以添加多个属于`participants`一行的自定义数据。像这样：

```
[id] => 51
[participant_id] => 1
[name] => textfield_bh423vjhgv
[data] => qwerty1

[id] => 52
[participant_id] => 1
[name] => textfield_IDRr2kzjZR59Xjw
[data] => qwerty2

[id] => 53
[participant_id] => 1
[name] => textfield_6kj5bhjjg
[data] => qwerty3 
```

我目前正在制作一个`join`，但它将唯一的`name`,`participant_id`和添加`data`到我的行中。我想要的是我的查询返回如下内容：

```
[id] => 1
[campaign_id] => 41
[firstname] => Jeff
[lastname] => Berube
[textfield_bh423vjhgv] => qwerty1
[textfield_IDRr2kzjZR59Xjw] => qwerty2
[textfield_6kj5bhjjg] => qwerty3 
```

其中行值`name`变成一列，并且`value`，它的值。**我怎样才能做到？**

我找到[了 this](https://stackoverflow.com/questions/13985470/mysql-how-to-display-row-value-as-column-name-using-concat-and-group-concat)和[this](https://stackoverflow.com/questions/10925445/mysql-select-dynamic-row-values-as-column-names-another-column-as-value)，但没有成功。我正在寻找一种适合我情况的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:34:01.567

```
SELECT  a.ID,
        a.Campaign_ID,
        a.FirstName,
        a.LastName,
        MAX(CASE WHEN b.data = 'qwerty1' THEN b.Name END) qwerty1,
        MAX(CASE WHEN b.data = 'qwerty2' THEN b.Name END) qwerty2,
        MAX(CASE WHEN b.data = 'qwerty3' THEN b.Name END) qwerty3
FROM    Participants a
        INNER JOIN Participants_Custom b
            ON a.ID = b.Participant_ID
GROUP   BY  a.ID,
            a.Campaign_ID,
            a.FirstName,
            a.LastName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/f9602/1)

**更新 1**

由于 的值`data`是未知的，因此更倾向于使用*动态 sql 。*

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN b.data = ''',
      data,
      ''' THEN b.Name ELSE NULL END) AS ',
      CONCAT('`',data, '`')
    )
  ) INTO @sql
FROM Participants_Custom;

SET @sql = CONCAT('SELECT  a.ID,
                           a.Campaign_ID,
                           a.FirstName,
                           a.LastName,', @sql, 
                  'FROM     Participants a
                            INNER JOIN Participants_Custom b
                                ON a.ID = b.Participant_ID
                    GROUP   BY  a.ID,
                                a.Campaign_ID,
                                a.FirstName,
                                a.LastName');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/f9602/4)

# c# - 如何将项目文件保存为包？

> ID：15977323
> 
> 赞同：0
> 
> 时间：2013-04-12T17:21:33.317
> 
> 标签：c#, visual-studio-2012, bundle, product

我正在开发一个需要将一些数据和图像一起保存到项目文件中的应用程序。我假设这个项目文件必须是某种捆绑包。例如，音频编辑器 Cakewalk SONAR 中的项目文件。

更准确地说，我正在开发一个创建琐事游戏的应用程序。当用户将游戏项目作为最终的“最终产品”导出时，它将包括文本和图像。这是我要创建的“捆绑包”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:38:24.027

您始终可以将文件保存到文件夹并使用一些存档器，例如带有密码的 zip。您可以将文件扩展名重命名为 .bnd 或 .prd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T15:26:44.913

文件，另存为...，选择“Sonar Bundle (.CWB)”作为文件类型。

# angularjs - 加载时的angularjs值不正确

> ID：15977327
> 
> 赞同：6
> 
> 时间：2013-04-12T17:21:38.000
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap

看到这个[笨蛋](http://plnkr.co/edit/jUaXmSCyb0aEdixb5SN4?p=preview)

我想在一个`input`（用于与 angularui bootstrap typeahead 交互）上使用对象模型。从预先输入的内容中选择某些内容时，它可以完美运行，但在加载时会显示`[object Object]` 如何获取输入以在加载时显示模型对象的属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-06T05:20:44.590

以防万一其他人像我一样降落在这里，`[object Object]`在某些输入中显示...

在我的例子中，我`form`使用与模型属性相同的名称来命名元素，如下所示：

```
<form name="contact">
   <input type="text" ng-model="contact.name" />
   <input type="text" ng-model="contact.email" />
</form> 
```

将表单更改`name`为其他名称，或更改模型名称。

当 Angular`$scope`使用与 同名的属性填充 时`form`，它会覆盖模型实例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:56:58.530

我也遇到了这个问题，文档没有显示如何挂钩引导`updater`回调。

我通过将初始值设置为字符串来做到这一点。当您在字段模型中键入时将是一个字符串。当您从下拉列表中选择时，它将是对象

```
app.controller('MainCtrl', function($scope) {
  $scope.data = [{id:1,name:"google"}, {id:2, name:"microsoft"}];
  $scope.selected = '';

  $scope.$watch('selected',function(newVal,oldVal){    
    if(newVal && angular.isObject($scope.selected)){
      console.log($scope.selected)
    }
  })
}); 
```

[普朗克](http://plnkr.co/edit/aT5GATjCkqTYd4JZHs5N?p=preview)

也许有更好的方法使用指令的属性，但不确定那是什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:14:05.717

事实证明，ui-bootstrap 中目前存在一个错误，该错误已在 master 中修复，并且很快就会出现。我还误解了 ui-bootstrap 构建文件，并且在我的应用程序中包含了模板化和非模板化版本。

我猴子修补了我的 ui-bootstrap 并切换到仅模板化，它现在对我有用。

见谷歌小组[讨论](https://groups.google.com/forum/#!msg/angular-ui/MjsKEwgkxM0/_OSFQ_K9CvcJ)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-18T04:37:50.603

Angularjs 表单在表单字段中加载时显示 [object Object]

仅当您的表单名称和 ng-model 名称（值）相同时才会发生

# boolean-logic - SAT真实编程场景

> ID：15977329
> 
> 赞同：0
> 
> 时间：2013-04-12T17:21:47.907
> 
> 标签：boolean-logic, smt

我阅读了有关 SAT 和 SMT 的信息。我一直想知道如何将它应用到实际的编程场景中。

这是一个例子：

鉴于这`var a = 20; var b = a;`是真的，我们想知道`b = 20`是真的还是假的。

我应该如何将其转换为布尔代数表达式并应用 SAT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-11T09:28:27.753

这是使用许多 SMT 求解器支持的 SMT-LIB 2.0 标准的最简单示例：

```
(declare-fun a () Int)
(declare-fun b () Int)
(assert (= a b))
(assert (= a 20))
(assert (= b 20))
(check-sat) 
```

您可以使用[http://rise4fun.com/z3](http://rise4fun.com/z3)进行试验。它将响应“sat”，表示可以满足断言，这意味着 b*可以*是 20。

然后您可以将 (assert (= b 20)) 替换为 (assert (distinct b 20))。Z3 将以“unsat”响应，这意味着 b 不可能是其他任何东西。

# c# - 有没有类似控制台应用程序的企业库模式和实践的东西？

> ID：15977334
> 
> 赞同：0
> 
> 时间：2013-04-12T17:22:14.830
> 
> 标签：c#, exception-handling, console-application, enterprise-library

是否有类似[Enterprise Library Patterns & Practices](http://msdn.microsoft.com/en-us/library/ff632023.aspx)的东西可用于控制台应用程序？我正在专门寻找用于记录/发送异常电子邮件通知的东西，而不是在每个块上调用一个`SendExceptionMail`函数。`catch`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:56:50.917

我将[log4Net](http://logging.apache.org/log4net/)用于此类事情，我通常使用多个附加程序配置可执行文件并`Console.Write()`完全省去。我通常（至少）有一个

*   `ColoredConsoleAppender`或`ConsoleAppender`登录到控制台
*   `RollingFileAppender`创建一个日志文件。

只需添加一个`SmtpAppender`即可通过电子邮件发送事件。根据需要添加其他附加程序以记录到 Windows 事件日志或 SQL 数据库。

有关一些配置示例，请参阅[http://logging.apache.org/log4net/release/config-examples.html](http://logging.apache.org/log4net/release/config-examples.html)。

顺便说一句……为什么需要多个`catch`块？`catch`除非您实际上正在*处理*异常，否则您不应该做任何事情——尽管有一些异常：我建议在跨越进程或机器边界的点捕获、记录和继续异常。

相反，让异常冒出来。有一个记录异常的单`catch`。`Main()`简单得多。

# cloud-foundry - VCAP - 我在哪里可以访问 VCAP 上已部署的应用程序文件

> ID：15977336
> 
> 赞同：0
> 
> 时间：2013-04-12T17:22:27.557
> 
> 标签：cloud-foundry

我想知道 VCAP 上的位置，在那里我可以找到任何已部署应用程序的完整目录结构。我知道可以通过 vmc 文件访问相同的内容，但我想知道存储应用程序文件的物理位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:42:08.893

找到它 - 应用程序文件结构位于 /var/vcap.local/dea/apps

# java - 为什么我在使用 Eclipse(Android) 时仍然无法使用片段？

> ID：15977344
> 
> 赞同：1
> 
> 时间：2013-04-12T17:23:16.920
> 
> 标签：java, android, tabs, fragment, swipe

首先，我已经升级到 API-21，包括 eclipse android 工具包和 SDK。
我想使用片段功能并且仍然想支持那些
我知道我必须使用支持库 - v4 的 2.x 手机。
但问题是当我创建一个Android项目时，它总是显示“导航类型“滚动标签+滑动”需要最低SDK版本至少11，当前最低版本为8”。
我该如何解决这个棘手的问题？

=================================== 我的设置： 最低要求 SDK：API 8 目标 SDK： API 17 编译：API 17

=======================================

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:41:59.147

Eclipse 的项目模板利用了需要许多 API（主要是`ActionBar`）的特性，而这些特性不是由支持库提供的。虽然您可以将`Fragments`, 与支持库一起使用，但您没有与 API 关联的其他功能。

不过，您仍然可以自己实现滑动/滚动选项卡。但是，您必须手动创建它们（而**不是**使用 Eclipse 的内置项目模板）。

您将需要使用[android.support.v4.view.PagerTabStrip](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)、[android.support.v4.view.ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)和[android.support.v4.app.Fragment](http://developer.android.com/reference/android/support/v4/app/Fragment.html)。文档非常清楚，应该为您指明正确的方向。

# batch-file - 从命令提示符调用 SQLite3 中的多个命令

> ID：15977347
> 
> 赞同：5
> 
> 时间：2013-04-12T17:23:26.433
> 
> 标签：batch-file, sqlite

我希望能够制作一个批处理文件，它将遍历目录中的每个文件并将其导入到 SQlite3 中。我遇到的问题是 SQlite3 不接受来自命令提示符/批处理的多个命令，只接受 1 个命令。

我试过的是：

```
 for %%f in (./tmp/*.csv) do (
     echo %%f
     sqlite3 database.db ".separator '|'" ".import './tmp/%%f' Dirs"
 ) 
```

而且我收到了太多选项错误，因为它只需要一个命令，而我需要超过 1 个。

我也无法编写第二个由 sqlite3 调用的文本文件，因为每次迭代都会更改导入的文件。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:52:23.357

您可以使用该[选项](http://linux.die.net/man/1/sqlite3) `-separator`来设置分隔符（其默认值已经是`|`）。

如果你真的需要执行多个命令，你可以将它们写入一个文件`.read`，或者`echo`将它们全部写入文件并将它们通过管道传输到`sqlite3`.

# gcc - 如何在 Linux 内核中生成简单的链接器警告？

> ID：15977349
> 
> 赞同：0
> 
> 时间：2013-04-12T17:23:29.310
> 
> 标签：gcc, linker, linux-kernel, linker-warning

我在 linux 内核中打开了 ld 选项 --fatal-warning 。如何生成简单的链接器警告来测试此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:48:03.747

```
#include<stdio.h>

int main()
{

    printf("Run !!");
    static const char warning[] __attribute__((section(".gnu.warning.printf")))="My sweet linker warning";
    return 0;
} 
```

将此另存为 test.c

如果您使用以下方法构建它：

```
gcc -Wl,--fatal-warnings test.c -o my_exe 
```

您应该收到链接器警告，它不会准备“my_exe”

现在尝试：

```
gcc -Wl,--no-fatal-warnings test.c -o my_exe 
```

在这种情况下，警告将按原样报告，但不会被视为错误，它会为您准备“my_exe”。

我不确定您所说的“打开”到底是什么意思，但是如果您看到上述行为，那么我想您很好。

如果您正在使用内核源代码做某事，那么您需要将 printf 替换为您在源代码中已有的任何函数名称（同时更改 .gnu.warning 部分名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T19:50:50.700

谢谢大家的建议。我浏览了makefile，发现了一些抑制警告的链接器标志。我刚刚删除了它们以生成 ld 警告。

# css - 我可以将不可编辑的文本放入纯 CSS 的表单字段中吗？

> ID：15977350
> 
> 赞同：1
> 
> 时间：2013-04-12T17:23:31.367
> 
> 标签：css, forms, user-input

我正在尝试制作一个看起来像的表单输入字段

![表单域](https://i.stack.imgur.com/cPP5k.png)

其中 domain.com/username/ 是不可编辑的文本（不会作为表单数据提交），但用户可以在其末尾键入他们想要的内容。我知道我可以为此使用 Javascript，但有没有一种干净、非 hacky 的方式来单独使用 CSS 呢？当然，用户名的大小会有所不同，因此可编辑文本需要从正确的位置开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:43:40.507

如果您不需要默认的浏览器样式输入并且可以编辑 HTML，您可以像这样创建自定义字段 - [http://jsfiddle.net/Aprillion/aJQ6M/](http://jsfiddle.net/Aprillion/aJQ6M/)：

HTML：

```
<label class="looks_like_input">
  domain.com/username/
  <input type="text" value="all-about-kitties">
</label> 
```

CSS：

```
.looks_like_input {
    border: 1px inset;
    font-weight: bold;
}
.looks_like_input input {
    border: 0;
    font-weight: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:28:05.470

为什么不只是标记 domain.com/username/ 然后输入？

把它放在你的 CSS 中

```
#page{float:left;}
#box{border:1px inset; height:30px;}
.text_field{border:none;} 
```

这在 HTML 中

```
<div id="page">
<div id="box">
<input class="text_field" style="float:right; min-width:50px;width:50px;max-width:130px;text-align:left;" size="5" onkeyup="this.size=this.value.length+1;this.style.width='auto'" type="text">
<label class="prefix_for_input" style="float:right;">http://millerpath.tumblr.com/</label>
</div>
</div> 
```

你可能想在这里解决一些问题。

# c# - 试图从 sql 表中删除值中的空格

> ID：15977351
> 
> 赞同：1
> 
> 时间：2013-04-12T17:23:32.220
> 
> 标签：c#, sql

我正在将表格中的数据加载到文本框中，并且得到空格。我尝试将 rtrim 放在 select 语句中，但是当我这样做时，我收到一条错误消息，提示“列不属于表”。我也尝试过 textbox.text.trim() 并且也没有删除空格。任何帮助，将不胜感激。

```
SqlCommand sqlcom = new SqlCommand("SELECT rtrim(firstname), lastname, address, addresstwo, city, state, zip, phone, email FROM CustomerTbl WHERE customerrid =" + intCustomerid, AppClass.thisConnect);

SqlDataReader sqldataR = sqlcom.ExecuteReader();
DataTable dt = new DataTable("customer");

dt.Load(sqldataR);

AppClass.thisConnect.Close();

txtFirstname.Text = dt.Rows[0]["firstname"].ToString(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:26:15.653

在您的陈述中添加一个`AS`子句`SELECT`。

```
SELECT rtrim(firstname) AS trimmedFirstName 
```

例如。然后确保在代码中使用该列名。

```
txtFirstname.Text = dt.Rows[0]["trimmedFirstName"].ToString(); 
```

# wpf - 特定 DataType 的特定控件

> ID：15977354
> 
> 赞同：2
> 
> 时间：2013-04-12T17:23:53.343
> 
> 标签：wpf, xaml, listbox

我有一个包含不同类型对象的列表：

```
 List<object> myList = new List<object>();
    DateTime date = DateTime.Now;
    myList.Add(date);
    int digit = 50;
    myList.Add(digit);
    myList.Add("Hello World");
    var person = new Person() { Name = "Name", LastName = "Last Name", Age = 18 };
    list.ItemsSource = myList;

    public class Person
    {
         public string Name { get; set; }
         public string LastName { get; set; }
         public int Age { get; set; }
    } 
```

我想在`ListBox`不同类型的控件中看到它们。例如：`DatePicker`for `DateTime`, `TextBlock`for `string`, `TextBox`for `Person`'s Name and LastName...

是否可以使用 来完成此任务`XAML`？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:31:40.107

```
<Window x:Class="MiscSamples.DataTemplates"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="DataTemplates"
        Height="300"
        Width="300">
  <Window.Resources>

    <!-- DataTemplate for strings -->
    <DataTemplate DataType="{x:Type sys:String}">
      <TextBox Text="{Binding Path=.}" />
    </DataTemplate>

    <!-- DataTemplate for DateTimes -->
    <DataTemplate DataType="{x:Type sys:DateTime}">
      <DataTemplate.Resources>
        <DataTemplate DataType="{x:Type sys:String}">
          <TextBlock Text="{Binding Path=.}" />
        </DataTemplate>
      </DataTemplate.Resources>
      <DatePicker SelectedDate="{Binding Path=.}" />
    </DataTemplate>

    <!-- DataTemplate for Int32 -->
    <DataTemplate DataType="{x:Type sys:Int32}">
      <Slider Maximum="100"
              Minimum="0"
              Value="{Binding Path=.}"
              Width="100" />
    </DataTemplate>
  </Window.Resources>
  <ListBox ItemsSource="{Binding}" />
</Window> 
```

代码背后：

```
 public partial class DataTemplates : Window
    {
        public DataTemplates()
        {
            InitializeComponent();

            var myList = new List<object>();
            myList.Add(DateTime.Now);
            myList.Add(50);
            myList.Add("Hello World");

            DataContext = myList;
        }
    } 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/1CsEa.png)

**如您所见，完全**没有理由使用代码来操作 WPF 中的 UI 元素（除了一些非常特殊的情况）

**编辑：**

请注意，您通常不会`DataTemplate`在命名空间内创建一个 for 类`System`（例如`System.String`。这只是为了给您一个示例。如果您真的需要这个，您可能必须`ViewModel`为每种类型创建一个。

# mysql - mysql查询：如何计算分组列但返回当前组中的id（逗号分隔）

> ID：15977358
> 
> 赞同：0
> 
> 时间：2013-04-12T17:24:04.697
> 
> 标签：mysql, sql, database

我有一张佣金表

```
ID Agent  Comm.
1  Agent1 $30 
2  Agent1 $40
3  Agent2 $40
4  Agent1 $30
5  Agent2 $40 
```

所以我需要计算来自同一代理和相同金额的分组付款，但检索所涉及的 ID（逗号分隔）

例子

```
Agent  Comm. Count Ids
Agent1 $30   2     1,4
Agent1 $40   1     2
Agent2 $40   2     3,5 
```

我可以只在一个查询中执行此操作吗？

我的查询现在没有 ids 列

```
select count(id) as Count, agent,comm from commissions
group by agent,comm order by agent asc ,comm asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:25:51.883

是的你可以。

MySQL 有一个内置函数，称为`GROUP_CONCAT()`连接行而不是列。

```
SELECT  Agent, Comm,
        COUNT(*) TotalCount,
        GROUP_CONCAT(ID) IDs
FROM    Commissions
GROUP   BY Agent, Comm 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/3300e/2)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# java - 比较字符串是否具有相同的位数

> ID：15977361
> 
> 赞同：0
> 
> 时间：2013-04-12T17:24:12.347
> 
> 标签：java

我正在尝试比较 2 个不同的字符串。但我不是在看它们是否完全相同，我在看它们是否包含相同的位数。

示例：如果我的`String b = 1234567891234567`和我输入了`String a = abcdefghijklmnop`，我想知道它们是否具有相同的位数，

```
import java.util.*;

class Test{

    public static void main(String[] args){
        Scanner lector = new Scanner(System.in);
        String a;
        String b = new String("1234567891234567");

        System.out.println("Enter your number");
        a = lector.nextLine();

        if(a.length() == b.lenght()){
            System.out.println("They have the same number of digits");

        }else{
            System.out.println("They dont have the same number of digits");
        }
    }
} 
```

我知道我不能使用，`==`因为它们是整数。如果我使用 equals 语句，程序将比较输入的字符串是否与另一个字符串完全相同。

我希望有一个人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:25:23.160

您可以使用以下方法提取数字：

```
str.replaceAll("\\D+",""); 
```

然后比较字符串的长度。

对于您的示例：

```
public static void main(String[] args){
    Scanner lector = new Scanner(System.in);
    String a;
    String b = new String("1234567891234567");

    System.out.println("Enter your number");
    a = lector.nextLine();

    if(a.replaceAll("\\D+","").length() == b.replaceAll("\\D+","").length()){
        System.out.println("They have the same number of digits");

    }else{
        System.out.println("They dont have the same number of digits");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:30:08.470

如果您必须检查字符串的长度，那么只需使用

```
a.length() == b.length() 
```

# java - 为什么进度条适合屏幕宽度？

> ID：15977365
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:24:26.830
> 
> 标签：java, android, android-layout

我写了下面的方法来显示进度条，但是由白框四舍五入的进度条适合屏幕宽度，我不知道为什么。

```
public void showProgressBar() {
    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    ProgressBar pbar = new ProgressBar(activity, null,
            android.R.attr.progressBarStyleLargeInverse);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(30, 50);
    pbar.setLayoutParams(params);
    builder.setView(pbar);
    builder.setCancelable(true);
    progressBar = builder.create();
    progressBar.show();
} 
```

执行上述方法时，进度如图所示。

[进度条问题](http://img515.imageshack.us/img515/1427/progressd.jpg) 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:47:32.277

您应该使用 a`ProgressDialog`并且不，它不适合屏幕宽度。

```
ProgressDialog pd=new ProgressDialog(activity);
pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show(); 
```

这应该给你你想要的。

做这个：

```
ProgressDialog pd;//declare as a global variable
public void showProgressBar() {
pd=new ProgressDialog(activity);
pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show(); 
```

}

以后`ProgressDialog`不管你想去哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:04:57.827

我用愚蠢的方式解决了它，但它对我很好。

```
public abstract class AbstractScreen implements IActivity {

protected Response response;
protected FragmentActivity activity;
private CustomProgressDialog progress;

public AbstractScreen(FragmentActivity activity) {
this.activity = activity;
}

public abstract void loadScreen();

@Override
public void preExecution() {
// TODO Auto-generated method stub

}

@Override
public void postExecution(Response response) {
// TODO Auto-generated method stub

}

 public void showProgressBar() {

 progress = new CustomProgressDialog(activity);
 progress.show();
 }

 public void closeProgress() {
 progress.dismiss();
 }

 public FragmentActivity getActivity() {
 return activity;
 }

 private class CustomProgressDialog extends Dialog {

 private Context context;

 public CustomProgressDialog(Context context) {
 super(context);
 this.context = context;
 loadScreen();
 }

 public void loadScreen() {

 requestWindowFeature(Window.FEATURE_NO_TITLE);
 setContentView(R.layout.progress);
 setCancelable(false);

 }

 }
 } 
```

也添加这个布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:orientation="vertical"
android:layout_marginRight="-7dp"
>

<ProgressBar
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 style="?android:attr/progressBarStyleLarge"
 android:id="@+id/progressbar"
 android:layout_gravity="center_horizontal"
 android:max="100"
 />
 </LinearLayout> 
```

# sharepoint - Sharepoint 2010 服务器场，第二台服务器上的页面丢失错误

> ID：15977366
> 
> 赞同：1
> 
> 时间：2013-04-12T17:24:27.680
> 
> 标签：sharepoint, sharepoint-2010, fba

我在使用 Visigo.Sharepoint.FormsBasedAuthenticaiton Web 部件进行注册时遇到问题。有时会显示未知错误，有时会正常显示，这让我相信它与场中的一台服务器有关。所以我直接进入 server1 上的登录页面，一切都很好，当我进入 server2 上的登录页面时，我得到一个错误页面，上面写着找不到文件。

我使用错误屏幕上提供的 Correlation ID 查看了日志，发现这似乎表明 PasswordRecoveryWebPart 是问题所在。

```
System.IO.FileNotFoundException: The Web application at http://site2/pages/login.aspx could not be found. Verify that you have typed the URL correctly. If the URL should be serving existing content, the system administrator may need to add a new request URL mapping to the intended application.
    at Microsoft.SharePoint.SPSite..ctor(SPFarm farm, Uri requestUri, Boolean contextSite, SPUserToken userToken)
    at Microsoft.SharePoint.SPSite..ctor(String requestUrl)
    at Visigo.Sharepoint.FormsBasedAuthentication.Utils.GetMembershipProvider(HttpContext context)
    at Visigo.Sharepoint.FormsBasedAuthentication.PasswordRecoveryWebPart.AddPasswordRecoveryControl()
    at Visigo.Sharepoint.FormsBasedAuthentication.PasswordRecoveryWebPart.CreateChildControls()
    at System.Web.UI.Control.EnsureChildControls()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Control.PreRenderRecursiveInternal()
    at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

我开始比较两台服务器上的 FBA 布局和功能文件，没有发现任何缺失。我不确定接下来要看什么以及可能的补救措施是什么。谢谢。

**更新**

根据下面的问题，我一直在尝试登录第二台服务器，以便可以转到站点设置页面并查看 FBA 用户管理信息。由于我的登录页面与注册页面相同，因此在第二台服务器上出现错误，我创建了一个新页面，其中仅包含自定义登录 Web 部件。不幸的是，直接访问第二台服务器并在日志中获取这些错误时，我似乎无法登录。

```
SPSecurityTokenService.Issue() failed: System.NullReferenceException: Object reference not set to an instance of an object.
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo.ValidateFormsAuthProviderNames(Uri context, String membershipProvider, String roleProvider)
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo.SetProviderNames(RequestSecurityToken request)
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo..ctor(IClaimsIdentity identity, RequestSecurityToken request, Boolean initializeForActor)
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo..ctor(IClaimsPrincipal principal, RequestSecurityToken request)
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.GetTokenLifetime(Lifetime requestLifetime)
     at Microsoft.IdentityModel.SecurityTokenService.SecurityTokenService.Issue(IClaimsPrincipal principal, RequestSecurityToken request)
     at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.Issue(IClaimsPrincipal principal, RequestSecurityToken request)    

Request for security token failed with exception: System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: Object reference not set to an instance of an object. (Fault Detail is equal to An ExceptionDetail, likely created by IncludeExceptionDetailInFaults=true, whose value is: System.NullReferenceException: Object reference not set to an instance of an object.
    at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo.ValidateFormsAuthProviderNames(Uri context, String membershipProvider, String roleProvider)
    at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo.SetProviderNames(RequestSecurityToken request)
    at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo..ctor(IClaimsIdentity identity, RequestSecurityToken request, Boolean initializeForActor)
    at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.SPRequestInfo..ctor(IClaimsPrincipal principal, RequestSecurityToken request)
    at Microsoft.SharePoint.IdentityModel.SPSecurityTokenService.GetTokenLifetime(Lifetime requestLifetime)
    at Microsoft.IdentityModel.SecurityTokenService.SecurityTokenService.Issue(IClaimsPrincipal principal, RequestSecurityToken r...)

System.ServiceModel.FaultException`1[[System.ServiceModel.ExceptionDetail, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]: Object reference not set to an instance of an object. 
    at Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.ReadResponse(Message response)
    at Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.Issue(RequestSecurityToken rst, RequestSecurityTokenResponse& rstr)
    at Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.Issue(RequestSecurityToken rst)
    at Microsoft.SharePoint.SPSecurityContext.SecurityTokenForContext(Uri context, Boolean bearerToken, SecurityToken onBehalfOf, SecurityToken actAs, SecurityToken delegateTo)
    at Microsoft.SharePoint.SPSecurityContext.SecurityTokenForFormsAuthentication(Uri context, String membershipProviderName, String roleProviderName, String username, String password, Boolean isPersistent)
    at Microsoft.SharePoint.IdentityModel.SPClaimsUtility.AuthenticateFormsUser(Uri context, String userName, String password)
    at UHPS.Login.Login.loginControl_Authenticate(Object sender, AuthenticateEventArgs e)
    at System.Web.UI.WebControls.Login.AttemptLogin()     at System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e)
    at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)     at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
    at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:39:10.770

我不确定为什么最终结果是找不到文件异常，但考虑到错误发生在 GetMembershipProvider 上，我的猜测是没有在给出错误的一台服务器上配置成员资格提供程序。

成员资格提供程序条目必须存在于每个 SharePoint 服务器上的 Web 应用程序的 web.config 中。有关配置会员提供程序的说明如下：

[http://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/](http://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/)

# java - 如何在填充之前初始化JTable？

> ID：15977368
> 
> 赞同：0
> 
> 时间：2013-04-12T17:24:40.160
> 
> 标签：java, swing, jtable, initialization

我正在为包含来自数据库的搜索结果的 JTable 编写代码，我需要通过 setRowCount(0) 方法或 initTable() 方法在每次单击“doSort”按钮时将其初始化为没有行，我已经编写了以下代码，但它不起作用：

```
private void doSortActionPerformed(java.awt.event.ActionEvent evt) { 

    try {
            ArrayList<String> all = null;
            String resStr = null;
            mail = new Mail();
            tm.setRowCount(0);
            initTable(tm);
            if(incomSelect.isSelected())
                try {
                    all = mail.select("SELECT * FROM mails WHERE type = 'incoming'");
                } catch (SQLException ex) {
                }
            else if(outcomSelect.isSelected())
                try {
                    all = mail.select("SELECT * FROM mails WHERE type = 'outcoming'");
                } catch (SQLException ex) {
                }

           for(int i=0; i<all.size(); i++) {
               resStr = all.get(i);
               String[] resArr =  resStr.split(",");
               tm.insertRow(i, resArr);
           }
        } catch (SQLException ex) {
        }
} 
```

和 initTable() 代码：

```
public void initTable(DefaultTableModel mod){
        for (int i = mod.getRowCount()-1; i >= 0; i--) {
            mod.removeRow(i);
        }
    } 
```

# asp.net - System.Web.Providers.DefaultMembershipProvider 有性能问题/死锁

> ID：15977369
> 
> 赞同：5
> 
> 时间：2013-04-12T17:24:45.127
> 
> 标签：asp.net, asp.net-membership, membership-provider

我们已开始使用来自 NuGet 的 Microsoft.AspNet.Providers.Core 包中提供的更新后的 System.Web.Providers。我们开始迁移现有用户，发现性能下降，然后出现死锁。这是少于 30,000 个用户（远少于我们需要创建的 1,000,000+）。当我们调用提供者时，它来自每个服务器上的多个线程，并且有多个服务器运行相同的进程。这是为了能够尽快创建我们需要的所有用户，并模拟我们希望在它上线时看到的负载。

为死锁生成的日志 SQL Server 包含以下 EF 生成的 sql：

```
SELECT
    [Limit1].[UserId] AS [UserId]
  , [Limit1].[ApplicationId] AS [ApplicationId]
  , [Limit1].[UserName] AS [UserName]
  , [Limit1].[IsAnonymous] AS [IsAnonymous]
  , [Limit1].[LastActivityDate] AS [LastActivityDate]
FROM
    (SELECT TOP (1)
        [Extent1].[UserId] AS [UserId]
      , [Extent1].[ApplicationId] AS [ApplicationId]
      , [Extent1].[UserName] AS [UserName]
      , [Extent1].[IsAnonymous] AS [IsAnonymous]
      , [Extent1].[LastActivityDate] AS [LastActivityDate]
     FROM
        [dbo].[Users] AS [Extent1]
        INNER JOIN [dbo].[Applications] AS [Extent2] ON [Extent1].[ApplicationId] = [Extent2].[ApplicationId]
     WHERE
        ((LOWER([Extent2].[ApplicationName])) = (LOWER(@p__linq__0)))
        AND ((LOWER([Extent1].[UserName])) = (LOWER(@p__linq__1)))
    ) AS [Limit1] 
```

我们手动运行查询，执行计划说它正在执行表扫描，即使有一个基础索引。原因是使用`LOWER([Extent1].[UserName])`.

我们查看了提供程序代码，看看我们是否做错了什么，或者是否有办法拦截或替换数据库访问代码。我们没有看到任何选项来执行此操作，但我们确实找到了`LOWER`问题的根源，`.ToLower()`即在列和参数上都被调用。

```
return (from u in ctx.Users
    join a in ctx.Applications on u.ApplicationId equals a.ApplicationId into a
    where (a.ApplicationName.ToLower() == applicationName.ToLower()) && (u.UserName.ToLower() == userName.ToLower())
    select u).FirstOrDefault<User>(); 
```

有谁知道我们将提供者的行为更改为不使用 .ToLower() 从而允许使用索引的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T18:44:16.980

[您可以在每个Sql Server](https://stackoverflow.com/questions/2065001/sql-server-lower-function-on-indexed-column)的 lower(username) 上创建一个索引：索引列上的 Lower 函数

```
ALTER TABLE dbo.users ADD LowerFieldName AS LOWER(username) PERSISTED
CREATE NONCLUSTERED INDEX IX_users_LowerFieldName_  ON dbo.users(LowerFieldName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:25:56.757

我也在使用 System.Web.Providers.DefaultMembershipProvider 成员资格提供程序，但发现它真的很慢。我更改为 System.Web.Security.SqlMembershipProvider 并发现它要快得多（快 5 倍以上）。

本教程向您展示如何设置 SQL 数据库，您需要使用 SqlMembershipProvider [http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-在-sql-server-express.aspx](http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx)

这个自动生成的数据库使用存储过程，这对您的数据库人员来说可能是也可能不是问题。

# sql-server - SQL Server 存储过程更新与 INNER JOIN 上的 SUM

> ID：15977370
> 
> 赞同：1
> 
> 时间：2013-04-12T17:24:46.147
> 
> 标签：sql-server, stored-procedures

我在 SQL Server 2005 中工作，创建一个存储过程来从我的数据库中提取付款人/账单数据。

存储过程创建一个临时表以传回应用程序 (VB.NET)。第一部分将期间余额表中的每条记录提取到临时表中，然后确定该期间余额的“年龄”（当前、逾期 30 天、逾期 60 天等）。这工作正常。

我现在需要做的是确定当前期间的收费天数。因此，我从年龄为“CUR”的临时表中提取所有记录。天数存储在我的数据库中的一个单独的表中，称为费用。一个期间可能有多个收费记录。在这些情况下，我想要该期间所有天数的总和。

例如，一个人在 3 月 1 日 - 3 月 31 日期间可能有 4 条单独的收费记录：第一个记录有 3 天，第二个记录有 6 天，第三个记录有 1 天，第四个记录有 5 天。我在临时表中想要的只是此人在此期间的一条记录，天数为 15。

目前，该程序正在为 3 人（102 人中）生成正确的天数。82 人有 NULL 天。有几个人是正确的，但绝对不是其中的 82 个。其余的人似乎有随机增加的日子。天数不能超过当月的天数，但有些人将天数列设置为数百甚至数千的数字。

这与[我昨天发布的问题](https://stackoverflow.com/questions/15929560/sql-server-group-by-sum-by-company-name-balance)有关，但与报告不同。

我将不胜感激您能提供的任何帮助。

```
CREATE PROCEDURE [AgedPayorReport]    
    @VCurrStart     DATETIME
AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY

        CREATE TABLE #t_temp
            (                    
                bal                     DECIMAL(11, 2), 
                period                  DATETIME,
                account_code            INT,
                payor_code              INT,
                plan_code               INT,        
                age                     VARCHAR(10),
                census_days             INT
            )          

        DECLARE @VCurrEnd           DATETIME
        DECLARE @V30Start           DATETIME
        DECLARE @V60Start           DATETIME
        DECLARE @V90Start           DATETIME
        DECLARE @V120Start          DATETIME
        DECLARE @V150Start          DATETIME
        DECLARE @V180Start          DATETIME
        DECLARE @V210Start          DATETIME
        DECLARE @V240Start          DATETIME

SET @VCurrEnd = DATEADD(DAY,-1,(DATEADD(MONTH,1,@VCurrStart)))
SET @V30Start = DATEADD(month,-1,@VCurrStart)
SET @V60Start = DATEADD(month,-2,@VCurrStart)
SET @V90Start = DATEADD(month,-3,@VCurrStart)
SET @V120Start = DATEADD(month,-4,@VCurrStart)
SET @V150Start = DATEADD(month,-5,@VCurrStart)
SET @V180Start = DATEADD(month,-6,@VCurrStart)
SET @V210Start = DATEADD(month,-7,@VCurrStart)
SET @V240Start = DATEADD(month,-8,@VCurrStart)

INSERT INTO #t_temp
            (                    
                bal,
                period,             
                age
            )            
SELECT    
                b.ledger_bal,
                b.period,               
                (SELECT CASE 
                WHEN period > @VCurrStart THEN 'ADV'
                WHEN period = @VCurrStart THEN 'CUR'
                WHEN period = @V30Start THEN '30'
                WHEN period = @V60Start THEN '60'
                WHEN period = @V90Start THEN '90'
                WHEN period = @V120Start THEN '120'
                WHEN period = @V150Start THEN '150'
                WHEN period = @V180Start THEN '180'
                WHEN period = @V210Start THEN '210'
                WHEN period = @V240Start THEN '240'
                WHEN period < @V240Start THEN '270'
                END)
            FROM balance b WITH(NOLOCK)         

SELECT *
INTO #t_temp_CUR
FROM #t_temp
WHERE age = 'CUR'

UPDATE t
SET t.census_days = (charge.sum_days)
FROM #t_temp_CUR t
INNER JOIN 
    (
        SELECT account_code, SUM(days) AS sum_days
        FROM charge WITH(NOLOCK)
        GROUP BY account_code
    ) as charge
    ON charge.account_code = t.account_code
INNER JOIN charge c WITH(NOLOCK)
ON c.account_code = t.account_code
AND c.payor_code = t.payor_code
AND c.plan_code = t.plan_code
WHERE c.start_date >= @VCurrStart
AND c.end_date <= @VCurrEnd
AND c.type = 'C'
AND c.void <> 1
AND c.days <> 0
AND c.days IS NOT NULL

END TRY
    BEGIN CATCH

    END CATCH
END 
```

编辑添加示例数据：

现有期间余额表：

```
account_code    payor_code      plan_code       period      ledger_bal  period_bal_code
---------------------------------------------------------------------------------------------------------------
9421            493             224             2012-07-01  191.82      30813
9420            6833            527             2012-07-01  767.28      30810
9419            6533            510             2012-07-01  1400.00     30806
9418            6533            510             2012-07-01  1400.00     30803
9417            493             224             2012-07-01  959.10      30800
9416            2193            340             2012-07-01  244.17      30794
9416            8468            584             2012-07-01  1370.00     30795
9416            8935            433             2012-07-01  250.00      30798
9415            493             224             2012-07-01  1150.92     30791
9414            6158            495             2012-07-01  2916.00     30788
9413            6833            527             2012-07-01  6385.61     30785
9412            6034            474             2012-07-01  8488.16     30781
9412            8930            433             2012-07-01  800.00      30783
9411            493             224             2012-07-01  7840.18     30777
9410            8468            584             2012-07-01  6156.00     30776 
```

费用表中的一些对应记录：

```
account_code    payor_code      plan_code   charge_code start_date  end_date    quantity    gross_amount    net_amount      days    void
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
9413            6833            527         5070631     2012-07-21  2012-07-31  1           2508.00         6385.61         11      0
9411            493             224         5070755     2012-07-16  2012-07-29  1           3192.00         6972.28         14      0
9411            493             224         5070757     2012-07-30  2012-07-31  1           456.00          867.90          2       0
9416            8468            584         5071869     2012-07-27  2012-07-31  1           1140.00         1620.00         5       0
9418            6533            510         5072255     2012-07-28  2012-07-31  1           912.00          1400.00         4       0
9417            493             224         5073818     2012-07-27  2012-07-31  1           1140.00         959.10          5       0
9410            8468            584         5075878     2012-07-12  2012-07-30  1           4332.00         6156.00         19      0
9420            6833            527         5076857     2012-07-28  2012-07-31  1           912.00          767.28          4       0
9412            6034            474         5076991     2012-07-16  2012-07-16  1           228.00          580.51          1       0
9412            6034            474         5076994     2012-07-17  2012-07-29  1           2964.00         7546.63         13      0
9412            6034            474         5076997     2012-07-30  2012-07-31  1           456.00          1161.02         2       0
9421            493             224         5077918     2012-07-31  2012-07-31  1           228.00          191.82          1       0
9414            6158            495         5079045     2012-07-23  2012-07-31  1           2052.00         2916.00         9       0
9419            6533            510         5079366     2012-07-28  2012-07-31  1           912.00          1400.00         4       0
9415            493             224         5079418     2012-07-26  2012-07-31  1           1368.00         1150.92         6       0
9410            8468            584         5084838     2012-07-12  2012-07-30  1           -4332.00        -6156.00        19      0
9410            8468            584         5085112     2012-07-12  2012-07-30  1           4332.00         6156.00         19      0
9413            6833            527         5085371     2012-08-01  2012-08-03  1           684.00          1741.53         3       0
9413            6833            527         5085373     2012-08-04  2012-08-09  1           1368.00         1150.92         6       0
9413            6833            527         5085375     2012-08-10  2012-08-31  1           5016.00         4220.04         22      0 
```

所以考虑#9411。当前存储过程产生：

```
ledger_bal  period      account_code    payor_code      plan_code       age     census_days
------------------------------------------------------------------------------------------------
7840.18     2012-07-01  9411            493             224             CUR         70 
```

但我希望它产生：

```
ledger_bal  period      account_code    payor_code      plan_code       age     census_days
    ------------------------------------------------------------------------------------------------
7840.18     2012-07-01  9411            493             224             CUR         16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:35:22.027

我终于弄明白了。

我创建了另一个名为 #t_days 的表，其中仅包含链接到费用表所需的字段以及天数。我仍然将当前的#t_temp 记录选择到#t_temp_CUR 中，然后将其链接***到***我的收费表以在#t_days 中插入各个收费记录。然后我运行更新语句并从#t_days 中提取 census_days 的总和。这现在为每条记录生成正确的天数。

谢谢！

```
CREATE PROCEDURE [AgedPayorReport]    
    @VCurrStart     DATETIME
AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY

        CREATE TABLE #t_temp
            (                    
                bal                     DECIMAL(11, 2), 
                period                  DATETIME,
                account_code            INT,
                payor_code              INT,
                plan_code               INT,        
                age                     VARCHAR(10),
                census_days             INT
            )

    CREATE TABLE #t_days
            (               
                account_code            INT,
                payor_code              INT,
                plan_code               INT,                
                census_days             INT             
            )

        DECLARE @VCurrEnd           DATETIME
        DECLARE @V30Start           DATETIME
        DECLARE @V60Start           DATETIME
        DECLARE @V90Start           DATETIME
        DECLARE @V120Start          DATETIME
        DECLARE @V150Start          DATETIME
        DECLARE @V180Start          DATETIME
        DECLARE @V210Start          DATETIME
        DECLARE @V240Start          DATETIME

SET @VCurrEnd = DATEADD(DAY,-1,(DATEADD(MONTH,1,@VCurrStart)))
SET @V30Start = DATEADD(month,-1,@VCurrStart)
SET @V60Start = DATEADD(month,-2,@VCurrStart)
SET @V90Start = DATEADD(month,-3,@VCurrStart)
SET @V120Start = DATEADD(month,-4,@VCurrStart)
SET @V150Start = DATEADD(month,-5,@VCurrStart)
SET @V180Start = DATEADD(month,-6,@VCurrStart)
SET @V210Start = DATEADD(month,-7,@VCurrStart)
SET @V240Start = DATEADD(month,-8,@VCurrStart)

INSERT INTO #t_temp
            (                    
                bal,
                period,             
                account_code,
                payor_code,
                plan_code,
                age
            )            
SELECT    
                b.ledger_bal,
                b.period, 
                b.account_code,
                b.payor_code,
                b.plan_code,
                (SELECT CASE 
                WHEN period > @VCurrStart THEN 'ADV'
                WHEN period = @VCurrStart THEN 'CUR'
                WHEN period = @V30Start THEN '30'
                WHEN period = @V60Start THEN '60'
                WHEN period = @V90Start THEN '90'
                WHEN period = @V120Start THEN '120'
                WHEN period = @V150Start THEN '150'
                WHEN period = @V180Start THEN '180'
                WHEN period = @V210Start THEN '210'
                WHEN period = @V240Start THEN '240'
                WHEN period < @V240Start THEN '270'
                END)
            FROM balance b WITH(NOLOCK)         

SELECT *
INTO #t_temp_CUR
FROM #t_temp
WHERE age = 'CUR'

INSERT INTO #t_days
            (               
                account_code,
                payor_code,             
                plan_code,
                census_days
            )
SELECT 
t.account_code, 
t.payor_code, 
t.plan_code,
c.days
FROM #t_temp_CUR t
INNER JOIN br549.charge c WITH(NOLOCK)
ON t.account_code = c.account_code
AND t.payor_code = c.payor_code
AND t.plan_code = c.plan_code
WHERE c.type = 'C'
AND c.advance = ''
AND c.void <> 1
AND c.start_date >= @vkVCurrStart
AND c.end_date <= @vkVCurrEnd

UPDATE #t_temp
SET census_days = 
(SELECT SUM(census_days)
FROM #t_days
WHERE #t_days.account_code = #t_temp.account_code
AND #t_days.payor_code = #t_temp.payor_code
AND #t_days.plan_code = #t_temp.plan_code
AND #t_days.period = #t_temp.period)

SELECT * FROM #t_temp

END TRY
    BEGIN CATCH

    END CATCH
END 
```

# android - libgdx 游戏中的通知栏

> ID：15977371
> 
> 赞同：6
> 
> 时间：2013-04-12T17:24:46.693
> 
> 标签：android, libgdx

我想使用 Libgdx 引擎创建游戏。它是默认创建的**全屏**游戏，没有通知栏。
我可以**用**通知栏创建游戏吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-21T18:36:53.667

由于我（尚未）被允许发表评论，因此我将给出答案。基本上，LiamJPeters 所说的一切都会有所帮助，除非您最近使用较新的 libgdx nightlies 之一从头开始设置项目，然后还会有一个在**manifest**中引用的**“res/values/styles.xml”**。

 **我必须在那里更改两个设置（除了 LiamJPeters 编写的所有内容）以使其最终显示通知栏和窗口标题：

```
<resources>
    <style name="GdxTheme" parent="android:Theme">
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:colorBackgroundCacheHint">@null</item>
        <item name="android:windowAnimationStyle">@android:style/Animation</item>
        <item name="android:windowNoTitle">false</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowFullscreen">false</item>
    </style>
</resources> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T11:49:33.767

在 Android 启动器中：

```
public class MainActivity extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.hideStatusBar = false;
        initialize(new MainClass(), cfg);
    }
} 
```

这里重要的一行是**cfg.hideStatusBar = false;**

希望有帮助

**编辑**

好的，所以我对该主题进行了一些研究，结果证明这很容易。我查看了[libgdx wiki 页面以添加 admob 广告](https://code.google.com/p/libgdx/wiki/AdMobInLibgdx)。除了添加广告之外，请按照所有步骤操作！

下面是用于设置非全屏 android 应用的修改代码：

```
public class MainActivity extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        RelativeLayout layout = new RelativeLayout(this);
        layout.addView(initializeForView(new MainClass(), false));
        setContentView(layout);
    }
} 
```

您可以通过谷歌搜索“RelativeLayout layoutParams”轻松添加所需的所有布局参数。希望这可以帮助。请将问题标记为已回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-19T16:11:31.127

我在这里遇到了困惑，无法在 Android Lollipop 上运行一段时间。我必须实际合并答案中提供的所有代码，以使我的应用程序显示状态栏。

所以对我来说最终的工作代码如下所示：

Java 部分 - 结合相对布局和 hideStatusBar 配置（感谢 LiamJPeters）

```
protected void onCreate (Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    AndroidApplicationConfiguration config = new AndroidApplicationConfiguration();

    config.hideStatusBar = false;

    RelativeLayout layout = new RelativeLayout(this);
    layout.addView(initializeForView(new MyAndroidApp(), config));
    setContentView(layout);
} 
```

和 styles.xml 部分 - windowFullscreen 为假（感谢 Bernrd K.）

```
<resources>
    <style name="GdxTheme" parent="android:Theme">
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:colorBackgroundCacheHint">@null</item>
        <item name="android:windowAnimationStyle">@android:style/Animation</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowFullscreen">false</item>
    </style>
</resources> 
```

注意：windowNoTitle 与状态栏本身无关。取决于你需要什么，但上面的 xml 只显示状态栏，没有标题。**

# java - 组合框和计算的问题

> ID：15977375
> 
> 赞同：0
> 
> 时间：2013-04-12T17:24:52.513
> 
> 标签：java, user-interface, combobox

我正在尝试使用一种方法来计算旅行的持续时间，使用以下方法：

```
 private void updateTripDurationText()
{

    String speed = (String)avgspeedBox.getSelectedItem();
    String dist = (String)distanceText.getText();

    double s = Double.parseDouble(speed);
    double d = Double.parseDouble(dist);
    double durationTime = d/s;
    String dTime = String.format("1%.1f", Double.toString(durationTime));
    durationText.setText(dTime);

   } 
```

虽然我可以运行该程序，但我收到一个涉及空字符串的错误。prgram 有 3 个组合框。您在哪里选择 A 和 B 位置，然后它会拉开距离。我希望第三个组合框（速度）将持续时间计算为距离/速度，然后将其放入文本框中。我哪里错了？

这是动作监听器：

```
private class ComboBoxListener implements ActionListener
{

  public void actionPerformed(ActionEvent e)
  {

        setCities(destinationBox.getSelectedIndex(),originBox.getSelectedIndex());
     updateDistanceText();
        updateTripDurationText();

   }

 } 
```

将其分成不同的事件处理程序后，我遇到了计算不正确的问题。持续时间的计算返回非常大的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:31:34.083

尝试

```
String.valueOf(Primitive/Object Reference) 
```

而不是方法，以便在原语或对象产生值的情况下`toString`不会抛出任何东西。并且还为or使用和覆盖它的方法。`NullPointerException``NULL``ComboBox``ListBox``ItemListener``itemStateChanged()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:32:58.170

在使用 Double.parseDouble 解析它们之前检查它们是否为空`speed`可能是个好主意。`dist`但是，如果有些人在 dist 框中输入“20.2 英里”怎么办。它不会是空字符串，但仍会抛出 NumberFormatException。

```
if ((speed.length() > 0) && (dist.length() > 0)) {
  String speed = (String)avgspeedBox.getSelectedItem();
  // rest of your code...
} 
```

尝试捕捉异常，如果捕捉到，让用户知道他们的输入是错误的。

```
try {
    if ((speed.length() > 0) && (dist.length() > 0)) {
      String speed = (String)avgspeedBox.getSelectedItem();
      // rest of your code...
    }
} catch (NumberFormatException nfe) {
  // show some kind of warning message
} 
```

# ruby - 使用 Ruby 进行模式匹配

> ID：15977378
> 
> 赞同：0
> 
> 时间：2013-04-12T17:25:00.217
> 
> 标签：ruby, string, rubygems, pattern-matching

我希望匹配两个字符串并返回一个分数，我不关心顺序，只关心字符匹配的百分比。我正在查看“string_score”gem，但它关心顺序。从我的测试中可以看出。 ..对更好的方法有什么建议吗？

```
require 'string_score/ext/string'

"JAMES DOWNY".downcase.score("Downy, James".downcase)

#=> 0

"JAMES DOWNY".downcase.score("James Downy".downcase)
#=> 1

"JAMES DOWNY".downcase.score("James, Downy".downcase)

# w the comma
#=> 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:03:39.147

好的，所以我环顾四周，特别是“string_score”、“scorer”和“text”宝石。那些并没有为这个特定的问题而削减它。我决定选择“匹配”宝石。

这是我编写的用于检查两个字符串之间的一致性的代码。

```
require 'rubygems'
require 'scorer'
require 'amatch'

include Amatch

class String
    def order_downcase
        self.chars.sort_by(&:downcase).join.downcase
    end
end

def goodmatch?(check_string,base_string)
    x = JaroWinkler.new(basestring.order_downcase)
    x.match(check_string.order_downcase)
end 
```

虽然它仍然不完美。例如，如果我做 goodmatch?("one","two") 它返回 0.0。我认为这太低了，应该在 10% 左右，因为两个词中都有“o”。**我会给可以改进此解决方案的人提供答案并投赞成票。**

# java - 如何为新用户分配不同的文本文件

> ID：15977379
> 
> 赞同：0
> 
> 时间：2013-04-12T17:25:02.227
> 
> 标签：java, arrays, syntax, bufferedreader, filereader

我正在开发的程序会询问用户他们是否是新用户，如果用户是新用户，您必须为他们的个性化音乐数据库分配他们自己的 txt 文件。txt 文件应标有用户名。我尝试使用`int`变量来标记 txt 文件，因为用户数未知。这是我到目前为止所做的：

```
System.out.println ("Are you a new user?(y/n)");

response = (stdin.readLine ());

if (response.equals ("Y"))
{
    System.out.println ("What is your name?");
    name [0] = (stdin.readLine ());

    BufferedWriter writer = new BufferedWriter (new FileWriter ("" + name + ".txt"));

    System.out.println ("How many songs would you like to enter?");
    number = Integer.parseInt (stdin.readLine ());

    for (int i = 0 ; i < number ; i++)
    {

        System.out.println ("What is the artist of the song you would like to add?");
        artist [i] = (stdin.readLine ());
        System.out.println ("What is the genre of the song you would like to add?");
        genre [i] = (stdin.readLine ());
        System.out.println ("What is the name of the song you would like to add?");
        songs [i] = (stdin.readLine ());
        count++;
    }

    for (int i = 0 ; i < number + count ; i++)
    {
        writer.write ("" + artist [i] + "");
        writer.newLine ();
        writer.write ("" + genre [i] + "");
        writer.newLine ();
        writer.write ("" + songs [i] + "");
        writer.newLine ();
    }
    writer.close ();

}
else if (response.equals ("y"))
{
    System.out.println ("What is your name?");
    name [0] = (stdin.readLine ());

    BufferedWriter writer = new BufferedWriter (new FileWriter ("" + name + ".txt"));

    System.out.println ("How many songs would you like to enter?");
    number = Integer.parseInt (stdin.readLine ());

    for (int i = 0 ; i < number ; i++)
    {

        System.out.println ("What is the artist of the song you would like to add?");
        artist [i] = (stdin.readLine ());
        System.out.println ("What is the genre of the song you would like to add?");
        genre [i] = (stdin.readLine ());
        System.out.println ("What is the name of the song you would like to add?");
        songs [i] = (stdin.readLine ());
        count++;
    }

    for (int i = 0 ; i < number + count ; i++)
    {
        writer.write ("" + artist [i] + "");
        writer.newLine ();
        writer.write ("" + genre [i] + "");
        writer.newLine ();
        writer.write ("" + songs [i] + "");
        writer.newLine ();
    }
    writer.close ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:50:54.620

如果您想为新用户创建一个新文件，请像这样使用

```
 File file = new File(name+ ".txt");

    if(! file.exists())
    {
        file.createNewFile();
    }
    BufferedWriter writer = new BufferedWriter (new FileWriter (file)); 
```

也使用

```
response.equalsIgnoreCase("Y") 
```

避免重复代码

# php - PHP SimpleXML 重复向每个父级添加子级

> ID：15977382
> 
> 赞同：0
> 
> 时间：2013-04-12T17:25:31.483
> 
> 标签：php, xml, xml-parsing, simplexml

我有这种 XML：

```
<?xml version="1.0" encoding="utf-8"?>
 <data>
    <stats>
    </stats>
    <params>
    </params>
    <results> 
        <record id='SJDGH'>  
            <item>abc</item>
            <item>def</item>
            <item>ghi</item>
        </record>
        <record id='OIIO'>   
            <item>abc</item>
            <item>def</item>
            <item>ghi</item>
        </record>   
    </results>
 </data> 
```

我正在为循环中的每`<item>`一个生成一个新的：`<record>``<results>`

```
 // $data is SimpleXml objec from XML above
 foreach ($data->results->record as $record)
 {
   $newitem = 'New item!'.time().$record->attributes()->id;
 } 
```

不知何故，在这个循环中，我需要更改 SimpleXML 对象 ( `$data`) 以在每个`<record>`.

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:48:40.080

我需要一点猜测，但这可能是您正在寻找的：

```
$records = $data->results->record;

foreach($records as $record)
{
    $value = sprintf('New Item! %s / id:%s', time(), $record['id']);
    $record->item[] = $value;
}

$data->asXML('php://output'); 
```

[在行动中看到它。](http://eval.in/private/644d1ab0dd27bf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T17:41:59.727

我想你可能想使用 addChild。

在这里查看：http: [//php.net/manual/en/simplexmlelement.addchild.php](http://php.net/manual/en/simplexmlelement.addchild.php)

# mysql - MySQL 查询优化和索引

> ID：15977393
> 
> 赞同：0
> 
> 时间：2013-04-12T17:26:11.310
> 
> 标签：mysql, sql

我有一个带有索引“create_at”字段的表。我需要做一些聚合查询，但我不明白使用索引来减少范围是无效的。

**所有表：**

```
SELECT COUNT(1) FROM subscriptions 
```

=> 412288 行

**仅 2011 年：**

```
SELECT COUNT(1) FROM subscriptions
WHERE (created_at BETWEEN '2011-01-01 00:00:00' AND '2011-12-31 23:59:59') 
```

=> 95217 行

**按月份汇总 2011 年：**

```
SELECT SQL_NO_CACHE MONTH(created_at) AS agg_created_at, SUM(amount) AS agg_amount 
FROM subscriptions
WHERE (created_at BETWEEN '2011-01-01 00:00:00' AND '2011-12-31 23:59:59') 
GROUP BY agg_created_at
ORDER BY agg_created_at 
```

=> 0.1398 秒

```
+----+-------------+---------------+------+---------------+------+---------+------+--------+----------------------------------------------+                                                                                                         
| id | select_type | table         | type | possible_keys | key  | key_len | ref  | rows   | Extra                                        |                                                                                                         
+----+-------------+---------------+------+---------------+------+---------+------+--------+----------------------------------------------+                                                                                                         
|  1 | SIMPLE      | subscriptions | ALL  | created_at    | NULL | NULL    | NULL | 422807 | Using where; Using temporary; Using filesort |                                                                                                         
+----+-------------+---------------+------+---------------+------+---------+------+--------+----------------------------------------------+ 
```

**与强制索引相同的查询：**

```
SELECT SQL_NO_CACHE MONTH(created_at) AS agg_created_at, SUM(amount) AS agg_amount 
FROM subscriptions FORCE INDEX(created_at)
WHERE (created_at BETWEEN '2011-01-01 00:00:00' AND '2011-12-31 23:59:59') 
GROUP BY agg_created_at
ORDER BY agg_created_at 
```

=> 0.1283 秒

```
 +----+-------------+---------------+-------+---------------+------------+---------+------+--------+----------------------------------------------+
| id | select_type | table         | type  | possible_keys | key        | key_len | ref  | rows   | Extra                                        |
+----+-------------+---------------+-------+---------------+------------+---------+------+--------+----------------------------------------------+
|  1 | SIMPLE      | subscriptions | range | created_at    | created_at | 8       | NULL | 194106 | Using where; Using temporary; Using filesort |
+----+-------------+---------------+-------+---------------+------------+---------+------+--------+----------------------------------------------+ 
```

优化器在这里看起来很聪明，因为使用索引来减少范围是无效的，但我不明白为什么。如果有人有解释？

# c# - C# 应用程序破解

> ID：15977395
> 
> 赞同：1
> 
> 时间：2013-04-12T17:26:16.880
> 
> 标签：c#, security, code-access-security, cracking

我们创建了一个像 adobe reader 这样的应用程序来读取一种特殊的加密文档文件格式，这种格式只能由我们的应用程序识别。

我们要做的是让用户使用他/她的帐户从网站购买应用程序，然后我们将让他/她使用该程序下载该文档并开始阅读。

这是我们的担忧：

> 1) 不应在另一台用户计算机上读取文档文件，这意味着如果用户 1 将原始下载文件提供给用户 2，用户 2 在他/她自己的计算机上安装了我们的应用程序，则第二个用户必须无法读取该文件
> 
> 2）用户下载文件后，可以离线阅读这些文件（不是一直在线才能阅读）
> 
> 3）这种安全性不能轻易破坏，因为这些文档数据至关重要，并且用户信息和应用程序不得被黑客攻击和破解！
> 
> 4）也许以后我们想要我们的android/IOS版本所以解决方案必须是跨平台的
> 
> 5) 像为每个文档提供登录机制这样的解决方案将不起作用，因为用户能够将他们自己的文件的副本连同他们的用户名和密码一起提供给其他用户。
> 
> 6）文件加密机制不能被破解者破坏，以便他们只是解密文件并在互联网上发布免费版本

您有什么编程方法、安全机制或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:56:44.237

您可以使用公钥（或非对称）密码术。您使用用户的公钥加密文档。然后只有有权访问私钥的人（理想情况下：只有用户）才能解密它。

但是，如果用户可以访问自己的密钥（他应该），那么没有什么可以阻止用户解密文档并与他人共享（或与他人共享他的私钥）。

最后：如果用户或程序需要访问未加密的产品，并且用户对保持文档安全没有兴趣，那么机密性可以并且 - 如果产品足够有趣 - 将被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:48:47.033

这是 .NET 的问题，它很容易被逆转，因为可执行文件存储了大量的元数据，并且它不会编译为本地 (asm)，而是编译为 IL。您最好的选择是使用混淆器和.NET Seal 之类的东西（但是，如果我是正确的，它需要用户上网）[http://forum.elitevs.net/](http://forum.elitevs.net/)

同样，您想跨平台使用 C#，您必须使用 Mono 之类的东西： [http ://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

虽然这需要最终用户也有单声道。

现在回答你的“观点”。

1) 使每个文件和应用程序共享某种对每个文件和应用程序都是唯一的加密，确保该文件仅与一个用户拥有的应用程序匹配。

用户 X 下载应用程序。用户 Y 下载应用程序。

两种下载都是独一无二的，具有某种加密算法或加密密钥。

用户 X 下载文档 A。文档 A 将与用户 X 的应用程序共享相同的算法/密钥，这使得它只对他唯一。

用户 X 将文档 A 提供给用户 Y。由于用户 Y 的应用程序与用户 X 不共享相同的算法/密钥，因此该文档不可读。

2）我会参考我在回答中首先说的话。

3）我会参考我在回答中首先说的话。

4）我会参考我在回答中首先说的话。不过我想指出，这并非完全是一个坏主意，但如果 C# 真的是为此选择的语言，则应该考虑到这一点。

5）我会在这里回答＃1。

6）我会在这里回答＃1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:04:02.770

如果您要允许用户下载文件，那么就没有办法 100% 保护它。原因是，必须有一种方法来解密它，以便用户可以阅读它。这个解密过程必须发生在用户的机器上，因为读取它的程序必须解密它并在他们的机器上打开它。

一旦解密程序在用户的机器上运行，他就可以对其进行逆向工程并破解它（假设他足够聪明）。

话虽如此，有很多方法可以使您的解密变得困难。现在，如果您取消离线阅读的能力，您将拥有更多控制权。黑客无法在您的远程服务器上运行反汇编程序或反编译程序。

希望这些信息有帮助

# c# - 通过添加新的子项/根来更新树视图

> ID：15977396
> 
> 赞同：0
> 
> 时间：2013-04-12T17:26:17.637
> 
> 标签：c#, wpf, mvvm, treeview, observablecollection

我正在使用`WPF TreeView`模式`MVVM`。我设法使用正确绑定它`ObservableCollection`。但是当我向其中添加新项目时，TreeView 不会更新。

```
<TreeView Grid.Row="1" Grid.Column="0" ItemsSource="{Binding Path= AccountTreeObs}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Name}"></TextBlock>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView>

ObservableCollection<IAccountsTreeViewModel> AccountTreeObs { get; set; } 
```

另一个代码是普通按钮命令，它添加根帐户并再次获取数据以再次分配上述属性。但是视图显然没有更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:45:22.703

首先想到的是您的 ViewModel 没有实现 INotifyPropertyChanged。如果您可以展示您的 ViewModel，我可以肯定地告诉您。在此之前，这是我能给出的最佳答案。

# asp.net - Microsoft Solver Foundation：将循环中的决策变量添加到约束

> ID：15977398
> 
> 赞同：1
> 
> 时间：2013-04-12T17:26:20.217
> 
> 标签：asp.net, vb.net, visual-studio-2010, solver, ms-solver-foundation

我正在尝试在 Visual Studio 2010 中使用带有 VB.NET 的 Microsoft Solver Foundation 创建一个优化模型。基本上，我列出了我需要雇用的 3 种类型的员工（调酒师、服务员和女招待），每种员工的工资和性能评级。我为每个潜在员工创建了一个决策变量。它设置为 0 表示不雇用决定，1 表示雇用决定。

当我尝试计算员工的总成本、总绩效得分或每种员工的总和时，我收到一个错误，指出我的决策变量还没有值。

有没有一种更简单的方法来添加这些约束（可能在循环中），而无需在每个约束中单独列出整个员工数据库的每个决策变量？

这是我正在使用的代码。

```
 Dim myEmployee As Employee
    Dim context As SolverContext = SolverContext.GetContext()
    Dim model As Model = context.CreateModel()
    For Each myEmployee In employeeList
        If myEmployee.Type = "Bartender" Then
            Dim BartenderHire As New Decision(Domain.IntegerRange(0, 1), myEmployee.ID)
            barDecisionList.Add(BartenderHire)
        ElseIf myEmployee.Type = "Host(ess)" Then
            Dim HostHire As New Decision(Domain.IntegerRange(0, 1), myEmployee.ID)
            hostDecisionList.Add(HostHire)
        ElseIf myEmployee.Type = "Waiter/Waitress" Then
            Dim WaiterHire As New Decision(Domain.IntegerRange(0, 1), myEmployee.ID)
            waitDecisionList.Add(WaiterHire)
        End If
    Next

    For i = 0 To barDecisionList.Count - 1
        model.AddDecision(barDecisionList.Item(i))
    Next
    For i = 0 To hostDecisionList.Count - 1
        model.AddDecision(hostDecisionList.Item(i))
    Next
    For i = 0 To waitDecisionList.Count - 1
        model.AddDecision(waitDecisionList.Item(i))
    Next

    'Calculate cost of hired employees.
    Dim cost As Double
    cost = 0
    For i = 0 To model.Decisions.Count - 1
        Dim thisEmployee As Employee = employeeList.Item(i)
        cost = cost + (model.Decisions(i).ToDouble * thisEmployee.Wage * 6)
    Next

    'Calculate total score of hired employees.
    Dim totalScore As Double
    totalScore = 0
    For i = 0 To model.Decisions.Count - 1
        Dim thisEmployee As Employee = employeeList.Item(i)
        totalScore = totalScore + (model.Decisions(i).ToDouble * thisEmployee.Score)
    Next

    'Calculate total bartenders hired.
    Dim barSum As Integer
    barSum = 0
    For i = 0 To barDecisionList.Count - 1
        barSum = barSum + barDecisionList.Item(i)
    Next

    'Calculate total waiters hired.
    Dim waitSum As Integer
    waitSum = 0
    For i = 0 To waitDecisionList.Count - 1
        waitSum = waitSum + waitDecisionList.Item(i)
    Next

    'Calculate total hosts hired.
    Dim hostSum As Integer
    hostSum = 0
    For i = 0 To hostDecisionList.Count - 1
        hostSum = hostSum + hostDecisionList.Item(i)
    Next

    'Add constraints
    model.AddConstraint("Bartenders_Required", barSum = bartendersRequired)
    model.AddConstraint("WaitStaff_Required", waitSum = waitersRequired)
    model.AddConstraint("Hosts_Required", hostSum = hostsRequired)
    model.AddConstraint("Budget", cost <= budget)
    model.AddGoal("Total_Score", GoalKind.Maximize, totalScore)
    Dim solution As Solution = context.Solve(New SimplexDirective())
    Dim report As Report = solution.GetReport
    For i = 0 To model.Decisions.Count - 1
        solutionList.Add(model.Decisions(i))
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T19:58:30.450

在您调用之前，这些决定不会有任何价值`context.Solve(...)`。

# actionscript-3 - flex setFocus on 创建完成

> ID：15977405
> 
> 赞同：0
> 
> 时间：2013-04-12T17:26:53.677
> 
> 标签：actionscript-3, apache-flex

通常，表单和弹出窗口在刚显示时不会设置焦点。显而易见的解决方案是在组件的创建完成事件中将焦点设置为第一个输入，这样 tab 和 space 等键盘快捷键开始工作。

问题是，创建完成不是灵丹妙药，有时元素此时无法聚焦，我不确定为什么会发生这种情况。

渲染事件将确保焦点，但它为了一个非常简单的目的而分派了太多。

在哪一点上，组件始终准备好成为焦点？

编辑：让我无法获得启动焦点的组件是 a `TitleWindow`，它可以以两种方式弹出，鼠标单击事件和键盘事件。当通过单击显示tite窗口时，第一个输入在创建完成事件中获得焦点，但是当通过键盘事件显示时，它不会...

现在我得到了它使用以下代码：

```
private function titlewindow_creationCompleteHandler(e:FlexEvent):void{
    callLater( setTextInputFocus);
}
private function setTextInputFocus():void{
    txtPregunta.setFocus();
} 
```

但是怀疑显示的方式与此有关......因为，其他一些`TitleWindow`也以这种方式显示并且它们很好。

那会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:02:46.877

> 渲染事件将确保焦点，但它为了一个非常简单的目的而分派了太多。

如果这是真的，那么为什么不试试这个：

```
private function titlewindow_creationCompleteHandler(e:FlexEvent):void{
    var callback : Function = function(re : Event) : void {
        titlewindow.removeEventHandler(RenderEvent.orsomething, callback);
        setTextInputFocus();
    };

    titlewindow.addEventHandler(RenderEvent.orsomething, callback);
} 
```

可能是一种 hack，因为它应该专注于 creationComplete，但它可能会起作用。

# android - Android使广播接收器安全

> ID：15977410
> 
> 赞同：5
> 
> 时间：2013-04-12T17:27:25.390
> 
> 标签：android, security

我正在尝试实现一个“安全”的广播接收器，它只接收来自特定应用程序的广播。这是因为我想为我的应用程序制作一个插件，通过广播触发动作。由于此操作（部分）是明智的，因此最好检查发件人是否真的是我的应用程序。据我所见，不可能检查发件人包裹？为此定义自定义权限是否安全？如果是，我该怎么做？实现这一目标还有哪些其他可能性？

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T17:33:52.813

> 为此定义自定义权限是否安全？

如果应用程序和插件都是由您编写的，那么自定义权限`android:protectionLevel="signature"`似乎是您问题的理想解决方案。没有该权限，任何应用程序都无法向您的接收器发送广播，该权限只能由使用相同签名密钥签名的应用程序持有。作为奖励，用户不必在安装时同意许可。

专业提示：`<permission>`在应用程序和插件中定义元素，因此这两个的安装顺序无关紧要。

请注意，[自定义权限在 Android 5.0 之前存在安全漏洞](http://commonsware.com/blog/2014/02/12/vulnerabilities-custom-permissions.html)，并且[在 Android 5.0+ 上，除非使用相同的签名密钥签名，否则没有两个应用可以定义相同的权限](http://commonsware.com/blog/2014/08/04/custom-permission-vulnerability-l-developer-preview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:33:58.747

在清单中定义自定义权限：

```
<permission android:name="com.example.myapp.permission.NAME"
    android:protectionLevel="normal" /> 
```

在您的接收器上，添加权限属性：

```
<receiver android:name="MyReceiver" 
    android:permission="com.example.myapp.permission.NAME" /> 
```

# grails - Grails：重定向动作

> ID：15977417
> 
> 赞同：1
> 
> 时间：2013-04-12T17:27:41.673
> 
> 标签：grails

我有一个相对较小的应用程序。我的控制器中有 2 个动作，action1 和 action2。我想要的是，如果在美国访问我的应用程序，控制器将调用 action1，如果在英国访问，则调用 action2。我怎样才能做到这一点？有人可以告诉我如何在 URLMappings 或控制器中执行此操作吗？还是他们这样做的另一种方式？

谢谢你。

对于像我这样的新手来说，一个简单的例子将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:32:14.000

您可以做的是创建一个过滤器，该过滤器将根据当前的语言环境重定向到适当的控制器。

[有关过滤器](http://grails.org/doc/2.2.1/ref/Plug-ins/filters.html)的更多信息。

**编辑：**

做这样的事情：

```
class LocaleFilters {
    def filters = {
        checkLocale(controller: '*', action: '*') {
            before = {
                if (org.springframework.web.servlet.support.RequestContextUtils.getLocale(request) == Locale.US ) {
                    redirect(action: 'action1')
                    return false
                } else {
                    redirect(action: 'action2')
                    return false
                }
            }
        }
    }
} 
```

# mysql - 是否可以在mysql存储过程中找到每个时间块的startTime和finishTime？

> ID：15977419
> 
> 赞同：0
> 
> 时间：2013-04-12T17:27:47.907
> 
> 标签：mysql, stored-procedures

我有一个三列的mysql表

```
Index, startTime, finishTime
1, 00:30:00, 01:45:30 
21, 01:45:30, 02:45:30 
36, 02:45:30, 02:55:00 
47, 02:55:00, 02:55:30 
58, 03:30:00, 03:45:30 
61, 03:45:30, 04:45:30 
99, 06:30:00, 06:45:30 
18978, 06:45:30, 06:45:40 
18978, 06:45:40, 06:55:40 
28888, 07:30:00, 09:45:30 
```

是否可以在存储过程中找到每个时间块的 startTime 和 finishTime 而没有间隙？

即：输出每个时间块的最小开始时间和最大结束时间

```
00:30:00, 02:55:30
03:30:00, 04:45:30 
06:30:00, 06:55:40 
07:30:00, 09:45:30 
```

# java - 如何使 java swing JFrame 正确调整大小

> ID：15977420
> 
> 赞同：0
> 
> 时间：2013-04-12T17:27:51.263
> 
> 标签：java, swing

我想知道为什么我不能在下面调整我的框架大小，并且在调整框架大小时让所有组件的大小越来越小。谢谢！！！

```
public class TPASimulatorGUI extends JFrame{
    JPanel mainPanel = new JPanel();
    BoxLayout layout = new BoxLayout(mainPanel,BoxLayout.Y_AXIS);       
    mainPanel.setLayout(layout);

                // add things to main panel

    JPanel it = new JPanel(new FlowLayout(FlowLayout.LEADING));

    it.add(mainPanel);

    this.getContentPane().add(it);
    this.setSize(new Dimension(1190,770));
    this.setVisible(true); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:37:42.850

```
JPanel it = new JPanel(new FlowLayout(FlowLayout.LEADING));
it.add(mainPanel); 
```

FlowLayout 始终尊重添加到其中的组件的首选大小。

摆脱“它”面板并尝试使用

```
//this.getContentPane().add(it);
add(mainPanel); 
```

框架的默认布局是 BorderLayout，它将尝试增加/减少添加到其中的所有组件的大小。

# ios - iOS 推送通知 - 未收到消息

> ID：15977422
> 
> 赞同：0
> 
> 时间：2013-04-12T17:28:00.360
> 
> 标签：ios, push-notification

我有一个用 php apns 编写的推送通知服务器。该应用程序同时启用了开发和生产推送证书，并在启用推送服务后创建了有效的配置文件。

在测试（沙盒）期间，推送通知在使用开发推送证书 pem 文件创建后，使用几个步骤发送到设备上。

我将应用程序提交到应用商店，然后更新 php apns 服务器以使用已创建的生产推送证书 pem 文件，它说已连接到苹果，发送消息然后断开连接（就像在测试环境中一样）但是没有推送通知到达应用程序（从应用程序商店下载的版本）。

我已经确认该应用程序正在将设备 ID 发送到 php apns 服务器并且 php apns 服务器正在使用正确的证书（因为它连接良好 - 使用无效证书进行测试并且它无法连接）并且它说发送消息但是提到，什么都没有。

有谁知道为什么会发生这种情况？

谢谢！！

# android - Toast 从单选框参考中给出不正确的答案

> ID：15977425
> 
> 赞同：0
> 
> 时间：2013-04-12T17:28:06.000
> 
> 标签：android, radio-button, toast

我对此很陌生，并不完全确定我为什么会遇到这个问题。从我的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.Toast;

public class MainActivity extends Activity {

RadioButton wavelength1;
RadioButton wavelength2;

double ray;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    wavelength1 = (RadioButton) findViewById(R.id.lowave);
    wavelength2 = (RadioButton) findViewById(R.id.hiwave);

    Button button = (Button) findViewById(R.id.button);

    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            If (wavelength1.isChecked());{
                ray = 0.7125;
            }
            If (wavelength2.isChecked());{
                ray = 0.4436;
            }
            Toast.makeText(MainActivity.this, String.valueOf(ray), Toast.LENGTH_LONG).show();
        }

        private void If(boolean checked) {
            // TODO Auto-generated method stub

        }

    });
}

} 
```

当我单击任一单选框时，吐司中会给出相同的输出（如 0.4436），但它们应该不同。我真的不知道发生了什么。该应用程序针对 API 10，我正在使用 Eclipse。（我确定我遗漏了一些东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:29:23.233

`semicolor(;)`在 if 语句末尾删除

`If (wavelength1.isChecked());` < -- 删除这个

并且

**使用小（i） `if` 这是方法`If();`**

去掉这个方法

```
private void If(boolean checked) {
        } 
```

# spring - Spring Mybatis - 将数组作为输入参数发送到 mapper.xml 中的过程调用

> ID：15977430
> 
> 赞同：1
> 
> 时间：2013-04-12T17:28:18.050
> 
> 标签：spring, mybatis

我正在使用以下代码将 java 数组传递给存储过程

```
<select id="abcd" parameterType="java.util.Map" statementType="CALLABLE">
    {call PKG_xyz.PR_cbcd(
        #{p_array,jdbcType=ARRAY,typeHandler=org.apache.ibatis.type.ArrayTypeHandler,mode=IN},
        #{p_ids,jdbcType=INTEGER,mode=IN},
        #{p_comments,jdbcType=VARCHAR,mode=IN},
        #{p_return_code,jdbcType=INTEGER,mode=OUT},
        #{p_msg_out,jdbcType=VARCHAR,mode=OUT}   
    )}
</select> 
```

在这里，p_array 是我的 java 数组。但是我收到以下错误->“**使用 JdbcType ARRAY 为参数#1 设置 null 时出错。尝试为此参数设置不同的 JdbcType 或不同的 jdbcTypeForNull 配置属性。原因：java.sql.SQLException：无效的列类型： sqlType=2003** "

有人可以帮忙吗....

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T10:33:42.490

尝试编写您的自定义类型处理程序，例如

```
public class ArrayTypeHandler implements TypeHandler<YourArrayObject[]>{
} 
```

在下面覆盖此方法以将 oracle.sql.ARRAY 设置为 PreparedStatement：-

```
public void setParameter(PreparedStatement ps, int i,
            YourArrayObject[] parameter, JdbcType jdbcType) throws SQLException {} 
```

这个 url 可能会帮助你做同样的事情：- [如何使用 MyBatis 将 Java 对象列表传递给 Oracle 存储过程？](https://stackoverflow.com/questions/12719689/how-to-pass-java-list-of-objects-to-oracle-stored-procedure-using-mybatis)

同样，重写 getResult() 方法以获取 OUT 数组参数

# c# - ItemContainerGenerator.ContainerFromIndex 插入后返回 null

> ID：15977431
> 
> 赞同：1
> 
> 时间：2013-04-12T17:28:19.973
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

我有`ListBox`一个 Windows Phone 应用程序。在一个按钮操作中，我需要`ListBoxItem`在被`ListBox`调用的每一个上设置一个转换和名称`lb`。

我的数据源是

```
var items = new ObservableCollection<string>();
for (int i = 0; i < 10; ++i)
{
    items.Add("Item " + i);
}
lb.ItemsSource = items; 
```

我有一个代码可以添加到ListBox 中的`RenderTransform`每个`ListBoxItem`

```
for (int i = 0; i < items.Count;++i )
{
    var item = this.lb.ItemContainerGenerator.ContainerFromIndex(i) as ListBoxItem;
    item.RenderTransform = new CompositeTransform();
    item.Name = i.ToString() //needed for storybord
    //another stuff
} 
```

它工作正常。问题是我首先需要在列表中插入和项目。当我`items.Insert(index,"test")`在 for 循环之前调用时，我得到一个异常，即 item 为 null when `i==index`。插入新项目时无关紧要，该项目总是为空。

我究竟做错了什么？或者`ListBox`在尝试访问之前插入新项目时是否需要等待事件`ListBoxItem`？

**编辑**：我提取了代码并将其放入解决方案中：[https](https://dl.dropboxusercontent.com/u/73642/PhoneApp2.zip) ://dl.dropboxusercontent.com/u/73642/PhoneApp2.zip 。我首先将一个假项目插入到新解决方案中，然后将其淡出并使用动画将原始项目移动到该位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:20:24.483

在添加项目后，由于 UI 子系统的异步特性，不会立即生成容器。尝试订阅 ItemsChanged（或 StatusChanged，对不起，我不记得了）并在使用正确的事件参数触发事件时获取项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T22:09:13.233

等待 Dispatcher 完成它正在做的事情，例如（由于添加了新项目而更新 UI）

```
this.Dispatcher.BeginInvoke(() =>
{
   //Code Here
}); 
```

如果您曾经操作 UI，例如在没有更新 UI 的情况下将项目添加到列表框，您将无法运行针对 UI 的代码。

编辑：这是您的项目开始工作的代码

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {            
        start = Int32.Parse(from.Text);
        end = Int32.Parse(to.Text);

        fake = items[start];
        //items.Insert(end, fake);

        this.Dispatcher.BeginInvoke(() =>
        {
            for (int i = 0; i < items.Count; ++i)
            {
                var item = this.lb.ItemContainerGenerator.ContainerFromIndex(i) as ListBoxItem;
                item.Name = i.ToString();
            }

            (this.lb.ItemContainerGenerator.ContainerFromIndex(end) as ListBoxItem).RenderTransform = new CompositeTransform();
            (this.lb.ItemContainerGenerator.ContainerFromIndex(end) as ListBoxItem).Name = "listBoxItem1";

            (this.lb.ItemContainerGenerator.ContainerFromIndex(start) as ListBoxItem).Name = "listBoxItem";

            sbListBox.Begin();
        });

    } 
```

# visio - 使用 dll “AxInterop.Microsoft.Office.Interop.VisOcx.dll” (v4.0.30319) 中的“AxDrawingControl”时出现“类未注册”异常

> ID：15977438
> 
> 赞同：3
> 
> 时间：2013-04-12T17:28:43.047
> 
> 标签：visio

`AxDrawingControl`在我的应用程序中使用dll `AxInterop.Microsoft.Office.Interop.VisOcx.dll`(v4.0.30319)时出现以下异常：

```
System.Runtime.InteropServices.COMException occurred
HResult=-2147221164
Message=Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))
Source=System.Windows.Forms
ErrorCode=-2147221164

The stackTrace:

   at System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance(Guid& clsid, Object punkOuter, Int32 context, Guid& iid)
   at System.Windows.Forms.AxHost.CreateWithoutLicense(Guid clsid)
   at System.Windows.Forms.AxHost.CreateWithLicense(String license, Guid clsid)
   at System.Windows.Forms.AxHost.CreateInstanceCore(Guid clsid)
   at System.Windows.Forms.AxHost.CreateInstance()
   at System.Windows.Forms.AxHost.GetOcxCreate()
   at System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)
   at System.Windows.Forms.AxHost.CreateHandle()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.AxHost.EndInit()
   at TestVisOcxAxDrawing.VisioTestForm.InitializeComponent() in C:\ TestVisio\TestVisOcxAxDrawing\VisioTestForm.Designer.cs:line 55
  InnerException: 
```

*   应用程序在配置管理器中配置为“Any CPU” -> “Active Solution Platform”</li>
*   该应用程序在 Windows8 64 位操作系统中作为 64 位应用程序执行时会引发上述错误。
*   Visio 安装的是Professional 2010，x86 版本。

    以下是我迄今为止的观察：

    1.  安装 visio x64 版本时，visio 绘图控件加载正常。
    2.  如果将“Active Solution Platform”更改为 x86 版本，它也可以正常工作。

不幸的是，在我的情况下，上述两种解决方法都是不可能的，因为它是一次单击应用程序，并且客户端可以在安装了任何 Visio 版本的任何版本的 Windows 上运行。

问题：

1.  应用程序是否可以配置为“任何 CPU”并且仍然支持 visio 32 和 64 位版本？
2.  是否有任何替代方案/最佳实践来处理这种情况？

    *   例如：分别发布 32 和 64 版本的应用程序？
    *   或者是否可以将 64 位和 32 位版本的 Visio dll 与应用程序一起提供，并在发生错误时在它们之间切换？

重建步骤

1.  在 64 位 Windows 操作系统的机器上，在 VS2010 中新建一个 Windows 窗体项目。
2.  `Any CPU`像在 Configuration Manager -> 中一样配置项目`Active Solution Platform`。
3.  右键单击工具箱并单击`Choose Items`-> 导航到`COM Components`选项卡 -> 检查`Microsoft Office Visio 14.0 Drawing Control`。
4.  Visio 绘图控件现在将出现在工具箱上。
5.  将`Microsoft Office Visio 14.0 Drawing Control`控件拖到窗体中，然后按`F5`。
6.  错误会`Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))`抛出。

谢谢， 问候， 普拉文

# sql - 将 2 条选择 sql 结果插入 1 条插入 sql

> ID：15977439
> 
> 赞同：0
> 
> 时间：2013-04-12T17:28:44.077
> 
> 标签：sql, postgresql

我有一个有 2 个字段的表。我如何从 2 个 sql 结果的结果中插入这 2 个字段。

```
 insert into access (user,page)
(select id as user from users where id =5,
select pagename as page from pages where id =10) 
```

2 个表之间没有关系。我不认为我可以加入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:32:55.123

```
insert into access ("user", page) values
(  (select id as user from users where id =5),
   (select pagename as page from pages where id =10)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:43:50.047

```
insert into access (user,page)
select users.id as user, 
       pages.pagename as page 
from users,pages
where users.id = 5
  and pages.id = 10 
```

# html - 如何在帖子之间放置元素？

> ID：15977446
> 
> 赞同：0
> 
> 时间：2013-04-12T17:29:23.677
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我正在开发一个类似于博客的应用程序，我需要在每个页面的三个帖子之后放置与帖子不同的元素（广告）。为了更好地解释我想要做什么，我将尝试说明：

```
[ POST ]
[ POST ]
[ POST ]
[ ELEMENT]
[ POST ]
[ POST ]
[ POST ]
[ ... ] 
```

在每个页面中，我都希望在不中断`for`循环且不使用任何 Javascript 或 CSS hack 的情况下遵循这种模式，这只是一个服务器端技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:32:50.260

在你的每个上使用一个索引，并检查模数怎么样？

```
Posts.each_with_index do  |post,index| 
    [ Post _content_ here ]
   if index % 3 == 0
      [Element content here ] 
   end
end 
```

# windows - 将 Enter 按键发送到 winAPI 中的活动窗口

> ID：15977448
> 
> 赞同：1
> 
> 时间：2013-04-12T17:29:38.333
> 
> 标签：windows, winapi

我已经使用 CreateProcess 打开了一个进程，如下所示：

```
CreateProcess(NULL,"C:\\Program Files (x86)\\Microsoft Office\\OFFICE11\\PPTVIEW.EXE C:\\Users\\DRILON\\Desktop\\a.pps",NULL,NULL,FALSE,0,NULL,NULL,&sai,&pi); 
```

如您所见，此过程会打开一个 pps 文件。现在我想向演示文稿发送并输入按键（这将更改幻灯片）。我已经尝试了很多代码，但没有一个有效。我努力了：

```
HWND powerpoint = GetActiveWindow();
PostMessage(powerpoint, WM_KEYDOWN, VK_RETURN, 0); 
```

还

```
SendMessage(powerpoint, WM_KEYDOWN, VkKeyScan('c'), 1); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:53:50.763

您可以使用 PowerPoint 的对象模型，使用您的语言中的等效项：

```
CreateObject("Powerpoint.Application").ActivePresentation.SlideShowWindow.View.Next 
```

# android - 安卓：XML解析

> ID：15977449
> 
> 赞同：0
> 
> 时间：2013-04-12T17:29:48.113
> 
> 标签：android, xml-parsing

我正在尝试解析一个 xml 文件。我搜索了很多，最后找到了一些与此相关的教程。我编写了自己的代码，但我现在遇到了问题。当我启动功能时（通过更改单选按钮：我得到错误。你能帮我解决我的错误吗？

这是我的代码：

```
public class Download_database extends Activity {
    static String URL = "http://ganjoor.sourceforge.net/newgdbs.xml";
    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
      XMLParser parser = new XMLParser();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_download_database);
        RadioGroup download_section_group=(RadioGroup)findViewById(R.id.download_section_grop);
        RadioButton newgdb=(RadioButton)findViewById(R.id.radio_newgdb);
        RadioButton sitegdb=(RadioButton)findViewById(R.id.radio_sitegdb);
        RadioButton programgdb=(RadioButton)findViewById(R.id.radio_programgdb);
        download_section_group.check(R.id.radio_newgdb);
        final TextView hint=(TextView)findViewById(R.id.txt_download_db_hint);
        TabHost tabs=(TabHost)findViewById(R.id.download_cat_tabhost);
        tabs.setup();
        TabHost.TabSpec spec=tabs.newTabSpec("down_tag1");
        spec.setContent(R.id.download_cat_01);
        spec.setIndicator(getString(R.string.txt_download_tab_download_sections));
        tabs.addTab(spec);
        spec=tabs.newTabSpec("down_tag2");
        spec.setContent(R.id.download_cat_02);
        spec.setIndicator(getString(R.string.txt_download_tab_download_list));
        tabs.addTab(spec);

        download_section_group.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup arg0, int arg1) {

                if(R.id.radio_newgdb== arg1){
                    hint.setText(getString(R.string.txt_download_hint_newgdb));
                    URL = "http://ganjoor.sourceforge.net/newgdbs.xml";
                    xmlp(URL);
                }

                if(R.id.radio_sitegdb== arg1){
                    hint.setText(getString(R.string.txt_download_hint_sitedb));
                    URL = "http://ganjoor.sourceforge.net/sitegdbs.xml";
                    xmlp(URL);

                }

                if(R.id.radio_programgdb== arg1){
                    hint.setText(getString(R.string.txt_download_hint_programgdb));
                    URL = "http://ganjoor.sourceforge.net/programgdbs.xml";
                    xmlp(URL);
                }

            }
        });

        if(isOnline()){

        }
        else{
            Toast.makeText(this, "you are not connected to internet..Please check your connections", 1).show();
        }
    }

    private void xmlp(String url){
        Log.i(URL, "call xmlp");
        String xml = parser.getXmlFromUrl(url); // getting XML

        Log.i("getting DOM element", "getting DOM element");
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(parser.KEY_gdb);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(parser.KEY_CatName, parser.getValue(e, parser.KEY_CatName));
            map.put(parser.KEY_PoetID, parser.getValue(e, parser.KEY_PoetID));
            map.put(parser.KEY_DownloadUrl, parser.getValue(e, parser.KEY_DownloadUrl));
            map.put(parser.KEY_PubDate, parser.getValue(e, parser.KEY_PubDate));
            map.put(parser.KEY_FileSizeInByte,"Size:"+ parser.getValue(e,parser.KEY_FileSizeInByte));
            // adding HashList to ArrayList
            menuItems.add(map);
            ListView list=(ListView)findViewById(R.id.database_list);
            ListAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.list_item,new String[] {parser.KEY_CatName,parser.KEY_PoetID, parser.KEY_DownloadUrl ,parser.KEY_PubDate,parser.KEY_FileSizeInByte}, new int[] {
                            R.id.chk_database_list_item, R.id.txt_database_poet_id, R.id.txt_database_download_link,R.id.txt_database_pub_date,R.id.txt_database_size });
            list.setAdapter(adapter);
        }
    } 
```

这是我的`XMLParser`课：

```
package co.tosca.persianpoem;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {
    // XML node keys
    public static final String KEY_gdb = "gdb"; // parent node
    public static final String KEY_CatName = "CatName";
    public static final String KEY_PoetID = "PoetID";
    public static final String KEY_DownloadUrl = "DownloadUrl";
    public static final String KEY_FileSizeInByte = "FileSizeInByte";
    public static final String KEY_PubDate = "PubDate";
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }
                // return DOM
            return doc;
    }

    public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }

    public final String getElementValue( Node elem ) {
             Node child;
             if( elem != null){
                 if (elem.hasChildNodes()){
                     for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                         if( child.getNodeType() == Node.TEXT_NODE  ){
                             return child.getNodeValue();
                         }
                     }
                 }
             }
             return "";
      }

} 
```

最后我resive的错误：

```
04-12 21:35:08.822: I/http://ganjoor.sourceforge.net/sitegdbs.xml(2460): call xmlp
04-12 21:35:08.872: D/AndroidRuntime(2460): Shutting down VM
04-12 21:35:08.872: W/dalvikvm(2460): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
04-12 21:35:08.902: E/AndroidRuntime(2460): FATAL EXCEPTION: main
04-12 21:35:08.902: E/AndroidRuntime(2460): android.os.NetworkOnMainThreadException
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1108)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:580)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:512)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:490)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at co.tosca.persianpoem.XMLParser.getXmlFromUrl(XMLParser.java:42)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at co.tosca.persianpoem.Download_database.xmlp(Download_database.java:123)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at co.tosca.persianpoem.Download_database.access$0(Download_database.java:121)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at co.tosca.persianpoem.Download_database$1.onCheckedChanged(Download_database.java:94)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.RadioGroup.access$600(RadioGroup.java:52)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.CompoundButton.setChecked(CompoundButton.java:132)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.CompoundButton.toggle(CompoundButton.java:91)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.RadioButton.toggle(RadioButton.java:81)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.widget.CompoundButton.performClick(CompoundButton.java:103)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.view.View$PerformClick.run(View.java:14263)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.os.Handler.handleCallback(Handler.java:605)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.os.Looper.loop(Looper.java:137)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-12 21:35:08.902: E/AndroidRuntime(2460):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的权限：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET" /> 
```

我尝试使用包含这些 xml 文件之一的字符串作为 xml（发现连接到 Internet 或解析 xml 有问题吗？）但也出现错误，这是我的 logcat 使用预定义的字符串 xml

```
 04-12 21:33:24.032: I/http://ganjoor.sourceforge.net/sitegdbs.xml(1972): call xmlp
    04-12 21:33:24.032: I/getting DOM element(1972): getting DOM element
    04-12 21:33:24.072: D/AndroidRuntime(1972): Shutting down VM
    04-12 21:33:24.072: W/dalvikvm(1972): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
    04-12 21:33:24.082: E/AndroidRuntime(1972): FATAL EXCEPTION: main
    04-12 21:33:24.082: E/AndroidRuntime(1972): java.lang.NullPointerException
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at co.tosca.persianpoem.Download_database.xmlp(Download_database.java:190)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at co.tosca.persianpoem.Download_database.access$0(Download_database.java:121)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at co.tosca.persianpoem.Download_database$1.onCheckedChanged(Download_database.java:94)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.RadioGroup.access$600(RadioGroup.java:52)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.CompoundButton.setChecked(CompoundButton.java:132)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.CompoundButton.toggle(CompoundButton.java:91)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.RadioButton.toggle(RadioButton.java:81)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.widget.CompoundButton.performClick(CompoundButton.java:103)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.view.View$PerformClick.run(View.java:14263)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.os.Handler.handleCallback(Handler.java:605)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.os.Handler.dispatchMessage(Handler.java:92)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.os.Looper.loop(Looper.java:137)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at android.app.ActivityThread.main
(ActivityThread.java:4441)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at java.lang.reflect.Method.invoke(Method.java:511)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-12 21:33:24.082: E/AndroidRuntime(1972):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：感谢所有帮助我的朋友..不，我想我解决了我的一个问题，** 我添加了一个`AsyncTask`到 downloadxml 功能，我没有再遇到网络错误..这是我的新下载 xml 功能

```
 public class getxml extends AsyncTask<String, Void,String>{

        @Override
        protected String doInBackground(String... url) {

            try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url[0]);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
               // e.printStackTrace();
            } catch (ClientProtocolException e) {
               // e.printStackTrace();
            } catch (IOException e) {
               // e.printStackTrace();
            }

            Log.i("getxml", xml);
            return xml;
        }

    } 
```

但是现在我有一个`NullPointerException`但无法找到它发生的原因..我必须如何找到它的原因？

**编辑：我尝试了很多来修复 nullexeption 错误，但找不到它的原因。** 这是我的代码：

```
 private void xmlp(String url){
        Log.i(URL, "call xmlp");
        //String xml = parser.getXmlFromUrl(url); // getting XML old way

        new getxml().execute(url);// getting XML new way
        Log.i("xml Content", xml);
        try{
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList nl = doc.getElementsByTagName(parser.KEY_gdb);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // adding each child node to HashMap key => value
            map.put(parser.KEY_CatName, parser.getValue(e, parser.KEY_CatName));
            map.put(parser.KEY_PoetID, parser.getValue(e, parser.KEY_PoetID));
            map.put(parser.KEY_DownloadUrl, parser.getValue(e, parser.KEY_DownloadUrl));
            map.put(parser.KEY_PubDate, parser.getValue(e, parser.KEY_PubDate));
            map.put(parser.KEY_FileSizeInByte,"Size:"+ parser.getValue(e,parser.KEY_FileSizeInByte));
            // adding HashList to ArrayList
            menuItems.add(map);

        }
        Log.i("menuItems", menuItems.toString());
        ListView list=(ListView)findViewById(R.id.database_list);
        ListAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.database_list_item,new String[] {parser.KEY_CatName}, new int[] {
                R.id.chk_database_list_item });

      list.setAdapter(adapter);

}
catch (NullPointerException ex){
    Log.i("NullPointerException", ex.getMessage());
  }
    } 
```

我收到了这个错误

```
 04-13 12:21:50.372: I/menuItems(3295): [{DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/abvsEid-abvalkhir.zip, PubDate=2011-09-24, FileSizeInByte=Size:123331, CatName=ابوسعيد ابوالخير, PoetID=26}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/asdi-tvsi.zip, PubDate=2012-05-05, FileSizeInByte=Size:559711, CatName=اسدي توسي, PoetID=52}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/aghbal-lahvri.zip, PubDate=2011-09-24, FileSizeInByte=Size:551922, CatName=اقبال لاهوري, PoetID=42}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/amirkhsrv-dhlvi.zip, PubDate=2011-09-24, FileSizeInByte=Size:505209, CatName=اميرخسرو دهلوي, PoetID=34}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/anvri.zip, PubDate=2011-09-24, FileSizeInByte=Size:902760, CatName=انوري, PoetID=18}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/avhdi.zip, PubDate=2011-09-24, FileSizeInByte=Size:991556, CatName=اوحدي, PoetID=19}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/babatahr.zip, PubDate=2011-09-24, FileSizeInByte=Size:60641, CatName=باباطاهر, PoetID=28}, {DownloadUrl=http://sourceforge.net/projects/ganjoor/files/gdb/bidl-dhlvi.zip, PubDate=2011-09-24, FileSizeInByte=Size:2406463, CatName=بيدل دهلوي, PoetID=43}]
04-13 12:13:06.912: D/AndroidRuntime(3149): Shutting down VM
04-13 12:13:06.912: W/dalvikvm(3149): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
04-13 12:13:06.912: E/AndroidRuntime(3149): FATAL EXCEPTION: main
04-13 12:13:06.912: E/AndroidRuntime(3149): java.lang.NullPointerException
04-13 12:13:06.912: E/AndroidRuntime(3149):     at co.tosca.persianpoem.Download_database.xmlp(Download_database.java:258)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at co.tosca.persianpoem.Download_database.access$0(Download_database.java:132)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at co.tosca.persianpoem.Download_database$1.onCheckedChanged(Download_database.java:104)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.RadioGroup.access$600(RadioGroup.java:52)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.CompoundButton.setChecked(CompoundButton.java:132)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.CompoundButton.toggle(CompoundButton.java:91)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.RadioButton.toggle(RadioButton.java:81)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.widget.CompoundButton.performClick(CompoundButton.java:103)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.view.View$PerformClick.run(View.java:14263)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.os.Handler.handleCallback(Handler.java:605)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.os.Looper.loop(Looper.java:137)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-13 12:13:06.912: E/AndroidRuntime(3149):     at dalvik.system.NativeStart.main(Native Method) 
```

如您所见，我记录了menuItems并且从xml读取的接缝没有任何问题..我认为问题出在我的列表适配器中:(我收到错误的行是258，其中包含 `list.setAdapter(adapter);`我检查了我的自定义列表布局但找不到任何东西所以我在这里发布了我的自定义布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chk_database_list_item"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="start"
            android:text="CheckBox" />

        <TextView
            android:id="@+id/txt_database_size"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical|end"
            android:text="TextView" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/txt_database_status"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/txt_database_pub_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="TextView" />

        <TextView
            android:id="@+id/txt_database_download_link"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/txt_database_poet_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout>

</LinearLayout> 
```

有趣的是，当我将这些行添加到我的函数中时

```
catch (NullPointerException ex){
    Log.i("NullPointerException", ex.getMessage());
  } 
```

我收到了这个新错误

```
04-13 12:21:50.372: W/dalvikvm(3295): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
04-13 12:21:50.382: E/AndroidRuntime(3295): FATAL EXCEPTION: main
04-13 12:21:50.382: E/AndroidRuntime(3295): java.lang.NullPointerException: println needs a message
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.util.Log.println_native(Native Method)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.util.Log.i(Log.java:159)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at co.tosca.persianpoem.Download_database.xmlp(Download_database.java:263)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at co.tosca.persianpoem.Download_database.access$0(Download_database.java:132)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at co.tosca.persianpoem.Download_database$1.onCheckedChanged(Download_database.java:112)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.RadioGroup.access$600(RadioGroup.java:52)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.CompoundButton.setChecked(CompoundButton.java:132)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.CompoundButton.toggle(CompoundButton.java:91)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.RadioButton.toggle(RadioButton.java:81)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.widget.CompoundButton.performClick(CompoundButton.java:103)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.view.View$PerformClick.run(View.java:14263)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.os.Handler.handleCallback(Handler.java:605)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.os.Looper.loop(Looper.java:137)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-13 12:21:50.382: E/AndroidRuntime(3295):     at dalvik.system.NativeStart.main(Native Method) 
```

第 263 行包含：

```
Log.i("NullPointerException", ex.getMessage()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:48:42.443

你不能`xmlp(URL);`在`onCheckedChanged()`你的主 UI 线程中调用。您必须在不同的线程中运行此互联网呼叫。有很多方法可以做到这一点。最常见和最佳的做法是使用`AsyncTask`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:48:48.393

要处理来自`getXmlFromUrl(String url)`发出网络请求的错误，您可以扩展[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)类以启动单独的线程。您可以简单地将逻辑转移到`doInBackground(...)`AsyncTask 类的方法并使用该`onPostExecute(...)`方法返回数据。示例可以在 Google 上找到。

# iphone - 从另一个视图向 NSMutableArray 添加数据

> ID：15977450
> 
> 赞同：-5
> 
> 时间：2013-04-12T17:29:50.437
> 
> 标签：iphone, ios, objective-c, nsmutablearray

我想从我的 MenuViewController.h 中读取 NSMutableArray *menu，我厌倦了尝试。这是我现在的代码：

```
//  ViewController.h

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end

//  ViewController.m

#import "ViewController.h"
#import "MenuViewController.h"

@interface ViewController ()

@end

@implementation ViewController

#pragma mark - view Did Load, View Will Appear & didReceiveMemoryWarning

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

-(void)viewWillAppear:(BOOL)animated {

        MenuViewController *menuView = [[MenuViewController alloc] init];
    [self.view addSubview:menuView.view]; // this line is new

    NSLog(@"%@", menuView.self.menu);
    [menuView.menu addObject:@"Darommmm"];

    NSLog(@"%@", menuView.menu);

    [menuView.tableView reloadData];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

所以这是我的 viewController.m 和 .h 的代码。下面我将展示 MenuViewController.h 和 .m 的代码

```
//  MenuViewController.h

#import <UIKit/UIKit.h>

@interface MenuViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, retain) IBOutlet UITableView *tableView;
@property (nonatomic, retain) NSMutableArray *menu;
@property (nonatomic, retain) NSMutableArray *sections;

@end

//  MenuViewController.m

#import "MenuViewController.h"

@interface MenuViewController ()

@end

@implementation MenuViewController

@synthesize menu, sections, tableView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

#pragma mark - View Did load, View Will Appear & didReceiveMemoryWarning

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // set background to transparent + no seperator 
    [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
    self.tableView.backgroundColor = [UIColor clearColor];

    // allocate the mutable array for our menu
    self.menu       = [[NSMutableArray alloc] init];

    // standard menu items to our object
    [self.menu addObject:@"Dashboard"];
    [self.menu addObject:@"Chats"];
    [self.menu addObject:@"Visitors"];
    [self.menu addObject:@"Log Out"];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.menu count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.menu objectAtIndex:indexPath.row];

    cell.textLabel.textColor = [UIColor whiteColor];
    UIImageView *bg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sidebarcell"]];
    [bg setFrame:CGRectMake(0, 0, 161.5, 42.5)];
    // Configure the cell...
    cell.backgroundView = bg;

    return cell;
} 
```

我看不到我做错了什么，当我尝试对 menuView.self.menu 进行 NSLog 操作时，我得到（null）.. 希望你们能帮助我！干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:39:31.157

MenuViewController 的`menu`变量在您使用它时似乎从未被初始化，所以它只是 nil。`viewDidLoad`在您的 init 方法中放入一个数组（如果您已经初始化它，请不要在您的方法中设置它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:39:45.407

`menu`在您向其中添加元素时为零。`viewDidLoad`您在of 中对其进行初始化`MenuViewController`，仅在将该控制器添加到窗口后才会调用它。您可以使用此代码解决您的问题，但我不建议将此作为永久修复。

```
MenuViewController *menuView = [[MenuViewController alloc] init];
[self.view addSubview:menuView.view] // this line is new

NSLog(@"%@", menuView.self.menu);
[menuView.menu addObject:@"Darommmm"];

NSLog(@"%@", menuView.menu);

[menuView.tableView reloadData]; 
```

您也不需要`self`在访问类的属性之前调用。

这里的正确方法是将初始化移动`NSMutableArray`到控制器的`init`方法。

# jsf - 在另一个 jsf 页面中包含一个 jsf 页面作为条件

> ID：15977454
> 
> 赞同：0
> 
> 时间：2013-04-12T17:30:02.313
> 
> 标签：jsf, richfaces, facelets, templating, uiinclude

我希望你能帮助我。我使用jsf和richefaces，我有一个jsf页面，我想根据参数包含所有其他页面，我的问题是如何在我的xhtml文件中引入测试条件。

感谢您的回复，有我的代码，但它不起作用，我的 bean

```
 public class TestBean {
 private boolean ajoutH;
 private boolean listH;

 public boolean isListH() {
 FacesContext fc = FacesContext.getCurrentInstance();
 Map<String,String> params = 
                fc.getExternalContext().getRequestParameterMap();
 String id = params.get("listH");
 if(id.equals("listH")){

 return true;}
 else{
 return false;
}
 }
 public boolean isAjoutH() {
 FacesContext fc = FacesContext.getCurrentInstance();
 Map<String,String> params = 
                fc.getExternalContext().getRequestParameterMap();
 String id = params.get("ajoutH");
 if(id.equals("ajoutH")){
 return true;}
 else{
 return false;} 
```

还有我的页面 jsf

```
<rich:panelMenuGroup label="Hotes">
<rich:panelMenuItem>
<h:outputText value="Ajouter Hote" event="onclick">
<f:param value="{ajoutH}" name="ajoutH"  />
</h:outputText>
</rich:panelMenuItem>
<rich:panelMenuItem >
<h:outputText value="Gérer Hotes" >
<f:param value="{listH}" name="listH"  />
</h:outputText>

......
<h:panelGroup rendered="#{TestBean.ajoutH}">
<ui:include src="./ajoutHote.xhtml"/>
</h:panelGroup>
<h:panelGroup rendered="#{TestBean.listH}">
<ui:include src="./listHotes.xhtml"/>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:39:05.993

这里有不同的选项，由于您使用的是richfaces，因此我也将包含一个示例。

如果您选择纯 JSF 方法，请使用`<h:panelGroup>`带有`rendered`属性的 bean，由您的 bean 定义。此属性必须是`boolean`.

```
<h:panelGroup rendered="#{yourBean.yourCondition}">
    <ui:include src="pages/yourPage.xhtml">
    ...
</h:panelGroup> 
```

另一种选择是使用`<a4j:region>`. 它基本上以相同的方式工作。

```
<a4j:region rendered="#{yourBean.yourCondition}">
    <ui:include src="pages/yourPage.xhtml">
    ...
</a4j:region> 
```

无论您的选择如何，您的 bean 都应该定义条件：

```
public Boolean isYourCondition() {
    return /*your logic here*/;
} 
```

方法有很多种，任君挑选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:35:20.647

使用 a4j:outputpanel 并在其中使用 ui:include:

```
 <a4j:outputPanel rendered="#{someBean.someBoolean}">
        <ui:include src="somepage.xhtml" />
    </a4j:outputPanel> 
```

# mysql - 数据库查询以查找特定日期两个车站之间的火车，例如 irctc.co.in

> ID：15977456
> 
> 赞同：1
> 
> 时间：2013-04-12T17:30:08.267
> 
> 标签：mysql, database

我有以下数据库

### 表的表结构`trains`

```
CREATE TABLE IF NOT EXISTS `trains` (
    `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
    `train_no` varchar(5) COLLATE latin1_general_ci DEFAULT NULL,
    `train_name` varchar(50) COLLATE latin1_general_ci NOT NULL,
    `runsfrom` varchar(50) COLLATE latin1_general_ci NOT NULL,
    `SUN` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `MON` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `TUE` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `WED` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `THU` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `FRI` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `SAT` varchar(3) COLLATE latin1_general_ci NOT NULL,
    `DOE` date NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci AUTO_INCREMENT=1912 ; 
```

有这样的数据：

```
INSERT INTO `trains` VALUES (269, '12307', 'HWH JU  EXPRESS', 'HOWRAH JN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN', '2013-03-24');
INSERT INTO `trains` VALUES (270, '12308', 'JU HWH SUPFAST', 'JODHPUR JN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN', '2013-03-24');
INSERT INTO `trains` VALUES (381, '12461', 'MANDOR EXPRESS', 'DELHI', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN', '2013-03-24');
INSERT INTO `trains` VALUES (382, '12462', 'MANDOR EXPRESS', 'JODHPUR JN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN', '2013-03-24'); 
```

* * *

### 表的表结构`train_number`

```
CREATE TABLE IF NOT EXISTS `train_number` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `train_no` varchar(5) NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1912 ; 
```

有这样的数据：

```
INSERT INTO `train_number` VALUES (269, '12307');
INSERT INTO `train_number` VALUES (270, '12308');
INSERT INTO `train_number` VALUES (381, '12461'); 
```

### 表的表结构`train_schedule`

```
CREATE TABLE IF NOT EXISTS `train_schedule` (
    `train_no` varchar(5) NOT NULL,
    `stn_code` varchar(20) NOT NULL,
    `stn_name` varchar(50) NOT NULL,
    `route_no` varchar(2) NOT NULL,
    `arr_time` varchar(5) NOT NULL,
    `dep_time` varchar(5) NOT NULL,
    `halt_time` varchar(5) NOT NULL,
    `distance` varchar(4) NOT NULL,
    `day` varchar(2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

有这样的数据：

```
INSERT INTO `train_schedule` VALUES ('12307', 'HWH ', 'HOWRAH JN      ', '1', 'Sourc', '23:30', '', '0', '1');
INSERT INTO `train_schedule` VALUES ('12307', 'BWN ', 'BARDDHAMAN JN  ', '1', '00:35', '00:37', '2:00', '95', '2');
INSERT INTO `train_schedule` VALUES ('12307', 'ASN ', 'ASANSOL JN     ', '1', '01:52', '01:56', '4:00', '200', '2');
INSERT INTO `train_schedule` VALUES ('12307', 'DHN ', 'DHANBAD JN     ', '1', '03:05', '03:15', '10:00', '259', '2'); 
```

现在我想找到**在特定日期**找到两个车站之间的火车。所以我尝试了这个查询

```
SELECT distinct d1.train_no
FROM   train_schedule d1
INNER JOIN train_schedule d2 ON d2.train_no=d1.train_no
WHERE d1.stn_code = 'JU' and d2.stn_code = 'JP' 
```

但它同时显示了从 JU 到 JP 以及从 JP 到 JU 的数据，因此它使结果加倍。

我想让这个查询只 **在特定日期的一个方向上**正确，因为它运行的天数也在数据库中给出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:46:28.363

如果我正确理解您的问题，要回答仅返回一个方向的部分，请尝试以下查询：

```
SELECT d1.*
FROM   train_schedule d1
INNER JOIN train_schedule d2 ON d2.train_no=d1.train_no
WHERE d1.stn_code = 'JU' and d2.stn_code = 'JP' 
   AND d1.distance < d2.distance 
```

JU（出发）的距离总是小于 JP（到达）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T07:25:43.060

而不是 sun...sat 你应该使用 1..7 并使值 boolean 或 tinyint

```
 SELECT distinct d1.train_no
 FROM   train_schedule d1 WHERE DAYOFWEEK(#yyyy-dd-mm#) = 1
 INNER JOIN train_schedule d2 ON d2.train_no=d1.train_no
 WHERE d1.stn_code = 'JU' and d2.stn_code = 'JP' 
```

这应该工作

# angularjs - 这个 $resource 变量来自哪里？

> ID：15977459
> 
> 赞同：1
> 
> 时间：2013-04-12T17:30:20.987
> 
> 标签：angularjs

的[角度文档`$resource`](http://docs.angularjs.org/api/ngResource.%24resource)具有以下示例：

```
var User = $resource('/user/:userId', {userId:'@id'});
var user = User.get({userId:123}, function() {
  user.abc = true;
  user.$save();
}); 
```

我一直在谷歌搜索和阅读文档，但无法弄清楚是如何`@id`填充的。`$resources`里面似乎没有一节可以解释这一点。它一定是我没有遇到过的文档中的其他地方。谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:45:18.403

在 url`/user/:userId`中，该`userId`部分是占位符。您是在告诉 AngularJS 将其替换为实际的用户 id 以获取真实的 url。

在您编写的第二部分中，`{userId : '@id'}`您告诉 AngularJS，如果`userId`未指定 a，它应该使用`id`对象中的属性。

我将尝试用几个例子来说明：

如果你这样做

```
var user = User.get({userId : 123}); 
```

您已经明确指定了一个值，`userId`因此 Angular 将使用它来创建 url `/user/123/`。但是，如果你这样做

```
var user = User();
user.id = 123;
user.get() 
```

在这种情况下，您没有明确指定 的值`userId`，因此 Angular 将使用`user.id`for的值`userId`，并再次创建 url `/user/123/`。

就像 rajkamal 提到的，这对于非 GET 操作很有用。一个真正的用例是您执行以下操作：

```
// user wants to work with Post 10\. So we fetch that
var post = Post.get({postId : 10});

// user works with it, makes some changes
post.body = 'New body';
post.topic = 'New topic';

// user is done, and wants to save. You make a POST call
// without having to specify it's id again
post.save(); 
```

# asp.net - 在另一个复选框的单击上添加复选框列表项

> ID：15977460
> 
> 赞同：0
> 
> 时间：2013-04-12T17:30:22.740
> 
> 标签：asp.net, ajax, checkboxlist

我只是想知道是否有一种方法可以在选中另一个复选框时将新的复选框项添加到现有的 asp:checkboxlist 控件，而不必对页面进行完整的回发。无论是使用 javascript、jquery、ajax。只是想知道（如果有的话）我可以做这样的事情。

我一直在做一些研究，看来我可以使用 asp:UpdatePanel 进行部分回发。我以前从未使用过其中之一。有没有人有如何使用它们的例子？这是我所拥有的，但它仍在进行完整的回发

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <tr>
           <td width="50%">
                <asp:CheckBox runat="server" ID="chkEnglish" Font-Bold="true" TextAlign="Right" Text=" English" />
           </td>
           <asp:Panel runat="server" ID="pnlTopLanguages">
           <td rowspan="3" valign="top">
               <asp:CheckBoxList ID="chkTopLanguages" CssClass="cb chkTopLangs" TextAlign="Right" runat="server" />
               <asp:TextBox runat="server" ID="txtOtherLanguages" onkeyup="SetButtonStatus(this)" onclick="return clearLanguageSearchText()" Text="Other Languages..."></asp:TextBox>
               <asp:Button runat="server" ID="btnAddLang" Text="Add" OnClientClick="return CopyOtherLangs()" Enabled="false" /><br /><br />
               <asp:CheckBox runat="server" ID="chkManyOtherLanguages" CssClass="cb" Font-Bold="true" Text="Many other languages" />
               <cc3:AutoCompleteExtender ID="aceSearch" runat="server" MinimumPrefixLength="1" TargetControlID="txtOtherLanguages"
                                                                                        ServicePath="~/controls/wsCommunity.asmx" ServiceMethod="GetLanguageCompletionList"></cc3:AutoCompleteExtender>
           </td>
           </asp:Panel>
         </tr>
        </ContentTemplate>
     </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:35:49.937

建立 Adils 答案...添加一个复选框以检查另一个复选框，您可以使用：

```
$(".classOfCheckboxList").change(function() {
    $(this).append("<input type='checkbox' id='newbox' class='currentclass' value='someval' />");
}); 
```

正如 Adil 所说，这个新的动态添加的框将无法在代码隐藏中访问。

# c# - 在 C# 中的 DateTime 中需要 24 小时格式时间

> ID：15977461
> 
> 赞同：1
> 
> 时间：2013-04-12T17:30:27.120
> 
> 标签：c#, datetime

我的日期和时间以 24 小时格式存储在数据库中。我所做的是使用存储过程来获取所需的日期和时间并插入数据表中。但在数据表中，它会自动转换为 12 小时格式。从数据表中获取数据后，可以将其转换为 24 小时模式，但必须转换为字符串。但问题是我需要使用数据来创建图表它只接受 DateTime 格式。所以我想要的是某种方式将 12 小时时间转换为 24 小时时间格式而不将其更改为字符串。请帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T17:33:05.520

> 我的日期和时间以 24 小时格式存储在数据库中。

我希望它们实际上不是以*任何*文本格式存储的，而是以`DateTime`字段或类似的形式存储。不要将“我在运行 SQL 查询时看到的内容”与“存储在数据库中的内容”混淆。正如数字不存储为十进制数字序列一样，日期和时间也不应该存储为文本。

> 但在数据表中，它会自动转换为 12 小时格式。

不，如果您已正确完成所有操作，则应该将所有内容存储`DataTable`为`DateTime`. 在*调试器*中，您可能会看到 12 小时的字符串表示，但对象本身应该是`DateTime`.

基本上 12/24 小时问题只是真正问题的*症状*：不必要的字符串转换。追踪*这些*（并删除它们），其余的应该自己处理。`ToString()`因此，如果您在从 中提取值时正在调用`DataTable`，请停止这样做。相反，只需投射：

```
DateTime dateTime = (DateTime) row["foo"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:46:50.353

从您的故事中，我了解到`DataTable`实际包含一个`DateTime`值，该值**本身没有任何格式**，它基本上只存储自任意日期和时间以来的许多滴答声。您在表格可视化中看到的是默认`ToString()`转换，基于应用程序的文化设置。

最有可能的是，如果你在运行现有代码之前做这样的事情，格式会改变：

```
var cultureInfo = new CultureInfo(CultureInfo.CurrentCulture.Name);
cultureInfo.DateTimeFormat.LongTimePattern = "HH:mm:ss";
Thread.CurrentThread.CurrentCulture = cultureInfo; 
```

我建议通过显式调用转换为您喜欢的格式[`ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)。您将如何最好地实现这一点取决于您如何可视化来自`DataTable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:42:20.123

@Jon 说的都是对的。

但是，如果您只是错误地解释了自己，并且您`DateTime`的数据库中确实有对象，并且您希望**仅在显示时**将其格式化为 24 小时- 您可以将字符串格式的“HH”用于 24 小时格式。

例如，对于`myDateTime`表示 16:00：

```
var hourPart = String.Format("{0:HH}", myDateTime) 
Console.WriteLine(hourPart); // prints 16, and not 4PM. 
```

# mysql - 寻找mysql子查询

> ID：15977463
> 
> 赞同：0
> 
> 时间：2013-04-12T17:30:32.437
> 
> 标签：mysql

我有一个mysql查询疑问。我有一个学生表电子邮件是列名，在插入新学生之前，我需要确保无法插入相同的电子邮件。我怎样才能正确插入并签入一个查询（使用子查询）。

请帮我找到解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:39:45.347

正确的方法是使用唯一约束来强制它，但是如果你想在插入查询中做，你可以尝试类似

```
insert into student(field1, field2, email)
select 'value1', 'value2','test@test.com'  from dual
where not exists (select null from student where email='test@test.com') 
```

注意：如果您使用支持交易的引擎，您可能仍然会出现重复）

# server-side - 业务逻辑的服务器端技术

> ID：15977472
> 
> 赞同：1
> 
> 时间：2013-04-12T17:31:13.770
> 
> 标签：server-side, web-deployment, business-logic, web-technologies

假设我想开发一个具有注册用户并将注册为 twitter 应用程序的 Web 应用程序（允许用户授予它查看他们的时间线并代表他们发布的权限）。该应用程序的唯一功能将是根据用户的设置和愿望从用户的时间线转发推文。据我了解，该应用程序的网站将在客户端使用 HTML、CSS 和 JS 等常用技术。服务器端（用户定义应用程序应该转推的推文类型）必须在 PHP/Python/Perl/... 中基于 DB MySQL/Postgre/... 进行编码

我不明白并且非常感谢您的帮助，真正的“业务逻辑”将在哪里编码？例如，我应该使用什么技术来编写将位于我的服务器上的功能：每 5 分钟联系一次 Twitter 服务器，阅读我拥有的每个用户的时间线，检查是否有值得转发的推文（根据用户定义的内容） )，并向 Tweeter 发送必要的命令，以代表我的用户转发所选推文。

所有这一切都将为用户离线发生，并且将是一个持续的和循环的过程——但我应该使用什么技术来编码呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:46:47.640

我听说过[这个用于 PHP 的 API](https://github.com/abraham/twitteroauth)。不过，它实际上是我听说过的唯一一个 PHP 版本。我知道那里有一些很好的 Python 库，但我不了解 Perl。

我实际上正在为 C# 开发一个新的 API（不适合你，因为你显然没有使用 Windows 服务器），并在处理一个企业 Web 应用程序时开始构建它，该应用程序提示了几个类似于你的问题自己的。

这是您将要做的事情：

1.  在开始之前，您必须与 Twitter 的数据合作伙伴之一取得联系（我相信您可以联系 Twitter 以获取参考）
    *   这样做的原因是您将需要比您想象的更多的请求
    *   用于 Twitter 记录速率上限的 Twitter 时间间隔为 900 秒（5 分钟）
    *   如果您在每个速率限制中仅查询一次用户的时间线，则使用一般速率限制，您将网站上的访问者数量限制为一次 300
    *   这就是它变得棘手的地方 - 如果每个用户都发布一条推文（意味着您发送推文 - 不受速率限制 - 然后刷新时间线 - 速率限制 - 以便他们可以看到更新的推文），那么您现在已经放弃了最大活动数用户在任何给定时间增加到 150
    *   考虑公司自己的时间线（-1 位访问者），再加上打开浏览器的访问者数量（现在您需要更多逻辑，您必须将它们踢掉，或者只是跟踪您不会刷新的时间线)、发布超过一条推文的用户数量（每条推文为-1 位访问者）等。
    *   *故事的寓意*：联系他们的一个数据合作伙伴，让自己获得无限的请求，或者至少有足够多的数量来容纳您的访问者/用户数量（加上一些填充）
    *   **如果您遵守此建议，请跳过第 2 步和第 3 步，否则请跳过第 4 步**
2.  （注意：第 2 步和第 3 步仅适用于速率上限实施）使用您想要的语言，创建一个在服务器上运行的服务并向 Twitter 发出查询
    *   根据您提供的信息，我建议您使用 Python 来制作此服务
    *   该服务将始终运行并按自己的时钟运行，以将请求之间的 5 分钟间隔基于
    *   您将不得不使用缓存或数据库系统来存储数据
3.  （注意：步骤 2 和 3 仅适用于速率上限实施）添加必要的代码以向您为数据创建的服务发出请求，并每 5 分钟执行一次这些请求
    *   我建议用于向服务发出这些请求的时钟比用于服务的时钟慢一点，以解决数据传输缓慢等情况。
    *   您还必须调用服务上的一些方法来从队列中添加/删除用户
4.  （注意：第 4 步仅适用于无限制请求实施）忘记服务，只需将请求代码直接包含在用户所在的页面中即可。
    *   用户的时间线将根据他们访问网站的时间或上次刷新时间线的时间进行更新（如果发布了推文）
    *   此实施的唯一警告是您必须为无限/更大的数据速率限制付费

# android - 在用户的 Facebook 墙上发布照片

> ID：15977473
> 
> 赞同：0
> 
> 时间：2013-04-12T17:31:14.560
> 
> 标签：android, facebook, image, posting

下面是我的代码，我在我的应用程序中集成了**facebook**。我试图让用户在登录后能够在他的墙上发布图像。但我已经三天没有成功了。见过很少这样的帖子，[但](https://stackoverflow.com/questions/10160449/post-a-picture-to-the-wall-from-android)我没有得到任何数据（只是它导致空数据`data[]`）。我什至在维护会话方面也遇到了麻烦。有人可以发布工作代码或至少一些我可以在facebook墙上发布图片的来源吗？希望我下面的代码很清楚，我对下面代码的尝试也很清楚。

**活动的 onCreate():-**

```
public class FacebookActivity extends BaseActivity {
private static String APP_ID = "1303786178"; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fb_screen);

        btnFbLogin = (Button) findViewById(R.id.fbloginbtn);
        btnFbLogout = (Button) findViewById(R.id.fblogoutbtn);
        btnPostToWall = (Button) findViewById(R.id.fbpostbtn);
        msget = (EditText)findViewById(R.id.fbmsget);
        mAsyncRunner = new AsyncFacebookRunner(facebook);
         mHandler = new Handler();
        String passedpath = getIntent().getStringExtra("imagepath").toString();

        imageuri = Uri.parse(passedpath);

        /**
         * Login button Click event
         * */
        btnFbLogin.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("Image Button", "button Clicked");
                loginToFacebook();
            }
        });

        btnFbLogout.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("Image Button", "button Clicked");
                logoutFromFacebook();
            }
        });

        /**
         * Posting to Facebook Wall
         * */
        btnPostToWall.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //postToWall(imageuri);

                getAlbumId();
            }
        });

           } 
```

**Posting on Wall 在我的代码中包含两个函数，一个是 getAlbumId()，另一个是 posttowall()，它将从 getAlbumId() 调用：-**

```
public void getAlbumId()
     {

         dialog = ProgressDialog.show(FacebookActivity.this, "","Please Wait...", true, true);

         //String wallAlbumID = null;
         mAsyncRunner.request("me/albums", new BaseRequestListener(){

            @Override
            public void onComplete(String response, Object state) {
                // TODO Auto-generated method stub
                try{
                Log.d("response in album"," "+response);
                JSONObject json = Util.parseJson(response);
                 JSONArray albums = json.getJSONArray("data");
                 for (int i =0; i < albums.length(); i++) {
                     JSONObject album = albums.getJSONObject(i);
                     if (album.getString("type").equalsIgnoreCase("wall")) {
                        final String wallAlbumID = album.getString("id");
                        globalalbid = wallAlbumID;
                         Log.d("JSON", wallAlbumID);
                         break;
                     }

                 }

                 dialog.dismiss();
                    mHandler.post(new Runnable() {
                        @Override
                        public void run() {
                            Toast.makeText(getApplicationContext(), "id: " + globalalbid, Toast.LENGTH_LONG).show();
                            if(globalalbid != "")
                            postToWall(imageuri, globalalbid);
                        }
                    });

                }catch (JSONException e) {
                    e.printStackTrace();
                }

            }

         });

          } 
```

**贴在墙上的功能：**

```
public void postToWall(Uri locuri, String wallid) {

        if (facebook.isSessionValid()) {
            Util.showAlert(this, "Warning", "You must first log in.");
        } else {
            dialog = ProgressDialog.show(FacebookActivity.this, "","Please Wait...", true, true);

        // post on user's wall.
         Uri photoUri = locuri;
         if (photoUri != null) {
             Bundle params = new Bundle();
             try {
                 params.putByteArray("photo",
                         Utility.scaleImage(getApplicationContext(), photoUri));
             } catch (IOException e) {
                 e.printStackTrace();
             }
             String imagecaption = msget.getText().toString();
             if(imagecaption != "")
             params.putString("caption", imagecaption);
             mAsyncRunner.request(wallid+"/photos", params, "POST", new PhotoUploadListener(), null);
         } else {
             Toast.makeText(getApplicationContext(),
                     "Error from the pic", Toast.LENGTH_SHORT)
                     .show();
         }
        }
     } 

} 
```

我总是让专辑ID为空。我尝试获取专辑ID的方式有什么问题吗？因为我在一些帖子上看到了那些尝试访问专辑 ID 然后将图像发布到专辑上的人。他们似乎将墙作为专辑名称中的常见发现。如果是这样，一些新的包含时间轴照片名称，那么我们如何找到相册ID。请建议。

**注意：**我希望图像在墙上可见，而不仅仅是相册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:43:31.093

与其将照片上传到用户的相册，不如将图像发布到`/me/feed`。确保您正在向用户请求`publish_stream`权限。这会将照片直接上传到用户的墙上，而不是去相册。

# python - 我可以让 pylibmc 与 python 3.2 一起工作吗？

> ID：15977475
> 
> 赞同：2
> 
> 时间：2013-04-12T17:31:21.410
> 
> 标签：python, python-3.x, memcached

我安装了一些依赖项：

```
sudo apt-get install python3.2-dev
sudo apt-get install libmemcached-dev 
```

并试图：

```
pip install pylibmc 
```

在 virtualenv 中使用我的 python 3.2

但有这个：

```
_pylibmcmodule.c:77:9: error: ‘PylibMC_Client’ has no member named ‘ob_type’
_pylibmcmodule.c:1812:39: error: ‘PyInt_Type’ undeclared (first use in this function)
_pylibmcmodule.c:1841:53: error: ‘PylibMC_Client’ has no member named ‘ob_type’
error: command 'gcc' failed with exit status 1 
```

我该如何解决？
（它适用于 python 2.7）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:00:19.197

**编辑**：看起来它正在“master”中工作，但尚未发布。

我写了一些 python 3 支持 -[请参阅我的 repo 分支](https://github.com/pashinin/pylibmc/tree/python3-test)

我修改了测试，但仍然有几个失败：

```
1\. "test_touch" (test_client.py) 
```

python 2和3对我来说都失败了。即使是未更改的代码。（看起来像我的内存缓存问题 - 不知道）

```
>       ok_(self.mc.touch(touch_test, 5))
E       SystemError: error return without exception set 
```

* * *

```
2\. "test_cas" (test_client.py) 
```

仅对 python 3 失败。Python 2 没问题。

```
>           rv, cas = mc.gets(k)
E           ValueError: gets without cas behavior 
```

这可能是由于将 Integer 对象保存为`pickle`.
负责的代码是：

```
} else if (PyLong_Check(value_obj)) {
    serialized->flags |= PYLIBMC_FLAG_LONG;
    PyObject* tmp = PyNumber_Long(value_obj);
    store_val = PyObject_Bytes(tmp);
    Py_DECREF(tmp); 
```

我不能在 python 3 中使用它，因为会`PyObject_Bytes` [产生错误](http://docs.python.org/3.2/c-api/object.html?highlight=pyobject_bytes#PyObject_Bytes)：

```
>       ok_(mc.set(k, 0))
E       TypeError: 'int' object is not iterable 
```

* * *

我运行这样的测试：

```
py.test tests/test_client.py 
```

# jquery - 将函数内部的 CSS 类转换为 jQuery 动画

> ID：15977476
> 
> 赞同：0
> 
> 时间：2013-04-12T17:31:23.513
> 
> 标签：jquery, jquery-animate, css

我在一个函数内的 jQuery 中切换了这个 css 类（代码归功于@Laurence）：

```
function rocksType_shift(direction) {
    $('#rocksType_DBitems_container .before').removeClass('before')[direction]().addClass('before');
          $('#rocksType_DBitems_container .current').removeClass('current')[direction]().addClass('current');
          $('#rocksType_DBitems_container .after').removeClass('after')[direction]().addClass('after');
} 
```

整个上下文-[小提琴](http://jsfiddle.net/vNxeY/)。

这些类具有以下配置：

```
/* CSS styling for the 1st visible item (before) */
.before {
  background-color: Aquamarine;
  -webkit-border-radius: 70px 24px 24px 24px; 
    -moz-border-radius: 70px 24px 24px 24px;       
    border-radius: 70px 24px 24px 24px;
}

/* CSS styling for the 2nd visible item (current) */
.current {
  background-color: Aqua;
  border: 4px solid #000000; 
    -webkit-border-radius: 24px 24px 24px 24px; 
    -moz-border-radius: 24px 24px 24px 24px; 
    border-radius: 24px 24px 24px 24px;
}

/* CSS styling for the 3rd visible item (after) */
.after {
  background-color: Aquamarine;
  -webkit-border-radius: 24px 24px 24px 70px; 
    -moz-border-radius: 24px 24px 24px 70px; 
    border-radius: 24px 24px 24px 70px; 
```

问题：我想使用 animate()，所以我可以为边界半径设置动画。这可以做到吗？

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:39:19.977

我知道你说过你希望它与 animate() 一起使用，但既然你已经使用 CSS3，为什么不通过添加过渡来做到这一点`.rocksType_DBitem`呢？

[http://jsfiddle.net/vNxeY/1/](http://jsfiddle.net/vNxeY/1/)

# git - MS Windows 上便携式 git 的“/etc/profile”文件中父目录的相对路径

> ID：15977479
> 
> 赞同：0
> 
> 时间：2013-04-12T17:31:35.310
> 
> 标签：git, unix, relative-path

如何在[Git 的](http://git-scm.com/) `/etc/profile`文件中指定相对路径（特别是调用 git.exe 的父目录的相对路径）？

* * *

## 背景

我非常喜欢让你的开发基础设施尽可能地便携——*便携*意味着“*跨 MS Windows 机器*的便携”而不是“*跨操作系统的便携*”。

此外，我开始喜欢[Git](http://git-scm.com/)和它的 MS Windows 兄弟[mysysgit](http://code.google.com/p/msysgit/)，感谢这篇[文章](http://markashleybell.com/portable-git-windows-setting-home-environment-variable.html)，我还能够更改 Git 的默认`HOME`( `C:/users/<username>`) 目录以促进整个事物的真正可移植性（我的开发工具位于闪存驱动器上，因此我的便携式“HOME”目录）。

但是，我还没有完全做到：

*   假设一个版本的可移植 Git 位于 `F:/apps/git/<gitversion>`
*   上述文章建议将`HOME`Git 查找的目录直接放在上述目录 ( `F:/apps/git/<gitversion>/home`) 的下方。
*   但是，我希望它在`F:/apps/git/home`
*   因此我认为这样的事情可能会让我到达那里：`HOME="/../home"`或`HOME="../home`“，但Git一直抱怨它找不到目录。所以我一定做错了什么;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T04:02:44.123

在以下代码下方（或在处理的任何代码之后`$HOME`）

```
if [ ! -d "$HOME" ]; then
    printf "\n\033[31mERROR: HOME directory '$HOME' doesn't exist!\033[m\n\n"
    echo "This is an error which might be related to msysGit issue 108."
    echo "You might want to set the environment variable HOME explicitly."
    printf "\nFalling back to \033[31m/ ($(cd / && pwd -W))\033[m.\n\n"
    HOME=/
fi 
```

指定路径，您需要相对于`pwd`

```
# normalize HOME to unix path
# HOME="/Home/Edward" relative to git-bash
HOME="$(pwd -W)/../home"
HOME="$(cd "$HOME" ; pwd)" 
```

您可以`cd $HOME`在配置文件末尾添加以将工作目录启动到 HOME

# javascript - Javascript 的 CDate

> ID：15977486
> 
> 赞同：1
> 
> 时间：2013-04-12T17:32:10.727
> 
> 标签：javascript, vb.net, firefox, date

我一直在我的程序中使用**CDate**，但担心的是，它只在 IE 中有效。 `cdate(strValue) .`如果我将**strvalue**的值作为 01/02 传递，它会以**Wed Jan 2 等**形式返回。我正在寻找 javascript 中的相同实现，以便它可以在其他浏览器中工作。我正在尽我所能找到一个，但我并不幸运。谁能告诉我我们可以在 javascript 中使用什么 api 而不是使用 CDate ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:40:15.847

您可以尝试以下代码：

```
var comp = "05/04".split('/');
var m = parseInt(comp[0], 10);
var d = parseInt(comp[1], 10);
var date = new Date(null, m - 1, d);
date.toDateString();   //this line will return the date 
```

现在您可以根据需要解析字符串并操作字符串。

# android - 针对 Android 平板电脑的媒体查询是什么？

> ID：15977492
> 
> 赞同：1
> 
> 时间：2013-04-12T17:32:24.840
> 
> 标签：android, media, tablet

我正在使用以下媒体查询。这些中的任何一个都针对 Android 平板电脑吗？我正在尝试为 Android 平板电脑（7 英寸和 10 英寸）设计横向和纵向。

这些查询会处理这个问题，还是我需要不同的目标来支持 Android 平板电脑？

桌面@media all and (max-width: 1024px)

Apple iPad @media all and (device-width: 768px) and (device-height: 1024px) and (orientation: portrait) @media all and (device-width: 768px) and (device-height: 1024px) and (orientation:景观）

移动设备 @media all and (max-width: 767px) @media all and (max-width: 600px) @media all and (max-width: 480px)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T11:52:25.807

还有另一个帖子，里面有很多有价值的答案，[可以在这里找到！](https://stackoverflow.com/questions/6370690/media-queries-how-to-target-desktop-tablet-and-mobile?rq=1)

一个答案陈述了以下查询：

```
@media (min-width:320px) { /* smartphones, iPhone, portrait 480x320 phones */ }
@media (min-width:481px) { /* portrait e-readers (Nook/Kindle), smaller tablets @ 600 or @ 640 wide. */ }
@media (min-width:641px) { /* portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 or 854x480 phones */ }
@media (min-width:961px) { /* tablet, landscape iPad, lo-res laptops ands desktops */ }
@media (min-width:1025px) { /* big landscape tablets, laptops, and desktops */ }
@media (min-width:1281px) { /* hi-res laptops and desktops */ } 
```

# php - 不明白为什么 PHP 联系表单显示错误消息而不发送

> ID：15977494
> 
> 赞同：-4
> 
> 时间：2013-04-12T17:32:26.213
> 
> 标签：php, html, css

[http://madaxedesign.co.uk/dev/contact.php](http://madaxedesign.co.uk/dev/contact.php)

你好，

我想知道是否有人能告诉我，为什么当我填写这张表格时，我得到它只会给我这个信息。

`You do not have permission to use this script from another URL, nice hacking attempt ;p.`

而不是说谢谢并继续向我的电子邮件客户端发送电子邮件。

我还是 php 的新手，所以任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:37:23.513

因此，您的`<form>`操作设置为`/contact.php`，它应该是`/dev/contact.php`或者只是`contact.php`因为您已经在`/dev/`.

通过使用 Chomes 检查器更改表单操作，我能够成功提交消息。

# javascript - 使用 Knockout 将任何键（通过键码）绑定到操作

> ID：15977496
> 
> 赞同：2
> 
> 时间：2013-04-12T17:32:36.973
> 
> 标签：javascript, knockout.js

我正在寻找一种方法来将许多不同的键绑定到我的视图模型中的不同操作/功能。

我发现了这个[示例](http://geekswithblogs.net/michelotti/archive/2011/10/11/knockoutjs-custom-binding-for-invoking-an-action-with-enter-key.aspx)，其中使用绑定处理程序将操作绑定到输入键。

但是如何修改这个处理程序以支持提供的键码？我希望能够对所有类型的键使用相同的处理程序，并且最好还与修饰键结合使用。

```
ko.bindingHandlers.executeOnEnter = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var allBindings = allBindingsAccessor();
        $(element).keypress(function (event) {
            var keyCode = (event.which ? event.which : event.keyCode);
            if (keyCode === 13) {
                allBindings.executeOnEnter.call(viewModel);
                return false;
            }
            return true;
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:09:08.710

你可以这样做：

```
ko.bindingHandlers.actionKey = {
    init: function(element, valueAccessor, allBindings, data) {
        var handler = function(data, event) {
            var keys = ko.utils.unwrapObservable(allBindings().keys) || [13]; //default to Enter Key
            if (!Array.isArray(keys))
                keys = [keys];
            if (keys.indexOf(event.keyCode) > -1) {
                valueAccessor().call(data, data, event);
            };
        };
        var newValueAccessor = function() {
            return { keyup: handler };
        };
        ko.bindingHandlers.event.init(element, newValueAccessor, allBindings, data);
    }
}; 
```

你可以像这样使用这个绑定：

```
Observable Keys: <input data-bind="actionKey: action, keys: keyCodes" /><br/>
Inline Keys: <input data-bind="actionKey: action, keys: [33, 34]" /><br/>
Inline Key: <input data-bind="actionKey: action, keys: 33" /><br/>
Default Keys: <input data-bind="actionKey: action" /><br/> 
```

这是一个演示此绑定[的小提琴。](http://jsfiddle.net/tyrsius/SuaNe/1/)

# multithreading - TIdHttp 访问冲突同时在多个线程上运行

> ID：15977505
> 
> 赞同：5
> 
> 时间：2013-04-12T17:33:11.363
> 
> 标签：multithreading, delphi, http

我正在尝试在 delphi 中做一个“愤怒的 http 下载器”，但 TIdHttpCli 不能做我想做的事。由于某种原因，它不会在许多线程中同时运行。请看一下这个问题的简单演示：

```
procedure HttpRequest(AParam : Integer); stdcall;
var
  lHttp: TIdHttp;
begin
  lHttp := TIdHttp.Create(nil);
  {
  lHttp.Get(
    'http://stackoverflow.com/questions/15977505/',
    TMemoryStream.Create
  );
  }
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
  tid: DWORD;
begin
  for i := 0 to 4 do
    CreateThread(nil, 0, @HttpRequest, nil, 0, tid);
end; 
```

*David Heffernan 编辑：我简化了问题中的代码。这段代码仍然表现出这种行为。我的测试环境是 XE3 和随 XE3 一起交付的 Indy。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T19:17:38.843

您有一个多线程应用程序。为了让内存管理器工作，多线程应用程序必须设置[`IsMultiThread`](http://docwiki.embarcadero.com/Libraries/en/System.IsMultiThread)为`True`. 如果您的线程基于`TThread`.

从[文档](http://docwiki.embarcadero.com/Libraries/en/System.IsMultiThread)中：

> IsMultiThread 设置为 True 表示内存管理器应该支持多个线程。IsMultiThread 由 BeginThread 和类工厂设置为 True。

因为您正在调用原始 Windows API `CreateThread`，而不是使用 RTL 支持的线程例程，所以系统中没有任何内容设置`IsMultiThread`为`True`. 因此内存管理器假定只有一个线程，并且不会锁定对内存管理器的共享数据结构的访问。因此，您观察到的问题。

如果您只是`IsMultiThread := True`在启动时设置，您的代码将完美运行。或者切换到使用`TThread`基于线程。

请注意，您的问题与 Indy 完全无关。您只需在线程中分配堆内存即可看到此失败。这个程序每次在我的系统上都会死掉：

```
{$APPTYPE CONSOLE}

uses
  SysUtils, Windows;

function HttpRequest(AParam : Integer): DWORD; stdcall;
var
  i: Integer;
  P: Pointer;
begin
  Result := 0;
  for i := 1 to 100000 do
    GetMem(P, 1);
end;

var
  i: Integer;
  tid: DWORD;

begin
  try
    //IsMultiThread := True;//include this line to make program correct
    for i := 0 to 15 do
      CreateThread(nil, 0, @HttpRequest, nil, 0, tid);
  except
    on E:Exception do
      Writeln(E.Message);
  end;
  Readln;
end. 
```

# slickgrid - Dynamics CRM 中的 Slickgrid 寻呼机，每行一个图标

> ID：15977507
> 
> 赞同：0
> 
> 时间：2013-04-12T17:33:13.623
> 
> 标签：slickgrid

我正在开发一个在 Microsoft Dynamics CRM (MSCRM) 中运行的应用程序。本质上，在这种环境中，包括 HTML、JavaScript、CSS 和图像文件在内的 Web 资源都存储在系统中，可以在页面上引用。我已经运行了 SlickGrid，但有一个问题是寻呼机按钮每个都占据一整行。HTML的关键部分是：

```
<div id="SPLocation" style="width:100%; height:80%">Grid</div>
<DIV id="SPPager" style="width:100%;height:20px;">Pager</DIV 
```

但它看起来像这样：！[http://www.clew-consulting.com/Temp/SGIssue.png](http://www.clew-consulting.com/Temp/SGIssue.png)

（希望这张图片有效）。请注意，每个图标占据一整行。我检查了所有样式和图像，它们看起来还不错。图标是功能性的。原因可能是 display:inline-block 没有被拾取，但它在样式表中。这可能与 MSCRM 中的环境有关，但其他标记看起来都很好。

不幸的是，我无法运行 IE 开发人员并显示可以检查 CSS 的屏幕的这一部分。

有人有什么想法吗？我知道我没有发布所有信息。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T16:41:29.327

分页器样式在**slick.pager.css**文件中定义。将此文件放在您的 css 文件夹中，然后将以下行添加到您的 html 文件中（**不要忘记将 [path to your file] 替换为您的真实路径**）：

```
 <link href="[path to your file]/slick.pager.css" rel="stylesheet"> 
```

# windows-phone-8 - 使用 cpp 在 WP8 上升级应用程序时如何防止丢失保存数据

> ID：15977509
> 
> 赞同：0
> 
> 时间：2013-04-12T17:33:22.093
> 
> 标签：windows-phone-8, upgrade, restore

cpp 没有独立存储设置或独立存储文件。所以我只是使用“FILE”和“fopen”来存储游戏数据。

但是当我使用“Xapdeploy”重新安装或升级应用程序或使用 vs 进行调试时，保存数据将丢失。那么我如何将它标记为独立存储文件。我的意思是当我升级应用程序时，该文件不会被系统删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:41:03.453

您需要将数据保存在`LocalFolder`（独立存储的新名称）中才能持久保存。

您可以从 C++/CX 中使用 Windows 运行时 API，这可能是最好的方法（特别是寻找 StorageFolder 和 StorageFile），尤其是如果您想保持与 Windows 应用商店应用程序的便携性。

但是，如果您想使用 fopen，主要问题是这需要一个`char[]`，而不是`wchar_t[]`平台其余部分使用的文件名。为了解决这个问题，您需要...

```
void SaveToFile()
{
    // get local folder (= isolated storage)
    auto local = Windows::Storage::ApplicationData::Current->LocalFolder;
    auto localFileNamePlatformString = local->Path + "\\game.sav";

    FILE* pFile;
    auto f = _wfopen_s(&pFile, localFileNamePlatformString->Data(), L"w");
    auto res1 = fprintf(pFile, "123456789");
    auto res2 = fclose(pFile);
} 
```

# jquery - 如何使用 jquery 插件验证上传的文件？

> ID：15977510
> 
> 赞同：1
> 
> 时间：2013-04-12T17:33:28.403
> 
> 标签：jquery, jquery-validate

我在 wordpress 中使用这个脚本。

这是我的代码：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://raw.github.com/jzaefferer/jquery-validation/master/jquery.validate.js"></script>
<script src="https://raw.github.com/jzaefferer/jquery-validation/master/additional-methods.js"></script>
<script>
            jQuery(document).ready(function($){
                $("#subsciptionForm").validate({
                    rules: {
                        headshot: {
                            required: true,
                            accept: "jpg,png,jpeg,gif"
                        },
                        actorcv: {
                            required: true,
                            accept: "application/msword, application/pdf"
                        }
                    },
                    messages: {
                        headshot: {
                            required: 'Select an image to upload',
                            accept: 'Only images with type jpg/png/jpeg/gif are allowed'
                        },
                        actorcv: {
                            required: "Select a CV",
                            accept: 'Only doc/docx/pdf files are allowed'
                        }
                    },
                    submitHandler: function(form) {
                        //form.submit();
                        var url = '<?php echo SET_SUBSCRIBER; ?>';
                        var datastring = $("form").serialize();
                        alert(datastring); return false;              
                        $.ajax({
                            type: "POST",
                            url: url,
                            data: datastring,
                            success: function(data) {
                                //alert(data); return false;
                                form.submit();
                            }
                        });
                        return false;
                    }
                });
            });
        </script> 
```

这是表单域

```
 <!-- Upload Headshot -->
                    <tr>            
                        <td class="title_cell" width="23%">
                            Upload Headshot :<span class="required">*</span>
                        </td>
                        <td class="field_cell">
                            <input type="file" class="required" name="headshot" size="25"> (jpg, gif or png only, with maximum 1MB size)
                        </td>
                    </tr>
                    <!-- Upload Actor's CV -->
                    <tr>            
                        <td class="title_cell" width="23%">
                            Upload Actor's CV :<span class="required">*</span>
                        </td>
                        <td class="field_cell">
                            <input type="file" class="required" name="actorcv" size="25"> (MS-word or PDF only, with maximum 1MB size)
                        </td>
                    </tr> 
```

它适用于图像文件验证，但不验证 pdf 和 doc 文件。继续提供我在消息“ `Only doc/docx/pdf files are allowed`”中定义的相同消息。我也在控制台中得到这个：

```
TypeError: b.browser is undefined 
```

编辑：

在 Kevin B 的评论帮助后 TypeError 消失了，但它仍然没有验证 pdf 文件。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:20:39.777

[该`accept`规则用于通过 mime-type 进行验证](http://docs.jquery.com/Plugins/Validation/Methods/accept#mimetype)。

如果您尝试通过文件扩展名进行验证，则需要使用该`extension`规则。

请参阅： [http ://docs.jquery.com/Plugins/Validation/CustomMethods/extension#extension](http://docs.jquery.com/Plugins/Validation/CustomMethods/extension#extension)

```
rules: {
    headshot: {
        required: true,
        extension: "jpg,png,jpeg,gif"
    },
    actorcv: {
        required: true,
        accept: "application/msword, application/pdf"
    }
}, 
```

# php - 将 CSV 文件导入 MySQL 数据库

> ID：15977518
> 
> 赞同：0
> 
> 时间：2013-04-12T17:34:10.197
> 
> 标签：php, mysql, csv, import

我正在尝试为我的网站创建一个 CSV 导入器。我需要使用 CSV 文件将一些广告系列导入我的 MySQL 数据库。

CSV 文件有 12 个标题，但我只想从标题 1、3、5、6 和 8 导入数据。下面的代码导入 csv 文件，但是，它将每个标题的数据放在错误的位置数据库。

请问有人能告诉我错误在哪里吗？

谢谢 -

```
if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    //loop through the csv file and insert into database 
    do { 
        if ($data[0]) { 
            mysql_query("INSERT INTO campaigns (campaignname, url, requirements, rate, countrys) VALUES 
                ( 
                    '".addslashes($data[1])."', 
                    '".addslashes($data[3])."', 
                    '".addslashes($data[5])."', 
                    '".addslashes($data[6])."', 
                    '".addslashes($data[8])."' 
                ) 
            "); 
        } 
    } while ($data = fgetcsv($handle,0,",","'")); 
    // 

    //redirect 
    header('Location: import.php?success=1'); die; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:43:33.903

我认为使用[LOAD DATA INFILE更简单](http://dev.mysql.com/doc/refman/5.0/es/load-data.html)

# java - 在 JTabbedPane 中更新 JComponent

> ID：15977520
> 
> 赞同：0
> 
> 时间：2013-04-12T17:34:19.943
> 
> 标签：java, swing, button, user-interface, action

我有一个看起来像这样的 JTabbedPane：

```
 overview= new JTabbedPane();

            JComponent accountinfo= AccountOverview(guest.toString());
            overview.addTab ("Account Overview", accountinfo);
            overview.setMnemonicAt(0, KeyEvent.VK_1);

            JFrame tabbed= new JFrame("AIR Reservation");
            tabbed.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            tabbed.add(overview);
            tabbed.setSize(650,500);
            tabbed.setLocationRelativeTo(null);
            tabbed.setVisible(true);
        } 
```

guest.toString 打印出客户的信息。我的 AccountOverview(guest.toString) 方法如下所示：

```
 JPanel panel = new JPanel(false);
    JLabel filler = new JLabel(text);

    JButton editName= new JButton ("Edit Name");
    editName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                JFrame nameframe= new JFrame("Name Edit");
                String name = JOptionPane.showInputDialog(nameframe, "Change name to: ");
                guest.setName(name);
            }
        });
    JButton editGender= new JButton ("Edit Gender");
    editGender.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                JFrame genderframe= new JFrame("Gender Edit");
                String gender = JOptionPane.showInputDialog(genderframe, "Change gender to: ");
                guest.setGender(gender);
            }
        });
    JButton editBirthday= new JButton ("Edit Birthday");
    editBirthday.addActionListener(new ActionListener() { 
            public void actionPerformed(ActionEvent evt) {
                JFrame birthdayframe= new JFrame("Birthdate Edit");
                String birthday = JOptionPane.showInputDialog(birthdayframe, "Change birthdate to: ");
                guest.setBirthDate(birthday);
            }
        });
    JButton editPassportNumber= new JButton ("Edit Passport Number");
    editPassportNumber.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) { 
                JFrame passportframe= new JFrame("Passport Number Edit");
                int passnum= Integer.parseInt(JOptionPane.showInputDialog(passportframe, "Change passportnumber to: "));
                guest.setPassportNumber(passnum);
            }
        });
    panel.add(editName);
    panel.add(editGender);
    panel.add(editBirthday);
    panel.add(editPassportNumber);
    panel.add(destination);
    filler.setHorizontalAlignment(JLabel.CENTER);
    panel.add(filler);
    return panel;
} 
```

我想编辑 JComponent 以便选项卡窗格反映新的更新更改。例如，如果原始显示为“姓名：管理员”，则只需单击“编辑姓名”并输入“John”即可将原始显示更改为“姓名：John”。

编辑：我的 toString() 方法（来自另一个类，客户）

```
//Returns the Customer object as a String. 
public String toString()
{ 
    customerstring= "<html>Name: " + getName();
    customerstring+= "<br>Gender: " + getGender();
    customerstring+= "<br>Date of Birth: " + getBirthDate();
    customerstring+= "<br>Passport number: " +  getPassportNumber();
    customerstring+= "<br>Balance: " + money.format(getMoney());
    return customerstring;
} 
```

如何编辑我的代码？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:23:03.330

在：`JComponent accountinfo = AccountOverview(guest.toString());` 您处理信息以创建您的组件。

这会生成您的客人信息的副本（通过调用 toString()），以后无法更改。尝试将来宾对象传递给您的组件，并在每次重绘自身时调用 toString()。

在进行编辑后，可以通过调用 accountinfo.repaint() 来让组件自行重绘。

# image-processing - 如何获取图像的 RGB 值？

> ID：15977524
> 
> 赞同：-2
> 
> 时间：2013-04-12T17:34:36.137
> 
> 标签：image-processing, graphics, rgb, textures

我正在上计算机图形课程，我需要处理纹理，但我不能使用任何库来完成它。我一直在加载我需要使用的图像的 rgb 值（图像可以是任何格式，jpg、raw、png 等）所以我的问题是，这是获取 rgb 值的最简单方法不使用任何库来获取此值的图像（任何格式）？这是我已经在网站上找到的内容：

```
 unsigned char *data;
    File *file;

    file = fopen("image.png", "r");//

    data = (unsigned char *)malloc(TH*TV*3); //TH and TV are both 50

    fread(data, TH*TV*3, 1, file);
    fclose(file);

    int i;

    for(i=0;i<TH*TV*3;i++){
       //suposing I have a struct RGB for the rgb values
       RGB.r = data[?];// how do I get the r value
       RGB.g = data[?];// how do I get the g value
       RGB.b = data[?];// how do I get the b value
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:45:34.333

您不想遍历您读入的每个字节，而是要遍历由 3 个字节组成的每个*像素。*所以替换`i++`为`i+=3`.

```
for(i=0;i<TH*TV*3;i+=3){
   RGB.r = data[i];
   RGB.g = data[i+1];
   RGB.b = data[i+2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:40:25.957

尝试使用像[OpenCV](http://opencv.org/)这样的框架，有几个选项可以获取颜色或操作图像。

在这里我找到了这个示例代码：

```
cv::Mat img = cv::imread("lenna.png");
for(int i=0; i<img.rows; i++) {
    for(int j=0; j<img.cols; j++) {
        // You can now access the pixel value with cv::Vec3b
        std::cout << img.at<cv::Vec3b>(i,j)[0] << " ";
        str::cout << img.at<cv::Vec3b>(i,j)[1] << " ";
        str::cout << img.at<cv::Vec3b>(i,j)[2] << std::endl;
    }
} 
```

但请注意，上面的代码性能不是很好，但上面的代码应该让您了解如何读取像素。

# php - 尖括号mysql php

> ID：15977525
> 
> 赞同：-2
> 
> 时间：2013-04-12T17:34:56.133
> 
> 标签：php, html, mysql, xss, brackets

当 VARCHAR 字段中的文本被尖括号（'<' 和 '>' 字符）包围时，我无法从 MySQL 数据库中获取数据。

让我更具体一点。这是我从中获取数据的表：

```
    mysql> 描述味精；
    +---------------+---------+------+---- -+---------+--------+
    | 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
    +---------------+---------+------+---- -+---------+--------+
    | 分区标签 | 整数(11) | 否 | 优先级 | 0 | |
    | mail_id | 变量二进制(16) | 否 | 优先级 | 空 | |
    | 秘密ID | 变量二进制(16) | 是 | | | |
    | am_id | varchar(20) | 否 | | 空 | |
    | time_num | int(10) 无符号 | 否 | 穆尔 | 空 | |
    | time_iso | 字符(16) | 否 | | 空 | |
    | 席位 | bigint(20) 无符号 | 否 | 穆尔 | 空 | |
    | 政策 | varchar(255) | 是 | | | |
    | 客户地址 | varchar(255) | 是 | | | |
    | 尺寸 | int(10) 无符号 | 否 | | 空 | |
    | 原产地| 字符(1) | 否 | | | |
    | 内容 | 字符(1) | 是 | | 空 | |
    | 夸类型 | 字符(1) | 是 | | 空 | |
    | 夸洛克 | 变量二进制(255) | 是 | | | |
    | dsn_sent | 字符(1) | 是 | | 空 | |
    | 垃圾邮件级别 | 浮动 | 是 | | 空 | |
    | message_id | varchar(255) | 是 | 穆尔 | | |
    | 从地址 | varchar(255) | 是 | | 空 | |
    | 主题 | varchar(255) | 是 | | | |
    | 主持人 | varchar(255) | 否 | | 空 | |
    +---------------+---------+------+---- -+---------+--------+

    mysql> select * from msgs LIMIT 1;
    +---------------+--------------+--------------+--- --------+------------+------+-----+---- ----+--------------+------+--------------+--------- +-----------+-------------+----------+----------- -+--------------------------------+---------------- ------------+---------+-------------- -----+
    | 分区标签 | mail_id | 秘密ID | am_id | time_num | time_iso | 席位 | 政策 | 客户地址 | 尺寸 | 原产地| 内容 | 夸类型 | 夸洛克 | dsn_sent | 垃圾邮件级别 | message_id | 从地址 | 主题 | 主持人 |
    +---------------+--------------+--------------+--- --------+------------+------+-----+---- ----+--------------+------+--------------+--------- +-----------+-------------+----------+----------- -+--------------------------------+---------------- ------------+---------+-------------- -----+
    | 0 | 0qJcjCXZM8K3 | 7a8Q1_crCzuj | 02085-01 | 1365578237 | 20130410T071717Z | 4 | 我的网| 172.31.255.5 | 第1246章 是 | 五 | 问 | 0qJcjCXZM8K3 | N | -1 | <51651189.9080705@test.it> | 用户名 <test@test.it> | 测试 | 本地主机 |
    +---------------+--------------+--------------+--- --------+------------+------+-----+---- ----+--------------+------+--------------+--------- +-----------+-------------+----------+----------- -+--------------------------------+---------------- ------------+---------+-------------- -----+

```

通过 PHP MySQLi 接口执行查询时（例如：SELECT * from msgs），from_addr 字段仅显示第一部分（在本例中为“用户名”），但*不*显示尖括号内的文本（“test@test.it” ， 在这种情况下）。

目前，我通过在 mysql 查询中使用 REPLACE 语句来解决它，用方括号替换尖括号。但是，我想知道如何正确查询尖括号内的文本。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:45:32.040

`from_addr`如果您从查询中收到结果，则输出将在那里。

看看这个例子：

```
$string = '<hello world>';
echo $string;
echo htmlspecialchars('<hello world>'); 
```

而，`echo $string`将显示在源代码中，但被视为标签，因此不会显示“在屏幕上”。

使用`htmlspecialchars()`将更`< >`改为`&lt; &gt;`将显示“在屏幕上”。

看来您正在将此字段用于电子邮件，因此我不建议使用 保存到数据库`htmlspecialchars`，因为您希望电子邮件正确发送。

如果以上内容没有完全回答您的问题，并且您希望在数据库中查询电子邮件而不是“发送名称”，我建议使用`LIKE`：

```
SELECT * FROM `msgs` WHERE `from_addr` LIKE '<%INSERT_EMAIL_ADDRESS%>'. 
```

希望这可以帮助。

# php - Symfony2、Doctrine 和 forms - 将 1:* 关系双方的数据保存在一个表单中

> ID：15977529
> 
> 赞同：0
> 
> 时间：2013-04-12T17:35:34.823
> 
> 标签：php, symfony, doctrine

在我的 Symfony2 项目中，我与我的一些实体有一个相当经典的 1:* 关系（我们称它们为 BlogPost 和 Comments，尽管 NDC 阻止我说出它们的真正含义）。我的任务是修改当前存在的表单以编辑现有评论，以便它也可以修改 BlogPost 的某些方面。我不完全确定如何去做，特别是 Symfony2 和 Doctrine 如何处理它们的数据绑定。

现在，我使用（保护无辜者的伪代码）填充并绑定到表单：

```
Grab the BlogPost based on the incoming request ID
Grab all Comments related to BlogPost

$form = $this->createForm(new CommentsType(), array('comments' => $comments));

if ($request->getMethod() == "POST")
{
    $form->bind($request);

    foreach($comments as $comment) {
        $doctrine->persist($comment);
    }
}

return $this->render('blah.html.twig', array('blog' => $blogPost, 'comments' => $comments, 'form' => $form->createView()); 
```

如您所见，我已经将 BlogPost 发送到视图。而且我知道我可以通过将它包含在我的 CommentsType 类中来将它添加到表单中。我只是不确定如何正确绑定数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:45:43.173

如果你有`$blogPost`，就坚持下去，和评论一样。最后也冲洗：

```
$form = $this->createForm(new CommentsType(), array('comments' => $comments));

if ($request->getMethod() == "POST")
{
    $form->bind($request);

    foreach($comments as $comment) {
        $doctrine->persist($comment);
    }
    $doctrine->persist($blogPost);
    $doctrine->flush();
}

return $this->render('blah.html.twig', array('blog' => $blogPost, 'comments' => $comments, 'form' => $form->createView()); 
```

# javascript - 如何使用 javascript 将图像上传到 azure blob 存储

> ID：15977530
> 
> 赞同：4
> 
> 时间：2013-04-12T17:35:34.950
> 
> 标签：javascript, azure, windows-8, winjs, azure-blob-storage

我认为问题说明了一切：如何使用适用于 Windows 8 应用程序的 JavaScript 将图像上传到 azure blob 存储？我只能在互联网上找到 C# 的示例，但找不到 JavaScript 的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:21:18.310

您需要拥有 azure 容器/blob 的 sas（共享访问签名）url。然后，您可以使用[此代码段](http://blog.programtheeworld.com/2013/03/22/uploading-image-to-azure-blob-from-windows-store-app/)稍作修改来上传您的图像。

不太可能有人将存储主键放在 Windows 商店应用程序代码中。您可以[参考此代码](http://blog.programtheeworld.com/2013/03/21/putting-a-blob-in-azure-from-windows-store-app-in-javascript/)为请求生成授权标头。此代码不需要容器的 sas url。但需要存储帐户名称和主键来生成授权标头。

如果 azure 容器或 blob 可以公开写入（我没有尝试过） - 第一个解决方案可以在没有 SAS url 的情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:30:42.083

除非 javascript 对您的应用程序进行异步回调，否则您不能这样做。Azure BLOB REST API（和所有 Azure REST API）需要修改请求标头以包含安全凭据。[在此处](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/9d21ead6-78ca-47ac-b921-fb5340c35daf)查看您的问题的明确答案。

# nested-forms - 在 RailsAdmin 中默认显示嵌套模型

> ID：15977532
> 
> 赞同：0
> 
> 时间：2013-04-12T17:35:42.480
> 
> 标签：nested-forms, rails-admin

在 RailsAdmin 中编辑条目时，默认情况下如何显示嵌套资源？目前它作为一个按钮存在，您必须单击它才能显示内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T11:19:45.897

我搜索了这个，但最终默认使用 javascript 来显示嵌套表单。以下我使用过：

```
setTimeout(function(){
  $('#partner_api_account_attributes_field .toggler').click();
}, 100); 
```

在 rails_admin 表单中，嵌套资源显示在 ID 类似于“#partner_api_account_attributes_field”的 div 中，其中 Partner 是我与 ApiAccount 关联的模型。“.toggler”是切换嵌套资源表单的链接的类名。

我希望这有帮助。谢谢！

# jquery - 页面上有两个 jQuery-UI 内联日期选择器，第二个不起作用

> ID：15977537
> 
> 赞同：0
> 
> 时间：2013-04-12T17:35:52.247
> 
> 标签：jquery, jquery-ui, datepicker

我这样称呼内联日期选择器（用于演示目的的简化版本）：

```
<input id="inp_datepicker" name="startDateField">
<div id="datepicker"></div>

<input id="inp_datepicker2" name="endDateField">
<div id="datepicker2"></div> 
```

我已将此添加到 Javascript 中，以便他们将选择结果放入可编辑字段中。

```
$("#datepicker").datepicker({
    onSelect: function() { 
        var dateObject = $(this).datepicker('getDate');
        $('#inp_datepicker')[0].value = convertDateToString(dateObject);
    }
});

$("#datepicker2").datepicker({
    onSelect: function() { 
        var dateObject = $(this).datepicker('getDate');
        $('#inp_datepicker2')[0].value = convertDateToString(dateObject);
    }
}); 
```

一切正常，**除了**第二个日期选择器没有填充第二个字段。第一个，没问题。第二个，什么都没有。

我在第二个 onSelect 函数中设置了一个断点，发现它根本没有中断。

（我知道，我可以通过让输入弹出日历来规避这个问题，过去一切都很好，但是这次 PRD 指定了*内联*日期选择器，所以我必须将选择的结果分配给一个字段。 ) 同样，第一个工作正常。

**编辑**从 div 中删除`class="hasDatepicker"`，因为它不在源代码中，仅在 jQuery-UI datepicker 执行其操作后呈现的标记中。

**编辑 2**我很尴尬地说我自己已经解决了这个问题。它似乎与另一个与日期选择器无关的不相关脚本有关。删除该脚本后，一切正常，即使该脚本没有抛出任何错误。啊，如果没有遗留代码，我们该怎么办，是吗？另外，我认为最好删除这篇文章，这样就没有人再浪费时间了。抱歉，添麻烦了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:53:52.077

似乎问题源于 class `.hasDatepicker`。

```
<div id="datepicker" class="hasDatepicker"></div>
<div id="datepicker2" class="hasDatepicker"></div> 
```

当你打电话时`.datepicker()`，它会自动添加`.hasDatepicker`。如果该类已经存在，那么它将假定已添加 datepicker。

示例：http: [//jsbin.com/ukotit/27/edit](http://jsbin.com/ukotit/27/edit)

从`div`s 中删除类，它应该可以工作。

```
$("#datepicker").removeClass('hasDatepicker').datepicker({
    onSelect: function() { 
        var dateObject = $(this).datepicker('getDate');
        $('#inp_datepicker')[0].value = convertDateToString(dateObject);
    }
});

$("#datepicker2").removeClass('hasDatepicker').datepicker({
    onSelect: function() { 
        var dateObject = $(this).datepicker('getDate');
        $('#inp_datepicker2')[0].value = convertDateToString(dateObject);
    }
}); 
```

演示：http: [//jsbin.com/ukotit/30/edit](http://jsbin.com/ukotit/30/edit)

* * *

***更新：***

```
$("#datepicker, #datepicker2").datepicker({
    onSelect: function(dateText, inst) { 
      $(this).prev()[0].value = dateText;
    }
}); 
```

[http://jsbin.com/ukotit/32/edit](http://jsbin.com/ukotit/32/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:57:43.860

你在 div 上有你的日期选择器而不是输入。

您可以将其更简单地修改为：

将数据添加到 elemnet 并使用它。

```
<input id="inp_datepicker" data-relatedelementid="datepicker" type="text" name="startDateField">
<div id="datepicker" class="hasDatepicker"></div>
<input id="inp_datepicker2" data-relatedelementid="datepicker2"  type="text" name="endDateField">
<div id="datepicker2" class="hasDatepicker"></div>

$("#inp_datepicker,#inp_datepicker2").datepicker({
    onSelect: function (dateText, inst) {
        $('#'+$(this).data('relatedelementid')).text(dateText);
    }
}); 
```

# linux - Linux 和 Solaris 之间的 RPC 通信

> ID：15977540
> 
> 赞同：0
> 
> 时间：2013-04-12T17:35:54.560
> 
> 标签：linux, solaris, rpc

我有一个在 Solaris 中运行的 RPC 服务器。我有一个在 Solaris 中运行良好的 RPC 客户端。
当我在 Ubuntu 中编译和运行相同的代码时，我正在进入`Error decoding arguments`服务器。

Solaris 使用 SunRPC (ONC RPC)。不知道如何找到 rpc 的版本。

Linux 和 Solaris 中可用的 RPC 有什么区别吗？
在 Solaris 和 Linux 中生成的 xdr 之间会不会有任何不匹配？

我应该如何发现问题？

**注意**：代码不能发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T07:19:10.163

在与同一软件集成期间，我确实遇到了这个错误。Linux 版本确实产生了不好的请求。这种行为的原因是空 c 字符串的序列化。Glibc 版本的 SUN rpc 无法对其进行编码，xdr_string 返回零。但是您正在处理的样本将“pin”设置为 0。只需将“pin”替换为“”，或者在 xdr_string() 上创建一些包装器，样本就可以工作。

我的 PowerKey 示例补丁如下所示：

```
<       if (!xdr_string(xdrs, objp, PIN_SZ))
<               return (FALSE);
<       return (TRUE);
---
>     char *t = "";
>     return  xdr_string(xdrs, *objp? objp : &t , PIN_SZ); 
```

但它当然可以变得更简单。一般来说，您应该修复生成代码的使用，在我的情况下，它是软件作者提供的示例源中的“pin”变量，必须在调用 xdr_string() 之前初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T06:28:54.517

@twalberg, @cppcoder 你解决问题了吗？我有同样的问题，但如果有帮助，我可以发布我的代码。代码的某些部分是：

/* 现在分配一个 LoopListRequestStruct 并用请求数据填充它 */

```
llrs = malloc(sizeof(LoopListRequestStruct));

fill_llrs(llrs);

/* Now, make the client request to the bossServer   */

client_call_status = clnt_call(request_client, ModifyDhctState,
        (xdrproc_t)xdr_LoopListRequestStruct,
        (caddr_t)llrs, 
        (xdrproc_t)xdr_void,
        0,
        dummy_timeval
    ); 
```

无效填充_llrs（LoopListRequestStruct* llrs）{

```
Descriptor_Loop* dl = 0;
DhctState_d *dhct_state_ptr = 0;
PackageAuthorization_d *pkg_auth_ptr = 0; 

llrs->TRANS_NUM = 999999;   /* strictly arbitraty, use whatever you want */
                                                    /* the bossServer simply passes this back in */
                                                    /* in the response you use it to match       */
                                                    /* request/response if you want or you can   */
                                                    /* choose to ignore it if you want           */

/* now set the response program number, this is the program number of  */
/* transient program that was set up using the svc_reg_utils.[ch]      */
/* it is that program that the response will be sent to                */

llrs->responseProgramNum = response_program_number; 

/* now allocate some memory for the data structures that will actually */
/* carry the request data */

llrs->ARG_PTR = malloc(sizeof(LoopListRequestArgs));

dl = llrs->ARG_PTR->loopList.Loop_List_val;

/* we are using a single descriptor loop at a time, this should always */
/* be the case */

llrs->ARG_PTR->loopList.Loop_List_len = 1;
llrs->ARG_PTR->loopList.Loop_List_val = malloc(sizeof(Descriptor_Loop));

/* now allocate memory and set the size for the ModifyDhctConfiguration */
/* this transaction always has 3 descriptors, the DhctMacAddr_d, the    */
/* DhctState_d, and the PackageAuthorization_d                          */

dl = llrs->ARG_PTR->loopList.Loop_List_val;
dl->Descriptor_Loop_len = 2;
dl->Descriptor_Loop_val = 
    malloc((2 * sizeof(Resource_descriptor_union)));

/* now, populate each descriptor */
/* the order doesn't really matter I'm just doing it in the order I    */
/* always have done */

/* first the mac address descriptor */

dl->Descriptor_Loop_val->type = 
    dhct_mac_addr_type;

strcpy(
    dl->Descriptor_Loop_val[0].Resource_descriptor_union_u.dhctMacAddr.dhctMacAddr,
    dhct_mac_addr
);

/* second the dhct state descriptor */

dl->Descriptor_Loop_val[1].type = 
    dhct_state_type;

dhct_state_ptr =
    &(dl->Descriptor_Loop_val[1].Resource_descriptor_union_u.dhctState);

if(dis_enable)
    dhct_state_ptr->disEnableFlag = DIS_Enabled;
else
    dhct_state_ptr->disEnableFlag = DIS_Disabled;

if(dms_enable)
    dhct_state_ptr->dmsEnableFlag = DMS_Enabled;
else
    dhct_state_ptr->dmsEnableFlag = DMS_Disabled;

if(analog_enable)
    dhct_state_ptr->analogEnableFlag = AEF_Enabled;
else
    dhct_state_ptr->analogEnableFlag = AEF_Disabled;

if(ippv_enable)
    dhct_state_ptr->ippvEnableFlag = IEF_Enabled;
else
    dhct_state_ptr->ippvEnableFlag = IEF_Disabled;

dhct_state_ptr->creditLimit = credit_limit;
dhct_state_ptr->maxIppvEvents = max_ippv_events;

/* we don't currently use the powerkey pin, instead we use an      */
/* application layer pin for purchases and blocking so always turn */   
/* pinEnable off */

dhct_state_ptr->pinEnable = PE_Disabled;
dhct_state_ptr->pin = 0;

if(fast_refresh_enable)
    dhct_state_ptr->fastRefreshFlag = FRF_Enabled;
else
    dhct_state_ptr->fastRefreshFlag = FRF_Disabled;

dhct_state_ptr->locationX = location_x;
dhct_state_ptr->locationY = location_y; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T14:10:12.897

请注意，XDR 将处理字节序，但如果您使用特定于应用程序的不透明字段，如果您自己不处理字节序，解码将会中断。确保整数作为 XDR 整数发送

# redirect - 移动设备的不同登录页面和导航

> ID：15977546
> 
> 赞同：1
> 
> 时间：2013-04-12T17:36:19.060
> 
> 标签：redirect, mobile, navigation, toggle, browser-detection

你好呀！

我一直在尝试重新设计一个移动网站，我想要一个不同的登录页面和导航设计，可以与我现在拥有的响应式设计分开。

我尝试使用 Mobile Site Detect 插件制作一个仅在移动站点上显示的菜单按钮，因此当视图单击它时，它将切换导航。

这是我一直试图在下面构建的代码，但由于某种原因它不起作用，我假设那里可能缺少某些东西。如果有人可以看看它并给我一些帮助或提示，我将非常感激。

```
 (function(a){jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);

if(jQuery.browser.mobile)
{
   "nav".hide();
   "#navtoggle".show();

        event.preventDefault();
}
else
{
    "#navtoggle".hide();
   "nav".show();

        event.preventDefault();
}

 $( '#navtoggle' ).click(function() {
 $( 'nav' ).toggle( 'blind' );
}); 
```

另外，如果有人可以给我一个提示，告诉我如何将登录页面重定向到移动网站上网站的其他页面？一旦我让移动检测插件工作，那么我应该使用什么代码？谁能告诉我？我记得有一些我可以使用的东西，但找不到它...... :(

任何帮助都感激不尽！急切地寻求一些专家的建议！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:19:07.690

如果您想要一个响应设备的视图，您有以下选项：

1.  使用 CSS 根据使用的设备隐藏和显示 UI 元素
2.  根据 UserAgent 字符串在服务器端呈现预期的 UI
3.  好吧，使用 JavaScript

使用 CSS 解决方案

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px) {
  #selector {
    /* rules */
  }
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
  #selector {
    /* rules */
  }
} 
```

使用 JavaScript 的解决方案：

使用该方法检测移动浏览器 [检测移动浏览器](https://stackoverflow.com/questions/11381673/javascript-solution-to-detect-mobile-browser)

# ruby-on-rails - 选择标签栏

> ID：15977550
> 
> 赞同：1
> 
> 时间：2013-04-12T17:37:07.067
> 
> 标签：ruby-on-rails, ruby, drop-down-menu, view, controller

我有一个需要显示页面列表的视图（我有一个名为 Page 的模型），然后我需要所选页面的 id

我在视图中有这段代码

# مهمة جديدة

```
: <%= form_for :task, :url => {:action=>"create", :controller=>"tasks"}, :html => {:class :  

=> "nifty_form"} do |f| %>

 <% if @task.errors.any? %>
    <div id="error_explanation">
      <h2>: عذرا لم نستطع استكمال طلبك</h2>

      <ul>
        <% @task.errors.full_messages.each do |msg| %>
          <li style="color:red;"><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label "اسم المهمة" %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label "وصف المهمة" %><br />
    <%= f.text_area :description %>
  </div>
  <div class="actions">
    <button><%= link_to 'العودة الى قائمة المهام', project_tasks_path %></button>
    <%= f.submit "مهمة جديدة"%>
  </div>
<%= select_tag(:page, options_for_select(['a',1])) %>
<% end %> 
```

`@pageslist`是形式的二维数组`[['pagename', 1], ..]`

问题是如何访问控制器中所选页面的 page_id ？

我试过`params[:p_id]`了，但它没有任何帮助吗？

这就是我在控制器中的内容：

```
@task = Project.find(params[:project_id]).tasks.new(params[:task])

@task.update_attributes({:page_id => params[:p_id]}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:37:36.167

假设这`@pagelist`是您所描述的格式，那么在您看来：

```
<%= select_tag(:page, options_for_select( @pagelist )) %> 
```

您在示例中错过了它，并且只为`options_for_select`.

有了这样的准备视图，您的`create`操作将收到`page id`：

```
params[:page] 
```

这是因为你`:page`作为第一个参数传递了`select_tag`.

# java - 在 Java 中为二维数组提供元素，为什么不工作？

> ID：15977553
> 
> 赞同：0
> 
> 时间：2013-04-12T17:37:37.687
> 
> 标签：java, arrays

我想用一组特定的数字填充 Java 中的二维数组。

我的样本数组集：{{7,-4},{8,-2},{9,-1}}

如果不这样做，如何加载数组？

```
int[][] x = new int[3][2];
x[0][0] = 7;
x[0][1] = -4;
x[1][0] = 8;
x[1][1] = -2;
x[2][0] = 9;
x[2][1] = -1; 
```

此外，我认为我可以做到这一点，但我得到“错误：表达的非法开始”。

```
class Alpha {
    int[][] x;

    public Alpha () {
        x = new int[3][];
        x[0] = {7,-4};    <== line where error is located
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:39:37.227

尝试这个。

您可以像这样初始化二维数组。

```
int x[][] = {
                {7, -4},
                {8, -2},
                {9, -1}
            }; 
```

或者

```
x[0] = new int[] {7,-4};
x[1] = new int[] {8,-2};
x[2] = new int[] {9,-1}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:40:35.953

由于外部数组的每个元素都有效地指向一维数组，您可以这样做：

```
x[0] = new int[] {7,-4}; 
```

# jquery - jQuery函数检测非空输入并显示输入清除按钮

> ID：15977555
> 
> 赞同：1
> 
> 时间：2013-04-12T17:37:51.587
> 
> 标签：jquery

![在此处输入图像描述](https://i.stack.imgur.com/grW3l.png)

我有现有的代码，当用户填写时在输入 #q 的末尾显示输入清除按钮，当输入变空时按钮消失：

```
$(document).on('propertychange keyup input paste pageinit', '#q', function(){
    var io = $(this).val().length ? 1 : 0 ;
    $(this).next('.icon_clear').stop().fadeTo(0,io);
}).on('click', '.icon_clear', function() {
    $(this).delay(0).fadeTo(0,0).prev('input').val('').focus();
}); 
```

index.php 的一部分：

```
<form id="searchForm" action="" class="search-box" method="POST">
<span class="clearable">
<input type="text" name="q" id="q" size="22" value="<?php echo $_GET['q']; ?>" autocomplete="off" maxlength="1024" class="search" placeholder="Search" >
<span class="icon_clear">&nbsp;&nbsp;&nbsp;</span>
</span>
</form> 
```

[jquery输入清除按钮示例](http://jsfiddle.net/PJZmv/801/)

问题是：当用户键入一些文本并按回车键时，会调用 index.php?q=text。然后不会显示输入清除按钮，因为输入 #q 上没有发生任何事件（尽管 #q 包含按照 的文本值`value="<?php echo $_GET['q']; ?>"`）。因为#q 包含值，所以自然需要输入清除按钮。

**只要输入#q 中有值，我如何更新脚本以便显示输入清除按钮。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:03:11.617

你的意思是当页面初始化时，让它检查它是否需要一个清除按钮？这应该工作

[http://jsfiddle.net/steelywing/PJZmv/1404/](http://jsfiddle.net/steelywing/PJZmv/1404/)

```
$('input.data_field').trigger('input'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:13:12.380

此解决方案特定于支持 HTML5 的浏览器（主要是 Chrome），但只要`type="search"`有内容，您就可以将“X”自动附加到输入框的末尾。

```
<input type="search"/> 
```

jsFiddle：http: [//jsfiddle.net/3mcJ8/](http://jsfiddle.net/3mcJ8/)

魔法。

# objective-c - db stringForQuery 检索一列

> ID：15977560
> 
> 赞同：0
> 
> 时间：2013-04-12T17:38:02.253
> 
> 标签：objective-c, fmdb

在使用 FMResultSet 执行 sql 时，我们可以使用 stringForColumn:@"ColumnName" 来获取值。

```
FMResultSet *cardInfoList =[db executeQuery:@"SELECT * FROM holder, cardInfo WHERE holder.userName = ? AND cardInfo.cardNum= holder.cardNum", username];
while ([cardInfoList next]) { 
```

但是如果我使用这个：（数据库中只有一条记录。所以没有必要使用FMResultSet） `NSString *s = [db stringForQuery: @"SELECT * FROM holder, cardInfo WHERE holder.cardNum = ? AND cardInfo.cardNum= holder.cardNum", cardNum];`

如何获取每列中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T10:02:05.960

您可以通过以下方法获取您的物品：

```
while ([cardInfoList next]) {
   NSString *valueColumn1 = [cardInfoList stringForColumn:@"column1"];
   NSString *valueColumn2 = [cardInfoList stringForColumn:@"column2"];
} 
```

# jquery - JQuery、Ajax、Handlebars 清除表然后重新填充

> ID：15977562
> 
> 赞同：4
> 
> 时间：2013-04-12T17:38:04.370
> 
> 标签：jquery, ajax, handlebars.js

构建一个表单并获取数据，然后使用 handlebars.js 填充表格。在第一次运行时效果很好，如果数据发生更改，则不会再次填充。关于如何让它发挥作用的任何想法？

```
$('a.button').on("click", function(e){
        e.preventDefault();

        var date = $('#datepicker').val();
        var func = "get_all_swo_by_date";
        //$('table.output').empty();

        $.ajax({
            url: "../includes/db_functions.inc.php",
            type: "post",
            data: ({ p : date, f : func }),
            dataType: "json",
            success: function(results) {
                var source = $("#entry-template").html();
                var template = Handlebars.compile(source);
                $('table.output').empty();
                if(results.length > 0)
                {
                    $.each(results, function(i, context){
                        $('table.output').append( template(context) );
                    });
                } else {
                    $('table.output').append("There is no data to return.");
                }

            }
        });
    }); 
```

当单击带有一类按钮的“a”时，它会填充表格..（如上所述）。现在，当您将 datepicker 更改为另一个日期并单击带有一类按钮的“a”时，它不会重新填充表格。

如果有人对为什么它不起作用有合理的想法，请告诉我。请不要只是编造东西。我一个人可以做很多事情.. :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T21:16:52.340

好的，这就是答案，以防有人在路上寻找它。

我想做的是在添加更改的数据之前清除表格，所以当我设置：

```
$('table.output').empty(); 
```

在附加之前，我认为这可能有效。但是，我很懒惰，没有将我的 handlebars.js 模板放到另一个文件中，所以我所做的只是清除我的模板，这样就无法重新填充它。本质上它甚至不存在..

因此，创建一个名为 yourtemplate.handlebars 的外部文件并将您的代码添加到其中。就我而言，它是 swooutput.handlebars：

```
<tr>
<td>{{id}}</td>
<td>{{item_no}}</td>
<td>{{swo}}</td>
<td>{{team_number}}</td>
<td>{{employee_payrate}}</td>
<td>{{customer_number}}</td>
<td>{{customer_name}}</td>
<td>{{customer_number}}</td>
<td>{{week_ending}}</td>
</tr> 
```

然后在 js 文件夹中创建一个 templates.js 文件，如下所示：

```
Handlebars.getTemplate = function(name) {
if (Handlebars.templates === undefined || Handlebars.templates[name] === undefined)    {
    $.ajax({
        url : name + '.handlebars',
        success : function(data) {
            if (Handlebars.templates === undefined) {
                Handlebars.templates = {};
            }
            Handlebars.templates[name] = Handlebars.compile(data);
        },
        async : false
    });
}
return Handlebars.templates[name];
}; 
```

我从某个地方得到的，但现在不记得在哪里。如果我这样做，我会发布链接。无论如何，不​​是在页面中使用模板，而是使用该函数来获取模板（使其比在运行时编译更快）。或者你可以使用预编译的模板，我只是觉得这个方法更简单。

所以这是带有修改后代码的最终 jquery ajax 调用：

```
$('a.button').on("click", function(e){
            e.preventDefault();

            var date = $('#datepicker').val();
            var func = "get_all_swo_by_date";
            //$('table.output').empty();

            $.ajax({
                url: "../includes/db_functions.inc.php",
                type: "post",
                data: ({ p : date, f : func }),
                dataType: "json",
                success: function(results) {
                    $('table.output').empty();

                    var template = Handlebars.getTemplate('swooutput');

                    $.each(results, function(i, context){
                            $('table.output').append( template(context) );
                    });

                }
            });
        }); 
```

我希望这可以帮助下一个出现的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T23:10:23.360

只需添加

```
<thead> 
```

和

```
<tbody> tags. So your table will look something like:

<table id="tblUsers"> 
```

```
 <tr>
        <th>
            ID
        </th>
        <th>
            Name
        </th>
        <th>
            Last name
        </th>
        <th class="header">
            Username
        </th>
        <th>

            &nbsp; &nbsp;</th>
        <th>
            &nbsp;&nbsp;</th>
    </tr>  
    </thead>
    <tbody>

    </tbody> 
```

还有你的 jQuery：

```
function _onSuccess(data) {
    console.log(data.d);
    $('#tblUsers > tbody').empty(); //HERE'S WHERE YOU CLEAN THE TABLE'S BODY OR TBODY
    $.map(data.d, function (item) {
        var rows = "<tr>"
            + "<td style='border:2px solid black; cursor: default;'>" + item.id_user + "</td>"
            + "<td style='border:2px solid black; cursor: default;'>" + item.name + "</td>"
            + "<td style='border:2px solid black; cursor: default;'>" + item.last_name + "</td>"
            + "<td style='border:2px solid black; cursor: default;'>" + item.username + "</td>"
            + "<td style='border:2px solid black; cursor: pointer;'><input type='button' class='btEdit' id='e" + item.id_user + "' ></td>"
            + "<td style='border:2px solid black; cursor: pointer;'><input type='button' class='btDel' id='d" + item.id_user + "'></td>"
            + "</tr>";
        $('#tblUsers tbody').append(rows);
    })
} 
```

# ruby-on-rails-3 - 从 url_for 中删除 url

> ID：15977564
> 
> 赞同：1
> 
> 时间：2013-04-12T17:38:16.037
> 
> 标签：ruby-on-rails-3, routes, activeadmin

我有一个应用程序，我试图将链接转发到 Active Admin 的页面。通过 Active Admin，我将其设置如下：

```
section "Events" do 

      column "Event Name" do |e|
        link_to e.event_name, url_for(:controller => :sessions, :action => :new, :id => e.event_name)
      end
end 
```

当它在单击时路由时，它的 url 中仍然有管理员：localhost:3000/admin/sessions/new/Sunday%20Evening%20Service

我正在尝试删除路由上的管理员，因此它将如下所示： localhost:3000/sessions/new/Sunday%20Evening%20Service

我知道这与 ActiveAdmin 如何动态处理 url 有关，但我不知道如何删除 /admin/ 部分的 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:07:44.657

该修复不适用于 Active Admin，因为它会动态创建 url。我不得不使用以下代码：

```
link_to e.event_name, new_session_path(:id => e.event_name) 
```

# android - 通过本地主机将 Android 直接连接到 sql server 而不使用网络服务

> ID：15977565
> 
> 赞同：1
> 
> 时间：2013-04-12T17:38:16.883
> 
> 标签：android, sql-server-2005

我想开发一个只能在我桌面的 android 模拟器上运行的 android 应用程序，我不知道 web 服务，有什么方法可以像我们在 ASp.net 中连接一样直接将 android 连接到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:47:16.920

清楚你到底需要什么？

对于独立的 android 应用程序，您可以使用 android 提供的 SQlite 数据库

[SQLite 教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

如果您正在寻找创建网络服务...您可以尝试以下链接

[网络服务示例](http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:40:24.267

Android 包含一个完整的 sqlite 实现。Vogella 有一个很好的教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

如果您真的想将其作为本地托管的 Web 服务来完成，您将不得不以某种方式包含 apache（或类似的）。比创建本地数据库要困难得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:49:43.697

在服务器上的虚拟机中运行 Android 怎么样：http:
[//androvm.org/blog/](http://androvm.org/blog/) （使用可以在 Windows 上运行的 VirtualBox。）

然后通过本地主机连接到在同一 Windows 服务器上运行的 SQL 服务器。

编辑：在虚拟机中运行 Android 就像在模拟器上运行它一样，但速度更快、功能更强大，例如通过各种技术（包括通过虚拟网络适配器）与主机通信的能力。

# ios - -[ID gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer] 两个识别器在调试器中都为零

> ID：15977568
> 
> 赞同：4
> 
> 时间：2013-04-12T17:38:23.870
> 
> 标签：ios, objective-c, uigesturerecognizer

我有一个方法

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    NSLog(@"%@\n%@", gestureRecognizer, otherGestureRecognizer);
    return YES;
} 
```

记录正常：

```
2013-04-12 21:36:20.126 Project[2504:907] <UITapGestureRecognizer: 0x1e5c25b0; state = Ended; view = <UIView 0x1e5c5cc0>; target= <(action=toggleControls, target=<PictureViewController 0x1e5c0ab0>)>; must-fail-for = {
        <UIScrollViewPanGestureRecognizer: 0x1e5c53a0; state = Failed; delaysTouchesEnded = NO; view = <ZoomScroll 0x1e5c4790>; target= <(action=handlePan:, target=<ZoomScroll 0x1e5c4790>)>>,
        <UIScrollViewPinchGestureRecognizer: 0x1e5c5bb0; state = Failed; delaysTouchesEnded = NO; view = <ZoomScroll 0x1e5c4790>; target= <(action=handlePinch:, target=<ZoomScroll 0x1e5c4790>)>>
    }>
<UIScrollViewPagingSwipeGestureRecognizer: 0x1f0bb4f0; state = Failed; view = <UIScrollView 0x1f0bb010>; target= <(action=_handleSwipe:, target=<UIScrollView 0x1f0bb010>)>; must-fail-for = {
        <UIScrollViewPanGestureRecognizer: 0x1f0bb340; state = Failed; delaysTouchesEnded = NO; view = <UIScrollView 0x1f0bb010>; target= <(action=handlePan:, target=<UIScrollView 0x1f0bb010>)>>
    }> 
```

`nil`但在调试控制台中，它们都是

```
(lldb) po gestureRecognizer
$1 = 0x00000000 <nil>
(lldb) po otherGestureRecognizer
$2 = 0x00000000 <nil> 
```

发生了什么？我能以某种方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T17:27:54.380

这是 XCode / lldb 的一个已知错误，尚未解决。如果您没有运行 xcode 5-dp，您可以返回 gdb，它应该可以工作。

*Xcode 4.3 发行说明：“使用 LLDB 调试器时，断点中的某些调试器命令和日志表达式会失败，因为 Xcode 在执行调试器命令或评估日志表达式时使用了错误的帧。如果您知道调试器命令或日志表达式必须使用哪个线程相对于运行，添加一个断点动作，在有问题的断点动作之前将当前帧设置为适当的帧。10426977"*

我的参考：[调试器 lldb 说我的对象是 nil 什么时候不是？](https://stackoverflow.com/questions/9408219/debugger-lldb-says-my-object-is-nil-when-is-not)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T17:49:00.430

你初始化你的识别器了吗？

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panView:)];
[panRecognizer setMinimumNumberOfTouches:1];
[panRecognizer setMaximumNumberOfTouches:1];
panRecognizer.delegate = self;
[self.webView addGestureRecognizer:panRecognizer]; 
```

# c# - 运行的焦点方法（在 FlowDocument 中）不起作用

> ID：15977572
> 
> 赞同：0
> 
> 时间：2013-04-12T17:38:29.170
> 
> 标签：c#, wpf, events, focus

代码：

```
TextPointer navigator = flowDocViewer.Document.ContentStart;

// While we are not at end of document
while (navigator.CompareTo(flowDocViewer.Document.ContentEnd) < 0)
{
   // Get text pointer context
   TextPointerContext context = navigator.GetPointerContext(LogicalDirection.Backward);

   Run run = navigator.Parent as Run;
   if (run != null)
   {
      if (run.Text.Equals(currentText))
      {
         if (run.IsFocused == false)
         {
            run.GotFocus += run_GotFocus;
            run.LostFocus += run_LostFocus;
            run.Focus();                                              
         }
      }
   } 
```

和：

```
void run_LostFocus(object sender, RoutedEventArgs e)
{
   ((Run)sender).LostFocus -= run_LostFocus;
   ((Run)sender).Background = Brushes.Transparent;
}

void run_GotFocus(object sender, RoutedEventArgs e)
{
   ((Run)sender).GotFocus -= run_GotFocus;
   ((Run)sender).Background = Brushes.White;
} 
```

# c - 函数参数一个指针数组 (C)

> ID：15977575
> 
> 赞同：1
> 
> 时间：2013-04-12T17:38:37.950
> 
> 标签：c, arrays, pointers

在我的代码中，我有一个指针数组，指针指向我的结构

```
struct Container *bucket[sizeOfHashMap]; 
```

我有一个函数将返回这些数组指针中的 1 个（例如，它可能返回数组索引 6 处的指针）。作为参数，它需要一个指向此指针的指针。该功能可以在这里看到：

```
struct Container* getWhichBucket(char word[], struct Container **bucket[10]){
    int value = 0;
    int i = 0;
    int size = strlen(word);
    int hashIndex = 0;

    for(i =0; i < size; i++){
      value += (int)word[i];
    }

    //size of array is worked out by getting memory that array takes up / a slot
    hashIndex =  value % sizeOfHashMap;
    return *bucket[hashIndex];
} 
```

我这样调用函数（其中 test 是一个字符数组）

```
addToBucket(test, getWhichBucket(test, &bucket)); 
```

添加到存储桶如下所示：

```
void addToBucket(char word[], container **bucket){
    container *temp = (struct Container*)malloc (sizeof(struct Container));
    strcpy(temp->key, word);
    temp->value = 9001;
    temp->next = *bucket;
    *bucket = temp;

    return;
} 
```

但是，`warnings`当我`compile`编写代码时编译器会出现问题，当`run`我得到一个`segmentation error`. 有谁知道为什么？可以在此处看到警告：

```
cw.c: In function ‘main’:
cw.c:86:2: warning: passing argument 2 of ‘getWhichBucket’ from incompatible pointer type [enabled by default]
cw.c:37:19: note: expected ‘struct Container ***’ but argument is of type ‘struct Container * (*)[(long unsigned int)(sizeOfHashMap)]’
cw.c:86:2: warning: passing argument 2 of ‘addToBucket’ from incompatible pointer type [enabled by default]
cw.c:56:6: note: expected ‘struct container **’ but argument is of type ‘struct Container *’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:44:12.763

```
addToBucket(test, getWhichBucket(test, &bucket)); 
```

正在通过一个

```
struct Container *(*)[10] 
```

到`getWhichBucket`. 正如编译器所说，这是错误的类型。

您可以修复原型和实现

```
struct Container* getWhichBucket(char word[], struct Container *(*bucket)[10]){
    int value = 0;
    int i = 0;
    int size = strlen(word);
    int hashIndex = 0;

    for(i =0; i < size; i++){
      value += (int)word[i];
    }

    //size of array is worked out by getting memory that array takes up / a slot
    hashIndex =  value % sizeOfHashMap;
    return (*bucket)[hashIndex];
} 
```

或更改调用，但没有简单的方法`struct Container **bucket[10]`从 a 获取 a `struct Container *bucket[10]`，因此您可能仍想更改`getWhichBucket`.

由于您没有在`bucket`那里修改参数，因此无需传递地址，您可以直接传递`struct Container *bucket[10]`，

```
struct Container* getWhichBucket(char word[], struct Container *bucket[]){
    int value = 0;
    int i = 0;
    int size = strlen(word);
    int hashIndex = 0;

    for(i =0; i < size; i++){
      value += (int)word[i];
    }

    //size of array is worked out by getting memory that array takes up / a slot
    hashIndex =  value % sizeOfHashMap;
    return bucket[hashIndex];
} 
```

并打电话

```
addToBucket(test, getWhichBucket(test, bucket)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:43:35.380

您需要更改您的声明`addToBucket`from

```
void addToBucket(char word[], container *bucket)
{ 
    container *temp = (struct Container)malloc (sizeof(struct Container)); 
    strcpy(temp->key, word); 
    temp->value = 9001; 
    temp->next = *bucket; 
    *bucket = temp; 
    return; 
} 
```

至

```
void addToBucket(char word[], Container *bucket)
{ 
    Container *temp = malloc (sizeof(struct Container)); 
    strcpy(temp->key, word); 
    temp->value = 9001; 
    temp->next = *bucket; 
    *bucket = temp; 
    return; 
} 
```

请注意`Container`，C 中的 case 的变化 ...`container`与. 不同`Container`。

另外......注意......你不应该[在 C中](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)[投射`malloc`](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

# c++ - 检查文件是否存在的 Visual C++ DLL

> ID：15977577
> 
> 赞同：1
> 
> 时间：2013-04-12T17:38:41.327
> 
> 标签：c++, visual-c++, ifstream

我制作了这个 dll 文件来尝试检查文件是否存在。但即使我手动创建文件，我的 dll 仍然找不到它。

我的 dll 检索正在运行的程序的进程 id 并查找以 pid 命名的文件。

谁能告诉我我错过了什么:(

代码：

```
#include <Windows.h>
#include <winbase.h>
#include <stdio.h>
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

using namespace std;

int clientpid = GetCurrentProcessId();
ifstream clientfile;
string clientpids, clientfilepath;

VOID LoadDLL() {
    AllocConsole();
    freopen("CONOUT$", "w", stdout);
    std::cout << "Debug Start" << std::endl;

    std::ostringstream ostr;
    ostr << clientpid;
    clientpids = ostr.str();
    ostr.str("");

    TCHAR tempcvar[MAX_PATH];
    GetSystemDirectory(tempcvar, MAX_PATH);
    ostr << tempcvar << "\\" << clientpids << ".nfo" << std::endl;
    clientfilepath = ostr.str();
    //clientfile.c_str()
    ostr.str("");

    std::cout << "Start search for: " << clientfilepath << std::endl;

    FOREVER {
        clientfile.open(clientfilepath,ios::in);
        if(clientfile.good()) {
            std::cout << "Exists!" << std::endl;
        }

        Sleep(10);
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:54:14.997

**假设您正在使用 UNICODE，**

我认为问题出在以下行：
`ostr << tempcvar << "\\" << clientpids << ".nfo" << std::endl;`
tempcvar 是一个 tchar，也许您正在使用 unicode，所以这意味着 tempcvar 是一个宽字符。

您插入的结果`tempcvar`不是`ostr`您所期望的（您也将多字节与 Widechar 混合）。解决此问题的方法是转换`tempcvar`为多字节字符串（`const char*`或`char*`...）

根据您的代码查看此示例（查看 tchar 到多字节字符之间的转换）

```
VOID LoadDLL() {

AllocConsole();
freopen("CONOUT$", "w", stdout);
std::cout << "Debug Start" << std::endl;
std::ostringstream ostr;
ostr << clientpid;
clientpids = ostr.str();
ostr.str("");

TCHAR tempcvar[MAX_PATH];
GetSystemDirectory(tempcvar, MAX_PATH);

// Convertion between tchar in unicode (wide char) and multibyte
wchar_t * tempcvar_widechar = (wchar_t*)tempcvar;
char* to_convert;
int bytes_to_store = WideCharToMultiByte(CP_ACP,
    0,
    tempcvar_widechar,
    -1,NULL,0,NULL,NULL);
to_convert = new char[bytes_to_store];

WideCharToMultiByte(CP_ACP,
    0,
    tempcvar_widechar,
    -1,to_convert,bytes_to_store,NULL,NULL);

// Using char* to_convert that is the tempcvar converted to multibyte
ostr << to_convert << "\\" << clientpids << ".nfo" << std::endl;
clientfilepath = ostr.str();
//clientfile.c_str()
ostr.str("");

std::cout << "Start search for: " << clientfilepath << std::endl;

FOREVER {
    clientfile.open(clientfilepath,ios::in);
    if(clientfile.good()) {
        std::cout << "Exists!" << std::endl;
    }

    Sleep(10);
};

} 
```

如果此示例对您不起作用，您可以搜索有关宽字符串到多字节字符串转换的更多信息。
检查您是否正在使用 Unicode，如果是，也许这是您的问题。

如果您不使用 unicode，则代码中的问题可能是打开文件。

希望能帮助到你！

# rhino - Rhino 和 envjs：与 Java 应用程序共享 Javascript 对象

> ID：15977578
> 
> 赞同：0
> 
> 时间：2013-04-12T17:38:45.873
> 
> 标签：rhino, envjs

我正在使用嵌入在我的 java 应用程序中的 rhino 和 envjs，如[envjs 指南中所述](http://www.envjs.com/doc/guides)

Java代码：

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.ContextFactory;
import org.mozilla.javascript.tools.shell.Global;
import org.mozilla.javascript.tools.shell.Main;
...
Context cx = ContextFactory.getGlobal().enterContext();
cx.setOptimizationLevel(-1);
cx.setLanguageVersion(Context.VERSION_1_5);
Global global = Main.getGlobal();
global.init(cx);
Main.processSource(cx, "path/to/your/JSfile"); 
```

这是有效的，我的测试 javascript 文件正确加载了一个远程站点并使用 jQuery 对 HTML 元素进行了一些操作。

我不知道如何将数据从 JavaScript 发送回我的 Java 应用程序。

这是我的 .js 文件：

```
load('env.rhino.js');
load('jquery.js');
Envjs.scriptTypes['text/javascript'] = true;
window.location = 'http://[mytestpage].html'
var body = $("body");
print("The body is: "+ $.trim(body));//this prints in the Java console!

//I'd like to call a function in my Java code from the Javascript and pass the bodyText as a parameter to it. How can i do this?
myJavaFunction(bodytext); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:12:11.610

所以这个 Rhino 教程对于学习如何将你的 Java 连接到 JS 非常有用。 [https://developer.mozilla.org/en-US/docs/Scripting_Java](https://developer.mozilla.org/en-US/docs/Scripting_Java)

# html - <A> TAG悬停时出现奇怪问题

> ID：15977579
> 
> 赞同：0
> 
> 时间：2013-04-12T17:38:46.397
> 
> 标签：html, css, hover

有一个[JSFidle 链接](http://jsfiddle.net/BY5vQ/)不工作，这里更新了工作但不完整的[另一个 JSFidle 链接](http://jsfiddle.net/BY5vQ/1/)

区别就在那里

```
<a href="#social">                  
    <div id="b-social" class="navi-ring"><p>Social</p></div>
</a> 
```

`<a>`标记使其从 css 中突出显示错误

```
.navi-ring:nth-child(2):hover{
    background-color: #0C95C7;
} 
```

它确实突出，但从此

```
.navi-ring:nth-child(1):hover{
    background-color: rgb(253,225,100);
} 
```

同样，当我将`<a>`标签添加到其他 div 时，它会从`.nav-irin`g 第一个孩子中突出显示。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:51:37.753

将您的第 n 个孩子放在锚标签上，并将锚标签添加到所有 4 个圆圈 div。但是像这样瞄准他们

```
#brain-menu a:nth-child(x):hover navi-ring {

} 
```

你的第二个小提琴有效，因为圈 2-4 在同一个容器下

像这样

[http://jsfiddle.net/BY5vQ/2/](http://jsfiddle.net/BY5vQ/2/)

更改href我刚刚做的例子

# android - 使用 FragmentTransaction.replace() 时的 Android 片段视图状态丢失

> ID：15977582
> 
> 赞同：10
> 
> 时间：2013-04-12T17:39:12.217
> 
> 标签：android, android-fragments, android-fragmentactivity, android-lifecycle

我遇到了一个很大的问题，我不太明白发生了什么。我正在开发一个使用 Fragments（来自支持库）的应用程序，并且正在使用`FragmentTransaction.replace()`将新的 Fragments 放置到后台堆栈并替换旧的。代码如下所示：

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = ft.beginTransaction();
// Animations in my res/anim folder
ft.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left, R.anim.slide_in_left, R.anim.slide_out_right);
ft.replace(R.id.fragment_container, newFragment, tag);
ft.addToBackStack(null);
ft.commit(); 
```

这成功替换了我的片段。我的问题如下。在一个片段中，我有一个根据用户输入构建的项目列表。现在，当用户单击下一步然后单击后退按钮（返回列表）时，列表为空，因为视图已被破坏。现在，我注意到以下几点：

1.  onSaveInstanceState 没有被调用。我相信这是因为只有在父 Activity 告诉它时才会调用它。根据文档：“在许多情况下，片段可能大部分被拆除（例如，当放置在没有显示 UI 的后台堆栈时），但在其拥有的活动实际需要保存其状态之前，它的状态不会被保存."。显然，对 FragmentTransaction 执行替换并不是其中之一。有人对此有确认或更好的解释吗？
2.  setOnRetainInstanceState(true) 在这种情况下没有帮助。同样，我相信这与文档中的信息有关：“控制是否在 Activity 重新创建期间保留片段实例（例如从配置更改中）”。我没有在重新创建活动时执行任何操作，所以这没有用。

所以，我想我的主要问题是：有没有办法在使用时保留视图状态（只保留片段）`replace`？有`FragmentTransaction.add()`，但也有一些问题。一种是没有执行退出动画，因此动画不正确。另一个是旧片段（被置于不可见状态的片段）仍然可以点击的新片段。例如，如果我有一个 ListFragment，并且我通过使用 add 在其上放置一个内容片段，我仍然可以单击 ListFragment 中的列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:58:59.330

听起来您只需要确保已正确实现 onCreateView 和 onDestroyView。您所描述的情况似乎表明，当列表片段被放在后台堆栈（作为替换事务的结果）时，Android 正在调用 onDestroyView 以释放一些资源。但是，它显然没有破坏列表片段，因为当您点击返回时，您将返回片段的相同实例。

假设这一切都是真的，那么当用户点击返回时，Android 将调用 onCreateView。您存储在片段的实例变量中的任何状态都应该仍然存在，您需要做的就是重新填充视图......也许在 ListView 或其他上设置适配器。

还要确保您的 onSaveInstanceState() 回调确实保存了重建视图所需的任何实例状态。这样，如果片段确实被完全销毁，FragmentManager 可以在稍后需要重新创建片段时恢复状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T05:52:02.617

无法看到您的片段代码，这有点猜测，但在过去我遇到过同样的问题，我发现在您的`ListFragment`in中重置适配器`onViewStateRestored`似乎可以解决问题。

```
public void onViewStateRestored (Bundle savedInstanceState)
{
    super.onViewStateRestored (savedInstanceState);
    setListAdapter(new ArrayAdapter(Activity, R.layout.nav_item, objects));
} 
```

考虑到文档指出此方法在 after`onActivityCreated`但 before调用，这很奇怪`onStart`。但它似乎在其他时间也被调用，因为当最近的片段事务从返回堆栈中弹出时，此方法在显示先前替换的片段之前被调用。拥有片段的活动没有以任何方式暂停或隐藏，因此根据文档`onViewStateRestored`不应调用，因为只是修改了片段。但这似乎仍然有效。

# ios - 新屏幕上的 UITextField 将不接受输入

> ID：15977585
> 
> 赞同：1
> 
> 时间：2013-04-12T17:39:29.343
> 
> 标签：ios, objective-c, uitextfield, uitextfielddelegate

我正在 Xcode 中修改现有的 iPad 应用程序。该应用程序非常简单，由 4 个屏幕组成，用于收集信息并将其发送到 Web 服务。

我正在尝试添加一个带有四个文本字段的附加屏幕。没有文本字段将接受任何输入。我已经浏览了视图层次结构并确认所有视图都启用了用户交互，并且没有为多点触控配置。

我已将 UITextFieldDelegate 添加到视图控制器，并将 UITextField 委托连接到视图控制器。

我在 textFieldShouldBeginEditing 中添加了一个 NSLog，每次触摸该字段时它都会显示在控制台中。但它不显示光标，也不显示键盘。

仅仅因为我认为我可能会失去理智，我用一个只有一个文本字段的空白视图控制器替换了整个屏幕，它仍然不接受任何输入。

此外，为了确保我不会失去对现实的把握，我创建了一个新项目，该项目由一个视图和一个文本字段组成，它确实按预期工作。

我真的不知道从这里去哪里。我的应用程序中其他屏幕上的所有文本字段都工作正常。这只是为了我的生活，我无法让新屏幕上的文本字段正常工作。

帮助！！

标记

```
//
//  TestViewController.h
//

#import <UIKit/UIKit.h>

@interface TestViewController : UIViewController <UITextFieldDelegate>

@end 
```

和

```
//
//  TestViewController.m
//

#import "TestViewController.h"

@interface TestViewController ()

@end

@implementation TestViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    NSLog(@"textFieldShouldBeginEditing");
    return YES;
}

-(BOOL)textFieldShouldEndEditing:(UITextField *)textField{
    NSLog(@"textFieldShouldEndEditing");
    return YES;
}

-(BOOL)textFieldShouldReturn:(UITextField*)textField{
    NSLog(@"textFieldShouldEndEditing");
    return YES;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:10:46.190

我最终从头开始创建一个新项目，首先布置我所有的屏幕和 UITextField，将所有内容连接到代码并首先对其进行测试。然后我回去添加了其余的图形元素。

我不知道是什么导致了原始问题。我会把它写成一个 Xcode 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:06:38.693

您尝试通过**`textfield.delegate = self`**手动添加`viewDidLoad`或`viewWillAppear`在该控制器中添加方法..希望这会有所帮助。

# matrix - 解析 SVG - 变换矩阵分解

> ID：15977591
> 
> 赞同：1
> 
> 时间：2013-04-12T17:39:47.150
> 
> 标签：matrix, svg, transformation, decomposition

我需要解析 SVG（只是简单的事情），剩下要做的就是从矩阵变换中正确提取位置和角度。我知道这个问题已经被问过很多次，我相信我已经阅读了很多答案、文件等，但仍然无法正确处理。这是我设法准备的最简单的例子：

我创建了 1000x1000 的文档（所有数字以 px 为单位），并在 100,100 位置放置了一个 100x100 大小的矩形。它生成了以下 SVG 文件（我已经删除了样式属性和父标签）。文件中的任何地方都没有其他转换：

```
 <rect
       width="100"
       height="100"
       x="100"
       y="100" /> 
```

然后我将矩形旋转了 33 度（使用“转换”inkscape 工具）。SVG 代码如下所示：

```
 <rect
       width="100"
       height="100"
       x="-5.8952699"
       y="157.49644"
       transform="matrix(0.83867057,-0.54463904,0.54463904,0.83867057,0,0)" /> 
```

现在，我的目标是从矩阵中提取位置和角度，所以基本上我想取回以下值：x:100,y:100,angle:33。为了做到这一点，我假设了以下公式：

```
sx=sqrt(a^2+b^2)
sy=sqrt(c^2+d^2)

t=atan(c/d) OR t=atan(-b/a)
t=acos(a) if MATRIX is PURE

x' = tx + sx*(COS(t)*x-SIN(t)*y)
y' = ty + sy*(SIN(t)*x+COS(t)*y) 
```

结果是：t = 0.575958787（即 33 度） - 非常好

但是 x'=-90.72230563 和 y'=128.8770646 这正是让我感到困惑的地方——为什么不是 100,100 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:44:00.950

以下是查找坐标的方法。我在这里使用 Python 进行计算。

应用矩阵变换，旋转中心为 (0, 0)。坐标 (-5.895, 157.496) 是正方形需要的位置，因此如果将矩形旋转 33 度，旋转中心位于 (0, 0)，它最终将围绕其中心旋转 33 度。

首先，您似乎没有问题弄清楚旋转角度。我们将只专注于如何确定位置。

让我们从我们所知道的开始：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import math
>>> c = math.cos(33 * math.pi / 180)
>>> s = math.sin(33 * math.pi / 180)
>>> c
0.838670567945424
>>> s
0.5446390350150271
>>> x0 = -5.8952699
>>> y0 = 157.49644 
```

这些是正方形在旋转之前左上角的坐标。正方形围绕其中心旋转，我们想找出它的中心旋转到的位置：

```
>>> x1 = x0 + 50
>>> y1 = y0 + 50
>>> x1
44.1047301
>>> y1
207.49644 
```

现在，旋转正方形的中心：

```
>>> x2 = c * x1 + s * y1
>>> y2 = -s * x1 + c * y1
>>> x2
149.9999998927001
>>> y2
149.9999995401914 
```

从这里很清楚，如果正方形没有旋转，我们如何到达正方形的左上角。

```
>>> x3 = x2 - 50
>>> y3 = y2 - 50
>>> x3
99.99999989270009
>>> y3
99.9999995401914 
```

# rest - REST api中请求资源摘要表示的最佳方式？

> ID：15977593
> 
> 赞同：10
> 
> 时间：2013-04-12T17:39:57.113
> 
> 标签：rest

我有一个 REST api 处理大量资源，客户。客户有时需要客户的缩写/摘要表示。什么是指定请求是摘要表示的好方法？

要获得客户 123 的完整表示，请执行以下操作：`/customers/123`

获得摘要表示是`/customers/123/summary`一种好方法吗？有更好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:45:01.153

为了使您的解决方案可重用和灵活，我建议实施“过滤器”查询参数。在那里，您可以放置​​客户端所需的任何字段：

```
GET /customers/123?fields=id,first_name,last_name,email 
```

这样，如果以后您需要为不同的任务创建不同的摘要，您将无需修改任何内容。

我不推荐`/customers/123/summary`，因为它不灵活。对于一种情况可能没问题，但如果客户端需要为不同的情况访问不同的属性，您将不得不调整资源（很可能通过返回比需要更多的字段）。如果您想“隐藏”字段名称，也许替代方法可能是这样的：

```
GET /customers/123?view=DESCRIPTION 
```

其中“ `DESCRIPTION`”将描述摘要的类型。例如：

```
GET /customers/123?view=addresses_only // eg. returns billing and home address
GET /customers/123?view=short // eg. returns only id, first name, last name 
```

这仍然很灵活，因为您可以轻松创建新视图。

# mpi - 有什么理由应该使用 MPI 的 Wtime？

> ID：15977598
> 
> 赞同：2
> 
> 时间：2013-04-12T17:40:06.090
> 
> 标签：mpi

我一直想知道是否有任何特殊原因为什么应该使用 Wtime 而不是其他时间测量方法？它更准确或更可靠吗？

我看到的唯一原因是平台独立性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T18:00:06.390

由于MPI_Wtime()保证所有rank的开始时间相同，所以不仅可以用来计算同一rank的任意两点之间的时间，还可以比较不同rank到达某一点所用的时间非常方便。

这个全局同步时钟也可以有其他应用程序，但现在我只能考虑这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T22:36:00.967

MPI_Wtime() 不保证位于不同节点的进程之间的全局同步。它确实为位于同一节点上的进程提供了同步时钟，但 gettimeofday() 也提供了相同的时钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-22T08:36:38.843

根据 MPI_Wtime 手册（Open MPI 4.0.0）：

> 在 POSIX 平台上，此函数可能使用调用比 gettimeofday() 系统调用便宜的计时器，但如果没有便宜的高分辨率计时器可用，则将回退到 gettimeofday()。可以参考 ompi_info 命令来查看 Open MPI 是否在您的平台上支持本机高分辨率计时器；查看“MPI_WTIME support”的值（或查看可解析输出时的“options:mpi-wtime”）。如果此值是“native”，则将使用可能比 gettimeofday() 更便宜的方法来获取调用 MPI_Wtime 的时间。

# javascript - 如何使用 JavaScript/jQuery 向存储在 cookie 中的数组添加/推送新值

> ID：15977599
> 
> 赞同：0
> 
> 时间：2013-04-12T17:40:12.253
> 
> 标签：javascript, jquery, arrays, cookies

我使用jQuery创建了一个`album_like`存储数组的cookie，`id`当满足某些条件时，我想向该数组添加/推送新值，下面是我的代码

```
if (typeof $.cookie('album_like') == 'undefined') {
    $.cookie('album_like', [data.album_id], { expires: 365, path: '/' });
} else {
    var arr = [$.cookie('album_like')];
    if (!($.inArray(data.album_id, arr) > 0)) {
        arr.push(data.album_id);
        $.cookie('album_like', arr);
    }
} 
```

我用firebug检查值时发现数组变成`["1, 2, 3, 4, 5"]`了，所以代码`!($.inArray(data.album_id, arr) > 0)`不起作用，我认为数组应该是`[1, 2, 3, 4, 5]`.

任何人都可以对我的代码提出一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:45:21.950

这会让你得到一个字符串作为数组条目而不是数组。

```
 var arr = [$.cookie('album_like')]; 
```

试试这个：

```
var arr = $.cookie('album_like').split(', '); // split string to array
$.each(arr, function(i,v){
    arr[i] = parseInt(v); // convert string array entries to ints
}); 
```

* * *

或者您可以使用 json 编码来存储和检索数组[jquery 将 json 数据对象保存在 cookie 中](https://stackoverflow.com/questions/4225030/jquery-save-json-data-object-in-cookie)

```
 $.cookie.json = true; 
```

# c# - 在 SignalR 的客户端设置状态变量

> ID：15977602
> 
> 赞同：2
> 
> 时间：2013-04-12T17:40:21.363
> 
> 标签：c#, javascript, jquery, signalr

我正在使用 javascript 库连接到托管在控制台应用程序中的 signalR 服务器。

因此，我连接并设置可以从服务器调用的客户端方法，如下所示：

```
var connection = $.hubConnection('http://localhost:8080'),
    proxy = connection.createHubProxy('TestApp');

proxy.on('sendMessage', function () {
    // do stuff!
}); 
```

[这里](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs-%28No-Proxy%29)有详细描述。

但是，以这种方式使用客户端 javascript 的文档没有解释如何往返信息（在客户端设置“状态”变量并使其可以从服务器访问）。

这可能很明显，但任何帮助将不胜感激！

此外，还有一些我认为与我好奇的密切相关的事情。我知道客户端代码在调用服务器上的函数后可以获得返回值/回调（来自上面链接的文档）

```
proxy.invoke('add', 1, 2)
     .done(function(result) {
         console.log('The result is ' + result);
     }); 
```

但是当客户端完成任务时，服务器是否可以从客户端获取回调？（显然，只要让客户端触发预定义的事件就可以解决这个问题，但如果可能的话，处理所有回调而不需要设置另一个事件会很好。）

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:46:06.313

**1）** 设置状态很简单：

```
proxy.state.foo = 1337; 
```

然后当然你可以在服务器上通过

```
int myFoo = Clients.Caller.foo; 
```

**2)** 不，当客户端功能完成执行时，您无法在服务器上收到通知。如果您想知道客户端功能何时完成，您只需自己回调服务器即可。

例如：

```
proxy.on('foo', function(){
    console.log("Foo executed");
    proxy.invoke("fooDone");
}); 
```

然后，您需要在服务器上创建一个“fooDone”函数来处理回调。

希望这可以帮助！

# paypal - 自适应付款 - 延迟付款直到卖家确认

> ID：15977610
> 
> 赞同：1
> 
> 时间：2013-04-12T17:40:42.863
> 
> 标签：paypal

背景：

我们正在创建一个将消费者与生产者联系起来的市场。

工作流程：

1) 消费者上传要生产的对象 2) 我们提供符合条件的生产者列表 3) 消费者从列表中选择生产者 4) 消费者支付 5) 生产者通知工作，可以接受/拒绝工作 6a) 如果接受 - 生产者创建产品并且交付给消费者 6b) 如果拒绝 - 消费者发出退款

问题：

如果生产者拒绝，我们如何自动退款？贝宝是否提供确认系统，还是必须由外部功能实现？如果 Paypal 有“接受/拒绝”付款，那么一切都可以在 paypal 环境中处理。如果 Paypal 没有此功能，我们很可能必须拥有一个自动电子邮件系统，要求生产者接受/拒绝，我们必须手动发出退款。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:11:19.690

付款完成后，您可以使用 IPN 获得通知。然后设置生产者点击accept或deny的接口。如果他们点击拒绝，您可以让该系统调用 Refund API 将钱退回给买家。这将允许您自动化系统。

# database - 防止数据库设计中的循环引用

> ID：15977614
> 
> 赞同：1
> 
> 时间：2013-04-12T17:40:58.457
> 
> 标签：database, database-design, circular-reference

我有这些表：

--位置（ID）

--演唱会 (ID , LocationID_FK)

--放映时间（ID，ConcertID_FK）

--SeatBlock (ID , ShowtimesID_FK)

--Seat (ID , SeatBlockID_FK)

现在我有一个名为 SeatValue 的实体。这个实体是一些座位的值，比如 Golden、Silver 等。对于这个实体，每个记录都必须有一个指定的 Showtime。我认为这是解决方案：

SeatValue (ID , ShowtimesID_FK)

和座位更改为：

--Seat (ID, SeatBlockID_FK, SeatValueID_FK)

但我认为它是创建循环参考。不是吗？我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:50:36.913

在这种情况下，我会提出以下建议：

*   位置（ID、元数据）
*   音乐会（ID、LocationID_FK、元数据）
*   放映时间（ID、ConcertID_FK、元数据）
*   SeatBlock（ID、Location_FK、元数据）
*   座位（ID、SeatBlockID_FK、元数据）
*   SeatPricing（ID、Seat_FK [或 SeatBlock_FK，如果按块进行定价]、ShowTime_FK、元数据）
*   SeatAssignment（ID、SeatPricing_FK、Seat_FK [如果座位定价按块完成]、元数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:15:03.920

*   剧院存在。
*   音乐会存在。
*   剧院分为座位区。
*   座椅是座椅块的一部分。
*   音乐会的演出安排在剧院。
*   表演有座位出售。

* * *

![在此处输入图像描述](https://i.stack.imgur.com/7T0fU.png)

# navigation - Woocommerce 获得下一个/上一个产品相同的类别

> ID：15977615
> 
> 赞同：2
> 
> 时间：2013-04-12T17:40:59.940
> 
> 标签：navigation, categories, woocommerce

我读过这个： [Woocommerce 获得下一个/上一个产品](https://stackoverflow.com/questions/13597687/woocommerce-get-next-previous-product)

并且还尝试了这个：

`<?php previous_post_link('%link', 'Previous in category', TRUE); ?>`

他们中的任何一个都在woocommerce产品类别下工作，知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-14T21:05:02.353

```
<?php previous_post_link_product('%link', '&laquo; Anterior: %title', true); ?>
<?php next_post_link_product('%link', 'Siguiente: %title &raquo;', true); ?> 
```

在您的文件 yourtheme/functions.php 添加这些函数

```
function next_post_link_product($format='%link &raquo;', $link='%title', $in_same_cat = false, $excluded_categories = '') {
    adjacent_post_link_product($format, $link, $in_same_cat, $excluded_categories, false);
}

function previous_post_link_product($format='&laquo; %link', $link='%title', $in_same_cat = false, $excluded_categories = '') {
    adjacent_post_link_product($format, $link, $in_same_cat, $excluded_categories, true);
}

function adjacent_post_link_product( $format, $link, $in_same_cat = false, $excluded_categories = '', $previous = true ) {
    if ( $previous && is_attachment() )
        $post = get_post( get_post()->post_parent );
    else
        $post = get_adjacent_post_product( $in_same_cat, $excluded_categories, $previous );

    if ( ! $post ) {
        $output = '';
    } else {
        $title = $post->post_title;

        if ( empty( $post->post_title ) )
            $title = $previous ? __( 'Previous Post' ) : __( 'Next Post' );

        $title = apply_filters( 'the_title', $title, $post->ID );
        $date = mysql2date( get_option( 'date_format' ), $post->post_date );
        $rel = $previous ? 'prev' : 'next';

        $string = '<a href="' . get_permalink( $post ) . '" rel="'.$rel.'">';
        $inlink = str_replace( '%title', $title, $link );
        $inlink = str_replace( '%date', $date, $inlink );
        $inlink = $string . $inlink . '</a>';

        $output = str_replace( '%link', $inlink, $format );
    }

    $adjacent = $previous ? 'previous' : 'next';

    echo apply_filters( "{$adjacent}_post_link", $output, $format, $link, $post );
}

function get_adjacent_post_product( $in_same_cat = false, $excluded_categories = '', $previous = true ) {
    global $wpdb;

    if ( ! $post = get_post() )
        return null;

    $current_post_date = $post->post_date;

    $join = '';
    $posts_in_ex_cats_sql = '';
    if ( $in_same_cat || ! empty( $excluded_categories ) ) {
        $join = " INNER JOIN $wpdb->term_relationships AS tr ON p.ID = tr.object_id INNER JOIN $wpdb->term_taxonomy tt ON tr.term_taxonomy_id = tt.term_taxonomy_id";

        if ( $in_same_cat ) {
            if ( ! is_object_in_taxonomy( $post->post_type, 'product_cat' ) )
                return '';
            $cat_array = wp_get_object_terms($post->ID, 'product_cat', array('fields' => 'ids'));
            if ( ! $cat_array || is_wp_error( $cat_array ) )
                return '';
            $join .= " AND tt.taxonomy = 'product_cat' AND tt.term_id IN (" . implode(',', $cat_array) . ")";
        }

        $posts_in_ex_cats_sql = "AND tt.taxonomy = 'product_cat'";
        if ( ! empty( $excluded_categories ) ) {
            if ( ! is_array( $excluded_categories ) ) {
                // back-compat, $excluded_categories used to be IDs separated by " and "
                if ( strpos( $excluded_categories, ' and ' ) !== false ) {
                    _deprecated_argument( __FUNCTION__, '3.3', sprintf( __( 'Use commas instead of %s to separate excluded categories.' ), "'and'" ) );
                    $excluded_categories = explode( ' and ', $excluded_categories );
                } else {
                    $excluded_categories = explode( ',', $excluded_categories );
                }
            }

            $excluded_categories = array_map( 'intval', $excluded_categories );

            if ( ! empty( $cat_array ) ) {
                $excluded_categories = array_diff($excluded_categories, $cat_array);
                $posts_in_ex_cats_sql = '';
            }

            if ( !empty($excluded_categories) ) {
                $posts_in_ex_cats_sql = " AND tt.taxonomy = 'product_cat' AND tt.term_id NOT IN (" . implode($excluded_categories, ',') . ')';
            }
        }
    }

    $adjacent = $previous ? 'previous' : 'next';
    $op = $previous ? '<' : '>';
    $order = $previous ? 'DESC' : 'ASC';

    $join  = apply_filters( "get_{$adjacent}_post_join", $join, $in_same_cat, $excluded_categories );
    $where = apply_filters( "get_{$adjacent}_post_where", $wpdb->prepare("WHERE p.post_date $op %s AND p.post_type = %s AND p.post_status = 'publish' $posts_in_ex_cats_sql", $current_post_date, $post->post_type), $in_same_cat, $excluded_categories );
    $sort  = apply_filters( "get_{$adjacent}_post_sort", "ORDER BY p.post_date $order LIMIT 1" );

    $query = "SELECT p.id FROM $wpdb->posts AS p $join $where $sort";
    $query_key = 'adjacent_post_' . md5($query);
    $result = wp_cache_get($query_key, 'counts');
    if ( false !== $result ) {
        if ( $result )
            $result = get_post( $result );
        return $result;
    }

    $result = $wpdb->get_var( $query );
    if ( null === $result )
        $result = '';

    wp_cache_set($query_key, $result, 'counts');

    if ( $result )
        $result = get_post( $result );

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-10T23:05:48.087

**示例**：

```
<?php previous_post_link( 'Previous: %link', '%title', true, '', 'product_cat' ); ?>
<?php next_post_link( 'Next: %link', '%title', true, '', 'product_cat' ); ?> 
```

**说明**：

使用 WordPress'`previous_post_link`或`next_post_link`将工作。事实上，你就快到了。

除了设置`true`为第三个参数*($in_same_term) 之外*，请确保还将分类名称作为最后一个参数*($taxonomy)*传递。对于 WooCommerce，默认产品类别是`product_cat`.

需要注意的一点是，这些功能将获得与分配给当前产品的任何术语相匹配的下一个/上一个产品。可以通过将术语 id(s) 作为第四个参数*($exclude_terms)*来排除术语。

**参考**：

[https://developer.wordpress.org/reference/functions/previous_post_link/](https://developer.wordpress.org/reference/functions/previous_post_link/) [https://developer.wordpress.org/reference/functions/next_post_link/](https://developer.wordpress.org/reference/functions/next_post_link/)

```
<?php previous_post_link( $format, $link, $in_same_term = false, $excluded_terms = '', $taxonomy = 'category' ); ?>
<?php next_post_link( $format, $link, $in_same_term = false, $excluded_terms = '', $taxonomy = 'category' ); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-19T08:54:23.580

Edgardos 解决方案对我来说是一个很棒的起点。

但是，它假定产品是按 post_date 订购的。通常 menu_order 应该有更高的排序优先级。

所以我改变了： `$current_post_date = $post->post_date;`

进入： `$current_post_menu_order = $post->menu_order;`

以及使用 p.menu_order / $current_post_menu_order 的 $where：

`$where = apply_filters( "get_{$adjacent}_post_where", $wpdb->prepare("WHERE p.menu_order $op %s AND p.post_type = %s AND p.post_status = 'publish' $posts_in_ex_cats_sql", $current_post_menu_order, $post->post_type), $in_same_cat, $excluded_categories );`

# c++ - 具有新数据成员的多态性

> ID：15977617
> 
> 赞同：3
> 
> 时间：2013-04-12T17:41:14.373
> 
> 标签：c++, polymorphism

我想编写一个函数，可以使用多态性初始化和返回不同类的对象。我还希望这些类具有可以通过虚函数调用的不同数据成员。我在下面写的可能有用。你能检查一下我那里是否有一些未定义的行为吗？谢谢！我担心的一件事是，当我最后调用“删除多点”时，它不会释放“CRectangle”独有的数据成员“比例”。如果我的代码不起作用，有没有办法让它起作用？

```
class CPolygon {
  protected:
    int width, height;
  public:
    void set_values (int a, int b)
      { width=a; height=b; }
    virtual int area ()
      { return (0); }
  };

class CRectangle: public CPolygon {
  public:
    int scale;
    int area ()
      { return (width * height * scale ); }
  };

CPolygon *polytestinner()
{
    CPolygon *polypoint = 0;

    int consoleinput = 2;
    if (consoleinput>1)
    {
        CRectangle *rectpoint = new CRectangle();
        rectpoint->scale = 4;
        polypoint = rectpoint;
    }
    polypoint->set_values(3,4);
    return polypoint;
}

void polytest()
{
    CPolygon *polypoint = polytestinner();
    gstd::print<int>(polypoint->area());    
    delete polypoint;
}

int main()
{
    polytest();
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:46:16.397

我不得不指出 Andrei Alexandrescu 的对象工厂架构。它允许您的架构增长，而无需在每次创建具体类型时修改工厂。它基于一个“回调寄存器”，在一些库中它实际上是作为一个通用组件实现的。代码如下。

[实时代码示例](http://liveworkspace.org/code/3g7eSF%240)

```
#include<map>
#include<iostream>
#include<stdexcept>

// your typical base class
class Shape {
 public:
  virtual void Draw() const = 0;
  // virtual destructor allows concrete types to implement their own
  // destrucion mechanisms
  virtual ~Shape() {} 
};

// this factory architecture was suggested by Andrei Alexandrescu in
// his book "Modern C++ Design" --- read it to get the full
// explanation (and a more generic implementation); this is just an
// example
class ShapeFactory {
 public:
  // this typedef allows to "name" arbitrary functions which take no
  // arguments and return a pointer to a Shape instance
  typedef Shape* (*CreateShapeCallback)();

  Shape* CreateShape(int ShapeId) {
    // try to find the callback corresponding to the given shape id;
    // if no shape id found, throw exception
    CallbackMap::const_iterator it = m_callbacks.find(ShapeId);
    if(it == m_callbacks.end()) {
      throw std::runtime_error("unknown shape id");
    } else {
      // create the instance using the creator callback
      return (it->second)();
    }    
  }

  bool RegisterShape(int ShapeId, CreateShapeCallback Creator) {
    // returns true if shape was registered; false if it had already
    // been registered
    return m_callbacks.insert(CallbackMap::value_type(ShapeId, Creator)).second;
  }

  bool UnRegisterShape(int ShapeId) {
    // returns true if shape was unregistered, false if it was not
    // registered in the first place
    return m_callbacks.erase(ShapeId) == 1;
  }

 private:
  // the typedef simplifies the implementation
  typedef std::map<int, CreateShapeCallback> CallbackMap;
  // the callbacks are stored in a map int->callback (see typedef
  // above)
  CallbackMap m_callbacks;
};

// create some concrete shapes... you would do this in other CPP files
class Line : public Shape {
 public:
  void Draw() const {
    std::cout<<"Drawing a line"<<std::endl;
  }
};

// another concrete shape...
class Circle : public Shape {
 public:
  void Draw() const {
    std::cout<<"Drawing a circle"<<std::endl;
  }
};
// ... other concrete shapes...

enum ShapeIds {LINE=1, CIRCLE, COUNT};
Shape* CreateLine() { return new Line; }
Shape* CreateCircle() { return new Circle; }

int main() {
  // suppose this is the "singleton" instance for the ShapeFactory
  // (this is an example! Singletons are not implemented like this!)  
  ShapeFactory *factory = new ShapeFactory;
  factory->RegisterShape(ShapeIds::LINE, CreateLine);
  factory->RegisterShape(ShapeIds::CIRCLE, CreateCircle);

  Shape* s1 = factory->CreateShape(ShapeIds::CIRCLE);
  Shape* s2 = factory->CreateShape(ShapeIds::LINE);
  s1->Draw();
  s2->Draw();
  // will throw an error
  try {
    Shape *s3 = factory->CreateShape(-1);
    s3->Draw();    
  } catch(const std::exception& e) {
    std::cout<<"caught exception: "<<e.what()<<std::endl;    
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:44:24.073

`CPolygon`需要一个虚拟析构函数：

```
virtual ~CPolygon() {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:47:39.280

您`undefined behavior`的代码中有：

```
 CPolygon *polypoint;
  delete polypoint; 
```

`base class pointer`在没有虚拟析构函数时删除 a将导致*未定义的行为。*

您的`CPolygon`类和`CRectangle`类没有析构函数，尽管在这种情况下编译器会为您生成默认析构函数，但它们是`not virtual by default`. 因此，您至少需要`virtual destructor`为您的基类定义一个，即`CPolygon`.

# c++ - 比格南算术。C++ 类

> ID：15977620
> 
> 赞同：0
> 
> 时间：2013-04-12T17:41:28.330
> 
> 标签：c++, class, operator-overloading, biginteger, bigint

最近开始研究C++中的类和运算符重载，为了练习，写了下面的Bignum类。链接： http: [//pastebin.com/cQNwRChx](http://pastebin.com/cQNwRChx)。它不是最终版本，例如没有异常处理，也许它不是那么有效，所以我想澄清一些问题：

1.  此代码在 MSVS 2010 中成功编译，但 GNU C++ 4.4.1 表示，在第 465 行*的此范围内未声明“fft” 。*
2.  当结果很大时，我使用快速傅里叶变换来乘以数字。由于标准复数非常慢，我编写了自己的实现。在我看来，这些复数应该隐藏起来，因为它就像是 Lint 实现的一部分。所以我将它声明为 Lint 的私有嵌套类，并将 fft 声明为 Lint 的朋友。为什么它在 GNU 中不起作用？
3.  MSVS 的调试器显示，常量 ONE 不是静态常量。它在下面定义，在 Lint 的定义之后。
4.  我想在表达式中使用带有 int、unsigned int 等的类，并且当前版本工作正常，但我也想有机会写这样的东西：`if (a) ...`，其中 a 是 Lint。但是，如果我将隐式转换定义为 bool 和 write `a+b`，其中 a 是 int 而 b 是 Lint，就会有歧义。我怎么解决这个问题？

UPD。有一个简单的伪代码，没有多余的函数和定义： http: [//pastebin.com/rauKQjtH](http://pastebin.com/rauKQjtH)。

# java - 使用 libGDX 将 tmx 文件加载到 java 时出现异常

> ID：15977622
> 
> 赞同：3
> 
> 时间：2013-04-12T17:41:41.150
> 
> 标签：java, xml, libgdx, tiled, tmx

当我最近尝试加载我在 Tiled 中制作的基本地图时，我得到了异常： TMX 图层数据的不支持的编码 (XML)

我查看了 badlogicgames 网站上的教程并做了同样的事情

```
private TiledMap map;

public void create() {      
     map = new TmxMapLoader().load("data/jf2.tmx");
} 
```

在这里，我将我的 jf2.tmx 文件放在 assets 文件夹中。然后我将所有图像文件移动到同一目录。所以基本上......我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T21:51:34.207

目前 LibGDX (the `TmxMapLoader`) 无法加载数据以 XML 编码的地图（这是默认设置）。您需要将 Tiled 中的“Tile Layer Format”设置为 csv、base64、gzip 或 zlib。这些在当前的夜间构建中实现。您可以在属性下的平铺中打开地图后直接设置“图层格式”。

# algorithm - 是否有图形着色算法可以限制每种颜色的顶点数

> ID：15977623
> 
> 赞同：3
> 
> 时间：2013-04-12T17:41:44.397
> 
> 标签：algorithm, graph, colors, np, graph-coloring

我知道图形着色是一个 NP 完全问题。我想知道是否添加对可以具有给定颜色的顶点数量的限制会使问题更简单？我似乎找不到任何算法可以做到这一点。例如，如果我有一个图形，我想说“这个图形的最小着色是什么，使得每种颜色最多有 3 个顶点”，或者如果它简化了问题“有没有办法用这个图形着色4种颜色，每种颜色最多有3个顶点”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:44:15.510

通过对原始图着色问题的简单简化，这个问题仍然是 NP 完全的：具有 n 个节点的图是 k 可着色的，当且仅当该图可以用 k 种颜色着色并且没有颜色分配给超过 n 个节点。换句话说，您要解决的问题的一般版本将图形着色作为一种特殊情况，因此它仍然是 NP 难的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T11:06:50.410

*我会说，在存在k 着色*的限制的情况下寻找图的色数可以很容易地添加到基于 DSATUR 的精确算法[[Randall-Brown 72]](http://gcs1.googlecode.com/svn-history/r28/trunk/Recursos/BrownRandall.pdf) [[San Segundo 11]](http://oa.upm.es/11802/2/INVE_MEM_2011_107285.pdf)并在一个顶点时修剪搜索空间必须分配颜色*k*。无论如何，问题仍然存在于 NP 中。

# edit - 如何将 TF-IDF 与编辑距离或 Jaro-winkler 距离相结合

> ID：15977624
> 
> 赞同：6
> 
> 时间：2013-04-12T17:41:50.607
> 
> 标签：edit, classification, similarity, tf-idf

我正在寻找方法来提高 TF-IDF 称重方案在字符串匹配（相似性）中的准确性。主要问题是 TF-IDF 对 stings 中的拼写错误很敏感，并且大多数大型数据集往往有拼写错误。我意识到编辑距离的变体（基于字符的相似性度量——levienshtein、仿射气体、Jaro 和 Jaro-winkler）适用于计算存在印刷错误的字符串之间的相似性，但不适用于单词乱序的情况字符串。

因此，我想使用编辑距离校正能力来提高 TF-IDF 的准确性。

任何关于如何应对这一挑战的想法都将受到高度赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-08T21:00:33.763

CMU 研究人员在 2003 年发表了一篇论文，他们解释了如何将 TFIDF 与 Jaro-Winkler 结合： [https ://www.cs.cmu.edu/~pradeepr/papers/ijcai03.pdf](https://www.cs.cmu.edu/~pradeepr/papers/ijcai03.pdf)

他们的 Java 代码也可以在 sourceforge 上作为 secondString 项目获得： [https ://sourceforge.net/projects/secondstring/](https://sourceforge.net/projects/secondstring/)

这是 Javadocs 的链接： [http://secondstring.sourceforge.net/javadoc/](http://secondstring.sourceforge.net/javadoc/)

secondString 项目页面： [http ://secondstring.sourceforge.net/](http://secondstring.sourceforge.net/)

# java - 如何将 int 数组转换为 arraylist？

> ID：15977630
> 
> 赞同：0
> 
> 时间：2013-04-12T17:42:06.617
> 
> 标签：java

示例我有一个像这样初始化的 int 数组：

```
int[] array = {1, 2, 3, 4, 5, 6}; 
```

是否有可能使它成为一个数组列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:44:11.633

由于`array`is 属于 type`int[]`而 not `Integer[]`，[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)因此没有任何帮助。

这是一种可行的方法：

```
List<Integer> list = new ArrayList<Integer>();
for (int el : array) {
   list.add(el);
} 
```

如果`array`可以将类型更改为`Integer[]`，事情会变得更简单：

```
Integer[] array = {1, 2, 3, 4, 5, 6};
List<Integer> list = Arrays.asList(array); 
```

这给出了一个列表，但不是一个[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html). 你得到的*类似于*，`ArrayList`但是是固定大小的。如果这是一个问题，您可以使用：

```
List<Integer> list = new ArrayList<Integer>(Arrays.asList(array)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T17:46:35.470

```
int[] array = {1, 2, 3, 4, 5, 6};   
ArrayList myArrayList = new ArrayList<Integer>();
for(int i=0; i<array.length; i++)
{
    myArrayList.add(array[i]);
} 
```

希望这可以帮助你...

# html - 引导媒体对象未加载图像

> ID：15977631
> 
> 赞同：3
> 
> 时间：2013-04-12T17:42:15.600
> 
> 标签：html, twitter-bootstrap

我正在尝试在 span3 div 中加载引导媒体对象。一切正常，除了图像。我已经在其他地方检查过这个链接，它没有问题。

有什么建议么

```
<div class="container">
  <div class="row">
    <div class="span3">
       <div class="pull-left">
       <h3>Top Devices</h3>
           <div class="media">
              <a class="pull-left" href="#">
              <img class="media-object" data-src="<?php echo base_url(); ?>resource/img/devices/Asus-Nexus-7.png"/>
               </a>

       <div class="media-body">
        <h4 class="media-heading">Media heading</h4>
      </div>
    </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:03:00.927

**如果它只是您要加载到 span3 中的常规图像，那么您使用data-src**而不是**src**是否有原因？

或者，如果您还使用了诸如 foresight.js 之类的东西，例如，看看[这篇文章是否对您有帮助](https://github.com/desandro/imagesloaded/issues/32)

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-12T06:55:37.193

检查源代码，可能它会给你答案。

我认为你应该添加一个斜杠：

data-src="/resource/img/devices/Asus-Nexus-7.png

代替：

data-src="resource/img/devices/Asus-Nexus-7.png

问候

# c# - C# - 当父母改变时改变孩子

> ID：15977632
> 
> 赞同：1
> 
> 时间：2013-04-12T17:42:19.127
> 
> 标签：c#, winforms, inheritance

我正在用 C#、Windows 窗体做一个应用程序。

在这个应用程序中，我有一个包含多个元素的主表单。这个“Element”类被其他类继承（“ElementLabel”、“ElementPicture”、“ElementGraph”）。

在某些时候，我可能想在“批处理”模式下更改几个元素的某些属性，无论它们是什么。例如，我可能想更改所有选定元素的属性“值”。

问题是，例如，当父类中的属性“Value”发生更改时，我还想更改子类“ElementLabel”中存在的“Label”的属性“Text”。我已经看到很多关于通过孩子改变父母的话题，但不是这样。

我是否在这里遗漏了什么，或者我只是有一个糟糕的设计，甚至不应该发生这样的情况？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:51:30.487

好吧，在不了解您的架构的情况下很难说最好的选择是什么，但是子类可以通过覆盖方法来拦截父类中的事件。例如，在您的 ElementLabel 类中：

```
public override void set(String key, object newValue) {
    if (key.Equals("Value"))
        set("Text", "New label text!");
    base.set(key, newValue);
} 
```

如果你想要一个更通用的解决方案，你可以在你的父类中包含一个观察者模式；见[维基百科页面](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:59:08.573

您可以将实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-gb/library/system.componentmodel.inotifypropertychanged.aspx).

然后，您必须将对用于控制状态的“主”属性的引用传递给子控件。（理想情况下，它会被 Controller 类使用。）（我将此对象称为“主属性对象”。）

每个子控件都将订阅该[`PropertyChanged`](http://msdn.microsoft.com/en-gb/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件。

然后当 Controller 改变主属性对象的属性之一的值时，它会引发`PropertyChanged`事件，每个感兴趣的子对象都可以适当地响应。

这种方法有助于将控制器与视图分离。

顺序是：

1.  在创建子控件之前，先创建主属性对象。在控制器或主窗体中保留对此的引用（如果您将其用作控制器）。
2.  将对主属性对象的引用传递给每个需要它的子控件。
3.  每个子控件都应该订阅主属性对象的`PropertyChanged`事件。
4.  为每个孩子编写一个适当的处理程序。它将有权访问对主属性对象的引用，因此它将能够看到任何属性的新值。
5.  当需要更改属性时，控制器只需根据需要设置属性。属性设置器实现应该引发`PropertyChanged`事件，这将通知所有感兴趣的子控件，它们将更新其 UI 作为响应。

[编辑] 这实际上是 Reyan 上面提到的观察者模式的实现。

# javascript - Chrome：在 jquery fadeOut 后恢复文档焦点

> ID：15977636
> 
> 赞同：2
> 
> 时间：2013-04-12T17:42:32.190
> 
> 标签：javascript, jquery, google-chrome, focus, fadeout

我试图有一个可以用键盘键切换的叠加层。但是，一旦我使用淡出隐藏菜单，文档将不会收到我的 keydown 事件，直到我单击窗口。如何使文档获得焦点，以便在淡出完成后直接收听？

```
<div id="overlay" class="overlay">
    <input type="text" value="test"/>    
</div>

$('#overlay').on('keydown', function() {
    $('#overlay').fadeOut(1000);
    return false;
});

$(document).on('keydown', function() {
   $('#overlay').fadeIn(1000);
    return false;
});

.overlay {
    position: fixed;
    background: black;
    color: white;
    width: 50%;
    height: 100px;
} 
```

[另见 jsFiddle](http://jsfiddle.net/darthnimos/vFthq/13/)

将光标置于输入栏，按一键。它应该在一秒钟内淡出。在该文档没有收到任何按键之后，直到我用鼠标单击它。如何使文档获得焦点，以便我可以只用一个键盘键切换模式？

编辑：在不同的浏览器中测试了小提琴。这个问题似乎是特定于 chrome 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:58:52.027

淡出叠加层后从文本字段中移除焦点

[**工作小提琴**](http://jsfiddle.net/mohammadAdil/vFthq/17)

```
$(document).ready(function () {
    $('#overlay').on('keyup', function () {
        $('#overlay').fadeOut(1000);
        $("input[type='text']").blur();
        return false;
    });

    $('body').on('keyup', function () {
        $('#overlay').fadeIn(1000);
        return false;
    });
}); 
```

# java - Java 中的 ISO 8601 时间间隔解析

> ID：15977637
> 
> 赞同：32
> 
> 时间：2013-04-12T17:42:32.303
> 
> 标签：java, parsing, time, jodatime, intervals

[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Time_intervals)定义了表示时间间隔的语法。

有四种表示时间间隔的方法：

*   开始和结束，如“2007-03-01T13:00:00Z/2008-05-11T15:30:00Z”
*   开始和持续时间，例如“2007-03-01T13:00:00Z/P1Y2M10DT2H30M”
*   持续时间和结束时间，例如“P1Y2M10DT2H30M/2008-05-11T15:30:00Z”
*   仅持续时间，例如“P1Y2M10DT2H30M”，带有附加上下文信息

如果结束值中缺少任何元素，则假定它们与包括时区在内的开始值相同。该标准的这一特性允许简明地表示时间间隔。例如，包括开始和结束时间在内的两小时会议的日期可以简单地显示为“2007-12-14T13:30/15:30”，其中“/15:30”表示“/2007-12- 14T15:30”（与开始日期相同），或每月计费周期的开始日期和结束日期为“2008-02-15/03-14”，其中“/03-14”表示“/2008-03” -14"（与开始的同一年）。

此外，通过在区间表达式的开头添加“R[n]/”来形成重复区间，其中 R 用作字母本身，[n] 替换为重复次数。省略 [n] 的值意味着无限次数的重复。因此，要从“2008-03-01T13:00:00Z”开始重复“P1Y2M10DT2H30M”的间隔五次，请使用“R5/2008-03-01T13:00:00Z/P1Y2M10DT2H30M”。

我正在寻找一个好的 Java 解析器（如果可能与 Joda-Time 库兼容）来解析这个语法。任何指向一个好的库的指针？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-11-24T04:30:07.557

# java.time

Java 8 及更高版本中内置的[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)[`Duration.parse`](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-)框架具有解析[ISO 8601 格式的持续时间](https://en.wikipedia.org/wiki/ISO_8601#Durations)的方法：

```
java.time.Duration d = java.time.Duration.parse("PT1H2M34S");
System.out.println("Duration in seconds: " + d.get(java.time.temporal.ChronoUnit.SECONDS)); 
```

印刷`Duration in seconds: 3754`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-28T17:05:28.033

对于项目中可能被限制使用 3rd 方库（许可原因或其他原因）的任何人，Java 本身至少提供了此功能的一部分，从 Java 1.6（或更早版本？）开始，使用[javax.xml.datatype。 DatatypeFactory.newDuration(String)](http://docs.oracle.com/javase/6/docs/api/javax/xml/datatype/DatatypeFactory.html#newDuration%28java.lang.String%29)方法和[Duration](http://docs.oracle.com/javase/6/docs/api/javax/xml/datatype/Duration.html)类。DatatypeFactory.newDuration(String) 方法将解析“PnYnMnDTnHnMnS”格式的字符串。这些类旨在用于 XML 操作，但由于 XML 使用 ISO 8601 时间表示法，它们还用作方便的持续时间解析实用程序。

例子：

```
import javax.xml.datatype.*;

Duration dur = DatatypeFactory.newInstance().newDuration("PT5H12M36S");
int hours = dur.getHours(); // Should return 5 
```

除了您列出的第 4 个持续时间格式外，我个人没有使用任何持续时间格式，因此我无法保证它是否成功解析它们。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-12T22:26:00.030

我认为您已经尝试过 Joda-Time？从您的问题中输入示例字符串`Interval.parse(Object)`表明它可以处理“开始和结束”、“开始和持续时间”以及“持续时间和结束”，但不能处理隐含字段或重复。

```
2007-03-01T13:00:00Z/2008-05-11T15:30:00Z => from 2007-03-01T13:00:00.000Z to 2008-05-11T15:30:00.000Z
2007-03-01T13:00:00Z/P1Y2M10DT2H30M       => from 2007-03-01T13:00:00.000Z to 2008-05-11T15:30:00.000Z
P1Y2M10DT2H30M/2008-05-11T15:30:00Z       => from 2007-03-01T13:00:00.000Z to 2008-05-11T15:30:00.000Z
2007-12-14T13:30/15:30                    => java.lang.IllegalArgumentException: Invalid format: "15:30" is malformed at ":30"
R5/2008-03-01T13:00:00Z/P1Y2M10DT2H30M    => java.lang.IllegalArgumentException: Invalid format: "R5" 
```

我知道的唯一其他全面的日期/时间库是[JSR-310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)，它似乎不能处理这样的间隔。

在这一点上，在 Joda-Time 之上构建自己的改进可能是您的最佳选择，抱歉。除了 Joda-Time 已经支持的那些之外，您是否需要处理任何特定的 ISO 间隔格式？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-06-19T05:21:26.063

唯一能够为**您想要的区间解析的所有功能建模的**库实际上是我的库[Time4J](https://github.com/MenoData/Time4J)（范围模块）。例子：

```
// case 1 (start/end)
System.out.println(MomentInterval.parseISO("2012-01-01T14:15Z/2014-06-20T16:00Z"));
// output: [2012-01-01T14:15:00Z/2014-06-20T16:00:00Z)

// case 1 (with some elements missing at end component and different offset)
System.out.println(MomentInterval.parseISO("2012-01-01T14:15Z/08-11T16:00+00:01"));
// output: [2012-01-01T14:15:00Z/2012-08-11T15:59:00Z)

// case 1 (with missing date and offset at end component)
System.out.println(MomentInterval.parseISO("2012-01-01T14:15Z/16:00"));
// output: [2012-01-01T14:15:00Z/2012-01-01T16:00:00Z)

// case 2 (start/duration)
System.out.println(MomentInterval.parseISO("2012-01-01T14:15Z/P2DT1H45M"));
// output: [2012-01-01T14:15:00Z/2012-01-03T16:00:00Z)

// case 3 (duration/end)
System.out.println(MomentInterval.parseISO("P2DT1H45M/2012-01-01T14:15Z"));
// output: [2011-12-30T12:30:00Z/2012-01-01T14:15:00Z)

// case 4 (duration only, in standard ISO-format)
Duration<IsoUnit> isoDuration = Duration.parsePeriod("P2DT1H45M");

// case 4 (duration only, in alternative representation)
Duration<IsoUnit> isoDuration = Duration.parsePeriod("P0000-01-01T15:00");
System.out.println(isoDuration); // output: P1M1DT15H 
```

一些备注：

*   其他区间类也存在类似的解析能力，例如在`DateInterval`net.time4j.range包[中](http://time4j.net/javadoc-en/net/time4j/range/package-summary.html)。`TimestampInterval`

*   仅用于处理持续时间（也可以跨越日历和时钟单位），另请参见[javadoc](http://time4j.net/javadoc-en/net/time4j/Duration.html#parsePeriod-java.lang.String-)。还有格式化功能，请参阅嵌套类`Duration.Formatter`或本地化版本`net.time4j.PrettyTime`（实际上是 86 种语言）。

*   与 Java-8 ( `java.time`-package) 提供互操作性，但不与 Joda-Time 提供互操作性。例如： a 的开始或结束部分`MomentInterval`可以很容易地通过`getStartAsInstant()`or查询`getEndAsInstant()`。

[类IsoRecurrence](http://time4j.net/javadoc-en/net/time4j/range/IsoRecurrence.html)支持重复间隔。例子：

```
IsoRecurrence<MomentInterval> ir =
    IsoRecurrence.parseMomentIntervals("R5/2008-03-01T13:00:00Z/P1Y2M10DT2H30M");
ir.intervalStream().forEach(System.out::println); 
```

输出：

```
[2008-03-01T13:00:00Z/2009-05-11T15:30:00Z)
[2009-05-11T15:30:00Z/2010-07-21T18:00:00Z)
[2010-07-21T18:00:00Z/2011-10-01T20:30:00Z)
[2011-10-01T20:30:00Z/2012-12-11T23:00:00Z)
[2012-12-11T23:00:00Z/2014-02-22T01:30:00Z) 
```

# java - 将十六进制数字字符串转换为 cmyk 参考？

> ID：15977640
> 
> 赞同：0
> 
> 时间：2013-04-12T17:42:45.310
> 
> 标签：java, hex, processing, wav, cmyk

我有一个巨大的十六进制数字文件，来自我在十六进制编辑器中打开的 wav 文件。是否有代码（我正在使用处理）将这些数字的字符串转换为 cmyk 引用？

我的导师提到可能会编写一个代码，从十六进制编辑器中获取每 4 个左右的数字并将它们转换为 cmyk 参考。（我可以手动执行此操作，但需要数年时间）我对处理有些缺乏经验，因此不胜感激！

编辑：我目前正在从编辑器中取出 8 个数字块并将其放入代码中以将其变成颜色。然后处理产生一个彩色方块。我希望找到一个代码来自动处理一次处理超过 8 个，因为我正在为编辑器中打开的整个 wav 文件执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:35:11.277

在普通处理中，您可以使用`unhex()`将字符串转换为 int，之后您可以使用`str()`将 int 转换为 String 字符。Java 可以更有效地做到这一点，但回退到纯 Java 意味着您将无法在非 JVM 环境中运行您的代码（例如在 Web 上）

# java - 拦截 JDBC 连接

> ID：15977648
> 
> 赞同：6
> 
> 时间：2013-04-12T17:43:14.287
> 
> 标签：java, jdbc

我有一个具有 java.sql.Connection 的超类。有很多子类使用连接来执行选择。

我需要拦截通过连接执行的所有语句，并记录执行的 SQL。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T17:44:47.673

使用[log4jdbc](https://code.google.com/p/log4jdbc/)。它是一个代理 JDBC 驱动程序，它记录您的所有 SQL 并将 SQL 和参数传递给底层驱动程序。这样，您的代码甚至不必知道日志记录，它们都包含在第三方库中。

配置主要包括更改 JDBC 连接字符串以使用代理而不是真正的驱动程序，并告诉 log4jdbc 真正的 JDBC 驱动程序是什么。然后你在你的 log4j 配置中选择日志类别来告诉你想要记录什么样的东西。您可以获取 SQL、计时信息、连接打开和关闭事件以及结果集内容。

如果您想深入了解它的工作原理，请参阅 Jack Shirazi 的书*Java Performance Tuning*。在 JDBC 章节中有一个构建代理驱动程序的扩展示例。

# c++ - 如何推断可变参数后的模板参数？

> ID：15977656
> 
> 赞同：3
> 
> 时间：2013-04-12T17:43:44.577
> 
> 标签：c++, c++11, templates, variadic-templates

我有以下模板功能：

```
template <typename...Args, typename Func>
void call(const char *name, Args...args, Func f)
{
        f(3);
} 
```

当我尝试使用它时，比如

```
 call("test", 1, 2, 3, [=](int i) { std::cout<< i; }); 
```

编译器抱怨它无法推断模板参数`Func`。如何解决这个问题，知道`args`可以是除函数指针之外的任何类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:54:54.483

从 14.1p11 开始：

> 函数模板的模板形参包后面不应跟随另一个模板形参，除非该模板形参可以从函数模板的形参类型列表中推导出来或具有默认实参（14.8.2）。

如果要将可调用对象保留为最后一个参数，可以使用[`forward_as_tuple`](http://en.cppreference.com/w/cpp/utility/tuple/forward_as_tuple)：

```
template <typename...Args, typename Func>
void call(const char *name, std::tuple<Args...> args, Func f)
{
        f(3);
}

call("test", std::forward_as_tuple(1, 2, 3), [=](int i) { std::cout<< i; }); 
```

`tuple`实际上，我们还可以通过合成包含可调用对象来做得更好：

```
#include <tuple>

template<typename... Args_F>
void call_impl(const char *name, std::tuple<Args_F... &&> args_f) {
   auto &&f = std::get<sizeof...(Args_F) - 1>(args_f);
   f(3);
}

template<typename...ArgsF>
void call(const char *name, ArgsF &&...args_f) {
   call_impl(name, std::tuple<ArgsF &&...>(std::forward<ArgsF>(args_f)...));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T17:50:07.663

写入`get_last`，提取参数包的最后一个元素。

调用它`f`。打电话`f`。

举个例子，

```
template<typename T0>
auto get_last( T0&& t0 )->decltype(std::forward<T0>(t0))
{
  return std::forward<T0>(t0);
}
template<typename T0, typename... Ts>
auto get_last( T0&& t0, Ts&&... ts )->decltype(get_last(std::forward<Ts>(ts)...))
{
  return get_last(std::forward<Ts>(ts)...);
} 
```

如果您不关心重载解决方案，只需`get_last`像函子一样调用和对待它可能就足够了：

```
template <typename...Args>
void call(const char *name, Args...&& args)
{
    auto&& f = get_last(std::forward<Args>(args)...);
    f(3);
} 
```

下一步是做一些 SFINAE`enable_if`魔术，以便在`call`最后没有传递有效函子的情况下使失败匹配：但是，这可能是矫枉过正。

为了检测是否`f(3)`会起作用，一个简单的特征类：

```
// trivial traits class:
template<typename T>
struct is_type:std::true_type {};

template<typename Functor, typename=void>
struct can_be_called_with_3:std::false_type {}

template<typename Functor>
struct can_be_called_with_3<Functor,
  typename std::enable_if<
    std::is_type< decltype(
      std::declval<Functor>(3)
    ) >::value
  >::type
>:std::true_type {} 
```

这很愚蠢。如果您对传入类型的要求更复杂（例如，您希望使用参数调用它），则必须使用更高级的特征类。

然后你增加`call`：

```
template <typename...Args>
auto call(const char *name, Args...&& args)
  -> typename std::enable_if<
       can_be_called_with_3< decltype( get_last(std::forward<Args>(args)... ) ) >::value
     >::type
{ /* body unchanged */ } 
```

这很钝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:03:24.260

如果您想将一组参数作为模板，您不能以您已经做过的方式编写它：

```
template <typename...Args, typename Func>
void call(const char *name, Args...args, Func f)
{
        f(3);
} 
```

但是你可以把它们打包成一个`std::tuple`：

```
template <typename...Args, typename Func>
void call(const char *name, std::tuple<Args...> args, Func f)
{
        f(3);
}

call("test", std::forward_as_tuple(1, 2, 3), [=](int i) { std::cout<< i; }); 
```

# php - Nginx 反向代理背后的 Apache/PHP 比预期的要慢

> ID：15977660
> 
> 赞同：0
> 
> 时间：2013-04-12T17:43:51.943
> 
> 标签：php, apache, proxy, nginx, reverse-proxy

我不确定我错过了什么，或者忽略了什么。或者，也许我只是没有正确地思考某些事情。

我正在 Nginx 反向代理后面测试 Apache/PHP（Nginx 正在执行 GZIP、KeepAlive 和 SSL）。

使用来自同一本地网络中的另一台服务器的 Apache Bench 进行测试可以在 0.349 秒内执行 500 个连接（100 个并发）。但是，当我使用浏览器连接时，页面加载的时间线显示等待服务器响应的时间为 2 秒。

我唯一能想到的是网络代理正在发挥作用（服务器在代理之外，所以来自我的浏览器的请求通过代理）。我收到了用于编码的“Vary-Accept”标头响应，这让我认为这可能是问题所在。但是，当我在计算机上使用 WBOX 时，它会返回 2-30 毫秒的响应时间。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:45:51.977

所以，我解决了这个问题，希望这对其他人有帮助。我在 Nginx 上正确禁用了缓存，并且通过了无缓存标头，但是我在 Nginx 上启用了 SendFile，这似乎导致它仍然缓存文件，无论我的设置如何。我禁用了这个功能，并清除了浏览器上的缓存，从那以后它一直在发出快速请求。

我不确定 SendFile 是否以与缓存相同的方式写入磁盘，这是导致问题的原因，但禁用肯定解决了很多问题。

# php - 缓存超过 1mb 的 memcache 替代品

> ID：15977676
> 
> 赞同：3
> 
> 时间：2013-04-12T17:44:35.050
> 
> 标签：php, caching

我在 php 中有一个超过 1 mb 的对象。我正在使用 memcache，它允许我存储 1mb 或数据。有谁知道超过 1mb 的数据的任何其他替代方案。我已经读过改变内存缓存来存储更多不是最好的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T20:17:33.730

您可以使用[MultipartCache](https://github.com/olekukonko/MultipartCache)扩展`memcache`以支持高于`1MB limit`. 请注意，在 in`memcached 1.4.2`及更高版本中，您可以使用 -I 命令行选项配置支持的最大对象大小。

```
 memcached -I 5m     //default: 1mb, min: 1k, max: 128m 
```

[MultipartCache](https://github.com/olekukonko/MultipartCache)只是根据限制集将数据拆分为不同的部分 `max 1MB`

**例子：**

```
$largeSet = range(0, 100000);
$key = "largeSet";

$cache = new MultipartCache();
$cache->setLimit(1024);
$cache->set($key, $largeSet); 
```

系统将拆分数据库`size/limit`，`575`上面的样本位于不同的位置。

获取这些信息非常容易

```
$dataFromCache = $cache->get($key); 
```

我们如何确定数据正常？这就是它的`hash`用途，但让我们做一个随机测试

```
for($i = 0; $i < 20; $i ++) {
    $rand = mt_rand(0, 100000);
    printf("%s - %s\n", $dataFromCache[$rand], assert($dataFromCache[$rand] == $rand) ? "true" : "false");
} 
```

输出

```
39603 - true
16034 - true
23116 - true
94038 - true
64481 - true
84987 - true
53912 - true
32153 - true
43965 - true
71144 - true
97309 - true
53227 - true
28525 - true
9936 - true
16921 - true
27323 - true
35129 - true
46235 - true
5641 - true
43425 - true 
```

现在让我们看看更敏感的信息......就像一张图片......

```
$key = "largeImage";
$cache = new MultipartCache();
$cache->addserver("127.0.0.1");
$cache->set($key, file_get_contents("large_image.jpg"));

header("Content-Type: image/jpeg");
echo $cache->get($key); 
```

# javascript - 使用 javascript 从 html 文本中获取纯测试

> ID：15977677
> 
> 赞同：0
> 
> 时间：2013-04-12T17:44:45.823
> 
> 标签：javascript, html

我正在使用struts，我从数据库中获取html文本，并将其存储在一个字符串中并将其传递给jsp。现在在 jsp 中，我必须从该 html 字符串中提取纯文本，并且必须使用 javascript 在 TextArea 中显示。

请提出一些解决方案，我不允许使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:50:40.313

您可以尝试类似迷你解析器的东西。喜欢这个功能：

```
 function HTMLtoBB(html) {
    search = new Array( /\<b\>(.*?)\<\/b\>/g,
                        /\<i\>(.*?)\<\/i\>/g,
                        /\<u\>(.*?)\<\/u\>/g,
                        /\<font size=\'(.*?)\'\>(.*?)\<\/font\>/g,
                        /\<font color=\'(.*?)\'\>(.*?)\<\/font\>/g,
                        /\<img src=\'(.*?)\'\>/g,
                        /\<a href=\'(.*?)\'\>(.*?)\<\/a\>/g,
                        /\<blockqoute\>(.*?)\<\/blockquote\>/g,
                        /\<center\>(.*?)\<\/center\>/g
                      );

    replace = new Array("[b]$1[/b]",
                        "[i]$1[/i]",
                        "[u]$1[/u]",
                        "[size=$1]$2[/size]",
                        "[color=$1]$2[/color]",
                        "[img=$1]",
                        "[url=$1]$2[/url]",
                        "[quote]$1[/quote]",
                        "[center]$1[/center]"
                       );

    for (i = 0; i < search.length; i++) {
        html = html.replace(search[i], replace[i]);
    }

    return html;
} 
```

这会将 HTML 标记转换为 BB 代码。或者您将 BB 代码替换为其他代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:52:17.240

您可以将加载的 HTML 附加到 dom，然后用于`element.innerText`剥离所有 HTML，只留下纯文本（如果这是您想要做的 - 我认为您的问题并不完全清楚）

# algorithm - 计算视差层世界坐标？

> ID：15977681
> 
> 赞同：1
> 
> 时间：2013-04-12T17:44:59.793
> 
> 标签：algorithm, math, language-agnostic, matrix, 2d

我正在尝试将 2d 游戏中的精灵定位在视差层上的某个世界位置。

因此，如果我的视差层的滚动因子为 0.5，则当相机移动 2 个像素时，该层会移动 1 个像素。我正在尝试沿着世界最大范围的底部对齐树木。

那么如何计算要放置在视差层上的精灵的位置，以便它显示在世界上我想要的位置？如果有区别的话，我的相机的原点在左上角。

我尝试了很多公式，但没有运气，谷歌也没有帮助。

请问有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:53:23.767

知道了！最后！

对于任何未来的搜索者：

```
 screen position x = (world position x * scroll factor) +
     (camera width * (1 - scroll factor))

 screen position y = (world position y * scroll factor) +
     (camera height * (1 - scroll factor)) 
```

祝你好运！

# excel - 根据一列值过滤excel VBA中的表

> ID：15977684
> 
> 赞同：9
> 
> 时间：2013-04-12T17:45:05.623
> 
> 标签：excel, excel-2010, vba

我有一张表，我想按其中一列中的值过滤行。用于过滤的值存储在一个单独的列中，而不是在表中。这是我到目前为止所拥有的：

```
Dim table1 As ListObject
Dim range1 As Range
Set range1 = ActiveSheet.range("AM23:AM184")
'get table object
table1.range.AutoFilter Field:=3, Criteria1:=??? 
```

我不知道该为标准1 放什么。我知道它需要是一个数组，我可以将它设置为类似 Array("12","2","13") 但我需要它等于 range1 给出的范围内指定的值。任何帮助将不胜感激。

编辑：通过执行 range1.Value 然后将 Variant 转换为字符串数组，我已经能够将我的范围值放入一个数组中。这没有按我的意愿工作，因为它只是将我的过滤器设置为数组中的最后一个值。例如，如果我的数组包含 ID（“12”、“44”、“13”、“22”）并且我将 Criteria1 设置为该数组并运行它，则过滤器只选择了 22 个，而所有其他数字都被取消选择，包括12、44 和 13。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T20:12:31.770

我想到了！我曾尝试重新编码，但第一次尝试时，由于与一行代码相关的行太多，它给了我一个不完整的程序。所以我重录了录音给我整个代码，结果发现我遗漏了一些东西。这是整个代码：

```
Dim range1 As range
Set range1 = ActiveSheet.range("AM23:AM184")
Dim var1 As Variant
Dim sArray() As String
Dim i As Long
var1 = range1.Value

ReDim sArray(1 To UBound(var1))

For i = 1 To (UBound(var1))
    sArray(i) = var1(i, 1)
Next

ActiveSheet.ListObjects("Table1").range.AutoFilter Field:=3, Criteria1:=sArray, Operator:=xlFilterValues 
```

“Operator:=xlFilterValues”是我第一次录制宏时错过的关键部分，因为录制过早停止

# firefox - 嵌入 Mp3 取消选择浏览器窗口？

> ID：15977685
> 
> 赞同：0
> 
> 时间：2013-04-12T17:45:12.843
> 
> 标签：firefox, mp3, embed

我正在一个网站上工作，并且在这样的页面中嵌入了一个 mp3：

```
<embed src="/resources/mymusic.mp3" height="20" width="300" autostart="false" loop="true"> 
```

但是，当该页面在 Firefox 中加载时，浏览器窗口会被取消选择，因此会禁用用户与各种元素的交互，直到他们再次在窗口内单击。firefox 仍然是焦点应用程序，但浏览器窗口本身被取消选择。这在 Safari 中不会发生。

使用：

```
 <object height="20" width="300" data="/resources/mymusic.mp3"></object> 
```

给出了相同的结果。

也试过

```
<audio controls>
   <source src="/resources/mymusic.mp3" type="audio/mpeg">
   Your browser does not support this audio format.
</audio> 
```

元素，但它根本不会在 Firefox 中加载。

关于如何保持窗口活动的任何建议？

# mysql - MySQL ON UPDATE CASCADE 不 CASCADEing

> ID：15977694
> 
> 赞同：13
> 
> 时间：2013-04-12T17:45:25.037
> 
> 标签：mysql, foreign-keys, cascade

假设我有两个下表：

```
CREATE TABLE post (
  id bigint(20)     NOT NULL    AUTO_INCREMENT,
  text text ,

  PRIMARY KEY (id)
) ENGINE=InnoDB AUTO_INCREMENT=1;

CREATE TABLE post_path (
  ancestorid bigint(20)     NOT NULL    DEFAULT '0',
  descendantid bigint(20)   NOT NULL    DEFAULT '0',
  length int(11)            NOT NULL    DEFAULT '0',

  PRIMARY KEY (ancestorid,descendantid),
  KEY descendantid (descendantid),

  CONSTRAINT f_post_path_ibfk_1 
    FOREIGN KEY (ancestorid) REFERENCES post (id) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE,
  CONSTRAINT f_post_path_ibfk_2 
    FOREIGN KEY (descendantid) REFERENCES post (id) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

并插入这些行：

```
INSERT INTO 
    post (text)
    VALUES ('a'); #// inserted row by id=1
INSERT INTO 
    post_path (ancestorid ,descendantid ,length) 
    VALUES (1, 1, 0); 
```

当我想更新帖子行ID时：

```
 UPDATE post SET id = '10' WHERE post.id =1 
```

MySQL 说：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (test.post_path, CONSTRAINT f_post_path_ibfk_2 FOREIGN KEY (descendantid) REFERENCES post (id) ON DELETE CASCADE ON UPDATE CASCADE) 
```

为什么？怎么了？

**编辑：**

当我插入这些行时：

```
INSERT INTO 
    post (text)
    VALUES ('b'); #// inserted row by id=2

INSERT INTO 
    post_path (ancestorid, descendantid, length)
    VALUES (1, 2, 0); 
```

并更新：

```
UPDATE post SET id = '20' WHERE post.id =2 
```

Mysql 成功更新了子行和父行。那么为什么我不能更新第一篇文章（id=1）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T20:21:54.140

好的，我通过我也可以访问的测试数据库运行您的架构和查询，并注意到以下内容；在将两行都插入到两个表之后，并且在任何更新之前，数据如下所示：

```
mysql> select * from post;
+----+------+
| id | text |
+----+------+
|  1 | a    |
|  2 | b    |
+----+------+
2 rows in set (0.00 sec)

mysql> select * from post_path;
+------------+--------------+--------+
| ancestorid | descendantid | length |
+------------+--------------+--------+
|          1 |            1 |      0 |
|          1 |            2 |      0 |
+------------+--------------+--------+
2 rows in set (0.00 sec) 
```

在我发出更新语句后，将 post.id 更新为 20：

```
mysql> UPDATE `post` SET `id` = '20' WHERE `post`.`id` =2;
Query OK, 1 row affected (0.08 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from post_path;
+------------+--------------+--------+
| ancestorid | descendantid | length |
+------------+--------------+--------+
|          1 |            1 |      0 |
|          1 |           20 |      0 |
+------------+--------------+--------+
2 rows in set (0.00 sec) 
```

请注意，祖先 ID 仍然是 1，这似乎是[MySQL](http://dev.mysql.com/doc/refman/5.5/en/update.html)的问题：

> 如果您使用涉及具有外键约束的 InnoDB 表的多表 UPDATE 语句，则 MySQL 优化器可能会以不同于其父/子关系的顺序处理表。在这种情况下，语句失败并回滚。相反，更新单个表并依赖 InnoDB 提供的 ON UPDATE 功能来相应地修改其他表。请参阅第 14.3.5.4 节，“InnoDB 和外键约束”。

您的第一个查询失败的原因是因为祖先 ID 没有更新到 10，但后代是，并且因为您试图将 post.id 设置为 10，并且 post_path 表中的祖先 ID 仍然引用值 1，这不会不再存在。

您应该考虑更改架构以避免这种情况，并避免更新 auto_increment 列以避免冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T02:15:48.933

我相信您的问题的解决方案是删除**descendantid**作为约束并使用触发器在字段上执行更新。

```
delimiter $$
CREATE TRIGGER post_trigger
AFTER UPDATE ON post
FOR EACH ROW
BEGIN
UPDATE post_path SET post_path.descendantid = NEW.id WHERE post_path.descendantid = OLD.id
END$$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T12:36:00.330

第一次更新失败而第二次更新失败的原因是因为在第二个实例中，您的祖先和后代引用了 post 表中的不同行，

```
ancestorid   = 1
descendantid = 2 
```

第一次更新在尝试更新 post_path.ancestorid 时失败，因为这样做时 post.id 和 post_path.descendantid 之间的约束将失败，因为这些值将不再匹配 (1 !== 10)。

假设任何给定的帖子不能既是祖先又是后代，那么这里的问题仅在于执行第一个插入：

```
INSERT INTO `post_path` (`ancestorid` ,`descendantid` ,`length`) VALUES (1, 1, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T17:01:24.997

第二个起作用的主要原因是您为`ancestorid`和保留了不同的值`descendantid`。当您根据特定属性的更改进行两个不同的约束时。只有第一个约束有效，第二个无效。在您的第一次更新尝试中就是这种情况。

# .htaccess - 如果语言是捷克语，则 RewriteCond 重定向到子文件夹

> ID：15977705
> 
> 赞同：0
> 
> 时间：2013-04-12T17:45:53.540
> 
> 标签：.htaccess, mod-rewrite

如果用户的浏览器语言是捷克语，我们的网站目前会将用户从我们的根域重定向到我们的捷克子目录，如下所示：

```
RewriteCond %{HTTP_HOST} ([^.]+).mydomain.com [NC]
RewriteCond %{HTTP:Accept-Language} (cs) [NC]
RewriteRule ^$ /cs/ [L,R=301] 
```

但是，由于我不会浪费您的时间，我们的登录页面从： **mydomain.com/cs/login**到**mydomain.com/dashboard** - 我们想要一个条件，如果他们的用户重定向到**mydomain.com/cs/dashboard**浏览器语言是捷克语（代码：cs）。您可以修改上述条件吗？我不确定 / 在这些 RewriteConds 中的去向！非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:27:18.407

在公共根目录的 .htaccess 文件中试试这个：

```
RewriteCond %{HTTP_HOST} \.mydomain\.com$
RewriteCond %{HTTP:Accept-Language} cs [NC]
RewriteRule ^dashboard/?$ /cs/dashboard [R=permanent] 
```

（如果您将这些指令添加到 httpd.conf 文件，则在 RewriteRule 模式的开头添加一个正斜杠，使其变为`^/dashboard/?$`。我假设您使用的是不需要正斜杠的 .htaccess 。 )

如果字符串“cs”出现在访问者浏览器发送的 HTTP Accept-Language 标头的值中的任何位置，`/dashboard`这`/dashboard/`应该重定向（使用 301 状态代码）请求。`/cs/dashboard`

但是，这可能不是进行内容协商的最佳方式。首先，您的永久重定向可能会使网络爬虫误以为 /dashboard URL 已永久更改为 /cs/dashboard 并且他们不会意识到这是有条件的。其次，如果您使用的是由 PHP 等语言处理的登录脚本，那么让该脚本检测语言并在用户完成登录后指示重定向可能更容易。

# iphone - 将连接更改为 3G 或 EDGE 以测试慢速互联网连接

> ID：15977707
> 
> 赞同：0
> 
> 时间：2013-04-12T17:45:58.523
> 
> 标签：iphone, ios, objective-c, xcode

我正在开发一个需要在慢速连接下调试的应用程序。我的问题是我只有一部使用 LTE 的 iPhone 5。我可以在我的设置中为 4G 连接禁用 LTE，但是对于我的测试目的，这个 4G 连接仍然很快。我想知道是否有办法以编程方式强制测试 iPhone 进入 3G 或 EDGE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:02:41.970

除了变慢之外，您还需要测试片状 - 您可以使用苹果的网络链接调节器来模拟它，并通过您的 Mac 的互联网连接（或运行模拟器）运行您的 iPhone。请参阅[安装 Apple 的网络链接调节器工具](https://stackoverflow.com/questions/9659382/installing-apples-network-link-conditioner-tool)。

如果您真的想要一些好的测试，最好的方法是查看您的手机提供商的覆盖图并找到一些糟糕的位置。在驶入和驶出范围时在这些区域进行测试应该清除您拥有的任何损坏的网络代码。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T18:17:30.013

Network Link Conditioner 在最近的 iOS 版本中也存在于设备上，我不确定他们何时添加它。

但它存在于“开发人员”菜单下的“设置”中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:49:19.803

> 我可以在设置中为 4G 连接禁用 LTE，但对于我的测试目的，这个 4G 连接仍然太快

LTE**是**（一种）4G。

如果禁用它，它将回退到 EDGE。或者，您可以切换到 Wi-Fi 连接并减慢速度（如果您的路由器具有此类功能）。

# c# - C# - 在一行旁边写一个字符串或删除一个字符串

> ID：15977709
> 
> 赞同：-2
> 
> 时间：2013-04-12T17:46:12.993
> 
> 标签：c#

我想在一行旁边写一个字符串，随机可以是任何一行，我也想知道如何从中删除一行，这是我的`StreamReader`工作方式：

```
using (StreamReader sb = new StreamReader("admin.txt"))
{
  string[] ffoo = File.ReadAllLines("admin.txt");
  string[] ppoof = ffoo[0].Split(';');

  string line;

  while ((line = sb.ReadLine()) != null)
  {
    if (line.StartsWith("#" + Server.Name.ToLower() + ": "))
    {
      string[] punch = line.Split(';');
      if (!punch.Contains(Channel.Name.ToLower()))
      {
        StringBuilder str = new StringBuilder("admin.txt");
        str.Append(Channel.Name.ToLower() + ";");
        return;
      }
  }
} 
```

以下是列表的制作方式：

```
#main: alien;nobody;somebody;
#devs: headdev;wae; 
```

它读起来很好，只是它不能在主通道旁边写一些东西，我的意思是我只能在它的末尾写一行或一个字符串，这是在 dev 上，我想在 main 上写一些东西，我也有一些有关如何从 main 或 dev 中删除管理员的问题。这个文件也太大了，用完后可能就500行了，请各位大侠给个解决办法，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:57:45.347

调用 StringBuilder.Append 时，它会附加到字符串的末尾。

当调用 StringBuilder(string) 构造函数时，它将附加到作为构造函数参数传递的字符串。

在这种情况下，您将“Admin.txt”作为字符串传递，但您确实想传递 Admin.txt 的内容，因此您需要读取它的内容。

这应该可以解决问题：

```
string[] lines = File.ReadAllLines("admin.txt");
for (int i = 0; i < lines.Length; i++)
{
        if (lines[i].StartsWith(string.Format("#{0}: ", Server.Name.ToLower()))
        {
            if (!lines[i].Split(';').Contains(Channel.Name.ToLower()))
                lines[i] += ";" + Channel.Name.ToLower();
        }
    }
File.WriteAllLines("admin.txt", lines); 
```

如果我误解了你想要做的事情，我很抱歉。

# extjs - 发一个调用 servlet 的帖子没有得到

> ID：15977713
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:46:27.493
> 
> 标签：extjs, sencha-touch

我正在尝试让我的 Store 调用我的 servlet 的 post 方法，但是即使我将 actionMethods 设置为 post，它也会继续调用 get

```
Ext.define("Shows.store.Shows", {
extend: "Ext.data.JsonStore",
requires: "Ext.data.proxy.LocalStorage",
config: {
    model: "Shows.model.Show",
    proxy: {
        type: 'scripttag',
        actionMethods: {
            create : 'POST',
            read   : 'POST', // by default GET
            update : 'POST',
            destroy: 'POST'
        },
        url: 'http://localhost:8080/GetShowsServlet',
        reader: {
         type: 'json',
         successProperty: 'success'
     },
    }
} 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:28:23.313

您不能将 POST 与 JSONP 一起使用 - 请参阅将[数据发布到 JsonP](https://stackoverflow.com/questions/2699277/post-data-to-jsonp)。 `actionMethods`不可配置为`Ext.data.proxy.JsonP`

# java - 在 Apache camel 中使用 beanref 代替 processref 的优势

> ID：15977720
> 
> 赞同：0
> 
> 时间：2013-04-12T17:46:42.153
> 
> 标签：java, spring, apache-camel

在编写骆驼路线时，我正在调用 java 类，我们有两个选择，例如我们可以使用处理器或 Spring bean。使用 beanref 代替 processref 有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:11:40.537

我个人觉得你可以用处理器做的事情也可以用 bean 组件来完成，反之亦然。如果 bean 已经存在，它可以很容易地与 camel 集成，而不是在处理器中再次复制代码或在处理器中调用 bean 来执行相同的任务。我认为这是一个差异化因素。

事实上，这听起来是一个重复的问题。看看[这个。](https://stackoverflow.com/questions/6061813/apache-camel-do-processors-and-beans-serve-the-same-purpose)

# java - 以编程方式从命令行分析 HPROF 内存转储文件

> ID：15977723
> 
> 赞同：12
> 
> 时间：2013-04-12T17:46:48.317
> 
> 标签：java, android, hprof, eclipse-memory-analyzer

我正在调查使用 Eclipse 的内存分析器 (MAT) 分析 HPROF 文件。支配树、报告和 OQL 界面看起来非常有用。但所有这些都必须通过 MAT 软件手动完成。

是否有命令行界面，以便我可以以编程方式解析 HPROF 并自动生成自定义报告。

这对于集成这个测试基础设施来进行自动内存分析很有用。

顺便说一句，堆大小将在 10-60MB 之间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T09:47:15.363

[ParseHeapDump.sh 可以满足](http://wiki.eclipse.org/index.php/MemoryAnalyzer/FAQ)您的需求。至于后续问题，我不确定索引文件的存储格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T23:51:45.490

请参阅[bitbucket.org/joebowbeer/andromat](https://bitbucket.org/joebowbeer/andromat)，它改编自[bitbucket.org/ekabanov/mat ，它是](https://bitbucket.org/ekabanov/mat)[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)的精简命令行版本。

# ajax - 原始类型（字符串）作为参数 - 通过 ajax 发布的 wcf 方法不起作用（在提琴手中工作）

> ID：15977724
> 
> 赞同：0
> 
> 时间：2013-04-12T17:46:48.823
> 
> 标签：ajax, wcf, primitive

好的，对于更了解这类事情的人来说，这应该很容易。我将限制我提供的代码的范围，因为这适用于一种变体（提琴手）。

这个问题很容易解释：我在 WCF 中有一个将字符串作为参数的方法。该方法需要一个带有包裹体样式的请求。如果我在提琴手中创建一个简单的对象并将其发送过来，它就可以工作。像 {"submission":"something"} 这样的东西。如果我通过 JSON 中的 ajax 执行此操作，则它不起作用。我收到一个错误的请求错误，说它是不允许的……这是跨域的，但这不是问题，我在方法中添加了适当的标头来处理这个问题。在这种情况下，永远不会调用该方法（就像签名有问题一样）。

事情是这样的……如果我用一个字符串的一个属性创建一个非常简单的类并传入一个对象，它就可以正常工作。以包裹的主体样式传递对象可以正常工作。尝试使用诸如字符串之类的“原始类型”来执行此操作不会……有任何想法吗？

这不起作用（但确实通过提琴手起作用）....

```
 var datain = new Object();
        datain.submission = "mysubmission";

        var dataToSend2 = JSON.stringify(datain);

                    $.ajax({
                        type: "POST",
                        url: "http://localhost:8000/ServiceModelSamples/Service/rest/Reflect",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        data: dataToSend2,
                        success: function (item) {
                            debugger;
                            alert(item);
                        },
                        error: function (xhr) {
                            debugger;
                            alert(xhr);
                        }
                    }); 
```

有了这份合同......

```
 [OperationContract]
    [WebInvoke(Method = "*", 
        RequestFormat = WebMessageFormat.Json,
        BodyStyle=WebMessageBodyStyle.WrappedRequest)]
    string Reflect(String submission); 
```

这确实有效....

```
 var spec = new Object();
        spec.submission = "mysubmission";

        var dataToSend3 = '{"thespecial":' + JSON.stringify(spec) + '}';

        $.ajax({
            type: "POST",
            url: "http://localhost:8000/ServiceModelSamples/Service/rest/Reflecting",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: dataToSend3,
            success: function (item) {
                debugger;
                alert(item);
            },
            error: function (xhr) {
                debugger;
                alert(xhr);
            }
        }); 
```

有了这份合同...

```
 [OperationContract]
    [WebInvoke(Method = "*",
        RequestFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    string Reflecting(Special thespecial); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:18:16.303

是的，如果不包装在 xml 中，您将无法发送原始数据类型。

您可以在端点行为中启用帮助后检查完整的请求结构

假设您有 webHttpBinding 的端点名称“api”，那么您可以使用以下方法启用帮助

```
 < webHttp helpEnabled = "true " /> 
```

配置完成后可以看到如下帮助

```
 http://localhost:<port>/test.svc/api/help 
```

这将显示实际的请求格式。

喜欢传递字符串可以使用以下格式包装器

```
 <string xmlns="http://schemas.microsoft.com/2003/10/ 
 Serialization/">Hello World</string> 
```

或者您可以使用流输入参数

[点击](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx) 这里实现流式传输

# java - 尝试使用 EGit 将 GIT 项目从 IntelliJ IDEA 移动到 Eclipse？

> ID：15977729
> 
> 赞同：0
> 
> 时间：2013-04-12T17:47:09.137
> 
> 标签：java, eclipse, git, intellij-idea, egit

我的公司让我搬回 Eclipse，我正试图用 EGit 将 GIT 项目从 IntelliJ IDEA 转移到 Eclipse？我遇到的问题是我使用以下命令从命令行访问我的项目：

```
git clone git@git:common.git 
```

这就是我克隆它的方式，然后我只是在 IntelliJ 中毫无问题地工作，在带有 EGit 的 Eclipse 中，我得到以下屏幕，我正在尝试的每个设置都可以工作

![在此处输入图像描述](https://i.stack.imgur.com/8I5x4.png)

有人可以根据命令行告诉我应该使用哪些选项..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:54:34.623

我一直在通过 EGit 克隆时遇到问题。这对我有用：

1.  像往常一样通过命令行克隆。
2.  创建项目或将项目导入 Eclipse 工作区。
3.  在 Navigator 或 Package Explorer 中右键单击项目。
4.  团队 > 共享项目 > Git > 下一步。
5.  由于那里已经有 .git 存储库，请选择“在父级中使用或创建存储库...”。
6.  结束。给它几秒钟，你应该会看到你的项目文件装饰有 Git 存储库信息。

# java - 从微调器设置和获取文本

> ID：15977733
> 
> 赞同：0
> 
> 时间：2013-04-12T17:47:36.030
> 
> 标签：java, android, xml, spinner

我正在尝试将文本设置为微调器，就像您对 a 所做的那样，`TextView`并获得这样的文本。我希望微调器的行为与联系人应用程序中的一样，您可以在其中设置生日日期左右并`onClick`打开`DatePicker`.

我想在微调器中自动设置今天的日期。这是我`setText`现在做的，但不能用微调器做到这一点

我现在只需要 Spinner 行为方面的帮助，其余的应该很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:04:36.867

使用按钮。带有微调器样式。

看看：

```
<Button style="android:Widget.Holo.Spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="whatever you want"/> 
```

（这仅适用于支持 API 级别 >= 4.0 - 冰淇淋三明治的设备）

使用视图绑定`onClick`和创建。`AlertDialog``DatePicker`

如果您使用 ActionBarSherlock 那么下一个是更优选的：

```
<Button style="Widget.Sherlock.Spinner.DropDown.ActionBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="whatever you want"/> 
```

（这将在任何地方都有效 - 经过测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:55:23.973

这是来自文档：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.planets_array, android.R.layout.simple_spinner_item);
// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
spinner.setAdapter(adapter); 
```

* * *

```
 for (int i = 0; i < b; i++) {
                View v = spinner.getChildAt(i);
                if (v == null) {
                    System.out.println("View not found");
                } else {

                     v.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                     showDialog(DATE_DIALOG_ID);
                                        }
                       });

----------
// the callback received when the user "sets" the date in the dialog
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                                  int monthOfYear, int dayOfMonth) {

            }
        };

@Override
protected Dialog onCreateDialog(int id) {

      switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                mDay);
    }
    return null;
} 
```

# node.js - 为什么我不能使用相关 mongo 文档中的 id 在 GridFS 上设置 id

> ID：15977734
> 
> 赞同：2
> 
> 时间：2013-04-12T17:47:36.207
> 
> 标签：node.js, mongodb, express, mongoose, gridfs

我的应用程序正在使用节点 0.10.1、express 3.1.1、mongoose 3.6.4、mongo 2.4.1 和 gridfs-stream 0.4.0。

我已经使用共享连接设置了 mongoose 和 gridfs-stream，如下所示：

```
/************* app.js ***************/
//Added this in edit to show setup of mongoose and gridfs-stream
var mongoose = require("mongoose");
var Grid = require('gridfs-stream');
Grid.mongo = mongoose.mongo;
global.conn = mongoose.createConnection(dbUri);
conn.once('open', function(){
    global.gfs = Grid(conn.db);
}); 
```

我正在尝试使用 gridfs-stream 上传/下载文件。我的上传看起来像：

```
exports.uploadFile = function(req, res){
    var file = req.files.upload;
    var docId = mongoose.Types.ObjectId(req.query.docId);
    var filename = req.query.ileName;
    var contentType = file.type;

    if(!file) return res.send({result: 'NO_FILE_UPLOADED'});

    var writestream = gfs.createWriteStream({
        _id: docId,
        filename: filename,
        mode: 'w',
        root: 'documents'
    });
 // more here but ommitted
 }; 
```

docId 来自 mongo 文档的 ObjectId。

上传似乎工作。我可以使用 mongo 控制台查看上传的文件：

```
db.documents.files.findOne()
{
   "_id" : ObjectId("5167604d1b63f2541400003d"),
   "filename" : "borrower1.fnm",
   "contentType" : "binary/octet-stream",
   "length" : 3473,
   "chunkSize" : 262144,
   "uploadDate" : ISODate("2013-04-12T15:43:06.723Z"),
   "aliases" : null,
   "metadata" : null,
   "md5" : "04c85fe5e9ba0e798fd5eb90f1cb62be"
} 
```

当我尝试下载文件时，使用以下内容：

```
exports.downloadFile = function(req, res){
    var docId = mongoose.Types.ObjectId(req.query.docId);
    var readstream = gfs.createReadStream({_id: docId});
    readstream.pipe(res);
}; 
```

抛出以下错误：

```
Error: 5167604d1b63f2541400003d does not exist 
```

当我尝试使用似乎存储在gridfs db中的_id直接从mongo控制台检索文件时，它返回null。但是，如果我尝试使用文件名检索文件，mongo 控制台会检索该文件。

可以不使用相关mongo文档的_id设置gridfs中上传文件的_id吗？如果是这样，我的代码怎么不正确？如果没有，有没有办法让网格生成 id 并取回分配的 id，以便我可以将其存储在相关的 mongo 文档中？

谢谢你的帮助！

抢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:02:39.190

我要回答我自己的问题，因为我在浏览 mongoose server.js 和 gridfs-stream 的源代码时找到了答案。

您可以将相关文档的 ObjectId 用于存储文件的 ObjectId。

但是，如果您在上传时提供“root”选项，您也需要在下载代码中使用它才能使用它。否则，猫鼬假定该集合是基本集合。

所以这有效：

```
exports.uploadFile = function(req, res){
    var file = req.files.upload;
    var docId = mongoose.Types.ObjectId(req.query.docId);
    var filename = req.query.ileName;
    var contentType = file.type;

    if(!file) return res.send({result: 'NO_FILE_UPLOADED'});

    var writestream = gfs.createWriteStream({
        _id: docId,
        filename: filename,
        mode: 'w',
        root: 'documents'
    });
 // more here but ommitted
 };

exports.downloadFile = function(req, res){
    var id = gfs.tryParseObjectId(req.query.docId);
    //note that options now includes 'root'
    var options = {_id: id, root: 'documents'};
    try{
        gfs.createReadStream(options).pipe(res);
    } catch(err){
        console.log(err);

    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:45:52.577

您是否尝试过将 req.query.docId 转换为 ObjectId？如果您从查询中接收值，它将是字符串，因此如果在上传期间使用了这种类型的 _id，则需要将其转换为 ObjectId。

```
exports.downloadFile = function(req, res){
    console.log(req.query.docId);
    var readstream = gfs.createReadStream({_id: mongoose.Types.ObjectId(req.query.docId)});
    readstream.pipe(res);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:41:41.150

我查看了[gridfs-stream](https://github.com/aheckmann/gridfs-stream#using-with-mongoose)页面，您是否将 mongoose 驱动程序分配给它。

```
var conn = mongoose.createConnection(..);
conn.once('open', function () {
  var gfs = Grid(conn.db, mongoose.mongo); //missing parameter

  // all set!
}) 
```

或者

```
Grid.mongo = mongoose.mongo;  //missing 

var conn = mongoose.createConnection(..);
conn.once('open', function () {
  var gfs = Grid(conn.db);

  // all set!
}); 
```

# python - 如何在 Python 中从 Web 服务器发送带有 ZIP 附件的电子邮件

> ID：15977735
> 
> 赞同：0
> 
> 时间：2013-04-12T17:47:37.550
> 
> 标签：python, email, zip, cgi, attachment

我有一个关于在 Python 中发送带有 ZIP 附件的电子邮件的问题。这是我的做法：

```
def send_mail(send_from, send_to, subject, text, files=[], server="localhost"):
assert type(send_to)==list
assert type(files)==list

msg = MIMEMultipart()
msg['From'] = send_from
msg['To'] = COMMASPACE.join(send_to)
msg['Date'] = formatdate(localtime=True)
msg['Subject'] = subject

msg.attach( MIMEText(text) )

for f in files:
    remotezip = urllib2.urlopen(f)
    #zipinmemory = io.BytesIO(remotezip.read())
    #zip = zipfile.ZipFile(zipinmemory)
    part = MIMEBase('application', 'octet-stream')

    part.set_payload( remotezip.read())
    Encoders.encode_base64(part)
    part.add_header('Content-Disposition', 'attachment; filename="%s"' % os.path.basename(f))
    msg.attach(part)

smtp = smtplib.SMTP('smtp.gmail.com:587')
smtp.starttls()
smtp.login('username','password')
smtp.sendmail(send_from, send_to, msg.as_string())
smtp.close() 
```

由于我将 ZIP 文件托管在我的 Web 服务器上，因此我正在使用 URLOpen 阅读它。

此代码成功发送带有附件的电子邮件。但 ZIP 文件始终为 0KB。确信在读取文件时存在一些问题。

请告诉我。谢谢你的帮助！

# xaml - Metro App 更改 ListView 所选项目内容前景

> ID：15977737
> 
> 赞同：1
> 
> 时间：2013-04-12T17:47:44.923
> 
> 标签：xaml, listview, microsoft-metro, winrt-xaml

我有 a`ListView`并`DataTemplate`用 2修改了它`TextBlocks`。

第一个`TextBlock`包含**Heading**，第二个包含**Sub-Heading**。

我`TextBlocks`用不同的颜色设计了2。

`ListViewItem`这是**普通**视图中的示例。

![普通的](https://i.stack.imgur.com/VT5Vl.png)

**以下是“已选”**视图的示例`ListViewItem`。

 **![已选中](https://i.stack.imgur.com/aMDaC.png)

所以我的问题是如何更改**选定**视图中的`Foreground`颜色？希望在 xaml 中做到这一点。我尝试设置不同的画笔，它们适用于未明确设置样式的项目。`TextBlocks`

 **不知道如何处理这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:48:14.560

您可以使用视觉状态。

```
<ListView>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock x:Name="txtOne" Grid.Row="0" Foreground="Green"/>
                <TextBlock x:Name="txtTwo" Grid.Row="1" Foreground="Gray"/>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="SelectionStates">
                        <VisualState x:Name="Unselected"/>
                        <VisualState x:Name="Selected">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="txtOne" Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Red"/>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="txtTwo" Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Yellow"/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:10:04.567

你不需要玩视觉状态。

在您的 ResourceDictionary 中，为这些画笔设置一个值“ListBoxItemSelectedBackgroundThemeBrush”、“ListBoxItemSelectedPointerOverBackgroundThemeBrush”、“ListBoxFocusBackgroundThemeBrush”。它将覆盖您的应用程序的默认画笔。

例子：

```
 <!-- Overrides default ListBox brushes -->
<SolidColorBrush x:Key="ListBoxItemSelectedBackgroundThemeBrush" Color="{StaticResource GreenColor}" />
<SolidColorBrush x:Key="ListBoxItemSelectedPointerOverBackgroundThemeBrush" Color="{StaticResource LightGreenColor}" />
<SolidColorBrush x:Key="ListBoxFocusBackgroundThemeBrush" Color="Transparent" /> 
```

这是在 WinRt 中开发时的一个有用链接，它引用了画笔名称，用于 winRt 的默认控件。

[WinRt 默认画笔名称和值](http://metro.excastle.com/xaml-system-brushes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T13:14:17.637

感谢一些开箱即用的研究和思考，找到了一个合适的解决方案：

[Metro App ListView SelectedItem Selected VisualState](https://stackoverflow.com/questions/17010582/metro-app-listview-selecteditem-selected-visualstate)

我可以看到这对于其他几个场景也很方便。****

# sql - Postgres 忽略了时间戳索引，为什么？

> ID：15977741
> 
> 赞同：2
> 
> 时间：2013-04-12T17:48:05.123
> 
> 标签：sql, postgresql, postgresql-9.1

我有以下表格：

```
users (id, network_id)
networks (id)
private_messages (id, sender_id, receiver_id, created_at) 
```

我在 users.network_id 和私人消息中的所有 3 列上有索引，但是查询正在跳过索引并且需要很长时间才能运行。任何想法导致索引被跳过的查询有什么问题？

```
EXPLAIN ANALYZE SELECT COUNT(*) 
FROM "networks" 
WHERE (
          networks.created_at BETWEEN ((timestamp '2013-01-01')) AND (( (timestamp '2013-01-31') + interval '-1 second'))
          AND (SELECT COUNT(*) FROM private_messages INNER JOIN users ON private_messages.receiver_id = users.id WHERE users.network_id = networks.id AND (private_messages.created_at BETWEEN ((timestamp '2013-03-01')) AND (( (timestamp '2013-03-31') + interval '-1 second'))) ) > 0) 
```

结果：

```
Aggregate  (cost=722675247.10..722675247.11 rows=1 width=0) (actual time=519916.108..519916.108 rows=1 loops=1)
  ->  Seq Scan on networks  (cost=0.00..722675245.34 rows=703 width=0) (actual time=2576.205..519916.044 rows=78 loops=1)
        Filter: ((created_at >= '2013-01-01 00:00:00'::timestamp without time zone) AND (created_at <= '2013-01-30 23:59:59'::timestamp without time zone) AND ((SubPlan 1) > 0))
        SubPlan 1
          ->  Aggregate  (cost=50671.34..50671.35 rows=1 width=0) (actual time=240.359..240.359 rows=1 loops=2163)
                ->  Hash Join  (cost=10333.69..50671.27 rows=28 width=0) (actual time=233.997..240.340 rows=13 loops=2163)
                      Hash Cond: (private_messages.receiver_id = users.id)
                      ->  Bitmap Heap Scan on private_messages  (cost=10127.11..48675.15 rows=477136 width=4) (actual time=56.599..232.855 rows=473686 loops=1809)
                            Recheck Cond: ((created_at >= '2013-03-01 00:00:00'::timestamp without time zone) AND (created_at <= '2013-03-30 23:59:59'::timestamp without time zone))
                            ->  Bitmap Index Scan on index_private_messages_on_created_at  (cost=0.00..10007.83 rows=477136 width=0) (actual time=54.551..54.551 rows=473686 loops=1809)
                                  Index Cond: ((created_at >= '2013-03-01 00:00:00'::timestamp without time zone) AND (created_at <= '2013-03-30 23:59:59'::timestamp without time zone))
                      ->  Hash  (cost=205.87..205.87 rows=57 width=4) (actual time=0.218..0.218 rows=2 loops=2163)
                            Buckets: 1024  Batches: 1  Memory Usage: 0kB
                            ->  Index Scan using index_users_on_network_id on users  (cost=0.00..205.87 rows=57 width=4) (actual time=0.154..0.215 rows=2 loops=2163)
                                  Index Cond: (network_id = networks.id)
Total runtime: 519916.183 ms 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:29:22.670

让我们尝试一些不同的东西。我只是建议将其作为“答案”，因为它很长，您无法格式化评论。让我们将查询模块化地作为一系列需要相交的子集。让我们看看执行这些操作需要多长时间（请报告）。用您的时间戳替换 t1 和 t2。请注意每个查询如何建立在前一个查询的基础上，使前一个查询成为“内联视图”。

编辑：另外，请确认网络表中的列。

# 1

```
 select PM.receiver_id from private_messages PM
 where PM.create_at between (t1 and t2) 
```

# 2

```
 select U.id, U.network_id from users U
 join
 (
   select PM.receiver_id from private_messages PM 
   where PM.create_at between (t1 and t2)
 ) as FOO
 on U.id = FOO.receiver_id 
```

# 3

```
select N.* from networks N
join
(
select U.id, U.network_id from users U
 join
 (
   select PM.receiver_id from private_messages PM 
   where PM.create_at between (t1 and t2)
 ) as FOO
 on U.id = FOO.receiver_id
) as BAR
on N.id = BAR.network_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:10:43.693

首先，我认为你想要一个关于 的索引`network.created_at`，即使现在有超过 10% 的表与 匹配`WHERE`，它也可能不会被使用。

接下来，如果您尝试将尽可能多的逻辑放入一个查询中，而不是将一些逻辑拆分为子查询，我希望您会获得更快的速度。我相信该计划表明迭代`network.id`匹配的每个值；通常一次性加入效果更好。

我认为下面的代码在逻辑上是等价的。如果没有，请关闭。

```
SELECT COUNT(*) 
FROM 
 (SELECT users.network_id FROM "networks"
  JOIN users 
  ON users.network_id = networks.id
  JOIN private_messages
  ON private_messages.receiver_id = users.id
   AND (private_messages.created_at 
    BETWEEN ((timestamp '2013-03-01')) 
         AND (( (timestamp '2013-03-31') + interval '-1 second')))
  WHERE 
   networks.created_at 
    BETWEEN ((timestamp '2013-01-01')) 
     AND (( (timestamp '2013-01-31') + interval '-1 second'))
  GROUP BY users.network_id)
     AS main_subquery  
; 
```

我的经验是，如果将`networks.created_at`移入`ON`联接子句，您将获得相同的查询计划`users-networks`。我认为您的问题不是时间戳；这是查询的结构。您还可以通过将`GROUP BY`子查询中的 替换为 来获得更好（或更差）的计划`SELECT DISTINCT users.network_id`。

# visual-studio - 在持续部署到 Azure 网站的源代码控制应用程序中管理连接字符串

> ID：15977742
> 
> 赞同：6
> 
> 时间：2013-04-12T17:48:08.807
> 
> 标签：visual-studio, deployment, azure-sql-database, azure-web-app-service, azure-devops

这是场景：我在一个 asp.net mvc 4 项目上有多个开发人员。每个开发人员都有一个本地数据库。源代码控制系统是[http://tfs.visualstudio.com](http://tfs.visualstudio.com)上的 TFS 。我们使用 Azure 网站来托管该网站。我们还配置了 Azure 网站以进行持续部署。

源代码控制系统可以是 git、mercurial、TFS 等。老实说，我认为这并不重要。

我的问题是如何完成这三件事：

1.  每个开发人员在本地都有他/她自己的连接字符串（没有他们在源代码控制中）
2.  Azure 有自己的连接字符串（没有它在源代码控制中）
3.  源代码管理不显示任何连接信息
4.  每个开发人员能够 F5 并在本地运行/调试/测试应用程序。

我们通过将单独的连接字符串添加到我们的 machine.config 来完成 #1，这样开发人员工作站设置之间就不会发生冲突。

我最初从 web.config 中删除了连接字符串部分。在 Azure 网站（使用管理门户，在配置下）中，我配置了连接字符串，在观看 Scott Hanselman 视频后，我的印象是这些将在部署时动态合并到我的 web.config 中，但事实并非如此似乎发生。每当我转到任何访问数据库的页面时，都会收到一条错误消息，提示找不到连接字符串（或与连接相关的其他数据库错误）

如果我将 Azure 连接字符串直接放在 web.config 中，Things 可以在 Azure 上运行，但是连接详细信息在每个人都可以看到的源代码控制中。

在阅读了 Scott 和 David Ebbo 的更多帖子后，我似乎可以在 web.config 中放置一个空白连接字符串（使用正确的名称），然后 Azure 将正确覆盖这些值。然后我必须让开发人员将他们的连接字符串放在他们的 web.debug.config 中，然后安装 Slow Cheetah 插件，以便他们可以 F5 并在本地进行测试。他们也不必将 web.debug.config 签入源代码管理。（使用 TFS 不是那么容易）这似乎是一个非常繁重的组合，它肯定会在某个地方失败。

我必须相信这并不是一个罕见的问题。其他团队如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:18:15.527

环顾四周后，如果没有对前/后构建过程的大量命令行黑客攻击，似乎实际上并不支持我的要求。我们最终做的是强制开发人员都创建自己的本地数据库，使用受信任的身份验证，并在 web.config 中建立所有开发人员都使用的 SQL 别名。这样，它对每个人都在本地工作，它不会在源代码管理中公开任何用户名/密码，并且当自动从源代码管理中提取时，Azure 仍然可以覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:19:34.680

Slow Cheetah 实际上是一个不错的解决方案。[它是web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)的扩展。这些转换让您保留一个 web.config 文件，然后为每个部署方案指定您想要对其进行的更改。例如，您的发布配置可能会删除调试属性。

这也可用于更改连接字符串。在将项目部署到 Azure 期间会应用这些转换。

我过去所做的使这也适用于本地开发机器的方法是使用带有[外部化连接配置文件](http://msdn.microsoft.com/en-us/library/ms254494.aspx)的 web.config 。每个开发人员都创建了一个 connection.machinename.config 文件，该文件在构建后步骤中的构建时复制到 connection.config。这些文件不必签入，它们永远不会引起冲突，因为每台机器的名称都是唯一的。

release/staging/.. 配置使用 web.config 转换将连接字符串元素替换为该部署的特定连接字符串（这样就消除了对外部配置文件的依赖）。

Slow Cheetah 提供了一些很好的帮助来在设计时检查这些转换的结果。

# php - MySQL更新语法错误

> ID：15977743
> 
> 赞同：0
> 
> 时间：2013-04-12T17:48:20.060
> 
> 标签：php, mysql

我正在使用 php 在数据库上运行基本更新，但是我遇到了 SQL 语法错误，而且我一辈子都看不到出了什么问题。db中的字段称为orders，它设置为int（8）。我尝试将其更改为smallint和varchar，增加但没有乐趣。我也尝试过修改查询中的'和'。代码如下......

```
 $query = "UPDATE gigs SET order='$order' WHERE gig_id='$id'";
    if ($r = mysql_query($query) ) {
        echo  "<p>UPDATED:" . $row['year'] ." - " . $row['month'] . " - " .  $row['day'] . " = $order</p>";
    } else {
        echo "<p>" . mysql_error() . "<br />$q</p>";
    } 
```

$order 是年月日值组合成一个整数值，例如 2013 年 4 月 12 日 = 20130412。

这是我收到的错误消息

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'order='20040802' WHERE gig_id='10'' 附近使用正确的语法 UPDATE gigs SET order='20040802' WHERE gig_id='10'
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'order='20040804' WHERE gig_id='11'' 附近使用正确的语法 UPDATE gigs SET order='20040804' WHERE gig_id='11'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:49:05.627

`ORDER`是保留关键字。为了使语句不抛出异常，您需要使用反引号对列进行转义，

```
UPDATE gigs SET `order` = '$order' WHERE gig_id = '$id' 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:03:52.850

@EdHeal 如果它是数字 MySQL 不在乎它是否被引用。如果我知道它是数字，我不会引用它，但我已经创建了很多次动态查询，在这种情况下我只引用所有内容。当然，更好的选择是使用 PDO 和绑定参数；）

# python - Python - 试图让我的声音文件在应用程序启动时播放

> ID：15977746
> 
> 赞同：0
> 
> 时间：2013-04-12T17:48:31.890
> 
> 标签：python, audio, user-interface, wav, pythoncard

我使用了以下代码，但不确定为什么它不起作用。

```
from PythonCard import model

playSound = 1

class MainWindow(model.Background):
    pass

app = model.Application(MainWindow)
app.MainLoop()

if playSound == 1:
    s = Sound()
    s.read('start.wav')
    s.play
    playSound = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:57:56.213

使用括号调用函数：

```
s.play() 
```

# clojure - 在 clojure repl 中输入十进制数时出错

> ID：15977747
> 
> 赞同：2
> 
> 时间：2013-04-12T17:48:34.113
> 
> 标签：clojure, read-eval-print-loop

当我输入`user> (* 10 .5)`我的 clojure repl 时，我收到以下消息：

```
CompilerException java.lang.RuntimeException: Unable to resolve symbol: .5 in this context, compiling:(NO_SOURCE_PATH:1:1) 
```

我知道我可以做到这一点`(/ 10 2)`或`(* 10 (/ 1 2))`。

谁能告诉我这里发生了什么？

我正在使用 clojure 1.5、emacs 和 nrepl

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:50:32.573

[clojure 阅读器](http://clojure.org/reader#The%20Reader--Reader%20forms)使用[NNNN.NNNN](http://clojure.org/data_structures#Data%20Structures-Numbers)的形式进行双打。.5 应写为

```
(* 10 0.5) 
```

作为旁注，它读作双精度，如果你想要一个浮点数，你必须施放它。

以 var 的名称开头是完全可以的`.`

```
user> (def .im-a-normal-var 42)
#'user/.im-a-normal-var
user> .im-a-normal-var
42 
```

# javascript - Android键盘关闭后一直出现

> ID：15977749
> 
> 赞同：2
> 
> 时间：2013-04-12T17:48:38.033
> 
> 标签：javascript, android, android-browser

我的 html 中有一个文本区域。当用户点击它时，键盘会正确弹出。按下键盘关闭按钮后，在点击屏幕上的其他位置时，键盘会不断出现。有没有办法让键盘只出现在输入水龙头上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:59:02.497

下面的 jquery 代码可以解决问题：

```
$(window).bind('touchstart', function (e) {
    if (!$(e.target).is(':input')) {
        $(':input').blur();
    }   
}); 
```

基本上，我抓住每一个水龙头；如果目标不是输入字段，则模糊所有输入字段，这实际上隐藏了愚蠢的键盘。

# spring - 如何为不同的 jsp 页面构建模型、bean、控制器和视图，但驻留在数据库中的一个表中？

> ID：15977756
> 
> 赞同：1
> 
> 时间：2013-04-12T17:48:51.697
> 
> 标签：spring, design-patterns, spring-mvc, architecture, spring-webflow

这是我们正在使用**Spring MVC 2.5、jsp、Java7、Ajax 和 HTML5 进行的一个新项目。**就我而言，我将拥有 7-10 个 jsp 页面，每个页面包含一个表单。这些页面是连续的。即一个人必须成功通过第一页才能进入第二页，通过第二页才能进入第三页，依此类推。

为了持久化数据，必须到达最后一页（成功通过其余页面后）并确认信息正确。一旦用户确认，我必须持久化存储在 bean 或会话中的所有数据（全部或无）。**不应保留不完整的数据。**让我们称我们的数据库表为“员工”

我是 Spring MVC 的新手，但得到了这个想法并使用控制器实现了页面流。

我的问题是我应该需要一个模型类或 bean 来存储所有数据，还是使用 session 来存储每个页面信息并将其保留在 session 中直到它被持久化？

或者最好有一个模型类，但有多个控制器/bean 来控制每个页面的数据流。你推荐哪一个？是否已经实施了任何设计模式来回答我的问题？如果您有更好的想法，请随时讨论您的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:01:23.713

正如您已经提到的，有两种方法。使用哪一个取决于数据大小和其他要求，例如，用户是否可以稍后回来并从他离开的地方继续。模型和控制器不必只是一个。可以适当设计。

a)**在会话中存储来自每个屏幕的数据：**

*   优点：不需要的数据不会持久化到数据库。当用户在屏幕上来回移动时，可以在会话内操作数据，因此速度更快。

*   这种方法的缺点：会话中的信息过多会导致内存问题。在会话故障转移期间可能不是很有帮助。如果需要此功能，用户无法重新登录并从用户离开的地方继续。

b)**在用户继续移动时保留每个屏幕数据：**

*   优点：会话更轻量，因此会话中只存储最少的相关信息。用户可以重新登录并从用户离开的地方继续。可以使用单独的正在进行的数据库表来存储此信息，并且仅在最终提交时将数据插入/更新到实际表中，否则数据库将包含大量未提交的数据。这样，可以定期清理正在进行的数据库。
*   缺点：需要对每个屏幕进行数据库调用以持久化和检索，即使它可能不是由用户提交的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T20:46:27.527

您使用 HTTP 会话存储表单状态是正确的。

> 还是使用 session 来存储每个页面信息并将其保留在 session 中直到它被持久化？

因为这个要求：

> 不应保留不完整的数据

至于

> 我是否需要一个模型类或 bean 来存储所有数据

您可以根据需要对此进行建模。也许是一个模型来表示流程，然后是每个页面的对象。取决于数据在页面之间的拆分方式。

尽管如上面的评论中所述，您也许可以使用 WebFlow 来实现这一点。然而，这最终只是 Spring MVC 之上的一个轻量级框架。

# vb.net - AdressOf 方法签名

> ID：15977762
> 
> 赞同：3
> 
> 时间：2013-04-12T17:49:04.833
> 
> 标签：vb.net, .net-2.0, begininvoke

既然我不能输入参数，我怎么能尊重下面的签名？

```
Private Sub SetFocusToRow(ByRef ultraGridRow As Infragistics.Win.UltraWinGrid.UltraGridRow)
    grdSoldeOuverture.ActiveCell = ultraGridRow.Cells(0)
    grdSoldeOuverture.PerformAction(Infragistics.Win.UltraWinGrid.UltraGridAction.EnterEditMode)
End Sub 
```

当我这样称呼它时

```
Me.BeginInvoke(New MethodInvoker(AddressOf Me.SetFocusToTemplateAddRow)) 
```

* * *

我在带有 Microsoft Visual Basic 2005 的 Visual Studio 2005 中使用 .NET 2.0，因此不能选择 lambda 表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:51:31.183

您可以使用 lambda 来捕获需求并将它们传入：

```
Foo arg = GetTheFoo()

BeginInvoke(New MethodInvoker(Sub() SetFoo(arg))) 
```

* * *

编辑：

首先，将您的方法更改为不通过`ByRef`- 这是不必要的：

```
Private Sub SetFocusToRow(ByVal ultraGridRow As Infragistics.Win.UltraWinGrid.UltraGridRow)
    grdSoldeOuverture.ActiveCell = ultraGridRow.Cells(0)
    grdSoldeOuverture.PerformAction(Infragistics.Win.UltraWinGrid.UltraGridAction.EnterEditMode)
End Sub 
```

接下来，定义一个委托：

```
' Define your delegate:
Delegate Sub SetFocusToRowDelegate(ByVal ultraGridRow As Infragistics.Win.UltraWinGrid.UltraGridRow) 
```

然后您可以通过以下方式拨打电话：

```
BeginInvoke(new SetFocusToRowDelegate(AddressOf SetFocusToRow), arg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:01:55.090

由于 lambda 会导致问题，您可以尝试使用对象手动实现它们：

```
Class FooCurry

    Private bar as Foo

    Private Sub new (foo as Foo)
       bar = foo
    End Sub

    Public sub DoFoo()
       bar.SetFoo()
    EndSub
End Class

dim foocurry as new FooCurry(foo)
BeginInvoke(New MethodInvoker(AdressOf foocurry.DoFoo)) 
```

这就是 lambdas 在底层实现的方式，所以这应该可以工作。您可以概括对象以获取委托并在更多地方使用它。

# javascript - 如何从 Jquery 中的 URL 获取参数值？

> ID：15977770
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:49:57.917
> 
> 标签：javascript, jquery

大家好，我有一个网址，我需要从网址获取参数

```
 var URL="http://localhost:17775/Students/199/Kishore"
   //here from the url i need to get the value 199 
```

这是我一直在尝试的，但这里的值为 null

```
 function getURLParameter(name) { 
    return parent.decodeURI((parent.RegExp(name + /([^\/]+)(?=\.\w+$)/).exec(parent.location.href) || [, null])[1]); 
  };

  $(document).ready(function() {
     getURLParameter("Students");
     //i need to get the value 199 from the url
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:55:17.017

尽管可以使用 jQuery，但它并不需要。有很多方法可以给这只猫剥皮。像这样的事情应该让你朝着正确的方向开始：

```
var URL="http://localhost:17775/Students/199/Kishore";
var splitURL = URL.split("/");
var studentValue = "";

for(var i = 0; i < splitURL.length; i++) {
    if(splitURL[i] == "Students") {
        studentValue = splitURL[i + 1];
        break;
    }
} 
```

这是[一个工作小提琴](http://jsfiddle.net/DQrRc/1/)。

**编辑**

根据评论，表明位置将始终相同，提取很简单：

```
var url = "http://localhost:17775/Students/199/Kishore";
var studentValue = url.split("/")[4]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:21:58.527

这就是您要查找的内容，因为 URL 参数会不断变化：

[http://jsbin.com/iliyut/2/](http://jsbin.com/iliyut/2/)

```
var URL="http://localhost:17775/Students/199/Kishore"
var number = getNumber('Students'); //199

var URL="http://localhost:17775/Teachers/234/Kumar"
var number = getNumber('Teachers'); //234

function getNumber(section) {
  var re = new RegExp(section + "\/(.*)\/","gi");
  var match = re.exec(URL);
  return match[1];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T18:16:56.553

我会做以下事情：

```
var url = "http://localhost:17775/Students/199/Kishore"; 
var studentValue = url.match('/Students/(\\d+)/')[1]; //199 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-12T18:05:42.337

如果你想要的块总是在同一个地方，这将起作用

```
var url="http://localhost:17775/Students/199/Kishore"

//break url into parts with regexp
//removed pointless regexp
var url_parts = url.split('/'); 

//access the desired chunk
var yourChunk = url_parts[4]

console.log(yourChunk) 
```

# javascript - JavaScript Google Maps API V3 海拔和方向

> ID：15977774
> 
> 赞同：0
> 
> 时间：2013-04-12T17:50:19.997
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google Maps API V3 构建一个显示海拔的地图，当您使用可拖动地图更改方向并更新文本方向面板时，该地图会更新。

认为你可以帮助我指出正确的方向吗？

这是带有文本方向面板的链接，可拖动[http://bicyclevegas.com/directionswitheleval.html](http://bicyclevegas.com/directionswitheleval.html)

这是指向具有高程配置文件的链接，并且是可拖动的 [http://bicyclevegas.com/elevation.html](http://bicyclevegas.com/elevation.html)

我无法将两者混合在一起，任何指示和帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:48:45.920

你错过了：

```
dr.setPanel(document.getElementById("directionsPanel")); 
```

就在：

```
var dr = new google.maps.DirectionsRenderer({
     map: map,
     draggable: true,
     preserveViewport: true
}); 
```

jsfiddle：http: [//jsfiddle.net/3F8nw/](http://jsfiddle.net/3F8nw/)

# installation - 安装cython时如何个性化安装路径？

> ID：15977775
> 
> 赞同：1
> 
> 时间：2013-04-12T17:50:20.697
> 
> 标签：installation, cython

我正在安装 cython 0.18。但是，我不知道安装时如何设置安装路径。我更喜欢将它安装在我的个人主目录下，因为我没有在 /usr/bin 或 /usr/local/bin 下安装文件的权限。

谢谢，

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T07:19:34.207

这应该足够了：

将以下行添加到您的`~/.profile`:

```
export PYTHONPATH=$PYTHONPATH:~/YOUR/DEPENDENCIES/Cython-0.18
export PATH=$PATH:~/YOUR/DEPENDENCIES/Cython-0.18/bin 
```

然后你应该能够：

```
CC="gcc"   \
CXX="g++"   \
    python setup.py build_ext --inplace 
```

# batch-file - 获取文本文件中每一行的第一个字符

> ID：15977776
> 
> 赞同：0
> 
> 时间：2013-04-12T17:50:23.007
> 
> 标签：batch-file

我有一个包含客户姓名的文本文件。我需要批处理文件中每一行的第一个字符。我做的：

```
setlocal EnableDelayedExpansion
set file=c:\klantenlijst.txt
FOR /F "delims=~" %%i IN (%file%) DO (
  set var=%%i:~0,2
  echo !var!
) 
```

但这导致全名，而不仅仅是第一个字符，有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:54:48.707

尝试这个：

```
setlocal EnableDelayedExpansion
set file=c:\klantenlijst.txt
FOR /F "delims=~" %%i IN (%file%) DO (
  set var=%%i
  set var=!var:~0,1!
  echo !var!
) 
```

您不能使用 for 循环变量进行字符串操作。

# iphone - iOS - 使用关联时“此类不符合键值编码”？

> ID：15977777
> 
> 赞同：1
> 
> 时间：2013-04-12T17:50:30.197
> 
> 标签：iphone, ios, objective-c, exception, key-value-coding

我在我的 iOS 应用程序中声明了以下类...

```
@interface UserRegistrationRequest : BaseServiceRequest

@property (nonatomic, retain) NSString *username;
@property (nonatomic, retain) NSString *password;
@property (nonatomic, retain) NSString *secretQuestionID;
@property (nonatomic, retain) NSString *secretQuestionAnswer;
@property (nonatomic, retain) UserProfile *profile;

@end

@interface UserProfile : NSObject

@property (nonatomic, retain) NSString *emailAddress;
@property (nonatomic, retain) NSString *firstName;
@property (nonatomic, retain) NSString *lastName;
@property (nonatomic, retain) NSData *profileImage;
@property (nonatomic, retain) NSNumber *dateOfBirth;

@end 
```

据我所知，这些类应该符合键值编码。但是，当我运行以下代码时...

```
NSString *propKey = @"profile.firstName";
NSString *propVal = [self.registrationRequest valueForKey:propKey]; 
```

我得到一个例外说...

```
[<UserRegistrationRequest 0xb6187f0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key profile.firstName. 
```

知道为什么会发生这种情况，或者我在排除故障时应该寻找什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:52:08.203

利用 ：

```
NSString *propVal = [self.registrationRequest valueForKeyPath:propKey]; 
```

# php - Yii - 删除所有活动记录的智能报价

> ID：15977779
> 
> 赞同：0
> 
> 时间：2013-04-12T17:50:32.290
> 
> 标签：php, activerecord, yii, smart-quotes

我有一个允许用户导入/输入信息的应用程序，这些信息使用 Yii 活动记录保存到 MySQL 数据库中，并且我有一些用户复制/粘贴具有 Microsoft 智能引号的文本。当在网站的 iPhone 实现上解析数据时，这是一个问题，所以我需要一种方法来摆脱所有的智能引号。

我找到了一个 php 函数，可以从一段文本中删除这些字符，但我想知道 Yii 中是否有一种方法可以在每次将文本保存到数据库时调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:42:46.213

您可以通过以下方式扩展`CActiveRecord`覆盖[beforeSave](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#beforeSave-detail)方法：

```
class ActiveRecord extends CActiveRecord
{
    protected function removeMagicQuotes($value)
    {
        return your_function_remove_magic_quotes($value);
    }

    protected function beforeSave()
    {
        $attributes = array_keys($this->getAttributes());
        foreach ($attributes as $attribute)
            $this->$attribute = $this->removeMagicQuotes($this->$attribute);  
        return parent::beforeSave();
    }
} 
```

这将删除活动记录中声明的所有属性的魔术引号。作为替代方案，您可以覆盖[beforeValidate](http://www.yiiframework.com/doc/api/1.1/CModel#beforeValidate-detail)方法，而不是`beforeSave`在验证之前删除引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:05:47.893

我建议为可能出现的字段创建 getter/setter 并在那里过滤它。

在现场的情况下是这样的`comment`：

```
// Make field $comment private so get/set will work
private $comment = '';
public function getComment()
{
    return clear_function($this->comment);
}

public function setComment($value)
{
    // Could clear here too if you want, so it will be stored clean in db
    $this->comment = $value;
} 
```

# sql - 如何删除 SQL Server 存储过程中使用的 @Temp 表

> ID：15977784
> 
> 赞同：0
> 
> 时间：2013-04-12T17:50:50.260
> 
> 标签：sql, stored-procedures, temp-tables

我正在使用光标传递每个员工的明智信息以在内部进行一些计算，

我使用了一些带有声明的临时表，例如

```
declare @tempTask1 table(emplid nvarchar(10), Values bigint) 
```

并将其存储到主表中

```
insert into Maintable
Select * from @tempTask1 
```

但发生的情况是当循环继续`emplid`添加到`@tempTask1`.

像例子

```
E1 1001
E2 1002
... 
```

根据循环的次数

因此每条记录都存在重复条目，计算失败。

如何删除此临时表并重新创建循环内使用的 emp 表以避免这些数据问题。

注意：每个循环在循环时只需要唯一一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:01:40.690

您可以使用删除语句

```
DELETE @tempTask1 
```

# android - 将光标打开会导致以后的命令失败吗？

> ID：15977788
> 
> 赞同：0
> 
> 时间：2013-04-12T17:51:01.797
> 
> 标签：android, sqlite, android-sqlite

我有一个带有 SQLite 数据库的应用程序；在打开游标以使用以下查询获取一些数据后：

`SELECT * FROM table_name WHERE id=42;`

在运行这样的命令之前是否有必要关闭光标：

`UPDATE table_name SET column = datetime('now') WHERE id=42;`

这会影响打开光标中的行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:55:29.137

这应该很容易测试自己。
该`UPDATE`语句将运行，但现有光标中的数据将过时。一般规则是在完成后关闭游标，如果使用现有游标[`Loader`，](http://developer.android.com/reference/android/content/Loader.html)则应在源数据更改时刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:55:32.217

不，您可以打开游标，对选定的行执行一些更新，然后关闭游标（之前`db.close()`）。样本：

```
Cursor cursor = db.rawQuery("SELECT id, ...");
if (cursor != null && cursor.moveToFirst()) {
    int id = cursor.getLong ("id");

    ContentValues values = new ContentValues();
    values.put("id", id +1000);
    values.put("name", name);

    db.update(DATABASE_TABLE, args, "id=" + id, null);
}
cursor.close(); 
```

注意：对选定表的更新对打开的游标（的值）没有影响。

# javascript - 如何获取所有内容 使用 jquery 在一页中添加标签

> ID：15977789
> 
> 赞同：1
> 
> 时间：2013-04-12T17:51:01.893
> 
> 标签：javascript, jquery, jquery-selectors, html-lists

我有一个类似这样的 html 列表：

```
<li id="tag">red</li>
<li id="tag">yellow</li>
<li id="tag">blue</li> 
```

如何使用 jQuery 获取这些 li 标签的内容？

例如;

```
$tags = red, yellow, blue 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:52:45.477

您可以使用[jQuery.map()](http://api.jquery.com/jQuery.map/)

**[现场演示](http://jsfiddle.net/MSFcz/)**

```
texts = $('li').map(function(){
  return $(this).text();
}).get().join(','); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T17:52:34.257

```
var $tags = $("li").map(function(){
  return $(this).text();
}).get().join(","); 
```

在这里，有一个小提琴：http: [//jsfiddle.net/KTted/2/](http://jsfiddle.net/KTted/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T17:52:47.180

首先，您应该将您的更改`id="tag"`为`class="tag"`，因为您不能有多个具有相同 ID 的元素。

您可以构建一个值数组：

```
var content = [];
$("li").each(function (element) {
    content.push[$(element).text()];
}); 
```

或者正如其他人指出的那样，您可以使用地图：

```
var content = $("li").map(function() {
    return $(this).text();
}).get().join(","); 
```

# soa - SOA 套件安装错误

> ID：15977793
> 
> 赞同：0
> 
> 时间：2013-04-12T17:51:06.387
> 
> 标签：soa

我已经在我的 Windows 系统上成功安装了 Weblogic 10.3.6.0 版。

尝试安装 SOA 套件时，失败并显示消息

> INST-07286：指定的 Oracle 中间件主位置没有最低版本 10.3.5.0 的 weblogic 服务器。如果版本不正确，那么使用 Weblogic 服务器进行配置将失败。

即使安装了 weblogic，也不确定为什么会出现此错误。请建议可能缺少的内容。

我尝试设置 Windows 环境变量`MW_HOME`（并重新启动机器），但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T23:07:12.707

Weblogic server 现在在 11g 中自带了 Jdeveloper，所以不需要再安装 weblogic。我认为使用 10.XX 版本会导致错误，请同时检查您使用的 JDK 版本。我知道我回复得太晚了，但我认为如果您仍然没有解决它，这将有所帮助。

# if-statement - 如果 Makefile 中的条件，则在目标内

> ID：15977796
> 
> 赞同：85
> 
> 时间：2013-04-12T17:51:19.453
> 
> 标签：if-statement, makefile, target

我正在尝试设置一个 Makefile 来搜索和复制一些文件（if-else 条件），但我无法弄清楚它到底有什么问题？（你我很确定这是因为空格/制表符的组合写在错误的地方）。请问我能得到一些帮助吗？

这是我目前拥有的：

```
obj-m = linuxmon.o

KDIR = /lib/modules/$(shell uname -r)/build
UNAME := $(shell uname -m)

all:

    $(info Checking if custom header is needed)
    ifeq ($(UNAME), x86_64)
        $(info Yes)
        F1_EXISTS=$(shell [ -e /usr/include/asm/unistd_32.h ] && echo 1 || echo 0 )
        ifeq ($(F1_EXISTS), 1)
            $(info Copying custom header)
            $(shell sed -e 's/__NR_/__NR32_/g' /usr/include/asm/unistd_32.h > unistd_32.h)
        else    
            F2_EXISTS=$(shell [[ -e /usr/include/asm-i386/unistd.h ]] && echo 1 || echo 0 )
            ifeq ($(F2_EXISTS), 1)
                $(info Copying custom header)
                $(shell sed -e 's/__NR_/__NR32_/g' /usr/include/asm-i386/unistd.h > unistd_32.h)
            else
                $(error asm/unistd_32.h and asm-386/unistd.h does not exist)
            endif
        endif
        $(info No)
    endif

    @make -C $(KDIR) M=$(PWD) modules

clean:
    make -C $(KDIR) M=$(PWD) clean
    rm unistd_32.h 
```

无论如何，这将打印两次“是”，“复制标题”，然后它会退出说 sed 无法读取`/usr/include/asm-i386/unistd.h`（当然它无法读取，因为我在 x64 系统上）。我可以说`make`只是不理解 if/else 而是逐行运行所有内容。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2015-06-11T07:07:33.720

您可以简单地使用 shell 命令。如果要禁止回显输出，请使用“@”符号。例如：

```
clean:
    @if [ "test" = "test" ]; then\
        echo "Hello world";\
    fi 
```

请注意，每行的结尾`;`和`\`是必要的

（这是因为`make`将每一行解释为单独的命令*，除非*它以 结尾`\`）

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-04-12T18:13:20.833

这里有几个问题，所以我将从我通常的高级建议**开始：从小而简单开始，一次增加一点复杂性，每一步都进行测试，永远不要添加不起作用的代码。**（我真的应该有那个热键。）

您正在以一种令人眼花缭乱的方式混合 Make 语法和 shell 语法。你不应该让它在没有测试的情况下变得这么大。让我们从外部开始，向内工作。

```
UNAME := $(shell uname -m)

all:
    $(info Checking if custom header is needed)
    ifeq ($(UNAME), x86_64)
    ... do some things to build unistd_32.h
    endif

    @make -C $(KDIR) M=$(PWD) modules 
```

因此，您希望在调用第二个之前构建（可能） unistd_32.h `make`，您可以将其作为先决条件。而且由于您仅在特定情况下才需要它，因此可以将其放在条件中：

```
ifeq ($(UNAME), x86_64)
all: unistd_32.h
endif

all:
    @make -C $(KDIR) M=$(PWD) modules

unistd_32.h:
    ... do some things to build unistd_32.h 
```

现在建设`unistd_32.h`：

```
F1_EXISTS=$(shell [ -e /usr/include/asm/unistd_32.h ] && echo 1 || echo 0 )
ifeq ($(F1_EXISTS), 1)
    $(info Copying custom header)
    $(shell sed -e 's/__NR_/__NR32_/g' /usr/include/asm/unistd_32.h > unistd_32.h)
else    
    F2_EXISTS=$(shell [[ -e /usr/include/asm-i386/unistd.h ]] && echo 1 || echo 0 )
    ifeq ($(F2_EXISTS), 1)
        $(info Copying custom header)
        $(shell sed -e 's/__NR_/__NR32_/g' /usr/include/asm-i386/unistd.h > unistd_32.h)
    else
        $(error asm/unistd_32.h and asm-386/unistd.h does not exist)
    endif
endif 
```

您正在尝试`unistd.h`从`unistd_32.h`; 唯一的窍门是它`unistd_32.h`可能在两个地方之一。清理它的最简单方法是使用`vpath`指令：

```
vpath unistd.h /usr/include/asm /usr/include/asm-i386

unistd_32.h: unistd.h
    sed -e 's/__NR_/__NR32_/g' $< > $@ 
```

# php - Linux 上的 PHP：不记得 $_SESSION 变量

> ID：15977797
> 
> 赞同：1
> 
> 时间：2013-04-12T17:51:19.560
> 
> 标签：php, apache, session

我将我的页面从 Windows 上的 EasyPHP 移到了 Linux 服务器上，并开发了这个新问题。当我重新加载页面或单击链接以将我带回到会话中应可访问的页面（或另一个页面）时，会话信息将丢失，并且用户已注销。

改编自的这段代码`W3`似乎说明了这个问题：

```
<?php

//Thing1.php
session_start();
if (! isset ($_SESSION['views'])) $_SESSION['views']='first load';
else $_SESSION['views']='reloaded';
?>

<html>
<body>

<?php
//retrieve session data
echo "Pageviews=". $_SESSION['views'];
?>
<br>
<a href="thing1.php">Reload this page</a>

</body>
</html> 
```

在 EasyPHP 上，它最初显示`Pageviews=first load`，但在刷新或单击返回同一页面的链接后，它总是显示`Pageviews = reloaded`。

在我的 Linux 机器上，它总是显示`Pageviews=first load`. 这与我打印数组时一致，该`$_SESSION`数组始终为空。

Linux 机器运行 PHP 5.3.10-1unbuntu3.6 和 Apache 2.2；EasyPHP 有 PHP 5.4.4 和 Apache 2.4.2。

我在这里想要的是 EasyPHP 下的行为：对于 Linux 版本，也要记住`$_SESSION`变量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:56:46.073

确保`session_start()`在第 2 页和第 1 页上都调用了它，并确保在调用之前没有 HTML 或 PHP 输出（回显、打印等）`session_start()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:52:08.230

1) 查看您的 cookie 以查看是否有一个名为 PHPSESSID。2) 在 php.ini 文件中查找 session.save_path。转到该路径，看看您是否看到文件。

如果其中任何一个不正确，则您的会话配置存在问题。特别是，确保会话已打开——您可能必须编辑 php.ini 并修复 session.save_path 的目录——而不是使用默认的“/tmp”，使用 Windows 目录，如“c:/temp”。

# jsf-2 - RichFaces rich：自动完成不触发 valueChangeListener

> ID：15977798
> 
> 赞同：1
> 
> 时间：2013-04-12T17:51:19.980
> 
> 标签：jsf-2, richfaces, facelets

基于[此](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=autocomplete&sample=modes&skin=blueSky)，我实现了一个丰富的：自动完成功能，其中包含一个自动完成的动态列表。我接下来要做的是，当用户编辑此字段以根据其值更新另一个字段时。

我发现各种链接和参考声明这是一个错误，它在提交使用的表单时触发，但至少是一年前的工作。[这里](https://community.jboss.org/message/603319)，[这里](https://community.jboss.org/thread/165095)和[这里](https://issues.jboss.org/browse/RF-10862)。

我的代码片段：

```
<rich:autocomplete value="#{cotizacionBean.currentOpcionEditable.sumaAsegurada}" style="width:100px;" id="sumaAseguradora"
                              required="true" validatorMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}"
                              autocompleteMethod="#{cotizacionBean.getAutocompleteListSumaAsegurada}"
                              valueChangeListener="#{cotizacionBean.sumaAseguradaModificada}"
                              requiredMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}" converterMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}">
                 </rich:autocomplete> 
```

还有我的豆子：

```
public void sumaAseguradaModificada(){
    System.out.println("entro sumaAseguradaModificada");
} 
```

所以我的问题是两个：这已经解决了吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T08:04:41.550

这是我如何让它工作的：

```
<a4j:jsFunction name="submitSearch"
    execute="sumaAseguradora"
    render="sumaAseguradora"
    action="#{cotizacionBean.sumaAseguradaModificada}" />
<rich:autocomplete style="width:100px;" id="sumaAseguradora"
    required="true" validatorMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}"
    autocompleteMethod="#{cotizacionBean.getAutocompleteListSumaAsegurada}"
    requiredMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}" converterMessage="#{msgs['global.etiqueta.sumaAseguradoraRequerida']}"
    onselectitem="submitSearch()"
    value="#{cotizacionBean.currentOpcionEditable.sumaAsegurada}">
</rich:autocomplete> 
```

在 Bean 中，我不得不更改方法的签名：

```
public Object sumaAseguradaModificada() {
   System.out.println("entro sumaAseguradaModificada");
   return "success";
} 
```

# cocos2d-iphone - box2d 可以跟踪我的 Cocos2d 精灵动作吗？

> ID：15977799
> 
> 赞同：0
> 
> 时间：2013-04-12T17:51:26.957
> 
> 标签：cocos2d-iphone, box2d

我这周才开始使用 Cocos2D。在玩 Box2d 时，我想知道是否可以在**CCActions 的帮助下移动 CCSprite，**并使用**box2ds 碰撞检测**功能来检测这些精灵之间的碰撞。

我很确定这一定是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:10:00.497

如果您不需要真正的物理行为，我强烈建议您“手动”处理您的碰撞逻辑。也就是说，对于您的情况，我将从这种方法开始。-

*   每个精灵创建一个主体，并将每个精灵分配给用户数据。
*   您的“静态”场景将映射到静态主体（即地板、平台等......）
*   您的“动态”精灵将映射到动态主体，只有固定装置会被标记为传感器
*   您将注册一个 b2ContactListener 来监听冲突。
*   至于棘手的部分，您需要在主循环的每次迭代中将每个主体的位置设置为每个精灵的位置（当然，将像素转换为米），以避免它们只是表现为物理机构。您可以尝试不调用 world->step，但不确定contactListener 是否可以正常工作。

希望能帮助到你！

# javascript - 使用 ViewModel 构造函数淘汰虚拟组合

> ID：15977802
> 
> 赞同：2
> 
> 时间：2013-04-12T17:51:31.480
> 
> 标签：javascript, knockout.js, constructor, durandal

我在使用 3 对 Views/ViewModels 的虚拟 Knockout 组合中具有一些奇怪的功能

autoAttendant.js

```
define(['durandal/app', 'viewmodels/settings/autoAttendant/menu'], function(app, Menu){

    return function() {
        var self = this;

        self.attendant = ko.observable();

        self.activate = function() {
            self.autoAttendant(new Menu());
        };
    };
}); 
```

自动话务员.html

```
<div id="content_pane" class="pushed_right">
    <div class="content_box">
        <h1>Attendant</h1>

        <!-- ko compose: 'viewmodels/settings/autoAttendant/menu' --><!--/ko-->

    </div>
</div> 
```

菜单.js

```
define(['durandal/app', 'viewmodels/settings/autoAttendant/menuItem'], function(app, MenuItem) {

    return function() {
        var self = this;

        self.menuItems = ko.observableArray([
            new MenuItem('val1', 'label1'),
            new MenuItem('val2', 'label2'),
            // etc...
        ]);
    };
}); 
```

菜单.html

```
<div class="list">
    <div class="box_item master">
        <!-- html content -->
    </div>
    <!-- ko foreach: { data: menuItems } -->
        <!-- ko compose: 'viewmodels/settings/autoAttendant/menuItem' --><!--/ko-->
    <!-- /ko -->
</div> 
```

菜单项.js

```
define(['durandal/app'], function(app) {
    var menuItem =  function(val, label, active) {
        var self = this;

        console.log('val:', val, 'label:', label, 'active:', active); // purely for testing purposes

        var _val = val || 'default_val',
            _label = label || 'default_label',
            _active = active || false;

        self.val = ko.observable(_val);
        self.label = ko.observable(_label);
        self.active = ko.observable(_active);
    };
    return menuItem;
}); 
```

菜单项.html

```
<div class="level">
    <div class="box_item clickable">
        <!-- html content -->
    </div>
</div> 
```

这些一起代表设置中的单个页面，该页面显示菜单和该菜单的子项。

Menu 和 MenuItem*必须*与伴随的 View/ViewModel 分离，因为菜单本身是递归的，并且 menuItem 可以链接到具有自己的 menuItems 的子菜单。

问题出现在第二个`ko compose`。发生 3次`console.log`，前 2 次显示正确传递给 menu.js 中的 MenuItem 构造函数的参数：

`val: val1 label: label1 active: undefined`

在最终`console.log`打印输出时，已传递的参数将被覆盖，如下所示：

`val: <!-- ko compose: 'viewmodels/settings/autoAttendant/menuItem' --><!--/ko--> label: Object {model: "viewmodels/settings/autoAttendant/menuItem", bindingContext: L.b.z, activeView: null} active: undefined`

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:25:03.177

在对源代码进行深入研究和（不止）一些实验之后，以下工作有效：

`<!-- ko compose: {view:'settings/autoAttendant/menuItem'} --><!--/ko-->`

来自[撰写的 Durandal 文档](http://durandaljs.com/documentation/Composition/)

# java - 如何使用 AspectJ 捕获对象初始化时间？

> ID：15977803
> 
> 赞同：1
> 
> 时间：2013-04-12T17:51:32.877
> 
> 标签：java, initialization, aop, aspectj

如果我需要使用 AspectJ 跟踪创建对象的时间，我是否捕获对构造函数的调用、正在执行的构造函数或对象初始化？这三个都有不同的语法：`pointcut: call`,`pointcut: execution`和`pointcut: initialization`, 分别。

这三者之间有什么区别，哪一个最适合使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:19:24.763

我在这里回答了一个类似的问题：[如何横切带注释的方法和构造函数？](https://stackoverflow.com/questions/13642646/how-to-crosscut-annotated-methods-and-constructors/15571384#15571384)

也许这有助于澄清安德鲁已经指出的内容。答案包含一个带有解释的小代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:07:52.177

这 3 个切入点是重叠的，但具有不同的语义。来自[AspectJ 编程指南](http://eclipse.org/aspectj/doc/released/progguide/quick.html)：

1.  调用切入点：构造函数调用的调用（即对 new Foo() 的调用）。当前执行的对象（即this）不是正在创建的对象，而是调用new的对象。
2.  执行切入点：从构造函数的第一行直到它返回。this 对象是正在创建的东西（对于之前和周围的建议可能还不存在）。
3.  初始化切入点：类似于执行切入点，但不包括对超级构造函数的调用。

由于我不确定您要做什么，因此我无法建议哪种方法最有意义，但是如果您想找出创建对象需要多少时间，那么使用执行切入点可以最有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T23:10:15.300

为了更好地理解您的切入点将解决的连接点，这个简单的示例可以帮助您：

```
class C {
    public void foo() {
        System.out.println("foo");
    }
}

public class Main { 
    public static void main(String[] args) {
        C c = new C();
        c.foo();
    }
} 
```

现在让我们有一个方面，它将打印所有可能的连接点，这些连接点可以通过*之前*和*之后*的建议进行更改：

```
public aspect MyAspect {

    pointcut Anything() : 
        cflow(!within(MyAspect)) && !within(MyAspect);

    before() : Anything() {
        System.out.println("before " + thisJoinPoint);
    }

    after() : Anything() {
        System.out.println("after " + thisJoinPoint);
    }

} 
```

产生以下输出：

```
...
before call(C())                           // <-- call to constructor, new C()
before staticinitialization(C.<clinit>)
after staticinitialization(C.<clinit>)
before preinitialization(C())
after preinitialization(C())
before initialization(C())
before execution(C())                      // <-- actual execution of constructor
after execution(C())
after initialization(C())
after call(C())                            // <-- after call to constructor
... 
```

因此，如果您将对象的初始化时间视为从调用构造函数到执行返回到调用它的同一范围的时间，这可能是一种方法：

```
public aspect ConstructionTiming {

    private long startTime, endTime;

    before() : call(C.new(..)) {
        startTime = System.nanoTime();
    }
    after() : call(C.new(..)) {
        endTime = System.nanoTime();
        System.out.println("construction took " +
                            (endTime - startTime)/1e6 + "ms");
    }
} 
```

在我的情况下输出`construction took 0.64879ms`

# python - 为什么方法没有引用相等性？

> ID：15977808
> 
> 赞同：17
> 
> 时间：2013-04-12T17:51:52.657
> 
> 标签：python, methods, identity, equality

我有一个错误，我在使用`is`. 事实证明并非如此：

```
>>> class What:
...     def meth(self):
...         pass

>>> What.meth is What.meth
True
>>> inst = What()
>>> inst.meth is inst.meth
False 
```

为什么会这样？它适用于常规功能：

```
>>> def func(): pass
>>> func is func
True 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T17:54:31.873

*每次访问它们时都会*创建方法对象。函数充当[描述符](http://docs.python.org/2/reference/datamodel.html#invoking-descriptors)，在调用其方法时返回一个方法对象`.__get__`：

```
>>> What.__dict__['meth']
<function What.meth at 0x10a6f9c80>
>>> What.__dict__['meth'].__get__(What(), What)
<bound method What.meth of <__main__.What object at 0x10a6f7b10>> 
```

如果您使用的是 Python 3.8 或更高版本，则可以改用`==`相等测试。在 Python 3.8 及更高版本上，如果两个方法`.__self__`和`.__func__`属性是相同的对象，则两个方法相等（因此，如果它们包装相同的函数，并绑定到相同的实例，都用 测试`is`）。

在 3.8 之前，方法`==`行为根据方法的实现方式而不一致 - Python 方法和两种 C 方法类型中的一种比较`__self__`相等而不是标识，而另一种 C 方法类型则按`__self__`标识进行比较。请参阅[Python 问题 1617161](https://bugs.python.org/issue1617161)。

如果您需要测试这些方法是否代表相同的底层*函数*，请测试它们的`__func__`属性：

```
>>> What.meth == What.meth     # functions (or unbound methods in Python 2)
True
>>> What().meth == What.meth   # bound method and function
False
>>> What().meth == What().meth # bound methods with *different* instances
False
>>> What().meth.__func__ == What().meth.__func__ # functions
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:57:21.367

Martijn 是正确的，新方法是由生成的对象，`.__get__`因此它们的地址指针不等同于`is`评估。请注意， using`==`将按照 Python 2.7 中的预期进行评估。

```
Python2.7
class Test(object):
    def tmethod(self):
        pass

>>> Test.meth is Test.meth
False
>>> Test.meth == Test.meth
True

>>> t = Test()
>>> t.meth is t.meth
False
>>> t.meth == t.meth
True 
```

但是请注意，从实例引用的方法并不等同于从类引用的方法，因为自引用与来自实例的方法一起携带。

```
>>> t = Test()
>>> t.meth is Test.meth
False
>>> t.meth == Test.meth
False 
```

在 Python 3.3 中`is`，方法运算符的行为通常与 the 相同，`==`因此在此示例中您将获得预期的行为。这是`__cmp__`由于 Python 3 中的消失和更清晰的方法对象表示造成的；方法现在有`__eq__`并且引用不是构建在运行中的对象，因此行为遵循人们可能期望的那样，而没有 Python 2 的期望。

```
Python3.3
>>> Test.meth is Test.meth
True
>>> Test.meth == Test.meth
True
>>> Test.meth.__eq__(Test.meth)
True 
```

# c - ret非法指令

> ID：15977809
> 
> 赞同：1
> 
> 时间：2013-04-12T17:51:53.203
> 
> 标签：c, function, assembly, x86, nasm

我正在处理一个在 main.c 中调用的程序集中实现函数的项目。C 中的签名函数声明是`void strrev(char *str) ;` Ret 指令给了我一个非法指令错误。为什么？这是我第一次这样做。

试图只发布相关代码：

```
SECTION .text
        global strrev

strrev:
        push    ebp
        mov     ebp, esp

        push    esi
        push    edi
        push    ebx

// doing things with al, bl, ecx, edi, and esi registers here

// restore registers and return    
        mov     esp,    ebp
        pop     ebx
        pop     edi
        pop     esi
        pop     ebp

        ret 
```

错误：

```
(gdb)
Program received signal SIGILL, Illegal instruction.
0xbffff49a in ?? () 
```

以这种方式编译和链接：

```
nasm -f elf -g strrepl.asm
nasm -f elf -g strrev.asm
gcc -Wall -g -c main7.c
gcc -Wall -g strrepl.o strrev.o main7.o 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:01:06.233

`mov esp, ebp`更改`esp`为指向`mov ebp, esp`执行时的位置。那是在您将`esi`, `edi`, 和压入`ebx`堆栈之前，因此您不能再弹出它们。既然你这样做了，堆栈是错误的，并且`ret`不能按预期工作。

您可能会删除该`mov esp, ebp`指令。仅当您在例程中对堆栈指针进行了可变更改（例如，将堆栈移动到所需的对齐方式或为可变长度数组腾出空间）时，才需要像这样恢复堆栈指针。如果您的堆栈被简单地处理，那么您只需按照您推送的相反顺序弹出。如果您确实对堆栈进行了变量更改，那么您需要将指针恢复到不同的位置，而不是`ebp`您保存的位置，以便您可以 pop `ebx`、`edi`和`esi`.

# performance - 我是否在滥用 Linq 到对象？

> ID：15977812
> 
> 赞同：1
> 
> 时间：2013-04-12T17:52:03.997
> 
> 标签：performance, linq, entity-framework

我认为使用 linq 到对象的查询最终会变得非常可读和美观。例如：

```
from person in db.Persons.ToList()
where person.MessageableBy(currentUser) ... 
```

其中 MessageableBy 是一种无法转换为存储表达式 (sql) 的方法

```
 public bool MessageableBy(Person sender)
    {
        // Sender is system admin
        if (sender.IsSystemAdmin())
            return true;

        // Sender is domain admin of this person's domain
        if (sender.Domain.DomainId == this.Domain.DomainId && this.Domain.HasAdmin(sender))
            return true;

        foreach (Group group in this.Groups)
        {
            if (group.MessageableBy(sender)) 
                return true;
        }

        // The person is attorney of someone messageable
        if (this.IsAttorney)
        {
            foreach (Person pupil in this.Pupils)
                if (pupil.MessageableBy(sender)) 
                    return true;
        }

        return false;
    } 
```

问题是我认为这不会扩大规模。我已经注意到数据库中有一些条目，所以无法想象大型数据库。

所以问题是： **我是否应该将 linq 与 linq 与对象混合（即：将一些“where”应用于 ICollection 并将一些“where”应用于 .ToList() 结果？我应该只使用 linq到实体，以一个非常大的句子结尾？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:53:53.023

`.ToList()`实际上将执行查询并获取该表中的所有数据，除非您确定它总是很少的记录，否则这不是您想要的。所以是的，在做之前你应该在`where`子句中做更多`.ToList()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:00:56.787

我基本同意你的初步分析。将 Linq to Objects 和 Linq to Entities 混合使用很好，但需要检索比必要更多的数据，因此可能会导致扩展问题。

请记住设计您的数据模型以支持关键查询。也许一个用户可以是一个人，而这个人可以有一个确定谁可以向谁发送消息的自我关系。这只是一个简单的想法，以启发您考虑其他表示数据的方法，以允许在查询本身中实现 ​​MessableBy 方法。

同时，如果它没有引起性能问题，那么我会在模型设计方面更多地考虑这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:01:16.923

尽管这只是简单地解释了早期受访者的陈述，但我认为真正强调以下内容非常重要：

在将结果数据发送到客户端之前，在 DB 服务器上执行尽可能多的计算，尤其是尽可能多的过滤和聚合，对于 DB 应用程序性能至关重要。

# python - 如何使用 Python 支持更正 quickfix (v1.13.3) 的编译/构建问题（...“_quickfix”导入异常）

> ID：15977813
> 
> 赞同：3
> 
> 时间：2013-04-12T17:52:04.647
> 
> 标签：python, compilation, quickfix

我花了相当于 1/2 天的时间才弄清楚这一点，所以我想分享一下我遇到的 Quickfix Engine 编译问题和解决方案。

我没有从此处指向的“Quickfix Engine”帮助资源中得到回复：“ [http://quickfixengine.org/help](http://quickfixengine.org/help) ”......因此我提供这个的另一个原因。

环境：Fedora 18 -and- CentOS6 (64bit)。

在成功编译带有 Python 支持的 quickfix（即 configure [opts]; make; make install）后，我得到以下 python 导入异常，表明找不到 python 模块“_quickfix”：

```
==============================================
user$ python -c "import quickfix"

Traceback (most recent call last):
File " ", line 1, in
File "/home/user/APPS.d/ENTHOUGHT-PYTHON-IDE.d/x86_64.d/latest/lib/python2.7/site-packages/quickfix.py", line 7, in

import _quickfix
ImportError: No module named _quickfix
============================================== 
```

问题似乎出在“make install”调用的安装脚本中。

python 解释器说“_quickfix”模块没有退出。从下面“make install”安装的文件列表可以看出，没有“_quickfix.py”文件，但是有一个“_quickfix.so”文件和一个“_quickfix.dylib”文件的引用：

```
/home/user/.local/lib/python2.7/site-packages/_quickfix.dylib -> /home/user/APPS.d/QUICKFIX.d/latest/lib/python/_quickfix.dylib
/home/user/.local/lib/python2.7/site-packages/_quickfix.so -> /home/user/APPS.d/QUICKFIX.d/latest/lib/python/_quickfix.so
/home/user/.local/lib/python2.7/site-packages/quickfix40.py
/home/user/.local/lib/python2.7/site-packages/quickfix41.py
/home/user/.local/lib/python2.7/site-packages/quickfix42.py
/home/user/.local/lib/python2.7/site-packages/quickfix42.pyc
/home/user/.local/lib/python2.7/site-packages/quickfix43.py
/home/user/.local/lib/python2.7/site-packages/quickfix44.py
/home/user/.local/lib/python2.7/site-packages/quickfix50.py
/home/user/.local/lib/python2.7/site-packages/quickfix50sp1.py
/home/user/.local/lib/python2.7/site-packages/quickfix50sp2.py
/home/user/.local/lib/python2.7/site-packages/quickfix.py
/home/user/.local/lib/python2.7/site-packages/quickfix.pyc
/home/user/.local/lib/python2.7/site-packages/quickfixt11.py

/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix.la
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix_python.la
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix_python.so.10.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix_python.so.10 -> libquickfix_python.so.10.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix_python.so -> libquickfix_python.so.10.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix.so.14.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix.so.14 -> libquickfix.so.14.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/libquickfix.so -> libquickfix.so.14.0.0
/home/user/APPS.d/QUICKFIX.d/latest/lib/pkgconfig/quickfix.pc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:21:21.550

解决方案：问题是上面的前两个条目，它们是符号链接，被破坏了。

首先，目标目录不正确：

```
/home/user/APPS.d/QUICKFIX.d/latest/lib/python/... 
```

实际上应该是：

```
/home/user/APPS.d/QUICKFIX.d/latest/lib/... 
```

所以我们先解决这个问题：

```
user$ cd /home/user/.local/lib/python2.7/site-packages
user$ rm _quickfix.so _quickfix.dylib
user$ ln -s /home/user/APPS.d/QUICKFIX.d/latest/lib/_quickfix.so    _quickfix.so
user$ ln -s /home/user/APPS.d/QUICKFIX.d/latest/lib/_quickfix.dylib _quickfix.dylib 
```

接下来，在目标目录位置更正后，符号链接仍然断开；这一次是因为他们在那个（刚刚更正的）目标目录中指向的文件名不存在（即“_quickfix.so”和“_quickfix.dylib”不存在）。

在玩了一会儿之后，我通过创建那些丢失的文件来完成工作，如下所示：

```
user$ cd /home/user/APPS.d/QUICKFIX.d/latest/lib
user$ ln -s libquickfix_python.so _quickfix.so
user$ ln -s <???> _quickfix.dylib  # Actually I didn't create this one yet. It's not yet clear to me what it should point to. I Will update this post later. 
```

-

```
Note: Because I compiled QuickFix so that it does not install to the traditional "/usr/local/" directory structure, I had to append my "LD_LIBRARY_PATH" to include: "/home/user/APPS.d/QUICKFIX.d/latest/lib" 
```

通过最少的测试，事情现在似乎可以工作（或至少朝着正确的方向）：

```
user$ python -c "import quickfix"; echo ${?}
0
user$ python -c "import quickfix42"; echo ${?}
0 
```

当我弄清楚第二个链接应该是什么时（如果有必要），或者如果我在实施的更正过程中遇到任何运行时错误，我将更新/编辑这篇文章。

我希望这可以帮助别人。

诺埃尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T11:21:23.410

您不需要创建多个符号链接 - 您只需要删除错误的符号链接并为 _quickfix.so 创建一个新的符号链接即可让一切正常工作：

```
rm /usr/local/lib/python2.7/site-packages/_quickfix.dylib
rm /usr/local/lib/python2.7/site-packages/_quickfix.so
ln -s /usr/local/lib/libquickfix_python.dylib /usr/local/lib/python2.7/site-packages/_quickfix.so 
```

这是在 OS X 上。对于 Linux，您需要使用以下内容（因为 dylib 扩展是 OS X 特定的）

```
ln -s /usr/local/lib/libquickfix_python.so /usr/local/lib/python2.7/site-packages/_quickfix.so 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T17:12:47.227

在 Ubuntu 13.04 中遇到了同样的问题。配置了 python 支持并使用了默认目标 (/usr/local/...)。编译成功后，通过以下步骤制定了类似的解决方案；

1.  创建丢失的文件/符号链接；

    cd /usr/local/lib

    sudo ln -s libquickfix_python.so _quickfix.so

    sudo ln -s _quickfix.so _quickfix.dylib

2.  将现有符号链接更改/更新到新位置：

    cd /usr/lib/python2.7/dist-packages/

    sudo ln -s /usr/local/lib/_quickfix.so _quickfix.so

    sudo ln -s /usr/local/lib/_quickfix.so _quickfix.dylib

3.  添加新的库路径

    导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH${LD_LIBRARY_PATH:+:}/usr/local/lib

# c++ - std::thread 有多标准？

> ID：15977815
> 
> 赞同：5
> 
> 时间：2013-04-12T17:52:15.297
> 
> 标签：c++, c++11, standards, stdthread, stdasync

我注意到，在许多已针对 C++11 更新的经典 C++ 参考源中，例如[cplusplus.com](http://cplusplus.com)和[Josuttis 标准库参考书](http://www.josuttis.com/libbook/)，似乎根本没有涵盖/没有任何文档C++11 并发标准库功能，例如`std::thread`、`std::atomic`和`std::async`.

这些并发特性是否比标准库的其他部分“不那么标准”？还是因为其他原因缺少文档？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T17:58:02.603

您引用的所有库确实是 C++11 标准的一部分。事实上，许多语言规则都被重新设计以描述操作在多线程环境中的工作方式（以前，规范没有指定线程如何工作的任何语义）。

我不能说为什么这些站点缺少文档，因为我不知道谁在运行它们，但是线程、原子等绝对是 C++11 的一部分。

在相关说明中，我**强烈**建议不要使用 cplusplus.com 作为参考。众所周知，过去存在一些不准确之处，而其他网站（即 cppreference.com）则更加完整和准确。

希望这可以帮助！

# twitter-bootstrap - Twitter 引导菜单不起作用

> ID：15977819
> 
> 赞同：0
> 
> 时间：2013-04-12T17:52:19.547
> 
> 标签：twitter-bootstrap, joomla

我第一次尝试使用 Twitter-Bootstrap 在 Joomla 3.0 中编写自定义模板。

[编辑]删除了网站链接[/编辑]

我所做的就是让模板的菜单正常工作。仅限首页。请忘记内页。

我认为这是因为模板似乎无法访问 javascript 的文件。

在调整窗口大小时让模板菜单正常工作的任何建议都将不胜感激。

我试过用这个：

```
 <?php
    defined('_JEXEC') or die;
    $doc = JFactory::getDocument();
    $doc->addScript('/templates/' . $this->template . '/js/main.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/jquery.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-transition.js',   'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-alert.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-modal.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-dropdown.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-scrollspy.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-tab.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-tooltip.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-popover.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-button.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-collapse.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-carousel.js', 'text/javascript');
    $doc->addScript('/templates/' . $this->template . '/js/bootstrap-typeahead.js', 'text/javascript');
    ?> 
```

我试过这个：

```
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/jquery.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-transition.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-alert.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-modal.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-dropdown.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-scrollspy.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-tab.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-tooltip.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-popover.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-button.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-collapse.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-carousel.js" />
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/bootstrap-typeahead.js" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:59:35.920

有一个错误，您可以在 chrome/firefox 控制台中看到

```
Uncaught ReferenceError: jQuery is not defined 
```

您可能没有包括 jquery。

而且

```
<link href=".... 
```

适用于 CSS 而不是 Javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:41:42.160

看到您使用的是 Joomla 3.0，加载 Bootstrap 框架的最佳方法如下：

```
JHtml::_('bootstrap.framework'); 
```

它使用更少的代码行，使用 Joomla 3.0 编码标准，并确保 jQuery 在**noConflict**模式下加载。

# filter - Drupal 视图复杂的分组过滤器

> ID：15977821
> 
> 赞同：0
> 
> 时间：2013-04-12T17:52:28.850
> 
> 标签：filter, views

我有一个数学表达式 ($field_a - $field_b)，我想为 (select-list) 创建一个公开的分组过滤器，以便我可以有效地过滤掉我的结果。

如何进行设置，以便用户根据两个字段的值获得两个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:26:09.997

为此，我最终创建了一个自定义字段处理程序。

# javascript - 如何使这段代码在 jQuery 1.4.x 中工作？

> ID：15977825
> 
> 赞同：0
> 
> 时间：2013-04-12T17:52:41.867
> 
> 标签：javascript, jquery

jQuery 1.4.x 不支持 on() 方法。有人可以告诉我如何解决此问题以使其兼容吗？

```
$(document).on({
  mouseenter: MyObj.mouseenter,
  mouseleave: MyObj.mouseleave
}, '.class'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:57:54.537

使用委托方法。

```
$(document).delegate('.class',{
  mouseenter: MyObj.mouseenter,
  mouseleave: MyObj.mouseleave
}); 
```

注意：需要 jQuery 1.4.3+

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:54:48.767

您应该使用`live`而不是`on`使其与旧版本的 jQuery 兼容。`live`始终适用于将在页面加载后创建的元素。

jQuery 1.7 弃用了 live() 方法，并且 1.9 已将其删除。它已被`on`.

但是，如果可以，最好只升级 jQuery。

不要使用`bind`，因为它提供的功能与`live`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:58:05.723

您可以将各种侦听器直接应用于 jQuery 对象，如下所示：

```
$(".class").mouseover(function() {

}).mouseout(function() {

}); 
```

... 或这个：

```
$(".class").mouseenter(function() {

}).mouseleave(function() {

}); 
```

此处提供示例：http: [//api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

# facebook-graph-api - 使用 Graph API 在 facebook 中查找共同的朋友

> ID：15977831
> 
> 赞同：0
> 
> 时间：2013-04-12T17:52:57.853
> 
> 标签：facebook-graph-api

我想找出我的两个朋友之间的共同朋友的数量。是否有可能以及我应该勾选哪些权限才能获得此访问令牌？

我在 Graph API Explorer 中使用了以下查询：

```
id1/mutualfriends/id2 
```

它返回了我和 id2 之间的共同朋友。但我想要 id1 和 id2 之间的共同朋友。id1 和 id2 都是我的朋友。如果可能，正确的查询格式是什么？

如果有人知道，请回复。

# asp.net-web-api - HttpConfiguration.EnableSystemDiagnosticsTracing 发生了什么

> ID：15977835
> 
> 赞同：6
> 
> 时间：2013-04-12T17:53:19.863
> 
> 标签：asp.net-web-api

我正在使用新的 WebTools 2012.2，并且帮助文件说将 config.EnableSystemDiagnosticsTracing 添加到您的 Global.asax。

但是，HttpConfiguration 上不存在此方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T18:53:07.283

该`EnableSystemDiagnosticsTracing`扩展是 Tracing 包的一部分。你有`Microsoft.AspNet.WebApi.Tracing`安装包吗？

还要确保有`using System.Web.Http;`命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-10T08:47:57.850

文档：[链接](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

要安装使用：

安装包 Microsoft.AspNet.WebApi.Tracing 更新包 Microsoft.AspNet.WebApi.WebHost

之后在您的项目中检查以下内容：

1.  将 dll 文件 \packages\Microsoft.AspNet.WebApi.Tracing.5.2.2\lib\net45\System.Web.Http.Tracing.dll 添加到您的项目中。
2.  使用 System.Web.Http 将以下内容添加到 WebApiConfig.cs；使用 System.Web.Http.Tracing；

和

//跟踪 config.EnableSystemDiagnosticsTracing();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T22:33:09.160

因为它是一个扩展方法，所以你需要一个 using 语句来声明扩展方法。所以在你的 Global.asax.cs 或任何你想调用 EnableSystemDiagnosticsTracing() 的地方，你需要在顶部添加这个：

```
 using System.Web.Http; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T19:03:46.833

如果您有 Visual Studio 2012 ASP.NET 和 Web Tools 2012.2，它不应该默认跟踪到使用 WebAPI 模板创建的项目的输出窗口吗？EnableSystemDiagnosticsTracing 也是如此。

# ruby - 如何使用 ruby 查找和删除重复的 mongo 文档

> ID：15977836
> 
> 赞同：1
> 
> 时间：2013-04-12T17:53:22.267
> 
> 标签：ruby, mongodb, duplicates

我在 Mongo 中有一个集合，其中包含一个特定键的重复项，我需要删除除一个之外的所有键。Map Reduce 解决方案似乎没有明确说明如何删除除一个重复项之外的所有重复项。我正在使用 Ruby，我怎样才能以某种有效的方式做到这一点？我目前的解决方案慢得令人难以置信！

我目前只是遍历重复键的数组并删除返回的第一个文档，但这仅在每个键最多有 1 个重复文档且速度非常慢的情况下才有效。

```
dupes.each do |key|
    $mongodb.collection("some_collection").remove($mongodb.collection("some_collection").find({key: key}).first)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:49:55.617

我认为您应该使用 MongoDB`ensureIndex()`删除重复项。例如，在您的情况下，您想删除重复的文档给 key `duplicate_key`，您可以这样做

```
db.duplicate_collection.ensureIndex({'duplicate_key' : 1},{unique: true, dropDups: true}) 
```

`duplicate_collection`您的重复文档所在的集合在哪里。如果有重复文档给出特定键，此操作将仅保留单个文档。

操作后，如果您认为要删除索引，只需执行`dropIndex`操作即可。详情可以搜索 mongodb 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:53:22.267

许多解决方案都建议使用 Map Reduce（它既快又好），但我在 Ruby 中实现了一个解决方案，它看起来也非常快，并且可以很容易地从每个重复集中留下一个文档。

基本上，您通过将所有重复键添加到哈希中来找到所有重复键，并且每当您在集合中找到重复键时，您将该文档的 id 添加到最后将在批量删除中使用的数组中。

```
all_keys = {}
dupes = []
    dupe_key = "some_key"

$mongodb.collection("some_collection").find.each do |doc|
   all_keys[doc[dupe_key]].present? ? dupes << doc["_id"] : asins[doc[dupe_key]] = 1
end

$mongodb.collection("some_collection").remove({_id: {"$in" => dupes } }) 
```

此方法的唯一问题是，如果无法将密钥/欺骗 ID 的总列表存储在内存中，它可能无法工作。在这一点上，map reduce 解决方案可能是最好的。

# ruby-on-rails - 将 created_at 用作查询条件时，如何调用该方法？

> ID：15977838
> 
> 赞同：1
> 
> 时间：2013-04-12T17:53:27.600
> 
> 标签：ruby-on-rails, ruby

我想做这个查询：

```
sector.posts.count(:conditions => {:created_at.month => 1..3}) 
```

但是，它返回：

> NoMethodError: :created_at:Symbol 的未定义方法“月”

但如果我`post.created_at.month`在控制台中这样做，它会返回月份的整数值。我将如何完成我要进行的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:23:19.717

在这种情况下，您可以使用 count 方法。[更多关于 sql 条件](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Conditions)的信息。

你所做的就是这样调用 count 方法：

```
sector.posts.count(conditions: 'MONTH(created_at) in (1,2,3)') 
```

或更好的方法：

```
sector.posts.where('MONTH(created_at) in (1,2,3)').count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:24:49.270

您正在尝试在查询中调用符号 :created_at 的方法。在您的控制台示例中，您正在针对 ActiveRecord 对象调用该方法。

如果您尝试从某个日期范围内获取结果，请使用 BETWEEN 查询（​​至少在[Mysql](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)或[Postresql](http://www.postgresql.org/docs/8.2/static/functions-comparison.html)上）并设置该范围的开始日期和结束日期。

```
sector.posts.where(["'posts.created_at' BETWEEN ? AND ?", Date.new(2013,1,1), Date.new(2013,3,31)]) 
```

如果您需要动态查询，您还可以使用 begin_of 日期方法，例如[begin_of_quarter 。](http://api.rubyonrails.org/classes/Date.html#method-i-beginning_of_quarter)他们非常强大。

# android - 为什么这些 TD 元素中的字体会以不同的大小呈现？

> ID：15977840
> 
> 赞同：2
> 
> 时间：2013-04-12T17:53:38.753
> 
> 标签：android, html, browser

这是一个带有 2 个 TD 的简单表格。 [http://z5h.github.io/broken_render/broken.html](http://z5h.github.io/broken_render/broken.html)

在 Android 上最近的 Chrome / Firefox 上，它们以非常不同的大小呈现。我不清楚为什么。

在桌面浏览器上，它们没有。

减少第一个 td 中的文本数量可以解决问题。指定每个元素样式不会更改字体大小。例如 [http://z5h.github.io/broken_render/broken-styled.html](http://z5h.github.io/broken_render/broken-styled.html)

为什么是这样？

代码是

```
<html>
  <head>
    <meta content='text/html;charset=utf-8' http-equiv='Content-Type'> 
  </head>
  <body>
    <table>
      <tr>
        <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.
        </td>
      </tr>
      <tr>
        <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
        </td>
      </tr>
    </table>    
  </body>
</html> 
```

这是在 Nexus 4 上完全最新的 Chrome 上的样子。在 Firefox 上也有同样的问题。

![例子](https://i.stack.imgur.com/zzeRC.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:58:21.357

您看到的是 Chrome for Android 的“有用”字体增强功能。[没有保证可以禁用它](https://stackoverflow.com/questions/13430897/how-to-override-font-boosting-in-mobile-chrome)。

如果您在普通的 Android 浏览器（或任何使用 WebView 的浏览器）中打开页面，您将看不到此效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T16:01:12.697

大多数移动浏览器会尝试检测页面的主要内容并将其放大，这样用户就不必在没有明确的移动设计的情况下放大页面，这称为“文本膨胀”，由[text-size-adjust](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust) CSS控制大多数情况下的财产。

从上面的链接中窃取的语法示例：

```
text-size-adjust: none               /* text is never inflated */
text-size-adjust: auto               /* text may be inflated */
text-size-adjust: <percentage>       /* text may be inflated of this exact proportion */ 
```

请注意，text-size-adjust 属性不是标准化的，因此**可能**必须以`-webkit-`、`-moz-`和其他浏览器供应商的前缀作为前缀。

另外，不要与**字体大小**调整相混淆。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T21:56:08.133

我在手持设备上不规则地调整文本大小时遇到​​了类似的问题。我通过在里面添加以下三行来解决它`<head></head>`。

```
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

在此处阅读有关视口元标记的更多信息：http: [//davidbcalhoun.com/2010/viewport-metatag](http://davidbcalhoun.com/2010/viewport-metatag)
希望这对您有所帮助。
祝你好运！

# google-chrome-extension - Chrome 扩展程序不起作用（权限错误？）

> ID：15977842
> 
> 赞同：0
> 
> 时间：2013-04-12T17:53:49.553
> 
> 标签：google-chrome-extension, permissions, rss

感谢您抽时间阅读。这是我的扩展文件夹的目录。

这是清单代码：

```
{
  "manifest_version": 2,
  "name": "Technobuffalo Stories",
  "description": "Your Description about Extension goes here",
  "version": "1.0",
  "content_scripts": [ {
      "js": [ "popup.js" ],
      "matches": [ "http://feeds.feedburner.com/*" ]
   } ],
  "permissions": [ "http://feeds.feedburner.com/*" ],
  "browser_action": {
    "default_icon": "icon_16.jpeg",
    "default_popup": "popup.html"
  }
} 
```

这是 popup.html ：

```
<html>
<head>
    <title>Technobuffalo Stories
    </title>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="popup.js"></script>  
</head>
<body>
    <div id="feed" style="background-color:orange;height:500px;width:500px;" ></div>
</body>
</html> 
```

最后是 popup.js ：

google.load("feeds", "1");

```
function initialize() {
  var feed = new google.feeds.Feed("http://feeds.feedburner.com/technobuffalo/rss?format=xml");
  feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var div = document.createElement("div");
        div.appendChild(document.createTextNode(entry.title));
        container.appendChild(div);
      }
    }
  });
}
google.setOnLoadCallback(initialize); 
```

当我按原样打开 popup.html 文件时，会显示所需的结果，但是当我加载 Chrome 扩展程序时，只能看到 div 的背景颜色。我设置的权限有什么问题还是其他问题？

谢谢，亚什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:14:38.177

您必须将以下行添加到*manifest.json*才能使用来自*www.google.com*的资源：

```
"content_security_policy": "script-src 'self' https://www.google.com; object-src 'self'" 
```

正如 Rob W 已经指出的，这是清单版本 2 中引入的一项安全功能。

# python - 从嘈杂的字符串中提取文本.. python

> ID：15977843
> 
> 赞同：0
> 
> 时间：2013-04-12T17:53:51.247
> 
> 标签：python

我有一些 html 文档，我想从中提取一个非常特殊的文本。现在，此文本始终位于

```
<div class = "fix">text </div> 
```

现在，有时会发生什么......还有其他开放的div......就像：

```
 <div class = "fix"> part of text <div something> other text </div> some more text </div> 
```

现在..我想提取所有对应的文本

```
 <div class = "fix">                     </div> markups?? 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:03:05.493

我会使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)库。它们是为此而构建的，只要您的数据是正确的 html，它应该可以准确找到您要查找的内容。他们有相当好的文档，而且非常简单，即使对于初学者也是如此。如果您的文件位于无法访问直接 html 的网络上，请使用 urllib 获取 html。

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)
soup.find({"class":"fix"}) 
```

如果有多个项目，请改用 find_all。这应该给你你正在寻找的东西（大致）。

编辑：固定示例（类是关键字，因此您不能使用通常的（attr="blah"）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:02:34.807

这是一个非常简单的解决方案，它使用非贪婪的正则表达式来删除所有 html 标签：

```
import re
s =  "<div class = \"fix\"> part of text <div something> other text </div> some more text </div>"
s_text = re.sub(r'<.*?>', '', s) 
```

那么这些值是：

```
print(s)
<div class = "fix"> part of text <div something> other text </div> some more text </div>
print(s_text)
 part of text  other text  some more text 
```

# matlab - 在 Matlab GUI 中使用轴

> ID：15977846
> 
> 赞同：0
> 
> 时间：2013-04-12T17:54:14.623
> 
> 标签：matlab, matlab-figure, matlab-guide

我的兴趣是在轴上显示图像，我有 2 个 GUI 的 input_window 和 fig5。在我以前的 GUI 中，我使用一个轴来显示图像，使用`uigetfile`,

```
axes(handles.axes1);
imshow(fname); 
```

现在通过按下`pushbutton`第一个 GUI，它会切换到 fig5 GUI，在这里我使用了这么多轴来显示多个图像，我还想`fname`在一个轴上显示图像，它应该会自动显示在 fig5 GUI 中。为此，我在`Fig5_OpeningFcn`

```
axes(handles.axes1);
imshow(fname); 
```

我收到类似的错误`Undefined function or variable 'fname'`。请帮助我如何在 GUI 之间传递变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:02:38.383

你可以使用`setappdata`and `getappdata`，像这样：

```
% In the first figure:
setappdata(0, 'fname', fname);
% Show the second figure...

% In the second figure:
fname = getappdata(0, 'fname');
% Clear the appdata
setappdata(0, 'fname', '');
% Do stuff with fname 
```

# html - 导航菜单屏幕尺寸问题

> ID：15977855
> 
> 赞同：0
> 
> 时间：2013-04-12T17:55:00.010
> 
> 标签：html, css

我正在使用导航菜单。它没有下拉菜单，只是一个普通的老式水平导航菜单。我遇到的问题是，当页面加载到 1280 x 768 屏幕上时，菜单文本看起来明显更大，这导致菜单项被下推到下一个级别。在我的 1600 x 900 屏幕上，一切看起来都很好。我在两台 PC 之间使用 Firefox。一台 PC 是 Windows 7，一台是 Windows Xp。我认为它可能是 Cleartype，但禁用它并没有解决问题。文本间距是另一个想法，但设置也不能解决问题。如果需要，我可以发布代码，但我觉得我已经排除了这种可能性。

```
 <div class="wrapper clearfix">
<nav>
    <ul id="nav" class="sf-menu">
        <li ><a href="index.php">Home</a></li>
        <li><a href="loans.php">Loans</a></li>  
        <li><a href="checkings.php">Checkings</a></li>
        <li><a href="credit.php">Credit Cards</a></li>
        <li><a href="debit.php">Debit Cards</a></li>
        <li><a href="savings.php">Savings</a></li>
        <li><a  href="member_ed.php">Member Education &amp; Calulators</a></li>
        <li><a href="about.php">About Us</a></li>
        <li><a href="vehicles.php">Vehicles &amp; Homes</a></li>
        <li><a id="last_item" href="">Mortgages</a></li>
    </ul>

</nav>
</div> 
```

CSS

```
 nav{
margin-top: 0px;
height: 30px;
 }

 nav a{
text-decoration: none;
 }

 #nav li{
float:left;
}

 #nav>li>a{
font-family:'Yanone Kaffeesatz', Arial, sans-serif;
font-size: 1.35em;
letter-spacing:.05em;
 }
 .wrapper {
width: 940px;
-webkit-text-size-adjust: 100%; /* Stops Mobile Safari from auto-adjusting font-sizes */ 
```

}

单词之间没有边距，因此它实际上应该是相同的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T01:01:36.803

万一有人遇到这个问题。这确实是我使用的网络字体的一个问题。在不同的尺寸下，它有不同的间距。当我更改字体时，我没有遇到问题。

# tsql - SQL 阶乘 ErlangC

> ID：15977857
> 
> 赞同：0
> 
> 时间：2013-04-12T17:55:08.080
> 
> 标签：tsql, sqldatatypes, factorial, largenumber

我正在尝试在 ErlangC 函数中使用这个阶乘。但是我的代理数量可以达到 300 多个。有了这个，你可以获得相当大的数字。例如. [_](http://www.wolframalpha.com/input/?i=315!) 我的问题是如何存储和计算这些数字？本机 SQL 有没有办法。我知道我可以去 CLR 做一个外部函数。但为了简单起见，我想保留这个原生 SQL。真的想从[这里](http://www.mitan.co.uk/erlang/elgcmath.htm)到 9 点和 10 点。但是当我解决这个问题时，我会完成的。提前感谢您提供的任何帮助。

```
ALTER FUNCTION [dbo].[Factorial] ( @iNumber int )
    RETURNS float
    AS
    BEGIN

    Declare @i float
        IF @iNumber <= 1
            SET @i = 1    
        ELSE
            SET @i = @iNumber
            WHILE @iNumber > 1
            BEGIN

            SET @i = @i * (@iNumber - 1)
                Set @iNumber = @iNumber -1 
            END

    RETURN (@i)
    END 
```

ErlangC代码如下：

```
ALTER FUNCTION [AMS].[ErlangC]
(
    -- Add the parameters for the function here
    @m float  -- Number of Agents
    ,@u float -- Traffic floatensity
)
RETURNS float
AS
BEGIN
--Source http://www.mitan.co.uk/erlang/elgcmath.htm Number 6

    -- Return Variable
    DECLARE @Prob Float -- Probability of Call not being answered immediately and having to wait.

    -- Variables
    Declare @Numerator Float -- Top of Equation
    Declare @Denominator Float -- Bottom of Equation
    Declare @Summation float -- Summation part of Denominator
    Declare @k float    -- increment for summation

    --Calculate Numerator

    SET @Numerator = Power(@u,@m)/dbo.Factorial(@m) 

    -- Start Summation with k starting at 0.
    SET @k = 0
    SET @Summation = 0

    While @k < @m-1
    Begin
        SET @Summation = @Summation + Power(@u,@k)/dbo.Factorial(@k)
        SET @k = @k +1
    End

    --Calculate denominator

    SET @Denominator = Power(@u,@m)/dbo.Factorial(@m) + (1-@u/@m)*@Summation

    SET @Prob = @Numerator/@Denominator

    -- Return the result of the function
    RETURN @Prob

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:05:58.280

好吧，我找到了别人的代码并且它可以工作......但我不知道为什么......基本上，他们不是做阶乘，而是使用对数一起做幂和阶乘以获得相同的数字，就好像你以指数方式乘以数字一样.

```
ALTER FUNCTION [dbo].[PowerFactorial] ( @m float,  @u float)
RETURNS float
AS
BEGIN

Declare @counter float --counter
Declare @total float -- return value

SET @counter = 1
SET @total = 0

WHILE @counter <= @u
BEGIN

SET @total = @total + Log(@m/@counter)
    Set @counter= @counter + 1

END

RETURN Exp(@total)
END 
```

这会将 ErlangC 更改为此。

```
ALTER FUNCTION [AMS].[ErlangC]
(
    -- Add the parameters for the function here
    @m float  -- Number of Agents
    ,@u float -- Traffic intensity
)
RETURNS float
AS
BEGIN
--Source http://www.mitan.co.uk/erlang/elgcmath.htm Number 6

    -- Return Variable
    DECLARE @Prob Float -- Probability of Call not being answered immediately and having to wait.

    -- Variables
    Declare @Numerator Float -- Top of Equation
    Declare @Denominator Float -- Bottom of Equation
    Declare @Summation float -- Summation part of Denominator
    Declare @k float    -- increment for summation

    --Calculate Numerator

    SET @Numerator = dbo.PowerFactorial(@u,@m)  

    -- Start Summation with k starting at 0.
    SET @k = 0
    SET @Summation = 0

    While @k < @m-1
    Begin
        SET @Summation = @Summation + dbo.PowerFactorial(@u,@k)
        SET @k = @k +1
    End

    --Calculate denominator

    SET @Denominator = dbo.PowerFactorial(@u,@m) + (1-@u/@m)*@Summation

    SET @Prob = @Numerator/@Denominator

    -- Return the result of the function
    RETURN @Prob

END 
```

如果有人对该功能的工作原理有任何见解，请发表评论。谢谢..

# c# - 对 C# 服务器的 AS3 套接字和策略文件请求

> ID：15977859
> 
> 赞同：5
> 
> 时间：2013-04-12T17:55:21.357
> 
> 标签：c#, actionscript-3, flash, sockets, policy

这个问题快把我逼疯了！我读了*了 Stack Overflow 上的所有*问题，但我仍然陷入困境。

我的 as3 程序运行良好，但是当我完成它并将其放到服务器上时，它开始请求这个著名的策略文件。

AS3 脚本：

```
socket.addEventListener(Event.CONNECT, onConnect);
socket.addEventListener(Event.CLOSE, onClose);
socket.addEventListener(IOErrorEvent.IO_ERROR, onError);
socket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecError);
socket.addEventListener(ProgressEvent.SOCKET_DATA, onResponse);

socket.connect( MYHOST, 4242 ); 
```

C#服务器代码：

```
TcpListener serverSocket = new TcpListener(4242);
TcpClient clientSocket = default(TcpClient);
serverSocket.Start();
clientSocket = serverSocket.AcceptTcpClient();
NetworkStream networkStream = clientSocket.GetStream();
StreamReader read = new StreamReader(networkStream, Encoding.UTF8);
StreamWriter write = new StreamWriter(networkStream, Encoding.UTF8);

response = read.ReadLine();

if (response.Contains("policy"))
{
 write.Write("<?xml version=\"1.0\"?><cross-domain-policy><allow-access-from domain=\"*\" to-ports=\"*\" /></cross-domain-policy>\0");
 write.Flush();
 clientSocket.Close();
 return;
} 
```

因此，当 AS3 在默认端口 843（或类似端口）上找不到策略时，它会直接在与连接相同的套接字上询问。我的 C# 代码看到请求和回复，之后 AS3 脚本关闭连接（这没关系），但它永远不会重新连接。

我试图在connect()**之前把它放在 AS3 中：**

```
Security.loadPolicyFile( "xmlsocket://myhost.com:4242"); 
```

但是当我做`connect()`它只会卡住并且从不请求策略文件。关闭 AS3 应用程序后，我的服务器会看到请求，但连接已关闭。这就像客户忘记进行冲洗一样。

有人能告诉我如何正确解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:21:13.750

3天后，我终于发现了代码中的错误。

50分的赏金，没有人注意到它:-(

很傻，新手错误：

当 Flash 应用程序请求策略文件时，不发送换行符，而是发送终止符 '\0'。

我正在阅读 read.ReadLine(); 一直读到'\ n'，所以它卡住了。

谢谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:35:43.897

我遇到了和你类似的问题。事实是，在将 Flash 应用程序运行到 C# 中时，它会丢失许多端口与标准不同的请求。解决方案是不在 Flash 中使用此类请求。所以你必须把它们放到C#中，并用Flash的ExternalInterface.call调用这个函数。请求完成后，您的 C# 必须调用 Flash 函数，将 req 的答案作为参数传递。

# ubuntu-12.10 - avconv：如何连接一堆flv文件（h264编码视频，adpcm_swf编码音频）？

> ID：15977861
> 
> 赞同：4
> 
> 时间：2013-04-12T17:55:25.060
> 
> 标签：ubuntu-12.10, avconv

我想连接一些 .flv 文件（每个文件都是使用相同设置编码的 h264/adpcm_swf）。理想情况下，我想在文件之间添加类似剪辑的内容——黑屏 1 或 2 秒就足够了。

我试过使用 avconv 的“concat”-protocol，像这样：

```
avconv -i concat:1.flv\|2.flv\|3.flv result.flv 
```

这给了我一个结果，它只包含 1.flv 的内容，并且似乎使用默认的 flv 设置重新编码。这可以通过提供适当的输出选项来处理，但理论上应该可以在没有太多重新编码的情况下连接文件？

我的 avconv 版本：

```
avconv version 0.8.6-6:0.8.6-0ubuntu0.12.10.1, Copyright (c) 2000-2013 the Libav developers
  built on Apr  2 2013 17:02:16 with gcc 4.7.2
avconv 0.8.6-6:0.8.6-0ubuntu0.12.10.1
libavutil    51\. 22\. 1 / 51\. 22\. 1
libavcodec   53\. 35\. 0 / 53\. 35\. 0
libavformat  53\. 21\. 1 / 53\. 21\. 1
libavdevice  53\.  2\. 0 / 53\.  2\. 0
libavfilter   2\. 15\. 0 /  2\. 15\. 0
libswscale    2\.  1\. 0 /  2\.  1\. 0
libpostproc  52\.  0\. 0 / 52\.  0\. 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T10:52:22.763

您可以将 ffmpeg 用于此连接电影。首先通过运行检查您是否安装了 ffmpeg `ffmpeg`。如果第一行以“FFmpeg 开发人员”结尾，那就没问题了。如果是“Libav 开发者”，那么 ffmpeg 暗中是 avconv 的别名（在 Ubuntu 上就是这种情况）。如果您没有 ffmpeg 并且真正的 ffmpeg 不在您的存储库中，则您必须自己编译 ffmpeg。

现在您已经拥有了真正的 ffmpeg，请使用以下文本创建文件 inputs.txt：

```
file 1.flv
file 2.flv
file 3.flv 
```

并运行：

```
ffmpeg -f concat -i inputs.txt -c copy result.flv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T09:06:57.963

另一种使用 ffmpeg 连接文件而不需要将所有文件名存储在 txt 文件中的方法如下：

```
ffmpeg -f concat -i <(for f in *.flv; do echo "file '$f'"; done) -c copy result.flv 
```

您可以将 *.flv 替换为您想要的任何文件类型。在这种情况下，不要忘记更改结果文件的扩展名。

# php - 在选择表单字段中选择不会突出显示选定的选项

> ID：15977862
> 
> 赞同：0
> 
> 时间：2013-04-12T17:55:25.327
> 
> 标签：php, html

我有以下 PHP 函数：

```
function pick ($fieldname, $optionvalues, $defvalue=0, $size=0)
{

    $checked = $defvalue;
    echo "<select name=\"$fieldname\" size=\"$size\">\n";

    foreach ($optionvalues as $value)
    echo " <option value = \"$value\"  ".
    (($value == $checked) ? ' selected ' : '') . "> $value </option>\n";
    echo "</select>";
} 
```

当我用这个调用它时：

```
$vals = array('a','b','c','d','e');
pick ('pick2', $vals, 'c'); 
```

它不会突出显示`c`，即使在页面源中，它被标记为选中。我的页面来源是：

```
<select name="pick2" size="0">
<option value = "a"  > a </option>
<option value = "b"  > b </option>
<option value = "c"   selected > c </option>
<option value = "d"  > d </option>
<option value = "e"  > e </option>
</select> 
```

如果我将呼叫功能更改为：

```
pick('p',$vals,'c') 
```

它按预期工作。有人可以解释我的功能有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:58:44.437

更改此行

```
 (($value == $checked) ? ' selected ' : '') . "> $value </option>\n"; 
```

至

```
 (($value == $checked) ? ' selected="selected" ' : '') . "> $value </option>\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:06:39.973

**HTML 在 HTML 5 标准下有效**。这是让你耳目一新的方式。如果您单击刷新按钮或按 F5，浏览器将记住您的选择。您必须再次“转到”该 URL（即单击地址栏并按 Enter）

```
<?php
function pick ($fieldname, $optionvalues, $defvalue='', $size=0){
    $checked = $defvalue;
    echo '<select name="'.$fieldname.'">';
    foreach($optionvalues as $value){
        echo '<option value="'.$value.'"'.($checked==$value?' selected':'').'>'.$value.'</option>';
    }
    echo '</select>';
}

$vals = array('a','b','c','d','e');
pick ('pick2', $vals, 'c'); 
```

**为什么浏览器会记住您的选择？** 这是大多数浏览器内置的选项（通常在选项中保存表单历史记录）。禁用此功能应确保您始终将表单数据重置为其“原始状态”。这样做的问题是它将表单数据留在最终用户手中，这是不好的。

通过使用属性可以确保它始终使用`selected`not the ：`last remembered``autocomplete`

`<select autocomplete="off">`

# database - 关于使用 mod_rewrite 清理 URL 的问题

> ID：15977866
> 
> 赞同：1
> 
> 时间：2013-04-12T17:55:34.233
> 
> 标签：database, .htaccess, url

我想在 .htaccess 中使用 mod_rewrite 重写 URL，例如[http://www.companysite.com/gallery.php?galid=1&desc=blah%20blah%20blah](http://www.companysite.com/gallery.php?galid=1&desc=blah%20blah%20blah)到[http://www.companysite.com/画廊/1/blah-blah-blah](http://www.companysite.com/gallery/1/blah-blah-blah)

**使用Loren**给我 的粗略代码：

```
#Perform a 301 redirect from the old URL to the new URL  
RewriteRule ^gallery.php?galid=([0-9]+)&desc=(.*) http://www.companysite.com/gallery/$1/$ [R=301,L]  

#Rewrite new URL to the proper internal URL
RewriteRule ^gallery/([0-9]+)/(.*)$ ^gallery.php?galid=$1&desc=$2  [L] 
```

如果查询字符串为`desc`is `blah%20blah%20blah`，将如何重写？理想情况下，我想`desc`被改写为blah-blah-blah。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:00:46.740

您可以仅使用 htaccess 文件执行此操作。

您应该更改站点中的链接以反映新的重写 URL，并为指向新 URL 的旧 URL 放置 301 重定向

对于已经被 google 索引的页面，您可以执行从旧 URL 到新 URL 的 301 重定向 - 这将告诉 google 旧 url 已更新为新重写的 url，这应该可以防止您丢失排名/索引那个页面

如果有人点击旧网址的链接，它不会自动被重写，除非你有 301 重定向，然后它会自动将用户重定向到正确重写的 URL

请让我知道我是否可以再具体说明上述领域。

一旦您创建了新的 URL 结构并设置了 301 以将旧 url 指向新 url，我建议您向 google 提交 OLD 站点地图，他们将抓取旧 url，检测 301 并使用您新重写的 URL 更新索引- 我过去已经做过一百万次了，而且效果很好

**301 旧 URL 到新 URL**

这是通过 htaccess 文件进行的非常简单的 301 重定向示例

```
RewriteRule ^contact_us\.php$ http://www.mydomain.com/contact_us.html [R=301] 
```

**使用上面的链接重写的示例**

这是一个快速而肮脏的示例，首先对旧 url 执行 301，然后将新 url 重写为内部 url 结构 - 快速改进 - 如果有任何错误，请道歉

```
#Perform a 301 redirect from the old URL to the new URL
RewriteRule ^gallery.php?galid=([0-9]+)&desc=(.*) http://www.mydomain.com/gallery/$1/$2 [R=301,L]

#Rewrite new URL to the proper internal URL
RewriteRule ^gallery/([0-9]+)/(.*)$ ^gallery.php?galid=$1&desc=$2  [L] 
```

**记住**

重写`/gallery.php?galid=1&desc=blah%20blah%20blah`将`/gallery/1/blah-blah-blah`需要您考虑您的空间`blah blah blah`- 如果您重写，`blah-blah-blah`那么当您收到查询字符串`desc`时，它将收到`blah-blah-blah`不同于`blah blah blah`

明白我的意思了吗？

**资源**

**[这是一篇关于 URL 重写和重定向的好文章](http://searchengineland.com/url-rewrites-and-redirects-part1-16574)**

# java - 泛型类的类型特定构造函数

> ID：15977867
> 
> 赞同：2
> 
> 时间：2013-04-12T17:55:36.763
> 
> 标签：java, generics

我有以下通用类：

```
public class DropdownItem<V, D> {

    private V value;
    private D display;

    public DropdownItem(V value, D display) {
        this.value = value;
        this.display = display;
    }

    public V getValue() {
        return value;
    }

    public void setValue(V value) {
        this.value = value;
    }

    public D getDisplay() {
        return display;
    }

    public void setDisplay(D display) {
        this.display = display;
    }
} 
```

如何为特定类型创建构造函数？

例如，

```
public DropdownItem(CustomClass custom) {
    this(custom.getFoo(), custom.getBar());
} 
```

或者

```
public DropdownItem(CustomClass custom) {
    this.value = custom.getFoo();
    this.display = custom.getBar();
} 
```

这些解决方案都不起作用。在实现泛型类时它确实可以做到这一点：

```
DropdownItem<Integer, String> myItem = new DropdownItem<Integer, String>(custom.getFoo(), custom.getBar()); 
```

但是，我想在泛型类中包含一个构造函数来完成此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:02:06.490

它看起来像一个工厂方法，除了现有的构造函数，可以帮助你：

```
public static DropdownItem<Integer, String> getCustomClassInstance(CustomClass custom)
{
    return new DropdownItem<Integer, String>(custom.getFoo(), custom.getBar());
} 
```

它不能是另一个构造函数。您的类是泛型的，因此任何构造函数都必须处理泛型类型`V`并将`D`它们分配给`value`and `display`。它不能是此泛型类的构造函数中的特定类型。

# c++ - 什么是风寒公式的程序化表示？

> ID：15977869
> 
> 赞同：3
> 
> 时间：2013-04-12T17:55:43.537
> 
> 标签：c++, c, weather

我正在尝试以公制确定风寒。我[从 BBC 找到了一些很好的信息](http://news.bbc.co.uk/weather/hi/news/newsid_8506000/8506818.stm)（它被称为“感觉温度”），但我不太清楚如何将其转换为 C 代码。

这是他们的计算信息：

```
T(wc) = 13.12 + 0.6215T - 11.37V**0.16 + 0.3965TV**0.16 
```

有了这些笔记

> （其中 T(wc) 是基于摄氏温度的风寒指数，T 是以°C 为单位的空气温度，V 是在 10 m（33 英尺，标准风速计高度）处测量的空气速度，以 km/h 为单位。

所以我创建了这个，但我得到的输出有时是负面的

```
float feelslike = 13.12 + 0.6215 * temperature - 11.37 * windSpeed  * 0.16 + 0.3965 * temperature * windSpeed * 0.16; 
```

也许我错过了什么？我假设当它有“0.6215T”时，它的意思是“0.6215 * T”，但我也不确定如何解释等式中的双“*”。

样本输出：

```
feelslike 15.126314 temp 19.719999 wind 18.040001
feelslike 15.126314 temp 19.719999 wind 18.040001
feelslike 14.308528 temp 20.070000 wind 20.670000
feelslike 14.308528 temp 20.070000 wind 20.670000
feelslike 12.485908 temp 20.049999 wind 23.930000
feelslike 12.485908 temp 20.049999 wind 23.930000
feelslike 9.340910 temp 19.450001 wind 27.110001
feelslike 9.340910 temp 19.450001 wind 27.110001
feelslike 5.497787 temp 18.330000 wind 28.969999
feelslike 5.497787 temp 18.330000 wind 28.969999
feelslike 2.776235 temp 16.740000 wind 27.400000
feelslike 2.776235 temp 16.740000 wind 27.400000
feelslike 0.058707 temp 14.950000 wind 25.670000
feelslike 0.058707 temp 14.950000 wind 25.670000
feelslike -1.787689 temp 13.130000 wind 23.389999
feelslike -1.787689 temp 13.130000 wind 23.389999
feelslike -1.408279 temp 12.460000 wind 21.650000
feelslike -1.408279 temp 12.460000 wind 21.650000
feelslike -0.960956 temp 11.810000 wind 20.020000
feelslike -0.960956 temp 11.810000 wind 20.020000
feelslike -1.235470 temp 11.550000 wind 19.820000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:00:03.387

```
T(wc) = 13.12 + 0.6215T - 11.37V**0.16 + 0.3965TV**0.16 
```

方法：

```
T(wc) = 13.12 + 0.6215*T - 11.37*pow(V,0.16) + 0.3965*T*pow(V,0.16) 
```

在 C/C++ 中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T17:59:23.530

`**`通常意味着“提升到权力”。您可以[`pow`在 math.h](http://www.cplusplus.com/reference/cmath/pow/)中使用。例如：

```
pow(windSpeed, 0.16) 
```

您的完整计算应该是：

```
float feelslike = 13.12 + 0.6215 * temperature - 
                  11.37 * pow(windSpeed, 0.16) + 
                  0.3965 * temperature * pow(windSpeed, 0.16); 
```

别忘了`#include <math.h>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:59:16.100

也许我疯了，但你不能有负数吗？它只是意味着感觉就像它在冰点以下？

# java - 如何在 Java 中阅读 äöüß？

> ID：15977875
> 
> 赞同：-3
> 
> 时间：2013-04-12T17:56:37.713
> 
> 标签：java

```
 import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Set;

public class Test {

    List<String> knownWordsArrayList = new ArrayList<String>();
    List<String> wordsArrayList = new ArrayList<String>();
    List<String> newWordsArrayList = new ArrayList<String>();
    String toFile = "";

    public void readKnownWordsFile() {
        try {
            FileInputStream fstream2 = new FileInputStream("knownWords.txt");

            BufferedReader br2 = new BufferedReader(new InputStreamReader(fstream2, "UTF-8"));
            String strLine;
            while ((strLine = br2.readLine()) != null) {
                knownWordsArrayList.add(strLine.toLowerCase());
            }
            HashSet h = new HashSet(knownWordsArrayList);
            // h.removeAll(knownWordsArrayList);
            knownWordsArrayList = new ArrayList<String>(h);
            // for (int i = 0; i < knownWordsArrayList.size(); i++) {
            // System.out.println(knownWordsArrayList.get(i));
            // }
        } catch (Exception e) {
            // TODO: handle exception
        }

    }

    public void readFile() {
        try {
            // Open the file that is the first
            // command line parameter
            FileInputStream fstream = new FileInputStream("Smallville 4x02.de.srt");

            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

            String strLine;

            String numberedLineRemoved = "";
            String strippedInput = "";
            String[] words;
            String trimmedString = "";
            String temp = "";
            // Read File Line By Line
            while ((strLine = br.readLine()) != null) {
                temp = strLine.toLowerCase();
                // Print the content on the console
                numberedLineRemoved = numberedLine(temp);
                strippedInput = numberedLineRemoved.replaceAll("\\p{Punct}", "");
                if ((strippedInput.trim().length() != 0) || (!strippedInput.contains("")) || (strippedInput.contains(" "))) {
                    words = strippedInput.split("\\s+");
                    for (int i = 0; i < words.length; i++) {
                        if (words[i].trim().length() != 0) {
                            wordsArrayList.add(words[i]);
                        }
                    }
                }
            }

            HashSet h = new HashSet(wordsArrayList);
            h.removeAll(knownWordsArrayList);
            newWordsArrayList = new ArrayList<String>(h);

            // HashSet h = new HashSet(wordsArrayList);
            // wordsArrayList.clear();
            // newWordsArrayList.addAll(h);

            for (int i = 0; i < newWordsArrayList.size(); i++) {
                toFile = newWordsArrayList.get(i) + ".\n";
//              System.out.println(newWordsArrayList.get(i) + ".");
                System.out.println();
            }

            System.out.println(newWordsArrayList.size());
            // Close the input stream
            in.close();
        } catch (Exception e) {// Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    }

    public String numberedLine(String string) {
        if (string.matches(".*\\d.*")) {
            return "";
        } else {
            return string;
        }
    }

    public void writeToFile() {
        try {
            // Create file
            FileWriter fstream = new FileWriter("out.txt");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write(toFile);
            // Close the output stream
            out.close();
        } catch (Exception e) {// Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    }

    public static void main(String[] args) {
        Test test = new Test();
        test.readKnownWordsFile();
        test.readFile();
        test.writeToFile();

    }

} 
```

如何从文件中读取äöüß？string.toLowercase() 也会正确处理这些吗？当我去打印包含任何äöüß的单词时，我怎样才能正确打印这个单词？当我打印到控制台时，我得到 AuÃŸerdem weiÃŸ for Außerdem weiß 我该如何解决这个问题？

我试过：

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

但现在我得到了 aufkl?ren 而不是 aufklären 并且它在其他地方也搞砸了。

更新了代码以查看它是否会正确打印在文件上，但我只是在文件中得到一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:36:00.067

您需要使用用于创建文件的字符集来读取文件。如果您在 Windows 机器上，那可能是 cp1252。所以：

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "Cp1252")); 
```

如果这不起作用，大多数文本编辑器都能够告诉您给定文档使用什么编码。

# json - jquery 1.9 .ajax() 数据类型默认更改？

> ID：15977876
> 
> 赞同：5
> 
> 时间：2013-04-12T17:56:41.137
> 
> 标签：json, string, jquery, return-type

给定一个 ajax 调用，例如：

```
$.ajax(
{
    url:"MyWebService.blah",
    data: {"data":"awesome"},
    success : function(responseText)
    {
       var myJsonObj = $.parseJSON(responseText);
       //do stuff with myJsonObj
    }
}); 
```

这工作正常。我今天将 jQuery 更新到 1.9（我在 1.6 上使用了一段时间）作为 Safari 突然不支持各种切换功能的可能修复（关于 eventLayer.X 的东西不再支持），现在我所有的 ajax 调用都抛出了以下javascript错误：

```
Uncaught Syntax Error: Unexpected token o 
```

经过一些研究和测试，我发现上面代码中的“responseText”现在是一个 JSON 对象，而不是字符串。所以这个错误是有道理的，但我正试图解决这个问题。jQuery 真的改变了默认返回类型吗？我检查了文档：

```
http://api.jquery.com/jQuery.ajax/ 
```

并且 dataType 默认为“智能猜测”。我可以看到这可能很方便，但我也不喜欢它。

所以这是我的问题：

1.  这是 jQuery 的一个新的（ish）变化吗？
2.  是 1.9 版做到了这一点，还是以前是这样的，我是一个一直在使用 1.6 的化石？
3.  有什么建议可以处理这个问题以及我的代码“面向未来”吗？

这是一个非常根本的变化，会影响很多代码。我将检查我的代码并删除任何将我返回的数据解析为 JSON 的实例，但这整件事有点令人不安。我没有指定数据类型是不是弄错了？我认为强制执行 dataType 而不是依赖默认值是一个好习惯，但是......哇。我是独自一人，还是 jQuery 的改变有点冒昧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T18:01:24.067

如果没有设置数据类型，jQuery 会根据返回的内容自动检测数据类型。很可能 1.9 只是改进了该检测以正确检测您以 json 形式返回的内容。最好始终提供数据类型以确保您始终获得一致的结果。

# android - 将参数传递给相机活动

> ID：15977879
> 
> 赞同：2
> 
> 时间：2013-04-12T17:56:45.047
> 
> 标签：android, android-activity, android-camera-intent

我参考了几篇帖子将参数传递给相机活动，但没有用。下面是我的代码。

```
protected void onCreate(Bundle savedInstanceState) {    
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_photocapture);
        ib = (ImageButton)findViewById(R.id.clickme);
        ib.setOnClickListener(new View.OnClickListener() {      
            @Override
            public void onClick(View arg0) {
                 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                 cameraIntent.putExtra("s", 10);
                 startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
            }
        });
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_PIC_REQUEST && resultCode == RESULT_OK) {
            Bundle b = getIntent().getExtras();
            String s = b.getString("s");//(String)data.getExtras().get("s");
            Toast.makeText(getApplicationContext(), s, Toast.LENGTH_SHORT).show();
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ib.setImageBitmap(photo);
        }  
    } 
```

但我无法成功通过它们。已经能够成功的人，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:10:26.700

您将参数设置为相机意图，然后从另一个活动中询问参数。这不对。如果您想将特定设置参数发送到相机活动，请阅读此文档：

[使用安卓相机](http://developer.android.com/guide/topics/media/camera.html)

如果您不需要将设置参数传递给相机活动，那么您在当前活动中创建全局变量并在 onActivityResult 方法中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:27:59.780

您好，感谢您的回复，我在 requestCode 中添加了我的参数，并在接收方收到并继续处理。谢谢回复！

# android - 卡在“Is Library”和“cannot creake *.apk file”之间

> ID：15977882
> 
> 赞同：0
> 
> 时间：2013-04-12T17:57:08.027
> 
> 标签：android, android-maps-v2

[问题是我从http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/](http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/)复制了教程。我已经在我的项目中导入了 google-play-services-library。我已将我的项目和库都选择为“Is Library”。问题是如果我取消选中我的项目为“Is Library”，它将无法编译并说它有错误。如果我检查它然后运行它，则根本不会创建 myproject.apk 文件。我被困住了！请帮忙！我应该怎么办？

PS：我在为我的项目签署发布密钥后遇到了这个问题，因为地图不能简单地在 debugkey 上工作。我必须有释放密钥！

我不知道我在这里错过了什么。

# android - Android AsyncTask 与 Looper 处理程序

> ID：15977884
> 
> 赞同：1
> 
> 时间：2013-04-12T17:57:10.707
> 
> 标签：android, multithreading, android-asynctask, handler, looper

我已经实现了每 5 秒查询一次数据库的后台服务。如果查询没有返回结果，服务应该等待 5 秒并再次查询数据库。如果查询返回结果，它应该调用一个活动并将结果传递给它。

我从一个 AsyncTask 开始，它基本上读取 doInBackground() 中的数据库并返回结果，以便 onPostExecute() 调用活动。现在我在服务的 onStartCommand() 中调用 AsyncTask.execute() 。但这意味着该任务仅在服务启动时被调用一次。

我是否应该为我的任务使用 Looper/Handler，类似于此处解释的内容： [How to run an async task for every x mins in android?](https://stackoverflow.com/questions/6207362/how-to-run-an-async-task-for-every-x-mins-in-android)

但是，如果我正确理解了该代码，该服务将需要在某个地方循环调用 startRepeatingTask，但我希望 doSomething() 本身可以每 x 分钟调用一次。

我是 Android 新手，如果问题非常基本，或者我只是不理解其他解决方案，我很抱歉，希望有人能解释一下这是否适用于我的情况！

谢谢！

# sass - 如何防止 SASS 将导入指令移动到渲染文件的顶部？

> ID：15977890
> 
> 赞同：6
> 
> 时间：2013-04-12T17:57:35.593
> 
> 标签：sass

我最近使用 SASS 创建了一个 WordPress 主题。我使用了这样的技术（[http://css-tricks.com/compass-compiling-and-wordpress-themes/](http://css-tricks.com/compass-compiling-and-wordpress-themes/)）让 SASS 编译所需的 CSS doc 块没有问题。

现在我正在尝试使用 SASS 为子主题制作样式表 - 这需要父主题 style.css 的 CSS @import。这工作正常，但它在 CSS doc 块之前编译 @import ！任何想法如何按预期顺序呈现它们？我试图将 CSS @import 放在部分的 SASS @import 中，但它仍然会发生！

例如，如果这是我的 SASS：

```
/*!
Theme Name: Themey Name
Description: Theme Description
Version: 1.0
Template: parent-theme
*/

@import url(../parent-theme/style.css); 
```

它呈现如下：

```
@import url(../parent-theme/style.css);

/*
Theme Name: Themey Name
Description: Theme Description.
Version: 1.0
Template: parent-theme
*/ 
```

我真的很想要那个文档块！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T10:57:19.843

文件顶部的@-import 问题应根据以下注释解决：

Jonathan Warren 永久链接到评论# OCTOBER 10, 2012 在最新的 WordPress (3.4.2) 中，您不需要 style.css 开头的评论块就可以识别它，只需在主题目录中添加一个文件夹即可空的 index.php 和 style.css 就可以了。

在以下帖子中找到： [http ://css-tricks.com/compass-compiling-and-wordpress-themes/](http://css-tricks.com/compass-compiling-and-wordpress-themes/)

在 wp 3.5.x 上对此进行了测试-在那里工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T17:18:02.580

这是我的“解决方法”：

```
/*!
Theme Name: Themey Name
Description: Theme Description
Version: 1.0
Template: parent-theme
*/

@media any {
    @import url(../parent-theme/style.css);
} 
```

# ruby-on-rails-3 - 使用参数登录后重定向

> ID：15977894
> 
> 赞同：0
> 
> 时间：2013-04-12T17:57:47.517
> 
> 标签：ruby-on-rails-3, url, redirect, params

目前，当您以用户身份登录时，无论从哪里登录，您都会被带到您的主页。我想检查 url 中的参数并根据该参数进行重定向。

这是代码：

```
def after_sign_in_path_for(resource)
    if params['redirect'] == 'SomeParameter'
      return special_url
    else
      return home_url
    end
end 
```

如果我使用没有参数的常规登录表单，我会被带到 home_url。当我尝试转到 /user/login?redirect=SomeParameter 时，我仍然会被带到 home_url。顺便说一句，这两条路线都是有效的（如果我只是测试 special_url，它就可以了）。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:19:41.120

如果您未登录，主页是否会将您重定向到登录表单？

Devise 将存储您尝试登录时所在的页面，并在您登录时重定向到该页面。

这将优先于 after_sign_in_path_for，因此如果您要进入 Home page => Auto-redirect to Login => *log in*，则 after_sign_in_path_for 的返回值无关紧要。

如果是这种情况，您可以使用stored_location_for（[设计和stored_location_for：您如何存储返回位置？](https://stackoverflow.com/questions/6028025/devise-and-stored-location-for-how-do-you-store-the-return-location)）来改变您要去的地方。

# google-drive-api - Google Drive 应用程序通过身份验证范围“查看”了哪些“基本帐户信息”？

> ID：15977896
> 
> 赞同：4
> 
> 时间：2013-04-12T17:57:52.937
> 
> 标签：google-drive-api

我已阅读所有信息和指导，并观看了关于

*   开发人员 Google Drive（对不起，我没有足够的“声誉点”来包含所有相关的链接）。

*   以及 Google 隐私政策。

在 Google Drive 的授权范围列表中，哪些是包含在应用程序“查看基本帐户信息”的用户权限请求中？

[https://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

我只能找到示例，而不是完整的列表。

我也试图了解这与隐私政策有何关系，即。此“基本帐户信息”是“个人信息”还是“Google 帐户”信息。

[http://www.google.com/intl/en-GB/policies/privacy/key-terms/#toc-terms-personal-info](http://www.google.com/intl/en-GB/policies/privacy/key-terms/#toc-terms-personal-info)

> ## 个人信息
> 
> 这是您向我们提供的可识别您个人身份的信息，例如您的姓名、电子邮件地址或帐单信息，或 Google 可以合理链接到此类信息的其他数据。
> 
> ## 谷歌帐户
> 
> 您可以通过注册 Google 帐户并向我们提供一些个人信息（通常是您的姓名、电子邮件地址和密码）来访问我们的某些服务。此帐户信息将用于在您访问 Google 服务时对您进行身份验证，并保护您的帐户免遭他人未经授权的访问。您可以随时通过您的 Google 帐户设置编辑或终止您的帐户。

我在其他地方读到“基本帐户信息”实际上并未“查看”，即。对应用程序开发人员可见，但以加密形式传输以供应用程序使用。

（我不是应用程序开发人员——这似乎是唯一一个有谷歌员工观看和回答这类问题的地方）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:19:52.310

如果您授予以下范围的访问权限，则用户的个人资料和电子邮件可用：

*   个人资料：[https ://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)
*   电子邮件：[https ://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

个人资料代表 Google 帐户，包含用户 ID、姓名、照片、网址、国家/地区、语言、时区和出生日期。

# exception - BigInt 文件无法在 Julia 中打开

> ID：15977897
> 
> 赞同：1
> 
> 时间：2013-04-12T17:57:53.720
> 
> 标签：exception, bigint, julia

我是朱莉娅的新手并正在尝试它。我尝试使用 julia BigInt 库解决涉及非常大的数字（100^100）的问题，但是当我使用

```
require("BigInt") 
```

在解释器提示下，我收到以下错误：

```
could not open file /Applications/JuliaStudio.app/Contents/Resources/juliaengine/BigInt.jl 
```

有什么想法吗？我正在使用最新版本的 64 位 Mac OSX。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:01:08.753

BigInt 现在默认可用，因此要求它们不起作用。只需使用它们。

# excel - 根据约束为单元着色

> ID：15977900
> 
> 赞同：3
> 
> 时间：2013-04-12T17:58:00.307
> 
> 标签：excel

是否可以使用一些简单的约束为单元格着色（对于这些我假设列没有字母而是数字）：

1.  统计单元格 (x0, y0) 和结束单元格 (x1, y1)
2.  单元格必须满足方程 (x, 2x)

例如我选择单元格开始 (1,1) 和结束 (10, 10) 颜色应该发生在 (1,1) (2,3) (3,5) (4,7) (5,9) 就是这样因为 (6,11) 会超出 y 的范围。

![在此处输入图像描述](https://i.stack.imgur.com/gN5l6.png)

如果可能的话，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:38:49.703

使用带有如下公式的[条件格式：](http://office.microsoft.com/en-gb/excel-help/use-a-formula-to-apply-conditional-formatting-HA102809768.aspx)

```
=ROW()*2=COLUMN()+1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T18:40:24.173

非常简单的宏将完成此操作：

```
Dim i As Integer
For i = 1 To 100  'Instead of 100, put your upper number here.
    With Cells(i, i * 2).Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .ThemeColor = xlThemeColorLight2
        .TintAndShade = -0.249977111117893
        .PatternTintAndShade = 0
    End With
 Next 
```

# c++ - 如何从源代码构建 nodejs 作为共享库

> ID：15977901
> 
> 赞同：4
> 
> 时间：2013-04-12T17:58:02.593
> 
> 标签：c++, node.js, build, shared-libraries

我需要在我的 c++ 项目中包含 **node.h**，我尝试使用以下方法从源代码构建节点：

```
./configure
sudo make 
```

我有一个节点可执行文件和一些目标文件和 .a 文件，我需要构建为 .so 文件才能在我的 c++ 代码中使用它。

我尝试构建[libnode](https://github.com/plenluno/libnode)，但出现 cmakelists 错误，这不是官方的 nodejs 项目。

如果有人知道如何从源代码构建 nodejs 作为 .so 文件会很棒，[谷歌小组中有一个类似的问题，](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/o9zXYx6DywU)但答案不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-06T19:26:56.380

节点主线中添加了对构建为共享库的支持。请参阅[PR 6994](https://github.com/nodejs/node/pull/6994)，特别是此[评论](https://github.com/nodejs/node/pull/6994#issuecomment-268015683)。

我刚跑

```
git clone https://github.com/nodejs/node.git
cd node
git checkout v6.9.4
./configure --shared
make -j4 
```

这产生了：

```
ubuntu@server:~/node$ find . -name libnode.so\* -exec ls -la {} \;
-rwxrwxr-x 2 ubuntu ubuntu 31576776 Jan  6 18:57 ./out/Release/lib.target/libnode.so.48
-rw-rw-r-- 1 ubuntu ubuntu 387 Jan  6 18:57 ./out/Release/.deps/home/ubuntu/node/out/Release/lib.target/libnode.so.48.d
-rw-rw-r-- 1 ubuntu ubuntu 4202 Jan  6 18:57 ./out/Release/.deps/home/ubuntu/node/out/Release/obj.target/libnode.so.48.d
-rwxrwxr-x 2 ubuntu ubuntu 31576776 Jan  6 18:57 ./out/Release/obj.target/libnode.so.48
ubuntu@server:~/node$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-20T11:30:33.533

我认为在静态库中构建更容易，因为共享需要添加“-fpic”。

对于我的项目（在 Linux 下），我使用此脚本构建了一个静态 node.js 库：

```
#!/bin/sh
# This script is LGPL feel free to use it!

if test ! "$#" = "1"; then
    echo "Run with the archive in parameter:"
    echo "\t${0} ./node-v0.XX.XX.tar.gz"
    echo "\nIt will build a ./libnode_static.a in current dir"
    return
fi

HERE=$PWD

#Extract Tarball
tar xf $1 | exit 1 
DIRNAME=`echo $1 | sed s/.tar.gz//g`

cd $DIRNAME

#Patch node.gyp to build in static
sed -i "s/'type': 'executable',/'type': 'static_library',/g" ./node.gyp 

#Patch node_main.cc to rename the main in node_main
sed -i "s/int main(/int node_main(/g" ./src/node_main.cc

#Build Node.js
./configure
make -j8

#Move to build directory
cd ./out/Release

#Extract .a

#Cleanup if previous build
rm -fr *.tmpd

echo "== Extracting *.a =="

#Make sure we create a directory
#for each.a as some .o might
#have the same name
for a in `ls *.a`
do
    echo "\t${a}..."
    mkdir "$a.tmpd"
    cd "$a.tmpd"
    ar x ../$a
    cd ..
done

#Repack in a single .a
find . -iname "*.o" | xargs ar rcs libnode_static.a

#Cleanup
rm -fr *.tmpd

echo "==      DONE      =="

#Move in start directory
mv ./libnode_static.a ${HERE}/

cd ${HERE}

#Sanity CHECK
echo "== Performing Sanity Check =="

TMP_FILE=`mktemp /tmp/XXXXXX.cxx`
TMP_EXE=`mktemp /tmp/XXXXXX`

cat << . > ${TMP_FILE}
int node_main( int argc, char **argv);
int main(int argc, char ** argv )
{
    node_main( argc, argv );
    return 0;
}
.

#Try compiling
g++  ${TMP_FILE} -o ${TMP_EXE} -lnode_static -ldl -pthread -L. 

#Try running
RET=`${TMP_EXE} -e "console.log('okfromnode')"` 

if test "x${RET}" = "xokfromnode"; then
    echo "== Sanity check OK =="
else
    echo "== Sanity check FAILED =="
    exit 1
fi

rm ${TMP_FILE} ${TMP_EXE}

echo "== Node.js is now built statically in ./libnode_static.a =="

exit 0 
```

运行如下：

```
sh script.sh  node-v0.10.XX.tar.gz 
```

如果一切顺利，您应该在当前目录中获得一个**libnode_static.a 。**

将其与如下代码一起使用：

```
int node_main( int argc, char **argv);

int main(int argc, char ** argv )
{
    /* Here we spawn a node.js instance */
    return node_main( argc, argv );
} 
```

并像这样编译：

```
g++ ./test.cxx -o ./my_node -lnode_static -ldl -pthread -L. 
```

你有嵌入式节点：

```
./my_node  -e "console.log('Hello World')"
#Outputs
Hello World 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-30T06:13:57.297

这就是我在Windows中的做法。除了构建过程，一切都应该是一样的。

Nodejs 使用 node-gyp 进行构建。您可以阅读[此](https://github.com/joyent/node/wiki/Installation)内容以进行构建和安装。或者只是 git clone 存储库。

在node-vX.XX.XX中打开node.gyp，找到

```
'targets': [
    {
      'target_name': 'node',
      'type': 'executable', 
```

更改`executable`为`shared_library`.

在 windows 或其他平台上运行 vcbuild.bat，请按照[说明](https://github.com/joyent/node/wiki/Installation)进行操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-02T06:10:29.570

更新： [https ://gist.github.com/aklen/849f3460b7a028c9aed8a84e1d4cecb7](https://gist.github.com/aklen/849f3460b7a028c9aed8a84e1d4cecb7)

### 视窗

```
.\vcbuild release vs2017 dll x64

.\vcbuild release vs2017 dll x86

.\vcbuild debug vs2017 dll x64

.\vcbuild debug vs2017 dll x86 
```

### Linux / MacOS

```
./configure --shared --release
make -j4

./configure --shared --debug
make -j4 
```

### 其他构建选项

[https://github.com/nodejs/node/blob/master/BUILDING.md](https://github.com/nodejs/node/blob/master/BUILDING.md)

# matlab - 使用matlab进行图像遮罩边界

> ID：15977904
> 
> 赞同：0
> 
> 时间：2013-04-12T17:58:06.407
> 
> 标签：matlab, matrix, boundary

例如，我有一个输入灰度图像（比如 65 X 65 像素）。我正在尝试应用自定义的 3X3 掩码，例如：

```
M = [1 2 3; 4 5 6; 7 8 9] 
```

我希望它在整个图像中跟踪遮罩，除了边界（它在数组范围之外）。

在 matlab 中是否有一种优雅的方法可以做到这一点（无需扩展图像边界以适应蒙版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:09:51.793

如果我理解正确，您的意思是您想要：

```
ans=conv2(image,M,'same'); 
```

# c# - 使用 2D 数据集的等高线图

> ID：15977906
> 
> 赞同：1
> 
> 时间：2013-04-12T17:58:19.133
> 
> 标签：c#, graphics, contour

我有一组 XY 坐标数据，我需要能够从该数据创建等高线图。是否有现有的 C# 库可以为我提供此功能？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:10:42.613

查看CodePlex上[Math.NET Numerics](http://mathnetnumerics.codeplex.com/)项目的[插值。](http://mathnetnumerics.codeplex.com/wikipage?title=Interpolation&referringTitle=Documentation)

该项目：

> Numerics 是 Math.NET 项目的数值基础，旨在为科学、工程和日常使用中的数值计算提供方法和算法。涵盖的主题包括特殊函数、线性代数、概率模型、随机数、插值、积分变换等。

java2s.com 上还有许多[示例方法](http://www.java2s.com/Code/Java/Advanced-Graphics/DrawYourOwnContourFunction.htm)。是的，它是 Java，但 Math 很容易移植到 C#。

# c# - 创建参数等于对象的 LINQ 表达式

> ID：15977908
> 
> 赞同：23
> 
> 时间：2013-04-12T17:58:37.377
> 
> 标签：c#, linq, entity-framework-5

给定一个原始值`age`，我知道如何创建这样的表达式：

```
//assuming: age is an int or some other primitive type
employee => employee.Age == age 
```

通过做这个：

```
var entityType = typeof(Employee);
var propertyName = "Age";
int age = 30;
var parameter = Expression.Parameter(entityType, "entity");

var lambda = Expression.Lambda(
        Expression.Equal(
            Expression.Property(parameter, propertyName),
            Expression.Constant(age)
        )                    
    , parameter); 
```

除非在所讨论的属性和常量不是原始类型的情况下，否则效果很好。

如果比较是在对象之间，我将如何构造一个类似的表达式？

使用 EF 我可以写：

```
Location location = GetCurrentLocation();
employees = DataContext.Employees.Where(e => e.Location == location); 
```

**这也有效**，但如果我尝试创建相同的表达式：

```
var entityType = typeof(Employee);
var propertyName = "Location";
var location = GetCurrentLocation();
var parameter = Expression.Parameter(entityType, "entity");

var lambda = Expression.Lambda(
        Expression.Equal(
            Expression.Property(parameter, propertyName),
            Expression.Constant(location)
        )                    
    , parameter); 
```

我收到一条错误消息：

`Unable to create a constant value of type 'Location'. Only primitive types or enumeration types are supported in this context.`

我的怀疑是`Expression.Constant()`只需要原始类型，所以我需要使用不同的表达式工厂方法。（也许`Expression.Object`？-我知道那不存在）

有没有办法创建一个比较对象的表达式？如果它是一个编译的 LINQ 语句，为什么 EF 能够正确解释它，但当它是一个表达式时却不能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T22:53:20.380

除了之前的答案中提到的内容。一个更具体的解决方案是这样的：

```
public static Expression CreateExpression<T>(string propertyName, object valueToCompare)
{
    // get the type of entity
    var entityType = typeof(T);
    // get the type of the value object
    var valueType = valueToCompare.GetType();
    var entityProperty = entityType.GetProperty(propertyName);
    var propertyType = entityProperty.PropertyType;

    // Expression: "entity"
    var parameter = Expression.Parameter(entityType, "entity");

    // check if the property type is a value type
    // only value types work 
    if (propertyType.IsValueType || propertyType.Equals(typeof(string)))
    {
        // Expression: entity.Property == value
        return Expression.Equal(
            Expression.Property(parameter, entityProperty),
            Expression.Constant(valueToCompare)
        );
    }
    // if not, then use the key
    else
    {
        // get the key property
        var keyProperty = propertyType.GetProperties().FirstOrDefault(p => p.GetCustomAttributes(typeof(KeyAttribute), false).Length > 0);

        // Expression: entity.Property.Key == value.Key
        return Expression.Equal(
            Expression.Property(
                Expression.Property(parameter, entityProperty),
                keyProperty
            ),
            Expression.Constant(
                keyProperty.GetValue(valueToCompare),
                keyProperty.PropertyType
            )
        );
    }
} 
```

**要点：**

1.  确保检查空值
2.  确保`propertyType`并`valueType`兼容（它们是相同类型或可转换）
3.  这里做了几个假设（例如，您确实分配了 a `KeyAttribute`）
4.  此代码未经测试，因此无法完全复制/粘贴。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T18:01:08.733

您不能这样做，因为 EF 不知道如何将相等比较`Location`转换为 SQL 表达式。

但是，如果您知道`Location`要比较哪些属性，则可以使用匿名类型执行此操作：

```
var location = GetCurrentLocation();
var locationObj = new { location.LocationName, location.LocationDescription };
employees = DataContext.Employees.Where(e => new { e.Location.LocationName, e.Location.Description } == locationObj); 
```

当然这相当于：

```
var location = GetCurrentLocation();
employees = DataContext.Employees.Where(e => e.Location.LocationName == location.Name && 
                                             e.Location.Description == location.Description); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T19:21:33.800

运行下面的代码。我想测试您的假设，即 e => e.Location == location 正在编译成可以使用 Expression.Equal、Expression.Property 和 Expression.Constant 构造的东西。

```
 class Program {
       static void Main(string[] args) {
          var location = new Location();
          Expression<Func<Employee, bool>> expression = e => e.Location == location;

          var untypedBody = expression.Body;

          //The untyped body is a BinaryExpression
           Debug.Assert(
              typeof(BinaryExpression).IsAssignableFrom(untypedBody.GetType()), 
              "Not Expression.Equal");

           var body = (BinaryExpression)untypedBody;
           var untypedLeft = body.Left;
           var untypedRight = body.Right;

           //The untyped left expression is a MemberExpression
           Debug.Assert(
              typeof(MemberExpression).IsAssignableFrom(untypedLeft.GetType()), 
              "Not Expression.Property");

           ////The untyped right expression is a ConstantExpression
          //Debug.Assert(
          //   typeof(ConstantExpression).IsAssignableFrom(untypedRight.GetType()),                 
          //   "Not Expression.Constant");

          //The untyped right expression is a MemberExpression?
          Debug.Assert(
               typeof(MemberExpression).IsAssignableFrom(untypedRight.GetType())));
    }
}

public class Employee
{
    public Location Location { get; set; }
}

public class Location { } 
```

似乎不是，因为正确的表达式不是常量。要查看这一点，请取消注释已注释掉的代码。

我不明白为什么正确的表达式是 MemberExpression。也许知道 linq 表达式编译器的人可以比我更了解这一点。

编辑：这可能与 lambdas 中的闭包有关——在幕后创建了一个包含封闭变量的类。该位置可能是该类的成员。我不确定这一点，但这是我怀疑的。

[这篇文章](https://stackoverflow.com/questions/3991621/can-i-capture-a-local-variable-into-a-linq-expression-as-a-constant-rather-than)可能会进一步说明这种情况。

# java - 如何从 netbeans 中的主要方法设置文本字段文本？

> ID：15977909
> 
> 赞同：0
> 
> 时间：2013-04-12T17:58:40.583
> 
> 标签：java, swing, netbeans, jtextfield, main

我是[NetBeans](https://netbeans.org/)（但不是 Java）的新手，但我遇到了问题。我用 NetBeans 创建了一个 GUI，它只包含一个[JTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)和一个[JButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html)。

我想从 main 方法向文本字段添加文本，所以我在 main 方法的末尾添加了以下行（所以基本上在 main 方法中，生成的代码创建了[JFrame](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)，然后才出现我的额外行）：`jTextField1.setText("WHATEVER");` 什么也没有发生。我已将文本字段更改为`public static`，但仍然没有。

`actionPerformed`但是，如果我在按钮的方法中使用同一行，它就可以工作。

为什么？为什么我不能从主类设置文本？

这是代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
  */
 package pac.jframe_test;

  /**
  *
  * @author Orand
  */
public class JFrame_Test_UI extends javax.swing.JFrame {

/**
 * Creates new form JFrame_Test_UI
 */
public JFrame_Test_UI() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jButton1 = new javax.swing.JButton();
    jTextField1 = new javax.swing.JTextField();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jButton1.setText("jButton1");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(154, 154, 154)
            .addComponent(jButton1)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap(112, Short.MAX_VALUE)
            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(103, 103, 103))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap(109, Short.MAX_VALUE)
            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(96, 96, 96)
            .addComponent(jButton1)
            .addGap(52, 52, 52))
    );

    pack();
}// </editor-fold>                        

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    jTextField1.setText("whatever");
}                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(JFrame_Test_UI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(JFrame_Test_UI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(JFrame_Test_UI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(JFrame_Test_UI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new JFrame_Test_UI().setVisible(true);
        }
    });
    jTextField1.setText("WHATEVER");
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
public static javax.swing.JTextField jTextField1;
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:19:58.623

因为在`jTextField1`您尝试设置其文本时该变量尚未初始化。实际上，它仅在事件队列调用在 main 方法末尾传递给 invokeLater 的可运行对象时才初始化 t=。

此外，您正在从主线程访问 Swing 组件，而 Swing 组件只能在事件调度线程中使用。这就是为什么，顺便说一句，main 方法在传递给`EventQueue.invokeLater()`. 请阅读[有关并发的 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)，否则您的下一个问题会问为什么在事件侦听器中休眠会冻结整个 GUI。

这个字段不应该是公开的，更不应该是静态的。为什么不从框架构造函数初始化字段的文本？那就是它应该被初始化的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:09:27.997

根据 netbeans 代码架构，它从扩展 JFrame 的类的默认构造中调用**initComponents()**方法，因此您在代码中使用的所有**JComponents的****内存分配将在****initComponents**方法体中完成。所以建议在 **initComponents**方法调用之后再调用这些JComponents的任何方法。

 ******你的代码应该是这样的......

```
public JFrame_Test_UI() {
    initComponents();
    jTextField1.setText("WHATEVER");    
} 
```******

# sql-server - SQL Server：将 varchar 转换为 INT

> ID：15977911
> 
> 赞同：43
> 
> 时间：2013-04-12T17:58:45.737
> 
> 标签：sql-server

我坚持将`varchar`列转换`UserID`为`INT`. 我知道，请不要问为什么这个`UserID`专栏最初没有被创建为 INT，长篇大论。

所以我尝试了这个，但它不起作用。并给我一个错误：

```
select CAST(userID AS int) from audit 
```

**错误：**

> 转换 varchar 值 '1581 时转换失败.......................... ..................................................... .....................' 转换为数据类型 int。

我做了`select len(userID) from audit`，它返回 128 个字符，不是空格。

我尝试检测 ID 号和 ASCII 值 = 0 之后的那些尾随的 ASCII 字符。

我也尝试过`LTRIM`,`RTRIM`和替换`char(0)`为`''`，但不起作用。

当我像下面这样告诉固定数量的字符时，它起作用的唯一方法，但`UserID`并不总是 4 个字符。

```
select CAST(LEFT(userID, 4) AS int) from audit 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T18:06:09.410

您可以尝试更新表格以摆脱这些字符：

```
UPDATE dbo.[audit]
  SET UserID = REPLACE(UserID, CHAR(0), '')
  WHERE CHARINDEX(CHAR(0), UserID) > 0; 
```

但是，您还需要首先修复将这些不良数据放入表中的任何问题。同时也许尝试：

```
SELECT CONVERT(INT, REPLACE(UserID, CHAR(0), ''))
  FROM dbo.[audit]; 
```

但这不是一个长期的解决方案。修复数据（以及处理数据时的数据类型）。如果你不能立即修复数据类型，那么你可以通过添加检查约束来快速找到罪魁祸首：

```
ALTER TABLE dbo.[audit]
  ADD CONSTRAINT do_not_allow_stupid_data
  CHECK (CHARINDEX(CHAR(0), UserID) = 0); 
```

**编辑**

好的，这绝对是一个 4 位整数，后跟 6 个 CHAR(0) 实例。我发布的解决方法肯定对我有用：

```
DECLARE @foo TABLE(UserID VARCHAR(32));
INSERT @foo SELECT 0x31353831000000000000;

-- this succeeds:
SELECT CONVERT(INT, REPLACE(UserID, CHAR(0), '')) FROM @foo;

-- this fails:
SELECT CONVERT(INT, UserID) FROM @foo; 
```

请确认此代码本身（好吧，`SELECT`无论如何，第一个）对您有用。如果确实如此，那么您得到的错误来自不同行中的不同非数字字符（如果不是，那么您可能有一个未修复特定错误的构建）。要尝试缩小范围，您可以从以下查询中获取随机值，然后遍历字符：

```
SELECT UserID, CONVERT(VARBINARY(32), UserID)
  FROM dbo.[audit]
  WHERE UserID LIKE '%[^0-9]%'; 
```

所以随机取一行，然后将输出粘贴到这样的查询中：

```
DECLARE @x VARCHAR(32), @i INT;
SET @x = CONVERT(VARCHAR(32), 0x...); -- paste the value here
SET @i = 1;
WHILE @i <= LEN(@x)
BEGIN
  PRINT RTRIM(@i) + ' = ' + RTRIM(ASCII(SUBSTRING(@x, @i, 1)))
  SET @i = @i + 1;
END 
```

在遇到由于其他原因而失败的行之前，这可能需要一些试验和错误`CHAR(0)`- 因为您无法真正过滤掉包含的行，`CHAR(0)`因为它们可能包含`CHAR(0)` *and* `CHAR(something else)`。据我们所知，您在表格中有如下值：

```
SELECT '15' + CHAR(9) + '23' + CHAR(0); 
```

...无论您是否已替换，它也无法转换为整数`CHAR(0)`。

我知道你不想听到它，但我真的很高兴这对人们来说是痛苦的，因为现在当人们对数据类型做出非常糟糕的决定时，他们有更多的战争故事要反击。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-06T14:00:46.093

这个问题有 91,000 次浏览，所以也许很多人正在寻找一个更通用的解决方案来解决标题“将 varchar 转换为 INT 时出错”的问题

如果您使用的是 SQL Server 2012+，则处理此无效数据的一种方法是使用`TRY_CAST`

```
SELECT TRY_CAST (userID AS INT)
FROM   audit 
```

在以前的版本中，您可以使用

```
SELECT CASE
         WHEN ISNUMERIC(RTRIM(userID) + '.0e0') = 1
              AND LEN(userID) <= 11
           THEN CAST(userID AS INT)
       END
FROM   audit 
```

`NULL`如果无法转换值，则两者都返回。

但是，在您的问题中存在已知错误值的特定情况下，我将使用以下内容。

```
CAST(REPLACE(userID COLLATE Latin1_General_Bin, CHAR(0),'') AS INT) 
```

尝试替换空字符通常是有问题的，除非使用二进制排序规则。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-06T16:23:53.367

这比原始海报更适合寻找结果的人。这对我有用...

```
declare @value varchar(max) = 'sad';
select sum(cast(iif(isnumeric(@value) = 1, @value, 0) as bigint));

returns 0

declare @value varchar(max) = '3';
select sum(cast(iif(isnumeric(@value) = 1, @value, 0) as bigint));

returns 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T18:07:00.790

我会尝试修剪数字以查看您得到的结果：

```
select len(rtrim(ltrim(userid))) from audit 
```

如果返回正确的值，那么只需执行以下操作：

```
select convert(int, rtrim(ltrim(userid))) from audit 
```

如果那没有返回正确的值，那么我会进行替换以删除空白：

```
 select convert(int, replace(userid, char(0), '')) from audit 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T20:03:47.483

这就是我解决问题的方法：

首先，我确保需要转换为整数的列不包含任何空格：

```
update data set col1 = TRIM(col1) 
```

我还检查了该列是否仅包含数字。
您可以通过以下方式检查：

```
select * from data where col1 like '%[^0-9]%' order by col1 
```

如果存在任何非数字值，您可以将它们保存到另一个表并从您正在处理的表中删除它们。

```
select * into nonnumeric_data from data where col1 like '%[^0-9]%'
delete from data where col1 like '%[^0-9]%' 
```

我的数据存在上述问题。所以在修复它们之后，我创建了一个 bigint 变量并将 varchar 列的值设置为我创建的整数列。

```
alter table data add int_col1 bigint
update data set int_col1 = CAST(col1 AS VARCHAR) 
```

这对我有用，希望你也觉得它有用。

# ruby - RVM git 没有安装候选

> ID：15977916
> 
> 赞同：-1
> 
> 时间：2013-04-12T17:59:02.370
> 
> 标签：ruby, git, ubuntu, rvm

我目前正在尝试通过 rvm 在带有 Plesk 11 的 Ubuntu 10.04 上安装 ruby​​。我的 rvm 版本是 1.19.3 ..

不幸的是，rvm 在安装要求时失败，即 git。日志说没有可用的安装候选。

[似乎来源，rvm 正在接收来自的 .tar.bz2 文件，已经过时了。它正在“ http://kernel.org/pubs/software/scm/](http://kernel.org/pubs/software/scm/git/) ”上寻找“git-1.7.6.4.tar.bz2” [git/](http://kernel.org/pubs/software/scm/git/) "，但只有 2005 年的一些文件。

因此，该文件存在一些仅说明 404 错误的 html 代码。

有人知道如何告诉 rvm 寻找一些新的资源吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:09:16.690

这应该用[277667e 修复](https://github.com/wayneeseguin/rvm/commit/277667ebe84d3446b3eb3815f39bc191e1e1cdf7 "这个提交")。我们现在允许库回退到`git-core`如果`git`不可用。如果您下次遇到问题，请务必提交票证，因为我们可能不会始终监控 SO 是否存在 RVM 问题。

要测试，请执行以下操作：`rvm get head`

# windows - 如何以非管理员身份运行 robocopy 而无需共享文件夹以进行读/写访问 - WINDOWS 7

> ID：15977918
> 
> 赞同：0
> 
> 时间：2013-04-12T17:59:07.827
> 
> 标签：windows, windows-7, batch-file, robocopy

我有一个基本的 bat 文件，它将文件从一个目录复制到另一个目录

```
set SOURCE=\\T4\D$\TV
set DESTINATION=\\T4\E$\TV

robocopy /MIR %SOURCE% %DESTINATION% 
```

当我作为用户（管理员组的成员）运行时，它只是在无限循环的命令提示符窗口中显示 bat 文件的内容。

但是，当我右键单击 bat 文件并单击以管理员身份运行时，它会完美执行。

当我右键单击bat文件并单击属性>兼容性时，以管理员身份运行的选项由于某种原因灰显？

我也不想分享我的文件夹:)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T16:18:32.080

由于您在 SOURCE 和 DESTINATION 位置使用管理共享，因此您需要管理员权限。不仅适用于 robocopy，而且适用于任何复制命令。

尝试从 RUN 命令转到任一位置以进行验证。

# css - 填充占用比所需空间更多的空间

> ID：15977928
> 
> 赞同：0
> 
> 时间：2013-04-12T17:59:43.517
> 
> 标签：css, padding

我有一个奇怪的填充错误。我正在创建一个两列布局，当我尝试向页脚 div 添加填充时，它占用的空间比我想要的要多。我已经寻找过这个问题，但找不到有用的答案。例如，如果我在代码上放置 1 个像素：

```
#footer {
margin: 0.5em auto 0em auto;
background-color: #5f544d;
font-family: "Trebuchet MS";
width: 760px;
text-align: center;
padding: 1px 0.5em;
line-height: 1.1em;
} 
```

我最终得到了超过 1 个像素的填充，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/d5RUZ.png)

顶部和底部填充的高度超过 1 像素。所以我的问题是什么可能导致这个问题？

我在小提琴中放了一段代码，但问题仍然存在，所以我想我所包含的代码足以解决这个问题，如果它不仅仅是告诉我的话。小提琴链接：http: [//jsfiddle.net/KhxAW/4/](http://jsfiddle.net/KhxAW/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:06:48.413

问题在于您的`<p>`标签。它的上方和下方都有一个边距空间。我建议您`<p>`在 CSS 代码中的某处重置标签边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:18:06.263

只需用这个替换您的页脚 div->

```
<div id="footer">
                <p style="display:inline">Three Rings for the Elven-kings under the sky, seven for the Dwarf-lords in their halls of stone,
                Nine for Mortal Men doomed to die, one for the Dark Lord on his dark throne, in the Land of Mordor 
                where the Shadows lie. One ring to rule them all, one ring to find them, one ring to bring them all 
                and in the darkness bind them, in the Land of Mordor where the Shadows lie.</p>
            </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T18:02:16.913

```
#footer {
margin: 0.5em auto 0em auto;
background-color: #5f544d;
font-family: "Trebuchet MS";
width: 760px;
text-align: center;
padding: 1px 0.5em;
line-height: 1.1em;
} 
```

您没有在填充声明中为您的单位使用像素......您正在使用 EM。1EM 等于父元素字体的 PX 大小。所以如果你的字体大小是 12px，0.5em 就是 6px。

只需将您的单位更改为 PX...

```
#footer {
margin: 0.5em auto 0em auto;
background-color: #5f544d;
font-family: "Trebuchet MS";
width: 760px;
text-align: center;
padding: 1px 5px;
line-height: 1.1em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:28:05.127

如果您在代码样式中包含以下内容

```
p.margin
{
margin: 0px;
}

and then inside your <p> tag you include the class="margin" like this:

<p class="margin">Three Rings for the Elven-kings ... </p>

You will be able to set the padding in the <div> tag without interference 
from the <p> tag. 
```

# encryption - 如何在 Windows 商店应用程序（C#/XAML）中加密 StorageFile？

> ID：15977930
> 
> 赞同：1
> 
> 时间：2013-04-12T17:59:56.703
> 
> 标签：encryption, windows-8, windows-runtime, microsoft-metro, windows-store-apps

我正在开发一个下载一些机密文件的应用程序。我将它们下载到`LocalFolder`. 但我想以`StorageFile`加密形式存储，所以任何极客用户都无法通过访问轻松访问这些文件`C:\Users\<user_name>\AppData\Local\Packages`

我检查了有关密码学的[MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh465017.aspx)，但它们对我来说似乎不太有用。那么是否有任何可用的本机 WinRT API 或第 3 个 API 对文件进行加密，因此仅通过“双击”就无法轻松打开它，当我的应用程序请求特定文件时，`StorageFile`它将被解密并显示在我的应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:43:07.597

我没有亲自使用过它，但[DataProtectionProvider](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx)可能值得一看。该链接提供了几个加密数据示例。样本并不特定于`StorageFile`，但似乎应该足够简单以将结果保存到文件中。

# database - 非 CRUD 查询的 API 设计

> ID：15977936
> 
> 赞同：2
> 
> 时间：2013-04-12T18:00:13.763
> 
> 标签：database, api

我们正在考虑创建一个我们的内部应用程序和客户可以使用的 API 应用程序。这对于 CRUD API 查询来说似乎很简单，但我们在处理更复杂的查询时遇到了问题。

例如，假设一个内部应用程序想知道“对于每个公司，计算用户数和仪表板数，并返回结果”，这将如何作为 API 的一部分公开？

我想如果我们对所有公司的列表发出一个查询，然后每个公司触发两个查询来计算用户和仪表板，那么性能就会成为一个问题。

此外，我们如何处理我们目前正在硬编码 SQL 以进行优化的问题？

任何推荐的读物也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:16:16.590

我为所有数据库表生成 crud 存储过程，包括所有外键的选择，然后为所有数据库表生成域对象。对我来说，对象映射感觉更易于使用。

如果有特定的数据视图会导致问题或不适合模型。我将使用扩展数据扩展现有域对象。例如：

```
public class Customer
{
    public int CustomerID{get;set;}
}

public class CustomerListingView:Customer
{
    public int NumberOfOrders{get;set;}
    public int NumberOfSomethingElse{get;set;}
} 
```

这至少允许您将自定义视图数据转换为需要超类型的控制器函数。

# groovy - Groovy 脚本在 Groovy 控制台中工作，但在 SoapUi Groovy 脚本中抛出错误

> ID：15977941
> 
> 赞同：0
> 
> 时间：2013-04-12T18:00:32.223
> 
> 标签：groovy, jakarta-mail, soapui, qa

我正在尝试使用 Groovy 脚本在 SOAPUI 中发送包含测试步骤结果的电子邮件。我首先在我的 Groovy 控制台上编写了代码，它运行良好。当我将它复制并粘贴到 SOAPUI（Groovy 脚本测试步骤）中时，它显示了一个错误。这是我的代码：

我正在尝试使用 Groovy 脚本在 SOAPUI 中发送包含测试步骤结果的电子邮件。我首先在我的 Groovy 控制台上编写了代码，它运行良好。当我将它复制并粘贴到 SOAPUI（Groovy 脚本测试步骤）中时，它显示了一个错误。这是我的代码

```
import javax.mail.*
import javax.mail.internet.*

public class SMTPAuthenticator extends Authenticator
{
    public PasswordAuthentication getPasswordAuthentication()
    {
        return new PasswordAuthentication('test@gmaail.com', '****');
    }
}

def  d_email = "test@gmail.com",
        d_uname = "test",
        d_password = "*****",
        d_host = "smtp.gmail.com",
        d_port  = "465", //465,587
        m_to = "test2@gamil.com",
        m_subject = "Testing",
        m_text = "Hi, this is the testing email."

def props = new Properties()
props.put("mail.smtp.user", d_email)
props.put("mail.smtp.host", d_host)
props.put("mail.smtp.port", d_port)
props.put("mail.smtp.starttls.enable","true")
props.put("mail.smtp.debug", "true");
props.put("mail.smtp.auth", "true")
props.put("mail.smtp.socketFactory.port", d_port)
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory")
props.put("mail.smtp.socketFactory.fallback", "false")

def auth = new SMTPAuthenticator()
def session = Session.getInstance(props, auth)
session.setDebug(true);

def msg = new MimeMessage(session)
msg.setText(m_text)
msg.setSubject(m_subject)
msg.setFrom(new InternetAddress(d_email))
msg.addRecipient(Message.RecipientType.TO, new InternetAddress(m_to))

Transport transport = session.getTransport("smtps");
transport.connect(d_host, 465, d_uname, d_password);
transport.sendMessage(msg, msg.getAllRecipients());
transport.close(); 
```

问题出在这一行： transport.sendMessage(msg, msg.getAllRecipients());

当我删除这一行时，没有 errpr 但没有发送消息..

你知道为什么这在 groovy 控制台上完美运行，但在 Soapui 中抛出错误

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:52:02.770

我测试了你的代码，它可以工作，除了两件事：

```
1\.  Run the script with 'groovy.bat -classpath mail-1.4.1.jar sendemail.groovy'
2\.  Fix the 2 misspellings of gmail in the script. 
```

# emacs - 如何更正混合编码的文件？

> ID：15977942
> 
> 赞同：4
> 
> 时间：2013-04-12T18:00:36.920
> 
> 标签：emacs, utf-8

给定一个混合编码的损坏文件（例如 utf-8 和 latin-1），我如何配置 Emacs 以在保存文件时将其所有符号“投影”到单一编码（例如 utf-8）？

我做了以下功能来自动化一些清洁，但我想我可以在某处找到将一个编码中的符号“é”映射到 utf-8 中的“é”的信息，以改进此功能（或有人已经写过这样的功能）。

```
 (defun jyby/cleanToUTF ()
    "Cleaning to UTF"
    (interactive)
    (progn
         (save-excursion (replace-regexp "अ" ""))
         (save-excursion (replace-regexp "आ" ""))
         (save-excursion (replace-regexp "ॆ" ""))
       )
  )

  (global-unset-key [f11])
  (global-set-key [f11] 'jyby/cleanToUTF) 
```

* * *

我有许多混合编码“损坏”的文件（由于从具有错误字体配置的浏览器复制粘贴），产生以下错误。有时我会手动清理它们，方法是用“”或适当的字符搜索和替换每个有问题的符号，或者更快地将“utf-8-unix”指定为编码（下次编辑和保存时会提示相同的消息文件）。这已成为一个问题，因为在任何此类损坏的文件中，任何重音字符都会被每次保存时大小*翻倍*的序列替换，最终文件大小翻倍。我正在使用 GNU Emacs 24.2.1

```
These default coding systems were tried to encode text
in the buffer `test_accents.org':
(utf-8-unix (30 . 4194182) (33 . 4194182) (34 . 4194182) (37
. 4194182) (40 . 4194181) (41 . 4194182) (42 . 4194182) (45
. 4194182) (48 . 4194182) (49 . 4194182) (52 . 4194182))
However, each of them encountered characters it couldn't encode:
utf-8-unix cannot encode these:           ...

Click on a character (or switch to this window by `C-x o'
and select the characters by RET) to jump to the place it appears,
where `C-u C-x =' will give information about it.

Select one of the safe coding systems listed below,
or cancel the writing with C-g and edit the buffer
to remove or modify the problematic characters,
or specify any other coding system (and risk losing
the problematic characters).

raw-text emacs-mule no-conversion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-02T17:55:16.473

我在 emacs 中为此苦苦挣扎了很多次。当我有一个文件被弄乱时，例如在 raw-text-unix 模式下，并保存为 utf-8，emacs 甚至会抱怨已经是干净的 utf-8 的文本。我还没有找到一种方法让它只抱怨非 utf-8。

我刚刚找到了一种使用重新编码的合理的半自动化方法：

```
f=mixed-file
recode -f ..utf-8 $f > /tmp/recode.out
diff $f recode.out | cat -vt

# manually fix lines of text that can't be converted to utf-8 in $f,
# and re-run recode and diff until the output diff is empty. 
```

一路上一个有用的工具是[http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=342+200+224&mode=obytes](http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=342+200+224&mode=obytes)

然后我只是在emacs中重新打开文件，它被识别为干净的unicode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:40:25.033

这里有一些东西可以让你开始：

```
(put 'eof-error 'error-conditions '(error eof-error))
(put 'eof-error 'error-message "End of stream")
(put 'bad-byte 'error-conditions '(error bad-byte))
(put 'bad-byte 'error-message "Not a UTF-8 byte")

(defclass stream ()
  ((bytes :initarg :bytes :accessor bytes-of)
   (position :initform 0 :accessor position-of)))

(defun logbitp (byte bit) (not (zerop (logand byte (ash 1 bit)))))

(defmethod read-byte ((this stream) &optional eof-error eof)
  (with-slots (bytes position) this
    (if (< position (length bytes))
        (prog1 (aref bytes position) (incf position))
      (if eof-error (signal eof-error (list position)) eof))))

(defmethod unread-byte ((this stream))
  (when (> (position-of this) 0) (decf (position-of this))))

(defun read-utf8-char (stream)
  (let ((byte (read-byte stream 'eof-error)))
    (if (not (logbitp byte 7)) byte
      (let ((numbytes
             (cond
              ((not (logbitp byte 5))
               (setf byte (logand #2r11111 byte)) 1)
              ((not (logbitp byte 4))
               (setf byte (logand #2r1111 byte)) 2)
              ((not (logbitp byte 3))
               (setf byte (logand #2r111 byte)) 3))))
        (dotimes (b numbytes byte)
          (let ((next-byte (read-byte stream 'eof-error)))
            (if (and (logbitp next-byte 7) (not (logbitp next-byte 6)))
                (setf byte (logior (ash byte 6) (logand next-byte #2r111111)))
              (signal 'bad-byte (list next-byte)))))
        (signal 'bad-byte (list byte))))))

(defun load-corrupt-file (file)
  (interactive "fFile to load: ")
  (with-temp-buffer
    (set-buffer-multibyte nil)
    (insert-file-literally file)
    (with-output-to-string
      (set-buffer-multibyte t)
      (loop with stream = (make-instance 'stream :bytes (buffer-string))
            for next-char =
            (condition-case err
                (read-utf8-char stream)
              (bad-byte (message "Fix this byte %d" (cdr err)))
              (eof-error nil))
            while next-char
            do (write-char next-char))))) 
```

这段代码的作用 - 它加载一个没有转换的文件并尝试读取它，就好像它是使用 UTF-8 编码的一样，一旦它遇到一个看起来不属于 UTF-8 的字节，它就会出错，并且你需要以某种方式处理它，它是`"Fix this byte"`消息所在的位置）。但是你需要对如何修复它有创造性......

# ruby-on-rails - 如何在 Devise 中删除用户的密码？

> ID：15977946
> 
> 赞同：2
> 
> 时间：2013-04-12T18:00:51.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我希望能够在 Devise 中删除用户的密码，这样他们之后就没有密码了。

在我的应用程序中，用户在注册后设置他们的密码密码，我希望能够删除测试帐户上的密码，以便我可以轻松测试设置密码的过程。所以有一个用户有密码，我希望那个用户不再有密码

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:03:57.953

尝试这个：`user.update_column :encrypted_password , ''`

# matlab - 如何删除重复的日期刻度标签

> ID：15977948
> 
> 赞同：0
> 
> 时间：2013-04-12T18:01:00.230
> 
> 标签：matlab, plot, axis-labels

我正在尝试绘制 63 年的月度数据，并且一些标签正在重复（用箭头表示），如下图所示：

![](https://i.stack.imgur.com/mkcZg.jpg)

为了处理 x-labels，我使用了以下代码：

```
xdate = datenum (datestring2, 'yyyy/mm');
plot (xdate,data1.data(:,4), 'b', xdate,data1.data(:,6),'r', ...
xdate,data1.data(:,8),'k', xdate,data1.data(:,10),'g');
xtic=xdate(1):12:xdate(end); 
set(gca,'XTick',xtic);
datetick('x', 'mm/yyyy', 'keepticks'); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T18:50:09.120

您可以利用以下的[结转](http://www.mathworks.co.uk/help/matlab/matlab_prog/carryover-in-date-vectors-and-strings.html)功能[`datenum()`](http://www.mathworks.co.uk/help/matlab/ref/datenum.html)：

```
out = datenum(2000,1:14,1); 
```

让我们验证一下：

```
datestr(out)
ans =
01-Jan-2000
01-Feb-2000
01-Mar-2000
01-Apr-2000
01-May-2000
01-Jun-2000
01-Jul-2000
01-Aug-2000
01-Sep-2000
01-Oct-2000
01-Nov-2000
01-Dec-2000
01-Jan-2001
01-Feb-2001 
```

现在将它们设置为`Xtick`：

```
set(gca,'Xtick',out) 
```

**编辑：使用开始结束日期**

```
% Provide example initial and final date
in = '20100324';
fi = '20130215';

% Decompose with datevec, count number of months, and skip one month if day > 1
infi    = datevec({in,fi},'yyyymmdd');
nmonths = diff(infi(:,1:2))*[12 1]' + infi(1,2);
skipone = infi(1,3) ~= 1;

% Calculate dates 
out = datenum(infi(1), (infi(1,2) + skipone):nmonths, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:44:38.827

你的表情`xtic=xdata(1):12:xdate(end)`说你想要每 12 天打一次勾；通常这意味着您将获得两个（甚至三个）重复的月份。一个快速而肮脏的解决方案是

```
xtic = xdata(1):30:xdate(end); 
```

但在某些情况下，这可能会跳过二月，并且当您运行大量月份时将是错误的。

为了正确解决这个问题，您需要在每个月的第一天放置刻度。一种可能的方法是：

```
xdate = datenum(datestring2, 'yyyy/mm');
d1 = datevec(xdate(1)); % [year, month, date, hour, min, sec]
d2 = datevec(xdate(end)+30); % one month past the last data point
nm = ceil((xdate(end) - xdate(1))*12/365); % whole number of months
mv = mod((1:nm) + d1(2) - 2, 12) + 1;  % months
yv = d1(1) + floor(((1:nm) + d1(2) - 1)/12); % years
ymdv = [yv' mv' ones(nm,1)];  % year, month, day for each tic
xtic = datenum(ymdv); % will turn this into "the first of every month" 
```

**编辑**Oleg Komarov 的回答指出了一种在每个月的第一天生成抽动的更清洁的方法 - 这是使用`datenum`可以处理大于 12 个月的事实。您可能可以通过使用使上述代码更紧凑和更清洁方法（例如，您可以省略 的`mod`操作`mv`，而只使用 d1(1) 作为年份）。但有时明确说明你在做什么并不是一件坏事。

# hibernate - Hibernate Hbm 多对多映射 - 如果多对多表中不存在关系，则删除另一部分？

> ID：15977956
> 
> 赞同：0
> 
> 时间：2013-04-12T18:01:20.327
> 
> 标签：hibernate, nhibernate, many-to-many, hbm

我想知道是否有办法配置 hbm 映射来做这样的事情：当我删除多对多关系的所有者时，在删除多对多表中的子项后，也删除实体如果他们都在多对多表中没有更多的孩子，则在关系的另一部分。

我尝试使用所有者一侧的属性 cascade=all 来做这样的事情，但这样总是删除另一部分，在多对多表中是否有其他更多寄存器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:35:19.563

不，当您删除最后一个引用时，没有任何现成的东西会删除实体。

您可以使用触发器或删除事件侦听器来做到这一点。在这两种情况下，您都必须编写所有逻辑。

# ios - 我可以在一个应用程序中拥有多个独立的 CoreData 堆栈吗？

> ID：15977957
> 
> 赞同：0
> 
> 时间：2013-04-12T18:01:24.060
> 
> 标签：ios, objective-c, xcode, core-data

我最初认为我的问题的答案是简单的“是”，但从那以后我所做的一些阅读让我再次看到了这个问题。

我的意图是使用模块化代码，这让我可以从多个代码部分中进行选择，以向应用程序添加各种功能。例如，我可能有一个允许安全浏览的浏览器组件、一个用于进行用户调查的调查组件，以及一个作为应用程序主要用途的“核心”组件——无论是显示菜单还是显示地图的一个位置。

我希望每个独立的模块都有自己的 CoreData 堆栈。除了由应用程序本身介导的任何事情（使用委托模型完成的与应用程序的通信）之外，它们不会以任何方式相互交谈或相互干扰。浏览器的书签列表和列入白名单的站点与调查的调查数据列表是分开的，这也与应用程序的“核心”所做的任何事情完全分开。如果他们需要相互交谈，他们可以通过委托调用来实现，这将包括告诉应用程序“我需要一个浏览器来显示 X 页面”、“使用这个 id 显示调查”，或者最后是“我是完成，返回主应用程序”。

让我开始走这条路的是意识到没有办法确定给定的 NSManagedObjectContextDidSaveNotification 是否属于给定的核心数据堆栈。而且，据推测，在 mergeChangesFromContextDidSaveNotification: 方法中向 MOC 提供来自不同核心数据堆栈的通知将是一个坏主意。（我也担心当你尝试将 MOC 自己的通知反馈给它时会发生什么，但这是我可以很容易地尝试的东西）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:15:20.147

您可以（并且这在 NSManagedObjectContext 文档中明确推荐）注册来自特定上下文的更改：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                           selector:@selector(<#Selector name#>)
                               name:NSManagedObjectContextDidSaveNotification
                             object:<#A managed object context#>]; 
```

当你收到这样的通知时，通知对象就是托管对象上下文。因此，可以创建独立的组件，其中每个组件都使用自己的核心数据堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:37:00.933

正如 Martin R 所指出的，您可以注册来自特定上下文的通知。如果您正在侦听来自多个上下文的通知，则还可以询问通知是哪个上下文发布了它并根据该上下文继续。使用`NSManagedObjectContextDidSaveNotification`，查看`[notification object]`以找出发布它的上下文。

除非存在某种与安全相关的问题，否则将对象保存在完全不同的堆栈中并具有单独的持久存储似乎有些过分。就像也许，出于某种原因，一个数据集合永远不允许靠近其他数据集合，这一点非常重要。如上所述，该应用程序似乎没有任何令人信服的理由来说明额外的复杂性。

您可能会发现最好使用一个堆栈和一个持久存储，但具有多种配置。每个配置都将包含来自数据模型的特定实体。您将有一个持久存储和一个`NSManagedObjectModel`实例，但有多个`NSPersistentStoreCoordinator`实例。调用时指明您想要的配置`addPersistentStoreWithType:configuration:URL:options:error:`。

# sql - 在值中放置一个负号

> ID：15977959
> 
> 赞同：1
> 
> 时间：2013-04-12T18:01:26.967
> 
> 标签：sql, select, negative-number

我有一个 SELECT 查询，如果它小于 100，我想在百分比值中放置一个负号。这是我的查询：

```
SELECT produces, amount, percentage FROM inventory 
```

我试过：

```
SELECT produces, amount, CASE WHEN percentage<100 THEN '-'+percentage ELSE percentage END FROM inventory 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:04:29.567

如果要反转符号，只需将其乘以 -1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:07:31.040

由于百分比列是某种数字，而不是字符串，因此您需要将其转换为 varchar，这样应该可以：

```
SELECT produces, amount, CASE WHEN percentage < 100 THEN '-' + CAST(percentage AS varchar(50)) ELSE CAST(percentage AS varchar(50)) END FROM inventory 
```

这是一个工作示例：

```
CREATE TABLE inventory (produces int, amount int, percentage int)

INSERT INTO inventory values(1, 1, 110)
INSERT INTO inventory values(2, 2, 100)
INSERT INTO inventory values(3, 3, 90)
INSERT INTO inventory values(4, 4, 80)

SELECT
    produces, 
    amount, 
    CASE 
        WHEN percentage < 100 
        THEN '-' + CAST(percentage AS varchar(50)) 
        ELSE CAST(percentage AS varchar(50)) 
    END
FROM
    inventory 
```

# linux - 如何撤消剥离 - 即将符号添加回剥离的二进制文件

> ID：15977961
> 
> 赞同：23
> 
> 时间：2013-04-12T18:01:36.907
> 
> 标签：linux, gdb, valgrind, strip

我有一个剥离的二进制文件和符号文件。是否可以将符号添加回二进制文件并创建一个未剥离的二进制文件。

我的用例是使用这个带有 valgrind 的二进制文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T17:40:16.917

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T18:25:39.573

Valgrind 支持[单独的调试文件](http://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html)，因此您应该在[此处使用答案](https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target)，并且 valgrind 应该与外部化调试文件一起正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-28T17:59:47.093

[elfutils](https://sourceware.org/elfutils/)附带了`eu-unstrip`可用于将符号文件与可执行文件合并的工具。然后可以使用结果代替剥离的版本。

# c# - 如何使用c#将十进制转换为十六进制？

> ID：15977966
> 
> 赞同：0
> 
> 时间：2013-04-12T18:01:50.857
> 
> 标签：c#, ascii

我有一个用 Delphi 编写的程序将 11 转换为**0xB**和 28 转换为**0x1c**。我尝试使用以下方法在 c# 中转换 11（十进制到十六进制）：-

```
var deciValue01 = 11;
var deciValue02 = 28;
var deciValue03 = 13;
System.Diagnostics.Debug.WriteLine(string.Format("11 = {0:x}", deciValue01));
System.Diagnostics.Debug.WriteLine(string.Format("28 = {0:x}", deciValue02));
System.Diagnostics.Debug.WriteLine(string.Format("13 = {0:x}", deciValue03)); 
```

但我得到的结果是： -

*   11 = 乙
*   28 = 1c
*   13 = d

想知道如何将 11 转换为 '0xB' 和 28 转换为 '0x1c' 和 13 转换为 '0xD'？我不需要从十进制更改为十六进制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:04:30.397

您只需要使用`X`将其设为大写十六进制数字而不是小写，然后添加您`0x`自己：

```
// Add using System.Diagnostics; at the top of the file... no need to
// explicitly qualify all your type names
Debug.WriteLine(string.Format("11 = 0x{0:X}", deciValue01));
Debug.WriteLine(string.Format("28 = 0x{0:X}", deciValue02));
Debug.WriteLine(string.Format("13 = 0x{0:X}", deciValue03)); 
```

请注意，这些`deciValue01`值本身既不是“十进制”也不是“十六进制”。它们只是数字。“十进制”或“十六进制”的概念仅在您谈论文本表示时才有意义，至少对于整数而言。（这对浮点很重要，其中可表示类型的集合取决于所使用的基数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-02T05:00:23.837

尝试这个

```
int value = Convert.ToInt32(/*"HexValue"*/);
String hexRepresentation = Convert.ToString(value, 16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:06:17.560

听起来你想要这个...

```
var deciValue01 = 11;
var deciValue02 = 28;
var deciValue03 = 13;
System.Diagnostics.Debug.WriteLine(string.Format("11 = 0x{0:x}", deciValue01));
System.Diagnostics.Debug.WriteLine(string.Format("28 = 0x{0:x}", deciValue02));
System.Diagnostics.Debug.WriteLine(string.Format("13 = 0x{0:x}", deciValue03)); 
```

# sql - 基于 If 语句的 T-SQL 查询“Where”

> ID：15977971
> 
> 赞同：3
> 
> 时间：2013-04-12T18:02:23.257
> 
> 标签：sql, sql-server, tsql, stored-procedures

您好，我有以下来自 SQL 服务器存储过程的应用：

```
SET @GenderToSearchBy =
        CASE 
            When @Gender IS NOT NULL And @Gender='M' THEN @MaleID
            When @Gender IS NOT NULL And @Gender='F' Then @FemaleID
            Else NULL
        End

SELECT FRST_NAME,LAST_NAME,ID_NUMB,GRDE_DSCN,
GEND_ID FROM #TEMP_STUD WHERE GEND_ID=@GenderToSearchBy 
```

现在，我希望它能够工作，如果`@Gender`是 NULL 或不等于`M`或`F`然后搜索两种性别，这意味着这`WHERE`不是必需的，有没有办法做到这一点，而无需在 a 中编写 2 个单独的查询`CASE`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:03:44.450

尝试使用`COALESCE`

```
WHERE GEND_ID = COALESCE(@GenderToSearchBy, GEND_ID) 
```

或者`ISNULL`

```
WHERE GEND_ID = ISNULL(@GenderToSearchBy, GEND_ID) 
```

*   [合并（）](http://msdn.microsoft.com/en-us/library/ms190349.aspx)
*   [一片空白（）](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

# bdd - 如何默认 behat 输出使用 ansi 颜色

> ID：15977974
> 
> 赞同：2
> 
> 时间：2013-04-12T18:02:36.883
> 
> 标签：bdd, behat

我在 OSX 10.8.3 上使用 behat2.4.5，behat 不会自动检测 ANSI / Color 输出兼容性。

我被迫将声明运行为

```
bin/behat --ansi 
```

有没有办法让它成为 behat.yml 中的默认值，或者其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:10:11.227

好的，我错过的明显解决方案是使用别名：

```
alias behat="bin/behat --ansi" 
```

但我想知道是否有可用的跨平台选项。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-04T09:29:48.003

FormatProcessor.php 中的更改：

```
// --[no-]ansi
        ->addOption('--ansi', null, InputOption::VALUE_NONE, 
```

至

```
// --[no-]ansi
        ->addOption('--ansi', null, InputOption::VALUE_OPTIONAL, 
```

# viewmodel - Durandal：从另一个视图模型访问一个视图模型

> ID：15977977
> 
> 赞同：4
> 
> 时间：2013-04-12T18:02:46.900
> 
> 标签：viewmodel, single-page-application, durandal

使用 Durandal，我的应用程序中有两个视图模型，比如说 vmCompanies 和 vmEmployees。我有两个视图，每个视图模型一个，在每个视图中，您可以看到所有公司和所有员工。

但是，当我加载我的员工时，在数据库中他们有一个他们受雇于哪个公司的 ID。我想做的是以下伪：

*   从 vmEmployees 中，获取对 vmCompanies 的引用
*   如果 vmCompanies 已经被初始化（我知道这是 99% 的时间），获取对它的引用，以便我可以使用 linq.js 之类的东西来查找该员工工作的特定公司
*   如果 vmCompanies 尚未初始化（又名：激活），请执行此操作

这样我就可以避免要求 vmEmployees 拥有自己的公司内部缓存。到目前为止，我一直无法弄清楚在 Durandal 中如何查询并询问“给我这个你已经加载的视图模型”。似乎它在内部具有这种功能，因为当我在视图之间导航时，它们会被缓存而不是重新加载（与 VM 相同）......到目前为止，我还无法看到如何*做到*这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T00:42:21.087

您可以`require()`通过__moduleId____ 手动查看模型。只要您的视图模型模块返回一个对象而不是函数，您将处理一个单例，因此您可以确保您将获得正确的实例。

如果你不确定 __moduleId__ 是什么，你可以使用[这个 chrome 扩展](https://chrome.google.com/webstore/detail/knockoutjs-context-debugg/oddcpmchholgcjgjdnfjmildmlielhof?hl=en)来查看你的视图模型的属性，包括 __moduleId__。

**但是**，与其手动实例化 VM，更好的选择可能是创建一个单独的模块，用于存储缓存的公司。我有一个带有自己的内部缓存的数据模块，我一般将其用于此目的，但您可以专门为公司创建一个，并将该信息存储在其中。如果合适的话，它甚至可以负责加载自己的数据。

这里有一些简单的代码来帮助解释：

*请注意，这使用了require JS 的[糖语法](http://requirejs.org/docs/whyamd.html#sugar)- 如果您使用基于数组的语法，则需要进行相应的翻译。如果需要，我可以提供帮助。*

```
//companies-cache.js
define(function(require){

    //some auto-loading logic here, if you wish
    var companies = ko.observableArray([]);

    return {
        companies: companies
    };
});

//vmCompanies, vmEmployees
define(function(require){
    var companiesCache = require("viewModels/companies-cache");

    //additional properties for this specific VM
    ...

    return {
        companies: companiesCache.companies
    };
}); 
```

# utf-8 - 如何将 UTF 8 编码的文本文件读入文本字段？

> ID：15977983
> 
> 赞同：0
> 
> 时间：2013-04-12T18:03:16.237
> 
> 标签：utf-8, livecode

如何将 UTF-8 编码的文本文件读入文本字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:24:26.793

在 LiveCode 中使用 Unicode 时，您需要注意 LiveCode 始终使用 UTF-16 编码文本（格式取决于您的代码运行的处理器：大端或小端）。因此，要读取 UTF-8 编码的文本文件并显示它，您需要首先将数据转换为 UTF-16。

在读取文件时，您需要确保 LiveCode 不会自动为您转换行尾。最简单的方法是使用`put`带有`URL`关键字和`binfile:`前缀文件名的命令。假设文件的路径在变量 theFilename 中，这将读取文件内容，同时保持数据的完整性：

```
put URL ("binfile:" & theFilename) into theText 
```

现在您在变量中拥有数据（仍编码为 utf-8），您需要使用`uniencode`.

```
put uniencode(theText, "utf8") into theText 
```

现在文本被编码为 UTF-16，您可以在字段中显示它。

```
set the unicodeText of field "SomeField" to theText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:00:16.473

在字典中阅读以下内容：

useUniCode（属性） uniEnCode（函数） UniDeCode（函数）

事实上，任何名称中包含“uni”的条目。

克雷格纽曼

# ios - 应用程序在后台运行时 IOS 闪烁和响铃

> ID：15977992
> 
> 赞同：1
> 
> 时间：2013-04-12T18:03:42.547
> 
> 标签：ios, objective-c

我们正在构建一个希望在后台运行的应用程序。我不确定的是在后台运行时我们被限制在什么范围内。

想象一个类似于标签的应用程序。UserA 和 UserB 都在运行该应用程序。UserA 打开应用程序使用该应用程序，然后切换到一个新应用程序。用户 B 打开应用程序，然后单击锁定屏幕按钮并将手机塞入口袋。

当应用程序的想法是当用户 A 和用户 B 彼此相距不超过 100 英尺时，他们的手机开始响铃/振动并触发相机闪光灯（假设手机处于它们留在上面的状态）。如果应用程序未打开且用户正在查看，这可能会响铃/振动/闪光吗？

任何链接/参考将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:08:21.040

当您的应用程序在后台时，不可能触发闪光灯，因为要做到这一点，您基本上是在启动相机。Apple 知道用户不喜欢能够在后台拍照的应用程序，因此这种行为是不可能的。

然而，对于另一个誓言 - 您想要检查它们是否在 100 英尺内，您希望您的应用程序在后台运行，收集位置坐标（可能）并将它们安全地上传到您的服务器。

然后，您可以向每部手机发送推送通知，但您一次无法让它们发出超过 15 秒的声音。