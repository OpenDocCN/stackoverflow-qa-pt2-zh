# StackOverflow 问答 16136000-16136999

# php - 在类中正确使用array_push？

> ID：16136000
> 
> 赞同：1
> 
> 时间：2013-04-21T20:42:12.330
> 
> 标签：php, class, function, variables, array-push

我有一个这样的 PHP 类：

```
<?php
class MyClass {
    public $my_variable = array();

    public function func1() {
        $var1 = $this->my_variable;
        array_push($var1, 'var1');
        return $this->my_variable;
    }

    public function func2() {
        $var2 = $this->my_variable;
        array_push($var2, 'var2');
        return $this->my_variable;
    }
}

$my_class = new MyClass;

print_r($my_class->func1());
print_r($my_class->func2());
?> 
```

这两个`print_r`函数返回一个空数组，并且没有显示错误。

如何将“var1”和“var2”字符串添加到`$my_variable`数组中？我不确定我要去哪里错了......！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:44:46.933

`$var1 = $this->my_variable`实际上创建了数组的副本，然后您将值推送到该副本上。

相反，您可以这样做：`$var1 = &$this->my_variable`改为创建引用，但最好根本没有无意义的变量：

```
public function func1() {
    $this->my_variable[] = 'var1';
    return $this->my_variable;
}
public function func2() {
    $this->my_variable[] = 'var2';
    return $this->my_variable;
} 
```

或者，更恰当地说：

```
public function add($value) {
    $this->my_variable[] = $value;
    return $this->my_variable;
}
// call with `$my_class->add('var1'); $my_class->add('var2'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:44:41.050

您必须`$var`通过引用分配 's。您复制数组，然后将一些条目添加到副本中，然后返回初始数组。

```
$var2 = &$this->my_variable; 
```

是对的。`&`此处标记为参考。

# java - 调用重绘时 JCheckBox 消失

> ID：16136004
> 
> 赞同：0
> 
> 时间：2013-04-21T20:42:25.317
> 
> 标签：java, jcheckbox

我有一个`JCheckBox`图像顶部，但每当`repaint()`被称为`JCheckBox`消失。如果我单击它最初所在的位置，它会再次可见。我试过`setVisible(true)`在每次重绘时都设置它，但没有奏效。

有谁知道我该如何解决这个问题？

# gem - 在 Windows 8 上使用 gem 安装 SASS

> ID：16136006
> 
> 赞同：4
> 
> 时间：2013-04-21T20:42:31.053
> 
> 标签：gem, sass, ruby-2.0

我正在尝试在 Windows 8 x64 上安装 SASS，但仍然出现错误，即使我的防火墙已关闭。

**我发出这个命令：**

```
C:\Ruby200-x64\bin>gem install sass
(or C:\Ruby200-x64\bin>ruby -S gem install sass) 
```

**我得到这个回应：**

```
ERROR:  Could not find a valid gem 'sass' (>= 0), here is why:
          Unable to download data from http://rubygems.org/ - Errno::EACCES: Per
mission denied - connect(2) (http://rubygems.org/latest_specs.4.8.gz) 
```

请问有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-13T15:13:18.143

这对我来说是工作。尝试这个...

**宝石源 -a [http://rubygems.org/](http://rubygems.org/)**

回答“你想添加这个不安全的源吗？”的问题**。**

然后你可以使用命令...

**宝石安装 sass**

*   祝你好运，伙计！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:18:26.447

**问题解决了**

即使 Norton Security 被禁用，Windows 防火墙也被禁用，仍然出现此错误。卸载 Norton Security 后，它工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:18:22.733

尝试使用管理权限运行您的控制台。

# c# - 未授权访问异常

> ID：16136012
> 
> 赞同：0
> 
> 时间：2013-04-21T20:43:34.230
> 
> 标签：c#, ftpwebrequest

我正在使用这里的教程：http: [//www.devtoolshed.com/content/c-download-file-progress-bar](http://www.devtoolshed.com/content/c-download-file-progress-bar)我在以下代码行收到 UnauthorizedAccessException

```
using (Stream streamLocal = new FileStream(sPathToWriteFilesTo, 
FileMode.Create, FileAccess.Write, FileShare.None)) 
{ 
    //... 
} 
```

也许它具有我要读取的文件的权限？它只是一个使用 FTP（而不是教程所示的 HTTP）请求的简单文本文件。

```
string sFtpToReadFilesFrom = "ftp://<user>:<pass>@mysite.tk/updates/App_Data/output_log.txt";
string sPathToWriteFilesTo = Application.StartupPath + "\\App_Data";

Uri url = new Uri(sFtpToReadFilesFrom);
FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(url);
request.Timeout = 10000;
request.ReadWriteTimeout = 10000;
request.Method = WebRequestMethods.Ftp.GetFileSize;
FtpWebResponse response = (FtpWebResponse)request.GetResponse();
response.Close(); 
```

如果有人看到 FtpWebRequest 的任何直接危险信号，请告诉我。我主要关心 UnauthorizedAccessException 以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-24T14:39:44.220

如果您使用的是 Win10，此行可能会导致错误：

```
string sPathToWriteFilesTo = Application.StartupPath + "\\App_Data"; 
```

由于其中一项更新，您无法将文件从网络位置直接复制到某些文件夹中。尝试下载文件夹或直接在 C 驱动器上的一些文件夹（例如`c:\TMP`）。

# panel - Parallels Plesk Panel 9.5.4 升级到 11.0.9 后无法加载

> ID：16136020
> 
> 赞同：0
> 
> 时间：2013-04-21T20:44:40.027
> 
> 标签：panel, plesk, parallels

我正面临恼人的问题。我的托管服务提供商给我发了一封电子邮件，说我的 Plesk 面板版本太旧，需要更新。所以我登录到我的 Parallels Plesk 面板，然后单击更新，我选择了最新版本并收到了升级成功的确认电子邮件。

之后，我的域现在加载了 Horder 网络邮件登录表单，而不是我的网页。当我尝试登录我的 Parallels Plesk 面板时，我得到：

```
ERROR: Zend_Db_Statement_Exception
SQLSTATE[42S02]: Base table or view not found: 1146 Table 'psa.smb_apsPackages' doesn't exist

0: Pdo.php:234
Zend_Db_Statement_Pdo->_execute(array)
1: Statement.php:300
Zend_Db_Statement->execute(array)
2: Abstract.php:479
Zend_Db_Adapter_Abstract->query(string 'DESCRIBE `smb_apsPackages`', array)
3: Abstract.php:238
Zend_Db_Adapter_Pdo_Abstract->query(string 'DESCRIBE `smb_apsPackages`')
4: Mysql.php:169
Zend_Db_Adapter_Pdo_Mysql->describeTable(string 'smb_apsPackages', NULL null)
5: Abstract.php:835
Zend_Db_Table_Abstract->_setupMetadata()
6: Abstract.php:874
Zend_Db_Table_Abstract->_setupPrimaryKey()
7: Abstract.php:982
Zend_Db_Table_Abstract->info()
8: Select.php:100
Zend_Db_Table_Select->setTable(object of type Smb_Db_Table_Broker_ApsPackages)
9: Select.php:78
Zend_Db_Table_Select->__construct(object of type Smb_Db_Table_Broker_ApsPackages)
10: Abstract.php:1018
Zend_Db_Table_Abstract->select()
11: Abstract.php:1331
Zend_Db_Table_Abstract->fetchAll(string '`name` = 'osTicket'')
12: Abstract.php:150
Db_Table_Abstract->findByFields(array, boolean true)
13: Abstract.php:162
Db_Table_Abstract->findOneByFields(array)
14: Config.php:14
HelpDesk_Config::getHelpDeskInstances()
15: NavigationContext.php:342
NavigationContext->_fetchHelpDeskSectionNodes(object of type UserAdmin)
16: NavigationContext.php:196
NavigationContext->fetchCustomButtonsSectionNodes(object of type UserAdmin)
17: NavigationContext.php:70
NavigationContext->fetchSection(object of type UserAdmin, string 'custom_buttons', array)
18: NavigationContext.php:402
NavigationContext->get(object of type UserAdmin)
19: Navigation.php:95
Navigation->getUserContextList(object of type UserAdmin)
20: Navigation.php:113
Navigation->getRoot(object of type UserAdmin)
21: Navigation.php:357
Navigation->buildPathbar(string '/license.php3', NULL null, object of type UserAdmin, string 'dashboard')
22: Navigation.php:348
Navigation->getPathbar(NULL null)
23: Navigation.php:144
Navigation->detectCurrentUpLevelURI()
24: Abstract.php:303
Form_Abstract->_getUpLevelLink()
25: Abstract.php:312
Form_Abstract->renderPathbarButton(object of type Navigation, NULL null)
26: Form.php:109
Form->assign()
27: license.php3:75 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:09:56.073

看起来像来自第三方存储库[的 libmysqlclien15 中的错误。](http://forum.parallels.com/showthread.php?258266-Plesk-update-to-10-4-error)

试试这个解决方案[http://kb.parallels.com/en/113737](http://kb.parallels.com/en/113737)

# ruby-on-rails-3.2 - 检查 Rails 中是否存在长链关联

> ID：16136030
> 
> 赞同：1
> 
> 时间：2013-04-21T20:45:19.987
> 
> 标签：ruby-on-rails-3.2, rails-activerecord

我正在为此编写一个涉及一长串关联的动作，例如：

```
@featured_image = @content_page.content_tree_item.children.first.featured_images.first 
```

我想知道`@featured_image = nil`这些关联是否不存在。我可以：

```
@featured_image = @content_page.content_tree_item.children.first.featured_images.first rescue nil 
```

但是，将整个链条覆盖在一个`rescue`看起来很骇人听闻的情况下，可能会掩盖其他问题。有没有一种“rails 方式”，或者至少是一种更好的方式来做到这一点，只捕捉不存在的关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:47:43.903

使用[andand gem](http://andand.rubyforge.org/)或`try`.

也就是说，一般来说，像这样的火车残骸通常表明相当高的东西对相当低的东西有太多的了解，并且可能需要进行一些重构或委托。

# c - 在 Qt-Creator SDK 上以 root 身份运行代码

> ID：16136035
> 
> 赞同：4
> 
> 时间：2013-04-21T20:46:11.687
> 
> 标签：c, linux, qt, qt-creator

我使用 Qt-Creator 2.5.2 SDK 在 Linux 上开发 C 代码。从 SDK 界面（例如，ctrl + R）运行代码时，如何以 root 身份运行代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T06:16:06.490

以 root 身份运行 Qt-Creator 的最简单解决方案

老实说，这不是一项微不足道的任务（只要我之前尝试过自己做）。你确定你真的需要在root下运行调试吗？如果是关于访问某些设备节点，是否更容易调整它们的权限？

另一种解决方案（让 QT 创建者在用户帐户下运行可能类似于）

调整 sudoers (/etc/sudoers)

```
 <user> <machine>= NOPASSWD: /usr/bin/gdb 
```

然后制作一个类似于 /usr/bin/sudo-gdb 的包装脚本：

```
 #!/bin/bash
 sudo gdb $@ 
```

然后指示 QT Creator 使用 sudo-gdb 作为调试器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-02T13:14:43.820

在 Qt 支持论坛上推荐了以下操作：

在 Qt Creator 中，在 Options -> Devices 中添加远程 Linux 设备。将其地址设置为 localhost，将用户设置为 root。创建一对身份验证密钥并将公钥粘贴到`/root/.ssh/authorized_keys`. 然后在选项 -> 套件中克隆桌面套件，并将新套件的设备设置为您在上一步中创建的设备。

现在，当您开始调试时，Qt Creator 应该会自动以 root 身份通过 ssh 连接到 localhost，启动 gdbserver 并执行调试。

它也可以在不调试的情况下运行。

也许您应该在远程主机上安装程序，但这是另一回事，Qmake 和 QBS 的做法也不同。

[https://forum.qt.io/post/185983](https://forum.qt.io/post/185983)

# javascript - 让文本围绕用户可以移动的对象流动

> ID：16136039
> 
> 赞同：2
> 
> 时间：2013-04-21T20:47:01.263
> 
> 标签：javascript, html, css, css-float

我有一个向左浮动的 div，以及一些环绕它的文本。

我希望能够使用 javascript 上下移动 div。当我这样做时，我希望文本围绕它流动（根据需要在它的上方和下方）。

我希望很清楚我想要达到的目标。如果您将对象放置在 Word 文档中，则类似于文本的行为方式。

我已经对其进行了一些研究，我得出的结论是，只有当 div 包含在与文本相同的父元素中时才有可能。如果要上下移动 div，则必须在文本本身内移动其位置（例如，从后面取一个句子并将其移动到前面）。

做一些像给它一个上边距这样的事情只是扩展了文本必须围绕的块，并使其位置相对意味着文本围绕其原始位置流动，并且相对定位的 div 与文本重叠。这一切都很有道理，但很难实现我想要的。

html/css 中是否有任何内容可以满足我的需求，或者任何插件可以满足我的描述。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:56:56.510

Marcels 链接实际上很有趣。

我可能很想捏造它并得到一个接近的近似值，因为它很简单，并且可以让您成功。

[http://jsfiddle.net/tromm/e3YHb/](http://jsfiddle.net/tromm/e3YHb/)

```
var img = $('#whale');
var nextP = img.next();
var previousP = img.prev();

$('#move-down').click(function() {
    nextP = img.next();
    img.detach();
    img.insertAfter(nextP)
});

$('#move-up').click(function() {
    previousP = img.prev();
    img.detach();
    img.insertBefore(previousP)
}); 
```

本质上是通过 s 移动。在小提琴中，我还浮动了图像，所以它看起来几乎有点像你期望的那样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:09:35.323

这就是我正在研究的（如果它对任何人有用的话）。它试图通过文本移动元素，检查 offsetTop 以查看它何时实际移动到新行（我只做了向下运动）。然后我会继续弄清楚在拖动元素时如何多次调用它。我需要付出太多的努力（我必须考虑元素中的元素），而且看起来它总有一天会出现在 html 中，所以我会接受 Tom 的解决方案。

```
function down(el) {
    var parentDiv = el.parentNode;
    var next = el.nextSibling;
    var prev = el.previousSibling;
    var match, word;

    var offset = el.offsetTop;

    while ((match = /^\s*\S+\s*/.exec(next.nodeValue)) !== null && el.offsetTop === offset) {
    word = match[0];

    if (prev === null) {
        prev = parentDiv.insertBefore(document.createTextNode(''), el);
    }

    prev.nodeValue += word;
    next.nodeValue = next.nodeValue.substring(word.length);
    }

    if (el.offsetTop !== offset) {
    return;
    }

    var nextDiv = findNextDiv(parentDiv);

    if (nextDiv === null) {
    return;
    }

    parentDiv.removeChild(el);

    if (nextDiv.firstChild === null) {
    nextDiv.appendChild(el);
    }
    else {
    nextDiv.insertBefore(el, nextDiv.firstChild);
    if (el.offsetTop === offset) {
        down(el);
    }
    }
}

function findNextDiv(el) {
    var next;
    while ((next = el.nextSibling) !== null) {
    if (next.tagName === 'DIV') {
        return next;
    }
    el = next;
    }
    return null;
} 
```

# ruby-on-rails - 在客户端等待时使用工作人员处理作业并在完成时返回响应

> ID：16136045
> 
> 赞同：1
> 
> 时间：2013-04-21T20:47:58.273
> 
> 标签：ruby-on-rails, ruby, delayed-job, resque, sidekiq

我正在使用 Rails 构建一个 API，请求进来，它们需要由运行在不同服务器上的一组工作人员执行（这些工作人员调用远程 API 并解析数据等）。我将使用 Sidekiq 或 Resque 来处理队列/处理。

我的问题是客户端需要在发生这种情况时等待，并且控制器需要在完成后将响应返回给客户端。我将如何在控制器中处理这个？我们正在使用 redis 后端，所以我正在考虑订阅 pub/sub 频道并等待工作人员发布状态消息。控制器将等待设定的时间段，然后如果没有及时收到消息，则向客户端返回“稍后再检查”响应。实现它的最佳方法是什么，或者有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:00:43.923

**不要让您的客户等待！**如果您让控制器阻止长时间运行的作业，则会出现很多问题：

*   其他程序可能会假设请求超时（代理、浏览器、脚本等）
*   它使您的 API 端点成为拒绝服务的来源
*   它需要您将更多的工程工作放入 Web 服务器（因为 Rails 进程在处理阻塞调用时无法处理另一个 Web 请求）

使用 Sidekiq 或 Resque 的部分原因是避免控制器在 http 请求期间进行大量提升。

相反，**后台作业应该向数据库报告它们的状态**。然后 Web 服务器应该从数据库中查询并返回客户端的最新状态。

如果客户需要更即时的反馈，您可以：

*   让客户不断轮询
*   向客户端发布请求（如果 API 使用者是另一个网络服务器）
*   使用另一种协议机制（例如 - websockets）。

# javascript - Signalr stockticker 示例不起作用 - javascript 错误

> ID：16136049
> 
> 赞同：0
> 
> 时间：2013-04-21T20:48:09.327
> 
> 标签：javascript, asp.net, signalr

我已经从 nuget 包中下载了 signalr stockticker 示例，但它不起作用！通过 Visual Studio 调试运行 stockticker.html 时收到的错误消息是

> 0x800a138f - Microsoft JScript 运行时错误：无法获取属性“客户端”的值：对象为空或未定义

我需要做些什么才能让这个演示立即工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:57:41.463

确保 StockTicker.html 中 SignalR JS 文件引用中的版本号与 Scripts 文件夹中 SignalR JS 文件的版本号相同。此外，请参阅 asp.net 站点上此示例的教程：

[http://www.asp.net/signalr/overview/getting-started/tutorial-server-broadcast-with-aspnet-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-server-broadcast-with-aspnet-signalr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:18:16.830

这是因为您需要添加一个 Visual Studio Web 应用程序，而不是网站。

# vb.net - 使用 vb.net 从 ms 访问中选择随机数量的记录，然后随机导航这些记录

> ID：16136052
> 
> 赞同：1
> 
> 时间：2013-04-21T20:48:56.187
> 
> 标签：vb.net, random, record

我想在 vb.net 中创建一个考试应用程序，其中包含一个问题、4 个选项和一个答案

现在我的数据库中有 400 个问题及其选项和答案。

测试应该是100分。

我应该随机向考生提问

但是怎么做？

我在谷歌搜索后得到了下面的查询

```
"SELECT * FROM tblQuestions ORDER BY rand() LIMIT 1" 
```

但我不知道该查询的含义，尤其是 LIMIT 1 的含义

如果上述查询以某种方式从数据库中随机获取数据，那么当用户给出第一个问题的答案时我应该怎么做。我的意思是向用户显示第二个问题的代码应该是什么？

# http - 对 Burp 套件入侵者进行攻击的另一种选择

> ID：16136054
> 
> 赞同：0
> 
> 时间：2013-04-21T20:49:25.913
> 
> 标签：http, metasploit, backtrack-linux, burp

我一直在使用 Burp Suite 发出 http 请求并从 .csv 文件中获取有效负载，我想知道如何使用其他软件来执行此操作或攻击的名称是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T11:05:20.550

您使用的是 Burp 的哪个模块？Burp 是一个拦截代理，它拦截浏览器发出的所有请求。

另一个流行的拦截代理是 OWASP ZAP。去谷歌上查询。

# c - 数组的复制导致0？

> ID：16136055
> 
> 赞同：0
> 
> 时间：2013-04-21T20:49:34.397
> 
> 标签：c, arrays, copying

我正在学习 C，我的一个函数（此处未显示）取决于两个相同的数组。我有一个数组并且正在尝试生成一个副本，但是发生的情况是两个数组在复制后都充满了 0。我不知道这是怎么发生的.. 任何人都可以帮助解释为什么会发生这种情况并提供如何正确执行的解决方案吗？

```
#include <stdio.h>

int main(){

    int array[5]={3,2,7,4,8};
    int other_array[5]={0,0,0,0,0};

    for (int i=0; i<5; i++) array[i]=other_array[i];    //Copies array into other_array

    printf("array is:\n");
    for (int j=0; j<5; j++) printf("%d", array[j]);
    printf("\nother_array is:\n");
    for (int i=0; i<5; i++) printf("%d", other_array[i]);
    printf("\n");

    return 0;
}

/*
When run this yields
**********************
array is:
00000
other_array is:
00000
*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:51:11.187

```
//Copies array into other_array
for (int i=0; i<5; i++) array[i]=other_array[i]; 
```

尝试：

```
other_array[i] = array[i]; 
```

赋值运算符将右操作数的值赋给左操作数中的对象。而不是相反。

另外，正如其他答案中所说：

```
printf("\nother_array is:\n");
for (int i=0; i<5; i++) printf("%d", array[i]); 
```

您正在打印`array`而不是`other_array`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:52:05.747

你打印了错误的数组，你打印`array`了两次

```
printf("array is:\n");
for (int j=0; j<5; j++) printf("%d", array[j]);
printf("\nother_array is:\n");
for (int i=0; i<5; i++) printf("%d", other_array[i]);//<-- here
printf("\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:55:32.067

当然你可以只写：

```
int main(){

    int array[]       = { 3, 2, 7, 4, 8};
    int other_array[] = { 0, 0, 0, 0, 0};

    memcpy(other_array, array, sizeof other_array);

    /* then print */

} 
```

然后`#include <assert.h>`：

```
assert(sizeof array == sizeof other_array) 
```

# java - 签名的Java小程序突然出现混码警告

> ID：16136057
> 
> 赞同：4
> 
> 时间：2013-04-21T20:49:42.083
> 
> 标签：java, applet, jarsigner

我的网站上有一个签名的小程序，它已经运行了将近一年。然而，今天，它给我的用户一个混合代码警告。我在[这里](https://stackoverflow.com/questions/12929690/signed-applets-without-a-mixed-code-warning)发现我碰巧使用的某些 Apache 组件会生成混合代码警告。但是，有两件事让我担心。

1.  首先，我的小程序由一个签名的 jar 文件组成，当我使用时，`jarsigner -verify my_signed_file.jar`我得到了`jar verified`输出。（它没有链接到任何外部库，所有编译的代码都在这个 jar 文件中。）

2.  我突然收到这条消息，即使我的小程序 jar 近一年没有修改过。我和我的客户已经使用 Java 1.7 运行时一段时间了，但没有收到此消息，那么为什么我们今天会收到此消息？

任何想法或想法将不胜感激。谢谢你。

——杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T17:26:26.107

从 Java 7 Update 21 开始，它会在您签名的小程序中遇到混合代码时显示警告消息。

您需要将 Trusted-Only: true 属性添加到清单文件中，这样它就不会显示警告对话框。

[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mixed_code.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mixed_code.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T17:28:36.600

您还没有制作 .crt 文件来签署您的 jar。请查看[http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html) 您需要在命令提示符下创建一个 .crt 文件才能使用 -jarsigner

# python - 烧瓶（Python）断管错误

> ID：16136058
> 
> 赞同：4
> 
> 时间：2013-04-21T20:49:54.323
> 
> 标签：python, sockets, flask, pipe

我在 Apache Web 服务器上运行 Flask 框架，但我时不时地出现以下错误，有人可以帮我解决这个问题吗？当我收到此错误时，我的 Web 服务器不响应任何请求。

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 641, in __init__
    self.finish()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

# php - 用新的 INT 更新 mySQL INT

> ID：16136064
> 
> 赞同：1
> 
> 时间：2013-04-21T20:50:44.683
> 
> 标签：php, mysql, database, dice

好的，对于基本大纲，我正在尝试根据代码的结果更新 mySQL 数据库中的列。

基本上它是掷骰子，如果你击败了房子，它会增加你的 5，如果你输给房子，它会减少 5。这是出于我自己的教育目的，不会公开使用。

不工作的部分是 mysq_query("UPDATE") 有赢有输。

```
if (isset($_POST['roll'])) {
    $rand = rand(1, 6);
    $rand1 = rand(1, 6);
    $rand2 = rand(1, 6);
    $rand3 = rand(1, 6);
    $score = $rand + $rand1;
    $score1 = $rand2 + $rand3;

    echo 'You rolled a '.$rand.' and a '.$rand1.' Totalling '.$score;?><br><?
    echo 'Your opponent rolled a '.$rand2.' and a '.$rand3.' Totalling '.$score1;?><br><br><?
    if ($score > $score1){
        echo 'Win';
        $coins = $user_data['coins'] + 5;
        mysql_query("UPDATE `users` SET `coins` = '$coins' WHERE `user_id` = $user_id");
    } else {
        echo 'Loose';
        $coins1 = $user_data['coins'] - 5;
        mysql_query("UPDATE `users` SET `coins` = '$coins1' WHERE `user_id` = $user_id");
    }
}           
?>  
<form action="playdice.php" method="POST">
    <input type="submit" name="roll" value="Roll Dice.">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:58:09.320

你不需要`'`周围`$coins`。那些指定输入是 a `CHAR`，所以 MySQL 可能试图插入 a`CHAR`并拒绝，因为它是一个`INT`列。

您似乎也没有定义要查询的连接。

```
$mysqli = new mysqli("localhost", "user", "password", "database");
...
if ($score > $score1){
    echo "Win";
    $coins = $user_data['coins'] + 5;
    $mysqli->query("UPDATE `users` SET `coins` = $coins WHERE `user_id` = $user_id");
} else {
    echo "Lose";
    $coins = $user_data['coins'] - 5;
    $mysqli->query("UPDATE `users` SET `coins` = $coins WHERE `user_id` = $user_id");
} 
```

这应该有效。（很抱歉将您从已弃用的`mysql`语法中切换出来，但老实说，我不记得了，如果您正在学习，最好还是使用它`mysqli`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:06:59.443

`'`在周围加上a `$user_id`，它可能是一个字符串。删除引号告诉 MySQL 它是一个整数。

# java - 将 3x3 tictactoe 转换为 5x5 tictactoe

> ID：16136065
> 
> 赞同：0
> 
> 时间：2013-04-21T20:50:46.963
> 
> 标签：java, algorithm

我正在尝试将 3x3 tic tac toe 算法转换为 5x5 tic tac toe 算法。我搜索了很多算法，但每次我修改代码时，计算机都会从第一行开始，然后从该行的每一列开始。

这是我在网上找到的代码

公共类井字游戏{

```
 /* the board */
 private int board[][];
 /* empty */
 public static final int EMPTY = 0;
 /* player one */
 public static final int ONE = 1;
 /* player two */
    public static final int TWO = 2;

 public TicTacToeAI() {
  board = new int[3][3];
 }

 /* get the board value for position (i,j) */
 public int getBoardValue(int i,int j) {
  if(i < 0 || i >= 3) return EMPTY;
  if(j < 0 || j >= 3) return EMPTY;
  return board[i][j];
    }

 /* set the board value for position (i,j) */
 public void setBoardValue(int i,int j,int token) {
  if(i < 0 || i >= 3) return;
  if(j < 0 || j >= 3) return;
  board[i][j] = token;
    }

 /* calculate the winning move for current token */
 public int []nextWinningMove(int token) {

  for(int i=0;i<3;i++)
   for(int j=0;j<3;j++)
    if(getBoardValue(i, j)==EMPTY) {
     board[i][j] = token;
     boolean win = isWin(token);
     board[i][j] = EMPTY;
     if(win) return new int[]{i,j};
    }

  return null;
    }

    public int inverse(int token) {
  return token==ONE ? TWO : ONE;
 }

    /* calculate the best move for current token */
    public int []nextMove(int token) {

        /* lucky position in the center of board*/
        if(getBoardValue(1, 1)==EMPTY) return new int[]{1,1};

        /* if we can move on the next turn */
        int winMove[] = nextWinningMove(token);
        if(winMove!=null) return winMove;

        /* choose the move that prevent enemy to win */
        for(int i=0;i<3;i++)
            for(int j=0;j<3;j++)
                if(getBoardValue(i, j)==EMPTY)
                {
                    board[i][j] = token;
              boolean ok = nextWinningMove(inverse(token)) == null;
                    board[i][j] = EMPTY;
                    if(ok) return new int[]{i,j};
                }

        /* choose available move */
        for(int i=0;i<3;i++)
            for(int j=0;j<3;j++)
                if(getBoardValue(i, j)==EMPTY)
                    return new int[]{i,j};

        /* no move is available */
        return null;
    }

 /* determine if current token is win or not win */
 public boolean isWin(int token) {
      final int DI[]={-1,0,1,1};
      final int DJ[]={1,1,1,0};

      for(int i=0;i<3;i++)
           for(int j=0;j<3;j++) {

            /* we skip if the token in position(i,j) not equal current token */
            if(getBoardValue(i, j)!=token) continue;

                for(int k=0;k<4;k++) {
                     int ctr = 0;
                                 while(getBoardValue(i+DI[k]*ctr, j+DJ[k]*ctr)==token) ctr++;

                     if(ctr==3) return true;
            }
      }
      return false;
    } 
```

}

这是我修改的代码：

```
 /* the board */
 private int board[][];
 /* empty */
 public static final int EMPTY = 0;
 /* player one */
 public static final int ONE = 1;
 /* player two */
    public static final int TWO = 2;

 public TicTacToeAI() {
  board = new int[5][5];
 }

 /* get the board value for position (i,j) */
 public int getBoardValue(int i,int j) {
  if(i < 0 || i >= 5) return EMPTY;
  if(j < 0 || j >= 5) return EMPTY;
  return board[i][j];
    }

 /* set the board value for position (i,j) */
 public void setBoardValue(int i,int j,int token) {
  if(i < 0 || i >= 5) return;
  if(j < 0 || j >= 5) return;
  board[i][j] = token;
    }

 /* calculate the winning move for current token */
 public int []nextWinningMove(int token) {

  for(int i=0;i<5;i++)
   for(int j=0;j<5;j++)
    if(getBoardValue(i, j)==EMPTY) {
     board[i][j] = token;
     boolean win = isWin(token);
     board[i][j] = EMPTY;
     if(win) return new int[]{j,i};
    }

  return null;
    }

    public int inverse(int token) {
  return token==ONE ? TWO : ONE;
 }

    /* calculate the best move for current token */
    public int []nextMove(int token) {

        /* lucky position in the center of board*/
        if(getBoardValue(2, 2)==EMPTY) return new int[]{2,2};

        /* if we can move on the next turn */
       int winMove[] = nextWinningMove(token);
        if(winMove!=null) return winMove;

        /* choose the move that prevent enemy to win */
        for(int i=0;i<5;i++)
            for(int j=0;j<5;j++)
                if(getBoardValue(i, j)==EMPTY)
                {
                    board[i][j] = token;
              boolean ok = nextWinningMove(inverse(token)) == null;
                    board[i][j] = EMPTY;
                    if(ok) return new int[]{i,j};
                }

        for(int i=1;i<4;i++)
            for(int j=1;j<4;j++)
                if(getBoardValue(i, j)==EMPTY)
                    return new int[]{i,j};
                /* choose available move */
                else{
                    for(i=0;i<5;i++)
                        for(j=0;j<5;j++)
                            if(getBoardValue(i, j)==EMPTY)
                                return new int[]{i,j};

                }
        /* no move is available */
        return null;
    }

 /* determine if current token is win or not win */
public boolean isWin(int token) {
      final int DI[]={-1,0,1,1,1,0};
      final int DJ[]={1,1,1,0,-1,0};

      for(int i=0;i<5;i++)
           for(int j=0;j<5;j++) {

            // we skip if the token in position(i,j) not equal current token 
            if(getBoardValue(i, j)!=token) continue;

                for(int k=0;k<5;k++) {
                     int ctr = 0;
                                 while(getBoardValue(i+DI[k]*ctr, j+DJ[k]*ctr)==token) ctr++;

                     if(ctr==4) return true;
            }
      }
      return false;
    } 
```

}

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:58:02.683

原始程序使用的策略仅适用于 3x3 井字棋——它不会超越自己的下一步行动，因此无法完成五步链。（如果它以某种方式连续获得四个，它可以完成一个链条，并且它会被对手阻挡一排，但它不能做任何更复杂的事情。）你需要设计一个新的策略来做到这一点工作。

# sql - 一个字段具有多个值的 SQL 记录

> ID：16136066
> 
> 赞同：0
> 
> 时间：2013-04-21T20:50:52.713
> 
> 标签：sql, database-design, schema

为某个字段可能具有多个值的记录设计表模式的最佳方法是什么？

例如，一个文档可以有多个与之关联的概念。每个文档也可以有不同数量的概念。我正在尝试设计一个表格，其中每条记录都是一个文档及其元数据，但我在概念字段方面遇到了问题。我应该把所有的概念都塞进一个叫做“概念”的领域吗？或者为概念 1、概念 2 等创建不同的字段。问题是我不知道每个文档可以包含多少概念。我正在尝试使用 SQL 关系数据库来设计它，尽管我知道有面向对象的数据库可能更适合我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:00:36.350

> 我应该把所有的概念都塞进一个叫做“概念”的领域吗？

不，这会违反[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反 1NF，并导致执行完整性和查询方面的问题。

> 或者为概念 1、概念 2 等创建不同的字段。

*仅*当您对每个文档的概念数量有明确的限制时，您才知道将来不会改变。但是您说您*“不知道每个文档可以包含多少概念”*。

> 为某个字段可能具有多个值的记录设计表模式的最佳方法是什么？

取决于是否可以在不同文档之间共享相同的概念。

*   如果**no**，那么这是一个一对多的关系，可以类似这样表示：

    ![在此处输入图像描述](https://i.stack.imgur.com/Dfi4f.png)

*   如果**是**，那么这是一个多对多的关系，需要一个额外的“联结”（又名“链接”）表，类似于：

    ![在此处输入图像描述](https://i.stack.imgur.com/AeUUb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:02:04.577

这取决于这里的“概念”是什么。这有什么意义吗？有什么相关的吗？
如果一个字段的值本身是有意义的，我会坚持使用一个字段和“枚举”的值。
如果每个“概念”都有特定的附加属性，您最好考虑使用一个带有“概念”的表以及这两者之间的多对多关系。我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:41:02.173

如果概念很重要，那么您应该有一张`concepts`桌子。这将是一个参考表，其中包含`conceptId`有关概念是什么的信息。

然后，您可以有一个名为`DocumentConcepts`. 这将具有以下字段：

*   DocumentConceptId（此表的唯一 ID）
*   客户 ID
*   概念标识

它还可能具有其他信息，例如优先级（哪个是第一？哪个是第二？），何时将概念添加到文档中，以及其他此类信息。

# java - 用于性能跟踪的 Java 自定义注解

> ID：16136071
> 
> 赞同：1
> 
> 时间：2013-04-21T20:51:20.450
> 
> 标签：java, performance, annotations

我想测量我项目中各种功能的性能。这将在多个线程上运行，所以现在我有这样的东西

```
long start = System.currentTimeMillis();
first();
StatsTracker.putTime("first", System.currentTimeMillis() - start);
...
start = System.currentTimeMillis();
second();
StatsTracker.putTime("second", System.currentTimeMillis() - start); 
```

其中 StatsTracker 是一个静态类，它只是跟踪性能图。

我是编写自定义注释的新手，我在网上看到的一些教程让它有点混乱。我最终想要的是这样的

```
@StartTime("first")
first();
@EndTime("first")
...
@StartTime("second")
second();
@EndTime("second") 
```

然后对于开始/结束时间注释，我希望这两个注释记录当前系统时间，然后将该运行时间放入地图中（以记录平均性能）。

编辑：在函数定义之前有这样的东西可能更自然：

```
@TrackTime("first")
public void first() { ... } 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:09:15.250

注释只是元数据。他们什么都不做。

A framework can get the annotations on methods and classes using reflection to do something with them. This means that, to do what you want to do, you would need to use AOP to find the annotations on the methods and measure the time they spent.

Such frameworks exist (like Jamon combined with Spring beans for example). But writing one yourself will take much more time than doing what you're doing now, and will probably force you to change the way your application is architected in order to use some form of dependency injection. Or you'll have to instrument the byte-code with AspectJ for example.

So my advice would be: don't change anything, or use an dependency injection framework and use an existing product (like jamon for example), or write a custom AOP interceptor to measure the time taken by the methods of the components.

# jquery - jQuery - 在元素后隐藏文本

> ID：16136072
> 
> 赞同：1
> 
> 时间：2013-04-21T20:51:33.690
> 
> 标签：jquery, hide

我有这样的源代码：

```
<div class="abc">
<strong>ddffgg</strong>
qwerty
</div> 
```

我想隐藏后面的文本`</strong>`- 在这个例子中它是：`qwerty` - 如何用 jQuery 来做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:04:12.283

尝试

```
var size = $('.abc').css('font-size');
$('.abc').css('font-size', 0);
$('.abc').children().css('font-size', size); 
```

[http://jsfiddle.net/2pj8x/](http://jsfiddle.net/2pj8x/)

或者

```
$($('.abc strong')[0].nextSibling).wrap('<span style="display:none"></style>'); 
```

[http://jsfiddle.net/2pj8x/1](http://jsfiddle.net/2pj8x/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T21:05:03.420

[**.hide()**](http://api.jquery.com/hide/)不会隐藏文本节点，它只隐藏元素。您应该将要隐藏的内容包装在 a`span`或`div`等之下，然后您就可以使用隐藏它们`.hide()`

[查看演示](http://jsfiddle.net/mohammadAdil/3uq2X/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T20:56:30.077

您应该将文本添加到另一个 div 中，然后将其隐藏。

```
<div class="abc">
<strong>ddffgg</strong>
<div id="toggleText">qwerty</div>
</div> 
```

然后只需用 jquery 切换第二个 div：

```
$('#toggleText').hide(); //to hide
$('#toggleText').show(); //to show 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T21:19:14.133

将文本放在`<p>`,`<span>`等`<div>`中，然后：假设您使用：

`<p class="delete">qwerty</p>`

`$("p").removeClass("delete");` 然后课程和文本消失了

# c# - C# 当视频结束时，关闭活动表单

> ID：16136073
> 
> 赞同：0
> 
> 时间：2013-04-21T20:51:35.190
> 
> 标签：c#, media-player, wmp

我正在尝试关闭正在播放视频的表单。我希望它在视频结束时关闭所述表单。

我正在使用嵌入到我的表单中的 wmp，隐藏了 ui 模式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:57:55.620

您可以订阅播放器的[PlayStateChange 事件](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd562460%28v=vs.85%29.aspx)。

```
wmp.PlayStateChange += new AxWMPLib._WMPOCXEvents_PlayStateChangeEventHandler(wmp_PlayStateChange);

private void wmp_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
{
    if(e.newState == 8)
       this.Close();
} 
```

# python - Python排序列表，里面有列表

> ID：16136074
> 
> 赞同：0
> 
> 时间：2013-04-21T20:51:40.217
> 
> 标签：python, list, sorting, python-2.7

假设一个列表列表，如下所示：

```
lists=[[3,2,1,4],[6,4,2,8],[9,6,3,12]] 
```

如果我想按`lists[0]`它排序，应该这样排序：

```
lists=[[1,2,3,4],[2,4,6,8],[3,6,9,12]] #can be another variable 
```

有一个包含三个列表的列表：

```
list1,list2,list3=(list(t) for t in zip(*sorted(zip(lists[0], lists[1],lists[2])))) 
```

但这是一个特定的解决方案，列表中的 n 个列表可能更通用。变量是这样创建
的：`lists`

```
lists = [[] for x in xrange(n)] 
```

并附加了这些值。

实际上所有值都是数字（浮点数或整数），但这可能会更好地解释它。

```
lists=[[3,2,1,4],["three","two","one","four"],["tres","dos","uno","cuatro"]] 
```

我想知道如何排序并最终得到这个：

```
[[1,2,3,4],["one","two","three","four"],["uno","dos","tres","cuatro"]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:42:53.893

这可能是最好使用 Schwartzian 变换的不太可能的情况

```
>>> lists=[[3,2,1,4],["three","two","one","four"],["tres","dos","uno","cuatro"]]
>>> [[x for i, x in sorted(zip(lists[0], sublist))] for sublist in lists]
[[1, 2, 3, 4], ['one', 'two', 'three', 'four'], ['uno', 'dos', 'tres', 'cuatro']] 
```

# php - 是否可以在外部 PHP 文件中定义变量并在类中使用它而不将其作为参数传递。如果是，如何？

> ID：16136081
> 
> 赞同：-1
> 
> 时间：2013-04-21T20:52:19.473
> 
> 标签：php

我的意思是一个变量，其行为类似于 PHP 超级全局变量（$_POST、$_GET 等），因此一旦定义它，它就可用于所有脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:54:05.013

如果您将索引添加到[`$GLOBALS`](http://www.php.net/manual/en/reserved.variables.globals.php).

像这样：

```
$GLOBALS['foo'] = 'bar'; 
```

`$GLOBALS`将在任何范围内可用。

* * *

您也可以在全局范围内定义一个变量。但是要在函数中可用，它必须在函数中使用[`global`](http://www.php.net/manual/pt_BR/language.variables.scope.php)关键字声明。

```
$foo = 1;

function test() {
    global $foo;
    echo $foo;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:09:07.233

您可以通过定义变量来做到这一点。

```
define(MY_VAR,"MY_VALUE"); 
```

您可以继续并将它们全部放入一个 php 文件中，该文件包含在您需要这些变量的其他 php 文件中。您可以像这样选择这些变量：

```
include('VARS_FILE.php');
$var = MY_VAR; 
```

# java - PageOutputStream 导致 java.lang.OutOfMemory

> ID：16136085
> 
> 赞同：1
> 
> 时间：2013-04-21T20:52:29.957
> 
> 标签：java, tomcat, struts2, out-of-memory, heap-memory

我们有一个在 Tomcat 7 中运行的 struts2 Web 应用程序，它间歇性地遇到同样的问题：

1.  应用程序完美正常运行
2.  在一段时间后（从 10 分钟到 7 天不等），应用程序减速到停止
3.  catalina.out 中的多个 java.lang.OutOfMemory 错误
4.  Linux free -m 显示所有物理和交换内存已用完（即使我在 setenv.sh 中设置了 Xmx8G）

我已将 Tomcat 配置为在 OutOfMemory 上创建自动堆转储，当我在 Eclipse 中使用 jmap 或 MAT 分析转储时，每个转储都显示相同的内容。所有内存都被 PageOutputStream 生成的近 100 万个 java.util.LinkedList$Node 占用。

![Eclipse MAT 直方图](https://i.stack.imgur.com/iB57R.png)

由于这些节点似乎是由 PageOutputStream 生成的，它是 Struts 中页面渲染的一部分，我的想法是在我们的一个 JSP 页面中有一个无限循环的 Struts 标签，它正在创建所有这些链表节点，但我很难理解如何我可能会找出那个页面可能是什么。

我想知道是否有人知道将这个问题进一步隔离到一行代码或一个jsp页面的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T17:14:06.933

我最终发现问题是 JSP 中的一个 Struts 标记被损坏了。我在控制器中检索一组结果并使用 JSP 在 JSP 中显示它们`<s:iterator>`

这些搜索结果包括一些嵌入式 HTML，它创建了更长的迭代，不是无限的，但足够长以快速消耗内存。一旦我修复了嵌入的 HTML，问题就消失了。

# android - 将 Calllog 详细信息存储到 SQLite DB

> ID：16136087
> 
> 赞同：0
> 
> 时间：2013-04-21T20:52:44.720
> 
> 标签：android, sqlite, nullpointerexception, calllog

我的申请遇到了一些问题。

我要做的是从通话记录中获取通话记录，将其传递到我的数据库中进行存储，然后在需要显示时检索值。

数据库已创建，但看起来值拒绝插入。下面是我的代码和logcat。

非常感谢您的帮助。

**我的主要活动**

```
package com.example.mobilebillforecaster;

import com.example.mbf.R;

import android.app.TabActivity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.os.Handler;
import android.provider.CallLog;
import android.widget.TabHost;
import android.widget.TextView;

@SuppressWarnings({ "deprecation", "deprecation" })
public class EtiMainScreen extends TabActivity {

SQLiteDatabase calllog;

Handler hand = new Handler();
Cursor cursor;
ContentValues cv;

TextView tvnatmins, tvintmins, tvnatsms;

@SuppressWarnings("deprecation")
protected void onCreate(Bundle Bundle) {
    super.onCreate(Bundle);
    setContentView(R.layout.eti_main_screen);
    TabHost.TabSpec spec = getTabHost().newTabSpec("tag1");

    spec.setContent(R.id.mainmenu);
    spec.setIndicator("Main Menu");
    getTabHost().addTab(spec);

    spec = getTabHost().newTabSpec("tag2");
    spec.setContent(R.id.billhist);
    spec.setIndicator("Billing History");
    getTabHost().addTab(spec);

    getTabHost().setCurrentTab(0);

    tvnatmins = (TextView) findViewById(R.id.tvnatmins);
    tvintmins = (TextView) findViewById(R.id.tvintmins);
    tvnatsms = (TextView) findViewById(R.id.tvnatsms);

    getCallDetails();

}

private void getCallDetails() {

    CallRecords recdb = new CallRecords();

    StringBuffer sb = new StringBuffer();
    Cursor managedCursor = getContentResolver().query(
            CallLog.Calls.CONTENT_URI, null, null, null, null);
    int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER);
    int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE);
    int duration = managedCursor.getColumnIndex(CallLog.Calls.DURATION);

    while (managedCursor.moveToNext()) {

        String callDuration = managedCursor.getString(duration);

        recdb.open();

        cv.put("CALL_NUMBER", number);
        cv.put("CALL_TYPE", type);
        cv.put("CALL_DURATION", duration);
        recdb.insertValues("Records", cv);
        recdb.close();

        sb.append("" + callDuration);

    }
    managedCursor.close();
    tvnatmins.setText(sb);
}

// tvnatmins.setText(number);
// tvintmins.setText(type);
// tvnatsms.setText(duration);

} 
```

**我的数据库**

```
package com.example.mobilebillforecaster;

import android.content.Context;

import android.content.ContentValues;
import android.database.Cursor;

import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
public class CallRecords {

private static final int DATABASE_VERSION = 1;
private DatabaseHelper DBhelper;
public SQLiteDatabase callDB;
static final String DATABASE_NAME = "DBLogs";
static final String TABLE_NAME = " Records";

public static final String CALL_ROWID = "_id";
public static final String CALL_NUMBER = "cnumber";
public static final String CALL_DURATION = "cduration";
public static final String CALL_TYPE = "ctype";

Context context;

private static final String Records = "CREATE TABLE " + TABLE_NAME + "("
        + CALL_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + CALL_NUMBER
        + " INTEGER, " + CALL_DURATION + " INTEGER, " + CALL_TYPE
        + " INTEGER" + ");";

private static class DatabaseHelper extends SQLiteOpenHelper {

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(Records);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS" + Records);

    }

}

public CallRecords open() {

    DBhelper = new DatabaseHelper(context);
    callDB = DBhelper.getWritableDatabase();

    return this;

}

public void close() {
    DBhelper.close();
}

public long insertValues(String rectable, ContentValues conValues) {
    return callDB.insert(rectable, null, conValues);

}

public Cursor getAllLogs() {

    String sql = "SELECT CALL_ROWID ,CALL_TYPE , CALL_DURATION, CALL_NUMBER 
FROM Records ";
    Cursor cursor = callDB.rawQuery(sql, null);
    return cursor;

}
} 
```

**最后是我的 LOGCAT**

```
04-21 20:42:57.294: E/AndroidRuntime(9388): FATAL EXCEPTION: main
04-21 20:42:57.294: E/AndroidRuntime(9388): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mbf/com.example.mobilebillforecaster.EtiMainScreen}: java.lang.NullPointerException
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.os.Looper.loop(Looper.java:137)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at java.lang.reflect.Method.invoke(Method.java:511)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at dalvik.system.NativeStart.main(Native Method)
04-21 20:42:57.294: E/AndroidRuntime(9388): Caused by: java.lang.NullPointerException
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at com.example.mobilebillforecaster.CallRecords.open(CallRecords.java:59)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at com.example.mobilebillforecaster.EtiMainScreen.getCallDetails(EtiMainScreen.java:66)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at com.example.mobilebillforecaster.EtiMainScreen.onCreate(EtiMainScreen.java:47)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.Activity.performCreate(Activity.java:5104)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-21 20:42:57.294: E/AndroidRuntime(9388):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-21 20:42:57.294: E/AndroidRuntime(9388):     ... 11 more 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:00:10.813

在您的`cv`变更声明中`ContentValues cv = new ContentValues();`

你需要一个构造函数`CallRecords`

```
public CallRecords(Context context)
{
    this.context = context;
} 
```

更改`CallRecords recdb = new CallRecords();`
为`CallRecords recdb = new CallRecords(this);`

# jsf - 如果请求 /login 和 isLoggedin 为真，为什么 servlet 过滤器不重定向到 /home

> ID：16136089
> 
> 赞同：0
> 
> 时间：2013-04-21T20:53:12.400
> 
> 标签：jsf, redirect, login, servlet-filters

我有两个 JSF 页面和一些托管 bean 和一个过滤器。

一切正常，过滤器**工作正常**；
- 用户必须登录。 - 因此，如果他寻找另一个页面（在这种情况下） ，
用户可以直接进入或重定向到它 - 一旦用户登录，他就可以浏览这些页面。 `login.xhtml``hom.xhtml`

**问题**将在下面的代码之后进行解释；

登录.xhtml：

```
 <h:form>
     <h:panelGrid columns="2">
     <h:outputLabel value="name:"/> <h:inputText value="#{user.name}"/>
     <h:outputLabel value="password:"/> <h:inputSecret value="#{user.password}"/>
     </h:panelGrid>
     <h:commandButton id="btn"  value="login" action="#{user.login()}"/>
  </h:form> 
```

主页.xhtml：

```
<h:body>
   Hello #{user.name}. You are welcome
</h:body> 
```

用户：

```
@ManagedBean
@SessionScoped
public class User implements Serializable
{
   String name; //Getter & Setter
   String password; //Getter & Setter
   Authentication authentication;

   public User()
   {
      authentication = new Authentication();
   }

   public String login()
   {
      if (this.getName().equals("user") &&(this.getPassword().equals("1234")))
      {
         authentication.setLoggedIn(true);
         FacesContext context = FacesContext.getCurrentInstance();
         context.getExternalContext().getSessionMap().put("auth", authentication);
         return "home";
      }
      else
      {
         authentication.setLoggedIn(false);
         FacesContext context = FacesContext.getCurrentInstance();
         context.getExternalContext().getSessionMap().put("auth", authentication);
         return "login";
      }
   }
} 
```

验证：

```
@ManagedBean
@SessionScoped
public class Authentication implements Serializable
{
   private boolean authenticated; //Getter & Setter
} 
```

筛选：

```
@WebFilter(value = "/faces/*")
public class LoginFilter implements Filter
{

   @Override
   public void init(FilterConfig filterConfig) throws ServletException
   {
      //throw new UnsupportedOperationException("Not supported yet.");
   }

   @Override
   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException
   {
      HttpServletRequest req = (HttpServletRequest) request;
      Authentication auth = (Authentication) req.getSession().getAttribute("auth");

      if ((auth != null && auth.isLoggedIn()) || (req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml")))
      {
         chain.doFilter(request, response);
      } else
      {
         HttpServletResponse res = (HttpServletResponse) response;
         res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
      }
   }

   @Override
   public void destroy()
   {
      //throw new UnsupportedOperationException("Not supported yet.");
   }
} 
```

* * *

我尝试将此功能添加到我的过滤器中：
- 用户登录后，他可以浏览所有页面，除了`login.xhtml`
- 如果他在地址栏中键入，`login.xhtml`他将被重定向到`home.xhtml`

我在 doFilter 方法中添加了简单的代码，所以它变成了：

```
 @Override
   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException
   {
      HttpServletRequest req = (HttpServletRequest) request;
      Authentication auth = (Authentication) req.getSession().getAttribute("auth");

      if ((auth != null && auth.isLoggedIn()) || (req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml")))
      {
         if (auth.isLoggedIn() && req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml"))
         {
            HttpServletResponse res = (HttpServletResponse) response;
            res.sendRedirect(req.getContextPath() + "/faces/home.xhtml");
         } else
         {
            chain.doFilter(request, response);
         }
      } else
      {
         HttpServletResponse res = (HttpServletResponse) response;
         res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
      }
   } 
```

甚至代码逻辑也很直观和容易
它给出了->`HTTP Status 500`

* * *

**更新**：

问题`HTTP Status 500`是由于调用`auth.isLoggedIn()`嵌套的`if`while `auth`is `null`。

更新`doFilter`以解决`null`问题：（但给出`This web page has a redirect loop`）：

```
 @Override
   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException
   {
      HttpServletRequest req = (HttpServletRequest) request;
      Authentication auth = (Authentication) req.getSession().getAttribute("auth");

      if ((auth != null && auth.isLoggedIn()) || (req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml")))
      {
         if (auth != null)
         {
            if (auth.isLoggedIn() && req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml"))
            {
               HttpServletResponse res = (HttpServletResponse) response;
               res.sendRedirect(req.getContextPath() + "/faces/home.xhtml");
            } else
            {
               chain.doFilter(request, response);
            }
         } else
         {
            HttpServletResponse res = (HttpServletResponse) response;
            res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
         }
      } else
      {
         HttpServletResponse res = (HttpServletResponse) response;
         res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
      }
   } 
```

浏览器打开：

> 此网页有重定向循环
> 位于的网页 `http://localhost:8080/LoginFilter_Simple/faces/login.xhtml`导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:36:36.393

问题是你的逻辑。如果用户已经登录，您的第一个`if`将导致循环。以下应该工作。

```
boolean isLoggedIn = (auth != null && auth.isLoggedIn());

// Check if the user is accessing "login.xhtml"
if (req.getRequestURI().equals("/LoginFilter_Simple/faces/login.xhtml")) {
    if (isLoggedIn) {
        // Redirect to "home.xhtml"
        HttpServletResponse res = (HttpServletResponse) response;
        res.sendRedirect(req.getContextPath() + "/faces/home.xhtml");
    } else {
        // Otherwise, nothing to do if he has not logged in
        chain.doFilter(request, response);
    }

} else {
    // For all other pages,
    if (isLoggedIn) {
        // Nothing to do
        chain.doFilter(request, response);
    } else {
        // Redirect to "login.xhtml" if he has not logged in
        HttpServletResponse res = (HttpServletResponse) response;
        res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
    }
} 
```

# quickfix - 断开连接后的 QuickFIX 市场数据请求

> ID：16136092
> 
> 赞同：0
> 
> 时间：2013-04-21T20:53:22.060
> 
> 标签：quickfix, fix-protocol

我正在使用快速修复。我开始会话并发送 MarketDataRequest，它工作正常，但在断开连接并重新连接 quickfix 会话后，我无法再获得任何市场数据。服务器根本没有响应我的 MarketDataRequests。只有会话重新创建才能解决此问题。

这怎么可能解决？重新连接后我应该怎么做才能接收市场数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:46:43.213

断线后试图获取市场数据就像挂断电话后试图通话一样。不可能; 沟通渠道没了！

（您是否有可能遗漏了一些重要的细节？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T14:02:50.110

您的日志应显示登录消息 (35=A) 以及尝试同步或重置序列号 (35=4)，具体取决于您的 FIX 引擎配置。

您没有看到登录或注销 (35=5) 消息吗？

尝试发出 TestRequest (35=1)，如果您已断开连接，那么看起来您的序列号不同步。

# java - 如何从使用 ASM 在运行时动态创建的 Java 类中获取和使用类类型？

> ID：16136095
> 
> 赞同：1
> 
> 时间：2013-04-21T20:53:48.403
> 
> 标签：java, compiler-construction, type-conversion, metaprogramming, java-bytecode-asm

我想扩展类，获取类文字，将其用作类型参数，或强制转换为它。

我已经有了解决方法，但我仍然很好奇。

目前我可以在运行时使用 ASM 定义一个类，创建一个具有`Object`类型的实例并通过反射调用其方法，但我不知道如何将其用作类类型。

当然，编译器不知道在运行时定义的类，但在这种情况下*我*知道它，我认为我看到它隐藏在 ASMified .java 文件中（下面的示例）。如何让编译器相信它在编译时*确实*知道类类型？

谢谢参观，

-朱利安

ASMified 类 B 的示例：欺骗的字节码生成代码`class B{String hello = "Hello B!"}`：

```
import java.util.*;
import org.objectweb.asm.*;
//import org.objectweb.asm.attrs.*;
public class BDump implements Opcodes {

public static byte[] dump () throws Exception {

ClassWriter cw = new ClassWriter(0);
FieldVisitor fv;
MethodVisitor mv;
AnnotationVisitor av0;

cw.visit(V1_6, ACC_SUPER, "B", null, "java/lang/Object", null);

{
fv = cw.visitField(0, "hello", "Ljava/lang/String;", null, null);
fv.visitEnd();
}
{
mv = cw.visitMethod(0, "<init>", "()V", null, null);
mv.visitCode();
mv.visitVarInsn(ALOAD, 0);
mv.visitMethodInsn(INVOKESPECIAL, "java/lang/Object", "<init>", "()V");
mv.visitVarInsn(ALOAD, 0);
mv.visitLdcInsn("Hello B!");
mv.visitFieldInsn(PUTFIELD, "B", "hello", "Ljava/lang/String;");
mv.visitInsn(RETURN);
mv.visitMaxs(2, 1);
mv.visitEnd();
}
cw.visitEnd();

return cw.toByteArray();
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:12:42.540

您不能在编译时使用编译时不存在的类。你能做的是

*   使用在编译时存在但在运行时替换为所需实现的类或接口。
*   使用在编译时可用但仅在运行时实现的接口。
*   使用反射在运行时调用构造函数/方法。

# ember.js - Ember 应用程序无法绑定延迟对象

> ID：16136111
> 
> 赞同：1
> 
> 时间：2013-04-21T20:55:36.170
> 
> 标签：ember.js

我有一个使用 ember-auth 的 Ember.js 应用程序。

```
Auth.on("signInSuccess", function() {
  App.currentUser = App.User.find(Auth.currentUserId);
}); 
```

我也有一个控制器（见**App.currentUser**）：

```
App.CustomersIndexController = Ember.ArrayController.extend({
  currentUserBinding: 'App.currentUser'

  customers: null,

  loadCustomers: (function() {
    var company = this.get('currentUser').get('company');
    return this.set('customers', company.get('customers'));
  }).observes('currentUser.company')
}); 
```

**问题：**

绑定不起作用，因为“App.currentUser”为空。控制器在“signInSuccess”事件之前初始化。

“客户”应将当前用户的公司客户作为默认值。控制器还具有逻辑（从显示的代码中删除），因此用户可以将“客户”设置为另一个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:51:17.230

您可能必须使用`set`方法来正确通知观察者。

```
App.set('currentUser', App.User.find(Auth.currentUserId)); 
```

# api - eventbrite 的 Organizer_get 函数是如何工作的？

> ID：16136113
> 
> 赞同：1
> 
> 时间：2013-04-21T20:55:42.923
> 
> 标签：api, eventbrite

我无法获得 eventbrite 的 /organizer_get API 端点来给我一个成功的结果。就像所有其他 api 请求一样，我已经包含了 app_key。

[https://www.eventbrite.com/json/organizer_get?id=52803052&app_key=FOO](https://www.eventbrite.com/json/organizer_get?id=52803052&app_key=FOO) （用实际的app_key替换FOO）

{“error”：{“error_type”：“未找到”，“error_message”：“无效的电子邮件和/或密码。”}}

（但它是有效的：[http](http://www.eventbrite.com/org/52803052?s=8134061) ://www.eventbrite.com/org/52803052?s=8134061 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:30:22.233

```
Note, I work on the platform team at Eventbrite. 
```

目前，`organizer_get`仅当发出请求的客户端是组织者记录的所有者时才返回结果。如果您有一个组织者帐户/ID 并使用该组织者 ID 提出请求，它将起作用。

显然，这是非常不直观的，并且根本没有记录。我会考虑解除这个限制，或者至少记录下这种行为。

# php - 如何使继承的类在PHP中运行来自同一类的方法

> ID：16136116
> 
> 赞同：0
> 
> 时间：2013-04-21T20:56:05.953
> 
> 标签：php, inheritance

我怎么了 OOP 在这里。

我想继承`Class A`

该`return_output`方法将做一些常见的事情，所以我不想在继承的类中编写它。

但是，当我这样做时，`B->return_output()`我希望它在 中运行该`do_something`方法`Class B`，但我看到它总是从`Class A`.

我应该`$this`用别的东西代替吗？

```
class A {
    private function do_something() {
        // do something
    }

    public function return_output() {
        $op = $this->do_something();

        // add some wrappers to $op
        return $op;
    }
}

class B extends A {    
    private function do_something() {
        // do something different
    }    
}

var newClass = new B;
echo B->return_output(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:01:03.800

使用受保护而不是私有，因为您在范围 a 内运行它并且范围 b 无法访问私有范围 a：

```
class A {
        protected function do_something() {
            echo('ado_something');
        }

        public function return_output() {
            $op = $this->do_something();

            // add some wrappers to $op
            return $op;
        }
    }

    class B extends A {    
        protected function do_something() {
             echo('bdo_something');
        }    
    }

    $newClass = new B;
    echo $newClass->return_output(); 
```

# javascript - 有任何在线工具可以将 jQuery 在线转换为老式的 Javascript 吗？

> ID：16136117
> 
> 赞同：2
> 
> 时间：2013-04-21T20:56:11.020
> 
> 标签：javascript, jquery

我正在摆弄各种类似于 Zurbs [flex 视频](http://www.zurb.com/word/responsive-video)的视频大小调整方法，并找到了最简单的选项，对我来说，在 css-tricks 网站上[，](http://css-tricks.com/NetMag/FluidWidthVideo/Article-FluidWidthVideo.php)代码如下（在 jQuery 中）：

```
 var $allVideos = $("iframe[src^='http://player.vimeo.com'], iframe[src^='http://www.youtube.com']"),
          $fluidEl = $(".content");
        $allVideos.each(function() {
          $(this).data('aspectRatio', this.height / this.width)
          .removeAttr('height').removeAttr('width');
        });
        $(window).resize(function() {
          var newWidth = $fluidEl.width();
          $allVideos.each(function() {
            var $el = $(this);
            $el.width(newWidth).height(newWidth * $el.data('aspectRatio'));
          });
        }).resize(); 
```

jQuery API 非常棒，但是，在这个特定的实例中没有使用其他 jQuery，所以我发现很难证明通过几行代码加载整个 jQuery 库是合理的......是否有任何在线工具可以转换 jQuery到'老派'js？由于我不止一次遇到这个问题，所以我才刚刚开始深入学习 Javascript，因为这些天它似乎需要更多作为先决条件。因此，即使是一些涉及该主题的参考站点也会有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:02:55.687

我不知道任何转换工具。但是，如果您对学习 jquery 感兴趣，这里有一个链接会有所帮助。

[http://net.tutsplus.com/tutorials/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/](http://net.tutsplus.com/tutorials/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/)

# mysql - MySQL - 将来自同一个表的多个选择组合到一个结果表中，其中一个 group by

> ID：16136119
> 
> 赞同：1
> 
> 时间：2013-04-21T20:56:19.867
> 
> 标签：mysql, sql, database, pivot

我有一个仪表读数表，其中包含一个meterNo、readingValue 和 readingDate。

我想显示每年每米读数的总和。

例如：

```
SELECT meterNo, SUM(readingValue) '2009' FROM readings
WHERE readingDate >= '2009-01-01' AND readingDate <= '2009-12-31'
GROUP BY meterNo; 
```

将显示表格：

```
 meterNo  2009
   --------------
     4       50
     5       5
     12      30
     13      63
     18      18
     26      484
     27      21
     28      510
     29      28 
```

这就是我想要的，它显示了 2009 年每个仪表的总读数值。但是，我需要结果表来显示每年的一列。所以它会是这样的：

```
 meterNo  2009  2010  2011  2012
   --------------------------------
     1             20    35     50
     2                   45     35
     3                   50     60
     4       50    35    20     30
     5       5     10    10     15
     6                          30 
```

等等...

我可以重用查询的 where 部分：

```
WHERE readingDate >= '2009-01-01' AND readingDate <= '2009-12-31' 
```

并且只需更改每年的日期，但是如何在一个结果表中将每个 WHERE 结果显示为自己的列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:33:27.797

MySQL 没有 PIVOT 函数，但您可以使用带有`CASE`表达式的聚合函数将数据行转换为列。

如果您的 数量有限`years`，则可以对查询进行硬编码：

```
select meterNo,
  sum(case when year(readingDate) = 2009 then readingValue else 0 end) `2009`,
  sum(case when year(readingDate) = 2010 then readingValue else 0 end) `2010`,
  sum(case when year(readingDate) = 2011 then readingValue else 0 end) `2011`,
  sum(case when year(readingDate) = 2012 then readingValue else 0 end) `2012`,
  sum(case when year(readingDate) = 2013 then readingValue else 0 end) `2013`
from readings
group by meterno; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cbbb1c/1)

但是，如果您将有未知数量的值或随着新年添加到数据库中要调整的查询，那么您可以使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN year(readingDate) = ',
      year(readingDate),
      ' THEN readingValue else 0 END) AS `',
      year(readingDate), '`'
    )
  ) INTO @sql
FROM readings;

SET @sql 
  = CONCAT('SELECT meterno, ', @sql, ' 
            from readings
            group by meterno');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/cbbb1c/3)。两者都给出结果：

```
| METERNO | 2009 | 2010 | 2012 | 2013 | 2011 |
----------------------------------------------
|       1 |   90 |  180 |    0 |   90 |   90 |
|       2 |   50 |    0 |   90 |    0 |    0 |
|       3 |   80 |   40 |   90 |   90 |    0 | 
```

作为旁注，如果您想`null`在没有值而不是零的行中显示，那么您可以删除`else 0`（参见[Demo](http://sqlfiddle.com/#!2/cbbb1c/6)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T21:31:42.113

您可以使用[CASE WHEN](http://msdn.microsoft.com/en-us/library/ms181765.aspx)来执行此操作。它允许您根据多个条件对多个值求和。在您的示例中，您可以执行以下操作（我简化了示例，因为我无权访问您的实际数据）：

```
SELECT meterNo, 
sum(CASE WHEN readingDate = 2009 THEN readingValue END) as '2009',
sum(CASE WHEN readingDate = 2010 THEN readingValue END) as '2010',
sum(CASE WHEN readingDate = 2011 THEN readingValue END) as '2011',
sum(CASE WHEN readingDate = 2012 THEN readingValue END) as '2012'
FROM readings
GROUP BY meterNo 
```

您需要使用自己的`sum(CASE WHEN readingDate >= '2009-01-01' AND readingDate <= '2009-12-31' THEN readingValue END)`- 等来切换条件 - 但它应该可以工作。这是我在 sqlFiddle 上做的一个工作示例：[http](http://sqlfiddle.com/#!2/6990e/29) ://sqlfiddle.com/#!2/6990e/29 。输出是五列，每个meterNo 的总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:07:09.583

你可以这样做：

```
SELECT 
    meterNo, SUM(readingValue) AS `total`, YEAR(readingDate)
FROM 
    readings
GROUP BY 
    meterNo, YEAR(readingDate); 
```

结果：

```
METERNO     TOTAL   YEAR(READINGDATE)
1           90      2009
1           90      2010
2           50      2009
3           80      2009
3           40      2010 
```

还要注意如何使用`YEAR`函数而不是你拥有的 where 子句。

[见小提琴](http://sqlfiddle.com/#!2/f9ff1/1/0)

# c - C：“写：断管”错误

> ID：16136123
> 
> 赞同：0
> 
> 时间：2013-04-21T20:56:28.523
> 
> 标签：c, linux, unix, pipe

我想尝试与子进程和父进程进行管道通信。父进程写入管道，子进程读取此内容，但我的程序出现错误“写入：管道损坏”。如何更改此代码？谢谢。

```
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <termios.h>
#include <errno.h>
#include <fcntl.h>

int main(void)
{
    int i=0;
    int child=5;
    int fdp;
    int fds[2];
    int controlRead;
    int controlWrite;
    char pathName[30] = {"Trying Pipe Communication\n"};

    if(pipe(fds) < 0)
    {
        perror("pipe");
        exit(EXIT_FAILURE);
    }

    do{

        if(child == 0)
        {
            close(fds[1]);
            if( (controlRead = read(fds[0],pathName,sizeof(pathName)) ) <= 0)
            {
                perror("read");
                exit(EXIT_FAILURE);
            }
            close(fds[0]);

            printf("boru :%s\n",pathName);
            wait();
        }
        else
        {

            printf("Parent process\n");
            close(fds[0]);
            if( (controlWrite = write(fds[1],&pathName,sizeof(pathName))) <= 0)
            {
                perror("write");
                exit(EXIT_FAILURE);
            }
            close(fds[1]);

        }
        i++;
        child = fork();
    }while(i<3);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:04:22.380

> 错误“写入：损坏的管道”。如何更改此代码？

在写入之前不要破坏管道。在第一次通过 do/while 循环时，父级关闭读取端，然后写入剩余的管道 fd。卡布拉姆。管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:58:58.643

您的读取循环应在关闭套接字之前计算读取的字节数。否则过早终止。

管道不是数据包传输，单次读/写实际上是一系列操作。所以当你在写一个数组时，假设它会是一个整体是错误的。

# xcode - 集合视图在模拟器中不可见

> ID：16136125
> 
> 赞同：0
> 
> 时间：2013-04-21T20:56:38.990
> 
> 标签：xcode, ios-simulator, uicollectionview, uicollectionviewcell, collectionview

我是 Xcode 的新手。我正在构建一个包含集合视图的应用程序。它在故事板视图中看起来很棒，但是当我运行模拟器时什么都没有显示。我在单元格中有图像和标签。我为单元创建了一个子类，并将图像和标签的连接连接到 .h 文件中。现在我只是制作一个存根原型（单元格不链接到任何东西）。如果有人可以给我一个答案或只是提出一些尝试，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:57:03.633

您正在制作一个**动态原型**- 要实际显示数据，您需要阅读**`datasources`**和**`delegates`**.

如果我是你，我会先尝试制作一个简单的`UITableView`应用程序。谷歌`UITableView tutorial`开始。

在你熟悉了上面的概念之后，我建议你去看看一个集合视图教程——当你得到它时，它是一组相对简单的概念，但你必须先得到它:)

# c++ - 十六进制的 C++ fwrite()

> ID：16136126
> 
> 赞同：0
> 
> 时间：2013-04-21T20:56:52.520
> 
> 标签：c++, fwrite

使用 Winsock 编写代码。
我目前有这个：

```
fwrite(buff, 1, len, stdout); 
```

如何做到这一点：

```
for ( int i = 0; i < len; i++ ) {
printf( "%02x ", unsigned char (buff[i]) );
}
printf( "\n" ); 
```

还是我应该删除 fwrite 并使用 print 代替？
我想将它写入标准输出，因为我可以选择写入标准输出或写入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:59:14.757

`fprintf`（参见[文档](http://www.cplusplus.com/reference/cstdio/fprintf/)）就像`printf`一个任意文件：

```
fprintf(stdout, "%02x ", unsigned char (buff[i])); 
```

# ajax - 每次在rails 3的选择标签中选择一个项目时，如何将参数传递给控制器 ？

> ID：16136132
> 
> 赞同：0
> 
> 时间：2013-04-21T20:57:15.877
> 
> 标签：ajax, ruby-on-rails-3

这是我的选择语句，我想我无法弄清楚如何使它工作：

```
<%= select("post", {project_id: @project, word_id: @word_id}, 
              @words[count].synonyms.all.collect {|syn| [ syn.name ] ,
              {:id=>"Menu1_Id", :class => "Menu1_Class", :onchange => "alert('hey')"}) %> 
```

@project 和 @word_id 是我想让它传递给控制器​​的参数，在哪里添加我的 url 路径？

# bash - 从文件中读取行并将它们以逗号分隔的字符串保存到变量中

> ID：16136136
> 
> 赞同：3
> 
> 时间：2013-04-21T20:57:25.883
> 
> 标签：bash, variables, cat

我想从文本文件中读取行并将它们保存在变量中。

```
 cat ${1} | while read name; do

  namelist=${name_list},${name}

  done 
```

该文件如下所示：

```
David

Kevin

Steve
etc. 
```

而我想得到这个输出

大卫、凯文、史蒂夫等。

并将其保存到变量 ${name_list}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:00:28.983

```
name_list=""
for name in `cat file.txt`
   do VAR="$name_list,$i"
done 
```

**编辑**：此脚本在 name_list 的开头留下一个“，”。有很多方法可以解决这个问题。例如，在 bash 中这应该可以工作：

```
name_list=""
for name in `cat file.txt`; do
   if [[ -z $name_list ]]; then
      name_list="$i"
   else
      name_list="$name_list,$i"
   fi  
done 
```

**重新编辑**：所以，感谢弗雷德里克的合法投诉：

```
name_list=""
while read name
do 
  if [[ -z $name_list ]]; then
      name_list="$name"
   else
      name_list="$name_list,$name"
   fi
done < file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:27:16.397

## 命令：

```
$ tr -s '\n ' ',' < sourcefile.txt             # Replace newlines and spaces with [,] 
```

这可能会返回 a`,`作为最后一个字符（也可能是第一个字符）。去除逗号并返回令人满意的结果：

```
$ name_list=$(tr -s '\n ' ',' < sourcefile.txt)      # store the previous result
$ name_list=${tmp%,}                                 # shave off the last comma
$ name_list=${tmp#,}                                 # shave off any first comma 
```

* * *

### 编辑

该解决方案的运行速度提高了 44%，并在所有 Unix 平台上产生一致且有效的结果。

```
# This solution
python -mtimeit -s 'import subprocess' "subprocess.call('tmp=$(tr -s "\n " "," < input.txt);echo ${tmp%,} >/dev/null',shell = True)"
100 loops, best of 3: 3.71 msec per loop

# Highest voted:
python -mtimeit -s 'import subprocess' "subprocess.call('column input.txt | sed "s/\t/,/g" >/dev/null',shell = True)"
100 loops, best of 3: 6.69 msec per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:48:20.377

使用`column`, 和`sed`:

```
namelist=$(column input | sed 's/\t/,/g') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T05:31:34.023

```
variable=`perl -lne 'next if(/^\s*$/);if($a){$a.=",$_"}else{$a=$_};END{print $a}' your_file` 
```

# clojure - 在 Titan 中创建版本节点

> ID：16136139
> 
> 赞同：1
> 
> 时间：2013-04-21T20:57:45.063
> 
> 标签：clojure, titan

我是图形数据库和 Titan 的新手。我将 Titan 嵌入到 Clojure 应用程序中。当应用程序启动时，它会创建一个 BerkeleyDB 支持的 Titan 存储。

我想知道/做三件事：

1.  这个数据库是新的吗？如果是这样，请创建版本为 0 的版本节点。运行迁移过程以将“模式”带到最新版本。
2.  如果没有，它是否有版本节点？如果不是，则抛出异常。
3.  如果数据库预先存在并且具有版本节点，则运行迁移过程以使“模式”保持最新。

我如何在泰坦中做到这一点？对此有最佳做法吗？

编辑：

好的，经过进一步审查，我认为使用硬编码的顶点 ID 是最有意义的。有一个 TitanTransaction.containsVertex(long vertexid)。这种方法有什么缺点吗？我想我不知道顶点是如何分配的以及它们的保留范围是什么，所以这闻起来很危险。我是图形数据库的新手，但我认为在 Neo4j 中建议从根节点创建参考节点。但是 Titan 不鼓励使用根节点，因为它会成为超级节点。身份证...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:05:50.210

1-我不知道是否有办法通过Titan查看数据库是否是新的。在启动 Titan 之前，您可以检查存储 BerkeleyDB 的目录是否存在。

2/3-可能你最好的选择是一个带有索引属性“版本”的硬编码顶点。在开始时在“版本”的（几乎为空的）索引中进行查找，并将您的逻辑基于这些结果。

顺便说一句，您可能对 Titanium[0] 感兴趣。我们正准备在下周左右发布一个大版本，这应该会使其更加有用[1]。

[0] [http://titanium.clojurewerkz.org/](http://titanium.clojurewerkz.org/)

[1] [http://blog.clojurewerkz.org/blog/2013/04/17/whats-going-on-with-titanium/](http://blog.clojurewerkz.org/blog/2013/04/17/whats-going-on-with-titanium/)

# c++ - MinGW 的 C++11 功能

> ID：16136142
> 
> 赞同：13
> 
> 时间：2013-04-21T20:57:51.777
> 
> 标签：c++, windows, c++11, mingw

我尝试对`emplace()`unordered_map 使用函数，编译器说不存在这样的函数。

我把`-std=c+11`它说`cc1plus.exe: error: unrecognized command line option '-std=c+11'`

我可以以某种方式将 C++11 功能与 mingw 一起使用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T09:51:17.637

来自[GCC 文档](http://gcc.gnu.org/projects/cxx0x.html)

> C++0x 是新的 ISO C++ 标准的工作名称，该标准于 2011 年作为 C++11 发布，并在标准 C++ 语言和库中引入了许多新功能。该项目旨在在 GCC 中实现新的 C++11 功能，并使其成为首批将 C++11 带给 C++ 程序员的编译器之一。
> 
> C++11 功能在 GCC 的 Subversion 存储库的主干以及 GCC 4.3 及更高版本中作为“主线”GCC 编译器的一部分提供。要启用 C++0x 支持，请将命令行参数**-std=c++0x**添加到 g++ 命令行。或者，要启用除 C++0x 扩展之外的 GNU 扩展，请将 -std=gnu++0x 添加到您的 g++ 命令行。GCC 4.7 及更高版本也支持**-std=c++11**和 -std=gnu++11。

因此，对于 gcc 4.3 到 4.6，使用 -std=c++0x，对于更高版本，使用 -std=c++11。`map::emplace`在 gcc 4.8 中添加了库支持

# c++ - 根据按键修改相机位置

> ID：16136145
> 
> 赞同：1
> 
> 时间：2013-04-21T20:57:57.823
> 
> 标签：c++, directx-9, directinput

我有一个使用 DirectX 在屏幕上呈现图形的应用程序。使用以下代码设置第一人称的默认视图，将 Y 轴设置为 0。该代码包含在 Render() 之前调用的 SetupCamera() 函数中。

```
 D3DXVECTOR3 vCamera(5.0f, 0.0f, -45.0f); 
```

我正在使用 DirectInput 来管理用户输入。我希望能够允许用户按 SPACE 并将 Y 轴值更改为 90 以切换到自上而下的视图，然后再次按下以将其切换回来。我目前在我的 ProcessKeyboardInput() 函数中有以下代码，在 Render() 之前调用。

```
if (KEYDOWN(buffer, DIK_SPACE))
{
  \\ ???    
} 
```

但我不确定我需要做什么来允许用户调整不中断渲染的值。我必须在这里遗漏一些简单的东西。任何帮助将非常感激。谢谢！

完整的 CameraSetup() 代码...

```
void SetupCamera()
{
// Setup View Matrix
D3DXVECTOR3 vCamera(5.0f, 0.0f, -45.0f);    // camera location  x,y,z plane
D3DXVECTOR3 vLookat(5.0f, 5.0f, 0.0f);      // camera direction x,y,z plane
D3DXVECTOR3 vUpVector(0.0f, 1.0f, 0.0f);    // which way is up x,y,z plane
    D3DXMATRIX matView;
    D3DXMatrixLookAtLH( &matView, &vCamera, &vLookat, &vUpVector);
    D3D_Device -> SetTransform(D3DTS_VIEW, &matView);

 // Setup Projection Matrix to transform 2D geometry into 3D space
 D3DXMATRIX matProj;
     D3DXMatrixPerspectiveFovLH(&matProj, D3DX_PI/4, 1.0f, 1.0f, 100.0f);
     D3D_Device -> SetTransform(D3DTS_PROJECTION, &matProj);
} 
```

完整的 ProcessKeyboardInput() 代码...

```
void WINAPI ProcessKeyboardInput()
{ 
// Define a macro to represent the key detection predicate
#define KEYDOWN(name, key) (name[key] & 0x80) 

// Create buffer to contain keypress data
char     buffer[256];
HRESULT  hr;

// Clear the buffer prior to use
ZeroMemory(&buffer, 256);

 hr = g_pDIKeyboardDevice -> GetDeviceState(sizeof(buffer),(LPVOID)&buffer); 
if FAILED(hr) 
{ 
    // If device state cannot be attained, check if it has been lost and try to      aquire it again
    hr = g_pDIKeyboardDevice -> Acquire();
    while (hr == DIERR_INPUTLOST) hr = g_pDIKeyboardDevice -> Acquire();

    hr = g_pDIKeyboardDevice -> GetDeviceState(sizeof(buffer),(LPVOID)&buffer); 
} 

bool topView = false;

if (KEYDOWN(buffer, DIK_Q))
{
    // 'Q' has been pressed - instruct the application to exit.
    PostQuitMessage(0);
}

if (KEYDOWN(buffer, DIK_SPACE))
{
    // Space has been pressed - swap from 1st person view to overhead view

    // topView is true
 topView = !topView;

 // if topView is true, adjust camera accordingly
 if (topView) 
    {
        vCamera.y = 90.f;
    } 
    else        // if untrue, set camera to 1st person
        {
            vCamera.y = 0.f;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:03:28.973

我认为你在正确的轨道上。不要担心“中断渲染”。在任何图形应用程序中，渲染调用之间都会进行大量处理。像这样的东西怎么样：

```
// Have this somewhere appropriate in the code
bool topView = false;

if (KEYDOWN(buffer, DIK_SPACE))
{
    // Toggle top view
    topView = !topView;

    // Set camera vector
    if (topView) {
        vCamera.y = 90.f;
    } else {
        vCamera.y = 0.f:
    }
} 
```

更新后，您需要再次将矩阵发送到 DirectX。`vCamera`基本上，既然（或任何其他视图向量）已更改，您需要再次调用以下代码块。我建议在检查用户输入后将代码捆绑在`SetupCamera()`函数中并在函数中调用它。`Render()`这还需要将`vCamera`etc 移出函数之外，以便其他函数可以使用它们。

```
// vCamera, vLookat, vUpVector defined outside function

// Call this in rendering loop to set up camera
void SetupCamera() {
    // Calculate new view matrix from view vectors
    D3DXMATRIX matView;
    D3DXMatrixLookAtLH( &matView, &vCamera, &vLookat, &vUpVector);
    D3D_Device -> SetTransform(D3DTS_VIEW, &matView);

    // Setup Projection Matrix to transform 2D geometry into 3D space
    D3DXMATRIX matProj;
    D3DXMatrixPerspectiveFovLH(&matProj, D3DX_PI/4, 1.0f, 1.0f, 100.0f);
    D3D_Device -> SetTransform(D3DTS_PROJECTION, &matProj);
} 
```

# javascript - jQuery 在 Firefox 中看起来/工作得很好，但在 IE (Internet Explorer) 中不行

> ID：16136153
> 
> 赞同：0
> 
> 时间：2013-04-21T20:58:52.740
> 
> 标签：javascript, jquery, drupal, drupal-modules, jcarousel

我在 Firefox 中的 Drupal 7 模块中有 jCarousel 0.2.8 与 jQuery 1.7.1 和 jQuery UI 1.8.11 完美配合。但是，轮播在 Internet Explorer 7、8、9 和 10 中无法正常工作。如何才能让它们在两种浏览器中正常加载？附上它在 FF 和 IE 中的截图。下面是我的 JavaScript/jQuery 代码。请注意，因为它是一个 Drupal 站点，所以使用 jQuery() 而不是 $()。

您可以测试我的网站上描述的问题：[demo link removed]

在 IE 中修复此问题的任何帮助将不胜感激！谢谢！！

[Firefox 和 IE 截图](https://github.com/jsor/jcarousel/issues/471)

```
function select_avatar(image, button) {
image.input.prop('checked', true);

jQuery('#layer_'+image.id).css({ backgroundImage: "url("+image.url+")" });

var src = button.attr("src");

button.parent().parent().find("li img").each(
    function(index) {
        if(jQuery(this).attr("src") == src)
        jQuery(this).addClass("avatar_select");
        else
        jQuery(this).removeClass("avatar_select");
    }
);
}

function unselect_avatar(image, button) {

image.input.prop('checked', false);

//select empty
jQuery('#default_input_'+image.id).prop('checked', true);

jQuery('#layer_'+image.id).css({ backgroundImage: "none" });

var src = button.attr("src");

button.parent().parent().find("li img").each(
    function(index) {
        if(jQuery(this).attr("src") == src)
        jQuery(this).removeClass("avatar_select");
    }
);
}

function mycarousel_itemVisibleInCallback(carousel, item, i, state, evt) {
// carousel.data is empty on page load
var data = carousel.data;

// True on page load
if(!data) {
    // cid is name of carousel, user_avatar_select_X
    var cid = carousel.list.attr('id').substring(9);
    var data = new Array();

    // For each img element in ID user_avatar_select_X
    jQuery('#'+cid+' img').each(
        // Provide index # for each iteration of loop
        function(index) {
            // Sets input to the input element nearby the img element
            // Note: Parent element is a label element
            var input = jQuery(this).parent().siblings('input');
            // Sets url to the src of the img element
            var url = jQuery(this).attr('src');

            // If the img is selected, apply the img to ID  layer_user_avatar_select_X
            // (which is on the picture)
            if(input.is(':checked')) {
                    jQuery('#layer_'+cid).css({ backgroundImage: "url("+url+")" });                 
            }

            // Adds variables to the data array
            data.push({id: cid, input: input, image: jQuery(this), url: url});
        });

    // Stores data array in carousel
    carousel.data = data;

    // Adds html to ID user-edit
    // Adds input with ID default_input_user_avatar_select_X
    // and name select_avatar_X
    jQuery('#user-edit').append('<div class="form-item" style="display:none"><label class="option"><input class="form-radio user_avatar_select" id="default_input_'+cid+'" type="radio" value="none" name="select_avatar_'+cid.substring(cid.lastIndexOf("_") + 1)+'"/></label></div>');
}

var idx = carousel.index(i, data.length);
var image = data[idx - 1];

var img = image.image.clone();

if(image.input.is(':checked'))
    img.addClass("avatar_select");

carousel.add(i, img);

img.hover(
    function(){jQuery(this).addClass("avatar_hover");},
    function(){jQuery(this).removeClass("avatar_hover");}
);

img.click(
    function () {
        if(image.input.is(':checked'))
            unselect_avatar(image, jQuery(this));
        else
            select_avatar(image, jQuery(this));
    }
);
};

function mycarousel_itemVisibleOutCallback(carousel, item, i, state, evt) {
carousel.remove(i);
};

function mycarousel_init(list) {
// list parameter is ID user_avatar_select_X radio buttons and images
// If list isn't valid, bail out
if(!list.attr('id'))
    return;

// Add layer to picture for each list (ccrresponding to the choices for avatars)
jQuery(".picture").append('<div class="avatar_layer" id="layer_'+list.attr('id')+'"></div>');

// Adds UL carousel_X with Tango Skin to each list 
list.append('<ul id="carousel_'+list.attr('id')+'" class="jcarousel-skin-tango"></ul>');

// Creates carousel for each list
jQuery('#carousel_'+list.attr('id')).jcarousel({
    scroll: 3,
    visible: 3,
    wrap: 'circular',
    //itemLoadCallback: itemLoadCallbackFunction,
    itemVisibleInCallback: {onBeforeAnimation: mycarousel_itemVisibleInCallback},
    itemVisibleOutCallback: {onAfterAnimation: mycarousel_itemVisibleOutCallback}
});
}

jQuery(document).ready(function () {
// Hide original ID user_avatar_select_X radio buttons and images
// since we want them to be in carousels instead
jQuery('div.user_avatar_select').parent().hide();

for(var i=0;i<10;i++) {
    // Create a carousel based on ID user_avatar_select_X
    mycarousel_init(jQuery('#user_avatars_select_'+i));
}

// Hide the picture with ID current, since the user may want to build a new avatar
jQuery(".picture #current").css({display: "none"});

// Show the default avatar, so the user can build a new avatar
// Selected layers for the current avatar will be added on top 
jQuery(".picture").css({"position": "relative", "width": "200px", "height": "199px", "background-image": "url(/sites/default/files/default_avatar.gif)"});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:51:09.730

在 CSS 中，我为轮播中的图像设置了特定的高度和宽度，并修复了它。他们有 height: auto 但我猜这对 IE 来说还不够好。

# android - 片段垂直滑动

> ID：16136154
> 
> 赞同：0
> 
> 时间：2013-04-21T20:58:54.457
> 
> 标签：android, android-fragments, fragmentpageradapter, android-sliding

有没有办法在Android中垂直滑动片段？我的意思是类似`FragmentPagerAdapter`但在垂直模式下。我需要这个来编写一个带有垂直滑动页面的文本查看器，比如 pdf 阅读器。

# java - Java 客户端服务器应用程序

> ID：16136156
> 
> 赞同：0
> 
> 时间：2013-04-21T20:59:03.087
> 
> 标签：java, sockets, client

我想编写一个简单的客户端服务器应用程序，它们部署在不同的位置，服务器需要向客户端公开两个公共方法并将它们之间的数据交换保持在最低限度，我正在使用套接字，但是，客户端如何调用服务器上的公共方法？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:01:25.193

有几种方法可以做到这一点，但我会看看[RMI](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)。它使调用远程 java 对象的方法变得非常容易。仍然会涉及到低级协议（sockets/tcp），但您不需要自己明确地管理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:09:07.163

您需要以某种文本或二进制格式对所需的操作和响应进行编码。

一种简单的方法是发送您要调用的方法的名称，另一端读取该名称并调用该名称的方法。如果你想让它更短，你可以发送`(byte) 1`调用第一个方法和`(byte) 2`调用第二个方法等，并使用`switch`语句调用适当的方法。

# jquery - 如何删除动态创建的类

> ID：16136157
> 
> 赞同：0
> 
> 时间：2013-04-21T20:59:04.290
> 
> 标签：jquery

我正在使用一个脚本，该脚本在单击某个元素时广告一个类。无论如何，在不知道/声明其“名称”的情况下，是否可以通过单击事件删除动态创建的类？

所以 Jquery 部分应该说类似“点击时：删除现在添加的类”。

我唯一能想到的就是做点击事件，然后删除*最后一个*类（应该是动态类），在这里回答[LINK](https://stackoverflow.com/questions/4155782/can-i-remove-just-the-last-added-class-from-an-element-with-jquery)。不过我希望有更好的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:03:37.537

这是一个比较奇特的情况。您可能想重新考虑您的逻辑，或者可能将某种切换逻辑附加到相关类。

在任何情况下，我都会通过拥有一个`data-*`包含最后添加的类名的附加属性来实现这一点。例如：

```
// Adding the classname
var className = myClass;
$('#element').addClass(className).data('lastclass',className);

// Removing last added class
var elem = $("#element");
elem.removeClass(elem.data('lastclass')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:04:38.960

一旦一个类被添加到一个对象中，就无法将它与之前可能存在于该对象上的任何其他类区分开来。因此，如果您无法修改点击代码并且不知道动态类的名称，那么很难知道要删除什么。

如果您可以在单击类数据之前对其进行快照并将其作为属性或使用 jQuery 存储在对象上`.data()`，那么您可以将状态设置回该条件。

或者，如果您知道单击中添加的类名的任何信息，那么您可以搜索这些类名并仅删除这些类名。

# android - Android 活动中断

> ID：16136158
> 
> 赞同：0
> 
> 时间：2013-04-21T20:59:07.670
> 
> 标签：android, android-activity, onclicklistener

我只是想为使用 ListView 作为我的班级正在制作的游戏的新闻提要的活动提出一个框架。在这个活动中，只有新闻提要和一个刷新按钮（用最新消息更新 ListView）

我的activity_news.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:layout_gravity="center">

<ListView
    android:id="@+id/news"
    android:layout_width="match_parent"
    android:layout_height="320dp"

    >
</ListView>

<Button
    android:layout_width="fill_parent"
    android:layout_height="45dp" 
    android:text="Refresh"
    android:id="@+id/bRef"
/> 
```

我的 NewsActivty.java：

```
package com.example.mynews;

import com.example.mynews.R;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class NewsActivity extends Activity {
Button refresh;
String newsfeed [] = {"latest news", "older news"};
Intent ref = new Intent(this, NewsActivity.class);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_news);

    refresh = (Button) findViewById(R.id.bRef);

    ListView newsStuff = (ListView) findViewById(R.id.news); 

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, newsfeed);
    newsStuff.setAdapter(adapter);

    refresh.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(ref); 
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.news, menu);
    return true;
} 
```

}

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mynews"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mynews.NewsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我一块一块地构建所有东西，并在完成新的东西（布局、数组适配器等）时运行它，一旦我为我的刷新添加了 OnClickListener（模拟器告诉我“mynews 不幸停止了”），活动就开始中断按钮。我确信有更好的方法来完成我正在尝试做的事情，但是对于我迄今为止所获得的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:02:14.190

你定义了一个类 ref.java 吗？如果是，那么您需要在清单文件中定义该活动（参考）。

# ajax - 使用附加参数对 Spring Controller 进行 jQuery 调用

> ID：16136162
> 
> 赞同：1
> 
> 时间：2013-04-21T20:59:45.717
> 
> 标签：ajax, jquery, spring-mvc, jquery-autocomplete

在文本字段发生变化时，jQuery 会调用 Spring Controller。我的问题是这个查询如何发送`@RequestParam`到控制器方法`controller/find`？

我如何能够`Param`在此通话中发送更多信息？

```
 $(document).ready(function() {
        $( "#id" ).autocomplete({
            source: "${pageContext. request. contextPath}/controller/find.htm"
        });

    }); 
```

这有效

```
 @RequestMapping(value = "/find", method = RequestMethod.GET)
    public @ResponseBody
    List<String> findItem(@RequestParam("term") String id) 
```

但需要类似的东西

```
 @RequestMapping(value = "/find", method = RequestMethod.GET)
    public @ResponseBody
    List<String> findItem(@RequestParam("term") String id, Additional param here ??) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:57:04.800

如果您将函数传递给 Autocomplete 的`source`选项（而不仅仅是指定 URL 的字符串），您可以定义自己的数据结构以发送到服务器：

```
$('#id').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: './controller/find.htm',
            data: {
                term: request.term,
                extraParam: 'foo'
            },
            success: function (data) {
                console.log('response=', data);
            }
        });
    }
}); 
```

现在自动完成请求将包含两个参数：`term`和`extraParam`（jsFiddle： http: [//jsfiddle.net/gtBUt/](http://jsfiddle.net/gtBUt/)，打开浏览器的网络流量选项卡以查看发送的内容）。

然后控制器可以像这样处理这个输入：

```
@RequestMapping(value = "/find", method = RequestMethod.GET)
@ResponseBody
public List<String> findItem(@RequestParam("term") String term,
                             @RequestParam("extraParam") String extraParam) {
    ...
} 
```

# dns - CloudControl 上的主机根域

> ID：16136166
> 
> 赞同：3
> 
> 时间：2013-04-21T21:00:15.387
> 
> 标签：dns, cloudcontrol

我想托管一个像“example.com”这样的根域。Alias 插件允许您托管子域，例如“www.example.com”。

但是如何在 cloudcontrol 上托管根域“example.com”？因为我想创建一个从 example.com 到 www.example.com 的重定向。

我已经成功地将 www.example.com 的别名设置为我的 cloudControl 应用程序。但我无法设置从 example.com 到我的 cloudControl 应用程序的别名。

我不确定我是否了解 Alias 插件的所有内容。

最好的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:15:37.217

由于您无法将 CNAME 添加到根 romain，因此您无法将其直接链接到 cloudControl。

丑陋的方法是手动为（当前 3 个）cloudControl-loadbalancer-IP 创建 A 记录，但 cloudControl 有时会更改这些（添加/删除负载平衡器），因此您不应该这样做。

对于我的应用程序，我通常使用许多 DNS 提供商提供的“URL”记录类型。在后台，他们使用 A 记录到一个单独的网络服务器，该服务器将重定向返回到 www 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:42:06.523

您还可以使用 DNS Made Easy 之类的服务。他们提供了一种称为 ANAME 的自定义类型，它基本上是一个没有 CNAME 限制的 CNAME。他们会在必要时在后台更新 IP 地址。

[http://www.dnsmadeeasy.com/technology/aname-records/](http://www.dnsmadeeasy.com/technology/aname-records/)

# angularjs - AngularJS 范围和延迟

> ID：16136173
> 
> 赞同：2
> 
> 时间：2013-04-21T21:01:05.787
> 
> 标签：angularjs, angularjs-directive, promise, angularjs-scope

我有一项服务可以做一些困难的事情并返回一个承诺：

```
.factory('myService', function($q) {

    return {
        doSomethingHard: function() {
            var deferred = $q.defer();

            setTimeout(function() {
                deferred.resolve("I'm done!");
            }, 1000);

            return deferred.promise;
        }
    };
}) 
```

我有一个控制器，它使用该服务将功能添加到范围：

```
.controller('MyCtrl', function($scope, myService) {

    $scope.doSomething = function() {
        var promise = myService.doSomethingHard();

        promise.then(function(result) {
            alert(result);
        });
    };

}) 
```

我使用指令通过解析属性来调用该控制器函数：

```
.directive('myDirective', function($parse) {
    return {
        link: function(scope, el, attr) {

            var myParsedFunction = $parse(attr.myDirective);

            el.bind('click', function() {
                myParsedFunction(scope);
            });
        }
    };
}) 
```

与模板

```
<div ng-controller="MyCtrl">
    <button my-directive="doSomething()">The Button</button>
</div> 
```

单击按钮触发事件监听器，它调用控制器函数`doSomething`，调用服务函数`doSomethingHard`，返回一个承诺，即**永远不会解决**。

整个事情都在这里：

[http://jsfiddle.net/nicholasstephan/RgKaT/](http://jsfiddle.net/nicholasstephan/RgKaT/)

是什么赋予了？

谢谢。

**编辑：**多亏了 Maksym H.，看起来将 promise resolve 包装在`$scope.$apply()`其中使其在控制器中触发。我有一个工作小提琴[http://jsfiddle.net/RgKaT/4/](http://jsfiddle.net/RgKaT/4/)。但我真的很想把范围排除在我的服务之外。

我也很想知道为什么会这样。或者更好的是，为什么它在包裹在范围内时如果不解决承诺就不起作用。当考虑属性的变化需要消化时，整个 Angular 世界与常规 Javascript 世界的类比是有意义的，但这是一个承诺……带有回调函数。$q 是否只是将承诺标记为已解决并等待范围消化该属性更新并触发其已解决的处理程序函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:22:26.457

这是另一种方式：尝试在指令中定义范围并将此属性绑定到期望父范围。

```
.directive('myDirective', function() {
  return {
    scope: { myDirective: "=" }, // or { myParsedFunction: "=myDirective" },
    link: function(scope, el, attr) {

        el.bind('click', function() {
            scope.myDirecive(scope); // or scope.myParsedFunction(scope)
        });
    }
  };
}) 
```

但主要是在一段时间后解决它时运行摘要：

```
.factory('myService', function($q, $timeout) {

    return {
        doSomethingHard: function() {
            alert('3\. doing something hard');

            var deferred = $q.defer();

            // using $timeout as it's working better with promises
            $timeout(function() {
                alert('4\. resolving deferred');
                deferred.resolve('Hello World!'); // Here...
            }, 1000);

            return deferred.promise;
        }
    };
}) 
```

**[jsFiddle](http://jsfiddle.net/RgKaT/6/)**

PS确保您将方法作为父范围的模型传递，而不是通过HTML中的“（）”应用它

**`<button my-directive="doSomething">Button</button>`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T18:35:07.423

只需替换`setTimeout`为`$timeout`（并记住注入`$timeout`您的服务）。这是一个[更新的 jsFiddle](http://jsfiddle.net/wLJrP/)。

# javascript - 应该对私有变量使用 getter 和 setter 吗？

> ID：16136174
> 
> 赞同：2
> 
> 时间：2013-04-21T21:01:07.103
> 
> 标签：javascript, setter, getter

我正在使用这样的 JavaScript 对象：

```
var obj = new Foob; 
```

我应该假装有一种私人方式并做：

```
obj.get('foo'); 
```

还是我应该尝试直接访问：

```
obj.foo 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T21:06:39.063

您实际上可以拥有只能通过 Javascript 中的 setter 和 getter 访问的变量：

```
function Foob(){

    var foo = 5;

    this.getFoo = function(){
        return foo;
    }

    this.setFoo = function(newFoo){
        foo = newFoo;
        return this;
    }

}

var obj = new Foob;
obj.getFoo(); // 5
obj.foo; // undefined 
```

或者，如果你想要一个通用的 getter/setter：

```
function Foob(){

    // You can set default values in the data object
    var data = {};

    this.get = function(key){
        return data[key];
    }

    this.set = function(key, value){
        data[key] = value;
        return this;
    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T21:10:09.467

Javascript 的一个鲜为人知的特性是它原生支持 getter 和 setter。
定义属性时，您可以通过以下方式简单地定义它：

```
someObj.prop = 12; 
```

或者您可以定义 getter 和 setter ，使用`Object.defineProperty`和 保留字`get`and `set`：

```
Object.defineProperty ( someObj,    "prop" ,  
                                              { get : function () { return ??; } ,
                                                set : function (val) { /* store val */ }            } ; 
```

在“类”中使用此类 getter/setter 来获取私有变量的方法是：

```
var MyClass = function() {
  var _private = 5;

  Object.defineProperty(this, "public", {
    get : function() { return _private; },
    set : function(val)  { _private=val; }
  });

  return this;
};

var anInstance = new MyClass();

anInstance.public = 12 ; 
console.log(anInstance.public)   ;  // writes 12
console.log(anInstance._private) ;  // writes undefined. 
```

所以你有一个真正的私有变量，配备了一个 getter 和一个 setter。

显然，使用 getter/setters 代码并没有太大的兴趣，除非您想进行边界检查/类型检查或有其他特定原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T21:26:14.847

当我开始大量使用面向对象的 JavaScript 时，我曾经喜欢 getter 和 setter 的想法，但那是因为我来自 Java 背景。

ES5 通过特殊语法支持 getter 和 setter

请参阅 John Resig 的解释：

[http://ejohn.org/blog/javascript-getters-and-setters/](http://ejohn.org/blog/javascript-getters-and-setters/)

我的看法是思考为什么 getter/setter 是有用的。它是如此有一种方法来封装变量的访问，以便它可以被拦截/控制。如果调用代码直接改变另一个对象的实例变量，那么你不能透明地改变它。需要捕获所有这些突变需要更改变量范围，添加 getter 和 setter 并更改所有调用代码。

但是，此语法对调用代码是透明的。因此，您可以简单地允许直接控制一个属性，然后如果您需要拦截它，例如添加一个 console.log 进行调试，您可以添加一个 getter 和 setter，它就可以工作了。

```
function Foob() {
}
Foob.prototype = {
  get foo() {
    return this._foo;
  },
  set foo(foo) {
    this._foo = foo;
  }
};

var o = new Foob();
console.log(o.foo); 
```

getter/setter 语法的缺点是它实际上并没有使您的变量私有，它只是“隐藏”它以便您可以使用一些秘密的内部名称，除非您按照文森特的指示在构造函数中定义它。

要真正做到私密：

```
function Foob() {
  var foo;
  this.__defineGetter__('foo', function () { 
    return foo;
  });
  this.__defineSetter__('foo', function (_foo) {
    foo = _foo;
  });
}

var o = new Foob();
console.log(o.foo); 
```

# c++ - 指针解引用：编译器的实际机制

> ID：16136175
> 
> 赞同：1
> 
> 时间：2013-04-21T21:01:19.153
> 
> 标签：c++, pointers

我对取消引用指针的实际机制（编译器实际执行的操作）的理解有点挣扎。

我通过谷歌和stackoverflow上的红了很多，但我还不能完全明白:-(

我写了一个带有多个指针的简单程序：

```
#include <iostream>

int main()
{
    int a = 5;
    int* ptr = &a;
    int** pptr = &ptr;
    int*** ppptr = &pptr;
    int**** p4tr = &ppptr;

    std::cout << "a = 5 \nint*ptr = &a \nint** pptr = *ptr\nint*** ppptr = &pptr\nint**** p4tr= &ppptr\n" << std::endl;
    std::cout << "a: " << a << std::endl;
    std::cout << "&a: " << &a << std::endl << std::endl;
    std::cout << "ptr: " << ptr << std::endl;
    std::cout << "*ptr: " << *ptr << std::endl;
    std::cout << "&ptr: " << &ptr << std::endl << std::endl;
    std::cout << "pptr: " << pptr << std::endl;
    std::cout << "*ptr: " << *pptr << std::endl;
    std::cout << "**pptr: "<< **pptr << std::endl;
    std::cout << "&pptr: " << &pptr << std::endl << std::endl;
    std::cout << "ppptr: " << ppptr << std::endl;
    std::cout << "*ppptr: " << *ppptr << std::endl;
    std::cout << "**pptr: " << **ppptr << std::endl;
    std::cout << "***pptr: " << ***ppptr << std::endl;
    std::cout<< "&pptr: " << &ppptr << std::endl << std::endl;
    std::cout << "p4tr: " << p4tr<< std::endl;
    std::cout << "*p4tr: " << *p4tr<< std::endl;
    std::cout << "**p4tr: " << **p4tr<< std::endl;
    std::cout << "***p4tr: " << ***p4tr<< std::endl;
    std::cout << "****p4tr: " << ****p4tr<< std::endl;
    std::cout << "&p4tr: " << &p4tr<< std::endl << std::endl;

    return 0;
} 
```

这在我的机器上给了我这个：

```
a = 5 
int*ptr = &a 
int** pptr = *ptr
int*** ppptr = &pptr
int**** p4tr= &ppptr

a: 5
&a: 0x7fffe4db870c

ptr: 0x7fffe4db870c
*ptr: 5
&ptr: 0x7fffe4db8700

pptr: 0x7fffe4db8700
*ptr: 0x7fffe4db870c
**pptr: 5
&pptr: 0x7fffe4db86f8

ppptr: 0x7fffe4db86f8
*ppptr: 0x7fffe4db8700
**pptr: 0x7fffe4db870c
***pptr: 5
&pptr: 0x7fffe4db86f0

p4tr: 0x7fffe4db86f0
*p4tr: 0x7fffe4db86f8
**p4tr: 0x7fffe4db8700
***p4tr: 0x7fffe4db870c
****p4tr: 5
&p4tr: 0x7fffe4db86e8 
```

我发现，取消引用的工作原理是： int* ptr = &a; 告诉编译器“变量”ptr 的类型是“int*”（指向整数的指针；即内存地址）因此，当我编写 *ptr 时，编译器获取 ptr 的值，将其作为地址并解释以 int 类型存储在该地址。

到目前为止，一切都很好。

但是 int** pptr = &ptr 实际上对编译器意味着什么？这是否意味着 pptr 的类型为“ int** ”？还是它仍然意味着 pptr 是“int*”类型（我的意思是，&ptr 和 &a 一样好内存地址）

第二个星号实际上对编译器意味着什么，为什么我不能写：“int* pptr = &ptr”（至少 g++ 不会让我这样做）

非常感谢您的努力，如果事情对我来说似乎不合逻辑，这会伤害我的大脑 :-))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:05:18.183

> 但是`int** pptr = &ptr`对编译器来说实际上意味着什么？这是否意味着 pptr 是 type `int**`？

是的，`pptr`是类型`int**`。And`int**`是*指向 int 的指针*。`*pptr`有 type ，`int*`也`**pptr`有 type `int`。

> 为什么我不能写：`int* pptr = &ptr`？

嗯，`ptr`有类型`int*`。与`&ptr`类型`int**`变量不兼容的类型也是如此`int*`。*指向 int*的*指针与指向 int*的指针是不同类型的东西。

# sql - 在一列中存储多个值与为多个值存储多个列

> ID：16136180
> 
> 赞同：0
> 
> 时间：2013-04-21T21:01:57.307
> 
> 标签：sql, row, storage

关于性能和“做事的正确方式”，并试图找出哪种方式更好地将配置数据存储在 SQL 数据库中。假设您有网站配置数据来设置访问该网站的人必须达到的最小和最大年龄。

```
CREATE TABLE SiteConfig
(
  featureName varchar(100),
  value varchar(100),
) 
```

哪个更好：

*   将其全部存储在一行中并使用explode(); 在PHP 中处理它。

    特征名称：“年龄要求”

    值：“13|60”

*   将其存储在每个功能的单独行中，并在需要时选择您需要的功能。

    特征名称：“minAge”

    值：“13”

    功能名称：“最大年龄”

    值：“60”

**由于网站的功能数量众多，因此有 60 行数据与大约 25 行数据的差异。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:38:07.347

存储它有两个独立的功能。

您可能希望访问数据库中的功能，而不是应用程序代码。

没有理由解析逗号分隔的字符串来获得两个特征。

诚然，如果只有两个用逗号分隔的数字，不会出错。然而，这是一个滑坡，您可能很快就会发现自己试图将多个字段填充到单个字符串中，然后投入大量资源来解析字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:09:58.643

如果这些是您永远不会在数据库中自己使用的值，那么任何一个都可以。

如果您怀疑您曾经想要使用数据库中的值，您不会希望它们具有相同的值。这将使查询数据变得复杂且低效。

# php - Wordpress 选择导航菜单项

> ID：16136185
> 
> 赞同：0
> 
> 时间：2013-04-21T21:02:40.497
> 
> 标签：php, wordpress, hook

我正在构建一个自定义 Wordpress 插件，我想在导航菜单上突出显示与插件相对应的项目，无论是通过包含中的文本还是 URL，无论是...

是否有一个过滤器或操作可以用来选择适当的菜单项？我的搜索没有结果。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:50:42.560

我不确定我们的菜单是如何构建的，但是，

你可以试试这段代码来做你想做的事。

```
<ul>
<li<?php 
                if (is_page('YourPlugin')) 
                { 
                echo " id=\"current\"";
                }?>>
                <a href="<?php bloginfo('url') ?>/YourPlugin">Plugin</a>
        </li>
</ul> 
```

现在，您可以使用任何具有自定义 CSS 的 ID 更改 id=\"current\""

# php - Symfony 2 在使用没有类的表单时添加 CSRF 令牌

> ID：16136188
> 
> 赞同：8
> 
> 时间：2013-04-21T21:02:52.200
> 
> 标签：php, forms, symfony, csrf

首先，我完全是 Symfony 2 的菜鸟。这个问题听起来很简单，如果我尝试将一些上下文说明我为什么需要它以及如何需要它，它就会开始变得混乱。

本质上，我创建了一个表单，我使用 Doctrine 等手动处理、验证和插入该表单。我在控制器操作中手动创建表单（它是从另一个对象的检索值动态构建的）。我假设可能有更好的方法来做到这一点，但由于我是 Symfony 的新手，并且在网上拖网的日子里，我看不到任何我需要做的解决方案。

因此，我不是简单地针对类/实体等构建表单，因此我需要手动添加 CSRF 令牌或某种保护。

在正常情况下，您将创建 FormType 并将默认选项配置为具有 csrf_protection。然后是一个简单的案例：

```
{{ form_widget(form._token) }} 
```

csrf 令牌就在那里。

当我动态构建表单时，我不确定如何为我的表单手动创建一个 csrf 令牌。有没有人有过创建没有类的表单并添加 csrf 保护的经验？

亲切的问候保罗庞德

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-30T15:40:52.037

我认为您正在寻找的是以下内容：

> 这将呈现一个 CSRF 令牌。如果您想要 CSRF 保护而不创建表单，请使用此功能

```
{{ csrf_token("intention") }} 
```

例如：

```
<a href="{{ path('remove_stuff', {token: csrf_token('intention')}) }}">Remove</a> 
```

[资源](http://symfony.com/doc/2.2/reference/twig_reference.html)

要从控制器验证此令牌，您可以执行以下操作：

```
if ($this->get('token') !== $this->get('security.csrf.token_manager')->getToken('intention')->getValue()) {
    throw new \Symfony\Component\Security\Core\Exception\InvalidCsrfTokenException('Invalid CSRF token');
} 
```

为了简化检查 Symfony 2.6 或更新版本上的令牌

```
if ($this->isCsrfTokenValid('intention', $submittedToken)) {
    // ... do something, like deleting an object
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-15T13:24:14.390

表单类型和令牌之间的连接：

```
{{ csrf_token("task_item_intention") }} 
```

并在表单类型中：

```
class TaskType extends AbstractType
{
// ...

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class'      => 'Acme\TaskBundle\Entity\Task',
        'csrf_protection' => true,
        'csrf_field_name' => '_token',
        // a unique key to help generate the secret token
        'intention'       => 'task_item_intention',
    ));
}

// ...
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T21:35:50.577

在（我的）正常情况下，您创建一个表单并且*不*专门配置 CSRF - 它会自动发生，并且您使用`form_rest(form)`或`form_end(form)`使用 CSRF 令牌呈现隐藏的输入。我不认为这对于没有模型支持的表单有任何不同。

# regex - 如何限制某个字符之前的匹配长度？

> ID：16136192
> 
> 赞同：2
> 
> 时间：2013-04-21T21:03:20.887
> 
> 标签：regex, perl

我正在使用以下正则表达式来扫描输入文本文件中的有效电子邮件。

```
[A-Za-z0-9!#$%&*+/=?^_`{|}~-]+(?:\.[A-Za-z0-9!#$%&*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])? 
```

现在我还需要在电子邮件地址中的“@”符号之前将匹配限制为 20 个字符，但不知道该怎么做。

PS。我正在使用 Delphi XE2 中的 Perl 正则表达式库 (TPerlRegex)。

请问你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:25:18.023

由于您的库应该与 PERL 兼容，因此它应该支持[lookaheads](http://www.regular-expressions.info/lookaround.html)。这些可以方便地确保模式中的几个“正交”限制：

```
(?=[^@]{1,20}@)[A-Za-z0-9!#$%&*+/=?^_`{|}~-]+(?:\.[A-Za-z0-9!#$%&*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])? 
```

`@`只有在不超过 20 个非`@`字符之后，前瞻才会匹配。但是，前瞻实际上并没有提前正则表达式引擎在主题字符串中的位置，因此在检查条件后，引擎仍位于电子邮件的开头（或目前正在检查的任何位置）并且将像以前一样继续您的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:25:48.697

考虑使用[Email::Address](http://search.cpan.org/~rjbs/Email-Address-1.898/lib/Email/Address.pm)来捕获电子邮件地址，然后ping 那些在:`grep`之前有 20 个或更少字符的结果`@`

```
use strict;
use warnings;
use Email::Address;

my @addresses;

while ( my $line = <DATA> ) {
    push @addresses, $_
      for grep { /([^@]+)/ and length $1 < 21 }
      Email::Address->parse($line);
}

print "$_\n" for @addresses;

__DATA__
ABCDEFGHIJKLMNOPQRSTUVWXYZguest@host.com frank@email.net Line noise. test@host.com
Some stuff here... help@perl.org And even more here!
Nothing to see here.  01234567890123456789@numbers.com  Nothing to see. 
```

输出：

```
frank@email.net
test@host.com
help@perl.org
01234567890123456789@numbers.com 
```

# spring - 添加 Spring 配置后托管 bean 不工作

> ID：16136197
> 
> 赞同：0
> 
> 时间：2013-04-21T21:03:52.673
> 
> 标签：spring, jsf-2

我真的不知道问题的原因是什么。我用hibenate和JSF创建了一个网站，后来决定也集成Spring框架，但最终遇到了一个问题。

我的托管 bean“loginbean”运行良好。它还可以识别 JSF 页面中的方法，但是当我运行应用程序时，我会看到“错误排除”消息。

我的豆子：

```
@ManagedBean(name="loginBean")
@SessionScoped
public class LoginBean {

    private String username;  

    private String password; 

    private int activeindex;

    public String Dirige(int a){
       setActiveindex(a);
       if (a == 0){
           return "/Menu.jsf"; 
       }else{
       if (a == 1) {
              return "/pagess/pagesFabricant/Fabricant.jsf";
           }else{
              if (a == 2) {
                 return "/pagess/pagesComposant/Composant.jsf";
              }else{
                  if(a == 3){
                      return "/pagess/pagesDeq/DEQ.jsf";
                  }

              }
           }
       }
       return null; 
   }
} 
```

我`SpringBeanFacesELResolver`在 faces-config.xml 中添加：

```
<application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application> on faces.config.xml 
```

我还在 web.xml 中包含了相关的侦听器：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/application.xml
        </param-value>
    </context-param>
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener> 
```

我的观点：

```
<p:tabMenu activeIndex="#{loginBean.activeindex}">  
    <p:menuitem value="Home"  icon="ui-icon-star" action="#{loginBean.Dirige(0)}" />
    <p:menuitem value="Fabricants"  icon="ui-icon-wrench"   action="#{loginBean.Dirige(1)}" /> 
    <p:menuitem value="Composants" icon="ui-icon-search"  action="#{loginBean.Dirige(2)}"/> 
    <p:menuitem value="Dossier d'equivalence"  icon="ui-icon-document" action="#{loginBean.Dirige(3)}"/> 
</p:tabMenu> 
```

最后这是我遇到的错误：

```
Grave: javax.el.MethodNotFoundException: /templates/template.xhtml @42,95 action="#{loginBean.Dirige(1)}": Method not found: com.ardia.beans.LoginBean@1af73b2.Dirige(java.lang.Long)
javax.faces.el.MethodNotFoundException: javax.el.MethodNotFoundException: /templates/template.xhtml @42,95 action="#{loginBean.Dirige(1)}": Method not found: com.ardia.beans.LoginBean@1af73b2.Dirige(java.lang.Long)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:92)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:28:47.517

问题是***我在另一个tomcat服务器中启动应用程序***..它运行良好它接受带有参数的bean方法

感谢您的合作

# php - Wordpress 中的模块化页面内容

> ID：16136198
> 
> 赞同：2
> 
> 时间：2013-04-21T21:04:02.580
> 
> 标签：php, wordpress

我想构建一个模块化的 Wordpress CMS。我的意思是每一页都是空白的。然后，在管理员中，用户将从他们想要放在页面上的模块列表中进行选择。这些模块本质上是自包含的 HTML 片段，您可以通过管理员填写内容。

例如，考虑以下两个模块：

**模块 1**

```
<h2>Title of Module1</h2>
<div>Text</div>
<img src='image.jpg'> 
```

**模块 2**

```
<div class='carousel'>
  <img src='one.png' id='carousel-img-1'>
  <img src='two.png' id='carousel-img-2'>
  <img src='three.png' id='carousel-img-3'>
</div> 
```

用户将能够在每个页面上以任意数量和顺序组织这些 HTML 片段。在管理员中，您将拥有可以填写片段值的文本框。

我有两个问题：

1）以这种方式构建模块化的Wordpress网站是否是一个合理的项目？Reasonable 将涉及编写主题、插件和小部件来实现目标，而不是对核心 Wordpress 代码进行重大更改。

2) 是否有您知道的在线特定资源可以帮助我完成这项工作？我的搜索没有产生任何对我有用的东西。做这样的事情的主题，或者涉及这个问题的博客文章对我来说非常有用。

我对 PHP 非常熟悉，所以任何编写 PHP 的需求都完全没问题，而且我感觉很舒服。

重申我的问题：

**如果构建模块化 Wordpress 主题是一个可行的目标，那么对于想要做这样的事情的人来说，哪些资源可能有用？**

*（我知道这个问题不是关于一个非常具体的编程问题，就像 StackOverflow 上的许多问题一样，但我仍然觉得答案可能对 Wordpress 社区有价值。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:33:34.273

1）是的，这是可行的，这是纯粹的插件领域。除非你想分叉 WordPress，否则永远不要触及核心。

2）如果你知道 PHP，最好的方法，IMO，是

*   阅读[开发者文档](http://codex.wordpress.org/Developer_Documentation)

*   对于这个项目，您将特别需要*设置 API* [（在[WPSE中搜索和在](https://wordpress.stackexchange.com/search?q=%2B%22plugin+name%3A%22+%2Bregister_settings+is%3Aanswer)[GitHub](https://github.com/tareq1988/wordpress-settings-api-class)中的帮助程序类）]
    和*自定义元框* [（在[WPSE中搜索和在](https://wordpress.stackexchange.com/search?q=%2B%22plugin+name%3A%22+%2Badd_meta_box+is%3Aanswer)[GitHub](https://github.com/rilwis/meta-box)中 的帮助程序类）]。

*   研究其他人的插件。

*   很多 jQuery（可能是 Ajax）来制作模块的用户界面

[我相信我可以使用插件Advanced Custom Fields](http://advancedcustomfields.com)复制您所描述的几乎完全相同的系统，并创建一个自定义 ACF 插件来管理一些细节。

基本上可以使用文档和 WPSE Answers 构建自定义插件。每当遇到问题时，只需搜索您正在处理的 WP 挂钩和功能，通常会弹出文章和问答。

# sql - 在删除触发器之前删除另一个表中的条目

> ID：16136199
> 
> 赞同：-1
> 
> 时间：2013-04-21T21:04:03.350
> 
> 标签：sql, plsql, oracle11g, triggers, sql-delete

我正在为一项作业创建一个留言板系统，但我在使用一些 SQL 时遇到了一些麻烦。使用 Oracle 11g。

我有一个名为线程的表，当一个线程被删除时，我想删除与该线程相关的所有帖子，所以我想我会使用删除前触发器，但对 SQL 不是很有经验。谁能帮我吗？

到目前为止我得到了什么：

```
CREATE OR REPLACE TRIGGER DELETE_POSTS
  BEFORE DELETE ON THREADS
  FOR EACH ROW
BEGIN  
  DELETE FROM POSTS
  WHERE POSTS.THREAD_ID = :OLD.ID
END; 
```

我试过 :NEW 和其他一些东西。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:33:29.810

除非您的分配特别需要触发器，否则使用执行级联删除的外键约束会更合乎逻辑。

```
SQL> create table threads(
  2    thread_id number primary key
  3  );

Table created.

SQL> create table posts(
  2    post_id number primary key,
  3    thread_id number references threads( thread_id ) on delete cascade
  4  );

Table created. 
```

这样，当您从表中删除特定行时，`threads`表中的所有子行`posts`也将自动被删除。

# php - 用于将项目上传到数据库的 PHP/html 管理界面。下拉列表人口

> ID：16136207
> 
> 赞同：0
> 
> 时间：2013-04-21T21:04:23.333
> 
> 标签：php, html, mysql, forms

我创建了一个基本的管理界面来将项目上传到一个小型的“网上商店”数据库中。该页面不会有购物车系统，因为页面上不会发生任何交易。整个页面仅用于演示。我不得不提到我已经复制了一些代码，一切都是为了学校项目。

mysql 数据库有一个包含列的表：id、product_name、price、details、category、subcategory、date_added"。以下表单和 php 代码管理在数据库中插入新值

我希望“子类别”字段根据所选类别仅显示几个选项。例如。如果我选择 category=value1，子类别只会让我在“valuex”和“valuey”之间进行选择，因此管理员不能混淆。

如何填充子类别下拉列表？

**这是PHP部分**

```
$product_name = mysql_real_escape_string($_POST['product_name']);
$price = mysql_real_escape_string($_POST['price']);
$category = mysql_real_escape_string($_POST['category']);
$subcategory = mysql_real_escape_string($_POST['subcategory']);
$details = mysql_real_escape_string($_POST['details']);
// See if that product name is an identical match to another product in the system
$sql = mysql_query("SELECT id FROM products WHERE product_name='$product_name' LIMIT 1");
$productMatch = mysql_num_rows($sql); // count the output amount
if ($productMatch > 0) {
    echo 'Sorry, rename your product, <a href="inventory_list.php">click here</a>';
    exit();
}
// Adds to database database
$sql = mysql_query("INSERT INTO products (product_name, price, details, category, subcategory, date_added) 
    VALUES('$product_name','$price','$details','$category','$subcategory',now())") or die (mysql_error());
 $pid = mysql_insert_id();
// Place image in the folder 
$newname = "$pid.jpg";
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$newname");
header("location: inventory_list.php"); 
exit(); 
```

**这就是 HTML 表单**

```
<div align="right"><a href="inventory_list.php#inventoryForm">+ Add New Inventory Item</a></div>

 <a name="inventoryForm" id="inventoryForm"></a>
<h3>
Add New Inventory Item Form
</h3>
<form action="inventory_list.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
  <tr>
    <td>Product Name</td>
    <td><label>
      <input name="product_name" type="text" id="product_name" size="64" />
    </label></td>
  </tr>
  <tr>
    <td align="left">Product Price</td>
    <td><label>
      €
          <input name="price" type="text" id="price" size="12" />
    </label></td>
  </tr>
  <tr>
    <td align="left">Category</td>
    <td><label>
      <select name="category" id="category">
      <option value="value1">value1</option>
      <option value="value2">value2</option>
      <option value="value3">value3</option>
      </select>
    </label></td>
  </tr>
  <tr>
    <td align="left">Subcategory</td>
    <td><select name="subcategory" id="subcategory">
    <option value=""></option>
      <option value="valuex">valuex</option>
      <option value="valuey">valuey</option>
      <option value="valuez">valuez</option>
      </select></td>
  </tr>
  <tr>
    <td align="left">Product Details</td>
    <td><label>
      <textarea name="details" id="details" cols="64" rows="5"></textarea>
    </label></td>
  </tr>
  <tr>
    <td align="left">Product Image</td>
    <td><label>
      <input type="file" name="fileField" id="fileField" />
    </label></td>
  </tr>      
  <tr>
    <td>&nbsp;</td>
    <td><label>
      <input type="submit" name="button" id="button" value="Add Item Now" />
    </label></td>
  </tr>
</table>
</form> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:05:28.353

尝试使用此代码，这将获取类别和子类别并根据您选择的选项显示选项。请告诉我这是可行的。

```
 **<select name="category" id="category"><?php 
        $category = mysql_query("SELECT category FROM products");
              while ($sql = mysql_fetch_array($category)) { ?>
                    <option value="value1"><?php echo $sql['category']; ?></option>
                 <?php } ?> </select>  $category = mysql_fetch_array($category); 
    $categoryname = $category['category']; 
    $sqls = mysql_query("SELECT subcategory FROM products where category
            ='$categoryname'"); ?> <select name="subcategory" id="subcategory">
                <?php    $subcategory = mysql_fetch_array($sqls);
                while (mysql_fetch_array($subcategory)) {        ?>
                    <option value="value1"><?php echo $subcategory['subcategory']; ?></option>
                <?php } ?> </select>** 
```

# javascript - 在文档中的所有元素完全加载后触发 JS 事件的最可靠方法是什么？

> ID：16136211
> 
> 赞同：0
> 
> 时间：2013-04-21T21:05:05.423
> 
> 标签：javascript, jquery, events

寻找最可靠的方法来检测整个 HTML 文档和所有外围设备（背景图像、CSS、JS 等）何时完成加载。不必是特定于 jQuery 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:06:33.953

使用 jQuery，我总是使用速记方法[`.ready()`](http://api.jquery.com/ready/)

```
$(function() {

}); 
```

如果您也在寻找图像，您可以使用[`.load()`](http://api.jquery.com/load/)

```
$(window).load(function() {

}); 
```

* * *

对于替代的香草方法，请查看[此问题](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:49:12.460

在 vanilla JS 中，您将使用：

```
window.onload = function() {
//your code here
}; 
```

来自[“window.onload”的 Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/window.onload)：

“笔记

load 事件在文档加载过程结束时触发。此时，文档中的所有对象都在 DOM 中，所有图像和子帧都已加载完毕。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:08:49.153

```
$(window).load(function(){
 // background images, CSS, JS.. everything is loaded
}); 
```

# typo3 - typo3 tt_news 在模板中检索类别 ID

> ID：16136216
> 
> 赞同：0
> 
> 时间：2013-04-21T21:05:29.633
> 
> 标签：typo3, tt-news

我遇到了一个问题，希望你能帮助我。我正在使用 tt_news，我需要直接在 LATEST 视图中检索类别的 ID。###NEWS_CATEGORY### 给了我类别的名称，但我需要相应的 ID。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:36:57.360

如果有人需要，我会帮助自己并使用通用标记：

```
plugin.tt_news.genericmarkers {
  catid = RECORDS
  catid {
    tables = tt_news_cat
    source.data = register:newsCategoryUid

    conf.tt_news_cat  = TEXT
    conf.tt_news_cat.field = uid
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T14:24:58.440

像这样通过寄存器就足够了：

```
plugin.tt_news.genericmarkers {
    CATID = TEXT
    CATID {
        value = {register:newsCategoryUid}
        insertData = 1
    }
} 
```

# c++ - 在给定指向其基类的指针的情况下识别子类？

> ID：16136217
> 
> 赞同：8
> 
> 时间：2013-04-21T21:05:33.983
> 
> 标签：c++, dynamic-typing

假设我有一个抽象基类 Parent 和子类 Child1 和 Child2。如果我有一个接受 Parent* 的函数，有没有办法（可能使用 RTTI？）在运行时确定该函数实际收到的是 Child1* 还是 Child2*？

到目前为止，我在这里使用 RTTI 的经验是，当 foo 是 Parent* 时，typeid(foo) 返回 typeid(Parent*) 而不管 foo 属于哪个子类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T21:12:37.010

您需要查看取消引用指针的 typeid，而不是指针本身；即，typeid(*foo)，而不是 typeid(foo)。询问取消引用的指针将为您提供动态类型；如您所见，询问指针本身只会为您提供静态类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T21:11:07.133

你可以用`std::dynamic_cast`这个。

```
Parent* ptr = new Child1();
if(dynamic_cast<Child1*>(ptr) != nullptr) {
    // ptr is object of Child1 class
} else if(dynamic_cast<Child2*>(ptr) != nullptr) {
    // ptr is object of Child2 class
} 
```

此外，如果您使用智能指针，例如`std::shared_ptr`，您可以像这样检查它：

```
std::shared_ptr<Parent> ptr(new Child1());
if(std::dynamic_pointer_cast<Child1>(ptr) != nullptr) {
    // ptr is object of Child1 class
} else if(std::dynamic_pointer_cast<Child2>(ptr) != nullptr) {
    // ptr is object of Child2 class
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T21:09:29.450

当然：

```
BaseClass *bptr = // whatever, pointer to base class
SubclassOne *safe_ptr_one = dynamic_cast<SubclassOne *>(bptr);
if (safe_ptr_one != nullptr) {
    // Instance of SubclassOne
} else {
    // not an instance of SubclassOne, try the other one
    SubclassTwo *safe_ptr_two = dynamic_cast<SubclassTwo *>(bptr);
    if (safe_ptr_two != nullptr) {
        // Instance of SubclassTwo
    } else {
        // it wasn't either one :'(
    }
} 
```

# c# - 我可以有一个函数/方法通过引用传递一个参数，而一个重载在 C++ 中通过值传递它吗？

> ID：16136223
> 
> 赞同：5
> 
> 时间：2013-04-21T21:06:49.733
> 
> 标签：c#, c++, c++-cli, pass-by-reference, pass-by-value

在 C# 中，这当然是可能的，因为这个可编译的示例可以显示：

```
static void Teste(int x) { }
static void Teste(ref int x) { }
static void Teste()
{
    int i = 0;
    Teste(i);
    Teste(ref i);
} 
```

但它可以在 C++(/CLI) 中使用构造函数完成吗？请参见下面的示例：

```
class Foo
{
    Foo(int bar)
    {
        // initializing "Foo" instance...
    }
    Foo(int &bar)
    {
        // initializing "Foo" instance...
    }

    //...
} 
```

尽管此类确实使用这些构造函数进行编译，但当我应用一个是另一个时，我看不到如何选择，也就是说，调用是模棱两可的，因为在 C# 中没有为此目的而知道的关键字“ref”。我在构造函数里试了一下，名字必须和类一样（当然可以加个无用的参数，但我想知道能**不能**做）。

顺便说一句，我用谷歌搜索，只得到“通过 ref 传递和按值传递有什么区别？”之类的东西。但没有像这样覆盖过载。而且我想作为解决方法，我可以使用指针，这要归功于“获取地址”（`&`）；或者如上所述，有一个额外的无用参数。但我想知道的是：我可以有这样的重载（按引用/按值）吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:20:59.230

您可以通过提供对所需类型的显式强制转换来在 C++ 中完成类似的操作。

```
struct Foo
{
    Foo(int /*bar*/) {}
    Foo(int &/*bar*/) {}
};

int main()
{
    int value = 5;
    Foo foo(static_cast<const int&>(value));

    return 0;
} 
```

强制转换`const`将导致重载决议忽略采用非常量引用的构造函数，并将确定按值传递。

# android - 如何从列表视图打开新屏幕

> ID：16136227
> 
> 赞同：0
> 
> 时间：2013-04-21T21:07:07.813
> 
> 标签：android, listview

我`ListView`在我的 XML 文件中创建了一个，但我想从我的`ListView`.

我知道我必须使用 an`OnItemClickListener`但我不知道那时我必须做什么。有人可以帮我吗？

我`ListView`在 Java 中：

```
package com.example.listentomusic;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;

public class March extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.march);

        ListView list = (ListView) findViewById(R.id.listView1);
        list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View viewClicked, int position, long id) {
                // TODO Auto-generated method stub
                startActivity(new Intent("android.intent.action.ABOUT"));

            }
        });
    }

} 
```

我`ListView`在 XML 中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/standaard_background" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/maart"
        android:textSize="30sp"
        android:textColor="#FFFFFF"
        android:background="#000000" />

     <android.support.v7.widget.Space
         android:id="@+id/space1"
         android:layout_width="fill_parent"
         android:layout_height="15dp" />

     <ListView
         android:id="@+id/listView1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:entries="@array/songs_march"
         android:textColor="#FFFFFF" >
     </ListView>

</LinearLayout> 
```

我的字符串数组：

```
<string-array name="songs_march">
        <item >1\. p!nk - just give me a reason </item>
        <item >2\. Bingo Players - Get Up </item>
        <item >3\. macklemore  -  thrift shop </item>
        <item >4\. troublemaker - olly murs </item>
        <item >5\. Netsky - We Can Only Live Today </item>
        <item >6\. Dj F.R.A.N.K Feat. Miss Autumn Leaves - Yes You Run </item>
        <item >7\. labyrinth – beneath your beautiful </item>
        <item >8\. Nicole Scherzinger - Boomerang </item>
        <item >9\. DJ Fresh - Gold Dust </item>
        <item >10\. Justin Timberlake - suit and tie </item>
        <item >11\. cascada – glorious </item>
        <item >12\.  DJ Fresh ft Sian Evans - Louder</item>
        <item >13\. DJ Fresh ft. Rita Ora - Hot Right Now</item>
        <item >14\. one direction - kiss you </item>
        <item >15\. Coone - Headbanger </item>
        <item >16\. Alicia keys - girl on fire </item>
        <item >17\. Skream And Example - Shot Yourself In The Foot Again </item>
        <item >18\. Isaac - Ease My Mind</item>
        <item >19\.  Headhunterz vs. Psyko Punkz - Disrespect</item>
        <item >20\. pitbull - feel this moment </item>
        <item >21\. Carrie Underwoods - Two Black Cadillac’s </item>
        <item >22\. Alicia keys - Brand New Me </item>
        <item >23\. Inna - More Than Friends</item>
        <item >24\. Freestylers  -  Cracks (Ft. Belle Humble)(Flux Pavilion Remix)</item>
        <item >25\. P!nk - Try</item>
        <item >26\. Hien - No More </item>
        <item >27\. Xilent - Boss Wave</item>
        <item >28\. Christina Aguilera - Just A Fool </item>
        <item >29\. Evol - Marina And The Diamond</item>
        <item >30\. Kesha - C mon</item>
        <item >31\. Matrix And Futurebound  -  Magnetic Eyes</item>
        <item >32\. Adele  -  Skyfall  </item>
        <item >33\. Baauer - Harlem Shake</item>
        <item >34\. Mark With A K - Blow Your Brainz</item>
        <item >35\. One Direction - One Way Or Another </item>
        <item >36\. Calvin Harris - Drinking From The Bottle </item>
        <item >37\. Skrillex And Damian - Make It Bun Dem</item>
        <item >38\. Taylor Swift - I Knew You Were Trouble</item>
        <item >39\. Coone  -  Monstah</item>
        <item >40\. Kelly Clarson - Catch My Breath  </item>

    </string-array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:18:25.223

您需要创建一个适配器，在您的情况下我建议使用[ArrayAdapter](http://developer.android.com/guide/topics/ui/layout/listview.html)

然后使用 list.setAdapter() 将适配器设置为您的 ListView。之后在 onItemClick 回调中，您将获得被点击项目的位置（从 0 开始）。另请参阅该[示例](http://www.mkyong.com/android/android-listview-example/)。

# php - 限制显示的提要项目的数量

> ID：16136228
> 
> 赞同：2
> 
> 时间：2013-04-21T21:07:09.273
> 
> 标签：php, simplexml

下面大致是我用来显示提要中的项目的内容。它工作正常，但提要有很多项目，我希望能够只显示提要中的前 5 个项目。这怎么办？

```
 <?php
    $theurl = 'http://www.theurl.com/feed.xml';

    $xml = simplexml_load_file($theurl);
    $result = $xml->xpath("/items/item");
    foreach ($result as $item) { 
    $date = $item->date;
    $title = $item->title;

    echo 'The title is '. $title.' and the date is '. $date .'';

    } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:08:50.963

```
foreach ($result as $i => $item) { 
    if ($i == 5) {
        break;
    }
    echo 'The title is '.$item->title.' and the date is '. $item->date;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:04:55.870

只需将其作为 XPath 查询的一部分：

```
<?php
$theurl = 'http://www.theurl.com/feed.xml';

$xml = simplexml_load_file($theurl);
$result = $xml->xpath('/items/item**[position() <= 5]**');
foreach ($result as $item) { 
    $date = $item->date;
    $title = $item->title;

    echo 'The title is '. $title.' and the date is '. $date . '';
}
?>
```

[这是一个演示！](http://codepad.viper-7.com/5fTPqj)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:13:24.923

循环可能比循环更`for`适合于此`foreach`：

```
for ($i=0; $i<=4; $i++) {
    echo 'The title is '.$result[$i]->title.' and the date is '. $result[$i]->date;
} 
```

当不修改数组中的任何内容时，此循环具有更高的性能，因此如果速度很重要，我会推荐它。

# php - PHP如何获取实例化的类名

> ID：16136233
> 
> 赞同：0
> 
> 时间：2013-04-21T21:07:41.300
> 
> 标签：php, function

我正在尝试一些从我的数据库中检索数据的方法。我创建了一个抽象类（ppdao），在这个类中，我有一个函数可以根据表名构建选择查询并将结果转换为对象。

对于每个表，我制作一个小文件，如下所示：

```
class user extends ppdao{

public $table = 'user';    

public function __set ( $name, $value ){   
    $this->$name = $value;
}

public function __get ( $name ){
    return $this->$name;
} 
```

假设我想要一个数组中的所有用户对象，我使用我的 ppdao 类中的以下函数：

```
public static function get_ar_obj( $arWhere = array() , $arWhereWay = array(), $order = null ){                
    $class = get_called_class();

    $obj = new $class();       
    $sql = "SELECT * FROM ".$obj->table. $obj->arWheretoString($arWhere);
    $res = mysqli_conn::getinstance()->query($sql)->all_assoc();         
    return $obj->createObjects($res);
} 
```

这一切正常，它给了我想要的结果。

现在我将 __get 函数更改为：

```
public function __get ( $name ){        
        switch ($name){
        case 'oAlbums':
             return $this->oAlbums = albums::get_ar_obj($arWhere = array('user_id' => $this->id) );
        break;

        default:
        return $this->$name;
        break;
} 
```

我想我想获取用户拥有的所有专辑，在专辑表中有一个名为 user_id 的字段，所以我想我会像这样将 m 链接在一起。

现在，当我这样调用专辑类时：

```
$userobject->oAlbums 
```

get_call_class() 仍在使用用户类名称而不是被调用的专辑类，因此它创建了一个类似的查询

```
SELECT * FROM user WHERE user_id = 63

And it should be SELECT * FROM album WHERE user_id = 63 
```

任何人都知道如何让这个工作？

* * *

对不起，它不是使用 get_call_class 创建查询，而是使用公共 $table 。现在通过将其更改为 get_call_class 变量使其工作

这是结果：

```
$arUser = user::get_ar_obj( $arWhere = array('id' => 1));
$oUser = $arUser[0];

echo '<pre>';
    print_r($oUser->oAlbums);
echo '</pre>'; 
```

输出：

```
Array
(
    [0] => album Object
        (
            [table] => album
            [data:ppdao:private] => 
            [className:ppdao:private] => album
            [id] => 2
            [name] => My new album 1
            [slug] => my-new-album-1
            [user_id] => 1
            [views] => 0
            [datecreated] => 2013/03/23 16:00:43
            [location] => Muaha
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:22:20.877

你看过`static`关键字吗？它适用于 PHP5 >= 5.3

```
public static function get_ar_obj( $arWhere = array() , $arWhereWay = array(), $order = null ){                
    $obj = new static();       

    $sql = "SELECT * FROM ".$obj->table. $obj->arWheretoString($arWhere);
    $res = mysqli_conn::getinstance()->query($sql)->all_assoc();         
    return $obj->createObjects($res);
} 
```

# php - 使用 Apache+mod_FastCGI 设置 PHPFPM

> ID：16136236
> 
> 赞同：2
> 
> 时间：2013-04-21T21:08:13.947
> 
> 标签：php, apache, fastcgi

我最近接手了一个运行 PHP 和 Apache 的 WebServer。PHP 目前正在通过 Apache 的 mod_fastcgi 使用 PHPFPM。一切都运行良好，但是在我研究以确保我了解实现的进出时，我遇到了一个令人费解的配置。在 Apache WebServer 上，使用以下内容：

```
ScriptAlias /php-cgi "/usr/local/bin/php-cgi"    
AddHandler php-fastcgi .php    
Action php-fastcgi /php-cgi
FastCGIExternalServer /usr/local/bin/php-cgi -socket /tmp/php-fpm.sock -idle-timeout 60 -pass-header Authorization 
```

现在，如前所述，上述配置工作正常。但似乎这种配置使用了两种解决方案——PHP-CGI 解决方案和 PHP-FPM 解决方案。根据我的阅读和理解，PHP-FPM 提供了 PHP-CGI 的替代品，而不是与它一起运行的东西。因此，我认为以下配置应该到位：

```
ScriptAlias /php-cgi "/usr/local/sbin/php-fpm"    
AddHandler php-fastcgi .php    
Action php-fastcgi /php-cgi
FastCGIExternalServer /usr/local/sbin/php-fpm -socket /tmp/php-fpm.sock -idle-timeout 60 -pass-header Authorization 
```

第二种配置（使用 PHP-FPM）也可以。我没有注意到两者之间的任何东西，但我担心其中一个实际上是错误的。

有人愿意分享他们的想法、发现或回答应该采用哪种配置吗？当我应该运行 php-fpm 时，我不喜欢运行 php-cgi 的想法。

提前谢谢，杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T11:38:16.557

您正在查看错误的参数。在这种情况下，FastCGI 使用套接字与 PHP-FPM 进行通信。您将看到在 PHP-FPM 配置中配置的套接字。

所以重要的不是 FastCGIExternalServer 的第一个参数，而是第二个参数。第一个只是用来愚弄 Apache。

因此，处理程序发生的情况是，为 php 创建了一个处理程序，为该处理程序创建了一个动作，该路径被别名。完成后，FastCGI 可以将该路径指向一个套接字。

在 Apache 2.4 中使用 mod_proxy_fcgi 会更好。

干杯，约瑟夫

# javascript - 访问嵌套 JSON 中的对象 - Songkick API

> ID：16136238
> 
> 赞同：0
> 
> 时间：2013-04-21T21:08:36.443
> 
> 标签：javascript, jquery, html, json, ajax

我正在尝试在 Songkick 的事件详细信息 API 的性能部分下获取艺术家的 URI 和 DisplayName。

他们网站的示例数据结构：

```
{
    "resultsPage": {
        "results": {
            "event": [
                {
                    "id": 11129128,
                    "type": "Concert",
                    "uri": "http://www.songkick.com/concerts/11129128-wild-flag-at-fillmore?utm_source=PARTNER_ID&utm_medium=partner",
                    "displayName": "Wild Flag at The Fillmore (April 18, 2012)",
                    "start": {
                        "time": "20:00:00",
                        "date": "2012-04-18",
                        "datetime": "2012-04-18T20:00:00-0800"
                    },
                    "performance": [
                        {
                            "artist": {
                                "uri": "http://www.songkick.com/artists/29835-wild-flag?utm_source=PARTNER_ID&utm_medium=partner",
                                "displayName": "Wild Flag",
                                "id": 29835,
                                "identifier": []
                            },
                            "displayName": "Wild Flag",
                            "billingIndex": 1,
                            "id": 21579303,
                            "billing": "headline"
                        }
                    ],
                    "location": {
                        "city": "San Francisco, CA, US",
                        "lng": -122.4333,
                        "lat": 37.78424
                    },
                    "venue": {
                        "id": 6239,
                        "displayName": "The Fillmore",
                        "uri": "http://www.songkick.com/venues/6239-fillmore?utm_source=PARTNER_ID&utm_medium=partner",
                        "lng": -122.4333,
                        "lat": 37.78424,
                        "metroArea": {
                            "uri": "http://www.songkick.com/metro_areas/26330-us-sf-bay-area?utm_source=PARTNER_ID&utm_medium=partner",
                            "displayName": "SF Bay Area",
                            "country": {
                                "displayName": "US"
                            },
                            "id": 26330,
                            "state": {
                                "displayName": "CA"
                            }
                        }
                    },
                    "status": "ok",
                    "popularity": 0.012763
                }
            ]
        },
        "totalEntries": 24,
        "perPage": 50,
        "page": 1,
        "status": "ok"
    }
} 
```

我正在使用 AJAX 和 jQuery。我可以成功访问场地名称；但是，当尝试在 Performance 数组中获取数据时，它会中断并且没有任何返回。

HTML：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <script src="js/vendor/jquery-1.9.1.min.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">Mesh.fm</a>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <div class="container">

            <!-- Main hero unit for a primary marketing message or call to action -->
            <div class="hero-unit">
                <h1>Mesh.fm</h1>
                <p>The best way to find new music happening near you!</p>
                <button class="btn btn-warning btn-large" id="shows">Listen to NYC </button>
            </div>

            <!-- Example row of columns -->
            <div class="row">
                <div class="span2">
                    <h2>Type</h2>
                    <ul id="artistname"></ul>
                </div>
                <div class="span10">
                    <h2>Show</h2>
                    <ul id="localshows"></ul>
                </div>
            </div>

            <hr>

        </div> <!-- /container -->

    </body>
</html> 
```

jQuery：

```
$(document).ready(function() {
  $.ajax({
  url:  "http://api.songkick.com/api/3.0/metro_areas/7644/calendar.json?&apikey={your_api_key}&per_page=all&max_date=2013-06-30&jsoncallback=?",
  dataType:   "jsonp", 
  success:    function(data){ 
    $.each(data["resultsPage"]["results"]["event"], function(i, entry){
        $("#localshows").append('<li><a href="' + entry.uri+'">'+entry.venue.displayName+'</a></li>');
        $("#artistname").append('<li><a href="' + entry.uri+'">'+entry["performance"][0]["artist"]["displayName"]+'</a></li>');
      });
     }     
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:22:58.257

查看来自 API 的响应，并非所有事件`artist`在数组中都有属性`performance`，您只需使用以下命令检查性能数组的长度：

```
$("#localshows").append('<li><a href="' + entry.uri + '">' + entry.venue.displayName + '</a></li>');
if (entry.performance.length) {
    $("#artistname").append('<li><a href="' + entry.uri + '">' + entry["performance"][0]["artist"]["displayName"] + '</a></li>');
} 
```

如果您正在考虑以这种方式构建 html，这是另一个示例（尽管如果您经常这样做，您应该真正考虑像敲除或把手这样的模板解决方案）：

```
$.each(data.resultsPage.results.event, function (i, event) {
    var showsContainer = $('#localshows');
    var artistContainer = $('#artistname');

    var showListItem = $('<li/>');
    var showAnchor = $('<a/>').attr('href', event.uri).html(event.venue.displayName);
    showListItem.append(showAnchor);
    showsContainer.append(showListItem);

    if (event.performance.length) {
        var artistListItem = $('<li/>');
        var artistAnchor = $('<a/>').attr('href', event.uri).html(event.performance[0].artist.displayName);
        artistListItem.append(artistAnchor);
        artistContainer.append(artistListItem);
    }
}); 
```

PS。从您之前的评论中删除您的 api 密钥，并在可能的情况下将其重置；）

# xml - 使用 XML 或 JSON 做什么？

> ID：16136239
> 
> 赞同：1
> 
> 时间：2013-04-21T21:08:47.973
> 
> 标签：xml, json

请不要因为我的要求而抨击我。我找不到任何可以帮助我理解这一点的信息。

我已经编程两年了，但我仍然从未使用过 JSON 或 XML。我可以用 JSON 或 XML 做什么，而我不能用数据库做什么？我们只是将它们用作配置文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:11:23.393

XML 和 JSON 是通用的序列化格式。只要您想以简单的方式在应用程序之间交换数据，就可以使用它们。您不需要发明自己的文件格式。您可以使用标准化的基础设施（序列化程序、库）。

例如，您将如何将结构化数据（例如有关销售或客户的信息）发送给第 3 方？您需要就数据格式达成一致。XML 和 JSON 很方便。您可以轻松生成 JSON，其他开发人员将立即了解其结构并能够使用很少的代码对其进行反序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T21:37:16.597

虽然另一个答案*基本上是*正确的（两者都是数据交换的通用选项），但值得注意的是存在一些重要差异。XML 是为处理文档而构建的。JSON 用于描述对象。

1.  字符编码、解析和验证。XML 是为了让解析器自动处理这个问题而构建的，而 JSON 则不然。
2.  简单，紧凑。XML 根本无法做到这一点，几乎和 JSON 一样好。

因此，如果您必须编写一些将数据转储到文件的内容，并且文件在没有任何元数据（描述 mime 类型、字符编码或其他约定）的情况下传输*，* XML 可能是一种更好的方法，因为您可以嵌入必要的元数据数据中的数据使用适当的声明（和命名空间）。当涉及到“文档”时，这一点尤其重要：JSON 根本没有很好地描述语言环境的原语，也没有所有解析器都能理解的合理标准方法。因此，如果有人做了一些非常愚蠢的事情，比如将 UTF-8 编码的 JSON 字符串转换为 Shift-JIS，那么祝任何解析器都能以通用方式理解它。XML 解决了这个问题（它还提供语言支持）。

另一方面，如果您想要做的只是在高度受控的环境中交换一堆对象（即字符编码、语言等都是明确定义的参数），那么您不必担心会出现任意奇怪的情况-- 然后 JSON 提供了一种更紧凑的序列化格式，对于大多数程序员来说，它也（可能）更容易阅读。最后，JSON 特别适合 Web 应用程序，因为它本身就是有效的 JavaScript。在将 JSON 视为 JavaScript 代码的一部分时，使用类似的东西`eval`，对于使用任意 JSON 来说不是一个好的安全实践；它可以帮助简化您确实可以完全控制的 Web 应用程序的任何前端的“启动和运行”阶段（您需要做的就是“评估”它，但对于必须使用的代码来说也是如此任意 JSON 这是一个糟糕的主意，因为这可能会使您暴露于*其他*站点以及您自己的站点的安全漏洞）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T21:43:49.470

作为一个真实的例子，我曾经在一个与 Ruby on Rails 服务器交互的 iOS 应用程序上工作。服务器有一个 SQL 数据库和许多应用程序的逻辑。服务器接受来自 iOS 客户端的请求，检索和操作相关数据，然后将结果呈现为 JSON，将其发送回客户端以用于任何用途。这是 Ruby 服务器应用程序向 Objective-C iOS 应用程序产生数据的一种简单方法。

# javascript - 如何同时执行两个或多个 JavaScript 函数？

> ID：16136242
> 
> 赞同：1
> 
> 时间：2013-04-21T21:08:59.923
> 
> 标签：javascript

正如标题所说，我的问题很简单明了：

如何像多线程编程一样同时执行两个或多个 JavaScript 函数？

我问这个问题是为了减少我网站中的页面加载时间。

在我的 JavaScript 代码中，它连续发出两个请求，但它们彼此无关。因此，我想同时执行它们。

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:12:00.977

查看[JavaScript Web Workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)。它们是执行多线程的 JavaScript 方式。

请注意，Web Worker 无法访问页面的 DOM，但它可以在完成工作后将消息传递回页面中的脚本。

# r - 使用 NA 将时间序列转换为. Quarterly

> ID：16136245
> 
> 赞同：2
> 
> 时间：2013-04-21T21:09:13.217
> 
> 标签：r, xts, zoo

我有一个`zoo`包含 NA 的多元时间序列，我想将其转换为季度序列。

```
df1 <-1:12
df1[df1%%4==0] <- NA
zoo.object  <- zoo(matrix(df1, ncol=2),as.Date("2013-01-01")+(0:5)*35)
colnames(zoo.object) <-c("stock1","stock2")

> zoo.object
           stock1 stock2
2013-01-01      1      7
2013-02-05      2     NA
2013-03-12      3      9
2013-04-16     NA     10
2013-05-21      5     11
2013-06-25      6     NA 
```

理想情况下，我想为每只股票保留本季度的早期数据。我曾尝试从 xts 包中进行 to.quarterly，但问题是它删除了带有 NA 的行。

```
> to.quarterly(zoo.object,OHLC = FALSE)
        stock1 stock2
2013 Q1      3      9
2013 Q2      5     11
Warning message:
In to.period(x, "quarters", indexAt = indexAt, name = name, ...) :
  missing values removed from data 
```

我也考虑过使用`na.locf`，但这会将数据从一个季度带到下一个季度。（在 2013 年 4 月 16 日（第 1 季度）的示例中，股票 1 不应等于 3（因为这是第 2 季度的值）。A`reverse na.locf`也不起作用，因为它可以携带后面季度的数字。

使用我的示例，这就是我想要的：

```
 stock1 stock2
2013 Q1      1      7
2013 Q2      5     10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:17:46.807

试试这个

```
library(xts)
(z <- period.apply(zoo.object, endpoints(zoo.object, "quarters"), 
                    function(x) first(na.locf(x, fromLast=TRUE))))
#           stock1 stock2
#2013-03-12      1      7
#2013-06-25      5     10 
```

* * *

根据评论，您可以将索引转换为`yearqtr`：

```
index(z) <- as.yearqtr(index(z))
z
#         stock1 stock2
#2013 Q1       1      7
#2013 Q2       5     10 
```

或者，也许你更喜欢

```
index(z) <- as.Date(as.yearqtr(index(z)))
z
#           stock1 stock2
#2013-01-01      1      7
#2013-04-01      5     10 
```

# javascript - CSS 包装错误

> ID：16136247
> 
> 赞同：2
> 
> 时间：2013-04-21T21:09:22.527
> 
> 标签：javascript, jquery, css

我已经`<div>`调用了容器，它包装了几个 `<div>`称为块的 s，我使用了一个名为 columnizer 的 jquery 插件将块拆分为列。问题是，我似乎无法让被`<div>`调用的容器包装通过 div 的块.我也有图片来证明我的问题。

我尝试了很多解决方案，例如删除容器宽度，但它不起作用，因为我认为名为 columnizier 的 jquery 插件需要一个宽度。

![在此处输入图像描述](https://i.stack.imgur.com/JyLUa.jpg)

我的html

```
<script type = "text/javascript" src ="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type = "text/javascript" src ="https://raw.github.com/adamwulf/Columnizer-jQuery-Plugin/master/src/jquery.columnizer.js"></script>

    <script type="text/javascript">
    $(function(){
        $('h1').addClass('dontend');
        $('.wide').columnize({
            width : 100,
            height : 300
        });
    });
</script>

 <script  style="display:none" type="text/javascript">var Mint=new Object();Mint.save=function()
{var now=new Date();var debug=false;if(window.location.hash=='#Mint:Debug'){debug=true;};var path='http://welcome.totheinter.net/mint/?record&key=6a56784248357a3735323031363633316663796c526d';path=path.replace(/^https?:/,window.location.protocol);for(var developer in this)
{for(var plugin in this[developer])
{if(this[developer][plugin]&&this[developer][plugin].onsave)
{path+=this[developer][plugin].onsave();};};};path+='&'+now.getTime();if(debug){window.open(path+'&debug&errors','MintLiveDebug'+now.getTime());return;};var ie=/*@cc_on!@*/0;if(!ie&&document.getElementsByTagName&&(document.createElementNS||document.createElement))
{var tag=(document.createElementNS)?document.createElementNS('http://www.w3.org/1999/xhtml','script'):document.createElement('script');tag.type='text/javascript';tag.src=path+'&serve_js';document.getElementsByTagName('head')[0].appendChild(tag);}
else if(document.write)
{document.write('<'+'script type="text/javascript" src="'+path+'&amp;serve_js"><'+'/script>');};};if(!Mint.SI){Mint.SI=new Object();}
Mint.SI.Referrer={onsave:function()
{var encoded=0;if(typeof Mint_SI_DocumentTitle=='undefined'){Mint_SI_DocumentTitle=document.title;}
else{encoded=1;};var referer=(window.decodeURI)?window.decodeURI(document.referrer):document.referrer;var resource=(window.decodeURI)?window.decodeURI(document.URL):document.URL;return '&referer='+escape(referer)+'&resource='+escape(resource)+'&resource_title='+escape(Mint_SI_DocumentTitle)+'&resource_title_encoded='+encoded;}};Mint.save();</script> 

<!DOCTYPE html>

<meta charset="utf-8" />
<link rel="stylesheet" href="b.css">

<div class="container"> <div class="wide">

    <div class="block"></div><br>
    <div class="block"></div><br>
    <div class="block"></div><br>

</div></div> 
```

我的 CSS

```
.container {
    background-color: #ED8713;
    height: 300px;
    width: 200px;

}
.block {
    width: 50px;
    height:250px;
    background-color: #C31212;
    margin: 10px;
    margin-top: 5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:14:10.410

它在这里工作：http: [//jsfiddle.net/gRxdF/3/](http://jsfiddle.net/gRxdF/3/)

CSS：

```
.container {
    background-color: #ED8713;
    height: 300px;
    float: left;
}
.block {
    display: inline-block;
    height: 250px;
    background-color: #C31212;
    margin: 10px;
    margin-top: 5px;
} 
```

`HTML`- 我删除了`<br>`标签。

# python-2.7 - 请求 lib 和 py2exe COM 服务器问题

> ID：16136255
> 
> 赞同：1
> 
> 时间：2013-04-21T21:10:07.333
> 
> 标签：python-2.7, py2exe, python-requests

我在一个 Com Server DLL 中工作，我使用请求将 POST 与一些 XML 文件一起制作为多部分表单。Localy，它工作得很好，没有错误。我可以调用 COM 对象方法，它会返回我想要的内容。

现在，当我使用 py2exe 构建应用程序的 dist 版本并尝试使用 regsvr32 注册 DLL Com 服务器时，我收到以下错误：“运行时错误！... R6034 应用程序已尝试加载 C运行时库不正确。...”另外，我注意到，如果我在我的 python 代码中删除对请求库的任何引用，我不会遇到这个问题（显然，我已经失去了模块的主要功能） .

我尝试以各种可能的方式使用清单解决方案分发 C 运行时 DLL。还从 microsoft redistributable 安装程序安装了运行时。一点效果都没有。我可以肯定它与运行时本身无关。

使用 W7 和 XP 制作虚拟机，用于测试目的。我可以用regsvr32注册Com服务器，但是调用方法时出现错误。但是，如果我用请求库注释我进行 POST 的行，或者如果我调用另一个不涉及请求的方法，则不会发生错误并且一切似乎都工作正常。当然，COM 的关键功能丢失了，因为一切都围绕请求库。而且我真的不想使用原始的 urllib 库...

我的结论：似乎与 py2exe 和请求库有关。必须缺少一些依赖项。虽然我不知道是什么或为什么，因为 py2exe 似乎正在打包所有东西......以前用 py2exe 分发 COM 服务器从来没有任何问题。有没有人对py2exe和请求有任何类似的问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:56:03.320

似乎与[py2exe com dll 问题](https://stackoverflow.com/questions/3126379/py2exe-com-dll-problem)非常相似。也许它只是[打包 C 运行时 DLL](http://www.py2exe.org/index.cgi/Tutorial#Step521)或在您要部署到的机器上安装[Visual C++ 2008 Redistributable的问题。](http://www.microsoft.com/en-ca/download/details.aspx?id=29)

# sql - 使用 PL/SQL 将 XML 解析/分解为关系表

> ID：16136257
> 
> 赞同：0
> 
> 时间：2013-04-21T21:10:12.503
> 
> 标签：sql, oracle, plsql, xml-parsing, oracle11gr2

我有一个 XML 存储在名为 XML_TABLE 的表中名为 xml_file 的 XMLTYPE 列中。我正在使用 Oracle 11g r2。

```
<ROWSET> 
 <DEPARTMENT>
  <DEPARTMENT_ID>DEP22681352268280797</DEPARTMENT_ID>
  <DEPARTMENT_NAME>myDEPARTMENT</DEPARTMENT_NAME>
  <SECTIONS_ID>6390135666643567</SECTIONS_ID>
  <SECTIONS_NAME>mySection</SECTIONS_NAME>
 </DEPARTMENT>
 <DEPARTMENT>
  <DEPARTMENT_ID>DEP255555555550797</DEPARTMENT_ID>
  <DEPARTMENT_NAME>myDEPARTMENT2</DEPARTMENT_NAME>
  <SECTIONS_ID>63901667779243567</SECTIONS_ID>
  <SECTIONS_NAME>mySection2</SECTIONS_NAME>
 </DEPARTMENT>
</ROWSET> 
```

我想将这些值插入到两个表中，即部门和部分。如何在 PL/SQL 中实现这一点。我曾尝试使用提取功能，但我只是读到它不再推荐，因此寻求帮助。此外，我不知道我将如何迭代 xml values..cursor ...??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:47:54.633

使用 XQuery 将 XML 文档拆分为有趣的数据块。用 XMLTable 表示这些块以获得可以在 SQL 中使用的东西。

这是针对您的案例的解决方案的粗略尝试（显然它必须是粗糙的，您还没有发布表结构，但我假设 SECTIONS 具有 DEPARTMENTS 的外键）。您应该阅读文档[以了解更多信息](http://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb_xquery.htm#ADXDB5121)。

```
insert all
   into departments
       values (dept_id, dept_name)
   into sections
       values (dept_id, sect_id, sect_name)
select dept.id as dept_id
      , dept_name as dept_name
      , sect.id as sect_id
      , sect.name as sect_name
from your_table
     , xmltable('/ROWSET/DEPARTMENT'  
               passing your_table.xml_col
               columns 
                  "ID"  varchar2(30) path 'DEPARTMENT_ID'
                  , "NAME"  varchar2(30) path 'DEPARTMENT_NAME'
              ) dept
     , xmltable('/ROWSET/SECTION'  
               passing your_table.xml_col
               columns 
                  "ID"  varchar2(30) path 'SECTION_ID'
                  , "NAME"  varchar2(30) path 'SECTION_NAME'
              ) sect 
```

顺便说一句，DEPARTMENT 的重复很*糟糕*。XML 很难使用，但至少它支持分层数据结构。如果您不打算使用它来避免重复，那么您不妨使用 CSV。无论如何，由于发布的 XML 不包含任何实际的重复，解决了它的失败留给读者作为练习。

# python - 如何自动化这一系列 lldb 命令？

> ID：16136258
> 
> 赞同：4
> 
> 时间：2013-04-21T21:10:25.427
> 
> 标签：python, lldb, vmat

为了解决 Apple 的**lldb** (rdar://13702081) 中的错误，我经常需要依次键入两个命令，如下所示：

```
(lldb) p todo.matA
(vMAT_Array *) $2 = 0x000000010400b5a0
(lldb) po $2.dump
$3 = 0x0000000100503ce0 <vMAT_Int8Array: 0x10400b5a0; size: [9 1]> = 
1
1
1
1
1
1
1
1
1 
```

是否可以使用可以为我组合这些步骤的 Python 库（或其他东西）编写新的**lldb命令？**理想情况下是这样的：

```
(lldb) pmat todo
$3 = 0x0000000100503ce0 <vMAT_Int8Array: 0x10400b5a0; size: [9 1]> = 
1
1
1
1
1
1
1
1
1 
```

## 解决方案

感谢 Jason Molenda，这里是工作**lldb**命令脚本的输出：

```
(lldb) pmat Z
$0 = 0x0000000100112920 <vMAT_DoubleArray: 0x101880c20; size: [9 3]> = 
       7        9 0.848715
       3        5 0.993378
       0        1  1.11738
       4       12   1.2013
      11       13  1.20193
       6       10  1.29206
      14       15  1.53283
       8       16  1.53602
       2       17  1.68116 
```

我确实不得不稍微调整下面答案中提供的脚本，使用 Jason 的建议来解决带有过于复杂的表达式的**lldb错误。**这是我的最终脚本：

```
# import this into lldb with a command like
# command script import pmat.py
import lldb
import shlex
import optparse

def pmat(debugger, command, result, dict):
  # Use the Shell Lexer to properly parse up command options just like a
  # shell would
  command_args = shlex.split(command)
  parser = create_pmat_options()
  try:
    (options, args) = parser.parse_args(command_args)
  except:
   return

  target = debugger.GetSelectedTarget()
  if target:
    process = target.GetProcess()
    if process:
      frame = process.GetSelectedThread().GetSelectedFrame()
      if frame:
        var = frame.FindVariable(args[0])
        if var:
          array = var.GetChildMemberWithName("matA")
          if array:
            id = array.GetValueAsUnsigned (lldb.LLDB_INVALID_ADDRESS)
            if id != lldb.LLDB_INVALID_ADDRESS:
              debugger.HandleCommand ('po [0x%x dump]' % id)

def create_pmat_options():
  usage = "usage: %prog"
  description='''Print a dump of a vMAT_Array instance.'''
  parser = optparse.OptionParser(description=description, prog='pmat',usage=usage)
  return parser

#
# code that runs when this script is imported into LLDB
#
def __lldb_init_module (debugger, dict):
  # This initializer is being run from LLDB in the embedded command interpreter
  # Make the options so we can generate the help text for the new LLDB
  # command line command prior to registering it with LLDB below

  # add pmat
  parser = create_pmat_options()
  pmat.__doc__ = parser.format_help()
  # Add any commands contained in this module to LLDB
  debugger.HandleCommand('command script add -f %s.pmat pmat' % __name__) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T04:38:33.487

您可以使用正则表达式命令或通过创建自己的 python 命令并将其加载到 lldb 来执行此操作。在这个特定的例子中，正则表达式命令不会帮助你，因为你会碰到你正在击中的同一个崩溃者。但只是为了好玩，我将展示这两种解决方案。

首先，蟒蛇。此 python 代码在当前选定的线程上获取当前选定的帧。它查找名称在命令参数中提供的变量。它找到该变量的一个子变量`matA`，并`GetObjectDescription()`在该 SBValue 对象上运行。

```
# import this into lldb with a command like
# command script import pmat.py
import lldb
import shlex
import optparse

def pmat(debugger, command, result, dict):
  # Use the Shell Lexer to properly parse up command options just like a
  # shell would
  command_args = shlex.split(command)
  parser = create_pmat_options()
  try:
    (options, args) = parser.parse_args(command_args)
  except:
   return

  target = debugger.GetSelectedTarget()
  if target:
    process = target.GetProcess()
    if process:
      frame = process.GetSelectedThread().GetSelectedFrame()
      if frame:
        var = frame.FindVariable(args[0])
        if var:
          child = var.GetChildMemberWithName("matA")
          if child:
            print child.GetObjectDescription()

def create_pmat_options():
  usage = "usage: %prog"
  description='''Call po on the child called "matA"'''
  parser = optparse.OptionParser(description=description, prog='pmat',usage=usage)
  return parser

#
# code that runs when this script is imported into LLDB
#
def __lldb_init_module (debugger, dict):
  # This initializer is being run from LLDB in the embedded command interpreter
  # Make the options so we can generate the help text for the new LLDB
  # command line command prior to registering it with LLDB below

  # add pmat
  parser = create_pmat_options()
  pmat.__doc__ = parser.format_help()
  # Add any commands contained in this module to LLDB
  debugger.HandleCommand('command script add -f %s.pmat pmat' % __name__) 
```

正在使用，

```
(lldb) br s -p break
Breakpoint 2: where = a.out`main + 31 at a.m:8, address = 0x0000000100000eaf

(lldb) r
Process 18223 launched: '/private/tmp/a.out' (x86_64)
Process 18223 stopped
* thread #1: tid = 0x1f03, 0x0000000100000eaf a.out`main + 31 at a.m:8, stop reason = breakpoint 2.1
    #0: 0x0000000100000eaf a.out`main + 31 at a.m:8
   5        @autoreleasepool {
   6            struct var myobj;
   7            myobj.matA = @"hello there";
-> 8            printf ("%s\n", [(id)myobj.matA UTF8String]); // break here
   9        }
   10   }
(lldb) p myobj
(var) $0 = {
  (void *) matA = 0x0000000100001070
}
(lldb) comm scri imp ~/lldb/pmat.py
(lldb) pmat myobj
hello there
(lldb) 
```

如果你想使用它，你可以把这`command script import`条线放在你的文件中。`~/.lldbinit`

一旦您大致了解了调试器的结构，就很容易使用 Python API。我知道我会根据框架找到变量，所以我查看了`SBFrame`对象的帮助

```
(lldb) script help (lldb.SBFrame) 
```

该方法`FindVariable`返回一个`SBValue`，然后我查看了`lldb.SBValue`帮助页面等。在我上面的示例 python 中有很多样板 - 你真的在看 4 行 python 来完成所有工作。

如果这仍然触发导致 lldb 进程崩溃的代码路径，您可以分两部分执行脚本的最后一点 - 获取对象的地址并在该原始地址上运行 po。例如

```
 child = var.GetChildMemberWithName("matA")
          if child:
            id = child.GetValueAsUnsigned (lldb.LLDB_INVALID_ADDRESS)
            if id != lldb.LLDB_INVALID_ADDRESS:
              debugger.HandleCommand ('po 0x%x' % id) 
```

其次，使用命令正则表达式：

```
(lldb) br s -p break
Breakpoint 1: where = a.out`main + 31 at a.m:8, address = 0x0000000100000eaf
(lldb) r
Process 18277 launched: '/private/tmp/a.out' (x86_64)
Process 18277 stopped
* thread #1: tid = 0x1f03, 0x0000000100000eaf a.out`main + 31 at a.m:8, stop reason = breakpoint 1.1
    #0: 0x0000000100000eaf a.out`main + 31 at a.m:8
   5        @autoreleasepool {
   6            struct var myobj;
   7            myobj.matA = @"hello there";
-> 8            printf ("%s\n", [(id)myobj.matA UTF8String]); // break here
   9        }
   10   }
(lldb) command regex pmat 's/(.*)/po %1.matA/'
(lldb) pmat myobj
$0 = 0x0000000100001070 hello there
(lldb) 
```

在这种情况下你不能使用更简单`command alias`的——你必须使用正则表达式别名——因为你正在调用一个接受原始输入的命令。具体来说，`po`它实际上是一个别名`expression`，您需要使用正则表达式命令别名将值替换为这些值。

# java - 在插入地图之前循环遍历字符串中的每个字符的大 O 表示法

> ID：16136262
> 
> 赞同：0
> 
> 时间：2013-04-21T21:11:08.210
> 
> 标签：java, hashmap, hashtable

我是大 O 表示法的新手，在我的程序中有几个关于它的问题。

我有一个有 2 张地图的程序。在添加到其中一张地图之前，我会遍历每个字符并随机更改大小写。我只是将字符串放入另一张地图（无操作）

如果插入地图的大 O 是 O(1)，如果我在将每个字符放入地图之前循环遍历它是什么？这个程序的总 O 复杂度是多少（将每个插入组合到地图中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:14:46.053

如果您有一个大小为 n 的字符串并对其进行迭代，在内部循环中执行 O(1) 插入，则时间复杂度为 O(n)。

为了使这稍微不那么简单，假设插入成本**a**（其中**a**可以是 n 的函数、常数或完全其他的东西），那么总成本将是 O(an+a)。这是因为您在内部循环中插入 n 次，然后对整个字符串再插入一次。在你的情况下，a=1，所以我们有 O(1n+1) = O(n)。

# jar - 从 Eclipse 或命令行导出 jar 文件

> ID：16136271
> 
> 赞同：2
> 
> 时间：2013-04-21T21:12:30.750
> 
> 标签：jar, manifest

这是我的第一篇文章，但我打算在未来更频繁地使用它，所以如果我做错了什么，请批评。

我已经对该主题进行了研究，并且已经尝试了从使用命令行到Eclipse的文件>“导出> JAR”再选择适当的选项的所有事情。

基本上我已经尝试了以下两个链接中建议的所有内容：

[Java：在 Eclipse 中导出到 .jar 文件](https://stackoverflow.com/questions/423938/java-export-to-an-jar-file-in-eclipse)

[http://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html)

我努力的结果是：1）创建了一个 jar 文件 2）当我尝试运行它时，错误是“无法从 test.jar 加载 Main-Class 清单属性”

我向你保证，我确实在我的项目中创建了一个“manifest.txt”文件，其中包含“Main-Class：Login”我什至包括一个换行符，因为我听说在某些情况下这是必要的。

有谁知道我可能会错过什么？或者更好的是，任何人都可以提供有关如何创建 jar 的非常详细的说明。这可以来自命令行或 Eclipse。

我当前的项目设置在我的工作区中有三个 java 文件：Login、NewFrame 和 NewUser。登录具有最终将调用其他文件的主要方法。这三个文件在默认包中。项目名称是 JavaVersion。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:06:02.387

感谢 Antimony 的关注和帮助。经过更多的修补，我能够自己弄清楚。原来我从来没有正确定义入口点。对于希望在 Eclipse 中导出 jar 的任何人，我也想推荐这个链接。

[如何使用自定义清单文件在 Eclipse 中构建 JAR？](https://stackoverflow.com/questions/1106467/how-do-you-build-a-jar-in-eclipse-with-a-custom-manifest-file?rq=1)

# javascript - 如何为 chrome 扩展制作开/关按钮/图标？

> ID：16136275
> 
> 赞同：8
> 
> 时间：2013-04-21T21:12:47.780
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script

我想让用户决定何时运行脚本，这样当浏览器打开时，会显示“关闭”图标并且没有脚本运行；但是当用户单击它时，它会变为“打开”图标并执行用户脚本，直到用户单击关闭。我有两个 png 图标，每个图标都是 32x32：`on.png`和`off.png`.

我的两个问题：

1.  如何将默认图标设置为我的 off.png？我在我的尝试过，`manifest.json`但它没有设置图标，而是显示了一个拼图（我假设是默认值）：

    ```
    ...
    "browser_action": {
       "default_icon": {
           "32": "off.png"
           },
       "default_title": "icon"
    },
    "icons": {
       "32": "on.png",
       "32": "off.png"
    },
    "background": {
       "scripts": ["background.js"] 
    }, 
    "content_scripts": [{ 
       "js": ["SCRIPT.user.js"]
    ... 
    ```

2.  这是我的`background.js`，我暂时做了一个快速功能来尝试根据`onClicked`

    ```
    var status = 0;

    function toggle() {
    if (status == 0){
        chrome.browserAction.setIcon({path: "on.png", tabId:tab.id}); // so it's set for the tab user is in
        chrome.tabs.executeScript(tab.id, file:"SCRIPT.user.js"); //execute for this tab
        status++;
    }
    if (status == 1){
        chrome.browserAction.setIcon({path: "off.png", tabId:tab.id});
        chrome.tabs.executeScript(tab.id, code:"alert()"); // execute nothing when off
        status++;
    }
    if (status > 1)
        status = 0; // toggle
    }

    chrome.browserAction.onClicked.addListener(function(tab) {
        toggle();
    }); 
    ```

*（我应该提到，当我在“加载解压扩展”中加载包含我的脚本、图标和清单的文件夹，然后选择“检查视图”以检查是否有任何立即错误时，我`Uncaught SyntaxError: Unexpected token :`在 background.js 中看到，虽然我没有不知道它指的是什么）......而且它似乎没有在脚本文件夹中显示我的用户脚本*

那么，有什么想法，有帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T21:43:28.177

好的，让我对您的清单和背景页面进行一些更改。

**清单.json**

```
"browser_action": {
  "default_icon": "off.png",
  "default_title": "icon"
}, 
```

这将成为默认值`off.png`。至于图标部分，请阅读[文档](http://developer.chrome.com/extensions/manifest.html#icons)以了解它的用途，但现在只需将其完全删除。还要删除您在 contentScripts 部分中的内容。如果您想以编程方式注入它，则无需在清单中列出它。

接下来对背景页面进行一些更改，使其更加干净：

**背景.js**

```
var toggle = false;
chrome.browserAction.onClicked.addListener(function(tab) {
  toggle = !toggle;
  if(toggle){
    chrome.browserAction.setIcon({path: "on.png", tabId:tab.id});
    chrome.tabs.executeScript(tab.id, {file:"SCRIPT.user.js"});
  }
  else{
    chrome.browserAction.setIcon({path: "off.png", tabId:tab.id});
    chrome.tabs.executeScript(tab.id, {code:"alert()"});
  }
}); 
```

# java - 在 Java 中关闭窗口框架时不执行任何操作

> ID：16136277
> 
> 赞同：1
> 
> 时间：2013-04-21T21:12:55.327
> 
> 标签：java, swing, jframe, awt, action

```
 frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent b) {

            // Do stuff
            if (socket != null) {

                    socket.close();
                    socket = null;

                } catch (IOException e) {
                    socket = null;
                }
                System.out.println("About to abort!");

            }
            dispose();

        }

    }); 
```

从上面的代码中，我想要实现的是，当他们点击红色的 X 按钮时，它将检查 TCP 套接字是否仍然连接，如果它仍然连接则 close(); 并为套接字分配一个空值，我想打印一些东西，但实际上什么也没发生。

我在这里做错了吗？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:15:07.427

确保关闭操作设置为`DO_NOTHING_ON_CLOSE`：

```
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

# python - Python将日语输入转换为问号

> ID：16136279
> 
> 赞同：1
> 
> 时间：2013-04-21T21:13:01.377
> 
> 标签：python, filenames

我正在尝试编写一个程序，该程序将获取文件名并通过更改单词的顺序来重命名它们。它适用于大多数文件，但我有一些文件名中包含日文字符的文件，该程序无法正常工作。我认为这是因为它将字符转换为问号（我已经使用 print 进行了检查）然后找不到文件，因为文件中有日文字符，而不是问号。我该如何解决这个问题？

编辑：是的，我使用的是 Windows。

下面发布了我的代码的重新创建（我对此相当陌生，因此它可能非常低效且难以阅读）。

```
import os

def Filenames(filelist):
    filenames = []
    for name in filelist:
        name = name.split(".") #Take off file extension
        filenames.append(name)
    return filenames

def ReformatName(directory):
    filelist = []
    name = []    

    filelist = os.listdir(directory)
    filenames = Filenames(filelist)

    for doc in filenames: #Docs are in form "Date Name Subject DocName", want to turn into "Subject DocName Date"
        doc1 = doc.split(" ")
        date = doc1[0]
        subject = doc1[2]
        docname = doc1[3]

        newdoc = "%s %s %s.docx" %(subject, docname, date)
        doc = ".".join(doc)
        os.rename(os.path.normpath(directory + os.sep + doc), os.path.normpath(directory + os.sep + newdoc)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:31:31.947

对于 Windows 控制台的问题，我找到了一个相当复杂的解决方案：

```
# -*- coding: utf-8 -*-
import sys
import codecs

def setup_console(sys_enc="utf-8"):
    reload(sys)
    # Calling a system library function if we're using win32
    if sys.platform.startswith("win"):
        import ctypes
        enc = "cp%d" % ctypes.windll.kernel32.GetOEMCP() #TODO: check on win64/python64
    else:
        # It seems like for Linux everything already exists
        enc = (sys.stdout.encoding if sys.stdout.isatty() else
                    sys.stderr.encoding if sys.stderr.isatty() else
                        sys.getfilesystemencoding() or sys_enc)

    # Encoding for sys
    sys.setdefaultencoding(sys_enc)

    # Redefining standard output streams if they aren't redirected
    if sys.stdout.isatty() and sys.stdout.encoding != enc:
        sys.stdout = codecs.getwriter(enc)(sys.stdout, 'replace')

    if sys.stderr.isatty() and sys.stderr.encoding != enc:
        sys.stderr = codecs.getwriter(enc)(sys.stderr, 'replace') 
```

资料来源：[http](http://habrahabr.ru/post/117236/) ://habrahabr.ru/post/117236/ （仅提供俄语版）

# sql - Nil vs RecordNotFound 查询失败

> ID：16136280
> 
> 赞同：1
> 
> 时间：2013-04-21T21:13:19.083
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

当我做

```
User.find_by_username('some_user') 
```

并且找不到用户，上面的查询返回 nil。然而，

```
User.find(1) 
```

如果找不到用户，则抛出 ActiveRecord::RecordNotFound 错误。rails guide说这应该发生，但没有解释原因。这是我的问题，为什么会有两种不同的行为？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:23:09.913

ActiveRecord::RecordNotFound 仅在未找到具有给定 id(s) 的记录时引发。

如果您在按 id 搜索时不希望出现异常，可以使用：

```
User.find_by_id('foo') 
```

对我来说不同的是：

1.  User.find：给我那个用户。
2.  User.find_by_foo('foo'): 有没有 foo == foo 的用户？

第一个 (1) 假设您的记录存在，因此失败应该引发异常。

第二个 (2) 假设您要查询您的记录是否存在，因此缺少记录结果为零。

# ruby - 为什么 Ruby 块没有必需的参数？

> ID：16136281
> 
> 赞同：1
> 
> 时间：2013-04-21T21:13:21.690
> 
> 标签：ruby

从 Ruby 2.0 开始，我创建了一个使用新关键字参数的小脚本。在编写代码时，blocks 和 lambdas 的行为让我感到惊讶。下面练习我发现的内容：

```
def print_parameters(proc = nil, &block)
  p "Block: #{block.parameters}" if proc.nil?
  p "Lambda: #{proc.parameters}" unless proc.nil?
end

print_parameters(-> (first, second = 'test') {})
print_parameters(&-> (first, second = 'test') {})
print_parameters {|first, second = 'test'|} 
```

结果如下：

```
"Lambda: [[:req, :first], [:opt, :second]]"
"Block: [[:req, :first], [:opt, :second]]"
"Block: [[:opt, :first], [:opt, :second]]" 
```

为什么创建一个块没有必需的参数，但使用 lambda 或从 lambda 创建的块呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:22:07.660

Ruby 中块的语义旨在使它们对迭代器尽可能有用，例如`Integer#times`or `Enumerable#each`。由于块没有必需的参数，您可以执行以下操作：

```
10.times { puts "Hello!" } 
```

...或者：

```
10.times { |i| puts i } 
```

这也是Ruby 中`next`/`return`区别背后的原因。

Ruby“lambdas”是不同的；它们没有“优化”用作“循环体”（尽管如果你愿意，你可以这样使用它们）。它们对传递的参数数量更严格，这可能有助于捕获错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:32:06.997

`lambdas`行为更像 ruby​​ 中的方法：当您定义一个方法时，如果需要参数，那么在调用该方法时您必须提供参数。块的行为更像`procs`：`procs`可以声明参数，但它们不需要它。

`lambda`语法实际上是`proc`用严格的数量创建的。如果你在哪里输出两个变量的类，你会看到 lambda 和 blocks 都是`Proc`. `proc`使用 lambda 语法创建的 s 将对方法响应 true `#lambda?`。另请查看此 SO 讨论以了解 lambda 和 procs 之间的其他一些行为区别。[何时使用 lambda，何时使用 Proc.new？](https://stackoverflow.com/questions/626/when-to-use-lambda-when-to-use-proc-new)

# php - jQuery - 如何将数组从 PHP 发送到 HTML 文本框

> ID：16136284
> 
> 赞同：0
> 
> 时间：2013-04-21T21:13:47.673
> 
> 标签：php, javascript, jquery, arrays

我想在选择用户时自动填充用户表单。如何将数组从 PHP 传递到 JavaScript/jQuery，然后将值放入正确的文本框中？

```
$("#client").change(function() {
     $.get("../jquery/update_client.php?id=" + $("#client").val(),function(data){
          $("#first").val(data);
     });
}); 
```

PHP 文件：

```
if(isset($_GET['id'])){
include('../db_connect.php');
$id = mysqli_real_escape_string($mysqli, $_GET['id']);
$query = "SELECT * FROM users WHERE iduser=$id LIMIT 1";
$result = $mysqli->query($query);
$row = $result->fetch_array();
echo $row[];
} 
```

如何在 JavaScript/jQuery 中捕获数组，然后解析信息以放入正确的框中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:16:25.263

在 PHP 中；

```
echo json_encode($row); 
```

在 JavaScript 中，您现在将获得一个地图（数组）作为数据返回。然后，您可以循环使用此地图来填充您的文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:57:06.350

在php中将数据输出为json。那就是使用

```
echo (json_encode($data)); 
```

然后正如dfsq所说

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:27:19.353

也许如果您输出 JSON，最好使用带有简单 for 循环的 getJSON 方法来设置相应的字段值：

```
$.getJSON("../jquery/update_client.php?id=" + $("#client").val(), function(data) {
    for (var el in data) {
        $('[name="' + el + '"]').val(data[el]);
    };
}); 
```

[http://jsfiddle.net/2LuuC/](http://jsfiddle.net/2LuuC/)

# javascript - 单击从下拉菜单触发的弹出窗口时，如何防止下拉菜单隐藏？

> ID：16136285
> 
> 赞同：0
> 
> 时间：2013-04-21T21:13:49.577
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

我有一个使用标准 Twitter Bootstrap javascript 组件的下拉菜单触发的弹出窗口。

当用户点击弹出框时，你能帮我防止下拉菜单关闭吗？

这是一个小提琴：http: [//jsfiddle.net/EAdW5/](http://jsfiddle.net/EAdW5/)

用户体验：

1.  单击下拉菜单按钮`===>`下拉菜单显示

2.  单击弹出框下拉项弹出`===>`框显示

3.  单击弹出框`===>`下拉菜单，弹出框消失！ **哦不！我怎样才能防止这种情况？**

我希望弹出框和下拉列表保持不变，直到（a）单击外部下拉列表和弹出框，或（b）故意隐藏（例如，在单击弹出框表单提交之后）。

html:

```
<div class="btn-group">
    <button id="btnId" class="btn dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></button>
    <ul class="dropdown-menu">
        <li><a href="#">Regular Link 1</a></li>
        <li><a href="#">Regular Link 2</a></li>
        <li><a href="#" id="popoverId" class="popoverThis">Popover Link</a></li>
    </ul>
</div>

<div class="hide" id="popover-custom-content">
    <div class="form-inline">
        <div class="control-group">
            <textarea name="issue"></textarea>
        </div>
        <div class="control-group">
            <button id="btnPopoverSubmitId" class="btn">Add</button>
            <span class="close close-inline">Cancel</span>
        </div>
    </div>
</div> 
```

JS：

```
$('#popoverId').popover({
    html:true,
    placement: 'right',
    title: "Popover Title",
    template: '<div id="popover-custom-content" class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
    content: function() { return $('#popover-custom-content').html(); }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:18:16.830

根据 Bootstrap DROPDOWN 类定义，下拉菜单使用 $parent.toggleClass('open') 注册为活动的。在这种情况下，它将类“open”添加到 btn-group div，它是“btnId”元素的父级。

您可以阻止默认的 DROPDOWN 显示/隐藏切换，并使用 $('.btn-group').show(); 覆盖它 保持显示，无论引导程序默认行为如何。

然后在您的自定义 'mousedown' 事件以及 btn-group 节点的 'mouseout' 上使用 $('.btn-group').hide() 来恢复默认的引导行为。

或者，您也可以检查 jQuery event.stopPropagation() 或 event.stopImmediatePropagation() 以防止单击事件在 DOM 树上冒泡，从而防止任何父处理程序收到事件通知。[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

# vbscript - VBScript中的CMD

> ID：16136286
> 
> 赞同：0
> 
> 时间：2013-04-21T21:13:53.577
> 
> 标签：vbscript

我想编写一个简单的 vb 脚本来自动关闭 Windows。

我使用的代码是：

```
Dim ti
ti=InputBox("enter time in minutes")
ti=ti*60
Set objShell=CreateObject("WScript.Shell")
objShell.Run "cmd shutdown /s /t "& ti & " " 
```

但是当我输入时间并按 enter 时，我得到的只是一个命令提示符窗口，没有任何反应

我什至尝试通过设置时间的默认值并指定 shutdown.exe 的完整路径，但似乎没有任何效果

```
 Set WshShell = WScript.CreateObject("WScript.Shell")
  Command = "C:\Windows\System32 shutdown.exe -s -t 600 "
  WshShell.Run Command 
```

你能纠正我并指导我正确的代码....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:58:45.327

看起来您的路径中缺少反斜杠：

```
 Set WshShell = WScript.CreateObject("WScript.Shell")
  Command = "C:\Windows\System32\shutdown.exe -s -t 600 "
  WshShell.Run Command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:09:31.583

如果要在其中运行命令，`cmd`则必须使用`/k`（命令完成后保持`cmd`窗口打开）或`/c`（命令完成后关闭`cmd`窗口）。这是执行此操作的规范方法：

```
ti = InputBox("enter time in minutes")
ti = ti * 60
CreateObject("WScript.Shell").Run "%COMSPEC% /c shutdown -s -t " & ti 
```

`%COMSPEC%`是一个系统环境变量，其路径为`cmd.exe`.

# c# - 如何绘制在 Windows 窗体上移动的一系列对象

> ID：16136293
> 
> 赞同：1
> 
> 时间：2013-04-21T21:14:37.847
> 
> 标签：c#

我在 c# 中创建了在表单中水平移动的对象。现在我必须绘制多个（不是我以前做过的一个对象）随机生成并在表单中按顺序移动的对象。

这是我移动对象的代码

```
private Rectangle Enemy1 = new Rectangle(0, 150, 40, 40);

//code below paints the object on the form
e.Graphics.DrawRectangle(Pens.Red, Enemy1);

//part below moves the object on the form
int EX1 = Enemy1.Location.X;
int EY1 = Enemy1.Location.Y;
Enemy1.Location = new Point(EX1 += 10, EY1 += 0); 
```

# backbone.js - 如果用户登录，如何在 MarionetteJS ItemView 中显示附加信息？

> ID：16136296
> 
> 赞同：0
> 
> 时间：2013-04-21T21:14:49.770
> 
> 标签：backbone.js, marionette

我有一个带有 ItemView 列表的 CompositeView。当用户登录和用户注销时，会为两种状态呈现相同的集合。

ItemView 大致如下：

```
<div class="title">  
  {{ title }} 
</div>
{{#if MA.currentUser }}
  Add Review
{{/if}} 
```

使用 JavaScript：

```
MA.Views.Items.Movie = Backbone.Marionette.ItemView.extend({
  模板：'项目/电影'，
  类名：'电影'
});

```

但是，这似乎没有显示预期的“添加评论”。

有什么建议可以在这种情况下做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:52:49.787

我的理解是模板只能访问传递给它的数据。默认情况下，这是在`serializeData`ItemView 继承的 View Class 中序列化的模型。您可以通过使用 templateHelpers 或编写自定义 serializeData（也可能是其他方式）来添加其他数据。

## 模板助手

a 中的模板助手`ItemView`可能像：

```
templateHelpers: {
  MA: function(){
    return MA; //Unknown if having the same function name as the global will effect it
  }
} 
```

在您的项目视图中。查看[marionette docs 模板助手](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#accessing-data-within-the-helpers)

模板助手可以是函数、对象字面量或对象。

## 序列化数据

对于 serializeData，您只需覆盖`serializeData`ItemView 类中的方法。

```
serializeData: function(){
return {
  "some attribute": "some value"
} 
```

值得注意的是，这也需要您对模型进行序列化。[木偶文档 serializeData](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md#itemview-serializedata)

## 结论

`templateHelpers`结果可能是最简单的答案，并且可能是它们的目的。

# c++ - 析构函数如何删除嵌套的堆栈类型？

> ID：16136300
> 
> 赞同：0
> 
> 时间：2013-04-21T21:15:24.427
> 
> 标签：c++

例子：

```
class A
{
   char * data;
   ...
   A(){data = new char[50];}
   ~A(){delete [] data;}
};

class B
{
   A a;

   B();
   // default destructor
}

void foo()
{
   B b;
}

int main()
{
   foo();

   // "A.data" still in the heap or no?
} 
```

这个程序是正确的，并且“A.data”将在 main 中的 foo() 之后被删除，或者仍然存在于堆中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:17:46.347

是的，它将被删除，因为您需要`delete[]`用于数组。你也应该记住[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T21:18:06.893

```
~A(){delete data;} 
```

应该

```
~A()
{
    delete[] data;
 }
 //remove the dynamic array 
```

在您当前的代码中，当 main 退出时，它将调用析构函数来释放内存，并且不会存在于堆中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T21:25:29.093

当一个对象被破坏时，编译器会自动破坏该类的所有非指针数据成员。因此，当您的`B b`变量超出范围时，编译器会自动破坏它，进而破坏`A a`数据成员，因为它不是指针，它调用`~A()`释放数组。

# python - pygame位掩码冲突不起作用

> ID：16136304
> 
> 赞同：2
> 
> 时间：2013-04-21T21:15:45.870
> 
> 标签：python, pygame, sprite, collision

虽然当我使用`pygame.sprite.collide_rect`or时检测到碰撞`pygame.sprite.collide_circle`，但当我尝试为精灵分配位掩码并运行它时，没有检测到碰撞。（这`wall.collision_action()`使得第一个圆圈以与另一个圆圈相同的速度和方向移动）虽然这现在不是问题，
因为我正在使用圆圈的图像，这使得 pygame.sprite.collide_circle 工作正常，将来当我将使用更详细和非圆形的精灵。

代码：

```
import pygame, sys, math
from pygame.locals import *
pygame.init()

class ball_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        self.surface = surface
        self.x = 250
        self.y = 250
        self.vy = 0
        self.vx = 0
        self.sprite = pygame.sprite.Sprite()
        self.sprite.image = pygame.image.load("ball.png").convert()
        self.sprite.rect = self.sprite.image.get_rect(center = (self.x, self.y))
        self.sprite.rect.topleft = [int(self.x), int(self.y)]
        self.sprite.mask = pygame.mask.from_surface(self.sprite.image)

    def event(self, event):
        if event.key == K_UP:
            self.vy = -1
            self.vx = 0
        elif event.key == K_DOWN:
            self.vy = 1
            self.vx = 0
        elif event.key == K_LEFT:
            self.vx = -1
            self.vy = 0
        elif event.key == K_RIGHT:
            self.vx = 1
            self.vy = 0

    def move(self):
        self.y += self.vy
        self.x += self.vx
        self.sprite.rect.topleft = [int(self.x), int(self.y)]
        self.sprite.mask = pygame.mask.from_surface(self.sprite.image)

    def draw(self, surface):
        surface.blit(self.sprite.image, self.sprite.rect)

    def position(self):
        return self.sprite.rect()

class wall_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        self.surface = surface
        self.x = 250
        self.y = 100
        self.vy = 0
        self.sprite = pygame.sprite.Sprite()
        self.sprite.image = pygame.image.load("ball.png").convert()
        self.sprite.rect = self.sprite.image.get_rect(center = (self.x, self.y))
        self.sprite.rect.topleft = [int(self.x), int(self.y)]
        self.sprite.mask = pygame.mask.from_surface(self.sprite.image)

    def draw(self, surface):
        surface.blit(self.sprite.image, self.sprite.rect)

    def collision_action(self):
        self.vy = ball.vy
        self.vx = ball.vx
        self.x += self.vx
        self.y += self.vy
        self.sprite.rect.topleft = [int(self.x), int(self.y)]

def gameQuit():
    pygame.quit()
    sys.exit()

screen = pygame.display.set_mode((500, 500), 0, 32)
ball = ball_class(screen)
wall = wall_class(screen)
clock = pygame.time.Clock()
while True:
    screen.fill((0, 0, 0))
    ball.move()
    ball.draw(screen)
    wall.draw(screen)
    is_a_collision = pygame.sprite.collide_mask(wall.sprite, ball.sprite)
    if is_a_collision:

        wall.collision_action()

    for event in pygame.event.get():
        if event.type == QUIT:
            gameQuit()
        elif event.type == KEYDOWN:
            ball.event(event)
    clock.tick(100)
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-27T22:06:31.883

位掩码冲突在您的代码*中*起作用，但我认为代码使其变得更加困难，因为精灵对象`ball_class`和`wall_class`中定义了单独的子精灵对象。

```
class ball_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        self.surface = surface
        self.x = 250
        self.y = 250
        self.vy = 0
        self.vx = 0
        self.sprite = pygame.sprite.Sprite()    # <-- HERE
        ... 
```

通常，当代码“子类化”现有的类/对象时，它*会变成*相同的类/对象之一。所以没有必要在类中包含次要精灵。这也使得代码和逻辑更加复杂、棘手和混乱。

请考虑重新加工您的`ball_class`：

```
class ball_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        pygame.sprite.Sprite.__init__(self)    # <-- HERE Must initialise sprites
        self.x     = 250
        self.y     = 250
        self.vy    = 0
        self.vx    = 0
        self.image = pygame.image.load("ball_64.png").convert_alpha()
        self.rect  = self.image.get_rect(center = (self.x, self.y))
        self.mask  = pygame.mask.from_surface(self.image) 
```

注意`image`,`rect`和`mask`成员变量。以前，代码是在包含的精灵中使用这些。但是 PyGame 库被编写为期望这些作为类的成员，如果没有定义它们就不能正常工作。您的两个精灵类也没有调用基本精灵初始化函数。

这是您的代码的重新工作，它 - 当球撞到墙角时，会正确碰撞（使用位掩码）。

[![ball_64.png](https://i.stack.imgur.com/pEmRO.png)](https://i.stack.imgur.com/pEmRO.png) `ball_64.png`

[![墙.png](https://i.stack.imgur.com/kmgiO.png)](https://i.stack.imgur.com/kmgiO.png) `wall.png`

```
import pygame, sys, math
from pygame.locals import *
pygame.init()

class ball_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        pygame.sprite.Sprite.__init__(self)
        self.surface = surface
        self.x = 250
        self.y = 250
        self.vy = 0
        self.vx = 0
        self.image = pygame.image.load("ball_64.png").convert_alpha()
        self.rect  = self.image.get_rect(center = (self.x, self.y))
#        self.sprite.rect.topleft = [int(self.x), int(self.y)]
        self.mask = pygame.mask.from_surface(self.image)

    def event(self, event):
        if event.key == K_UP:
            self.vy = -1
            self.vx = 0
        elif event.key == K_DOWN:
            self.vy = 1
            self.vx = 0
        elif event.key == K_LEFT:
            self.vx = -1
            self.vy = 0
        elif event.key == K_RIGHT:
            self.vx = 1
            self.vy = 0

    def move(self):
        self.y += self.vy
        self.x += self.vx
        self.rect.topleft = [int(self.x), int(self.y)]
        #self.mask = pygame.mask.from_surface(self.sprite.image)

    def draw(self, surface):
        surface.blit(self.image, self.rect)

    def position(self):
        return self.rect()

class wall_class(pygame.sprite.Sprite):
    def __init__(self, surface):
        pygame.sprite.Sprite.__init__(self)
        self.x = 250
        self.y = 100
        self.vy = 0
        self.image = pygame.image.load("wall.png").convert_alpha()
        self.rect  = self.image.get_rect(center = (self.x, self.y))
#        self.sprite.rect.topleft = [int(self.x), int(self.y)]
        self.mask = pygame.mask.from_surface( self.image )

    def draw(self, surface):
        surface.blit(self.image, self.rect)

    def collision_action(self, by_sprite_at ):
        print("wall_class.collision_action( by_sprite_at=%s )" % ( str( by_sprite_at ) ) )
#        self.vy = ball.vy
#        self.vx = ball.vx
#        self.x += self.vx
#        self.y += self.vy
#        self.sprite.rect.topleft = [int(self.x), int(self.y)]

def gameQuit():
    pygame.quit()
    sys.exit()

screen = pygame.display.set_mode((500, 500), 0, 32)
ball = ball_class(screen)
wall = wall_class(screen)
clock = pygame.time.Clock()
while True:
    screen.fill((128,128,128))
    ball.move()
    ball.draw(screen)
    wall.draw(screen)
    is_a_collision = pygame.sprite.collide_mask(wall, ball)
    if is_a_collision:
        wall.collision_action( ball.rect.center )

    for event in pygame.event.get():
        if event.type == QUIT:
            gameQuit()
        elif event.type == KEYDOWN:
            ball.event(event)
    clock.tick(100)
    pygame.display.update() 
```

# javascript - Autosum 与生成的字段 JS

> ID：16136305
> 
> 赞同：0
> 
> 时间：2013-04-21T21:16:01.017
> 
> 标签：javascript, html

我又被javascript困住了。基本上，当您单击一个按钮时，会出现新的一行字段，给它们一个新名称，只是一个不同的数字。

我现在需要这些字段能够自己自动求和，我可以用第一行来做到这一点，我只是不知道如何用新生成的来做。

Javascript代码：

```
 <script language="javascript" type="text/javascript">
      var i=2;
      function addRow()
{
      var tbl = document.getElementById('customersAdd');
      var lastRow = tbl.rows.length;
      var iteration = lastRow - 1;
      var row = tbl.insertRow(lastRow);

      var firstCell = row.insertCell(0);
      var el = document.createElement('input');
      el.placeholder = 'Quantity';
      el.type = 'text';
      el.name = 'quantity' + i;
      el.id = 'quantity' + i;
      firstCell.appendChild(el);

      var secondCell = row.insertCell(1);
      var el2 = document.createElement('input');
      el2.placeholder = 'Description';
      el2.type = 'text';
      el2.name = 'description' + i;
      el2.id = 'description' + i;
      secondCell.appendChild(el2);

      var thirdCell = row.insertCell(2);
      var el3 = document.createElement('input');
      el3.placeholder = 'Rate';
      el3.type = 'text';
      el3.name = 'rate' + i;
      el3.id = 'rate' + i;
      thirdCell.appendChild(el3);

      var forthCell = row.insertCell(3);
      var el4 = document.createElement('input');
      el4.placeholder = 'Amount';
      el4.type = 'text';
      el4.name = 'amount' + i;
      el4.id = 'amount' + i;
            forthCell.appendChild(el4);
     // alert(i);
      i++;

    //  alert(i);
}
function startCalc(){
  interval = setInterval("calc()",1);
}
function calc(){
    one = document.main.quantity1.value;
  two = document.main.rate1.value; 
  document.main.amount1.value = (one * 1) * (two * 1);

}
function stopCalc(){
  clearInterval(interval);
}
</script> 
```

HTML 代码：

```
<form action="submit.php" name="main" method="post">
<table style="border-collapse: collapse;" border="0" align="center" width="50%" class="horiz" id="customersAdd">
   <tr>

     <td align="center"><br/>
     <input class="text" style="width:100%" type="button" align="middle"value="Add Aditional Row" onClick="addRow()" /></td>
   </tr>
    <tr align="center">

     <td>
       <br />
       <input placeholder="Quantity" type="text" name="quantity1" id="quantity1" onFocus="startCalc();" onBlur="stopCalc();" />
       <br /></td>
     <td>
       <br />
       <input placeholder="Description" type="text" name="description1" id="description1"/>
       <br /></td>
     <td>
       <br />
       <input placeholder="Rate" type="text" name="rate1" id="rate1" onFocus="startCalc();" onBlur="stopCalc();"/>
       <br /></td>
     <td>
       <br />
       <input placeholder="Amount" type="text" name="amount1" id="amount1" onBlur="stopCalc();" onFocus="startCalc();" readonly="true" />
       <br /></td>
</tr>

 </table></form> 
```

为了让任何可以帮助我的人更容易，我在 JSBin 中做了这个，以便更容易地看到我想做的事情。任何建议表示赞赏。

[http://jsbin.com/atabaz/1/edit](http://jsbin.com/atabaz/1/edit)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:02:54.073

最后我设法自己找到了一种方法，如果有人有兴趣看看这个：

[http://jsfiddle.net/2sYgE/](http://jsfiddle.net/2sYgE/)

```
 var currentItem = 1;

$('#customersAdd').on('keyup', '.quantity, .rate, .amount', calculateRow);

$('#addnew').click(function() {
    currentItem++;

    $('#customersAdd').append('<tr><td><input placeholder="Quantity" type="text" name="quantity' + currentItem +'" id="quantity' + currentItem +'" class="qty form-input-rate" /></td><td><input placeholder="Description" type="text" name="description' + currentItem +'" id="description' + currentItem +'" class="form-input-rate"/></td><td><input placeholder="Rate" type="text" name="rate' + currentItem +'" id="rate' + currentItem +'" class="rate form-input-rate"/></td><td><input placeholder="Amount" type="text" name="amount' + currentItem +'" id="amount' + currentItem +'" class="cal form-input-rate"/></td></tr>'
    );
});

function calculateSum() {
    var sum = 0;
    $(".cal").each(function () {
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });

}

function calculateRow() {
    var cost = 0;
    var $row = $(this).closest("tr");
    var qty = parseFloat($row.find('.qty').val());

    // changed the following line to only look within the current row
    var rate = parseFloat($row.find('.rate').val());

    cost = qty * rate;

    if (isNaN(cost)) {
        $row.find('.cal').val("0");
    } else {
        $row.find('.cal').val(cost);
    }
    calculateSum();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:37:35.997

轮询更改是一种非常低效且容易出错的表单更新方式。侦听更改事件是一种更好的方法，因为它使用较少的资源并等到用户完成更新控件后再执行任何操作。还有一个可以使用的输入事件，但这里不适合，因为它会在用户输入值时更新表单。最好等待用户完成输入值，然后进行更新。

我在下面重新分解了您的代码，它还没有准备好投入生产，但它应该让您对如何进行操作有所了解。表行被克隆，因为它比从头开始创建所有元素要快得多。然后修改名称，尽管这不是必需的。不需要 ID 属性。

只有在表单控件上使用内联侦听器时，克隆才可靠地工作。如果初始侦听器是动态附加的，则每次添加一行时都必须添加它们，因为使用*addEventListener*添加的侦听器不会被克隆。

我没有包括任何输入验证，如果用户输入垃圾，他们就会得到垃圾。您应该验证输入以检查是否输入了适当的值，并格式化显示的值以进行演示。

```
<script type="text/javascript">
  function addRow(element) {
      var form = element.form;
      var table = form.getElementsByTagName('table')[0];
      var tbody = table.tBodies[0];
      var num = tbody.rows.length - 1;
      var row = table.rows[1].cloneNode(true);
      var input, inputs = row.getElementsByTagName('input')

      // Update input names
      for (var i=0, iLen=inputs.length; i<iLen; i++) {
        input = inputs[i];
        input.name = input.name.replace(/\d+$/,num);
        input.value = '';
      }
      tbody.insertBefore(row, tbody.rows[tbody.rows.length - 1]);
  }

  function updateRow(element) {
    var form = element.form;
    var num = element.name.replace(/^\D+/,'');
    var value = form['quantity' + num].value * form['rate' + num].value;
    form['amount' + num].value =  (value == 0)? '' : value;
    updateTotal(form);
  }

  function updateTotal(form) {
    var elements = form.elements;
    var name = /^amount/;
    var total = 0;
    var value;

    for (var i=0, iLen=elements.length; i<iLen; i++) {
      if (name.test(elements[i].name)) {
        total += parseFloat(elements[i].value);
      }
    }
    form.total.value = total;
  }
</script>

<form action="submit.php" name="main" method="post">
  <table style="border-collapse: collapse;" border="0" align="center"
   width="50%" class="horiz" id="customersAdd">
    <tr>
      <td><br>
        <input class="text" style="width:100%" type="button" 
         align="middle"value="Add Aditional Row" onclick="addRow(this)">
      </td>
    </tr>
    <tr>
      <td>
        <input placeholder="Quantity" name="quantity1" onblur="updateRow(this);">
      </td>
      <td>
        <input placeholder="Description" type="text" name="description1">
      </td>
      <td>
        <input placeholder="Rate" name="rate1" onchange="updateRow(this);">
      </td>
      <td>
        <input placeholder="Amount" name="amount1" readonly>
      </td>
    </tr>
    <tr>
      <td colspan="3" style="text-align: right">Total&nbsp;
      <td><input name="total" readonly>
    </tr>
  </table>
    <input type="reset">
</form> 
```

# mysql - Mysql 错误：子查询返回超过 1 行（但我想要它 - 我想在每一行上选择一个向量）

> ID：16136307
> 
> 赞同：1
> 
> 时间：2013-04-21T21:16:13.743
> 
> 标签：mysql, sql

为了简单起见，假设我有桌子`users`和`interests`

## 用户

```
id | name
---------
1  | amy
2  | brian
3  | carole 
```

## 兴趣

```
uid | interest
--------------
1   | apples
3   | catfish
3   | cobwebs
3   | cryogenics 
```

我想要得到的是看起来像的输出

```
name  | interests
----------------
amy   | apples
brian | 
carole| catfish, cobwebs, cryogenics 
```

兴趣可以是由所有相关值与某个分隔符的串联组成的字符串，或者是离散值的向量。我有兴趣将其转储到文件中，而不是将其放入表中或对其进行任何进一步的 SQL 操作。正在做

```
SELECT name, (SELECT interest from interests where uid=id) as interests from users; 
```

给了我标题中提到的错误。这在 SQL 范式中是不可能的吗？我知道我可以将这些表的连接转储到文件中，然后使用 python 脚本或其他东西聚合我需要的值，但这感觉不优雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:22:22.210

尝试这个

```
 SELECT name , group_concat(interest) as interests from interests 
 LEFT JOIN users on users.id = interests.uid 
 GROUP BY name 
```

[**在这里演示**](http://sqlfiddle.com/#!2/39332/3)

更新：

如果您想要空格，请执行此操作`group_concat(interest SEPARATOR ', ')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:25:02.437

```
SELECT u.name, i.interest
FROM users AS u, interests AS i
WHERE u.uid = i.id 
```

尝试加入，这可能会奏效。

由于 select 和 from 语句的顺序，您可能会遇到错误，或者您是否需要在名称后加逗号。喜欢：

```
SELECT name, ( *then your select statement here ...* ) 
```

# android - Android：跨菜单切换活动

> ID：16136311
> 
> 赞同：0
> 
> 时间：2013-04-21T21:16:35.717
> 
> 标签：android

我有三个带有菜单的活动。跨菜单可以切换活动。我将 'android:launchMode="singleInstance' 带到了 AndroidManifest，因为我保留了对每个 Activity 的修改。

```
 ------------------
|                  |
|                  |
|                  |
|        A         |
|                  |
|                  |
|                  |
|                  |
|------------------|
|##A##|  B  |  C   |
 ------------------
      A Activity

 ------------------
|                  |
|                  |
|                  |
|        B         |
|                  |
|                  |
|                  |
|                  |
|------------------|
|  A  |##B##|  C   |
 ------------------
      B Activity

 ------------------
|                  |
|                  |
|                  |
|        C         |
|                  |
|                  |
|                  |
|                  |
|------------------|
|  A  |  B  |##C## |
 ------------------
      C Activity 
```

这是正常工作。我的问题是，当我因为要退出而按返回键时，我必须按三下才能关闭应用程序。

我想消除这个程序。因此，当我在 A、B 或 C 活动中，并且我推回键时，将它们全部关闭。不知何故，我想跳回堆栈。

我尝试使用活动标志。例如像这样：

```
 Intent intent=new Intent(this, B.class);
    intent.setFlag(Intent.FLAG_ACTIVITY_TASK_ON_HOME);
    startActivity(intent); 
```

有了这个，我有两个问题。它只支持 API 11 或更高版本，这不会关闭其他 Activity。（当我再次启动时，我看到其他活动修改仍然存在）
我知道 * *Fragment* *s，使用这些会容易得多，但我必须在没有 * *Fragment* *s 的情况下解决。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:21:44.440

您已经知道使用 Fragments 会容易得多，建议使用 Fragments 但是如果您想这样做......在每个新活动开始之前，您都需要调用 finish();

喜欢

```
Intent intent=new Intent(this, B.class);
startActivity(intent);
finish(); 
```

它将完成活动 A 并启动活动 B。这样，如果您在活动 B 中按回，您的应用程序将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:46:20.480

您想要的是自定义`Back`活动堆栈：

```
// Creates an explicit intent for the top activity that will be opened (the map)
Intent resultIntent = new Intent(context, <your_activity>.class);
resultIntent.putExtras(extras);

// The stack builder object will contain an artificial back stack for the
// started Activity. This ensures that navigating backward from the 
// Activity leads out of your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);

// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(<your_activity>.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
stackBuilder.startActivities(); 
```

该代码本质上是在做的是，按下回和下一个活动的活动是相同的。这样，当按下返回时，您将存在于主屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:28:33.507

我想到的唯一一件事是带有标签保存活动的旧式编程。

这里有一个例子[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

如果您不希望标签可见，则可以轻松将它们完全隐藏。

但我个人建议使用片段。

# jquery - 在运行新功能之前，如何确保所有 AJAX 请求都已完成？

> ID：16136312
> 
> 赞同：1
> 
> 时间：2013-04-21T21:16:41.307
> 
> 标签：jquery, ajax, json, twitter, jsonp

我正在创建一个应用程序，该应用程序根据用户从表单中选择的名称显示推文。选择被传递给“getTweets”函数，如下所示：

```
function getTweets(selections) {

    var holdTweets = [];

    $.each( selections, function(){

        $.ajax({
            url: 'http://api.twitter.com/1/statuses/user_timeline/'+this.id+'.json?callback=?',
            dataType: 'jsonp',
            success: function(data) { holdTweets.push(this); },
            error: function() { console.log('something went wrong'); }
        });

    });
} 
```

在所有 AJAX 请求完成后，我想在解析 JSON 之前对 holdTweets 数组进行排序。

一开始一切正常：AJAX 请求正在返回 JSON，并且正在填充 holdTweets 数组。是否可以在进行排序之前检查所有 AJAX 请求是否已完成？如果是这样，怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:26:49.657

多谢你们。我已经这样做了，它工作正常。

```
function getTweets(selections) {

    var holdTweets = [];

    $.each( selections, function(){

        $.ajax({
            url: 'http://api.twitter.com/1/statuses/user_timeline/'+this.id+'.json?callback=?',
            dataType: 'jsonp',
            success: function(data) { 
                holdTweets.push(this);
                if(holdTweets.length === selections.length) { 
                    sortFunction(holdTweets); 
                }
            },
            error: function() { console.log('something went wrong'); }
        });

    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T21:18:03.387

当您使用 jQuery 时，[ajaxStop](https://api.jquery.com/ajaxStop/)方法允许您注册一个处理程序，以便在所有 Ajax 请求完成时调用。

# java - 无法通过 JSP 生成根证书

> ID：16136313
> 
> 赞同：0
> 
> 时间：2013-04-21T21:16:42.340
> 
> 标签：java, security, jsp, certificate

我现在正在使用 bouncy castle 库创建 PKCS10 根证书。

因此，我使用 (RootCertGenerator.java) 导入充气城堡库，该库在纯 java 环境中正确工作（我对 RootCertGenerator.java 所做的所有工作都是修改 main() 方法以执行（），重命名该方法）

但是，在执行 generateRooteCert.jsp 后，它会显示 Tomcat 错误，如页面底部所示。有人说它可以通过在构建路径上包含 mail.jar 来解决，但它不起作用。

---生成RooteCert.jsp

```
<%@ page language="java" contentType="text/html; charset=EUC-KR"%>
<%@ page import="java.sql.DriverManager" %>
<%@ page import="java.sql.Connection" %>
<%@ page import="java.sql.PreparedStatement" %>
<%@ page import="java.sql.Statement" %>
<%@ page import="java.sql.SQLException" %>
<%@ page import="java.sql.ResultSet" %>
<%@ page import="myPackage.Utils" %>
<%@ page import="myPackage.RootCertGenerator" %>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title>Make root Certificate</title>
</head>
<% 
RootCertGenerator.execute();
%>
<body>

</body>
</html> 
```

---RootCertGenerator.java 包 myPackage;

```
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.OutputStreamWriter;
import java.math.BigInteger;
import java.security.*;
import java.security.cert.X509Certificate;
import java.util.Date;
import javax.security.auth.x500.X500Principal;
import org.bouncycastle.openssl.PEMWriter;
import org.bouncycastle.x509.X509V1CertificateGenerator;

public class RootCertGenerator
{
public static X509Certificate generateV1Certificate(KeyPair pair)
throws InvalidKeyException, NoSuchProviderException, SignatureException
{
 // generate the certificate
X509V1CertificateGenerator  certGen = new X509V1CertificateGenerator();
certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
certGen.setIssuerDN(new X500Principal("CN=Test Certificate"));
certGen.setNotBefore(new Date(System.currentTimeMillis() - (7 * 24 * 60 * 60 * 1000))); 
certGen.setNotAfter(new Date(System.currentTimeMillis() + (7 * 24 * 60 * 60 * 1000)));
certGen.setSubjectDN(new X500Principal("CN=Test Certificate"));
certGen.setPublicKey(pair.getPublic());
certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");
return certGen.generateX509Certificate(pair.getPrivate(), "BC");
}

//////////added by jeon
public static void pemEncodeToFile(String filename, Object obj, char[] password) throws
Exception{
PEMWriter pw = new PEMWriter(new FileWriter(filename));
if (password != null && password.length > 0) {
pw.writeObject(obj, "DESEDE", password, new SecureRandom());
} else {
pw.writeObject(obj);
}
pw.flush();
pw.close();
}
//////////added by jeon

public static void execute() throws Exception
{
// create the keys
KeyPair          pair = Utils.generateRSAKeyPair();

////////////////////writing root certificate
PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
pemWrt.writeObject(cert);
pemEncodeToFile("rootCertificate.cer", cert, null);
pemWrt.flush();
pemWrt.close();
/////////////////writing private key
PEMWriter pemWrt1 = new PEMWriter(new OutputStreamWriter(System.out));
pemWrt1.writeObject(pair.getPrivate());
pemEncodeToFile("rootPrivate.key", pair.getPrivate(), null);
pemWrt1.flush();
pemWrt1.close();

/////////////////writing public key
PEMWriter pemWrt2 = new PEMWriter(new OutputStreamWriter(System.out));
pemWrt2.writeObject(pair.getPublic());
pemEncodeToFile("rootPublic.key", pair.getPublic(), null);
pemWrt2.flush();
pemWrt2.close();
// show some basic validation
cert.checkValidity(new Date());
cert.verify(cert.getPublicKey());        
System.out.println("valid certificate generated");
}
} 
```

错误信息是

```
org.apache.jasper.JasperException:
javax.servlet.ServletException:
java.security.NoSuchProviderException: no such provider: BC 
```

我觉得 TOMCAT 未能加载 bouncycastle 提供程序，即使我的系统

/jre/lib/security/java.security 包含 bouncycaslte 信息。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:58:03.577

看看网页

[http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation)

它指示如何将其添加到

$JAVA_HOME/jre/lib/security/java.security

当然要确保这是tomcat使用的JRE。

同样根据个人经验，将 jar 放入 tomcat 的 lib 可以避免它被多次加载。

# java - Java：表达式的非法开始

> ID：16136315
> 
> 赞同：0
> 
> 时间：2013-04-21T21:16:45.540
> 
> 标签：java, path, compiler-errors

我刚刚学习 Java 并希望使用 Path 对象：

```
Path file = ...; 
```

它给了我：“非法的表达开始”

我有以下进口：

```
import java.nio.file.*;
import java.nio.file.attribute.*; 
```

我正在根据 NetBeans 运行 JDK 1.7 平台（JDK 7）。谷歌搜索到地球的尽头，找不到这个错误的蹲下。

我假设*路径文件 = ...;* 是我当前的 JDK 无法识别的一些新语法或功能吗？？？

编辑 |

```
import javax.swing.*;

import java.nio.file.*;
import java.nio.file.attribute.*;

public class MainWindow extends JFrame {

  public MainWindow() 
  {
    initComponents();
  }

  private void cboModelFocusGained(java.awt.event.FocusEvent evt) 
  {
    Path file = ...;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:23:33.213

```
Path file = ...; 
```

在任何 Java 版本中都不是有效的语句。我的猜测是你从某个网站复制并粘贴了这个，但是这三个点只是一个省略号，意思是“初始化代码必须放在这里”。

你觉得这三个点是什么意思？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:37:10.270

是占位符，这些`...`应替换为计算机上文件的实际路径。例如，如果文件存在于 中`C:\Directory\file.txt`，则代码应为：

```
Path file = "C:\\Directory\\file.txt"; 
```

# c# - 如何为我的项目添加数字签名

> ID：16136321
> 
> 赞同：1
> 
> 时间：2013-04-21T21:17:43.233
> 
> 标签：c#, .net, vb.net, certificate

当我尝试运行 mi 编译的应用程序时，Windows 会宣传该 APP 没有任何签名并询问我是否真的要运行我的应用程序。

我不知道导致这种情况的原因，但我认为为了避免这种情况我需要一个数字签名，所以我从网上按照以下步骤操作：

我已经使用 Windows SDK 中的 makecert 工具创建了自己的证书，下面的代码示例如下：

```
makecert -r -pe -a sha1 -n "CN=name, E=name@Hotmail.com, C=US" -b 01/01/2013 -e 01/01/2050 -ss My 
```

然后我可以在“个人”文件夹中看到自己的证书：

![在此处输入图像描述](https://i.stack.imgur.com/MG118.jpg)

现在我用这个命令导出了证书：

```
certutil -exportPFX -p "Password" my 586a7358ebdce8854def26875f0f38ab "C:\Test.pfx" 
```

但是当我在项目设置中打开签名选项卡并选择“从文件中选择...”时，VS 会这样说：

```
The selected certificate is not valid for code-signing. Choose another certificate file. 
```

![在此处输入图像描述](https://i.stack.imgur.com/iM6ZI.jpg)

我做了坏事？我不知道如何正确地对我的项目进行代码签名，也许我需要“.cer”证书而不是“.pfx”证书？那么如何生成有效的 CER 证书？

# python - Python/Regex 来解析代码

> ID：16136328
> 
> 赞同：2
> 
> 时间：2013-04-21T21:18:42.470
> 
> 标签：python, regex, parsing

所以我在 FORTRAN 中有一些看起来像这样的行。

```
call const (hsno, npoi*nsnolay, 0.0) 
```

我一直在使用正则表达式和 python 字符串函数来解析这段代码并编辑一些变量。然而，像上面这样的行给了我一个问题，因为字符串不会在括号上分裂。

我希望它是：

```
[(,hsno, npoit, * nsnolay, 0.0, )]. 
```

然而它的作用是

```
[(hsno,...] 
```

如果后面跟着一个单词和一个逗号，我希望它在括号上分开

有没有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:21:35.780

匹配的括号不是常规语言。这意味着它们不能被数学意义上的正则表达式识别。大多数编程语言都添加了额外的特性来使正则表达式更强大，但是做这样的事情仍然很痛苦。

我建议您使用适当的解析器。我喜欢 Python 的一个叫 Ply。

# ms-access - 运行总和并仅将值添加到第一行

> ID：16136335
> 
> 赞同：0
> 
> 时间：2013-04-21T21:19:19.007
> 
> 标签：ms-access, ms-access-2010

我正在使用 MS Access 2010 创建一个分类帐

我有带有未绑定文本框的分类帐报告来计算每条记录的余额，包括计算以下 2 个字段的运行总和：

> [借记卡信用卡]

它工作得很好，我想做的只是将开户值添加到第一行，所以第一行的计算应该是这样的

> [借方] - [贷方] + OpenBalance

然后对其他行使用第一个计算

但我没有做到这一点，知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:17:24.220

我为未结余额的运行余额找到了一个很好的解决方案，如下所示：

1- 是在报告内的文本框中有未结余额。2-有一个隐藏的文本框作为总和，有[借方] - [贷方]总和。3- 添加另一个文本框以获得 [借方] - [贷方] 的结果，然后将余额值添加到其中。

# c# - 如何构造指定精度和小数位数的 SqlDecimal 数据类型的实例

> ID：16136336
> 
> 赞同：3
> 
> 时间：2013-04-21T21:19:38.900
> 
> 标签：c#, .net, sql-server

[MSDN](http://msdn.microsoft.com/en-us/library/46taf6xh.aspx)有关于如何构造 SqlDecimal 数据类型的新实例的文档，其中包括指定精度和小数位数，只能在构造时设置。

这是一个有效的示例，但我不明白如何设置 value 属性：

```
SqlDecimal Test2 = new SqlDecimal(10, 3, false, new int[4] { 2, 1, 0, 0 }); 
```

当我打印以下调试语句时，我看到 Precision 和 Scale 参数是直截了当的，但我不明白该值是如何从长度为 4 的整数数组中确定的。

```
? Test.Precision
10
? Test.Scale
3
? Test2.Value
-4294967.298 
```

4 个整数如何“组合”来指定值？没有例子，也没有解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:36:56.310

```
int[4] { 2, 1, 0, 0 }
=
96-127: 0000 0000 0000 0000 0000 0000 0000 0000   -- 0
64- 95: 0000 0000 0000 0000 0000 0000 0000 0000   -- 0
32- 63: 0000 0000 0000 0000 0000 0000 0000 0001   -- 1
00- 31: 0000 0000 0000 0000 0000 0000 0000 0010   -- 2 
```

这个 128 位二进制的值是

```
2 ^ 32 + 2 ^ 1 = 4294967298 
```

因为小数位是 3，所以小数点左移 3，变成 4294967.298
并且 SqlDecimal 结构的第三个参数`false`是负值。

# sorting - 按特定列排序

> ID：16136337
> 
> 赞同：2
> 
> 时间：2013-04-21T21:19:59.853
> 
> 标签：sorting, vim

如果我有一个包含多个制表符分隔列的文本文件，如下所示：

```
1  foo  bar
3  bar  foo 
```

我将如何根据第二列或第三列进行排序？

我读到了类似 using `:'<,'>!sort -n -k 2`in visual mode or`:sort /.*\%2v/`的内容，但这些命令似乎都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:07:10.140

您可以使用内置[`sort`](http://vimdoc.sourceforge.net/htmldoc/change.html#%3asort)命令。

要按第二个制表符分隔的列排序，您可以使用`:sort /[^\t]*\t/`对第二列进行排序。要对第三列进行排序，您可以使用`:sort /[^\t]*\t\{2}/`

通常只需将数字替换为列号减 1。（即第一列为索引 0 的索引列）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:11:48.183

外部`sort`调用 via`:'<,'>!sort -k 2`确实有效。仅当`-n`给出了标志（用于数字排序）但您要使用的列是非数字时，结果不符合预期。因此，要使用 external `sort`，只需`-n`放入您的示例即可。

*备注：*也`:'<,'>sort /.*\%2v/`对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:31:08.667

可悲的是，似乎不可能在同一文件中使用可视块和/或使用一个命令，因为它`:ex`是逐行的，即`Ctrl-v`++会以任何一种方式对整行进行排序。`selection``:'<,'>sort`

一个有点老套的“解决方案”是选择你想用视觉块排序的任何内容，在另一个窗口中对其进行排序并将更改应用于原始文件。像这样的东西：

`Ctrl-v`+ `selection`+ `x`+ `:tabnew`+ `p`+ `:sort`+ `Ctrl-v``G``$``x`+ `:q`+ ``[P`（对齐粘贴）

**来源**：[Barry Arthur - Sort Me A Column](http://of-vim-and-vigor.blogspot.no/2013/04/sort-me-column.html)（来自#vim@freenode 的bairui）。

# android-sqlite - SimpleCursorAdapter() 已弃用，我该如何替换它？

> ID：16136339
> 
> 赞同：0
> 
> 时间：2013-04-21T21:20:07.477
> 
> 标签：android-sqlite, simplecursoradapter

我正在尝试将数据从 SQLite 显示到列表视图。我尝试使用构造函数 SimpCursorAdapter() 但它说它已被弃用并且我不能使用它。任何人都知道如何在没有任何其他方式的情况下做到这一点？？？下面是我的代码：

```
public class JournalsTab extends Fragment {
 private SimpleCursorAdapter dataAdapter;
     @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
              Bundle savedInstanceState) {
         LinearLayout l2 = (LinearLayout) inflater.inflate(R.layout.journal, container, false);

         BalanceApp myapp= (BalanceApp) getActivity().getApplicationContext();
            DataSource datasource = myapp.datasource;
            datasource.open();

            Cursor cursor = datasource.fetchAllEntries();
            int[] to = {R.id.textView1, R.id.textView2, R.id.textView3, R.id.text4};

            dataAdapter = new SimpleCursorAdapter(this, R.layout.journal,cursor, datasource.columns, to);   //this gives error

            ListView listView = (ListView)l2.findViewById(R.id.listView1);
                listView.setAdapter(dataAdapter);

            return l2;   

     }

} 
```

# java - 无法启动 Java 类

> ID：16136340
> 
> 赞同：1
> 
> 时间：2013-04-21T21:20:13.790
> 
> 标签：java, classloader, command-prompt, .class-file

我似乎在遵循[我正在使用的书中](http://www.wrox.com/WileyCDA/WroxTitle/Java-Programming-24-Hour-Trainer.productCd-0470889640.html)以及[Oracle 的 Java SE 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/hello/hello-world.html#start)中的说明，但无法克服以下错误：

```
Error: Could not find or load main class com.practicalJava.lesson25.StartServer 
```

我在我的 Windows 7 机器上使用以下命令行：

```
[C:\>]java -classpath /Practical_Java/Lesson25/bin -Djava.rmi.server.codebase=file:/Practical_Java/Lesson25/bin/ com.practicalJava.lesson25.StartServer 
```

从文档：

```
 start java -classpath classDir -Djava.rmi.server.codebase=file:classDir/ example.hello.Server

where classDir is the root directory of the class file tree 
```

我由 Eclipse 编译的类在 package 中`com.practicalJava.lesson25`。

我的**bin**目录位于

```
C:\Practical_Java\Lesson25\ 
```

我的**StartServer.class**文件位于：

```
C:\Practical_Java\Lesson25\bin\com\practicalJava\lesson25 
```

我显然做错了什么。但是什么？？？

*** 更新： ***

错字：开始`Sever`而不是开始`Server`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:27:43.803

编写启动服务器的命令：

> rmic HelloServer
> 
> 启动 rmiregistry

编写启动客户端的命令：

> java -cp "C:\Program Files (x86)\apache-tomcat-7.0.16\webapps\ROOT\RMI\RMI" -Djava.rmi.server.codebase=file:/RMI/ -Djava.security.policy= Client.policy HelloClient

==================================

如果您在 Tomcat 文件夹中使用手动部署，则应将环境变量 classpath="C:\Program Files (x86)\apache-tomcat-7.0.16\webapps\ROOT\RMI\RMI" 设置为 RMI 文件夹，其中你把代码....

这真的有效....

# c++ - 提高通过 ctypes 将数据从 Python 传递到 C(++) 的速度

> ID：16136341
> 
> 赞同：3
> 
> 时间：2013-04-21T21:20:19.087
> 
> 标签：c++, python, optimization, ctypes

我需要针对时间关键型机器人应用程序优化循环中的函数调用。我的脚本在 python 中，它通过 ctypes 与我编写的 C++ 库接口，然后调用微控制器库。

瓶颈是向微控制器缓冲区添加位置-速度-时间点。根据我的时间检查，通过 ctypes 调用 C++ 函数大约需要`0.45`几秒钟，而在 C++ 端，调用函数需要`0.17`几秒钟。我需要以某种方式减少这种差异。

这是相关的 python 代码，其中数据是点的二维数组，而库是通过 ctypes 加载的：

```
data_np = np.vstack([nodes, positions, velocities, times]).transpose().astype(np.long)

data = ((c_long * 4) * N)()
for i in range(N):
    data[i] = (c_long * 4)(*data_np[i])

timer = time()
clibrary.addPvtAll(N, data)
print("clibrary.addPvtAll() call: %f" % (time() - timer)) 
```

这是被调用的 C++ 函数：

```
void addPvtAll(int N, long data[][4]) {

    clock_t t0, t1;
    t0 = clock();

    for(int i = 0; i < N; i++) {
        unsigned short node = (unsigned short)data[i][0];
        long p = data[i][1];
        long v = data[i][2];
        unsigned char t = (unsigned char)data[i][3];

        VCS_AddPvtValueToIpmBuffer(device(node), node, p, v, t, &errorCode);
    }

    t1 = clock();
    printf("addPvtAll() call: %f \n", (double(t1 - t0) / CLOCKS_PER_SEC));
} 
```

我不是绝对需要使用 ctypes，但我不想每次运行 Python 代码时都必须编译它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:39:00.217

Python 和 C++ 之间的往返可能很昂贵，尤其是在使用*ctypes*时（它就像普通 C/Python 包装器的解释版本）。

您的目标应该是尽量减少旅行次数，并在每次旅行中尽可能多地完成工作。

在我看来，您的代码的粒度太细了（即，进行了太多的旅行，而每次旅行都做的工作太少）。

*numpy*包可以将其数据直接暴露给 C/C++。这将让您避免昂贵的 Python 对象装箱和拆箱（以及随之而来的内存分配），并且它可以让您传递一系列数据点，而不是一次传递一个点。

修改您的 C++ 代码以一次处理多个点，而不是每次调用一次（就像*sqlite3*模块对*execute*与*executemany 所做*的一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T23:39:52.953

您可以使用`data_np.data.tobytes()`：

```
data_np = np.vstack([nodes, positions, velocities, times]).transpose().astype(np.long)
timer = time()
clibrary.addPvtAll(N, data_np.data.tobytes())
print("clibrary.addPvtAll() call: %f" % (time() - timer)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:03:33.953

这是我的解决方案，它有效地消除了 Python 和 C 之间的测量时间差。感谢 kirbyfan64sos 建议 SWIG 和 Raymond Hettinger 用于 numpy 中的 C 数组。我在 Python 中使用了一个 numpy 数组，它纯粹作为指针发送到 C - 两种语言都访问相同的内存块。

除了使用`gettimeofday()`而不是`clock()`给出不准确的时间之外，C 函数保持相同：

```
void addPvtFrame(int pvt[6][4]) {

    timeval start,stop,result;
    gettimeofday(&start, NULL);

    for(int i = 0; i < 6; i++) {
        unsigned short node = (unsigned short)pvt[i][0];
        long p = (long)pvt[i][1];
        long v = (long)pvt[i][2];
        unsigned char t = (unsigned char)pvt[i][3];

        VCS_AddPvtValueToIpmBuffer(device(node), node, p, v, t, &errorCode);
    }

    gettimeofday(&stop, NULL);
    timersub(&start,&stop,&result);
    printf("Add PVT time in C code: %fs\n", -(result.tv_sec + result.tv_usec/1000000.0));
} 
```

此外，我安装了 SWIG 并在我的接口文件中包含以下内容：

```
%include "numpy.i"
%init %{
    import_array();
%}

%apply ( int INPLACE_ARRAY2[ANY][ANY] ) {(int pvt[6][4])} 
```

最后，我的 Python 代码`pvt`通过 numpy 构造为一个连续数组：

```
pvt = np.vstack([nodes, positions, velocities, times])
pvt = np.ascontiguousarray(pvt.transpose().astype(int))

timer = time()
xjus.addPvtFrame(pvt)
print("Add PVT time to C code: %fs" % (time() - timer)) 
```

现在在我的机器上测量的时间大约有 %1 的差异。

# apache - 从局域网连接到tomcat：

> ID：16136345
> 
> 赞同：0
> 
> 时间：2013-04-21T21:20:43.230
> 
> 标签：apache, tomcat, tomcat7

我刚刚在我的 Windows 7 机器上安装了 Apache Tomcat 7。我的问题是，如何从家里的另一台计算机连接到此服务器。理想情况下，我喜欢连接 192.168 之类的东西。*.* :8080 但这似乎现在不起作用。这是在专用网络上，所以我的理解是端口被阻塞应该不是问题，对吧？我的意思是如果计算机可以相互ping通。

谢谢你。

**更新：**我关闭了 Windows 防火墙，并且能够从另一台机器连接。但是，我想在我的防火墙打开时执行此操作。我怎么会允许呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:23:09.083

可能是`Tomcat`已安装计算机上的防火墙已启动

[如何为 Windows Media Services 9 系列配置防火墙和网络地址转换 (NAT)](http://support.microsoft.com/kb/827562) --> 请参阅部分 --> 启用对防火墙外部编码器的访问

# c - C 初始化矩阵

> ID：16136352
> 
> 赞同：1
> 
> 时间：2013-04-21T21:21:29.890
> 
> 标签：c, enums, initialization, c-preprocessor

我有以下矩阵；

```
Vertex axisVertices[] =
    {   
        { { x_0, y_0, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f } }, // origin
        { { x_Max,  y_0,  0.0f, 1.0f }, { 0.0f, 1.0f, 0.0f, 1.0f } }, // eixo y
        { { x_0,  y_Max, 0.0f, 1.0f }, { 0.0f, 0.0f, 1.0f, 1.0f } } // eixo x       
    };

#define x_0 0.0f
#define y_0 0.0f
#define x_Max 1.5f
#define y_Max 1.7f 
```

我需要能够像这样初始化矩阵。**在C**中执行此操作的唯一可能方法是定义枚举或使用#define，因为像这样的初始化不能与常量一起使用。

问题是，我需要能够更改值`x_Max`和`y_Max`整个代码，所以`#define`在这种情况下不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:30:59.003

您可以传递参数`#defines`来创建[宏](http://gcc.gnu.org/onlinedocs/cpp/Macro-Arguments.html)

例如你可以做

```
#define INIT(x_0, y_0, x_Max, y_Max) \
         { { { x_0, y_0, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f } }, \
         { { x_Max,  y_0,  0.0f, 1.0f }, { 0.0f, 1.0f, 0.0f, 1.0f } }, \
         { { x_0,  y_Max, 0.0f, 1.0f }, { 0.0f, 0.0f, 1.0f, 1.0f } } } 
```

你可以这样使用

```
 Vertex axisVertices[] = INIT(0.0f, 0.0f, 1.5f, 1.7f); 
```

然后所有出现的`x_0`将替换为`0.0f`。就像将参数传递给函数一样。

# ios - IOS GameKit - 有没有办法通过“findMatchForRequest”强制创建一个全新的回合制比赛？

> ID：16136354
> 
> 赞同：0
> 
> 时间：2013-04-21T21:21:38.933
> 
> 标签：ios, game-center, gamekit

根据 Apple 的文档（[https://developer.apple.com/library/mac/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html)）：

“这种方法可能会创建新的比赛，也可能会将球员置于需要新球员进一步推进比赛的现有比赛中。”

有没有办法在不让玩家加入已经创建的比赛的情况下强制创建新比赛？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:08:43.070

当检索到的匹配不是新的时，您总是可以通过检查 cond 来请求一个新的

```
match.matchData.length == 0 
```

但是如果你按照游戏中心的虚拟原则做这样的事情，你将永远无法匹配 2 个玩家。因为如果用户没有做任何动作，其他玩家将无法加入游戏，而您将一直在创造新的新鲜游戏。

超越这一点的一种方法是由第一个玩家添加一个空转，其他玩家现在可以连接，所以之后你可以决定哪个玩家开始或让他们选择游戏设置等。但我没有检查这个苹果的指导方针可能是拒绝原因左右。

# django - Django 捕获错误的 url，必须修复正则表达式

> ID：16136359
> 
> 赞同：0
> 
> 时间：2013-04-21T21:22:13.677
> 
> 标签：django

我最终喜欢 www.ww.mywebsite.com/ 带有谷歌搜索结果的网址，

我在谷歌群组中询问，他们指出很明显，www.ww.mywebsite.com 不应该是 200 好的响应。

`(r'^$', myview)`，这就是我获取主页网址的方式，

我不认为这个问题是由于我的 url 模式导致的，据我所知，用于捕获尾随单词的 url 模式。www.wwww.example.com/test/，会有“测试”作为我们要处理的词，我的网站名称之前的这个 wwww 员工呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:21:43.300

在完全限定的 URL`www.example.com/test/`中，Django URL 匹配只查看`/test/`部分。[在这里，您需要过滤引入了ALLOWED_HOSTS](https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hosts)设置的域名。例如，您可以输入`settings.yml`：

```
ALLOWED_HOSTS = ['mywebsite.com', 'www.mywebsite.com'] 
```

或者，您可以使用自定义中间件将用户重定向到规范 URL。如果用户仍然可以访问非规范 URL，这是一个更好的解决方案：

```
class CanonicalDomainRedirectMiddleware(object):
    def process_request(self, request):
        if request.get_host() == 'mywebsite.com':
            return None
        if request.is_secure():
            protocol = 'https'
        else:
            protocol = 'http'
        return HttpResponsePermanentRedirect('%s://%s/%s' % (
            protocol, 'mywebsite.com', request.get_full_path) 
```

# iphone - iOS OpenGL ES 2.0 四元数旋转与滑动后的动量

> ID：16136360
> 
> 赞同：4
> 
> 时间：2013-04-21T21:22:20.627
> 
> 标签：iphone, ios, opengl-es-2.0, glkit, quaternions

我正在学习适用于 iOS 的 OpenGL ES 2.0，在几个教程的帮助下，可以使用四元数旋转和缩放一个简单的球体对象。当用户在完成滑动后从屏幕上抬起手指时，我希望地球继续以递减的速度旋转 - 所以我想给球体一些动力。我使用这个博客来了解旋转：[http](http://www.raywenderlich.com/12667/how-to-rotate-a-3d-object-using-touches-with-opengl) ://www.raywenderlich.com/12667/how-to-rotate-a-3d-object-using-touches-with-opengl 。任何人都可以提供一些阅读或动力的例子吗？如何使用四元数实现动量？谢谢！

```
 // Set up the frustrum and projection matrix
float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 0.1f, 100.0f);
self.effect.transform.projectionMatrix = projectionMatrix;

// Now perform the interpolation step
//[self slerpToNewLocation];

// Move the globe back so we can see it
GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, GLOBAL_EARTH_Z_LOCATION);

// In update, we convert the quaternion into a rotation matrix, and apply it to the model view matrix as usual.
GLKMatrix4 rotation = GLKMatrix4MakeWithQuaternion(_quat);
GLKMatrix4 rotateMatrix = GLKMatrix4RotateWithVector3(rotation,momentumVar/200,GLKQuaternionAxis(_quat));
_quat = GLKQuaternionMakeWithMatrix4(rotateMatrix);

modelViewMatrix = GLKMatrix4Multiply(modelViewMatrix, rotateMatrix);

// Cap the zoom scale factor max and mins
// only if slerping so that the auto-zoom out and back
// in still works during auto-rotation
if ( !_slerping ) {
    if ( scale > 2.0 ) {
        scale = 2.0;
    }
    if ( scale < 1.15 ) {
        scale = 1.15;
    }
}

// Apply the zoom factors
if ( _slerping ) {
    //NSLog(@"final scale %f",scale);
}

modelViewMatrix = GLKMatrix4Scale(modelViewMatrix, scale, scale, scale);

// Assign the drawer modelViewMatrix
self.effect.transform.modelviewMatrix = modelViewMatrix; 
```

我看到了以下问题：[从两个四元数和时间步长获得动量四元数](https://stackoverflow.com/questions/12439109/obtaining-momentum-quaternion-from-two-quaternions-and-timestep)- 但不明白答案。我真的很感激这里的一些提示 - 谢谢。

```
// Called when touches are ended
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    // The momentum var is initialized to a value
    momentumVar = 0.025;

    // Now since we stopped touching, decay the rotation to simulate momentum
    momentumTimer = [NSTimer scheduledTimerWithTimeInterval:0.01
                                     target:self
                                   selector:@selector(decayGLKQuaternion)
                                   userInfo:nil
                                    repeats:YES];

}

// Slerp about the current axis after touches ended but for a greater angle ( radians )
- (void)decayGLKQuaternion {

    if ( momentumVar < 0.001 ) {

        // Stop the momentum and timer
        momentumVar = 1.0;
        [momentumTimer invalidate];

    }
    else {

        // What is the current angle for the quaternion?
        float currentQuatAngle = GLKQuaternionAngle(_quat);

        // Decay the value each time
        momentumVar = currentQuatAngle * 0.95;

    }

} 
```

更新：我仍在尝试解决这个问题，我尝试将更新方法中的当前四元数转换为 Matrix4 并围绕四元数轴旋转该矩阵以获得从开始触发的计时器更新和递减的值一次 TouchesEnded 内我的应用程序。结果进行了旋转，但轴看起来不太正确（看起来很接近），并且角度会产生与我预期相反的旋转方向 - 所以如果我向下滑动并抬起手指，地球会以降低的速度向上旋转。更改角度值的符号无济于事。如何从四元数中正确提取旋转轴，以适当的角度旋转它，并以递减的速度这样做？谢谢 -

```
// In update, we convert the quaternion into a rotation matrix, and apply it to the model view matrix as usual.
    GLKMatrix4 rotation = GLKMatrix4MakeWithQuaternion(_quat);
    GLKMatrix4 rotateMatrix = GLKMatrix4RotateWithVector3(rotation,momentumVar/200,GLKQuaternionAxis(_quat));
    _quat = GLKQuaternionMakeWithMatrix4(rotateMatrix);

    modelViewMatrix = GLKMatrix4Multiply(modelViewMatrix, rotateMatrix); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T07:08:26.333

你可以完全避免通过使用 UIKit 中的 UIScrollView 类来实现动量物理。您可以放置​​一个实际上不会在 OpenGL 视图上绘制任何内容的 UIScrollView，并将其配置为具有所需的 contentSize（可滚动区域）和滚动属性。然后，您可以使您的一个类符合[UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)，并使该类的一个实例成为您的 UIScrollView 的委托。然后，当用户与您的不可见滚动视图（在您的 OpenGL 视图之上）交互时，您的滚动视图委托类将收到用户交互的通知。以下委托方法可能对实现特别有用。

`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`

在那里，您可以获得新更新的[contentOffset](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/cl/UIScrollView)并使用它来更新您的 3D 模型，然后您可以使用 OpenGL 将其渲染到您的 OpenGL 视图中。因此，您只是将滚动视图用作检测用户交互的机制，它将处理 iOS 用户熟悉的所有平滑更新和动量物理。

我强烈推荐观看Josh Shaffer的[WWDC 2012 Session 223，“Enhancing User Experience with Scroll Views” 。](https://developer.apple.com/videos/wwdc/2012/?id=223)在那次演讲中，他详细讨论了如何使用这种技术并举例说明。

# php - 卡在 MySQL 查询上

> ID：16136364
> 
> 赞同：0
> 
> 时间：2013-04-21T21:22:37.817
> 
> 标签：php, mysql

所以我正在研究这个有一个`Person`类的 php 程序。该类中有一个名为`find_by_email($email)`. 我尝试使用我确定在我的数据库中的电子邮件地址通过电子邮件查找用户。查询数据库后，它应该返回一个人对象。

我已经检查以确保我的表名和列是正确的。经过测试，代码似乎没有通过第一个 if 语句：`if ($r = mysql_query($query, $dbc))`。我唯一能想到的是我的查询一定是不正确的。这不是正确的语法吗？

这是我调用该方法的方式：

```
$email = $_POST['email']; 
$person = Person::find_by_email($_POST['email']); 
```

这是我的`Person::find_by_email()`方法：

```
 public static function find_by_email($email) {
        global $dbc;
        $query = "SELECT * FROM person WHERE email=". $email;
        if ($r = mysql_query($query, $dbc)) {
            if($row = mysql_fetch_array($r)) {
                $person = new Person($row);
                return $person;
            }
        }else{
        $error = "Could not find user";
                echo $error;
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:26:27.477

你需要在你的 MYSQL 语句中引用你的变量，如下所示：

```
$query = "SELECT * FROM person WHERE email='$email'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:30:12.527

我重写了你的函数，

```
public static function find_by_email($email) {
        global $dbc;
        $query = "SELECT * FROM person WHERE email='{$email}'";
        $result = mysql_query($query, $dbc)
        $num_rows = mysql_num_rows($result);
        if ($num_rows) {
            if($row = mysql_fetch_array($r)) {
                $person = new Person($row);
                return $person;
            }
        }else{
        $error = "Could not find user";
                echo $error;
        return nil;
        }
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:33:28.483

. . 如果您不方便检查 mysql_error() 以查看错误消息，您可以输出查询并在可视化工具中运行它（例如 HeidiSQL——也可以在 Linux 上的 Wine 上运行，顺便说一句）。做就是了...

```
die("SELECT * FROM person WHERE email=". $email); 
```

. . 复制输出并运行它。它会给你错误信息。

. . 现在看起来你在查询中插入值时没有引用它，比如：

```
SELECT * FROM person WHERE email=foo@bar.com 
```

. . 这是无效的语法。您需要将其括在引号中。尽管您可以简单地通过转义和引用`$email`变量的值来修复错误，但您应该认真考虑在最新的 PHP 版本中使用[PDO](http://php.net/manual/en/book.pdo.php)以获得其现代功能，例如准备好的语句，这样您就不必担心[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)或损坏的转义功能。

. . Amplexos。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T21:28:34.300

假设您已`$dbc`正确定义...

首先你的查询字符串是错误的，你需要引号`$email`：

```
$query = "SELECT * FROM person WHERE email='". $email . "'"; 
```

其次，您的 SQL 是可注入的，您需要对 post 字符串进行转义：

```
$email = mysql_real_escape_string($_POST['email']); 
```

第三，请不要使用`mysql`库，因为它们已被弃用，搜索`mysqli`并阅读它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T21:34:21.523

让我们假设 $dbc 已经打开到[PDO的连接](https://stackoverflow.com/tags/pdo/info)

```
public static function find_by_email($email) {
    global $dbc;
    $query = "SELECT * FROM person WHERE email=?";
    $stm = $dbc->prepare($query);
    $stm->execute(array($email));
    if ($row = $stm->fetch()) {
        return new Person($row);
    }
} 
```

请注意，您永远不应该直接从函数中回显任何内容。
检查返回的值，然后决定是否要回显任何内容。

# jquery - 从类名中获取 CSS url 路径

> ID：16136371
> 
> 赞同：5
> 
> 时间：2013-04-21T21:23:11.180
> 
> 标签：jquery, css, variables, less, var

我需要在当前的网络（应用程序）项目中使用非常多的图像（>600）。由于我几乎没有 PHP/SQL 经验，因此我想管理它们的方式是在 css/less.css 中。

我制作了一个名为“faces.less”的样式表来管理这些。我目前的工作表是这样的：

```
.f01 {
background-image: url("{base-url}/f01.png");
} 
```

宽度、高度等在另一个类中管理。但是到这 600 多次感觉很愚蠢，LESS 或 jQuery 中没有任何（简单）方法可以从类名中加载图像名吗？我理想的解决方案看起来有点像这样：

```
.f01, .f02, .f03 {
background-image: url("@{base-url}/{class-name}+png"); 
```

欢迎任何解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:33:06.693

要从类名构造图像名称，请使用图像标签（我不确定使用背景图像的最佳方法）：

```
var basePath = 'mysite/images/';
$('a').each(function() {
    var className = $(this).attr('class');
    className = className.replace(/[^f][^0-9]*/, '').replace(' ', '');
    $(this).css('background-image', basePath + className + '.png');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:38:37.300

## 使用 LESS 1.3.1+

`0`在数字上获得领先比在递归循环中正确工作有点挑战`10`，但这样可以做到：

**较少的**

```
@base-url: "/blah/blah";
@max-faces: 600; //enter the maximum number of faces to generate code for

.buildFaces(@index, @pre: ~"f0") when (@index =< @max-faces) {
  //build classes
  .@{pre}@{index} {
  background-image: url("@{base-url}/@{pre}@{index}.png");
  }
  //loop 
  .buildFaces((@index + 1), ~`(@{index} + 1) < 10 ? "f0" : "f"`);
}
// end loop
.buildFaces(@index, @pre) when (@index > @max-faces) {}

// start loop
.buildFaces(1); 
```

**CSS 输出（简短）**

```
.f01 {
  background-image: url("/blah/blah/f01.png");
}
.f02 {
  background-image: url("/blah/blah/f02.png");
}

...

.f599 {
  background-image: url("/blah/blah/f599.png");
}
.f600 {
  background-image: url("/blah/blah/f600.png");
} 
```

# unit-testing - @WebAppConfiguration 未注入

> ID：16136376
> 
> 赞同：17
> 
> 时间：2013-04-21T21:24:15.287
> 
> 标签：unit-testing, spring-mvc, spring-mvc-test

我正在尝试使用 Spring 3.2.1 创建 spring-mvc 测试。在一些教程之后，我认为这将是直截了当的。

这是我的测试：

```
@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( loader = AnnotationConfigContextLoader.class, classes = { JpaTestConfig.class } )
@WebAppConfiguration
public class HomeControllerTest {

    @Resource
    private WebApplicationContext webApplicationContext;

    private MockMvc mockMvc;

    @Test
    public void testRoot() throws Exception {
        mockMvc.perform(get("/").accept(MediaType.TEXT_PLAIN)).andDo(print())
            // print the request/response in the console
            .andExpect(status().isOk()).andExpect(content().contentType(MediaType.TEXT_PLAIN))
            .andExpect(content().string("Hello World!"));
    }

    @Before
    public void setUp() {
        mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
    }
} 
```

这是我相关的 pom.xml：

```
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest-all</artifactId>
    <version>1.3</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
<exclusions>
    <exclusion>
        <artifactId>hamcrest-core</artifactId>
        <groupId>org.hamcrest</groupId>
    </exclusion>
</exclusions>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.2.1.RELEASE</version>
</dependency> 
```

我有以下测试配置类：

```
@Configuration
@EnableTransactionManagement
@ComponentScan( basePackages = { "com.myproject.service", "com.myproject.utility",
        "com.myproject.controller" } )
@ImportResource( "classpath:applicationContext.xml" )
public class JpaTestConfig {

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() {
    ...
    }

    // various other services/datasource but not controllers
} 
```

我的理解是添加`@WebAppConfiguration`会强制 Spring 注入它。但是当我在 Eclipse 中运行这个测试时，我得到：

> 引起：org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖找到[org.springframework.web.context.WebApplicationContext]类型的合格bean：预计至少有1个bean有资格作为此依赖的自动装配候选者。依赖注解：在 org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:967) 在 org.springframework.beans 的 {@org.springframework.beans.factory.annotation.Autowired(required=true)}。 factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:837) 在 org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749) 在 org.springframework.beans.factory.annotation。

**更新**- 我必须更改我的测试 Java 配置类

```
@Configuration
@EnableWebMvc
@ComponentScan( basePackages = { "...." } )
@EnableTransactionManagement
@ImportResource( "classpath:applicationContext.xml" )
public class JpaTestConfig extends WebMvcConfigurationSupport { 
```

但是，现在的问题是我可以调用我的 REST 服务，但它正在调用其他一些服务，包括数据库调用。仅测试呼叫和模拟响应的首选方法是什么。我想测试有效和无效条件。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-11-04T23:06:27.630

在我的情况下，问题已通过替换解决：

```
@ContextConfiguration(loader = AnnotationConfigContextLoader.class, classes = { ... }) 
```

和

```
@ContextConfiguration(loader = AnnotationConfigWebContextLoader.class, classes = { ... }) 
```

注意加载器类名中的**Web**。使用以前的加载器，尽管有注释，但`GenericApplicationContext`已注入。`@WebAppConfiguration`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-17T10:52:23.303

以下设置仅使用 Java 配置类，对我来说效果很好。

```
@WebAppConfiguration
@ContextConfiguration(classes = TestApplicationContext.class)
public class MyClassTest {

    private MockMvc mockMvc;

    @Autowired
    private WebApplicationContext wac;

    @Before
    public void setUp() {
        mockMvc = webAppContextSetup(wac).build();
    }
    ....       
}

@Configuration
public class TestApplicationContext {

    @Bean
    public MyBean myBeanId(){
        return Mockito.mock(MyBean.class);
    }
    ....
} 
```

仅在测试类上存在 @WebAppConfiguration 可确保使用 Web 应用程序根目录的默认路径为测试加载 WebApplicationContext。因此，您可以自动装配 WebApplicationContext 并使用它来设置 mockMvc。

请注意，@WebAppConfiguration 必须与测试类中的@ContextConfiguration 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:29:27.617

你为什么不添加这个注释，看看它是否有效。将 XXXX-text.xml 替换为您的 bean 映射 xml。

```
@ContextConfiguration(locations={"classpath:/XXXX-test.xml"}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T21:20:10.130

其中一项测试可用于带有注释标头的本地开发支持，我在该问题中遇到了类似的问题。

评论是此测试的先前版本。

```
@RunWith(SpringJUnit4ClassRunner.class)
/* @EnableJpaAuditing */ /* for jpa dates */ /* it should be defined only once, 
because 'jpaAuditingHandler' defined in null on application startup */
@EntityScan(basePackageClasses = { EnableJpaAuditing.class, Jsr310JpaConverters.class })
//@ProfileValueSourceConfiguration(Application.class)
//@ContextConfiguration(loader = AnnotationConfigContextLoader.class)
@ContextConfiguration(loader = AnnotationConfigWebContextLoader.class)
//@PropertySource("classpath:application.properties")
@TestPropertySource(locations = "classpath:application.properties")
//@WebAppConfiguration
@SpringBootTest
public class JpaTests {/* */} 
```

# c# - 在 Windows 窗体中使用 OpenFileDialog 读取文本文件

> ID：16136383
> 
> 赞同：29
> 
> 时间：2013-04-21T21:25:31.580
> 
> 标签：c#, openfiledialog

我是 OpenFileDialog 函数的新手，但已经弄清楚了基础知识。我需要做的是打开一个文本文件，从文件中读取数据（仅限文本）并将数据正确放置在我的应用程序中的单独文本框中。这是我的“打开文件”事件处理程序中的内容：

```
private void openToolStripMenuItem_Click(object sender, EventArgs e)
{
    OpenFileDialog theDialog = new OpenFileDialog();
    theDialog.Title = "Open Text File";
    theDialog.Filter = "TXT files|*.txt";
    theDialog.InitialDirectory = @"C:\";
    if (theDialog.ShowDialog() == DialogResult.OK)
    {
        MessageBox.Show(theDialog.FileName.ToString());
    }
} 
```

我需要阅读的文本文件是这个（对于家庭作业，我需要阅读这个确切的文件），它有一个员工编号、姓名、地址、工资和工作时间：

```
1
John Merryweather
123 West Main Street
5.00 30 
```

在给我的文本文件中，还有 4 名员工在此之后立即以相同的格式提供信息。您可以看到员工的工资和工时在同一行，而不是拼写错误。

我在这里有一个员工班：

```
public class Employee
{
    //get and set properties for each 
    public int EmployeeNum { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public double Wage { get; set; }
    public double Hours { get; set; }

    public void employeeConst() //constructor method
    {
        EmployeeNum = 0;
        Name = "";
        Address = "";
        Wage = 0.0;
        Hours = 0.0;
    }

    //Method prologue
    //calculates employee earnings
    //parameters: 2 doubles, hours and wages
    //returns: a double, the calculated salary
    public static double calcSalary(double h, double w)
    {
        int OT = 40;
        double timeandahalf = 1.5;
        double FED = .20;
        double STATE = .075;
        double OThours = 0;
        double OTwage = 0;
        double OTpay = 0;
        double gross = 0; ;
        double net = 0;
        double net1 = 0;
        double net2 = 0;
        if (h > OT)
        {
            OThours = h - OT;
            OTwage = w * timeandahalf;
            OTpay = OThours * OTwage;
            gross = w * h;
            net = gross + OTpay;
        }
        else
        {
            net = w * h;
        }

        net1 = net * FED; //the net after federal taxes
        net2 = net * STATE; // the net after state taxes

        net = net - (net1 + net2);
        return net; //total net
    }
} 
```

所以我需要将该文件中的文本提取到我的 Employee 类中，然后将数据输出到 Windows 窗体应用程序中的正确文本框。我无法理解如何正确执行此操作。我需要使用流式阅读器吗？或者在这种情况下还有另一种更好的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-21T21:38:48.323

这是一种方法：

```
Stream myStream = null;
OpenFileDialog theDialog = new OpenFileDialog();
theDialog.Title = "Open Text File";
theDialog.Filter = "TXT files|*.txt";
theDialog.InitialDirectory = @"C:\";
if (theDialog.ShowDialog() == DialogResult.OK)
{
    try
    {
        if ((myStream = theDialog.OpenFile()) != null)
        {
            using (myStream)
            {
                // Insert code to read the stream here.
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
    }
} 
```

从这里修改：[MSDN OpenFileDialog.OpenFile](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.openfile.aspx)

**编辑**这是另一种更适合您需求的方式：

```
private void openToolStripMenuItem_Click(object sender, EventArgs e)
{
    OpenFileDialog theDialog = new OpenFileDialog();
    theDialog.Title = "Open Text File";
    theDialog.Filter = "TXT files|*.txt";
    theDialog.InitialDirectory = @"C:\";
    if (theDialog.ShowDialog() == DialogResult.OK)
    {
        string filename = theDialog.FileName;

        string[] filelines = File.ReadAllLines(filename);

        List<Employee> employeeList = new List<Employee>();
        int linesPerEmployee = 4;
        int currEmployeeLine = 0;
        //parse line by line into instance of employee class
        Employee employee = new Employee();
        for (int a = 0; a < filelines.Length; a++)
        {

            //check if to move to next employee
            if (a != 0 && a % linesPerEmployee == 0)
            {
                employeeList.Add(employee);
                employee = new Employee();
                currEmployeeLine = 1;
            }

            else
            {
                currEmployeeLine++;
            }
            switch (currEmployeeLine)
            {
                case 1:
                    employee.EmployeeNum = Convert.ToInt32(filelines[a].Trim());
                    break;
                case 2:
                    employee.Name = filelines[a].Trim();
                    break;
                case 3:
                    employee.Address = filelines[a].Trim();
                    break;
                case 4:
                    string[] splitLines = filelines[a].Split(' ');

                    employee.Wage = Convert.ToDouble(splitLines[0].Trim());
                    employee.Hours = Convert.ToDouble(splitLines[1].Trim());
                    break;

            }

        }
        //Test to see if it works
        foreach (Employee emp in employeeList)
        {
            MessageBox.Show(emp.EmployeeNum + Environment.NewLine +
                emp.Name + Environment.NewLine +
                emp.Address + Environment.NewLine +
                emp.Wage + Environment.NewLine +
                emp.Hours + Environment.NewLine);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-28T14:27:35.077

## 对于这种方法，您需要将 system.IO 添加到您的引用中，方法是在 c# 文件顶部附近的其他引用下方添加下一行代码（另一个使用 ****.** 的位置）。

```
using System.IO; 
```

* * *

接下来的代码包含两种读取文本的方法，第一种将读取单行并将它们存储在字符串变量中，第二个读取整个文本并将其保存在字符串变量中（包括“\n”（输入））

两者都应该很容易理解和使用。

* * *

```
 string pathToFile = "";//to save the location of the selected object
    private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        OpenFileDialog theDialog = new OpenFileDialog();
        theDialog.Title = "Open Text File";
        theDialog.Filter = "TXT files|*.txt";
        theDialog.InitialDirectory = @"C:\";
        if (theDialog.ShowDialog() == DialogResult.OK)
        {
            MessageBox.Show(theDialog.FileName.ToString());
            pathToFile = theDialog.FileName;//doesn't need .tostring because .filename returns a string// saves the location of the selected object

        }

        if (File.Exists(pathToFile))// only executes if the file at pathtofile exists//you need to add the using System.IO reference at the top of te code to use this
        {
            //method1
            string firstLine = File.ReadAllLines(pathToFile).Skip(0).Take(1).First();//selects first line of the file
            string secondLine = File.ReadAllLines(pathToFile).Skip(1).Take(1).First();

            //method2
            string text = "";
            using(StreamReader sr =new StreamReader(pathToFile))
            {
                text = sr.ReadToEnd();//all text wil be saved in text enters are also saved
            }
        }
    } 
```

* * *

要拆分文本，您可以使用 .Split(" ") 并使用循环将名称放回一个字符串中。如果您不想使用 .Split() 那么您也可以使用 foreach 并添加一个 if 语句在需要的地方拆分它。

* * *

要将数据添加到您的类中，您可以使用构造函数添加数据，例如：

```
 public Employee(int EMPLOYEENUM, string NAME, string ADRESS, double WAGE, double HOURS)
        {
            EmployeeNum = EMPLOYEENUM;
            Name = NAME;
            Address = ADRESS;
            Wage = WAGE;
            Hours = HOURS;
        } 
```

或者您可以通过在实例名称后键入 .variablename 来使用集合添加它（如果它们是公共的并且有一个集合，这将起作用）。要读取数据，您可以通过在实例名称后键入 .variablename 来使用 get（如果它们是公共的并且有 get 这将起作用）。

# java - Neo4j - 包 org.neo4j.graphdb.index 线程安全吗？

> ID：16136384
> 
> 赞同：0
> 
> 时间：2013-04-21T21:25:55.800
> 
> 标签：java, lucene, neo4j

从 Neo4j 文档中我无法理解 org.neo4j.graphdb.index 包实现是否是线程安全的，也就是说，我可以`Index<Node>`从两个不同的线程安全地访问同一个对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:05:37.373

找到了一些[较旧的帖子](https://groups.google.com/forum/?fromgroups=#!searchin/neo4j/index%2420thread%2420safe/neo4j/VBopmG_dJ4c/AsDtHU4jNq8J)，但是是的，它是线程安全的。您应该能够获得它的一个实例并在线程上传递。

# ios - 调用方法之前的单例暂停

> ID：16136385
> 
> 赞同：0
> 
> 时间：2013-04-21T21:26:04.067
> 
> 标签：ios, objective-c, cocoa-touch, methods, singleton

我创建了一个数据控制器单例，以便在我的应用程序中拥有所有网络。它可以工作，但是当我在单例中调用一个方法时，在执行之前会稍作停顿。为什么是这样？

视图控制器：

```
dataController = [FCDataController sharedInstance];
[dataController refreshData:self]; 
```

单身人士：

```
+ (id)sharedInstance {

    static FCDataController *dataController = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        dataController = [[self alloc] init];
    });
    return dataController;
}

- (void)refreshData:(id)object {

    // Set the delegate
    [self setDelegate:object];

    if ([delegate respondsToSelector:@selector(refreshDataDidStart)]) {
        [delegate refreshDataDidStart];
    }

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[FCDataController parserURL] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:20];
    [NSURLConnection sendAsynchronousRequest:theRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        if (error == nil) {

            NSLog(@"Reachable");

            NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:[FCDataController parserURL]];
            [parser setDelegate:self];
            [parser parse];

            NSLog(@"Refresh Finished");
        }
        else {

            NSLog(@"Not Reachable");
            NSLog(@"%@",error.localizedDescription);

            NSLog(@"Refresh Finished");
        }
    }];
} 
```

# sql - 查询表达式中的 SQL 语法错误

> ID：16136388
> 
> 赞同：0
> 
> 时间：2013-04-21T21:26:16.847
> 
> 标签：sql, ms-access, syntax

我正在尝试运行此查询

```
select customerID, sum(OrderID)
from employee_T
where 2 < select(sum(OrderID) from employee_T)
group by customerID; 
```

我想列出客户 ID 以及为每个拥有超过 2 个订单的客户下的订单总数。

我在这一行得到语法错误

```
where 2 < select(sum(OrderID) from employee_T) 
```

是因为 2?s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:29:46.953

我不熟悉 ms-access 语法，但这是您在常规 sql 中执行此操作的方式：

```
select customerID, count(OrderID)
from employee_T
group by customerID
having count(orderID) > 2 
```

# ios - UIView / UIViewController 右上角页面卷曲

> ID：16136393
> 
> 赞同：0
> 
> 时间：2013-04-21T21:26:27.550
> 
> 标签：ios, animation, uiview, uiviewcontroller, page-curl

我正在寻找从右上角开始的部分页面卷曲（但会满足于整页卷曲）。

我已经成功地使用：

```
CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setDuration:1.0];
CAMediaTimingFunction *fun=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[animation setTimingFunction:fun];
animation.type = @"pageCurl";
animation.subtype=@"fromRight";
animation.fillMode = kCAFillModeForwards;
animation.endProgress = 0.75;
[animation setRemovedOnCompletion:NO];
[[bckground layer] addAnimation:animation forKey:@"pageCurlAnimation"]; 
```

但由于这使用了私有 API - 我在提交我的应用程序时不能冒被拒绝的风险。

任何人都知道我如何从右上角获得`UIViewAnimationOptionTransitionCurlUp`或工作？`UIModalTransitionStylePartialCurl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:12:18.237

您的代码中没有私有 API。我在成功提交到应用商店的应用中有相同的代码。

私有 API 意味着使用未记录的方法。未记录的字符串值是好的。

# c - 如何通过 Windows 终端发送 EOF

> ID：16136400
> 
> 赞同：32
> 
> 时间：2013-04-21T21:27:29.990
> 
> 标签：c, windows

我试图从 K&R 书中理解示例 1.9，但我不知道如何发送 EOF。一些消息来源提到 Ctr+Z，但这只是终止程序。我以某种方式设法通过 Enter 和 Ctrl+Z 以及 Ctrl+V 的组合发送 EOF，但我无法重现它。

```
#include <stdio.h>
#define MAXLINE 1000

main()
{
    int len;
    int max;
    char line[MAXLINE];
    char save[MAXLINE];

    max = 0;
    while((len = getline_my(line, MAXLINE)) > 0)
    if(len > max) {
        max = len;
        copy(line, save);
    }
    if(max > 0)
        printf("%s", save);
}

getline_my(s, lim)
char s[];
int lim;
{
    int c, i;

    for(i=0; i < lim-1 && (c = getchar()) != EOF && c != '\n'; i++)// As long as the condition is fulfilled
        s[i] = c;
    if (c == '\n') {
        s[i] = c;
        i++;
    }
    s[i] = '\0';
    return(i);
}

copy(s1, s2)
char s1[];
char s2[];
{
    int i;

    i = 0;
    while((s2[i] = s1[i]) != '\0')
        i++;

} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-21T22:33:42.347

`CTRL+D`您可以使用(for *nix) 或`CTRL+Z`Enter (for Windows) 从命令行模拟 EOF 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-10T05:17:23.427

在寡妇中，当您准备好完成输入时，按`Enter`键，然后按`Ctrl+Z`，然后`Enter`完成输入。

```
int main(){
    char ch[100];    
    scanf("%[^EOF]",ch);    
    printf("\nthe string is:\n%s\n",ch);    
    fflush(stdin);    
    return 0;    
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-23T13:53:33.160

最后，鉴于适用于类 Unix 系统的简单 K&R 代码，在 Windows 上无法轻松完成。您可以发送 '^Z^M'（Ctrl-Z 然后 Enter）来发送 Windows 等效的 EOF，但您在此 C 程序中检查的字符 'EOF' 不一样。

简短的回答：你不能。

# ruby-on-rails - Rails - 1 个用户模型，但 2 个配置文件类型模型？

> ID：16136401
> 
> 赞同：0
> 
> 时间：2013-04-21T21:27:45.837
> 
> 标签：ruby-on-rails, model, polymorphic-associations, railstutorial.org, sti

刚刚完成 Michael Hartl 的教程，所以这是一个新手问题。但是，经过大量搜索，我还没有确信有一个好的解决方案：

我有一个捕获标准属性（姓名、电子邮件、密码等）的用户模型。用户的验证和身份验证也是使用 MH 的 RoR 教程完成的。

现在，在注册时，我希望新用户能够在学生用户或教师用户之间进行选择。此外，我希望任何一种类型的用户都能够为自己创建个人资料。Student_Profile 将是非常基本的，而 Teacher_Profile 会更广泛。

问题：

我的研究使我认为单表继承可能是要走的路。我想我可以在用户模型中创建子类教师和学生。然而，似乎有很多关于 STI 的负面想法。此外，我不确定我是否可以简单地将 Profile 模型与子类模型之一相关联。

任何建议将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:32:39.043

另一种方法是使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

更新：

```
class User < ActiveRecord::Base
  belongs_to :profileable, :polymorphic => true
end

class Teacher < ActiveRecord::Base
  has_one :profile, :as => :profileable
end

class Student < ActiveRecord::Base
  has_one :profile, :as => :profileable
end 
```

如您所见，您实际上是在说“老师有个人资料”和“学生有个人资料”。当然，它不是严格意义上的 OO，但考虑到您正在使用**关系**数据库这一事实，没有真正的 OO 场景，而只是*模拟*的场景——无论您使用 STI 还是多态关联。

如果您真的希望能够编程（并说）“老师是用户”，您可能希望将您的 db 后端更改为面向对象的数据库，如[MongoDB](http://www.mongodb.org)。有了这个，您就拥有了真正的 OO，并且可以以最明智的方式使用 STI。

# css - 如何使用浮动完成中心对齐

> ID：16136402
> 
> 赞同：0
> 
> 时间：2013-04-21T21:27:54.830
> 
> 标签：css

我正在尝试将所有 3 个 div 居中。有没有办法在不创建 div2 和 div3 的环绕的情况下完成这项工作。

```
 div1  | div2 |  div3
------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:33:15.937

你可以尝试这样的事情，因为 body 很可能会出现：

```
<body>
    <div class="centered" id="a">A</div>
    <div class="centered" id="b">B</div>
    <div class="centered" id="c">C</div>
</body> 
```

CSS：

```
body {
    text-align: center;
}

.centered {
    display: inline-block;
} 
```

[jsFiddle](http://jsfiddle.net/crsAC/)

# python - 返回给定字符串位置的重复计数

> ID：16136403
> 
> 赞同：0
> 
> 时间：2013-04-21T21:28:02.663
> 
> 标签：python, repeat

我需要程序返回我给它的索引字母在python中重复的次数。例如，如果我给它：

```
numLen("This is a Test", 3) 
```

我希望它返回

```
3 
```

因为 s 被说了三遍。现在我只有：

```
def numLen(string, num):
    for s in string:
        print(s + ' ' + str(test.count(s))) 
```

我什么都不知道，但我很茫然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:30:41.147

您首先需要获取给定索引处的字符，然后返回计数：

```
def numLen(inputstring, index):
    char = inputstring[index]
    return inputstring.count(char) 
```

演示：

```
>>> def numLen(inputstring, index):
...     char = inputstring[index]
...     return inputstring.count(char)
... 
>>> numLen("This is a Test", 3)
3 
```

Python 索引*从零开始*，因此位置 3 是输入示例中的字母`s`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:45:49.937

`def count_occurences(line, index): return line.count(line[index])`

# php - Debian 6.0.7，php.ini 集中allow_url_fopen 和allow_url_include，但仍然不能包含远程文件？

> ID：16136404
> 
> 赞同：0
> 
> 时间：2013-04-21T21:28:03.780
> 
> 标签：php, apache, include, debian

我知道我正在尝试做的事情的安全隐患，所以不要担心，我正在我拥有的一个小型 VPS 上做一个小型 LFI/RFI 演示，并且页面本身通过 .htaccess 密码。

我都设置了

```
allow_url_fopen = On
allow_url_include = On 
```

在 php.ini 中，但是当包含文件时，我得到的只是一个空白页。PHP过滤器也不起作用，同样的空白页。文件系统内部的文件工作正常。

有趣的是，在日志中什么都没有显示，除了抱怨缺少 favicon（我正在查看 /var/log/apache2/error.log，我正在使用 /etc/php5/apache2/php.ini用于配置）。

代码如下所示：

```
<?php $page = $_GET['page'];
if ($page=="") echo "blank page"; else {include($page);} ?> 
```

这很简单，不知道我做错了什么。

关于可能是什么问题的任何想法？

编辑：这很好用：

```
echo(file_get_contents('http://google.com')); 
```

这不会：

```
include('http://google.com'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T08:35:53.273

这也发生在我身上。我可以通过禁用 suhosin 插件来修复它。

# r - 如何从数据框中的一组变量中提取最大值

> ID：16136411
> 
> 赞同：3
> 
> 时间：2013-04-21T21:28:59.990
> 
> 标签：r

`max()`我在从一组变量中提取最大值时遇到函数问题。data.frame 是下一个，所有变量都是数字：

```
setosa  versicolor  virginica
    0   0.96969697  0.03030303
    0   0.05128205  0.94871795
    0   0.96969697  0.03030303
    1   0.00000000  0.00000000
    1   0.00000000  0.00000000
    0   0.05128205  0.94871795
    0   0.05128205  0.94871795
    0   0.05128205  0.94871795 
```

当我将`max()`函数应用于此数据框并尝试将其保存在一个新变量中时，它会发生：

`DF$max=max(DF$setosa,DF$versicolor,DF$virginica)`

```
setosa  versicolor  virginica   max
    0   0.96969697  0.03030303  1
    0   0.05128205  0.94871795  1
    0   0.96969697  0.03030303  1
    1   0.00000000  0.00000000  1
    1   0.00000000  0.00000000  1
    0   0.05128205  0.94871795  1
    0   0.05128205  0.94871795  1
    0   0.05128205  0.94871795  1 
```

它似乎`max()`在最大值附近起作用。我找不到我的错误，你能帮我看看有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:37:30.653

您的语句获取所有元素的最大值。尝试使用`apply`：

```
R > dat$max <-  apply(dat, 1, max)
R > dat
  setosa versicolor  virginica      max
1      0 0.96969697 0.03030303 0.969697
2      0 0.05128205 0.94871795 0.948718
3      0 0.96969697 0.03030303 0.969697
4      1 0.00000000 0.00000000 1.000000
5      1 0.00000000 0.00000000 1.000000
6      0 0.05128205 0.94871795 0.948718
7      0 0.05128205 0.94871795 0.948718
8      0 0.05128205 0.94871795 0.948718 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T21:37:55.063

你可以使用`pmax`它

```
set.seed(123)
dat <- data.frame(matrix(rnorm(15), ncol = 3))

cbind(dat,
      max = pmax(dat$X1, dat$X2, dat$X3)
)

##         X1        X2       X3     max
## 1  0.42646  0.688640 -0.69471 0.68864
## 2 -0.29507  0.553918 -0.20792 0.55392
## 3  0.89513 -0.061912 -1.26540 0.89513
## 4  0.87813 -0.305963  2.16896 2.16896
## 5  0.82158 -0.380471  1.20796 1.20796 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:36:45.597

`max`返回单个值，该值是提交给它的*所有参数的最大值。*因此，数据中所有三列的最大值为 1，这是 `max 返回的值：

```
max(df$setosa,df$versicolor,df$virginica)
[1] 1 
```

然后，您将其分配给 data.frame 中的新列，并且由于 R 的设计方式，在分配时发生回收，使得从 max 返回的值被重复使用，直到它被分配给的向量的大小已满，在这种情况下，数据框中的行数。

如果您想要每列的最大值，请执行

```
apply( df , 2 , max )
   setosa versicolor  virginica 
 1.000000   0.969697   0.948718 
```

它将`max`函数应用于每一列并返回结果。如果您想知道哪一行包含`max`每列的值，请`which.max`像这样使用

```
apply( df , 2 , which.max )
 setosa versicolor  virginica 
     4          1          2 
```

如果您希望`max`按行跨越值，请将 MARGIN 参数设置`apply`为 1（这里的 MARGIN 参数是使用位置匹配设置的，而不是显式命名）：

```
df$max <- apply( df , 1 , max ) 
```

# javascript - 如何使 div 粘在顶部，然后在页面滚动到特定滚动时取消粘住

> ID：16136413
> 
> 赞同：3
> 
> 时间：2013-04-21T21:29:05.410
> 
> 标签：javascript, jquery

我正在为自己创建一个网站，并且我正在寻找一个`div#stickydiv`在达到顶部时粘在顶部的东西`div#stickydiv`，但是当`div#finish`达到顶部时，我希望它`div#stickydiv`然后松开。

有人可以帮我实现这一目标:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:32:53.883

当然，给这只猫剥皮的方法不止一种（当然，形象地说；））。我的建议是使用 jQuery + 插件之一，例如这个：

[http://viget.com/inspire/jquery-stick-em](http://viget.com/inspire/jquery-stick-em)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T21:57:51.793

你可以看看这个问题，它试图实现类似的东西（尽管他们正在操纵不透明度而不是“粘性”）：

[基于滚动条位置的 Div 不透明度](https://stackoverflow.com/questions/10203777/div-opacity-based-on-scrollbar-position)

# javascript - 根据id标签动态添加图片

> ID：16136415
> 
> 赞同：1
> 
> 时间：2013-04-21T21:29:17.813
> 
> 标签：javascript, html, css

所以我有这样的图片

![在此处输入图像描述](https://i.stack.imgur.com/5TuSj.png)

并且它们有相应的 id 标签。当您单击其中一个时，它们会弹出一个弹出窗口：

![在此处输入图像描述](https://i.stack.imgur.com/Vcl8a.png)

这是由这个javascript加载的：

```
google.setOnLoadCallback(function() 
{
    $('div.recentbox').click(function()
    {
        var name = $(this).attr('id');

        $('#titlethumb').prepend('<img class="imgs" src="stuff/"+name+"/thumbnail.jpg" />');
        $('.box-inner').fadeOut('fast',function()
        {
            $('.box-inner').load('stuff/'+name+'/description.html', function()
            {
                $('.box-inner').fadeIn('slow');
            });
        });
    });
}); 
```

描述.html

```
<div id="infobox-wrap">
    <div id="infobox">
        <div id="titlethumb">
            <h2 class="infobox">linkur.com</h2>
            <img id="imgs" src=""> <!--this image should be found in stuff/linkur/thumbnail.jpg-->
        </div>

        <div id="descriptionbuttons">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam ut leo quis ante sagittis volutpat ut quis dolor. Vivamus ut leo ut erat pellentesque imperdiet nec eget turpis. Nunc sit amet elit dictum nulla tristique venenatis ut sed purus. Nulla facilisi. Duis ac dictum lectus. Aliquam erat volutpat. Nam scelerisque eros ac lacus cursus pulvinar. Praesent lobortis ipsum sit amet tellus fringilla vel lacinia diam auctor. Aliquam vel mattis odio. Sed tincidunt turpis in neque ullamcorper euismod. Nulla sed ante erat. Duis cursus massa facilisis neque eleifend sed viverra mi pulvinar. Morbi ultricies cursus libero sed ultrices. Donec non magna nibh. Phasellus tempor massa diam, tincidunt cursus justo. Vestibulum bibendum nisi in odio tincidunt vel dignissim leo vestibulum.
            </p>
            <p>
                Vivamus non nisi id ante congue suscipit ut ut urna. Morbi non sapien nulla. Suspendisse potenti. Suspendisse potenti. Sed at mauris ut turpis bibendum fringilla. Nam nec urna quis mauris porta venenatis. Sed tempus tortor vitae mauris viverra id mattis lectus aliquet.
            </p>

            <div id="overlaybuttons">
                <a href="#"><span class="orangebtn" id="ourworkbtn">Button</span></a>
                <a href="#"><span class="orangebtn" id="ourworkbtn">Button</span></a>
            </div>
        </div>
    </div>
</div> 
```

索引.php

```
<body>
    <div class="backdrop"></div>
    <div class="box">
        <div class="box-inner">
        </div>

    </div> 
```

但不幸的是图片没有加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:31:06.260

您需要关闭单引号，而不是双引号：

```
var name = this.id;

$('#titlethumb').prepend('<img class="imgs" src="stuff/' + name + '/thumbnail.jpg" />'); 
```

或者更干净：

```
$('<img>', {
    'class': 'imgs',
    'src': 'stuff/' + name + '/thumbnail.jpg'
}).prependTo('#titlethumb'); 
```

# c++ - 如何计算矩阵总和并进行比较

> ID：16136416
> 
> 赞同：-3
> 
> 时间：2013-04-21T21:29:21.233
> 
> 标签：c++, matrix, sum

很抱歉让我的作业感到厌烦。我正在使用 C++ 编写一个程序，该程序创建 3 个随机矩阵并计算每个矩阵的总和并打印出总和最大的一个。到目前为止，我遇到了两个问题。

-我的矩阵 2 和矩阵 3 是相同的，原因不明

- 我的矩阵的总和不正确，矩阵总和 2 与矩阵总和 3 不同，尽管它们是相同的矩阵。
到目前为止，这是我想出的：

```
#include <iostream>
#include <algorithm>
#include <ctime>
using namespace std;      
int main()
{   
int a[4][4]; 

{ // matrix 1
    int Suvaline1 = rand() % 100 ; 
    int Suvaline2 = rand() % 100 ; 
    int Suvaline3 = rand() % 100 ;
    int Suvaline4 = rand() % 100 ;
    int Suvaline5 = rand() % 100 ;
    int Suvaline6 = rand() % 100 ;
    int Suvaline7 = rand() % 100 ; 
    int Suvaline8 = rand() % 100 ; 
    int Suvaline9 = rand() % 100 ;  
    int Suvaline10 = rand() % 100 ;  
    int Suvaline11 = rand() % 100; 
    int Suvaline12 = rand() % 100 ; 
    int Suvaline13 = rand() % 100 ; 
    int Suvaline14 = rand() % 100 ; 
    int Suvaline15 = rand() % 100;             
    int Suvaline16 = rand() % 100 ;

    int a[4][4] =  {Suvaline1,Suvaline2,Suvaline3,Suvaline4,Suvaline5,Suvaline6,Suvaline7,Suvaline8,Suvaline9,Suvaline10,Suvaline11,Suvaline12,Suvaline13,Suvaline14,Suvaline15,Suvaline16};   

    srand(time(0));

    std::random_shuffle(&a[0][0],&a[0][0]);

    // print matrix 1
    for (int i=0; i<4; ++i)
    {
        for (int j=0; j<4; ++j)
        {
            std::cout << a[i][j] << "\t";
        }
        std::cout << "\n";
    } 
 {   // calculate matrix 1 sum
int i,j;
int sumrow11;
sumrow11=0; 
for(j=0;j<2;j++) 
sumrow11=sumrow11+a[i][j]; 
int sumrow12;
sumrow12=0; 
for(j=1;j<3;j++) 
sumrow12=sumrow12+a[i][j]; 

int sumrow13;
sumrow13=0; 
for(j=2;j<4;j++) 
sumrow13=sumrow13+a[i][j]; 

int sumrow14;
sumrow14=0; 
for(j=3;j<5;j++) 
sumrow14=sumrow14+a[i][j];  
int sum1;
sum1==sumrow11+sumrow12+sumrow13+sumrow14;// print matrix 1 sum
cout<<"\n Esimese maatriksi summa "<<sum1;   
{  // matrix 2
    int Suvaline1 = rand() % 100 ; 
    int Suvaline2 = rand() % 100 ; 
    int Suvaline3 = rand() % 100 ;
    int Suvaline4 = rand() % 100 ;
    int Suvaline5 = rand() % 100 ;
    int Suvaline6 = rand() % 100 ;
    int Suvaline7 = rand() % 100 ; 
    int Suvaline8 = rand() % 100 ; 
    int Suvaline9 = rand() % 100 ;  
    int Suvaline10 = rand() % 100 ;  
    int Suvaline11 = rand() % 100; 
    int Suvaline12 = rand() % 100 ; 
    int Suvaline13 = rand() % 100 ; 
    int Suvaline14 = rand() % 100 ; 
    int Suvaline15 = rand() % 100;             
    int Suvaline16 = rand() % 100 ;
    int a[4][4] =  {Suvaline1,Suvaline2,Suvaline3,Suvaline4,Suvaline5,Suvaline6,Suvaline7,Suvaline8,Suvaline9,Suvaline10,Suvaline11,Suvaline12,Suvaline13,Suvaline14,Suvaline15,Suvaline16};   

    srand(time(0));

    std::random_shuffle(&a[0][0],&a[0][0]);

    // print matrix 2
cout << "\n---------------------------------------------------------" << endl;
    for (int i=0; i<4; ++i)
    {
        for (int j=0; j<4; ++j)
        {
            std::cout << a[i][j] << "\t";
        }
        std::cout << "\n";
    }  
    {   // calculate matrix 2 sum
int i,j;
int sumrow21;
sumrow21=0; 
for(j=0;j<2;j++) 
sumrow21=sumrow21+a[i][j]; 
int sumrow22;
sumrow22=0; 
for(j=1;j<3;j++) 
sumrow22=sumrow22+a[i][j]; 

int sumrow23;
sumrow23=0; 
for(j=2;j<4;j++) 
sumrow23=sumrow23+a[i][j]; 

int sumrow24;
sumrow24=0; 
for(j=3;j<5;j++) 
sumrow24=sumrow24+a[i][j];  
int sum2;
sum2==sumrow21+sumrow22+sumrow23+sumrow24;
cout<<"\n Teise maatriksi summa "<<sum2;// print matrix 2 sum
{  // matrix 3

    int Suvaline1 = rand() % 100 ; 
    int Suvaline2 = rand() % 100 ; 
    int Suvaline3 = rand() % 100 ;
    int Suvaline4 = rand() % 100 ;
    int Suvaline5 = rand() % 100 ;
    int Suvaline6 = rand() % 100 ;
    int Suvaline7 = rand() % 100 ; 
    int Suvaline8 = rand() % 100 ; 
    int Suvaline9 = rand() % 100 ;  
    int Suvaline10 = rand() % 100 ;  
    int Suvaline11 = rand() % 100; 
    int Suvaline12 = rand() % 100 ; 
    int Suvaline13 = rand() % 100 ; 
    int Suvaline14 = rand() % 100 ; 
    int Suvaline15 = rand() % 100;             
    int Suvaline16 = rand() % 100 ;
    int a[4][4] =  {Suvaline1,Suvaline2,Suvaline3,Suvaline4,Suvaline5,Suvaline6,Suvaline7,Suvaline8,Suvaline9,Suvaline10,Suvaline11,Suvaline12,Suvaline13,Suvaline14,Suvaline15,Suvaline16};   

    srand(time(0));

    std::random_shuffle(&a[0][0],&a[0][0]); 

    // print matrix 3
cout << "\n---------------------------------------------------------" << endl;
    for (int i=0; i<4; ++i)
    {
        for (int j=0; j<4; ++j)
        {
            std::cout << a[i][j] << "\t";
        }
        std::cout << "\n";
    } 

{   // calculate matrix 3 sum
int i,j;
int sumrow31;
sumrow31=0; 
for(j=0;j<2;j++) 
sumrow31=sumrow31+a[i][j]; 
int sumrow32;
sumrow32=0; 
for(j=1;j<3;j++) 
sumrow32=sumrow32+a[i][j]; 

int sumrow33;
sumrow33=0; 
for(j=2;j<4;j++) 
sumrow33=sumrow33+a[i][j]; 

int sumrow34;
sumrow34=0; 
for(j=3;j<5;j++) 
sumrow34=sumrow34+a[i][j];  
int sum3;
sum3==sumrow31+sumrow32+sumrow33+sumrow34;
cout<<"\n Kolmanda maatriksi summa "<<sum3;     // print matrix 3 sum

getchar(); 
getchar();
} 
}  
} 
} 
} 
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:50:51.817

我给你一个简短的“TODO”，你应该在阅读一些讲义**后完成它（它肯定会涵盖做作业所需的所有内容）。**

所以这是你的总体规划：

*   获得有关计算机上随机数的基本概述[random.org 上的 Randomness](http://www.random.org/randomness/) 然后您将了解，为什么随机数根本不是随机的，以及如何处理它们。
*   你需要理解函数的概念才能继续，所以再读一遍你的讲义，或者买一本关于编程基础的书。[功能/Wikipedia.org](http://en.wikipedia.org/wiki/Function_%28computer_science%29)
*   编写一个函数，该函数返回一个包含随机条目的矩阵
*   编写一个函数来计算给定矩阵的“总和”
*   把所有东西放在一起……</li>

最后但并非最不重要：

*   做你的练习，自己做作业，阅读讲义。没有其他方法可以学习编码。
*   几周后回来，再次查看您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:58:51.970

有时您可以尝试使用循环，它们确实很有帮助。你的代码太长太复杂了。这是工作程序（但请不要只是复制粘贴它并尝试理解每一行代码，这是为了你好）：

```
#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;

struct rndArr
{
    int x[4][4];
    int sum;
};

int main()
{
    int i, j, z, maxSum, maxZ;
    srand(time(0));
    struct rndArr st[3];

    for(z=0;z<3;z++) //looping through matrix
    {
        for(i=0;i<4;i++) //looping through row of each matrix
        {
            for(j=0;j<4;j++) //looping through column of each matrix
            {
                st[z].x[i][j]=rand() % 100; //initializing matrix with random numbers
                //calculating sum of each matrix
                if(i==0 && j==0) st[z].sum = st[z].x[0][0]; 
                else st[z].sum += st[z].x[i][j];
            }
        }
    }

    //printing matrix and its sum
    for(z=0;z<3;z++)
    {
        cout << z+1 << ". matrix:" << endl;
        for(i=0;i<4;i++)
        {
            for(j=0;j<4;j++)
            {
                cout << st[z].x[i][j] << "  ";
            }
            cout << endl;
        }
        cout << "sum = " << st[z].sum;
        cout << endl << endl;
    }
    cout << "\n\n\n---------\n\n\n";

    // finding matrix with max sum
    maxSum = st[0].sum;
    maxZ = 0;
    for(z=1;z<3;z++)
    {
        if(st[z].sum > maxSum)
        {
            maxSum = st[z].sum;
            maxZ = z;
        }
    }

    //printing matrix with largest sum
    cout << "matrix with largest sum is: " << maxZ+1 << " matrix" << endl;
    for(i=0;i<4;i++)
    {
        for(j=0;j<4;j++)
        {
            cout << st[maxZ].x[i][j] << "  ";
        }
        cout << endl;
    }
} 
```

# android - 如何在 GridView 中从应用程序内存中加载图像

> ID：16136417
> 
> 赞同：1
> 
> 时间：2013-04-21T21:29:21.757
> 
> 标签：android, android-layout, android-gallery, android-gridview, android-checkbox

我使用本[教程](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)从图库中加载图像并使用 CheckBox 在网格中显示。我想更改此代码以从`/data/data/com.myexample.myfiles/files/` 如何实现它加载图像？请帮我。

```
import android.app.Activity;

public class AndroidCustomGalleryActivity extends Activity {

private int count;
private Bitmap[] thumbnails;
private boolean[] thumbnailsselection;
private String[] arrPath;
private ImageAdapter imageAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final String[] columns = { MediaStore.Images.Media.DATA,  
     MediaStore.Images.Media._ID };
    final String orderBy = MediaStore.Images.Media._ID;
    Cursor imagecursor = managedQuery(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,
            null, orderBy);
    int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);
    this.count = imagecursor.getCount();
    this.thumbnails = new Bitmap[this.count];
    this.arrPath = new String[this.count];
    this.thumbnailsselection = new boolean[this.count];
    for (int i = 0; i < this.count; i++) {
        imagecursor.moveToPosition(i);
        int id = imagecursor.getInt(image_column_index);
        int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
        thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
                getApplicationContext().getContentResolver(), id,
                MediaStore.Images.Thumbnails.MICRO_KIND, null);
        arrPath[i]= imagecursor.getString(dataColumnIndex);
    }
    GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
    imageAdapter = new ImageAdapter();
    imagegrid.setAdapter(imageAdapter);
    imagecursor.close();

    final Button selectBtn = (Button) findViewById(R.id.selectBtn);
    selectBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            final int len = thumbnailsselection.length;
            int cnt = 0;
            String selectImages = "";
            for (int i =0; i<len; i++)
            {
                if (thumbnailsselection[i]){
                    cnt++;
                    selectImages = selectImages + arrPath[i] + "|";
                }
            }
            if (cnt == 0){
                Toast.makeText(getApplicationContext(),
                        "Please select at least one image",
                        Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                        "You've selected Total " + cnt + " image(s).",
                        Toast.LENGTH_LONG).show();
                Log.d("SelectedImages", selectImages);
            }
        }
    });
}

public class ImageAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(
                    R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.checkbox.setId(position);
        holder.imageview.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                CheckBox cb = (CheckBox) v;
                int id = cb.getId();
                if (thumbnailsselection[id]){
                    cb.setChecked(false);
                    thumbnailsselection[id] = false;
                } else {
                    cb.setChecked(true);
                    thumbnailsselection[id] = true;
                }
            }
        });
        holder.imageview.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                int id = v.getId();
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" + arrPath[id]), "image/*");
                startActivity(intent);
            }
        });
        holder.imageview.setImageBitmap(thumbnails[position]);
        holder.checkbox.setChecked(thumbnailsselection[position]);
        holder.id = position;
        return convertView;
    }
}
class ViewHolder {
    ImageView imageview;
    CheckBox checkbox;
    int id;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-17T12:56:09.303

`File yourDir = new File("data/data/com.myexample.myfiles/files/");

```
 yourDir.mkdir();
enter code here
    ArrayList<GalleryHelper> dataT = null;

    dataT = new ArrayList<GalleryHelper>();

    for (File f : yourDir.listFiles()) {
        if (f.isFile()) {
            imageLoader.displayImage("data/data/com.myexample.myfiles/files" + f.getName(), imgSinglePick);

            GalleryHelper item = new GalleryHelper();
            item.sdcardPath = "data/data/com.myexample.myfiles/files" + f.getName();

            dataT.add(item);
        }
    }
    imgAdapter.addAll(dataT); 
```

我的画廊助手类是：

公共类 GalleryHelper {

```
 public String sdcardPath;
    public File file;
    public boolean isSeleted = false; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T10:00:57.813

这是可用于从任何 sdcard 文件夹加载图像的完整代码。我使用[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)库进行图像加载。

公共类 GalleryScreenActivity 扩展 SherlockActivity{

```
private DisplayImageOptions options;
private ImageAdapter imageAdapter;
private GridView gridView;
protected ImageLoader imageLoader = ImageLoader.getInstance();

@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Custom);
    super.onCreate(savedInstanceState);

    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    setContentView(R.layout.activity_gallery_screen);

    options = new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.image_for_empty_url)
        .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
        .bitmapConfig(Bitmap.Config.RGB_565)
        .build();

    gridView = (GridView) findViewById(R.id.gridview);

    imageAdapter = new ImageAdapter();

    gridView.setAdapter(imageAdapter);
    gridView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            startImageGalleryActivity(position);
        }
    });
    gridView.setOnScrollListener(new PauseOnScrollListener(true, true));
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    if(Data.array == null){
        getImageStrings();
        imageAdapter.notifyDataSetChanged();
    }
    gridView.setVisibility(View.VISIBLE);
    if(Data.array.size() == 0)
        gridView.setVisibility(View.INVISIBLE);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();       
}

public void getImageStrings(){
    File sdDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),Constants.PICTURE_SAVE_FOLDER);

    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.
    // Create the storage directory if it does not exist
    if (!sdDir.exists()) {
        if (!sdDir.mkdirs()) {
            Log.d(TAG, "failed to create directory");
            Toast.makeText(getApplicationContext(), "SD CARD ERROR: FIX IT AND TRY AGAIN", Toast.LENGTH_LONG).show();
        }else{

        }
    }

    File[] sdDirFiles = sdDir.listFiles(new FilenameFilter() {

        @Override
        public boolean accept(File dir, String filename) {
            return filename.contains(".jpg") || filename.contains(".png");
        }
    });

    String tempUrl;

    if(Data.array == null)
        Data.array = new LinkedList<String>();

    if(sdDirFiles != null)
        for(File singleFile : sdDirFiles)
        {
            tempUrl = singleFile.getAbsolutePath();
            Log.d("FILE", "file://"+tempUrl);
            Data.array.add("file://"+tempUrl);
        }
}

private void startImageGalleryActivity(int position) {
    Intent intent = new Intent(this, GalleryDetailScreenActivity.class);
    Data.galleryDetailPosition = position;
    startActivity(intent);
    overridePendingTransition(R.anim.appear_right, R.anim.hide_left);
    finish();
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    Data.resetData();
    overridePendingTransition(R.anim.appear_left, R.anim.hide_right);
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case android.R.id.home:
        finish();
        overridePendingTransition(R.anim.appear_left, R.anim.hide_right);
        break;
    }

    return true;
}

public class ImageAdapter extends BaseAdapter {

    @Override
    public int getCount() {
        if(Data.array == null)
            return 0;
        return Data.array.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final FrameLayout imageLayout;
        if(convertView == null)
            imageLayout = (FrameLayout) getLayoutInflater().inflate(R.layout.activity_gallery_screen_item, null);
        else
            imageLayout = (FrameLayout) convertView;

        final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
        imageView.setImageBitmap(null);
        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

        imageLoader.displayImage(Data.array.get(position), imageView, options, new SimpleImageLoadingListener() {

            @Override
            public void onLoadingStarted() {
                spinner.setVisibility(View.VISIBLE);
            }

            @Override
            public void onLoadingFailed(FailReason failReason) {
                String message = null;
                switch (failReason) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(GalleryScreenActivity.this, message, Toast.LENGTH_SHORT).show();

                spinner.setVisibility(View.GONE);
                imageView.setImageResource(android.R.drawable.ic_delete);
            }

            @Override
            public void onLoadingComplete(Bitmap loadedImage) {
                spinner.setVisibility(View.GONE);
            }
        });
        return imageLayout;
    }
} 
```

}

# c# - C# - 无法连接到任何指定的 MySQL 主机

> ID：16136420
> 
> 赞同：0
> 
> 时间：2013-04-21T21:29:30.980
> 
> 标签：c#, mysql, login

我正在用 C# 和 MySQL 创建一个系统，但我不断收到这个令人沮丧的错误，“无法连接到任何指定的 MySQL 主机”。我尝试了很多不同的方法，但没有任何效果，有人可以帮助我吗？

```
public bool tryLogin(string username, string password)
    {
        MySqlConnection con = new MySqlConnection("host=hostremoved;user=user_removed;password=passwordremoved;database=databaseremoved;");
        MySqlCommand cmd = new MySqlCommand("SELECT * FROM login WHERE user_name = '" + username + "' AND user_pass = '" + password + "';");
        cmd.Connection = con;
        con.Open();
        MySqlDataReader reader = cmd.ExecuteReader();
        if (reader.Read() != false)
        {

            if (reader.IsDBNull(0) == true)
            {
                cmd.Connection.Close();
                reader.Dispose();
                cmd.Dispose();
                return false;
            }
            else
            {
                cmd.Connection.Close();
                reader.Dispose();
                cmd.Dispose();
                return true;
            }
        }
        else
        {
            return false;
        }
    }

    private void btnlogin_Click(object sender, EventArgs e)
    {
        if (tryLogin(txtuser.Text, txtpass.Text) == true)
        {
            MessageBox.Show("Login worked!");
        }
        else
        {
            MessageBox.Show("Login failed!"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:43:39.603

如果不是防火墙，并且数据库设置为侦听远程连接，那么您应该检查您的用户凭据是否已配置，以便指定的数据库将接受来自给定 IP 的连接。如果用户只能从 localhost 连接，那么您需要以 root 身份登录并发出 GRANT 语句，例如：

```
GRANT ALL ON yourDbName.* TO 'yourUser'@'yourIP' IDENTIFIED BY "yourPassword"; 
```

有关使用 GRANT 的更多信息，请参阅：

[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:47:24.217

是防火墙问题吗？检查运行 MySql 实例的机器是否能够接受通过防火墙的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:24:24.033

感谢大家的帮助！我必须在我的防火墙上将我的 IP 列入白名单，它起作用了！

# android - 传递数组列表 到另一个活动，得到 NullPointerException

> ID：16136424
> 
> 赞同：3
> 
> 时间：2013-04-21T21:30:11.863
> 
> 标签：android, android-intent

我正在尝试使用 Parcelable 接口将对象的 ArrayList 从一个活动传递到另一个活动，但是当我进入我将 ArrayList 传递到的活动时，我始终收到 NullPointerException。

**Vitamin.java** - 用一个字符串和两个 String[] 数组定义一个对象，实现 Parcelable

**HealthBenefits.java** - 显示字符串列表。当一个字符串被选中时，Vitamin 对象列表被搜索，包含所选字符串的对象被放入另一个 ArrayList。这个 ArrayList 然后通过 putParcelableArrayListExtra 传递给 VitaminDisplay 活动。

**VitaminDisplay.java** - 显示与传递给活动的维生素名称相对应的字符串列表。

**维生素.java**

```
public class Vitamin implements Parcelable{

String theName;
String[] theFoods, theBenefits;

public Vitamin(String name, String[] benefits, String[] foods)
{
    theName = name;
    theBenefits = benefits;
    theFoods = foods;
}

private Vitamin(Parcel in){
    theName = in.readString();
    ArrayList<String> tempBenefits = new ArrayList<String>();
    tempBenefits = (ArrayList<String>) in.readSerializable();
    ArrayList<String> tempFoods = new ArrayList<String>();
    tempFoods = (ArrayList<String>) in.readSerializable();

    //convert from ArrayList<String> to String[]
    theBenefits = new String[tempBenefits.size()];
    theFoods = new String[tempFoods.size()];
    theBenefits = tempBenefits.toArray(theFoods);
    theFoods = tempFoods.toArray(theFoods);
}

public String getName(){
    return theName;
}

public String[] getBenefit(){
    return theBenefits;
}

public String[] getFoods(){
    return theFoods;
}

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void writeToParcel(Parcel out, int flags) {
    // TODO Auto-generated method stub
    out.writeString(theName);
    out.writeStringArray(theBenefits);
    out.writeStringArray(theFoods);
}

public static final Parcelable.Creator<Vitamin> CREATOR = new Parcelable.Creator<Vitamin>() {
    public Vitamin createFromParcel(Parcel in) {
        return new Vitamin(in);
    }

    public Vitamin[] newArray(int size) {
        return new Vitamin[size];
    }
};
} 
```

**HealthBenefits.java**

```
public class HealthBenefits extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.health_benefits_layout);

    ListView benefits = (ListView) findViewById(R.id.listView1);
    benefits.setTextFilterEnabled(true);
    ArrayAdapter<CharSequence> aa = ArrayAdapter.createFromResource(this, R.array.benefits, android.R.layout.simple_list_item_1);
    benefits.setAdapter(aa);

    final ArrayList<Vitamin> vitamins = new ArrayList<Vitamin>();
    String[] foods1 = {"Pork", "Whole grain", "Legumes", "Nuts and seeds"};
    String[] vitaBenefits1 = {"Improve nerve function", "Improve metabolism"};
    vitamins.add(new Vitamin("Vitamin B1", vitaBenefits1, foods1));

    String[] vitaBenefits13 = {"Improve circulatory function"};
    String[] foods13 = {"Leafy green vegetables"};
    vitamins.add(new Vitamin("Vitamin K", vitaBenefits13, foods13));

        //...more vitamin objects added to the list, omitted for brevity

    benefits.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
            // When clicked, show a toast with the TextView text
            ArrayList<Vitamin> listToDisplay = new ArrayList<Vitamin>();

            if(position == 1)
            {
            //code specific to first list item    
                    for(int i = 0;i < vitamins.size();i++){
                        if(vitamins.get(i).getBenefit().equals("Improve immune system")) {
                            listToDisplay.add(vitamins.get(i));
                        }

                    }
                     Intent myIntent = new Intent(view.getContext(), VitaminDisplay.class);
                     myIntent.putParcelableArrayListExtra("VITAMINS", listToDisplay);
                     startActivityForResult(myIntent, 0);
            }

            if(position == 2)
            {
            //code specific to 2nd list item    
            }
        }
  });
}
} 
```

**维生素显示.java**

```
public class VitaminDisplay extends Activity{

ArrayList<Vitamin> vitaminsList;
ArrayList<String> displayList;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.health_benefits_layout);

    vitaminsList = getIntent().getExtras().getParcelableArrayList("VITAMINS");
            displayList = new ArrayList<String>();

    for(int i = 0;i < vitaminsList.size();i++){
        displayList.add(vitaminsList.get(i).getName());
        Log.d("VitaminDisplay", vitaminsList.get(i).getName());
    }

    //displayList = new ArrayList<String>();
    //displayList.add("test");

    ListView benefits = (ListView) findViewById(R.id.listView1);
    benefits.setTextFilterEnabled(true);
    ArrayAdapter<String> aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, displayList);
    benefits.setAdapter(aa);
}

} 
```

我相信例外可能来自我在 Vitamin.java 中实现 Parcelable 类的方式，但我还没有找到解决方案。有什么建议么？

这是完整的日志：

```
E/AndroidRuntime(1958): FATAL EXCEPTION: main

04-21 21:55:08.963: E/AndroidRuntime(1958): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.heartsmart/com.example.heartsmart.VitaminDisplay}: java.lang.NullPointerException
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Looper.loop(Looper.java:137)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at java.lang.reflect.Method.invoke(Method.java:511)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at dalvik.system.NativeStart.main(Native Method)
04-21 21:55:08.963: E/AndroidRuntime(1958): Caused by: java.lang.NullPointerException
04-21 21:55:08.963: E/AndroidRuntime(1958):     at java.io.ByteArrayInputStream.<init>(ByteArrayInputStream.java:60)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readSerializable(Parcel.java:2139)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.example.heartsmart.Vitamin.<init>(Vitamin.java:23)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.example.heartsmart.Vitamin.<init>(Vitamin.java:20)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.example.heartsmart.Vitamin$1.createFromParcel(Vitamin.java:62)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.example.heartsmart.Vitamin$1.createFromParcel(Vitamin.java:1)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readParcelable(Parcel.java:2103)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readValue(Parcel.java:1965)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readListInternal(Parcel.java:2235)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readArrayList(Parcel.java:1655)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readValue(Parcel.java:1986)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Parcel.readMapInternal(Parcel.java:2226)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Bundle.unparcel(Bundle.java:223)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.os.Bundle.containsKey(Bundle.java:271)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at com.example.heartsmart.VitaminDisplay.onCreate(VitaminDisplay.java:23)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.Activity.performCreate(Activity.java:5104)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-21 21:55:08.963: E/AndroidRuntime(1958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-21 21:55:08.963: E/AndroidRuntime(1958):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:23:18.833

您正在使用编写数组，`Parcel.writeStringArray`但尝试使用`Parcel.readSerializable`. 更改您的`Vitamin`构造函数以匹配您的编写方式`writeToParcel`。这应该这样做：

```
private Vitamin(Parcel in){
    theName = in.readString();
    theBenefits = in.createStringArray();
    theFoods = in.createStringArray();
} 
```

或者，修改`writeToParcel`为将字符串数组写入`Serializable`对象。或者您可以将数组放入 a`Bundle`并写入然后读取包。

更好的是，切换到 using `ArrayList<String>`，我认为这可以提供更好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:45:13.303

我的头顶。当您尝试获取数组时缺少一件事。

而不是做

```
vitaminsList = getIntent().getParcelableArrayListExtra("VITAMINS"); 
```

尝试

```
vitaminsList = getIntent().getExtras.getParcelableArrayList("VITAMINS"); 
```

您应该添加更多检查，例如...

```
Bundle b = getIntent().getExtras();
if(b!=null && b.containsKey("VITAMINS")){
   vitaminsList = b.getParcelableArrayList("VITAMINS");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:43:08.083

可能还有更多，这可能不是您当前遇到的问题，但这是一个问题。在您尝试添加之前，`VitaminDisplay`您永远不会初始化您的`ArrayList`

```
ArrayList<String> displayList;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.health_benefits_layout);

vitaminsList = getIntent().getParcelableArrayListExtra("VITAMINS");
for(int i = 0;i < vitaminsList.size();i++){
    displayList.add(vitaminsList.get(i).getName());   // displayList isn't initialized 
```

将其更改为

```
ArrayList<String> displayList = new ArrayList<String>();  // Change this here

@Override
protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.health_benefits_layout);

vitaminsList = getIntent().getParcelableArrayListExtra("VITAMINS");
for(int i = 0;i < vitaminsList.size();i++){
    displayList.add(vitaminsList.get(i).getName()); 
```

# c++ - 使用 `std::string::c_str` 会返回动态分配的数组吗？

> ID：16136427
> 
> 赞同：1
> 
> 时间：2013-04-21T21:30:21.263
> 
> 标签：c++, string, dynamic-allocation

上的文档`std::string::c_str`说：

“返回一个指向数组的指针，该数组包含一个以空字符结尾的字符序列（即一个 C 字符串），表示字符串对象的当前值。”

这个数组是在调用 c_str 时动态分配的吗？如果不是，它来自哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:32:18.007

在 C++11 之前，它是未指定的。`string`对象管理它。在 C++11 中，它指向`string`对象数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T21:32:52.983

对于 C++2003，这取决于标准库的实现。它的实际存储很可能由`std::string`. 有些实现可能使用内部缓冲区，有些可能使用单独的预分配缓冲区。虽然它是一个常量时间访问器，所以库实现可用的选项是有限的。

您不应该在标准允许的范围之外乱用该内存，因为标准库的不同实现可能会让您一头雾水。

有趣的是，对于 C++11，这有点定义，它必须指向内部缓冲区并且是`std::string::data`.

# javascript - 如何使用 webview.loadURL 从 javascript (Android) 获取变量

> ID：16136430
> 
> 赞同：0
> 
> 时间：2013-04-21T21:30:42.133
> 
> 标签：javascript, android, webview, geolocation, android-jsinterface

我会尽量把这点说清楚。我通常不擅长提出明确的问题，因此在此先感谢您阅读本文并发表任何建议。

我正在编写一个需要用户位置的简单 android 应用程序。我正在使用 webview 以及 HTML navigator.geolocation.getCurrentPosition 功能来跟踪用户。

我遇到的问题是将 HTML 文件中收集的坐标输入到我的 android/java 应用程序中。我在我的 webview 中使用 javascriptInterface 在两者之间进行通信。

这是我在 java 代码中对 webview 的声明。

```
//Create the web-view
final WebView 
wv = (WebView) findViewById(R.id.webview);  
wv.getSettings().setJavaScriptEnabled(true);
//Creates the interface "Android". This class can now be referenced in the HTML file.
wv.addJavascriptInterface(new WebAppInterface(this),"Android");
wv.setWebChromeClient(new WebChromeClient()); 
```

这是 WebAppInterface 代码

```
public class WebAppInterface extends Activity 
 {
  Context mContext;

  /** Instantiate the interface and set the context */
  WebAppInterface(Context c) {mContext = c;}

  //Used to display Java Toast messages for testing and debugging purposes 
  @JavascriptInterface
  public void showToast(String toast) {
      Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
 }

  @JavascriptInterface
  public void storeCoord(String myLat,String myLong) 
  {
    Log.d("Coordinate Log","HTML call to storeCoords()");

    //Log.d("Coord Lat", myLat);
    //Log.d("Coord Long", myLong);

  }
} 
```

最后但同样重要的是，这是我的 HTML 代码

```
<!DOCTYPE html>
<html>
  <body>        
    <script type="text/javascript">

        function storePosition(position) 
        {
            Android.showToast("In storePosition()");                                        

            myLat = position.coords.latitude;
            myLong = position.coords.longitude;

            Android.showToast(myLat +" "+ myLong);  
                            Android.storeCoord(myLat,myLong);               
        }

        function fail(error){}  

        if (navigator.geolocation) 
        {
            navigator.geolocation.getCurrentPosition(storePosition,fail,{enableHighAccuracy:true,timeout:10000});
        }   
    </script>
</body> 
```

截至目前，每次我想收集用户的坐标时，我都在使用以下代码行

```
wv.loadUrl("file:///android_asset/CurrentLocationCoordinates.html"); 
```

这工作正常，直到调用 storePosition 函数。我认为这与我没有专门从 loadURL 调用 storePosition 函数有关，所以我尝试了

```
wv.loadUrl("javascript:storePosition()"); 
```

哪个有效。但是！！...我没有从 navigator.geolocation.getCurrentPosition 收集到的位置来发送到函数 storedPosition，所以显然没有任何反应。我在网上到处搜索解决方案，我得出的结论是我根本不明白 webview.LoadURL 函数是如何工作的。我需要获取存储在我的 android 应用程序中的坐标！

再次感谢您的时间和建议。

# php - PHP 跨域 SOAP 请求

> ID：16136432
> 
> 赞同：0
> 
> 时间：2013-04-21T21:31:03.917
> 
> 标签：php, soap

我是 php 新手，正在尝试编写一个脚本来发送跨域 SOAP 数据请求，然后将响应传递给 javascript 以呈现在我的页面上。我知道我需要使用 SoapClient，但不确定如何正确实现。

```
<?php 

$client = new SoapClient("http://ofmpub.epa.gov/WATERSWebServices/SpatialServices?WSDL", 
                            array('latitude'             => 46.852783,
                                  'longitude'            => -114.004517,
                                  'search_radius_miles'  => 5,
                                  'programs_list'        => "303D",));

$result = $client->waters.spatial_services.get_entities_by_lat_long;

echo "return_code= " . $result;
?> 
```

此服务的文档在[此处](http://www.epa.gov/waters/geoservices/docs/get_entities_by_latlong_service.html)。我在正确的轨道上吗？我不确定如何解决此脚本的测试问题。

# c - C：如何从套接字上的 read() 清除缓冲区

> ID：16136434
> 
> 赞同：4
> 
> 时间：2013-04-21T21:31:05.887
> 
> 标签：c, string, sockets, buffer

我正在尝试从服务器接收数据，它第一次工作正常，但随着 read() 不断循环，它也会存储它之前读取的旧值。这是我到目前为止所拥有的。

```
 char receive[50];

        if((he = gethostbyname(servername)) == NULL ) {

            perror(strcat("Cannot find server named:", servername));
            exit(0);
        }

        he = gethostbyname("localhost");
        localIP = inet_ntoa(*(struct in_addr *)*he->h_addr_list);
        client_sock_desc = socket(AF_INET, SOCK_STREAM, 0);
        server_addr.sin_family = AF_INET;
        server_addr.sin_addr.s_addr = inet_addr(localIP);
        server_addr.sin_port = htons(serverport);
        len = sizeof(server_addr);
        if(connect(client_sock_desc, (struct sockaddr *)&server_addr,len) == -1) {
            perror("Client failed to connect");
            exit(0);
        }

        strcpy(buf, "CLIENT/REQUEST\n");
        send(client_sock_desc, buf, strlen(buf), 0);
        //send actual function request

        //put a space before \n char to make it easier for the server
        for(i = 0; i < sizeof(wholeRequest); i++) {
            if(wholeRequest[i] == '\n') {
                wholeRequest[i] = ' ';
                wholeRequest[i+1] = '\n';
                break;
            }
        }

        while(read(client_sock_desc, receive, sizeof(receive)) > 0) {
            strcpy(receive, ""); //attempt to erase all old values
            printf(receive);
            fflush(stdout);
        }
        close(client_sock_desc); 
```

当服务器发送一次数据并关闭套接字时，它可以完美地工作。但后来我让客户端再次打开套接字，向服务器发送数据，服务器将再次向客户端发送数据并关闭套接字。客户端将再次尝试读取服务器发送的数据，但这一次它用新信息和部分旧信息填充接收

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:38:13.907

在我看来，在您的代码中，您在打印之前删除了接收到的数据 - 然后您将一个字符串传递给该字符串，该字符串`printf`基本上是空的，我不确定它是做什么`printf`的（因为它是空的格式化字符串）。

尝试这个：

```
int nread;
while((nread = read(client_sock_desc, receive, sizeof(receive)-1)) > 0) {
        receive[nread]='\0';    // explicit null termination: updated based on comments
        printf("%s\n",receive); // print the current receive buffer with a newline
        fflush(stdout);         // make sure everything makes it to the output
        receive[0]='\0';        // clear the buffer : I am 99% sure this is not needed now
    } 
```

# c - 清除所有空格和换行符 C 或 Lex/Bison

> ID：16136437
> 
> 赞同：0
> 
> 时间：2013-04-21T21:31:57.063
> 
> 标签：c, bison, lex

我需要清除 Lex/Bison 程序中 yytext 的所有空格和换行符 (\n)。

我有这样的财产：

```
<PROPERTY>[^}]* TAG=yytext; 
```

我需要它将我所有的 CSS 代码文件解析为 HTML 标记。

我试过这样的事情：

```
sizeOfArray=strlen(TAG);
int i;
for(i=0; i<sizeOfArray; i++){
    memmove(TAG,TAG+1,len);
} 
```

没有成功...

编辑：

我只想清理物业前后的空间。

例子：

```
 body {
         background: black;
         color: #80c0c0
         } 
```

因为我想把这些行放在我的 HTML 文件中，就像这样：

```
<body style="background:black; color:#80c0c0;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:43:23.537

未经测试，但如果`isspace()`from`<ctype.h>`匹配您要跳过的字符（空格、制表符、换行符），这应该有效：

```
int sizeOfArray = strlen(TAG);
int i, j;
for (i = j = 0; i < sizeOfArray; i++)
{
    if (!isspace(TAG[i]))
        TAG[j++] = TAG[i];
}
TAG[j] = '\0'; 
```

* * *

正如评论中所讨论的，此代码应实现'对于一个或多个换行符或空格的每个序列，保留一个空格；通过未更改复制其他字符'，再次假设`isspace()`是一个合适的函数——`isblank()`例如，在标准 C 库中还有 .

```
int sizeOfArray = strlen(TAG);
int i, j;
for (i = j = 0; i < sizeOfArray; i++)
{
    if (isspace(TAG[i]))
    {
        while (i < sizeOfArray && isspace(TAG[i]))
            i++;
        if (TAG[i] != '\0')
            TAG[j++] = ' ';
    }
    TAG[j++] = TAG[i];
}
TAG[j] = '\0'; 
```

现在使用此 SSCCE 进行测试（[简短、独立、正确的示例](http://sscce.org/)）：

```
#include <ctype.h>
#include <stdio.h>
#include <string.h>

static void squish_whitespace(char *TAG)
{
    int sizeOfArray = strlen(TAG);
    int i, j;
    for (i = j = 0; i < sizeOfArray; i++)
    {
        if (isspace(TAG[i]))
        {
            while (i < sizeOfArray && isspace(TAG[i]))
                i++;
            if (TAG[i] != '\0')
                TAG[j++] = ' ';
        }
        TAG[j++] = TAG[i];
    }
    TAG[j] = '\0';
}

int main(void)
{
    char data[][80] =
    {
        "abc def ghi",
        "abc  def   \t\t\n\nghi",
        "abc  def  ghi   ",
        "body {\n"                        // NB: string concatenation
        "        background: black;\n"
        "        color: #80c0c0\n"
        "     }"
    };
    enum { NUM_DATA = sizeof(data) / sizeof(data[0]) };

    for (size_t i = 0; i < NUM_DATA; i++)
    {
        printf("Before: [[%s]]\n", data[i]);
        squish_whitespace(data[i]);
        printf("After:  [[%s]]\n", data[i]);
    }
    return 0;
} 
```

测试数据的输出：

```
Before: [[abc def ghi]]
After:  [[abc def ghi]]
Before: [[abc  def          

ghi]]
After:  [[abc def ghi]]
Before: [[abc  def  ghi   ]]
After:  [[abc def ghi]]
Before: [[body {
        background: black;
        color: #80c0c0
     }]]
After:  [[body { background: black; color: #80c0c0 }]] 
```

# magento - 在捆绑产品类型下显示捆绑产品时出现问题

> ID：16136440
> 
> 赞同：2
> 
> 时间：2013-04-21T21:32:28.323
> 
> 标签：magento, bundle

我需要帮助来完成我目前正在开发的自定义 Magento 扩展。Magento 允许商家捆绑“简单”产品，不幸的是它不能捆绑“捆绑”产品。例如，我有一家卖电脑零件的商店。我创建每个单独的可销售产品，这些产品被视为“简单”产品。接下来，我想将键盘和鼠标捆绑在一起，我可以使用 Magento 轻松做到这一点，方法是创建一个名为“BUNDLE PRODUCT”的新产品类型，并将产品与这个新创建的“BUNDLE PRODUCT”相关联。但是，如果我想将捆绑产品与另一个捆绑产品相关联，那么开箱即用是不可能的。

因此，我创建了自己的扩展，允许我将捆绑的产品与另一个捆绑相关联，这在后端（产品管理工具）中运行良好。但是，我遇到了捆绑产品出现在前端（产品详细信息页面）上的问题。 **编辑：** 通常，当您查看任何产品的详细信息（无论是简单的还是捆绑的）时，您会看到整个产品的详细信息（描述、名称、价格、添加到购物车按钮等）。在此产品详细信息页面上，描述区域下方会出现一个框，以显示与此产品关联的所有捆绑商品的列表。此列表仅在您将 SIMPLE 产品与捆绑包关联时出现。我能够将捆绑产品与“父”捆绑产品相关联，但是在产品详细信息页面上 - 它没有列出它们。它只是空白。我可以看到标题、描述、添加到购物车按钮——但是我看不到相关产品的列表。

谁能帮我解决这个问题或指出正确的方向？我要求一种解决方案，使捆绑商品（产品类型：捆绑产品）出现在捆绑产品下。

**您可以执行以下操作来复制错误：**

1) 编辑

```
/app/code/Mage/Bundle/etc/config.xml 
```

在允许的选择类型下添加捆绑包，如下所示：

```
<allowed_selection_types>
<bundle/> 
```

2) 编辑

```
/app/code/Mage/Bundle/Block/Adminhtml/Catalog/Product/Edit/Tab/Bundle/Option/Search/Grid 
```

并注释掉

```
-->addFilterByRequiredOptions() 
```

在 _prepareCollection() 函数中。（当您注释掉它们时，请确保移动分号）

3) 编辑

```
 /app/code/Mage/Bundle/Model/Product/Type.php 
```

并使函数“isSalable()”为第一个“IF STATEMENT”返回 true。我这样做是因为出于某种原因，捆绑包中的捆绑包无法出售。它将返回“缺货”，所以我通过让该函数返回 TRUE 来克服这个问题。

最后在同一个文件上，通过注释掉修改 getSelectionsCollection()

```
->addFilterByRequiredOptions()
->setOptionIdsFilter($optionIds) 
```

（当您注释掉它们时，请确保移动分号）

所以现在您应该能够将 BUNDLED 产品关联到另一个 BUNDLE 产品。当您查看包含捆绑产品的产品时，它不会列出捆绑产品。这是我需要帮助的地方。我只需要一些帮助从哪里开始寻找。

提前谢谢你！

# c# - 重定向进程的输出

> ID：16136445
> 
> 赞同：0
> 
> 时间：2013-04-21T21:32:40.367
> 
> 标签：c#, process, cmd

我想启动一个 cmd 文件并立即获得输出。

看我的代码。指令`process.WaitForExit()`不等待；为什么不？ `copyf.cmd`如果我不以隐藏模式启动它，它运行良好，因为显示的 dosbox 运行到 cmd 的末尾。在隐藏模式下，cmd 关闭，因为`process.WaitForExit()`在 cmd 完成之前不要等待。

```
public void doSomeThing(   Queue<string> output, // queue for output log
                        Queue<string> error   // queue for error log
                       )  
{
            String com = "some params";

            System.Diagnostics.Process process = new System.Diagnostics.Process();
            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
            startInfo.FileName = Properties.Settings.Default.pathTo + @"\Make\copyf.cmd";
            startInfo.Arguments = com;
            startInfo.RedirectStandardOutput = true;
            startInfo.RedirectStandardError = true;
            startInfo.UseShellExecute = false;
            startInfo.CreateNoWindow = true;
            startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
            process.StartInfo = startInfo;

            Thread thread = new Thread(new ThreadStart(() =>
            {
                String er;
                String outp;

                while (true)
                {
                    outp = process.StandardOutput.ReadLine();

                    if(outp != null)
                        output.Enqueue("Output :" + outp + "\n");

                    er = process.StandardError.ReadLine();
                    if (er != null)
                        error.Enqueue("Error :" + er + "\n");
                }
            }));

            process.Start();
            thread.Start();
            process.WaitForExit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:24:31.783

您应该使用 C 开关启动实际的控制台命令处理器“cmd.exe”，而不是调用 .CMD 文件。

`/C`switch 将保持`cmd.exe`进程保持，直到您的命令文件完成执行。`WaitForExit()`将等到 CMD.exe 也完成执行。我已经用过很多次了。为了 WaitForExit 的正确操作，必须在 StandardError.ReadToEnd(); 之后调用它。如此[处所述的 msdn](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror.aspx)修改版本发布如下：

```
 string command = string.Format("{0}\\Make\\copyf.cmd {1}", Properties.Settings.Default.pathTo , com);
    int waitTime = 60000; //1 min as example here
    using (var process = new Process()
    {
        StartInfo = new ProcessStartInfo()
                {
                    UseShellExecute = false,
                    RedirectStandardOutput = true,
                    CreateNoWindow = true,
                    RedirectStandardInput = true,
                    RedirectStandardError = true,
                    FileName = "cmd.exe",
                    Arguments = string.Format("/C \"{0}\"", command)
                }
    })
    {
        try
        {
            if (!process.Start())
            {
                //Log some error "Failed to run command";
            }
        }
        catch (Exception ex)
        {
            //Log some error "Failed to start process command";
        }

        process.BeginOutputReadLine();
        string error = process.StandardError.ReadToEnd();
        process.WaitForExit(waitTime);
        if (!process.HasExited)
        {
            //Log something "Command: did not finish in time, terminating process"
            try
            {
                process.Kill();
            }
            catch { }
        }   
    } 
```

# c - 通过 TCP 传输数据始终停止在 251 次传输

> ID：16136448
> 
> 赞同：0
> 
> 时间：2013-04-21T21:33:02.257
> 
> 标签：c, networking, tcp, network-programming

我正在通过 TCP 传输整数几天以来我一直在努力让它正常工作，而且我非常接近。我正在做的是从 USB 操纵杆获取输入并将 Axis 的值发送到客户端。我有这个工作，但我的问题是它总是停在 251。我的意思是我设置了一个变量，每次将 Axis 的值打印到客户端的屏幕上时，该变量递增 1。我玩过，`MAXRCVLEN`但它仍然停留在 251。任何人都可以查看我的代码，看看我是否在这里做错了什么？

这是`server.c`文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

//joysick libraries
#include <sys/ioctl.h>
#include <stdio.h>
#include <fcntl.h>
#include <linux/joystick.h>

//Joysick device
#define JOY_DEV "/dev/input/js0"

//TCP Port number
#define PORTNUM 2343

int main(int argc, char *argv[])
{

    //TCP connect
    struct sockaddr_in dest; /* socket info about the machine connecting to us */
    struct sockaddr_in serv; /* socket info about our server */
    int mysocket;            /* socket used to listen for incoming connections */
    socklen_t socksize = sizeof(struct sockaddr_in);

    memset(&serv, 0, sizeof(serv));           /* zero the struct before filling the fields */
    serv.sin_family = AF_INET;                /* set the type of connection to TCP/IP */
    serv.sin_addr.s_addr = htonl(INADDR_ANY); /* set our address to any interface */
    serv.sin_port = htons(PORTNUM);           /* set the server port number */

    mysocket = socket(AF_INET, SOCK_STREAM, 0);

    /* bind serv information to mysocket */
    bind(mysocket, (struct sockaddr *)&serv, sizeof(struct sockaddr));

    /* start listening, allowing a queue of up to 1 pending connection */
    listen(mysocket, 1);
    int consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);

    //TCP variable
    char msg1[10];

    //Joystick variables
    int xAxis;
    int yAxis;
    int xSpeed;
    int ySpeed;

    //Joystick initialize
    int joy_fd, *axis=NULL, num_of_axis=0, num_of_buttons=0, x;
    char *button=NULL, name_of_joystick[80];
    struct js_event js;

    if( ( joy_fd = open( JOY_DEV , O_RDONLY)) == -1 )
    {
        printf( "Couldn't open joystick\n" );
        return -1;
    }

    //Get number of axes, buttons and name of joystick. Print results to screen
    ioctl( joy_fd, JSIOCGAXES, &num_of_axis );
    ioctl( joy_fd, JSIOCGBUTTONS, &num_of_buttons );
    ioctl( joy_fd, JSIOCGNAME(80), &name_of_joystick );

    axis = (int *) calloc( num_of_axis, sizeof( int ) );
    button = (char *) calloc( num_of_buttons, sizeof( char ) );

    printf("Joystick detected: %s\n\t%d axis\n\t%d buttons\n\n"
           , name_of_joystick
           , num_of_axis
           , num_of_buttons );

    //Use non blocking mode for joystick
    fcntl( joy_fd, F_SETFL, O_NONBLOCK );   /* use non-blocking mode */

    //infinite loop for reading joystick
    while(1) {

        //loop for tcp connection
        while(consocket){
            /* read the joystick state */
            read(joy_fd, &js, sizeof(struct js_event));

            /* see what to do with the event */
            switch (js.type & ~JS_EVENT_INIT)
            {
                case JS_EVENT_AXIS:
                    axis   [ js.number ] = js.value;
                    break;
                case JS_EVENT_BUTTON:
                    button [ js.number ] = js.value;
                    break;
            }
            //Give msg1 variable the value of axis[0]
            sprintf(msg1, "%d", axis[0]);

            //TCP send

            char msg[] = "Hello";
            printf("Value is: %d\n", axis[0]);
            //printf("Incoming connection from %s - sending welcome\n", inet_ntoa(dest.sin_addr));
            send(consocket, msg1, strlen(msg1), 0);
            consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);
            printf("Value X is: %s\n", msg1);
            printf(" \r");
            fflush(stdout);
        }

        close(consocket);
        close(mysocket);
        return EXIT_SUCCESS;

    }

    //Joystick close
    close( joy_fd );    /* too bad we never get here */
    return 0;
} 
```

这是`client.c`文件

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#define MAXRCVLEN 10000
#define PORTNUM 2343

int main(int argc, char *argv[])
{
    int i = 0;
    while(1){
        char buffer[MAXRCVLEN + 1]; /* +1 so we can add null terminator */
        int len, mysocket;
        struct sockaddr_in dest;

        mysocket = socket(AF_INET, SOCK_STREAM, 0);

        memset(&dest, 0, sizeof(dest));                /* zero the struct */
        dest.sin_family = AF_INET;
        dest.sin_addr.s_addr = inet_addr("192.168.254.16"); /* set destination IP number */
        dest.sin_port = htons(PORTNUM);                /* set destination port number */

        connect(mysocket, (struct sockaddr *)&dest, sizeof(struct sockaddr));

        len = recv(mysocket, buffer, MAXRCVLEN, 0);

        /* We have to null terminate the received data ourselves */
        buffer[len] = '\0';

        printf("Received %s (%d bytes).\n", buffer, len);
        printf("Number is: %d", i);
        i++;
        //close(mysocket);
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:29:06.780

问题是您每次在客户端循环中都连接一个 TCP 套接字。然后，您每次在服务器循环中的循环周围都接受新连接。

256 可能与每次没有关闭旧的丢弃套接字有关，并且每个进程资源或文件句柄都用完了。

这不是编写客户端/服务器应用程序的正确方法。

您应该做的是在进入循环之前只接受一次连接。然后根据需要发送，但在您实际连接套接字（通过接受获得）之前不要发送。

客户端应该在循环之前只连接一次，连接后它应该在该循环内调用 recv。如果有错误，它可以再次调用connect。

[Beej 的网络编程指南中](http://beej.us/guide/bgnet/)有一些关于如何使用套接字编写基本客户端/服务器应用程序的非常好的示例和详细信息，这是套接字编程的最佳资源之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:15:57.383

> 如果你在你的服务器中放`close(consocket)`之前会发生什么？`accept`而且你不能打电话`connect`或`accept`在你的循环内。
> 
> [这就是我](https://gist.github.com/xymostech/41a005936bf52ac10cca/8b20407d1760588162406445092f43a7b2be3d21)添加收盘线的意思。这有帮助吗？（这应该是您的服务器代码中的循环）

[@Xymotech](https://stackoverflow.com/users/57318/xymostech)的这些评论为我解决了这个问题！

# winapi - GetAsyncKeyState 的替代方案

> ID：16136451
> 
> 赞同：1
> 
> 时间：2013-04-21T21:33:24.140
> 
> 标签：winapi

我需要检测在程序启动时是否按下了`Shift`,`Control`和 &`Alt`键的各种组合。这必须在任何窗口打开之前发生。

我对**GetAsyncKeyState 了如指掌**，但是如果您的程序不是 Windows 中的前台任务，并且当第一次启动程序时，在打开窗口之前它不是前台任务，则此功能不起作用。

程序为 WIN32/C++/MFC/32 位。有任何想法吗？

* * *

*添加的附加信息：* 这是在 64 位 Win8 上运行的。此外，虽然我只提到**了 GetAsyncKeyState**，但我也尝试过**GetKeyState**，但结果并没有真正反映**当前**状态，而且根本没有用`Alt`。

这是在打开主窗口之前从我的应用程序类**InitInstance**方法（本质上是 MFC 应用程序的 main() ）中获取的代码示例。

```
#define USE_GETASYNCKEYSTATE (1)

// Following two lines are added for testing so there's a
// specific time to make sure keys are pressed
AfxMessageBox("Press keys after dismissing this message");
Sleep(2000);

#if USE_GETASYNCKEYSTATE
    short altKeyStatus = GetAsyncKeyState(VK_MENU) & 0x8000;
    short shiftKeyStatus = GetAsyncKeyState(VK_SHIFT) & 0x8000;
    short controlKeyStatus = (short)GetAsyncKeyState(VK_CONTROL) & 0x8000;
#else
    char kbBuf[256];
    GetKeyboardState( (PBYTE)kbBuf );
    short altKeyStatus = (short)kbBuf[VK_MENU];
    short shiftKeyStatus = (short)kbBuf[VK_SHIFT];
    short controlKeyStatus = (short)kbBuf[VK_CONTROL];
#endif

CString msg;
msg.Format("ALT: %d, SHIFT: %d, CTRL: %d", 
                altKeyStatus, shiftKeyStatus, controlKeyStatus );
AfxMessageBox(msg); 
```

当它使用**GetAsyncKeyState**运行时，所有三个变量都始终返回零。

当我运行**GetKeyboardState**块时，有时会得到指示`Shift`和/或`Control`已被按下的结果。也就是说，最近的某个时间被按下，但不一定与*当前*状态匹配，并且它永远不会返回除零之外的任何内容`Alt`。

请注意，可以删除带有**Sleep的前两行，而根本不改变结果。**我添加了它们，这样我就可以确定在程序实际运行时按键发生了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:28:26.007

不，你说反了。这是`GetKeyState()`行不通的，`GetAsyncKeyState()`很好。您通常应该使用`GetKeyState()`它，因为它返回键盘的缓冲状态。很重要，因为键盘消息缓冲在消息队列中。但是当您的程序没有焦点或尚未创建消息队列时，这是行不通的。后者是你的情况。

仔细挑选你的魔法键，它们往往会妨碍点击桌面快捷方式。我发现 Scroll Lock 键在这种情况下很有用。不用于任何事情，它通常甚至有一个灯并且它会锁定状态，因此可以打开而不会使键盘恐慌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T11:00:47.883

我不确定您对该函数的导入是否正确，因为您正在将它的结果转换为`short`应该`short`已经存在的结果。我也遇到了问题，`GetAsyncKeyState`我通过更正导入解决了它：

```
// C#
[DllImport("user32.dll", SetLastError = true)]
static extern short GetAsyncKeyState(int virtualKey); 
```

出于一个奇怪的原因，它**有时**只在我得到`int`结果时才起作用。

# database - Google App Engine 的缓存问题

> ID：16136457
> 
> 赞同：0
> 
> 时间：2013-04-21T21:34:10.207
> 
> 标签：database, google-app-engine, caching, object, memcached

我正在尝试学习如何使用 memcache 来减少数据库的负载。所以我有一个*cacheData*函数，当给定一个键时缓存博客文章，在这种情况下是“条目”。问题是，当我在博客上发布新帖子并进行数据库查询时，尽管新帖子已添加到数据库中，但它没有返回任何值。为什么我的数据库查询后没有返回条目？

缓存数据函数：

```
def cacheData(key, update = False):
     value = memcache.get(key)
     if value is None or update:
         logging.error("DATABASE HIT")
         value = db.GqlQuery("select * from Entry order by date desc")
         value = list(value) #returns 0 when entry is added...
         logging.error("value has: " + str(len(value)) + " items")
         memcache.set(key,value)
     return value 
```

这是在数据库中输入数据的方法：

```
def post(self):

    error = "You are missing a title or blog entry!"
    title = self.request.get("subject")
    blog = self.request.get("content")

    if (title and blog):
        blogEntry = Entry(title = title, blogText = blog)
        blogEntry.put()
        cacheData("entries", update = True)
        self.redirect("/blog")

    else:
        self.renderPostPage(title = title, blog = blog, error = error) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:44:45.700

这可能是最终的一致性问题。我很好奇，您的 cacheData 只尝试从 memcache 中获取一个条目，而您确实选择 * （获取所有实体）。我相信如果您尝试通过密钥获取，它将是强一致的。另一种解决方法是在调用 .put() 以将数据持久保存在数据存储区之后，同时更新内存缓存。

# c++ - 移动语义和运算符重载

> ID：16136461
> 
> 赞同：9
> 
> 时间：2013-04-21T21:35:05.487
> 
> 标签：c++, c++11, operator-overloading, move, move-semantics

这与Matthieu M. 提供的关于如何使用带有 + 运算符重载的移动语义的[答案](https://stackoverflow.com/a/9851423/558546)有关（通常，运算符不直接重新分配回左侧参数）。

他建议实现三个不同的重载：

```
inline T operator+(T left, T const& right) { left += right; return left; }
inline T operator+(T const& left, T right) { right += left; return right; } // commutative
inline T operator+(T left, T&& right) { left += right; return left; } // disambiguation 
```

数字 1 和 3 是有道理的，但我不明白目的 2 的作用。该评论建议进行交换处理，但似乎 1 和 2 将是互斥的（即在模棱两可的情况下实现这两个结果）

例如，所有 3 个都已实现：

```
T a, b, c;
c = a + b; 
```

编译器输出：

```
1> 错误 C2593: 'operator +' 不明确
1> 可以是 'T operator +(const T &,T)'
1> 或 'T 运算符 +(T,const T &)'
1> 在尝试匹配参数列表 '(T, T)' 时

```

删除 1 或 2 并且程序按预期工作。由于 1 是一般情况，而 2 只能与可交换运算符一起正常工作，所以我不明白为什么会使用 2。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T21:40:33.610

我认为您没有遗漏任何东西-您问题中的代码确实很麻烦。他的回答的前面部分是有道理的，但是在“四个期望的情况”和实际示例之间丢失了一些东西。

这可能会更好：

```
inline T operator+(T left, T const& right) { left += right; return left; }
inline T operator+(const T& left, T&& right) { right += left; return right; } 
```

这实现了规则：制作 LHS 的副本（最好通过移动构造），除非 RHS 无论如何都会过期，在这种情况下修改它。

对于非交换运算符，省略第二个重载，或者提供不委托给复合赋值的实现。

如果您的班级内部嵌入了重量级资源（因此无法有效移动），您将希望避免按值传递。丹尼尔在他的回答中提出了一些很好的观点。但不要`T&&`像他建议的那样返回，因为那是一个悬而未决的参考。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T22:41:01.837

> ### 关于此答案的重要更新/警告！
> 
> 实际上*有*一个[令人信服的例子](https://stackoverflow.com/q/16226150/2073257)，它在合理的真实世界代码中默默地创建了一个悬空引用，如下所示。请使用**其他**答案的技术来避免此问题，即使以创建一些额外的临时对象为代价。我将保留此答案的其余部分，以供将来参考。

* * *

可交换情况的正确重载是：

```
T   operator+( const T& lhs, const T& rhs )
{
  T nrv( lhs );
  nrv += rhs;
  return nrv;
}

T&& operator+( T&& lhs, const T& rhs )
{
  lhs += rhs;
  return std::move( lhs );
}

T&& operator+( const T& lhs, T&& rhs )
{
  rhs += lhs;
  return std::move( rhs );
}

T&& operator+( T&& lhs, T&& rhs )
{
  lhs += std::move( rhs );
  return std::move( lhs );
} 
```

为什么会这样，它是如何工作的？首先，请注意，如果您将右值引用作为参数，您可以修改并返回它。它来自的表达式需要保证右值在完整表达式结束之前不会被破坏，包括`operator+`. 这也意味着`operator+`可以简单地返回右值引用，因为调用者需要在表达式被完全评估并且临时变量（ravlues）被破坏之前使用`operator+`（它是*同一表达式的一部分）的结果。*

第二个重要的观察是，这如何节省更多的临时和移动操作。考虑以下表达式：

```
T a, b, c, d; // initialized somehow...

T r = a + b + c + d; 
```

与上述内容，它相当于：

```
T t( a );    // T operator+( const T& lhs, const T& rhs );
t += b;      // ...part of the above...
t += c;      // T&& operator+( T&& lhs, const T& rhs );
t += d;      // T&& operator+( T&& lhs, const T& rhs );
T r( std::move( t ) ); // T&& was returned from the last operator+ 
```

将此与其他方法发生的情况进行比较：

```
T t1( a );   // T operator+( T lhs, const T& rhs );
t1 += b;     // ...part of the above...
T t2( std::move( t1 ) ); // t1 is an rvalue, so it is moved
t2 += c;
T t3( std::move( t2 ) );
t3 += d;
T r( std::move( t3 ); 
```

这意味着您仍然有三个临时对象，尽管它们被移动而不是复制，但上述方法在完全避免临时对象方面效率更高。

有关完整的库，包括对 的支持`noexcept`，请参阅[df.operators](https://github.com/d-frey/operators/)。在那里，您还将找到非交换案例和混合类型操作的版本。

* * *

这是一个完整的测试程序来测试它：

```
#include <iostream>
#include <utility>

struct A
{
  A() { std::cout << "A::A()" << std::endl; }
  A( const A& ) { std::cout << "A::A(const A&)" << std::endl; }
  A( A&& ) { std::cout << "A::A(A&&)" << std::endl; }
  ~A() { std::cout << "A::~A()" << std::endl; }

  A& operator+=( const A& ) { std::cout << "+=" << std::endl; return *this; }
};

// #define BY_VALUE
#ifdef BY_VALUE
A operator+( A lhs, const A& rhs )
{
  lhs += rhs;
  return lhs;
}
#else
A operator+( const A& lhs, const A& rhs )
{
  A nrv( lhs );
  nrv += rhs;
  return nrv;
}

A&& operator+( A&& lhs, const A& rhs )
{
  lhs += rhs;
  return std::move( lhs );
}
#endif

int main()
{
  A a, b, c, d;
  A r = a + b + c + d;
} 
```

# ruby-on-rails - 延迟发送电子邮件

> ID：16136462
> 
> 赞同：4
> 
> 时间：2013-04-21T21:35:19.757
> 
> 标签：ruby-on-rails, sidekiq

`AnswerObserver < ActiveRecord::Observer`我的Rails 应用程序中有以下代码。创建答案后，会向查看问题的用户发送一封电子邮件。

```
 def after_create(answer)
    answer.question.watchers.each do |user|
    Notifier.answer_updated(answer, user).deliver
  end 
```

Notifier 继承自 ActionMailer`class Notifier < ActionMailer::Base`并具有方法

```
 def answer_updated(answer, user)
    @answer = answer
    @user = user
    mail(:to => user.email,
         :subject => "Your question has been answered")
  end 
```

我现在正在尝试使用 SideKiq 将其移至后台进程。我已经安装并运行了 redis，并且我成功地启动了 sidekiq `bundle exec sidekiq`。

根据这篇博文[http://blog.remarkablelabs.com/2013/01/using-sidekiq-to-send-emails-asynchronously](http://blog.remarkablelabs.com/2013/01/using-sidekiq-to-send-emails-asynchronously)，SideKiq 内置了对 ActionMailer 的支持

```
The method that you will likely use the most is .delay. Calling .delay from an Action Mailer will result in the email being added to the DelayedMailer queue for processing. 
```

因此，我在调用 action mailer 方法 answer_updated 的观察者中将“deliver”方法替换为“delay”，如下所示

```
 def after_create(answer)
    answer.question.watchers.each do |user|
    Notifier.answer_updated(answer, user).delay
  end 
```

但现在我收到了这个错误

```
undefined method `delay' for #<Mail::Message:0x007fee0c9af1d0> 
```

我没有做任何其他事情来配置 SideKiq。你能解释一下我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T22:52:42.347

正确的方法是：

```
Notifier.delay.answer_updated(answer, user) 
```

请参阅文件中的示例[Here](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/extensions/action_mailer.rb)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T15:29:36.557

它对我没有用。没有`delay`办法`mailer`。看看这里：

```
>> RUBY_VERSION
=> "2.2.0"
>> Rails::VERSION::STRING
=> "4.2.1"

>> mailer.methods.include?(:delay)
=> false
>> mailer.send_email(mailable, recipient).methods.include?(:deliver_later)
=> true 
```

因此，如果您使用 Rails > 4.2，请使用：

```
Notifier.answer_updated(answer, user).deliver_later 
```

# javascript - 动态创建多个div结构

> ID：16136464
> 
> 赞同：0
> 
> 时间：2013-04-21T21:35:34.507
> 
> 标签：javascript, jquery, html

我使用 jQuery 动态创建结构，

我正在尝试解决一个 div 的问题..

但是，我不知道为什么？我的 div“内容”直接关闭...

我的结果：

```
<li class="monde">
    <div class="content">
    </div>        // -----------> problem content div here 
    <div class="ctn_img">
        <img src="myimage.png" />
    </div>
        <div class="choix">
            <input type="checkbox" class="checkbox" />
        </div>
    <div class="infos">
        <span class="caption">
            <a href="#"><span class="stats">Etats</span></a>
            <input type="text" class="name" />
            <span class="test">test</span>
        </span>
    </div>
    // <-------------- better content close here...
    <span class="glob">Global</span>
</li> 
```

我的[演示在这里](http://jsfiddle.net/baAUt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:44:58.137

```
var content    = $('<div>').addClass('content'),
    image      = $("<img>").attr('src', 'myimage.png'),
    ctn_img    = $('<div>').addClass('ctn_img').append(image),
    choix      = $('<div>').addClass('choix').html('<input type="checkbox" class="checkbox" />'),
    caption    = $('<span>').addClass('caption').html('<a href="#"><span class="stats">Etats</span></a><input type="text" class="name"></span><span class="test">test</span>'),
    infos      = $('<div>').addClass('infos').append(caption),
    glob       = $('<span>').addClass('glob').html('Global');

    content.append(ctn_img).append(choix).append(infos).append(glob);
    var result = $('<li>').addClass('monde').append(content);

$(document.body).html(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:44:12.063

然后你应该将元素附加到类`.ctn_img`，`.choix`和`.infos`到`.content`，而不是`<li>`，即

```
// ...
ctn_img = $('<div>').addClass('ctn_img').append(image).appendTo(content),
choix   = $('<div>').addClass('choix').html('<input ... />').appendTo(content),
infos   = $('<div>').addClass('infos').append(caption).appendTo(content),
// ...
result = $('<li>').addClass('monde').append(content, glob); 
```

**演示：http:** [//jsfiddle.net/nGRwJ/1/](http://jsfiddle.net/nGRwJ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:57:05.773

您当前的方法至少有两个缺点：

1.  真的很难维护一个结构（你遇到了这个问题）。
2.  太多`append`和 DOM 操作会降低性能。

像这样构建 HTML 怎么样：

```
var result = $([
    '<li class="monde">',
        '<div class="content">',
            '<div class="ctn_img">',
                '<img src="myimage.png">',
            '</div>',
            '<div class="choix">',
                '<input type="checkbox" class="checkbox">',
            '</div>',
            '<div class="infos">',
                '<span class="caption">',
                    '<a href="#"><span class="stats">Etats</span></a>',
                    '<input type="text" class="name">',
                    '<span class="test">test</span>',
                '</span>',
            '</div>',
        '</div>',
        '<span class="glob">Global</span>',
    '</li>'
].join(''));

$(document.body).html(result); 
```

更容易阅读。或者考虑使用模板。

[http://jsfiddle.net/baAUt/1/](http://jsfiddle.net/baAUt/1/)

# php - 简单的 jquery php 数学实时更新文本字段

> ID：16136465
> 
> 赞同：0
> 
> 时间：2013-04-21T21:35:40.443
> 
> 标签：php, javascript, jquery, html

从美国东部时间上午 11 点开始，我一直在研究这个：/

无法找出我错了，我的 java/jquery 不存在（试图拿起它）

我想做的是根据几个变量计算莱特币每天的数量。

```
LTC/day = (50) * (24) * (24) ) / (User_hash/net_hash) 
```

IE：

```
(block * 24 * 24) / (mhs / $ltcdiff) = LTC/day or total text field 
```

这是代码，任何关于它的说明都会很棒，我正试图让它在您在该字段中输入 mhs 速率时实时更新。

```
<? 
$jsonurl = "http://www.litehosting.org/API/LTC/litecoin.php";
$json = file_get_contents($jsonurl,0,null,null);
$data = json_decode($json, true);
$dat =  $data['return']['getinfo'];
$ltcdiff = $dat['difficulty'];
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
$('input').keyup(function(){
var mhs = $('input[name="hash"]').val(),
diff = $('input[name="diff"]').val(),
block = ('50'),
result;

if (mhs != "" && diff != "" && block != ""){
    result = ((block*24) * (24)) / ((mhs) / (diff));
    $('input[name="total"]').val(result);
}
});
</script>
</head>
<body>
<h1>LTC example</h1>
<form name="myForm">
<P> mh/s: </P>
<input type="text" name="hash"><BR>
<P> diff: </P>
<input type="text" name="diff" value="<? echo $ltcdiff;?>"><BR>
<P> total coin: </P>
<input type="text" name="total">
<BR>
</form>
</body>
</html> 
```

可以忽略 php 代码，它正在提取正确的数据，它似乎只是 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:51:27.880

您需要引用 JQuery 才能使用 JQuery 函数。此外，请确保您的 JavaScript 在您使用 JQuery 定位的元素之后呈现：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
        <title>Untitled Document</title>
    </head>
    <body>
        <h1>LTC example</h1>
        <form name="myForm">
            <P> mh/s: </P>
            <input type="text" name="hash"><BR>
            <P> diff: </P>
            <input type="text" name="diff" value="<? echo $ltcdiff;?>"><BR>
            <P> total coin: </P>
            <input type="text" name="total">
            <BR>
        </form>
        <script type="text/javascript">
        $('input').keyup(function(){
            var mhs = $('input[name="hash"]').val(),
            diff = $('input[name="diff"]').val(),
            block = ('50'),
            result;

            if (mhs != "" && diff != "" && block != ""){
                result = ((block*24) * (24)) / ((mhs) / (diff));
                $('input[name="total"]').val(result);
            }
        });
        </script>
    </body>
</html> 
```

# c++ - 如何让我的相机朝着我面对的方向移动

> ID：16136466
> 
> 赞同：0
> 
> 时间：2013-04-21T21:35:47.700
> 
> 标签：c++, c, opengl, camera

我正在尝试在 OpenGL 中制作一个自由漫游相机。当前，相机向前、向后、向左和向右移动。我的下一个目标是让它朝着你看到的方向移动。

到目前为止，这是我的代码：

```
float yawRad = Rotation -> y * (3.1415f/180);
float pitchRad = Rotation -> x * (3.1415f/180);

if(myInput.Keys[VK_W]) //Forward
{
    curPos->x += sin(yawRad) * myInput.Sensitivity;
    curPos->z -= cos(yawRad) * myInput.Sensitivity;
}
else if(myInput.Keys[VK_S]) //Backward
{
    curPos->x -= sin(yawRad) * myInput.Sensitivity;
    curPos->z += cos(yawRad) * myInput.Sensitivity;
}

if(myInput.Keys[VK_A]) //Left
{
    curPos->x -= cos(yawRad) * myInput.Sensitivity;
    curPos->z -= sin(yawRad) * myInput.Sensitivity;
}
else if(myInput.Keys[VK_D]) //Right
{
    curPos->x += cos(yawRad) * myInput.Sensitivity;
    curPos->z += sin(yawRad) * myInput.Sensitivity;
}

if(myInput.Keys[VK_E]) //Up
{
    curPos->y += myInput.Sensitivity;
}
else if(myInput.Keys[VK_Q]) //Down
{
    curPos->y -= myInput.Sensitivity;
} 
```

`myInput.Sensitivity`是一个由鼠标滚轮控制的浮点数，值增加/减少 0.0005。

`Rotation`是存储 x,y,z 值（浮点数）的向量类。

我的问题是，如何修改我的代码以实现自由漫游？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:09:48.407

您可以从模型视图矩阵的第一列、第二列和第三列获取相机的左、上和前向量——当然是在配置之后。

```
float mview[16];
float front[4], up[4], left[4];

glGetFloatv(GL_MODELVIEW_MATRIX, mview);
left[0] = mview[0]; left[1] = mview[1]; left[2] = mview[2]; left[3] = 1.0;
up[0] = mview[4]; up[1] = mview[5]; up[2] = mview[6]; up[3] = 1.0;
front[0] = mview[8]; front[1] = mview[9]; front[2] = mview[10]; front[3] = 1.0; 
```

从那时起，您只需将适当的矢量添加到移动位置。

```
if(myInput.Keys[VK_A]) //Left
{
    curPos->x += left[0] * myInput.Sensitivity;
    curPos->z += left[z] * myInput.Sensitivity;
}
else if(myInput.Keys[VK_D]) //Right
{
    curPos->x -= left[0] * myInput.Sensitivity;
    curPos->z -= left[2] * myInput.Sensitivity;
}
// etc. 
```

有关详细信息，请参阅[此页面](http://www.songho.ca/opengl/gl_transform.html)。在同一站点上，[此其他页面](http://www.songho.ca/opengl/gl_anglestoaxes.html)描述了如何使用旋转角度来获取模型视图矩阵，因此列向量如上所示。同样的技术（但坐标系统略有不同）也被用于[地震游戏引擎系列](https://gamedev.stackexchange.com/questions/43266/what-does-anglevectors-method-in-quake-3-source-code-does)中。

# c# - 如何在 Windows 8 (C#) 应用程序的 ListView 中将焦点设置为 listitem

> ID：16136469
> 
> 赞同：0
> 
> 时间：2013-04-21T21:36:36.030
> 
> 标签：c#, listview, windows-store-apps, listviewitem

当我启用键盘访问并以编程方式将列表视图滚动到项目 nr 50 时，我想将焦点项目设置为 nr 50，因此如果用户按下向下箭头，他将从 nr 50 向下滚动。当前列表跳转到 nr 1，因为该项目已获得焦点。

我尝试将 selectedItem 属性设置为 50，但仍然是相同的行为。

此解决方案似乎适用于 HTML/JS 应用程序，但我没有看到与 C# 相同的 API？ [如何在 Metro 应用程序中设置 Listview 项目的焦点？](https://stackoverflow.com/questions/13684678/how-to-set-a-focus-of-listview-item-in-metro-apps)

```
yourListView.currentItem = { index: 8, hasFocus: true, showFocus: true } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-26T22:37:09.787

这是给您的代码片段：

ListViewItem^ selectedListItem = static_cast(yourListView->ContainerFromIndex(RecipientList->SelectedIndex));

selectedListItem->Focus(Windows::UI::Xaml::FocusState::Pointer);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:30:24.320

使用 ScrollIntoView 方法。

`yourListView.ScrollIntoView(dataItem);`

其中 dataItem 是对您要查看的项目的引用。

如果 ListView 在 SemanticZoom 容器中，情况会有所不同。你必须调用 MakeVisible() 方法。

[MSDN 上的详细信息](http://msdn.microsoft.com/en-us/library/windows/apps/br242911.aspx)。

# firefox-addon - JSFiddle 错误：请使用 POST 请求 - 在 NoScript 的 XSS 警告之后

> ID：16136471
> 
> 赞同：11
> 
> 时间：2013-04-21T21:36:51.953
> 
> 标签：firefox-addon, xss, jsfiddle

当我按下 JSFiddle 上的 Run 按钮时，有时我的 NoScript 插件会显示 XSS 警告，并且 fiddle 会显示此消息而不是我的更改：

```
{"error": "Please use POST request"} 
```

我允许来自 jsfiddle 使用的所有域的脚本。我还创建了一个反 XSS 保护异常，但这没有帮助：

```
^http?://fiddle\.net/ 
```

我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T21:36:51.953

JSFiddle 使用[http://fiddle.jshell.net/](http://fiddle.jshell.net/)服务器来显示结果（请参阅[什么使 JSFiddle 免受基于 XSS 的攻击？](https://stackoverflow.com/q/6732501/1176601)）。

所以规则应该是这样的：

```
^https?://fiddle\.jshell\.net/_display 
```

来源：[http ://curiousx.wordpress.com/2011/11/28/jsfiddle-error-please-use-post-request/](http://curiousx.wordpress.com/2011/11/28/jsfiddle-error-please-use-post-request/)

* * *

**更新**：FTR，对于嵌入的 stackoverflow 代码片段，规则应该是：

```
^https?://stacksnippets\.net/js 
```

# c - 需要更正我的 OpenMP Mandelbrot 集代码

> ID：16136478
> 
> 赞同：1
> 
> 时间：2013-04-21T21:37:20.403
> 
> 标签：c, set, openmp, mandelbrot

我在 OpenMP 中有以下 Mandelbrot 集代码。我的 C 代码工作得很好，它产生的图片很完美。但是使用 OpenMP，它可以正确编译和运行，但不幸的是我无法打开输出的 .ppm 文件，只是 Gimp 无法读取它。

```
// mandopenmp.c
// to compile: gcc -fopenmp mandopenmp.c -o mandopenmp -lm
// usage: ./mandopenmp <no_of_iterations> > output.ppm

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>
#include <omp.h>

typedef struct {
    int r, g, b;
} rgb;

void color(rgb **m, int x, int y, int red, int green, int blue)
{
    m[x][y].r = red;
    m[x][y].g = green;
    m[x][y].b = blue;
}

void mandelbrot(int niterations, rgb **m)
{
    int w = 600, h = 400, x, y, i;
    // each iteration, it calculates: newz = oldz*oldz + p, 
    // where p is the current pixel, and oldz stars at the origin
    double pr, pi;                   // real and imaginary part of the pixel p
    double newRe, newIm, oldRe, oldIm;   // real and imaginary parts of new and old z
    double zoom = 1, moveX = -0.5, moveY = 0; // you can change these to zoom and change position

    printf("P6\n# AUTHOR: Erkan Tairi\n");
    printf("%d %d\n255\n",w,h);

    //loop through every pixel
    #pragma omp parallel for private(x,i,pr,pi,newRe,newIm,oldRe,oldIm) schedule(dynamic, 1)
    for(y = 0; y < h; y++) {
        for(x = 0; x < w; x++) {
            // calculate the initial real and imaginary part of z, 
            // based on the pixel location and zoom and position values
            pr = 1.5 * (x - w / 2) / (0.5 * zoom * w) + moveX;
                pi = (y - h / 2) / (0.5 * zoom * h) + moveY;
                newRe = newIm = oldRe = oldIm = 0; //these should start at 0,0
                // start the iteration process
                for(i = 0; i < niterations; i++) {
                        // remember value of previous iteration
                        oldRe = newRe;
                        oldIm = newIm;
                        // the actual iteration, the real and imaginary part are calculated
                        newRe = oldRe * oldRe - oldIm * oldIm + pr;
                        newIm = 2 * oldRe * oldIm + pi;
                        // if the point is outside the circle with radius 2: stop
                        if((newRe * newRe + newIm * newIm) > 4) break;
                }
                if(i == niterations)
                color(m, x, y, 0, 0, 0); // black
            else
            {
                // normalized iteration count method for proper coloring
                double z = sqrt(newRe * newRe + newIm * newIm);
                int brightness = 256\. * log2(1.75 + i - log2(log2(z))) / log2((double)niterations);
                color(m, x, y, brightness, brightness, 255);
            }
            }
    }
}

int main(int argc, char *argv[])
{
    int niterations, i, j;

    if(argc != 2)
    {
        printf("Usage: %s <no_of_iterations> > output.ppm\n", argv[0]);
        exit(1);
    }

    niterations = atoi(argv[1]);

    rgb **m;
    m = malloc(600 * sizeof(rgb *));
    for(i = 0; i < 600; i++)
        m[i] = malloc(400 * sizeof(rgb));

    double begin = omp_get_wtime();
    mandelbrot(niterations, m);

    for(i = 0; i < 600; i++) {
        for(j = 0; j < 400; j++) {
            fputc((char)m[i][j].r, stdout);
            fputc((char)m[i][j].g, stdout);
            fputc((char)m[i][j].b, stdout);
        }
    }

    double end = omp_get_wtime();

    double time_spent = end - begin;
    fprintf(stderr, "Elapsed time: %.2lf seconds.\n", time_spent);

    for(i = 0; i < 600; i++)
        free(m[i]);
    free(m);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:12:23.163

我不知道 Mandrelbot 集的内部结构，但我会根据您的程序工作流程来试一试。

可能是因为您在并行部分中将颜色写入输出文件。这意味着您的像素在计算过程完成时正在写入，但这并不意味着 pixel 的计算过程`X`将在 pixel 处理之前结束`X+1`。

这样，在写入文件时，您最终会先写入（例如）像素`X+1`，然后写入像素`X`，混合颜色。

尝试将输出结果写入矩阵。您将不得不更改您的`color`函数，添加两个参数`i`和`j`要写入的像素坐标。

在整个处理完成并计算每个像素之后，应该将矩阵的像素写入输出文件。

编码：

```
typedef struct {
    int r, g, b;
} rgb;

void color(rgb **m, int x, int y, int red, int green, int blue) {
    m[x][y].r = red;
    m[x][y].g = green;
    m[x][y].b = blue;
}

void mandelbrot(rgb **m, int niterations) { // note the new argument, m.
    // and your code goes on and on... until:
            if ( i == niterations )
                color(m, x, y, 0, 0, 0);
            else {
                // normalized iteration count method for proper coloring
                double z = sqrt(newRe * newRe + newIm * newIm);
                int brightness = 256\. * log2(1.75 + i - log2(log2(z))) / log2((double)niterations);
                color(m, x, y, brightness, brightness, 255);
            }
        }
    }
}

int main(int argc, char *argv[]) {
    // everything ok until...

    double begin = omp_get_wtime();

    rgb **m;
    m = malloc(sizeof(rgb*) * 600);
    for ( i = 0; i < 600; i++ ) {
        m[i] = malloc(400 * sizeof(rgb));

    // finally call mandelbrot!
    mandelbrot(m, niterations);
    double end = omp_get_wtime();

    // now that you have computed your set, you just walk the array writing the output to the file.

    for ( i = 0; i < 600; i++ ) {
        free(m[i]);
    }
    free(m);

    double time_spent = end - begin;
    fprintf(stderr, "Elapsed time: %.2lf seconds.\n", time_spent);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:58:11.333

您的实施存在缺陷。您已经声明了许多必须改为的`private`变量`shared`。这包括`pr`, `pi`, `newRe`, `newIm`。并且默认情况`oldRe`下`oldIm`是共享的，因为它们是在并行区域外部的范围内声明的。这些都应该是私有的：

```
#pragma omp parallel for private(x,i,pr,pi,newRe,newIm,oldRe,oldIm) 
```

此外，循环的默认调度`parallel for`通常是（但不一定总是）`static`。对于分形之类的事物，这不是最佳选择，因为计算图像中的每一行或每一列需要不同的时间。因此，您应该应用该`schedule(dynamic,1)`子句并使用块大小（`1`在这种情况下），直到获得最佳加速。

```
#pragma omp parallel for private(x,i,pr,pi,newRe,newIm,oldRe,oldIm) \
            schedule(dynamic,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:44:44.973

如果您正在按顺序写入文件（您在编辑之前在原始代码中执行此操作），那么您可以`ordered`在写入文件之前使用 pragma。这将使用您的原始代码使图像正确。请参阅以下链接 [http://bisqwit.iki.fi/story/howto/openmp/#ExampleCalculatingTheMandelbrotFractalInParallel](http://bisqwit.iki.fi/story/howto/openmp/#ExampleCalculatingTheMandelbrotFractalInParallel)

但是，这不是最佳解决方案。最佳解决方案是先写入内存缓冲区，然后在 mandelbrot 代码完成填充缓冲区之后再写入文件（就像您在新代码中所做的那样）。

我有一些建议可以加快您的代码速度。融合您的 x 和 y 循环（如链接中所示）并使用动态调度（也显示在该链接中），因为每个像素需要不同的时间。最后，使用 SSE/AVX 一次对两个 (SSE) 或四个 (AVX) 像素进行操作。总的来说，您应该使用 OpenMP 和 SSE/AVX 将速度提高 20 倍以上。

```
#pragma omp ordered {
    if(i == niterations)
        color(m, x, y, 0, 0, 0); // black - use original color function which writes to file
    else
    {
        // normalized iteration count method for proper coloring
        double z = sqrt(newRe * newRe + newIm * newIm);
        int brightness = 256\. * log2(1.75 + i - log2(log2(z))) / log2((double)niterations);
        color(m, x, y, brightness, brightness, 255); //use original color function which writes to file
    }
} 
```

# javascript - 在 JQuery 中切换可拖动对象的正确方法？

> ID：16136479
> 
> 赞同：2
> 
> 时间：2013-04-21T21:37:21.067
> 
> 标签：javascript, jquery

阅读 API 后。

我最好的猜测是，使用初始化它

```
j_obj.draggable(); 
```

并从那里您可以启用它（默认设置）。

```
j_obj.draggable("enable"); 
```

或使用禁用它

```
j_obj.draggable("disable"); 
```

其中 j_obj 是 jquery 对象。

这行得通，但我在这里滚动浏览 api 后有点猜到了：

[http://api.jqueryui.com/draggable/](http://api.jqueryui.com/draggable/)

我只是想验证这 3 个，当您希望能够根据需要启用和禁用可拖动性时，只需要这 3 个步骤。

基本上是各种初始化，然后是启用和禁用方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:44:46.353

是的，当您想要能够`enable`和`disable`可拖动性时，只需要这 3 个步骤，**除非**您需要与`listen`关联`event's`，否则您需要使用[此处](http://api.jqueryui.com/draggable/#method-option)`dragging`描述的其他选项

例如，如果您想收听 dragStart ：

```
j_obj.draggable({
  start: function( event, ui ) {
    // dragging started
  }
}); 
```

或者这种方式：

```
j_obj.on( "dragstart", function( event, ui ){...}); 
```

# python - 根据映射从给定列表生成列表的 Python 程序

> ID：16136482
> 
> 赞同：1
> 
> 时间：2013-04-21T21:37:31.613
> 
> 标签：python, list-comprehension, data-munging

例如

组织列表：

```
aa b2 c d 
```

映射：

```
aa 1
b2 2
d 3
c 4 
```

gen_list：

```
1 2 4 3 
```

Python 的实现方式是什么？假设 org_list 和映射在 files`org_list.txt`和`mapping.txt`中，而 gen_list 将被写入`gen_list.txt`

顺便说一句，您希望哪种语言很容易实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:39:44.920

只需使用列表推导遍历[列表](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
gen_list = [mapping[i] for i in org_list] 
```

演示：

```
>>> org_list = ['aa', 'b2', 'c', 'd']
>>> mapping = {'aa': 1, 'b2': 2, 'd': 3, 'c': 4}
>>> [mapping[i] for i in org_list]
[1, 2, 4, 3] 
```

如果您在文件中有此数据，请首先在内存中构建映射：

```
with open('mapping.txt') as mapfile:
    mapping = {}
    for line in mapfile:
        if line.strip():
            key, value = line.split(None, 1)
            mapping[key] = value 
```

然后从输入文件构建输出文件：

```
with open('org_list.txt') as inputfile, open('gen_list.txt', 'w') as outputfile:
    for line in inputfile:
        try:
            outputfile.write(mapping[line.strip()] + '\n')
        except KeyError:
            pass  # entry not in the mapping 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T21:39:46.103

这是您的情况的解决方案。

```
with open('org_list.txt', 'rt') as inp:
    lines = inp.read().split()
    org_list = map(int, lines)

with open('mapping.txt', 'rt') as inp:
    lines = inp.readlines()
    mapping = dict(line.split() for line in lines)

gen_list = (mapping[i] for i in org_list) # Or you may use `gen_list = map(mapping.get, org_list)` as suggested in another answers

with open('gen_list.txt', 'wt') as out:
    out.write(' '.join(gen_list)) 
```

我认为 Python 足够优雅地处理这种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T21:45:32.907

另一种方式：

```
In [1]: start = [1,2,3]
In [2]: mapping = {1: "one", 2: "two", 3: "three"}
In [3]: map(mapping.get, start)
Out[3]: ['one', 'two', 'three'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T21:50:56.663

尝试使用*map()*或列表推导：

```
>>> org_list = ['aa', 'b2', 'c', 'd']
>>> mapping = {'aa': 1, 'b2': 2, 'd': 3, 'c': 4}

>>> map(mapping.__getitem__, org_list)
[1, 2, 4, 3]

>>> [mapping[x] for x in org_list]
[1, 2, 4, 3] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T22:03:25.470

```
mapping = dict(zip(org_list, range(1, 5)))       # change range(1, 5) to whatever
gen_list = [mapping[elem] for elem in org_list]  # you want it to be 
```

# c# - 声明具有相同内容的多个字符串文字会分配额外的内存吗？

> ID：16136483
> 
> 赞同：1
> 
> 时间：2013-04-21T21:37:37.203
> 
> 标签：c#, memory-management

我对字符串分配很好奇。如果我有一个名为 的常量`mystring = "test"`，我可以在应用程序的任何地方使用“test”而不分配任何新数据吗？见下文，此方法会分配任何新数据吗？

```
const string mystring = "test"
void test()
{
    for(int i = 0; i < 100000;i++)
    {
        allocationTest();
    }        
}

void allocationTest()
{
    Console.Write("test");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:49:03.043

不，该方法不会分配任何数据。

编译器将合并所有重复的字符串文字，因此这两个字符串文字`"test"`实际上将是应用程序启动时创建的一个字符串。

此外，即使字符串不存在于两个位置，字符串文字也不会在您使用时分配，而是在应用程序启动时分配。拥有引用字符串的常量对于方法中使用的字符串文字没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:51:42.297

如果编译器在一个项目的代码中发现两个常量字符串值，它将使用一个实例。

如果编译器在多个项目的代码中发现两个常量字符串值，则每个项目（dll 或 exe）都会获得自己的实例。这是因为 dll/exe 应该能够单独运行。

如果在运行时创建字符串（例如，通过逐行读取文件，或从数据库中读取数据）每个字符串（即使它具有相同的值）将成为一个单独的实例。这可以通过使用函数 string.Intern 来防止（参见：http: [//msdn.microsoft.com/en-us/library/system.string.intern.aspx](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)）。

# python - Python - 构建 HTTP 请求字符串变量

> ID：16136484
> 
> 赞同：3
> 
> 时间：2013-04-21T21:37:43.037
> 
> 标签：python

我正在尝试在变量“full_req”中构建 HTTP 请求字符串。以下是 HTTP 请求的外观：

```
GET /images/logo/ HTTP/1.1
Host: www.google.com
Connection: close 
```

我已经编写了 python 代码，所以如果我输入一个 URL，“ [http://www.google.com/images/logo/googlelogo.png](http://www.google.com/images/logo/googlelogo.png) ”，它会将 URL 分成 3 个部分。以下是我使用的变量：

*   `host`（包含`www.google.com`）
*   `path`（包含`/images/logo/`）
*   `file`（包含`googlelogo.png`）
*   `port`（它的显示`None`，但我认为它应该说`80`）

如何将 HTTP 请求字符串分配给**full_req**变量，所以如果我打印此变量，它包含所有三行？

```
print(full_req) 
```

尝试了字符串连接，但没有奏效。我使用了这个资源：[http ://www.skymind.com/~ocrow/python_string/](http://www.skymind.com/~ocrow/python_string/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:51:29.890

您可以使用字符串格式：

```
request = 'GET {path} HTTP 1.1\r\nHost: {host}\r\nConnection: Close\r\n\r\n'.format(path=path, host=host) 
```

这使用了现代[`str.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)，但您也可以使用[经典的字符串操作](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T21:50:43.440

. . 字符串格式或简单的连接应该做到这一点。

. . 有很多选择，这取决于版本。[`%`在 Python2 中使用运算符语法](http://docs.python.org/2/library/stdtypes.html#string-formatting)很常见，但在 Python3 中您主要使用[`.format`字符串对象的方法](http://docs.python.org/2/library/string.html#string.Formatter.format)。

. . 您仍然可以将最简单的连接形式与`+`运算符一起使用，如下所示：

```
full_req = 'GET ' + path + ' HTTP/1.1\r\n' \
           'HOST: ' + host + '\r\n' + \
           'Connection: close' 
```

. . 请注意，它不会请求文件（根据您的示例，您请求的是父文件夹，而不是文件本身），如果您打算下载文件而不是仅仅尝试 HTTP 协议，则可以使用内置模块那个（检查[`urllib.retrieve`](http://docs.python.org/2/library/urllib.html#urllib.urlretrieve)）。

. . 打开连接（在套接字中）时将使用端口号（通常为 HTTP 的 80），但您的示例似乎也没有执行请求的那部分。

. Amplexos。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T21:51:37.693

尝试：

```
def request(host, path, file):
    return '''GET %s%s HTTP/1.1\r
Host: %s\r
Connection: close''' % (path, file, host) 
```

据我所知，该端口不包含在实际的 HTTP 请求中。这里的关键是`%` [字符串格式化操作符](http://docs.python.org/release/2.5.2/lib/typesseq-strings.html)的使用。

# ruby - Ruby 正则表达式在相邻方法之间插入新行

> ID：16136489
> 
> 赞同：1
> 
> 时间：2013-04-21T21:38:05.390
> 
> 标签：ruby, regex, sed

我正在尝试在我的 ruby​​ 文件中的适当位置添加新行。一些文件的代码如下：

```
def abc
  ...
end
def pqr
  ...
end 
```

我想在适当的地方添加新行，如下所示：

```
def abc
  ...
end  

def pqr
  ...
end 
```

使代码更具可读性。我想出的初始正则表达式是基于关键字匹配`def.*?def`的开关。但是该正则表达式也匹配已经由空白新行分隔的 def 关键字。有任何想法吗？`m``def`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:48:14.087

您可以执行类似的操作`/end\ndef/`（您可能需要使用 \r\n，具体取决于您在编辑器中使用的行结束模式）。

这将匹配一个文字`end`，然后是一个换行符，然后是一个文字`def`。

只需替换一个额外的换行符，它应该可以正常工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:52:15.613

试试[`Enumerable#slice_before`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-slice_before)你的台词：

```
File.readlines('foo.rb').slice_before(/^\s*def\b/).flat_map do |group|
  group << "\n" if group.last =~ /^\s*end\b/
  group
end.join 
```

# java - 使用类存储大量信息

> ID：16136492
> 
> 赞同：-1
> 
> 时间：2013-04-21T21:38:22.350
> 
> 标签：java, class

我想从用户那里获得各种信息。例如。我想得到他们的名字，姓氏，地址。我有一堂课要这样做。但我将阅读许多用户的大量信息。

例如。用户1 =; 用户2 =; 一直到让我们说200个不同的人。

我的问题是，如果我的班级名称是 People。我每次都必须这样做吗？（我看不出这是唯一的方法）

```
People user1 = new People(joe, bloggs, world);
People user2 = new People(mary, bloggs, universe); etc. 
```

我将如何去做这件事。我正在考虑按该顺序将其写入 .txt 文件，但是如果用户想更改他/她的地址，我不知道如何读取/修改它。

编辑：

```
public static ArrayList<People> person= new ArrayList<People> (); 
```

如何将多个新人添加到数组列表中，我如何知道他们在哪个位置？

任何人都可以帮助我或让我走上正确的轨道。就像我说的那样，我必须能够存储大量信息并访问它来修改它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:40:09.077

您需要将*类的实例*添加到 ArrayList：

```
people.add(new Person(...)); 
```

# code-analysis - while循环的上下界

> ID：16136497
> 
> 赞同：0
> 
> 时间：2013-04-21T21:39:14.917
> 
> 标签：code-analysis, lower-bound

我被困在过去一篇关于嵌入式软件课程的论文中的一个问题上。

该问题提出以下问题：

```
Let n be the number of iterations of the while loop. Calculate an upper and lower bound on the value of n given that b <= bmax.

x=a
if x<1
then 
  x=1
end if
while x<b
  loop
    x=x+1
  end 
```

我认为上限是：n<=bmax 但我不明白如何计算下限。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:41:42.093

对于下限，当 a > 1 时得到。然后 x 从 a 而不是 1 开始，因此从那里到 b 需要更少的迭代。

如果您从 x = a 开始，并且最后一次迭代发生在 x = b 时（您未通过测试），那么您总共需要 b - a 次迭代。由于 b <= bmax，答案是：

```
lower bound : bmax - a
upper bound : bmax - 1 
```

请注意，如果 a >= bmax，则下限减少到 0，因为您的迭代次数不能少于 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:44:56.527

仅给定所提供的信息，您能做的最好的就是微不足道的下限 - 0 次迭代。这是因为当 时`a>=b`，循环根本不会执行。

至于上限，您有一个错误。由于`x`至少从 1 开始，因此您最多可以进行`bmax-1`迭代，而不是`bmax`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:47:34.390

我认为问题是：b 是一些 b <= bmax。现在用 bmax 和 a 表示迭代次数 n。n 的下界是微不足道的`0`，如果`a >= bmax`; n 的上限是 case `a < 1`，产生：`n = bmax - 1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T13:16:45.943

```
upper bound: max(0,b-1) <= max(0,bmax-1)

lower bound: if (a<1) then max(0,b-1), else max(0,b-a) 
```

下界不能用 bmax 代替 b 来表示，因为我们有`b<=bmax`，而不是`bmax<=b`。如果我们不允许使用`b`，那就是`0`。

# java - Groovy：编译 + 嵌入

> ID：16136499
> 
> 赞同：1
> 
> 时间：2013-04-21T21:39:33.403
> 
> 标签：java, groovy

目标是

1.  从将 Groovy 用于预处理器指令的脚本语言开始（整个预处理器语言）

2.  使用 Antlr 4 解析该脚本（将常规脚本与打印和剥离 # 用于 groovy 并作为 Groovy 脚本输出）

3.  在嵌入式 Java 应用程序中编译 Groovy 脚本（Groovy 应该能够访问该应用程序中的类等）

4.  当该脚本想要使用已编译的 Groovy 时（如使用 dll 的项目），稍后在另一个脚本编译期间加载该脚本。加载时，Groovy 脚本将运行并生成特定于用户项目的代码（还记得打印语句吗？）。

为什么我要编译它？当最终用户在项目中使用这些外部资源（本质上是 dll）时，不需要一遍又一遍地解析它们。我希望他们处于准备就绪状态。

我的第一个想法是将 Antlr 生成的 AST 序列化为二进制，然后将其加载回来，但我意识到编译后的 Groovy 脚本会更智能。

问题是，如何保存 Groovy 在动态加载脚本时所做的编译，然后在以后加载它？

任何对答案的帮助将不胜感激=)。

# ruby - 从图像源格式化名称

> ID：16136504
> 
> 赞同：1
> 
> 时间：2013-04-21T21:40:04.283
> 
> 标签：ruby, string

我正在尝试从图像源文件中提取名称，这是字符串的格式

```
source ='<img src="/ratefinder/images/providers/NAME-1307548896.gif">' 
```

所以我尝试使用 slice(39..-1) 然后使用 split('-') 来获取名称，但我得到一个 nil 类错误。提取这个的最好方法是什么？

编辑：切片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:43:11.843

使用以下正则表达式：

```
/.*\/(.*?)-.*$/ 
```

那是：

```
name = /.*\/(.*?)-.*$/.match(source)[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:52:13.397

`source.slice(0..39)`将为您提供这部分：

```
<img src="/ratefinder/images/providers/N 
```

我想你的意思是`source.slice(39..-1)`，或者`source[39..-1]`：

```
"NAME-1307548896.gif"> 
```

然后`split`将正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:07:15.927

由于您似乎正在解析 html 和文件路径，因此您可能希望使用实际的解析器库而不是正则表达式。

```
require 'nokogiri'
require 'pathname'

source = '<img src="/ratefinder/images/providers/NAME-1307548896.gif">'
src = Pathname.new Nokogiri::HTML(source).css('img').first.attributes['src'].value
filename = src.base_name.to_s  # => "NAME-1307548896.gif" 
```

# uitableview - 在一个 ViewController 中将 UITableViewCells 设置为不同的 UITableViews

> ID：16136508
> 
> 赞同：0
> 
> 时间：2013-04-21T21:40:59.063
> 
> 标签：uitableview, grid, cell, nsindexpath

我用 iPhone 的 TableView 构建了一个 Viewcontroller。现在我尝试生成相同的内容，但按某种网格排序。它应该是 3 x 3。我生成了尺寸为 220px x 220px 的四边形，并将我的 TableView 的宽度设置为 220。

为了生成网格，我考虑再插入两个 Tableview，这将获得 3 个指定的单元格。问题只是，我的 ViewController 中有方法“cellForRowAtIndex”，我无法将单元格插入到我想要的 tableview 中。我找到了一个叫做的方法

```
[self.channelTableView2 insertRowsAtIndexPaths:0    
                              withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

但这似乎是当您处于编辑模式时将新行添加到表格视图中的方法。

我还考虑过创建一个条件，将 3 个特定列设置到每个 tableview 中，但对我来说，cellForRowAtIndexPath 方法似乎只适用于一个 TableView，你不能在其中指定任何内容。

有人知道如何解决这个问题吗？我还看到了其他创建网格的帖子，但如果我创建新视图而不是新 UITableViewCell，则无法使用旧代码。我听说过 Collection View，但它只支持 iOS 6 的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:57:10.087

我解决了这个问题。我有 3 个表格视图。他们的委托和数据源与我的 ViewController 连接。比我为这三个表创建了一个属性。在我的 cellForRowAtIndexPath 方法中，我检测到哪个 tableviewcell 将显示在特定的 tableview 中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

MyObject *anObject;
if(tableView == tableview1){

    anObject = [initializedObjects objectAtIndex:indexPath.section * 3];

}else if(tableView == tableview2){

    anObject = [initializedObjects objectAtIndex:indexPath.section * 3 + 1];
}else if(tableView == tableview3){

    anObject = [initializedObjects objectAtIndex:indexPath.section * 3 + 2];
} 
```

我还禁用了所有表格的滚动，所以它似乎是一个网格。必须在“didSelectRowAtIndexPath”中进行相同的检测，否则您将只选择对象数组中的前三个元素。（在本例中为“initializedObjects”）。

# angularjs - AngularJS：从隔离范围发送事件

> ID：16136510
> 
> 赞同：3
> 
> 时间：2013-04-21T21:41:03.270
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我想要一组可重用的小部件，可以在应用程序的任何地方使用。例如。我想要一个设置菜单和定义为嵌套自定义标签的菜单项。我希望能够将事件从菜单项或菜单发送到父上下文（父指令中的控制器或其他）。

但是我发现了一些奇怪的范围（也许我误解了一些东西）：

```
<panel title="clock">
    <clock timezone="MST"></clock>
    <clock timezone="MST"></clock>
    <clock timezone="MST"></clock>
</panel> 
```

以下示例在单击项目时不会向父指令控制器触发事件​​：http: [//jsfiddle.net/9VTfR/2/](http://jsfiddle.net/9VTfR/2/)。

但以下工作正常：http: [//jsfiddle.net/9VTfR/3/](http://jsfiddle.net/9VTfR/3/)。

此外，对于这两个选项，我在控制台中都遇到了一些奇怪的 JS 错误。

那么是否有可能在任何级别捕获事件，因为父指令也应该是父范围（不仅是父控制器），不是吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T22:56:48.837

您看到控制台的错误是因为您的小提琴中包含了两次 Angular（一次在外部资源中；一次在框架和扩展中）。

你`$scope.$on('clickObject')`没有被解雇的原因是因为你的两个指令都是兄弟姐妹并且`$emit`只向上通知

[从文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24emit)：

> 通过范围层次结构向上调度事件名称，通知已注册的侦听器。

您可以使用`$scope.$parent`（[像这样](http://jsfiddle.net/9VTfR/5/)），但这会对您的指令的结构做出一些假设。你也可以使用`$rootScope`（[像这样](http://jsfiddle.net/9VTfR/6/)），如果你不使用足够独特的事件名称，你会遇到冲突的可能性很小。

# scala - 通过 SSH 密钥身份验证的 SBT 发布不起作用

> ID：16136511
> 
> 赞同：2
> 
> 时间：2013-04-21T21:41:38.097
> 
> 标签：scala, maven, jvm, sbt, xsbt

我的问题是：为什么我不能通过 SSH 从 SBT 发布到我的服务器？

## 语境：

我正在开发一个 scala 库，我想通过 SSH（使用 SFTP 解析器）将它发布到带有 SBT v0.12.3 的远程存储库。我的项目/Build.scala SBT 设置文件的相关部分按照[https://github.com/harrah/xsbt/wiki/Resolvers](https://github.com/harrah/xsbt/wiki/Resolvers)的规定进行配置：

```
publishTo <<= version { v =>
    Some(Resolver.sftp(
        "My Repository",
        "example.com",
        "/var/www/public_html/repositories/" + (
            if (v.trim.endsWith("SNAPSHOT")) { "snapshots" } else { "releases" }
        )
    ))
},
resolvers ++= Seq(
    {
        import java.io.File
        val privateKeyFile: File = new File(sys.env("HOME") + "/.ssh/id_rsa")
        Resolver.ssh("scala-sh", "example.com") as("my-username", privateKeyFile) withPermissions("0644")
    },
    ...
), 
```

当我运行时`sbt publish`，一切都很好，直到授权，它仍然试图提示我输入登录名/密码。当我在本地运行它时，它会显示用户名/密码提示，当我尝试在 SSH 连接到机器时远程发布时，它会失败并显示`java.awt.HeadlessException`. 结果似乎是未尝试所需的私钥类型的身份验证。

这是远程会话发布尝试的日志：

```
> sbt-version
[info] 0.12.3

> publish
[info] Packaging /home/me/my-lib/target/scala-2.10.1/my-lib_2.10.1-SNAPSHOT-sources.jar ...
[info] Done packaging.
[info] Wrote /home/me/my-lib/target/scala-2.10.1/my-lib_2.10.1-SNAPSHOT.pom
[info] :: delivering :: org.example#my-lib_2.10.1;SNAPSHOT :: SNAPSHOT :: release :: Sun Apr 21 12:48:59 PDT 2013
[info]  delivering ivy file to /home/me/my-lib/target/scala-2.10.1/ivy-SNAPSHOT.xml
[info] Generating API documentation for main sources...
model contains 75 documentable templates
[info] API documentation generation successful.
[info] Packaging /home/me/my-lib/target/scala-2.10.1/my-lib_2.10.1-SNAPSHOT-javadoc.jar ...
[info] Done packaging.
[info] Packaging my-lib-SNAPSHOT.jar ...
[info] Done packaging.
[trace] Stack trace suppressed: run last *:publish for the full output.
[error] (*:publish) java.awt.HeadlessException:
[error] No X11 DISPLAY variable was set, but this program performed an operation which requires it.
[error] Total time: 35 s, completed Apr 21, 2013 12:49:33 PM 
```

它失败了，因为没有 X11 显示器。这是意外行为，因为 SBT 项目配置设置为使用私钥身份验证（见`resolvers`上文）。

到目前为止，我可以想到 2 个可能导致该问题的原因，详情如下。

## 可能原因 #1：SBT 配置错误

**我上面的配置有问题吗？**

## 可能的原因 #2：从旧版本中遇到 Ivy 错误

在撰写本文时，我使用的是最新的 SBT，0.12.3。也许 SBT 使用的 Ivy 版本太旧了。我想得越多，这种可能性似乎就越小，但我还不能排除它。

**我怎样才能知道 Ivy SBT 使用的是什么版本？**

接着..

***如果*它是旧的，有没有办法让 SBT 使用更新版本的常春藤？**

还有另一个相关问题，请参阅[ivy](https://issues.apache.org/jira/browse/IVY-783) [ssh publisher](https://stackoverflow.com/q/12486604/293064)，它引用 [0]导致.`java.awt.HeadlessExceptions`

[0] [ivy ssh 发布者](https://stackoverflow.com/q/12486604/293064)

*   “您使用的是哪个版本的 Ivy？2.0 版有一个 Jira 错误：[issues.apache.org/jira/browse/IVY-783](http://issues.apache.org/jira/browse/IVY-783)，现在应该修复。”

*   “好像我升级到 ivy 2.3 rc-2。SSH 发布工作。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:00:43.777

毕竟它可能是与 Ivy 版本相关的错误。我使用的是 SBT 0.12.2，AFAIK 使用的是 Ivy 2.0。我正在查看位于 的 Ivy 缓存，`~/.ivy2/cache/`其中 Ivy 为其已解决的依赖项创建了一堆 XML 日志文件，并且我可以`module version 2.0`在生成的每个 XML 文件中看到 Ivy。

我不知道更新 SBT 使用的 Ivy 版本的方法，但根据默认的 SBT 文档判断，一个可能的解决方案是手动升级 Ivy 并确保默认的机器范围路径指向正确的 Ivy 版本。

然后运行`sbt clean`或`sbt update`重新获取依赖项并允许 Ivy 为新的 Ivy 版本重新生成 XML 配置文件等。[更多关于SBT](https://github.com/harrah/xsbt/wiki/Library-Management)依赖管理的信息：

> 常春藤家庭目录
> 
> 默认情况下，sbt 使用标准的 Ivy 主目录位置 ${user.home}/.ivy2/。这可以在机器范围内进行配置，供 sbt 启动器和项目使用，方法是在 sbt 启动脚本（在设置中描述）中设置系统属性 sbt.ivy.home。
> 
> 例如：
> 
> ```
> java -Dsbt.ivy.home=/tmp/.ivy2/ ... 
> ```

**更新**

通过查看最新版本的 SBT Scala 源代码，再次确认版本问题。甚至 SBT 0.13 似乎也在使用 Ivy 版本 2.0.0，而不是 2.3。查看 SBT 源代码，特别是[THIS](https://github.com/sbt/sbt/blob/0.13/ivy/src/main/scala/sbt/Ivy.scala#L638)文件的最后几行。

# maven - 如何在jenkins中构建一个多模块的maven项目

> ID：16136514
> 
> 赞同：6
> 
> 时间：2013-04-21T21:42:16.490
> 
> 标签：maven, jenkins

我有一个项目结构如下：

```
ProjectParent
 - pom.xml
 ProjectApp
   -pom.xml
 ProjectAPI
   -pom.xml
 ProjectModels
   -pom.xml
 ProjectServices
   -pom.xml
 Etc.. 
```

`ProjectModels/ProjectsServices`是`ProjectAPI/ProjectApp`.

1.  我应该在 Jenkins 中创建单独的作业来分别构建每个模块吗？

2.  我创建了一个工作，`ProjectAPP`但得到以下错误（已将目标和操作设置为“全新安装”：

> [INFO] 正在扫描项目... [INFO]
> [INFO] ------------------------------------ ------------------------------------- [INFO] 构建 myproject-app 0.0.1-SNAPSHOT [信息]------------------------------------------------ ----------------------
> 
> ```
> Downloading: http://maven.springframework.org/snapshot/com/myproject/myproject-common-config/0.0.1-SNAPSHOT/myproject-common-config-0.0.1-SNAPSHOT.pom
> [WARNING] The POM for com.myproject:myproject-common-config:jar:0.0.1-SNAPSHOT is missing, 
> ```
> 
> 没有可用的依赖信息下载：[http](http://maven.springframework.org/snapshot/com/myproject/myproject-entities/0.0.1-SNAPSHOT/myproject-entities-0.0.1-SNAPSHOT.pom) ://maven.springframework.org/snapshot/com/myproject/myproject-entities/0.0.1-SNAPSHOT/myproject-entities-0.0.1-SNAPSHOT.pom [警告] com 的 POM .myproject:myproject-entities:jar:0.0.1-SNAPSHOT 丢失，没有可用的依赖信息下载：[http ://maven.springframework.org/snapshot/com/myproject/myproject-services/0.0.1-SNAPSHOT/myproject -services-0.0.1-SNAPSHOT.pom](http://maven.springframework.org/snapshot/com/myproject/myproject-services/0.0.1-SNAPSHOT/myproject-services-0.0.1-SNAPSHOT.pom) [警告] com.myproject:myproject-services:jar:0.0.1-SNAPSHOT 的 POM 丢失，没有可用的依赖信息下载：[http ://maven.springframework.org/快照/com/myproject/myproject-persistence/0.0.1-SNAPSHOT/myproject-persistence-0.0.1-SNAPSHOT.pom](http://maven.springframework.org/snapshot/com/myproject/myproject-persistence/0.0.1-SNAPSHOT/myproject-persistence-0.0.1-SNAPSHOT.pom) [警告] com.myproject:myproject-persistence:jar:0.0.1-SNAPSHOT 的 POM 丢失，没有可用的依赖信息下载：[http ://maven.springframework.org/快照/com/myproject/myproject-common-config/0.0.1-SNAPSHOT/myproject-common-config-0.0.1-SNAPSHOT.jar](http://maven.springframework.org/snapshot/com/myproject/myproject-common-config/0.0.1-SNAPSHOT/myproject-common-config-0.0.1-SNAPSHOT.jar) ...... org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 myproject-app 上执行目标：无法解析项目 com.myproject:myproject-app:war:0.0.1-SNAPSHOT 的依赖项：以下工件无法解析：com.myproject:myproject-common-config:jar:0.0.1-SNAPSHOT, com.myproject:myproject-entities:jar:0.0.1-SNAPSHOT, com.myproject:myproject-services:jar: 0.0.1-SNAPSHOT，com.myproject:myproject-persistence:jar:0.0.1-SNAPSHOT：在 org.springframework.maven 中找不到工件 com.myproject:myproject-common-config:jar:0.0.1-SNAPSHOT。快照（[http://maven.springframework.org/snapshot](http://maven.springframework.org/snapshot)）

项目父Pom

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myproject</groupId>
    <artifactId>myproject-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>

    <modules>
        <module>myproject-entities</module>
        <module>myproject-services</module>
        <module>myproject-persistence</module>
        <module>myproject-app</module>
        <module>myproject-merchant</module>
        <module>myproject-common-config</module>
        <module>myproject-api</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            ...
        </dependencies>
    </dependencyManagement>

    <repositories>      
        ...
    </repositories>

    <build>
        ...
    </build>

    <properties>
        ...

        <myproject-entities-version>0.0.1-SNAPSHOT</myproject-entities-version>
        <myproject-services-version>0.0.1-SNAPSHOT</myproject-services-version>
        <myproject-persistence-version>0.0.1-SNAPSHOT</myproject-persistence-version>
    </properties>

</project> 
```

ProjectApp Pom

```
<?xml version="1.0"?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.myproject</groupId>
        <artifactId>myproject-parent</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <artifactId>myproject-app</artifactId>
    <packaging>war</packaging>

    <version>0.0.1-SNAPSHOT</version>
    <name>myproject-app</name>
    <url>http://maven.apache.org</url>

    <dependencies>

        ...

        <dependency>
            <groupId>com.myproject</groupId>
            <artifactId>myproject-common-config</artifactId>
            <version>${myproject-common-config}</version>
        </dependency>

        <dependency>
            <groupId>com.myproject</groupId>
            <artifactId>myproject-entities</artifactId>
            <version>${myproject-entities-version}</version>
        </dependency>

        <dependency>
            <groupId>com.myproject</groupId>
            <artifactId>myproject-services</artifactId>
            <version>${myproject-services-version}</version>
        </dependency>

        <dependency>
            <groupId>com.myproject</groupId>
            <artifactId>myproject-persistence</artifactId>
            <version>${myproject-persistence-version}</version>
        </dependency>

    </dependencies>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <myproject-common-config>0.0.1-SNAPSHOT</myproject-common-config>
        <myproject-entities-version>0.0.1-SNAPSHOT</myproject-entities-version>
        <myproject-services-version>0.0.1-SNAPSHOT</myproject-services-version>
        <myproject-persistence-version>0.0.1-SNAPSHOT</myproject-persistence-version>
    </properties>

</project> 
```

我是否使用了错误的目标？我需要链接许多命令吗？即先构建其他模块？

我正在使用 Maven 3。

注意：我将目标更改为针对 ParentProject Pom 的“全新安装”，并且一切都正确构建。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:57:55.967

问题是您不能单独为`ProjectApp`模块创建项目，因为它依赖于`ProjectApp`父模块下的其他模块。如果您不将这些模块部署到您的 maven 存储库，maven 将无法在存储库或构建反应器中找到它们。

相反，您应该为父级创建作业。这将构建必要的模块。

[`also-make-dependants`](http://maven.apache.org/guides/mini/guide-multiple-modules.html)当您有工作时，您也可以使用该选项`ProjectApp`，但我对此没有任何经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T06:23:59.753

Had the same problem, and SpaceTrucker answer helped me.

Hence I just run something like:

`.../ProjectParent$ mvn -am -pl ProjectApp test`

# php - 如果存在，PHP重命名文件名将数字附加到结尾

> ID：16136519
> 
> 赞同：26
> 
> 时间：2013-04-21T21:43:06.747
> 
> 标签：php, file-upload, upload, rename, file-exists

我正在尝试在上传图像时重命名图像的文件名（如果存在），例如我的文件名是否`test.jpg`存在并且它已经存在，我想将其重命名为`test1.jpg`然后`test2.jpg`等等。使用我编写的代码更改我的文件名`test1.jpg`，然后`test12.jpg`任何有关解决此问题的建议都将非常感谢！

**PHP**

```
$name = $_FILES['picture']['name'];
$actual_name = pathinfo($name,PATHINFO_FILENAME);
$extension = pathinfo($name, PATHINFO_EXTENSION);

$i = 1;
while(file_exists('tmp/'.$actual_name.".".$extension))
{           
    $actual_name = (string)$actual_name.$i;
    $name = $actual_name.".".$extension;
    $i++;
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-21T21:47:38.613

这是我认为应该做的小修改：

```
$actual_name = pathinfo($name,PATHINFO_FILENAME);
$original_name = $actual_name;
$extension = pathinfo($name, PATHINFO_EXTENSION);

$i = 1;
while(file_exists('tmp/'.$actual_name.".".$extension))
{           
    $actual_name = (string)$original_name.$i;
    $name = $actual_name.".".$extension;
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-11T09:43:26.067

受@Jason 回答的启发，我创建了一个我认为更短且更易读的文件名格式的函数。

```
function newName($path, $filename) {
    $res = "$path/$filename";
    if (!file_exists($res)) return $res;
    $fnameNoExt = pathinfo($filename,PATHINFO_FILENAME);
    $ext = pathinfo($filename, PATHINFO_EXTENSION);

    $i = 1;
    while(file_exists("$path/$fnameNoExt ($i).$ext")) $i++;
    return "$path/$fnameNoExt ($i).$ext";
} 
```

### 例子：

```
$name = "foo.bar";
$path = 'C:/Users/hp/Desktop/ikreports';
for ($i=1; $i<=10; $i++) {
  $newName = newName($path, $name);
  file_put_contents($newName, 'asdf');
} 
```

* * *

# 新版本（2022）：

```
function newName2($fullpath) {
  $path = dirname($fullpath);
  if (!file_exists($fullpath)) return $fullpath;
  $fnameNoExt = pathinfo($fullpath,PATHINFO_FILENAME);
  $ext = pathinfo($fullpath, PATHINFO_EXTENSION);

  $i = 1;
  while(file_exists("$path/$fnameNoExt ($i).$ext")) $i++;
  return "$path/$fnameNoExt ($i).$ext";
} 
```

### 用法：

```
for ($i=1; $i<=10; $i++) {
  $newName = newName2($fullpath);
  file_put_contents($newName, 'asdf');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-11T04:03:48.703

在上传到服务器之前，有几种方法可以在 PHP 中重命名图像。[**附加时间戳、唯一 ID、图像尺寸和随机数等。你可以在这里**](http://whats-online.info/science-and-tutorials/90/Rename-image-file-if-it-exists-before-uploading-in-PHP/)看到它们[](http://whats-online.info/science-and-tutorials/90/Rename-image-file-if-it-exists-before-uploading-in-PHP/)

 **首先，检查托管图像文件夹中是否存在图像文件名，否则上传。while 循环检查图像文件名是否存在并附加一个唯一的 id，如下所示...

```
function rename_appending_unique_id($source, $tempfile){

    $target_path ='uploads-unique-id/'.$source;
     while(file_exists($target_path)){
        $fileName = uniqid().'-'.$source;
        $target_path = ('uploads-unique-id/'.$fileName);
    }

    move_uploaded_file($tempfile, $target_path);

}

if(isset($_FILES['upload']['name'])){

    $sourcefile= $_FILES['upload']['name'];
    tempfile= $_FILES['upload']['tmp_name'];

    rename_appending_unique_id($sourcefile, $tempfile);

} 
```

查看更多图片[**重命名策略**](http://whats-online.info/science-and-tutorials/90/Rename-image-file-if-it-exists-before-uploading-in-PHP/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-01-18T15:07:35.253

[我检查了 SO 并在这里](https://stackoverflow.com/questions/1078003/c-how-would-you-make-a-unique-filename-by-adding-a-number/24563008#24563008)找到了一个不错的 C# 答案，所以我将它移植到 PHP：

```
['extension' => $extension] = pathinfo($filePath);
$count = 0;
while (file_exists($filePath) === true) {
    if ($count === 0) {
        $filePath = str_replace($extension, '[' . ++$count . ']' . ".$extension", $filePath);
    } else {
        $filePath = str_replace("[$count].$extension", '[' . ++$count . ']' . ".$extension", $filePath);
    }
} 
```**

# apache - Apache mod_rewrite 路径名作为查询参数？

> ID：16136521
> 
> 赞同：5
> 
> 时间：2013-04-21T21:43:08.900
> 
> 标签：apache, mod-rewrite

我想使用 Apache `mod_rewrite`，以便能够将路径的每个文件夹作为特定的查询参数，例如考虑以下内容：

**基本示例**

请求的网址：`http://domain.com/shoes/prada/image-1/`

服务页面：`http://domain.com/?cid=shoes&bid=prada&pid=image-1`

在这种情况下，请求了 3 个子文件夹 ( `/shoes/`, `/prada/`then `image-1`)，因此在实际页面中传递的第一个子文件夹为`cid`，第二个为`bid`，第三个为`pid`。

**完整示例**

但是，我也希望它根据请求的子文件夹的数量来提供特定页面，例如

请求的网址：`http://domain.com/shoes/prada/`

服务页面：`http://domain.com/shop.php?cid=shoes&bid=prada`

到目前为止，我设法找到的只是基于正则表达式的匹配，`mod_rewrite`但我的路径会有很大差异，这就是为什么我希望根据访问的文件夹数量来设置条件（请注意，我对正则表达式不太好- 我认为通配符会对此有所帮助，但我不确定从哪里开始）。

对此的任何帮助将不胜感激！这很啰嗦，所以如果您需要更多信息来澄清，请告诉我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T23:29:37.767

通过一些工作，我能够调整一些正则表达式并获得我想要的工作规则集：

```
RewriteEngine on
RewriteRule ^(.*)/(.*)/(.*)/(.)?$ product.php?tid=$1&sid=$2&eid=$3 [L]
RewriteRule ^(.*)/(.*)/(.)?$ brand.php?tid=$1&sid=$2 [L]
RewriteRule ^(.*)/(.)?$ shop.php?tid=$1 [L] 
```

这与示例有点不同，但这是我最初的意图。

这允许重写 url 的最多四个文件夹深度，每个文件夹的“名称”作为参数给出，并且每个额外的深度级别将 url 重写为单独的资源，例如：

```
http://x.com/shoes/prada/2011-high-heels/ -> http://x.com/product.php?tid=shoes&sid=prada&eid=2011-high-heels 
```

[在http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)上测试

# java - com.datastax.driver.core.exceptions.InvalidQueryException 使用 Datastax Java 驱动程序

> ID：16136525
> 
> 赞同：1
> 
> 时间：2013-04-21T21:43:37.373
> 
> 标签：java, cassandra, command-line-interface, cql, datastax-java-driver

我从 CLI 中创建了这样的列族-

```
create column family profile
    with key_validation_class = 'UTF8Type'
    and comparator = 'UTF8Type'
    and default_validation_class = 'UTF8Type'
    and column_metadata = [
      {column_name : account, validation_class : 'UTF8Type'}
      {column_name : advertising, validation_class : 'UTF8Type'}
      {column_name : behavior, validation_class : 'UTF8Type'}
      {column_name : info, validation_class : 'UTF8Type'}
      ]; 
```

现在我试图使用 Datastax Java 驱动程序插入到这个列族中——

```
public void upsertAttributes(final String userId, final Map<String, String> attributes) {

String batchInsert = "INSERT INTO PROFILE(id, account, advertising, behavior, info) VALUES ( '12345', 'hello11', 'bye2234', 'bye1', 'bye2') "; 

        CassandraDatastaxConnection.getInstance().getSession().execute(batchInsert);

    } 
```

我总是遇到这个例外-

> com.datastax.driver.core.exceptions.InvalidQueryException：未配置的列族配置文件

通过这种方式，我正在尝试使用 Datastax java 驱动程序创建到 Cassandra 的连接/会话初始化-

```
private CassandraDatastaxConnection() {

    try{
    cluster = Cluster.builder().addContactPoint("localhost").build();
    session = cluster.connect("my_keyspace");           
    } catch (NoHostAvailableException e) {

            throw new RuntimeException(e);
    }
} 
```

我正在运行 Cassandra 1.2.3。我可以使用上面的代码连接到 Cassandra。我面临的唯一问题是插入时。

我想知道的是我是否可以使用 Datastax Java 驱动程序插入列族（我从 CLI 模式创建的）？一旦我尝试插入在 CLI 模式下创建的列族，我总是会遇到上述异常。

但是，如果我尝试插入到我在 中创建的另一个表中`CQLsh mode`，我可以插入到该表中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:26:36.637

My guess: your CLI columnfamilies are in a different keyspace.

# eclipse - 在 glassfish 服务器上运行 servlet 提示输入主密码并运行失败

> ID：16136526
> 
> 赞同：1
> 
> 时间：2013-04-21T21:43:46.710
> 
> 标签：eclipse, jakarta-ee, glassfish

我编写了一个简单的 HelloServlet，如下所示。

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloServlet
 */
@WebServlet("/HelloServlet")
public class HelloServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String docType =
        "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
        "Transitional//EN\">\n";
        out.println(docType +
        "<HTML>\n" +
        "<HEAD><TITLE>Hello</TITLE></HEAD>\n" +
        "<BODY BGCOLOR=\"#FDF5E6\">\n" +
        "<H1>Hello</H1>\n" +
        "</BODY></HTML>");
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

我在 Eclipse 的 Java EE 透视图中安装了 GlassFish 3.1。每当我尝试运行 servlet 并单击服务器上的“在服务器上运行”时，它会出现以下消息：

> 此域需要在启动域之前设置管理密码。请指定管理密码。启动域需要主密码。没有控制台，没有提示可能。您应该使用 --savemasterpassword=true 创建域或使用 --passwordfile 选项提供密码文件。
> 
> 命令启动域失败。

glassfish 始终有一个默认的主密码“changeit”。为什么它提示我这条消息？

![在此处输入图像描述](https://i.stack.imgur.com/s2whs.png)

# html - 覆盖所有内容的背景图片

> ID：16136528
> 
> 赞同：1
> 
> 时间：2013-04-21T21:43:58.783
> 
> 标签：html, css

我想在 iPhone/Android 的 Twitter 移动网站中实现类似于背景图像的效果（[截图](http://i.imgur.com/DJfdfYX.png)）。

当内容适合屏幕时，我的解决方案有效，但如果有滚动它会中断。

这是我正在使用的 CSS：

```
.welcome body{
  background: url(http://i.imgur.com/DQ59KbW.jpg) no-repeat top left;
  z-index: -1;
  background-clip: border-box;
  -webkit-background-clip: border-box;
  background-origin: padding-box;
  -webkit-background-origin: padding-box;
  background-size: cover;
  -webkit-background-size: cover;
}

html.welcome, .welcome body{
  height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:47:45.627

您需要将背景设置为不滚动：

```
background-attachment: fixed; 
```

回复：您的评论，将您的 CSS 更改为：

```
html { 
    background: url(http://i.imgur.com/DQ59KbW.jpg) no-repeat center center fixed; 
    -o-background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
} 
```

这将是全屏，任何大小，而不是滚动。

唯一需要注意的是，它不适用于非 CSS3 浏览器（应该适用于任何 Chrome、Firefox 3.6+、IE8+ 和 Opera 10+）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:49:47.507

你打算做什么行为？如果内容大于背景图像的高度，那么它根本就行不通。如果这是您想要实现的，您可以添加一个 position:fixed 到身体。

# jquery - jquery 不适用于 Rails 和 Foundation 4

> ID：16136537
> 
> 赞同：1
> 
> 时间：2013-04-21T21:45:00.050
> 
> 标签：jquery, ruby-on-rails, zurb-foundation

我已使用 Foundation Rails 页面上的说明将 Foundation 4 添加到现有 Rails 应用程序中。

我遇到的问题是我的自定义 jQuery 代码不适用于 Foundation。这是 application.html.haml 的 head 部分中唯一的 javascript 代码行：

```
= javascript_include_tag 'application' 
```

这是 application.js 文件：

```
//= require vendor/custom.modernizr
//= require jquery
//= require jquery_ujs
//= require datepickers
//= require table_accordions
//= require jquery.validate.min
//= require form_validators
//= require text_area_maxlength
//= require s3_upload
//= require foundation
$(document).foundation(); 
```

在过去的几天里，我摆弄了这些序列的多个序列，并在网上查看了无数页面，却没有找到任何线索。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:40:13.023

如果您在 application.js 中有其他代码，则需要添加：

```
//= require_self 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-05T20:43:03.943

我删除了

`$(function(){ $(document).foundation(); });`

来自**application.js**并手动添加

`<script>$(document).foundation().foundation('joyride', 'start');</script>`

就在**application.html.erb**文件中的结束 body 标记上方，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:56:02.283

I finally figured this out.

It turns out that when I updated the bundle in my app, jquery-rails updated to jquery 1.9.1, which is incompatible with most of my custom javascripts.

I changed my jquery version back to 1.8.3, and everything works again. And the site is significantly improved with Foundation.

# java - 休眠映射更改未生效

> ID：16136547
> 
> 赞同：0
> 
> 时间：2013-04-21T21:45:57.077
> 
> 标签：java, hibernate, oracle11g

我有一个使用 Hibernate 和外部 XML 映射文件的项目。我从 MySQL 切换到 Oracle。我的一些字段的名称为“日期”，这在 MySQL 中可以，但在 Oracle 中不行。它不喜欢 `<property name="date" column="date" type="string" />` 所以我将其更改为 `<property name="sdate" column="sdate" type="string" />` 当我重新运行代码以生成架构时，它仍然遵循旧版本的映射文件并且没有考虑新的更改。我什至创建了一个类似但不同的 xml 文件，并将我的 Hibernate 配置指向这个新文件，它也有同样的问题。

有谁知道为什么它可能会遵循我的映射文件的旧版本并拒绝遵循我的更新？

# php - 我对按日期排序有疑问。不返回任何值

> ID：16136548
> 
> 赞同：0
> 
> 时间：2013-04-21T21:46:02.713
> 
> 标签：php, mysql, pdo

我目前遇到的问题是 ORDER BY 日期。出于某种原因，每当我尝试按日期对其进行排序时，它什么都不返回，我的 MySQL 列是日期数据类型。不知道为什么会这样。我试图尝试将数据类型更改为日期时间，但没有奏效。当我按我的任何其他字段（无论是 varchar、decimal 或 int）对其进行排序时，它都可以正常工作。

感谢您提供错误处理选项的常识。我回去这个。SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“Release”附近使用正确的语法

```
function getAllGames() { //Returns all database values, sorted by name then score.
    try {
        $db = getDBConnection();
        $query = "SELECT * FROM game ORDER BY Release";
        $statement = $db->prepare($query);
        $statement->execute();
        $results = $statement->fetchAll();
        $statement->closeCursor();
        return $results;           // Assoc Array of Rows
    } catch (PDOException $e) {
        $errorMessage = $e->getMessage();
        include '../view/errorPage.php';
        die;
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:02:34.390

问题源于“ `release`”是MySQL中的保留字。（在此处查看完整列表：[https](https://dev.mysql.com/doc/refman/5.6/en/reserved-words.html) ://dev.mysql.com/doc/refman/5.6/en/reserved-words.html ）

根据上面的链接，您可以通过将单词括在反引号中来避免此问题，如下所示：

```
$query = "SELECT * FROM game ORDER BY `Release`"; 
```

或者，如果这可能会导致进一步的维护问题，您可能希望简单地重命名该列。（'release_date' 或类似的可能？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:04:00.363

`Release`是 SQL/MySQL 中的关键字，尝试将列名更改为不同的名称。

# eclipse - 将 ANTLR 与 Eclipse 和 ANTLR IDE 一起使用：无法添加 ANTLR jar '无效的 ANTLR home 原因：无法创建包'

> ID：16136549
> 
> 赞同：0
> 
> 时间：2013-04-21T21:46:10.690
> 
> 标签：eclipse, antlr, antlrv3ide

我正在尝试将 ANTLR 与 Eclipse（ANTLR 版本 3.5，Eclipse Juno）一起使用，按照此处的设置步骤安装 ANTLR IDE 插件：http: [//vimeo.com/8001326](http://vimeo.com/8001326) 但是，在添加 ANTLR 包时，我收到错误“无效的 ANTLR 主页原因：无法创建包”。单击详细信息给出：'无法创建包 java.io.IOException：无法运行程序“D：bin\java”：CreateProcess 错误 = 2，系统找不到指定的文件'我也尝试了这个页面，但它没有帮助：[http ://antlrv3ide.sourceforge.net/doc/gettingstarted/basictutorial/definingapackage.html](http://antlrv3ide.sourceforge.net/doc/gettingstarted/basictutorial/definingapackage.html)

有什么建议么？

# c++ - 函数“未在此范围内声明”

> ID：16136551
> 
> 赞同：0
> 
> 时间：2013-04-21T21:46:18.650
> 
> 标签：c++

我是 C++ 新手，遇到了初学者的错误：

> myclass.cpp：在函数'int main（）'中：
> myclass.cpp：14:16：错误：'func'未在此范围内声明

这是代码：

```
#include <iostream>
using namespace std;

class MyClass{
public:
    int func(int);
};

int MyClass::func(int a){
    return a*2;
}

int main(){
    cout << func(3);
} 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:47:10.437

```
int main(){
    cout << func(3);
} 
```

`func`不是全局函数；它是类的成员函数。你需要一个类的实例来访问它。

例如：

```
int main()
{
   MyClass obj;
   std::cout<< obj.func(3);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T21:47:28.373

`func`是成员函数，所以必须通过对象调用。例如：

```
int main()
{
    MyClass obj;

    std::cout << obj.func(3); // 6
} 
```

在您的示例中，您将其视为自由函数，因此编译器会查找具有该名称的函数。由于找不到它，它发出了编译器错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T21:47:30.813

`func`是 的成员函数`MyClass`。要调用它，您需要一个`MyClass`类型的对象来调用它：

```
int main(){
    MyClass m; // Create a MyClass object
    cout << m.func(3);
} 
```

或者，您可以创建`func`一个`static`成员函数，这意味着它不与该类的任何特定实例相关联。但是，您仍然需要将其名称限定为属于`MyClass`该类：

```
class MyClass{
public:
    static int func(int);
};

int MyClass::func(int a){
    return a*2;
}

int main(){
    cout << MyClass::func(3);
} 
```

# knockout.js - 使用 Knockout 获取组合框中所选值的 id

> ID：16136552
> 
> 赞同：3
> 
> 时间：2013-04-21T21:46:47.713
> 
> 标签：knockout.js

我想在淘汰赛中获取组合框中所选索引的 ID 是否有可能？

```
<select id="lstEntreprisesCbx" data-bind="options:Entreprises,
                        optionsText: 'NomEntreprise',
                        optionsCaption: '-- Nouvelle Entreprise --'">
</select> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:02:28.750

您可以使用`selectedIndex`select 元素的属性来找出当前选择的选项。

如果你想把它放在一个绑定处理程序中，你可以这样：

```
ko.bindingHandlers.selectedIndex = {
    init: function(element, valueAccessor) {
        ko.utils.registerEventHandler(element, "change", function() {
             var value = valueAccessor();
            if (ko.isWriteableObservable(value)) {
               value(element.selectedIndex);   
            }
        });
    }
}; 
```

这假设您将它绑定到一个可观察对象（如果您想绑定一个不可观察对象，那么它需要更多代码）并且您可以像这样使用它：

```
<select id="lstEntreprisesCbx" data-bind="options:Entreprises,
                        optionsText: 'NomEntreprise',
                        optionsCaption: '-- Nouvelle Entreprise --',
                        selectedIndex: myIndex">
</select> 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/K6SZQ/](http://jsfiddle.net/rniemeyer/K6SZQ/)

# 更新

我读过这个问题，因为它特别想要`selectedIndex`当前选择的值，这可能是错误的。如果您真的想获得类似于`id`当前选定对象的东西，那么您可以将`value`绑定与`optionsValue`选项一起使用。它看起来像：

```
<select id="lstEntreprisesCbx" data-bind="options:Entreprises,
                        optionsText: 'NomEntreprise',
                        optionsCaption: '-- Nouvelle Entreprise --',
                        value: selectedId,
                        optionsValue: 'id'">
</select> 
```

因此，您指定在绑定中更新哪个值以及在`value`绑定中使用哪个属性（作为字符串）`optionsValue`。如果您省略`optionsValue`，那么它将`value`用整个对象填充您。如果您的选项数组只是原始值，这也是您将使用的。

示例：http: [//jsfiddle.net/rniemeyer/3LyLs/](http://jsfiddle.net/rniemeyer/3LyLs/)

# c++ - 为什么 main 前面有一个 int ，为什么我的教授可以排除它？

> ID：16136556
> 
> 赞同：1
> 
> 时间：2013-04-21T21:47:11.333
> 
> 标签：c++, c, visual-studio-2010, visual-c++

所以在我教授的幻灯片中，他只是简单地举了一些例子：

```
main()
{...
} 
```

正确的？但是当我把它放在visual studio中时它会出错，当我把int放在main前面时它就可以工作。 **为什么我的教授不把 int 放在 main 前面？** main 可以是任何其他类型的变量吗？我也看到很多 int main(void)。为什么这是必要的？可以将其他任何内容作为参数放入吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T21:51:54.353

`main`返回`int`。在旧版本的 C 中，您可以省略`int`，编译器会假装您说过`int`。在 C++ 中，如果 'main' 没有显式返回值，它会神奇地返回 0。您可以从`main`0、EXIT_SUCCESS 和 EXIT_FAILURE 返回三个值。0 相当于 EXIT_SUCCESS。`<stdlib.h>`如果您在 C++ 中编码，则在中定义这两个命名值`<cstdlib>`。

这`void`是一个 C 风格的声明，一个函数不带参数。在 C++ 中你不需要它；声明中没有参数的函数不接受任何参数。

但是，通常`main`需要两个参数：

```
int main(int argc, char *argv[]) 
```

这些是命令行参数。`argc`是参数的数量，并且`argv`是指向包含参数的 C 样式字符串的指针数组。第一个字符串 ( `argv[0]`) 是程序的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T21:50:21.017

因为您使用的是：C++ 或 C99 或 C11。

C89 有一个隐含的`int`规则，它`main()`等同于`int main()`. 这在 C++ 中不存在，并且自 C99 以来不再存在。

正如您所提到的，您使用的是 Visual Studio，它不支持 C99 和 C11，您可能正在使用 C++ 编译器而不是 C 编译器编译程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:57:30.370

`main`传统上，函数的标准形式是

```
int main(int argc, char **argv) 
```

前面`int`的 表示`main`函数返回一个`int`，也就是 的退出码`main`。操作系统传入的边界，`argc`与`argv`命令行参数相关。`argc`是一个`int`指示传递给程序的参数数量，包括程序的名称。并`argv`指向个别论点。您可以使用`argv[index]`它们来访问它们。有几个方便的库用于解析参数，例如 getopt。

# php - 数组函数到图像列表

> ID：16136566
> 
> 赞同：0
> 
> 时间：2013-04-21T21:48:08.867
> 
> 标签：php

我正在使用 WordPress 和高级自定义字段，并且我想显示 3-6 个图像，具体取决于在 Select field 帖子类型上选择了哪些字段。

我有它，因此值/变量与图像名称相关联，因此它将显示根据您的选择选择的图像。

例如“红色：红色”

```
<img src="example.com/images/image-<?php the_field(color) ?>.jpg" alt="<?php the_field(color) ?>"> 
```

Now the noob question is, when more than one field is selected, it returns an array (ie red, green, black.) and I can't really have the function output as an array since it won't match the image name.

有谁知道如何为多个图像输出分离一个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:05:13.030

```
foreach ($image_list as $image) {
    printf('<img src="example.com/images/image-%s.jpg" alt="%s" />', $image['color'], $image['color']);
} 
```

如果您没有关联的数组，而只是一个简单的数组，您可以这样做：

```
foreach ($gem_colors as $color) {
    printf('<img src="example.com/images/image-%s.jpg" alt="%s" />', $color, $color);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T21:52:46.430

就像是：

```
<?php foreach($imageArray as $row): ?>
    <img src="example.com/images/image-<?php echo $row['color']; ?>.jpg" alt="<?php echo $row['color']; ?>">
<?php endforeach; ?> 
```

# jquery - Nivo Slider 在静态 HTML 网站上工作，但不在基于 WP 的网站上

> ID：16136576
> 
> 赞同：1
> 
> 时间：2013-04-21T21:49:50.290
> 
> 标签：jquery, wordpress, nivo-slider

我正在为客户端将静态 HTML 站点转换为 Wordpress，但在让 Nivo 滑块工作时遇到问题。

它在 HTML 版本上完美运行，[可以在这里看到，](http://www.drivelinelandrover.co.uk/)[但](http://www.robotwp.com/fullphat/driveline/)在 Wordpress 版本上，它似乎没有显示任何图像。

Wordpress 版本的脚本正在注册，因为它将一些样式应用于 .slider 元素，但幻灯片图像始终设置为 display:none。

有人有什么想法吗？

编辑;

HTML 版本使用这个；

```
$(window).load(function() {
$('.slider').nivoSlider({
    effect:'fade', //Specify sets like: 'fold,fade,sliceDown'
    slices:40,
    directionNav:false, //Next and Prev
    controlNav:false //1,2,3...

}); 
```

并且 WP 版本使用这个；

```
jQuery(document).ready(function ($) {

    $('.slider').nivoSlider({
        effect:'fade', //Specify sets like: 'fold,fade,sliceDown'
        slices:40,
        directionNav:false, //Next and Prev
        controlNav:false //1,2,3...

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:06:41.667

您缺少静态版本中的 jquery.min.js 文件。确保添加下面的行

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script> 
```

如果将上面的行插入到您的页脚中，则添加上面的行似乎只能解决问题：

```
<script type='text/javascript' src='http://www.terrafirma4x4.com/tfplugin/tfplugin-latest-jquery.js?ver=3.5.1'></script> 
```

# windows-phone-7 - Phonegap 构建 Windows Phone 更改引脚以开始文本

> ID：16136579
> 
> 赞同：0
> 
> 时间：2013-04-21T21:50:14.137
> 
> 标签：windows-phone-7, cordova, build

所以我一直在用phonegap build 构建一个windows phone 应用程序。我正在使用 config.xml 文件。有谁知道如何更改引脚以开始文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T10:03:53.917

这可能与 Phonegap Build 无关，但我在本地构建 WP8 应用程序时遇到了完全相同的问题。我发现改变这种情况的唯一方法是执行以下操作：

1.  在您的Phonegap 项目中，在文本编辑器中打开**platforms\wp8\Properties\WMAppManifest.xml 。**
2.  更改**Title**的值。
3.  取消固定应用程序，然后重新固定。现在应该更新标题。

这感觉不是正确的方法，但更改 PhoneGap config.xml 似乎没有任何区别。

# shell - 运行 shell 脚本时出错

> ID：16136581
> 
> 赞同：0
> 
> 时间：2013-04-21T21:50:18.267
> 
> 标签：shell

我写了一个脚本来检查 ntp 服务。它更新它，然后启动服务。

我在下面的脚本中做了三件事：

1.  检查服务是否配置正确并且它正在运行。然后，只需退出脚本。即什么也不做。
2.  如果服务配置正确，则只需启动服务并退出脚本。
3.  如果服务没有配置，则停止服务->配置服务->启动服务。

从上述场景中，场景 1 和场景 3 工作正常。但是在测试场景 2 时，它会引发以下错误：

> ~ # sh ntpConfigure.sh ntpConfigure.sh: line 3: NTP_CONF.BAK=/etc/ntp.conf.backup: not found ntpd is not running /etc/init.d/ntpd is NOT running server time.myCompany.com / etc/ntp.conf 已配置服务已配置，正在启动 ntp 服务正在启动 ntpd ntpConfigure.sh：第 77 行：echo 服务已成功启动：未找到

知道为什么会抛出此错误吗？我检查了所有内容，但我的代码看起来不错。功能适用于上述错误。有任何想法吗？

# 代码：

```
#VERIFY_NTPQ="/bin/ntpq -p"
NTP_CONF="/etc/ntp.conf"
NTP_CONF.BAK="/etc/ntp.conf.backup"
NTPQ_SERVICE="/etc/init.d/ntpd"
TOUCH="/bin/touch"
GREP="/bin/grep"
CP="/bin/cp"
CHKCONFIG="/bin/chkconfig"

$NTPQ_SERVICE status
if [ $? -eq 0 ]
then
        isSERVICE_RUNNING=true
        echo "$NTPQ_SERVICE is running"
else
        isSERVICE_RUNNING=false
        echo "$NTPQ_SERVICE is NOT running"
fi

$TOUCH $NTP_CONF
$GREP "server" $NTP_CONF
if [ $? -eq 0 ]
then
        isSERVICE__CONFIGURED=true
        echo "$NTP_CONF is configured"
else
        isSERVICE__CONFIGURED=false
        echo "$NTP_CONF is NOT configured"
fi

if $isSERVICE_RUNNING && $isSERVICE__CONFIGURED
then
        echo "ntp service is already configured, nothing to do"
        exit 0
elif $isSERVICE__CONFIGURED
then
        echo "Service is configured already, starting ntp service"
        $NTPQ_SERVICE start
        if [ $? -eq 0 ]
        then
                echo" Service is started successfully"
                exit 0
        else
                echo "Failed to start service"
                exit 1
        fi
else
        echo "$NTP_CONF not configured, Configuring $NTP_CONF"
        echo "Stopping ntp service "
        $NTPQ_SERVICE stop
        echo "Taking backup of $NTP_CONF file to $NTP_CONF.BAK"
        $CP $NTP_CONF $NTP_CONF.BAK
        echo "Updating $NTP_CONF file with the required configurations"
        echo "restrict 127.0.0.1" >  $NTP_CONF
        echo "restrict default kod nomodify notrap" >>  $NTP_CONF
        echo "driftfile /etc/ntp.drift" >>  $NTP_CONF
        echo "server time.myCompany.com" >> $NTP_CONF
        if [ $? -eq 0 ]
        then
                echo "$NTP_CONF is configued properly"
                echo "Starting ntp service"
                $NTPQ_SERVICE start
                 if [ $? -eq 0 ]
                 then
                        echo "ntp service configured and started successfully"
                        echo "Configuring ntp service to start at bootup"
                        $CHKCONFIG ntpd on
                        exit 0
                 else
                        echo "Failed to start ntp service"
                        exit 1
                 fi
        else
                echo "Failed to configure ntp service"
                exit 1
        fi
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:56:35.790

你拼错了一个命令： `echo"`应该`echo "`在第 77 行。

# iphone - 无法将应用程序迁移到 iphone5 视网膜 4

> ID：16136586
> 
> 赞同：1
> 
> 时间：2013-04-21T21:50:31.690
> 
> 标签：iphone, ios, objective-c

我已经将一些应用程序迁移到 iPhone5，但使用这个我无法解决它。我遵循相同的步骤，但现在我没有 xib 布局来设置窗口的自动调整大小，因为 TabBarViewController 以编程方式定义为 rootController。我总是得到恼人的黑色前杠和顶杠。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    tabBarController = [[UITabBarController alloc] init];

    NSArray *viewControllers = [NSArray alloc];

    viewControllers = [NSArray arrayWithObjects: nil];

    // Attach them to the tab bar controller
    [self.tabBarController setViewControllers:viewControllers animated:NO];

    // Put the tabBarController's view on the window.
    [window addSubview:[self.tabBarController view]];

    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyWindow];

    self.splashController = [[splashViewController alloc] initWithNibName:@"splashViewController" bundle:nil aidioma:self.idioma];
    [self.window addSubview:[splashController view]];
    [self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:11:59.303

要启用 4 英寸显示器支持，您需要在项目的根目录中添加一个名为**`Default-568h@2x.png`**.

很容易弄清楚，对吧？:)

# ruby-on-rails - Rails 拒绝在名为“授权”的列中存储值

> ID：16136588
> 
> 赞同：0
> 
> 时间：2013-04-21T21:50:34.450
> 
> 标签：ruby-on-rails, ruby, model

我已经花了几个小时在 Rails 的数据库列中存储一个字符串。

我必须重命名`authorization`为，`transaction`以便 Rails 存储该值。

为什么 Rails 在保存值的同时会干扰？

例子：

```
# Works
self.update_attribute(:transaction, result) rescue nil

# Does not work
self.update_attribute(:authorization, result) rescue nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:56:52.243

你的底层数据库是什么？**它可能具有“授权”作为保留字。**

查看生成的 sql 并将其直接运行到您的数据库中。如果它运行没有问题，那么我的假设是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:07:41.427

mySQL 和 SQLserver 都使用授权作为保留字。

所以你只需要使用不同的词。

您也可以使用类似“授权”或“身份验证”的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:33:39.030

也许尝试使用表名为列添加前缀？例如：

```
UPDATE my_table
SET my_table.authorization = "new authorization"
WHERE id = 5 
```

# ios - Recover signing certificate without p12 password?

> ID：16136589
> 
> 赞同：7
> 
> 时间：2013-04-21T21:50:39.893
> 
> 标签：ios, keychain, ios-provisioning

I've been handed an iOS app codebase, which I'd like to distribute via the existing Enterprise certificate used by the prior developer.

After importing the provided .mobileprovision file, I'm (not unsurprisingly) getting the "Valid signing identity not found" error. Specifically when building:

```
The identity '[name]' doesn't match any valid, non-expired certificate/private key pair in your keychains 
```

I was given the original CertificateSigningRequest.certSigningRequest file, a .p12 file, and the .cer file. I was not given the password to the .p12 file.

Is it possible to rebuild what I need from the CertificateSigningRequest.certSigningRequest without the .p12 file's password? I can likely get the .p12 password, but not in a timely manner.

Thanks!

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-29T04:21:21.507

我认识到您已经通过获取 .p12 文件的密码解决了您的问题，但我想我会稍微说明一下您提到的每个文件中的内容，以便任何人在未来。

要回答这个问题中的主要问题：*我可以从 CertificateSigningRequest.certSigningRequest 文件中重建我需要的内容吗？*

遗憾的是，答案是非常坚定的“不”。其根本原因是公钥基础设施 (PKI) 的核心，这是一组管理技术、人员和实践，用于处理数字证书的创建、验证、使用和撤销。PKI 的核心是公私密钥对的概念。“公共”密钥是您广泛共享的密钥，任何人都可能拥有它的副本，任何希望验证由数字证书签名的消息的人都需要访问此密钥。“私人”密钥是只有您（或更准确地说，您的机器）在签署消息时知道和使用的链接密钥。正是此签名通过使用广泛共享的“公共”密钥进行验证，从而验证消息实际上是真实的。

当我们构建开发或分发证书时，我们本质上是要求 Keychain Access、openssl 或您首选的 SSL 工具链来创建一个公私密钥对。公钥与姓名和电子邮件地址等其他“主题”字段一起进入 CertificateSigningRequest 文件，我们将此文件发送给 Apple。该文件主要告诉苹果他们可以使用什么**公钥**来验证你的应用程序签名——毕竟它**不会给他们你的****私钥**的副本，如果其他人有你的私钥，他们就可以在你有效地销毁iOS 平台上的责任概念（例如，此应用程序的签名检查为有效，但我仍然不知道它是否*真的有效*由我信任的开发人员签名...）。在任何时候，您的私钥都不会传输到 Apple 或 Developer Portal；它非常愉快地驻留在您的钥匙串中，直到 1) 证书过期，2) 您主动从开发人员门户中撤销证书，或 3) 您意外（或有意）从钥匙串中删除密钥对。

**那么，每个文件中都有什么？**

**CertificateSigningRequest.certSigningRequest** - 这包含您在本地生成的公钥-私钥对中的公钥副本，以及证书签名请求格式所需的一些附加主题信息。Apple 会忽略这些附加信息，并在构建您的证书时使用他们为您的开发者帐户存档的姓名和电子邮件地址。

**.p12** - 这是一个 PKCS#12 格式的文件，其中包含 Apple 颁发的证书的副本（它本身包含公钥）和链接的私钥的副本。此数据被加密以防止未经身份验证的访问，因此需要密码才能解密。

**.cer** - 这是 Apple 颁发的证书，包含密钥对的公钥部分。Apple 使用此证书来验证您提交的应用程序在传输到 App Store 审核团队的过程中没有被篡改：

*   您使用只有您知道的私钥对您的应用程序进行签名，并将签名的二进制文件上传到 Apple。
*   然后，Apple 使用您已经与他们共享的公钥验证签名。

    *   如果数学计算成功，那么应用程序没有被篡改，你可以开始了。
    *   如果数学不成立，要么应用程序被篡改，要么（更有可能）证书被撤销或重新生成，并且应用程序使用旧的或不正确的密钥对进行签名。

如您所见，私钥所在的唯一位置是原始开发人员的钥匙串以及加密的 .p12 文件中。根据您的评论和 Flup 的评论，您要么必须获取该 .p12 文件的密码，要么考虑突破加密。

无论如何，很高兴听到您能够从原始开发人员那里获得密码。如果您有任何后续问题，请告诉我。

# c# - Cannot implicitly convert type 'System.Collections.Generic.List ' to 'string[]'

> ID：16136596
> 
> 赞同：-4
> 
> 时间：2013-04-21T21:51:17.537
> 
> 标签：c#, asp.net, web-services, casting

Below is my code which gives an error: **Cannot implicitly convert type 'System.Collections.Generic.List' to 'string[]'**

I tried several times to solve the error. But I failed to do so. if any body can suggest what could be the solution.. Thanks :)

```
public GetContentResponse GetContent(abcServiceClient client, QueryPresentationElementIDsResponse querypresentationelementresponse)
        {
            GetContentRequest GetContentRequest = new GetContentRequest();
            GetContentResponse contentresponse = new GetContentResponse();
            querypresentationelementresponse = presentationElementId(client);
            List<string[]> chunks = new List<string[]>();
            for (int i = 0; i < querypresentationelementresponse.IDs.Length; i += 25)
            {
                chunks.Add(querypresentationelementresponse.IDs.Skip(i).Take(25).ToArray());
                contentresponse = client.GetContent(new GetContentRequest()
                {
                    IDs = chunks // here i get this error
                });
            }

            return contentresponse;
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T21:54:23.343

您正在尝试将 List 分配给字符串数组。将列表转换为数组。由于您没有确切指定错误的位置，我想是在您分配 IDs 变量时。

以下代码将解决它：

```
public GetContentResponse GetContent(abcServiceClient client, QueryPresentationElementIDsResponse querypresentationelementresponse)
        {
            GetContentRequest GetContentRequest = new GetContentRequest();
            GetContentResponse contentresponse = new GetContentResponse();
            querypresentationelementresponse = presentationElementId(client);
            List<string> chunks = new List<string>();
            for (int i = 0; i < querypresentationelementresponse.IDs.Length; i += 25)
            {
                chunks.AddRange(querypresentationelementresponse.IDs.Skip(i).Take(25));
                contentresponse = client.GetContent(new GetContentRequest()
                {
                    IDs = chunks.ToArray()
                });
            }

            return contentresponse;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:56:35.693

我不确定什么类型的 ID 是什么或哪一行给了你这个错误，但如果我不得不猜测，我认为它的`IDs = chunks`.

听起来您正在尝试将列表转换为字符串数组。您需要使用 toArray() 的方法进行转换。

编辑：好的，你有一个字符串数组。你需要抓住正确的一个：

```
IDs = Chunks.ToArray()[index] 
```

其中 index 是正确的数组。对您正在使用的库不是很熟悉，所以很遗憾我无法详细说明。但是，为了大胆猜测，请尝试使用`i`代替`index`.

# java - Local Java Application - Database Selection

> ID：16136601
> 
> 赞同：1
> 
> 时间：2013-04-21T21:51:31.937
> 
> 标签：java, database, jdbc, local

I'd like to ask for your opinion on local databases for a java application i'm developing.

Its veterinary application, meaning I'll need to store Customer, Pet and Medical History details for a start. I know how to use JDBC but I've only used it online in applets.

So, I really dont know much about local solutions and how those gonna work when I'll publish the application in a .jar, so please guide me. Would MySQL still work?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:49:54.637

这是一个相当笼统的问题，而且对细节很清楚，MySQL 听起来好像可以在这里工作。如果这是仅用于本地访问并且不需要典型的客户端-服务器模型，那么我鼓励研究可以直接在 JVM 中加载的数据库引擎。好处之一是无需安装任何单独的数据库组件，整个数据库引擎的 JAR 可以打包在您的应用程序中。

以下是其中的一些：

*   [阿帕奇德比](http://db.apache.org/derby/)
*   [超SQL](http://hsqldb.org/)
*   [H2](http://www.h2database.com/html/main.html)
*   SQLite - 一些 C 库周围的 Java 包装器可用，但据我所知，没有任何纯 Java JDBC 驱动程序可用。

我意识到开发人员配置 MySQL 以供本地使用并不难，但它可能会导致最终用户出现许多支持问题。可以编写安装脚本以预先配置大量安装，但我不确定其中的详细信息，这将是您在打包应用程序时需要解决的附加项目。

下面显示了一些关于为此使用 MySQL 的一般问题。这可能是最好的方法，但这些只是需要考虑的一些事情。其中大多数并不是真正特定于应用程序的开发，而是更多地用于支持方面。利用上面提到的数据库引擎可以消除所有或许多这些。

*   多台计算机是否都必须同时连接到同一个数据库？
*   你使用什么 MySQL 密码？
*   您是否建议最终用户都使用可能不太安全的同一个？
*   或者最终用户是否需要创建一个，在这种情况下您可能需要处理忘记的密码并且最终用户必须在您的应用程序中配置密码？
*   您的最终用户是否运行可能会干扰数据库连接的防病毒软件？
*   如果他们有另一个使用 MySQL 的程序已经在使用默认端口怎么办？

# c++ - 将具有相同键的节点添加到属性树

> ID：16136605
> 
> 赞同：7
> 
> 时间：2013-04-21T21:51:44.120
> 
> 标签：c++, xml, boost

我正在使用 Boost 的属性树来读写 XML。使用我制作的电子表格应用程序，我想将电子表格的内容保存到 xml。这是一项学校作业，因此我需要对 XML 使用以下格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<spreadsheet>
   <cell>
      <name>A2</name>
      <contents>adsf</contents>
   </cell>
   <cell>
      <name>D6</name>
      <contents>345</contents>
   </cell>
   <cell>
      <name>D2</name>
      <contents>=d6</contents>  
   </cell>
</spreadsheet> 
```

对于我写的一个简单的测试程序：

```
int main(int argc, char const *argv[])
{
boost::property_tree::ptree pt;

pt.put("spreadsheet.cell.name", "a2");
pt.put("spreadsheet.cell.contents", "adsf");

write_xml("output.xml", pt);

boost::property_tree::ptree ptr;
read_xml("output.xml", ptr);

ptr.put("spreadsheet.cell.name", "d6");
ptr.put("spreadsheet.cell.contents", "345");
ptr.put("spreadsheet.cell.name", "d2");
ptr.put("spreadsheet.cell.contents", "=d6");

write_xml("output2.xml", ptr);

return 0;
} 
```

基于这个[问题](https://stackoverflow.com/questions/15413022/how-to-create-xml-using-boost-property-tree)，我看到该`put`方法替换了该节点上的任何内容，而不是添加新的。这正是我所看到的功能：

**输出.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<spreadsheet>
  <cell>
    <name>a2</name>
    <contents>adsf</contents>
  </cell>
</spreadsheet> 
```

**输出2.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<spreadsheet>
  <cell>
    <name>d2</name>
    <contents>=d6</contents>
  </cell>
</spreadsheet> 
```

查看[文档](http://www.boost.org/doc/libs/1_43_0/doc/html/boost/property_tree/basic_ptree.html#id906314-bb)，我看到了这种`add_child`方法`Add the node at the given path. Create any missing parents. If there already is a node at the path, add another one with the same key.`

我不太清楚如何使用该`add_child`方法，有人可以解释如何使用它吗？

有没有更好的方法来实现我想要的文件格式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T22:54:15.543

`add_child`成员函数允许您将一个作为子节点插入到`property_tree`另一个的 DOM 中。如果您提供的密钥路径已经存在，则会添加一个重复的密钥，并将子项插入其中。如果我们稍微改变一下你的例子，我们可以检查结果。

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>

int main()
{
    // Create the first tree with two elements, name and contents
    boost::property_tree::ptree ptr1;
    ptr1.put("name", "a2");
    ptr1.put("contents", "adsf");

    // Create the a second tree with two elements, name and contents
    boost::property_tree::ptree ptr2;
    ptr2.put("name", "d6");
    ptr2.put("contents", "345");

    // Add both trees to a third and place them in node "spreadsheet.cell"
    boost::property_tree::ptree ptr3;
    ptr3.add_child("spreadsheet.cell", ptr1);
    ptr3.add_child("spreadsheet.cell", ptr2);

    boost::property_tree::write_xml("output.xml", ptr3);

    return 0;
} 
```

当您`add_child`第一次调用时，键“spreadsheet.cell”的节点不存在并被创建。然后它将树 (`name`和`contents`) 的内容添加到新创建的节点。当您`add_child`第二次调用时，它会看到“spreadsheet.cell”已经存在，但与`put`它不同的是，它会创建一个也称为“cell”的同级节点并将其插入到同一位置。

最终输出：

```
<?xml version="1.0" encoding="utf-8"?>
<spreadsheet>
  <cell>
    <name>a2</name>
    <contents>adsf</contents>
  </cell>
  <cell>
    <name>d6</name>
    <contents>345</contents>
  </cell>
</spreadsheet> 
```

# python - 如何制作一个包含来自另一个 DataFrame 的一半数据的 DataFrame，均匀分布在列中的值之间？

> ID：16136606
> 
> 赞同：3
> 
> 时间：2013-04-21T21:51:46.907
> 
> 标签：python, pandas

我正在尝试对数据集进行一些监督机器学习。

我的数据组织在一个 DataFrame 中，样本作为行，特征作为列。我的专栏之一包含样本所属的类别。

我想将我的数据集分成两半，以便样本在类别之间均匀分布。 **是否有这样做的原生 pandas 方法，还是我必须遍历每一行并将每个样本单独分配给训练组或测试组？**

这是我的数据如何组织的说明性示例。列`char`表示每行所属的类别。

```
 feature char
0   SimpleCV.Features.Blob.Blob object at (38, 74)...    A
1   SimpleCV.Features.Blob.Blob object at (284, 26...    A
2   SimpleCV.Features.Blob.Blob object at (87, 123...    B
3   SimpleCV.Features.Blob.Blob object at (198, 37...    B
4   SimpleCV.Features.Blob.Blob object at (345, 60...    C
5   SimpleCV.Features.Blob.Blob object at (139, 92...    C
6   SimpleCV.Features.Blob.Blob object at (167, 83...    D
7   SimpleCV.Features.Blob.Blob object at (57, 54)...    D
8   SimpleCV.Features.Blob.Blob object at (35, 77)...    E
9   SimpleCV.Features.Blob.Blob object at (136, 73...    E 
```

参考上面的示例，我想最终得到两个 DataFrame，每个 DataFrame 包含每个`char`类别中一半的样本。在此示例中，每种`char`类型有两种，因此生成的 DataFrame 将分别有`A`一行、`B`一行等...

但是，我应该提到，`char`我的实际数据中每个类别的行数可能会有所不同。

首先十分感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:01:36.310

这是一种方法：

```
>>> print d
          A         B Cat
0 -1.703752  0.659098   X
1  0.418694  0.507111   X
2  0.385922  1.055286   Y
3 -0.909748 -0.900903   Y
4 -0.845475  1.681000   Y
5  1.257767  2.465161   Y
>>> def whichHalf(t):
...     t['Div'] = 'Train'
...     t[:len(t)/2]['Div'] = 'Test'
...     return t
>>> d.groupby('Cat').apply(whichHalf)
          A         B Cat    Div
0 -1.703752  0.659098   X   Test
1  0.418694  0.507111   X  Train
2  0.385922  1.055286   Y   Test
3 -0.909748 -0.900903   Y   Test
4 -0.845475  1.681000   Y  Train
5  1.257767  2.465161   Y  Train 
```

这会将每组的前半部分分配给测试集，将后半部分分配给训练集。然后，您可以通过过滤这个新的“Div”列来获得这两个集合。请注意，这仅在每个类别具有偶数个数据点时才有效。如果一个类别没有偶数个数据点，那么显然你不能将它平分为两部分。

# ruby-on-rails - 将实例变量传递给 Rails 中的 API

> ID：16136612
> 
> 赞同：0
> 
> 时间：2013-04-21T21:52:29.260
> 
> 标签：ruby-on-rails, api, instance-variables

我正在尝试传入一些实例变量来调用具有该特定对象属性的 API。用户填写他们的汽车详细信息（品牌、型号和年份），从而创建一个报价对象。这应该被传递到 Edmund 的 API 以检索该车的信息。如果我用特定的品牌/型号/年份设置代码，代码可以正常工作，但我不能让它返回创建的报价对象的信息。

这是我的控制器：

```
def show
@offer = Offer.find(params[:id])
@wanted_ad = WantedAd.find(params[:wanted_ad_id])
@make = @offer.ownermake
@model = @offer.ownermodel
@year = @offer.owneryear

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @offer }
end
end 
```

这是我的模型：

```
class Offer < ActiveRecord::Base
    attr_accessible :user_id, :wanted_ad_id, :estvalue, :image1, :offerprice, :ownercartype, :ownerdesc, :ownermake, :ownermileage, :ownermodel, :owneryear
    belongs_to :user
    belongs_to :wanted_ad
    has_one :car

    def self.carsearch
        @car = []

        carinfo = HTTParty.get("http://api.edmunds.com/v1/api/vehicle/#{make}/#{model}/#{year}?api_key=qd4n48eua7r2e59hbdte5xd6&fmt=json")
        carinfo["modelYearHolder"].each do |p|
            c = Car.new
            c.make = p["makeName"]

            return carinfo
    end 
    end
end 
```

我的车型很简单：

```
class Car < ActiveRecord::Base   
  attr_accessible :make, :model, :year 

  belongs_to :offer  
end 
```

我试图从一个视图文件中调用它`<%= Offer.carsearch %>`。我可能有点搞砸了，但这是我第一次使用 API，我很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:18:55.810

我认为您的`carsearch`方法中有几个逻辑错误：您正在获取汽车信息，遍历数组，实例化一辆新车，但`c`对象没有任何反应，并且在第一次迭代结束时，您退出了返回检索到的整个函数`carinfo`。 ..

这可能是你的意思吗？

```
def carsearch
    @cars = []

    # where do `make`, `model` and `year` come from here?
    # probably method parameters!?
    carinfo = HTTParty.get("http://api.edmunds.com/v1/api/vehicle/#{make}/#{model}/#{year}?api_key=qd4n48eua7r2e59hbdte5xd6&fmt=json")
    carinfo["modelYearHolder"].each do |p|
        c = Car.new
        c.make = p["makeName"]
        # initialize other attributes (year, model)?
        @cars << c
    end

    return @cars
end 
```

# ember.js - 在最新版本的 ember-data 中设置自定义 primaryKey 属性的正确方法是什么？

> ID：16136618
> 
> 赞同：4
> 
> 时间：2013-04-21T21:53:43.577
> 
> 标签：ember.js, ember-data

我已经看到了一些方法来做到这一点，但我很好奇“最正确”的方法是使用 ember-data rev 12 的最新版本（甚至是主版本）

选项#1（将出现最明显的方式）

```
App.Post = DS.Model.extend({
    primaryKey: '_id',
    _id: DS.attr('string')
}); 
```

选项#2（使用适配器按类型映射）

```
App.Adapter.map('App.Post', {
    primaryKey: '_id'
}); 
```

选项 #3（在序列化程序中对其进行硬编码 - 假设每个模型都有相同的自定义 pk）

```
App.MySerializer = DS.RESTSerializer.extend({
    primaryKey: function(type) {
        return '_id';
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:36:51.253

答案是选项 #2，因为适配器是相关组件。适配器需要知道哪个属性是主键。这对于模型或序列化程序并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-16T17:21:46.460

这个问题很老了，但它没有被接受的答案，它出现在我的谷歌上。

当前的答案是在序列化程序上进行设置（[https://guides.emberjs.com/v3.0.0/models/customizing-serializers/#toc_ids](https://guides.emberjs.com/v3.0.0/models/customizing-serializers/#toc_ids)）

```
// app/serializers/application.js

import DS from 'ember-data';

export default DS.JSONAPISerializer.extend({
  primaryKey: '_id'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T05:45:47.163

如该线程中所述，请尝试[https://github.com/toranb/ember-data-django-rest-adapter/issues/14](https://github.com/toranb/ember-data-django-rest-adapter/issues/14)

```
YourRestadapter.configure('App.Person', {
    primaryKey: 'slug'
}); 
```

**YourRestaapter = 您在项目中使用的其余适配器（例如，DS.RESTAdapter）**

# java - Java - 使用 JDOM 创建 Web 服务请求 - 标头问题

> ID：16136620
> 
> 赞同：1
> 
> 时间：2013-04-21T21:54:11.593
> 
> 标签：java, web-services, header, jdom

我在 Eclipse 中使用 JDOM 完成了许多集成，但我第一次遇到问题，因为我的 SOAP XML 消息应该包含`HEADER`特定元素的元素。这是我的全部信息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:agi="http://agilent.parlayx.sms">
   <soapenv:Header>
         <cppass>test</cppass>
         <cpuname>test</cpuname>
   </soapenv:Header>
   <soapenv:Body>
      <agi:sendBulkSms>
            <address>tel:3876123456</address>
      </agi:sendBulkSms>
   </soapenv:Body>
</soapenv:Envelope> 
```

我`BODY`使用这个创建了结构：

```
Element top = new Element("sendBulkSms", agi);
Document jDoc = new Document(top);

Element address = new Element("address", agi);
address.setText("tel:3876123456");
top.addContent(address); 
```

这行得通，我以前做过很多次。但是是否可以创建消息uisng JDOM 的标头元素？因为据我所知，只能定义 BODY 元素，但是我的消息对 Web 服务请求无效

谢谢，我会很感激帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:09:02.487

您只是在创建标准 XML，没有“标题”，您只有一个名为“标题”的元素，名称空间为“soapenv”。所以在我看来，它应该像创建任何其他 JDOM 元素一样。

# kineticjs - 给球增加重量

> ID：16136625
> 
> 赞同：-1
> 
> 时间：2013-04-21T21:54:28.797
> 
> 标签：kineticjs, gravity

我有一个球的重量问题。我可以应用重力和弹跳水平，但我不知道如何增加重量。我想做一个“摇滚球”和一个“橡胶球”，来比较它在视觉上的弹跳。

我编写了每半秒调用一次的函数：

```
 this.applyGravity = function(gravity, bouncingLevel){
        this.ySpeed += gravity;
        this.move(0, this.ySpeed);

        if(this.getY() + this.getHeight() > this.bottomBoundary)
        {
            this.setY(this.bottomBoundary - this.getHeight());
            this.ySpeed = 0;
            this.counter = 0;
        }
    } 
```

感谢您的帮助和时间，GAL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:54:27.307

您的“bouncingLevel”通常被称为“restitution”，适用于正在碰撞的对象。

恢复原状的范围通常为 0.0 – 1.0。

1.0 表示物体绝对有弹性——因此它在碰撞过程中不会失去速度。

0.0 表示物体在碰撞过程中失去了所有的速度——所以它“飞溅”并且根本不反弹。

以下是如何为碰撞添加恢复原状：

警告：**我没有**在下面尝试过我的代码......只是在我的脑海中 - 你可能需要调试！

```
// create a flag to tell us whether we are currently colliding
var isColliding=false;

// Create a "squash"
// When an object collides, it can get shorter/fatter
// This squash variable simulates the object as it un-squashes
var squash=0;

this.applyGravity = function(gravity, bouncingLevel){

if(isColliding){

    // un-squash the object at ySpeed
    // note: ySpeed should be negative at this point
    squash += this.ySpeed;

    // if we're all un-squashed, show the object's motion again
    if(squash<0){
        // since squash<0 the object will now rise
        // above the boundary and start moving upward
        this.setY(this.getHeight+squash);
        // all done colliding...clear the flag
        isColliding=false;
    }

    return;
}

this.ySpeed += gravity;
this.move(0, this.ySpeed);

if(this.getY() + this.getHeight() > this.bottomBoundary)
{
    // set the new after-collision speed
    this.ySpeed = -this.ySpeed*bouncingLevel;

    // set the collision flag
    isColliding=true;

    // calculate squash:
    // == how far the object's momentum carried it into the boundary
    squash = this.getY() + this.getHeight();

    // visually set the object on bottomBoundary until it "rebounds"
    // alternatively, you could let it visually fall under the boundary
    this.setY(this.bottomBoundary - this.getHeight());

    this.counter = 0;
} 
```

}

# java - 解析 XML 在 & 之后删除所有字符

> ID：16136627
> 
> 赞同：2
> 
> 时间：2013-04-21T21:54:39.800
> 
> 标签：java, android, xml-parsing, escaping

我正在创建一个解析一些 XML 并将其显示在 ListView 中的应用程序。我的 xml 中的一些项目包含`&`s 所以我已经像这样对它们进行了转义`&amp;`它在一些设备和模拟器上正常工作。

但在两台设备（Samsung Sidekick 4g API 2.2 和 Samsung Replish API 2.3.6）上它失败了。之后的一切`&amp;`都神奇地消失了。

这是 XML 中给我带来麻烦的项目：

```
<site>
    <name>English Language &amp; Usage</name>
    <link>http://english.stackexchange.com/</link>
    <about>English Language &amp; Usage Stack Exchange is a question and answer site for linguists, etymologists, and serious English language enthusiasts.</about>
    <image>https://dl.dropboxusercontent.com/u/5724095/XmlParseExample/english.png</image>
</site> 
```

这是解析代码的“肉”：

```
private static String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    Log.i("StackSites", ""+getElementValue(n.item(0)));
    return getElementValue(n.item(0));
}

private static String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
  } 
```

在某些设备（LG Optimus G、Moto Attrix 2 和一些仿真器）上，它可以正常工作并如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/ZEw2s.png)

然而，在我尝试过的两台三星设备上，`getValue()`方法只返回之前的文本，`&amp;`所以结果是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/Ydkwp.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:57:41.513

那是因为您没有查看其余节点。实体获得不同的节点，实体之后的文本获得之后的节点。您将立即返回——您需要连接您的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T22:05:30.930

这是某些 Android 版本上的[已知错误。](https://code.google.com/p/android/issues/detail?id=225)它已在 Honeycomb (3.0) 中修复。

没有好的解决方法。您需要将文本处理为`[text node] [entity node] [text node]`，自己解释实体引用，并将结果连接起来。

或者，您可以避免使用 XML 字符引用并替换您自己的转义序列。只要解析器没有看到 a `&`，就可以避免问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T22:11:01.783

CommonsWare 让我指出了正确的方向。

我将`getElementValue()`方法更改为：

```
private static String getElementValue( Node elem ) {
     StringBuilder value = new StringBuilder();
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     value.append(child.getNodeValue());

                 }
             }
             return value.toString();
         }
     }
     return "";
  } 
```

它现在可以正确获取文本的后半部分。

# php - 如何使警报在 php 中工作

> ID：16136629
> 
> 赞同：0
> 
> 时间：2013-04-21T21:54:57.360
> 
> 标签：php, http-headers, alerts

在我的 member.php 页面中，我有以下警报：

```
if (isset($_GET['success']) == 'no')
        {
            echo"<script type=\"text/javascript\">".
                "alert('You can't remove any more services! Please contact admin if you would like your account disabled');".
                "</script>";

        }        
        if (isset($_GET['success']) == 'yes') {
            echo"<script type=\"text/javascript\">".
                "alert('Your details have been updated!');".
                "</script>";

        } 
```

在 delete.php 我使用以下代码：（仅相关代码）

```
if($numJobs < 2)
                {
                    header('Location: member.php?success=no&username='.$username);
                    exit();
                } 
```

在 update.php 中，我使用以下代码：

```
if(success){
                 header('Location: member.php?success=yes&username='.$username);
                 exit ();
                } 
```

无论我如何编辑警报，警报`'Your details have been updated!'`都是执行的全部。在 URL 中我可以看到，`success = no`所以我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:56:38.117

您的第一个块有语法错误；您需要转义单引号，因为字符串是单引号。

注意这里的语法高亮：

```
alert('You can't remove any more services! Please contact admin if you would like your account disabled'); 
```

逃脱：

```
alert('You can\'t remove any more services! Please contact admin if you would like your account disabled'); 
```

*然而*，`alert`s 是：

*   恼人的
*   传达重要信息的糟糕方式

只需将消息添加为`<div>`页面中的 s，然后对它们进行样式化或使用 JavaScript 弹出它们。可访问且不那么令人沮丧！

此外，将结果`isset`与某事进行比较通常是错误的，并且您做了两次。总而言之，似乎应该这样读：

```
if (!isset($_GET['success']) || $_GET['success'] === 'no') {
    echo '<script type="text/javascript">',
         'alert("You can\'t remove any more services! Please contact admin if you would like your account disabled");',
         '</script>';
}
else {
    echo '<script type="text/javascript">',
         'alert("Your details have been updated!");',
         '</script>';
} 
```

注意我是如何在那里交换引号的；否则，您将不得不两次逃脱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:02:48.360

```
if (isset($_GET['success']) == 'no') 
```

将始终为假，因为 isset($_GET['success']) 为真或假，并且与字符串“否”相比，整个表达式将评估为假。

将其更改为

```
if (isset($_GET['success']) && $_GET['success'] == 'no') 
```

就像在对您问题的第一条评论中正确说明的 akam 一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T22:45:30.983

如果您将成功更改为 1 和 0 而不是是和否，那么您可以

```
if ($_GET['success']) 
```

# jquery - 如何获取元素名称以从中构建动态元素

> ID：16136633
> 
> 赞同：1
> 
> 时间：2013-04-21T21:55:18.247
> 
> 标签：jquery

我正在构建一个 jQuery 函数，并且需要构建将共享一个评论名称的动态元素。

```
$('#search').somefunction(); 
```

在里面，`somefunction`我将遍历所有给定的元素，然后我需要创建共享全局名称的动态元素

```
 var newName = $(this)
 $('<div id="'+newName+'originalsearch" />')
 $('<div id="'+newName+'newsearch" />') 
```

**问题**

我可以`var newName = $(this).attr('id')`，但作为一个 jquery 插件，他们可以使用任何形式的 jquery 选择器。

那么如何在不知道其类型的情况下从原始选择器中创建元素呢？

# jquery - 如何使一个 div 动画影响另一个

> ID：16136637
> 
> 赞同：0
> 
> 时间：2013-04-21T21:56:18.853
> 
> 标签：jquery

嗨，这是我正在研究的 jsfiddle 的链接：http: [//jsfiddle.net/edddotcom/7NQKU/6/](http://jsfiddle.net/edddotcom/7NQKU/6/)

这个想法是，当您单击一个图像时，它的容器会放大并显示一些文本，现在如果您然后单击第二个图像，则第一个图像应该收缩回较小的无文本状态，

我想不出一种方法可以做到，所以当单击一个图像时，除了`this`应该收缩的所有图像（如果它们处于较大状态）

我将使用超过 2 张图片，因此我需要将此规则应用于所有其他 n-1 张图片

HTML：

```
<div class="row">
    <div class="container">
        <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

    </div>
    <div class="container">
        <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

    </div>
    <div class="container">
        <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

    </div>
</div> 
```

CSS：

```
.row {
    max-width: 1500px;
}
.container {
    display: block;
    width: 200px;
    height: 116px;
    background-color: red;
    float: left;
    margin: 5px;
}
span {
    margin-top: 10px;
    margin-left: 10px;
    max-height: 100%;
    text-align: justify;
}
img {
    width:100%;
    max-width: 400px;
    min-width: 200px;
} 
```

JavaScript：

```
$(document).ready(function () {
    //ON CLICK
    $("span").hide();
    $("img").toggle(function () { //fired the first time
        $(this).parent().animate({
            //FIRSTCLICK COMMAND
            height: "400px",
            width: "400px"

        }, function () {
            $(this).children("span").show();
        });
        //Enlarges container then shows text

    }, function () { // fired the second time 
        $(this).siblings("span").hide(0, '', function () {
            $(this).parent(".container").animate({
                //SECONDCLICK COMMAND
                height: "116px",
                width: "200px"
            });
        });

    }); //Hides text then contracts container

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:29:02.790

假设您在事件处理程序中并且`this`是当前图像，您可以选择除当前图像之外的所有图像，如下所示：

```
 $(".container img").not(this) 
```

这将允许您对所有其他图像进行操作。如果在这些其他图像中，您想知道哪个是展开的，您可以检查容器大小，也可以在展开的图像上放置一个类。如果您在扩展类上放置一个特殊类，那么您可以使用自己的选择器找到扩展类：

```
$(".container.expanded") 
```

或者，检查大小：

```
$(".container").not(this).each(function() {
    if ($(this).height() > 200) {
        // this container is expanded so we need to contract it
    }
}); 
```

* * *

在您的特定代码中，看起来您可以更改：

```
$(this).siblings("span").hide... 
```

对此：

```
// within our row, find all containers except the current container
$(this).closest(".row")
    .find(".container").not($(this).closest(".container"))
    .find("span").hide... 
```

# c# - 如何计算 X 内的所有节点？

> ID：16136638
> 
> 赞同：4
> 
> 时间：2013-04-21T21:56:20.540
> 
> 标签：c#, path-finding

我正在尝试实现寻路算法，但我认为我遇到了术语问题，因为我不太确定如何解释我需要该算法做什么。

我有一个规则的节点网格，我试图找到某个“曼哈顿距离”内的所有节点。

![在此处输入图像描述](https://i.stack.imgur.com/YOQIJ.png)

找到例如 5 内的节点非常简单。

![在此处输入图像描述](https://i.stack.imgur.com/7YtFS.png)

但我对“加权曼哈顿距离”感兴趣，其中某些方格“花费”两倍（或更多）进入。例如，如果橙色方块花费 2，紫色方块花费 10，我感兴趣的图表如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/J3ffB.png)

首先，这个有术语吗？当您一开始并不完全确定事物的名称时，很难查找有关事物的信息。

其次，我如何计算哪些节点属于我的参数？我不是在寻找一个完整的解决方案，只是一些开始的提示；当我意识到我的实现需要三个`Dictionary`s 时，我开始认为可能有一种更简单的处理方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:03:01.877

对于术语，您基本上是在任意（正）加权图上要求一定距离内的所有点。使用不同的权重意味着它不再对应于特定的度量标准，例如曼哈顿距离。

至于算法，Dijkstra 的算法可能就是你想要的。基本思想是保持迄今为止您发现的每个方格的最低成本，以及接下来要探索的最佳方格的优先级队列。

与传统的 Dijkstra 不同，在找到每个方格的最小路径之前，您会一直前进，如果与节点的距离太长，您将希望停止将节点添加到队列中。完成后，您将获得所有从起始正方形的最短路径最多为 的正方形的列表`x`，这听起来像是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:57:09.010

您可能最好使用带加权图的 Dijkstra 算法，如下所述： [http](http://www.csl.mtu.edu/cs2321/www/newLectures/29_Weighted_Graphs_and_Dijkstra%27s_Algorithm.html) ://www.csl.mtu.edu/cs2321/www/newLectures/29_Weighted_Graphs_and_Dijkstra's_Algorithm.html （在中间有算法描述页。）

在您的情况下，曼哈顿距离可能只是意味着您不想要图中的对角线路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T23:00:54.417

Eric Lippert 提供了一个关于在 C# 中编写 A-* 路径查找算法的优秀博客系列：

第 1 部分：http: [//blogs.msdn.com/b/ericlippert/archive/2007/10/02/path-finding-using-a-in-c-3-0.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/02/path-finding-using-a-in-c-3-0.aspx)

第 2 部分：http: [//blogs.msdn.com/b/ericlippert/archive/2007/10/04/path-finding-using-a-in-c-3-0-part-two.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/04/path-finding-using-a-in-c-3-0-part-two.aspx)

第 3 部分：http: [//blogs.msdn.com/b/ericlippert/archive/2007/10/08/path-finding-using-a-in-c-3-0-part-three.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/08/path-finding-using-a-in-c-3-0-part-three.aspx)

第 4 部分：http: [//blogs.msdn.com/b/ericlippert/archive/2007/10/10/path-finding-using-a-in-c-3-0-part-four.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/10/path-finding-using-a-in-c-3-0-part-four.aspx)

# android - 尝试在服务中布局膨胀时出现空指针异常

> ID：16136644
> 
> 赞同：0
> 
> 时间：2013-04-21T21:56:41.837
> 
> 标签：android, service, nullpointerexception, layout-inflater

我正在尝试`onCreate`使用以下代码在服务中布局 Inflate：

```
// ...
public void onCreate() {    
    telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    call = new PhoneCall();

    IntentFilter intentFilter = new IntentFilter(outgoingIntent);
    registerReceiver(callReceiver, intentFilter);

    final LayoutInflater myInflator = (LayoutInflater) ctext.getSystemService(Context.LAYOUT_INFLATER_SERVICE );        

    onPhoneStatelistener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

// ... 
```

这是我的日志猫：

```
04-22 02:38:35.324: E/AndroidRuntime(28837): FATAL EXCEPTION: main
04-22 02:38:35.324: E/AndroidRuntime(28837): java.lang.RuntimeException: Unable to create service com.castello.AllMyCalls.CallService: java.lang.NullPointerException
04-22 02:38:35.324: E/AndroidRuntime(28837):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:1959)
04-22 02:38:35.324: E/AndroidRuntime(28837):    at android.app.ActivityThread.access$2500(ActivityThread.java:117)
04-22 02:38:35.324: E/AndroidRuntime(28837):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:989) 
```

我只是收到“空指针”错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:51:23.633

当我尝试`LayoutInflater`服务时，我通常会这样做：

```
LayoutInflater inflater = LayoutInflater.from(Context); 
```

希望这可能对你有用！

# php - 将搜索查询请求标头添加到卷曲 URL

> ID：16136648
> 
> 赞同：0
> 
> 时间：2013-04-21T21:56:53.570
> 
> 标签：php

我正在尝试添加当用户使用 weather.com 在表单中搜索机场代码时生成的请求标头。我已成功请求第一页，但我需要帮助弄清楚如何在当前 URL 的末尾添加搜索查询字符串。

查询字符串是`search?where=phx&start_with=1&search_loc_type=9&x=5&y=13`. 是`phx`机场代码。

我试图弄清楚如何添加这个查询字符串，例如，`search?where="Airport_variable".&start_with=1&search_loc_type=9&x=5&y=13`.

因此，当一个人键入机场代码时，它会由 weather.com 服务器获取并添加到搜索查询中，并根据该查询显示搜索结果*h*e。

有人可以帮帮我吗？

这是我到目前为止所拥有的：

```
<?php
   $URL = "http://www.weather.com/activities/travel/businesstraveler/";   
   $chwnd = curl_init();
   curl_setopt($chwnd, CURLOPT_URL,$URL);
   curl_setopt($chwnd, CURLOPT_VERBOSE, 1);
   curl_setopt($chwnd, CURLOPT_POST, 1);
   curl_setopt($chwnd, CURLOPT_POSTFIELDS, TRUE);
   $returned = curl_exec($chwnd);
   curl_close ($chwnd);
   // /search?where=bhm&start_with=1&search_loc_type=9&x=0&y=0
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:16:45.640

好吧 - 如果这是您的最终查询`search?where=phx&start_with=1&search_loc_type=9&x=5&y=13`，那么只需按照您的喜好组装它：

```
//take the paremeter: (using post ?! )
$Airport_variable = $_POST['where'];

$url = "http://www.weather.com/activities/travel/businesstraveler/";
//quertstring:
$url .= 'search?where=' . $Airport_variable . '&start_with=1&search_loc_type=9&x=5&y=13';

$chwnd = curl_init();
curl_setopt($chwnd, CURLOPT_URL,$url);
.
.
. 
```

# php - Web开发; 没有服务器源代码控制支持

> ID：16136658
> 
> 赞同：1
> 
> 时间：2013-04-21T21:57:31.997
> 
> 标签：php, git, codeigniter, svn, version-control

我正在使用 CodeIgniter PHP 框架开发 Web 应用程序。我正在使用的服务器不支持任何类型的源代码控制（即 Subversion），除非您使用更高的价格层。

我仍然想将代码置于某种源代码控制之下。执行以下操作是否有意义：

1.  在我的本地机器上安装 git 或 SVN 并在那里开发
2.  将更改从我的本地机器复制到服务器上的开发目录（使用 FileZilla、WinSCP 等）并测试
3.  将更改从开发目录复制到服务器上的生产目录

这听起来合理吗？有更好的选择吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:01:07.413

如果您在本地使用 svn，这有点危险，因为您还需要保护您的计算机 - 我认为最好的方法是使用提供完全支持的 svn/git 的商业网站 - 比如[http://www.beanstalkapp.com /](http://www.beanstalkapp.com/)或[http://www.github.com](http://www.github.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:59:15.190

[您可以在本地计算机（SVN、Git 等）上使用源代码控制，并使用Capistrano](https://github.com/capistrano/capistrano)等开源工具通过 SSH 将代码从本地源代码控制存储库部署到服务器。或者，如果您仅限于 FTP，这篇[博文](https://coderwall.com/p/m5kpuq)有一个潜在的解决方案。

使用 Capistrano 之类的工具而不是通过 FileZilla 或 WinSCP 直接将本地计算机上的文件镜像到服务器的一个优点是 Capistrano 将对您部署的文件进行*版本*控制，这样，如果您最终破坏了某些东西并需要快速回滚到以前部署的版本，它可以像更改符号链接到以前的部署目录一样简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:39:39.467

> 这听起来合理吗？

部分，在第 1 页。但即使在这种情况下，我也会建议将您的存储库也放在一些存储库托管（BitBucket、GitHub、Assembla）上

对于第 2-3 页：您的部署必须是自动且非交互式的，因此 - 您必须选择其他工具（用于选择 SCM 的提交后挂钩）

*不知何故，2-3 的更好*替代方案可能是：

*   使用 2 个不同的分支（DEVEL 和 PROD）作为 DEVEL 和 PROD 目录的来源
*   提交后挂钩，*仅将提交的修订*文件中的更改上传到相应的目录（用于 FTP 的 NCFTP，用于 ssh 的场景的 SCP）
*   主要开发发生在 DEVEL 分支
*   PROD**只有**来自 DEVEL 的合并集

工作流与 SCM 无关，并且可扩展到任何合理数量的分支和开发人员

# couchdb - 如何访问couchdb设计文档中views/lib中的json对象

> ID：16136665
> 
> 赞同：1
> 
> 时间：2013-04-21T21:58:48.047
> 
> 标签：couchdb

我已经阅读了很多可以使用 require("views/lib/modulename") 来访问我的设计文档中视图之间共享的脚本的地方。我可以对 json 对象做同样的事情吗？

我知道视图的范围不同，但我认为如果脚本可以访问，那么数据也可以。

我想我可以通过某种预处理器在 erica 中使用宏和在 kanso 中执行此操作，但没有本地方式吗？

```
"views": {
    "lib": {
        "module: "function(){...}",
        "data": {}
    },
    "view": {
        "map": "function (doc) {
            var module =  require('views/lib/module');
            var data = ??
        }"
    }
} 
```

# matlab - 在 Matlab 中突出显示罗盘图中的幅度圆圈

> ID：16136670
> 
> 赞同：0
> 
> 时间：2013-04-21T21:59:26.110
> 
> 标签：matlab, matlab-figure

我在*Matlab*中使用罗盘图。我需要突出显示幅度级别（因此以*罗盘*图的原点为中心的圆圈）以强调那些超过该幅度的向量。我怎样才能做到这一点？谢谢！

### 例子

我的罗盘图非常简单，我只是按照[此处](http://www.mathworks.it/it/help/matlab/creating_plots/direction-and-velocity-vector-graphs.html#f10-1352)显示的方法将一些极坐标转换为笛卡尔坐标。*在我的例子中，我显示了风的强度和方向（与我的Mathworks*提供的示例非常相似）：

```
wdir = [31.45 21.45 44.67 23.87];
knots = [7.2 4.4 5.3 6.6];
rdir = wdir * pi/180;
[x,y] = pol2cart(rdir,knots);
compass(x,y) 
```

我需要强调**4.0 节**的水平，因为当风超过这个强度时，就会发生一些重要的事情。如果你看一下我前段时间的截图（这是我之前写的代码中的*罗盘图）：*

![在此处输入图像描述](https://i.stack.imgur.com/tsmRh.png)

我想要的是突出显示4级的灰色圆圈虚线。就是这样！

### 附言

请注意，我不想突出显示向量，而只是想在图中画一个对应于某个幅度的圆圈。就这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:52:37.500

根据您的评论，我找到了一台机器来测试我的代码。

这是我使用的确切代码：

```
wdir = [31 24 44 23];
knots = [7 4 5 6];
rdir = wdir * pi/180;
[x,y] = pol2cart(rdir, knots);
figure
compass(x,y);

hold on;
theta = linspace(0,2*pi,100);
kLimit = 4.0;
xt = kLimit * cos(theta);
yt = kLimit * sin(theta);
plot(xt, yt, 'r') 
```

这是我得到的输出：

![在此处输入图像描述](https://i.stack.imgur.com/UygkK.png)

我不确定为什么它不适合你。我想这就是你所要求的。你能看看这个确切的代码是否适合你吗？如果我仍然误解，请解释一下？

# java - PDF 字段在 PDF Clown 中显示为不可见

> ID：16136671
> 
> 赞同：2
> 
> 时间：2013-04-21T21:59:45.943
> 
> 标签：java, pdf-generation

我使用 Java 版的[PDF Clown](http://www.stefanochizzolini.it/en/projects/clown/index.html)来填写 PDF Acroforms 的字段。这很好用，我能够以编程方式填写表格并保存它们而不会出现任何问题。

但是，某些 PDF 查看器会在我正在填写的字段中呈现一些不可见的文本，除非您单击它们，在这种情况下它们变得可见。此[论坛帖子](http://acrobatusers.com/forum/forms-acrobat/inviisible-data-form-fields/index.php#comment-64711)解释说，这通常发生在可填写表单的 PDF 中，并且可以通过将 PDF 字段的背景颜色设置为“无”来修复它，即使 GUI 已经说背景颜色为“无”。这对其他人有用，我想自己尝试一下。

不幸的是，我被困在如何在 PDFClown 中实际执行此操作。没有像`field.setBackgroundColor(null)`Field 类这样的直接方法，我无法通过使用其他访问器方法之一找到方法，喜欢`getDefaultAppearanceState()`。

有没有人知道如何在 PDF Clown 中做到这一点？

编辑：可以在[此处](http://journeymangames.net/Doc%20Lightning%20Different.pdf)找到有关此问题的示例 PDF 。此 PDF 中的所有内容均使用 PDF Clown 填充。请特别注意左上角的两个字段（标有“名称”）在单击之前是不可见的。右侧的五个字段在单击之前也是不可见的，除了“魅力”字段，它之前是不可见的，但后来我手动输入了值，然后它才可见。PDF Clown 将其他所有内容放入其中，但与其他字段不同的是，它是可见的。

编辑 2：后来发现只有当您覆盖现有的可填写表格字符表中的值时才会发生这种情况。可以在[此处](http://www.peginc.com/freebies/DL_Reloaded/DLEXCharacterSheet.pdf)下载原件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:06:30.587

**作为第一个分析：**

几乎与我原来的评论中所怀疑的一样，字段“Name Line 1”包含值（字段字典**V**）“Doc Lightning”，但正常的外观流（字段字典**AP** -> 外观字典，键**N**）不显示任何文本。

此外，交互式表单字典条目**NeedAppearances**未设置为`true`; 因此，PDF 查看器相信外观流是最新的。只有当您单击该字段并因此发出您要编辑的信号时，PDF 查看器才会生成流的新外观，这是它自己制作的外观，它完全理解编辑任务。

因此，如果您填写了该表单字段并且之后没有其他工具更改您的结果，那么您的代码或 PDF Clown 中有问题。请提供一些独立的示例代码和尚未填写的文档以重现该问题。

*编辑：*

我刚刚将当前（主干）PDF Clown`AcroFormFillingSample.java`样本应用于尚未填充的字符表（即由文件的初始 1458834 字节组成的修订版），结果还可以，所有字段内容都可见，即使没有点击进入它们。因此，您的源代码中有一些特别之处......（或者您使用的是旧版本？）

**详细地：**

[Doc Lightning 字符表的](http://journeymangames.net/Doc%20Lightning%20Different.pdf)第 1页引用了对象 162 中的注释：

```
/MK      <<>>
/F       4
/Type    /Annot
/Subtype /Widget
/Rect    [37.0108, 617.055, 156.923, 631.717]
/FT      /Tx
/DA      /Helv 12 Tf 0 g
/T       (Name Line 1)
/V       (Doc Lightning)
/P       47 0 R
/AP      537 0 R 
```

因此，该字段的值确实是“Doc Lightning”。

另一方面，对象 537 中的外观字典引用了正常外观流：

```
/N       538 0 R 
```

对象 538 中的流仅包含：

```
/Tx BMC
q
1 0 0 1 2 -7.331 cm
/Helv 12 Tf
Q
EMC 
```

因此，正常外观流在字段中的位置（相应地设置当前转换矩阵）并选择一种字体（Helvetica，在资源中正确定义，顺便说一句），然后打印......什么都没有！

交互式表单字典（对象 144）根本*不*包含**NeedAppearances**条目。根据 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)表 218，此条目是

> 一个标志，指定是否为文档中的所有小部件注释构造外观流和外观字典（参见 12.7.3.3，“可变文本”）。默认值：**假**。

因此，当不显示“Name Line 1”的值“Doc Lightning”而是显示空的外观流时，PDF 查看器的行为就像预期的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T06:54:13.293

重新审视这个问题并仔细查看源代码后，我意识到`Sample.java`PDFClown 的示例类有一个`applyDocumentSettings()`方法，其中包含我的源代码中缺少的三行代码：

```
//Previously we instantiated "document" from org.pdfclown.files.File.getDocument()
ViewerPreferences view = new ViewerPreferences(document); // Instantiates viewer preferences inside the document context.
document.setViewerPreferences(view); // Assigns the viewer preferences object to the viewer preferences function.
view.setDisplayDocTitle(true); 
```

我不确定最后一行是否真的必要，但我继续前进并保持良好状态。

用户 mkl 在他的回答中写道：“PDF 查看器生成了流的新外观，它自己制作的外观，它完全理解编辑任务。” 似乎上面的代码行是生成一个被理解为用于阅读（也可能是编辑？）的外观。

# mongodb - 映射/减少正则表达式聚合？

> ID：16136673
> 
> 赞同：0
> 
> 时间：2013-04-21T22:00:13.770
> 
> 标签：mongodb, mapreduce

我有一个看起来像这样的集合：

```
{ "_id" : ObjectId("51745ec04fdde5d77e4c5ed3"), "pattern" : "^a$" }
{ "_id" : ObjectId("51745ecb4fdde5d77e4c5ed4"), "pattern" : "^b$" }
{ "_id" : ObjectId("51745ece4fdde5d77e4c5ed5"), "pattern" : "^c$" } 
```

我基本上想看看单个输入值是否与集合中定义的任何正则表达式匹配。我对 map/reduce 功能有些陌生，但我会像这样用 JavaScript 连续编写它：

```
function matches(input, collection) {
    for (var i = 0; i < collection; i++) {
        if (input.match(collection[i].pattern))
            return true;
    }

    return false;
} 
```

如果我要并行写这个，它可以归结为：

```
function matches(input, item) {
    return input.match(item.pattern);
} 
```

然后我会减少它以查看`true`结果数组中是否存在。

如何将其编写为 MongoDB 的 map/reduce 方案，以查明输入值是否与集合中的任何正则表达式匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:19:08.133

我不确定你为什么需要 map/reduce 在这里。看来你可以做一个类似的简单迭代（在 mongo shell 中）：

```
> var input="a";
> db.collection.find({},{_id:0,pattern:1}).forEach(function(d) { 
   if ( input.match(d["pattern"])) 
        print (tojson(d)+" matches"); 
} )
{ "pattern" : "^a$" } matches
> 
```

# ruby - Amazon 等弹性云主机在技术上是如何工作的？

> ID：16136676
> 
> 赞同：1
> 
> 时间：2013-04-21T22:00:29.787
> 
> 标签：ruby, node.js, amazon-ec2, cloud, scalability

程序员在设计应用程序时应该怎么做才能使其在 Amazon 等弹性云环境中具有可扩展性？具体来说，如果一个程序通过产生更多进程来扩展，这是否足以保证亚马逊能够水平拆分它们？

# google-apps-script - 在 GoogleDrive 中保存 Gmail 附件

> ID：16136677
> 
> 赞同：0
> 
> 时间：2013-04-21T22:00:30.243
> 
> 标签：google-apps-script, gmail, google-drive-api, email-attachments

我有一个小问题。我在 Drive-Cloud 中找到了一个用于保存附件的脚本。该功能成功但脚本保存图片不正确，如果我想在我的云端硬盘中打开Gmail中保存的图片，所以我只能用GoogleDocs打开它并且我没有预览。剧本：

```
function sendToGDrive() {    

  var sheet   = SpreadsheetApp.getActiveSheet();
  var gLabel  = sheet.getRange("D4:D4").getValues();
  var gFolder = sheet.getRange("D5:D5").getValues();

  var threads = GmailApp.search("label:" + gLabel, 0, 5);  
  var folder  = DocsList.getFolder(gFolder);

  for (var x=0; x<threads.length; x++) {

    var messages = threads[x].getMessages();

    for (var y=0; y<messages.length; y++) {

      var att = messages[y].getAttachments();

      for (var z=0; z<att.length; z++) {
        try {
          var file = folder.createFile(att[z]);
          Utilities.sleep(1000);
        }
        catch (e) {
          GmailApp.sendEmail(
            Session.getActiveUser().getUserLoginId(), 
            "Error: " + e.message
          );
        }
      }       
    }    
    GmailApp.getUserLabelByName(gLabel)
      .removeFromThread(threads[x]);
  }
}

function configure() {
  var sheet   = SpreadsheetApp.getActiveSheet();
  var gLabel  = sheet.getRange("D4:D4").getValues();

  if (!GmailApp.getUserLabelByName(gLabel)) {
    GmailApp.createLabel(gLabel);
  }

  createFolder();

  if (ScriptApp.getScriptTriggers().length == 0) {
    ScriptApp.newTrigger("sendToGDrive").timeBased().everyMinutes(5).create();
  }

  SpreadsheetApp.getActiveSpreadsheet()
    .toast("You can now close this Google Docs sheet and it will run in the background.",
           "Success", -1);
}

function onOpen() {  
  var menu = [    
    {name: "Initialize", functionName: "configure"},
    {name: "Run", functionName: "configure"}
  ];  
  SpreadsheetApp.getActiveSpreadsheet()
    .addMenu("Gmail (Click here)", menu);
}

function createFolder() {
  var sheet   = SpreadsheetApp.getActiveSheet();
  var gFolder = sheet.getRange("D5:D5").getValues();

  var folders = DocsList.getAllFolders();
  var found = false;

  for (var i=0; i<folders.length; i++) {
    if (folders[i].getName() == gFolder) {
      found = true;
      break; 
    }
  }

  if (!found) {
    DocsList.createFolder(gFolder);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:37:50.130

不幸的是，这是一个[已知问题 (1239)](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1239)您可以为它加注星标，以随时了解何时/如何修复它以及对其进行投票。

# boost-asio - 如何使用 boost ASIO 列出可用端口？

> ID：16136680
> 
> 赞同：4
> 
> 时间：2013-04-21T22:00:57.993
> 
> 标签：boost-asio

我正在尝试使用 Boost.ASIO 库，但我找不到如何列出 boost 的可用端口（带有串行端口服务）或套接字（带有网络服务）。你知道这是否可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:03:47.017

Boost.Asio 不提供此功能。通常，此信息取决于平台。例如，在 Windows 上，可以将 Winsock LSP/SPI 用于套接字和`SerialPort.GetPortNames`串行端口。在 Linux 上，`/proc/net/*`目录列表套接字和串行端口将在`/sys/class/tty`.

# ruby - Nokogiri：如何显示css选择器的部分输出？

> ID：16136681
> 
> 赞同：1
> 
> 时间：2013-04-21T22:01:03.993
> 
> 标签：ruby, nokogiri

假设我正在从中提取地址`div.body h3 a`。问题是，如果我只想要部分地址怎么办？例如，如果 html 读取：`<a href="/usa/sale/100-happy-street">100 Happy Street #PH </a>`

怎么说，我只想显示`PH`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:04:41.057

```
anchor = doc.at('div.body h3 a') # the <a …&gt;…&lt;/a> element
link   = anchor.text             # "100 Happy Street #PH "
last   = link[ /#([^#]+)/, 1 ]      # "PH" 
```

这个正则表达式（与 Ruby on Rails 或 Nokogiri 无关）从字符串中最后一个字符串中提取所有文本`#`，假设至少有一个`#`. 你可以得到类似的结果`last = link.split("#").last`。

# expressionengine - 表达式引擎 entry_id 解析

> ID：16136683
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:01:14.527
> 
> 标签：expressionengine, author

嘿大家我有一个大问题：

我有这条线：

```
{exp:entries:ids_assigned_to_me tag="idont" channel="proiecte" field="clienti"} 
```

哪个输出我一些条目ID

我可以把它放在entry_id：

```
{exp:channel:entries channel="proiecte" entry_id=" HERE "  } 
```

`{content} {/exp:channel:entries}`

我在论坛和其他东西上尝试并搜索了几个小时，但变量、片段和嵌入以及其他东西似乎没有成功。有任何想法吗 ？关于 Inward Parse 什么的？

也尝试了php但没有成功:((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:30:15.840

您正在使用[条目附加组件，](https://objectivehtml.com/entries)并且从外观上看，您正在使用单标签方法。从文档中不清楚，但我认为当您指定单个标签时，它会输出 ID，但如果您将其用作标签对（如文档中的其他示例所示），并且该文档提示： “如果没有为登录成员分配条目，则返回 no_results 条件。”。

所以首先尝试

```
{exp:entries:ids_assigned_to_me tag="idont" channel="proiecte" field="clienti"}
    {content}
{/exp:entries:ids_assigned_to_me} 
```

...完全没有任何 {exp:channel:entries} 标签。不知道“标签”参数在那里做什么。

如果这不起作用并且该方法不支持标签对，那么您需要在 2 个模板中嵌入：

第一个模板：

```
{embed=template-group/second-template entry_ids="{exp:entries:ids_assigned_to_me tag="idont" channel="proiecte" field="clienti"}"} 
```

第二个模板：

```
{exp:channel:entries channel="proiecte" entry_id="{embed:entry_ids}"}
    {content}
{/exp:channel:entries} 
```

# dart - Can I add Dart Web UI bindings to DOM elements created in code?

> ID：16136684
> 
> 赞同：1
> 
> 时间：2013-04-21T22:01:14.570
> 
> 标签：dart, dart-webui

In the Dart Web UI package, it is possible to create bindings using the `{{}}` or `bind-value` syntax. Is this also possible, when DOM elements are created in code?

Something like

```
new Element.html('<div>Value: {{str}}</div>'); 
```

and

```
new Element.html('<input type="text" bind-value="str">'); 
```

binding an event to `str`, without manually piecing the strings together?

* * *

**Note**: this question was asked earlier today, but was deleted before it was answered, but I wanted to know the answer, so I'm reposting it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:59:30.753

快速回答，没有。

绑定需要由`dwc`转换器处理，转换器将 Web 组件和 MDV 代码转换为“vanilla” Dart 和 HTML（适合编译为“vanilla” JavaScript）。

通常，您应该使用`<template>`标签来实例化新元素。

另一种方法是将这些文本位包装在自定义元素中，您可以使用它进行转换`dwc`和手动实例化。

# c# - windows form close immediately after loading

> ID：16136685
> 
> 赞同：-2
> 
> 时间：2013-04-21T22:01:29.903
> 
> 标签：c#, winforms

For some reason my windows form closes immediately after I run the program. I can see the form for about a second and then it closes. Here is my form load method

```
private void Form1_Load(object sender, EventArgs e)
    {
        CustGen = new CustomerGenerator(); 
        fuelType = null; 

        //set data on form initialization.
        unleadedtank = 10000f;
        dieseltank = 10000f;
        u_price = 136.9f;
        d_price = 152.2f;

        //event subscriptions

        CustGen.CustomerReady += CustomerReadySub; //Subscribes to ready event
        CustGen.PumpProgress += PumpProgressSub; //subscribes to progress event
        CustGen.PumpingFinished += PumpingFinishedSub; //subscribes to stop event

    } 
```

and here is my program.cs for that particular form, although this is automatically generated I wasn't sure if it was needed.

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    } 
```

This is within the customerGenerator class

```
 public class CustomerGenerator
{
    public CustomerGenerator();

    public event CustomerGenerator.CustomerReadyHandler CustomerReady;
    public event CustomerGenerator.PumpingFinishedHandler PumpingFinished;
    public event CustomerGenerator.PumpProgressHandler PumpProgress;

    public void ActivatePump();
    public void Start();

    public delegate void CustomerReadyHandler(object sender, CustomerReadyEventArgs e);

    public delegate void PumpingFinishedHandler(object sender, EventArgs e);

    public delegate void PumpProgressHandler(object sender, PumpProgressEventArgs e);
} 
```

I have ran the program and came across this after carrying out what one of the users said below in the comments.

```
 public void CustomerReadySub(object sender, CustomerReadyEventArgs fuel)
    {
        string CustReady = null;

        //checks what fuel is chosen and then activates the pump
        fuelType = fuel.SelectedFuel.ToString();

        if (!String.IsNullOrEmpty(fuelType))
        {
            fTypeLabel.Text = fuelType; 
```

It is this line that is throwing the exception. Also it says "Cross-thread operation not valid: Control 'Form1' accessed from a thread other than the thread it was created on."

```
fuelType = fuel.SelectedFuel.ToString(); 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:16:32.550

> 它还说“跨线程操作无效：控件'Form1'从创建它的线程以外的线程访问。”

使用以下模式访问表单上的控件：

```
private void MyHandler(object sender, EventArgs e) {
  if (InvokeRequired) Invoke(new EventHandler(MyHandler), sender, e);
  else {
    // code to handle the event
  }
} 
```

当您侦听从某个线程上执行的某些对象生成的事件时，处理该事件的代码将在该线程上运行。每当您从创建这些对象的线程以外的线程访问 UI 对象时，您都会遇到异常。InvokeRequired 检查您是否在 UI 线程上运行，如果不是，则调用该方法以在 UI 线程上运行。这使您可以安全地访问控件。

# php - Can't Insert data into MySQL using PHP

> ID：16136686
> 
> 赞同：0
> 
> 时间：2013-04-21T22:01:40.700
> 
> 标签：php, insert, mysqli

I am stumped :( I've done searches and have tried many variations but can't seem to pin point my problem so alas here I am.

*   *First off I'm new at this and I am learning through web searches and experimentation so please before you rip me a new one for being a noob just keep in mind that I am a noob and have admitted it and would rather talk about my solution rather than anything else.*

**Project**: Trying to make a little web app that allows me to insert comic book information into a mysql database. I have built the form to accept the data and pass it to my php page which does the insert into mysql.

*   This is a self app / This will not have exposure to the outside world / while I know and am currently developing data checks I need to get info into the DB before collection gets out of hand.

Here is the code that I currently have. I've tried so many variations that I don't know which way is up....

```
$idcomic_db = $_POST['idcomic_db'];
$publisher = $_POST['publisher'];
$comic_name = $_POST['comic_name'];
$comic_num = $_POST['comic_num'];
$comic_cover = $_POST['comic_cover'];
$price_paid = $_POST['price_paid'];
$quantity = $_POST['quantity'];

$sql_insert = "INSERT INTO `comic_info_db`.`comic_db` (`idcomic_db`, `publisher`, `comic_name`, `comic_num`, `comic_cover`, `price_paid`, `quantity`) VALUES ('$idcomic_db', '$publisher', '$comic_name', '$comic_num', '$comic_cover', '$price_paid', '$quantity')";
$mysql_con = mysqli_query($sql_insert, $con);
$error = mysqli_error($mysql_con);

?>

<!-- HTML Header Information  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<link rel="stylesheet" type="text/css" href="/style/style.css">
<head>
    <title>Comic Database Results</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
</head>

<!-- HTML Body Area -->

<body>
<?php

echo "$idcomic <br />";
echo "$publisher <br />";
echo "$comic_name <br />";
echo "$comic_num <br />";
echo "$comic_cover <br />";
echo "$price_paid <br />";
echo "$quantity <br />";
echo "<br />";
echo $sql_insert;
echo $error;
?>

<?php
// Close Connection
mysqli_close($con);

?> 
```

I've got some code I was playing with to do checks against values but alot of the values are set in the form itself.

Also I was doing those echos at the end just to see the values coming over from the html form and I've also got some other code that is the connection info to the DB as well as the error (if there is one) and that comes back just fine.

Any help would be great. I apologize again if this is simple I can't seem to get it so I throw myself on the alter.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:34:22.393

我的连接声明被颠倒了。

```
($con, $sql_insert)
($sql_insert, $con) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:08:43.900

尝试对包含变量的字符串使用双引号（如“值”部分中的 INSERT 查询字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:01:54.433

由于 $con 应该已经选择了数据库，所以您需要做的就是告诉它您要输入值的表。以下字符串应该适合您。

```
$sql_insert = "INSERT INTO comic_tb (idcomic_db, publisher, comic_name, comic_num, comic_cover, price_paid, quantity) VALUES ('$idcomic_db', '$publisher', '$comic_name', '$comic_num', '$comic_cover', '$price_paid', '$quantity')"; 
```

确保所有字段和变量都是正确的。

# android - Sqlite Select Query with rawQuery at Android

> ID：16136688
> 
> 赞同：11
> 
> 时间：2013-04-21T22:01:52.793
> 
> 标签：android, sqlite

I know it is a basic question, but i can not find problem. I try to get some columns with rawQuery.

```
 SQLiteDatabase db=database.getReadableDatabase();

    try 
    {
       String sql="SELECT * FROM CAR WHERE name = "; 
       Cursor crs = db.rawQuery(sql+"5P", null);
    } 
```

I always get the same exception.

```
android.database.sqlite.SQLiteException: **unrecognized token**: "5P": , while compiling: SELECT * FROM CAR WHERE name = 5P 
```

I have 5P at CAR table, i am sure because i used it other queries.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T22:03:28.957

您需要引用该值，或者更好的是，使用位置参数：

```
String[] args={"5P"};
Cursor crs=db.rawQuery("SELECT * FROM CAR WHERE name = ?", args); 
```

使用位置参数的优点是 SQLite 将处理引用字符串、转义任何嵌入的引号等。

# c++ - Class instance inside class declaration with constant arguments

> ID：16136694
> 
> 赞同：1
> 
> 时间：2013-04-21T22:02:57.877
> 
> 标签：c++, class, constructor, member-initialization

I am having trouble declaring instances of a class with constant arguments inside the definition of another class.

```
class Foo
{
    private:
        const int m_a, m_b;
    public:
        Foo(int a, int b) : m_a(a), m_b(b) {}
};

class Bar
{
    public:
        Foo foo1(1,2);
        Foo foo2(2,3);
}; 
```

From this I get the errors:

```
"error: expected identifier before numeric constant"
"error: expected ',' or '...' before numeric constant" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T22:04:17.993

这不是您初始化数据成员的方式。您必须在构造函数的[初始化列表中](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)执行此操作：

```
class Bar
{
public:
    Bar() : foo1(1,2), foo2(2, 3) { }
    //    ^^^^^^^^^^^^^^^^^^^^^^^
    //    This is how you initialize the sub-objects of a class
    //    (both base sub-objects and member sub-objects)
    Foo foo1;
    Foo foo2;
}; 
```

请注意，C++11 确实允许对数据成员进行内联初始化，但语法略有不同（您需要使用大括号）：

```
class Bar
{
public:
    Foo foo1{1, 2};
    Foo foo2{2, 3};
}; 
```

或者，您也可以使用复制初始化语法：

```
class Bar
{
public:
    Foo foo1 = Foo(1, 2);
    Foo foo2 = Foo(2, 3);
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T22:04:49.430

您必须通过构造函数初始化这些成员：

```
class Bar
{
    public:
        Foo foo1;
        Foo foo2;

        Bar() : foo1(1, 2), foo2(2, 3) {}
}; 
```

冒号后面是*[成员初始化器列表](https://stackoverflow.com/questions/7665021/c-member-initialization-list)*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T22:07:41.770

在 C++03 中，`Bar`需要在其构造函数中初始化其属性：

```
class Bar
{
    public:
        Foo foo1;
        Foo foo2;

        Bar() : foo1(1,2), foo2(2,3) {} 
}; 
```

# list - Infinite loop prolog

> ID：16136697
> 
> 赞同：1
> 
> 时间：2013-04-21T22:03:07.643
> 
> 标签：list, prolog, infinite-loop

I am writing a function that returns distinct sublists of a size n.

When I run the following prolog code with a query gen_list_n(4,D,[1,2,3,4]) it runs into an infinite loop after returning the first answer. How do I prevent this?

```
member_rem(E,L,R) :- 
append(X,Y,R), 
append( X ,[E], L0), 
append( L0,Y, L).

gen_list_n(0,[],_).

gen_list_n(N,[X|Xs],L) :- 
N > 0, 
N1 is N-1, 
member_rem(X,L,R), 
gen_list_n(N1,Xs,R). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:32:07.870

member_rem/3 仅在`L`实例化的情况下被调用，然后回溯的前 2 个 member/3 生成无限列表。

这是经过一些回溯步骤后 member_rem 变量的快照：

```
L   = [4]
R   = [_G5662, _G5668, _G5674, _G5680|Y]
X   = [_G5662, _G5668, _G5674, _G5680]
L0  = [_G5662, _G5668, _G5674, _G5680, E] 
```

我认为您应该以更简单的方式改写 member_rem 。可能是一个简单的选择/ 3。使用它，我得到

```
member_rem(E,L,R) :-
    select(E, L, R).

?- gen_list_n(4,D,[1,2,3,4]).
D = [1, 2, 3, 4] ;
D = [1, 2, 4, 3] ;
D = [1, 3, 2, 4] ;
... 
```

# ravendb - RavenDB: Attempt to query by id only is blocked. Now Include() doesn't work

> ID：16136705
> 
> 赞同：1
> 
> 时间：2013-04-21T22:04:17.103
> 
> 标签：ravendb

For a long time now, this code has been working well for me:

```
session.Query<Application>()
    .Include(x => x.CustomVariableGroupIds)
    .Where(app => app.Id == id).FirstOrDefault()) 
```

However, I just upgraded my RavenDB assemblies, and I'm now getting this error:

> Attempt to query by id only is blocked, you should use call session.Load("applications/4"); instead of session.Query().Where(x=>x.Id == "applications/4");
> 
> You can turn this error off by specifying documentStore.Conventions.AllowQueriesOnId = true;, but that is not recommend and provided for backward compatibility reasons only.

Okay, fine, I changed it to this:

```
session.Load<Application>(id)
    .Include(x => x.CustomVariableGroupIds) 
```

But now my Include() method doesn't work:

> Cannot resolve symbol 'Include'.

How do I use `Include()` with `session.Load()`?

**Edit:**

I've found the answer (see my answer below). Now I'm trying to find out how this fits into the new `session.Load()` approach:

```
.Customize(x => x.WaitForNonStaleResults() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:33:34.000

[在这里](http://ravendb.net/docs/2.0/faq/optimizing-referenced-documents-load)找到了答案。我需要在`Include()`上使用`session`，而不是在`Load()`.

```
session.Include<Application>(x => x.CustomVariableGroupIds)
    .Load<Application>(id)) 
```

# node.js - 使用 Passport 持久会话时的 authToken 是否安全？

> ID：16136712
> 
> 赞同：1
> 
> 时间：2013-04-21T22:04:57.057
> 
> 标签：node.js, passport.js

我正在寻找有关使用护照本地策略时的最佳实践的一些信息。我浏览了使用 authToken 的本地策略示例，用于登录持久性，在 github 上找到。在与同事交谈时，他们提出了一个问题，如何将此令牌存储在会话 cookie 中比存储密码更安全，因为它本质上是您在服务器上经过身份验证的身份。那么我该如何回答这个问题呢？这是一个绿色问题，我承认我没有完全理解整个生命周期。那么，当像示例一样与 bccrypt 和 mongo 集成时，这是一个安全的解决方案。如果这只是一个示例，并不一定是为了展示一个强大的解决方案，那么有哪些最佳实践可以保证我们的用户和我们的应用程序的安全？

[https://github.com/jaredhanson/passport-local/tree/master/examples/express3-mongoose-rememberme](https://github.com/jaredhanson/passport-local/tree/master/examples/express3-mongoose-rememberme)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:35:20.170

你的同事没有错，实现不是很安全（事实上它可能被认为不太安全，因为 sessionId 可以在没有加密的情况下按原样使用）。

只有在 30 天内才能使用它才更安全，而用户名/密码可以一直使用，直到用户将其删除。（它也更有用，因为您可以在不更改密码的情况下删除 sessionId）。

然而，这不是实现记住我的安全方式，请参阅[基于表单的网站身份验证](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)的权威指南，了解有关实现记住我的好方法的信息。

基本上你需要更改 github 代码来执行以下操作：

1.  保持 cookie 在会话结束时结束（用户关闭浏览器时的 IE）
2.  如果用户在使用用户名/密码登录时请求记住我，则使用 accessToken（httpOnly cookie）发送一个新的 cookie。
3.  当客户端使用 accessToken cookie 而不是 sessionId cookie 发送请求时，您使用 accessToken 登录用户，然后将 accessToken 更改为新的 accessToken（在客户端的 cookie 和 db 用户中）

另外，在使用用户名密码登录时始终使用 https（至少）

编辑：我已经把我现在个人使用的一个例子放在一个要点中：[https](https://gist.github.com/Illniyar/5432646) ://gist.github.com/Illniyar/5432646 也许它会帮助你相处（虽然它有点混乱）。令牌像宣传的那样工作，但我还没有使用护照，不过将它移植到护照应该不会太难。还要注意如何保存用户的密码（为每个用户使用不同的盐来保护），以及如何执行注销。

# c# - 企业库 + Odp.Net BindParameterByName

> ID：16136717
> 
> 赞同：0
> 
> 时间：2013-04-21T22:05:42.190
> 
> 标签：c#, enterprise-library, odp.net

任何人都知道如何通过名称强制 odp.net 绑定参数，将其与企业库一起使用？我知道存在`BindParameterByName`使用`OracleCommand`，但我使用 odp.net 和企业库和`DbCommand`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:10:59.990

我认为[这个](https://stackoverflow.com/questions/1046632/binding-query-parameters-by-name-with-odp-net)和[这个](https://forums.oracle.com/forums/thread.jspa?threadID=2246928)帖子可以提供帮助。

首先他们告诉你自己扩展它，比如

公共抽象类数据库 { 私有只读 DbProviderFactory 工厂；

```
protected Database(DbProviderFactory factory)
{
    this.factory = factory;
}

public virtual DbCommand CreateCommand(String commandText)
{
    return CreateCommand(CommandType.Text, commandText);
}

public virtual DbCommand CreateCommand(CommandType commandType, String commandText)
{
    DbCommand command = factory.CreateCommand();
    command.CommandType = commandType;
    command.Text = commandText;
    return command;
}

public virtual void BindParametersByName(DbCommand command)
{

} 
```

并选择创建覆盖默认命令创建或提供按名称绑定参数的选项的 Oracle 特定实现。

公共类OracleDatabase：数据库{公共OracleDatabase（）：基础（OracleClientFactory.Instance）{

```
}

public override DbCommand CreateCommand(CommandType commandType, String commandText)
{
    DbCommand command = base.CreateCommand(commandType, commandText);
    BindParametersByName(command);
    return command;
}

public override void BindParametersByName(DbCommand command)
{
    ((OracleCommand)command).BindByName = true;
} 
```

}

# c++ - 我在 Linux C 或 C++ 中搜索相当于 Windows msg.exe

> ID：16136719
> 
> 赞同：0
> 
> 时间：2013-04-21T22:06:20.347
> 
> 标签：c++, c, linux, class

我通过谷歌搜索，但我一无所获。

我在 C 或 C++ 中搜索 linux 的源代码或类，它允许通过弹出窗口向 Win7 PC（如 msg.exe）发送消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:12:32.143

如果您想制作一个弹出窗口，您需要引用一个与您的窗口管理器交互的系统相关程序。对 windows 使用 msg.exe 是可行的，因为它是一个生成弹出框的内置程序。如果您正在运行 ubuntu，请尝试使用 xmessage 或 notify-send（用于内置程序），否则您需要导入一个处理 GUI 的库，例如 GTK+。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:21:05.510

这个问题确实有点误导。如果你想通过网络发送消息，你应该尝试 smbclient。我不确定它是否仍然适用于 Win7，但您可以使用 smbclient -M "my message" 将消息从 linux 机器发送到 Windows。

不过，在 C 或 C++ 中执行此操作更为复杂。也许看看 smbclient 的源代码可能会对你有所帮助。

# cocoa - mouseDragged：未在 NSView 子类中调用

> ID：16136721
> 
> 赞同：0
> 
> 时间：2013-04-21T22:06:35.440
> 
> 标签：cocoa, mouseevent, nsview

对于自定义 NSBox，我有以下问题，我无法让我的 mouseDragged 被调用。

知道 : `mouseMoved:`, `mouseEntered:`, `mouseExited:`,`mouseUp`都在需要时被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:06:35.440

我找到了我的问题的解决方案：`mouseDown:`必须在子类中被覆盖。

# php - Laravel 上的 has_and_belongs_to_many

> ID：16136723
> 
> 赞同：0
> 
> 时间：2013-04-21T22:06:59.613
> 
> 标签：php, laravel

我坚持使用 Laravel（也是新手），阅读了多对多关系文档，但仍然无法找出我的问题。

我有一个模型公司，看起来像：

```
class Company extends Eloquent 
{
  public static $timestamps = true;

  public function owner()
  {
    return $this -> belongs_to('User', 'owner_id');
  }

  public function users()
  {
    return $this -> has_and_belongs_to_many('User', 'company_users');
  }
} 
```

另外，我有一个看起来像这样的模型用户：

```
class User extends Eloquent
{
  public static $timestamps = true;

  public function companies() 
  {
    return $this -> has_and_belongs_to_many('Company');
  }
} 
```

我有一个用户保存到 ID 为 1 的数据库中，所以我这样做了

```
 $user = User::find(1);
  var_dump($user -> companies() -> get());

  $company = new Company();
  $company -> name = 'name';
  $company -> owner_id = $user -> id;

  $company -> save(); 
```

问题是，如何将所有者保存在公司的 users() 中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:35:27.653

保存公司后，将用户附加到它，如下所示：

```
$company->users()->attach($user->id); 
```

这将确保`$user->id`被添加到`company_users`表中`$company->id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:27:56.993

“问题是，我如何将所有者保存在公司的 users() 中？”

您拥有的是两个需要保持同步的独立关系。我会在 Company 模型上重载 save 方法，这样当 user_id（所有者）更改时，新的所有者 id 会添加到用户关系中。

```
// Something like this, untested, etc...
public function save()
{
    parent::save();

    if ( $this->changed( 'user_id' ) )
    {
        $this->users()->attach( $this->user_id );
    }
} 
```

# c - exevp skips over all code until wait call in c

> ID：16136725
> 
> 赞同：0
> 
> 时间：2013-04-21T22:07:12.723
> 
> 标签：c, process, execvp

I am trying to execute a file using `fork` and `execvp`, however I am encountering some errors. I have not found any solutions to the problem I am having here online, since I don't get any errors from my exevp nor does it run. Here is my code:

```
 pid_t child;
    int status;
    child = fork();
    char *arg[3] = {"test","/home/ameya/Documents/computer_science/cs170/project1", (char*) 0};
    if(child == 0){
        printf("IN CHILD BEFORE EXECVP\n");
        int value = execvp(arg[0],arg);
        if(value < 0){
            printf("ERROR\n");
        }else{
            printf("In Child : %i\n", value);
        }
    }
    if(waitpid(child, &status, 0) != child){
        printf("ERROR IN PROCESS\n");
    }
    printf("In Parent\n"); 
```

When I try to run this code it only outputs the "IN CHILD BEFORE EXCEPTION" and "IN PARENT" it doesn't print out any of the printf statements in between why does it do that. The file I am trying to run a simple executable that prints "hello world" to stdout.

Thanks for any help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:10:44.280

从手册页：

```
exec() 函数仅在发生错误时返回。
```

因此，您的`execvp`电话可能正在工作，因此它没有返回。

这些`exec`函数的重点是它们将当前运行的代码替换为另一个程序的代码，因此一旦程序完成运行它就会返回到您的代码是没有意义的。

编辑：

看起来你没有正确调用你的程序。我认为你应该这样称呼它：

```
char *arg[3] = {"test", (char*) 0};
int value = execvp("/home/ameya/Documents/computer_science/cs170/project1/test", arg); 
```

# string - AS3 combining strings

> ID：16136732
> 
> 赞同：0
> 
> 时间：2013-04-21T22:08:16.237
> 
> 标签：string, actionscript-3, concat

I am trying to make a program combine two strings to make a name...

My code is

```
function addStudent(evt: MouseEvent)
{
var tempFirst = newStudent.firstName.text;
var tempLast = newStudent.lastName.text;
var tempStartDate = String(newStudent.startDate.text);
var tempBirthDate = String(newStudent.birthDate.text);
numStudents++;

var tempName = newStudent.firstName.text + newStudent.lastName.text;
trace(tempName);

studentList.dataProvider.addItem({label: tempName, data: tempName});

var tempStudent:student = new student(tempFirst, tempLast, tempStartDate, tempBirthDate);

studentHolder.addChild(tempStudent);

listStudents();
} 
```

what the trace returns (if I input Jack Rob) is:

```
Jack
Rob 
```

instead of JackRob

newStudent.firstName.text points to a movie clip called newStudent, with an input box called firstName

I have tried:

```
var tempFirst = String(newStudent.firstName.text);
var tempLast = String(newStudent.lastName.text);

var tempName = newStudent.firstName.text + newStudent.lastName.text;
var tempName = (newStudent.firstName.text).concat(newStudent.lastName.text);
var tempName = String(newStudent.firstName.text) + String(newStudent.lastName.text); 
```

most of those were just me grasping at straws and *hoping* maybe something would work

essentially the goal is for the user to input a first and last name, and that first and last name is inputted into the dataProvider as one single string (JackRob)

I appreciate any help anyone can give, thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:42:53.407

我相信您在 TextField 中的字符串末尾有一个不可见的回车。尝试这个 ：

```
var tempFirst.replace(String.fromCharCode(13), ""); 
```

如果这行得通，那么情况确实如此。

我相信当您使用多行文本字段时会发生这种情况。在 Flash IDE 的 TextField 属性面板上将其设置为单行 TextField 或使用以下代码：

```
newStudent.firstName.multiline = false; 
```

# jquery - jQuery TypeError: is not a function in Firefox on table object

> ID：16136734
> 
> 赞同：2
> 
> 时间：2013-04-21T22:08:57.480
> 
> 标签：jquery, firebug, typeerror, uncaught-exception

I am using FireQuery in Firefox. Here is what I am trying to do:

1.  The text "Items Ordered" exists within a tag somewhere on the page.
2.  The table that "Items Ordered" text exists in is also nested deep within several other tables.

Given the above scenario, I want to grab the `<table>` tag closest to the aforementioned string, and append a div to it. My standard methodology to ensure I've grabbed the correct DOM element is to change the background color and give it a 1px border so that it pops out and is easily discernable on the page. However, with my code that failed. So, I'm trying to understand why it failed and how to fix it before proceeding to append the div.

Following is my code I used for testing:

## **[HTML -- Actual code, with substituted personal information & links]**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
    <!-- 2013.04.20 -->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
</script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
                jQuery('div').css({
                    'border':'solid green 2px'
                })                

                var elems_arr = jQuery('table:contains(Items Ordered)')
                console.info('elems_arr:');
                console.log(elems_arr);

                console.info("elems_arr.length = " + elems_arr.length);
                target = elems_arr[elems_arr.length - 1]
                console.warn("target:");
                console.log(target);                

                var elementType = target.tagName.toLowerCase();
                alert(elementType);                

                // try wrapping target element in a div with id
                target.wrap("<div id='target_wrap' />");                

            });
    </script>
    <style type='text/css'>
        table {
                border: solid blue 1px;
                min-height: 30px;
            }
    </style>

    <title></title>
</head>

<body>
    <table>
        <tbody>
            <tr bgcolor="#FFFFFF">
                <td valign="top" colspan="2">
                    <table width="100%" border="0" cellspacing="0" cellpadding="5">
                        <tbody>
                            <tr bgcolor="#FFFFFF">
                                <td>
                                    <center>
                                        <b class="sans">Shipping Soon</b>
                                    </center>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>

            <tr>
                <td bgcolor="#FFFFFF" valign="top" colspan="2">
                    <table width="100%" border="0" cellspacing="0" cellpadding="2">
                        <tbody>
                            <tr valign="top">
                                <td width="100%">
                                    <table border="0" cellspacing="0" cellpadding="2" align="right">
                                        <tbody>
                                            <tr valign="top">
                                                <td align="right">&nbsp;</td>
                                            </tr>
                                        </tbody>
                                    </table><input type="hidden" name="qmsjtomutmooy" value="1">

                                    <table border="0" cellspacing="2" cellpadding="0" width="100%">
                                        <tbody>
                                            <tr valign="top">
                                                <td valign="top"><b>Items Ordered</b></td>

                                                <td align="right" valign="top"><b>Price</b></td>
                                            </tr>

                                            <tr>
                                                <td colspan="1" valign="top">1 of: <i>SET OF 3 NAIL FILES AT INTRODUCTION PRICE!!! Premium Manicure Crystal Glass Nail Files Nail File By Cheeky. Menicure / Pedicure Set of 3 Crystal Nail</i><br>
                                                <span class="tiny">Condition: New<br>
                                                Sold by: Cheeky-Beauty (<a href="#">seller profile</a>)<br></span></td>

                                                <td align="right" valign="top" colspan="2">$8.99<br></td>
                                            </tr>
                                        </tbody>
                                    </table><br>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>

            <tr>
                <td bgcolor="#FFFFFF" valign="top" colspan="2">
                    <table width="100%" border="0" cellspacing="0" cellpadding="2">
                        <tbody>
                            <tr>
                                <td>
                                    <b>Shipping Address:</b><br>

                                    <div class="displayAddressDiv">
                                        <ul class="displayAddressUL">
                                            <li class="displayAddressLI displayAddressFullName">MY NAME</li>

                                            <li class="displayAddressLI displayAddressAddressLine1">123 Sesame St.</li>

                                            <li class="displayAddressLI displayAddressCityStateOrRegionPostalCode">Beverly Hills, CA 90210</li>

                                            <li class="displayAddressLI displayAddressCountryName">United States</li>
                                        </ul>
                                    </div><br>
                                    <b>Shipping Speed:</b><br>
                                    Two-Day Shipping<br>
                                </td>

                                <td align="right">
                                    <table border="0" cellpadding="0" cellspacing="1">
                                        <tbody>
                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">Item(s) Subtotal:</td>

                                                <td nowrap="nowrap" align="right">$8.99</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">Shipping &amp; Handling:</td>

                                                <td nowrap="nowrap" align="right">$0.00</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">&nbsp;</td>

                                                <td nowrap="nowrap" align="right">-----</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">Total before tax:</td>

                                                <td nowrap="nowrap" align="right">$8.99</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">Sales Tax:</td>

                                                <td nowrap="nowrap" align="right">$0.00</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">&nbsp;</td>

                                                <td nowrap="nowrap" align="right">-----</td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right"><b>Total for This Shipment:</b></td>

                                                <td nowrap="nowrap" align="right"><b>$8.99</b></td>
                                            </tr>

                                            <tr valign="top">
                                                <td nowrap="nowrap" align="right">&nbsp;</td>

                                                <td nowrap="nowrap" align="right">-----</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

## Using

*   Firefox 20
*   Windows Vista Business 32-bit SP2
*   Firebug
*   Firequery
*   Google CDN-hosted jQuery

# What I've found and why it was insufficient

* * *

## A) No conflict

Many posts on the "is not an error" function indicate that the poster is using "$" instead of "jQuery" and have to do with setting no conflict mode as in [this post](https://stackoverflow.com/questions/7975093/typeerror-undefined-is-not-a-function-evaluating-document). I don't believe this has anything to do with my issue, though the message is similar, because how I'm implementing jQuery is from FireQuery's "jQueryify" function. Also, I'm already using "jQuery" instead of "$".

## B) jQuery versions issues

I also started to suspect the issue may be related to jQuery versions. As of this writing, version 2.0.0 was just released 3 days ago (Apr 18, 2013), and version 1.9.0 is already known to be significantly different from previous versions (including deprecating several popular functions), such that any code using the previous jQuery versions may need to be reworked, either manually or using the [Migrate tool](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/).

### Results

So, I tested my code with KOMODO IDE 6.1.3 to eliminate any issues with how FireQuery implements jQuerify. I used three popular versions of jQuery; here are the results of my cross-browser tests:

```
* Chrome 26.0.1410.64 m
    - jQuery 1.5.1                    
      Uncaught TypeError: Object #<HTMLTableElement> has no method 'wrap'         codeTest_jQuery_2013.04.20_01.php:28
      (anonymous function)                                                        codeTest_jQuery_2013.04.20_01.php:28
      f.resolveWith                                                               jquery.min.js:16
      d.extend.ready                                                              jquery.min.js:16
      c.addEventListener.A                                                        jquery.min.js:16

    - jQuery 1.7.1
      Uncaught TypeError: Object #<HTMLTableElement> has no method 'wrap'         codeTest_jQuery_2013.04.20_01.php:28
      (anonymous function)                                                        codeTest_jQuery_2013.04.20_01.php:28
      n                                                                           jquery.min.js:2
      o.fireWith                                                                  jquery.min.js:2
      e.extend.ready                                                              jquery.min.js:2
      c.addEventListener.B                                                        jquery.min.js:2

    - jQuery 1.9.1
      Uncaught TypeError: Object #<HTMLTableElement> has no method 'wrap'         codeTest_jQuery_2013.04.20_01.php:28
      (anonymous function)                                                        codeTest_jQuery_2013.04.20_01.php:28
      c                                                                           jquery.min.js:3
      p.fireWith                                                                  jquery.min.js:3
      b.extend.ready                                                              jquery.min.js:3
      H                                                                           jquery.min.js:3

* Firefox 20.0.1
    - jQuery 1.5.1
      TypeError: target.css is not a function
      http://localhost/codeTest_jQuery_2013.04.20_01.php
      Line 30

    - jQuery 1.7.1
      (same error)

    - jQuery 1.9.1
      (same error)

* Internet Explorer 8.06
    - jQuery 1.5.1
      Object doesn't support this property or method
      codeTest_jQuery_2013.04.20_01.php, line 28 character 17

    - jQuery 1.7.1
      (same error)

    - jQuery 1.9.1
      (same error) 
```

## C) Wrap target element with div

In my code I threw in something to return the type of object. This is what I used:

```
// report element type
var elementType = target.tagName.toLowerCase();
alert(elementType);   // table 
```

It returns "table", so I know I DO indeed have an html element.

Then I figured maybe since the table element is anonymous (no id or name) that was what was causing the problem? To resolve that I tried to wrap the target tag in a div thusly:

```
// try wrapping target element in a div with id
target.wrap("<div id='target_wrap' />"); 
```

However, it only returned the same "not a function" error, but this time referencing the wrap() method. I verified that ["wrap()" is INDEED a valid jQuery function](http://api.jquery.com/wrap/).

## D) Other thoughts

[This post](https://stackoverflow.com/questions/9435505/jquery-uncaught-typeerror-objectobject-object-has-no-method-slider) mentions that Chrome's version of the "Not a Function" error is the "Uncaught TypeError" error. It suggests multiple instances of jQuery on the same page as a possible cause. Again, this has to do with noConflict, and I'm not exactly certain if this applies to me or not, though I'm leaning towards 'not'.

The only other thing I could come up with is that maybe the issue has somehting to do with discrepancies and differentiation and differences between jQuery objects, DOM objects, and JavaScript objects?

During the process of starting to post this, I found [this jQuery post](https://stackoverflow.com/questions/13669579/object-object-has-no-method-methodex) which may be relevant, but I can't understand it. It seems to recommend implementation of some plugin or package -- how can I tell if this is just someone trying to promote their code, or if it is an actual, "best practice", accepted module?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:21:04.073

> 我想抓住最接近上述字符串的标签，并在其上附加一个 div。

尝试这个 -

```
$("b:contains('Items Ordered')").closest('table').wrap("<div id='target_wrap' />"); 
```

# bash - 如何将 perlbrew 与 zsh 或 bash 一起使用？

> ID：16136735
> 
> 赞同：6
> 
> 时间：2013-04-21T22:09:10.190
> 
> 标签：bash, perl, zsh, perlbrew

现在我*真的很*困惑`perlbrew`……

在`perlbrew.pm`我看到以下内容：

```
 if ($shell =~ /\/zsh\d?$/) {
        $shell_opt = "-d -f";
        # <snip>
    }
    elsif  ($shell =~ /\/bash$/)  {
       $shell_opt = "--noprofile --norc";
    } 
```

AFAICT，这些设置`$shell_opt`意味着，至少如果从`zsh`or调用`bash`，`perlbrew use ...`将`exec`是一个新的外壳，*抑制*所有用户的 rc 类型文件的来源。

我真的很难想象为什么*有人*愿意在裸壳中工作。 **我在这里想念什么？** 是否`perlbrew`意味着与通过外壳的标准交互不同的使用模式？或者它根本不适合`zsh`or的用户`bash`？

**编辑：**澄清一下，为了让我使用`perl`安装的其中一个，`perlbrew`我必须运行类似的东西

```
% perlbrew use perl-5.16.3 
```

当这样做时，上面显示的代码就会运行，结果是一个*没有 rc-files*`perlbrew` `exec`的新 shell 。如果没有我通常的 rc 文件，我看不出在我的 shell 实例中工作的意义。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:30:23.257

不知道为什么会这样，但是该代码通常不会执行。您必须显式执行`perlbrew`二进制文件才能从 bash 访问该代码。但是`use`and`switch`特性（调用包含引用代码的 sub）通常由`perlbrew`shell 函数处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-09T15:47:59.720

我有同样的问题，运行`perlbrew switch ...`产生了一个裸露的 bash shell。但我发现这是因为它在我安装 perlbrew 的同一会话中。虽然我已将它添加到 .bash_profile，但我并没有`~/perl5/perlbrew/etc/bashrc`在我当前的 shell 中进行采购。（旁注：这被使用激怒了`screen`，所以我的会话在断开连接之间持续存在。）

据我所知，`perlbrew`区分两种情况：

1.  它已经拥有它需要的环境；即，您已采购`~/perl5/perlbrew/etc/bashrc`

    *   在这种情况下，`perlbrew switch ...`自动指向`perl`指定的版本。 ***没有生成子shell。*** 这在注销之间仍然存在。
2.  你有一个裸壳，或者一个无法使用的环境`perlbrew`（例如，~/perl5/perlbrew/etc/bashrc` 没有被获取）。

    *   由于它无法在当前环境中运行，因此`perlbrew`举起手来，并***产生了一个新的 subshel​​l***。这是当它执行`--norc`你找到的代码，并使用一个裸壳来填充它自己的环境变量。
    *   请注意，这种情况也可能发生在脚本中。有关详细信息，请参阅[Shell 脚本中的 Perlbrew](http://perlbrew.pl/Perlbrew-In-Shell-Scripts.html "Shell 脚本中的 Perlbrew")。

为什么该项目要在 Senario #2 中生成一个裸壳？是的，这是一个很好的问题，但我想得越多，我相信他们有他们的理由。我目前对此的看法是，此时`perlbrew`正在寻找自己。您的环境（可能由您的 rc 配置）不可用。在一个病态的情况下，它可能会取消设置它需要的所有环境变量。无论如何，subshel​​l 逻辑是一种非常安全的方法，可以确保`perlbrew`它按需要运行。

最后一点 - 如果投入`source ~/perl5/perlbrew/etc/bashrc`意味着`.bash_profile` 创建一个*新文件*，那么您的 .bashrc 可能需要*明确地*从该文件中获取，因为`.profile`可能不再这样做：

> ```
> $ head -3 .profile
> # ~/.profile: executed by the command interpreter for login shells.
> # This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
> # exists. 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T22:19:31.400

# 编辑

别介意：我没有意识到生成的 shell 是交互式使用的。

* * *

在 shell 中运行的程序已经获取了它的 rc 文件，无论这些 rc 文件做什么，它都会被卡住。在病态的情况下， .bashrc 可能别名`echo`为`rm -rf`，导致随机删除一些不幸命名的文件和目录（并用垃圾错误填充控制台或日志文件）。`perlbrew.pm`需要通过 shell 运行一些命令，并注意确保它不会意外地破坏任何东西，因为某些 rc 文件中有一些奇怪的东西。

没有人类用户愿意在没有他们的 rc 文件的情况下工作。然而，人类可以弥补他们的个人设置与规范的差异。`perlbrew`不能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T00:15:23.657

您需要在脚本中获取 perlbrew rc 文件来设置路径，而无需启动子 shell。

来自：[https](https://github.com/gugod/App-perlbrew/wiki/Perlbrew-In-Shell-Scripts) ://github.com/gugod/App-perlbrew/wiki/Perlbrew-In-Shell-Scripts ：

```
#!/bin/bash
## These 3 lines are mandatory.
export PERLBREW_ROOT=/opt/perlbrew
export PERLBREW_HOME=/tmp/.perlbrew
source ${PERLBREW_ROOT}/etc/bashrc

## Do stuff with 5.14.1
perlbrew use 5.14.1
perl /app/my-modern-program 
```*

# backbone.js - Why is meta-information not rendered in this MarionetteJS composite view?

> ID：16136736
> 
> 赞同：1
> 
> 时间：2013-04-21T22:09:18.920
> 
> 标签：backbone.js, marionette

I am getting this unexpected behavior of loading meta information with a CompositeView with MarionetteJS. The JSON from server-side looks like:

```
{
    "meta": {
        "total": 2
    },
    "movies": [
        {
            "category": "Action",
            "description": "Another story goes ....",
            "id": 1,
            "stars": "4.0",
            "title": "My test movie"
        },
        {
            "category": "Action",
            "description": "the story goes....",
            "id": 2,
            "stars": null,
            "title": "my second movie"
        }
    ]
}

```

I use a Backbone collection to set the meta information like:

```
MA.Collections.Movies = Backbone.Collection.extend({
  url: '/api/movies.json',
  parse: function(data) {
    this.meta = new MA.Models.MetaMovie(data.meta);
    return data.movies;
  }
});

MA.addInitializer(function() {
  MA.Collections.Movies.model = MA.Models.Movie;
})

```

But when I try to access this meta variable from the CompositeView, the collection is initialized properly, while the meta information seems to be lost. Any ideas how to provide this meta information to the model of a CompositeView?

PS The console output looks like:

![composite view output](https://i.stack.imgur.com/ok5AL.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:56:28.037

Setup a callback from fetch and use it to set the value of meta.total directly onto your metaMovie model instance

**movies.js:**

```
MA.addInitializer(function(){
  var self = this;
  var metaMovie = new MA.Models.MetaMovie({total: 1});

  MA.collections.movies = new MA.Collections.Movies();
  MA.composites.movies = new MA.Views.Composites.Movies({
    itemView: MA.Views.Items.Movie,
    model: metaMovie,
    collection: MA.collections.movies
  });
  var p = MA.collections.movies.fetch();

  // see http://api.jquery.com/jQuery.ajax/ for details
  p.done(function(data) {
    self.metaMovie.set({total: data.total});
  });
}); 
```

# dart - In Dart and Pub, should I add pubspec.lock to my .gitignore?

> ID：16136739
> 
> 赞同：47
> 
> 时间：2013-04-21T22:09:56.280
> 
> 标签：dart, dart-pub

Should I add this generated file to my `.gitignore` so that it doesn't show up in my repository?

Should `pubspec.lock` be included in my repository?

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-21T22:09:56.280

这个答案有两部分，类似于[这个问题中关于 Ruby`bundler`](https://stackoverflow.com/questions/4151495/should-gemfile-lock-be-included-in-gitignore)的问答。

## 应用程序包

如果您正在处理[应用程序包](http://pub.dartlang.org/doc/glossary.html#application-package)，那么您应该将该`pubspec.lock`文件保存在您的存储库中，作为您的依赖项的快照。

*来自酒吧词汇表：*

> 应用程序包应该将它们的锁定文件检查到源代码控制中，以便在应用程序上工作的每个人以及应用程序部署的每个位置都有一组一致的依赖项。

## 库包

但是，如果您正在处理[库包](http://pub.dartlang.org/doc/glossary.html#library-package)，则不应签入锁定文件。

*来自酒吧词汇表：*

> 库包不应将其锁定文件检查到源代码控制中，因为它们应支持一系列依赖版本。

* * *

另请参阅[锁文件的 Pub 词汇表条目](http://pub.dartlang.org/doc/glossary.html#lockfile)

# python - matplotlib 中的最后一个图形标记未完全显示

> ID：16136748
> 
> 赞同：1
> 
> 时间：2013-04-21T22:10:45.917
> 
> 标签：python, matplotlib

我是 matplotlib 的新手。我在 matplotlib 中的图表没有完全显示最后一个标记。我尝试增加图形大小，但没有任何变化。我需要扩展图形，使其显示最后一个标记，并将线延伸到标记之外。这是我的代码：

```
 import numpy as np
    import matplotlib.pyplot as plt

    x = np.array([1,2,5,10,15,20])
    y = np.array([0.049,0.080,0.123,0.166,0.209,0.335])

    A = np.vstack([x, np.ones(len(x))]).T
    m, c = np.linalg.lstsq(A, y)[0]

    x = np.array([0,1,2,5,10,15,20])
    y = np.array([c,0.049,0.080,0.123,0.166,0.209,0.335])

    plt.plot(x, y, 'r*', label='Original data', markersize=7)
    plt.plot(x, m*x + c, 'b', label='Fitted line')
    fig = plt.figure(1)
    fig.set_size_inches(9,8)
    fig.suptitle('THE GRAPH OF ABSORBANCE AGAINST CONCENTRATION',fontsize=20)
    plt.xlabel('CONCENTRATION',fontsize=15)
    plt.ylabel('ABSORBANCE',fontsize=15)
    plt.grid()
    fig.savefig('graph.jpg') 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:19:23.393

（主要复制自[How to autoscale y axis in matplotlib?](https://stackoverflow.com/questions/15375791/how-to-autoscale-y-axis-in-matplotlib?lq=1)）

你想要`margins` [医生](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.margins)

前任

```
ax.margins(y=.1, x=.1) 
```

另请参阅[当图在图形边缘运行时添加边距](https://stackoverflow.com/questions/14493334/add-margin-when-plots-run-against-the-edge-of-the-graph/14498142#14498142)

`matplotlib`1.3.x 将包含这些`rcParam`值`axes.xmargin`并`axes.ymargin`设置一个非零边距（它的代码已经在 master 中）。

# java - Java - 带有 char[] 元素的 HashSet

> ID：16136750
> 
> 赞同：3
> 
> 时间：2013-04-21T22:11:02.407
> 
> 标签：java, arrays, data-structures, char, hashset

我有一个需要帮助的问题。我有一个`HashSet`包含`char[]`. 问题是我无法使用该方法检查值是否存在`contains()`，即使该值存在于`HashSet`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T22:14:16.910

你不能`char[]`在 a 中使用，`HashSet`因为 a 的实现是基于身份的，而不是基于内容的——换句话说，如果两个数组具有相同的内容，这并不意味着它们的哈希码是相同的。改为使用。`hashCode()``equals``char[]``char[]``String`

# android - java.net.SocketException: Host is unresolved?

> ID：16136757
> 
> 赞同：1
> 
> 时间：2013-04-21T22:11:35.447
> 
> 标签：android, host, ftp-client, socketexception

I had created a user in FileZilla Server App.It's server Address is "127.0.0.1" and it's port is "14147".I can connect to it from `FileZilla` and also browse it in my browser whitout any problem.But I can not connect to it with my Android emulator.This is my code:

```
public FTPClient ftp = new FTPClient();
ftp.connect("127.0.0.1:14147"); 
```

But I get this in Logcat:

```
java.net.SocketException: Host is unresolved: 127.0.0.1:14147 
```

Is there any thing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:18:56.320

服务器在您的 PC 上运行，IP`127.0.0.1`在这里表示 localhost，因此当您将 localhost 放在您的 android 应用程序上时，它会尝试访问自己的 localhost。

在您的机器上执行 ipconfig，找出您机器的 localhost 解析为什么，并使用该 IP 地址而不是 localhost 进行 ftp 连接。

# python - 这个 SQL 查询的 django 等价物是什么？

> ID：16136758
> 
> 赞同：0
> 
> 时间：2013-04-21T22:11:38.563
> 
> 标签：python, mysql, django, django-models, django-queryset

我对 django 很陌生，我正在尝试完成一些重复性任务。我想知道以下任务的 django 等价物是什么。

1.  我想选择某个日期范围内的所有值。

例如：假设有一个表叫考试成绩

```
 User Physics  Chemistry Mathematics Total  Date
 bill    98       94          Pass    284   02/03/2013
 murray  0        89          Fail     89   02/03/2013
 bill    10       20          Pass     90   01/29/2013 
```

现在假设我想编写一个 django 命令，用于获取用户 bill 的所有数学科目的对象。

在这里我会写一些类似的东西

```
scores = Score.objects.filter(user = "bill", Mathematics = "pass") 
```

上面代码的问题是当我做类似的事情时

```
 for s in scores:
     print "Physics score =", s.Physics 
```

控制永远不会出现在 print 语句中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:35:39.310

鉴于您在上面显示的数据和查询，*没有*匹配 'bill' 和 'pass' 的元素。有匹配'bill'和'Pass'的元素，这是另一回事。

不过，我不明白你关于日期范围的观点的相关性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:35:58.143

所以我认为你要的是这样的东西

```
math_scores = Score.objects.filter(user='bill', date__range=(timezone.now() - datetime.timedelta(days=7), timezone.now()).values_list('mathematics', flat=True) 
```

这将为您提供过去一周内账单的所有数学分数，例如

```
[92, 60] 
```

这是你想要做的还是我误解了这个问题？

# c# - C# MVC4 Login Actions Based on Route Taken to Login

> ID：16136759
> 
> 赞同：3
> 
> 时间：2013-04-21T22:11:46.083
> 
> 标签：c#, url, asp.net-mvc-4, login, authorization

In my C# MVC4 application, I have two tabs at the top of every view. One labeled edit and the other labeled Admin. When either of these two tabs are clicked the user is redirected to a login page. In the Login ActionResult, after the user has been validated, I perform a check to see if the user belongs to specific AD groups that I use as roles. This all works correctly. My issue is trying to detect and perform actions based upon whether the user accessed login by clicking Edit or by clicking Admin.

How can I grab this information? Ive tried something like:

```
if(HttpContext.Request.UrlReferrer.OriginalString.Contains("Edit")) 
```

but the Url that contains is something like `Account/Login`.

My current code is:

```
public ActionResult Login(LoginModel model, string returnUrl)
        {
            //Checks if user exists in Active Directory
            if (ModelState.IsValid && Membership.ValidateUser(model.UserName, model.Password))
            {
                    //Logs user in by creating a cookie
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

                    //Checks to see if user belongs to a group with Edit or Admin Priviledges
                    if ((Roles.IsUserInRole(model.UserName,"TCL-CAdmin")) || (Roles.IsUserInRole(model.UserName, "TCL-CGroup")))
                    {
                        return RedirectToAction("Index", "Home");
                    }
                    else
                    {
                        return RedirectToAction("Index_Perm", "Home");
                    }
                }
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return View(model);
        } 
```

The two tabs are created in my layout.cshtml like this:

```
 <ul id="menu">
                        <li>@Html.ActionLink("Edit", "Login", "Account")</li>
                        <li>@Html.ActionLink("Admin", "Admin", "Home")</li>
                    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:22:14.393

我看到您没有`returnUrl`在控制器操作中使用参数，您可以像这样传递它：

`@Url.Action("Login", "Account", new { returnUrl = Request.RawUrl })`

除此之外，您还可以传递另一个参数作为上下文，例如：

`@Url.Action("Login", "Account", new { returnUrl = Request.RawUrl, context = "Edit" })`

并将您的操作签名更改为：

`public ActionResult Login(LoginModel model, string returnUrl, string context)`

你是这个意思吗？

# django - 派生的基于 django 类的视图和上下文数据

> ID：16136760
> 
> 赞同：0
> 
> 时间：2013-04-21T22:11:46.907
> 
> 标签：django, django-class-based-views

我有个问题。我至少有三个类和一个上下文数据滴度，它是页面的标题。

一个通用的表单类：

```
class Myformview(generic.FormView):
    form_class = None
    template_name = None
    titre=None

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        """on a besoin pour le method decorator"""
        return super(Myformview, self).dispatch(*args, **kwargs)

    def get_context_data(self, *args, **kwargs):
        context= super(Myformview, self).get_context_data(*args, **kwargs)
        if self.titre is not None:
            context.update({'titre':self.titre})
        return context 
```

因为我有不同的方式来导出基类来导出数据：

```
class ExportViewBase(FormView):
    template_name = 'param_export.djhtm'  # nom du template
    model_initial = None  # model d'ou on tire les dates initiales
    extension_file = None
    nomfich = None
    debug = False
    form_class = None

    def export(self, query):  
        """
        fonction principale mais abstraite
        """
        raise django_exceptions.ImproperlyConfigured(
            "attention, il doit y avoir une methode qui extrait effectivement")

    def get_initial(self):
        """gestion des donnees initiales"""
        if self.model_initial is None:
            raise django_exceptions.ImproperlyConfigured("un modele d'ou on tire les dates initiales doit etre defini")
        date_min = self.model_initial.objects.aggregate(
            element=models_agg.Min('date'))['element']
        date_max = self.model_initial.objects.aggregate(
            element=models_agg.Max('date'))['element']
        return {'date_min': date_min, 'date_max': date_max}

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        """on a besoin pour le method decorator"""
        return super(ExportViewBase, self).dispatch(*args, **kwargs)

    def form_valid(self, form):
        """si le form est valid"""
        reponse = self.export(query=form.query)  
        if self.nomfich is None:
            raise django_exceptions.ImproperlyConfigured('nomfich undefined')
        if self.extension_file is None:
            raise django_exceptions.ImproperlyConfigured('extension_file undefined')
        reponse["Cache-Control"] = "no-cache, must-revalidate"
        reponse['Pragma'] = "public"
        reponse["Content-Disposition"] = "attachment; filename=%s_%s.%s" % (self.nomfich, time.strftime("%d_%m_%Y-%H_%M_%S",time.localtime()), self.extension_file)
        return reponse 
```

以及要导出的有效类：

```
class Export_view_sql(export_base.ExportViewBase):
    extension_file = "sql"
    debug = True
    nomfich = "export_full"
    model_initial=models.Ope
    form_class = export_base.Exportform_ope
    titre="export sql"
    def export(self, query):
        pass#code to export 
```

但是，它不会按预期更新滴度。这是什么原因？

如果我设置滴度`ExportViewBase`，它可以工作，但`Export_view_sql`不能。

# ssl - 即使在使用 TrustManager 忽略它后也会出现 SSL 错误

> ID：16136768
> 
> 赞同：0
> 
> 时间：2013-04-21T22:13:28.137
> 
> 标签：ssl

我正在尝试使用以下代码绕过证书：

私有静态 HttpClient wrapClient(HttpClient base) 抛出 AGException { 尝试 { SSLContext ctx = SSLContext.getInstance("TLS");

```
 X509TrustManager tm = new X509TrustManager()
   {
     public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException
     {
     }

     public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
     }

     public X509Certificate[] getAcceptedIssuers() {
       return null;
     }
   };
   ctx.init(null, new TrustManager[] { tm }, null);

   SSLSocketFactory ssf = new SSLSocketFactory(ctx,SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

   ClientConnectionManager ccm = base.getConnectionManager();

   SchemeRegistry sr = ccm.getSchemeRegistry();

   sr.register(new Scheme("https", 443, ssf));

   return new DefaultHttpClient(ccm, base.getParams());
 }
 catch (NoSuchAlgorithmException nsaex)
 {
   throw new AGException(nsaex, "Not able to get the SSL Context");
 }
 catch (KeyManagementException kmex) {
     throw new AGException(kmex, "Not able to get the SSL Context");
 } 
```

}

但仍然收到以下错误 javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated

简单介绍一下我的任务：

我正在使用腻子隧道到服务器并通过 https 调用进行 SOAP 以连接到该服务器，但即使尝试使用上述代码也会收到相同的错误。

任何帮助/建议都会非常有用。提前致谢。

-尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:08:42.560

不要使用不安全的 TrustManager。

这里的问题是对等方根本没有出示证书。

# ios - iOS：在更改视图之前设置属性

> ID：16136769
> 
> 赞同：0
> 
> 时间：2013-04-21T22:13:28.437
> 
> 标签：ios, objective-c

我设置了一个 IBAction 以在选择表格行并按下完成按钮后更改视图。

但是，当我运行 presentViewController:animated 时，我失去了我的导航控制器。

所以我没有办法去任何地方，然后如果我改为执行“performSegueWithIdentifier”，我的属性不会保存..所以没有值被传递......例如：

```
 ViewController *addViewController = (ViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"V_SignIn"];
 addViewController.LoadAction = @"NoSession";
 [addViewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
 [self presentViewController:addViewController animated:YES completion:NULL]; 
```

^^ 该代码有效，但删除了我的导航工具栏...

```
ViewController *addViewController = [[ViewController alloc] init];
addViewController.LoadAction = @"TEST";
[self performSegueWithIdentifier:@"segue" sender:self]; 
```

^^ 执行 segue 很好，但是当我在新视图中 NSLog 时，'LoadAction' var 等于（NULL）。

基本上，如何设置 @property 而无需使用 addViewController var 更改视图？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:47:44.713

在您的第一个场景中`-presentViewController:animated:completion:`，您需要`-pushViewController:animated:`在导航控制器上使用而不是 以避免隐藏它（相反，您将使用`-popViewController:animated:`，也称为导航控制器来关闭它，而不是`-dismissViewControllerAnimated:completion:`）：

```
ViewController *addViewController = (ViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"V_SignIn"];
addViewController.LoadAction = @"NoSession";
[self.navigationController pushViewController:addViewController animated:YES]; 
```

正如 Wain 所指出的，在第二种情况下，您需要像这样`addViewController`进行配置`-prepareForSegue:sender:`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"segue"]) {
        ViewController *addViewController = (ViewController*)segue.destinationViewController;
        // perform setup on addViewController
        addViewController.LoadAction = @"TEST";
        // ...
    } else if ([segue.identifier isEqualToString:@"someOtherSegue"]) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:39:28.687

从第二段代码开始，只需使用`[self performSegueWithIdentifier:@"segue" sender:self];`来创建和显示新视图。还要实现`- prepareForSegue:sender:`（在触发上述代码的视图控制器中）来执行新视图控制器的配置。

# joomla2.5 - Joomla 2.5.9 用户注册

> ID：16136770
> 
> 赞同：0
> 
> 时间：2013-04-21T22:13:57.747
> 
> 标签：joomla2.5, registration

我正在使用 Joomla 2.5.9 并使用标准注册页面，尽管我在尝试注册某人时遇到了所有验证错误。

它告诉我我的名字无效，我的用户名无效并且我的密码不匹配，当我三次检查它们是否匹配时。

有人有想法吗？

# html - 在悬停时锚定所有兄弟姐妹

> ID：16136779
> 
> 赞同：1
> 
> 时间：2013-04-21T22:15:47.567
> 
> 标签：html, css, hover, siblings

我正在尝试在 a`<a>`悬停之后设置所有节点的样式。

HTML代码是

```
<a href="#">test</a>
<p>Is styles</p>
<p>Is not styled</p>
<p>Is not styled</p>
<p>Is not styled</p>
<p>Is not styled</p> 
```

CSS代码是

```
a:hover + p {
    background: #ffbbff;
} 
```

这是一个[小提琴](http://jsfiddle.net/bKvMw/)。问题是，只有第一个兄弟是样式化的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:17:57.487

试试[~（通用兄弟组合器）](http://www.w3.org/TR/css3-selectors/#general-sibling-combinators)

```
a:hover ~ p {
    background: #ffbbff;
} 
```

[http://jsfiddle.net/bKvMw/1/](http://jsfiddle.net/bKvMw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:18:08.783

`+`只选择相邻的兄弟姐妹。你想用`~`

请参阅[相邻兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)与[通用兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:18:28.850

你需要一个通用的兄弟选择器，`+`是一个相邻的兄弟选择器

试试这个：

```
a:hover ~ p {
    background: #ffbbff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T22:49:57.740

您使用了错误的选择器。`+`选择[相邻的兄弟姐妹](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)。您需要使用[通用的兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors) `~`：

```
a:hover ~ p {
    background: #ffbbff;
} 
```

[看这个演示。](http://jsfiddle.net/bKvMw/7/)

如果您愿意，您甚至可以组合这些选择器：

```
a:hover ~ p {
    background: #ffbbff;
}

a:hover + p {
    background: #ffffbb;
} 
```

[看这个演示。](http://jsfiddle.net/bKvMw/8/)

# php - 双预赛登录验证

> ID：16136781
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:16:12.307
> 
> 标签：php, regex, preg-match

我想验证用户名登录 - 它只能接受字母、数字和取消标记，最多 20 个符号，这是我的正则表达式：

正则表达式：`^[\w_]{4,20}$` [Rubular 的工作示例](http://rubular.com/r/ic79bM7nL7)

它应该接受这个登录：

```
login
login_login
_login
_87login
837420
login898 
```

但是当 login 只包含下划线时它应该返回 false：

```
 ________ 
```

如何在一次怀孕中做到这一点？那是我的问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:30:37.890

`/^(_?[a-z0-9-])+$/i`

这接受由字母、数字、连字符和下划线组成的字符串，但不允许`__`. 另请注意，这不会检查长度，您必须使用`strlen()`. 它也不允许尾随下划线，但您的规范并未说明这是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:40:32.580

如果您只想检查是否至少有一个字母/数字，请使用[前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^(?=.*?[a-zA-Z0-9])\w{4,20}$ 
```

# javascript - How to execute when between heights using jquery

> ID：16136784
> 
> 赞同：1
> 
> 时间：2013-04-21T22:16:46.983
> 
> 标签：javascript, jquery

I am wanting to alert someone but only when the scroll height is between a curtain height.

For instance.

When the person scrolls between 2000 pixels and 2500 pixels

I know how to do greater and smaller but how to do between?

```
var currentscroll = jQuery(this).scrollTop();

if(currentscroll > 2000){
alert('this');
} 
```

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:19:02.070

尝试这个：

```
var currentscroll = jQuery(this).scrollTop();

if((currentscroll > 2000) && (currentscroll < 2500)){
alert('this');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:18:24.740

不就是这样吗：

```
if(currentscroll > 2000 && currentscroll < 2500){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:20:22.513

```
if (currentScroll > 2000 && currentScroll < 2500) 
```

?

# android - 如何将通知作为通知而不是在进行中

> ID：16136785
> 
> 赞同：1
> 
> 时间：2013-04-21T22:17:00.777
> 
> 标签：android, android-notifications

这是我的代码：

```
Notification n = new Notification();
n.icon = R.drawable.ic_launcher;
n.tickerText="test";
n.defaults |= Notification.DEFAULT_ALL;

Intent dummyIntent = new Intent();
dummyIntent.setAction("dummy");
PendingIntent pi = PendingIntent.getBroadcast(c, 0, dummyIntent, 0);
n.setLatestEventInfo(c, "test","test", pi);

NotificationManager nm = (NotificationManager)c.getSystemService(Context.NOTIFICATION_SERVICE);
   nm.notify(1, n); 
```

我想把它作为通知而不是持续进行。但是此通知显示为 onGoing？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:28:24.427

您可以通过这种方式构建通知，这是创建通知的新方法，让您可以比旧方法更好地自定义它们，正如您[在此处](http://developer.android.com/guide/topics/ui/notifiers/notifications.html "这里")和[此处](http://developer.android.com/design/patterns/notifications.html "这里")看到的那样。

```
NotificationManager mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
notificationBuilder = new NotificationCompat.Builder(mContext);
notificationBuilder.setContentTitle("Title")
                           .setContentText("Text")
                           .setSmallIcon(R.drawable.icon)
                           .setContentIntent(contentIntent)
                           .setOngoing(false)
                           .setTicker("Ticker Text"); 
```

`setOngoing()`您可以将其设置为`true`或`false`。

# angularjs - 如何通过 AngularJS 指令将值传递给函数？

> ID：16136798
> 
> 赞同：1
> 
> 时间：2013-04-21T22:19:03.817
> 
> 标签：angularjs, angularjs-directive

我的 app.html 中有一个带有类似属性的指令

```
<tr ng-repeat="post in posts | filter:searchTerm | limitTo:limit ">
    <td>
        <span eachpost="{{post.id}}" id="{{post.id}}"></span>
           …
            other html 
            …
    </td>
</tr> 
```

和 angular.js 文件：

```
App.directive ("eachpost", function () {
    return {
        restrict: "A",
        scope:{
            id:"@"
        },
        templateUrl: '_eachpost.html',
    }
}); 
```

该指令工作正常并通过，我可以在“_eachpost.html”中使用{{id}}，但我也在尝试启动一个应该使用“id”值的函数。我相信这是链接属性，但不确定如何将其包含在指令中。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:23:10.987

```
App.directive ("eachpost", function () {
return {
 restrict: "A",
 scope:{
 id:"@"
 },
 templateUrl: '_eachpost.html',
 link: function(scope, element, attrs){

     scope.$watch("id", function(newValue){
     } );

 }
}
}); 
```

# javascript - Popup window when checkbox has not been checked

> ID：16136800
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:19:15.080
> 
> 标签：javascript

Is this jQuery, or JavaScript? My assignment disallows the use of jQuery.

```
function calculateTotal() {
    var collection = document.getElementsByName('deliveryType'),
        cds = document.getElementsByName('cd[]'),
        cdTotal = 0,
        L = collection.length;

    while(L--) {
        if(collection[L].checked) {   // get shipping costs
            collection = Number(collection[L].getAttribute('title')); 
            break;
        }
    }

    L = cds.length;
    while(L--) {
        if(cds[L].checked) {    //add total prices
            cdTotal += Number(cds[L].getAttribute('title'));
        }
    }

    //  output total
    document.getElementById('total').value = collection + cdTotal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:25:08.463

只是 JavaScript。如果您使用 JQuery，您会看到一个美元符号“$”或“JQuery”关键字。阅读有关 API 文档的更多信息：http: [//api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:26:40.613

这是纯 javascript - 如果您不确定，请在某处寻找包含 jQuery 的内容。它通常看起来像这样：

`<script type="text/javascript" src="jquery.js"></script>`

`F12`您还可以通过在浏览器中按来检查加载了哪些资源。

# php - SimpleXML to loop through and check child elements

> ID：16136801
> 
> 赞同：1
> 
> 时间：2013-04-21T22:19:20.117
> 
> 标签：php, xml, simplexml

I am not that great with XML but I'm pretty good with PHP. I need to use an XML file as a "database" of sorts. It contains various user information. Including login information. The XML is set up as such:

```
<employee ssnum="">
<first_name></first_name>
<last_name></last_name>
<contact_info>
    <office_phone></office_phone>
    <email></email>
    <cell_phone></cell_phone>
</contact_info>
<access_info level="user">
    <username></username>
    <password></password>
</access_info>
<department></department>
<date_started></date_started>
<position></position>
</employee> 
```

I need some way to check the username and password to see if they match, and log in the respective user. I am unsure of how to check the username/password pairs, and how to return the proper user for login. There was an alternate way to do this I was shown via DOMdocument and then mysql queries to use the xml file as a database of sorts, but I'm not sure that is the easiest way, or how that would work.

This is not for any serious kind of work, it is a learning project.

Any helps would be appreciated, thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:26:33.253

似乎你被告知胡说八道[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)。或者——更有可能——你误解了一些东西。您将不会使用 mysql 查询，您将使用**xpath 查询**来访问 xml 中的节点。您确实应该使用`DOMDocument`and[`DOMXPath`](http://www.php.net/manual/en/class.domxpath.php)来访问节点。

下面是一个如何读取或修改密码的示例：

```
$doc = new DOMDocument();
$doc->load('employee.xml');

$selector = new DOMXpath($doc);

$result = $selector->query('/employee/access_info/password');

// read password:
$password = $result->item(0)->nodeValue;

// set password:
$result->item(0)->nodeValue = 'secret';

// save xml
$doc->save('employee.xml'); 
```

如果您需要有关 XPath 的更多信息，可以按照本[教程](http://www.w3schools.com/xpath/)进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:03:52.780

我希望有几件事可以帮助您理清思路，并扩展 hek2mgl 的良好和适当的建议。我意识到它正在学习等等，但是如果正确完成，您根本不需要循环（当然假设您只需要访问一个当前试图登录的员工）。在 hek2mgl 链接到的教程中，它向您展示了谓词的全部内容，您应该使用一个在 xpath 查询中立即通过用户输入的用户名自动选择正确的员工，然后将密码与密码进行比较由用户输入并查看它们是否匹配。这样就不需要知道任何关于 $result 长度的信息（当然，它的有效长度为 1 除外）。假设包含所有员工元素的 xml 文件有一个名为“员工”的根容器元素

```
<?php

//below is php heredoc string.
//just a simulation of an employees.xml file which
//obviously contains multiple employee elements
//within a root 'employees' element
$xmlStr = <<<XMLBookendMarker
<employees>
<employee ssnum="555662222">
<first_name></first_name>
<last_name></last_name>
<contact_info>
    <office_phone></office_phone>
    <email></email>
    <cell_phone></cell_phone>
</contact_info>
<access_info level="user">
    <username>jackass</username>
    <password>letmein</password>
</access_info>
<department></department>
<date_started></date_started>
<position></position>
</employee>
<employee ssnum="555991111">
<first_name></first_name>
<last_name></last_name>
<contact_info>
    <office_phone></office_phone>
    <email></email>
    <cell_phone></cell_phone>
</contact_info>
<access_info level="user">
    <username>god</username>
    <password>qwerty</password>
</access_info>
<department></department>
<date_started></date_started>
<position></position>
</employee>
</employees>
XMLBookendMarker;

//below is the information entered by the user,
//which we will use to find the username in the
//employees.xml and then check if the password matches
$enteredUsername = 'god';
$enteredUserPass = 'qwerty';

$doc = new DOMDocument();
$doc->loadXML($xmlStr);

$selector = new DOMXpath($doc);

//the quote styles are important below
$result = $selector->query("/employees/employee/access_info[username='$enteredUsername']/password");
//if length should happen to be longer than 1, well you screwed up long
//time ago by allowing multiple same usernames, and that can't be allowed!
//if length is 0, then there is no such username
if ($result->length === 0) {
    die('NO SUCH USERNAME EXISTS');
} elseif ($result->length > 1) {
    die('ERROR: CONSULT ADMIN');
}
//ok, now we know $result->length is 1
$password = $result->item(0)->nodeValue;

if ($password == $enteredUserPass) {
    echo 'The password matches! logging in....';
    //now we might want some other info about the employee
    $employee = $result->item(0)->parentNode->parentNode;
    //just demoing showing the employee
    echo '<br><br>'.htmlentities($doc->saveXML($employee));
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:15:02.187

我的第一个想法是使用 xml_parse ，或者按照[Jon的建议，](https://stackoverflow.com/users/1745573/jon)[在 PHP 手册中](http://www.php.net/manual/en/simplexml.examples-basic.php)也使用 SimpleXML示例，[请参阅这个问题](https://stackoverflow.com/questions/6578832/how-to-convert-xml-into-array-in-php)

# android - Android 检查网络信号强度是否低

> ID：16136803
> 
> 赞同：0
> 
> 时间：2013-04-21T22:19:23.267
> 
> 标签：android, signal-strength

我正在开发一个 android 应用程序，它使用 GPS 不断检查我的位置，如果超过 3 分钟没有移动，它会自动停止记录。但有时可能由于信号不佳而无法自动停止。

无论如何确定我的android代码中的网络信号差吗？我在 PhoneStateListener 上看过很少的帖子，但是如何检查信号是否在 android 代码中很差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:38:41.103

你没有发布你的代码，所以我假设你有一个`WifiManager`对象，你可以使用它来请求一个`getConnectionInfo()`方法。除此之外，您应该创建一个扩展的类，该类`BroadcastReceiver`将实现`onReceive`您可以获得的列表，`ScanResult`您将获得有关您的网络的所有信息，包括信号强度。

这个[链接](http://marakana.com/forums/android/examples/40.html)，会帮助你。

# c - 试图将一个结构的字段复制到c中的另一个结构？

> ID：16136808
> 
> 赞同：0
> 
> 时间：2013-04-21T22:19:34.987
> 
> 标签：c, struct, compiler-errors, typedef

所以我有 C 语言中的 Connect Four 游戏的代码。我现在使用的结构是：

```
typedef struct {int value; board brd; } state ;
typedef char board[8][8] ;
#define BOARD(p_S) (((state *) (p_S)->brd) 
```

我正在尝试编译 main 函数，但我在这一行不断收到错误：

```
BOARD(&currentstate) = BOARD(p_nextstate) ; 
```

其中 currentstate 的类型是 state 而 p_nextstate 是一个指向状态的指针。我需要更改当前状态的 board 字段以匹配 p_nextstate 的字段，但是当我编译时出现此错误：

```
error: incompatible types when assigning to type "board" from type "char(*)[8]" 
```

完整的代码放在这里太长了，我想我已经包含了所有相关的行，但如果没有，我会添加它们。有没有正确的方法来改变这条线？任何帮助表示赞赏。编辑：缺少括号是我的错误，它在代码中，但我在这里打错了。它现在已修复以匹配代码。这是完整的主要功能：

```
 int main( int argc, char * argv[]){

  tree T ;
  state currentstate, *p_nextstate ;
  int depth ;

  initialize_board(BOARD(&currentstate)) ;
  do{
    printf("Enter game tree depth: ") ;
    scanf("%d", &depth) ;
  }while(depth < 1) ;
  print_board(BOARD(&currentstate)) ;

  while(get_move(BOARD(&currentstate), PLAYER) != 0){
    print_board(BOARD(&currentstate)) ;
    if(have_winner(BOARD(&currentstate)) == TRUE){
      printf("You win.\n") ;
      exit(0) ;
    }

    printf("Calculating my move...\n") ;
    init_tree(&T) ;
    if(make_state_root(&T, currentstate, NULL, NULL) == ERROR){
      printf("Memory Allocation error in move().\n") ;
      exit(-1) ;
    }

    printf("Board is now:\n") ;
    print_board(BOARD(p_nextstate)) ;
    printf("Minimax value is %d\n", VALUE(p_nextstate)) ;
    if(have_winner(BOARD(p_nextstate)) == TRUE){
      printf("I win.\n") ;
      exit(0) ;
    } else if (VALUE(p_nextstate) == WIN){
    printf("I concede.\n") ;
    exit(0) ;
       }
     BOARD(&currentstate)  =  BOARD(p_nextstate) ;
     destroy_tree(&T, free) ;
   }

   return 0 ;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:22:31.453

宏基本上只是复制和粘贴替换。尝试替换它，看看你得到什么代码。

```
((state *) (&currentstate)->brd) = ((state *) (p_nextstate)->brd); 
```

编辑：没关系，你修复了宏

我认为问题可能是你的定义`board`没有在你定义你的结构时定义，所以它认为你的`brd`成员应该有一些其他类型命名为`board`. 尝试切换两个 typedef 的顺序，看看是否有帮助。

# android - TextView 忽略渐变 - Android

> ID：16136816
> 
> 赞同：0
> 
> 时间：2013-04-21T22:20:40.717
> 
> 标签：android

我有一个 TextView 覆盖在图像上，渐变作为背景。但是，正如您在图像中看到的那样，由于某种原因，TextView 使用 android:startColor 颜色作为纯色背景。

![在此处输入图像描述](https://i.stack.imgur.com/rduND.jpg)

渐变.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
    android:endColor="#00000000"
    android:startColor="#FF999999"
    android:angle="90"/>    
</shape> 
```

在 MainActivity 中创建

```
 View overlay = (View) findViewById(R.id.overlay);
    overlay.setBackgroundResource(R.drawable.gradient);
   FrameLayout.LayoutParams params =
      new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, 250);
    params.gravity = Gravity.BOTTOM;
   overlay.setLayoutParams(params);
   overlay.invalidate(); // update the view 
```

main_activity.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#999999"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<FrameLayout 
android:layout_width="match_parent"
android:layout_height="250dp"
>
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"
    android:src="@drawable/statement_header" />
<View
    android:id="@+id/overlay"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
  />

<TextView android:id="@+id/tvHeader"
         android:layout_width="wrap_content"
          android:layout_height="wrap_content" 
          android:textSize="20sp"
          android:textStyle="bold"
          android:text="Our Story"
          android:textColor="#FFFFFF"
          android:background="#00000000"
          android:maxLines="1"
          android:layout_marginLeft="8dp"
          android:layout_marginRight="8dp"
          android:layout_gravity="bottom" android:layout_alignParentBottom="true"
          />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:34:22.420

尝试这个

```
< LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#999999"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<FrameLayout 
android:layout_width="match_parent"
android:layout_height="250dp"
>
< ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"
    android:src="@drawable/statement_header" />
< View
    android:id="@+id/overlay"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:background="@android:color/transparent"
  />

< TextView android:id="@+id/tvHeader"
         android:layout_width="wrap_content"
          android:layout_height="wrap_content" 
          android:textSize="20sp"
          android:textStyle="bold"
          android:text="Our Story"
          android:textColor="#FFFFFF"
          android:background="@drawable/gradient"
          android:maxLines="1"
          android:layout_marginLeft="8dp"
          android:layout_marginRight="8dp"
          android:layout_gravity="bottom" 
          android:layout_alignParentBottom="true"
          />
</FrameLayout> 
```

无需从代码中更改背景，只需尝试使用此布局即可。如果没有必要，删除`View`孩子

# .net - 将 HTTP 标头添加到 HttpSoapClientProtocol

> ID：16136817
> 
> 赞同：1
> 
> 时间：2013-04-21T22:20:50.827
> 
> 标签：.net, http, soap, header, client

我正在使用 ServiceDescriptionImporter 从 wsdl 动态（运行时）生成 Web 服务客户端。

在我尝试调用需要身份验证的服务（基本）之前，一切都很好。我找不到任何方法将基本身份验证标头添加到我生成的客户端发送的请求中。

我尝试了以下方法，但它不起作用。我仍然得到一个 401：

```
var webClient = obj as HttpSoapClientProtocol;
CredentialCache mycache = new CredentialCache();
// Credentials are specified here
mycache.Add(new Uri("http://localhost:9999/MyService"), "Basic", new NetworkCredential("username", "password"));
webClient.Credentials = mycache; 
```

如何向 webClient (HttpWebClientProtocol) 添加 HTTP 标头？

/安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:06:47.123

问题解决了！我几乎是对的。只需要设置`PreAuthenticate`为true。

这是正确的代码：

```
var webClient = obj as HttpWebClientProtocol;
NetworkCredential netCredential = new NetworkCredential("username", "password");
Uri uri = new Uri("http://localhost:9999/MyService");
ICredentials credentials = netCredential.GetCredential(uri, "Basic");
webClient.Credentials = credentials;
webClient.PreAuthenticate = true; 
```

# java - 在 Jetty 中拦截 HTTP 连接

> ID：16136819
> 
> 赞同：2
> 
> 时间：2013-04-21T22:21:03.870
> 
> 标签：java, servlets, https, jetty, servlet-3.0

我正在使用 servlet 3.0 和 Jetty 编写 HTTPS 代理服务器。

如何在码头处理 HTTPS 连接？

目前我正在使用`jetty-maven-plugin`，我的插件配置看起来像这样-

```
<groupId>org.mortbay.jetty</groupId>
<artifactId>jetty-maven-plugin</artifactId>
<configuration>
    <scanIntervalSeconds>10</scanIntervalSeconds>
    <webApp>
        <contextPath>/</contextPath>        
    </webApp>
    <scanIntervalSeconds>1</scanIntervalSeconds>    
    <connectors>
        <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
            <port>9090</port>
            <maxIdleTime>60000</maxIdleTime>
        </connector>
        <connector implementation="org.eclipse.jetty.server.ssl.SslSelectChannelConnector">
            <port>9090</port>
            <keystore>src/keystore.jks</keystore>
            <keyPassword>test</keyPassword>
            <password>test</password> 
        </connector>        
    </connectors>    
</configuration>
/plugin> 
```

是的 - 我想通过同一个端口处理 HTTP 和 HTTPS。当我启动 Jetty 时，它启动得很好——

```
2013-04-21 15:15:03.750:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:9090
2013-04-21 15:15:03.912:INFO:oejus.SslContextFactory:Enabled Protocols [SSLv2Hello, SSLv3, TLSv1, TLSv1.1, TLSv1.2] of [SSLv2Hello, SSLv3, TLSv1, TLSv1.1, TLSv1.2]
2013-04-21 15:15:03.917:INFO:oejs.AbstractConnector:Started SslSelectChannelConnector@0.0.0.0:9090
Started Jetty Server 
```

我在 doGet 和 doPost 上使用了 @Override，当我发送 HTTP 请求时，这两种方法都可以正常触发。但是当客户端发送 HTTPS 连接时，它们都不会被触发。我想拦截 HTTPS Connect 以便检查 SSL 流量。

知道如何使它工作吗？

更新-我想我发现了第一个问题。即使我在日志中看到 SelectChannelConnector 和 SslSelectChannelConnector 在端口 9090 上启动，SSL 连接器也没有被触发。

所以我的问题是——**是否可以使用 servlet 3.0 和 Jetty 在同一个端口上同时处理 HTTP 和 HTTPS？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:51:53.650

不，那是不可能的（事实上它是可能的，但它不应该是）。每个连接器都需要它自己的端口。

但是，您可以使用 web.xml 中的安全约束将所有连接到 http 侦听器的连接重定向到 https 端口。然而，这似乎不是你要找的。

我想知道为什么当您尝试在单个端口上设置两个连接器时，码头在启动时不会抛出任何异常。将验证这一点。

# ruby - Does Minitest Have A Version Of RSpec's Anything?

> ID：16136823
> 
> 赞同：4
> 
> 时间：2013-04-21T22:21:16.970
> 
> 标签：ruby, minitest

In RSpec I can do `mock_obj.should_receive(:method).with(anything)...` where 'anything' is any variable.

Can I do this in Minitest?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:10:51.800

[Minitest](https://github.com/seattlerb/minitest)，因为它包含在 Ruby 1.9 中，所以提供`MiniTest::Spec`了一种类似于上下文的 RSpec 语法。这不是 RSpec。

从 Github 页面，这是[Minitest](https://github.com/seattlerb/minitest)提供的

> *   minitest/autorun - 运行所有测试的简单而明确的方法。
> *   minitest/unit - 一个非常快速、简单和干净的测试系统。
> *   minitest/spec - 一个非常快速、简单和干净的规范系统。
> *   minitest/mock - 一个简单干净的模拟/存根系统。
> *   minitest/benchmark - 断言算法性能的绝佳方式。
> *   minitest/pride - 展示你对测试的自豪感！
> *   令人难以置信的小而快的跑步者，但没有花里胡哨。

做同样的比`mock_obj.should_receive(:method).with(anything)`，你会写

需要'minitest/autorun'

```
describe YourClass do
  it 'should receive a call to method' do
    mock_obj = Minitest::Mock.new
    mock_obj.expect(:method, :your_return, [anything])
    # ...
    mock_obj.verify # verify that the expected call has been made
  end
end 
```

# json - 从 c# 应用程序远程登录到 drupal 网站时保持登录状态

> ID：16136831
> 
> 赞同：0
> 
> 时间：2013-04-21T22:22:18.453
> 
> 标签：json, c#-4.0, drupal, logging, drupal-7

我正在尽我所能编写一个可以与 drupal 网站通信的应用程序。我已经设置了 Rest 服务器并编写了一个应用程序来调用登录表单。响应是我想要的，但我不知道如何存储会话并保持登录状态。

我想知道我应该如何存储来自 drupal 网站的会话。最好说我正在寻找保持登录状态的解决方案:)

任何人都可以帮忙吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:13:59.650

Drupal 将会话详细信息存储在“会话”表中。您可以在用户登录他/他访问的所有页面后查看该表。

# c - 双向链接中的用户输入

> ID：16136832
> 
> 赞同：0
> 
> 时间：2013-04-21T22:22:20.843
> 
> 标签：c, clang

我正在尝试构建一个接收用户输入然后反转输入的程序。输出显示原始字符串和反转字符串。该程序编译但给我以下错误“0ÿÿÿ;原始链接列表分段错误（核心转储）”

这是我的代码：

```
 struct node
 {
 int info;
 struct node *next;
 struct node *prev;
 }node;
 void reverse(struct node **head_1)
 {
 struct node *temp = NULL;
 struct node *current = *head_1;
 while (current !=  NULL)
  {
       temp = current->prev;
       current->prev = current->next;
       current->next = temp;
       current = current->prev;
     }     
      if(temp != NULL )
       *head_1 = temp->prev;
   }    
void push(struct node** head_1, int new_data)
{
    struct node* new_node =
    (struct node*) malloc(sizeof(struct node));

     new_node->info  = new_data;
     new_node->prev = NULL;
    new_node->next = (*head_1);   
    if((*head_1) !=  NULL)
      (*head_1)->prev = new_node ;   
      (*head_1)    = new_node;
 }
void printList(struct node *node)
{
while(node!=NULL)
    {
    printf("%s ", node->info);
    node = node->next;
    }
        }

 int main()
 {
struct node* head = NULL;
char str[300], ch;
int i;
printf("enter ");
    while((ch=getchar())!='\n');
{
str[i++]=ch;
str[i]='0';
i=0;
}
    while (str[i]!='\0')
{ 
putchar(str[i++]);
push(&head, ch);
}
    printf("\n Original ");
    printList(head);
    reverse(&head);
    printf("\n Reversed ");
    printList(head);          

     getchar();
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:28:30.970

您正在使用未初始化的变量`i`来访问`str`

```
int i;//Unitialized variable
printf("enter ");
    while((ch=getchar())!='\n');
{
str[i++]=ch;//This will acess memory at address str+random value from i 
```

改变`int i;` `to int i = 0;`

也是`printf("%s ", node->info);`不正确的，因为`node->info`它是整数，而不是字符串。应该是这样的`printf("%d ", node->info);`

我发现了其他问题，但我怀疑它是最终的。

```
 while((ch=getchar())!='\n');//why ;? this will lead to all chars to be skipped and only \n will be passed to the loop body
{
str[i++]=ch;
str[i]='0';//it should be '\0' instead of '0', and there is no sense to set it on each iteration
i=0;//This will reset i on each iteration overwriting previous char
} 
```

# java - check if first value of a string is different to the second value java

> ID：16136833
> 
> 赞同：0
> 
> 时间：2013-04-21T22:22:23.550
> 
> 标签：java

I have an app which returns the road that somebody is on and I would like to find out whether they are on a different road to the one they started on.

For example, I have

```
userLoc = address.getThoroughfare(); 
```

which gets their location and stores it, I would like to store that as a string to something like `String firstLoc` and then `if(userLoc.equals(firstLoc))`

Sorry if I was not clear enough, I am asking how to set a String to the first value of `userLoc`, so I may check it against in the future.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:35:12.310

我建议使用`equalsIgnoreCase(...)`而不是 equals 来为自己省去很多麻烦。

基本上，要充实您的代码：

```
public boolean isStartingRoad(String loc){
 return loc.equalsIgnoreCase(firstLoc);
} 
```

这当然假设您将 firstLoc 保存为同一类中的全局变量。

然后就像这样调用它传递 userLoc 给它

`boolean sameroad = isStartingRoad(address.getThoroughfare());`

编辑：好的，让我再试一次：

```
public boolean isStartingRoad(String loc){
     return loc.equalsIgnoreCase(address.getThoroughfare());
    } 
```

基本上可以让您传递当前位置的字符串并进行比较。

# python - 高效的 OCR 微调

> ID：16136835
> 
> 赞同：1
> 
> 时间：2013-04-21T22:22:46.830
> 
> 标签：python, opencv, ocr, tesseract

我正在从事一个涉及 OCR 处理大量 PDF 的项目。每个 PDF 都是普通办公类型文档的图像。每个 PDF 页面都存储一个单独的文件。有什么方法比我目前的方法更快（即计算时间更短）？

对于这种规模的项目，任何小的性能改进都会大大减少计算成本/时间。目前，调用 Tesseract 所需的时间比项目中所有其他处理步骤多 2-3 个数量级。

对于每个文件（page.pdf），我首先将其转换为 Tiff（image.tiff），如下所示。为了清楚起见，我从这个调用中删除了 Python。

```
ghostscript -o image.tiff -q -r300x300 -sCompression=none -sDEVICE=tiffgray page.pdf 
```

然后我基本上运行以下过程。

```
def ocr( image ):
    import tesseract, cv2.cv as cv

    # Load Tesseract
    api = tesseract.TessBaseAPI()
    api.Init(".","eng",tesseract.OEM_DEFAULT)
    api.SetPageSegMode(tesseract.PSM_AUTO)

    # Load and OCR the image file 
    cv_image = cv.LoadImage(image, cv.CV_LOAD_IMAGE_GRAYSCALE)
    tesseract.SetCvImage(cv_image, api)

    # Return the text
    return api.GetUTF8Text() 
```

为了清楚起见，我做了一些简化。例如，我实际上并没有为每个文件单独加载 Tesseract。我处理异常等。但是，差异并不重要，因为 99.9% 的使用时间都在 api.GetUTF8Text() 调用中。

有什么想法可以加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:50:54.437

如果在多核 CPU 上，您最好的选择可能是并行化它。

查看类似[http://wiki.python.org/moin/ParallelProcessing](http://wiki.python.org/moin/ParallelProcessing)的内容以获取更多信息。

# objective-c - Cannot add a route with the same class and method as an existing route

> ID：16136837
> 
> 赞同：1
> 
> 时间：2013-04-21T22:23:00.040
> 
> 标签：objective-c, restkit

I am trying to addRoutes but getting *"Cannot add a route with the same class and method as an existing route."*

I have a class Thing that has the same route method for Post, but with a different method of course. When I try to run my app I get the above error. Is there a way to setup the route with a generic method?

```
[objectManager.router.routeSet addRoute:[RKRoute routeWithClass:[Thing class]
                                                    pathPattern:@"v1/things/update_location.json.json" method:RKRequestMethodPOST]];

[objectManager.router.routeSet addRoute:[RKRoute routeWithClass:[Thing class]
                                                    pathPattern:@"v1/things.json" method:RKRequestMethodPOST]]; 
```

The above is a duplicate according to Restkit, as it using the same class "Thing" and because the Method is the same? What gives?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T18:15:36.670

如果它可以帮助任何人使用代码，这里是如何设置带有名称的路线。

```
// When you are setting up your mapping, set up Route with Name.
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:userMapping
                                                                                            method:RKRequestMethodGET
                                                                                       pathPattern:LOGIN_URL
                                                                                           keyPath:nil
                                                                                       statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithName:LOGIN_ROUTE pathPattern:LOGIN_URL method:RKRequestMethodGET]];
[[RKObjectManager sharedManager] addResponseDescriptor:responseDescriptor];

// And when you are ready to make the http call, do the following
[[RKObjectManager sharedManager] getObjectsAtPathForRouteNamed:LOGIN_ROUTE
                                                        object:userProfile
                                                    parameters:params
                                                       success:success
                                                       failure:failure]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:07:24.000

`Thing`当给定一个对象（在这种情况下是一个实例）时，路由器用于构建请求。为此，当您要求 RestKit 发布对象时，只能选择一个选项。任何其他路由都需要用命名路由或关系路由来描述，以保持路由集的唯一性。

[您可以在此处](http://restkit.org/api/latest/Classes/RKRouter.html)查看文档，它描述了“路由生成”部分中定义路由器的所有 3 种方法（您目前仅使用方法 2）。您很可能想要定义一些命名路由，这些路由描述了您尝试通过每次上传实现的目标之间的差异。

# c# - Refresh comboBox when child form closed

> ID：16136841
> 
> 赞同：1
> 
> 时间：2013-04-21T22:23:22.523
> 
> 标签：c#, combobox, refresh, datasource

In my parent form I have comboBox populated with items using `DataTable` as `DataSource` which looks like this.

```
 sourceTypes = myDataBase.SourceType.ToList<SourceTypes>();

        DataTable dt = new DataTable();
        DataColumn dc1 = new DataColumn("Name");
        DataColumn dc2 = new DataColumn("ID");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);

        foreach (SourceType sourceType in sourceTypes)
        {
            string sourceTypeName = sourceType.sourceTypeName;
            string ID = sourceType.sourceTypeID.ToString();
            dt.Rows.Add(sourceTypeName, ID);
        }

        comboBox3.DataSource = dt;
        comboBox3.ValueMember = "ID";
        comboBox3.DisplayMember = "Name"; 
```

From my parent form I am calling my child form in which I add new record to `myDataBase` and I would want this new added record to be visible in my parent's form comboBox as soon as child form is closed. So I was thinking to call something like this from my childFrm which will refresh the comboBox.

```
 private void FrmChild_FormClosed(object sender, FormClosedEventArgs e)
        {
             FrmParent.refresh();
        } 
```

Now I need the static refresh method in my parent form, which I can't really get to work. How could I get it done? Cheers

EDIT: Child form is opened here:

```
 private void button7_Click(object sender, EventArgs e)
    {
        FrmChild frmChild = new FrmChild();
        frmChild.ShowDialog();
        frmChild.Dispose();
    } 
```

EDIT2: I tried like this (no static method), but didn't work

In my Child form:

```
 private void FrmChild_FormClosed(object sender, FormClosedEventArgs e)
        {
             FrmParent frmParent = new FrmParent();
             frmParent.refresh();
        } 
```

In my parent form, refresh method (after the new record is added to myDataBase).

```
 sourceTypes = myDataBase.SourceType.ToList<SourceTypes>();

        DataTable dt = new DataTable();
        DataColumn dc1 = new DataColumn("Name");
        DataColumn dc2 = new DataColumn("ID");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);

        foreach (SourceType sourceType in sourceTypes)
        {
            string sourceTypeName = sourceType.sourceTypeName;
            string ID = sourceType.sourceTypeID.ToString();
            dt.Rows.Add(sourceTypeName, ID);
        }

        comboBox3.DataSource = dt;
        comboBox3.ValueMember = "ID";
        comboBox3.DisplayMember = "Name"; 
```

Tried like this, combobox still doesnt get refreshed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:09:02.983

您可以将父表单传递给子表单并调用其方法。在您的子表单中创建一个构造函数，该构造函数接受您的父表单并且不要使您的`refresh`方法静态。也尝试处理`Closing`事件而不是`Closed`事件。

FrmChild 类：

```
private FrmParent parentForm = null;
public FrmChild(FrmParent pf)
{
   parentForm = pf;
} 
```

现在，when `closing`，您可以调用 refresh 方法

```
private void FrmChild_FormClosing(object sender, FormClosingEventArgs e)
{
   if(parentForm != null)
      parentForm.refresh();
} 
```

FrmParent 类

```
private void button7_Click(object sender, EventArgs e)
{
    using(FrmChild frmChild = new FrmChild(this))
    {
       frmChild.ShowDialog();     
    }
} 
```

# java - 在 Hadoop DistributedCache 上存储 TreeSet

> ID：16136842
> 
> 赞同：4
> 
> 时间：2013-04-21T22:23:30.830
> 
> 标签：java, serialization, hadoop, mapreduce, distributed-cache

我正在尝试存储 a`TreeSet`以`DistributedCache`供 Hadoop map-reduce 作业使用。到目前为止，我有以下用于将文件从 HDFS 添加到`DistributedCache`：

```
Configuration conf = new Configuration();
DistributedCache.addCacheFile(new URI("/my/cache/path"), conf);
Job job = new Job(conf, "my job");
// Proceed with remainder of Hadoop map-reduce job set-up and running 
```

如何有效地将 TreeSet（我已经在此类中构建）添加到要添加到 DistributedCache 的文件中？我是否应该使用 Java 的本机序列化以某种方式将其序列化到文件中？

请注意，TreeSet 在启动 map-reduce 作业的主类中构建一次。TreeSet 永远不会被修改，我只是希望每个映射器都拥有对该 TreeSet 的只读访问权限，而不必一遍又一遍地重建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:16:58.660

序列化 TreeSet 似乎是一种方法。在这种情况下，您不需要创建 HashMap。只需从文件中反序列化 TreeSet 并使用基于键的方法进行搜索。我喜欢这种方法。

# ios - 删除 .xib 更新设备上的应用程序会导致应用程序崩溃

> ID：16136848
> 
> 赞同：2
> 
> 时间：2013-04-21T22:24:43.623
> 
> 标签：ios, crash, uitableview, xib

我在设备上安装了旧版本的应用程序。在我的新版本中，我不再使用 .xib 文件，因为它从复杂的东西变成了一个表格视图，我可以在代码中实例化它。

但是，当我在设备上构建和运行时，它会崩溃，因为它仍然尝试从旧应用程序中包含的 .xib 文件加载控制器，并抱怨 UILabel 缺少键/值对。

例如：

SomeViewController.h (UITableViewController)
SomeViewController.m
SomeViewController.xib (在新版本中移除)

```
SomeViewController *controller = [[SomeViewController alloc] initWithStyle:UITableViewStylePlain];

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];

    if (self)
    {
    }

    return self;
} 
```

即使我调用“initWithStyle”，它仍然会尝试加载预先存在的 .xib！

我目前的解决方案是使用空白 UITableView 创建 SomeViewController.xib。

然而，我怀疑，当用户从应用商店更新应用时，它会覆盖整个应用，不会留下任何东西。

这是真的？应用程序更新会覆盖现有应用程序还是会留下挥之不去的 .xib 文件？

现在我必须用其他所有视图测试旧版本，以确保没有其他问题挥之不去。

阅读 NIB 上的开发人员文本：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

也许我发现了一个错误？

另一种选择是我将类重命名为 SomeController 之类的其他名称，以避免自动加载关联的 .xib 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T00:48:39.960

Apple 在以下有关测试 iOS 应用程序更新的技术说明中解决了此问题：

[技术说明 TN2285](http://developer.apple.com/library/ios/#technotes/tn2285/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:46:13.263

两条建议：

*   您是否尝试过重新启动 Xcode 和您用于测试的设备？（我有 Xcode 搞乱缓存管理并继续使用旧版本文件的长期记录）
*   您确定您的 XIB 文件没有被另一个文件引用吗？（也许您的主视图有一个标签栏控制器，您在其中留下了您删除的 XIB 的名称）

# sql - 如何在 SQL 中进行除法

> ID：16136858
> 
> 赞同：-3
> 
> 时间：2013-04-21T22:25:45.287
> 
> 标签：sql

假设我有下表：

```
CREATE TABLE orders (
    Order_ID int,
    Product_ID int,
    PRIMARY KEY(Order_ID,Product_ID)
);

INSERT INTO orders VALUES (1,1), (1,2), (1,3), (2,2), (2,3), (3,3), (3,4); 
```

我如何获得包含产品 ID 2 和 3 的所有订单？

我想得到结果

```
Order_ID 
--
 1
 2 
```

结果必须是订单 1 和 2，因为订单 1 有产品 {1,2,3} — 它有子集 {2,3}。另一方面，订单 3 的产品集是 {3,4} - 它没有子集 {2,3}，因此它不能在结果中返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:51:05.393

一种方法是选择与您的子集相对应的所有行。
然后按顺序分组，数一数你有多少信件。如果它等于您的子集的大小，则该订单是合格的。

```
SELECT orders.order_id
FROM orders
WHERE orders.product_id in (2, 3)
GROUP BY orders.order_id
HAVING COUNT(1) = 2 
```

请注意，这是有效的，因为您有 define `PRIMARY KEY(Order_ID,Product_ID)`，这是一个非常好的主意！

[小提琴](http://sqlfiddle.com/#!2/f448f/5/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:28:52.230

如果我对您的理解正确：

```
Select ID
From table_name
where P_ID = 2 
```

# java - Issue with SimpleDateFormat's milliseconds

> ID：16136860
> 
> 赞同：3
> 
> 时间：2013-04-21T22:26:01.130
> 
> 标签：java, date, datetime, simpledateformat, milliseconds

I tried this snippet code and the output is very surprising. Why the output is different from the input? Did I make a mistake or is there a problem with SimpleDateFormat?

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss.SSS");
try {
    Date date = sdf.parse("2013-04-18-19.01.33.080");
    System.out.println(sdf.format(date)); // output: 2012-04-18-19.01.33.80
} catch (ParseException e) {
    e.printStackTrace();
} 
```

**EDIT:** In fact, I checked my code and I wrote `yyyy-MM-dd-HH.mm.ss.S` instead of `yyyy-MM-dd-HH.mm.ss.SSS`. It was a stupid mistake. Thanks all for your answers.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:40:04.517

[这对我来说很好](http://ideone.com/FDSlWN)，如果它对你不起作用，请尝试`Locale`明确设置

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss.SSS", Locale.ENGLISH); 
```

# forms - I am trying to setup a form using jQuery click method

> ID：16136862
> 
> 赞同：2
> 
> 时间：2013-04-21T22:26:29.193
> 
> 标签：forms

I am trying to setup a form using jQuery click method. For html I don't want to use onClick but rather call from the id clickMe to display name. It doesn't seem to be working. Is this possible? if so, What am I missing?

```
var getName = function ()
{
if (document.getElementById("FirstName").value == "" || document.getElementById("LastName").value == "")
{
return ("Please enter your first name and last name.");
}

else {var fullName = document.getElementById("FirstName").value + ' ' + document.getElementById("LastName").value;
return fullName;
}
}

var displayName = function () 
{

    $(document).ready(function(){   
    $("#clickMe").click(function(){
        alert(displayName());
    }); 
}); //end ready

} 
```

HTML

```
<form name="form" id="form" method="post" action="">  

 <p class="FirstName">  
    <label for="FirstName">First Name:</label>
  </p>
    <p>
    <input name="FirstName" type="text" id="FirstName" />  

</p>  

<p class="LastName">  
    <label for="LastName">Last Name:</label></p>
    <p>
    <input name="LastName" type="text" id="LastName" />  

   </p>

<p class="submit">  
    <input name="submitButton" type="button" id="clickMe" value="Display Name" />
  </p>  
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:38:54.767

你看，这段代码：

```
$(document).ready(function(){   
   $("#clickMe").click(function(){
      alert(displayName());
   }); 
}); 
```

在里面`displayName`：

```
var displayName = function () 
{
...
} 
```

并且`displayName`永远不会被调用。因此，该`click()`事件永远不会设置。

要么将该`$(document).ready()`代码带到外面，要么调用`displayName`，如下所示：

```
var getName = function ()
{
    if (document.getElementById("FirstName").value == "" || document.getElementById("LastName").value == "")
    {
        return ("Please enter your first name and last name.");
    }
    else {
        var fullName = document.getElementById("FirstName").value + ' ' + document.getElementById("LastName").value;
        return fullName;
    }
}

var displayName = function () 
{
    $(document).ready(function(){   
        $("#clickMe").click(function(){
            alert(displayName());
        }); 
    }); //end ready

}

$(function() { displayName(); }); // <-- calling displayName here! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:33:00.723

请参阅 acdcjunior 的答案，以正确分析现有代码的问题。事实上，我认为您的`displayName`功能在这里是多余的，您可以通过如下更新代码来大大简化事情：

```
$(document).ready(function() {

    var getName = function () {
        if (document.getElementById("FirstName").value == "" || document.getElementById("LastName").value == "") {
            return ("Please enter your first name and last name.");
        } else {
            var fullName = document.getElementById("FirstName").value + ' ' + document.getElementById("LastName").value;
            return fullName;
        }
    }

    $("#clickMe").click(function(){
        alert(getName());
    }); 
}); 
```

# windows - How to watermark my logo to 200 videos at once for free?

> ID：16136872
> 
> 赞同：-3
> 
> 时间：2013-04-21T22:27:42.817
> 
> 标签：windows, video, batch-file, automation, command

I think that command line video editing software + bacth to generate a loop in order to edit all the videos at once is the way to go. My problem is that i have not found free software with command line to insert watermarks so far. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:31:10.267

编写[AviSynth](http://avisynth.org/mediawiki/Main_Page)脚本添加水印，然后使用 FFmpeg 重新转换文件。Win32 的 FFmpeg 能够从 AviSynth 帧服务器读取。

一个有用的链接：[如何使用 AviSynth 添加水印](http://forum.videohelp.com/threads/336627-How-to-add-a-watermark-with-AviSynth)。

我编写了一个`/bin/sh`脚本来帮助我进行家庭视频批量转换。`.bat`它会在您的当前目录中生成 windows文件。您可以轻松地对其进行修改以生成 200 个`.avs`脚本，然后调用 FFmpeg 进行转换。

```
#!/bin/sh

OUTBAT="$(pwd)/conv.bat"
OUTSH="$(pwd)/conv.sh"

if [ -e "${OUTBAT}" ] ; then
    echo "${OUTBAT}: file exists, exiting"
    exit 4
fi

if [ -e "${OUTSH}" ] ; then
    echo "${OUTSH}: file exists, exiting"
    exit 4
fi

usage() {
    echo "${0}: ${1}"
    echo
    echo "usage: ${0} <mode> <file1>[ <file2> [...]]"
    echo
    echo "available <mode>'s:"
    echo "    -x : generates windows .BAT file (conv. to x264+AAC@mp4)"
}

if [ $# -eq 0 ] ; then
    usage "no mode specified"
    exit 1
fi

MODE=${1}
shift

if [ $# -eq 0 ] ; then
    usage "no input files"
    exit 2
fi

while [ $# -gt 0 ] ; do
    FILE=$(echo "${1}" | sed -re 's/\//\\\\/g')
    if [ -n "$(echo "${FILE}" | grep -P '\.mp4$')" ] ; then
        ORIG=$(echo "${FILE}" | sed -re 's/(\.[^\.]*)$/-original\1/')
        echo ren \""${FILE}"\" \""${ORIG}"\" >>"${OUTBAT}"
    else
        ORIG="${FILE}"
    fi
    BASE=$(echo "${FILE}" | sed -re 's/\.[^\.]*$//')
    shift

    case "${MODE}" in
        "-x")
            echo ffmpeg -threads 4 -i \""${ORIG}"\" -vn -af \"aresample=48000:resampler=soxr\" -acodec pcm_s16le \""${BASE}"-audio.wav\" >>"${OUTBAT}"
            echo normalize \""${BASE}"-audio.wav\" >>"${OUTBAT}"
            echo neroAacEnc -if \""${BASE}"-audio.wav\" -of \""${BASE}"-audio.mp4\" >>"${OUTBAT}"
            echo del \""${BASE}"-audio.wav\" >>"${OUTBAT}"
            echo x264 --preset veryslow --tune film --crf 25 --vbv-maxrate 17500 --vbv-bufsize 17500 --level 3.1 -o \""${BASE}"-video.mp4\" \""${ORIG}"\" >>"${OUTBAT}"
            echo mp4box -add \""${BASE}"-video.mp4\" \""${BASE}".mp4\" >>"${OUTBAT}"
            echo mp4box -add \""${BASE}"-audio.mp4\" \""${BASE}".mp4\" >>"${OUTBAT}"
            echo del \""${BASE}"-audio.mp4\" >>"${OUTBAT}"
            echo del \""${BASE}"-video.mp4\" >>"${OUTBAT}"
            echo >>"${OUTBAT}"

            echo cptime \""${ORIG}"\" \""${BASE}".mp4\" >>"${OUTSH}"

            ;;
        *)
            usage "unknown mode"
            exit 3
            ;;
    esac

done 
```

您应该通过将目录更改为视频文件所在的位置并键入`$ script-name *.avi`. `conv.bat`文件将使用适当的命令生成。正如我所说：`echo ffmpeg ...`根据您的需要更改部分，但是您已经有了“框架”来为您希望的尽可能多的输入文件生成`.bat`或`.avs`或什么文件。:-)

# ios - Running TriggerIO iOS app with screen locked?

> ID：16136873
> 
> 赞同：2
> 
> 时间：2013-04-21T22:27:45.070
> 
> 标签：ios, html, avaudioplayer, background-process, trigger.io

I have a fitness app that guides users through a workout, but in order to do that, the app must remain active even while in the background. Specifically, this is crucial with our new audio release, which guides the user through their workout using audio cues that cut in and out. Currently, I'm using [TriggerIO's implementation to play audio](http://docs.trigger.io/en/v1.4/modules/media.html#createaudioplayer) which also [allows background audio](http://docs.trigger.io/en/v1.4/modules/media.html#config), but only continues background execution until the audio file finishes. Additionally, I will soon replace that with a [native plugin](http://docs.trigger.io/en/v1.4/modules/native/index.html) that includes background-music ducking.

Is there a way for me to continue running my HTML5 app in the background after an audio file finishes playing?

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:14:36.173

没有办法让 webview 在 iOS 的后台永久运行 - 有一组有限的任务可以在后台运行：请参阅[http://developer.apple.com/library/ios/#documentation/iphone /conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

根据您的音频播放要求的可预测性，您可能可以使用本地通知（[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html #//apple_ref/doc/uid/TP40008194](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194)），这会更简单，因为您的应用不需要请求额外的 UIBackgroundModes。

如果本地通知对您不起作用，请通过 support@trigger.io 联系：我们还没有办法让插件请求新的后台处理模式，但这绝对是我们可以添加的。

# ant - 使用 ANT 时 Java EE Web 应用程序的文件夹结构是什么？

> ID：16136881
> 
> 赞同：1
> 
> 时间：2013-04-21T22:28:39.547
> 
> 标签：ant, struts2

我只是 Java EE 的初学者。

谁能告诉我使用 Ant 时 Java Web 应用程序的文件夹结构是什么？

您能否让我知道 JSP、Struts 动作类和资源属性文件需要放在哪里？

# android - 在 gridview 上调用 invalidate 会将 EditText 的颜色更改为白色

> ID：16136885
> 
> 赞同：0
> 
> 时间：2013-04-21T22:29:24.230
> 
> 标签：android, android-layout

我在我的活动中绘制网格视图，如下所示：

```
AlbumGridAdapter albumAdapter = new AlbumGridAdapter(this);
GridView gv = (GridView) findViewById(R.id.grid);
gv.setAdapter(albumAdapter); 
```

然后当我需要刷新视图时（在对话框中进行一些用户输入之后）：

```
gv.setAdapter(new AlbumGridAdapter(getApplicationContext()));
gv.invalidate(); 
```

调用此方法后，我的 EditTexts（如下）变为白色。除此之外，“刷新”正在工作。

这是网格的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity$DummySectionFragment" >

<TextView
android:id="@+id/label"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="false"
android:layout_centerInParent="true"
android:layout_centerVertical="true"
android:textSize="18sp"
android:gravity="center" 
android:layout_gravity="center"
android:textIsSelectable="false" />

<GridView
android:id="@+id/grid"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentRight="true"
android:numColumns="auto_fit"
android:stretchMode="columnWidth"
android:verticalSpacing="8dp"
android:gravity="center" >
</GridView>

</RelativeLayout> 
```

每个网格单元的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_cell"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="3dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="3dp"
    android:paddingLeft="3dp"
    android:paddingRight="3dp"
    android:gravity="center"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:gravity="center"
        android:padding="1dp"
        android:src="@drawable/no_image"
        android:contentDescription="@string/image" />

    <TextView
        android:id="@+id/caption"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="2dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textIsSelectable="false" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:41:51.680

尝试使用您的活动而不是您的应用程序作为您提供给适配器的上下文。我猜是因为您使用的是`android:textAppearance="?android:attr/textAppearanceMedium"`，它指的是主题属性，所以您正在获取应用程序的主题，这可能与您的活动主题不同。

# highcharts - 创建后更改 plotBand 标签 [highcharts]

> ID：16136886
> 
> 赞同：0
> 
> 时间：2013-04-21T22:29:40.473
> 
> 标签：highcharts

我有一个图表，其中 plotBands 调整大小，并且标签必须更改。但是我不知道在创建图表后如何更改标签。

我努力了：

更改chart.axis[0].options.plotBands[0].label.text，将轴标记为isDirty并重绘图表

使用 HTML 标签并通过 jQuery 更改值

我必须使用标签格式化程序功能还是我错过了 API 中的某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-18T11:57:59.547

我想更改 plotbands 的“to/from”值，但没有找到 attr 方法，但这有效：

```
 this.chart.yAxis[0].plotLinesAndBands[4].options.from = this.min; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:53:15.877

您可以使用 attr() 函数来更新图形元素，如 plotBand 标签。例子：

[http://jsfiddle.net/eaFdr/1/](http://jsfiddle.net/eaFdr/1/)

```
 $('#btn').click(function(){
        chart.xAxis[0].plotLinesAndBands[0].label.attr({
                    text:'aaaa'
                });
    }); 
```

# javascript - Updating innerHTML in javascript but erasing past innerHTML

> ID：16136888
> 
> 赞同：0
> 
> 时间：2013-04-21T22:29:51.763
> 
> 标签：javascript, events, toggle, handler

Using Javascript, I want to toggle on and off between 2 images. So far I am using a counter and then changing my innerHTML based off if the counter is even or odd for when the image is clicked

It works the first time i click the image by replacing the image already there, but after the first time it keeps on adding images instead. How can i make it change the image after the second time rather than add images when I click?

```
<!DOCTYPE html>
<html>
  <head>
    <script>
      var x = 0;
      function myFunction() {
        x++;
        var div1 = document.getElementById('div1');
        if (x % 2 != 0) {
          var y = document.write('<img src="http://www.computric.com/wp-content/uploads/2011/09/119709197585381818TzeenieWheenie_Power_On_Off_Switch_red_2.svg_.med_.ng" alt="sometext" onclick=myFunction()>');
          div1.appendChild.innerHtml = y;
        } else if (x % 2 == 0) {
          var y = document.write('<img src="http://0.tqn.com/d/pcsupport/1/0/Y/A/-/-/on.jpg"       alt="some_text" onclick=myFunction()>')
          div1.appendChild.innerHTML = y;
        }
      }
    </script>
  </head> 
  <body>
    <div id="div1" style="font-size:12px" onclick=myFunction()> <span onclick=myFunction()>
     <img src="http://0.tqn.com/d/pcsupport/1/0/Y/A/-/-/on.jpg" alt="some_text">
     </span> 
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:41:21.990

如果您只是想实现切换效果，这样的事情应该可以工作：

```
<!DOCTYPE html>
 <html>
 <head>

<script>
var x=0;
function myFunction(){
    var div1=document.getElementById('div1');
    if(x==0){
        x=1;
        document.getElementById("myimgid").src = "http://www.computric.com/wp-content/uploads/2011/09/119709197585381818TzeenieWheenie_Power_On_Off_Switch_red_2.svg_.med_.ng";
    }
    else{
        x=0;
        document.getElementById("myimgid").src = "http://0.tqn.com/d/pcsupport/1/0/Y/A/-/-/on.jpg";
    }
}

</script>
 </head>
 <body>

 <div id="div1" style="font-size:12px" onclick=myFunction()>
 <span>
 <img id="myimgid" src="http://0.tqn.com/d/pcsupport/1/0/Y/A/-/-/on.jpg" alt="some_text">
 </span>
 </div>

 </body>
 </html> 
```

# javascript - 通过移动页面上的其他元素使图像看起来更大

> ID：16136890
> 
> 赞同：2
> 
> 时间：2013-04-21T22:29:53.390
> 
> 标签：javascript, html, css

这是我必须做的确切事情：

> 适当的 JavaScript 和 html，以便当用户将鼠标移到特价房的一种特定类型的缩略图上时，会显示与其相关的全尺寸（较大）图像（请注意，较大图像的显示应该不会导致其他页面元素移动）。当用户将鼠标从缩略图上移开时，较大的图像应该会消失。

[这是我的网站](http://www.numyspace.co.uk/~unn_w12001251/accommodation.html)。

我只是希望能够将鼠标悬停在这些图像上并让它们出现在页面上方，而不改变页面现在的外观。

这是我目前的 javascript 部分；

```
div = {
    show: function(elem) {
        document.getElementById(elem).style.visibility = 'visible';
    },
    hide: function(elem) {
        document.getElementById(elem).style.visibility = 'hidden';
    }
} 
```

但我不确定这是正确的还是现在我想要的，

然后这是html；

```
<a href="images/garden2.jpg" class="preview"><img src="images/garden2.jpg" width="201"       height="143" alt="Garden Room" onMouseOver="div.show('div1')" onMouseOut="div.hide('div1')"/></a>
        <div id="div1"><img src="images/garden2.jpg" alt="Garden Room" /></div> 
```

但这会在图像下方创建一个 div 并更改我的元素，这不是我想要发生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:32:37.973

我会使用这样的更简单的代码：

HTML：

```
<a href="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg">
<img width="100" src="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg" />
<img class="fullsize" src="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg" />
</a>

<a href="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg">
<img width="100" src="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg" />
<img class="fullsize" src="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg" />
</a> 
```

CSS：

```
a {
    position: relative;
    display: inline-block;
}

a .fullsize {
    position: absolute;
    top: 100%;
    left: 0;
    display: none;
    z-index: 1;
}

a:hover .fullsize {
    display: inline;
} 
```

JS：-无-

小提琴： http: [//jsfiddle.net/84anu/](http://jsfiddle.net/84anu/) 预览[http://jsfiddle.net/84anu/show/](http://jsfiddle.net/84anu/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:53:58.847

如果您希望某个元素出现在其他元素之上，则需要定位该元素 - 在您的情况下，最好的方法是设置所有容器元素 - 意思是包含原始显示图像和隐藏图像的元素 - 在样式位置相对 - 和隐藏图像设置绝对位置，当您将鼠标悬停在原始图像上时，只需将隐藏图像显示为您的编码：

我做了一个简单的[jsfiddle](http://jsfiddle.net/MKPgv/)让你理解

html:

```
<div class="container">
    <a href="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg"><img src="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg" onMouseOver="div.show('div1')" onMouseOut="div.hide('div1')" /></a>
    <div id="div1" class="hid-img"><img src="http://www.numyspace.co.uk/~unn_w12001251/images/fellside22.jpg" /></div>
<div>

<div class="container">
    <a href="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg"><img src="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg" onMouseOver="div.show('div2')" onMouseOut="div.hide('div2')" /></a>
    <div id="div2" class="hid-img"><img src="http://www.numyspace.co.uk/~unn_w12001251/images/garden2.jpg" /></div>
<div> 
```

CSS：

```
.container{
    position: relative;
}

.container .hid-img{
    position: absolute;
    display:none;
    z-index:1;
} 
```

js：

```
var div = {
    show: function(elem) {
        document.getElementById(elem).style.display = 'block';
    },
    hide: function(elem) {
        document.getElementById(elem).style.display = 'none';
    }
} 
```

**编辑：** 只需将宽度、高度添加到 img 标签[http://jsfiddle.net/MKPgv/2/](http://jsfiddle.net/MKPgv/2/)

# javascript - 来自 Javascript 的简单 REST 调用

> ID：16136897
> 
> 赞同：3
> 
> 时间：2013-04-21T22:30:47.687
> 
> 标签：javascript, jquery, json, rest, getjson

我正在尝试从这里调用我的服务 [http://diningphilospher.azurewebsites.net/api/dining](http://diningphilospher.azurewebsites.net/api/dining)

使用下面的javascript，

```
$.ajax(
{
    type: "GET",
    dataType: "json",
    url: "http://diningphilospher.azurewebsites.net/api/dining/",
    success: function (data) 
    {
        alert(data);
    }
}); 
```

但我收到有关跨源的错误。我看到有人建议使用 JSONP，但我猜我的服务器不支持 JSONP。我研究了CORS，无法理解它的头部或尾部。我想知道如何阅读位于不同域中的 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T17:01:01.963

我希望这应该有效：

```
$.ajax(
{
    type: "GET",
    dataType: "jsonp",
    url: "http://diningphilospher.azurewebsites.net/api/dining/",
    success: function (data) 
    {
        alert(data);
    }
}); 
```

或者只是添加/附加**?callback=?** 以及您的跨域网址。

# objective-c - How does block comparator work in Obj C?

> ID：16136899
> 
> 赞同：2
> 
> 时间：2013-04-21T22:30:57.353
> 
> 标签：objective-c, sorting, objective-c-blocks

This is not a how do I do this post. Instead, I want to understand how it works and hopefully others can learn too.

For this example, let's say I have an NSMutableArray with NSDecimalNumber objects in them. Let's say the objects inside, in no particular order, are `[-464.50, +457.20, 0, -1000]`. Prior to comparing them, I apply the absolute value to them.

In my code, I use the `sortUsingComparator` method and give it a block. I started testing the different conditions and here is the result as they are presented in a UITableView:

```
return [person1Amount compare:person2Amount];
==> 0, 457.20, -464.50, -1000 
```

If,

```
return [person2Amount compare:person1Amount];
==> -1000, -464.50, +457.42, 0 
```

How does the `compare:` method actually works. The `NSDecimalNumber` doc [here](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html) does not really explain it to me. This part especially confuses me:

> Return Value NSOrderedAscending if the value of decimalNumber is greater than the receiver; NSOrderedSame if they’re equal; and NSOrderedDescending if the value of decimalNumber is less than the receiver.

Does that mean that the order of objects inside the array determines how it is sorted? For example, if `person1.number < person2.number`, it will sort array in ascending order? Why does my code `[person2Amount compare:person1Amount]` yield the right results?

It looks like `person2Amount is < person1Amount` and so it sorts it descending but if `person2Amount is > person1Amount`, then it will sort is in ascending?

My understanding does not seem right.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:45:17.383

看来您已经回答了自己的问题。

```
return [person1Amount compare:person2Amount]; 
```

对比

```
return [person2Amount compare:person1Amount]; 
```

考虑以上两个陈述；该`compare:`方法返回`NSOrderedAscending`或`NSOrderedDescending`取决于两个对象中的哪一个大于另一个。

如果你要这样做：

```
return [@1 compare:@2]; 
```

对比

```
return [@2 compare:@1]; 
```

`NSOrderedAscending`然后你会收到`NSOrderedDescending`什么应该是显而易见的原因。

因此，如果您实现自己的`compare:`方法并切换用于比较的两个对象（如上面@1 与@2 的情况），您将有效地反转数组的排序顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:53:59.277

由于您正在比较绝对值，因此让我们忽略这些符号。您的数字是 464.50、457.20、0 和 1000。升序表示数字变大，因此顺序为 0、457.20、464.50、1000。降序表示它们变小，因此顺序为 1000、464.50、457.20、 0。

使用比较器时，数组会根据比较器升序排序。它将成对的值发送到比较器。如果比较器返回它们按升序排列，它将第一个放在第一位。如果它返回它们是按降序排列的，它将第二个放在第一位。

NSNumber`compare:`方法的工作原理基本上是这样的（当然你不能在 NSNumbers 上使用`>`and `<`，但它的想法）：

```
- (NSComparisonResult)compare:(NSNumber *)number2 {
    if(self < number2) return NSOrderedAscending;
    if(self > number2) return NSOrderedDescending;
    return NSOrderedSame;
} 
```

因此，如果您的比较器调用`[number1 compare:number2]`，如果数字是升序的（数字 1 较小），结果将是升序的，这意味着它们将保持该顺序并在数组中升序。如果比较器切换它们，`[number2 compare:number1]`如果数字下降（数字 2 较小），则结果将上升，因此它们将被切换并在数组中下降。

# asp.net - MVC 4 Validation firing, but the form is still submitting?

> ID：16136900
> 
> 赞同：1
> 
> 时间：2013-04-21T22:31:01.673
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, jquery-validate

My MVC 4 validation is working as it seems, the error messages pop up, but it still submits the form. Any idea what I am missing? Thank you.

```
public class StatusRequestModel
{
    [Required]
    [Display(Name = "Ticket Number")]
    public int? TicketNumber { get; set; }

    [Required]
    [Display(Name = "Postal Code")]
    public int? PostalCode { get; set; }
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary()
    @Html.LabelFor(x => x.TicketNumber)
    @Html.TextBoxFor(x => x.TicketNumber)
    @Html.LabelFor(x => x.PostalCode)
    @Html.TextBoxFor(x => x.PostalCode)
    <input type="submit" value="Submit" />
    <input type="reset"  value="Reset"/>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:43:09.543

确保您的代码中引用了以下 JS 库：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script> 
```

确保您的 web.config 文件中有以下`appSettings`条目：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

如果您愿意，还可以在视图而不是配置文件中启用客户端验证：

```
@{ Html.EnableClientValidation(); } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T20:38:01.890

就项目需要包含的内容而言，greg84 的答案是正确的答案。但对我来说，我也遇到了 jquery.validate 插件无法与 jquery > 1.9.0 一起使用的问题。一旦我将其更改为 jquery 1.8.3，它就起作用了。

# postgresql - 为什么这个功能会成倍增加？

> ID：16136904
> 
> 赞同：0
> 
> 时间：2013-04-21T22:31:27.910
> 
> 标签：postgresql, plpgsql, postgresql-performance

如果我创建一个循环执行一堆动态查询的函数，处理时间似乎会成倍增加。举个例子，我将使用以下代码。请记住，我必须在我的代码中使用执行语句。

```
FOR i IN 0..10 LOOP
EXECUTE 'SELECT AVG(val) FROM some_table where x < '||i INTO count_var;
IF count_var < 1 THEN
INSERT INTO some_other_table (vals) VALUES (count_var);
END IF;
END LOOP; 
```

如果我的 for 语句循环 10 次，则需要 125 毫秒才能完成。如果我的 for 语句循环 100 次，则需要 4,250 毫秒才能完成。

有没有我可以使用的设置，以便在 1,250 毫秒内完成 100 次循环？

编辑：更多信息

```
PostgreSQL 9.2.4 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3, 64-bit 
```

每个执行查询都在进行仅索引扫描。这是计划。

```
 Aggregate  (cost=85843.94..85843.94 rows=1 width=8) (actual time=1241.941..1241.944 rows=1 loops=1)
   ->  Index Only Scan using some_table_index on some_table  (cost=0.00..85393.77 rows=300114 width=8) (actual time=0.046..1081.718 rows=31293 loops=1)
         Index Cond: ((x > 1) AND (y < 1))
         Heap Fetches: 0
 Total runtime: 1242.012 ms 
```

编辑2：

我用plperl重写了这个函数。当我在 100x 执行查询上使用“spi_exec_query()”时，它运行了 4,250 毫秒。当我在 100 倍执行查询上使用“spi_query()”时，它在 1,250 毫秒内运行 - 消除了指数增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:42:41.500

### 为什么减速？

计算符合条件的行的平均值`x < 100`显然*比*计算相同的`x < 1`. 多少，我们不知道，您的问题中*没有任何内容。*

在不知道你表中的数据分布的情况下，我们只能猜测。可能有 5 行`x = 5`， 可能有 5M 行`x = 77`。测试：

```
FOR i IN 90..100 LOOP ... 
```

对比

```
FOR i IN 0..10 LOOP ... 
```

并考虑从

```
SELECT x, count(*) FROM some_table WHERE x < 100 GROUP BY 1; 
```

此外，比较两个数据点也很难成为声称“指数增长”的理由。在评论中，您推测 Postgres 可能开始写入磁盘，这可能只是解释它。

### 普通 SQL 替代方案

无论哪种方式，您的问题都无法支持您的主张：

> 我必须使用执行语句

*你真的？*这个简单的 SQL 语句与您的 PL/pgSQL 片段完全相同，但可能要快得多：

```
INSERT INTO some_other_table (vals)
SELECT avg_val_by_x
FROM  (
    SELECT avg(val) OVER (ORDER BY x) AS avg_val_by_x
    FROM   some_table
    WHERE  x < 10
    ) sub
WHERE  avg_val_by_x < 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:10:34.913

首先，我想回应克雷格对真实信息的要求。以我的经验，循环会因非常细微的细节而呈指数级变慢。我不知道这是否会回答这个问题，但我会举一个我在自己的工作中遇到的例子。如果不出意外，它将提供一个很好的例子，说明在解决此问题时要寻找的东西。

在 LedgerSMB 中批量支付功能的早期版本中，我们将遍历发票（以二维数组的形式出现）。然后，我们将为每张发票插入两行，然后更新第三行。对于 10 张发票，这将很快。对于 100，会出现明显的减速，而对于 1000（是的，这可能会发生，1000 张发票一次支付给供应商），系统将花费很长时间（以小时为单位）。

问题与缓存有关。系统将有效地开始丢失缓存，并且这些缓存的频率会增加，直到每次写入都有效，新的随机磁盘 I/O 位。因此，随着循环变大，系统会变慢。

我们的解决方案是将所有行写入一个临时表，然后根据临时表的内容运行两次插入查询，最后根据相同的内容运行一次更新。这将时间从几小时缩短到一两分钟。

如果您的情况与您所说的完全一样，那么 PostgreSQL 将比最后一行更有效地缓存第一行。此外，您将得到以下结果：

其中 i 为 1，答案为 a1，其中 i 为 2，答案为 (a1 + a2)/2，其中 i 为 3，答案为 (a1 + a2 + a3)/3，依此类推。所以你有缓存问题和计算问题。

在您的 plperl 编辑中提出的第三种可能性是，您可能会获得一个计划，该计划将几行重新用于具有更多行的计划，以至于该计划不再有意义。请注意，如果要访问表的大部分，则仅索引扫描不一定便宜，因为您丢失了操作系统预读缓存。

如果没有看到真正的代码，虽然不可能看到真正的问题是什么。以上是在黑暗中拍摄或需要检查的东西。

# opengl-es - How can GLKit draw triangles using both CW or CCW notation?

> ID：16136906
> 
> 赞同：0
> 
> 时间：2013-04-21T22:31:35.943
> 
> 标签：opengl-es, glkit

I have a simple textured quad (composed of 2 triangles) that im rendering in my iPhone app using GLKit.

Now for some reason I am not seeing any difference when defining my vertices with CW notation vs CCW notation. Why is this? Note that I am using the default GLKit project template with minimal changes. Also, I am using the GLKBaseEffect for rendering, not ES2.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:26:15.380

对于四边形，CW 与 CCW 改变了法线——三角形的哪一侧“向上”。默认情况下禁用[面剔除](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glCullFace.xml)`glEnable(GL_CULL_FACE)`（用于启用它），因此“向上”或“向下”三角形都将被渲染。

# android - 判断当前设备上是否存在Activity

> ID：16136907
> 
> 赞同：0
> 
> 时间：2013-04-21T22:31:36.050
> 
> 标签：android, android-activity

我想知道 android 设备中正在显示什么活动

如果我要搜索的活动我执行代码如果不是我执行另一个代码

目的是制作一个android服务来检查这个任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:17:33.087

我发现这段代码效果很好

```
Log.i("---------------", "----------onCreate--------------");

        Log.i("-----test------", "----------1--------------");
         ActivityManager am = (ActivityManager) this .getSystemService(ACTIVITY_SERVICE);
         Log.i("-----test------", "----------2-------------");
           List<RunningTaskInfo> taskInfo = am.getRunningTasks(1);
           Log.i("-----test------", "---------3--------------");
            ComponentName componentInfo = taskInfo.get(0).topActivity;
            Log.i("-----test------", "----------4--------------");
            Log.i("------------------", "CURRENT Activity ::" + taskInfo.get(0).topActivity.getClassName()+"   Package Name :  "+componentInfo.getPackageName());
            Log.i("-----test------", "----------5--------------"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:46:59.757

这应该适合你：

[在 Android 中获取活动的应用程序名称](https://stackoverflow.com/questions/3861073/get-active-application-name-in-android)

只需使用您想要的功能对其进行调整，您应该可以很容易地进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:48:02.090

你确定那是你想要的吗？

> 目的是制作一个android服务来检查这个任务

如果您告诉我们您的“目的”背后的原因是什么，我几乎可以肯定我们可以帮助您以更好的方式做您想做的事（可能我们可以找到一种方法可以减少电池浪费并且减少您的敌意用户）。

**无论如何，这是您问题的答案：**

使用ActivityManager 的[getRunningTasks](http://developer.android.com/reference/android/app/ActivityManager.html)获取最近启动的活动列表。

> **公共列表 getRunningTasks (int maxNum)**
> 
> 返回当前正在运行的任务的列表，最近的是第一个，之后是较旧的。请注意，“正在运行”并不意味着任务的任何代码当前已加载或处于活动状态——该任务可能已被系统冻结，以便在下次进入前台时可以以之前的状态重新启动它。

您可能还想使用该标志**`RECENT_WITH_EXCLUDED`**来确保您获得所有活动，即使是那些故意将自己排除在该列表之外的活动。

> `public static final int` **`RECENT_WITH_EXCLUDED`**
> 
> 在 API 级别 1 中添加标志用于`getRecentTasks(int, int)`：返回所有任务，即使是那些设置了 `FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`标志的任务。

# php - is what i'm trying to do with ob_start() possible?

> ID：16136909
> 
> 赞同：1
> 
> 时间：2013-04-21T22:31:54.973
> 
> 标签：php, include, ob-start

I'm new to php and trying to create a simple script.. but I don't know if what i'm trying to do is possible with ob_start() please let me know, thanks. here is my code:

```
<?php
ob_start();

if($mystuff !== 0) { foreach($mystuff['sirf7alk'] as $mystuff) {
?>

<?php include('header.php'); ?>

App name: <?php echo $mystuff->app; ?>

<?php include('footer.php');?>

<?php
} } 

file_put_contents('page.php', ob_get_contents());
?> 
```

that's what my code outputs:

```
my header content
App name: My app name
my footer content 
```

here is what i want to achieve:

```
<?php include('header.php'); ?>
App name: My app name
<?php include('footer.php');?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:48:53.650

您需要*输出*PHP 代码，而不是*运行*它。将其视为字符串将执行此操作：

```
ob_start();
if ($mystuff !== 0) {
    foreach($mystuff['sirf7alk'] as $mystuff) {
        echo "<?php include 'header.php' ?>".PHP_EOL;
        echo "App name: {$mystuff->app}".PHP_EOL;
        echo "<?php include 'footer.php' ?>".PHP_EOL;
    }
}
$output = ob_get_contents();
file_put_contents('page.php', $output); 
```

既然回答了实际问题……以这种方式控制输出缓冲可能会很有趣，但这可能不是世界上最好的主意，也就是说，有更好的方法可以达到相同的结果。例如，简单地使用一个辅助变量来保存原本输出的缓冲内容，这是一种更明智的方法：

```
$output = '';
if ($mystuff !== 0) {
    foreach($mystuff['sirf7alk'] as $mystuff) {
        $output .= "<?php include 'header.php' ?>".PHP_EOL;
        $output .= "App name: {$mystuff->app}".PHP_EOL;
        $output .= "<?php include 'footer.php' ?>".PHP_EOL;
    }
}
file_put_contents('page.php', $output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:36:05.220

```
<?php
ob_start();

if($mystuff !== 0) { foreach($mystuff['sirf7alk'] as $mystuff) {

echo "<?php include('header.php'); ?>\n";
?>
App name: <?php echo $mystuff->app; ?>

<?php
echo "<?php include('footer.php');?>\n";

} } 

file_put_contents('page.php', ob_get_contents());
?> 
```

应该这样做。您必须将整个包含行作为字符串回显，以避免 php 解析它

# c - IUP, button, tree, matrix

> ID：16136911
> 
> 赞同：1
> 
> 时间：2013-04-21T22:32:07.873
> 
> 标签：c, iup

1) I try to load ico image to IUPbutton but with no success.
After linking IM dll's and add proper header this is my approach:

```
Ihandle *btn1, *btn2;
Ihandle* img1;

btn1 = IupButton("", NULL);
IupSetAttribute(btn1, "MINSIZE", "24x24");
btn2 = IupButton("", NULL);
IupSetAttribute(btn2, "MINSIZE", "24x24");

img1 = IupImage(16, 16, IupLoadImage("icons\\home_16x16.ico"));
IupSetAttribute(btn1, "IMAGE", "img1");

frame = IupHbox(btn1, btn2, NULL);
dlg = IupDialog(IupHbox(mat, IupVbox(frame, tree, NULL), NULL)); 
```

IUP don't report any error but image don't appear on the button btn1.
How to load picture from file to a button in RGBA mode?

2) I fill IupTree with data from sqlite database in following order: 'Name' (which is root) and then about 170 branches which have 1-10 leafs. VALUE is set to 0 and 'Name' is selected.
How can I get with code expanded tree to first branches like when I doubleclick to 'Name'?
I try EXPANDALL attribute but then all leaf's are expanded too what is not wanted.

3) How can I get IUPtree item 'id' in k_any callback f. e. when press ENTER key?

4) How can I get IUPtree item text from 'id' in executeleaf and branchopen callbacks?

5) How can I loop through IUPtree to get id, text, sort of item (branch/leaf)?

6) Is here a way on IUPmatrix to catch keyUP or keyRELEASED event like we get keyPRESS in K_ANY?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:31:43.863

1）更加注意每个函数的数据类型。请注意，IupLoadImage 已经返回一个 Ihandle。所以而不是：

```
img1 = IupImage(16, 16, IupLoadImage("icons\\home_16x16.ico")); 
```

你应该做这个：

```
img1 = IupLoadImage("icons\\home_16x16.ico"); 
```

此外，如果你这样做：

```
IupSetAttribute(btn1, "IMAGE", "img1"); 
```

您正在指定一个字符串，您必须以某种方式将字符串“img1”关联到 Ihandle img1。它们是两个非常不同的东西。检查 IupImage 文档。或者你这样做：

```
IupSetHandle("img1", img1);
IupSetAttribute(btn1, "IMAGE", "img1"); 
```

或者更好的方法：

```
IupSetAttributeHandle(btn1, "IMAGE", img1); 
```

2）您是否尝试仅扩展您想要扩展的分支？检查 IupTree 文档中的 STATEid 属性。

3）您想要的是具有焦点的项目。所以获取IupTree的VALUE属性。请注意，Enter 键将触发已经具有项目 ID 的 executeleaf 回调。

4) 检查文档中的 TITLEid 属性。

5) 提示，在设置/获取 IupTree、IupMatrix 或 IupList 的属性时，您可以使用：

```
IupSetAttribute(ih, "TITLE3", "My Title");
  or
IupSetAttributeId(ih, "TITLE", 3, "My Title"); 
```

6) 正如我之前告诉你的，IupMatrix 继承自 IupCanvas，所以你还必须检查 IupCanvas 回调。检查 IupMatrix 回调文档，最后有关于 IupCanvas 回调的解释。

# ruby-on-rails - 在单个域下托管多个应用程序

> ID：16136915
> 
> 赞同：1
> 
> 时间：2013-04-21T22:32:15.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment

目前我为我的客户开发了新的应用程序，需要将它与旧的应用程序集成。我当前的应用程序基于`Ruby 1.9.3`最新的 Rails 版本。旧应用程序写在`Ruby 1.8.7`和类似的东西上`rails 3.0.11.`

所以我的目标是将它托管在一个域下，所以如果`localhost/old_controller`将客户带到某个旧控制器，并将`localhost/new_controller`由我的应用程序处理。是否有可能以及如何做到这一点？或者，如果不可能，则将新应用程序作为旧应用程序的子域处理，例如`localhost`旧应用程序和`new.localhost`我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:04:06.300

看看[Rails 引擎](http://guides.rubyonrails.org/engines.html)。基本上它们是可以连接到另一个应用程序的 Rails 应用程序。

至于 authlogic 问题：如果您的两个应用程序共享**同一个**数据库，那么登录应该不会有问题 - 前提是您在两个应用程序中使用的 gems 共享它们所构建的相同架构。

# python - 将 SocksiPy 与 SSL 一起使用

> ID：16136916
> 
> 赞同：5
> 
> 时间：2013-04-21T22:32:38.657
> 
> 标签：python, ssl

我正在尝试将 SocksIPy 与 ssl 模块（来自 stdlib）一起使用来获取站点的远程证书，但 SocksIPy 不会使用 ssl。

下面的代码将连接到 check.torproject.org 并声明我们没有使用 Tor（意味着 SocksIPy 不工作）（坏）。

不确定 SocksIPy 是否是最好的解决方案，但我无法找到任何其他方法来代理原始套接字（或让 pycurl/urllib2 使用 SOCKS 代理并提供 SSL 证书！）。

澄清一下，我的问题是套接字没有被代理。我想用我选择的代理来获得 ssl 证书，但这没有发生。

现在看来，我可以拥有代理或 SSL，但不能同时拥有。帮助！

```
import socks
import ssl

s = socks.socksocket()
s.setproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)

ss = ssl.wrap_socket(s)
ss.connect(('check.torproject.org', 443))
ss.write("""GET / HTTP/1.0\r
Host: check.torproject.org\r\n\r\n""")

# print ss.getpeercert()
print ss.read(), ss.read(), ss.read()
ss.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-27T05:44:30.700

我在运行 tcpdump 时测试了这段代码，所以它应该可以工作。

```
import socks
import ssl

s = socks.socksocket()
s.setproxy(socks.PROXY_TYPE_SOCKS5,"127.0.0.1",port=9050)
s.connect(('83.94.121.246', 443))
ss = ssl.wrap_socket(s)
print ss.send("hello")
ss.close() 
```

我没有查看 ssl.py 但我猜你必须在 socks 对象上调用 connect 而不是 ssl 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T23:20:48.030

**放在`ssl.wrap_socket`下面`connect`**。否则无法正常工作。

**使用验证和 CA certfile**从服务器获取证书需要创建 SSL 对象并打开验证并为其提供 CA 证书文件。如果你在你的系统上找不到一个，你可以下载一个基于 Mozilla 的 CURL 项目提供的一个本地文件：[http ://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)

注意：SocksIPy 项目很久没有更新了，不支持 Python 3。

原代码的固定版本：

```
import socks
import ssl

s = socks.socksocket()
s.setproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", port=9050)
s.connect(('check.torproject.org', 443))
ss = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED, ca_certs="cacert.pem")

print "Peer cert: ", ss.getpeercert()

ss.write("""GET / HTTP/1.0\r\nHost: check.torproject.org\r\n\r\n""")

content = []
while True:
    data = ss.read()
    if not data: break
    content.append(data)

ss.close()
content = "".join(content)

assert "This browser is configured to use Tor" in content 
```

# codeigniter - A3M CodeIgniter 的 Google+

> ID：16136919
> 
> 赞同：1
> 
> 时间：2013-04-21T22:32:55.383
> 
> 标签：codeigniter, google-plus, codeigniter-a3m

我目前正在为 CodeIgniter 运行 A3M，可以在这里找到：[https](https://github.com/donjakobo/A3M) ://github.com/donjakobo/A3M 对于那些不知道的人，A3M 是一个利用 Facebook、OpenID、Twitter 和 Google 的帐户身份验证系统。

A3M 不支持的是新的 Google+ API 在这里找到：[https ://developers.google.com/+/quickstart/php](https://developers.google.com/+/quickstart/php)

有谁知道支持 Google+ API 的 A3M 的现有解决方案/分支，或者我如何调整当前的 Google 帐户身份验证以使用 Google+ 身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T08:02:25.763

在 GitHub 上有一个关于 A3M 的未解决问题：[https](https://github.com/donjakobo/A3M/issues/37) ://github.com/donjakobo/A3M/issues/37 关注任何官方更新。

# c# - 每次另存为新名称

> ID：16136927
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:33:49.137
> 
> 标签：c#

我可以将屏幕截图保存在计时器上，但是如何将其保存为新名称而不是每次都覆盖？

```
Bitmap bitmap = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                           Screen.PrimaryScreen.Bounds.Height);

Graphics graphics = Graphics.FromImage(bitmap as Image);

graphics.CopyFromScreen(0, 0, 0, 0, bitmap.Size);

bitmap.Save(@"c:tempscreenshot.bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T22:37:45.683

您可以使用方便的方法：`Path.GetRandomFileName()`

```
Bitmap bitmap = new Bitmap(Screen.PrimaryScreen.Bounds.Width, 
              Screen.PrimaryScreen.Bounds.Height);

Graphics graphics = Graphics.FromImage(bitmap as Image);

  graphics.CopyFromScreen(0, 0, 0, 0, bitmap.Size);

bitmap.Save("c://" + Path.GetRandomFileName() + ".bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T22:36:31.333

您只需要每次生成一个唯一的名称。有几种可能性。一种是在末尾添加一个日期时间字符串：

```
Bitmap bitmap = new Bitmap(Screen.PrimaryScreen.Bounds.Width, 
              Screen.PrimaryScreen.Bounds.Height);

Graphics graphics = Graphics.FromImage(bitmap as Image);

  graphics.CopyFromScreen(0, 0, 0, 0, bitmap.Size);

bitmap.Save(@"c:tempscreenshot" + DateTime.Now.Ticks + ".bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T22:36:55.580

使用整数（或其他数字类型）并在计时器内递增。然后用类似的方法调用你的保存方法：

```
bitmap.Save(string.Format("c:tempscreenshot.{0}.bmp", counter), ImageFormat.Bmp); 
```

或使用 GUID：

```
bitmap.Save(string.Format("c:tempscreenshot.{0}.bmp", Guid.NewGuid().ToString("N")), ImageFormat.Bmp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T22:38:01.340

您可以根据当前时间每次生成一个新的文件名。像这样的东西：

```
string GenerateFilename() {
    string file = DateTime.Now.ToString("yy.MM.dd HH.mm.ss") + ".bmp";
    return @"C:\" + file;
} 
```

使用这种方法的好处是，当您浏览保存文件的文件夹时，**它们将被排序。**

然后在您现有的代码中使用它：

```
bitmap.Save(GenerateFilename(), ImageFormat.Bmp); 
```

您还可以`image-`在文件名前添加任何文本（例如或其他内容）。

另一种选择是在文件名的末尾附加一个整数，就像一些复制处理程序一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T22:39:09.903

已经有一些东西了： [Path.GetTempFileName()](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)

# primary-key - 如何防止数据库中的重复记录

> ID：16136929
> 
> 赞同：0
> 
> 时间：2013-04-21T22:33:59.637
> 
> 标签：primary-key, duplicate-data

**问题：**

如何防止网站的两个不同管理员用户创建具有相同客户 ID 的客户记录。

背景资料：

我正在使用的网站根据执行以下操作的例程/方法自动生成一个名为“客户编号”的数字：

1.  使用 cust_number_range 表检查允许的数字范围。
2.  从客户表中找出正在使用的最高数字。
3.  在“创建新客户”表单上显示下一个可用编号。
4.  单击提交按钮时，在尝试保存记录之前，我再次仔细检查客户表，以确保我计算的下一个可用的数字没有被使用。如果它仍然可以，那么我保存到数据库中。

这是数据库的样子：

```
customer table
=====================
id           integer - primary key
custnumber   integer
fname        varchar(255)
lname        varchar(255)

cust_number_range
====================
lower_range integer
upper_range integer
id  integer - primary key 
```

我遇到的问题是，如果两个管理员同时点击“提交”新的客户记录，系统将创建两个具有相同客户编号的记录。以下是我的一些问题：

1.  是否使 custnumber 字段成为 pk 可选的一部分？意思是，这真的是“正确”的解决方案吗？
2.  我还有什么其他方法可以解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:38:38.750

您应该为此使用唯一列。但我也会从代码中检查，在将用户添加到数据库之前，检查用户是否不存在，如果不存在，则仅添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:40:52.337

您需要按顺序排列数字吗？您可以创建一个“索引”表。

```
index_table
====================
index_type integer (possible values - 1 for customers, 2 for orders, etc.)
last_index integer 
```

每次创建新客户时，通过推进 last_index id 字段从索引表中为用户创建索引。如果用户不保存记录，您只需跳过一个 id。

大多数数据库虽然有一个具有类似机制的record_id，所以我建议使用它。

# java - 显示异常原因

> ID：16136933
> 
> 赞同：2
> 
> 时间：2013-04-21T22:35:15.597
> 
> 标签：java, exception

我正在尝试获取可抛出的原因以在发生异常时显示它：

```
if (throwable instanof MyException)
    //Do something here..
} else if (throwable instanceof Exception) {
    if (throwable.getCause() != null) {
        //Show the cause here ..
        // throwable.getCause().getLocalizedMessage()
    }
} 
```

当表达式观察器显示它有一个非空值时，我总是得到一个`null`值。`Cause``getCause()`

![在此处输入图像描述](https://i.stack.imgur.com/PNrae.png)

如何得到原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:38:56.280

`getCause``null`如果`cause`和`this`相同则返回。这是JDK的一个片段：

```
public synchronized Throwable getCause() {
    return (cause==this ? null : cause);
} 
```

在您的情况下，`UsernameNotFoundException`您正在查看的例外情况是什么？

# jquery - 简单的 DIV 悬停动画

> ID：16136939
> 
> 赞同：3
> 
> 时间：2013-04-21T22:36:14.330
> 
> 标签：jquery, jquery-animate, mouseleave

当指针位于 DIV 上方时，我使用`animate()`将 DIV 标记动画化到左侧。当指针离开 DIV 标签时，它会动画回到原来的位置。这里的问题是，当鼠标悬停时，动画将 DIV 标签向左移动 50 像素，鼠标离开时向右移动 50 像素。

即使动画没有完成，这也会使 DIV 向右移动 50 个像素。

```
$('body').on('mouseenter', '.image-photo-previous', function() {
    $(this).animate({marginLeft: '-=50px'}, 300, 'swing');
});

$('body').on('mouseleave', '.image-photo-previous', function() {
    $(this).animate({marginLeft: '+=50px'}, {queue: false}, 300, 'swing');
}); 
```

[http://jsfiddle.net/edgren/CubZy/](http://jsfiddle.net/edgren/CubZy/)

即使鼠标离开时动画未完成，如何使 DIV 标签动画回其原始位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:45:11.193

（没有 JS！）您可以使用 CSS3 来做到这一点`transition`：

`**[DEMO (CSS only)](http://jsfiddle.net/CubZy/20/)**`

```
.image-photo-previous {
    background-color: #222222;
    height: 100px;
    width: 200px;
    transition: 0.3s;         /* Transition! */
}
.image-photo-previous:hover{
    margin-left: -50px;
} 
```

使用 jQuery：

`**[LIVE DEMO](http://jsfiddle.net/CubZy/5/)**`

```
$(".image-photo-previous").on('mouseenter mouseleave', function( e ) {
    $(this).stop().animate({marginLeft: e.type=="mouseenter"?-50:0}, 300);
}); 
```

该`.stop()`方法将防止一些丑陋的动画堆积，并且有一点`Ternary Operator (?:)`你在正确的道路上。

您的示例不适合您的需求，因为在任何新事件中，您都在弄乱一些新添加的边距计算（对于未结束的动画）`+=`，因为`-=`这些边距计算已添加到当前 DIV 样式中，导致元素位置不正确，特别是在快速鼠标移动时。`stop()`清除该行为，您所需要做的就是严格定义位置：`-50`并将`0`它们绑定到当前事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:42:38.607

尝试这个：

```
$(document).ready(function() {

    $('body').on('mouseenter', '.image-photo-previous', function() {
        $(this).stop(true,true).animate({marginLeft: '-=50px'}, 300, 'swing');
    });

    $('body').on('mouseleave', '.image-photo-previous', function() {
        $(this).stop(true,true).animate({marginLeft: '+=50px'}, {queue: false}, 300, 'swing');
    });

}); 
```

阅读有关 .stop() 的更多信息：http: [//api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:41:39.570

## ***[`jsFiddle Demo`](http://jsfiddle.net/CubZy/3/)***

如果您希望动画不被中断，那么您必须让 jquery 在其`fx`队列中管理它。你明确告诉它不要在这里：

```
{queue: false} 
```

所以你需要把它改成这样：

```
$(this).animate({marginLeft: '+=50px'}, {queue: true}, 300, 'swing'); 
```

然后它会等到动画离开队列开始下一个动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T22:46:53.417

如果没有原始值，您可以将 marginLeft 重置为其原始值或 ''。

另外，请致电`$(this).stop();`您`mouseleave`以取消上一个动画。

```
$(document).ready(function() {
    $('body').on('mouseenter', '.image-photo-previous', function() {
        startMargin = $(this).css('marginLeft');
        $(this).animate({marginLeft: '-=50px'}, 300, 'swing');
    });

    $('body').on('mouseleave', '.image-photo-previous', function() {
        $(this).stop();
        $(this).animate({marginLeft: ''}, {queue: false}, 300, 'swing');
    });
}); 
```

小提琴：http: [//jsfiddle.net/ExUzJ/2/](http://jsfiddle.net/ExUzJ/2/)

让我知道这是否是您正在寻找的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T22:47:13.933

参考： [如何使用 jQuery 找出元素是否正在动画？](https://stackoverflow.com/questions/724911/how-do-i-find-out-with-jquery-if-an-element-is-being-animated)

您可以使用以下代码来确定是否正在应用动画

```
if( $('.image-photo-previous').is(':animated') ) {...} 
```

如果是这样，您可以使用上面链接中的回调函数等待（使用`setTimeOut`）或计算使 div 回到其原始位置所需的预期边距像素

# ruby-on-rails - rails 购物车 gem 回形针 集成

> ID：16136941
> 
> 赞同：0
> 
> 时间：2013-04-21T22:36:32.133
> 
> 标签：ruby-on-rails, paperclip, shopping-cart

我正在尝试为我找到一个购物车 gem 或如何构建一个购物车的指南，我可以将它集成到我的 ruby​​ on rails 应用程序的回形针 gem 中。我尝试使用 nimbleshop，但它搞砸了我的用户数据库，我尝试构建自己的数据库，但我认为说明遗漏了一些东西，[http://www.devarticles.com/c/a/Ruby-on-Rails/Shopping-Cart -实施/1/](http://www.devarticles.com/c/a/Ruby-on-Rails/Shopping-Cart-Implementation/1/)。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:47:03.983

我在购物网站上使用卡特曼。

看看： [https ://github.com/willcosgrove/cartman](https://github.com/willcosgrove/cartman)

# shell - 如何从命令输出中获取第二列？

> ID：16136943
> 
> 赞同：188
> 
> 时间：2013-04-21T22:36:40.990
> 
> 标签：shell, awk, ksh

我的命令的输出类似于：

```
1540 "A B"
   6 "C"
 119 "D" 
```

第一列始终是一个数字，后跟一个空格，然后是一个双引号字符串。

我的目的是仅获取第二列，例如：

```
"A B"
"C"
"D" 
```

我打算用它`<some_command> | awk '{print $2}'`来完成这个。但问题是，第二列中的某些值包含空格，这恰好是分隔`awk`字段的默认分隔符。因此，输出混乱：

```
"A
"C"
"D" 
```

如何干净地获取第二列的值（带有成对的引号）？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-04-21T22:51:46.110

用于`-F [field separator]`分割`"`s 上的行：

```
awk -F '"' '{print $2}' your_input_file 
```

或从管道输入

```
<some_command> | awk -F '"' '{print $2}' 
```

输出：

```
A B
C
D 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-07-30T09:41:32.903

如果您可以使用 'awk' 以外的其他内容，请尝试使用此方法

```
echo '1540 "A B"' | cut -d' ' -f2- 
```

**-d**是分隔符，**-f**是要剪切的字段，使用**-f2-** 我们打算剪切第二个字段直到结束。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2017-05-03T15:03:02.683

这应该可以从命令输出“docker images”中获取特定列：

```
REPOSITORY                          TAG                 IMAGE ID            CREATED             SIZE
ubuntu                              16.04               12543ced0f6f        10 months ago       122 MB
ubuntu                              latest              12543ced0f6f        10 months ago       122 MB
selenium/standalone-firefox-debug   2.53.0              9f3bab6e046f        12 months ago       613 MB
selenium/node-firefox-debug         2.53.0              d82f2ab74db7        12 months ago       613 MB

docker images | awk '{print $3}'

IMAGE
12543ced0f6f
12543ced0f6f
9f3bab6e046f
d82f2ab74db7 
```

这将打印第三列

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-04-21T22:57:17.963

或使用 sed 和正则表达式。

```
<some_command> | sed 's/^.* \(".*"$\)/\1/' 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-04-10T02:27:40.663

你不需要 awk 。在 Bash shell 中使用`read`就足够了，例如

```
some_command | while read c1 c2; do echo $c2; done 
```

或者：

```
while read c1 c2; do echo $c2; done < in.txt 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-04-22T08:47:21.377

如果您有 GNU awk，这就是您想要的解决方案：

```
$ awk '{print $1}' FPAT='"[^"]+"' file
"A B"
"C"
"D" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T08:53:48.380

```
awk -F"|" '{gsub(/\"/,"|");print "\""$2"\""}' your_file 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-07T09:02:35.037

```
#!/usr/bin/python
import sys 

col = int(sys.argv[1]) - 1

for line in sys.stdin:
    columns = line.split()

    try:
        print(columns[col])
    except IndexError:
        # ignore
        pass 
```

然后，假设您将脚本命名为 co，例如，执行类似这样的操作来获取文件的大小（该示例假设您使用的是 Linux，但脚本本身是独立于操作系统的）：-

`ls -lh | co 5`

# java - 客户端的UDP Server HashMap迭代

> ID：16136944
> 
> 赞同：0
> 
> 时间：2013-04-21T22:36:45.783
> 
> 标签：java, udp, hashmap

我有一个 UDP 服务器，其中一项操作是向所有加入的客户端发送消息。服务器将客户端记录存储在 HashMap 中。

我需要创建一个可以创建数据包并将其发送到存储在哈希中的所有客户端的方法。我已经阅读了它，但我仍然不太明白如何使用下面显示的代码。

如何循环遍历哈希图并为每个元素/记录创建要发送的唯一数据包..（我查看了下面的 foreach 交互器，但我不知道如何处理它。

```
 Map<Integer, Integer> map = new HashMap<Integer, Integer>();
 for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
 System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
} 
```

我能想到的最好的就是这个

```
private void sendToAll(InetAddress clientIP, int clientPort, String message, String        fromUserName) {
for (Object key : cHASH.keySet())
{
Object value = cHASH.get(key);
//System.out.print(value);
//split value
//clientIP = [0]
//clientPort = [1]
//serverResponse(clientIP,ClientPort);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:10:30.183

这很草率，即使对我来说也是如此。但这很有效，谢谢大家:)对客户对客户方法的建议持开放态度

```
 for (Object key : cHASH.keySet())
    {
        Object value = cHASH.get(key);
        Object[] newArr = ((String) value).split(",");
        System.out.print("element 0 "+newArr[0]);
        clientPort = Integer.parseInt((String) newArr[1]);
        //clientIP = (InetAddress) newArr[0];
        //clientIP = (InetAddress) newArr[1];
         InetAddress.getByName((String) newArr[1]);

        try {
        byte[] buf = new byte[256];
        buf = sudMessage.getBytes();
        DatagramPacket sPacket = new DatagramPacket(buf, buf.length,
                clientIP, clientPort);
        serverSocket.send(sPacket);

    } catch (IOException ex) {
        System.err.println(ex);
    }   

    } 
```

# java - 无法解决“java.sql.SQLException：[Microsoft][ODBC SQL Server Driver]Invalid Descriptor Index”错误

> ID：16136947
> 
> 赞同：2
> 
> 时间：2013-04-21T22:37:19.647
> 
> 标签：java, sql-server, jsp, jdbc

这是试图从表中获取密码的jsp代码

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection("jdbc:odbc:dsn2");

String U=(String)session.getAttribute("uname");
String query="select pwd from img_pwd where uname='"+U+"'";

Statement s=con.createStatement();
ResultSet r= s.executeQuery(query);
String pas="";
 if(r.next())
        {
             pas=r.getString(2);
        }

con.close(); 
```

数据库中的“img_pwd”表是这样的——

1.  (uname,nvarchar(50)
2.  （密码，nvarchar（20））

因此，如问题标题中所述，我收到错误 - **java.sql.SQLException: [Microsoft][ODBC SQL Server Driver]Invalid Descriptor Index**

**注意：**我知道我的结果集代码有问题，但我无法弄清楚。

有人可以指导我吗？？？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:46:28.090

您的 SQL 正在选择一个字段：

```
String query="select pwd from img_pwd where uname='"+U+"'"; 
```

但是这条线正在寻找字段#2（你只选择一个）。

```
pas=r.getString(2); 
```

改为：

```
pas=r.getString(1); 
```

作为参考，这里是[关于 ResultSet 接口的 getString 方法的 Java 文档](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getString%28int%29)。

> 检索此 ResultSet 对象的当前行中指定列的值，作为 Java 编程语言中的 String。参数：columnIndex - 第一列为 1，第二列为 2，...

# android - Android：从未调用过 XMLPullParser.END_DOCUMENT 事件

> ID：16136948
> 
> 赞同：0
> 
> 时间：2013-04-21T22:37:27.823
> 
> 标签：android, xmlpullparser

当尝试使用**XMLPullParser**时，该`XmlPullParser.END_DOCUMENT`事件永远不会被调用，因此假设在 while 循环之后执行的代码永远不会被执行。我怎样才能防止这种情况发生？

代码片段：

```
 int eventType = xpp.getEventType();
        if(eventType == XmlPullParser.END_DOCUMENT) {
            Log.i("app", "End");
            return farmers.getFarmers();
        }
    while (eventType != XmlPullParser.END_DOCUMENT) {
             if(eventType == XmlPullParser.START_DOCUMENT) {
             } else if(eventType == XmlPullParser.START_TAG) {
                 // Do something
             } else if(eventType == XmlPullParser.END_TAG) {
                 // Do something
             } else if(eventType == XmlPullParser.TEXT) {
                 // Do something
             }
             eventType = xpp.next();
            }
        if(eventType == XmlPullParser.END_DOCUMENT) {
            Log.i("app", "End");
            return farmers.getFarmers();
        }
            return "Some data"; 
```

为什么从不调用 return ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:41:05.990

好吧，您将检查封闭`XmlPullParser.END_DOCUMENT`在一个循环中，该循环仅在 eventType is not`XmlPullParser.END_DOCUMENT`时运行，因此它永远不会运行该语句。

你需要 `if(eventType == XmlPullParser.END_DOCUMENT) {}`在循环之外。

编辑：我看到了你的编辑。呵呵，还没有检测到文件的结尾？

尝试重组循环使用`while(true)`，并把

```
else if(eventType == XmlPullParser.END_DOCUMENT) {
//Do stuff here
break;
} 
```

循环内。

这样，它会遍历整个列表，并且仅在到达 END_DOCUMENT 时才离开循环。如果无限循环，那么我没有想法：P。

# c# - LINQ C# - 编写查询以透视样式显示数据

> ID：16136969
> 
> 赞同：0
> 
> 时间：2013-04-21T22:40:49.457
> 
> 标签：c#, sql, linq

我是 C# LINQ 的新手，我不确定如何编写以下查询。我在数据库中有下表。

*   > **产品**
    > 
    > *   产品编号
    > *   姓名
    > *   制造商ID
    > 
    > **制造商**
    > 
    > *   制造商ID
    > *   姓名

每个产品都有一个制造商。要求是我需要显示一份报告，该报告将显示所有制造商（作为列）并显示每个制造商的产品。

下面是我试图实现的示例 [http://s24.postimg.org/9baxp7xw5/Capture.png](http://s24.postimg.org/9baxp7xw5/Capture.png)）

由于这与数据在表中的存储方式不同，我不确定如何检索它。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:48:18.803

这样的事情可能会起作用（做出一些假设）：

```
var pivot = Manufacturers.Select(m => new 
    { 
        Name = m.Name, 
        Products = Products
            .Where(p => p.ManufacturerId == m.ManufacturerId)
            .Select(p => p.Name)
            .ToList()
    }); 
```

# html - CSS：应用于子菜单的第一个菜单层的类

> ID：16136975
> 
> 赞同：0
> 
> 时间：2013-04-21T22:41:17.897
> 
> 标签：html, css

我有一个导航菜单。但是菜单很疯狂。

子菜单类（如果悬停第一个菜单，这是下拉菜单）。“firstmenu”是网站的主要区域，因此是列表的第一级。

问题：子菜单获取 Firstmenus 值。甚至是里面的小箭头`background: url(images/nav-arrow.png) no-repeat center bottom;`——但是为什么？！

我们已经对此进行了研究，拆分了代码，删除了typo3，所有的JavaScript，最后得到了这个css代码：

```
#firstmenu {
 list-style: none; 
 margin: 0;
 padding: 0;
}

#firstmenu .firstLevel {
 float: left;
}

#firstmenu .firstLevel a { 
 display: block;
 font-size: 1.166em;
 font-weight: 600;
 line-height: normal;
 color: #333;
 padding: 41px 20px 26px;
 margin-bottom: 4px;
}

#firstmenu .firstLevel .current a,
#firstmenu .firstLevel a:hover,
#firstmenu .firstLevel a.selected {
 color: #fff;
 background: url(images/nav-arrow.png) no-repeat center bottom;
}

#firstmenu .firstLevel a:hover,
#firstmenu .firstLevel a.selected {
 background-color: #333;
}

/* Drop-Down Menus */

.submenu {
 list-style: none;
 margin: 0;
 padding: 0;
 position: absolute;
}

.submenu > ul {
 top: 4px !important;
}

.submenu .secoundLevel {
 width: 200px;
 background: #fca500;
}

.submenu .secoundLevel a {
 display: block;
 color: #fff;
 padding: 8px 15px;
 border-top: 1px solid rgba(255,255,255,0.2);
}

.submenu .secoundLevel a:hover {
 background-color: #333;
 border-color: #1a1a1a;
}

.submenu .secoundLevel:first-child a {
 border-top: none;
} 
```

有谁知道修复？

编辑，html：

```
<nav id="nav">
 <ul id="firstmenu" class="clearfix">
  <li class="firstLevel"><a href="index.php?id=99"  >Startseite</a></li>
  <li class="firstLevel current"><a href="index.php?id=91">Rootserver</a>
   <ul class="submenu">
    <li class="secoundLevel"><a href="index.php?id=96"  >Vergleich</a></li>
   </ul>
  </li>
  <li class="firstLevel"><a href="index.php?id=92">Voiceserver</a>
   <ul class="submenu">
    <li class="secoundLevel"><a href="index.php?id=97">Preisvergleich</a></li>
   </ul>
  </li>
 </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:18:38.897

我认为问题在于对 CSS 选择器的理解。这个选择器：

```
#firstmenu .firstLevel a.selected {
  color: #fff;
  background: url(images/nav-arrow.png) no-repeat center bottom;
} 
```

声明如下：匹配*所有* `<a>`具有类名的父级`firstLevel`和具有ID的父级的链接`firstmenu`

这意味着这个 HTML 位匹配：

```
<ul id="firstmenu" class="clearfix">
    // snip
    <li class="firstLevel current"><a href="index.php?id=91">Rootserver</a>
        <ul class="submenu">
            <li class="secoundLevel"><a href="#">Vergleich</a></li>
        </ul>
    </li>
    // snip 
```

因为“secondLevel”菜单有一个`<a>`锚标签`.firstLevel`（`#firstmenu`

这正是 CSS 的工作方式，但有一些方法可以防止您看到的内容。

第一个选项是使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)（我有时将其称为“直接后代”选择器）`>`

```
.firstLevel > a:hover{ /* code */ } 
```

此选择器特别声明：“您悬停的所有锚标记都直接来自`.firstLevel`，但没有更深。

这意味着，它匹配：

```
<li class="firstLevel"><a href="#">A</a></li> 
```

但不是下面带有值“B”的链接

```
<li class="firstLevel"><a href="#">A</a>
    <ul>
        <li><a href="#">B</b></li>
    </ul>
</li> 
```

因为第二个`<a>`标签不是 的直接后代`.firstLevel`，所以它们之间有一个`<ul>`and `<li>`。

第二个选项是通过另一个具有更高[CSS 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的规则来“覆盖”以前的样式。

```
#firstmenu .firstLevel .submenu a.selected {
  background-image: none; /* remove the arrow from drop-down menus*/
} 
```

做其中一个是有原因的。

当样式非常特定于该元素时，使用子选择器会很好。您不希望任何样式延续到其他元素。

当您希望仅修改另一个元素的一种特定样式时，请使用“替换”技术（因为没有更好的术语）。IE。您想保留颜色、字体、字体粗细，但只想删除背景图像。

我希望这会有所帮助！

这里有一些（坏的）小提琴显示基本情况：

[http://jsfiddle.net/zTCbF/](http://jsfiddle.net/zTCbF/)

带子选择器

[http://jsfiddle.net/zTCbF/1/](http://jsfiddle.net/zTCbF/1/)

用替换技术

[http://jsfiddle.net/zTCbF/2/](http://jsfiddle.net/zTCbF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:06:46.347

```
#firstmenu .firstLevel a { 
```

这将针对 .firstLevel 下的任何锚标记，包括 .secondLevel 下的锚标记

所以当你说...

```
#firstmenu .firstLevel a:hover, 
```

您正在将悬停样式应用于所有 .firstLevel 后代的锚标记

你想说...

```
#firstmenu .firstLevel > a { 
```

它将仅针对 .firstLevel 的直接后代的锚标记

# python - 设置具有定时自动删除元素的类

> ID：16136979
> 
> 赞同：3
> 
> 时间：2013-04-21T22:41:50.450
> 
> 标签：python

我正在用 Python 编写软件，我需要一个类来存储一组元素（顺序不相关且不重复元素），例如 Python 类`set`，但我需要在一段时间后自动删除这些元素.

为此，我想覆盖该`set.add`方法，在此超时中添加一个具有默认值的参数。

我的问题是实现它的最佳方法：线程？类似 gobject 的超时？

欢迎所有建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T23:14:04.523

只是一个想法（当然，它不是最好的）：使用字典来存储每个添加的时间戳以及每个项目的具体超时。然后，当您要检查某个项目是否在集合中时，您必须将当前时间与字典中的值进行比较。这样你就不需要在超时完成时启动一个新线程来删除每个项目（只需将键保留在字典中，如果再次添加项目则更新它）。

使用此解决方案，您必须实施,以确保`__contains__`并返回一致的结果`__iter__`。`add``'a' in myset``iter(myset)`

```
import time

class TimedSet(set):
    def __init__(self):
        self.__table = {}
    def add(self, item, timeout=1):
        self.__table[item] = time.time() + timeout
        set.add(self, item)
    def __contains__(self, item):
        return time.time() < self.__table.get(item)
    def __iter__(self):
        for item in set.__iter__(self):
            if time.time() < self.__table.get(item):
                yield item 
```

以及一个可能的用法示例：

```
t_set = TimedSet()
t_set.add('a')
time.sleep(0.6)
print 'a' in t_set
time.sleep(0.6)
print 'a' in t_set

t_set.add('x', 0.3)
t_set.add('y', 0.4)
t_set.add('z', 0.5)
time.sleep(0.35)
for item in t_set:
    print item 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T00:23:50.233

我看不出有任何理由不使用多线程。因为它很容易实现，代码最少。大致是这样的：

```
import threading
import time

def ttl_set_remove(my_set, item, ttl):
    time.sleep(ttl)
    my_set.remove(item)

class MySet(set):
    def add(self, item, ttl):
        set.add(self, item)
        t = threading.Thread(target=ttl_set_remove, args=(self, item, ttl))
        t.start() 
```

测试：

```
s = MySet()
s.add('a', 20)
s.add('b', 10)
s.add('c', 2)

print(s)
time.sleep(5)
print(s)

>>> 
MySet({'c', 'b', 'a'})
MySet({'b', 'a'}) 
```

# ruby - 多行 if else ruby

> ID：16136983
> 
> 赞同：1
> 
> 时间：2013-04-21T22:42:12.493
> 
> 标签：ruby, if-statement, block

我知道这个问题已经在其他地方提到过，但是我对`if else`ruby​​ 中多行（块？）语句的正确语法有点困惑。

举个例子：

```
if condition then
  do something
  do somethingelse
  do yetanotherthing
  done
else
  do acompletelyunrelatedthing
done 
```

我知道`then`如果使用多行，则该语句是必需的，但是`done`之前是`else`必需的吗？这似乎会脱离`if...else`上下文。当我包含这个时，`done`我得到：

`syntax error, unexpected '\n', expecting tCOLON2 or '[' or '.'`

当我不包括它时，我得到：

`syntax error, unexpected keyword_else, expecting keyword_end`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T22:44:15.287

嗯... Ruby 中没有`done`关键字。这是正确的语法：

```
if condition
  # do stuff
else
  # do other stuff
end 
```

`then`也不需要关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:29:39.237

仅当`then`您需要将整个内容放在一行上时才使用关键字（将条件与如果为真则采取的操作分开）：

```
if condition then do_something else do_something_different end 
```

如果您不想要全部一行（通常您不想要），则语法与 Doorknob 的答案相同。

# emacs - 我无法从 emacs 中加入 IRC 频道

> ID：16136984
> 
> 赞同：-2
> 
> 时间：2013-04-21T22:42:25.297
> 
> 标签：emacs, irc

我不确定什么是行不通的，但我运行`M-x irc`它会调出通常的 irc 缓冲区，并带有冗长的介绍消息。它将我的昵称设置为我的用户名，这不是我的 irc 注册昵称，因此我发出命令`/nick ActualNick`，然后它告诉我按预期进行识别。但是，然后，我发出命令`/msg NickServ identify <passwd>`，没有任何反应！之后，我可以输入`/me`并看到我的昵称是`ActualNick`，但没有其他内容 - 为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:53:18.473

您可以尝试使用`C-u M-x irc`. 这将提示输入连接详细信息。

# ruby-on-rails - find 方法没有找到它应该在 ruby on rails 中的内容

> ID：16136985
> 
> 赞同：0
> 
> 时间：2013-04-21T22:42:28.137
> 
> 标签：ruby-on-rails, activerecord

我从 ActiveRecord 查找方法中得到了最奇怪的行为。我试图在 updated_at 日期之前找到一条记录，但它正在返回 []。这是代码：

```
 @updated = get_current_user.ideas.all(:conditions => {:updated_at => '2013-04-20 03:30:34'}) 
```

这是应该返回的记录：

```
 #<Idea id: 3, title: "An app that tracks useage", status: "prototype", user_id: 1, updated_at: "2013-04-20 03:30:34" 
```

我让它工作了大约 2 秒钟，然后，什么也没有。问题似乎是它与 updated_at 属性不匹配。它只返回空数组。有谁知道为什么它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:57:41.107

您的用户是否与想法有关联？从您的记录中，我没有看到用户 ID。我做了同样的查询，我可以检索到我的答案。此外，您可以检查您的 get_current_user 是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:58:39.403

尝试这个：

```
@updated = get_current_user.ideas.where(:updated_at => '2013-04-20 03:30:34').all 
```

似乎 all(:conditions => '') 很难记住，并且将在较新的 Rails 版本中被弃用。我不知道。无论如何，我更喜欢“where”方法而不是“all”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:14:02.240

所以问题是我忘记了日期时间实际上是一个日期时间，并试图将它与一个字符串进行比较。那是行不通的。谢谢大家帮忙

# c++ - C++11 和 C++ 2003 兼容性

> ID：16136986
> 
> 赞同：0
> 
> 时间：2013-04-21T22:42:35.497
> 
> 标签：c++, c++11, c++03

在使用 C++11 编译器重建 C++ 2003 代码时，是否有人列出了潜在问题？也许一些编译器有兼容性警告。

# python - 将 Selenium Python 绑定用于 javascript 链接

> ID：16136988
> 
> 赞同：1
> 
> 时间：2013-04-21T22:42:43.903
> 
> 标签：python, selenium, scrapy

我正在尝试使用 Scrapy 来解析一组相对简单的网页。主页有一堆看起来像这样的链接：

```
<a name='LINK1$17' id='LINK1$17' tabindex='145' href="javascript:hAction_win0(document.win0,'LINK1$17', 0, 0, 'International Relations', false, true);"  class='SSSAZLINK'>International Relations</a> 
```

单击该链接会加载第二页，其中显示了我正在抓取的一些详细信息。我确实需要从第一页开始，因为它可以作为我正在抓取的所有这些东西的索引。如何使用 selenium 运行该 javascript 操作？我试过了：

```
import webdriver
driver = webdriver.Firefox()
driver.execute_script("javascript:hAction_win0(document.win0,'LINK1$17', 0, 0, 'International Relations', false, true);") 
```

那没有用。有没有一种简单的方法可以“单击”链接并获取显示的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T19:29:58.503

原来我使用了正确的功能。以下调用有效：

```
driver.execute_script("hAction_win0(document.win0,'LINK1$17', 0, 0, 'International Relations', false, true);") 
```

我只需要删除开头的“javascript：”。

# ruby-on-rails - 为什么我的用户关注/取消关注按钮不起作用？

> ID：16136997
> 
> 赞同：0
> 
> 时间：2013-04-21T22:44:03.303
> 
> 标签：ruby-on-rails

我正在构建一个应用程序（遵循[Michael Hartl 的第 11 章](http://ruby.railstutorial.org/chapters/following-users#top)），用户可以在其中关注其他用户创建的项目。

我创建了一个 ProjectRelationship 模型来保存两个组件：用户的 follower_id 和项目的 projectuser_id。外键已经这样设置了。

现在，我的`_follow_form.html.erb`页面根据是否关注`current_user`项目呈现“关注”或“取消关注”。请在下面查看我的代码，看看我缺少什么。

现在，在每个项目展示页面上都会生成关注按钮。但是，当我单击由 生成的按钮跟随按钮时`_follow.html.erb`，它似乎没有跟随项目或在我调用时更新计数，`@project.followers.count`因为 POST 没有发生。

因此，当我单击关注按钮时，URL 变得混乱。参见示例：

```
#Goes from
domain.com/projects/21

#to
domain.com/projects/21?utf8=%E2%9C%93&authenticity_token=5EQmU0EkHB5yKDYakqL78piMWzZl0CfdpHFEqBeQiN4%3D&project_relationship%5Bprojectuser_id%5D=21&commit=Follow%22 
```

* ***更新：它现在似乎可以工作，但我不确定我是否真的改变了任何东西，但通过迁移更改摆脱了 follower_id 索引：unique => true。**

**架构.rb**

```
create_table "project_relationships", :force => true do |t|
  t.integer  "follower_id"
  t.datetime "created_at",     :null => false
  t.datetime "updated_at",     :null => false
  t.integer  "projectuser_id"
end

add_index "project_relationships", ["follower_id"], :name => "index_project_relationships_on_follower_id", :unique => true
add_index "project_relationships", ["projectuser_id"], :name => "index_project_relationships_on_projectuser_id" 
```

**路线.rb**

```
resources :projects do       
  resources :comments 
  member do
    get :following
  end   
end
resources :project_relationships, only: [:create, :destroy] 
```

**project_relationship.rb**

```
class ProjectRelationship < ActiveRecord::Base
   attr_accessible :projectuser_id

   belongs_to :user, foreign_key: "follower_id"
   belongs_to :project, foreign_key: "projectuser_id"
end 
```

**项目.rb**

```
has_many :project_relationships, foreign_key: "projectuser_id"
has_many :favorited_by, through: :project_relationships, source: :user 
```

**用户.rb**

```
has_many :project_relationships, foreign_key: "follower_id"
has_many :followed_projects, through: :project_relationships, source: :project

def following_project?(project)
  project_relationships.find_by_follower_id(project.id)
end

def follow_project!(project)
  project_relationships.create!(projectuser_id: project.id)
end

def project_unfollow!(project)
  project_relationships.find_by_projectuser_id(project.id).destroy
end 
```

**project_relationships_controller.rb**

```
class ProjectRelationshipsController < ApplicationController

def create
    @project = Project.find(params[:project_relationship][:projectuser_id])
    current_user.follow_project!(@project)
    redirect_to @project
  end

  def destroy
    @project = ProjectRelationship.find(params[:id]).followed_project
    current_user.project_unfollow!(@project)
    redirect_to @project
  end
end 
```

**项目/show.html.erb**

```
<%= render 'follow_form' if signed_in? %> 
```

**项目/_follow_form.html.erb**

```
<% if current_user.following_project?(@project) %>
    <%= render 'unfollow' %>
<% else %>
    <%= render 'follow' %>
<% end %> 
```

**项目/_follow.html.erb**

```
<%= form_for(current_user.project_relationships.build(projectuser_id: @project.id)) do |f| %>
  <div><%= f.hidden_field :projectuser_id %></div>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

**项目/_unfollow.html.erb**

```
<%= form_for(current_user.project_relationships.find_by_projectuser_id(@project),
         html: { method: :delete }) do |f| %>
  <%= f.submit "Unfollow", class: "btn btn-large" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:30:49.773

问题是我的关注/取消关注表单嵌入在另一个导致错误的表单中。取出后，工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:52:48.580

首先-如果您运行`projectfollow!(project)`并`projectunfollow!(project)`在控制台中（与用户、项目等一起）它们是否正常工作？

对于您的表格，请尝试以下方法，看看它是否有效：

```
<%= form_for(current_user.project_relationships.build, url: project_relationships_path(project_id: @project.id)) do |f| %> 
```

然后在您的项目关系控制器中：

```
class ProjectRelationshipsController < ApplicationController
  def create
    @project = Project.find(params[:project_id])
    current_user.projectfollow!(@project)
    redirect_to @project
  end
end 
```

因此，如果您的创建 URL 是`/project_relationships`（通过 POST），则上述内容应发布到`/project_relationships?project_id=5`然后控制器可以找到该项目。

此外，尝试重命名您的方法，使其有意义：

```
def following_project?(project)
end

def follow_project!(project)
end

def unfollow_project!(project)
end 
```

现在`current_user.following_project?(project)`很有意义！

### 更新

好的，我认为以下是问题所在，在您的`create`操作中，您从参数中获取了 id：

```
@project = Project.find(params[:project_relationship][:projectuser_id]) 
```

但是，在您的表单中，您没有设置隐藏字段的值：

```
<%= f.hidden_field :projectuser_id %> 
```

将其更改为以下内容，看看它是否有效：

```
<%= f.hidden_field :projectuser_id, value: @project.id %> # or wherever the id is from 
```

> ID：16136998
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# javascript - 如何使这个 Javascript 函数更快（更少的 CPU 密集型）

> ID：16136999
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:44:12.553
> 
> 标签：javascript, optimization

下面有一个非常简单的功能，可以将图像平滑地移动到其他位置。它来自游戏，因此例如将玩家的图像向左移动 +30 像素，并将地图也向左移动 +30 像素。

问题是一切正常，除了它的缓慢。在我的现代 CPU i7 930 2.8 Ghz 上，它非常流畅和快速，但在配备 1.8 Ghz cpu 的上网本上却非常慢。同样在更好但仍然低端的硬件上，此功能滞​​后（图像移动不那么流畅）并且还需要更多时间来完成相同的移动。

如何使此功能减少 CPU 密集度？

```
var blokada = 0;
var blokada2 = 0;

function translate(elem, x, y, toff, loff, delay2) {
    if (document.getElementById(elem) && blokada == 0) {
        blokada = 1;
        var elem = document.getElementById(elem);
        var left = loff,
            top = toff,
            dx = x,
            dy = y, //top - y,
            i = 1,
            count = delay2,
            delay = delay2 * 2;

        function loop() {
            if (i >= count) {
                blokada = 0;
                return;
            }
            i += 1;
            elem.style.left = (left - (dx * i / count)).toFixed(0) + 'px';
            elem.style.top = (top - (dy * i / count)).toFixed(0) + 'px';
            setTimeout(loop, delay);
        }
        loop();
    }
}

function translate2(elem, x, y, toff, loff, delay2) {

    if (document.getElementById(elem) && blokada2 == 0) {
        blokada2 = 1;
        var elem = document.getElementById(elem);

        var left = loff,
            top = toff,
            dx = left - x,
            dy = top - y,
            i = 1,
            count = delay2,
            delay = delay2;

        function loop() {
            if (i >= count) {
                blokada2 = 0;
                return;
            }
            i += 1;
            elem.style.left = (left - (dx * i / count)).toFixed(0) + 'px';
            elem.style.top = (top - (dy * i / count)).toFixed(0) + 'px';

            setTimeout(loop, delay);
        }
        loop();
    }
}

translate2('player', x, y, 120, 120, 10); //5
translate('map3', x, y, 0, 0, 10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:03:41.983

如果您针对现代浏览器，您可以使用[css3 2d transform 和 translate() 。](http://www.w3schools.com/css3/css3_2dtransforms.asp)Paul Irish 很好地解释了为什么使用翻译比使用绝对位置更好：http: [//paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft /](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)。

您的代码如下所示：

```
var transform = "translate(" + left + "px," + top + "px)";
element.style.transform = transform;
element.style['-webkit-transform'] = transform;
element.style['-ms-transform'] = transform; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:56:36.337

现在这应该比原来的速度至少快 %60。因为它预取了 elem.style，并且整数除法非常非常快。它也适用于蹩脚的浏览器:)

```
var blokada = 0;
var blokada2 = 0;

function translate(elem, x, y, toff, loff, delay2) {
var elem = document.getElementById(elem);  // fetch once
  if (elem && blokada == 0) {
    blokada = 1;
    var sty = elem.style; // fetch once use many...
    // unnecessary assignments use loff and toff directly
    // var left = loff,
    //  top = toff,
    var  dx = x,
         dy = y, //top - y,
         i = 1,
         // unnecessary assignment
         // count = delay2,
         delay = delay2 * 2;

    function loop() {
      if (i >= delay2) {
        blokada = 0;
        return;
      }
      i += 1;
      sty.left = (loff - (~~(dx * i / delay2))) + 'px';
      sty.top = (toff - (~~(dy * i / delay2))) + 'px';
      setTimeout(loop, delay);
    }
    loop();
  }
}

function translate2(elem, x, y, toff, loff, delay2) {
var elem = document.getElementById(elem);  // fetch once
  if (document.getElementById(elem) && blokada2 == 0) {
    blokada2 = 1;
    // unnecessary assignments use loff and toff directly
    // var left = loff,
    //  top = toff,
    var sty = elem.style; // fetch once use many. 
      dx = loff - x,
      dy = toff - y,
      i = 1;
      // unnecessary assignments 
      //count = delay2,
      //delay = delay2;

    function loop() {
      if (i >= delay2) {
        blokada2 = 0;
        return;
      }
      i += 1;
      sty.left = (loff -(~~(dx * i / delay2))) + 'px';
      sty.top = (toff -(~~(dy * i / delay2))) + 'px';

      setTimeout(loop, delay2);
    }
    loop();
  }
}

translate2('player', x, y, 120, 120, 10); //5
translate('map3', x, y, 0, 0, 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:57:21.867

查看 requestAnimationFrame ( [http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/) ) 它确实加快了我不久前正在做的 javascript 动画。它基本上意味着您可以停止使用 setTimeout 并让浏览器决定何时最好计算和绘制下一帧。