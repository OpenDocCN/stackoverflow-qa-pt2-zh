# StackOverflow 问答 12614000-12614999

# sql - 如何使用 sql server 2008 将总和的 Varchar 转换为时间

> ID：12614002
> 
> 赞同：-5
> 
> 时间：2012-09-27T04:15:00.877
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, time

我写了这样的存储过程

```
Declare @sum varchar(50)
Set @sum = (select SUM(ct.WorkingHours) 
            from ConsultantTimeSheet ct 
            where ConsultantID = @Consultantid 
              and ct.Status = @status 
              and ct.StartDate = @StartDate 
              and ct.EndDate = @Enddate 
            group by ConsultantID) 
```

现在我得到了总和`33.90`，但我必须显示`34.30`，如何转换这种格式，分钟超过 60 加到小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:06:10.573

尝试这个：

```
DECLARE @SUM VARCHAR(50)='33.90';

SELECT CAST(CAST(LEFT(@SUM,CHARINDEX('.',@SUM,0)-1) AS INT)+
       CAST(SUBSTRING(@SUM,CHARINDEX('.',@SUM,0)+1,LEN(@SUM)) 
                                    AS INT)/60 AS VARCHAR(10))+'.'+
       CAST(CAST(SUBSTRING(@SUM,CHARINDEX('.',@SUM,0)+1,LEN(@SUM)) 
                                         AS INT)%60 AS VARCHAR(10)) 
```

**结果**：

```
34.30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:27:59.147

将时间存储为小数，您将陷入痛苦的世界。在我看来，你的时间是以十进制形式存储的，因此 1 小时 30 分钟是 1.3，对吗？

由于 0.90 表示 90 分钟，您预计 33.90 将变为 34.30，但是，您是否考虑过存储格式的巨大故障超出了这个小问题？考虑这种情况：

```
create table ConsultantTimeSheet (WorkingHours decimal(5,2));
insert ConsultantTimeSheet select 1.3;
insert ConsultantTimeSheet select 1.3;
insert ConsultantTimeSheet select 1.3;
insert ConsultantTimeSheet select 1.5;
Declare @sum varchar(50);
Set @sum = (select SUM(ct.WorkingHours)  from ConsultantTimeSheet ct);
select @sum;

--- output
5.40 
```

因为 .40 不高于 60，所以没有转换。但是，真的应该是6小时20分钟！！

无论如何，要使用你所拥有的，你需要这个。请尽早修复您的数据库结构。

```
Declare @sum varchar(50);
Set @sum = (select 1.0*floor(RawDecimal)+(RawDecimal-1.0*floor(RawDecimal))*60/100
            from (
            select RawDecimal=sum(1.0*floor(WorkingHours)) + sum(WorkingHours-floor(WorkingHours))/60*100
            from ConsultantTimeSheet ct 
            where ConsultantID = @Consultantid 
              and ct.Status = @status 
              and ct.StartDate = @StartDate 
              and ct.EndDate = @Enddate ) x);
select @sum;

--- output
6.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:42:27.057

尝试这个

```
Select (Hr+MinFraction/60)+((MinFraction%60)/100.00)
From
(
    Select Cast(HourMimute AS INT) As Hr,Cast((HourMimute%Cast(HourMimute AS INT)) *100 As 
    Int) As MinFraction
    From
    (
      select SUM(ct.WorkingHours)  As HourMimute 
        from ConsultantTimeSheet ct 
        where ConsultantID = @Consultantid 
          and ct.Status = @status 
          and ct.StartDate = @StartDate 
          and ct.EndDate = @Enddate 
        group by ConsultantID
    ) As tmp1

  ) AS tmp2 
```

更好的是，您可以编写一个将 100 小时分钟格式转换为 60 小时分钟格式的函数。我刚刚包含在查询本身中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:32:34.510

您没有提到您的字段 Type ，似乎总和本身是不正确的，因为您应该以 60 分钟而不是 100 分钟为基础对字段的小数部分求和，我认为总和会为您返回错误的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T04:26:19.703

您可能需要重新考虑您的方法，因为它是演示问题而不是数据库问题。

# python - 为什么我不能使用 if x == "T" x == " " 来替换 T

> ID：12614003
> 
> 赞同：0
> 
> 时间：2012-09-27T04:15:59.777
> 
> 标签：python, list, replace

我想写一个函数，用空格替换 T 。

```
 b=""
   xs=list("fghtThjchk")
   for x in xs:
       if x=="T" or "t":
           x==" "
           b=b+x 
```

我可以用 .replace 来做到这一点，但我仍然想知道我可以使用 list 来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T04:17:48.350

`x==" "`与`x=" "`b 得到错误值的原因不同

`if x=="T" or "t":`并不意味着“x 是 'T' 或 't' 之一”。你需要这样`if x in 'Tt':`或这样说`if x=="T" or x=="t":`

也许这就是你想要做的

```
b = ""
for x in "fghtThjchk":
    if x == "T" or x == "t":
        x = " "
    b = b + x 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T04:20:23.463

这条线不符合您的要求

```
if x=="T" or "t": 
```

该条件始终评估为真，因为`"t"`被认为是真实的。

你的意思是

```
if x=="T" or x=="t": 
```

和那行说

```
x==" " 
```

我想，这意味着是一项任务，而不是比较：

```
x=" " 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T04:26:20.283

您使用的语法有点不正确。下面给出了在列表推导中使用 if/else 的正确方法：

`''.join([' ' if x=='T' or x=='t' else x for x in xs])`

-- 当字符串长度较大时，此方法更快且优化。

- 我们在上面的答案中一次又一次地创建字符串对象，不建议这样做。

-- 所以在对列表执行所有操作后，总是使用*join()来加入列表，而不是循环中的**字符串连接*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T10:44:20.560

我们可以使用`re`(Regular Expression) 模块，它很快：

```
import re
aa = re.sub(r'([.tT])', " ", "fghtThjchk") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T04:17:57.543

您需要按索引引用列表，例如：

```
for i, x in enumerate(xs):
    if x in ["T", "t"]:
        xs[i] = " " 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T04:20:56.180

当您这样做时，`for x in xs`您一次将名称分配`x`给一个元素的每个元素`xs`。当您这样做时`x=" "`（我认为`==`是错字），您正在重新分配名称`x`，但不会更改`xs`.

# facebook - 通过 HTTP Post 邀请 300 多名朋友参加 Facebook 活动

> ID：12614005
> 
> 赞同：0
> 
> 时间：2012-09-27T04:16:05.740
> 
> 标签：facebook, facebook-graph-api

我希望邀请所有用户朋友参加 Facebook 活动，到目前为止，我从 Facebook 中发现了以下内容：

> 您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP POST 来邀请用户参加活动。您可以通过向 /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 发出 HTTP POST 来邀请多个用户

但我发现了这个：

> 您可以邀请无限数量的人参加活动，但一次只能邀请 100 人。邀请前 100 人后，您可以开始邀请更多人。此外，一个活动一次只能有 300 个待处理邀请。有些人必须先回复您的活动邀请，然后您才能添加更多内容。

有各种各样的 javascript hack 允许用户从 Facebook 上的邀请页面中选择所有内容，但是有人知道如何通过 API 邀请 300 多个吗？

# javascript - 在 Javascript WinRT 应用程序中读取 XML 资源文件

> ID：12614006
> 
> 赞同：6
> 
> 时间：2012-09-27T04:16:19.897
> 
> 标签：javascript, windows-8, windows-runtime, embedded-resource

我正在尝试为我的 WinRT 实验设置一些特定于应用程序的项目（例如 API 密钥）的配置文件。

到目前为止，我在项目的根目录中添加了一个“config.xml”文件，将其标记为属性中的资源……然后我就卡住了。

我能找到的每个示例似乎都处理 JSON 资源文件（它们在某种程度上与约定的本地化相关，并且似乎不适合一般配置内容？），从磁盘加载文件（由于资源被编译，这不起作用进入 .pri 文件），或使用 C#。

那么如何在我的 Javascript/HTML5 应用程序中进行这项工作呢？

我最近的尝试是这样的：

```
var uri = new Windows.Foundation.Uri('ms-resource:///config');
var xml = Windows.ApplicationModel.Resources.ResourceLoader
                                            .getStringForReference(uri); 
```

但这不起作用并引发以下异常：

```
0x80073b1f - JavaScript runtime error: ResourceMap Not Found. 
```

我错过了什么？

* * *

我觉得我越来越近了：

```
var r = Windows.ApplicationModel.Resources.Core.ResourceManager
               .current.mainResourceMap.lookup('Files/config.xml');
var candidates = r.resolveAll();
candidates[0].getValueAsFileAsync().done(readXml); 
```

这会找到文件资源，但候选包含的只是文件的原始绝对路径，因此`getValueAsFileAsync()`会抛出异常“系统找不到指定的文件”。（并且`readXml`没有调用回调）。

所以我似乎仍然无法获得这个 XML 文件的*内容*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:24:52.663

尝试这个...

```
var uri = new Windows.Foundation.Uri('ms-appx:///myFolder/myConfig.xml');
var file = Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri); 
```

您现在可以根据需要使用该文件来解析和处理数据。

# c# - WCF 应用程序是否需要，Windows Azure 服务总线连接

> ID：12614010
> 
> 赞同：0
> 
> 时间：2012-09-27T04:16:25.563
> 
> 标签：c#, wcf, wcf-binding

WCF 应用程序是否要求在托管 WCF 服务的服务器上安装 Windows Azure Service Bus Connect？

我遇到了与此处描述的相同的问题[博客具有相同的错误](http://mytechlifedays.wordpress.com/2011/12/27/configuration-binding-extension-system-servicemodelbindingsnettcprelaybinding-could-not-be-found/)

# bash - 在 Bash 中对一系列数字使用大小写

> ID：12614011
> 
> 赞同：27
> 
> 时间：2012-09-27T04:16:46.480
> 
> 标签：bash, switch-statement

我正在尝试`case`在 Bash（在 Linux 中）中执行以下操作。

如果 X 介于 460 和 660 之间，则输出 X 信息。

如果 X 介于 661 和 800 之间，请执行其他操作。

等等。

现在这就是我所拥有的：

```
case $MovieRes in
    [461-660]*) echo "$MovieName,480p" >> moviefinal ;;
    [661-890]*) echo "$MovieName,720p" >> moviefinal ;;
    [891-1200]*) echo "$MovieName,1080p" >> moviefinal ;;
    *) echo "$MovieName,DVD" >> moviefinal ;;
esac 
```

但不知何故，许多 480p、720p 或 1080p 的视频都以 DVD 结尾。该变量`$MovieRes`是一个简单的列表，每行显示一个介于 1 和 1200 之间的数字。根据值，`case`决定应用哪种“情况”。

我想知道如何实际使用`case`来实现这一点，因为在处理这样的范围时有点令人困惑。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-27T04:48:20.727

在 bash 中，您可以使用`arithmetic expression`：`((...))`

```
if ((461<=X && X<=660))
then
    echo "480p"
elif ((661<=X && X<=890))
then
    echo "720p"
elif ((891<=X && X<=1200))
then
    echo "1080p"
else
    echo "DVD"
fi >> moviefinal 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-27T08:02:19.987

bash`case`语句不理解数字范围。它了解[外壳模式](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)。

以下应该有效：

```
case $MovieRes in
    46[1-9]|4[7-9][0-9]|5[0-9][0-9]|6[0-5][0-9]|660) echo "$MovieName,480p" >> moviefinal ;;
    66[1-9]|6[7-9][0-9]|7[0-9][0-9]|8[0-8][0-9]|890) echo "$MovieName,720p" >> moviefinal ;;
    89[1-9]|9[0-9][0-9]|1[0-1][0-9][0-9]|1200)       echo "$MovieName,1080p" >> moviefinal ;;
    *)                                               echo "$MovieName,DVD" >> moviefinal ;;
esac 
```

但是，我建议您使用 if-else 语句并比较其他答案中的数字范围。A`case`不是解决此问题的正确工具。此答案仅用于说明目的。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-07-12T12:25:05.560

只是为了享受颠覆案例的乐趣，为所欲为，您可以使用`$((...))`

```
case 1 in
    $(($MovieRes<= 460)))echo "$MovieName,???";;
    $(($MovieRes<= 660)))echo "$MovieName,480p";;
    $(($MovieRes<= 890)))echo "$MovieName,720p";;
    $(($MovieRes<=1200)))echo "$MovieName,1080p";;
                       *)echo "$MovieName,DVD";;
esac >> moviefinal 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-26T22:21:25.737

我一直在寻找最简单的解决方案，但发现很难使用带有**数字范围的****case 语句**。

 **最后我找到了一个非常简单的**zsh**解决方案：

```
 #!/usr/bin/zsh 

 case "${var}" in

 <0-5461>)

 printf "${var} is between 0 and 5461"

 ;;

 <5462-10922>)

printf "${var} is between 5462-10922"

 ;;

 esac 
```

对于**Bash**：

```
 #!/bin/bash

 case $((   

(var >= 0 && var <= 5461)      * 1 +   

(var > 5462 && var  <= 10922)   * 2)) in   

(1) printf "${var} is between 0 and 5461";; 

(2) printf "${var} is between 5461 and 10922";; 

esac 
```

希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-24T14:54:54.780

可能对某人有用的类似问题......我刚刚尝试了随机附加的东西，它还检查它是否是一个整数，对我来说，我希望它有一个预设值，让用户更改它，如果他们输入错误它设置为默认值的数据。

```
 func_set_num_files(){
        echo "How many files do you want to create? (input a number 1-10000)"
        read X
        # 1, is it a number, #2 is it within max range?
        if [[ $X != *[!0-9]* ]]; then

            if ((1<=X && X<=10000)) ;then
                        echo "NUM_FILES=$X"
                        NUM_FILES=$X
                else
                        echo "Invalid input, setting to default value [ $NUM_FILES ].";sleep 3
            fi

        else
            echo "Invalid input, non-numeric values entered, setting to default value [ $NUM_FILES ].";sleep 3
        fi

    } 
```

另一个使用“case”检查变量是否在整数范围内的示例：

检查 $MAX 是一个数字并且它在 50-100 之间：

```
 case $MAX in
                ''|*[!0-9]*)
                    echo "The value $MAX is not a number !"
                    exit 1
                ;;
                *)
                    if [ $MAX -lt 50 ] || [ $MAX -gt 100 ] ;then
                        echo "The value $MAX is not between 50-100"
                        exit 1
                    fi
                    echo "Looks like we are good !"
                ;;
            esac 
```**

# asp.net-mvc-3 - Html.DropDownList 是否存在重载，它将模型中的值显示为当前选定的项目？

> ID：12614013
> 
> 赞同：0
> 
> 时间：2012-09-27T04:16:58.143
> 
> 标签：asp.net-mvc-3

Html.DropDownList 是否存在重载，它将模型中的值显示为当前选定的项目？在我看来，我使用 as using 语句插入模型

```
 @using SchoolIn.Models 
```

然后我像这样访问模型：

```
 if (Model.Enrollments != null)
        {   
            @Html.DropDownList("searchString", Model.Enrollments.FirstOrDefault().weekDays.Select(s => new SelectListItem { Text = s.ToString(), Value = s.ToString() }))   
        } 
```

这是我的模型中的代码：

```
 public virtual string classDays { get; set; }
 public string[] weekDays = new string[6]          { "Day", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday" };
 public string[] WeekDays
 {
 get { return weekDays; } 
```

当我的视图加载时，它会显示一个我可以从中选择的下拉列表，我选择一天并保存选择，但是当它再次加载时，我希望之前选择的项目成为列表中的默认选择。我怎样才能做到这一点？我真的很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:00:02.073

您可能需要使用 DropDownListFor 而不是 DropDownList。这是来自[MSDN](http://msdn.microsoft.com/en-us/library/ee703462%28v=vs.108%29.aspx)的构造函数定义。还有五个重载。

```
public static MvcHtmlString DropDownListFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression,
    IEnumerable<SelectListItem> selectList
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:03:54.757

看起来您应该能够`Selected`在适当的项目上进行设置：

```
@{
    var Items = Model.Enrollments.FirstOrDefault().weekDays.Select(s => 
        new SelectListItem { Text = s.ToString(), Value = s.ToString() 
            Selected = s.ToString().Equals(PreviouslySelectedValue)
        } 
    );
}
@Html.DropDownList("searchString", Items) 
```

您也可以使用`DropDownListFor`，它应该将所选项目设置为属性的值。

```
@Html.DropDownListFor(model => PreviouslySelectedValue, Items) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:48:11.907

试试这个扩展方法：

```
public static IEnumerable<SelectListItem> SetSelected(this IEnumerable<SelectListItem> selectList, object selectedValue)
{
    selectList = selectList ?? new List<SelectListItem>();
    if (selectedValue == null)
        return selectList;
    var vlaue = selectedValue.ToString();
    return selectList.BuildList(m => m.Text, m => m.Value, null, m => String.Equals(m.Value, vlaue, StringComparison.CurrentCultureIgnoreCase));
} 
```

然后你可以在你的视图中这样调用它：

```
@Html.DropDownListFor(model => model.CategoryId, ((IEnumerable<SelectListItem>)ViewData["Categories"]).SetSelected(model.CategoryId)) 
```

# php - “post_type”和“tag__in”不能很好地协同工作

> ID：12614017
> 
> 赞同：1
> 
> 时间：2012-09-27T04:17:30.890
> 
> 标签：php, wordpress

我在从所有帖子类型中按标签抓取相关帖子时遇到问题。我正在使用以下代码：

```
<?php
  $tags = wp_get_post_tags($post->ID);
  if ($tags) {
    echo 'Related Posts';
    $first_tag = $tags[0]->term_id;
    $args=array(
      'tag__in' => array($first_tag),
      'post__not_in' => array($post->ID),
      'showposts'=>5,
      'caller_get_posts'=>1,
      'post_type' => array('food','travel')
    );
    $my_query = new WP_Query($args);
    if( $my_query->have_posts() ) {
      echo '<ul>';
      while ($my_query->have_posts()) : $my_query->the_post(); ?>
        <li><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></li>
      <?php
      endwhile;
      echo '</ul>';
    }
  }
?> 
```

它不会返回正确的帖子，而是显示最新的帖子。我在 WP 文档上检查了十几次，我的语法是正确的。

如果这是一个错误，那里有人有这个补丁吗？或者另一种选择是您是否可以共享`SQL`查询方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:04:06.643

禁用所有插件。在插件文件中查找`add_action('pre_get_posts',...`

此操作有时会替换`$my_query->query_vars['post_type']`为“任何”。

对我来说，它是`Sticky Custom Post Types`插件。

# parsing - 在python中解析矩阵的更有效方法？

> ID：12614024
> 
> 赞同：1
> 
> 时间：2012-09-27T04:18:06.413
> 
> 标签：parsing, matrix, python-2.7, text-files

我在一个文本文件中有一些数据，如下所示：

```
1895723957
8599325893
5723857831
5025852920 
```

我想将它解析成 Python 中的列表列表，所以输出是

```
[[1, 8, 9, 5, 7, 2, 3, 9, 5, 7], [8, 5, ... 
```

现在，我有

```
data =  open('file.txt')
rows = [str(line).strip() for line in data]
matrix=[]
for r in rows:
    matrix.append(list(r)) 
```

但是有没有不同的方法可以做到这一点，例如使用更少的代码行或利用理解？

我试过环顾四周，但我不确定在这里使用什么关键字......

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:20:05.243

我会尝试这样的事情：

```
with open('file.txt', 'r') as handle:
    matrix = [map(int, line.strip()) for line in handle] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:16:36.993

在玩弄理解之后，我想出了以下方法：

```
data =  open('file.txt')
matrix = [[int(c) for c in row.rstrip()] for row in data] 
```

`rstrip`多亏了上面的 Blender。

# unix - UNIX 在出现一定数量的“-”后查找单词

> ID：12614026
> 
> 赞同：0
> 
> 时间：2012-09-27T04:18:23.077
> 
> 标签：unix, numbers

假设我有一个格式为

```
word word word - word - word word - ... 
```

换句话说，一些单词穿插了一些破折号（-）。我怎样才能找到（在 UNIX 中）出现在第 849 个破折号之后的单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:26:48.647

（假设数据都在一行上）

切在这种情况下会是你的朋友

```
echo "Hello-World-I-Love-You" | cut -d- -f2
> World 
```

`-d-`表示哪些字符描述了字段并且是`-f2`字段编号。 `man cut`会告诉你更多。

```
cut -d- -f849 < infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:26:27.723

试试这个 perl 单行：

```
perl -ne 'print "$2\n" if m{^([^-]+\-){849}\s*(\w+)}' infile; 
```

如果您正在寻找第 849 个破折号之前的单词，请执行以下操作：

```
perl -ne 'print "$2\n" if m{^([^-]+\-){848}.+?\s*(\w+)\s*\-}' infile; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:34:07.903

```
awk -F"-" '{split($850,a," ");print a[1];}' file 
```

# android - JSON 解析到列表视图

> ID：12614027
> 
> 赞同：1
> 
> 时间：2012-09-27T04:18:24.470
> 
> 标签：android, json, android-listview

我正在为[链接](http://api.androidhive.info/contacts/)解析 json，并且我想通过仅使用 ArrayLists 和 Array Adapter 在列表视图中解析后显示数据。

但我得到的只是索引的最后一个值。

这是我的代码

JSONPARSE.java

```
public class JsonParse extends Activity {

    ArrayList<contactsGS> contacts = new ArrayList<contactsGS>();

    ListView lv_contacts;
    InputStream is = null;
    String jsonString;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_json_parse);

        lv_contacts = (ListView)findViewById(R.id.lv_jsonParse);

        is = CommonUtilJson.getInputStream("http://api.androidhive.info/contacts/");
        jsonString = CommonUtilJson.inputStreamToString(is);
        ParseCode parse = new ParseCode(jsonString);
        contacts=parse.parseValues();

        ArrayAdapter adapter = new ArrayAdapter<contactsGS>(this, android.R.layout.simple_list_item_1,contacts);
        lv_contacts.setAdapter(adapter);

    }

    public String getJsonSring(String api_url) throws URISyntaxException,
    ClientProtocolException, IOException {
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            URL url = new URL(api_url);
            URI uri = new URI(url.getProtocol(), url.getHost(), url.getPath(),
                    url.getQuery(), null);
            request.setURI(uri);

            HttpResponse response = client.execute(request);
            InputStream ips = response.getEntity().getContent();
            BufferedReader buf = new BufferedReader(new InputStreamReader(ips));

            StringBuilder sb = new StringBuilder();
            String s;
            while (true) {
                s = buf.readLine();
                if (s == null || s.length() == 0)
                    break;
                sb.append(s);

            }
            buf.close();
            ips.close();
            return sb.toString();

        }

        finally {
            // any cleanup code...
        }

    }   
    } 
```

这是我解析代码的类。

解析码.java

```
 public class ParseCode {

        String jsonString;
        public static String url = "http://api.androidhive.info/contacts/";
        ArrayList<contactsGS> contactsData = new ArrayList<contactsGS>();
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String,String>>();
        contactsGS gtrSeter = new contactsGS();
        public ParseCode(String jsonString){
            this.jsonString = jsonString;
        }

        JSONObject jsonObj = null;

        public ArrayList<contactsGS> parseValues(){

            try{

                jsonObj = new JSONObject(jsonString);

                JSONArray jsonArray = jsonObj.getJSONArray("contacts");
                for(int index =0 ; index<jsonArray.length();index++){

                    JSONObject contacts = jsonArray.getJSONObject(index);

                    String id = contacts.getString("id");
                    gtrSeter.setId(id);
                    String name = contacts.getString("name");
                    gtrSeter.setName(name);
                    String email = contacts.getString("email");
                    gtrSeter.setEmail(email);
                    String address = contacts.getString("address");
                    gtrSeter.setAddress(address);
                    String gender = contacts.getString("gender");

                    JSONObject phoneObj = contacts.getJSONObject("phone");
                    String mobile = phoneObj.getString("mobile");
                    gtrSeter.setMobile(mobile);
                    String home = phoneObj.getString("home");
                    String office = phoneObj.getString("office");

                   contactsData.add(gtrSeter);

                }
            }
            catch(Exception e){

                e.printStackTrace();
            }
            return contactsData;
        }

    } 
```

这是我的 Getter Setter 类

联系GS.java

```
public class contactsGS {

    public String id;
    public String name;
    public String email;
    public String address;
    public String mobile;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    public String getMobile() {
        return mobile;
    }
    public void setMobile(String mobile) {
        this.mobile = mobile;
    }

    private static contactsGS singletonObject;

    public static contactsGS getSingletonObject(){

        if(singletonObject==null){
            singletonObject = new contactsGS();
        }
        return singletonObject;
    }

} 
```

请帮我。我想在列表视图的一行中获取一个人的详细信息。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:24:56.787

在循环中将每个contactGS添加到arraylist，在for循环中创建ContactGS

```
contactsGS gtrSeter = new contactsGS(); 
```

在 for 循环的末尾添加这一行

```
contactsData.add(gtrSeter ); 
```

像这样

```
for(int index =0 ; index<jsonArray.length();index++){

   contactsGS gtrSeter = new contactsGS();
   JSONObject contacts = jsonArray.getJSONObject(index);

   String id = contacts.getString("id");
   gtrSeter.setId(id);
   String name = contacts.getString("name");
   gtrSeter.setName(name);
   String email = contacts.getString("email");
   gtrSeter.setEmail(email);
   String address = contacts.getString("address");
   gtrSeter.setAddress(address);
   String gender = contacts.getString("gender");

   JSONObject phoneObj = contacts.getJSONObject("phone");
   String mobile = phoneObj.getString("mobile");
   gtrSeter.setMobile(mobile);
   String home = phoneObj.getString("home");
   String office = phoneObj.getString("office");

   contactsData.add(gtrSeter);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:36:21.373

请更改您的代码如下。

在公共类 ParseCode

您定义的，只需在此处声明并在循环中每次都对其进行初始化。

```
contactsGS gtrSeter = new contactsGS(); 
```

改变

```
contactsGS gtrSeter; 
```

并在 for 循环中的公共 ArrayList parseValues() 方法中写入第一条语句。

```
gtrSeter = new contactsGS(); 
```

所以你的代码应该是这样的。

```
for(int index =0 ; index<jsonArray.length();index++){
   gtrSeter = new contactsGS();
   JSONObject contacts = jsonArray.getJSONObject(index);
.
.
.
.
.
.
.
} 
```

# iphone - AS3：Starling+Nape 测试在 iPhone 上太慢（Github 提供）

> ID：12614031
> 
> 赞同：0
> 
> 时间：2012-09-27T04:19:22.840
> 
> 标签：iphone, actionscript-3, air, frame-rate, starling-framework

我已经开始了解 Starling，然后我找到了 Nape。在 GotoAndLearn.com，我找到了使用它们的教程，并且我使用几乎相同的原理进行了自己的测试。

我已将该项目上传到 github，以便更好地理解该问题：

[https://github.com/alesys/RolfNapeStarlingTest](https://github.com/alesys/RolfNapeStarlingTest)

我正在使用 Flash Builder 4.7（测试版），从 Flash Pro CS6 导出精灵表，使用 Starling 和 Nape 的最新 SWC，以及最新的 XCode。

我有 4 节课：

1.  `RolfNapeTest`延伸`flash.display.Sprite`。这是主课。

2.  `Assets`. 它用于嵌入纹理。

3.  `Game`延伸`starling.display.Sprite`。处理所有 Nape 的东西。

4.  `Char`延伸`starling.display.Sprite`。显示随机纹理`Assets`并监听`starling.events.TouchEvent`.

所以，我读到的一件事是确保将纹理嵌入到一个单独的静态类中。所以我在`Assets`课堂上做了这个。

```
public static function getTexture(spriteName:String):Vector.<Texture>
        {
            if (!atlas)
                atlas = new TextureAtlas(Texture.fromBitmap(new SPRITES()),XML(new XMLSPRITES()));
            return atlas.getTextures(spriteName);
        } 
```

`Char`类也很简单：

```
package
{
    import nape.geom.Vec2;
    import nape.phys.Body;

    import starling.display.MovieClip;
    import starling.display.Sprite;
    import starling.events.Event;
    import starling.events.TouchEvent;
    import starling.events.TouchPhase;

    public class Char extends Sprite
    {
        private var body:Body;
        public function Char(body:Body)
        {
            super();
            this.body = body;
            addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event):void
        {
            addChild(new MovieClip(Assets.getTexture((Math.random()>0.5)?Assets.SPRITE_FLAVIA:Assets.SPRITE_MARIANA)));
            pivotX = width>>1;
            pivotY = height>>1;

            addEventListener(TouchEvent.TOUCH, handle_touch);
        }
        private function handle_touch(te:TouchEvent):void
        {
            if ( te.getTouch(this,TouchPhase.BEGAN))
            {
                body.velocity = new Vec2(Math.random()*1000-500,-2000);
            }
        }
    }
} 
```

它接收一个`Body`实例作为参数，加载一个纹理，监听一个`touch`事件，当它发生时改变`Body`速度。

现在，处理 Nape 的类是`Game`：

```
package
{
    import nape.geom.Vec2;
    import nape.phys.Body;
    import nape.phys.BodyType;
    import nape.phys.Material;
    import nape.shape.Polygon;
    import nape.space.Space;

    import starling.display.DisplayObject;
    import starling.display.Sprite;
    import starling.events.Event;

    public class Game extends Sprite
    {
        private var space:Space;
        private var count:int;
        public function Game()
        {
            super();
            addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event):void
        {
            space = new Space(new Vec2(0,3000));

            var walls:Body = new Body(BodyType.STATIC);

            var wall_left:Polygon = new Polygon(Polygon.rect(-20,0,20,stage.stageHeight));
            var wall_right:Polygon = new Polygon(Polygon.rect(stage.stageWidth,0,20,stage.stageHeight));
            var floor:Polygon = new Polygon(Polygon.rect(0,stage.stageHeight,stage.stageWidth,20));

            walls.shapes.add(wall_left);
            walls.shapes.add(wall_right);
            walls.shapes.add(floor);

            walls.space = space;
            count = 0;
            addEventListener(Event.ENTER_FRAME, loop);
        }
        private function loop(e:Event):void
        {
            if ( Math.random()<0.03 && count < 50)
            {
                count++;
                addChar();
            }
            space.step(1/60);
        }

        private function addChar():void
        {

            var body:Body = new Body(BodyType.DYNAMIC,new Vec2(Math.random()*stage.stageWidth,-200));
            body.shapes.add(new Polygon(Polygon.box(50,100),new Material(20)));
            body.graphic = new Char(body);
            body.graphicUpdate = graphicUpdate;
            body.space = space;
            addChild(body.graphic);
        }

        private function graphicUpdate(body:Body):void
        {

            var gra:DisplayObject = body.graphic as DisplayObject;
            gra.x = body.position.x;
            gra.y = body.position.y;
            gra.rotation = body.rotation;
        }
    }
} 
```

如您所见，它非常直。创建一个`Space`实例，然后创建一些墙，最后监听`Event.ENTER_FRAME`调用`Space.step()`并随机创建新`Char`实例。

现在我明白了，可能我应该创建所有 50 个`Char`类实例并将`Object`它们汇集起来。但我也明白这只会影响实例化时的性能。但可能这将是我将在下一次提交中修改的第一件事。

因此，在 Browser 和 Air 上对其进行了测试，效果很好。永远不会像预期的那样从 60fps 下降。

然后我在我的 iPhone4S 上试了一下。在我达到大约 30 个实例之前，一切都以 60fps 的速度顺利进行。然后它开始急剧下降，直到达到 30fps。

另外我必须补充一点：出于某种原因，我收到了来自 Nape SWC 的很多警告：

```
Description Resource    Path    Location    Type
The definition getClass.T depended on by Type in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition getClass.T depended on by Type in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by flash.Boot in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by flash.Boot in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.CbTypeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.CbTypeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.Listener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.Listener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.ListenerList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.ListenerList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.PreListener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.callbacks.PreListener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.constraint.Constraint in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.constraint.Constraint in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.constraint.ConstraintList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.constraint.ConstraintList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.ArbiterList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.ArbiterList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.ContactList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.ContactList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.InteractionGroupList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.dynamics.InteractionGroupList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.geom.GeomPoly in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.geom.GeomPoly in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.geom.GeomPolyList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.geom.GeomPolyList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.geom.RayResultList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.geom.RayResultList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.geom.Vec2List in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.geom.Vec2List in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.phys.BodyList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.phys.BodyList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.phys.CompoundList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.phys.CompoundList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.phys.InteractorList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.phys.InteractorList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.shape.EdgeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.shape.EdgeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.shape.ShapeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.shape.ShapeList in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by nape.space.Space in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by nape.space.Space in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by StringTools in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by StringTools in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_Callback in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_Callback in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_InteractionListener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_InteractionListener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_Listener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_Listener in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_OptionType in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.callbacks.ZPP_OptionType in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_AABB in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_AABB in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Collide in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Collide in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_GeomPoly in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_GeomPoly in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_GeomVert in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_GeomVert in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Mat23 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Mat23 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Ray in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Ray in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Vec2 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Vec2 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Vec3 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.geom.ZPP_Vec3 in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.phys.ZPP_Compound in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.phys.ZPP_Compound in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.phys.ZPP_Interactor in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.phys.ZPP_Interactor in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.shape.ZPP_Polygon in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.shape.ZPP_Polygon in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_DynAABBPhase in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_DynAABBPhase in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_Space in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_Space in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_SweepPhase in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.space.ZPP_SweepPhase in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Debug in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Debug in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_MixVec2List in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_MixVec2List in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_Body in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_Body in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found  RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_CbSet in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_CbSet in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_CbSetPair in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_CbSetPair in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_PartitionVertex in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_PartitionVertex in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleEvent in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleEvent in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found   RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleSeg in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleSeg in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found RolfNapeTest        line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleVert in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    NapeTest2       line 0  Flex Problem
The definition Null.T depended on by zpp_nape.util.ZPP_Set_ZPP_SimpleVert in the SWC /Users/rolf/Documents/AS3 libs/Nape/swc/release_nape.swc could not be found    RolfNapeTest        line 0  Flex Problem 
```

所以，问题是：除了`Object`汇集所有`Char`实例之外，我是否遗漏了其他可能导致 FPS 下降的东西？也许来自 SWC 的所有这些警告消息都与此有关，但为什么这不会在 Air 或 Browser 上发生？

还是我应该简单地切换到 Box2DFlashAS3？

感谢您的阅读。

# c# - 动态加载程序集

> ID：12614039
> 
> 赞同：1
> 
> 时间：2012-09-27T04:20:30.047
> 
> 标签：c#, excel

我需要动态加载程序集。目前我正在使用“Microsoft.Office.Microsoft.Office.Interop.dll”。我需要打开一个 excel 文件并从中获取工作表和数据。谁能告诉我该怎么做？

```
Assembly SampleAssembly = Assembly
          .Load("Microsoft.Office.Interop.Excel, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c");

if (SampleAssembly != null)
{
    Type type = SampleAssembly.GetType("Microsoft.Office.Interop.Excel.ApplicationClass");
    Object AppClass = Activator.CreateInstance(type);

   //How will I get ApplicationClass object and Workbooks objects here?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:02:08.403

利用`dynamic`：

```
 Type type = SampleAssembly.GetTypes().Single(t => t.Name == "ApplicationClass");
 dynamic appClass = Activator.CreateInstance(type);

 var workbook = appClass.Workbooks.Open("C:\\test.csv");
 var worksheet = workbook.Worksheets[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:17:42.380

如果您不能/不想使用动态，我将定义一个带有接口（或一组接口）的项目，该接口公开您需要使用的 excel 方法/对象，并且您可以在代码中引用而无需任何参考实际的excel dll。然后在引用 excel 并将动态加载的不同项目中实现它。

像这样的东西：

```
public interface IExcelApp
{
    IExcelWorkbook OpenWbk(string aPath);
    // other stuff
}

public interface IExcelWorkbook
{
    //the stuff you need
} 
```

实现（在我称为 ExcelBridge 的项目中）：

```
public class ExcelApp : IExcelApp
{
    private ApplicationClass _app;

    public ExcelApp()
    {
    }

    public IExcelWorkbook OpenWbk(string aPath)
    {
        return new ExcelWorkbook(_app.Workbooks.Open(aPath));
    }
}

public class ExcelWorkbook : IExcelWorkbook
{
    private Workbook _wbk;

    public ExcelWorkbook(Workbook aWbk)
    {
        _wbk = aWbk;
    }
} 
```

那么你的代码可能是这样的：

```
Assembly SampleAssembly = Assembly.Load("ExcelBridge", Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c");

if (SampleAssembly != null)
{
    Assembly YourExcelAssembly = Assembly.Load("ExcelBridge.dll");
    Type type = YourExcelAssembly .GetType("ExcelApp");
    IExcel AppClass = Activator.CreateInstance(type) as IExcelApp;

   //now you can write:
   IExcelWorkBook aWbk = AppClass.Open("your xls path");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T12:15:03.427

如果您使用的是 .NET 3.5，则不能使用`dynamic`关键字。您唯一的选择是使用@Francesco 所述的一系列代理类（手动编写或自动生成）。但是如果您需要访问大量 Excel 类/函数/属性，手动方法确实很麻烦。您必须为您需要的每个成员编写一个函数/属性代理。

管理这一点的关键是，您无需编写大量代理函数，而是将所有处理 Excel 的代码放在一个单独的软件层（类似于数据访问层，DAL）中，放在不同的库项目中。该层只是为应用程序提供了一些高级接口（只有几个成员函数），因此应用程序甚至不知道 MS Excel 自动化的使用。

请注意，即使您不想动态加载程序集，Excel 访问代码的这种封装也是一种很好的做法。例如，如果您觉得 Office 自动化令人沮丧，您可以很容易地用另一种技术（如 ADO.NET）替换它，该技术带有`Microsoft.ACE.OLEDB.12.0`用于[读取/写入 Excel 文件](http://support.microsoft.com/kb/316934/en-us)的提供程序，您也会发现在 x64 平台中也令人沮丧！

例如，如果您想从 Excel 文件中获取工作表和数据，您可以在名为的项目中提供以下接口，例如`Utils.OfficeAutomation`（不引用`Microsoft.Office.Interop.Excel.dll`）：

```
interface IExcelLayer {
    ...
    bool ImportFrom(string fileName, string sheetName, out object[,] cells, bool skipHeaderRow = true);

    // a few other members...
    ...
} 
```

然后在一个名为 say 的单独项目中实现它，该项目`Utils.OfficeAutomation.Impl`同时引用`Utils.OfficeAutomation`和 real `Microsoft.Office.Interop.Excel.dll`：

```
class ExcelMagician : IExcelLayer {
    ...
    bool ImportFrom(string fileName, string sheetName, out object[,] cells, bool skipHeaderRow = true)
    {
         Excel.Application excelApp = new Excel.Application()
         ...
    }
    ...
} 
```

主应用程序仅对`Utils.OfficeAutomation`. 作为回报，`Utils.OfficeAutomation`它以某种方式负责动态查找和加载`Utils.OfficeAutomation.Impl`，或者在出现问题时生成错误：

```
IExcelLayer m_instance = null;

...

try
{
    Assembly assembly = Assembly.Load("Utils.OfficeAutomation.Impl");
    Type excelType = assembly.GetType("Utils.OfficeAutomation.Impl.ExcelMagician");
    m_instance = (IExcelLayer) Activator.CreateInstance(excelType);

}
catch (Exception e)
{
    throw new Exception("Couldn't load Excel assembly.")
} 
```

如果未安装适当版本的 Microsoft Excel，则加载程序集会`Utils.OfficeAutomation.Impl`失败，或者调用类似的成员会`ImportFrom`生成异常。

您最终需要在内部编写包装类`Utils.OfficeAutomation`作为 Excel 访问层或 Excel 功能的网关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:25:56.650

这是您在 C# 中的操作方法

```
using Microsoft.Office.Interop.Excel;
Type type = SampleAssembly.GetType("Microsoft.Office.Interop.Excel.ApplicationClass");
var application = Activator.CreateInstance(type);
var workbook = application.Workbooks.Open(fileName);
var worksheet = workbook.Worksheets[1] as Microsoft.Office.Interop.Excel.Worksheet; 
```

# jquery - 处理 ASP.NET 的 ClientID 的最佳方法是什么

> ID：12614042
> 
> 赞同：2
> 
> 时间：2012-09-27T04:21:00.360
> 
> 标签：jquery, asp.net, clientid

我试图找到最好的方法来处理 ASP.NET`runat="server"`为使用`<%= id.ClientID %>`. 我今天早些时候提出了以下解决方案，但我确信还有更优雅的解决方案：

```
 $(document).ready(function() {
        var dotNetPrefix = $("[id$='prepended_ID_value']").attr('id');
        if (dotNetPrefix !== undefined) {
            dotNetPrefix = dotNetPrefix.replace('prepended_ID_value', '');
            dotNetPrefixID = '#' + dotNetPrefix;
            console.log('dotNetPrefix = ' + dotNetPrefix);
            testDotNet('prepended_ID_value');
        } else {
            console.log('Hidden Field is Missing! => <asp:HiddenField runat="server" ID="prepended_ID_value" Value="dotNet_ID_Prefix" />');
        }

    });

    function testDotNet(getID) {
        var test_dotNetPrefixID = $(dotNetPrefixID + getID).val();
        console.log('$(\'' + dotNetPrefixID + getID + '\').val() = ' + test_dotNetPrefixID);
    } 
```

这种方法的一个问题是它要求我在每一页中放置以下隐藏字段：

`<asp:HiddenField runat="server" ID="prepended_ID_value" Value="dotNet_ID_Prefix" />`

......这使它有点笨拙（或增加了现有的笨拙因素）。

我的最终目标是让我不再需要使用`<%= id.ClientID %>`（或任何需要服务器端代码的东西），以便我的所有 JS 都可以作为包含调用，而不必将其嵌入到我的 ASPX 页面中。哦，我的第二个最终目标是它尽可能简单，并且从一个项目到另一个项目不需要大量的设置时间。

我用一个例子创建了一个 JSFiddle [http://jsfiddle.net/Realto619/8ZZYt/2/](http://jsfiddle.net/Realto619/8ZZYt/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:23:03.543

为什么不只使用[ClientIDMode=Static](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)？在 Web.config 中设置它，以便您的客户端 ID 在整个站点中保持原样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T04:24:17.723

如果您使用的是**.Net framework 4.0 或更高版本**，请使用Control的[ClientIDMode属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

您可以使用 Static 作为[ClientIDModeEnumeration](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)

> ClientID 值设置为 ID 属性的值。如果控件是命名容器，则该控件用作它所包含的任何控件的命名容器层次结构的顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:24:23.193

您可以使用带有选择器的 jQuery 结尾：

`$('input[id$="myServerId"]')`

但请记住，这种选择器比直接使用 id 选择要慢得多`<%= id.ClientID %>`。

[http://jsperf.com/id-vs-ends-with](http://jsperf.com/id-vs-ends-with)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-17T11:00:58.590

正确答案如下

```
var txt1 = $('#<%= txt1.ClientID %>');
$(txt1).click(function () {
    alert('hi');
}); 
```

她我在 javascript 上创建了一个新变量，该变量是基于其呈现的客户端 ID 对控件的引用

# ruby-on-rails - 从参数获取信息到模型轨道回形针应用程序

> ID：12614048
> 
> 赞同：0
> 
> 时间：2012-09-27T04:21:53.010
> 
> 标签：ruby-on-rails, ruby, paperclip, params

我有一个轨道应用程序。我正在使用 gem:paperclip 将照片上传到我的服务器。我要做的是使用来自 perams 哈希的信息在服务器上创建一个文件夹结构。请看下面的代码。

照片控制器.rb

```
 # POST /photos
 # POST /photos.json
 def create

 @photo = Photo.new(params[:photo])
 @photo.lat = params["photo%5Blat%5D"].to_s
 @photo.lng = params["photo%5Blng%5D"].to_s
 @photo.description = params[:description]
 @photo.takenby = params[:takenby].to_s

 @photo.save

 puts "photos/create photos.inspect= #{@photo.inspect}"

 end 
```

照片.rb

```
 class Photo < ActiveRecord::Base

 attr_accessible :lat, :lng, :image
 vendor = params[:description]
 owner = params[:owner]
 Paperclip.interpolates :prefix  do |attachment, style|
 "#{owner}/#{Date.today.to_s }/#{vendor}"
 end

has_attached_file :image,
                :path => ":prefix/:basename.:extension",
                :styles => { :thumbnail => "57x57", :original => "100x100" },
                :storage => :s3,
                :s3_credentials => S3_CREDENTIALS 
```

但是，我在服务器控制台上收到此错误。

```
 Started GET "/photos?lat=37.785834&lng=-122.406417" for 127.0.0.1 at 2012-09-26 
  21:08:57 -0700
 21:08:57 web.1  | Processing by PhotosController#index as JSON
 21:08:57 web.1  |   Parameters: {"lat"=>"37.785834", "lng"=>"-122.406417"}
 21:08:57 web.1  | Completed 500 Internal Server Error in 4ms
 21:08:57 web.1  | NameError (undefined local variable or method `params' for #<Class:0x007fb7d4fa3320>):
 21:08:57 web.1  |   app/models/photo.rb:23:in `<class:Photo>'
 21:08:57 web.1  |   app/models/photo.rb:18:in `<top (required)>'
 21:08:57 web.1  |   app/controllers/photos_controller.rb:14:in `index' 
```

我需要在模型中进行哪些更改，以便回形针以正确的文件夹结构将图像保存在服务器上？

* * *

这解决了我的问题：

```
 photo.rb 

 Paperclip.interpolates :prefix  do |attachment, style|
 "#{attachment.instance.takenby}/#{Date.today.to_s }/#{attachment.instance.description}"
 end 
```

但这引入了一个新问题。我不能再保存不同尺寸的图像了。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:04:04.083

您不能通过这种方式访问​​您的班级照片中的 params 哈希：

```
vendor = params[:description]
owner = params[:owner] 
```

描述示例：

1）首先，创建一个 config/initializers/paperclip.rb 文件并添加以下内容：

```
Paperclip.interpolates :description do |attachment, style|
  attachment.instance.description # or other attribute
end 
```

2）然后，

```
has_attached_file :image,
                  :path => ":description/:basename.:extension",
                  :styles => { :thumbnail => "57x57", :original => "100x100" },
                  :storage => :s3,
                  :s3_credentials => S3_CREDENTIALS 
```

3）阅读这篇文章了解更多信息：

*   [堆栈溢出答案 1](https://stackoverflow.com/questions/4546305/with-paperclip-how-can-i-change-the-image-location-to-a-parent-model-id-id)
*   [堆栈溢出答案 2](https://stackoverflow.com/questions/4041373/paperclip-custom-path-and-url)
*   [关于插值的文档](https://github.com/thoughtbot/paperclip/wiki/Interpolations)
*   [关于回形针动态路径的好文章](http://rohitsharma9889.wordpress.com/2010/12/03/making-dynamic-paths-for-paperclip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:02:07.960

你不能直接访问模型中的参数。如果您想访问它们，您可以将参数作为参数传递给模型中声明的方法。

在控制器中，做

```
obj.set_values(params) 
```

在模型中，做

```
def set_values(params)
  self.vendor = params[:description]
  self.owner = params[:owner] 
end 
```

在保存模型之前调用插值代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:08:57.230

`params`无法从您的模型中访问，因此这些分配将失败。

如果 vendor 和 owner 是 Photo 的属性，只需在 create 操作中分配它们。您可能想要修改表单，以便可以找到 Photo 模型的所有值，`params[:photo]`以减少不必要的分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:06:31.180

$rails g 回形针张贴照片

$ 耙分贝：迁移

转到 Post.rb 并添加：

> attr_accessible :photo has_attached_file :photo, :styles => { :small => '150x150', :normal => '400x400' }, :path => ":rails_root/public/system/:attachment/:id/:style/ :filename", :url => "/system/:attachment/:id/:style/:filename"

打开你的 _form.html.erb 并重写是：

```
<%= form_for (@post) do |f| %> 
```

到：

```
<%= form_for @post, :html => { :multipart => true } do |f| %> 
```

并添加这是_form：

```
<p>
<%= f.file_field :photo %>
  </p> 
```

在 Index.html.erb 中：

> 在 Show.html.erb 中：

# c# - 删除字符串 C# 的某些部分

> ID：12614056
> 
> 赞同：1
> 
> 时间：2012-09-27T04:22:55.410
> 
> 标签：c#, string, c#-4.0

我有一个这样的字符串

> <tr><td>14.54.49</td><td>SKUTTELG</td><td>001772377777</td><td>测试</td><td>SKUTTELG - 莫塔特。Vilt: Okse 2,5 år + Jak</td></tr>

我想得到

> SKUUTELG 001772377777 测试 SKUTTELG - mottatt。Vilt: Okse 2,5 år + Jak

需要删除

> <tr><td>

我是这样尝试的...

```
var testString = "MY STRING"
var stringArray = testString.Split('<tr><td>');
stringArray.Remove("<tr><td>);
var output = String.Join("<tr><td>", stringArray); 
```

但这不起作用..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T04:27:04.173

如果我理解正确并且在这种情况下您只需要去除 HTML 标记，那么在拆分顶部进行简单的字符串替换即可：

```
var testString = "your string";

var array = str.Split(new string[] { "<tr>", "<td>" }, 
                       StringSplitOptions.RemoveEmptyEntries);

return string.Join("", array.Skip(1)).Replace("</tr>", "").Replace("</td>", " "); 
```

基本步骤：

*   要拆分数组，请使用包含 the`<tr>`和`<td>`标记的字符串数组。
*   然后使用 LINQ 跳过第一个元素并将这些元素重新连接在一起。
*   用空字符串或空格替换结束标记，具体取决于您想要结束的间距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:19:54.117

用[html 解析器](http://htmlagilitypack.codeplex.com/)解析 html 怎么样？

```
string html = @"<tr><td>14.54.49</td><td>SKUTTELG</td><td>001772377777</td><td>test </td><td>SKUTTELG - mottatt. Vilt: Okse 2,5 år + Jak</td></tr>";

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var tds = String.Join(" ", doc.DocumentNode
                              .SelectNodes("//td").Select(x => x.InnerText)
                              .Skip(1)); 
```

`tr`如果您的表中有多个

```
var lines = String.Join("\n",doc.DocumentNode.SelectNodes("//tr")
                                .Select(node=>String.Join(" ",
                                                    node.Descendants("td").Skip(1)
                                                        .Select(x=>x.InnerText)))); 
```

# javascript - 无法将元素移动到正确的时间结束

> ID：12614058
> 
> 赞同：1
> 
> 时间：2012-09-27T04:22:56.950
> 
> 标签：javascript, jquery

我正在使用 jquery 在 div 集内滑动图像以隐藏溢出，然后删除第一个图像并将其附加到末尾，这样我在列表中总是有相同数量的图像，并且它们每次都向左滑动函数触发：

```
function xxx(){
    var first = $('.ximg:first');
    $('.ximg').animate({ left: '-=200'}, 2000, function(){ $('.ximg').css({left: '0'}); first.insertAfter($('.ximg:last'));});

}
setInterval(function(){ xxx () }, 8000);

<div style="position:relative; overflow:hidden; width: 400px; height: 150px;">
    <div class="ximg" style="position: relative; width: 200px; min-height:150px; background:red"></div>
    <div class="ximg" style="position: relative; width: 200px; min-height:150px; background:orange"></div>
    <div class="ximg" style="position: relative; width: 200px; min-height:150px; background:green"></div>
    <div class="ximg" style="position: relative; width: 200px; min-height:150px; background:yelow"></div>
</div> 
```

但我最终只在容器中添加了 1 个图像，第二个图像仅在函数触发时添加。我知道有读过的插件可以做这种事情，但我希望它简单，并且更喜欢尝试编写自己的插件，即使我对 jquery 比较陌生！

[http://jsfiddle.net/rgct2/6/](http://jsfiddle.net/rgct2/6/)

容器是 400 宽，因为每个 div 是 200 宽，所以应该总是有 2 个 div 在视图中，即使在动画期间它会显示第一个和第三个 div 的百分比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:25:59.017

更好的方法可能是对第一个元素的宽度进行动画处理，因此不需要对所有元素进行动画处理。

```
function xxx() {
    var origWidth = $('.ximg:first').width();
    $('.ximg:first').animate({
        width: 0
    }, 2000, function() {$(this).insertAfter($('.ximg:last')).css({width: origWidth})});
} 
```

元素也存在 CSS 问题。父元素应该有`white-space: nowrap`，所以元素在同一行，即使它们不可见。子元素应该有`display:inline-block`，因此它们可以排成一行（即内联），并且具有可配置的宽度。

要注意的另一件事是`<div>`s 之间的空格。您需要确保没有无意的空格，包括换行符。

请参阅更新的演示：http: [//jsfiddle.net/rgct2/7/](http://jsfiddle.net/rgct2/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:05:36.140

经过测试及其工作，而不是使用删除，使用“**分离**”

```
function xxx(){

     $('.ximg').css({left: '0'});
     $('.ximg').animate({ left: '-=200'}, 2000, function(){ });
     $('.ximg:first').detach().insertAfter( $('.ximg:last') );
} 
```

# c# - 如何使用 C# 解码这个 html 字符串？

> ID：12614062
> 
> 赞同：1
> 
> 时间：2012-09-27T04:23:20.123
> 
> 标签：c#, html

我有一些带有以下javascript格式字符串的字符串：

```
\u003Cdiv>\u003Cdiv class=\"mbm detail_research\">\u003Cdiv class=\"clearfix\">\u003Ca class=\"_8o _8r lfloat\" href=\"http:\/\/www.abcm.com\/mutily\/post.php?id=2344324342\" 
```

任何人都知道如何使用 C# 将其解码为普通的 html 字符串？

我的意思是它会变成：

```
<div><div class="mbm detail_research"><div class="clearfix"><a class="_8o _8r lfloat" href="http://www.abcm.com/mutily/post.php?id=2344324342" 
```

解码后。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:30:28.950

使用 HttpUtility 类将其解码为：

```
String myDecodedString = HttpUtility.HtmlDecode("Html encoded String here"); 
```

关注这篇[MSDN](http://msdn.microsoft.com/en-us/library/7c5fyk1k%28v=vs.90%29.aspx)文章

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:09:31.827

你正在寻找的是`Regex.Unescape`

```
var decodedString = Regex.Unescape(yourString); 
```

# java - 如何将PLSQL过程的结果检索到java类

> ID：12614066
> 
> 赞同：-3
> 
> 时间：2012-09-27T04:23:47.710
> 
> 标签：java, oracle, plsql

我们如何将 pl sql 过程的结果检索到 java 类并在 java 中进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:32:02.233

您用于`CallableStatement`执行该过程，然后`getResultSet()`对多个结果集使用`getMoreResults()`.

你可以参考这个java代码，

```
CallableStatement cstmt = con.prepareCall("{call simpleprocedure(?)}");
cstmt.setString(1, "param");
ResultSet rs = cstmt.executeQuery(); 
```

# c++ - C++ 从文件中读取信息并根据该信息构建二维向量

> ID：12614067
> 
> 赞同：0
> 
> 时间：2012-09-27T04:24:12.747
> 
> 标签：c++, file, input, vector, 2d

文本文件格式如下图：

2 列 2 行全部 * 走（这样还有四行）

对于每一行文本，我需要根据文本行中给出的信息构建一个二维向量并输出到控制台。例如，第一行文本的输出如下所示：

**

**

我可以将信息读入我的程序；但是，我不知道如何进一步。如何对信息进行分类，以便程序知道向量需要有 2 列和 2 行？

任何提示或帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:47:04.667

似乎您需要解析输入并从中获取信息。现在，有一些库，比如[boost::spirit](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/index.html)，但是如果你只需要这个简单的案例，那么就不需要只为一个案例使用这么大的库。

我建议将输入字符串简单地拆分为单词，如下所示：

```
string input = "2 columns 2 rows all * go"; // Read it from some input
istringstream iss(input);

vector<string> tokens;
copy(istream_iterator<string>(iss),
     istream_iterator<string>(),
     back_inserter<vector<string> >(tokens)); 
```

然后`tokens`是你的话。因此，如果您希望第一个单词用于列，而第三个单词用于行，那么您可以这样做：

```
int columns = atoi(tokens[0].c_str());
int rows = atoi(tokens[2].c_str()); 
```

我想你可以弄清楚其余的。

希望这可以帮助。

# java - 构建我的 NetBeans Java 项目的指南

> ID：12614070
> 
> 赞同：0
> 
> 时间：2012-09-27T04:24:30.260
> 
> 标签：java, netbeans, package, project, structure

迄今为止，我一直使用文本编辑器进行编码，并使用 CLI（Windows 和 Mac）进行编译。这是我第一次使用 IDE，我选择了 NetBeans。这也是我第一次遇到包。

希望获得一些有关如何设置我的项目的指导/指导。

我的项目包括： - 服务器应用程序 - 客户端应用程序 - 常用对象

这就是我所做的：

1.  创建项目
2.  在这个项目下，我创建了三个包：
    *   服务器 - 仅特定于我的服务器应用程序的源文件
    *   客户端 - 仅特定于我的客户端应用程序的源文件
    *   Common - 服务器和客户端应用程序共享的公共文件，例如 RMISSLClientSocketFactory、远程接口和实现、密钥库文件等

这是正确的方法吗？

而且，我需要做什么来启用 Server all 和 Client 应用程序可以调用/访问 Common 包中的类？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:16:27.427

一般约定建议您的顶级包名称应与您的公司网址相反（即`com.stackoverflow`）。

现在不是每个人都有公司（或网址），在这些情况下，您希望选择能够（尽可能）唯一标识您的包的东西（包的目的是提供名称空间，因此您可以拥有更多具有相同名称的类，并且能够区分它们等）。

在可能的情况下，我可能会选择使用`mad.programmer`例如...

下一个级别应该确定应用程序或库（我个人使用 和 之类的东西`.core`作为`.core.ui`我的核心库，但您可以自己选择）

在这一点上，你基本上可以自由地按照你认为合适的方式进行分组。

现在，到手头的问题。

在您的情况下，我将创建三个项目。一个用于服务器代码，一个用于客户端代码，一个用于您的公共类（将在服务器和客户端之间共享）。

我会将公共项目链接到您的服务器和客户端项目（右键单击项目的`Libraries`节点（客户端和/或服务器）并选择`Add Project`）。

就个人而言，我会使用`.client`, `.server`,`.common`后缀来分隔代码，但唯一真正的要求是为您的公共库提供它自己的名称空间，与服务器和客户端分开。

只要您没有更改服务器和客户端通信所依赖的任何代码（可能在运行时在它们之间传递的对象），您就可以重建其中一个项目而不会影响另一个项目。

这就是我的看法。

# iis - 如何配置 IIS 以在 HTML5 模式下重写 AngularJS 应用程序的 URL？

> ID：12614072
> 
> 赞同：147
> 
> 时间：2012-09-27T04:24:43.057
> 
> 标签：iis, url-rewriting, angularjs

我有[AngularJS 种子项目](https://github.com/angular/angular-seed)，我已经添加了

```
$locationProvider.html5Mode(true).hashPrefix('!'); 
```

到 app.js 文件。我想将 IIS 7 配置为将所有请求路由到

```
http://localhost/app/index.html 
```

所以这对我有用。我该怎么做呢？

**更新：**

我刚刚发现、下载并安装了[IIS URL Rewrite 模块](http://www.iis.net/downloads/microsoft/url-rewrite)，希望这将使实现我的目标变得容易和明显。

**更新 2**：

我想这总结了我想要实现的目标（取自[AngularJS Developer 文档](http://docs.angularjs.org/guide/dev_guide.services.$location)）：

> 使用这种模式需要在服务器端重写 URL，基本上你必须重写所有指向应用程序入口点的链接（例如 index.html）

**更新 3：**

我仍在努力，我意识到我不需要重定向（有重写的规则）某些 URL，例如

```
http://localhost/app/lib/angular/angular.js
http://localhost/app/partials/partial1.html 
```

因此不会重定向 css、js、lib 或 partials 目录中的任何内容。其他所有内容都需要重定向到 app/index.html

任何人都知道如何轻松实现这一点而无需为每个文件添加规则？

**更新 4：**

我在 IIS URL 重写模块中定义了 2 个入站规则。第一条规则是：

![IIS URL 重写入站规则 1](../Images/5f88410698f5a96d6d71b76b2a9c7877.png)

第二条规则是：

![IIS URL 重写入站规则 2](../Images/809740dc84432ad5187ff8642ea237e2.png)

现在，当我导航到 localhost/app/view1 时，它会加载页面，但是支持文件（css、js、lib 和 partials 目录中的文件）也被重写到 app/index.html 页面 - 所以一切都来了无论使用什么 URL，都返回 index.html 页面。我想这意味着我的第一条规则，即应该防止这些 URL 被第二条规则处理，不起作用..有什么想法吗？...任何人？...我感觉很孤独... ：-（

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2014-10-01T22:57:40.467

`$locationProvider.html5Mode(true)`设置后，我在 web.config 中写出一条规则`app.js`。

希望，帮助某人。

```
 <system.webServer>
    <rewrite>
      <rules>
        <rule name="AngularJS Routes" stopProcessing="true">
          <match url=".*" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_URI}" pattern="^/(api)" negate="true" />
          </conditions>
          <action type="Rewrite" url="/" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

在我的 index.html 中，我将其添加到`<head>`

```
<base href="/"> 
```

不要忘记在服务器上安装[IIS URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)。

此外，如果您使用 Web API 和 IIS，如果您的 API`www.yourdomain.com/api`由于第三个输入（第三行条件）而位于，这将起作用。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-25T00:09:47.990

问题 DO 中显示的 IIS 入站规则有效。我必须清除浏览器缓存并在我`<head>`的 index.html 页面部分的顶部添加以下行：

```
<base href="/myApplication/app/" /> 
```

这是因为我在 localhost 中有多个应用程序，因此对其他部分的请求被带到`localhost/app/view1`而不是`localhost/myApplication/app/view1`

希望这可以帮助某人！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-25T20:13:33.940

只有这两个条件的问题：

```
 <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" /> 
```

是它们仅`{REQUEST_FILENAME}` [在磁盘上物理存在](http://sebnilsson.com/c985a7fd/iis-url-rewrite-rules-skipping-files-types/)时才起作用。这意味着在某些情况下，对错误命名的局部视图的请求将返回根页面而不是 404，这会导致 Angular 被加载两次（在某些情况下，它可能会导致令人讨厌的无限循环）。

因此，建议使用一些安全的“后备”规则来避免这些难以解决的问题：

```
 <add input="{REQUEST_FILENAME}" pattern="(.*?)\.html$" negate="true" />
  <add input="{REQUEST_FILENAME}" pattern="(.*?)\.js$" negate="true" />
  <add input="{REQUEST_FILENAME}" pattern="(.*?)\.css$" negate="true" /> 
```

或[匹配任何文件结尾](http://sebnilsson.com/c985a7fd/iis-url-rewrite-rules-skipping-files-types/)的条件：

```
<conditions>
  <!-- ... -->
  <add input="{REQUEST_FILENAME}" pattern=".*\.[\d\w]+$" negate="true" />
</conditions> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-23T21:51:45.270

就我而言，在设置正确的重写规则后，我一直得到 403.14。事实证明，我有一个与我的 URL 路由之一同名的目录。一旦我删除了 IsDirectory 重写规则，我的路由就可以正常工作。是否存在删除目录否定可能会导致问题的情况？我想不出我的情况。我能想到的唯一情况是您是否可以使用您的应用程序浏览目录。

```
<rule name="fixhtml5mode" stopProcessing="true">
  <match url=".*"/>
  <conditions logicalGrouping="MatchAll">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Rewrite" url="/" />
</rule> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-05T14:57:03.230

我遇到了 Angular 和 IIS 在手动刷新时抛出 404 状态代码的类似问题，并尝试了投票最多的解决方案，但这对我不起作用。还尝试了许多其他必须处理 WebDAV 和更改处理程序的解决方案，但都没有奏效。

幸运的是，我找到[了这个解决方案](https://github.com/angular/angular-cli/issues/11285#issuecomment-415722939)并且它有效（取出了我不需要的部分）。因此，如果上述方法都不适合您，甚至在尝试之前，请尝试一下，看看是否可以解决您在 iis 问题上的角度部署问题。

将代码段添加到站点根目录中的 webconfig 中。据我了解，它会从任何继承（applicationhost.config、machine.config）中删除 404 状态代码，然后在站点级别创建 404 状态代码并作为自定义 404 页面重定向回主页。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <httpErrors errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="/index.html" responseMode="ExecuteURL"/>
    </httpErrors>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-30T12:34:20.283

我发现最简单的方法就是将触发 404 的请求重定向到客户端。这是通过添加主题标签来完成的，即使`$locationProvider.html5Mode(true)`已设置。

这个技巧适用于在同一个网站上有更多 Web 应用程序并需要 URL 完整性约束（例如外部身份验证）的环境。这是一步一步的方法

### 索引.html

正确设置`<base>`元素

```
<base href="@(Request.ApplicationPath + "/")"> 
```

### 网络配置

首先将 404 重定向到自定义页面，例如“Home/Error”

```
<system.web>
    <customErrors mode="On">
        <error statusCode="404" redirect="~/Home/Error" />
    </customErrors>
</system.web> 
```

### 家庭控制器

`ActionResult`在客户端路由中实现一个简单的“翻译”输入。

```
public ActionResult Error(string aspxerrorpath) {
    return this.Redirect("~/#/" + aspxerrorpath);
} 
```

这是最简单的方法。

* * *

可以（建议？）通过一些改进的逻辑来增强错误功能，仅当 url 有效时将 404 重定向到客户端，并在客户端上找不到任何内容时让 404 正常触发。假设您有这些角度路线

```
.when("/", {
    templateUrl: "Base/Home",
    controller: "controllerHome"
})
.when("/New", {
    templateUrl: "Base/New",
    controller: "controllerNew"
})
.when("/Show/:title", {
    templateUrl: "Base/Show",
    controller: "controllerShow"
}) 
```

仅当 URL 以“/New”或“/Show/”开头时才将 URL 重定向到客户端才有意义

```
public ActionResult Error(string aspxerrorpath) {
    // get clientside route path
    string clientPath = aspxerrorpath.Substring(Request.ApplicationPath.Length);

    // create a set of valid clientside path
    string[] validPaths = { "/New", "/Show/" };

    // check if clientPath is valid and redirect properly
    foreach (string validPath in validPaths) {
        if (clientPath.StartsWith(validPath)) {
            return this.Redirect("~/#/" + clientPath);
        }
    }

    return new HttpNotFoundResult();
} 
```

这只是改进逻辑的一个例子，当然每个 Web 应用程序都有不同的需求

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-02-02T02:28:42.830

不幸的是，使用 .NET 框架 4.5 和 IIS 6.2 的最佳解决方案对我不起作用。我首先按照从 Microsoft安装[URL Rewrite 工具](https://www.iis.net/downloads/microsoft/url-rewrite)`Web.config`的所有步骤操作，然后调整我的文件以包含以下内容：

```
 <system.webServer>
    <!-- handlers etc -->
    <rewrite>
      <rules>
        <rule name="Angular Routes" stopProcessing="true">
          <match url="(^(?!.*\.[\d\w]+$).*)" />
          <conditions logicalGrouping="MatchAny">
            <add input="{REQUEST_URI}" pattern=".*\/api\/.*" negate="true" />
          </conditions>
          <action type="Rewrite" url="./index.html" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

第一个正则表达式使用负前瞻来不匹配 URI 末尾的任何文件扩展名。然后，在条件内部，任何包含在内的 URI`/api/`也将被忽略。

此配置允许我在不中断路由的情况下刷新 Angular 应用程序，并且还可以在不重写的情况下访问我的 API。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-16T20:47:35.747

我一直在尝试将一个简单的 Angular 7 应用程序部署到 Azure Web 应用程序。一切正常，直到您刷新页面为止。这样做会给我一个 500 错误 - 移动内容。我已经阅读了 Angular 文档和一些论坛，我需要将 web.config 文件添加到我部署的解决方案中，并确保重写规则回退到 index.html 文件。经过数小时的挫折和反复试验，我发现错误非常简单：在我的文件标记周围添加标签。

# c# - 在 C# 中的有限线程池上使用来自多个套接字的 IO 完成端口

> ID：12614075
> 
> 赞同：2
> 
> 时间：2012-09-27T04:25:23.963
> 
> 标签：c#, multithreading, sockets, udp, io-completion-ports

我正在尝试侦听来自各种传入端口（~20）的 UDP 数据包。我想用大约 3-5 个线程来接收和处理这些数据包。这似乎是 Windows 中 IO 完成端口的理想情况。我不明白的是如何对多个套接字进行多到少的映射以检查一组较小的线程。

以下代码创建我的所有套接字并开始异步接收操作。

```
for(int ix = 0; ix < 20; ix++)
{
    var socket = new Socket(AddressFamily.InterNetwork,
                            SocketType.Dgram, ProtocolType.Udp);
    socket.Bind(new IPEndPoint(IPAddress.Any, ix+6000));
    var e = new SocketAsyncEventArgs();
    e.Completed+=OnReceive;
    e.SetBuffer(buffer, ix*1024*1024, 1024*1024);
    socket.ReceiveFromAsync(e);
    _sockets.Add(socket);
} 
```

我知道收到数据包时将调用每个 OnReceive 消息...

```
static void OnReceive(object sender, SocketAsyncEventArgs e)
{
    Console.WriteLine("Received {0} bytes", e.BytesTransfered);
    if(!((Socket)sender).ReceiveFromAsync(e))
        e_Completed(sender, e);
} 
```

1.  如何限制运行 OnReceive 事件的线程数？
2.  在 OnReceive 方法递归调用自身太多次的极少数情况下，防止堆栈溢出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:29:45.797

不确定我是否理解您对接收和处理线程的含义。接收发生在后台。

无论如何，我会使用 BlockingCollection。

OnReceive 可能看起来像这样

```
private static BlockingCollection<byte[]> _received = new ...

static void OnReceive(object sender, SocketAsyncEventArgs e) {
    byte[] data = new byte[e.BytesTransfered];
    Array.Copy(e.buffer, e.Offset, data, 0, e.BytesTransfered);
    _received.Add(data)
    ...
} 
```

然后，您只需使用 TPL/PLinq 来处理请求线程数上接收到的数据。

```
var parallelOptions = new ParalellOptions { MaxDegreeOfParallelism = 3 };
Parallel.ForEach(_received.GetConsumingPartitioner(),
                parallelOptions, 
                data => {
                    // do processing
                    ...
                }); 
```

# properties - 通过 Titanium 中的 getProperties 获取价值

> ID：12614076
> 
> 赞同：-1
> 
> 时间：2012-09-27T04:25:45.270
> 
> 标签：properties, titanium, titanium-mobile

我有两个窗口：

window1：有一个 option_dialog 宽度 3 选项：'Video'、'Image'、'Document'

```
 var optionsDialogOpts = {
 options:['Video','Image','Document'],
 title:'Type'
 };

var dialog_search_click = Titanium.UI.createOptionDialog(optionsDialogOpts);
dialog_search_click.addEventListener('click',function(e){
//spinner_search_click.setTitle(e.index);
if(e.index==0)
{
//save option select All
Ti.App.Properties.setString('option_dialog','0');
}
if(e.index==1)
{
 Ti.App.Properties.setString('option_dialog','1');
}
if(e.index==2)
{
Ti.App.Properties.setString('option_dialog','2');
} 
```

})

window2 : 显示在 window1.. 中选择的选项

```
var option=Ti.App.Properties.getString('option_dialog');
Ti.API.info(option); 
```

第一次，window2中显示的选项是真的，但是当点击返回window1并在option_dialog中选择其他选项并转到window 2时，它也只显示第一次的选项，没有改变。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:25:14.360

这段代码是正确的，但是我认为这是一个错误。您的 window1 和 window2 都在一个 .JS 文件中编码。所以这个问题正在发生。

```
var option=Ti.App.Properties.getString('option_dialog'); 
```

该行不总是更新，它只存储一次信息。

你试试这种类型，

在第二个窗口上添加一个新按钮并检查 Click Event 是否正常工作。

```
button.addeventListener('click',function(){
   var option=Ti.App.Properties.getString('option_dialog');
   alert("Option :- " + option);

}); 
```

如果，那么这是有效的。我想你能明白，我想说什么。干杯.....！

# javascript - 如何使用数据属性和 jQuery 使链接可点击或不可点击？

> ID：12614077
> 
> 赞同：0
> 
> 时间：2012-09-27T04:25:49.423
> 
> 标签：javascript, jquery

我的页面上有两个按钮：

```
 <a class="button accessLink"
        id="loginLink"
        data-disabled="false"
        data-href="/MyAccount/Access/Login"
        title="Login">Login</a>

     <a class="button accessLink"
        id="registerLink"
        data-disabled="false"
        data-href="/MyAccount/Access/Register"
        title="Register">Register</a> 
```

我如何使用 jQuery 来制作它，以便如果单击其中一个按钮并且如果 data-disabled 设置为 false 那么它：

*   将两者的数据禁用设置为“真”
*   像这样调用一个名为 dialog 的函数：dialog(this)。

我也不希望点击事件起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:28:26.130

```
$('a[data-disabled]').click(function(e) {
  if (!$(this).data('disabled')) {
    e.preventDefault();
    $(this).attr('data-disabled', 'true');
    dialog(this);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:30:03.133

这应该有效：

```
$("a.accessLink").click(function(e){
    e.preventDefault();    
    if($(this).data("disabled") == false) {
        $("a.accessLink").data("disabled", true);
        dialog(this);
    }
});​​ 
```

# perl - 如何在读取 Excel 文件时将当前目录作为路径名？

> ID：12614097
> 
> 赞同：0
> 
> 时间：2012-09-27T04:27:37.380
> 
> 标签：perl, excel

我正在尝试更新已经存在的 Excel 文件“Test.xls” 现在，我不想给出 Test.xls 文件的完整路径，而是想知道如何从当前目录读取 Test.xls 文件。我在 Windows 环境中使用 Eclipse。下面是我的代码：

```
my $Excel = Win32::OLE->GetActiveObject('Excel.Application')
|| Win32::OLE->new('Excel.Application', 'Quit');  

my $Book = $Excel->Workbooks->Open("Test.xls"); #This line throws an error but works if I give complete path name as D:/eclipse/workspace/testing/Test.xls

my $Sheet = $Book->Worksheets(1);

foreach my $data (@ifrules)
{
 $Sheet->Cells($row,$col)->{'Value'} =$data;
 $row++;
}

$Book->Close; 
```

我也尝试过各种选项，如*./Test.xls、.\Test.xls*等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:33:22.130

根据我的发现，您可以使用它`getcwd()`来获取当前的工作目录。然后，您可以将其与其中的文件名连接起来，`$Excel->Workbooks->Open()`以给出当前目录加上文件名。

[来源链接](http://perldoc.perl.org/Cwd.html)

*说明：*这里的基本问题是您将文件名传递给 Excel，它不知道 Perl 的当前工作目录。这就是为什么您必须找出完整路径名并将其提供给`$Excel->Workbooks->Open()`.

# android - 将相机图像保存到文件的代码有什么问题吗？

> ID：12614100
> 
> 赞同：2
> 
> 时间：2012-09-27T04:28:11.603
> 
> 标签：android, camera

我认为将相机图像捕获到文件很简单，因为有很多示例。但是在绑定了很多之后，我仍然无法正常工作。

我的代码是：

```
public class MyActivity extends Activity {

    private Button btn;
    private ImageView imageView;

    private static final File photoPath = new File(Environment.getExternalStorageState(), "camera.jpg");

    private static final int CAMERA = 1;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findViews();
        setListeners();
    }

    private void setListeners() {
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photoPath));
                startActivityForResult(intent, CAMERA);
            }
        });
    }

    private void findViews() {
        btn = (Button) findViewById(R.id.btn);
        imageView = (ImageView) findViewById(R.id.imageView);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == CAMERA) {
            if (resultCode == RESULT_OK) {
                try {
                    Bitmap bitmap = getCameraBitmap(data);
                    if (bitmap == null) {
                        Toast.makeText(MyActivity.this, "Can't get bitmap from camera", Toast.LENGTH_LONG).show();
                    } else {
                        imageView.setImageBitmap(bitmap);
                    }
                } catch (IOException e) {
                    Toast.makeText(MyActivity.this, e.toString(), Toast.LENGTH_LONG).show();
                }
            }
        }
    }

    public Bitmap getCameraBitmap(Intent data) throws IOException {
        if (data == null) {
            // try solution 1
            try {
                return MediaStore.Images.Media.getBitmap(getContentResolver(), Uri.fromFile(photoPath));
            } catch (FileNotFoundException e) {
                return BitmapFactory.decodeFile(photoPath.getAbsolutePath());
            }
        } else {
            Uri image = data.getData();
            if (image != null) {
                // try solution 3
                InputStream inputStream = getContentResolver().openInputStream(image);
                return BitmapFactory.decodeStream(inputStream);
            } else {
                // try solution 4
                return (Bitmap) data.getExtras().get("data");
            }
        }
    }
} 
```

但它仍然显示“无法从相机获取位图”。我不知道哪里错了。

我还创建了一个工作演示：[https](https://github.com/freewind/AndroidCameraTest) ://github.com/freewind/AndroidCameraTest ，你可以在那里看到完整的代码，你可以克隆它并在你自己的安卓设备上尝试:)

* * *

**更新**

这段代码在 android 模拟器上运行良好，但在我的 android pad 上却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:04:57.093

我也看到过这个问题；我删除`intent.putExtra(MediaStore.EXTRA_OUTPUT,...)`了，它使用以下方法工作：

```
stream = getContentResolver().openInputStream(data.getData());
image = BitmapFactory.decodeStream(stream); 
```

# image - 使用 html5 在记事本中的网页上插入图像

> ID：12614102
> 
> 赞同：-1
> 
> 时间：2012-09-27T04:28:33.747
> 
> 标签：image, html

我正在记事本中建立一个网页。我是第一次使用 html5。我相信我做了正确的编码来插入这些图像，但它们没有出现在页面上。这是代码：我可以使用一些帮助，拜托。谢谢你。

```
 <html>
 <head>
 <title>My practice website</title>
 <meta charset="utf-8">
 <html lang="en">
 <meta name="keywords" content="html, css, javascript, history, poems, poetry"/>

 <meta name="description" content="This site is about my personal life, poems, poetry, images of family, myself"/>
 <meta name="author" content="schweidel tyson">

 <meta http-equiv="refresh" content="30" />
 <link rel="stylesheet" type="text/css" href="mainstyesheet.css"/>

 <body style="background-color: #ccffff;">
 </head>

 <body/>
 <h1>Welcome to my website</h1>

 <img src="http://www.html.net/logo.png"/>

 <p>This is basically a personal website build to showcase my fledging talent in webdesign to put up pictures of my family and friends. I also like poetry, so there will be some poems.</p><b/>

 <a href="http://www.html.net/">This is a link to a good html tutorial</a><br/><br/>

 <a href="http://html5doctor.com/">This is another great tutorial link</a><br/><br/>

 <a href="http://www.w3schools.com/">A tutorial for styles link</a>

 <img src=My practice website/My Website/images/high yellow.jpg" width="192 height="256"/><alt="African Amereican light-skined woman"><br/><br/>

 <img src="http://www.zimbio.com/My website/images/trendy.jpg" width="352" width="400"/><alt="African American Woman">

 <img src="My practice website/My website/my new pic.jpg" width="104" height="104"/>  <alt="me at the domiciliary">

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:31:02.370

您的 HTML 有点偏离：

```
<img src="..." width="104" height="104"/>  <alt="me at the domiciliary"> 
```

`alt`只是图像的替代文本。它是一个属性，就像`width`,`src`和`height`：

```
<img src="..." width="104" height="104" alt="me at the domiciliary" /> 
```

此外，请确保您的网址正确。

* * *

此外，如果没有 DOCTYPE，您的标记是无效的。包括一个 DOCTYPE（这里是一个 HTML5 的）：

```
<!DOCTYPE html>

<html>
  ... 
```

# jquery - Jquery Validation Remote JSON 不适用于 Jquery Mobile

> ID：12614104
> 
> 赞同：0
> 
> 时间：2012-09-27T04:28:51.033
> 
> 标签：jquery, json, jquery-mobile, jquery-validate

我已经搜索了这个网站和其他人试图找到我的问题的答案。我正在使用 jQuery Mobile 1.1.1、jQuery 1.7.2、jQuery Validation 1.9。和一个返回布尔值的 JSON 服务。

下面的远程调用在任何计算机浏览器中都很好用，但在移动浏览器中不起作用。

```
remote: {
    url:'https://myjsonservice/check.json',
    type:"POST",
    dataType:'jsonp',
    dataFilter:function(data) {
        if( data == "true" ) {return success;}
    }
}, 
```

关于如何使用移动浏览器进行此操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:08:28.810

遇到了这个，从来没有回答过。

您应该尝试使用常规 JSON。如果您的 Web 服务在另一个域上，只需创建一个同域代理。

如果您不想这样做，请尝试： [JSONP calls not working with apple-mobile-web-app-capable="yes"](https://stackoverflow.com/questions/7747264/jsonp-calls-not-working-with-apple-mobile-web-app-capable-yes)

# css - Google chrome 中的 Twitter Bootstrap 导航栏布局中断

> ID：12614105
> 
> 赞同：1
> 
> 时间：2012-09-27T04:28:54.357
> 
> 标签：css, javascript

谷歌浏览器中的 Twitter 引导导航栏问题。谷歌浏览器中的布局中断。我在 jsbin.com 中对其进行了测试。这是一个链接。[http://jsbin.com/urejiw/1/edit](http://jsbin.com/urejiw/1/edit)。任何人都知道为什么会发生这种情况以及如何防止它？谢谢。（已编辑-顺便说一下，我将项目转移到笔记本电脑并在 Google chrome 中进行测试，布局似乎运行良好。所以我认为我的计算机 Google Chrome 上发生了一些奇怪的事情......这是我的快照项目崩溃时...![在此处输入图像描述](../Images/8ba18dbadcb75cfe940ff735544bf307.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:58:13.313

需要更多信息，在 Chrome 中测试，它看起来与 Firefox 相同。

# c# - 层次导航返回按钮

> ID：12614106
> 
> 赞同：0
> 
> 时间：2012-09-27T04:28:54.177
> 
> 标签：c#, asp.net, navigation, hierarchy, back

我需要为我的 asp 应用程序实现一个后退按钮。

在我的网络应用程序中，我得到了 3 个模块

1.  任务1.aspx ->任务1-1.aspx ->任务1-2.aspx
2.  task2.aspx->task2-1.aspx->task3-1.aspx
3.  task3.aspx->task3-1.aspx->task2.1aspx

在上面的 example.3 模块中还可以导航到其他页面。所以现在我遇到了问题，是否可以根据我来自的上一页实现后退按钮。例如，我点击

task3.aspx -> task3-1.aspx -> task2.1aspx

然后当我点击后退按钮时，将是

任务2.1aspx->任务3-1.aspx->任务3.aspx。

另一方面，当我单击 task2.aspx -> task2-1.aspx 时。

后退按钮会将我导航到 task2-1.aspx ->task2.apx

可以在服务器端完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:46:05.693

我这样做的方式与[dbaseman 解释](https://stackoverflow.com/a/12614173/107625)的方式有些相似。

基本上，我将一个`BackUrl`查询字符串参数附加到我将客户端重定向到每个 URL 以及用户可能单击的每个链接。该`BackUrl`参数包含当前页面的*完整*URL（包括所有参数）。

因此，在用户单击每个后续重定向或链接时，您最终会得到一个越来越长的字符串。有时，URL 太长了。

我的解决方案是不存储返回`BackUrl`查询字符串参数的实际 URL，而只是存储一个哈希码。在服务器端，我有一个字符串字典（在用户会话中）来记住哈希码和实际的 URL。

在我的网站上单击任何“后退”按钮时，我会在该字典中进行查找，然后重定向到在字典中找到的给定哈希的匹配 URL。

这种方法的缺点可能是字典可能会随着时间的推移而增长并且永远不会缩小。不过，在我所有的现实世界项目中，这从来都不是问题。另外，如果会话被丢弃，它会被释放。

**所以一个例子是：**

*   在`task1.aspx`中，不要将用户重定向到`task1-1.aspx`，而是重定向到`task1-1.aspx?BackUrl=24378`。
*   存储服务器端字典条目，映射`24378`到`task1-1.aspx`.
*   在`task1-1.aspx?BackUrl=24378`中，不要将用户重定向到`task1-2.aspx`，而是重定向到`task1-2.aspx?BackUrl=93748`。
*   存储服务器端字典条目，映射`93748`到`task1-1.aspx?BackUrl=24378`.
*   等等

然后你可以在你的页面上有一个后退按钮。

*   如果用户单击该后退按钮，它会调用您的`void BackButton_Click`函数。
*   在该函数中，用于`Request["BackUrl"]`获取哈希码（例如`24378`）。
*   使用哈希码查看字典并获取实际 URL。
*   `Response.Redirect`到那个网址。

基本上就是这个想法。

**伪代码：**

一些伪代码使其更清晰。

对于字典，我会在`Page`派生的基类中给我写一个辅助属性，例如

```
protected Dictionary<string, string> BackUrls
{
    get
    {
        var dic = Session["backdic"] as Dictionary<string, string>;
        if ( dic == null )
        {
            dic = new Dictionary<string, string>();
        }
        return dic;
    }
} 
```

然后，您可以通过写入或读取字典来访问字典。

例如写字典：

```
private void goForwardToNextTask()
{
    var hash = Math.Abs(Guid.NewGuid().GetHashCode());

    // Store current page's full URL.
    BackUrls[hash] = Request.RawUrl;

    Response.Redirect( "task1-2.aspx?BackUrl=" + hash );
} 
```

并从字典中阅读：

```
private void goBackward()
{
    var hash = Request["BackUrl"];

    // Backward translation.
    Response.Redirect( BackUrls[hash] );
} 
```

（所有示例都省略了错误和完整性检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:37:28.650

我会为此使用[Stack](http://msdn.microsoft.com/en-us/library/system.collections.stack%28v=vs.110%29.aspx)，并将其保存在[Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session.aspx)中。在每次页面加载时，将当前 URL 推送到堆栈。

```
void Page_Init()
{
    Stack<string> history = Session["history"]; 
    if (history == null) history = new Stack<string>();
    history.Push(Request.Url.AbsoluteUri);
    Session["history"] = history;
} 
```

然后当然是在点击处理程序中：

```
void Back_Click()
{
    Stack<string> history = Session["history"]; 
    if (history != null) 
    {
        string url = history.Pop();
        Session["history"] = history;
        Response.Redirect(url);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:34:14.030

你可以这样做：

```
static string prevPage = String.Empty;

protected void Page_Load(object sender, EventArgs e)
{
     if( !IsPostBack )
     {
         prevPage = Request.UrlReferrer.ToString();
     }

 }

 protected void Button1_Click(object sender, EventArgs e)
 {
      Response.Redirect(prevPage);
 } 
```

对于多源跨页发帖，建议使用

```
<%@ PreviousPageType TypeName 
```

代替

```
<%@ PreviousPageType VirtualPath 
```

# php - MySQL PHP中的排序距离

> ID：12614110
> 
> 赞同：-1
> 
> 时间：2012-09-27T04:29:40.713
> 
> 标签：php, mysql, distance, latitude-longitude, sorted

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我的代码：

```
<?php 
$Sql="SELECT *, (3959 * acos(cos(radians(37)) * cos(radians(44)) * cos(radians(55) -    radians(-122)) + sin(radians(37)) * sin(radians(44))) as distance FROM TableName       HAVING distance < 25 ORDER BY distance LIMIT 0 , 20";
$result=mysql_query($Sql); 

while ($row = mysql_fetch_array($result)){
   echo $row['Id'];
} 
```

错误： **警告：mysql_fetch_array() 期望参数 1 是资源，在 /home 中给出布尔值...**

您好，我在数据库中存储了经度和纬度，我想根据用户当前的经度和纬度以及存储在数据库中的商店经度和纬度来计算 KM - 距离。我还想要一个基于距离的排序结果。我用谷歌搜索并找到了一些解决方案，但出现了奇怪的错误。请检查我的代码。我没有在查询中使用变量。我只是想测试它是否运行。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:33:26.340

我发现新的应该是这样的

```
(3959 * acos(cos(radians(37)) * cos(radians(44)) * cos(radians(55) -    radians(-122)) + sin(radians(37)) * sin(radians(44)))) 
```

您缺少“）”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:42:24.560

SQL 语句中的 no of`opening parentheses`不等于 no of `closing parentheses`。

试试这个...

```
SELECT *, (
        3959 * acos(
                 cos(radians(37)) * cos(radians(44)) * 
                 cos(radians(55) -  radians(-122)) + 
                 sin(radians(37)) * sin(radians(44))
                )
       )
    as distance FROM TableName HAVING distance < 25 ORDER BY distance LIMIT 0 , 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:43:18.243

如果您在数据库中存储点，您可以考虑使用： [http](http://dev.mysql.com/doc/refman/5.1/en/spatial-extensions.html) : //dev.mysql.com/doc/refman/5.1/en/spatial-extensions.html 如果您的 MySQL 版本是 5.0.16 或更高版本。

这里有一个例子：http: [//howto-use-mysql-spatial-ext.blogspot.com/](http://howto-use-mysql-spatial-ext.blogspot.com/)

# android - 如何将字体序列化为字符串

> ID：12614112
> 
> 赞同：3
> 
> 时间：2012-09-27T04:30:01.527
> 
> 标签：android, typeface

在 Android 中，我无法从 Typeface 对象中获取字体名称或其他信息，如何将其序列化为字符串

# iphone - 上传不支持 iphone 5 的应用程序

> ID：12614114
> 
> 赞同：2
> 
> 时间：2012-09-27T04:30:02.833
> 
> 标签：iphone, ios

我已经向 iTunes connect 提交了一个二进制文件，现在应用程序的状态是“缺少屏幕截图”。当我滚动它时，它告诉我我缺少英文的本地化屏幕截图。

之前，我为 iPhone 和 iPod touch 上传了 4 张截图。有一次它给了我一个错误，我需要上传第 5 代屏幕截图，因为我的应用程序支持这些。

问题是我的应用程序不**支持**iphone 5 屏幕尺寸。

如何让 iTunes 连接将我的应用程序视为仅第 4 代应用程序？

# android - 整个应用程序的 onTouchEvent，没有活动

> ID：12614118
> 
> 赞同：1
> 
> 时间：2012-09-27T04:30:20.033
> 
> 标签：android, touch

我正在开发一个跟踪整个应用程序的触摸事件的 android 应用程序。为此，我想在`onTouchEvent()`没有活动的情况下覆盖；即，在一个简单的Java 类中，我不知道它是否可能。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:37:37.923

不，您不能任意覆盖`onTouchEvent`，尤其是在“简单的 Java 类”中，即不扩展 a 的类中`View`。

## 解决方案 1

如果您想捕获对应用程序的所有触摸，请[`onInterceptTouchEvent()`](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)在主布局中覆盖。因此，如果您的主要布局是 a `LinearLayout`，请执行以下操作：

```
public class MyTouchLayout extends LinearLayout {
    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Do whatever with your touch event
        return false; // Do not prevent the rest of the layout from being touched
    }
} 
```

然后，在您的 XML 中，您将使用：

```
<com.example.MyTouchLayout
    ...
    >

    <!-- The rest of your layout -->

</com.example.MyTouchLayout> 
```

## 解决方案 2

这是迄今为止更简单的解决方案，尽管我过去有不同的运气，并且*永远不会*建议你回复它。

You can simply get the `View` that contains all your content (the root `View`, a `LinearLayout` above), then give it a listener.

```
View v = findViewById(android.R.id.content); // Find the root View; you may have to give it your own ID in the XML, and use that
v.setOnTouchListener(new OnTouchListener {
    // ...
} 
```

# android - Android 在每次 onRestart 时检查 Wifi

> ID：12614121
> 
> 赞同：4
> 
> 时间：2012-09-27T04:30:53.700
> 
> 标签：android, application-restart

我希望我的应用程序检查设备是否正在连接到特定的 Wifi，并在应用程序导航到时自动连接到 Wifi。我知道我可以在 onRestart() 中做到这一点。但它只处理一个活动的状态。

我的问题是是否有任何方法来处理应用程序的状态，而不是在每个活动上添加 onRestart() 来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:49:21.867

试试下面的代码：

```
 import android.app.PendingIntent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
   import android.content.Intent;
    import android.net.ConnectivityManager;

     public class AutostartService extends BroadcastReceiver {  

     @Override  
     public void onReceive(Context context, Intent intent) {
 System.out.println("in broad....");
 ConnectivityManager manager = (ConnectivityManager)context.getSystemService(context.CONNECTIVITY_SERVICE);
   boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();
   boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

   if(!is3g && !isWifi){

   }else{
 if ((intent.getAction() != null) && (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")))
    {
        System.out.println("in broadcast receiver.....");
        Intent i = new Intent(context, Splash.class);  
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
        context.startActivity(i);  
    }
   }
        }

       } 
```

不要忘记在清单文件中添加它：

```
 <receiver android:name=".AutostartService" android:enabled="true" android:exported="true">
      - <intent-filter>
          <action android:name="android.intent.action.BOOT_COMPLETED" /> 
          <category android:name="android.intent.category.DEFAULT" /> 
             </intent-filter>
              </receiver> 
```

以及清单文件中的以下权限：

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
     <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
      <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
      <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

# android - 自动更新位置而无需重新启动应用程序

> ID：12614122
> 
> 赞同：1
> 
> 时间：2012-09-27T04:30:57.093
> 
> 标签：android, gps, location

我正在构建一个简单的 android 应用程序，它需要我自动更新位置。自动更新位置不仅会在恢复应用程序时更新，而且必须在应用程序打开时自动更新。这个应用程序看起来与放在车内的 GPS 系统相同。它获取确切位置并始终更新当前位置。我想在这里做同样的事情。我正在 android 2.2 上构建这个应用程序。

这是我的代码：

```
 package com.example.map;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.widget.TextView;
import android.widget.Toast;

public class MapActivity extends Activity implements LocationListener{
    private TextView latituteField, longitudeField, accuracyField, altitudeField, bearingField; 
    private LocationManager locationManager;
    private String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);

    latituteField = (TextView) findViewById(R.id.TextView02);
    longitudeField = (TextView) findViewById(R.id.TextView04);
    accuracyField = (TextView) findViewById(R.id.textView1);
    altitudeField = (TextView) findViewById(R.id.textView2);
    bearingField = (TextView) findViewById(R.id.textView4);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use default  
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } else {
      latituteField.setText("Location not available");
      longitudeField.setText("Location not available");
    }
  }

  /* Request updates at startup */
  @Override
  protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
  }

  /* Remove the locationlistener updates when Activity is paused */
  @Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
  }

  @Override
  public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude());
    int lng = (int) (location.getLongitude());
    int acc = (int) (location.getAccuracy());
    int alt = (int) (location.getAltitude());
    int bearing = (int) (location.getBearing());
    latituteField.setText(String.valueOf(lat));
    longitudeField.setText(String.valueOf(lng));
    accuracyField.setText(String.valueOf(acc));
    altitudeField.setText(String.valueOf(alt));
    bearingField.setText(String.valueOf(bearing));

  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

  }

  @Override
  public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,
        Toast.LENGTH_SHORT).show();

  }

  @Override
  public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,
        Toast.LENGTH_SHORT).show();
  } 
```

此代码仅在我恢复应用程序时更新位置值（我退出应用程序然后返回应用程序）。该位置将在视图文本中更新。

我也试着做一会儿。像这样。

```
if(location != null){
    do{
        System.out.println("Provider " + provider + " has been selected.");
        onLocationChanged(location);
        locationManager.requestLocationUpdates(provider, 0, 0, this);
    }while(location != null);
    }
    else{
        latituteField.setText("Location not available");
        longitudeField.setText("Location not available");
    } 
```

我将此添加到清单中。

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.INTERNET" /> 
```

但是，此代码会使应用程序在真实手机中崩溃。有没有办法完成这项工作？

*注意：我在我的真实手机中测试了所有这个应用程序并试图达到当前位置。文本视图假设只要它获得位置的新值而不暂停或退出应用程序就会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:22:00.690

您必须将您的位置代码放在 ScheduledExecutor 服务中：

[http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

那个在后台重复实现功能，例如每 30 秒或您指定的任何时间。

例子：

```
 scheduleTaskExecutor= Executors.newScheduledThreadPool(5);

    // This schedule a task to run every 10 seconds:

    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
      public void run() {

            try {                 

                //add your code you would like to be executed every 10 seconds.

            } catch (IOException e) {                          
               e.printStackTrace();                           
            }                                     

      }
    }, 0, 10, TimeUnit.SECONDS); 
```

您可能还需要为粗略位置添加权限。

# javascript - 拖放html5测验结果不增加

> ID：12614124
> 
> 赞同：0
> 
> 时间：2012-09-27T04:31:05.807
> 
> 标签：javascript, jquery, html

我正在尝试通过拖放开发一个测验片段，并最终得到此代码，其中始终显示结果为 1 结果不递增.....

我尝试了很多方法，但它没有增加......

javascript:

这是我在

```
 <script>
    function allowDropi(ev)
    {
        ev.preventDefault();
    }

    function dragi(ev)
    {
        ev.dataTransfer.setData("Text",ev.target.id);
    }

    function dropi(ev)
    {
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));

        result1=0;

        if(ev.dataTransfer.getData("Text")==="drag2i")
        {
            result1++;

        }

        if(ev.dataTransfer.getData("Text")==="dra2i")
        {
            result1++;
        }

        if(ev.dataTransfer.getData("Text")==="dr2i")
        {
            result1++;
        }

        if(ev.dataTransfer.getData("Text")==="2i")
        {
            result1++;
        }

        if(ev.dataTransfer.getData("Text")==="d2i")
        {
            result1++;
        }

         document.getElementById('boldStuff6').innerHTML = result1;
    }

    alert(result1);

    </script> 
```

我哪里错了请检查我的代码并帮助我得到结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:49:14.353

原因是每次调用此函数时，“result1=0”都会将结果**设置为 0**，然后再将其递增。

如果要保留结果的计数，则需要将结果作为函数的属性。

而不是**“result1 = 0”**添加：

```
this.result1 = ( this.result1  ) ? this.result1 : 0; // this will make sure it keeps old stored values from last time you call the function. 
```

并将您的增量器更改为以下内容：

```
this.result1++; // or you can use ++this.result1; or even this.result1+=1; 
```

我希望这能回答你的问题。

谢谢，米特

# html - 我如何使用html5读取jsp中的属性文件

> ID：12614126
> 
> 赞同：0
> 
> 时间：2012-09-27T04:31:19.580
> 
> 标签：html, jsp, properties

谁能给出从jsp页面读取.properties文件的解决方案（使用HTML5或其他标签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:52:18.170

JSP 是具有不同语法的 servlet。它在服务器端执行。HTML5 是一种在客户端由浏览器解释的标记语言。它与读取属性文件无关。

由于 JSP 是 servlet，它们可以包含任何类型的 Java 代码。因此，您在 JSP 中读取属性文件的方式与在任何 Java 应用程序中读取属性文件的方式相同（使用`java.util.Properties`类）。

然而，在设计良好的应用程序中，JSP 仅用作视图，从用 Java 编写的控制器准备的数据生成标记。读取属性文件是控制器的工作。不是 JSP 的工作。

我认为您应该阅读教程并了解 servlet、JSP、HTML 页面和 MVC 是什么，因为您似乎很困惑。

# python - 识别应用程序中的“敏感”代码

> ID：12614131
> 
> 赞同：21
> 
> 时间：2012-09-27T04:32:04.793
> 
> 标签：python, code-analysis

希望提高一个相当大的 Python 项目的质量。我对 PyLint 给我的警告类型很满意。但是，它们数量众多，难以在大型组织中实施。此外，我相信某些代码对于下一个 bug 可能出现的位置比其他代码更关键/敏感。例如，我想花更多的时间来验证一个被 100 个模块使用的库方法，而不是 2 年前最后一次接触并且可能不会在生产中使用的脚本。了解经常更新的模块也会很有趣。

是否有人熟悉 Python 工具或其他有助于此类分析的工具？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T09:39:33.767

您的问题类似于我在 SQA [https://sqa.stackexchange.com/a/3082](https://sqa.stackexchange.com/a/3082)上回答的问题。这个问题与 Java 有关，这使得工具更容易一些，但我在下面有一些建议。

许多其他答案表明没有好的 Python 运行时工具。我在几个方面不同意这一点：

1.  覆盖工具工作得很好
2.  根据我在 Java 中使用工具的经验，Python 中的静态和动态分析工具比强类型较少动态语言中的弱，**但**在此处为您提供良好的启发式方法已经足够好。除非你使用异常大量的动态特性（包括添加和删除方法、拦截方法和属性调用、玩导入、手动修改命名空间）——在这种情况下，你遇到的任何问题都可能与这种动态相关。 .
3.  Pylint 选择更简单的问题，并且不会检测动态类/实例修改和装饰器的问题 - 所以度量工具不测量这些并不重要
4.  在任何情况下，您可以有效地集中注意力的地方不仅仅是依赖图。

## 选择代码的启发式

我发现在选择代码进行改进时有许多不同的考虑因素，它们既可以单独使用，也可以一起使用。请记住，首先，您需要做的就是找到一个富有成效的工作接缝——您不需要在开始之前找到绝对最差的代码。

用你的判断。

在通过代码库几个周期后，您将拥有大量信息，并且可以更好地继续您的工作——如果确实需要做更多工作的话。

也就是说，这是我的建议：

**对业务的高价值**：例如任何可能使您的公司花费很多钱的代码。其中许多可能是显而易见的或广为人知的（因为它们很重要），或者可以通过在启用了运行时分析器的系统上运行重要用例来检测它们。我使用[覆盖率](http://nedbatchelder.com/code/coverage/)。

**静态代码指标**：有很多指标，但我们关心的是：

*   **高[传入耦合](http://en.wikipedia.org/wiki/Software_package_metrics)**。这是许多其他文件所依赖的代码。虽然我没有直接输出这个的工具，但[snakefood](http://furius.ca/snakefood/)是一种将依赖项直接转储到文件的好方法，每个依赖项一行，每个都是传入和传出文件的元组。我不想这么说，但是从这个文件计算传入耦合值是留给读者的一个简单练习。
*   **高 McCabe（圈）复杂度**：这是更复杂的代码。尽管我没有使用该工具，但[PyMetrics似乎产生了这种测量方法。](http://sourceforge.net/projects/pymetrics/)
*   **大小**：您可以通过使用可视化器查看项目的大小来获得惊人数量的信息（例如[https://superuser.com/questions/8248/how-can-i-visualize-the-file-system-usage- on-windows](https://superuser.com/questions/8248/how-can-i-visualize-the-file-system-usage-on-windows)或[https://superuser.com/questions/86194/good-program-to-visualize-file-system-usage-on-mac?lq=1](https://superuser.com/questions/86194/good-program-to-visualize-file-system-usage-on-mac?lq=1)。Linux 在 Filelight 上有 KDirStat）。大文件是一个很好的起点，因为修复一个文件可以修复许多警告。

请注意，这些工具是基于文件的。这可能是足够好的分辨率，因为您提到该项目本身有数百个模块（文件）。

**频繁更改**：频繁更改的代码是高度可疑的。该代码可能：

*   历史上存在许多缺陷，经验上可能会继续这样做
*   正在经历功能开发的变化（VCS 中的大量修订）

使用 VCS 可视化工具查找更改区域，例如本答案后面讨论的那些。

**未覆盖的代码**：测试未覆盖的代码。

如果您运行（或可以运行）您的单元测试、您的其他自动化测试和典型用户测试，请查看几乎没有覆盖的包和文件。没有覆盖有两个合乎逻辑的原因：

*   该代码是必需的（并且很重要），但根本没有经过测试（至少是自动测试的）。这些领域风险极高
*   该代码可能未使用并且是删除的候选者。

**询问其他开发人员**

您可能会对通过与服务时间较长的开发人员喝咖啡来收集的“气味”指标感到惊讶。我敢打赌，如果有人清理代码库中只有最勇敢的灵魂才会冒险的肮脏区域，他们会非常高兴。

## 可见性 - 检测随时间的变化

我假设您的环境有一个 DVCS（例如 Git 或 Mercurial）或至少一个 VCS（例如 SVN）。我希望您也在使用某种问题或错误跟踪器。如果是这样，则有大量可用信息。如果开发人员能够可靠地签入评论和问题编号，那就更好了。但是您如何将其可视化并使用它呢？

虽然您可以在单个桌面上解决问题，但设置一个持续集成 (CI) 环境可能是一个好主意，也许使用像[Jenkins](http://jenkins-ci.org/)这样的工具。为了让答案简短，我将从现在开始假设詹金斯。Jenkins 附带了大量插件，这些插件对代码分析很有帮助。我用：

*   py.test 与 JUnit 测试报告 Jenkins 插件拾取的 JUnit 测试输出
*   [Cobertura 插件](https://wiki.jenkins-ci.org/display/JENKINS/Cobertura+Plugin)的[覆盖范围](http://nedbatchelder.com/code/coverage/)
*   [SLOCCount](http://www.dwheeler.com/sloccount/)和[SLOCCount 插件](https://wiki.jenkins-ci.org/display/JENKINS/SLOCCount+Plugin)
*   Pylint 和[Violations 插件](https://wiki.jenkins-ci.org/display/JENKINS/Violations)
*   显然有一个[用于 Python 的 McCabe (cyclometric) 复杂性的插件](http://jordilin.wordpress.com/2011/12/17/reporting-mccabe-code-complexity-for-python-projects-in-jenkins/)，尽管我没有使用它。它看起来确实很有趣。

这让我可以看到随时间发生的*变化*，我可以从那里深入了解。例如，假设 PyLint 违规在模块中开始增加 - 我有增加的证据，并且我知道发生这种情况的包或文件，因此我可以找出谁参与其中并与他们交谈。

如果您需要历史数据并且您刚刚安装了 Jenkins，请查看是否可以运行一些从项目开始时开始的手动构建，并及时进行一系列跳跃直到现在。您可以从 VCS 中选择里程碑发布标签（或日期）。

如上所述，另一个重要领域是检测代码库中更改的位置。我真的很喜欢[Atlassian Fisheye](http://www.atlassian.com/software/fisheye/overview/analyze-source)。除了非常擅长在任何时间点搜索提交消息（例如错误 ID）或文件内容外，它还允许我轻松查看指标：

*   按目录和子目录的行数
*   任何时间点或特定目录和/或文件中的提交者
*   提交模式，包括时间和源代码中的位置

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-30T16:45:34.777

恐怕你大部分时间都靠自己。

如果您有一套不错的测试，请查看代码覆盖率和死代码。

如果您有一个不错的配置文件设置，请使用它来了解更多使用的内容。

最后，您似乎对扇入/扇出分析更感兴趣，我不知道 Python 有什么好的工具，主要是因为静态分析对于动态语言非常不可靠，到目前为止我没有看不到任何统计分析工具。

我认为这些信息在 JIT 编译器中是可用的——无论（函数、参数类型）在缓存（编译）中，这些都是最常用的。您是否可以从例如 PyPy 中获取这些数据，我真的不知道。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T08:33:02.353

源代码控制工具可以很好地指示经常更新的模块 - 通常指示故障点。

如果您没有源代码控制但项目是从共享位置运行的，请删除所有**pycache**文件夹或 .pyc 文件。随着时间的推移/使用不足，观察哪些文件被重新创建以表明它们的使用。

分析从特定入口点运行时打印的 Python 导入

```
python -v entry_point 
```

可能会深入了解正在使用哪些模块。虽然如果您有已知的接入点，您应该尝试[覆盖](http://nedbatchelder.com/code/coverage/ "覆盖范围")模块。

对于更具侵入性的解决方案，请考虑设置项目范围的日志记录。您可以很容易地记录指标，甚至在分布式程序上也是如此。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-17T18:36:51.707

我同意其他人的观点，因为我还没有遇到一个好的 Python 运行时分析工具可以做到这一点。有一些方法可以处理它，但没有一个是微不足道的。

我认为，最强大的方法是获取 Python 源代码并使用某种内置的运行时日志重新编译二进制文件。这样您就可以将其滑入现有环境，而无需对项目进行任何代码更改。当然，这并不是一件小事，但它有一个好处，你可能有一天能够将它合并到后备箱中，以供后代使用，等等。

对于非重新编译方法，我首先要看的是[配置文件库的确定性分析部分](http://docs.python.org/library/profile.html#what-is-deterministic-profiling)。

您如何实现它在很大程度上取决于您的环境是如何设置的。您是否有许多单独的脚本和项目彼此独立运行，或者只有一个主要脚本或模块或包被其他人使用，您只是想知道可以删减其中的哪些部分以使维护更容易？它是一次加载，永远运行的设置，还是您只是按某种计划以原子方式运行脚本的情况？

您可以实现项目范围的日志记录（如@Hardbyte 的答案中所述），但这需要遍历项目并将日志记录行添加到您的所有代码中。如果你这样做，你也可以使用内置的`profiler`，我想。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T16:08:16.003

看看[`sys.setprofile`](http://docs.python.org/library/sys.html#sys.setprofile)：它允许您安装分析器功能。

它的用法在[http://docs.python.org/library/profile.html#profile中有详细说明，](http://docs.python.org/library/profile.html#profile)[这里](http://docs.python.org/library/profile.html#instant-user-s-manual)是一个快速入门。

如果您无法分析您的应用程序，您将被绑定到 cooverage 方法。

您可能会看到的另一件事是装饰器，您可以编写一个[**调试**](http://code.activestate.com/recipes/577551-trace-decorator-for-debugging/) [装饰器](http://paulbutler.org/archives/python-debugging-with-decorators/)，并将其应用于您怀疑的一组函数。看看[这里](http://code.activestate.com/recipes/577742-apply-decorators-to-all-functions-in-a-module/)，看看如何将装饰器应用到整个模块。

您还可以查看[python call graph](http://pycallgraph.slowchop.com/pycallgraph/wiki/WikiStart)，虽然它不会生成您想要的内容，但它会显示一个函数调用另一个函数的频率：

如果您的代码在用户输入上运行，这将很难，因为您必须模拟“典型”用法。

没有更多要告诉你的，只要记住`profiling`作为关键字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T12:49:20.147

Pylint 有时会发出警告（经过仔细考虑）是不合理的。在这种情况下，如果无法重构代码以不触发警告，则使用特殊[`#pylint: disable=X0123`](http://www.logilab.org/card/pylint_manual#daily-pylint-usage)注释（其中 X0123 是[实际的错误/警告消息编号）很有用。](http://pylint-messages.wikidot.com/all-messages)

我想第二次 Hardbyte 提到使用您的源代码控制日志来查看哪些文件最常更改。

如果您正在使用已安装 并安装的系统`find`，则以下是检查哪个文件导入了什么的方法；`grep``sort`

```
find . -name '*.py' -exec grep -EH '^import|^from .* import' {} \+| sort |less 
```

在所有文件中查找最受欢迎的导入；

```
find . -name '*.py' -exec grep -Eh '^import|^from .* import' {} \+ | sort | less 
```

这两个命令应该可以帮助您从项目中找到最常用的模块。

# tabs - 为什么标签在不同的文本编辑器中排列方式不同？

> ID：12614132
> 
> 赞同：1
> 
> 时间：2012-09-27T04:32:04.990
> 
> 标签：tabs, formatting, text-editor, spaces

我一直遇到一个问题，即使用选项卡排列键/值分配的源代码在不同的编辑器中显示不同。

例如，Github 上[突出](https://github.com/iandunn/WordPress-Plugin-Skeleton/blob/master/classes/wpps-cpt-example.php)显示的版本和[原始](https://raw.github.com/iandunn/WordPress-Plugin-Skeleton/master/classes/wpps-cpt-example.php)版本的文件都显示`$labels`阵列在行`55`中的间距未对齐。它在记事本中也是如此。

但是，复制到 Aptana 或 Notepad++ 中的同一个文件将完美地显示排列的值。

为什么会发生这种情况，是否可以创建文件以使其在所有编辑器中正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:48:18.857

根据您在每个编辑器中的设置，它们将各自使用不同数量的制表符空格。

有的用2，有的用3，有的用4，有的用6。通过高亮github中的一个tab可以看到，tab占了8个空格。

这应该可以在编辑器中调整。

如果您在使用特定数量空格的编辑器中创建文件，并在使用不同数量空格的编辑器中查看它，事情看起来会有所不同。

关于是否使用空格或制表符进行缩进一直存在争议。这是个人喜好，但使用空格而不是制表符可以避免这个问题。

您应该能够将编辑器设置为使用空格而不是制表符。

# javascript - 如何防止在选择html textarea的内容时改变字符位置

> ID：12614136
> 
> 赞同：1
> 
> 时间：2012-09-27T04:32:42.593
> 
> 标签：javascript, jquery, html

我创建了一个文本区域，并计算它的字符，当它达到 160 的倍数时增加消息计数，并且在移动光标时它将正确显示字符位置和消息编号。但是**在选择内容时，它会将消息计数显示为 0 和 0 个剩余字符**，如何解决这个问题，我试图在选择内容时将值设置为最后一个字符。

这是我尝试过的工作示例：http: [//jsfiddle.net/F6CZs/1/](http://jsfiddle.net/F6CZs/1/)

任何指导和帮助表示赞赏..！这是实际值：

![在此处输入图像描述](../Images/fecd93f94b7c407841caacda72012ed3.png)

这是选择内容时值的变化： ![在此处输入图像描述](../Images/34c4e012eea946c9ec898b1d22107ee0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:12:36.697

我明白了，它不是“keyup”，它应该只是

```
 $(id).bind("keydown click", function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:12:54.467

尝试这个。

[http://jsfiddle.net/U9vSF/1/](http://jsfiddle.net/U9vSF/1/)

不确定您尝试使用计数器的“# Message(s)”部分实现什么目标。

# javascript - NodeJS：将变量传递给不同变量的名称

> ID：12614138
> 
> 赞同：0
> 
> 时间：2012-09-27T04:32:55.210
> 
> 标签：javascript, node.js

我将如何创建一个接受值并根据收到的值创建监视文件侦听器的函数？

我正在尝试做的示例：

```
function createListener(id) {
  var listener(id here) = fs.watchFile(file, function () {
  });
}); 
```

我怎样才能`id`将给定的函数`createListener();`放入侦听器的分配变量中？

示例：`createListener('5');`将创建`var listener5 = fs.watchFile();`

`createListener('23');`会创造`var listener23 = fs.watchFile();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:06:30.030

您可以使用`eval`创建动态变量名称

但它是**JavaScript的****坏部分**，我**强烈建议不要使用**。 ****`eval`****

 ***** * *

我建议您使用**数组或 JSON**对象来存储多个函数。

**大批**

```
var functions = [];
functions.push = function () { ... };

// functions = [ function () { ... } ]; 
```

**JSON**

```
var functions = {};
functions["one"] = function () { ... };

// functions = { one: function () { ... } }; 
```****

# java - 是什么阻止 Java 验证具有多种签名算法的签名 jar

> ID：12614139
> 
> 赞同：18
> 
> 时间：2012-09-27T04:33:02.240
> 
> 标签：java, jar, code-signing, java-web-start, jarsigner

**快速背景：** 我们发布了一个 webstart 应用程序，其中包括我们自己的应用程序 jar 和许多第三方 jar。Webstart 要求 jnlp 文件引用的所有分布式 jar 都由单个证书签名。因此，我们使用自签名证书对所有 jar（我们的 jar 和第三方 jar）进行签名。一些第三方 jar 已经由生产方签名，但我们只是再次签名，这样就可以正常工作了。到现在。

**问题：** 我们最近从 Java 6 迁移到 Java 7，突然 webstart 拒绝加载一些 jar，抱怨：“无效的 SHA1 签名文件摘要”。这只发生在某些罐子上，而不是其他罐子，而共同线程出现在那些失败的罐子中，似乎有多个签名。

在 SO 和互联网上搜索后，Java jarsigner 的默认签名算法似乎在 Java 6 和 Java 7 之间发生了变化，从 SHA1 到 SHA256，并且很多人都建议使用“jarsigner -digestalg SHA1”来解决验证问题. 我试过了，果然我们的多重签名 jar 现在验证了。所以这似乎是我们问题的解决方法。

据我所知，第三方签名似乎是 SHA1 签名，而我们使用默认签名 - SHA256 - 导致签名混合。当我使用“-digestalg”开关强制 SHA1 时，我们有两个相同类型的签名，并且验证现在有效。那么问题似乎是由具有不同算法的多个签名引起的？还是我缺少其他一些因素。

**问题：**

1.  为什么用 SHA1 + SHA256 验证失败，用 SHA1 + SHA1 验证？有技术原因吗？安全策略原因？为什么它不能验证两个签名都是正确的？
2.  我们使用（继续使用）SHA1 而不是现在默认的 SHA256 有什么缺点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T07:59:49.903

您可以为每个引用相关 jar 文件的第三方签名者创建一个单独的 JNLP 文件，而不是自己重新签署第三方 jar 文件，然后使用该`<extension>`元素让您的主要 JNLP 依赖于这些文件。所有 JAR 文件必须由同一签名者签名的限制仅适用于一个 JNLP，每个扩展都可以有不同的签名者。

如果做不到这一点，您可以在添加自己的签名之前去掉第三方签名（通过重新包装它们而不使用`META-INF/*.{SF,DSA,RSA}`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T14:36:27.223

似乎是 JRE 中的一个错误。就我个人而言，我假设旧的默认签名算法（带有 SHA1 摘要的 DSA）不如新的（带有 SHA256 摘要的 RSA）安全，所以最好不要使用“-digestalg SHA1”选项。

我通过在我的构建脚本中使用自定义 Ant 任务在签署之前对我的 jar 进行“取消签名”，从而解决了这个问题。这样每个罐子只有一个签名。

这是我的 Ant 任务：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.zip.ZipOutputStream;

import org.apache.tools.ant.BuildException;
import org.apache.tools.ant.Task;
import org.apache.tools.ant.types.FileSet;
import org.apache.tools.ant.types.Path;
import org.apache.tools.ant.types.Resource;
import org.apache.tools.ant.types.resources.FileProvider;
import org.apache.tools.ant.types.resources.FileResource;
import org.apache.tools.ant.util.FileUtils;
import org.apache.tools.ant.util.ResourceUtils;

public class UnsignJar extends Task {

    protected List<FileSet> filesets = new ArrayList<FileSet>();

    protected File todir;

    public void addFileset(final FileSet set) {
        filesets.add(set);
    }

    public void setTodir(File todir) {
        this.todir = todir;
    }

    @Override
    public void execute() throws BuildException {
        if (todir == null) {
            throw new BuildException("todir attribute not specified");
        }
        if (filesets.isEmpty()) {
            throw new BuildException("no fileset specified");
        }

        Path path = new Path(getProject());
        for (FileSet fset : filesets) {
            path.addFileset(fset);
        }

        for (Resource r : path) {
            FileResource from = ResourceUtils.asFileResource(r
                    .as(FileProvider.class));

            File destFile = new File(todir, from.getName());
            File fromFile = from.getFile();

            if (!isUpToDate(destFile, fromFile)) {
                unsign(destFile, fromFile);
            }
        }

    }

    private void unsign(File destFile, File fromFile) {
        log("Unsigning " + fromFile);
        try {
            ZipInputStream zin = new ZipInputStream(
                    new FileInputStream(fromFile));
            ZipOutputStream zout = new ZipOutputStream(
                    new FileOutputStream(destFile));

            ZipEntry entry = zin.getNextEntry();
            while (entry != null) {
                if (!entry.getName().startsWith("META-INF")) {
                    copyEntry(zin, zout, entry);
                }
                zin.closeEntry();

                entry = zin.getNextEntry();
            }

            zin.close();
            zout.close();

        } catch (IOException e) {
            throw new BuildException(e);
        }
    }

    private void copyEntry(ZipInputStream zin, ZipOutputStream zout,
            ZipEntry entry) throws IOException {
        zout.putNextEntry(entry);
        byte[] buffer = new byte[1024 * 16];
        int byteCount = zin.read(buffer);
        while (byteCount != -1) {
            zout.write(buffer, 0, byteCount);
            byteCount = zin.read(buffer);
        }
        zout.closeEntry();
    }

    private boolean isUpToDate(File destFile, File fromFile) {
        return FileUtils.getFileUtils().isUpToDate(fromFile, destFile);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:32:24.873

我知道这有点晚了——但我们现在要通过这个了。我们的问题是“MD2withRSA”签名问题。我通过几个步骤解决了这个问题：

1) 与 Verisign 合作从我们的证书中删除“旧”算法 - 因此 MD2withRSA 算法不再用于签署我们的 jar。

2）我们还有一堆 3rd 方罐子，我们只是在没有证书的情况下重新签署它们。当 SHA1 和 SHA-256 算法都列在 MANIFEST.MF 中时，我们遇到了“并非所有 jars 都使用相同的证书签名”。这只是 jar 的一小部分 - 所以对于那些，我们删除了 MANIFEST.MF 文件的下半部分；具有名称的部分：类和算法规范。该数据在我们流程的最后一部分重新生成。我们解压缩，排除旧的签名信息并重新 jar。最后一步是重新签署罐子。我们发现在某些情况下，如果带有 SHA1 条目的旧 Name: 条目位于 MANIFEST.MF 中，则签名不会将其替换为 SHA-256 - 所以我们手动处理这些 jar（暂时）。正在更新我们的 Ant 任务来处理这个问题。

抱歉 - 无法说明为什么 web start 不能处理/允许它 - 只是想出了如何让它工作！

祝你好运！

# java - 用户输入验证遇到问题

> ID：12614142
> 
> 赞同：2
> 
> 时间：2012-09-27T04:33:32.283
> 
> 标签：java, input, user-input

这是我正在研究的程序的一小部分。我正在尝试检查用户是否输入了正确的号码。

他们有五个选项可供选择，因此他们可以点击 1、2、3、4 或 5。然后按 Enter。

所以我想检查以确保用户没有在 < 1 或 > 5 中输入任何内容。我让那部分工作......但我只想知道是否有更简单的方法可以做到这一点在下面的代码中做了。

下一部分是我还想确保用户不输入字母。像“gfgfadggdagdsg”可供选择。

这是我正在处理的部分的代码....

```
public void businessAccount()
    {

        int selection;

        System.out.println("\nATM main menu:");
        System.out.println("1 - View account balance");
        System.out.println("2 - Withdraw funds");
        System.out.println("3 - Add funds");
        System.out.println("4 - Back to Account Menu");
        System.out.println("5 - Terminate transaction");
        System.out.print("Choice: ");
        selection = input.nextInt();

            if (selection > 5){

            System.out.println("Invalid choice.");
            businessAccount();

        }
            else if (selection < 1){
                System.out.println("Invalid choice.");
                businessAccount();
            }
            else {

        switch(selection)
        {
        case 1:
            viewAccountInfo3();
            break;
        case 2:
            withdraw3();
            break;
        case 3:
            addFunds3();
            break;
        case 4:
            AccountMain.selectAccount();
            break;
        case 5:
            System.out.println("Thank you for using this ATM!!! goodbye");
        }
            }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T04:42:53.767

您可以通过添加案例`< 1`来摆脱检查。`> 5``default`

```
try{
     selection = input.nextInt();        
     switch(selection){
      case 1:
          viewAccountInfo3();
          break;
      case 2:
          withdraw3();
          break;
      case 3:
          addFunds3();
          break;
      case 4:
          AccountMain.selectAccount();
          break;
      case 5:
          System.out.println("Thank you for using this ATM!!! goodbye");
          break;
      default:             
          System.out.println("Invalid choice.");
          businessAccount();

      }
}catch(InputMismatchException e){
    //do whatever you wanted to do in case input is not an int
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:45:53.100

使用`BufferedReader`您可以执行以下操作：

```
InputStreamReader isr = new InputStreamReader(System.in);
BufferedReader br = new BufferedReader(isr);
String s = br.readLine();
int selection = 0;

try{
    selection = Integer.parseInt(s);
    if(selection > 5 || selection < 1){
        System.out.println("Invalid choice.");
        businessAccount();
    }else{
        // your switch code here
    }
    // you can use @Nishant's switch code here. it is obviously better: using switch's default case.
}catch(NumberFormatException ex){
    // throw new Exception("This is invalid input"); // or something like that..
    System.out.println("Invalid choice.");
    businessAccount();
} 
```

希望有帮助。

注意：您必须`import java.lang.NumberFormatException` `import java.io.InputStreamReader`和`import java.io.BufferedReader`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:59:46.743

当您检查特定的选择时，使用**switch case**会更好更快地执行**if 语句。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T04:37:19.040

另一种方法是使用正则表达式来使其工作。假设你有一个字符串 x 然后

字符串 x = "某事";

如果（x.matches（“正则表达式”））{

}

另一种方法是用 try catch 包围。

# java - Python 服务器/Java 客户端“连接被拒绝：连接”

> ID：12614143
> 
> 赞同：2
> 
> 时间：2012-09-27T04:33:42.947
> 
> 标签：java, python, client-server, serversocket

我正在使用 TCP 套接字进行通信。

工作时，出现问题

*   客户端无法创建“套接字”实例。
*   奇怪的是（在使用 Python 的服务器中）

    在 python 中使用 'socket' 类不会导致问题，但在 python 中使用 'SocketServer.TCPServer' 类会导致问题

这是我的环境。

*   服务器：Python
*   客户端：Java / 许多用户将尝试连接。

服务器代码（使用 Python）：

1.  主程序.py

    如果**名称**== “**主要**”：

    ```
    server = SooServer('localhost', PORT_DEBUG, SooRequestHandler)
    server.serve_forever() 
    ```

2.  SooServer.py

    ```
    class SooServer(SocketServer.TCPServer):
    "This is Server For Project201201"

    def __init__(self, 
                 host='localhost', 
                 port=PORT_DEBUG,
                 handler=SooRequestHandler):
        #SocketServer.ThreadingTCPServer.__init__(self, (host, port), handler)
        SocketServer.TCPServer.__init__(self, (host, port), handler)
        print "SooServer <State> __init__"
        self.abort=0
        self.timeout=10

    def shutdown(self):
        SocketServer.ThreadingTCPServer.shutdown(self)
        print "SooServer <State> shutdown" 
    ```

客户端代码（使用 Java）：

1.  测试Java.java

    ```
    public class TestJava {    
     public static void main(String[] args) throws Exception{
        // TODO Auto-generated method stub

        try {

            String[] aStrData = {
            "Test",
            "Test"          };

            InetAddress m_oInetAddr = InetAddress.getByName(DEBUG_ADDR); 
            Socket m_oSocket = new Socket(m_oInetAddr, DEBUG_PORT); //This Line Makes Exception!!!!!

            PrintWriter out = 
                    new PrintWriter(
                    new BufferedWriter(
                    new OutputStreamWriter(m_oSocket.getOutputStream())), true);

            int nNumData = aStrData.length;
            out.println(Integer.toString(nNumData));

            for (int i=0 ; i<nNumData ; i++) {                  
                out.println(aStrData[i]);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }   
      }
    } 
    ```

错误代码（使用 Java）：

```
Releated Line : Socket m_oSocket = new Socket(m_oInetAddr, DEBUG_PORT);

java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at TestJava.main(TestJava.java:51) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:54:35.003

问题可能是您的服务未在该端口上运行，或者可能是其他一些应用程序已经在使用该服务，因为...

```
This exception usually means that there is no service listening to
the port you are attempting to connect to. 
```

检查以下事项。

*   您尝试连接的主机名和端口是正确的
*   服务器端正确监听
*   没有防火墙阻止连接

# android - 为什么 http post 请求会减慢我的 Android 应用程序的速度？

> ID：12614144
> 
> 赞同：1
> 
> 时间：2012-09-27T04:33:44.647
> 
> 标签：android

我是安卓新手，我做了一个在线聊天应用程序。问题是当我反复请求“http post”以刷新我的聊天屏幕时，应用程序挂起并且我无法执行任何其他操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:40:05.977

您的应用程序冻结，因为您正在主线程中执行网络操作并且您正在阻止它。

此[Asynctask 教程](http://developer.android.com/reference/android/os/AsyncTask.html)和此[博客](http://android-developers.blogspot.com/2009/05/painless-threading.html)将对您有所帮助。

# php - symfony 下载文件

> ID：12614145
> 
> 赞同：0
> 
> 时间：2012-09-27T04:33:50.163
> 
> 标签：php, http-headers, symfony-1.4, download, attachment

我有一个 symfony 1.4 的项目，在操作中将 mysql 表导出到 .csv 文件，然后从服务器下载它，我使用 Wampserver 进行本地开发，一切正常，但是，当我上传到生产服务器，现在，如果您尝试导出数据，.csv 文件会自动在浏览器中打开，而不询问您是否要保存或打开它，我在创建 .csv 后使用的代码是这样的

```
$this->setLayout(false);
sfConfig::set('sf_web_debug', false);
$this->getResponse()->setHttpHeader('Content-Type', 'text/csv');
$this->getResponse()->setHttpHeader('Content-Disposition', 'attachment; filename="file.csv"');
$this->getResponse()->setHttpHeader('Pragma', 'no-cache');
$this->getResponse()->setHttpHeader('Expires', '0');
readfile(sfConfig::get('sf_upload_dir') . "/export/file.csv");
return sfView::NONE; 
```

我再说一遍，在我的本地服务器上，这个工作正常，浏览器给了我打开或保存的选项，现在，这是代码的问题，服务器中的设置还是其他什么？

文件是用 utf-8 编码保存的，这是问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:04:49.423

感谢评论，我可以让它工作，我所做的是按照@j0k 的建议更改内容类型，并重定向到文件而不是使用`readfile`函数

```
$this->getResponse()->setHttpHeader('Content-Type', 'application/csv');
$this->redirect('/uploads/export/file.csv'); 
```

现在它正在工作

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:07:46.440

另一种无需重定向的方法如下：

```
 $this->getResponse()->clearHttpHeaders();
  $this->getResponse()->setHttpHeader('Content-Description','File Transfer');
  $this->getResponse()->setHttpHeader('Content-Type', 'application/csv');
  $this->getResponse()->setHttpHeader('Content-Disposition','attachment;filename='.$file_name); 
  $this->getResponse()->setHttpHeader('Pragma', '');
  $this->getResponse()->setHttpHeader('Cache-Control', '');
  $this->getResponse()->sendHttpHeaders(); 
  $this->renderText($fwrite('php://output',$stuff)); 
```

保存文件或将文件写入“php://output”的位置。

# python - python multiprocessing - 初始化/传递数据库连接以跨进程使用的最佳方法

> ID：12614146
> 
> 赞同：5
> 
> 时间：2012-09-27T04:33:57.350
> 
> 标签：python, database, multiprocessing, pool, initializer

我在使用 Python 多处理包中的 pool.map 传递数据库连接对象或游标对象时遇到了一些困难。基本上，我想创建一个工人池，每个工人都有自己的状态和数据库连接，以便他们可以并行执行查询。

我已经尝试过这些方法，但是我在 python 中遇到了 picklingerror -

[带有 2 个参数的池映射](https://stackoverflow.com/questions/8521883/multiprocessing-pool-map-and-function-with-two-arguments)

[使用 Initializer 设置多进程池](https://stackoverflow.com/questions/10117073/how-to-use-initializer-to-set-up-my-multiprocess-pool)

第二个链接正是我需要做的，这意味着我希望每个进程在启动时打开一个数据库连接，然后使用该连接来处理传入的数据/参数。

这是我的代码。

```
import multiprocessing as mp

def process_data((id,db)):
  print 'in processdata'
  cursor = db.cursor()
  query = ....
  #cursor.execute(query)
  #....
  .....
  .....
  return row

`if __name__ == '__main__':

  db = getConnection() 
  cursor = db.cursor() 
  print 'Initialised db connection and cursor'
  inputs = [1,2,3,4,5]
  pool = mp.Pool(processes=2)
  result_list = pool.map(process_data,zip(inputs,repeat(db)))
  #print result_list
  pool.close()
  pool.join() 
```

`

**这会导致以下错误 -**

```
`Exception in thread Thread-1:
  Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.6/multiprocessing/pool.py", line 225, in _handle_tasks
    put(task)
  PicklingError: Can't pickle <type 'module'>: attribute lookup __builtin__.module failed` 
```

我猜 db 或 cursor 对象根据 python 是不可挑选的，因为如果我将 repeat(db) 替换为 repeat(x) 其中 x 是 int 或 string ，它就可以工作。我尝试使用初始化函数，它似乎可以工作，但最初执行查询时会发生奇怪的事情，当有数据存在时，许多 id 没有返回任何内容。

实现这一目标的最佳方法是什么？我在 linux 机器上使用 python 2.6.6。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T05:59:16.840

我将继续提出我的评论作为答案，因为我认为它是合适的。您不想尝试将数据库连接从父进程传递到子进程。您希望将可以序列化的静态数据或其他对象移动到您的子进程。您可以传递数据行等。或者您希望您的孩子在必要时建立自己的数据库连接。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T07:35:38.500

尝试腌制数据库连接对象。酸洗独立于工艺。所以它可能工作..

参考这些页面 - [python 泡菜](http://docs.python.org/library/pickle.html)
[泡菜示例](http://python.about.com/od/pythonstandardlibrary/a/pickle_intro.htm)

# php - Ajax 发布故障排除

> ID：12614152
> 
> 赞同：0
> 
> 时间：2012-09-27T04:34:40.567
> 
> 标签：php, javascript, ajax

我正在使用 ajax 将表单发布到我的 localproxy，然后再发布到附属客户以及我的数据库。但是，它要么不使用 ajax 发布，要么出现错误。我在其他网站上使用了这种精确的代码格式，没有问题。

我的ajax代码

```
$(document).ready(function(){

     // ajax code start
    $('#form').on('submit', function (e){
    e.preventDefault();
    $.ajax({
    type: "POST",
    url: "/localProxy.php",
    data: $('#form').serialize(),
    success: function (response) {
            document.location = '/thank-you';
             // do something!
    },
    error: function () {
            alert('There was a problem!');  // handle error
    }
        });
        }); 
```

这是我当前的表单标题和提交代码

```
<form id="form" name="form" >

<input type="submit" name="submit" id="submit" value="Enter" /> 
```

默认提交激活绕过 ajax 或出现警报消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:49:14.193

```
$(document).ready(function(){

 // ajax code start
$('#form').on('submit', function (e){
   e.preventDefault();
   $.post('/localProxy.php', $('#form').serialize(),
      success: function (response) {
        document.location = '/thank-you';
         // do something!
      },
      error: function () {
         alert('There was a problem!');  // handle error
      });
   });
}); 
```

试试这个。这是 ajax 调用的简写版本。bt 我不确定这是 OK 还是 NT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:52:58.947

确保您的`localProxy`脚本中没有错误，或者它确实存在。我还注意到您的代码中缺少功能附件：

```
$(document).ready(function(){
     // ajax code start
    $('#form').on('submit', function (e){
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/localProxy.php",
            data: $('#form').serialize(),
            success: function (response) {
                    document.location = '/thank-you';
                     // do something!
            },
            error: function () {
                    alert('There was a problem!');  // handle error
            }
        });
    }); // <--- I just added this and it's submitting properly
}); 
```

# .net - 用于运行时输入的结构映射中的构造函数参数注入

> ID：12614153
> 
> 赞同：2
> 
> 时间：2012-09-27T04:34:47.537
> 
> 标签：.net, ioc-container, structuremap

我正在使用以下代码来初始化我的 SM 容器。下面的代码工作正常。但是现在我有要求在创建 CultureInfo 实例时需要传递不同的文化名称。简而言之，我想在运行时将一些输入传递给 GetCultureName() 方法。这是对 SM 的有效使用，还是我应该使用适当的文化名称直接在我的代码中实例化 CultureInfo。

```
 public static IContainer Initialize()
    {
        ObjectFactory.Initialize(x =>
                    {
                        x.Scan(scan =>
                                {
                                    scan.TheCallingAssembly();
                                    scan.WithDefaultConventions();
                                });

                        x.For<ICultureInfoProvider>()
                          .Use<DummyCultureInfoProvider>();

                        x.For<IDocumentService>().Use<DummyDocumentService>()
                          .Ctor<CultureInfo>("cultureInfo")
                          .Is(i => new CultureInfo(i.GetInstance<ICultureInfoProvider>().GetCultureName()));
                    });
        return ObjectFactory.Container;
    } 
```

# java - Jersey 客户端未设置 Content-Length

> ID：12614154
> 
> 赞同：6
> 
> 时间：2012-09-27T04:35:13.703
> 
> 标签：java, http, jersey, dropwizard

我正在使用 dropwizard 编写 web 应用程序并使用 Jersey 客户端，如 [http://dropwizard.codahale.com/manual/client/#man-client-jersey中所述](http://dropwizard.codahale.com/manual/client/#man-client-jersey)

但似乎每当我尝试使用 jersey 客户端发帖时，远程 Web 服务都会抱怨 Content-Length 标头丢失并且失败。

```
public JobResponse createJob(JobRequest job) {
        return jerseyClient.resource(URI.create(JOBS_URL))
                .type(MediaType.APPLICATION_JSON_TYPE)
                .header("Api-Key", job.getApiKey())
                .post(JobResponse.class, job);
    } 
```

我已确认该请求不包含标头，尽管我尽了最大努力，但我仍无法弄清楚为什么会发生这种情况。有谁知道我是否缺少某些东西？

PS：我试图打的服务是[https://app.zencoder.com/docs/api/jobs/create](https://app.zencoder.com/docs/api/jobs/create)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:53:12.273

这是已知的“问题”和实际预期的行为。

这里的问题是实体在标头被写入“线路”之后处理，因此 Content-Length 标头值在标头被序列化时不知道。如果您需要它，您有几个选择（具有各种复杂性）：

1.  自己序列化实体；如果您提供实体作为字符串（或字节 []），则应设置 Content-Length。

2.  创建您自己的 MessageBodyWriter，它将在 getSize() 方法调用中计算实体的大小。

可能还有其他方法可以做到这一点，但我现在想不出另一种方法..希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T17:21:53.770

我遇到了同样的问题，Pavel 的答案对我来说并不奏效（我使用的是 FormMutiPart 对象）。

我使用的是**ApacheHttpClient4**而不是常规的**com.sun.jersey.api.client.Client**。改回 Jersey 客户端，计算 Content-Lenght（至少在 FormMultiPart 实体的情况下）。

# javascript - 是否有 jSignature 的 dojo 实现

> ID：12614159
> 
> 赞同：0
> 
> 时间：2012-09-27T04:36:05.747
> 
> 标签：javascript, jquery, canvas, dojo, svg

[jQuery jSignature](https://github.com/brinley/jSignature)插件是否有 Dojo 实现/替代方案？或者：jSignature 可以与 Dojo 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:05:02.837

jSignature 依赖 jQuery 来实现（*很多** 功能。因此，虽然您绝对需要 jQuery 来实现 jSignature，但没有什么能阻止您将 jQuery 与 Dojo 一起加载。

签出 jQuery NoConflict 模式。jSignature 对此有一个特殊的`jSignature.min.noconflict.js`构建。

# c# - 如何在 crm 之外的应用程序中从 sql server 获取选项集值

> ID：12614163
> 
> 赞同：6
> 
> 时间：2012-09-27T04:36:20.487
> 
> 标签：c#, c#-4.0, dynamics-crm, dynamics-crm-2011

如何从 sql server 获取实体的选项集值。我开发了一个 Windows 应用程序，在其中我使用模拟从 crm 获取选项集。但现在我的要求是使用 sql server 凭据而不是 crm 凭据从 sql server 获取值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T08:59:16.330

```
select
    e.Name as EntityName,
    e.ObjectTypeCode,
    s.AttributeName,
    s.AttributeValue,
    s.Value,
    s.DisplayOrder
from
    StringMap s 
    inner join EntityLogicalView e on
        s.ObjectTypeCode = e.ObjectTypeCode
where
    e.Name = 'new_entityname'
    and s.AttributeName = 'new_optionsetname' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T07:38:17.453

直接 SQL 访问显然不受支持，但如果您仍然需要获取信息，则需要`StringMap`查看视图。然后，您可以根据需要按实体和属性名称进行过滤。

# c++ - 使用 Thrust 生成均匀分布的随机数

> ID：12614164
> 
> 赞同：6
> 
> 时间：2012-09-27T04:36:31.863
> 
> 标签：c++, cuda, thrust

我需要生成一个随机数介于`0.0`和`1.0`使用之间的向量`Thrust`。我能找到的唯一记录示例会产生非常大的随机数 ( `thrust::generate(myvector.begin(), myvector.end(), rand`)。我相信答案很简单，但我会很感激任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T05:24:25.220

Thrust 有随机生成器，可用于生成随机数序列。要将它们与设备向量一起使用，您需要创建一个函子，该函子返回随机生成器序列的不同元素。最直接的方法是使用计数迭代器的转换。一个非常简单的完整示例（在这种情况下生成 1.0 和 2.0 之间的随机单精度数）可能如下所示：

```
#include <thrust/random.h>
#include <thrust/device_vector.h>
#include <thrust/transform.h>
#include <thrust/iterator/counting_iterator.h>
#include <iostream>

struct prg
{
    float a, b;

    __host__ __device__
    prg(float _a=0.f, float _b=1.f) : a(_a), b(_b) {};

    __host__ __device__
        float operator()(const unsigned int n) const
        {
            thrust::default_random_engine rng;
            thrust::uniform_real_distribution<float> dist(a, b);
            rng.discard(n);

            return dist(rng);
        }
};

int main(void)
{
    const int N = 20;

    thrust::device_vector<float> numbers(N);
    thrust::counting_iterator<unsigned int> index_sequence_begin(0);

    thrust::transform(index_sequence_begin,
            index_sequence_begin + N,
            numbers.begin(),
            prg(1.f,2.f));

    for(int i = 0; i < N; i++)
    {
        std::cout << numbers[i] << std::endl;
    }

    return 0;
} 
```

在此示例中，仿函数`prg`将随机数的下限和上限作为参数，`(0.f,1.f)`默认值为 with。请注意，为了每次调用变换操作时都有不同的向量，您应该使用初始化为不同起始值的计数迭代器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-04T07:47:16.063

它可能不是您问题的直接答案，但是 cuRand 库在这个概念上非常强大。您可以同时在 GPU 和 CPU 上生成随机数，并且它包含许多分布函数（正态分布等）。

在此链接上搜索标题：“一个 NVIDIA CURAND 实现”：http: [//adnanboz.wordpress.com/tag/nvidia-curand/](http://adnanboz.wordpress.com/tag/nvidia-curand/)

```
//Create a new generator
curandCreateGenerator(&m_prng, CURAND_RNG_PSEUDO_DEFAULT);
//Set the generator options
curandSetPseudoRandomGeneratorSeed(m_prng, (unsigned long) mainSeed);
//Generate random numbers
curandGenerateUniform(m_prng, d_randomData, dataCount); 
```

需要注意的是，不要一次又一次地生成生成器，它会进行一些预先计算。调用 curandGenerateUniform 非常快，并产生介于 0.0 和 1.0 之间的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:37:35.080

@talonmies 建议的方法具有许多有用的特征。这是模仿您引用的示例的另一种方法：

```
#include <thrust/host_vector.h>
#include <thrust/generate.h>
#include <iostream>
#define DSIZE 5

__host__ static __inline__ float rand_01()
{
    return ((float)rand()/RAND_MAX);
}

int main(){
  thrust::host_vector<float> h_1(DSIZE);

  thrust::generate(h_1.begin(), h_1.end(), rand_01);
  std::cout<< "Values generated: " << std::endl;
  for (unsigned i=0; i<DSIZE; i++)
    std::cout<< h_1[i] << " : ";
  std::cout<<std::endl;
return 0;
} 
```

与您引用的示例类似，它使用 rand()，因此只能用于生成宿主向量。同样，除非您适当地重新播种 rand()，否则它每次都会产生相同的序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-19T16:21:55.530

这个问题已经有了令人满意的答案。特别是，`thrust::generate`当 talonmies 提议使用`thrust::transform`.

我认为还有另一种可能性，即使用`thrust::for_each`，所以我发布了一个使用这种原语的完整示例，只是为了记录。

我也在计时不同的解决方案。

**编码**

```
#include <iostream>

#include <thrust\host_vector.h>
#include <thrust\generate.h>
#include <thrust\for_each.h>
#include <thrust\execution_policy.h>
#include <thrust\random.h>

#include "TimingCPU.h"

/**************************************************/
/* RANDOM NUMBERS GENERATION STRUCTS AND FUNCTION */
/**************************************************/
template<typename T>
struct rand_01 {
    __host__ T operator()(T& VecElem) const { return (T)rand() / RAND_MAX; }
};

template<typename T>
struct rand_01_for_each {
    __host__ void operator()(T& VecElem) const { VecElem = (T)rand() / RAND_MAX; }
};

template<typename T>
__host__ T rand_01_fcn() { return ((T)rand() / RAND_MAX); }

struct prg
{
    float a, b;

    __host__ __device__
        prg(float _a = 0.f, float _b = 1.f) : a(_a), b(_b) {};

    __host__ __device__
        float operator()(const unsigned int n) const
    {
        thrust::default_random_engine rng;
        thrust::uniform_real_distribution<float> dist(a, b);
        rng.discard(n);

        return dist(rng);
    }
};

/********/
/* MAIN */
/********/
int main() {

    TimingCPU timerCPU;

    const int N = 2 << 18;          
    //const int N = 64;

    const int numIters = 50;

    thrust::host_vector<double>     h_v1(N);
    thrust::host_vector<double>     h_v2(N);
    thrust::host_vector<double>     h_v3(N);
    thrust::host_vector<double>     h_v4(N);

    printf("N = %d\n", N);

    double timing = 0.;
    for (int k = 0; k < numIters; k++) {
        timerCPU.StartCounter();
        thrust::transform(thrust::host, h_v1.begin(), h_v1.end(), h_v1.begin(), rand_01<double>());
        timing = timing + timerCPU.GetCounter();
    }
    printf("Timing using transform = %f\n", timing / numIters);

    timing = 0.;
    for (int k = 0; k < numIters; k++) {
        timerCPU.StartCounter();
        thrust::counting_iterator<unsigned int> index_sequence_begin(0);
        thrust::transform(index_sequence_begin,
            index_sequence_begin + N,
            h_v2.begin(),
            prg(0.f, 1.f));
        timing = timing + timerCPU.GetCounter();
    }
    printf("Timing using transform and internal Thrust random generator = %f\n", timing / numIters);

    timing = 0.;
    for (int k = 0; k < numIters; k++) {
        timerCPU.StartCounter();
        thrust::for_each(h_v3.begin(), h_v3.end(), rand_01_for_each<double>());
        timing = timing + timerCPU.GetCounter();
    }
    timerCPU.StartCounter();
    printf("Timing using for_each = %f\n", timing / numIters);

    //std::cout << "Values generated: " << std::endl;
    //for (int k = 0; k < N; k++)
    //  std::cout << h_v3[k] << " : ";
    //std::cout << std::endl;

    timing = 0.;
    for (int k = 0; k < numIters; k++) {
        timerCPU.StartCounter();
        thrust::generate(h_v4.begin(), h_v4.end(), rand_01_fcn<double>);
        timing = timing + timerCPU.GetCounter();
    }
    timerCPU.StartCounter();
    printf("Timing using generate = %f\n", timing / numIters);

    //std::cout << "Values generated: " << std::endl;
    //for (int k = 0; k < N; k++)
    //  std::cout << h_v4[k] << " : ";
    //std::cout << std::endl;

    //std::cout << "Values generated: " << std::endl;
    //for (int k = 0; k < N * 2; k++)
    //  std::cout << h_v[k] << " : ";
    //std::cout << std::endl;

    return 0;
} 
```

在笔记本电脑`Core i5`平台上，我有以下时间

```
N = 2097152
Timing using transform = 33.202298
Timing using transform and internal Thrust random generator = 264.508662
Timing using for_each = 33.155237
Timing using generate = 35.309399 
```

除了第二个使用`Thrust`'s 内部随机数生成器而不是`rand()`.

请注意，与其他解决方案不同，该解决方案`thrust::generate`更加*严格*，因为用于生成随机数的函数不能具有输入参数。因此，例如，不可能按常数缩放输入参数。

# php - 使用php删除记录而不刷新页面

> ID：12614167
> 
> 赞同：0
> 
> 时间：2012-09-27T04:36:38.820
> 
> 标签：php, jquery, ajax, partial-page-refresh

我有如下的 HTML 和 PHP 代码：

**HTML**

```
<a href="deleteData.php?id=<?php echo $value['id']?>"><button name="delte" class="btn">Delete</button></a> 
```

**删除数据.php**

```
<?php
include ('include/connectdb.php');
$getid = $_GET['id'];
$sql = ("UPDATE tblworkfaire SET status=0 where id = ".$getid);
$res = mysql_query($sql) or die (mysql_error());

?> 
```

这很好用，除了记录被删除后，记录仍然显示在页面上，直到它被刷新。我该如何解决这个问题。任何人有任何想法请帮助我。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:41:45.090

尝试这样的事情---

```
jQuery.ajax({
        type: "GET",
        url: deleteData.php,
        data:{'id':id},
        success:function(results)
        {   
                 .....
        }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T01:41:41.373

> 这是不刷新页面删除记录的完整源代码。
> 
> **按照步骤：**
> 
> **步骤1：**
> 
> DBConnect.php

```
 class DBConnect
  {
    function DBConnect()
    {
       $link= mysql_connect("localhost","root","")or die("Local Host Error".mysql_error());
       mysql_select_db("test");
    }

    function viewData()
    {
      $query = "SELECT * FROM test_mysql";
      $resultset = mysql_query($query);
      return $resultset;
    }

    function DeleteData($userID)
    {
      $query = "DELETE FROM test_mysql WHERE id=".$userID;
      $resultset=mysql_query($query) ;
    }
  } 
```

> **第2步：**
> 
> ```
>  delete.php 
> ```

```
 include_once'DBConnect.php';    
   if(isset($_REQUEST['userid']) && $_REQUEST['userid'])    
   {    
     $delObj= new DBConnect();    
     $delObj->DeleteData($_REQUEST['userid']);    
   } 
```

> **第 3 步：**
> 
> ```
>  index.php 
> ```

```
 <html>
    <head>
    <title></title>
    <script type="text/javascript">
    function deletedata(id)
    {
      var xmlhttp;    
      if (id=="")
        {
            document.getElementById("Display").innerHTML="";
            return;
        }
      if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
      else
      {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function()
      {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
              window.location.reload()

            }
      }
          xmlhttp.open("GET","delete.php?userid="+id,true);
          xmlhttp.send();

    }
    </script>
    </head>
    <body>
    <?php 
    include 'DBConnect.php';
    $ViewObj= new DBConnect();
    $ResultSet=$ViewObj->viewData();
    ?>
    <span id ="Display">
    <table align="center" border="1" width="50%" cellpadding="4" cellspacing="4">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>operation</th>
      <th align="center">Action</th>
    </tr>
    <?php
    while($row= mysql_fetch_array($ResultSet))
    {
    ?>
    <tr>
      <td><?php echo $row[0];?></td>
      <td><input type="text" name="txt"></td>
      <td><?php echo $row[1];?></td>
      <td align="center"><a href="#" onClick="deletedata('<?php echo $row[0];?>')" style="color:#00F"><b>Delete</b></a></td>
    </tr>
    <?php
    }
    ?>
    </table>
    </span>
    </body>
    </html> 
```

> 如果您觉得有任何问题，请告诉我。希望对您有所帮助。谢谢你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:39:48.383

你应该使用`Ajax`. 试试看：http `jQuery`:
[//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

然后`onSuccess`也使用 jQuery 方法删除行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:42:08.963

您可以使用 php 函数**header('location:yourPage.php');** 或者在 Ajax 的帮助下进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T04:39:33.107

使用**redirect('my_original_page.php')**它将重定向到您的主页，但应在执行删除查询后放置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T04:41:13.157

您必须为此使用 AJAX

使用本教程

[使用 AJAX 从 MySQL 数据库中删除值而无需重新加载页面（已编辑）](https://stackoverflow.com/questions/11496545/deleting-values-from-mysql-database-with-ajax-without-page-reload-edited)

它会帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T04:54:17.237

Creaet Delete.php 文件

```
 include_once'DBConnect.php';
 if(isset($_REQUEST['userid']) && $_REQUEST['userid'])
 {
 $delObj= new DBConnect();
 $delObj->DeleteData($_REQUEST['userid']);
 } 
```

创建 DBConnect.php 文件

```
<?php

class DBConnect
{
function DBConnect()
{
    $link= mysql_connect("localhost","root","")or die("Local Host Error".mysql_error());
    mysql_select_db("mydb");

}

 function viewData()
{

    $query="select * from userinfo";
    $resultset=mysql_query($query) ;

    return $resultset;

}

function DeleteData($userID)
{

    $query="DELETE from userinfo where id=".$userID;

    $resultset=mysql_query($query) ;

}

}

?> 
```

创建 index.php 文件

```
<script>
function deletedata(id)
{
    var xmlhttp;    
    if (id=="")
      {
          document.getElementById("Display").innerHTML="";
          return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
      }
    else
    {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
            window.location.reload()

          }
    }
        xmlhttp.open("GET","delete.php?userid="+id,true);
        xmlhttp.send();

}
</script>    

<?php include 'DBConnect.php';
$ViewObj= new DBConnect();
$ResultSet=$ViewObj->viewData();?> // I have created one function which will get all the data from the database if you don't want to do this just call deletedata() function onClick event and pass Record ID as agrument which you want to delete on DELETE button.
<br /><br /><br />
<span id ="Display">
<table align="center" border="1">
<tr>
      <th>Name</th>
      <th>operation</th>
</tr>
<?php
while($row= mysql_fetch_array($ResultSet))
{?>

<tr>
    <td><input type="checkbox"></td>
    <td><?php echo $row[1];?></td>

    <td align="center"><a href="#" onclick="deletedata('<?php echo $row[0];?>')" style="color:#FF0000"><b>Delete</b></a>

    </td>
</tr>

<?php 

}
?>
</table> 
```

我想这会对你有所帮助:)

如果您发现任何问题，请告诉我。

# java - 在Java程序中获取Mysql的数据类型

> ID：12614175
> 
> 赞同：3
> 
> 时间：2012-09-27T04:37:35.493
> 
> 标签：java, mysql, jdbc

有什么方法可以将 MySQL 数据库的 DataTypes 放入 java 程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:06:30.947

`getColumnTypeName()`上使用`ResultSetMetaData`。

这方面的一个例子是：

```
public class getColumnDataTypes  
{  
     public static void main (String[] args) throws Exception
     {
          String driver = "com.mysql.jdbc.Driver";
          String connString = "jdbc:mysql://localhost:3300/DATABASE,USERNAME,PASSWORD";

          Class.forName(driver);
          Connection connection = DriverManager.getConnection(connString);

          Statement statement = connection.createStatement();

          //Query
          ResultSet resultSet = statement.executeQuery("SELCET * FROM table");

          ResultSetMetaData rsmd = resultSet.getMetaData();

          //Get number of columns returned
          int numOfCols = rsmd.getColumnCount();

          //Print out type for each column
          for(int i=1; i<=numOfCols; ++i)
          {
               System.out.println("Column [" + i + "] data type: " + rsmd.getColumnTypeName(i));
          }

          //Close DB connection
          statement.close();          
          connection.close();    
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T04:43:52.773

嗨，我们可以通过实现一些 java 已经拥有的类和包来做到这一点 -

1.CHAR、VARCHAR、BLOB、TEXT、ENUM 和 SET ->
java.lang.String、java.io.InputStream、java.io.Reader、java.sql.Blob、java.sql.Clob
2.FLOAT、REAL , 双精度, NUMERIC, DECIMAL, TINYINT, SMALLINT, MEDIUMINT, INTEGER, BIGINT->
java.lang.String, java.lang.Short, java.lang.Integer, java.lang.Long, java.lang.Double, java .math.BigDecimal
3.DATE, TIME, DATETIME, TIMESTAMP->
java.lang.String, java.sql.Date, java.sql.Timestamp
*MySQL Connector/J 在处理 MySQL 数据类型和 Java 之间的转换方面很灵活数据类型。*

*一般来说，任何 MySQL 数据类型都可以转换为 java.lang.String，任何数字类型都可以转换为任何 Java 数字类型，尽管可能会发生舍入、溢出或精度损失。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:51:58.963

如果您尝试获取具有数据类型的列的列表，请使用系统表：

```
SELECT TABLE_NAME, ORDINAL_POSITION, 
COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = {YOUR_DB}
ORDER BY TABLE_NAME, ORDINAL_POSITION; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T08:33:52.680

您可以使用[`DatabaseMetaData.getTypeInfo()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTypeInfo%28%29)检索数据库中的类型名列表、相应的 JDBC 类型和最大精度等信息。

# android - 具有 Intel Atom(x86) 和 GPU 仿真的 Android 虚拟设备在 Phonegap 上显示黑框

> ID：12614179
> 
> 赞同：3
> 
> 时间：2012-09-27T04:38:22.563
> 
> 标签：android, cordova, gpu, intel, avd

![在此处输入图像描述](../Images/9877ec0130fb382a7f724feff7f35e32.png)

我创建了一个用于 phonegap 开发的 android 虚拟设备，使用 Intel Atom(x86) 作为 CPU/ABI 功能。

当我在我的 avd 上打开 GPU 仿真时，屏幕中间会显示一个黑框。

这只发生在 phonegap+jquerymobile 上。不会发生在原生 android 应用程序中。

我的笔记本电脑有一个 Intel(R) Core(TM) i3-2350M 2.30GHz CPU，带有 Intel 集成显卡。我正在使用 Linux Mint 13 肉桂。我的 BIOS 上的虚拟化也处于活动状态。

怎么去掉里面的黑匣子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T15:38:07.063

这些看起来是 phonegap github 页面上的相关帖子。

[https://github.com/codecomputerlove/PhotoSwipe/issues/477](https://github.com/codecomputerlove/PhotoSwipe/issues/477)

添加 opacity: 0 到以下

```
/* UILayer */
div.ps-uilayer {
    opacity: 0;
    cursor: pointer;
} 
```

解决问题。

我还没有测试这个，但我即将测试。请注意，这适用于具有 haxm 加速的 windows intel，但不适用于具有 haxm 加速的 mac osx intel。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T04:56:26.873

我已经修好了。该问题与我页面上的一些 .css 文件有关。GPU 仿真在 Linux 上运行完美。每次您必须在 phonegap 中创建自己的主题时，请注意 .css 路径。

# vba - 如何将一系列行排序到一定数量的（未知）列？

> ID：12614182
> 
> 赞同：2
> 
> 时间：2012-09-27T04:38:44.407
> 
> 标签：vba, excel

如果我将范围的初始部分设置为 Range("A:A")，如何确保将整行传递给排序？

数据 id、fname、mname、lname、后缀、状态、位置、时区

通过在 id 中搜索起点和终点来选择范围。因此 Range 可能是一张纸上的 A1:183 和另一张纸上的 A1:A1138。列以 G 或 H 结尾。数据仍然需要“按摩”

在每张纸上，我按 D(lname) 和 B(fname) 进行排序，并且我想包括剩余的列，以便保留数据完整性。

到目前为止，我有一个选择范围的子程序，但我不知道如何在没有 rng.EntireRow.Select 的情况下标记其他列，这似乎不起作用。

```
Sub sortRows(bodyName As String, ByRef wksht As Worksheet)
Dim operationalRange As Range, sortRange As Range

Set operationalRange = selectBodyRow(bodyName).EntireRow

Debug.Print "Sorting Worksheet " & wksht.Name & " containing " & operationalRange.Count & " rows."
ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Clear
ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Add Key:=operationalRange, _
      SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Add Key:=operationalRange, _
      SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
With ActiveWorkbook.Worksheets(wksht.Name).Sort
      .SetRange operationalRange
      .Header = xlGuess
      .MatchCase = False
      .Orientation = xlTopToBottom
      .SortMethod = xlPinYin
      .Apply   ' Fails here with:
               ' Runtime Error '1004':
               ' The sort reference is not valid. Make sure that it's within the data
               ' you want to sort, and the first Sort By box isn't the same or blank.
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:37:44.407

您需要找到最后一行和最后一列来构建您的范围。

例如

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LRow As Long, LCol As Long
    Dim rng As Range

    '~~> Change this with thee relevant sheet name
    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> Get Last Row and Last Column
    LRow = LastRow(ws)
    LCol = LastColumn(ws)

    With ws
        '~~> Define your range
        Set rng = .Range("A1:" & ReturnName(LCol) & LRow)

        Debug.Print rng.Address
    End With
End Sub

'~~> Function to get last row
Public Function LastRow(Optional wks As Worksheet) As Long
If wks Is Nothing Then Set wks = ActiveSheet
LastRow = wks.Cells.Find(What:="*", _
    After:=wks.Range("A1"), _
    Lookat:=xlPart, _
    LookIn:=xlFormulas, _
    SearchOrder:=xlByRows, _
    SearchDirection:=xlPrevious, _
    MatchCase:=False).Row
End Function

'~~> Function to get last column
Public Function LastColumn(Optional wks As Worksheet) As Long
If wks Is Nothing Then Set wks = ActiveSheet
LastColumn = wks.Cells.Find(What:="*", _
    After:=wks.Range("A1"), _
    Lookat:=xlPart, _
    LookIn:=xlFormulas, _
    SearchOrder:=xlByColumns, _
    SearchDirection:=xlPrevious, _
    MatchCase:=False).Column
End Function

'~~> Function to get the Column name from Column Number
Function ReturnName(ByVal num As Integer) As String
    ReturnName = Split(Cells(, num).Address, "$")(1)
End Function 
```

# ruby - 本地运行 Sinatra App 时如何设置生产/开发环境

> ID：12614183
> 
> 赞同：0
> 
> 时间：2012-09-27T04:38:49.623
> 
> 标签：ruby, rubygems, sinatra, bundler

我的 Gemfile 中有以下内容，但是当我在本地运行 bundle install 时，我收到有关 postgres 不可用的错误。

```
group :development do
  gem 'dm-sqlite-adapter'
end

group :production do
  gem 'dm-postgres-adapter'  
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:05:38.640

您需要告诉 Bundler 排除生产组：

```
bundle install --without production 
```

它会记住这一点，以便将来在同一台机器上运行（它将它存储在`.bundle`目录中），因此您只需执行一次，然后可以简单地执行`bundle`或`bundle install`在将来执行。

# iis-6 - Intellitrace：在机器上找不到 IIS

> ID：12614185
> 
> 赞同：0
> 
> 时间：2012-09-27T04:39:01.033
> 
> 标签：iis-6, visual-studio-2012, intellitrace

好的。这是我正在运行的内容：

*   Intellitrace 收集器（powershell 2.0，来自 VS 2012）
*   Windows Server 2003，运行 IIS 6
*   要跟踪的目标应用程序是 Web 服务（asmx、ASP.NET 2.0.50727）

这是我所做的和发生的事情：

```
cmdlet Start-IntelliTraceCollection at command pipeline position 1
Supply values for the following parameters:
OutputPath: logs
Start-IntelliTraceCollection : An error occurred during website instrumentation
: Internet Information Services could not be found on the machine.
At line:1 char:29
+ Start-IntelliTraceCollection <<<<  MyAppPool .\collection_plan.ASP.NE
T.trace.xml
    + CategoryInfo          : NotSpecified: (:) [Start-IntelliTraceCollection]
   , IISLegacyVersionException
    + FullyQualifiedErrorId : Microsoft.VisualStudio.Enterprise.WebInstrument.
   IISLegacyVersionException,Microsoft.VisualStudio.IntelliTrace.PowerShell.S
  tartIntelliTraceCollectionCommand 
```

我尝试以管理员身份运行 powershell - 它没有帮助（相同的错误消息）

我在这里错过了什么吗？

我提到的任何组件是否不受支持？即：IIS 版本，Windows Server 版本？我怀疑不支持 IIS 版本（`IISLegacyVersionException`已提出）

非常感谢您的时间 + 关注。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:45:00.767

这个关于使用 VS2012[使用独立收集器从 IIS 收集 IntelliTrace 数据的 Microsoft 页面提到](http://msdn.microsoft.com/en-us/library/hh398365.aspx)

托管在 Internet 信息服务 (IIS) 版本 7.0、7.5 和 8.0 上的 ASP.NET Web 应用

作为一项要求，所以你是对的，不支持 IIS6。

# python - python数据结构，操作列表有哪些不同且最常用的方法

> ID：12614186
> 
> 赞同：1
> 
> 时间：2012-09-27T04:39:06.510
> 
> 标签：python, list

我对在 python 中使用方法来操作列表感到非常困惑。说你有

```
mylist = [1,2,3,4]
mylist.append(5) #works fine, 
```

但是当我把

```
def adding(mylist):
    mylist.append(5)

print adding(mylist) #will print out the orginal list without the 5. 
```

还，

```
data2 = data3 = [1,2,3]
data2 = data2 +[4]+[5]+[6] # doesn't works
data3 += [4] +[5] +[6] #works 
```

但我很困惑他们是如何工作的。

所以我想制作一个列表（不是根据python）来操作列表的不同方式。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:51:23.380

```
def adding(mylist):
    mylist.append(5)

print adding(mylist) 
```

你的`adding`方法没有返回任何东西..

在您的方法中添加一个`return mylist`，如下所示：-`mylist.append(5)``adding`

```
def adding(mylist):
    mylist.append(5)
    return mylist
print adding(mylist) 
```

或者你可以`print adding()`用这个代码替换（如果你没有返回任何东西）： -

```
adding(mylist)
print mylist 
```

而且，对于您的第二个问题：-

```
>>> data2 = data3 = [4, 5, 6]
>>> data2 = data2 + [1] + [2] + [3]
>>> print data2
[4, 5, 6, 1, 2, 3]
>>> data3 += [1] + [2] + [3]
>>> print data3
[4, 5, 6, 1, 2, 3] 
```

实际上对我来说，它们都有效..它应该有效，你得到的输出是什么？（特别是，你期望你的输出是什么？？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:28:15.960

我怀疑您希望原始代码能够正常工作的原因是因为您更熟悉使用 C++ 等语言传递引用。重要的是要注意*按引用*传递和*按值*传递的区别。了解使用的是哪一种 Python 更为重要。

简而言之，Python 实际上既不使用*按引用*传递，也不使用*按值传递*；传递是通过Python 中的*对象完成的。*

* * *

长答案：

可以使用 C*进行值传递*的示例：

```
#include <stdio.h>

void adding(int i) {
    i = i + 1;
}

int main() {
    int i = 0;
    adding(i);
    printf("i is %d\n", i);  // will print "i is 0"
    return 0;
} 
```

这里， i 的值在传递给 时被*复制*`adding()`。`int i`inside 与原始inside`adding(int i)`位于不同的内存位置。所以 inside ，只影响仅在 范围内已知的内存块中的值，in完全 不受影响，因为它驻留在不同的内存块中。`int i``main()``adding()``i = i + 1``adding()``i``main()`

可以使用 C++ 进行*引用传递*的示例：

```
#include <iostream>

void adding(int &i) {
    i = i + 1;
}

int main() {
    int i = 0;
    adding(i);
    std::cout << "i is " << i << std::endl;  // will print "i is 1"
    return 0;
} 
```

这里`i`是通过引用传递的`adding()`。`i`inside指的是与in`adding()`完全相同的内存块。因此，将递增到 1。`i``main()``i`

* * *

现在，让我们回到您的示例来讨论 Python（我通过猜测您的实际意思来修改 =]）：

```
# Case 1
mylist = [1,2,3,4]
mylist.append(5)  # will print [1,2,3,4,5]

# Case 2
mylist = [1,2,3,4]
def adding(mylist):
    mylist.append(5)

adding(mylist)
print mylist  # will print [1,2,3,4,5]

# Case 3
mylist = [1,2,3,4]
def adding(mylist):
    mylist = mylist + [5]

adding(mylist)
print mylist  # will print [1,2,3,4]

# Case 4
mylist = [1,2,3,4]
def adding(mylist):
    mylist += [5]

adding(mylist)
print mylist  # will print [1,2,3,4,5] 
```

在这里，`mylist`既不是通过值传递，也不是通过引用传递。它实际上是由对象传递的。

在 Python 中，`mylist = [1,2,3,4]`创建一个列表`[1,2,3,4]`并为其附加 [*标签*](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables) `mylist`。这里要注意的重要一点是 list 是一个 **对象**（IIRC，每个对象都是它的一个[`PyObject`](http://docs.python.org/c-api/structures.html#PyObject)或一个扩展）。

了解这种区别将使您能够理解示例案例中的输出：

1.  在**案例 1**中，直接`.append()`在`[1,2,3,4]`列表对象上调用以更改列表值，因此`myobject`附加到的对象已更改。请注意，这也是可能的，因为列表是 Python 中的可变对象。

2.  在**Case 2**中，`mylist`在传递到 时不会被复制`adding()`，它仍然“附加”到同一个列表对象，类似于**Case 1**。因此，调用 `.append()`这个对象*将*改变对象本身。在 之外 `adding()`，因为`mylist`仍然附加到同一个对象（即使对象已经改变了自己），我们得到输出 [1,2,3,4,5]。

3.  在**案例 3**中，在内部`adding()`，局部变量`mylist`附加到由`[1,2,3,4]+[4]`. 但是原始`mylist` 指向的对象从未改变过，因此，输出仍然是 `[1,2,3,4]`.

4.  **案例 4**有点棘手。在 Python 中，列表是可变的，`+=`充当类似 的快捷方式`.extend()`，它作用于调用对象本身。因此，原始对象已被修改`[1,2,3,4,5]`并`mylist`仍然附加到它。可能还值得注意的是，对于元组、字符串和数字等不可变对象，`+=`将创建一个*新*对象并将变量附加到它上面。

* * *

至于在 Python 中使用列表的不同方式，[**Fredrik Lundh 撰写的这篇文章**](http://effbot.org/zone/python-list.htm)包含了非常详尽的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:48:56.490

print`adding(mylist)`应该打印`None`，因为您没有从函数返回任何内容`adding()`。

以下：

```
def adding(mylist):
    mylist.append(5)

test_list = range(5)

print adding(test_list)

print test_list

adding(test_list)

print test_list 
```

产生这个输出：

```
None
[0, 1, 2, 3, 4, 5]
[0, 1, 2, 3, 4, 5, 5] 
```

你能更具体地谈谈你的第二个例子吗？data2 原来是什么？你能指望什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T07:21:41.713

```
def adding(mylist):
    mylist.append(5)

print adding(mylist) 
```

没有退货声明。

```
print mylist
[1,2,3,4,5] 
```

这将打印 [1,2,3,4,5]，因为它是通过引用传递的。所以即使您没有返回列表，您的 mylist 也会被修改。

```
data2 = data3 = [1,2,3]
data2 = data2 +[4]+[5]+[6] #Actually works 
```

# actionscript-3 - 没有库被链接为运行时共享库 (RSL)

> ID：12614187
> 
> 赞同：2
> 
> 时间：2012-09-27T04:39:07.730
> 
> 标签：actionscript-3, flash, flash-cs5

我正在为聊天目的创建一个 Flash 应用程序，并且每件事都进行得很完美，但是当我用来发布时只有一个警告。当我提交标题时引发警告，即“由于您的发布设置，没有库被链接为运行时共享库​​ (RSL)：导出 SWC”

我在发布设置中检查了导出为 SWC 的选项，但我需要将其导出为 SWC 而不会发出任何警告。所以请建议我如何克服这个警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T14:22:24.683

您在发布时会看到此警告，因为您在项目中的某处使用了运行时共享库​​，但您没有利用它，因为 SWC 被编译到您的代码中，而不是在运行时加载。您可以放心地忽略此警告，尽管它很烦人。

当我不小心将 TLF 文本而不是经典文本用于我的一个文本字段时，我看到了这个警告。当您从 Illustrator 导入文本字段时会发生这种情况。当我将其更改为经典文本时，此发布警告消失了。TLF 为文本字段添加了新功能和灵活性，但可能会出现错误，尤其是在移动 AIR 项目中。

# servlets - ServletContextListener v/s init() 方法

> ID：12614189
> 
> 赞同：3
> 
> 时间：2012-09-27T04:39:12.540
> 
> 标签：servlets, init, servlet-listeners

当我们必须在应用程序启动时设置一些数据时，在调用 servlet init 方法或实现 servlet 上下文侦听器之间更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T05:54:24.830

servlet 上下文侦听器就是为此而生的。用它。您可以使用 servlet，但您必须确保它在部署时启动，并且在其他 servlet 之前启动。您的所有 servlet 中的哪一个将承担此责任？

# android - 一次删除所有日志

> ID：12614191
> 
> 赞同：1
> 
> 时间：2012-09-27T04:39:20.287
> 
> 标签：android

我正在开发一个 android 应用程序，我在其中使用大量日志在控制台打印值以进行调试。现在我在 Android 中使用 Log.i() 方法。现在实际上是什么问题，在我必须给测试团队之前，我必须删除所有日志。当项目中的类数量较少时，我可以手动将其删除。但是当项目包含 40 到 50 个类时，人为不可能去所有类并手动将其删除。那么在 Eclipse 中是否有任何设置可用，以便我可以通过更改单个设置或配置来删除或禁用所有日志，或者是否有任何 jar 文件有助于调试比 Log.i() 方法更容易。任何建议或指导都是非常值得赞赏的

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:46:51.057

日志将保存在手机上，任何用户/开发人员都可以通过安装[Catlog](https://market.android.com/details?id=com.nolanlawson.logcat&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5ub2xhbmxhd3Nvbi5sb2djYXQiXQ..)等应用程序来检查它们，即使不使用 adb！这是一个问题，因为您会向用户/其他开发人员提供不必要的、有时是机密的数据。

解决这个问题的简单方法？

一个。使用[Proguard](http://developer.android.com/guide/developing/tools/proguard.html)自动阻止所有日志，更多信息在[这个 stackoverflow 线程中](https://stackoverflow.com/questions/5553146/disable-logcat-output-completely-in-release-android-app)

这里可以在 Proguard 中自动阻塞字节码级别的所有日志

```
-assumenosideeffects class android.util.Log {
    public static int v(...);
} 
```

例如，上面将删除任何详细的日志记录，[更多在这个线程](https://stackoverflow.com/questions/2018263/android-log)

湾。我对所有日志都使用 if(DEBUG) Log.i，因此只需更改一次布尔 DEBUG，我就可以打开/关闭所有日志

此答案来自此链接 [Android hide logs in the application when upload to market](https://stackoverflow.com/questions/9563298/android-hide-logs-in-the-application-when-upload-to-market)

# cuda - 切换到 PTX 文件后 cudaMemcpyToSymbol 不起作用

> ID：12614195
> 
> 赞同：0
> 
> 时间：2012-09-27T04:39:55.453
> 
> 标签：cuda, gpu

让 GPU 代码作为使用 funcname <<< >>> 调用的设备函数正常工作。

更改代码以使用 PTX 文件。

现在所有调用 cudaMemcpyToSymbol 的行都返回错误代码：无效符号

这是 .cu 文件的片段：

```
{

__device__  __constant__  void *devInFramePtrs      [20];
__device__  __constant__  void *devOutFramePtrs     [20];
__device__  __constant__  void *devProcFramePtrs    [60];
__device__  __constant__  void *devProcOutFramePtrs [60];
__device__  __constant__ AlgorithmParms *devAlgoParmsPtr;
__device__  __constant__ AlgorithmStats *devStatParmsPtr;           
__device__   float diamondOffsetsGlobal[36];

} 
```

================= **在 ptx 文件中我得到：**

```
.global .align 4 .b8 devInFramePtrs[80];
.global .align 4 .b8 devOutFramePtrs[80];
.global .align 4 .b8 devProcFramePtrs[240];
.global .align 4 .b8 devProcOutFramePtrs[240];
.global .align 4 .u32 devAlgoParmsPtr;
.global .align 4 .u32 devStatParmsPtr;
.global .align 4 .b8 diamondOffsetsGlobal[144]; 
```

================= **那么主机代码是**：

```
err = cudaMemcpyToSymbol("devInFramePtrs",  gDevInFramePtrs, sizeof(void *) * 20, 0, cudaMemcpyHostToDevice);
err = cudaMemcpyToSymbol("devOutFramePtrs", gDevOutFramePtrs, sizeof(void *) * 20, 0, cudaMemcpyHostToDevice);
err = cudaMemcpyToSymbol("devProcFramePtrs", gDevProcFramePtrs, sizeof(FRAME_BASE_TYPE *) * numDevInProcFramePtrs3, 0, cudaMemcpyHostToDevice);
err = cudaMemcpyToSymbol("devProcOutFramePtrs", gDevProcOutFramePtrs, sizeof(FRAME_BASE_TYPE *) * numDevOutProcFramePtrs3, 0, cudaMemcpyHostToDevice);
err = cudaMemcpyToSymbol("diamondOffsetsGlobal", &(diamondOffset[0][0]), sizeof(float) * 36, 0, cudaMemcpyHostToDevice); 
```

=========================

所有调用返回值 11：无效符号

***详细信息：*** Cuda 4.2，在VS2010下运行，Win7 32位应用程序。

==========================

这是编译脚本：

"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_20,code=\"sm_20,compute_20\" --use-local-env --cl -version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -G -- keep-dir "调试" -maxrregcount=32 --machine 32 -ptx -o "U:\filterKernel.ptx" "U:\filterKernel.cu"

正如我所说，唯一的改变是制作 PTX 文件并改变函数调用。另请注意，无论变量是在 const 存储还是常规全局存储中，我都会收到错误消息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:46:40.990

哈里斯做对了。cudaMemcpyToSymbol 已弃用。正确的方法是调用 cuModuleGetGlobal 来获取设备上的地址，然后使用 cudaMemcpy 与该地址。

谢谢哈里斯

# sql - 我可以在这里使用Oracle分析功能吗？

> ID：12614209
> 
> 赞同：1
> 
> 时间：2012-09-27T04:42:09.627
> 
> 标签：sql, oracle, analytic-functions

我有这个查询：

```
SELECT year,
       month,
       week,
       C.cpg_pk                                                        CPG,
       C.dep_pk                                                        DEPT,
       T.cust_id                                                       CUST_ID,
       D1.r_id                                                         R_ID,
       Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)) AS P1,
       Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)) AS IC,
       Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)) AS B1,
       Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code)   AS P2,
       Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code)   AS B2,
       Count(DISTINCT A.cust_id)                                       TOTAL_ACC
       ,
       Count(DISTINCT T.txn_pk)
       TOTAL_TXN,
       SUM(am_amount)                                                  TOTAL_AMT
FROM   t_header T,
       cust_master A,
       tx_details1 D1,
       tx_details2 D2,
       cpg_master C
WHERE  A.TYPE = 0
       AND T.cust_id = A.cust_id
       AND T.txn_pk = 5001
       AND T.txn_pk = D1.txn_pk
       AND T.txn_pk = D2.txn_pk
       AND D1.cpg_pk = C.cpg_pk
       AND D1.op = 1
GROUP  BY year,
          month,
          week,
          C.cpg_pk,
          C.dep_pk,
          t.cust_id,
          D1.r_id,
          Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)),
          Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)),
          Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)),
          Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code),
          Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code) 
```

其生成的输出如下：

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2   TOTAL
2012    08      32     127 -1      10019   3665                     134   23100.09   
2012    08      32     127 -1      10019   3665                     135   23100.09  
2012    08      32     127 -1      10019   3665             723           23100.09  
2012    08      32     127 -1      10019   3665        714                23100.09  
2012    08      32     127 -1      10019   3665     21                    23100.09
2012    08      32     128 -1      10019   3665                      134  23100.09 
2012    08      32     128 -1      10019   3665                      135  23100.09 
2012    08      32     128 -1      10019   3665             723           23100.09 
2012    08      32     128 -1      10019   3665        714                23100.09 
2012    08      32     128 -1      10019   3665     21                    23100.09 
```

这里的值是重复的。我试图用 a 消除重复`group by`，但没有成功。你可以帮帮我吗？

所需的输出是这样的：

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_AMT
---------------------------------------------------------------------------------
2012    08      32      127 -1      10019   3665    21  714 723     134 23100.09
2012    08      32      127 -1      10019   3665    21  714 723     135 23100.09
2012    08      32      128 -1      10019   3665    21  714 723     134 23100.09
2012    08      32      128 -1      10019   3665    21  714 723     135 23100.09 
```

主要的是`year`, `month`, `week`, `cpg`, `dept`, `cust_id`, `r_id`, `p1`, `ic`, `b1`, `p2`,`b2`应该是唯一的行。使用分析函数可以实现还是我需要编写 PL/SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:16:58.490

当然，您可以使用分析，如下所示：

```
SELECT DISTINCT YEAR, MONTH, WEEK, CPG, DEPT, CUST_ID, R_ID,
       SUM(P1) OVER (PARTITION BY YEAR,MONTH,WEEK, CPG, DEPT, CUST_ID, R_ID) P1,
       SUM(IC) OVER (PARTITION BY YEAR,MONTH,WEEK, CPG, DEPT, CUST_ID, R_ID) IC,
       SUM(B1) OVER (PARTITION BY YEAR,MONTH,WEEK, CPG, DEPT, CUST_ID, R_ID) B1, 
       P2, B2, TOT, TOTAL_TXN, TOTAL_AMT 
  FROM (your_query) 
```

# macos - emacs 控制 D 键绑定被覆盖

> ID：12614211
> 
> 赞同：1
> 
> 时间：2012-09-27T04:42:25.980
> 
> 标签：macos, cocoa, google-apps-script

## 有什么解决方案可以处理谷歌脚本代码编辑器将“前向删除”变成“杀戮线”绑定？我习惯了隐藏的 cocoa/emacs 派生的导航键。谷歌决定搞砸**control-d**。

说明：

1.  使用代码编辑器时会发生这种情况。（编辑视图？）
2.  我宁愿停止谷歌的行为也不愿应付它。

要了解更多[控制键导航](https://stackoverflow.com/questions/162896/emacs-on-mac-os-x-leopard-key-bindings)的流畅性（以及丢失时的烦人程度），试试这个......

1.  将 caps-lock 设置为控制键
2.  打开一个可可浏览器，如 Safari 和
3.  [在https://script.google.com/](https://script.google.com/)启动脚本
4.  短暂切换到地址栏
    1.  点击 ctrl+a （转到行首）
    2.  点击 ctrl+d （字符一次删除 1 个）
    3.  命中逃生
5.  切换到脚本区域并尝试同样的事情（整行都被咀嚼了！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:29:50.130

如果您的意思是在该编辑器中处理程序时，请按前进-删除键。在 Apple 的笔记本电脑和无线键盘上，它是 fn-delete（这里的“delete”是指向后删除，也就是“退格键”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:07:29.277

你可以试试[KeyRemap4Macbook](http://pqrs.org/macosx/keyremap4macbook/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T23:50:34.660

今天我注意到这个问题不再存在。因此，在宏编辑器中编辑脚本文件时，emacs 快捷方式按预期工作。我不知道他们是简单地删除了错误或覆盖，还是实际修补了它才能工作。

# python - 对命名元组类的自定义排序

> ID：12614213
> 
> 赞同：8
> 
> 时间：2012-09-27T04:42:33.120
> 
> 标签：python, sorting, namedtuple, functools

我经常使用[namedtuple](http://docs.python.org/library/collections.html#collections.namedtuple)类。我今天一直在想是否有一种很好的方法可以为这样的类实现自定义排序，即使默认排序键不是 namedtuple 的第一个元素（然后是第二个、第三个等）。

我的第一个直觉是实现`__lt__`并`__eq__`让[`total_ordering`](http://docs.python.org/library/functools.html#functools.total_ordering)剩下的事情（它填写 le, ne, gt, ge）：

```
from collections import namedtuple
from functools import total_ordering

@total_ordering
class B(namedtuple('B', 'x y')):
    def __lt__(self, other):
        return self.y < other.y 
```

然而：

```
def test_sortingB():
    b1 = B(1, 2)
    b2 = B(2, 1)
    assert b2 < b1  # passes
    assert b2 <= b1  # fails 
```

哦，对了……只有[在缺少](http://hg.python.org/cpython/file/2.7/Lib/functools.py#l74)`total_ordering`其他方法时才填写。由于 tuple/namedtuple 有这样的方法，total_ordering 没有为我做任何事情。

所以我想我的选择是

1.  停止使用 namedtuple 并构建我自己的无聊类，继续使用 total_ordering
2.  继续使用 namedtuple 并实现所有 6 种比较方法
3.  继续使用 namedtuple 并插入一个排序值作为第一个字段。幸运的是，我没有太多的类实例，但通常我只是依靠字段的顺序来初始化它们，这可能很讨厌。也许这是一个坏习惯。

有关解决此问题的最佳方法的建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T05:27:27.153

选项1.使用[mixin](https://stackoverflow.com/questions/533631/what-is-a-mixin-and-why-are-they-useful)并将total_ordering应用于该

```
@total_ordering
class B_ordering(object):
    __slots__ = ()                 # see Raymond's comment
    def __lt__(self, other):
        return self.y < other.y

class B(B_ordering, namedtuple('B', 'x y')):
    pass 
```

选项 2\. 制作你自己的装饰器`total_ordering`并使用它来代替

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T06:17:31.387

如果正如您的问题所暗示的那样，您的兴趣仅在于通过备用键对命名元组进行*排序*，那么为什么不将 sort/sorted`key`参数与`attrgetter`函数一起使用：

```
>>> from collections import namedtuple
>>> from operator import attrgetter
>>> P = namedtuple("P", "x y") 
>>> p1 = P(1, 2)
>>> p2 = P(2, 1)
>>> sorted([p1, p2], key=attrgetter("y"))
[P(x=2, y=1), P(x=1, y=2)] 
```

你可以更进一步，定义你自己的排序函数：

```
>>> from functools import partial
>>> sortony = partial(sorted, key=attrgetter("y"))
>>> sortony([p1, p2])
[P(x=2, y=1), P(x=1, y=2)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:59:41.170

我的建议是按照您希望它们排序的顺序使用字段创建您的命名元组。您可能需要更改创建值的代码部分（例如，更改`someTuple("name", 24)`为`someTuple(24, "name")`编写所有比较方法的麻烦，并且作为奖励还避免了始终调用这些自定义比较方法的额外性能开销。

# javascript - 请帮助我理解： onkey=Javascript

Please help me understand this line:

`<textarea onkeyup="this.rows = (this.value.split(&quot;\n&quot;).length||1);" style="overflow-y: hidden;"></tex</h1> <blockquote> <p>ID：12614214</p> <p>赞同：0</p> <p>时间：2012-09-27T04:42:43.453</p> <p>标签：javascript, split, logical-operators</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-09-27T04:47:49.620</p> </blockquote> <p><code>this.value</code>是一个字符串值。</p> <p>Javascript 字符串有一个<code>split</code>函数，它返回一个字符串数组。</p> <p>字符串数组有一个长度。</p> <p>在 javascript 中，0 被视为 false。</p> <p>因此，设置<code>this.rows</code>等于由换行符拆分输入所产生的字符串数。如果此数字为 0，则将其设置为 1。</p> </body> </html></textarea>`

# javascript - 无法弄清楚这个 switch 语句有什么问题

> ID：12614215
> 
> 赞同：0
> 
> 时间：2012-09-27T04:42:46.577
> 
> 标签：javascript

我试图让这个 switch 语句工作，但我不断收到“Uncaught SyntaxError: Unexpected string”错误......我的印象是 javascript switch 语句可以处理字符串？

```
swtich(opcode)
    {
        case "A9":  loadAccImmediate();     break;
        case "AD":  loadAccDirect();        break;
        case "8D":  storeAccInMem();        break;
        case "6D":  addWithCarry();         break;
        case "A2":  loadXRegWithConst();    break;
        case "AE":  loadXRegFromMem();      break;
        case "A0":  loadYRegWithConst();    break;
        case "AC":  loadYRegFromMem();      break;
        case "EA":  noOperation();          break;
        case "00":  sysBreak();             break;
        case "EC":  compareXReg();          break;
        case "D0":  branchXBytes();         break;
        case "EE":  incByteValue();         break;
        case "FF":  sysCall();              break;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:44:34.227

你拼错了`switch`：

```
swtich(opcode)
  ↑↑ 
```

# mysql - 如何从 bash 脚本发出包含单引号的语句

> ID：12614216
> 
> 赞同：-1
> 
> 时间：2012-09-27T04:42:48.920
> 
> 标签：mysql, mysql-python

我尝试在我的一个脚本中执行以下 mysql 命令：

```
mysql -e 'show global status like 'open_files'' 
```

但它似乎不起作用，因为 string 周围有单引号`'open_files'`。

我怎样才能发出这样的命令，它包含一个单引号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T04:44:28.720

在外面使用双引号。

```
mysql -h127.0.0.1 -uxxxxx -pxxxxx -A databasename -e "show global status like 'open_files'" 
```

或相反的方式：

```
mysql -h127.0.0.1 -uxxxxx -pxxxxx -A databasename -e 'show global status like "open_files"' 
```

或者您可以转义单引号。

而你正在使用`LIKE`，你没有错过 wild char`%`吗？

# app-store - iTunes Connect 要求新图标 - 1024 x 1024

> ID：12614218
> 
> 赞同：0
> 
> 时间：2012-09-27T04:43:00.443
> 
> 标签：app-store, icons, app-store-connect

我刚刚将我的 iOS 应用程序更新推送到 iTuneConnect，它突然要求提供 1024x1024 图标。这不是问题，我已经上传了一个大图标，但是我上传的图标是非圆角且没有光泽，而旧图标是。

iTuneConnect 中的视图如下所示，

[链接到截图 http://desmond.imageshack.us/Himg100/scaled.php?server=100&filename=screenshot20120927at051.png&res=landing](http://desmond.imageshack.us/Himg100/scaled.php?server=100&filename=screenshot20120927at051.png&res=landing)

在我点击提交或它被批准或基本上在它在应用商店上线之前的任何时间之后，它会像第一次一样被渲染和修饰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:44:09.900

显然它会，但上传可能需要 30 分钟左右。刚刚检查并已渲染。

# python - 如何向 wsgiref python Web 服务添加身份验证

> ID：12614221
> 
> 赞同：0
> 
> 时间：2012-09-27T04:43:31.387
> 
> 标签：python, basic-authentication, wsgiref

我正在研究python文档中给出的示例代码，代码是：

```
from wsgiref.simple_server import make_server, demo_app

httpd = make_server('', 8000, demo_app)
print "Serving HTTP on port 8000..."

# Respond to requests until process is killed
httpd.serve_forever()

# Alternative: serve one request, then exit
httpd.handle_request() 
```

我可以通过端口 8000 上的 localhost 访问它，但是现在如果我想使用“localhost:8000 用户名，密码”传递用户名/密码，我该怎么做。我已经知道如何知道身份验证是否不成功，但不知道如何实际接收用户名/密码以进行检查..

任何提示和提示......

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:46:56.600

如果您在查询字符串中传递用户名/密码，例如`http://localhost:8000?username=x&password=y`，您可以在 WSGI 处理程序函数中从 environ dict: 中检索它们`environ['QUERY_STRING']`。您可以使用`urlparse.parse_qs`标准库来解析它。如果这是要投入生产的代码，我第二个 Joran，你应该至少使用 HTTP 基本身份验证和一些身份验证中间件，如[桶](http://pypi.python.org/pypi/barrel)。

# vb.net - VB.Net：成绩计算器程序 - 获取荒谬的值

> ID：12614229
> 
> 赞同：0
> 
> 时间：2012-09-27T04:44:21.643
> 
> 标签：vb.net

我正在尝试创建一个成绩计算器程序，但遇到了两个问题：

1.  获得正确的输出（因为我得到了荒谬的数字）和
2.  让我的柜台工作。

基本形式基本上是一进七级输入：

*   3 次考试（分别占 15%、20% 和 20%）
*   一个项目（权重10%），
*   作业（权重 20%），
*   同行评议（权重 5%），
*   编程语言演示（权重 10%）

并且个人应该得到他们的数字等级、他们的字母等级和两个计数器的输出，这些计数器计算有多少人得到了`A's`和`F's`。

例如，当我输入 3 个考试成绩时：`82`, `87`, `91`; `Assignments: 94`; `Peer reviews: 100;` `programming language presentation: 90;`和`final project: 92,`

当它显然应该是和 numeric的字母等级时，我得到了最终的数字等级`253.90`和字母等级。`F``A``89.90`

我的计数器也无法正常工作，因为它们没有显示`count`，但我觉得我把它放在了正确的位置（显示输出）。我在这里到底做错了什么？这是我的代码

```
Option Strict On

Public Class frmGradeCalculator
    'declare Constants
    Const EXAM1GRADE_WEIGHT As Decimal = 0.15D
    Const EXAM2GRADE_WEIGHT As Decimal = 0.2D
    Const EXAM3GRADE_WEIGHT As Decimal = 0.2D
    Const HOMEWORKGRADE_WEIGHT As Decimal = 0.2D
    Const HOMEWORKPEERREVIEW_WEIGHT As Decimal = 0.05D
    Const LANGUAGEQUICKREFERENCE_WEIGHT As Decimal = 0.1D
    Const FINALPROJECT_WEIGHT As Decimal = 0.1D

    'Declare module variables
    Dim mdecFinalNumericGrade As Decimal
    Dim mstrFinalLetterGrade As String
    Dim mintStudentsWithAs As Integer
    Dim mintStudentsWithFs As Integer

    Private Sub btnCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalculate.Click

        'declare variables
        Dim decExam1Grade As Decimal
        Dim decExam2Grade As Decimal
        Dim decExam3Grade As Decimal
        Dim decHomeworkGrade As Decimal
        Dim decPeerReviewGrade As Decimal
        Dim decLanguageReferenceGrade As Decimal
        Dim decFinalProjectGrade As Decimal
        Dim decPercent As Decimal

        'check for blanks
        If (txtExam1Grade.Text) = "" Then
            MessageBox.Show("You Can't Leave Exam 1 Blank")
            Exit Sub
        End If

        'check for numeric
        If IsNumeric(txtExam1Grade.Text) = False Then 'value is not numeric
            MessageBox.Show("Please enter a numeric value for Exam 1!")
            Exit Sub
        End If

        'check for blanks
        If (txtExam2Grade.Text) = "" Then
            MessageBox.Show("Please enter Exam 2!")
            Exit Sub
        End If
        'check for everything else
        If IsNumeric(txtExam2Grade.Text) = False Then 'Value is not numeric
            MessageBox.Show("Please enter a numeric value for Exam 2!")
            Exit Sub
        End If

        'check for blanks
        If (txtExam3Grade.Text) = "" Then
            MessageBox.Show("Please enter Exam 3!")
            Exit Sub
        End If

        'check for numerics
        If IsNumeric(txtExam3Grade.Text) = False Then
            MessageBox.Show("Please enter a positive numeric value for Exam3!")
            Exit Sub
        End If

        'check for blanks
        If (txtHomeworkGrade.Text) = "" Then
            MessageBox.Show("Please enter Homework Grade!")
            Exit Sub
        End If

        'check for numerics
        If IsNumeric(txtHomeworkGrade.Text) = False Then
            MessageBox.Show("Please enter a numeric positive value for Homework Grade!")
            Exit Sub
        End If

        'check for blanks
        If (txtPeerReviewGrade.Text) = "" Then
            MessageBox.Show("Please enter a Peer Review Grade!")
            Exit Sub
        End If

        'check for numerics
        If IsNumeric(txtPeerReviewGrade.Text) = False Then
            MessageBox.Show("Please enter a numeric positive value for Peer Review Grade!")
            Exit Sub
        End If

        'check for blanks
        If (txtLanguageReferenceGrade.Text) = "" Then
            MessageBox.Show("Please enter a Language Reference Grade!")
            Exit Sub
        End If

        'check for numerics
        If IsNumeric(txtLanguageReferenceGrade.Text) = False Then
            MessageBox.Show("Please enter a numeric positive value for Language Reference Grade!")
            Exit Sub
        End If
        'check for blanks
        If (txtFinalProjectGrade.Text) = "" Then
            MessageBox.Show("Please enter a Final Project Grade!")
            Exit Sub
        End If

        'check for numerics
        If IsNumeric(txtFinalProjectGrade.Text) = False Then
            MessageBox.Show("Please enter a numeric positive value for Final Project Grade!")
            Exit Sub
        End If

        'convert data types
        decExam1Grade = Convert.ToDecimal(txtExam1Grade.Text)
        decExam2Grade = Convert.ToDecimal(txtExam2Grade.Text)
        decExam3Grade = Convert.ToDecimal(txtExam3Grade.Text)
        decHomeworkGrade = Convert.ToDecimal(txtHomeworkGrade.Text)
        decPeerReviewGrade = Convert.ToDecimal(txtPeerReviewGrade.Text)
        decLanguageReferenceGrade = Convert.ToDecimal(txtLanguageReferenceGrade.Text)
        decFinalProjectGrade = Convert.ToDecimal(txtFinalProjectGrade.Text)
        mdecFinalNumericGrade = (decExam1Grade * EXAM1GRADE_WEIGHT) + _
                                (decExam2Grade * EXAM2GRADE_WEIGHT) + _
                                (decExam3Grade * EXAM3GRADE_WEIGHT) + _
                                (decHomeworkGrade * HOMEWORKGRADE_WEIGHT) + _
                                (decPeerReviewGrade * HOMEWORKPEERREVIEW_WEIGHT) + _
                                (decLanguageReferenceGrade + LANGUAGEQUICKREFERENCE_WEIGHT) + _
                                (decFinalProjectGrade + FINALPROJECT_WEIGHT)

        'check for 0 or positive
        If decExam1Grade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Exam 1!")
            Exit Sub
        End If

        'check for 0 or positive
        If decExam2Grade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Exam 2!")
            Exit Sub
        End If

        'check for 0 or positive
        If decExam3Grade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Exam 3!")
            Exit Sub
        End If

        'check for 0 or positive
        If decHomeworkGrade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Homework Grade!")
            Exit Sub
        End If

        'check for 0 or positive
        If decPeerReviewGrade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Peer Review Grade!")
            Exit Sub
        End If

        'check for 0 or positive
        If decLanguageReferenceGrade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Language Reference!")
            Exit Sub
        End If

        'check for 0 or positive
        If decFinalProjectGrade < 0 Then
            MessageBox.Show("Please enter a positive value or zero for Final Project Grade!")
            Exit Sub
        End If

        'make sure values are less than 100
        If decExam1Grade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decExam2Grade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decExam3Grade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decHomeworkGrade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decPeerReviewGrade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decLanguageReferenceGrade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        If decFinalProjectGrade > 100 Then
            MessageBox.Show("Please enter a value thats 100 or less!")
        End If

        'Determine grade per letter
        Select Case decpercent
            Case Is >= 89.5D
                mstrFinalLetterGrade = "A"
                mintStudentsWithAs += 1
            Case Is >= 79.5D
                mstrFinalLetterGrade = "B"
            Case Is >= 69.5D
                mstrFinalLetterGrade = "C"
            Case Is >= 59.5D
                mstrFinalLetterGrade = "D"
            Case Else
                mstrFinalLetterGrade = "F"
                mintStudentsWithFs += 1
        End Select

        lblFinalLetterGrade.Text = mstrFinalLetterGrade

        'display outputs
        lblFinalNumericGrade.Text = mdecFinalNumericGrade.ToString("f2")
    End Sub

    Private Sub btnClear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClear.Click
        'clear the texboxes and labels
        txtExam1Grade.Clear()
        txtExam2Grade.Clear()
        txtExam3Grade.Clear()
        txtHomeworkGrade.Clear()
        txtPeerReviewGrade.Clear()
        txtLanguageReferenceGrade.Clear()
        txtFinalProjectGrade.Clear()
        lblFinalLetterGrade.Text = ""
        lblFinalNumericGrade.Text = ""

        'setcursor back to top textbox
        txtExam1Grade.Focus()

    End Sub

    Private Sub btnReset_Click(ByVal sende As System.Object, ByVal e As System.EventArgs) Handles btnReset.Click

        'reset module level variables
        mdecFinalNumericGrade = 0
        mstrFinalLetterGrade = ""
        mintStudentsWithAs = 0
        mintStudentsWithFs = 0

    End Sub

    Private Sub btnExit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnExit.Click
        'close the form
        End
    End Sub

    Private Sub frmGradeCalculator_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:21:27.943

您的最终总成绩是错误的，因为您没有将语言演示文稿和最终项目乘以它们的权重，而是将权重添加到分数中：

*   考试 1 = 82 * .15 = 12.3
*   考试 2 = 87 * .20 = 17.4
*   考试 3 = 91 * .20 = 18.2
*   作业 = 94 * .20 = 18.8
*   同行评审 = 100 * .05 = 5
*   语言表达 = 90 + .10 = 90.1
*   最终项目 = 92 + .10 = 92.1

注意最后两个值的加法（而不是乘法）。总数为 253.9。

将 medcFinalNumericGrade 的最后两个计算更改为：

```
(decLanguageReferenceGrade * LANGUAGEQUICKREFERENCE_WEIGHT) + _
(decFinalProjectGrade * FINALPROJECT_WEIGHT) 
```

您将始终得到“F”，因为`decpercent`从未分配过值，因此会执行 Else Case。分配 decpercent 一个值，或使用 mdecFinalNumericGrade。

例如：

```
Select Case mdecFinalNumericGrade 
```

代替

```
Select Case decpercent 
```

修复 Select Case 后，您的计数应该会起作用（除非您重置表单）。

# jquery - 元素img的循环属性

> ID：12614234
> 
> 赞同：2
> 
> 时间：2012-09-27T04:45:26.643
> 
> 标签：jquery, attr

当我尝试获取图像`<img src="myimag.png" loop="3" />` 的循环属性的值时，jQuery 函数返回**“循环**”但不返回值。它适用于所有其他人，例如：

```
var src = $(this).attr('src');
var alt = $(this).attr('alt'); 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:54:34.303

[我做了一些挖掘](https://github.com/jquery/jquery/blob/master/src/attributes.js#L312)，显然`loop`是一个布尔属性（`loop="loop"`）。[规范](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3.4.2)说：

> 布尔属性可以合法地采用单个值：属性本身的名称（例如，`selected="selected"`）。

以下是其余这些类型的属性：

```
rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i; 
```

jQuery 将这些类型的属性考虑在内，并返回正确的属性值，而不管属性的实际值如何。如果该属性存在，则将其设置为“true”。

* * *

如果要在 HTML 元素中存储数据，请使用`data-`属性：

```
<img src="myimag.png" data-loop="3" /> 
```

现在，`$('img').data('loop')`返回*数字* `3`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:55:44.957

这似乎是一个 jQuery 的错误。

本机方法为您提供正确的价值。

```
console.log($('img')[0].attributes.getNamedItem('loop').nodeValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:56:31.273

`loop`是一个布尔属性。jQuery 将为布尔属性返回属性本身的名称（即，这也会发生`disabled`。 `loop`也不再在 HTML 规范中（http://www.w3.org/community/webed/wiki/HTML/Elements/ img#HTML_Attributes) 所以你不应该使用它。

我也不清楚您使用它的*目的是什么。*似乎您应该`data-loop`改用它。然后您可以使用`.attr('data-loop')`或正常访问它`.data('loop')`。

# c# - 检查对象同步块索引

> ID：12614238
> 
> 赞同：2
> 
> 时间：2012-09-27T04:45:54.477
> 
> 标签：c#, .net-3.5, locking, compact-framework, clr

我想知道 C# 中是否有任何东西可以查看对象的同步块索引甚至同步块本身？

在 Windows CE 和 .NET Compact Framework 3.5 中，我看到一个间歇性缺陷，在调用时我得到一个 ArgumentException `Monitor.Exit()`（我实际上使用了 a`lock`但它被抛出了已编译的`Monitor.Exit()`. 我有一种感觉线程在某个时候被中止，我想捕获异常并检查锁定对象的同步块的状态。

# android - 如何在图像视图中设置大图像

> ID：12614240
> 
> 赞同：1
> 
> 时间：2012-09-27T04:46:06.617
> 
> 标签：android

我有一个图像视图，我想在它上面设置一个图像。图像大小为 7,707,446 字节。每当我尝试设置布局时，应用程序崩溃并且错误是*内存不足错误*。任何人都可以建议我如何解决它。xml 是：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollbars="none">

    <RelativeLayout

        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/image" >
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:06:02.870

```
Bitmap picture=BitmapFactory.decodeFile("/sdcard...");
    int width = picture.getWidth();
    int height = picture.getWidth();
    float aspectRatio = (float) width / (float) height;
    int newWidth = 70;
    int newHeight = (int) (70 / aspectRatio);       
    picture= Bitmap.createScaledBitmap(picture, newWidth, newHeight, true);

public static Bitmap decodeImage(String arrayList_image) {

        URL aURL;

        try {

            aURL = new URL(arrayList_image);

            URLConnection conn = aURL.openConnection();

            conn.connect();

            InputStream is = conn.getInputStream();

            BufferedInputStream bis = new BufferedInputStream(is);

            bm = BitmapFactory.decodeStream(bis);

            bis.close();

            is.close();

            return bm;

        } catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:51:19.043

嗨，我建议您尝试一下并根据设备显示您的图像。

```
Bitmap bmp = BitmapFactory.decodeResource(myContext.getResources(),drawableId);
            int w = bmp.getWidth();
            int h = bmp.getHeight();

            System.out.println("OrgWidth : " + w);
            System.out.println("orgHeight : " + h);

            int targetWidth = (screenWidth * w)/iPadWidth;
            int targetHeight = (screenHeight * h)/iPadHeight;

            System.out.println("TargetWidth : " + targetWidth);
            System.out.println("TargetHeight : " + targetHeight);

            int[] arrWidthHeight = {targetWidth,targetHeight};

            // This for Slove the out of Memory problem

            int newWidth = 110;
            int newHeight = 110;
            float scaleWidth = ((float) newWidth) / w;
            float scaleHeight = ((float) newHeight) / h;

            Matrix bMatrix = new Matrix();
            bMatrix.postScale(scaleWidth, scaleHeight);
            Bitmap resizedBitmap = Bitmap.createBitmap(bmp, 0, 0, w, h , bMatrix, true); 
```

首先从资源中获取图像并根据设备找到图像的新高度和宽度，然后缩放此图像以解决这里内存不足的问题。

这用于根据设备高度和宽度查找高度和宽度..

```
WindowManager winManager = (WindowManager) myContext.getSystemService(Context.WINDOW_SERVICE);
            screenWidth = winManager.getDefaultDisplay().getWidth();
            screenHeight = winManager.getDefaultDisplay().getHeight();

            System.out.println("Screen Width : " + screenWidth);
            System.out.println("Screen Height : " + screenHeight); 
```

并使用位图来获取图像的高度和宽度，例如 ipathwidth 和 ipathHeight 现在好了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:00:34.303

请参阅[有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

您可以创建一个函数来计算缩小因子：

```
public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
} 
```

然后用它来加载一个缩放的位图：

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
} 
```

因此，如果您想将 100x100 像素的缩略图加载到 ImageView 中，您只需使用：

```
mImageView.setImageBitmap(
    decodeSampledBitmapFromResource(getResources(), R.id.myimage, 100, 100)
); 
```

# operating-system - ISR期间不应该发生uCOS的Task删除的原因

> ID：12614245
> 
> 赞同：0
> 
> 时间：2012-09-27T04:46:19.783
> 
> 标签：operating-system, rtos, ucos

我正在修改 uCos-ii 的一些功能（主要是调度）。

我发现 OSTaskDel 函数在被 ISR 调用时什么也不做。

虽然我了解了操作系统的一些基本功能，但我真的不明白为什么要禁止这样做。

它所做的只是从就绪列表中退出并释放获取的资源，如 TCB 或信号量......

在处理中断时是否有任何理由禁止他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:13:15.873

从文档中不清楚为什么在这种情况下禁止它，而是`OSTaskDel()`显式调用`OS_Sched()`，并且在 ISR 中，这应该仅在存在最外层嵌套中断处理程序时发生（由 处理`OSIntExit()`）。

我不认为以下是可取的，因为可能有其他原因禁止这样做，但您可以删除：

```
if (OSIntNesting > 0) {
    return (OS_TASK_DEL_ISR);
} 
```

然后使`OS_Sched()`调用有条件，如下所示：

```
if (OSIntNesting == 0) {
    OS_Sched();
} 
```

如果这死得很惨，请记住我说过这是不明智的！

在任何情况下，此操作都会延长您的中断处理时间，因此仅出于这个原因可能是个坏主意。

通常（不仅仅是来自 ISR）异步删除另一个任务而不考虑该任务的状态或资源使用情况是一个坏主意。uC/OS-II 提供了`OSTaskDelReq()`管理任务删除的功能，允许任务根据请求自行删除，从而能够正确释放其所有资源。即使没有这个，通过任务的正常 IPC 机制发送请求通常会更好（并且更便携）。

如果任务不是为按需自删除而设计的，那么您可以简单地使用 OSSuspend()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:58:36.090

一般来说，你不能在 ISR 中做一些事情：

1.  阻止信号量等
2.  在获取自旋锁时阻塞，如果它是单 CPU 系统
3.  导致页面错误，必须由虚拟内存子系统解决（即使用虚拟磁盘内存）

如果您在 ISR 中执行上述任何操作，您将陷入僵局。

`OSTaskDel()`可能正在做其中的一些事情。

# android - 如何在 GoogleCredential 中刷新 Token

> ID：12614246
> 
> 赞同：1
> 
> 时间：2012-09-27T04:46:26.347
> 
> 标签：android, google-api, google-drive-api

我已经实现了从*SharedPreferences*中保存的令牌中检索凭据的功能。

```
mCredential = new GoogleCredential.Builder()
                   .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
                   .setJsonFactory(mJsonFactory)
                   .setTransport(mHttpTransport).build();

mCredential.setRefreshToken(accessRefreshTokenSave);
mCredential.setAccessToken(accessTokenSave);

Long expires = mCredential.getExpiresInSeconds();
boolean result = mCredential.refreshToken(); 
```

令牌过期时。我们应该调用*mCredential.refreshToken()*来刷新令牌，对吗？

当我调用 refreshToken 时出现异常。

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
} 
```

我应该怎么做才能刷新令牌？我在[Using OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2WebServer)中找到了一些关于刷新令牌的文档。但我不知道如何在 Android 代码中实现它？是否有任何示例代码可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:57:01.463

通常（根据我的经验，因为我没有找到任何文档）“无效授权”意味着您存储的刷新令牌存在问题。这包括（我认为）：-

1.  用户已撤销
2.  您的测试导致生成多个刷新令牌。只有25个可能存在
3.  与存储的令牌关联的范围已更改

要恢复这种情况，请删除存储的刷新令牌并重新开始该过程。好消息是，除了用户撤销场景 (1) 之外，这是一个测试环境问题，并不一定意味着您有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T20:25:32.060

看看[https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)这是 Android 的 OAUTH，您可以检查问题出在哪里，或者使用项目中的示例代码。为了给您更多详细信息，您必须发布整个项目（例如将其链接到 GitHub）或发布感兴趣的类 ;-)

# php - 无法从 PHP 页面更新 sqlite3 数据库

> ID：12614251
> 
> 赞同：3
> 
> 时间：2012-09-27T04:47:36.843
> 
> 标签：php, sqlite

我已经在我的 android 板上安装了 PAW 服务器。在 PAW 服务器中，我添加了插件 PHP。从那里我可以打开我所有的 php 页面。

但问题是我无法对我的 SQlite3 数据库进行 INSERT 和 UPDATE 查询。

不知道这有什么问题。。

任何人都可以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:54:17.857

我每天都在使用[phpLiteAdmin和 PAW。](http://code.google.com/p/phpliteadmin/)因此，您可以尝试安装 phpLiteAdmin 来检查您的设置是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:31:21.777

确保放置 SQLite3 数据库的文件夹以及文件具有[写入权限](http://www.php.net/manual/en/ref.pdo-sqlite.php#57356)。您的`SELECT`语句可以正常工作，但`INSERT`不能`UPDATE`写入数据库。

我还找到了如何安装/验证 PAW PHP 运行时的链接：http: [//fun2code-blog.blogspot.com/2012/03/paw-runtime-php.html](http://fun2code-blog.blogspot.com/2012/03/paw-runtime-php.html)。

另外，看看这篇我发现一步一步解释如何使用正确权限从手机运行 sqlite 的帖子：[http ://code.google.com/p/phpliteadmin/issues/detail?id=66](http://code.google.com/p/phpliteadmin/issues/detail?id=66)

# iphone - 如何以编程方式更改 iPhone Objective-c 中无背景的 PNG 图像的对比度？

> ID：12614252
> 
> 赞同：1
> 
> 时间：2012-09-27T04:47:42.373
> 
> 标签：iphone, objective-c, core-graphics, contrast

我想以编程方式更改没有背景的 PNG 图像的对比度，或者我必须说透明背景。下图显示了示例。![在此处输入图像描述](../Images/86c2116f93e729563211c5023f9ee24b.png)

我能够改变与背景图像的对比度。但在没有背景的情况下无法更改它。我已经尝试过[这个](https://github.com/twenty3/GLImageProcessing)和[这个](https://github.com/esilverberg/ios-image-filters)但是两者都适用于背景图像。请帮助我实现这一目标或建议我任何解决方案或教程链接。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:37:07.590

```
CGImageRef inImage = self.CGImage;
CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));  
UInt8 * m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef);  

int length = CFDataGetLength(m_DataRef);

for (int i=0; i<length; i+=4)
{
    filter(m_PixelBuf,i,context);
}  
CGContextRef ctx = CGBitmapContextCreate(m_PixelBuf,  
                                         CGImageGetWidth(inImage),  
                                         CGImageGetHeight(inImage),  
                                         CGImageGetBitsPerComponent(inImage),
                                         CGImageGetBytesPerRow(inImage),  
                                         CGImageGetColorSpace(inImage),
                                         CGImageGetBitmapInfo(inImage) );     

CGImageRef imageRef = CGBitmapContextCreateImage(ctx);  
CGContextRelease(ctx);
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
CFRelease(m_DataRef);
return finalImage; 
```

# c# - ASP.NET MVC - JsonConvert.DeserializeObject 到 Html.DropDownList

> ID：12614258
> 
> 赞同：1
> 
> 时间：2012-09-27T04:48:16.263
> 
> 标签：c#, asp.net, asp.net-mvc-3, json.net, asp.net-4.5

我正在尝试以 Json 的形式读取一些数据，对其进行反序列化，并将其显示在我的视图中的 DropDownList 中。数据如下所示：

```
{
  "products": [
    {
      "body_html": "<p> ....</p>",
      "created_at": "2012-09-19T11:55:44-04:00",
      ...
      "tags": "Emotive, Flash Memory, MP3, Music",
      "variants": [
        {
          "compare_at_price": null,
          "created_at": "2012-09-19T11:55:44-04:00",
          ...
          "inventory_quantity": 10
        }
      ],
      "images": [
        {
          "created_at": "2012-09-19T11:55:44-04:00",
          "id": 850703190,
          ...
        }
      ]
    }
  ]
} 
```

我尝试了一些不同的方法，但都没有奏效。现在我的控制器中有：

```
var data = Newtonsoft.Json.Linq.JObject.Parse(productsJson.ToString())["products"];
SelectList productsData = JsonConvert.DeserializeObject<SelectList>(data.ToString());
ViewData["products"] = productsData; 
```

在视图中：

```
@Html.DropDownList("ProductList", (SelectList)ViewData["products"]) 
```

目前我收到以下错误：

> 无法创建和填充列表类型 System.Web.Mvc.SelectList。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：无法创建和填充列表类型 System.Web.Mvc.SelectList。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:42:20.923

我给你另一个解决方案，用 json 填充你的下拉列表

在我的控制器中，我有一个动作并用国家选择填写我的州

公共 JsonResult 状态（int countryId）{

```
 var stateList = CityRepository.GetList(countryId);
    return Json(stateList, JsonRequestBehavior.AllowGet);
} 
```

在我看来，我像这样绑定我的状态下拉列表

```
<script type="text/javascript">
    function cascadingdropdown() {
        $("#stateID").empty();
        $("#stateID").append("<option value='0'>--Select State--</option>");
        var countryID = $('#countryID').val();
        $.ajax({
            url: "/City/State",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        });
    } 
</script> 
```

我想这会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:30:41.723

`products`在您的 JSON 中与类型不兼容`SelectList`。尝试手动填写 SelectList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:39:37.367

首先，您应该将 json 解析为您的产品类型，然后您可以像这样使用：

```
var products = new SelectList(parsedProductList,"valueField here", "textField here"); 
```

# java - 通过触摸事件调整图标大小

> ID：12614265
> 
> 赞同：1
> 
> 时间：2012-09-27T04:49:00.290
> 
> 标签：java, android

我想做一个应用程序，我可以在同一个视图中导入多个**图标****`resize`**，我可以通过触摸每个图标，**`how I can resize icons by touch event ?`**.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:54:40.180

我建议尝试这个并缩放你的图像使用矩阵类。

```
Bitmap bmp = BitmapFactory.decodeResource(myContext.getResources(),drawableId);
            int w = bmp.getWidth();
            int h = bmp.getHeight();

Matrix bMatrix = new Matrix();
            bMatrix.postScale(scaleWidth, scaleHeight);
            Bitmap resizedBitmap = Bitmap.createBitmap(bmp, 0, 0, w, h , bMatrix, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:01:04.880

看看这个[输入事件](http://developer.android.com/guide/topics/ui/ui-events.html)可能对你有帮助..

# android - 将用户发送到android中的另一个应用程序

> ID：12614266
> 
> 赞同：1
> 
> 时间：2012-09-27T04:49:08.230
> 
> 标签：android

我是 android 新手，正在尝试制作一个应用程序，当用户按下应用程序 A 中的特定按钮时，他会被发送到应用程序 B。然后用户可以通过按下应用程序 B 中的另一个按钮返回应用程序 A。否内容从一个应用程序转移到另一个应用程序。

我想通过为这两个应用程序制作自定义意图来实现这一点。我应该如何开始？还有到底是`Broadcastreceiver`什么，我需要用它来解决上述问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:58:09.283

在另一个应用程序之间切换可以通过两种方式，即

1.）如果您知道要调用的应用程序的 MainActivity，则使用

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.setComponent(new ComponentName(
                                "package_name","package_name.MainActivity"));
    startActivity(intent); 
```

2.) 如果您不知道要调用的 MainActivity，您只需使用 PackageName，您可以使用

```
 Intent LaunchIntent = getPackageManager()
                                  .getLaunchIntentForPackage("package_name");
    startActivity(LaunchIntent); 
```

我认为您在这里不需要 BroadCastReceiver，因为当您想要捕获某些事件/动作时使用它，例如低电量。[有关更多详细信息，请在此处](https://stackoverflow.com/a/8889992/726863)查看我的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:54:04.333

请参阅[代码以明确启动外部应用程序](https://stackoverflow.com/questions/5940456/code-to-launch-external-app-explicitly)（尤其是[这个答案](https://stackoverflow.com/a/5940841/663469)）。您必须为每个应用程序创建一个自定义意图，然后显式调用该意图。

在应用程序清单中：

```
<intent-filter>
    <action android:name="com.mycompany.APP_A" />
</intent-filter> 
```

在 App B 清单中：

```
<intent-filter>
    <action android:name="com.mycompany.APP_B" />
</intent-filter> 
```

在 App A 按钮按下：

```
Intent intent = new Intent();
intent.setAction("com.mycompany.APP_B");
startActivity(intent); 
```

在 App B 按钮按下：

```
Intent intent = new Intent();
intent.setAction("com.mycompany.APP_A");
startActivity(intent); 
```

# regex - bash 扩展的正则表达式运算符

> ID：12614267
> 
> 赞同：3
> 
> 时间：2012-09-27T04:49:10.403
> 
> 标签：regex, bash

我正在尝试使用 bash 中可用的扩展正则表达式运算符（？、*、+、@、！）。手册说我只需要用括号括起来一个模式列表，然后在左括号之前使用运算符。因此，如果我想要零个或多个 a 的模式：

```
if [[ "$1" =~ *(a) ]]
then
   echo $1
fi 
```

但这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T05:25:03.690

每`man bash`：

> 额外的二元运算符 ,`=~`可用，其优先级与 `==`和相同`!=`。使用时，运算符右侧的字符串被视为扩展正则表达式并进行相应匹配（如 [regex(3)](http://man7.org/linux/man-pages/man3/regex.3.html)中）。如果字符串与模式匹配，则返回值为 0，否则为 1。如果正则表达式在语法上不正确，则条件表达式的返回值为 2。如果 `nocasematch` 启用了 shell 选项，则不考虑字母字符的大小写进行匹配。可以引用模式的任何部分以强制将其作为字符串匹配。正则表达式中带括号的子表达式匹配的子字符串保存在数组变量中`BASH_REMATCH`. 索引为 0的元素`BASH_REMATCH`是字符串中匹配整个正则表达式的部分。`BASH_REMATCH`索引为 *n*的元素是字符串中匹配第*n*个带括号的子表达式的部分。

我在这里引用了整件事，因为我认为了解它很有用。您在右侧使用标准 POSIX 扩展正则表达式。

特别是，右侧的表达式可能匹配左侧操作数的子字符串。因此，要匹配整个字符串，请使用`^`和`$`锚点：

```
if [[ "$1" =~ ^a*$ ]]
then
    echo $1
fi 
```

# android - 删除 ImageView 会导致某些手机崩溃

> ID：12614272
> 
> 赞同：3
> 
> 时间：2012-09-27T04:49:21.967
> 
> 标签：android, android-imageview

因此，由于某种原因，在我的三星 Galaxy S2（Android 版本 4.0.4）上尝试从我的 RelativeLayout 中删除 ImageView 时，我得到了 NPE。这是运行的代码行

```
mainView.removeView(someImageView) 
```

然而，在我的 Galaxy Nexus（Android 版本 4.1.1）上，它甚至没有打嗝。我在下面发布了 NPE。这不是删除 ImageView 的正确方法吗？基本上我已经完成了图像，我不再需要它显示了。任何想法或想法都会很棒。

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2488)
at android.view.View.draw(View.java:11150)
at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.draw(View.java:11150)
at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
at android.view.View.draw(View.java:11150)
at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.draw(View.java:11150)
at android.widget.FrameLayout.draw(FrameLayout.java:450)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2302)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:2127)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1733)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2545)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method)
!@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error 
```

编辑：我认为这与问题没有任何关系，但这已在翻译动画的“onAnimationEnd”方法中被删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:15:51.170

尝试将 imageView 的可见性设置为 GONE，例如：

```
someImageView.setVisibility(View.GONE); 
```

# unix - ed - 行编辑器（$p 做什么？）

> ID：12614277
> 
> 赞同：1
> 
> 时间：2012-09-27T04:49:49.213
> 
> 标签：unix, vim, vi, ed

我正在使用 ed 一个 unix 行编辑器，我正在阅读的书说要输入 1,$p （也适用于 vim）

经过反复试验，我发现第一个值表示行号，但 $p 的目的是什么？据我所知， 1 转到行首， $p 转到 EOF 并向我显示它拾取的所有内容。这是真的还是我离题了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:52:53.713

该`1,$`部分是一个范围。逗号分隔范围的开头和结尾。在这种情况下，1（第 1 行）是开始，$ (EOF) 是结束。意思是打印，这`p`是给定范围的命令，是的..它向您显示该范围内的内容。

在 vim 中，您可以查看`:help :range`并`:help :print`了解有关其工作原理的更多信息。这些类型的范围也被`sed`其他编辑器使用。

他们可能`1,$`在教程中使用了明确的术语，但请注意，您也可以将`%`其用作其等效术语。因此，`%p`还将打印文件中的所有行。

# jquery - 悬停时jquery图像调整大小在firefox上不能正常工作

> ID：12614282
> 
> 赞同：0
> 
> 时间：2012-09-27T04:50:26.517
> 
> 标签：jquery, css, firefox, hover, autoresize

我使用 jquery 和 css 制作了一个画廊。我做了改变图像的功能，它在“悬停/取消悬停/单击”时调整大小，因此它适合输出“div”。它在 Chrome 上运行良好，但 FireFox 有点混乱。它仅在另一个“悬停/取消悬停/单击”之后应用尺寸调整大小。

这是输出 div“幻灯片”的 HTML

```
<div class="leftPart">
    <div class="onFlyActualView">
        <div class="Slides"><img src="ecchi/000-Girl.jpg" alt="#" /></div>
    </div>
    <div class="onFlyDescription"></div>
</div> 
```

这是最小化的项目：

```
<div class="rightPart">
    <div class="onFlyMiniView">
        <ul class="oFMVLines">
            <li>
                <ul class="oFMVItems">
                    <li>0</li>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                </ul>
            </li>
            <li>
                <ul class="oFMVItems">
                    <li>4</li>
                    <li>5</li>
                    <li>6</li>
                    <li>7</li>
                </ul>
            </li>
        </ul>
      </div>
    </div> 
```

这是“.Slides”类的 CSS：

```
.Slides {
height: auto;
width: auto;    
margin: 0px auto;
position: static;
vertical-align: middle;
}

.Slides img
{
border: 1px solid #0F0;
display: block;
position: static;
margin-top: 5px;
margin-right: auto;
margin-bottom: 5px;
margin-left: auto;
height: auto;
width: auto;
} 
```

这是用于调整大小的 JQuery（curH、curW 是全局变量）：

```
function onFlyResize(iImage) {

    var max_size = 590;
    var divNum;
    var h, w;

    $(iImage).css({ height: 'auto', width: 'auto' });
    //$(iImage).css({ height: '0', width: '0' });
    $(iImage).each(function () {
        curH = parseFloat($(this).attr('height'));
        curW = parseFloat($(this).attr('width'));

        console.log('w: ' + curW + '; h: ' + curH);
        //$(this).css({ height: curH, width: curW });
        if (curH > curW) {
            //var h = max_size;
            divNum = curH / max_size;
            h = max_size;
            w = Math.ceil(curW / divNum);
            //alert("Height larger!");
        } else {
            divNum = curW / max_size;
            h = Math.ceil(curH / divNum);
            w = max_size;
            var tempVar = 0;
            tempVar = Math.ceil((max_size - curH) / 2);
            //alert("Width larger!");
        }
        $(this).css({ height: h, width: w });
    });
}; 
```

这是在“悬停/取消悬停/单击”时调用它的 JQuery：

```
function onFlyGalleryImplement() 
{
var CurrImg = $(".Slides").find('img:first').attr('src');
var cur_li_cont = "0";
$(".oFMVItems li").hover(
    function () {
        $(this).css({ border: "solid 2px #06C", margin: "-1px 1px 0px 3px" }).show(400);
        cur_li_cont = $(this).text();
        var set_img_to = "ecchi/00" + cur_li_cont + "-Girl.jpg";
        $(".Slides").find('img:first').attr({ src: set_img_to });
        $(".Slides").find('img:first').attr("alt", $(".Slides").find('img:first').attr("src"));
        $(".onFlyDescription").text("Height: " + $(".Slides img").attr('height') + " Width: " + $(".Slides img").attr('width') + ".");
        onFlyResize($(".Slides img"));
    },
    function () {
        $(this).css({ border: "solid 1px #333", margin: "0px 2px 0px 4px" });
        $(".Slides").find('img:first').attr("src", CurrImg);
        $(".onFlyDescription").text("Height: " + $(".Slides img").attr('height') + " Width: " + $(".Slides img").attr('width') + ".");
        onFlyResize($(".Slides img"));
    });
    onFlyResize($(".Slides img"));

$(".oFMVItems li").click(function () {
        cur_li_cont = $(this).text();
        var set_img_to = "ecchi/00" + cur_li_cont + "-Girl.jpg";
        $(".Slides").find('img:first').attr('src', set_img_to);
        CurrImg = set_img_to;
        $(".onFlyDescription").text("Height: " + $(".Slides img").attr('height') + " Width: " + $(".Slides img").attr('width') + ".");
        onFlyResize($(".Slides img"));
    });
    onFlyResize($(".Slides img"));
};

$(window).load(function () {
onFlyResize($(".Slides img")); //A fix to start image resied for the output restrictions.
});

$("document").ready(function () {
onFlyGalleryPreloadModule(); //Function for images preload.
onFlyGalleryImplement(); // Function that runs all gallery core.
}); 
```

就是这样......已经工作了将近 30 个小时，但无法找出问题所在。如果有人知道为什么会这样，他会为我节省很多时间。

ps：对不起，英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:57:19.013

而不是这个：

```
$(this).css({ height: h, width: w }); 
```

试试这个：

```
$(this).height(h);
$(this).width(w); 
```

因此，您的 jQuery 调整大小代码将变为：

```
function onFlyResize(iImage) {

    var max_size = 590;
    var divNum;
    var h, w;

    $(iImage).css({ height: 'auto', width: 'auto' });
    //$(iImage).css({ height: '0', width: '0' });
    $(iImage).each(function () {
        curH = parseFloat($(this).attr('height'));
        curW = parseFloat($(this).attr('width'));

        console.log('w: ' + curW + '; h: ' + curH);
        //$(this).css({ height: curH, width: curW });
        if (curH > curW) {
            //var h = max_size;
            divNum = curH / max_size;
            h = max_size;
            w = Math.ceil(curW / divNum);
            //alert("Height larger!");
        } else {
            divNum = curW / max_size;
            h = Math.ceil(curH / divNum);
            w = max_size;
            var tempVar = 0;
            tempVar = Math.ceil((max_size - curH) / 2);
            //alert("Width larger!");
        }
        $(this).height(h).width(w);
    });
}; 
```

`$(this).css({height: h, width: w});`不起作用的原因是：

*   您不能简单地提供高度和宽度的数值，您必须附加“px”

告诉我它是否仍然不起作用。

# javascript - 从 Web 浏览器获取 JavaScript 中服务器时间的最快方法是什么？

> ID：12614296
> 
> 赞同：1
> 
> 时间：2012-09-27T04:52:38.930
> 
> 标签：javascript, ajax, http, client-server, clock-synchronization

事实上，我想将客户端时间与服务器时间同步，[这个解决方案](https://stackoverflow.com/questions/1638337/the-best-way-to-synchronize-client-side-javascript-clock-with-server-date "将客户端 javascript 时钟与服务器日期同步的最佳方法")确实不错，但是还有其他更快的想法吗？换句话说，我们能否找到一种更快的方法来从 Web 浏览器获取 JavaScript 中的服务器时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:17:51.877

摇摆-您提到的链接是更好的方法，我认为您无论如何都不能在不知道服务器时间的情况下与服务器时钟同步。

在下面的例子中，他也给出了很好的图示。

[http://codemadesimple.wordpress.com/2012/06/18/timesync-with-asp-net-mvc-4/](http://codemadesimple.wordpress.com/2012/06/18/timesync-with-asp-net-mvc-4/)

# c# - 对象序列化/反序列化不起作用

> ID：12614298
> 
> 赞同：0
> 
> 时间：2012-09-27T04:52:52.173
> 
> 标签：c#, c#-4.0, serialization, json.net, deserialization

我有一个扩展方法，用于`System.Object`使用`Json.Net`. 这是我的扩展方法：

```
public static void SaveToFile(this object data, string FileName)
{
    using (StreamWriter writer = new StreamWriter(FileName))
    {
        string encode = WpfApplication.Helper.Encrypt(JsonConvert.SerializeObject(data));
        writer.Write(encode);
        writer.Close();
    }
}

public static void LoadFromFile<t>(this object data, string FileName)
{
    using (StreamReader reader = new StreamReader(FileName))
    {

        data = JsonConvert.DeserializeObject<t>(WpfApplication.Helper.Decrypt(reader.ReadToEnd()));
        reader.Close();
    }
} 
```

这是我要反序列化的类：

```
public class CardPack
{
    #region Properties
    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private List<FlashCard> cards;

    public List<FlashCard> Cards
    {
        get { return cards; }
        set { cards = value; }
    }

    private bool registered;
    public bool Registered
    {
        get { return registered; }
        set { registered = value; }
    }

    private int currentCardIndex;

    public int CurrentCardIndex
    {
        get { return currentCardIndex; }
        set { currentCardIndex = value; }
    }

    public string RegisterKey { get; set; }

    public string ViewName { get; set; }

    public List<FlashCard> TodayCards { get; set; }
    #endregion
    ~CardPack()
    {
        foreach (FlashCard card in cards)
        {
            card.Check();
        }
        currentCardIndex = 0;
        TodayCards = null;
        this.SaveToFile(string.Format(System.IO.Path.GetDirectoryName(
  System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase).Split(@"file:\\")[1] + @"\Packs\{0}.json", name));
    } 
```

但是每当我反序列化这个类`cards`是空的，我不知道如何解决这个问题。有谁能够帮助我？

**更新** 当我有这个代码时，我发现了错误：

```
public CardPack(string Name)
    {
        this.name = Name;
        this.LoadFromFile<CardPack>(string.Format(System.IO.Path.GetDirectoryName(
  System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase).Split(@"file:\\")[1] + @"\Packs\{0}.json", name));
        foreach (var item in cards)
        {
            if (item.NextTime == null)
            {
                int a = 0;
            }
        }
        TodayCards = cards.Where(c => c.NextTime.Date == DateTime.Today).ToList();
    } 
```

因为应用程序在尝试运行时关闭`foreach (var item in cards)`！我[在这里](https://stackoverflow.com/questions/12509607/linq-query-close-my-wpf-application)问，发现`cards`是空的！

**update2**我`CardPack`用稍微不同的结构序列化了对象。在以前的结构中，`Cards`属性是只读的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:17:46.137

我发现`data = JsonConvert.DeserializeObject<t>(WpfApplication.Helper.Decrypt(reader.ReadToEnd()));`in 扩展方法不会更改为“数据”类，然后`Cards`in`CardPack`始终为空。稍后我会问一个问题以找出为什么我不能从它的扩展方法中设置类。

# nhibernate - ActiveRecord 和 LINQ 查询的问题

> ID：12614302
> 
> 赞同：0
> 
> 时间：2012-09-27T04:53:01.583
> 
> 标签：nhibernate, activerecord, linq-to-nhibernate, castle-activerecord

我有一个简单的课程：

```
public class User : ActiveRecordLinqBase<User>
{
    [PrimaryKey(Column = "user_id", Length = 20)]
    public string Id { get; set; }

    [Property(Column = "password", Length = 16)]
    public string Password { get; set; }
    ...
} 
```

我创建了以下存储库：

```
public class SqlRepository<T> : IRepository<T> where T : ActiveRecordLinqBase<T>, new() {
    public void Add(T entity) {
        entity.SaveAndFlush();
    }

    public void Remove(T entity) {
        entity.DeleteAndFlush();
    }

    public void Modify(T entity) {
        entity.UpdateAndFlush(); ;
    }

    ...

    public IEnumerable<T> FindAll(Func<T, bool> predicate) {
        return ActiveRecordLinqBase<T>.Queryable.Where(predicate);
    }
} 
```

现在，在运行以下单元测试时（针对 MySQL 数据库）：

```
[Test]
public void Test_Sample() {
    var repo = new SqlRepository<T>();
    repo.Add("john.doe", "keyword1");
    repo.Add("other.user", "keyword2");

    var users = repo.FindAll(x => x.Username.Contains("john")).ToList();

    Assert.AreEqual(1, users.Count);
} 
```

...我得到以下 SQL 查询：

> 选择 this_.user_id 作为 user1_0_0_，this_.password 作为 password0_0_，this_.role 作为 role0_0_ FROM users this_

条款在哪里`WHERE`？

如果我直接在同一个测试中执行以下操作...

```
var users = User.Queryable.Where(x => x.Username.Contains("john")); 
```

我得到以下 SQL：

> 选择 this_.user_id 作为 user1_0_0_, this_.password 作为 password0_0_, this_.role 作为 role0_0_ FROM users this_ WHERE this_.user_id like ?p0;?p0 = '%john%'

**难道我做错了什么？**

**这两个查询有什么区别？**

* * *

**编辑：**我也试过

```
return ActiveRecordLinq.AsQueryable<T>().Where(predicate); 
```

没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:08:25.353

现在这只是因为我喜欢代码，有时我会注意到一些东西......我不是 Active Record 方面的专家，所以这只是一个猜测......

也许您应该将`FindAll`方法的签名从

```
public IEnumerable<T> FindAll(Func<T, bool> predicate) 
```

进入

```
public IEnumerable<T> FindAll(Expression<Func<T, bool>> predicate) 
```

这将允许您达到正确的过载`Where`，这很可能是您正在寻找的过载。

这是因为`Func`不能以同样的方式反映`Expression of Func`罐头。

# iphone - iPhone：如何制作可扩展按钮（如弹出）

> ID：12614303
> 
> 赞同：1
> 
> 时间：2012-09-27T04:53:01.927
> 
> 标签：iphone, objective-c, ios, cocoa

我想制作一个按钮，在单击后展开，然后展开以包含我的表格视图。喜欢[快速图形应用程序](http://itunes.apple.com/us/app/quick-graph-your-scientific/id292412367?mt=8)

![未展开](../Images/058fd33df3adb409a6afeb830d93c452.png)

![展开](../Images/07adfd0751ccc6d848450ef8bfb3ba11.png)

在这个应用程序中，它随着动画而扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:55:00.473

要么您必须使用**核心图形**创建按钮，要么只需使用**两个图像**作为按钮状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:00:06.977

您可以做的是`UIButton`单击显示`UITableView`动画。另外将`UIButton`图像更改为向下箭头图像。这可以简单地完成。另外根据您显示的图像，您真的需要 tableview 吗？我认为您也可以制作 a`UIView`并将 a`UILabel`放入其中。考虑一下 。需要任何进一步的查询或代码帮助，请回复:)

用于添加边框使用

```
 Table.layer.borderWidth = 10;
 Table.layer.borderColor = [[UIColor grayColor]CGColor];

 Button.layer.borderWidth = 10;
 Button.layer.borderColor = [[UIColor grayColor]CGColor]; 
```

# jquery - 在 jQuery 中获取 SELECT 的值和文本

> ID：12614308
> 
> 赞同：37
> 
> 时间：2012-09-27T04:53:43.733
> 
> 标签：jquery, select

> **可能重复：**
> [在选择框中获取所选选项标签的值](https://stackoverflow.com/questions/7380604/getting-the-value-of-the-selected-option-tag-in-a-select-box)

对于 SELECT 框，如何在 jQuery 中获取所选项目的值和文本？

例如，

```
<option value="value">text</option> 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-27T04:57:10.583

```
<select id="ddlViewBy">
    <option value="value">text</option>
</select> 
```

jQuery

```
var txt = $("#ddlViewBy option:selected").text();
var val = $("#ddlViewBy option:selected").val(); 
```

**[JS 小提琴演示](http://jsfiddle.net/cxgus/1/)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-27T04:57:21.150

```
$("#yourdropdownid option:selected").text(); // selected option text
$("#yourdropdownid").val(); // selected option value 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-27T04:56:36.517

```
$('select').val()  // Get's the value

$('select option:selected').val() ; // Get's the value

$('select').find('option:selected').val() ; // Get's the value

$('select option:selected').text()  // Gets you the text of the selected option 
```

[检查小提琴](http://jsfiddle.net/sushanth009/zXcHB/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-27T04:59:48.990

您可以这样做，以获取当前选定的值：

```
$('#myDropdownID').val(); 
```

& 获取当前选中的文本：

```
$('#myDropdownID:selected').text(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T04:57:03.400

基于你唯一的`jQuery`标签:)

**HTML**

```
<select id="my-select">
<option value="1">This is text 1</option>
<option value="2">This is text 2</option>
<option value="3">This is text 3</option>
</select> 
```

**对于文本**——

```
$(document).ready(function() {
    $("#my-select").change(function() {
        alert($('#my-select option:selected').html());
    });
}); 
```

**为了价值**——

```
$(document).ready(function() {
    $("#my-select").change(function() {
        alert($(this).val());
    });
}); 
```

# linux - Shell脚本密码暴力破解

> ID：12614318
> 
> 赞同：1
> 
> 时间：2012-09-27T04:54:58.087
> 
> 标签：linux, bash

嗨，首先道歉，如果这措辞不好，会尽量解释清楚。

我有一个名为 testpassword 的二进制文件，用法可能很容易解释。如下

```
./testpassword hello 
```

如果你好是**正确**的密码，那么输出将是

```
pass=correct 
```

如果 hello密码**不正确**，输出将是

```
pass=incorrect 
```

我是 Linux 和 shell 脚本的完整初学者，但制作了一个非常粗糙 + 简单的脚本，称为 bruteforce.sh。使用单词列表执行“蛮力”攻击。内容如下

```
./testpassword hello
./testpassword jelly
./testpassword watermelon
./testpassword anotherword  
etc.. 
```

经过相当多的观察后，我在一个新脚本中运行了以下内容，以一种非常粗略的方式在成功时通知我

```
./bruteforce.sh 2 2>&1 >/dev/null | grep -n pass=correct 
```

输出将类似于`12: pass=correct`. 其中 12 是 bruteforce.sh 中的行号

当我在屏幕上看到这个时，我可以 ctrl-c 并运行

```
awk 'NR==12' bruteforce.sh 
```

以获得对应于行号的正确通行证。我只是想知道是否有更简单或更清洁的方法来做这件事的任何部分

在此先感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:05:31.913

可能是这样的。

```
for i in {1..1000}; do
    (echo -n "$i: " && ./testpassword $i) | grep pass=correct
done 
```

这只是在脚本输出之前回显当前密码。当然，`{1..1000}`可以替换为您打算使用的单词列表。

# ios - 如何在我的网络浏览器和 iPhone 应用程序上同步 Facebook 聊天？

> ID：12614322
> 
> 赞同：1
> 
> 时间：2012-09-27T04:55:11.883
> 
> 标签：ios, facebook, xmpp, chat, xmppframework

我使用 XMPP 框架为 iPhone 开发了一个 Facebook 聊天应用程序。

如何在浏览器和我的应用程序中的 Facebook 聊天之间同步。

如果我从我的应用程序向用户发送消息，它会显示在浏览器中。如果用户给我发消息。它显示在两个地方。

我无法处理的情况是当我从浏览器发送消息时。它也应该出现在我的应用程序中，但它没有。

我希望能够在多个设备上运行我的应用程序，并且我发送或接收的任何消息都应该显示在所有设备上。

# ios - 为模态转换设置委托

> ID：12614323
> 
> 赞同：0
> 
> 时间：2012-09-27T04:55:19.090
> 
> 标签：ios

如何为模态转换设置委托？

目前我有类似的东西：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [segue.destinationViewController setDelegate:self];
}

- (void)nextViewController:(NextViewController *)sender setSomething(NSString *)something
{
    NSLog(@"Something happened in nextviewcontroller");
} 
```

如果转换是推送，则此方法有效，但当它是模态（箭头指向导航控制器）时，什么也没有发生。

为什么会这样，什么是解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:08:58.767

你在用故事板吗？如果没有，您应该在应用程序委托上添加导航控制器，并且 pushviewcontroller 将工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:47:39.683

在 prepareForSegue 中，我需要将委托设置为导航控制器的 topView。

像这样：

```
ExampleViewController *evc;
evc = (ExampleViewController *)[segue.destinationViewController topViewController];
[evc setDelegate:self]; 
```

# iphone - 在 PDF iphone 中绘图的日语字符编码问题

> ID：12614328
> 
> 赞同：1
> 
> 时间：2012-09-27T04:56:27.557
> 
> 标签：iphone, ios, encoding, c-strings

我正在一个应用程序中工作，该应用程序使用用户信息创建 pdf。但是我坚持使用无法在 pdf 上绘制的日文单词。我认为这是编码问题。

字为琨。

我目前正在使用`NSShiftJISStringEncoding`将`NSString`对象转换为`CString`使用函数`cStringUsingEncoding:`。

我尝试了文档中定义的几乎所有其他编码`NSString`。

```
 NSASCIIStringEncoding = 1,
   NSNEXTSTEPStringEncoding = 2,
   NSJapaneseEUCStringEncoding = 3,
   NSUTF8StringEncoding = 4,
   NSISOLatin1StringEncoding = 5,
   NSSymbolStringEncoding = 6,
   NSNonLossyASCIIStringEncoding = 7,
   NSShiftJISStringEncoding = 8,
   NSISOLatin2StringEncoding = 9,
   NSUnicodeStringEncoding = 10,
   NSWindowsCP1251StringEncoding = 11,
   NSWindowsCP1252StringEncoding = 12,
   NSWindowsCP1253StringEncoding = 13,
   NSWindowsCP1254StringEncoding = 14,
   NSWindowsCP1250StringEncoding = 15,
   NSISO2022JPStringEncoding = 21,
   NSMacOSRomanStringEncoding = 30,
   NSUTF16StringEncoding = NSUnicodeStringEncoding,
   NSUTF16BigEndianStringEncoding = 0x90000100,
   NSUTF16LittleEndianStringEncoding = 0x94000100,
   NSUTF32StringEncoding = 0x8c000100,
   NSUTF32BigEndianStringEncoding = 0x98000100,
   NSUTF32LittleEndianStringEncoding = 0x9c000100,
   NSProprietaryStringEncoding = 65536 
```

任何帮助都将是可观的。

# objective-c - -（无效）drawRect：（CGRect）rect；几乎耗尽了所有 iPhone CPU

> ID：12614331
> 
> 赞同：1
> 
> 时间：2012-09-27T04:56:33.397
> 
> 标签：objective-c, ios, core-animation, core-graphics

```
- (void)drawRect:(CGRect)rect{

    float sliceSize = rect.size.width / imagesShownAtOnce;
    //Apply our clipping region and fill it with black
    [clippingRegion addClip];
    [clippingRegion fill];

    //Draw the 3 images (+1 for inbetween), with our scroll amount.
    CGPoint loc;
    for (int i=0;i<imagesShownAtOnce+1;i++){
        loc = CGPointMake(rect.origin.x+(i*sliceSize)-imageScroll, rect.origin.y);
        [[buttonImages objectAtIndex:i] drawAtPoint:loc];
    }

    //Draw the text region background
    [[UIColor blackColor] setFill];
    [textRegion fillWithBlendMode:kCGBlendModeNormal alpha:0.4f];

     //Draw the actual text.
    CGRect textRectangle = CGRectMake(rect.origin.x+16,rect.origin.y+rect.size.height*4/5.6,rect.size.width/1.5,rect.size.height/3);
    [[UIColor whiteColor] setFill];
    [buttonText drawInRect:textRectangle withFont:[UIFont fontWithName:@"Avenir-HeavyOblique" size:22]];
} 
```

`clippingRegion`并给我我想要的圆角矩形（第一个是剪切区域，第二个是我的文本的覆盖`textRegion`）`UIBezierPaths`

中间部分是绘制 3 个图像并让它们滚动，我从 a 中每 2 次刷新更新一次`CADisplayLink`，并且通过调用使绘制区域无效`[self setNeedsDisplay]`，并且还增加了我的 imageScroll 变量。

* * *

现在已经完成了背景信息，这是我的问题：

它运行，甚至运行平稳。但它消耗了绝对大量的 CPU 时间（80%+）！！我如何将它推到手机上的 GPU 上？有人告诉我 CALayers，但我以前从未处理过它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:10:20.273

将绘图的每个组件绘制一次（视图或图层）并让它保存缓存的绘图。然后你只需移动或变换每个组件，正如你所说，这一切都是由 GPU 完成的。

您可以使用单个视图或单个层来执行此操作，但这并不重要（视图*是*一个层，在引擎盖下）。关键是当你真正想要的只是移动相同的持久部分时，没有必要不断地从头开始重新绘制。

学习 CALayer 是个好主意，因为它实际上是 iOS 上所有绘图的基础。还有什么比这更重要的呢？

# python - TypeError：'bool' 对象不可调用

> ID：12614334
> 
> 赞同：38
> 
> 时间：2012-09-27T04:56:39.520
> 
> 标签：python

我是python的新手。我有一个错误

```
while not cls.isFilled(row,col,myMap):
TypeError: 'bool' object is not callable 
```

请您指导如何解决这个问题？第一个“if”检查很好，但“while not”有这个错误。

```
def main(cls, args):
        ...
        if cls.isFilled(row,col,myMap):
            numCycles = 0

        while not cls.isFilled(row,col,myMap):
            numCycles += 1

def isFilled(cls,row,col,myMap):
        cls.isFilled = True
        ## for-while
        i = 0
        while i < row:
            ## for-while
            j = 0
            while j < col:
                if not myMap[i][j].getIsActive():
                    cls.isFilled = False
                j += 1
            i += 1
        return cls.isFilled 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-27T05:01:04.227

你做`cls.isFilled = True`。这会覆盖调用的方法`isFilled`并将其替换为值 True。那个方法现在已经消失了，你不能再调用它了。因此，当您尝试再次调用它时，您会收到一个错误，因为它不再存在。

解决方案是为变量使用与方法不同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T07:15:33.593

实际上，您可以通过以下步骤修复它 -

1.  做`cls.__dict__`
2.  这将为您提供字典格式的输出，该输出将包含`{'isFilled':True}`或`{'isFilled':False}`取决于您设置的内容。
3.  删除此条目 -`del cls.__dict__['isFilled']`
4.  您现在可以调用该方法。

在这种情况下，我们删除了覆盖 BrenBarn 提到的方法的条目。

# c# - System.OutofMemory 异常

> ID：12614335
> 
> 赞同：0
> 
> 时间：2012-09-27T04:56:43.210
> 
> 标签：c#, winforms

我有一个 UI，winform，它有很多控件，如 tabcontrols、大量文本框（跨选项卡最少 25 个）组合框、复选框、按钮、标签、树控件等。

这些控件中的大多数都注册了 ctrl 事件，例如 textchanged、click 等……因为我遇到了内存不足异常，所以我几乎没有什么查询：

问题：

1.  在表单的 dispose 函数中应该调用每个 ctrl 的 dispose 吗？
2.  ctrls 订阅的事件，如 textchanged、click 事件等是否应该在 dispose 函数中取消注册？GC 是否负责取消注册为 ctrls 添加的事件，因为在设计器中添加了代码片段？

一些信息：该应用程序在 2GB 内存机器上进行了多达 100 次迭代的稳定性测试。每次迭代它都会执行相同的测试（启动对话框，进行一些点击或编辑一些值，然后关闭）。它运行了将近8个小时。在第 45 次或第 46 次迭代时，它抛出了这个异常。是的，对话框中的所有控件都注册了一个事件或其他事件。一些文字改变了一些checkedchanged或点击等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:29:44.017

我认为这里没有足够的信息来告诉你到底发生了什么。这将需要您对代码进行一些仔细的分析，但首先要做的是通过内存分析器运行您的应用程序。例如，[ANTS Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)，但实际上您可以访问的任何内容都可以）以查看实际情况。

通常，您*不需要*显式处理每个控件，但如果您订阅事件，这可能会导致事情在内存中停留的时间比平时更长。[这个问题](https://stackoverflow.com/questions/3662842/how-do-events-cause-memory-leaks-in-c-sharp-and-how-do-weak-references-help-miti)有血淋淋的细节，但简而言之，你想取消订阅或使用弱引用来解决这个问题；无需枚举所有表单控件并调用`Dispose`. 如果我记得，无论如何都应该调用它[`Form.Close()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close%28VS.80%29.aspx)，除非它是 MDI 表单并且在`Close`调用时不可见。

您还应该查看您正在存储哪些数据以及如何存储，以及您是否正确处理了您的应用程序可能使用的任何资源。

如果您在 32 位系统上运行，您可能还会在每个进程内存限制 2GB 的情况下运行，例如，如果您保持一个`List`增长到 1GB 并且必须调整大小的周围，您可以达到这个限制。

因此，用探查器武装自己并进行调查。:)

# php - PHP问号运算符和字符串连接

> ID：12614336
> 
> 赞同：3
> 
> 时间：2012-09-27T04:56:58.187
> 
> 标签：php, string, codeigniter

我仍然是 php 的新手，我正在为我的后端框架使用 codeigniter。我有一个`table.php`文件可以实时生成一个 html 表。然后，我遇到了一些问题。

```
$output_string .= "<td>".($row->isactive == "0") ? "Activated":"Deactivated"."</td>"; 
```

使用上面的代码我什么也得不到，但有一点改变：

```
$isactive = ($row->isactive == "0") ? "Activated":"Deactivated";
$output_string .= "<td>".$isactive."</td>"; 
```

我得到了我的结果，所以我的问题是，为什么？

PHP不支持字符串连接中的问号运算符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:59:52.377

它确实支持它，只需在它周围加上一些括号：

```
$output_string .= "<td>".(($row->isactive == "0") ? "Activated":"Deactivated")."</td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:00:06.017

你没有放足够的括号。试试这个：

```
$output_string .= "<td>".(($row->isactive == "0") ? "Activated":"Deactivated")."</td>"; 
```

请注意额外的一组括号。

如果你只是放：

```
$output_string .= "<td>".($row->isactive == "0") ? "Activated":"Deactivated"."</td>"; 
```

PHP 解释器会尝试并显示`$row->isactive == "0"`，所以要让它做你想做的事，你必须将它括在一组额外的括号中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:01:04.773

不是那样，而是在“：”运算符之后

```
:"Deactivated"."</td>"; 
```

应该被视为错误的单一陈述，如果你想像这样尝试

```
$output_string .= "<td>".(($row->isactive == "0") ? "Activated":"Deactivated")."</td>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T05:02:03.430

您应该将整个三元运算括在`()`括号中

```
$output_string .= "<td>".($row->isactive == "0" ? "Activated":"Deactivated")."</td>"; 
```

那会给你你想要的。

我对发生的事情的猜测是，`"<td>"`附加了布尔结果，`($row->isactive == "0")`你总是会得到`"Activated</td>"`你的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T05:10:53.093

PHP 中的连接具有比三元运算符更高的优先级。所以首先执行表达式`"<td>".($row->isactive == "0")`，然后执行它的结果表达式（它总是相等`true`，因为将非空字符串转换为布尔值解释为`true`）。因此，您的代码的结果始终是 word `Activated`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T05:00:38.373

`()`当您像这样在连接之后和之前使用它时它会起作用

```
$output_string .= "<td>".(($row->isactive == "0") ? "Activated":"Deactivated")."</td>"; 
```

# ruby - Datamapper：删除所有没有关系的记录

> ID：12614344
> 
> 赞同：0
> 
> 时间：2012-09-27T04:57:26.487
> 
> 标签：ruby, postgresql, datamapper

我将如何从数据映射器中没有关系的表中删除所有记录？有问题的表是一个帖子和标签表（在多对多关系中），我想删除所有没有标签的帖子。由于某种原因，尝试时`Post.all(:tags => nil)`出现此错误：

```
DataObjects::SyntaxError: ERROR:  operator does not exist: integer = character varying
LINE 1: ...amp", "comment_count" FROM "posts" WHERE NOT("id" IN (SELECT...
                                                             ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
 (code: 52461700, sql state: 42883, query: SELECT "id", "timestamp", "source_network", "source_post_id", "source_user_id", "source_link", "img_full_url", "img_thumb_url", "approved", "review_timestamp", "comment_count" FROM "posts" WHERE NOT("id" IN (SELECT "tags"."name" FROM "tags" INNER JOIN "post_tags" ON "tags"."name" = "post_tags"."tag_name" INNER JOIN "posts" ON "post_tags"."post_id" = "posts"."id")) ORDER BY "id", uri: postgres:tom@localhost/hash_tagging?scheme=postgres&user=tom&password=&host=localhost&port=&path=/hash_tagging&query=&fragment=&adapter=postgres)
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:147:in `execute_reader'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:147:in `block in read'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:276:in `with_connection'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:141:in `read'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/repository.rb:162:in `read'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/collection.rb:1117:in `lazy_load'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/lazy_array.rb:409:in `each'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/collection.rb:504:in `each'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/collection.rb:976:in `map'
  from /Users/tom/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/collection.rb:976:in `inspect'
  from /Users/tom/.rbenv/versions/1.9.3-p194/bin/irb:12:in `<main>' 
```

有谁知道我做错了什么？

PS标签表只有一列（名称，是一个键），关系是datamapper自动生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:19:31.777

更改`NOT("id" IN`为`"id" NOT IN`

```
 DELETE FROM posts WHERE id NOT IN (SELECT id FROM tags) 
```

# c# - C# Form Application int to string 错误

> ID：12614348
> 
> 赞同：0
> 
> 时间：2012-09-27T04:58:26.100
> 
> 标签：c#, forms, if-statement

我真的坚持这一点 - 我正在尝试创建一个 if 语句并在文本框中显示分配给变量的值。我不断遇到“无法将 int 隐式转换为字符串”的构建错误。谢谢。

```
 int n1;
        int userInput = int.Parse(textBox1.Text);
        if (userInput == 4)
        {
            n1 = 60;

        }
        else if (userInput ==3)
       { 
             n1=40
       }

        {
        textBox2.Text = (n1); //"Cannot implicity convert int to string" 
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:03:13.790

您已声明`n1`为`int`. 的`Text`属性`textBox2`是 type `string`。因此，您首先必须转换`n1`为，`string`然后才能将其分配给`Text`.

```
textBox2.Text = n1.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:01:56.323

该错误是不言自明的 - 编译器无法自动将整数转换为字符串：

```
textBox2.Text = n1.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:01:59.817

使用方法`ToString()`

```
textBox2.Text = n1.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T05:47:28.890

您必须将 int 转换为字符串

```
textBox2.Text=n1.TOString(); 
```

或者

```
textBox2.Text=Convert.ToString(n1); 
```

# tomcat - 如何将 Liferay Tomcat bundle 中开发的 portet 部署到 Jboss bundle

> ID：12614352
> 
> 赞同：0
> 
> 时间：2012-09-27T04:58:37.657
> 
> 标签：tomcat, jboss, liferay

我目前正在Tomcat bundle 6.1.1 中开发我的liferay portlet。我需要将开发的portlet 部署到liferay Jboss bundle 并运行它。请帮助执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:43:01.013

这个问题似乎与这个[问题有关](https://stackoverflow.com/q/12576268/468763)，我已经提供了对该问题的详细[答案](https://stackoverflow.com/a/12576521/468763)，可能会对您有所帮助。

但我会简短地提到回答你的问题：

1.  在 Tomcat 或 Jboss 上部署插件的方式没有改变，它们都接受 WAR 文件。
2.  因此，您只需通过插件 SDK 为您的 portlet 创建 WAR 文件，并在`/plugins-sdk/dist`文件夹中创建
3.  然后将它部署在一个正在运行的JBOSS 上，即将创建的portlet WAR 文件复制到目录中`/liferay_home/deploy/`，liferay 将部署它。

**编辑**- 另一种方法：另一方面，如果您想通过`plugins-sdk`ie 通过`ant`命令直接构建和部署，那么您将不得不更改`build.<machine-name>.properties`指向`Jboss`而不是`Tomcat`捆绑包。

我建议第一种方法，因为您已经有了一个工作，`WAR`那么为什么要再次构建它`ant`然后部署。

希望这能回答你的问题。

# objective-c - 弹出当前 UIViewController 并推送另一个

> ID：12614353
> 
> 赞同：0
> 
> 时间：2012-09-27T04:58:46.860
> 
> 标签：objective-c, ios

我目前正在显示 UIViewController `B`。我想推 UIViewController`C`并立即删除`B`从导航堆栈中删除，同时保留所有动画。最好的方法是什么？

最终堆栈将是`A`, `C`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:01:42.243

我不确定这是否是个好主意，但你可以这样做。

在您的 C 视图控制器中，例如在 viewDidLoad 方法中放置此代码

```
NSMutableArray *viewControllerAfterRemove=[[NSMutableArray alloc]initWithArray:self.navigationController.viewControllers];
[viewControllerAfterRemove removeObjectAtIndex:1];
self.navigationController.viewControllers=viewControllerAfterRemove; 
```

现在，当您在**C 视图控制器**中使用 popViewController 时，它会导航回**A 视图控制器**。

# json - Struts 2 + JSON + AJAX pdf 下载问题

> ID：12614354
> 
> 赞同：1
> 
> 时间：2012-09-27T04:58:56.137
> 
> 标签：json, jquery, struts2

我有一个脚本，在其中单击链接我需要下载服务器上临时文件夹中的 PDF 文件，我通过调用 AJAX 函数来做到这一点。该 AJAX 函数正在调用 struts 2 操作方法，该方法正在读取文件的内容并将其写入输出流。

现在的问题是临时文件夹中是否不存在该文件。那是抛出异常。所以我决定使用json来处理它。如果该文件存在于临时文件夹中。我正在将密钥映射到

```
jsonObject.put("exist", true) 
```

如果临时文件夹中不存在该文件。我正在将密钥映射到

```
jsonObject.put("exist", false) 
```

在 struts.xml 我用这种方式处理动作

```
<action name="DisplayStaticPdf"
        class="com.ui.DisplayStaticPdfAction">
<result name="success" type="json"/>
</action> 
```

在脚本中我通过这种方式处理它

```
function downloadDoc(actionName){
            $.ajax({
            url: actionName,
            type: 'post',
            dataType: 'json',
            error: function(data) {
                if(data.exist!= null && data.exist == 'false'){
                    alert('The document you are trying to download does not exist at location.  Please make sure file exist .');
                }
            },
            success: function() {
            }
        });
     } 
```

当文件不存在时，它会向我显示相同的警报。但是当文件不存在时，它什么也不做，也不会下载临时文件夹中的 pdf。

我的动作课看起来像->

```
String pdfFileName = null;
BufferedInputStream bis = null;
BufferedOutputStream bos = null;
String rawFileName = "abc.pdf";
String returnString = "fileNotExist";
jsonObject = new JSONObject();

ServletOutputStream out = response.getOutputStream();
response.setContentType("application/pdf");
URL url = new URL(fileURL);

URLConnection conn = url.openConnection();
if (conn.getContentLength() != 0 && conn.getContentLength() != -1)
{
  bis = new BufferedInputStream(conn.getInputStream());
  bos = new BufferedOutputStream(out);

  try
  {
    byte[] buff = new byte[2048];
    int bytesRead;
    while (-1 != (bytesRead = bis.read(buff, 0, buff.length)))
    {
      bos.write(buff, 0, bytesRead);
    }
    jsonObject.put("exist", true);
  }
  returnString = SUCCESS;
}
else
{
  jsonObject.put("exist", false);
  returnString ="fileNotExist";
}
return returnString; 
```

希望你们能理解我的问题。无论我是否以正确的方式做这件事，任何人都请说明这一点。或者有没有其他简单的方法可以做到这一点

谢谢，
安基特

# android - 无法从使用通知的待处理意图调用的意图中获取额外信息？

> ID：12614358
> 
> 赞同：0
> 
> 时间：2012-09-27T04:59:30.893
> 
> 标签：android, android-intent, notifications

下面我有两个通知的代码，并且在意图我正在传递额外内容`key1`，`key2`但`NotificationPillDescription.class`我只能使用 getExtras 获取 key1。

// 第一次通知的通知代码

```
Notification notification = new Notification(R.drawable.ic_launcher, "Take your morning pill!", System.currentTimeMillis());
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notifyIntent = new Intent(getApplicationContext(), NotificationPillDescription.class);
    Bundle extras = new Bundle();
    extras.putString("Key1", String.valueOf(1));
    notifyIntent.putExtras(extras);

    contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notifyIntent, 0);
    notification.setLatestEventInfo(this, "Take your Morning pill!", "My Drug", contentIntent);
                        notificationManager.notify(dataProvider.notificationId++, notification); 
```

// 第二次通知的通知代码

```
notifyIntent = new Intent(getApplicationContext(), NotificationPillDescription.class);
        Bundle extras = new Bundle();
        extras.putString("Key2", String.valueOf(2));
        notifyIntent.putExtras(extras);

        contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notifyIntent, 0);
        notification.setLatestEventInfo(this, "Take your Morning pill!", "My Drug", contentIntent);
                            notificationManager.notify(dataProvider.notificationId++, notification); 
```

//NotificationPillDescription.class 的代码

```
Bundle extras = getIntent().getExtras();
            if(extras != null){
                if(extras.containsKey(String.valueOf(1)))
                {
                   Log.d("Pill Id0",extras.getString(String.valueOf(1)) );

                }
                else
                {
                    Log.d("Pill Id1",extras.getString(String.valueOf(2)) );
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:15:35.197

看看这里。它描述了如何传递一个包。我认为您的 extras.getstring 可能还不够。如果你使用的是 putextras，你可能也不需要声明一个包。

这里：

[在 startActivity() 上传递一个 Bundle？](https://stackoverflow.com/questions/768969/passing-a-bundle-on-startactivity)

这也可能有帮助：

[putExtras 多个 putString 不起作用](https://stackoverflow.com/questions/9241646/putextras-multiple-putstring-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:09:14.883

它应该是，

`extras.getString("Key1")`和 `extras.getString("Key2")`

代替

`extras.getString(String.valueOf(1))`&&`extras.getString(String.valueOf(2))`

# c# - 即使鼠标没有过度集中控制也捕获鼠标滚轮事件

> ID：12614361
> 
> 赞同：0
> 
> 时间：2012-09-27T04:59:41.260
> 
> 标签：c#, .net, wpf

我使用了许多滚动控件（每个控件都是一个用户控件）。如果鼠标在焦点控件上方，现在鼠标滚轮可以工作当鼠标滚轮旋转时如何实现，无论是什么控件，具有焦点的控件都会接收输入鼠标光标结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:35:25.330

您必须使用名为 SetWindowsHookEx 的 WINAPI 函数。您可以在 User32.dll 中找到该函数。

# java - 在 Web 服务中使用 OAuth 时出现异常

> ID：12614371
> 
> 赞同：3
> 
> 时间：2012-09-27T05:00:17.983
> 
> 标签：java, android, web-services, oauth-2.0, axis

我有一个为管理我们的应用内计费而开发的网络服务。现在我想对其进行更改以包括对 Android Subscription API 的支持。所以我必须使用 OAuth 来查询 Google 的服务器。我的代码完美地作为基于控制台的应用程序工作。但是，当我尝试将其发布为 Web 服务时，我得到以下异常。是某种错误还是我做错了什么？如果我错了，请指导我。

```
IWAB0398E Error in generating WSDL from Java:  java.lang.NoClassDefFoundError: com/google/api/client/http/HttpRequestInitializer
    java.lang.NoClassDefFoundError: com/google/api/client/http/HttpRequestInitializer
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethod(Unknown Source)
    at org.apache.axis.description.JavaServiceDesc.loadServiceDescByIntrospection(JavaServiceDesc.java:874)
    at org.apache.axis.description.JavaServiceDesc.loadServiceDescByIntrospection(JavaServiceDesc.java:846)
    at org.apache.axis.description.JavaServiceDesc.getOperations(JavaServiceDesc.java:410)
    at org.apache.axis.wsdl.fromJava.Emitter.writePortType(Emitter.java:1016)
    at org.apache.axis.wsdl.fromJava.Emitter.getWSDL(Emitter.java:484)
    at org.apache.axis.wsdl.fromJava.Emitter.emit(Emitter.java:331)
    at org.apache.axis.wsdl.fromJava.Emitter.emit(Emitter.java:430)
    at org.apache.axis.tools.ant.wsdl.Java2WsdlAntTask.execute(Java2WsdlAntTask.java:243)
    at org.eclipse.jst.ws.internal.axis.consumption.core.command.Java2WSDLCommand.executeAntTask(Java2WSDLCommand.java:180)
    at org.eclipse.jst.ws.internal.axis.consumption.core.command.Java2WSDLCommand.execute(Java2WSDLCommand.java:95)
    at org.eclipse.jst.ws.internal.axis.creation.ui.command.BUCodeGenOperation$BottomUpWSModifyOperation.execute(BUCodeGenOperation.java:122)
    at org.eclipse.jst.ws.internal.axis.creation.ui.command.BUCodeGenOperation.execute(BUCodeGenOperation.java:86)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:419)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop(CommandFragmentEngine.java:359)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop(CommandFragmentEngine.java:254)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$6.run(SimpleCommandEngineManager.java:294)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop(SimpleCommandEngineManager.java:264)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.runHeadLess(DynamicPopupWizard.java:188)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard$1.run(DynamicPopupWizard.java:143)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run(DynamicPopupWizard.java:139)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1408) 
```

以下是我用过的罐子。

1.  google-api-services-androidpublisher-v1-rev2-1.8.0-beta.jar

2.  google-http-client-jackson-1.11.0-beta

3.  杰克逊核心asl-1.9.9

4.  番石榴-11.0.1

5.  google-oauth-client-1.11.0-beta

6.  google-http-client-1.11.0-beta

7.  google-api-services-calendar-v3-rev16-1.8.0-beta

8.  google-api-client-1.11.0-beta

9.  google-http-client-jackson2-1.11.0-beta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:07:28.093

```
java.lang.NoClassDefFoundError: com/google/api/client/http/HttpRequestInitializer 
```

这表示。

```
This runtime error is thrown by the JVM when there is an attempt by a
ClassLoader to load the definition of a Class (Class referenced in your 
application code etc.) and when such Class definition could not be found
within the current ClassLoader tree. 
```

可能是类路径设置不正确。

# iphone - iPhone应用程序未在真实设备上运行

> ID：12614380
> 
> 赞同：0
> 
> 时间：2012-09-27T05:01:25.833
> 
> 标签：iphone, device

没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

我该如何解决这个问题......？

部署 Taeget：

*   4.0 基础 SDK
*   最新5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:57:05.290

您应该确保从方案列表和项目设置中选择设备，您应该具有用于​​调试设置的有效证书

更新：如果设备的 IOS 低于部署目标，它也不会列出设备

# php - 在 PHP 中过滤计数

> ID：12614381
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:01:31.073
> 
> 标签：php, mysql, sql

如何在活动记录中转换此代码：

```
$last_points = mysql_insert_id(); 
$sql = "SELECT COUNT(fkmember) FROM downline WHERE fkmember = {$last_points}"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:08:50.180

```
$this->db->select('COUNT(fkmember)');
$query = $this->db->get_where('downline', array('fkmember'=> $last_points))->num_rows(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:16:16.047

首先，在使用 COUNT 这样的聚合函数时，建议使用 GROUP BY

```
$last_points = $this->db->insert_id();

$this->db->from('downline');
$this->db->where('fkmember', $last_points);
$this->db->group_by('fkmember');
echo $this->db->count_all_results();
// Produce an integer, like 17 
```

您也可以参考手册：[http ://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:44:50.107

```
$last_points = mysql_insert_id(); 

$count = $this->db->where('fkmember',$last_points)->get('downline')->num_rows(); 
```

$count 给出结果的计数

# jquery - jquery mobile 和 jquery.validation 无线电验证错误消息不会消失

> ID：12614385
> 
> 赞同：0
> 
> 时间：2012-09-27T05:01:50.153
> 
> 标签：jquery, jquery-plugins, jquery-mobile, jquery-validate

我正在尝试在 jquery 移动项目中使用 jquery.validate 来验证表单。这在大多数情况下都可以正常工作，除了单选按钮。验证最初似乎可以工作，并显示有关必填字段的错误文本，但如果选择了单选按钮，则错误消息不会消失。

它似乎适用于其他输入类型，例如 jsFiddle 中所示的“文本”。这可能是两个库（jquery mobile 和 jquery.validate）之间的冲突吗？我尝试了两个库的许多版本组合，结果相同。

jsfiddle: [JSfiddle](http://jsfiddle.net/vkxtH/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:37:42.307

试试这个，

> [http://jsfiddle.net/cfmitrah/vkxtH/9/](http://jsfiddle.net/cfmitrah/vkxtH/9/)

# networking - TCP 和 Go Back N 的区别

> ID：12614393
> 
> 赞同：9
> 
> 时间：2012-09-27T05:02:21.650
> 
> 标签：networking, tcp, protocols

我正在阅读 Kurose 的 Computer Networking，在阅读 TCP 章节中有关 TCP 和 Go Back NI 之间差异的内容时，我发现了一些我不完全理解的东西。该书对两种协议之间的一些差异进行了以下说明：

> “许多 TCP 实现缓冲正确接收但无序的段而不是丢弃。
> 
> 另外，假设一个 seqof segs 1, 2, ...N，按顺序正确接收，ACK(n)，n < N，丢失，并且剩余的 N-1 个 ack 在它们各自的超时之前到达发送方 TCP 重传大多数一个 seg "

我了解无序段的缓冲，但我不了解其他行为，我认为这是因为我不完全了解 Go Back N。按照该示例，如果 ACK(n+t) 到达在 Go Back N 超时之前，协议将继续执行，就好像实际上接收到了 seg n，这是这种情况，因为累积的 ACKS ......所以，Go Back N 也不会重新传输该段......或者 am我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-20T03:06:40.450

我正在查看这个问题的答案，在找到它之后，我想即使这很旧，它可能会对某人有所帮助，所以我从 Kurose-Ross Computer Networking - A top down approach 复制了一个片段：

*TCP 是 GBN 还是 SR 协议？回想一下，TCP 确认是累积的并且被正确接收，但无序段不会被接收者单独确认。因此，TCP 发送方只需要维护一个已发送但未确认的字节的最小序列号（SendBase）和下一个要发送的字节的序列号（NextSeqNum）。从这个意义上说，TCP 看起来很像 GBN 风格的协议。但是 TCP 和 Go-Back-N 之间存在一些显着差异。许多 TCP 实现将缓冲正确接收但无序的段 [Stevens 1994]。还要考虑当发送方发送一系列分段 1、2、...时会发生什么。. . , N, 并且所有段都按顺序到达接收器，没有错误。进一步假设数据包 n < N 的确认丢失，但剩余的 N – 1 个确认在各自的超时之前到达发送方。在本例中，GBN 不仅会重传数据包 n，还会重传所有后续数据包 n+1、n+2、……。. . , N。另一方面，TCP 最多会重传一个段，即段 n。此外，如果对段 n + 1 的确认在段 n 的超时之前到达，TCP 甚至不会重新传输段 n。*

我的结论：实际上 TCP 是 GBN 和 SR 的混合体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-18T05:11:01.610

看到这些链接，GBN和SR就很容易理解了：

**返回 N 协议**(GBN)： [在此处输入链接描述](https://www.youtube.com/watch?v=9BuaeEjIeQI)

**选择性重复协议**(SR)： [https ://www.youtube.com/watch?v=Cs8tR8A9jm8](https://www.youtube.com/watch?v=Cs8tR8A9jm8)

在 GBN 和 SR 协议中，接收方必须为它在滑动窗口中接收到的所有段发送 ACK 消息。

在 TCP 协议中，接收方**不会**为它在滑动窗口中接收到的所有段发送 ACK 消息。接收方仅发送 ACK 以获取它期望的下一个段。这意味着将更少的 ACK 消息发送给发送者。因此，*它有利于减少网络拥塞。*

在异常情况下，一些段丢失（由于网络拥塞或误码），TCP 传输时间比 GBN 和 SR 长，因为接收方不能同时发送 2 个 ACK​​ 消息。

在我看来，丢失部分很少发生。因此 TCP 协议针对正常情况而不是异常情况进行优化。一般情况下，TCP优于GBN和SR

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:40:13.363

引用说 ACK(n) 丢失了，而不是第 n 段丢失了。在这种情况下，不需要重新传输任何内容，因为 ACK(n + x) 意味着成功接收到 n + x 的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-15T13:05:35.287

我也被书中的陈述弄糊涂了，但我想我已经找到了答案：

> 还要考虑当发送方发送一系列分段 1、2、...时会发生什么。. . , N, 并且所有段都按顺序到达接收器，没有错误。进一步假设数据包 n < N 的确认丢失，但剩余的 N – 1 个确认在它们各自的超时之前到达发送方。在本例中，GBN 不仅会重传数据包 n，还会重传所有后续数据包 n+1、n+2、……。. . , N。另一方面，TCP 最多会重传一个段，即段 n。此外，如果对段 n + 1 的确认在段 n 的超时之前到达，TCP 甚至不会重新传输段 n。

实际上，在上面的示例中，即使数据包的 ACK`n+1`在其超时之前到达发送方，我们也必须意识到数据包的计时器`n`可能在该到达之前已经超时。所以，由于数据包`n`超时和GBN到目前为止还没有看到`ACK(n+1)`或`ACK(n+2)`...，它会触发所有数据包的重传`n`。

但是，对于 TCP，发送方只会`n`在这个特定时刻再次发送数据包。

PS这个问题已经很老了。但是，无论如何，希望这可以帮助任何人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T06:43:04.387

`ACK(n)`确认整个流到达`n`. 所以`ACK(n+1)`说一切都`n+1`已经到来，包括`n`.

# regex - 如何在两个数字之间添加空格

> ID：12614394
> 
> 赞同：0
> 
> 时间：2012-09-27T05:02:22.663
> 
> 标签：regex, notepad++, notepad

我有一个巨大的数字

> 37107287533902102798797998220837590246510135740250 46376937677490009712648124896970078050417018260538 74324986199524741059474233309513058123726617309629 91942213363574161572522430563301811072406154908250 23067588207539346171171980310421047513778063246676 89261670696623633820136378418383684178734361726757 28112879812849979408065481931592621691275889832738

实际上这个数字比这要大得多。

如何在两个数字之间放置空格？如何在记事本中表示要替换的相同元素+“空格”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:09:21.603

您可以替换`(\d)`为`\1 {pretend this is a space}`.

`\d`匹配单个数字。`\1`指第一个捕获组，其中包含该数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T20:59:08.917

如果您正在尝试通过记事本++。您可以使用内置的宏功能

1.  点击宏>>开始录制

    执行几次出现所需的操作（确保此模式应匹配直到文件结尾 - 在您的情况下为空格）

2.  宏 >> 停止录制

3.  宏 >> 多次运行宏 >> 选择 - 运行直到文件结束

这将很容易解决。

# html - 使用 IE10 的表达式编码器渲染 MP4 视频

> ID：12614395
> 
> 赞同：0
> 
> 时间：2012-09-27T05:02:35.893
> 
> 标签：html, internet-explorer, html5-video, internet-explorer-10

我正在使用 Expression Encoder 将视频渲染为 MP4 (H.264)。我正在选择 H.264 屏幕编码 VBR 配置文件。它会生成一个 .mp4 文件，我可以使用 Media Player 在我的计算机上播放（我在 Windows 8 RTM 上），当我把它放在我的网站上时，我可以在 Google Chrome 中看到视频播放，但它不会播放IE10。有什么理由不这样做或如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:36:58.703

它可能是一个可爱的 IE10 错误，如此处所述......

[http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/d62f0aa3-76d1-4d3a-b0a6-bb3731402f83](http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/d62f0aa3-76d1-4d3a-b0a6-bb3731402f83)

我认为它的短处 - 如果你已经指定了你应该做的编解码器参数，例如：

IE10 摇摇晃晃。如果您剥离编解码器声明，它应该可以工作。不知道这可能会产生什么影响

# r - 如何在 R 中将行添加到带有标题的空数据帧？

> ID：12614397
> 
> 赞同：46
> 
> 时间：2012-09-27T05:02:42.960
> 
> 标签：r, row, dataframe, add

> **可能重复：**
> [R：向空数据框添加行时丢失列名](https://stackoverflow.com/questions/5231540/r-losing-column-names-when-adding-rows-to-an-empty-data-frame)

我创建了一个只有列名的空数据框，如下所示

```
> compData <- data.frame(A= numeric(0), B= numeric(0))
> compData
[1] A B
<0 rows> (or 0-length row.names)
> compData <- rbind(compData,c(5,443))
> compData
  X5 X443
1  5  443 
```

在上面添加一行后，列名被更改。如何将新行数据添加到数据框？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T06:47:48.927

添加到零行与添加到已经包含行`data.frame`的行为不同`data.frame`

从`?rbind`

> rbind 数据框方法首先删除所有零列和零行参数。（如果没有留下任何内容，则返回第一个参数和列，否则返回零列零行数据框。）然后它从第一个数据框中获取列的类，并按名称（而不是按位置）匹配列. 因子根据需要扩展其级别（按照遇到的因子的级别集的级别的顺序），当且仅当所有组件都是有序因子时，结果才是有序因子。（最后一点与 S-PLUS 不同。）老式类别（带水平的整数向量）被提升为因子。

你有很多选择——

# 最直接的

```
 compData[1, ] <- c(5, 443) 
```

# 更复杂

或者您可以强制`c(5,433)`使用列表或 data.frame

```
rbind(compData,setNames(as.list(c(5,443)), names(compData))) 
```

或者

```
rbind(compData,do.call(data.frame,setNames(as.list(c(5,443)), names(compData)))) 
```

但在这种情况下，你不妨这样做

```
do.call(data.frame,setNames(as.list(c(5,443)), names(compData))) 
```

# data.table 选项

您可以使用检查较少的`data.table`函数`rbindlist`，从而保留第一个 data.frame 的名称

```
library(data.table)
rbindlist(list(compData, as.list(c(5,443)) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-27T05:55:35.613

我只是有一个更简单的方法来做到这一点......如下

```
compData <- data.frame(A= numeric(0), B= numeric(0))
compData
compData[nrow(compData)+1, ] <- c(5, 443)
compData 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-27T05:33:29.557

```
Colnames <- names(compData)
compData <- rbind(compData, c(5, 443))
names(compData) <- Colnames 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T05:22:50.010

您可以按索引分配给数据框：

```
compData <- data.frame(A= numeric(0), B= numeric(0))
compData
compData[1, ] <- c(5, 443)
compData 
```

这使：

```
> compData <- data.frame(A= numeric(0), B= numeric(0))
> compData
[1] A B
<0 rows> (or 0-length row.names)
> compData[1, ] <- c(5, 443)
> compData
  A   B
1 5 443 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T13:13:12.090

您可以使用`structure`带有`.Names`参数的函数：

```
compData <- structure(rbind(compData,c(5,443)), .Names = names(compData))

#  A   B
#1 5 443 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-27T05:46:58.943

如果您有相同类型的数据*，您可以执行以下操作：

1.  将实际数据框转换为矩阵。
    `as.matrix(compData)`
2.  将新行添加到末尾。
    `rbind(as.matrix(compData), c(5,443))`
3.  将矩阵转换回数据框。
    `as.data.frame(rbind(as.matrix(compData), c(5,443)))`

简而言之：
`compData <- as.data.frame(rbind(as.matrix(compData), c(5,443)))`

*如果您有相同类型的数据，您可能希望将它们保存在矩阵中。

# java - Spring 输出流作为文件下载？

> ID：12614404
> 
> 赞同：1
> 
> 时间：2012-09-27T05:03:19.400
> 
> 标签：java, web-services, spring

我想将具有 pdf 数据的 OutputStream 对象作为文件发送到网络浏览器。

代码如下。

```
@RequestMapping(value="/issue", method=RequestMethod.POST)
public void issue(HttpServletResponse response, TimeStampIssueParam param) throws JsonGenerationException, JsonMappingException, IOException {

    OutputStream pdfOuput = issue(input);
    response.setContentType("application/pdf");
    ServletOutputStream respOutput = response.getOutputStream();  
    ....

} 
```

问题是我已经有了输出流，我不想将它转换为字节数组。

任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:29:11.557

首先，我想说说 OutputStream 有任何数据是错误的。流只是让数据通过某个目的地。有时（SocketOutputStream）这个目的地可能在完全不同的计算机上，有时（ByteArrayOutputStream）它会与流密切相关，甚至可以通过它获得。但这是特定流的细节，而不是您可以从任意流中指望的东西。

因此，不知道该方法的结果究竟`issue`来自哪里，很难提供解决方案，但通用的 OutputStream 不是它应该返回的。

猜测该方法会生成一些 PDF 数据并通过 OutputStream 将其写入某处，然后返回流：

*   如果它创建 a`File`并且流恰好是 FileOutputStream，它应该返回文件、文件路径或同一文件的 FileInputStream。
*   如果它创建例如。一个ByteArrayOutputStream，那么你已经有了一个字节数组，另外这个流类型有一个`writeTo`方法可以直接用来将数据写入ServletOutputStream；`issue`只需将流作为正确的类型返回，而不是将其隐藏在通用接口后面。
*   对于其他 OutputStream 类型，这取决于它们到底是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:38:51.657

您不能：您只能将 InputStream 复制到 OutputStream。然后，您可以使用： org.springframework.util.FileCopyUtils.copy(InputStream, OutputStream)

# sql - SQL优化不同

> ID：12614408
> 
> 赞同：3
> 
> 时间：2012-09-27T05:03:58.167
> 
> 标签：sql, oracle, optimization

假设我有一个使用 Oracle SQo Server 从数据库中获取数据的 SQL 查询，如下所示

```
select  distinct ORDER_TYPE_name as ORDER_TYPE from 
PRODUCT_MASTER_LIST where PROJECT_ID = 99999
order by  ORDER_TYPE ASC 
```

我现在有 5000 条记录，订单类型如下：

```
Red
Yellow
Green
Black 
null
Unclassified 
```

如何通过缩短查询执行时间来优化性能？

注意当我看到执行计划时，通过表有很多完全访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:11:19.273

您可以在这两列上定义索引以防止表扫描。这应该会在很大程度上缩短执行时间。

```
CREATE INDEX IX_ProductMasterList_OrderType 
ON PRODUCT_MASTER_LIST(PROJECT_ID, ORDER_TYPE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:56:37.927

我认为 PROJECT_ID 上的索引可能是正确的解决方案。这取决于该柱的选择性。

```
CREATE INDEX PRODUCT_ML_PRODUCT_ID_IDX ON PRODUCT_MASTER_LIST(PRODUCT_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:15:19.473

如果您计划运行查询经常创建一个**绑定变量**，这将大大提高性能。

例子：

```
create or replace procedure dsal(p_empno in number)
as
  begin
    update emp
    set sal=sal*2
    where empno = p_empno;
    commit;
  end;
/ 
```

此外，在您要查询的列上创建**索引。**

```
CREATE INDEX 
   ix_emp_01 
ON 
   emp (deptno) 
TABLESPACE 
   index_tbs; 
```

*注意 TABLESPACE 子句是可选的*

# mysql - MySQL 的多个/分布式休眠 SessionFactory 实例的问题

> ID：12614411
> 
> 赞同：0
> 
> 时间：2012-09-27T05:04:06.950
> 
> 标签：mysql, hibernate, distributed-caching, sessionfactory, database-engine

我在使用多个/分布式 Hibernate SessionFactories 访问单个数据库实例时遇到问题，即 Hibernate SessionFactory 的多个实例。如果我使用一个会话工厂来执行插入操作并创建新的 SessionFactory 以从数据库中检索数据而不关闭前一个 SessionFactory，那么我会得到“null”。我也尝试过使用多个二级缓存平台，但都没有解决问题。如果有人找到任何解决方案，请回复。

我正在使用 MySql 数据库，我在安装时选择的数据库引擎是 Innodb。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:42:09.100

在解决了这个问题并尝试了所有可以用hibernate完成的事情之后，我没有找到解决这个问题的办法。然后在我尝试将数据库引擎从早期的 Innodb 更改为 MISAM 之后，这解决了数据无法获取和抛出 NullPointerException 的问题。

我想知道是否有人能说出为什么 MISAM 工作而 Innodb 在分布式操作中无法工作以进行插入和检索？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T16:12:40.437

MyISAM 默认使 autocommi=true。MYISAM 是一个相当古老的引擎。建议使用 INNODb 存储引擎并在休眠属性文件中将自动提交设置为 true。

# c# - 如何使用 C# 在 Winform 的运行时更改 Application.StartupPath？

> ID：12614415
> 
> 赞同：0
> 
> 时间：2012-09-27T05:05:15.583
> 
> 标签：c#, winforms, startup

我有一个包含 21 个视频文件的 winform 应用程序，它们的路径设置为 applicaton.startupPath 像这样......

```
vpath[0] = Application.StartupPath + @"\v00.m4v";
        vpath[1] = Application.StartupPath + @"\v01.m4v";
        vpath[2] = Application.StartupPath + @"\v02.m4v";
        vpath[3] = Application.StartupPath + @"\v03.m4v";
        vpath[4] = Application.StartupPath + @"\v04.m4v";
        vpath[5] = Application.StartupPath + @"\v05.m4v";
        vpath[6] = Application.StartupPath + @"\v06.m4v";
        vpath[7] = Application.StartupPath + @"\v07.m4v";
        vpath[8] = Application.StartupPath + @"\v08.m4v";
        vpath[9] = Application.StartupPath + @"\v09.m4v";
        vpath[10] = Application.StartupPath + @"\v10.m4v";
        vpath[11] = Application.StartupPath + @"\v11.m4v";
        vpath[12] = Application.StartupPath + @"\v12.m4v";
        vpath[13] = Application.StartupPath + @"\v13.m4v";
        vpath[14] = Application.StartupPath + @"\v14.m4v";
        vpath[15] = Application.StartupPath + @"\v15.m4v";
        vpath[16] = Application.StartupPath + @"\v16.m4v";
        vpath[17] = Application.StartupPath + @"\v17.m4v";
        vpath[18] = Application.StartupPath + @"\v18.m4v";
        vpath[19] = Application.StartupPath + @"\v19.m4v";
        vpath[20] = Application.StartupPath + @"\v20.m4v"; 
```

现在，如果用户想要更改这些视频，那么他必须将其命名为 v00 到 v20。现在，如果用户添加不同格式的视频，那么我该如何更改路径？是否可以在运行时更改它？如果是，那怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:55:52.707

您可以在代码中添加另一个变量

```
public string VideoPath; 
```

初始化它

```
VideoPath = Application.StartupPath; 
```

而不是随心所欲地改变它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:08:51.073

`StartupPath`不是正则变量。事实上，它根本不是变量，也不能“写入”，它是一个只能获取的属性。

实际上，您可以通过将主可执行文件复制到所需目录并从那里重新运行它来更改该属性结果值，但重点是什么？

导航到[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)和[`Directory`](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx)类[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)以了解如何使用文件系统。

# android - Android NDK：如何在 Android.mk 中动态获取编译器架构

> ID：12614417
> 
> 赞同：36
> 
> 时间：2012-09-27T05:05:17.683
> 
> 标签：android, android-ndk

我正在尝试将 Android.mk 配置为交叉编译本机代码以支持不同的芯片组，即 armeabi、mips 和 x86。我知道我可以通过以下方式配置 Application.mk 来编译不同芯片组的源代码：

```
APP_ABI := all 
```

这将触发 Android-NDK 的构建脚本来编译所有芯片组的源代码。但是，我想动态地告诉 Android.mk 寻找使用不同芯片组编译的不同静态库依赖项。

```
# Get the architecture info
ARCH := ????

include $(CLEAR_VARS)
LOCAL_MODULE:= mylib
LOCAL_SRC_FILES:= build/lib/libxxx_$(ARCH).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
include $(PREBUILT_STATIC_LIBRARY) 
```

这可能吗？如果是这样，任何人都可以建议如何做到这一点？

> **更新**：我在 Application.mk 中尝试过这样的事情：
> 
> ```
>  APP_ABI := armeabi armeabi-v7a mips x64 
> ```
> 
> 使用 Android.mk：
> 
> ```
> # Get the architecture info
> ARCH := $(APP_ABI)
> 
> include $(CLEAR_VARS)
> LOCAL_MODULE:= mylib
> LOCAL_SRC_FILES:= build/lib/libxxx_$(ARCH).a
> LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
> include $(PREBUILT_STATIC_LIBRARY) 
> ```
> 
> 但它出现以下错误：
> 
> ```
>  The LOCAL_SRC_FILES for a prebuilt static library should only contain one item 
> ```
> 
> 这是有道理的。我想在 Application.mk 中传递 APP_ABI := all 并能够动态引用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-27T06:23:50.083

检查`TARGET_ARCH_ABI`：

```
ifeq($(TARGET_ARCH_ABI), armeabi-v7a)
  # v7a-specific stuff
endif 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-27T10:32:31.257

有一个`TARGET_ARCH`变量保存正在构建的当前 ABI 的值。您可以通过以下方式使用它：

```
ifeq ($(TARGET_ARCH),x86)
    LOCAL_CFLAGS   := $(COMMON_FLAGS_LIST)
else
    LOCAL_CFLAGS   := -mfpu=vfp -mfloat-abi=softfp $(COMMON_FLAGS_LIST)
endif 
```

如果您指定`APP_ABI := armeabi-v7a armeabi mips x86`或`APP_ABI := all`在您的中，`Application.mk`您将获得每个单独的 ABI 值。

# c# - WCF 在 Post 方法中给出错误 400 Bad Request

> ID：12614423
> 
> 赞同：3
> 
> 时间：2012-09-27T05:05:51.743
> 
> 标签：c#, wcf, post

我有这个 WCF 服务：

`IService.cs`：

```
public interface IService
{
   [OperationContract]
   [WebInvoke(Method = "POST", UriTemplate = "/PostComments", BodyStyle = WebMessageBodyStyle.Wrapped,
    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
   string PostComments(PostComment comment);

 [DataContract]
public class PostComment
{
    private string Id;
    private string FullName;
    private string Email;
    private string Location;
    private string Comments;
    private string Type;

    [DataMember]
    public string id { get { return Id; } set { Id = value; } }
    [DataMember]
    public string fullname { get { return FullName; } set { FullName = value; } }
    [DataMember]
    public string email { get { return Email; } set { Email = value; } }
    [DataMember]
    public string location { get { return Location; } set { Location = value; } }
    [DataMember]
    public string comments { get { return Comments; } set { Comments = value; } }
    [DataMember]
    public string type { get { return Type; } set { Type = value; } }
} 
```

`Service.svc.cs`：

```
public string PostComments(PostComment commnt)
        {
            int ItemId;
            string Comments, FullName, Location, Email, Type;

            ItemId = Convert.ToInt32(commnt.id);
            Type = commnt.type;
            Comments = commnt.comments;
            FullName = commnt.fullname;
            Location = commnt.location;
            Email = commnt.email;
            int i = 0;

            if (Type == "Style")
            {
                adp = new SqlDataAdapter("insert into tblComment(intId,strComments,strFullName,strLocation,strEmail,dtPosted,blnApprove) values("+ItemId+",'"+Comments+"','"+FullName+"','"+Location+"','"+Email+"',GetDate(),1)", offcon);
                adp.Fill(ds1,"StComment");
                DataTable dt = ds1.Tables["StComment"];
                i++;
            }
            else if (Type == "Article")
            {
                adp = new SqlDataAdapter("insert into tblNewsComment(intArticleId,strComments,strFullName,strLocation,strEmail,dtPosted,blnApprove) values(" + ItemId + ",'" + Comments + "','" + FullName + "','" + Location + "','" + Email + "',GetDate(),1)", offcon);
                adp.Fill(ds1, "ArtComment");
                DataTable dt = ds1.Tables["ArtComment"];
                i++;
            }
            if (i > 0)
            {
                return "Comment Successfully Submitted.";
            }
            else
            {
                return "Comment falied to Submit.";
            }
        } 
```

`web.config`文件：

```
<?xml version="1.0"?>
<configuration>
<connectionStrings>
  <add name="con" connectionString="Data Source=.;Initial Catalog=PatrikaData;Integrated Security=SSPI;"/>  
</connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestPathInvalidCharacters="&lt;,&gt;,*,%,:,\"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="ServiceBehaviour" name="WcfService.Service">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
          contract="WcfService.IService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment/>
    <bindings>
      <webHttpBinding>
        <binding name="web"
                 maxBufferPoolSize="1500000"
                 maxReceivedMessageSize="1500000"
                 maxBufferSize="1500000">
          <readerQuotas
                maxArrayLength="656000"
                maxBytesPerRead="656000"
                maxDepth="32"
                maxNameTableCharCount="656000"
                maxStringContentLength="656000"
            />
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>  
</configuration> 
```

现在，如果我正在使用`BasicHttpBinding`WCF**测试客户端**进行测试，那么一切正常。

但是，当我使用`WebHttpBinding`和测试**Google 的 Advanced Rest Client**并通过它发布数据时，我收到了**这个错误**：

> 服务器在处理请求时遇到错误。异常消息是'格式化程序在尝试反序列化消息时抛出异常：反序列化操作'PostComments'的请求消息正文时出错。遇到了意想不到的字符'T'。'。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin (MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。ProcessMessage41(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System. ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(布尔 isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

有时这个：

> 服务器在处理请求时遇到错误。异常消息是“反序列化操作“PostComments”的请求消息正文时出错。OperationFormatter 遇到无效的消息正文。预计会找到名称为“类型”且值为“对象”的属性。找到值'数字'。'。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 处的 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)

我真的不知道我错在哪里，因为这项服务昨天在谷歌的同一个休息客户端上运行良好。我必须尽快在服务器上部署此服务。请帮忙！！！！

**[更新]**

提琴手的输出：

HTTP/1.1 400 错误请求

```
Server: ASP.NET Development Server/10.0.0.0
Date: Thu, 27 Sep 2012 10:33:24 GMT
X-AspNet-Version: 4.0.30319
Content-Length: 3513
Cache-Control: private
Content-Type: text/html
Connection: Close 
```

Google 发送的原始正文：

```
{
    "Id": "818744",
    "FullName": "Abhishek",
    "Email": "ab@gma.com",
    "Location": "Jaipur",
    "Comments": "asdkjfjk sdnfjlksdjlk dfljkfsd",
    "Type": "Style"
} 
```

**[更新 2]** 我已经通过 Service Tracker 然后我发现我得到的根值有 Number 并且服务需要 Object. 所以如果它会触发一些事情，因为我现在完全空白......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T18:20:50.530

您正在发布的 json 的所有键都以大写字母开头，您的公共属性（标有小写属性）以小写字母开头。您应该让它们匹配或添加使用 [Datamember(name="key")] 以确保它们正确映射。

# javascript - Javascript 正则表达式：匹配或匹配但不包括

> ID：12614437
> 
> 赞同：2
> 
> 时间：2012-09-27T05:07:20.370
> 
> 标签：javascript, regex

例如，我使用一个简单的正则表达式来匹配第一个空格之前的所有内容：

```
var str = '14:00:00 GMT';
str.match(/(.*?)\s/)[0]; //Returns '14:00:00 ' note the space at the end 
```

为了避免这种情况，我可以这样做：

```
str.match(/(.*?)\s/)[0].replace(' ', ''); 
```

但是有更好的方法吗？我可以不在正则表达式中包含空格吗？另一个例子是在 2 个字符之间找到一些东西。假设我想在上面的字符串中间找到 00。

```
str.match(/:(.*?):/)[0]; //Returns :00: but I want 00
str.match(/:(.*?):/)[0].replace(':', ''); //Fixes it, but again...is there a better way? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:12:29.303

您可以将积极的前瞻断言用作：

```
(.*?)(?=\s) 
```

它说匹配空格之前的所有内容，但不匹配空格本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:26:37.120

我认为你只需要将索引从 0 更改为 1，如下所示：

```
 str.match(/(.*?)\s/)[1] 
```

0 表示整个匹配的字符串，1 表示第一组，这正是您想要的。

@codaddict 提供另一种解决方案。

```
str.match(/(.*?)(?=\s)/)[0] 
```

(?=\s) 表示先行但不消耗空格，因此整个匹配的字符串是 '14:00:00' 但没有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:11:58.497

是的，您可以使用[字符类](http://www.regular-expressions.info/charclass.html)：

```
var str = '14:00:00 GMT';
str.match(/[^\s]*/)[0]; //matches everything except whitespace 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T05:40:11.817

您的代码非常接近答案，您只需将 [0] 替换为 [1]。当 str.match(/:(.*?):/) 执行时，它返回一个对象，在本例中，对象长度为 2，如下所示：

```
[":00:","00"] 
```

在索引 0 中，它存储与您的表达式匹配的整个字符串，在索引 1 和更高版本中，它将与每个括号中的表达式匹配的结果存储。
让我们看另一个例子：

```
 var str = ":123abcABC:";
 var result = str.match(/:(\d{3})([a-z]{3})([A-Z]{3}):/);
 console.log(result[0]);
 console.log(result[1]);
 console.log(result[2]);
 console.log(result[3]); 
```

结果：

```
:123abcABC: 
123 
abc 
ABC 
```

希望它有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T05:41:38.650

试试这个，

```
.*(?=(\sGMT)) 
```

正则表达式好友截图

![在此处输入图像描述](../Images/54bde44b053b7634efbeca50ff33e8f4.png)

# android - actionscript 3 上的计算器

> ID：12614442
> 
> 赞同：0
> 
> 时间：2012-09-27T05:08:02.337
> 
> 标签：android, actionscript-3, flash

这是我的问题的简化版本。

有

*   影片剪辑1
*   电影剪辑2
*   电影剪贴画

*   文本A

*   文本B
*   文本 C
*   文字回答

    `Touching movieclip1 should change TextA to 1 (the content should be 1) Touching movieclip2 should change TextC to 2 (the content should be 2)`

    `Touching movieclipadd should change TextB to + (the content should be +)`

然后自动 Textanswer 应该给出答案。那是`3(1+2=3)`

这是用于移动设备的，我知道使用 ontouchbegin 和 ontouchend。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:21:07.320

有几种方法可以完成您想做的事情，一种方法是为您计划让计算器支持的每种操作类型都有一个方法，然后您可以只使用一个调用适当方法的 switch 语句，例如这个（我很懒，只是内联操作，如果它更复杂可能需要方法）：

```
switch(textB.text)
{
    case '+': textAnswer.text = parseInt(textA.text)+parseInt(textC.text);
        break;
    case '-': textAnswer.text = parseInt(textA.text)-parseInt(textC.text);
        break;
    //etc.
    default: throw new Error('unhandled operator');
} 
```

假设您将使用您对触摸处理程序的了解来填充文本框。

虽然由于缺乏代码，我有点同意 arunkumar，但它是一个足够简单的问题，有足够简单的解决方案来提供一个。但请注意，在 SO 上，提供您当前的工作和尽可能多的相关背景信息是标准的。

# asp.net-mvc-3 - WebGrid MVC3 下拉列表

> ID：12614447
> 
> 赞同：0
> 
> 时间：2012-09-27T05:08:28.790
> 
> 标签：asp.net-mvc-3, drop-down-menu, callback, webgrid

我有一个带有列产品、数量、费率和毛额的网络网格。我有一个包含产品列表的下拉列表。

现在根据产品的选择，我需要获得产品的价格。

我认为必须有一些回调方法才能得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:19:48.467

在项目中，我需要根据国家/地区选择绑定州下拉列表，所以我这样做了，实际上在我的城市视图中，我有 2 个下拉列表，例如国家和州。

在我的城市控制器中，我有行动

```
 public JsonResult State(int countryId)
        {              
            var stateList = CityRepository.GetList(countryId);
            return Json(stateList, JsonRequestBehavior.AllowGet);
        } 
```

在我看来，我得到了所有这样的状态数据，如下所示

```
<script type="text/javascript">
    function cascadingdropdown() {
        $("#stateID").empty();
        $("#stateID").append("<option value='0'>--Select State--</option>");
        var countryID = $('#countryID').val();
        $.ajax({
            url: "/City/State",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        });
    } 
</script> 
```

我想这会对你有所帮助。

# objective-c - presentViewController 会自动销毁以前的视图吗？

> ID：12614449
> 
> 赞同：2
> 
> 时间：2012-09-27T05:08:33.427
> 
> 标签：objective-c, xcode, segue

我使用一堆自定义 segue 从一个视图控制器视图到另一个使用：

```
[self performSegueWithIdentifier:@"createTeamAccountSegue" sender:self]; 
```

我的问题是，之前的视图会在 iOS5 和 6 中自动销毁吗？

我一直需要创建自定义转场以转到下一个视图，然后反向创建另一个新的转场动画以返回上一个视图。只要他们不不断堆积起来，那么这应该没问题吧？

编辑：我可能应该向您展示我的自定义 UIStoryboardSegue 类的一般布局：

```
- (void) perform {

UIViewController *sourceViewController = (UIViewController *) self.sourceViewController;
UIViewController *destinationViewController = (UIViewController *) self.destinationViewController;

UIView *parent = sourceViewController.view.superview;

[parent addSubview:destinationViewController.view];
[parent sendSubviewToBack:destinationViewController.view];

sourceViewController.view.layer.masksToBounds = NO;
sourceViewController.view.layer.cornerRadius = 8; // if you like rounded corners
sourceViewController.view.layer.shadowOffset = CGSizeMake(0,0);
sourceViewController.view.layer.shadowRadius = 10;
sourceViewController.view.layer.shadowOpacity = 1;

destinationViewController.view.frame = CGRectMake(0, 20, destinationViewController.view.frame.size.width, destinationViewController.view.frame.size.height);
sourceViewController.view.frame = CGRectMake(0, 20, sourceViewController.view.frame.size.width, sourceViewController.view.frame.size.height);

[UIView animateWithDuration:.3 delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^
 {
     sourceViewController.view.frame = CGRectMake(0, parent.frame.size.height, sourceViewController.view.frame.size.width, sourceViewController.view.frame.size.height);

 } completion:^(BOOL finished)
 {
     [sourceViewController presentViewController:destinationViewController animated:NO completion:NULL];
 }]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:22:48.153

如果你在 UINavigationController 中进行 segues，那么不，它们不会被破坏。要返回一个，您应该使用 [self.navigationController popViewControllerAnimated:YES];

# delphi - 锚点：= [akCenter]？

> ID：12614453
> 
> 赞同：14
> 
> 时间：2012-09-27T05:09:02.020
> 
> 标签：delphi, alignment, anchor, centering

如何在其父控件中居中？以及如何在父级调整大小时使其居中？

我知道我可以编写一个`Parent.OnResize`事件处理程序来手动移动控件，但并非所有容器组件都有`OnResize`事件，我想自动执行此操作。

有`akCenter`锚吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-27T05:09:21.037

锚点`akCenter`不存在。但是您可以`akRelative`通过将 anchors 属性设置为空来模拟，这会导致当父级调整大小时控件的相对移动。将其与居中放置相结合将产生类似居中的“锚”。

在设计时水平居中：

*   在 IDE 中，选择控件的上下文菜单（右键单击），
*   *Position > Align > Horizo​​ntal > Center in Window* ,
*   在对象检查器中设置`Anchors.akLeft := False`，`Anchors.akRight := False`
*   等等瞧：`akHorzCenter`。

垂直也是如此，在这种情况下你设置为`akTop`假`akBottom`。在两个方向居中：`Anchors := []`.

![akRelative 的动画效果](../Images/07b0fa610ae17b7cf68e8c695ebee360.png)

免责声明：我还没有找到有关此锚点用法的文档，我不知道这是否是预期的功能，但它在 D7 和 XE2 中都非常好用。

# cmake - cmake中是否有用于模块开发的交互式shell？

> ID：12614456
> 
> 赞同：3
> 
> 时间：2012-09-27T05:09:21.260
> 
> 标签：cmake

CMake 很棒，尤其是有很多模块（FindOOXX）。但是，当涉及到编写`FindXXX`模块时，您的项目所依赖的库 XXX，对于非 cmake 专家来说并不是那么容易处理。我有时会遇到一个不支持 CMake 的库，我喜欢为它制作一个。我想知道在编写/测试 cmake 模块时是否有任何交互式 shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T00:20:08.447

您是`FindXXX`为项目“XXX”写作还是“XXX”是您要查找的项目的依赖项？如果是前者，您应该改为编写一个名为`XXX-config.cmake`(或`XXXConfig.cmake`) 的文件并将其安装到`find_package`. 通常，`XXX-config.cmake`文件用于预计由 CMake 找到（并由项目本身安装）的项目，`FindXXX.cmake`文件用于不支持 CMake 的项目（通常必须支持查找任何版本的 XXX）。

也就是说，对于`FindXXX.cmake`，通常您只需要几个`find_file`（例如，对于标头）、一些`find_library`调用，甚至只需要一个`pkg_check_module`from`FindPkgConfig.cmake`后跟一个`find_package_handle_standard_args`调用（用于`include(FindPackageHandleStandardArgs)`获取它）。FPHSA 使编写正确的 Find 模块变得轻而易举。

对于`XXX-config.cmake`文件，我通常使用`configure_file`生成两个版本：一个用于安装（包括您的`install(EXPORT)`文件），另一个用于构建树（由`export()`调用生成）。使用它，可以准确设置其他有用的变量，例如“使用了哪个确切版本的 Boost”或“是否编译了 Python 支持”，以便依赖项目可以更好地了解依赖项的外观。

我最近还发现 CMake 附带了`CMakePackageConfigHelpers`应该有助于制作这些文件的模块。看起来有相当多的文档。

# qt - 如何从另一个 qt 应用程序运行一个 qt 应用程序

> ID：12614459
> 
> 赞同：0
> 
> 时间：2012-09-27T05:09:26.660
> 
> 标签：qt, qt4, qprocess

我有一个 Qt 应用程序（App1）。我想从另一个 qt 应用程序（App2）运行 App1。我试过使用 QProcess 但 App1 没有运行。请帮帮我。我正在研究 RHEL 6。

```
 QProcess process = new QProcess();
    QString program = "/home/user1/Desktop/MyApp/App1";
    process->start(program); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:25:29.853

试试这个：

```
int exitCode = QProcess::execute(program);
qDebug("Exit code is: %d.", exitCode); 
```

并检查会发生什么。这是一个同步调用。在您了解发生了什么之后，如果需要，请将其更改回异步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T08:07:51.860

试试这个：

```
QProcess *p= new QProcess(this);
p->start("yourotherapp.exe",QIODevice::ReadWrite); 
```

# django - 用于单元测试的 Django 独立数据库引擎

> ID：12614460
> 
> 赞同：0
> 
> 时间：2012-09-27T05:09:48.470
> 
> 标签：django, tdd

我是 Django 的新手，并且学习了几个教程。我为功能测试创建了一个单独的应用程序。我还为我的产品 DBMS 设置了一个 postgres 数据库引擎，但为了测试，我想在内存中使用 SQLite3。有人可以告诉我如何用另一个 settings.py 文件覆盖 prod 数据库吗？在我的功能测试应用程序文件夹中，我会将覆盖文件放在哪里？Django 如何知道哪些设置用于生产与测试？任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T07:07:36.873

作为一个选项：创建一个文件名 settings_test.py ，其中包含以下内容：

```
from settings import * # if your main settings file is settings.py
DATABASES['default']['ENGINE'] = 'django.db.backends.sqlite3'
# and whatever other settings like db name etc. 
```

然后使用设置运行测试：

```
./manage.py test --settings=settings_test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:42:08.783

补充 Dima 的答案，您可以看看： [https ://docs.djangoproject.com/en/1.4/internals/contributing/writing-code/unit-tests/#using-another-settings-module](https://docs.djangoproject.com/en/1.4/internals/contributing/writing-code/unit-tests/#using-another-settings-module)

# iphone - 如何修剪 iPhone 中相机录制的视频？

> ID：12614461
> 
> 赞同：1
> 
> 时间：2012-09-27T05:09:49.793
> 
> 标签：iphone, ipad, video-capture

我正在开发一个用于将视频上传到服务器的 iOS 应用程序，我的问题是，在从相机录制无限视频后，用户可以从全长视频中选择最长 3 分钟的视频。但是如果从照片库中选择视频，它只能通过设置`VideoRecordMaxDuration`为 180 秒来工作。我该如何解决这个问题？

# java - 为什么Java没有宏？

> ID：12614479
> 
> 赞同：2
> 
> 时间：2012-09-27T05:11:39.263
> 
> 标签：java, c, variables, language-agnostic, macros

在课堂上，教授说他喜欢 C 而不是 Java 的一个原因是 C 有一个预处理器，特别是宏。与使用所需值声明`final`/变量相比，宏有什么好处吗？`const`我知道 Java 没有全局变量，所以是否会出现使用变量代替宏不起作用的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:19:55.323

在 C 语言中使用宏系统是一个由来已久的传统，通常会导致难以理解的构建链和非常特定于项目的构建配置。我认为在 C 中存在宏的原因是为了克服它作为一种语言在您需要宏提供的东西时所具有的缺点（例如，您可以在 Java 中使用接口，这解决了需要制作“通用的”实例）。

尽管如此，有时拥有一个宏观系统似乎更容易解决问题。我确实知道一些商店会这样做——例如——当他们需要支持多个不同版本的 API 时。通常，您可以通过在设计中正确使用接口和良好的抽象层来克服 Java 中的这个问题。但是，那里[有 Java 的宏系统](http://www.cybercom.net/~kimbly/jatha/)！如果你愿意，你可以使用它们。您可能还注意到，就宏而言，C 宏并没有什么特别之处。

（在我看来你的老师有点离谱......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T05:33:06.627

没有理由不能通过宏预处理器运行 Java 代码。它只是没有作为语言的一部分完成。

话虽如此，宏在 C 中有价值的大部分原因是 C 语言的问题，大多数人对它们的使用极其丑陋和适得其反，尽管它们也有很多好的用途。

无论如何，我真的会质疑那些根据一个有宏而另一个没有宏来比较 C 和 Java 的人的专业知识。在事物的大计划中，这似乎是语言之间最微不足道的差异之一。突出显示它向我表明该人不理解语言之间的真正差异；也许他喜欢 C，但不知道如何命名 C 相对于 Java 的任何实际特性——比如存储持续时间和类型的表示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T05:28:37.860

C 中的宏不仅仅是全局常量。他们还可以定义函数，例如

```
#define SHOW_DEFINE(x) printf("%s=%s\n", #x, STR(x)) 
```

这在调试过程中非常有用。不幸的是，使用宏也很容易伤害自己。

```
#define  MULTIPLY(X,Y)  X*Y 
```

可以说 MULTIPLY(1,2) 但如果使用 MULTIPLY(1-1,2-2) = 1-2*2-2 = 1-4-2 而不是预期的 0*0 会导致问题.

通常，使用现代工具不再需要此类功能，并且具有良好的设计和一些抽象以及 Java 提供的接口通常不需要在 Java 中具有宏。Java的设计，afaik，是为了让自己尽可能地难以开枪。

# curve-fitting - 非线性拟合

> ID：12614480
> 
> 赞同：1
> 
> 时间：2012-09-27T05:11:46.497
> 
> 标签：curve-fitting, least-squares, nonlinear-functions, levenberg-marquardt

我有一些实验数据，我想使用最小二乘法（Levenberg-Marquardt）拟合它们以获得我的参数。

我正在使用两个非线性方程，并且正在使用一些计算程序（Origin 和 Matlab）。

第一个是：

```
y=A+B*(((2*pi*x)^2+Alfa4^2)*((2*pi*x)^2+Alfa5^2))/(((2*pi*x)^2+Alfa1^2)*((2*pi*x)^2+Alfa2^2)*((2*pi*x)^2+Alfa3^2)); 
```

带参数的非线性方程 (Alfa1,Alfa2,Alfa3,Alfa4,Alfa5)

第二个拟合方程是：

```
y=((T2^2+Lc^2*(2*pi*x)^2)/(((2*pi*x)^2*(Lc^2*(2*pi*x)^2+T8))+T6^2))*A1+G; 
```

有理函数，即分子上的二次函数和分母上的第四多项式函数

我想使用这两个方程来拟合，但我不知道该怎么做。如果有人想要实验数据，我可以在这里发布。

非常感谢，

爱德华多

# python - 在 ImageField upload_to 调用上访问生成的主键

> ID：12614482
> 
> 赞同：0
> 
> 时间：2012-09-27T05:11:55.820
> 
> 标签：python, django

我有一个模型，我的目标是生成主键（字符串），然后重命名上传的文件以匹配该字符串。这是我的缩短模型和`upload_to`我使用的功能。

```
class Thing(models.Model):
    id = models.CharField(primary_key=True, max_length=16)
    photo = ImageField('Photo', upload_to=upload_path, null=False, blank=False)
    ...

def upload_path(instance, filename):
    if not instance.id:
        randid = random_id(16)    # This returns a 16 character string of ASCII characters
        while Thing.objects.filter(id=randid).exists():
            logger.error("[Thing] ThingID of %s already exists" % randid)
            randid = random_id(16)
        instance.id = randid
    return "%s%s" % ("fullpath/",randid) 
```

这会导致图像被正确地重命名为适当路径中的随机字符串。但是，主键设置为空字符串。

如何使用生成的主键重命名 ImageField 文件*并*正确保存生成的主键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:21:07.900

您可以通过在模型上定义保存方法来实现此低谷。设置True **null**和**空白**ImageField，如果你必须控制空字段，你可以在模型表单上控制它们。因此，您可以轻松地在 DB 上为模型生成唯一 ID。然后，您可以使用唯一 ID 或自定义生成的 ID 保存您的图像。我建议最好对主键使用默认的唯一整数 id。

```
class Thing(models.Model):
    fake_id = models.CharField(max_length=16)
    photo = ImageField('Photo', upload_to=upload_path, null=True, blank=True)

    def save(self, *args, **kwargs):

        imagefile = self.photo

        self.photo = ''
        super(Thing, self).save(*args, **kwargs)

    """ after superclass save, you can use self.id also its unique integer """

        randid = random_id(16)    # This returns a 16 character string of ASCII characters
        while Thing.objects.filter(id=randid).exists():
            logger.error("[Thing] ThingID of %s already exists" % randid)
            randid = random_id(16)

       self.fake_id = randid

   """manipulate rename and upload your file here you object is 'imagefile' """

       save_dir = "fullpath/" + new_file_name_with_randid

       self.photo = save_dir

       super(Thing, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:35:02.157

我最终删除了回调并在's方法中完成`upload_to`了这一切。`Thing``save()`

```
class Thing(models.Model):
    id = models.CharField(primary_key=True, max_length=16)
    photo = ImageField('Photo', upload_to=upload_path, null=False, blank=False)
    ...

    def save(self, *args, **kwargs):
        randid = random_id(16)
        while Thing.objects.filter(id=randid).exists():
            logger.error("[Thing] ThingID of %s already exists" % randid)
            randid = random_id(16)
        self.id = randid
        self.photo.name = ".".join([randid, self.photo.name.split(".")[-1]])   # This adds the file extension to the random id generated
        super(Thing,self).save(*args, **kwargs) 
```

# java - 以编程方式在 Twitter 上搜索人员

> ID：12614485
> 
> 赞同：0
> 
> 时间：2012-09-27T05:12:09.880
> 
> 标签：java, twitter, social-media

我正在寻找在 Twitter 上搜索人的搜索字符串。我查看了以下链接 [https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

详细说明了在 Twitter 上搜索的各种方式，但似乎只能搜索推文。

是否有任何 Twitter API 可以让我们在 Twitter 上搜索人员及其详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:26:27.563

用户/搜索资源会有所帮助吗？

[https://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)

乔

# tcl - 使用 TCL 从文件中读取多行？

> ID：12614488
> 
> 赞同：3
> 
> 时间：2012-09-27T05:12:16.793
> 
> 标签：tcl

如何使用 tcl 在文件中读取多行？也就是说，默认情况下，gets 命令会读取直到找到新行，如何更改此行为以读取文件直到找到特定字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:55:40.313

如果您不介意阅读一下，可以通过循环`gets`或`read`循环来完成：

```
set data ""
while {[gets $chan line] >= 0} {
    set idx [string first $whatToLookFor $line]
    if {$idx == -1} {
        append data $line\n
    } else {
        # Decrement idx; don't want first character of $whatToLookFor
        append data [string range $line 0 [incr idx -1]]
        break
    }
}
# Data has everything up to but not including $whatToLookFor 
```

如果您正在寻找多行模式，我建议将整个文件读入内存并进行处理。这比尝试编写正确的匹配器要容易得多：

```
set data [read $chan]
set idx [string first $whatToLookFor $data]
if {$idx > -1} {
    set data [string range $data 0 [incr idx -1]]
} 
```

后一种形式也适用于二进制数据。`fconfigure $chan -translation binary`如果你这样做，请记住首先。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T05:39:27.077

使用`fconfigure`.

```
set fp [open "somefile" r]
fconfigure $fp -eofchar "char"
set data [read $fp]
close $fp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:41:45.263

除了 Donal 的好建议之外，您还可以通过读取整个文件并在记录分隔符上拆分来获取记录列表：

```
package require textutil::split
set records [textutil::splitx [read $chan] "record_separator"] 
```

[文档](http://tcllib.sourceforge.net/doc/textutil_split.html)

# android - Android Canvas 图像缩放

> ID：12614491
> 
> 赞同：0
> 
> 时间：2012-09-27T05:12:29.193
> 
> 标签：android, canvas, android-image

我是 android 开发的新手，目前正在开发正在处理画布和图像的应用程序......但我陷入了这个过程的中间。

我想实现这样一个功能，即用户触摸图像的边缘，如果他/她拖动图像，图像将被缩放..

我用谷歌搜索了很多，但找不到任何教程或演示 ..

希望你们帮助我。Galaxy Note 提供了这样的功能，如下图所示。

![在此处输入图像描述](../Images/04ff1cc9d0b7ae90b53a3a9d84a58947.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:21:46.133

尝试这个。

如果用户触摸右侧的图像并拖动右侧，则下面的代码将缩放图像并绘制缩放图像。

```
Bitmap bmpImage;
        Rect src = new Rect();
        Rect dst = new Rect();
        src.left = initial_Start_pos_X;  // initial Start X postion of image
        src.top = initial_Start_pos_Y;   // initial Start Y postion of image
        src.right =initial_End_pos_X;  // initial End X postion of image
        src.bottom = initial_End_pos_Y;  // initial End Y postion of image

        dst.left = initial_Start_pos_X;
        dst.top = initial_Start_pos_Y;
        dst.right = Draged_Pox_X;       // Drag X position of image
        dst.bottom = initial_End_pos_Y;

        canvas.drawBitmap(bmpImage, src, dst, paint); // This line will scaled the image according to dst rect. It will take the image from src rect and draw in dst rect. so it will scaled the image. 
```

每次拖动图像时，您都必须使视图无效。您必须使 ONTOUCHMOVE 中的视图无效。

所以你必须首先检查，用户触摸图像的哪一侧并拖动然后你必须修改上面的代码。上面的代码将仅在右侧显示缩放图像

# php - 如何正确执行 PHP 循环

> ID：12614494
> 
> 赞同：1
> 
> 时间：2012-09-27T05:12:50.520
> 
> 标签：php

> 写一门叫数学的课。它是有一个名为 num 的属性。它还有一种称为阶乘的方法（函数）。此方法是从 1 开始，将所有整数乘以 num。如果 num 为 5，那么您将乘以 1*2*3*4*5。当然，您要循环执行此操作。

我应该使用哪个循环？暂时还是暂时？另外，我需要一个内循环吗？我从

```
For (i = 1; i <= 5; i++)
{

} 
```

但是，我不知道下一步该做什么……有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:22:45.683

您可以使用任何循环来完成。`for`循环可以转换为`while`and`do .. while`和相反的也是如此。

```
for(i=0;i<5;i++) 
```

和

```
i=0; while(i<5){i++;} 
```

要找到阶乘，您应该将所有值从 1 乘以您想要阶乘的数字。所以如果`$num = 5`. 只需要一个循环。你会想要运行这个循环。

```
for($i=1;$i<$num;$i++){
    $num*=$i;
} 
```

**我在这里没有给出完整的解决方案，因为这个问题似乎是作业**。如果我给你完整的解决方案，那将是勺子喂养。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:17:07.823

```
$result = 1;
$target = 5;
for ($i = 1;$ i <= $target; $i++)
{
    $result *= $i;
}
echo $result; 
```

或者

```
$result = 1;
$target = 5;
while($target > 0) {
    $result *= $target;
    $target--; // You could do this all in one line, but for learners, this is clearer.
}

echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:18:14.707

每次迭代，您都需要将阶乘的总和乘以`$i`

```
class Math {

    public static function Factorial($factorial) {
        $output = 1;

        for($i = 2; $i <= $factorial; $i++)
            $output *= $i;

        return $output; 
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T05:26:44.283

我已经到了我更喜欢`while(i--)`循环的地方：

```
<?php

class Math {

    public $num = 0;

    public function factorial() {
        $result = 1;
        $num = $this->num;

        while ($num) {
            $result *= $num--;
        }

        return $result;
    }

}

$factor = new Math();

$factor->num = 5;

echo $factor->factorial();

?> 
```

[http://codepad.org/hUOgAoz2](http://codepad.org/hUOgAoz2)

# css - 使用 ajax 仅显示隐藏图像的子集

> ID：12614499
> 
> 赞同：0
> 
> 时间：2012-09-27T05:13:54.893
> 
> 标签：css, ajax

我得到了这个想法，在一个没有 CMS 的网站上……我有大约 50 张图片，不能一次全部显示。所以想法是显示前 15 个，然后单击下一步，隐藏这些并显示下一个 15 等

用 ajax 或 wit php 和 css 来做这件事很热吗？

计数，添加隐藏的类，并显示？

* * *

或另一种方法...在 php 或 jQuery 中，如何使用类“image”获取 div 的前 15 个元素并添加类：showimage，然后单击 NEXT 按钮：删除所有类 showimage，并显示图 16 至 30

* * *

代码看起来像这样：

```
<div id="gallery2"> <!-- Gallery de photos --> 

<a href="ia/new_01.jpg" class="highslide" onclick="return hs.expand(this)">
<img src="timthumb.php?src=ia/new_01.jpg&amp;h=<?php echo $size ?>" title="Cliquer pour agrandir" 
alt="Pont Neuf - Ile de la Cité - Paris - France - Aquarelle <br> Conception personnelle"/></a>

<a href="ia/new_02.jpg" class="highslide" onclick="return hs.expand(this)">
<img src="timthumb.php?src=ia/new_02.jpg&amp;h=<?php echo $size ?>" title="Cliquer pour agrandir" 
alt="Studebaker Hawk - Concept rétro <br> Conception personnelle"/></a>

<a href="ia/new_03.jpg" class="highslide" onclick="return hs.expand(this)">
<img src="timthumb.php?src=ia/new_03.jpg&amp;h=<?php echo $size ?>" title="Cliquer pour agrandir" 
alt="Corvette - Concept rétro <br> Conception personnelle"/></a>

<a href="ia/new_04.jpg" class="highslide" onclick="return hs.expand(this)">
<img src="timthumb.php?src=ia/new_04.jpg&amp;h=<?php echo $size ?>" title="Cliquer pour agrandir" 
alt="Thunderbird - Concept rétro <br> Conception personnelle"/></a>

<a href="ia/new_05.jpg" class="highslide" onclick="return hs.expand(this)">
<img src="timthumb.php?src=ia/new_05.jpg&amp;h=<?php echo $size ?>" title="Cliquer pour agrandir" 
alt="Les autos de mon père <br> Conception personnelle"/></a> 
```

不断地不断地...... 50张图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:17:53.713

您不需要为此使用 ajax。您可以将所有图像 url 放在一个 JS 数组中，然后单击下一步按钮时，您只需隐藏当前的 15 个图像并从数组中添加新的 15 个图像。您可以即时渲染它们。因此图像将由浏览器即时渲染。

```
var images=[]; // it'll contain images.
var ptr=0;
var length = 15;
function show(offset, count){
    for(var i=offset;i<offset+count;i++){
        // add image images[i] in the image container.
    }
}
function next(){
    // empty the image container
    ptr+=length
    show(ptr, length);
}

show(0, length); // initial call to display first chunk of images 
```

现在对于下一个按钮，您只需将`next`功能添加为单击处理程序。

# ios - iOS 4、iOS 5 和 iOS 6 的推送通知有什么区别？

> ID：12614501
> 
> 赞同：0
> 
> 时间：2012-09-27T05:14:04.057
> 
> 标签：ios, apple-push-notifications

嗨，我对苹果 ios 完全陌生。我阅读并搜索了很多关于推送通知的文章，但我没有找到任何关于 APNS 从 io4 到 ios 6 的新更新的任何内容。任何人都可以向我提供正确的信息，APNS 如何在 ios4 到 ios 6 上工作？是否有任何实施变化？

我也知道苹果改变了 PN 在 iOS 4 和 iOS 5 中的显示方式，就像 PN 出现时一样，ios 5 可以在不解锁设备的情况下显示它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:21:26.937

不，实施没有变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:33:13.080

代码没有区别。无论您使用的 ios 版本是什么，您都可以使用相同的代码进行通知。

# unit-testing - 单元测试未出现

> ID：12614502
> 
> 赞同：7
> 
> 时间：2012-09-27T05:14:06.070
> 
> 标签：unit-testing, visual-studio-2012, windows-store-apps

我在 Windows 8 Release Preview 上使用 Visual Studio Express 2012，我似乎无法让我的单元测试出现在测试资源管理器中。

我有一个名为 TestApp.Entity 的类和 TestApp.EntityTest ...

这是我的代码：

```
namespace TestApp.Entity.Test
{
    using System;
    using System.Net.Http;
    using Microsoft.VisualStudio.TestPlatform.UnitTestFramework;
    using TestApp.Domain;

    [TestClass]
    public class EntityTests
    {
        [TestMethod]
        public async void TestObject1Deserialize()
        {
            Uri agencyUri = new Uri("*removed*");
            HttpClient httpClient = new HttpClient();
            HttpResponseMessage response = await httpClient.GetAsync(agencyUri);

            string responseBodyAsText = await response.Content.ReadAsStringAsync();
            List<Agency> agencyList = Deserializers.AgencyDeserialize(responseBodyAsText);

            CollectionAssert.Contains(agencyList, new Agency() { Tag = "*removed*", Title = "*removed*", ShortTitle = "", RegionTitle = "*removed*" });
        }

    }
} 
```

我认为这就是我需要做的所有事情，但它们仍然没有出现在测试资源管理器中。任何意见将是有益的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T14:44:30.690

根据[Stephen Cleary](https://stackoverflow.com/users/263693/stephen-cleary)的说法，“您需要进行单元测试`async Task`，而不是`async void`让它们正常工作”。

这解决了问题并出现了测试。奇怪的是，当我使用 void 时没有出现错误，但现在我知道了。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T12:25:02.890

我有 Visual Studio 2012，但在测试资源管理器中看不到测试，

所以我安装了以下内容：[NUnit Test Adapter](http://visualstudiogallery.msdn.microsoft.com/6ab922d0-21c0-4f06-ab5f-4ecd1fe7175d)

这为我解决了这个问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:19:27.257

对应用程序进行全部重建，包括任何包含测试类和测试方法的项目。它们应该很快就会出现在[测试资源管理器](http://msdn.microsoft.com/en-us/library/hh270865.aspx)中。

# eclipse - 是否可以获得 xPages 内部版本号？

> ID：12614503
> 
> 赞同：0
> 
> 时间：2012-09-27T05:14:10.967
> 
> 标签：eclipse, compilation, lotus-notes, xpages, build-numbers

我在一个应用程序中进行所有开发。当一个新版本准备好时，我创建一个模板并给它一个版本号。这样我就可以存储所有以前版本的历史记录。

开发模板用于通过替换设计将新设计推送到许多应用程序。

创建手动版本号或模板名称很好，但我正在寻找一种更自动的方法来找出不同应用程序继承自哪个构建

当我访问不同的应用程序时，我希望能够查看每个应用程序继承自哪个内部版本号。这可能吗？

一个简单的构建时间戳就可以了，但是是否有一个内置的构建号可以使用并且可以显示在 xpage 上。

例如构建 2012092712345

更新：感谢您的所有回答，许多很好的建议，但看起来都需要手动工作。

最好的解决方案是，如果有一种方法可以从 nsf 中的任何文件中读取（从 ssjs）时间戳，该文件在构建期间始终会更新。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:37:23.237

在经典笔记中，有一种方法可以向应用程序添加具有特殊名称的共享字段。不记得细节，但它在磁盘上的某个地方。然后您可以在应用程序属性的设计选项卡中看到内部版本号。您当然也可以在您的应用程序中显示该值。但是您必须在每次构建时手动填充项目。或者使用teamstudio Buildmanager。此工具会自动添加值。而且我还猜想您可以编写一些代码来在创建新版本时更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:56:57.823

我曾经为“经典”Notes 编写了一个基本的构建系统，并让构建管道的最后一部分创建了一个名为 的表单`_BUILDID_`，并将构建 ID 放在该`$Comment`字段中。

创建表单而不是共享字段的主要原因是我可以使用 动态获取表单`NotesDatabase.Forms`，并打开所需的字段。

我当然希望现在有更简单的解决方案...... :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:12:33.800

另一种选择是使用像 CVS/SVN 这样的版本控制系统。从 8.5.3 开始，这是可能的。

[源代码控制](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CCsQFjAB&url=http://notesin9.com/index.php/2012/01/29/notesin9-041-xpages-designer-souce-control/&ei=QQpkULSoKI6SswbkoYDwAg&usg=AFQjCNFDAxl9qGpvU4LsSYrISxvCPRSssQ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:35:26.727

我想我知道你的意思。您的推出设计并希望通过代码检查每个数据库的版本。我通常使用构建表单来执行此操作。在这种形式中，我计算了包含我想要检索的所有数据的字段。然后我用代理打开数据库创建一个文档并将表单字段设置为“BuildForm”并执行computewithform。现在我可以看到有关该数据库的所有信息。

# wpf - 如何在 Metro 应用程序中限制方向？

> ID：12614508
> 
> 赞同：7
> 
> 时间：2012-09-27T05:14:46.407
> 
> 标签：wpf, windows-8, microsoft-metro, landscape

在我的应用程序中，所有的东西都只处于横向模式。我不希望应用程序在纵向模式下运行。如何限制方向？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T08:10:43.623

[如此链接](http://www.marauderzstuff.com/PermaLink,guid,3a0b6d85-9991-4d85-be21-e5aae3099df3.aspx)中所述，应用程序的方向限制首选项设置仅在具有受支持的硬件加速计的 Windows 8 系统上强制执行。这意味着除非 Windows 通过支持的传感器知道系统如何定位，否则它不会尝试切换到应用程序的首选方向。

所以这一切都取决于用户的硬件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:47:16.223

我遇到了这个问题，并且我想将我的游戏限制为仅横向模式。我把它放在 App.xaml 的 OnLaunched 处理程序中：

```
 Windows.Graphics.Display.DisplayProperties.AutoRotationPreferences =
            Windows.Graphics.Display.DisplayOrientations.Landscape; 
```

但是我注意到在模拟器中它似乎忽略了这一点，而在我测试的硬件平板电脑上它似乎表现得很好。AutoRotationPreferences 是位标志，因此您可以或一起使用您想要允许的所有方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T18:57:40.930

对于希望回答这个问题的人不编写 Metro 应用程序（您可以在清单中设置首选方向或有权访问`Windows.Graphics.Display.DisplayProperties.AutoRotationPreferences`）...

没有真正的方法可以不让方向改变，但是如果您对只允许 Landscape 感兴趣，您可以执行以下操作：

查看型号：

```
Microsoft.Win32.SystemEvents.DisplaySettingsChanged += new           
    EventHandler(SystemEvents_DisplaySettingsChanged);
}

public bool IsLandscape { get; set; }

void SystemEvents_DisplaySettingsChanged(object sender, EventArgs e)
{
  if (SystemParameters.PrimaryScreenWidth > SystemParameters.PrimaryScreenHeight)
  {
      IsLandscape = true;
  }
  else
  {
      IsLandscape = false;
  }

  RaisePropertyChanged( "IsLandscape" );
} 
```

在您的主 Window.xaml 中：

```
<Border >
    <Border.Style>
        <Style TargetType="{x:Type Border}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsLandscape}" Value="False">
                    <Setter Property="LayoutTransform">
                        <Setter.Value>
                            <RotateTransform Angle="90"/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
         </Style>
    </Border.Style>

///The rest of your controls and UI

</Border> 
```

所以我们实际上并没有限制方向，我们只是注意到它何时发生，并重新旋转我们的 UI，使其看起来仍然处于纵向模式 :) 这主要是针对非 Metro Win 8 应用程序和/或应用程序在 Win 7 平板电脑上运行。

# ios - 先加载JSON数据再模拟-iOS

> ID：12614512
> 
> 赞同：0
> 
> 时间：2012-09-27T05:15:29.297
> 
> 标签：ios, json

想象一下，您正在不断地从服务器读取 json 数据。假设您正在获取天气数据。我只想显示 2 小时后的数据。每当用户点击播放按钮时，它都会在地图上显示天气数据。
我如何先保存 json 数据然后将其显示在地图上。因为这将增强我的应用程序，而不是连接服务器、获取数据并同时显示它。请给我建议。我需要先将其保存为 plist 还是数组？在模拟之前我应该​​把这些数据保存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:51:39.747

将其存储在文档目录的 plist 中是一种保存数据以供以后参考的好方法。如果要保存 JSON 字符串，也可以选择 NSUSerDefaults ..（如果字符串不太大，最好）

保存到 plist..

```
 NSURL  *url = [NSURL URLWithString:serverPath];
    NSData *urlData = [NSData dataWithContentsOfURL:url];
    if ( urlData )
    {
        NSArray       *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

        NSString  *documentsDirectory = [paths objectAtIndex:0];  

        NSString  *filePath = [NSString stringWithFormat:@"%@/myplist.plist", documentsDirectory];

        [urlData writeToFile:filePath atomically:YES];
    } 
```

并检索它..

```
NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString  *filePath = [documentsDirectory stringByAppendingPathComponent: 
                      [NSString stringWithFormat: @"%@/myplist.plist",documentsDirectory ] ];

NSData *retrievedData   = [NSData dataWithContentsOfFile:filePath]; 
```

# c# - asp.net 应用程序的登录模块

> ID：12614517
> 
> 赞同：0
> 
> 时间：2012-09-27T05:16:16.927
> 
> 标签：c#, asp.net, login

我在一个基于 java 的项目中工作，我们在其中使用 LDAP 身份验证模块进行登录。我可以为asp应用程序使用这样的（易于使用的）登录模块吗？

1) 我在 localhost 中单独开发一个 asp.net 应用程序。我需要有关如何实现登录功能的建议。

2）我还需要有关如何定义与登录相关的数据库表的建议。我最初想到有一个表 USER 有两列 user_id 和密码。

3）如果我想以加密格式保存密码，我该如何实现整个功能。（如登录验证，注册时保存密码）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:21:19.853

以及各种 MembershipProviders。SqlMembershipProvider 包含最佳实践实现，新的 SimpleMembership 有助于 OpenID 和 OAuth 集成。

关于 SimpleMembership [http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-和-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:09:19.130

**快速解决方案**：按照@AVD 的建议，从工具箱中添加“登录”控件并使用“网站管理工具”。

参考： http: [//msdn.microsoft.com/en-us/library/ssa0wsyf (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ssa0wsyf(v=vs.100).aspx)

**概念/定制解决方案**：

1.  从工具箱添加“登录”控件并使用智能标签将其转换为模板。

2.  好吧，“具有两列 user_id 和密码的表 USER”的想法既简单又好，请继续使用。

3.  DES加密：

    ```
     using System.Security.Cryptography;
    static byte[] key = ASCIIEncoding.ASCII.GetBytes("!)@(#*$&"); //Encrypt Key
    static byte[] IV= ASCIIEncoding.ASCII.GetBytes("qwertyui"); //Initial Value
    protected void Encrypt_Click(object sender, EventArgs e)
    {
         if (String.IsNullOrEmpty(txtPwd.Text))
        {
            throw new ArgumentNullException("The string which needs to be encrypted can not be null.");
        } 
        DESCryptoServiceProvider cryptoProvider = new DESCryptoServiceProvider();
        MemoryStream memoryStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(memoryStream, 
            cryptoProvider.CreateEncryptor(key, IV), CryptoStreamMode.Write);
        StreamWriter writer = new StreamWriter(cryptoStream);
        writer.Write(txtPwd.Text);
        writer.Flush();
        cryptoStream.FlushFinalBlock();
        writer.Flush();
        txtPwd.Text= Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
    }

    protected void Decrypt_Click(object sender, EventArgs e)
    {
        if (String.IsNullOrEmpty(txtPwd.Text))
        {
            throw new ArgumentNullException
               ("The string which needs to be decrypted can not be null.");
        }
        DESCryptoServiceProvider cryptoProvider = new DESCryptoServiceProvider();
        MemoryStream memoryStream = new MemoryStream
                (Convert.FromBase64String(TextBox1.Text));
        CryptoStream cryptoStream = new CryptoStream(memoryStream,
            cryptoProvider.CreateDecryptor(key, IV), CryptoStreamMode.Read);
        StreamReader reader = new StreamReader(cryptoStream);
        txtPwd.Text=reader.ReadToEnd();
    } 
    ```

# postgresql - postgresql 去加密

> ID：12614523
> 
> 赞同：0
> 
> 时间：2012-09-27T05:16:57.507
> 
> 标签：postgresql, encryption, pgcrypto

我有 oracle 数据库可以转移到新的 postgresql 服务器。

一些表具有字段敏感，并且这些表都通过 DBMS_OBFUSCATION_TOOLKIT.DESENCRYPT/DESDECRYPT 加密。

问题就在这里。postgresql的加密数据大小（bytea类型）应该和oracle的一样。

我试图用 aes（加密/解密）来完成它，它几乎是原始数据的三倍。（oracle 使用 des 算法需要 16 字节，postgresql 使用 aes 需要 33 字节，原始数据是 13 字节。）

我也尝试了 postgresql crypt，但手册没有提到将其解密的方式，限制了 8 字节的原始数据大小。

现在我真的需要加密方法，它需要尽可能小的加密数据大小并提供解密方法。

有什么好方法或其他选择吗？？？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T06:30:58.353

## Crypt 和 DES 是旧密码，不应使用

普通的旧 DES 是一种过时的算法。您无法将其与 AES128 进行比较。这就像抱怨 SHA256 哈希值比 MD5 哈希值大 - 是的，但其中只有一个可能会在一段时间内减慢攻击者的速度。即使在 1999 年， DES 也被[广泛认为是弱的](http://en.wikipedia.org/wiki/Data_Encryption_Standard)，永远不应该在新的应用中使用。不要使用它。

我认为寻求“提供尽可能小的数据大小”的加密方法不是一个好主意——因为使用 DES 加密数据基本上是浪费时间。为什么不使用 ROT13（凯撒密码）？“加密”结果与输入的大小相同，可惜加密可以被 3 岁的孩子破解。

*crypt*是类似的年份。旧的[UNIX crypt 散列算法](http://en.wikipedia.org/wiki/Crypt_(Unix))......老旧......并且完全不适合任何新应用程序。哈希应该至少是 SHA256，真的。

## Crypt 是一种单向哈希

至于无法弄清楚如何解密加密数据：*crypt*不是加密算法，它是[加密哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)或“单向哈希”。一种方法哈希适用于验证数据未修改，与存储的[加盐](http://en.wikipedia.org/wiki/Salt_(cryptography))哈希相比，用于密码身份验证，用于[质询-响应身份验证](http://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication)等。您无法解密加密数据。

## 处理大小

使用体面的加密功能并适应大小的增加。`bf`或者`aes128`是您可以合理使用的最弱的。

就个人而言，我更喜欢在应用程序中进行加密/解密，而不是在数据库中。如果它是在数据库中完成的，则密钥可以通过`pg_stat_statements`、在日志中通过`log_statement`或错误等来显示。更好的是，密钥永远不会与存储的数据在同一个地方。

大多数编程语言都有很好的加密例程可以使用。

很难提供更多建议，因为您还没有真正解释您正在加密的内容、原因、您的要求是什么、威胁是什么等。

## 密码？

如果您要存储密码，那么您可能做错了。

*   如果可能，让其他人进行身份验证：

    *   互联网的 OAuth 或 OpenID

    *   用于 Intranet 的 SSPI、Kerberos/GSSAPI、Active Directory、LDAP 绑定、SASL、HTTP DIGEST 等

*   如果您真的必须自己进行身份验证，请在密码中添加盐并对结果进行哈希处理。存储哈希和盐。当您必须比较密码时，使用您用于存储散列的相同盐对来自用户的新明文加盐，散列新密码+盐，并查看散列是否与您存储的相同。如果是，他们给出了正确的密码。

*   您几乎可以肯定不需要恢复明文密码。改为实施安全密码重置。如果你真的，真的必须，使用像 aes 这样相当安全的算法来加密它们，并仔细考虑密钥存储和管理。请参阅 SO 上有关使用 pgcrypto 进行密钥存储/管理的其他帖子。

也可以看看：

*   [存储/检索 PGP 私钥和密码的安全方法？](https://stackoverflow.com/q/12329652/398670)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:35:01.100

根据您的 postgresql 的构建方式，它可能在 pgcrypto 模块中具有 DES 支持。这取决于 Postgres 是否配置了 OpenSSL 支持，因为它依赖 OpenSSL 来执行 DES（而使用其他更现代的算法，它自己实现它们）。

[PGCrypto 算法](http://www.postgresql.org/docs/9.1/static/pgcrypto.html)

如果包含 openssl 支持并且您将 DES 指定为`encrypt`and的算法`decrypt`，则数据应该与您从 Oracle 获得的数据相同（尽管您可能需要指定填充选项）。

正如 Craig 所说，DES 算法很弱，它弱的原因之一是因为输出密文太小了。

# php - Behat Mink webdriver 会话在套件中的每个功能后都被销毁

> ID：12614524
> 
> 赞同：3
> 
> 时间：2012-09-27T05:17:02.757
> 
> 标签：php, selenium, webdriver, behat, mink

我正在尝试使用 behat BDD 和 Mink 与 selenium webdriver for php 自动化 Sugarcrm 功能。我已经正确安装了它们，并且能够一起运行 behat 和 mink。例如检查登录到sugarcrm 作为一项功能。

现在的问题是当我创建两个功能文件时，分别是 login.feature 和 setup.feature。Behat 成功地在浏览器中自动执行登录过程，但一旦切换到需要从以前的功能维护登录会话的 setup.feature，它就会破坏会话并返回登录窗口。因此，第二个功能测试总是失败。

我如何为我的功能套件中的每个功能维护会话？

只是告诉你们，我也在一个功能文件中尝试过它们作为不同的场景，但没有运气，因为同样的事情正在发生

如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T10:31:05.180

功能和场景应该是**独立**的。如果您在一种情况下执行某项操作，则该状态不会转移到下一种情况，这是预期的行为。

我不确定你想要达到什么目标，但你肯定做错了什么。

编辑：

如果您需要在每个场景之前登录用户，只需编写一个元步骤来执行所有必要的操作：

```
Given I am logged in 
```

您可以使用[步骤执行链接](http://docs.behat.org/guides/2.definitions.html#step-execution-chaining)或直接调用 Mink。

如果您的功能文件中的每个场景都需要登录，您可以使用后台：

```
Background:
    Given I am logged in

Scenario: Listing users
    Given ...

Scenario: Removing a user
    Given ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:37:15.403

我完全同意 Jakub Zalas 的回答

尽管如此，如果您的目标是在每个功能中摆脱重复的代码声明背景，我相信您可以使用[钩子](http://docs.behat.org/guides/3.hooks.html)在每个场景之前执行所有必需的操作

# java - 配置 Shiro 以允许匿名访问资源文件夹（JS、CSS 等）

> ID：12614525
> 
> 赞同：8
> 
> 时间：2012-09-27T05:17:02.487
> 
> 标签：java, authentication, spring-mvc, shiro

我在配置 Apache Shiro 以禁用对除 /js 和 /resources 之外的所有页面的匿名访问时遇到问题，因为这会在用户登录之前破坏网站设计和布局。

我当前的 shiro-context.xml 文件有以下部分：

```
/**=authc
/js/** =anon
/resources/** =anon 
```

这将需要对所有页面进行身份验证并将用户重定向到 /login 页面，但正如我之前所说，它会破坏对资源文件的访问。就好像没有拿起第二和第三行指示它允许匿名访问。

难道我做错了什么？我是否应该在所有安全页面的路径前加上 /secure/ 之类的前缀，并允许匿名访问该文件夹上方的所有内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T06:47:40.097

好的，我让它工作了。

文档中的答案：

> 订单很重要！URL 路径表达式按照定义的顺序和 FIRST MATCH WINS 对传入请求进行评估。

我重组了我的定义，如下所示：

```
/js/** =anon
/resources/** =anon
/**=authc 
```

# android - 带有 java.lang.reflect.InvocationTargetException 的 Android 上的 JAIN SIP

> ID：12614527
> 
> 赞同：1
> 
> 时间：2012-09-27T05:17:07.447
> 
> 标签：android, sip, voip, jain-sip

我是一个新的 android 开发人员，目前我正在尝试在 andorid 中实现 JSIP。当我在andorid中添加jsip api时，一个错误告诉我jsip的javax包与java的默认javax包冲突。

所以我把所有的javax包都改成了com.g5.javax.*这种格式。然后错误消失。但现在又出现了另一个错误，我附上了这条消息。它向我抛出 java.lang.reflect.InvocationTargetException 和 javax.sip.PeerUnavailableException: stack name is missing 错误。我检查并仔细检查了 jain sip 源，发现属性键“com.g5.javax.sip.STACK_NAME”（通过使用 eclipse 重构更改）具有我给出的值。但每次都出现错误。另一个有趣的信息是我创建的同一个 jar 包在桌面应用程序中完美运行。我已经坚持这个错误2天了。

```
09-27 04:58:13.819: I/System.out(564): class java.util.Properties
09-27 04:58:13.839: I/System.out(564): {com.g5.javax.sip.STACK_NAME=123}
09-27 04:58:13.869: E/com.g5(564): cannot instantiate
09-27 04:58:13.869: E/com.g5(564): com.g5.javax.sip.PeerUnavailableException: The Peer SIP Stack: gov.nist.javax.sip.SipStackImpl could not be instantiated. Ensure the Path Name has been set.
09-27 04:58:13.869: E/com.g5(564):  at com.g5.javax.sip.SipFactory.createStack(SipFactory.java:332)
09-27 04:58:13.869: E/com.g5(564):  at com.g5.javax.sip.SipFactory.createSipStack(SipFactory.java:154)
09-27 04:58:13.869: E/com.g5(564):  at com.shootme.Shootme.init(Shootme.java:104)
09-27 04:58:13.869: E/com.g5(564):  at com.shootme.Shootme.onCreate(Shootme.java:87)
09-27 04:58:13.869: E/com.g5(564):  at android.app.Activity.performCreate(Activity.java:4465)
09-27 04:58:13.869: E/com.g5(564):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-27 04:58:13.869: E/com.g5(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-27 04:58:13.869: E/com.g5(564):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-27 04:58:13.869: E/com.g5(564):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-27 04:58:13.869: E/com.g5(564):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-27 04:58:13.869: E/com.g5(564):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-27 04:58:13.869: E/com.g5(564):  at android.os.Looper.loop(Looper.java:137)
09-27 04:58:13.869: E/com.g5(564):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-27 04:58:13.869: E/com.g5(564):  at java.lang.reflect.Method.invokeNative(Native Method)
09-27 04:58:13.869: E/com.g5(564):  at java.lang.reflect.Method.invoke(Method.java:511)
09-27 04:58:13.869: E/com.g5(564):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-27 04:58:13.869: E/com.g5(564):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-27 04:58:13.869: E/com.g5(564):  at dalvik.system.NativeStart.main(Native Method)
09-27 04:58:13.869: E/com.g5(564): Caused by: java.lang.reflect.InvocationTargetException
09-27 04:58:13.869: E/com.g5(564):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-27 04:58:13.869: E/com.g5(564):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
09-27 04:58:13.869: E/com.g5(564):  at com.g5.javax.sip.SipFactory.createStack(SipFactory.java:322)
09-27 04:58:13.869: E/com.g5(564):  ... 17 more
09-27 04:58:13.869: E/com.g5(564): Caused by: javax.sip.PeerUnavailableException: stack name is missing
09-27 04:58:13.869: E/com.g5(564):  at gov.nist.javax.sip.SipStackImpl.<init>(SipStackImpl.java:554) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:56:08.740

我也遇到了同样的问题，所以我尝试更深入地挖掘，因为没有报告堆栈实现的错误。从这里我得到了这个错误：

```
11-11 18:51:01.025: W/System.err(17454): javax.sip.PeerUnavailableException: stack name is missing
11-11 18:51:01.025: W/System.err(17454):    at gov.nist.javax.sip.SipStackImpl.<init>(SipStackImpl.java:554)
11-11 18:51:01.025: W/System.err(17454):    at not.javax.sip.SipFactory.createStack(SipFactory.java:322)
11-11 18:51:01.025: W/System.err(17454):    at not.javax.sip.SipFactory.createSipStack(SipFactory.java:171)
11-11 18:51:01.025: W/System.err(17454):    at org.jaintest.MainActivity.init(MainActivity.java:110)
11-11 18:51:01.025: W/System.err(17454):    at org.jaintest.MainActivity.onCreate(MainActivity.java:68)
11-11 18:51:01.025: W/System.err(17454):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-11 18:51:01.025: W/System.err(17454):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
11-11 18:51:01.025: W/System.err(17454):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-11 18:51:01.025: W/System.err(17454):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-11 18:51:01.025: W/System.err(17454):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-11 18:51:01.025: W/System.err(17454):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-11 18:51:01.025: W/System.err(17454):    at android.os.Looper.loop(Looper.java:123)
11-11 18:51:01.025: W/System.err(17454):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-11 18:51:01.025: W/System.err(17454):    at java.lang.reflect.Method.invokeNative(Native Method)
11-11 18:51:01.025: W/System.err(17454):    at java.lang.reflect.Method.invoke(Method.java:507)
11-11 18:51:01.025: W/System.err(17454):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
11-11 18:51:01.025: W/System.err(17454):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
11-11 18:51:01.025: W/System.err(17454):    at dalvik.system.NativeStart.main(Native Method) 
```

现在问题来了。我查看了 SipStackImpl 类的代码，发现了以下几行：

```
String name = configurationProperties
    .getProperty("com.tlccom.javax.sip.STACK_NAME");
if (name == null) 
    throw new PeerUnavailableException("stack name is missing"); 
```

所以这意味着这个名字没有被选中。所以我给这个名字一个字符串值，但仍然得到错误，这让我相信 SipStackImpl 是从其他地方获取的。问题是我不知道在哪里，我已经在整个项目中搜索了那个错误，这是它唯一存在的地方，所以它一定来自某个地方（即使注释掉错误检测仍然会留下错误）。这就是我现在卡住的地方，希望这会有所帮助，如果你发现任何额外的东西，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T11:44:31.310

刚刚完成它可以在 Android 4.4.2 上运行。

**我相信的第一件事就是做你所做的。例如，您将`javax`名称空间更改为其他内容：`whatever.javax.*`。**

然后我遇到了 Martin 在他的回答中提到的同样的问题，我很感谢他在 SO 上所说的话。看起来`gov.nist`名称空间在运行时也出现在其他地方。所以我所做的是：**将`gov.nist.*`名称空间也更改`gov.nist.whatever`为（当然还有对它的所有引用）。**

**此外，您需要在`"gov.nist.whatever.javax.sip.STACK_NAME"`**某处提供该属性。你可以这样做：

```
Properties properties = new Properties();
properties.setProperty("sipper.sip.STACK_NAME", "stack"); 
```

[正如迈克在此答案](https://stackoverflow.com/a/18060630/1006860)中指出的那样，应用程序中的某处。

毕竟，我遇到`NoClassFoundError`了类异常的问题`org.apache.log4j.Logger`，即使我的类路径中有相应的 jar。**因此，我将所有 jar 从“asset”项目目录移到了一个名为“libs”的新目录中。用新的目录方案重新配置了我的项目的类路径**，它就像一个魅力（好的，没有夸大其词）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T13:00:11.207

您需要在属性中为键**javax.sip.STACK_NAME设置一个名称**

```
properties.setProperty("javax.sip.STACK_NAME", "myStack"); 
```

# svg - 如何根据视口调整 SVG 变换？

> ID：12614528
> 
> 赞同：1
> 
> 时间：2012-09-27T05:17:19.253
> 
> 标签：svg, zooming, scale, transformation

我正在使用 d3 库，并且成功使用了 chloropleth 示例，并获得了单击操作以放大到特定状态（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/12467504/how-do-i-get-my-d3-map-to-zoom-to-a-location/12499290#12499290)）。特别是，这是我用于单击以缩放某个状态的事件的代码：

```
// Since height is smaller than width, 
var baseWidth = 564;
var baseHeight = 400;

d3.selectAll('#states path')
    .on('click', function(d) {
        // getBBox() is a native SVG element method
        var bbox = this.getBBox(),
            centroid = [bbox.x + bbox.width/2, bbox.y + bbox.height/2],
            // since height is smaller than width, I scale based off of it.
            zoomScaleFactor = baseHeight / bbox.height,
            zoomX = -centroid[0],
            zoomY = -centroid[1];

        // set a transform on the parent group element
        d3.select('#states')
            .attr("transform", "scale(" + scaleFactor + ")" +
                "translate(" + zoomX + "," + zoomY + ")");
    }); 
```

但是，当我单击以查看状态时，我的变换不在视口的中心，而是在左上角，并且它可能也没有适当的比例。如果我手动对 scaleFactor 或 zoomX/zoomY 参数进行微调，我会完全丢失该项目。我熟悉这样一个概念，即一起进行缩放和变换会产生显着不同的结果，所以我不确定如何调整。

我唯一能想到的另一件事是原始叶绿素图像设置为 960 x 500 图像。为了适应这个。我创建了一个 albersUSA 投影并将我的 d3.geo.path 与此投影一起使用，并继续相应地添加我的路径。

我的变换是否受到投影的影响？如果是，我将如何适应它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:24:28.110

缩放变换需要像旋转变换一样处理（没有可选的 cx,cy 参数），也就是说，您要变换的对象必须首先移动到原点。

```
d3.select('#states')
            .attr("transform",
                  "translate(" + (-zoomX) + "," + (-zoomY) + ")" +
                  "scale(" + scaleFactor + ")" +
                  "translate(" + zoomX + "," + zoomY + ")"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:05:16.550

为了进一步参考，

我找到[了这篇文章](http://www.petercollingridge.co.uk/interactive-svg-components/pan-and-zoom-control)，您应该可以在其中找到如何使用矩阵变换非常简单地实现缩放和平移效果。

摘录：

```
<script type="text/ecmascript">
    <![CDATA[
      var transMatrix = [1,0,0,1,0,0];

      function init(evt)
      {
        if ( window.svgDocument == null )
        {
          svgDoc = evt.target.ownerDocument;
        }
        mapMatrix = svgDoc.getElementById("map-matrix");
        width  = evt.target.getAttributeNS(null, "width");
        height = evt.target.getAttributeNS(null, "height");
      }
    ]]>
</script>

function pan(dx, dy)
{      
  transMatrix[4] += dx;
  transMatrix[5] += dy;

  newMatrix = "matrix(" +  transMatrix.join(' ') + ")";
  mapMatrix.setAttributeNS(null, "transform", newMatrix);
}
function zoom(scale)
{
  for (var i=0; i<transMatrix.length; i++)
  {
    transMatrix[i] *= scale;
  }

  transMatrix[4] += (1-scale)*width/2;
  transMatrix[5] += (1-scale)*height/2;

  newMatrix = "matrix(" +  transMatrix.join(' ') + ")";
  mapMatrix.setAttributeNS(null, "transform", newMatrix);
} 
```

# google-apps - 使用现有 Google ID 为 Google Apps 注册域

> ID：12614531
> 
> 赞同：0
> 
> 时间：2012-09-27T05:17:32.003
> 
> 标签：google-apps

如果已经在该域下创建了 Google ID，是否可以为 Google Apps 注册一个域，而不会破坏现有的 Google ID？

示例：user@example.com 是 Google ID，用于 Analytics 和 Adwords。如果 example.com 现在已注册 Google Apps，user@example.com 用户 ID 会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:22:16.953

您的“旧”谷歌 ID 的数据不会发生任何事情。当您第一次使用您的 google 应用程序 ID 登录服务时，google 会询问您是否要将数据迁移到 google 应用程序帐户或另一个 google 帐户。

亲切的问候，

托马斯·范拉图姆

# cpan - 如果 cpan 有 0.13 版本的模块，我如何安装 0.12 版本的模块？

> ID：12614533
> 
> 赞同：2
> 
> 时间：2012-09-27T05:17:39.550
> 
> 标签：cpan, perl-module

我想安装`XML::XpathEngine`版本的模块`0.12`。但`cpan`有`XML::XpathEngine` `0.13`版本。

如何安装`XML::XpathEngine` `0.12`版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T23:49:58.260

你只需要问它：

```
cpanm MIROD/XML-XPathEngine-0.12.tar.gz 
```

它将安装您需要的版本。要找到您想要的版本的确切路径，请转到战队网站，在页面左侧搜索版本并转到此版本。您应该找到可以从 PAUSE 截断的“下载”链接到存档扩展名，并用作您最喜欢的 cpan 客户端的参数。

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL after code pass jslint“use strict”检查没问题

> ID：12614535
> 
> 赞同：0
> 
> 时间：2012-09-27T05:17:50.447
> 
> 标签：javascript, jquery, use-strict

我的队友提供了以下代码

```
/*jslint browser: true*/
/*jslint vars: true */
/*global $, jQuery*/
/*global dialog*/

function accessControls() {
    "use strict";

    $('#loginLink, #registerLink').click(function (e) {
        e.preventDefault();
        if ($(this).data("disabled") === "false") {
            $("a.accessLink").data("disabled", "true");
            dialog(this);
        }
    });

} 
```

这是HTML：

```
<a  class="button accessLink"
            id="loginLink"
            href="#"
            data-action="Login"
            data-dialog="access"
            data-disabled="false"
            data-entity="n/a"
            data-href="/MyAccount/Access/Login"
            title="Login">Login</a> 
```

它在 Chrome 浏览器中给我一条消息，上面写着：Uncaught SyntaxError: Unexpected token ILLEGAL。消息出现在上面代码的最后一个分号之后。有谁知道出了什么问题。

请注意，当我注释掉行对话框时，它会起作用。那么这与“this”有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:28:53.533

如果您对布尔变量使用相等运算符（===），那么您不需要将 false 作为字符串传递

```
if($(this).data("disabled") === "false"){
// some code
} 
```

需要更改

```
if($(this).data("disabled") === false) {
// some code 
} 
```

无论如何，如果您可以发布包装它的代码，那将更好地理解。

以及您在哪个 jQuery 对象上调用 dialog()？

# php - 如何为所有其他类实现数据库类？

> ID：12614538
> 
> 赞同：0
> 
> 时间：2012-09-27T05:17:59.583
> 
> 标签：php, database, class

我有大量的课程：一个主论坛课程、一个论坛板课程和一个线程课程。这些可以被认为是我网站上下文中的模型。

以前的 Web 开发人员使用的设置在这些类中的每一个中创建一个新的 mysqli 连接，并在类的实例化时连接。这意味着在主题页面中，论坛、主题和用户有 3 个不同的连接。这显然不是理想的，我认为甚至不是最佳的。

我在以前的项目中工作，我可以简单地将数据库类的一个新实例传递给我正在使用的类，但这并不理想，因为我需要实例化多个类并将一个数据库实例传递给每个类会失败目的。

在这些类中的每一个中，都会进行数据库调用，因此每个类中都需要数据库对象/实例，而不必分别实例化它 3 次以上。

例如，在线程类中，您可以：

```
function get_threads($board_id) {
    return $this->con->query("some query");
} 
```

有谁知道我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:44:45.247

我更喜欢一个数据库控制器，您可以从工厂模式中获取数据。在下面的示例中，您可以只创建一个控制器并让您的组件根据需要使用它。

```
ex: $threads = new ThreadClass($mysqlConnection); 
```

我希望这有帮助

```
# 1\. mysql source or "socket" using PDO
class SimpleDatabaseSocket {

    protected static $dbh = false;

    public function connect($database, $user, $pass, $host) {
        $dsn = "mysql:dbname={$database};host={$host}";
        self::$dbh = new PDO($dsn, $user, $pass);
        self::$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

}

# 2\. always use an interface which defines required logic
interface SimpleDatabaseInterface {

    public function onRunQuery($query);
}

# 3\. create the accessible controller for inherited & ancillary logic
class SimpleDatabaseController extends SimpleDatabaseSocket implements SimpleDatabaseInterface {

    private $host = "";
    private $base = "";
    private $usr = "";
    private $pwd = "";
    private $table = "";

    # when we create the controller, you MUST pass the connection params
    public function __construct($host, $usr, $pwd, $base) {
        $this->setUsr($usr);
        $this->setPwd($pwd);
        $this->setBase($base);
        $this->setHost($host);
    }

    # mysql host/ip
    public function setHost($host) {
        $this->host = $host;
    }

    # mysql database
    public function setBase($base) {
        $this->base = $base;
    }

    # mysql username
    public function setUsr($usr) {
        $this->usr = $usr;
    }

    # mysql password
    public function setPwd($pwd) {
        $this->pwd = $pwd;
    }
    # allow this controller to switch tables dynamically.
    public function onChangeTable($table) {
        $this->table = $table;
    }

    # connect to the database
    protected function onConnect() {
        $this->connect($this->base, $this->usr, $this->pwd, $this->host);
    }

    # connects to the DB and runs a custom query
    public function onRunQuery($query) {
        try {
            if (!self::$dbh)
                $this->onConnect();
            $result = self::$dbh->query($query);
            $out = $result->fetchAll(PDO::FETCH_ASSOC);
        } catch (PDOException $e) {

        }
        return $out;
    }

}

# exmaple usage
$mysql = new SimpleDatabaseController("HOSTNAME","USERNAME","PASSWORD","DATABASE");
$result = $mysql->onRunQuery("SELECT * FROM TABLE LIMIT 0,2");
print("<pre>" . print_r($result, true) . "</pre>"); 
```

# php - 如何使用 PHP/jQuery 实现加载时唯一用户？

> ID：12614539
> 
> 赞同：0
> 
> 时间：2012-09-27T05:18:00.280
> 
> 标签：php, jquery

我有一个网页，其中存储单击页面上按钮的人的用户 ID。单击按钮后，该用户需要能够看到只有该用户才能看到的内容（只是另一个按钮）。该页面上的其他用户将无法看到该按钮。

我遇到的问题是我不知道如何使用该唯一用户 ID（它是超全局的）在加载时识别用户 ID 是什么，以及如果它是正确的用户如何执行，显示其他隐藏的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:20:35.510

我也遇到了同样的问题

你有两个选择来解决这个问题

1.  使用 PHP 全局变量，如`$_COOKIE[]`or `$_SESSION{]`；存储该用户的 id

2.  或者您可以使用数组类型的数据库字段。它将存储特定用户单击的按钮的值（使用数据库会更有效，因为您可以随时使用它并且它不会过期）

# loadrunner - 不同行中的相关性——LoadRunner 11——协议 http/html

> ID：12614540
> 
> 赞同：0
> 
> 时间：2012-09-27T05:18:04.023
> 
> 标签：loadrunner

Correlation is on different lines when select LB and RB getting message - Invalid selection selected value cannot be greater than one line. 因此，在脚本中，我正在捕获不同参数中的所有行，如下所示 web_reg_save_param("Corr_P1", "LB=![CDATA[", "RB=\n", "Ord=1", LAST);

同样，我在不同的行上捕获参数-

```
web_reg_save_param("Corr_P2", "LB=<token>![CDATA[", "RB=\n", "Ord=1", LAST);
web_reg_save_param("Corr_P3", "LB\n", "RB=\n", "Ord=24", LAST);
web_reg_save_param("Corr_P4", "LB=\n", "RB=\n", "Ord=25", LAST);
web_reg_save_param("Corr_P5", "LB=\n", "RB=\n", "Ord=26, LAST);
web_reg_save_param("Corr_P6", "LB=\n", "RB=\n", "Ord=27", LAST); 
```

在记录期间，所有 6 行都有值。但是在 Corr_P5 中的重播值是空白的。因此它失败了。请提出可能的问题并为我提供解决方案。

所以我想在一个变量中获取这些值并将其连接起来。但它不起作用。有人可以用 C 语言提供一个示例代码来解决这个问题。

提前致谢。

问候，

夜叉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:49:02.177

捕获数据

```
web_reg_save_param("Corr_P6", "LB=\n", "RB=\n", "Ord=?", LAST); 
```

捕获确切的行号。这将是一个问题，尤其是当您拥有动态数据时。在某个地方再有一个 HTTP 标头或一个额外的 \n 就足够了，您的代码将失败。

从第一行的**![CDATA**我假设从服务器返回的数据是 XML。在这种情况下，我将捕获整个输出并使用 XML 函数对其进行解析：

```
web_reg_save_param("XML","LB=","RB=","Search=Body",LAST); // Take whole BODY

// Get a value from <tag1></tag2><tagN>data</tagN></tag2></tag1>
lr_xml_get_values("XML={XML}", "ValueParam=Corr_Px", "Query=/tag1/tag2/tagN", "NotFound=Continue", LAST); 
```

LoadRunner 有一些不错的*XML 函数*，只需在帮助中搜索即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:50:03.100

可能有点晚了，但是在您的脚本中，您缺少 P5 的右引号：也许这会有所作为。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:27:32.710

您是否尝试过“LB=/n”、“RB=/n”、“ORD=ALL”来查看实际返回的内容

# mysql - MyISAM 和 InnoDB 有什么区别？

> ID：12614541
> 
> 赞同：272
> 
> 时间：2012-09-27T05:18:04.837
> 
> 标签：mysql, database, innodb, myisam

我知道这个问题以前曾被问过，但大多数时候是针对特定数据库或表提出的。我无法在此站点上找到描述这两个引擎及其差异的答案，而不考虑某人的特定数据库。

我希望将来能够在设计表或数据库方面做出更明智的决定，因此我正在寻找关于两个存储引擎之间差异的全面答案。

[MyISAM](http://en.wikipedia.org/wiki/MyISAM)和[InnoDB](http://en.wikipedia.org/wiki/InnoDB)之间有什么区别，在尝试选择其中一个时我应该寻找什么？

* * *

## 回答 #1

> 赞同：433
> 
> 时间：2012-09-27T05:33:43.997

InnoDB 和 MyISAM 之间的主要区别（“关于设计表或数据库”您询问）是对“引用完整性”和“事务”的支持。

如果您需要数据库来强制执行外键约束，或者您需要数据库来支持事务（即，由两个或多个 DML 操作所做的更改作为单个工作单元处理，应用所有更改，或者还原所有更改）那么你会选择 InnoDB 引擎，因为 MyISAM 引擎没有这些功能。

这是最大的两个区别。另一个很大的区别是并发性。使用 MyISAM，DML 语句将获得表上的排他锁，并且在持有该锁时，没有其他会话可以对表执行 SELECT 或 DML 操作。

您询问的这两个特定引擎（InnoDB 和 MyISAM）具有不同的设计目标。MySQL 也有其他存储引擎，有自己的设计目标。

因此，在 InnoDB 和 MyISAM 之间进行选择时，第一步是确定您是否需要 InnoDB 提供的功能。如果没有，那么 MyISAM 值得考虑。

对差异进行更详细的讨论是不切实际的（在这个论坛中），如果没有对问题空间进行更详细的讨论......应用程序将如何使用数据库，有多少表，表的大小，事务负载，选择量、插入、更新、并发要求、复制特性等。

* * *

数据库的逻辑设计应以数据分析和用户需求为中心；使用关系数据库的选择会在以后出现，甚至更晚会选择 MySQL 作为关系数据库管理系统，然后为每个表选择存储引擎。

* * *

## 回答 #2

> 赞同：353
> 
> 时间：2013-04-29T02:55:57.517

米萨姆：

1.  MISAM 支持表级锁定
2.  MyISAM 专为速度需求而设计
3.  MyISAM 不支持外键，因此我们将 MySQL 与 MISAM 称为 DBMS
4.  MyISAM 使用单独的三个不同文件将其表、数据和索引存储在磁盘空间中。（表名.FRM、表名.MYD、表名.MYI）
5.  MISAM 不支持交易。您不能使用 MISAM 提交和回滚。一旦你发出一个命令，它就完成了。
6.  MISAM 支持全文搜索
7.  您可以使用 MyISAM，如果表更静态，选择较多，更新和删除较少。

诺德：

1.  InnoDB 支持行级锁定
2.  InnoDB 专为处理大量数据时的最佳性能而设计
3.  InnoDB 支持外键因此我们称 MySQL 与 InnoDB 是 RDBMS
4.  InnoDB 将其表和索引存储在表空间中
5.  InnoDB 支持事务。您可以使用 InnoDB 提交和回滚

# android - 掩蔽（裁剪）帧中的图像

> ID：12614542
> 
> 赞同：83
> 
> 时间：2012-09-27T05:18:10.707
> 
> 标签：android, image, bitmap, masking, porter-duff

有一个丰富的 UI 应用程序，我想在其中显示像这样复杂形状的图像

![在此处输入图像描述](../Images/f4f6857e442e1da12d316e7c21d03908.png)

现在我想要的是根据蒙版图像裁剪我的图像，实际上*图像是动态的，可以从相机或画廊（方形或矩形）导入*，我希望该图像适合我的布局框架，如上面

所以只是想知道我是如何做到这一点的？欢迎任何想法/提示

**背景框**
![在此处输入图像描述](../Images/a187ba5877355cd7f3b5a5b3a095e1ce.png)
**遮罩**
![在此处输入图像描述](../Images/1c34dd9fbed4e130079c6ea5062b16bb.png)

像[**这样**](https://stackoverflow.com/questions/5299452/how-can-i-crop-an-image-with-mask-and-combine-it-with-another-image-background)

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-09-28T09:14:34.977

终于在更改蒙版图像和使用`Xfermode`with时得到了解决方案`Bitmap`

**面具**

![在此处输入图像描述](../Images/25035608e209d53a430b61372d74c146.png)

```
 ImageView mImageView= (ImageView)findViewById(R.id.imageview_id);
 Bitmap original = BitmapFactory.decodeResource(getResources(),R.drawable.content_image);
 Bitmap mask = BitmapFactory.decodeResource(getResources(),R.drawable.mask);
 Bitmap result = Bitmap.createBitmap(mask.getWidth(), mask.getHeight(), Config.ARGB_8888);
 Canvas mCanvas = new Canvas(result);
 Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
 mCanvas.drawBitmap(original, 0, 0, null);
 mCanvas.drawBitmap(mask, 0, 0, paint);
 paint.setXfermode(null);
 mImageView.setImageBitmap(result);
 mImageView.setScaleType(ScaleType.CENTER);
 mImageView.setBackgroundResource(R.drawable.background_frame); 
```

见输出

![在此处输入图像描述](../Images/47e5a664a3a3f8142aeff4bfea935222.png)

来源可以在**[这里找到](https://github.com/hotveryspicy/MaskImage)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-25T05:45:41.920

使用 Picasso 库和自定义转换更加容易：

MaskTransformation.java：

```
 * ORIGINAL:
 * Copyright (C) 2015 Wasabeef
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package me.monori.example.utilities;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.graphics.drawable.Drawable;
import android.support.v4.content.ContextCompat;

import com.squareup.picasso.Transformation;

public class MaskTransformation implements Transformation {

    private static Paint mMaskingPaint = new Paint();
    private Context mContext;
    private int mMaskId;

    static {
        mMaskingPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    }

    /**
     * @param maskId If you change the mask file, please also rename the mask file, or Glide will get
     * the cache with the old mask. Because getId() return the same values if using the
     * same make file name. If you have a good idea please tell us, thanks.
     */
    public MaskTransformation(Context context, int maskId) {
        mContext = context.getApplicationContext();
        mMaskId = maskId;
    }

    @Override public Bitmap transform(Bitmap source) {
        int width = source.getWidth();
        int height = source.getHeight();

        Bitmap result = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

        Drawable mask = getMaskDrawable(mContext, mMaskId);

        Canvas canvas = new Canvas(result);
        mask.setBounds(0, 0, width, height);
        mask.draw(canvas);
        canvas.drawBitmap(source, 0, 0, mMaskingPaint);

        source.recycle();

        return result;
    }

    @Override public String key() {
        return "MaskTransformation(maskId=" + mContext.getResources().getResourceEntryName(mMaskId)
                + ")";
    }

    public Drawable getMaskDrawable(Context context, int maskId) {
        Drawable drawable = ContextCompat.getDrawable(context, maskId);

        if (drawable == null) {
            throw new IllegalArgumentException("maskId is invalid");
        }

        return drawable;
    }
} 
```

然后简单地在一行中定义它：

```
Picasso.with(context)
                    .load(imageUrl)
                    .transform(new MaskTransformation(context, _maskDrawableId))
                    .placeholder(R.drawable.drawableId)
                    .into(imageView); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T10:37:36.823

```
 final ImageView mImageView = (ImageView) findViewById(R.id.image);
     mImageView.setBackgroundResource(R.drawable.user_outer_circle_icon);

     mImageView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(b){
                 mImageView.setBackgroundResource(R.drawable.profil_circle);

                 Bitmap original = BitmapFactory.decodeResource(getResources(),R.drawable.doge);

                 Bitmap mask = BitmapFactory.decodeResource(getResources(),R.drawable.mask_white);

                 Bitmap mask1 = BitmapFactory.decodeResource(getResources(),R.drawable.pencil_bg);

                 original = Bitmap.createScaledBitmap(original, mask.getWidth(),mask.getHeight(), true);

                 Bitmap result = Bitmap.createBitmap(mask.getWidth(), mask.getHeight(),Config.ARGB_8888);
                 Canvas mCanvas = new Canvas(result);
                 Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
                 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
                 mCanvas.drawBitmap(original, 0, 0, null);
                 mCanvas.drawBitmap(mask, 0, 0, paint);
                 mCanvas.drawBitmap(mask1, 0, 0, null);
                 Bitmap mask2 = BitmapFactory.decodeResource(getResources(), R.drawable.ic_pencil);
                 mCanvas.drawBitmap(mask2, 0, 0, null);
                 mImageView.setImageBitmap(result);
                 mImageView.setScaleType(ScaleType.FIT_XY);

                 b=false;
             }else{
                 ImageView mImageView = (ImageView) findViewById(R.id.image);
                 Bitmap original = BitmapFactory.decodeResource(getResources(),
                 R.drawable.doge);

                 Bitmap mask = BitmapFactory.decodeResource(getResources(),
                 R.drawable.mask_white);

                 original = Bitmap.createScaledBitmap(original, mask.getWidth(),
                 mask.getHeight(), true);

                 Bitmap result = Bitmap.createBitmap(mask.getWidth(), mask.getHeight(),
                 Config.ARGB_8888);
                 Canvas mCanvas = new Canvas(result);
                 Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
                 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
                 mCanvas.drawBitmap(original, 0, 0, null);
                 mCanvas.drawBitmap(mask, 0, 0, paint);
                 paint.setXfermode(null);
                 mImageView.setImageBitmap(result);
                 mImageView.setScaleType(ScaleType.FIT_XY);
                // mImageView.setBackgroundResource(R.drawable.user_outer_circle_icon);
                 b= true;

             }

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-24T07:16:29.627

这个例子用掩码“animation_mask”屏蔽了他的子元素（Imageview）

```
<com.christophesmet.android.views.maskableframelayout.MaskableFrameLayout
android:id="@+id/frm_mask_animated"
android:layout_width="100dp"
app:porterduffxfermode="DST_IN"
app:mask="@drawable/animation_mask"
android:layout_height="100dp">

<ImageView android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:scaleType="centerCrop"
           android:src="@drawable/unicorn"/> 
```

[检查这个 git 链接](https://github.com/christophesmet/android_maskable_layout)

# php - 在每个页面上将图片库添加到 eZ Publish 4.0

> ID：12614548
> 
> 赞同：0
> 
> 时间：2012-09-27T05:18:31.633
> 
> 标签：php, gallery, ezpublish

我想在 eZ Publish 4.0.0 安装的每个页面上添加一个（可选）图像库。我发现了一些扩展，但据我所知，这些画廊是额外的页面。我怎样才能做到这一点？

它不应该是一个 Flash 画廊，如果我有更大尺寸的图像的链接，那么以缩略图大小的所有图像的简单输出就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:43:22.297

使用父子关系应该是一种简单的方法，可以在所有内容上独立于内容类来实现这一点。

您必须在每个包含图库的内容类上设置容器标志。
然后您应该能够向实例添加子节点，因此您只需将“图像”子节点添加到保存画廊的节点。

之后，您所要做的就是在节点模板中获取图像，如下所示：

```
{def $gallery_images= fetch( 'content', 'list', hash(
   'parent_node_id', $node.node_id,
   'sort_by', $node.sort_array,
   'class_filter_array', array('image'),
   'class_filter_type', 'include'
))} 
```

并循环以您想要的图像别名显示它们：

```
<ul class="gallery">
{foreach $gallery_images as $image}
<li>{attribute_view_gui attribute=$image.data_map.image image_class='small'}</li>
{/foreach}
</ul> 
```

如果您可以升级到 eZ Publish 的更新版本，您还可以使用 multi ulpload 扩展，这将使一次上传多张图像变得轻而易举。

# sql - 父子引用 SQL 查询

> ID：12614551
> 
> 赞同：0
> 
> 时间：2012-09-27T05:18:47.210
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-ce

我有父 + 参考表，其中参考表如下

```
Ref_ID    PARENT_ID    
-------------------
1           1            
2           1            
1           2       
3           2       
1           3       
3           3       
4           3       
2           4       
3           4 
```

尝试使用联接而不是使用子查询返回所有不同的父行 WHERE ref_id in ( 2, 3 )，但通过联接查询为父级返回重复项

任何帮助表示赞赏

仅供参考 - 查询中有 4-7 个表（取决于用户选择），因此性能是一个重要因素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:14:04.277

试试这个

```
select distinct parent_field1,parent_field2 
from parent left outer reference
on parent.parent_id=reference.parent_id
where reference.ref_id(2,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:31:39.697

行，

首先是代码

```
DECLARE @Temp TABLE(
Ref_ID int,
ParentID int
)

INSERT INTO @Temp VALUES (1 , 1)
INSERT INTO @Temp VALUES (2 , 1)
INSERT INTO @Temp VALUES (1 , 2)
INSERT INTO @Temp VALUES (3 , 2)
INSERT INTO @Temp VALUES (1 , 3)
INSERT INTO @Temp VALUES (3 , 3)
INSERT INTO @Temp VALUES (4 ,3)
INSERT INTO @Temp VALUES (2 , 4)
INSERT INTO @Temp VALUES (3 , 4)

--First Example witout Ref_ID
SELECT 
  DISTINCT ParentID
FROM @Temp
WHERE Ref_ID IN (2,3)

--SECOND Example With Ref_ID
SELECT 
   DISTINCT ParentID,
   Ref_ID
FROM @Temp
WHERE Ref_ID IN (2,3) 
```

第一个查询返回 ParentID 的不同记录。它工作正常，因为我也没有请求 Ref_Id。

只是为了在您请求 Ref_ID 时向您解释，该查询尝试返回不同的 ParentID。但是看看你的记录，你有两个 ParentID，它们等于 4，但是**Ref_ID 不同，**所以他把它们都返回了。都符合查询规则 ![在此处输入图像描述](../Images/fefda0d3faad1a4ec4c88326f848ae9e.png)

# vb.net - ASPxGridViewExporter 不导出数据

> ID：12614564
> 
> 赞同：0
> 
> 时间：2012-09-27T05:20:00.197
> 
> 标签：vb.net, devexpress, aspxgridview

我有开发快递 ASPxGridView。gridview 的列和数据将根据下拉值动态变化。

```
 If type = "procedure" Then
        SqlDataSource2.SelectCommandType = SqlDataSourceCommandType.StoredProcedure
    Else
        SqlDataSource2.SelectCommandType = SqlDataSourceCommandType.Text
    End If

    SqlDataSource2.SelectCommand = rptquery

    Try
        SqlDataSource2.DataBind()
        dataview1 = SqlDataSource2.Select(System.Web.UI.DataSourceSelectArguments.Empty)
        gv.DataSourceID = "SqlDataSource2"
        For Each dc In dataview1.Table.Columns
            Dim DynamicColumn = New DevExpress.Web.ASPxGridView.GridViewDataTextColumn()
            DynamicColumn.FieldName = dc.ColumnName
            DynamicColumn.Caption = dc.ColumnName

            gv.Columns.Insert(i, DynamicColumn)
            i = i + 1

        Next
        gv.DataBind()

    Catch ex As Exception

    End Try 
```

然后我有导出按钮到excel。我的问题是它只会将gridview的列名导出到excel sheey中。数据为空。但在 gridview 中显示数据。请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:38:04.530

确保在使用 ASPxGridViewExporter.Write*** 方法之前已绑定 ASPxGridView：

```
'SqlDataSource2.DataBind()
'dataview1 = SqlDataSource2.Select(System.Web.UI.DataSourceSelectArguments.Empty)

ASPxGridViewExporterInstance.GridView = gv
gv.DataSource = SqlDataSource2
ASPxGridViewExporterInstance.Write*** 
```

# ruby-on-rails - 视图中的 link_to 控制器操作

> ID：12614566
> 
> 赞同：0
> 
> 时间：2012-09-27T05:20:22.623
> 
> 标签：ruby-on-rails

在我的 routes.rb 中我有资源：x 但我还有另一个控制器 y，并且在其中一个页面中我想链接到控制器 x 中的“新”操作。

通常如果我在路由器中定义了匹配语句，例如

```
match 'signin', to: 'session#new' 
```

我可以去

```
<%= link_to "text", signin_path %> 
```

但是当我像控制器 x 一样使用资源并且需要链接到新操作时我该怎么办，而不必在 routes.rb 中写出匹配语句

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:22:11.807

```
<%= link_to 'New', new_controller_name_path %> 
```

`rake routes`您可以在应用目录中按类型查看所有路线。

如果你想改变默认路径，你可以在**config/routes.rb** smth 中这样写：

```
match 'controller_name/new', :to => 'controller_name#new', :as => 'only_my_new', :via => :get 
```

然后创建链接：

```
 <%= link_to 'New', only_my_new_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:33:19.730

试试这个

```
 match '/signin' => 'session#new', :as => :new_session 
```

现在，您的登录路径是**new_session_path**

写入您的视图文件

```
<%= link_to "SignIn", new_session_path %> 
```

写在你的终端 - $ **rake routes**

您可以查看您的资源和其他路线。为此，请选择您的“/登录”路径并在您的链接中写入该路径。

# html - 如何在谷歌地图中点击更改纬度和经度

> ID：12614567
> 
> 赞同：0
> 
> 时间：2012-09-27T05:20:25.253
> 
> 标签：html, google-maps, google-maps-api-3

我正在使用此代码获取谷歌地图。

```
 <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?sensor=true">
</script>
<script type="text/javascript">
  function initialize() {
  var latlng = new google.maps.LatLng(52.000,17.1100);
    var myOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
    });

  var infoWindow = new google.maps.InfoWindow({
    position: latlng,
    content: '<b>Theater Address:</b><br> <?php echo $row['address']; ?>'
  });
  infoWindow.open(map);
  }
</script> 
```

我正在使用这个 html 表单代码输入纬度和经度，并且我有一个提交按钮。

```
<form  method="post" autocomplete="off">
        <p>
            <b>lat</b> <label>:</label>
            <input type="text" name="lat" id="lat" />
            <b>lon</b> <label>:</label>
            <input type="text" name="lon" id="lon" />
        </p>
        <input type="submit" value="Show location" />
    </form> 
```

地图还有一些其他的纬度和经度。但是当我在输入纬度和经度后单击提交时，我也应该更改其经度和经度。我该怎么做有人可以帮助我吗？

提前致谢.. ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:37:58.303

我已经将一些变量从初始化函数中取出，以使它们可用于按钮单击。我在您的提交按钮中添加了一个 id 并包含[jquery](http://jquery.com/)。这对我有用：

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      #map_canvas { height: 400px; width: 500px }
    </style>
  </head>
  <body>
    <div id="map_canvas"></div>
    <form  method="post" autocomplete="off">
      <p>
        <b>lat</b> <label>:</label>
        <input type="text" name="lat" id="lat" />
        <b>lon</b> <label>:</label>
        <input type="text" name="lon" id="lon" />
      </p>
      <input type="submit" value="Show location" id="submit"/>
    </form>
    <script src="jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
     <script type="text/javascript">
       var latlng = new google.maps.LatLng(52.000,17.1100);
       var myOptions = {
         zoom: 12,
         center: latlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
       };
       var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
       function initialize() {
         var marker = new google.maps.Marker({
           position: latlng,
           map: map,
         });

         var infoWindow = new google.maps.InfoWindow({
           position: latlng,
           content: '<b>Theater Address:</b>'
         });
        infoWindow.open(map);
      }

      initialize();

      $("#submit").on("click", function(evt) {
        evt.preventDefault();
        var lat = $("input#lat").val();
        var lon = $("input#lon").val();
        latlng = new google.maps.LatLng(lat,lon)
        map.setCenter(latlng)
  })
  </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:44:49.363

您可以通过多种方式做到这一点。

我可以建议你通过以下方式：

1.  创建另一种显示地图的方法：

    ```
    function re_create_map() {
      var latlng = new google.maps.LatLng(document.getElementById("lat").value,document.getElementById("lon").value);
                   map.setCenter(latlng);           
    }

      <input type="button" onclick="re_create_map()" value="Show location" /> 
    ```

注意*：不需要输入 type="submit" 因为我们不需要提交这个表单，我们只能在客户端实现这个东西。

或者您可以尝试其他一些 javascript 技巧来实现相同的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T13:00:22.747

检查这个[小提琴](http://jsfiddle.net/adhikariaman01/ocjenyc8/1/)

在以下代码中，将 dragend 替换为您想要的[事件。](https://developers.google.com/maps/documentation/javascript/events#UIEvents)在你的情况下**'点击'**

```
google.maps.event.addListener(marker, 'dragend', function (event) {
    document.getElementById("defaultLatitude").value = event.latLng.lat();
    document.getElementById("defaultLongitude").value = event.latLng.lng();
}); 
```

# sql-server - 从gridview中删除选定的行并在vb.net windows窗体中更新数据库

> ID：12614569
> 
> 赞同：0
> 
> 时间：2012-09-27T05:20:48.887
> 
> 标签：sql-server, vb.net, window

我有一个删除按钮，我试图通过单击该按钮从 gridview 和数据库中删除选定的行。但是有以下代码我得到了参数超出范围之类的错误并转换为int。

```
 Private Sub dltButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dltButton.Click
        'Dim StudentId As String
        'StudentId =
        'con.Open()
        'cmd.CommandText = "delete from KaiyumVbStudent where StudentID = '"&StudentId&"'"
        'cmd.Connection = con
        Dim i As Integer = DataGridView1.SelectedRows(0).Index
        DataGridView1.Rows.Remove(DataGridView1.SelectedRows(0))
        con = New SqlConnection(constring)
        con.Open()
        Me.StudentID = Convert.ToInt32(DataGridView1.SelectedRows(0).Index)
        cmd = New SqlCommand("Delete from KaiyumVbStudent where StudentID = '@StudentID'", con)
        cmd.ExecuteNonQuery()
        Call databind()

Private Sub databind()
        con = New SqlConnection(constring)
        con.Open()
        cmd = New SqlCommand("Select *from KaiyumVbStudent", con)
        Dim dr As SqlDataReader = cmd.ExecuteReader()
        dt = New DataTable()
        dt.Load(dr)
        Me.DataGridView1.DataSource = dt
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:29:32.660

首先将我们的代码放入 try catch 语句并检查学生 ID 数据类型您缺少一个语句 cmd.Parameters.AddWithValue("@StudentID", StudentID); 我希望你这是工作..

# java - 有什么方法可以保证 Android apk 中的信息安全吗？

> ID：12614570
> 
> 赞同：1
> 
> 时间：2012-09-27T05:21:02.640
> 
> 标签：java, android

AFAIK Android 反编译允许从 apk 中提取每一点信息。如何在 Java 或任何其他 XML 文件中存储 ftp 密码或其他机密字符串等信息？除了调用服务还有什么办法吗？

编辑问题：

```
String uname = "mks";
    String part1="pass";
    String part2="my";
    String part3="word"; 
```

根据大卫的回答，我混淆了一个字符串，但在 dcompilation 之后我可以看到我的密码

```
 String[] arrayOfString = new String[2]; arrayOfString[0] = "mks"; arrayOfString[1] = ("my" + "pass" + "word"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:36:56.093

您在这里谈论的是混淆字符串。实现此目的的最简单方法之一是将其拆分为代码中的多个部分，然后将它们组合在一起以形成最终结果。你所有的琴弦都还在，但它们很难重新组合起来。

例如，如果您要隐藏的密码是“102938475601”，这是一种方法：

```
// Declare the parts
String part2 = "3847";
String part1 = "1029";
String part3 = "5601";

// Log in to the server
ftpServer.sendLogin("username", part1+part2+part3); 
```

这是一种非常简单的混淆形式。如果您更热衷于保护数据，您可以尝试其他方法，例如使用非标准加密形式加密密码，以及如上所述拆分密钥。

但最终你是对的 - 没有任何方法可以保证将数据打包到 Android 应用程序中，而任何反编译应用程序的人都可以访问它。你所能做的就是让他们*更难*解释他们能找到的任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:33:18.570

您可以使用某种加密。然后通过一些计算来混淆加密密钥，这样它们就不*容易*通过逆向工程来检索。确保在使用后立即处理密钥和解密数据。

如果您通过网络检索密码，使用身份验证和 SSL 以及源代码中的模糊 URL，那么您可以检测到检索密码的尝试并禁止来自该来源的连接。但是，如果您的服务器出现故障，这会增加很多工作量并引入潜在的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T16:50:29.707

如果它们是重要数据，切勿将其保留在您的代码中，例如 FTP 服务的凭据等。

混淆只会增加一点难度。最好的方法是向 WS 发出请求（当然是 https 并带有签名），答案就是这个凭证。

另一种解决方案（比混淆或拆分 JAVA 代码上的字符串更好）是将这些信息放入本机库并使用 JNI 接口实时访问它。

# linux - 如何使用 linux mail 命令在电子邮件中插入新行？

> ID：12614573
> 
> 赞同：25
> 
> 时间：2012-09-27T05:21:19.323
> 
> 标签：linux, email, newline

如何使用 linux mail 命令在电子邮件中插入新行？

```
echo "Hi xxx, would you tell me something?\\n thanks!\\n -xxx" | mail -s "subject" xxx@gmail.com 
```

电子邮件显示文字'\n'，而不是换行符，如何解决？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-27T05:23:11.320

尝试使用`echo -e`

`echo -e "Hello \n World"`

您可以`man echo`从命令行键入以阅读更多信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-28T15:18:38.730

使用`mailx`，如果您将电子邮件发送给 Outlook 用户，您可以在每行的开头添加 2 个空格。

```
{ echo "Hi xxx, would you tell me something" ; echo "thanks!" ; echo "-xxx" } | sed 's/^/  /g' | mailx -s "subject" xxx@domain.com 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-12T16:24:45.177

使用 Bash 3.2 在 MacOS 上测试

```
bash-3.2$ mail -s "$subject" TestEmail@gmail.com <<< $(printf "%s\r\n%s\n" "This is Line One"  "This is Line Two") 
```

这是收到的电子邮件的 gmail 屏幕截图

[![在此处输入图像描述](../Images/b345d3362b02df9e35fc7b005a06f0c9.png)](https://i.stack.imgur.com/6CJM8.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-14T17:22:52.353

使用邮件命令时，接受的答案对我不起作用，我必须使用

```
\r 
```

我的整个命令是

```
mail -s "SUBJECT" -aFrom:"from@sdf.com "to@sdfd.com" <<< $( echo -e "Line1\rLine2") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-21T05:09:00.587

我遇到了这个问题，并通过用引号将我输入的变量括起来解决了这个问题`mailx`。

我从 ps ie 的进程列表开始`list="$(ps |grep some_process)"`。

然后，当我尝试按如下方式邮寄时，换行符被删除了：

```
echo $body | mailx -s "${subject}" recipient@someplace.com 
```

但是，只需`$body`用引号括起来就可以保留换行符：

```
echo "$body" | mailx -s "${subject}" recipient@someplace.com 
```

# java - 选项卡组内的对话框未触发

> ID：12614576
> 
> 赞同：1
> 
> 时间：2012-09-27T05:21:44.747
> 
> 标签：java, android

我在这些方面遇到了很大的困难。当我将我的课程放在选项卡组中时，我无法调用我的对话框。无论如何我可以做到这一点吗？

这是我的对话创建者

```
 @Override
  protected Dialog onCreateDialog(int id) {

      switch (id) {
          case 1:
              return createDialog();
          default:
              return null;
      }
  }
  @Override
  protected void onPrepareDialog(int id, Dialog dialog) {

      switch (id) {
          case 1:
              // Clear the input box.
              EditText text = (EditText) dialog.findViewById(TEXT_ID);
              text.setText(textme);
              text.setKeyListener(null);
              break;
      }
  }
  private Dialog createDialog() {

      AlertDialog.Builder builder = new AlertDialog.Builder(SpecialofMonth.this);
       final EditText input = new EditText(this);
       input.setId(TEXT_ID);
       builder.setView(input);

      builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {
              return;
          }
      });
      return builder.create();
  } 
```

在按钮单击时调用它

```
 View.OnClickListener handlesReadme = new View.OnClickListener() {
    public void onClick(View v) {

        showDialog(1);

    }
  }; 
```

当它在选项卡组之外时，它可以工作。但反之亦然，或者当它在里面时，它不起作用..

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:25:13.317

在您的 TAB 组中像这样创建

```
 AlertDialog.Builder builder = new AlertDialog.Builder(SpecialofMonth.this.getParent()); 
```

# php - 在在线服务器中上传 smarty 文件时出错

> ID：12614579
> 
> 赞同：0
> 
> 时间：2012-09-27T05:21:57.577
> 
> 标签：php, smarty

我是 smarty 的新手，我在 smarty 中开发了一个应用程序。它在本地服务器上运行良好。我将这些文件上传到在线服务器，它显示以下错误。

> 致命错误：未捕获的异常 'SmartyException' 与消息'模板属性'compiler_object' 不存在。在 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\libs\sysplugins\smarty_internal_template.php:953 堆栈跟踪：#0 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs \smarty-3.0.7\libs\sysplugins\smarty_internal_template.php(247): Smarty_Internal_Template->__get('compiler_object') #1 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\ libs\sysplugins\smarty_internal_template.php(456): Smarty_Internal_Template->compileTemplateSource() #2 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\libs\sysplugins\smarty_internal_template.php(567) : Smarty_Internal_Template->renderTemplate() #3 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\libs\Smarty.class.php(338): Smarty_Internal_Template->getRenderedTemplate() #4 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\libs\Smarty.class.php(382): Smarty->fetch('index.tpl. html', NULL, NULL, NULL, true) #5 D:\inetpub\vhosts\mobmail.eu\httpdocs\index. 在 D:\inetpub\vhosts\mobmail.eu\httpdocs\libs\smarty-3.0.7\libs\sysplugins\smarty_internal_template.php 第 953 行

我不知道为什么我的服务器出现此错误。提前致谢。

# sql-server-2008 - 如何检查字符串是否包含某些字符并在 SQL Server 2008 R2 中将其拆分？

> ID：12614580
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:21:59.207
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

我需要检查给定字符串中是否存在以下字符：

```
characters =('N', 'E', 'M', 'H', 'T', 'V', 'L', 'C' )
string = 2449.555N06704.2855EM0701H071T44.098V11.764L0.372C1 
```

如果字符串包含这些字符，则需要将它们拆分为如下值以将它们插入`details_Tb`：

```
N = 2449.7183 
E = 06704.2855 
T = 0701
H = 071
T = 44.098
V = 11.764
L = 0.372
C =  1 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:56:37.873

如果您正在寻找这个结果

**结果**：

```
N=2449.555
E=06704.2855
H=0701
T=071
V=44.098
L=11.764
C=0.372 
```

然后试试这个查询..

```
DECLARE @CHARACTERS TABLE (CHARS CHAR(1)) 
INSERT INTO @CHARACTERS VALUES
('N'), ('E'), ('M'), ('H'), ('T'), ('V'), ('L'), ('C' );
DECLARE @STRING VARCHAR(500);
SET @STRING= '2449.555N06704.2855EM0701H071T44.098V11.764L0.372C1';

WITH CTE AS (
SELECT      CHARS+'='+CAST(REVERSE(LEFT(REVERSE(LEFT(@STRING,
            CHARINDEX(CHARS,@STRING,1)-1)), PATINDEX('%[^0-9,.]%',
            REVERSE(LEFT(@STRING,CHARINDEX(CHARS,@STRING,1)-1)) + 'Z')-1))
            AS VARCHAR(50)) AS RESULT
FROM        @CHARACTERS )
SELECT * FROM CTE WHERE LEN(RESULT)>2 
```

**EDIT1：** 根据评论，如果要将这些值插入 detail_Tb 表，请检查以下代码：

```
create table detail_Tb(N float,E float,M float,
            H float,T float,V float,L float,C float);

DECLARE @CHARACTERS TABLE (CHARS CHAR(1)) 
INSERT INTO @CHARACTERS VALUES
('N'), ('E'), ('M'), ('H'), ('T'), ('V'), ('L'), ('C' );
DECLARE @STRING VARCHAR(500);
SET @STRING= '2449.555N06704.2855EM0701H071T44.098V11.764L0.372C1';
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

;WITH CTE AS (
SELECT      CHARS,CAST(REVERSE(LEFT(REVERSE(LEFT(@STRING,
            CHARINDEX(CHARS,@STRING,1)-1)), PATINDEX('%[^0-9,.]%',
            REVERSE(LEFT(@STRING,CHARINDEX(CHARS,@STRING,1)-1)) + 'Z')-1))
            AS VARCHAR(50)) AS RESULT
FROM        @CHARACTERS )
SELECT * into #tmp FROM CTE WHERE len(RESULT)>2  

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(CHARS) 
                    from #tmp
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'Insert into detail_Tb('+@cols+') 
              SELECT ' + @cols + ' from #tmp x
            pivot 
            (
                MAX([RESULT])
                for CHARS in (' + @cols + ')
            ) p '
execute(@query)     
Drop table #tmp 
```

# c# - 在 c# asp.net 中，列表视图项数据插入到 List<>

> ID：12614582
> 
> 赞同：0
> 
> 时间：2012-09-27T05:22:07.623
> 
> 标签：c#, asp.net

我的列表视图 ItemTemplate 如下

```
<a href='<%# getpath(Eval("IMAGE_PATH")) %>' title='<%# Eval("IMAGE_DESCRIPTION") %>'>
   <asp:Image ID="capty" CssClass="capty" runat="server" 
       AlternateText='<%# Eval("IMAGE_DESCRIPTION") %>' 
       ImageUrl='<%# retriveurl(Eval("IMAGE_PATH")) %>' 
       Height="100px" Width="150px">
   </asp:Image>
</a> 
```

我的代码隐藏源是

```
int count=ListView1.Items.Count;
    List<ImageGallery> _list = new List<ImageGallery>();
    for (int i = 0; i < count; i++)
    {
        ImageGallery ob = new ImageGallery();
        ob.ImageName = ??
        ob.Description = ??
        _list.Add(ob);
    } 
```

现在我想将 Eval("IMAGE_DESCRIPTION") 数据插入 ob.Description 和 ob.ImageName=Eval("IMAGE_ID") 。怎么做？

```
List<ImageGallery> _list = new List<ImageGallery>(); 
for (int i = 0; i < ListView1.Items.Count; i++) 
{ 
    ImageGallery ob = new ImageGallery(); 
    ob.ImageName = ""; 
    ob.Description = " "; 
    _list.Add(ob); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:29:32.907

您可以使用[`FindControl`](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)来获取图像。您将要查找的控件的 ID 传递给它（“capty”）；它返回一个对象，因此您需要将其强制转换/拆箱为控件类型`Image`。见下文：

```
List<ImageGallery> _list = new List<ImageGallery>(); 
for (int i = 0; i < ListView1.Items.Count; i++) 
{
    Image image = (Image)ListView1.Items[i].FindControl("capty");
    ImageGallery ob = new ImageGallery(); 
    ob.ImageName = ""; 
    ob.Description = image.AlternateText; 
    _list.Add(ob); 
} 
```

# javascript - JavaScript 中作用域的行为

> ID：12614594
> 
> 赞同：1
> 
> 时间：2012-09-27T05:22:54.930
> 
> 标签：javascript

> **可能重复：**
> [被 Javascript 的变量作用域弄糊涂了](https://stackoverflow.com/questions/9399799/confused-by-javascripts-variable-scope)

例如，这是我的 JavaScript 代码：

```
var foo = 'Originalvalue';
var foo = 'Nextvalue';
alert(foo); // Nextvalue 
```

那么，现在我确定`var`在一个已经声明的变量前面写只是简单地无效并且对程序没有用处。

但是再考虑这个程序：

```
var foo = 'Originalvalue';
function duhfoo() {
  var foo = 'Newbievalue';
}
duhfoo();
alert(foo); // Originalvalue 
```

然后，根据我在第一个示例中解释的逻辑，该值应该是“原始值”，因为已经有一个名为`foo`. 那为什么会这样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:27:28.453

duhfoo 中的变量 foo 清楚地表明它的作用域是 duhfoo() 方法而不是全局的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:29:57.727

因为

（来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet)）

> **var**具有以下属性
> 
> *   函数范围
> *   提升到其功能的顶部
> *   在同一范围内重新声明同名是无操作的

请阅读[本文](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet)以获取有关此主题的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T05:37:33.950

在Javascript中有两种变量：**局部**变量和**全局**变量。

在函数外部使用`var`时，您声明了一个**全局**变量，如果您根本不使用，也会发生同样的情况`var`。写作

```
foo = "first"; 
```

在顶层（任何函数之外）与`var foo = "first"`.

然而，当在函数内部时，情况有所不同，关键字`var`区分**局部**变量和**全局**变量：

```
var foo = "first";
var bar = "second";

function f()
{
    var foo = "third"; // local
    bar = "fourth";    // global
}

f();
alert([foo, bar]); // output will be first,fourth 
```

换句话说，当您`var`在函数内部使用时，该变量将是具有相同名称的不同变量，仅对写入函数边界内的代码可见。

请注意，边界由函数确定，而不是大括号`{...}`。如果您有嵌套块并`var`在块内使用另一个声明，则变量将是相同的，这与其他语言（如 Java、C 或 C++）中发生的情况不同。

创建*作用域*的唯一方法是定义一个函数（包括函数内部的函数）。

在 Javascript 中要记住的另一件非常重要的事情（特别是如果已经接触过类似的语言，其中不存在这个概念，如 Java、C 或 C++）是“捕获”/“关闭”的概念......

```
var foo = "first";

function f()
{
    // Local variable
    var foo = "second";

    function g()
    {
        // This is the local foo of f, not the global
        // one even if there is no "var" declaration
        // inside this nested scope
        return foo;
    }

    return g;
}

var nested_function = f();

alert([foo, nested_function()]); // output will be first,second 
```

基本上，一个局部变量可以“超过”定义它的函数，通过被称为“捕获”该变量的其他函数使用。捕获一个或多个变量的函数称为“闭包”。

换句话说，局部变量仅在函数体内**可见**`foo`，但它的寿命可能比函数长，就像上一个示例的局部变量一样，其中变量在返回后幸存下来，`f`因为它已被闭包捕获`g`。

# php - 动态生成链接

> ID：12614597
> 
> 赞同：0
> 
> 时间：2012-09-27T05:23:24.457
> 
> 标签：php, html, dynamic-links

所以我想这对你们大多数人来说很容易，但我无法弄清楚。

我试图使链接动态，例如：href="linkname(#1 or #2 etc)"

有任何想法吗？

```
 <?php if ($top_fundraisers && is_array($top_fundraisers)): ?>
        <?php foreach ($top_fundraisers as $index => $fundraiser): ?>
           <a title="" class="fancybox" href="linkname(GENERATE CODE HERE)">
        <div class="top-fundraiser">

            <div id="newo<?php print htmlentities($index + 1); ?>" class="top-fundraiser-image">
              <img src="<?php
          if($fundraiser['member_pic_medium']) {
                  print htmlentities($fundraiser['member_pic_medium']);
          } else {
            print $template_dir . '/images/portrait_placeholder.png';
          }
              ?>"/>
            </div>
    </div>
    </a>
        <?php endforeach;?>
    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:37:21.547

假设下面是您需要的。

```
 <?php if ($top_fundraisers && is_array($top_fundraisers)): ?>
        <?php foreach ($top_fundraisers as $index => $fundraiser): ?>
           <a title="" class="fancybox" href="linkname(#<?php echo $index + 1; ?>)">
        <div class="top-fundraiser">

            <div id="newo<?php print htmlentities($index + 1); ?>" class="top-fundraiser-image">
              <img src="<?php
          if($fundraiser['member_pic_medium']) {
                  print htmlentities($fundraiser['member_pic_medium']);
          } else {
            print $template_dir . '/images/portrait_placeholder.png';
          }
              ?>"/>
            </div>
    </div>
    </a>
        <?php endforeach;?>
    <?php endif; ?> 
```

# php - 使用 Spry Validate 提交 Ajax

> ID：12614598
> 
> 赞同：1
> 
> 时间：2012-09-27T05:23:24.810
> 
> 标签：php, javascript, ajax, spry

我试图在 ajax 运行之前验证我的表单，但似乎无法正确编码以实现这种情况。

如果我将它们分开，我可以使用没有验证或验证的 ajax 发布，但它会发布默认方式

这是我正在尝试的当前代码

```
$(document).ready(function(){
 // ajax code start
$('#form').on('submit', function (e){
    e.preventDefault();
  if  (spry.widget.form.validate('#form') == true)
    {
    $.ajax({
        type: "POST",
        url: "localProxy.php",
        data: $('#form').serialize(),
        success: function (response) {
                document.location = '/thank-you';
                 // do something!
        },
        error: function () {
                alert('There was a problem!');  // handle error
        }
    });
    };
}); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:52:18.147

弄清楚了

```
$(document).ready(function(){
 // ajax code start
$('#form').on('submit', function (e){
    e.preventDefault();
    Spry.Widget.Form.onSubmit = function(e, form)
{
    if (Spry.Widget.Form.validate(form) == false) {
        return false;
    }
    {
    $.ajax({
        type: "POST",
        url: "localProxy2.php",
        data: $('#consult').serialize(),
        success: function (response) {
                document.location = '/thank-you';
                 // do something!
        },
        error: function () {
                alert('There was a problem!');  // handle error
        }
    });
    };
    };
}); 
}); 
```

# c# - 如何覆盖 mvc3 中的控制器 actionresult 方法？

> ID：12614603
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:24:04.330
> 
> 标签：c#, asp.net-mvc-3

HomeController 中有一种称为 Index 的方法。（只是微软提供的默认模板）

```
 public class HomeController : Controller
    {

        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";
            return View();
        }

        public ActionResult About()
        {
            return View();
        }
   } 
```

现在我想要的是……覆盖索引方法。如下所示。

```
public partial class HomeController : Controller
    {

        public virtual ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";
            return View();
        }

        public ActionResult About()
        {
            return View();
        }

        public override ActionResult Index()
        {
            ViewBag.Message = "Override Index";
            return View();
        }

    } 
```

我不希望对现有方法进行任何修改，例如 OO 设计中的开闭原则。有没有可能？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:47:36.593

A`Controller`是一个普通的 C# 类，所以你必须遵循正常的继承规则。如果您试图覆盖同一个类中的方法，那是无稽之谈并且不会编译。

```
public class FooController
{
    public virtual ActionResult Bar()
    {
    }

    // COMPILER ERROR here, there's nothing to override
    public override ActionResult Bar()
    {
    }
} 
```

如果您有 的子类`Foo`，则可以覆盖，如果基类上的方法标记为`virtual`。（而且，如果子类不覆盖该方法，则将调用基类上的方法。）

```
public class FooController
{
    public virtual ActionResult Bar()
    {
        return View();
    }
}

public class Foo1Controller : FooController
{
    public override ActionResult Bar()
    {
        return View();
    }
}

public class Foo2Controller : FooController
{
} 
```

所以它是这样工作的：

```
Foo1 foo1 = new Foo1();
foo1.Bar();               // here the overridden Bar method in Foo1 gets called
Foo2 foo2 = new Foo2();
foo2.Bar();               // here the base Bar method in Foo gets called 
```

# php - 在 Dropbox API 中获取包含元数据的下载链接

> ID：12614605
> 
> 赞同：4
> 
> 时间：2012-09-27T05:24:17.923
> 
> 标签：php, download, dropbox

我有一个非常基本和快速的问题。我正在使用 Ben Tadiar 编写的 PHP Dropbox API 类。我用来`$object->metaData("/");`从保管箱获取文件列表。数据返回不包括下载/预览文件的 URL。所以我必须`$object->media()`为每个文件调用方法来获取 URL，这会导致**很多延迟，**特别是当文件列表太长时。

无论如何要获得下载链接以及文件列表???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:42:10.080

由于我找不到任何方法来获取下载 URL 以及文件列表。解决方法是列出所有文件而不调用`$object->media()`每个项目。相反，请将此方法调用到用户选择下载的文件。一个简单的快速功能将是这样的：

```
function getDBDownloadUrl($Path){
    try{
        $mdb = new MyDropbox();
        $download = $mdb->media($Path);
        $download = $download['body'];
        return $download->url;
    }

    catch(Dropbox\Exception $e){
        return array("error"=>1, "message"=>"There was a problem accessing file download URL from dropbox");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:53:24.103

调用 /metadata 时，您是否在 'list' 设置为 true 的情况下调用它？如果是这样，您不能从内容数组中获取所需文件的路径并使用该路径获取 /files 吗？[https://www.dropbox.com/developers/reference/api#metadata](https://www.dropbox.com/developers/reference/api#metadata)

# ruby-on-rails - 获取当前参数以在 Ruby 中与 Url 连接

> ID：12614609
> 
> 赞同：0
> 
> 时间：2012-09-27T05:24:49.743
> 
> 标签：ruby-on-rails

在我的 Ruby 应用程序中，我有一个类 Transaction 的 destroy 方法来删​​除它的记录，这工作正常。这是功能

```
def destroy
  @transaction = Transaction.find(params[:id])
  @transaction.destroy
  respond_to do |format|
    format.html { redirect_to transactions_url }
  end
end 
```

函数调用是这样的

```
#{button_to 'Destroy', t, confirm: 'Are you sure?', method: :delete, :class => "buttonAslink"} 
```

我有一个过滤器功能，可以在某些条件下过滤记录。过滤后，当我删除一条记录时，它会重定向到根 URL 并显示所有记录，而不是仅过滤。

所以我想获取查询字符串参数以附加到 url，以便在删除页面后重定向到同一位置，以便只显示过滤器记录。

请指导我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:36:02.450

首先在 button_to 中添加过滤器参数：

```
#{button_to 'Destroy', transaction_path(:id=>t.id,:filter=>'conditions'), confirm: 'Are you sure?', method: :delete, :class => "buttonAslink"} 
```

然后只需将它们附加到选项中：

```
format.html { redirect_to transactions_url(:parameter => params[:filter]) } 
```

会产生*/transactions?parameter=conditions*

# visual-c++ - 将 Internet 句柄作为静态成员并在线程外访问它.. 需要专家建议

> ID：12614610
> 
> 赞同：2
> 
> 时间：2012-09-27T05:24:56.793
> 
> 标签：visual-c++, mfc, httprequest, wininet

我有一个应用程序，它有助于使用 http 请求将文件上传到服务器。我正在使用 HttpSendRequestEx 和 HttpEndRequest 进行文件上传。它工作正常。并且上传是在一个单独的线程中执行的。其中要上传的文件会被一一处理。

现在一个新的要求是用户应该能够随时取消上传。由于上传是在一个线程内执行的，目前我对此没有任何控制权。

因此，作为一种解决方法，我所做的是，当用户单击取消上传的按钮时，以下 HINTERNET 句柄

```
 hSession returned from InternetOpen
  hConnect returned from InternetConnect
  hRequest returned from HttpOpenRequest 
```

已使用 InternetClosehandle 函数关闭。

由于这些句柄在线程内部使用，因此无法直接访问。所以我已经将它们声明为线程运行的类的静态成员。这样我可以在发生按钮单击时直接访问它。

通过这样做，正在处理的请求会立即被取消。但我不知道这是否是一个好方法。所以我想知道在进行这个逻辑时是否存在任何安全问题..

还有比这更好的选择吗......

请对此发表评论。期待专家对此的建议..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:45:52.077

从 TCP 套接字的角度来看，这是中断请求的正确方法：关闭套接字以停止和关闭在不同线程上执行某些工作的连接是完全合法的。

也就是说，WinInet 不仅仅是一个套接字的包装器，因此我们不能确定没有资源或内存泄漏。

我将通过编写一个测试程序来测试它，该程序会创建大量此类中断的上传，并在[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)中进程的 Performance 选项卡上查找资源泄漏。我会特别注意句柄计数，可能还有虚拟内存。

此外，在关闭句柄之前，您可以尝试通过调用 HttpEndRequest() 来关闭 HTTP 连接，这可能会清理更多内容。

# c# - 系统无法执行指定程序

> ID：12614612
> 
> 赞同：0
> 
> 时间：2012-09-27T05:25:03.103
> 
> 标签：c#

我已经开发了一个控制台应用程序，用于生成 excel 文件格式的报告，在我的机器上它工作正常，但是当我将它部署到服务器上时，它的显示

> `The system cannot execute the specified program`

请给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:29:11.073

看起来缺少 .NET Framework。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:43:37.963

可能有以下两种失败原因

1.  正如卡米尔所说 - 缺少点网络框架或
2.  由于 MS Office 不可用，您的程序无法添加 OLE 对象。

首先检查这些，如果没有帮助，然后发布代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T10:55:28.357

App.Config 文件中缺少某些标记，放置正确的标记可以正常工作。

# c++ - linux下OpenCV HighGui全屏

> ID：12614616
> 
> 赞同：3
> 
> 时间：2012-09-27T05:25:14.540
> 
> 标签：c++, ubuntu, opencv

我正在尝试制作一个简单的全屏应用程序来使用 Open CV 显示相机的输出。我已经开发了大部分代码，我只是想让它适当地全屏显示窗口。我已将最基本的基本代码缩减为如下（取自 OpenCV 网站）：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

int main ( int argc, char **argv )
{
  cvNamedWindow( "My Window", 1 );
  IplImage *img = cvCreateImage( cvSize( 1920, 1200 ), IPL_DEPTH_8U, 1 );
  CvFont font;
  double hScale = 1.0;
  double vScale = 1.0;
  int lineWidth = 3;
  cvInitFont( &font, CV_FONT_HERSHEY_SIMPLEX | CV_FONT_ITALIC, hScale, vScale, 0, lineWidth );
  cvPutText( img, "Hello World!", cvPoint( 200, 400 ), &font, cvScalar( 255, 255, 0 ) );
  cvSetWindowProperty( "My Window", CV_WND_PROP_FULLSCREEN, CV_WINDOW_FULLSCREEN );
  cvShowImage( "My Window", img );
  cvWaitKey();
  return 0;
} 
```

当我运行它时，窗口会以请求的 1920x1200 分辨率创建，但它不是全屏的，它只是一个普通的 HighGUI 窗口。我可以发誓我早先有这个工作，但后来垃圾并重新安装了 Ubuntu，并且有一种感觉我可能在此过程中忘记了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:58:32.870

改变

```
cvNamedWindow( "My Window", 1 ); 
```

到

```
cvNamedWindow( "My Window", CV_WINDOW_NORMAL ); 
```

检查[cvNamedWindow 的标志](http://opencv.willowgarage.com/documentation/c/user_interface.html#namedwindow)。

# php - 如何在一页上创建多个“动态添加/删除输入”？

> ID：12614617
> 
> 赞同：1
> 
> 时间：2012-09-27T05:25:15.893
> 
> 标签：php, jquery, dynamic

我将此脚本与 jquery 一起用于我的动态添加/删除输入字段：

```
<script>
$(document).ready(function(){

var i = $('input').size() + 1;

$('#add').click(function() {
    $('<div><input type="text" class="field" name="dynamic[]" value="' + i + '" /></div>').fadeIn('slow').appendTo('.inputs');
    i++;
});

$('#remove').click(function() {
if(i > 1) {
    $('.field:last').remove();
    i--;
}
});

$('#reset').click(function() {
while(i > 2) {
    $('.field:last').remove();
    i--;
}
});

});
</script> 
```

我的输入字段代码：

```
<a href="#" id="add">Add</a> | <a href="#" id="remove">Remove</a> | <a href="#" id="reset">reset</a>
<div class="inputs"><input type="text" name="dynamic[]" class="field" placeholder=""/></div> 
```

所以这段代码一切正常，但我似乎无法弄清楚如何在同一个网页中创建多个工作框。

我尝试在名称字段中添加数字（如 dynamic2、dynamic3 等），但它对我没有任何作用。

有没有办法创建另一个相同功能的输入框，但分配的名称不同，以便我可以单独将其发布到 PHP？

我正在使用这个 PHP 发布：

```
<?php
foreach($_POST['dynamic'] as $value) {
echo "$value <br />"; // change this to what you want to do with the data
}
?> 
```

PHP 发布工作正常，但我一次只能做一个输入组。我希望能够在同一页面上做多个。

我从这个网页得到了原始脚本：http: [//papermashup.com/dynamically-add-form-inputs-and-submit-using-jquery/](http://papermashup.com/dynamically-add-form-inputs-and-submit-using-jquery/)

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:00:38.667

如果对多个块执行相同操作，这是一个[jsFiddle实现](http://jsfiddle.net/4jrgY/)

您所要做的就是在 html 中创建多个块（示例中给出了 3 个块），然后您就可以开始了。

在 PHP 中，您必须使用

```
<?php
    if(isset($_POST)){
        echo '<pre>';print_r($_POST['dynamic1']);echo '</pre>';
        echo '<pre>';print_r($_POST['dynamic2']);echo '</pre>';
        echo '<pre>';print_r($_POST['dynamic3']);echo '</pre>';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:43:38.657

```
<?php
for($i=0;isset($_POST);$i++)
{
    echo $_POST['group1'][$i];
    echo $_POST['group2'][$i];
}
?> 
```

这样多发帖

# java-me - LWUIT 标签点击事件？

> ID：12614620
> 
> 赞同：0
> 
> 时间：2012-09-27T05:25:55.073
> 
> 标签：java-me, lwuit

我创建了 LWUIT 标签。我想识别最终用户的标签点击事件，需要放置一些逻辑？如何识别标签点击事件？

这是我的代码：

```
 topnews = new Vector();
    topstory = new Vector();
    cinemanews = new Vector(); 
    newsList = new List(topnews);
    newsList.setScrollVisible(false);

    newsList.setRenderer(new NewsListCellRenderer());

    myNewsList = new List(topstory);
    myNewsList.setScrollVisible(false);

    myNewsList.setRenderer(new NewsListCellRenderer());
    cinemaNewsList = new List(cinemanews);
    cinemaNewsList.setScrollVisible(false);

    cinemaNewsList.setRenderer(new NewsListCellRenderer());
    Tabs tabs = new Tabs();
    tabs.addTab("Topnews", newsList);
    tabs.addTab("TopStory", myNewsList);
    tabs.addTab("CinemaNews", cinemaNewsList);
    tabs.addTabsFocusListener(new FocusListener() {
       public void focusGained(Component cmpnt) {
         //how to identify the enduser tab click event here?
       }
   } 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:40:23.147

这似乎没有直接支持，有一个选项可以添加带有 RadioButton 的选项卡并将侦听器绑定到按钮，但如果滑动选项卡组件支持的选项（在触摸设备中拖动选项卡），它看起来会很糟糕去旁边）。

# cobol - 无法获得正确的文件输出

> ID：12614622
> 
> 赞同：2
> 
> 时间：2012-09-27T05:26:05.823
> 
> 标签：cobol, gnucobol

这是一项家庭作业，涉及读取输入文件，进行一些处理，并将处理后的数据以简洁易读的格式打印到输出文件中。

第一条记录完美地打印到输出文件。之后的每条记录，似乎从输入文件中读入记录时，读入时增加了空格；移动我所有输入数据的位置并使其无用。每一行似乎都在添加另一个空格。

我怀疑 A.​​）尽管我尽了最大努力，但我并不完全理解 READ 动词和/或 B.）我的编译器可能有问题。

任何帮助表示赞赏。

```
IDENTIFICATION DIVISION.
        PROGRAM-ID.            
                payroll.

ENVIRONMENT DIVISION.
        INPUT-OUTPUT SECTION.
                FILE-CONTROL.
                        SELECT payroll-in-file  ASSIGN TO 'input.txt'.
                        SELECT payroll-out-file ASSIGN TO 'output.txt'.

DATA DIVISION.
        FILE SECTION.
                FD payroll-in-file
                        LABEL RECORDS ARE STANDARD.  
                01 payroll-in-record.  
                        05 i-unused-01          PIC X.  
                        05 i-emp-num            PIC X(5).
                        05 i-dpt-num            PIC X(5).
                        05 1-unused-02          PIC X(6).
                        05 i-hrs-wkd            PIC 9(4).  
                        05 i-base-pay-rt        PIC 9(2)v99\.  
                        05 i-mncpl-code         PIC X(2).

                FD payroll-out-file
                        LABEL RECORDS ARE STANDARD.
                01 payroll-out-record.
                        05 o-emp-num            PIC X(5).
                        05 FILLER               PIC XX.
                        05 o-hrs-wkd            PIC 9(5).
                        05 FILLER               PIC XX.
                        05 o-base-pay-rt        PIC 9(3).99.
                        05 FILLER               PIC XX.  
                        05 o-grs-pay            PIC 9(5).99.
                        05 FILLER               PIC XX.
                        05 o-fed-tax            PIC 9(5).99\.  
                        05 FILLER               PIC XX.  
                        05 o-state-tax          PIC 9(4).99.
                        05 FILLER               PIC XX.
                        05 o-city-tax           PIC 9(4).99.
                        05 FILLER               PIC XX.
                        05 o-net-pay            PIC 9(5).99.

        WORKING-STORAGE SECTION.
                01 w-out-of-data-flag           PIC X.
                01 w-grs-pay                    PIC 99999V99.
                01 w-fed-tax                    PIC 99999V99.
                01 w-state-tax                  PIC 9999V99.
                01 w-city-tax                   PIC 9999V99.

PROCEDURE DIVISION.
        A000-main-line-routine.
                OPEN INPUT payroll-in-file
                        OUTPUT payroll-out-file.
                MOVE 'N' TO w-out-of-data-flag.
                READ payroll-in-file
                        AT END MOVE 'Y' TO w-out-of-data-flag.
                PERFORM B010-process-payroll
                        UNTIL w-out-of-data-flag = 'Y'.
                CLOSE payroll-in-file
                        payroll-out-file.
                STOP RUN.

        B010-process-payroll.
                MOVE SPACES TO payroll-out-record.
                IF i-hrs-wkd IS NOT GREATER THAN 37.5
                        MULTIPLY i-hrs-wkd BY i-base-pay-rt GIVING w-grs-pay ROUNDED
                ELSE
                        COMPUTE w-grs-pay ROUNDED =
                                        (i-base-pay-rt * 37.5) + (1.5 * (i-base-pay-rt) * (i-hrs-wkd - 37.5))
                END-IF.
                MULTIPLY w-grs-pay BY 0.25
                        GIVING w-fed-tax ROUNDED.
                MULTIPLY w-grs-pay BY 0.05
                        GIVING w-state-tax ROUNDED.  
                IF              i-mncpl-code = 03
                        MULTIPLY w-grs-pay BY 0.015 GIVING w-city-tax ROUNDED
                ELSE IF         i-mncpl-code = 07
                        MULTIPLY w-grs-pay BY 0.02 GIVING w-city-tax ROUNDED
                ELSE IF         i-mncpl-code = 15
                        MULTIPLY w-grs-pay BY 0.0525 GIVING w-city-tax ROUNDED
                ELSE IF         i-mncpl-code = 23
                        MULTIPLY w-grs-pay BY 0.0375 GIVING w-city-tax ROUNDED
                ELSE IF         i-mncpl-code = 77
                        MULTIPLY w-grs-pay BY 0.025 GIVING w-city-tax ROUNDED

                    END-IF. 
```

输入文件：

```
 AA34511ASD      0037115003
 AA45611WER      0055120007
 BB98722TYU      0025075015
 BB15933HUJ      0080200023
 FF35799CGB      0040145077 
```

（每行以1个空格开头，对应代码中的“i-unused-01”）

输出文件（到目前为止）：

```
AA345  00037  011.50  00425.50  00106.38  0021.28  0006.38  00291.46 AA45  0 005  051.20  00425.50  00106.38  0021.28  0006.38  00291.46
 BB9  0  00  025.07  00425.50  00106.38  0021.28  0006.38  00291.465
 BB  0   0  008.02  00425.50  00106.38  0021.28  0006.38  00291.4623
 F  0      000.40  10673.10  02668.28  0533.66  0006.38  07464.78 
```

^它就是这样打印的！

在 Linux 中使用 OpenCOBOL 编译器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:19:58.080

我没有详细看代码，但有两件事值得一看。

首先，输出文件应该是“行顺序的”，因为这将插入一个分隔符（回车/换行符），这意味着输出文件将打印为每行一条记录。

此外，输入记录中的字符数（即您的实际数据）与输入FD 中定义的字符数之间可能存在一个字符的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:53:22.620

正如colemanj所说，您需要将输出文件更改为行顺序

但是您还需要更改输入文件/输入文件定义。2个选项是1）将输入文件更改为行顺序（使定义与文件一致2）从输入文件中删除carraige返回（全部在一行上）：

```
AA34511ASD      0037115003 AA45611WER      0055120007 BB98722TYU      0025075015 BB15933HUJ      0080200023 FF35799CGB      0040145077 
```

当前输入文件定义表明文件中没有回车符。

```
-------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:22:01.600

这可能是由于您使用的 Mingw Open COBOL 版本。正如这里所记录的

ORGANIZATION IS LINE SEQUENTIAL 这些是所有内部结构中最简单的文件。它们的内容被简单地构造为一系列数据记录，每个记录都由一个特殊的记录结束分隔符终止。ASCII 换行符（十六进制 0A）是任何 UNIX 或伪 UNIX（MinGW、Cygwin、MacOS）OpenCOBOL 构建使用的记录结束分隔符。真正的原生 Windows 构建将使用回车换行（十六进制 0D0A）序列。

# java - Liferay 6.1 中的 XML Web 服务

> ID：12614624
> 
> 赞同：1
> 
> 时间：2012-09-27T05:26:18.737
> 
> 标签：java, web-services, servlets, liferay

我是 Liferay 的新手。我正在使用 Liferay 6.1。我的要求是开发只返回 XML 提要的 Web 服务。我可以看到 Liferay 已经让 JSON、SOAP 或 WSDL 变得简单。我想做的是从我的数据库中选择数据并在调用 portlet 时返回 XML，就像在 Servlet 的情况下一样。

如果您简短地描述或参考一些详细说明解决方案的博客，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:20:31.200

要访问 Liferay 的 JSON webservice api，您可以使用

```
http://localhost:8080/api/jsonws 
```

为您的本地服务器（为其他服务器更改主机）为了了解它是如何工作的，liferay 的社区有一个非常详细的解释：`http://www.liferay.com/web/james.falkner/blog/-/blogs/yet-another-liferay-json-service-example update on :`http ://www.liferay.com/community/forums/-/message_boards/message/13489024 ` 这是官方文档：

```
http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/json-web-services 
```

# sharpsvn - 如何使用sharpsvn API签出存储库中的特定文件？

> ID：12614627
> 
> 赞同：0
> 
> 时间：2012-09-27T05:26:22.473
> 
> 标签：sharpsvn

如何使用 SharpSvn API 签出存储库中的特定或单个文件？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:19:03.157

Subversion 不允许单独检出文件，因为最小的工作副本包含一个目录。

你可以做的相当于

```
svn co http://my.example/repository/subdir --depth empty F:\scratch-dir
svn up F:\scratch-dir\file</code></pre> 
```

这将使您以 F:\scratch-dir\file的形式检出[http://my.example/repository/subdir 。](http://my.example/repository/subdir)这允许更改文件并提交更改。（这可以在 SharpSvn 中完成，`SvnClient.CheckOut()`然后`SvnClient.Update()`使用正确的参数）

另一种选择是

```
svn cat http://my.example/repository/subdir/file > temp-file 
```

这将为您提供文件的只读副本。（与此等效的 SharpSvn 是`SvnClient.Write()`.）

# vb.net - 复选框位置的“公共子新（）”错误的参数太多（VB.NET）

> ID：12614630
> 
> 赞同：0
> 
> 时间：2012-09-27T05:26:37.343
> 
> 标签：vb.net, checkbox

我收到以下行的此错误。（蓝色摆动线在 (35, 31) 下）

```
Dim chkbx1 as New Checkbox    
chkbx1.Location = New Point(35, 31) 
```

这个错误的原因是什么？有没有其他方法可以给出复选框的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:53:39.947

您必须在`Point`某处定义另一个类。

尝试以下操作：

```
Dim chkbx1 As New CheckBox
chkbx1.Location = New System.Drawing.Point(35, 31) 
```

# java - JGit 分支结帐问题

> ID：12614631
> 
> 赞同：5
> 
> 时间：2012-09-27T05:26:37.423
> 
> 标签：java, api, github, jgit

我正在使用以下代码从 github 签出一个存储库。

```
private String url = "https://github.com/organization/project.git";
    Git repo = Git.cloneRepository().setURI(url).setDirectory(directory).setCloneAllBranches(true).call();
    for (Ref b : repo.branchList().call()) {
        System.out.println("(standard): cloned branch " + b.getName());
    } 
```

我正在使用代码

```
Git git = Git.open(checkout); //checkout is the folder with .git
git.pull().call(); //succeeds 
```

如果我结账一个分支

```
Git git = Git.open(new File(checkout)); //checkout is the folder with .git
System.out.println(git.getRepository().getFullBranch());
CheckoutCommand checkout = git.checkout();
Ref call = checkout.setName("kalees").call(); 
```

它抛出 org.eclipse.jgit.api.errors.RefNotFoundException: Ref kalees can't be resolve。

这里有什么问题，如果我指定**“master”**而不是**“kalees”**，**它工作正常**。我应该做些什么改变来检查一个特定的分支？

**如果我使用代码**

```
git.checkout().setCreateBranch(true).setName("refs/remotes/origin/kalees"); 
```

它检查了**羽衣甘蓝**分支。但是当**我做拉操作时**

```
git.pull().call(); 
```

它抛出**org.eclipse.jgit.api.errors.DetachedHeadException: HEAD is detached**。可能是什么，这是结帐问题还是拉问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T07:28:15.833

只有在以下情况下才会发生：

*   `kalees`不是现有的分支（或者写错了，不好的情况）
*   `kalees`是您已跟踪的远程分支，但仍是本地分支

如果是这样，您可能需要先创建它（有点像[这个例子](http://pastie.textmate.org/pastes/3580163)）

```
git.branchCreate().setForce(true).setName("kalees").setStartPoint("origin/kalees").call(); 
```

在“ [JGit：找不到教程或简单示例](https://stackoverflow.com/questions/6861881/jgit-cannot-find-a-tutorial-or-simple-example)”之后，我宁愿使用：

```
git.branchCreate() 
       .setName("kalees")
       .setUpstreamMode(SetupUpstreamMode.SET_UPSTREAM)
       .setStartPoint("origin/kalees")
       .setForce(true)
       .call(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-22T10:56:17.013

当我想创建一个带有空存储库的分支时，我遇到了这个问题，这个存储库中没有提交。

当我将某些内容提交到存储库时，它就解决了。希望它对你有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-23T02:58:51.740

Muthu 您的代码正在运行，您只需要像这样将 origin/branch 添加到分支调用中

```
Ref call = checkout.setName("origin/kalees").call(); 
```

# android - 如何让溢出菜单图标占用更少的空间？

> ID：12614633
> 
> 赞同：1
> 
> 时间：2012-09-27T05:26:54.800
> 
> 标签：android, android-actionbar, actionbarsherlock

在 Jelly Bean 上，标准操作栏溢出图标延伸到电池图标的中间。

然而，对于谷歌浏览器应用程序，它明显更薄，只延伸到电池和时钟之间的中点。

更改溢出图标似乎没有帮助。还有其他方法吗？

ps 我正在使用 ActionBarSherlock 并针对 Froyo 及更高版本。

# listbox - 在 windows phone 7 的列表框中点击图像

> ID：12614634
> 
> 赞同：0
> 
> 时间：2012-09-27T05:27:01.377
> 
> 标签：listbox, windows-phone-7.1

我在win phone 7应用程序中有一个listBox，每个列表项中有一个图标图像。当我点击图标图像时，将处理一些下载工作。如果我不点击图标，只需点击所选项目，应该执行页面导航。现在，当我点击图标时，页面被导航到另一个页面。如果我想点击图标进行下载工作，而不是导航，有人可以给我一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:17:08.570

而不是按钮，您`Tap`可以`Image`在`item template`. 我想这也应该奏效。对你来说永远不会少。

# php - 如何从 SQL 查询中获取多个结果

> ID：12614637
> 
> 赞同：2
> 
> 时间：2012-09-27T05:27:12.897
> 
> 标签：php, sql

我有这个功能：

```
function findAllmessageSender(){
$all_from =  mysql_query("SELECT DISTINCT `from_id`  FROM chat");
$names = array();
while ($row = mysql_fetch_array($all_from)) {
$names[] = $row[0];
}
return($names);
} 
```

在私人消息系统中返回我的用户的所有 ID。然后我想获取 user_id 等于登录用户且 from_id 等于`from_id`我从上一个函数中获得的所有消息的所有消息：

```
 function fetchAllMessages($user_id){
 $from_id = array();
 $from_id = findAllmessageSender();
 $data = '\'' . implode('\', \'', $from_id) . '\'';
 //if I echo out $ data I get these numbers '113', '141', '109', '111' and that's what I want
 $q=array();
$q = mysql_query("SELECT * FROM chat WHERE `to_id` = '$user_id' AND `from_id`   IN($data)") or die(mysql_error());
 $try = mysql_fetch_assoc($q);
 print_r($try);
 } 
```

print_r 仅返回 1 个结果：

```
Array ( 
[id] => 3505 
[from_id] => 111 
[to_id] => 109 
[message] => how are you? 
[sent] => 1343109753 
[recd] => 1 
[system_message] => no 
) 
```

但是应该有4条消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:32:44.140

您必须`mysql_fetch_assoc()`为返回的每一行调用。如果您只调用`mysql_fetch_assoc()`一次，那么它只会返回第一行。

尝试这样的事情：

```
$result = mysql_query("SELECT * FROM chat WHERE `to_id` = '$user_id' AND `from_id`   IN($data)") or die(mysql_error());
while ($row = mysql_fetch_assoc($result)) {
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:37:24.423

'mysql_fetch_assoc' 返回一个关联数组，该数组对应于获取的行并将内部数据指针向前移动。

您需要像这样迭代数组：

```
 while ($row = mysql_fetch_assoc($q)) {      
           echo $row["message"]; 
```

}

# ruby-on-rails-3 - Rails 3.2 一对多视图

> ID：12614640
> 
> 赞同：1
> 
> 时间：2012-09-27T05:27:28.943
> 
> 标签：ruby-on-rails-3, view, one-to-many

我试图让这个工作，查看多个教程，这里的问题尝试了大约一周的不同事情，但我无法让视图正常工作。

我有用户团队。一个团队**`has_many`用户**和一个**用户`belongs_to`一个团队**（一次一个团队）。我知道该关联有效，因为我使用控制台使其正常工作（那里有一些帮助）。我不确定如何让它在视图中工作。以下是代码，如果需要更多，请告诉我。

我错过了什么？

**_join_team_button**

```
<%= form_for(@user) do |f| %>
  <%= f.submit "Join Team", class: "btn btn-large btn-primary" %>
<% end %> 
```

团队展示页面

```
<%= render 'shared/join_team_button %> 
```

团队控制器

```
def show
  @team =  Team.find(params[:id])
  @team_members = @team.users
  @user = current_user.users.build if signed_in?
end 
```

用户控制器

```
def show
  @user = User.find(params[:id])
  @teams = @user.team
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:58:24.400

我试图对您正在寻找的内容进行完整的演示。让我知道它是否适合你。

```
#FILE: models/team.rb
class Team < AR::Base
   has_many :users
end 
```

* * *

```
#FILE: models/user.rb
class User < AR::Base
   belongs_to :team
end 
```

* * *

```
#FILE: config/routes.rb
#Here you are defining "users" as a nested resource of "teams"
resources :teams  do 
    resources :users do
        member do
            put :join
        end
    end
end

#if you run "rake routes" it will show you the following line along with others
join_team_user PUT    /teams/:team_id/users/:id/join(.:format) users#join 
```

* * *

```
#FILE: controllers/team_controller.rb
def show
    @team =  Team.find(params[:id])
    @team_members = @team.users
    @user = current_user.users.build if signed_in?
end 
```

* * *

```
#FILE: views/teams/show.html.erb
<% if(@user) %>
    <%= form_for @user, :url => join_team_user_path(@team, @user) do |f| %>
      <%= f.submit "Join Team", class: "btn btn-large btn-primary" %>
    <% end %>
<% end %>

#You dont really need a form for this. You can simply use `link_to` like below
<%= link_to 'Join', join_team_user_path(@team, @user), method: :put %> 
```

* * *

```
#FILE: controllers/users_controller.rb
def join
    # params[:id] => is the user_id
    @user = User.find(params[:id])

    # params[:team_id] => is the team_id
    @team = Team.find(params[:team_id])

    # Now make the relationship between user and team here.
    @user.update_attribute(:team, @team)
end 
```

* * *

**更新：***根据您的评论*

***问：**我是创建一个新用户的资源并嵌套它还是嵌套已经建立的用户资源？*

**答：**根据您的要求，任何资源都可以独立或嵌套定义。但是是的，您可以控制哪种方法可用哪种方式。就像您的情况一样，您只能在嵌套在资源下`join`时允许方法。`user``team`

```
resources :users, :only=>:join do
    member do
        put :join
    end
end
resource :users 
```

在`rake routes`有和没有`:only=>:join`选项的情况下运行，并查看可用路线的差异。

***问：**会不会影响其他的事情？*

**Ans：**如果你按照上面的例子严格定义你的路线，它应该不会影响其他事情。您应该通过 确认到您的应用程序的所有可用路由`rake routes`。

***问：**我应该把我当前的`routes.rb`文件放在那里吗？*

**Ans：**假设您的当前`routes.rb`将按上述方式进行修改。我可以回答这个问题吗？

***问：**对评论控制器感到困惑？*

**答：**非常抱歉。是的，它必须`users_controller.rb`像`rake routes`命令显示的那样。从我自己的示例代码中复制和粘贴的结果：P

***问：**我应该放什么？构建方法*

**回答：**在您的情况下，您的数据库中已经存在`user`和。`team`您需要做的只是建立关系。所以你可以只使用`update_attribute`选项。我改变了加入方法。请检查。但是是的，如果要创建新条目，您可能需要构建方法。

*这么晚才回复很抱歉 ：）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T14:58:29.053

我想到了。仍然不完美，但它让协会运作起来。团队和用户已经创建，我只需要建立关联，因此构建方法将不起作用。这是我所拥有的：

看法：

```
<%= form_for(@user) do |f| %>
<%= f.hidden_field :team_id, :value => @team.id %>
  <%= f.submit "Join Team", class: "btn btn-large btn-primary" %>
<% end %> 
```

团队控制器：

```
def show
  @team =  Team.find(params[:id])
  @team_members = @team.users
  @user = User.find(params[:id]) if signed_in?
end 
```

# android - 我的 SQLite 语句有什么问题？我不断收到语法错误

> ID：12614642
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:28:02.787
> 
> 标签：android, sql, sqlite

我不断收到以下错误，但我不知道为什么：

> 09-26 22:18:42.255：E/AndroidRuntime(10613)：致命异常：主要 09-26 22:18:42.255：E/AndroidRuntime(10613)：android.database.sqlite.SQLiteException：靠近“，”：语法错误（代码 1）：，

编译时：

```
UPDATE reminders
SET NAME = 'Finish this app.'
    , category = 'Personal'
    , priority = 'Urgent'
    , note = 'Test note'
    , phone_call = 0
    , text_message = 0
    , phone_number = ''
    , text_message_content = ''
    , no_reminder = 0
    , remind_me_after = 1
    , remind_me_after_length = 120
    , custom_remind_me_after = 0
    , remind_me_at = 0
    , time_hour = 22
    , time_minute = 18
    , date_month = 8
    , date_day = 26
    , date_year = 2012
    , recur = Never
    , custom_recur_length = 0
    , custom_recur_unit = NULL
    , custom_recur_until_month = 0
    , custom_recur_until_day = 0
    , custom_recur_until_year = 0
    , custom_recur_sunday = 0
    , custom_recur_monday = 0
    , custom_recur_tuesday = 0
    , custom_recur_wednesday = 0
    , custom_recur_thursday = 0
    , custom_recur_friday = 0
    , custom_recur_saturday = 0
    , share_email_address = ''
    , share_email_message = ''
    , share_phone_number = ''
    , share_text_message_content = ''
    , alert_type_sound = 1
    , alert_type_vibrate = 1
    , alert_type_notification_light = 1
    , repeat_alert = 0
    , repeat_alert_length = 0
    , repeat_alert_times = 0
WHERE _id = 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:32:35.183

```
recur = Never 
```

应该

```
recur = 'Never' 
```

我猜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:32:47.523

> ```
>  recur = never, 
> ```

这应该是

```
 recur = 'never', 
```

# primefaces - primefaces 中的 selectOneMenu 问题？

> ID：12614643
> 
> 赞同：1
> 
> 时间：2012-09-27T05:28:09.843
> 
> 标签：primefaces

我正在使用 primefaces 3.2，并且我使用了 primefaces 中的 selectOneMenu。当我将某些内容拖放到 selectOneMenu 框中时，它会显示一些 url（例如将图像拖放到 selectOneMenu 中）。文本框允许拖放但为什么 selectOneMenu .如何避免。

```
 <p:selectOneMenu value="#{buttonBean.number}">  
            <f:selectItem itemLabel="Select One" itemValue="" />  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
        </p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:07:41.813

Primefaces 3.2 使用 html 输入来显示选定的值。如果可以，请更新到 3.4。辅助输入消失了，没有这个问题。您可以在[陈列柜](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)中对其进行测试。

# trigger.io - trigger.io 对 Windows Phone 的支持是否包括对动态磁贴的控制

> ID：12614644
> 
> 赞同：1
> 
> 时间：2012-09-27T05:28:22.130
> 
> 标签：trigger.io

Live Tiles 是让 Windows Phone 应用程序感觉原生的基础。也许我们需要等到我们可以编写自己的原生扩展。当扩展支持可用时，它是否也适用于 Windows Phone？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:56:52.180

目前。[没有](http://docs.trigger.io/en/v1.4/index.html)。

如果我正确理解“动态磁贴”，它们会出现在启动屏幕上以显示一些应用信息。今天，您可能必须“挂钩”到您的“动态磁贴”和 trigger.io 应用程序都使用的远程（即 json）共享服务。

最近，我访问了当地的 Microsoft 商店以“玩转”Windows Phone 7 - 底线... trigger.io 应用程序的行为应该与其他平台（Android 和 iOS）上的行为没有什么不同。

当然，您仍然可以将 trigger.io 应用程序“固定”到主屏幕。

# enyo - 使用 enyojs 为弹出窗口赋予不同的值

> ID：12614651
> 
> 赞同：0
> 
> 时间：2012-09-27T05:29:14.800
> 
> 标签：enyo

我有一个转发器，在其中显示不同的值。单击每一行时，我想显示几个值。但是在 enyo 示例中，弹出窗口的内容是弹出窗口.....

我想更改此内容。我已尝试如下

我有弹出窗口-

```
{name: "basicPopup", kind: "enyo.Popup", floating: true, centered: true,
        style: "background-color: yellow; padding: 10px", onHide: "popupHidden", components: [
            {content: "Popup..."}
        ]
    }, 
```

我在每一行的水龙头上使用的方法是

```
tapped: function(inSender, inEvent) {
 alert(inSender.getContent())
 this.$.basicPopup.setValue(inSender.getContent());
  this.$.basicPopup.show();
}, 
```

但是通过这个弹出窗口的值没有改变。我想改变值。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:30:18.460

您需要做的是在 Popup 内的组件上 setContent() 或在 Popup 上的 destroyClientControls() 然后 createComponents() 在其中添加您想要的内容。

要做到这一点，您需要为该组件提供一个名称，例如：

{名称：“弹出内容”，内容：“弹出...”}

然后使用 this.$.popupContent.setContent("foo");

# php - 仅返回 PHP 中选中（选定）的项目

> ID：12614652
> 
> 赞同：0
> 
> 时间：2012-09-27T05:29:19.807
> 
> 标签：php, input, checkbox, foreach

我无法仅从项目列表中返回已检查的项目。我不是只返回选中的项目，而是得到完整的复选框列表：选中与否。

我有一个表单，它返回许多带有复选框的项目列表。它似乎工作正常，保存了用户的偏好并正确分配`checked="checked"`给他们选择的项目。

生成如下：

```
foreach ($this->item as $code => $value) {
    $checked = $this->settings['item'][$code] ? "checked='checked'" : '';
    $output .= "<label style=\"margin-left: 20px;\"><input type='checkbox' {$checked} name='options[item][{$code}]'/>{$this->item[$code]}</label><br />\n\r";
} 
```

我只想返回所选复选框的值。

这是我一直在尝试的：

```
foreach ($_POST['items'] as $value) {
    echo "the value are: ".$value;
} 
```

这将返回所有项目，而不仅仅是选定的项目。

我也试过：

```
$item = $this->item;
foreach($item as $code) {
    print $code;
} 
```

这也会返回所有选中和未选中的项目。

谁能指出问题出在哪里？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:33:26.953

我不确定你在问什么，但我假设你想要以前检查过的那些。所以，试试这个：

```
foreach ($_POST['items'] as $code => $value) {
    if ($this->settings['item'][$code]) {
        echo "the value are: ".$value;
    }
} 
```

# wordpress - Wordpress 3.4.2 网站内部服务器错误 500 但管理面板工作正常

> ID：12614653
> 
> 赞同：1
> 
> 时间：2012-09-27T05:29:20.013
> 
> 标签：wordpress, internal-server-error

我刚刚将我的网站从**本地主机发布到在线服务器**，当我点击我的网站 URL [http://www.playinkstudio.com](http://www.playinkstudio.com) 但管理面板[http://www.playinkstudio.com](http://www.playinkstudio.com/wp-admin)时，我遇到了**内部服务器错误 500** [/wp-admin](http://www.playinkstudio.com/wp-admin)工作正常。

我已经通过互联网阅读了文章并检查了根目录中不存在的 .htaccess 文件。我已将主题更改为默认值，但没有任何反应。

然后我停用了插件但没有用。

复制了刷新文件但没用。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:47:53.753

您是否更新了网站和主页 url？

当您计划更改它时，您需要在两个地方更新您的 WordPress URL。它们都位于常规 > 设置子面板下。将“WordPress 地址 (URL)”和“博客地址 (URL)”值更新为您网站的新 URL。

![在此处输入图像描述](../Images/74c07c219b240d9294497aca5780f0d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:35:07.290

检查 htaccess 是否有正确的路径，如果你刚刚复制了那个 htaccess 需要正确的路径

**更新**

如果 htaccess 不存在，这可以帮助你 [link]http://wordpress.org/support/topic/500-internal-server-error-24[/link] 使用具有以下代码的文本编辑器创建一个 htaccess 文件并将其上传到wordpress目录。

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
</IfModule> 
```

# c# - Linq 可以从数据网格中检索行吗

> ID：12614654
> 
> 赞同：0
> 
> 时间：2012-09-27T05:29:28.687
> 
> 标签：c#, wpf, linq

我正在使用 WPF 数据网格。我可以使用 Linq 从数据网格中检索行吗？

就像是 ：

```
List<People> people = from products in datagrid1 select products.ToList<People>(); 
```

我觉得不对吧？如果 Linq 支持 datagrid 那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:35:58.123

您应该能够查询`ItemSource`数据网格的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:03:28.360

我怀疑您遇到的问题`ItemsSource`是弱类型只是`IEnumerable`- 而大多数 LINQ to Objects 都适用于`IEnumerable<T>`. 您可以使用该`Cast<T>()`方法创建一个序列，该序列将在必要时转换每个项目。尝试这个：

```
List<People> people = datagrid1.ItemsSource.Cast<People>().ToList(); 
```

请注意，每当您看到表单的查询表达式时，`from x in source select x`您应该考虑只使用`source`- 查询表达式不应该盲目使用；弄清楚每一个的意思，然后确定它是否是表达你需要的最合适的方式。

如果你*真的*想要一个更大的查询，你可能根本不想通过 a `List<People>`。例如：

```
// Note the explicit typing of the range variable, which corresponds to a Cast
// call in the query translation.
var query = from People person in datagrid1.ItemsSource
            where person.Age > 50
            select person.Name; 
```

（顺便考虑将您的`People`类型更改`Person`为，除非它确实代表了一群人——在这种情况下，您可能应该给它一个反映该集合真正含义的名称。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:01:28.960

尝试这个：

```
List<People> people = (from product in datagrid1.ItemsSource
                       select product).ToList<People>(); 
```

# ruby-on-rails - jqGrid：使用 dataUrl 发送参数

> ID：12614662
> 
> 赞同：0
> 
> 时间：2012-09-27T05:30:24.257
> 
> 标签：ruby-on-rails, jqgrid

我正在尝试创建一个依赖下拉框。“元素”依赖于“分组”。

我的 ajaxSelectOptions 函数似乎可以工作，因为传递了“temp”，但是“populate_element”没有使用它。如何使用'temp'作为我的参数：id？

我的网格：

```
jQuery(document).ready(function(){
var lastsel;
var grid = jQuery("#list").jqGrid({

url:'codes/get_data.xml',
datatype: 'xml',
mtype: 'GET',
colNames:['ID', 'Version', 'Grouping', 'Element', 'Name'],
colModel:[
    {name: 'id', index: 'id', hidden: true, editable: false },
    {name: 'version', index: 'version',editable: true, editrules:{number:true}, cellEdit: true, search:true },
    {name: 'grouping', index: 'grouping', editable: true, edittype: 'select', editoptions: {dataUrl: 'codes/populate_grouping.html'} },
    {name: 'element', index: 'element', editable: true, edittype: 'select' }
],
pager: '#pager',
rowNum:200,
rowList:[50,100,200],
sortname: 'id',
sortorder: 'asc',
viewrecords: true, 
height: 500,
scrollrows: true,
rownumbers: false,
caption: 'GL Codes',
editurl: 'codes/post_data.xml',

onSelectRow: function(id){
    $("#list").setColProp('element', {editoptions: { dataUrl: 'codes/populate_element.html' }});

    if(id && id!==lastsel){
        $('#list').restoreRow(lastsel);         
       lastsel=id;
    }
    $('#list').editRow(id,true);        
},
ajaxSelectOptions: {
      data: {
        temp: function(temp){
          return grid.jqGrid('getGridParam', 'selrow')
        } 
      }
    }

}); 
```

这是我的错误信息：

```
Started GET "/codes/populate_element.html?temp=4" for 127.0.0.1 at 2012-09-27 17:18:33 +1200
Processing by CodesController#populate_element as HTML
  Parameters: {"temp"=>"4"}
Completed 500 Internal Server Error in 1ms

ActiveRecord::RecordNotFound (Couldn't find Code without an ID):
app/controllers/codes_controller.rb:73:in `populate_element' 
```

**更新** 我确定它实际上只是调用参数时的 ruby​​ 语法错误，而不是 jqGrid 问题。作为参考，我最终这样称呼它... @code = Code.where(["id = ?",params[:temp]]).first

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:48:18.170

我认为问题在于您对网格行使用了错误的 ID。*在填充*网格期间存在错误。解决此问题的最简单方法是将`key: true`属性添加`'id'`到`colModel`. 在这种情况下，列中的值`id`将用作 rowid：网格`id`的行 () 的属性值。`<tr>`

# glassfish-2.x - 在 GlassFish Server 2.1 上部署应用程序时出现 NullPointerException

> ID：12614663
> 
> 赞同：0
> 
> 时间：2012-09-27T05:30:29.217
> 
> 标签：glassfish-2.x

`NullPointerException`在我的 GlassFish Server 2.1 上部署应用程序时遇到问题。它不会影响我的应用程序中的任何内容，因为它运行平稳，但我想在部署期间解决此错误。

这是异常的堆栈跟踪：

```
java.lang.NullPointerException
    at org.apache.catalina.loader.WebappClassLoader.findResources(WebappClassLoader.java:1100)
    at org.apache.catalina.loader.WebappClassLoader.getResources(WebappClassLoader.java:1349)
    at com.sun.xml.ws.util.ServiceFinder$LazyIterator.hasNext(ServiceFinder.java:351)
    at com.sun.xml.ws.api.pipe.TubelineAssemblerFactory.create(TubelineAssemblerFactory.java:104)
    at com.sun.xml.ws.api.pipe.TubelineAssemblerFactory.create(TubelineAssemblerFactory.java:78)
    at com.sun.xml.ws.client.WSServiceDelegate.createPipeline(WSServiceDelegate.java:419)
    at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:589)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:329)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:311)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:304)
    at javax.xml.ws.Service.getPort(Service.java:92) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:49:04.543

是的。您不应该在 glassfish\lib 文件夹中维护 commons-discovery.jar。将它放在项目的 WEB-INF/lib 文件夹中，而不是 C:\GlassFishESBv22\glassfish\lib 文件夹中，这应该可以解决您的问题。

在 C:\GlassFishESBv22\glassfish\lib 文件夹中包含 commons-discovery.jar 时会出现此问题。

# git - Git pull 失败，得到“远程端意外挂断”，Windows XP Jenkins slave

> ID：12614664
> 
> 赞同：2
> 
> 时间：2012-09-27T05:30:40.503
> 
> 标签：git, ssh, jenkins, jenkins-plugins

我们有一个遗留项目必须在 Windows XP 机器上构建，因此我们将其设置为 Jenkins 从站。我们相信我们已经正确设置了环境，因为我们可以在 XP 机器上的 Git Bash 和 Dos 命令窗口中成功运行“Git Pull”。但是，当尝试从 Jenkins 运行构建作业时，它总是在 Git Pull commnand 上失败。

我们尝试以两种不同的方式运行 Git Pull：（出于安全目的，我用 覆盖了一些路径或服务器名称`XXXXX`）

1/ 在 dos 批处理文件中运行“Git Pull”，当调用该批处理时，我们在构建控制台输出中收到错误消息，例如：

```
C:\sXXXXXX\cXXXXXX\gXXXXX>git checkout . 

C:\sXXXXXX\cXXXXXX\gXXXXX>git pull -v ssh://oXXXXXX@sXXXXX/git/cXXXXX/gXXXXX.git 
fatal: The remote end hung up unexpectedly 
```

2/ 在 Jenkins 中使用 Git 插件，我们收到如下错误消息：

```
Building remotely on buildbox1 in workspace C:\sXXXXX\cXXXX\gXXXXX
Checkout:gXXXXX / C:\sXXXXX\cXXXX\gXXXXX - hudson.remoting.Channel@62452c45:buildbox1
Using strategy: Default
Fetching changes from 1 remote Git repository
Fetching upstream changes from ssh://oXXXXXX@sXXXXX/git/cXXXXX/gXXXXX.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
hudson.plugins.git.GitException: Command ""C:\Program Files\Git\bin\git.exe" fetch -t     ssh://oXXXXXX@sXXXXXX/git/cXXXXX/gXXXXX.git +refs/heads/*:refs/remotes/origin/*" returned status     code 128:
stdout: 
stderr: fatal: The remote end hung up unexpectedly

at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:863)
at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:824)
at hudson.plugins.git.GitAPI.fetch(GitAPI.java:198)
at hudson.plugins.git.GitAPI.fetch(GitAPI.java:1071)
at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:810)
at hudson.plugins.git.GitSCM.access$100(GitSCM.java:76)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1076)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1044)
at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2273)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at hudson.remoting.Engine$1$1.run(Engine.java:60)
at java.lang.Thread.run(Unknown Source)
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1083)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1044)
at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2273)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at hudson.remoting.Engine$1$1.run(Engine.java:60)
at java.lang.Thread.run(Unknown Source) 
```

任何人都可以提供帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:19:21.847

确保你的 Jenkins 从代理确实有一个`HOME`环境变量设置（做一个简单的工作`echo %HOME%`）：它需要它来找到你的公钥和私钥。

# android - Android Canvas drawBitmap 函数效率

> ID：12614665
> 
> 赞同：1
> 
> 时间：2012-09-27T05:30:45.293
> 
> 标签：android, image-processing, canvas, matrix, bitmap

我正在尝试使用矩阵在画布上显示位图。

```
 canvas.drawBitmap(currentBitmap, m_matrix, tempPaint); 
```

但结果出现了，图像看起来很奇怪。之后我使用边界展示了它

```
 canvas.drawBitmap(currentBitmap, 0, 0, tempPaint); 
```

但是这里的图像看起来不错，在这两种情况下图像都没有缩放。

我应该如何设置初始显示的矩阵属性？

矩阵显示器是否使用其他东西来显示图像，因为该图像正在改变？

请建议任何教程以获取详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:39:36.140

经过大量搜索后，我终于找到了解决方案，一些与同一问题相关的线程帮助了我。

[质量问题](https://stackoverflow.com/questions/4821488/bad-image-quality-after-resizing-scaling-bitmap)

[在运行时调整图像大小时的质量问题](https://stackoverflow.com/questions/4231817/quality-problems-when-resizing-an-image-at-runtime)

我按照谷歌的教程加载位图并编写了我自己的函数来缩放位图。

```
public static Bitmap scaleDownBitmap(Bitmap original, boolean recycleOriginal, int newmaxWidth , int newmaxHeight){

        if(original == null)
             return null;

        Bitmap rtr= null;
        try{

                int origWidth  = original.getWidth();
                int origHeight = original.getHeight();

                if(origWidth <= newmaxWidth && origHeight <= newmaxWidth){
                        Bitmap b = Bitmap.createBitmap(original);
                        if (recycleOriginal && (original != b))
                            original.recycle();
                    return b;
                }

                int newWidth = 0;
                int newHeight = 0;

                float ratio;

                if(origWidth > origHeight){
                        ratio = (float)origWidth/(float)origHeight;
                        newWidth = newmaxWidth;
                        newHeight = (int)((float)newWidth/ratio);

                } 
                else{
                        ratio = (float)origHeight/(float)origWidth;
                        newHeight = newmaxHeight;
                        newWidth = (int)((float)newHeight/ratio);
                }

                rtr = CreateScaledBitmap(original , newWidth , newHeight);

                if(recycleOriginal && original != rtr)
                        original.recycle();

        }
        catch (Exception e) {
            Log.d("Image Compress Error", e.getMessage());
        }

        return rtr;

 }

     public static Bitmap CreateScaledBitmap(Bitmap paramBitmap, int paramInt1, int paramInt2)
   {
        Bitmap localBitmap = Bitmap.createBitmap(paramInt1, paramInt2, paramBitmap.getConfig());
        Canvas localCanvas = new Canvas(localBitmap);
        localCanvas.setDrawFilter(new PaintFlagsDrawFilter(0, 2));
        localCanvas.drawBitmap(paramBitmap, new Rect(0, 0, paramBitmap.getWidth(), paramBitmap.getHeight()),
                                            new Rect(0, 0, paramInt1, paramInt2), null);
    return localBitmap;
} 
```

现在，在获得图像后，我将以下参数传递给了油漆。

```
tempPaint.setFilterBitmap(true); //Line 1
canvas.drawBitmap(currentBitmap, m_matrix, tempPaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:45:06.853

你必须使用 Matrix 。后缩放以缩放图像，如下例所示。

私人无效drawMatrix（）{

矩阵矩阵 = 新矩阵（）；matrix.postScale(curScale, curScale);

```
 canvas.drawBitmap(currentBitmap, matrix, tempPaint);} 
```

还没有尝试过....但是应该可以...

# php - Wordpress：register_activation_hook 不起作用

> ID：12614667
> 
> 赞同：3
> 
> 时间：2012-09-27T05:31:13.127
> 
> 标签：php, wordpress

我目前正在编写一个 wordpress 插件，但遇到了一些问题。我的功能在插件激活后无法运行...有人可以告诉我问题出在哪里吗？

```

类 my_plugin {

    公共$ajaxurl；
    公共 $excanvas;
    公共 $plugin_path = '';

    函数 __construct()
    {

        register_activation_hook(__FILE__,array(&$this, 'install'));
    }

    公共函数 wpmon_install()
    {
        //将我的页面模板复制到当前主题。

        $plugin_path = getcwd() 。目录分隔符。'wp-内容'。目录分隔符。'插件' 。目录分隔符。'wpmon' 。DIRECTORY_SEPARATOR；
        $target_path = get_stylesheet_directory()。DIRECTORY_SEPARATOR；
        $target_path = str_replace('/',DIRECTORY_SEPARATOR,$target_path);
        $template_files = glob($plugin_path . 'page_template'.DIRECTORY_SEPARATOR.'*.php');

        foreach($template_files 作为 $files)
        {
            $basename = basename($files);
            尝试{
                $target = $target_path 。$基本名称；
                复制（$文件，$目标）；

            }
            捕获（异常 $e）{

                $this->log_error($e->getMessage());
            }
        }
    }

```

但不幸的是，安装功能不起作用......但是当在课堂外时，“安装”功能内的这段代码正在工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:52:58.560

从发布的代码中，我可以看到两个问题。install 应更改为 wpmon_install。此外，您应该添加一些代码来初始化您的类。

即`$wp_mon = new my_plugin();`之后`class my_plugin { }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T10:01:08.650

请检查您是否使用软链接，插件必须完全在 中`/path/to/wordpress/wp-content/plugins/yourplugin`，意思是说这`yourplugin`不是软链接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T05:47:14.113

您让 Wordpress 尝试调用`install`在您的类中调用的函数，但它不存在。所以尝试改变：

```
register_activation_hook(__FILE__,array(&$this, 'install')); 
```

至

```
register_activation_hook(__FILE__,array(&$this, 'wpmon_install')); 
```

# jquery - 防止多次点击启动动画

> ID：12614672
> 
> 赞同：0
> 
> 时间：2012-09-27T05:31:23.937
> 
> 标签：jquery

我有一个 div 框，如果我双击它将扩展到整个页面。如果我按下 div 展开后生成的按钮，则 div 框将最小化回其原始大小。但是，如果我双击 div 框，该事件将被触发两次，展开 div 框然后立即将其最小化。所以我尝试使用 .one() 但没有意识到它只能工作一次。我可以使用什么来一次只允许单击一次而不触发多个事件？这是 jsbin，下面是严格的 jquery 代码。[http://jsbin.com/eqezas/3/edit](http://jsbin.com/eqezas/3/edit)

```
$("#block").one('click', function(){
            $('#block1').hide();
  $("#block").animate({ 
    width: "100%",
    height: "100%",
    opacity: 0.4,
    fontSize: "3em", 

  }, 1500, function() {
    $('#but').show();  
     });

});

$('#but').one('click',function() {
            $('#block1').show();
      $("#block").animate({ 
    width: "100px",
    height: "40px",
    opacity: 1,
    fontSize: "1em", 

  }, 1500 );
            $('#but').hide(); 
    return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:57:26.360

尝试这样的事情：

```
var processing = false;  // Global variable

// Probably in document.ready:
$("#element").click(function () {
    if (!processing) {
        processing = true;
        $("#element2").animate({"blah": "blah"}, 1000, "easeOutBounce", function () {
            processing = false;
        });
    }
}); 
```

这样，无论你多次点击原始元素，它都处于“处理”状态，直到动画完成。

# jquery-mobile - 如何使用 jqueymobile 使后退按钮在 android 中工作？

> ID：12614675
> 
> 赞同：0
> 
> 时间：2012-09-27T05:31:36.917
> 
> 标签：jquery-mobile, back-button

我有一个应用程序，我正在使用 jquery-mobile，它有一个标题，它有 2 个按钮**“home”**和**“back”**，当我点击后退按钮时，它应该终止页面并且应该返回，但这没有发生. 谁能帮助我如何使用jquery mobile后退按钮来实现这一点。

我的代码：

```
<div id="home" data-role="page">
   <div data-role="header" data-position="fixed" data-add-back-btn="true">
      <a id="backBtn" href="#" data-icon="arrow-l">Back</a>
      <h1>SDCard Explorer</h1>
      <a id="homeBtn" href="index.html" data-icon="home" data-transition="pop">Home</a>
   </div>
</div> 
```

这是我使用的 jquery 库：

```
<href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<src="jquery.mobile-1.0.1.min.js" />
<src="http://code.jquery.com/jquery-1.7.1.min.js" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:55:35.970

你好，你可以试试这个：

```
<!DOCTYPE html>
 <html>
  <head>
     <!--here links to the jQuery Mobile Library -->
  </head>
  <body>
   <div id="Page" data-role="page" data-theme="a">
    <div data-role="header" data-position="fixed">
     <a href="#YourWishPage" class="BackButton" data-icon="arrow-l">Back</a>
      <h1>Tite</h1>
     </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:01:42.137

```
<!DOCTYPE html>
 <html>
  <head>
    <!--here links to the jQuery Mobile Library -->
   </head>
  <body>
    <div id="Page" data-role="page" data-theme="a">
     <div data-role="header" data-position="fixed">
     <a href="javascript:GoBack()" class="BackButton" data-icon="arrow-l">Back</a>
    <h1>Tite</h1>
  </div>
 </div>
 </body>
</html> 
```

这里是JS文件中的函数

```
function GoBack(){
    history.go(-1);
} 
```

它应该在艺术中发挥作用

# java - Galaxy S 呼叫时的空白电子邮件

> ID：12614676
> 
> 赞同：0
> 
> 时间：2012-09-27T05:31:44.640
> 
> 标签：java, android, forms, email, galaxy

我创建了一个表单应用程序，用户填写表单然后单击提交按钮，该按钮在电子邮件中格式化用户数据。该应用程序在我的 Droid Charge 上填充电子邮件正文中的数据，但当有人使用 Galaxy S 时，电子邮件正文为空白。有谁知道解决此问题的方法？

```
Intent emailIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            emailIntent.setType("message/rfc822");
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                    new String[] { "email@email.com" });
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "Form on " + String.valueOf(editText1.getText()) + "Tech " + String.valueOf(editText2.getText()));
            emailIntent.putExtra(
                    android.content.Intent.EXTRA_TEXT,
                    "Completed by = " + String.valueOf(editText1.getText())
                            + " / " + String.valueOf(editText2.getText())
                            + '\n' + "Tech Center = "
                            + String.valueOf(editText3.getText())
                            + '\n' + "Job # = "
                            + String.valueOf(editText4.getText())
                            + '\n' + "Date = "
                            + String.valueOf(editText5.getText())
                            + '\n' + "Address = "
                            + String.valueOf(editText6.getText())
                            + '\n' + "Type = "
                            + String.valueOf(spinner7.getSelectedItem())
                            + '\n' + "Work = "
                            + String.valueOf(spinner8.getSelectedItem())
                            + '\n' + "Location = "
                            + String.valueOf(spinner9.getSelectedItem())

                            //code omitted

                            + '\n' + "Referrals = "
                            + String.valueOf(editText8.getText())
                            + '\n' + String.valueOf(result11.toString()));

            startActivity(Intent.createChooser(emailIntent, "Send Mail"));
            finish();

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:43:51.253

请尝试改用该`Intent.ACTION_SENDTO`操作。这还有一个额外的好处，就是只有实际的电子邮件应用程序出现在选择器中。

不幸的是，我认为您在使用`Intent.ACTION_SENDTO`. 你必须使用这样的东西：

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO).setData(Uri.parse(String.format(
   "mailto:%s?subject=%s&body=%s",
   recipient,
   subject,
   body
).replace(" ", "%20"))); 
```

# python - 蟒蛇功能测试

> ID：12614677
> 
> 赞同：1
> 
> 时间：2012-09-27T05:31:55.793
> 
> 标签：python, functional-testing, regression-testing

我目前正在用 Python 编写 Java 反编译器，并想添加一些自动化功能测试。我有一堆简短的 Java 代码，需要确保它们反编译没有错误，输出代码编译，并且生成的程序给出预期的输出。

我计划编写一些脚本来`subprocess`自动完成这一切，但我在决定如何创建和存储测试时遇到了麻烦。我想在我出去创建自己的格式和测试运行程序之前，我应该尝试看看是否有任何可行的方法来使用现有的框架。我应该怎么办？我在互联网上阅读了很多关于单元测试、集成测试等的内容，但我不确定如何将其应用于我的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:40:47.870

您是否检查了标准 python API 中包含的[http://docs.python.org/library/unittest.html 。](http://docs.python.org/library/unittest.html)我认为这应该足够你想要达到的目标了。您也可以通过命令行运行这些测试。因此，它们可以使用您想要的 Python 之外的任何工具自动化。

还要检查 doctests 它们非常适合测试单个功能。

# ruby-on-rails - 在 Heroku 上配置 I18n 回退

> ID：12614683
> 
> 赞同：1
> 
> 时间：2012-09-27T05:32:45.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, internationalization, i18n-gem

我已经尽一切努力在 Heroku 上制作 i18n 后备，但我做不到。我不想收到“翻译缺失消息”。它在开发模式下工作正常。

请帮忙！

谢谢

```
require "i18n/backend/fallbacks"
I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)
I18n.fallbacks.map(:es => [:en])
config.i18n.fallbacks = true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-07T06:04:13.783

我的 application.rb 文件中有这个：

```
config.i18n.fallbacks = [:en] 
```

我刚刚在production.rb中评论了这段代码：

```
config.i18n.fallbacks = true 
```

它在heroku中对我来说工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T18:35:25.237

在 config/enviroments/production.rb

```
class Appname::Application.configure do
  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true
end 
```

[如何使用 rails i18n 后备功能](https://stackoverflow.com/questions/4223806/how-to-use-rails-i18n-fallback-features)

# android - 快捷方式无法启动活动

> ID：12614684
> 
> 赞同：1
> 
> 时间：2012-09-27T05:32:46.183
> 
> 标签：android, shortcut

*   我通过代码创建了一些我的活动的快捷方式，其中大多数都无法打开其相关活动。我发现它只有在我将过滤器 CREATE_SHORTCUT 添加到活动时才有效。为什么？

    ```
     <activity
           android:name=".ui.Main"
           android:launchMode="singleTop"
           android:screenOrientation="portrait"
           android:theme="@android:style/Theme.NoTitleBar" >
           <intent-filter>
               <action android:name="android.intent.action.CREATE_SHORTCUT" />
               <category android:name="android.intent.category.DEFAULT" />
           </intent-filter>
       </activity> 
    ```

    （在 Go Launcher 和 MIUI 2.3.7 中测试）

*   我得到了下面的日志，我应该添加 MAIN 过滤器吗？

    09-27 13:34:44.075: E/Launcher(7893): Launcher 没有
    权限启动 Intent { act=android.intent.action.VIEW
    flg=0x10000000 cmp=/.ui.Activity2 bnds=[349, 76][469,211]}。确保为相应的活动创建一个主意图过滤器或为此活动使用导出的属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T08:20:09.410

正如错误消息所示，您可以添加

```
android:exported="true" 
```

到你的活动。

尽管如果我正确阅读了android文档，这应该是默认值：

> **安卓：导出**
> 
> Whether or not the activity can be launched by components of other applications — "true" if it can be, and "false" if not. If "false", the activity can be launched only by components of the same application or applications with the same user ID. The default value depends on whether the activity contains intent filters. The absence of any filters means that the activity can be invoked only by specifying its exact class name. This implies that the activity is intended only for application-internal use (since others would not know the class name). So in this case, the default value is "false". On the other hand, **the presence of at least one filter implies that the activity is intended for external use, so the default value is "true"**.

Maybe someone else can clarify this.

# matlab - Matlab：使用 3 个向量制作等高线图

> ID：12614686
> 
> 赞同：5
> 
> 时间：2012-09-27T05:32:55.353
> 
> 标签：matlab, plot, contour

我有 3 个数据向量，X（位置）、Y（位置），它们都不是规则间隔的，以及 Z（每个位置的感兴趣值）。我尝试了contourf，它不起作用，因为它需要一个用于Z输入的矩阵。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-04T13:22:08.810

您也可以使用`griddata`.

```
%Generate random data
x = rand(30,1);
y = rand(30,1);
z = rand(30,1);

%Create regular grid across data space
[X,Y] = meshgrid(linspace(min(x),max(x),n), linspace(min(y),max(y),n))

%create contour plot
contour(X,Y,griddata(x,y,z,X,Y))

%mark original data points
hold on;scatter(x,y,'o');hold off 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T06:27:01.783

对于[等高线](http://www.mathworks.com/help/matlab/ref/contour.html)图，您实际上需要一个 z 值矩阵，或在网格上评估的一组 z 值（向量）。您不能使用网格上 (X,Y) 点处的孤立 Z 值定义轮廓（即您声称拥有的）。

您需要让生成过程（或函数）为 (x,y) 点的网格提供值。

如果不是，那么您可以*按照@nate 正确指出的那样*[从非均匀数据创建一个表面](http://blogs.mathworks.com/videos/2007/11/02/advanced-matlab-surface-plot-of-nonuniform-data/) ，然后在该表面上绘制轮廓。

 *考虑以下（随机）示例：

```
N = 64; % point set
x = -2 + 4*rand(N,1); % random x vector in[-2,2]
y = -2 + 4*rand(N,1); % random y vector in[-2,2]

% analytic function, or z-vector
z = x.*exp(-x.^2-y.^2);

% construct the interpolant function
F = TriScatteredInterp(x,y,z);

t = -2:.25:2; % sample uniformly the surface for matrices (qx, qy, qz)
[qx, qy] = meshgrid(t, t); 
qz = F(qx, qy);

contour(qx, qy, qz); hold on; 
plot(x,y,'bo'); hold off 
```

圆圈对应于具有`(x,y,z)`每个点的值的原始矢量点，即插值曲面轮廓上的轮廓。 ![在此处输入图像描述](../Images/a1deed397979c38240ef4959ca300c56.png) ![在此处输入图像描述](../Images/d556db9796b65b16c85db67d35e575c7.png)*

# c++ - C ++中的未知变量声明语法

> ID：12614687
> 
> 赞同：1
> 
> 时间：2012-09-27T05:33:02.280
> 
> 标签：c++, syntax

我遇到了一个程序，其中有一个名为“A”的类。

我无法理解的变量声明中有以下语法。

```
A& obj; 
```

这是什么意思以及在什么情况下使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:33:39.710

`obj`是`reference`一个`A`对象。大概这是一个类数据成员，因为引用不能默认初始化（它们必须从一开始就引用某些东西）。

```
struct Foo
{
  int& a;
  Foo(int n) : a(n) {} // must be initialized in constructor initialization list.
} 
```

# javascript - $(document).ready 无法替换页面底部声明的js，但我需要将脚本放在顶部

> ID：12614689
> 
> 赞同：1
> 
> 时间：2012-09-27T05:33:17.387
> 
> 标签：javascript, jquery, document-ready

我有基于 JQuery 的选项卡导航，只有将它放在菜单的 html 之后才有效。如果它也放在最后，它也可以工作，但是当我将相同的脚本放在 $(document).ready 顶部时会中断。

我认为这个（放在页面顶部）：

```
<script type="text/javascript">
$(document).ready(function(){
    mouseovertabsmenu.init("mytabsmenu", "mysubmenuarea", true);
});
</script> 
```

将与此相同：

```
 <script type="text/javascript">
        mouseovertabsmenu.init("mytabsmenu", "mysubmenuarea", true);
    </script>
</html> 
```

它位于页面底部并且可以工作。我怎么能把函数放在顶部，甚至从一个单独的文件中包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T10:35:57.947

我遇到了这个问题，我在 jquery 包含链接之后在头部使用了这个：

```
$(document).ready(myfunction()); 
```

由于未加载对象，此操作失败。我应该将我的调用包装在一个函数中：

```
$(document).ready(function () {
    myfunction();
}); 
```

只有在正确加载文档后才能按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:38:06.590

建议将脚本放在页面末尾的原因是为了在您尝试访问 HTML 元素之前将它们加载到页面上。

无论您将代码放在哪里，最好将代码包装在 DOM 就绪事件中，以确保在您尝试访问页面中的元素之前正确加载完整的 HTML 文档。

也许在你的情况下

```
 <script type="text/javascript">
        mouseovertabsmenu.init("mytabsmenu", "mysubmenuarea", true);
    </script> 
```

似乎在未封装在 DOM 就绪时可以工作是该函数不可访问，因为它的范围被 DOM 就绪阻止

# javascript - javascript函数调用性能与新

> ID：12614691
> 
> 赞同：0
> 
> 时间：2012-09-27T05:33:18.827
> 
> 标签：javascript, jquery, oop, prototype

我是 javascript 和 oops 的新手。我有一个javascript函数

```
function foo(args){

   ...
}

//mehtod1
var type1=foo(a);

//mehtod2
var type2= new foo(a); 
```

现在我怀疑哪个会给我们带来更多的性能 mehtod1 或 method2

new 关键字的意义是什么，与 mehtod1 相比有什么优势？

（对不起，如果问题已经存在并且我的英语很差）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:37:17.663

第一次调用执行一个操作：函数评估。第二个执行两个：创建一个新对象，然后进行函数评估。不要使用 new 来评估函数。

这是一个例子：

```
var x = function () { return true; };

var y = x(); // Type of y is boolean
var y = new x; // Type of y is object
var y = new x(); // Type of y is object
var y = x; // Type of y is a function
var y = x.call(this); // Type of y is a boolean 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:38:09.010

它们是不同的。

`type1`将是 function 的返回值`foo`。

`type2`将是一个构造函数为 function 的对象`foo`。

> **new**运算符创建用户定义对象类型或具有构造函数的内置对象类型之一的实例。

***[参考。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)***

# youtube - 你管视频不能在网站上显示

> ID：12614699
> 
> 赞同：0
> 
> 时间：2012-09-27T05:33:43.693
> 
> 标签：youtube

我正在尝试在我的网站中嵌入你的电子管视频。我想将此视频嵌入我的网站，例如[http://www.youtube.com/watch?v=Ma4k5sEdBDo](http://www.youtube.com/watch?v=Ma4k5sEdBDo)

[当我在 iframe 中使用网址http://www.youtube.com/embed/Ma4k5sEdBDo](http://www.youtube.com/embed/Ma4k5sEdBDo)时效果很好，但是当我使用网址[http://youtu.be/Ma4k5sEdBDo](http://youtu.be/Ma4k5sEdBDo)时它不起作用（从共享中获得选项）。我想从共享选项中输入网址。

这是我的代码

```
<iframe width="420" height="315" src="{$movieDetails.url}" frameborder="0" allowfullscreen></iframe> 
```

提前致谢，

苏尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:45:29.380

为了嵌入您的频道，您只需将以下代码复制然后粘贴到另一个网页中即可。

```
<script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&up_channel=YourChannelName&synd=open&w=320&h=390&title=&border=%23ffffff%7C3px%2C1px+solid+%23999999&output=js"></script> 
```

确保将**YourChannelName**替换为您的实际频道名称。

例如：如果您的频道名称是**CaliChick94066** ，您的频道嵌入代码将是：

```
<script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&up_channel=CaliChick94066&synd=open&w=320&h=390&title=&border=%23ffffff%7C3px%2C1px+solid+%23999999&output=js"></script> 
```

请查看以下链接：

[您网站上的 YouTube](http://www.youtube.com/youtubeonyoursite)

[嵌入 YouTube 频道](http://www.google.com/support/forum/p/youtube/thread?tid=4c414f514bc3f690&hl=en)

您只需将 URL 命名为您的频道名称。您也可以使用高度和边框颜色和大小。希望能帮助到你

# android - 如何使用android中的警报管理器在星期一设置警报？

> ID：12614700
> 
> 赞同：0
> 
> 时间：2012-09-27T05:33:49.073
> 
> 标签：android, alarmmanager, alarm

我想在星期一设置闹钟，但它不能正常工作，所以如何在星期一只设置一次闹钟。

```
if (chk_wednesday.isChecked()) {
                        weekday = 7 - calNow.get(Calendar.DAY_OF_WEEK);
                        calSet.add(Calendar.DATE, weekday);
                        forday(weekday);
                        }

public void forday(int week) {

                days = calNow.get(Calendar.DAY_OF_MONTH);
                month = calNow.get(Calendar.MONTH);
                year = calNow.get(Calendar.YEAR);

        calSet.set(Calendar.DAY_OF_WEEK, week);
        calSet.set(Calendar.HOUR_OF_DAY, hour);
        calSet.set(Calendar.MINUTE, minuts);
        calSet.set(Calendar.SECOND, 0);
        calSet.set(Calendar.MILLISECOND, 0);

        calSet.set(Calendar.DAY_OF_MONTH, days);
        calSet.set(Calendar.MONTH, month);
        calSet.set(Calendar.YEAR, year);

        if (calSet.compareTo(calNow) <= 0) {
            // Today Set time passed, count to tomorrow
            calSet.add(Calendar.DATE, 1);
        }
        Log.i("time1", "" + calSet.getTimeInMillis());
        alarmManager.set(AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(),
                pendingIntent);
    } 
```

任何人帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:13:27.223

我会这样做，其中`day_of_week`, `hour`,`minute`定义您希望警报发生的日期和时间。您将 calSet 设置为本周的适当时间。然后，如果该时间本周已经过去，则添加一周，以便将其设置为下周的适当时间。

```
calNow = Calendar.getInstance();

calSet = Calendar.getInstance();
calSet.set(Calendar.DAY_OF_WEEK, day_of_week);
calSet.set(Calendar.HOUR_OF_DAY, hour);
calSet.set(Calendar.MINUTE, minute);
calSet.set(Calendar.SECOND, 0);
calSet.set(Calendar.MILLISECOND, 0);

if (calSet.before(calNow)) {
    nextAlarm.add(Calendar.WEEK_OF_YEAR, 1);
} 
```

# reporting-services - SSRS 中的表格格式不正确

> ID：12614702
> 
> 赞同：0
> 
> 时间：2012-09-27T05:34:02.163
> 
> 标签：reporting-services, page-break

我有 4 张桌子，每张桌子都有隐藏的表情。我需要从新页面开始每个表。我在表格末尾应用了分页符，但没有任何效果。然后我将这 4 个表格放在 4 个矩形中，并在矩形末尾应用分页符。它工作正常，每个表都从新页面开始，但现在的问题是，如果任何表没有数据，而不是报告中的空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:29:45.353

查找答案：-
实际上报告宽度和身体宽度不正确。
永远记住 ReportWidth-LeftMargin-RightMargin > BodyWidth

# unity-container - 如何将 Unity.RegisterType 与 Moq 一起使用？

> ID：12614703
> 
> 赞同：14
> 
> 时间：2012-09-27T05:34:04.020
> 
> 标签：unity-container, moq

我有一个统一的运行代码。

现在我想使用 Moq 对 ASP-MVC 进行单元测试。在 global.asax 的代码中，我有以下内容：

```
IUnityContainer container = new UnityContainer();
container.RegisterType<IFoo, Foo>(new InjectionConstructor("xxx")); 
```

现在我用 Moq 编写了测试代码：

```
IUnityContainer container = new UnityContainer();
var mockFoo = new Mock<IFoo>(); 
```

`container.RegisterType<IFoo, mockFoo) >(new InjectionConstructor("xxx"));`

但这不起作用。

错误：类型“Moq.Mock”不能用作泛型类型或方法“Microsoft.Practices.Unity.UnityContainerExtensions.RegisterType”中的类型参数“TTo”...没有从“Moq.Mock”到'IFoo'

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T06:27:42.837

您正在尝试注册模拟对象，而不是模拟对象。

```
var mock = new Mock<IFoo>();
container.RegisterInstance<IFoo>(mock.Object); 
```

# android - 继承自两个父主题的 Android XML 主题？

> ID：12614707
> 
> 赞同：42
> 
> 时间：2012-09-27T05:34:53.420
> 
> 标签：android, xml, android-ui, android-theme

Android 风格和主题似乎总是让我头晕目眩。我想在不同版本的 Android 上为我的应用使用 Holo UI。所以我决定通过浏览源来提取必要的资源。

我遇到了以下内容，`android-15\data\res\values\themes.xml`我对“继承”的确切内容以及从何处感到困惑：

```
<style name="Theme.Holo.Light" parent="Theme.Light">
    ...
    ...
</style> 
```

[Android API 指南](http://developer.android.com/guide/topics/ui/themes.html)说：

> 如果您想继承您自己定义的样式，则不必使用该`parent`属性。相反，只需将要继承的样式名称添加到新样式名称的前面，并用句点分隔。

但是从上面的代码来看，似乎`Theme.Holo.Light`是继承自`Theme.Holo`和自`Theme.Light`.

这是如何工作的，或者我没有正确阅读什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-07T08:54:37.687

我也一直在想这个问题，所以我写了一个简单的测试应用程序来尝试一下。资源文件如下所示：

```
<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="android:Theme">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowContentOverlay">@null</item>
</style>

<style name="AppTheme.TestTheme" parent="android:Theme.Light">

</style> 
```

所以我将 AppTheme.TestTheme 应用于清单文件中的活动。AppTheme 使窗口全屏并且没有标题栏。Theme.Light 使窗口背景变亮而不是默认的暗。当`parent="android:Theme.Light"`指定属性时，窗口是白色的而不是全屏的——这意味着`parent="..."`属性优先于名称前缀，并且层次结构看起来是`TestTheme <- Theme.Light (light) <- Theme (dark)`.

移除 parent="android:Theme.Light" 后，屏幕为暗全屏，因此`TestTheme <- AppTheme (fullscreen) <- AppBaseTheme <- Theme (dark)`层次结构到位。

指定时`parent="..."`，删除前缀与否没有区别。所以`parent="..."`似乎绝对优先。AppTheme.TestTheme 不会同时从父母双方继承。

现在，查看默认的themes.xml，似乎Theme.Holo.Light 继承自Theme.Light，然后在其描述中手动指定了所有Holo 的东西。所以他们将其命名为 Theme.Holo.Light 并不是因为它继承自 Holo，而是因为他们想要一个将其描述为“Holo 的轻量版”的名称。而且因为他们想让 $@&! 令人困惑。

这是在 Gingerbread 2.3.3 上测试的。

# vim - 有人知道 BASIC（语言）的 VIM 配色方案吗

> ID：12614710
> 
> 赞同：-2
> 
> 时间：2012-09-27T05:35:11.903
> 
> 标签：vim, syntax, syntax-highlighting, basic

BASIC 我遇到了几千行 80 年代需要编辑的代码，并且想节省几个小时来滚动我自己的 VIM 语法 defs 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:05:16.837

Vim 7.3 附带了 nneonneo 引用的语法文件，并自动将`*.bas`文件检测为`filetype=basic`. 您可能只需升级到最新的 Vim 版本（或调整文件类型检测）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:37:19.253

VIM 现在附带`basic.vim`。这已在 2011 年更新。

[https://github.com/vim/vim/blob/d07969093a9b3051511c478d71c36de6fc33c0d6/runtime/syntax/basic.vim](https://github.com/vim/vim/blob/d07969093a9b3051511c478d71c36de6fc33c0d6/runtime/syntax/basic.vim)

# php - 在 codeigniter 框架中加载样式 css

> ID：12614711
> 
> 赞同：0
> 
> 时间：2012-09-27T05:35:23.207
> 
> 标签：php, codeigniter

> **可能重复：**
> [CodeIgniter - 加载 CSS](https://stackoverflow.com/questions/1060733/codeigniter-loading-css)

我尝试加载 css 文件，但它不起作用。这是链接标签：

```
<link rel="stylesheet" type="text/css" href="application/styles/style.css" /> 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:51:14.630

在应用程序文件夹之外创建一个文件夹，例如：resources/css/style.css 并将其链接如下。

那么文件夹结构会是这样的，

```
-application
-resources
-system
-index.php

<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>resources/css/styles/style.css" /> 
```

# php - PHP为产品创建自己的关键字并将其与搜索字段中输入的值匹配

> ID：12614712
> 
> 赞同：0
> 
> 时间：2012-09-27T05:35:23.037
> 
> 标签：php, html, forms

我正在为我的网站创建一个搜索字段。我有每个“产品”的关键字，如果输入的值与我的关键字匹配，我想定向到他们的 URL，否则将其重定向到另一个页面。

```
<form action="redirect.php" > 
<input id="search" name="search" type="text" value="Search Here" />
<input name="submit" type="button" value="Go" />
</form> 
```

我想要的功能：

```
<?php

if (isset($_GET['submit']));

$product1_keywords = "animal feeds, "weanrite, "Wean Rite;
$searchValue = $_POST['search'];

if ($search_fieldValue = $product1_keywords) {

header('Location: http://localhost/equalivet_2/#products/wean_rite.html');
}

else {

// Redirect page
header('Location: http://localhost/equalivet_2/not_found.html');
}

?> 
```

我必须建立一个数据库来预先定义我的关键字还是一个简单的 PHP 就可以了？

谁能帮我这个？

您的帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:41:16.460

在你的 html 中定义一个锚标记，你的 URL 应该指向锚的名称，即 yourpage.html#anchortagid

html

```
<div id="container" style="width:300px; height:300px">
    <a id="a1" name="a1"></a>
</div> 
```

php

而不是使用 go 尝试在最后使用锚进行重定向

```
products/product1.html#a1 
```

这将自动带您到 a1 锚点

# php - 在线托管时，提供的参数不是有效的 MySQL 结果资源错误

> ID：12614719
> 
> 赞同：0
> 
> 时间：2012-09-27T05:35:58.973
> 
> 标签：php, mysql

当我在 localhost 中运行以下代码时，它可以工作，但是当我在线托管它时，它会出错。

```
if(isset($_POST['congressman'])){
    $congressman = $_POST['congressman'];
    $no_of_votes = mysql_result(mysql_query("SELECT no_of_votes FROM `tbcandidates` WHERE `identification_no`=$congressman"),0) + 1;
    $query=mysql_query("UPDATE tbcandidates SET no_of_votes = '$no_of_votes' WHERE identification_no = $congressman"); 
```

这一行：

```
no_of_votes = mysql_result(mysql_query("SELECT no_of_votes FROM `tbcandidates` WHERE `identification_no`=$congressman"),0) + 1; 
```

它说 mysql_result(): 提供的参数不是有效的 MySQL 结果资源等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:39:41.217

尝试 `ob_start()`在代码顶部和`ob_flush()`末尾添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:46:29.463

标头已经发送只是意味着在您调用该标头（）指令之前已经有一个数据输出......

因此，您要询问它在 localhost 上运行而服务器拒绝运行它的原因：严格模式和错误处理 - 在您的 webhosts 服务器上，设置可能更严格，因此不会像在 localhost 上那样忽略错误

搜索标题之前的任何输出并将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:46:39.663

`head`您需要在函数之前找出输出。它可能是一些 html 内容，可能是 bom 头，或者可能是一些其他警告消息。

快速修复是将代码放在脚本的顶部。

```
<?php

if ($_POST['user']=="admin" && $_POST['pass']=="password"){
  header('Location: adminview.php');
  exit;
} 
```

# c# - 从 SharePoint Server 下载最新文件

> ID：12614721
> 
> 赞同：0
> 
> 时间：2012-09-27T05:36:14.487
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2007

我对sharepoint知之甚少。需要开始，如何访问共享点站点并下载特定文件夹中可用的最新文件。

我正在使用 ASP.Net/C#.Net 和 Visual Studio 2008 下载文件。

什么是要求意味着任何特定的库/更新/路径？

我怎样才能知道网络服务的路径？（我只知道直接网址）

是否可以访问文件的元数据。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T14:17:17.540

我在某个时候在网络搜索中找到了这个。这就是我最终使用的。

```
var remotefile = @"https://pathtoremotefile";
var localfile = @"C:\pathtolocalfile";
using(WebClient wc = new WebClient())
{
    wc.Credentials = CredentialCache.DefaultNetworkCredentials;
    // or new System.Net.NetworkCredential("user","pass","domain");
    wc.DownloadFile(remotefile,localfile);
} 
```

# php - 似乎无法编写有效的 .ics 文件？

> ID：12614722
> 
> 赞同：0
> 
> 时间：2012-09-27T05:36:22.607
> 
> 标签：php, icalendar, line-endings

我需要你的帮助。我正在编写`.ics`带有 php 函数的 iCal 文件格式。

如果我`.ics`用 iCal 打开文件，应用程序会说：“日历无法读取此日历文件。您的日历中没有添加任何活动。”

但是，如果我使用[在线 .ics 验证器](http://severinghaus.org/projects/icv/)验证文件，它会说一切都应该没问题，除了`line endings`. [验证器](http://severinghaus.org/projects/icv/)是这样说的：

> 您的日历使用了无效的换行格式。确保使用 \r\n 来结束行，而不仅仅是 \n (RFC 2445 §4.1)。恭喜；您的日历已验证！

但我不确定这是否是 iCal 无法读取文件的“真正”问题。首先，我想知道如何更改此行结尾？

```
<?php

function wpse63611_events_feed_output(){
    $filename = urlencode( 'My-Events-' . date('Y') . '.ics' );

    // Start collecting output
    ob_start();

    header( 'Content-Description: File Transfer' );
    header( 'Content-Disposition: attachment; filename=' . $filename );
    header( 'Content-type: text/calendar' );
    header( "Pragma: 0" );
    header( "Expires: 0" );
?>
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//<?php  get_bloginfo('name'); ?>//NONSGML Events //EN
CALSCALE:GREGORIAN
X-WR-CALNAME:<?php echo get_bloginfo('name');?> - Events
<?php
    if ( have_posts() ):
        $now = new DateTime();
        $datestamp =$now->format('Ymd\THis\Z');
        while( have_posts() ): the_post();
            global $post;
            $uid = md5(uniqid(mt_rand(), true))."@mydomain.com";
            $start = unixToiCal(get_event_date($post, true, true), 2.0);
            $end = unixToiCal(get_event_end_date($post, true, true), 2.0);
            $summary = wpse63611_esc_ical_text(get_the_title());
            $description = apply_filters('the_excerpt_rss',  get_the_content());
            $description = wpse63611_esc_ical_text($description); ?>
BEGIN:VEVENT
UID:<?php echo $uid; ?>
<?php echo "\r\n"; ?>
DTSTAMP:<?php echo $datestamp; ?>
<?php echo "\r\n"; ?>
DTSTART:<?php echo $start; ?>
<?php echo "\r\n"; ?>
DTEND:<?php echo $end; ?>
<?php echo "\r\n"; ?>
SUMMARY:<?php echo $summary; ?>
<?php echo "\r\n"; ?>
DESCRIPTION:<?php echo $description; ?>
<?php echo "\r\n"; ?>
END:VEVENT
<?php endwhile; endif; ?>
END:VCALENDAR
<?php
    // Collect output and echo 
    $eventsical = ob_get_contents();
    ob_end_clean();
    echo $eventsical;
    exit();
}

function unixToiCal( $uStamp = 0, $tzone = 0.0 ) {
    $uStampUTC = $uStamp + ($tzone * 3600);       
    $stamp  = date("Ymd\THis\Z", $uStampUTC);
    return $stamp;       
}

function wpse63611_esc_ical_text( $text='' ) {
    $text = str_replace("\\", "", $text);
    $text = str_replace("\r", "\r\n ", $text);
    $text = str_replace("\n", "\r\n ", $text);
    return $text;
}

?> 
```

你能看出这有什么问题吗？什么可能导致日历不起作用？

* * *

**更新** 好吧，我修复了行尾，现在日历验证正常。所以验证它时没有错误，但我仍然无法让它在 iCal 中工作。当我打开它时，它仍然说日历文件不可读。这是我的脚本生成的实际文件…… <a href="http://cl.ly/383D3M3q3P32" rel="nofollow">http://cl.ly/383D3M3q3P32

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:35:11.210

查看您的 ical 文件会带来 2 个主题：

1.  如上所述，您的*所有*行都需要以 \r\n 结尾（即您需要确保

> 开始：VCALENDAR
> 
> 版本：2.0
> 
> ..

也正确结束

2.您需要在文本中转义逗号（参见 RFC5545 §3.3.11：[https](https://www.rfc-editor.org/rfc/rfc5545#section-3.3.11) ://www.rfc-editor.org/rfc/rfc5545#section-3.3.11 ）

您也可以通过在线 icalendar 验证器运行它们，请参阅此帖子答案：[https ://stackoverflow.com/a/4812081/1167333](https://stackoverflow.com/a/4812081/1167333)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T14:00:09.530

您具有`wpse63611_esc_ical_text()`标准化输出的功能，但您仅将其应用于某些输出片段。有趣的是，这样的函数需要 Unix 风格的输入 ( `"\n"`)，但整个机制依赖于将源代码保存为 Windows 风格的 ( `"\r\n"`)。此外，您有时会在同一文本上调用该函数两次。

我相信根本问题是你真的不知道行尾是什么。当您敲击键盘上的`Enter`键时，您实际上会得到不同的字符，具体取决于您的计算机运行的是 Windows 还是某种 Unix（例如 Linux 或 MacOS）。在 Windows 上，您实际上会得到*两个*字符，`"\r\n"`用 PHP 表示。在 Unix 上，你会得到*一个*字符，`"\n"`用 PHP 表示。如果您的编辑器足够好，它将允许您以您选择的行结尾保存文件，无论您的计算机运行什么。检查“另存为”对话框以获取更多信息。

由于您实际上并未键入 ICS 文件，因此您需要确保 PHP 生成适当的字符。最简单的方法是根据需要键入并保存源代码，然后将*完整*的输出转换一次：

```
$output = strtr($output, array(
    "\r\n" => "\r\n",
    "\r" => "\r\n",
    "\n" => "\r\n",
)); 
```

您可能需要先清理代码。

# jquery - 如何为特定的 DIV 使用 blockUI？

> ID：12614724
> 
> 赞同：2
> 
> 时间：2012-09-27T05:36:40.170
> 
> 标签：jquery

如何为特定的 DIV 使用 blockUI 插件？而不是整页？ `$("div.test").blockUI();`不工作，其中 test 是一个类， div 是 DIV 标记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:39:39.603

[以下是使用jQuery BlockUI 插件](http://www.malsup.com/jquery/block/)（我假设您正在使用的）阻止/解除阻止元素的几个示例：

```
$('#blockButton').click(function() { 
    $('div.test').block({ message: null }); 
}); 

$('#blockButton2').click(function() { 
    $('div.test').block({ 
        message: '<h1>Processing</h1>', 
        css: { border: '3px solid #a00' } 
    }); 
}); 

$('#unblockButton').click(function() { 
    $('div.test').unblock(); 
}); 
```

来源：[元素阻塞](http://www.malsup.com/jquery/block/#element)

所以对于你的例子：

```
$("div.test").block({ message: 'Navi: Hey! Listen!' }); 
```

* * *

**编辑**

这是你想要做的吗？

> 如果您想使用默认设置并阻止所有 ajax 请求的 UI，就这么简单：

```
$(document).ajaxStart($.blockUI).ajaxStop($.unblockUI); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:00:47.423

```
$.blockUI({ message: $('div#info') }); 
setTimeout($.unblockUI, 2000); 
```

试试上面的代码。div#info 包含您要显示给用户的数据。它将出现 2 秒钟然后淡出。

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

# java - 使用对话框将结果集导出到 java 中的文本文件

> ID：12614733
> 
> 赞同：0
> 
> 时间：2012-09-27T05:37:40.853
> 
> 标签：java, export-to-text

我有一个结果集，我必须将结果集中的所有可用数据写入一个文本文件，并将其填充给用户以供下载。

我已经完成了以下代码以使用 poi 导出到 excel，与文本文件的操作方式相同。

```
if(exportTo.equals("excel"))
        {
            response.setContentType("application/vnd.ms-excel");
            response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".xls\"");
            try {
                HSSFWorkbook hwb = new HSSFWorkbook();
                HSSFSheet sheet = hwb.createSheet(reportName); 
                HSSFRow row = null;

                HSSFHeader header = sheet.getHeader();
                header.setCenter("POC");
                header.setLeft("POC");
                header.setRight(HSSFHeader.font("Stencil-Normal", "Italic") +
                                HSSFHeader.fontSize((short) 16) + reportName);

                //to add water mark
                /*HSSFPatriarch dp = sheet.createDrawingPatriarch();
                HSSFClientAnchor anchor = new HSSFClientAnchor
                    (0, 0, 1023, 255, (short) 2, 4, (short) 13, 26);
                HSSFTextbox txtbox = dp.createTextbox(anchor);
                HSSFRichTextString rtxt = new HSSFRichTextString("POC");
                HSSFFont draftFont = hwb.createFont();
                draftFont.setColor((short) 27);
                draftFont.setBoldweight(HSSFFont.BOLDWEIGHT_NORMAL);
                draftFont.setFontHeightInPoints((short) 192);
                draftFont.setFontName("Verdana");
                rtxt.applyFont(draftFont);
                txtbox.setString(rtxt);
                txtbox.setLineStyle(HSSFShape.LINESTYLE_NONE);
                txtbox.setNoFill(true);*/

                HSSFCellStyle style = hwb.createCellStyle();
                style.setBorderTop((short) 6); // double lines border
                style.setBorderBottom((short) 1); // single line border
                style.setFillBackgroundColor(HSSFColor.GREY_25_PERCENT.index);

                HSSFFont font = hwb.createFont();
                font.setBoldweight((short) 700);

                // Create Styles for sheet.
                HSSFCellStyle headerStyle = hwb.createCellStyle();
                headerStyle.setFillForegroundColor(HSSFColor.GREY_25_PERCENT.index);
                headerStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
                headerStyle.setFont(font);
                headerStyle.setBorderBottom(HSSFCellStyle.BORDER_THIN);
                headerStyle.setBorderTop(HSSFCellStyle.BORDER_THIN);
                headerStyle.setBorderRight(HSSFCellStyle.BORDER_THIN);
                headerStyle.setBorderLeft(HSSFCellStyle.BORDER_THIN);
                headerStyle.setAlignment((short) 2);

                // create Title for the sheet
                HSSFCellStyle titleStyle = hwb.createCellStyle();

                HSSFFont titleFont = hwb.createFont();
                titleFont.setFontName(HSSFFont.FONT_ARIAL);
                titleFont.setFontHeightInPoints((short) 15);
                titleFont.setBoldweight(HSSFFont.BOLDWEIGHT_BOLD);
                titleFont.setColor(HSSFColor.BLUE.index);
                titleStyle.setFont(titleFont);
                titleStyle.setAlignment((short)2);

                row = sheet.createRow((short)1);
                HSSFCell secondCell = row.createCell((short) 0);
                secondCell.setCellValue(new HSSFRichTextString(reportName).toString());
                secondCell.setCellStyle(titleStyle);    
                sheet.addMergedRegion(new Region(1, (short)0, 1, (short)headerCount));

                int sno=0;
                HSSFRow rowhead = sheet.createRow((short)4);
                for (Iterator it = headerMap.keySet().iterator(); it.hasNext();) {
                    String headerName = (String) headerMap.get(it.next());
                    HSSFCell headerCell = rowhead.createCell((short)sno);
                    headerCell.setCellStyle(headerStyle);
                    headerCell.setCellValue(headerName);
                    sno++;
                }

                HSSFCellStyle rowStyle=hwb.createCellStyle();
                rowStyle.setBorderBottom(HSSFCellStyle.BORDER_THIN);
                rowStyle.setBorderTop(HSSFCellStyle.BORDER_THIN);
                rowStyle.setBorderRight(HSSFCellStyle.BORDER_THIN);
                rowStyle.setBorderLeft(HSSFCellStyle.BORDER_THIN);
                rowStyle.setAlignment((short) 2);

                row = custDAO.creadExcelTable(query, sheet, row,rowStyle);
                hwb.write(response.getOutputStream());
                response.flushBuffer();

            } catch (Exception ex) {
                ex.printStackTrace();
            }

        }
public HSSFRow creadExcelTable(String query,HSSFSheet sheet,HSSFRow row,HSSFCellStyle rowStyle ){
        int numberOfColumns=0,sno=0,index=5,iterator=1;
        Connection connection = getConnection();
        if (connection != null) {
            try {
                PreparedStatement reportTablePS = connection.prepareStatement(query);
                ResultSet reportTable_rst = reportTablePS.executeQuery();
                ResultSetMetaData reportTable_rsmd = reportTable_rst.getMetaData();
                numberOfColumns = reportTable_rsmd.getColumnCount();
                int i =0;
                while (reportTable_rst.next()) {
                     row = sheet.createRow((short)index);
                     sheet.setColumnWidth((short)index, (short)100);

                    /* if(i == 0){
                         i = 1;
                         rowStyle.setFillForegroundColor(HSSFColor.BLUE_GREY.index);
                         rowStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
                         System.out.println("BLUE_GREY");
                     }
                    else {
                        i = 0;
                        System.out.println("LEMON");
                        rowStyle.setFillForegroundColor(HSSFColor.LEMON_CHIFFON.index);
                        rowStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
                    }*/

                     HSSFCell serialCell = row.createCell((short)sno);
                     serialCell.setCellStyle(rowStyle);
                     serialCell.setCellValue(iterator);

                            for (int columnIterator = 1; columnIterator <= numberOfColumns; columnIterator++) {
                                 String column = reportTable_rst.getString(columnIterator);
                                 sheet.setColumnWidth((short)columnIterator, (short)3000);
                                 HSSFCell rowCell = row.createCell((short)columnIterator);
                                 rowCell.setCellStyle(rowStyle);
                                 rowCell.setCellValue(column);
                            }
                            index++;
                            iterator++; 
            }
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    closeConnection(connection, null, null);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }
        return row;
    } 
```

现在我已经完成了这个，真的不知道该怎么做

```
 if(exportTo.equals("text")){
            response.setContentType("text/plain");
            response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".txt\"");
            try {

            } catch (Exception e) {
                // TODO: handle exception
            }

        } 
```

这个用于在指定位置创建文件

```
Writer writer = null;

try {
    String text = "This is a text file";

    File file = new File("write.txt");
    writer = new BufferedWriter(new FileWriter(file));
    writer.write(text);
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (writer != null) {
            writer.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

但我想用对话框导出文件，请帮助我如何去做。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:24:55.163

我想你没有得到一个对话框，因为你的浏览器可以自己处理文本文件。浏览器读取 http 响应的 MIME 类型（使用 设置`response.setContentType("text/plain");`） 大多数浏览器自己打开 html、图像和文本，并将其他文件类型（如音频、pdf 或 Office 文档）重定向到其他应用程序。因此，您可能需要调整浏览器设置。

# marklogic - Marklogic：搜索：建议短语

> ID：12614736
> 
> 赞同：0
> 
> 时间：2012-09-27T05:38:01.990
> 
> 标签：marklogic

我有以下 xml 结构：

```
<root>
<text>Hi i am a test user and doing testing here. Copied text Let’s suppose we have a text field where the user needs to enter the number of a person id. If the user types 1, all ids starting with 1 will show up. If the user types 12, all ids starting with 12 will show up.</text>
</root> 
```

现在我在“文本”元素上创建了字段，并在其上启用了字段词词典。执行以下查询：

```
xquery version "1.0-ml"; 
import module namespace search ="http://marklogic.com/appservices/search" at "/MarkLogic/appservices/search/search.xqy"; 
let $options := 
<search:options xmlns="http://marklogic.com/appservices/search">
 <default-suggestion-source>
    <word collation="http://marklogic.com/collation//S2">
      <field name="text"/>
    </word>
 </default-suggestion-source>
</search:options>
return
search:suggest("tes", $options, 100) 
```

结果，我得到了“test”和“tseting”作为建议，这绝对没问题，但我也想要更多的文本，就像上面的情况一样，我期待“测试用户和做……”和“在这里测试……”。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T22:06:01.617

要搜索部分短语，请使用不带右引号的左双引号（ 的语法值）。例如： search:suggest('"and th', $options) "and that" "and this" 结束双引号表示解析器该短语已完成，因此不会生成扩展建议。也与约束一起使用。

```
search:suggest('constraint:"and th', $options)</search:quotation> 
```

===== 来自[http://docs.marklogic.com/search:suggest](http://docs.marklogic.com/search:suggest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:56:01.473

单词词典存储单词标记，这就是为什么您会返回单个单词，而不是短语。对于短语内的匹配，您可以`<text>`对每个搜索建议条目使用范围索引，`concat('*',$term,'*')`以便您的 API 调用看起来像这样`search:suggest("*tes*", $options, 100)`。

但是，由于领先的通配符模式，我认为这会大大减慢您的查询速度，并且它还会返回元素的整个值，而不是从搜索词的位置开始，即：`Hi i am a test user and doing testing here. Copied text ...`not `test user and doing ...`。当然，您可以通过编程方式解析出来。

为了获得更好的性能，请考虑使用分块元素范围索引策略。它需要预处理和潜在的大量数据，具体取决于块源的大小，但它会达到您想要的结果并且非常快速和可扩展。Avalon 咨询公司有一篇[很棒的博客文章](http://blogs.avalonconsult.com/blog/search/auto-complete-in-marklogic-server/)详细描述了如何做到这一点。

# mysql - 将excel工作表导入mysql的批处理脚本

> ID：12614741
> 
> 赞同：1
> 
> 时间：2012-09-27T05:38:30.103
> 
> 标签：mysql, powershell

我是批处理脚本的新手。我想知道批处理脚本是否可以将excel表导入mysql？

如果可能的话，有人可以为我提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:20:38.617

您可以通过 Oledb 或 Excel COM 接口读取 Excel 文件。

看看这个[Scripting Guys 的文章](http://blogs.technet.com/b/heyscriptingguy/archive/2008/09/11/how-can-i-read-from-excel-without-using-excel.aspx)。Oledb 替代方案的简短复制和粘贴：

```
$strFileName = "C:\Data\scriptingGuys\Servers.xls"
$strSheetName = 'ServerList$'
$strProvider = "Provider=Microsoft.Jet.OLEDB.4.0"
$strDataSource = "Data Source = $strFileName"
$strExtend = "Extended Properties=Excel 8.0"
$strQuery = "Select * from [$strSheetName]"

$objConn = New-Object System.Data.OleDb.OleDbConnection("$strProvider;$strDataSource;$strExtend")
$sqlCommand = New-Object System.Data.OleDb.OleDbCommand($strQuery)
$sqlCommand.Connection = $objConn
$objConn.open()
$DataReader = $sqlCommand.ExecuteReader()

While($DataReader.read()) {
    # Insert data into MySql here
}  
$dataReader.close()
$objConn.close() 
```

如果你安装了 Mysql.Net 连接器，Powershell 可以[很容易地通过 .Net 连接到 MySql。](http://www.databasejournal.com/features/mysql/automate-mysql-queries-with-powershell.html)

# c# - 使用 WMI 时应该使用哪些库

> ID：12614742
> 
> 赞同：1
> 
> 时间：2012-09-27T05:38:31.813
> 
> 标签：c#, visual-studio-2008, wmi

我正在使用 Visual Studio 2008。使用`WMI`. 我已经导入了许多库，但它们不起作用

```
ConnectionOptions options = new ConnectionOptions(); 
```

我正在使用这些`Namespaces`：

```
using System.Management;
using System.Security; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:44:36.630

您可能还想添加对的引用`System.Management`。

请在此[MSDN](http://msdn.microsoft.com/en-us/library/system.management.connectionoptions%28v=vs.90%29.aspx)文章中找到更多信息：

有人遇到了类似的问题，并通过添加对`dll`.

# silverlight - 如何最小化数据网格中元素之间Margin的频繁使用？

> ID：12614744
> 
> 赞同：1
> 
> 时间：2012-09-27T05:38:42.727
> 
> 标签：silverlight, xaml, user-interface

在银光中：

我有一个数据网格，在第一行每个单元格中都有一个元素。我想为每个元素保留 (5,0,0,0) 的边距。我已将列的宽度设置为自动并分别指定每个元素的边距。

有没有办法在全局范围内指定边距（仅在 xaml 中不是代码后面），以便每个元素都分配给定的边距？（保持列宽自动）。

提前感谢您的回答！！

寻找这样的解决方案：

```
<Grid SetMarginForEachElement ="5,0,0,0"> 
     <element1/> 
     <element2/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:40:07.053

首先，您必须在视图中创建一个资源，如下所示：

```
 <UserControl.Resources>
    <Thickness x:Key="generalMargin"  Bottom="5" Left="5" Right="5" Top="5" />
</UserControl.Resources> 
```

在此之后，您只需要绑定它：

```
 <Grid x:Name="LayoutRoot" Background="White">
    <Image Height="150" HorizontalAlignment="Left"  Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="200" Margin="{Binding Source={StaticResource generalMargin}}" />
</Grid> 
```

只是它。希望能帮助到你

# java - 在Android中，当我们获取地理数据时，我们是否需要在SIM卡中获取互联网服务？

> ID：12614745
> 
> 赞同：0
> 
> 时间：2012-09-27T05:38:47.247
> 
> 标签：java, android

在 android 应用程序中，我有通过 GPS 或网络获取地理数据的代码。哪一个使地理数据能够通过它。如果我关闭 GPS，那么地理数据将通过网络获取。

为此，我们是否需要通过手机信号塔访问互联网才能通过网络获取地理数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:42:50.427

不过，您确实需要 Internet 连接才能使用 NETWORK_PROVIDER。如果没有 Internet 连接，您将无法获得最新的位置。

# apache - 将完整的 url 重定向到另一个 url

> ID：12614746
> 
> 赞同：0
> 
> 时间：2012-09-27T05:38:49.477
> 
> 标签：apache, .htaccess

实际上，我已将动态网址更改为静态网址。但奇怪的是我有一些动态的旧网址。其中 url 是`http://www.startonlinegames.com/download.php`. 我希望这个 url 重定向到`http://www.startonlinegames.com/download/?page=download`.. 为此，我在我的 htaccess 文件中添加了以下 htaccess 规则。

```
Redirect http://www.startonlinegames.com/download.php http://www.startonlinegames.com/download/?page=download 
```

但它不工作......任何人都可以建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:46:21.910

试试这个：让我知道它是否有效，否则会尝试另一个

```
Options +FollowSymlinks
RewriteEngine on
rewriterule ^download.php(.*)$ http://www.startonlinegames.com/download/?page=download$1 [r=301,nc] 
```

# android - 混合应用程序：尝试使用 ListView 显示 HTML 中的值

> ID：12614747
> 
> 赞同：1
> 
> 时间：2012-09-27T05:38:48.823
> 
> 标签：android, html, view, android-listview

我有一个需要将其部分转换为本机的 webApp。我有一个从 HTML 中获取的值列表，需要在 Android 中将其显示为 ListView。

知道如何实现吗？

# c++ - visual studio 2012 c++ hello world - iostream 不工作

> ID：12614753
> 
> 赞同：9
> 
> 时间：2012-09-27T05:39:30.617
> 
> 标签：c++, visual-studio, visual-c++

我对 Visual Studio 的 2012 版有疑问。我还在使用“Sams 每天一小时自学 C++，第 7 版”。

在使用 google 找到 C++ 的“最佳”编译器后，Visual Studios 似乎是首选工具。

所以我下载并安装了 Visual Studios 2012。本书的第一课是（并告诉我通过转到**File > New > Project >Visual C++ > Win32 > Console Application**将其作为控制台应用程序运行）

```
 #include <iostream>

int main()
{
 std::cout << “Hello World!” << std::endl;
 return 0;
} 
```

这根本不起作用。它输出类似于以下内容的错误消息：

> 1>c:\users\nik\documents\visual studio 2012\projects\consoleapplication4\consoleapplication4\consoleapplication4.cpp(8): error C2065: '“Hello' : undeclared identifier 1> 生成代码... ===== ===== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

（有更多与第一行类似的行，但它相当长）

但是，在 youtube 上搜索和观看视频后，以下代码有效（使用**File > New > Project >Visual C++ > General > Empty Project**）

```
#include <iostream>
#include "conio.h"

using namespace std;

int main() {
cout << "Hello Nik" << endl;
_getch();

return 0;
} 
```

Visual Studio 的 2012 有 C++ 编译器吗？还是它只有一个可视化 c++ 编译器（如果这甚至是问题，我认为可能的唯一原因是我可以看到 Visual C++ 的模板，但没有看到 c++ 本身的模板......）还是我需要下载 Visual Studio Express下载本机 C++ ??

任何帮助将不胜感激，因为我在这里感觉有些超出我的深度......

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T05:54:23.933

除了撇号**，您可能需要在项目属性中禁用预编译器头文件。**

它们在 VS2012 中默认开启。如果您不熟悉预编译头文件，请关闭它们。

1.  右键单击项目（不是解决方案）
2.  单击属性。
3.  展开“配置属性”
4.  展开“C/C++”
5.  选择“预编译头文件”
6.  将“预编译头”设置为“不使用预编译头”

[Wikipedia 上有关预编译头文件和 stdafx.h 文件的更多信息](http://en.wikipedia.org/wiki/Precompiled_header#stdafx.h)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T05:44:10.820

您使用的撇号是错误的：

```
“Hello World!” 
```

应该

```
"Hello World!" 
```

请注意 SO 如何识别差异。您至少应该键入您在书中看到的代码，而不是复制和粘贴它。;-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T05:54:29.477

Win32 控制台应用程序实际上与空项目有很大不同。Win32 利用您在循环中轮询的消息（输入）队列，您的程序分别利用 Win32 API 并执行某些操作。

除非您让它依赖于它，否则空项目对 Win32 或 Windows 在 API 方面提供的任何东西的依赖程度较低。这将是您空项目中的 simples hello world 应用程序：

```
#include <iostream>

using namespace std;

int main() 
{
    cout << "Hello World" << endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T05:56:05.437

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-08T13:11:06.600

为了解决您的错误，您必须删除 std:: 的 std::cout 和 std::endl，并使用命名空间 std; 在#include iostream 下方，并将“”更改为“”。

```
#include <iostream>
using namespace std;
int main() 
{
   cout <<"Hello World" << endl;
   return 0;
} 
```

在 Visual Studio 2012 中

```
 file>new projet>visual c++ (Project win32)>application settings(application console+Not Using Precompiled)>in right box in you Project (right click, add>new element>file c++). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-29T04:03:56.750

和...之间的不同

```
“Hello World!” and 
"Hello Nik" is the apostrophe. 
```

Aslo 是错误仍然存​​在，而不仅仅是检查 Visual C++ 库链接器。

也绝对不需要 conio.h

如果您要从书中复制，至少要正确复制。

```
Using namespace std; 
would be pretty smart in this case. 
```

# android - 在 android 中出现错误——方法 setImageResource(int) 是 Image View 的类型不适用于参数（字符串）

> ID：12614759
> 
> 赞同：0
> 
> 时间：2012-09-27T05:39:55.453
> 
> 标签：android, android-intent, android-emulator, android-listview

我正在尝试使用 listview 项将图像从一个活动传递到另一个活动，但我收到此错误行

> 方法 setImageResource(int)

是图像视图类型不适用于参数（字符串），并且在这一点上： -

> lblImage.setImageResource(图像);

我现在不知道需要写什么来消除此错误请有人支持我并编写适合此行的确切代码，在这里我还放置一些代码供您参考：

```
 SingleMenuItem(Activity to fetch Image with some text data)::

   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent

    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);
    String Image = in.getStringExtra(KEY_THUMB_URL);
    //Bitmap bitmap =(Bitmap) in.getParcelableExtra(KEY_THUMB_URL);

    // ImageView image = (ImageView)findViewById(R.id.thumb_url);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
    ImageView lblImage = (ImageView) findViewById(R.id.image_label);

    //image.setImageBitmap(bitmap); 

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);
    lblImage.setImageResource(Image); //Getting Error at this line only
    //the method setImageResource(int) is the type Image View is not
    // applicable for the argument(string)
    }
    }

    ActivityCode (to pass image and text data)
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
         // getting values from selected ListItem
            String title = ((TextView) view.findViewById
                            (R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById(
                             R.id.artist)).getText().toString();
            String duration = ((TextView) view.findViewById
                            (R.id.duration)).getText().toString();
                  // byte[] array = null;
              // Bitmap thumb_url = BitmapFactory.decodeByteArray
                            (array, 0, array.length);
            String Image=((ImageView)view.findViewById
                            (R.id.list_image)).getImageMatrix().toString();

            // Starting new intent
            Intent in = new Intent
                            (getApplicationContext(),  SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_DURATION, duration);
            in.putExtra(KEY_THUMB_URL, Image);
            //in.putExtra(KEY_THUMB_URL, thumb_url);
            startActivity(in);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:43:31.197

您将一个字符串传递给 setImageResource()，这需要一个整数。

资源 ID 实际上是整数 - 当您在代码中引用 R.drawable.myImage 时，这是指由编译器创建的自动生成代码 (R.java) 中的整数资源。

要从资源*字符串*加载图像（不推荐），请参阅[Android - Open resource from @drawable String](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:44:57.463

这将适用于图像 id 而不是图像字符串

如果您想在 imageview 中显示图像，请执行以下操作：

```
 lblImage.setImageResource(R.drawable.image); 
```

或者

根据您的要求，您必须从 imag 链接中获取 Drawable 。通过使用此代码，您可以获得可绘制的图像，然后设置为图像视图

```
public static Drawable LoadImageFromWebOperations(String url) {
   try {
      InputStream is = (InputStream) new URL(url).getContent();
      Drawable d = Drawable.createFromStream(is, "src name");
      return d;
   } catch (Exception e) {
      return null;
   }
} 
```

像这样调用此函数并将可绘制对象设置为图像视图。

```
Drawable image = LoadImageFromWebOperations(Image); // Image means iamge url getting                                     
                                                       from previous activity
imageview.setImageDrawable(image); 
```

# php - postgresql 位串与否？

> ID：12614761
> 
> 赞同：1
> 
> 时间：2012-09-27T05:40:05.180
> 
> 标签：php, c++, postgresql

我最近在摆弄位串数据类型。并对：

1.  > ...加上 5 或 8 个字节的开销，具体取决于[此文档页面底部的字符串长度](http://www.postgresql.org/docs/8.4/static/datatype-bit.html)

2.  它是如何通过驱动程序（Npgsql、ODBC 等）在其他语言（PHP、Java、C#、C++ 等）中处理的

对于 #1，似乎使用 integer(smallint/bigint) 将大大提高存储效率，或者甚至可能提高性能，因为到处都支持整数。用整数执行位运算在编程语言中很少有任何问题。那么引入数据类型有什么意义呢？仅适用于需要大量位掩码的情况？位字段索引可能吗？我对 Pg 中的位字段索引是如何完成的更好奇。

对于＃2，我很困惑，不仅仅是好奇。比如说，一个简单的例子，如果我将工作日位掩码存储在 bit(7) 字段中，一天一个位，最低为星期一。然后我查询 PHP 和 C++ 中的值。我会得到什么？通过文件，它说我会有一些字符串。但是位串不是我可以直接使用的东西——就像整数一样。那么在这种情况下，我应该放弃位域吗？

谁能详细说明为什么/何时应该使用位或位变化？

[编辑]---------------- [我在这里找到了一个相关的帖子](https://dba.stackexchange.com/questions/25073/should-i-use-the-postgresql-bit-string#comment42689_25073)

但是，我的头脑还没有清醒。正如在上面的帖子（及其评论）中所说，我清楚地了解 bit(n) 和 bit varying 的用途。但我想知道他们在编程语言中的地位如何。说，据我所知，这两种数据类型在 PHP 中表示为字符串。这是我所期望的最少的。

谁能给出一个最好使用这种列的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:04:42.363

看看[Igorw 的博客](https://igor.io/2012/09/24/binary-parsing.html)。本文介绍 PHP 中笨拙的二进制字符串机制。我也在寻找一种在 PHP for Pomm 中表示 bitvar postgres 数据类型的好方法，但我没有绝对的答案。

# sql - teradata：计算 2 个时间间隔之间的差异

> ID：12614766
> 
> 赞同：0
> 
> 时间：2012-09-27T05:40:45.517
> 
> 标签：sql, stored-procedures, teradata

我想计算 2 个时间间隔之间的时间差，如代码所示

```
replace procedure database.table()               
begin  
declare v_StartTime Timestamp;  
decalre v_EndTime Timestamp;        
decalre v_TimeTaken Varchar(20);         

set v_StartTime = current_timestamp;       
/* set of queries...........          
...................                
.....................             

*/       
set v_EndTime =current_timestamp;

set v_timeTaken = v_EndTime - v_StartTime ;

/* I want the time difference in secs or mins*/

End; 
```

有没有其他更好的方法来获得以分钟或秒为单位的时间间隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:55:38.977

这应该以秒为单位获得您的经过时间。

```
set v_TimeTaken = 
   (EXTRACT(DAY    FROM (v_EndTime - v_StartTime DAY(4) TO SECOND)) * 86400)
 + (EXTRACT(HOUR   FROM (v_EndTime - v_StartTime DAY(4) TO SECOND)) * 3600)
 + (EXTRACT(MINUTE FROM (v_EndTime - v_StartTime DAY(4) TO SECOND)) * 60)
 +  EXTRACT(SECOND FROM (v_EndTime - v_StartTime DAY(4) TO SECOND)) 
```

Teradata 中的时间戳算术始终是我必须查找的内容。这不是我经常做的事情，它不像甲骨文的方法那样直观。

# google-apps-script - Google CDN 不会从 Google 站点“插入 html 框”加载/提供 Jquery-ui 库

> ID：12614768
> 
> 赞同：1
> 
> 时间：2012-09-27T05:40:49.900
> 
> 标签：google-apps-script

在过去的 3 个月里，我一直在努力使用 Google 网站“插入 html 框”来让 CDN 为 Jquery 用户界面库-jqueryui-提供服务，但没有任何成功。

我使用了以下代码及其变体，没有任何主题，但无济于事；

jquery 库加载正常，但 jqueryui 库加载不正常。谷歌开发者网站建议这应该可行，但我只收到这些错误消息 - 无法将外部 url jquery-ui.css 或折叠元素主体加载到父级中

我究竟做错了什么？？在这里感到沮丧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:25:56.930

显然这是一个已知的错误。看看[这里的答案](https://stackoverflow.com/questions/12615179/jquery-ui-library-not-loaded-served-by-google-cdn-from-the-google-site-insert-h)

有一个指向实际问题的错误链接和可能的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T22:45:04.270

根据[关于 jQuery 并不总是在 HTML 框中工作的提示](http://n8henrie.com/2014/08/versions-of-jquery-that-work-on-google-sites-html-box/)，我进行了实验，发现*某些*版本的 jQuery UI 会加载！

截至今天，我能够加载以下版本：

1.8.21、1.8.20、1.8.18

或者，使用指向 Googleapis 的直接链接：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.20/jquery-ui.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script> 
```

[https://developers.google.com/speed/libraries/](https://developers.google.com/speed/libraries/)上提到的所有其他版本都不会加载。

话虽如此，我在尝试链接到 CSS 主题时遇到了更多麻烦。我找不到任何方法让 HTML 框接受`googleapis`托管 jQuery UI CSS 文件的链接。

我尝试将 CSS 直接粘贴到 HTML 框中，但`url()`图像的链接不符合犹太教规。将它们注释掉导致我让 HTML 框编辑器处于平静状态，但尝试使[选项卡式窗格](https://jqueryui.com/tabs/)工作并没有成功。

说可以在 Google 站点中使用 jQuery 几乎是夸大其词。

# finagle - Finagle 红隼集群如何工作

> ID：12614769
> 
> 赞同：1
> 
> 时间：2012-09-27T05:40:49.993
> 
> 标签：finagle, kestrel

它说我们可以使用 finagle ServerSet 和 Zookeeper 来创建一个集群。

1.  我应该使用 finagle 服务器构建器来启动 kestrel 集群吗？或者集群可以仅使用 finagle 客户端构建。
2.  在集群中分配队列的算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:03:45.183

1 我们需要使用 kestrel 作为库，而不是运行原来的 kestrel。基于 finagle 库的代码红隼服务器。

我们可以在客户端使用 ServerSet 来引用在 ZooKeeper 注册的 kestrel 集群。

[https://github.com/robey/kestrel/blob/master/docs/guide.md](https://github.com/robey/kestrel/blob/master/docs/guide.md)

在 kestrel 服务器端，如果指定了 KestrelConfig 的可选 zookeeper 字段，kestrel 将尝试使用给定的配置来加入一组逻辑的 kestrel 服务器。ZooKeeper 主机、端口和其他连接选项记录在这里：ZooKeeperBuilder

Kestrel 服务器将根据其当前状态加入 0、1 或 2 个服务器集

2 消息发送者将把消息发送到一个随机挑选的 kestrel 服务器。消息接收器将监听所有 kestrel 服务器，并在任何 kestrel 服务器收到消息时得到通知。所以同一个队列分布在所有服务器上，没有算法。

# git - 在 jenkins 中配置 git 存储库

> ID：12614771
> 
> 赞同：7
> 
> 时间：2012-09-27T05:41:13.363
> 
> 标签：git, plugins, jenkins

我正在尝试配置存储库： [https ://github.com/javpaw/game-of-life](https://github.com/javpaw/game-of-life)

使用git插件进入jenkins工作，但是当我输入存储库的地址时：git@github.com:javpaw/game-of-life.git

源代码管理 -> git -> 存储库 URL 我收到此错误：

> 无法连接到存储库：命令“/usr/bin/git ls-remote -h git@github.com:javpaw/game-of-life.git HEAD”返回状态码 128：stdout：stderr：未指定协议 未指定协议指定的
> 
> （ssh-askpass:18881）：Gtk-WARNING **：无法打开显示：：0.0 主机密钥验证失败。致命：远端意外挂断

我在 github 上发现了这个问题：[Why Git failed to connect to local repository with Jenkins (bad config file)?](https://stackoverflow.com/questions/12490981/why-git-fail-to-connect-to-local-repository-with-jenkins-bad-config-file)

但没用，因为我使用的是 Ubuntu 12.04

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T07:15:16.857

尝试使用完整的 url，使用 https 而不是 ssh：

```
https://github.com/javpaw/game-of-life 
```

也可以试试只读地址：

```
git://github.com/javpaw/game-of-life.git 
```

但在这两种情况下，重要的部分是您指定协议（`https://`或`git://`）

# mvvm - 在 Prism 中使用 Silverlight 实现 MVVM 的正确方法最好使用 MEF

> ID：12614777
> 
> 赞同：0
> 
> 时间：2012-09-27T05:41:54.483
> 
> 标签：mvvm, prism, silverlight-5.0

如果我想使用 MEF 在 Prism(Silverlight) 中创建 MVVM 应用程序，有人可以指导我应该如何设计（我不确定如何使用 MEF 导入或导出 ViewModel）。

我看到很少有文章使用 DataContext（在 XAML 或 View 的代码隐藏中）将 ViewModel 与 View 绑定。

我看到很少有人拥有 IView 和 IViewModel 接口，并且两者都拥有彼此的引用变量。

在某些地方，指南说 ViewModel 永远不应该指代 View。

如果有人可以提供我的代码片段，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:58:10.847

您是否阅读过[Prism 文档](http://msdn.microsoft.com/en-us/library/gg406140.aspx)？他们有一个关于[实现 MVVM 模式](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx)的部分，讨论了连接视图模型和视图的不同技术。

您还可以使用诸如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)之类的 MVVM 框架实现复合应用程序，该框架使用视图模型/视图绑定的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:07:47.127

我会在后面的代码中使用 setter 注入来绑定 DataContext。视图和视图模型都是由 MEF 创建的。

```
[Import]
private MyViewModelClass ViewModel
{
    get { return this.DataContext as MyViewModelClass; }
    set { this.DataContext = value; }
} 
```

# html - 使用 Ruby on Rails 捕获加载的音频标签源

> ID：12614778
> 
> 赞同：2
> 
> 时间：2012-09-27T05:41:59.103
> 
> 标签：html, ruby-on-rails, ruby

我需要保存当前加载的音频标签源文件。听起来很简单，但这里有一个问题：源在每个请求中都会提供一个随机声音文件。

音频标签被创建，源集和使用 JavaScript 播放的音频，如下所示：

```
function createAudio() {
    var audio = document.createElement('audio');

    audio.setAttribute('id', 'file_audio')
    audio.setAttribute('controls', 'controls');
    audio.setAttribute('autoplay', 'true');
    audio.setAttribute('hidden', 'true');
    audio.appendChild(createSource());
    return audio;
}

function createSource() {
    var source = document.createElement('source');
    var d = new Date();
    source.setAttribute('id', 'file_audio_source')
    source.setAttribute('src', 'file.wav?r=' + d.getTime());
    source.setAttribute('type', 'audio/wav');
    return source;
}

this.switchAudio = function() {
    var d = new Date();
    $svjq("#file_audio").find('audio').remove();
    $svjq("#file_audio").find('source').remove();
    $svjq("#file_audio").find('embed').remove();
    if (Modernizr.audio.wav) {
        document.getElementById("file_audio").appendChild(createAudio());
    } else {
        $svjq("#file_audio").append('<embed id="file_audio_embed" name="file_audio_embed" src="file.wav?r=' + d.getTime() + '" autostart="true" cache="false" type="audio/wav" hidden="true" loop="false" enablejavascript="true">');
    }

};

this.playAgain = function() {
    if (Modernizr.audio.wav) {
        document.getElementById('file_audio').play();
    } else {
        document.getElementById('file_audio_embed').play();
    }
}; 
```

我需要能够将当前加载的文件保存在源代码中。但是，如果您在浏览器中访问文件 URL，它会返回一个不同的文件。

Watir-WebDriver、Capybara (Capybara-Webkit) 和 Mechanize 等自动化进程也会返回一个随机文件。例如：

```
require 'capybara'
session = Capybara::Session.new(:selenium)
session.visit('url')
session.click_link 'play sound' #on every click u get a new sound
session.click_link 'play again'

#file_audio_source
e = session.find_by_id('file_audio_source')
e[:src]

#save the current open page and opens it
#session.save_and_open_page

#returns different file
session.visit(e[:src])

#returns different file
session.execute_script("window.open('"+e[:src]+"')")

require 'Mechanize' 
agent = Mechanize.new{|agent| agent.ssl_version, agent.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}

filedata = agent.get(e[:src]).content
aFile = File.new("/Users/me/Documents/test/test111.wav", 'wb')
#aFile.syswrite(filedata) 
```

该文件是否可以嵌入到 HTML 中或缓存？有没有办法获取文件并将其保存在本地？

其他选项包括从声音设备录制或使用麦克风录制播放的声音，尽管此选项并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:31:06.310

选项 1：

```
require 'capybara'
session = Capybara::Session.new(:selenium)
session.visit('url')
session.click_link 'Play sound'#this gets the file into the cache, then use the codes to get in out 
```

选项 2

```
#execute the javascript that loads the file/creates the sound url. no playing of the sound
session.execute_script("document.getElementById('file_audio').appendChild(createSource());")
e = session.find_by_id("file_audio_source")
session.visit(e[:src]) 
```

Watir 和 Capybara 表现出色！:) 但现在的问题是让它无头，似乎无头浏览器的行为与非无头浏览器不同？

> 一种提供无头功能的方法

```
def headless_get_file url
  require 'uri'
  res = @session.driver.cookies
  agent = Mechanize.new {|agent| agent.ssl_version, agent.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}

  uri = URI('https://....')
  res.keys.each do |i|
    temp = res[i]        
    cookie = Mechanize::Cookie.new(i, temp.value)
    cookie.domain = temp.domain
    cookie.path = temp.path
    agent.cookie_jar.add(uri,cookie)        
  end

  filedata = agent.get(url).content
  aFile = File.new("#{dir}/file.wav", 'wb')
  aFile.syswrite(filedata)
end 
```

> 该文件是否可以嵌入到 html 中或缓存？

是的，它可以 ！[是否可以在视频和音频标签中使用数据 URI？](https://stackoverflow.com/questions/2270151/is-it-possible-to-use-data-uris-in-video-and-audio-tags)

```
<audio controls="controls" autobuffer="autobuffer" autoplay="autoplay">
  <source src="data:audio/wav;base64,UklGRhwMAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0Ya4LAACAgICAgICAgICAgICAgICAgICAgICAgICAf3hxeH+AfXZ1eHx6dnR5fYGFgoOKi42aloubq6GOjI2Op7ythXJ0eYF5aV1AOFFib32HmZSHhpCalIiYi4SRkZaLfnhxaWptb21qaWBea2BRYmZTVmFgWFNXVVVhaGdbYGhZbXh1gXZ1goeIlot1k6yxtKaOkaWhq7KonKCZoaCjoKWuqqmurK6ztrO7tbTAvru/vb68vbW6vLGqsLOfm5yal5KKhoyBeHt2dXBnbmljVlJWUEBBPDw9Mi4zKRwhIBYaGRQcHBURGB0XFxwhGxocJSstMjg6PTc6PUxVV1lWV2JqaXN0coCHhIyPjpOenqWppK6xu72yxMu9us7Pw83Wy9nY29ve6OPr6uvs6ezu6ejk6erm3uPj3dbT1sjBzdDFuMHAt7m1r7W6qaCupJOTkpWPgHqAd3JrbGlnY1peX1hTUk9PTFRKR0RFQkRBRUVEQkdBPjs9Pzo6NT04Njs+PTxAPzo/Ojk6PEA5PUJAQD04PkRCREZLUk1KT1BRUVdXU1VRV1tZV1xgXltcXF9hXl9eY2VmZmlna3J0b3F3eHyBfX+JgIWJiouTlZCTmpybnqSgnqyrqrO3srK2uL2/u7jAwMLFxsfEv8XLzcrIy83JzcrP0s3M0dTP0drY1dPR1dzc19za19XX2dnU1NjU0dXPzdHQy8rMysfGxMLBvLu3ta+sraeioJ2YlI+MioeFfX55cnJsaWVjXVlbVE5RTktHRUVAPDw3NC8uLyknKSIiJiUdHiEeGx4eHRwZHB8cHiAfHh8eHSEhISMoJyMnKisrLCszNy8yOTg9QEJFRUVITVFOTlJVWltaXmNfX2ZqZ21xb3R3eHqAhoeJkZKTlZmhpJ6kqKeur6yxtLW1trW4t6+us7axrbK2tLa6ury7u7u9u7vCwb+/vr7Ev7y9v8G8vby6vru4uLq+tri8ubi5t7W4uLW5uLKxs7G0tLGwt7Wvs7avr7O0tLW4trS4uLO1trW1trm1tLm0r7Kyr66wramsqaKlp52bmpeWl5KQkImEhIB8fXh3eHJrbW5mYGNcWFhUUE1LRENDQUI9ODcxLy8vMCsqLCgoKCgpKScoKCYoKygpKyssLi0sLi0uMDIwMTIuLzQ0Njg4Njc8ODlBQ0A/RUdGSU5RUVFUV1pdXWFjZGdpbG1vcXJ2eXh6fICAgIWIio2OkJGSlJWanJqbnZ2cn6Kkp6enq62srbCysrO1uLy4uL+/vL7CwMHAvb/Cvbq9vLm5uba2t7Sysq+urqyqqaalpqShoJ+enZuamZqXlZWTkpGSkpCNjpCMioqLioiHhoeGhYSGg4GDhoKDg4GBg4GBgoGBgoOChISChISChIWDg4WEgoSEgYODgYGCgYGAgICAgX99f398fX18e3p6e3t7enp7fHx4e3x6e3x7fHx9fX59fn1+fX19fH19fnx9fn19fX18fHx7fHx6fH18fXx8fHx7fH1+fXx+f319fn19fn1+gH9+f4B/fn+AgICAgH+AgICAgIGAgICAgH9+f4B+f35+fn58e3t8e3p5eXh4d3Z1dHRzcXBvb21sbmxqaWhlZmVjYmFfX2BfXV1cXFxaWVlaWVlYV1hYV1hYWVhZWFlaWllbXFpbXV5fX15fYWJhYmNiYWJhYWJjZGVmZ2hqbG1ub3Fxc3V3dnd6e3t8e3x+f3+AgICAgoGBgoKDhISFh4aHiYqKi4uMjYyOj4+QkZKUlZWXmJmbm52enqCioqSlpqeoqaqrrK2ur7CxsrGys7O0tbW2tba3t7i3uLe4t7a3t7i3tre2tba1tLSzsrKysbCvrq2sq6qop6alo6OioJ+dnJqZmJeWlJKSkI+OjoyLioiIh4WEg4GBgH9+fXt6eXh3d3V0c3JxcG9ubWxsamppaWhnZmVlZGRjYmNiYWBhYGBfYF9fXl5fXl1dXVxdXF1dXF1cXF1cXF1dXV5dXV5fXl9eX19gYGFgYWJhYmFiY2NiY2RjZGNkZWRlZGVmZmVmZmVmZ2dmZ2hnaGhnaGloZ2hpaWhpamlqaWpqa2pra2xtbGxtbm1ubm5vcG9wcXBxcnFycnN0c3N0dXV2d3d4eHh5ent6e3x9fn5/f4CAgIGCg4SEhYaGh4iIiYqLi4uMjY2Oj5CQkZGSk5OUlJWWlpeYl5iZmZqbm5ybnJ2cnZ6en56fn6ChoKChoqGio6KjpKOko6SjpKWkpaSkpKSlpKWkpaSlpKSlpKOkpKOko6KioaKhoaCfoJ+enp2dnJybmpmZmJeXlpWUk5STkZGQj4+OjYyLioqJh4eGhYSEgoKBgIB/fn59fHt7enl5eHd3dnZ1dHRzc3JycXBxcG9vbm5tbWxrbGxraWppaWhpaGdnZ2dmZ2ZlZmVmZWRlZGVkY2RjZGNkZGRkZGRkZGRkZGRjZGRkY2RjZGNkZWRlZGVmZWZmZ2ZnZ2doaWhpaWpra2xsbW5tbm9ub29wcXFycnNzdHV1dXZ2d3d4eXl6enp7fHx9fX5+f4CAgIGAgYGCgoOEhISFhoWGhoeIh4iJiImKiYqLiouLjI2MjI2OjY6Pj46PkI+QkZCRkJGQkZGSkZKRkpGSkZGRkZKRkpKRkpGSkZKRkpGSkZKRkpGSkZCRkZCRkI+Qj5CPkI+Pjo+OjY6Njo2MjYyLjIuMi4qLioqJiomJiImIh4iHh4aHhoaFhoWFhIWEg4SDg4KDgoKBgoGAgYCBgICAgICAf4CAf39+f35/fn1+fX59fHx9fH18e3x7fHt6e3p7ent6e3p5enl6enl6eXp5eXl4eXh5eHl4eXh5eHl4eXh5eHh3eHh4d3h4d3h3d3h4d3l4eHd4d3h3eHd4d3h3eHh4eXh5eHl4eHl4eXh5enl6eXp5enl6eXp5ent6ent6e3x7fHx9fH18fX19fn1+fX5/fn9+f4B/gH+Af4CAgICAgIGAgYCBgoGCgYKCgoKDgoOEg4OEg4SFhIWEhYSFhoWGhYaHhoeHhoeGh4iHiIiHiImIiImKiYqJiYqJiouKi4qLiouKi4qLiouKi4qLiouKi4qLi4qLiouKi4qLiomJiomIiYiJiImIh4iIh4iHhoeGhYWGhYaFhIWEg4OEg4KDgoOCgYKBgIGAgICAgH+Af39+f359fn18fX19fHx8e3t6e3p7enl6eXp5enl6enl5eXh5eHh5eHl4eXh5eHl4eHd5eHd3eHl4d3h3eHd4d3h3eHh4d3h4d3h3d3h5eHl4eXh5eHl5eXp5enl6eXp7ent6e3p7e3t7fHt8e3x8fHx9fH1+fX59fn9+f35/gH+AgICAgICAgYGAgYKBgoGCgoKDgoOEg4SEhIWFhIWFhoWGhYaGhoaHhoeGh4aHhoeIh4iHiIeHiIeIh4iHiIeIiIiHiIeIh4iHiIiHiIeIh4iHiIeIh4eIh4eIh4aHh4aHhoeGh4aHhoWGhYaFhoWFhIWEhYSFhIWEhISDhIOEg4OCg4OCg4KDgYKCgYKCgYCBgIGAgYCBgICAgICAgICAf4B/f4B/gH+Af35/fn9+f35/fn1+fn19fn1+fX59fn19fX19fH18fXx9fH18fXx9fH18fXx8fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x7fHt8e3x8e3x7fHt8e3x7fHx8fXx9fH18fX5+fX59fn9+f35+f35/gH+Af4B/gICAgICAgICAgICAgYCBgIGAgIGAgYGBgoGCgYKBgoGCgYKBgoGCgoKDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KDgoOCg4KCgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGCgYKBgoGBgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCAgICBgIGAgYCBgIGAgYCBgIGAgYCBgExJU1RCAAAASU5GT0lDUkQMAAAAMjAwOC0wOS0yMQAASUVORwMAAAAgAAABSVNGVBYAAABTb255IFNvdW5kIEZvcmdlIDguMAAA" />
</audio> 
```

> 有没有办法获取并保存在本地？

是的你可以 ！你只需要找到缓存目录:)

[http://www.digitalmediaminute.com/article/626/viewing-browser-cache-in-firefox](http://www.digitalmediaminute.com/article/626/viewing-browser-cache-in-firefox)

然后正确的一点代码去获取它这个代码与 opt.1 而不是 opt.2 一起使用

```
def getlatestdir(newdirs)
times = Array.new
newdirs.each_with_index do |newdir,index|
  times[index] = File::mtime(newdir)
end
temp = times[0]
count = 0
times.each_with_index do |time,index|
  if temp < time
    temp = time
    count = index
  end
end
return newdirs[count] 
end

def getCacheDir
#how to get the path
#in irb enter
#require 'capybara'
#session = Capybara::Session.new(:selenium)
#session.visit('https://www.google.co.za')
#--- then open a new tab and enter about:cache
#copy the disk cache device cache directory ( from /var/... to .../T/ )
path = '/var/folders/9x/51cvmc215xx6zy9vd_64sxwc0000gn/T/'
dirs = Dir.glob(path +'*/')
newdirs = Array.new
dirs.each_with_index do |dir,index|
  if(dir.include? 'webdriver-profile')
    newdirs[newdirs.length] = dir
  end
end
the_cache_dir = getlatestdir(newdirs) + 'Cache'
return the_cache_dir
end

def saveFile
rifffile = ''
count = 0
the_cache_dir = getCacheDir
files = Dir.glob(the_cache_dir + '/*/*/*')
files.each_with_index do |file,index|
  bytes = open(file, 'rb'){|io|io.read}
  str = bytes[0].to_s + bytes[1].to_s + bytes[2].to_s + bytes[3].to_s
  if(str == 'RIFF')
    count = index
    rifffile = file
    break
  end
end
puts rifffile
filename = 'test123.wav'
#read file bytes
bytes = File.open(rifffile, 'rb'){|io|io.read}
#write file to the directory
f = File.new(filename, 'wb')
f.syswrite(bytes)
return filename
end 
```

授予上述代码不是最大或最快的，但它完成了工作

> 其他选项包括从声音设备录制，或使用麦克风录制播放的声音

那将花费太长时间和太多的努力：P

总而言之，opt.1 还可以，但不是很好，opt.2 好得多 :)

ajt

# python - Django：计算平均值，并按子模型中的字段排序

> ID：12614779
> 
> 赞同：4
> 
> 时间：2012-09-27T05:42:21.793
> 
> 标签：python, django, average

我有一个 Product 模型，与 Rating 模型具有一对多的关系。我之前在 Product 模型中存储了一个 average_stars 字段，每次为该 Product 模型添加新的 Rating 时我都会更新该字段。我将在views.py 中有一个函数，它将返回所有产品实例的查询集，按average_star 排序。有没有办法使用 .aggregate 和 .order_by 的组合或任何类似的方法来更动态地执行此操作。

换句话说，有没有办法从每个产品的所有各自的评级模型中计算平均值，并按该属性对它们进行排序？哪种方法更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:17:28.930

假设您的`Rating`模型有一个`stars`字段，那么您应该使用[`annotate`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#annotate)：

```
from django.db.models import Avg
Product.objects.annotate(average_stars = Avg('rating__stars')).order_by('-average_stars') 
```

# file - Fortran g77 编译器无法识别或注释“c”

> ID：12614781
> 
> 赞同：0
> 
> 时间：2012-09-27T05:42:33.627
> 
> 标签：file, comments, fortran

我正在使用 Fortran g77 并遇到了这个问题：

```
c this program calculates runoff and sediment
  1 2
 Unrecognized statement name at (1) and invalid form for assignment or statement-function definition at (2) 
```

此外，编译器只能识别`.for`文件扩展名，而不是`.f`.

有谁知道，问题出在哪里？我从[http://www.cse.yorku.ca/~roumani/fortran/ftn.htm](http://www.cse.yorku.ca/~roumani/fortran/ftn.htm)下载了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:00:44.307

我假设你想坚持使用这个编译器。

如上所述，*您使用 F2EXE 批处理文件时遇到的问题*，它不是很有用：首先它会自动在文件名中添加“.for”，因此您无法编译“.f”文件，并且它假设自由格式的语法，这在 Fortran 77 编程时是不常见的（如果你想要 Fortran 90，找到另一个编译器，其他答案会给你链接）。

* * *

现在，假设您编写了一个程序 myprogram.f，并且您在 Windows 命令行中，在程序所在的同一目录中（例如，使用“cd C:\mydirectory”来更改）

你将编译

```
g77 myprogram.f 
```

如果您使用 SLATEC，您使用

```
g77 myprogram.f -lslatec 
```

如果要为 .exe 文件指定名称（默认为 a.exe），请编写

```
g77 myprogram.f -o myprogram.exe 
```

还有其他有用的选项

```
g77 -O2 myprogram.f     to optimize (within g77 2.95 limitations)
g77 -Wall myprogram.f   to enable all compiler warnings, very useful
                          to find errors in your code
g77 -c myprogram.f      to only compile (you get a .o file), this is
                          useful to compile functions and subroutines, to
                          later build a static library (.a file), like
                          libslatec.a which is given with the compiler 
```

并使用 ar.exe 构建一个库：

```
ar cru mylib.a myfunc1.o myfnuc2.o ... 
```

然后你可以使用 is with

```
g77 myprogram.f mylib.a 
```

G77 在 Windows 下以命令行方式运行。您在文本编辑器中编写程序。Notepad++ 相当不错而且它是免费的。见[http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)

如果您在编译时遇到问题，可能来自环境变量，所以这里有一些精度。您必须告诉 Windows 在哪里可以找到 G77 编译器 (g77.exe)。

您可以按照下载它的站点上的说明更改 Windows 的环境变量 PATH 和 LIBRARY_PATH。它需要您将编译器安装在 C:\F 目录中：也就是说，您将拥有 C:\F\G77\bin 等。

对该页面上的说明稍作修改：

*   您应该将**PATH**设置为**C:\F\G77\bin**
*   和**LIBRARY_PATH**到**C:\F\G77\lib;C:\F\SLATEC\lib**

对 LIBRARY_PATH 的这种修改允许您使用 SLATEC 简单地使用上面的“-lslatec”进行编译。

* * *

关于编译器的说明。它是 G77，也称为*GNU Fortran 77*。一个旧的编译器，在 GCC 3.4.6 之前与众所周知的 GCC 套件集成（我们现在是 GCC 4.7.2）。您下载的编译器适用于 GCC 2.95 版本。

它是一个很好的 Fortran 77 编译器，但优化得不是很好，当然，您不会获得对英特尔 SSE 等新处理器特性的任何支持。

现代 Fortran 编译器仍然可以理解大部分（如果不是全部） Fortran 77，以及 Fortran 90 和更新标准的所有新功能，这些功能非常有用。

知道还有另一个地方可以下载相同的编译器（除了没有 SLATEC）也可能很有趣，以防页面被破坏： [http://www.mbr-pwrc.usgs.gov/software/g77。 html](http://www.mbr-pwrc.usgs.gov/software/g77.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:57:38.340

您链接到的页面表明`f2exe`包装器传递`-ffree-form`给编译器：

> 编译命令
> 
> 上面的`f2exe`命令只是一个调用`g77`“真正的”编译命令的批处理文件。命令：
> 
> `g77 -ffree-form prog.for -oprog.exe`
> 
> 指示编译器编译文件`prog.for`并将输出存储在文件中`prog.exe`。该`-ffree-form`开关表示自由格式样式（如果您使用旧样式，请将其删除）。

在自由格式的 Fortran 中，唯一允许的注释格式是以 . 开头的行`!`。事实上，这也是在同一页上直接写在上面的文字下：

> 注释
> 
> 在自由格式样式中，`!`用于全行和内嵌注释。在旧样式中，在第 1 列中使用“C”。

如果您没有使用提供的包装器，则在编译固定格式 FORTRAN 77 代码时`f2exe`不要传递选项。`-ffree-form`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:02:17.870

编译器没有将该语句识别为注释。作为评论，它应该忽略该行，但它正在尝试解析它。您确定“C”在第一列吗？

你为什么用g77？多年来一直不支持。gfortran 是当前的 GNU Fortran 编译器。它可以编译 FORTRAN 77、Fortran 90、95 以及 2003 和 2008 的部分内容。

编辑：也许它需要一个大写的“C”。

# jquery - 避免 zindex 的 Youtube 嵌入播放器

> ID：12614782
> 
> 赞同：1
> 
> 时间：2012-09-27T05:42:43.417
> 
> 标签：jquery, iframe, youtube, z-index, youtube-javascript-api

我正在尝试将图像放置在 youtube 嵌入式播放器上。我`wmode=transparent`通过 jQuery 添加到 url 以允许播放器接受 zindex。虽然它加载图像确实会显示在播放器上，但是一旦页面完全加载，播放器就会返回图像顶部。这是什么原因造成的？

```
<iframe class="one"  id="bottom" width="560" height="315" src="http://www.youtube.com

/embed/H7D4Ryi2ckg?list=SP0D260F7B6625A6BA&amp;hl=en_US" frameborder="0" 

allowfullscreen></iframe>

<img class="one" id="top" width="560" height="315" 

src="http://images.nationalgeographic.com

/wpf/media-live/photos/000/005/cache/domestic-cat_516_600x450.jpg" alt="" >

<style type="text/css">

    .one {position: absolute; top: 100px;}

    #top{z-index: 9999;}

    #bottom{z-index: 1;}

</style>

<script type="text/javascript" >

$(document).ready(function ()

 $('iframe').each(function()

    var url = $(this).attr("src")

    $(this).attr("src",url+"?wmode=transparent")

 );

);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:55:06.340

您的 iframe src中没有`?rel=0`。如果您`rel=0`从替换字符串中删除，它会起作用。

此外，您还缺少分号终止符`var url = ...`

***编辑***

修复语法错误后它工作正常：[meow](http://jsfiddle.net/7nJRg/)

# php - PHP 按级别获取经验

> ID：12614786
> 
> 赞同：1
> 
> 时间：2012-09-27T05:43:01.983
> 
> 标签：php, math, numbers

我有这段代码循环 1 到 99 并且是一个公式。

```
function getExperienceByLevel ($maxLevel)
{
    $levels = array ();
    $current = 0;

    for ($i = 1; $i <= $maxLevel; $i++)
    {
        $levels[$i - 1] = floor ($current / 4);
        $current +=  floor($i+300*pow(2, ($i/9.75)));
    }

    return $levels;
} 
```

首先你像这样启动它，`$aLevels = getExperienceByLevel(99);`然后看看你需要多少经验才能升级`6`你这样做，`echo $aLevels[5];`因为它是一个数组。

现在我正在尝试反向操作。通过经验获得等级。

```
function getLevelByExp($exp) 
{
    $myLevel = 0;
    $aLevels = getExperienceByLevel(99);

    for ($i = 1; $i < 100; $i++)
    {
        if ($exp > $aLevels[$i-1]) 
        { 
            return $myLevel;
        }
    }
} 
```

当被调用`getLevelByExp(1124);`或内部的任何数字时，它似乎返回零。但是，当您将回声放在该语句中时，它似乎起作用了。

Like 而不是`return $myLevel`do `echo "You are up to level $i<br />";`，它将一直上升到您获得 EXP 的当前级别。

但是仍然..当我想简单地返回一个数字时不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:08:16.903

这似乎比您的功能更好：

```
function getLevelByExp($exp)
{
        $aLevels = getExperienceByLevel(99);
        for ($i = 0;  $i <= 99;  ++$i)
        {
                //echo "cmp $exp >= aLevels[$i]={$aLevels[$i]}\n";
                if ($exp <= $aLevels[$i])
                        return $i - 1;
        }
        return -1;
} 
```

它需要改进边缘情况，例如何时`$exp`为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:47:24.410

而是返回 $i，因为它总是 '0'

```
if ($exp > $aLevels[$i-1]) { 
        return $i;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:46:12.240

你永远不会改变`$myLevel`，所以它会一直停留在`0`。

尝试返回`$i`而不是`$myLevel`，因为`$i`实际上正在改变：

```
function getLevelByExp($exp) {
    $aLevels = getExperienceByLevel(99);

    for ($i = 1; $i < 100; $i++) {
        if ($exp > $aLevels[$i-1]) { 
            return $i;
        }
    }
} 
```

# regex - sed 删除最后 4 个字符

> ID：12614787
> 
> 赞同：0
> 
> 时间：2012-09-27T05:43:11.360
> 
> 标签：regex, sed

说我有这两条线：

```
blah:20030717.abc
blah:20040714 
```

使用 sed，我如何仅在行首和行尾匹配 - `^blah.*abc$`- 并删除最后 4 个字符？

我试过了

```
sed 's/\(^blah.*\)\(.\{4\}$\)/\1/g' 
```

但这也会从另一行中删除 4 个字符。

```
blah:20030717
blah:2004 
```

和

```
sed 's/\(^blah.*abc$\)\(.\{4\}$\)/\1/g' 
```

不会改变任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:47:55.070

你为什么不做

```
 sed 's/\.abc$//g' 
```

因为您已经知道 要删除*哪4 个字符？*

或者，如果您只想在以 开头的行中执行此操作`blah:`，

```
sed 's/^\(blah.*\)\.abc$/\1/g' 
```

或者，如果您的问题是“如何删除点后的任何最后三个字符，如果该行以`blah:`”开头：

```
sed 's/^\(blah.*\)\..\{3\}$/\1/g' 
```

# apache - 更改端口号后 Apache 服务器无法正常工作

> ID：12614788
> 
> 赞同：1
> 
> 时间：2012-09-27T05:43:23.097
> 
> 标签：apache, xampp

我已将我的 apache 服务器端口号更改为 81 。但我无法在我的 windows7 32 位中启动我的 xampp apache 服务器。我也尝试过使用 1724 端口。但是找不到任何好的结果。

# timthumb - Timthumb.php 脚本，如何在执行时隐藏预览

> ID：12614790
> 
> 赞同：1
> 
> 时间：2012-09-27T05:43:31.223
> 
> 标签：timthumb

我真的很喜欢不必制作缩略图，所以我使用 timthumb.php 脚本。但是在页面加载时页面是空白的，然后所有的缩略图都在这里和那里弹出......这很有趣，但让我发疯。所以问题是，是否可以隐藏缩略图的完成位置，直到它完成。所以当 div 可见时，thum 就完成了，不会弹出！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:09:41.980

答案是：$(window).load(function() {} 在每个图像都准备好时执行，而不是 (windows).ready，它在 DOM 准备好时执行

参考 ; [http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

# javascript - 系统字体未正确感染

> ID：12614794
> 
> 赞同：0
> 
> 时间：2012-09-27T05:44:15.803
> 
> 标签：javascript

我的机器上安装了不同的字体。假设存在字体“Arial”。如果我尝试检索“Arial Bold”字体，则该特定字体未被检索，而是“Arial Regular”被获取。我曾经在机器上重新安装该字体，它工作正常。但是每当机器重新启动时，相同的问题就会被复制。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:48:18.860

名称应该是“Arial Black”，而不是 Arial Bold。

除非您想将常规 Arial*加粗*，在这种情况下，您可以使用 style 属性：

```
font-weight: bold; 
```

# asp.net - 使用 asp.net 在浏览器中显示 doc 文件

> ID：12614796
> 
> 赞同：1
> 
> 时间：2012-09-27T05:44:21.857
> 
> 标签：asp.net

我正在使用 asp.net 开发一个工作门户。我需要构建一个控件来从服务器目录在浏览器上显示上传的简历。任何人都可以分享代码来做同样的事情。什么是适合显示 doc 文件内容的控件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:53:03.953

没有 ASP.NET 服务器控件可以在网页中显示 Word 文档。Microsoft 删除了仅 Internet Explorer 才能在 Office 2007 的浏览器中显示 Word 文档的功能，但在此之前，您可能已经摆脱了这样做`<iframe>`- 请注意，这确实需要在浏览器的计算机上安装 Word。

听起来您想将 Word 文档转换为 HTML+CSS。我会在这里打断你，因为这是一个不平凡的操作，即使使用更容易处理的 OOXML 文件格式也是如此。有一些商业图书馆可以帮助您解决这个问题，但它们的成本很高。（必应“Aspose”）。

还有一些其他选择：

*   在服务器端将文档打印为 PDF 文件。这需要在服务器上进行复杂的设置，因为不应从无头（例如服务器）代码中使用 Office COM 自动化库；因此您需要设置某种 GUI 会话守护程序来执行此处理。
*   仅接受 OOXML 文件格式并仅提取纯文本内容（如果您已经有在代码中操作 XML 的经验，则无需太多 OOXML 知识即可轻松完成）。
*   仅接受纯文本或 HTML 提交。这就是大多数“上传简历”网站的工作方式，包括苹果和微软的职业网站。

如果您只想将 Word 文档返回给访问者，则只需使用 Response.WriteFile 返回文件的原始字节，或者如果您将 Word 文档保存在文件系统之外，则直接写入 Response 的输出流。

# pdf - 如何执行 ImageMagick 仅将多页 PDF 的第一页转换为 JPEG？

> ID：12614801
> 
> 赞同：74
> 
> 时间：2012-09-27T05:45:09.790
> 
> 标签：pdf, imagemagick, jpeg

如果我只想从多页 PDF*的第一页获取*`convert`JPEG ，我该如何执行 ImageMagick ？

 ** * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-27T05:48:53.713

如果您使用的是`convert`命令行，则可以使用以下参数执行它：

```
convert  source.pdf[0]  output.jpeg 
```

注意 ImageMagick 的页数是从 0 开始的。所以`[0]`意味着“第 1 页”。要选择，比如说第 4 页，您必须使用`[3]`.

此语法不仅适用于 PDF 输入。它还适用于其他多页或多帧格式，例如多页 TIFF 或动画多帧 GIF 和 PNG。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-27T07:25:48.623

不要使用 ImageMagick，使用 Ghostscript。无论如何，ImageMagick 都会调用 Ghostscript 来完成这项工作......

```
gs -sDEVICE=jpeg -sOutputFile=<output-filename> -dLastPage=1 <input filename> 
```

您还可以将设备更改为`jpegcmyk`（用于 CMYK 输出）或`jpeggray`灰度输出，您可以使用`-r`、`-dFirstPage`和来更改分辨率，`-dLastPage`以提取连续范围的页面等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-31T07:45:02.937

为了进一步回答@KenS，这里有更多细节，特别是对于 Windows 用户。

您可以在此处下载适用于 Windows 的 GhostScript：[http](http://www.ghostscript.com/download/gsdnld.html) ://www.ghostscript.com/download/gsdnld.html 。可执行文件的默认安装路径是“C:\Program Files\gs\gs910\bin\gswin64c.exe”。

上面列出的命令行参数在 Windows 中也是正确的，但这里还有一些我发现有用的：

```
gswin64c.exe -dNOPAUSE -dBATCH -r96 -sDEVICE=jpeg -sOutputFile="<out-file.jpg>"
             -dFirstPage=1 -dLastPage=1 "<input-file.pdf>" 
```

我还创建了一个批处理文件，将其很好地包装起来并将其发布到我的 GitHub 帐户。它也使得为多个 .pdf 文件创建缩略图变得更加容易。在[pdf2jpg.bat](https://github.com/kodybrown/dos/blob/master/pdf2jpg.bat)中查看。*

# excel - Qt - 如何将我的 QTableView 保存为 Excel 文件？

> ID：12614803
> 
> 赞同：6
> 
> 时间：2012-09-27T05:45:51.903
> 
> 标签：excel, qt, qtableview, qt4.7, qpushbutton

谁能帮助我，如何将我的**QtableView**保存为 Excel 文件。我有一个**QTableView**和 **一个 QPushButton**（保存按钮）。如果我在我的 QtableView 中输入值并且如果我**单击保存按钮 QTableView 项目应保存为 Excel 文件。**请帮助我。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:42:39.373

看看这个线程[My-approach-to-export-QTableView-data-to-a-Microsoft-Excel-file](http://www.qtcentre.org/threads/28345-My-approach-to-export-QTableView-data-to-a-Microsoft-Excel-file)。我通过向 Google 询问获得了此链接：QTableView 保存。对于那里的解决方案，您需要一个启用了 ODBC 的 Qt，这不是默认设置。

您还可以研究包含例如包含 writeToFile 函数的地址簿示例的详细文档。您可以从那里开始搜索例如有关 CSV 格式的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-23T05:21:35.877

this link worked for me : [http://www.qtcn.org/bbs/simple/?t47265.html](http://www.qtcn.org/bbs/simple/?t47265.html)

1-you should also use below code in .pro file. `QT += sql`

2-you should use `#include "exportexcelobject.h"` in your file that wanna export to excel.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T21:14:46.127

请参阅代码示例：

ExcelExportHelper.h

```
#ifndef EXCELHELPER_H
#define EXCELHELPER_H

#include <ActiveQt/qaxobject.h>
#include <ActiveQt/qaxbase.h>
#include <QString>

//Expected in .pro file: QT += axcontainer
//Application must be of UI type for ActiveX work.
class ExcelExportHelper
{
public:
    ExcelExportHelper(const ExcelExportHelper& other) = delete;
    ExcelExportHelper& operator=(const ExcelExportHelper& other) = delete;

    ExcelExportHelper(bool closeExcelOnExit = false);
    void SetCellValue(int lineIndex, int columnIndex, const QString& value);
    void SaveAs(const QString& fileName);

    ~ExcelExportHelper();

private:
    QAxObject* m_excelApplication;
    QAxObject* m_workbooks;
    QAxObject* m_workbook;
    QAxObject* m_sheets;
    QAxObject* m_sheet;
    bool m_closeExcelOnExit;
};

#endif // EXCELHELPER_H 
```

ExcelExportHelper.cpp

```
#include <ActiveQt/qaxobject.h>
#include <ActiveQt/qaxbase.h>

#include <QString>
#include <QFile>
#include <stdexcept>

using namespace std;

#include "ExcelExportHelper.h"

ExcelExportHelper::ExcelExportHelper(bool closeExcelOnExit)
{
    m_closeExcelOnExit = closeExcelOnExit;
    m_excelApplication = nullptr;
    m_sheet = nullptr;
    m_sheets = nullptr;
    m_workbook = nullptr;
    m_workbooks = nullptr;
    m_excelApplication = nullptr;

    m_excelApplication = new QAxObject( "Excel.Application", 0 );//{00024500-0000-0000-C000-000000000046}

    if (m_excelApplication == nullptr)
        throw invalid_argument("Failed to initialize interop with Excel (probably Excel is not installed)");

    m_excelApplication->dynamicCall( "SetVisible(bool)", false ); // hide excel
    m_excelApplication->setProperty( "DisplayAlerts", 0); // disable alerts

    m_workbooks = m_excelApplication->querySubObject( "Workbooks" );
    m_workbook = m_workbooks->querySubObject( "Add" );
    m_sheets = m_workbook->querySubObject( "Worksheets" );
    m_sheet = m_sheets->querySubObject( "Add" );
}

void ExcelExportHelper::SetCellValue(int lineIndex, int columnIndex, const QString& value)
{
    QAxObject *cell = m_sheet->querySubObject("Cells(int,int)", lineIndex, columnIndex);
    cell->setProperty("Value",value);
    delete cell;
}

void ExcelExportHelper::SaveAs(const QString& fileName)
{
    if (fileName == "")
        throw invalid_argument("'fileName' is empty!");
    if (fileName.contains("/"))
        throw invalid_argument("'/' character in 'fileName' is not supported by excel!");

    if (QFile::exists(fileName))
    {
        if (!QFile::remove(fileName))
        {
            throw new exception(QString("Failed to remove file '%1'").arg(fileName).toStdString().c_str());
        }
    }

    m_workbook->dynamicCall("SaveAs (const QString&)", fileName);
}

ExcelExportHelper::~ExcelExportHelper()
{
    if (m_excelApplication != nullptr)
    {
        if (!m_closeExcelOnExit)
        {
            m_excelApplication->setProperty("DisplayAlerts", 1);
            m_excelApplication->dynamicCall("SetVisible(bool)", true );
        }

        if (m_workbook != nullptr && m_closeExcelOnExit)
        {
            m_workbook->dynamicCall("Close (Boolean)", true);
            m_excelApplication->dynamicCall("Quit (void)");
        }
    }

    delete m_sheet;
    delete m_sheets;
    delete m_workbook;
    delete m_workbooks;
    delete m_excelApplication;
} 
```

用法：

```
try
{
    const QString fileName = "g:\\temp\\kaka2.xlsx";

    ExcelExportHelper helper;

    helper.SetCellValue(1,1,"Test-11");
    helper.SetCellValue(1,2,"Test-12");

    helper.SaveAs(fileName);
}
catch (const exception& e)
{
    QMessageBox::critical(this, "Error - Demo", e.what());
} 
```

# awk - 快速 AWK 格式化问题

> ID：12614804
> 
> 赞同：0
> 
> 时间：2012-09-27T05:46:08.020
> 
> 标签：awk

我有一条正在读取系统地址的行，其中可以有一个介于 01-47 之间的通配符（具体地址类似于 ring??.host.com）

我正在尝试使用正则表达式让 awk 识别条件参数中的任何这些数字

到目前为止，这是我想出的，但似乎不正确

```
/ring[0-4][0-7].host.com/{ (rest of blah blah blah goes here)} 
```

我知道这可以给我值 00，但我可以放心地假设在这种情况下它将在 01-47 连接。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:09:39.160

您可以使用一些花哨的正则表达式，或者您可以简单地*测试*该数字是否不等于“00”且小于或等于 47。使用`GNU awk`，也许您可​​以尝试这样的事情：

```
awk -r '/ring[0-9]{2}\.host\.com/ { string = substr($0, 5, 2); if (string != "00" && string <= 47) print }' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:53:07.447

如果您严格要求 01 到 47：`(0[1-9]|[123][0-9]|4[0-7])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:23:41.113

如果“00”是您唯一担心的情况，那么：

```
awk '/ring[0-4][0-7]\.host\.com/ && !/ring00\.host\.com/{blahblah}' 
```

例子：

```
kent$  echo "ring00.host.com
dquote> ring01.host.com
dquote> ring10.host.com"|awk '/ring[0-4][0-7]\.host\.com/ && !/ring00\.host\.com/'
ring01.host.com
ring10.host.com 
```

如果“39”也有效，则您的正则表达式将不起作用。你必须提取 2digits 并做类似 steve 的事情。

# ruby - 为什么我可以引用从未运行过的 if/unless/case 语句之外的变量？

> ID：12614805
> 
> 赞同：19
> 
> 时间：2012-09-27T05:46:08.950
> 
> 标签：ruby

为什么下面的代码不会抛出错误？

```
if false
  x = 0
end

x  #=> nil 
```

而以下确实会引发错误：

```
y  # NameError: undefined local variable or method `y' for main:Object 
```

`unless`&`case`语句也会发生同样的事情。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-27T06:08:19.113

这是因为 Ruby 解析器的工作方式。变量由解析器定义，它逐行遍历代码，而不管它是否会实际执行。

一旦解析器看到，它将在当前范围内`x =`定义局部变量`x`（带有 value ）。`nil`由于`if`////不创建新的范围，`unless`在代码块之外定义和可用`case`。并且由于内部块从未被评估为条件为假，因此未分配给（因此是）。`for``while``x``x``nil`

这是一个类似的例子：

```
defined?(x) and x = 0
x  #=> nil 
```

[*请注意，这是对所发生情况的高级概述，不一定是解析器的工作方式。*]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T06:09:51.920

这与 Ruby 范围规则的一个怪癖有关。

在 ruby​​ 中，`x`单独出现的未修饰变量可能是局部变量，也可能是方法调用——语法无法判断是哪一个。在解析局部变量引用时，由解析器来解决。规则很简单：如果已在本地范围内看到对同名变量的赋值，则引用是局部变量，并且引用绑定到该局部变量。否则，它是一个方法调用，它会在运行时被这样查找。

Ruby 中的局部变量引用被优化为数组查找（每个局部变量都被分配一个“槽”，解析器生成的绑定局部变量引用被转换为槽引用）。数组用 all 初始化`nil`：

```
/* initialize local variables */
for (i=0; i < local_size; i++) {
    *sp++ = Qnil;
} 
```

因此，如果您通过绑定的局部引用引用尚未分配的局部变量（仅当在同一局部范围内的引用上方存在跳过的分配时才会发生这种情况），您会得到`nil`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:15:14.840

我认为您的问题很有趣，所以我尝试查找并发现： [我不了解 ruby​​ 本地范围](https://stackoverflow.com/questions/4154864/i-dont-understand-ruby-local-scope)

正确的答案似乎是 Jorg。

让我们看看当您尝试访问未初始化的变量时会发生什么：

```
NameError: undefined local variable or method `UNDECLAREDVAR' for main:Object 
```

异常指出无法评估变量或方法。它不抛出相同异常的原因是因为未初始化的局部变量被设置为 nil。所以`puts x`没关系，因为解释器知道这`x`是变量但未初始化而不是方法。

# facebook-graph-api - 从流表中获取新闻提要

> ID：12614807
> 
> 赞同：3
> 
> 时间：2012-09-27T05:46:11.780
> 
> 标签：facebook-graph-api, feed

我正在尝试通过开发人员页面上的 Graph API Explorer 向 fql 发送新闻源请求，我很惊讶地看到我得到的响应与 facebook 页面上的新闻源以及 facebook ios 应用程序上的新闻源不完全匹配。当我通过 url 发布请求时，它会变得更加混乱，该请求在 XML 中以完全不同的列表进行响应，这显示了一些额外的东西，这些东西没有显示在我的 Facebook 页面上的新闻提要上。

我从 Graph API Explorer 使用 fql 发送的查询

```
SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0 
```

并通过我发送的 URL

```
https://api.facebook.com/method/fql.query?query=SELECT%20post_id%2C%20actor_id%2C%20target_id%2C%20message%20FROM%20stream%20WHERE%20filter_key%20in%20(SELECT%20filter_key%20FROM%20stream_filter%20WHERE%20uid%3Dme()%20AND%20type%3D'newsfeed')%20AND%20is_hidden%20%3D%200&access_token=<access token> 
```

我正在寻找一个星期的答案，但我没有发现任何有用的东西，从其他帐户尝试过，我看到了同样的问题。

我还尝试查看 ios 请求的 Facebook 应用程序，我得到了一个看起来像这样的链接

```
https://graph.facebook.com/graphql/ 
```

带有 POST 参数

```
sdk_version=3 
format=json
app_version=40121
q=node(1033280756){home_stories.environment(iphone).first(5){edges{deduplication_key,...<in very long query>
locale=en_US
method=get
sdk=ios
access_token=<access token> 
```

但是使用来自 GAE 的访问令牌使用 Graph API Explorer 对其进行测试我收到消息

> { "error": { "message": "(#803) 您请求的某些别名不存在：graphql", "type": "OAuthException", "code": 803 } }

当我从我的 ios facebook 应用程序提供访问令牌并且当我尝试通过`https://www.facebook.com/login.php?api_key=6628568379`我收到相同的错误时，这仅有效并且响应完全匹配我来自 facebook 页面的新闻提要。

我不明白这是表格中的错误还是这不是您获取 facebook 等新闻提要的方式？有人从facebook得到任何官方答复吗？

# java - 您无权访问此服务器上的 /Apps/WebObjects Apache/2.2.21 (Amazon) Server

> ID：12614808
> 
> 赞同：2
> 
> 时间：2012-09-27T05:46:12.873
> 
> 标签：java, webobjects

当我尝试通过和组件`<html><body>Test</body></html>`在 HTML 标记中提供 HTML 格式的输入时，我收到上述禁止错误`WOText``WOTextField`

> 您无权访问此服务器 Apache/2.2.21 (Amazon) Server 上的 /Apps/WebObjects。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:21:18.373

你能给我们更多的信息吗？是你的应用吗？如果是，你能告诉我们相关的来源吗？如果不是，您是说接受*其他*输入，而不是包含 HTML 标记的输入？看起来你在谈论部署中发生了什么——开发中发生了什么？

从表面上看，您尝试做的事情和观察到的事情似乎无关：您没有理由不能通过`WOTextField`or`WOText`组件输入 HTML 标记。

# google-analytics - 实时用户不会反映在人口统计数据中

> ID：12614810
> 
> 赞同：0
> 
> 时间：2012-09-27T05:46:24.330
> 
> 标签：google-analytics

我在 php 中使用服务器端分析代码将 Google Analytics 与我的网站集成。

```
 use UnitedPrototype\GoogleAnalytics;

    // Initilize GA Tracker
    $tracker = new GoogleAnalytics\Tracker('UA-XXXXXX', 'XXXXX.com');

    // Assemble Visitor information
    // (could also get unserialized from database)
    $visitor = new GoogleAnalytics\Visitor();
    $visitor->setIpAddress($_SERVER['REMOTE_ADDR']);
    $visitor->setUserAgent($_SERVER['HTTP_USER_AGENT']);
    $visitor->setScreenResolution('1024x768');

    // Assemble Session information
    // (could also get unserialized from PHP session)
    $session = new GoogleAnalytics\Session();

    // Assemble Page information
    $page = new GoogleAnalytics\Page($_SERVER['REQUEST_URI']);
    $page->setTitle('My Page');

    // Track page view
    $tracker->trackPageview($page, $session, $visitor); 
```

问题是，昨天它在网站上显示实时用户，但今天网站上显示的总访问量为零。这个服务器端实现是否有问题。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T17:49:19.810

Recently Google has launched API - Google Real Time API which provide the similar functionality. try - [https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide](https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide)

# c# - 将硬盘路径转换为应用程序文件夹路径

> ID：12614811
> 
> 赞同：2
> 
> 时间：2012-09-27T05:46:28.693
> 
> 标签：c#, .net, console-application

如何将驱动器的路径转换为应用程序路径？目前我正在我的硬盘上创建和访问文件（例如：“D:\MyFolder\MyDoc.doc”）。我想要我的控制台应用程序文件夹中的这个路径。我知道我可以`Server.MapPath`用于 ASP.NET 应用程序。控制台应用程序呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:13:17.490

**已编辑**

如果您想从当前文件夹中读取文件

```
System.IO.FileStream stream = System.Reflection.Assembly.GetExecutingAssembly().GetFile("filename"); 
```

或者你想获取目录路径

```
 string path = System.Reflection.Assembly.GetExecutingAssembly().Location;
            var directory = System.IO.Path.GetDirectoryName(path);
            var parentdir = System.IO.Directory.GetParent(directory); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:16:29.963

为避免硬编码路径文件，请放入`MyDoc.doc`执行文件夹，然后您可以使用以下命令获取执行文件夹`Directory.GetCurrentDirectory()`：

```
string directory = Directory.GetCurrentDirectory();
string fileName = Path.Combine(directory, "MyDoc.doc"); 
```

其他选择：

```
string path = Assembly.GetExecutingAssembly().Location;
string directory = Path.GetDirectoryName(path); 
```

或者：

```
string directory = AppDomain.CurrentDomain.BaseDirectory; 
```

或者：

```
string directory = Path.GetDirectoryName(Application.ExecutablePath); 
```

获取`bin`文件夹：

```
 var bin = Directory.GetParent(directory ).Parent.FullName; 
```

# dll - 控件 controlName 的类 MSComctlLib.[ListView|TextBox|ect] 不是加载的控件类

> ID：12614814
> 
> 赞同：4
> 
> 时间：2012-09-27T05:46:41.600
> 
> 标签：dll, vb6, compilation, compiler-errors

此错误来自编译 vb6 dll 的机器，该 dll 突然停止工作并且以前可以正常工作。

我在网上看到了很多我能找到并与我相关的解决方案。[包括从http://www.xtremevbtalk.com/archive/index.php/t-140158.html](http://www.xtremevbtalk.com/archive/index.php/t-140158.html) 和 [http://www.excelfox.com/forum/f2/missing-mscomctllib-15](http://www.excelfox.com/forum/f2/missing-mscomctllib-15/)中看起来很有希望的这些 [/](http://www.excelfox.com/forum/f2/missing-mscomctllib-15/)

这两个都建议重新注册 MSCOMCTL.OCX

但是在遵循这两个之后，我仍然遇到了问题。经过数小时的搜索和尝试不同的事情后，我意识到由于公司政策，已经安装了一些更新并等待重新启动机器。

# 答案

我重新启动机器并等待更新完成安装。之后，dll编译没有问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-23T20:32:19.860

在安装了一些 Windows 更新（包括升级到 IE10）和 VS2012 Update 3 后，我遇到了同样的问题，但更新已完全安装，并且 MSCOMCTL.OCX 已经 COM 注册。在我发现有关此问题的另一篇 StackOverflow 帖子中，这终于为我解决了：

以管理员身份运行命令提示符

在 64 位系统上导航到 C:\Windows\SysWOW64，或在 32 位系统上导航到 C:\Windows\system32

执行“regtlib msdatsrc.tlb”（不带引号）

归功于“自动”： [更新 KB 2687323 后 VB6 IDE 无法加载 MSCOMCTL.OCX](https://stackoverflow.com/questions/11982719/vb6-ide-cannot-load-mscomctl-ocx-after-update-kb-2687323)

我在这里发布，因为您是搜索此错误时的第一个结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:46:41.600

*如果计算机在某个时候正在编译 dll/ocx 但不再编译，则此答案应该有效，但如果您的计算机也从未编译过它，则该答案也可能有效。*

所以这个问题的简单答案是检查您的机器是否有等待重新启动的挂起更新。

如果是这样，请确保您重新启动计算机。

如果重启后问题仍然存在，请尝试重新注册 MSCOMCTL.OCX，它应该在您的 windows 子目录中；**c:\windows\system32**或**c:\windows\** SysWOW64 。*请注意，您使用 regsvr32 注册 ocx*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T11:39:13.693

我有 Windows Server 2008 R2（64 位），我遇到了同样的问题，我得到了通过，如下所示：

1.  转到路径 C:\Windows\Microsoft.NET\Framework\v4.0.30319
2.  执行“regtlibv12 msdatsrc.tlb”（不带引号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T07:38:25.377

我在一台生产计算机上遇到了这个问题。它是一台新格式化的 PC，其操作系统为 Windows XP。在撰写本文期间，我们知道 Windows XP 不再提供更新。我所做的是，我安装了 VB6，因为我可以访问该软件，之后，我安装了[VB6 Service Pack 6](https://www.microsoft.com/en-ph/download/details.aspx?id=5721)并纠正了错误。我必须安装 VB6 Enterprise，因为安装服务包需要安装上述 IDE 中包含的数据。

# java - 如何确保用户不输入字母

> ID：12614817
> 
> 赞同：2
> 
> 时间：2012-09-27T05:46:47.063
> 
> 标签：java, input, user-input

在我的程序中，用户必须选择他们想要做的事情，然后点击选项旁边的数字，然后点击回车。

现在我有它，所以任何不是选择的数字都会出错，但现在我想确保如果用户输入字母，例如“fadhahafvfgfh”，它会显示错误

这是我的代码...

```
import java.util.Scanner;

public class AccountMain {

    public static void selectAccount(){

        System.out.println("Which account would you like to access?");
        System.out.println();
        System.out.println("1 = Business Account ");
        System.out.println("2 = Savings Account");
        System.out.println("3 = Checkings Account");
        System.out.println("4 = Return to Main Menu");

        menuAccount();

    }

    public static void menuAccount(){

        BankMain main = new BankMain();
        BankMainSub sub = new BankMainSub();
        BankMainPart3 main5 = new BankMainPart3();

        Scanner account = new Scanner(System.in);

        int actNum = account.nextInt();

        if (actNum == 1){

            System.out.println("*Business Account*");
            sub.businessAccount();
        }

        else if (actNum == 2){

            System.out.println("*Savings Account*");
            main.drawMainMenu();
        }

        else if (actNum == 3){

            System.out.println("*Checkings Account*");
            main5.checkingsAccount();
        }

        else if (actNum == 4){
            BankMain.menu();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:49:05.543

您可以为此使用[Scanner#hasNextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28int%29)。

```
if(account.hasNextInt())
  account.nextInt(); 
```

> 如果此扫描仪输入中的下一个标记可以使用 nextInt() 方法解释为指定基数中的 int 值，则返回 true。扫描仪不会超过任何输入。

如果用户输入无效，那么您可以说再见，下次见，如下所示。

```
 int actNum = 0;
    if(account.hasNextInt()) {
        //Get the account number 
        actNum = account.nextInt();
    }
    else
    {
        return;//Terminate program
    } 
```

否则，您可以显示错误消息并要求用户重试有效帐号。

```
 int actNum = 0;
    while (!account.hasNextInt()) {
        // Out put error
        System.out.println("Invalid Account number. Please enter only digits.");
        account.next();//Go to next
    }
    actNum = account.nextInt(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:55:24.113

```
Scanner account = new Scanner(System.in);
int count = 0;
while (true and count < 3) {
    if (!account.hasNextInt()) {
        int actNum = account.nextInt();
        break;
    } else {
         System.out.println("Enter an integer");
         count++;
         account.next();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-21T05:05:46.167

我认为公认的答案是正确的，但我们应该在代码中使用异常处理等 java 特性

// 所以我们的代码应该是这样的

```
public static void main(String[] args) {

    int choice=0;
    Scanner scanner = new Scanner(System.in);
    StringReverse objReverse = new StringReverse();

    System.out.println("Menu");
    System.out.println("1.Reverse String");
    System.out.println("2.Exit");

    do {
            System.out.println("Enter your choice");
            try {
                choice = scanner.nextInt();
                switch(choice) {

                     case 1 :
                            System.out.println("Enter the string to reverse");
                            String inputString = new String();
                            inputString = scanner.next();
                            String reversedString = objReverse.reverse(inputString );
                            System.out.println("Reversed String is " + reversedString);
                            break;

                     case 2 :
                            System.out.println("Exiting...");
                            return;

                     default :
                            System.out.println("Default choice");
                            break;
               }
            } catch(Exception e) {
                    System.out.println("Please enter valid integer input");
                    scanner.next();
            }
   } while(choice != 2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T05:52:03.867

Scanner 有一个[hasNextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext%28%29)函数，如果下一个标记是整数，则返回 true。所以在调用之前`nextInt()`验证是否`hasNextInt()`为真。如果失败，向用户显示一条消息，要求他输入一个整数。注意，Integer 不一定需要在您要求的范围内，因此请确保您还有一个 final`else`通知用户他输入的数字无效。

提示：使用 Switch Case。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T05:59:37.967

您可以使用`Scanner.hasNextInt()`或`Integer.parseInt()`。

```
Scanner account = new Scanner(System.in);
String actNum = account.next();
try {
    Integer.parseInt(actNum);
} catch(ParseException ex) {
    sysout("please enter only numeric values")
} 
```

# asp.net - 如何在 javascript 中打开使用 Fileopendialog 选择的文件？

> ID：12614818
> 
> 赞同：0
> 
> 时间：2012-09-27T05:46:52.003
> 
> 标签：asp.net, file-upload, fileopendialog

我正在使用带有 type="file" 的 Html 输入标签来允许用户选择一个 Excel。

文件被选中后，会存放在哪里？从哪里可以得到那个文件？我想使用 javascript/jquery 读取文件。

我在网上搜索了很多。但是找不到任何解决方案..

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:58:54.483

看，这是基础。HTML 在客户端。如果您想读取该 excel 文件，请为数据库编写一些插入代码，然后您可以从数据库中找到相同的代码。

并为浏览文件查找以下情况

你想要这个`Application.GetOpenFilename`功能。从 VBA 对象浏览器复制：

> 函数 GetOpenFilename([FileFilter], [FilterIndex], [Title], [ButtonText], [MultiSelect])
> Excel.Application 的成员

我认为此信息将帮助您清除基础知识，如果您想解决具体疑问，请提出具体问题。

# iphone - 使用 CGContext (alpha + blend) 绘制干净流畅的自由手绘图

> ID：12614823
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:47:04.693
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimage

以下是我使用 CGContext 进行自由手绘的代码。我想使用 alpha 值为 0.6 的颜色和混合模式为`kCGBlendModeColor`. 但是在绘图时，我得到以下效果：颜色重叠并变暗。我想要不重叠和平滑的绘制。

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
  {

   UITouch *touch = [touches anyObject];
   lastTouch = [touch locationInView:self];
 }

 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
CGPoint   currentTouch = [touch locationInView:self];

CGFloat brushSize = 35;

UIColor *color = [UIColor blueColor];
CGFloat red = 0.0, green = 0.0, blue = 0.0, alpha = 0.0;

if ([color respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
    [color getRed:&red green:&green blue:&blue alpha:&alpha];
} else {
    const CGFloat *components = CGColorGetComponents(color.CGColor);
    red = components[0];
    green = components[1];
    blue = components[2];
    alpha = components[3];
}

UIGraphicsBeginImageContext(self.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, brushSize);

CGContextSetRGBStrokeColor(context, red, green, blue, 0.6) ;
CGContextSetBlendMode(context, kCGBlendModeColor);

CGContextBeginPath(context);
CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
CGContextStrokePath(context);
self.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
lastTouch = [touch locationInView:self];

 } 
```

![在此处输入图像描述](../Images/9c9606928b65d1da4b9a8ccd45a3a65d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:23:42.723

如果你真的想画干净流畅的手绘图，用OpenGL，我也用过这个，真的很好。

按照这个链接

[http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:36:36.497

这可能不是您想要做的，但一种可能的解决方案是将完整的 alpha 绘制到您创建的“额外”子视图中，然后将其 alpha 值设置为 0.6。

换句话说，使用 1.0 alpha 进行绘制，但在 alpha 值为 0.6 的视图中绘制。

当您在之前的绘图上着色时，这应该可以防止出现可见的效果，同时仍然保留您想要的 Alpha 效果。

祝你好运！希望有帮助。

# navigation - windows phone 7 中的页面导航性能

> ID：12614831
> 
> 赞同：1
> 
> 时间：2012-09-27T05:47:31.540
> 
> 标签：navigation, windows-phone-7.1

我有两个页面，page1和page2。在page2中，有一个列表框，绑定了大约300个项目。当所有项目加载完毕后，我按手机上的返回键导航到page1，需要很长时间（大约1.2秒）。谁能给我一些建议来改进它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:22:33.547

我的建议是不要一次向一个页面添加 300 个项目。

如果您想在列表中显示这么多项目，则应将内容虚拟化，以便不必全部加载。

第一次打开“page1”需要多长时间？可能是那里发生了一些事情导致延迟。

如果您能够提供复制品，那么我们可能会提供更多帮助。

# javascript - 嵌入式谷歌地图 - 如何定位到给定坐标

> ID：12614833
> 
> 赞同：1
> 
> 时间：2012-09-27T05:47:36.967
> 
> 标签：javascript, jquery, html, google-maps

是否可以在嵌入式谷歌地图中定位到给定坐标？当用户单击链接或按钮时，我需要显示预定义的位置。我在表格中有一个位置列表及其坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:04:43.573

它有 2 个部分，您需要添加一个事件侦听器，该侦听器将调用地图以重新定位它。

如果您查看[Google Maps API - google.maps.Map](https://developers.google.com/maps/documentation/javascript/reference#Map)有一个`panTo(latLng:LatLng)`可用的方法，您可以通过点击某种函数来使用它（假设您的初始`map`变量是全局定义的。像这样：

```
function mapPanTo(lat,long) {
    var newLatLong = new google.maps.LatLng(lat,long);
    map.panTo(newLatLong);
} 
```

您的号召性用语可能是：

```
<a href="#" onclick="mapPanTo('-32.1100','115.9348'); return false;">
    change the map!
</a> 
```

希望有帮助..

# c - OpenMP 线程团队跨功能的持久性

> ID：12614835
> 
> 赞同：3
> 
> 时间：2012-09-27T05:47:45.563
> 
> 标签：c, gcc, openmp

我有一个用于物理模拟的简单程序。我想知道如何在 OpenMP 中实现某种线程范式。

```
int main()
{
#define steps (100000)
   for (int t = 0;t < steps; t++)
   {
     firstParallelLoop();
     secondParallelLoop();
     if (!(t%100))
     {
        checkpoint();
     }
   }
}
void firstParallelLoop()
{// In another file.c
  #pragma omp parallel for
   for (int i = 0; i < sizeOfSim;i++)
   {
     //Some atomic floating point ops.
   }
} 
```

以前，我使用 pthreads 并在我的双核笔记本电脑上获得了 1.7 的加速。使用 OpenMP 时，我似乎无法获得任何加速。我怀疑问题在于线程组/池正在迅速创建和销毁，并产生灾难性的影响。

在我的 pthreads 实现中，我需要确保没有创建新线程，并且我的程序表现为客户端-服务器。在 pthreads 方案中，main() 是一个服务器，对 firstParallelLoop 的调用将释放触发线程重新处理数据的互斥体/信号量。

当我查看 CPU 利用率时，我预计它会超过 30%（4 核，2 是 HT），但它保持在 27 左右......

如何让 OpenMP 做类似的事情？如何告诉 OpenMP 重用我的线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T08:37:07.867

GCC OpenMP 运行时`libgomp`通过类似于线程池的方式在 POSIX 系统上实现线程组——线程仅在遇到第一个并行区域时创建，每个线程运行一个无限工作循环。进入和退出平行区域是通过障碍实现的。默认情况下`libgomp`使用忙等待和睡眠的组合来实现屏障。忙碌等待的数量由`OMP_WAIT_POLICY`环境变量控制。如果未指定，则在屏障上等待的线程将忙于等待 300000 次旋转（100000 次旋转/毫秒时为 3 毫秒），然后进入睡眠状态。如果`OMP_WAIT_POLICY`设置为`active`，则忙碌等待时间增加到 30000000000 次旋转（5 分钟，100000 次旋转/秒）。您可以通过设置`GOMP_SPINCOUNT`可变为繁忙周期的数量（`libgomp`假设大约 100000 次旋转/毫秒，但它可能会因 CPU 的不同而变化 5 倍）。您可以像这样完全禁用睡眠：

```
OMP_WAIT_POLICY=active GOMP_SPINCOUNT=infinite OMP_NUM_THREADS=... ./program 
```

这会以某种方式改善线程团队的启动时间，但会以 CPU 时间为代价，因为空闲线程不会空闲，而是忙于等待。

为了消除开销，您应该以对 OpenMP 更友好的方式重写您的程序。您的示例代码可以这样重写：

```
int main()
{
#define steps (100000)
   #pragma omp parallel
   {
      for (int t = 0; t < steps; t++)
      {
         firstParallelLoop();
         secondParallelLoop();
         if (!(t%100))
         {
            #pragma omp master
            checkpoint();
            #pragma omp barrier
         }
      }
   }
}
void firstParallelLoop()
{// In another file.c
   #pragma omp for
   for (int i = 0; i < sizeOfSim; i++)
   {
      //Some atomic floating point ops.
   }
} 
```

注意以下两点：

*   在主程序中插入一个并行区域。这**不是**一个`parallel for`虽然。团队中的所有线程都将执行外部循环`steps`时间。
*   仅使用使`for`循环输入`firstParallelLoop`并行`omp for`。因此，如果在 OpenMP 并行外部调用，它将作为串行循环执行，而在从并行区域内部调用时，它将作为并行执行。中的循环也应该这样做`secondParallelLoop`。

主循环中的屏障用于确保其他线程在开始下一次迭代之前等待检查点完成。

# vim - 在另一个目录中包含 ctime 标头时出现 vim 错误

> ID：12614836
> 
> 赞同：1
> 
> 时间：2012-09-27T05:47:47.813
> 
> 标签：vim, scope, time-t

**在这里，当从 cpp 文件中包含 ctime 或 time.h 时，我从 vim 收到了一个奇怪的错误。我刚刚复制了 a.cpp，其中包含以下代码：**

```
/* function:
 * date:
 * author:
 */
/* localtime example */
#include <ctime>
#include<iostream>

int main (int argc, char const* argv[]) {
  time_t rawtime;
  struct tm * timeinfo;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );
  printf("current time is :%s",astime(timeinfo));

  return 0;
} 
```

然后我在 vim 中打开它们，区别如下：

> 如果您看到 403 Forbidden，只需将光标放在 url 输入栏中，按 enter。

*   在 vim 中打开 /home/hippo/cpps/cppworks/a.cpp。（如果看到 403 Forbidden，只需将光标放在 url 输入栏中，按 enter。）

    [http://photo21.hexun.com/p/2012/0927/485687/b_EA6D87DED1A027A1A21D8B31D0A5BB13.jpg](http://photo21.hexun.com/p/2012/0927/485687/b_EA6D87DED1A027A1A21D8B31D0A5BB13.jpg)

*   在vim中打开/home/hippo/a.cpp出来就好了

    [http://photo21.hexun.com/p/2012/0927/485687/b_982DF55D2242797854727CA51824861E.jpg](http://photo21.hexun.com/p/2012/0927/485687/b_982DF55D2242797854727CA51824861E.jpg)

所以，我只是无法从我的 ubuntu 系统中找出问题所在。

在我的笔记本电脑上编辑带有其他标题的其他文件时，我从未遇到过这样奇怪的问题。

我的英语不好:<，但任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:27:20.920

在那里，我将从这个问题中得到我的惨痛教训。不要用与系统头文件同名的头文件命名！不管怎么说，还是要谢谢你！：）

# python - 使用 numpy / python 计算永续年金的 IRR

> ID：12614844
> 
> 赞同：0
> 
> 时间：2012-09-27T05:48:15.300
> 
> 标签：python, numpy, finance, financial

我正在使用 numpy 库使用 irr 函数进行简单的 IRR 计算。因此，例如，如果我想找到现金流的内部收益率，我会执行以下操作

```
In [16]:
   import numpy as np 
   cf = np.array([-100,10,10,100])
   print np.irr(a)

0.0688601791248 
```

但是，我正在寻找一种永久执行 NPV 的方法。我的现金流是-100, 10....

有没有人这样做过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:12:18.473

[永续年金的 PV 很简单](http://en.wikipedia.org/wiki/Present_value#Annuities.2C_perpetuities_and_other_common_forms)：

```
PV=C/i

Where C = amount of cash flows
      i = effective periodic interest rate or rate of return 
```

# listbox - 在 Windows Phone 的数据模板中访问堆栈面板

> ID：12614847
> 
> 赞同：0
> 
> 时间：2012-09-27T05:48:28.233
> 
> 标签：listbox, datatemplate, windows-phone, itemtemplate

我想访问列表框的 ItemTemplate(datatemplate) 内的 StackPanel UIElement：

```
<ListBox x:Name="list">
<ListBox.ItemTemplate>
    <DataTemplate>
       <StackPanel x:Name="stk" >
           // some other stuffs
       </StackPanel>
    </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

但如何？

# ios - IOS6反向地理编码

> ID：12614848
> 
> 赞同：3
> 
> 时间：2012-09-27T05:48:38.140
> 
> 标签：ios, ios5, ios6, ios6-maps

我有一个使用 CLGeocoder 执行反向地理编码的 iPhone 应用程序（使用 XCode 4.4.1 和 IOS 5.1 的操作系统目标构建）。

在我的应用程序中，我确定标题（用于地图上的注释）如下：

```
 CLPlacemark *placemark = ...;      
    NSString* title = [NSString stringWithFormat:@"%@, %@, %@", placemark.subLocality, placemark.locality, placemark.country]
    ... 
```

在 IOS5.x 设备上运行时，结果与预期的一样，位置信息从左到右按比例增加（即郊区、城市、国家/地区）。

如果我在 IOS6 设备上运行完全相同的应用程序，则 placemark.subLocality 和 placemark.locality 的值会颠倒，从而导致（城市、郊区、国家/地区）。

我怀疑这是从谷歌地图切换到苹果地图的结果。我不愿意根据 IOS 版本有条件地对此进行编码，因为我怀疑 IOS6 下的行为不正确，如果是这样，将来会更正。

有没有人遇到过这个问题，如果有的话，有什么关于处理它的最佳方法的建议吗？或者我错过了什么（我是一个相对较新的 IOS 开发人员）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:41:05.823

[在 iOS 6.0 的 Reverse GEO 响应中，次区域性和区域性被交换](http://www.cannonade.net/blog.php?id=1572)，但仅适用于某些位置。旧金山似乎很好，但悉尼（和其他澳大利亚城市）以错误的顺序返回值。

# php - Magento 中的供应商模块

> ID：12614854
> 
> 赞同：3
> 
> 时间：2012-09-27T05:49:01.447
> 
> 标签：php, magento, magento-1.5

我正在寻找一个磁铁模块，它允许供应商注册和添加他们自己的产品以及有关它的所有信息，例如基本价格、标题、描述等。该产品只会出现在商店的目录中经网站管理员批准后。

如果供应商可以在某种报告中看到他们销售的产品数量，那就太好了。

在 magento 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:56:52.153

我个人可以推荐运行良好的 Unirgy 模块

[http://www.unirgy.com//products/udropship/](http://www.unirgy.com//products/udropship/)

虽然还有其他

[https://www.google.com/search?q=magento+multi+vendor+modules](https://www.google.com/search?q=magento+multi+vendor+modules)

# javascript - 如何在同一个表中不同文本框的“onblur”事件上填充表中的文本框？

> ID：12614857
> 
> 赞同：-1
> 
> 时间：2012-09-27T05:49:29.563
> 
> 标签：javascript, html, onblur

我有一张如下表。我必须`Amount`使用`Buy Quantity`and字段填充该`Market Price`字段。`Amount = Buy Quantity*Market Price`. 我正在做某事——

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Buy Stocks</title>

<script>
(function(){

var table = document.getElementById("mytable");
var tbody = table.getElementsByTagName("tbody")[0];
var rows = tbody.getElementsByTagName("tr");
function populateRow(index, addBlurEvent){
    var row = rows[index];
var cells = row.getElementsByTagName("td")
    var textboxes = row.getElementsByTagName("input");
var amountTextbox = textboxes[0];
    var totalTextbox = textboxes[1];
    var costCell = cells[2];
    var amount = amountTextbox.value.length>0 ? parseFloat(amountTextbox.value) : 0;
    var cost = parseFloat(costCell.innerHTML);
var total = amount * cost;
    totalTextbox.value = total;
if (addBlurEvent) {
        amountTextbox.onblur = function(){ populateRow(index,false); };
    }
}
for(i=0;i<rows.length;i++){
    populateRow(i,true);    
}
})();

</script>
</head>
<body>
<center>

<h5>Buy Stocks Here</h5>
    <form >
   <table border="1" cellpadding="5" id="mytable">
    <thead>
      <tr>
        <th>Stock Name</th>
        <th>Buy Quantity</th>
        <th>Market Price</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
<tr>
        <td>Stock Name</td>
        <td><input type="text" name="quantity" ></td>
        <td>122</td>
        <td><input type="text" name="amount"></td>
      </tr>

      <tr>
        <td>Stock Name</td>
        <td><input type="text" name="quantity" ></td>
        <td>111</td>
        <td><input type="text" name="amount"></td>
      </tr>

    </tbody>
  </table>
 </form>
</center> 
```

上面的 html 的 javascript 函数应该可以正常工作，我无法处理 'onblur' 事件。我应该如何以及在哪里这样做？请提出一个不修改脚本的答案。谢谢。

图片供参考：

![在此处输入图像描述](../Images/a69386d145f5ddcf75a450b4fe599db8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:04:43.873

看到这个：http: [//jsfiddle.net/picklespy/cxUz9/](http://jsfiddle.net/picklespy/cxUz9/)

如果您只想使用您的代码而不是我上面给出的 jquery 代码，请使用以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Buy Stocks</title>
</head>
<body>
<center>

<h5>Buy Stocks Here</h5>
    <form >
   <table border="1" cellpadding="5" id="mytable">
    <thead>
      <tr>
        <th>Stock Name</th>
        <th>Buy Quantity</th>
        <th>Market Price</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
<tr>
        <td>Stock Name</td>
        <td><input type="text" name="quantity" ></td>
        <td>122</td>
        <td><input type="text" name="amount"></td>
      </tr>

      <tr>
        <td>Stock Name</td>
        <td><input type="text" name="quantity" ></td>
        <td>111</td>
        <td><input type="text" name="amount"></td>
      </tr>

    </tbody>
  </table>
 </form>
</center>
<script type="text/javascript">
(function(){

var table = document.getElementById("mytable");
var tbody = table.getElementsByTagName("tbody")[0];
var rows = tbody.getElementsByTagName("tr");
function populateRow(index, addBlurEvent){
    var row = rows[index];
var cells = row.getElementsByTagName("td")
    var textboxes = row.getElementsByTagName("input");
var amountTextbox = textboxes[0];
    var totalTextbox = textboxes[1];
    var costCell = cells[2];
    var amount = amountTextbox.value.length>0 ? parseFloat(amountTextbox.value) : 0;
    var cost = parseFloat(costCell.innerHTML);
var total = amount * cost;
    totalTextbox.value = total;
if (addBlurEvent) {
        amountTextbox.onblur = function(){ populateRow(index,false); };
    }
}
for(i=0;i<rows.length;i++){
    populateRow(i,true);    
}
})();
</script>
</body>
</html> 
```

# android - 图像字节流在android中被破坏

> ID：12614858
> 
> 赞同：2
> 
> 时间：2012-09-27T05:49:31.250
> 
> 标签：android, android-camera

我在android中有一个用于捕获图像的应用程序。它在许多三星手机、平板电脑上都能正常工作，但在三星 2 310（7 英寸 ics 4.0.3）上，字节流已损坏。我在 logcat 中收到以下错误。

```
09-26 16:50:49.044: E/CameraHAL(99): (1494458)   hardware/ti/omap4xxx/camera/BaseCameraAdapter.cpp:1703 setState - Adapter state switch INTIALIZED_STATE Invalid Op! event = 0x5

09-26 16:55:21.279: E/CameraHAL(99): (1494458)   hardware/ti/omap4xxx/camera/BaseCameraAdapter.cpp:1786 setState - Adapter state switch PREVIEW_ACTIVE Invalid Op! event = 0x5

09-26 16:55:14.912: E/CameraHAL(99): (14e30e8)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXFocus.cpp:209 doAutoFocus - Autofocus callback timeout expired

09-26 16:55:15.279: E/CameraHAL(99): (14e30e8)   hardware/ti/omap4xxx/camera/BaseCameraAdapter.cpp:1059 notifyShutterSubscribers - Sending shutter callback

09-26 16:57:36.380: E/CameraHAL(99): (14d4c10)   hardware/ti/omap4xxx/camera/OMXCameraAdapter/OMXFocus.cpp:209 doAutoFocus - Autofocus callback timeout expired. 
```

# android - 使用机器人缓慢或快速向上拖动（滚动）

> ID：12614861
> 
> 赞同：7
> 
> 时间：2012-09-27T05:49:56.353
> 
> 标签：android, robotium

这是我用于拖动当前屏幕的代码。

```
int screenWidth = getActivity().getWindowManager().getDefaultDisplay().getWidth();
int screenHeight = getActivity().getWindowManager().getDefaultDisplay().getHeight();
int fromX, toX, fromY, toY = 0;
fromX = screenWidth/2;
toX = screenWidth/2;
fromY = (screenHeight/2) + (screenHeight/3);
toY = (screenHeight/2) - (screenHeight/3);
int scroll_time = 10000;             
solo.sleep(5000);
    // Drag UP  
solo.drag(fromX, toX, fromY, toY, 40);
Log.d(TAG, "Drag 1");
    // here default origin (x,y = 0,0) is left upper corner 
```

这里滚动工作但很慢。

那么对于快速滚动需要对这段代码进行哪些更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T06:51:09.753

我遇到了同样的问题，您需要做的是调整以下代码行，

```
solo.drag(fromX, toX, fromY, toY, 40); //Change 40 to 10 
```

这将提高您的滚动速度，步数越低，滚动越快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:55:32.257

```
 public class MainActivity extends Activity  {
 int windowwidth;
 int windowheight;    
 ImageView ima1,ima2;

  private android.widget.RelativeLayout.LayoutParams layoutParams ;
 // private android.widget.RelativeLayout.LayoutParams layoutParams ;
 //private android.widget.RelativeLayout.LayoutParams layoutParams ;           

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     windowwidth = getWindowManager().getDefaultDisplay().getWidth();
     windowheight = getWindowManager().getDefaultDisplay().getHeight();

     System.out.println("width" +windowwidth);
     System.out.println("height" +windowheight);             

     ima1 = (ImageView)findViewById(R.id.imageview1);
     ima1.setOnTouchListener(new View.OnTouchListener() {  

   public boolean onTouch(View v, MotionEvent event) {
   layoutParams = (RelativeLayout.LayoutParams) ima1.getLayoutParams();

     switch(event.getAction())                   
        {
          case MotionEvent.ACTION_DOWN:                          
                break;     

          case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

          System.out.println("value of x" +x_cord);
          System.out.println("value of y" +y_cord);           

                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                   }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                   }
         layoutParams.leftMargin = x_cord-25;
         layoutParams.topMargin = y_cord-25;
         //   layoutParams.rightMargin = x_cord-25;
         //   layoutParams.bottomMargin = y_cord-25;
         ima1.setLayoutParams(layoutParams);
                 break;
           default: break;
          }  
           return true;
        }
     });

     ima2 = (ImageView)findViewById(R.id.imageview2);
     ima2.setOnTouchListener(new View.OnTouchListener() {         

 public boolean onTouch(View v, MotionEvent event) {
     layoutParams = (RelativeLayout.LayoutParams) ima2.getLayoutParams();
          switch(event.getActionMasked())
             {
               case MotionEvent.ACTION_DOWN:
                   break;
               case MotionEvent.ACTION_MOVE:
                   int x_cord = (int) event.getRawX();
                   int y_cord = (int) event.getRawY();

                   System.out.println("value of x1" +x_cord);
               System.out.println("value of y1" +y_cord);                            

                    if (x_cord > windowwidth) {
                        x_cord = windowwidth;
                    }
                    if (y_cord > windowheight) {
                        y_cord = windowheight;
                    }
                    layoutParams.leftMargin = x_cord - 25;
                    layoutParams.topMargin = y_cord - 75;
                    ima2.setLayoutParams(layoutParams);
                    break;
                default: break;
            }
            return true;
        }
    });
   }
 } 
```

看到这个它是使用完整[的 Android 在屏幕上拖放图像吗？](https://stackoverflow.com/questions/11027792/android-drag-and-drop-images-on-the-screen)

# javascript - 内联添加事件侦听器时如何获取事件对象

> ID：12614862
> 
> 赞同：1
> 
> 时间：2012-09-27T05:50:07.037
> 
> 标签：javascript, javascript-events

假设我内联添加事件处理程序，使用`onclick`元素的属性，如下所示：

```
<input type="button" value="Submit" onclick='buttonClick()' /> 
```

然后这是我的处理程序：

```
<script type="text/javascript">
    window.buttonClick=function(e){
        e=e||window.event;
        alert(e.type);
        return false;
    }
</script> 
```

现在我想知道如何获取事件对象？由于上面的代码会抛出错误：`e is undefined`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:57:45.453

那*不是*在内联事件中使用`event`变量。

在这种情况下是从内联事件*调用*`buttonClick`的函数；被调用的函数没有对变量的神奇访问（是 IE 功能）。此外，在帖子中，使用 0 个参数调用，因此将始终评估为未定义。*`event``window.event``buttonClick``e`*

 *在任何情况下，与下面的比较，因为[对特殊`event`变量](https://stackoverflow.com/questions/11265869/how-does-javascript-recogize-event-object-variables/11265908#11265908)的访问是从*内联*事件本身完成的，然后将事件对象传递给“真实”事件处理函数：

```
<input type="button" value="Submit"
       onclick="buttonClick(window.event||event)" />

<script type="text/javascript">
    function buttonClick(e) {
        alert(e.type);
        return false;
    }
</script> 
```

（我建议使用 jQuery 或其他库来使统一事件访问更容易，但那是另一回事了..）

* * *

请注意，这`window.event||event`是一个肮脏的小技巧：

在 IE`window.event`中，将评估事件对象并用作表达式的结果（因此`event`）永远不会被评估。在非 IE 浏览器中，`window.event`将评估为未定义（除非有人在做一些*非常糟糕的事情*），因此结果将是`event`变量的结果。

将其反转为`event||window.event`不支持 W3C 局部`event`变量方法的浏览器（即 IE）会导致 ReferenceError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:55:39.350

假设您的代码执行我认为的操作..您只需执行以下操作：

```
<input type="button" value="Submit" onclick='buttonClick(window.event||event)' /> 
```*

# php - PHPExcel如何为从mysql表创建的整个文档应用对齐

> ID：12614864
> 
> 赞同：11
> 
> 时间：2012-09-27T05:50:16.680
> 
> 标签：php, phpexcel

我使用`PHPExcel`库根据 mysql 查询创建的表生成 excel 文件。我创建了多个选项卡，其中包含来自不同查询的单个数据。

我需要将所有选项卡（工作表）中所有单元格中的数据对齐到中心。

**这是我的代码：**

```
$mysql_xls = new MySqlExcelBuilder($mysql_db,$mysql_user,$mysql_pass);

// Add the SQL statements to the spread sheet

$tab_name = "tabname";
$mysql_xls->add_page($tab_name,$sql_statement,NULL,'A',1);

$phpExcel = $mysql_xls->getExcel();

$phpExcel->setActiveSheetIndex(0); // Set the sheet to the first page (default first page). 
```

我尝试了以下方法来对齐单元格中的文本，但没有改变：

```
$phpExcel->getActiveSheet(0)->getStyle()->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-27T06:30:48.023

**选项1**

为整个工作簿设置默认样式

```
$objPHPExcel->getDefaultStyle()
    ->getAlignment()
    ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER); 
```

**选项 #2**

将样式应用于每个工作表上的一系列单元格（在本例中为整个工作表）

```
$phpExcel->getActiveSheet()
    ->getStyle( $phpExcel->getActiveSheet()->calculateWorksheetDimension() )
    ->getAlignment()
    ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER); 
```

# c++ - 我应该让一个成员函数 virtual 只是为了让一个类可测试吗？

> ID：12614870
> 
> 赞同：7
> 
> 时间：2012-09-27T05:50:49.660
> 
> 标签：c++, unit-testing, mocking, virtual

我正在研究一个简化版本如下所示的类：

```
class Http_server {
public:
    void start(int port)
    {
        start_server();
        std::string content_type = extract_content_type(get_request());
    }

private:
    void start_server()
    {
        ...
    }

    std::string get_request()
    {
        ...
    }

    std::string extract_content_type(const std::string& request) const
    {
        ...
    }
}; 
```

现在我想为`extract_content_type`. 问题是：它是私人的，所以我不能从外面调用它。我可以测试的唯一功能是`start`，但实际上会启动服务器 ( `start_server`) 并等待请求 ( `get_request`)。

我怎么看，我有三个选择：

1.  `extract_content_type`公开_
2.  提取`extract_content_type`到实用程序类或命名空间
3.  Make `start_server`and `get_request`virtual 并创建一个覆盖它们的模拟对象

我不想公开任何东西或移动到一个只在单个类中使用过一次的实用程序命名空间，所以最不邪恶的是选项 3。

我在 V8 代码库中至少看到了一个示例： [http ://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc](http://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc)

不过，我不确定这是否是个好主意。`virtual`不是 C++ 中的默认值，原因有两个：

1.  它会导致性能/内存开销（但在我的情况下可能无关紧要）
2.  并非每个类都应该用作基类，使其明确也是设计决策

你会怎么做？与无用的虚拟生活在一起？还是根本不测试功能？我不喜欢 TDD，我也不想这样做，但是开发像`extract_content_type`针对测试这样的功能更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:04:55.847

我想你可能有另一种选择：

**让单元测试类成为你的类的朋友来测试**

```
class Foo {
  public:
#ifdef UNITTEST
    friend class FooTest;
#endif
    ...

  protected:
    ...

  private:
    ...
}; 
```

这是参考： http: [//praveen.kumar.in/2008/01/02/how-to-unit-test-c-private-and-protected-member-functions/](http://praveen.kumar.in/2008/01/02/how-to-unit-test-c-private-and-protected-member-functions/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:05:32.247

答案是你不测试私有函数。理想情况下，您甚至不编写它们，而是通过重构来创建它们（尽管我承认这在实践中非常困难）。

在测试您的公共/受保护功能时，应隐式测试您的私有功能。如果私有函数的功能没有以这种方式完全断言，那么这意味着该函数所做的事情*在类之外没有可见的影响*。

这不仅仅是一个 TDD 问题。由于私有函数是一个实现细节，我通常假设我可以在不破坏任何东西的情况下重构它们。如果有一个函数测试，并且我决定重构它的签名，那将不再适用，这让我非常困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-06T10:42:56.837

我可以向您推荐允许您使用私有方法的 API。它被称为 Typemock Isolator++。作为一个例子，我创建了一个测试，改变你的`extract_content_type`方法行为，调用它（尽管它是私有的），然后断言：

```
TEST_METHOD(TestExtractContentType)
    {   
        Http_server* server = new Http_server();

        std::string res ("result");
        PRIVATE_WHEN_CALLED(server, extract_content_type, NULL).Return(&res);

        std::string result;
        ISOLATOR_INVOKE_MEMBER(result, server, extract_content_type, NULL);

        PRIVATE_ASSERT_WAS_CALLED(server, extract_content_type);
        Assert::AreEqual(string("result"), result);
    } 
```

无需更改代码。我刚刚为编译器添加了 ISOLATOR_TESTABLE 标记以确保。

```
ISOLATOR_TESTABLE std::string extract_content_type(const std::string& request) const 
```

[你可以在这里](http://www.typemock.com/docs?book=Ipp)阅读更多。在处理单元测试中的非公共成员时非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:18:56.900

我同意 Björn 的观点。一个类有或没有什么私有功能取决于这个类，调用者不关心。如果您删除该私有方法会发生什么，即您认为提取内容类型并不难，因此您直接在您的`start`函数中执行它？好吧，您会破坏测试用例，尽管该类正在按应有的方式工作。私人就是私人！:)

我的建议是你把你`extract_content_type`的内容处理放在一个实用程序类中，并在你的测试中使用该类。然后不需要存在服务器代码来测试这个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T05:58:46.037

如果 extract_content_type 不需要 Http_server 类中包含的任何信息，则它不必属于该类。真的，看起来您需要一个请求本身的类，它可以返回自己的内容类型。然后可以测试该请求类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T06:06:36.670

我可以建议一个不同的选择，但我不确定你是否愿意。

您可以创建一个

```
#define TESTING_VIRTUAL 
```

`virtual`根据编译时选项，这将扩展为要么扩展为要么扩展为空。因此，如果您正在编译一个测试，您可以将其设置为替换为`virtual`，如果它用于生产，它就不是虚拟方法。

如果宏扩展为`private`或`public`取决于您是否在测试模式下编译，则同样可能。

# c++ - 具有当前权限的 CreateProcess

> ID：12614871
> 
> 赞同：0
> 
> 时间：2012-09-27T05:50:52.940
> 
> 标签：c++, process

我有一个安装文件，运行时会提示输入 UAC（假设它已启用），并且此安装文件将运行另一个需要 UAC 的 exe 但是我不希望第二个 exe 请求 UAC 权限，所以我如何继承当前在 C++ 中对子进程的提升权限

# php - 在自定义帖子类型下显示自定义分类

> ID：12614872
> 
> 赞同：1
> 
> 时间：2012-09-27T05:51:03.053
> 
> 标签：php, wordpress, custom-post-type, custom-taxonomy

我是 WordPress 的新手。我创建了一个名为的自定义帖子类型和名为的`arts`自定义分类法`male`，`female`并且`children`为`arts`. 有没有办法只列出帖子类型下的分类法`arts`？我尝试过使用`get_taxonomies();`，但它会产生所有分类法，但我只想要`arts`. 我的代码在这里。谢谢。

```
<?php $taxonomies=get_taxonomies(); 

var_dump($taxonomies);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:55:04.410

让我知道这是否适合你——

```
<?php 
$args=array(
  'name' => 'arts'
);
$output = 'objects'; // or objects
$taxonomies=get_taxonomies($args,$output); 
if  ($taxonomies) {
  foreach ($taxonomies  as $taxonomy ) {
    echo '<p>' . $taxonomy->name . '</p>';
  }
}  
?> 
```

**参考**-[来源](http://codex.wordpress.org/Function_Reference/get_taxonomies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T16:35:25.017

我想你会想要使用这个函数并将自定义帖子类型作为参数传递。

```
$taxonomies=get_object_taxonomies('arts'); 
```

# javascript - 从 Javascript 中的字符串查看 XML 结构

> ID：12614873
> 
> 赞同：0
> 
> 时间：2012-09-27T05:51:13.657
> 
> 标签：javascript, xml, ajax, xmldom

我正在通过 AJAX 从 php 中收集一个字符串。该字符串基本上包含来自标记（XML 结构）中的数据库的数据。

在 Javascript 中，我收到了这个字符串。现在我想在浏览器上将此字符串视为 XML，以确保 XML 字符串格式正确。

谁能建议我如何将字符串转换为正确的 XML 并将其显示在 Web 浏览器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:59:05.683

如果您的想法只是阅读并查看 xml 是否正确，您可以使用 console.log 将 xml 写入日志并查看它。如果你想在浏览器上显示，你可以把它放在一个 textarea 中并查看 xml，或者如果你在 xml 文档中使用 loadxml，以防万一出现问题，它会给你一个错误。

让我知道这是否有帮助

# android - Android：设置应用程序范围的字体

> ID：12614875
> 
> 赞同：0
> 
> 时间：2012-09-27T05:51:23.597
> 
> 标签：android, fonts

我必须在我的应用程序中使用自定义字体。我知道如何从资产目录中读取字体并将它们应用于控件，但这似乎是一项非常费力的任务。

无论如何我可以将我的资产目录中的自定义字体应用于应用程序中的所有控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:57:40.187

您可以做的一件事是：通过扩展自定义 textViews，然后在您的 xml 布局中使用它们。您将不得不为此覆盖`setTypeface(Typeface tf, int style)`方法。你可能想看看[这个](https://stackoverflow.com/questions/2711858/is-it-possible-to-set-font-for-entire-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:55:46.157

尝试这个

如果来自您的资产文件夹

```
Typeface.createFromAsset(yourAssetManager, pathOfYourFontAsset); 
```

如果在外部

```
Typeface.createFromFile(path) 
```

# sql - 删除另一个表中的匹配记录时表卡住

> ID：12614877
> 
> 赞同：0
> 
> 时间：2012-09-27T05:52:00.650
> 
> 标签：sql, sql-server-2005

我有一个**表 A**有大约 1500 万条记录。我有一个从另一个临时**表 B**删除数据并将数据插入**表 A**的过程。

 **它运行良好，另一个用户不直接访问此**表 A。****流程场景是 - 1）从表 A**和**表 B**中删除所有匹配的记录。2) 将新数据从**表 B插入到****表 A**中。

 **但有时过程会卡住。我已经检查过了，但没有得到任何解决方案。

A）所以，我创建了新表来代替**表 A并将旧数据从****表 A**提取到新表中。过了一段时间，我在新表上遇到了同样的问题。

B）下一次，我创建了另一个表来代替**表 A**，但没有在该表中插入旧记录。现在，过程运行良好。

但我需要一个解决方案来将所有记录放在**表 A**中。 **请问，有人可以帮忙吗？**

我正在使用**SQL Server 2005 企业版**。这个过程是通过**存储过程**完成的。表没有任何索引。只有简单的删除和插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:55:45.007

我得到了解决方案，数据库端的问题。正如我所观察到的，如果您的数据库变得很大，那么您需要监视数据库并运行维护作业以消除数据库中的任何不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:57:56.373

我认为当您处理大量数据时缓冲区已满。要刷新缓冲区，请在执行`COMMIT`一定数量后使用语句，`inserts`这会导致缓冲区中的数据写入磁盘。****

# c# - 在泛型中使用原始类型或 Type 对象

> ID：12614878
> 
> 赞同：0
> 
> 时间：2012-09-27T05:52:02.663
> 
> 标签：c#, .net, generics

如果您给定一个类型对象，例如

```
var myType = typeof(SomeClass) 
```

是否可以获得原始类型，作为接口或类并在泛型中使用它。

例如

```
var myObject = container.Resolve<myType>() 
```

所以这会在这种情况下创建一个 SomeClass 类型的对象。

为了澄清我正在尝试围绕 Ioc 容器创建一个包装器，以便 Ioc 框架可以更改而不影响任何其他代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:54:51.177

完全不清楚“获取原始类型”是什么意思 - 但如果您想在泛型中使用该类型，您通常需要使用反射。例如：

```
var methodDefinition = container.GetType().GetMethod("Resolve");
var constructedMethod = methodDefinition.MakeGenericMethod(method);
object myObject = constructedMethod.Invoke(container, null); 
```

变量的类型`myObject`只能是有用`object`的 - 变量的类型必须在编译时知道（尽管它可能是通用的）。如果您使用的是 C# 4 和 .NET 4+，您可能会使用`dynamic`它作为替代方案 - 这取决于您之后尝试使用它做什么。

如果您发现自己必须使用相同的类型参数进行多次反射调用，请考虑将逻辑提取到新的泛型方法中 - 然后您可以使用*一次*反射来调用该方法，然后在方法中使用普通泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:04:10.180

如果`container.Resolve`是指[`UnityContainer.Resolve`](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.unitycontainer.resolve.aspx)家庭中的一员，则有[超载](http://msdn.microsoft.com/en-us/library/ee650946.aspx)，它接受`Type`实例：

```
var obj = container.Resolve(typeObj); 
```

这是 DI 或 IoC 容器的一个常见特性——具有耦合的分辨率重载、通用用例和非通用用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:59:02.830

我想，你需要这样的东西：

```
T Resolve<T>()
{
    var myType = typeof(T);
    return (T)myType.GetConstructor(new Type[] { }).Invoke(new object[] { });
} 
```

你使用它：

```
YourClass l = Resolve<YourClass>(); 
```

对于没有类似参数的构造函数来说，这是一个非常简单的示例

```
public YourClass(){...} 
```

你可以从[这里](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)和[这里开始阅读](http://msdn.microsoft.com/en-us/library/h93ya84h.aspx)

无论您是否需要反思，您都应该始终仔细考虑它（考虑 J.Skeet 给出的答案）。

# date - 筛选 SharePoint 列表上的 YTD 条目

> ID：12614881
> 
> 赞同：2
> 
> 时间：2012-09-27T05:52:06.470
> 
> 标签：date, sharepoint, filter, financial

我希望在 SharePoint 2007 中创建一个带有筛选器的视图，以仅显示来自特定财政年度（从今年开始）的项目。

我尝试使用计算创建一个列并对其进行过滤： =Created>DATE(2012,6,1) 但这似乎不起作用。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:47:10.720

对于这么简单的事情，您不需要计算列 - 您只需要创建一个带有过滤器的视图。

另外 - 不要使用 DATE(2012,6,1) - 只需使用与您的站点区域设置相匹配的适当格式的日期（例如，“1/6/2012”代表英国，“6/1/2012”代表美国”

例子 ：-

![SharePoint - 查看筛选器](../Images/d31c666af4df0fc4d6f1e986135e826d.png)

这将创建“2012-13 财政年度”、“2013-14 财政年度”等“静态”视图 - 如果您想要“当前财政年度”、“上一个财政年度”等动态视图，那么它会更复杂一些调整此方法以[过滤当前日历月中的项目。](http://blog.pentalogic.net/2009/11/howto-filter-items-current-calendar-month-view-sharepoint/)

# ajax - 如何在父组件的ajax更新中排除子组件？

> ID：12614882
> 
> 赞同：25
> 
> 时间：2012-09-27T05:52:16.173
> 
> 标签：ajax, jsf, primefaces

我`<p:ajax>`在我的代码中使用 PrimeFaces 标签。我们如何在更新父组件的 ajax 调用中排除子组件的更新？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-27T10:41:43.380

如果您至少使用 PrimeFaces 3.3，那么您可以为此使用[PrimeFaces 选择器](http://www.primefaces.org/showcase/ui/ajax/selector.xhtml)。这允许您在 PrimeFaces ajax 组件的属性和属性中使用jQuery CSS选择[器语法。](http://api.jquery.com/category/selectors/)`process``update`

例如：

```
<h:form>
    <h:inputText ... />
    <h:inputText ... />
    <h:inputText ... styleClass="noupdate" />
    <h:inputText ... />
    <h:inputText ... />
    <p:commandButton ... update="@(form :not(.noupdate))"/>
</h:form> 
```

此示例将更新整个表单，但`class="noupdate"`客户端中的输入除外。

如果您想更新某个组件的所有子组件，除了一个，请将“form”替换为周围组件（或类或...）的 id

```
<h:form id="form">
    <h:panel id="myPanel">
        <h:inputText ... />
        <h:inputText ... />
        <h:inputText ... styleClass="noupdate" />
    </h:panel>
    <h:inputText ... />
    <h:inputText ... />
    <p:commandButton ... update="@(form :not(.noupdate))"/>
</h:form>

<p:commandButton ... update="@(#form\:myPanel :not(.noupdate))"/> 
```

只要确保您使用完整的客户端 ID。

### 也可以看看：

*   [update="@(.myClass)" 中的 PrimeFaces 选择器如何工作？](https://stackoverflow.com/questions/20080861/how-do-primefaces-selectors-as-in-update-myclass-work)

# javafx - 当我们改变图像的比例时，对 javafx 2.x 中的图像有什么影响？

> ID：12614884
> 
> 赞同：0
> 
> 时间：2012-09-27T05:52:23.537
> 
> 标签：javafx, javafx-2

当我们改变图像的比例然后平移 X 和 Y 相同时，布局 X 和 Y 也相同。图像的宽度和高度相同。那么 image 或 imageView 有什么变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:15:12.307

ImageView 中的 scaleXProperty 和 scaleYProperty。（如果是这种情况，还有 scaleZProperty ）。由于它们是 DoubleProperty 对象，您甚至可以在它们上绑定自定义事件！！

# c# - 将 7-zip 库集成到 C#.NET 应用程序中

> ID：12614886
> 
> 赞同：0
> 
> 时间：2012-09-27T05:52:44.237
> 
> 标签：c#, .net, compression, 7zip

> **可能重复：**
> [如何使用 .NET 创建 7-Zip 存档？](https://stackoverflow.com/questions/222030/how-do-i-create-7-zip-archives-with-net)

我们如何在 C#.NET 应用程序中集成 7-zip 归档库。我正在开发一个需要为存储的 zip 文件提供提取实用程序的应用程序，我猜 7Zip 的 DLL 将是最好的。

谁能告诉我如何使用它来集成到我的应用程序中。我需要在单击按钮上打开 Fileopen 对话框->浏览 zip 文件->然后将其解压缩并将文件保存在某处。

我尝试使用 SevenZipSharp 库，代码如下：

```
private void button1_Click(object sender, EventArgs e)
    {
        SevenZip.SevenZipExtractor.SetLibraryPath(@"F:\PARADOX\WFAST\WFAST\Res\7z.dll");
        SevenZip.SevenZipExtractor ext = new SevenZip.SevenZipExtractor(@"C:\Users\user\Desktop\stitch.zip");
        System.IO.Directory.CreateDirectory("C:/Users/user/Desktop/Stitch");
        ext.BeginExtractArchive("C:/Users/user/Desktop/Stitch");

    } 
```

但得到错误：`Can not load 7-zip library or internal COM error! Message: failed to load library.`

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-27T06:10:09.007

如果您正在寻找 7zip，当然只需使用 7 zip。我真的不明白怎么会有一个问题。为什么需要将它包装在一些 .NET 应用程序中尚不清楚，因为 7zip 具有良好的 gui 和命令行界面。

另一方面，如果您确实想编写一个可以处理压缩文件的简单 .NET 应用程序，您可以从 System.IO.Compression 命名空间开始，它已成为许多版本的 .NET 标准库的一部分。[http://msdn.microsoft.com/en-us/library/system.io.compression.aspx](http://msdn.microsoft.com/en-us/library/system.io.compression.aspx)

# php - cj.com API 调用中的内容编码错误

> ID：12614890
> 
> 赞同：1
> 
> 时间：2012-09-27T05:53:09.523
> 
> 标签：php, mysql, api, cj

几天前，我在核心 php 中创建了一个 cronjob 脚本，用于使用soap API从其他服务器获取内容并将结果插入到我自己的数据库中。

以前它工作正常并获取大约 10000 条记录并将它们插入数据库。

但是现在脚本无法正常工作。所以我在浏览器（Mozila）中执行了脚本，它给了我这个错误。

> 内容编码错误：
> 您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。请联系网站所有者以告知他们此问题。

我更改了页面编码和一些与 ini 相关的设置，但仍然显示相同的错误。

我也更改了我的代码并使用下面的代码，但问题仍然存在。

```
class API 
{
protected $developerKey;        
protected $websiteId;

// Intialise all the values
public function __construct(){

    $this->developerKey = 'XXXXXXX';
    $this->websiteId    = "yyyyyy";
}

public function apiCall($storeId,$start)
{
    try
    {
        $url    = "https://linksearch.api.cj.com/v2/link-search?";  
        $url    .="website-id=".$this->websiteId;
        $url    .="&advertiser-ids=".$storeId;
        $url    .="&link-type=".urlencode('Text Link');
        $url    .="&page-number=".$start;
        $url    .="&records-per-page=100";

        $ch     = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_POST, FALSE);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: '.$this->developerKey));
        $curl_results = curl_exec($ch);

        $xml    = simplexml_load_string($curl_results);
        $json   = json_encode($xml);
        $arrres = json_decode($json,TRUE);

        return $arrres;
    }
    catch (Exception $e)
    {
        return $e->getMessage();
    }
}
} 
```

我正在`apiCall`为大约 600 家商店循环使用方法。请提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:47:14.723

基本上，内容编码错误意味着响应以某种方式损坏，因此无法呈现。它可能只是一个浏览器的问题，但既然你用 curl 得到这个：

> HTTP/1.0 500 内部服务器错误

这意味着这不是浏览器问题，服务器端出了问题。您**需要**服务器日志，尤其是错误日志，来进一步诊断。*服务器端发生了一些*事情，但提供的信息甚至没有暗示那会是什么。

# python - Python：打印函数的结果返回“无”

> ID：12614891
> 
> 赞同：0
> 
> 时间：2012-09-27T05:53:17.333
> 
> 标签：python, debugging, loops

我有一些 python 代码， translate_string 方法返回正确的值`nevmban`，但是在它打印“None”之后。

```
def secret_translate(letter):
    code = ord(letter)-ord('a')
    code = (code+13)%26
    newCode = chr(code+ord('a'))
    return newCode

def translate_string(string):

    newMsg = ''
    i = 0
    while i < (len(string)):

        print(secret_translate(string[i]),end='')
        i= i+1 

print(translate_string("arizona")) 
```

程序打印：

```
nevmbanNone 
```

我希望它打印`nevmban`“无”来自哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:56:30.570

您正在打印`translate_string`函数的结果，即`None`，因为没有明确的`return`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:41:06.593

注意，如果你有翻译表，你真的不需要实现翻译机制。你有它们内置`string`：

```
import string

fromlist="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
tolist = "cdefghijklmnopqrstuvwxyzab"
transtable = string.maketrans(fromlist, tolist)

mycypertext="FCJJM UMPJB"
print string.translate(mycyphertext, transtable) #will print hello world 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:00:03.813

当您像这样调用 print 方法时：

```
print(underground_code(secret[i]),end='') 
```

您在函数中只传递了一个字符，而不是整个字符串。它将继续检查您的 while 循环中的第一个字符：

```
while i < (len(secret)): 
```

以上`while`将只运行一次。下一个函数调用你`len(secret)`将是 1。

*当然，如果这是您想要的，请忽略我所说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:37:46.850

您可以随时打印翻译后的单词的字母，我建议您从函数中返回翻译后的单词。您在翻译后的单词后面看到 None 的事实是因为在函数内部您打印单词，而在函数外部您打印函数的结果。该函数没有结果（无`return`语句），默认为无。打印这会导致 None 被附加到已经在函数内部打印的字符串的末尾。

我会建议这样的重组`translate_string`：

```
def translate_string(string):
  translated_letters = [secret_translate(letter) for letter in string]
  return("".join(translated_letters))

trans_string = translate_string("arizona")
print(trans_string)
'nevmban' 
```

该解决方案使用列表推导来循环输入字符串的字母，不需要带有计数器的显式循环。列表推导非常好，它们确实需要一些习惯。此外，该函数现在返回字符串，而不是在函数内部打印它。None 消失了，您可以在程序中进一步使用翻译后的字符串，例如作为另一个函数的输入。

# c - C 中的通用堆栈

> ID：12614893
> 
> 赞同：4
> 
> 时间：2012-09-27T05:53:28.120
> 
> 标签：c, generics, stack

我正在用 C 实现通用堆栈，并且在 stackPop 方法中遇到问题。我的结构如下：

**“堆栈.h”文件**

```
 typedef struct{
            void *elems;
            int elemSize;
            int allocLength;
            int logLength;
            void (*freefnc)(void *);
        } Stack;

    void stackNew(Stack *s, int elemSize, void (*freefnc)(void *));
    void stackDispose(Stack *s);
    void stackPush(Stack *s, void *elemAddr);
    void stackPop(Stack *s, void *target); 
```

**堆栈.c**

```
 #inlcude<Stack.h>

    void stackNew(Stack *s, int elemSize, void (*freefnc)(void *)){
        s.allocLength = 4;
        s.logLength = 0;
        s.elemSize = elemSize;
        s.elems = malloc(4*elemSize);
        s.freefnc =  freefnc;
    }

    void stackDispose(Stack *s){
        if(s.freefnc!=NULL){
            for(int i=0; i<s.logLength; i++){
                freefnc((char *)s.elems+i*s->elemSize);
            }
        }
        free(s.elems);
    }

    void Stringfree(void *elem){
        free(*(char**)elem);
    }

    void stackPush(Stack *s, void *elemAddr){
        if(s.alloclength == s.logLength){
            stackGrow(s);
        }
        void *target = (char *)s.elems + s.logLength*s.elemSize;
        memcpy(target,elemAddr,s.elemSize);
        s.logLength++;
    }

    static void stackGrow(Stack *s){
        s.allocLength*=2;
        s.elems = realloc(s.elems, s.alloclength*s.elemSize);
        assert(s.elems!=NULL);
    }

    void stackPop(Stack *s, void *elemAddr){
        void *source = (char *)s.elems + (s.logLength-1)*s.elemSize;
        memcpy(elemAddr,source,s.elemSize);
        s.logLength--;
    } 
```

如何返回/获取在**stackPop**函数中弹出的值？我不想更改实现，但如果有一种好的方法可以尽可能地保持实现相同，那么我将不胜感激。其他方法也是可以接受的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T06:37:37.990

我认为你能做的最好的事情是返回一个指向弹出数据的指针（`void*`因为这是你在 C 中为“通用”函数所做的最好的事情）：

```
void* stackPop(Stack *s, void *elemAddr){
        void *source = (char *)s.elems + (s.logLength-1)*s.elemSize;
        memcpy(elemAddr,source,s.elemSize);
        s.logLength--;
        return elemAddr;
} 
```

注意调用者仍然需要提供内存和地址来弹出数据；`malloc()`如果你想要编辑，你可以通过使用内存功能来避免这种情况：

```
void* stackPop(Stack *s){
        void *source = (char *)s.elems + (s.logLength-1)*s.elemSize;
        void *elemAddr = malloc(s.elemSize);
        // if (!elemAddr) handle_error();
        memcpy(elemAddr,source,s.elemSize);
        s.logLength--;
        return elemAddr;
} 
```

当然，这将需要调用者在`free()`不再需要它时调用它，并且增加了需要处理内存不足情况的次要复杂性。

# html - HTML形式的字符编码转换为utf-8

> ID：12614896
> 
> 赞同：1
> 
> 时间：2012-09-27T05:53:59.660
> 
> 标签：html, forms, encoding, utf-8, internationalization

您能帮我解决字符编码的问题吗？

我有一个 HTML 格式的富文本框。用户可以在其中键入或复制和粘贴文本。在内部，它将值保留为 HTML。有时我会收到格式错误的 HTML 片段，例如：

```
 <span lang="EN-US" style="font-size:12.0pt;font-family: " arial","sans-serif";
mso-fareast-font-family:ë°”íƒ•;mso-font-kerning:1.0pt;="" mso-ansi-language:en-us;mso-fareast-language:ko;mso-bidi-language:ar-sa"="">Hyun</span> 
```

我想这是因为字符编码中的一些问题。如果用户来自中国、日本或韩国，这通常会发生。

顺便说一句，html的前几行是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我猜这是因为用户复制并粘贴到表单中，并且他的剪贴板具有不同的编码，但浏览器将其转换为 utf-8。我有什么我做错了吗？有没有可能设置正确？

谢谢，斯里坎特

# tomcat7 - 为什么 log4j 没有在 tomcat 的日志中显示错误消息？

> ID：12614897
> 
> 赞同：0
> 
> 时间：2012-09-27T05:54:10.387
> 
> 标签：tomcat7, log4j

如果我在应用程序中遇到任何异常，它会显示在 Eclipse 控制台上。但该异常未显示在位于 tomcat 日志文件夹中的日志文件中。有什么我在这里想念的吗？

下面是我的完整 log4j 文件。

```
 <?xml version="1.0" encoding="UTF-8"?>

    <!-- Document : log4j.xml Created on : Feb 23, 2012, 9:30 AM Author : meshash 
        Description: Purpose of the document follows. -->

    <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
    <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

        <!-- ====================================================================== -->
        <!-- A P P E N D E R S -->
        <!-- ====================================================================== -->

        <!-- console -->
        <appender name="consoleAppender" class="org.apache.log4j.ConsoleAppender">
            <layout class="org.apache.log4j.PatternLayout">
                <param name="Threshold" value="INFO" />
                <param name="ConversionPattern"
                    value="%d{dd.MM.yyyy HH:mm:ss} *%-5p* %c{1}: %M - %m - (%F, line %L)%n" />
            </layout>
        </appender>

        <appender name="fileAppender" class="org.apache.log4j.RollingFileAppender">
            <!--  <param name="Threshold" value="INFO" />  -->
            <param name="File"
                value="C:/DEV_HOME/server/apache-tomcat-7.0.29/logs/headcount.log" />
            <param name="Append" value="true" />
            <param name="MaxFileSize" value="10MB" />
            <param name="MaxBackupIndex" value="10" />
            <layout class="org.apache.log4j.PatternLayout">
                <param name="ConversionPattern"
                    value="%d{dd.MM.yyyy HH:mm:ss} *%-5p* %c{1}: %m (%F, line %L)%n" />
            </layout>
        </appender>

        <!-- ====================================================================== -->
        <!-- L O G G E R S -->
        <!-- ====================================================================== -->

        <category name="org.springframework.jdbc.core.JdbcTemplate">
            <priority value="debug" />
        </category>

        <root>
            <level value="INFO" />
            <appender-ref ref="consoleAppender" />
            <appender-ref ref="fileAppender" />
        </root>

    </log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T16:47:47.100

将此文件保存在基本目录中，

src/com.yourproject.web... 然后：

src/log4j.xml

有用！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:10:10.813

我认为您应该发布打印异常堆栈跟踪的代码。
检查您是否使用`e.printStackTrace();`而不是`Logger.error("some message", e);`

# ruby-on-rails - Rails 操作 sql 数据以返回唯一的列值

> ID：12614904
> 
> 赞同：1
> 
> 时间：2012-09-27T05:54:26.937
> 
> 标签：ruby-on-rails

我有一个 RoR 应用程序，它在多个表之间进行连接并将结果集作为 json 返回给客户端。我需要帮助来弄清楚如何只发送唯一的列值。例如，如果您有一个员工和部门表，则对两者进行连接将返回：

```
Physics   John   
Physics   Joe
Math      Charlie
Math      Sheila 
```

如何将数据返回给删除重复值的客户端，例如

```
Physics => { John, Joe }
Math = > { charlie, Sheila } 
```

我想减少通过网络发送不必要的重复数据。

有什么想法吗？

编辑：

将其更改为此（在堆栈溢出时发现它）并且它起作用了：

```
@lec_hash = @lectures.inject({}) do | result, row |
    result[row.subject] = [] if result[row.subject].nil?
    result[row.subject] << row.name
    result
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:03:15.617

准备一个哈希，其中键是您的主题名称，值是选择主题的名称数组

```
hash = Hash.new {|h,k| h[k] = [] }
result.each do |row|
  hash[ row.subject]  << row.name
end 
```

**假设**： `result`是 AR 记录的数组，模型具有`subject`和`name`（人名）属性（列）

然后转换`hash.to_json`

# hibernate - JPA 中所有 NamedQueries 的列表

> ID：12614906
> 
> 赞同：4
> 
> 时间：2012-09-27T05:54:32.410
> 
> 标签：hibernate, jpa, named-query

我想在我的应用程序中获取所有 NamedQueries 的列表，并且我还想在运行时一般地调用它们。是否可以选择获取列表以及某种元数据（一般来说是某种反射）？

另一个线程为 NHibernate 提供了某种解决方案......即使使用 Hibernate 作为实现，在 JPA 也找不到类似的解决方案。

提前谢谢 El Subcomandante

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:55:05.207

我认为没有任何东西可以一步内置。但是您可以使用 JPA2 中的元模型以及一些简单的反射来做到这一点：

```
private static Set<NamedQuery> findAllNamedQueries(EntityManagerFactory emf) {
    Set<NamedQuery> allNamedQueries = new HashSet<NamedQuery>();

    Set<ManagedType<?>> managedTypes = emf.getMetamodel().getManagedTypes();
    for (ManagedType<?> managedType: managedTypes) {
        if (managedType instanceof IdentifiableType) {
            @SuppressWarnings("rawtypes")
            Class<? extends ManagedType> identifiableTypeClass = managedType.getClass();

            NamedQueries namedQueries = identifiableTypeClass.getAnnotation(NamedQueries.class);
            if (namedQueries != null) {
                allNamedQueries.addAll(Arrays.asList(namedQueries.value()));
            }

            NamedQuery namedQuery = identifiableTypeClass.getAnnotation(NamedQuery.class);
            if (namedQuery != null) {
                allNamedQueries.add(namedQuery);
            }
        }
    }
    return allNamedQueries;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-20T16:57:36.517

汤姆安德森的回答有一个错误：它试图在 JPA 实现的 ManagedType 类上找到注释，而不是实际的实体类。这是更正的版本。

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

import javax.persistence.EntityManagerFactory;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.metamodel.EntityType;

private static Set<NamedQuery> findAllNamedQueries(EntityManagerFactory emf) {
    Set<NamedQuery> allNamedQueries = new HashSet<NamedQuery>();

    Set<EntityType<?>> entityTypes = emf.getMetamodel().getEntities();
    for (EntityType<?> entityType : entityTypes) {
        Class<?> entityClass = entityType.getBindableJavaType();

        NamedQueries namedQueries = entityClass.getAnnotation(NamedQueries.class);
        if (namedQueries != null) {
            allNamedQueries.addAll(Arrays.asList(namedQueries.value()));
        }

        NamedQuery namedQuery = entityClass.getAnnotation(NamedQuery.class);
        if (namedQuery != null) {
            allNamedQueries.add(namedQuery);
        }
    }
    return allNamedQueries;
} 
```

这仍然是纯 JPA2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:49:50.833

我不明白这个问题，你已经给出了解决方案？您只需扫描类并使用反射。

这为您提供了一个类的所有注释。 [http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getAnnotations%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getAnnotations%28%29)

现在遍历该列表以获取 NamedQueries。我想你不必扫描所有的类，如果你阅读你的persistance.xml 文件并且只扫描你定义的实体就足够了。

这是一个详细的示例： [http ://tutorials.jenkov.com/java-reflection/annotations.html](http://tutorials.jenkov.com/java-reflection/annotations.html)

您应该能够将 Annotation 转换为 NamedQuery，然后简单地访问名称/查询属性。

塞巴斯蒂安

# sql-server-2008 - 如何将 SQL Server 2005 数据库迁移到 SQL Server 2008？

> ID：12614911
> 
> 赞同：0
> 
> 时间：2012-09-27T05:55:04.250
> 
> 标签：sql-server-2008, sql-server-2005

我正在尝试将我的一个 SQL Server 2005 数据库迁移到 SQL Server 2008，并带有各种选项，例如脚本数据库。

我能够创建表结构，但没有任何对象，如数据、函数、存储过程......

我怎样才能做到这一点？我试图复制`.mdf`并`.ldf`归档并将它们放入 2008 文件夹，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:17:43.167

**备份和恢复?!?!?**

将您的 SQL Server 2005 数据库备份到一个`.bak`文件，然后在您的 SQL Server 2008 机器上恢复该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:11:33.493

我收到了这个错误：

```
System.Data.SqlClient.SqlError: The backup set holds a backup of a database other than the existing ‘database_name’ database. (Microsoft.SqlServer.Smo) 
```

这可以通过选择选项 REPLACE 来解决...这就是我解决这个问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:40:06.160

如果您不再运行旧的 SQL Server 2005 安装，那么您将不得不使用 SSMS 2008 中的 Attach。因此，将 .mdf ja .ldf 复制到 SQL Server 2008 数据文件夹并在 SSMS -> 数据库 -> 右键单击-> 附加

如果您确实运行旧安装，则 marc_s 已经告知了唯一正确的方法

# ios - 我应该为手机和平板设备制作一个应用程序，还是各开发一个？

> ID：12614921
> 
> 赞同：2
> 
> 时间：2012-09-27T05:55:47.047
> 
> 标签：ios, iphone, ipad, compatibility

我必须为 ios 手机和平板电脑开发一个应用程序。应用程序逻辑相同，而 UI 完全不同。我想知道我应该如何处理这个问题：为两者制作 1 个大应用程序，或者为手机应用程序和平板电脑应用程序（然后将 2 个 ipa 作为市场上的 1 个应用程序上传）。

当我制作 1 个应用程序时，我应该检查它是否是代码中的手机或平板电脑以重定向到适当的活动。我还应该包含兼容性代码以使其能够为手机编译。如果我要制作 2 个应用程序，我不需要那个检查，我也不需要包含兼容性代码，所以应用程序会小很多。但在这种情况下，我将不得不在开发过程中不断地将应用程序逻辑从一个项目复制/粘贴到另一个项目。

所以这就是我想知道的原因，在这种情况下最好的做法是什么？我一直在搜索这方面的信息，但我只找到有关如何管理不同 xml 布局的文章，或者其中没有太多信息的文章。

我用谷歌搜索，发现这里有一篇关于 android 的文章[Android app for phone and tablet: 1 or 2 apps?](https://stackoverflow.com/questions/7468049/android-app-for-phone-and-tablet-1-or-2-apps)

但我需要了解**ios 应用程序**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:05:07.077

如果您想构建两个应用程序或通用应用程序，这实际上更像是一个营销问题。您是否希望用户只需购买一次并在两个平台上运行？iPad 版本是否做得更多，您宁愿收取额外费用？

一旦你决定在需要的地方共享代码很容易，如果你有两个单独的应用程序，你可以为 iPad 和 iPhone 分别创建一个目标 - 每个目标都可以共享任何你喜欢的代码、资源或数据模型. 让 iPad 和 iPhone 版本继承的最小应用程序委托也是一个好主意。

如果它是通用的，那么您最终可能会检查您所在的平台，但通常一旦您加载了主界面文件，您就不需要做太多的检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:10:31.830

将此代码放入您的应用委托类中，然后

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    UINavigationController *navController;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

         _iPhonehomeScreen = [[NFHomeScreen_iPhone alloc] initWithNibName:@"NFHomeScreen_iPhone" bundle:nil];
        navController = [[UINavigationController alloc] initWithRootViewController:_iphonehomeScreen];
        [navController setNavigationBarHidden:YES];
        self.window.rootViewController = navController;
    }
    else {
        _iPadhomeScreen = [[NFHomeScreen_iPad alloc] initWithNibName:@"NFHomeScreen_iPad" bundle:nil];
        navController = [[UINavigationController alloc] initWithRootViewController:_iPadhomeScreen];
        [navController setNavigationBarHidden:YES];
        self.window.rootViewController = navController;

    }

    [navController release];
} 
```

现在使用两个用于 iPad 和 iPhone 的 xib 以及相同的通用 .h 和 .m 文件。

# mysql - 加入 3 个表，查询无响应

> ID：12614929
> 
> 赞同：0
> 
> 时间：2012-09-27T05:56:16.433
> 
> 标签：mysql, sql

我在尝试加入 3 个表时遇到问题，每次在我的服务器上运行查询时，我都会遇到需要手动终止的巨大停顿。

这是表格限制

```
books   : isbn(PK)
books_a : id(PK), isbn, price, condition
books_l : id(PK), isbn, price, condition 
```

这是查询

```
SELECT 
   b.isbn, 
   a.price       AS a_price, 
   a.condition   AS a_condition, 
   l.price       AS l_price, 
   l.condition   AS l_condition 

FROM 
   books b  

   LEFT JOIN a_books a ON b.isbn  = a.isbn 
   LEFT JOIN l_books l ON b.isbn  = l.isbn 
```

我的查询可能有什么问题？（注意我在每个表中确实有超过 6,000 条记录）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:00:02.090

我敢打赌，这些列中的一个或一些没有被索引。`a_books.isbn`, `books.isbn`,`l_books.isbn`

尝试运行此语句，

```
ALTER table a_books ADD INDEX IDX_abk (isbn);
ALTER table books ADD INDEX IDX_bk (isbn);
ALTER table l_books ADD INDEX IDX_lbk (isbn); 
```

[*阅读这篇文章：* **数据库索引是如何工作的？**](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:58:56.217

问题可能是 isbn 没有索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:06:51.330

显然，索引是表中记录 > 6K 的罪魁祸首。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:24:45.270

另一个原因可能是在加入第一个表之后，第二个加入将是巨大的扫描。所以它会返回很多行。

# php - 使用 php ping 一个 ip，只得到平均响应时间。

> ID：12614930
> 
> 赞同：3
> 
> 时间：2012-09-27T05:56:24.000
> 
> 标签：php, parsing, ip, response, ping

任何人都知道在 php 中 ping IP 地址并仅回显平均 ping 时间的结果的简单干净方法吗？

例如，当我真正想要的是“35”时，我会得到“最小值 = 35ms，最大值 = 35ms，平均值 = 35ms”

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:01:40.007

您可以使用`exec()`-function 执行 shell 命令`ping`，如下例所示：

```
 <?php
    function GetPing($ip=NULL) {
     if(empty($ip)) {$ip = $_SERVER['REMOTE_ADDR'];}
     if(getenv("OS")=="Windows_NT") {
       $ping=explode(",", $exec);
       return $ping[1];//Maximum = 78ms
     }
     else {
      $exec = exec("ping -c 3 -s 64 -t 64 ".$ip);
      $array = explode("/", end(explode("=", $exec )) );
      return ceil($array[1]) . 'ms';
     }
    }

    echo GetPing();
    ?> 
```

来源： http: [//php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-18T15:34:31.577

我想你想要的是这样的：

```
const PING_REGEX_TIME = '/time(=|<)(.*)ms/';
const PING_TIMEOUT = 10;
const PING_COUNT = 1;

$os = strtoupper(substr(PHP_OS, 0, 3));
$url = 'www.google.com';

// prepare command
$cmd = sprintf('ping -w %d -%s %d %s',
    PING_TIMEOUT,
    $os === 'WIN' ? 'n' : 'c',
    PING_COUNT,
    escapeshellarg($url)
);

exec($cmd, $output, $result);

if (0 !== $result) {
    // something went wrong
}

$pingResults = preg_grep(PING_REGEX_TIME, $output); // discard output lines we don't need
$pingResult = array_shift($pingResults); // we wanted just one ping anyway

if (!empty($pingResult)) {
    preg_match(PING_REGEX_TIME, $pingResult, $matches); // we get what we want here

    $ping = floatval(trim($matches[2])); // here's our time
} else {
    // something went wrong (mangled output)
} 
```

这是一个仅从单个 ping 中获取 ms 的示例，但很容易对其进行调整以获得您想要的任何内容。您所要做的就是使用正则表达式、超时和计数常量。

您可能还想根据操作系统调整正则表达式（或添加更多），因为 Linux ping 将提供与 Windows 不同格式的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T06:10:14.260

不久前在网上找到了这个函数，对不起，我不记得在哪里归功于，但你可以将它与 for 循环一起使用来获得平均值：

```
function ping($host, $timeout = 10) 
{ 
    $output = array(); 
    $com = 'ping -n -w ' . $timeout . ' -c 1 ' . escapeshellarg($host); 
    $exitcode = 0; 
    exec($com, $output, $exitcode); 
    if ($exitcode == 0 || $exitcode == 1) 
    {
        foreach($output as $cline) 
        { 
            if (strpos($cline, ' bytes from ') !== FALSE) 
            { 
                $out = (int)ceil(floatval(substr($cline, strpos($cline, 'time=') + 5))); 
                return $out; 
            } 
        } 
    } 

    return FALSE; 
}

$total = 0;
for ($i = 0; $i<=9; $i++)
{
        $total += ping('www.google.com');
}

echo $total/10; 
```

只需根据需要更改 for 循环中的次数..

# oracle - 动态执行 dbms_utility.exec_ddl_statement

> ID：12614955
> 
> 赞同：2
> 
> 时间：2012-09-27T05:58:25.200
> 
> 标签：oracle, database

要求如下：

通过 Oracle Apex 应用程序，我需要在另一个 Oracle 数据库中删除用户/模式。即，使用 Oracle Apex 应用程序远程删除用户。

目前，我正在使用以下过程来完成此任务。但是，由于有很多远程数据库，所以，我想知道有没有办法使这个动态化，即动态传递数据库链接名称`DBMS_UTILITY.EXEC_DDL_STATEMENT`。因此，用户将传递用户名和数据库名，并且基于数据库名，该过程将连接到正确的数据库/数据库链接并删除给定的用户。如果还有其他方法可以完成此任务，请告诉我。

```
CREATE OR REPLACE 
    PROCEDURE drop_user_proc( 
    p_username VARCHAR2, 
    p_databasename VARCHAR2) 
IS 
    ddl_stmt VARCHAR2(100); 
BEGIN 
    IF p_databasename = ‘REMOTEDB1’ THEN 
        ddl_stmt := 'DROP USER '||p_username||' CASCADE'; 
        dbms_utility.exec_ddl_statement@remotedb1(ddl_stmt); 
END IF; 
END drop_user_proc; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:22:11.877

你可以试试这个：

```
CREATE OR REPLACE 
    PROCEDURE drop_user_proc( 
    p_username VARCHAR2, 
    p_databasename VARCHAR2) 
IS 
    ddl_stmt VARCHAR2(100); 
BEGIN 
    ddl_stmt := 'DROP USER '||p_username||' CASCADE'; 
    execute immediate 'begin dbms_utility.exec_ddl_statement@' || p_databasename || '(:ddl_stmt);  end;' using ddl_stmt;
END drop_user_proc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:22:00.507

您不能将数据库链接的名称传递给该`dbms_utility.exec_ddl_statement`过程。但是，您可以使用动态 SQL 来调用该过程。类似的东西（未经测试——我目前没有一个带有数据库链接的数据库可以方便地测试）

```
EXECUTE IMMEDIATE 'BEGIN dbms_utility.exec_ddl_statement@' || p_dblink ||
                  '(''' || ddl_stmt || '''); END;'; 
```

# opengl - GLSL - 对大量 3d 纹理进行采样

> ID：12614961
> 
> 赞同：0
> 
> 时间：2012-09-27T05:58:53.057
> 
> 标签：opengl, glsl, textures

我最近在 OpenGL 中使用 3d 纹理。我意识到，当您使用 3d 纹理时，您必须大量使用 texture3d()。这几乎是一个gpu杀手。glsl 中是否有任何功能可以让我对 3d 纹理的 VOLUME 进行采样？因此，我可以执行以下操作，而不是调用 texture3D() 32768 次：

```
texture3DVolume(3dtexture, vec3(0.5, 0.5, 0.5), vec3(0.2, 0.2, 0.2)); 
```

其中样品0.5 0.5 0.5，体积0.2 0.2 0.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:09:47.307

否：正如您自己注意到的那样，这将涉及对所有音量进行采样。

在 2D 中，您可以使用总面积表。它使您能够计算只有 4 个样本的“盒子”内矩阵的所有值的总和；我猜这个概念很容易扩展到 3D。

请注意，您将有一个非常昂贵的预处理步骤；你只能有平均值和总和，没有其他花哨的东西，比如几何平均值或中位数。

以下是 AMD 对不同用例的一些解释：http: [//developer.amd.com/media/gpu_assets/GDC2005_SATEnvironmentReflections.pdf](http://developer.amd.com/media/gpu_assets/GDC2005_SATEnvironmentReflections.pdf)

我想你也可以使用 mipmaps ：对 2x2x2 体积进行采样，对第一个 mipmap 进行采样……但这对于任意采样位置来说是开箱即用的。

# c++ - 奇怪的未定义参考错误

> ID：12614964
> 
> 赞同：0
> 
> 时间：2012-09-27T05:58:57.437
> 
> 标签：c++, linker-errors, sfml

好的，我将尝试详细描述我的问题。我已经开始使用 SFML 的 ziploading API 来从存档中读取游戏资源，我已将所有必需的头文件和源文件放在代码块中的项目中，因此我的项目包含以下内容：

```
Source files for game
ZipLoader.h
ZipLoader.cpp
ioapi.h
unzip.h
zconf.h
zlib.h 
```

所以在我的游戏菜单标题中，我尝试根据存档中的资源绘制游戏菜单，我有这个：

```
 #include <SFML/Graphics.hpp>
    #include "Globals.h"
    #include "ZipLoader.h"

class GameMenu
{
    private:
    Zip::File file();

} 
```

基本上，我尝试在其中初始化一个 zip 文件，以便可以在我声明菜单的 gameMenu.cpp 中从中加载。**但是**我在 ZipLoader.cpp 中遇到了一些非常奇怪的错误，如下所示：

```
src\ZipLoader.cpp|81|undefined reference to `unzOpen'|
src\ZipLoader.cpp|89|undefined reference to `unzLocateFile'|
src\ZipLoader.cpp|94|undefined reference to `unzOpenCurrentFile'|
src\ZipLoader.cpp|100|undefined reference to `unzGetCurrentFileInfo'|
src\ZipLoader.cpp|105|undefined reference to `unzReadCurrentFile'|
src\ZipLoader.cpp|109|undefined reference to `unzCloseCurrentFile'|
src\ZipLoader.cpp|110|undefined reference to `unzClose'| 
```

但我发现这是不可能的，我想我错过了这个库，但是我把它导入到给我错误的文件中，上面列出的所有方法都位于在`unzip.h`给我错误的文件中导入的文件中，如下所示：

```
#include "ZipLoader.h"
#include <SFML/System.hpp>
#include <iostream>
#include <fstream>
#include "unzip.h"

...
unzFile ZipHandle=unzOpen(DataFile); // error???? 
```

正如您在下面看到的，在 unzip.h 中，这些引用非常好：

```
extern unzFile ZEXPORT unzOpen OF((const char *path));
extern unzFile ZEXPORT unzOpen2 OF((const char *path,
                                    zlib_filefunc_def* pzlib_filefunc_def));
    extern int ZEXPORT unzClose OF((unzFile file)); 
```

这是迄今为止我在 C++ 程序中遇到的最奇怪的错误，当它就在那里时，它怎么可能是未定义的？（我使用的是 Windows XP SP3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:06:34.543

我想，您忘记将 zlib 添加到库列表中。

如果您使用的是 MSVC，请转到您的项目设置，打开链接器设置并将 zlib.lib（我相信这是 win32 的 libz 的文件名）添加到附加依赖项。

如果您使用的是 gcc，请将`-lzlib`（或者是`-lz`吗？）添加到您的命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:07:51.973

你在头文件中声明了你的函数，所以你不应该有编译错误。您的问题是，在链接过程中，您没有包括包含这些函数实现的库。

您必须知道这些文件在哪里并将它们包含在链接过程中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-09T11:14:23.813

我对 unzGoToFirstFile 有一个非常相似的问题。如果您下载 ZLib 源代码并执行简单的“grep -irl unzGoToFirstFile”，您会发现这些函数根本不是 ZLib 的一部分。然而，它们是 ZLib 源代码中名为 minizip 的贡献库的一部分。

将此添加到靠近底部的 ZLib CMakeLists.txt 中，它将创建一个名为“libunzip.a”的库，其中包含所需的 unzGoToFirstFile 等功能。只需将您的程序链接到那个，您就应该是金色的。

```
set(UNZIP_SOURCES "contrib/minizip/unzip.c"
"contrib/minizip/zip.c"
"contrib/minizip/ioapi.c")
set(UNZIP_HEADERS "contrib/minizip/unzip.h"
"contrib/minizip/zip.h"
"contrib/minizip/ioapi.h")

add_library(unzip STATIC 
"${UNZIP_SOURCES}"
"${UNZIP_HEADERS}")

target_link_libraries(unzip zlibstatic)

install(TARGETS unzip
RUNTIME DESTINATION "${INSTALL_BIN_DIR}"
ARCHIVE DESTINATION "${INSTALL_LIB_DIR}"
LIBRARY DESTINATION "${INSTALL_LIB_DIR}" )

install(FILES ${UNZIP_HEADERS} DESTINATION "${CMAKE_INSTALL_PREFIX}/include") 
```

# android - 自动发送电子邮件并附上附件

> ID：12614968
> 
> 赞同：2
> 
> 时间：2012-09-27T05:59:10.620
> 
> 标签：android, jakarta-mail

`JavaMail`我曾在 Android 中使用API 使用身份验证发送电子邮件，`Gmail`它确实运行良好，但现在我想附加一个文件并自动发送。

这是我自动收到发送电子邮件的链接：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:12:50.933

你可以使用`Multipart`实例来做到这一点。

尝试这样的事情

```
DataSource source = new FileDataSource(filename);
messageBodyPart.setDataHandler(new DataHandler(source));
messageBodyPart.setFileName(filename);
multipart.addBodyPart(messageBodyPart); 
```

现在将此`multipart`实例添加到您的`message`where message is object of `MimeMessage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T10:46:50.843

试试这个代码..

```
 public class SendAttachment{
        public static void main(String [] args){ 
 //to address
        String to="abc@abc.com";//change accordingly
        //from address
        final String user="efg@efg.com";//change accordingly
        final String password="password";//change accordingly 
         MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
       mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
      mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
      mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
      mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
      mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
      CommandMap.setDefaultCommandMap(mc); 
      //1) get the session object   
      Properties properties = System.getProperties();
      properties.put("mail.smtp.port", "465"); 
      properties.put("mail.smtp.host", "smtp.gmail.com");
        properties.put("mail.smtp.socketFactory.port", "465");
        properties.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.port", "465");

      Session session = Session.getDefaultInstance(properties,
       new javax.mail.Authenticator() {
       protected PasswordAuthentication getPasswordAuthentication() {
       return new PasswordAuthentication(user,password);
       }
      });

      //2) compose message   
      try{ 
        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(user));
        message.addRecipient(Message.RecipientType.TO,new InternetAddress(to));
        message.setSubject("Hii"); 
        //3) create MimeBodyPart object and set your message content    
        BodyPart messageBodyPart1 = new MimeBodyPart();
        messageBodyPart1.setText("How is This"); 
        //4) create new MimeBodyPart object and set DataHandler object to this object    
        MimeBodyPart messageBodyPart2 = new MimeBodyPart();
    //Location of file to be attached
        String filename = Environment.getExternalStorageDirectory().getPath()+"/R2832.zip";//change accordingly
        DataSource source = new FileDataSource(filename);
        messageBodyPart2.setDataHandler(new DataHandler(source));
        messageBodyPart2.setFileName("Hello"); 
        //5) create Multipart object and add MimeBodyPart objects to this object    
        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart1);
        multipart.addBodyPart(messageBodyPart2); 
        //6) set the multiplart object to the message object
        message.setContent(multipart ); 
        //7) send message 
        Transport.send(message); 
       System.out.println("MESSAGE SENT....");
       }catch (MessagingException ex) {ex.printStackTrace();}
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:06:33.453

使用此功能：

```
public synchronized void sendMail(String subject, String body, String sender, String recipients, String fileName) throws Exception {   
    try{

    MimeMessage message = new MimeMessage(session);   
   // DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));
    message.setFrom(new InternetAddress(sender));
    if (recipients.indexOf(',') > 0)   
        message.addRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.addRecipient(Message.RecipientType.TO, new InternetAddress(recipients));
    message.setSubject(subject); 

    MimeBodyPart messageBodyPart = new MimeBodyPart();

    messageBodyPart.setText(body);

    Multipart multipart = new MimeMultipart();
    multipart.addBodyPart(messageBodyPart);

    // Part two is attachment
    messageBodyPart = new MimeBodyPart();
    DataSource source = 
      new FileDataSource(fileName);
    messageBodyPart.setDataHandler(
      new DataHandler(source));
    messageBodyPart.setFileName(fileName);
    multipart.addBodyPart(messageBodyPart);

    // Put parts in message
    message.setContent(multipart);

    // Send the message
    Transport.send( message );

    }catch(Exception e){

    }
} 
```

# google-maps-api-3 - 启用 Google 地球插件的 Google Maps API v3 中的 MapTypeControlOptions 问题

> ID：12614969
> 
> 赞同：2
> 
> 时间：2012-09-27T05:59:11.880
> 
> 标签：google-maps-api-3, google-earth-plugin

我正在使用启用了 Google 地球插件的 Google Maps API V3。我正在尝试显示地图视图的四个选项（地形、卫星、带标签的卫星（又名混合）和地球。

最后一行注释掉（谷歌地球插件未启用）一切正常。当最后一行到位时，“mapTypeControlOptions”将全部被忽略。在这种情况下，我只是想指定 mapTypes，但如果我在该块中指定其他任何内容，它也会被忽略。

有没有解决方法或者我搞砸了什么？我已经玩了几天了，没有看到我可能会混淆什么。可以在以下位置找到与其他上下文相关的实时示例：[http ://grandlin.es:5000](http://grandlin.es:5000)

```
map = new google.maps.Map(document.getElementById('map'), {
    zoom: 13,
    center: new google.maps.LatLng(39.797, -105.776),
    streetViewControl: false,
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    mapTypeControlOptions: {
        mapTypeIds: [google.maps.MapTypeId.TERRAIN, google.maps.MapTypeId.HYBRID, google.maps.MapTypeId.SATELLITE] 
    }
});

//var googleEarth = new GoogleEarth(map); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T12:07:20.330

您可以使用[google-maps-utility-library](https://code.google.com/p/google-maps-utility-library-v3/)执行此操作。

请参阅[Google 地图 v3 的 Google 地球 API](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/docs/reference.html)页面。

甚至还有一个地图/地球集成的基本工作示例，允许您在 MAP、SATELLITE、EARTH 之间切换。

请参阅：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/examples/earth.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/examples/earth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:34:12.017

也许尝试使用它而不是 var googleEarth = .....

map.addMapType(G_SATELLITE_3D_MAP);

有关如何使用它的示例，请查看此页面上的源代码。

[http://earth-api-samples.googlecode.com/svn/trunk/demos/mapsapi/index.html](http://earth-api-samples.googlecode.com/svn/trunk/demos/mapsapi/index.html)

# function - Scala中的反函数

> ID：12614972
> 
> 赞同：7
> 
> 时间：2012-09-27T05:59:30.423
> 
> 标签：function, scala, inverse

有没有办法表达Scala中任何函数的逆？

例如，如果我有这样的功能`f`：

```
(x: Int) => x + 1 
```

我希望能够编写一个反函数`g`，例如：

```
(f(x): Int) => x // not a valid scala syntax 
```

或者

```
(x: Int) => inverse(f(x)) // inverse would return (x => x -1) 
```

你知道在 Scala 中做这种事情的方法吗？

注意：`x => x+1`仅用于示例。我正在寻找一种通用的方法来解决这种任务。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T06:25:42.387

不，这样的事情是不可能的。问题是并非所有*数学*函数都有逆。从关于[反函数](http://en.wikipedia.org/wiki/Inverse_function)的维基百科条目：

> 并非所有函数都有逆函数。要适用此规则，每个元素 y ∈ Y 必须对应不超过一个 x ∈ X；具有此属性的函数 ƒ 称为一对一，或信息保留或注入。

例如，平方根 ( ) 函数仅在 时是平方函数 ( )`sqrt`的逆函数，其中平方根函数是一对一的。我们可以说，平方根函数的负数是平方函数的逆，仅因为. 但这是平方函数的一个特殊性质，一般情况下肯定不是真的。`x^2``x >= 0``x < 0``x^2 = (-x)^2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:33:19.233

你不能表达一个函数的逆，但你可以表达它的结果的逆，也许这会适合你。

当您传递函数时，这可能很有用。

例如，如果您有一个函数`f: Int => Boolean`用作高阶函数的参数，则可以将其包装在另一个相同类型的函数中，该函数`x => !f(x)`只返回计算结果的倒数：

```
def select(ls: List[String], p: String => Boolean): List[String] =
  ls.remove(x => !p(x))
// select: (ls: List[String], p: String => Boolean)List[String]

val li = List("one", "two", "three")
// li: List[java.lang.String] = List(one, two, three)

/* using select with some conditions */
select(li, _.length() > 3)  // equivalent to select(li, x => x.length() > 3)
// res0: List[String] = List(three)
select(li, _.length() <= 3) // equivalent to select(li, x => x.length() <= 3)
// res1: List[String] = List(one, two)

/* using remove with the same conditions */
li.remove(_.length() > 3)  // equivalent to li.remove(x => x.length() > 3)
// res2: List[java.lang.String] = List(one, two)
li.remove(_.length() <= 3)  // equivalent to li.remove(x => x.length() <= 3)
// res3: List[java.lang.String] = List(three) 
```

注意：`remove`类中的方法`List`已弃用，`filterNot`应改为使用，但我认为在此示例`remove`中读起来更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T07:18:40.700

根据您的使用场景，您可以通过维护一个映射来完成此操作`(Function, Result) => Arguments`，然后调用一个方法，例如`inverse(f, r)`返回存储在映射中的参数。但是，这仅适用于 1）如果在需要反向值之前调用原始函数，以及 2）如果原始函数是单射的（正如 ddk 已经指出的那样）。

还涉及相当多的实现开销（例如，您可能需要一个专用映射`Function1`to `Function22`），特别是如果您想减少强加给函数实现者的样板代码量。[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)在这里可能会有所帮助，类似于[EJB3 的拦截器的](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/EJB3_Interceptors.html)注释也可能起作用。

但是，看起来好像使用场景必须是一个非常特殊的场景，才能证明您必须跳过所有的障碍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-08T13:38:12.690

从实用主义的角度来看，`unapply`方法可以用来表示反函数：

```
object f {
  def apply(x: Int) = x + 1
  def unapply(x: Int) = Some(x - 1);
}

val x = 1
val f(y) = f(x)

assert(x == y) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T02:50:23.380

我添加了一个答案，因为[另一个问题](https://stackoverflow.com/questions/38166190/is-it-possible-to-get-an-unbounded-map-function-on-a-set)被标记为这个问题的副本，但似乎还没有人提到这一点：***理论上***可以自动计算“逆”（从某种意义上说，它对输入执行详尽的搜索，如果在有限的时间内没有解决方案，则回答“无”）在无限的二进制数字序列上的函数：请参阅文章[“看似不可能的功能程序”](http://math.andrej.com/2007/09/28/seemingly-impossible-functional-programs/)（尽管它使用 Haskell，而不是 Scala）。

*当然，这种详尽搜索的实际*效用是另一回事。

# yii-extensions - 更新文本框值时，YII 显示闪烁消息

> ID：12614973
> 
> 赞同：1
> 
> 时间：2012-09-27T05:59:36.940
> 
> 标签：yii-extensions, yii-events

我在 CGrid 视图中有从数组生成的文本框（'header' => 'Points', 'type' => 'raw', 'name' => 'points', 'value' => '($this-> grid->owner->widget("application.extensions.jeditable.DsJEditableWidget", array("model" => $this->grid->dataProvider, "name" => "points_".$data->orderinfoID, " value" => ($data->points), "jeditable_type" => "text",

```
 ),true))',
    ), 
```

现在我想在有人更新该点时显示闪烁消息。在 Flash 消息中，用户应在页面顶部显示旧值（在文本框中）和新值（在文本框中新输入的值）。

谁能告诉我如何实现这一目标。

# rdlc - 该操作只能从钻取报告中执行

> ID：12614980
> 
> 赞同：0
> 
> 时间：2012-09-27T06:00:08.383
> 
> 标签：rdlc

```
 protected void ReportViewer1_Back(object sender, BackEventArgs e)
    {       
        GetReportData();
    } 
```

**该操作只能从钻取报告执行，** 当我使用报告查看器后退按钮事件重新加载父报告时会抛出此错误。

这是`GetReportData()`方法

```
protected void GetReportData()
    {
        try
        {
            DataSet dsreport = bd.bStatePerfomanceReport(Convert.ToInt32(ddlYear.SelectedValue), reportdetail.month, Convert.ToInt32(rdbCol.SelectedValue));
            ReportViewer1.Visible = true;
            ReportDataSource rds = new ReportDataSource();
            ReportViewer1.Reset();
            ReportViewer1.ProcessingMode = ProcessingMode.Local;
            LocalReport rep = ReportViewer1.LocalReport;
            rep.Refresh();
            rep.ReportPath = "rdlc/StateataGlance.rdlc";
            rds.Name = "dsReport_uspReport_StateataGlance";
            rds.Value = dsreport.Tables[0];
            rep.DataSources.Add(rds);

            ReportParameter[] parms = new ReportParameter[3];
            parms[0] = new ReportParameter("month", ddlMonth.SelectedItem.Text + ",  " + ddlYear.SelectedItem.Text, true);
            parms[1] = new ReportParameter("mo", ddlMonth.SelectedValue, true);
            parms[2] = new ReportParameter("year", ddlYear.SelectedValue, true);
            this.ReportViewer1.LocalReport.SetParameters(parms);
            rep.Refresh();
            ViewState["level"] = 0;
        }
        catch
        {
        }
    } 
```

及其在页面加载事件上的工作，但是当我在后退按钮事件上调用相同的方法时，它会抛出错误。

# c++ - 老板-工人模型设计

> ID：12614984
> 
> 赞同：0
> 
> 时间：2012-09-27T06:00:45.027
> 
> 标签：c++, multithreading, design-patterns, worker-process

我正在使用 Boss-Worker 模型模式开发代码。我有个疑问。Boss 将添加到的列表是 Boss 类的成员。为了让 Worker 能够访问它，我让 Worker 类继承自 Boss。

1）这是在老板和工人之间共享列表的正确方式吗？
2）我在我的代码中面临模棱两可的继承。我该如何解决？

**线程类**

```
#include <pthread.h>
class ThreadClass
{
public:
    virtual int start();
    virtual void join();
    virtual void execute() = 0; //Each derived class will implement this
    virtual ~ThreadClass() {}
    ThreadClass() {}
private:
    ThreadClass* Tptr;
}; 
```

**老板**

```
#include "ThreadClass.h"
#include <list>

class Boss : public virtual ThreadClass
{
public:
    virtual void execute();
    Boss() {}   
    ~Boss() {}  

protected:
    std::list<int> Mylist;   //To be shared with the worker
}; 
```

**工人**

```
#include "ThreadClass.h"
#include "Boss.h"
class Worker : public Boss, public ThreadClass  //Getting error:Ambiguous ThreadClass
{
public:
    virtual void execute();
    Worker() {} 
    ~Worker() {}    
}; 
```

Worker 继承自 Boss & ThreadClass 因为：

1) Worker 需要访问 Boss 的列表
2) Worker 需要 ThreadClass 的线程函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:40:45.877

> Boss 将添加到的列表是 Boss 类的成员。为了让 Worker 能够访问它，我让 Worker 类继承自 Boss。

这绝对*不是*一个类从另一个类继承的好理由。通常，当且仅当您可以在可以使用 a 的任何地方替换 a 时，才`Worker`应该继承自。从概念上讲，这里不是这种情况。`Boss``Worker``Boss`

如果您想提供对 then`Boss`的列表的访问权限`int`，如果`Worker`知道`Boss`它的提供者和访问者，`Boss`或者（可能）制作`Worker`一个`friend`of `Boss`。

如果您不想`Worker`知道`Boss`但对s有所`Boss`了解，请在构建时或稍后的合适时间将列表传递给s。`Worker``Boss``Worker`

提供对某物的访问并不是让一个类从另一个类派生的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:05:10.420

我会解耦所有的类并支持组合。两者都`Worker`可以`Boss`通过持有对它的引用来共享外部创建的列表。关于线程功能，C++11 和 boost.thread 方法是拥有采用“可调用”实体的线程类型。我认为这种解耦方法比您建议的双重继承更干净。

顺便说一句，您可能需要为此推出自己的并发列表类。`std::list`如果不同的线程同时读取，则至少对来自其中一个线程线程的写入是不安全的。

```
class ConcurrentList { .... };
class Boss
{
  ConcurrentList& list_;
 public:
  Boss(ConcurrentList& l) : list_(l)
  // other methods
};
class Worker
{
  ConcurrentList& list_;

 public:
  Worker(ConcurrentList& l) : list_(l)
  // other methods
};
class Thread
{
  // implement a call-cack mechanism
}; 
```

# iphone - 如何在表格视图控制器中显示来自 2 个数组的项目

> ID：12614987
> 
> 赞同：0
> 
> 时间：2012-09-27T06:00:48.460
> 
> 标签：iphone, objective-c

我是IOS开发的新手。我被困在一个我想在表格视图控制器中显示某些东西的地方。在第一行中，我有一个名为“All Fences”的名称，对于下面的其余行，我有一个包含所有其他名称的数组。

这就是我正在做的事情：

```
-(void) viewDidLoad{
[super viewDidLoad];
array=[[NSMutableArray alloc] init];
[array addObject:@"All Fences"];
[self fetchOtherArray];
}
-(void) fetchOtherArray{
// I have array2 here
} 
```

你能告诉我如何让所有东西都显示出来吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:05:15.813

如果该数组有一个字符串并且您在头文件中定义了array2，请执行此操作

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{        
     return  [array2 count]+1;
} 
```

在 cellForRowAtIndexPath 中使用此检查：

```
if(indexPath.row=0){
 // set name "All Fences"
  cell.textLabel.text=[NSString stringWithFormat:@"%@",[array objectAtIndex:indexPath.row]];
}
else{
  // set from another array
   cell.textLabel.text=[NSString stringWithFormat:@"%@",[array2 objectAtIndex:indexPath.row-1]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:23:34.193

你不能将你的array2 合并到array1 中吗？或采用一些临时数组并合并 arra1 和 arra2，这样您就可以更轻松地从单个数组中获取值，并且您可以在 didselectrowatindexpath 中对单个数组执行操作。

看看这个，这样你就可以有想法了。

```
NSMutableArray *arr1 = [[NSMutableArray alloc] init];
[arr1 addObject:@"first"];                             // your first array
NSMutableArray *arr2 = [[NSMutableArray alloc] init];
[arr2 addObject:@"second"];                            // your second array

 [arr1 addObject:[arr2 objectAtIndex:0]];
 NSLog(@"arr1 >> %@",arr1);

// mediator array
NSMutableArray *arr_temp = [[NSMutableArray alloc]initWithObjects:[arr1 objectAtIndex:0],[arr2 objectAtIndex:0] ,nil];
NSLog(@"arr_temp >>%@",arr_temp); 
```

我坚持要您将两个数组值都存储在临时数组中。就像您可以在代码中看到的第二种方式一样，如果您不想修改您的 array1 以便以后重用。

# api - salesforce-enterprise-wsdl 特定于组织？

> ID：12614992
> 
> 赞同：0
> 
> 时间：2012-09-27T06:01:25.157
> 
> 标签：api, wsdl, salesforce

我在 salesforce 中创建了两个开发人员帐户。我想知道我是否可以使用单一的“企业 WSDL”用于 salesforce api 来连接到两个 salesforce 帐户。

我有疑问是因为他们下载 wsdl 文件的链接。链接名称是“**生成**企业 WSDL”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:37:12.817

仅当两个组织中的模型（自定义对象和字段）相同时，wsdl 才会相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:06:08.390

企业 WSDL：

它是一个强类型的 wsdl。

这说明，一旦您在特定组织中生成了这个 wsdl，那么它应该只连接到该组织。原因是，它是面向模式的。如果两个组织都具有相同的架构，那么它可以连接。

合作伙伴 WSDL：

它是松散类型的 wsdl。

一旦您在一个组织中生成了此 wsdl，我们就可以连接到任何其他组织。

但是两个 wsdl 在集成时都需要用户名、密码、安全令牌和端点 URL。

# php - Magento 或 Zend 是否缓存数据库连接字符串？

> ID：12614997
> 
> 赞同：0
> 
> 时间：2012-09-27T06:02:19.117
> 
> 标签：php, mysql, zend-framework, magento, failover

我有一个在非常标准的 Apache/Zend 平台上运行的 Magento 应用程序。我通过修改 local.xml 将 Magento 指向一个新的数据库，但它似乎并没有兑现我的更改，即使在重新启动应用程序之后也是如此。

更具体地说，我有 db1 和 db2。我将 Magento 更改为指向 db2，但应用程序继续指向 db1。事实上，我可以完全关闭 db2，即使应用程序指向 db2，它也不在乎......继续运行就好了。如果我关闭 db1，应用程序将失败，即使它的配置指向 db2。

我希望它只是 Magento 或 Zend 中某个我不知道的缓存设置，但我发现它在应用程序重启后仍然存在很奇怪。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T07:01:43.380

是的，整个 Magento 配置树（其中`local.xml`的一部分）都被缓存了。使用 UI`System -> Cache Management`清除配置缓存，或手动清除缓存存储（即删除 `var/cache/*'）

# c++ - C++ 中的模板类

> ID：12614998
> 
> 赞同：0
> 
> 时间：2012-09-27T06:02:22.893
> 
> 标签：c++, templates, vector

下面是我的代码。我正在使用 GNU G++ 编译器。我收到错误“main.cpp: In function 'int main()': main.cpp:12:9: error: 'class hash' has no member named 'printVectorContents'”

我知道我忽略了一些愚蠢的东西，我就是不能把我的手指放在它上面。有什么帮助吗？

```
int main()
{
    std::cout << "Yeah you did dat"<<std::endl;
    hash<int> newHash;
    newHash.printVectorContents();
    std::cin.get();
    return 0;
} 
```

和我的模板类...

```
template <class dataTypeClass> class hash{
private:
    std::vector <dataTypeClass> hashVector;
    std::string mName;
public:
    hash(){}
    hash(std::string aName = "unnamedHash"):mName(aName),hashVector(100,NULL){}
    ~hash(){std::cout<<"Hash "<<mName<<"destructing!";}
    void addHashItem(dataTypeClass aHashItem, std::string akey){}
    int hashFunction(dataTypeClass hashItem){return 0;}
    void printVectorContents()
    {
        for (typename std::vector<dataTypeClass>::iterator i = hashVector.begin(); i<hashVector.rend(); i++)
        {
            std::cout<< *i << std::endl;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:15:24.700

1.  `hash`是一个通用名称， make it`myhash`等或将其放入自己的名称空间以避免名称冲突。

2.  删除`hash(){}`. 您已经有一个带有默认参数的构造函数，当您声明时`hash<int> myhash;`，它不知道要调用哪个构造函数。

3.  更改`i<hashVector.rend()`为`i != hashVector.end()`。

4.  更改`hashVector(100,NULL)`为`hashVector(100)`。

# python - facebook 个人资料模型的问题

> ID：12614999
> 
> 赞同：0
> 
> 时间：2012-09-27T06:02:35.867
> 
> 标签：python, django, django-models, django-facebook

我正在将 facebook_connect 与我的应用程序一起使用。

我想将用户配置文件模型导入我的应用程序.....但这给了我一个错误

**从 facebook_connect.models 导入 FacebookProfileModel**

**ImportError：无法导入名称 FacebookProfileModel**

我的model.py是： -

```
from facebook_connect.models import FacebookProfileModel
class MyCustomProfile(FacebookProfileModel):
    user = models.OneToOneField('auth.User') 
```

我第一次使用这个功能，我正在使用这个[文档](http://django-facebook.readthedocs.org/en/latest/index.html)作为参考。所以任何人都可以在我错的地方帮助我，或者我必须在我的模型中添加一些东西。

*谢谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:49:41.757

我很确定您的导入语句不正确，不应该`django_facebook`是`facebook_connect`.

从文档：

```
from django_facebook.models import FacebookProfileModel

class MyCustomProfile(FacebookProfileModel):
    user = models.OneToOneField('auth.User')
    .... 
```