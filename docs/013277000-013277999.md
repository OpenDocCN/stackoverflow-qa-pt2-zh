# StackOverflow 问答 13277000-13277999

# python - 在 Python 中删除/启用根权限打开文件

> ID：13277004
> 
> 赞同：3
> 
> 时间：2012-11-07T19:44:25.477
> 
> 标签：python, root

在 /tmp 中打开文件时，我遇到了关于删除 root 权限的问题。这是有问题的行：

```
open(filepath, 'wb') 
```

当程序未使用 sudo 命令运行时，一切正常，这是我如此 os.stat 时的权限

```
posix.stat_result(st_mode=17407, st_ino=261652, st_dev=64512L, st_nlink=206, st_uid=1000, st_gid=1000, st_size=12288, st_atime=1352314677, st_mtime=1352316340, st_ctime=1352316340) 
```

使用 sudo 命令运行程序时遇到问题。我尝试通过以下方式放弃特权

```
os.setegid(int(os.getenv("SUDO_GID")))
os.seteuid(int(os.getenv("SUDO_UID"))) 
```

并重新启用它们

```
os.seteuid(0)
os.setegid(0) 
```

错误信息是

```
IOError: [Errno 13] Permission denied: 
```

os.stat 产量

```
posix.stat_result(st_mode=17407, st_ino=261652, st_dev=64512L, st_nlink=204, st_uid=1000, st_gid=1000, st_size=4096, st_atime=1352314677, st_mtime=1352316329, st_ctime=1352316329) 
```

理想情况下，我希望运行一个特定的功能，就好像用户从未通过相应地删除和启用 root 权限来调用 sudo 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:48:52.270

您可能需要在以某种方式产生的进程中从 root 更改，因为如果您放弃 root，您将无法再次将其取回。您可以尝试为此使用 os.fork() 。

```
import os

def drop_permissions():
    os.setegid(int(os.getenv("SUDO_GID")))
    os.seteuid(int(os.getenv("SUDO_UID")))

def call_without_permissions(func, *args, **kw):
    in_parent = os.fork()
    if not in_parent:
        drop_permissions()
        func(*args, **kw)
        os._exit(0)
    else:
        os.waitpid(0) 
```

# jquery - 使用 jquery .ajax 设置超时

> ID：13277007
> 
> 赞同：0
> 
> 时间：2012-11-07T19:44:39.907
> 
> 标签：jquery

我有一些很好用的ajax 代码。单击按钮后，它`doAjax`每 2 秒调用一次该函数，直到它收到来自服务器的消息（成功为 text `Initializing...please wait`）。

我要添加的是超时，以防服务器关闭或其他情况。所以我添加了超时和错误功能：

```
$(document).on("click", ".play", function() {
function doAjax(){
 $.ajax({
    url: 'index.php',
    success: function(data) {
        if (data == 'Initializing...please wait')
        {
            $('#quote p').html(data).css({'border': '1px solid', 'margin': '10px 0px'});
            setTimeout(doAjax, 2000);
        }
    },
    error: function(jqXHR, strError) {
        if(strError == 'timeout')
        {
          $('#quote p').html("Oops! Not found...").css({'border': '1px solid'});
        }
    },
    timeout: 8000
 });
}
doAjax();
}); 
```

该代码仍然有效，但我从未看到 8 秒后发生超时。我尝试删除递归，但仍然有同样的问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:51:47.193

尝试在 ajaxSetup 方法中设置：

```
$.ajaxSetup({
     timeout: 10000,
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:01:13.640

只是一个疯狂的猜测，首先尝试从您的 ajax 调用中删除递归，然后查看您的超时是否按要求工作。

另外，为什么你的函数调用中有你的函数定义？您应该在外部定义函数，即单击调用，然后从内部调用它。

# c - 尝试将数字存储在数组中并通过从文件中读取来显示它们

> ID：13277009
> 
> 赞同：0
> 
> 时间：2012-11-07T19:44:45.803
> 
> 标签：c

我试图仅从名为 Store-1.txt 的文件中读取数字。该文件包含以下内容：“coffee 3Mugs -3Soap 10”
我使用的是`fscanf()`函数而不是`getc()`. 我的代码无法编译。我哪里错了。PS：我是C新手。请耐心等待。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a[20];
    int i,j;

    FILE *fp;
    fp=fopen("C:/Users/PSN/Desktop/Store-1.txt","r");
    if(fp>0)
    {
        for(i=0;i<4;i++)
        {
            fscanf(fp,"%d",&a[i])
        }
    }
    for(j=0;j<3;j++)
    {
        printf("%d", a[j]);
    }

    fclose(fp);

    system("PAUSE");  
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:51:07.963

此行缺少分号。

```
fscanf(fp,"%d",&a[i]) 
```

应该：

```
fscanf(fp,"%d",&a[i]); 
```

* * *

如果您只想读取文件第二列中的数字，则可以读取第一列并忽略它。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a[20];
    int i,j;
    char str[256];

    FILE *fp;
    fp=fopen("C:/Users/PSN/Desktop/Store-1.txt","r");
    if(fp>0)
    {
        for(i=0;i<3;i++)
        {
            fscanf(fp, "%s", str); // read the first column & ignore
            fscanf(fp,"%d",&a[i])
        }
    }
    for(j=0;j<3;j++)
    {
        printf("%d", a[j]);
    }

    fclose(fp);

    system("PAUSE");  
    return 0;
} 
```

请注意，我将循环从 4 更改为 3，因为您只有 3 行。更好的方法是不对读取的行进行硬编码，直到文件末尾。但这取决于您输入文件的格式以及您要读取多少个值等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:51:29.957

尝试：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a[20];   
    int i,j;  

    FILE *fp;
    fp=fopen("C:/Users/PSN/Desktop/Store-1.txt","r");
    if(fp>0)
    {
        for(i=0;i<4;i++)
        {
            fscanf(fp,"%d",&a[i]); // <You missed the ; here
        }
    }

    for(j=0;j<3;j++)
    {
        printf("%d", a[j]);
    }

    fclose(fp);

    system("PAUSE");  
    return 0;
} 
```

巧合的是，这是缩进的一个很好的例子...... :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:04:42.867

如果您的输入文件“store-1.txt”如下所示：

```
coffee 3
Mugs -3
Soap 10 
```

然后试试这个：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a[20];
    int i;  

    FILE *fp;
    fp=fopen("store-1.txt","r");

    if(fp>0) {
        for(i=0;i<3;i++) {
            fscanf(fp,"%*s %d", &a[i]);
        }
    }
    for(i=0;i<3;i++) {
        printf("%d\n", a[i]);
    }

    fclose(fp);

    return 0;
} 
```

应该让你朝着正确的方向前进......

note`%*s`告诉 fscanf 有一个字符串但忽略它

预期输入的替代方案：

```
coffee 3Mugs -3Soap 10 
```

可能：

```
int main()
{
    int a[20];
    int i,j;  

    FILE *fp;
    fp=fopen("store-1.txt","r");

    fscanf(fp, "%*s%d%*s%d%*s%d", word, &a[0], word, &a[1], word, &a[2]);

    /* if(fp>0) { */
    /*     for(i=0;i<3;i++) { */
    /*         fscanf(fp,"%s %d",word, &a[i]); */
    /*     } */
    /* } */
    for(j=0;j<3;j++) {
        printf("%d\n", a[j]);
    }

    fclose(fp);

    return 0;
} 
```

这将适用于您的输入文件，但可能不像您想要的那样可扩展？

# java - 迷宫求解器循环问题java

> ID：13277011
> 
> 赞同：2
> 
> 时间：2012-11-07T19:45:02.050
> 
> 标签：java, maze

所以基本上我想做的是用左手规则创建一个迷宫求解算法，但我遇到了一个我似乎无法通过的问题。

前两个代码是我正在使用的代码，我遇到的问题是，当我尝试循环 if 语句时，它只是继续画一条直线而不是左转（在这种情况下）然后循环回到起点并画一条线，直到它再次撞到墙上。请注意，我知道这不是成品，我只是想确保第一个左转并且循环正常工作。

```
import se.lth.cs.ptdc.window.SimpleWindow;
import se.lth.cs.ptdc.maze.*;

public class MazeTurtle extends Turtle {
protected int Maze;

public MazeTurtle(SimpleWindow w, int x, int y) {
    super(w, x, y);
}

public void walk(Maze maze) {
    Maze m = new Maze(1);
    Turtle t = new Turtle(w, m.getXEntry(), m.getYEntry());
    t.penDown();

    while(true){
        if(m.wallAtLeft(getDirection(), getX(), getY())){
            t.forward(1);
        }

        if(m.wallAtLeft(getDirection(), getX(), getY())){

            t.left(90);
        }

            /** The "wallInFront" could be ignored for now */
        if(m.wallInFront(getDirection(), getX(), getY())) {

            t.left(-90);
        }
        if(m.wallInFront(getDirection(), getX(), getY())){
            t.forward(1);
        }

         SimpleWindow.delay(10);
    }
}
} 
```

这是尝试使用给定算法解决迷宫的“测试”：

```
import se.lth.cs.ptdc.window.SimpleWindow;
import se.lth.cs.ptdc.maze.*;

public class MazeTest {

public static void main(String args[]) {

    Maze m = new Maze(1);
    SimpleWindow w = new SimpleWindow(600, 600, "MazeTest");
    MazeTurtle t = new MazeTurtle(w, m.getXEntry(), m.getYEntry());
    t.penDown();
    m.draw(w);
    t.walk(m);
}

} 
```

这是我所指的迷宫类：http: [//pastebin.com/gxSeEc2U](http://pastebin.com/gxSeEc2U)

还有我正在使用的海龟类：http: [//pastebin.com/0RqbVudn](http://pastebin.com/0RqbVudn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:10:45.803

我很确定现在应该可以解决了

```
while ((m.atExit(x1, y1)) == false) {
        if (m.wallAtLeft(dir, x1, y1) == true) {
            t.forward(1);
            SimpleWindow.delay(10);
        }

        else if (m.wallAtLeft(dir, x1, y1) == false) {
            t.left(90);
            t.forward(1);
            SimpleWindow.delay(10);
        }

        if (m.wallInFront(dir, x1, y1) == true) {
            t.left(-90);
            t.forward(1);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:47:10.337

你很困惑，因为“左边的墙”给出了相对于乌龟所面对的位置的答案。

使用您当前的算法....

*   如果左边有墙，你就往前走。
*   然后，如果左边有墙，向左转 90 度。
*   （此时您将面对墙壁。）
*   然后，因为你面前有一堵墙，你会向右转90度。
*   然后，如果你面前有一堵墙，你就会向前走。
*   永远重复。

每当你因为左边有一堵墙而左转时，你会立即右转，因为现在墙就在你面前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T21:02:27.707

```
 while (true) {
        if (m.wallAtLeft(getDirection(), getX(), getY())) {
            if (m.wallInFront(getDirection(), getX(), getY())) {
                t.left(-90);
            } else {
                t.forward(1);
                SimpleWindow.delay(10);
            }
        } else {
            t.left(90);
            t.forward(1);
            SimpleWindow.delay(10);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:54:57.433

试试下面的。这应该检查左侧是否有墙，如果有则前进1。如果左边没有墙，它会左转 90 度并向前移动 1。

```
if(m.wallAtLeft(getDirection(), getX(), getY())){
    t.forward(1);
} else {
    t.left(90);
    t.forward(1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T20:24:38.573

我对Java相当陌生，但我会尝试这样的事情

```
for (int i=0; i<500; i++) {
        SimpleWindow.delay(10);

        if (m.wallInFront(getDirection(), getX(), getY()) == false) {
            t.forward(1);   
        }

        if (m.wallInFront(getDirection(), getX(), getY()) == true) {
            t.left(90);
        }
} 
```

为了不撞墙

# c# - 将字符串转换为 Web 控件并在容器中定位变量

> ID：13277012
> 
> 赞同：0
> 
> 时间：2012-11-07T19:45:10.910
> 
> 标签：c#, asp.net, web-controls

使用 VWD 2010 C#。默认.aspx(.cs)。
会发生什么：一个按钮用 改变标签的颜色`ID = "Day31"`。鉴于此示例是一个月的第 31 天。按钮和标签位于“MainContent”内的表格内。

```
protected void Red_Click(object sender, EventArgs e)
{
    ContentPlaceHolder MainContent = Page.Master.FindControl("MainContent") as   ContentPlaceHolder;
    int theday;
    theday = System.DateTime.Now.Day; // example the day is 31st
    string str="Day"+theday;
    ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + str+ "');", true);
    Label dayLabel = FindControl(str) as Label;

    dayLabel.BackColor = System.Drawing.Color.Red; // this line error, "Null"
} 
```

问题：为什么`Null`这行代码会出现错误信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:53:03.460

它是 null 或者是因为在该方法所在的容器中没有具有该特定 ID 值的控件，或者具有该 ID 值的控件不是 a `Label`，而是某种其他类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:03:27.830

如果你这样做`Label dayLabel = MainContent.FindControl(str) as Label;`，它应该工作。

# facebook - 连接或未连接时 Facebook 点赞数不同

> ID：13277021
> 
> 赞同：0
> 
> 时间：2012-11-07T19:45:28.153
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

我最近在我的网站上遇到了一个问题（由于 11 月 7 日可能会发生重大变化？）这里是：当我连接到 Facebook 时，我可以看到 Facebook 喜欢该页面的真实数量（2,2K）。当我没有连接到 Facebook 时，我只在同一页面上看到 830 个赞...

如果我决定点击，Facebook 会要求我连接，我会这样做，并且它喜欢我的页面，并且数量变为 2,2K...

有人可以帮我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:39:58.973

我在 Facebook 错误网站上打开了一个错误：

[https://developers.facebook.com/bugs/298333143611066](https://developers.facebook.com/bugs/298333143611066)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:32:59.870

你能提供一个行为的 URL 吗？您是在使用“喜欢”的 HTML5 插件还是这是实际的 Facebook 页面网址？当您在隐身窗口中打开页面 url 时会发生什么？

您看到的行为可能是由于几个原因。

1）like插件使用的URL在连接时会略有变化。确保使用规范的 URL。

2）某种隐私设置。尝试使用 Facebook Graph API Explorer。在没有访问令牌的情况下查询您的页面，然后使用有效的访问令牌。与您在插件中看到的有什么不同吗？ [https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

3) Facebook 错误。已知会发生，请尝试查看他们的错误数据库： [https ://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

# iphone - iOS 上的核心图形性能

> ID：13277031
> 
> 赞同：34
> 
> 时间：2012-11-07T19:46:02.593
> 
> 标签：iphone, ios, performance, core-graphics, quartz-2d

# 概括

我正在为 iOS 开发一款相当简单的 2D 塔防游戏。

到目前为止，我一直在专门使用 Core Graphics 来处理渲染。应用程序中根本没有图像文件（还）。我在做相对简单的绘图时遇到了一些重大的性能问题，我正在寻找关于如何解决这个问题的想法，而不是转向 OpenGL。

# 游戏设置

在高层次上，我有一个 Board 类，它是 的子类`UIView`，用于表示游戏板。游戏中的所有其他对象（塔、小兵、武器、爆炸等）也是 的子类`UIView`，并在创建时作为子视图添加到 Board。

我将游戏状态与对象内的视图属性完全分开，并且每个对象的状态都会在主游戏循环中更新（由`NSTimer`60-240 Hz 触发，取决于游戏速度设置）。该游戏完全可以玩，无需绘制、更新或动画视图。

我使用`CADisplayLink`计时器以本机刷新率 (60 Hz) 处理视图更新，该计时器调用`setNeedsDisplay`需要根据游戏状态变化更新其视图属性的棋盘对象。板上的所有对象都覆盖`drawRect:`以在其框架内绘制一些非常简单的 2D 形状。因此，例如，当一个武器被激活时，它会根据武器的新状态重新绘制自己。

# 性能问题

在 iPhone 5 上进行测试，板上总共有大约 2 打游戏对象，帧速率明显低于 60 FPS（目标帧速率），通常在 10-20 FPS 范围内。随着屏幕上的更多动作，它从这里开始走下坡路。而在 iPhone 4 上，情况更糟。

使用 Instruments，我确定只有大约 5% 的 CPU 时间用于实际更新游戏状态——其中绝大多数用于渲染。具体来说，该`CGContextDrawPath`函数（据我了解，它是矢量路径的光栅化完成的地方）占用了大量的 CPU 时间。有关详细信息，请参阅底部的仪器屏幕截图。

从对 StackOverflow 和其他网站的一些研究来看，Core Graphics 似乎无法满足我的需求。显然，描边矢量路径非常昂贵（尤其是在绘制不透明且 alpha 值 < 1.0 的东西时）。我几乎可以肯定 OpenGL 会解决我的问题，但它的级别很低，我对不得不使用它并不感到兴奋——对于我在这里所做的事情来说，它似乎不是必需的。

# 问题

**是否有任何优化我应该考虑尝试从 Core Graphics 中获得流畅的 60 FPS？**

## 一些想法...

有人建议我考虑将我的所有对象都绘制到一个单独`CALayer`的对象上，而不是让每个对象单独存在`CALayer`，但我不相信这会根据 Instruments 显示的内容有所帮助。

就个人而言，我有一个理论，即使用`CGAffineTransforms`来做我的动画（即`drawRect:`一次绘制对象的形状，然后在后续帧中进行变换以移动/旋转/调整其图层的大小）将解决我的问题，因为这些直接基于OpenGL。但我认为这样做不会比直接使用 OpenGL 更容易。

## 示例代码

为了让您了解我正在做的绘图水平，这是我的`drawRect:`一个武器对象（从塔发射的“光束”）的实现示例。

*注意：此光束可以“重新定位”并且它穿过整个电路板，因此为简单起见，它的框架与电路板的尺寸相同。然而，板上的大多数其他对象都将其框架设置为可能的最小外接矩形。*

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef c = UIGraphicsGetCurrentContext();

    // Draw beam
    CGContextSetStrokeColorWithColor(c, [UIColor greenColor].CGColor);
    CGContextSetLineWidth(c, self.width);
    CGContextMoveToPoint(c, self.origin.x, self.origin.y);
    CGPoint vector = [TDBoard vectorFromPoint:self.origin toPoint:self.destination];
    double magnitude = sqrt(pow(self.board.frame.size.width, 2) + pow(self.board.frame.size.height, 2));
    CGContextAddLineToPoint(c, self.origin.x+magnitude*vector.x, self.origin.y+magnitude*vector.y);
    CGContextStrokePath(c);

} 
```

## 仪器运行

下面是让游戏运行一段时间后的 Instruments：

***该类具有上面示例代码部分中显示`TDGreenBeam`的确切实现。`drawRect:`***

**[全尺寸截图](https://dzwonsemrish7.cloudfront.net/items/2W1f0K3P0r1O2t2p3A0N/Screen%20Shot%202012-11-07%20at%2010.50.37%20AM.png?v=6ad5b11f)** ![Instruments 运行游戏，扩展了最重的堆栈跟踪。](../Images/8fe25255d12d241c738faea61b92fc21.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-07T21:32:31.837

核心图形工作由 CPU 执行。然后将结果推送到 GPU。当您打电话时，`setNeedsDisplay`您表示需要重新进行绘图工作。

假设您的许多对象保持一致的形状并且只是移动或旋转，您应该简单地调用`setNeedsLayout`父视图，然后将该视图中的最新对象位置推送到该属性`layoutSubviews`，可能直接推送到`center`属性。仅仅调整位置不会导致需要重绘的东西；合成器将简单地要求 GPU 再现它在不同位置已有的图形。

一个更通用的游戏解决方案可能是忽略`center`,`bounds`而`frame`不是初始设置。只需推送您想要的仿射变换，可能是使用[这些助手](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/doc/c_ref/CGAffineTransform)`transform`的某种组合创建的。这将允许您在没有 CPU 干预的情况下随意重新定位、旋转和缩放对象——这一切都将由 GPU 工作。

如果你想要更多的控制，那么每个视图都有一个`CALayer`自己的视图，`affineTransform`但它们也有一个`sublayerTransform`与子层的变换相结合的视图。因此，如果您对 3d 如此感兴趣，那么最简单的方法是在超层上加载合适的透视矩阵`sublayerTransform`，然后将合适的 3d 变换推送到子层或子视图。

这种方法有一个明显的缺点，即如果您绘制一次然后按比例放大，您将能够看到像素。您可以`contentsScale`提前调整图层以尝试改善这一点，但否则您只会看到允许 GPU 继续进行合成的自然结果。`magnificationFilter`如果要在线性过滤和最近过滤之间切换，图层上有一个属性；线性是默认值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T19:58:05.217

很有可能，你正在透支。即绘制冗余信息。

因此，您需要将视图层次结构分解为层（正如您也提到的）。仅更新/绘制需要的内容。这些层可以缓存合成的中间层，然后 GPU 可以快速合成所有这些层。但是您需要小心仅绘制您需要绘制的内容，并且仅使实际更改的图层区域无效。

**调试它：**打开“Quartz Debug”并启用“Flash Identical Screen Updates”，然后在模拟器中运行您的应用程序。你想尽量减少那些彩色的闪光。

一旦修复了过度绘制，请考虑您可以在辅助线程上渲染什么（例如`CALayer.drawsAsynchronously`），或者您如何处理合成中间表示（例如缓存）或光栅化不变层/矩形。执行这些更改时要小心衡量成本（例如内存和 CPU）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:20:25.777

如果您的代码“必须在每一帧上重绘”，那么最好考虑如何使用图形硬件来实现相同的东西，而不是每次都回调到您的代码中重绘 CALayer。

例如，对于您的线条示例，您可以创建由一系列图块组成的渲染逻辑。填充的中心部分可以是一个实体图块，您将其缓存为 CALayer，然后一遍又一遍地绘制以将该区域填充到某个高度。然后，有另一个 CALayer，它是光线的边缘，它的 alpha 淡化为透明，远离光线边缘。在顶部和底部渲染这个 CALayer（旋转 180 度），这样你最终会得到一条特定高度的射线，它的上下有一个很好的混合边缘。然后，重复这个过程，使光线变宽然后变短，直到它最终结束。

然后，您可以使用显卡硬件加速渲染更大的形状，但您的调用代码不需要实际绘制，然后在每个循环中传输图像数据。每个“瓦片”已经从 CPU 传输到 GPU，GPU 中的仿射变换非常快。基本上，您只是不想每次都渲染然后必须等待所有渲染的图像内存都必须传输到 GPU。

# layout - Emacs ECB - 保存和恢复自定义布局

> ID：13277037
> 
> 赞同：3
> 
> 时间：2012-11-07T19:46:15.660
> 
> 标签：layout, emacs, emacs-ecb

在 ecb 作为次要模式运行的 emacs 中，我想将我的布局设置为默认值。因此，一旦 emacs 启动，我会拖动左侧的窗格来更改布局，当我在“布局管理”下说“存储当前窗口大小”时，它确实会正确写入文件`~/.gnu-emacs-custom`。但是当我再次启动 emacs 时，默认窗口大小又回来了，我不得不再次拖动窗格。但是，当我这样做时`M-x ecb-restore-window-sizes`，尺寸设置正确。

因此，以某种方式设置了默认尺寸。在我的 .emacs 文件末尾添加这一行使其工作`(run-with-idle-timer 0.2 nil 'ecb-restore-window-sizes)`，但我不喜欢这种方式，它应该默认工作。

任何帮助，将不胜感激。

更新：
我对调试 emacs 不是很有经验，但是按照下面[wvxvw](https://stackoverflow.com/users/797257/wvxvw)的建议，我找到了定义`ecb-restore-window-size`并插入`(debug)`其中。然后我使用该选项运行 emacs`--debug-init`并得到以下输出： 我认为这意味着该函数在 init 期间运行并且没有死亡，对吗？
`Debugger entered: nil
ecb-restore-window-sizes()
(progn (ecb-restore-window-sizes))
<and a lot of other lines which I believe are statements fired when ecb-restore-window-sizes is referenced>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:30:01.243

在你的初始化中，试试这个

（添加挂钩'ecb-mode-hook'ecb-restore-window-sizes）

# javascript - 使用 Javascript 从 Internet 检索文件

> ID：13277041
> 
> 赞同：1
> 
> 时间：2012-11-07T19:46:34.227
> 
> 标签：javascript

> **可能重复：**
> [Javascript 或 JQuery 从外部站点获取 html 内容](https://stackoverflow.com/questions/11788758/javascript-or-jquery-get-html-content-from-external-site)

我希望 JavaScript 获取一个网页，比如 Google 主页，并检索其（显然）HTML 代码。我不知道该怎么做，主要是因为我并不真正喜欢 JavaScript。如果可能的话，由于速度问题，我会使用不需要库（例如 jQuery）或轻量级的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:47:58.790

您将只能获取您自己网站上的网页。浏览器将阻止您从外部站点加载任何 HTML。（除非您使用 JSONP，但这不会让您加载 HTML）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:59:33.300

正如 Mitch 所说，JavaScript 不可能从任意网站下载 HTML。

我不确定您的要求是什么，但这里有一些想法可以处理不太一般的情况：

1.  如果您想从您控制的服务器上的页面加载 HTML，那么您可以在服务器上设置 CORS 标头，然后您的 JavaScript 将能够从中加载（在现代浏览器上很容易，并且在旧浏览器上有一些技巧)
2.  如果您只想显示来自其他网页的 HTML，但不需要对其进行任何处理，那么您可以使用 iframe 将其他网页嵌入到您的页面中。

# ios - 在 iOS 中使用 LAME 从 PCM 编码到 MP3 时的点击次数

> ID：13277042
> 
> 赞同：3
> 
> 时间：2012-11-07T19:46:39.173
> 
> 标签：ios, audio, mp3, pcm, lame

我不是第一个遇到此类问题的人，但是，我一直无法解决。

我在 iOS 中将 LinearPCM 编码为 MP3。尽管我在每个缓冲区之间都遇到了点击，但它正在工作。

```
memset(&mEncodedBuffer, 0, sizeof(mEncodedBuffer));

int encodedBytes = lame_encode_buffer(gfp, (short*)inBuffer->mAudioData,  NULL, inNumberPacketDescriptions, mEncodedBuffer, MP3_BUFFER_SIZE);

NSData* data = [NSData dataWithBytes:mEncodedBuffer length:encodedBytes]; 
```

然后，我对缓冲区执行以下操作：

```
AudioQueueEnqueueBuffer(vc.recordState.queue, inBuffer, 0, NULL); 
```

在调用 lame_encode_buffer 后，我尝试添加以下行：

```
encodedBytes += lame_encode_flush(gfp, mEncodedBuffer+encodedBytes, 0); 
```

但是，这也会导致一个光点（我猜它在一帧的末尾输入了一些 0）。尝试这让我意识到我没有对 inBuffer->mAudioData 的一些最后的音频数据包进行编码，这可能会导致点击。但是，我不确定如何计算剩下多少（如果我知道，我可以简单地将这些数据包保存在一个“剩余”缓冲区中，该缓冲区附加到传入的下一个缓冲区）。

以下是有关我的设置的更多信息：

我有以下输入格式：

```
- (void)setupSourceAudioFormat:(AudioStreamBasicDescription*)format
 {
     format->mFormatID = kAudioFormatLinearPCM;

     format->mSampleRate = 44100;
     format->mFramesPerPacket = 1;
     format->mChannelsPerFrame = 1;
     format->mBytesPerFrame = 2;
     format->mBytesPerPacket = 2;
     format->mBitsPerChannel = 16;
     format->mReserved = 0;
     format->mFormatFlags = kLinearPCMFormatFlagIsBigEndian |
         kLinearPCMFormatFlagIsSignedInteger |
         kLinearPCMFormatFlagIsPacked;
 } 
```

我这样设置跛脚：

```
lame_t gfp = lame_init();
lame_set_num_channels(gfp, 1);
lame_set_in_samplerate(gfp, 44100);
lame_set_mode(gfp, MONO);
lame_set_brate(gfp, 64);
lame_init_params(gfp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:21:43.750

我以前每次对缓冲区进行编码时都调用了 lame_init() 。

一旦我将该设置代码移出，仅在问题解决后才被调用。

我猜发生的事情是 mp3 必须一次至少编码 1152 帧，而 lame_t 编码器会跟踪上次调用时未编码的数据。所以 lame_encode_buffer 可以从我们离开的地方开始。

lame_encode_flush 应该只用在文件的最后（否则最后几帧会被截断，除非帧数是 1152 的精确倍数——不太可能）。

# sql-server - 实体框架数据库未显示

> ID：13277044
> 
> 赞同：-1
> 
> 时间：2012-11-07T19:46:55.553
> 
> 标签：sql-server, visual-studio-2010, entity-framework

当我在 Visual Studio 中选择“添加新项目”，然后选择“ADO.NET 实体数据模型”并选择“从数据库生成”时，仅显示一些数据库，但我添加的其他数据库不显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:42:13.917

检查您连接到数据库服务器的用户帐户，以验证它是否有权访问相关的其他数据库。如果它是您的域帐户并且没有适当的访问权限，您可以尝试更改为 SQL 服务器身份验证并使用具有适当权限的 SQL 帐户进行连接（除非您知道 DBA 并且可以将权限添加到您的域帐户）。

# ruby-on-rails - 一个视图中的多个控制器（ruby on rails MVC）

> ID：13277047
> 
> 赞同：2
> 
> 时间：2012-11-07T19:47:12.837
> 
> 标签：ruby-on-rails, controller, render, params

嘿伙计们，我需要你的宝贵帮助。在[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)的第 10 章中，作者在一个视图中有 2 个控制器。我构建了一个类似的应用程序，其中我在一个视图中也有 2 个控制器，但是，当我渲染一个属于第二个控制器的方法时，从第一个开始我就遇到了参数问题。（在教程中作者没有在其他控制器的动作中使用任何参数）

更具体地说，我有 2 个控制器：UsersController 和 MicropostsController。另外，在 Users 的 show.html.haml 页面中，我使用了两个控制器：UsersController 用于显示用户的微博，而 MicropostsController 则允许用户创建新的微博。

MicropostsController 内部：

```
def create
  @micropost = current_user.microposts.build(params[:micropost])
  if @micropost.save
    flash[:success] = "Micropost created!"
    redirect_to user_path(current_user)
  else
    #render text: renderActionInOtherController(UsersController,:show, {:id => 1})
    @user = User.find(current_user)
    @microposts = @user.microposts.paginate(page: params[:page])
    render 'users/show'
  end
end 
```

内部用户控制器

```
def show
  @user = User.find(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @micropost = current_user.microposts.build if signed_in?
end 
```

在 app/views/users/show.html.haml

```
- provide(:title, @user.name)
.users_page
  .row
    %aside.span4
      - if !signed_in?
        %section
          %h1
            = gravatar_for @user
            = @user.name
      - else
        %section
          = render 'shared/user_info'
        %section
          = render 'shared/micropost_form'

    .span8
      - if @user.microposts.any?
        %h3 Microposts (#{@user.microposts.count})
        %ol.microposts
          = render @microposts
        = will_paginate @microposts 
```

所以基本上我的问题总结如下：

1）在一个视图中有多个控制器是一种好习惯吗？我在网上找到了相互矛盾的答案。（实际上，我什至不确定这段代码是否仍然是 RESTful）

2）如果 1 是肯定的（或者至少这不是一个坏习惯），我可以以更有效的方式实现同​​样的事情吗？因为在我看来，每次我从另一个控制器渲染动作时，我都必须重新定义变量。

3）我在stackoverflow中发现了一个[类似](https://stackoverflow.com/questions/6051776/rails-3-render-action-from-another-controller)的主题，其中有人建议使用这种方法（由于我是RoR的新手，所以我不知道它的确切作用）。

```
def renderActionInOtherController(controller,action,params)
  controller.class_eval{
    def params=(params); @params = params end
    def params; @params end
  }
  c = controller.new
  c.request = @_request
  c.response = @_response
  c.params = params
  c.send(action)
  c.response.body
end 
```

如果我在 MicropostsController 中使用这个版本的创建操作，

```
def create
  @micropost = current_user.microposts.build(params[:micropost])
  if @micropost.save
    flash[:success] = "Micropost created!"
    redirect_to user_path(current_user)
  else
    render text: renderActionInOtherController(UsersController,:show, {:id => 1})
    #@user = User.find(current_user)
    #@microposts = @user.microposts.paginate(page: params[:page])
    #render 'users/show'
  end
end 
```

当我点击发布按钮时，我在浏览器中什么都没有。此外，当我尝试查看 tha users/1 页面时，我收到以下错误（！！）：

```
undefined method `[]' for nil:NilClass 
```

任何帮助都将非常有价值！如果您需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:12:14.573

1.  从技术上讲，这个术语有些混乱。默认情况下，控制器中的每个方法都对应于一个名称相似的视图文件，因此最好将问题表述为*“呈现不是默认视图的视图是否是一种好习惯？”* 当然，答案是视情况而定。这是一种常用来干燥控制器代码的技术，如果它有好处，在你的应用程序中，我肯定会使用它。实际上，Rails 中默认资源脚手架生成的控制器代码在and方法中[使用了它。](http://guides.rubyonrails.org/getting_started.html)我认为你可以提出这样的论点：Rails 核心中的任何东西，如果不是最佳实践，至少在理智的范围内。`create``update`

2.  话虽如此，可能还有改进的机会。处理相同事情的常用方法是将您的创建和更新请求路由到相同的控制器操作并使用相同的控制器视图。如果这不可行，至少可以确保您不需要重新定义变量。从[官方文档](http://guides.rubyonrails.org/layouts_and_rendering.htmlhttp://)：

> 将 render 与 :action 一起使用是 Rails 新手经常感到困惑的原因。指定的操作用于确定要呈现哪个视图，但 Rails 不会在控制器中运行该操作的任何代码。您在视图中需要的任何实例变量都必须在调用渲染之前在当前操作中设置。

1.  你不应该这样做......在这种情况下，或者我能想到的任何其他情况下。任何时候你在 Rails 中看到类似的超级 hackey 都表明某些事情可能不太正确，并且可能有更好的方法来处理同样的事情。

奖励：如果您需要去某个已经负责设置自己的地方，并且您不需要访问任何范围内的变量，那么重定向可能是更好的选择。这样，您无需在多个地方重新描述您的控制器逻辑。这是您发布的代码中的一个示例：

```
 # inefficient and not DRY
    @user = User.find(current_user)
    @microposts = @user.microposts.paginate(page: params[:page])
    render 'users/show'

    # does the same thing as above (in this case)
    redirect_to users_path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T00:28:05.367

我想补充一点，我认为教程作者为什么对 Create Microposts 操作实施了一种不那么 DRY 的解决方案的理由是，如果使用 redirect_to 而不是 render，那么他们会丢失表单的 flash 错误。

我不确定是否有更干燥的解决方案来维护表单闪存错误。

# android - 来自 Android 应用程序的错误 OOM

> ID：13277049
> 
> 赞同：0
> 
> 时间：2012-11-07T19:47:19.080
> 
> 标签：android, out-of-memory

我正在开发一个 Android 应用程序来将一些图像加载到模拟器，但它失败并出现以下错误：

```
11-07 19:38:51.596: E/dalvikvm-heap(322): 73670400-byte external
allocation too large for this process.

11-07 19:38:51.596: E/GraphicsJNI(322): VM won't let us allocate
73670400 bytes

11-07 19:38:51.596: D/AndroidRuntime(322): Shutting down VM

11-07 19:38:51.616: W/dalvikvm(322): threadid=1: thread exiting with
uncaught exception (group=0x4001d800)

11-07 19:38:51.926: E/AndroidRuntime(322): FATAL EXCEPTION: main

11-07 19:38:51.926: E/AndroidRuntime(322): java.lang.OutOfMemoryError:
bitmap size exceeds VM budget

11-07 19:38:51.926: E/AndroidRuntime(322):  at
android.graphics.Bitmap.nativeCreate(Native Method)

11-07 19:38:51.926: E/AndroidRuntime(322):  at
android.graphics.Bitmap.createBitmap(Bitmap.java:468)

11-07 19:38:51.926: E/AndroidRuntime(322):  at
android.graphics.Bitmap.createBitmap(Bitmap.java:435) 
```

我的 Java 代码在下面发生错误的地方。我曾经`System.out.println`调试过这个问题。

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    System.out.println("11");
    ImageView imageView = new ImageView(context);
    System.out.println("12");

    imageView.setImageResource(imageIDs[position]);
    System.out.println("13");
    imageView.setScaleType(ImageView.ScaleType.FIT_XY);
    System.out.println("14");
    imageView.setLayoutParams(new Gallery.LayoutParams(150, 220));
    System.out.println("15");
    imageView.setBackgroundResource(itemBackGround);

    System.out.println("16");

    return imageView;
} 
```

如果您能提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:05:14.127

在调用垃圾回收后尝试捕捉期望并重试

```
public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        System.out.println("11");
        ImageView imageView = new ImageView(context);
        System.out.println("12");
        try {

            imageView.setImageResource(imageIDs[position]);
            System.out.println("13");
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            System.out.println("14");
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 220));
            System.out.println("15");
            imageView.setBackgroundResource(itemBackGround);

    } catch (OutOfMemoryError e) {
            // run your image cache clean up here if you have one
            // call sys gc
    System.gc();        

            imageView.setImageResource(imageIDs[position]);
            System.out.println("13");
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            System.out.println("14");
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 220));
            System.out.println("15");
            imageView.setBackgroundResource(itemBackGround);
    }

        System.out.println("16");

        return imageView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:47:21.940

显然图像文件是 70 兆字节，这将是你的问题。这比 android 应用程序允许的堆大小要大得多。

# c++ - 如何通过 boost 获得 0.5 增量的随机数？

> ID：13277053
> 
> 赞同：2
> 
> 时间：2012-11-07T19:47:24.290
> 
> 标签：c++, boost, random

如果我有这样的代码，请在 boost 的网站上使用这个基本的 boost 示例：

```
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/variate_generator.hpp>
#include <boost/random/uniform_real.hpp>

boost::mt19937 gen;

int roll_die() {
    boost::uniform_real<> dist(1, 6);
    boost::variate_generator<boost::mt19937&, boost::uniform_real<> > die(gen, dist);
    return die();
} 
```

如果我想做类似的事情

```
boost::uniform_real<> dist(0.0, 6.0) 
```

例如，它给了我类似 1.4883 的东西。有没有办法让它只给我 0.5 的值增量。

示例：(0.0, 6.0)

如果我运行代码 6 次，它会给我这样的结果：0.5、1.5、5.5、6.0、3.5、3.0

我将如何让它做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:48:44.740

有两种方法可以做到这一点：

简单的方法是从两倍范围（封闭范围）中获取一个随机整数`[0, 12]`并除以 2.0。

更困难的方法是从扩大一半单位（开放范围`(-0.25, 6.25)`）的范围（开放范围）中获取随机实数，然后四舍五入到最接近的 0.5。

后者更难，因为你会经常猜错范围，而且很难编写测试来确保你猜对了。（事实上​​，我并不是绝对肯定正确的范围是`(-0.25, 6.25)`而不是`[-0.25, 6.25)`，至少对于 IEEE 浮点数......而且，如果这*是*正确的范围，`boost::random::uniform_real_distribution`不给你任何方法来获得它......）

# osx-lion - iOS 6 Apple LLVM 4.1 错误

> ID：13277054
> 
> 赞同：0
> 
> 时间：2012-11-07T19:47:26.403
> 
> 标签：osx-lion, clang, xcode4.5

我尝试为 iPad 构建项目到 xCode。我收到了以下错误

命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

如何解决这个问题？所有报告：

```
/Users/sreenivas//Decoder/mc-a.S:305:15: error: unknown token in expression
    .align
          ^
/Users/sreenivas//Decoder/mc-a.S:317:18: error: invalid operand for instruction
    ldrd r4, [sp, #20]
             ^ 
```

我正在使用 Mac OS 10.7.5 和 Xcode 4.5。

这在 Mac OS 10.7.5 和 Xcode 4.2.3 上运行良好。

有什么问题任何人请帮助？我可以为 Xcode 4.5 添加任何标志：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:51:53.357

Xcode 4.5 默认使用一个新的、更严格的解析器进行汇编。具体来说，它希望您`.align`为 ldrd 提供一个数字和两个寄存器。

`-no-integrated-as`作为临时解决方法，您可以通过将标志添加到编译器标志来切换回旧的汇编程序。

# sql-server - 如何检查存储过程的 SQL Server 性能调整

> ID：13277056
> 
> 赞同：8
> 
> 时间：2012-11-07T19:47:29.540
> 
> 标签：sql-server, sql-server, sql-server-2008

我正在为将在[sql-server](/questions/tagged/sql-server "显示标记为“sql-server”的问题")中生成一些业务逻辑的应用程序创建一个存储过程。如何检查存储过程的性能，如速度、准确性等。任何想法或方向将不胜感激

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-07T20:21:24.123

就个人而言，当我测试存储过程的速度时，我使用类似于以下内容：

```
DBCC FREEPROCCACHE;
DBCC DROPCLEANBUFFERS;

GO

SET STATISTICS TIME ON;
SET STATISTICS IO ON;

GO

EXEC <my sproc> [args] 
```

**DBCC FREEPROCCACHE**

使用 DBCC FREEPROCCACHE 清除过程缓存。例如，释放过程缓存会导致重新编译即席 SQL 语句，而不是从缓存中重用。如果通过 SQL Profiler 观察，可以观察到 DBCC FREEPROCCACHE 开始工作时发生的 Cache Remove 事件。DBCC FREEPROCCACHE 将使优化器缓存在内存中的所有存储过程计划无效，并强制 SQL Server 在下次运行这些过程时编译新计划。

**DBCC 删除缓冲区**

使用 DBCC DROPCLEANBUFFERS 使用冷缓冲区缓存测试查询，而无需关闭并重新启动服务器。DBCC DROPCLEANBUFFERS 用于清空数据缓存。由于先前执行查询而加载到缓冲区高速缓存中的任何数据都将被删除。

以上无耻盗取自：[这篇博文](http://blog.sqlauthority.com/2007/03/23/sql-server-stored-procedure-clean-cache-and-clean-buffer/)

**设置统计时间**

显示解析、编译和执行每条语句所需的毫秒数。

[进一步阅读 (MSDN)](http://msdn.microsoft.com/en-us/library/ms190287.aspx)

**设置统计 IO 开启**

使 SQL Server 显示有关由 Transact-SQL 语句生成的磁盘活动量的信息。

[进一步阅读 (MSDN)](http://msdn.microsoft.com/en-us/library/ms184361.aspx)

至于查询的准确性，这是您作为开发人员必须查看的内容。我认为没有一种自动化的方法来测试准确性。

希望这会让你开始。

*注意：我在 SSMS 中执行此操作*

# ios - iOS 5 是否支持“使用基本国际化”？

> ID：13277063
> 
> 赞同：6
> 
> 时间：2012-11-07T19:47:51.630
> 
> 标签：ios, ios5, internationalization, xcode4.5

我一直无法找到明确的答案。

在以 iOS 5 作为部署目标设置新项目并在 iOS 5 设备上运行时 - 我有时会收到以下错误。但这并非总是如此，只是想从等式中消除不相容性。

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Could not find a storyboard named 'MainStoryboard' in bundle NSBundle 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:46:58.197

“基础国际化”仅适用于 iOS 6 / OS X 10.8 及更高版本。

如果您下载 WWDC 2012 会议幻灯片（转到[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)），那么您会在“Session 232 - Auto Layout by Example.pdf”的第 63 页上找到该幻灯片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T22:10:24.253

您可以尝试[https://github.com/RolandasRazma/RRBaseInternationalization](https://github.com/RolandasRazma/RRBaseInternationalization)以获得 iOS5 支持。

# macos - Flowplayer：如何将 m2v 文件转换为 mp4 并使其能够流式传输

> ID：13277068
> 
> 赞同：0
> 
> 时间：2012-11-07T19:48:05.347
> 
> 标签：macos, streaming, h.264, mp4, flowplayer

我有严重的问题来确定我的问题，所以我会描述它。

我将 mp4 文件存储在 Azure Blob 存储上并用 显示它们`Flowplayer 3.2.11`，不幸的是，我的一些视频没有流式传输，而是在开始前等待完全下载（与[本主题](https://stackoverflow.com/q/12795210/1066240)相同）。

我尝试了一些程序，只有 QuickTime Player 准备了正确的文件，不幸的是它不允许更改输出文件的更高级设置。我也试过[Macroplant Adapter](http://www.macroplant.com/adapter/)，但是创建的文件没有流式传输。

在每次测试中，我都使用`H.264`了编解码器，并且在检查不同程序中创建的文件的详细信息时，它们看起来完全（或几乎完全）相同。

所以最后一个问题是：我错过了什么明显的东西还是我需要测试另一个程序（你推荐哪个？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:19:35.320

经过两天的搜索和编写问题......我找到了答案:) 有趣

> 随着支持 H.264 的 Flash Player 9 更新的发布，我们现在可以播放 H.264 电影文件的子集。问题是大多数 H.264 文件在文件末尾都有索引，对于渐进式下载意味着您​​必须先下载整个文件才能开始观看任何视频。

还有一个[Air 应用程序 -](http://renaun.com/blog/code/qtindexswapper/)由 Renaun Erickson 编写的 QTIndexSwapper 解决了这个问题。这样可行！

# .net - 从对话框返回时，如何防止禁用的 winform 失去焦点

> ID：13277070
> 
> 赞同：1
> 
> 时间：2012-11-07T19:48:09.477
> 
> 标签：.net, winforms

我有一个 .net winforms 应用程序，一次显示多个表单。一种形式是常规禁用（this.enabled = false;）。在此期间，表单会创建并显示自定义模式对话框。当对话框关闭时，原始表单，即被禁用的表单，将失去焦点。我删除了将表单设置为禁用的代码，当我测试它时，表单在从对话框返回后保持焦点。有没有办法让禁用的表单打开一个模态自定义对话框，然后在对话框关闭时保持专注并在其他表单之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:57:39.173

不可以。当对话框关闭时，Windows 管理器必须选择另一个窗口来获得焦点。当您的应用程序没有剩余已启用的窗口时，它*必须*选择另一个应用程序的窗口。这可能会将您的应用程序的窗口推到后台。

一种可能的解决方法是在对话框关闭之前快速启用窗口，然后再次禁用它。像这样：

```
using (var dlg = new Form2()) {
    dlg.FormClosing += new FormClosingEventHandler((s, ea) => {
        if (!ea.Cancel) this.Enabled = true; 
    });
    if (dlg.ShowDialog() == DialogResult.OK) {
        // etc...
    }
    this.Enabled = false;
} 
```

但请注意，这通常是一个可用性问题。一旦用户切换到另一个应用程序，她就无法再次切换回您的应用程序。

# facebook - FQL link_stat 值不正确

> ID：13277074
> 
> 赞同：1
> 
> 时间：2012-11-07T19:48:20.740
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

我正在尝试访问 FB 页面的 like_stat 信息，特别是`facebook.com/womenmakemovies`. 手动导航到页面后，“喜欢”磁贴显示该页面的点赞数超过 14K。

为了使用 FB API 访问这些数据，我运行了以下查询： `SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="facebook.com/womenmakemovies"`

选择的所有“计数”都返回值为 0。

是否有其他方法可以在单个查询中收集所有这些数据，或者我可以对当前查询进行一些更改以获得正确的数据？

旁注：我在其他页面上也遇到了这个问题，但是我获得统计信息的大多数页面都返回了给定上述查询的正确数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:56:43.450

您不能使用 查询 Facebook 页面`link_stat`。您必须使用[页面](https://developers.facebook.com/docs/reference/fql/page/)或[见解](https://developers.facebook.com/docs/reference/fql/insights/)表。

这将为您提供页面当前的喜欢数量：

```
 SELECT name, fan_count, new_like_count FROM page WHERE username="womenmakemovies" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T00:38:37.980

对于喜欢计数，您可以使用：`https://graph.facebook.com/womenmakemovies`

```
{
   "name": "Women Make Movies",
   "is_published": true,
   "website": "www.wmm.com\nwww.youtube.com/wmmnyc",
   "username": "womenmakemovies",
   "founded": "1972",
   "company_overview": "Women Make Movies is the world's leading distributor of independent films by and about women, with a focus on cutting-edge documentaries that give depth to today's headlines, as well as artistically and intellectually challenging works in all genres. Our films are showcased in prestigious exhibition venues and festivals both nationally and internationally. The Women Make Movies collection of more than 500 films and videotapes is also used by thousands of educational, community and cultural organizations annually.\n\n\n\n",
   "mission": "http://www.wmm.com/about/general_info.shtml",
   "products": "DISTRIBUTION SERVICE\nhttp://www.wmm.com/filmcatalog/new_releases.shtml \n\nPRODUCTION ASSISTANCE PROGRAM\nhttp://www.wmm.com/filmmakers/production_assistance.shtml\n \n\n",
   "about": "www.wmm.com youtube.com/wmmnyc twitter.com/womenmakemovies",
   "location": {
      "street": "462 broadway, ste 500",
      "city": "New York",
      "state": "NY",
      "country": "United States",
      "zip": "10013",
      "latitude": 40.72103,
      "longitude": -74.00049
   },
   "general_info": "WMM Funders:\n\nNew York State Council on the Arts\nNational Endowment for the Arts\nNew York City Department of Cultural Affairs\nThe Educational Foundation of America\nThe Little Family Foundation\nThe Weinstein Company\nThe Friends of Women Make Movies",
   "checkins": 6,
   "were_here_count": 33,
   "talking_about_count": 142,
   "category": "Non-profit organization",
   "id": "6574279597",
   "link": "https://www.facebook.com/womenmakemovies",
   "likes": 14704,
   "cover": {
      "cover_id": "10150730604649598",
      "source": "http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash3/s720x720/536830_10150730604649598_87318500_n.jpg",
      "offset_y": 74
   }
} 
```

# asp.net - 如何使用参数和存储过程

> ID：13277075
> 
> 赞同：0
> 
> 时间：2012-11-07T19:48:24.460
> 
> 标签：asp.net, c#-4.0

我在这里要做的就是使用存储过程将状态字段设置为“完成”，但由于某种原因，在我运行存储过程后它没有更新我的表。有人可以在这里帮助我并告诉我我做错了什么吗？谢谢 //这里是存储过程

```
CREATE PROCEDURE sp_Update 
  @ID varchar 

AS 
BEGIN 
 -- SET NOCOUNT ON added to prevent extra result sets from 
 -- interfering with SELECT statements. 
 SET NOCOUNT ON; 

 if exists (select Post_ID from  MyTable  WHERE Post_ID = @ID) 
  BEGIN 
        UPDATE MyTable 
        SET Status = 'Complete' 
        WHERE Post_ID = @ID 
  END 

END 

//and here is the code behind 
foreach (GridViewRow gr in GV_Action.Rows) 
        { 

                //string strID = gr.Cells[1].Text; 
                string ID = gr.Cells[1].Text; 
                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString); 

                SqlCommand cmd = new SqlCommand("sp_Update", con); 
                cmd.CommandType = CommandType.StoredProcedure; 

                cmd.Parameters.Add("@ID", SqlDbType.VarChar).Value = ID; 

                cmd.Connection = con; 
                con.Open(); 
                cmd.ExecuteNonQuery(); 
                con.Close(); 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:48:46.670

在代码“gr.Cells[1].Text”中，Cells[x] 从零开始。如果 ID 在第一列，那么您需要 'gr.Cells[0].Text'。在下一行放置一个断点，看看你在那里有什么价值。

# ruby-on-rails - 更改 `require` 来连接 Ruby 文件是出色还是疯狂？

> ID：13277077
> 
> 赞同：5
> 
> 时间：2012-11-07T19:48:42.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当启动一个有很多依赖项的 Rails 应用程序时，很多时间（我认为）花在`require`ing 文件上。

假设您要创建一个部署过程，该过程将所有`require`语句转换为文件连接，使用相同的规则（不要两次获取相同的文件等）。本质上，它将像资产管道处理 javascript 一样处理 Ruby。

这会产生真正的速度差异吗？它会产生任何问题 - 例如，变量范围 - 除了使错误更难追踪到其原始源文件吗？

简而言之，**这是辉煌还是疯狂？**

## 更新

正如 pst 指出的那样，这在生产中毫无意义，服务器可能会加载所有内容，然后分叉处理新请求。

但是考虑一下测试环境，每次运行测试时都会启动 Rails 应用程序。预先连接所有的 gem 可能会产生类似于 Spork gem 的效果。

我想我真正的问题是在**解析文件内容上****花费了多少时间`require`**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:34:34.067

你会很高兴看到它是如何进入 Ruby 2.0 的：http: [//bugs.ruby-lang.org/issues/7158](http://bugs.ruby-lang.org/issues/7158)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:59:18.330

tldr; *跨请求摊销*不会*产生**任何影响**¹* - 任何微不足道的启动成本都是无关紧要的²。

¹ “提高性能”的一种更好的方法是重用进程——例如，只为 N 个请求加载一次进程（这意味着只“运行”`require`一次语句）——就像*已经*完成的那样。

²对于那些真正对“它是否会更快解析”感兴趣的人，请运行基准测试。然后意识到这并不重要——*即使在启动时节省一秒钟对*网络服务器基础设施来说也不重要。（当然，它只会快几毫秒 - 从一些额外的磁盘搜索 - 如果有的话。）

# c - 互斥锁实现中的死锁和竞争条件

> ID：13277080
> 
> 赞同：1
> 
> 时间：2012-11-07T19:48:47.377
> 
> 标签：c, concurrency, mutex, deadlock, race-condition

我正在尝试使用原子汇编指令“bts”在 C 中实现互斥锁，以原子方式设置一个位并返回原始值。但是，当我运行以下代码时，它偶尔会出现死锁并经常显示竞态条件：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

typedef unsigned char mutex;
#define MUTEX_FREE 0
#define MUTEX_BUSY 1

// adapted from http://www.acm.uiuc.edu/sigops/roll_your_own/i386/atomic.html
mutex testAndSet(mutex *m) {
    int result;
    asm ("bts $0, %1; sbbl %0, %0"
         :"=r" (result)
         :"m" (*m)
         :"memory");
    return (result & 1);
}

void P(mutex *m) {
    // Must use atomic testAndSet to avoid race conditions
    while(testAndSet(m) == MUTEX_BUSY)
        usleep(10);
}

void V(mutex *m) {
    *m = MUTEX_FREE;
}

//////////////
// Test:
//////////////

const int NTHREADS = 100;
const int NINCS = 100;

int counter = 0;
mutex m = MUTEX_FREE;

void criticalSection() {
    int i;
    for(i=0;i<NINCS;i++) {
        P(&m);
        counter++;
        V(&m);
    }
}

int main() {
    int i;
    pthread_t threads[NTHREADS];
    for(i=0; i<NTHREADS; i++) {
        pthread_create(&threads[i], NULL, (void *) &criticalSection, NULL);
    }
    for(i=0; i<NTHREADS; i++) {
        pthread_join(threads[i], NULL);
    }
    printf("got counter=%d, expected=%d\n", counter, NTHREADS*NINCS);
} 
```

如果我使用“xchgb”指令而不是“bts”，代码似乎可以工作，如下所示：

```
mutex testAndSet(mutex *m) {
    unsigned char result = MUTEX_BUSY;
    asm ("xchgb %1, %0"
            :"=m" (*m), "=r" (result)
            :"1" (result)
            :"memory");
    return result;
} 
```

原始代码中的竞争条件在哪里？“bts”指令不应该是原子的，保证线程安全吗？

此外，我修改后的解决方案实际上是否正确？

（我正在运行 OS X 10.8 并使用 gcc 进行编译。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:13:45.483

尝试使用[`LOCK`前缀](http://pdos.csail.mit.edu/6.828/2008/readings/i386/LOCK.htm)锁定内存总线：

```
asm ("lock bts $0, %1; ..."); 
```

该指令有效，因为无论前缀是否存在`xchg`，它总是断言信号。`LOCK#``LOCK`

# java - 更改 jLabel 图标

> ID：13277086
> 
> 赞同：2
> 
> 时间：2012-11-07T19:50:31.770
> 
> 标签：java, swing, netbeans, jlabel, imageicon

似乎我不是唯一一个有这个问题的人，但我找不到解决问题的答案。

我创建了一个`Label`并`Icon`使用`WYSIWYG interface designer`.
现在我想在运行时动态更改图标。

逻辑方式是这样的（我的第一次尝试）：

```
ImageIcon newIcon = new ImageIcon("SomePath");
jLabel1.setIcon(newIcon); 
```

当我这样做时，图标只是从界面中消失了，所以我用谷歌搜索了它，有人说要“刷新”图标，这意味着我尝试了它：

```
ImageIcon newIcon = new ImageIcon("SomePath");
newIcon.getImage().flush();
jLabel1.setIcon(newIcon); 
```

仍然有同样的问题..图标消失了。

我究竟做错了什么 ？

* * *

**更新（完整方法）：**

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
attempted = myEngine.Attempt('q', word);
if(attempted)
  {
      this.jTextArea1.setText(myEngine.ChangeEncrypt('q', word, this.jTextArea1.getText()));    
  }
  else
  {
      JOptionPane.showMessageDialog(null,"The Letter Q is not in the word", "Error",JOptionPane.WARNING_MESSAGE);
      jButton1.setEnabled(false);
      life ++;
      ImageIcon newIcon = myEngine.UpdatePicture(life);
      newIcon.getImage().flush();
      jLabel1.setIcon(newIcon);
  } 
```

这是更新图片方法：

```
public ImageIcon UpdatePicture(int life)
{
  ImageIcon emptyIcon = new ImageIcon();
  if (life == 0)
  {
       ImageIcon iconZero = new ImageIcon("/hang0.gif");
       return iconZero;
  }
  if (life == 1)
  {
      ImageIcon iconOne = new ImageIcon("/hang1.gif");
      return iconOne;
  }
  if (life == 2)
  {
      ImageIcon iconTwo = new ImageIcon("/hang2.gif");
      return iconTwo;
  }
  if (life == 3)
  {
      ImageIcon iconThree = new ImageIcon("/hang3.gif");
      return iconThree;
  }
  if (life == 4)
  {
      ImageIcon iconFour = new ImageIcon("/hang4.gif");
      return iconFour;
  }
  if (life == 5)
  {
      ImageIcon iconFive = new ImageIcon("/hang5.gif");
      return iconFive;
  }
  if (life == 6)
  {
      ImageIcon iconSix = new ImageIcon("/hang6.gif");
      return iconSix;
  }

  return emptyIcon; 
```

}

不确定整个代码是否必要，但它仍然可能会有所帮助。

life 变量从 0 开始。
我检查并在 UpdatePicture 中点击`"/hang1.gif";`并返回它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:27:48.513

如果文件在您的`src`文件夹中，则：

```
ImageIcon ii = new ImageIcon(getClass().getResource("/myFile.gif")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:21:53.917

你真的不应该把那个斜线放在你的图标名称之前。它就是这样工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T19:53:48.453

我知道这是一个古老的问题线程，但是当我的应用程序运行时，我在 jLabel 上替换了一个图标非常费劲。这就是最终修复它的原因：我在名为 images 的源包中创建了一个新文件夹并将图像放在那里。在我的框架（主类）中，我在 initComponents 方法下面添加了这个：

```
 private void moreComponents() {
//    get images for initial screen prompts (Skd2_startPanel, loading label1).
// StartPanel is a panel on the Frame that has the loading label on it))
try {
  lcImage= new ImageIcon(ImageIO.read(getClass().getResource("/images/LC.png")));
  clImage= new ImageIcon(ImageIO.read(getClass().getResource("/images/CL.png")));
} catch (IOException ex) {
  Logger.getLogger(Skd2_Frame.class.getName()).log(Level.SEVERE, null, ex);
 }
} 
```

LC 和 CL.png 是我想要作为标签图标的图像。

在另一个类中，当我希望更改图标时，我添加了以下内容：

```
 loadingLabel1.setIcon(lcImage); // or clImage as needed. 
```

您将需要以下导入：

```
import java.util.logging.Logger;
import javax.imageio.ImageIO; 
```

并在变量声明下方添加这两个声明：

```
 static ImageIcon lcImage;
 static ImageIcon clImage; 
```

希望这有助于有人在网上搜索答案。

# mysql - MySQL Master-Master 复制

> ID：13277087
> 
> 赞同：1
> 
> 时间：2012-11-07T19:50:33.297
> 
> 标签：mysql

我正在尝试在 MySQL 中运行以下查询：

```
GRANT REPLICATION SLAVE ON *.* TO 'replication'@’10.141.2.%’ IDENTIFIED BY ‘slave’; 
```

它不断返回以下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '??10.141.2.%’ IDENTIFIED BY ‘slave’' at line 1 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:54:06.163

# django - Django使用元组和列表的不一致

> ID：13277089
> 
> 赞同：0
> 
> 时间：2012-11-07T19:50:34.183
> 
> 标签：django, list, tuples

嗨，我不确定以前是否有人问过这个问题，我总是混淆使用元组和列表来定义 django 框架中的东西，例如。您需要使用元组在 admin.py 中定义 list_display、list_filters 并使用列表来定义 search_fields 和排序字段。

这些东西很难记住，有理由不巩固吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:59:16.883

我不知道你从哪里得到这个想法。对于 Python 中的大多数用途，元组和列表是可互换的，Django 也不例外。两者都适用于所有这些用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:59:42.247

我能想到的是，元组在创建后无法更改，这确保了它们没有动态更改，而列表中的情况并非如此。因此，如果在任何情况下您想更改排序字段，您都可以动态地进行。

# c++ - 将新节点添加到列表并动态命名

> ID：13277091
> 
> 赞同：0
> 
> 时间：2012-11-07T19:50:35.763
> 
> 标签：c++, list, linked-list

我有几个关于列表的问题。首先，这是我的代码：

```
#include <iomanip>
#include <iostream>
#include <cstdlib>
#include <string>

using namespace std;

struct node {
    int x;
    node *next;
};

void main()
{
    node *root;
    node *curr;

    int exit = 0;
    string temp;
    root = new node;
    root->next = 0;
    curr = root;
    cout << "Please enter the root number: ";
    cin >> root->x;

    for( int i=0; i<10; i++)//Will promt user to enter numbers
    {
        cout << "Enter string name for new node: ";
        cin >> temp;
    }

    if (curr != 0)//Used for traversing the LL and outputting
    {
        while (curr->next != 0)
        {
            cout << curr->x;
            curr = curr->next;
        }
    }
} 
```

我希望提示用户在 for 循环中输入一个数字以添加到第一个节点。但是我对在根目录之外创建更多节点感到困惑。他们必须为每个节点使用不同的名称吗？我看到我在哪里创建了一个名为 root 的新节点。我必须为每个节点都这样做吗？如果我这样做，我可以让用户输入该节点的名称并让程序写入该名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:58:49.490

要创建超过根的更多节点，只需执行相同的操作：

```
 // assuming 'curr' points to end of list
 curr->next = new node;  // here's the new node
 curr = curr->next;      // update curr (if you want) to point to the newest node
 curr->next = 0;         // probably should be done in nodes ctor 
```

您不会“命名”新节点，您只有“root”和“curr”。要查找任何一个节点，请从“根”开始并遍历到您想要的那个。当然，您可以将 ptrs 保存到某些节点以便更快地访问，但这将特定于特定应用程序。

同样在您当前的输入循环中：

```
for( int i=0; i<10; i++)//Will promt user to enter numbers
{
    cout << "Enter string name for new node: ";
    cin >> temp;
} 
```

用户输入一个值 10 次，但每次都输入“temp”。所以它一直被覆盖。

# c# - 如何以编程方式更改列表框边距？

> ID：13277097
> 
> 赞同：3
> 
> 时间：2012-11-07T19:50:51.267
> 
> 标签：c#, listbox, margin

我正在尝试使用以下代码更改一组以编程方式生成的列表框周围的边距：

```
newListBox.Margin = new Thickness(0, 0, 0, 0); 
```

然而，这给了我错误：

```
the type or namespace Thickness could not be found 
```

我尝试添加`using System.Windows`命名空间，但我仍然得到同样的错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:56:08.710

[**`System.Windows.Thickness`**](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx)是演示框架的一部分。如果您不使用 WPF 或 Silverlight，请尝试引用*PresentationFramework.dll*来访问该`Thickness`结构。

但我担心在这种情况下你`ListBox.Margin`不会接受 type 的对象`Thickness`。[**`System.Windows.Forms.Padding`**](http://msdn.microsoft.com/en-us/library/system.windows.forms.padding.aspx)如果您使用的是 WinForms，请尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:54:12.610

我相信你正在寻找`Padding`. 请参见[Control.Margin](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.margin.aspx)

```
newListBox.Margin = new Padding(0, 0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:59:05.090

情报是你的朋友。如您所见，您想使用 Padding 对象。

![在此处输入图像描述](../Images/36764477a360b005d8ea44750387a642.png)

# scala - 如何在 Scala 中跟踪嵌套函数

> ID：13277098
> 
> 赞同：3
> 
> 时间：2012-11-07T19:50:50.423
> 
> 标签：scala, functional-programming

我想对我的函数调用嵌套的深度有一些基本的了解。考虑以下：

```
scala> def decorate(f: => Unit) : Unit = { println("I am decorated") ; f }
decorate: (f: => Unit)Unit

scala>  decorate { println("foo") }
I am decorated
foo

scala> decorate { decorate { println("foo") } }
I am decorated
I am decorated
foo 
```

对于最后一次通话，我希望能够获得以下信息：

```
I am decorated 2x
I am decorated 1x
foo 
```

这个想法是`decorate`函数知道它的嵌套深度。想法？

**更新：**正如尼基塔所想，我的例子并不代表我真正追求的。目标不是生成字符串，而是能够通过对同一个嵌套函数的一系列调用来传递一些状态。我认为 Régis Jean-Gilles 为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:01:49.683

您可以使用*动态范围模式*。更简单地说，这意味着使用线程局部变量（scala`DynamicVariable`就是为此而做的）来存储当前的嵌套级别。有关此模式的部分示例，请参阅我对其他问题的回答：[如何定义将函数文字（带有隐式参数）作为参数的函数？](https://stackoverflow.com/questions/7069044/how-to-define-a-function-that-takes-a-function-literal-with-an-implicit-paramet/13252952#13252952)

仅当您想知道非常具体的方法的嵌套级别时，这才适用。如果您想要一种适用于任何方法的通用机制，那么这将不起作用（因为您需要为每种方法使用不同的变量）。在这种情况下，我能想到的唯一选择是检查堆栈，但它不仅不是很可靠，而且速度也非常慢。

**更新**：实际上，有*一种*方法可以以通用方式应用动态范围模式（对于任何可能的方法）。重要的部分是能够为每个方法隐式地获取一个唯一的 id。从那里开始，只需使用此 id 作为将 a 关联`DynamicVariable`到方法的键：

```
import scala.util.DynamicVariable
object FunctionNestingHelper {  
  private type FunctionId = Class[_]
  private def getFunctionId( f: Function1[_,_] ): FunctionId = {
    f.getClass // That's it! Beware, implementation dependant.
  }
  private val currentNestings = new DynamicVariable( Map.empty[FunctionId, Int] )
  def withFunctionNesting[T]( body: Int => T ): T = {
    val id = getFunctionId( body )
    val oldNestings = currentNestings.value 
    val oldNesting = oldNestings.getOrElse( id, 0 )
    val newNesting = oldNesting + 1
    currentNestings.withValue( oldNestings + ( id -> newNesting) ) {
      body( newNesting )
    }    
  }
} 
```

用法：

```
import FunctionNestingHelper._
def decorate(f: => Unit)  = withFunctionNesting { nesting: Int =>
  println("I am decorated " + nesting + "x") ; f 
} 
```

为了获得该方法的唯一 id，我实际上获得了传递给的闭包的 id `withFunctionNesting`（您必须在需要检索当前嵌套的方法中调用它）。这就是我在依赖于实现方面犯错的地方：*id*只是函数实例的类。到目前为止，这确实可以按预期工作（因为每个一元函数文字都被实现为一个实现`Function1`的类，因此该类充当唯一的 id），但现实情况是它可能会在未来版本的 scala 中破坏（尽管不太可能） . 因此，使用它需要您自担风险。

最后，我建议您首先认真评估 Nikita Volkov 提出的更实用的建议是否不是一个更好的整体解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:58:46.473

您可以从函数返回一个数字，并计算您在返回堆栈的过程中处于多少级。但是没有简单的方法可以像您给出的示例输出那样计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:40:56.287

Since your question is tagged with "functional programming" following are functional solutions. Sure the program logic changes completely, but then your example code was imperative.

The basic principle of functional programming is that there is no state. What you're used to have as a shared state in imperative programming with all the headache involved (multithreading issues and etc.) - it is all achieved by passing immutable data as arguments in functional programming.

So, assuming the "state" data you wanted to pass was the current cycle number, here's how you'd implement a function using recursion:

```
def decorated ( a : String, cycle : Int ) : String
  = if( cycle <= 0 ) a
    else "I am decorated " + cycle + "x\n" + decorated(a, cycle - 1)

println(decorated("foo", 3)) 
```

Alternatively you could make your worker function non-recursive and "fold" it:

```
def decorated ( a : String, times : Int )
  = "I am decorated " + times + "x\n" + a

println( (1 to 3).foldLeft("foo")(decorated) ) 
```

Both codes above will produce the following output:

```
I am decorated 3x
I am decorated 2x
I am decorated 1x
foo 
```

# java - ExecutorService 存放在哪里

> ID：13277100
> 
> 赞同：0
> 
> 时间：2012-11-07T19:50:54.620
> 
> 标签：java, multithreading, threadpool, executorservice

我需要一个执行器服务来调用第 3 方服务，以节省 rtt 和延迟，计划同时触发所有第 3 方请求。

我想知道我是否应该为每个请求创建一个 ExecutorService ？或存储在线程本地？还是每个应用程序一个？

如果我从不`shutdown`明确调用会发生什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:53:14.977

您很可能希望`ExecutorService`每个整个应用程序都有一个。它实际上是一个变相的线程池，因此您可能不需要每个请求或每个线程的线程池。

调用`shutdown()`不是必需的，但如果它在您计划重新部署的 Web 应用程序中运行，则会导致内存泄漏。

# java - Jersey 客户端 HTTPS 性能问题

> ID：13277105
> 
> 赞同：15
> 
> 时间：2012-11-07T19:51:18.927
> 
> 标签：java, https, jersey

我正在使用`JUnit`测试`JERSEY Client + HTTPS`来测试`secure web service`在`Jetty`. 在`wr.get( ClientResponse.class)`每个`9-10 requests`. 等效`Apache client`代码在几毫秒内运行。如果我切换`Jetty to HTTP`模式，问题就会消失。

我在用`Jersey bundle & client 1.14 and Jetty 6.1.26`

apache客户端工作

```
@Test
public void testApacheClient() throws Exception
{
  HttpClient client = new HttpClient();
  ProtocolSocketFactory socketFactory = new EasySSLProtocolSocketFactory();
  Protocol https = new Protocol( "https", socketFactory, 443 );
  Protocol.registerProtocol( "https", https );

  //Finishes in < 1 second
  for ( int i = 0; i < 30; i++ )
  {
    GetMethod getMethod = new GetMethod( "https://localhost:8443/home" );
    client.executeMethod( getMethod );
    String entity = getMethod.getResponseBodyAsString();
    getMethod.releaseConnection();
  }
} 
```

泽西客户挂起

```
@Test
public void testJerseyClient() throws Exception

  HostnameVerifier hv = getHostnameVerifier();
  ClientConfig config = new DefaultClientConfig();
  SSLContext ctx = getSslContext();
  config.getProperties().put( HTTPSProperties.PROPERTY_HTTPS_PROPERTIES,
      new HTTPSProperties( hv, ctx ) );

  Client jerseyClient = Client.create( config );

  //Finishes in < 1 second
  for ( int i = 0; i < 30; i++ )
  {
    WebResource wr = jerseyClient.resource( "https://www.google.com" );
    ClientResponse cr = wr.get( ClientResponse.class );
    String entity = cr.getEntity( String.class );
    cr.close();
  }

  /* Pauses for 10 seconds after the 10th request, and subsequently after every 9th request.
     Debugging shows waiting at line 'ClientResponse cr = ...'
   */
  for ( int i = 0; i < 30; i++ )
  {
    WebResource wr = jerseyClient.resource( "https://localhost:8443/home" );
    ClientResponse cr = wr.get( ClientResponse.class );  //10 second pause after requests 9, 18, 27
    String entity = cr.getEntity( String.class ); //This is triggering the problem
    cr.close();
  }

  //Finishes in < 1 second
  for ( int i = 0; i < 30; i++ )
  {
    WebResource wr = jerseyClient.resource( "https://localhost:8443/home" );
    ClientResponse cr = wr.get( ClientResponse.class );
    cr.close();
  }
} 
```

从中检索实体`ClientResponse`似乎会触发问题，但仅在`HTTPS`模式下并针对我的 Web 服务器（不是`google, facebook, etc`）运行。我已经继续运行`Jersey ServletContainer and Struts ActionServlet`，`Jetty`并且两者都出现了问题。我还在我的不同机器上运行 Web 服务器，`subnet`并从多台机器上进行了单元测试。

泽西 HTTPS 类

```
private HostnameVerifier getHostnameVerifier() {
  HostnameVerifier hv = new HostnameVerifier() {
    public boolean verify( String arg0, SSLSession arg1 ) { return true; }
  };
  return hv;
}

private SSLContext getSslContext() throws Exception {      
  private final SSLContext sslContext = SSLContext.getInstance( "SSL" );
  sslContext.init( null, new TrustManager[] { new X509TrustManager() {
        public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }
        public void checkClientTrusted( X509Certificate[] certs, String authType ) {}
        public void checkServerTrusted( X509Certificate[] certs, String authType ) {}
      }
    }, new SecureRandom()
  );
  return sslContext;
} 
```

码头 SSL 连接器。如果我使用 SelectChannelConnector 并使用 HTTP 进行单元测试，问题就会消失。

```
<Call name="addConnector">
  <Arg>
    <New class="org.mortbay.jetty.security.SslSocketConnector">
      <Set name="allowRenegotiate">true</Set>
      <Set name="Port">8443</Set>
      <Set name="reuseAddress">true</Set>
      <Set name="Host">mgmt-int</Set>
      <Set name="maxIdleTime">30000</Set>
      <Set name="handshakeTimeout">2000</Set>
      <Set name="keystore"><SystemProperty name="jetty.home" default="/usr/app/web-app"/>/conf/keystore.jetty</Set>
      <Set name="password">OBF:1vaaaaaaaaaaaaaaaaaaaa111111111v</Set>
      <Set name="keyPassword">OBF:1vaaaaaaaaaaaaaaaaaaaa111111111v</Set>
    </New>
  </Arg>
</Call> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:42:24.007

这些在什么操作系统上运行？

只是一个猜测，但它可能与缓慢的`/dev/random`实现有关（通过`SecureRandom`）。

相关讨论在这里：

[如何使用 Java SecureRandom 解决性能问题？](https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom)

由于我无法始终控制 Web 应用程序中的 JVM 参数，因此我一直使用它作为解决方法：

```
static {
    System.setProperty("java.security.egd", "file:///dev/urandom");
} 
```

不知道这是否是严格推荐的（但它为我解决了问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:18:30.497

尝试稍微修改您的 trustManager 实现：

```
TrustManager[] trustAllCerts = new TrustManager[] {
        new X509TrustManager() {
            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            public void checkClientTrusted(X509Certificate[] certs, String authType) {
                // Trust always
            }

            public void checkServerTrusted(X509Certificate[] certs, String authType) {
                // Trust always
            }
        }
    }; 
```

另外，不要忘记在 getSSLContext() 方法结束时调用 HttpsURLConnection.setDefaultSocketFactory：

```
HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory()); 
```

# dotnetnuke - 如何在 DotNetNuke 皮肤中创建会话变量？

> ID：13277107
> 
> 赞同：0
> 
> 时间：2012-11-07T19:51:22.187
> 
> 标签：dotnetnuke, session-variables

我正在尝试在主页皮肤上创建一个会话变量，该变量将根据用户之前是否访问过当前会话中的主页返回 true 或 false。然后我需要检查该值，如果这不是他们第一次访问主页，我需要回显/打印 javascript。

我试过了

```
Session("HomePageSeen") = "false"
Session["HomePageSeen"] = "false"; 
```

此外，它是一个 DNN6 站点。我的理解是 DNN6 使用 C# 而不是 VB。但是，在我的 .ascx 皮肤文件的顶部，有这行代码：

```
<%@ Control language="vb" AutoEventWireup="false" Explicit="True" Inherits="DotNetNuke.UI.Skins.Skin" %> 
```

所以我不确定我应该用 C# 还是 VB 来编写它。

我知道我将如何在 PHP 中执行此操作，并且我觉得这里也适用相同的逻辑，但我对 .Net、VB 或 C# 的精通还远远不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:33:24.110

皮肤可以是任何一种语言，也可以是你想要的任何版本的 DNN（核心代码在 DNN 6 中切换到 C#，但这不会影响扩展使用的语言）。皮肤的语言基于[指令](http://msdn.microsoft.com/en-us/library/d19c0t4b%28v=vs.100%29.aspx)`language`中的该属性[`Control`](http://msdn.microsoft.com/en-us/library/d19c0t4b%28v=vs.100%29.aspx)

您应该能够使用该`Session`属性获取和设置会话值。像这样的东西：

```
<% If Session("HomePageSeen") Is Nothing Then %>
    <% Session("HomePageSeen") = True %>
    <script>alert('hello');</script>
<% End If %> 
```

# php - Composer 没有读取我的本地 Satis packages.json 文件

> ID：13277110
> 
> 赞同：1
> 
> 时间：2012-11-07T19:51:24.703
> 
> 标签：php, svn, composer-php, packagist, satis

我已经设置我的本地 SVN 存储库来保存所有外部存储库（公司策略），使用 Satis 我创建了 packages.json 文件。当我运行 composer update 我如何告诉它使用我的自定义 packages.json 文件并从我的本地仓库而不是外部提取？

这是我的 svn 存储库所在位置的 packages.json 文件中的简介：

```
"source": {
    "type": "svn",
    "url": "http://blah/packagist/foo/bar",
    "reference": "/tags/2.3.0/@38"
} 
```

但我用来检查这个项目的网址是：

```
http://blah/packagist/foo/bar/tags/2.3.0 
```

在我的 composer.json 文件中，我还添加了这个：

```
"repositories": [
    {
        "packagist": false,
        "type": "composer",
        "url": "http://local/packages.json"
    }
] 
```

但它仍然从 git 而不是我的 svn repo 中提取，我做错了什么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:59:48.853

第一步是像这样正确禁用packagist：

```
"repositories": [
    { "packagist": false },
    {
        "type": "composer",
        "url": "http://local/packages.json"
    }
] 
```

那么我猜如果你需要的包在你的本地仓库中不存在，你可能会得到一个错误。

也就是说，如果它没有捡起它，这可能意味着您的 satis repo 没有包含您需要的所有包，因为如果它们在那里，它们应该优先于 packagegist 的包。如果您只有标签，尽管它可能会选择打包者，因为它们包含 dev-master 和更高的 prio 版本。

# php - 手动设置标识

> ID：13277117
> 
> 赞同：2
> 
> 时间：2012-11-07T19:51:49.767
> 
> 标签：php, doctrine, doctrine-orm

我是教义新手。我有一个带有注释的以下用户类。主键是 $userid，它是字符串。我不想自动设置 $userid，而是手动设置 id。我怎么不知道该怎么做？

```
<?php

namespace models;

/**
 * User
 *
 * @Table(name="user")
 * @Entity
 */
class User
{
/**
 * @var string $userid
 *
 * @Column(name="userid", type="string", length=255, precision=0, scale=0, nullable=false, unique=false)
 * @Id
 * @GeneratedValue(strategy="IDENTITY")
 */
private $userid;

/**
 * @var string $fullname
 *
 * @Column(name="fullname", type="string", length=255, precision=0, scale=0, nullable=false, unique=false)
 */
private $fullname;

/**
 * @var string $password
 *
 * @Column(name="password", type="string", length=255, precision=0, scale=0, nullable=false, unique=false)
 */
private $password;

/**
 * @var string $email
 *
 * @Column(name="email", type="string", length=255, precision=0, scale=0, nullable=false, unique=false)
 */
private $email;

/**
 * Get userid
 *
 * @return string $userid
 */
public function getUserid()
{
    return $this->userid;
}

/**
 * Set fullname
 *
 * @param string $fullname
 */
public function setFullname($fullname)
{
    $this->fullname = $fullname;
}

/**
 * Get fullname
 *
 * @return string $fullname
 */
public function getFullname()
{
    return $this->fullname;
}

/**
 * Set password
 *
 * @param string $password
 */
public function setPassword($password)
{
    $this->password = $password;
}

/**
 * Get password
 *
 * @return string $password
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set email
 *
 * @param string $email
 */
public function setEmail($email)
{
    $this->email = $email;
}

/**
 * Get email
 *
 * @return string $email
 */
public function getEmail()
{
    return $this->email;
}
} 
```

如果我什至将 id 公开并自己设置，则学说 2 仍会插入默认值，即空字符串，从而导致违反完整性约束。有人可以为此提供详细的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:54:30.960

从@Id 定义中删除@GeneratedValue 行。您要求 Doctrine 为您生成 ID。

# php - 从 Magento 中的事件观察器将数据返回给调度程序

> ID：13277121
> 
> 赞同：9
> 
> 时间：2012-11-07T19:52:05.367
> 
> 标签：php, magento

我有一个产品注册扩展，它在保存注册后调度一个事件。如果虚拟产品与注册产品相关，则另一个扩展使用该事件为虚拟产品生成优惠券。

我需要取回生成的优惠券的数据，以通过电子邮件发送给用户以及他们的产品注册详细信息。

有没有办法将观察者的数据返回到事件被调度的地方？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-07T20:18:37.473

Magento 中有一个技巧可用于您的目的。由于您可以将事件数据传递给观察者，例如产品或类别模型，因此还可以创建一个容器，您可以从中获取这些数据。

例如，可以在调度程序中执行此类操作：

```
$couponContainer = new Varien_Object();
Mage::dispatchEvent('event_name', array('coupon_container' => $couponContainer));
if ($couponContainer->getCode()) { 
    // If some data was set by observer...
} 
```

观察者方法可能如下所示：

```
public function observerName(Varien_Event_Observer $observer) 
{
    $couponContainer = $observer->getEvent()->getCouponContainer();
    $couponContainer->setCode('some_coupon_code');
} 
```

享受并玩得开心！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T20:23:31.463

不，系统没有内置任何东西来执行此操作。Magento 约定是创建一个`stdClass`或`Varien_Object`传输对象。

看一下block事件代码

```
#File: app/code/core/Mage/Core/Block/Abstract.php

...
if (self::$_transportObject === null) 
{
    self::$_transportObject = new Varien_Object;
}

self::$_transportObject->setHtml($html);
Mage::dispatchEvent('core_block_abstract_to_html_after',
    array('block' => $this, 'transport' => self::$_transportObject));
$html = self::$_transportObject->getHtml();
... 
```

由于`self::$_transportObject`是一个对象，并且 PHP 对象以类似引用的方式运行，因此在观察者中对传输对象所做的任何更改都将被维护。所以，在上面的例子中，如果观察者开发者说

```
$html = $observer->getTransport()-setHtml('<p>New Block HTML'); 
```

系统块代码中的备份`self::$_transportObject`将包含新的 HTML。请记住，**多个**观察者将有机会更改此值，并且观察者在 Magento 中触发的顺序对于每个配置的系统都是不同的。

您可以采取的第二种方法是使用 Magento 的注册表模式。在之前注册一个变量`dispatchEvent`

# c# - 序列化列表/字典

> ID：13277122
> 
> 赞同：0
> 
> 时间：2012-11-07T19:52:06.307
> 
> 标签：c#, serialization

我有一个应用程序需要序列化自定义对象并将其发送到 Windows 服务，自定义对象包含 2 个自定义对象列表和一个 int、string 字典。当我尝试序列化对象时，我收到错误消息：

`There was an error generating the XML document.`

我搜索了一下，发现这通常是由于没有正确设置序列化的数据类型之一。所以我已经完成并验证了所有自定义类的序列化，并且据我所知它设置正确。

我现在的问题是，默认情况下列表和字典是可序列化的，还是需要做些什么才能序列化它们？或者，是否有更好的方法来序列化要在可执行文件之间传递的自定义对象集合？

**编辑：**

主要自定义类：

```
[Serializable]
class MoveInInfoRequest : ServerRequestData
{ }
[Serializable]
[XmlInclude(typeof(GetUnitTypesResponseData)), XmlInclude(typeof(VendorObj.RequiredFields)),
     XmlInclude(typeof(VendorObj.InsuranceChoice)), XmlInclude(typeof(VendorObj.ProrateSettings))]
public class MoveInInfoResponse : ServerResponseData
{
    public GetUnitTypesResponseData UnitTypesInfo
    { get; set; }
    public List<VendorObj.RequiredFields> RequiredFields 
    { get; set; }
    public Dictionary<int, String> RentalPeriods
    { get; set; }
    public List<VendorObj.InsuranceChoice> InsCoverageAmounts
    { get; set; }
    public VendorObj.ProrateSettings ProrateOptions
    { get; set; }
} 
```

示例子类：其他两个类的设置与此类似，只是时间更长，但它们仅使用默认数据类型。

```
<Serializable(), DataContract([Namespace]:="*companyNamespace*")> _
Public Class InsuranceChoice
    Public Sub New()
    End Sub
    <DataMember()> _
    Public InsuranceChoiceID As Integer
    <DataMember()> _
    Public CoverageDescription As String
    <DataMember()> _
    Public Premium As Decimal
    <DataMember()> _
    Public ActualCoverageAmount As Decimal

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:41:03.433

It depends on what you are trying to serialize them with. In particular, Dictionary objects are not serializable if you are using `XmlSerializer`, though they are if you are using `DataContractSerializer`. You should be fine to serialize a List.

If you would like an alternative to Xml serialization, you could serialize to JSON using [Json.Net](http://json.net/).

References:

[Serialize Class containing Dictionary member](https://stackoverflow.com/questions/495647/serialize-class-containing-dictionary-member?lq=1)

[Serializing .NET dictionary](https://stackoverflow.com/questions/1299071/serializing-net-dictionary)

[Why doesn't XmlSerializer support Dictionary?](https://stackoverflow.com/questions/2911514/why-doesnt-xmlserializer-support-dictionary?lq=1)

[http://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/](http://theburningmonk.com/2010/05/net-tips-xml-serialize-or-deserialize-dictionary-in-csharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:58:43.590

当涉及到序列化时，这是一个很常见的问题。

集合实现`IDictionary` [无法序列化](https://stackoverflow.com/questions/495647/serialize-class-containing-dictionary-member)

您可以使用[DataContractSerializer](http://www.codeproject.com/Tips/314535/XmlSerializer-doesnt-work-with-Dictionaries-Oh-and)，但更好的解决方案（在我看来）是创建自己的 Dictionary 类，该类不继承自`IDictionary`

[可以在此处](http://www.dacris.com/blog/2010/07/31/c-serializable-dictionary-a-working-example/)找到此类的示例

在解决方案中实现类后，只需执行以下操作：

```
using System;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var response = new MoveInInfoResponse
            {
                RentalPeriods = new SerializableDictionary<int, string> 
                { { 1, "Period 1" }, { 2, "Period 2" } }
            };

            string xml = Serialize(response);
        }

        static string Serialize(Object obj)
        {
            var serializer = new XmlSerializer(obj.GetType());
            var settings = new XmlWriterSettings { Indent = true, OmitXmlDeclaration = true };

            using (var stream = new StringWriter())
            {
                using (var writer = XmlWriter.Create(stream, settings))
                    serializer.Serialize(writer, obj);
                return stream.ToString();
            }
        }
    }

    [Serializable]
    public class MoveInInfoResponse
    {
        public SerializableDictionary<int, String> RentalPeriods
        { get; set; }
    }
} 
```

**生成以下 XML 文件：**

```
<MoveInInfoResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <RentalPeriods>
    <Item>
      <Key>
        <int>1</int>
      </Key>
      <Value>
        <string>Period 1</string>
      </Value>
    </Item>
    <Item>
      <Key>
        <int>2</int>
      </Key>
      <Value>
        <string>Period 2</string>
      </Value>
    </Item>
  </RentalPeriods>
</MoveInInfoResponse> 
```

# asp.net-mvc - JQuery Mobile data-rel = 对话框未在 iPhone 或 iPad 上触发

> ID：13277125
> 
> 赞同：0
> 
> 时间：2012-11-07T19:52:13.540
> 
> 标签：asp.net-mvc, jquery-mobile

我发现了一个没有人回答的与我的确切问题有关的问题：

[https://stackoverflow.com/questions/11218707/jquery-mobile-data-rel-dialog-not-firing](https://stackoverflow.com/questions/11218707/jquery-mobile-data-rel-dialog-not-firing)

我有一个对话框，当用户按下按钮时应该打开。它适用于所有桌面浏览器和 Android 浏览器。它不适用于 iPhone 或 iPad 上的 Safari。如果您在 iDevice 上刷新页面，它可以工作。

这是我的按钮：

```
<a href="#popup" data-role="button" data-rel="dialog" data-icon="gear" data-iconpos="right" data-transition="slidedown">@Model.selectedDate.ToShortDateString()</a> 
```

这是我的对话框：

```
<div data-role="dialog" id="popup">

<div data-role="header" data-theme="b">
    <h1>Production Date</h1>
</div>

<div data-role="content" data-theme="b">

@using (Html.BeginForm()) { 
    <div data-role="fieldcontainer">
        @Html.LabelFor(model => model.selectedSystem, "Select a date for System " + Model.selectedSystem)
        @Html.HiddenFor(model => model.selectedSystem)
        @Html.LabelFor(model => model.selectedDate, "Date:")
        @Html.TextBoxFor(model => model.selectedDate, new { type = "date" })
    </div>

    <button type="submit" data-theme="b">Select</button>
}
</div> 
```

这是渲染页面的页面源：

```
 <div data-role="page" id="mainpage" data-theme="b">
    <div data-role="header" data-theme="b" data-position="fixed">
        <center>
            <a href="/Home/Main">
                <img src="/mobileDemo/Images/company_header_logo_mobile.png" border="0" /></a>
        </center>
    </div>
    <div style="text-align: center; padding-top: 5px">
        <center>
            <a href="/mobileDemo/Home/Main">
                <img src="/mobileDemo/Images/menu_home.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/Counts">
                <img src="/mobileDemo/Images/menu_prodcounts.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/Inventory">
                <img src="/mobileDemo/Images/menu_inventory.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/Vehicle">
                <img src="/mobileDemo/Images/menu_vehicle.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/SSAR">
                <img src="/mobileDemo/Images/menu_ssar.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/STAR">
                <img src="/mobileDemo/Images/menu_star.png" style="width: 40px" border="0" /></a>
            <a href="/mobileDemo/EXECDASH">
                <img src="/mobileDemo/Images/menu_dashboard.png" style="width: 40px" border="0" /></a>
        </center>
    </div>
    <div style="padding-left: 20px; padding-top: 10px">
        <strong>Body Dashboard for System 1</strong>
    </div>
    <div style="padding-right: 15px; padding-left: 15px; padding-top: 10px">
        <a href="#popup" data-role="button" data-rel="dialog" data-icon="gear" data-iconpos="right"
            data-transition="pop">11/7/2012</a>
        <hr />
        <ul data-role="listview" data-inset="true">
            <li><a href="/mobileDemo/ExecDash/BodyProd/1/11-07-2012">Production</a></li>
            <li><a href="/mobileDemo/ExecDash/BodyOEE?system=1&amp;date=11-07-2012">Body OEE</a></li>
            <li><a href="/mobileDemo/ExecDash/BodyDKS?system=1&amp;date=11-07-2012">Doukie-Seisan
                KPI</a></li>
            <li><a href="/mobileDemo/ExecDash/BodyDT?system=1&amp;date=11-07-2012">Down Time</a></li>
        </ul>
    </div>
</div> 
```

# 生产日期

为系统 1 选择日期日期：选择

另外值得注意的是，我正在向视图传递一个参数。URL 如下所示：

```
http://internal-server/mobileDemo/ExecDash/Body/1 
```

当正在显示对话框时，这将是：

```
http://internal-server/mobileDemo/ExecDash/Body/1#&ui-state=dialog 
```

什么时候在 iDevice 上不起作用（刷新之前），这是我按住按钮时显示的内容，它为我提供了在新选项卡中打开/打开选项：

```
http://internal-server/mobileDemo/ExecDash/Body/1#popup 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:51:58.603

我让您的示例进行了一些小调整。

1.  使用 VS2012 创建的新项目选择了移动模板。
2.  然后在我的 Home/Index.cshtml 中添加了您的标签，即触发弹出窗口的按钮。将代码更改为文本**@DateTime.Now.ToShortDateString()**因为我没有你的模型。
3.  在关闭 data-role="page" 后，我立即将您的对话框粘贴到 _Layout.cshtml 中，请参见下面的代码：

    ```
    <body>
    <div data-role="page" data-theme="b">
        <div data-role="header">
            @if (IsSectionDefined("Header")) {
                @RenderSection("Header")
            } else {
                <h1>@ViewBag.Title</h1>
                @Html.Partial("_LoginPartial")
            }
        </div>
        <div data-role="content">
            @RenderBody()
        </div>
    </div>

    <div data-role="dialog" id="popup">
        <div data-role="header" data-theme="b">
            <h1>Production Date</h1>
        </div>
        <div data-role="content" data-theme="b">

        @using (Html.BeginForm()) { 
            <div data-role="fieldcontainer">
                <label>hello world</label>

            </div>

            <button type="submit" data-theme="b">Select</button>
        }
        </div>
    </div>

    @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile")
    @RenderSection("scripts", required: false) 
    ```

如您所见，由于没有您的模型，我还取出了您的一些代码，因此我用“hello world”标签代替。那我为什么要这样做呢？好吧，我尝试将对话框放在 index.cshtml 中，但这意味着对话框 HTML 正在 data-role="page" 中获取输出。所以它不是为我开火。一旦我将它移到 data-role="page" div 之外，它就起作用了。在 iPhone5 上进行了测试，并且可以正常工作（无需刷新）。我在这篇文章中注意到你的标记的一件事是你错过了一个结束 DIV。所以我不确定这是复制/粘贴错误还是什么。尝试我的确切步骤，您应该会看到它正在运行并且 iDevice 很好。

# asp.net-mvc - 强制所有区域使用相同的布局

> ID：13277126
> 
> 赞同：92
> 
> 时间：2012-11-07T19:52:12.840
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-routing, asp.net-mvc-areas

我有以下项目结构：

*   /视图/共享/_布局；

*   /Areas/Area1/Views/ControllerName/Index；

...

*   /区域/区域/视图/控制器名称/索引。

有没有办法强制所有区域使用**_Layout**作为**基本布局**？

有没有办法在不添加**_ViewStart**文件的情况下做到这一点（例如，通过路由配置）？

**也可以看看：**

[如何在 ASP.NET MVC 3 razor ViewStart 文件中指定不同的布局？](https://stackoverflow.com/questions/5161380/)

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-11-07T20:03:07.217

您只需添加一个名为：

```
_ViewStart.cshtml 
```

在每个区域视图文件夹下：

```
/Areas/Area1/Views/_ViewStart.cshtml 
```

并编辑文件以指向根布局，如下所示：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

为了使其工作，您不必在视图的布局属性中指定值，如果这样做，您将覆盖全局布局

注意：正如 Tony 提到的，您*可以*编辑每个视图的布局属性以指向根布局，但这不是推荐的方法，因为您会将视图与布局耦合并更改它会很痛苦

### 编辑 1

如果您想使用代码设置默认视图的布局，也许您应该考虑编写自定义视图引擎。

尝试谷歌关于自定义`RazorViewEngine`和`RazorView`

这篇文章可能是一个很好的起点

[http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)

我没有做过这样的事情，但我希望我能指出你正确的方向

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-08T18:12:08.137

扩展 Jupaol 的答案....

至少在VS2013中，_ViewStart.cshtml文件是在创建区域的时候默认添加的，所以它已经存在了，你可以按照他的说明更改内容指向根_Layout.cshtml。然后，您可以删除该区域中的 _Layout.cshtml，因为它不再使用（并且现在是潜在的混淆来源）

但是，通过这样做，在该根 _Layout.cshtml 中执行的任何路由都需要考虑区域。
默认的 _Layout.cshtml 有许多需要稍作修改的 ActionLink 助手：

通过设置 Area="" 将 RouteValueDictionary 参数添加到任何 ActionLink 调用。请注意，空字符串是指根级别。这将允许这些链接在从区域内调用时正常工作，从根调用时仍然有效。

例如：

```
<li>@Html.ActionLink("Home", "Index", "Home", new { Area = "" }, null)</li> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T20:00:37.853

您可以使用以下方式指定布局：

@{ 布局 = "_Layout"; }

如果你想让这更容易一次改变。也许您可以将其设置为视图包变量并将其传递给控制器​​。为了使它更容易，您可以创建一个其他控制器继承的基本控制器，并将布局分配给那里的视图包。

不知道为什么路由需要改变，或者我不明白。希望这可以帮助 ：）

# mysql - JOIN 性能问题 MySQL

> ID：13277127
> 
> 赞同：0
> 
> 时间：2012-11-07T19:52:19.003
> 
> 标签：mysql, nosql

我有一个**MySQL 数据库视图**，它**在 4 个表上进行了 JOIN，**并且所有索引都已正确使用，以前的响应时间足够公平，但随着数据库快速增长，**响应时间逐渐下降**，那么我们如何**调整性能**? 我是解决这种复杂性的新手，我是否需要考虑**数据库镜像或分区或 NoSQl**，如果可以支持任何文档，这对学习很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:55:09.077

根据您的检索/使用模式，我建议在所有连接条件中使用`Partitioning`和**使用分区属性并作为第一个过滤条件。**

# youtube-api - 关于 youtube IFrame API 的一些问题

> ID：13277131
> 
> 赞同：1
> 
> 时间：2012-11-07T19:52:37.060
> 
> 标签：youtube-api

使用 IFrame API，视频是使用 html5 容器还是 flash 容器播放取决于很多因素。我想知道：是否可以设置一些参数或调用函数来强制播放器为 flash（或 html5）？

另外，rel=0 在 Iframe API 中似乎不起作用，当我将其设置为 0 时，仍然显示相关视频，是我的代码有问题吗？谢谢！

```
 player = new YT.Player('player', {
      height: '300', //720
      width: '400', //1280
      videoId: 'S2Rgr6yuuXQ',  
      playerVars: { 'rel': 0 }, // or rel: 0, rel: '0', all don't work
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
        'onError': onErrorDetected,
        'onPlaybackQualityChange': onQualityChange
        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:40:42.057

我认为 iframe 选项不包含选择 html5 或 flash 选项的参数，因为 iframe API 自动使用最佳选项。

如果可用，您可以尝试指定使用 HTML5：

[强制 HTML5 youtube 视频](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)

[HTML5 格式的 YouTube 视频](https://stackoverflow.com/questions/3520113/youtube-video-in-html5?lq=1)

并且您可以使用 SWFObject 选项在客户端中仅使用 flash 播放器（如果客户端支持 flash ..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T18:14:30.660

使用在 src 中`playerVars: { html5: 1 }`加载具有`html5=1`属性的 iframe，类似于[Force HTML5 youtube video](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T03:51:02.727

代替

```
playerVars: { 'rel': 0 } 
```

和

```
playerVars: { 'rel': '0' } 
```

# c# - 在 Windows 应用商店应用程序的默认媒体播放器上播放视频？

> ID：13277133
> 
> 赞同：1
> 
> 时间：2012-11-07T19:52:45.817
> 
> 标签：c#, xaml, video, windows-store-apps

我想实现一个在默认媒体播放器中播放视频的功能，该功能来自使用 Xaml 和 C# 的 Windows 商店应用程序。

我不想嵌入播放器我想用默认播放器打开一个新窗口并告诉它播放选定的文件。

我发现的所有示例都是创建嵌入式播放器或发送到设备。

有谁能够帮我？谢谢...

# c# - 在 Expression Blend 设计器中对我的控件的属性进行排序

> ID：13277135
> 
> 赞同：2
> 
> 时间：2012-11-07T19:52:53.310
> 
> 标签：c#, .net, expression-blend, blend, expression-blend-4

我创建了我的新类别“MyCategory”来存储我的控件的所有属性，在设计模式（Expression Blend 4）中，就像这些类别：

![在此处输入图像描述](../Images/38d634930d2361beba60155b47e9c95a.png)

默认情况下，我的类别下的所有属性都按字母顺序排序。

可以选择顺序吗？

谢谢你。

# php - 使用 PHP 操作数据，将 SQLite 数据库转换为 excel 电子表格

> ID：13277142
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:26.130
> 
> 标签：php, database, excel, sqlite, data-manipulation

我有 tbl_building、tbl_rooms、tbl_lighting 等表。

每个都有自己的元组，因此可以有许多建筑物、建筑物内的许多房间以及房间内的许多照明项目。这是通过为每个建筑物/房间/照明提供自己的 ID 来构建的。

我要完成的任务之一是在 Excel 电子表格中为每个建筑物内的每个房间显示灯光列表。

这是我的代码。这显然是错误的，但我无法理解输出数据。

```
function getLights($buildingID, $d, $objPHPExcel, $status){

        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Please Enter Hours Of Usage: ');
        include("setText.php");$status[2]++;

        $groupStart = $status[1].$status[2];
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Lights Used:');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Count');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'kWh/yr');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Energy Saving kWh/yr');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Saving(£)');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Cost');
            $status[1]++;
            $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Change To...');    
        $groupEnd = $status[1].$status[2];

        include("setHeadersText.php");groupFill($objPHPExcel, $groupStart, $groupEnd, "calc");
        $status[2]++;$status[1] = chr(65);

        $query = "SELECT r_id FROM tbl_roomDesc WHERE b_id = '$buildingID'";
        $result = $d->query($query);
        $rooms = array();

        array_push($rooms, 2);//echo "<br/>".$row['r_id'];

            //echo "<br/>Building:";
        /*while($row = $result->fetchArray(SQLITE3_ASSOC)){ 
            array_push($rooms, $row['r_id']);//echo "<br/>".$row['r_id'];
        }*/

        //echo "<br/>";
        //var_dump($rooms);

        $lightArray = array(
            "CFL",
            "CFL Equivalent Halogen 100w spot",
            "CFL Equivalent Halogen 50w spot",
            "Double d",
            "Halogen 100w spot",
            "Halogen 50w spot",
            "PL",
            "T12 Single 4ft",
            "T12 Single 5ft",
            "T12 Single 6ft",
            "T12 Single 8ft",
            "T12 Twin 4ft",
            "T12 Twin 5ft",
            "T12 Twin 6ft",
            "T12 Twin 8ft",
            "T5 Quad 2ft",
            "T5 Quad 4ft",
            "T5 Single 4ft",
            "T5 Single 5ft",
            "T5 Triple 2ft",
            "T5 Triple 4ft",
            "T5 Triple 5ft",
            "T5 Twin 2ft",
            "T5 Twin 4ft",
            "T5 Twin 5ft",
            "T8 Quad 2ft",
            "T8 Quad 4ft",
            "T8 Single 4ft",
            "T8 Single 5ft",
            "T8 Single 6ft",
            "T8 Twin 2ft",
            "T8 Twin 4ft",
            "T8 Twin 5ft",
            "T8 Twin 6ft", 
            "Tungsten 60w",
            "Other"
            );

        //echo sizeof($lightArray);

        //for each room, get quant wattage and hours of each light referenced by the room id

        echo sizeOf($rooms);
        echo "<br/>";
        for($i=0; $i<sizeof($rooms);$i++){

            //set empty arrays
            $size = 36;
            $lightQuantityCount = array_fill(0, $size, 0);
            $lightWattageCount = array_fill(0, $size, 0);
            $lightHoursCount = array_fill(0, $size, 0);

            //get all lighting data of particular room
            $query2 = "SELECT * FROM tbl_lightingData WHERE r_id = '$rooms[$i]'";
            $result2 = $d->query($query2);
            $row2= $result2->fetchArray(SQLITE3_ASSOC);

            //for each light type in the lightarray chechk if light type from query == light type in array, if so add quantity, wattage and hours to arrays

            while($row2=$result2->fetchArray(SQLITE3_ASSOC)){

                echo "<br/>Room ID: ".$rooms[$i]."<br/>";
                $lightID = $row2['l_id'];
                $lightType = $row2['lightType'];
                $lightQuantity = $row2['lightQuantity'];
                $lightWattage = $row2['lightWattage'];
                $lightHours = $row2['lightHours'];
                echo "Light Profile:<br/>Light ID:  ".$lightID."<br/>Light Type:  ".$lightType."<br/>Light Wattage:  ".$lightWattage."<br/>Light Hours:  ".$lightHours."<br/>";

                for($j=0; $j<sizeof($lightArray); $j++){
                    if($lightType == $lightArray[$j]){
                        echo "<br/>MATCH<br/>";
                        $lightQuantityCount[$j] = $lightQuantityCount[$j] + $lightQuantity;
                        $lightWattageCount[$j] = $lightWattage;
                        $lightHoursCount[$j] = $lightHoursCount[$j] + $lightHours;
                    }
                    else{
                        echo "<br/>NO MATCH<br/>";
                    }
                }
            }

            //echo"<br/>ARRAY DUMP START:<br/>";
            //var_dump($lightQuantityCount);
            //echo"<br/>ARRAY DUMP END:<br/><br/>";

            echo "<br/>ADFSDFADFA : ".sizeof($lightQuantityCount);
            echo "<br/>ADFSDFADFA : ";

            for($k=0; $k<sizeof($lightQuantityCount); $k++){

                if($lightQuantityCount[$k] != 0){

                    echo "<br/>Light Type: ".$lightArray[$k]."<br/>";
                    echo "Light Quantity Count: ".$lightQuantityCount[$k]."<br/>";
                    echo "Wattage Count: ".$lightWattageCount[$k]."<br/>";
                    echo "Hours Count: ".$lightQuantityCount[$k]."<br/>";

                    include("setText.php");$status[2]++;

                    $groupStart = $status[1].$status[2];
                        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $lightArray[$k]);
                        $status[1]++;
                        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $lightQuantityCount[$k]);
                        $status[1]++;

                        $calc = $lightWattageCount[$k] * $lightQuantityCount[$k];
                        $calc2 = $calc / 1000;

                        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $calc2);
                    $groupEnd = $status[1].$status[2];

                    include("setHeadersText.php");groupFill($objPHPExcel, $groupStart, $groupEnd, "calc");
                    $status[2]++;$status[1] = chr(65);
                }
            }
        }

return $status; 
```

}

评论获取更多信息，谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:10:23.473

再花几个小时后问题就解决了（代码中的头部），我已经设法克服了操作我存储在数据库中的数据的困惑。我的问题是我跳入了太多的 for 循环，我应该做加入之前的具体策略。

因此，下面的代码获取建筑物及其房间，并计算建筑物房间内的所有灯光。我希望这对那些遇到数据库问题以及将数据提取/操作为其他格式（如 excel）的人有所帮助。这就是堆栈溢出的正确性。这是代码：

```
//prints list of lights used in building with kwh/year and savings 
```

函数 getLights($buildingID, $d, $objPHPExcel, $status){

```
$objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Lighting Information: ');
include("setText.php");$status[2]++;

$groupStart = $status[1].$status[2];
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Lights Used');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Count');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'kWh/yr');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Energy Saving kWh/yr');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Saving(£)');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Cost');
    $status[1]++;
    $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], 'Change To...');    
$groupEnd = $status[1].$status[2];

include("setHeadersText.php");groupFill($objPHPExcel, $groupStart, $groupEnd, "calc");
$status[2]++;$status[1] = chr(65);

$query = "SELECT r_id FROM tbl_roomDesc WHERE b_id = '$buildingID'";
$result = $d->query($query);
$rooms = array();

while($row = $result->fetchArray(SQLITE3_ASSOC)){ 
    array_push($rooms, $row['r_id']);
}

$lightArray = array(
"CFL",
"CFL Equivalent Halogen 100w spot",
"CFL Equivalent Halogen 50w spot",
"Double d",
"Halogen 100w spot",
"Halogen 50w spot",
"PL",
"T12 Single 4ft",
"T12 Single 5ft",
"T12 Single 6ft",
"T12 Single 8ft",
"T12 Twin 4ft",
"T12 Twin 5ft",
"T12 Twin 6ft",
"T12 Twin 8ft",
"T5 Quad 2ft",
"T5 Quad 4ft",
"T5 Single 4ft",
"T5 Single 5ft",
"T5 Triple 2ft",
"T5 Triple 4ft",
"T5 Triple 5ft",
"T5 Twin 2ft",
"T5 Twin 4ft",
"T5 Twin 5ft",
"T8 Quad 2ft",
"T8 Quad 4ft",
"T8 Single 4ft",
"T8 Single 5ft",
"T8 Single 6ft",
"T8 Twin 2ft",
"T8 Twin 4ft",
"T8 Twin 5ft",
"T8 Twin 6ft", 
"Tungsten 60w",
"Other"
);

$size = 36;
$lightQuantityCount = array_fill(0, $size, 0);
$lightWattageCount = array_fill(0, $size, 0);
$lightHoursCount = array_fill(0, $size, 0);

    $id_nums = implode(", ", $rooms);

    $query2 = "SELECT * FROM tbl_lightingData WHERE r_id IN ($id_nums)";
    $result2 = $d->query($query2);

    while($row2=$result2->fetchArray(SQLITE3_ASSOC)){

        $lightID = $row2['l_id'];
        $roomID = $row2['r_id'];
        $lightType = $row2['lightType'];
        $lightQuantity = $row2['lightQuantity'];
        $lightWattage = $row2['lightWattage'];
        $lightHours = $row2['lightHours'];

    for($a=0; $a<sizeOf($lightArray); $a++){

        if($lightType == $lightArray[$a]){
            $lightQuantityCount[$a] = $lightQuantityCount[$a] + $lightQuantity;
            $lightWattageCount[$a] = $lightWattage;
            $lightHoursCount[$a] = $lightHours;
        }
    }
}

for($b=0; $b<sizeOf($lightArray); $b++){

    $groupStart = $status[1].$status[2];
        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $lightArray[$b]);
        $status[1]++;
        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $lightQuantityCount[$b]);
        $status[1]++;

        $calc = $lightWattageCount[$b] * $lightQuantityCount[$b];
        $calc2 = $calc / 1000;

        $objPHPExcel->getActiveSheet()->setCellValue($status[1].$status[2], $calc2);
    $groupEnd = $status[1].$status[2];

    $status[2]++;$status[1] = chr(65);
}

return $status; 
```

}

有用的链接：

将数组内爆以在 sql 中形成查询：内[爆数组以用作 sql 查询](https://stackoverflow.com/questions/5468204/select-rows-from-a-mysql-table-where-value-is-an-array)

PHP Excel，非常适合 PHP->EXCEL 转换：

[链接到 PHP Excel](http://phpexcel.codeplex.com/)

以及来自 php 手册的旧信任数组：

[ARRAY 手册 PHP](http://php.net/manual/en/language.types.array.php)

这是我的代码输出的图像：

![上面代码的输出图像](../Images/e1df3f12333fae96e4e995f8066f2af8.png)

关于这个问题的任何问题，评论！

# c# - 适用于 Android 的 Mono - 支持的架构 - 放弃 x86？

> ID：13277146
> 
> 赞同：8
> 
> 时间：2012-11-07T19:53:36.183
> 
> 标签：c#, android, mono, xamarin.android, xamarin

我们有一个近乎完整的应用程序，并且正试图压缩 Google Play 的 50MB 下载限制。

在检查我们的 APK 以尝试找到减小文件大小的方法时，我注意到[此处](http://docs.xamarin.com/Android/Guides/Advanced_Topics/CPU_Architecture)`lib\x86`描述的、`lib\armeabi`和`lib\armeabi-v7a`目录。它们对应于 Mono for Android 项目的项目选项中的“支持的架构”选项。

如果我删除 x86，我会在 APK 大小上节省大约 1.1 MB。（这几乎足以让我们低于 50MB）

*   删除 x86 有什么缺点？
*   我的 APK 还能在 x86 设备上运行吗？
*   x86 设备在 Google Play 上是否有可观的市场份额？
*   如果它不能在 x86 上运行，Google Play 会阻止我的 APK 安装在 x86 设备上吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:47:07.600

请注意，以下答案适用于一般 Android 开发，不反映任何特定于 Mono 的内容：

> 删除 x86 有什么缺点？

您的应用将无法在 x86 设备上运行。英特尔可能会哭。

> 我的 APK 还能在 x86 设备上运行吗？

不。

> x86 设备在 Google Play 上是否有可观的市场份额？

恕我直言，目前没有。2012 年发布了一些由英特尔驱动的手机（例如，摩托罗拉 RAZR i），第一代谷歌电视设备由英特尔 CPU 驱动。但是 Google TV 已经切换到 ARM，而且英特尔 CPU 还需要一段时间才能在 Android 设备生态系统中占据相当大的一部分（恕我直言）。

> 如果它不能在 x86 上运行，Google Play 会阻止我的 APK 安装在 x86 设备上吗？

它应该。如果不是，则 Play 商店存在严重问题。虽然我有一个 RAZR 我坐在这里，但我不知道有一个应用程序使用 x86 不附带的本机代码，以查看有问题的应用程序是否确实从 Play 商店中过滤掉了。

> 正在尝试压缩 Google Play 的 50MB 下载限制

如果 1.1MB 的节省“几乎足以让 [您] 低于 50MB”，那么您已经遇到了麻烦。随着时间的推移，应用程序往往会增长，而不是缩小。如果您希望最终能够切换到其他分发架构（例如，使用 APK 扩展文件）并且只需要一个短期的权宜之计，那么切割 x86 可能是可以的。但是您确实需要制定一个计划来应对应用程序大小的增长，以使您回到 50MB 的障碍，并且您现在可能会更好地解决这个问题，而不是交付一些东西并因此发现自己陷入困境。

# java - java中的文件无法正确下载

> ID：13277147
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:37.000
> 
> 标签：java, web-applications, web

我想将文件从服务器下载到客户端计算机。但我希望从浏览器下载文件：我希望将文件保存在下载文件夹中。

我使用以下代码下载文件。

```
public void descarga(String address, String localFileName) {

OutputStream out = null;
URLConnection conn = null;
InputStream in = null;
try {
    // Get the URL
    URL url = new URL(address);
    // Open an output stream to the destination file on our local filesystem

    out = new BufferedOutputStream(new FileOutputStream(localFileName));
    conn = url.openConnection();
    in = conn.getInputStream();

    // Get the data
    byte[] buffer = new byte[1024];
    int numRead;
    while ((numRead = in.read(buffer)) != -1) {
        out.write(buffer, 0, numRead);
    }
    // Done! Just clean up and get out
} catch (Exception exception) {
    exception.printStackTrace();
} finally {
    try {
        if (in != null) {
            in.close();
        }
        if (out != null) {
            out.close();
        }
    } catch (IOException ioe) {
        // Shouldn't happen, maybe add some logging here if you are not
        // fooling around ;)
    }
    } 
```

它可以工作，但除非我指定绝对路径，否则它不会下载文件，因此从具有不同浏览器的不同客户端使用是无用的，因为网页甚至不会提示让用户知道正在下载文件的消息。我可以添加什么来让它工作？

谢谢

# unix - 复制文件后wget不退出

> ID：13277149
> 
> 赞同：2
> 
> 时间：2012-11-07T19:53:46.147
> 
> 标签：unix, wget

在我的 Unix 服务器上，我执行此命令以通过 unix shell 从 folderc 复制所有内容。

```
wget -r -nH --accept=ismv,ismc,ism,jpg --cut-dirs=5 --level=0 --directory-prefix="/root/sstest"  -o /root/sstest2.log http://site.com/foldera/folderb/folderc/ 
```

folderc 中的所有内容实际上都复制到 /root/sstest 。

`wget`复制后不退出并带我回到命令提示符。

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-02T08:01:08.070

我遇到了同样的问题，我只是在 URL 的前面和结尾添加了单引号。这一步解决了我的这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:54:15.460

HTTP 服务器可能错误地传达了响应的长度，因此 Wget 一直在等待更多数据。这可能是由于您在交互式 Web 浏览器中没有注意到的 Wget 或服务器（或服务器上运行的软件组件）中的错误。

要对此进行调试，请确保您运行的是最新版本的 Wget。如果问题仍然存在，请使用该`-d`标志收集调试输出，并将有关不当行为的报告发送给 Wget 开发人员`bug-wget@gnu.org`。在发送报告之前，请务必从报告中删除敏感数据，例如密码或内部主机名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T12:34:04.320

使用 wget 从 Dropbox 下载文件时，我观察到类似的问题：

*   下载完成（文件已​​完成）

*   wget（或 curl，取决于我用于下载的内容）在文件完成后不再显示在正在运行的进程中

*   wget（或 curl）不返回命令提示符

*   只需按 Enter 即可“强制”返回命令提示符，我不必实际杀死任何进程即可返回命令提示符，只是在我再按一次 Enter 之前卡住了。

问题不是 wget 特有的，当我尝试使用 curl 从同一位置下载同一文件时也会发生此问题。如果我从多个 unix Web 服务器下载相同的文件，无论是使用 wget 还是使用 curl，都不会出现此问题。

我曾尝试使用超时（有足够长的时间）来强制 wget/curl 返回命令提示符，但在超时杀死它们后它们甚至不会返回命令提示符。

# javascript - Android XmlHttpRequest 上的 Phonegap 在模拟器和浏览器中工作，而不是在设备上

> ID：13277150
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:49.097
> 
> 标签：javascript, android, cordova, xmlhttprequest, cross-domain

我被困住了。当我在我的设备上测试时，我的 XmlHttpRequests 不工作，但它们在模拟器和我的浏览器中工作得很好。

此外，我已将该域添加到我的白名单中。真正奇怪的部分是它昨天在设备上也运行得很好。有任何想法吗？我对电话应用程序和 phonegap 是全新的。

```
<!--
    access elements control the Android whitelist.
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->
    <access origin="http://*.mydomain.com" />Code not neede 
```

- - - - - - - 编辑 - - - - - - - -

我不确定为什么，或者发生了什么。在玩了一些之后，我改变了。

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->
<access origin="http://*.mydomain.com" /> 
```

到

```
<access origin="*"/> 
```

问题依然存在。只是为了尝试它，我关闭了 eclipse，然后重新打开它以再次运行该应用程序并且它工作正常。我认为在更改 config.xml 文件后需要重新启动 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:14:05.937

看看这个问题：[Access-Control-Allow-Origin Error At Android 4.1](https://stackoverflow.com/questions/11318703/access-control-allow-origin-error-at-android-4-1) The (not accepted but highvoted) answer可能会解决问题。

科尔多瓦有一个问题：[https ://issues.apache.org/jira/browse/CB-1101](https://issues.apache.org/jira/browse/CB-1101)

# wcf - 长期运行的 WCF 服务

> ID：13277151
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:50.293
> 
> 标签：wcf

我想构建一个在启动时创建线程的服务。然后，WCF 服务接收请求并将工作放入队列中以由后台线程处理。

理想情况下，我认为如果 WCF 服务由 IIS 托管，这将是最简单的，但您似乎无法像这样创建一个长时间运行的后台线程。

如何使用 WCF 完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:42:12.123

If you need a long-running background thread, consider hosting the WCF service in a Windows service: [http://msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# javascript - 在构造函数中激活淘汰赛

> ID：13277152
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:51.410
> 
> 标签：javascript, knockout.js

不必使用`ko.applyBindings(new SomeClass());`在类上激活 knocokout，我可以只`ko.applyBindings(this);`在 的构造函数中使用`SomeClass`吗？在我看来，我认为必须在课堂之外应用它是不好的 OOP。在类中定义它应该做什么不是更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:29:53.420

如果`SomeClass`是您的整体视图模型的构造函数，并且您不打算创建 的多个实例`SomeClass`，那么您可以`ko.applyBindings`从构造函数中调用。

对同一个元素多次调用`ko.applyBindings`有一些不好的副作用（多个绑定+附加的多个事件处理程序），所以你要小心你只调用一次或调用它传递不同的 DOM 元素作为根作为第二个争论。

# android - 试图通过动画视图在 Android 中讲述一个视觉丰富的故事

> ID：13277154
> 
> 赞同：0
> 
> 时间：2012-11-07T19:53:58.273
> 
> 标签：android, animation, opengl-es, opengl-es-2.0, renderscript

我正在尝试使用照片和视频创建动画，以在 ICS 上方的 Android 平板电脑上讲述故事。故事板在视觉上很丰富，动画类似于[这里的视频](http://www.youtube.com/watch?feature=player_detailpage&v=IYp8TabJ2f8)。

做这样的事情的最好方法是什么。我做了一些搜索，发现在 Android 上我们有

1.  OpenGL ES 2.0，在原始级别做所有事情。
2.  Renderscript，为本地代码卸载计算密集型任务，但可移植
3.  ViewProperty Animator，在任何视图上的任何属性上更轻松的动画。

对于我的情况，最好的选择是什么。任何帮助，将不胜感激。为了获得灵感，我正在寻找做类似事情的应用链接。我还在寻找任何可以在 OpenGL 之上工作的库，它可以帮助我尽早到达那里并获得更好的可维护代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:17:37.907

我曾使用过 RenderScript，它本质上与 OpenGL 一样原始，而且在许多情况下更多是因为缺少库。在我看来，OpenGL ES 是你最好的选择。有许多可用的库，但据我所知，您仍然需要编写相当多的代码来执行动画、加载图像、同步故事情节等。我的建议是看看[Rajawali](http://www.rozengain.com/blog/2011/08/23/announcing-rajawali-an-opengl-es-2-0-based-3d-framework-for-android/)对于一个非常好的库，它肯定包含实际 GL 管理的所有功能。此外，只要您不做一些疯狂的 GLSL 工作，您将拥有一款与 RenderScript 一样可移植的软件。当您尝试保存比 GL 规范、颜色深度等更多的纹理时，问题就会出现，而 RenderScript 通过基本上强制没有程序能够超过基本 Open GL 规范来管理这些纹理。此外，不推荐使用用于图形的 RenderScript，这也是我们公司转向 Rajawali 的原因。浏览他的教程，如果你愿意编写胶水代码，它肯定有你想做的事情的能力。

# android - 如何在各自的片段中同步两个不同 ListView 的滚动距离？

> ID：13277160
> 
> 赞同：1
> 
> 时间：2012-11-07T19:54:18.840
> 
> 标签：android, android-listview

我有两个片段，每个片段都包含一个列表视图。左侧片段中的列表视图附加了一个很长的标题视图。右侧的片段列表视图具有不同高度的列表元素（通常只有一个元素可以长于显示的高度）。保证右片段的列表视图总是比左片段列表视图的长度（以像素为单位）短得多。

我想做的是，如果我触摸并拖动/甩动左侧，右侧在与拖动/甩动操作相同的方向上移动大致相同的距离。如果右片段的列表视图到达列表的末尾（或开头），它应该停留在那里。如果我操作正确的列表视图，它应该像往常一样工作。

根据 sabadow 的要求，这里有一些代码。首先，左片段：

```
public class LeftFragment extends SherlockFragment {
    private LeftFragmentListener listener;

    // The Activity must implement this interface.
    public interface LeftFragmentListener {
        public void syncScroll(int diffY);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        try {
            listener = (LeftFragmentListener)activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement LeftFragment.LeftFragmentListener");
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment.
        final ListView lv = (ListView)inflater.inflate(R.layout.main_left_fragment, container, false);
        final View header = inflater.inflate(R.layout.main_left_fragment_header, null);
        lv.addHeaderView(header);

        ... calls setAdapter, etc. ...

        lv.setOnScrollListener(new OnScrollListener() {
            private int lastY;

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                View c = view.getChildAt(0);
                if (c != null)
                {
                    int currY = c.getTop();
                    int diffY = currY - lastY;

                    lastY = currY;

                    listener.syncScroll(diffY);
                }
            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                if (scrollState != SCROLL_STATE_IDLE)
                {
                    View c = view.getChildAt(0);
                    if (c != null)  lastY = c.getTop();
                }
            }
        });

        return lv;
    }
} 
```

现在，活动：

```
public class MainActivity extends MySlidingActivity implements LeftFragment.LeftFragmentListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Two list views.
            setContentView(R.layout.main_two_frags);
    }

    @Override
    public void syncScroll(int diffY) {
        RightFragment f = (RightFragment)getSupportFragmentManager().findFragmentById(R.id.main_right_fragment);
        if (f != null)  f.execSyncScroll(diffY);
    }
} 
```

现在是正确的片段：

```
public class RightFragment extends SherlockFragment {
    private ListView lv;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment.
        lv = (ListView)inflater.inflate(R.layout.main_right_fragment, container, false);
        ... calls setAdapter, etc. ...

        return lv;
    }

    // Event sync across fragments - only used when the two views are showing.
    public void execSyncScroll(int diffY)
    {
        Log.e("setSelection", "lastY + diffY = " + (lastY + diffY));
//      lv.setSelectionFromTop(0, lastY + diffY);
//      lv.scrollBy(0, -diffY);
// Nothing I've tried works.
    }
} 
```

上面我说“我没有尝试过任何东西”的评论是我卡住的地方。我不知道该怎么做才能让 ListView 滚动。

scrollBy() 无法正常工作。它不会将滚动绑定到滚动条，也不会显示 ListView 中的所有项目。setSelectionFromTop() 根本不做任何事情。使用 OnTouchListener 并传递 MotionEvent（而不是“int”）会导致应用程序在尝试调用 lv.dispatchTouchEvent() 时崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:34:58.323

经过更多的搜索、挠头和脑细胞，我想出了：

```
 lv.smoothScrollBy(-diffY, 0); 
```

这会立即在我想要的方向上滚动差异。我仍然有一个崩溃错误，其中“lv”对象变得无效（例如将横向旋转到纵向）并且另一个列表视图的 OnScrollListener() 调用侦听器，Activity 将它传递给正确的视图，但它已经变得无效或消失了离开，所以引发了异常。但我现在可以弄清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:01:07.057

这在同一个活动中对我有用，也许你可以将它应用于你的片段？

[如何同步两个 Listview 位置](https://stackoverflow.com/questions/11906263/how-to-syncronisize-two-listview-positions/16168749#16168749)

# variables - 如何从 for-each 传递一个值以从 XSL 中的另一个节点集中进行选择？

> ID：13277163
> 
> 赞同：2
> 
> 时间：2012-11-07T19:54:32.540
> 
> 标签：variables, xslt, foreach

鉴于我的输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<FlightAvailability>
    <FareDetails>
        <Fare ID="2007" DepartureDate="2012-11-23T07:05:00">
            <FareTypes>
                <FareType FareType="Promo1">
                    <FareInfo Class="Y" FareBasis="Y" Fare="1500"/>
                </FareType>
                <FareType FareType="Promo2">
                    <FareInfo Class="Y" FareBasis="Y" Fare="1000"/>
                </FareType>
            </FareTypes>
        </Fare>
        <Fare ID="2008" DepartureDate="2012-11-23T08:00:00">
            <FareTypes>
                <FareType FareType="Promo1">
                    <FareInfo Class="Y" FareBasis="Y" Fare="2500"/>
                </FareType>
                <FareType FareType="Promo2">
                    <FareInfo Class="Y" FareBasis="Y" Fare="2000"/>
                </FareType>
            </FareTypes>        
        </Fare>
    </FareDetails>
    <SegmentDetails>
        <Segment ID="2007" Origin="DEL" Destination="BOM"
            DepartureDate="2012-11-23T07:05:00" Airline="YY" ArrivalDate="2012-11-23T08:55:00"
            Stops="0" AircraftType="320"
            FlightNum="100"/>
        <Segment ID="2008" Origin="DEL" Destination="BOM"
            DepartureDate="2012-11-23T08:00:00" Airline="YY" ArrivalDate="2012-11-23T09:55:00"
            Stops="0" AircraftType="320" FlightNum="200"/>
    </SegmentDetails>
</FlightAvailability> 
```

我想创建一个输出 XML，其中我选择 FareType“Promo1”的 FareTypes，并通过匹配 ID（例如 Fare 和 Segment 标签中的 2007）找到相应的 Segment。当我在 FareDetails/Fare 中迭代 for-each 并获取 ID 时，我如何传递 ID 并获取特定的 Segment 信息。我是 XSL 的新手，知道这可能应该用参数调用模板，其中参数是 ID，但无法设置它。我试图传递一个变量，但它没有从 Segments 中挑选任何东西。

这是我尝试过的 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output  version="1.0" method="xml" omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="/">
   <xsl:element name="AvailRS">
        <xsl:element name="Availability">
                        <xsl:for-each select="//FareDetails/Fare">
                                <xsl:element name="item">
                                <xsl:element name="Fares">
                <xsl:variable name = "lfid" select="@ID"/>
                <xsl:element name = "ID"><xsl:value-of select="$lfid"/></xsl:element>
                <xsl:for-each select="FareTypes/FareType[@FareType='Promo1']">
                                        <xsl:element name="item">
                                    <xsl:element name="BaseAmount">
                        <xsl:value-of select="ceiling(FareInfo/@Fare)"/>
                           </xsl:element>
                           <xsl:element name="FareBasisCode">
                                <xsl:value-of select="FareInfo/@FareBasis"/>
                           </xsl:element>
                           <xsl:element name="FareClass">
                                <xsl:value-of select="FareInfo/@Class"/>
                           </xsl:element>
                          </xsl:element>
                        </xsl:for-each>
                        </xsl:element>
                <xsl:element name="Flights">
                    <xsl:variable name="seg" select="//SegmentDetails/Segment[@ID='$lfid']"/>
                          <xsl:element name="item">
                        <xsl:element name="FlightNumber"><xsl:value-of select="$seg/@FlightNum"/></xsl:element>
                        <xsl:element name="DepTime"><xsl:value-of select="$seg/@DepartureDate"/></xsl:element>
                        <xsl:element name="ArrTime"><xsl:value-of select="$seg/@ArrivalDate"/></xsl:element>
                        <xsl:element name="Origin"><xsl:value-of select="$seg/@Origin"/></xsl:element>
                        <xsl:element name="Destination"><xsl:value-of select="$seg/@Destination"/></xsl:element>
                        <xsl:element name="Stops"><xsl:value-of select="$seg/@Stops"/></xsl:element>
                        <xsl:element name="Aircraft"><xsl:value-of select="$seg/@AircraftType"/></xsl:element>
                      </xsl:element>
                        </xsl:element>
            </xsl:element>
                </xsl:for-each>
  </xsl:element>
  <Status>Success</Status>
  </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

这不会从 Segment 中选择数据：

```
<AvailRS>
  <Availability>
    <item>
      <Fares>
        <ID>2007</ID>
        <item>
          <BaseAmount>1500</BaseAmount>
          <FareBasisCode>Y</FareBasisCode>
          <FareClass>Y</FareClass>
        </item>
      </Fares>
      <Flights>
        <item>
          <FlightNumber></FlightNumber>
          <DepTime></DepTime>
          <ArrTime></ArrTime>
          <Origin></Origin>
          <Destination></Destination>
          <Stops></Stops>
          <Aircraft></Aircraft>
        </item>
      </Flights>
    </item>
    <item>
      <Fares>
        <ID>2008</ID>
        <item>
          <BaseAmount>2500</BaseAmount>
          <FareBasisCode>Y</FareBasisCode>
          <FareClass>Y</FareClass>
        </item>
      </Fares>
      <Flights>
        <item>
          <FlightNumber></FlightNumber>
          <DepTime></DepTime>
          <ArrTime></ArrTime>
          <Origin></Origin>
          <Destination></Destination>
          <Stops></Stops>
          <Aircraft></Aircraft>
        </item>
      </Flights>
    </item>
  </Availability>
  <Status>Success</Status>
</AvailRS> 
```

我想在上面的例子中得到的是与通过 ID 属性（2007、2008）连接的 Fare 对应的 Segment 信息，但是 $id 变量不起作用。如何选择对应的ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:45:59.627

您需要删除变量引用周围的引号。改变

```
//SegmentDetails/Segment[@ID='$lfid'] 
```

到

```
//SegmentDetails/Segment[@ID = $lfid] 
```

否则，您将要求 XSLT 将 ID 属性的值与文字 string 进行比较`$lfid`。

# django - Django 身份验证后端返回多个状态值

> ID：13277164
> 
> 赞同：0
> 
> 时间：2012-11-07T19:54:39.817
> 
> 标签：django, authentication, login, custom-backend

我正在编写自定义身份验证后端（和自定义用户模型）来检查用户帐户是否被锁定或过期。我看到，在所有身份验证后端返回值的示例中，要么是用户对象，要么是无。生成的唯一异常是 User.DoesNotExist。

我的问题是我应该如何返回不同的结果（例如帐户被锁定或过期或已达到最大登录尝试次数）？

我应该提出自定义异常还是有其他方法可以做到这一点？

我正在使用 Django 1.5alpha。

编辑：我需要获得多个状态才能向用户显示适当的消息并重定向到适当的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:12:05.293

如文档中所述：

> 无论哪种方式，authenticate 都应该检查它获得的凭据，如果凭据有效，它应该返回一个与这些凭据匹配的 User 对象。如果它们无效，它应该返回 None。

被锁定、过期或已达到其最大登录尝试次数的帐户将被视为“无效”，因此`None`应针对这些情况返回。

基本上，`None`只要登录被拒绝访问（无论出于何种原因），都应该返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:41:43.557

我最终这样做了，以防有人有同样的问题。

```
class UserNotActivatedError(Exception):
    pass

class UserLockedError(Exception):
    def __init__(self, remaining_mins):
        self.remaining_mins = remaining_mins

# backend
def authenticate(self, email=None, password=None):
    if email is None or password is None:
        return None
    try:
        user = ExtUser.objects.get(email=email)
        user.last_login_attempt_at = timezone.now()
        if not use.is_active:
            raise UserNotActivatedError
        if user.is_locked:
            # Check when it was locked and found the duration
            sec_to_go = user.get_remaining_locktime()
            if sec_to_go:
                raise UserLockedError(sec_to_go)
        if user.check_password(password):
            user.last_login_at = timezone.now() 
            return user
        else:
            return None
    except User.DoesNotExist:
        return None 
```

然后在登录表单中，您可以捕获这些错误并将适当的验证错误传递给视图。

# ruby - 如何在 Sinatra 应用程序中直接使用 pandoc 生成 docx 文件？

> ID：13277168
> 
> 赞同：1
> 
> 时间：2012-11-07T19:54:46.660
> 
> 标签：ruby, sinatra, docx, pandoc

我有一个 Sinatra 应用程序，它需要以 Microsoft Word 格式提供可下载的报告。我创建报告的方法是使用 ERB 生成内容，然后将生成的 HTML 转换为 docx。 [Pandoc](http://johnmacfarlane.net/pandoc/)似乎是完成此任务的最佳工具，但我的实现涉及生成一些感觉很笨拙的临时文件。

***有没有更直接的方法来生成 docx 文件并将其发送给用户？***

我知道[PandocRuby](https://github.com/alphabetum/pandoc-ruby)存在，但我不能完全让它为我的目的工作。这是我当前实现的示例：

```
 #setting up the docx mime type    
   configure do
      mime_type :docx, 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
  end

  # route to generate the report
  get '/report/:name' do
    content_type :docx

    input = erb :report, :layout=>false #get the HTML content for the input file
    now = Time.now.to_i.to_s #create a unique file name
    input_path = File.join('tmp', now+'.txt')
    f = File.new(input_path, "w+") 
    f.write(input.to_s) #write HTML to the input to the file
    f.close()

    output_path = File.join('tmp', now+'.docx') # create a unique output file
    system "pandoc -f html -t docx -o #{output_path} #{input_path}" # convert the input file to docs
    send_file output_path
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T01:34:22.667

pandoc-ruby 的最新更新增加了对管道二进制输出到标准输出的支持。这能解决你的问题吗？

我对 Sinatra 没有任何经验，也没有尝试使用 pandoc-ruby 来管道二进制输出，但类似

```
puts PandocRuby.convert(input, :from => :html, :to => :docx) 
```

可能会成功。

# java - 在 google drive sdk 中上传演示文稿 .pptx

> ID：13277169
> 
> 赞同：1
> 
> 时间：2012-11-07T19:54:51.537
> 
> 标签：java, google-api, google-drive-api

当我使用 SDK 上传演示文稿 .pptx 时，日志显示所有字节都已发送，但要在谷歌驱动器中打开它们，幻灯片会出现错误，但是如果我在 .ppt 中上传相同的演示文稿，则没有问题并且在谷歌上显示良好驱动器，使用可恢复上传，这是代码。

```
byte[] myFile = readImageData(blobKey,size);
ByteArrayContent mediaContent = new ByteArrayContent(mimeType, myFile);

Drive.Files.Insert insert = service.files().insert(body, mediaContent);
insert.getMediaHttpUploader().setChunkSize(1024 * 1024);
File file = insert.execute(); 
```

**更新**

但如果我使用

```
insert.setConvert(true); 
```

演示文稿 .pptx 没有问题，并且在谷歌驱动器上显示良好。

# javascript - 如果有大量文本输入，如何执行计算

> ID：13277175
> 
> 赞同：0
> 
> 时间：2012-11-07T19:55:03.677
> 
> 标签：javascript, jquery

我想计算用户在文本输入中为问题中的每个答案输入的数字与问题的总分之间的差异。

我有一个当前执行此操作的[jsfiddle应用程序。](http://jsfiddle.net/jTXy5/1/)当您在答案的文本输入中更改值时，它将计算输入的数字与属于该问题的总分之间的差值。

我的问题是，目前它只有在我有一个或两个答案时才有效。但是一个问题可以有很多答案，他们可以有 3、4、5 甚至 10 个答案，甚至更多。所以我的问题是，如何更改下面的小提琴，以便它可以为多个文本框执行计算，而不仅仅是 2 个文本框？

[http://jsfiddle.net/jTXy5/3/](http://jsfiddle.net/jTXy5/3/)这个 jsfiddle 有一个问题，其中包含 3 个答案。但是没有计算第三个文本输入

以下是应该发生的情况的示例：

```
 Question No.   Question                 Answer     Marks per Answer    Total Marks
 1              Here are 2 answers       B          (text input) = 2        1
                                         D          (text input) = 1
                                         E          (text input) = 1
 2              Here is a single answer  True       (text input) = 5        0 
```

正如您在上表中看到的，问题 1 中答案的文本输入总共等于 4。所以 5（来自问题 1 的总分）减去 4 = 1（现在总分等于 1）

对于问题 2，问题 2 中答案的文本输入等于 5，因此 5（来自问题 2 的总分）减去 5 = 0（总分现在等于 0）。

下面是执行计算的代码：

```
$('tr').each(function() {
    var $input = $(this).find('input');
    var $row = $(this);
    var is_multiple = !$input.prop('readonly');
    var rowClass = is_multiple ? 'multiple' : 'single';
    if (is_multiple) {
        var is_first = $row.find('td').length == 5;
        rowClass += is_first ? ' first' : ' second';
    } else {
        /* readonly just needs marks changed once on page load */
        $row.find('.noofmarkstd').text(5 - $input.val());
    }
    $input.addClass(rowClass);
});

$('input.multiple').keyup(function() {
    var $input = $(this);
    var is_first = $input.is('.first');
    var $row = $input.closest('tr');
    var $otherRow = $row[is_first ? 'next' : 'prev']();
    var $marks = is_first ? $row.find('.noofmarkstd') : $otherRow.find('.noofmarkstd');

    var calcs = 5 - ($input.val() || 0) - ( $otherRow.find('input.multiple').val() || 0);
    $marks.text(calcs);    
});

/* if need calcs for multiples generated on pageload trigger a change on the first in set*/
 $('input.first').change(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:27:12.947

```
var $inputs = $('input.individualMarks');

$inputs.filter(function() {
    return $(this).prop('readonly') === true;
}).each(function() {
    var $input = $(this);

    var $marks = $input.closest('tr').css('color', 'red').find('td.noofmarkstd');
    $marks.html(5 - ($input.val() || 0) + '<br>(single test)');
});

$inputs.filter('[data-q_group]').keyup(function() {
    var $group = $inputs.filter('[data-q_group="' + $(this).data('q_group') + '"]');
    var $marks = $group.eq(0).closest('tr').find('td.noofmarkstd');
    var markVal = 5;
    $group.each(function() {
        markVal -= ($(this).val() || 0)
    })
    $marks.text(markVal)

})​ 
```

# android - 横向显示软键盘，但不显示整个屏幕

> ID：13277177
> 
> 赞同：2
> 
> 时间：2012-11-07T19:55:15.347
> 
> 标签：android, keyboard, landscape, android-softkeyboard

我试图实现这样的图像： ![在此处输入图像描述](../Images/844bff1fa189ac5d0d4245b65f267e01.png)

问题是当我在横向上放置一个像图像一样的搜索栏时，软键盘覆盖所有屏幕，我想要像我尝试过的图像那样的行为

```
 android:windowSoftInputMode="adjustPan|adjustResize" 
```

并且似乎不起作用，至少在果冻豆上。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:01:52.150

我在EditText的imeOptions中找到了解决方案，所以我使用了

```
android:imeOptions="flagNoFullscreen" 
```

所以屏幕现在在中间:)

```
<EditText
    android:id="@+id/txt_search"
    android:inputType="text"
    android:imeOptions="flagNoFullscreen"
    android:hint="@string/hint_search"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/> 
```

# asp.net-mvc-4 - ASP.NET MVC 4 DropDownListFor 错误：空值

> ID：13277178
> 
> 赞同：2
> 
> 时间：2012-11-07T19:55:14.837
> 
> 标签：asp.net-mvc-4, nullreferenceexception, html.dropdownlistfor

我是一名初学者程序员，在使用 @Html.DropDownListFor 助手时遇到了麻烦...

我正在使用基于此处教程的通用存储库和工作单元模式： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository- and-unit-of-work-patterns-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

这是我的存储库代码：

```
public class GenericRepository<TEntity> where TEntity : class
{
    internal UsersContext context;
    internal DbSet<TEntity> dbSet;

    public GenericRepository(UsersContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    public virtual IEnumerable<TEntity> Get(
        Expression<Func<TEntity, bool>> filter = null,
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
        string includeProperties = "")
    {
        IQueryable<TEntity> query = dbSet;

        if (filter != null)
        {
            query = query.Where(filter);
        }

        foreach (var includeProperty in includeProperties.Split
            (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }

        if (orderBy != null)
        {
            return orderBy(query).ToList();
        }
        else
        {
            return query.ToList();
        }
    }

    public virtual TEntity GetByID(object id)
    {
        return dbSet.Find(id);
    }

    public virtual void Insert(TEntity entity)
    {
        dbSet.Add(entity);
    }

    // Delete methods not shown

    public virtual void Update(TEntity entityToUpdate)
    {
        dbSet.Attach(entityToUpdate);
        context.Entry(entityToUpdate).State = EntityState.Modified;
    }
} 
```

这是我的 UnitOfWork 类的代码：

```
public class UnitOfWork : IDisposable
{
    private UsersContext context = new UsersContext();
    private GenericRepository<UserProfile> userProfileRepository;
    private GenericRepository<Lead> leadRepository;
    private GenericRepository<UnitedStatesState> unitedStatesStateRepository;

    public GenericRepository<UserProfile> UserProfileRepository
    {
        get
        {

            if (this.userProfileRepository == null) 
            {
                this.userProfileRepository = new GenericRepository<UserProfile(context);
            }
            return userProfileRepository;
        }
    }

    public GenericRepository<Lead> LeadRepository
    {
        get
        {

            if (this.leadRepository == null)
            {
                this.leadRepository = new GenericRepository<Lead>(context);
            }
            return leadRepository;
        }
    }

    public GenericRepository<UnitedStatesState> UnitedStatesStateRepository 
    {
        get
        {

            if (this.unitedStatesStateRepository == null)
            {
                this.unitedStatesStateRepository = new GenericRepository<UnitedStatesState>(context);
            }
            return unitedStatesStateRepository;
        }
    } 
```

我正在尝试使用强类型视图和模型，以便在不使用 ViewData/ViewBag 的情况下将选择列表数据传递给视图。据我了解，最好的做法是做一些类似于我在这里看到的事情： [validate a dropdownlist in asp.net mvc](https://stackoverflow.com/questions/4729440/validate-a-dropdownlist-in-asp-net-mvc)

我尝试尽可能地遵循这一点，这就是我想出的

我的视图模型如下所示：

```
public class Lead
{
    public int LeadID { get; set; }
    public int CompanyID { get; set; }

    [Required(ErrorMessage = "Please enter state")]
    [Display(Name = "State")]
    [MaxLength(2)]
    public string State { get; set; }

    [Display(Name = "Assigned To")]
    public string AssignedTo { get; set; }

    [Timestamp]
    public Byte[] Timestamp { get; set; }

    public virtual Company Company { get; set; }

    // IEnumerables for Dropdown Lists passed to views
    public IEnumerable<UnitedStatesState> UnitedStatesStates { get; set; }
    public IEnumerable<UserProfile> UserProfiles { get; set; }

    // Objects passed to views
    public Lead lead { get; set; }
} 
```

然后，我的下拉列表的这些 IEnumerables 从我的数据库通过我的存储库填充到我的控制器中。奇怪的是，我在两个不同的视图中使用这些下拉列表，创建和编辑。当我在 Create 视图中使用下拉列表时，它们在 GET 和 POST ActionResults 上都能完美运行。当我尝试为我的编辑视图使用相同的下拉列表时，它们适用于 GET ActionResult（视图加载和下拉列表工作）但是当我尝试将它们发布到我的编辑 ActionResult 时，我收到以下错误：

{"Value cannot be null.\r\nParameter name: items"} // 这是 Visual Studio 2012 中显示的错误

System.ArgumentNullException：值不能为空。参数名称：items //这是谷歌浏览器中显示的错误

下面是我的主控制器，带有编辑和创建操作结果：

```
public class LeadController : Controller
{
    // create instance of Repository Unit of Work
    private UnitOfWork unitOfWork = new UnitOfWork();

    public ActionResult Create()
    {
        // Get the current users profile
        UserProfile userProfile = UserProfile.GetCurrentUserProfile();

        // Creates Dropdown Lists to pass to view
        var model = new Lead
        {
            UnitedStatesStates = unitOfWork.UnitedStatesStateRepository.Get(u => u.StateAbbreviation != null),
            UserProfiles = unitOfWork.UserProfileRepository.Get(u => u.CompanyID == userProfile.CompanyID)
        };

        // Return View
        return View(model);
    }

    [HttpPost]
    public ActionResult Create(Lead model)
    {
        try
        {
            if (ModelState.IsValid)
            {
                // Call the current users profile
                UserProfile userProfile = UserProfile.GetCurrentUserProfile(); 

                // Create a new lead and apply all attirbutes that were entered
                Lead lead = new Lead();
                lead.CompanyID = userProfile.CompanyID; 
                lead.State = model.State;
                lead.AssignedTo = model.AssignedTo;

                // Add the lead and save the changes.  Redirect to Lead Index.
                unitOfWork.LeadRepository.Insert(lead); 
                unitOfWork.Save(); 
                return RedirectToAction("Index");
            }
        }
        catch (DataException)
        {
            ModelState.AddModelError("", "Unable to save changes.  Try again and if the problem persists, see your system administrator.");
        }
        // Return view if ModelState is not valid
        return View();
    }

    public ActionResult Edit(int id = 0)
    {
        // Get Users Profile
        UserProfile userProfile = UserProfile.GetCurrentUserProfile();

        // Check to see if Lead Exists
        if (unitOfWork.LeadRepository.GetByID(id) == null)
        {
            return HttpNotFound();
        }

        // Creates Dropdown Lists and Gets current lead values to pass to view
        var model = new Lead
        {
            lead = unitOfWork.LeadRepository.GetByID(id),
            UnitedStatesStates = unitOfWork.UnitedStatesStateRepository.Get(u => u.StateAbbreviation != null),
            UserProfiles = unitOfWork.UserProfileRepository.Get(u => u.CompanyID == userProfile.CompanyID)
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Edit(Lead lead)
    {
        try
        {
            // Update lead if model state is valid
            if (ModelState.IsValid)
            {
                unitOfWork.LeadRepository.Update(lead);
                unitOfWork.Save();
                return RedirectToAction("Index");
            }
        }
        // Catch any concurrency exceptions
        catch (DbUpdateConcurrencyException ex)
        {
            var entry = ex.Entries.Single();
            var databaseValues = (Lead)entry.GetDatabaseValues().ToObject();
            var clientValues = (Lead)entry.Entity;

            if (databaseValues.State != clientValues.State)
                ModelState.AddModelError("State", "Current value: "
                    + databaseValues.State);

            if (databaseValues.AssignedTo != clientValues.AssignedTo )
                ModelState.AddModelError("Assigned To ", "Current value: "
                    + databaseValues.AssignedTo );

            ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                + "was modified by another user after you got the original value. The "
                + "edit operation was canceled and the current values in the database "
                + "have been displayed. If you still want to edit this record, click "
                + "the Save button again. Otherwise click the Back to List hyperlink.");
            lead.Timestamp = databaseValues.Timestamp;
        }
        catch (DataException)
        {
            //Log the error (add a variable name after Exception)
            ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
        }

        // Return View if Model State is not valid
        return View(lead);
    } 
```

POST Edit ActionResult 包括用于捕获我按照此处显示的教程创建的并发代码： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with- asp-net-mvc 应用程序中的实体框架](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

以下是我对 Create 的看法（效果很好）：

```
@model SolarToolbase.Models.Lead

@using (Html.BeginForm()) {                
@Html.ValidationSummary(true)
<div>                
    <div>
        @Html.LabelFor(model => model.State)
        @Html.DropDownListFor(model => model.State, new SelectList(Model.UnitedStatesStates, "StateAbbreviation", "UnitedStatesStateName"),"Choose State")<br />
        @Html.ValidationMessageFor(model => model.State)
    </div> 
    <div>
        @Html.LabelFor(model => model.AssignedTo)
        @Html.DropDownListFor(model => model.AssignedTo, new SelectList(Model.UserProfiles, "FullName", "FullName"),"Choose User")<br />
        @Html.ValidationMessageFor(model => model.AssignedTo)
    </div> 
    <p>
        <input type="submit" value="Create" />
    </p>

</div>
} 
```

下面是我对编辑的看法（当我点击提交按钮时，这会引发上述错误。我在下面插入了一条评论以显示引发错误的行）：

```
@model SolarToolbase.Models.Lead

@using (Html.BeginForm()) {               
@Html.ValidationSummary(true) 
@Html.HiddenFor(model => model.lead.LeadID)
@Html.HiddenFor(model => model.lead.Timestamp)

<div>
    <div>
        @Html.LabelFor(model => model.lead.State)
        @Html.DropDownListFor(model => model.lead.State, new SelectList(Model.UnitedStatesStates, "StateAbbreviation", "UnitedStatesStateName"))<br />  // Error thrown from this line
        @Html.ValidationMessageFor(model => model.lead.State)
    </div> 
    <div>
        @Html.LabelFor(model => model.lead.AssignedTo)
        @Html.DropDownListFor(model => model.lead.AssignedTo, new SelectList(Model.UserProfiles, "FullName", "FullName"))<br />
        @Html.ValidationMessageFor(model => model.lead.AssignedTo)
    </div> 
    <p>
        <input type="submit" value="Save" />
    </p>   
</div> 
} 
```

我提前为发布这么多代码而道歉，老实说，我不知道这个错误来自哪里，我已经把头撞在墙上试图弄清楚大约 4 个小时。任何可以提供帮助的人都可以免费虚拟击掌和良好的因果报应。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T21:48:00.810

在 a`POST`到`Create`和`Edit`操作的情况下，当出现错误或`ModelState`无效时，您会捕获任何异常并返回由模型绑定器创建和填充`View`的构造视图模型的默认值。`Lead`

但是，在该`Edit` `POST`操作中，如果存在错误条件，则将`lead`对象返回给`View`，`Model.`请注意，不会在 上重新填充`UnitedStatesStates`和`UserProfiles`属性`POST`。您在动作中填充它们`GET`，但您也必须在`POST`动作中这样做。您需要注意发送到视图的任何模型都处于正确的形状，并且填充了所有预期的成员。

另请注意，您的视图模型的类型`Lead`具有名为`lead`. 那是那里的代码气味；我不会有一个视图模型类引用它自己的类的实例。它已经让你感到困惑了。我必须`Lead`是`LeadViewModel`明确的，只是让它在进出视图时保持它需要的所有属性和值，没有`lead`属性。

在您的`Edit`视图中，您引用的是模型的属性`model.lead.State`，例如，但在`Create`视图中，您引用的是父级属性，如`model.State`. 但是在`Edit`视图中，当涉及到`SelectListItems`您使用`Model.UnitedStatesStates`的而不是`Model.lead.UnitedStatesStates.`正如我所说的那样时，我会取消这种模式并做`Create`视图现在所做的事情，根本没有子`lead`属性。`model.State`例如，对所有属性和两个视图都这样做。

因此，请确保在将模型传递给视图时填充您的集合属性，如

```
[HttpPost]
public ActionResult Edit(Lead lead)
{
    try
    {
        // Update lead if model state is valid
        if (ModelState.IsValid)
        {
            unitOfWork.LeadRepository.Update(lead);
            unitOfWork.Save();
            return RedirectToAction("Index");
        }
    }
    // Catch any concurrency exceptions
    catch (DbUpdateConcurrencyException ex)
    {
        var entry = ex.Entries.Single();
        var databaseValues = (Lead)entry.GetDatabaseValues().ToObject();
        var clientValues = (Lead)entry.Entity;

        if (databaseValues.State != clientValues.State)
            ModelState.AddModelError("State", "Current value: "
                + databaseValues.State);

        if (databaseValues.AssignedTo != clientValues.AssignedTo )
            ModelState.AddModelError("Assigned To ", "Current value: "
                + databaseValues.AssignedTo );

        ModelState.AddModelError(string.Empty, "The record you attempted to edit "
            + "was modified by another user after you got the original value. The "
            + "edit operation was canceled and the current values in the database "
            + "have been displayed. If you still want to edit this record, click "
            + "the Save button again. Otherwise click the Back to List hyperlink.");
        lead.Timestamp = databaseValues.Timestamp;
    }
    catch (DataException)
    {
        //Log the error (add a variable name after Exception)
        ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
    }

    // Return View if Model State is not valid
    /////////// CHANGES HERE
    lead.UnitedStatesStates = unitOfWork.UnitedStatesStateRepository.Get(u => u.StateAbbreviation != null),
    lead.UserProfiles = unitOfWork.UserProfileRepository.Get(u => u.CompanyID == userProfile.CompanyID)
    return View(lead); // pass the model to the view for Create and Edit POST actions when there's an error
} 
```

在这两个`POST`动作中都这样做。如果出现错误，视图将由具有填充模型的操作实例化。还要将视图更改为`Edit`像`Create`视图一样工作，而不是使用`Lead`视图模型的`lead`属性。大概这将处理视图中的任何空引用异常。

# android - 在android中打开消息时触发事件

> ID：13277181
> 
> 赞同：0
> 
> 时间：2012-11-07T19:55:20.967
> 
> 标签：android, android-intent, android-service

当用户打开来自特定发件人的消息时，我想触发一个事件。我正在考虑使用`Service`当用户打开他的消息时触发该事件的。首先，我想知道这件事是否可行？我的意思是，是否可以获得用户打开他的消息（Android 中特定用户的）的信息？

其次，使用`Service`我可以通过它的唯一方法吗？还有其他方法吗？

提前谢谢你们:) ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:38:18.047

> 我的意思是，是否可以获得用户打开他的消息（Android 中特定用户的）的信息？

您没有说出您指的是哪种“消息”，或者这些“消息”将在哪个应用程序中查看。

话虽如此，除非应用程序的开发人员通过某些广播泄露私人数据（如“消息”接收者），否则`Intent`您无法获得您寻求的信息。

# java - JSoup 在 Android Activity 中工作，但不能作为 Activity 中的对象

> ID：13277184
> 
> 赞同：0
> 
> 时间：2012-11-07T19:55:28.890
> 
> 标签：java, android

我创建了一个 Android 应用程序，我想提供一些从页面上抓取的信息。我使用了 JSoup，并成功地抓取了所有 HTML，并将它们放入控制台项目中的适当数据结构中，并使用单个类名 Scraper.java。

我的下一步是将这个 Scraper.java 移植到我的 Android 应用程序中。为此，我只是想在我的活动中创建一个需要 html 信息的 Scraper 对象。这似乎不起作用，我收到一个错误，似乎它试图告诉我 Android 不喜欢这个试图连接到互联网的外部类。

放弃后，我非常肮脏地将 Scraper.java 中的所有代码转储到我的 Activity 类中，并让它很好地抓取数据，并且连接起来没有任何问题。

现在的问题是我意识到我想在其他活动中访问那些复杂的数据，而且我真的会更简单地回到尝试拥有一个外部 Scraper.java 文件以便我可以共享它的对象而不是比它里面的所有数据类型。

所以我的问题是，我需要做些什么才能让 Android 知道它不需要惊慌失措，并且可以让我的外部 Scraper.java 文件连接。

我已经允许清单中的互联网许可，所以我不知道从这里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:00:47.987

我发现我有一个非常愚蠢的错误，我的代码现在可以正常工作了。对不起，我的回复延迟了很长时间，我昨晚很忙。

我遇到的问题是，当我移植控制台版本时，我仍然留在 Scraper.java 文件中的 main 方法中，该文件与我的 Android 应用程序发生冲突。我进一步清理了代码，并且能够非常轻松地引用 Scraper.java 对象。

为了补救在创建后共享一个对象的实例，我想我将使用我的 Scraper.java 文件实现 Parcelable，以便我可以在多个活动之间轻松共享该实例。对于任何有兴趣的人，我将参考[http://prasanta-paul.blogspot.com/2010/06/android-parcelable-example.html](http://prasanta-paul.blogspot.com/2010/06/android-parcelable-example.html)

# filehelpers - FileHelper 库 - 自定义错误消息

> ID：13277187
> 
> 赞同：0
> 
> 时间：2012-11-07T19:55:32.377
> 
> 标签：filehelpers

我正在使用[FileHelper](https://github.com/MarcosMeli/FileHelpers)来解析 CSV 文件。解析文件时遇到的错误消息会显示给最终用户。最终用户可能无法理解技术错误消息。没有太多的职员知道 an`Int32`是什么或`Class: UploadFooDto`.

我想自定义错误消息，使它们更加用户友好。就像是：

*   第 1 行。第 2 列。输入了字符串 (a) 而不是数字
*   第 2 行。第 3 列。“13-14-15”不是有效日期

我在 API 中找不到任何可以自定义错误消息的内容。到目前为止，我拥有的最多的是一些清理错误的扩展方法：

```
public static class FileHelperExceptionExtensions
{
    public static string BuildMessage(this ErrorInfo error)
    {
        if (error.ExceptionInfo is ConvertException)
        {
            return ((ConvertException)error.ExceptionInfo).BuildMessage();
        }

        if (error.ExceptionInfo is BadUsageException)
        {
            var message = error.ExceptionInfo.Message;
            var readTo = message.IndexOf("Class:");
            return message.Substring(0, readTo);
        }

        return string.Format("Line: {0}. An unspecific error occured.", error.LineNumber);
    }

    public static string BuildMessage(this ConvertException exception)
    {
        return string.Format("Line: {0}. Column: {1}. Field: {2}. Cannot convert '{3}' to type: '{4}'", exception.LineNumber, exception.ColumnNumber, exception.FieldName, exception.FieldStringValue, exception.FieldType.Name);
    }
} 
```

但是这些扩展仍然有很多不足之处。是否可以自定义错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:52:29.967

很难改进你的扩展方法而不是它比它的价值更麻烦。

您不能对默认转换器进行子类化（例如，`FileHelpers.ConvertHelpers.Int32Converter`因为它们是`internal`and `sealed`）。您可以为每种类型创建自己的[自定义转换器](http://filehelpers.sourceforge.net/example_customconv.html)（并将其基于来自 FileHelpers 的相应源代码，例如`Int32Converter`）。然后你可以提出一个替代方案`ConvertException`（也`sealed`因此你不能子类化），它会以不同的方式格式化消息。

# c++ - 构造函数问题

> ID：13277199
> 
> 赞同：0
> 
> 时间：2012-11-07T19:56:25.150
> 
> 标签：c++, visual-c++

我必须实现一个类来表示图书馆中的书籍。对于每本书，我必须指定：标题、作者、ISBN 代码、出版年份和价格。然后我需要创建一个包含图书馆中所有书籍的数组。这是我处理过的代码，这是错误：

> 错误 C2512：“书”：没有合适的默认构造函数可用

我做错了什么？

```
 Book.h
      #ifndef BOOK_H
      #define BOOK_H

#include<string>

using namespace std;

class Book
{
private:
    string title;
    string author;
    string code; 
    string edit;
    int year;
    double price;
public:
    Book();
    Book(string t, string a, string c, string e, int y, double p)
    {
        title=t;
        author=a;
        code=c;
        edit=e;
        year=y;
        price=p;
    }
    string GetTitle() const { return title;}
    string GetAuthor() const { return author;}
    string GetCode() const {return code;}
    string GetEdit() const {return code;}
    int GetYear() const {return year;}
    double GetPrice() const {return price;}
};
#endif

Library.h
 #ifndef LIBRARY_H
 #define LIBRARY_H
 #include"Book.h"
 #include<iostream>

 class Library
 {
  private:
    Book books[50];
    int index;
   public:
    Library()
    {
        index=0;
    }
    void Add(Book book)
    {
        books[index]=book;
        index++;
    }
    void PrintAll()
    {
        for (int i = 0; i < index; i++)
        {
            Book book=books[i];
            cout<<book.GetTitle()<<":"
    <<book.GetAuthor()<<":"<<book.GetYear()<<endl;
        }
    }
  };
  #endif

   main.cpp

     #include"Library.h"
int main()
{
    Library library;
    Book b1("title1","author1","code1","edit1",1900,34.5);
    library.Add(b1);
    Book b2("title2","author2","code2","edit2",1990,12);
    library.Add(b2);
    library.PrintAll();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:00:10.980

你的`Library`类有一个数组`Book`作为它的成员。所有成员必须在构造时初始化。由于您没有显式调用`Book`构造函数，因此假定默认一个（实际上对于数组，它是唯一可能被调用的）。但是没有默认构造函数存在，`Book`因此编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:07:48.657

现在，由于您已经定义了一个带有 6 个参数的构造函数，编译器不会为您生成默认构造函数。因此，您还需要定义一个默认构造函数来支持代码行，例如`void Add(Book book) {}`. 也许如下：

```
Book() : title(""), author(""), code(""), edit(""), year(1900), price(0.0) 
{} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:16:44.087

查看您的代码，您声明了一个（内联）无参数构造函数

```
Book(); 
```

但不要定义它，所以编译器找不到它。

试试例如

```
Book() {}; 
```

- 这只是创建一个无参数的构造函数，什么都不做-，这就是你的意思吗？

编辑 - 刚刚看到 wnraman 的回复。这可能更合适，因为无参数构造函数将 Book 初始化为合理的默认值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:00:07.513

我假设您的代码中有其他地方像

```
Book book; 
```

或定义一个书籍数组，或将其与一些书籍一起使用，例如。库中的列表类，它需要一个默认构造函数，该构造函数未在您的类中定义。要么定义这样一个默认构造函数（它不接受任何参数），要么在代码的其余部分中找到有问题的地方......

# iphone - 将块作为类中的属性转发到类中

> ID：13277200
> 
> 赞同：2
> 
> 时间：2012-11-07T19:56:33.560
> 
> 标签：iphone, ios, ipad, block

我有 3 个 viewController 类：vA、vB 和 vC。

我有一个关于 vA 的方法，例如：

```
- (void) showMessage:(NSString *)message withTitle:(NSString *)title {
 ...  bla bla
} 
```

我是 self.navigationController 推 vB。我希望 vB 从 vA 运行此方法，所以我所做的是在 vB 中创建一个属性，如下所示：

```
@property (nonatomic, strong) void (^showMessage)(NSString *message, NSString *title); 
```

当我在 vA 中创建 vB 并且在推送它之前，我这样做：

```
vB.showMessage = ^(NSString *message, NSString *title){
        [myself showMessage:message withTitle:title];
}; 
```

我可以从 vB 调用 showMessage 块。

我的问题是：我想将同样的方法转发给 vC，这是我将从 vB 推送的第三个 viewController。所以这是 vC，从 vA 运行一个方法：

```
vA pushing vB pushing vC 
```

有没有更简单的方法可以将其转发给 vC，或者我是否必须重复在 vC 上创建另一个相等属性并再次将方法包装在一个块中的整个过程。如果这是真的，因为它已经是一个块，我将不得不这样做：

```
vC.showMessage = ^(NSString *message, NSString *title){
        self.showMessage(message, title);
}; 
```

对？

我想继续使用这个块的东西。我爱上了它。

我知道我可以使用通知、委托等，但是这个块新的东西更简单并且使代码更紧凑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:15:47.820

您可以`vC.showMessage = self.showMessage;`在推送到之前分配`vC`。然后打电话`vC.showMessagae(message, title);`或当你在时`vC`，只需使用`self.showMessage(message, title);`

试试这样

在`vA.h`档案中，

添加，

```
typedef void (^ShowMessageBlock)(NSString *message, NSString *title); 
```

`vA.h`然后在文件中导入文件`vB.h`并声明，

```
@property (nonatomic, strong) ShowMessageBlock showMessage; 
```

`vC.h`在文件中做同样的声明。

之后，当你推到`vB`，

```
vB.showMessage = ^(NSString *message, NSString *title){
        [myself showMessage:message withTitle:title];
}; 
```

当你推动时`vC`，

```
vC.showMessage = self.showMessage; 
```

然后你可以`self.showMessage(@"", @"");`在两个类中使用它。

# ruby-on-rails - rails form动态添加字段

> ID：13277204
> 
> 赞同：2
> 
> 时间：2012-11-07T19:56:48.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试设置一组字段以按需动态显示。在模型中，我有以下字段：

```
attr_accessible ... :instruct1, :instruct2, ... :instruct30 
```

我希望表单只显示 instruct1 和一个按钮来添加 1 个字段，直到 instruct30 被击中，以及一个按钮来删除一个直到 instruct 1 被击中。一切都应该在没有刷新页面的情况下发生，我认为这将包括对 AJAX 的一些使用，但我找不到任何类似的东西。

我搜索了类似的东西，但只能想出嵌套的形式，这不是我想要的，因为我的模型是固定的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:34:08.527

您的大部分工作将在客户端进行。

要动态添加和删除表单字段，您必须使用 javascript。查看 Rails 为第一个字段生成的 HTML，复制它并使用例如 jQuery 添加其他字段。

一个粗略的例子：

```
$("#button").click(function() {
  $("#theForm")
    .append('<input id="instruct2" name="object[instruct2]" type="text">');
}); 
```

您必须跟踪添加或删除了多少字段。

# java - 谷歌 API Bigquery 空指针 java

> ID：13277206
> 
> 赞同：0
> 
> 时间：2012-11-07T19:56:59.107
> 
> 标签：java, oauth-2.0, google-bigquery

我尝试使用 JAVA API 设置 BigQuery 项目来访问它。[但是，当我运行此处](https://developers.google.com/bigquery/docs/authorization#installed-applications)的 google BigQueryInstalledAuthDemo 类时，出现此错误：

```
java.lang.NullPointerException

at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:191)
at com.google.api.client.json.jackson.JacksonFactory.createJsonParser(JacksonFactory.java:70)
at com.google.api.client.json.JsonFactory.fromInputStream(JsonFactory.java:223)
at com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets.load(GoogleClientSecrets.java:167)
at BigQueryLocal.loadClientSecrets(BigQueryLocal.java:99)
at BigQueryLocal.<clinit>(BigQueryLocal.java:31)
 Exception in thread "main" java.lang.NullPointerException
at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeRequestUrl.   <init>(GoogleAuthorizationCodeRequestUrl.java:111)
at BigQueryLocal.main(BigQueryLocal.java:47) 
```

我不明白，我的 JSON 文件与类位于同一文件夹中（我尝试了相对路径和绝对路径）我的 JSON 文件是这样的：

```
{
     "installed": {
        "client_id": "XXXXXXXXXXXXXXXXXXXX.apps.googleusercontent.com",
        "client_secret": "XXXXXXXXXXXXXXXXX",
        "redirect_uris": ["urn:ietf:oauth:2.0:oob"],
        "auth_uri": "https://accounts.google.com/o/oauth2/auth",
        "token_uri": "https://accounts.google.com/o/oauth2/token"
    }
} 
```

我使用谷歌 API 库 1.12-beta 和 java 1.6。所以，我不明白为什么我有这个错误:(，所以如果有人有想法......

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:59:02.790

您使用的是哪个 IDE？当您的代码无法找到资源时，往往会发生这种情况，因为它位于错误的目录中，或者位于您的应用程序不认为资源的目录中。

Stack Overflow 上有很多关于处理此问题的信息，例如： [在哪里放置我想在 Eclipse 中使用的文本文件？](https://stackoverflow.com/questions/2850674/where-to-put-a-textfile-i-want-to-use-in-eclipse)

# python - 用pyparsing解析逻辑句子非常慢

> ID：13277207
> 
> 赞同：12
> 
> 时间：2012-11-07T19:57:07.687
> 
> 标签：python, pyparsing

我尝试使用 pyparsing 来解析诸如这些的逻辑表达式

```
x
FALSE
NOT x
(x + y <= 5) AND (y >= 10) OR NOT (z < 100 OR w)

(A=True OR NOT (G < 8) => S = J) => ((P = A) AND not (P = 1) AND (B = O)) => (S = T)

((P = T) AND NOT (K =J) AND (B = F)) => (S = O) AND
 ((P = T) OR (k and b => (8 + z <= 10)) AND NOT (a + 9 <= F)) => (7 = a + z) 
```

我在下面编写的代码似乎可以正常工作——但速度很慢（例如上面的最后一个示例需要几秒钟）。我是否以某种低效的方式构建语法？可能应该使用递归而不是 operatorPrecedence ？有没有办法加快速度？

```
identifier = Group(Word(alphas, alphanums + "_")  +  Optional("'"))
num = Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")
operator = Regex(">=|<=|!=|>|<|=")
operand = identifier |  num  
aexpr = operatorPrecedence(operand,
                           [('*',2,opAssoc.LEFT,),
                            ('+',2,opAssoc.LEFT,),
                            (operator,2,opAssoc.LEFT,)
                            ])

op_prec = [(CaselessLiteral('not'),1,opAssoc.RIGHT,),
           (CaselessLiteral('and'),2,opAssoc.LEFT ,),
           (CaselessLiteral('or'), 2,opAssoc.LEFT ,),
           ('=>', 2,opAssoc.LEFT ,),
           ]
sentence = operatorPrecedence(aexpr,op_prec)
return sentence 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-04T18:27:49.283

我有同样的问题。在这里找到了解决方案（`parserElement.enablePackrat()`）：[https ://github.com/pyparsing/pyparsing](https://github.com/pyparsing/pyparsing)

现在立即解析以下代码（与之前的 60 秒相比）

```
ParserElement.enablePackrat()

integer  = Word(nums).setParseAction(lambda t:int(t[0]))('int')
operand  = integer | variable('var')

# Left precedence
eq    = Literal("==")('eq')
gt    = Literal(">")('gt')
gtEq  = Literal(">=")('gtEq')
lt    = Literal("<")('lt')
ltEq  = Literal("<=")('ltEq')
notEq = Literal("!=")('notEq')
mult  = oneOf('* /')('mult')
plus  = oneOf('+ -')('plus')

_and  = oneOf('&& and')('and')
_or   = oneOf('|| or')('or')

# Right precedence
sign     = oneOf('+ -')('sign')
negation = Literal('!')('negation')

# Operator groups per presedence
right_op = negation | sign 

# Highest precedence
left_op_1 = mult 
left_op_2 = plus 
left_op_3 = gtEq | ltEq | lt | gt
left_op_4 = eq   | notEq
left_op_5 = _and
left_op_6 = _or
# Lowest precedence

condition = operatorPrecedence( operand, [
     (right_op,   1, opAssoc.RIGHT),
     (left_op_1,  2, opAssoc.LEFT),
     (left_op_2,  2, opAssoc.LEFT),
     (left_op_3,  2, opAssoc.LEFT),
     (left_op_4,  2, opAssoc.LEFT),
     (left_op_5,  2, opAssoc.LEFT),
     (left_op_6,  2, opAssoc.LEFT)
    ]
)('computation') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:12:53.013

我把你的代码放到一个小程序里

```
from sys import argv
from pyparsing import *

def parsit(aexpr):
    identifier = Group(Word(alphas, alphanums + "_")  +  Optional("'"))
    num = Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")
    operator = Regex(">=|<=|!=|>|<|=")
    operand = identifier |  num
    aexpr = operatorPrecedence(operand,
                               [('*',2,opAssoc.LEFT,),
                                ('+',2,opAssoc.LEFT,),
                                (operator,2,opAssoc.LEFT,)
                                ])

    op_prec = [(CaselessLiteral('not'),1,opAssoc.RIGHT,),
               (CaselessLiteral('and'),2,opAssoc.LEFT ,),
               (CaselessLiteral('or'), 2,opAssoc.LEFT ,),
               ('=>', 2,opAssoc.LEFT ,),
               ]
    sentence = operatorPrecedence(aexpr,op_prec)
    return sentence

def demo02(arg):
    sent = parsit(arg)
    print arg, ":", sent.parseString(arg)

def demo01():
    for arg in ["x", "FALSE", "NOT x",
                  "(x + y <= 5) AND (y >= 10) OR NOT (z < 100 OR w)",
                  "(A=True OR NOT (G < 8) => S = J) => ((P = A) AND not (P = 1) AND (B = O)) => (S = T)",
                  "((P = T) AND NOT (K =J) AND (B = F)) => (S = O) AND ((P = T) OR (k and b => (8 + z <= 10)) AND NOT (a + 9 <= F)) => (7 = a + z)"
                  ]:
        demo02(arg)

if len(argv) <= 1:
    demo01()
else:
    for arg in argv[1:]:
        demo02(arg) 
```

并跑过`cProfile`

```
$ python -m cProfile pyparsetest.py 
```

你会发现*很多* `parseImpl`电话，但在输出的中间有

```
2906500/8   26.374    0.000   72.667    9.083 pyparsing.py:913(_parseNoCache)
212752/300    1.045    0.000   72.608    0.242 pyparsing.py:985(tryParse) 
```

`72.667`蜜蜂总的计算时间`72`。

因此，我冒险猜测“缓存”会提供一个很好的杠杆。

只是启用 http://pyparsing-public.wikispaces.com/FAQs 并没有帮助，你。我添加了线条

```
import pyparsing
pyparsing.usePackrat = True 
```

运行时间是一样的。

Number-Regex 对我来说也很好——我猜是相当标准的。例如将其替换为

```
#num = Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")
num = Regex(r"8|1|10|100|5") 
```

也没有帮助。我的简单变体中没有“空匹配”，我猜这可能是一个问题——但似乎不是。

最后一次尝试是查看结果解析器：

```
....
sentence = operatorPrecedence(aexpr,op_prec)
print sentence 
return sentence
.... 
```

还有……哇……长！

好吧，*不*使用你的第*一个要*`operatorPrecedence`快得多，但不再适用于算术。

 *因此，我冒昧地猜测，是的，尝试更多地分离两种表达式（布尔和算术）。也许这会改善它。我也会研究它，它也让我感兴趣。*

# javascript - Facebook 喜欢按钮错误 - iFrame 显示个人资料图片而不是喜欢按钮

> ID：13277209
> 
> 赞同：2
> 
> 时间：2012-11-07T19:57:25.613
> 
> 标签：javascript, html, facebook, facebook-graph-api

我有一个奇怪的问题。我以前从未见过这种情况，经过大约一天的搜索后在网上找不到任何东西。

一方面，这仅发生在我们客户的一台计算机上。所以我们不能重新创建它，或者测试它。

我们在我们正在开发的网站上使用标准按钮。我们添加了点赞按钮，它显示在每个浏览器上，除了 Windows 7 上的 IE 8（这是我们支持的最早版本）。就像我说的，它只发生在一台客户端计算机上，我们不会可以访问该计算机。

它没有显示类似按钮，而是显示一个带有白色背景的宽 iFrame 框和一个带有用户个人资料图片（如果他们已登录）的红色框，以及似乎是一个链接的单词“switch”。

你们中有人见过吗？

![在此处输入图像描述](../Images/c9def3e5f362d7f9046f12195613ffe5.png)

我希望我能给你一个链接，但由于 NDA 的原因我不能。

这是代码，非常基本的 Like 按钮代码...

```
<div id="fb-root"></div>
<script type="text/javascript">
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APPIDHERE";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script> 
```

Annndddd 这里是放置按钮的 html：

```
<div class="facebook space">
                        <div class="fb-like" data-href="@Request.Url" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false"></div>
                    </div> 
```

任何帮助将不胜感激，因为我们不知所措。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:51:10.973

当使用“赞”按钮访问站点的用户同时登录 Facebook 并且当前在她/他是管理员的页面之一的上下文中使用 Facebook 时，就会发生这种情况。您所要做的就是让用户回到 Facebook 并将他/她的用户上下文切换回他/她自己而不是页面。

# java - java分隔符错误

> ID：13277211
> 
> 赞同：0
> 
> 时间：2012-11-07T19:57:48.497
> 
> 标签：java, regex, string, delimiter

我想在我的字符串中分隔“/ *”：

例如

```
String str="6666 /* 555 / 777 * ttt";

// And result should be
result= 6666 ,  555 / 777 * ttt 
```

我用

```
String[] line_split=line_str.split("/*"); 
```

我得到这个错误：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Dangling meta character '*' near index 0 * 
```

有人对我有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:59:50.493

[`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)需要`Regex`分裂。And`*`是一个`Regex`具有特殊含义的元字符 - 匹配`0 or more`它之前的模式。

你需要逃避： -

```
String[] line_split=line_str.split("/\\*"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:00:34.553

错误消息说：

> 索引 0 附近悬空元字符 '*' *

`*`是一个正则表达式元字符，您需要使用`\\`.

* * *

在这种情况下，您可以使用`Pattern`类来构建您的正则表达式，如下所示：

```
String regex = Pattern.quote("/*");
System.out.println(regex); 
```

输出是

> \Q/*\E

这是你的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:55:45.580

所以是的，这是一个元数据。但是有问题的表达式`/*` **是有效的 regex**。这实际上有效，只是没有给出预期的结果：

```
System.out.println(Arrays.toString("aoeuaoue".split("/*"))); 
```

因此，您还没有粘贴重现问题的代码。但我认为要替换的真正字符串是类似的，但作为正则表达式是非法的。

# javascript - 用于创建新元素的 Mutation Observer

> ID：13277212
> 
> 赞同：38
> 
> 时间：2012-11-07T19:57:50.210
> 
> 标签：javascript, jquery, mutation-observers, dom4

我正在尝试在创建特定 div 时关闭功能。用最简单的术语来说，我有这样的事情：

```
<a href="" id="foo">Click me!</a>
<script>
$("#foo").live("click",function(e) {
    e.preventDefault();
    $(this).append($("<div />").html("new div").attr("id","bar"));
});
</script> 
```

之前，我让突变事件监听 div#bar 的创建 - 像这样：

```
$("#bar").live("DOMNodeInserted", function(event) {
    console.log("a new div has been appended to the page");
}); 
```

是否有使用 Mutation Observers 的等价物？我尝试了 attrchange.js，[在 DOM 元素的样式对象更改后，您可以使用 javascript 钩子触发器吗？](https://stackoverflow.com/questions/10868104/)但是该插件仅检测元素何时被修改，而不是何时创建。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-07T21:17:13.993

这是监听子列表中的突变`#foo`并检查是否添加了具有 id 的子的代码`bar`。

```
MutationObserver = window.MutationObserver || window.WebKitMutationObserver;

$("#foo").live("click",function(e) {
    e.preventDefault();
    $(this).append($("<div />").html("new div").attr("id","bar"));
});

// define a new observer
var obs = new MutationObserver(function(mutations, observer) {
    // look through all mutations that just occured
    for(var i=0; i<mutations.length; ++i) {
        // look through all added nodes of this mutation
        for(var j=0; j<mutations[i].addedNodes.length; ++j) {
            // was a child added with ID of 'bar'?
            if(mutations[i].addedNodes[j].id == "bar") {
                console.log("bar was added!");
            }
        }
    }
});

// have the observer observe foo for changes in children
obs.observe($("#foo").get(0), {
  childList: true
}); 
```

然而，这只观察到`#foo`。如果您想寻找添加`#bar`为其他节点的新子节点，则需要通过额外调用来观察那些潜在的父节点`obs.observe()`。要观察 id 为 的节点`baz`，您可以执行以下操作：

```
obs.observe($('#baz').get(0), {
  childList: true,
  subtree: true
}); 
```

选项的添加`subtree`意味着观察者将寻找添加`#bar`作为子*或*更深的后代（例如孙子）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-31T02:04:56.387

使用 jQuery 时，可以简化[MutationObserver的使用，如下所示。](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

```
$("#btnAddDirectly").click(function () {
    $("#canvas").append($('<span class="stuff">new child direct</span>'));
});
$("#btnAddAsChildOfATree").click(function () {
    $("#canvas").append($('<div><div><span class="stuff">new child tree</span></div></div>'));
});

var obs = new MutationObserver(function(mutations, observer) {
  // using jQuery to optimize code
  $.each(mutations, function (i, mutation) {
    var addedNodes = $(mutation.addedNodes);
    var selector = "span.stuff"
    var filteredEls = addedNodes.find(selector).addBack(selector); // finds either added alone or as tree
    filteredEls.each(function () { // can use jQuery select to filter addedNodes
      alert('Insertion detected: ' + $(this).text());
    });
  });
});

var canvasElement = $("#canvas")[0];
obs.observe(canvasElement, {childList: true, subtree: true});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div id="canvas">
Canvas
</div>

<button id="btnAddDirectly">Add span directly to canvas</button>
<button id="btnAddAsChildOfATree">Add span as child of a tree</button>
```

不要忘记， , 的第二个参数`.observe()`很`MutationObserverInit`重要：

在选项中，使用`childList: true`if`span`将仅作为直接子级添加。`subTree: true`如果它可以在下面的任何级别`#canvas`。

从[文档](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)：

*   `childList`：`true`如果要观察目标节点的子元素（包括文本节点）的添加和删除，则设置为。
*   `subtree`：`true`如果要观察目标和目标后代的突变，则设置为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-10T13:02:55.777

突变观察者

```
// Select the node that will be observed for mutations
const targetNode = document.getElementById('some-id');

// Options for the observer (which mutations to observe)
const config = { attributes: true, childList: true, subtree: true };

// Callback function to execute when mutations are observed
const callback = function(mutationsList, observer) {
    // Use traditional 'for loops' for IE 11
    for(const mutation of mutationsList) {
        if (mutation.type === 'childList') {
            console.log('A child node has been added or removed.');
        }
        else if (mutation.type === 'attributes') {
            console.log('The ' + mutation.attributeName + ' attribute was modified.');
        }
    }
};

// Create an observer instance linked to the callback function
const observer = new MutationObserver(callback);

// Start observing the target node for configured mutations
observer.observe(targetNode, config);

// Later, you can stop observing
observer.disconnect(); 
```

[https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

# html - 更改选择 HTML 选项的样式

> ID：13277214
> 
> 赞同：-3
> 
> 时间：2012-11-07T19:57:55.897
> 
> 标签：html, css

> **可能重复：**
> [如何设置 html“选择”选项的样式？](https://stackoverflow.com/questions/7208786/how-to-style-the-option-of-a-html-select)

我有一个 HTML 元素，我希望其中一个选项以斜体显示。我不记得在哪里，但我见过一些结合了粗体和常规字体的元素；可能是一个定制的控件。

这是HTML：

```
<select>
   <option>select a timezone</option>
   <option value="0">Casablanca</option>
   <option value="0">Dublin, Edinburgh, Lisbon, London</option>
   <option value="60">Belgrade, Bratislava, Budapest, Ljubljana, Prague</option>
   <option value="60" style="font-style:italic;">Brussels, Copenhagen, Madrid, Paris</option>
</select>​ 
```

这是[jsfiddle。](http://jsfiddle.net/E7r8w/1/)

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:01:26.573

[这](http://www.electrictoolbox.com/style-select-optgroup-options-css/)是关于如何在选项标签上使用字体样式的一个很好的参考。在某些浏览器中似乎无法做到这一点，并且有一定的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:01:55.587

```
option:nth-child(3){
 font-style:italic
} 
```

[http://jsfiddle.net/E7r8w/2/](http://jsfiddle.net/E7r8w/2/)

或者，您可以使用 javascript。

[http://jsfiddle.net/E7r8w/3/](http://jsfiddle.net/E7r8w/3/)

# mod-rewrite - URL 重写引擎：将路径名更改为 php 参数

> ID：13277216
> 
> 赞同：0
> 
> 时间：2012-11-07T19:58:00.480
> 
> 标签：mod-rewrite, url-rewriting

我有这个网站可以更改页面而不重新加载它，并且使用**window.history.push**我也让它更改了 url。

但是当我在域名后加载带有文件夹的页面时，它会转到 404，显然是因为根目录后没有文件夹。我尝试了下面的 htaccess 但没有成功：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?page=$1 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T07:58:27.130

重写引擎开启

重写规则 ^m/([^/]+)/?$ m.php?id=$1

# java - 使用 jsch 将远程服务器中的目录移动到同一远程服务器中的另一个位置

> ID：13277218
> 
> 赞同：5
> 
> 时间：2012-11-07T19:58:11.573
> 
> 标签：java, sftp, jsch

我正在使用 JSCH API 通过 sftp 连接到远程服务器。我需要将远程服务器中存在的目录从位置 A 移动到位置 B。看起来方法**channelsftp.put(src,dest)**只允许移动文件而不是目录。

有人可以解释一下我该怎么做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T16:37:29.820

您可以使用重命名命令，它会移动文件或目录并将其从原始位置删除。

sftpChannel.rename（旧文件，新文件）；

如果要保留原始目录/文件，请不要使用此方法。

希望这可以帮助。

# authentication - 如何使用 JavaMail 调试 SMTP 身份验证错误？

> ID：13277222
> 
> 赞同：3
> 
> 时间：2012-11-07T19:58:35.570
> 
> 标签：authentication, smtp, jakarta-mail

下面是我正在使用的代码：

```
 Properties props = System.getProperties();
        props.put("mail.smtp.auth", "true");
        // props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", server);
        props.put("mail.smtp.port", "25");
        Session session = Session.getInstance(props);
        Transport transport = null;
        try {
            transport = session.getTransport("smtp");
            session.setDebug(true);
            transport.connect(server, username, password);
        } catch(AuthenticationFailedException message){
            System.out.println("Authentication Failed... terminating!");
            System.out.println(message);
            System.exit(16);
        } 
```

不幸的是，我没有看到会话握手。我是否将 setDebug 放在错误的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:41:49.940

Yes, you need to set it before the Transport object is created. Move it up one line.

Note also that starting with JavaMail 1.4.5 the details of the authentication exchange are not displayed by default. You'll need to set "mail.debug.auth" to "true" to see that.

# jquery - 使用 jQuery 更改 onblur 属性

> ID：13277223
> 
> 赞同：2
> 
> 时间：2012-11-07T19:58:40.780
> 
> 标签：jquery

我正在尝试使用 jQuery 更改文本字段的 onblur 属性

但它不工作

输入字段已经有一些像这样的 onblur 代码：

```
<input id="emp" type="text" onblur="func1('abc');"> 
```

使用 jQuery 我想将其更改为：

```
<input id="emp" type="text" onblur="func2('abc','def');"> 
```

我正在尝试这段代码：

```
$('#emp').attr('onblur',"func2('abc','def')") 
```

但它什么也没做..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:00:45.020

您的代码有语法错误，您必须转义引号

```
$('#emp').attr('onblur','func2(\'abc\',\'def\')') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:00:26.147

我的猜测是您没有正确引用该属性。你应该尝试这样的事情：

```
$('#emp').attr('onblur',"func2('abc','def')") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:01:19.950

我将完全删除内联 onblur 代码并在 jquery 中执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:07:02.890

尝试：

```
$(document).ready(function() {
    $('#emp').on('blur',function() {
        func2('abc', 'def');
    });
});​ 
```

# php - 如果在“表”2 SQL中满足条件，则从“表1”中删除

> ID：13277225
> 
> 赞同：2
> 
> 时间：2012-11-07T19:58:45.933
> 
> 标签：php, mysql, sql, conditional-statements, sql-delete

我正在使用 SQL 数据库在 PHP 中制作一个小型消息传递应用程序，但遇到了一个小问题。我会尽力解释这一点，所以这里......

我有一个名为“用户”的表，如下所示：

```
ID | Username | Password | Email 
-------------------------------------------
1  | Account1 | Pass 1   | email1@mail.com
2  | Account2 | Pass 2   | email2@mail.com 
```

然后我有另一个称为“朋友”，如下所示：

```
UserID | FriendID
------------------
   1   |     2 
```

所以我需要的是一个查询，如果在第二个表中满足条件，它将从“朋友”表中删除 A 行。

例子：

```
DELETE FROM 'friends' WHERE UserID = 1 AND (users.Password = $Password WHERE users.ID = 1) 
```

我希望这是一个足够好的解释，但我发现这很难解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:00:28.010

```
DELETE FROM 'friends' 
WHERE UserID IN (
    SELECT UserID 
    FROM users 
    WHERE Password=$Password 
    AND UserID=1
) 
```

应该管用。您不需要将 UserId 字段列出两次，这将是多余的。

# python - 服务器完成初始化后，如何在 Django 中运行启动代码？

> ID：13277233
> 
> 赞同：2
> 
> 时间：2012-11-07T19:59:16.937
> 
> 标签：python, django, singleton, initialization, startup

我想创建一个线程（将来可能是一个进程），它继承所有的 django 环境和设置，但开始进行自己的监控。理想情况下，我希望在 Django 服务器完成初始化时触发它。我已经尝试了以下两种方法。第一个似乎在每次发出请求时都运行中间件初始化程序，并且它们都有一个问题，即我的启动代码仅在向服务器发出第一个请求时才被触发。

[Django 启动代码放在哪里？](https://stackoverflow.com/questions/2781383/where-to-put-django-startup-code)

[在 Django 设置之后立即运行启动代码？（也适用于命令）](https://stackoverflow.com/questions/9259844/running-startup-code-right-after-django-settings-also-for-commands)

我还看到有人为这个确切的用例检查了一些信号，但它只在 django 1.6 或更高版本中可用。

任何想法如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:02:25.200

我从来没有这样做过，但看起来你可以在 [Django admin](https://docs.djangoproject.com/en/dev/howto/custom-management-commands)中注册你自己的命令，所以你可以让你自己的类——也许——从模块中继承 BaseRunserverCommand`runserver.py`并重载[`run`](https://github.com/django/django/blob/master/django/core/management/commands/runserver.py#L72)方法来触发你的线程或进程.

（当前设置似乎在 BaseRunserverCommand 中可用——请参阅`inner_run`方法，我假设您可以简单地使用它`os.environ`来访问当前环境。）

# c# - 为什么 FxCop 坚持使用 IDisposable 作为结构

> ID：13277238
> 
> 赞同：4
> 
> 时间：2012-11-07T19:59:27.593
> 
> 标签：c#, fxcop

我的一个项目中有类似于以下的代码：

```
internal enum ArtworkType
{
    Undefined = 0,
    Bmp = 1,
    Gif = 2,
    Jpeg = 3,
    Png = 4
}

[StructLayout(LayoutKind.Sequential)]
internal struct TagArtwork
{
    internal IntPtr data;
    internal int size;
    internal ArtworkType type;
} 
```

当我在这段代码上运行 FxCop 时，我遇到了警告[CA1049](http://msdn.microsoft.com/en-us/library/ms182173.aspx)。该结构用于与本机代码库的互操作性，因此它几乎**必须**具有这种布局。为什么 FxCop 让我对这个结构感到悲伤？我在同一个源文件中有其他结构，它们也有`IntPtr`成员，但 FxCop 并没有抱怨这些。

例如，以下代码不会**触发**相同的警告：

```
internal enum ItemType
{
    Implicit = 0,
    Utf8 = 1,
    Utf16 = 2,
    Sjis = 3,
    Html = 6,
    Xml = 7,
    Uuid = 8,
    Isrc = 9,
    Mi3p = 10,
    Gif = 12,
    Jpeg = 13,
    Png = 14,
    Url = 15,
    Duration = 16,
    DateTime = 17,
    Genres = 18,
    Integer = 21,
    Riaa_pa = 24,
    Upc = 25,
    Bmp = 27,
    Undefined = 255
}

[StructLayout(LayoutKind.Sequential)]
internal struct MP4ItmfData
{
    internal byte typeSetIdentifier;
    internal ItemType typeCode;
    internal int locale;
    internal IntPtr value;
    internal int valueSize;
} 
```

我想我可以`IDisposable`在结构上实现，但这似乎是错误的。同样，我可以简单地抑制警告，但目前，我想了解触发警告的这个特定结构是什么，当它与我在同一源文件中的其他七个结构没有太大不同时。或者，我很乐意接受解释为什么其他结构**不会**触发此警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:18:31.923

每当您拥有一个包含它认为是“本机”类型的成员的托管类型时，Code Anylsis 引擎都会生成此警告。要成为本机类型，该字段必须：

*   是`IntPtr`, `UIntPtr`, 或`HandleRef`
*   不是`static`
*   *实际上从本机代码中分配了一个值*

我很确定这第三个子弹可能是您的各种结构之间的区别。`IntPtr`分析引擎（基于对 dotPeek 的快速阅读）只有在它实际找到从本机代码分配的实例时才会触发警告。我还没有确切地找到它认为“来自本机代码的分配”的确切内容，但无论是什么，我最好的猜测是你们中只有一种`struct`类型正在触发规则的这一部分。

请注意，这是基于读取VS2010 附带的代码分析引擎*当前实现的实际代码。*这绝对**不是**规则的记录行为，但可能是减少误报的特定优化。您不应该假设当前“通过”此规则的代码（例如，因为它从未从本机代码分配）总是会这样做，因为 MS 可以随时更改实现细节。

正如我在评论中提到的，在这种情况下，隐藏消息是完全合法的回应；这不是永远不应禁止的 FxCop 规则之一。该规则是非常特定于上下文的，并且仅在您*分配*自己的本机资源时才适用。如果您只是在 C# 和非托管代码之间来回传递结构，那么您很可能只是取消警告并继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:12:44.293

您链接的文章中清楚地说明了这一点：

> 此规则假定 IntPtr、UIntPtr 和 HandleRef 字段存储指向非托管资源的指针。分配非托管资源的类型应实现 IDisposable 以让调用者按需释放这些资源并缩短持有资源的对象的生命周期。

因此，仅 IntPtr 在结构中的简单外观就足以触发警告。在您确认您*确实*没有忘记释放本机资源后，在结构上应用 [SuppressMessage] 属性以不必再次查看此消息。

# javascript - 网站导航栏 http://ruvij.businesscatalyst.com/ 出现在左侧

> ID：13277242
> 
> 赞同：-1
> 
> 时间：2012-11-07T19:59:36.280
> 
> 标签：javascript, navigation, navigationbar

我是网站设计的新手，这是我为朋友设计的第一个网站

我在这个网站上的导航栏有问题，有时它出现在左边，有时在右边。这很容易在 chrome 中复制。它通常在第一次加载或几次刷新后中断。

这就是它的样子，[http ://project02.businesscatalyst.com/Jing/2012-11-08_0121.png](http://project02.businesscatalyst.com/Jing/2012-11-08_0121.png)

错误状态：[http ://project02.businesscatalyst.com/Jing/2012-11-08_0123.png](http://project02.businesscatalyst.com/Jing/2012-11-08_0123.png)

我无法弄清楚为什么会这样。我使用了某些 JS 插件，如 scrollorama、scrolldeck 等。我的自定义 JS 文件是 js.js

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:30:22.920

在我的浏览器（最新的 Firefox）中，[http:](http://ruvij.businesscatalyst.com/) //ruvij.businesscatalyst.com/ 的导航栏在每次访问第一页时看起来都很好（使用干净的缓存），而在第二次访问时会中断。

导航栏使用以下两个属性定位，这可能是 javascript 的结果。

```
left: 83.15px;
padding-left: 816.7px; 
```

我建议您定位导航栏，`right: 0;`以确保它位于页面的右侧。您可以使用任何其他数字来定义偏移量。

顺便说一句，您可能对我们的页面有另一个问题。即使页面在加载时已经向下滚动，每次重新加载后都会出现指示用户向下滚动的动画箭头。这是因为许多浏览器会记住页面重新加载之间的滚动位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:04:23.673

感谢您回答我的问题。

我将文档准备功能更改为窗口加载并修复了它。不知道为什么会这样。

# jenkins - 詹金斯构建描述是环境变量吗？

> ID：13277244
> 
> 赞同：4
> 
> 时间：2012-11-07T19:59:38.440
> 
> 标签：jenkins

詹金斯构建描述是环境变量吗？

我有一项设置构建描述的工作，我想将该值作为“预定义参数”传递给“在其他项目上触发参数化构建”。我可以使用类似 ${BUILD_DESCRIPTION} 变量的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:03:47.447

不可以。您可以在 中找到所有环境变量的列表`http://<yourjenkins>/env-vars.html/`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T21:27:37.800

您可以通过将构建描述写入上游作业工作区下某处的属性文件来解决这个问题，格式为

```
builddesc=My Build Description 
```

然后，您可以在“在其他项目上触发参数化构建”后期构建步骤中使用“来自属性文件的参数”选项，构建描述将作为环境变量提供（与您在属性文件中给出的名称相同）在您的下游构建中。

# iphone - 为什么我可以在没有提示的情况下访问 iPhone 通讯录联系人？

> ID：13277249
> 
> 赞同：1
> 
> 时间：2012-11-07T19:59:49.453
> 
> 标签：iphone, objective-c, ios6, abaddressbook

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(nil, nil);

ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
    NSArray *folks = (__bridge NSArray *)(ABAddressBookCopyArrayOfAllPeople(addressBook));
    NSLog(@"%@",folks);
}); 
```

我可以在不提示用户的情况下访问联系人。打开设置>隐私>联系人我看不到我的应用程序的条目。（在模拟器中运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:41:16.603

联系人隐私提示在模拟器上不起作用。在设备上试用。

# ruby-on-rails - && 之后的第二个布尔值是否在 Rails 中执行？

> ID：13277250
> 
> 赞同：0
> 
> 时间：2012-11-07T19:59:50.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我对 Rails 还是很陌生，而且很多都不是我习惯的。找不到我的答案，实际上也不知道要搜索什么，所以请帮忙。

这是：

```
def create
    @note = Note.new(params[:note])
    @note.creator = current_user
    if member_of_project? @note.project_id
      if @note.save
        redirect_to @note, :notice => "Successfully created note."
      else
        render :action => 'new'
      end
    else
      render :action => 'new'
    end
  end 
```

等于：

```
def create
    @note = Note.new(params[:note])
    @note.creator = current_user
    if member_of_project? @note.project_id && @note.save
      redirect_to @note, :notice => "Successfully created note."
    else
      render :action => 'new'
    end
  end 
```

？？？

我真正想知道的是第二个是否会打电话`@note.save`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:13:41.827

与许多其他语言一样，Ruby 将实现“短路求值”，这意味着只有在第一个操作数为真时，第二个操作数才会在“与”中求值。您可以在此处阅读更多关于 ruby​​ 的详细信息：[http ://www.linuxtopia.org/online_books/programming_books/ruby_tutorial/Ruby_Expressions_Defined_And_Or_and_Not.html](http://www.linuxtopia.org/online_books/programming_books/ruby_tutorial/Ruby_Expressions_Defined_And_Or_and_Not.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:06:48.413

假设您已经尝试过并且失败了。是的，如果它到达条件的第二部分，save 方法应该运行。

我发现，如果使用这样的条件，我需要将其括在括号中以使代码正常运行。

```
 if (member_of_project? @note.project_id) && (@note.save) 
```

当然，如果我不问“你的测试告诉你什么？”，我会成为什么样的开发者？

# sql-server - 有效地对大型内部联接进行计数和求和

> ID：13277252
> 
> 赞同：3
> 
> 时间：2012-11-07T19:59:56.050
> 
> 标签：sql-server, tsql, inner-join

请考虑以下情况（为了问题而简化）：

我在 SQL Server 2012 数据库中有以下表：

```
Parent_Table

Id  | Parent table fields
----+--------------------
1   | ...
2   | ...
3   | ...
...

Child_Table

Id  | ParentId | Child table fields
----+----------+-------------------
1   | 2        | ...
2   | 1        | ...
3   | 1        | ...
4   | 3        | ...
5   | 2        | ...
...

Big_Table

Id      | ChildId  | Value  | Status  | Other fields
--------+----------+--------|---------------------
1       | 12       | 672    | Closed  |
2       | 23       | 133    | Closed  |
3       | 7        | 2611   | Open    |
4       | 14       | 84     | Closed  |
...
1295769 | 23       | 458    | Closed  |
1295770 | 18       | 1046   | Open    |
1295771 | 7        | 8      | Open    | 
```

Child 和 Parent 表相对较小（大约 100 个 Parent 条目和每个 parent 5 个 Child 条目）并且它们的条目每天只插入或删除几次。

另一方面，“大表”正在快速增长（为了讨论，每秒 100 个条目），并且行的状态在一段时间后变为 Closed（想想客户端会话，这里实际上就是这种情况）。

我需要定期（每隔几秒）为指定的 Parent.Id 提供 Big_Table 行数和 Big_Table.Value 列的总和**-**每次都不同。

我怀疑直接的实现（使用内部连接等）可能效率极低，更好的解决方案可能包括附加表、某种计数器表，或者我应该在我的服务代码中实现它（？！）并小心不知何故的坚持。

实施上述内容的“正确”（效率方面）方式是什么？处理额外级别的父母/孩子的解决方案将是最好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T00:23:53.490

如果我们假设 ChildId 始终保留相同的 ParentId，那么要考虑的一种选择是将 ParentId 添加到 Big_Table。如果您确定某些行只会从您控制的应用程序代码中添加到这些表中（例如，与具有数据库连接的人自己运行 INSERT 语句相反），您可以在内存中保留父表和子表的缓存，并且插入 Big_Table 时提供 ChildId 到 ParentId 的快速映射。然后您的总和/计数查询将完全在 Big_Table 上完成。这种非规范化当然会增加 Big_Table 的大小，但如果可以容忍这种情况和应用程序更改，这是一个可行的选择。

此外，如果 ParentId 是访问 Big_Table 中的行的主要方式（或具有最大性能问题的方式），那么您可以考虑在 ParentId 上对 Big_Table 进行分区。

一种完全不同的方法是将所需的统计信息直接存储在 Parent_Table 中，并使用 Big_Table 上的触发器来保持更新，或者，如果您在应用程序代码中控制所有数据库交互，则使用应用程序逻辑来更新统计信息作为Big_Table 插入。您可以在事务中执行此操作以确保一致性，或者如果您可以容忍某些错误，则可以将其作为异步统计信息更新来完成，以便 Big_Table 上的插入可以快速发生，而统计信息在后台更新。

至于处理额外级别的父母和孩子，您可能需要在灵活性和效率之间做出选择。例如，您可能需要限制您愿意支持的树的深度，以便硬编码深度逻辑以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:42:01.680

我会在下面的 2 上做一个时间测试，如果合理的话，你可以保持简单。我将留给您确定 with(nolock) 提示是否适合您的情况（数据库设置、数据的性质）。由于您知道父 ID，因此不需要涉及 Parent_Table。

显然 Big_Table.ChildId 和 Child_Table.ParentId 上应该有一个索引

```
select sum(Value)
from Big_Table with(nolock)
where ChildId in
(select Id
from Child_Table with(nolock)
where ParentId = @ParentId)

select sum(Value)
from Big_Table with(nolock)
inner join Child_Table with(nolock)
on  Big_Table.ChildId = Child_Table.Id
where Child_Table.ParentId = @ParentId 
```

# mysql - 多行上的 MySQL 条件

> ID：13277253
> 
> 赞同：0
> 
> 时间：2012-11-07T19:59:55.883
> 
> 标签：mysql

我有一个这样的 MySQL 表：

```
+----+------------+----------+
| id | instanceID | answerID |
+----+------------+----------+
| 1  | 1          | 10       |
| 2  | 1          | 12       |
| 3  | 1          | 20       |
| 4  | 2          | 12       |
| 5  | 2          | 20       |
| 6  | 2          | 22       |
| 7  | 2          | 25       |
| 8  | 3          | 20       |
| 9  | 3          | 25       |
| 10 | 4          | 12       |
| 11 | 4          | 20       |
+----+------------+----------+ 
```

我想在某些条件下检索 instanceID。

这很容易使用“或”：

```
SELECT instanceID FROM table WHERE (answerID = 10 OR answerID = 12) GROUP BY instanceID;
Returns:
1,2,4 
```

但是，“AND”并不是那么简单，因为条件应用于每个单独的行，而不是每个 instanceID。

例如，我想检索 instanceID where (answerID = 20 AND answerID = 25) 应该返回 2,3

我需要避免像 WHERE x IN（子查询）这样的子查询，因为表是 biIIIIig。

这是一个很难在搜索引擎中搜索到的概念，所以我在这里求助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:05:12.000

像这样的东西怎么样：

```
select instanceid
from yourtable
where answerid in (20, 25)
group by instanceid
having count(distinct answerID) > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e571a/3)

甚至：

```
select instanceid
from yourtable
where answerid in (20, 25) -- list of values here
group by instanceid
having count(distinct answerID) = 2 -- match the count of the values here 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e571a/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:13:01.490

另一种方法是使用连接，但仅基于第一个标准被限定为甚至不费心查看每个可能的实例......例如......

```
select 
      YT.InstanceID
   from 
      yourtable YT
         JOIN yourTable YT2
            on YT.InstanceID = YT2.InstanceID
            AND YT2.AnswerID = 25
   where 
      YT.answerid = 20 
```

# javascript - 使用 JavaScript API 在 Parse 中的对象安全性 - 将用户绑定到已保存的对象

> ID：13277258
> 
> 赞同：8
> 
> 时间：2012-11-07T20:00:22.323
> 
> 标签：javascript, node.js, backbone.js, marionette, parse-platform

在 Parse 中管理实体时，我需要将很多对象绑定到当前登录的用户。

我的担忧是：

2.  没有后端代码确保`User`传入的是当前登录的用户。
3.  用户可以将任何新创建的对象分配给其他用户。

他们有[这个示例 TODO 应用程序](http://parseplatform.github.com/Todo/)，在[文档](https://parse.com/tutorials/todo-app-with-javascript)中没有显示任何云代码，以确保分配给`User`的`Todo`是当前登录的用户。

现在我浏览[了代码](http://parseplatform.github.com/Todo/js/todos.js)，我开始认为每当保存一个对象时，它都会与用户相关联。谁能解释为什么这个应用程序有效以及它是如何将`Todo`s 与 s 关联起来的`User`？

**更新：**没关系，我在他们的代码中找到了他们指定用户为 Todo 保存的位置。我的问题是，是什么阻止了用户编写使用其他人的用户 ID 保存待办事项的代码？

```
this.todos.create({
        content: this.input.val(),
        order:   this.todos.nextOrder(),
        done:    false,
        user:    Parse.User.current(),
        ACL:     new Parse.ACL(Parse.User.current())
      }); 
```

**更新#2：**如果`User`对象的`ACL`设置只允许用户能够读取`User`他们拥有的对象，那么他们将无法查询以获取另一个用户对象以传递。但是，还有另外两个可能的问题：

1.  `User`即使s 表`user`上的字段需要一个，他们是否可以传递用户的 objectId 而不是整个对象？`Todo``_User`
2.  我相信他们也可以创建一个新的用户对象并将其分配给它......我正在尝试考虑一个可能会成为问题的场景，但我现在不能。

如果有人可以确认或提供对其中任何一个有帮助的解决方案。现在要尝试测试#1。

**更新#3——经过一些测试：**

1.  如果s 表`user`上的字段`Todo`需要`_User`对象，则不会将 objectId 作为字符串。
2.  然而，他们可以创建一个新的用户对象并在那里设置 objectId 来解决这个问题。

    ```
    var user = new Parse.User();      // Create user object
    user.id = "cqmEuj1Bzf";           // Assign user id

    // Create and save Todo
    var td = new Todo();              
    td.set("name", "Some ting todo");
    td.set("user", user);
    td.save(); 
    ```

这正是我所担心的。只要我知道他们的 user_id ( ) ，**我就能成功地将 Todo 保存到另一个用户的帐户。**`objectId`有了足够多的用户，他们可能会猜到至少一个随机搞砸某人的帐户。

所以现在怎么办？

**答：**使用云码验证传入的用户是否与当前用户匹配。答案已发布在[Parse 的论坛上](https://parse.com/questions/object-security-in-parse-using-the-javascript-api-tying-users-to-the-objects-that-are-saved)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:15:23.567

您可以使用云代码来验证传入的用户是否与当前用户匹配。该答案已在[此处的 Parse 论坛上](https://parse.com/questions/object-security-in-parse-using-the-javascript-api-tying-users-to-the-objects-that-are-saved)发布。

> 您可以使用 Cloud Code 确保 objectId 对应于发出此请求的当前用户。事实上，我们的示例应用程序 Anypic 对“照片”和“活动”类进行了检查。
> 
> 来自 Anypic 的云代码：

```
Parse.Cloud.beforeSave('Activity', function(request, response) {   var currentUser = Parse.User.current();    var objectUser = request.object.get('fromUser');

  if(!currentUser || !objectUser) {
    response.error('An Activity should have a valid fromUser.');   } else if (currentUser.id === objectUser.id) {
    response.success();   } else {
    response.error('Cannot set fromUser on Activity to a user other than the current user.');   } });

Parse.Cloud.beforeSave('Photo', function(request, response) {   var currentUser = Parse.User.current();    var objectUser = request.object.get('user');

  if(!currentUser || !objectUser) {
    response.error('A Photo should have a valid user.');   } else if (currentUser.id === objectUser.id) {
    response.success();   } else {
    response.error('Cannot set user on Photo to a user other than the current user.');   } }); 
```

# java - JQgrid中列之间的粗线

> ID：13277265
> 
> 赞同：1
> 
> 时间：2012-11-07T20:00:35.390
> 
> 标签：java, jqgrid

我正在尝试将`JQgrid`我正在处理的列之间的线条加粗。我试图在 Special、Exit、Buyback、Reset、New 和其他粗体之前获取列线。任何帮助都会得到帮助

```
 $("#departmentGrid").jqGrid({  
    datatype: 'jsonstring',
    datastr : departmentData,
    colNames:['SVP', 'Dept','Mkt Inact OH $','% to Ttl', 'Special', '% to Ttl', 'Exit','% to Ttl','Buyback','% to Ttl','Reset','% to Ttl','New’,'% to Ttl', 'Other','% to Ttl'],
    colModel:[
          {name:'svp',index:'svp', sorttype:'int', width:'5', align:'left', editoptions: {border: '3'}},
          {name:'dept',index:'dept', sorttype:'int', width:'2', align:'left'},
          {name:'mktDollars',index:'mktDollars', sorttype:'int', width:'4', align:'right'},
          {name:'mktPercent',index:'mktPercent', sorttype:'int', width:'2', align:'center'},
          {name:'rsn',index:'rsnCdSpecBuy', sorttype:'int', width:'3', align:'right'},
          {name:'rsnCdSpecBuyPercent',index:'rsnCdSpecBuyPercent', sorttype:'int', width:'2', align:'center'},
          {name:'exit',index:'exit', sorttype:'int', width:'2', align:'right'},
          {name:'exitPercent',index:'exitPercent', sorttype:'int', width:'2', align:'center'},
          {name:'buyback',index:'buyback', sorttype:'int', width:'2', align:'right'},
          {name:'buybackPercent',index:'buyback', sorttype:'int', width:'2', align:'center'},
          {name:'reset',index:'reset', sorttype:'int', width:'2', align:'right'},
          {name:'resetPercent',index:'resetPercent', sorttype:'int', width:'2', align:'center'},
          {name:'new',index:'newSku', sorttype:'int', width:'2.5', align:'right'},
          {name:'newPercent',index:'newPercent', sorttype:'int', width:'2', align:'center'},
          {name:'other',index:'other', sorttype:'int', width:'2', align:'right'},
          {name:'otherPercent',index:'otherPercent', sorttype:'int', width:'2', align:'center'},
      ],
    jsonReader: {
        root: "results",
        repeatitems: false
    },
    gridview: true,
    altRows: false,
    sortorder: "asc",
    height:'auto',
    selrow:true,
    autowidth: true,
    title:true,
    caption:false,

    loadComplete: function(){
         var rowIDs = jQuery("#departmentGrid").getDataIDs(); 
         var allRowsOnCurrentPage = $('file-grid').jqGrid('getDataIDs'); 

         for (var i=0;i<rowIDs.length;i=i+1){ 
            rowData=jQuery("#departmentGrid").getRowData(rowIDs[i]);
            var trElement = jQuery("#"+ rowIDs[i],jQuery('#departmentGrid'));
            if (rowData.dept == "") { 
                trElement.addClass('total_row');
            }

            if(rowData.svp != ""){
                trElement.addClass('svp_row');
            }
          }

      }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:08:44.023

不确定这是否是最好的方法，但我知道这可行：

编写所需的 css，然后添加 loadComplete（或 gridComplete）函数并使用该 css 样式设置所需的单元格。这是伪代码，未经测试。

```
loadComplete: function (d) {
    $.each(d.rows, function (i, item) {
        var i = d.rows[i].id;
        jQuery('#' + i).addClass("new_css_border_name");
    });
} 
```

您只需添加代码以检查您要应用的条件。

# php - 识别字符集 (php)：?É¬´

> ID：13277277
> 
> 赞同：2
> 
> 时间：2012-11-07T20:01:39.910
> 
> 标签：php, character-encoding

我遇到了一个包含以下代码的数据库：？É¬´（应该是：ë）。我找不到使用了哪个字符集。我希望一切都是 UTF8，所以我需要转换这些代码。我找到了转换字符集的 php 函数，但是我尝试过的所有方法（mb_detect_encoding、iconv、utf8_decode 等）都不能将 ?É¬´ 转换为 ë。第一个问题是我无法找出使用了哪个字符集。第二个问题是如何将该字符集转换为 UTF8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:17:38.527

这对于评论来说太长了，所以我将其发布为答案，尽管我真的不想称之为答案。

我会找到一个可以用作测试的字符串，然后简单地运行一系列转换以查看其中是否有任何一个正确。[这里](http://www.php.net/manual/en/mbstring.supported-encodings.php)有一个 mbstring 模块支持的字符集列表。所以基本上你会做类似的事情：

```
$string = "whatever"; // String you retrieve from the database.
$charSets = array('UTF-8', 'ISO-8859-1', ...); // Fill this array with the character sets.

foreach ($charSets as $cs) {
    print mb_convert_encoding($string, 'UTF-8', $cs)."\n";
} 
```

您可以并且可能应该使用 iconv() 代替，但我没有支持的字符集列表，所以我使用 mbstring 作为示例。

# asp.net-mvc - 基于继承的自定义模型绑定

> ID：13277278
> 
> 赞同：0
> 
> 时间：2012-11-07T20:01:40.787
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我需要创建一个发布操作来监听 ASP.NET MVC 4 中的一堆事件消息。有很多事件，所以我无法为每个事件创建一个操作。因此，最好使用它们的基类创建一个动作，因为发布的模型使用自定义模型绑定器来补充事件。

一些事件如下所示：

```
public class QueryID : Identity<Guid>
{
    public QueryID(Guid id)
    {
        Identifier = id;
    }
}

public class QueryEvent : IEvent<QueryID>
{
    public QueryEvent(QueryID id)
    {
        Identity = id;
    }

    #region Implementation of IEvent<out QueryID>

    public QueryID Identity { get; private set; }

    #endregion
}

public class QueryCreated : QueryEvent
{
    public string ConnectionID { get; private set; }

    public QueryCreated(QueryID id, string connectionID)
        : base(id)
    {
        ConnectionID = connectionID;
    }
}

public class ColumnAdded : QueryEvent
{
    public string Column { get; private set; }

    public ColumnAdded(QueryID id, string column)
        : base(id)
    {
        Column = column;
    }
} 
```

接收这些消息的操作方法如下所示：

```
[HttpPost]
    public ActionResult Index(IEvent<IIdentity> e)
    {
        // whatever

        return new EmptyResult();
    } 
```

基 Identity 类实现了该`IEvent<IIdentity>`接口。

模型绑定器会是什么样子来完成这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:26:17.620

单纯的模型绑定在这里对您没有帮助。模型绑定的工作方式是，框架查看操作所期望的参数类型，使用反射创建该类型的默认实例，并使用表单中发送的数据来混合其上的每个公共属性。

您操作中的参数是一个接口，因此框架将无法创建实例。它只是不知道要创建接口的哪个实现。

在一个例子中，我在发布的表单中使用了一个隐藏字段来指示接口的哪个实现将绑定到 action 参数。但我有一个简单的场景。一个接口，两个实现。每一个对应一个表格。所以我可以有一个隐藏的文件告诉我我希望我的模型绑定器创建的类的名称。

在您的情况下，如果事件的发起者（我认为是某个客户端应用程序）知道应该调用哪个模型，那么您可以将该信息与其他信息一起发送到您的操作。

不幸的是，我目前没有代码。如果您认为此解决方案可能有所帮助，我可以挖掘代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:29:54.673

可以编写自定义模型绑定器提供程序以支持 MVC3+ 中的接口，请参阅这篇文章。

[http://www.matthidinger.com/archive/2011/08/16/An-inheritance-aware-ModelBinderProvider-in-MVC-3.aspx](http://www.matthidinger.com/archive/2011/08/16/An-inheritance-aware-ModelBinderProvider-in-MVC-3.aspx)

然后将继承特定接口的任何类型传递给相关的模型绑定器，然后它可能会尝试 a`as ConcreteClass`和 null 检查以找出实际类型是什么。我没有尝试过这个，因为我有类似的问题并且已经无法解决，但相关帖子看起来指向了正确的方向。

# html - 如何限制强标签的字符数？

> ID：13277280
> 
> 赞同：-1
> 
> 时间：2012-11-07T20:01:49.200
> 
> 标签：html

谁能告诉我“如何限制产品名称的 ccharacters 数量”

我的意思是这里：`http://laptopsisland.com/shop/c/netbooks/`

有些产品名称非常大，因此，我无法看到“立即购买”（当我将鼠标悬停时）

这是我用于产品名称的代码： `<strong class="below-thumb">[product.name]</strong>`

我在谷歌尝试了“如何限制强标签的字符数”，但我没有找到..对不起，我对 html 没有太多兴趣，..所以任何人都可以..？

对不起，如果它是一个菜鸟问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:10:28.200

你不能..strong 标签定义了一个重要的文本。无论您在强标签内的任何文本都将被显示。如果要限制字符数，请使用文本框。尝试这个：

```
<input type="text" class="below-thumb" value="product_name" maxlength="10"> 
```

希望这可以帮助你。

更新：要将文本框设置为不可编辑并删除边框，请将这些代码行作为属性添加到您的文本框。

```
readonly="readonly" style="border:0px" 
```

# java - Java - 这是一个好习惯吗？

> ID：13277282
> 
> 赞同：0
> 
> 时间：2012-11-07T20:01:53.623
> 
> 标签：java, arraylist

我正在设计一个简单的汽车租赁系统，并且想知道我是否使用了良好的设计实践。基本上，我有一个陈列室数组列表，它存储所有出租汽车（新对象）。每个汽车对象内部都有一个数组列表，用于表示该月该汽车的可用性。可用性包括 31 个值（对应于该月中的每一天），0 或 1（可用）。它们最初设置为 1，直到当天预订汽车。是否有另一种整合可用性的方法？

```
ArrayList<Car> showroom = new ArrayList<Car>();

ArrayList<Integer> Available1 = new ArrayList<Integer>();
ArrayList<Integer> Available2 = new ArrayList<Integer>();

setAllDatesAvailable(Available1);
setAllDatesAvailable(Available2);

Car number1 = new Car(objectitems, ... , Available1);
showroom.add(number1);
Car number2 = new Car(objectitems, ... , Available2);
showroom.add(number2); 
```

> //预约流程

```
setAllDatesAvailable(ArrayList Array) {
   for (int i = 0; i < 31; i++) {
      Array.add(1);
} 
```

注意：

*   我不担心时间戳，假设汽车被预订了一整天
*   假设系统仅适用于单月 31 天

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:13:29.160

将可用性记录为布尔值（或整数）数组会更简单。没有必要使用`ArrayList`这样的固定长度记录（主要好处`ArrayList`是它可以动态增长）。

我认为最好使用 boolean 或 int 的默认值来指示可用性 - 然后您根本不需要显式初始化数组。对于布尔值，这意味着记录预订不可用：

```
 boolean[] booked = new boolean[31];
    System.out.println(booked[0]);  // false 
```

这也突出了一个潜在的混淆——一个月中的几天经常因为零索引而在软件中混淆，所以你需要清楚一个月的第一天是 0 还是 1。

在 Car 对象中存储（并在必要时初始化）预订/可用性，并在 Car 对象上提供方法以根据需要操作该数据会更好、更面向*对象*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T20:13:59.087

以下是我建议对您的代码进行的一些改进：-

1.  首先，遵循[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。变量名应以小写字母开头。`Available`-> `available`，甚至更好，`availableDates`以匹配您的目的`List`

2.  始终使用*通用类型*集合。

    ```
    setAllDatesAvailable(ArrayList Array) 
    ```

    至：

    ```
    setAllDatesAvailable(ArrayList<Integer> array); 
    ```

3.  用作`Interface`您的参考类型。您应该将您的清单声明为：-

    ```
    List<Integer> availableDates = new ArrayList<Integer>(); 
    ```

    在您的方法中的形式参数中也是如此，如@Alex 的评论所示。

4.  为变量选择有意义的名称。

    ```
    Car number1 = ...; <-- // makes no sense to reader 
    ```

    将其更改为： -

    ```
    Car car1 = ...; 
    ```

5.  尽可能尝试将参数命名`formal`为与参数相同的名称`actual`。

    ```
    setAllDatesAvailable(ArrayList<Integer> array); 
    ```

    最好声明为：-

    ```
    setAllDatesAvailable(List<Integer> availableDates); 
    ```

在所有这些更改之后，您可以期待即兴代码的功能，@DNA 在他的[回答](https://stackoverflow.com/a/13277427/1679863)中写得非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:56:21.757

可能像下面这样 - 我会避免传递裸体系列。LocalDate 在 joda 库中。Car 的默认范围是经过深思熟虑的，并假设它们在同一个包中，但客户端不是：

```
public class Showroom {

    private Collection<Car> cars = new ArrayList<Car>();

    public boolean isCarAvailable(Car car, LocalDate day) {
        return car.isAvailable(day);
    }

    public void bookCarOnDate(Car car, LocalDate day) throws IlegalStateException {
          car.book(day);
    }

    public Collection<Car> getCars() {
          return Collection.unmodifiableCollection(cars);
    }
}

class Car {

    private Map<LocalDate, Boolean> dayAvailability = new HashMap<LocalDate, Boolean>();

    Car() {
        //add other private attributes
        //don't provide setters for these - create new whenever modified so don't leak 
        //state and thread safety
    }

    boolean isAvailable(LocalDate day) {
       return dayAvailability.get(day) != null && dayAvailability.get(day);
    }

    void book(LocalDate day) {
     if (isAvailable(day)) {
         dayAvailability.put(car, true);
     else {
         throw IllegalStateException("Car "+car+" not available for booking on date "+localDate);
     }
} 
```

# django - 从 github 检索私有存储库提交

> ID：13277286
> 
> 赞同：6
> 
> 时间：2012-11-07T20:02:11.597
> 
> 标签：django, git, github, github-api

我需要从 github 上的私有存储库中检索所有提交。

我已经尝试过使用 github API 文档。它提供了用于检索公共存储库提交的 API。 [https://api.github.com/repos/:owner/:repo/commits](https://api.github.com/repos/:owner/:repo/commits)

任何人都可以帮助我从私人存储库中获取所有提交吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T08:15:50.837

私有存储库意味着您需要进行身份验证才能执行查询（此处获取提交）。
如果您拥有私人仓库，这应该可以工作：

```
curl -u 'username:password' https://api.github.com/repos/:owner/:repo/commits 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T08:43:50.783

您也可以`Personal access tokens`为特定用途创建...[这里](https://github.com/settings/tokens)。

[![在此处输入图像描述](../Images/ba9bf1d9dcaa0c57943ab7e17de977c3.png)](https://i.stack.imgur.com/aPaj4.png)

使用邮递员：

`https://api.github.com/repos/:owner/:repo/commits` [![在此处输入图像描述](../Images/e3b6180df5232450fed3ee5231da864a.png)](https://i.stack.imgur.com/pPArC.png)

# algorithm - 使用二进制搜索在数组中查找数字的位置

> ID：13277292
> 
> 赞同：2
> 
> 时间：2012-11-07T20:02:32.813
> 
> 标签：algorithm, binary-search

我有一个数字数组，比如 nums[n] 。我必须找到位置 'i' 使得 nums[i] 在所有小于 key 的整数中最大。nums 已排序。我知道我可以使用从 i=0 到 nums[i]>=key 的位置的线性搜索来做到这一点。但我想做得更快，所以有人能告诉算法所需的二进制搜索吗？

示例： nums[]={2,4,14,25} 和 key=15 。因此 i 应该是 2 因为 14 是小于 15 的所有其他整数中的最大整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:04:36.927

请记住，在正常的二分搜索代码中，所使用的 low 和 high 变量表示数组的索引，因此您很容易知道位置。

首先看看是否 a[0]>=key，因为应该至少比 key 少 1 个元素来搜索它。

然后进行二分查找：取出中间元素，如果该元素>=key，则丢弃它右边的所有元素，包括它。

但是，如果 a[mid]`<`键，则丢弃它左侧的所有元素（包括它）并取出直到现在找到的元素或该元素的最大值。

代码 ：

```
 if(a[0]>=key)
    print("Some error message");
    int found=-1;
    int low=0,high=n-1;
    while(low<high)
    {
    int mid=(low+high)/2;
    if(a[mid]>=key)
       high=mid-1;
    else
    {
       low=mid+1;
       found=max(found,a[mid]);
    }

  } 
```

现在你知道在这个循环之后，low 将等于 high 所以 print(low) 或 print(high)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T04:08:12.137

韦恩的方法是正确的，我对代码做了一些修改。我的代码是用 Java 编写的。

当 a <= nums[mid] 时，所有大于或等于 key 的数字都被丢弃，high 分配给 mid-1。所以当循环结束时，high 是第一个小于 key 或 -1 的数字。-1 表示给定数组中没有数字小于键。

```
public static int lessThan(int[] nums, int key){
    if(nums == null || nums.length == 0) return -1;
    int low = 0, high = nums.length -1;
    while(low <= high){
        int mid = (low + high) >> 1;
        if(key <= nums[mid]){
            high = mid - 1;
        }else {
            low = mid +1;
        }
    }
    return high;
} 
```

# asp.net - 会话状态只能在 enableSessionState 设置为 true 时使用

> ID：13277294
> 
> 赞同：6
> 
> 时间：2012-11-07T20:02:50.780
> 
> 标签：asp.net, session, web-config, session-state

我没有使用 MVC、URL 重写、自定义 HTTP 模块等。在从继承 System.Web.UI.Page 的网页或通过 System.Web.HttpContext.Current.Session 对 Session 属性进行基本调用时，我得到以下错误：

*会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在`<configuration>\<system.web>\<httpModules>`应用程序配置的部分中。*

经过一番研究，我实现了Web.config如下，但仍然出现错误。我正在使用内置的 Web 服务器从 Visual Studio 2010 中调试 Web 应用程序。

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
        <sessionState mode="InProc" timeout="60" cookieless="false" />
        <pages enableSessionState="true" />
        <httpModules>
            <remove name="Session" />
            <add name="Session" type="System.Web.SessionState.SessionStateModule" />
        </httpModules>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:35:59.627

你的问题是直截了当的。如果您将代码从在 Session_Start 全局事件之后执行的地方转移，那么您会很轻松地看到这个问题。例如，在 Page_Init 事件中编写您的代码或覆盖 OnInit 并在那里对您的 Session 做任何您想做的事情。

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T20:03:59.743

我花了很多时间调试这个问题。我们的网站直到昨天都运行良好，但突然停止工作并出现错误。

会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。

选中时，服务列表中缺少 ASP.net 状态服务。

如下重新安装它有助于解决问题。

C:\Windows\Microsoft.Net\Framework64\v4.0.30319\aspnet_regiis -i

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:02:39.310

这个问题在我的已知场景中重现......

如果从浏览器中出现一个框架集或两个并行请求，如果这两个页面具有相同的自定义基础页面，则访问会话会由于多个工作线程而导致此异常...

更新：对于这个问题的所有患者，我在这里有我的发现！1\. 我可以在 IE 浏览器 (IE10) 和 FIREFOX(22) 中重现此问题，尽管我在本地代码中设置了所有已启用的..etc.etc...，当连接选项卡中的 IE 设置 --> LAN设置有“为本地主机使用代理服务器...”复选框显示为已检查 - 没有有效的代理服务器设置...

当我在 IE 中取消选中此选项时，具有 DEFAULT Session 设置的相同代码会像 HORSE 一样运行！

希望能给点光明，

谢谢

# xcode - iOS 6，Xcode 4.5 视频播放完毕后不退出

> ID：13277295
> 
> 赞同：2
> 
> 时间：2012-11-07T20:02:53.223
> 
> 标签：xcode, ios6, xcode4.5

我正在使用此代码在 iOS 6 上播放视频：

```
-(void)GrommeVideo4
{
NSURL *url5 = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                      pathForResource:@"Flickers" ofType:@"mp4"]];
grommePlayer4 =  [[MPMoviePlayerController alloc]
                  initWithContentURL:url5];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayerWillExitFullscreen:)
                                             name:MPMoviePlayerWillExitFullscreenNotification
                                           object:nil];

grommePlayer4.controlStyle = MPMovieControlStyleDefault;
grommePlayer4.shouldAutoplay = YES;
[self.view addSubview:grommePlayer4.view];
[grommePlayer4 setFullscreen:YES animated:YES];
}

-(void) moviePlayBackDidFinish:(NSNotification *)aNotification{
[grommePlayer4.view removeFromSuperview];
grommePlayer4 = nil;
}

- (void)moviePlayerWillExitFullscreen:(NSNotification*) aNotification {
[grommePlayer4 stop];
[grommePlayer4.view removeFromSuperview];
grommePlayer4 = nil;
} 
```

而且我可以随时按“完成”退出视频，并且效果很好，但是当我将视频观看到最后时，它只是显示黑屏。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:19:04.493

试试这个，希望有帮助

```
-(void)GrommeVideo4
{
    NSURL *url5 = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                      pathForResource:@"Flickers" ofType:@"mp4"]];
    grommePlayer4 =  [[MPMoviePlayerController alloc]
                  initWithContentURL:url5];

    grommePlayer4.controlStyle = MPMovieControlStyleDefault;
    grommePlayer4.shouldAutoplay = YES;
    [self.view addSubview:grommePlayer4.view];
    [grommePlayer4 setFullscreen:YES animated:YES];
}

-(void) moviePlayBackDidFinish:(NSNotification *)aNotification{
    [grommePlayer4.view removeFromSuperview];
    grommePlayer4 = nil;
}

- (void)moviePlayerWillExitFullscreen:(NSNotification*) aNotification {
    [grommePlayer4 stop];
    [grommePlayer4.view removeFromSuperview];
    grommePlayer4 = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:29:45.010

您是否尝试在moviePlayBackDidFinish 中也停止播放器？

# php - Yii - 同一个模型的多个关系

> ID：13277296
> 
> 赞同：5
> 
> 时间：2012-11-07T20:02:57.357
> 
> 标签：php, mysql, activerecord, yii, many-to-many

我如何才能在`YII`每次关联到给定模型时获取相关模型，或者至少计算它发生了多少次？

**问题：**
我有一张**Orders**表和一张**Products**表。
*每个产品与订单关联 0 次或多次*。

我如何通过 YII 中的标准关系工具知道产品在订单上的次数？
我通过一个联合表创建了一个多对多关系并用它来声明我的关系

```
'products'=>array(self::MANY_MANY, 'Product', 'index_order_products(order_id, product_id)') 
```

问题是当我调用*$order->products*时，它只返回唯一的产品，而不是每次相关的产品。

我只需要知道订单上每种产品的数量，所以我试过了

```
'products'=>array(self::MANY_MANY, 'Product', 'index_order_products(order_id, product_id)', 'select'=>'*, COUNT(product_id) as count', 'group'=>'product_id') 
```

但是，如果我然后尝试调用`$order->products[0]->count`它说计数尚未定义。
我设法通过在数据库中创建一个空列数来规避这个问题。这样我就得到了我需要的号码，但肯定有更好的方法。

在 YII 中做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:31:42.383

正确的方法是使用 [Statistical Query](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query)。就是为了这些目的。

**不优雅的方式**

> 但是，如果我然后尝试调用 $order->products[0]->count 它说计数尚未定义。

这是因为您正在从评估关系时未返回的对象访问计数。用于`CVarDumper::Dump($order->products)`查看查询时得到的结果

或者另一种方式可能是`count($order->products[0])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:27:24.357

要使用它，您确实需要`count`在 Product 类中定义属性

```
'products'=>array(self::MANY_MANY, 'Product', 'index_order_products(order_id, product_id)', 'select'=>'*, COUNT(product_id) as count', 'group'=>'product_id')

 class Product extend CActiveRecord {
     public $count = 0;
 // skip in rules function add this
     array('count', 'safe'), 
```

# java - 缺少依赖项导致 ANT 构建失败

> ID：13277297
> 
> 赞同：0
> 
> 时间：2012-11-07T20:02:58.067
> 
> 标签：java, ant

我遇到了与此[正确使用 Apache Commons 配置](https://stackoverflow.com/questions/7651799/proper-usage-of-apache-commons-configuration)相同的问题，即 Commons Lang 不包含在依赖项中。

尽管 eclipse 和 IDEA 都选择了它，但 ANT 的 javac 却没有。

```
<javac debug="true" destdir="${build.classes.dir}" srcdir="${src.dir}" includeantruntime="false">
  <classpath refid="build.classpath"/>
</javac> 
```

我希望构建服务器能够发现这些依赖问题，如果有人错过了它们，构建就会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:19:04.917

添加如下任务

```
<fail  message="Missing the commons lang jar dependency.">
  <condition>
     <not>  
     <available file="common-lang.jar"/>
     </not>
  </condition>
</fail> 
```

Ant 失败任务链接：[https ://ant.apache.org/manual/Tasks/fail.html](https://ant.apache.org/manual/Tasks/fail.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:20:17.940

使用[ivy](http://ant.apache.org/ivy/)管理您的构建第 3 方依赖项。

```
<ivy:cachepath pathid="build.classpath">
    <dependency org="commons-lang" name="commons-lang" rev="2.6" conf="default"/>
</ivy:cachepath> 
```

默认情况下， [ivy](http://ant.apache.org/ivy/)将从 Maven 中央存储库下载（和缓存）并知道传递依赖项（依赖项的依赖项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:16:15.203

[Suresh Koya](https://stackoverflow.com/a/13277516/368630)很接近，但有几个问题：

*   Suresh 的方法仅在`commons-lang.jar`实际位于当前目录中时才有效。
*   如果 jar 被称为类似`commons-lang-2.6.jar`.

第一个可以通过添加`<filepath>`子实体来修复`<available>`。这为`<available>`条件提供了搜索 jar 的目录路径。`commons-lang`但是，如果用户下载时带有版本号（就像您从 Maven 存储库中下载的那样），它将不起作用。

为了解决这个问题，您需要使用类似的东西创建一个路径资源`<fileset>`，然后检查您是否选择了任何版本的 commons-lang jarfile。您可以在下面看到我正在寻找任何以开头`commons-lang`并具有`.jar`后缀的文件。

设置资源后，我可以使用`<resoucecount>`条件查看是否选择了以下版本`commons-lang`：

```
<path id="commons-lang.path">
     <fileset dir="${lib.dir}">
         <incude name="commons-lang*.jar"/>
     </fileset>
</path>

<fail message="Missing commons-lang Jar">
    <condition>
        <resourcecount refid="commons-lang.path" 
             when="equals" count="0"/>
    </condition> 
```

现在，如果我对 commons-lang jar 有所了解，我可以使用该`<available>`条件在我的类路径中搜索特定类：

```
<fail message="Can't find commons-lang Jar">
     <condition>
         <not>
            <available classname="org.apache.commons.lang.Entities">
                 <classpath refid="compile.classpath"/>
            </available>
         </not>
     </condition>
</fail> 
```

无论它叫什么，这都会找到commons-lang jar。

如果你对 Ivy 感兴趣，我在[GitHub 上](https://github.com/qazwart/ivy.dir)有一个项目，可以很容易地将 Ivy 添加到整个开发站点。第三方依赖管理是要走的路。使用 Ivy 非常棒，因为它与 Ant 集成。Maven 和 Gradle 各有优势，但您必须重做整个构建基础架构才能使用它们。

# javascript - 使用 jQuery 显示和隐藏元素相关的 div

> ID：13277298
> 
> 赞同：1
> 
> 时间：2012-11-07T20:03:02.723
> 
> 标签：javascript, hover

我正在尝试实现一个非常简单的javascript。当链接悬停时，我正在构建某种工具提示（隐藏`<div>`在链接中）。所以问题是我有几个链接有自己的工具提示，下面显示的代码工具提示正确显示和隐藏，但问题是我只想显示与该链接相关的工具提示，而不是全部。我认为解决这个问题的好方法是拥有一个仅显示该特定链接的工具提示的 javascript 函数，而不是每个链接的函数。

提前感谢您的帮助，我希望我以您可以理解的方式解释了我的问题。

```
 $(function() {
   $('.toolshoot').hover(function() {
       $('.toolbox').show();
   },       
   function () {
        $('.toolbox').hide();
     }
   );        
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:05:45.920

我想这会起作用：

```
 $(function() {
   $('.toolshoot').hover(function() {
       $('.toolbox', this).show();
   },       
   function () {
        $('.toolbox', this).hide();
     }
   );        
 }); 
```

我正在寻找`.toolbox`被悬停的元素内部。

下次请发布带有标记的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:06:03.043

我需要查看您的代码并确切知道工具提示与链接“相关”的方式，但您可以执行以下操作：

```
$(function() {
  $('.toolshoot').hover(function() {
    $(this).closest(':has(.toolbox)').find('.toolbox').show();
  },
  function () {
     $(this).closest(':has(.toolbox)').find('.toolbox').hide();
    }
  );
}); 
```

# javascript - 基于用户输入在javascript中计算变量

> ID：13277300
> 
> 赞同：0
> 
> 时间：2012-11-07T20:03:08.340
> 
> 标签：javascript, html, input, onchange

我有以下 javascript 代码：

```
$(':input').bind('keypress keydown keyup change',function(){
var BetAmount1 = parseFloat($(':input[name="BetAmount"]').val(),10);
var v = '';
if (!isNaN(BetAmount1)){
    v = BetAmount1 * 10;
}
$(':input[name="PotentialGain"]').val(v.toString());
}); 
```

我通过 PHP 回显了以下两个输入：

```
<input class="defaultText" type="text" name="BetAmount" id="BetAmount">
<input type="text" name="PotentialGain" id="PotentialGain" /> 
```

当用户输入或更改 a`BetAmount`时，我想立即显示一个计算`PotentialGain`的 ，例如，可以通过将一个常数乘以用户输入的指定赌注金额来找到它。

感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:12:05.747

这个？

```
$betAmount.on( 'keyup change', function () {
    var gain = 10 * +this.value;
    if ( isNaN( gain ) ) return;
    $potentialGain.val( gain );
}); 
```

**现场演示：http:** [//jsfiddle.net/Rj64t/](http://jsfiddle.net/Rj64t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:08:59.530

我建议你关注 Knockout.js 库[http://knockoutjs.com/examples/cartEditor.html](http://knockoutjs.com/examples/cartEditor.html)，使用这个库很容易做到这一点，甚至更多！

# javascript - radios.length 问题 - java 脚本

> ID：13277303
> 
> 赞同：0
> 
> 时间：2012-11-07T20:03:42.317
> 
> 标签：javascript, radio-button

也许这是非常基本的，但我对 radios.length 属性有一些问题。我有一些这样的输入：

```
<input type="radio" name="name1" value="test1" checked='checked'/><br />
<input type="radio" name="name2" value="test2" checked='checked'/><br /> 
```

当我提醒 radios.length 属性时，我总是有 0 作为答案。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:13:26.957

**radios.length**不是 DOM 中的有效属性。您需要找到那些（在这种情况下是输入的），然后在其上使用 length 属性。

```
var radios = document.getElementsByTagName("input") ;

alert(radios.length) // this will alert the correct value 
```

**更新**

要仅选择单选按钮，您可以执行此操作

```
var radios = document.getElementsByTagName("input") ;
var checkBoxes = [];

for(​var i =0, len = radios.length; i< len;i++){
    if(radios[i].type === 'radio'){
        checkBoxes.push(radios[i]);
    }
};

console.log(checkBoxes)​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/4jmUb/)**

此外，如果您使用 jQuery，请不要忘记将您的脚本封装在**DOM Ready**处理程序中

**jQuery**

```
$('#radio1').attr('type') // Need to use the .attr() method 
```

**[jQuery小提琴](http://jsfiddle.net/sushanth009/4jmUb/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:07:58.877

`radios`不是浏览器中的有效对象。您需要在 DOM 中搜索`inputs`.

使用 jQuery：

```
$("input[type=radio]").length 
```

会给你`2`

在原始 javascript 中，您可以执行以下操作：

```
document.getElementsByTagName("input") 
```

但这会给你所有`<input>`的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:15:49.730

您还可以使用 document.querySelectorAll()。它允许通过 css 选择器检索元素，并且被所有主流浏览器支持，包括 IE >= 8。

```
document.querySelectorAll('input[type=radio]').length 
```

[http://jsfiddle.net/fNhmr/](http://jsfiddle.net/fNhmr/)

[https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)

# c# - DDD：在插入数据库之前，对象 ID 必须为 0

> ID：13277306
> 
> 赞同：0
> 
> 时间：2012-11-07T20:03:47.257
> 
> 标签：c#, domain-driven-design

我正在尝试学习 DDD，并且正在制作一个简单的演示项目。

现在，我有一个通用存储库

```
public class Repository<T> where T : class, IAggregateRoot
{
    public void Add(T entity)
    {
        ObjectSet.AddObject(entity);
    }
} 
```

和一`Product`堂课

```
public class Product : IAggregateRoot
{
    private Guid _id = Guid.Empty;
    public Guid Id
    {
        get { return _id; }
        private set { _id = value; }
    }
    public string Name { get; private set; }

    protected Product() { }
    public Product(string name)
    {
        Name = name;
    }
} 
```

这个想法是我希望一个已创建的产品有一个空的 Guid。只有在插入数据库时​​它才应该获得一个新的 Guid。

```
Product product = new Product("Hello World");
product.Id == Guid.Empty; // True 
```

现在怎么样，当我调用存储库来插入一个产品时，它会用一个空的 Guid 将它插入到数据库中。

```
var repository = new Repository<Product>();
repository.Add(product); 
```

我应该将产品的 Guid 生成放在哪里？在存储库中？如果是，我应该怎么做，因为我有一个通用存储库。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:21:59.980

您可以更改 IAggregateRoot 定义以添加 ID 属性，如下所示

```
interface IAggregateRoot
{
    Guid Id { get; set;}
} 
```

由于您项目的每个类都有一个 id 并实现 IAggregateRoot 接口，您可以在类构造函数中初始化 id，如下所示：

```
public class Product : IAggregateRoot
{
    public Guid Id { get; set; }
    public string Name { get; private set; }

    protected Product() { }
    public Product(string name)
    {
        Id = Guid.Empty;
        Name = name;
    }
} 
```

并且在repository的Add方法里面，可以放Guid.NewGuid()，然后往前传

```
public class Repository<T> where T : class, IAggregateRoot
{
    public void Add(T entity)
    {
        entity.Id = Guid.NewGuid();
        ObjectSet.AddObject(entity);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:20:32.563

您是否有理由希望数据库创建 Guid 而不是创建它的对象？我认为最简单的解决方案是将属性设置为 Guid.NewGuid()。如果您确实希望表完成这项工作，尽管您可以在您的对象中使其为空，并将表中列的默认值设置为 newid()。

# time - 如何将 60-ticks-per-seconds 转换为浮点秒数？

> ID：13277308
> 
> 赞同：0
> 
> 时间：2012-11-07T20:04:01.880
> 
> 标签：time, timer

*我知道 Stackoverflow 上有很多*类似的*问题，但这个问题有一些独特的要求。*

我有一个滴答机制，每 1 秒产生 60 个滴答声（因此，120 个滴答声将是 2 秒），我没有设计（或无法控制），但我需要使用它。

我需要以某种方式将这些刻度转换为十进制秒。另一个问题是我正在使用的语言只支持整数（它是旧脚本平台的不推荐使用的语言）。朋友让我以浮点十进制格式将这些刻度转换为秒。

所以，我现在所拥有的（只有逻辑，语言很奇怪，并且在 SO 上没有标签）：

```
full_seconds     = ticks / 60;
second_fragment  = time % 60;

//If you're wondering wth this is it is because time % 60 sometimes returns 1-9, and they are not preceded by a zero, and I simply concatenate it below.

second fragment = (second_fragment < 10) ? "0"+second_fragment : second_fragment);

write(full_seconds+"."+second_fragment) 
```

现在，您可能会猜到问题所在：脚本*计数*到`0.59`，然后设置为`1.0`，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:43:29.017

[正如@AkiSuihkonen 在评论](https://stackoverflow.com/questions/13277308/how-to-convert-60-ticks-per-seconds-to-floating-point-seconds#comment18099585_13277308)中提到的那样，解决方案是：

```
second_fragment = time % 60 * 100 / 60; 
```

# jquery - IE 中的空对象

> ID：13277309
> 
> 赞同：1
> 
> 时间：2012-11-07T20:04:04.957
> 
> 标签：jquery

我遇到了一个问题，即另一个页面上的相同 javascript 工作正常，但由于某种原因，在这个特定页面上它使用完全相同的代码引发错误。

我有一个函数可以更新并传递要更新的属性对象。

```
function animateTo(a,t){
    var speed,easing,del,cb;
    speed = a.speed ? a.speed : 600;
    del = a.del ? a.del : 0;
    setTimeout(function() {
    t.stop(true).animate( { left:a.x, top:a.y, opacity:a.opacity }, { duration: speed, easing: easeOutExpo });
    }, del);

} 
```

在 IE 中它说 a.speed 是空的。传递的对象有时具有速度属性，有时没有。所以我的猜测是当它不存在时，它在 IE 中被识别为空。他们是解决这个问题的方法吗。无需每次都向对象添加速度属性。

我想通过说 speed = a.speed ？a.速度：600；如果 a.speed 不存在，它将设置为 600。

更新：

我认为这可能与 setTimout 有关。两个页面之间的唯一区别是函数同时被调用了 3 次。在它工作的页面上，animateTo 函数的调用被隔开。似乎当我一个接一个地调用它时，我得到的速度是空的，或者不是仅在 IE 中的对象。

此外，当我在 setTimout 中移动变量时，我没有收到该错误。但是我必须将 del 变量留在 setTimout 函数之外，当我这样做时，我得到一个错误 del is null or not and object in IE。

似乎在第一次调用时 setTimout 有效并且能够读取 a.speed 但第二次调用 a.speed 为空，因为第一次 setTimeout 仍在尝试查找不存在的局部变量。至少这是我的理论。任何人对此都有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:07:35.823

尝试使用逻辑 OR 代替：

```
speed = a.speed || 600; 
```

从[这里](https://stackoverflow.com/questions/476436/null-coalescing-operator-for-javascript)：

```
var whatIWant = null || new ShinyObject(); // is a new shiny object
var whatIWant = undefined || "well defined"; // is "well defined"
var whatIWant = 0 || 42; // is 42
var whatIWant = "" || "a million bucks"; // is "a million bucks"
var whatIWant = "false" || "no way"; // is "false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:09:10.953

你有正确的想法，但我认为你的三元运算符是问题所在。一组括号应该修复它。

您的 ternery 被评估为

```
(speed = a.speed) ? a.speed : 600; 
```

代替

```
speed = (a.speed ? a.speed : 600); 
```

# javascript - 文档高度更改/动画时保持文档滚动到底部

> ID：13277310
> 
> 赞同：0
> 
> 时间：2012-11-07T20:04:09.057
> 
> 标签：javascript, jquery, html, css

我正在处理的页面上的页脚（或其中的一部分）是可折叠的。我还为这个元素的折叠和展开设置动画。页脚不是固定的（我也不希望它是固定的），但我希望在页脚扩展时视图保持在页面底部。我试过用几种方法来处理这个问题，但在所有情况下，行为都是一样的。折叠页脚时，动画期间文档高度变小，页脚保持锚定在屏幕底部。展开页脚时，视口的位置不会改变，文档高度会增加，并且页脚的动画发生在折叠下方。

我已经使用 javascript 和 CSS3 处理了这个动画。行为是相同的。我也尝试过绝对定位页脚并同时调整页脚上方内容的高度......同样的行为。

最后，我尝试了一些 javascript hack 来为 window.scrollTo 设置动画，而其他动画正在发生。这不起作用令人困惑。这是该 hack 的一个基本示例。

```
collapse: function(container,collapsed) {
    var maxHeight = 250,
        steps = 50,
        params = this.animParams(maxHeight,steps,collapsed);

    for (i = 0; i < params.length; i++) {
        this.animateCollapse(container,params,i);
    }
},

animateCollapse: function(container,params,i) {
    setTimeout(function() {
        container.css('height',params[i]);
        window.scrollTo(0,100000);
    },10);
},

animParams: function(maxHeight, steps, collapsed) {
    var arr = [];

    for (i = 0; i <= steps; i++) {
        var multiplier = (steps - i) / steps;

        arr.push(maxHeight * multiplier);
    }

    if (!collapsed) {
        arr = arr.reverse();
    }

    return arr;
}, 
```

在上面的示例中，我使用的值 (100000) 比文档高，因为在该循环期间，即使动画同时发生，$(document).height() 返回的值也不会改变。

所以，最后，我的目标非常简单——当页脚高度设置动画并增加文档高度时，将视口保持在屏幕底部。有任何想法吗？

谢谢

# xcode - 为什么iOS6模拟器删除应用程序很慢？

> ID：13277313
> 
> 赞同：8
> 
> 时间：2012-11-07T20:04:21.627
> 
> 标签：xcode, ios6, ios-simulator

我从 Xcode 停止了正在运行的进程，关闭了后台应用程序。

当我开始关闭它时，模拟器会挂起大约 20 秒，然后提示“删除 __app？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T14:46:34.030

我更喜欢按照以下步骤以更快的方式删除应用程序

1.  iOS 模拟器
2.  重置内容和设置...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:41:59.510

尝试修复磁盘权限。在 XCode 崩溃并修复后，我遇到了与模拟器错误类似的问题。

**编辑：** 这实际上只是发生在我身上。我也无法连接到模拟器。我最终这样做了：

*   关闭 XCode
*   删除模拟器文件夹`~/Library/Application Support/iPhone Simulator/X.X/`
*   删除`~/Library/Developer/Xcode/DerivedData/`文件夹
*   修复磁盘权限（没有这一步不起作用）

# c - C - read() 永远不会在服务器端阻塞

> ID：13277314
> 
> 赞同：1
> 
> 时间：2012-11-07T20:04:32.583
> 
> 标签：c, sockets, client

我正在为一个项目创建一个游戏，带有一个高分服务器，游戏可以在其中发送命令以保存新的高分，获得前 10 名等。我遇到的问题是，在游戏向服务器发送了几个命令之后，它们执行得非常好，即使游戏没有发送任何东西，调用也会`read()`一直接收！！`null`

我四处寻找解决方案，并检查了以下内容，它们都可以：

1- 创建任何套接字时，我检查`if (sockfd==-1)`并打印错误并退出
2- 我在每个套接字上显式启用阻塞模式
3- 我测试了所有套接字

```
if(n < 0){  
   perror("Read Error:");
} 
```

它永远不会进入这里，但我改为

```
if(n == 0){  
   perror("Read Error:");
} 
```

我得到了错误的地址！关于如何让读取功能等待游戏实际执行发送的任何帮助？

这是失败的发送和读取代码：

服务器：

```
listen(sock, 5);
clientlength = sizeof(client_add); 
newsock = accept(sock, (struct sockaddr *) &client_add, &clientlength);
if(newsock < 0){
  printf("Couldn't accept\n");
}
while(1){
  bzero(buffer, 300);
  ioctl(newsock, FIONBIO, 0);  
  n= read(newsock, buffer, 299);
  if(n == 0){  
    perror("Read Error:");
  } 
  if(n<0){
    printf("Error while reading from socket\n");
  }
  printf("Received: %s\n",buffer);
  //send to function that processes the string 
  dothemagic(buffer);
} 
```

发送消息的示例：

```
strcpy(buffer, "gettop5");   
n = write(sock,buffer,strlen(buffer));
if (n < 0){ 
  printf("Writing to socket was unsuccessful\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:36:14.973

最大的问题是您的 printf/perror 只打印一条消息，然后继续执行（使用归零的缓冲区......）；你应该打印一个错误，然后从循环中中断/退出程序/任何合适的。就像 wildplasser 指出的那样， n==0 不是错误。

如果您仍然无法弄清楚，请尝试使用[简短、独立、正确的示例](http://sscce.org)——令人印象深刻的是，您只需将一个 sscce 放在一起就会意识到问题的频率！

# c - 如何修剪 GStreamer 注册表？

> ID：13277315
> 
> 赞同：0
> 
> 时间：2012-11-07T20:04:38.290
> 
> 标签：c, alsa, gstreamer

我的 registry.arm.bin 有 600 KB 大，每次我的应用程序启动时，读取和解析它需要大约 0.25 秒。问题是我不需要位于那里的所有插件。我只想要几乎所有的 AUDIO 插件，而没有 VIDEO 插件。

我怎样才能减少我的注册表，所以我减少它的大小和加载时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:39:23.603

只需从系统中删除不需要的插件。它们位于 /usr/lib/gstreamer-0.10（或 -1.0）中。

# c# - 禁用 Windows 7 界面阴影

> ID：13277319
> 
> 赞同：0
> 
> 时间：2012-11-07T20:04:46.640
> 
> 标签：c#, user-interface, windows-7

有什么方法可以通过 C# 在我的应用程序中禁用窗口下的阴影？我在互联网上搜索但没有任何帮助...

# jquery - 使用 Ajax 解析 ExpressionEngine 错误模板

> ID：13277320
> 
> 赞同：2
> 
> 时间：2012-11-07T20:04:54.777
> 
> 标签：jquery, ajax, expressionengine

我正在尝试使用[jQuery Form plugin](http://www.malsup.com/jquery/form/)将 Ajax 添加到我的 ExpressionEngine 注册表单中。大多数表单错误都使用[Profile:Edit](http://devot-ee.com/add-ons/profileedit)处理并以 JSON 格式返回，我在解析这些错误时没有遇到重大问题。Profile:Edit 未处理的唯一错误是有人尝试使用仍处于“待处理”状态的电子邮件地址重新注册。为此，我得到了HTML 格式的[标准 EE 错误模板](https://gist.github.com/4033821)。

我想做的是设置一个 jQuery`$.each()`循环并输出错误列表项。但是当我尝试解析 HTML 时，我在控制台中得到了奇怪的数据。即使是一个非常简单的 jQuery 函数也不能像我期望的那样工作。例如，使用这段代码，我希望取回`#content`div 的内容：

```
$('.myForm').ajaxForm({
    success: function(data){
        var theContent = data.find('#content');
        console.log(theContent);
    }
}); 
```

但我在控制台中得到了这个：

```
Uncaught TypeError: Object
<!-- Full HTML of Error Template -->
has no method 'find' 
```

如果我使用`.filter()`而不是`.find()`.

如果我用选择器语法包装`data`，像这样：

```
$('.myForm').ajaxForm({
    success: function(data){
        var theContent = $(data).find('#content');
        console.log(theContent);
    }
}); 
```

我在控制台中得到了这个：

```
[prevObject: e.fn.e.init[9], context: undefined, selector: "#content"]
    context: undefined
    length: 0
    prevObject: e.fn.e.init[9]
        0: #text
        1: <title>
        2: #text
        3: <meta>
        4: #text
        5: <style>
        6: #text
        7: <div>
        8: #text
        length: 9
    __proto__: Object[0]
    selector: "#content"
    __proto__: Object[0] 
```

这不是我所期望的，我也不知道如何处理它。

设置`dataType`为 'html' 似乎没有什么区别。

有什么想法吗？这件事让我老了很多年，真是令人沮丧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:36:10.070

```
data.find('#content'); 
```

不起作用，因为 data 不是 jQuery 对象。返回的响应是什么样的？如果您在成功后执行 console.log(data)，您会得到什么？

# javascript - 带有命名空间的 jQuery 小部件工厂 - 在 jQuery.fn 中无效

> ID：13277322
> 
> 赞同：0
> 
> 时间：2012-11-07T20:05:02.857
> 
> 标签：javascript, jquery, jquery-ui

在小部件工厂jQuery.ui.widget中，如果最终widget.bridge污染`jQuery.fn`了小部件而不考虑命名空间，那么命名空间是什么？

小部件示例：`$.widget( 'mynamespace.mywidget', { ... } );`

将创建一个新的原型`$.mynamespace.mywidget`- 到目前为止一切顺利。

但是，我真的希望也使用命名空间，`$('...').mynamespace.mywidget()`而不是仅仅`$('...').mywidget()`以防万一我用命名空间定义小部件。为什么默认情况下不是这样，也许不建议使用这样的东西？

小部件工厂自动完成桥接的事情感觉不对。我想以后可以移动桥，但是到那时之前 $.fn.mywidget 中的任何内容都将被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:08:07.243

如果您有两个同名的小部件，您可以手动创建不同名称的桥，如下所示：

```
$.widget('my.widget', {  });
$.widget('your.widget', {  });

$.widget.bridge('widget2', $.my.widget); 
```

然后它会给你 $.fn.widget 和 $.fn.widget2 所以两者都可以使用。如果两个小部件具有相同的名称，命名空间只是确保您不会覆盖构造函数。

# c# - NHibernate，表之间连接并返回特定类型

> ID：13277324
> 
> 赞同：0
> 
> 时间：2012-11-07T20:05:12.250
> 
> 标签：c#, entity-framework, nhibernate, orm

我有 2 个表，我想在结果类中放置一些字段，但我被卡住了。我想要的代码在 Entity Framework 中看起来像这样：

```
var res =   
(from p in context.EstimationItem
    join q in ...
    select new EstimationWithDetail
    {
        Estimation = q.Estimation,
        Id = q.Id,
        FullName = q.Customer.FirstName + q.Customer.LastName

    }).ToList(); 
```

在Nibernate中，此时，我有这个，但我被卡住了......

```
var res =
    Session.QueryOver<EstimationItem>()
    .JoinQueryOver(x => x.Estimation)
    .Select(
        x => x.Estimation.Reference,
        x => x.Estimation.CreationDate,
        x => x.Price,
        x => x.Estimation.Customer.FirstName,
        x => x.Estimation.Customer.LastName
        )
    .List();

public class Estimation
{
    public virtual string Reference { get; set; }
    public virtual Customer Customer { get; set; }
    public virtual DateTime CreationDate { get; set; }
    public virtual decimal Total { get; set; }
    public virtual IList<EstimationItem> EstimationItems { get; set; }
}

public class EstimationItem
{
    public virtual decimal Price { get; set; }
    public virtual int Quantity { get; set; }
    public virtual Estimation Estimation { get; set; }
    public virtual Product Product { get; set; }
}

public class EstimationWithDetail
{
    public string Reference { get; set; }       //Estimation.Reference
    public string FullName { get; set; }        //concat FirstName and LastName from Customer
    public decimal Price { get; set; }          //Estimation.Total
    public int Id { get; set; }                 //Estimation.Id
    public DateTime CreationDate { get; set; }  //Estimation.CreationDate
} 
```

**更新 1**

我尝试了代码，但出现此错误： *InvalidOperarionException，从范围“”引用的“EstimationItem”类型的变量“x”，但未定义*

```
var res =
    Session.QueryOver<EstimationItem>()
    .JoinQueryOver(x => x.Estimation)
    .Select(x => new EstimationWithDetail
    {
        Code = x.Estimation.Reference,
        CreationDate = x.Estimation.CreationDate,
        Price = x.Estimation.Total,
        FullName = x.Estimation.Customer.FirstName + x.Estimation.Customer.LastName
    })
    .List<EstimationWithDetail>(); 
```

**更新2：** 我也试过了

```
Estimation a = null;
Customer b = null;
var res = Session.QueryOver<EstimationItem>()
    .JoinAlias(c => c.Estimation, () => a)
    .JoinAlias(c => c.Estimation.Customer, () => b)
    .Select(x => new EstimationWithDetail
    {
        Code = a.Reference,
        Id = a.Id,
        FullName = b.LastName
    })
    .List<EstimationWithDetail>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:11:12.067

我对 NHibernate 的 Linq 提供程序不是很熟悉，因为我没有使用过它，但你不能这样做：

```
var res = Session.QueryOver<EstimationItem>()
    .JoinQueryOver(x => x.Estimation)
    .Select(x => new EstimationWithDetail
    {
        Estimation = x.Estimation,
        Id = x.Id,
        FullName = x.Estimation.Customer.FirstName + x.Estimation.Customer.LastName

    })
    .List(); 
```

# wpf - 如何将实体从 Entity Framework 绑定到 DataGrid？

> ID：13277327
> 
> 赞同：3
> 
> 时间：2012-11-07T20:05:22.490
> 
> 标签：wpf, entity-framework, data-binding, ado.net

我的 XAML：

```
<Window x:Class="Newsletter.UI.MessagesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MessagesWindow" Name="messagesWindow" Height="576" Width="1024" WindowStartupLocation="CenterScreen" Closed="MessagesWindowClosed">
    <Window.Resources>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Width" Value="149"/>
            <Setter Property="Margin" Value="10"/>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="75"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0"  Orientation="Horizontal" HorizontalAlignment="Center">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Button Name="saveButton" Grid.Row="0" Content="Save"  Margin="10,10,10,5"/>
                <TextBox Name="searchTextBox" Grid.Row="1"  Margin="10,5,10,10"/>
            </Grid>
            <Button Name="recipientsButton" Content="RECIPIENTS" Click="RecipientsButtonClick" />
            <Button Name="createButton" Content="CREATE" Click="CreateButtonClick" />
            <Button Name="removeButton" Content="REMOVE" />
            <Button Name="editButton" Content="EDIT" />
            <Button Name="resendButton" Content="RESEND"/>
        </StackPanel>
        <DataGrid Name="gridMessages" Grid.Row="1"/>
    </Grid>
</Window> 
```

我的 .cs 代码：

```
private void messagesWindow_Loaded(object sender, RoutedEventArgs e)
        {
            using (NewsletterEntities context = new NewsletterEntities())
            {
                var query = from m in context.Messages select m;
                var result = query.ToList();
                gridMessages.DataContext = result;
            }
        } 
```

`Message`由 EF 生成的类：

```
[EdmEntityTypeAttribute(NamespaceName="NewsletterModel", Name="Message")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Message : EntityObject
{
    #region Factory Method

/// <summary>
/// Create a new Message object.
/// </summary>
/// <param name="messageID">Initial value of the MessageID property.</param>
/// <param name="subject">Initial value of the Subject property.</param>
/// <param name="content">Initial value of the Content property.</param>
/// <param name="hasAttachments">Initial value of the HasAttachments property.</param>
/// <param name="senderID">Initial value of the SenderID property.</param>
/// <param name="date">Initial value of the Date property.</param>
public static Message CreateMessage(global::System.Int32 messageID, global::System.String subject, global::System.String content, global::System.Boolean hasAttachments, global::System.Int32 senderID, global::System.DateTime date)
{
    Message message = new Message();
    message.MessageID = messageID;
    message.Subject = subject;
    message.Content = content;
    message.HasAttachments = hasAttachments;
    message.SenderID = senderID;
    message.Date = date;
    return message;
}

#endregion

#region Primitive Properties

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 MessageID
{
    get
    {
        return _MessageID;
    }
    set
    {
        if (_MessageID != value)
        {
            OnMessageIDChanging(value);
            ReportPropertyChanging("MessageID");
            _MessageID = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("MessageID");
            OnMessageIDChanged();
        }
    }
}
private global::System.Int32 _MessageID;
partial void OnMessageIDChanging(global::System.Int32 value);
partial void OnMessageIDChanged() 
```

不幸的是，什么也没发生，DataGrid 是空的。我是 WPF 和 EF 中数据绑定的新手。我希望这个问题很简单，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:16:18.843

而不是 DataContext，设置`ItemsSource`为结果集。

```
gridMessages.ItemsSource = result; 
```

* * *

**注意**由于您是 WPF 的新手，您可能需要注意 MVVM 比这里的方法更好，用于将 UI 与业务逻辑分离。要使用 MVVM 方法，您需要将 Window 设置`DataContext`为某个 View Model 类：

```
private void messagesWindow_Loaded(object sender, RoutedEventArgs e) 
{ 
    Model = new ViewModel();
    this.DataContext = Model;
    // TODO set Model.Messages to the EF result set
} 
```

ViewModel 看起来像这样：

```
public class ViewModel : INotifyPropertyChanged
{
    private List<Message> _messages;

    public List<Message> Messages
    {
        get { return _messages; }
        set
        {
            _messages = value;
            RaisePropertyChanged("Messages");
        }
    }

    // TODO implement INotifyPropertyChanged
} 
```

然后将 DataGrid 的 ItemsSource 绑定到您的属性。

```
<DataGrid ItemsSource="{Binding Messages}" Grid.Row="1"/> 
```

# ruby-on-rails - 如何在 Rails 中的实例上运行 validates_presence_of？

> ID：13277331
> 
> 赞同：0
> 
> 时间：2012-11-07T20:05:40.673
> 
> 标签：ruby-on-rails

我想从库类中执行以下操作？

```
class LibClass
  def create_user(provider)
    user = User.new
    if provider == "facebook"
      user.validates_presence_of :email
    else
      # dont validate presence of email
    end
  end
end 
```

我知道我可以在 User 类中执行 self.validates_presence_of :email ，但我在库类中，不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:26:44.593

在您的`User`模型中，您可以创建一个访问器来打开或关闭验证。

```
class User < ActiveRecord::Base
  attr_accessor :validate_email

  def validate_email?; validate_email == true; end

  validates_presenece_of :email, :if => validate_email?
end 
```

您可以通过设置打开验证`user.validate_email = true`：

```
def create_user(provider)
  user = User.new
  if provider == "facebook"
    user.validate_email = true
  else
    user.validate_email = false
  end
end 
```

要实际运行验证，您可以调用`user.valid?`，哈希`user.errors`将填充任何验证错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:23:52.350

validates_presence_of 是类方法，而不是实例方法。为了做你想做的事，你必须这样做：

```
user.class_eval {validates_presence_of :email } 
```

但是验证将在课程上设置，并且将为您的所有用户启用。

# c# - Quartz.Net - 使用 log4net 进行通用日志记录

> ID：13277333
> 
> 赞同：7
> 
> 时间：2012-11-07T20:05:43.470
> 
> 标签：c#, log4net, quartz.net-2.0, common.logging, log4net-configuration

我正在尝试实现 Quartz.Net。只要没有配置日志记录，一切正常（调试输出显示*“未找到配置部分 - 抑制日志记录输出”*）。

启用日志记录后，我将收到以下错误：**Failed getting configuration for Common.Logging from configuration section 'common/logging'**。

内部异常：**为 common/logging 创建配置节处理程序时出错：无法创建类型“Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter，Common.Logging.Log4net”**

我使用了几种资源[来](http://netcommon.sourceforge.net/docs/1.2.0/reference/html/logging.html#logging-adapters-log4net)验证我的配置，但据我所知，它应该是正确的。

我的 app.config：

```
 <configSections>
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net">
        <arg key="configType" value="INLINE" />
      </factoryAdapter>
    </logging>
  </common>  
  <log4net>
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-6p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="ConsoleAppender" />
    </root>
  </log4net>
  <quartz>
    <add key="quartz.scheduler.instanceName" value="Driver.Service.Scheduler" />
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="10" />
    <add key="quartz.threadPool.threadPriority" value="2" />
    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz" />
  </quartz> 
```

我引用了以下程序集：
quartz.dll，版本 2.01.100
common.logging.dll，版本 2.0.0.0
common.logging.log4net.dll，版本 2.0.0.0
log4net.dll，版本 1.2.10.0

我找不到给出错误的原因。欢迎所有帮助，显然我忘记了一些事情......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-22T18:14:52.257

当我们升级到新版本的 Common.Logging.Log4Net 时，我们遇到了类似的情况，其中 DLL 名称从*Common.Logging.Log4Net更改为**Common.Logging.Log4Net1211*。

 *因此，我们修改了配置文件以更改 DLL 名称：

```
<factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net1211"> 
```

无论如何，该错误肯定表明缺少 DLL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T20:08:08.170

你能检查一下 Common.Logging.Log4net.dll 是否被复制到你的 bin 输出文件夹中。

另外你确定你的内部异常没有内部异常（或者可能有几个级别的内部异常）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:45:29.263

我不确定，但在您的 common/logging 配置部分，一次是写 log4net，一次是 log4Net（大写字母）：

```
 <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net"> 
```*

# razor - 获取 Razor 模板的动态模型属性列表

> ID：13277336
> 
> 赞同：2
> 
> 时间：2012-11-07T20:06:04.480
> 
> 标签：razor, template-engine

我正在研究[RazorEngine](http://nuget.org/packages/RazorEngine)的电子邮件模板系统。

系统会有很多不同的电子邮件模板，所以我不想为每个模板创建一个类型化的模型。

是否有可能使用动态模型并检索动态模型应具有的所有属性的列表？

例如：

**查看/模板**

```
@model dynamic

Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum @Model.Customer Lorem ipsum Lorem ipsum
Lorem ipsum Lorem ipsum Lorem ipsum @Model.Product Lorem ipsum Lorem ipsum Lorem ipsum 
```

从该视图/模板中，我希望能够检索以下列表（在调用 Razor.Parse 之前）：
*客户*
*产品*

使用该列表，我将能够创建可用于调用 Razor.Parse 的动态模型（包含 Customer en Product 属性）。

这可能吗？如果可以，我该怎么做？有替代品吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:11:50.817

如果您对模型有足够的了解，知道它有一个 Customer 和一个 Product，那么您可能应该使用一个所有电子邮件项目都继承的基类：

```
public class EmailItem
{
    public string Customer {get;set;}
    public string Product {get;set;}
} 
```

然后将其用作您的模型。

那么你传入的item可以是这样的：

```
public class Sale: EmailItem
{
    // inherits EmailItem properties...
} 
```

# r - 添加第二个 3dplot

> ID：13277339
> 
> 赞同：4
> 
> 时间：2012-11-07T20:06:28.067
> 
> 标签：r, rgl

我有一个 3d 散点图，如下所示：

```
library(rgl)
N <- 10000

X <- rnorm(N,0,1)
Y <- rnorm(N,0,1)

Z <- X * Y

want <- Z >0 & X>0

palette <- colorRampPalette(c("blue", "green", "yellow", "red")) 
col.table <- palette(256)
col.index <- cut(Z, 256)
plot3d(X,Y,Z, col=col.table[col.index])
grid3d(c("x", "y", "z")) 
```

这工作正常。现在我想覆盖另一个情节，所以我尝试了这个：

```
par(new=F)
plot3d(X[want],Y[want],Z[want], col="black") 
```

然而这失败了——它只是覆盖了旧的情节。有没有办法覆盖新情节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:08:57.593

虽然我还没有测试过，但我认为你应该从尝试开始，`points3d`而不是`plot3d`......而且仅供参考`par(new=FALSE)`，对情节没有任何影响`rgl`，只有基础情节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-02T11:24:05.403

一个非常简单的解决方案是使用`add = TRUE`参数：

```
plot3d(X[want], Y[want], Z[want], col = 'black', add = TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-12T09:06:02.230

它使用不同的包，但使用 scatterplot3d 包，您可以使用 points3d 属性添加点：

```
library(scatterplot3d)

# main scatterplot
s3d<-scatterplot3d(x1,y1,z1,color="black",
         type="l",box=FALSE,highlight.3d=F,
         xlab="x",ylab="y",zlab="z")

# add some points 
s3d$points3d(x2,y2,z2,col="red",pch=20)  

# add a line
s3d$points3d(x3,y3,z3,col="blue",type='l') 
```

# html - 鼠标悬停时如何在焦点时给iframe鼠标？

> ID：13277340
> 
> 赞同：1
> 
> 时间：2012-11-07T20:06:34.820
> 
> 标签：html, iframe, focus, mousewheel

我有一个 iframe，我想使用鼠标滚轮放大和缩小 iframe 内容，但目前我的主页在 iframe 内容滚动的同时滚动。

我想让我的主页在鼠标不在地图上时获得鼠标滚轮焦点，但在鼠标悬停时让地图（iframe）获得焦点：

[http://digitouchmedia.com/digiMaps.html](http://digitouchmedia.com/digiMaps.html)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:41:36.007

First, you need access to the iframe's window object. This is only allowable if your iframe obeys the [same origin policy](http://en.wikipedia.org/wiki/Same_origin_policy).

Provided that you are on the same origin, [you can access the IFrame window](https://developer.mozilla.org/en-US/docs/DOM/window.frames):

```
window.frames['nameOfYourIFrame'].focus(); 
```

To do this when you mouse over the iframe, I would consider nesting the iframe in a DIV element that has a body big enough to provide a "border" that can be used for detecting mouse enter and mouse exit. Attach the focus code above to this event handler.

NOTE: if the browser window is not active and in focus, I don't believe mouse events will occur. I could be mistaken.

# javascript - for循环中的jQuery onclick（）函数

> ID：13277345
> 
> 赞同：1
> 
> 时间：2012-11-07T20:06:53.720
> 
> 标签：javascript, jquery, json

这可能是一个简单的 jQuery/js 问题，但我是这方面的新手，可以使用一些帮助。

```
function launchResultViewer(){
    var elen =$MP.data.REG_AS_RS.ASSIGNEE.length;

    for (i = 0 ; i < elen ; i++)
        {var dEventid = $MP.data.REG_AS_RS.ASSIGNEE[i].EVENT_ID;

        var objPVViewerMPage = window.external.DiscernObjectFactory("PVVIEWERMPAGE"); objPVViewerMPage.CreateProcViewer(patientId);
        objPVViewerMPage.AppendProcEvent(dEventid);
        objPVViewerMPage.LaunchProcViewer(); } }

function OnClickForm(){

    var xlen =$MP.data.REG_AS_RS.ASSIGNEE.length;

    for (i = 0 ; i < xlen ; i++){
        var dOrderid = $MP.data.REG_AS_RS.ASSIGNEE[i].ORDER_ID;
        <a href='#'title ="+dOrderid+" onclick='javascript:launchResultViewer(\"" + dOrderid + "\");'>Order</a>"

        $('#clickme').click(function(){ ,} } 
```

假设每次单击链接时“i”中有两个元素会打开两个屏幕。每个链接应该只打开一次，我在点击功能中缺少什么？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:14:19.850

您的第一个问题是内联编写 js。获取 onclick 锚点的 rif，这就是 #click me 事件侦听器的用途。在 click me 函数中，将您希望它执行的任何操作放在那里，并摆脱所有其他锚点，您的代码并不完全是因为底部有一个空函数，但我几乎可以打赌您调用的是相同的作用两次。

改变

命令

订购

（你将不得不对它进行 css 以使其具有锚行为）

```
<script>
$('#clickme').click(function(){
     launchResultViewer(\"" + dOrderid + "\");
});
</script> 
```

# shell - Unix连接两个文件的多个字段

> ID：13277350
> 
> 赞同：3
> 
> 时间：2012-11-07T20:07:13.267
> 
> 标签：shell, unix, join, scripting, awk

我有两个文件

猫 test1.txt

```
1|2|3|4

2|3|4|4

3|4|5|5 
```

猫 test2.txt

```
1|2|4|5

2|3|5|6

3|5|7|7 
```

我的输出应该是

```
1|2|3|4|4|5

2|3|4|4|5|6 
```

这就像在字段 1 和 2 上连接两个文件，并从文件 1 中获取 1,2,3,4 的值，从文件 2 中获取 3,4 的值。

请在这件事上给予我帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:36:16.880

```
awk -F\| 'NR == FNR {
  f2[$1, $2] = $3 OFS $4
  next
  }
($1, $2) in f2 {
  print $0, f2[$1, $2]
  }' OFS=\| test2.txt test1.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:25:53.150

尝试这样做`perl`

```
paste -d '|' file1.txt file2.txt |
    perl -F'\|' -lane '
        print join "|", @F[0..3,6,7] if $F[0] eq $F[4] and $F[1] eq $F[5]
    ' 
```

并在`sh`：

```
#!/bin/sh

paste -d '|' test1.txt test2.txt | while IFS='|' read a1 a2 a3 a4 a5 a6 a7 a8; do
    if [ $a1 -eq $a5 -a $a2 -eq $a6 ]; then
        echo "$a1|$a2|$a3|$a4|$a7|$a8"
    fi
done 
```

**输出**

```
1|2|3|4|4|5
2|3|4|4|5|6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T20:26:20.667

嗯，这适用于您的示例：

```
 sed 's/|/+/' t1.txt>$$.tmp;sed 's/|/+/' t2.txt|join -t \| -j 1 $$.tmp -|sed 's/+/|/';rm $$.tmp 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T20:28:49.353

这似乎也有效：

```
$ sed 's/|/\t/2' 1.txt > 1_1.txt; sed 's/|/\t/2' 2.txt > 2_1.txt;
$ join -j1 1_1.txt 2_1.txt | tr ' ' '|'
$ rm 1_1.txt 2_1.txt 
```

没有临时文件创建的单线（感谢@dbaupp）：

```
$ join -j1 <(sed 's/|/\t/2' 1.txt) <(sed 's/|/\t/2' 2.txt) | tr ' ' '|' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T07:46:33.693

另一种解决方案：

```
awk -F "|" '{getline a < "file1"}NR==1{print a, $3, $4 "\n"}NR==3{print a, $3, $4}' OFS="|" file2 
```

结果：

```
$ awk -F "|" '{getline a < "file1"}NR==1{print a, $3, $4 "\n"}NR==3{print a, $3, $4}' OFS="|" file2
1|2|3|4|4|5

2|3|4|4|5|6 
```

# html - html5：如何触发或停止 css3 循环动画？

> ID：13277355
> 
> 赞同：0
> 
> 时间：2012-11-07T20:07:48.863
> 
> 标签：html, css, animation, triggers

我有一个用 css3 动画制作的幻灯片，如下所示：

```
@-keyframes animBanner
{
0% {top: 0px;}
18% {top: 0px;}
20% {top: -60px;}
38% {top: -60px;}
40% {top: -120px;}
58% {top: -120px;}
60% {top: -180px;}
78% {top: -180px;}
80% {top: -240px;}
98% {top: -240px;}
100% {top: 0px;}
} 
```

我想给它添加控件，所以你可以去你想要的图片。

我可以使用这样的简单 javascript 触发转换事件：

```
var p=document.getElementById('elemId');
p.style.left= '50%'; 
```

但它不适用于动画。是否有可能完成这项工作，或者我应该使用 jquery 来制作动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:53:21.573

施密蒂是对的。

我使用以下代码更改了类：

```
//Stop animation
var ad = document.getElementById('animBannerId');
ad.className="paused";
//Move the slide to the desired pic
anuncio.style.top = '160px';
//Etc. 
```

我的CSS有这个转换代码：

```
.paused
{
position: relative;
transition:top 1s;
-o-transition:top 1s;
-webkit-transition:top 1s;
-moz-transition:top 1s;
} 
```

你们，伙计们，太棒了。非常感谢你。

顺便说一句，我还没有添加重新启动动画的代码，但是可以通过制作计时器来完成

# selenium-webdriver - 在 watir 中自动下载文件

> ID：13277364
> 
> 赞同：2
> 
> 时间：2012-11-07T20:08:37.300
> 
> 标签：selenium-webdriver, download, webdriver, watir, watir-webdriver

如何一键从浏览器自动下载excel文件，无需通过“另存为”和其他窗口。我试图让它独立于操作系统，所以不会对使用 win32ole gem 感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-24T14:05:30.160

对于这项任务，我调整了我的个人资料偏好

我的代码如下所示：

> **铬驱动程序：**

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.default_directory'] = download_directory
profile['download.prompt_for_download'] = false
browser = Watir::Browser.new :chrome, :profile => profile 
```

> **铬驱动程序2：**

```
prefs = {
    'download' => {
        'default_directory' => download_directory,
        'prompt_for_download' => false,
        'directory_upgrade' => true, 
        'extensions_to_open' => '',
    },
    'profile' => {
        'default_content_settings' => {'multiple-automatic-downloads' => 1}, #for chrome version olde ~42
        'default_content_setting_values' => {'automatic_downloads' => 1}, #for chrome newer 46
        'password_manager_enabled' => false,
        'gaia_info_picture_url' => true,
    }
}

caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chromeOptions'] = {'prefs' => prefs}
browser = Watir::Browser.new :chrome, :desired_capabilities => caps 
```

> **火狐：**

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile['browser.download.lastDir'] = download_directory
profile['browser.download.folderList'] = 2
profile['browser.download.dir'] = download_directory
profile['browser.download.manager.showWhenStarting'] = false
profile['browser.helperApps.alwaysAsk.force'] = false
profile['browser.helperApps.neverAsk.openFile'] = "text/csv,application/pdf"
profile['browser.helperApps.neverAsk.saveToDisk'] = "text/csv,application/pdf"
profile['pdfjs.disabled'] = true
browser = Watir::Browser.new :firefox, :profile => profile 
```

**（我只为 pdf 文件工作的 Firefox 示例）**

> **但是硒浏览器下载有很多错误**

chrome 或 firefox webdriver 中的一些问题（如[http://code.google.com/p/chromedriver/issues/detail?id=130](http://code.google.com/p/chromedriver/issues/detail?id=130)）不允许为文件下载编写好的测试

我为下载文件编写了以下 ruby​​ 脚本

```
require ‘rubygems’
require “net/http”
require “uri”

def download(_url, _download_path = ”)
    url = URI.parse _url
    http_object = Net::HTTP.new(url.host, url.port)
    http_object.use_ssl = true if (url.scheme == ‘https’ || url.port == 443)

    http_object.start.request_get(url.path) do |response|
        start_time = Time.now
        response["Content-Disposition"] =~ /^.+?filename=”(.+?)”$/
        file_name = $1
        file = open(_download_path + file_name, ‘wb’)
        length = response['Content-Length'].to_i
        response.read_body do |fragment|
            file.write(fragment)
        end
        file.close
        file_size = File.size(_download_path + file_name)/1024.0/1024.0
        puts “-“*80
        puts “Download time – #{Time.now – start_time}”
        puts “Download speed – #{file_size/(Time.now – start_time)} MB/s”
        puts “-“*80
    end
end

download(‘http://storagemadeeasy.com/files/1cf064a30aba6d1b8fbc0fba8ac8be5b.jpg’) 
```

我希望这段代码对那些需要下载测试文件的人有用（不是浏览器文件下载对话框窗口）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:47:56.657

它似乎对每个浏览器都是独一无二的。[阿利斯特斯科特写了这个](http://watirwebdriver.com/browser-downloads/)<<试试那个。

# php - 如何按每个对象的属性对对象数组进行排序

> ID：13277365
> 
> 赞同：3
> 
> 时间：2012-11-07T20:08:38.350
> 
> 标签：php, arrays, sorting

我有一个从 eventbrite.com api 返回的数据数组，存储在一个名为 $restrictedEvents 的变量中，它看起来像下面的数据。这仅代表一个事件，以便在此处粘贴，但它在整个数组中有大约 80 个这样的 stdClass 对象。

我想通过每个 stdClass 对象中的 [title] 键按字母顺序对该数组进行排序。我试过使用：

```
usort($restrictedEvents, "title"); 
```

但是，这会返回以下错误：

```
Warning: usort() [function.usort]: Invalid comparison function in model.php on line 109 
```

我的猜测是它找不到标题键，因为它位于下一层。任何关于我哪里出错以及如何按标题排序的指示将不胜感激。非常感谢。

```
Array 
(
[4791063199] => stdClass Object
    (
        [box_header_text_color] => 393837
        [link_color] => EE6600
        [box_background_color] => FFFFFF
        [box_border_color] => D9D4D0
        [timezone] => Europe/London
        [organizer] => stdClass Object
            (
                [url] => http://www.eventbrite.com/org/2866607767
                [description] => 
                [long_description] => 
                [id] => 2866607767
                [name] => B&Q Manifestival
            )

        [background_color] => E3DFDC
        [id] => 4791063199
        [category] => 
        [box_header_background_color] => F0ECE9
        [capacity] => 20
        [num_attendee_rows] => 0
        [title] => Closed Event Test
        [start_date] => 2012-11-07 19:00:00
        [status] => Live
        [description] => Lorem ipsum
        [end_date] => 2012-11-07 21:00:00
        [tags] => 
        [timezone_offset] => GMT+0000
        [text_color] => 393837
        [title_text_color] => 
        [password] => 
        [tickets] => Array
            (
                [0] => stdClass Object
                    (
                        [ticket] => stdClass Object
                            (
                                [description] => 
                                [end_date] => 2012-11-07 17:00:00
                                [min] => 1
                                [max] => 1
                                [price] => 0.00
                                [quantity_sold] => 0
                                [visible] => true
                                [currency] => GBP
                                [quantity_available] => 20
                                [type] => 0
                                [id] => 15940001
                                [name] => Manifestival Event
                            )

                    )

            )

        [created] => 2012-11-07 10:40:36
        [url] => http://www.eventbrite.com/event/4791063199
        [box_text_color] => 393837
        [privacy] => Private
        [venue] => stdClass Object
            (
                [city] => 
                [name] => HR Training Room
                [country] => 
                [region] => 
                [longitude] => 0
                [postal_code] => 
                [address_2] => 
                [address] => 
                [latitude] => 0
                [country_code] => 
                [id] => 2619469
                [Lat-Long] => 0.0 / 0.0
            )

        [modified] => 2012-11-07 10:47:20
        [repeats] => no
    ) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:14:11.893

第二个参数`usort`应该是一个函数。请参阅[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)。您需要向它传递一个函数，例如：

```
function cmp($a, $b)
{
    return strcmp($a->title, $b->title);
} 
```

我想你会这样称呼它`usort($restrictedEvents, "cmp");`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-07T16:00:17.703

你可以用[茴香酒](https://github.com/letsdrink/ouzo-goodies)来做：

```
$result = Arrays::sort($restrictedEvents, Comparator::compareBy('title')); 
```

[http://ouzo.readthedocs.org/en/latest/utils/comparators.html](http://ouzo.readthedocs.org/en/latest/utils/comparators.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:18:31.890

to的第二个参数`usort`是一个函数，而不是键名。该函数传递了正在排序的数组的两个元素并返回一个值，该值指示这两个元素应如何相对于彼此进行排序：-1 如果它们传递给函数的顺序是正确的，如果是相反的，则为 1 , 如果无关紧要则为 0（就比较而言，这两个元素相等）。这是您的案例的示例：

```
usort($restrictedEvents, 
      function($a, $b) { return strcmp($a->title, $b->title); }); 
```

如果您使用的是较旧的 PHP（在 5.3.0 之前，它引入了匿名函数），那么您必须为比较函数命名并将该名称作为字符串传递给`usort`：

```
function titlecmp($a, $b) {
  return strcmp($a->title, $b->title); 
}
usort($restrictedEvents, "titlecmp"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T20:13:03.237

通常这样的事情是通过第二个数组来实现的`$keyToSort => $id`，通过标准排序函数或你自己的排序这个数组，然后你有一个转换为你的第一个数组

使用它，您的阵列的深度是无限的。

# php - 为什么 getTimestamp() 受 setTimezone() 影响

> ID：13277368
> 
> 赞同：1
> 
> 时间：2012-11-07T20:08:59.063
> 
> 标签：php, datetime, unix-timestamp

我一直在努力使用 PHP 的 DateTime 类。我的理解是，无论时区如何，UNIX-timstamp 始终采用 UTC。

这就是为什么我对这个代码示例很困惑。

```
$date1 = new DateTime("@1351382400"); // Sun Oct 28 2012 02:00:00 GMT+2 (DST)
var_dump($date1->getTimestamp()); //prints: 1351382400
$date1->setTimezone(new DateTimeZone("Europe/Stockholm"););
var_dump($date1->getTimestamp()); //prints: 1351386000 
```

如您所见，setTimezone() 改变了 getTimestamp() 的结果。

是否预期 setTimezone() 会影响 getTimestamp()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:55:17.013

您关闭的时间是 3600 秒或 1 小时。

我认为您所看到的是因为您选择的日期是斯德哥尔摩夏令时结束的日期。如果你使用不同的日期，你不会得到这样的效果：

```
$now = time();
echo "            now: $now\n";

$date1 = new DateTime("@{$now}");
echo "     date1 here: {$date1->getTimestamp()}\n";
$date1->setTimezone(new DateTimeZone("Europe/Stockholm"));
echo "date1 Stockholm: {$date1->getTimestamp()}\n"; 
```

输出：

```
 now: 1352321491
     date1 here: 1352321491
date1 Stockholm: 1352321491 
```

我不确定这是否是一个错误，但如果您不选择 DST 更改的日期，它就不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:13:11.143

是的，unix 时间戳是根据日期对象的当前时间或来自 Epoch 的当前机器时间。

# ruby-on-rails - 为什么从 Heroku 加载的图像是渐进式加载的

> ID：13277370
> 
> 赞同：0
> 
> 时间：2012-11-07T20:09:02.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, heroku, progressive

我有一个在 Heroku 上运行的小型（Rails 3.1）应用程序（图像也从 Heroku 提供）图像逐渐加载（从上到下）。如果我拍摄相同的图像并将它们放在另一个（Apache）服务器上，它们似乎会在加载后立即出现。

那么为什么他们在 Heroku 上从上到下加载呢？仅仅是它们加载速度非常慢（因此渐进式下载很明显）还是与 Heroku 提供图像的方式有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:46:02.843

你在heroku下运行哪个服务器？您是否使用了 procfile，如果没有（并且该应用程序正在使用 webrick），您可以尝试瘦身或独角兽，看看这是否会有所作为并加快速度。示例[http://michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-cedar-stack/](http://michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-cedar-stack/)

# php - PHP - 使用设置变量 fwrite PHP 数据

> ID：13277372
> 
> 赞同：-1
> 
> 时间：2012-11-07T20:09:26.523
> 
> 标签：php, fwrite

我试图弄清楚如何使用通过 $_POST 或 $_GET 给出的变量写入 .php 文件，这些变量由用户提供以设置变量等。那么，我将如何让下面的代码工作，而不是编写代码，例如插入一个 $_GET 变量，或者在下面的描述中，作为 $derp。

```
<?php
$derp = "working!";
$something = '<?php echo "Well Thats {$derp}' ?>';
$file = fopen("worked.php","w");
if (fwrite($file,$something) > 0) {
echo "Fwrite Successful!";  
}
fclose($file);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:17:11.473

虽然这个用例看起来很奇怪，但以下应该可以工作：

```
$data = array('<?php');
foreach ($_REQUEST as $key => $value) {
    $data[] = "\$$key = \"$value\";";
}
$data[] = '?>';

$data = join("\n", $data);
file_put_contents('/path/to/file.php', $data); 
```

当心：此代码会带来若干安全风险。

**WTF在这里进行吗？**

上面的代码遍历了 and 的所有数组元素，并`$_GET`结合[了](http://php.net/manual/en/reserved.variables.request.php)。 通过它创建一个要写入文件的行数组。 然后，该数组将通过使用 NEWLINE ascii 字符作为胶水被编辑成一个字符串。 `$_POST`

[`join()`](http://php.net/join)

假设使用以下查询字符串调用此脚本：

```
?foo=bar&bar=baz 
```

该文件`/path/to/file.php`将包含（[file_put_contents](http://php.net/file_put_contents)）：

```
<?php
$foo = "bar";
$bar = "baz";
?> 
```

上面的示例不支持嵌套查询参数，例如`foo[bar]=baz`.

# android - Android解析没有根元素的Xml

> ID：13277377
> 
> 赞同：1
> 
> 时间：2012-11-07T20:09:39.423
> 
> 标签：android

嗨，我必须在 android 中解析一个 XML 文件，但 Xml 中没有根元素。像下面这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<iii>
    <kkk>test</kkk>
    <ppp>000</ppp>
</iii>

<iii>
    <kkk>test</kkk>
    <ppp>000</ppp>
</iii>

<iii>
    <kkk>test</kkk>
    <ppp>000</ppp>
</iii> 
```

..

是否可以在没有根元素的情况下进行解析？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:16:16.337

首先，这不是有效的 XML，因此没有解析器会接受它。如果您可以修复应用程序的生成部分，请执行此操作。

如果您无法对文档生成器做任何事情，最简单的修复方法是给它一个根元素。只需放在文档末尾的and`<root>`之后即可。然后将其提供给您的 XML 解析器。`<?xml>``</root>`

# oracle - Coldfusion ORM 可以访问 Oracle 触发器吗

> ID：13277380
> 
> 赞同：1
> 
> 时间：2012-11-07T20:09:51.203
> 
> 标签：oracle, orm, coldfusion, triggers, sequence

我在现有数据库上设置了 ORM 并与 Oracle 一起工作，并且在我访问序列时能够使插入工作，但是由于在原始应用程序中使用了触发器，因此序列跳过了一个数字。

有没有办法让 ORM 使用触发器？

禁用触发器不是一个选项，因为它由现有应用程序使用，并且在迁移期间无法禁用。

```
component persistent="true" table="table_name"  schema="schema_name" { 
   property name="table_id" column="table_id" fieldtype="id" generator="sequence" sequence="schema_name.sequence_name";
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:49:45.200

触发器是不可访问的程序单元。“调用”触发器的唯一方法是针对所属表执行适当的 DML。

您的问题有两种可能的解决方案。

1.  **重写触发器**。您说另一个应用程序仍然需要触发器来填充 ID，但是您可以使用条件更改触发器的逻辑....

    ```
    if :new.id is null  then
         :new.id := whatever_seq.nextval;  --11g syntax for brevity
    end if; 
    ```

    这将在其他应用程序插入表时填充 ID，但不会覆盖您的值。

2.  **别担心了**。序列只是唯一标识符的生成器。数字上升，但如果有差距真的没关系。除非您要处理*数十亿*行，否则您的序列极不可能在您的应用程序退役之前用完数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:36:13.873

您的意思是数据库通常使用插入触发器分配一个 ID？这可以解释为什么你要跳过一个数字。您可以尝试 generator="select" ，它会在插入发生（并且触发器已被触发）后休眠以读取 ID。它可以准确地处理我认为您所描述的情况。

# javascript - 如何将 /post JSON 数组从客户端传递到服务器？

> ID：13277382
> 
> 赞同：0
> 
> 时间：2012-11-07T20:09:57.983
> 
> 标签：javascript, jquery, json

我正在使用 jQuery 创建一个 JSON 数组，现在从客户端如何将 JSON 数组从模态窗口传递或发布到服务器/后端？

当我在模式窗口上单击“保存更改”时，我想传递/发布

`var data = $(this).serializeObject()`到服务器。

如何使用 jQuery 或 javascript 从客户端执行此操作？

我的代码在 jsfiddle [http://jsfiddle.net/dev1212/GP2Y6/30/](http://jsfiddle.net/dev1212/GP2Y6/30/)中（当用户单击提交但在我的本地计算机上工作时，模式窗口未显示在小提琴中）

将其发布到服务器是否正确？

这是否是将 JSON 数组数据传递给服务器的正确方法？

这是我的更新版本：

```
$.ajax({
    type: 'POST',

    url: 'http://re-directb-acktohomepage.com/',
contentType:'application/json'
    data: data,
    success: 
        alert('success');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:14:49.423

查看 ajax 或自己处理 httprequest。ajax 非常简单，因为您已经在使用 jQuery。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:14:54.437

您可以像这样使用表单并通过 javascript 提交它，[也可以像这样](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)[通过](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)jQuery 使用 AJAX 。

一个将重定向您的页面，另一个将发布数据，同时将您的浏览器保持在同一页面上。这个问题已经在这个网站上回答了很多次，所以你也可以四处寻找更深入的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:15:04.373

通过参数使用`"$.ajax"`和放置您的 json 数据`"data"`。您将在发送到服务器的请求对象中获取数据。

干杯

# python - MySQLdb 无法解析本地主机

> ID：13277384
> 
> 赞同：3
> 
> 时间：2012-11-07T20:10:17.203
> 
> 标签：python, mysql, localhost, mysql-python

我已经使用 MySQL 建立了一个基本的事务数据库。使用 python/MySQLdb，这可以正常工作：

```
connection = MySQLdb.connect (host = "127.0.0.1", port = 3306, user = "root", passwd = "password", db = "test") 
```

但这不是：

```
connection = MySQLdb.connect (host = "localhost", port = 3306, user = "root", passwd = "password", db = "test") 
```

使用后者会产生以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "path\to\virtualenv\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "path\to\virtualenv\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

我不得不承认我对为什么 MySQLdb 无法解析 localhost 感到有些困惑。C:\Windows\System32\drivers\etc\hosts 文件没有被修改过。使用常规的 Windows 命令提示符，`ping localhost`两者`telnet localhost 3306`都可以正常工作。

环境：

*   Windows 7（64 位）
*   Python 2.7.2（32 位）
*   MySQL数据库 1.2.3
*   MySQL 5.5.28（64 位）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:16:42.763

来自 MySQLdb [docs](http://mysql-python.sourceforge.net/MySQLdb.html)，关于使用`localhost`：

> 这将通过 UNIX 套接字创建与本地计算机上运行的 MySQL 服务器的连接。UNIX 套接字和命名管道不能在网络上工作，因此如果您指定 localhost 以外的主机，将使用 TCP，如果需要，您可以指定一个奇数端口。

您的服务器可能侦听 TCP 套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:16:12.770

这可能是 IPv6 问题。如果是这样，它可以通过解决

[http://www.victor-ratajczyk.com/post/2012/02/25/mysql-fails-to-resolve-localhost-disable-ipv6-on-windows.aspx](http://www.victor-ratajczyk.com/post/2012/02/25/mysql-fails-to-resolve-localhost-disable-ipv6-on-windows.aspx)

# asp.net-mvc-4 - Html 表单 - 路线错误

> ID：13277385
> 
> 赞同：2
> 
> 时间：2012-11-07T20:10:18.687
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 asp.net 教程中的 FileUpload 示例。当我将它构建为独立时，它工作正常。但是，每当我尝试将该功能添加到新的 MVC4 网站时，路由都是错误的。我可能没有很好地解释这一点，所以这里是代码：

```
[HttpPost]
public async Task<HttpResponseMessage> PostFile()
{
    // Check if the request contains multipart/form-data.
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    string root = HttpContext.Current.Server.MapPath("~/App_Data");
    var provider = new MultipartFormDataStreamProvider(root);

    try
    {
        var sb = new StringBuilder(); // Holds the response body

        // Read the form data and return an async task.
        await Request.Content.ReadAsMultipartAsync(provider);

        // This illustrates how to get the form data.
        foreach(var key in provider.FormData.AllKeys)
        {
            var strings = provider.FormData.GetValues(key);
            if (strings != null) foreach(var val in strings)
            {
                sb.Append(string.Format("{0}: {1}\n", key, val));
            }
        }

        // This illustrates how to get the file names for uploaded files.
        foreach(var file in provider.FileData)
        {
            var fileInfo = new FileInfo(file.LocalFileName);
            sb.Append(string.Format("Uploaded file: {0} ({1} bytes)\n", fileInfo.Name, fileInfo.Length));
        }
        return new HttpResponseMessage
        {
            Content = new StringContent(sb.ToString())
        };
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

这是我正在使用的页面：

```
<div style="height:400px;">
<h3>File Upload</h3>
<form name="trip_search" method="post" enctype="multipart/form-data" action="api/upload">
    <div>
        <input type="radio" name="trip" value="round-trip"/>
        Round-Trip
    </div>
    <div>
        <input type="radio" name="trip" value="one-way"/>
        One-Way
    </div>

    <div>
        <input type="checkbox" name="options" value="nonstop" />
        Only show non-stop flights
    </div>
    <div>
        <input type="checkbox" name="options" value="airports" />
        Compare nearby airports
    </div>
    <div>
        <input type="checkbox" name="options" value="dates" />
        My travel dates are flexible
    </div>

    <div>
        <label for="seat">Seating Preference</label>
        <select name="seat">
            <option value="aisle">Aisle</option>
            <option value="window">Window</option>
            <option value="center">Center</option>
            <option value="none">No Preference</option>
        </select>
    </div>
    <div>
        <input type="submit" value="Submit" />
    </div>

</form> 
```

当我直接导航到时，`localhost:13927api/upload`我看到了来自 web api 方法的响应。我已经在我的 WebApiConfig 中注册了 DefaultApi 路由。

但是当我在页面上`localhost/Home/About`并单击提交按钮时，它会尝试转到`localhost/Home/api/upload`- 这不存在。

我错过了什么？

**编辑**

马里奥的建议解决了我的问题。我表单上的操作方法与根无关。

```
action="api/upload" vs. action="/api/upload" 
```

这解决了我的问题。

关于这个问题的一点阐述：

当您处于默认路径时（例如 yoursite/Home/Index -> 如果这是您的默认路径），则 action="api/myaction" 将起作用，因为当前路径仍被视为网站的根目录。但是，一旦您实际导航到某个路径（例如 yoursite/Home/About），当前路径现在位于“Home”下，因此我丢失的“/”自然是相对于我的当前路径而不是根目录。这就是示例在没有前导“/”的情况下工作的原因，因为有问题的视图是默认视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:45:45.427

添加了答案，如果这也可以帮助其他人：

您的表单`action="api/upload"`与根无关。尝试`action="/api/upload"`或使用其中一个助手来指定路线。

# google-chrome - 在 Windows 7 下的 Chrome 上的网页字体渲染有缺陷

> ID：13277386
> 
> 赞同：2
> 
> 时间：2012-11-07T20:10:25.067
> 
> 标签：google-chrome, windows-7, webfonts

在 Windows 7 下的 Chrome 上使用 Google Web Fonts 时，字体似乎呈现不正确，而在 Mac OSX（在 Chrome、Safari 和 Firefox 上）上看起来很好。有没有办法通过 CSS 或 HTML 来防止这种情况发生？

可以在[此处](http://gasloggr.com)找到介绍此行为的站点（加载可能需要一段时间）。

这是显示此内容的快照：

![字体混叠问题](../Images/4c6e82716dd790721f4fd7ab19ce756f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:39:15.837

好吧，这与 Chrome 在 Windows 中呈现字体的方式有关。您可以使用一个名为 MacType 的工具，它可以更改 Windows 用于渲染字体的渲染引擎。

你可以在这里下载：[https ://code.google.com/p/mactype/](https://code.google.com/p/mactype/)

从我研究过的所有内容来看，在 Windows 上使用谷歌网络字体目前不存在解决此问题的方法。

它只是通过设计它是如何工作的。

您可以在 Chromiums Google Code 网站上关注该问题。 [https://code.google.com/p/chromium/issues/detail?id=137692](https://code.google.com/p/chromium/issues/detail?id=137692)

### 这是来自上述链接的片段，其中包含更多详细信息

> 据我了解：主要问题是 Chrome 继续使用旧的 Windows GDI 来渲染字体，而且看起来很糟糕。所有其他现代浏览器（Opera 除外）都已切换到在 Windows 上使用 DirectWrite，从而获得更好的字体渲染效果，而 Chrome 则落后。
> 
> 如果您回顾旧版本的 IE 和 Firefox，您会发现几年前它们的字体渲染看起来与 Chrome 在 Windows 上的渲染完全相同。人们只是没有注意到当时没有人使用网络字体。当您使用 Arial、Verdana 等时，它们看起来还不错，因为这些字体经过精心设计并暗示可以与 GDI 引擎很好地配合使用。大多数网络字体都没有。

### 对于开发人员来说，一种解决方法是将 SVG 放在首位，但怀疑这是正确的

```
-before--------------

@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.eot');
src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
url('../../includes/fonts/chunk-webfont.woff') format('woff'),
url('../../includes/fonts/chunk-webfont.ttf') format('truetype'),
url('../../includes/fonts/chunk-webfont.svg') format('svg');
font-weight: normal;
font-style: normal;
}

-after--------------

@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.eot');
src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
url('../../includes/fonts/chunk-webfont.svg') format('svg'),
url('../../includes/fonts/chunk-webfont.woff') format('woff'),
url('../../includes/fonts/chunk-webfont.ttf') format('truetype');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T12:25:37.543

我在 [这里](https://code.google.com/p/chromium/issues/detail?id=336476#c30)找到了一些解决方案 ，它对我有用

已使用以下代码添加了临时修复...

```
$('body')
  .delay(500)
  .queue( 
    function(next){ 
        $(this).css('padding-right', '1px'); 
    }
  ); 
```

# c# - 使用 Report Viewer 并要求提供数据源时，我的数据访问类未显示

> ID：13277395
> 
> 赞同：1
> 
> 时间：2012-11-07T20:11:31.713
> 
> 标签：c#, asp.net, report-viewer2010

我是使用报表查看器控件的新手。

我目前创建报告的方式是调用存储过程并插入输入参数来查询数据库中的表并返回行列表。

将行插入数据表并返回数据表。

数据表绑定到用户可以查看的gridview。

现在我的问题....

我想使用报表查看器而不是网格视图来显示数据，以便用户可以轻松导出数据并使用它查看漂亮的图表。

存储过程是从我的数据访问类中调用的，它只是我项目中的一个类（它不在文件夹中）。

当我去创建一个报表查看器并被要求提供我的数据源时，我的数据访问类没有出现。如何从存储过程函数中获取结果（返回的数据表）以插入到报表查看器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:35:59.073

您可以尝试程序化方法，

```
//Load Report Definition.
// From File.
ReportViewer1.LocalReport.ReportPath = "C:\\Report.rdlc";
//Load Report Data.
ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource("DataSet1", data));
//Refresh Control.
ReportViewer1.LocalReport.Refresh(); 
```

如果您有一个包含数据的 DataTable，您只需将其作为 DataSource 添加到 ReportViewer。“DataSet1”是当前加载到报表查看器中的报表中数据集的名称。

因此，如果您使用的是实体框架，它将是这样的。

```
//Create Connection.
Entities db = new Entities();

//Get the Data Using the query supplied (Where Entities.SomeObject is the Entity to retrieve data).
IQueryable<Object> data = db.CreateQuery<Object>("SELECT VALUE c FROM Entities.SomeObject AS c WHERE c.SomeValue> 0");

//Reset Control. Doesn't Usually work if this is skipped for some reason.
ReportViewer1.Reset();
//Load Report Definition.
// From File.
ReportViewer1.LocalReport.ReportPath = "C:\\Report.rdlc";
//Load Report Data.
ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource("DataSet1", data));
//Refresh Control.
ReportViewer1.LocalReport.Refresh(); 
```

同样适用于 DataTable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:47:16.217

为了让报表查看器访问我的数据表，我最终所做的是将数据集添加到我的项目中。在该数据集中，我必须创建一个与我的代码生成的数据表具有相同列名的数据表。从那里我去我的报告并添加一个表格并将其指向在数据集中创建的数据表。然后在我的代码中，我使用上述来自 Shelby 的代码以编程方式添加了数据表。

# jquery - HostIP.info get_json 不调用 jQuery ajax 回调

> ID：13277402
> 
> 赞同：1
> 
> 时间：2012-11-07T20:11:53.157
> 
> 标签：jquery, jsonp

我只是想通过 jQuery/JSONP 获取用户的 IP 地址并在其他服务上取得了成功，但我无法确定为什么在使用 hostip.info 的[JSON API时没有调用回调](http://www.hostip.info/use.html)

Firebug 和 Fiddler 都显示了我期望的 JSON 响应数据，但从未调用成功，并且错误是解析错误，所以我必须遗漏一些东西。

任何想法或建议都会很棒。提前致谢。

[jsFiddle 示例](http://jsfiddle.net/wdqeV/1/)

简单代码：

```
$.ajax({
    type: "GET",
    url: "http://api.hostip.info/get_json.php",
    dataType: "jsonp",
    success: function(json) {
        alert(json.ip);
    },
    error: function (request, type, status)
    {
       alert('[request: ' + request.statusText + '] [type: ' + type + '] [status: ' + status + ']');
     }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:16:51.770

服务是json而不是jsonp，改成`dataType`，`json`见[http://jsfiddle.net/wdqeV/3/](http://jsfiddle.net/wdqeV/3/)

# c++ - 向量 - 更优雅？

> ID：13277403
> 
> 赞同：2
> 
> 时间：2012-11-07T20:12:02.510
> 
> 标签：c++, vector

我正在使用向量，我正在像这样初始化它们：

```
vector<int> values;

values.push_back(1);
values.push_back(2);
values.push_back(8);
values.push_back(12);
values.push_back(32);
values.push_back(43);
values.push_back(23);
values.push_back(234);
values.push_back(7);
values.push_back(1); 
```

有没有办法以类似数组的方式 push_back 这些元素？像这样：

```
 int numbers[2] = {1, 2}; 
```

矢量方法占用了太多行，IMO！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T20:14:05.420

在 C++11 中，您可以对任何容器使用大括号初始化。

```
std::vector <int> v = {1, 2, 8, 12, 32 ...}; 
```

在 C++03 中你可以这样做

```
const int arr[] = {1, 2, 8, 12, 32 ... };
const int size = sizeof arr / sizeof arr[0];
std::vector<int> v(arr, arr + size); 
```

或使用[boost assign](http://www.boost.org/libs/assign/)。

```
#include <boost/assign.hpp>
using namespace boost::assign;
///...
{
    std::vector<int> v;
    v += 1, 2, 8, 12, 32;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T20:13:18.630

确实有一种方法可以做到这一点，只要你有一个 C++11 编译器：

```
std::vector<int> values = {1, 2, 3, 4, 5}; 
```

这被称为初始化列表。`std::vector`有一个[构造函数，它接受一个初始化列表](http://en.cppreference.com/w/cpp/container/vector/vector)（见声明 7）来初始化它的元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T20:13:46.310

在 C++11 中，您可以像处理数组一样执行此操作。`std::vector`有一个带有 a 的构造函数`std::initializer_list<T>`，它允许它从列表中初始化自己。

在 C++03 中，您可以使用临时数组：

```
int tempValues[] = {1,2,8,12,32,43,23,234,7,1};
std::vector<int> values(tempValues, tempValues + sizeof tempValues / sizeof tempValues[0]); 
```

# operating-system - ring 0 程序是否使用物理内存地址？

> ID：13277410
> 
> 赞同：1
> 
> 时间：2012-11-07T20:12:29.857
> 
> 标签：operating-system, x86, x86-64, virtual-memory, computer-architecture

我正在设计一个内存芯片，因为这似乎是询问相关系统软件问题的最佳场所......

在现代 x86 处理器上，系统级代码（保护环 0）是否在物理内存地址上运行？64 位规格是否也一样？

（我需要知道，所以我知道系统代码的地址是否通过虚拟/分段内存子系统。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:31:00.303

它们像任何其他代码一样运行。Ring 0 与其他 Ring 的唯一区别是 Ring 0 可以执行特权指令，从而修改内存地址空间和结构。然而，这个特权并不意味着 Ring 0 不能像任何其他代码一样使用虚拟内存。技术上可以运行 Ring 0 中的所有进程并保持相同的虚拟内存行为，假设进程不尝试修改它。也可以在没有虚拟内存地址空间的情况下运行特权较低的环进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:35:48.810

不，它仍然是一个平面虚拟内存模型。驱动程序代码和数据可以正常调出，除非采取特定对策来锁定页面。例如，常见的蓝屏停止代码是 KERNEL_DATA_INPAGE_ERROR。

映射物理内存的典型调用是 MmAllocatePagesForMdl()

# c - 为什么 realloc 在这个例子中不起作用？

> ID：13277411
> 
> 赞同：0
> 
> 时间：2012-11-07T20:12:39.507
> 
> 标签：c, malloc, realloc

我的教授给了我们一个“作业”来找出为什么`realloc()`在这个特定的例子中不起作用。我尝试搜索此站点，但我认为它不起作用，因为没有真正的方法来确定分配的内存块的大小，`malloc()`因此`realloc()`不知道它需要重新分配的内存块的新大小。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <windows.h>
int main ()
{
    MEMORYSTATUS memInfo;
    memInfo.dwLength = sizeof(MEMORYSTATUS);
    GlobalMemoryStatus(&memInfo);
    double slobodno = memInfo.dwAvailVirtual/1024./1024.;

    printf("%g MB\n",slobodno);
    int br=0,i,j;

    char **imena,*ime,*temp,*bbb=NULL;
    imena=(char**) malloc(sizeof(char*)*(br+1));
    while(1)
    {
        printf("Unesite ime: ");
        ime=(char*) malloc(sizeof(char)*4000000);
        gets(ime);
        printf("%u\n", strlen(ime));
        ime=(char*) realloc(ime,strlen(ime)+1);

        GlobalMemoryStatus(&memInfo);
        slobodno = memInfo.dwAvailVirtual/1024./1024.;
        printf("%g MB\n",slobodno);

        if (strcmp(ime,".")==0)
           {free(ime);free(imena[br]);break;}
        imena[br++]=ime;
        imena=(char**) realloc(imena,sizeof(char*)*(br+1));
    }

    for (i=0;i<br-1;i++)
        for (j=i+1;j<br;j++)
            if (strcmp(imena[i],imena[j])>0)
            {
                temp=imena[i];
                imena[i]=imena[j];
                imena[j]=temp;
            }

    //ovde ide sortiranje
    for (i=0;i<br;i++)
        printf("%s\n",imena[i]);

    for(i=0;i<br;i++)
       free(imena[i]);

    free(imena);

    return 0;
} 
```

注意：教授添加了打印可用内存的行，因此我们可以看到它`realloc()`不起作用。我们输入的每个新字符串只占用`sizeof(char)+4000000`字节并且不能重新分配。我试图找出原因。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:33:01.853

我感觉它与 Windows 上的页面大小有关。比如把4000000改成400000，可以看到内存是可以重复使用的。

我认为分配 4000000 会迫使 Windows 使用“巨大的”页面大小（4MB），并且由于某些（我不知道的）原因，realloc 不能以您期望的方式对它们起作用（即，使未使用的内存可用于其他分配）。

这似乎与[Realloc() does not correct free memory in Windows](https://stackoverflow.com/questions/9164837/realloc-does-not-correctly-free-memory-in-windows)有关，其中提到了 VirutalAlloc，但我不确定它是否阐明了 realloc 不起作用的确切原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:21:32.360

来自[MSDN](http://msdn.microsoft.com/en-us/library/xbebcx7d.aspx)：

> `memblock`参数指向内存块的开头。If `memblock`is `NULL`,`realloc`行为`malloc`与分配一个新的`size`字节块相同。

所以这条线每次都是新的记忆`ime=(char*) realloc(NULL,sizeof(char)*4000000);`。`malloc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:22:39.333

问题不在于 realloc 不知道原始块的大小。即使我们的程序员无法获得这些信息，它也需要对 realloc 可用（即使该块是使用 malloc 或 calloc 分配的）。

线

```
ime=(char*) realloc(ime,strlen(ime)+1); 
```

看起来它正在缩小先前分配的块以完全适合内容，但实际上并没有要求缩小内存块并使剩余部分再次可用于新分配。

**编辑**

我刚刚想到的另一件事：使用 realloc 进行收缩可能工作正常，但是运行时库不会将内存返回给操作系统，因为库会保留它以供下一次分配。只是，下一次分配是针对如此大的块，以至于它不适合用 realloc 释放的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:37:39.267

`realloc`不释放内存。这些函数使用一大块内存（称为“堆”）并在您调用`realloc`/ `malloc`/时切出块`calloc`。如果您需要比当前堆中更多的内存，则通过向操作系统请求更多内存来扩展堆。

当您调用`realloc`以使内存块更小时，所发生的一切就是您不再需要的内存可用于`*alloc`根据不同的请求再次分发。既`realloc`不会也`free`不会收缩堆以将内存返回给操作系统。（如果您需要这样做，您需要调用操作系统的本机内存分配过程，例如`VirtualAlloc`在 Windows 上。）

# php - 从 HTML 列表问题运行 Ajax

> ID：13277412
> 
> 赞同：0
> 
> 时间：2012-11-07T20:12:40.737
> 
> 标签：php, jquery, ajax

我正在尝试在 Web 应用程序上运行 Ajax，该应用程序假设使用 jQuery 和 PHP 从 MySQL 数据库中列出与 HTML 列表相关的数据。我在 MySQL 数据库中有两个名为 Item 和 Items 的表，如下所示：

![在此处输入图像描述](../Images/3d5b1992cfe081537e8810d404f0d3a2.png)

我必须将 PHP 文件称为 index.php 和 result.php 作为：================================== ================================= index.php

```
<html>
<head></head>
<body>
 <?php
  $mysqli = new mysqli('localhost', 'root', '', 'testdb');
   if ($mysqli->connect_errno) 
   {
     die('Unable to connect!');
   }
  else{
$query = 'SELECT * FROM items';
if ($result = $mysqli->query($query)) 
{
    if ($result->num_rows > 0) 
    {
    ?>  
        <p>
            Select a language
            <ul id="item">
      <?php     
while($row = $result->fetch_assoc()){
?>      
<li><div id="selectLanguage"><?php echo $row['item']; ?></div></li>     
<?php           
        }
 ?>
            </ul>
    </p>
    <p id="result"></p>
  <?php
    }
    else 
    {
        echo 'No records found!';
    }
    $result->close();
}
else 
{
    echo 'Error in query: $query. '.$mysqli->error;
}
    }
    $mysqli->close();
    ?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#selectLanguage').click(function()
            {
            alert("hello");
                if($(this).val() == '') return;
                $.get(
                    'results.php',
                    { id : $(this).val() },
                    function(data)
                    {
                        $('#result').html(data);
                    }
                );
            });
        });
    </script>
</body>
</html> 
```

结果.php是============================================= =========================== result.php

```
<?php
$mysqli = new mysqli('localhost', 'root', '', 'testdb');
$resultStr = '';
 $query = 'SELECT type FROM item where name='.$_GET['item'];
 if ($result = $mysqli->query($query)) 
 {
if ($result->num_rows > 0) 
{
    $resultStr.='<ul>';
    while($row = $result->fetch_assoc())
    {
        $resultStr.= '<li><strong>'.$row['id'].'</strong> - '.$row['type'];
    '</li>';
    }
    $resultStr.= '</ul>';
}
else
{
    $resultStr = 'Nothing found';
}
     }
    echo $resultStr;
    ?> 
```

现在第一部分（index.php）正在根据项目表呈现列表，但我无法单击第二个或第三个项目，除了它们都没有向页面返回任何值。你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:07:35.133

将您的 index.php 文件更改为：

```
<html>
<head></head>
<body>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
 <?php
  $mysqli = new mysqli('localhost', 'root', '', 'testdb');
   if ($mysqli->connect_errno) 
   {
     die('Unable to connect!');
   }
  else{
$query = 'SELECT * FROM items';
if ($result = $mysqli->query($query)) 
{
    if ($result->num_rows > 0) 
    {
    ?>  
        <p>
            Select a language
            <ul id="item">
      <?php     
while($row = $result->fetch_assoc()){
?>      
<li><div id="selectLanguage<?php echo $row['id']; ?>"><?php echo $row['item']; ?></div></li>

   <script type="text/javascript">
        $(document).ready(function()
        {
            $('#selectLanguage<?php echo $row['id']; ?>').click(function()
            {
            //alert("hello");

                $.ajax({
                      type : 'POST',
                      url : 'result.php',

                     data: {
                     id : <?php echo $row['id']; ?>
                       },
                      success : function(data){

                         $('#result').html(data);
}

                });

            });
        });
    </script>

<?php           
        }
 ?>
            </ul>
    </p>
    <p id="result"></p>
  <?php
    }
    else 
    {
        echo 'No records found!';
    }
    $result->close();
}
else 
{
    echo 'Error in query: $query. '.$mysqli->error;
}
    }
    $mysqli->close();
    ?>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:21:29.497

您正在多次创建 selectLanguage div id。您应该使用类而不是 id。还。val() 为空。您应该改用 html() 。

看起来在 result.php 中，当您在 jquery ajax 函数中将参数作为“id”传递时，您正在通过参数“item”填充列表

改变其中之一，你应该很好。

# javascript - 可以使用空格正则表达式字符来执行 javascript 注入吗？

> ID：13277429
> 
> 赞同：0
> 
> 时间：2012-11-07T19:17:26.807
> 
> 标签：javascript, security

> **可能重复：**
> [正则表达式空格字符会导致注入吗？](https://stackoverflow.com/questions/13276474/can-a-regex-whitespace-character-cause-an-injection)

如果我想验证 a 的输入`<textarea>`，并希望它只包含例如数值，但甚至想让用户能够插入新行，我可以使用包含空格的 javascript 正则表达式来选择想要的字符人物。

```
/[0-9\s]/ 
```

问题是：即使我认为最后一个选项是不可能的，或者任何其他类型的攻击，是否可以使用白色字符来执行注入、XSS？

谢谢

**更新**

是的，我很抱歉重复了，这个问题已经从网站管理员网站转移了，我无意在同一个网站上问两次同样的事情。

# actionscript-3 - 自定义 Flex 3 容器

> ID：13277431
> 
> 赞同：0
> 
> 时间：2012-11-07T20:13:41.627
> 
> 标签：actionscript-3, apache-flex, flex3, mxml, custom-component

我想在 Flex 3 中创建一个自定义容器。我希望这个容器有一个内部容器，它可以是 TabNavigator 或 VBox，具体取决于用户设置的某些标志。一旦页面被渲染，这个标志就不会改变，所以我不需要“动态地”从一个组件移动到另一个组件。

到目前为止，我有这个代码：

```
public class AccNavigator extends Container {
public var container:Container;

public function AccNavigator() {
    if (GlobalSettings.Vertical) { // This is the said variable
        container = new VBox();
    }
    else {
        container = new TabNavigator();
    }
    container.percentHeight = 100;
    container.percentWidth = 100;
}

override protected function createChildren():void {
    super.createChildren();
    this.addChild(container);
}

override public function addChild(c:DisplayObject):DisplayObject {
    if (c == container) {
        // MessageAlert is the same as an Alert but with custom code
        MessageAlert.show("addChild: Adding Container");
        super.addChild(c);
    } else {
        MessageAlert.show("addChild: " + c.toString());
        container.addChild(c);
    }
    return c;
}

override protected function initializationComplete():void {
    // used for bebugging purposes
    MessageAlert.show("container is visible: " + container.visible.toString());
    MessageAlert.show("this is visible: " + visible.toString());
    MessageAlert.show("container children: " + container.numChildren);
    MessageAlert.show("this children: "+ this.numChildren);
}
} 
```

我在 mxml 中使用这个自定义容器，如下所示：

```
<AccNavigator>
   <HBox>
      <more things...>
   </HBox>
   <HBox>
      <more things...>
   </HBox>
</AccNavigator> 
```

但是当我运行应用程序时，没有一个组件是可见的。执行initializationComplete代码时，我看到以下内容：

*   容器可见：true
*   这是可见的：真
*   容器儿童：2
*   这个孩子：1

我花了一些时间阅读这个[http://www.developmentarc.com/site/sites/default/files/understanding_the_flex_3_lifecycle_v1.0.pdf](http://www.developmentarc.com/site/sites/default/files/understanding_the_flex_3_lifecycle_v1.0.pdf) 以了解组件生命周期，但我仍然无法理解我的代码中缺少什么.

有人可以帮助我并告诉我我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:39:18.010

问题是我不应该扩展 Container。因此，类声明如下所示：

```
public class AccNavigator extends VBox {
....
} 
```

其他一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T19:13:06.773

从您希望容器基于的容器类型扩展。例如，如果您想拥有基于 HBox 的东西，则从 HBox 扩展；如果您想实现基于 VBox 的东西，则从 VBox 扩展。从技术上讲，您可以扩展 Container，但由于 Container 太接近层次结构的“根”，您将不得不以某种方式“重新发明轮子”。

# xml - Grails NoClassDefFoundError: nu/xom/Serializer

> ID：13277434
> 
> 赞同：1
> 
> 时间：2012-11-07T20:13:45.917
> 
> 标签：xml, json, grails

我正在尝试通过以下方式在 Grails 中将 JSON 转换为 XML：

```
import net.sf.json.JSONObject
import net.sf.json.xml.XMLSerializer
...

String convertToXmlString(jsonString) {
    JSONObject json = JSONObject.fromObject(jsonString)
    String xml = new XMLSerializer().write( json )

    return xml
} 
```

但是当我尝试运行代码时出现异常：

```
Caused by: java.lang.ClassNotFoundException: nu.xom.Serializer
    at org.codehaus.groovy.tools.RootLoader.findClass(RootLoader.java:156)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at org.codehaus.groovy.tools.RootLoader.loadClass(RootLoader.java:128)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我以前没有遇到过这样的事情。我不是在导入所有必要的类吗？我已将[json-lib](http://json-lib.sourceforge.net/usage.html#xml) jar 导入到我的`/lib`文件夹中，然后运行`grails compile --refresh-dependencies`​​. 我还需要运行另一个步骤吗？

我对转换 JSON/maps -> XML/strings 和返回的其他方式持开放态度，但这个问题似乎应该很容易解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:38:30.630

您可以使用 grails.converters 来完成此操作：

```
import grails.converters.JSON
import grails.converters.XML

def o = JSON.parse("{ foo: 'bar' }") // creates a JSONObject
def x = o as XML // creates an XML
println x
def s = x as String // create the String representing the XML
println s 
```

结果将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?><map><entry key="foo">bar</entry></map>
<?xml version="1.0" encoding="UTF-8"?><map><entry key="foo">bar</entry></map> 
```

# python - 打印十六进制值时如何让 Python 使用大写字母？

> ID：13277440
> 
> 赞同：21
> 
> 时间：2012-11-07T20:14:07.053
> 
> 标签：python, formatting, hex, uppercase

在 Python v2.6 中，我可以通过以下两种方式之一获得整数的十六进制：

```
print(("0x%x")%value)
print(hex(value)) 
```

但是，在这两种情况下，十六进制数字都是小写的。我怎样才能得到这些大写？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-07T20:14:49.333

大写 X（使用[sprintf 样式格式的](https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting)Python 2 和 3 ）：

```
print("0x%X" % value) 
```

或者在 python 3+ 中（使用[`.format`字符串语法](https://docs.python.org/3/library/string.html#formatstrings)）：

```
print("0x{:X}".format(value)) 
```

或在 python 3.6+ 中（使用[格式化的字符串文字](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)）：

```
print(f"0x{value:X}") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-02T06:21:00.130

只需使用上（）。

```
intNum = 1234
hexNum = hex(intNum).upper()
print('Upper hexadecimal number = ', hexNum) 
```

输出：

```
Upper hexadecimal number =  0X4D2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T21:45:52.900

通过使用大写`%X`：

```
>>> print("%X" % 255)
FF 
```

更新 Python 3.6 时代：只需在格式部分中使用“X”，在 f-strings 中：

```
print(f"{255:X}") 
```

（f 字符串在 - 之前接受任何有效的 Python 表达式，`:`包括直接数字表达式和变量名）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-22T12:00:10.503

`print(hex(value).upper().replace('X', 'x'))`

正确处理负数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-06T22:59:03.473

使用 f-strings 的更多 Python 3 习惯用法是：

```
value = 1234
print(f'0x{value:X}')
'0x4D2' 
```

注释（以及为什么这不是重复的）：

*   展示了如何**避免大写“0x”前缀**，这是其他答案中的一个问题
*   显示**如何获得变量插值** `f'{value}'`；实际上没有人将（硬编码）十六进制文字放入实际代码中。做变量插值有很多陷阱：不是`f'{x:value}'`也不`f'{0x:value}'`是`f'{value:0x}'`，甚至`f'{value:%x}'`我也尝试过。绊倒的方法有很多。在重新阅读了四个教程和 whatsnew 文档后，我仍然花了 15 分钟的反复试验来获得语法。这个答案显示了如何正确获得 f 字符串变量插值；其他人没有。

# php - 在 Twig 中使用自定义函数

> ID：13277444
> 
> 赞同：28
> 
> 时间：2012-11-07T20:14:20.613
> 
> 标签：php, symfony, twig

在我的模板中，我想输出服务器时区。

我的模板有类似的东西

```
{{ getservertimezone }} 
```

然后在`services.yml`我拥有的那个捆绑包的配置中

```
my.twig.extension:
    class: My\WebsiteBundle\Extensions\Twig\SomeTemplateHelper
    tags:
           - { name: twig.extension } 
```

我的`SomeTemplateHelper`样子

```
namespace My\WebsiteBundle\Extensions\Twig;

class SomeTemplateHelper extends \Twig_Extension
{

    public function getFilters() 
    {
        return array(
            'getservertimezone'  => new \Twig_Filter_Method($this, 'getServerTimeZone'),
        );
    }

    public function getServerTimeZone()
    {
        if (date_default_timezone_get()) {
            return date_default_timezone_get();
        } else if (ini_get('date.timezone')) {
            return ini_get('date.timezone');
        } else {
            return false;
        }
    }

    public function getName()
    {
        return 'some_helper';
    }

} 
```

但是我不能调用这个方法，除非它像过滤器一样使用：`{{ someval | getservertimezone }}`; 有没有办法直接`{{ getservertimezone() }}`打电话？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-07T20:19:14.717

使用`getFunctions()`代替`getFilters()`

```
public function getFunctions()
{
    return array(
        new \Twig_SimpleFunction('server_time_zone', array($this, 'getServerTimeZone')),
    );
} 
```

Twig 过滤器用于过滤一些值。

```
{{ "some value" | filter_name_here }} 
```

顺便说一句，您可以在同一个类中定义过滤器和函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T20:18:31.063

代替`getFilters`，覆盖`getFunctions`并使用`Twig_Function_Method`代替`Twig_Filter_Method`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-27T11:08:25.510

在较新版本的 Twig 中，他应该使用 Twig_SimpleFunction 而不是 Twig_Function_Method 和 Twig_SimpleFilter 而不是 Twig_Filter_Method，因为 Twig_*_Method 已被弃用（我正在使用 Twig v. 1.24.0 和 Symfony 2.8.2）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-16T11:51:22.680

# Symfony ^2.6 - 树枝 ^1.38

请参阅下面的示例

* * *

### 应用扩展.php

```
namespace Your/NameSpace;

class AppExtension extends \Twig_Extension {

    public function getFilters() 
    {
        return array(
            new \Twig_SimpleFilter('cdn_asset_filter', array($this, 'cdn_asset_filter')),
        );
    }

    public function getFunctions()
    {
        return array(
            new \Twig\TwigFunction('cdn_asset_function', array($this, 'cdn_asset_function')),
        );
    }

    public function cdn_asset_filter($path) 
    {
        return "https://cdn.example.com/$path";
    }

    public function cdn_asset_function($path) 
    {
        return "https://cdn.example.com/$path";
    }
} 
```

* * *

### view.html.twig

```
// Filter

<img src="{{ 'path/to/image.png'|cdn_asset_filter }}">

// result : <img src="https://cdn.example.com/path/to/image.png">

// Function

<img src="{{ cdn_asset_function('path/to/image.png') }}">

// result : <img src="https://cdn.example.com/path/to/image.png"> 
```

* * *

### 应用程序/配置/服务.yml

```
services:
    my_global_filters_and_functions:
        class: Your/NameSpace/AppExtension
        tags:
            - { name: twig.extension } 
```

* * *

这就是我在一个旧项目中在 Twig 中使用自定义函数的方式，我不知道这是否是最佳实践，但它对我有用。

* * *

资源 : Twig 文档 -[扩展 Twig](https://twig.symfony.com/doc/1.x/advanced.html)

# mysql - SQL查询根据获胜几率找到获胜者

> ID：13277445
> 
> 赞同：1
> 
> 时间：2012-11-07T20:14:30.767
> 
> 标签：mysql, sql

我需要一个 SQL 查询来确定随机获胜者。每个用户都有自己的获胜几率。winning_odds 值越高，用户获胜的机会就越大。下面看一下表结构：

```
id    email            winning_odds
1     test@test.com    3
2     test2@test.com   5
3     test3@test.com   2
4     test4@test.com   1
5     test5@test.com   9 
```

MySQL 数据库。表大约有 100000 行。只有一个赢家，一次。电子邮件是独一无二的。有人有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:21:44.027

`Select email from user order by winning_odds*rand() limit 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:46:56.143

我真的很喜欢这个问题，我正在发布 postgresql 的答案。

```
select 
    *, generate_series(1, mytable.winning_odds) 
from 
    mytable 
order by 
    random() 
limit 1; 
```

这就是它的工作原理。对于您牌桌的每一行，我们将该行复制 N 次作为您的获胜几率。

所以你首先得到并且不限制查询结果：

```
 5 | test5@test.com |    9 | 9
  2 | test2@test.com |    5 | 3
  3 | test3@test.com |    2 | 1
  1 | test@test.com  |    3 | 1
  5 | test5@test.com |    9 | 5
  1 | test@test.com  |    3 | 3
  5 | test5@test.com |    9 | 2
  2 | test2@test.com |    5 | 4
  2 | test2@test.com |    5 | 5
  5 | test5@test.com |    9 | 1
  4 | test4@test.com |    1 | 1
  5 | test5@test.com |    9 | 7
  5 | test5@test.com |    9 | 4
  5 | test5@test.com |    9 | 6
  2 | test2@test.com |    5 | 1
  5 | test5@test.com |    9 | 8
  3 | test3@test.com |    2 | 2
  1 | test@test.com  |    3 | 2
  2 | test2@test.com |    5 | 2
  5 | test5@test.com |    9 | 3 
```

现在，随机选择生成表的任何行将反映您的winning_odds 字段的概率。

您所要做的就是随机订购并获得第一条记录。

```
 9 | test5@test.com |    9 | 2 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:58:26.113

我推测“赔率”不是整数，并且您希望具有“9”的东西比“1”的可能性高 9 倍。

正确的方法是使用累积总和。然后在累积和的最小值和最大值之间生成一个随机值，并选择该范围内的记录。以下查询在 MySQL 中执行此操作：

```
select t.*
from (select t.*,
             coalesce((select sum(odds) from t t2 where t2.id < t.id), 0) as cumsum,
             const.sumodds
      from t cross join
           (select rand()*sum(odds) as val from t) const
     ) t
where val between cumsum and cumsum + t.odds 
```

然而，这是一个非等值连接，在 MySQL 中可能会非常昂贵。其他数据库能够在单个查询中进行累积和。MySQL 没有有效的方法来做到这一点。

如何优化查询取决于问题中的某些其他因素。“赔率”有多少种不同的值？可以使用临时表吗？

我现在没有时间写出解决方案，但是有一种更有效的方法。Y想法是将问题分成两个搜索。第一个将找出哪个“赔率”值获胜。第二个将找出哪一行获胜。

以下是详细信息：

(1) 将数据按赔率汇总成表格。该表将有 11 行，并包含每行的“赔率”和“计数”。

(2) 计算每一行的“count*odds”之和，第一行从0开始。您可以使用上述查询作为指导，因为这是少量数据，它会快速运行。

(3) 计算一个随机数为`rand()*<sum of all odds>`。现在，找到数字在 cumsum 和 cumsum+odds 之间的赔率。

(4) 现在返回原始表并发出查询，例如：

```
select *
from t
where odds = <winning odds>
order by rand()
limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:18:04.380

如果我正确理解了这个问题，您是在问如何从表中选择随机记录。这应该有效：

```
SELECT * 
FROM   tableName
ORDER BY RAND() LIMIT 0,1; 
```

现在仍然清楚您打算如何使用winning_odds 值。

# jquery - 数据表以及过滤方法的工作原理

> ID：13277447
> 
> 赞同：0
> 
> 时间：2012-11-07T20:14:32.980
> 
> 标签：jquery, filter, datatables

谁能帮我理解 DataTables $.fn.dataTableExt.afnFiltering.push 方法是如何工作的？

我知道您可以订阅一些方法来对 DataTables 进行一些过滤（使用预定义的签名 - 它接受 Settings、Data 和 DataIndex 作为输入，并且必须返回 true 或 false 指示是否应该显示该行）。

我的疑问是它在其中运行的表。假设我们在一个页面上有多个 DataTable，我们如何定义订阅方法将在哪些表中用于过滤？会一直使用吗？如果是这种情况，我是否可以（以某种方式）测试哪个元素是正在执行的方法（这样我就可以对正确的 DataTable 进行过滤，而让其他元素保持不变）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:41:46.773

哎呀。找到了。这是我找到它的地方：[如何将过滤器应用于特定数据表](https://stackoverflow.com/questions/11447934/how-to-apply-filter-to-specific-datatable)

这就是我所做的：

```
$.fn.dataTableExt.afnFiltering.push(function(oSettings, aData, iDataIndex) {
// check if current table is the table i want
if (oSettings.nTable == $('#myTableId'))
{
    return (aData[IndexOfColumnToFilter] = filterCondition)
}
// for other tables, just do not filter...
return true;
} 
```

# python - 从 defaultdict 中提取信息

> ID：13277448
> 
> 赞同：0
> 
> 时间：2012-11-07T20:14:46.167
> 
> 标签：python, defaultdict

我有一个包含数字平均位置计算的 defaultdict（欧拉问题）

```
[('1', 0.6923076923076923), ('0', 2.0), ('3', 0.2222222222222222),
 ('2', 1.0909090909090908), ('7', 0.0), ('6', 0.875), 
('9', 1.6923076923076923),('8', 1.3333333333333333)] 
```

我正在尝试将此信息转换为简单的字符串，而不是从 0 到 2 手动执行。我正在寻找的最终结果类似于

```
73162890 
```

我不知道在不使用许多 if-else 和 for 循环的情况下提取它们的任何好方法。

在python中有什么简单而好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T20:22:41.957

如果您的 dict 是`d`，那么`items = d.items()`会给您一个配对列表，就像您拥有的一样。获得此列表后，您可以按第二个元素对其进行排序：

```
ordered = sorted(items, key=lambda (_, value): value) # Not Python 3

# or,
ordered = sorted(items, key=lambda x: x[1])

# or,
import operator
ordered = sorted(items, key=operator.itemgetter(1)) 
```

一旦我们按排序顺序获得列表，我们只需要从每个字符串中提取字符串，并将它们粘合在一起：

```
result = ''.join(string for (string, _) in ordered) 
```

（请注意，我正在调用未使用的参数，在 Python 程序中`_`没有什么特别之处。）`_`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T20:22:39.957

```
In [36]: ''.join([key for key, val in sorted(data, key = lambda item: item[1])])
Out[36]: '73162890' 
```

* * *

解释：

[这将](http://wiki.python.org/moin/HowTo/Sorting/)根据 中每个项目的第二个值对数据进行排序`data`。

```
In [37]: sorted(data, key = lambda item: item[1])
Out[37]: 
[('7', 0.0),
 ('3', 0.2222222222222222),
 ('1', 0.6923076923076923),
 ('6', 0.875),
 ('2', 1.0909090909090908),
 ('8', 1.3333333333333333),
 ('9', 1.6923076923076923),
 ('0', 2.0)] 
```

现在我们可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)收集每个项目中的第一个值：

```
In [38]: [key for key, val in sorted(data, key = lambda item: item[1])]
Out[38]: ['7', '3', '1', '6', '2', '8', '9', '0'] 
```

[并使用`''.join`](http://docs.python.org/2/library/stdtypes.html#str.join)以下方法将这些项目连接成一个字符串：

```
In [39]: ''.join([key for key, val in sorted(data, key = lambda item: item[1])])
Out[39]: '73162890' 
```

# mysql - 在 MySQL 数据库中填充字段

> ID：13277453
> 
> 赞同：1
> 
> 时间：2012-11-07T20:15:00.270
> 
> 标签：mysql, database

我目前在 MySQL 数据库中一共创建了 12 个表。其中 11 个表共享相关数据并相互建立索引。我在填充表的每个单独字段中的值并确保它们正确索引时遇到了一些困难。我想知道是否有一种更简单的方法可以为一条记录填充所有表中的每个字段，而无需手动执行并且不必担心`foreign_key`与另一个表的正确匹配（索引）。可能一个查询可以完成这项工作，但我不确定如何构建这样的查询。或与此示例特别相关的任何其他建议。

如果您想在我的数据库中创建表的精确副本，下面是表设计和查询的链接。

[桌子结构/设计](http://webprolearner.ueuo.com/class_des/table_structure.php)

[创建所有表的查询](http://webprolearner.ueuo.com/class_des/query_create.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:41:18.447

根据上一个问题中的表，您需要`INSERT`先在独立表（*或基表*）上记录。其中一些表是`event`、`semester`、`Major_Minor`等。这些表称为独立表，因为*没有定义外键约束*。

要在独立表上插入的示例查询，

```
-- INSERTING records on table event
INSERT INTO event (ID, event_description, event_datetime) VALUES
  (1, 'hello', NOW()),
  (2, 'world', NOW()),
  (3, 'stack', NOW()),
  (4, 'overflow', NOW());

-- INSERTING records on table semester
INSERT INTO semester (ID, SEMESTER_NAme) VALUES
  (1, 'First Semester'), 
  (2, 'Second Semester'), 
  (3, 'Summer'); 

-- INSERTING records on table Major_Minor
INSERT INTO Major_Minor (ID, Major_Minor_Name) VALUES
  (1, 'Math'),
  (2, 'Science'),
  (3, 'English');

-- INSERTING records on table class
INSERT INTO class (ID, class_name) VALUES
  (1, 'Alpha'),
  (2, 'Beta'),
  (3, 'Gamma'),
  (4, 'Omega'); 
```

插入记录后，您现在可以`INSERT`在依赖表上。这些被称为*依赖*表，因为在它们上定义了外键约束。您不能在其他表中不存在的某些字段上添加值。依赖表的示例是`Major_Class_br`表，

```
-- INSERTING records on table Major_Class_br
INSERT INTO Major_Class_br (ID, Class_ID, Major_Minor_ID) VALUES
    (1,1,1),
    (2,1,2),
    (3,1,3),
    (4,2,1),
    (5,2,1),
    (6,4,2); 
```

如您所见， 和 的值`Class_ID`已经`Major_Minor_ID`存在于表中：`class`并且`Major_Minor`因为表`Major_Class_br`依赖于它们。为了进一步说明这一点，请尝试执行下面的查询，其中表`Class_ID`中尚不存在for 的值`Class`，

```
INSERT INTO Major_Class_br (ID, Class_ID, Major_Minor_ID) VALUES (7,5,2); 
```

你会看到这个错误

> 架构创建失败：无法添加或更新子行：外键约束失败（`databaseName`. `major_class_br`, CONSTRAINT `cc_fk1`FOREIGN KEY ( `Class_ID`) REFERENCES `class`( `ID`)）：

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/89fac/1)

# python - Heroku 新手 - “没有网络这样的类型”

> ID：13277457
> 
> 赞同：5
> 
> 时间：2012-11-07T20:15:18.577
> 
> 标签：python, heroku, web, flask

我正在尝试在 Heroku 上使用 Python/Flask 部署我的第一个应用程序。我真的不知道自己在做什么，只是按照[https://devcenter.heroku.com/articles/python#prerequisites](https://devcenter.heroku.com/articles/python#prerequisites)上的教程进行操作。当我键入命令时`heroku ps:scale web=1`，我收到错误消息“ `No such type as web`”。我`Procfile`说`web: python scrabble_cheater.py`，我相信这是正确的。这是我的终端的日志：

```
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku status
=== Heroku Status
Development: No known issues at this time.
Production:  No known issues at this time.
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku config
=== enigmatic-mountain-1395 Config Vars
LANG:             en_US.UTF-8
LD_LIBRARY_PATH:  /app/.heroku/vendor/lib
LIBRARY_PATH:     /app/.heroku/vendor/lib
PATH:             /app/.heroku/venv/bin:/bin:/usr/local/bin:/usr/bin
PYTHONHASHSEED:   random
PYTHONHOME:       /app/.heroku/venv/
PYTHONPATH:       /app/
PYTHONUNBUFFERED: true
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku ps
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.154' to the list of known hosts.
Everything up-to-date
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku ps:scale web=1
Scaling web processes... failed
 !    No such type as web
(venv)jason-olsens-macbook-pro:scrabble paulnichols$ 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:30:05.250

Procfile 被错误地保存为 .txt 扩展名——一旦我删除了它工作的扩展名。

# php - 绕过allow_url_include = 0错误

> ID：13277460
> 
> 赞同：4
> 
> 时间：2012-11-07T20:15:25.300
> 
> 标签：php

我正在尝试包含来自 url 的文件，但是我得到了以下错误。

```
Warning: include(): http:// wrapper is disabled in the server configuration by allow_url_include=0 in /Applications/MAMP/htdocs/diningtime/testsite/salims/index1.php on line 58

Warning: include(http://localhost/diningtime/templates/100/index.php): failed to open stream: no suitable wrapper could be found in /Applications/MAMP/htdocs/diningtime/testsite/salims/index1.php on line 58

Warning: include(): Failed opening 'http://localhost/diningtime/templates/100/index.php' for inclusion (include_path='.:/Applications/MAMP/bin/php/php5.4.4/lib/php') in /Applications/MAMP/htdocs/diningtime/testsite/salims/index1.php on line 58
Test 
```

只是想知道周围是否有任何问题？

我的 PHP 包含代码是

```
<?php include "$location/index.php"; ?> 
```

感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T20:22:33.690

您在包含路径时使用了完整的 URL，它告诉 PHP 尝试执行 HTTP 请求以获取该文件。这**不是**你这样做的方式。除非`...100/index.php`输出 PHP 代码，否则您将获得一些 HTML 或任何内容作为包含结果，而不是文件中的 php 代码。请记住 - 您是通过 URL 获取的，这意味着它是一个 HTTP 请求，这意味着网络服务器将执行该脚本并提供其输出，而不仅仅是提供其源代码。

网络服务器无法判断该脚本的 HTTP 请求是来自同一服务器上另一个 PHP 脚本的包含调用。隐藏在俄罗斯的某个黑客想要窃取您的源代码，也可以很容易地请求该脚本。你希望你的源代码像这样对世界可见吗？

对于本地文件，您永远不应该使用完整的 url。它的效率非常低，并且不会做你想做的事。为什么不简单地拥有

```
include('/path/to/templates/100/index.php'); 
```

相反，这将是一个本地文件请求，不包括 HTTP 阶段？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T19:15:50.200

我有一个类似的问题。

考虑到“Marc B”的帖子，很明显使用绝对 URL 不是一个好主意，即使可以通过将 php.ini 编辑为“ficuscr”状态来实现。我不确定此解决方法是否适用于您的具体情况，因为它仍然需要根据每个页面在文件夹结构中的位置进行调整，但是如果像我一样，您的文件中有很多包含内容，它确实会使事情变得更简单网站。

```
<?php $root="../";?>
<?php include($root . 'folder-A/file_to_be_included_1.php');?>
<?php include($root . 'folder-A/file_to_be_included_2.php');?>
<?php include($root . 'folder-B/file_to_be_included_3.php');?>
<?php include($root . 'folder-B/file_to_be_included_4.php');?>
<?php include($root . 'folder-B/sub-folder/file_to_be_included_5.php');?> 
```

对我来说，这意味着如果我将页面移动到文件夹结构中的另一个位置，例如在其当前位置的子文件夹中，我需要做的就是修改`<?php $root="../";?>`为`<?php $root="../../";?>`例如

# objective-c - 我应该使用什么技术来自定义 iOS 控件、布局等？

> ID：13277462
> 
> 赞同：1
> 
> 时间：2012-11-07T20:15:34.997
> 
> 标签：objective-c, ios, html

我是 iOS 编程的新手，但我不明白的一件事。我有一个应用创意，我花钱请平面设计师让我做一个 UI 设计。他给我发了一个带有自定义设计控件、布局等的分层 psd。一切都是自定义设计的，而不是像我想要的那样使用标准的 iOS 外观控件。问题是这种自定义设计如何转换为iOS控件、布局等？

如果我考虑一个 Facebook iPad 应用程序或 Foursquare iPhone 应用程序，那只是“皮肤”的 iOS 标准控件，还是用 HTML5 编写并由 Objective-C 包装？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:22:45.017

我建议您将 Objective-C 用于本机应用程序。大多数控件通过允许您提供自己的图像来支持“蒙皮”。例如，[`UISlider`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)具有设置最小和最大图像、轨道图像和色调颜色以及拇指图像和色调颜色的方法。[Ray Wenderlich](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)经常在他的网站上提供值得一看的很棒的教程。

# iphone - 在 Xcode 中组织不同版本的 App

> ID：13277464
> 
> 赞同：1
> 
> 时间：2012-11-07T20:15:47.280
> 
> 标签：iphone, ios, xcode, cocoa-touch, dependency-management

我正在开发一个可以编辑图像的 iPhone 应用程序。最终，我想要一个允许用户简单地编辑他们的图像的小版本，以及一个允许图像社交网络的大版本。然后我想为 iPad 开发一个版本。

由于这是我第一次涉足商业移动开发，我对如何在 Xcode 中组织所有这些版本感到困惑。显然，每个版本之间都会共享文件重用。我想我的问题是，如何以最有效的方式组织这些单独的项目，以便它们共享文件，因此当我编辑共享的特定文件时，会对应用程序的每个版本进行更改？XCode 中是否有某种结构可以遵循？

是否有关于如何进行此操作的链接或文献？（不确定搜索它的正确术语）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:58:30.347

我建议将“精简”和“完整”项目分开但在同一个工作区中。这样，您可以将共享文件保存在一个项目中，而只需在另一个项目中使用对它们的共享引用。从任一项目对共享文件所做的所有更改都会影响两者。

至于 iPhone/iPad 版本，我还建议您将这些应用程序完全分开，但也要在同一个工作区中（以便它们可以共享代码）。如果您查看在单个项目（又名通用应用程序）中管理两个应用程序的建议，唯一真正的好处是客户可以购买一个应用程序并可以在任一设备上下载它，如果不是这样，有些人可能会感到不安可供他们使用。如果您的应用程序是免费的，请不要担心。

最后，关于工作区的警告，您需要在所有项目中唯一地命名您的文件。例如，如果您正在处理一个使用 MainViewController.h 子类的项目和另一个使用 MainViewController.h 子类的项目，则无论您在哪个项目中，都可能意外分配或编辑错误的项目，所以要小心. 如果使用唯一文件名是个问题，您可以绕过使用工作区，只需创建一个空项目将所有共享代码转储到其中，然后从那里添加对独立应用程序的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:14:50.637

记住：如果你发现自己重复/重复某件事，怀疑你做错了。

在这种情况下，您的 Xcode 项目将有 4 个目标。此设置的基本目标布局如下所示：

*   静态库（用于您的共享源文件）
*   资源包（用于您的共享资源）
*   完整应用（通用）
*   App-Lite（通用）

应用程序链接到共享静态库，并复制资源包。

自然，应用程序将具有不同的源/库/依赖项 - 那些进入应用程序目标（或其他一些依赖项）。

鉴于您的背景：计划花费大量时间（最初和您进行时）和耐心来弄清楚应该如何组合、使用和维护这些依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:29:58.147

如果您选择为不同的功能保留项目的各种副本，最终会令人困惑，因为在某些地方 XCode 为您提供一件事而不是另一件事。一个这样的地方是 - 当您从位置 X 打开一个项目时，它还会显示您上次打开后从位置 Y 的副本。结果，你可能会犯更多的错误。组织者是您可能犯错误的另一个地方。

XCode 是独立的，足以维护 iPhone 和 iPad 版本。如果您选择通用作为应用程序类型，您将拥有两个独立的故事板，它们可以成为一个项目的一部分。

至于各种功能，您不应该维护项目的单独副本。相反，推荐的方法是将所有功能保留在单个项目中，并让应用程序逻辑提供对各种功能的访问。

当您单击项目时，XCode 会在 Targets 部分下保留您的构建版本。要在您的开发周期中维护多个版本，请使用源代码存储库（git 或 svn）。

# html - 使用 Entypo @font-face 在 IE8 或更高版本中不起作用？

> ID：13277468
> 
> 赞同：6
> 
> 时间：2012-11-07T20:15:59.550
> 
> 标签：html, css, internet-explorer, font-face

我刚开始使用 Entypo font-face 来制作我的社交图标，但在 IE8 或更高版本中，它会将字体显示为一个空框。我不知道我的代码或他们的字体是否有问题。

```
@font-face {
font-family: 'entypo-social';
src: url('entypo-social.eot');
src: url('entypo-social.eot?#iefix') format('embedded-opentype'),
     url('entypo-social.woff') format('woff'),
     url('entypo-social.ttf') format('truetype'),
     url('entypo-social.svg#svgFontName') format('svg'); }

.social_font a{
font: 47px/20px 'entypo-social', Arial, sans-serif; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:29:12.870

Entypo 在 IE8 中不起作用。我刚刚在 IE8 中访问了他们的网站，他们的演示完全被破坏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:03:55.457

这是我一直用于字体的代码：

```
@font-face {
    font-family: 'ChunkFive';
    src: url('ChunkFive.eot');
    src: url('ChunkFive.eot?#iefix') format('embedded-opentype'),
    url('ChunkFive.woff') format('woff'),
    url('ChunkFive.ttf') format('truetype'),
    url('ChunkFive.svg#font') format('svg'); ;
    font-weight: normal;
    font-style: normal;
} 
```

你可以看看这个。 [http://css-tricks.com/snippets/css/using-font-face/](http://css-tricks.com/snippets/css/using-font-face/)

顺便说一句：font-face Do 在 IE8 中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T15:48:19.603

尝试使用[http://fontello.com/](http://fontello.com/) - 选择您需要的 entypo 图标并下载它们的包。这对我来说在 IE7+ 中有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T14:05:01.197

仔细检查您没有选择 IE 的**兼容性视图**。只是浪费了一个多小时没有检查，取消选择后它工作正常。

此外，如果您使用的是 html5shiv，请尝试将其放在包含字体的 css 文件之后。

# objective-c - 延迟加载 UIView 直到 mapkit 加载

> ID：13277469
> 
> 赞同：0
> 
> 时间：2012-11-07T20:16:13.473
> 
> 标签：objective-c, ios, location, mapkit, coordinates

我对 iOS 中的 MapKit 有疑问。我有 3 个屏幕。第一个屏幕（主视图），第二个屏幕（详细视图）和第三个屏幕（扩展第二个屏幕）。所以我单击主视图并转到详细视图。在详细视图中，我有一个地图套件。因此，当我第一次从 1->2 移动时，它运行得很快并且无法加载 mapkit。我得到了位置，但在世界地图视图中。但是我回到第一个屏幕并返回到第二个屏幕，然后它以放大模式显示我所在位置周围的区域，并带有一个蓝点。所以我的问题是，是否有一个函数可以设置放大然后加载我的 UIview。基本上，停止直到地图对用户位置进行三角测量，然后在完成后显示放大模式和视图的其余部分。？如果需要更多信息，请告诉我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:26:04.063

如果你找到了一种方法，你可能仍然不应该这样做。获取用户的位置可能需要相当长的时间，并且您不希望您的应用在此之前被卡住。您最多可以做的是加载地图视图并开始进行三角测量，但用另一个显示进度指示器的视图覆盖它>设置委托以在找到位置时获得回调，如果它对您的目的足够准确，请隐藏顶视图并显示隐藏在下面的地图。

# ms-access - 使用 VBA IE 自动化选择文本框

> ID：13277475
> 
> 赞同：1
> 
> 时间：2012-11-07T20:16:35.610
> 
> 标签：ms-access, vba

我正在使用 Access VBA 打开 Internet Explorer 并在网站上填写表格。此表单具有自动编号的 id，它经常更改，但下面的“_id”始终相同，我不确定是否或如何使用“_id”将值插入该字段

这是我到目前为止所拥有的，谢谢蒂姆，我不确定这个网站是如何运作的，因为我在这里相当新，但这是我到目前为止所拥有的，关于单选按钮的最后一个问题

```
Dim ie As InternetExplorer
Dim url As String
Dim htmlDoc As MSHTML.HTMLDocument ' html object lib
Dim htmlInputElemen As MSHTML.HTMLInputElement
Dim htmlElementCol As MSHTML.IHTMLElementCollection

url = www.abc.com
ie.navigate url
‘ this is for text box
Set htmlDoc = ie.Document
Set htmlElementCol = htmlDoc.getElementsByTagName("INPUT")
    For Each htmlInputElemen In htmlElementCol
        If htmlInputElemen.getAttribute("title") = "myTitle" Then
            htmlInputElemen.Value =  “myTitle”
'       ElseIf htmlInputElemen.getAttribute("title") = "myTitle2" Then
            htmlInputElemen.Value = “myTitle2”
        End If
   Next htmlInputElemen
‘ this is for combo box
Set htmlElementCol = htmlDoc.getElementsByTagName("select")
Dim htmlSelectElem As MSHTML.HTMLSelectElement
    For Each htmlSelectElem In htmlElementCol
        If htmlSelectElem.getAttribute("title") = "myComboBox" Then
            htmlSelectElem.Value = “myComboBoxValue”
        End If
    Next htmlSelectElem

‘now I have radio buttons which im not sure how to click using title, any ideas?
I tried this but no luck
Set htmlElementCol = htmlDoc.getElementsByTagName("span")
Dim htmlSpanElem As MSHTML.HTMLSpanElement
    For Each htmlSpanElem In htmlElementCol
        If htmlSpanElem.getAttribute("title") =  “ABC” Then
            htmlSpanElem.Click
        End If
    Next htmlSpanElem

<span class="ms-RadioText" title="ABC">
<input id="234sd87s89df">
<label for="234sd87s89df ">ABC</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:13:58.160

```
Dim inputs, el

Set inputs = document.getElementsByTagName("input")

For Each el In inputs
    If el.getAttribute("_id") = "R_Destination" Then
        el.Value = "myValue"
        Exit For
    End If
Next el 
```

编辑：这是重构为函数的相同代码

```
Function GetElement(doc as object, tagName As String, attrName As String, _
                                      attrValue As String) As Object
    Dim rv As Object
    Dim elements, element

    Set inputs = doc.getElementsByTagName(tagName)

    For Each element In elements
        If element.getAttribute(attrName) = attrValue Then
            Set rv = element
            Exit For
        End If
    Next element

    Set GetElement = rv

End Function 
```

用法：

```
Dim el
Set el = GetElement(document, "input", "_id", "R_Destination")
if not el is nothing then el.value = "myValue" 
```

# obfuscation - ProGuard 使用 -keeppackagenames 混淆包名

> ID：13277479
> 
> 赞同：1
> 
> 时间：2012-11-07T20:16:44.917
> 
> 标签：obfuscation, proguard

我正在尝试将 com.google.gson.Gson 混淆为 com.google.a.Gson。

我使用`-keeppackagenames !com.google.gson.**`但它似乎不起作用。我的 mappings.txt 仍然包括：

`com.google.gson.Gson -> com.google.gson.Gson`.

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:29:49.037

您的配置中的某些 -keep 选项会保留整个类名 com.google.gson.Gson。这始终包括包名称。没有选项可以保留类名，但会混淆它们的包名；它似乎不是很有用。

# java - 使用 GridLayout 将按钮添加到框架

> ID：13277482
> 
> 赞同：0
> 
> 时间：2012-11-07T20:16:48.753
> 
> 标签：java, swing, layout

我正在做一个我有点坚持的任务。我有这些要求：

*   1 帧与 BorderLayout
*   面板上有 2 个按钮
*   1 带有 GridLayout 的面板将两个按钮放在 SOUTH 区域
*   1 FileChooser 在新框架中
*   1 个位于 CENTRAL 区域的 TextArea
*   1 标签告诉程序在 NORTH 地区做什么

我将从我的临时文件夹中的两个文件中获取输入，并将它们读入屏幕中间的文本字段中。

我不明白为什么两个按钮都不会出现。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.*;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class P_Supplemental_11 extends JFrame {

JPanel jpnl1 = new JPanel();
JButton jbtReadFile1 = new JButton("Get Student Names");
JButton jbtReadFile2 = new JButton("Get Student Grades");
JTextField jtxtFilePath = new JTextField();
JLabel jlblDesc = new JLabel("Enter the file name here:");
JTextArea jtxtAfileContents = new JTextArea();

P_Supplemental_11() {
    this.setLayout(new BorderLayout(5, 10));
    jpnl1.setLayout(new GridLayout(2, 2));
    jpnl1.add(jlblDesc);
    jpnl1.add(jtxtFilePath);
    add(jpnl1, BorderLayout.NORTH);
    add(jtxtAfileContents, BorderLayout.CENTER);

    add(jbtReadFile1, BorderLayout.SOUTH);
    jbtReadFile1.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent evt) {

         jbtReadFileActionPerformed(evt);
     }

    });

    add(jbtReadFile2, BorderLayout.SOUTH);
    jbtReadFile2.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent evt) {

         jbtReadFileActionPerformed2(evt);
     }

    });
  } // end constructor

 private void jbtReadFileActionPerformed(ActionEvent evt) {
    try {
        File inFile = new File("c:/temp/studentnames.txt");
        Scanner input = new Scanner(inFile);
        String fileContents = "";
        while(input.hasNext()) {
            fileContents+= input.nextLine() + "\n";
        } // end while

        jtxtAfileContents.setText(fileContents);
        input.close();

    } // end action method for jbtReadFile button
    catch (FileNotFoundException ex) {
    Logger.getLogger(P_Supplemental_11.class.getName()).log(Level.SEVERE, null,            ex);
    }
}

private void jbtReadFileActionPerformed2(ActionEvent evt) {
    try {
        File inFile = new File("c:/temp/studentscores.txt");
        Scanner input = new Scanner(inFile);
        String fileContents = "";
        while(input.hasNext()) {
            fileContents+= input.nextLine() + "\n";
        } // end while
        input.close();
        jtxtAfileContents.setText(fileContents);

    } // end action method for jbtReadFile button
    catch (FileNotFoundException ex) {
        Logger.getLogger(P_Supplemental_11.class.getName()).log(Level.SEVERE, null,    
 ex);
    }
}

 public static void main(String[] args) {
    P_Supplemental_11 frame = new P_Supplemental_11();
    frame.setTitle("P_Supplemenetal_10");
    frame.setSize(410, 520);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:22:03.620

您没有使用分配中指定位置的`GridLayout`面板`BorderLayout.SOUTH`。

2 个按钮不能在 a 中共享相同的位置，`BorderLayout`并且*两个按钮同时*可见：

```
add(jbtReadFile1, BorderLayout.SOUTH);

add(jbtReadFile2, BorderLayout.SOUTH); 
```

# regex - 在没有任何空格正则表达式的字符串中检测 URL

> ID：13277485
> 
> 赞同：1
> 
> 时间：2012-11-07T20:17:06.973
> 
> 标签：regex, url, detection

所以我知道捕获任何 URL 的想法是一项非常困难的任务，而这不是我想要做的。我想找到一段正则表达式，它会以以下形式捕获网址

> [http://something.xx.yy](http://something.xx.yy)
> 
> [http://www.something.xxx](http://www.something.xxx)
> 
> www.something.xx.yy

在一个包含许多其他文本且没有空格的字符串中，例如

> hellopleasevisitwww.something.xxthankyou

我已经尽力自己检测到类似的东西，但它毫无结果。任何帮助都会很棒。以下是我尝试修改的一些表达式以满足这些要求

```
.*\\(?\\b(http://|www[.])[-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|].*
\\b\\w*\\(?\\b(http://|www[.])[-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|]\\w*\\b
\\(?\\b(http://|www[.])[-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|] 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:31:21.800

如果真的像你说的那么简单...

```
(http://(www\\.)?|www\\.)[^.]+\\.(\\w{3}|\\w{2}\\.\\w{2}) 
```

您尝试的所有表达式都有`\\b`一个[单词边界](https://stackoverflow.com/questions/1324676/what-is-a-word-boundary-in-regexes)，不幸的是您的字符串没有单词边界。

看到它[在行动](http://refiddle.com/gc9)

# windows - 使用 Windows 设置防止 Windows 注销（或关闭）

> ID：13277486
> 
> 赞同：0
> 
> 时间：2012-11-07T20:17:06.920
> 
> 标签：windows, settings, administrator, group-policy, logoff

我是一名系统管理员，对双启动 windows 和 mac 机器的计算机实验室具有完全的管理访问权限。我正在寻找一种方法来防止用户注销或关闭计算机（直到我的 kbox / radmind / bash 脚本在一天结束时运行。）

即使您建议实施 Active Directory/kiosk 模式/其他更具管理性的解决方案，也请不要这样做。许多用户需要管理员访问计算机才能在机器上安装他们自己的东西（尽管是临时的）。我在一天结束时远程重新映像所有机器，我对这个过程充满信心。

具有讽刺意味的是，通过授予用户管理权限，理论上他们可以撤消我的更改并找到隐藏的注销按钮，或者使用 cmd 关闭计算机。别担心。大多数（如果不是全部）用户都会太懒惰。

那么如何正确隐藏通常位于开始菜单底部的注销按钮呢？以及如何将其隐藏在任务管理器中？

[我已尝试编辑此处](http://www.techpavan.com/2008/08/08/how-to-disable-enable-shutdown-logoff-start-menu/ "这里。")指定的组策略 (gpedit.msc) 。它不起作用/我不确定要明确启用哪些选项来删除按钮。

使用软件是一种选择，但如果程序阻止关闭或注销，Windows 足够聪明，可以强制注销覆盖。这对我来说很糟糕。

非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:33:52.540

有一些组和本地策略可用于从“开始”菜单和 Ctrl-Alt-Del 屏幕中删除注销。

# mod-rewrite - 目录结构和 Mod_Rewrite

> ID：13277487
> 
> 赞同：1
> 
> 时间：2012-11-07T20:17:10.657
> 
> 标签：mod-rewrite, directory, hyperlink, structure, relative-path

我根据每个函数一个子目录的想法设计了一个 php/mysql/query，所以我的目录结构如下所示：

公共_html\

```
 ..users\ (all user related files are in this folder)
 ..events\ (all event related files are in this folder)
 ..groups\ (all group related files are in this folder)
 ..layouts\ (global header, global footer, and global navigation include files are in here) 
```

用户、事件或组文件夹中的任何页面都包含页眉、页脚和导航文件，因此它们都保留了一个主题。因此，导航文件的所有链接都设置为 ../functionfolder/file.php"，因为您通常位于其中一个函数文件夹中，所以它可以正常工作。

但是我忘记了 public_html 中的索引文件，当我从该目录（不是子文件夹）中包含我的页眉、页脚和导航时，“../”的一切都搞砸了。

我已经创建了一个单独的导航文件，它将使高级目录中的文件工作，但我意识到我所有的图片和脚本包含都搞砸了。（创建了一个没有“..”的单独导航包含）

我认为可能是一个解决方案：不要使用 index.php 文件主目录，而是创建一个名为 home 的目录并将索引文件放在那里，这样一切都会顺利进行。（public_html/home/index.php vs public_html/index.php）（不确定如何与域一起工作）

我还查看了绝对链接和相对链接，但它们最终在我的计算机上工作然后上传它们变得一团糟？

任何人都有可以提供帮助的想法？

更新：这样的东西有用吗？

```
# Turn on rewrites.
RewriteEngine on

# Only apply to URLs on this domain
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$

# Only apply to URLs that aren't already under folder.
RewriteCond %{REQUEST_URI} !^/folder/

# Don't apply to URLs that go to existing files or folders.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all those to insert /folder.
RewriteRule ^(.*)$ /folder/$1

# Also redirect the root folder.
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteRule ^(/)?$ folder/index.php [L] 
```

# java - 从文本框中打开文件而不重新加载页面

> ID：13277489
> 
> 赞同：0
> 
> 时间：2012-11-07T20:17:14.657
> 
> 标签：java, jquery, html

我过去所拥有的是一些 java，它在我们的网络上创建了一组服务器。在 Intranet 页面上，用户将登录，然后开始在文本框中键入内容，该文本框使用 java 和数组在键入时给出有效站点的列表。然后他们将选择他们想要的服务器（或完成输入）并单击“开始 RDP”按钮，该按钮会将表单发布到同一页面（检查有效性）并开始下载 .rdp 文件以供他们运行显然启动 mstsc.exe。现在我想知道是否可以使用 jquery 或其他东西来动态运行 perl 脚本来检查表单是否有有效请求，然后从 \\someserver\ 之类的链接开始下载（供用户运行）RDP 文件somehiddenshare$\servername.rdp。我使用的表格如下，但我很欣赏这会改变：

```
<html lang="en">
 <head>
  <script language="javascript" type="text/javascript" src="../js/actb.js"></script>
  <script language="javascript" type="text/javascript" src="../js/common.js"></script>
  <script>
    var sitearray=new Array('server1','20.20.20.20','server2','20.20.20.21','server3','20.20.20.22');
  </script>
 </head>
 <body>
<!-- OTHER CONTENT IN HERE -->
  <form action="same_page.pl" method="post" name="rdp_start">
  <input type="hidden" value="start_rdp">
  <input type="text" size="25" name="start_rdp" id="srv" class="GreyLB8">
  <input type="submit" value="Start RDP">
  <script>
   var obj = actb(document.getElementById('srv'),sitearray);
  </script>
  </form>
<!-- OTHER CONTENT IN HERE -->
 </body>
</html> 
```

显然该页面有更多内容，这是我不想更改的内容，因为用户可能正在更新另一个表单，但需要先检查服务器。目前打开 RDP 基本上需要重新加载页面。

提前感谢您的任何建议。E.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:50:03.440

您只需将表单标签的 action 属性更改为指向 rdp 文件。通过 javaScript 动态添加 target="_new"，因此它被发送到一个新选项卡，一旦浏览器识别出它是下载，该选项卡就会关闭。

# javascript - 如何使用导航菜单按钮（第一个、上一个、下一个、最后一个）对数组进行交互

> ID：13277492
> 
> 赞同：0
> 
> 时间：2012-11-07T20:17:25.073
> 
> 标签：javascript, arrays, button, loops

好吧，还有一个问题。自从我不久前开始学习 javascript 以来，我几乎痴迷于尝试新事物！它是这样的：

假设我有一个字符串数组，我想使用带有按钮 FIRST、PREVIOUS、NEXT、LAST 的导航菜单对其进行迭代。

看看这段代码：

```
var thearray = ["article1", "article2", "article3"];

var thebody = document.getElementsByTagName('body')[0];
var divcontainer = document.createElement("div");
var divpage = document.createElement("div");

function generatepage(article) {
    var paragraph = document.createElement("p");
    var name = document.createTextNode(thearray[article]);
    paragraph.appendChild(name);
    divpage.appendChild(paragraph);
}

divcontainer.appendChild(divpage);
thebody.appendChild(divcontainer);

generatepage(0); // that would be for the first article 
```

我还发现这`generatepage(thearray.length -1)`将是上一篇文章的调用，所以我解决了两个按钮（在生成新内容之前，我会用它擦除它，`innerHTML`但我想不出该怎么做的是 PREVIOUS 和 NEXT 按钮......

你对我应该如何开始工作 PREVIOUS 和 NEXT 有什么建议吗？

我附上一个[JSFiddle](http://jsfiddle.net/ASyA9/)

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:28:27.717

您可以将活动页面保存在函数外部的变量中：

```
var page = 0; 
```

然后您不需要将任何页面带入`generatepage()`：

```
function generatepage() {
    var paragraph = document.createElement("p");
    var name = document.createTextNode(thearray[page]);
    paragraph.appendChild(name);
    divpage.appendChild(paragraph);
} 
```

现在您可以从函数外部控制页面：

```
var next = function() {
    if ( page < page.length-1 ) { page++; }
}

var prev = function() {
    if ( page ) { page--; }
} 
```

所以要显示第一页：

```
page = 0;
generatepage() 
```

接下来：

```
next();
generatepage() 
```

等等......当然还有其他方法，但这可能会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:35:39.033

您可以在函数范围之外保存一个变量来记忆当前文章，当您将 Eventlisteners 添加到可以调用下一个和上一个项目的按钮时

但是您应该以某种方式将 div 的内容替换为下一个而不是附加它（我对操作 dom 元素一无所知）

你可以尝试这样的事情：

```
var thearray = ["article1", "article2", "article3"];

var thebody = document.getElementsByTagName('body')[0];
var divcontainer = document.createElement("div");
var divpage = document.createElement("div");
var currentarticle
function generatepage(article) {
    if(thearray[article]) {
    currentarticle = article
    var paragraph = document.createElement("p");
    var name = document.createTextNode(thearray[article]);
    paragraph.appendChild(name);
    divpage.innerHTML= paragraph.innerHTML
}else {
    return false
    }
}

divcontainer.appendChild(divpage);
thebody.appendChild(divcontainer);

generatepage(0); // that would be for the first article

document.getElementById("next").addEventListener("click",function() {
    generatepage(currentarticle + 1)
        });
            document.getElementById("previous").addEventListener("click",function() {
    generatepage(currentarticle - 1)
});
document.getElementById("last").addEventListener("click",function() {
    generatepage(thearray.length - 1)
});

document.getElementById("first").addEventListener("click",function() {
    generatepage(0)
});
​ 
```

这是[小提琴](http://jsfiddle.net/wSTdP/)

# android - build.phonegap.com 版本的安卓应用

> ID：13277493
> 
> 赞同：0
> 
> 时间：2012-11-07T20:17:26.343
> 
> 标签：android, cordova

我创建了要检查手机位置的 Adroid 应用程序。我启动了模拟器安装应用程序，每次我想检查它都失败了。模拟器是问题（因为它不是真正的手机）还是我没有正确执行。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
                <title>Hello World</title>
        <script type="text/javascript" src="cordova-2.1.0.js"></script>
        <script text="text/javascript">
        function startUp(){
            document.getElementById("H1").innerHTML = "Checking your location...";
           document.addEventListener("deviceready", onDeviceReady, false)
        }
        function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('location');
        element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                            'Longitude: '          + position.coords.longitude             + '<br />' +
                            'Altitude: '           + position.coords.altitude              + '<br />';
                            document.getElementById("H1").innerHTML = "";
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        document.getElementById("H1").innerHTML = "Fail to check your location.";
    }

        </script>
    </head>
    <body style="margin:0px;" onload="startUp()" bgcolor="#000">
        <div class="app" style="background-color:#4D4D4D">
            <font color="#FF9900" size="2"><h1 id="H1" style="font-family:courier new;"></h1></font>
            <p id="location"></p>
        </div>

    </body>
</html> 
```

HTML5 文件和 config.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.park.manager"
        versionCode="10" 
        version   = "0.1.9">
    <name>ParkingManager</name>
    <description>
        A system, which manages parking side areas.
    </description>
    <author href="" email="">
        Parking Side Manager Team
    </author>
    <preference name="phonegap-version" value="2.1.0" />
    <preference name="orientation" value="landscape" />
    <preference name="target-device" value="universal" />
    <preference name="fullscreen" value="true" />
    <preference name="android-installLocation" value="auto" />
    <icon src="icon.png" />
    <gap:splash src="splash.png" />
    <feature name="http://api.phonegap.com/1.0/geolocation"/>
    <feature name="http://api.phonegap.com/1.0/network"/>

</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:24:50.403

上次我使用 PhoneGap 时，清单文件中已经有正确的权限。

您很可能需要为模拟器提供模拟数据。 [http://developer.android.com/guide/topics/location/strategies.html#MockData](http://developer.android.com/guide/topics/location/strategies.html#MockData)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:14:37.123

它是模拟器，你需要一部真正的手机，因为模拟器很痛苦，因为你知道如何才能正常工作。你的 Javascript 和 html 都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:22:36.727

确保在清单 XML 中添加粗略和精细位置的权限。

电话差距有其好处，但它不会解决您的一些主要问题，例如必须手动执行清单。如果您在知道如何添加这些权限之前使用 java 制作了您的应用程序。如果不使用检查如何做到这一点。[权限](http://developer.android.com/guide/topics/security/permissions.html)

除了你的cordova geolaction调用是正确的之外，我之前从他们的例子中使用过它。

# php - 一个 crontab 文件中的多个 Cron 作业

> ID：13277497
> 
> 赞同：6
> 
> 时间：2012-11-07T20:17:49.513
> 
> 标签：php, ubuntu, cron, crontab

我想实现两个具有不同执行时间的 cronjobs。一项 cron 作业用于发送电子邮件，第二项 cron 作业用于验证我的应用程序订阅。

我写一个 crontab 文件并写入两个 cronjob，如下所示：

```
2 * * * * path to mailCronjob mail.php
20 * * * * path to check my application's subscriptions sub.php 
```

问题是第一个 cronjob 工作正常。邮件可以正常发送，但第二个 cronjob 无法正常工作。我尝试手动运行第二份工作，它也工作正常。

我正在使用命令将 cronjob 设置为：

```
crontab crontab_file 
```

当我发出命令时`crontab -l` ，它还会在命令行中显示两个 cronjob。

我想问一下，我是否在这里遗漏了什么，或者我应该怎么做才能运行这些 cronjobs。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:28:02.833

事实：您可以根据需要从单个 crontab 文件中运行任意数量的 cron 作业。

事实：您还可以作为*不同的用户运行**不同的*作业，每个用户都有自己的 crontab 文件。

 *建议：

1）只需调试您的第二份工作有什么问题。

2）可以是路径，也可以是权限；它很可能是环境（“cron”的环境可能与命令行中同一用户的环境不同）。

PS：

也试试这个：

*   [如何模拟环境 cron 执行脚本？](https://stackoverflow.com/questions/2135478/how-to-simulate-the-environment-cron-executes-a-script-with)

*   [调试 crontab 作业](https://stackoverflow.com/questions/4883069/debugging-crontab)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:31:45.157

检查拥有用户的电子邮件并查看是否已向其发送错误报告。

如果您需要成为某个用户并让该用户的环境将您的调用更改为

```
su - -c "/path/to/sub.php" SubScriptUser 
```

如果您的脚本仅适用于某个目录，请使用

```
cd /path/to/ && ./sub.php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-03T11:03:53.273

您需要在配置文件的末尾添加一个空行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-23T05:31:27.693

我记得同样的问题。出于某种原因，我不得不在我的第二个 cron 作业之后按**enter 。**即使在第一个 cron 作业中，如果它是唯一的作业，也需要 CR/LF ( **enter** )。光标需要在第二行（如果有一个 cron 作业）...光标需要在第三行，如果有两个 cron 作业。我想，需要完全读取文件来解释 cron 作业命令。我只是分享这个，因为如果你不这样做，只会执行第一个作业，并且完全跳过第二个作业，除非在第二个作业结束时按下 enter。最好的问候和欢呼……测试一下，让我们知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T20:23:18.577

我从来没有在一个 cron-tab 文件中执行 2 个实际的 cronjob，而是让一个 cronjob 每 15 分钟执行一次并查询数据库或查看配置文件有哪些任务要执行，也许这个概念对你有帮助。*

# wpf - 数据类型为 UIElement 的数据绑定

> ID：13277500
> 
> 赞同：0
> 
> 时间：2012-11-07T20:18:23.580
> 
> 标签：wpf, data-binding, virtualization, uielement

我`DataGrid`绑定到一个集合视图模型。元素视图模型有一个名为 UI 的属性，类型为`UIElement`。场景是我希望生成`UIElement`的被绑定。

因此，例如（虚构的玩具示例），假设`UIElement`是`TextBlock`带有文本 Foo 的 a，那么我希望带有带有文本 Foo 的`DataGrid`行`TextBlock`。

我想要这个的原因在这里并不重要。

那么如何将数据绑定到作为数据绑定内容注入的类型`UIElement`的属性？`UIElement`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:47:09.720

好吧，我猜你可以继续做。

这段小代码几乎可以满足您的要求，我相信..

**XAML：**

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ContentControl Content="{Binding UI}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

**代码隐藏：**

```
public partial class MainWindow : Window
{
    public List<Model> Items { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        var textblock = new TextBlock();
        textblock.Text = "I'm a textblock";

        var button = new Button();
        button.Content = "I'm a button";

        var combobox = new ComboBox();
        combobox.Items.Add("Item1");
        combobox.Items.Add("Item2");

        this.Items = new List<Model>(new[] { 
            new Model(textblock),
            new Model(button), 
            new Model(combobox)
        });

        this.DataContext = this;    
    }

    public class Model
    {
        public UIElement UI { get; set; }

        public Model(UIElement ui)
        {
            this.UI = ui;
        }
    }
} 
```

# c - 从随机分布的粒子到规则网格的通信优化并行化

> ID：13277505
> 
> 赞同：3
> 
> 时间：2012-11-07T20:18:31.837
> 
> 标签：c, multithreading, parallel-processing, thread-safety, openmp

我正在并行化我的粒子单元代码，我用它来模拟地球内的 2D 和 3D 变形。使用 OpenMP 可以轻松并行化代码的几个例程，并且可以很好地扩展。但是，我在处理从粒子到网格单元的插值的代码的关键部分中遇到了问题。粒子在每次迭代中四处移动（根据速度场）。许多计算在规则的、不变形的网格上执行是最有效的。因此，每次迭代都涉及从“随机”分布的粒子到网格单元的通信。

该问题可以用以下简化的一维代码来说明：

```
//EXPLANATION OF VARIABLES (all previously allocated and initialized, 1D arrays)
//double *markerval; // Size Nm. Particle values. Are to be interpolated to the grid
//double *grid; // Size Ng=Nm/100 Grid values. 
//uint *markerpos; // Size Nm. Position of particles relative to grid (each particle
// knows what grid cell it belongs to) possible values are 0,1,...Ng-1

//#pragma omp parallel for schedule(static) private(e)
for (e=0; e<Nm; e++) {
    //#pragma omp atomic
    grid[markerpos[e]]+=markerval[e];
} 
```

在最坏的情况下，粒子位置是随机的，但通常，粒子在内存中彼此相邻，在空间中也彼此相邻，因此也在网格内存中。

如何有效地并行化此过程？多个粒子映射到同一个网格单元，因此如果上述循环直接并行化，则存在竞争条件和缓存交换的非零机会。使更新原子化可以防止竞争条件，但会使代码比顺序情况慢得多。

我还尝试为每个线程制作一个网格值的私有副本，然后将它们添加起来。然而，这可能需要在代码中使用太多内存，并且对于这个例子，它并没有很好地随着线程数量而扩展（我不确定其中的原因）。

第三种选择可能是从网格映射到粒子，然后循环通过网格索引而不是粒子索引。但是，我担心这会涉及很多，并且需要对代码进行重大更改，而且我不确定它会有多大帮助，因为它还需要使用计算成本也很高的排序例程。

有没有人有过这个或类似问题的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:24:07.723

一个选项可以是在线程上手动映射迭代：

```
#pragma omp parallel shared(Nm,Ng,markerval,markerpos,grid)
{
  int nthreads = omp_get_num_threads();
  int rank     = omp_get_thread_num();
  int factor   = Ng/nthreads;

  for (int e = 0; e < Nm; e++) {
    int pos = markerpos[e];
    if ( (pos/factor)%nthreads == rank )
      grid[pos]+=markerval[e];
  }
} 
```

几点说明：

1.  循环的迭代`for`不在线程之间共享。相反**，每个线程**都会执行所有迭代。
2.  `for`循环内的条件决定**哪个线程**将更新数组`pos`的位置。`grid`这个位置**只属于一个线程**，因此`atomic`不需要保护。
3.  该公式`(pos/factor)%nthreads`只是一个简单的启发式。任何`pos`返回该范围内的值的函数`0,...,nthreads-1`实际上都可以替换为该表达式，而不会影响最终结果的有效性（因此，如果您有更好的选择，请随时更改它）。请注意，此功能选择不当可能会导致*负载平衡*问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:42:19.993

我还使用 OpenMP 并行化了分子动态算法。首先，您必须分析算法**瓶颈**（*例如，*内存限制和 CPU 限制）。这样你就知道哪里需要改进了。

最初，我的 MD 受内存限制，因此我`2x`只需将数据布局从结构数组 (AOS) 更改为数组结构 (SOA)（**由于空间局部性**），就可以提高速度。对于只适合 RAM 的输入，我还应用了一种阻塞技术。原始算法计算每个粒子之间的力对，如下所示：

```
for(int particleI = 0; i < SIZE ; i++)
 for(int particleJ = 0; j < SIZE; j++)
     calculate_force_between(i,j); 
```

基本上，使用块技术，我们通过粒子块来聚合力计算。例如，计算前 10 个粒子之间的所有力比，然后计算接下来的 10 个，依此类推。

这种**块技术**的使用促进了对**时间局部性**的更好利用，因为使用这种方法可以在更短的时间内实现对相同粒子的更多计算。因此，降低了我们尝试访问的值不再在缓存中的可能性。

现在我有一个 MD CPU 绑定，我可以尝试使用 来改进它`multi-threads`，但首先，您需要：

1.  验证您的算法在哪里花费了大部分执行时间；
2.  找出可以并行完成的任务并确定它们的 **粒度**（检查其并行化是否合理）；
3.  **负载均衡**，保证线程间工作负载均衡；
4.  尽量减少同步的使用。

由于负载平衡问题，我在扩展我的 MD 时遇到了问题。一些线程比其他线程做更多的工作。解决方案？

您可以尝试来自 openMP的**动态 for 。**请注意，在 OpenMP 中，您可以指定要分配给线程的工作块。但是，在定义块时必须小心！使用动态*for*，块太小会导致同步开销，太大会导致负载平衡问题。

我也有同步开销的问题。我使用的是关键算法，但算法无法扩展。我用更细粒度的同步替换了这个关键，即锁，每个粒子一个。我对这种方法进行了一些改进。

作为最后一种方法（处理同步开销），我使用数据冗余。每个粒子完成它的工作并将结果保存在一个私有的临时数据结构中。最后，所有线程都降低了它们的值。在所有版本中，这是给我最好结果的版本。

我能够在 CPU 中实现良好的加速，但与我在 GPU 版本中实现的速度相比没有任何意义。

根据您提供的信息，我会做这样的事情：

```
omp_lock_t locks [grid_size]; // create an array of locks
int g;
#pragma omp parallel for schedule(static)
for (e=0; e<Nm; e++)
{
    g = markerpos[e];

    omp_set_lock(&locks[g]);
    grid[g]+=markerval[e];
    omp_unset_lock(&locks[g]);
} 
```

从，我理解的问题是你必须使用`atomic`来确保多个线程不会同时访问同一个抓握位置。作为一种可能的解决方案，您可以创建一组锁，并且每次线程必须访问网格的一个位置时，它都会请求并获取与该位置关联的锁。另一种解决方案可以是：

```
double grid_thread[grid_size][N_threads]; // each thread have a grid
// initialize the grid_threads to zeros

#pragma omp parallel
{
    int idT = omp_get_thread_num();
    int sum;
    #pragma omp parallel for schedule(static)
    for (e=0; e<Nm; e++)
        grid_thread[markerpos[e]][idT]+=markerval[e]; // each thread compute in their 
                                                     // position
    for(int j = 0; j <Nm; j++)
    { 
        sum = 0;
        #pragma omp for reduction(+:sum) 
        for (i = 0; i < idT; i++)                   // Store the result from all
           sum += grid_thread[j][i];                // threads for grid position j

         #pragma barrier                            // Ensure mutual exclusion

         #pragma master
         grid[j] +=sum;                             // thread master save the result  
                                                    // original grid
         #pragma barrier                            // Ensure mutual exclusion
      }
   }
} 
```

# tree - 打印没有 findall 的列表

> ID：13277511
> 
> 赞同：0
> 
> 时间：2012-11-07T20:18:49.970
> 
> 标签：tree, prolog, prolog-findall

我需要在 prolog 中执行一个程序，该程序打印出给定 N 级树的所有节点的列表（它必须是一个列表）。我只是无法将节点放入列表中。有人告诉我使用 findall 功能，但它仍然不起作用。我不想更改谓词 levelNodes 但没有 findall 的解决方案会很好。

```
domains
element=integer
treetype=tree(element,treetype,treetype);nil
list=element*
predicates
create_tree(element,treetype)
insert_left(treetype,treetype,treetype)
insert_right(treetype,treetype,treetype)
levelNode(treetype,element)
levelNodes(element,treetype,element)
goal
create_tree(10,Ten),
create_tree(11,Eleven),
create_tree(3,Three),
create_tree(5,Five),
create_tree(8,Eight),
create_tree(4,Four),
create_tree(1,One),

insert_left(Ten,Eleven,Eleven1),
insert_right(Three,Eleven1,Eleven2),
insert_left(Five,Eight,Eight1),
insert_right(Four,Eight1,Eight2),
insert_left(Eleven2,One,One1),
insert_right(Eight2,One1,FinalTree),
levelNode(FinalTree,1),
nl.
clauses
levelNode(tree(I,L,R),N):-
    findall(X,levelNodes(X,tree(I,L,R),N),O),
    write(O).
levelNodes(X,tree(I,_,_),0):-
    X=I,
    !.
levelNodes(X,tree(I,L,R),N):-
    N>0,
    N2=N-1,
    levelNodes(X,L,N2),
    levelNodes(X,R,N2). 
create_tree(A,tree(A,nil,nil)).

insert_left(X,tree(A,_,B),tree(A,X,B)).

insert_right(X,tree(A,B,_),tree(A,B,X)). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:20:35.130

如果我改写作业，我会得到：

*   开始递归访问，向下传递正确初始化的Level，
*   如果 Level 为 0 -> 停止递归（'返回'数据，我使用 head' 最后一个参数），
*   递归前递减Level，并cons返回的数据。

这是一个草图，包含递归调用和 consing。

```
levelNode(tree(N,_,_), 0, [N]).
levelNode(tree(_,L,R), Level, Ns) :-
    Level > 0,
    Sub is Level - 1, % maybe you'll need Sub=Level-1
    % recurse left, ... 
```

**OT**请注意，Prolog 中的递归数据结构非常容易描述，并且是问题建模中的重要组成部分。考虑而不是

```
create_tree(10,Ten),
create_tree(11,Eleven),
create_tree(3,Three),
create_tree(5,Five),
create_tree(8,Eight),
create_tree(4,Four),
create_tree(1,One),

insert_left(Ten,Eleven,Eleven1),
insert_right(Three,Eleven1,Eleven2),
insert_left(Five,Eight,Eight1),
insert_right(Four,Eight1,Eight2),
insert_left(Eleven2,One,One1),
insert_right(Eight2,One1,FinalTree),
levelNode(FinalTree, 1, Nodes),
... 
```

在这样相当难以阅读的代码之后，我们有了`FinalTree = tree(1, tree(11, tree(10, nil, nil), tree(3, nil, nil)), tree(8, tree(5, nil, nil), tree(4, nil, nil)))`.

切换到其他（等效）表示形式使其更具可读性，您不觉得吗？

```
...
Tree = t(1, t(11, t(10, t, t), t(3, t, t)), t(8, t(5, t, t), t(4, t, t))),
levelNode(Tree, 1, Nodes),
... 
```

**编辑**代码是

```
levelNode(t(N,_,_), 0, [N]).
levelNode(t(_,L,R), Level, Ns) :-
    Level > 0,
    Sub is Level - 1, % maybe you'll need Sub=Level-1
    levelNode(L, Sub, A),
    levelNode(R, Sub, B),
    append(A, B, Ns). 
```

测试：

```
?- T=t(1,t(2,t,t),t(3,t,t)),levelNode(T,1,L).
T = t(1, t(2, t, t), t(3, t, t)),
L = [2, 3] ;
false. 
```

# ruby-on-rails - 尝试运行 Rails 服务器时，它在 Rake 上崩溃

> ID：13277514
> 
> 赞同：0
> 
> 时间：2012-11-07T20:19:00.220
> 
> 标签：ruby-on-rails, ruby, plugins, rake

我刚刚将应用程序 Rails 版本从 3.0.9 升级到 3.1.2，并且还从 ruby​​ 1.8.7 切换到了 1.9.2。

在更新后尝试运行服务器时，我收到以下错误消息：

```
rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/dsl_definition.rb:65:in `directory': wrong number of arguments (0 for 1) (ArgumentError)
    from /Users/Big_Bird/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/dsl_definition.rb:165:in `directory'
    from /Users/Big_Bird/apps/Example/vendor/plugins/calendar_date_select/init.rb:12:in `block (2 levels) in <class:Plugin>'
    from /Users/Big_Bird/apps/Example/vendor/plugins/calendar_date_select/init.rb:11:in `each'
    from /Users/Big_Bird/apps/Example/vendor/plugins/calendar_date_select/init.rb:11:in `block in <class:Plugin>' 
```

现在插件发生错误的片段是：

```
%w[calendar_date_select includes_helper].each { |file| 
  require File.join( File.dirname(__FILE__), "lib",file) 
}

ActionView::Helpers::FormHelper.send(:include, CalendarDateSelect::FormHelper)
ActionView::Base.send(:include, CalendarDateSelect::FormHelper)
ActionView::Base.send(:include, CalendarDateSelect::IncludesHelper)

# install files
unless File.exists?(Rails.root + '/public/javascripts/calendar_date_select/calendar_date_select.js')
  ['/public', '/public/javascripts/calendar_date_select', '/public/stylesheets/calendar_date_select', '/public/images/calendar_date_select', '/public/javascripts/calendar_date_select/locale'].each do |dir|
    source = File.join(directory,dir)
    dest = Rails.root + dir
    FileUtils.mkdir_p(dest)
    FileUtils.cp(Dir.glob(source+'/*.*'), dest)
  end
end 
```

我不太确定问题出在哪里，因为插件中列出的所有目录都是正确的，升级时我不得不从使用 RAILS_ROOT 切换到 Rails.root ，但仅此而已。

我将不胜感激有关如何解决此问题的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:26:00.653

看起来问题出在这一行：

```
source = File.join(directory,dir) 
```

您是否期望`directory`成为字符串路径？如果是这样，我看不到它在任何地方定义。

# c# - 用字符串中的两个单引号替换所有单引号

> ID：13277517
> 
> 赞同：4
> 
> 时间：2012-11-07T20:19:08.973
> 
> 标签：c#, string

我正在尝试使用 c# 从数据库中读取值。查询字符串包含多个单引号 - 例如：Esca'pes'（正在从文本文件中读取查询字符串）

所以，我想在形成 SQL 查询之前用两个单引号替换所有单引号。我的代码如下：

```
if (name.Contains('\''))
{
    name = name.Replace('\'','\''');  
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T20:22:09.253

使用字符串，而不是字符文字。

```
name = name.Replace("'", "''"); 
```

但是，听起来您将 SQL 字符串连接在一起。由于存在 SQL 注入的风险，这在现代应用程序设计中是一个巨大的“**不要”规则。**请改用 SQL 参数。每个现代 DBMS 平台都支持它们，包括带有 SQL Server 和 MySQL 的 ADO.NET，甚至 Access 也支持它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T20:22:23.327

`name = name.Replace("'","''");`

在不相关的说明中，您正在连接字符串以在 SQL 中使用？尝试使用参数，这就是它们的用途。你可能让它变得比它需要的更难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T20:21:43.047

由于要将单个字符替换为两个字符，因此需要使用 Replace 的 String 重载

```
if (name.Contains('\''))
{
    name = name.Replace("'","''");  
} 
```

（注意：单引号不需要像在字符表示法中那样在字符串中转义。）

# c# - asp:repeater 显示每个类别中的项目数

> ID：13277526
> 
> 赞同：0
> 
> 时间：2012-11-07T20:19:54.797
> 
> 标签：c#, asp.net, asprepeater

我有一个简单的中继器，可以获取“小部件”的“组”主页列出了所有组：

```
<ItemTemplate>
    <tr>
        <td width="60" class="center"><%# DataBinder.Eval(Container.DataItem, "Number") %></td>
        <td><a href="Stories.aspx?ProjectID=<%# DataBinder.Eval(Container.DataItem, "ProjectId") %>"><%# DataBinder.Eval(Container.DataItem, "Name") %></a></td>
        <td><%# DataBinder.Eval(Container.DataItem, "Description") %></td>
    </tr>
</ItemTemplate> 
```

**代码背后**

```
private void LoadForm()
{
    using (MarketingWebContentEntities context = new MarketingWebContentEntities())
    {
        rptGroup.DataSource = (from groups in context.URLGroup
                               select groups).ToList();
        rptGroup.DataBind();
    }
} 
```

我想在中继器中显示每个“组”中的“小部件”数量。我知道我需要在“小部件”表上运行查询以查看该列表中有多少项目。我只是不确定如何在转发器标记中添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:40:24.000

如评论中所述，您可以为此使用 ItemDataBound 事件。

这个例子是用 VB 编写的——我写 C# 已经有一段时间了，不过会给你一个想法。我也没有检查它的语法，它更像是一个让你启动和运行的例子。

在您`<ItemTemplate>`添加自己时，比如说，一个`ASP:Label`. 在这种情况下，它被称为`myLabel`

因此，在您后面的代码中，创建一个处理`ItemDataBound`事件的私有方法。

```
Protected Sub myRepeater_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles myRepeater.ItemDataBound

    If (e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem) Then

        Dim uG As URLGroup = CType(e.Item.DataItem, URLGroup)
        '' you now have the group for that one item
        '' you should now be able to get additional information needed.
        '' you can also get the myLabel from this item 
        dim lbl as Label = CType(e.Item.FindControl("myLabel", Label)
        '' and set its text to whatever you need
        lbl.Text = MyCounter

    End If

End Sub 
```

希望这会让你上路。

这里也是它的[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-3)文档的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:50:08.637

**我使用了 OnItemDataBount 事件**

```
<asp:Repeater runat="server" ID="rptGroup" OnItemDataBound="rptDestinationCount_ItemDataBound">
    <HeaderTemplate>
        <table id="tblUrlGroup" class="table table-bordered table-striped table-condensed">
            <thead>
                <tr>
                    <th>Name</th>
                    <th style="width:20px;">Count</th>
                    <th style="width:35px;">Add</th>
                </tr>
            </thead>
            <tbody>
    </HeaderTemplate>
    <ItemTemplate>
            <tr>
                <td><a href="ManageGroup.aspx?Id=<%# DataBinder.Eval(Container.DataItem, "URLGroupRowID") %>"><i class="icon-wrench" rel="tooltip" title="Edit Group Name"></i></a> <a href="DestinationGroup.aspx?Id=<%# DataBinder.Eval(Container.DataItem, "URLGroupRowID") %>"><%# DataBinder.Eval(Container.DataItem, "Name") %></a></td>
                <td class="center"><asp:HiddenField runat="server" ID="hidURLGroupRowID" Value='<%# DataBinder.Eval(Container.DataItem, "URLGroupRowID") %>' /><asp:Label runat="server" ID="lblCount"></asp:Label></td>
                <td class="center">                                
                    <a href="DestinationGroup.aspx?Id=<%# DataBinder.Eval(Container.DataItem, "URLGroupRowID") %>"><i class="icon-plus" rel="tooltip" title="Manage Destination URLs"></i></a>
                </td>
            </tr>
    </ItemTemplate>
    <FooterTemplate>
          </tbody>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

在功能上，我确保我只查看中继器项目和项目模板。隐藏字段使用数据源的 ID 设置。这允许我运行查询并将 lblCount.Text 设置为目标计数。

**代码背后**

```
protected void rptDestinationCount_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        using (MarketingWebContentEntities context = new MarketingWebContentEntities())
        {
            Label lblCount = (Label)e.Item.FindControl("lblCount");
            HiddenField hidURLGroupRowID = (HiddenField)e.Item.FindControl("hidURLGroupRowID");
            int groupRowID = Convert.ToInt32(hidURLGroupRowID.Value);

            var destination = (from dest in context.URLDestination
                               where dest.URLGroup.URLGroupRowID == groupRowID
                               select dest).ToList();

            lblCount.Text = destination.Count.ToString();

        }
    }
} 
```

# iphone - iPhone上引导响应式设计中的页面宽度

> ID：13277531
> 
> 赞同：6
> 
> 时间：2012-11-07T20:20:24.237
> 
> 标签：iphone, css, twitter-bootstrap, responsive-design

我有一个在各种浏览器上运行良好的引导响应式设计，但页面宽度在 iPhone 上是有限的。我已经添加了视口元标记：

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

它似乎没有帮助。该网站在这里：[http](http://themenuengine.com) ://themenuengine.com 。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T20:36:36.617

第 780 行附近`bootstrap-responsive.css`：

```
@media (max-width: 767px) {
  body {
    padding-right: 20px;
    padding-left: 20px;
  } 
```

覆盖该填充，`0`它将是全角的。

例如：

```
@media (max-width: 767px) {
  body {
    padding-right: 0 !important;
    padding-left: 0 !important;
  }
} 
```

# lambda - TypeScript 和 Knockout 绑定到“this”问题 - 需要 lambda 函数？

> ID：13277537
> 
> 赞同：34
> 
> 时间：2012-11-07T20:20:34.310
> 
> 标签：lambda, knockout.js, typescript

我一直在使用 TypeScript 和 KnockoutJS 创建一个 htmlHelper 函数来编辑电子邮件列表。

电子邮件列表是一个名为**emails**的 Knockout ObservableArray ，我对每个项目都有一个链接来删除它们。这是 HTML 片段：

```
<ul data-bind="foreach: emails" >
    <li>
        <a href="#" data-bind="click: $parent.deleteItem">Delete</a>
        &nbsp;<span data-bind="text: $data"></span>
    </li>
</ul> 
```

删除链接绑定到**$parent.deleteItem**这是视图模型中的一个方法：

```
// remove item
public deleteItem(emailToDelete: string) {
    // remove item from list
    this.emails.remove(emailToDelete);
} 
```

在执行 deleteItem 方法之前，这一切都有效。调用此方法时的“this”是数组中的项，而不是视图模型。因此 this.emails 是一个空引用并且失败。

我知道 TypeScript 支持 Lambda 语法，但我找不到正确的编写方法（那里的例子很少）。

或者我可以采取不同的方法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-08T08:45:22.527

您可以通过在类构造函数中声明方法主体来获得“this”的正确闭包

```
class VM {
    public deleteItem: (emailToDelete: string) => void;

    constructor() {
        this.deleteItem = (emailToDelete: string) => {
            // 'this' will be pointing to 'this' from constructor
            // no matter from where this method will be called
            this.emails.remove(emailToDelete);
        }
    }        
} 
```

更新：

似乎从 Typescript 0.9.1 版开始，您可以通过使用 lambda 字段初始值设定项来获得相同的结果：

```
class VM {
    public deleteItem = (emailToDelete: string) => {
        this.emails.remove(emailToDelete);
    }        
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-23T15:57:31.463

戴手套的人！只需像这样绑定 $parent ：

```
<a href="#" data-bind="click: $parent.deleteItem.bind($parent)">Delete</a> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-08T08:44:57.643

```
declare class Email { }
declare class ObservableArray {
    remove(any): void;
}

class MyViewModel {
    public emails : ObservableArray;

    constructor() {
        Rebind(this);
    }

    public deleteItem(emailToDelete: Email) {
        this.emails.remove(emailToDelete);
    }
}

function Rebind(obj : any)
{
    var prototype = <Object>obj.constructor.prototype;
    for (var name in prototype) {
        if (!obj.hasOwnProperty(name)
                && typeof prototype[name] === "function") {
            var method = <Function>prototype[name];
            obj[name] = method.bind(obj);
        }
    }
} 
```

您可能需要一个 polyfill `Function.bind()`：

```
// Polyfill for Function.bind(). Slightly modified version of
// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility
if (typeof Function.prototype.bind !== "function") {
    Function.prototype.bind = function(oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = <any[]> Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function() {},
            fBound = function() {
                return fToBind.apply(this instanceof fNOP && oThis ? this: oThis, aArgs.concat());
            };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-11T01:08:09.633

我的最终解决方案是一个基类，它将所有原型函数重新绑定到构造函数上。很像 Markus Jarderot 的解决方案。

```
class BaseClass {
    constructor() {
        for (var i in this) {
            if (!this.hasOwnProperty(i) && typeof (this[i]) === 'function' && i != 'constructor') {
                this[i] = this[i].bind(this);
            }
        }
    }
} 
```

好处：

*   所有子类都被迫调用超级构造函数，这是我想要的行为。
*   执行重新绑定代码时，对象中只有原型函数（变量稍后添加）。
*   它避免了在每个对象上创建大函数。调用 bind 时，每个对象只会创建一个小的代理函数。
*   通过不在构造函数上放置函数来更好地组织类代码。
*   任何函数都可以用作回调，从事件调用函数时无需更改代码。
*   您没有绑定函数两次的风险。
*   最好只绑定一次函数，而不是每次执行点击/事件绑定时在视图中进行。

PS：
你仍然需要绑定 polyfill。
我正在使用打字机 0.9.5

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-02T13:04:25.803

添加我的 2 美分，还有一种肮脏的方式，它利用由 Typescript 编译器创建的变量 _this 来保持对 this 的引用：

```
public deleteItem(emailToDelete: string) {
    var that = eval('_this');
    // remove item from list
    that.emails.remove(emailToDelete); // remove? in JS,  really? 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-09T13:31:08.073

我受到`bind`答案的启发并想出了这个，我认为它更容易阅读。

`<a href="#" data-bind="click: function () {$parent.deleteItem()}">Delete</a>`

将该方法包装在 lambda/匿名函数中。不要忘记 ()。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-09T01:49:50.687

使用这样的数据绑定：

```
data-bind="click:$parent.deleteItem.bind($parent)" 
```

赋值`this`给`that`如下图

```
public deleteItem(itemToDelete) 
{
    var that = this;
    // remove item from list
    that.emails.remove(itemToDelete); 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T22:48:10.610

虽然我更喜欢 Markus 的解决方案，但这是我之前用来解决此问题的方法：

```
public fixThis(_this, func) {
    return function () {
        return _this[func].apply(_this, arguments);
    };
}

<a href="#" data-bind="click: fixThis($parent, 'deleteItem')">Delete</a> 
```

请注意，可以通过在方法名称之后添加其他参数来将它们传递给方法：

```
fixThis($parent, 'deleteItem', arg1, arg2); 
```

# google-app-engine - 可以在 Mountain Lion 中使用 GAE over LAN 测试网站吗？

> ID：13277538
> 
> 赞同：3
> 
> 时间：2012-11-07T20:20:37.463
> 
> 标签：google-app-engine, osx-mountain-lion

我正在使用 Google App Engine 托管我的网站。这是一个非常简单的网站，但我在画布元素上绘制了一些 javascript，我正试图在我的 iPhone 上对其进行测试。我还想尝试为移动设备重新设计 CSS。但是，我无法`http://localhost:8080/`从手机访问（这是我在本地运行应用程序时 GoogleAppEngineLauncher 吐出的 url）。这似乎很明显。

不幸的是，似乎山狮已经从系统偏好中删除了网络共享偏好。我发现至少有[两个](http://reviews.cnet.com/8301-13727_7-57481978-263/how-to-enable-web-sharing-in-os-x-mountain-lion/ "网络") [不同的](http://www.codepotato.co.uk/2012/07/25/enabling-localhost-on-os-x-mountain-lion/ "密码土豆")站点具有重新激活网络共享的“解决方案”（Apache 服务器？），但它们似乎都不能与 Google App Engine 结合使用......我也尝试了这个[首选项窗格](http://clickontyler.com/blog/2012/02/web-sharing-mountain-lion/ "Web 共享首选项窗格")，它*也*没有不工作。我不断收到“Safari 无法打开页面，因为它无法连接到服务器。”

对不起，如果这是一个愚蠢的问题，我是这个东西的相对菜鸟。此外，我在这里看到很多关于 SO 的问题似乎相关，但我认为我仍然太陌生，无法理解它们是*如何相关的。*这里是否有一个额外的步骤是我缺少的特定于 GAE 的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T21:18:21.333

这与您的操作系统无关。默认情况下，App Engine 开发服务器绑定到环回接口，使其只能由您的计算机访问。如果您想从其他机器访问它，您需要将`--address=0.0.0.0`标志传递给开发服务器 - 您可以在启动器的首选项窗格中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T07:15:24.847

截至 2013 年 3 月 - “地址”参数已重命名为“主机” - （至少对于应用程序引擎的 Python 版本）

*   [--address=0.0.0.0 参数在升级到 App Engine 1.7.6 后不起作用](https://stackoverflow.com/questions/15513064/address-0-0-0-0-argument-not-working-after-upgrading-to-app-engine-1-7-6)

# javascript - “达到 10 次 $digest() 迭代。中止！” 由于使用 angularjs 过滤

> ID：13277542
> 
> 赞同：3
> 
> 时间：2012-11-07T20:20:58.937
> 
> 标签：javascript, filter, angularjs

看看以下内容：

[https://dl.dropbox.com/u/4571/musicopeTypescript/musicopeTypescript/index.html](https://dl.dropbox.com/u/4571/musicopeTypescript/musicopeTypescript/index.html)

当您在输入框中键入“a”时，您会收到`10 $digest() iterations reached. Aborting!`错误消息。

你有什么想法，为什么会这样？

**编辑：**这是产生问题的代码：

[http://embed.plnkr.co/PTkvPc](http://embed.plnkr.co/PTkvPc)

**编辑：**看起来这是 Song.clone 的问题。如果我用 angular.copy 替换它，那么它可以工作。任何人都可以解释一下吗？

这是工作版本：

[http://plnkr.co/edit/8Jk1pR?p=preview](http://plnkr.co/edit/8Jk1pR?p=preview)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:36:04.253

要了解为什么会发生这种情况，最好了解 Angular[如何运行 runtime](http://docs.angularjs.org/guide/concepts#runtime)。基本上有观察者不断返回不同的值，所以它不断地通过 $digest 循环，然后阻止它无限循环。从他们的[$digest() 文档中](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24digest)：

> 处理当前范围及其子范围的所有观察者。因为观察者的侦听器可以更改模型，所以 $digest() 会不断调用观察者，直到没有更多的侦听器被触发。这意味着有可能进入无限循环。此函数将抛出“超出最大迭代限制”。如果迭代次数超过 10。

在不知道您的代码在做什么的情况下，很难给出具体的解决方案来说明为什么会发生这种情况，但这应该回答您关于何时引发此错误的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T06:06:19.690

您的过滤器是否以某种方式修改了原始数据？这是唯一看起来会导致无限消化循环的具体事情。

**编辑**：关于不同的克隆功能会导致不同的行为。

我怀疑一个正在做深度克隆，另一个没有，在一种情况下，AngularJS 正在检查对象是否相等，而您的过滤器每次都在创建新对象，从而导致了问题。

我建议分解其中的一些逻辑，并可能将其中的一些移动到控制器或其他过滤器中。缩小数组范围的过滤器应该只这样做，并且只返回对原始对象的引用。然后您可以编写其他过滤器来操作标签等。

也为阿爸+1。:P

# php - 应该填充时清空 NSArray

> ID：13277548
> 
> 赞同：0
> 
> 时间：2012-11-07T20:21:16.293
> 
> 标签：php, ios, xml, xcode, nsarray

我一直在尝试使用 xml 在 iOS 上的 nsarray 中获取 mysql 条目。我从我的日志中得到一个“空”数组（尽管它说我正在从我的网站下载信息），现在相信它来自下面的 php，没有产生正确的属性，因此什么也没发送。但是，我认为我做得对。**我做错了什么，它产生了一个“空”的输出。**xcode 日志中的实际输出是索引 0 处的 {}。我的原始问题可以在此处找到，但不是必需的：[尽管有 mysql 条目，但 NSArray 在 iOS 中为空](https://stackoverflow.com/questions/13254934/nsarray-is-null-in-ios-despite-mysql-entry)

```
<?php

$login = "hello";
$dbh = new PDO('(censored)');
$sql = "SELECT oneam FROM login WHERE username = '$login'";

$q = $dbh->prepare( $sql );

$doc = new DOMDocument();
$r = $doc->createElement( "oneam" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) {
    $e = $doc->createElement( "location" );

    $e->setAttribute( 'its', $row['oneam']);

    $r->appendChild( $e );

}
print $doc->saveXML();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:48:11.557

对不起大家。结果我忘了把我的 $params 放入数组中。去工作吧。感谢 glaz 虽然寻找！

# sql - SQL Server 排除除数字以外的任何内容

> ID：13277549
> 
> 赞同：1
> 
> 时间：2012-11-07T20:21:16.660
> 
> 标签：sql, sql-server

是他们排除以非数字开头的查询中提取的结果的一种方法。排除以字母开头的 anytXing。

我试过

```
 Where a.value like '0%'
       And a.value  like '1%'
       And a.value like '2%' 
         .......3-9 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:24:32.630

你可以使用这样的东西：

```
select a.value
from yourtable a
where a.value like '[0-9]%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/94b07/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:25:33.227

您可以使用正则表达式：

```
SELECT * FROM MyTable WHERE Column LIKE '[0-9]%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:26:01.370

如果您将`And`s 更改为`Or`s，您的解决方案将起作用。您还可以使用 sql-server 的模式匹配语法来缩短查询：

```
like '[0-9]%' 
```

# php - 查询不适用于 WHERE 并且仅适用于 WHERE

> ID：13277554
> 
> 赞同：0
> 
> 时间：2012-11-07T20:21:39.850
> 
> 标签：php, mysql

标题作品的单一查询，但存在不止一首带有标题的歌曲。所以包含艺术家的新查询不起作用。尽管对歌曲标题的精确搜索是正确的，并且可以使用单个查询。

我究竟做错了什么

```
 //$checkTitle = mysql_query("SELECT * from lyrics WHERE title = '$querytitle'");
            $checkTitle = mysql_query("SELECT * FROM lyrics WHERE artist = '$queryArtist' AND title = '$queryTitle'");
            $result = mysql_fetch_array($checkTitle);
            if (!$checkTitle) {
                die('Query Failed');
            } 
            if ($result['title'] == $querytitle)  {
            ?><div id='message'>Song Titled Already Exist <?php echo $cleanTitle; ?> by Artist : <? echo $artist; ?></div><br><br><?
            } else {
            ?><div id="message">Song Titled : <?php echo $cleanTitle; ?> has been added to the database! - <a href="<?php echo $siteURL; ?>artist.php?aid=<?php echo $artist; ?>" target="_Blank">View Artist Page</a></div><br /><br /> <?php echo $queryArtist; ?><?
            print_r($result); // the data returned from the query
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:32:34.553

我看到你从来没有从你发布的另一个问题中弄清楚。尝试使用此查询：

```
SELECT * FROM lyrics WHERE artist = '$artist' AND title = '$queryTitle' 
```

然后，如果您只期望一个结果，您可以使用类似这样的东西来利用它：

```
$query = "SELECT * FROM lyrics WHERE artist = '$artist' AND title = '$queryTitle'";
$checkTitle = mysql_query($query);
// assuming you have one result:
$row = mysql_fetch_array($checkTitle)
if ($row['title'] == $querytitle) {
    echo "<div id='message'>Song Titled Already Exist $cleanTitle by Artist : $cleanTitle</div><br><br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:33:11.990

正如评论所提到的，这是非常低效的，因为数据库可以更快、更简单地做到这一点：

```
SELECT * from lyrics WHERE artist = '$artist' AND title = '$queryTitle' 
```

您可以通过确保您对（艺术家、标题）有一个索引来进一步改进这一点。

此外，请确保您在运行此查询之前和之前都保护自己免受`mysql_real_escape_string`SQL[注入](http://en.wikipedia.org/wiki/SQL_injection)。`$artist``$queryTitle`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:31:26.160

```
SELECT * from lyrics WHERE artist = '$artist' AND title = '$title' 
```

.. 或类似的东西..

# python - elif 语句出现语法错误

> ID：13277564
> 
> 赞同：-2
> 
> 时间：2012-11-07T20:22:04.513
> 
> 标签：python

我正在尝试设置菜单。在菜单中，用户可以选择要采用的选项，然后从列表中添加或删除项目。我的 elif 语句中的语法有问题。它说存在语法错误并突出显示第二个 elif。我不确定问题是什么。

```
choice = int(input('Enter your choice: '))
if choice !=0:
    display_menu()
elif choice == 1:
    add_value = float(input('Add value: ')
elif choice == 2:
    delete_value_by_value = float(input('Which value would you like to delete? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:23:28.663

您忘记了第五行的右括号：

```
add_value = float(input('Add value: '))
#                                     ^ 
```

此外，第七行没有正确终止。你要：

```
delete_value_by_value = float(input('Which value would you like to delete?'))
#                                                                         ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:24:08.380

```
delete_value_by_value = float(input('Which value would you like to delete?'))
                                                                 missing--^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T21:13:13.547

请记住，Python 只能告诉您它在哪里停止理解您的程序，它不能告诉您实际上在哪里犯了错误。

在这种情况下，您在前一行留下了括号。当括号打开时，Python 允许表达式跨越多行，因此它将`elif`作为括号表达式的一部分。`elif`在表达式中无效，因此 Python 会在此处引发错误。但是“真正的”错误（即与您的预期含义相符的错误）是缺少括号。

很高兴您没有在 1980 年代使用旧的 UCSD Pascal 进行编程。每个程序都必须以句号结尾。如果没有，您会收到一条错误消息，指向程序中的某个随机位置，让您感到困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:48:05.983

我建议寻找一个好的 IDE，它可以突出语法以最大程度地减少简单的错误和拼写错误。我个人喜欢 Eclipse 和 PyDev。

# jquery - 淡入/淡出，固定/固定标题

> ID：13277566
> 
> 赞同：1
> 
> 时间：2012-11-07T20:22:12.327
> 
> 标签：jquery, css, fadein, fadeout, fadeto

好的，我知道我似乎已经问过这个问题了，@adeneo 之前已经回答并赞赏了这个问题，但是我脑子里嗡嗡作响，因为我无法让它发挥作用。

我试图在向下滚动时使我的“固定”定位标题“fadeTo”0.5 不透明度，并在用户滚动回顶部时淡入完全不透明（“不透明度”：1.0）？

这是我所拥有的：

```
$(window).on('scroll', function() {
if ($(this).scrollTop() > 50) {
$("#header").fadeTo(400, 1);
}else{
$("#header").fadeTo(400, 0.5);

}
}); 
```

目前，使用此代码似乎仅在向下滚动时使其“fadeTo”0.5 不透明度，但当滚动回顶部时，它不会淡化回完全不透明（不透明度：1.0）。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:45:04.827

问题之一是**每次**用户滚动页面时您都在执行 400 毫秒的动画，这会生成一个非常长的效果队列，这些效果没有可见效果，例如`1`每次`scroll`事件触发时动画到不透明度`scrollTop > 50`，添加一个很长的不可见效果队列，直到出现淡出效果。

一种简单的补救方法是[`.stop(true)`](http://api.jquery.com/stop/)在执行之前使用`fadeTo`，这样元素效果队列将始终在执行给定动画之前被清除。

```
$(window).on('scroll', function() {
    if ($(this).scrollTop() > 50) {
        $("#header").stop(true).fadeTo(400, 0.5);
    } else {
        $("#header").stop(true).fadeTo(400, 1);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/VAMUk/)

但即便如此，您仍然会不必要地执行动画，所以我建议使用[`.data`](http://api.jquery.com/data/)来存储淡入淡出的状态并仅在必要时进行动画处理：

```
$(window).on('scroll', function() {
    var header = $("#header");
    if ($(this).scrollTop() > 50) {
        if (!header.data('faded')) header.data('faded', 1).stop(true).fadeTo(400, 0.5);
    } else if (header.data('faded')) {
        header.data('faded', 0).stop(true).fadeTo(400, 1);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/m5nwJ/1/)

附言。我已经反转了您的不透明度值，因为您的问题代码的逻辑与您想要的行为不符。

# java - 来自 Java 接口的隐式“@copydoc”

> ID：13277567
> 
> 赞同：2
> 
> 时间：2012-11-07T20:22:12.360
> 
> 标签：java, doxygen

我有一个实现接口并覆盖所述接口的方法的类。我在 doxygen 中打开了 INHERIT_DOCS 选项，但在生成的输出中没有收到文档。

一个明确的“@copydoc”确实创建了文档，但这真的不是我想要的行为。

我发现[这](https://stackoverflow.com/questions/7844047/doxygen-how-to-inherit-documents-from-overriden-methods-in-a-generic-interface)可能会有所帮助，但它似乎只指用泛型类型继承的类。有人有什么想法吗？

提前致谢！

以下是我当前的 doxygen 配置供参考：

```
#---------------------------------------------------------------------------
# Project related configuration options
#---------------------------------------------------------------------------
DOXYFILE_ENCODING      = UTF-8
PROJECT_NAME           = Raven
PROJECT_NUMBER         = 1.1
PROJECT_BRIEF          = "Next-gen Web Platform"
PROJECT_LOGO           = 
OUTPUT_DIRECTORY       = /home/myles/workspace/webapp/build/docs
CREATE_SUBDIRS         = YES
OUTPUT_LANGUAGE        = English
BRIEF_MEMBER_DESC      = YES
REPEAT_BRIEF           = YES
ABBREVIATE_BRIEF       = "The $name class" \
                         "The $name widget" \
                         "The $name file" \
                         is \
                         provides \
                         specifies \
                         contains \
                         represents \
                         a \
                         an \
                         the
ALWAYS_DETAILED_SEC    = NO
INLINE_INHERITED_MEMB  = NO
FULL_PATH_NAMES        = YES
STRIP_FROM_PATH        = 
STRIP_FROM_INC_PATH    = 
SHORT_NAMES            = NO
JAVADOC_AUTOBRIEF      = NO
QT_AUTOBRIEF           = NO
MULTILINE_CPP_IS_BRIEF = NO
INHERIT_DOCS           = YES
SEPARATE_MEMBER_PAGES  = NO
TAB_SIZE               = 8
ALIASES                = 
OPTIMIZE_OUTPUT_FOR_C  = NO
OPTIMIZE_OUTPUT_JAVA   = YES
OPTIMIZE_FOR_FORTRAN   = NO
OPTIMIZE_OUTPUT_VHDL   = NO
EXTENSION_MAPPING      = 
BUILTIN_STL_SUPPORT    = NO
CPP_CLI_SUPPORT        = NO
SIP_SUPPORT            = NO
IDL_PROPERTY_SUPPORT   = YES
DISTRIBUTE_GROUP_DOC   = NO
SUBGROUPING            = YES
INLINE_GROUPED_CLASSES = NO
TYPEDEF_HIDES_STRUCT   = NO
SYMBOL_CACHE_SIZE      = 0

#---------------------------------------------------------------------------
# Build related configuration options
#---------------------------------------------------------------------------
EXTRACT_ALL            = YES
EXTRACT_PRIVATE        = NO
EXTRACT_STATIC         = NO
EXTRACT_LOCAL_CLASSES  = YES
EXTRACT_LOCAL_METHODS  = NO
EXTRACT_ANON_NSPACES   = NO
HIDE_UNDOC_MEMBERS     = NO
HIDE_UNDOC_CLASSES     = NO
HIDE_FRIEND_COMPOUNDS  = NO
HIDE_IN_BODY_DOCS      = NO
INTERNAL_DOCS          = NO
CASE_SENSE_NAMES       = NO
HIDE_SCOPE_NAMES       = NO
SHOW_INCLUDE_FILES     = YES
FORCE_LOCAL_INCLUDES   = NO
INLINE_INFO            = YES
SORT_MEMBER_DOCS       = YES
SORT_BRIEF_DOCS        = NO
SORT_MEMBERS_CTORS_1ST = NO
SORT_GROUP_NAMES       = NO
SORT_BY_SCOPE_NAME     = NO
STRICT_PROTO_MATCHING  = NO
GENERATE_TODOLIST      = YES
GENERATE_TESTLIST      = YES
GENERATE_BUGLIST       = YES
GENERATE_DEPRECATEDLIST= YES
ENABLED_SECTIONS       = 
MAX_INITIALIZER_LINES  = 30
SHOW_USED_FILES        = YES
SHOW_DIRECTORIES       = NO
SHOW_FILES             = YES
SHOW_NAMESPACES        = YES
FILE_VERSION_FILTER    = 
LAYOUT_FILE            = 

#---------------------------------------------------------------------------
# configuration options related to warning and progress messages
#---------------------------------------------------------------------------
QUIET                  = NO
WARNINGS               = YES
WARN_IF_UNDOCUMENTED   = YES
WARN_IF_DOC_ERROR      = YES
WARN_NO_PARAMDOC       = NO
WARN_FORMAT            = "$file:$line: $text"
WARN_LOGFILE           = 

#---------------------------------------------------------------------------
# configuration options related to the input files
#---------------------------------------------------------------------------
INPUT                  = /home/myles/workspace/webapp/src
INPUT_ENCODING         = UTF-8
FILE_PATTERNS          = *.java \
                         *.dox \
                         *.py
RECURSIVE              = YES
EXCLUDE                = 
EXCLUDE_SYMLINKS       = NO
EXCLUDE_PATTERNS       = 
EXCLUDE_SYMBOLS        = 
EXAMPLE_PATH           = 
EXAMPLE_PATTERNS       = *
EXAMPLE_RECURSIVE      = NO
IMAGE_PATH             = 
INPUT_FILTER           = 
FILTER_PATTERNS        = 
FILTER_SOURCE_FILES    = NO
FILTER_SOURCE_PATTERNS = 

#---------------------------------------------------------------------------
# configuration options related to source browsing
#---------------------------------------------------------------------------
SOURCE_BROWSER         = YES
INLINE_SOURCES         = NO
STRIP_CODE_COMMENTS    = YES
REFERENCED_BY_RELATION = YES
REFERENCES_RELATION    = YES
REFERENCES_LINK_SOURCE = YES
USE_HTAGS              = NO
VERBATIM_HEADERS       = YES

#---------------------------------------------------------------------------
# configuration options related to the alphabetical class index
#---------------------------------------------------------------------------
ALPHABETICAL_INDEX     = YES
COLS_IN_ALPHA_INDEX    = 5
IGNORE_PREFIX          = 

#---------------------------------------------------------------------------
# configuration options related to the HTML output
#---------------------------------------------------------------------------
GENERATE_HTML          = YES
HTML_OUTPUT            = html
HTML_FILE_EXTENSION    = .html
HTML_HEADER            = 
HTML_FOOTER            = 
HTML_STYLESHEET        = 
HTML_EXTRA_FILES       = 
HTML_COLORSTYLE_HUE    = 220
HTML_COLORSTYLE_SAT    = 100
HTML_COLORSTYLE_GAMMA  = 80
HTML_TIMESTAMP         = YES
HTML_ALIGN_MEMBERS     = YES
HTML_DYNAMIC_SECTIONS  = NO
GENERATE_DOCSET        = NO
DOCSET_FEEDNAME        = "Doxygen generated docs"
DOCSET_BUNDLE_ID       = org.doxygen.Project
DOCSET_PUBLISHER_ID    = org.doxygen.Publisher
DOCSET_PUBLISHER_NAME  = Publisher
GENERATE_HTMLHELP      = NO
CHM_FILE               = 
HHC_LOCATION           = 
GENERATE_CHI           = NO
CHM_INDEX_ENCODING     = 
BINARY_TOC             = NO
TOC_EXPAND             = NO
GENERATE_QHP           = NO
QCH_FILE               = 
QHP_NAMESPACE          = org.doxygen.Project
QHP_VIRTUAL_FOLDER     = doc
QHP_CUST_FILTER_NAME   = 
QHP_CUST_FILTER_ATTRS  = 
QHP_SECT_FILTER_ATTRS  = 
QHG_LOCATION           = 
GENERATE_ECLIPSEHELP   = NO
ECLIPSE_DOC_ID         = org.doxygen.Project
DISABLE_INDEX          = NO
ENUM_VALUES_PER_LINE   = 4
GENERATE_TREEVIEW      = YES
USE_INLINE_TREES       = NO
TREEVIEW_WIDTH         = 250
EXT_LINKS_IN_WINDOW    = NO
FORMULA_FONTSIZE       = 10
FORMULA_TRANSPARENT    = YES
USE_MATHJAX            = NO
MATHJAX_RELPATH        = http://www.mathjax.org/mathjax
SEARCHENGINE           = YES
SERVER_BASED_SEARCH    = NO

#---------------------------------------------------------------------------
# configuration options related to the LaTeX output
#---------------------------------------------------------------------------
GENERATE_LATEX         = NO
LATEX_OUTPUT           = latex
LATEX_CMD_NAME         = latex
MAKEINDEX_CMD_NAME     = makeindex
COMPACT_LATEX          = NO
PAPER_TYPE             = a4
EXTRA_PACKAGES         = 
LATEX_HEADER           = 
LATEX_FOOTER           = 
PDF_HYPERLINKS         = YES
USE_PDFLATEX           = YES
LATEX_BATCHMODE        = NO
LATEX_HIDE_INDICES     = NO
LATEX_SOURCE_CODE      = NO

#---------------------------------------------------------------------------
# configuration options related to the RTF output
#---------------------------------------------------------------------------
GENERATE_RTF           = NO
RTF_OUTPUT             = rtf
COMPACT_RTF            = NO
RTF_HYPERLINKS         = NO
RTF_STYLESHEET_FILE    = 
RTF_EXTENSIONS_FILE    = 

#---------------------------------------------------------------------------
# configuration options related to the man page output
#---------------------------------------------------------------------------
GENERATE_MAN           = NO
MAN_OUTPUT             = man
MAN_EXTENSION          = .3
MAN_LINKS              = NO

#---------------------------------------------------------------------------
# configuration options related to the XML output
#---------------------------------------------------------------------------
GENERATE_XML           = NO
XML_OUTPUT             = xml
XML_SCHEMA             = 
XML_DTD                = 
XML_PROGRAMLISTING     = YES

#---------------------------------------------------------------------------
# configuration options for the AutoGen Definitions output
#---------------------------------------------------------------------------
GENERATE_AUTOGEN_DEF   = NO

#---------------------------------------------------------------------------
# configuration options related to the Perl module output
#---------------------------------------------------------------------------
GENERATE_PERLMOD       = NO
PERLMOD_LATEX          = NO
PERLMOD_PRETTY         = YES
PERLMOD_MAKEVAR_PREFIX = 

#---------------------------------------------------------------------------
# Configuration options related to the preprocessor
#---------------------------------------------------------------------------
ENABLE_PREPROCESSING   = YES
MACRO_EXPANSION        = NO
EXPAND_ONLY_PREDEF     = NO
SEARCH_INCLUDES        = YES
INCLUDE_PATH           = 
INCLUDE_FILE_PATTERNS  = 
PREDEFINED             = 
EXPAND_AS_DEFINED      = 
SKIP_FUNCTION_MACROS   = YES

#---------------------------------------------------------------------------
# Configuration::additions related to external references
#---------------------------------------------------------------------------
TAGFILES               = 
GENERATE_TAGFILE       = 
ALLEXTERNALS           = NO
EXTERNAL_GROUPS        = YES
PERL_PATH              = /usr/bin/perl

#---------------------------------------------------------------------------
# Configuration options related to the dot tool
#---------------------------------------------------------------------------
CLASS_DIAGRAMS         = YES
MSCGEN_PATH            = 
HIDE_UNDOC_RELATIONS   = YES
HAVE_DOT               = NO
DOT_NUM_THREADS        = 0
DOT_FONTNAME           = Helvetica
DOT_FONTSIZE           = 10
DOT_FONTPATH           = 
CLASS_GRAPH            = YES
COLLABORATION_GRAPH    = YES
GROUP_GRAPHS           = YES
UML_LOOK               = NO
TEMPLATE_RELATIONS     = NO
INCLUDE_GRAPH          = YES
INCLUDED_BY_GRAPH      = YES
CALL_GRAPH             = YES
CALLER_GRAPH           = YES
GRAPHICAL_HIERARCHY    = YES
DIRECTORY_GRAPH        = YES
DOT_IMAGE_FORMAT       = png
DOT_PATH               = 
DOTFILE_DIRS           = 
MSCFILE_DIRS           = 
DOT_GRAPH_MAX_NODES    = 50
MAX_DOT_GRAPH_DEPTH    = 0
DOT_TRANSPARENT        = NO
DOT_MULTI_TARGETS      = NO
GENERATE_LEGEND        = YES
DOT_CLEANUP            = YES 
```

# pydev - PyDev 生成属性命名约定

> ID：13277581
> 
> 赞同：2
> 
> 时间：2012-11-07T20:22:51.913
> 
> 标签：pydev

在 Eclipse 中，您可以单击 Python 类变量，一旦它突出显示，右键单击以获取上下文菜单，然后运行“Refactoring->Generate Properties”。PyDev 将为您选择的成员变量生成“getters”和“setters”。

Pydev 将“getter”和“setter”函数命名为“get_”和“set_”，将变量名小写，并将驼峰式名称转换为下划线分隔的名称。例如：

```
class myClass(object):
    myVal = None

    def get_my_val(self):
       return self.__myVal

    def set_my_val(self, value):
       self.__myVal = value

    def del_my_val(self, value):
       del self.__myVal

    myVal = property(get_my_val, set_my_val, del_my_val, "myVal's docstring") 
```

我更希望它使它更像 setMyVal。

有没有办法改变这个命名约定？[我在Philip Kershaw 博客](http://philipkershaw.blogspot.com/2009/07/pydev-pylint-and-refactoring.html)上看到了不同的约定，所以我希望有办法做到这一点。我看了又看，但似乎找不到任何对此的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T18:31:54.750

转到`Window`-> `Preferences`-> `PyDev`-> `Editor`->`Code Style`并同时选择`camelCase with first lower`和`camelCase() with first lower`，然后单击`Apply`。

# android - 如何在视图和数据之间进行更好的同步

> ID：13277582
> 
> 赞同：0
> 
> 时间：2012-11-07T20:22:52.493
> 
> 标签：android

想象有一个`MainActivity`其中有一个`ListView`带有一个的`ArrayAdapter`。在属于`MainActivity`I 的视图中直接更新数据；例如，在我的`PageAdapter`课堂上：

```
@Override
public void finishUpdate(View arg0) {
    ViewPager vp = (ViewPager) arg0;
    if (vp.getCurrentItem() != this.current_item){
        this.current_item = vp.getCurrentItem();
        ContentStatus status;
        switch(vp.getCurrentItem()){
        case(0): 
            status = ContentStatus.NOTINTERESTING;
            break;
        case(2): 
            status = ContentStatus.INTERESTING;
            break;
        default: 
            status = ContentStatus.ACTIVE;
        }
        MainActivity.content.setItemStatus(content.identifier, status);
        final Activity act = (Activity) this.context;
        ArrayAdapter adapter = (ArrayAdapter) ((ListView) act.findViewById(R.id.view_sequence)).getAdapter();
        adapter.notifyDataSetChanged();
    }
} 
```

我需要在另一个从 Activity 打开`MainActivity`并使用相同数据的活动中重现此代码，因为如果用户更改其他活动的一些数据然后关闭它并返回到 MainActivity 我必须重绘`MainActivity`视图。作为一种变体，我应该使用`Activity`'s`onResume()`方法来更新所有绑定到数据的视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:33:39.073

> 我应该使用活动的 onResume 方法来更新所有绑定到数据的视图吗？

简短的回答？是的 - 如果您的活动的视图状态可能会在每次活动暂停和恢复时发生变化，那么在恢复时更新它们是有意义的。如果您愿意，这更符合“android 方式”——两个活动不应相互影响，除非它们以某种方式处理相同的数据。如果他们使用相同的数据，您可以考虑将您的第二个活动[`Fragment`](http://developer.android.com/guide/components/fragments.html)改为 a；这样，与该数据位相关的所有操作都与具有多个片段的单个活动相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:44:19.163

一个简单的解决方案是告诉适配器数据发生了变化，当回到第一个活动时，这样视图将被刷新。所以在你的`MainActivity`：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    ((AdapterYouAreUsing) listView.getAdapter()).notifyDataSetChanged();
} 
```

假设您正在使用该`startActivityForResult()`方法开始您的第二个活动。或者你将不得不打电话给`notifyDataSetChanged()`那个`onResume()`。

# ruby-on-rails-3.2 - 如何在 rails 3.2 的 rails mountable engine 中使用 Rolify？

> ID：13277583
> 
> 赞同：0
> 
> 时间：2012-11-07T20:22:53.413
> 
> 标签：ruby-on-rails-3.2, cancan, rails-engines

我在我的 rails 应用程序中使用了 cancan 和 rolify。现在我想在我的 Rails 可安装引擎（隔离命名空间）中使用这些，至少 rolify。我很努力，但徒劳无功。当先前失败时，我也将角色模型放入 models/myengine/ 和 models/ 中。它在角色适配器级别抛出错误，说 has_role? 找不到。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:43:57.613

我对 rolify 也有类似的问题。我也无法让它在可安装的引擎中工作。看起来它只是不适用于引擎。我建议您改用[simple_roles gem](https://github.com/stanislaw/simple_roles) - 这是我使用过的，在可安装引擎中使用它没有问题。

**更新** Rolify 添加了对命名空间的支持，因此这不再有效。我已经成功地在我的引擎中使用了它。你现在可以做 rails g rolify EngineName::Role EngineName::User

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T19:05:52.077

我正在转换一个正常工作的 Rails 4.2。应用程序进入引擎。这些表已经创建为“用户”、“角色”和“用户角色”。

为了让它在引擎中工作，用户只需要这个定制：

```
rolify role_cname: 'EngineName::Role', role_join_table_name: 'users_roles' 
```

在控制台中测试：

```
EngineName::User.last.roles
SELECT  "users".* FROM "users"  ORDER BY "users"."id" DESC LIMIT 1
SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", "xxxx"]]

EngineName::User.last.has_role? :admin
SELECT  "users".* FROM "users"  ORDER BY "users"."id" DESC LIMIT 1
SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", "xxxx"]] 
```

# continuous-integration - 如何从 Script# projet 构建 nuget 包

> ID：13277585
> 
> 赞同：1
> 
> 时间：2012-11-07T20:22:58.227
> 
> 标签：continuous-integration, nuget, nuget-package, script#

我需要为 Script# 项目构建 nuget 包

1) 包必须包含由 Script# 生成的 js 文件 2) 包版本自动递增会很棒 3) 作为持续集成过程的一部分，它必须在构建服务器上运行

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:40:28.507

它看起来比我想象的要容易

1.  您将需要创建 mypackage.nuspec 文件
2.  您需要在文件部分指定您的 js 文件

> ```
> <files>
>     <file src="bin\Release\some.js" target="Content\Scripts\some.js" />
> </files> 
> ```

1.  在您的构建服务器上，您需要运行

> nuget pack mypackage.nuspec -版本 1.0.0.1

将 1.0.0.1 替换为您的构建系统生成的增量构建版本

# php - 使用 PHP 脚本解析 JSON 数组

> ID：13277587
> 
> 赞同：-3
> 
> 时间：2012-11-07T20:23:06.593
> 
> 标签：php, json

我尝试读取 JSON 对象并对其进行解析。我正在使用的代码如下：

```
<?php

$json_string2 = '{"Products":[
                    {"Size":"klklkkl",
                        "No":"1352285923",
                        "KnowDate":true,
                        "Subdata":[
                        {
                            "item" : "1",
                        },
                        {
                            "item" : "455",
                        }],
                        "Info":true
                    }]
                }';

$obj = json_decode($json_string2, true);

foreach($obj as $key => $value)
{
    $size = $value->{'Size'};
    $no = $value->{'No'};
    $knowdate = $value->{'KnowDate'};
    $info = $value->{'Info'};
}
.
.
?> 
```

但是在进入 for 循环的行中，我收到以下错误：

```
Notice: Trying to get property of non-object in C:\xampp\htdocs\PhpProject2\parseJson.php on line... 
```

这个问题的解决方案是什么？有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:27:30.510

`true`作为第二个参数传递给[`json_decode`](http://php.net/manual/en/function.json-decode.php)函数并使用数组表示法：

```
$obj = json_decode($json_string2, true);
foreach ($obj['Products'] as $key => $value) {
    $size = $value['Size'];
    $no   = $value['No'];
} 
```

或传递`false`（或不传递第二个参数）并使用对象表示法：

```
$obj = json_decode($json_string2 /*,false*/ );
foreach ($obj->{'Products'} as $key => $value) {
    $size = $value->{'Size'};
    $no   = $value->{'No'};
} 
```

注意：您的代码还有其他问题（i）损坏的 JSON（ii）没有迭代正确的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:27:24.157

你应该试试`var_dump`。你得到以下结构：

```
array(1) {
  ["Products"]=>
  array(1) {
    [0]=>
    array(5) {
      ["Size"]=>
      string(7) "klklkkl"
      ["No"]=>
      string(10) "1352285923"
      ["KnowDate"]=>
      bool(true)
      ["Subdata"]=>
      array(2) {
        [0]=>
        array(1) {
          ["item"]=>
          string(1) "1"
        }
        [1]=>
        array(1) {
          ["item"]=>
          string(3) "455"
        }
      }
      ["Info"]=>
      bool(true)
    }
  }
} 
```

当您使用 迭代时`foreach`，您将获得`$key`as`"Products"`和`$value`as 产品数组。

您可能正在寻找的是`foreach($obj['Products'] as $key=>$value)`

而且因为你有数组，而不是对象，所以你需要在循环内的任何地方使用这些方括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:30:04.073

JSON 无效，因为在右大括号之前有逗号：

```
 "item" : "1",
 },
 {
    "item" : "455",
 } 
```

注意“1”和“455”后面的逗号

即使您更正了这一点，您也必须遍历`$obj->Products`.

# sql - SP中的SQL INNER JOINS从字符串转换日期和/或时间得到错误消息

> ID：13277588
> 
> 赞同：1
> 
> 时间：2012-11-07T20:23:07.230
> 
> 标签：sql, sql-server, tsql

我搜索了大约 20 个与错误消息“从字符串转换日期和/或时间时转换失败”有关的结果。似乎没有人能解决我的问题。

一点历史，上周五查询工作正常，返回的数据是正确的。在接下来的星期一，查询不再起作用并给出此错误消息，“从字符串转换日期和/或时间时转换失败。” 因此，经过几个小时的战斗，它能够运行一个包含有问题代码的函数，并且查询再次完美运行。直到今天早上。我进入办公室并运行查询并收到错误“从字符串转换日期和/或时间时转换失败”。所以现在我要把头发拉出来。

我首先使用 isDate 函数验证返回的每条记录实际上是有效日期。所有日期都是字符串格式的有效日期。我只是在检查记录是否超过 1 年。

我确实有几个 INNER JOINS 并且一直想知道它们是否会影响输出。

```
SELECT 
gc2p.partnumber, gc2p.orderby, gc2p.campaigncode, gp2a.assetfilename
FROM [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2productrefs] gc2p
,[StepMirror].[dbo].[stepview_nwppck_ngn_getpimweblegalattrlist1] gpwa
,[StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2assetrefs] gc2a 
,[StepMirror].[dbo].[stepview_nwppck_ngn_getproduct2assetrefs] gp2a 
WHERE gc2p.partnumber=gpwa.PARTNUMBER and
gc2p.id=gc2a.id and
gp2a.PRODUCTNAME=gpwa.PARTNUMBER and
ATTRIBUTENAME='New Date' AND 
ATTRIBUTEVALUE > dateadd(month,-12,getdate()) AND 
gc2p.id = '5665976' and 
gc2a.assettype='Primary Image' AND 
gp2a.ASSETTYPE = 'Primary Image'
order by gc2p.orderby 
```

如果有人能帮我一把，那就太好了。

编辑：当我删除 'ATTRIBUTEVALUE > dateadd(month,-12,getdate())' 时，查询运行良好。我忘了提及引发错误的查询的确切部分。

编辑：更新的查询 -**现在**为那些寻求类似答案的人提供查询。

```
SELECT TOP 18 gc2p.partnumber, gpwa.ATTRIBUTECNAME,gp2a.ASSETFILENAME, gpwa.ATTRIBUTEVALUE
FROM [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2productrefs] gc2p
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getpimweblegalattrlist1] gpwa ON gc2p.partnumber=gpwa.PARTNUMBER and gpwa.ORDERBY='96'
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2assetrefs] gc2a ON gc2p.id=gc2a.id
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getproduct2assetrefs] gp2a ON gc2p.partnumber=gp2a.PRODUCTNAME
WHERE gc2p.id = 5665976 AND gp2a.assettype='Primary Image' AND gc2a.assettype='Primary Image' 
AND(CASE WHEN ISDATE(ATTRIBUTEVALUE)  = 0 then NULL ELSE ATTRIBUTEVALUE END) > dateadd(month,-12,getdate())
order by gc2p.orderby 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:32:30.857

问题很可能是您在 ATTRIBUTEVALUE 字段中有非日期数据。您假设包含`ATTRIBUTENAME='New Date'`将过滤它，但它可能不取决于查询计划。尝试...

```
(CASE WHEN ISDATE(ATTRIBUTEVALUE) = 0 then NULL ELSE ATTRIBUTEVALUE END) > dateadd(month,-12,getdate()) AND ... 
```

在复杂的连接中，SQL 引擎可能决定先连接表然后使用过滤器，这将导致不匹配不是每个实例`ATTRIBUTEVALUE`都会隐式转换为日期。

另外，请使用真正的 SQL 连接，而不是逗号连接。这是一种糟糕的形式，导致的问题比它解决的问题多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:31:32.900

不管是什么，请确保您的查询与此无关。一切都与表中的数据有关。此外，正如我看到的查询一样，您似乎正在加入一些视图，并且在视图定义中可能有一些导致此错误的转换。如果我在哪里，我会对表进行一些简单的查询，并将字符串列一一转换为日期时间，直到找到错误参考。

希望能帮助到你。

干杯

# cocoa - NSTextField 内阴影

> ID：13277593
> 
> 赞同：3
> 
> 时间：2012-11-07T20:23:30.503
> 
> 标签：cocoa, core-graphics, nstextfield, nstextfieldcell

我试图在我的 Mac 应用程序的标签上获得内部阴影。

我正在尝试匹配我的设计师发送的 Photoshop 设计。我试图匹配的外观是： ![Photoshop设计](../Images/69d33f1189eca823c0bd34c4f0ddf841.png)

在 Photoshop 中完成此操作的方式是使用以下设置设置内部阴影： ![Photoshop 设置](../Images/abc7fc1ec08b6cd974a9f223a48ac3b2.png)

我在其他网站上看到了针对此类事情的几种不同解决方案，但没有一个能正常工作。

例如，每个人都说要使用：

```
[[myNSTextField cell] setBackgroundStyle:NSBackgroundStyleRaised]; 
```

我发现了很多关于在 NSBezierPath 或类似但没有标签上做内阴影的东西。

这个问题的答案说使用上面的 setBackgroundStyle 然后说

> 然后可以通过使用带有 NSGradient 的自定义视图来达到您的渐变背景

但是这种观点去哪里了？答案引用的链接谈到再次在窗口上做内部阴影，而不是文本。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:18:11.827

这种效果在 Photoshop 中很容易制作。不幸的是，在 Cocoa 应用程序中它并不是那么简单。我不知道使用标准控件的简单方法，但我会告诉你我将如何处理这个问题。

问题是阴影必须被对象丢弃。换句话说，阴影始终是模态的，不能只绘制没有实际对象的阴影。在核心图形中，阴影是绘图上下文的一个属性。当我们渲染一个对象时，我们可以将阴影效果添加到进程中。

现在，当我们知道真正的问题时，解决方案就是小菜一碟:)

假设这里是从您的文本生成的图像。您可以在 Internet 上找到如何将文本渲染到位图上下文的示例。

![在此处输入图像描述](../Images/65f7f23e7f5e4581cc71875d48bddb19.png)

您只需：

反转它。

![在此处输入图像描述](../Images/de33a9c4bf03fafe103aa95f3246a166.png)

将其与阴影一起渲染到图像（位图上下文）。

![在此处输入图像描述](../Images/92a8ef32b962b8740a80fd68c4a768d1.png)

通过排除倒置图像来掩盖图像。

![在此处输入图像描述](../Images/632256184b53f688ec923e8a3e86c48a.png)

在您拥有的背景纹理上渲染结果图像。

![在此处输入图像描述](../Images/3e53a44f7770cd74a8dd53a81f93075a.png)

我会创建一个 NSView 子类并在图层上绘制所有这些东西。您可以找到有关如何创建自己的位图上下文并在其上绘制的示例。以下是如何使用面具[https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-25T18:56:20.050

我无法想出一种方法来对 NSTextField 的文本进行阴影处理。这可能是可能的，但是对于 NSTextView 来说这很容易，对于一个简单的标签来说应该是一个合理的选择。

这是一个带有清晰背景和白色文本的标签示例，文本上有一个小的黑色阴影。

```
NSTextView *textView = [[NSTextView alloc] initWithFrame:NSMakeRect(10.0, 10.0f, 200.0f, 20.0f)];
[textView setSelectable:FALSE];
[textView setTextColor:[NSColor whiteColor]];
[textView setBackgroundColor:[NSColor clearColor]];
[textView setFont:[NSFont systemFontOfSize:14.0f]];
[textView setString:@"Boom goes the dynamite!"];

NSShadow *shadow = [[NSShadow alloc] init];
[shadow setShadowColor:[NSColor blackColor]];
[shadow setShadowOffset:NSMakeSize(1.0f, 1.0f)];
[shadow setShadowBlurRadius:1.0];
[textView setShadow:shadow];

[parentView addSubview:textView]; 
```

这给出了以下内容：

[![NSTextView 文本阴影示例](../Images/bad71104add303d77e817a33557514a0.png)](https://i.stack.imgur.com/z6Xwp.png)

# java - 向用户发布时将数组传递给 Facebook 对象

> ID：13277595
> 
> 赞同：0
> 
> 时间：2012-11-07T20:23:31.557
> 
> 标签：java, android, facebook

如何将android中的数组传递给对象类型的Route属性。Route 属性是在 Open Graph 中为您的应用程序创建对象类型时的一个选项。我在任何地方都找不到这个！

路线应显示在地图布局中的 Facebook 时间线上。

谢谢！

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:48:21.493

我的猜测和你的一样好，但是尝试使用 a`JSONObject`来构造一个兼容的数组：

```
JSONObject routeProperty = new JSONObject();
routeProperty.put("Cat");
routeProperty.put("Dog"); 
```

然后调用`routeProperty.toString()`将其传递给您的对象的参数或选项。

# jsf-2 - 带有提交和编辑按钮的 JSF2.0 表单

> ID：13277601
> 
> 赞同：0
> 
> 时间：2012-11-07T20:24:10.607
> 
> 标签：jsf-2, bean-validation

在 Jsf-2.1.7 中，我们有两个命令链接的表单，一个是应该验证字段的提交，另一个是应该跳过验证的编辑链接。

但编辑按钮不会跳过 bean 验证

```
<h:commandLink value="Edit" action="#{buyerBacking.edit}" immediate="true">

    </h:commandLink> 
```

有什么线索吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:27:25.243

您需要使用禁用 bean 验证[`<f:validateBean disabled="true">`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/validateBean.html)。您可以检查然后由命令链接设置的请求参数。

例如

```
<f:validateBean disabled="#{param.disableBeanValidation}" />
...
<h:commandLink ...>
    <f:param name="disableBeanValidation" value="true" />
</h:commandLink> 
```

# c++ - C++ 类内存对齐

> ID：13277611
> 
> 赞同：2
> 
> 时间：2012-11-07T20:25:00.670
> 
> 标签：c++, memory-alignment

我最近看到我的一位同事做了类似的事情：

```
#include <iostream>

class myClass
{
public:
    float X, Y;
    myClass(int x, int y) : X(x), Y(y){}
};

int main()
{
    char buffer[1024] = { 0 };
    myClass example(12, 24);
    memcpy(buffer, &example.X, sizeof(float) * 2); // Is this safe? Will X always be allocated next o Y?
} 
```

基本上，他试图通过告诉内存副本读取两倍大小的浮点数来一步将 the`X`和 the复制`Y`到全部中。`char[]`

它肯定可以正常工作，我认为这很酷并继续前进。但是由于 C++ 中所有未定义的行为。我想知道这是否保证始终有效。Y 总是在 X 之后被分配吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:29:41.193

> 它肯定可以正常工作，我认为这很酷并继续前进。但是由于 C++ 中所有未定义的行为。我想知道这是否保证始终有效。Y 总是在 X 之后被分配吗？

当然不。任何结构都可以在成员之间进行填充。大多数编译器都会有足够的文档来告诉您使用该编译器在您的特定平台上是否安全，但它绝不是安全的可移植性。您*必须*使用`sizeof(myClass)`而不是`sizeof(float)*2`. （而且我有点好奇为什么你一开始就不想……）

如果你在 C++03 中，这里有一个更大的问题：`myClass`有一个用户定义的构造函数，所以它不是 POD，所以你根本不能移植`memcpy`它。（我最初认为这在 C++11 中也是一个问题，但由于您的所有成员都具有相同的访问控制，因此它*是*一个标准布局类，这意味着您可以`memcpy`在 C++11 中使用它。）

最后，这样说可能看起来有点傻，但不能保证 1024 字节足以容纳两个`float`s 的结构。你真的应该做类似的事情`char buffer[sizeof(myClass)]`。

# xcode - 总是显示一个应用程序？

> ID：13277615
> 
> 赞同：0
> 
> 时间：2012-11-07T20:25:17.330
> 
> 标签：xcode, ios6

我想知道是否有可能使 ipod 始终显示应用程序，即使在您重新启动设备后也是如此？我正在为博物馆做一个项目，他们不希望参观者按住电源按钮并能够退出应用程序，有没有办法让它直接启动到应用程序？谢谢

# c# - 缓冲来自套接字的字符串流

> ID：13277617
> 
> 赞同：2
> 
> 时间：2012-11-07T20:25:28.707
> 
> 标签：c#, sockets, networking, asynchronous, stream

我正在开发一个在网络实例之间传递字符串的 C# 应用程序。

该代码当前使用异步套接字，到目前为止一切正常（本地主机）。

但是，当我将通过真实接口时，当数据包将被拆分和合并时，我预计会出现缓冲问题。

客户：

```
Socket sock;
// Snip init and connect

string msg1 = "Hello\nWorld";
byte[] data1 = System.Text.Encoding.UTF8.GetBytes(msg1);
sock.Send(data1);

string msg2 = "Foo\nBar\nBaz";
byte[] data2 = System.Text.Encoding.UTF8.GetBytes(msg2);
sock.Send(data2); 
```

我会选择这样的东西，但我想不出一个优雅的解决方案来解决缺失的部分：

服务器：

```
Socket sock;
MemoryStream ms = new MemoryStream();
Queue<string> strings = new Queue<string>();
// Snip init and receive connection
sock.BeginReceive(buffer, 0, MaxSize, SocketFlags.None, new AsyncCallback(OnReceived), null);

void OnReceived(IAsyncResult result) {
  // Snip sanity stuff
  int bytesReceived = sock.EndReceive(result);

  // Here is where I'd need some help...
  ms.Write(buffer, 0, bytesReceived);
  ms.Flush();
  for (;;) {
    StreamReader sr = new StreamReader(ms);
    if (sr.HasAStringTerminationCharacter) { // <-- How?
      string currentString = sr.ReadUntilTermination(); // <-- How?
      strings.Enqueue(currentString);
    }
    else
      break;
  }
  sock.BeginReceive(buffer, 0, MaxSize, SocketFlags.None, new AsyncCallback(OnReceived), null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:33:59.277

由于 Encoding.GetBytes() 不预先或附加字符串终止数据，我使用 BinaryReader/BinaryWriter 代替，它在其内容之前对字符串长度进行编码。

这是修改后的客户端：

```
Socket sock;
// Snip init and connect
sock.Send(ToBinary("Hello\nWorld"));
sock.Send(ToBinary("Foo\nBar\nBaz"));

byte[] ToBinary(string s) {
  var ms = new MemoryStream();
  var bw = new BinaryWriter(ms);
  bw.Write(s);
  bw.Flush();
  ms.Flush();
  return ms.ToArray();
} 
```

服务器：

```
Socket sock;
MemoryStream ms = new MemoryStream();
Queue<string> strings = new Queue<string>();
// Snip init and receive connection
sock.BeginReceive(buffer, 0, MaxSize, SocketFlags.None, new AsyncCallback(OnReceived), null);

void OnReceived(IAsyncResult result) {
  // Snip sanity stuff
  int bytesReceived = sock.EndReceive(result);

  ms.Write(buffer, 0, bytesReceived);
  ms.Flush();
  long endPos = ms.Position;

  ms.Seek(0, SeekOrigin.Begin);
  long readPos = ms.Position;
  var bw = new BinaryReader(ms);

  for (;;) {
    try {
      string currentString = bw.ReadString();
      strings.Enqueue(currentString);
      readPos = stream.Position;
    }
    catch (EndOfStreamException) {
      long unusedBytes = endPos - readPos;
      var remaining = new MemoryStream();
      remaining.Write(stream.GetBuffer(), (int) readPos, (int) unusedBytes);
      ms = remaining;
      break;
    }
  }
  sock.BeginReceive(buffer, 0, MaxSize, SocketFlags.None, new AsyncCallback(OnReceived), null);
} 
```

我相信它会正确处理拆分和合并的数据。

# version-control - clearcase 要执行：如何分支？

> ID：13277620
> 
> 赞同：5
> 
> 时间：2012-11-07T20:25:47.863
> 
> 标签：version-control, migration, perforce, clearcase

我们正在迁移`clearcase`，`perforce`我对分支有疑问。

`clearcase`一旦我分支（比如说）出来，我就`my_branch`可以继续提交对文件（比如说`xyz.cpp`）的增量更改，而不用担心`main`.

```
element * CHECKEDOUT
element * .../my_branch/LATEST
element * /main/LATEST -mkbranch my_branch 
```

我可以根据需要继续签出和签`xyz.cpp`入`my_branch`。假设我进行了 23 次签入，并且我觉得第 21 次签入是需要进入的`main`，我可以使用第 21 次签入`ct get`并将其合并到`main`.

我可以对`xyz2.cpp`. 我不确定如何在.`xyz3.cpp``clearcase``perforce`

我如何复制这个过程`perforce`？我明白`p4 submit`了，但它进入`main`. 基本上，我想继续保存增量更改，并根据需要为任意数量的文件检索它们，然后再将它们合并到`main`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T22:11:07.593

您可以使用几乎相同的过程，但当然机制是不同的。

**第 1 步：创建新分支**

假设您在 Perforce 中有一个主分支，位于`//depot/project/main`. （该路径采用 Perforce depot 语法。如果您需要，我可以添加指向相关文档的链接。）

我将定义一个分支图来捕获有关主分支和我的新分支如何相互关联的信息。

`p4 branch my_branch`

在分支图中，我将添加此视图：

`//depot/project/main/... //depot/project/my_branch/...`

现在我将创建分支：

`p4 populate -b my_branch`

**第 2 步：使用新分支**

我将创建一个包含两个分支的工作区。我不会详细介绍所有细节，但我需要一个看起来像这样的工作区视图：

`//depot/project/main/... //my_ws/main/...`

`//depot/project/my_branch/... //my_ws/my_branch/...`

现在我将填充工作区：

`p4 sync`

请注意，我将在我的工作区中拥有两个分支的副本。现在我将检查并在 my_branch 上进行更改：

`p4 edit my_branch/foo.c`

`p4 submit -d "my_branch changes`

我可以根据需要进行尽可能多的更改`my_branch`。

**第3步：合并到主**

好的，现在我准备合并`my_branch`到`main`. 如果我想合并我运行的所有内容：

`p4 integ -r -b my_branch`

如果我只想合并一个文件：

`p4 integ -r -b my_branch //depot/project/main/foo.c`

请注意，我指定了目标文件。

如果我只想合并单个文件的特定修订：

`p4 integ -r -b my_branch //depot/project/main/foo.c#21`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:44:45.793

最接近的[`cleartool get`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_get.htm)将是[`p4 sync`](http://www.perforce.com/perforce/doc.current/manuals/cmdref/sync.html)

```
 p4 sync file.c#4 
```

> 将 file.c 的第四个修订版复制到客户端工作区。
> 如果该文件已在客户端工作区中打开，或者如果该文件的最新版本存在于客户端工作区中，则不会复制该文件。

之后[`p4 submit`](http://www.perforce.com/perforce/doc.current/manuals/cmdref/submit.html#1050861)仍然是一个明显的选择，但更改列表中的所有文件都提交到软件仓库，并且打开以进行编辑、添加和分支的文件被关闭。

# .net - 在组合框中显示进程时遇到问题

> ID：13277622
> 
> 赞同：1
> 
> 时间：2012-11-07T20:25:53.590
> 
> 标签：.net, vb.net, visual-studio-2010, process

在我的应用程序中，用户单击一个按钮，然后加载一个表单，在此表单中，有一个组合框可以生成一个窗口进程列表并显示窗口名称。

它在 Visual Studio 中总是可以正常工作，尽管当我启动编译版本时，我总是收到此错误“找不到进程 {0}。

我认为这意味着它没有要读取的进程，所以我添加了一些代码以仅在数量大于或等于 1 时才显示并且它没有帮助。

有人看到我的问题吗？

```
 Dim ProcessList() As Process = Process.GetProcesses
    If ProcessList.Count() >= 1 Then
        For I = 0 To UBound(ProcessList)
            If ProcessList(I).MainWindowTitle.ToString = "" = False Then
                ComboBox1.Items.Add(ProcessList(I).MainWindowTitle.ToString)
            End If

        Next
    Else
        ComboBox1.Items.Add("No windows found")
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:33:35.697

更改此行：

```
For I = 0 To UBound(ProcessList) 
```

到：

```
For I = LBound(ProcessList) To UBound(ProcessList) 
```

在VB中，一些数组从1开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:28:47.580

我无法复制您的问题，我在 Visual Studio 中运行您的代码没有错误，并且从可执行文件中运行没有错误。在网上查找错误时，它不是描述性的，表明该过程无法访问该功能。你可以尝试添加一些额外的检查，如果你有 Visual Studio Professional 或更高版本，你可以[将 Visual Studio 附加](http://msdn.microsoft.com/en-us/library/c6wf8e4z%28v=vs.100%29.aspx)到你的可执行文件并以这种方式解决你的错误作为最后的手段。这是我用来测试的代码。

```
Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim ProcessList() As Process = Process.GetProcesses
        If ProcessList.Count() >= 1 Then
            For Each p As Process In ProcessList
               If Not IsNothing(p) Then
                    If Not String.IsNullOrEmpty(p.MainWindowTitle) Then
                        ComboBox1.Items.Add(p.MainWindowTitle.ToString)
                    End If
                End If
            Next
        Else
            ComboBox1.Items.Add("No windows found")
        End If
    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        Dim ProcessList() As Process = Process.GetProcesses
        If ProcessList.Count() >= 1 Then
            For Each p As Process In ProcessList
                If Not IsNothing(p) Then
                    ComboBox1.Items.Add(p.ProcessName)
                End If
            Next
        Else
            ComboBox1.Items.Add("No windows found")
        End If
    End Sub
End Class 
```

# datagridview - C#在验证单元格的值失败时，将单元格转换为其先前的正确值

> ID：13277629
> 
> 赞同：0
> 
> 时间：2012-11-07T20:26:33.537
> 
> 标签：datagridview, cell

验证失败后，我想将单元格变为其先前的正确值。我用过：

```
DataGridView.CancelEdit() 
```

但有时有效，有时无效，所以我通过将其分配给单元格来强制单元格的值采用其正确的先前值。问题是引发了 cellvaluechanged 事件，在这种情况下，我不希望它被引发。

如果 cancelEdit 不起作用，将单元格的值转换为之前正确的值的最佳方法是什么？如果唯一的方法是像我一样强迫它，如何避免 cellvaluechanged 被提高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:36:16.403

尝试在 dataGridView.CancelEdit() 之后调用 dataGridView.EndEdit() ..

# android - 当列表开始滚动时，使用 CursorAdapter 的 Android ListView 会搞砸

> ID：13277633
> 
> 赞同：2
> 
> 时间：2012-11-07T20:26:53.757
> 
> 标签：android, android-listview, android-cursoradapter

我有一个带有复选框的 listView，它使用光标适配器。出于某种原因，当我滚动标题 (pageOrder==3) 时，会到处移动。它不会保持在顶部。它将移动到位置 13、2 或 3。有什么想法吗？

```
public class ExamCursorAdapter extends CursorAdapter {

private LayoutInflater inflater;
private int pageIndex;
private int pageTitleIndex;
private int pageOrderIndex;
private Context context;
private String assessmentId;

static class ViewHolder{
    protected TextView textViewTitle;
    protected TextView textViewHeader;
    protected TextView textViewCheckBox;
    protected CheckBox checkbox;
    protected int pageOrder;
    protected int pageId;
}

public ExamCursorAdapter(Context context, Cursor cursor, String assessmentId) {
    super(context, cursor, 0);
    this.context = context;
    this.assessmentId = assessmentId;
    pageIndex = cursor.getColumnIndex(PagesTable.COLUMN_ID);
    pageTitleIndex = cursor.getColumnIndex(PagesTable.COLUMN_TITLE);
    pageOrderIndex = cursor.getColumnIndex(PagesTable.COLUMN_ORDER);
    inflater = LayoutInflater.from(context);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.textViewTitle.setText(cursor.getString(pageTitleIndex)); 
    holder.pageOrder = cursor.getInt(pageOrderIndex);

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    ViewHolder holder = new ViewHolder();

    View view = null;
    holder.pageId = cursor.getInt(pageIndex);
    holder.pageOrder = cursor.getInt(pageOrderIndex);

    if(holder.pageOrder == 3) {
        view = inflater.inflate(R.layout.list_adapter_header_exam, null);
        holder.textViewTitle = (TextView) view.findViewById(R.id.adapter_header_textview_exam_column1);
        holder.textViewCheckBox = (TextView) view.findViewById(R.id.adapter_header_textview_exam_column2);
        holder.textViewCheckBox.setText("Complete");
        view.setFocusable(true);
    } else {
        view = inflater.inflate(R.layout.exam_row, null);
        holder.textViewTitle = (TextView) view.findViewById(R.id.exam_cursor_adapter_textview);
        holder.checkbox = (CheckBox) view.findViewById(R.id.exam_cursor_adapter_check_box);
        holder.checkbox.setClickable(false);    
        String[] projection = { ExamCompleteTable.COLUMN_EXAM_COMPLETE };
        StringBuilder sb = new StringBuilder();
        sb.append(BPContentProvider.EXAM_COMPLETE_URI).append("/assessment/").append(assessmentId);
        sb.append("/page/").append(holder.pageId);
        Uri examCompleteUri = Uri.parse(sb.toString());
        Cursor examCompleteCursor = context.getContentResolver().query(examCompleteUri, projection, null, null, null);
        if (examCompleteCursor.moveToFirst()) {
            int examComplete = examCompleteCursor.getInt(examCompleteCursor.getColumnIndexOrThrow(ExamCompleteTable.COLUMN_EXAM_COMPLETE));
            if(examComplete == 1) {
                holder.checkbox.setChecked(true);
            }
        } 
        examCompleteCursor.close();
    }
    view.setTag(holder);
    return view;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:05:47.047

听起来您在使用 View 回收器时遇到了问题。尝试让 CursorAdapter 知道这些内置方法不止一种布局：

```
@Override
public int getItemViewType(int position) {
    Cursor cursor = getCursor();
    cursor.moveToPosition(position);
    return (cursor.getInt(pageOrderIndex) == 3 ? 0 : 1);
}

@Override
public int getViewTypeCount() {
    return 2;
} 
```

* * *

**此外**，此数据看起来会根据每行中的内容而变化：

```
String[] projection = { ExamCompleteTable.COLUMN_EXAM_COMPLETE };
StringBuilder sb = new StringBuilder();
sb.append(BPContentProvider.EXAM_COMPLETE_URI).append("/assessment/").append(assessmentId);
sb.append("/page/").append(holder.pageId);
Uri examCompleteUri = Uri.parse(sb.toString());
Cursor examCompleteCursor = context.getContentResolver().query(examCompleteUri, projection, null, null, null);
if (examCompleteCursor.moveToFirst()) {
    int examComplete = examCompleteCursor.getInt(examCompleteCursor.getColumnIndexOrThrow(ExamCompleteTable.COLUMN_EXAM_COMPLETE));
    if(examComplete == 1) {
        holder.checkbox.setChecked(true);
    }
} 
examCompleteCursor.close(); 
```

因此，此代码需要在`bindView()`（或`getView()`）中随每一行中的数据而变化。

作为提示，如果`examComplete`在此 Activity 处于前台时保持不变，您可以将这些整数保存在 a`SparseIntArray`或`List<Integer>`以加快速度。

# plugins - Jenkins 中的构建过程

> ID：13277634
> 
> 赞同：0
> 
> 时间：2012-11-07T20:27:01.613
> 
> 标签：plugins, deployment, jenkins

我是 JENKINS 环境的新手。我必须编写一个脚本来存储 10 个最新的战争文件。最新的应该链接到 ROOT.war （或复制）是否有一个插件可以做到这一点，或者如果没有，有人可以指导我如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:56:48.573

如果您谈论*的是 Jenkins 构建的*10 个最新的战争文件，那么您不需要任何特殊的插件。

在您的工作配置下：

*   单击**丢弃旧版本**
*   单击**高级**按钮
*   在*Max # of builds to keep with artifacts*下，输入**10**

这将保留完整的构建历史，但只会存储最后 10 个工件。您可以通过从左侧的**Build History**中选择构建，然后单击**Build Artifacts来访问您的工件**

您对 root.war 的评论有点含糊。您是在问如何将最新的 root.war 部署到服务器上？如果是这样，请澄清您的问题。尽管如此，这是一个部署 .war 文件的插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)

# c# - 在 vb2012 中编码，FileStream 中的错误

> ID：13277636
> 
> 赞同：0
> 
> 时间：2012-11-07T20:27:13.237
> 
> 标签：c#

我正在 vb2012 中用 C# 构建一个应用程序。我打开了一个新项目并开始编辑`MainPage.xaml.cs`文件以编写主要方法，然后读取文件...

```
FileStream s = new FileStream("abc.txt", File.Read); 
```

但它显示错误`FileStream`并说

> 找不到类型或命名空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:28:53.540

添加

```
using System.IO; 
```

到您的使用部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T20:29:05.453

我假设您的意思是 VS2012，而不是 VB2012。要在 C# 中使用该类，请添加

```
using System.IO; 
```

到你的类文件的顶部。

该类`FileStream`位于`System.IO`命名空间中，因此添加该`using`指令可以让编译器在该命名空间中搜索您尝试使用的任何类。它也会从那里拉出`File`枚举。

**还**

`File.Read`是一种方法，而不是枚举。利用

```
FileStream s = new FileStream("abc.txt", FileMode.Open, FileAccess.Read); 
```

反而

# actionscript-3 - 我需要使用 pop() 在我创建的组合框（数组）中取出一个选项......但被卡住了

> ID：13277642
> 
> 赞同：1
> 
> 时间：2012-11-07T20:27:39.397
> 
> 标签：actionscript-3, flash, flash-cs5

我需要使用 pop() 以便取出数组中的最后一个元素（位于组合框中），但这不起作用......请帮忙！

ps当我运行代码时，我没有收到任何错误，其他一切正常，按钮也是如此：

我的代码：

```
var barColours:Array = new Array();
barColours  = ["red", "green", "blue", "orange", "purple"];

comboBox.dataProvider = new DataProvider(barColours);
comboBox.addEventListener(Event.CHANGE, onChange);
comboBox.x = 670;
comboBox.y = 55;

minus_btn.addEventListener(MouseEvent.CLICK, takeAwayCol);

function takeAwayCol(ev:MouseEvent):void
{
      barColours.pop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:38:05.187

修改数组不会“通知”您需要重新分配 dataProvider 的更改列表。

```
var barColours:Array = new Array();
barColours  = ["red", "green", "blue", "orange", "purple"];

comboBox.dataProvider = new DataProvider(barColours);
comboBox.addEventListener(Event.CHANGE, onChange);
comboBox.x = 670;
comboBox.y = 55;

minus_btn.addEventListener(MouseEvent.CLICK, takeAwayCol);

function takeAwayCol(ev:MouseEvent):void
{
      barColours.pop();
      comboBox.dataProvider = new DataProvider(barColours);
} 
```

**根据评论编辑**

```
var barColours:Array = ["red", "green", "blue", "orange", "purple"];
var removedBarColours:Array = new Array();

comboBox.dataProvider = new DataProvider(barColours);
comboBox.addEventListener(Event.CHANGE, onChange);
comboBox.x = 670;
comboBox.y = 55;

minus_btn.addEventListener(MouseEvent.CLICK, takeAwayCol);

function takeAwayCol(ev:MouseEvent):void
{
//if you need to pull from the beginning of the list instead of the end use shift/unshift method(s) of Array
      removedBarColours.push(barColours.pop());
      comboBox.dataProvider = new DataProvider(barColours);
} 

function addCol(ev:MouseEvent):void
{
      barColours.push(removedBarColours.pop());
      comboBox.dataProvider = new DataProvider(barColours);
} 
```

# sql - 按预定义日期范围进行 SQL 分组

> ID：13277646
> 
> 赞同：2
> 
> 时间：2012-11-07T20:27:57.647
> 
> 标签：sql, sql-server, tsql

我有以下内容：

[http://sqlfiddle.com/#!2/fca3d/1](http://sqlfiddle.com/#!2/fca3d/1)

我现在正在尝试为一年中的每周添加一行，并相应地过滤联系人。新表将如下所示：

```
 Status 1    Status 2    Status 3
Week 1      3          4           2
Week 2      1          5           3
Week 3      2          2           4 
```

我认为需要使用 DATEADD，但是我不知道如何开始更改我的查询。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:33:16.390

只需添加一个 GROUP BY 子句：

```
SELECT 
    WEEK(created),
    SUM(case WHEN status = 1 then 1 else 0 end) Status1,
    SUM(case WHEN status = 2 then 1 else 0 end) Status2,
    SUM(case WHEN status = 3 then 1 else 0 end) Status3,
    SUM(case WHEN status = 4 then 1 else 0 end) Status4,
    SUM(case WHEN status = 5 then 1 else 0 end) Status5
FROM contacts
GROUP BY WEEK(created), YEAR(created); 
```

按年分组也很重要，否则无论年份如何，它都会按周分组。
此外，如果一周内没有数据，则不会创建行。为此，您需要另一组数据。

**编辑**：这是 SQL Server 2012 [ [SQLFiddle](http://sqlfiddle.com/#!6/d41d8/907/0) ]的示例

# cuda - 使用 CUDA 以非线性最小二乘方式求解方程组

> ID：13277648
> 
> 赞同：10
> 
> 时间：2012-11-07T20:28:07.560
> 
> 标签：cuda, gpu, linear-algebra, mathematical-optimization, hessian-matrix

使用 CUDA，我想用非线性最小二乘求解器求解方程组。这些方法在一本优秀的小册子中进行了讨论，可以在[这里](http://www2.imm.dtu.dk/pubdb/views/edoc_download.php/3215/pdf/imm3215.pdf)下载。

我的问题中的雅可比矩阵是稀疏的下三角矩阵。是否有可用于这些方法的 CUDA 库，还是我必须自己从手册中编写这些方法？

CUDA 库（免费或非免费）中是否提供 Gauss-Newton 非线性最小二乘求解器、Levenberg-Marquardt 或 Powell 方法求解器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-31T21:32:04.140

在指出 CUDA 中准牛顿优化例程的一种可能的简单实现之前，先介绍一下准牛顿优化器的工作原理。

考虑*N*个实变量*x*的函数*f并围绕某个点**xi*进行二阶展开：

 ***![在此处输入图像描述](../Images/e54b580de0dcb8ede3d80c58f43e79e1.png)

其中*A*是 Hessian 矩阵。

为了找到从点*xi*开始的最小值，牛顿法包括强制

![在此处输入图像描述](../Images/32b7689f72e7c49c43f8950bf2e388fd.png)

这需要

![在此处输入图像描述](../Images/b8107cab4fe2ce5b404af71817a91b78.png)

反过来，这意味着要知道 Hessian 的逆。此外，为保证函数递减，更新方向

![在此处输入图像描述](../Images/fde8aa3691b1f01550d5648a73db10e1.png)

应该是这样的

![在此处输入图像描述](../Images/335d7c74d23f34d828f81dd6b93c7ec8.png)

这意味着

![在此处输入图像描述](../Images/e5d5a8d5452e802ca9e3b9c23105a49a.png)

根据上述不等式，Hessian 矩阵应该是定正的。不幸的是，Hessian 矩阵不一定是正数，尤其是远离*f*的最小值，因此使用 Hessian 的逆矩阵除了计算负担外，还可能是有害的，将过程从最小值推向值增加的区域的*f*。一般而言，使用拟牛顿法更为方便，即Hessian 逆的近似，它保持一定的正数并在迭代收敛到Hessian 本身的逆之后更新迭代。拟牛顿法的粗略论证如下。考虑

![在此处输入图像描述](../Images/d98fc98387b21e7dbdbf130e9ccb36f5.png)

和

![在此处输入图像描述](../Images/75fe06dd6298438ac784bcd9a6ecc799.png)

减去这两个方程，我们有牛顿过程的更新规则

![在此处输入图像描述](../Images/7416ec75d53039b824feab8cad20a269.png)

拟牛顿过程的更新规则如下

![在此处输入图像描述](../Images/a79e39e5411ed86b0b974819f4d8748e.png)

其中*Hi+1*是上述矩阵，它近似于 Hessian 的逆矩阵，并一步一步地更新。

*更新Hi+1*有几个规则，这点我不再赘述。[Broyden-Fletcher-Goldfarb-Shanno](http://en.wikipedia.org/wiki/Broyden%E2%80%93Fletcher%E2%80%93Goldfarb%E2%80%93Shanno_algorithm)提供了一个非常常见的方案，但在许多情况下，[Polak-Ribiére](http://en.wikipedia.org/wiki/Nonlinear_conjugate_gradient_method)方案足够有效。

CUDA 实现可以遵循经典[数字食谱](http://www.nr.com/)方法的相同步骤，但要考虑到：

1）向量和矩阵运算可以通过CUDA Thrust或cuBLAS有效完成；2）控制逻辑可由CPU执行；3) 线最小化，包括根包围和根发现，可以在 CPU 上执行，仅加速 GPU 的成本函数和梯度评估。

通过上述方案，未知数、梯度和 Hessian 可以保留在设备上，无需在主机之间来回移动它们。

另请注意，文献中提供了一些方法，其中还提出了并行化线最小化的尝试，请参见

Y. Fei, G. Rong, B. Wang, W. Wang，“GPU 上的并行 L-BFGS-B 算法”，*计算机与图形学*，卷。40，2014，第 1-9 页。

在这个[github 页面上](https://github.com/OrangeOwlSolutions/Polak-Ribiere-Optimization/tree/master/CUDA)，可以使用完整的 CUDA 实现，将使用 的数值配方方法推广到`linmin`GPU并行案例。该方法实现了 Polak-Ribiére 的方案，但可以很容易地推广到其他准牛顿优化问题。`mkbrak``dbrent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:36:50.757

也看看这个：[libflame](https://www.cs.utexas.edu/~flame/web/libFLAME.html)包含由 BLAS 和 LAPACK 库提供的许​​多操作的实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:36:33.003

目前在任何库中都没有可用的程序来实现使用 CUDA 平台使用非线性最小二乘求解器求解方程组。这些算法必须从头开始编写，并借助其他一些使用稀疏矩阵实现线性代数的库。此外，正如上面评论中提到的，cuBLAS 库将有助于线性代数。

[https://developer.nvidia.com/cusparse](https://developer.nvidia.com/cusparse)

[http://code.google.com/p/cusp-library/](http://code.google.com/p/cusp-library/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T13:26:29.790

对于那些仍在寻找答案的人，这个适用于稀疏矩阵：OpenOF，“Framework for Sparse Non-linear Least Squares Optimization on a GPU”

*   [https://github.com/OpenOF/OpenOF](https://github.com/OpenOF/OpenOF)
*   [https://www.cv.tu-berlin.de/fileadmin/fg140/OpenOF_01.pdf](https://www.cv.tu-berlin.de/fileadmin/fg140/OpenOF_01.pdf)

GPU之于g2o之于CPU。***

# c++ - 使用 Boost 和 IOStreams 序列化为静态数据

> ID：13277649
> 
> 赞同：2
> 
> 时间：2012-11-07T20:28:08.853
> 
> 标签：c++, serialization, boost, bytearray

我正在尝试采用复杂的嵌套结构并将其作为静态数据直接存储在 .cpp 文件中。我想采取的方法是将我的对象（它已经支持 Boost 序列化）并将其作为二进制存档序列化为*字节数组*。然后我可以获取该字节数组，并遍历它以自动生成所需的 .cpp 代码来保存二进制数组。然后，我想从那个字节数组反序列*化回 object*。

所以基本上，在一天结束时，我想要这样的东西：

```
unsigned char* my_obj = { 10, 48, 48, 30, 20 ... } 
```

当我想使用该数据时，我只需将其包装在“字节流”中并再次将其传递给 Boost 以反序列化回我的实际对象。

我的问题是：有没有一些简单的方法可以将字节数组作为流传递？Boost 处理 istreams 和 ostreams 以读取和写入档案。我不想使用字符串流或文件流，而是我想可能是一个自定义流，它只是作为一个巨大的字节数组用于传递给它的任何内容。

我觉得应该有一种很好的方法来创建这个自定义流并让它与 Boost 序列化无缝协作......我只是不确定从哪里开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T21:52:27.263

> 无符号字符* my_obj = { 10, 48, 48, 30, 20 ... }

最好使用：

```
unsigned char my_obj[] = { 10, 48, 48, 30, 20 ... } 
```

所以你会有数组，它知道它的大小，而不仅仅是开始的指针。另外，如果您不打算修改它，请添加 const 。

* * *

> 我的问题是：有没有一些简单的方法可以将字节数组作为流传递？Boost 处理 istreams 和 ostreams 以读取和写入档案。我不想使用字符串流或文件流，而是我想可能是一个自定义流，它只是作为一个巨大的字节数组用于传递给它的任何内容。

检查[Boost 的 array_source 和 array_sink](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/classes/array.html)。

[现场演示](http://coliru.stacked-crooked.com/a/dc2968a74cf19f7b)：

```
#include <boost/archive/binary_iarchive.hpp>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/iostreams/device/array.hpp>
#include <boost/iostreams/stream.hpp>
#include <iostream>
#include <ostream>
using namespace boost;
using namespace std;

struct Data
{
    double value;

    template<class Archive>
    void serialize(Archive & ar, const unsigned int)
    {
        ar & value;
    }
};

int main()
{
    Data d={3.1415926};
    char buffer[256];
    {
        iostreams::array_sink sink(buffer);
        iostreams::stream<iostreams::array_sink> stream(sink);
        archive::binary_oarchive out_archive(stream);
        out_archive << d;
    }
    Data restored = {0.0};
    {
        iostreams::array_source source(buffer);
        iostreams::stream<iostreams::array_source> stream(source);
        archive::binary_iarchive in_archive(stream);
        in_archive >> restored;
    }
    cout << boolalpha << ( restored.value == d.value ) << endl;
} 
```

输出是：

```
true 
```

# apache - MyEclipse 中独立的 Apache Cocoon

> ID：13277651
> 
> 赞同：0
> 
> 时间：2012-11-07T20:28:29.697
> 
> 标签：apache, myeclipse, apache-cocoon

是否可以创建一个默认的 Apache Cocoon 项目，然后将其作为独立应用程序移至 MyEclipse？

我真的很想实现这一点，因为我将能够在 MyEclipse 中部署和调试应用程序（基本上可以完成所有工作）。不再依赖pom.xml，热部署依赖jar无需关机重启，一键创建打包部署等。

我该怎么做才能实现这一目标？任何提示/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:38:38.723

尝试这个：

为您的项目创建一个目录（实际上，您将创建两个项目）并切换到它。

输入命令：

```
mvn archetype:generate -DarchetypeCatalog=http://cocoon.apache.org 
```

选择工件 2 创建示例块 适当回答其他问题

输入命令：

```
mvn archetype:generate -DarchetypeCatalog=http://cocoon.apache.org 
```

选择artifact 3 创建一个cocoon web app 适当回答其他问题

将maven项目导入ME，File->Import->Maven4MyEclipse->Existing Maven Projects（使用上面创建的父目录作为导入的基础（如果要保持原始原始，请复制它，因为导入将实际使用该项目文件夹到位）。忽略错误。

在 MyEclipse 中，编辑 webapp pom 并添加为块项目定义的依赖项（在为 groupid、artifactid 和版本输入前几个字符后，您可以在每个字段中使用内容辅助 - Ctrl-Space）。保存 pom。

打开 webap 项目属性（右键单击，选择属性）然后转到 MyEclipse->Web 页面和部署选项卡。取消选择 Web 项目部署策略的“使用工作台默认设置”并选择 JAR... 选项。单击确定。

您现在应该能够使用 MyEclipse 进行部署 - 尝试部署到内置的 Tomcat 服务器并使用`http://localhost:8080/cocoon-webapp/block1/`在 Web 浏览器中访问您的块（将“block1”更改为您所称的新块）。

# java - Java：将具有不同类型的参数传递给函数

> ID：13277655
> 
> 赞同：10
> 
> 时间：2012-11-07T20:28:49.993
> 
> 标签：java, parameter-passing, implicit-conversion

在 Java 中，假设我们有一个带有参数的函数`double a`。如果我将整数作为参数传递，它会起作用吗？（我的意思是，是否存在隐式转换？）在相反的情况下：如果我有一个整数作为参数，并且我传递了一个双精度数？

不幸的是，我目前无法编译我的代码，我想检查一下这个断言。感谢您的关注。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T20:32:17.347

有关. [_](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3) _`Method Invocation Conversion`

> 方法调用上下文允许使用以下之一：
> 
> ```
> - an identity conversion (§5.1.1)
> - a widening primitive conversion (§5.1.2)
> - a widening reference conversion (§5.1.5)
> - a boxing conversion (§5.1.7) optionally followed by widening reference conversion
> - an unboxing conversion (§5.1.8) optionally followed by a widening primitive conversion. 
> ```

因此，您的第一次调用（`int`to `double`）将根据*规则 #2*正常工作。

但是根据同一部分中进一步引用的语句，第二次调用（ `double`to `int`）将给出*Compiler Error ：-*

> 如果无法通过方法调用上下文中允许的转换将表达式的类型转换为参数的类型，则会发生编译时错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T20:45:59.387

因为您可以将双精度设置为整数，所以整数作为参数可以使用双精度作为参数。其他方式失败。在这种情况下，您需要将 double 类型转换为 int。同样适用于正常的分配，例如..

```
 int i = 6;
  double d = 0;
  d = i;  /* ok
  i = d ; /* not ok 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:41:34.900

有时你可以通过让你的函数接受一个参数来解决这个问题`Number`。这是一个既继承`Integer`又`Double`继承的对象，因此直到`Double`数字和`Integer`数字行为相同的点，这将起作用。

`integer`请注意，原语and`double`和 Objects `Integer`and之间存在差异`Double`。Java 使用自动装箱在函数调用等中自动转换这些类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-02T09:09:50.203

最初，原始类型会发生**原始扩展。**例如你想打电话

```
 int input = 5; //int variable;
 apply(input); //calling method with int value. 
```

但是您的类不包含参数接受**int**的方法，因此编译器将进行**原始扩展**。它将检查是否存在**java long**参数的任何**apply**方法。如果存在，将调用该方法。如果不是，它将检查是否存在**浮动**参数，然后将其选中**。**如果那也找不到，它将使用**双重**参数查找**apply 。**

 ******```
public void apply(long input) {
    System.out.println("long");   // first pick by the compiler.
}
public void apply(float input) {
    System.out.println("float"); // if above method not found this will be selected.
}
public void apply(double input) {
    System.out.println("double"); // above two methods not present this will be selected.
} 
```

接下来，如果以上三个方法都没有找到，那么编译器将寻找**自动装箱**并尝试将其转换为相应的包装器。对于**int**它的**java.lang.Integer** 。因此它将使用**Integer**参数检查**应用。**如果这个找到的编译器将执行这个方法。

 **```
public void apply(Integer input) {
    System.out.println("Integer");
} 
```

最后，如果以上都不存在，编译器会查找任何名称为**apply**且接受**int...** 或 **Integer...**的方法，然后调用该方法。

```
public void apply(int... input) {
    System.out.println("int...");
} 
```

如果您的课程仅包含以下两种方法

```
public void apply(long input) {
    System.out.println("long");
}
public void apply(float input) {
    System.out.println("float");
} 
```

并且您想将**double**值传递给此方法，它不会编译。

```
double input = 5d;
apply(input); 
// The method apply(long) in the type YourClass 
//is not applicable for the arguments (double 
```

如果您想完成这项工作，您必须将其类型转换为您的方法可以接受的内容。

```
apply((int) input); 
```

然后编译器将尝试通过精确类型或原始扩展或自动装箱或数组匹配方式找到匹配项。********

# c# - 如何下载 HTTPS 网页的内容？

> ID：13277657
> 
> 赞同：2
> 
> 时间：2012-11-07T20:28:55.950
> 
> 标签：c#, .net, https

要访问该页面，我需要密码。我有密码，我可以访问该页面。

DownloadString(URL) 函数正在下载登录页面的内容，而不是我想要的实际页面。为什么？

```
using (var client = new WebClient())
            {
                var credentials = new NetworkCredential { UserName = "username", Password = "password" };
                client.Credentials = credentials;

                string pageContents = client.DownloadString(url);

                if (pageContents.Contains("cheetah"))
                {
                    MessageBox.Show("yes!");
                }
                else
                {
                    MessageBox.Show("No");
                }
            } 
```

以上是获取登录页面的内容，而不是我真正想要的页面。我如何通过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T00:23:33.023

当未经身份验证的客户端 ( `WebClient.DownloadString`) 请求页面时，通常会将其重定向到他们可以进行身份​​验证的登录表单。一旦凭据通过并确认，客户端通常会被带回他们最初请求的页面。

要通过这个，您需要模拟身份验证，这通常包括传递用户名和密码、接受 cookie 以及使用 cookie 进行进一步的请求。在最基本的层面上，这应该说明该方法：

```
using System.Text;
using System.Net;
using System.IO;
using System.Diagnostics;

namespace HttpsRequest
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            var cookieContainer = new CookieContainer();
            var loginRequest = WebRequest.CreateHttp("https://your.url.net/login");
            loginRequest.CookieContainer = cookieContainer;
            var response = loginRequest.Post("Login=foo&Password=bar");
            Debug.Assert(response.StatusCode == HttpStatusCode.OK || response.StatusCode == HttpStatusCode.NoContent);

            var homeRequest = WebRequest.CreateHttp("https://your.url.net/home");
            homeRequest.CookieContainer = cookieContainer;
            Debug.Assert(response.StatusCode == HttpStatusCode.OK);
            homeRequest.GetResponse().Body();
        }

        internal static HttpWebResponse Post(this HttpWebRequest request, string data)
        {
            try
            {
                request.Method = "POST";
                request.ContentType = "application/x-www-form-urlencoded";
                var encoding = new ASCIIEncoding();
                var dataAsBytes = encoding.GetBytes(data);
                request.ContentLength = dataAsBytes.Length;
                var stream = request.GetRequestStream();
                stream.Write(dataAsBytes, 0, dataAsBytes.Length);
                stream.Close();
                return (HttpWebResponse)request.GetResponse();
            }
            catch (WebException we)
            {
                return (HttpWebResponse)we.Response;
            }
        }

        internal static string Body(this WebResponse response)
        {
            var stream = response.GetResponseStream();
            using (var reader = new StreamReader(stream, Encoding.GetEncoding("utf-8")))
            {
                return reader.ReadToEnd();
            }
        }
    }
} 
```

为了使其工作，您可能希望查看使用 Fiddler、FireBug 或类似工具从浏览器发送到站点的实际请求，然后尝试尽可能多地模拟它。例如，该站点可能需要其他或不同的 post 字段、HTTP 标头或具有无效的 SSL 证书。

# shell - Groovy：如何在 groovy 中执行复杂的 shell 命令？

> ID：13277658
> 
> 赞同：3
> 
> 时间：2012-11-07T20:28:59.037
> 
> 标签：shell, groovy

我希望能够执行嵌套的 shell 命令。例如;

```
final String cmd = 'for i in pom.xml projects.xml; do find . -name $i | while read fname; do echo $fname; done;done' 
```

我尝试了以下语法，但无法使其运行。

1.  `def result = cmd.execute();`
2.  `def result = ['sh', '-c', cmd].execute();`
3.  `def result = ('sh -c for i in pom.xml projects.xml; do find . -name $i | while read fname; do echo $fname; done;done').execute()`

我会很感激这里的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T09:43:15.510

这应该有效：

```
def cmd = [
  'bash',
  '-c',
  '''for i in pom.xml projects.xml
    |do
    |  find . -name $i | while read fname
    |  do
    |    echo $fname
    |  done
    |done'''.stripMargin() ]

println cmd.execute().text 
```

（我已经格式化了命令文本，所以在这里看起来更好，你可以把它全部放在一行中）

我也相信您的命令可以替换为：

```
find . -name pom.xml -o -name projects.xml -print 
```

或者，在 Groovy 中：

```
def files = []
new File( '.' ).traverse() { 
  if( it.name in [ 'pom.xml', 'projects.xml' ] ) {
    files << it
  }
}

println files 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:52:12.027

感谢所有的帮助。这是一个很棒的社区。在传递环境和工作目录信息后，我能够得到这个工作。

```
def wdir = new File( "./", module ).getAbsoluteFile() ;
def env = System.getenv();
def envlist = [];
env.each() { k,v -> envlist.push( "$k=$v" ) }
final String cmd = 'for i in pom.xml projects.xml; do find . -name $i | while read fname; do echo $fname; done;done'
proc = ["bash", "-c", cmd].execute(envlist , wdir); 
```

# objective-c - 如何从 Cocoa 中的 NSTableView 获取单元格值？

> ID：13277659
> 
> 赞同：1
> 
> 时间：2012-11-07T20:29:01.227
> 
> 标签：objective-c, macos, cocoa, nstableview

我可能有一个愚蠢的问题，但我对 Cocoa 很陌生，所以我问它并不难过 :)

我有一个填充了一些数值的表格视图。我需要的是，当用户单击特定单元格时，会发生一些涉及此单元格值的操作。

例如：表的值从 1 到 10，用户单击一个值，该值的平方出现在窗口的某处。（用户点击 3 和 9 出现在表格旁边的某处）

我将非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:10:37.847

首先将您的应用委托设置为表视图的委托（使用 setDelegate 方法）。然后声明您的应用委托以实现 NSTableViewDelegate 协议（可能您已经这样做了 - 如果没有，请在 NSApplicationDelegate 之后添加 NSTableViewDelegate）。
然后实现这个方法：

```
- (void)tableViewSelectionDidChange:(NSNotification *)aNotification; 
```

这样，每当表格视图的选择发生变化时，您就会被注意到（使用表格视图的选定行方法来了解哪一行已更改）。
还有很多方法可以在 NSTableViewDelegate 中实现，当其他事件发生时要注意。

PS：不是愚蠢的问题。

# php - 如果在“表”中满足条件，则插入到“表1” 2 SQL

> ID：13277663
> 
> 赞同：1
> 
> 时间：2012-11-07T20:29:16.463
> 
> 标签：php, sql, insert, conditional-statements

**我发布了一个与此类似的问题，该问题是关于删除的，这是关于插入的。**

你好，

我正在使用 SQL 数据库在 PHP 中制作一个小型消息传递应用程序，但遇到了一个小问题。我会尽力解释这一点，所以这里......

我有一个名为“用户”的表，如下所示：

```
ID | Username | Password | Email 
-------------------------------------------
1  | Account1 | Pass 1   | email1@mail.com
2  | Account2 | Pass 2   | email2@mail.com 
```

然后我有另一个称为“朋友”，如下所示：

```
UserID | FriendID
------------------
   1   |     2 
```

所以我需要的是一个查询，如果在“用户”表中满足条件，它将数据插入“朋友”表

例子：

```
INSERT INTO 'friends' VALUES('$UserID', '$FriendID') IF (users.Password = $Password WHERE users.ID = $UserID) 
```

我希望这是一个足够好的解释，但我发现这很难解释。

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:33:46.437

这可能会做

```
INSERT INTO friends (userID, friendID)
SELECT $userID, $friendID
FROM users
WHERE (users.password = $password) and (users.id = $userid) 
```

如果 where 子句匹配，则无论匹配多少行，您都会插入许多行，并且由于您选择的是硬编码值而不是字段，因此您只需将这些值插入到朋友表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:34:58.273

尝试：

```
 INSERT INTO friends VALUES('$UserID', '$FriendID') where UserID in (Select ID from Users where users.Password = '$passoword' and users.ID = '$UserID') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:30:51.013

您需要将条件逻辑放在应用程序中，而不是 SQL 中。您的应用程序代码本身应负责确定是否应执行 INSERT。

# r - 如果元素是 x 并且前一个元素是 na，则在 R 中替换向量中的元素

> ID：13277666
> 
> 赞同：2
> 
> 时间：2012-11-07T20:29:24.940
> 
> 标签：r

```
foo <- c("a","a",NA,"b","a","a","b","b") 
```

如果前一个元素是 NA ，如何用“b”替换？

```
foo[foo=="b" & "previous-element"==NA] <- "whatever" 
```

所以预期的输出是：

```
result <- c("a","a",NA,"whatever","a","a","b","b") 
```

因此，只有以 NA 开头的“b”（实际数据中的很多）会被更改。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:57:27.270

一个简单的解决方案：

```
foo[-1][foo[-1] == "b" & is.na(head(foo, -1))] <- "whatever" 
```

* * *

*更新：*

`rollapply`包装中的解决方案`zoo`：

```
library(zoo)
foo[-1][rollapply(foo, 2, identical, c(NA, "b"))] <- "whatever" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:51:51.923

这是一种方法

```
foo <- c("a","a",NA,"b","a","a","b","b")

nas <- which(is.na(foo))  ## which are NA
bs <- which(foo == "b")   ## which are "b"

## the match() finds the index in nas that matches the one in bs - 1
foo[bs[match(nas, bs - 1)]] <- "whatever"
foo 
```

结果是

```
> foo
[1] "a"        "a"        NA         "whatever" "a"       
[6] "a"        "b"        "b" 
```

将其包装成一个函数以便于使用：

```
whatever <- function(x) {
  nas <- which(is.na(x))
  bs <- which(x == "b")
  x[bs[match(nas, bs - 1)]] <- "whatever"
  x
} 
```

这使

```
> foo <- c("a","a",NA,"b","a","a","b","b")
> whatever(foo)
[1] "a"        "a"        NA         "whatever" "a"       
[6] "a"        "b"        "b" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T21:09:40.450

一个完全令人费解的解决方案，`embed`只是为了好玩：

```
foo[which(
          apply(
                embed(foo,2),
                1,
                function(x) x[1]=="b" & is.na(x[2])
               )
         ) + 1
    ] <- "whatever"

> foo
[1] "a" "a" NA "whatever" "a" "a" "b" "b" 
```

# c# - C#字符串替换实际上并不替换字符串中的值

> ID：13277667
> 
> 赞同：39
> 
> 时间：2012-11-07T20:29:36.183
> 
> 标签：c#, .net, string

我正在尝试用另一个字符串替换字符串的一部分。更准确地说，我有 `C:\Users\Desktop\Project\bin\Debug`

我正在尝试`\bin\Debug` 替换`\Resources\People`

我尝试了以下方法：

1.  `path.Replace(@"\bin\Debug", @"\Resource\People\VisitingFaculty.txt");`

2.  `path.Replace("\\bin\\Debug", "\\Resource\\People\\VisitingFaculty.txt");`

上述两个似乎都不起作用，因为字符串保持不变并且没有任何内容被替换。难道我做错了什么？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-07T20:29:36.183

问题是字符串是不可变的。replace、substring 等方法不会更改字符串本身。他们创建一个新字符串并替换它。所以为了上面的代码是正确的，它应该是

```
path1 = path.Replace("\\bin\\Debug", "\\Resource\\People\\VisitingFaculty.txt"); 
```

要不就

```
path = path.Replace("\\bin\\Debug", "\\Resource\\People\\VisitingFaculty.txt"); 
```

如果不需要另一个变量。

这个答案也提醒我们字符串是不可变的。您对它们所做的任何更改实际上都会创建一个新字符串。因此，请记住所有涉及字符串的内容，包括内存管理。如文档[here](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/strings/)中所述。

> 字符串对象是不可变的：它们在创建后无法更改。所有看似修改字符串的 String 方法和 C# 运算符实际上都在一个新的字符串对象中返回结果

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-07T20:32:49.677

该`path.Replace`方法实际上返回一个`string`. 您应该执行以下操作：

```
path = path.Replace("firstString", "secondString"); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-07T21:07:25.407

```
String.Replace(string,string) returns string. 
```

因此，将新路径保存在某个字符串变量中。

```
path = path.Replace("\\bin\\Debug", "\\Resource\\People\\VisitingFaculty.txt"); 
```

# sql-server - 选择超过 X 个订单的公司名称

> ID：13277670
> 
> 赞同：1
> 
> 时间：2012-11-07T20:29:40.517
> 
> 标签：sql-server, northwind

Order 表包含订单列表以及每个订单的客户 ID。并且不同的订单可以有相同的客户 ID，这意味着一个公司已经下了多个订单（假设客户 ID 是公司的 ID）。

公司名称来自客户表，我的目标是选择订单数量超过 X 的公司名称。

现在，我的第一步是将这两个表连接起来进行比较，然后我也可以选择公司名称，但是我对如何只选择超过X个订单的公司感到困惑。

到目前为止，我有这个，它为他们发出的 X 数量的订单写了 X 次公司名称。

```
SELECT CompanyName
    FROM Orders, Customers
        WHERE Orders.CustomerID = Customers.CustomerID; 
```

我如何只获得大于 X 订单的公司名称？我尝试使用 WHERE COUNT(CompanyName)>3 ，但这只是给出了错误。我认为我没有学到任何其他方法来量化列中的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:36:37.333

```
 SELECT CompanyName
    FROM Orders
    JOIN Customers ON Orders.CustomerID = Customers.CustomerID
GROUP BY CompanyName
  HAVING COUNT(CompanyName) > 3 
```

# sql - 在sql server中将字符串转换为日期

> ID：13277674
> 
> 赞同：21
> 
> 时间：2012-11-07T20:29:51.360
> 
> 标签：sql, sql-server

如何在 SQL Server 中将`YYYY-MM-DD`( ) 转换为日期？`2012-08-17`

我没有在帮助页面上看到这种格式：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-07T20:32:13.133

我认为风格没有。111（日本）应该工作：

```
SELECT CONVERT(DATETIME, '2012-08-17', 111) 
```

如果由于某种原因这不起作用 - 你总是可以去掉破折号，然后你就拥有了完全可靠的 ISO-8601 格式 ( `YYYYMMDD`)，它适用于 SQL Server 中的**任何**语言和日期格式设置：

```
SELECT CAST(REPLACE('2012-08-17', '-', '') AS DATETIME) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T20:32:44.373

这可以解决问题：

```
SELECT CONVERT(char(10), GetDate(),126) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-17T19:51:20.307

我也有类似的情况。这是我能够在“where”子句中获取日期范围的方法（对 marc_s 答案的修改）：

```
where cast(replace(foo.TestDate, '-', '') as datetime) 
      between cast('20110901' as datetime) and
              cast('20510531' as datetime) 
```

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T02:44:21.023

如果您的数据类型是 table.col 的 datetime ，则数据库存储数据包含两个部分：1（日期）2（时间）

只是在显示数据中使用转换或转换。

例子：

```
create table #test(part varchar(10),lastTime datetime)
go

insert into #test (part ,lastTime )
values('A','2012-11-05 ')

insert into #test (part ,lastTime )
values('B','2012-11-05 10:30')

go

select * from #test 

A   2012-11-05 00:00:00.000
B   2012-11-05 10:30:00.000

select part,CONVERT (varchar,lastTime,111) from #test

A   2012/11/05
B   2012/11/05

select part,CONVERT (varchar(10),lastTime,20) from #test 

A   2012-11-05
B   2012-11-05 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T08:28:19.123

写一个函数

```
CREATE FUNCTION dbo.SAP_TO_DATETIME(@input VARCHAR(14))
RETURNS datetime
AS BEGIN
    DECLARE @ret datetime
    DECLARE @dtStr varchar(19)

    SET @dtStr = substring(@input,1,4) + '-' +  substring(@input,5,2) + '-' + substring(@input,7,2)
                + ' ' + substring(@input,9,2) + ':' + substring(@input,11,2) + ':' + substring(@input,13,2);        

    SET @ret = COALESCE(convert(DATETIME, @dtStr, 20),null);
    RETURN @ret
END 
```

# sql - 以下等式的 SQL。今日 EMA = (价格 * (2/11)) + ((1 - (2/11)) * 昨日 EMA)

> ID：13277677
> 
> 赞同：1
> 
> 时间：2012-11-07T20:29:55.407
> 
> 标签：sql, ms-access, ms-jet-ace

我可以请您帮忙解决以下问题吗？

我想创建一个 MS Jet/Ace/Access 查询，它从价格数据表中返回 10 天指数移动平均线 (EMA)。表格格式及其一小部分数据如下……</p>

```
TableName = Spot
ID (AutoNumber) aDate (DateTime)        Settle (Double)
1               01/10/2007              16.056
2               02/10/2007              15.625
3               03/10/2007              15.655
4               04/10/2007              15.686
5               05/10/2007              15.810
6               08/10/2007              15.665
7               09/10/2007              15.908
8               10/10/2007              16.004
9               11/10/2007              16.319
10              12/10/2007              16.233 
```

如果您不了解指数移动平均线，以下网站可能有助于解释它们……</p>

[http://stockcharts.com/help/doku.php?id=chart_school:technical_indicators:moving_averages#exponential_moving_a](http://stockcharts.com/help/doku.php?id=chart_school:technical_indicators:moving_averages#exponential_moving_a)

[http://www.pandacash.com/technical-analysis/moving-average/exponential.htm](http://www.pandacash.com/technical-analysis/moving-average/exponential.htm)

但是，希望我可以向您解释这个等式。

```
Todays EMA = (Settle * Exponent) + ((1 - Exponent) * Yesterdays EMA) 
```

在哪里

```
Settle = Closing price of the Stock / Asset
Exponent = (2 / (10 Days + 1)) ie 0.1818 
```

我有一个查询返回我需要的一些值，但我无法找到整个事情的解决方案。

到目前为止，我的查询（希望格式可以更清晰地阅读）

```
SELECT aDate, Settle, 

   (SELECT((SELECT Settle 
            FROM   SPOT AS SubQ 
            WHERE  SubQ.ID = SS.ID)) 
    FROM   SPOT AS SS 
    WHERE  SS.ID = Spot.ID - 1) AS YesterdaySettle,

   ( 2 / 11 ) AS Exponent,

   (SELECT Settle 
    FROM   SPOT AS SS 
    WHERE  SS.ID = Spot.ID) * ( Exponent ) AS [Part A],

   ( 1 - Exponent ) AS [Part B],

   (SELECT ((SELECT Settle 
              FROM   SPOT AS SubQ 
              WHERE  SubQ.ID = SS.ID) * ( 2 / 11 )) 
    FROM   SPOT AS SS 
    WHERE  SS.ID = Spot.ID - 1) AS [Yesterdays Part A],

   (SELECT SUM(Settle) 
    FROM   SPOT AS SubQ 
    WHERE  ID BETWEEN Spot.ID AND Spot.ID -9) / Iif(Spot.id > 10, 10, Spot.id) AS [10DMA] 

FROM   SPOT
ORDER  BY aDate; 
```

根据我的查询的字段名称，我的等式将是……</p>

```
Todays EMA = ([Part A])  + ([Part B] * [Part C]) 
```

我希望结果类似于以下内容。

```
[10DMA] [Exponent]  [Part A]    [Part B]    [Part C] (Previous EMA)     [EMA]
15.896  0.181818182 2.919272727 0.818181818     USE 10DMA ie 15.896     15.925
15.911  0.181818182 2.840909091 0.818181818                 15.925      15.871
15.945  0.181818182 2.846363636 0.818181818                 15.871      15.831
15.985  0.181818182 2.852       0.818181818                 15.831      15.805
16.027  0.181818182 2.874545455 0.818181818                 15.805      15.806
16.037  0.181818182 2.848181818 0.818181818                 15.806      15.780
16.052  0.181818182 2.892363636 0.818181818                 15.780      15.803
16.054  0.181818182 2.909818182 0.818181818                 15.803      15.840
16.039  0.181818182 2.967090909 0.818181818                 15.840      15.927
16.025  0.181818182 2.951454545 0.818181818                 15.927      15.983 
```

问题是我不知道如何创建 [Part C] 字段。

有些观点是……</p>

*   如果一天没有 EMA，则 [Part C] 值应为 [10DMA]。例如，第一条记录没有 EMA，所以我需要使用 [10DMA]。
*   如果昨天有一个 EMA，那么将这个值用于今天 [C 部分]。

我可以请教一些建议吗？到目前为止，我有点偶然发现了我所拥有的东西，但我对 C 部分的价值感到困惑。

我以为我可以按照以下方式做一些事情……</p>

```
iif (EMA <> 0, EMA, [10DMA]) AS [Part C],
    (([Part A]) + ([Part B] * [Part C])) AS EMA 
```

但是，我收到一个与

```
Circular reference caused by alias 'Part C'. 
```

任何建议将不胜感激。非常感谢您的时间。

约翰。

# javascript - 使用 Javascript/CSS 展开/折叠 div 时交换三角形图标

> ID：13277681
> 
> 赞同：2
> 
> 时间：2012-11-07T20:30:09.103
> 
> 标签：javascript, jquery, css, sharepoint, icons

我需要使用 CSS 切换基于切换的图标和文本。最初，功能区将被隐藏。如何根据我的 JavaScript 分配的 css 类进行图标和文本交换？是推拉门的技术吗？

HTML：

```
 <div id="ribbonHide">
                <a class="toolTipHover" href="#">
                    <div class="downArrowSmall">
                        <span class="ribbonHideToolTipOpen">Display the Ribbon</span> 
                        <span class="ribbonHideToolTipClose">Hide the Ribbon</span>
                    </div>
                </a>
            </div> 
```

JavaScript：

```
 $('.toolTipHover > div').on('click', function() {
     $('#s4-ribbonrow').toggle();
     $(this).toggleClass('downArrowSmall upArrowSmall');
     FixRibbonAndWorkspaceDimensions();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:41:10.103

Adding some more context could be useful, but here is my guess to what you need. You should at least use a function **(Edit: I see you use a bind now)** that toggles everything and i would use one span, so something like this:

```
<script type="text/javascript">
function ToggleArrow(arrow)
{
   $('#s4-ribbonrow').toggle();
   $(arrow).toggleClass('downArrowSmall upArrowSmall');
   if($('#s4-ribbonrow').is(":visible"))
   {
     $(arrow).children(".ToolTip").html("Hide the Ribbon");
   }
   else
   {
     $(arrow).children(".ToolTip").html("Display the Ribbon");
   }
 FixRibbonAndWorkspaceDimensions(); 
}
</script>
        <div id="ribbonHide">
                <div class="downArrowSmall" onclick="ToggleArrow(this)">
                    <span class="ToolTip">Display the Ribbon</span> 
                </div>
        </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:36:32.167

首先删除内联脚本...

**块级元素也不应该**嵌套在内**联元素中**..意味着它是不合法的，但它可能会在以后出现问题..

```
// Select the immediate Div's inside the anchors
    $('.toolTipHover > div').on('click', function() {
         $('#s4-ribbonrow').toggle();
         $(this).toggleClass('downArrowSmall upArrowSmall'); // Toggle class
         FixRibbonAndWorkspaceDimensions();
    }); 
```

# javascript - onmouseover 不适用于我的功能？

> ID：13277685
> 
> 赞同：0
> 
> 时间：2012-11-07T20:30:20.453
> 
> 标签：javascript, html, onmouseover

我目前正在学习使用java脚本，遇到了一个我无法解决的问题。在一个简单的 HTM 中，为了练习，我制作了一个修改 div 上边距的脚本：

```
var boton = (function () {
var timerId;

return function (margin, element) {
    var i = 2;
    timerId = setInterval (function () {
    if (i > margin) 
        i = 2;
        element.style.marginTop = i + 'px';
        i++;
    }, 100);
}; }) (); 
```

如果我以这种方式调用该函数，它将起作用：

```
<script type="text/javascript">
boton (50 , document.getElementById("botondiv"));
</script> 
```

但是，如果我尝试在 A 标签上的鼠标悬停事件中调用它，它将不起作用

```
<a onmouseover="boton (50 , document.getElementById("botondiv"));" href="#"></a> 
```

我对此的想法是，当有人将鼠标悬停在 A 标签上时，元素的上边距会被修改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:33:06.113

好吧，你在引号内有引号，没有转义，例如。

```
<a onmouseover="boton (50 , document.getElementById("botondiv"));" href="#"></a> 
```

应该：

```
<a onmouseover="boton (50 , document.getElementById('botondiv'));" href="#"></a> 
```

# python - 返回打开文件python中部分的平均数

> ID：13277695
> 
> 赞同：0
> 
> 时间：2012-11-07T20:31:29.960
> 
> 标签：python, file, list, readline

我得到一个 8 行的文本文件，每行都有一个 ID 号、姓名、部分和等级，由空格分隔。我应该返回给定部分的平均值。我对python是全新的，因此我很难弄清楚它。有人可以帮忙吗？我的参数是一个随机文本文件和一个节号

def average_by_secion（文本文件，部分）：

```
'''(io.TextIOWrapper, str) -> flt or NoneType 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:41:48.773

```
listOfLines = []
while file:
   listOfLines.append(file.readline())
   total = 0
   numOfGrades = 0
   for i in listOfLines:
       total+=int(i.split()[3])
   numOfGrades += 1

return total/numOfGrades 
```

我认为...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:37:58.043

只是发布一些一般过程：

1.  读取文件的每一行并检查该部分是否与您需要的部分匹配。有很多关于如何在 python 中读取文件 的[教程。](http://docs.python.org/2/tutorial/inputoutput.html)[CSV](http://docs.python.org/2/library/csv.html)模块可以帮助您将您的行变成列表或字典

2.  如果该行具有匹配的部分编号，您可以将其等级添加到集合[列表](http://docs.python.org/2/tutorial/datastructures.html#more-on-lists) `section_grades_list = []`

3.  一旦你有一个平均成绩列表，从那里开始应该很容易`sum(section_grades_list) / len(section_grades_list)`

# ios - 使用 GameKit 进行远程设备间通信

> ID：13277697
> 
> 赞同：1
> 
> 时间：2012-11-07T20:31:39.200
> 
> 标签：ios, gamekit

我正在为我的公司开发一对应用程序。一个将由我们的一位销售代表使用，另一个将分发给我们的客户。销售应用程序通过 Enterprise 分发，客户端应用程序将通过 App Store 分发。

在某些时候，我需要这两个应用程序远程相互通信（在不同的设备上运行）。我最多可以保证这两个用户将通过 wi-fi 连接到互联网。

我已经进行了一些初步研究，但未能找到这些特定问题的答案：

1.  ~~GameKit 可以通过互联网建立连接吗？
    所有文档都提到本地 Wi-Fi 连接，这似乎意味着两个用户连接到同一个 Wi-Fi 网络。~~

2.  ~~GameKit 能否在具有不同捆绑 ID 的两个应用程序之间建立连接？
    同样，查看文档并没有找到任何指定两个用户必须运行相同的确切应用程序的内容，允许使用不同的版本，但这似乎意味着他们必须具有相同的捆绑 ID。~~

3.  如果我使用 GameKit 配对来配对我的两个用户，这会让我的应用程序出现在 Game Center 中吗？

4.  我是否通过允许我的 Enterprise 应用程序和我的 App Store 应用程序之间的通信违反了某些使用条款？

编辑：我能够在 GameKit 编程指南中找到一条注释，指出具有不同捆绑 ID 的应用程序可以通过 Game Kit 连接

EDIT2：在 Game Kit Programming Guide 中发现这句话似乎表明位置和网络类型不是连接问题：

> 如有必要，Game Kit 会通过 Game Center 的服务器路由网络数据，以便所有比赛参与者相互连接，无论他们身在何处或在何种网络上。

# linux - Cygwin XWin 服务器随机断开连接

> ID：13277701
> 
> 赞同：1
> 
> 时间：2012-11-07T20:31:58.640
> 
> 标签：linux, ssh, cygwin, x11

我正在使用 cygwin 将 ssh 连接到远程 linux 机器，并正在使用 cygwin XWin 服务器来显示 gui 应用程序。

当我第一次连接到远程机器时，会显示以下警告：

```
Warning: untrusted X11 forwarding setup failed: xauth key data not generated
Warning: No xauth data; using fake authentication data for X11 forwarding. 
```

不管警告如何，XWin 一开始似乎都能完美运行。一段时间后（通常大约 15 分钟），它将不可避免地失去连接。cygwin X 服务器图标仍然显示在 Windows 任务栏中，所以我知道它仍在运行。到目前为止，我发现的唯一解决方法是注销然后再次 ssh 重新登录。超级烦！请帮忙！

![gvim 和 xterm 不工作，因为 XWin 停止工作](../Images/a3cefac156f37bff11c9bce40e173c24.png)

谢谢，

-德里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:58:29.830

我通过使用解决了这个问题：

```
ssh -Y user@server 
```

代替

```
ssh -X user@server 
```

显然，-Y 和 -X 标志都做同样的事情（启用 X11 转发）。不同之处在于 -X 使用安全模式，而 -Y 使用信任模式。如果您信任要连接的机器，请仅使用 -Y。如果您使用 -X，那么远程机器将受限于它可以对您的显示器执行的操作。对我来说，这意味着我的显示会在一段时间后超时。使用 -Y 代替，我的连接永远不会超时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:43:26.243

**tl;博士**使用`ssh -Y`

从 openssh 5.6 开始，当您连接时`ssh -X`，请求不受信任的连接，ForwardX11Timeout 值（默认为 20 分钟）被强制执行，即使不受信任的 X11 转发设置失败并且建立了受信任的连接。（我找不到任何有关此更改的公告，但请参阅 [1] 了解相关代码更改）。

此超时是您在使用 时要求的“安全”策略的一部分`ssh -X`，并防止在超时到期后与 X 服务器建立新连接。

如果您将`-v`选项添加到 ssh（这在调查 ssh 问题时通常很有帮助），您应该在尝试启动新客户端时收到“在 ForwardX11Timeout 过期后拒绝 X11 连接”消息。

[1] [http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/ssh/clientloop.c.diff?r1=1.220;r2=1.221;f=h](http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/ssh/clientloop.c.diff?r1=1.220;r2=1.221;f=h)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:56:04.407

当我阅读“远程”时，我认为防火墙。可能是您在 ssh 会话上有一个不活动计时器，导致它在一段时间后“拆除”？如果是这样，您会在各种日志（服务器和防火墙）中找到它的痕迹。如果没有，这只是一般的 cygwin-X-stability-problem，您可能需要考虑使用 virtualbox | vmware 和您在 windows-Box 上选择的 linux-distro。如果您使用“nat”作为以太网设备，它将搭载 Windows 的 IP；如果您需要 ssh “进入”您的 VM-Guest，您可以设置窗口以将传入的 tcp/22 传递到 VM-Guest 的堆栈。（如果您在 tcp/22 上使用 cygwin 的 sshd，则无法使用）；否则祝你好运//rhi

# c - C中的内存管理，在函数中传递指针，分段错误

> ID：13277707
> 
> 赞同：0
> 
> 时间：2012-11-07T20:32:27.140
> 
> 标签：c, memory-management

我有三个文件：

### 某事.h

```
typedef struct {
    int size_t;
    char *c;
} p;

p ** createMatrix(int r, int c);

void printMatrix(p **matrix, const int r, const int c); 
```

### 某事.c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "something.h"

p **
createMatrix(int r, int c)
{
    int rowsize=r*2+1;
    int colsize=c*2+1;

    /* memory alloc of rows */
    p **matrix=malloc(rowsize*sizeof(p *));
    int k;
    for(k=0; k<rowsize; k++)
    {
        /* memory alloc of columns */
        matrix[k]=malloc(colsize*sizeof(p));
    } 
    int i, j;
    for(i=0; i<rowsize; i++)
    {
        for(j=0; j<colsize; j++)
        {
            /* columns is between letters */
            if(j%2!=0)
            {   
                matrix[i][j].size_t=7;
                matrix[i][j].c=malloc(8*sizeof(char));
                strcpy(matrix[i][j].c,"       ");
            }
            else if(i%2==0 && j%2==0)
            {
                matrix[i][j].size_t=1;
                matrix[i][j].c=malloc(sizeof(char));
                *(matrix[i][j].c)='a';
            }
            else
            {
                matrix[i][j].size_t=1;
                matrix[i][j].c=malloc(sizeof(char));
                *(matrix[i][j].c)=' ';
            }
        }
    }       
    return matrix;
}

void
printMatrix(p **matrix, const int r, const int c)
{
    int rowsize=r*2+1;
    int colsize=c*2+1;
    printf("\n");
    int i, j;
    for(i=0; i<rowsize; i++)
    {
        printf("\t");
        for(j=0; j<colsize; j++)
        {
            if(matrix[i][j].size_t==1)
                printf("%c", *matrix[i][j].c);
            else
                printf("%s", matrix[i][j].c);

        }
        printf("\n");
    }
    printf("\n");
 } 
```

### 主程序

```
#include <stdlib.h>
#include <stdio.h>
#include "something.h"    

void
printMenufunction(p **matrix, int rows, int cols)
{
    int rowsize=rows*2+1;
    int colsize=cols*2+1;
    /* memory alloc of rows */
    matrix=malloc(rowsize*sizeof(p *));
    int i;
    for(i=0; i<rowsize; i++)
    /* memory alloc of columns */
        matrix[i]=malloc(colsize*sizeof(p));
    matrix=createMatrix(rows, cols);
}

int
main(void)
{
    int rows, cols;
    p **matrix;
    char stringtemp[3];
    printf("ask for row and col in form (5x5):\n");
    scanf("%s", stringtemp);
    sscanf(stringtemp, "%dx%d", &rows, &cols);
    printMenufunction(matrix, rows, cols);
    printMatrix(matrix, rows, cols);
    return 0;
} 
```

这个代码示例是我的 prog 的简化版本，它给了我一个分段错误。我已经用 gdb 对其进行了调试，所以我知道它在这些行中的某个地方是故障所在。我将不胜感激，谢谢。

更新：我无法调试此版本。我有更多代码的旧编告诉我它在这个区域，但至少我不知道在哪里？所以这就是为什么我不能发布导致分段错误的确切行。如果我知道我想我可以自己解决这个问题。我希望有人能比我看得更清楚。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:35:56.427

由于 C 是一种按值传递的语言，对函数参数的任何赋值都只会修改参数的本地副本，因此当`printMenufunction`返回时，`matrix`仍然没有初始化。

您需要通过引用将指针传递给矩阵：

```
printMenufunction(&matrix, rows, cols);
printMatrix(&matrix, rows, cols); 
```

并在函数内部取消引用。例如：

```
//                       v Pointer to the double-pointer
void printMenufunction(p ***matrix, int rows, int cols)
{
    int rowsize=rows*2+1;
    int colsize=cols*2+1;
    /* memory alloc of rows */
//  v Dereferencing the pointer
    *matrix=malloc(rowsize*sizeof(p *));
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:42:58.533

首先，告诉我们*gdb指出的**哪一*行有问题，而不是仅仅说“它在这些行中的某个地方”，这对我们很有帮助。gdb 应该能够*准确*地告诉您是哪一行触发了错误。

话虽如此，这里有一个候选人：

```
char *stringtemp;
printf("ask for row and col in form (5x5):\n");
scanf("%s", stringtemp); 
```

`stringtemp`没有被分配到任何有意义的地方；您所拥有的只是一个初始值*不确定*的指针。所以这是一个潜在的段错误。`stringtemp`为指向的缓冲区分配一个缓冲区，或者将其分配为一个数组`char`：

```
char stringtemp[SOME_SIZE]; // where SOME_SIZE is as big as you need. 
```

你为什么要分配矩阵`printMenuFunction`？！你为什么不使用你的`createMatrix`功能？！

**编辑**

我讨厌变老；我完全错过了`createMatrix`被调用的`printMenuFunction`那个（这意味着`malloc`调用`printMenuFunction`是多余的，需要消除）。

重写你`printMenuFunction`的如下：

```
void printMenuFunction(p ***matrix, int rows, int cols)
{
  *matrix = createMatrix(rows, cols);
} 
```

请注意，在该函数中，如果您需要访问 的元素`matrix`，则需要在应用下标*之前*取消引用它，例如

```
(*matrix)[i][j].size = ...; 
```

重写你`main`的如下：

```
int
main(void)
{
    int rows, cols;
    p **matrix;
    char stringtemp[3]; // 3 is not big enough to hold a string like "5x5";
                        // that requires an array size of *at least* 4\.  
                        // "10x10" would require 6 characters.  You need
                        // an extra character for the 0 terminator.

    printf("ask for row and col in form (5x5):\n");
    scanf("%s", stringtemp);
    sscanf(stringtemp, "%dx%d", &rows, &cols);
    printMenufunction(&matrix, rows, cols); // note the & in front of matrix
    printMatrix(matrix, rows, cols);
    return 0;
} 
```

# html - HTML表格底部属性滚动条

> ID：13277717
> 
> 赞同：-1
> 
> 时间：2012-11-07T20:33:03.833
> 
> 标签：html, css, position, scrollbar, css-tables

当我使用以下 CSS 代码时；

```
position: absolute;
bottom: 5;
right: 0; 
```

它显示带有垂直滚动条的表格行，我要做的只是将一些东西粘贴到表格行的右下角，然后将底部设置为“5”以给它一些空间，这样其他 div 就不会重叠，在这样做时，它会显示一个垂直滚动条。

无论如何要删除滚动条，但确保表格行中的所有内容都会显示？

溢出：隐藏；似乎行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:41:30.563

Solved, wasn't applying it to the correct div.

# c# - 如何从 BackGroundWorker 终止控制台模式应用程序

> ID：13277719
> 
> 赞同：1
> 
> 时间：2012-11-07T20:33:05.260
> 
> 标签：c#

我正在创建一个 BackgroundWorker，在它的 DoWork 函数中我有以下代码：

```
 foreach (string newFilepath in newFilesPath)
        {
                        if (!File.Exists(encryptedFilePath))
                        {
                            encryptedFiles.Add(encryptedFilePath);
                            Helper.SendErrorMail(null, "Could not find encrypted file.", encryptedFilePath);
                            Application.Exit();
                        }
                        else
                        {
                            Helper.Count_DataFeeds++;
                            File.Delete(newFilepath);
                        }
        } 
```

根据此代码，我应该只看到一封邮件，因为应用程序存在，但是我看到了 8 封邮件（对于它正在迭代的每个文件）。为什么应用程序不退出？我想立即杀死该应用程序。

它是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:52:34.353

> 它是一个控制台应用程序

这意味着 Application.Exit() 将不起作用，它只会关闭打开的 Winform 表单。副作用是关闭主窗体会导致消息循环退出。它完成了 Application.Run() 调用，它完成了 Main() 方法并终止了应用程序。

控制台模式应用程序没有任何窗口，也没有消息循环。您应该改用 Environment.Exit() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:01:05.907

您需要从对消息泵的基本了解开始。UI 线程是什么，在某个非常低的级别上，是一个 while 循环：

```
while(!shouldQuitapplication)
{
   Item nextItem = queue.GetNextItem();
   nextItem.Run();
} 
```

每次调用`Control.Invoke`时，都会向队列中添加一个新项目，每次钩子触发事件（鼠标移动、按钮单击等）时，它都会向队列中添加一个新项目。所有项目都是按照收到的顺序同步处理的。

`Application.Exit`本质上是一种在队列中所有现有项目完成后结束整个过程的方式。

因为你有一个 BackgroundWorker 正在运行，除了 UI 线程正在做的任何事情之外，它还在做“其他事情”。当您告诉 UI 线程退出时，将需要一些时间来完成队列中的剩余任务。（这就是您看到后台任务执行更多操作的原因；这个数字可能会有所不同。）

请注意，一旦没有更多的非后台线程，整个进程就会被拆除。UI 线程是非后台线程，而您使用的 BackgroundWorker 使用后台线程。当 UI 线程结束时，后台工作程序将停止。如果您手动创建非 UI 线程，那么它可能会保持进程“启动”并且即使在 UI 线程停止后它也不会停止。（虽然这将是一个倒退，所以很明显这在这种情况下没有帮助。）

`Application.Exit`正如另一个答案中提到的那样，解决方案是通过调用`break`,`return`或只是以不同的方式构造循环以使其在无效项目上停止，以确保后台任务在您调用后不做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:57:21.300

Environment.Exit 是需要的。

# ruby-on-rails - Ruby - LoadError enc/trans/single_byte

> ID：13277729
> 
> 赞同：6
> 
> 时间：2012-11-07T20:33:19.917
> 
> 标签：ruby-on-rails, ruby, activerecord, psych

在我的 Ruby on Rails 应用程序中使用 ActiveRecord::Store 模块时遇到了一个奇怪的问题。据我了解，该模块在后台使用“序列化”方法，因此它只是使用 ruby​​ 内置的 psych gem 将您的数据序列化为 yaml 格式。

它大部分时间都可以正常工作，但有时我会收到 500 错误并显示以下消息：

```
LoadError (cannot load such file -- enc/trans/single_byte):
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `write'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `end_document'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `visit_Psych_Nodes_Document'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `block in visit_Psych_Nodes_Stream'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `each'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `visit_Psych_Nodes_Stream'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/nodes/node.rb:46:in `yaml'
~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych.rb:243:in `dump' 
```

如您所见，我使用 rbenv 和 ruby​​ 1.9.3-p286。我的系统是 Ubuntu 11.10。所需文件存在`~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so`。我在使用 ruby​​ 1.9.3-p194 时遇到了同样的错误。而这个问题最奇怪的部分是这个错误不时发生。

那么也许有人也遇到了这个问题并且已经找到了解决方案？还是它看起来更像是心理中的一个错误，我应该将它提交给它的维护者？

提前感谢您的帮助！

编辑：问题与心理宝石没有直接关系。这是不寻常的红宝石设置的一般问题。有关详细信息，请参阅下面接受的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:13:03.957

这是否发生在您的开发环境的舒适范围内？如果是这样，我会考虑在`pry-rescue`'`Pry.rescue do … end`块下运行它并在那里闲逛。

我怀疑数据差异。这棵树中是否有意涉及任何非ASCII？你可以用这样的东西来追捕它：

```
ruby -e 'Dir["**/*.yml"].each{|e| File.read(e)[/[^\x0-\x7f]/] and puts e}' 
```

如下所示，rbenv 安装与其他用户共享，因此请务必在任何更改时重做权限：

```
 chmod a+r -R ~/.rbenv/ 
```

或者也许创建一个共享组，例如`src`，然后：

```
 chgrp src ~/.rbenv && chmod g+r -R ~/.rbenv 
```

# ios - Xcode 没有找到 openActiveSessionWithReadPermissions: FacebookSDK for iOS 方法

> ID：13277730
> 
> 赞同：0
> 
> 时间：2012-11-07T20:33:20.183
> 
> 标签：ios, facebook-ios-sdk

我正在尝试将 iOS 的 facebook sdk 从 3.0 升级到 3.1.1。我添加了新的 FacebookSDK。我想我做得对，很容易...安装下载的 FacebookSDK-3.1.1.pkg 并将 facebook.framework 和 FacebookSDKResources.bundle 拖放到项目的框架中。

我正在尝试使用 openActiveSessionWithReadPermissions: 方法，但是当我构建项目时，我收到消息“No known class method for selector 'openActiveSessionWithReadPermissions:”

我不知道为什么，因为如果我检查 FacebookSDK.framework 标头，我可以在 FBSession.h 类中看到 openActiveSessionWithReadPermissions: ...

我已经清理了构建文件夹、派生数据文件夹、os x 缓存，......

怎么了？

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:21:17.467

问题是 FacebookSDK.framework 之前已复制到项目文件夹中。因此，Xcode 在项目文件夹中找到了旧框架。

解决方案：从项目文件夹中删除 FacebookSDK.framework。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:27:18.983

我猜想升级不干净，因为它似乎在使用旧版本。继续删除 ~/Documents/FacebookSDK 文件夹，然后重新安装包。

要检查的另一件事是您的框架搜索路径。在 Xcode 中，转到项目导航器，选择您的项目，选择目标，然后单击 Build Settings 并搜索 Frameworks Search Paths。看看它是否指向你期望你的框架在哪里。

# c# - 在 C# 中具有不可为空的引用类型的基本问题是什么？

> ID：13277733
> 
> 赞同：-4
> 
> 时间：2012-11-07T20:33:33.833
> 
> 标签：c#, types, language-features, c#-5.0, non-nullable

目前，C# 中不存在不可为空的类型。很明显，与任何其他功能一样，开发它需要时间和金钱。这里没有问题。但是，我可以看到拥有它的很多好处。最明显的一项是消除对空值检查的需要，并且几乎没有机会出现空引用异常。所以假设我是对的，是否存在一个基本问题使得这个功能太昂贵而无法添加到 C# 中？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:42:43.900

修复语言（和 CLR）是一回事，但主要部分是重写整个 .NET Framework 和所有库。这将破坏所有期望或检查 null 的现有代码。不重写库的替代方案对证明重写的合理性几乎没有好处。

今天库的某些部分不处理泛型类型也是一样的。

顺便说一句，Anders Hejlsberg[提到](http://channel9.msdn.com/Shows/Going+Deep/Anders-Hejlsberg-Questions-and-Answers#time=1h0m0s)这是他对 C# 设计感到遗憾的事情之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:55:56.657

在 C# 中存在引用而不是引用的对象。不用于引用的对象是整数、字节、浮点数、布尔值……对于这些对象，您需要设置一个初始值，并且它们还有一个默认值，如果您不知道，您可以使用`default()`函数来获取它。另一方面，我们有引用对象，主要是 c# 对象（类），其默认值为`null`.

假设你有一个 Object T 的集合，当你用一些项目初始化集合时，所有项目都是 null （它的默认值），有其他默认类型可能会带来其他问题，例如你如何检测它是否是默认值？，或者当你的对象固有其他对象时，你如何定义默认值（父级，或者他自己）？，...，当你提出添加新的时候，你需要定义很多东西编程语言的功能。

我希望这个答案有助于让事情变得更清楚......

# php - 创建没有重复行的新表，保留原始顺序

> ID：13277735
> 
> 赞同：0
> 
> 时间：2012-11-07T20:33:39.003
> 
> 标签：php, mysql

MySQL 表只有 5 个字段，但有数百行。有了好的建议（tks Lacoz），我在忽略重复行的同时复制了表，现在有一个不包含重复行的新表。

问题：新表是以打乱的顺序输入的（即在观察第一个字段时，称为`rel_id`）。虽然这在现实世界中并不重要，但此时将它们按相同的顺序排列会很有帮助（用于引用过去的笔记等）。

示例行：（请注意，这`rel_id`是一个自动递增的主键字段）

```
'rel_id' => 1
'host' => 17
'host_type' => 'client'
'rep' => 7
'rep_type => 'cli_mgr' 
```

这是用户 Lacoz 帮助我创建新表的方法，没有重复：

```
mysql_query("create table rels2 like rels");
mysql_query("alter table rels2 add unique index(host,host_type,rep,rep_type)");
mysql_query("insert IGNORE into rels2 select * from rels"); 
```

我尝试在最终查询中添加“ORDER BY”，如下所示：

```
mysql_query("insert IGNORE into rels2 select * from rels ORDER BY rel_id"); 
```

但它并没有解决问题。行仍然是乱序的。

第一个问题：为什么会这样？

第二个问题：我如何确保数据以正确的顺序输入？

必要的结果：由于各种原因，我真的需要将数据恢复到原来的样子（但没有重复）。有人可以建议另一种方法，甚至是 php 脚本来完成此任务吗？

PS：经过几次谷歌搜索后，我认为无法对表格的原始数据进行排序，只能对输出进行排序。正确的？（很难确定什么时候是概念和术语的新手——我们都必须从某个地方开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:41:55.647

Conceptually, data in a relational database is not stored in any particular order. Mathematically, it's a set or relations, and sets have no ordering. That's why SQL doesn't provide any way to insert rows in a certain sequence (e.g. insert this row at the end, at the beginning, after some other row, etc...). It only provides a way to filter the output of a query given some specified ordering criteria.

Of course, a concrete implementation of SQL has to ultimately store things on disk in some kind of order, which is why you notice a repeatable ordering when you query a table without giving an `ORDER BY` clause, but you can't count on it. Your software should assume that rows will come out in arbitrary order.

If you need results to come out in a particular order, use `ORDER BY` on the query. Maybe build an appropriate index (if there isn't one already) to make sure the database can produce the ordering you request with good performance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:04:49.513

当您通过添加唯一索引设法解决重复时，如果您希望它们是 auto_increment，则必须加载新的主键值。所以建议的查询是这样的

## `mysql_query("insert IGNORE into rels2(host,host_type,rep,rep_type) select host,host_type,rep,rep_type from rels ORDER BY rel_id");`

祝你好运！

# c# - 为什么数组的元素比我定义的要多？

> ID：13277737
> 
> 赞同：5
> 
> 时间：2012-11-07T20:33:55.923
> 
> 标签：c#, arrays

所以，我有这个从 INI 文件中读取的函数：

```
private void GetRigInfo()
{
    RigInfo = new string[9];
    var fileLocation = new string[2];

    // The problem is that there's no telling where the hddrigsite.ini will be 
    stored.  So, we have to find out where it is from the hddconfig.ini.
    Log("Locating rig info");

    // There's no telling if this will be on a 32 or 64 bit OS.  Check for both
    var rigInfoLocation = File.ReadAllLines(Environment.Is64BitOperatingSystem ?
                          @"C:\Program Files (x86)\HDD DrillView\hddconfig.ini" : 
                          @"C:\Program Files\HDD DrillView\hddconfig.ini");

    // This should get us the location of the rigsite info we need.
    foreach (var s in rigInfoLocation.Where(s => s.Contains("data_dir")))
    {
        fileLocation = s.Split('=');
    }

    RigInfo = File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini");

    Log("Rig info found");
} 
```

现在，当我单步执行并到达`Log()`函数的最后一个，并将鼠标悬停在 上时`RigInfo`，Visual Studio 智能感知显示给我`RigInfo{string[30]}`。现在，我一直明白这`= new string[9]`将创建一个 9 元素数组。那么为什么允许有 30 个元素呢？当我运行程序时，这个数组没有任何错误或任何东西。事实上，它的工作方式正是我在整体方案中所需要的方式。感谢您在理解它的方式和原因方面提供的任何和所有帮助。还附上截图以获得更好的视觉帮助。

![令人困惑的智能感知](../Images/b9373c7d1a8687b57c970ef58a98b8a1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:36:05.590

这里 ：

```
RigInfo = File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini"); 
```

您正在为变量分配一个新值。在这种情况下，一个新的字符串 []。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T20:36:07.537

因为您已在此行更改了存储在变量中的引用：

```
RigInfo = File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T20:36:38.303

你所做的是你用一个全新的数组重写了你的 9 元素数组

```
RigInfo = File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T20:37:21.653

该数组由 ReadAllLines 调用“重新定义”。如果您已通过索引将每一行分配给数组，那么您会得到一个错误，但在这种情况下，您将指针从分配给您的数组的内存中重定向，并将其指向 ReadAllLines 方法的输出。

总是对 Arr = somthing 感到厌烦，因为这会改变数组引用本身。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T20:40:46.743

RigInfo contains more than the 9 elements expected because this line:

RigInfo = File.ReadAllLines(fileLocation[1] + "\hddrigsite.ini");

discards the original RigInfo and creates a ***new*** string array with the results of File.ReadAllLines(fileLocation[1] + "\hddrigsite.ini")

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T20:36:53.807

您分配`File.ReadAllLines`给它，因此将分配新内存并且该数组是一个全新的数组。你基本上覆盖了你以前的任务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T20:36:36.420

通过`RigInfo = File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini");`，您将`new array`结果从`File.ReadAllLines(fileLocation[1] + "\\hddrigsite.ini");`大小分配`30`给`RigInfo`变量。

如果你这样做

```
 RigInfo [indx++] = one line at a time 
```

那么它将在第 9 个元素之后失败，因为您使用的是先前定义的数组。

# objective-c - iOS 文件系统：添加/删除/排序文件

> ID：13277738
> 
> 赞同：0
> 
> 时间：2012-11-07T20:34:05.297
> 
> 标签：objective-c, ios, sorting, filesystems

我有一个包含这样图像的目录：

```
0000.png
0001.png
0002.png
0003.png
etc... 
```

要添加图像，我会查询目录的计数并用计数命名新文件。我需要保持这样的顺序，因为这些图像最终会显示在网格视图中。这是简单的部分。困扰我的是稍后操纵目录。

用户可以根据需要删除和重新排序这些。那么我应该如何处理实际目录的重新排序呢？

我天真地尝试将图像复制到 NSMutableArray 中，将它们加载到 gridView 中，让用户进行操作，然后在完成后擦除目录并重写图像。这对于一些图像来说很好，但可以有很多并且它会慢慢建立起来。

我喜欢在本地复制图像、操作然后修复目录的想法。但是我认为必须有一种更好的方法来管理目录而不是擦除和重写，编写某种文件交换方法会更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:42:03.370

Instead of writing the images to the file system in an ordered format, you could have a meta data file images.plist And maintain an `NSMutableArray` of `NSDictionaries` Each dictionary will contain the data for the imageFile Path and the image index Then when you would save the changes of the user you will only rewrite this plist file, instead of saving all the images again

# list - 只有一个锂元素的圆角？

> ID：13277741
> 
> 赞同：1
> 
> 时间：2012-11-07T20:34:14.110
> 
> 标签：list, navigation, rounded-corners, rounding, nav

我正在尝试在导航菜单上创建一个圆角（右下角）。我有一个标记为“ `main-nav`”的 ul id，我创建了一个标记为“ `round`”的 li 类。我将这个 li 类添加到 Music 链接以获得圆角，但什么也没发生。

**这是一个小提琴//** [http://jsfiddle.net/2qRLU/3/](http://jsfiddle.net/2qRLU/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:35:41.483

你写了`.round li`这将尝试使用“round”类来定位嵌套在元素内的列表项。

您需要编写`li.round`This targets 列出具有“round”类的项目。

请注意，空格很重要，这样写是错误的，`li .round`因为这将针对具有“圆形”类的列表项的子项。

[http://jsfiddle.net/2qRLU/4/](http://jsfiddle.net/2qRLU/4/)

* * *

如果您想单独设置角的样式，可以使用更具体的版本：

```
border-top-left-radius:5px;
border-top-right-radius:10px;
border-bottom-left-radius:15px;
border-bottom-right-radius:20px; 
```

我在这里为它们设置了样式以显示不同的类型，但实际上你可能只想设置一个角的样式，所以这是你的小提琴版本，只有右下角弯曲：http: [//jsfiddle.net/2qRLU /6/](http://jsfiddle.net/2qRLU/6/)

* * *

另外，作为旁注，除非您需要支持旧版本的浏览器，否则只需编写没有所有供应商前缀的border-radius就足够安全了。浏览器暂时不需要边界半径的供应商前缀。

您可以在此处在浏览器上不带前缀地对其进行测试：http: [//jsfiddle.net/2qRLU/5/](http://jsfiddle.net/2qRLU/5/)

# ruby-on-rails - yaml文件中的Ruby代码？

> ID：13277751
> 
> 赞同：0
> 
> 时间：2012-11-07T20:35:26.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用具有此电子邮件方法的 gem：

```
 #Sends and email for indicating a reply in an already created conversation
  def reply_message_email(message,receiver)
    @message = message
    @receiver = receiver
    subject = message.subject.to_s
    subject = strip_tags(subject) unless subject.html_safe?
    mail(:to => receiver.send(Mailboxer.email_method,message), :subject => t('mailboxer.message_mailer.subject_reply', :subject => subject)) do |format|
      format.text {render __method__}
      format.html {render __method__}
    end
  end
end 
```

我在我的语言环境中有这个：

```
da:
  mailboxer:
    message_mailer:
        subject_reply: You have got a new reply "#{subject}" 
```

而不是覆盖电子邮件方法。不能在 YAML 文件中做一些 ruby​​ 代码吗？现在，电子邮件的主题只是您收到了一个新的回复“#{subject}”作为文本，并且 ruby​​ 代码未激活。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:42:37.270

Rails 的翻译文件不允许使用 Ruby，但它们确实具有插值机制。尝试：

```
subject_reply: "You have got a new reply %{subject}" 
```

有关详细信息，请参阅[http://guides.rubyonrails.org/i18n.html#passing-variables-to-translations 。](http://guides.rubyonrails.org/i18n.html#passing-variables-to-translations)

# javascript - GWT：弹出窗口阻止程序阻止 RPC 后打开窗口

> ID：13277752
> 
> 赞同：3
> 
> 时间：2012-11-07T20:35:35.917
> 
> 标签：javascript, gwt, window

嗨，我有以下代码：

```
 button.addClickHandler( new ClickHandler( ) {
        @Override   
        public void onClick( ClickEvent event ) {    
             Call 1 --> Window.open( publicBookingUrl, "_blank", null );                
            dispatcher.execute( new HasServicesAction(true), 
                    new ActionCallback<SomeResult>( ){       
                @Override 
                public void onSuccess( SomeResult result ) {
             Call 2 --> Window.open( publicBookingUrl, "_blank", null );
                } 
            });  
        }        
    }); 
```

In Call 1 弹出窗口阻止程序不会阻止弹出窗口打开。它成功地在新选项卡或新窗口中打开一个窗口。然而，在 Call2 中，弹出窗口阻止程序会阻止弹出窗口，因此用户必须明确启用弹出窗口。我找到了一篇解释其背后原因的帖子：[https](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/V0s7goJxuhc) ://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/V0s7goJxuhc 不幸的是，这个解决方案对我不起作用。

有谁知道为什么会这样？我们怎样才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:42:42.713

正如您链接到的页面所表明的那样，窗口只能作为直接用户操作的结果打开。您可以通过在 RPC 调用之前打开窗口并在 RPC 调用返回后设置窗口的 URL 来解决此问题。GWT 的内置`Window`不会公开所有底层`window`对象的属性，因此需要自定义实现：

```
public class MyWindow extends JavaScriptObject {
  // All types that extend JavaScriptObject must have a protected,
  // no-args constructor. 
  protected MyWindow() {}

  public static native MyWindow open(String url, String target, String options) /*-{
    return $wnd.open(url, target, options);
  }-*/;

  public native void close() /*-{
    this.close();
  }-*/;

  public native void setUrl(String url) /*-{
    if (this.location) {
      this.location = url;
    }
  }-*/;
} 
```

然后在您的点击处理程序中：

```
public void onClick(ClickEvent event) {
  final MyWindow window = MyWindow.open(null, "_blank", null);

  dispatcher.execute(new HasServicesAction(true), 
      new ActionCallback<SomeResult>( ){       
        @Override 
        public void onSuccess(SomeResult result) {
          if (result.isGood()) {
            window.setUrl(publicBookingUrl);
          } else {
            window.close();
          }
        }
      });  
} 
```

请注意，如果您的调用`setUrl()`更改了打开窗口的[来源](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，您将无法修改任何属性或调用任何函数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-07T23:46:00.160

摆脱窗口弹出窗口。请改用 PopupDialog。

如果用户禁用了弹出窗口并且您找到了显示它的方法，那么该用户会怎么想您？

# java - 如何从java的主代码调用OCL约束（生成模型的java源代码）

> ID：13277756
> 
> 赞同：1
> 
> 时间：2012-11-07T20:35:47.693
> 
> 标签：java, eclipse-emf-ecore, ocl

我在 ecore 模型上使用 OCL 约束并生成代码。所以事情就这么简单，我有一个具有属性的任务类`startDate`，`endDate` 它有一个 ocl 约束：- 不变量状态`startDate < endDate`。

我已经为这个项目生成了 java 代码，并且有一个 java 类：

```
public class TmsValidator extends EObjectValidator {

  //what is diagnosticChain and context in the below method

  public boolean validateTask_C2(Task task, DiagnosticChain diagnostics, Map<Object, Object context) {
    return validate(TmsPackage.Literals.TASK,
         task,
         diagnostics,
         context,
         "http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot",
         "C2",
         TASK__C2__EEXPRESSION,
         Diagnostic.ERROR,
         DIAGNOSTIC_SOURCE,
         0);    
  }
} 
```

因此，从我的主要课程中，我如何在这里验证我的任务。我想调用 OCL 约束来检查是否`startDate`小于`endDate`

```
public class {  
  public static void main(String []a){  
    Task t = new
    Task ();    
    // How do I validate my task here  . I want to call the 
    //OCL constraint to check if startDate is less than endDate         
  }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:24:47.750

使用 eclipse.modeling.mdt.ocl 或 eclipse.tools.emf 论坛，您更有可能获得快速的答案。当然，您可以使用 TmsFactory.eINSTANCE 创建模型的实例，并且可以使用 Diagnostician.INSTANCE 来验证建模对象上的所有约束。

# ios - Facebook朋友通过ID发贴

> ID：13277757
> 
> 赞同：2
> 
> 时间：2012-11-07T20:35:49.027
> 
> 标签：ios, xcode, facebook

我正在尝试在 Facebook 朋友的墙上发帖，我尝试了这两种方法，但都没有奏效：

1.

```
//post on wall
NSMutableDictionary *variables = [[NSMutableDictionary alloc]initWithCapacity:1];
[variables setObject:@"v" forKey:@"message"];

[graphref doGraphPost:[NSString stringWithFormat:@"1389799421/feed"] withPostVars:variables];
//post on wall 
```

2.

```
 [_facebook requestWithGraphPath:@"1389799421/feed"
                      andParams:[NSMutableDictionary dictionaryWithObject:@"test wall post" forKey:@"message"]
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

......我不明白为什么！在 facebook 网站上，我添加了捆绑包和权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:19:40.150

> 我正在尝试在 Facebook 朋友的墙上发帖

Facebook 最近在开发者博客中宣布，[从 2013 年 2 月起，将无法再](https://developers.facebook.com/roadmap/#february-2013)通过 API 发布到另一个用户的墙上：

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)。

所以我认为现在开始开发这样的功能是没有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:56:55.233

首先，您必须使用发布权限打开会话。具体来说，您必须请求`publish_stream`许可。

```
NSArray * permissions = [[NSArray alloc] initWithObjects:@"publish_stream", nil];
return [FBSession openActiveSessionWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
  [self sessionStateChanged:session
                      state:status
                      error:error];
}]; 
```

如果您具有发布权限，则可以创建和发送请求。确保包含`access_token`作为参数之一。如果不这样做，您将收到身份验证错误。

```
NSDictionary * postParameters = [NSDictionary dictionaryWithObjectsAndKeys:_textView.text, @"message", FBSession.activeSession.accessToken, @"access_token", nil];
NSString * graphPath = @"ID_NUMBER_HERE/feed";
FBRequest * request = [FBRequest requestWithGraphPath:graphPath parameters:postParameters HTTPMethod:@"POST"];
[[request initWithSession:FBSession.activeSession graphPath:graphPath parameters:postParameters HTTPMethod:@"POST"] startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
  NSLog(@"Successful posted to Facebook");
  }];
} 
```

# wordpress - Futura字体未在Firefox中呈现

> ID：13277761
> 
> 赞同：1
> 
> 时间：2012-11-07T20:36:05.807
> 
> 标签：wordpress, fonts, font-face, generator

我在 Firefox 上显示特定的 Futura 字体时遇到问题。

实际上，我使用了 5 种 Futura 字体，但其中一种出现了问题：

```
@font-face {
            font-family: 'FuturaLT-CondensedBold';
            src: url('fonts/futuraltcondensedbold.eot');
            src: url('fonts/futuraltcondensedbold.eot?#iefix') format('embedded-opentype'),
                     url('fonts/futuraltcondensedbold.woff') format('application/x-font-woff'),
                     url('fonts/futuraltcondensedbold.ttf') format('truetype'),
                     url('fonts/futuraltcondensedbold.svg#futuraltcondensedbold') format('svg');
            font-weight: normal;
            font-style: normal;
    }
@font-face {
                font-family: 'FuturaLT-Bold';
                src: url('fonts/futuraltbold.eot');
                src: url('fonts/futuraltbold.eot?#iefix') format('embedded-opentype'),
                         url('fonts/futuraltbold.woff') format('application/x-font-woff'),
                         url('fonts/futuraltbold.ttf') format('truetype'),
                         url('fonts/futuraltbold.svg#futuraltbold') format('svg');
                font-weight: normal;
                font-style: normal;
        }

@font-face {
                font-family: 'FuturaBT-LightCondensed';
                src: url('fonts/futura-ltcn-bt-light.eot');
                src: url('fonts/futura-ltcn-bt-light.eot?#iefix') format('embedded-opentype'),
                         url('fonts/futura-ltcn-bt-light.woff') format('application/x-font-woff'),
                         url('fonts/futura-ltcn-bt-light.ttf') format('truetype'),
                         url('fonts/futura-ltcn-bt-light.svg#futura-ltcn-bt-light') format('svg');
                font-weight: normal;
                font-style: normal;
        }
@font-face {
                font-family: 'FuturaBT-Medium';
                src: url('fonts/futuram.eot');
                src: url('fonts/futuram.eot?#iefix') format('embedded-opentype'),
                         url('fonts/futuram.woff') format('application/x-font-woff'),
                         url('fonts/futuram.ttf') format('truetype'),
                         url('fonts/futuram.svg#futuram') format('svg');
                font-weight: normal;
                font-style: normal;
        } 
```

所以，我在使用 font-family: 'FuturaLT-Bold' 时遇到问题；在火狐中。其他的渲染得很好，但是这个在带有萤火虫的firefox检查元素中显示为深灰色，就像字体根本不存在一样。该字体被codeandmore字体生成器覆盖。

我还使用以下规则更改了我的 .httaccess 文件：

AddType 字体/ttf .ttf AddType 字体/eot .eot AddType 字体/otf .otf AddType 字体/woff .woff

但它没有帮助......

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:42:12.500

I don't see the css for FuturaLT-Book listed, could be the problem.

# java - Eclipse - 运行时错误 - java.lang.NoClassDefFoundError - 无法解决

> ID：13277762
> 
> 赞同：2
> 
> 时间：2012-11-07T20:36:05.813
> 
> 标签：java, eclipse, jar, eclipse-plugin

以下是我已完成的步骤。

1.  下载PDFRenderer.jar
2.  在我的 Eclipse 插件项目中创建 lib 文件夹
3.  将jar复制到lib文件夹
4.  右键单击构建路径-> 配置构建路径
5.  库选项卡 -> 添加 JAR -> 选定的 lib/PDFRenderder.jar 文件

MANIFEST.MF 中的运行时选项卡

6.  单击添加 -> 选定的 lib/PDFRenderder.jar
7.  单击新建 -> 新库名称 -> 输入。
8.  构建项目 - 没有错误

右键项目

9.  导出 -> 可部署的插件和片段 -> 选择我的插件项目名称
10.  将导出的项目插件复制到我的 Teamcenter/plug-ins 目录

当我运行我的插件项目应用程序并尝试使用 PDFRenderer 命令访问命令时，我收到以下错误。

org.eclipse.core.runtime - org.eclipse.ui - 0 - 未处理的事件循环异常 java.lang.NoClassDefFoundError: com/sun/pdfview/PDFFile

我知道它没有找到 PDFRenderer 库。
但我不确定为什么它没有找到课程？

我假设通过将 PDFRenderder.jar 添加到插件项目引用库并将其添加到类路径中。它将 PDFRenderder.jar 合并到我的插件项目 jar 文件中。我也不必将 PDFRenderder.jar 复制到 Teamcenter/plug-ins 目录吗？

**编辑**

请看下面

Java 构建路径

![在此处输入图像描述](../Images/d08c8ff62c308c4dacca1ec04e6917d6.png)

二进制构建

![在此处输入图像描述](../Images/ac3a638bfe1630815e929464678a3374.png)

类路径

![在此处输入图像描述](../Images/b5a5c655f2b704750e3c7490924aebbc.png)

显现

![在此处输入图像描述](../Images/03e06e72482e8e02ddf285d750731a35.png)

项目 Jar 文件

![在此处输入图像描述](../Images/2045747a42fd1d1389183c9bd4ff8f92.png)

错误

![在此处输入图像描述](../Images/0740fbc25499c11f2732fd3b0d861fd8.png)

第 287 行 - PDFFile pdffile = new PDFFile(buf);

对我来说，一切似乎都已经到位。但我一定是错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:11:21.490

我相信您必须在 plugin.xml 编辑器中更新构建定义以指定将 jar 依赖项包含在导出的 jar 中：

*   打开 plugin.xml 文件
*   单击构建选项卡
*   通过选中文件名旁边的框来选择要包含在构建中的其他文件
*   关闭保存文件的 plugin.xml 编辑器。

默认情况下，只有源文件夹中的类和资源文件会自动包含在构建中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:20:17.677

要解决此问题，您可以执行其中一项操作。

1.  确保外部 jar 是 Chris 解释的导出 jar 的一部分。

2.  您可以使用类路径选项添加运行该类的第三方 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:08:04.737

我无法使上述工作。所以我使用外部jar文件创建了一个插件。添加了插件所需的Plug-ins。将新的插件 jar 导出到我的目标平台。

这让我启动并运行。

# wireshark - 如何使用 Wireshark 解码 DVB-S2 数据包

> ID：13277768
> 
> 赞同：1
> 
> 时间：2012-11-07T20:36:16.430
> 
> 标签：wireshark, wireshark-dissector, dvb

搜索有关 DVB-S2 BBframe 结构的信息，我进入了这个 wiki：[http ://wiki.wireshark.org/DVB-S2](http://wiki.wireshark.org/DVB-S2)

Wireshark 似乎可以解码这种数据。我在 ubuntu 12.04 上使用 Wireshark 1.8.2 - 一切似乎都很好。但我已经下载了捕获文件，WS 无法识别 UDP 有效负载中的 DVB 数据包。

我试图通过数据包中的“右键单击 > 解码为”手动通知它，但没有可供选择的 DVB 协议。

看来我需要安装在 wiki 上通知的解剖器 - 但我在哪里可以获得它以及如何安装它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:09:39.590

DVB-S2 解析器尚未包含在 Wireshark 版本中（甚至没有包含在开发版本中），但是它应该在未来的版本中可用，因为我可以在主干中看到解析器代码。[有关更多信息，请参阅此问题。](http://ask.wireshark.org/questions/16246/dvb-s2-dissector-missing-in-183)

我可以使用我本地的 Wireshark 构建来剖析 DVB-B2 数据包。因此，如果您*立即*需要此功能，我想目前最好的选择是下载源代码并使用本地 Wireshark 构建来满足您的目的。

# c# - 网站未作为网络服务运行时应用程序池崩溃

> ID：13277769
> 
> 赞同：1
> 
> 时间：2012-11-07T20:36:20.703
> 
> 标签：c#, .net, iis, crystal-reports, application-pool

我有一个在 IIS 7 中运行 Crystal Reports Viewer 的站点，但出于安全原因，我们希望它在 ApplicationPoolIdentity 下运行应用程序池。当我们将应用程序池从网络服务切换到 ApplicationPoolIdentity 时，我们注意到应用程序池不断崩溃，我们希望在驱动器上的某些文件夹上为 ApplicationPoolIdentity 提供额外的权限，以纠正这种情况。

问题是，我们为不同的文件夹提供了大量权限，但据我们所知，我们无法确定应用程序池为何不断崩溃以及它无法访问哪些文件。

我们检查了很多不同的日志文件，但也许我们跳过了一些可能更重要的文件。有没有什么可以告诉我们问题出在哪里，无论是我没有遇到的某个日志，还是我可以使用某种跟踪来获取我需要授予此身份权限的文件？

尝试加载 Crystal Reports Viewer 时池崩溃并且没有给出错误，只是说它无法访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:19:30.287

IIRC Crystal Reports Viewer 是一个 COM 对象……它们通常需要有关权限的特殊情况，甚至可能不可靠，因为某些 COM 对象需要“桌面”才能正常工作……不确定 Crystal Reports Viewer 是否是其中之一我建议询问供应商在您的场景中需要什么配置/权限...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:27:03.000

实际上，您可以通过正确设置 appPoolIdentity 的权限来使其正常工作。请参阅 IIS 团队博客上的以下帖子。

[http://blogs.iis.net/webdevelopertips/archive/2009/10/02/tip-98-did-you-know-the-default-application-pool-identity-in-iis-7-5-windows- 7-从-networkservice-to-apppoolidentity.aspx](http://blogs.iis.net/webdevelopertips/archive/2009/10/02/tip-98-did-you-know-the-default-application-pool-identity-in-iis-7-5-windows-7-changed-from-networkservice-to-apppoolidentity.aspx)

# c# - 编写字符串列表的不可变 F# 映射

> ID：13277773
> 
> 赞同：3
> 
> 时间：2012-11-07T20:36:32.053
> 
> 标签：c#, dictionary, map, f#, idioms

`Dictionary<string, List<string>>`在 C# 中，我可以很容易地构建一个。如果我正在阅读大型项目数据库，我可以执行以下操作：

```
var dict = new Dictionary<string, List<string>>();
foreach(string[] row in data)
   if (!dict.ContainsKey(row[0]))
      dict.add(row[0], new List<string>() { row };
   else
      dict[row[0]].add(row); 
```

现在的问题是，我如何在 f# 中使用 immutable 执行此操作`Map<string, string list>`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:40:42.007

```
data
|> Seq.groupBy (fun row -> row.[0])
|> Map.ofSeq 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T20:57:22.627

这是一个更详细的解决方案，与您的 C# 示例非常相似：

```
data |> Seq.fold (fun map row -> 
                 match Map.tryFind row.[0] map with
                 | Some rows -> Map.add row.[0] (row::rows) map
                 | None -> Map.add row.[0] [row] map) Map.empty 
```

# ruby - jruby 1.6.7/1.7.0 1.9 模式下的 OpenSSL::SSL::SSLError

> ID：13277774
> 
> 赞同：3
> 
> 时间：2012-11-07T20:36:33.197
> 
> 标签：ruby, ruby-on-rails-3, jruby, jruby-openssl

我在 1.9 模式下运行带有 jruby 1.7.0 的 rails 3 应用程序，当我的一个文件上传 gem 尝试建立 https 连接时，它失败并出现以下异常：

```
Excon::Errors::SocketError: write would raise (OpenSSL::SSL::SSLError)
    from org/jruby/ext/openssl/SSLSocket.java:626:in `syswrite_nonblock'
    from /home/x/.rvm/gems/jruby-1.7.0@global/gems/jruby-openssl-0.7.7/lib/1.9/openssl/buffering.rb:375:in `write_nonblock'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/excon-0.16.7/lib/excon/socket.rb:139:in `write'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/excon-0.16.7/lib/excon/ssl_socket.rb:84:in `write'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/excon-0.16.7/lib/excon/connection.rb:243:in `request_kernel'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/excon-0.16.7/lib/excon/connection.rb:103:in `request'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/core/connection.rb:20:in `request'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/rackspace.rb:71:in `authenticate'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/rackspace/storage.rb:146:in `authenticate'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/rackspace/storage.rb:95:in `initialize'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/core/service.rb:68:in `new'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/fog-1.7.0/lib/fog/storage.rb:34:in `new'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/carrierwave-0.6.2/lib/carrierwave/storage/fog.rb:106:in `connection'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/carrierwave-0.6.2/lib/carrierwave/storage/fog.rb:323:in `connection'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/carrierwave-0.6.2/lib/carrierwave/storage/fog.rb:335:in `directory'
    from /home/x/.rvm/gems/jruby-1.7.0/gems/carrierwave-0.6.2/lib/carrierwave/storage/fog.rb:250:in `store' 
```

我在这里在 stackoverflow 上发现了一个类似的问题：[JRuby Heroku Gem](https://stackoverflow.com/questions/11859549/jruby-heroku-gem)，但建议的答案是在 1.8 模式下运行 jruby，因为我们的整个应用程序使用 1.9 功能和语法，所以我不能这样做。是否有人对如何修复或解决此异常有任何想法或建议？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:28:42.207

好的，这是我的 hacky 解决方案：

由于这是一个 Rails 项目，我创建了一个名为的文件`excon_hack.rb`并将其放在`initializers`文件夹中。

```
module Excon
  DEFAULT_NONBLOCK = false
end 
```

这使得连接块，这对我来说并不重要，更重要的是，它修复了我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:57:03.093

另一种选择是将 jruby-openssl 降级到 0.7.4。我还不清楚这是否有效地将 excon 恢复为阻塞模式，或者只是让非阻塞工作。

# mechanicalturk - 为什么 Amazon Mechanical Turk Web 界面会与 API 不同步？

> ID：13277775
> 
> 赞同：0
> 
> 时间：2012-11-07T20:36:35.043
> 
> 标签：mechanicalturk

我一直在使用[rturk](https://github.com/mdp/rturk) Ruby 库来调用 Amazon Mechanical Turk API。我正在做一些基本的事情，比如批准和拒绝。成功完成后，我现在正在查看 (a) AMT Web UI 和 (b) 导出的 CSV。两者都没有显示我刚刚做出的批准或拒绝。

到底是怎么回事？

我不希望有时间滞后。我怎样才能找到这件事的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:05:12.713

我在 Mechanical Turk 论坛上收到了 James@AWS 的答复：[https ://forums.aws.amazon.com/message.jspa?messageID=398300](https://forums.aws.amazon.com/message.jspa?messageID=398300)

> 请参阅此线程中的最后一个回复：
> 
> [https://forums.aws.amazon.com/thread.jspa?messageID=175067ꯛ](https://forums.aws.amazon.com/thread.jspa?messageID=175067&#175067)
> 
> 简短的回答是，Web 界面看不到 API 中采取的某些操作的更新。这是一个已知的限制。

从我所在的位置来看，这个“已知限制”最好被描述为一个错误。

# c++ - C++ 重载运算符 +()

> ID：13277776
> 
> 赞同：1
> 
> 时间：2012-11-07T20:36:35.860
> 
> 标签：c++, operator-overloading

我有一个名为 String 的简单类，它有一个 char* 作为私有字段。

```
class String {
      char *s;
+ some public methods
}; 
```

我想重载 + 运算符，因此 a + b 意味着 a 和 b 中的字符串被连接起来。

功能在这里：

```
String String::operator+(String a)
{
    String rez;
    rez.s = new char[strlen(this->s) + strlen(a.s) + 1];
    assert(rez.s);
    strcpy(rez.s, this->s);
    strcat(rez.s, a.s);
    cout<<rez.s<<endl; // HERE rez.s CONTAINS THE RIGHT STRING!
    return rez;
} 
```

在我这样称呼之后： c = a + b;

我收到一个名为调试断言失败的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:43:33.783

首先，阅读[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

然后，考虑一下：

```
class String {
      char *s;   // << pointer
+ some public methods
}; 
```

“+ 一些公共方法”最好有一个构造函数，将指针成员初始化为可测试的值（如 NULL），或者你很容易陷入未定义的行为。它更好地覆盖复制构造函数和赋值运算符，以正确地将字符串从一个 String 对象复制到另一个。最后，最好有一个析构函数，它知道如何清理指向在上述所有内容中分配的内容的动态指针。

我**强烈**建议你前后阅读那篇文章。

# android - 如何在android中使用带有滚动视图的固定页脚？

> ID：13277785
> 
> 赞同：6
> 
> 时间：2012-11-07T20:36:57.577
> 
> 标签：android, android-layout, scrollview, android-relativelayout, footer

我一直在尝试使用

[固定页脚不显示最底部的列表项](https://stackoverflow.com/questions/4523328/fixed-footer-not-displaying-the-bottom-most-list-item)

但不适用于 scrollview 。请注意，我没有使用 listview，但它是一个带有图像和按钮的大布局。即使在用户滚动时，页脚也应始终位于底部。FourSquare 在他们的应用程序中有这个，即使在滚动时也有固定的页脚。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true" >

<RelativeLayout
    android:id="@+id/root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/search_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@color/red" />

    <LinearLayout
        android:id="@+id/main_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/search_container"
        android:layout_below="@+id/root"
        android:background="@color/layout_bg_wallet_login"
        android:orientation="vertical" >
        ------More Buttons and Images
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-07T21:01:46.793

似乎您试图使用您拥有的代码将页脚放在滚动视图中。如果您不希望页脚与滚动内容一起移动，则需要将其保持在与滚动视图相同的图层上。整理一个简单的例子，说明我相信你想要完成的事情。（在此示例中未使用 strings.xml 或 colors.xml，但它们应该用于实际项目）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/footer"
    android:background="#0000ff"
    android:fillViewport="true" >

    <TextView
        android:id="@+id/texthere"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center_vertical|center_horizontal"
        android:text="test test test test test test test test test test 
        test test test test test test test test test test test test test 
        test test test test test test test test test test test test test"
        android:textSize="35sp" >
    </TextView>
</ScrollView>

<RelativeLayout
    android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:background="#ffff00" 
    android:layout_alignParentBottom="true">

    <TextView
        android:id="@+id/texthere2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="things in your footer here"
        android:textSize="20sp" />

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-30T08:53:45.360

这个解决方案只有一个问题：页脚浮动在滚动视图上，如果没有足够的垂直空间，页脚隐藏滚动视图的底部。

为了确保始终显示整个滚动视图，我在滚动视图的底部填充等于示例中的页脚高度（50dp）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
  >
     <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="50dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            .......

        </LinearLayout>
    </ScrollView>

    <include
        android:layout_height="50dp"
        android:layout_width="match_parent"
        android:layout_alignParentBottom="true"
        layout="@layout/footer" >
    </include>
  </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-03-23T04:45:33.217

你必须让你的`footerview`外在`scrollview`

# mysql - 使用 Coldfusion 循环查询

> ID：13277786
> 
> 赞同：1
> 
> 时间：2012-11-07T20:37:00.437
> 
> 标签：mysql, coldfusion

我有一个包含 companyID 和一些相关分数的表“分数”。companyID 可以在此表中出现多次。我有另一个包含公司 ID 和公司名称的表（“公司”）。我想要做的是查询“公司”表以获取所有公司 ID，然后使用此结果使用我之前查询的结果查询“分数”表以获取分数。我还需要做一些计算。我想我需要遍历第一个结果集并将 companyID 值放入我的第二个查询中。只是不知道该怎么做。任何帮助将不胜感激。

我知道这段代码行不通，但是它可能会让您了解我要完成的工作：

```
<cfquery name="companyIDs" datasource="myDB">
   Select companyID from company
</cfquery>

<cfloop>
 <cfquery name="companyScore" datasource="myDB">
 SELECT Round(sum(leadership)/Count(leadership)) as leadership,   
 Round(sum(communication)/Count(communication)) as communication, 
 Round(sum(fairness)/Count(fairness)) as fairness, 
 Round(sum(ethics)/Count(ethics)) as ethics, 
 Round(sum(competence)/Count(competence)) as competence 
 FROM scores 
 Where companyID = 'companyIDs.companyID'
 </cfquery>
</cfloop> 
```

比

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:53:49.393

有几种方法可以做到这一点，但下面的方法会起作用。

```
<cfquery name="companyIDs" datasource="myDB">
Select companyID from company
</cfquery>

<cfloop query="companyIDs">
 <cfquery name="companyScore" datasource="myDB">
 SELECT Round(sum(leadership)/Count(leadership)) as leadership,   
 Round(sum(communication)/Count(communication)) as communication, 
 Round(sum(fairness)/Count(fairness)) as fairness, 
 Round(sum(ethics)/Count(ethics)) as ethics, 
 Round(sum(competence)/Count(competence)) as competence 
 FROM scores 
 Where companyID = #companyIDs.companyID#
 </cfquery>
</cfloop> 
```

您还可以将两个查询连接在一起，这样您就只有一个整体查询，这将是首选方式。

```
<cfquery name="companyScore" datasource="myDB">
 SELECT companyID,
 Round(sum(leadership)/Count(leadership)) as leadership,   
 Round(sum(communication)/Count(communication)) as communication, 
 Round(sum(fairness)/Count(fairness)) as fairness, 
 Round(sum(ethics)/Count(ethics)) as ethics, 
 Round(sum(competence)/Count(competence)) as competence 
 FROM scores INNER JOIN company ON scores.companyID = company.companyID
 GROUP BY companyID
 </cfquery> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:57:12.833

有更好的方法来完成您的需求，但我按照您的要求回答了您的问题。我对您的代码进行了一些更改：

```
<cfloop query='companyIDs'> // add the name of your query to the cloop
 <cfquery name="companyScore" datasource="myDB">
 SELECT Round(sum(leadership)/Count(leadership)) as leadership,   
 Round(sum(communication)/Count(communication)) as communication, 
 Round(sum(fairness)/Count(fairness)) as fairness, 
 Round(sum(ethics)/Count(ethics)) as ethics, 
 Round(sum(competence)/Count(competence)) as competence 
 FROM scores 
 Where companyID = '#companyIDs.companyID#' // add ## around your output
 </cfquery>

<cfdump var='#companyScore#'>  // dump your results

</cfloop> 
```

# android - 触摸我的 android 设备的外部按钮时如何捕获事件？

> ID：13277793
> 
> 赞同：1
> 
> 时间：2012-11-07T20:37:29.783
> 
> 标签：android

当用户按下设备的外部按钮时，我想做一个动作。

我用谷歌搜索并没有找到很多帮助。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:20:09.470

这有帮助吗？

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KEYCODE_HOME:
//do whatever
        break;
        case KEYCODE_MENU:
//do whatever
        break;
        case KEYCODE_VOLUME_DOWN:
        case KEYCODE_VOLUME_UP:
        break;

      return true;
    }
    return false;
} 
```

# python - 如何可靠地检测 python 文档字符串是否处于静止状态？

> ID：13277798
> 
> 赞同：4
> 
> 时间：2012-11-07T20:37:56.683
> 
> 标签：python, restructuredtext

我正在开发一个文档字符串查看器，因此我想将任何文档字符串正确转换为好看的 html。

大多数标准库中的文档字符串不在[reST](http://docutils.sourceforge.net/rst.html)中，但对于大部分采用[numpydoc](http://pypi.python.org/pypi/numpydoc/0.4)标准的科学库来说并非如此。

所以我想可靠地检测一个文档字符串是否在 reST 中，以便将它传递给不同的渲染。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T21:12:26.497

由于 ReST 是一种尽可能看起来像可读纯文本的格式，因此没有可靠的方法来检测是否有任何文本正在使用 ReST，更不用说像文档字符串这样小的内容了。

我想说您应该尝试将其呈现为 ReST，并为最终用户提供再次关闭它的选项。

# javascript - 使用 jQuery 选择所有文本框

> ID：13277800
> 
> 赞同：-1
> 
> 时间：2012-11-07T20:37:58.283
> 
> 标签：javascript, jquery

我的代码在表格中显示了一个人的信息（字段：姓名、姓氏、地址等），其中一个输入是一个复选框。代码如下：

```
 $("#table").append('<tr class="trow'+j+'">'+
                      '<td class="ids" id="z'+i+'">'+totrecs+'</td>'+
              '<td>'+member[i].jdate+'</td>'+
              '<td class="users" 

              '<td id="contact'+i+'">'+member[i].fname+' '+member[i].lname+'</td>'+
              '<td id="myaddress'+i+'">'+member[i].address1+' '+member[i].town+'</td>'+

              '<td><input type="checkbox" name="whome" id="showMe'+i+'"'+
                                             'class="boxes" onclick="getMe('+i+')" /></td></tr>');  
      totrecs++;
      j++;
     } 
```

我要做的是编写一个功能，当单击某个按钮时，所有复选框都将被选中/选中。

我将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:42:30.633

```
<input type="button" value="Check/Uncheck All" />

$('#btnId').on('click', function() {

    var check = false;

    if( !$(this).hasClass('checked')){
        bool = true;
    }

    $(this).toggleClass('checked');

    $('#table input[type="checkbox"]').prop('checked', check)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:44:05.803

这可能会有所帮助：[JQquery 选择所有复选框教程](http://jetlogs.org/jquery/jquery_select_all.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:44:31.817

`#table`使用 jQuery检查所有复选框：

```
$('#table :checkbox').attr('checked', ''); 
```

请注意，这不会触发您为复选框设置的任何点击事件。您应该使用该`change`事件而不是`click`使其按预期发生。

# java - SearcherManager 也许刷新方法没有发生

> ID：13277804
> 
> 赞同：4
> 
> 时间：2012-11-07T20:38:47.910
> 
> 标签：java, lucene

我正在使用 Lucene 4.0 API 在我的应用程序中实现搜索。

导航流程如下：

1.  用户创建一篇新文章。使用 .将新`Document`的添加到索引中`IndexWriter.addDocument()`。
2.  添加后调用该`SearcherManager.maybeRefresh()`方法。`SearcherManager`是从 中构建的，`Writer`以便可以访问 NRL 搜索。
3.  就在创建之后，用户决定在他的文章中添加一个新标签。这 `Writer.updateDocument()`是调用的时候。考虑到在第 2 步我要求刷新，我希望搜索器能够找到添加的文档。但是，没有找到。

这是常见的行为吗？有没有办法让搜索者找到文档？（提交除外）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:50:50.967

我猜您新创建的文档保存在内存中。Lucene 不会立即进行更改，它会将一些文档保存在内存中，因为 I/O 操作需要一些时间和资源。仅在缓冲区已满时才写入是一个好习惯。但是，由于您想立即查看和更改文档，请先尝试刷新缓冲区（`IndexWriter.flush()`）。这应该写入磁盘。只有**在**此尝试（也许）刷新之后。

# jquery - 如何从数据变量中提取 .example 类内容并设置为 .test 类？

> ID：13277805
> 
> 赞同：0
> 
> 时间：2012-11-07T20:38:47.713
> 
> 标签：jquery

我在互联网上找不到任何示例。我想从我域上的其他网页获取段落并设置为`.test`类。到目前为止，我正在使用`.get()`方法来获取 HTML 内容，并将所有内容都传递给数据变量。如何`.example`从数据变量中提取类内容并设置为`.test`类？

```
$(document).ready(function(){
    $.get("data.html", function(data) {
        $(".test").text(data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:45:26.510

你可以试试：

```
$(document).ready(function(){
    $.get("data.html", function(data) {
        $(".test").text($(data).find(".example").text()); // or find(".example").html() depending on what you want
    });
}); 
```

# jquery - dropdownlistfor + jquery 验证

> ID：13277806
> 
> 赞同：0
> 
> 时间：2012-11-07T20:38:51.120
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validate, html.dropdownlistfor

我在 asp .net mvc3 c# 中创建一个应用程序。我创建了一个下拉列表，但无法使用 Jquery 进行客户端验证。

我查看了许多与之相关的文章，并知道这是 asp .net mvc3 中的一个错误。但是，没有任何解决方法适用于我的情况。

我的代码如下：

实体

```
[Required(ErrorMessage = "Furnishing is required.")]
[Display(Name = "Furnishing*")]
public int FurnishedType { get; set; } 
```

看法：

```
<script src="@Url.Content("~/Scripts/jquery-1.8.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="editor-label">
    @Html.LabelFor(model => model.Property.FurnishedType)
    @Html.DropDownListFor(model => model.Property.FurnishedType, Model.FurnishedTypes, "--Select One--")
</div>
<div class="editor-field add-property-error">            
    @Html.ValidationMessageFor(model => model.Property.FurnishedType)
</div> 
```

控制器：

```
public ActionResult AddProperty()
{
    AddPropertyViewModel viewModel = new AddPropertyViewModel
    {
        ...
        FurnishedTypes = websiteRepository.GetFurnishedTypeSelectList(-1),
        ...
    };
    return View(viewModel);
}

public IEnumerable<SelectListItem> GetFurnishedTypeSelectList(int selectedId)
{
    return db.FurnishedType
        .OrderBy(x => x.FurnishedTypeDescription)
        .ToList()
        .Select(x => new SelectListItem
        {
            Value = x.FurnishedTypeId.ToString(),
            Text = x.FurnishedTypeDescription
        });
} 
```

有一个数据库，其值如下

```
1 Furnished
2 Part Furnished
... 
```

用于填充选择列表。

现在，这是一个必填字段，但我无法进行客户端验证以查看用户是否选择了任何值？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:55:13.183

如果您将 -1 分配给“--select one--”

有些东西应该是这样的：

```
$(document).ready(function () {
    $("input[type='submit']").click(function (e) {
        if($("select").val()==="-1"){
           e.preventDefault();
           // display error msg beside ddl too
      }
    });
}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:04:15.650

我的建议是执行以下操作

**在视图中**

```
@using (Html.BeginForm("AddProperty", "Home", FormMethod.Post, new { id = "myForm" }))
{ 
    <div class="editor-label">
        @Html.LabelFor(model => model.Property.FurnishedType)
        @Html.DropDownListFor(model => model.Property.FurnishedType, Model.FurnishedTypes)
    </div>
    <div class="editor-field add-property-error">            
        @Html.ValidationMessageFor(model => model.Property.FurnishedType)
    </div>
}

<script type="text/javascript">

    $.validator.addMethod('selectNone', function (value, element) {
        return this.optional(element) || value != -1;
    }, "Furnishing is required.");

     $("#myForm").validate({
         rules: { FurnishedType: { selectNone: true }}
     });

</script> 
```

**在控制器中**

```
public IEnumerable<SelectListItem> GetFurnishedTypeSelectList(int selectedId)
{
    List<SelectListItem> Lists = new List<SelectListItem>();
    Lists = db.FurnishedType
        .OrderBy(x => x.FurnishedTypeDescription)
        .ToList()
        .Select(x => new SelectListItem
        {
            Value = x.FurnishedTypeId.ToString(),
            Text = x.FurnishedTypeDescription
        });

    Lists.Insert(0, new SelectListItem { Text = "--Select One--", Value = "-1" });

    return Lists;
} 
```

# php - 限制 PHPmailer 以在 Elgg 中使用

> ID：13277807
> 
> 赞同：0
> 
> 时间：2012-11-07T20:40:14.067
> 
> 标签：php, elgg

我将使用社交网络软件 Elgg，用于需要在需要时向特定组发送大量电子邮件的组织。电子邮件的数量可以在 10-1000 之间，具体取决于组。Web 主机每小时仅允许 500 封电子邮件，因此我需要限制脚本以每 8 秒发送一封电子邮件。

我正在将 PHPmailer 与 Elgg 一起使用。PHPmailer 说我应该结合使用这两个脚本（下面的代码）来限制邮件发送。我知道我将如何使用邮件脚本中的代码，我只是不确定一些事情。

1）我不太了解安全模式的目的

2) 在查找 set_time_limit 之后，看起来我应该将其设置为允许发送所有潜在电子邮件的时间量，无论是 10 还是 1000？或者如果需要超时，每个循环最多 30 秒？

3）我应该如何设置它以获得我需要的东西？

链接到 PHPmailer 描述代码：

[http://phpmailer.worxware.com/index.php?pg=tip_ext](http://phpmailer.worxware.com/index.php?pg=tip_ext)

[http://phpmailer.worxware.com/index.php?pg=tip_pause](http://phpmailer.worxware.com/index.php?pg=tip_pause)

```
 <?php

/* The following code snippet with set the maximum execution time
 * of your script to 300 seconds (5 minutes)
 * Note: set_time_limit() does not work with safe_mode enabled
 */

$safeMode = ( @ini_get("safe_mode") == 'On' || @ini_get("safe_mode") === 1 ) ? TRUE : FALSE;
if ( $safeMode === FALSE ) {
  set_time_limit(300); // Sets maximum execution time to 5 minutes (300 seconds)
  // ini_set("max_execution_time", "300"); // this does the same as "set_time_limit(300)"
}

echo "max_execution_time " . ini_get('max_execution_time') . "<br>";

/* if you are using a loop to execute your mailing list (example: from a database),
 * put the command in the loop
 */

while (1==1) {
  set_time_limit(30); // sets (or resets) maximum  execution time to 30 seconds)
  // .... put code to process in here
  if (1!=1) {
    break;
  }
}

?> 
```

和

```
<?php

/* Note: set_time_limit() does not work with safe_mode enabled */

while (1==1) {
  set_time_limit(30); // sets (or resets) maximum  execution time to 30 seconds)
  // .... put code to process in here

  usleep(1000000); // sleep for 1 million micro seconds - will not work with Windows servers / PHP4
  // sleep(1); // sleep for 1 seconds (use with Windows servers / PHP4
  if (1!=1) {
    break;
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:45:28.073

1.  安全模式从 php 5.3 开始被弃用，并在 php 5.4 中被删除，所以如果你的安装是相对较新的，这是一个有争议的问题：http: [//php.net/manual/en/ini.sect.safe-mode.php#ini 。安全模式](http://php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode)

2.  执行 set_time_limit() 将重置计数器，因此只要您的代码在比先前设置的限制更短的时间内到达 set_time_limit() 调用（例如，在 29 秒内到达那里，时钟留出 1 秒），代码将重置计时器并获得另外 30 秒。但是，由于您不希望您的代码过于激烈，您应该完全禁用时间限制。

3.  就个人而言，我不会每 8 秒发送一封电子邮件。我会爆破我们被允许的 500 个，然后有一个预定的工作，每小时启动一次脚本，然后从爆炸停止的地方继续。这将使邮件服务器的事情变得有点突发，但从长远来看可能会更有效，因为它可以将相同收件人域的电子邮件批处理在一起。例如，500 个组中的所有@aol.com 邮件可以一起发送，而不是强制服务器多次连接到 aol 以传递单个邮件。

同样，如果您像这样进行批处理，则服务器故障只会在脚本实际运行和构建电子邮件的几秒钟内“坏”。其余时间 PHP 脚本甚至都不会运行，这将由 smtp 服务器来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:49:29.360

我可能没有快速和特别的帮助，但我会考虑采用异步方法。

这涉及将发送电子邮件的任务存储在队列中，并让工作人员处理这些任务。

最简单的方法是将电子邮件存储在数据库中，并在服务器上运行一个 cronjob 以批量发送电子邮件。

更好（但更复杂）的解决方案是使用某种消息队列系统，如[zeromq](http://www.zeromq.org)或重量级[rabbitmq](http://www.rabbitmq.com)。

我想到的最后一个可能也是最舒服的选择是使用[MailChimp](http://www.mailchimp.com)或[Postmark](http://postmarkapp.com)之类的 Web 服务。

# java - Char cannot be dereferenced? using compareTo

> ID：13277808
> 
> 赞同：1
> 
> 时间：2012-11-07T20:40:14.877
> 
> 标签：java, compareto

I'm trying to make a program that will read in a string and compare each character in the string to see if it is in alphabetical order.

```
public class Main
{
    public static void Main ( String[] args)
    {
        System.out.println("#Please enter the string: ");
        String s = BIO.getString();

        while(!s.equals("END")){
            int length = s.length();
            String sLC = s.toLowerCase();
            int count = 0;
            boolean inOrder = true;

            for(int i = 0; i < length - 1 ; i++){
                if(sLC.charAt(i).compareTo(sLC.charAt(i+1)) > 0) {
                    inOrder = false;
                    break;
                }   
            }  

            System.out.println("#Please enter the string: ");  
            s = BIO.getString();
        }
    }
} 
```

I am using blueJ and when I try to compile this it is giving me the error 'char cannot be dereferenced and highlighting the 'compareTo' method in my IF statement?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:41:26.770

`.charAt()` returns a `char`, which is a primitive. It does not have a `.compareTo()` method.

`char` behaves much like a (smaller) `int`; use the following instead:

```
if(sLC.charAt(i) > sLC.charAt(i+1)) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T20:41:22.827

`sLC.charAt(i)` gives you primitive char. And you cannot invoke `compareTo` on primitives. You need to wrap it in a Character wrapper object, or just use `comparison operator`.

```
if(Character.valueOf(sLC.charAt(i)).compareTo(
   Character.valueOf(sLC.charAt(i+1))) > 0) 
```

or simply: -

```
if(sLC.charAt(i) > sLC.charAt(i+1)) 
```

# python - 通过多台服务器上的结构启动分离的 Unix 进程并检索状态？

> ID：13277822
> 
> 赞同：3
> 
> 时间：2012-11-07T20:40:49.863
> 
> 标签：python, fabric

通过结构在多个远程服务器上启动长时间运行（bash）脚本的推荐方法是什么，以便您以后可以重新附加到进程以检查进程的状态，最终 sigterm 并获取退出代码？

**编辑**（2012 年 11 月 10 日）：

与此同时，我发现一个问题指向同一个方向：[如何在 dtach、screen 中使用织物，是否有一些例子](https://stackoverflow.com/questions/9393374/how-to-use-fabric-use-with-dtach-screen-is-there-some-example)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T21:49:06.793

似乎首选的方法是使用 screen 或 tmux。

[http://www.fabfile.org/faq.html#why-can-ti-run-programs-in-the-background-with-it-makes-fabric-hang](http://www.fabfile.org/faq.html#why-can-t-i-run-programs-in-the-background-with-it-makes-fabric-hang)

# git - 将所有 Visual Studio 项目添加到 GitHub 并通过 SkyDrive 同步它们

> ID：13277823
> 
> 赞同：2
> 
> 时间：2012-11-07T20:40:52.917
> 
> 标签：git, github, backup, repository

标题几乎描述了我所有的问题。我有很多 VisulStudio 项目想要添加到 Git 存储库中。我没有经验哪个Git。我尝试将 Visual Studio 的“项目”文件夹拖放到 GitHub`local`存储库，但它`.git`在我的项目根目录中创建了一个目录。请向我描述在 SkyDrive 中放入存储库和同步需要做什么。我应该将所有项目复制到`SkyDrive`文件夹并在那里创建存储库吗？`SkyDrive`执行完整云备份需要复制到的最少文件数量是多少？

## 更新

当我尝试在 GitHub**应用程序**`Projects`上删除my 的文件夹时，它无法添加更改。我猜是因为那个文件夹里有很多文件。（在 128,429 个文件、10,170 个文件夹中大约有 4GB）。`Visual Studio 2012`

 **所以我的问题是：*为我的所有项目创建 Git 存储库的最佳方法是什么？* 我是不是该：

1.  在我的 SkyDrive 文件夹中创建一个单独的存储库，并为该`Projects`文件夹创建一个存储库并向其添加/提交/推送更改。
2.  为每个项目添加一个存储库并在 SkyDrive 文件夹中添加一个裸存储库？
3.  将我所有的项目复制到 SkyDrive 文件夹并在那里创建存储库？（根本不要使用裸存储库）。如果是这样，我应该使用单个还是多个存储库？
4.  更好的解决方案？？？

最重要的是，是否有一个应用程序可以使这个过程自动化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:40:39.533

由于您是 git 新手，所以[http://www.vogella.com/articles/Git/article.html](http://www.vogella.com/articles/Git/article.html)应该会有所帮助。如果在根目录中创建 .git 文件，则无需担心。你只需要在 git 上使用你的在线存储库推送它，但是在你可以推送它之前，应该在你的在线 git 帐户上创建一个具有相同目录名称的存储库。如果您要向 git 存储库添加其他文件夹和文件，则需要先添加并提交它们，然后再推送它们。为了您的帮助，这里还有一些常用的基本 git 命令： git clone "link of repo" git init git add 。git commit -m "message" git push/pull origin master

如果您决定在很大程度上使用 git，这里还有一个备忘单的链接。[http://cheat.errtheblog.com/s/git/](http://cheat.errtheblog.com/s/git/)**

# java - Music stops after 20 seconds (android soundboard)

> ID：13277828
> 
> 赞同：3
> 
> 时间：2012-11-07T20:40:58.507
> 
> 标签：java, android, eclipse

I have made my own android soundboard. Now i have only 1 problem I have a song Intro , but it is about 38 seconds. When i am trying to play intro i only hear for about 20 seconds.

can someone help me ?

**SoundBoard.java**

```
 package com.soundboard;

import com.soundboard.SoundManager;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Soundboard extends Activity {
private SoundManager mSoundManager;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mSoundManager = new SoundManager();
    mSoundManager.initSounds(getBaseContext());
    mSoundManager.addSound(1, R.raw.sound1);
    mSoundManager.addSound(2, R.raw.sound2);
    mSoundManager.addSound(3, R.raw.sound3);
    mSoundManager.addSound(4, R.raw.sound4);
    mSoundManager.addSound(5, R.raw.sound5);
    mSoundManager.addSound(6, R.raw.sound6);
    mSoundManager.addSound(7, R.raw.sound7);
    mSoundManager.addSound(8, R.raw.sound8);
    mSoundManager.addSound(9, R.raw.sound9);
    mSoundManager.addSound(10, R.raw.sound10);
    mSoundManager.addSound(11, R.raw.sound11);
    mSoundManager.addSound(12, R.raw.sound12);
    mSoundManager.addSound(13, R.raw.sound13);
    mSoundManager.addSound(14, R.raw.sound14);
    mSoundManager.addSound(15, R.raw.sound15);
    mSoundManager.addSound(16, R.raw.sound16);
    mSoundManager.addSound(17, R.raw.sound17);
    mSoundManager.addSound(18, R.raw.sound18);
    mSoundManager.addSound(19, R.raw.sound19);
    mSoundManager.addSound(20, R.raw.sound20);
    mSoundManager.addSound(21, R.raw.sound21);
    mSoundManager.addSound(22, R.raw.sound22);
    mSoundManager.addSound(23, R.raw.sound23);
    mSoundManager.addSound(24, R.raw.sound24);
    mSoundManager.addSound(25, R.raw.sound25);
    mSoundManager.addSound(26, R.raw.sound26);
    mSoundManager.addSound(27, R.raw.sound27);
    mSoundManager.addSound(28, R.raw.sound28);
    mSoundManager.addSound(29, R.raw.sound29);
    mSoundManager.addSound(30, R.raw.sound30);
    mSoundManager.addSound(31, R.raw.sound31);
    mSoundManager.addSound(32, R.raw.sound32);
    mSoundManager.addSound(33, R.raw.sound33);
    mSoundManager.addSound(34, R.raw.sound34);
    mSoundManager.addSound(35, R.raw.sound35);
    mSoundManager.addSound(36, R.raw.sound36);

    Button SoundButton1 = (Button)findViewById(R.id.sound1);
    SoundButton1.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(1);

}
    });       
    Button SoundButton2 = (Button)findViewById(R.id.sound2);
    SoundButton2.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(2);

}
    });    
    Button SoundButton3 = (Button)findViewById(R.id.sound3);
    SoundButton3.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(3);

}
    });    
    Button SoundButton4 = (Button)findViewById(R.id.sound4);
    SoundButton4.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(4);

}
    });    
    Button SoundButton5 = (Button)findViewById(R.id.sound5);
    SoundButton5.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(5);

}
    });   
    Button SoundButton6 = (Button)findViewById(R.id.sound6);
    SoundButton6.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(6);

}
    });    
    Button SoundButton7 = (Button)findViewById(R.id.sound7);
    SoundButton7.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(7);

}
    });
   Button SoundButton8 = (Button)findViewById(R.id.sound8);
   SoundButton8.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(8);

}
   });    
    Button SoundButton9 = (Button)findViewById(R.id.sound9);
    SoundButton9.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(9);

}
    });    
   Button SoundButton10 = (Button)findViewById(R.id.sound10);
   SoundButton10.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(10);

}
   });    
    Button SoundButton11 = (Button)findViewById(R.id.sound11);
    SoundButton11.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(11);

}
    });    
    Button SoundButton12 = (Button)findViewById(R.id.sound12);
    SoundButton12.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(12);

}
    });    
   Button SoundButton13 = (Button)findViewById(R.id.sound13);
   SoundButton13.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(13);

}
   });    
    Button SoundButton14 = (Button)findViewById(R.id.sound14);
    SoundButton14.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(14);

}
    });    

    Button SoundButton15 = (Button)findViewById(R.id.sound15);
            SoundButton15.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(15);

        }
    });
            Button SoundButton16 = (Button)findViewById(R.id.sound16);
            SoundButton16.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(16);

        }
    });    
            Button SoundButton17 = (Button)findViewById(R.id.sound17);
            SoundButton17.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(17);

        }
    });    
            Button SoundButton18 = (Button)findViewById(R.id.sound18);
            SoundButton18.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(18);

        }
    });    
            Button SoundButton19 = (Button)findViewById(R.id.sound19);
            SoundButton19.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(19);

        }
    });    
            Button SoundButton20 = (Button)findViewById(R.id.sound20);
            SoundButton20.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(20);

        }
    });    
           Button SoundButton21 = (Button)findViewById(R.id.sound21);
            SoundButton21.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(21);

        }
   });    
            Button SoundButton22 = (Button)findViewById(R.id.sound22);
            SoundButton22.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(22);

        }
    });    
            Button SoundButton23 = (Button)findViewById(R.id.sound23);
            SoundButton23.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(23);

        }
    });    
            Button SoundButton24 = (Button)findViewById(R.id.sound24);
            SoundButton24.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(24);

        }
    });    
            Button SoundButton25 = (Button)findViewById(R.id.sound25);
            SoundButton25.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(25);

        }
    });    
            Button SoundButton26 = (Button)findViewById(R.id.sound26);
            SoundButton26.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(26);

        }
    });    
            Button SoundButton27 = (Button)findViewById(R.id.sound27);
            SoundButton27.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(27);

        }
    });    
            Button SoundButton28 = (Button)findViewById(R.id.sound28);
            SoundButton28.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(28);

        }
    });    
            Button SoundButton29 = (Button)findViewById(R.id.sound29);
            SoundButton29.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(29);

        }
    });    
            Button SoundButton30 = (Button)findViewById(R.id.sound30);
            SoundButton30.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(30);

        }
    });    
            Button SoundButton31 = (Button)findViewById(R.id.sound31);
            SoundButton31.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(31);

        }
    });
            Button SoundButton32 = (Button)findViewById(R.id.sound32);
            SoundButton32.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(32);

        }
    });
            Button SoundButton33 = (Button)findViewById(R.id.sound33);
            SoundButton33.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(33);

        }
    });

            Button SoundButton34 = (Button)findViewById(R.id.sound34);
            SoundButton34.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(34);

        }
    });

            Button SoundButton35 = (Button)findViewById(R.id.sound35);
            SoundButton35.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(35);

        }
    });
            Button SoundButton36 = (Button)findViewById(R.id.sound36);
            SoundButton36.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mSoundManager.playSound(36);

        }
            });
}
} 
```

**SoundManager.java**

```
 package com.soundboard;

    import java.util.HashMap;

import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;

    public class SoundManager {

    private  SoundPool mSoundPool; 
    private  HashMap<Integer, Integer> mSoundPoolMap; 
    private  AudioManager  mAudioManager;
    private  Context mContext;

    public SoundManager()
    {

    }

    public void initSounds(Context theContext) { 
         mContext = theContext;
         mSoundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0); 
         mSoundPoolMap = new HashMap<Integer, Integer>(); 
         mAudioManager = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);         
    } 

    public void addSound(int Index,int SoundID)
    {
        mSoundPoolMap.put(Index, mSoundPool.load(mContext, SoundID, 1));

    }

    public void playSound(int index) { 

         int streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 
         mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0, 1f); 
}

} 
```

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:03:17.840

如果您是在主线程上而不是在服务（推荐用于该长度的音乐播放）或后台线程中执行此操作，您可能会将事件线程锁定太久。只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:53:03.387

您使用 Soundpool 而不是 MediaPlayer 有什么具体原因吗？

对于这种类型的媒体播放，MediaPlayer 更加优雅。

# jsf-2 - 使用 在数据表中的单元格上打开子表

> ID：13277832
> 
> 赞同：0
> 
> 时间：2012-11-07T20:41:17.747
> 
> 标签：jsf-2, datatable, primefaces, commandlink

我基本上有一个数据表，其中一列是可点击的。我通过使用 primefaces 中的 commandlink 完成了这项工作。

人们到处都用它来导航，但我希望点击打开一个子数据表。根据我在该列中单击的行，必须出现相应的数据表。

这可以在primefaces中使用吗，如果可以，我该如何进行？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:27:36.367

我终于解决了这个问题。我基本上创建了一个数据表并将其隐藏，具体取决于单击的列，我使用支持 bean 相应地填充数据表。我使用以下代码使 onclick 事件调用支持 bean 中的函数：

```
<p:column headerText="Train" style="font-size:90%;font-family:Times New Roman, Times, serif;">
    <p:commandLink onclick="javascript:ShowHide('HiddenDiv');"
        id="tableUpdater" update=":closeButton,:subForm:trainTable" value="#{rail.trainNo}"
        action="#{yardMaster.populateTrainDetails(rail.trainNo)}"
        style="font-family:Times New Roman, Times, serif;">
    </p:commandLink>
</p:column> 
```

所以基本上类似于动态数据表。

# javascript - 确定正确的组合

> ID：13277834
> 
> 赞同：0
> 
> 时间：2012-11-07T20:41:24.727
> 
> 标签：javascript, logic

努力编写代码......迷失在循环中。

我有 2 个数据集，例如：

```
var elements = [
        {"id":"21.U2duHWiX.0zu.E0C","amount":"345"},
        {"id":"21.U2duHWiX.A5q.E0C","amount":"344"}
    ]

var elements_in_combination = [
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
] 
```

我正在寻找使用所有元素的最低数量。

答案是 329 + 328。

在这里，有 3 个元素，例如：

```
var elements = [
        {"id":"21.U2duHWiX.0zu.E0C","amount":"345"},
        {"id":"21.U2duHWiX.A5q.E0C","amount":"344"},
        {"id":"21.U2duHWiX.P1y.E0C","amount":"343"}
    ]

var elements_in_combination = [
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"327","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"327","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"314","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"313","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"312","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]}
] 
```

这里的答案是 314 + 313 + 312....但我不知道如何使用代码到达那里。

元素越多，事情就越复杂，当它们可能不会全部组合在一起时，例如：

```
var elements = [
    {"id":"21.U2duHWiX.0zu.E0C","amount":"345"},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"344"},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"342"},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"343"}
]

var elements_in_combination = [
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"326","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"329","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"327","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"326","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"328","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"327","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"326","combination":["21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"327","combination":["21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"314","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"313","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"311","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"314","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"313","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"312","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.A5q.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.0zu.E0C","amount":"314","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"311","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"312","combination":["21.U2duHWiX.0zu.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.A5q.E0C","amount":"313","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.J3e.E0C","amount":"311","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]},
    {"id":"21.U2duHWiX.P1y.E0C","amount":"312","combination":["21.U2duHWiX.A5q.E0C","21.U2duHWiX.J3e.E0C","21.U2duHWiX.P1y.E0C"]}
] 
```

关于如何解决这个问题的任何想法？

（对不起，解释和解决一样困难）

**编辑：澄清**

这是一个抽象的例子：

```
var elements = [ 
    { id: A, value: '#' },
    { id: B, value: '#' },
    { id: C, value: '#' }
]

var elements_in_combination = [
    { id: A, value: '#', combinations: [A, B] },
    { id: B, value: '#', combinations: [A, B] },
    { id: A, value: '#', combinations: [A, C] },
    { id: C, value: '#', combinations: [A, C] },
    { id: B, value: '#', combinations: [B, C] }, 
    { id: C, value: '#', combinations: [B, C] },
    { id: A, value: '#', combinations: [A, B, C] },
    { id: B, value: '#', combinations: [A, B, C] },
    { id: C, value: '#', combinations: [A, B, C] },
] 
```

我想知道什么产生了最低值，计算方法是：

```
[A, B, C] = '##'
or
[A, B] + C = '##'
or
[A, C] + B = '##'
or
A + [B, C] = '##'
or
A + B + C = '##' 
```

然后我需要从元素和具有最佳组合的 elements_in_combination 构建一个数组，例如：

```
var elements = [ 
    { id: A, value: '#', combinations: [A, B] },
    { id: B, value: '#', combinations: [A, B] },
    { id: C, value: '#' }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:31:41.197

好的。检查这个脚本：

```
// this part is only needed if your ids are arbitrary, and can contain the join-character
// if not, you could replace this by the identity function
var count = 0, numericids = {};
function getNumericId(id) {
    return id in numericids ? numericids[id] : numericids[id] = count++;
}

// returns the same (reversible) id for all similiar [unsorted] key combinations
function id(keys) {
    return keys.map(getNumericId).sort().join('-');
    // you might remove the getNumericId part if distinct without
}

// now, build a map that holds the summed amount for each single (sub)combination
var amounts = {};
function add(amount, keys) {
    var key = id (keys);
    if (key in amounts)
        amounts[key] += amount;
    else
        amounts[key] = amount;
}
for (var i=0; i<elements.length; i++) // each element is a single combination
    add(Number(elements[i].amount), [elements[i].id]);
for (var i=0; i<elements_in_combination.length; i++)
    add(Number(elements_in_combination[i].amount), elements_in_combination[i].combination);
// so we have the amounts in a good accessible structure now 
```

接下来，我们需要找到[一个集合的所有分区](http://en.wikipedia.org/wiki/Partition_of_a_set)。哇。这是一个 NP-hard 问题，不容易解决。三个元素（您问题中的五个组合）很容易变得越来越复杂，对于 6 个元素，您已经有 203 种可能性（[贝尔数字](http://en.wikipedia.org/wiki/Bell_number)。为了进一步阅读，我发现

*   [Mathematica.SE：查找集合的所有分区](https://mathematica.stackexchange.com/questions/8528/finding-all-partitions-of-a-set)
*   [如何最大程度地划分集合？](https://stackoverflow.com/q/1618685/1048572)
*   [生成集合的分区](http://compprog.wordpress.com/2007/10/15/generating-the-partitions-of-a-set/)（在 C 中）

好的，让我们递归解决这个问题，缓存结果并获取最小值：

```
// first, get the set for which we want to determine the result:
var initialset = elements.map(function(el){return getNumericId(el.id);}).sort();
// set up a cache for minimum value results:
var cache = {};

function partition(set) {
// returns an array of all partitionings into two parts
    var results = [[[set[0]],[]]];
    for (var i=1; i<set.length; i++)
        for (var j=0, l=results.length; j<l; j++) {
            // repeat the array with duplicates
            results[j+l] = [results[j][0].slice(),results[j][1].slice()];
            // but while we push to the first part in the first half
            results[ j ][0].push(set[i]);
            // we push to the second part in the second half
            results[j+l][1].push(set[i]);
        }
    return results;
}

function getMin(set) {
    var key = set.join('-');
    if (key in cache) // quick escape
        return cache[key];
    var result = {amount:Infinity, set:null};
    if (key in amounts) // there is a combination with this
        result = {amount:amounts[key], set:[key]};
    var divisions = partition(set);
    // for all possibilities to divide the set in two parts
    // (unless the first, which is [set, []])
    for (var i=1; i<divisions.length; i++) {
        // get the minimal amounts of both parts
        var first = getMin(divisions[i][0]);
        var second = getMin(divisions[i][1]);
        var sum = first.amount + second.amount;
        if (sum < result.amount) // and find new minima
            result = {amount:sum, set: first.set.concat(second.set)};
    }
    return cache[key] = result;
}
// And now invoke this monster!
if (!initialset.length) throw new Error("When searching for nothing you would find nothing");
var min = getMin(initialset);
cache = null, amounts = null; // and immediately free the memory 
```

所以，这是你的结果！它包含您在属性中所需的总和以及`amount`属性中使用的组合键集`set`。

构建元素数组现在很容易：

```
var elemArr = [];
function addElem(el, comb) {
    if (min.set.indexOf(id(comb)) >= 0)
         elemArr.push(el);
}
for (var i=0; i<elements.length; i++) // each element is a single combination
    addElem(elements[i], [elements[i].id]);
for (var i=0; i<elements_in_combination.length; i++)
    addElem(elements_in_combination[i], elements_in_combination[i].combination);

return elemArr; // We've done it! 
```

该脚本为您的所有示例返回正确的结果：

*   329 (21.U2duHWiX.0zu.E0C) + 328 (21.U2duHWiX.A5q.E0C)
*   314 (21.U2duHWiX.0zu.E0C) + 313 (21.U2duHWiX.A5q.E0C) + 312 (21.U2duHWiX.P1y.E0C)
*   344 (21.U2duHWiX.A5q.E0C) + 314 (21.U2duHWiX.0zu.E0C) + 311 (21.U2duHWiX.J3e.E0C) + 312 (21.U2duHWiX.P1y.E0C) -`[B]-[A,C,D]`组合:-)

请注意，这些可能不是唯一的解决方案，因为只找到了许多可能的最小值中的第一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:15:45.833

```
function find_matches(elements, elements_in_combination) {
    var matches = ();
    var element_ids = ();
    for (var i = 0; i < elements.length; i++) {
        element_ids.push(elements[i].id);
    }
    element_ids.sort();
    for (i = 0; i < elements_in_combination.length; i++) {
        combs = elements_in_combination[i].combination.slice(0).sort();
        if (array_equal(element_ids, combs)) {
            matches.push(elements_in_combination[i].amount;
        }
    }
    return matches;
} 
```

请参阅[此问题](https://stackoverflow.com/questions/3115982/how-to-check-javascript-array-equals)以了解如何实施`array_equal()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:58:03.300

好的..这可能是一个选择，但是因为我不知道“最佳组合”的术语是什么，所以我无法进一步减少它。

以下代码应生成一个对象，其中包含每个元素作为对象。然后，每个元素对象将包含每个唯一数量（从低到高）的另一个对象。然后，金额对象包含该金额的可能组合。

IE。容器对象 ( *finalElements* ) - 元素 id - 订单和金额 - 组合：

```
var finalElements = { };

// sort:
elements_in_combination.sort( eic_sortOnAmmount );

function eic_sortOnAmmount( a, b ) {
    return a.amount - b.amount;
}

// parse the elements array and create an object for each element
// add the initial amount as a key:
for( var i in elements ) {
    finalElements[ elements[i].id ] = { order:[] };
    finalElements[ elements[i].id ][ elements[ i ].amount ] = null;
}

// parse the elements_in_combination array
// if the id matches one of the elements in finalElements
// add its amount and combination
for( var i in elements_in_combination ) {
    if( finalElements.hasOwnProperty( elements_in_combination[ i ].id ) ) {
        if( finalElements[ elements_in_combination[ i ].id ].hasOwnProperty( elements_in_combination[ i ].amount ) ) {
            finalElements[ elements_in_combination[ i ].id ][ elements_in_combination[ i ].amount ].push( elements_in_combination[ i ].combination );
        } else {
            finalElements[ elements_in_combination[ i ].id ].order.push(elements_in_combination[ i ].amount);
            finalElements[ elements_in_combination[ i ].id ][ elements_in_combination[ i ].amount] = [ elements_in_combination[ i ].combination ];
        }
    }
} 
```

示例用法：

```
console.log(finalElements["21.U2duHWiX.0zu.E0C"].order[0]); //produces 314
console.log(finalElements["21.U2duHWiX.0zu.E0C"][finalElements["21.U2duHWiX.0zu.E0C"].order[0]]); // produces the combinations for 314 
```

希望这会有所帮助 - 顺便说一句：空量是原始元素量。

# javascript - 如何判断 iPhone 是否从 JavaScript 后台返回？

> ID：13277839
> 
> 赞同：1
> 
> 时间：2012-11-07T20:41:30.830
> 
> 标签：javascript, iphone

我知道当应用程序被发送到后台时iPhone会停止运行javascript（即在应用程序运行时按下主页按钮），但我希望能够检测当javascript再次启动时是否发生这种情况该应用程序被重新激活。

我一直在尝试的一种解决方案是让迭代器不断运行以“签入”，然后对其进行检查以判断应用程序是否已进入后台。

```
var lastCheckinTime = new Date().getTime();
function checkin(){
  lastCheckinTime = new Date().getTime();
}
setIterator( checkin, 1000 );

// Later, some code that needs to know if iphone went to background
var now = new Date().getTime();
if( (now - lastCheckinTime) > 1100 ) {
  // run sent to background code 
```

有一个更好的方法吗？我发现这种方法的问题是，如果用户快速关闭并重新打开应用程序，它就不起作用，但我还没有找到更好的检测方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:50:48.090

您可以使用“pageshow”事件。在您的手机上访问此页面，[http://jsfiddle.net/vbuDh/](http://jsfiddle.net/vbuDh/)

```
window.addEventListener('pageshow', function(ev){

    alert('dasd');

},false);​ 
```

每当标签获得焦点或在此页面上重新激活移动 Safari 时，都会触发此操作。

# redirect - 301 Redirect removing .html extension

> ID：13277842
> 
> 赞同：2
> 
> 时间：2012-11-07T20:41:36.303
> 
> 标签：redirect

Hi I need to 301 redirect the following-

[http://www.satellites.co.uk/forums/tags/freesat.html](http://www.satellites.co.uk/forums/tags/freesat.html)

to

[http://www.satellites.co.uk/forums/tags/forums/freesat/](http://www.satellites.co.uk/forums/tags/forums/freesat/)

freesat.html could be any file name depending on the search term.

The .htaccess file is in the root folder and we require the trailing slash.

Thanks Chris.

# irc - 如何检查 $4 是否在 IRC 中注册？

> ID：13277845
> 
> 赞同：1
> 
> 时间：2012-11-07T20:41:43.800
> 
> 标签：irc, mirc

在使用 MSL 语言进行编程方面，我是一位专家，但是我不熟悉原始命令之类的东西。

我正在开发一个新脚本。在这个脚本中，我想检查用户所说的 $4 是否是注册昵称，但我不知道该怎么做。

非常感谢您提前提供的任何帮助和/或建议。

最好的问候，蒂姆

**更新：**

```
raw 307:*:{ set $+(%,%chan,-,%CheckNick) Registered }
on *:TEXT:*:#:{
    if ($1 == !regtest) {
        set %chan $remove($chan,$chr(35))

        set %CheckNick $4
        whois $4
    }
    if ($($+(%,%chan,-,%CheckNick),$4),5) != $null) {
        do this...
    }
    else {
        else message...
    }
} 
```

我让这个工作来检查但是我的​​ if 语句来检查变量是否已被设置或没有被忽略......

**编辑：**

我尝试使用这个：

```
checkNickReg $chan $2 $nick 
```

...并呼应这一点：

```
 echo -a Target: $1
  echo -a Nick: $2
  echo -a Status: $3
  echo -a Chan: $3 - $chan 
```

我正在尝试对频道做出回应，例如；$nick $+ , $1 未注册/注册/注册但未登录。

我在上面发布的内容显然是错误的，因为它不起作用，但是我尝试了一些方法，实际上我不确定在没有标记或设置变量之类的情况下如何传递数据......

**回复**

[01:59:06] <~MrTIMarshall> !isReged mr-dynomite
[01:59:08] <&TornHQ> ：mr-dynomite 状态为：未登录
**编辑：** mr-dynomite 当前未开启，如果这不是 = 不存在或者即使它们没有打开也会检查，如果是这样，这真是太棒了！[02:00:04] <~MrTIMarshall> !isReged MrTIMarshall
[02:00:04] <&TornHQ> ：MrTIMarshall 状态为：LOGGEDIN

$4 似乎不起作用，“存在，未登录”和“已识别，未登录”有什么区别？

此外，如何在不设置变量或标记化的情况下传递数据？

（PS 非常感谢您迄今为止所提供的帮助！）

**另一个编辑：**

我今天一直在深入研究，我认为如果 0 或 1 用户未在线或未注册，我是否正确（在评论中它说 0 = 不存在/不在线，1 = 未登录in 而 2 也表示未登录但已识别，我不确定识别的含义。否则我非常感谢这个脚本帮助，我只是不清楚数字......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:53:11.143

在大多数 IRCD 上，它仅在用户的 WHOIS 响应中公开，如果有的话。每次用户说某事时运行 WHOIS 是不可取的，尤其是因为服务器管理员可能会在每次发生时收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:28:23.940

由于您没有指定任何特定网络，因此我为周围的一些常见网络（实际上具有用户身份验证系统）编写了大纲。您应该能够按照该模式添加许多其他网络。

基本上你执行`/checkNickReg <target> <nick> [optional extra data]`，当服务器使用注册信息（如果适用）重播时，使用`on isReged signal`事件来处理回复。其他一切都非常透明。

**编辑：**看起来您正在使用的指定网络（撕裂）使用标准的 anope 服务。所以我更新了代码以支持该网络。

```
; triggers when you get nick registration info back
; $1 = Target
; $2 = Nick
; $3 = Status, can be: LOGGEDIN, RECOGNIZED, NOTLOGGED
; $4- = Everything else passed
on *:signal:isReged:{
  echo -a Target: $1
  echo -a Nick: $2
  echo -a Status: $3
  echo -a Else: $4-
}

; reg lookup routines
alias checkNickReg {
  set %reg. $+ $network 1
  set %reg.target. $+ $network $1
  set %reg.nick. $+ $network $2
  set %reg.other. $+ $network $3-

  ; Freenode uses: NickServ ACC <nick>
  if ($network == Freenode) msg NickServ ACC $2
  ; Rizon/SwiftIRC/OFTC/Torn use: NickServ STATUS <nick>
  elseif ($istok(Rizon SwiftIRC OFTC Torn, $network, 32)) msg NickServ STATUS $2
}

; listen for replays
on *:notice:*:*:{
  if ($($+(%, reg., $network),2)) {
    ;
    var %target = $($+(%, reg.target., $network),2)
    var %nick = $($+(%, reg.nick., $network),2)
    var %other = $($+(%, reg.other., $network),2)
    ;
    unset %reg*. $+ $network

    if (($network == FreeNode) && ($2 == ACC)) $&
      || (($istok(Rizon SwiftIRC OFTC Torn, $network, 32)) && ($1 == STATUS)) {

      ; FreeNode:

      ; 0 = does not exist
      ; 1 = exists, not logged in
      ; 2 = recognized, not logged in
      ; 3 = logged in

      ; Rizon/SwiftIRC/OFTC/Torn:

      ; 0 = does not exists / not online
      ; 1 = not logged in
      ; 2 = recognized, not logged in
      ; 3 = logged in

      if ($3 < 2) var %status = NOTLOGGED
      elseif ($3 == 2) var %status = RECOGNIZED
      else var %status = LOGGEDIN
    }

    ;send status signal
    .signal isReged %target %nick %status %other 
  }
} 
```

（额外注意：出于安全原因，添加额外检查以确保 $nick 是 AuthServ/NickServ 可能很有用。）

一个简单的使用示例是：

```
; Just a basic example of how to call it.
on *:text:!isReged &:#:{
  checkNickReg $chan $2 $nick
}

on *:signal:isReged:{
  msg $1 $4: $2 status is: $3
} 
```

类型`!isReged <nick>`

**编辑：**数据通过全局变量传递给 on isReged 事件。我将它们设置在别名中，并在事件`checkNickReg`中清理它们。`on notice`所以你永远看不到它们，因为它们被清理干净了。它们在 $1- 中传递给 isReged 信号事件。

# c++ - std::function 和 Signal/Slot 系统

> ID：13277849
> 
> 赞同：5
> 
> 时间：2012-11-07T20:41:51.017
> 
> 标签：c++, c++11, signals, signals-slots, std-function

我正在尝试在 C++ 中创建一个简单的 Signals/Slots 系统而不使用 boost，但是当我尝试将它与参数一起使用时遇到了一些问题，这是我的代码：

**我的信号课：**

```
template <typename T> 
class Signal
{
private:
    typedef std::function<T> Slot;

public:
    Signal();

    void connect( Slot slot );
    void emit( T data );
    void emit();

private:    
    std::vector<Slot> slots;    
}; 
```

**我的测试课：**

```
class Object
{
public:
    Object();
    void sayHello(  int i  );
}; 
```

所以，我像这样使用我的课程：

```
Signal<void(int)> signal;
signal.connect( std::bind( &Object::sayHello, player, std::placeholders::_1 ) );
signal.emit( 0 ); 
```

我在 Signal.cpp 中收到警告： **候选函数不可行：第一个参数没有从 'void (*)(int)' 到 'int' 的已知转换；**

在这段代码中：

```
template <typename T>
void Signal<T>::emit( T data )
{
    typename std::vector<Slot>::iterator i;
    Slot t;

    for( i = this->slots.begin(); i != this->slots.end(); i++ )
    {
        t = (*i);
        t( data );   // Here
    }
} 
```

我该如何解决？如果我想给我的“发射”方法一个对象或多个参数，我可以做吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:49:53.970

`Signal`从您的班级中挑选三行：

```
template <typename T> 
    // ...
    typedef std::function<T> Slot;
    // ...
    void emit( T data ); 
```

并声明您的信号：

```
Signal<void(int)> signal; 
```

答案应该很明显：`void emit(T)`变成`void emit(void(*)(int))`（函数类型，例如`void(int)`当它们是函数参数时转换为指针）。

我只是建议使用每个使用的类模板都采用相同的方式`T<Signature>`：部分专业化。

```
template<class Sig>
class Signal;

template<class R, class... Args>
class Signal<R(Args...)>{
  // ...
  typedef std::function<R(Args...)> Slot;
  // ...
  void emit(Args... args) const{
    // iterate over slots and call them, passing `args...`
  }
}; 
```

# visual-studio - 如何使用 msvc2010 构建 GSL？

> ID：13277856
> 
> 赞同：15
> 
> 时间：2012-11-07T20:42:24.003
> 
> 标签：visual-studio, qt, visual-c++, shared-libraries, gsl

我正在使用 Qt 4.8.3 和 QtCreator，我已经按照[此处](https://stackoverflow.com/questions/12113400/compiling-qt-4-8-2-for-visual-studio-2012)的说明使用 msvc2010 进行了编译。但是现在我需要链接到 GSL（Gnu 科学图书馆），但目前我只知道如何使用 g++ 构建它，这会产生链接器错误，正如[这里](https://stackoverflow.com/questions/579556/cygwin-compile-error-in-sys-types-h)所描述的那样，毫无疑问是因为@EvanTeran 的答案中给出的原因。但是，就我而言，通过 cygwin 使用 g++ 构建 Qt 可能不是一种选择——我刚刚摆脱了多天的噩梦，在此期间我试图做到这一点，但不能，如此[处](https://stackoverflow.com/questions/13217734/cant-build-qt-in-windows-from-source-perl-installed-but-still-cant-find-heade)所述。当然有一种方法可以使用 msvc2010 构建 gsl，但是如何？我已经安装了 VS 2012 Express（虽然我以前从未使用过），以防有使用它的解决方案。

**编辑：**看看 CMake，我能做的最好的事情似乎是为 GSL 手动创建 CMakeLists.txt 文件的整个层次结构。这有点太多了，所以我放了一个 100pt。赏金上面提到的问题。解决我的问题 Visual Studio 路线（此处）或使用 g++ 将获得赏金和这两个问题的答案。

**更新：** 下面的答案很好，但不是无缝的，可能是因为我实际上需要在 VS2012 下编译。需要对代码进行一些调整，例如显式强制转换，这在以前的编译器下显然是可以容忍的，但我的编译器却不能。否则事情进展得相当顺利。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T20:58:33.113

我在这里实现了对 GSL 的 CMake 构建支持：[https ://github.com/ampl/gsl](https://github.com/ampl/gsl)

[CMake](http://www.cmake.org/)可以生成 Visual Studio 解决方案或 NMake 生成文件。例如：

```
> git clone git://github.com/ampl/gsl.git
> cd gsl
> cmake .
-- Building for: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
... 
```

这将为 Visual Studio 2010 生成解决方案 ( `GSL.sln`) 和项目文件。

此 CMake 构建脚本现在包含在`contrib`GSL Git 存储库的目录中`git://git.savannah.gnu.org/gsl.git`。

`GSL_SHARED`自 2014 年 5 月起，通过选项也支持构建共享库 (DLL) 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T12:30:47.133

[您可以使用 CMake 并从此存储库](https://github.com/ampl/gsl)为您使用的任何 Visual Studio 版本创建自己的构建。查看@vitaut[的答案以获取更多详细信息。](https://stackoverflow.com/a/14467869/1254352)

# jquery - 从 JSON 对象获取值

> ID：13277857
> 
> 赞同：1
> 
> 时间：2012-11-07T20:42:24.947
> 
> 标签：jquery, json

我有一个页面通过 AJAX 将一些数据提交到另一个页面，在该页面中使用 json_encode PHP 函数对其进行处理并返回。

在我的原始页面上，在 AJAX 函数中，成功后我会取回数据并将其置于警报状态以进行如下测试：

```
success: function(data){
   alert(data);
} 
```

警报输出格式如下：

```
{"id":2,"item":"my text string"} 
```

不，我需要抓取这个对象的每个部分并使用 jQuery 对它们做一些事情。我如何得到它们？我试过： data-> 但它破坏了我的 JS 代码......有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:43:09.420

首先，确保你得到的数据被 jQuery 解析为 json，使用`dataType`设置。

然后使用`data.id`or`data['id']`来读取 id 参数

```
$.ajax({
    url: 'someurl',
    dataType: 'json', // precise this
    success: function(data){
       var id = data.id;
       var item = data.item;
       alert(item);
    }
}); 
```

例如`data['id']`，当您的数据是`{"some name":9}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:45:47.260

您的警报告诉我您没有正在处理的对象......而只是一个字符串。您需要先将数据解析为 JSON 对象。

[http://jsfiddle.net/QNu9Y/](http://jsfiddle.net/QNu9Y/)

```
d= '{"id":2,"item":"my text string"}';

(function(data){
    var parsed = JSON.parse(data)
    alert(parsed.id)
       })(d) 
```

# android - Android - 带有按钮的主屏幕截图

> ID：13277858
> 
> 赞同：-4
> 
> 时间：2012-11-07T20:42:29.973
> 
> 标签：android, eclipse, sdk, screenshot

我正在尝试将我制作的名为 Desktop Concealer 的 Windows 程序移植到 android。该程序与任何其他注销程序一样工作，但它实际上并不注销。这使用户可以访问可用于列表（下载、安装程序）的计算机。

该程序在实际显示表单之前会截取整个桌面的屏幕截图。然后它给出了一个登录密码选项。当用户决定退出的时间时。该程序在整个桌面上显示屏幕截图，当单击它显示注销窗口的任何位置时。

我想知道我是否可以在不必到那里的情况下拍摄主屏幕的照片/屏幕截图，或者如果不可能；我怎么能截图。

这是 youtube 上的程序演示，让您更好地了解它的工作原理：

[http://www.youtube.com/watch?v=6Gl4hNXI7oo](http://www.youtube.com/watch?v=6Gl4hNXI7oo)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:20:56.580

> 我想知道我是否可以在无需到现场的情况下拍摄主屏幕的照片/屏幕截图

一般来说，出于安全和隐私原因，您在任何情况下都不能以编程方式截取屏幕截图。

# javascript - R2D3 - 使用 remove() 方法

> ID：13277863
> 
> 赞同：1
> 
> 时间：2012-11-07T20:42:45.490
> 
> 标签：javascript, d3.js

我正在使用 R2D3，即 D3 的 ie8 兼容性库，我注意到当我使用 .remove() 方法时，它什么也没做。我可以看到现代浏览器上的 svg 已被删除，但不是 ie 8，即使我使用的是 R2D3。

任何人都知道 R2D3 是否以不同的方式处理 remove() 方法？或者如果我必须以其他方式调用该事件？

```
d3.select("#animation").select("svg").remove(); 
```

# c# - 使用 UML 显示递归方法

> ID：13277867
> 
> 赞同：1
> 
> 时间：2012-11-07T20:43:05.740
> 
> 标签：c#, java, uml

有没有办法用 UML 类图建模显示递归方法？

![类图](../Images/8552563908f024fe215379ab343150cf.png)

在上面的类中，我有一个静态方法Calculate，我想证明这个方法单独递归调用自身，而不是任何其他方法或类。我如何在 UML 中显示这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:57:21.363

在序列图中，您可以显示一个方法进行的方法调用，因此可以显示一个方法是递归的（调用自身）。相反，类图仅对系统的静态结构建模。如果要强调一个方法是递归的，唯一的办法就是使用注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:42:04.433

您可以使用“递归”构造型或添加标记值“recursive=true”来添加该信息。

# facebook - 我是否必须与某人成为朋友才能让他们成为应用程序的管理员？

> ID：13277870
> 
> 赞同：0
> 
> 时间：2012-11-07T20:43:09.107
> 
> 标签：facebook, admin

我正在尝试将某人作为管理员添加到我正在开发的应用程序中，但我不是他们的“朋友”。当我在尝试将他们添加为管理员时输入他们的电子邮件地址时，它说该用户不在 Facebook 上。然而，当我使用该电子邮件地址在 Facebook 上搜索用户时，它会立即找到他们。

我唯一能想到的是，这个人不是我的朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:51:03.627

根据文档，您不需要成为朋友。再一次，文档可能尚未更新以反映政策的变化。

[https://developers.facebook.com/docs/guides/games/development-cycle/](https://developers.facebook.com/docs/guides/games/development-cycle/)

> 可以通过指定用户的姓名（如果他们是您的朋友）、电子邮件地址或 Facebook 用户 ID 来添加用户。用户无需成为好友即可添加到角色。

试试他们的 Facebook 用户 ID。如果这不起作用，只需与他们交朋友并尝试这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T20:12:11.263

刚刚对此进行了详细测试。看来您必须在 FB 上与某人成为朋友才能将他们作为管理员添加到您的应用中。（请注意，这与将它们添加为页面管理员完全不同，显然您*不需要*成为朋友。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-24T15:32:30.613

您可以只添加他们的电子邮件地址（但他们必须喜欢该页面，并且使用的电子邮件地址需要与他们的 Facebook 帐户相关联）。

# url - 从 UIWebView 获取 YouTube 网址

> ID：13277871
> 
> 赞同：0
> 
> 时间：2012-11-07T20:43:10.033
> 
> 标签：url, video, youtube, find, save

如何从 UIWebView 中播放的 youtube 视频中获取 url？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:43:10.033

将 YouTube 视频加载到 webView 后，我创建了一个按钮，用户可以点击该按钮将 URL 复制到同一页面上的文本字段中。诀窍是获取页面的 innerHTML，然后查找 YouTube ID。使用此 ID，然后我将其放入完整的 url，以便用户可以保存链接并在以后播放视频，而无需在 YouTube 网站上再次查找该视频。（顺便说一句，当 UIWebView 中没有加载视频或加载了很多视频时，我有自己的 displayAlert 接收给定消息并将其显示给用户）这是代码：

```
-(IBAction)copyURLAction {
    if (webView) {
        NSString* htmlString = [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerHTML"];
        if (htmlString) {
            NSString *youTubeID = @"data-youtube-id=\"";
            int position = [htmlString rangeOfString:youTubeID].location + [youTubeID length];
            if (position > 1) {
                htmlString = [htmlString substringFromIndex:position];
                position = [htmlString rangeOfString:@"\""].location;
                htmlString = [htmlString substringToIndex:position];
                NSString* tempPrefix = @"http://m.youtube.com/watch?v=";
                NSString *youTubeString = [tempPrefix stringByAppendingString:htmlString];
                textFieldView.text = youTubeString;
            } else {
                [[SharedObjectsSingleton sharedInstance] displayAlert:@"Can't Copy URL" :@"Can only copy the URL when a single video is being displayed."];
            }
        } else {
            [[SharedObjectsSingleton sharedInstance] displayAlert:@"Can't get URL" :@"Nothing to copy."];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T08:33:22.627

上面的代码曾经可以工作，但我认为 youtube 已经更改了脚本，所以现在为了让它工作，你需要替换 `@"data-youtube-id=\""`为`@"i.ytimg.com/vi/"`

# sql - 如何使用引用表中的外键返回重复次数最多的值

> ID：13277875
> 
> 赞同：1
> 
> 时间：2012-11-07T20:43:23.100
> 
> 标签：sql, oracle11g

我需要创建一个 SQL 查询来从名为`JOBS`.

但要这样做，我需要使用一个名为`EMPLOYEES`该表的表，该表具有该表的外键`JOBS`。条件是从表 JOBS 中返回 job_title，它的 job_id 在`EMPLOYEES`表中重复了更多次。

我需要用一条 SQL 语句来完成。

期望的输出：

```
Stock Clerk 
```

这是我的查询

```
SELECT job_id  
FROM (SELECT job_id FROM employees GROUP BY job_id ORDER BY COUNT(*) desc)  
WHERE ROWNUM <= 1; 
```

但还不够好，因为它`job_title`来自`EMPLOYEES`我所需要的。

你知道我该怎么做吗？我正在使用 Oracle 11g 数据库

这就是我的表格的样子：

**雇员**

![雇员](../Images/8467052cf2ecc219b6bf60e370d8a2b6.png)

**工作**

![工作](../Images/d4161740229ca06dd1599ee7538e9a80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:46:35.307

```
SELECT job_title from JOBS where JOB_ID = (
SELECT job_id FROM employees GROUP BY job_id ORDER BY COUNT(*) desc LIMIT 1) 
```

如果您可以在 oracle 中使用 LIMIT 1，请不要立即记住，但如果不是那么

```
SELECT job_title from JOBS where JOB_ID = (
SELECT job_id FROM employees GROUP BY job_id ORDER BY COUNT(*) desc where ROWNUM=1) 
```

另请注意，如果前 2 个以上的作业 id 相等，它只会打印其中一个（即如果 SA_REP 和 ST_CLERK 都出现 4 次，则只会显示其中一个）目前尚不清楚您对此的要求是什么，但是以上查询只会返回其中一个

# forms - 表单填充粘贴然后选项卡重复

> ID：13277878
> 
> 赞同：2
> 
> 时间：2012-11-07T20:43:46.567
> 
> 标签：forms, tabs, applescript, copy-paste

我正在尝试使用 applescript 编写一些数据输入的脚本。

我需要它粘贴，然后 Tab 七次，然后再次粘贴..... 2700 次。

虽然我对编程很陌生，但我至少能够得到一些工作。

到目前为止我所拥有的：

```
set the clipboard to "blah"
tell application "blah"
    activate
    tell application "System Events"
        repeat 4 times
            keystroke "v" using {command down}
            keystroke "                         "
        end repeat
    end tell
end tell 
```

现在这将粘贴到第一个表单中，然后跳过一个并粘贴到下一个表单中。我不知道为什么。所以这只是粘贴到其他所有形式中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:15:38.030

尝试：

```
set the clipboard to "blah"
tell application "blah"
    activate
    tell application "System Events"
        repeat 4 times
            keystroke "v" using {command down}
            delay 1
            repeat 7 times
                keystroke tab
                delay 1
            end repeat
        end repeat
    end tell
end tell 
```

# ios - UITableView 和 indexPathsForSelectedRows

> ID：13277882
> 
> 赞同：3
> 
> 时间：2012-11-07T20:44:01.223
> 
> 标签：ios, uitableview

我有一个`allowsMultipleSelection`在情节提要中设置为 YES 的 tableView。

**编辑**

我错了一件事……`[tableView indexPathsForSelectedRows]`在`didSelectRowAtIndexPath`.

但是，在我重新加载表格后它不起作用，`cellForRowAtIndexPath`因此它将检查要应用的附件（复选标记与否）。

在最初的问题中，我试图手动选择行......显然这是由 tableView 本身处理的......但是在某个地方它会自动取消选择我的行，因为我从不调用`deselectRowAtIndexPath`它......

**原始问题：**

出于某种原因，当我将单元格设置为选中时，它不会改变。

```
- (void)tableView:(UITableView *)tableView 
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    //cell does not update selected property to YES after this next line
    cell.selected = YES;

    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  
               withRowAnimation:UITableViewRowAnimationFade];
} 
```

我想我可以自己跟踪选定的索引路径......但我可以发誓我使用了`indexPathsForSelectedRows`以前成功的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:46:08.317

不能`selected`直接设置属性

所以而不是

```
cell.selected = YES; 
```

利用

```
[tableView selectRowAtIndexPath:TheIndexPAth animated:YES scrollPosition:UITableViewScrollPositionBottom]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:48:15.897

尝试`[cell setSelected:YES animated:YES]`

我很确定`cell.selected`是只读的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T00:39:43.890

请在 pastbean 中发布该课程的所有代码并将您的链接放在这里我们需要更多信息，

并尝试：

//在你的界面中

```
 @interface YourClass (){
 NSInteger _selectedIndex;
 } 
```

// cellForRowAtIndexPath: 方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  
 *)indexPath
 {
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

// didSelectRowAtIndexPath: 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedIndex = indexPath.row;
[self.tableView reloadData]; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T16:54:57.973

自从问题改变以来有点不公平，但是..对我来说..答案是不要使用

```
indexPathsForSelectedRows 
```

或者不打电话

```
reloadTable 
```

在你的 tableView 上。

我选择了后者，我在里面装饰了附件，`didSelectRow`而`didDeselectRow`不是在重新加载时进行，只是从不重新加载桌子。

如果有人可以提出涉及上述两者的解决方案，我将选择该答案。

# c++ - CDialogEx 中的 CMFCRibbonBar

> ID：13277892
> 
> 赞同：0
> 
> 时间：2012-11-07T20:44:45.500
> 
> 标签：c++, mfc, dialog, ribbon

在我的 CDialogEx 类中，我试图插入一个 CMFCRibbonBar，但我得到一个 NULL 指针异常（我的 try/catch 块没有捕获到）：

```
BOOL CmfcRibbonTestDlg::OnInitDialog()
{
    CDialogEx::OnInitDialog();

    // Set the icon for this dialog.  The framework does this automatically
    //  when the application's main window is not a dialog
    SetIcon(m_hIcon, TRUE);         // Set big icon
    SetIcon(m_hIcon, FALSE);        // Set small icon

    // TODO: Add extra initialization here
    try
    {
        m_wndRibbonBar.Create(this);
        m_wndRibbonBar.LoadFromResource(IDR_RIBBON1);
    }
    catch( std::exception& exc )
    {
        this->MessageBoxA(exc.what(), "Couldn't create ribbon");
    }

    return TRUE;  // return TRUE  unless you set the focus to a control
} 
```

确切的异常说：“mfcRibbonTest.exe 中 0x00d191db 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000”并在 afxribbonbar.cpp:964 中中断。

我进行了多次搜索以查看 CMFCRibbonBar 是否可以放置在对话框中，但我的搜索没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:29:08.580

如果您查看 afxribbonbar.cpp，第 964 行，您将看到：

```
LRESULT CMFCRibbonBar::OnPostRecalcLayout(WPARAM,LPARAM)
{
    GetParentFrame()->RecalcLayout();
    return 0;
} 
```

这应该会提示您问题所在：GetParentFrame() 返回 NULL。通过查看[http://msdn.microsoft.com/en-us/library/6f45sskz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6f45sskz(v=vs.100).aspx)上的文档，我们看到：“成员函数向上搜索父链*，直到 CFrameWnd（或派生类）对象被发现*。”

在您的情况下，没有任何 CFrameWnd，所以这就是问题所在。底线是功能区栏并非设计用于添加到对话框中。这并不意味着它*不可能*做到，但至少这将是一个涉及的过程。

# qt - QT：尝试获取网页源代码时无法解析的外部符号

> ID：13277903
> 
> 赞同：2
> 
> 时间：2012-11-07T20:45:20.087
> 
> 标签：qt, webpage, symbols, unresolved-external

我开始使用 Qt 进行开发，并且正在尝试获取网页源代码。这是我所拥有的：

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <QString>
#include <QNetworkRequest>
#include <QNetworkReply>
#include <QNetworkAccessManager>
#include <QUrl>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

/**/

class GetHTMLSource : public QObject
{
Q_OBJECT

public:
    GetHTMLSource();
    void GetSource();

public slots:
    void GetDone(QNetworkReply*);

private:
    QNetworkAccessManager* NetManager;
};

GetHTMLSource::GetHTMLSource()
{
    NetManager = new QNetworkAccessManager(this);

    connect(NetManager, SIGNAL(finished(QNetworkReply*)),
         this, SLOT(GetDone(QNetworkReply*)));

}

void GetHTMLSource::GetSource()
{
    NetManager->get(QNetworkRequest(QUrl("http://stackoverflow.com")));
}

void GetHTMLSource::GetDone(QNetworkReply* ReplyIn)
{

    QByteArray DataIn=ReplyIn->readAll();
    QString DataString(DataIn);

    //process str any way you like!

}

/**/

void MainWindow::on_pushButton_clicked()
{
    GetHTMLSource Test;
    Test.GetSource();
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_pushButton_clicked();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

.pro

```
QT       += core gui

TARGET = TestGetPageSource
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

QT += network 
```

错误是：

> mainwindow.obj:-1: error:LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall GetHTMLSource::metaObject(void)const" (?metaObject@GetHTMLSource@@UBEPBUQMetaObject@@XZ)
> 
> mainwindow.obj:-1: 错误:LNK2001: 无法解析的外部符号“public: virtual void * __thiscall GetHTMLSource::qt_metacast(char const *)” (?qt_metacast@GetHTMLSource@@UAEPAXPBD@Z)
> 
> mainwindow.obj:-1: error:LNK2001: unresolved external symbol "public: virtual int __thiscall GetHTMLSource::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@GetHTMLSource@@UAEHW4Call@QMetaObject@@ HPAPAX@Z)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:50:30.340

通常，如果您创建派生类，`QObject`则必须将它们放在单独的头文件和源文件中。

所以一个 .h 和一个 .cpp 文件用于一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:06:52.017

我自己修好了。当然，这是我愚蠢的错误。

在类定义中：

```
public slots:
    void GetDone(QNetworkReply*); 
```

与实际功能不匹配：

```
void GetHTMLSource::GetDone(QNetworkReply* ReplyIn)
{ ... } 
```

但是，将其移至单独的 .h 和 .cpp 文件可能会有所帮助。

# c# - 在 if 语句中使用 ConcurrentDictionary TryGetValue 是否会使 if 内容成为线程安全的？

> ID：13277908
> 
> 赞同：7
> 
> 时间：2012-11-07T20:45:28.947
> 
> 标签：c#, concurrency

如果我有一个 ConcurrentDictionary 并在 if 语句中使用 TryGetValue，这是否会使 if 语句的内容线程安全？还是必须在 if 语句中锁定？

例子：

```
 ConcurrentDictionary<Guid, Client> m_Clients;

        Client client;
        //Does this if make the contents within it thread-safe? 
        if (m_Clients.TryGetValue(clientGUID, out client))
        {
            //Users is a list.
            client.Users.Add(item);
        } 
```

还是我必须这样做：

```
 ConcurrentDictionary<Guid, Client> m_Clients;

        Client client;
        //Does this if make the contents within it thread-safe? 
        if (m_Clients.TryGetValue(clientGUID, out client))
        {
            lock (client)
            {
                //Users is a list.
                client.Users.Add(item);
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:49:31.763

是的，您必须锁定在 if 语句中，从并发字典中获得的唯一保证是它的方法是线程保存的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-22T23:01:50.217

接受的答案可能会产生误导，具体取决于您的观点和您试图实现的线程安全范围。这个答案是针对那些在学习线程和并发时偶然发现这个问题的人：

确实，锁定字典检索的输出（客户端对象）使*某些*代码线程安全，但*只有在锁定中访问检索对象的代码。*在该示例中，另一个线程可能会在当前线程检索到该对象*后*从字典*中删除该对象。*（即使在检索和锁定之间没有语句，其他线程仍然可以在两者之间执行。）然后，此代码会将 Client 对象添加到 Users 列表中，即使它不再在并发字典中。这可能会导致异常、同步或竞争条件。

 *这取决于程序的其余部分在做什么。但是在我描述的场景中，将锁放在整个字典检索周围会更安全。然后一个普通的字典可能比并发字典更快更简单，只要你在使用它时总是锁定它！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-13T20:17:31.943

虽然目前的两个答案在技术上都是正确的，但我认为它们可能会产生一些误导，并且它们并没有表达 ConcurrentDictionary 的强大优势。也许 OP 解决锁问题的原始方法在特定情况下有效，但这个答案更普遍地针对第一次学习 ConcurrentDictionary 的人。

并发字典的设计使您不必*使用*锁。它有几种特殊的方法，围绕着这样的想法设计的，即当您当前正在处理字典中的对象时，一些其他线程可以修改字典中的对象。举个简单的例子，TryUpdate 方法可以让您检查一个键的值是否在您获得它和您尝试更新它的那一刻之间发生了变化。如果您获得的值与当前在 ConcurrentDictionary 中的值匹配，您可以更新它并且 TryUpdate 返回 true。如果不是，TryUpdate 将返回 false。[TryUpdate 方法](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.tryupdate?view=net-5.0)的文档可能会使这有点混乱，因为它没有明确说明为什么存在比较值，但这就是比较值背后的想法。如果您想对添加或更新进行更多控制，则可以使用[AddOrUpdate 方法](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.addorupdate?view=net-5.0)的重载之一来为键添加值（如果在您尝试添加它时它不存在）如果其他线程已经为指定的键添加了值，则更新该值。您尝试做的任何事情的上下文将决定使用适当的方法。关键是，与其锁定，不如尝试查看 ConcurrentDictionary 提供的特殊方法，并更喜欢那些尝试提出自己的锁定解决方案的方法。

对于 OP 的原始问题，我建议不要这样：

```
 ConcurrentDictionary<Guid, Client> m_Clients;

    Client client;
    //Does this if make the contents within it thread-safe? 
    if (m_Clients.TryGetValue(clientGUID, out client))
    {
        //Users is a list.
        client.Users.Add(item);
    } 
```

可以尝试以下方法*：

```
 ConcurrentDictionary<Guid, Client> m_Clients;

    Client originalClient;
    if(m_Clients.TryGetValue(clientGUID, out originalClient)
    {
        //The Client object will need to implement IEquatable if more
        //than an object instance comparison needs to be done.  This
        //sample code assumes that Client implements IEquatable.

        //If copying a Client is not trivial, you'll probably want to
        //also implement a simple type of copy in a method of the Client
        //object.  This sample code assumes that the Client object has
        //a ShallowCopy method to do this copy for simplicity's sake.
        Client modifiedClient = originalClient.ShallowCopy();

        //Make whatever modifications to modifiedClient that need to get
        //made...
        modifiedClient.Users.Add(item);

        //Now update the value in the ConcurrentDictionary
        if(!m_Clients.TryUpdate(clientGuid, modifiedClient, originalClient))
        {
            //Do something if the Client object was updated in between
            //when it was retrieved and when the code here tries to
            //modify it.
        }
    } 
```

*请注意，在上面的示例中，我使用 TryUpate 是为了便于演示该概念。在实践中，如果您需要确保在对象不存在时添加对象或在对象存在时更新对象，则 AddOrUpdate 方法将是理想的选择，因为该方法处理检查添加与更新所需的所有循环和采取适当的行动。

一开始可能看起来有点困难，因为可能需要实现 IEquatable ，并且根据需要复制 Client 实例的方式，某种复制功能，但从长远来看，如果你正在使用它，它会得到回报ConcurrentDictionary 和其中的对象以任何严肃的方式。*

# php - Onclick 返回确认在 Jquery Mobile 中不起作用？

> ID：13277910
> 
> 赞同：1
> 
> 时间：2012-11-07T20:45:40.720
> 
> 标签：php, javascript, jquery, html, jquery-mobile

我正在使用简单的 javascript 确认代码：

```
function test_confirm (str)
{
    str = (str == '0')? 'Are you sure?' : str

    return (confirm(str))? true : false
} 
```

`<a href="http://example.com" onclick="return test_confirm(0)">Test</a>`

这通常有效，除非我使用 Jquery Mobile`OK`和`Cancel`按钮都进入 URL。预期的行为是`Cancel`按钮不应进入 URL。

即，我通过在 html 中添加以下内容来使用 Jquery Mobile `head`：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

`confirm()`为了让 javascript函数在 Jquery Mobile 中工作，我应该注意什么？

* * *

**菲尔·帕福德的更新：**

它确实适用于纯 HTML，但这实际上是我正在做的，并且在使用 PHP 重定向到同一页面后它不起作用`header('location:')`：

该页面`list`包含：

`<a href="list/delete/1" class="customClick" data-str="0">Delete 1</a>`

`<a href="list/delete/2" class="customClick" data-str="0">Delete 2</a>`

该`list/delete`操作包含如下内容：

```
$rest->delete($id);
header('location: http://example.com/list'); 
```

正如您在单击 URL 后所看到的`list/delete/1`，删除过程将继续进行，然后重定向回`list`页面。这就是它开始不起作用的地方。

一旦重定向发生，确认对话框就不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:04:56.420

这样的事情对你有用吗？

*   [http://jsfiddle.net/8CDc5/1/](http://jsfiddle.net/8CDc5/1/)

JS

```
$('.customClick').on('click', function() {
    var str = $(this).attr('data-str');
    str = (str == '0')? 'Are you sure?' : str;

    return (confirm(str))? true : false;
}); 
```

HTML

```
<a href="http://jsfiddle.net/8CDc5/" class="customClick" data-str="0">Test</a>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:48:51.673

我有同样的问题，看起来像“return false;” 并没有停止传播，并且无论如何都遵循了链接。通过在返回 false 之前显式停止传播来解决它。

```
function test_confirm (e, str)
{
    str = (str == '0')? 'Are you sure?' : str

    if (!confirm(str)) {            
        e.stopPropagation();
        return false;
    }
    return true;
}

<a href="http://example.com" onclick="var e=arguments[0] || window.event; return test_confirm(e,0)">Test</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T06:17:16.640

添加这个属性

> 数据-ajax="假"

```
<a data-ajax="false" href="http://example.com" onclick="return test_confirm(0)">Test</a> 
```

# regex - 正则表达式：用前缀捕获替换字符串，除了给定的前缀

> ID：13277918
> 
> 赞同：2
> 
> 时间：2012-11-07T20:46:02.673
> 
> 标签：regex, regex-negation

我想替换一个字符串，保留前缀，除非它包含特定的前缀。

例如，任何类似的字符串都`"(*)-bar"`必须替换为`"(*)-blah"`except when `"(*)"`matches `"baz"`：

```
foo-bar => should return foo-blah 
baz-bar => should remain baz-bar 
```

到目前为止，我最好的方法是在替换时修剪前缀的最后一个字母：

```
echo "foo-bar" | sed s/"[^(baz)]-bar"/$1-blah/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:00:42.283

使用*负面回顾*：

```
s/(?<!baz)-bar/-blah/ 
```

大多数`sed`实现都没有这种高级的正则表达式功能，但它应该可以在更现代的语言中工作，例如 perl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:03:21.883

使用 sed ：

```
$ echo "foo-bar" | sed '/^foo-baz/!s/^foo-.*$/foo-blah/'
foo-blah
$ echo "foo-baz" | sed '/^foo-baz/!s/^foo-.*$/foo-blah/'
foo-baz 
```

如果我分解：

```
echo "foo-baz" | sed '/^foo-baz/!s/^foo-.*$/foo-blah/'
                      |        |||                   |
                      +  regex +|+ substitution part +
                                |
                              negation of regex 
```

# textbox - 检查文本框是否具有相同的内容

> ID：13277921
> 
> 赞同：2
> 
> 时间：2012-11-07T20:46:14.123
> 
> 标签：textbox, google-apps-script, iteration

我想检查是否像这样创建的文本框：

```
(function(arr) {
    for (var i = 0; i < arr.length; i++) {
        app.add(app.createLabel(arr[i] + " mail"));
        app.add(app.createTextBox().setName(arr[i]));
    }
})(["first", "second", "third"]); 
```

有相同的内容吗？我一直在寻找 getElementByTagname 或 getTextboxes 之类的东西，但没有这样的功能。

那么如何遍历它们并在它们都相等时显示标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:13:00.243

创建文本框时，为每个文本框分配一个 id，使用[`setId(id)`](https://developers.google.com/apps-script/class_textbox#setId). 当您想稍后获得他们的参考时，您可以使用[`getElementById(id)`](https://developers.google.com/apps-script/class_uiinstance#getElementById).

这是一个例子：

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.createTextBox().setId("tb1").setText("the original text"));
  app.add(app.createButton().setText("Change textbox").addClickHandler(app.createServerHandler("myHandler")));
  return app;
}

function myHandler() {
  var app = UiApp.getActiveApplication();
  app.getElementById("tb1").setText("new text: in handler");
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:03:44.207

要访问任何小部件值，您需要将它们作为回调元素（或父面板）添加到将处理它们的服务器处理程序。每个小部件的值都填充在传递给处理函数的参数上，并且可以由小部件`name`（您已经设置）引用。

您不需要`setId`按照另一个答案的建议。除非你想对小部件本身（而不是它的价值）做一些事情。例如更改其文本或隐藏它等。

```
var textBoxes = ["first", "second", "third"];

function example() {
  var app = UiApp.createApplication().setTitle('Test');
  var panel = app.createVerticalPanel();
  textBoxes.forEach(function(name){
    panel.add(app.createLabel(name + " mail"));
    panel.add(app.createTextBox().setName(name));
  });
  panel.add(app.createLabel('Example Label').setId('label').setVisible(false));

  var handler = app.createServerHandler('btnHandler').addCallbackElement(panel);
  panel.add(app.createButton('Click').addClickHandler(handler));

  SpreadsheetApp.getActive().show(app.add(panel));
}

function btnHandler(e) {
  var app = UiApp.getActiveApplication(),
      allEqual = true;
  for( var i = 1; i < textBoxes.length; ++i )
    if( e.parameter[textBoxes[i-1]] !== e.parameter[textBoxes[i]] ) {
      allEqual = false; break;
    }
  app.getElementById('label').setVisible(allEqual);
  return app;
} 
```

请注意，`ServerHandlers`不要立即运行，因此单击按钮后可能需要几秒钟才能显示或隐藏标签。

# javascript - 带有确认的jquery检查字段

> ID：13277923
> 
> 赞同：0
> 
> 时间：2012-11-07T20:46:30.970
> 
> 标签：javascript, jquery

这是我的片段 jquery 代码。实际上，我会检查提交表单上的字段是否为空，然后如果用户名存在则显示确认对话框。

```
<script type="text/javascript">
jQuery(function(){ 

    $("#form").submit(function(){
        var isFormValid = true;
        if ($.trim($("#telephone").val()).length == 0){
            isFormValid = false;
        alert("Empty telephone!");
        }
    elseif(check_field() == 1){
            if(confirm('Delete?')){
        isFormValid = true;
    }else{
        isFormValid = false;
    }
        return isFormValid;
}); 

function check_field(){  
    var field = $('#field').val();  
    $.post("check_field.php", { field: field }, function(result){ 
        //if the result is 1  
        if(result == 1){  
            return 1;  
        }else{   
            return 0;  

        }  
    });
} 

 }); 
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:49:40.030

一个经典的错误，你需要在 ajax 函数中进行回调，因为当函数已经执行时，ajax post 还没有发出：

```
function check_field(callback){  
    var field = $('#field').val();  
    $.post("check_field.php", { field: field }, function(result){ 
        //if the result is true
        callback(result == 1);
    });
} 
```

然后是这样的：

```
$("#form").submit(function(e){
    e.preventDefault() // prevent the form from submitting... yet
    var $form = $(this);
    check_field(function(result) {
        if(result && confirm('Delete?')) { 
            $form.submit(); // now submit it
         }
    });
}); 
```

欢迎来到异步编程的世界！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:52:02.720

您的`$.post`调用是异步的 - 因此内部 return 语句实际上根本不会从`check_field`函数内部返回。一旦服务器响应，内部函数就会被调用。

本质上，原始`check_field`函数发出 POST 请求，然后继续执行，无需等待服务器响应，将控制流返回给原始提交处理程序。

相反，您需要做的是等待来自 POST 的异步响应，然后在返回的验证成功时触发提交。

一个非常简单的实现可能如下所示：

```
jQuery(function(){ 

    $("#form").on('submit', function(ev){
        ev.preventDefault();

        var $form = $(this),
            field = $('#field').val();

        $.post("check_field.php", { field: field }, function(result){
            if (result==1 && confirm('Delete?'))
                $form.off().submit();
        });
    });
}); 
```

**注意**：我更新了代码 - 它现在在`submit`事件上触发，因此它适用于单击提交按钮和使用`enter`密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:49:07.043

您应该关心数据类型。1 不等于“1”或“1”。是吗？！用于`"typeof"`找出值的数据类型。同样，仅通过返回值您无法继续该过程。这是一个异步调用。你应该读一下。

干杯

# java - 如何从字符串中提取单词？

> ID：13277933
> 
> 赞同：1
> 
> 时间：2012-11-07T20:47:22.367
> 
> 标签：java, regex, string, url, extract

假设我有一个字符串： String message = "you should try [http://google.com/](http://google.com/) ";

现在，我想将“http://google.com/”发送到一个新的字符串 url

我想要做的是：检查字符串中的“单词”是否以“http://”开头并提取该单词，其中单词是被空格包围的东西（单词的一般英语定义）。

我不知道如何提取字符串，我能做的最好的就是在字符串上使用startsWith。如何在单词上使用 startsWith 并提取单词？抱歉，如果这有点难以解释。提前致谢！

编辑：另外，我应该怎么做才能从 REGEX 操作中提取单词？如果字符串中有超过 1 个 url，我应该如何处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:52:10.837

使用模式和匹配器类。

```
String str = "blabla http://www.mywebsite.com blabla";
String regex = "((https?:\\/\\/)?(www.)?(([a-zA-Z0-9-]){2,}\\.){1,4}([a-zA-Z]){2,6}(\\/([a-zA-Z-_/.0-9#:+?%=&;,]*)?)?)";
Matcher m = Pattern.compile(regex).matcher(str);
if (m.find()) {
    String url = m.group(); //value "http://www.mywebsite.com"
} 
```

此正则表达式适用于`http://...`，`https://...`甚至`www...`URL。其他的正则表达式可以很容易地在网上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:03:08.023

你可以试试这个：

```
String str = "blabla http://www.mywebsite.com blabla";
Matcher m = Pattern.compile("(http://.*)").matcher(str);
if (m.find()) {
    String url = (new StringTokenizer(m.group(), " ")).nextToken();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T21:05:19.497

执行此任务的“正确”方法是用空格分割字符串——String#split("\s")——然后将其通过管道传递给 URL 构造函数。如果字符串以您的前缀开头并且抛出[MalformedURLException](http://docs.oracle.com/javase/6/docs/api/java/net/MalformedURLException.html)则无效。URL 类构造函数比您或我想出的任何解决方案都经过了更好的测试和更健壮。所以，请使用它，不要重新发明轮子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T21:07:48.913

您可以为此使用 Java 正则表达式：以下正则表达式捕获以*http://*或*https://*开头的任何字符串，直到下一个空格字符：

```
Pattern urlPattern = Pattern.compile("(http(s)?://[.^[\\S]]*)");
Matcher matcher = compile.matcher(myString);
if (matcher.find()) {
    String url = matcher.group();
} 
```

# javascript - 无法从选择的选项中检索值

> ID：13277934
> 
> 赞同：0
> 
> 时间：2012-11-07T20:47:27.757
> 
> 标签：javascript, html

每当我尝试从下拉列表中更改值时，它都会重定向到其他 URL。

无论如何，我只是有一点问题..

当我尝试更改价值时，我没有获得品牌价值，它向我显示：'未定义'

任何想法？

```
 <select id="brand" onchange="gotoPage()">

        <?php 
          $brands = dfr_get_brands_list($category);
        foreach ($brands as $brand) : ?>

               <option><?php echo $brand; ?></option>

        <?php endforeach; ?>

        </select>

        <?php if (@$_GET['brand']) { ?>

         <a href="[server.url type='fullpage' query='-brand']"><FONT COLOR="red"><?php echo"[[X] Remove Brand "; ?><?php echo @$_GET['brand']; ?></font></a>

        <?php } ?>

        <script>

          function gotoPage(){
            var url = "http://laptopsisland.com/shop/c/laptops/";
            var sel = document.getElementById("brand");
            var brand = sel.options[sel.selectedIndex].text;

            alert(brand);

            window.location.href = url + "&brand=" + brand;
        }

          </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:03:10.770

我会机会你的选择来展示这样的东西

```
<option value="<?php echo $brand; ?>"><?php echo $brand; ?></option> 
```

然后得到 Bokonic 提到的选定值

```
sel.options[sel.selectedIndex].value 
```

让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:18:05.260

您无需更改生成代码。

您也不需要使用 getElementById。

```
<script>
function gotoPage(e) {
    var brand = e.options[e.selectedIndex].text;
    alert(brand);
}
</script>
<select id="brand" onchange="gotoPage(this)">
    <option>aaa</option>
    <option>bbb</option>
</select> 
```

工作解决方案：http: [//jsfiddle.net/2YzAV/2/](http://jsfiddle.net/2YzAV/2/)

带有值的版本：http: [//jsfiddle.net/2YzAV/3/](http://jsfiddle.net/2YzAV/3/)

# ios - iOS 继承一个带有协议的类

> ID：13277935
> 
> 赞同：-2
> 
> 时间：2012-11-07T20:47:31.587
> 
> 标签：ios, delegates, protocols

所以我有一个名为“DrawOnImageViewController”的类，它做了一些非常明显的事情。在它的头文件中，我还有一个使用单一方法定义的协议“DrawOnImageDelegate”：“imageWithDrawingSelected:(UIImage *)image”。这个类显然也有一个符合该协议的“委托”属性。

现在我需要对这个类进行子类化，这样我就可以简单地在 viewWillDisappear 中的委托上调用该委托方法。我对上面的类进行了子类化，然后像这样覆盖 viewWillDisappear：

```
-(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.delegate imageWithDrawingSelected:self.imageView.image];
} 
```

此方法 (viewWillDisappear) 执行，但我的委托的委托方法从未被调用。我尝试调用：[super.delegate imageWithDrawingSelected:super.imageView.image];

但这也不起作用......

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:05:25.467

这是最明显和最常见的疏忽。我未能设置委托属性。我会羞愧地低下头...

它呈现在一个弹出框控制器中，为其设置了委托，但不是内容视图控制器......

# ruby-on-rails - Rails 连接查询

> ID：13277938
> 
> 赞同：2
> 
> 时间：2012-11-07T20:48:03.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我有三个模型

*   `Tag`=> `:id`,`:name`
*   `Tagging`=> `:id`, `:tag_id`,`:post_id`
*   `Post`=> `:id`,`:summary`

我知道标签的ID。我想`tag_id`通过`Taggings`模型查询所有具有特定 , 的帖子。

就像是

```
@post = Post.joins(:taggings).where(:tag_id => 17) 
```

但这不起作用，因为它正在寻找模型中的 tag_id`Post`而不是`Tagging`模型。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-15T00:46:20.983

我不喜欢在 ActiveRecord 查询中使用字符串，所以，我更喜欢这个 sintax：

```
@post = Post.joins(:taggings).where(taggings: {tag_id: 17}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T21:20:07.763

首先 ：

```
 class Post < ActiveRecord::Base

   has_many :taggings
   has_many :tags, :through => :taggings 
 end

 class Taggins < ActiveRecord::Base 
   belongs_to :post 
   belongs_to :tag
 end

 class Tag < ActiveRecord::Base 
   has_many :taggings 
   has_many :posts, :through => :taggings 
 end 
```

如果你有标签对象，你可以做

```
 @posts = @tag.posts 
```

或者

```
 class Post < .... 
   ....
   def self.find_by_tag_id(tag_id)
      Post.joins(:taggings).where('taggings.tag_id = ?', tag_id)
   end
 end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T21:14:26.503

使用 .where 格式，您可以传递类似 .where("taggings.tag_id = ?", 17) 的字符串来限定连接的标记表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T21:11:51.163

正如@tharrison 提到的。一个解决方案是：

```
@post = Post.joins(:taggings).where("taggings.tag_id = ?", 17) 
```

# tridion - 我们什么时候明确设置 CME 权限给定 OrganizationalItemData 属性？

> ID：13277945
> 
> 赞同：6
> 
> 时间：2012-11-07T20:48:20.883
> 
> 标签：tridion

我正在使用核心服务为 OrganizationalItemData 对象创建权限设置列表，并正在寻求帮助确认何时在 CME 中明确设置权限。

## 问题

给定一个组织项目并知道它的共享、本地化和权限继承设置，我们什么时候需要显式设置它的权限（在 CME 中`Properties`>下`Security`）？

## API 详细信息

鉴于`OrganizationalItemData orgItem`我可以检查以下内容（包含文档中的详细信息）。

*   `IsShared`
    获取或设置项目是否在当前上下文发布中共享。

*   `IsLocalized`
    获取或设置项目是否在当前上下文发布中本地化。

*   `IsPermissionsInheritanceRoot`
    如果为项目本身指定了权限，则为 true；否则，如果项目从父项目继承权限，则为 false。

## 示例代码

我可以使用核心服务检查给定 CMS 中的权限设置。例如：

```
var CreatedHere = !orgItem.BluePrintInfo.IsShared.GetValueOrDefault();
var IsLocalized = orgItem.BluePrintInfo.IsLocalized.GetValueOrDefault();
var PermissionsFromParent = !orgItem.IsPermissionsInheritanceRoot.GetValueOrDefault(); 
```

我想输出给定组织项目的权限，还想输出 CMS 管理员何时实际需要在其发布中设置属性的说明。例如，我可以针对 CMS Test 使用脚本来显示 CMS Production 可能需要的内容。

## 场景

这是它的真相（我认为）。

```
Shared  Local(ized)  PermissionsRoot  Set here?
No      No           No               No, set in parent in this Publication.
No      No           Yes              Yes, set in this "local" item.
No      Yes          No               Not possible. Can't localize non-shared item. 
No      Yes          Yes              Not possible. Can't localize non-shared item. 
Yes     No           No               No, set in parent item in higher Publication. 
Yes     No           Yes              No, set in this item but in a higher publication. 
Yes     Yes          No               No, set in parent item in this Publication. 
Yes     Yes          Yes              Yes 
```

我对这些选项的理解可能是错误的，但到目前为止，我们似乎只需要为两种情况显式设置权限：

1.  对于作为权限根的非共享（本地）项目（`Inherit Security Settings from Parent`未选中）
2.  对于作为权限根的共享*本地化*项目。

我是否有正确的场景和/或我在上面的 2^3 场景中遗漏了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:29:19.040

我认为你有正确的阿尔文。

首先，您唯一可以拥有权限的地方是继承根。其次，适用正常的蓝图规则。

我曾经将其绘制为带有锯齿形箭头的图表，显示了对权限的搜索：

（想象一下你是一个试图找出东西的文件夹）

1.  我是本地继承根吗？不 - 继续寻找
2.  好的 - 所以 BluePrinting 适用，所以也许我是一个共享文件夹并且我是通过 bluePrinting 的继承根？没有？好的 - 继续寻找，
3.  那么树上我上方的那个文件夹呢？那里有权限吗？它是本地继承根吗？它是通过 BluePrinting 的继承根吗？不——继续寻找
4.  以此类推一直到顶部

所以看看你的表：任何“权限根”为假的东西，都不能拥有它自己的权限，所以正确地说，你对每一个都没有或不可能。对于作为继承根的组织项目，*下*一个问题是它们是本地化/本地化的还是共享的。再次，你似乎已经得到了正确的。

我只提到一个注意点，那就是“本地化”可能是您第二列的错误名称。我会说“本地”。如果项目未共享，则它是本地项目，这可能是因为它是从另一个出版物中的共享项目本地化的，或者因为它是在此出版物中本地创建的。我认为您意识到您采用的任何脚本或编程方法都需要适应这两种情况。

# html - Ô 在 Firefox 中显示为商标符号？

> ID：13277946
> 
> 赞同：2
> 
> 时间：2012-11-07T20:48:23.883
> 
> 标签：html, html-parsing, symbols, asciiencoding

```
<span style="font-family:Symbol; font-size:10pt; color:#000000">&#212;</span><span style="font-family:MS Sans Serif; font-size:10pt; color:#000000"> 
```

以上是一位开发人员创建的商标符号的 HTML 代码。不幸的是，他们使用此字符序列**Ô**为程序名称创建了商标符号。我的印象是这个字符序列很可能会产生这个字符：Ô。

但是，序列
- 在**Chrome**中正确显示为 TM。
- 在**Safari**中错误地显示为这个符号：Ô
- 在**Firefox**中错误地显示为这个符号：Ô

与其他浏览器相比，为什么此符号在 Google Chrome 中正确显示？我认为这与每个人如何解析不同的字符序列有关，但我只是对为什么 Chrome 会正确显示它并忽略通常的字符序列符号 Ô 感到困惑。

***问题：这是用于 HTML 页面中商标符号的最佳字符序列吗？还是使用了其他更常见的商标符号字符序列？***

谢谢！

**编辑：**在其中一个 HTML 页面的顶部找到 DOCTYPE，不确定它是否会有所不同。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:07:10.243

使用 HTML 实体`&trade;`（使用普通字体而不是 Symbol）。这映射到`&#8482;`，但命名实体得到[广泛支持](http://www.daandeschepper.nl/)。

[或者，按照此问题](https://stackoverflow.com/questions/436615/when-should-one-use-html-entities)的答案中的建议，对您的 HTML 使用 UTF-8 编码并直接嵌入符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T21:46:00.173

字符引用`&#212;`明确表示字符“Ô” U+00D4 带有 CIRCUMFLEX 的拉丁文大写字母 O。这不依赖于 doctype 声明或字符编码。因此，将其显示为其他内容的浏览器会出现错误行为。

使用 Symbol 字体是一个依赖浏览器错误的老技巧。Symbol 字体是一种杂乱无章的字体，其中字符已被各种符号以相当随意的方式替换。该字体包含商标符号的两种变体，代码位置 D4（十六进制）的衬线版本和代码位置 E4 的无衬线版本。（代码试图在明显的无衬线环境中使用衬线版本。）这是一个*非常*古老的技巧，早在 1990 年代 Alan Flavell 的[Using FONT FACE to extend repertoire 中就已经讨论和批评过了。](http://www.alanflavell.org.uk/charset/fontface-harmful.html)

有几种替代方法可以在网页上显示正确的字符 U+2122 TRADE MARK SIGN。不需要字体技巧，字符应该以与周围文本相同的字体呈现；如果你不做任何特别的事情，这会自动发生。

方法是：

1.  书写字符本身 (™)。例如，如果文档编码为 UTF-8 或 windows-1252，则可以使用像样的编辑器。
2.  使用十六进制字符引用`&#x2122;`或十进制字符引用`&#8482;`。它们独立于字符编码工作，但它们使 HTML 源代码有点神秘。
3.  使用实体引用`&trade;`。这更容易记忆，并且独立于字符编码工作。但理论上，它在 XHTML 中并不安全。

# ruby-on-rails-3 - Backbone.js 和 ActiveRecord

> ID：13277948
> 
> 赞同：0
> 
> 时间：2012-11-07T20:48:35.237
> 
> 标签：ruby-on-rails-3, jquery-ui, backbone.js

这是一个关于 Backbone.JS 和 ActiveRecord 的菜鸟问题。我将不胜感激有关如何调试它的指针。

我正在尝试使用 Backbone.Js 代码创建一个“Trainer”对象，该对象具有一个属性“name”（一个字符串）。该应用程序的前端是 Ruby on Rails。Trainer 表有一个数据迁移。

在培训师控制器中：

```
def create
  document = Trainer.create! params[:trainer]
  render :json => document
end 
```

现在，在 app/assets/javascripts/backbone/views/trainers/new_view.js 中：

```
Gym.Views.Trainers.NewView = Backbone.View.extend({
  el : 'div.trainer_form',
  template: JST['backbone/templates/trainers/new_template'],
  model : new window.Gym.Models.Trainer({}),
  initialize: function() {
  this.document = this.options.user;
  Backbone.Validation.bind(this, {
    invalid: function(view, attr, error) {
      $("form#new-trainer .errors ul").append("<li>" + error + "</li>")
    }
  });
  this.render();
},
render : function() {

  $(this.el).html(this.template({trainer:this.model.toJSON()}));
  return this
},
events : {
  "click input#submit_button" : 'create_trainer'
},

create_trainer : function(event) {
  event.preventDefault()
  params = $("form#new-trainer").formParams()
  params['user_id'] = Gym.currentUser.userId
  this.model.save(params, {success : function(model, response) {
    Gym.trainers.add(model)
    Objects.views.selectTrainer.render()

    Gym.current_trainer = model

    $("select#trainer_selector").val(Gym.current_trainer.get('id'))

    Objects.views.new_trainer.model = new Gym.Models.Trainer()
    Objects.views.new_trainer.render()

  }
  }); 
```

现在，我可以在 Rails 日志中看到我正在访问控制器：

```
Started POST "/trainers" ...
Processing by TrainersController#create as JSON
Parameters: {"name"=>"Lori Stevens", "user_id"=>1, "trainer"=>{}} 
```

但是，当它到达 SQL 时，我看到了：

```
[1m^[[36mSQL (0.4ms)^[[0m  ^[[1mINSERT INTO `trainers` (`created_at`, `name`, `updated_at`, `user_id`) VALUES ('2012-11-07 20:33:09', NULL, '2012-11-07 20:33:09', NULL)^[[0m 
```

参数“name”——来自模板，是 Trainer 对象的属性——没有进入数据库，即使在 JSON 中设置了参数“name”。

我很感激有关如何调试的指针 - 显然我不了解 Backbone.js 和 ActiveRecord 是如何连接的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:12:34.300

控制器从浏览器接收请求并将数据放入 ActiveRecord：

```
def create
  document = Trainer.create! params[:trainer]
  ...
end 
```

但是你在日志中看到请求，`params[:trainer]`等于空哈希`{}`

您可以更改它创建带有哈希的 json 的 javascript

```
{ 'trainer': {'name' : 'Lori stevens', ... }} 
```

我不知道这在骨干中有多容易。

或者您可以更改控制器，使其从哈希中获取值并为您的训练器模型构造一个新的哈希，如下所示：

```
gotten_name_from_json = params['name']
...
document = Trainer.create!(
   {:name => gotten_name_from_json, :town => gotten_twon_from_json}) 
```

我把它写得很详细是为了表明使用它你可以翻译任何 json 进来的东西，即使它来自你无法控制格式的第三方。

# php - 如何在php中生成在圆内弯曲的自适应文本？

> ID：13277949
> 
> 赞同：5
> 
> 时间：2012-11-07T20:48:34.567
> 
> 标签：php

我正在尝试创建一个带有圆圈和一些文本的图像，其中文本围绕圆圈内部弯曲。圆圈是自适应的，我希望它里面的文本是自适应的。

到目前为止，我有以下代码生成弯曲的文本：

```
 $row1="line1";
    $degrees = (130/strlen($row1));
    imageellipse ( $im , 250 , 250 , 390 , 390 , $black );
    imageellipse ( $im , 250 , 250 , 398 , 398 , $black );

    for ($i=0;$i<strlen($row1);$i++) 
    {
    $a = ($degrees*$i)+126-strlen($row1)/3;
    $cos = cos(deg2rad($a));
    $sin = sin(deg2rad($a));
    $x = 0;
    $y = 180;
    $xt = round($cos*($x) - $sin*($y));
    $yt = round($sin*($x) + $cos*($y));
    imagettftext($im,14,180-($a),250+$xt,270+$yt,$red,'fonts\times.TTF',$row1[$i]);
    } 
```

你能告诉我如何让它自适应，所以它可以适应生成的椭圆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:09:40.567

希望这可以帮助：

```
 $image = imagecreatetruecolor(400,400);
     $white = imagecolorallocate($image,255,255,255);

    imagefill($image,0,0,$white);

    $red     = imagecolorallocate($image,255,0,0);
    $degrees = (360/strlen($text));

        for($i=0;$i<strlen($text);$i++) 
        {
          $a = ($degrees*$i)+180;
          $cos = cos(deg2rad($a));
          $sin = sin(deg2rad($a));
          $x = 0;
          $y = 180;
          $xt = round($cos*($x) - $sin*($y));
          $yt = round($sin*($x) + $cos*($y));

          imagettftext($image,20,180-($a),200+$xt,200+$yt,$red,"C:/WINNT/Fonts
                       arial.ttf",$text[$i]);
        } 
```

# c - 如何获取操作系统提供的 dlopen()/dlsym() 地址

> ID：13277950
> 
> 赞同：5
> 
> 时间：2012-11-07T20:48:38.043
> 
> 标签：c, linux, hook, libc

我需要为 dlsym() 和 dlopen() 系统调用实现挂钩。为了从钩子中调用原始的 dlsym()，我需要获取这个系统调用的地址。我尝试在 so-library-constructor-function 中获取地址。但我只得到钩子函数的地址。我尝试将处理程序指定为 RTLD_DEFAULT 以及 RTLD_NEXT。使用 RTLD_DEFAULT 时，我得到 NULL。使用 RTLD_NEXT 时，我得到了钩子函数的地址。dlopen() 出于同样的原因我不能使用，因为我在 dlopen() 上有了钩子。

请告诉我，我怎样才能得到原始 dlopen() 和 dlsym() 函数的地址？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:37:40.383

[`__libc_dlsym()`](http://50hz.ws/docs/dlsymwrap.html)是`dlsym()`由 libc 提供的。`dlopen()`有自己的对应物`__libc_dlopen()`.

# c# - 消息框模式

> ID：13277952
> 
> 赞同：1
> 
> 时间：2012-11-07T20:48:40.230
> 
> 标签：c#, winforms, messagebox

我已经断断续续地工作了一段时间，但基本上我有一个我调用的类来显示消息框。

我试图让我的消息框成为模态的，如果您指定要模态的表单，这很容易完成。

所以我的表格是这样声明的

```
public partial class MainForm : Form 
```

它是这样实例化的

```
var mainForm = new MainForm(); 
```

所以我有一个类，其中包含打开这样的消息框的方法

```
MainForm.ActiveForm.Invoke(new MethodInvoker(delegate
{
    MessageBox.Show(MainForm.ActiveForm, message, title, buttons, icon);
})); 
```

这很好用，但只有当表单处于活动状态时，活动表单才有效.....

无论如何，有没有简单的方法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-12T12:28:04.603

这对我有用：

```
MessageBox.Show(Form.ActiveForm,"Finished processing", "Process finished", , MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

Form.ActiveForm 会为您提供当前活动的表单，即使您从任何其他类提升 MessageBox 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T21:00:06.293

我是一个 C# 新手，但 MessageBoxes 不是已经模态了吗？如果您正在制作自己的消息框，您就不能这样做`messageboxform.ShowDialog();`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T21:08:02.607

如果您只想避免使用第一个参数，那么[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx)有一些用于 Winforms 消息框的 Show 方法。

你可以试试这个：

```
public static DialogResult Show(
    string text,
    string caption,
    MessageBoxButtons buttons,
    MessageBoxIcon icon,
    MessageBoxDefaultButton defaultButton
 ) 
```

所以对你来说：

```
MessageBox.Show(message, title, buttons, icon); 
```

编辑：我相信这应该出现模态（没有第一个参数），因为它是从主窗体调用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T14:16:28.083

我有一个效果很好的解决方案，但我不确定是否有更优雅的解决方案。

所以在 MainForm.cs 我有

```
public static Form mainWindow { get; private set; } 
```

然后在 OnLoad 方法中

```
Focus();
BringToFront();
mainWindow = MainForm.ActiveForm; 
```

然后在我的消息框方法中：

```
MainForm.mainWindow.Invoke(new MethodInvoker(delegate
{
    MainForm.mainWindow.BringToFront();
    MessageBox.Show(MainForm.mainWindow, message, title, MessageBoxButtons.OK, icon);
})); 
```

我在这里错过了什么吗？是否有更好的替代 mainWindow = MainForm.ActiveForm？

# c# - 扫描二维码（电子名片）并将联系人保存在 windows phone 7 上

> ID：13277956
> 
> 赞同：3
> 
> 时间：2012-11-07T20:48:54.923
> 
> 标签：c#, windows-phone-7, qr-code, contacts, vcf-vcard

我正在开发一个应用程序，但在将 vcard 保存为联系人功能时遇到问题。以下是它的工作原理：

1.  扫描二维码（vCard Data v2.1 [http://www.printbusinesscards.com/marketing/qrcode/QR-Code-Quality-Standards-Test.php](http://www.printbusinesscards.com/marketing/qrcode/QR-Code-Quality-Standards-Test.php)测试用例 12.02）

2.  现在我将数据存储在一个字符串中，并将其传递给一个新页面：

    ```
    VERSION:2.1
    N:Standard;Joe;;;
    FN:Joe Standard12.02
    TEL:999-999-0001
    TEL;WORK:999-999-0002
    TEL;HOME:999-999-0003
    TEL;CELL:999-999-0004
    TEL;CELL;WORK:999-999-0005
    TEL;CELL,WORK:999-999-0006
    TEL;CELL;WORK;VOICE;MSG:999-999-0007
    TEL;CELL;WORK;VOICE;type=MSG:999-999-0008
    TEL;CELL;WORK;type=VOICE;type=MSG:999-999-0009
    END:VCARD)``` 
    ```

3.  现在我有问题了。我想将字符串（电子名片）保存为联系人。有没有快速的方法，或者我需要解析所有的字符串？

（实际上应该作为内置的 windows phone bing qr readear 工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:15:33.863

我刚刚解析了字符串......我发现了这个，但我没有理解如何使用，它似乎是错误的代码：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx#BKMK_SavingacontactfromaVCard](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx#BKMK_SavingacontactfromaVCard)

# c# - C#中的Unicode字符串

> ID：13277958
> 
> 赞同：1
> 
> 时间：2012-11-07T20:49:00.507
> 
> 标签：c#, unicode-string

我记得在 C++ 中使用 Unicode 字符串，例如：

```
std::wstring str = _T("a string here"); 
```

C# 中的等价物是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:51:41.410

C# 中的等价物是`String`类。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.string%28v=vs.95%29.aspx)：

> （字符串）将文本表示为一系列 Unicode 字符。
> 
> [...] 每个代码点都使用 UTF-16 编码进行编码

所以，如果你这样做`string str = "a string here";`，你就有一个 Unicode 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:56:46.573

使用[System.Text.UnicodeEncoding](http://msdn.microsoft.com/en-us/library/system.text.unicodeencoding.aspx)类。这处理 Unicode 字符的 UTF-16 编码。

# php - Mysql查询以显示两列之间的结果

> ID：13277959
> 
> 赞同：0
> 
> 时间：2012-11-07T20:49:01.507
> 
> 标签：php, mysql

嗨，我有一个 mysql 数据库，其中有两列 Year_from 和 Year_two。

我想做的是找到一种方法，可以将缺少的日期显示为按钮，例如，如果年份从 2006 年到 2008 年，我当然想显示 2006 年、**2007 年**和 2008 年。这可能吗，因为数据库中没有 2007 的值。

我还没有编写任何代码，因为我不确定这是否可能，或者我将如何实现它。

任何想法，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:58:51.120

用于`range($year_from, $year_to)`生成所有年份的列表。将该数组与您从数据库中获得的数组进行比较，`array_diff()`并用粗体显示缺失的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:57:42.580

这需要在代码中完成。
基本上，您将从数据库中读取一堆记录，遍历您想要显示的年份数组，并检查（每次迭代）结果集中是否存在匹配的记录。

# javascript - 不打开新窗口的 window.opener 相当于什么？

> ID：13277961
> 
> 赞同：0
> 
> 时间：2012-11-07T20:49:10.137
> 
> 标签：javascript

我正在使用的库通过将此脚本添加到弹出窗口来获取对主窗口的引用： var winMain=window.opener;

此脚本允许弹出窗口从打开它的窗口访问全局变量。例子：

```
<select name=MonthSelector onChange="javascript:winMain.Cal.SwitchMth(this.selectedIndex);winMain.RenderCal();"> 
```

但是，如果我尝试在不打开新窗口的情况下调用其中一些变量，这会让我处于尴尬的境地。（例如，如果我尝试将其中一个日历嵌入到 div 而不是新窗口中。）

```
 onChange="javascript:Cal.SwitchMth(this.selectedIndex);" 
```

和

```
 var winMain=window;
  onChange="javascript:winMain.Cal.SwitchMth(this.selectedIndex);" 
```

两者似乎都不起作用。有没有办法将当前窗口的句柄作为变量？或者我只是做错了什么？

[这个问题](https://stackoverflow.com/questions/3708151/how-to-get-the-main-window-handle-of-a-process-using-jscript)似乎与我的相似，但答案不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:19:13.527

将其更改为

```
var winMain = window.opener || window; 
```

它说没有window.opener，使用window。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:16:26.293

下面是一个*window.open*等效项

```
var w = window.open('', '', 'width=400,height=400,resizeable,scrollbars');
w.document.write('Content goes here');
w.document.close(); 
```

根据您的需要使用它。

# c++ - 析构函数问题

> ID：13277967
> 
> 赞同：1
> 
> 时间：2012-11-07T20:49:35.003
> 
> 标签：c++, visual-c++

这两个代码有什么区别？第一种情况是否存在内存泄漏？

没有定义析构函数

```
 class Library
{
private:
    Book books[50];
    int index;
public:
    Library()
    {

        index=0;
    }
}; 
```

或定义析构函数

```
class Library
{
private:
    Book *books;
    int index;
public:
    Library()
    {
        books=new Book[50];
        index=0;
    }
    ~Library()
    {
        delete books;
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:53:59.433

```
delete books; 
```

应该

```
delete[] books; 
```

第二种：`books`作为数组分配，所以必须作为数组删除。第一个版本没有内存泄漏。

不同之处在于，在第一种情况下，内存`books`包含在每个实例的分配中`Library`，而在第二种情况下，它是使用堆单独分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:56:18.260

首先，第二个代码应该是

```
~Library() {
  delete[] books;
} 
```

`new`必须匹配`delete`，`new[]`必须匹配`delete[]`。

在第一个代码中，每个 的实例都`Library`包含 50 个`Book`. 复制 a`Library`将复制这 50 个实例。没有内存泄漏。

在第二个代码中，一个 的实例`Library`只包含一个指向书籍的指针。复制实例（没有默认的复制构造函数）只复制指针 - 原始和副本将共享 50 本书，第二个被销毁的人将`delete`在已删除的内存上发布，这是一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T21:01:24.710

```
~Library()
{
    delete[] books;
} 
```

是一个适当的解决方案。您的代码中可能存在免费的问题，您可以考虑：

1) 使用初始化列表

在第二种情况下：

2）你真的需要做指针吗？本地对象还不够吗？（我猜你的书没有超过堆栈大小）。查看您在开始时创建它并在最后删除的代码。记住堆栈更快，更安全。

还要熟悉 valgrind，它是一个非常棒的工具。检查 cppcheck 是否会帮助你。ubuntu 中的“sudo apt-get install cppcheck”。

# ember.js - 如何创建一个“启动”状态，所有其他状态都经过多次转换？

> ID：13277968
> 
> 赞同：1
> 
> 时间：2012-11-07T20:49:34.640
> 
> 标签：ember.js, ember-old-router

我正在构建一个具有持久视图的简单应用程序。这种观点一直存在。视图取决于一些数据。以不同的状态进入应用程序应确保视图与其数据一起存在。我认为最好的方法是创建一个调用`connectOulet`连接数据和视图的初始状态。这样，所有后续状态都必须通过这一状态进行转换。我不知道如何让路由器在连接后自动转换到下一个状态。

这是我的路由器（这在 ATM 上不起作用）。看评论。

```
Inbox.Router = Ember.Router.extend
  enableLogging: true
  location: "history"
  initialState: "bootUp"

  bootUp: Ember.Route.extend
    root: Ember.Route.extend
      route: '/'
      # All states need to transition through this code
      # How can I transition to root state after this code executes?
      connectOutlets: (router, context) ->
        router.get('applicationController').connectOutlet
          outletName: "list"
          name: "messages"
          context: Inbox.store.findAll(Inbox.Message)

  root: Ember.Route.extend
    showMessage: Ember.Route.transitionTo('root.showingMessage')

    initialState: 'dashboard'

    dashboard: Ember.Route.extend
      route: '/dashboard'

    # Entering this state needs the messages view loaded
    # with data
    showingMessage: Ember.Route.extend
      route: '/:id'
      connectOutlets: (router, context) ->
        router.get('applicationController').connectOutlet
          outletName: "details"
          name: "message"
          context: context
      serialize: (router, context) ->
        id: context.get('id')
      deserialize: (router, urlParams) ->
        Inbox.store.find Inbox.Message, urlParams.id 
```

用 FSM 建模这种行为对我来说似乎是正确的。这是做这种事情的正确方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:49:48.793

解决方案是创建一个状态根状态，事物通过该状态进行转换。`root`状态本身不可路由。所以我们必须为此创建一个子状态。这是我的路由器。

```
# Assume users enters a /

Inbox.Router = Ember.Router.extend
  enableLogging: true
  location: "history"

  # Root application state
  root: Ember.Route.extend

    # This is the state that the others must transition.
    # It's route is "/". It has a nested state called "home"
    # which route is "/". Home's route is relative to "/". 
    # So when a user enters at "/" the "home" state is selected.
    # The router transitions into "index" then "home".
    # When the user enters at "/:id" the user transitions through "index"
    # since "/:id" is a subroute of "/".
    # 
    # This is explained in the router's nested state documentation.
    index: Ember.Route.extend
      route: '/'
      connectOutlets: (router, context) ->
        router.get('applicationController').connectOutlet
          outletName: "list"
          name: "messages"
          context: Inbox.store.findAll(Inbox.Message)
        router.get('applicationController').connectOutlet
          outletName: "details"
          name: "message"
        router.get('applicationController').connectOutlet
          outletName: "filters"
          controller: router.messagesController
          viewClass: Inbox.FiltersView

      showMessage: Ember.Route.transitionTo('showingMessage')

      home: Ember.Route.extend
        route: '/'

      showingMessage: Ember.Route.extend
        route: '/:id'
        connectOutlets: (router, context) ->
          router.get('messageController').set('content', context)
        serialize: (router, context) ->
          id: context.get('id')
        deserialize: (router, urlParams) ->
          Inbox.store.find Inbox.Message, urlParams.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:08:31.450

You should just be able to call connectOutlets in the root Route. I don't think you can create route/states above or before root like your example.

```
root: Ember.Route.extend
showMessage: Ember.Route.transitionTo('root.showingMessage')
initialState: 'dashboard'

connectOutlets: (router) ->
  router.get('applicationController').connectOutlet
    outletName: "list"
    name: "messages"
    context: Inbox.store.findAll(Inbox.Message)

dashboard: Ember.Route.extend
  route: '/dashboard'

# Entering this state needs the messages view loaded
# with data
showingMessage: Ember.Route.extend
  route: '/:id'
  connectOutlets: (router, context) ->
    router.get('applicationController').connectOutlet
      outletName: "details"
      name: "message"
      context: context
  serialize: (router, context) ->
    id: context.get('id')
  deserialize: (router, urlParams) ->
    Inbox.store.find Inbox.Message, urlParams.id 
```

# ios - 使用 XMPP 作为推送服务器？

> ID：13277970
> 
> 赞同：1
> 
> 时间：2012-11-07T20:49:41.313
> 
> 标签：ios, google-app-engine, xmpp, push-notification

在过去的几天里，我一直在兜圈子，试图为我的问题找到一个好的解决方案。这里的主要关键是这是针对 iOS 应用程序的。我想要的是从一台设备快速通信到另一台设备更新。所以如果用户 1 执行了一个动作，我想实时地告诉用户 2 用户 1 已经执行了这个动作。

出于各种原因，我不想使用 Apple 推送通知。所以这是不可能的。我研究了 Pusher 和 PubNub 之类的服务，但这些服务太贵了（并且只允许极少的并发连接数，~2500）。我还研究了 Google App Engine 的 Channel API，但它通过 Javascript 工作，并且必须在 iOS 上使用阴暗的技术来实现。老实说，我宁愿不使用它。

所以现在我正在研究 Google App Engine 中的 XMPP。似乎它会做我想做的事，但我不确定我是否理解了整个画面。难道我不能使用 XMPP 消息完成我想要的，即当用户 1 执行操作时，我可以使用 JSON 消息快速通知用户 2？

这里的主要关键是我必须在后台使用用户的唯一 ID 为 XMPP 执行用户注册。这是否可以在没有用户干预的情况下自动创建一个 Jabber ID，例如 user-unique-id@my-app-engine-domain.com？

总的来说，这是一个可行的解决方案吗？我错过了什么？有哪些例外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:03:52.667

您所描述的一切听起来都可以通过 XMPP 轻松实现。

只是几点。

*   当然，您确实意识到它是基于 XML 的，因此您的 JSON 消息将嵌入 XML 节中，并在必要时进行适当的转义。
*   您的用户注册将由服务器实现确定，但我相信大多数将允许自定义身份验证挂钩（如 LDAP）。因此，拥有外部注册机制应该不是问题，并且是一种相当普遍的方法。
*   由于您使用的是 ios，因此您应该将[XMPPFramework](https://github.com/robbiehanson/XMPPFramework)视为您的 XMPP 库。
*   根据您的用例，您可能还希望查看[XMPP pubsub](http://www.igniterealtime.org/support/articles/pubsub.jsp)以获取更新，具体取决于在进行更改时应该有多少其他设备收到消息。我已经使用了这种方法，它适用于实时客户端到客户端更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T06:39:06.597

AppEngine 仅支持 XMPP 作为客户端：它可以发送和接收消息。这里的关键是，如果您查看[发送 XMPP 消息](https://developers.google.com/appengine/docs/java/xmpp/overview#Sending_Chat_Messages)的文档，每个客户端都需要拥有自己的地址 (JID)，而 GAE 未提供该地址。

因此，为了支持您的情况，您需要有一个外部 XMPP 服务器，每个客户端都有自己的 JID，然后您可以向它们发送 XMPP 消息。

# uitableview - IOS - 如何在分组表视图中混合文本字段和文本视图

> ID：13277972
> 
> 赞同：0
> 
> 时间：2012-11-07T20:49:42.473
> 
> 标签：uitableview, ios6

首先，这可能吗？

我在 iPad 详细视图 cellAtIndexPath 方法中有如下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //NSLog(@"%s", __FUNCTION__);
    DetailCell *cell = nil;
    NSInteger tag = 0;
    NSString *text = nil;
    NSString *placeholder = nil;

    NSUInteger section = [indexPath section];
    switch (section)
    {
        case TitleSection:
        {
            cell = [self titleTextField];
            text = ...
            tag = ...
            placeholder = @"Title";
            break;
        }
        case UserSection:
        {
            if ([indexPath row] == 0) {

                    cell = [self usernameTextField];
                    text = ....
                    tag = ....
                    placeholder = ...
                    break;
            } else {

                    cell = [self passwordTextField];
                    text = ....
                    tag = .....
                    placeholder = ...
                    break;
            }

        }
        case CompanySection:
        {
            switch ([indexPath row]) {
                case 0:
                    cell = [self companyTextField];
                    text = .......
                    tag = ....
                    placeholder = ......
                    break;
                case 1:

                    break;
                case 2:

                    break;

            }
            break;
        }

        case NotesSection:
        {
            cell = [self notesTextView];
            text = ...
            tag = ...
            placeholder = @"Tap to Enter some Notes";
            break;
        }
    }

    UITextField *textField = [cell textField];
    [textField setTag:tag];
    [textField setText:text];
    [textField setPlaceholder:placeholder];

    return cell; 
```

我希望 Notes 部分成为 UITextView 类，而所有其他部分都是 UITextField 类。

这一定是以前做过的，但我在这里找不到参考。请指出我正确的方向..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:37:44.317

我通过子类化单元解决了这个问题：

```
CGRect rect = CGRectInset(bounds, 20.0, 10.0);
    textField = [[UITextField alloc] initWithFrame:rect];

    [textField setReturnKeyType:UIReturnKeyNext];

    //  Make the clear button appear automatically.
    [textField setClearButtonMode:UITextFieldViewModeWhileEditing];
    [textField setBackgroundColor:[UIColor clearColor]];
    [textField setFont:[UIFont fontWithName:@"Arial" size:18]];
    [textField setOpaque:YES];

    textView = [[UITextView alloc] initWithFrame:bounds];

    //  Set the keyboard's return key label to 'Next'.
    //
    [textView setReturnKeyType:UIReturnKeyNext];

    [textView setScrollEnabled:YES];
    [textView setBackgroundColor:[UIColor clearColor]];
    [textView setFont:[UIFont fontWithName:@"Arial" size:18]];
    [textView setOpaque:YES];

    [[self contentView] addSubview:textField];
    [self setTextField:textField];

    [[self contentView] addSubview:textView];
    [self setTextView:textView];

and then looking for specific sections of my table in cellForRowAtIndexPath:

case CompanySection:
        {
            switch ([indexPath row]) {
                case 0:
                    cell = [self companyTextField];
                    text = [entity company];
                    tag = EntityCompany;
                    placeholder = @"Company";
                    break;
                case 1:...

                case 2:...

                case 3:...
                    cell = [self emailTextField];
                    text = [entity emailAddress];
                    tag = EntityEmail;
                    placeholder = @"Email";
                    break;
            }
            break;
        }

        case NotesSection:
        {

            cell = [self notesTextView];
            text = [entity notes];
            tag = EntityNotes;
            //placeholder = @"Tap to Enter some Notes";
            break;
        } 
```

希望这可以帮助某人..

# mysql - 一段时间内每个用户的 SQL 平均请求数

> ID：13277973
> 
> 赞同：1
> 
> 时间：2012-11-07T20:49:44.000
> 
> 标签：mysql, sql

我有一个包含以下字段的表（请求）：

id、requestType、userEmail、日期

我想找到给定时间段内（即上个月）每个用户的平均请求数。有什么建议么？

谢谢！格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:56:14.733

像 SUM 功能这样的东西会起作用。可能有点慢。

```
SELECT SUM(requestType) FROM Requests WHERE `userEmail` = `userEmail` and `date` BETWEEN `first-date YYYY-MM-DD` AND `second-date YYYY-MM-DD`; 
```

[SQL 总和](http://www.w3schools.com/sql/sql_func_sum.asp)

如果您有很多请求，我还建议您每天为每个用户设置一行，然后只更新该用户的请求总数。

编辑：如果你想要过去 30 天，类似这个查询的东西应该可以工作。它适用于我的测试表。

```
 SELECT SUM(requestType) FROM Requests WHERE `userEmail` = `userEmail` and `date`BETWEEN curdate() - INTERVAL 30 DAY AND curdate(); 
```

# ios - iOS：用户完成输入几秒钟后调用函数

> ID：13277974
> 
> 赞同：0
> 
> 时间：2012-11-07T20:49:46.403
> 
> 标签：ios, xcode, uisearchbar

我想创建一个 UISearchBar 函数，它像 App Store 中的搜索一样被调用：在用户完成输入几秒钟后（NSTimer）执行函数（NSURLConnection），并且在此期间只执行一次。

有人有想法吗？

**编辑**

```
 self.currentTaskID = self.currentTaskID + 1;
    NSInteger taskID = self.currentTaskID;

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC), queue, ^{
        if (taskID == self.currentTaskID)
        {
            NSMutableURLRequest *request_CH3 = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://website.com/search.php?term=%@", replaceWhiteSpace]]
                                                               cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                           timeoutInterval:30.0];

            [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

            authConnection_CH3 = [[NSURLConnection alloc] initWithRequest:request_CH3 delegate:self];
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:50:29.757

我最近回答了类似的问题，你可以在[这里找到](https://stackoverflow.com/questions/13232655/how-to-implement-work-queue-in-ios-where-only-newest-request-is-handled/13233208#13233208)

基本上，您可以延迟搜索排队，如果在指定时间内有新的搜索，则取消任何先前安排的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:54:42.853

不要使用计时器来执行此操作，而是实现`UISearchBar`,`searchBarTextDidEndEditing`或的委托功能，`searchBar:textDidChange`然后当您对用户输入的字符数感到满意时，您将开始您的`NSURLConnection`请求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:54:55.097

在您要调用搜索功能的功能中（在您单击后的情况下）

实现这个：

```
[timer invalidate];
    timer = nil;
    timer = [NSTimer scheduledTimerWithTimeInterval: 3.0 target: self selector: @selector(thefunctionyouwanttocall) userInfo: nil repeats: NO]; 
```

这将在点击事件后 3 秒调用您的函数

# asp.net - 跨页回发后Control.UniqueID不同

> ID：13277978
> 
> 赞同：2
> 
> 时间：2012-11-07T20:50:21.583
> 
> 标签：asp.net, unique-id

我有一个带有 MasterPage 的简单 ASP.NET 页面。在 MasterPage 中，我有两个登录字段：

```
<input type="text" runat="server" id="txtUserName"/>
<input type="text" runat="server" id="txtPassword"/> 
```

当控件呈现到页面时，ASP.NET 呈现以下内容：

```
<input type="text" runat="server" id="ctl00_txtUserName" name="ctl00$txtUserName"/>
<input type="text" runat="server" id="ctl00_txtPassword" name="ctl00$txtPassword"/> 
```

如果我理解正确，`name`属性对应于`UniqueID`控件的属性。但是，当我调试`Page_Load`并尝试查看`UniqueID`这些字段时，它们具有不同的值（`ctl0$txtUserName`和`ctl0$txtPassword`分别）！

请注意，这似乎不是使用此 MasterPage 的所有页面上的问题。它们中的大多数都可以正常工作`ctl0$txtUserName`并`ctl0$txtPassword`在渲染和`Page_Load`.

知道什么可能导致 ASP.NET`UniqueID`为控件呈现不同于它在中使用的控件`Page_Load`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:54:38.597

我仍然不确定是什么导致 MasterPage 中生成的 UniqueID 在 Page_Load 中与呈现到页面时不同。但是，我能够通过将这些字段的 UniqueID 存储在隐藏字段中来解决这个问题。然后我可以直接访问 Request.Form 集合中的值。

换句话说，我这样做了：

在母版页中 -

```
<input type="text" runat="server" id="txtUserName"/>
<input type="text" runat="server" id="txtPassword"/>

<input type="hidden" id="txtUserNameUID" value="<%=txtUserName.UniqueID%>"/>
<input type="hidden" id="txtPasswordUID" value="<%=txtPassword.UniqueID%>"/> 
```

在子页面的 Page_Load 期间 -

```
string username = Request.Form[Request.Form["txtUserNameUID"]];
string password = Request.Form[Request.Form["txtPasswordUID"]]; 
```

希望这可以帮助其他在 ASP.NET 中遇到 UniqueID 怪异问题的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T11:04:30.313

我刚刚意识到的奇怪怪癖：运行在服务器上的任何包装控件也必须具有 ID。例如，如果您在控件周围有一个面板，即无论“ctl00”是什么，都必须为其分配一个ID。如果没有设置，它将被分配一个，这可以改变。

# php - 在 PHP 中匹配 MySQL 时间

> ID：13277980
> 
> 赞同：0
> 
> 时间：2012-11-07T20:50:23.320
> 
> 标签：php, mysql, forms, date, select

这似乎是一项简单的任务，我看到其他人问过同样的问题，但我仍然无法从我的 SQL 查询中返回任何结果。我有一个由时间戳默认当前设置的日期列。所以它读取 YYYY-MM-DD HH-MM-SS。

我的 SQL 查询如下：

```
select `paid` from customer_det where `office` = "Blanding" and `date`= CURDATE(); 
```

当我摆脱 and date = curdate 时，我返回一个结果集。所以我很好奇如何匹配这两个日期。我只需要拉取今天插入的结果，实际时间无关紧要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:59:10.907

`CURDATE()`返回 YYYY-MM-DD。

您的日期值是 YYYY-MM-DD HH-MM-SS，所以 `date = CURDATE()`总是错误的。因为你正在做的是`'2012-11-07 21:58:47' = '2012-11-07'`，这显然是不一样的。

相反，您可以使用 mysql 的 DATE() 函数，如下所示：

```
SELECT `paid` FROM customer_det WHERE `office` = "Blanding" and DATE(date) = CURDATE(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:04:59.653

你有没有试过这个：

```
$curDate = date("Y-m-d");
$query = "select `paid` from customer_det where `office` = "Blanding" and `date` = $curDate"; 
```

在我看来，您列出的内容应该可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:58:43.293

您可以转换时间戳以获取该[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)部分并进行比较：

```
SELECT `paid` FROM customer_det WHERE `office` = "Blanding" AND DATE(`date`) = CURDATE(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:59:07.647

我相信你可以用[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)做到这一点。

```
select `paid` from customer_det where `office` = "Blanding" and DATEDIFF(`date`, CURDATE()) = 0; 
```

# c# - 在 C# 中创建类型列表

> ID：13277981
> 
> 赞同：3
> 
> 时间：2012-11-07T20:50:24.077
> 
> 标签：c#, reflection, collections

我想创建一个类型列表，每个类型都必须实现一个特定的接口。喜欢：

```
interface IBase { }
interface IDerived1 : IBase { }
interface IDerived2 : IBase { }

class HasATypeList
{
    List<typeof(IBase)> items;
    HasATypeList()
    {
        items.Add(typeof(IDerived1));
    }

} 
```

所以我知道我能做到

```
List<Type> items; 
```

但这不会将列表中允许的类型限制为实现 IBase 的类型。我必须编写自己的列表类吗？不是说这有什么大不了，但如果我不必...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:54:05.937

`typeof(IBase)`, `typeof(object)`, `typeof(Foo)`, 都返回具有相同成员的 , 的实例`Type`，依此类推。

我看不到您要达到的目标以及为什么要区分它们？

实际上，您在这里编写的代码：

```
List<typeof(IBase)> items; 
```

（我什至不知道这是否编译？）与此完全相同：

```
List<Type> items; 
```

所以事实上，你想要达到的目标是无用的。

如果你真的想实现这个 - 但我不明白为什么...... - 你可以像 Olivier Jacot-Descombes 建议的那样创建自己的集合类型，但在这种情况下，我宁愿创建一个继承的类型`Collection<T>`取而代之：

```
public class MyTypeList<T> : Collection<Type>
{
    protected override InsertItem( int index, Type item )
    {
        if( !typeof(T).IsAssignableFrom(item) )
        {
            throw new ArgumentException("the Type does not derive from ... ");
        }

        base.InsertItem(index, item);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:55:05.833

是的。如果 type 不是 IBase 的子类，您必须实现一个抛出异常的 List。

没有内置的方法可以做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:59:09.383

唯一的方法是创建自己的类型集合

```
public class MyTypeList
{
    List<Type> _innerList;

    public void Add(Type type)
    {
        if (typeof(IBase).IsAssignableFrom(type)) {
             _innerList.Add(type);
        } else {
            throw new ArgumentException(
                "Type must be IBase, implement or derive from it.");
        }
    }

    ...
} 
```

# facebook-like - 无论帖子被分享和转发多少次，如何计算所有喜欢？

> ID：13277982
> 
> 赞同：0
> 
> 时间：2012-11-07T20:50:24.690
> 
> 标签：facebook-like

无论帖子被分享和转发多少次，我都希望能够计算帖子或照片的总点赞数。

我想知道一篇帖子在整个 Facebook 宇宙中的受欢迎程度。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:20:03.203

这并不完全可能，原因如下：

1.  Facebook 不会通过 API 指示帖子是否是另一个帖子的转发（换句话说，Post 对象上没有“via”属性）。也没有一个属性可以指示特定帖子在何处或多少次被重新共享。
2.  Facebook 上的许多帖子使用创建帖子的用户设置的隐私设置，这也适用于重新分享的故事。您的应用可以访问其用户授予其阅读权限的任何内容，但这并不授予它访问 Facebook 上所有用户的订阅源的权限。

理论上，您最多可以这样做（尽管我不确定是否有其他限制可以防止这种情况发生）：搜索 Facebook 上的所有 PUBLIC 帖子，查找与您要跟踪的帖子中的文本相匹配的文本。（请参阅此处“搜索”下的文档：http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)）。汇总所有这些帖子的点赞数。请理解，这只是您的应用能够查看的帖子的子集。

# html - 在此上下文中，元素 li 不允许作为元素 div 的子元素

> ID：13277984
> 
> 赞同：1
> 
> 时间：2012-11-07T20:50:32.007
> 
> 标签：html, validation, twitter-bootstrap

我正在使用 twiiter bootstrap 生成可折叠菜单，但在验证此代码时出现错误：

```
<div class="nav-collapse">
  <ul class="nav pull-right">
    <li><a href="/">Home</a></li>
    <li><a href="/outfits">Outfits</a></li>
    <li><a href="/champions">Champiopns</a></li>
    <li><a href="/news">News</a></li>
    <li><a href="/contact">Contact</a></li>
    <li>
      <a href="/users/sign_in">Login</a>  
    </li>
  </ul>
</div> 
```

这是错误：

```
 Line 73, Column 12: Element li not allowed as child of element div in this context. (Suppressing further errors from this subtree.)
        <li><a href="/">Home</a></li>
Contexts in which element li may be used:
Inside ol elements.
Inside ul elements.
Inside menu elements.
Content model for element div:
Flow content. 
```

我不明白，在我看来 li 元素被正确地包裹在一个 ul ...

如何使此代码验证？

# javascript - 用javascript和coldfusion四舍五入

> ID：13277985
> 
> 赞同：-1
> 
> 时间：2012-11-07T20:50:36.807
> 
> 标签：javascript, coldfusion

我正在使用其他人的有效代码。我只需要它四舍五入到小数点后第二位。它的作用是当您输入数字时，它将它添加或减去它到页面上的另一个字段

```
<cfset TextJS = TextJS & "var $EH_LEFH#CurrentRow# = $('##EH_LEFH#CurrentRow#');var $MH_LEFH#CurrentRow# = $('##MH_LEFH#CurrentRow#');$EH_LEFH#CurrentRow#.keyup(function () {$MH_LEFH#CurrentRow#.val(parseFloat($(this).val()) - #getLast.LTSN#);});">
<cfset TextJS = TextJS & "var $EH_LCYCLES#CurrentRow# = $('##EH_LCYCLES#CurrentRow#');var $MH_LCYCLES#CurrentRow# = $('##MH_LCYCLES#CurrentRow#');$EH_LCYCLES#CurrentRow#.keyup(function () {$MH_LCYCLES#CurrentRow#.val(parseFloat($(this).val()) - #getLast.LCSN#);});">
<cfset TextJS = TextJS & "var $EH_REFH#CurrentRow# = $('##EH_REFH#CurrentRow#');var $MH_REFH#CurrentRow# = $('##MH_REFH#CurrentRow#');$EH_REFH#CurrentRow#.keyup(function () {$MH_REFH#CurrentRow#.val(parseFloat($(this).val()) - #getLast.RTSN#);});">
<cfset TextJS = TextJS & "var $EH_RCYCLES#CurrentRow# = $('##EH_RCYCLES#CurrentRow#');var $MH_RCYCLES#CurrentRow# = $('##MH_RCYCLES#CurrentRow#');$EH_RCYCLES#CurrentRow#.keyup(function () {$MH_RCYCLES#CurrentRow#.val(parseFloat($(this).val()) - #getLast.RCSN#);});">
<cfset TextJS = TextJS & "$MH_LEFH#CurrentRow#.keyup(function () {$EH_LEFH#CurrentRow#.val(parseFloat($(this).val()) + #getLast.LTSN#);});">
<cfset TextJS = TextJS & "$MH_LCYCLES#CurrentRow#.keyup(function () {$EH_LCYCLES#CurrentRow#.val(parseFloat($(this).val()) + #getLast.LCSN#);});">
<cfset TextJS = TextJS & "$MH_REFH#CurrentRow#.keyup(function () {$EH_REFH#CurrentRow#.val(parseFloat($(this).val()) + #getLast.RTSN#);});">
<cfset TextJS = TextJS & "$MH_RCYCLES#CurrentRow#.keyup(function () {$EH_RCYCLES#CurrentRow#.val(parseFloat($(this).val()) + #getLast.RCSN#);});"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:59:29.983

只需使用`.toFixed`

详细文档在这里： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

[编辑] 我的新猜测：

```
<cfset TextJS = TextJS & "$MH_LCYCLES#CurrentRow#.keyup(function () {$EH_LCYCLES#CurrentRow#.val((parseFloat($(this).val()) + #getLast.LCSN#).toFixed(2));});"> 
```

# apache - “此处不允许 RewriteEngine”.htaccess 错误使用 XAMPP

> ID：13277986
> 
> 赞同：8
> 
> 时间：2012-11-07T20:50:39.513
> 
> 标签：apache, .htaccess, mod-rewrite, xampp

我正在尝试将 Apache 配置为允许 .htaccess 重写规则。我正在使用 XAMPP 在本地运行 Apache。但是，我不断收到 500 个错误。我已经在谷歌上搜索了几个小时并尝试了所有常见的解决方案，所以请阅读我的整个帖子，以免重复我已经尝试过的解决方案。

当我检查 apache 错误日志时，错误显示为：

> “C:/xampp/htdocs/xampp/websites/demo2/.htaccess：此处不允许重写引擎”。

我能找到的几乎所有其他遇到此问题的人都通过以下方式解决了这个问题：

1.  取消注释`LoadModule rewrite_module modules/mod_rewrite.so`httpd.conf 中的命令
2.  更改`AllowOverride none`为`AllowOverride All`

然而，这些解决方案都没有为我工作。我仍然收到 500 错误。我的问题听起来与此线程[http://forums.digitalpoint.com/showthread.php?t=1786841](http://forums.digitalpoint.com/showthread.php?t=1786841)相同，但该问题从未解决。我认为错误可能是我的 .htaccess 文件的位置，但我不知道。非常感谢任何见解！

顺便说一句，这是我的 .htaccess 文件。这是一个 Wordpress 安装：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /xampp/websites/demo2/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /xampp/websites/demo2/index.php [L]
</IfModule>

# END WordPress 
```

这是我的 httpd.conf 文件

```
    #
    # 这是主要的 Apache HTTP 服务器配置文件。它包含
    # 为服务器提供指令的配置指令。
    # 查看详细信息。
    # 具体见
    #
    # 讨论每个配置指令。
    #
    # 不要在没有理解的情况下简单地阅读这里的说明
    ＃ 他们做什么。它们在这里仅作为提示或提醒。如果您不确定
    # 查阅在线文档。你被警告了。  
    #
    # 配置和日志文件名：如果您指定的文件名很多
    # 服务器的控制文件以“/”（或 Win32 的“drive:/”）开头，
    # 服务器将使用该显式路径。如果文件名*不*开始
    # 带有“/”，ServerRoot 的值是前置的——所以“logs/foo.log”
    # 将 ServerRoot 设置为 "/xampp/apache" 将由
    # 服务器为“/xampp/apache/logs/foo.log”。
    #
    # 注意：在指定文件名的地方，必须使用正斜杠
    # 而不是反斜杠（例如，“c:/apache”而不是“c:\apache”）。
    # 如果省略驱动器号，则httpd.exe所在的驱动器
    # 将默认使用。建议您始终提供
    # 绝对路径中的显式驱动器号以避免混淆。

    #
    # ServerRoot：服务器所在目录树的顶部
    # 保留配置、错误和日志文件。
    #
    # 不要在目录路径的末尾添加斜杠。如果你指
    #ServerRoot 在非本地磁盘，一定要指向 LockFile 指令
    # 在本地磁盘上。如果您希望多个服务器共享同一个 ServerRoot
    # httpd 守护进程，您至少需要更改 LockFile 和 PidFile。
    #
    ServerRoot "/xampp/apache"

    #
    # Listen：允许您将 Apache 绑定到特定的 IP 地址和/或
    # 端口，而不是默认端口。另见
    #指令。
    #
    # 将其更改为侦听特定 IP 地址，如下所示
    # 防止 Apache 使用所有绑定的 IP 地址。
    #
    #听 0.0.0.0:80
    #听 [::]:80
    听 80

    # 默认字符集 UTF8
    # 添加默认字符集 utf-8

    #
    # 动态共享对象 (DSO) 支持
    #
    # 为了能够使用作为 DSO 构建的模块的功能，您
    # 必须在此位置放置相应的 `LoadModule' 行，以便
    # 其中包含的指令在使用之前_实际上是可用的。
    # 静态编译的模块（那些由 `httpd -l' 列出的）不需要
    # 在这里加载。
    #
    ＃ 例子：
    # LoadModule foo_module modules/mod_foo.so
    #

    LoadModule access_compat_module modules/mod_access_compat.so
    LoadModule actions_module modules/mod_actions.so
    LoadModule alias_module modules/mod_alias.so
    LoadModule allowmethods_module 模块/mod_allowmethods.so
    LoadModule asis_module 模块/mod_asis.so
    LoadModule auth_basic_module 模块/mod_auth_basic.so
    #LoadModule auth_digest_module 模块/mod_auth_digest.so
    #LoadModule authn_anon_module 模块/mod_authn_anon.so
    LoadModule authn_core_module 模块/mod_authn_core.so
    #LoadModule authn_dbd_module 模块/mod_authn_dbd.so
    #LoadModule authn_dbm_module 模块/mod_authn_dbm.so
    LoadModule authn_file_module 模块/mod_authn_file.so
    #LoadModule authn_socache_module 模块/mod_authn_socache.so
    #LoadModule authnz_ldap_module 模块/mod_authnz_ldap.so
    LoadModule authz_core_module 模块/mod_authz_core.so
    #LoadModule authz_dbd_module 模块/mod_authz_dbd.so
    #LoadModule authz_dbm_module 模块/mod_authz_dbm.so
    LoadModule authz_groupfile_module 模块/mod_authz_groupfile.so
    LoadModule authz_host_module 模块/mod_authz_host.so
    #LoadModule authz_owner_module 模块/mod_authz_owner.so
    LoadModule authz_user_module 模块/mod_authz_user.so
    LoadModule autoindex_module 模块/mod_autoindex.so
    #LoadModule bucketeer_module 模块/mod_bucketeer.so
    #LoadModule 缓存模块模块/mod_cache.so
    #LoadModule case_filter_module 模块/mod_case_filter.so
    #LoadModule case_filter_in_module 模块/mod_case_filter_in.so
    #LoadModule cern_meta_module 模块/mod_cern_meta.so
    LoadModule cgi_module 模块/mod_cgi.so
    #LoadModule charset_lite_module 模块/mod_charset_lite.so
    #LoadModule dav_module 模块/mod_dav.so
    #LoadModule dav_fs_module 模块/mod_dav_fs.so
    LoadModule dav_lock_module 模块/mod_dav_lock.so
    #LoadModule dbd_module 模块/mod_dbd.so
    #LoadModule deflate_module 模块/mod_deflate.so
    LoadModule dir_module 模块/mod_dir.so
    #LoadModule disk_cache_module modules/mod_disk_cache.so
    #LoadModule dumpio_module 模块/mod_dumpio.so
    #LoadModule echo_module 模块/mod_echo.so
    LoadModule env_module 模块/mod_env.so
    #LoadModule 示例模块模块/mod_example.so
    #LoadModule expires_module modules/mod_expires.so
    #LoadModule ext_filter_module 模块/mod_ext_filter.so
    #LoadModule fcgid_module modules/mod_fcgid.so # 在运行时没有工作
    #LoadModule file_cache_module modules/mod_file_cache.so
    #LoadModule filter_module modules/mod_filter.so
    LoadModule headers_module modules/mod_headers.so
    #LoadModule ident_module 模块/mod_ident.so
    #LoadModule imagemap_module modules/mod_imagemap.so
    LoadModule include_module modules/mod_include.so
    LoadModule info_module modules/mod_info.so
    LoadModule isapi_module modules/mod_isapi.so
    #LoadModule ldap_module 模块/mod_ldap.so
    #LoadModule logio_module 模块/mod_logio.so
    LoadModule log_config_module 模块/mod_log_config.so
    #LoadModule log_forensic_module 模块/mod_log_forensic.so
    LoadModule cache_disk_module 模块/mod_cache_disk.so
    LoadModule mime_module 模块/mod_mime.so
    #LoadModule mime_magic_module 模块/mod_mime_magic.so
    LoadModule 协商模块模块/mod_negotiation.so
    LoadModule proxy_module modules/mod_proxy.so
    LoadModule proxy_ajp_module 模块/mod_proxy_ajp.so
    #LoadModule proxy_balancer_module 模块/mod_proxy_balancer.so
    #LoadModule proxy_connect_module modules/mod_proxy_connect.so
    #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
    #LoadModule proxy_http_module modules/mod_proxy_http.so
    LoadModule rewrite_module modules/mod_rewrite.so
    LoadModule setenvif_module 模块/mod_setenvif.so
    #LoadModule 拼写模块模块/mod_speling.so
    LoadModule ssl_module 模块/mod_ssl.so
    LoadModule status_module modules/mod_status.so
    #LoadModule 替代模块模块/mod_substitute.so
    #LoadModule unique_id_module modules/mod_unique_id.so
    #LoadModule userdir_module modules/mod_userdir.so
    #LoadModule usertrack_module modules/mod_usertrack.so
    #LoadModule version_module modules/mod_version.so
    #LoadModule vhost_alias_module 模块/mod_vhost_alias.so

    #
    # 如果你希望 httpd 作为不同的用户或组运行，你必须运行
    # httpd 最初以 root 身份，它会切换。  
    #
    # 用户/组：运行 httpd 的用户/组的名称（或 #number）。
    # 创建一个专门的用户和组通常是一个好习惯
    # 运行 httpd，与大多数系统服务一样。
    #
    用户守护程序
    组守护程序

    #'主'服务器配置
    #
    # 本节中的指令设置'main'使用的值
    # 服务器，它响应任何未被 a 处理的请求
    ＃ 定义。这些值还为
    # 你可以在文件后面定义的任何容器。
    #
    # 所有这些指令都可能出现在容器中，
    # 在这种情况下，这些默认设置将被覆盖
    # 虚拟主机被定义。
    #

    #
    # ServerAdmin: 你的地址，应该是服务器的问题所在
    # 已发送电子邮件。此地址出现在某些服务器生成的页面上，例如
    # 作为错误文件。例如 admin@your-domain.com
    #
    ServerAdmin postmaster@localhost

    #
    # ServerName 给出服务器用来标识自己的名称和端口。
    # 这通常可以自动确定，但我们建议您指定
    # 它明确地防止启动过程中出现问题。
    #
    # 如果您的主机没有注册的 DNS 名称，请在此处输入其 IP 地址。
    #
    服务器名称本地主机：80

    #
    # DocumentRoot：您将在其中提供服务的目录
    # 文件。默认情况下，所有请求都来自该目录，但是
    # 符号链接和别名可用于指向其他位置。
    #
    DocumentRoot "/xampp/htdocs"

    #
    # Apache 可以访问的每个目录都可以配置为
    # 允许和/或禁用哪些服务和功能
    # 目录（及其子目录）。
    #
    # 首先，我们将“默认”配置为一组非常严格的
    ＃ 特征。  
    #

        允许覆盖所有
        要求所有授予

    # XAMPP：我们禁用特定于操作系统的优化以进行监听
    # 此处使用 http 协议的套接字。IE 64 位没有这个问题。  
    AcceptFilter http 无

    #
    # 请注意，从现在开始，您必须明确允许
    # 要启用的特定功能 - 所以如果某些东西不能正常工作
    # 你可能会想到，确保你已经特别启用它
    ＃ 以下。
    #

    #
    # 这应该更改为您将 DocumentRoot 设置为的任何值。
    #

        #
        # Options 指令的可能值是“None”、“All”、
        # 或以下任意组合：
        # 索引包括 FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
        #
        # 注意“MultiViews”必须*明确地命名* ---“Options All”
        # 不给你。
        #
        # Options 指令既复杂又重要。请参见
        # http://httpd.apache.org/docs/2.2/mod/core.html#options
        ＃ 了解更多信息。
        #
        选项索引 FollowSymLinks 包括 ExecCGI

        #
        # AllowOverride 控制哪些指令可以放在 .htaccess 文件中。
        # 可以是“All”、“None”或关键字的任意组合：
        # 选项 FileInfo AuthConfig 限制
        #
        允许覆盖所有

        #
        # 控制谁可以从这个服务器获取东西。
        #
        要求所有授予

    #
    # DirectoryIndex：设置 Apache 将提供的文件，如果一个目录
    # 被请求。
    #

        DirectoryIndex index.php index.pl index.cgi index.asp index.shtml index.html index.htm \
                       default.php default.pl default.cgi default.asp default.shtml default.html default.htm \
                       home.php home.pl home.cgi home.asp home.shtml home.html home.htm

    #
    # 以下行阻止 .htaccess 和 .htpasswd 文件
    # 由 Web 客户端查看。
    #

        要求全部拒绝

    #
    # ErrorLog：错误日志文件的位置。
    # 如果你没有在 a 中指定 ErrorLog 指令
    # 容器，与该虚拟主机相关的错误消息将是
    # 在这里登录。如果你 *do* 定义一个错误日志文件
    # 容器，该主机的错误将记录在那里而不是这里。
    #
    错误日志“日志/error.log”

    #ScriptLog "日志/cgi.log"

    #
    # LogLevel：控制记录到error_log的消息数量。
    # 可能的值包括：调试、信息、通知、警告、错误、暴击、
    # 警报，出现。
    #
    日志级别警告

        #
        # 以下指令定义了一些格式昵称以用于
        # 一个 CustomLog 指令（见下文）。
        #
        LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" 组合
        LogFormat "%h %l %u %t \"%r\" %>s %b" 常见

          # 你需要启用 mod_logio.c 才能使用 %I 和 %O
          LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combineio

        #
        # 访问日志文件的位置和格式（Common Logfile Format）。
        # 如果你没有定义任何访问日志文件
        # 容器，它们将被记录在这里。相反，如果你*做*
        # 定义每个访问日志文件，事务将是
        # 记录在其中并且 *not* 在此文件中。
        #
        #CustomLog "logs/access.log" common

        #
        # 如果您更喜欢包含访问、代理和引用者信息的日志文件
        # (Combined Logfile Format) 你可以使用下面的指令。
        #
        CustomLog "logs/access.log" 结合

        #
        # Redirect: 允许你告诉客户关于过去的文档
        # 存在于服务器的命名空间中，但不再存在。客户端
        # 将在其新位置对文档发出新请求。
        ＃ 例子：
        # 重定向永久 /foo http://localhost/bar

        #
        # Alias: 将 web 路径映射到文件系统路径，用于
        # 访问不在 DocumentRoot 下的内容。
        ＃ 例子：
        # 别名 /webpath /full/filesystem/path
        #
        # 如果您在 /webpath 上包含尾随 /，那么服务器将
        # 要求它出现在 URL 中。你也可能
        # 需要提供一个section来允许访问
        # 文件系统路径。

        #
        # ScriptAlias：这控制哪些目录包含服务器脚本。
        # ScriptAliases 本质上与 Aliases 相同，不同之处在于
        # 目标目录中的文档被视为应用程序和
        # 在请求时由服务器运行，而不是作为文件发送到
        ＃ 客户。关于尾随“/”的相同规则适用于 ScriptAlias
        # 关于别名的指令。
        #
        ScriptAlias /cgi-bin/ "/xampp/cgi-bin/"

        #
        # ScriptSock：在线程服务器上，指定 UNIX 的路径
        # 用于与 mod_cgid 的 CGI 守护进程通信的套接字。
        #
        #Scriptsock“日志/cgi.sock”

    #
    # "/xampp/cgi-bin" 应该更改为您的 ScriptAliased
    # CGI 目录存在，如果你有配置的话。
    #

        允许覆盖所有
        选项 无
        要求所有授予

        #
        # TypesConfig 指向包含来自的映射列表的文件
        # MIME 类型的文件扩展名。
        #
        类型配置“conf/mime.types”

        #
        # AddType 允许您添加或覆盖 MIME 配置
        # 在 TypesConfig 中为特定文件类型指定的文件。
        #
        #AddType 应用程序/x-gzip .tgz
        #
        # AddEncoding 允许你让某些浏览器解压
        # 即时信息。注意：并非所有浏览器都支持此功能。
        #
        #AddEncoding x-compress .Z
        #AddEncoding x-gzip .gz .tgz
        #
        # 如果上面的 AddEncoding 指令被注释掉，那么你
        # 可能应该定义这些扩展来指示媒体类型：
        #
        AddType 应用程序/x-compress .Z
        AddType 应用程序/x-gzip .gz .tgz

        #
        # AddHandler 允许您将某些文件扩展名映射到“处理程序”：
        # 与文件类型无关的操作。这些可以内置到服务器中
        # 或添加 Action 指令（见下文）
        #
        # 要在 ScriptAliased 目录之外使用 CGI 脚本：
        # （您还需要将“ExecCGI”添加到“Options”指令中。）
        #
        AddHandler cgi-script .cgi .pl .asp

        # 对于类型映射（协商资源）：
        #AddHandler 类型映射变量

        #
        # 过滤器允许您在将内容发送到客户端之前对其进行处理。
        #
        # 解析服务器端包含的 .shtml 文件（SSI）：
        # （您还需要在“选项”指令中添加“包含”。）
        #
        AddType 文本/html .shtml
        AddOutputFilter 包括 .shtml

        #
        # mod_mime_magic 模块允许服务器使用来自
        # 文件本身的内容来确定它的类型。MIMEMagic 文件
        # 指令告诉模块提示定义所在的位置。
        #
        MIMEMagicFile "conf/magic"

    #
    # 可定制的错误响应有三种形式：
    # 1) 纯文本 2) 本地重定向 3) 外部重定向
    #
    ＃ 一些例子：
    #ErrorDocument 500 “服务器发出嘘声。”
    #ErrorDocument 404 /missing.html
    #ErrorDocument 404 "/cgi-bin/missing_handler.pl"
    #ErrorDocument 402 http://localhost/subscription_info.html
    #

    #
    # EnableMMAP 和 EnableSendfile：在支持它的系统上，
    # 内存映射或 sendfile 系统调用用于传递
    # 个文件。这通常会提高服务器性能，但必须
    # 从网络安装服务时关闭
    # 文件系统或者是否支持这些功能
    # 在您的系统上损坏。
    #
    #EnableMMAP 关闭
    #EnableSendfile 关闭

    # 补充配置
    #
    # conf/extra/目录下的配置文件可以
    # 包括添加额外功能或修改默认配置
    # 服务器，或者你可以简单地将它们的内容复制到这里并更改为
    ＃ 必要的。

    # XAMPP 特定设置
    包括“conf/extra/httpd-xampp.conf”

    # 服务器池管理（特定于 MPM）
    包括“conf/extra/httpd-mpm.conf”

    # 多语言错误信息
    包括“conf/extra/httpd-multilang-errordoc.conf”

    # 精美的目录列表
    包括“conf/extra/httpd-autoindex.conf”

    ＃ 语言设定
    包括“conf/extra/httpd-languages.conf”

    # 用户主目录
    包括“conf/extra/httpd-userdir.conf”

    # 请求和配置的实时信息
    包括“conf/extra/httpd-info.conf”

    # 虚拟主机
    包括“conf/extra/httpd-vhosts.conf”

    # 分布式创作和版本控制 (WebDAV)
    ＃ 注意力！WEB_DAV 是一种安全风险，没有用于安全身份验证的新用户特定配置
    # 包括“conf/extra/httpd-dav.conf”

    # 为 Apache 实现代理/网关。
    包括“conf/extra/httpd-proxy.conf”

    # 各种默认设置
    包括“conf/extra/httpd-default.conf”

    # 安全 (SSL/TLS) 连接
    包括“conf/extra/httpd-ssl.conf”
    #
    # 注意：必须存在以下内容才能支持
    # 在没有 /dev/random 等价物的平台上开始没有 SSL
    # 但是一个静态编译的 mod_ssl。
    #

        SSLRandomSeed 启动内置
        SSLRandomSeed 连接内置

    # 配置 mod_proxy_html 以理解 HTML4/XHTML1
    #
    #包括 etc/extra/proxy-html.conf
    #

    # AJP13 代理

    包括“conf/extra/httpd-ajp.conf”

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T14:45:23.503

在 conf/extra/httpd-xampp.conf 中将 AllowOverride 设置为 All。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T18:53:16.263

尝试这个：

1 )=> 打开文件 ...\xampp\apache\conf\httpd.conf

2 )=> 找到“LoadModule rewrite_module modules/mod_rewrite.so”行

3 )=> 如果这里是 # 在此行之前删除它。（删除注释）

我希望它会帮助你

# yii - CActiveForm 对象不呈现 JS 代码

> ID：13277990
> 
> 赞同：0
> 
> 时间：2012-11-07T20:50:47.743
> 
> 标签：yii

我有一个简单的 CFormModel 子类，用作更改密码的表单。该类只有两个属性（密码1、密码2-用于确认-）。这是代码：

```
class ChangePasswordForm extends CFormModel {

  public $password1;
  public $password2;

  public function rules() {
    return array(
      array('password1, password2', 'required'),
      array('password2', 'compare', 'compareAttribute'=>'password1'),
      array('password1, password2', 'safe'),
    );
  }

  public function attributeLabels() {
    return array(
      'password1' => 'Enter new password',
      'password2' => 'Confirm new password',
    );
  }
} 
```

在控制器视图文件中，我使用 CActiveForm 对象来呈现此表单：

```
<?php
$form=$this->beginWidget('CActiveForm',
  array(
    'id'=>'change-pwd-form',
    'action'=>array('site/changePasswordPost'),
    'enableClientValidation'=>true,
    'enableAjaxValidation'=>true,
    'clientOptions'=>array(
      'validateOnSubmit'=>true,
    ),
  )
);

echo $form->errorSummary($changePwdForm);
?>
<fieldset><legend>Change your password</legend>
  <div class="row">
    <?php
    echo $form->labelEx($changePwdForm, 'password1');
    echo $form->passwordField($changePwdForm, 'password1');
    ?>
  </div>
  <div class="row">
    <?php
    echo $form->labelEx($changePwdForm, 'password2');
    echo $form->passwordField($changePwdForm, 'password2');
    ?>
  </div>
  <div class="row">
    <?php
    echo CHtml::submitButton('Change password');
    ?>
  </div>
</fieldset>
<?php
$this->endWidget();
?> 
```

在控制器操作中，我渲染上面的视图，传递一个 ChangePasswordForm 对象：

```
$changePwdForm = new ChangePasswordForm;
$this->render('changePassword', array('userid'=>$userid, 'userType'=>$t,
  'changePwdForm'=>$changePwdForm));
Yii::app()->end(); 
```

问题是在渲染视图时，没有生成 Javascript 代码。没有什么。所以点击提交按钮，虽然它不应该让我这样做（因为需要两个密码字段），但它确实提交了。上面的代码有什么问题并且没有创建 Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:16:23.327

添加`$form->error()`您需要验证的字段。我想你在控制器中执行 ajax 验证，如果没有 -`performAjaxValidation` [在这里搜索](http://www.yiiframework.com/doc/api/1.1/CActiveForm)