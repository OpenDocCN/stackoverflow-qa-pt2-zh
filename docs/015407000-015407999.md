# StackOverflow 问答 15407000-15407999

# ios - 如何从 iOS 下载文件？

> ID：15407000
> 
> 赞同：2
> 
> 时间：2013-03-14T10:43:07.833
> 
> 标签：ios, cocoahttpserver

我的应用程序想要运行一个 http 服务器，其他设备可以从中下载文件。

我正在使用可可 http 服务器并遵循：[https ://github.com/robbiehanson/CocoaHTTPServer/blob/master/Samples/DynamicServer/MyHTTPConnection.m](https://github.com/robbiehanson/CocoaHTTPServer/blob/master/Samples/DynamicServer/MyHTTPConnection.m)

我的http连接是：

```
@implementation MyHTTPConnection

- (NSObject<HTTPResponse> *)httpResponseForMethod:(NSString *)method URI:(NSString *)path
{

    NSString *filePath = [self filePathForURI:path];

    // Convert to relative path

    NSString *documentRoot = [config documentRoot];

    NSString *relativePath = [filePath substringFromIndex:[documentRoot length]];

    NSLog(@"file path is %@", filePath);

    //return [super httpResponseForMethod:method URI:path];
    return [[HTTPFileResponse alloc] initWithFilePath:filePath forConnection:self];
}
@end 
```

Delegate 中的代码是：

```
 httpServer = [[HTTPServer alloc] init];

        [httpServer setConnectionClass:[MyHTTPConnection class]];

        [httpServer setType:@"_http._tcp."];
        NSString *webPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"web"];
        if(webPath){
            NSString * ip = '192.168.1.10';

            int port = 3321;
            [httpServer setDocumentRoot:webPath];
            [httpServer setPort:port];
            [httpServer setInterface: ip];
            [self startServer]; 
        } 
```

当我下载 web 文档中的测试文件时，大小始终为 o 字节。

# jasper-reports - 在 JasperViewer 中查看超过 30 列的表格

> ID：15407001
> 
> 赞同：-2
> 
> 时间：2013-03-14T10:43:13.243
> 
> 标签：jasper-reports

我有一个 2 行 40 列的表格，我需要以可读的格式显示它。目前我没有在列构建器中设置列宽，因此它显示为非常窄的列并且不可读。我正在探索这些可能性：

```
1\. introducing a scrollbar and how to do it can be implemented in the code.
2\. Selecting certain columns like: All columns or certain columns etc
3\. Is there a feature of selecting columns from the user end for jasperviwer exporting to pdf. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T07:20:21.887

在 Ireport 中，您可以轻松地打开 Ireport 设计器并打开报告，然后转到“报告检查器”，您可以更改报告的高度和宽度。

# c# - monodroid 如何将图像放在图像上并放置图像

> ID：15407002
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:43:15.270
> 
> 标签：c#, image, parameters, position, xamarin.android

我正在使用 Monodroid 创建一个 Android 应用程序。我遇到了一个问题，如何将图像放在另一个图像上？此外，位置参数（x、y、高度、重量）将从服务器获取，我想根据这些参数将第二张图像移动到第一张图像上。有没有机会找到这个问题的示例代码？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:52:35.073

您可以像这样在布局中定义 ImageView：

```
<ImageView
    android:id="@+id/Image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/Icon" /> 
```

这会将图像设置为名为 Icon 的可绘制资源。您还可以使用 SetImageResource 方法从 C# 设置它：

```
var image = FindViewById<ImageView>(Resource.Id.Image);
image.SetImageResource(Resource.Drawable.Icon); 
```

根据您要从何处提取图像，ImageView 上的其他方法可能会有所帮助，例如 SetImageURI 或 SetImageDrawable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:45:29.520

您可以通过将元素放在 a`FrameLayout`或 a中来覆盖元素`RelativeLayout`。

Z-Order 由 XML 文件中的顺序决定，因此第一个元素将位于第二个元素之后。例如：

```
<RelativeLayout>
  <ImageView
    android:id="@+id/Image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/Man" />
  <ImageView
    android:id="@+id/Frame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/Frame" />
</RelativeLayout> 
```

编辑：有关如何定位元素的信息，请参阅[Android 文档](http://developer.android.com/guide/topics/ui/layout/relative.html "安卓文档")`RelativeLayout`

# sql - 返回 VB.net 中的 SQL 查询运行时间

> ID：15407007
> 
> 赞同：0
> 
> 时间：2013-03-14T10:43:39.437
> 
> 标签：sql, vb.net

我有一个程序，它运行许多 SQL 查询、收集数据并写入数据库、发送电子邮件等。

我想知道的是：

有没有办法记录运行查询所花费的时间？

即在 Management Studio 中运行查询会返回 1.234 秒。我可以从.net 应用程序中检索此信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:52:10.347

使用[StopWatch](http://www.dotnetperls.com/stopwatch)对象来测量您的时间

```
 Dim st new Stopwatch()
    st.Start();
    ExecuteTheCodeOfYourQuery()
    st.Stop();
    Dim ts As TimeSpan = st.Elapsed
    Dim elapsedTime as String = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
        ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds / 10)
    MessageBox.Show("Exec Time " + elapsedTime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:03:02.150

看起来您可以使用
`SET STATISTICS TIME ON`
[http://msdn.microsoft.com/en-us/library/ms190287.aspx](http://msdn.microsoft.com/en-us/library/ms190287.aspx)
并且查询时间将结束`sys.sysprocesses.cpu`（通常不会） - 如果有帮助的话。这是我研究过的:)

# php - 发送电子邮件分区phpmailer

> ID：15407010
> 
> 赞同：2
> 
> 时间：2013-03-14T10:43:55.473
> 
> 标签：php, sleep, phpmailer

我有时间在另一个帖子上及时回复，对不起。

该过程的目的是在一定时间后将邮件发送给网站的用户。

我有一个在特定时间执行 php 文件的 cron

例如，每周一上午 8:00

```
* 8 ** 1 php-f / $ filepath () 
```

这个 php 文件发送数千封电子邮件，但不是从早上 8 点开始连续发送，而是从 8:00 开始每分钟发送 30 封邮件，例如

那是：

08:00 -> 0-30 封邮件

08:01 -> 30-60 封邮件

08:02 -> 60-90 封邮件……等等。

由于启动 cron 在早上 8 点运行一次，我考虑过使用 php sleep 功能在几分钟之间暂停但不尊重命令，系统失败并被锁定。根据我使用 C 的经验，睡眠功能始终可以正常工作。

我将运输设置为在何时发送 30 封邮件并使用计数器退出循环

```
 ***** php-f /$filepath () 
```

因此强制系统每分钟运行一次文件。

我的代码

```
 $res = $admin->array_mixed(); //Array with all mails address

    $send_per_min=30;
    $send = 0;

    foreach ($res as $r){
    $mails->AddAddress("$r['invitacion_email']");
    .
    .
    .
    $mails = new PHPMailer(true);
$mails->Mailer = "smtp";
    .
    .
    .
    if($mails->Send()){                                      
    $send++;
    $log_OK .= $mail." Send!!! \n";
    }else{                              
    $log_KO .= $mail." Failed!!! \n";
    }

    if ($send == $send_per_min){//With this line I checked that after making 30 shipments out of the loop until the next minute the cron rerun
    //I want to replace it with a sleep that once sent 30 mails, wait until the next minute. In this way, you could set the cron at a specific time
    break;
    }

    }//End for 
```

我希望你比上一篇文章更清楚（[https://stackoverflow.com/questions/15393432/sending-emails-with-phpmailer-partitioned](https://stackoverflow.com/questions/15393432/sending-emails-with-phpmailer-partitioned)）。

向社区问好。

Pd-对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:39:58.517

您可以在 cron 中每 30 分钟调用一次 php，不要使用睡眠。如果您愿意，可以将要发送的邮件数量的参数传递给 PHP。执行 PHP 并发送所有邮件（仅 30 或数据库中配置的数量）。从 cron 执行新调用后，您发送更多邮件（仅 30 或数据库中配置的数量），并在您有邮件要发送时再次重复。为此，您可以在数据库或文件中写入最后发送的电子邮件（使用 id 或其他控件）。继续发送电子邮件，但不重复发送电子邮件。您可以使用 SQLite、XML、文本、MySQL 或其他方式编写发送和日志的设置。

您只用未发送的 30 封邮件填写了您的 $res。

仅举例：

```
SELECT 
    * 
FROM 
    `my_mail` m
WHERE 
    m.`isSent` = 'notsend'
LIMIT 30; 
```

$res 接收 SQL 的返回或者你可以格式化之前的返回，并且每一个发送的邮件都没有错误

```
$log_OK .= $mail." Send!!! \n"; 
```

将发送成功的信息写入数据库。

仅举例：

```
UPDATE
    `my_mail`
SET
    `isSent` = 'send'
WHERE 
    id = '$id'; 
```

* * *

下面的其他解决方案：

我创建了一个类，为您的问题提供了一种可能的解决方案，方法“getMail”是您获取邮件的函数，替换此函数，方法“sentMail”是您通过 PHPMailer 发送邮件的函数，方法“sentScheduleMail”是来自的引擎每分钟发送一次，但如果发送邮件慢于 60 秒，该功能将仅在下一分钟发送邮件。

```
<?php

class SentMailByPart {

    /**
     * SQL to recovery the quantity of mails specified
     * @param int $quantity
     */
    private function getMail($quantity) {
        return array(array("test1"), array("test2"));
    }

    /**
     * Function main to send mail
     */
    public function sentScheduleMail() {
        /**
         * While system is running
         */
        while (1) {
            /**
             * Time in unixtime
             */
            $res = $this->getMail(30);
            foreach ($res as $r) {
                // $this->sentMail($r);
                $this->sentMail($r);
            }
            unset($res, $r);
            $time = mktime();
            sleep($time % 60);
        }
    }

    /**
     * Settings of mail, subject and message (Your function to sent e-mail)
     * @param stdClass $settings
     */
    private function sentMail($r) {
        /**
         * New instance of PHP
         */
        $mails = new PHPMailer(true);
        /**
         * Mail address
         */
        $address = $r['invitacion_email'];
        /**
         * Sent by smtp
         */
        $mails->Mailer = "smtp";
        /**
         * Mail of destination
         */
        $mails->AddAddress($address);

        /**
         * Check mail is sent
         */
        if ($mails->Send()) {
            return true;
        } else {
            /**
             * Write error in error log
             */
            error_log(fprintf("Mail (%s) is not send. Erro: %s"
                            , $address
                            , $mails->ErrorInfo), 0);
            return false;
        }
    }

}

$sent = new SentMailByPart();
$sent->sentScheduleMail();

/**
 * if wish stop the send of mail alter $isRunning = 0, is run
 */
?> 
```

对不起，如果我的英语很糟糕，我的成语是“pt-br”。

# algorithm - asymptotic-complexity - 计算原始操作的步骤

> ID：15407011
> 
> 赞同：1
> 
> 时间：2013-03-14T10:43:58.727
> 
> 标签：algorithm, bubble-sort, asymptotic-complexity

我在理解如何计算以下算法的原始操作时遇到了一些困难。

![图片](../Images/1bd1d880f87f1a8bd274797009b9fd2b.png)

我知道步骤的计算是这样的：

(1) = 1 步：分配

(2) = 1 步：分配

(3) = 3+(n-1) 步：3 次比较，经历 (n-1) 次

(4) = 1 步：赋值

(5) = 2+(n-2)：赋值和比较经历了(n-1)+(n-2)+...+2+1=(n-1)n/2次

(6) = 3 步：两个数组，一个比较 [<] 和一个操作 [-]

(7) = 4 步：两个数组，一个操作 [-] 和对交换的函数调用，这是第 3 步 n(1)

(8) = 2个步骤：赋值和加法运算

我可以推断出最坏的情况是 (n^2+n+2n+2) = O(n^2) 因为最坏的情况是当列表以第一个值作为最大值和最后一个值进行排序时作为从 i=0 到 n (i-1) 之和的最小值。

最好的情况是列表已经排序，结果意味着列表将以恒定速度运行。

我的问题是找到如何从算法中收集原始操作，这样我就可以通过计算 c 和 n_0 用 Ordo 的定义自己证明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:43:20.143

当有人说排序算法具有特定的时间复杂度时，他们通常指的是所需的比较次数。正如您已经完成的那样，您需要计算元素之间的比较次数并找出常量。

# sql - 如何选择最大值

> ID：15407013
> 
> 赞同：2
> 
> 时间：2013-03-14T10:44:08.440
> 
> 标签：sql, vb.net, ms-access-2007

我有一个`Access`包含`Grads`表的数据库：

```
Grads
 - studentId 
 - courseId 
 - tryNumber
 - semesterId 
 - finalGrad 
```

如何`studentName, courseName, courseId, finalGrade`从 max `tryNumber`(last try) 行获取所有信息 () ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:02:44.080

如果您只想要带有`max`trynumber 的一行，那么您应该可以使用：

```
select g.studentid,
  g.courseid,
  g.trynumber,
  g.semesterid,
  g.finalgrade
from grads g
inner join
(
  select max(tryNumber) MaxTry
  from grads
) m
  on g.trynumber = m.maxtry 
```

如果您想返回每个学生`max(tryNumber)`，那么您可以使用：

```
select g.studentid,
  g.courseid,
  g.trynumber,
  g.semesterid,
  g.finalgrad
from grads g
inner join
(
  select studentid, max(tryNumber) MaxTry
  from grads
  group by studentid
) m
  on g.trynumber = m.maxtry
  and g.studentid = m.studentid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:59:33.803

> 这应该适合你：

```
SELECT studentName, 
       courseName, couseId, 
       finalGrade, MAX(tryNumber) 
FROM grads
GROUP BY studentName, courseName, couseId, finalGrade 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:02:10.647

您可以使用：

```
Select studentName, courseName, courseId, finalGrade From Grads
Where tryNumber=(Select MAX(tryNumber) From Grads) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T10:59:53.267

`select top 1 * from Grads order by tryNumber desc`

# c++ - 对图像进行下采样

> ID：15407018
> 
> 赞同：0
> 
> 时间：2013-03-14T10:44:14.990
> 
> 标签：c++, c, image-processing, imagefilter

我正在尝试将图像下采样 2，我假设它是灰度的图像，所以我将只使用一个通道，我尝试平均 4 个像素，然后将结果放入 destImage。我不知道如何正确填充 destImage。请在这里找到代码：

```
void downsizeRow(unsigned char *srcImage, unsigned char *dstImage, int srcWidth )
{

    unsigned char *srcPtr = srcImage;
    unsigned char *dstPtr = dstImage;

    int stride = srcWidth;
    int b;
    for (int i = 0; i< 4; i++)
    {

        b  = srcPtr[0]+srcPtr[1] + srcPtr[stride + 0] + srcPtr[stride + 1] ;

        srcPtr++;
        dstPtr[0] = (uint8_t)((b + 2)/4);;
        dstPtr++;
    }

}

void downscaleImage( unsigned char *srcImage, unsigned char *dstImage, int srcWidth, int dstHeight, int dstWidth)
{

    unsigned char *srcPtr=srcImage;
    unsigned char *dstPtr=dstImage;

    int in_stride = dstWidth;
    int out_stride = dstHeight;

    for (int j=0;j<dstHeight;j++)
    {
        downsizeRow(srcPtr, dstPtr, srcWidth);  // in_stride is needed
        // as the function requires access to iptr+in_stride
        srcPtr+=in_stride * 2;
        dstImage+=out_stride;
    }
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    unsigned char srcimage[4*4];
    unsigned char dstimage[2*2];

    for (int i = 0; i<4*4; i++)
    {
        srcimage[i] = 25;
    }
    std::cout<<"source Image \n"<<std::endl;
    for (int i = 0; i<4*4; i++)
    {

        std::cout<<srcimage[i];
    }

    downscaleImage(srcimage, dstimage, 4,4,2);
    std::cout<<"dest Image"<<std::endl;
    for (int i = 0; i<2*2; i++)
    {

    //    std::cout<<dstimage[i];
    }

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:54:41.270

我看到您正在使用 Qt，所以以防万一您不需要重新发明轮子，QImage 有一个方便的功能，可以为您调整大小（有效地进行下采样）。

```
QImage smallImage = bigImage.scaled(bigImage.width() / 2, bigImage.heigth() / 2, Qt::KeepAspectRatio, Qt::SmoothTransformation); 
```

如果 QImage 对您来说太慢，您也可以尝试使用通常更快的 QPixmap。

省略`Qt::SmoothTransformation`将退回到使用默认值`Qt::FastTransformation`，这将更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:09:19.810

您的代码并没有太多错误——基本上只需正确跟踪读/写指针的位置（记得用步幅更新）。这需要以一种或另一种方式使用 2 个嵌套循环。（+ 将分隔线固定为 4）。

我发现以下方法很有用：一次处理一行并没有太大的速度损失，但可以更轻松地集成各种*内核*。

```
iptr=input_image;  in_stride = in_width;
optr=output_image; out_stride = out_width;
for (j=0;j<out_height;j++) {
    process_row(iptr, optr, in_width);  // in_stride is needed
    // as the function requires access to iptr+in_stride
    iptr+=in_stride * 2;
    optr+=out_stride;
} 
```

# php - CodeIgniter 的离线帮助文件

> ID：15407021
> 
> 赞同：0
> 
> 时间：2013-03-14T10:44:16.760
> 
> 标签：php, codeigniter, chm

CodeIgniter 框架是否有任何离线帮助文件。在火车上阅读或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:56:33.160

转到您的代码点火器文件夹，导航到 user_guide 文件夹。在那里，您可以打开 index.html 以完全访问文档。

# java - 使用什么工具或过程来静态分析 JSP？

> ID：15407022
> 
> 赞同：7
> 
> 时间：2013-03-14T10:44:17.947
> 
> 标签：java, jsp, static-analysis

我正在为我们的 Java/JSP Web 应用程序（当然是旧版 ;-) 创建一份初步的、广泛的静态代码分析报告，以供管理层提高对质量问题的认识。主要Java代码没有问题，有很多免费工具可用，例如PMD、Checkstyle、Classcycle等。

但是 JSP 呢？我们的 JSP 中嵌入了相当多的 Java 代码（不幸的是），这需要进行分析。**我可以使用哪些工具或需要遵循哪些流程来静态分析 JSP？**

*   我知道 PMD 5 涵盖 JSP 的新功能，是否值得探索？
*   我可以以某种方式生成 JSP 的源 Servlet 并使用基本的 Java 分析工具，如果是这样，那么获取 JSP 的 Java 源的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:17:34.413

正如 henry 正确指出的那样，JSP 的一个很好的衡量标准是“scriptlet 代码的行数”。这可以通过一些正则表达式来完成。

我发现代码行数与 HTML ( `=LoC_Java/LoC_Html`) 行数的比率最具表现力：这个数字越小越好。高达 20% 或 30% 的比率看起来不错，但高于 50% 甚至 > 1 的值是**不好的**。在我的分析中，我发现 JSP 的比率高达 6（**非常糟糕**）。

页面指​​令的数量也提供了粗略的了解。由于这个数字主要是由进口引起的，数字高表明耦合度高。

类似的指标在具有[JSP 规则集的](http://pmd.sourceforge.net/pmd-5.0.2/rules/jsp/basic.html)[PMD](http://pmd.sourceforge.net/)中可用。Is 基于 HTML 页面分析，能够报告 scriptlet 的数量、scriptlet 的长度、重复导入和编码问题以及纯 HTML 反模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:44:54.057

一个非常简单的指标可能适用于您的目的 - “此 jsp 是否包含脚本”或“脚本代码行数”，您应该能够将其与 grep 或类似的东西拼凑在一起。

如果您要向管理层推销时间来解决问题，那么除此之外的细节是否会增加任何价值？

- - 编辑 - -

一个快速的谷歌建议你可以使用这个提取我上面为 jsps 建议的统计信息

[http://www.semanticdesigns.com/Products/SearchEngine/](http://www.semanticdesigns.com/Products/SearchEngine/)

在这个问题中被建议作为答案

[什么是衡量 JSP 项目规模的好方法？](https://stackoverflow.com/questions/7727175/what-would-be-a-good-way-to-measure-the-size-of-a-jsp-project)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:52:03.727

我不想听起来很苦涩，但我想摆脱什么？

我认为（我可能错了）在 JSP 上获取代码质量指标并不是真正有用，因为基础实际上是一种非常糟糕的做法。

就个人而言，我会尝试投入任何资源或时间来弄清楚如何将逻辑从 JSP 迁移到 MVC 或 DCI 框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:12:35.890

老实说，这个分​​析（如果可能的话）不会给你任何东西。JSP 中的混合代码简直糟透了。如果最初不可能迁移到任何 MVC 框架，唯一的解决方案是至少将这些迁移到服务类中。以后这些服务类可以更容易地重用和分析。

我最近工作的一个痛苦的jsp代码示例：系统已有9年历史

```
oListCode.setDB(driverclass, databaseurl, databasetype.intValue());
java.util.Vector oVecActiveStatusListCodes = oListCode.getListCodes(13, user.getAdminId());

java.text.DecimalFormat dformat = new java.text.DecimalFormat("###0.00");
java.text.DecimalFormat averageformat = new java.text.DecimalFormat("###0.##");

java.util.Vector userDirectoryVector = new java.util.Vector();

String searchoptionvalue = request.getParameter("iscombinesearch");
if (searchoptionvalue != null && searchoptionvalue.equals("on")) {
    java.util.Vector oVectorStudents = (java.util.Vector) session.getAttribute("studentsearchresult");

    if (oVectorStudents != null) {
        oVector.addAll(oVectorStudents);
    }
}

java.util.Vector<StatusSequenceInfo> oStaSeqVector = student.getStatusSequence(user.getAdminId());
java.util.Vector<StatusSequenceInfo> oEnrollStatusvecto = student.getProgramStatus(user.getAdminId());

String parameterList = "?columns=" + java.net.URLEncoder.encode(columns, "UTF-8") +
                    "&activestatus=" + activestatus +
                    "&studenttype=" + studenttype +
                    "&faith=" + faith +
                    "&race=" + race +
                    "&levelid=" + levelid +
                    "&levelidlist=" + levelidlist +
                    "&curriculumid=" + curriculumid +
                    "&programmeid=" + programmeid +
                    "&programmelevelid=" + programmelevelid +
                    "&semesterid=" + semesterid +
                    "&sex=" + sex +
                    "&idnumber=" + java.net.URLEncoder.encode(idnumber, "UTF-8") +
                    "&batchnumber=" + java.net.URLEncoder.encode(batchnumber, "UTF-8") +
                    "&firstname=" + java.net.URLEncoder.encode(firstname, "UTF-8") +
                    "&middlename=" + java.net.URLEncoder.encode(middlename, "UTF-8") +
                    "&lastname=" + java.net.URLEncoder.encode(lastname, "UTF-8") +
                    "&nationality=" + java.net.URLEncoder.encode(nationality, "UTF-8") +
                    "&address=" + java.net.URLEncoder.encode(address, "UTF-8") +
                    "&city=" + java.net.URLEncoder.encode(city, "UTF-8") +
                    "&state=" + java.net.URLEncoder.encode(state, "UTF-8") +
                    "&zip=" + java.net.URLEncoder.encode(zip, "UTF-8") +
                    "&homephone=" + homephone +
                    "&email=" + email +
                    "&advisor=" + java.net.URLEncoder.encode(advisor, "UTF-8") +
                    "&dob=" + dob +
                    "&visaexpiredate=" + java.net.URLEncoder.encode(visaexpiredate, "UTF-8") +
                    "&regstatus=" + regStatus +
                    "&regstartDate=" + java.net.URLEncoder.encode(regstartDate, "UTF-8") +
                    "&regendDate=" + java.net.URLEncoder.encode(regendDate, "UTF-8") +
                    "&shashmap=" + shashmap +
                    "&studentcount=" + studentcount + extendedurl;

String paginationLink = "admin_search_student_result.jsp" + parameterList;
long totalpage = new Double(Math.ceil(new Double(studentcount).doubleValue()/number_of_student)).longValue();//for pagination

String downloadStudentLink = "download_search_student_result.jsp" + parameterList + "&number_of_student=" + studentcount;
String printStudentLink = "admin_print_search_student_result.jsp" + parameterList + "&from_row=" + from_row;

%>

<html <%if (user.getLanguageId()>0 && oDictionary.getLanguageInfo(user.getLanguageId()).getDirection()==1) out.print("dir='rtl'");%>>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15"/>
<title><%if (user.getRole()==6) out.print(oDictionary.getTranslatedWord(userLanguageId, "Sub-Administrator", adminId)); else out.print(oDictionary.getTranslatedWord(userLanguageId, "Administrator", adminId));%></title>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta name="Microsoft Theme" content="blocks 000, default">
<meta name="Microsoft Border" content="tlb, default">

</head>

<body bgcolor="#FFFFFF" text="#000000" link="#CC0000" vlink="#CC0000" alink="#CC0000" leftmargin=5 topmargin=5 marginheight="0" marginwidth="0" onResize="if (navigator.family == 'nn4') window.location.reload()">

<p>
<table width=100%>
<td>
<img src="images/search.gif"> <b><font color="#666666" face="Arial, Arial, Helvetica" size="5"><%=oDictionary.getTranslatedWord(userLanguageId, "Search Result", adminId)%> &nbsp;&nbsp;</font></b>
</td>
<td align=right>
<table>
<%if (user.getRole()==4 || (user.getRole()==6 && (user.getOptions().indexOf("[STUDENT_RECORDS=") != -1 ))) {%>
<td>
&nbsp;<img src="images/write.gif"> <font face=arial size=2 color="#666666"><b><a href="new_student.jsp"><%=oDictionary.getTranslatedWord(userLanguageId, "New Student", adminId)%></a></font></b>
</td>
<%} %>
<td>
&nbsp;<img src="images/search.gif"> <font face=arial size=2 color="#666666"><b><a href="admin_search_student.jsp"><%=oDictionary.getTranslatedWord(userLanguageId, "Search Student", adminId)%></a></font></b>
</td>
<td>
&nbsp;<img src="images/read.gif"> <font face=arial size=2 color="#666666"><b><a href="students.jsp"><%=oDictionary.getTranslatedWord(userLanguageId, "Student Directory", adminId)%></a></font></b>
</td>
</table>
</td>
</table>

<%if (user.getRole()==4 || (user.getRole()==6 && (user.getOptions().indexOf("[STUDENT_RECORDS=F]") != -1 || user.getOptions().indexOf("[STUDENT_RECORDS=V]") != -1))) {%>

<table width="100%">
<tr>
<td>
    <%@ include file="paginate.jsp" %>
</td>

<td align="right">
<table>
<tr>
<td>
<img src="images/download.jpg">
<a href="<%=downloadStudentLink%>" target=_><font face=arial size=-1>[<%=oDictionary.getTranslatedWord(userLanguageId, "Download search result", adminId)%>]</font></a>
</td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="<%=printStudentLink%>" target=_><img border=0 src="images/printer.gif"><font face=arial size=-1>[<%=oDictionary.getTranslatedWord(userLanguageId, "Print search result", adminId)%>]</font></a>
</td>
</tr>
</table>
</tr>
</table>

</font>
<table border="0" cellpadding="1" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber1" bordercolordark="#666666" bordercolorlight="#999999">

<%if (!columns.equals("")) {%>

<tr>
<td nowrap bgcolor="<%=user.getColor()%>" bordercolor="#CC3300"><font face="Arial, Arial, Helvetica" size=2><b><%=oDictionary.getTranslatedWord(userLanguageId, "Student Name", adminId)%></b></font></td>
<%for (int i=0; i<oVectorColumns.size(); i++) {%>
<td nowrap bgcolor="<%=user.getColor()%>" bordercolor="#CC3300"><font face="Arial, Arial, Helvetica" size=2><b><%=oVectorColumns.get(i)%></b></font></td>
<%}%>
</tr>

<%

    for (StudentInfo studentinfo:oVector) {

        userDirectoryVector.add(new Long(studentinfo.getStudentId()));

        java.util.HashMap oHashMapProfielValues = oExtendedProfile.getProfileFieldValues(studentinfo.getStudentId(), 1, user.getAdminId());
        java.util.Vector oVectorStudentAllPrograms = registration.getStudentAllProgrammes(studentinfo.getStudentId(), user.getAdminId());

        String programname = "";
        String levelname = "";
        String programlevelname = "";
        String RegistrationDate=""; 
```

那么，清理这些而不是分析不是更好吗？我认为答案是肯定的

# vb.net - VB.NET 从指定文件夹的多个文本文件中获取特定字符串

> ID：15407026
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:44:35.223
> 
> 标签：vb.net, file

我今天刚开始学习VBnet。

情况如下：

我有一个文件夹，其中包含名为 data1 data2 等的文本文件（大约 100 个）。

每个文件都包含一个序列号：

例子：

在data1.txt

HSB1 序列号 111222

在data2.txt

HSB1 序列号 987632

ETC..

我制作了一个 VB.Net 程序，允许用户使用 FolderBrowserDialog 指定 txt 文件的文件夹位置。

我不知道如何仅在文本框中显示序列号。

当我单击执行按钮时，该命令应该完成。提前致谢！

到目前为止，这就是我所拥有的，对不起，我对此很陌生，但我必须尽快制作这个程序。

公开课形式1

```
 Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim folderDlg As New FolderBrowserDialog
    folderDlg.ShowNewFolderButton = True
    If (folderDlg.ShowDialog() = DialogResult.OK) Then
        TextBox1.Text = folderDlg.SelectedPath
        Dim root As Environment.SpecialFolder = folderDlg.RootFolder
    End If
End Sub

Private Sub SaveFileDialog1_FileOk(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles SaveFileDialog1.FileOk

End Sub

Private Sub Button2_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

End Sub

Private Sub Execute_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Execute.Click

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:48.627

如果您的文件只有一行文本并且每一行的格式都如您在上面解释的那样，则此示例应该可以工作

```
Dim fileList = Directory.GetFiles(TextBox1.Text, "*.txt", false)
Dim sb = New StringBuilder()
For Each fileName in fileList
    Dim lines = File.ReadAllLines(fileName)
    if lines.Length > 0 then
        Dim part = lines[0].Split(" "c)
        if part.Length > 2 Then
            sb.AppendLine(part(3))
        End If
    End If
Next
TextBox2.Text = sb.ToString() 
```

TextBox2 是您要显示搜索结果的文本框。它应该将其属性 MultiLine 设置为 True 和垂直滚动条（使用设计器设置它们）

该代码使用了一些静态方法，例如[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx)和 File。[ReadAllLines和](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)[StringBuilder](http://www.dotnetperls.com/stringbuilder)类的一个实例，用于缓冲所有读取，只需一个附加到目标 TextBox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:18:32.207

此代码应该可以工作，如果文件名和序列号的模式与您在问题中给出的相同，

```
 Private Sub Execute_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Execute.Click

     For Each xFile In Directory.GetFiles(TextBox1.Text, "*.txt", false)
         'Textbox2 is the resultant textbox.
         TextBox2.Text &= space(2) & File.ReadAllLines(xFile)(0).Substring(File.ReadAllLines(xFile)(0).Length - 6, 6)
     Next

    End Sub 
```

**编辑**根据您的评论：`The one that I gave is just the first line.`

# php - 用正则表达式替换和提取匹配项

> ID：15407028
> 
> 赞同：0
> 
> 时间：2013-03-14T10:44:39.090
> 
> 标签：php, regex, preg-replace-callback

如何使用例如 preg_match_all() 获取所有匹配项，并将结果替换为空字符串？

我试过这样的东西：

```
<?php
$comments   = array();              

$selectors  = preg_replace_callback('~\*(?>(?:(?>([^*]+))|\*(?!\/))*)\*~',
function ($match) {
    $comments[] = $match[0];
    return '';
}, $input);
?> 
```

但这并不能很好地工作，因为 $comment 变量似乎无法从匿名函数中访问。我想我可以制作全局变量，但我真的不想像那样搞乱命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:01:09.927

这应该有效：

```
<?php
$comments   = array();              

$selectors  = preg_replace_callback('~\*(?>(?:(?>([^*]+))|\*(?!\/))*)\*~',
function ($match) use (&$comments) {  //add the variable $comments to the function scope
    $comments[] = $match[0];
    return '';
}, $input);
?> 
```

# iphone - Load a two texture for a single image at a regular interval of time - GLkit openglES

> ID：15407033
> 
> 赞同：0
> 
> 时间：2013-03-14T10:44:48.550
> 
> 标签：iphone, ios, objective-c, opengl-es, glkit

I used the below code to load the texture on a object.

```
- (void)ldText:(UIImage *)Image
{
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    CGImageRef cgImage = Image.CGImage;
    float Width = CGImageGetWidth(cgImage);
    float Height = CGImageGetHeight(cgImage);
    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, Width, Height, 0, GL_RGBA, GL_UNSIGNED_BYTE, CFDataGetBytePtr(data));
} 
```

The texture is getting mapped properly.

I need to load two textures now. And the textures should get changed at regular interval of time. Is it possible? Can Some one guide me how to proceed from here?

****Update:*** *I loaded another texture with Image2, with the function ldText2\. And updating it in each "update view". Now I get two textures on the same object and getting changed whenever the "update" function is called. I interchange the texture1 and texture2 each time when the "Update" function is called. But the problem is time interval! I want it to happen slow. How to set a time interval for this?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T07:20:17.430

默认情况下，GLKViewController 为您提供一个动画循环，它根据`preferredFramesPerSecond`属性调用更新。（实际使用的价格在`framesPerSecond`属性中）。

您可以通过设置首选速率获得一些控制，但如果您希望显示保持静止超过几分之一秒，则更有可能想要关闭动画循环。为此，请将`paused`属性设置为**YES**，然后覆盖`resumeOnDidBecomeActive`以返回**NO**。然后，您需要确保`display`在适当的时间在视图上调用，方法是明确地这样做，或者确保`enableSetNeedsDisplay`视图上的属性设置为**YES**，并使视图无效。

如果您出于其他原因想要保持动画循环处于活动状态，则可以应用 Matic Oblak 使用延迟选择器执行的建议来更改纹理，或者设置一个标志来触发更新方法来更改纹理。

# java - Spring bean 作用域：session 和 globalSession

> ID：15407038
> 
> 赞同：60
> 
> 时间：2013-03-14T10:45:01.617
> 
> 标签：java, spring, spring-mvc, spring-ioc

Spring框架中的session和globalSession有什么区别？

```
<bean id="exampleBean" class="com.test.baen.ExampleBean" scope="session"/>
<bean id="exampleBean" class="com.test.baen.ExampleBean" scope="globalSession"/> 
```

根据我的研究，两者在 Web 感知 Spring ApplicationContext 的上下文中都是有效的。

现在，会话 bean 范围将一直保留到用户会话，但是 globalSession bean 范围是否可以在整个应用程序中使用？

**是应用范围吗？**

我无法理解术语“全局 HTTP 会话”；它会在整个全球 HTTP 会话中可用吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-14T10:56:51.050

`globalSession`是连接到 Portlet 应用程序的东西。当您的应用程序在 Portlet 容器中工作时，它由一定数量的 Portlet 构建而成。每个 portlet 都有自己的会话，但是如果您想为应用程序中的所有 portlet 存储全局变量，那么您应该将它们存储在`globalSession`. `session`此范围与基于 Servlet 的应用程序中的范围没有任何特殊效果。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-11T08:32:12.597

根据 Spring 文档::

session - 将单个 bean 定义限定为 HTTP 会话的生命周期。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

全局会话 - 将单个 bean 定义限定为全局 HTTP 会话的生命周期。通常仅在 Portlet 上下文中使用时才有效。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-11T15:56:31.307

会话范围添加了一个 http 会话的 bean 定义，仅在应用程序上下文中有效。容器将为每个 http 会话创建一个新 bean。全局会话范围添加在 portlet 应用程序上下文中使用的全局 http 会话的 bean 定义。

# javascript - @Url.Action 在单独的 javascript 文件中

> ID：15407041
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:17.363
> 
> 标签：javascript, jquery, asp.net-mvc-4

我在页面的 html 中有一些用于自动完成的 javascript，它工作正常，我将脚本移动到一个单独的 js 文件中，它破坏了我的代码。经过一些谷歌搜索，我找到了原因。

我一直在尝试更改我在 Stackoverflow 和其他网站上阅读的几篇文章之后的代码，但我似乎无法让代码正常工作。

希望一些专业的程序员可以帮助解决我的问题。

```
<input id="weatherSearch" data-request-url="@Url.Action("WeatherAutoComplete", "Weather")" name="q" title="Change location" type="text"/>

//****************************************

// Javascript code

//****************************************

function monkeyPatchAutocomplete() {
    var oldFn = $.ui.autocomplete.prototype._renderItem;
    $.ui.autocomplete.prototype._renderItem = function (ul, item) {
        var re = new RegExp("^" + this.term, "i");
        var t = item.label.replace(re, "<span style='color:black;font-size:11px;background-color:inherit;font-weight:bold;'>" + this.term + "</span>");
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append("<a>" + t + "</a>")
            .appendTo(ul);
    };
}

$(function () {
    monkeyPatchAutocomplete();
    $('#weatherSearch').autocomplete({
        source: function (request, response) {
            var re = $.ui.autocomplete.escapeRegex(request.term);
            var matcher = new RegExp("^" + re, "i");
            $.ajax({
                url: $(this).data('request-url'),
                type: "Get",
                dataType: "json",
                delay: 300,
                minLength: 1,
                data: { searchText: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.Location, value: item.Location }
                    }))
                }
            })
        }
    });
}); 
```

谢谢

乔治

# database - 如何从 REST 客户端应用程序更新 MySQL 数据库？

> ID：15407042
> 
> 赞同：1
> 
> 时间：2013-03-14T10:45:24.240
> 
> 标签：database, rest, authentication, jersey, put

我在**Jersey开发了****REST 服务**，这些服务是从**MySQL DB**生成的。我能够从 Web 服务页面 (URL) 获取/放入数据库中的信息。现在我正在为此开发一个具有安全性的客户端应用程序。我能够从数据库中获取 GET，但我该如何更新它？使用**PUT 方法**...

 ******谢谢

我有两种使用 GET 的经验（第一个使用**HttpBasicAuthFilter**的安全性，第二个使用**HttpURLConnection**）：

```
 public class BasicAuthenticationClient {

        public static void main(String[] args) {
            ExampleResourceClient erc = new ExampleResourceClient();
            erc.setUsernamePassword("blive1", "KPsS2");
            System.out.println(erc.getMessage());
            erc.close();
        }

        static class ExampleResourceClient {

        private com.sun.jersey.api.client.WebResource webResource;
        private com.sun.jersey.api.client.Client client;
        private static final String BASE_URI = http://localhost:8080/LULServices/webresources";

        public ExampleResourceClient() {
        com.sun.jersey.api.client.config.ClientConfig config = new com.sun.jersey.api.client.config.DefaultClientConfig();
        client = com.sun.jersey.api.client.Client.create(config);
        client.addFilter(new LoggingFilter());
        webResource = client.resource(BASE_URI).path("entities.user");
        }

        public String getMessage() throws com.sun.jersey.api.client.UniformInterfaceException {
        WebResource resource = webResource;
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get(String.class);
        }

        public void putMessage(Object requestEntity) throws com.sun.jersey.api.client.UniformInterfaceException {
                webResource.type(javax.ws.rs.core.MediaType.APPLICATION_JSON).put(requestEntity);
        }

        public void close() {
        client.destroy();
        }

        public void setUsernamePassword(String username, String password) {
        client.addFilter(new com.sun.jersey.api.client.filter.HTTPBasicAuthFilter(username, password));
        }
     }
 } 
```

* * *

```
public class GETurlConnectionClient {

    public static void main(String[] args) throws Exception
    {
        new GETurlConnectionClient();
    }

    public GETurlConnectionClient()
    {
        HttpURLConnection urlConnection = null;

    try {
        String webPage = "http://localhost:8080/LULServices/webresources/entities.userview";
            String name = "blive2";
        String password = "microio";

            Authenticator myAuth = new Authenticator() 
            {
             final String USERNAME = "blive1";
             final String PASSWORD = "KPsS2";

             @Override
             protected PasswordAuthentication getPasswordAuthentication()
             {
              return new PasswordAuthentication(USERNAME, PASSWORD.toCharArray());
             }
            };

            Authenticator.setDefault(myAuth);

            String authString = name + ":" + password;
        System.out.println("auth string: " + authString);
        byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
        String authStringEnc = new String(authEncBytes);
        System.out.println("Base64 encoded auth string: " + authStringEnc);

           URL urlToRequest = new URL(webPage);
           urlConnection = (HttpURLConnection) urlToRequest.openConnection();

           urlConnection.setRequestProperty("Authorization", "Basic " + authStringEnc);
           System.out.println("Authorization : Basic " + authStringEnc);

           Map<String, List<String>> hf = urlConnection.getHeaderFields();
           for (String key : hf.keySet())
           System.out.println(key + ": " + urlConnection.getHeaderField(key));

           // Display request method, responde code and response message
           System.out.println("Request method is " + urlConnection.getRequestMethod());
           System.out.println("Response code is " + urlConnection.getResponseCode());
           System.out.println("Response Message is " + urlConnection.getResponseMessage());

           // Display the content
           String results = doHttpUrlConnectionAction(webPage);
           System.out.println(results);

    } catch (MalformedURLException e) {
            e.printStackTrace();
    } catch (IOException e) {
            System.out.println("Failure processing URL: " + "http://localhost:8080/LULServices/webresources");
            e.printStackTrace();
    } catch (Exception e) {
            // deal with the exception in your "controller"
        }

        finally {
        if (urlConnection != null) {
            urlConnection.disconnect();
        }
    }
     }
    // Read the content 
    private String doHttpUrlConnectionAction(String webPage)
    throws Exception
    {
        URL url = null;
        BufferedReader reader = null;
        StringBuilder stringBuilder;

        try
        {
            // create the HttpURLConnection
            url = new URL(webPage);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();

            connection.setRequestMethod("GET");
            connection.setRequestProperty("Accept", "application/json");

            // Reading from a URLConnection (not display yet)
            reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            stringBuilder = new StringBuilder();

            String line = null;
            while ((line = reader.readLine()) != null)  {
                stringBuilder.append(line + "\n");
            }
            return stringBuilder.toString();

        }   catch (Exception e)     {
                e.printStackTrace();
                throw e;
            }

        finally
        {
            // close the reader; this can throw an exception too, so wrap it in another try/catch block.
            if (reader != null) {
                try {
                    reader.close();
                }
            catch (IOException ioe) {
                ioe.printStackTrace();
            }
            }
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:54:52.030

我建议您考虑使用更高级别的 API，例如[Apache HTTPClient ，而不是使用 URLConnections 和 HTTP 连接中发生的所有低级别的东西](http://hc.apache.org/httpcomponents-client-ga/index.html)

您可能可以找到更高级别的 REST 客户端 API，但 HTTPClient 应该非常易于使用。******

# matlab - MATLAB中的反斜杠运算符用于向量

> ID：15407043
> 
> 赞同：2
> 
> 时间：2013-03-14T10:45:25.790
> 
> 标签：matlab, backslash, least-squares

在 MATLAB 中让我们输入

```
A = [0.1195952380, 0.2552619050, 0.3235000000,...
     0.1289285710, 0.6675476190, -0.0770000000,...
     0.1973809520];

and

b0 = 1.7250238100; 
```

如果我使用反斜杠运算符 as `A \ b0`，结果是

```
[0         0         0         0    2.5841         0         0] 
```

如果我使用

```
pinv(A)*b0 
```

我们得到的答案是：

```
0.2985    0.6370    0.8073    0.3217    1.6659   -0.1922    0.4926 
```

但是许多谈论反斜杠运算符的文档都说这两种操作都应该得到相同的答案。为什么在这种情况下不是这样？

有人可以在这方面帮助我吗？

谢谢，

巴布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:13:44.333

正如其他人所说，该系统尚未确定（如丹尼斯所说，尚未结束。）由于您有一些后续问题，让我更深入地讨论。

A 中有一行，你基本上有一个方程，有 7 个未知数。您基本上可以将这些未知数中的任何 6 个设置为零，然后求解第 7 个。这就是反斜杠的作用。它将选择未知数，使得结果对任何噪声的贡献最小，因此这里是 A 矩阵中具有最大绝对系数的未知数。这就是结果中第 5 个未知数不为零的原因。

事实上，解决方案将存在于 6 维集合中。我们可以自由地将向量的任何线性组合从 A 的空行空间添加到该解决方案中，并基于线性系统获得另一个同样（数学上）有效的解决方案。

```
A = [0.1195952380, 0.2552619050, 0.3235000000,...
     0.1289285710, 0.6675476190, -0.0770000000,...
     0.1973809520];

null(A)
ans =
   -0.3070   -0.3891   -0.1551   -0.8029    0.0926   -0.2374
    0.9176   -0.1044   -0.0416   -0.2155    0.0249   -0.0637
   -0.1044    0.8676   -0.0528   -0.2731    0.0315   -0.0808
   -0.0416   -0.0528    0.9790   -0.1089    0.0126   -0.0322
   -0.2155   -0.2731   -0.1089    0.4364    0.0650   -0.1666
    0.0249    0.0315    0.0126    0.0650    0.9925    0.0192
   -0.0637   -0.0808   -0.0322   -0.1666    0.0192    0.9507 
```

null(A) 的列是这些空子空间的基向量。事实证明，有时反斜杠解决方案不是首选，因为它有点武断地选择元素设置为零。另一种解决方案是使用 pinv(A)*b0。

```
pinv(A)
ans =
    0.1730
    0.3693
    0.4680
    0.1865
    0.9657
   -0.1114
    0.2855

pinv(A)*b0
ans =
    0.2985
    0.6370
    0.8073
    0.3217
    1.6659
   -0.1922
    0.4926 
```

pinv(A) 是 A 的 Moore-Penrose 伪逆。它使用奇异值分解来产生该结果，因此它通常比反斜杠慢，但这里的差异将是微不足道的。有时有趣的 pinv 解决方案的特征是它具有所有可能的此类解决方案的最小范数。

```
b0 = 1.7250238100;
norm(A\b0)
ans =
    2.5841

norm(pinv(A)*b0)
ans =
    2.0748 
```

一种解决方案比另一种更好吗？并不真地。有时我们关心差异，您可能会关心选择其中一个而不是另一个。但是如果你只有一个方程，那么你必须接受任何可能的解都可能和其他解一样好。

当然，我们可能会选择一些糟糕的解决方案。例如，下一个解决方案在理论上是一个同样有效的选择，如果一个愚蠢的选择：

```
x2 = x1 + null(A)*10*randn(6,1)
x2 =
         -4.09413481014061
          13.5483342562954
          13.4850200598594
          6.44121071558247
         -13.4923071847226
           7.3358845464619
           15.883243834012 
```

我选择添加 A 的零空间向量的随机线性组合。看起来它给出了相同的解决方案 A*x2。

```
A*x2
ans =
                1.72502381 
```

但是当我们减去 b0 时，我们看到 x2 中较大的系数是一个问题。这些系数在那些最低有效位中有夸大的噪声，产生了一个稍微差一点的解决方案。

```
A*x2 - b0
ans =
      6.66133814775094e-16 
```

将其与其他解决方案的残差进行比较，我们发现它可以说更糟。

```
A*x0 - b0
ans =
     0

A*x1 - b0
ans =
      2.22044604925031e-16 
```

当然，因为 eps 是

```
eps
ans =
      2.22044604925031e-16 
```

这大约是我们对这个问题的希望的极限。

当然，当你有比未知数更多的方程（这里的行多于 A 中的列）并且 A 是满秩时，那么这两个解应该在数字垃圾中是相同的。这是您已阅读的内容，但这仅适用于过度确定的问题。您的问题不是过度确定，而是未确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:02:49.590

当谈到反斜杠时，我总是感到困惑。**我的补救措施是：明确**写出您要解决的方程组（至少在最小二乘意义上），然后尝试将其与文档匹配。

在您的示例中，您要解决的系统是

A * x = b0

对于这个系统，你有 7 个未知数且只有一个方程（b0 是一个标量）。[因此，正如Dennis](https://stackoverflow.com/a/15407366/1714410)所指出的那样，您的系统是未确定的，并且可以合理地期待几种不同（但等效）的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:00:23.473

您的系统非常不确定。

`A\b0`找到方程的一个解。

`pinv(A)*b0`只是找到了另一个解决方案。

两者都是正确的，但显然由于使用了不同的算法，他们找到了不同的解决方案。

您可以通过查看来检查它们是否相同

```
A*(A\b0) - A*(pinv(A)*b0) 
```

实际上为零

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:14:10.867

您的系统未确定。也就是说，有无限多的解决方案。

假设您的`A`列`m`多于行。

反斜杠运算符通过将`m`解的一些未确定分量设置为零来处理这些系统，参见。这个[来源](http://www.mathworks.com/matlabcentral/newsreader/view_thread/238504&anno=2)。

相反，`pinv`返回的 Moore-Penrose`A^+`倒数`A`很可能具有不同的零模式。

这就是为什么您在未确定的系统中存在差异`pinv`的原因。`\`对于超定系统，这些算子确实给出了相同的解决方案。

# c++ - 一遍又一遍地传递对象的替代方法

> ID：15407046
> 
> 赞同：2
> 
> 时间：2013-03-14T10:45:34.830
> 
> 标签：c++, interface, singleton, dependencies

有几个类通常是由其他类派生的。它们是用户输入接收器，如按键接收器、按键释放接收器、鼠标移动接收器等。继承自这些类的类例如是 hotkey-action，它继承自 key down 接收器和 key release 接收器，或者一个 camera-rotator，它继承自 mouse move 接收器。用户所做的输入将由另一个类转发到相应的接收器，因此任何输入接收器，例如相机旋转器，都需要在该转发类中注册自己。转发输入的类总是相同的，永远不会有两个。

当我的类的用户创建一个新的输入接收器时，一个继承自例如鼠标移动接收器的类，鼠标移动接收器需要知道转发类以便注册自己以接收鼠标输入。所以鼠标移动接收器构造函数的代码如下所示：

```
mouseMoveReceiverIF(inputforwarder* ifo)
{
    ifo.registerInputReceiver(this);
} 
```

由于很明显只有一个输入转发器，如果​​用户必须传递它不仅不那么直观，而且对于创建的每个输入接收器来说都是额外的输入。

但是，如果我将 inputforwarder 设置为单例或全局变量，以便输入接收器可以访问它而无需用户在构造函数中传递它，我就会遇到其他问题：那么用户需要知道在创建任何输入转发器之前，输入转发器必须存在。没有什么会警告他，没有什么会迫使他首先创建输入转发器。程序会简单地崩溃，因为输入接收器会尝试向不存在的输入转发器注册。那会更糟。

一个有效和正确的方法是怎样的？上述示例的替代方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:13:07.697

首先，我会质疑您是否应该向用户隐藏 InputForwarder 的实例。调用这些构造函数的用户代码正在配置系统并设置依赖关系——代码很可能*应该*明确声明这些依赖关系，即使这意味着输入额外的构造函数参数。

假设您要隐藏它，这取决于输入转发器的创建方式：

*   如果可以不带参数创建，就让它像自启动服务一样。也就是说，您有一个返回“该”实例的函数，如果在调用该函数时该实例不存在，则该函数将创建它。

*   如果它接受用户提供的参数，那么它不能是一个自启动服务。您可以提供一个由用户设置的全局“默认输入转发器实例”，然后在构造函数中检查该实例是否存在——如果它在那里注册或引发异常。

如果您担心，可测试性在这里可能不是问题。即使您有一个全局“默认”实例来隐藏普通用户的依赖项，您仍然可以拥有这样的构造函数：

```
mouseMoveReceiverIF(inputforwarder* ifo = 0)
{
    if (!ifo) {
        ifo = getDefaultIfo();
        // check for null again if necessary
    }
    ifo.registerInputReceiver(this);
} 
```

所以你可以注入任何适合测试的输入转发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:58:30.653

您可以创建一个单例输入转发器，并确保在程序启动时对其进行初始化。因此，现在任何客户端都无法在它创建之前访问它。

关于您的设计的另一件事：您可能需要考虑使用装饰器模式来专门化接收者。

**编辑：** 如果你不想要一个单例模式（因为单元测试等......），那么工厂方法就可以解决问题，比如： InputReceiverFactory.GetInputReceiver()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:01:08.177

2条建议：

1）创建一个为您创建输入转发器的初始化函数/静态类成员。这是一种很好的封装形式。

2) 使 inputforwarder 类成为具有所有静态成员和私有构造函数的静态类。如果需要初始化任何内容，您可以使用 init 类方法来完成。

希望这可以帮助。我听说静态类有时是一种不好的做法，但如果您不想恢复到函数，命名空间将是唯一的其他解决方案。（据我所知）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:49:01.217

如果我了解您的设计，您可以`inputforwarder`通过模板参与课程吗？然后你可以自动让它调用正确的转发器。

就我个人而言，我会远离单例——它们往往会使单元测试变得困难。

# javascript - 找出对象表示法的数组的长度

> ID：15407047
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:37.260
> 
> 标签：javascript, arrays, object

这是我的数组

```
var linkArray = {
boothsizeDiv_link: false,
furnishingsprovidedDiv_link: false,
electricalDiv_link: false,
rentalfurnishingsDiv_link: false,
gesgraphicsDiv_link: false,
geslaborDiv_link: false,
contractorDiv_link: false,
carpetingDiv_link: false,
boothlightingDiv_link: false,
javitsDiv_link: false,
boothsealDiv_link: false,
mannequinsDiv_link: false,
calcDiv_link: false
}; 
```

如何找出这个数组长度？我用谷歌搜索过但没有用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:49:43.827

像这样：

```
Object.keys(linkArray).length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:50:28.640

试试这个：

```
var i, length = 0;
for(i in linkArray) {
  if(linkArray.hasOwnProperty(i)) {
    length++;
  }
}

// Here you can use length 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:50:14.003

解决方案是

```
Object.getOwnPropertyNames(linkArray).length 
```

但要小心，因为这*不是*一个数组，而是一个对象。

**请注意，它不适用于 9 以下的 Internet Explorer。**

在这篇[MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)中，您可以看到如何`getOwnPropertyNames`使用。

如果您还想在不支持它的浏览器中使用它，只需在脚本的开头插入以下代码段：

```
Object.getOwnPropertyNames = Object.getOwnPropertyNames || function(obj) {
    var ownProperties = [];
    var current = '';
    for(current in obj) {
      if(linkArray.hasOwnProperty(current)) {
        ownProperties.push(current);
      }
    }
    return ownProperties;
} 
```

（我只是写了它，目前无法测试它，但它应该可以工作）

`Object.getOwnPropertyNames`使用此代码段，您可以在本机没有它的浏览器中进行模拟。

显然`getOwnPropertyNames`你也可以使用`keys`

# session - 单击时带有按钮的 Websphere Portal JSF 2 会话超时页面导致查看过期异常

> ID：15407048
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:41.230
> 
> 标签：session, jsf-2, websphere, portal, viewexpiredexception

我正在使用带有 Primefaces 3.5 的 Websphere Portal 8。要求是，当会话超时时，用户将被重定向到会话超时页面，该页面上有一个按钮，单击该按钮时会将用户带回登录页面。登录页面和会话超时页面一样包含一个 portlet——两者都在同一个 portlet 应用程序中。我正在使用 ImplicitLogoutFilter 成功重定向到会话超时页面：

```
@Override
public void logout(HttpServletRequest request, HttpServletResponse response,        FilterChainContext filterContext, LogoutFilterChain chain) throws LogoutException, LoginException {
chain.logout(request, response, filterContext);
if (filterContext.getRedirectURL() != null) {
if (logger.isLoggable(Level.FINEST)) {
logger.logp(Level.FINEST, CLASS_NAME, MethodName.LOGOUT, "Redirecting to session timeout page: " + SESSION_TIMEOUT_PAGE_URL);
}
filterContext.setRedirectURL(SESSION_TIMEOUT_PAGE_URL);
}
} 
```

会话超时页面上的 portlet 包含一个按钮，该按钮调用重定向到登录页面的 portlet 操作：

```
public void navigateToPortalPage(String pageUniqueName) throws RpmPortalException {
    final String methodName = "navigateToPortalPage";
    RpmPortalPage portalPage = getNavigationManager().getPortalPage(pageUniqueName, getPortletRequest(), getPortletResponse());
    try {
        FacesContext context = getFacesContext();
        if (context != null) {
            context.getExternalContext().redirect(portalPage.getUrl());
            context.responseComplete();
        }
    } catch (IOException e) {
        RpmExceptionUtils.logAndThrowException(CLASSNAME, methodName + "(" + pageUniqueName + ")", RpmErrorCode.RPM_CONFIG_00004, getLoggedinUser(), e);
    } 
```

}

但是，当单击按钮而不是进入登录页面时，会引发 ViewExpired 异常。此异常由异常处理程序处理，该处理程序处理异常、重定向到错误页面并向用户显示错误。

我的问题是如何在会话过期后避免 ViewExpired 异常，因为我只想能够重定向到登录页面而不会在这种情况下发生 ViewExpiredException，

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:54:48.760

> *我的问题是会话过期后如何避免 ViewExpired 异常，因为我只想能够重定向到登录页面而不会在这种情况下发生 ViewExpiredException*

只需将登录页面指定为`ViewExpiredException`.

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/login.xhtml</location>
</error-page> 
```

*（这假设您已经在 servlet 上映射了面`*.xhtml`，否则相应地进行更改）*

### 也可以看看：

*   [javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored/3642969#3642969)

# java - 将对象添加到 arrayList

> ID：15407049
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:41.263
> 
> 标签：java, arraylist

我在将对象添加到 Java 中的 arrayList 时遇到问题。运行代码时出现以下错误。这是我的两个文件的片段。如果有人指出我的错误，我将非常感激。谢谢，乔

java.lang.NullPointerException at House.addRoom(House.java:18)at House.(House.java:36)

//房间类

```
 public Room () {
    Scanner scan = new Scanner(System.in);
    scan.useDelimiter("\n");

    System.out.println("Enter description of room:");
    description = scan.next();

    System.out.println("Enter length of room:");
    length = scan.nextDouble();

    System.out.println("Enter width of room:");
    width = scan.nextDouble();
   } 
```

//家庭类

```
public class House {
  private static ArrayList<Room> abode;

   public void addRoom (){
     abode.add(new Room ());
   }
   public House () {
    idNum = ++internalCount;
    Scanner scan = new Scanner(System.in);
    scan.useDelimiter("\n");

    System.out.println("Enter address of house:");
    address = scan.next();

    System.out.println("Enter number of rooms:");
    numRooms = scan.nextInt();

    System.out.println("Enter type of house:");
    houseType = scan.next();

    for (int i=1; i<=numRooms; i++){
      addRoom();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:47:10.857

您需要在添加元素之前对其进行**初始化**`arraylist`。可能在构造函数中进行初始化

```
private static ArrayList<Room> abode;

public House()
{
 abode = new ArrayList<String>();
//rest of your code 
} 
```

顺便说一句，编写接口而不是实现总是一个好习惯：

IE， `List<Room> abode = new ArrayList<String>();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:48:15.043

您需要创建一个列表：

```
private static ArrayList<Room> abode = new ArrayList<Room>(); 
```

如果你不这样做，`abode`将会是`null`并且你会得到一个`NullPointerException`.

还有，是不是有`abode`原因`static`？这意味着它由`House`. 那是你的意图吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:51:13.403

改变这个

```
private static ArrayList<Room> abode; 
```

到

```
private static ArrayList<Room> abode = new ArrayList<Room>(); 
```

您正在尝试使用列表引用而不为其分配内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:54:11.870

乔你可以使用 List 添加数组列表

例如。ArrayList 结果 = 新 ArrayList();

列表<ResolveInfo>

进而

结果.add();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:08:12.060

Joe，首先您需要在访问任何对象的字段或方法之前创建对象。

在您的代码中，私有静态 ArrayList 住所；// 对象尚未创建

您仅声明默认指向 null 的引用。基本上，您没有在堆中分配任何内存来存储对象的状态。因此，首先您需要使用 new 运算符创建一个 ArrayList 类的对象，然后您可以对该对象执行各种操作。所以，将您的代码替换为

私有静态 ArrayList abode = new ArrayList();

# socialengine - SocialEngine 照片问题

> ID：15407052
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:49.217
> 
> 标签：socialengine

我注意到，当更改成员个人资料照片时，会自动发布一个提要，这是完美的，这个提要包含更新后的成员照片的缩略图，当点击时（我想是为了打开类似平滑盒或一些灯箱的东西预览）在新的浏览器窗口中打开并将图像直接 url 加载到浏览器窗口中。

这可能是一个错误还是只是我的安装对我不利:)。我能做些什么来解决这个问题吗？谢谢。![图像馈送的屏幕截图](../Images/4dd0be0b3c8b6960472f71b6d40d5ebb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:55:19.993

亲爱的，这不是错误，它是社交引擎的默认功能。如果您单击放大图像，它将带您到原始图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:23:48.067

我已经打补丁了。。

应用程序/模块/活动/视图/脚本/_activityText.tpl

第 126 行

```
$attribs = Array(); 
```

应该改为

```
$attribs = Array('class' => 'smoothbox'); 
```

你会让它显示在smoothbox中。

# excel - Excel VBA 错误 13 类型不匹配

> ID：15407053
> 
> 赞同：0
> 
> 时间：2013-03-14T10:45:49.343
> 
> 标签：excel, vba

我最近开始研究 VBA，但遇到了一个我无法解决的问题

我创建的宏必须复制一个文本块，它由选中的复选框触发，如果未选中该复选框，则 textblok 必须取消

这是他的代码

```
Private Sub CheckBox1_Click()

    If Sheets("Blad1").CheckBox1.Value = True Then Sheets("Blad3").Range("C2").Value = 1
    If Sheets("Blad1").CheckBox1.Value = False Then Sheets("Blad3").Range("C2").Value = 0

    If Sheets("Blad3").Range("C2").Value = 1 Then 
       Sheets("Blad1").Range("B7:B15").Value.Copy Destination = Sheets("Blad2").Range("A1:B8").Value
    End If

    If Sheets("Blad3").Range("C2").Value = 0 Then
    End If

    Application.Goto Worksheets("Blad2").[A1:A9], True
    Range("A1:A9").Clear

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:13:10.290

看起来您的代码只需要整理一下。尝试这个：

```
Private Sub CheckBox1_Click()

If Sheets("Blad1").CheckBox1.Value = True Then 
    Sheets("Blad3").Range("C2").Value = 1
Else
    Sheets("Blad3").Range("C2").Value = 0
End IF

If Sheets("Blad3").Range("C2").Value = 1 Then
  Sheets("Blad1").Range("B7:B15").Copy 
  Sheets("Blad2").Range("A1").PasteSpecial xlValues
Else
  Sheets("Blad2").Range("A1:A9").Clear
End If

End Sub 
```

# java - libgdx 中的线程和移动精灵的一般问题

> ID：15407064
> 
> 赞同：1
> 
> 时间：2013-03-14T10:46:27.273
> 
> 标签：java, android, libgdx

我正在重新组装我为 android 编写的游戏。它是用简单的画布编写的，用于学习基础知识。为了让它更上一层楼，我将在`libgdx`. 为此，我想到了一个`stage`我添加我的`Actors`（怪物，技能，如果他们是活跃的，角色，也许是粒子）到的地方。我读到这是组装 2D 游戏的好方法。

关于它的更多信息。这是一款基于正方形系统的 2D 角色扮演游戏。每一步都是下一个方块的移动。（可能是基于稍后的图块。目前背景是单张图片）

在旧版本中，我为每个怪物使用线程，这样它们就可以按照“希望”的方式处理和反应。这在 libgdx 中也是可能的还是我需要以不同的方式处理它？

如果我想将角色从一个方格移动到下一个方格，我有一个计算出的时间，我通过改变它的像素位置将精灵从一个方格移动到下一个方格。在 libgdx 中，我将有一个带有正方形作为 init 的相机。以 (40f,30f) 为例。`thread`像我在旧游戏中那样移动角色是否有效？所以我知道从一个方格到下一个方格确实需要 500 毫秒，所以每 50 毫秒 ppuX 需要为 +0.1f。我还根据它更新了精灵。因此，如果它移动得更快，精灵就会更快地改变。

我也以这种方式对技能进行了编程。例如，火球是一张由线移动直到撞到某物的图片。

参见“原型”的图片。![带有画布的原型图片](../Images/afb7e7b5424890d096a78ca1ed47dce7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:03:02.707

这可能是可能的，但是为每个实体分配一个线程是一个非常糟糕的主意 - 事实上，它非常糟糕，以至于它有一个相应的 TheDailyWTF 条目：

[http://thedailywtf.com/Articles/Sprite_Threading.aspx](http://thedailywtf.com/Articles/Sprite_Threading.aspx)

在这种方法中，您不仅会不必要地消耗资源，而且从长远来看还会危及您的理智。我相信链接条目以及评论详尽地阐述了为什么会这样。

通常，libgdx 通过[`ApplicationListener`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/ApplicationListener.html)类（特别是[`render()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/ApplicationListener.html#render%28%29)方法）支持“主循环”模型。[有许多教程](http://libgdx.badlogicgames.com/documentation.html)可以帮助您入门，[其中包括适用于 Android](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/)的教程。

我知道这种方法一开始可能看起来更受限制，但它允许更可靠的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:57:38.340

在 LibGdx 中，**[Game](https://code.google.com/p/libgdx-users/wiki/ScreenAndGameClasses)**类的**render()**方法会被连续调用。在这种方法中，你可以做 4 件事。

1) 处理输入
2) 更新精灵/演员
3) 检查碰撞
4) 渲染世界

您不需要为移动游戏对象创建单独的线程。

# linq - 结构集合的 FirstOrDefault() 结果？

> ID：15407065
> 
> 赞同：44
> 
> 时间：2013-03-14T10:46:39.023
> 
> 标签：linq, c#-4.0, struct

所以我有一个`struct`s 的集合（它实际上是一个 WCF 数据合同，但我假设这在这里没有影响）。

```
List<OptionalExtra> OptionalExtras; 
```

`OptionalExtra`是一个`struct`。

```
public partial struct OptionalExtra 
```

现在我正在运行以下语句：

```
OptionalExtra multiOptExtra = OptionalExtras.Where(w => w.Code == optExtra.Code).FirstOrDefault();
if (multiOptExtra != null)
{

} 
```

现在这不会编译：

> 运算符 != 不能应用于 OptionalExtra 类型的操作数和`'<null>'`

经过一番谷歌搜索后，我意识到这是`OptionalExtra`因为`struct`. 除非定义为可空类型，否则我认为它不可为空？

所以我的问题是，如果我的`where`语句没有返回任何结果，那么`FirstOrDefault`调用的结果是什么？它会抛出异常吗？

顺便说一句，这*永远*不会发生，但安全总比后悔好。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-14T10:49:05.093

如果您的收藏为空，`FirstOrDefault`将返回[`default(OptionalExtras)`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/default). 结构的默认值是其所有值依次默认初始化的结构（即零、空等）。

如果您假设会有一个元素并且您的代码不适用于空集合，**请使用 Use `First()`instead**，因为当您的集合为空时会引发异常。快速失败通常比返回错误数据要好。

如果你不能假设会有一个元素，也不能处理结构默认初始化，你可以将集合中的结构设置为可为[空的值类型](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-value-types)，例如如下：

```
OptionalExtras
    .Where(w => w.Code == optExtra.Code)
    .Cast<OptionalExtra?>()
    .FirstOrDefault(); 
```

这样，即使对于结构，您也可以获得 null 返回。这里的关键思想是扩展可能值的集合以包含除 an 之外的其他内容，`OptionalExtra`以允许检测空列表。如果您不喜欢可空值，则可以改用`Maybe<>`实现（不是 .NET 内置），或使用空列表或单例列表（例如`.Take(1).ToArray()`. 但是，可空结构可能是您最好的选择。

## TL;博士;

*   `.FirstOrDefault<T>()``default(T)`如果序列为空则返回
*   `.First()`如果您假设列表非空，请改用。
*   转换为可为空，然后`.FirstOrDefault<T>()`在您不能假定列表非空时使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T10:52:27.330

正如其他人所说，当没有元素匹配时，您的代码结果将是：

```
default( OptionalExtra ) 
```

如果你想返回一个空值，你可以将你的列表转换为`OptionalExtra?`

```
OptionalExtra? multiOptExtra = OptionalExtras.Cast<OptionalExtra?>().Where( ... 
```

然后你可以测试`null`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T10:54:59.007

如果`default(OptionExtra)`仍然是有效值，最好将您的代码更改为此

```
var results = OptionalExtras.Where(w => w.Code == optExtra.Code).Take(1).ToList();
if (results.Any()) {
   multiOptExtra = results[0]
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T10:49:14.127

结果将是您的结构的默认值，例如`default(OptionalExtras)`.

而对于引用类型，默认值为`null`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T10:52:59.513

它为您的结构提供默认值，如下所示

```
int[] numbers = { };
int first = numbers.FirstOrDefault();
Console.WriteLine(first);//this print 0 as output 
```

其他处理选项是使用默认值，如下所示

```
List<int> months = new List<int> { };
// Setting the default value to 1 by using DefaultIfEmpty() in the query. 
int firstMonth2 = months.DefaultIfEmpty(1).First();
Console.WriteLine("The value of the firstMonth2 variable is {0}", firstMonth2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-28T06:53:35.817

如果要检查 null，请使用 System.Nullable 集合：

```
var OptionalExtras = new List<OptionalExtra?>();
/* Add some values */
var extras = OptionalExtras.FirstOrDefault(oe => oe.Value.Code == "code");
if (extras != null)
{
    Console.WriteLine(extras.Value.Code);
} 
```

请注意，您必须使用 Value 来访问该元素。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-08-13T18:22:32.897

假设出于我的回答目的 Code 是一个字符串，您应该能够测试该值的默认值。

```
OptionalExtra multiOptExtra = OptionalExtras.Where(w => w.Code == optExtra.Code).FirstOrDefault();
if (multiOptExtra.Code != null)
{

} 
```

# c# - 将sql函数转换为c#

> ID：15407067
> 
> 赞同：3
> 
> 时间：2013-03-14T10:46:40.500
> 
> 标签：c#, asp.net, sql-server-2008

大家好，我有一个 sql 函数，其中一部分用于将 varchar 转换为 datetime：

```
IF @dt IS NULL
    SET @dt = GETDATE();

SET @PDate = CONVERT(DATETIME, @PValue + '-' + CONVERT(NVARCHAR(4),YEAR(@dt))); 
IF @PDate > @dt
    SET @Year = YEAR(@dt) - 1;
ELSE
    SET @Year = YEAR(@dt);

RETURN (SELECT CONVERT(DATETIME, @PValue + '-' + CONVERT(NVARCHAR(4),@Year))); 
```

有人能帮我吗？

我的价值`@PValue`是`01-APRIL`。

我只是在我的 C# 代码中声明 Datetime 如下：

```
DateTime? dt=null;

if(!(dt.HasValue))
    dt=DateTime.Now; 
```

但在此之后，我很困惑做剩下的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:50:59.880

您可以使用年份字段来正确转换，我看不出`01-APRIL`这是一个有效的日期。`01-APRIL`什么时候？获得有效的结构化日期时间后，您的`C#`代码将显示为：

```
string pValue = @"01/04";
DateTime dt = new DateTime();
DateTime now = DateTime.Now;
pValue += string.Format(@"/{0}", now.Year);
int year = 0;
if (DateTime.TryParse(pValue, ref dt))
{
  if (dt > now)
    year = dt.Year -1
  else
    year = dt.Year;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:57:23.053

像下面的东西

```
DateTime? dt = null;
        int pYear = 2012; // assuming pYear is getting populated from somewhere
        int finalYear = 1900; // initilizing some value to it;
        if (!(dt.HasValue))
            dt = DateTime.Now;
        var year = dt.Value.Year;
        var pValue = "1-Apr";
        if (pYear > year)
            finalYear = pYear - 1;
        else
        {
            finalYear = year;
        }

        return pValue + finalYear.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:50:02.120

如果要将字符串转换为日期，则应使用该`DateTime.Parse`方法。您可能应该将参数声明为 a `string`，而不是`DateTime?`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:51:14.247

只需调用`DateTime.Parse`or `DateTime.ParseExact`，永远不要自己解析日期，因为您的实现中会有错误。这是人生的必然之一，就像死亡和税收一样。

如果您使用`Parse`并且`ParseExact`不确定指定 a`CultureInfo`因为`03/06/99`如果当前语言环境是英语（美国）而不是英语（英国），则解析方式会有所不同。

# xamarin - xamarin Android Visual Studio 调试慢

> ID：15407070
> 
> 赞同：11
> 
> 时间：2013-03-14T10:46:46.767
> 
> 标签：xamarin

刚刚开始使用提供的任务解决方案 (android) 试用 Xamarin。单步执行代码很慢。这是因为模拟器还是一般的 Xamarin？人们是否使用真实设备进行调试？

非常感谢

尼尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T14:40:06.573

模拟器通常非常慢。

为了获得更好的体验，请尝试使用英特尔仿真器 - [http://docs.xamarin.com/guides/android/deployment,_testing,_and_metrics/configuring_the_x86_emulator](http://docs.xamarin.com/guides/android/deployment,_testing,_and_metrics/configuring_the_x86_emulator) - 但这些仍然不如真实设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-10T13:02:51.317

截至 2015 年 5 月，在模拟器上调试 Xamarin Android 应用程序不再缓慢 - 事实上，如果使用正确的工具并正确配置它，它与真实设备非常相似。

*   [Xamarin Android Player](https://developer.xamarin.com/guides/android/getting_started/installation/android-player/)提供了一个在 VirtualBox 中运行的超快虚拟机映像。
*   [英特尔正在提供特殊图像](https://developer.xamarin.com/guides/android/getting_started/installation/accelerating_android_emulators/)来运行具有特殊图像的模拟器，并且当打开“使用主机 GPU”时，它运行得非常快。

![Xamarin Android Player 正在运行（左）。 正确配置了使用 Intel Image 和主机 GPU 的 Android 虚拟设备（右）。](../Images/eb5e05b1262b0213c4201809f07af037.png)

我意识到的唯一区别是 Xamarin Android Player 稍微快一些，尤其是在部署应用程序和附加调试器时（这使得它优于标准模拟器，否则它也可以正常工作）。

顺便说一句：您绝对应该在 Visual Studio 中启用快速部署：

![在此处输入图像描述](../Images/9fad99d07ed8ab1a432ea31db514a5a1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:24:24.797

速度取决于您的开发设备性能。通过真正的 android 设备进行调试可以为您提供**更快的**步骤。虽然如果我要解决的问题不在 UI 层（我的项目通常由两个项目组成 - UI 和工作层），我使用的是简单的控制台应用程序，并在带有工作层的 dll 上引用，并简单地使用 UI 卸载项目。

我正在使用 Visual Studio 12，它尖叫着引用的 .dll 并不完全受支持，但它可以像在普通控制台应用程序中一样完美且超快地运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T16:36:32.543

我目前正在使用 Xamarin Studio。在项目设置中，您可以找到一种比部署到设备更快的构建和部署方法，但**仅适用于调试模式**。

在**Xamarin Studio**中，右键单击您的 Android 项目并转到*Options*。在那里，在*Build*组中，转到*Android Build*。在*Packaging*选项卡中，确保选中“ *Use shared mono runtime* ”和“ *Fast assembly deployment ”。*它在不到 8 秒的时间内为我构建！

它也适用于**Visual Studio**：右键单击您的 Android 项目并转到*Properties*。在*Android 选项*部分，确保您已选中“*使用共享单声道运行时*”和“*快速程序集部署（仅限调试模式） ”。*我刚刚测试了我的解决方案，它的运行速度似乎和在 Xamarin 工作室中一样快。

正如我所提到的，我实际上只使用 Xamarin Studio，而且速度非常快。显然，如果您第一次部署到 AVD（Android 虚拟设备 = 模拟器）将花费更多时间，因为共享单声道运行时也将被部署，但连续的将是闪电般的速度！:)

还要记住仅将这种快速部署用于调试，而不是用于发布模式。我已经使用运行 Android 2.3 的 AVD 和运行 Android 4.0.3 的 AVD 进行了测试，然后两者都按预期工作。这种对 AVD 的部署配置比我测试过的任何设备都快，但它似乎只能在模拟器中工作，而不是在我的测试设备中。在我的设备中，应用程序一打开就停止响应。

如果它适合您，请不要忘记在这里发表评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-01T18:38:28.407

是的，我使用所有旧设备和当前设备进行调试。出于多种原因，它更好。一，模拟器很棒，但你永远不知道应用程序的真实外观和感觉，直到你在设备上测试它。有时，仿真器绘制的内容与真实屏幕上显示的内容并不完全相同。此外，如果您使用 android 提供的外部应用程序，例如拨打电话、发送电子邮件，您将需要一个真实的设备。然而，话虽如此，模拟器是一个很好的开始和开始的地方。一个提示是，如果您正在执行大量后续测试/错误修复，一旦您运行模拟器，就永远不要关闭它。这样，您的模拟器已经加载到计算机的内存中，并且每次都没有重建它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T13:11:46.747

考虑使用**Genymotion**：[https ://www.genymotion.com/](https://www.genymotion.com/)

或**Xamarin Android 播放器**：[https ://developer.xamarin.com/guides/android/getting_started/installation/android-player/](https://developer.xamarin.com/guides/android/getting_started/installation/android-player/)

它们更快，我们其他一些人建议在您的设置中选择使用**快速部署**

# java - 静音打印机程序

> ID：15407071
> 
> 赞同：1
> 
> 时间：2013-03-14T10:46:56.460
> 
> 标签：java

我正在使用 java 编写一个 java 打印程序。我想将 pdf 文件发送到打印机中的不同托盘，我需要控制页面范围。我不喜欢将 printdialogbox 打印出来。这个程序是一个无声的打印机程序，所以我必须自动运行这个打印程序

```
PageFormat format = job.defaultPage();
format.setOrientation(PageFormat.PORTRAIT); 
printRequestAttributeSet.add(printerTray);
printRequestAttributeSet.add(Sides.ONE_SIDED);

PageFormat pf = job.defaultPage();
Paper paper = new Paper();
double margin = 36; // half inch
paper.setImageableArea(margin, margin, paper.getWidth() - margin*2, paper.getHeight()   - margin*2);
pf.setPaper(paper);`enter code here`

job.setPrintable(new MyPrintable(), pf);

PdfReader pdfReader = new PdfReader();
PDDocument document = pdfReader.loadPdf(pdfPath);

job.setPageable(document);
int firstno;
int LastNo;

printRequestAttributeSet.add(new PageRanges(firstno, LastNo));

//job.printDialog(printRequestAttributeSet);

job.print();// 
```

我在运行这段代码时遇到了一些问题。我无法设置`AttributeSet`，所以它没有发送到我要发送的托盘，它是自动发送的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:05:51.587

我相信它可能很简单：

```
job.print(printRequestAttributeSet); 
```

[参考](http://docs.oracle.com/javase/7/docs/api/java/awt/print/PrinterJob.html#print%28javax.print.attribute.PrintRequestAttributeSet%29)。

# xcode - 初学者如何学习为 OS X 构建 Google Tasks 客户端？

> ID：15407072
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:46:56.847
> 
> 标签：xcode, macos, desktop-application, google-tasks-api

我真的希望有一个适用于 OS X 的谷歌任务应用程序。提醒不适用于谷歌任务。有一个可用的 GTasks API，所以它可以完成，对吧？我一生中从未编写过代码。我现在正在下载 Xcode。我想要一个桌面应用程序，我愿意学习，你能给我指明一个好的方向吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:04:28.797

开始寻找 xcode 教程并编写大量示例程序。编写谷歌任务应用程序是开始编程的错误方式。

也许您可以使用 Google Chrome 的“any.Do”来同步您的 Google 任务

# git - 我如何使用 git bisect 找到第一个 GOOD 提交？

> ID：15407075
> 
> 赞同：106
> 
> 时间：2013-03-14T10:47:09.063
> 
> 标签：git, bisect

我有以下问题：

*   `master`工作正常的版本
*   之前的最后一个标签的版本`master`（比如`last`）有一个错误
*   一位同事需要一个补丁来`last`修复那个特定的错误

好的。让我们向我们的朋友询问`git bisect`修复该错误的修订版：

```
git bisect start
git bisect bad last
git bisect good master 
```

但这行不通：

> 一些好的转速不是坏转速的祖先。
> git bisect 在这种情况下无法正常工作。
> 也许你误会了好转速和坏转速？

有什么提示可以克服这个吗？我错过了文档中的某些内容吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-06-17T17:45:42.753

从 git 2.7 开始，您可以使用参数 --term-old 和 --term-new。

例如，您可以这样识别问题修复提交：

```
git bisect start --term-new=fixed --term-old=unfixed
git bisect fixed master
git bisect unfixed $some-old-sha1 
```

当你测试时，说`git bisect fixed`或`git bisect unfixed`酌情。

**旧答案，适用于 2.7 之前的 git 版本**

与其暂时训练自己认为坏就是好，好就是坏，为什么不创建一些别名呢？

添加`~/.gitconfig`以下内容：

```
[alias]
        bisect-fixed = bisect bad
        bisect-unfixed = bisect good 
```

您可以开始识别问题修复提交：

```
$ git bisect start
$ git bisect-fixed master
$ git bisect-unfixed $some-old-sha1 
```

当你测试时，说`git bisect-fixed`或`git bisect-unfixed`酌情。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-03-14T10:53:00.157

我只会“欺骗” git 并交换好 <=> 坏的含义。

换句话说，将“坏”视为没有表现出问题的东西，因此这不是您的补丁所基于的“好”版本。

不管怎样，好与坏都是相当主观的概念，对吧？:)

```
git bisect start
git bisect good last
git bisect bad master 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-03-22T14:54:13.403

如果您`git bisect run`像我一直在使用 Perl 的`prove`命令（运行自动测试）一样使用，那么您就没有机会交换`good`和`bad`. 测试成功将报告为退出代码。

我找到了一个有效的 Bash 语法来否定程序运行的退出代码`git bisect run`：

```
git bisect start
git bisect bad HEAD                 # last revision known to PASS the tests
git bisect good $LAST_FAIL_REVISION # last revision known to FAIL the tests
git bisect run bash -c "! prove" 
```

这给了我第一个*通过*`prove`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-12-25T16:21:20.483

Git 现在允许您使用`old`并且`new`无需先定义它们。您必须在`git bisect start`没有提交的情况下调用作为进一步的参数，然后通过调用正确开始二分

```
git bisect old <rev>
git bisect new <rev> 
```

[https://git-scm.com/docs/git-bisect#_alternate_terms](https://git-scm.com/docs/git-bisect#_alternate_terms)

这基本上是@MarcH 建议应该实施的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-19T00:07:44.177

Git 别名是个好主意，但是术语`fixed`和 与 和有`unfixed`相同的问题：你不能让它们与**回归**和进展兼容。很容易找到适用于任何一种方式的单词：只需从原始的二分搜索术语中挑选它们，该术语本质上是中性的，没有先入为主的好坏。例如：`good``bad`

 **```
git config --global alias.bisect-high 'bisect bad'
git config --global alias.bisect-low  'bisect good' 
```

使用这样的中性术语，您始终可以输入：（`git bisect-high`或`git bisect-upper`，或`git-bisect max`，...您的选择！）*无论您是在寻找回归还是修复*。

太糟糕了 git bisect 开发人员不能简单地重用任何现有的术语。一般来说，用户界面不是 git 关心的问题：http: [//stevebennett.me/2012/02/24/10-things-i-hate-about-git/](http://stevebennett.me/2012/02/24/10-things-i-hate-about-git/)**

# xna - 如何在我的 PC 上不注册 Xbox360 kinect 的情况下开发 XNA 项目

> ID：15407084
> 
> 赞同：0
> 
> 时间：2013-03-14T10:47:30.190
> 
> 标签：xna, kinect, xbox360

我想开发一个 XNA 项目来创建增强现实。我有 xbox360 Kinect 传感器，但是当我尝试调试它时，它给了我一个错误消息：- 错误 1 ​​没有可用于部署项目“Xbox360Game1”的设备。使用 XNA Game Studio 设备中心注册设备。我是做错了什么，还是我需要一个游戏机来调试项目，或者仅使用 Kinect 传感器和 Visual Studio 来调试项目是不可能的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:27:35.110

听起来您创建了一个 Xbox 360 游戏项目，而不是一个 Windows 游戏项目。

快速的解决方案是在解决方案资源管理器中右键单击您的游戏项目，然后选择“为 Windows 创建项目副本”。这将为您提供一个针对 Windows 的重复同步项目。

我不确定这如何与 Kinect 交互。您可能需要修复一些参考资料或其他内容。

# heroku - redis 数据库的连接数是什么意思？

> ID：15407086
> 
> 赞同：2
> 
> 时间：2013-03-14T10:47:34.840
> 
> 标签：heroku, redis, redistogo

在 heroku 中，每个 redis 提供者（myredis、redistogo、redisgreen、openredis）为他们提供的每个计划指定到 redis 实例的连接数。

这个数字是什么意思？是连接到实例的网络服务器数量还是使用 web 应用程序并更改数据的最终用户数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:18:11.430

> 这个数字是什么意思？是连接到实例的网络服务器的数量吗？

它是连接到 Redis 的套接字数。Redis 客户端库可以使用一个套接字或一[组套接字（也称为连接）](https://groups.google.com/forum/?fromgroups=#!topic/redis-db/GtuT8LahRgo)连接到 Redis 。所以真正重要的是**同时通过 Redis 连接了多少个套接字**。

要获取有关谁连接到您的 Redis 数据库的更多信息，请使用[CLIENT LIST](http://redis.io/commands/client-list) (v2.4.0+) 命令，您应该得到如下信息：

```
redis 127.0.0.1:6379> client list
addr=127.0.0.1:37219 fd=6 name= age=672320 idle=216 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=info
addr=10.90.20.10:6379 fd=7 name= age=665888 idle=2 flags=M db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=exec
addr=10.90.20.12:42266 fd=5 name= age=325274 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=evalsha
addr=127.0.0.1:51897 fd=8 name= age=3447 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=client 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:13:09.060

大多数数据库适配器都会创建一个连接到它们可以使用的数据库的“池”。

Heroku 最近的这篇文章[https://devcenter.heroku.com/articles/concurrency-and-database-connections](https://devcenter.heroku.com/articles/concurrency-and-database-connections)比我更详细地解释了它。

# javascript - form.submit() 方法中的 setTimeout 不起作用

> ID：15407091
> 
> 赞同：2
> 
> 时间：2013-03-14T10:47:44.967
> 
> 标签：javascript, jquery

我正在尝试`setTimeout()`表单提交中的功能。然而，在执行该函数之前，表单被提交并且超时函数内的任何内容都没有被执行。下面是代码片段。

```
$(window).load(function () {
     $("#myform").submit(function() {
          setTimeout(function(){
               alert("me after 1000 mili seconds");
               return false;              
          }, 1000);

    });
}; 
```

请帮助我如何解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:53:00.890

```
$(window).load(function () {
     var submit = false;
     $("#myform").submit(function(e) {
          setTimeout(function(){
              alert("me after 1000 mili seconds");
              submit = true;
              $("#myform").submit(); // if you want            
          }, 1000);
          if(!submit)
              e.preventDefault();
     });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:51:28.937

表格正在立即提交。您需要委托默认操作。这应该适合你：

```
$(window).load(function () {
     $("#myform").submit(function(e) {
          e.preventDefault();

          setTimeout(function(){
              alert("me after 1000 mili seconds");
          }, 1000);
    });
}); 
```

请看这个[**jsFiddle 演示**](http://jsfiddle.net/cuGSu/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:51:14.663

如果您想禁用表单上的提交操作，您可以尝试：

```
$(window).load(function () {
     $("#myform").submit(function(e) {
          e.preventDefault();
          setTimeout(function(){
          alert("me after 1000 mili seconds");
          return false;

        }, 1000);

    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:53:31.827

首先你忘记`)`了最后一行的右括号

```
$(window).load(function () {
     $("#myform").submit(function(e) {
          e.preventDefault();
          setTimeout(function(){
          alert("me after 1000 mili seconds");
          return false;

        }, 1000);

    });
});
 ^---- here you forgotten to put brace. 
```

# c# - 用于 SQL 的 LINQ 表达式中的空值检查

> ID：15407092
> 
> 赞同：3
> 
> 时间：2013-03-14T10:47:46.067
> 
> 标签：c#, linq, linq-to-entities, expression, automapper

我的任务是为 Automapper 创建 LINQ 表达式，它必须能够转换为 SQL 表达式。这意味着没有方法调用，这是我遇到问题的地方。

我有两列感兴趣的记录 -`ProposedStartDate`和`ActualStartDate`. 我想获取`ActualStartDate`它是否存在，如果为 null 然后获取`ProposedStartDate`.

```
 .ForMember(d => d.StartDate, opt => opt.MapFrom(s => (from foo in s.foo
                                                           orderby foo.ProposedStartDate ascending
                                                           select foo.ProposedStartDate).LastOrDefault())) 
```

到目前为止，我在那里，但不确定如何检查空值并`ActualStartDate`以安全的方式拉出。任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T10:55:51.807

只需使用`??`运算符。它在 sql 端被翻译成 COALESCE

```
.ForMember(d => d.StartDate, opt => opt.MapFrom(s => (from foo in s.foo
                                                      orderby foo.ActualStartDate??foo.ProposedStartDate ascending
                                                      select foo.ActualStartDate??foo.ProposedStartDate).LastOrDefault())) 
```

# android - android，UI可绘制和内存消耗之间的关系

> ID：15407095
> 
> 赞同：1
> 
> 时间：2013-03-14T10:47:53.347
> 
> 标签：android, memory-management, user-interface

我的应用在没有 UI 的情况下会消耗 10M 内存。给它添加 UI 后，它会消耗大约 25M 的内存。有时这会导致崩溃。用作背景、按钮等的图像是由 Photoshop 制作的。我想知道内存消耗与图像质量和大小之间的关系。例如：当前背景的分辨率是400x600，磁盘60kb，哪一个会减少内存使用？

1.  把它的分辨率变小，比如 40x60，让它伸展。
2.  降低质量以使此图像文件的大小更小，例如 10kb。

我不知道降低图像文件的质量是否会影响内存使用。如果android将图像传输到位图？如何决定图片资源的大小和分辨率。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:01:42.267

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)。从阅读链接开始

上面的链接让您了解如何有效地加载位图。尝试在不使用时回收位图。

使用 MAT Analyzer 查找内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。链接中的视频讨论了内存管理以及如何查找和消除内存泄漏。

内存泄漏可能还有其他原因。减少使用静态变量（不推荐使用静态变量）。您可能应该尽可能尝试使用 Application Context 而不是 Activity 上下文（这并不总是可能的）。

如果没有代码，社区将无法找到内存泄漏的实际原因。 [要考虑的性能提示。](http://developer.android.com/training/articles/perf-tips.html)

# sharepoint - 将 Web 控件添加到 sharepoint 2013 中的母版页

> ID：15407100
> 
> 赞同：3
> 
> 时间：2013-03-14T10:48:08.473
> 
> 标签：sharepoint, sharepoint-2013

我正在尝试将 SharePoint 网站从 2010 升级到 2013 版本。

我的母版页中有一个 Web 控件，我真的无法在 sharepoint 2013 中工作。

我在类文件中构建了 Web 控件并将 dll 部署到 Web 应用程序，因此它出现在 C:\inetpub\wwwroot\wss\VirtualDirectories\80\bin

然后我编辑了在页面顶部添加的默认母版页。

`<!--SPM:<%@ Register TagPrefix="Gnie" Namespace="GNIE.SharePoint.Core.Branding"Assembly="GNIE.SharePoint.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=aad712380eccafda" %>-->`

我已将控件添加到母版页

`<div> <!--SPM:<Gnie:TaxonomyNavigationControl ID="taxnav" ListName="Documents" FieldName="Technical Document Type" runat="server" />--> </div>`

Web控件代码相当标准

```
namespace GNIE.SharePoint.Core.Branding

{
    [DefaultProperty("Text")]

[ToolboxData("<{0}:TaxonomyNavigationControl runat=server></{0}:TaxonomyNavigationControl>")]

public class TaxonomyNavigationControl : WebControl

/*code here */

}` 
```

当我尝试在 sharepoint 中查看页面时，出现错误提示 Unknown server tag 'Gnie:TaxonomyNavigationControl'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T08:52:40.907

尝试替换：

```
<!--SPM:<Gnie:TaxonomyNavigationControl ID="taxnav" ListName="Documents" FieldName="Technical Document Type" runat="server" />--> 
```

和：

```
<!--MS:<Gnie:TaxonomyNavigationControl ID="taxnav" ListName="Documents" FieldName="Technical Document Type" runat="server" >-->
<!--ME:<Gnie:TaxonomyNavigationControl>--> 
```

# objective-c - 检测 iPhone 同步的事件

> ID：15407105
> 
> 赞同：3
> 
> 时间：2013-03-14T10:48:15.983
> 
> 标签：objective-c, ios4, event-handling

我正在创建一个应用程序来编辑 iPhone 相机胶卷和照片库中的图像。由于我的应用程序的设计方式，我无法启用自动同步。

**我的问题是，是否有一个委托/事件处理程序在 iTunes 同步开始和结束时触发？**我打算在同步开始时冻结我的应用程序，并在同步结束时刷新我的应用程序。

我正在使用运行 iOS 5.1 的 iPhone 4.0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:11:16.743

据我所知，没有发布设备同步操作的通知，但是您可以收听发布的通知`ALAssetsLibrary`，您可以使用这些通知来获取您想要的内容。

相关文档：http: [//developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722-CH1-DontLinkElementID_3](http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722-CH1-DontLinkElementID_3)

# php - 单击按钮时添加要搜索的字段

> ID：15407107
> 
> 赞同：1
> 
> 时间：2013-03-14T10:48:24.357
> 
> 标签：php, html, mysql

我已经为两种形式编码。第一个表单是在提交时向第二个表单添加字段。第二种形式将根据该形式中的字段生成查询。代码在这里

```
<?php
$i=0;
print '<form action="search.php" method="post" ><input name="ad_field_button" type="submit" value="Add Field" /></form>';
print '<form action="results1.php" method="post" style="width:550px">';
print '<table border="0"><tr><td>';
print 'Field Name <select name="field_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="Id" name="id'.$i.'">Id</option>
      <option id="Name"  name="name'.$i.'">Name</option>
      <option id="Nick Name" name="nickname'.$i.'">Nick Name</option>
      <option id="Pet" name="pet'.$i.'">Pet</option>
      <option id="Disease" name="disease'.$i.'">Disease Associated</option>
</select></td>';
print '<td>Operator <select name="operator_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="Equal" name="equal'.$i.'">=</option>
      <option id="Gthan" name="gthan'.$i.'">></option>
      <option id="Lthan"  name="lthan'.$i.'"><</option>
      <option id="Like" name="like'.$i.'">LIKE</option>
</select></td>';
print ' <td>Query <input name="ad_search_query'.$i.'" type="text" /></td>';
print ' <td>Condition <select name="cond_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="And" name="and'.$i.'">AND</option>
      <option id="Or" name="or'.$i.'">OR</option>
</select></td></tr>';
if(isset($_POST["ad_field_button"]))
{
$i++;
print '<tr><td>';
print 'Field Name <select name="field_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="Id" name="id'.$i.'">Id</option>
      <option id="Name"  name="name'.$i.'">Name</option>
      <option id="Nick Name" name="nickname'.$i.'">Nick Name</option>
      <option id="Pet" name="pet'.$i.'">Pet</option>
      <option id="Disease" name="disease'.$i.'">Disease Associated</option>
</select></td>';
print ' <td>Operator <select name="operator_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="Equal" name="equal'.$i.'">=</option>
      <option id="Gthan" name="gthan'.$i.'">></option>
      <option id="Lthan"  name="lthan'.$i.'"><</option>
      <option id="Like" name="like'.$i.'">LIKE</option>
</select></td>';
print ' <td>Query <input name="ad_search_query'.$i.'" type="text" /></td>';
print ' <td>Condition <select name="cond_list'.$i.'" size="1"><option selected="selected">Select...</option>
      <option id="And" name="and'.$i.'">AND</option>
      <option id="Or" name="or'.$i.'">OR</option>
</select></td>';
}
print '</table>';
print ' <input name="ad_s_button" type="submit" value="Search" />';
print '</form>';
?> 
```

这是我的两种形式的工作代码。但第一种形式只工作一次。它只是将一个字段添加到两个字段中。当我单击添加第三个字段时，它不起作用。这可能是什么问题和解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:51:35.323

我想它只能工作一次，因为您正在重用 ID。

[ID**必须**是唯一的。](http://www.w3.org/TR/html5/dom.html#the-id-attribute)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:52:11.947

你在做什么如下，

过帐第一个表单，然后设置过帐值 ( `if(isset($_POST["ad_field_button"]))`)。

现在，当您再次发布表单时，旧值将根据其性质消失。

你可以做什么。

1.  通过on 按钮在每次页面加载时使用`session`和存储值。`SESSION``click`
2.  用于`mysql`将数据添加到表中，并在页面加载时从表中获取数据并显示它。
3.  你可以利用`client-side language`（即jQuery，javascript）

**会话示例**

```
<?php session_start(); ?>

<form action="" method="post">
    //fields goes here
    <?php
        if(FORM IS POSTED)
        {
            if(isset($_SESSION['counter']) && $_SESSION['counter'] != "")
            {
                $_SESSION['counter'] = $_SESSION['counter'] + 1;
            }
            else
            {
                $_SESSION['counter'] = 1;
            }
        }

        for($i=0;$i <= $_SESSION['counter'];$i++)
        {
            //repeat fields here
        }
    ?>

</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:10:45.267

您的解决方案是通过新行请求传递当前行数：

```
<?php
$i=0;
$maxid = isset($_POST['max_id'])?$_POST['max_id']+1:0;
print '<form action="search.php" method="post" ><input type="hidden" name="max_id" value="' . $maxid . '" /><input name="ad_field_button" type="submit" value="Add Field" /></form>';
print '<form action="results1.php" method="post" style="width:550px">';
print '<table border="0">';
for($i=0;$i<=$maxid;$i++){
    print '<tr><td>';
    print 'Field Name <select name="field_list['.$i.']" size="1"><option selected="selected">Select...</option>
          <option id="Id" value="id">Id</option>
          <option id="Name" value="name">Name</option>
          <option id="Nick Name" value="nickname">Nick Name</option>
          <option id="Pet" value="pet">Pet</option>
          <option id="Disease" value="disease">Disease Associated</option>
    </select></td>';
    print '<td>Operator <select name="operator_list['.$i.']" size="1"><option selected="selected">Select...</option>
          <option id="Equal" value="equal">=</option>
          <option id="Gthan" value="gthan">></option>
          <option id="Lthan"  value="lthan"><</option>
          <option id="Like" value="like">LIKE</option>
    </select></td>';
    print ' <td>Query <input name="ad_search_query['.$i.']" type="text" /></td>';
    print ' <td>Condition <select name="cond_list['.$i.']" size="1"><option selected="selected">Select...</option>
          <option id="And" value="and">AND</option>
          <option id="Or" value="or">OR</option>
    </select></td></tr>';
}
print '</table>';
print ' <input name="ad_s_button" type="submit" value="Search" />';
print '</form>';
?> 
```

另请注意，`<option>`标签不能有`name`属性——它们有值。您通过获取`<select>`元素的值来访问该值。

# flash - Flash CS6 AS2 获取 URL GET 请求的内容

> ID：15407109
> 
> 赞同：0
> 
> 时间：2013-03-14T10:48:40.543
> 
> 标签：flash, url, get, actionscript-2

我正在尝试在 Flash AS2 中发送 GET 请求，但似乎找不到有关如何返回 URL 内容的任何信息。

该 URL 将返回没有任何 HTML 标记的纯文本，因此 URL 的 HTML 代码看起来就像纯文本`Plain text like this`。我希望它作为字符串返回。

所以像：[http://www.example.com/?name=John&age=19](http://www.example.com/?name=John&age=19)会返回`Submitted`。

我需要将字符串用作 AS2 中的条件语句，例如：

```
if(returnedVal == "Submitted"){
 nextFrame();
} else {
 error_message._visible = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:01:14.583

```
var foo:LoadVars = new LoadVars();

foo.onData = function(value:String) {
    if (value != undefined) {
        trace(value);
    }
};

foo.name = "John";
foo.age = 19;
foo.sendAndLoad("content.txt", foo, "GET"); 
```

# php - 将静态变量用于全局配置参数的缺点

> ID：15407115
> 
> 赞同：1
> 
> 时间：2013-03-14T10:48:48.150
> 
> 标签：php, symfony

我知道还有其他方法可以存档，但问题是......**这是关于以下内容的缺点**：

**MyGlobalConfig.php**

```
<?php

namespace Acme\DemoBundle;

class MyGlobalConfig
{
    public static $uploadsDir;
} 
```

**应用内核.php**

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;
use Acme\DemoBundle\MyGlobalConfig;

class AppKernel extends Kernel
{
    public function __construct($environment, $debug)
    {

        MyGlobalConfig::$uploadsDir = __DIR__ .'/../uploads';

        parent::__construct($environment, $debug);
    } 
```

**文章.php**

```
<?php

namespace Acme\DemoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Acme\DemoBundle\MyGlobalConfig;

/**
 * @ORM\Entity
 */
class Article
{
    protected function getUploadsDir()
    {
        return MyGlobalConfig::$uploadsDir;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:08:14.290

1.  不可测试的代码，因为要测试任何正在使用的类，您需要为它们提供带有值的 MyGlobalConfig，但很快您就会注意到，如果 ClassA 收到与 ClassB 不同的配置值，这将非常有用，因此您开始创建工作-周围的那些。或者classA用测试值污染全局状态，而ClassB需要原始值。等等。你继续在圈子里跑来跑去。

2.  不可重用的代码，您所有的配置使用者都依赖于相同的，可能是整体的类。您不能在不使用整体类的情况下取出配置使用者。

3.  全局状态，即可以从任何地方修改，没有任何痕迹，因此完全不可预测和脆弱。

4.  不太清晰的代码

可能我忘记了一些......它基本上是伪装的全局变量。只有常量在全局范围内是可以的，因为它们是不可变的，但即便如此，许多开发人员还是将太多的常量用于他们不应该使用它们的东西。

# haskell - Haskell 中的轮换参数

> ID：15407117
> 
> 赞同：5
> 
> 时间：2013-03-14T10:48:50.777
> 
> 标签：haskell, functional-programming, rotation

Haskell 中的`flip`函数用于切换函数前两个参数的位置：

```
flip :: (a -> b -> c) -> b -> a -> c
flip f y x = f x y 
```

同样，我们可以编写一个函数来旋转三个参数：

```
rot :: (a -> b -> c -> d) -> b -> c -> a -> d
rot f y z x = f x y z 
```

这个概念可以扩展到包含任意数量参数的函数吗？

给定一个类型的函数，`a -> ... -> z`是否可以编写以下类型的函数？

```
(a -> ... -> z) -> ... -> a -> z 
```

我知道`->`运算符是右结合的。因此`... -> z`不能拆分。不过，我很想知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T10:57:03.457

你是对的，你不能这样做。您必须针对任意数量的参数进行模式匹配，而且没有办法做到这一点。

您可以使用 Template Haskell 为不同的 arities 生成一组旋转函数，但您总是必须提前决定要生成多少个，它不是一个真正的通用函数，只是编写它们的快捷方式。

如果你的函数碰巧将它们的参数作为列表（eew），你可以做类似的事情，但这也有一个明显的缺点，即要求参数类型是同质的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T01:38:55.570

好吧，从技术上讲`rot`，可以（但可能不应该）使用`IncoherentInstances`扩展来实现：

```
{-# LANGUAGE MultiParamTypeClasses, TypeFamilies,
  FlexibleInstances, FlexibleContexts,
  UndecidableInstances, IncoherentInstances #-}    

class Rotable a r where
    rot :: a -> r

instance (r ~ (b -> a -> c)) => Rotable (a -> b -> c) r where
    rot = flip

instance (Rotable (a -> c -> d) r', r ~ (b -> r')) => Rotable (a -> b -> c -> d) r where
    rot f b = rot (`f` b) 
```

使用示例：

```
*Main> rot (-) 1 2
1
*Main> :t rot foldr
rot foldr :: b -> [a] -> (a -> b -> b) -> b
*Main> :t (rot . rot) foldr
(rot . rot) foldr :: [a] -> (a -> b -> b) -> b -> b
*Main> (rot . rot) foldr [1..5] (+) 0
15 
```

# date - 从特定的 CSV 文件创建 Highchart 图表

> ID：15407118
> 
> 赞同：0
> 
> 时间：2013-03-14T10:48:52.247
> 
> 标签：date, csv, import, highcharts, temperature

我是使用 php/jscript/etc 的新手。目前我在气象站工作，使用 Arduino 将数据保存在 CSV 文件中。看起来像：

> 1,25.65
> 
> 2,25.44
> 
> 3,24.81
> 
> 4,25.55
> 
> 6,24.56

我已经阅读了如何在 Highchart 中使用 CSV 文件，其中标题行包含类别，其余行包含名称在第一个位置的数据。

但我想在脚本中命名类别（X 时间，Y 温度）。第一个位置是时间，休息是数据。

我正在尝试来自这个站点的脚本，但是在我将它们放入我的 htm 后它都是空白的 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T18:46:29.007

试试这个：

```
var series = {
    data: []
};

$(document).ready(function() {
    var options = {
        chart: { renderTo: 'container', defaultSeriesType: 'line' },
        title: { text: 'Chart Example' },
        xAxis: { title: { text: 'Time' }, categories: []    },
        yAxis: { title: { text: 'Temperature'    } },
        series: []
    };
    $.get('data.csv', function(data) {
        var lines = data.split('\n');
        $.each(lines, function(lineNo, line) {
            var items = line.split(',');

            $.each (items, function(itemNo, item) {
                if (itemNo == 0) {
                    options.xAxis.categories.push(item);
                }
                else {
                    series.data.push(parseFloat(item));
                }
            });                    
        });
        options.series.push(series);
        var chart = new Highcharts.Chart(options);
    });
}); 
```

其中 'container' 是一个 div，并且`data.csv`是包含您的数据的文件（与您的 HTML 文件位于同一目录中）

# php - Symfony 功能测试在升级到 2.2 后会出现无限循环

> ID：15407128
> 
> 赞同：1
> 
> 时间：2013-03-14T10:49:16.867
> 
> 标签：php, phpunit, symfony-2.1, functional-testing, symfony-2.2

我在将 Symfony 从 2.1 升级到 2.2 后遇到了问题。一次运行所有功能测试时（请注意，在运行单个测试时不会发生这种情况，无论如何）我收到一个错误，无限循环卡在

```
PHP Fatal error:  Maximum function nesting level of '150' reached, aborting! in project_path\vendor\symfony\symfony\src\Symfony\Component\ClassLoader\DebugClassLoader.php on line 81 
```

部分跟踪：

```
...
14\. Symfony\Component\BrowserKit\Client->submit() project_path\other_path\Tests\Controller\LoginControllerTest.php:53
15\. Symfony\Component\BrowserKit\Client->request() project_path\vendor\symfony\symfony\src\Symfony\Component\BrowserKit\Client.php:224
16\. Symfony\Bundle\FrameworkBundle\Client->doRequest() project_path\vendor\symfony\symfony\src\Symfony\Component\BrowserKit\Client.php:264
17\. Symfony\Component\HttpKernel\Client->doRequest() project_path\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Client.php:111
18\. Symfony\Component\HttpKernel\Kernel->handle() project_path\vendor\symfony\symfony\src\Symfony\Component\HttpKernel\Client.php:61
19\. Symfony\Component\HttpKernel\DependencyInjection\ContainerAwareHttpKernel->handle() project_path\app\bootstrap.php.cache:411
20\. Symfony\Component\HttpKernel\HttpKernel->handle() project_path\app\bootstrap.php.cache:1101
21\. Symfony\Component\HttpKernel\HttpKernel->handleRaw() project_path\app\bootstrap.php.cache:975
22\. Symfony\Component\HttpKernel\Debug\TraceableEventDispatcher->dispatch() project_path\app\bootstrap.php.cache:990
23\. Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher->dispatch() project_path\vendor\symfony\symfony\src\Symfony\Component\HttpKernel\Debug\TraceableEventDispatcher.php:135
24\. Symfony\Component\EventDispatcher\EventDispatcher->dispatch() project_path\vendor\symfony\symfony\src\Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher.php:167
25\. Symfony\Component\EventDispatcher\EventDispatcher->doDispatch() project_path\vendor\symfony\symfony\src\Symfony\Component\EventDispatcher\EventDispatcher.php:53
26\. call_user_func() project_path\vendor\symfony\symfony\src\Symfony\Component\EventDispatcher\EventDispatcher.php:164
27\. Symfony\Component\HttpKernel\Debug\TraceableEventDispatcher->Symfony\Component\HttpKernel\Debug\{closure}() project_path\vendor\symfony\symfony\src\Symfony\Component\EventDispatcher\EventDispatcher.php:164
28\. call_user_func() project_path\vendor\symfony\symfony\src\Symfony\Component\HttpKernel\Debug\TraceableEventDispatcher.php:447
29\. Symfony\Component\Security\Http\Firewall->onKernelRequest() project_path\vendor\symfony\symfony\src\Symfony\Component\HttpKernel\Debug\TraceableEventDispatcher.php:447
30\. Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener->handle() project_path\vendor\symfony\symfony\src\Symfony\Component\Security\Http\Firewall.php:66
31\. Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener->onSuccess() project_path\vendor\symfony\symfony\src\Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener.php:143
32\. Symfony\Component\ClassLoader\DebugClassLoader->loadClass() project_path\vendor\symfony\symfony\src\Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener.php:0
33\. Symfony\Component\ClassLoader\DebugClassLoader->findFile() project_path\vendor\symfony\symfony\src\Symfony\Component\ClassLoader\DebugClassLoader.php:95
... 
```

在我升级所有测试之前工作正常，现在他们在使用时抛出该错误：

```
$form = $crawler->selectButton('Login')->form();
$form['_password'] = '123ASDasd';
$form['_username'] = 'MattKing';
$crawler = $client->submit($form); //this is LoginControllerTest.php:53 from error above 
```

或者

```
$link = $crawler->selectLink('Matt King')->link();
$client->click($link); // --> error 
```

或者

```
$client = static::createClient();
$client->followRedirects(true);
$crawler = $client->request('GET', '/login'); // --> error 
```

另一个问题是在使用默认的 symfony 翻译功能时。切换用户的语言环境后 - 测试抛出与上述相同的错误。当我注释掉切换语言环境时，发生了其他错误（如上面的错误）。请注意，它可能是由与上述相同的问题引起的。

找了几天的理由，放弃了。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:34:23.210

我遇到过同样的问题。我已经通过将它添加到我的 php.ini 来解决这个问题：

```
xdebug.max_nesting_level = 200 
```

XDebug 不应该在您的生产服务器上运行，因此它不应该抛出错误。

（见[本期](https://github.com/FriendsOfSymfony/FOSCommentBundle/issues/238)）

# c - 移植代码：Linux 中是否有与 utssys() 等效的 API？我需要将 utssys() unix API 移植到 Linux 环境吗？

> ID：15407135
> 
> 赞同：1
> 
> 时间：2013-03-14T10:49:44.740
> 
> 标签：c

unix 中的 utssys() 给出文件上的用户总数。它是一个未记录的 API，在 Solaris 手册页和 Linux 手册页中都没有此 API 的手动条目。Linux 中是否有任何等效的 API 或者我可以使用在 Linux 中也是如此（我不知道它没有记录）。我也用谷歌搜索了它，但没有得到任何信息。请帮忙。

```
int DU_Utssys_Unix(void* buf, int arg, int type, void* out)
    {
    int result;
    // Perform system-call
    errno = 0;
    if ((result = utssys(buf, arg, type, out)) < 0)
        return result;
    // Look into the result:
    return ((fu_data_t*)outbp)->fud_user_count;
    } 
```

以上是我需要为 Linux 替换的一段代码。我可以使用 syscall() 找出文件上的用户计数吗？如果是，保存在哪里？？？

在 Unix 中，它们具有以下结构来保存上述代码片段中使用的此信息，我们在 Linux 中是相同的还是不同的？

```
typedef struct f_user 
    {
    int     fu_flags;       /* see below */
    union 
        {
        struct 
            {
            pid_t   u_pid;
            uid_t   u_uid;
            }u_info;
        struct 
            {
            int     k_modid;
            int     k_instance;
            int     k_minor;
            }k_info;
        } fu_info;
    }f_user_t;

typedef struct fu_data 
    {
    int             fud_user_max;
    int             fud_user_count;
    struct f_user   fud_user[1];
    }fu_data_t; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:40:20.807

我认为在 Linux 中没有执行此操作的系统调用，但您可以以 root 身份执行以下操作：

*   统计文件获取`st_dev`和`st_ino`值
*   `/proc/*/fd/*`为每个条目走和：
*   如果`st_dev`&`st_ino`匹配则增加计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:33:20.007

int scan_proc(data* fileData, int* Count)

```
{
DIR*           pDir;
struct dirent* dEntry;
int            retCode = 0;
int            dirPattern;

pDir = opendir(".");
if (!pDir)
    {
    return -1;
    }
while ((dEntry = readdir(pDir)) != NULL)
    {
    if (!strcmp(dEntry->d_name, ".") || !strcmp(dEntry->d_name, ".."))
        {
        continue;
        }

    dirPattern = strtol(dEntry->d_name, NULL, 10);
    if (errno == ERANGE || dirPattern == 0)
        {
        continue;
        }
    if (chdir(dEntry->d_name) < 0)
        {
        continue;
        }
    retCode = scan_pid_dir("fd", fileData, pCount);
    if(retCode)
       {
       return -1;
       }
    chdir("/proc");
  }
closedir(pDir);
return 0;
} 
```

# wordpress - Wordpress子主题多个css文件

> ID：15407136
> 
> 赞同：1
> 
> 时间：2013-03-14T10:49:45.323
> 
> 标签：wordpress, import, stylesheet, parent-child

我有一个包含多个样式表的 wordpress 主题。

我想使用子主题方法，并且我已经成功导入了样式表。例子：

```
@ import url ('../bluediamond-v1_04/style.css'); 
```

但。那些开发了这个主题的人，使用多个样式表，它们也位于不同的文件夹中，所以我尝试了这个。

```
@ import url ('../bluediamond-v1_04/stylesheet/foundation.css');
@ import url ('../bluediamond-v1_04/stylesheet/foundation-responsive.css');
@ import url ('../bluediamond-v1_04/style-custom.css');
@ import url ('../bluediamond-v1_04/style.css'); 
```

它不能正常工作。这是错的吗？我应该怎么办？

希望你能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:00:20.947

来自[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes) ...

> @import 规则之上不得有其他 CSS 规则。如果在它上面加上其他规则，它就会失效，并且不会导入父的样式表。

您应该只使用一个 @import - 用于父样式的主样式表

```
@import url('../bluediamond-v1_04/style.css'); 
```

如果父样式编码正确，则应通过调用 wp_register_style 和 wp_enqueue_style 添加其他样式表，这应该会自动为您执行。

如果您想覆盖这些其他样式表，您需要在注册和排队您自己的替换之前取消注册和出列样式。

请记住，您的子主题的 functions.php 文件是在父主题的 functions.php 文件之前立即调用的，所以如果您想定义一个动作来从父主题中取消注册/出列样式，您需要确保它以较低的优先级运行（即更高的优先级数）比父函数的functions.php 文件中的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T09:41:17.553

尝试将您的 @import url("css local") 放在您的子主题 css 描述下。（第一行）像这样

```
/*
 Theme Name:     Theme Name Child
 Theme URI:      
 Description:    Theme
 Author:         
 Author URI:     
 Template:       something
 Version:        1.0.0
*/

/* =Theme customization starts here
-------------------------------------------------------------- */
@import url("one-fourth.css"); 
```

我刚刚解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T10:28:30.770

样式表需要由 html/php 调用，您可以重写 header.php 中的链接（或任何其他调用额外 css 文件的页面）并将其放入您的子主题中。

也可以通过在每个 css 代码中添加 !important 来覆盖主子 css 文件中额外 css 文件中的 css。（例如：#nav{背景：无！重要；）

许多主题还提供了向主题添加额外的 css 规则以自动覆盖现有 css 的选项。这可以在管理员的“主题选项”下找到。

# encoding - UTF8 编码问题？

> ID：15407137
> 
> 赞同：0
> 
> 时间：2013-03-14T10:49:50.363
> 
> 标签：encoding, utf-8, pdo

我在将字符 á、Á、ó、Ó、ú、Ú、í、Í、é、É 作为奇怪字符存储在我们的 mysql 数据库中时遇到问题。我们正在使用 PDO 插入数据库。

奇怪的是，我在 WAMP 上的计算机上有该站点的本地副本，一切正常，并且没有编码问题。实时站点位于 Linux 服务器上，如果这可能会有所不同的话。

本地数据库是实时数据库的副本，因此所有表中的所有编码都是相同的。

我尝试设置 PDO 编码：

$pdo = new PDO('mysql:host=' . Settings::DBHostName() . ';charset=utf8;dbname=' . Settings::DBName(), Settings::DBUsername(), Settings::DBPassword() , 数组( PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION ));

还有其他建议吗？我不明白为什么它会在本地工作而不是在我们的现场网站上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:28:12.747

对于 5.3.6 以后的 PHP 版本，您应该在 DSN 中设置编码。
对于所有其他人来说，发出常规的 SET NAMES 查询是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T13:04:09.150

PDO 构造函数调用的最后一个参数是特定于驱动程序的选项，以带有键 => 值对的数组的形式给出。MySQL 驱动程序有一个 PDO::MYSQL_ATTR_INIT_COMMAND 选项，您可以在其中指定每次连接到数据库时执行的命令。您可以使用 MySQL 特定查询 SET NAMES utf8 作为 init 命令的值，告诉 MySQL 使用UTF-8 作为我们连接的字符集。

```
$pdo = new PDO('mysql:host=mysql.host.com;dbname=db;array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"', 
'database', 'password'); 
```

# wix - 在不破坏卸载过程的情况下更改文件文本

> ID：15407140
> 
> 赞同：1
> 
> 时间：2013-03-14T10:49:52.343
> 
> 标签：wix, windows-installer

我有执行`Before="InstallFinalize"`和替换配置文件（config.asp）中的文本的自定义操作：

```
String configFilePath = session.CustomActionData["configFile"];
var configFile = System.IO.File.ReadAllText(configFilePath);            
session.Log("replace config file");
configFile.Replace("test2", "test");
session.Log("write config file");
System.IO.File.WriteAllText(configFilePath, configFile); 
```

当我尝试卸载应用程序时，出现错误：

```
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Program Files (x86)\myProject\config.asp'. 
```

但是文件在那里。我想这是问题，因为我已经改变了原来的？我应该如何更改我的代码以更改文件不会破坏卸载过程？更改文件时我应该更改执行顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:58.173

解决此问题的简单方法是将 config.asp 文件安装为`config.asp.template`并将其复制为`config.asp`自定义操作的一部分，以更改您需要的位。

这样原始文件永远不会被触及，并且会正确卸载。

# java - android如何找到视图中定义的元素

> ID：15407144
> 
> 赞同：0
> 
> 时间：2013-03-14T10:50:01.303
> 
> 标签：java, android, android-layout

在 android layout xml 文件中定义了一个 framelayout 元素，如 @android:id/tabcontent 如何在 java 代码中引用该元素

> = (Framelayout) findViewById(R.id.**_* _ *_**

 *那么有什么区别

> *   @android:+id/标签内容
> *   @+id/标签内容
> *   @android:id/tabcontent
> *   @id/tabcontent –</li>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:51:59.390

它应该是`android.R.id.tabcontent`

永远记住，每当您使用预定义的 android 资源时，您必须使用`android.R`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:11:45.613

+ 号将此添加`id`到自动创建的`R.java`文件中（因此您可以使用 引用资源`R.id`）`android:`表示资源在`android.R.java`文件内部（类似于`R.java`，但指的是 android**系统**资源）。因此，正如在其他答案中`@android:id`所指的那样`android.R.id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:52:26.490

将 id 定义为 "@+id/tabcontent" 你可以很容易地找到它 (Framelayout) findViewById(R.id.tabcontent)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:53:26.007

如果你声明了像@android:id/tab这样的框架布局的id？？？所以你必须使用这个找到这个框架布局。

```
(Framelayout) findViewById(android.R.id.tabcontent) 
```*

# php - PHP CSVImporter

> ID：15407147
> 
> 赞同：2
> 
> 时间：2013-03-14T10:50:03.383
> 
> 标签：php, file, csv, import

我有一个名为 CSVimporter V3 for PHP 的脚本，我曾经在网站上运行它，它运行良好。几年后，我现在挖出了相同的脚本以在另一个项目中使用，除了 CSV 文件被读取为一长行，而不是标题行和多行之外，一切正常。

这是脚本的一部分。

任何想法为什么它会被读成一长串？

```
<?php 

//  Reference session variable for short-hand
        $f = &$_SESSION['csv_file'];

        //  Open file - fp = file pointer
        if (!$fp = @fopen($f, 'r')) {

            error(L_ERROR_PREVIEW_NO_FILE);

        } else {

            //  Array to store each row to be inserted
            $batch = array();

            //  Row counter
            $rc = 0;

            //  Work out starting row
            switch ($_SESSION['csv_first_row']) {
                case 'data':
                    $start_row = 0;
                break;

                default:
                    $start_row = 1;
            }

            //  Get contents, while below preview limit and there's data to be read
            while ($data = fgetcsv($fp, 1024, delimiter_to_char($_SESSION['csv_delimiter']))) {

                if ($rc < $start_row) {

                    //  Incremement counter
                    $rc++;

                    //  Go to next loop
                    continue;

                } else {

                    //  Array to store data to be inputted
                    $values = array();

                    //  Loop data
                    for ($i = 0; $i < count($data); $i++) {

                        //  If data is wanted, put data into array
                        if (array_key_exists($i, $column_index)) {
                            $values[$column_index[$i]] = $data[$i];
                        }

                    }

                    //  Sort array into correct order by index
                    ksort($values);

                    //  Join values together and store in array
                    $batch[] = '("' . implode('", "', str_replace('"', '\"', $values)) . '","'.$accti.'","'.$impt.'")';

                }

            }

        }
            //  Close the file
            fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:30:00.420

我在代码顶部添加了这个，现在一切正常！

```
ini_set('auto_detect_line_endings', true); 
```

# html - Chrome 中 iFrame 的溢出滚动问题

> ID：15407148
> 
> 赞同：0
> 
> 时间：2013-03-14T10:50:06.493
> 
> 标签：html, google-chrome, css, firefox

我在这里有一个带有CSS的**iFrame 。**`overflow:scroll`它在 Firefox 中完美运行，但在 Chrome 中无法运行！知道为什么会这样吗？现场示例[在这里](http://jsfiddle.net/GreenMadness/fmCTD/)。您可以在 Firefox 中进行测试，然后在 Chrome 中进行测试，您将看到问题！感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:56:02.930

它没有显示滚动条，因为没有溢出 - 没有什么可滚动的。

```
<iframe id="scroll" src="http://example.com"></iframe> 
```

给出可滚动内容后，出现滚动条：http: [//jsfiddle.net/fmCTD/4/](http://jsfiddle.net/fmCTD/4/)

# javascript - 突出显示时在 textarea 上显示边框和句柄

> ID：15407149
> 
> 赞同：0
> 
> 时间：2013-03-14T10:50:07.100
> 
> 标签：javascript, jquery, html

我已经动态创建了嵌套在动态创建的 div 中的文本区域。div 是 draggabnle，textareas 可以使用 jquery 调整大小。

我希望任何特定 div/textarea 的边框和拖动/调整大小手柄仅在用户单击该特定文本区域时出现。我假设我需要使用与可拖动对象相同的 onclick 事件，但我没有 js 知识来显示手柄和边框。

非常感谢任何帮助

这是我的代码

```
<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>
<style>
  body{background-color:#ccc;}
  .dragbox{width:10px; height:10px;padding: 0.0em; margin:25px; border:0;cursor:move; z-index:2}
  .textarea1{ width: 300px; height: 300px; padding: 0.5em; z-index:3}
  #handle{
      display: block; 
      height: 16px; 
      width: 100px; 
      background-color: red;
      position: absolute;
      top:-15px;
      left:0px;
      font-size:10px;
      }
     #content
        {
            position:absolute;
            top:150px;
            left:0px;
            margin:auto;
            z-index:1;
        }
</style>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />  
<script src = "http://js.nicedit.com/nicEdit-latest.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>   
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>  

<script>        
var i=0;    
var p=25;   

}
function editor1(idf) {
//var body = document.body;
// The magic
document.getElementById(idf).addEventListener ("dblclick", function (event) {
    var target = event.target;

    if (target.nodeName === "TEXTAREA") {
        var area = new nicEditor ({fullPanel : true}).panelInstance (target);

        area.addEvent ("blur", function () {
            this.removeInstance (target);
        });
    }
}, false);
};

function NewTextArea(id)
{       
id=id+i;
var newdiv = document.createElement('div');
newdiv.setAttribute('id', id);
newdiv.setAttribute('class', 'dragbox');
newdiv.setAttribute('iterate',i);
newdiv.style.position = "relative";
newdiv.style.top = p;
newdiv.style.left = p;
newdiv.style.cursor='move';
newdiv.innerHTML = "<div id='handle'>Drag me into position</div></div><br><textarea id='"+i +"'  onDblClick='editor1("+i+")' name='textarea["+i +"]' class='textarea1' style='position:absolute; top:0px;left:0px;overflow-y: auto;background-color:transparent;border: 2px dashed #000; '>some text here</textarea>";
newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='"+i+"' name='id["+i+"]'><br><input name='box_type["+i+"]' type='hidden' value='text'/>"; 
newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='300' name='width["+i+"]' id='width"+i+"'><br><input type='hidden' value='300' name='height["+i+"]' id='height"+i+"'>";               
newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='0' name='left["+i+"]' id='left"+i+"'><br><input type='hidden' value='0' name='top["+i+"]' id='top"+i+"'>";           

document.getElementById("frmMain").appendChild(newdiv);
$(function()
{

    $("#"+i).resizable(
    {
        stop: function(event, ui)
        {
            var width = ui.size.width;
            var height = ui.size.height;
           // alert("width="+width+"height="+height);
            ValProportions(width,height,ui.element.context.id);           
        }
    });

   $( "#"+id ).draggable(
    {
        stop: function(event, ui)
        {
            Stoppos = $(this).position();
           $("div#stop").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
               // alert("left="+Stoppos.left+"top="+Stoppos.top);
            ValPostion(Stoppos.left,Stoppos.top,$(this).attr('iterate'));   
        }
    }); 
     $("#"+i).draggable({handle:"#handle"}); 
});  

function ValProportions(defaultwidth, defaultheight,id)  { 
    $('#width'+id).val(defaultwidth);
    $('#height'+id).val(defaultheight);
    }
function ValPostion(defaultleft,defaulttop,id)  {  
    $('#left'+id).val(defaultleft);
    $('#top'+id).val(defaulttop);
    }
i++;
p=p+25;     
}
</script>

</head>

<body>
<form id="frmMain" name="frmMain" enctype="multipart/form-data" action="dynamic_div5.php" method="post">
<input id="btn1" type="button" value="Add New textbox" onClick="NewTextArea('draggable');"/>  

<input type="submit" value="Save Page"  >

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:15.570

如果我正确理解了这个问题，这可以只用 CSS 来完成：

```
textarea { resize:none; border:none; }
textarea:focus { resize:both; border:1px solid #000; } 
```

[JSFiddle 示例](http://jsfiddle.net/3wAJU/)。

# telerik - 如何使用 Telerik 报告在详细部分显示每条记录的序列号

> ID：15407153
> 
> 赞同：1
> 
> 时间：2013-03-14T10:50:21.043
> 
> 标签：telerik

我有一个 Telerik 报告。该报告有 10 条记录。我想为详细部分的每条记录显示一个序列号。我使用 RowNumber() 函数，但它为所有记录显示 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T11:22:18.517

在详细信息部分创建一个 Telerik 文本框，并将值设为“= ColumnNumber()”

然后 sl.no 会自动出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T15:05:34.750

您必须根据报表布局更改函数[数据范围。](http://www.telerik.com/help/reporting/expressions-scope.html)例如： = [RowNumber("MyParentGroupName")](http://www.telerik.com/help/reporting/expressions-data-functions.html)

# windows - 记录系统调用

> ID：15407154
> 
> 赞同：2
> 
> 时间：2013-03-14T10:50:23.723
> 
> 标签：windows, kernel, 32-bit

我需要知道是否有任何方法将系统调用的某些数据（例如带有旧路径、新路径等参数的 copy_file()）重定向到每次调用该函数时的日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-07T08:50:12.083

[https://github.com/timdiels/sysintercept](https://github.com/timdiels/sysintercept)

“sysintercept 允许您拦截和修改由进程完成的 win32 系统调用。sysintercept 提供了一个 CLI。目的是允许重写路径、翻译键盘输入……各种提高兼容性的东西。”

如果您想知道如何以编程方式自己拦截系统调用，可以查看源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:06:06.953

对于 Windows，有进程监视器 (ProcMon) 工具可以记录系统调用，例如文件 I/O。

[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# sql-server-2008 - 如何优化涉及内部连接的条件子选择？

> ID：15407155
> 
> 赞同：1
> 
> 时间：2013-03-14T10:50:24.280
> 
> 标签：sql-server-2008, join, query-optimization, subquery, commutativity

我有一个 SQL 查询（MS SQL 2008），我想在速度方面进行优化。它具有以下结构（实际上只有在 case 语句中有 10 种不同的 when-cases）。

重要的位是 case 语句中的子选择，涉及附加表之间的内部连接和对 FROM 子句（table1）中的一个表的引用。

我在想我可以在 FROM 子句中使用左（外部）连接而不是子选择来优化它，但我不确定，因为子选择也涉及内部连接。然后我会在 FROM 子句中使用两个左连接，现在我在子选择中使用内部连接吗？从第二个 when-case 开始，这将如何与 AnotherTable3 一起工作？

任何想法都非常感谢。

```
 SELECT table1.a,
           table2.b,
           CASE
             WHEN table1.XY = 1 THEN
               (SELECT something
                FROM   AnotherTable1 at1
                       INNER JOIN AnotherTable2 at2
                               ON at1.x = at2.y
                WHERE  at1.abc = table2.abc)
             WHEN table1.XY = 2 THEN
               (SELECT something
                FROM   AnotherTable1 at1
                       INNER JOIN AnotherTable3 at3
                               ON at1.x = at3.y
                WHERE  at1.abc = table2.abc)
           END AS [problem]
    FROM   MyTable1 table1
           INNER JOIN MyTable2 table2
                   ON table1.a = table2.b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:08:27.563

您可以尝试以下操作：

```
SELECT 
    table1.a,
    table2.b,
    CASE 
        WHEN table1.XY = 1 THEN at2.something
        WHEN table1.XY = 2 THEN at3.something
    END
FROM   MyTable1 table1
INNER JOIN MyTable2 table2
    ON table1.a = table2.b 
LEFT JOIN AnotherTable1 at1
    ON at1.abc = table2.abc
INNER JOIN AnotherTable2 at2
    ON at1.x = at2.y
INNER JOIN AnotherTable3 at3
    ON at1.x = at3.y 
```

但检查结果，还要记住 at2 和 at3 列必须具有相同的数据类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:16:03.380

在这种特殊情况下，当具有相同条件的部件只需要三个左连接时，AnotherTable1 会同时连接：

```
SELECT table1.a,
       table2.b,
       CASE
         WHEN table1.XY = 1 THEN
           ?.something -- from whereever it's coming
         WHEN table1.XY = 2 THEN
           ?.something -- from whereever it's coming
       END AS [problem]
FROM   MyTable1 table1
       INNER JOIN MyTable2 table2
               ON table1.a = table2.b 
       LEFT JOIN AnotherTable1 at1
               ON at1.abc = table2.abc
       LEFT JOIN AnotherTable2 at2
               ON at1.x = at2.y
       LEFT JOIN AnotherTable3 at3
               ON at1.x = at3.y 
```

在更一般的情况下，您将拥有此选项

```
FROM   MyTable1 table1
       INNER JOIN MyTable2 table2
               ON table1.a = table2.b 
       LEFT JOIN 
            (select *
               from AnotherTable1 at1
              INNER JOIN
                    AnotherTable2 at2
                      ON at1.x = at2.y   
            ) at1
               ON at1.abc = table2.abc
       ... 
```

# tms - 如何使用 TMS Flexcel 向 Excel 单元格添加超链接

> ID：15407160
> 
> 赞同：0
> 
> 时间：2013-03-14T10:50:51.673
> 
> 标签：tms

我正在使用 TMS Flexcel 创建一个 Excel 文件。我有一个主工作表，列出了工作簿中的所有工作表。在主工作表上，我想添加带有指向所有其他工作表的链接的文本。

我有以下代码创建一个超链接并将其添加到 excel 文件中。

```
var hyperLink = new THyperLink(THyperLinkType.CurrentWorkbook, inputFile.FileCode, "Link to another worksheet", inputFile.FileCode + "#A1", null); 
```

因此，一旦我添加了超链接，我就无法弄清楚如何将它添加到主工作表中的单元格中。我尝试了以下方法，但它不起作用：

```
excelFile.SetCellValue(1, 2, hyperLink, 4); 
```

单元格 B2 中的上述输出是：“FlexCel.Core.THyperLink”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T13:39:35.607

这是我的问题的答案。一旦找到解决方案，我就忘了回去回答我的问题。

```
 var link = new THyperLink(THyperLinkType.CurrentWorkbook, "", "Master List", "", "'Master List'!D" + (sheetIndex + 1));
            excelFile.AddHyperLink(new TXlsCellRange(1, 1, 1, 1), link); 
```

您必须使用 AddHyperLink 方法将超链接添加到单元格。

# url - Linkedin 的 URL 方案

> ID：15407170
> 
> 赞同：8
> 
> 时间：2013-03-14T10:51:18.937
> 
> 标签：url, linkedin

我有一个 ios 应用程序。我可以使用自定义 url 方案“linkedin://”从我的 ios 应用程序打开链接的本机应用程序。但是如何通过我的 ios 应用程序发布到linkedin 本机应用程序的链接。我们有什么特殊的参数吗？

Linkedin URL 方案支持哪些参数？

谢谢， 蒂亚格什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-28T17:36:29.777

Linkedin 改变了方案，现在它以这种方式工作：

```
linkedin://profile/[id] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:45:13.700

您可以通过以下方式跳转到个人资料：

linkedin://#profile/9999

我刚刚在我的 iPhone 5 上进行了测试。就像一个魅力。

这里有更多的对话，但内容不多。 [http://developer.linkedin.com/forum/link-open-linkedin-profile-browser-ios-linkedin-app](http://developer.linkedin.com/forum/link-open-linkedin-profile-browser-ios-linkedin-app)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-27T18:31:45.980

如果您通过[LinkedIn REST API](https://developer.linkedin.com/docs/rest-api)获取 LinkedIn 个人资料，那么您可以`publicProfileUrl`在 JSON 中找到字段：

```
{ 
  ...
  "publicProfileUrl": "https://www.linkedin.com/in/eugene-brusov"
  ...
} 
```

然后这行代码：

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://www.linkedin.com/in/eugene-brusov"]];`

将您重定向到在本机 LinkedIn 应用程序中打开的目标个人资料（如果已安装）或在 iOS 默认浏览器中打开的个人资料。

在 iOS **10.0.2**和**11.0.1**上测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T13:43:41.163

在 iOS 8.3 上工作：

```
linkedin://profile?id=[id] 
```

看看： http: [//pureoxygenlabs.com/10-app-url-schemes-for-marketers/](http://pureoxygenlabs.com/10-app-url-schemes-for-marketers/)

# jquery - jQuery没有动画不透明度，但会在悬停时旋转元素

> ID：15407174
> 
> 赞同：1
> 
> 时间：2013-03-14T10:51:30.737
> 
> 标签：jquery, hover, jquery-animate

我一直在寻找为什么我的代码不会在悬停时将元素设置为 'opacity:1' 但会旋转元素。html和js如下。

如果一个元素未被选中（有类 rwunselected）那么它应该在悬停时执行该功能。

```
<table cellpadding="0" cellspacing="10">
<tr>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/cellists.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/elegance.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/musicrooms.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/absolution.png" border="0" /></td>
</tr>
<tr>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/helpmankind.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/liva.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/anthonybrown.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/blairjohnstone.png" border="0" /></td>
</tr>
<tr>

<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/questiventi.png" border="0" /></td>
<td width="135" align="center"><img class="recentworkitem rwunselected" src="images/recentwork/smallimages/surveycentre.png" border="0" /></td>
</tr>
</table> 
```

javascript

```
//set opacities

$('.recentworkitem').css('opacity','.15');

//hover effect on all items with class recentworkitem

$('.recentworkitem').hover(function(){
    if($(this).hasClass('rwunselected')){
        $(this).stop().animate({opacity:'1'},{duration:300})
        $(this).stop().rotate({animateTo:-90, duration:300})
    }
},
function(){
    if($(this).hasClass('rwunselected')){
        $(this).stop().animate({opacity:'.15'},{duration:300})
        $(this).stop().rotate({animateTo:0, duration:300})
    }

});

//click function

$('.rwunselected').click(function(){
    //swap image opacities and classes
        $(this).removeClass('rwunselected');
        $(this).animate({opacity:'1'},{duration:300});
        $('.rwselected').addClass('rwunselected');
        $('.rwselected').animate({opacity:'.15'},{duration:300});
        $('.rwselected').removeClass('rwselected');
        $(this).addClass('rwselected');

    //rotate the old selected item back to 0 degrees
        $('.rwunselected').rotate({animateTo:0, duration:300})
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:58:13.347

您将立即停止它。两个动画只需要停止一次。

```
$('.recentworkitem').hover(function(){
    if($(this).hasClass('rwunselected')){
        $(this).stop().animate({opacity:'1'},{duration:300}).rotate({animateTo:-90, duration:300});
    }
},
function(){
    if($(this).hasClass('rwunselected')){
        $(this).stop().animate({opacity:'.15'},{duration:300}).rotate({animateTo:0, duration:300});
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:54:38.537

那是因为你`animate`通过调用第二个来停止第一个：

```
$(this).stop().animate({opacity:'1'},{duration:300});              
$(this).stop().rotate({animateTo:-90, duration:300}); 
```

使用`complete`处理程序：

```
$(this).stop().animate({opacity:'1'},{duration:300}, function () {
    $(this).rotate({animateTo:-90, duration:300});
}); 
```

现在，第二个只会在第一个完成后触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:55:35.257

我认为 jQuery 中的动画效果具有异步行为，因此您的代码开始不透明动画，然后立即停止并开始旋转。

您应该在不透明动画完成时或在回调中调用旋转。

无论如何，如果您想同时拥有这两种效果，您应该指向一个自定义解决方案，该解决方案涉及创建一个新效果“合并”您感兴趣的效果代码。可以在此处找到一个示例：[我如何执行多个同时的 jquery 效果？](https://stackoverflow.com/questions/2344804/how-can-i-execute-multiple-simultaneous-jquery-effects)

# tinymce - Tiny MCE 添加自定义 HTML 标签

> ID：15407190
> 
> 赞同：18
> 
> 时间：2013-03-14T10:52:22.237
> 
> 标签：tinymce, modx

我正在为 MODx 使用 Tiny 4.3.3 我需要添加一个

```
<p class="classname">
 <em class="openImg"></em>
  Some randome Input text by the user
 <em class="closeImg"></em>
</p> 
```

我不介意是额外的菜单项还是在段落下拉菜单中。我只是希望尽可能减少耗时的工作。

我试过这个[http://alexzag.blogspot.co.uk/2009/12/custom-tags-in-tinymce.html](http://alexzag.blogspot.co.uk/2009/12/custom-tags-in-tinymce.html)但不知何故这不起作用。

谁能给我指出一个好的教程或告诉我如何在下拉菜单中添加一个图标或名称来自动创建具有正确类的 p 和 em 标签？谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-03-05T22:02:45.653

自从提出这个问题以来已经有一段时间了，但由于我目前正在做完全相同的事情，我想我分享我关于这个问题的发现和解决方案。:)

我正在为工作中的测试项目扩展 TinyMCE，我们的解决方案需要自定义标签 - 在其中一些标签中，用户应该只能输入一行，而在其他标签中（作为您的**em**）则需要大量文本。

要完成的步骤，以实现所需的解决方案：

*   使用两个配置关键字**extended_valid_elements**和**custom_elements**告诉 TinyMCE 编辑器，您的元素**很好**：

     ****`tinymce.init({ selector: "textarea#editor", // ... extended_valid_elements : "emstart,emend", custom_elements: "emstart,emend", content_css: "editor.css" });`**** 
*****   为开始标签和结束标签创建两个图像。我将我的示例命名为*emstart.png*和*emend.png*。

    *   为您的自定义元素创建自定义 CSS 样式并将它们放入自定义 CSS 文件（在 TinyMCE 配置中指定的文件，在我的情况下*为 editor.css*）：

    `emstart { background: url(emstart.png) no-repeat; background-position: left -3px top -3px; padding: 10px 10px 5px 10px; background-color:#aabbcc; border:1px dotted #CCCCCC; height:50px; width:100px; }`

    `emend { background: url(emend.png) no-repeat; background-position: left -3px bottom -3px; padding: 5px 10px 10px 10px; background-color:#aabbcc; border:1px dotted #CCCCCC; height:50px; width:100px; }`

    *   编写一个自定义插件，输入新标签并将其放在插件目录中。我打电话给我*的客户*：**** 

 ****插件代码：

```
tinymce.PluginManager.add('customem', function(editor, url) {
    // Add a button that opens a window
    editor.addButton('customEmElementButton', {
        text: 'Custom EM',
        icon: false,
        onclick: function() {
            // Open window
            editor.windowManager.open({
                title: 'Please input text',
                body: [
                    {type: 'textbox', name: 'description', label: 'Text'}
                ],
                onsubmit: function(e) {
                    // Insert content when the window form is submitted
                    editor.insertContent('<emstart>EM Start</emstart><p>' + e.data.description + '</p><emend>EM End</emend>');
                }
            });
        }
    });

    // Adds a menu item to the tools menu
    editor.addMenuItem('customEmElementMenuItem', {
        text: 'Custom EM Element',
        context: 'tools',
        onclick: function() {
            editor.insertContent('<emstart>EM Start</emstart><p>Example text!</p><emend>EM End</emend>');
        }
    });
}); 
```

最后一步是将您的自定义插件加载到编辑器（使用**插件**和**工具栏**配置选项）并享受结果：

```
 tinymce.init({
        selector: "textarea#editor",
        height: "500px",
        plugins: [
                 "code, preview, contextmenu, image, link, searchreplace, customem"
           ],
        toolbar: "bold italic | example | code | preview | link | searchreplace | customEmElementButton",
        contextmenu: "bold italic",
        extended_valid_elements : "emstart,emend",
        custom_elements: "emstart,emend",
        content_css: "editor.css",
     }); 
```

编辑器现在看起来像这样：

![在此处输入图像描述](../Images/9ddeed5a3daf51912f08df80d8cc8ebb.png)

和你的例子中的来源：

![在此处输入图像描述](../Images/9d39c120411a246e3c630f414ab9ceac.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T13:02:57.097

首先，您需要修改 tinymce 设置[`valid_elements`](https://www.tinymce.com/docs/configure/content-filtering/#valid_elements)和[`valid_children`](https://www.tinymce.com/docs/configure/content-filtering/#valid_children)您的需要（添加`em`到所需的标签（可能）到`valid_elements`和作为子标签）。`em``p``valid_children`

其次，您将需要一个带有自己的下拉菜单或按钮的插件来插入此代码。****

# sql - 用于获取给定组不同的行的 SQL 查询

> ID：15407196
> 
> 赞同：1
> 
> 时间：2013-03-14T10:52:31.410
> 
> 标签：sql, select

例如如下表

```
c1      c2      c3
a       b       1
a       b       2
c       d       1
c       d       1
e       f       3
e       f       3
e       f       3
x       y       5 
```

在这种情况下，我想要 c1、c2 的组值，其中~~所有~~c3 中的至少一个都不相同。所以在这种情况下 (a, b) 因为 (a, b) 的一行是 1，而 (a, b) 的另一行是 2。

此外，不得报告行 (x, y)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:53:53.693

```
SELECT  c1, c2
FROM    tableName
GROUP   BY c1, c2
HAVING  COUNT(DISTINCT c3) > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f8230/1)

输出

```
╔════╦════╗
║ C1 ║ C2 ║
╠════╬════╣
║ a  ║ b  ║
╚════╩════╝ 
```

但是你想要获取所有行及其所有列

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  c1, c2
            FROM    tableName
            GROUP   BY c1, c2
            HAVING  COUNT(DISTINCT c3) > 1
        ) b ON  a.c1 = b.c1 AND 
                a.c2 = b.c2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f8230/10)

输出

```
╔════╦════╦════╗
║ C1 ║ C2 ║ C3 ║
╠════╬════╬════╣
║ a  ║ b  ║  1 ║
║ a  ║ b  ║  2 ║
╚════╩════╩════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:54:46.037

使用`EXISTS`：

```
SELECT c1, c2, c3
FROM dbo.TableName t1
WHERE EXISTS
(
    SELECT 1 FROM dbo.TableName t2
    WHERE t1.c1 = t2.c1 AND t1.c2 = t2.c2
    AND   t1.c3 <> t2.c3
) 
```

[**演示**](http://www.sqlfiddle.com/#!2/f8230/9/0)（如果您只想要一条记录，请使用`t1.c3 < t2.c3`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:00:21.947

编辑：基于不包括的单对：

如果你想得到每一对，C1，C2，C3 的每个值都不同，下面会做：

```
SELECT
    C1,
    C2
FROM
    dbo.Table1
GROUP BY
    C1,
    C2
HAVING
    COUNT(1) = COUNT(DISTINCT C3)
AND COUNT(1) > 1 
```

# mongodb - 在MongoDB中，如何使用聚合框架拥有很少的文档

> ID：15407200
> 
> 赞同：4
> 
> 时间：2013-03-14T10:52:35.647
> 
> 标签：mongodb

我正在尝试使用聚合框架，但我有一个问题。我需要知道我的数据库中有多少人在上个月购买了东西。

为此，我使用这个：

```
db.account.aggregate([
{$project : {civility : 1, 'purchase.date' : 1 }},
{$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/02/2013'), $lt: new Date('02/03/2013')} }},
{$unwind: '$purchase'},
{$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/02/2013'), $lt: new Date('02/03/2013')} }},
{$group: {_id: '$_id', total_buy : {$sum : 1}}},
{$match: {total_buy: {$gte: 2}}},
{$group: {_id: null, total_buyer : {$sum : 1}}}
]) 
```

我有这个回应

```
{
"result" : [
{
"_id" : null,
"total_buyer" : 4443
 }
],
"ok" : 1
} 
```

此查询有效，因为我使用的日期范围很小，但如果我使用相同的查询，日期范围更大，如下所示：

```
db.account.aggregate([
{$project : {civility : 1, 'purchase.date' : 1 }},
{$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/01/2013'), $lt: new     Date('03/01/2013')} }},
{$unwind: '$purchase'},
{$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/01/2013'), $lt: new    Date('03/01/2013')} }},
{$group: {_id: '$_id', total_buy : {$sum : 1}}},
{$match: {total_buy: {$gte: 2}}},
{$group: {_id: null, total_buyer : {$sum : 1}}}
]) 
```

我有这个 ：

```
{
"errmsg" : "exception: sharded pipeline failed on shard shard0000: { errmsg: \"exception: aggregation result exceeds maximum document size (16MB)\", code: 16389, ok: 0.0 }",
"code" : 16390,
"ok" : 0
} 
```

有什么我做错了或者我不能做我需要做的事情吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T20:39:10.813

看起来你可以做几件事来改善你的聚合：

1）添加一个`$project`以避免通过您已经使用过的字段（除了`_id`

2）您说您想要购买任何东西的买家数量，但您正在过滤以仅保留在该时间段内购买了两次或更多“次”或“东西”的买家。

结果：

```
db.account.aggregate([
   {$project : {civility : 1, 'purchase.date' : 1 }},
   {$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/01/2013'), $lt: new     Date('03/01/2013')} }},
   {$unwind: '$purchase'},
   {$match: {civility : 1 ,'purchase.date': {$gte: new Date('02/01/2013'), $lt: new Date('03/01/2013')} }},
   {$project: {_id  :1}}, 
   {$group: {_id: '$_id', total_buys : {$sum : 1}}},
   {$group: {_id: null, total_buyers : {$sum : 1}}}
]) 
```

鉴于您的`_id`字段的大小，只要每个分片匹配不超过大约 420,000 个文档，它就应该在当前版本 (2.4) 中工作。对于每个代表购买的文件，我怀疑您可能仍会遇到限制，因此您有多种选择：

1) 等到 2.6（目前作为不稳定的开发版本 2.5.2 提供）消除了对数据集大小的限制（这里不是最终大小，而是 shard0000 必须传回给 mongos 的大小，这就是问题所在）。2）在特定时间段内使用不同的方法来计算不同的买家（如果那是你真正想要的 - 这不是你最初的聚合计算的）。

# java - getBytes 然后 toString 每次都不会给出相同的结果

> ID：15407201
> 
> 赞同：1
> 
> 时间：2013-03-14T10:52:37.367
> 
> 标签：java, android

我正在尝试使用 Android 的示例 BlueToothChat，但有些东西我不明白：

```
byte[] send = message.getBytes();
Log.d("SEND_BYTE", send.toString());
mChatService.write(send); 
```

在这里，消息是一个字符串，然后将其转换为字节，我猜是为了发送。但是当我检查日志时，`send.toString()`即使我输入的消息很长，该部分也很短。更糟糕的是，如果我输入两次相同的消息，我会得到 2 个不同的日志，我觉得这真的很奇怪。这是我在日志中得到的消息`hello`，连续三次：

```
[B@413d62e0
[B@41390078
[B@413ed3d8 
```

一定有什么东西（也许真的很简单）我没有得到，但不知道它是什么。你能帮我解决这个问题吗？

编辑：也许添加以下代码很有用，所以这里是完整的代码：

```
byte[] send = message.getBytes();
Log.d("SEND_BYTE", send.toString());
mChatService.write(send);

// Reset out string buffer to zero and clear the edit text field (buffer is used in the write function)
mOutStringBuffer.setLength(0);
mOutEditText.setText(mOutStringBuffer); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T10:55:43.657

是的，调用`toString()`字节数组是个坏主意。数组不会覆盖`toString()`，因此您会获得`Object.toString()`.

要撤消`String.getBytes()`呼叫，您需要：

```
Log.d("SEND_BYTE", new String(send)); 
```

或者更直接地查看字节：

```
Log.d("SEND_BYTE", Arrays.toString(send)); 
```

**但是**，我强烈建议您*不要*直接这样做。相反，您应该在转换为二进制或从二进制转换时指定一个编码，否则它将使用平台默认编码。聊天服务需要什么编码？例如，如果它需要 UTF-8：

```
byte[] send = message.getBytes("UTF-8");
Log.d("SEND_BYTE", Arrays.toString(send));
mChatService.write(send); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:55:00.557

您需要创建一个新的字符串对象来获取实际的字符串

```
String senddata=new String(send); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:56:49.420

尝试：

```
Log.d("SEND_BYTE", new String(send, "UTF-8");); 
```

# python - 如何从 json 更新 Mongoengine DynamicDocument

> ID：15407202
> 
> 赞同：8
> 
> 时间：2013-03-14T10:52:48.800
> 
> 标签：python, mongoengine

我试图找到一种**优雅**的方式来更新现有的 MongoDB 文档，其中包含从网页接收到的数据作为 json。问题是我事先不知道要更新哪些字段 - 所以我不能使用**set__field**，我的 MongoDB 文档中只有要更新的字段的 json 表示。另外，我正在使用 DynamicDocuments，因此可能需要在文档上设置新字段。例如：

```
class Study(DynamicDocument):
    study_accession_nr = StringField()
    study_name = StringField()
    study_type = StringField() 
```

并且 json 可能看起来像 - 例如：

```
{"_id" : "123", "study_name" : "Statistics"} 
```

或者

```
{"_id" : "123", "study_type" : "research", "study_name" : "Statistical analysis"} 
```

我可以从控制台轻松完成，或者使用 pymongo，但我不知道如何使用 Mongoengine 执行此操作，除非我手动 setattr(myDocInstance, nameOfField, val)，这对我来说看起来并不那么优雅。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T11:48:44.280

您可以在启动课程时传递数据：

```
data = {"_id" : "123", "study_type" : "research", "study_name" : "Statistical analysis"}
doc = Study(**data) 
```

要更新现有模型，您可以调用 update（首选）或更改模型并调用 save。

例如：

```
Doc.update(set__VAR=Val, set__VAR2=Val2) 
```

或者

```
setattr(Doc, 'VAR', val)
setattr(Doc, 'VAR2', val2)
Doc.save() 
```

或者

```
Doc.VAR = val
Doc.VAR2 = val2
Doc.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T02:41:24.750

普通的MongoEngine。在我的情况下，我从 x-editable 收到一个表单，其中包含与我的架构同名的字段，因此我可以使用它直接进入数据库。

```
ActivityType.objects.filter(id=request.form['pk']).update(**{'set__'+request.form['name']: request.form['value']}) 
```

# javascript - Dust.js 渲染的一页的多个 JSON

> ID：15407207
> 
> 赞同：2
> 
> 时间：2013-03-14T10:53:00.207
> 
> 标签：javascript, json, dust.js

我想知道在使用dust.js 渲染页面时是否可以使用多个JSON。

例如，我在客户端。我下载了我的 JSON（JSON1 和 JSON2）和我的灰尘模板（dustTemplate）。我编译并加载我的模板。在我用 2 个 JSON 渲染我的页面之后。

现在我这样做：`dust.render("template" , JSON, function(err, out) {...});` 但它使用一个 JSON，有没有办法使用 2 个或更多 JSON？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:20:47.370

您绝对可以在单个页面上使用多个 JSON 有效负载（它们不需要同时到达）。每个有效负载都需要自己调用`dust.render`，但如果您愿意，它们可能会使用相同的模板。

例如：

```
async('GET', url1, function(data) {
  if (data) {
    data = JSON.parse(data);
    dust.render('template1', data, function(err, out) {
      if (typeof out === 'string') {
        container1.innerHTML = out;
      }
    });
  }
});

async('GET', url2, function(data) {
  if (data) {
    data = JSON.parse(data);
    dust.render('template2', data, function(err, out) {
      if (typeof out === 'string') {
        container2.innerHTML = out;
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:07:40.513

使用 2 个 JSON 或更多来呈现一页。我们可以将 JSON 与 jQuery 合并

```
var jsonMerge = $.extend({}, JSON1, JSON2);
var templateCompiled = dust.compile(dustTemplate, "template");
dust.loadSource(templateCompiled );
dust.render("template" , jsonMerge , function(err, out) {...}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T23:43:26.060

@Mitch 指出的解决方案简单高效。不使用 jquery 的其他方法是[http://jsfiddle.net/yXx5L/4/](http://jsfiddle.net/yXx5L/4/)

用于将`dust.makeBase`页面的 json 聚合到单个上下文堆栈中，灰尘可以在该堆栈上查找键。

# java - 执行子查询后无法返回 JDBC SQL 查询结果

> ID：15407209
> 
> 赞同：0
> 
> 时间：2013-03-14T10:53:02.937
> 
> 标签：java, sql, jdbc, resultset

我正在处理一个场景，我必须在 JDBC 中执行 SQL 查询以查找有关注册特定科目的学生的信息。运行此查询时，应一次显示 3 条记录。然后提示用户按 Enter 返回主菜单或按 B 继续浏览结果或输入 StudentID 以提取上学期的结果。在下面的代码中，显示 3 个结果后，当用户按 Enter 或 B 时，我的代码可以正常工作。但是，在输入 StudentID 并运行子查询后，代码会自动显示主菜单。我希望它返回并继续显示剩余的结果，就像选项 B 浏览一样。

下面是代码片段：

```
// Below is the SQL query that will be executed
// This snippet is part of loop where all different subjects are entered into an array and then user selects one subject
String displayStudent = "select * from students where subject = '" + subjectArray[choice - 1] + "'";
ResultSet displayThisList = stmt.executeQuery(displayStudent);
while (displayThisList.next()) {
    System.out.println("Fname: " + displayThisList.getString(2));
    System.out.println("Lname: " + displayThisList.getString(3));
    System.out.println("StudentID: " + displayThisList.getString(1));
    System.out.println("Grade: " + displayThisList.getString(4));
    System.out.println("Subject: " + displayThisList.getString(5));
    System.out.println();
    subCount++;
    if ((subCount % 3 == 0)) {
        String response = readEntry("Enter StudentID to view last semester results or\nB Enter to browse or \nENTER to go back:");
        System.out.println();
        if (response.equals("")) {
            // Back to member menu
            break;
        } else if (response.equals("B")) {
            // Continue to browse
            continue;
        } else {
            // Check if the StudentID is valid or not
            int checkID = 0;
            String queryID = "select * from students where StudentID='" + response + "'";
            ResultSet setID = stmt.executeQuery(queryID);
            while (setID.next()) {
                String FName = setID.getString(2);
                String LName = setID.getString(3);
                String Grade = setID.getString(4);
                String Subject = setID.getString(5);
                checkID++;
                System.out.println("Correct ID was entered");
                //Code to execute query based on above info from a different table
            }
            if (checkID == 0) {
                System.out.println();
                System.out.println("Invalid ID. Please enter again.");
                System.out.println();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:16:20.897

**首先，如果**可互换使用相应的对象，则不应将相同的`Statement`对象用于不同的查询。为“外部”查询创建一个语句，为子查询创建另一个语句。**`ResultSet`**

 **其次，在`while`-loop ( ) 中，您可能从错误（应该，不）中`setId.next()`读取数据。`ResultSet``setID.getString()``setISBN.getString()`

此外，如果 SQL 查询是根据用户输入生成的，那么您绝对应该使用它`PreparedStatement`。考虑当有人进入时会发生什么`StudentId`：

```
'; delete from students; select * from students where StudentID='foobar 
```**

# android - phonegap 中的 keycharmp 文件错误

> ID：15407211
> 
> 赞同：1
> 
> 时间：2013-03-14T10:53:09.330
> 
> 标签：android, cordova

我使用以下代码检查是否在 PhoneGap 中单击了 Android 的硬件后退按钮，但它给了我错误`Can't open keycharmap file`

所以我无法检查是否点击了 Android 的后退按钮？

```
 document.addEventListener("backbutton", onBackKeyDown, false);
  function onBackKeyDown() 
  {
     alert("Back");
  } 
```

# google-maps-api-3 - 获取谷歌地图 v3 以使功能完全透明

> ID：15407212
> 
> 赞同：4
> 
> 时间：2013-03-14T10:53:14.943
> 
> 标签：google-maps-api-3

我们正在寻找一种在 google v3 地图上设置样式的方法，以便给定的特征（例如水）是透明的（即显示到持有 div 下方的背景）...？

我们尝试使用以下方式设置样式：

```
var styles = [
      {
        featureType: "water",
        stylers: [
          { color: none }
        ]
      }]
map.setOptions({styles: styles}); 
```

但这只是将颜色设置为地图默认值，即浅蓝色......当我们想要看到整个地图下方的背景层时......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:50:54.060

查看[样式化地图向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)（在 chrome 中效果最佳）。您可以使用所有选项。所以也许这就是你需要的：

```
 {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      { "visibility": "off" }
    ]
  } 
```

可悲的是， opacity 似乎不是[受支持的 styler](https://developers.google.com/maps/documentation/javascript/styling#stylers)。

# bash - 如何使用 bash 编写命令行工具

> ID：15407213
> 
> 赞同：5
> 
> 时间：2013-03-14T10:53:25.197
> 
> 标签：bash

我想编写一个命令行工具，如 git 它将遵循`POSIX`标准。它将采用`--help`or `-h`, `--version`..etc 之类的选项。但我不知道该怎么做。谁能告诉我如何使用 bash 脚本来做到这一点。请帮我。这对我来说非常新鲜。

示例：如果我的工具名称是 Check-code，那么我想使用该工具，例如；

```
Check-code --help 
```

或者

```
Check-code --version 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:33:38.230

据我所知，“长选项”类似于`--help`并且`--version`不是 POSIX 标准，而是 GNU 标准。对于命令行实用程序，POSIX 标准说：

*由连字符和单个字母或数字组成的参数，例如“a”，称为“选项”（或历史上的“标志”）。*

要支持 POSIX 短选项值得了解`getopts`（网上有教程），但它不支持 GNU 长选项。

对于长选项，您必须自己滚动：

```
filename=default
while (( $# > 0 ))
do
    opt="$1"
    shift

    case $opt in
    --help)
        helpfunc
        exit 0
        ;;
    --version)
        echo "$0 version $version"
        exit 0
        ;;
    --file)  # Example with an operand
        filename="$1"
        shift
        ;;
    --*)
        echo "Invalid option: '$opt'" >&2
        exit 1
        ;;
    *)
        # end of long options
        break;
        ;;
   esac

done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:56:17.200

您可以使用内置的“getopts”，如下所示：

```
#!/bin/bash

# Parse arguments
usage() {
    echo "Usage: $0 [-h] [-v] [-f FILE]"
    echo "  -h  Help. Display this message and quit.
    echo "  -v  Version. Print version number and quit.
    echo "  -f  Specify configuration file FILE."
    exit
}

optspec="hvf:"
while getopts "$optspec" optchar
do
    case "${optchar}" in
        h)
            usage
            ;;
        v)
            version
            ;;
        f)
            file=${OPTARG}
            ;;
        *)
            usage
            ;;
    esac
done 
```

这仅适用于单字符选项，不适用于像`-help`or之类的长选项`--help`。在实践中，我从未发现这是一个重大限制。任何复杂到需要长选项的脚本都可能是我会用不同的语言编写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:04:53.047

可能有更好的方法来做到这一点，但我发现这里很有用：每个参数都由 BASH 中的一个变量表示。第一个论点是`$1`。第二个是`$2`，以此类推。将选项字符串与第一个参数匹配，如果匹配，则相应地运行一些代码。

例子：

```
#!/bin/bash
if [ $1 == "--hello" ] 
    then
        echo "Hello"
    else
        echo "Goodbye"
fi 
```

如果您使用 C 或 C++ 编写代码，请使用该`**argv`变量。 `**argv`是一个双指针，它包含传递给程序的所有参数的列表（`argv[0]`作为程序名称）。

# python - 如果在 lambda 内执行

> ID：15407216
> 
> 赞同：1
> 
> 时间：2013-03-14T10:53:37.970
> 
> 标签：python, python-2.7, lambda

我有一个元组列表：

```
lst = [('654', '2.12', '86'), ('2', '756'), ('5', '1.77', '71'), ('1.65', '55')] 
```

功能

```
num = min(lst,key=lambda x: abs(float(x[1]) - 2)) 
```

`x[1]`在每个元组内的位置查找每个数字并输出`x[1]`最接近 2 的元组。是否可以调整函数以使其仅查找具有 的元组`len == 3`？

如果是这样，我想同时输出那个元组和下面的 2 项。例如，对于上面的最终结果应该是：

`[('654', '2.12', '86'), ('2', '756')]`有了这个，我认为 for 循环就足够了，所以我想我会管理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:56:46.610

如果列表总是在 3 元组和 2 元组之间交替，您可以使用

```
zip(*[iter(lst)]*2) 
```

将[项目组合成对](http://docs.python.org/2/library/itertools.html#itertools.izip)。然后你可以`min`基本上像以前一样使用：

```
In [39]: min(zip(*[iter(lst)]*2),key=lambda (x,y): abs(float(x[1]) - 2))
Out[39]: (('654', '2.12', '86'), ('2', '756')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:55:41.523

Lambda 只能包含表达式，因此您只能使用条件表达式：

```
lambda x: abs(float(x[1]) - 2) if len(x) == 3 else float('inf') 
```

但这只会返回一个 3 元素元组。该`key`函数只能考虑序列中的*一个*元素。

如果您的 3 元素元组后面*总是*有一个 2 元素元组，则需要将它们组合在一起，然后从这些配对元组中确定最小值（正如 unutbu 的答案所做的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:02:35.017

您可以使用生成器表达式过滤列表：

```
num = min((t for t in list if len(t) == 3), key=lambda x: abs(float(x[1]) - 2)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:06:07.630

你可以：

```
num = min([el for el in lst if len(el)==3], key=lambda x: abs(float(x[1]) - 2)) 
```

这突出了问题，您在列表中使用了异构数据。如果所有元组都不是同一个东西，它们可能不属于同一个列表。

# java - 从 WebSphere 管理控制台访问应用程序公开的 MBean

> ID：15407219
> 
> 赞同：0
> 
> 时间：2013-03-14T10:53:40.337
> 
> 标签：java, jakarta-ee, websphere, jmx

我的 Java EE 应用程序中需要一些可以在运行时监控和更新的配置参数。我认为在我的应用程序中使用 JMX MBean 是一个很好的解决方案。我的应用程序部署到 WebSphere AS 中，我想知道是否可以从 WebSphere 管理控制台 (Web) 访问我的自定义 MBean，以便对所有管理任务有一个访问点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:42:53.383

不，WebSphere 的管理控制台中没有访问自定义 MBean 的功能。

# events - GWT Widget 的 OnLoad 事件，如 TextBox、TextArea

> ID：15407220
> 
> 赞同：1
> 
> 时间：2013-03-14T10:53:45.120
> 
> 标签：events, gwt

我想`onLoad`赶上`TextBox`. 但我没有找到任何可以调用它的处理程序。GWT 提供`LoadHandler`了相同的目的。但我不知道我应该如何从`TextBox`.

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:27:11.290

看来您正在寻找[addAttachHandler()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/logical/shared/HasAttachHandlers.html#addAttachHandler%28com.google.gwt.event.logical.shared.AttachEvent.Handler%29)。

如果您正在设计`custom textbox`实现接口[HasAttachHandlers](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/logical/shared/HasAttachHandlers.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:12:21.600

TextBox 扩展[了 ValueBoxBase](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ValueBoxBase.html)，它有一个名为[onLoad()](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ValueBoxBase.html#onLoad%28%29)的受保护方法。

您所要做的就是以下

```
public class MyTextBox extends TextBox
{

  @Override
  protected void onLoad() {
   //Do your stuff
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:09:58.997

```
textBox.addAttachHandler(new Handler() {
  @Override
  public void onAttachOrDetach(AttachEvent event) {
   if (event.isAttached()){

     doMyOnLoadMethod();

   }
  }
}); 
```

# javascript - 识别和修复 javascript/prototype/jquery 冲突？

> ID：15407222
> 
> 赞同：0
> 
> 时间：2013-03-14T10:53:51.283
> 
> 标签：javascript, jquery, html, prototypejs

我的脚本遇到问题，无法找到合适的解决方法。我有这段代码，它使用 glassbox.js 及其所有附加功能，可以正常工作（它适当地显示了 glassbox），但是由于我将 JQuery 添加到文件中，它已经停止工作。我不确定如何重新排列或调用脚本以使其再次运行。注释掉的行 myBox.whatever 是具体导致问题的行：

```
@model OneEightyWebApp.Models.Centres
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" media="screen" />

<head>
    <title></title>

    <script src="../../Content/javascripts/prototype.js" type="text/javascript"> </script>
    <script src="../../Content/javascripts/scriptaculous/effects.js" type="text/javascript"></script>
    <script src="../../Content/javascripts/glassbox/glassbox.js" type="text/javascript"></script>

    <script type="text/javascript">
        var spaces = @Html.Raw(Json.Encode(ViewData["spaces"]))
        function glassLoad() {
            path_to_root_dir = "../../Content/";
            var myBox = new GlassBox();
            myBox.init('myBox', '600px', '400px', 'hidden', '', true, true);
           // myBox.apos('300', '300px');
           // myBox.appear();
            alert("clicked");
        }

    </script>
    <script src="../../Content/javascripts/prototype.js"> </script>
    <script type="text/javascript">
        document.observe('dom:loaded', function () {
            $$("body")[0].on('click', ".class1", function () {
                var myBox = document.getElementById("myBox");
                myBox.style.display = "block";
                glassLoad();
            });
        });
    </script>

    <script src="../../Content/jquery.js"></script>
    <script type="text/javascript">
        jQuery(function () {
            var array = [];
            jQuery("#centres").change(function () {
                var selectedCentre = $("#centres option:selected").text();
                $.getJSON("/Centres/output?centreName=" + selectedCentre, function (results) {
                    var data = results;
                    document.getElementById("container2").innerHTML = "";
                    var div;
                    for (var i = 0; i < document.getElementById("centres").value; i++) {
                        div = document.createElement("div");
                        div.className = "class1";
                        div.innerHTML = "Shop " + data[i];
                        div.innerHTML += "<br>";
                        div.innerHTML += "Floor Space: <b>" + spaces[i] + " m2 </b>";
                        div.style.width = "100px";
                        div.style.height = "100px";
                        div.style.padding = "0px";
                        div.style.float = "left";
                        document.getElementById("container2").appendChild(div);
                    }

                });
            });
        });
    </script>

</head>

<body>
    <div id="container1" style="width: auto; height: 50px;">
        <button style="margin: auto; vertical-align: top; float: left; font-size: 16px;" type="button" onclick="glassLoad();">Generate</button>
        @Html.DropDownList("centres", (List<SelectListItem>)ViewData["centres"])
        <select id="mySelect"></select>
    </div>
    <div id="container2" style="margin: 10px; float: left;"></div>

    <div id="myBox" style="display: none; width: 600px; height: 400px;">
        <div id="exitButton" style="position: absolute; left: 564px; bottom: 173px; z-index: 1001;" title="close">
            <a href="javascript:THIS.fade();">
                <img id="exitImage" style="border: none;" src="../../Content/javascripts/glassbox/skins/exitButton.png"></a>
        </div>

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:57:27.290

您必须将 jQuery 置于[noConflict](http://api.jquery.com/jQuery.noConflict/)中并在此处传递`$`到 ready 事件：

```
$.noConflict();
jQuery(function ($) {
  var array = [];
  ... // use $ from now on instead of jQuery 
```

这是一种方法，检查文档还有其他模式。

# c# - 代码中的 C# 样式 ComboBoxItem

> ID：15407223
> 
> 赞同：0
> 
> 时间：2013-03-14T10:53:51.327
> 
> 标签：c#, combobox, windows-store-apps

是否可以像这样设置 ComboBoxItem 的 FontWeight ？

```
 comboCategory.Items.Add("foo");
  (comboCategory.Items[0] as ComboBoxItem).FontWeight = FontWeights.Bold; 
```

Visual Studio 喜欢这段代码，但在运行时我得到一个 NullReferenceException。

或者我可以使用这段代码，但我正在寻找更聪明的东西：

```
 ComboBoxItem temp = new ComboBoxItem();
  temp.FontWeight = FontWeights.Bold;
  temp.Content = "foo";
  comboCategory.Items.Add(temp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:08:59.517

ComboBox 的`Items.Add()`函数接受`object`在您的第一个示例中为 a的类型`string`，然后您尝试将下面的行强制转换`string`为 a `ComboBoxItem`，因此您的空引用异常。

如果您想访问字体粗细属性，那么您必须执行与您的第二个建议类似的操作，以创建您的`ComboBoxItem`第一个并将其传递给`Add()`函数。

您可能会像下面这样“简化”您的代码，但对于此代码是否更清洁，这是一个见仁见智的问题：

```
comboCategory.Items.Add(new ComboxBoxItem() {FontWeight = FontWeights.Bold, Content = "foo"}); 
```

# css - % 在 CSS 位置的某个时候不工作

> ID：15407230
> 
> 赞同：0
> 
> 时间：2013-03-14T10:54:04.210
> 
> 标签：css, css-position

我正在将位置（以 % 为单位）应用于某些 div，但它不起作用。这是代码。

```
#transitions {
  position: absolute;
  top: 0;
  bottom: 70%;
  display: block;
} 
```

但是当我申请时：

```
 #transitions {
    position: absolute;
    top: 0;
    bottom: 70em;
    display: block;
  } 
```

它对我有用。

b/w % 或 em 有什么不同吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:02:05.563

`em`和之间有很多区别`%`。

`%`表示元素容器的百分比大小。在以下示例中，`<div>`将是页面宽度的 70%。

```
<body>
    <div>A div</div>
</body> 
```

CSS

```
div { width: 70%; } 
```

`em`表示基于当前的大写字母“M”的大小`font-size`。改用下面的 CSS，`<div>`将是 70 个“M”字符的大小。

```
div { width: 70em; } 
```

您的示例将`#transitions`元素的左侧定位在其容器的 70% 处。或 70 'M' 字符远离其容器的左侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:43:00.783

如果你想计算 % vs em 那么它很可能是 170% = 32px = 2 em 这样的字体大小你可以计算它 1 em = 16px 和 100px = 531.25 %

# c# - EditorFor/CheckBoxFor boolean 将 data-val-required 属性添加到 HTML，而无需将必需属性添加到模型

> ID：15407235
> 
> 赞同：8
> 
> 时间：2013-03-14T10:54:12.027
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我的模型类有一个没有必需属性的 bool 属性：

```
public class Test
{        
    public bool TestBool1 { get; set; }
} 
```

然后在我的剃刀视图中，我正在使用 EditorFor（CheckBoxFor 也会发生同样的事情）：

```
<div>
    @Html.LabelFor(m => m.TestBool1)
    @Html.EditorFor(m => m.TestBool1)
</div> 
```

这会产生以下 HTML：

```
<div>
    <label for="TestBool1">TestBool1</label>
    <input class="check-box" data-val="true" data-val-required="The TestBool1 field is required." id="TestBool1" name="TestBool1" type="checkbox" value="true">
    <input name="TestBool1" type="hidden" value="false">
</div> 
```

data-val-required html 属性来自哪里？

`@Html.CheckBox("TestBool1", Model.TestBool1)`有没有办法在不使用并将类型设置为的情况下阻止它这样做`bool?`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T10:58:44.003

从这个答案[数据注释中，为什么 boolean prop.IsRequired 总是等于 true](https://stackoverflow.com/questions/13957855/data-annotations-why-does-boolean-prop-isrequired-always-equal-true)

> DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
> 
> 将此添加到您的 application_start 中。默认情况下，MVC 将 [Required] 添加到不可为空的值类型（因为不能将 null 转换为 bool，所以它必须是 bool？）

你可以防止它发生，但因为你总是会发送布尔值（真或假），所以我通常会留下它

# c++ - C ++将结构数组清零？

> ID：15407242
> 
> 赞同：1
> 
> 时间：2013-03-14T10:54:31.090
> 
> 标签：c++

```
struct OBJECT
{
unsigned int Var1;
std::string Str1;
...
bool YesNo;
};

OBJECT Obj[ 327 ]; 
```

我对如何将 Obj 归零感到困惑。它有几种不同类型的元素。我是否必须将其所有成员设置为 0？比如…… `Obj[0].Str = "";` ？那么问题来了，正确的做法是什么？

我的尝试：

```
::memset( &Obj, 0, sizeof( Obj ) ); 
```

我不确定我是否正确地做...

哦，有没有更快的方法将数组归零？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T10:59:25.347

不要这样做，因为你的结构中有重要的成员（例如`std::string`）。如果您的所有成员都只是简单的数据类型，例如 、 或指针，您可以`int`这样做`char`。`double`

这种结构的正确方法是定义一个构造函数，它正确地初始化所有成员

```
struct OBJECT {
    OBJECT() : Var1(0), YesNo(false), ... {}

    unsigned int Var1;
    std::string Str1;
    ...
    bool YesNo;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:58:21.570

“正确”的方法是为您的结构添加一个构造函数方法，该方法初始化任何没有自己的构造函数的成员变量，例如：

```
OBJECT_STRUCT()
: Var1(0)
, YesNo(false)
{
} 
```

在该示例中，您会注意到`Str1`未初始化；这是因为`std::string`有自己的构造函数来初始化它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T10:59:02.430

提供自定义默认构造函数或使用编译器定义的默认构造函数：

```
std::fill(std::begin(Obj), std::end(Obj), OBJECT()); 
```

请注意，`fill`仅当您使用默认构造函数时，方法填充才有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:59:37.680

您应该将您的声明更改为

```
struct OBJECT
{
    unsigned int Var1;
    std::string Str1;
    ...
    bool YesNo;

   OBJECT()
   : Var1()
   , Str1()
   , ...
   , YesNo(false)
   {
       // Do Nothing
   }
}; 
```

数组 - 您应该使用`std::array`or `std::vector`- 将初始化对象。

# ruby-on-rails - 将哈希的内容保存到模型

> ID：15407244
> 
> 赞同：1
> 
> 时间：2013-03-14T10:54:33.990
> 
> 标签：ruby-on-rails, ruby, activerecord, model, nokogiri

慢慢实现我想要实现的目标。我正在通过屏幕抓取抓取数据并希望将数据保存到我的模型中，我有两列，home_team 和 away_team。到目前为止，我抓取了数据。

```
FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

def get_fixtures # Get me all Home and away Teams
doc = Nokogiri::HTML(open(FIXTURE_URL))
home_team = doc.css(".team-home.teams").map {|h| h.text.strip }
away_team = doc.css(".team-away.teams").map {|a| a.text.strip }
#team_clean = Hash[:home_team => home_team, :away_team => away_team]
#team_clean = Hash[:team_clean => [Hash[:home_team => home_team, :away_team => away_team]]]
end 
```

我已经讨论了两种将数据放入散列的方法，一种是散列，另一种是散列中的散列，我不确定我需要哪一个（如果有的话？）

因此，如果我想保存从我的 home_team 收到的数据，我会运行一个 rake 任务来执行此操作

```
def update_fixtures #rake task method
Fixture.destroy_all
get_fixtures.each {|home| Fixture.create(:home_team => home )}
end 
```

我想要实现的是能够同时拯救 home_team 和 away_team。我是否需要访问散列中的数据，如果需要，如何访问？这里有点丢失，但这是我第一次尝试这个

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:51:53.750

试试这个，

```
FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

def get_fixtures # Get me all Home and away Teams
  doc = Nokogiri::HTML(open(FIXTURE_URL))
  matches = doc.css('tr.preview')
  matches.each do |match|
    home_team = match.css('.team-home').text.strip
    away_team = match.css('.team-away').text.strip
    Fixture.create!(home_team: home_team, away_team: away_team)
  end
end 
```

这将循环播放比赛，`Fixture`并为每场比赛创建一个新的客队和主队。

**编辑：**

添加`.text.strip`

**编辑2：**

这也应该为您提供日期，

```
FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

def get_fixtures # Get me all Home and away Teams
  doc = Nokogiri::HTML(open(FIXTURE_URL))
  days = doc.css('#fixtures-data h2').each do |h2_tag|
    date = Date.parse(h2_tag.text.strip)
    matches = h2_tag.xpath('following-sibling::*[1]').css('tr.preview')
    matches.each do |match|
      home_team = match.css('.team-home').text.strip
      away_team = match.css('.team-away').text.strip
      Fixture.create!(home_team: home_team, away_team: away_team, date: date)
    end
  end
end 
```

它比前面的代码复杂一点，因为它必须使用一些 XPath 来调用`h2`包含日期的标记之后的下一个 HTML 元素。

它遍历`h2`HTML 中的所有 html 标签，`div#fixtures-data`然后`table`在每个`h2`.

# scripting - 制作这个脚本来运行命令

> ID：15407248
> 
> 赞同：0
> 
> 时间：2013-03-14T10:54:47.430
> 
> 标签：scripting, mirc

[http://prntscr.com/w9fb4](http://prntscr.com/w9fb4)
或

```
 on *:INPUT:#: {
  /set %ANSWER  $+ $1-
  /msg $active %ANSWER
  /unset %back.*
  /halt
} 
```

所以这个遥控器将我们输入的所有文本变成粗体......但是当这个脚本运行时我们不能在 Chanel 中写入命令（在 Chanel 的输入部分）。我怎样才能让它运行命令。
有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:48:33.843

很简单。

```
on *:input:*: {
  if (/* !iswm $1 || $ctrlenter) {
    say $+($chr(2),$1-)
    haltdef
  }
} 
```

# asp.net-mvc - 使用 AjaxCall 为 JQGrid 动态加载列

> ID：15407253
> 
> 赞同：1
> 
> 时间：2013-03-14T10:54:59.423
> 
> 标签：asp.net-mvc, jqgrid

我需要动态地将列加载到 Jqgrid 并尝试遵循 [jqGrid 和动态列绑定](https://stackoverflow.com/questions/2277962/jqgrid-and-dynamic-column-binding)

我正在尝试 MVC。对于列名，我从表中获取（其中包含要在 GRID 中显示的列列表）并返回简单的 Json 数据。

我如何为 ColModel 实现。例如：我需要像这样动态发送 JSon 对象

```
 {name: 'Airport', formatter: UrlFmatter, width: 95, align: "center", index: 'AIRPORT', searchoptions: { sopt: ['eq', 'ne', 'cn']} }
  {name: 'Country', width: 100, align: "center", index: 'Country', searchoptions: { sopt: ['eq', 'ne', 'cn']} } 
```

我的设计应该如何发送 json 来设置 colModel ？

我的 UrlFmatter 代码

```
function UrlFmatter(cellvalue, options, rowObject) {
                    return "<a href='DetailResult?airportname=" + options.rowId + "' >" + cellvalue + "</a>";
                } 
```

我如何根据您对格式化和取消格式化的回答编写？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:42:32.007

`formatter: UrlFmatter`我想您在 JSON 中发送有关格式化程序 ( ) 的信息时遇到问题。JSON 字符串不支持函数作为数据类型。解决问题的最简单方法似乎是我以与标准格式化程序相同的方式注册您的格式化程序。例如，您是否希望格式化程序具有`"myUrlFormatter"`可以使用以下名称的名称

```
(function ($) {
    'use strict';
    /*jslint unparam: true */
    $.extend($.fn.fmatter, {
        myUrlFormatter: function (cellValue, options) {
            // you should place here the code of 
            // your custom formatter UrlFmatter
        }
    });
    $.extend($.fn.fmatter.myUrlFormatter, {
        unformat: function (cellValue, options, elem) {
            // you should place here the code of 
            // your custom unformatter
        }
    });
}(jQuery)); 
```

您应该在*之后* `jquery.jqGrid.min.js`（或之后`jquery.jqGrid.src.js`）包含代码。注册格式化程序后，您可以将其`colModel`用作

```
{name: "Airport", index: "AIRPORT", formatter: "myUrlFormatter", width: 95,
    align: "center", searchoptions: { sopt: ["eq", "ne", "cn"]} } 
```

所以`formatter`属性的值将是**字符串**（`formatter: "myUrlFormatter"`）而不是函数（`formatter: UrlFmatter`）。

# cuda - CUDA 5.0：CUBIN 和 CUBLAS_device，计算能力 3.5

> ID：15407257
> 
> 赞同：3
> 
> 时间：2013-03-14T10:55:08.560
> 
> 标签：cuda, nvcc, cublas

我正在尝试编译一个使用动态并行性将 CUBLAS 运行到 cu​​bin 文件的内核。当我尝试使用命令编译代码时

```
nvcc -cubin -m64 -lcudadevrt -lcublas_device -gencode arch=compute_35,code=sm_35 -o test.cubin -c test.cu 
```

我明白了`ptxas fatal : Unresolved extern function 'cublasCreate_v2`

如果我添加`-rdc=true`编译选项，它编译得很好，但是当我尝试使用 cuModuleLoad 加载模块时，我得到错误 500：CUDA_ERROR_NOT_FOUND。来自 cuda.h：

```
/**
 * This indicates that a named symbol was not found. Examples of symbols
 * are global/constant variable names, texture names, and surface names.
 */
CUDA_ERROR_NOT_FOUND                      = 500, 
```

**内核代码：**

```
#include <stdio.h>
#include <cublas_v2.h>
extern "C" {
__global__ void a() {
    cublasHandle_t cb_handle = NULL;
    cudaStream_t stream;
    if( threadIdx.x == 0 ) {
        cublasStatus_t status = cublasCreate_v2(&cb_handle);
        cublasSetPointerMode_v2(cb_handle, CUBLAS_POINTER_MODE_HOST);
        if (status != CUBLAS_STATUS_SUCCESS) {
            return;
        }
        cudaStreamCreateWithFlags(&stream, cudaStreamNonBlocking);
        cublasSetStream_v2(cb_handle, stream);
    }
    __syncthreads();
    int jp;
    double A[3];
    A[0] = 4.0f;
    A[1] = 5.0f;
    A[2] = 6.0f;
    cublasIdamax_v2(cb_handle, 3, A, 1, &jp );
}
} 
```

注意： 的范围`A`是本地的，因此给定的指针处的数据`cublasIdamax_v2`是未定义的，因此`jp`在此代码中最终会成为或多或少的随机值。正确的方法是`A`在全局内存中。

**主机代码：**

```
#include <stdio.h>
#include <cuda.h>
#include <cuda_runtime_api.h>

int main() {
    CUresult error;
    CUdevice cuDevice;
    CUcontext cuContext;
    CUmodule cuModule;
    CUfunction testkernel;
    // Initialize
    error = cuInit(0);
    if (error != CUDA_SUCCESS) printf("ERROR: cuInit, %i\n", error);
    error = cuDeviceGet(&cuDevice, 0);
    if (error != CUDA_SUCCESS) printf("ERROR: cuInit, %i\n", error);
    error = cuCtxCreate(&cuContext, 0, cuDevice);
    if (error != CUDA_SUCCESS) printf("ERROR: cuCtxCreate, %i\n", error);
    error = cuModuleLoad(&cuModule, "test.cubin");
    if (error != CUDA_SUCCESS) printf("ERROR: cuModuleLoad, %i\n", error);
    error = cuModuleGetFunction(&testkernel, cuModule, "a");
    if (error != CUDA_SUCCESS) printf("ERROR: cuModuleGetFunction, %i\n", error);
    return 0;
} 
```

主机代码使用`nvcc -lcuda test.cpp`. 如果我用一个简单的内核（如下）替换内核并在没有的情况下编译它`-rdc=true`，它工作正常。

**简单的工作内核**

```
#include <stdio.h>
extern "C" {
__global__ void a() {
    printf("hello\n");
}
} 
```

提前致谢

*   索伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:32:22.640

您只是缺少`-dlink`第一种方法：

```
nvcc -cubin -m64 -lcudadevrt -lcublas_device -gencode arch=compute_35,code=sm_35 -o test.cubin -c test.cu -dlink 
```

您也可以分两步执行此操作：

```
nvcc -m64 test.cu -gencode arch=compute_35,code=sm_35 -o test.o -dc
nvcc -dlink test.o -arch sm_35 -lcublas_device -lcudadevrt -cubin -o test.cubin 
```

# mysql - MySQL 错误 1005

> ID：15407266
> 
> 赞同：2
> 
> 时间：2013-03-14T10:55:19.343
> 
> 标签：mysql, sql, mysql-error-1005

正确的代码是这样的：

```
CREATE TABLE Seller (
sID INT AUTO_INCREMENT
    PRIMARY KEY,
sName CHAR (10), 
sAddress CHAR (30)
)ENGINE = INNODB;
CREATE TABLE Sale (
sID INT AUTO_INCREMENT,
iName CHAR(10),
CONSTRAINT sa_pk
    PRIMARY KEY (sID, iName),
CONSTRAINT sa_fk1
    FOREIGN KEY (sID)
    REFERENCES Seller (sID)
    ON UPDATE CASCADE,
CONSTRAINT sa_fk2
    FOREIGN KEY (iName)
    REFERENCES Item (iName)
    ON UPDATE CASCADE
)ENGINE = INNODB;
CREATE TABLE Item (
iPrice REAL,
iStock INT,
iName CHAR(10)
    PRIMARY KEY,
iDescription CHAR (30)
)ENGINE = INNODB;
CREATE TABLE Copy (
oQuantity INT,
iName CHAR(10),
CONSTRAINT co_pk
    PRIMARY KEY (oQuantity, iName),
CONSTRAINT co_fk1
    FOREIGN KEY (oQuantity)
    REFERENCES Orders (oQuantity)
    ON UPDATE CASCADE,
CONSTRAINT co_fk2
    FOREIGN KEY (iName)
    REFERENCES Item (iName)
    ON UPDATE CASCADE
)ENGINE = INNODB;
CREATE TABLE Orders (
oSeller CHAR (10),
oTypes CHAR (10),
oQuantity INT,
oPrice REAL,
oID INT AUTO_INCREMENT
    PRIMARY KEY
)ENGINE = INNODB;
CREATE TABLE Customer (
cID INT AUTO_INCREMENT
    PRIMARY KEY,
cName CHAR (10),
cAddress CHAR (30)
)ENGINE = INNODB; 
```

我一开始就有删除命令，所以每次我运行这个脚本时，它们都被删除了，至少除了复制和销售之外，它们都被删除了。每当我尝试删除它们时它都会失败，因为它们从未被创建我不断收到错误 1005 (HY000) 废话，然后是无法创建表 x。请帮我解决这个烦人的问题。柏油！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:01:10.277

在你的`sale`桌子上，你有

```
CONSTRAINT sa_fk2 FOREIGN KEY (iName) REFERENCES Item (iName)
    ON UPDATE CASCADE 
```

同时，您`Item`随后将创建表。

* * *

要创建`Copy`表，您需要`oQuantity`在表中的字段上建立索引`Order`。

```
INDEX `oQty` (`oQuantity`) 
```

将上述内容添加到 Order 表可以让您创建表。

这是[sqlfiddle](http://sqlfiddle.com/#!2/69f4e)。

# mysql - 为什么包含 ' 的 MYSQL 字符串不安全？

> ID：15407267
> 
> 赞同：0
> 
> 时间：2013-03-14T10:55:24.537
> 
> 标签：mysql, database, database-security

伙计们，我是 mysql 安全的新手，当我在谷歌上搜索这个问题时，很多人警告我们应该检查 mysql 字符串，看看它是否包含 '，否则你有被注入 mysql 数据库的风险，但他们没有告诉我为什么？你能告诉我原因吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:01:36.673

假设您有一个用户表和一个登录表单。通常当用户登录时，您要确定他是否有帐户：

这是非常糟糕的 PHP：

```
"SELECT * FROM users WHERE username = '$username' AND password = MD5('$password');" 
```

现在你有一个用户名

> 1';删除表用户;#

会发生什么？

# vba - 取消通过 VBA 显示的“另存为”对话框时出现运行时错误

> ID：15407281
> 
> 赞同：6
> 
> 时间：2013-03-14T10:56:20.327
> 
> 标签：vba, save, word-2007

我有一个宏，它以某种方式格式化文档，然后使用`ActiveDocument.Save`.

但是，有时文档还没有保存，在某些情况下我不想保存它。不幸的是，在显示“另存为”对话框时单击“取消”会导致运行时错误 (4198) -

> 命令失败

有谁知道我怎样才能防止这种情况发生？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:05:30.960

请通过添加一些错误处理说明尝试以下操作：

```
On Error Resume Next    'to omit error when cancel is pressed
   ActiveDocument.Save

If Err.Number <> 0 Then   'optional, to confirmed that is not saved
   MsgBox "Not saved"      
End If
On Error GoTo 0         'to return standard error operation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:22:10.573

*更新：现在*

*1\. 测试文件之前是否已保存*
*2\. 如果文件未保存，则使用受控进程显示`SaveAs`对话框以保存文件或处理`Cancel`*

**代码**

```
Dim bSave As Boolean
If ActiveDocument.Path = vbNullString Then
bSave = Application.Dialogs(wdDialogFileSaveAs).Show
If Not bSave Then MsgBox "User cancelled", vbCritical
Else
ActiveDocument.Save
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T14:09:09.130

对于 vsto 开发者，请到这里

```
 if (Globals.ThisAddIn.Application.ActiveDocument.Path == String.Empty)
        {
            Word.Dialog dlg;
            Object timeout = 3000;
            dlg = Globals.ThisAddIn.Application.Dialogs[
                Word.WdWordDialog.wdDialogFileSaveAs];
            int result = dlg.Display(ref timeout);
        }
        else
        {
            Globals.ThisAddIn.Application.ActiveDocument.Save();
        } 
```

结果将存储按下哪个按钮（0-取消，1-确定，2-关闭）

# java - 在 Android 上以编程方式编辑 build.prop 的属性

> ID：15407289
> 
> 赞同：8
> 
> 时间：2013-03-14T10:56:42.600
> 
> 标签：java, android, file-io

我想知道是否可以从 Android 应用程序以编程方式打开 build.prop 文件并编辑其中的某些属性。Android中对这个文件有一定的限制吗？可以在没有root访问权限的情况下完成吗？

如果有人能指出我正确的方向或提供示例，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T11:02:18.560

打开和编辑 build.prop 文件需要 ROOT 权限。

在 Play 商店中查看此应用程序。[build.prop 编辑器](https://play.google.com/store/apps/details?id=org.nathan.jf.build.prop.editor&hl=en)。由于它是开源的，而且代码非常简单，可以作为一个说明点：[https ://github.com/nathanpc/Build.prop-Editor](https://github.com/nathanpc/Build.prop-Editor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:14:37.543

是的，需要 ROOT 权限，您可以通过添加以下行来获得 root 访问权限

`Process p = Runtime.getRuntime().exec("su");`

有关更多详细信息，请点击以下链接 [http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/](http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/)

# c# - const 字符串字段与“类型化”字符串

> ID：15407296
> 
> 赞同：4
> 
> 时间：2013-03-14T10:57:03.717
> 
> 标签：c#, string, parameters, constants, function-calls

我有一个像这样的小功能：

```
void Bar(string s)
{
*/ do somthing with the string here.*/
}

void Foo()
{
    Bar("Hello");
} 
```

如果我查看 IL 输出，它会给我以下信息：

```
.method private hidebysig instance void Foo() cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: ldstr "Hello"
    L_0006: call instance void TestApp.MainWindow::Bar(string)
    L_000b: ret 
} 
```

现在我想我会用一个`const string`字段来代替它。

```
const string str= "Hello";
void Foo()
{
    Bar(str);
} 
```

转换为**完全相同的**IL 片段。

现在我的问题是使用哪一个？

`Foo("Hello");`或者`Foo(cHello);`

感谢您的帮助！

--------------EDIT--------------------
更具体地说，我将其用于记录目的，以添加前缀一条消息：它只会在代码中出现一次！

所以它看起来更像这样：

```
void LogDebug(string msg)
{
    Log("[DEBUG]", msg)
}
void Log(string pre, string msg)
{
    // generates an output in form of
    // pre + msg
} 
```

:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:59:10.700

答案应该是显而易见的：因为 IL 是相同的，所以基于纯粹的源代码考虑使用最有效的方法。

通常，这意味着使用 是为了在您的方法`const string`中不出现魔法值。`Foo`如果常量只使用一次，这听起来可能不太令人信服，但如果将来甚至有可能多次使用它，那么[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)几乎是一个霰弹枪的论据。

**更新：**

在这种特定情况下（调试输出，常量保证只使用一次）我不认为常量提供任何值。我会硬编码字符串文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:58:48.997

`const`在代码中的编译时被替换。如果您使用`const`字符串而不是硬编码字符串会更好，因为它使它们易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:03:34.637

(1) 将 const 字符串用于私有或内部代码，如果它会使代码更具可读性，或者您将多次使用相同的字符串。

(2) 不要公开披露内容。改为使用属性。（特别是关于字符串。）

原因是它将 const 紧密绑定到引用它的程序集中。

有关该点的更多讨论，请参见此处：

[https://softwareengineering.stackexchange.com/questions/132747/is-having-public-constants-bad](https://softwareengineering.stackexchange.com/questions/132747/is-having-public-constants-bad)

# php - 在 extjs 4 树拖放中的叶子中放置一个节点

> ID：15407298
> 
> 赞同：1
> 
> 时间：2013-03-14T10:57:04.377
> 
> 标签：php, extjs, extjs4

嗨，我是 extjs 4 的新手，我在树拖放中遇到问题，在拖放和 dropi 中，将在叶子中放置一个节点，该叶子更改为文件夹，而该叶子更改为放置节点的父节点

在我的代码下面

```
// Go ahead and create the TreePanel now so that we can use it below
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Taxonomy',
    region: 'west',
    collapsible: true,
    split: true,
    multiSelect: true,
    height: '100%',
    width: '20%',
    minWidth: 100,
    rootVisible: false,
    autoScroll: true,
    store: store,
    viewConfig: {
        allowCopy: true,

        plugins: {
            ptype: 'treeviewdragdrop',
            appendOnly: true,
            ddGroup: 'selDD'
        },

        listeners: {
            beforedrop: function (node, data, overModel, dropPos, opts) {
                nodeval = data.records[0].data.text;
                //parent  = overModel.node.parentNode.id;
                this.droppedRecords = data.records;
                data.records = [];
            },
            drop: function (node, data, overModel, dropPos, opts) {
                var str = '';
                Ext.iterate(this.droppedRecords, function (record, node, data, dropPosition, dropFunction, parentNode) {
                    //  str += record.get('Patent_number') + ' (id = ' + record.get('Tech1') + ') dropped on ' +overModel.data.text + 'with id'+overModel.data.id+ '\n';
                    Ext.MessageBox.show({
                        title: 'Copy?,Drag/drop?',
                        msg: 'Do you wish to copy (or) drag/drop this node?',
                        buttons: {
                            ok: 'Copy',
                            no: 'Drag/drop',
                            cancel: 'Cancel'
                        },
                        buttonText: {
                            yes: "Copy",
                            no: "Drag/drop",
                            cancel: "Cancel"

                        },
                        fn: function (btn, text) {
                            if (btn == 'no') {
                                Ext.Ajax.request({
                                    url: 'json/dragedrop.php',
                                    method: "GET",
                                    params: {
                                        idFrom: treeID,
                                        idTo: overModel.data.id,
                                        taxo_id: '<?php echo $taxe_id;?>'
                                        //fromtext: data.records[0].data.text 
                                        //parentid:overModel.node.parentNode.id

                                    },
                                    success: function (response) {
                                        store.load();
                                    }
                                }); 
```

但是上面的代码不起作用，拖动节点不会掉入叶子中，它显示一个红色标记，

请建议并提供参考代码提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:09:59.497

我认为这不是一个正确的答案，但这是这个问题的另一种逻辑

`appendOnly:false,` 在给定的插件`droped node` `parent`中`hover node`，那个时候被删除的节点`hover node`变成了`parent`

我认为它只在某些时候使用

# visual-studio-2010 - VS 2010 ClickOnce - 为离线安装指定 URL？

> ID：15407302
> 
> 赞同：7
> 
> 时间：2013-03-14T10:57:16.983
> 
> 标签：visual-studio-2010, clickonce

我在 Win7 机器上使用 Visual Basic 2010 Express Edition。我想使用 ClickOnce 安装一个程序，以便它可以脱机使用（在我的“开始”菜单中可用）。我已将发布文件夹设置到我的硬盘驱动器上的某个位置。我将安装模式设置为“应用程序也可脱机使用（可从开始菜单启动）。当我选择立即发布时，我收到消息“请指定并安装 URL。”

为什么它不会安装到发布文件夹？我该如何纠正？

![安装 URLMessage](../Images/ccb7106abcbb273f93ac38a0f4f915fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T01:27:45.347

发布文件位置是您要将应用程序发布到的位置。

安装 URL 是您要安装它的位置。

您可以将其发布到 C 盘上的文件夹中，然后将其放在网络服务器上。这就是为什么这两个是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-06T20:42:09.310

与 2019 年相比：

单击“更新”并取消选中“应用程序应检查更新”由于是离线安装，因此不应检查更新

[![在此处输入图像描述](../Images/dd39043cd6104597df815b39bf0a76da.png)](https://i.stack.imgur.com/Y6HOm.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T11:01:17.553

发布路径似乎必须是网络路径或 Web URL，不能是我上面显示的形式。我能够通过使用笔记本电脑安装文件夹的家庭网络路径来部署应用程序并使该应用程序脱机可用：\\Users\Tim\Documents\Temp\Installations\OCRLibrary\

# web-services - JBoss EAP 5.1 服务器不使用 Windows 网络设置

> ID：15407303
> 
> 赞同：1
> 
> 时间：2013-03-14T10:57:18.983
> 
> 标签：web-services, networking, settings, jboss5.x

我正在尝试从我的应用程序中调用 Web 服务。我的系统受防火墙保护，我使用代理访问任何外部 URL/互联网访问。该应用程序在 JBoss EAP 5.1 服务器上运行。应用程序无法写入服务 URL 并出现 IO 异常：“无法传输消息”。

但是，当我尝试使用 IE/Firefox 访问服务 URL 时，它正在打开。尽管我从浏览器收到的 XML 响应指出了一个通用错误 - “无效的请求参数...”，这很明显。因为我没有从浏览器发送正确的请求 XML。

我真的对这种差异感到困惑。我曾经相信 JBoss 会选择标准的 Windows 网络设置，但在我的情况下不是。

我的代码如下：

```
String strUrl = "http://theurlgoeshere";
String requestXml = "<request></request>";
String wsResponse="";
SOAPConnection conn = null;

try {               
MessageFactory msgFac = MessageFactory.newInstance();
MimeHeaders mh = new MimeHeaders();
mh.setHeader("Content-Type", "text/xml; charset=UTF-8");

log.info("Request Xml:" + requestXml );
InputStream is = new ByteArrayInputStream(requestXml.getBytes("UTF-8"));
SOAPMessage reqMsg = msgFac.createMessage(mh, is);

SOAPConnectionFactory conFac = SOAPConnectionFactory.newInstance();
conn = conFac.createConnection();

SOAPMessage repMsg = conn.call(reqMsg, strUrl);     
ByteArrayOutputStream out = new ByteArrayOutputStream();
repMsg.writeTo(out);            
wsResponse = new String(out.toByteArray());
}
catch (Exception e) {
e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T22:15:22.710

前几天整理好了。基本上我现在正在使用 HttpURLConnection 在进行 Webservice 调用时在 java 代码本身中添加代理设置。刚刚结束这个问题，因为我的查询已经解决。

如果有人需要，将更新新代码。

# c++ - 无法使用#pragma omp parallel for 创建多个线程

> ID：15407306
> 
> 赞同：2
> 
> 时间：2013-03-14T10:57:23.553
> 
> 标签：c++, multithreading, visual-c++, openmp

全部。我是 OpenMP 的初学者。我想像这样使用 OpenMP：

```
float* Arrays;
int OneArrayLength = 100;
float* ArrayPointers[ArrayNums];
for(int i = 0; i < ArrayNums; i ++)
{
    ArrayPointers[i] = Arrays + i*OneArrayLength;
}
#pragma omp parallel for
for i = 0 to LastPointer
{
    Algorithm al;
    al.process(ArrayPointers[i])
} 
```

它没有像我预期的那样工作。我可以编译代码并运行它，但它并没有变得更快。

更新：感谢@nogard。将项目设置设置为支持（openmp）确实有效。我未能解决这个问题还有另一个原因。我使用 Interl 诊断工具来获取 .gap 文件。它没有给出关于优化这个循环的任何内容，但它可以给出一些关于如何优化其他循环的建议。我对此感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:07:22.663

我认为问题在于您没有放置适当的项目设置：

```
Configuration Properties -> C/C++ -> Language -> Open MP Support -> Yes (/openmp) 
```

默认情况下未设置此标志，因此 OpenMP 被禁用

要测试 OpenMP 线程的数量，您可以运行这个简单的程序：

```
int iam = 0;
int np = 1;

#pragma omp parallel default(shared) private(iam, np)
{
  #if defined (_OPENMP)
    np = omp_get_num_threads();
    iam = omp_get_thread_num();
  #endif
  std::cout << "Hello from thread " << iam << " out of " << np << std::endl;
} 
```

# c# - 使用 linq 解析文本

> ID：15407313
> 
> 赞同：-4
> 
> 时间：2013-03-14T10:58:01.557
> 
> 标签：c#, string, linq

我有这样的文字

```
 5       1     .021   -56.6   -5      0.4    -5      0\.    
   -.05     -.1     .05     -.1     .05      .1    -.05      .1       
   YESA      1\.                                                       
  .8507  .84993 
```

我必须得到

```
 5       1     .021   -56.6   -5      0.4   -5      0\.    
   -.05     -.1     .05     -.1     .05      .1    -.05      .1       
   YESA      1\.     0\.       0\.      0\.      0\.      0\.      0\.               
  .8507  .84993     0\.       0\.      0\.      0\.      0\.      0\. 
```

但是当我使用下一个构造时

```
 FileStream fs = new FileStream(fileName, FileMode.Open);
            StreamReader sr = new StreamReader(fs);
         while (!sr.EndOfStream)
        {
            string line = sr.ReadLine();
            string temp = System.Text.RegularExpressions.Regex.Replace(line, @"\s+", " ");
            string[] vector = temp.Split(' ');
            for (int i = 0; i < vector.Length; i++)
                Console.WriteLine(ConvertToFloat(ConvertString(vector[i])));
        } 
```

我得到第一个文本而不做任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:58:04.683

我不明白你为什么还要费心去解析浮点数。

看起来你只有几行项目（可能是也可能不是浮动），你必须完成 8 个项目的行。像

```
 foreach (string line in lines)
        {
            var words = line.Split( new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

            foreach(string w in words)
                Console.Write("{0,6}", w);

            // filling out
            for (int i = words.Length; i < 8; i++)
                Console.Write("{0,6}", "0.");

            Console.WriteLine();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:51:47.620

我使用两个辅助功能

```
private float ConvertToFloat(string line)//to check integer or float number
        {
            string temp = "";

            if (line[line.Length - 1] == ',' || line[0] == ',')
            {
                temp = line.Replace(',', '\0');
                return float.Parse(temp);
            }
            else
                return float.Parse(line);

        }
        private string ConvertString(string line)//change '.' to ','
        {
            return line.Replace('.', ',');
        } 
```

# makefile - 如何将命令行参数转发到“附属”品牌？

> ID：15407315
> 
> 赞同：0
> 
> 时间：2013-03-14T10:58:03.287
> 
> 标签：makefile, gnu-make

我有一个大致像这样的makefile

```
debug: 
  make -C build-debug

release: 
  make -C build-release 
```

现在，我运行“main” make

```
make -j4 debug 
```

我如何转发`-j4`到抵押品？请注意，我不想对其进行硬编码，我想转发传递给 main make 的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:49:25.377

从[手册](http://www.gnu.org/software/make/manual/make.html#Options_002fRecursion)中，：

> 如果您将 [-j] 设置为某个数值“N”并且您的操作系统支持它（大多数 UNIX 系统都支持；其他通常不会），则父 make 和所有子 make 将进行通信以确保存在它们之间只有“N”个作业同时运行...如果您的操作系统不支持上述通信，则始终将“-j 1”放入 MAKEFLAGS 而不是您指定的值。

如果您*真的*想覆盖此行为，那可能并不太难...

# javascript - 是否有抛出异常的 else 语句？

> ID：15407319
> 
> 赞同：0
> 
> 时间：2013-03-14T10:58:13.903
> 
> 标签：javascript, throw

我是 JavaScript 新手，但一般来说对编程/脚本并不陌生，我有一个关于`throw`异常的查询。

所以，我想知道的是有一种例外`else`声明。`throw`

例如

```
// More code above
try
{
    if(i=="something") {
        throw "'i' equals 'something'."
    }
    else
    {
        throw "'i' doesn't equal 'something'."
    }
}
// More code here 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:00:35.363

您可能正在寻找`finally`关键字

```
try
{
    if(i=="something") {
        throw "'i' equals 'something'."
    }
    else
    {
        throw "'i' doesn't equal 'something'."
    }
} catch( ex ) {
    // your exception handling code
} finally {
    // Statements that are executed after the try statement completes.
} 
```

演示：http: [//jsfiddle.net/7y6Hz/](http://jsfiddle.net/7y6Hz/)

# algorithm - 分组密码算法

> ID：15407324
> 
> 赞同：1
> 
> 时间：2013-03-14T10:58:28.767
> 
> 标签：algorithm, block, masking, block-cipher

有人可以通过示例为我提供一个好的块密码算法。这是字符串的数据屏蔽所必需的。算法应该快速且不易逆转，因为这将应用于数百万条记录。

无论哪种方式，您还可以为固定长度的数据屏蔽算法建议一些其他算法，该算法将快速且不易逆转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:04:56.563

使用 AES ，它是一种标准的、经过验证的安全并且具有广泛可用的库。它也应该很快。

# c++ - 为模板类重载运算符 << 时出现链接器错误

> ID：15407327
> 
> 赞同：3
> 
> 时间：2013-03-14T10:58:38.523
> 
> 标签：c++, templates

我使用视觉 C++。我有一个模板类，我想为它添加重叠操作我在头文件中像下面一样将它引入

```
 template <class T> class QuantityT;
    template <class T>
    inline std::ostream & operator<< (std::ostream & os,const QuantityT<T> &quantity);

    template <class T>
    class QuantityT{

            T quantity_;
            template<class T> friend inline std::ostream & operator<< <T>(std::ostream & os,const QuantityT<T> &quantity);
    }; 
```

在源文件中

```
 template <class T>
    inline std::ostream & operator<< (std::ostream & os,const QuantityT<T> &quantity){
    } 
```

但我收到链接错误：

> main.obj：错误 LNK2019：未解析的外部符号“类 std::basic_ostream > & __cdecl operator<<(class std::basic_ostream > &,class QuantityT const &)”(??$?6K@@YAAAV?$basic_ostream@ DU?$char_traits@D@std@@@std@@AAV01@ABV?$QuantityT@K@@@Z) 在函数“public: virtual void __thiscall log::print(class std::basic_ostream
> 
> > &)const " (?print@log@@UBEXAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@@Z

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:03:11.247

尝试将源文件的内容放入头文件：

```
template <class T>
inline std::ostream & operator<< (std::ostream & os,const QuantityT<T> &quantity){
} 
```

查看[此问题](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)以获取更多信息。

# ios - 由于图像加载问题，应用程序变慢

> ID：15407333
> 
> 赞同：0
> 
> 时间：2013-03-14T10:59:01.790
> 
> 标签：ios, objective-c, uikit, grand-central-dispatch

我在应用程序中加载内容时遇到问题，我看到数据是由应用程序获取的，但图像需要很长时间才能加载，是否有可能在后文中加载图像。代码如下：

```
NSDictionary *dict=[discussionArray objectAtIndex:indexPath.row];
UIImageView *avatarimage = (UIImageView *)[cell viewWithTag:4];
NSString *photoStrn=[dict objectForKey:@"photo"];

 dispatch_async(dispatch_get_global_queue(0,0), ^{
                   NSString *u=[NSString stringWithFormat:@"http://%@",photoStrn];
                   NSURL *imageURL=[NSURL URLWithString:u];
                   NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
                   dispatch_sync(dispatch_get_main_queue(), ^{
                   UIImage *dpImage = [UIImage imageWithData:imageData];
                   if (dpImage==nil)
                   {
                     dpImage = [UIImage imageNamed:@"profileImage.png"];
                   }
                   avatarimage.image = dpImage;

        }); 
```

如果您想了解更多详细信息，我将提供:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:12:45.720

您可以使用[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)来执行此操作：

```
dispatch_async(dispatch_get_global_queue(0,0), ^{
     for (NSDictionary *dic in discussionArray)
     {
        NSString *photoStr=[dic objectForKey:@"photo"];
        NSString * photoString=[NSString stringWithFormat:@"http://%@",photoStr];
        UIImage *dpImage =  [UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:photoString]]];
        if (dpImage==nil)
        {
            dpImage = [UIImage imageNamed:@"profileImage.png"];
        }
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:07:41.413

在此处获取[SDWebImage](https://github.com/rs/SDWebImage)并将其添加到您的项目中并包含

> UIImageView+WebCache.h

在类实现文件中

```
UIImageView *imag=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 40, 40)];
[imag setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",[[jsonarray objectAtIndex:indexPath.row]valueForKey:@"imgurl"]]] placeholderImage:[UIImage imageNamed:@"Icon@2x.png"]];
[self.view addSubview:imag];
[imag release]; 
```

SDWebImage 对于从 URL 加载图像更有用。

希望这可以帮助 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:08:21.647

詹姆士，

有了这条线，

```
[NSData dataWithContentsOfURL:[NSURL URLWithString:photoString]]] 
```

您在主线程上进行同步网络调用。当前线程将挂起，直到网络调用完成。

解决方案是进行异步网络调用。AFNetworking库提供了一个很好的[异步](https://github.com/AFNetworking/AFNetworking)加载图像的类别：[UIImageView+AFNetworking](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/UIImageView+AFNetworking.h)。

# node.js - Eclipse RCP：添加可选依赖项

> ID：15407334
> 
> 赞同：0
> 
> 时间：2013-03-14T10:59:02.003
> 
> 标签：node.js, eclipse-plugin, dependencies, eclipse-rcp

我[在 GitHub 上有开源项目 Nodeclipse](https://github.com/PaulVI/nodeclipse-1/) 我希望在插件安装期间，用户可以选择可选功能，如 Markdown 支持、JSHint 和其他有自己更新站点的插件。

如何在 Eclipse RCP 插件中做到这一点？

我想我需要在其中配置 feature.xml`org.nodeclipse.feature`

更新：

我需要为此开始使用 Tycho 吗？

![选择](../Images/98bdb467043c04135663120f27b379e4.png)

Perforce 安装示例

![在此处输入图像描述](../Images/74391a67a64e57dc2757290ec0e98f46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:07:29.217

不确定这是否可能。但是，您可以将功能拆分为多个功能。所以用户可以选择安装什么。

# macos - 提供字符串变量而不是文件路径作为命令行参数

> ID：15407336
> 
> 赞同：3
> 
> 时间：2013-03-14T10:59:04.200
> 
> 标签：macos, bash, command-line, posix

我想从我的应用程序中调用 OpenSSH - 我目前正在使用私有 rsa 密钥文件路径作为参数。

由于安全问题，我不想将 rsa 文件存储在磁盘上 - 有没有办法创建一个临时文件以将 rsa 文件的内容作为字符串变量进行引用？

Bash Process subsituition 看起来很有希望，并且似乎在终端中工作。

所以代替这个：

```
ssh -N -i /path/to/privatekey.rsa -R 16186:localhost:8888 hello.com 
```

我想做这样的伪代码：

```
ssh -N -i <("privatekeystuffdis88s8dsf8h8hsd8fh8d") -R 16186:localhost:8888 hello.com 
```

我在 OSX 上。

（顺便说一句，我从 Objective C 中的 NSTask 调用这一切）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:47:34.023

表单的[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)`<(...)`将括号中命令的标准输出发送到一个特殊的临时文件，并返回该文件的路径。这样一来，仅将文件名作为参数的命令就可以读取其他命令的输出。您可以通过回显替换来看到这一点：

```
$ echo <(true)
/dev/fd/63 
```

因此，如果您希望该特殊文件的内容是字符串“privatekeystuffdis88s8dsf8h8hsd8fh8d”，您需要执行以下操作：

```
ssh -N -i <(echo "privatekeystuffdis88s8dsf8h8hsd8fh8d") -R 16186:localhost:8888 hello.com 
```

**更新**

[`pipe(7)`](http://linux.die.net/man/7/pipe)“特殊临时文件”实际上只是外壳创建 的读取端的文件描述符。`/dev/fd`是 的符号链接`/proc/self/fd`，所以在上面的例子中，真正的“文件”实际上是`/proc/self/fd/63`，它看起来像`lr-x------ 1 user group 64 Mar 14 12:26 63 -> pipe:[1955808]`一个长列表。

这里重要的是它不是一个常规文件。它是一个命名管道，这意味着一旦从管道中读取数据，它就会从管道中删除。这对您的用例来说是一个问题，因为它似乎`ssh`多次打开/关闭身份文件：

```
$ strace ssh -vv -n -i ./identity-test some.server true 2>&1 | grep open.*identity-test
open("./identity-test", O_RDONLY)        = 4
open("./identity-test", O_RDONLY)        = 4
Enter passphrase for RSA key './identity-test': 
```

这意味着它将在第二次尝试打开和读取时获得不同且不完整的数据。因此，在这种情况下，您似乎不能使用进程替换。

# javascript - 使用 Node.JS Web 应用程序打开 Web 分析。出现错误'TypeError：doc is null'

> ID：15407337
> 
> 赞同：1
> 
> 时间：2013-03-14T10:59:05.527
> 
> 标签：javascript, open-source, analytics, web-analytics, web-analytics-tools

**场景：对于在**[Node.js](http://nodejs.org)上运行的 Web 应用程序，我们正在集成[OpenWebAnalytics](http://wiki.openwebanalytics.com/index.php?title=Installation)。

**问题**：在萤火虫它显示错误如下

```
TypeError: doc is null
[Break On This Error]   

...dth?window.innerWidth:document.body.offsetWidth;viewport.height=window.innerHeig... 
```

在名为**owa.tracker.combined.min.js的文件中的第****168行**

 **方法源代码：

```
 getIframeDocument: function (iframe) {
        var doc = null;
        if (iframe.contentDocument) {
            doc = iframe.contentDocument;
        } else if (iframe.contentWindow && iframe.contentWindow.document) {
            doc = iframe.contentWindow.document;
        } else if (iframe.document) {
            doc = iframe.document;
        }
        if (doc == null) {
            OWA.debug("Document not found, append the parent element to the DOM before creating the IFrame");
        }
        doc.open();  // TypeError: doc is null
        doc.close();
        return doc;
    } 
```

**问题**：任何人都可以知道此类问题的解决方案吗？

提前感谢您的大力帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:43:12.597

在我的应用程序中配置开放式 Web 分析时，我遇到了同样的问题。问题可能是您在 javascript 片段中提到的 baseUrl

例如：不正确`var owa_baseUrl = 'http://yourdomain/path/to/owa';`

正确的：`var owa_baseUrl = 'http://yourdomain/path/to/owa/';`

[仔细检查嵌入在 html 文件中的 javascript 片段。](http://wiki.openwebanalytics.com/index.php?title=Tracker)**

# android - 如何在 Facebook 墙上发布图像和消息时获得完美对齐

> ID：15407338
> 
> 赞同：1
> 
> 时间：2013-03-14T10:59:06.543
> 
> 标签：android, facebook, image, post, message

我想在 facebook 上发布带有消息和我的应用程序名称的图像。我的帖子必须是这样的：

![在此处输入图像描述](../Images/18e73982bd0e0aaf4a42ed7e59bdfa73.png)

我已经应用了以下代码

```
Bitmap bi = BitmapFactory.decodeResource(getResources(), R.drawable.bluerib);

ByteArrayOutputStream baos = new ByteArrayOutputStream();
bi.compress(Bitmap.CompressFormat.JPEG,100, baos);
data = baos.toByteArray();

Bundle params = new Bundle();
params.putByteArray("picture", data);
params.putString("method", messageToPost);

facebook.request("me");
String response = facebook.request("me/photos", params, "POST"); 
```

除了应用程序名称外，我可以成功地在 Facebook 上发送图像和按摩，但我想将其发布在 Facebook 墙上，我的照片不能保存在 Facebook 照片中，我希望左侧的图像完美对齐，然后是应用程序名称顶部和我的消息。如何做到这一点，我必须为此使用图形 API 吗？如果是如何使用它？如果没有，请为我提供解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:58:04.313

这里我是如何做到的。

```
private void publishFeedDialog() {
        System.out.println("Working");
        Bundle postParams = new Bundle();
        postParams.putString("name", "I am an Engineer");
        postParams.putString("caption",
                "Working very heard to make things work.");
        postParams
                .putString("description",
                        "This project is killing me, Still I am trying, and finally I got success.");
        postParams.putString("link", "http://www.kodebusters.com");
        postParams
                .putString(
                        "picture",
                        "http://cdn1.iconfinder.com/data/icons/iconslandsport/PNG/128x128/Soccer_Ball.png");

        new MYasync(postParams).execute();

    } 
```

在 AsyncTask 上运行您的网络调用，或者它可能通过异常

```
 class MYasync extends AsyncTask<Void, Void, Void> {

            Bundle params;
            private String res;

            public MYasync(Bundle params) {
                super();
                this.params = params;
            }

            @Override
            protected void onPostExecute(Void result) {
                System.out.println(res);
                super.onPostExecute(result);
            }

            @Override
            protected Void doInBackground(Void... pp) {
                try {
                    res = facebook.request("me/feed", params, "POST");

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }

        } 
```

# c# - Assembly.GetExecutingAssembly() 和 typeof(program).Assembly 之间的区别

> ID：15407340
> 
> 赞同：33
> 
> 时间：2013-03-14T10:59:08.777
> 
> 标签：c#, c#-4.0

`Assembly.GetExecutingAssembly()`和 和有什么不一样`typeof(program).Assembly`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-08-13T18:51:16.067

假设`program`在执行程序集中，它们都应该返回相同的值。但是，`typeof(program).Assembly`应该有更好`Assembly.GetExecutingAssembly()`的性能，因为堆栈遍历。在我机器上的微基准测试中，前者耗时约 20ns，而后者在约 600ns 时慢了 30 倍。

如果您控制所有代码，我认为您应该始终使用`typeof(program).Assembly`. 如果您提供了其他人可以构建到他们的程序集中的源代码，您将需要使用`Assembly.GetExecutingAssembly()`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-14T11:04:51.307

调用`Assembly.GetExecutingAssembly()`将返回包含正在调用的方法的程序集`Assembly.GetExecutingAssembly()`。

例如，调用`typeof(string).Assembly`将返回**mscorlib.dll**，因为它包含 type `String`。另一方面，如果您有一个名为**MyProject**的项目，并且在该项目中的某个位置调用`Assembly.GetExecutingAssembly()`它，它将返回代表**MyProject.dll的 Assembly 实例**

希望这可以澄清。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:11:28.527

**Assembly.GetExecutingAssembly()：**
获取包含当前正在执行的代码的程序集。以下示例获取当前运行代码的程序集。

```
Assembly SampleAssembly;
// Instantiate a target object.
Int32 Integer1 = new Int32();
Type Type1;
// Set the Type instance to the target class type.
Type1 = Integer1.GetType();
// Instantiate an Assembly class to the assembly housing the Integer type.  
SampleAssembly = Assembly.GetAssembly(Integer1.GetType());
// Display the name of the assembly currently executing
Console.WriteLine("GetExecutingAssembly=" + Assembly.GetExecutingAssembly().FullName); 
```

**typeOf()：**
主要用于反射。
typeof 运算符用于获取类型的 System.Type 对象。typeof 表达式采用以下形式： 要获取表达式的运行时类型，可以使用 .NET Framework 方法 GetType。

```
Example
// cs_operator_typeof.cs
// Using typeof operator
using System;
using System.Reflection;

public class MyClass 
{
   public int intI;
   public void MyMeth() 
   {
   }

   public static void Main() 
   {
      Type t = typeof(MyClass);

      // alternatively, you could use
      // MyClass t1 = new MyClass();
      // Type t = t1.GetType();

      MethodInfo[] x = t.GetMethods();
      foreach (MethodInfo xtemp in x) 
      {
         Console.WriteLine(xtemp.ToString());
      }

      Console.WriteLine();

      MemberInfo[] x2 = t.GetMembers();
      foreach (MemberInfo xtemp2 in x2) 
      {
         Console.WriteLine(xtemp2.ToString());
      }
   }
} 
```

输出

```
Int32 GetHashCode()
Boolean Equals(System.Object)
System.String ToString()
Void MyMeth()
Void Main()
System.Type GetType()

Int32 intI
Int32 GetHashCode()
Boolean Equals(System.Object)
System.String ToString()
Void MyMeth()
Void Main()
System.Type GetType()
Void .ctor() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-16T13:05:32.123

以下代码解释了差异。

```
//string class is defined by .NET framework
var a = Assembly.GetAssembly(typeof(string));
//a = FullName = "mscorlib, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=b77a5c561934e089" 
```

由于字符串是在 mscorlib 程序集中定义的，因此返回其全名。所以程序集名称将在定义类型的地方返回。如果我通过我正在执行此代码的课程，

```
//Program is the class where this code is being executed
var aa = Assembly.GetAssembly(typeof(Program)); 
//aa = FullName = "Obj_2_5_Using_Reflection, 
Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"

var b = Assembly.GetExecutingAssembly();
//b = FullName = "Obj_2_5_Using_Reflection, 
Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" 
```

# phpmailer - phpmailer 用于 php 变量

> ID：15407346
> 
> 赞同：0
> 
> 时间：2013-03-14T10:59:34.857
> 
> 标签：phpmailer, php

我正在运行 phpmailer 并且对它非常陌生。问题定义：在收到的邮件中看不到 php 变量数据，但可以正常看到 html 内容。下面是部分代码：

```
require 'PHPMailer/class.phpmailer.php';
$mail = new PHPMailer;
$mail->WordWrap = 50;                                 // Set word wrap to 50 characters
$mail->IsHTML(true);                                 // Set email format to HTML
$mail->Subject = 'Message';
$mail->Body    = '<body>
    <div align="center"><p7><strong>HELLO WORLD</strong></p7></div>
    <h9><u>Details</u></h9><br/>
<h9><strong>NAME:</strong> <?php echo "$name";?>  <?php echo "$place";?>
</body>';
$mail->AltBody = 'This is the body in plain text for non-HTML mail clients';
if(!$mail->Send()) {
   echo 'Message could not be sent.';
   echo 'Mailer Error: ' . $mail->ErrorInfo;
   exit;
}
echo 'Message has been sent'; 
```

看不到 php 下定义的数据。$name 和 $place 也是每封邮件的动态数据。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:05:26.087

您不能将 php 语句放在单引号中。改用以下内容：

```
$mail->Body    = '<body>
<div align="center"><p7><strong>HELLO WORLD</strong></p7></div>
<h9><u>Details</u></h9><br/>
<h9><strong>NAME:</strong>' . $name . ' ' . $place . '
</body>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:03:06.030

您需要将文本放在“而不是”之间。

PHP 只替换双引号字符串中的变量。

此外，您不应该在字符串中使用 php 代码。

```
$mail->Body = "
    <body>
    <div align=\"center\"><p7><strong>HELLO WORLD</strong></p7></div>
    <h9><u>Details</u></h9><br/>
    <h9><strong>NAME:</strong> $name $place
    </body>
"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:04:33.383

改为尝试：

```
$mail->Body    = "<body>
<div align=\"center\"><p7><strong>HELLO WORLD</strong></p7></div>
<h9><u>Details</u></h9><br/>
<h9><strong>NAME:</strong>$name $place
 </body>"; 
```

您不必在字符串中添加 php 标签，因为您已经在 php 上下文中！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:05:29.583

将正文替换为：

```
$mail->Body    = '<body>
    <div align="center"><p7><strong>HELLO WORLD</strong></p7></div>
    <h9><u>Details</u></h9><br/>
<h9><strong>NAME:</strong>'.$name.' '.$place.'</body>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:07:57.520

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    $message .= "Phone: 0181-4606260.<br>";
$message .="Mobile :09417608422.<br>";  

Send_Mail('abc@example.com','Welcome',$message,$headers); 
```

试试这个...

# git - 通过 git/gitolite 权限错误部署网站/webapp

> ID：15407350
> 
> 赞同：1
> 
> 时间：2013-03-14T10:59:43.863
> 
> 标签：git, unix, version-control, gitolite, githooks

我已经设置了一个开发/测试服务器，开发人员可以在其中通过 gitolite/git 将存储库推送到远程 repo/webserver。在存储库站点上一切正常，但是开发人员可以使用服务器：

**问题：**

我想将代码部署到 apache 文档根目录（chown'd apache:apcahe 和 chmod'd 755）。[我正在遵循这些说明](http://toroid.org/ams/git-website-howto)，并在编辑我的接收后挂钩时，如下所述：

```
#!/bin/sh
echo "deploying to DocumentRoot"
GIT_WORK_TREE=/var/www/www.example.com git checkout -f 
```

但是现在当我从我的本地仓库运行 git push 时，我得到了权限错误，例如：

```
error: git checkout-index: unable to create file .gitignore (Permission denied)
error: git checkout-index: unable to create file .htaccess (Permission denied) 
```

而且我的文档根目录是空的...... post-receive 挂钩以用户'gitolite'身份运行（不确定这是否重要）。

gitolite 已经在 sudoers 列表中，所以我想运行类似：

```
GIT_WORK_TREE=/var/www/www.example.com sudo git checkout -f 
```

但这似乎也不起作用，如果可能的话，我想避免[调用单独的 shell 脚本](https://stackoverflow.com/questions/12481197/deploying-node-apps-via-gitolite-and-post-receive-hook/12481490#12481490)。

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:06:55.060

首先，确保 git 帐户与 apache 帐户在同一组中。
（或者你需要回到我之前想要避免的[答案）](https://stackoverflow.com/questions/12481197/deploying-node-apps-via-gitolite-and-post-receive-hook/12481490#12481490)

您报告此作品：

```
 sudo GIT_WORK_TREE=..... git checkout -f 
```

但是通过一个裸仓库，您还可以看到：

```
 fatal: You are on a branch yet to be born 
```

（我不建议尝试让你的 gitolite 管理的*裸*仓库成为非裸仓库，就像在这篇[博文中一样](http://www.deanoj.co.uk/programming/git/using-git-and-a-post-receive-hook-script-for-auto-deployment/)

```
git config core.worktree /home/user/myproject
git config core.bare false
git config receive.denycurrentbranch ignore 
```

)

我更喜欢确保`/var/www/www.example.com`目录是一个 git repo，您​​可以在其中拉取，而不是尝试结帐。
所以我喜欢的钩子更多：

```
cd /var/www/www.example.com
git --git-dir=/var/www/www.example.com/.git --git-work-tree=/var/www/www.example.com pull 
```

(with `origin`, 默认使用的远程名称，`git pull`参考 gitolite bare repo)

# java - Struts 2 选择和区分选择项

> ID：15407352
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:59:53.377
> 
> 标签：java, hibernate, struts2, hql

我有一个`ArrayList`which 类型`empDetail`（一个 POJO 类）。

```
List<EmpDetail> empDetailList = new ArrayList<EmpDetail>(); 
```

此列表表示数据库中的一个表。我需要下拉列表的值，所以我做到了

```
<s:select list="empDetailList" listKey="country"  listValue="country" name="country"></s:select> 
```

通过这个我从数据库中得到所有行的国家列，它很好。但我需要这个下拉列表中的唯一国家。

我知道我可以编写一个 SQL 查询来获得不同的国家，但是在这种情况下如何做到这一点。

**更新 1：** 你们中的任何人都有 Hibernate 解决方案吗？

**更新2：** 我的POJO类如下...

```
package bean;

import java.io.Serializable;
import java.sql.Date;

public class EmpDetail implements Serializable{

    private static final long serialVersionUID = 1L;

    private Long     id;
    private String   name;
    private int  age;
    private String   address;
    private String   city;
    private String   section;
    private String   country;
    private String   classStudying;
    private String   fatherName;
    private String   motherNmae;
    private Date     DOJ;
    private String   certificates;
    private Date     CompletedDate;
    private String   crossCheckedBy;
    private Date     crossCheckedDate;
    private String   comments;

    //and its getters and setters...

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:09:07.280

如果要显示不同的选择项意味着

```
 EmpDetail empDetail = new EmpDetail();
 Map<Object, Object> empDetailMap = new LinkedHashMap<Object, Object>();
    if (empDetailList.size() > 0) {
        for (Iterator<EmpDetail> iter = industryDetail.iterator(); iter.hasNext();) {
            empDetail = (EmpDetail) iter.next();
            empDetailMap.put(empDetail.getId(),empDetail.getName());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:07:18.183

您需要按国家/地区对象分组。简单的 HQL 查询

```
from EmpDetail where id in (select max(id) from EmpDetail group by country) 
```

# c# - Facebook - 使用 Facebook 对话框发帖

> ID：15407353
> 
> 赞同：1
> 
> 时间：2013-03-14T10:59:54.770
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, facebook-opengraph

我管理从 FB 获取访问令牌。我可以在墙上发帖。但我需要显示弹出窗口（对话框？）以允许用户添加评论并查看他发布的内容（共享）。

我对我相信我使用的 Open graph 和图形 API 感到困惑。是一样的吗？贝娄是我的代码：

```
 private string CheckAuthorization()
    {
        string app_id = "xxxxxxxxxxxxxxxx";
        string app_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        string scope = "publish_stream,email,user_location,user_birthday";

        if (Request["code"] == null)
        {
           Response.Redirect(string.Format("https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",
           app_id, Request.Url.AbsoluteUri, scope));
        }
        else
        {
            Dictionary<string, string> tokens = new Dictionary<string, string>();

            string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
            app_id, Request.Url.AbsoluteUri, scope, Request["code"].ToString(), app_secret);

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            StreamReader reader = new StreamReader(response.GetResponseStream());

            string vals = reader.ReadToEnd();

            foreach (string token in vals.Split('&'))
                {
                    tokens.Add(token.Substring(0, token.IndexOf("=")),
                        token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                }

            return tokens["access_token"];

        }
    } 
```

上面的代码工作正常我正在获取访问令牌（当我没有登录时登录弹出窗口并弹出有关将共享哪些信息的信息）。

然后我在FB墙上发帖：

```
 var client = new FacebookClient(access_token);

            client.Post("/me/feed", new { message = "some text to post" }); 
```

我的问题是如何在发布之前获取弹出窗口，其中包含我发布的内容和添加用户自己评论的选项的描述。

# python - Python：获取默认网关的 MAC 地址

> ID：15407354
> 
> 赞同：3
> 
> 时间：2013-03-14T10:59:55.477
> 
> 标签：python, linux, ip, mac-address, arp

Python中有没有快速获取**默认网关的****MAC地址**的方法？

 **我无法从正在运行我的代码的**Linux机器发出任何****ARP 请求，因此它必须直接来自****ARP 表**。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:20:27.317

以下 DevFS 文件将提供此信息：

```
/proc/net/arp
/proc/net/route 
```

查找以 0/0 作为主机/掩码的路由条目：

```
Iface   Destination     Gateway         Flags   RefCnt  Use     Metric  Mask            MTU     Window  IRTT                                                       
eth0    00000000        B91A210A        0003    0       0       100     00000000        0       0       0 
```

并转换网关字段（它是 little-endian hex...grr）：

```
import struct
from IPy import IP
address = IP(struct.unpack('<I', struct.pack('>I', int(i, 16)))[0])
#Converts 'B91A210A' to IP('10.33.26.185') 
```

从那里，您可以在 arp 表中找到您的默认网关：

```
IP address       HW type     Flags       HW address            Mask     Device
10.33.26.185     0x1         0x2         e6:92:ec:f5:af:f7     *        eth0 
```

如果它没有出现，发出一个 ping，然后再次检查，然后失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:07:40.000

你在使用 Linux 吗？你可以解析`/proc/net/arp`文件。它包含网关的硬件地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:09:08.167

您可以读取`/proc/net/arp`并解析内容，这将为您提供几个已知的 IP-MAC 地址。

网关可能一直都是已知的，如果不是，您应该 ping 它，并且会自动生成一个 ARP 请求。

您可以在中找到默认 gw`/proc/net/route`******

# java - 如何在java中为ArrayList编写分页器

> ID：15407355
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:59:55.723
> 
> 标签：java

在我的项目中，我想展示一个分页器。我的 ArrayList 中有 100 个员工对象，现在我想在每个页面上只显示 10 个对象（意味着 10 个员工的信息）。单击下一步，我想显示接下来的 10 条记录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:13:35.577

哪种技术？您正在开发 Web 或桌面应用程序吗？如果您使用带有 JSF 的 Web 应用程序，您可以使用 primefaces 表分页器：http: [//www.primefaces.org/showcase/ui/datatablePagination.jsf](http://www.primefaces.org/showcase/ui/datatablePagination.jsf) 这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:17:30.677

以下是分页系统的基本原理：

```
public static void main(String[] args) {

    final int pageNumber = *X*;

    // list containing numbers from 1 to 100
    final List<Integer> list = populatedList();
    final int RESULTS_PER_PAGE = 10;

    // algorithm
    int to = pageNumber * RESULTS_PER_PAGE;
    int from = to - RESULTS_PER_PAGE;
    for (int i = from; i < to; i++) {
        System.out.println(list.get(i));
    }
}

public static List<Integer> populatedList() {
    List<Integer> list = new LinkedList<Integer>();
    for (int i = 1; i <= 100; i++) {
        list.add(i);
    }
    return list;
} 
```

例如，使用`pageNumber = 2`，您将获得以下输出：

```
11
12
13
14
15
16
17
18
19
20 
```

# asp.net - 兼容性问题是 IE10

> ID：15407357
> 
> 赞同：5
> 
> 时间：2013-03-14T11:00:04.673
> 
> 标签：asp.net, internet-explorer, iis, cross-browser

我有一个在 IE8、IE9 以及最新版本的 Firefox 和 Chrome 上看起来不错的 asp.net 网站。

服务器点击在所有网络浏览器中都可以正常工作..在 IE10 中它不工作..当点击 IE10 的“兼容性按钮”时它工作正常..

但我不能告诉所有用户打开兼容性按钮并浏览。

我想在编码方面做dis ..我试过了 `<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" >`

和

```
<system.webServer>
    <httpProtocol>
        <customHeaders>
            <clear />
            <add name="X-UA-Compatible" value="IE=EmulateIE7" />
        </customHeaders>
    </httpProtocol>
</system.webServer> 
```

这也是

[也试试dis](http://weblogs.asp.net/joelvarty/archive/2009/03/23/force-ie7-compatibility-mode-in-ie8-with-iis-settings.aspx)

我试过覆盖兼容模式，但无济于事：

但它在 IE10 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T12:19:49.567

试试这个

```
<meta http-equiv="X-UA-Compatible" content="IE=8, IE=9, IE=10, IE=Edge" /> 
```

这里 IE=Edge 意味着最高的兼容性。但是对于您的问题 IE=10 将是解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:08:15.803

这对我有用

```
<head runat="server">
<meta id="FirstCtrlID" runat="server" http-equiv="X-UA-Compatible" content="IE=8" />
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T17:29:33.217

尝试

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

IE 兼容性元标记已在对以下问题的回答中对此答案进行了详细描述。[<meta http-equiv="X-UA-Compatible" content="IE=edge"> 是做什么的？](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge)

# java - @AssertTrue 提交 JSF 页面时未调用方法

> ID：15407358
> 
> 赞同：3
> 
> 时间：2013-03-14T11:00:04.600
> 
> 标签：java, jsf, assert, bean-validation

我正在使用带有 hibernate-validator-4.2.0.Final 和 JSF 2.1 的 bean 验证。当我提交页面`@NotEmpty, @NotNull`时，.. 工作正常，但我的方法，用注释`@AssertTrue`永远不会被调用。

我将访问修饰符更改为public，将其重命名为getValid，但从未调用过该方法..

```
@AssertTrue(message = "test")
    private Boolean isValid() {
        return ....;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:55:59.747

JSF 不是通过*Validator#validate 验证*完整的 bean ，而是为每个表单字段调用*Validator#validateValue*。这是*一个*表单域吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:22:17.560

问题是并非所有字段都由 JSF 验证，只有我的 facelet 中的那些。

如果我打电话

```
SomeObject so = new SomeObject();
Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
        Set<ConstraintViolation<SomeObject>> violations = validator.validate(so); 
```

在测试中，isValid 方法被触发。

# android - 应用程序图标高度和宽度问题

> ID：15407360
> 
> 赞同：1
> 
> 时间：2013-03-14T11:00:06.667
> 
> 标签：android, android-icons

过去 3 年我一直在开发应用程序，我已将精确 72x72 和 48x48 的应用程序图标放入 mdpi 和 hdpi 文件夹

但它仍然没有覆盖屏幕上应用程序图标的全部宽度和高度，任何人都可以指导我可能是什么问题（请参阅应用程序图标周围有白色区域的屏幕截图）

任何帮助，将不胜感激。

![东区应用程序图标](../Images/52b3c83be6be219f3059a2712ddc3ff4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:18:25.637

感谢大家在这个问题上帮助我：

最后我自己解决了这个问题：

实际上，我的应用程序图标的分辨率为 48x48 和 72x72，具有透明背景，但它周围仍然显示白线。

更详细地研究这个问题，我知道它周围的那个图标有 2-3 像素的透明间隙，并且 android 将它渲染成它周围的白色背景。

向左、右、上和下扩展图像 100% 解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:04:58.520

图标应该是具有透明度的 png。

看起来您的图标有白色背景。

# sql-server - 在队列名称后查询 MSSQL？

> ID：15407367
> 
> 赞同：2
> 
> 时间：2013-03-14T11:00:24.240
> 
> 标签：sql-server, service-broker

我可以使用服务名称进行某种查询来检索队列名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:50:39.947

[`sys.services`](http://msdn.microsoft.com/en-us/library/ms174429.aspx)：

> `service_queue_id`此服务使用的队列的对象 ID。不可为空。

因此，大致如下：

```
SELECT name as service_name, 
   OBJECT_SCHEMA_NAME(service_queue_id) as queue_schema_name,
   OBJECT_NAME(service_queue_id) as queue_name 
FROM sys.services 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:24:08.190

```
SELECT ServiQueue.name AS 'QueueName'
FROM sys.service_contract_message_usages AS MessageUsage
INNER JOIN sys.service_contracts AS ServiceContract ON ServiceContract.service_contract_id =MessageUsage.service_contract_id
INNER JOIN sys.service_contract_usages ServContractUse ON ServContractUse.service_contract_id =ServiceContract.service_contract_id
INNER JOIN sys.services AS Servi ON Servi.service_id=ServContractUse.service_id
INNER JOIN sys.service_queue_usages AS SerQueueUse ON SerQueueUse.service_id = Servi.service_id
INNER JOIN sys.service_queues AS ServiQueue ON ServiQueue.object_id=SerQueueUse.service_queue_id
WHERE Servi.name like 'OrderDepartment' 
```

来源：[http ://blog.extreme-advice.com/2013/02/15/find-service-broker-object-like-contract-message-type-service-name-queue-name-in-sql-server/](http://blog.extreme-advice.com/2013/02/15/find-service-broker-object-like-contract-message-type-service-name-queue-name-in-sql-server/)

# javascript - 日期返回的 JavaScript 验证始终为 false

> ID：15407368
> 
> 赞同：0
> 
> 时间：2013-03-14T11:00:26.573
> 
> 标签：javascript

我正在尝试验证仅接受 dd/mm/yyyy 的日期。

我已使用以下代码进行验证，但它总是向我显示警报。

我的代码有什么问题？

当我使用时， **var bevalue ='10/10/1989';** 它工作正常。

在我使用的代码中， **value = $(this).val();** 获得价值。

然后将其转换为字符串

编辑：

```
$('input, textarea').live('blur', function () {
        var field = $(this).attr('name');
        var value = $(this).val();

if(field=='birthday')
  {   
        var bevalue = String(value);   
        var regbday =/^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d+$/;
        if(regbday.test(bevalue) == false)
        {
            alert('please Enter Birth date in dd/mm/yyyy');
           return false;
        }
} 
```

感谢大家回复我在正则表达式中的错误。我接受了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:29:47.443

是正则表达式不正确，

```
function checkBday(bevalue) {
    var regbday = /(0[1-9]|[12][0-9]|3[01])[\.\/\-](0[1-9]|1[012])[\.\/\-](19|20)\d\d/;
    if (regbday.test(bevalue) == false) {
        alert(bevalue + ' is not valid\nplease Enter Birth date in dd/mm/yyyy');
        return false;
    }
    return true
}
console.log(checkBday("14.03.2013")) //true
console.log(checkBday("14-03-2013")) //true
console.log(checkBday("14/03/2013")) //true
console.log(checkBday("14.03.12")) //false
console.log(checkBday("12.28.2013")) //false
console.log(checkBday(prompt("Enter Birthday in dd/mm/yyyy"))); 
```

这应该可行，这是[JSBIn上的一个示例](http://jsbin.com/oxitab/1/edit)

*编辑*
如果您只想匹配`/`用作分隔符的日期，请将正则表达式更改为
`/(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20)\d\d/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:34:14.510

你有错误的正则表达式，日期和月份部分被切换并且一些字符没有被转义。

使用这个公式：

```
var regbday = /^(0[1-9]|[12][0-9]|3[01])[\- \/\.](0[1-9]|1[012])[\- \/\.](19|20)\d\d+$/; 
```

# iphone - 使用 ccTouchesMoved 在预定义的路径上移动精灵

> ID：15407371
> 
> 赞同：1
> 
> 时间：2013-03-14T11:00:34.030
> 
> 标签：iphone, cocos2d-iphone, touch, ccsprite, catmull-rom-curve

我试图通过移动触摸在我定义的路径上移动精灵。但我无法与 cocos2D 中预定义的 CCCatmullRomBy Action 完全相同。请建议我该怎么做。

为了更好地理解，让我们假设一辆有路的汽车，我想在路上使用触摸来移动汽车。这条路是曲折的，就像 CCCatmullRomBy 一样，张力为 0

先感谢您。

# ios - 为什么UITextField在设置自己委托时会锁定

> ID：15407377
> 
> 赞同：1
> 
> 时间：2013-03-14T11:00:52.143
> 
> 标签：ios, objective-c, uitextfield

我有一个扩展 UITextfield 的类。I also have the same class set to be it's own delegate so when the text field is selected I can change the background color. 一旦我选择了文本字段并输入了几个字母，应用程序就会锁定并崩溃。

这是我的 .m 文件的样子

```
@implementation MyTextField

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self.delegate = self;

    }
    return self;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"run did begine editing");
    [self setBackgroundColor:[UIColor colorWithRed:0.204 green:0.239 blue:0.275 alpha:0.25]];
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSLog(@"run did end editing");
    [self setBackgroundColor:[UIColor clearColor]];
} 
```

这是.h

```
@interface MyTextField : UITextField <UITextFieldDelegate>

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:14:39.137

订阅`UITextFieldTextDidBeginEditingNotification`或`UITextFieldTextDidEndEditingNotification` `NSNotification`s。在回调中检查通知对象是否为 self。然后对其执行一些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:17:55.267

委托总是另一个`UIViewController`，因为事件是由定义协议的另一个类委托给它的。

当您可以访问同一个类中的所有变量和方法时，就不需要同一个类中的委托方法。

您只需调用`[self someFunction]`.

当您继承 UITextField 时，您甚至不需要为 UITextField 委托定义属性。您只需将其设置为不同的 viewController。

定义协议的类也只有声明，它不符合协议。

委托将是符合协议的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:14:14.307

这个问题的讨论应该引导你朝着正确的方向[self.delegate = self; 这样做有什么问题？](https://stackoverflow.com/questions/1747777/self-delegate-self-whats-wrong-in-doing-that)

# java - 无法从 java 启动 telnet 会话

> ID：15407383
> 
> 赞同：2
> 
> 时间：2013-03-14T11:01:14.253
> 
> 标签：java, command-line, cmd, telnet

我目前正在开发一个应该通过命令行启动 telnet 会话的 Java Applet。我目前的方法是运行：

```
String connectionString = "cmd /c start cmd.exe /k \"telnet\"";
Runtime.getRuntime().exec(connectionString); 
```

当我执行此操作时，cmd.exe 打开但显示“telnet 不是内部或外部命令、可运行程序或批处理文件”。

我确实设置了 telnet，打开 cmd 窗口并在那里执行 telnet 没有问题。我还尝试使用其他程序（rasdial、jarsigner）运行上述代码段，并且效果很好。

为什么从java启动时cmd.exe不能识别telnet？任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:52:55.750

如果 JVM 在 Windows 7 系统上是 32 位的，那么根据[这篇](http://www.coderanch.com/t/564125/java/java/Launching-telnet-java-program-fails)文章

*`...on a 64-bit Windows 7 system, telnet only works when launched from a 64-bit application....`*

您可以尝试支持 telnet 协议的[Apache Commons Net API 。](http://commons.apache.org/proper/commons-net//index.html)您可以参考[此](http://commons.apache.org/proper/commons-net//examples/telnet/TelnetClientExample.java)示例示例。您也可以参考[此](http://www.informit.com/guides/content.aspx?g=java&seqNum=40)参考指南。

# php - 如何在 mysql 中通过 PHP 传递序列化数据并反序列化到 jquery ajax？

> ID：15407385
> 
> 赞同：-3
> 
> 时间：2013-03-14T11:01:21.057
> 
> 标签：php, jquery, mysql, json

数据库

```
**username**
admin

**ref**
a:2:{i:0;s:5:"Facebook";i:1;s:6:"Forum";} 
```

PHP

```
$query = "SELECT * FROM users WHERE username='admin'";
echo json_encode($query); 
```

我如何反序列化 Ref 并传递给 echo json_encode($query); ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:04:25.783

你可以这样做

```
$query = "SELECT * FROM users WHERE username='admin'";

$rec    =   mysqli_query($query);
$row    =   mysql_fetch_assoc($rec);

$ref    =   unserialize($row['ref']);

$row['ref'] =   $ref;

echo json_encode($row); 
```

或者你也可以这样做

```
$data   =   array();
$data['admin']  =   $row['admin'];
$data['ref']    =   unserialize($row['ref']);

echo json_encode($data); 
```

# objective-c - 不断增加字体大小

> ID：15407386
> 
> 赞同：1
> 
> 时间：2013-03-14T11:01:21.893
> 
> 标签：objective-c, font-size

按住按钮时如何连续增加 UILabel/UITextView/... 的字体大小

我有一个：`@property(nonatomic) CGFloat fontSize;`初始化为 17 in`ViewDidLoad`

单击按钮时将调用此函数：

```
- (IBAction)increaseFontSize:(id)sender {
    [self.label setFont:[UIFont fontWithName:@"Helvetica" size:self.fontSize++]];
    NSLog(@"FONT SIZE: %f", self.fontSize);
} 
```

所以我需要的是在按住按钮时不断增加字体，我想我应该`increaseFontSize:`以某种方式重复调用该方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:04:27.940

1.  不要使用后自增运算符；这仅适用于整数。
2.  您需要存储当前的字体大小，以便它增加下一次迭代：

瞧：

```
- (IBAction)increaseFontSize:(id)sender
{
    self.fontSize = self.fontSize + 1.0;
    [self.label setFont:[UIFont fontWithName:@"Helvetica" size:self.fontSize]];
    NSLog(@"FONT SIZE: %f", self.fontSize);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:53:39.820

将这两行添加到`ViewDidLoad:`

```
 [self.button addTarget:self action:@selector(ActionStart:) forControlEvents:UIControlEventTouchDown];
    [self.button addTarget:self action:@selector(ActionEnd:) forControlEvents:UIControlEventTouchUpInside]; 
```

写这个

```
-(IBAction) ActionEnd:(id)sender{
    [myTimer invalidate];
    myTimer = nil;
}
-(IBAction) ActionStart:(id)sender{
    myTimer=[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(increaseSize) userInfo:nil repeats:YES];
}
-(void)increaseSize{
    self.fontSize = self.fontSize + 1.0;
    [self.label setFont:[UIFont fontWithName:@"Helvetica" size:self.fontSize]];
} 
```

尝试这个 。它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:39:57.620

逻辑在上述答案中是完美的。
只需将 Button Event 设置为“Touch Drag Inside”。

![按钮事件](../Images/90f7ddf8065cd19140da919d0c3fa0c2.png)

根据我的理解，它在我的测试应用程序中工作。

谢谢。

# c++ - 这个参数的声明是什么意思：“type (*name1) (const type& name2)”？

> ID：15407387
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:01:37.597
> 
> 标签：c++, pointers

在我需要修改的代码中，有一个具有多个参数的函数声明。正如预期的那样，每个参数都以下列方式声明：`arg_type arg_name`. 但是，on of the arguments 是通过以下方式声明的：`bool (*filter) (const row<aaa::bbb>& entity)`我不理解这个声明。

所以，我认为我们有一个可以有布尔值的论点，但它是什么`(*filter)`意思`(const row<aaa::bbb>& entity)`？

**添加**

为了更清楚，这里有更多的上下文：

`void func(int a, double b, bool (*filter) (const row<aaa::bbb>& entity))`.

**添加 2**

它以这种方式工作吗？

```
bool myFilter( const row<aaa::bbb>& e) { /* ... */ }

bool applyFilter( bool (*filter)(const row<aaa::bbb>& entity, bool& x)){
   return filter(x&entity);
}

applyFilter(myFilter entity, x); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:02:39.963

```
bool (*filter) (const row<aaa::bbb>& entity) 
```

`filter`是一个指向函数的指针，它接受 a`const row<aaa::bbb>&`作为唯一参数并返回 a `bool`。

### 例子

```
bool myFilter( const row<aaa::bbb>& e) { /* ... */ }

bool applyFilter( bool (*filter)(const row<aaa::bbb>&)){
    return filter(somerow);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:03:33.443

它声明了一个名为 的指针变量`filter`，它指向一个带有签名的函数（而不是你可能习惯的对象）`bool(const row<aaa::bbb>&)`，这意味着一个函数接受一个`row<aaa::bbb>`by const ref 并返回一个`bool`。

在 C++ 中声明函数指针的语法一般是`return-type (*variable-name)(argument-list)`，给你一个名为`variable-name`type的变量`returntype (*)(argument-list)`，这有点奇怪，但你习惯了。

# ruby-on-rails - 如何限制角色看不到产品的价格？

> ID：15407388
> 
> 赞同：0
> 
> 时间：2013-03-14T11:01:38.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, cancan, rolify

我有一个`Product`模型，如果用户以`guest`角色身份登录或未登录，我不希望他们能够在我的应用程序中看到产品的价格。

我正在使用 Devise、CanCan 和 Rolify。

我试过这个，在我的`ability.rb`：

```
user ||= User.new # guest user (not logged in)
if user.has_role? :guest
  can :read, [Product, Vendor, Banner]
  cannot :read, [Product.price]      
end 
```

但这似乎不起作用。我没有在我的视图中添加任何代码 - 我需要这样做吗，还是这个`ability`类根本不显示价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:33:49.677

我收回我说的话。您可以使用 CanCan 以某种方式做到这一点，但这似乎有点牵强。你可以试试下面的吗？

```
if user.has_role? :guest
  can :read, [Product, Vendor, Banner]
  cannot :view_prices, Product
end 
```

然后在您看来，您必须手动检查用户是否可以查看价格

```
<% if can? :view_prices, Product %>
  <%= product.price %>
<% end %> 
```

# php - PHP - 用于在 osCommerce 和 OpenCart 之间转换地址格式的正则表达式？

> ID：15407391
> 
> 赞同：0
> 
> 时间：2013-03-14T11:01:48.353
> 
> 标签：php, regex, opencart, oscommerce, street-address

我需要将使用 osCommerce 制作的整个电子商店导入 OpenCart。到目前为止，一切都很好。我已经成功导入了几乎所有内容，除了 SEO 和一些稀疏数据位，但地址格式有问题。

osCommerce 使用**$firstname $lastname$cr$streets$cr$city, $postcode$cr$statecomma$country**而 OpenCart 使用**{company} {firstname} {lastname} {address_1} {address_2} {postcode} {city} {country}** .

也许我错了，但是看看这些字符串集之间的基本区别，我认为正则表达式将是将 osCommerce 格式的地址格式字符串转换为 OpenCart 格式的地址格式字符串的合适工具。

但是，我在正则表达式中完全是空的。谁能告诉我哪个正则表达式最适合我的需求？或者，如果没有正则表达式是可行的，或者它们不是一个好主意，我应该用它们尝试哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:27:01.350

我假设`cr`代表回车符或换行符，并且`$`源字符串中有文字美元符号。

对于重新排序，您必须捕获地址的部分并在替换字符串中使用它们

```
^\$(.+?)\$(.+?)\$.\$(.+?)\$.\$(.+?)\$(.+?)\$.\$(.+?)\$(.+?)\$(.+)$ 
```

然后将其替换为

```
{}{$1}{$2}{$3}{}{$5}{$4}{$7} 
```

所以这将成为

```
$re = '/^\\$(.+?)\\$(.+?)\\$.\\$(.+?)\\$.\\$(.+?)\\$(.+?)\\$.\\$(.+?)\\$(.+?)\\$(.+)$/s';
$replacement = '{}{$1}{$2}{$3}{}{$5}{$4}{$7}';
$new_address = preg_replace($re, $replacement, $address); 
```

但您也可以[`explode`](http://www.php.net/manual/en/function.explode.php)用于拆分

```
$parts = explode('$', $address); 
```

然后通过重新排序和插入大括号将零件重新组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:04:55.950

OpenCart 地址存储为每个数据的单独字段。您提供的 OC 格式仅用于可视数据，例如发票上的地址。但是，该地址的所有数据都有其自己的字段，如果您查看您的`address`或`order`表格，您可以看到该字段。值得注意的是，地址也附有 ISO 代码，因此您需要在导入时考虑到这一点以避免出现问题。假设 osCommerce 以类似的方式存储数据（我没有亲自使用过），那么您只需将旧列映射到新列。但是，如果它们存储为单个文本并且您需要提取它，则可以使用它

```
%^(\w+) (\w+)\s+([\w ]+)\s+([\w ]+)\s+([\w ]+)\s+([\w]+),\s*(\w+)$% 
```

使用此作为示例地址进行测试

```
My Name
Street name
City name
P05T C0D3
State, Country 
```

# linux - 将文件内容回显到电子邮件主题中

> ID：15407404
> 
> 赞同：0
> 
> 时间：2013-03-14T11:02:34.380
> 
> 标签：linux, bash, echo

大家早

希望是一个简单的语法问题 - 我编写了一个脚本，而我需要回显一个文件的内容，该文件的内容只有一半。我得到的错误是它只回显文件的第一个单词并尝试发送电子邮件文件中的其他单词

IE

文件内容：猫坐在垫子上电子邮件主题为“The”，发送到的电子邮件为 cat,sat,on,the,mat,user@example.com

```
USER_HOME=$(eval echo ~${SUDO_USER})
CASEFILE="/home/user/text.txt"
rm $USER_HOME/text.txt
echo \

echo "Please enter some text"

echo \

read -p "Enter text: " CASE

echo $CASE > $USER_HOME/case.txt
OUT=$(awk '{ print $0 }' $CASEFILE)

echo "$OUT"

echo "testing" | mail -s $OUT user@example.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:45:46.390

我会尝试将双引号添加到`$OUT`：

```
echo "testing" | mail -s "$OUT" user@example.com 
```

# android - ViewPager 子元素影响父 LinearLayout（底部对齐错误）

> ID：15407413
> 
> 赞同：1
> 
> 时间：2013-03-14T11:02:54.517
> 
> 标签：android, xml, user-interface, android-viewpager, android-linearlayout

当在其中一个布局上使用带有选项卡导航的 ViewPager 时，我检测到 2 个布局之间存在布局一致性问题。对于 FragmentActivity（使用 viewpager）和正常活动，我有以下 2 个非常相似的 XML 布局：

**片段活动布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="1" >

    <package.ui.tabs.CustomViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/pager"
        android:layout_width="match_parent"

        android:layout_height="0dp"
        android:layout_weight="0.84"
        tools:context=".MainActivity" >
    </package.ui.tabs.CustomViewPager>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.16"
        android:background="@drawable/gradient_menu_bottom"
        android:orientation="horizontal"
        android:weightSum="4" >

    <!-- ...other stuff... -->

    </LinearLayout>

</LinearLayout> 
```

**（正常）活动布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.84">

    <!-- ...other stuff... -->

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.16"
        android:background="@drawable/gradient_menu_bottom"
        android:orientation="horizontal"
        android:weightSum="4" >

    <!-- ...other stuff... -->

    </LinearLayout>

</LinearLayout> 
```

请注意，CustomViewPager 是 SDK 通过创建新的 TabsActivity eclipse 项目提供的 ViewPager 实现。我将在下面添加代码，这样您就可以确保视图定位和测量不会以任何方式被覆盖：

**CustomViewPager.java**

```
public class CustomViewPager extends ViewPager {
    private boolean enabled;

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.enabled = true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onTouchEvent(event);
        }

        return false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onInterceptTouchEvent(event);
        }

        return false;
    }

    public void setPagingEnabled(boolean enabled) {
        this.enabled = enabled;
    }
} 
```

即使它们**在基本布局格式上完全相等**，因为它们具有相同的权重属性并使用相同类型的布局，这两个活动**在 Eclipse 所见即所得和运行时在屏幕底部的一个像素上都不同**- FragmentActivity 不会将最后一个 LinearLayout 与底部对齐，即使强制使用 0 边距属性也是如此，而正常活动的行为与预期一样。结果类似于下面链接中的图片（我对图片没有声誉）：

[布局错误](http://postimage.org/image/pfzd9v5rb/)

所以总而言之，使用 viewpager 会产生与屏幕底部意外的不良对齐。我最初使用根 RelativeLayout 来包含 viewpager，LinearLayout 和边距都可以，即使使用 viewpager 也可以与底部对齐。

问题是我需要它作为 LinearLayout 以便使用权重按比例缩放 2 个孩子，这样我就**避免**了：

1.  使用绝对倾角高度；
2.  为不同的屏幕密度创建多个布局文件；
3.  以编程方式和运行时更改布局行为以解决布局问题。

那么问题是如何使用 ViewPager 防止这种不一致，以便我可以在我的应用程序中拥有一个静态 LinearLayout，底部静态栏，当我切换活动时不会改变？

# python - 使用字符串，为新字符串命名

> ID：15407419
> 
> 赞同：0
> 
> 时间：2013-03-14T11:03:06.720
> 
> 标签：python, list

**我正在尝试做的事情：**

我在一个目录中有一些文件，我列出了这些文件：

```
filesInDir = os.listdir("scanfiles") 
```

在我得到这些之后，我试图将这些行分成单独的列表：

```
for files in filesInDir:
    sourceFile = open("scanfiles/" + files, "r")
    dynmicNameList = sourceFile.read().splitlines() 
```

我想要它，以便数组名称是文件的名称。到目前为止，对于这个问题，我只看到了更复杂的场景。但我无法让这个工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:04:41.847

您需要这些行的字典，而不是局部变量：

```
lines = {}

for files in filesInDir:
    sourceFile = open("scanfiles/" + files, "r")
    lines[files] = sourceFile.read().splitlines() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:08:44.150

我会使用关联数组

# c - 我正在尝试在 lcd 上显示浮点值，同样我必须先将其转换为字符串。但它不起作用

> ID：15407421
> 
> 赞同：-5
> 
> 时间：2013-03-14T11:03:12.457
> 
> 标签：c, embedded

`weather.outdooe_temp`是`float`每次我按下按钮时都会更新的值。`set_temp`是一个`float`功能`ascii`。如果我使用它，那么它会起作用，但如果我使用下面的代码则不会。

```
char Thermo_Buff66[4];
static void SetBox(ScreenObj_t const *pS, EVENT_MSG const *pMsg)
{
    //set_temp(weather.outdoor_temp,&a);//it works if i use this function.
    sprintf(Thermo_Buff66,"%2.1f",weather.outdoor_temp);
    (void)sprintf(Thermo_Buff,"%s\xc2\xb0""",Thermo_Buff66);
    (void)DataBoxHandler(pS, &msg, "Set Temp", (uint8_t *)Thermo_Buff);

    //currently displaying any # value....!!ing!!
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:24:06.907

```
char Thermo_Buff66[4];
sprintf(Thermo_Buff66,"%2.1f",weather.outdoor_temp); 
```

您分配的缓冲区 ( `Thermo_Buff66`) 对于表示室外温度（通常为 2 位）加上后面加一个数字的浮点数来说太短了`.`。确实，它没有空间用于终止`'\0'`字符。因此，立即更正将大小设置为`5`. 尽管如此，在世界末日的情况下（或者只是在一个非 SI 国家......咳嗽......美国），温度甚至可​​能达到 100 以上，在这种情况下，您再次溢出缓冲区。帮自己一个忙并使用`snprintf`.

无论如何，您进入`sprintf`缓冲区，然后将其用于其他东西，这是没有意义的。您可以直接在一个中完成所有操作，完全删除：`%s``sprintf``Thermo_Buff66`

```
(void)sprintf(Thermo_Buff, "%.1f\xc2\xb0", weather.outdoor_temp);
(void)DataBoxHandler(pS, &msg, "Set Temp", (uint8_t *)Thermo_Buff); 
```

旁注：`.`和 精度数字已经占用 2 个字符。因此，将最小宽度设置为 2 是多余的。也许您认为 2 in`%2.1`是 ? 之前的位数`.`？好吧，事实并非如此。这是最小的*整体*宽度。

# javascript - 在页面加载时添加 CSS 属性

> ID：15407426
> 
> 赞同：0
> 
> 时间：2013-03-14T11:03:34.060
> 
> 标签：javascript, css

我正在尝试将 css 属性添加到页面加载的现有规则中。它适用于`onclick`事件，但在页面加载时不运行。这是代码：

HTML

```
<ul id="list">
    <li>aa</li>
    <li>bb</li>
<ul>

<a onclick="changeIt(); return false" href="#">change background color</a> 
```

CSS

```
li {
    color: black;
} 
```

Javascript（jQuery 不适用于我的情况。）

```
function changeIt() {
 var theRules = document.styleSheets[1];
 theRules.insertRule("li{background-color: yellow;}", 1);
}
changeIt(); // doesnt run on page load 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:05:30.533

尝试在窗口加载时运行它：

```
window.onload = function() {
    changeIt();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:06:04.020

您可以随时尝试 `<body onload="changeIt()">` 它与 jquery document.ready 的功能不同，但它会在正文加载后起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:06:15.447

您是否尝试过在身体发生时`changeIt()`拨打电话？`onload`

```
<body onload="changeIt()">
<!-- Body here -->
</body> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:19:33.397

您的代码可能不起作用，因为当您的函数运行时 DOM 尚未准备好。在执行任何代码之前，有几种方法可以检查 DOM 是否准备就绪。最常见的方法是等待 onLoad 事件发生。在你的情况下，这可能看起来像`<body onload='changeIt();'>...</body>`

等待 onLoad 的问题之一是，如果页面加载时间过长，代码的执行就会延迟。事实上，DOM 甚至在页面加载之前就已经准备好了。因此，检查 DOM 准备情况的另一种方法是使用“DOMContentLoaded”事件，有关更多信息，请参见[http://www.javascriptkit.com/dhtmltutors/domready.shtml](http://www.javascriptkit.com/dhtmltutors/domready.shtml)。

# ruby-on-rails - 为什么 ActiveRecord 关联返回每个关联对象的两个副本

> ID：15407432
> 
> 赞同：0
> 
> 时间：2013-03-14T11:03:56.100
> 
> 标签：ruby-on-rails, ruby, activerecord

我有...

```
class Report < ActiveRecord::Base
  has_and_belongs_to_many :elements
end

class Element < ActiveRecord::Base
  has_and_belongs_to_many :reports
end 
```

我在命令行看到一些非常奇怪的行为：

```
$Element.all
[#<Element id: 1, name: "fdafda", created_at: "2013-03-12 02:10:56", updated_at: "2013-03-12 02:10:56">,
 #<Element id: 2, name: "Foo", created_at: "2013-03-14 10:46:56", updated_at: "2013-03-14 10:46:56">, 
 #<Element id: 3, name: "Bar", created_at: "2013-03-14 10:47:03", updated_at: "2013-03-14 10:47:03">]

$ Report.first.elements
[#<Element id: 2, name: "Foo", created_at: "2013-03-14 10:46:56", updated_at: "2013-03-14 10:46:56">, 
 #<Element id: 2, name: "Foo", created_at: "2013-03-14 10:46:56", updated_at: "2013-03-14 10:46:56">, 
 #<Element id: 3, name: "Bar", created_at: "2013-03-14 10:47:03", updated_at: "2013-03-14 10:47:03">, 
 #<Element id: 3, name: "Bar", created_at: "2013-03-14 10:47:03", updated_at: "2013-03-14 10:47:03">]

(rdb:2) Report.first.elements.uniq
[#<Element id: 2, name: "Foo", created_at: "2013-03-14 10:46:56", updated_at: "2013-03-14 10:46:56">, 
 #<Element id: 3, name: "Bar", created_at: "2013-03-14 10:47:03", updated_at: "2013-03-14 10:47:03">] 
```

元素的重复怎么`Report.first.elements`可能？我该如何阻止它？

```
rails -v
Rails 3.2.11
$ ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin12.2.1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:12:56.477

找到了答案。在报告/id/elements/new 的表单中有一个报告选择器。如果用户在报表选择器中选择了当前报表，则将在连接表中创建元素和报表之间的两个链接。

# java - 从 Java 中对 XML 进行排序和比较

> ID：15407435
> 
> 赞同：0
> 
> 时间：2013-03-14T11:04:12.160
> 
> 标签：java, xml, schema, nodes

我得到了 XML 和模式文件。我的目标是输出 XML 中的所有数据（不重复）并按出生日期排序此列表。目前我打印出了所有数据（有重复），我不知道下一步该做什么。我尝试了不同的事情，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:27.577

`HashSet`将取决于`Node.equals()`确定相等性的方法，并且您正在添加*不同的*节点，尽管具有相同的基础文本。从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)：

> 如果此集合不包含元素 e2，则将指定元素 e 添加到此集合中，使得 (e==null ? e2==null : e.equals(e2))

我会从 , 中提取基础文本 ( `String`) `Node`，并且 a`HashSet<String>`将正确确定唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:30:56.020

最好使用单节点详细信息创建 Java Bean (POJO)。覆盖`equals()`和`hashcode()`相同。将所有节点数据存储到 Bean 列表中。然后用于`LinkedHashSet`删除重复项。实现`Comparable`或使用`Comparator`和`Collections.sort()`排序相同。

* * *

在另一个类中扩展或封装`Node`并覆盖`equals()`和`hashcode()`相同。将所有`Node`s 存储到`List`新类实例中。然后用于`LinkedHashSet`删除重复项。实现`Comparable`或使用`Comparator`和`Collections.sort()`排序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:33:28.160

**编辑**

再次阅读该帖子后，我意识到我也需要删除重复项，所以：

您可以使用 a`TreeSet`强加 unqiueness 并按 DOB 排序 - 我假设具有相同名字、姓氏和出生日期的人是同一个人。

首先，我会将您的 Node 包装在一个实现的类中，该类`Comparable`还可以获取您拥有的所有这些属性。包装器需要实现`Comparable`，因为`TreeSet`使用此方法来确定元素是否不同（`a.compareTo(b) != 0`）以及如何对它们进行排序。

```
public static final class NodeWrapper implements Comparable<NodeWrapper> {

    private static final SimpleDateFormat DOB_FORMAT = new SimpleDateFormat("yyyy-MM-dd");
    private final Element element;
    private final Date dob;
    private final String firstName;
    private final String surName;
    private final String sex;

    public NodeWrapper(final Node node) {
        this.element = (Element) node;
        try {
            this.dob = DOB_FORMAT.parse(initDateOfBirth());
        } catch (ParseException ex) {
            throw new RuntimeException("Failed to parse dob", ex);
        }
        this.firstName = initFirstName();
        this.surName = initSurnameName();
        this.sex = initSex();
    }

    private String initFirstName() {
        return getNodeValue("firstname");
    }

    private String initSurnameName() {
        return getNodeValue("surname");
    }

    private String initDateOfBirth() {
        return getNodeValue("dateofbirth");
    }

    private String initSex() {
        return getNodeValue("sex");
    }

    private String getNodeValue(final String name) {
        return element.getElementsByTagName(name).item(0).getTextContent();
    }

    public Node getNode() {
        return element;
    }

    Date getDob() {
        return dob;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getSurName() {
        return surName;
    }

    public String getDateOfBirth() {
        return DOB_FORMAT.format(dob);
    }

    public String getSex() {
        return sex;
    }

    public int compareTo(NodeWrapper o) {
        int c;
        c = getDob().compareTo(o.getDob());
        if (c != 0) {
            return c;
        }
        c = getSurName().compareTo(o.getSurName());
        if (c != 0) {
            return c;
        }
        return getFirstName().compareTo(o.getFirstName());
    }

    @Override
    public int hashCode() {
        int hash = 5;
        hash = 47 * hash + (this.dob != null ? this.dob.hashCode() : 0);
        hash = 47 * hash + (this.firstName != null ? this.firstName.hashCode() : 0);
        hash = 47 * hash + (this.surName != null ? this.surName.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final NodeWrapper other = (NodeWrapper) obj;
        if (this.dob != other.dob && (this.dob == null || !this.dob.equals(other.dob))) {
            return false;
        }
        if ((this.firstName == null) ? (other.firstName != null) : !this.firstName.equals(other.firstName)) {
            return false;
        }
        if ((this.surName == null) ? (other.surName != null) : !this.surName.equals(other.surName)) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "FirstName: " + getFirstName() + ". Surname: " + getSurName() + ". DOB: " + getDateOfBirth() + ". Sex: " + getSex() + ".";
    }
} 
```

因此，如果出生日期、姓氏和名字都相等，我们假设它是同一个人 - 我们返回 0。这是一个很好的做法，如果`compareTo`以这种方式使用以使其**与 equals 一致，**那么如果`a.compareTo(b)==0`then `a.equals(b)`，我添加了要求`equals`和`hashCode`方法也是如此。

现在你可以`TreeSet`在你的代码中使用 a 来自动排序并保证 unqiueness：

```
final Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("file.xml"));

final Set<NodeWrapper> inimesteList = new TreeSet<NodeWrapper>();

final NodeList isa = doc.getElementsByTagName("isa");
for (int i = 0; i < isa.getLength(); i++) {
    inimesteList.add(new NodeWrapper(isa.item(i)));
}
final NodeList ema = doc.getElementsByTagName("ema");
for (int i = 0; i < ema.getLength(); i++) {
    inimesteList.add(new NodeWrapper(ema.item(i)));
}
final NodeList isik = doc.getElementsByTagName("isik");
for (int i = 0; i < isik.getLength(); i++) {
    inimesteList.add(new NodeWrapper(isik.item(i)));
}
System.out.println();
System.out.println("Total: " + inimesteList.size());

for (final NodeWrapper nw : inimesteList) {
    System.out.println(nw);
} 
```

我还添加了一个`toString`方法并用它来打印节点 - 这使代码更清晰。

这种`Document`方法虽然看起来比 JAXB 简单，但却充满了这种乏味。由于您已经有一个架构，我**强烈建议**您迁移到`xjc`JAXB 解组 - 这将使这类事情变得容易数百倍。

# java - 使用服务方法调用 servlet 的 init 和 destroy 方法

> ID：15407436
> 
> 赞同：1
> 
> 时间：2013-03-14T11:04:11.837
> 
> 标签：java, servlets

我正在阅读有关 servlet 的生命周期的信息并对此表示怀疑。我们可以像调用任何其他 java 方法一样在被覆盖的 servlet 服务方法中调用 servlet 的 init 和 destroy 方法吗？这会影响容器的实际流量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:10:45.293

你当然*可以*调用`init`and `destroy`from`service`方法。取决于这些方法的作用，即如果它们实际上*破坏*了 servlet，这可能是不明智的。

比如说，我有一个请求进来并遇到问题。我认为解决这个问题的最简单方法是调用`destroy`然后`init`“重新启动”servlet。

我的重启花费了非零时间，在此期间另一个请求进来了。此请求遇到问题。它还决定重新启动 servlet。

你看这是怎么回事...

我建议不要摆弄 servlet 生命周期方法并将其留给容器。如果你必须调用这些方法，那么要非常小心线程同步。

至于影响“容器的实际流程” - 容器无法知道您调用了该方法，这就是请求不断涌入的原因。容器将无视您调用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:11:33.380

是的，你可以打电话给他们，但没有必要这样做。此方法由 Servlet 容器使用。

如果您需要例如初始化内部状态，则应该使用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:13:15.000

方法`init()`和`destroy()`默认值是空的，您应该覆盖它们以获取/释放资源（例如）。

您可以调用它们，它不会影响 servlet 生命周期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:23:15.137

你可以调用这些方法没有问题。但是它们是生命周期方法。无论容器执行的操作是servlet类的实例化和销毁，都不会在那个时候发生。

每当被容器调用时，只会发生那些操作（对象实例化和销毁）

# c++ - 将非二次矩阵转置到另一个矩阵

> ID：15407447
> 
> 赞同：0
> 
> 时间：2013-03-14T11:04:44.523
> 
> 标签：c++, eigen

我尝试从一个*转换*`MatrixX*`为另一个（不是二次的，但具有正确的尺寸）。然而，我能找到的最好的是`Transpose< Derived > ::transpose()`函数。

是否有一个调用将结果放入已经分配的矩阵而不是分配一个新的？

编辑：

实际上我是`Eigen::Map`在 Matrix 上使用的。

```
typedef Eigen::Matrix<std::uint8_t, Eigen::Dynamic, Eigen::Dynamic> matrix_type;
typedef Eigen::Map<matrix_type> map_type;

const map_type src ( src_ptr , width , height );
      map_type dest( dest_ptr, height, width  );

map.transposeInPlace(); 
```

使用`transposeInPlace()`会触发`Derived& DenseBase<Derived> ::lazyAssign(const DenseBase<OtherDerived>& other)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:06:39.667

尝试使用`transposeInPlace()`函数

这是文档：[http ://eigen.tuxfamily.org/dox/TutorialMatrixArithmetic.html](http://eigen.tuxfamily.org/dox/TutorialMatrixArithmetic.html)

> 对于就地转置，例如在 a = a.transpose() 中，只需使用 transposeInPlace() 函数：

```
MatrixXf a(2,3); a << 1, 2, 3, 4, 5, 6;
cout << "Here is the initial matrix a:\n" << a << endl;
a.transposeInPlace();
cout << "and after being transposed:\n" << a << endl; 
```

* * *

更新：正如 Zeta 在评论中提到的，矩阵对象应该是可调整大小的——这对于所有 MatrixX* 对象都是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:34:30.457

在 Matrix 上使用确实会导致断言，因为对于（AKA 一个错误）`Eigen::Map`来说，这似乎`transposeInPlace`是不可能的。`Eigen::Map`

对我来说幸运的是，使用常规`::transpose`很好，因为`Eigen`使用后期分配数据。

# oracle - Oracle Stored Proc Varchar 3 字符限制

> ID：15407448
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:04:47.430
> 
> 标签：oracle, stored-procedures

这是我的存储过程：

```
CREATE OR REPLACE
PROCEDURE "YOUQI_SP"
(
    INPUT1 IN VARCHAR2,
    INPUT2 IN VARCHAR2,
    OUTPUT1 OUT VARCHAR2
)
AS
BEGIN
    OUTPUT1 := INPUT1 || INPUT2;
    DBMS_OUTPUT.PUT_LINE('INPUT1 : ' || INPUT1);
    DBMS_OUTPUT.PUT_LINE('INPUT2 : ' || INPUT2);
    DBMS_OUTPUT.PUT_LINE('OUTPUT1 : ' || OUTPUT1);
END YOUQI_SP; 
```

执行没有问题：`BEGIN YOUQI_SP('a', 'bc', :output1); END;`. 结果如下：

```
Array
(
    [output1] => abc
)
Array
(
    [0] => INPUT1 : a
    [1] => INPUT2 : bc
    [2] => OUTPUT1 : abc
) 
```

但是，如果我在输入中再添加一个字符，我将收到错误消息：

```
[code] => 6502
[message] => ORA-06502: PL/SQL: numeric or value error: character string buffer too small ORA-06512: at "YOUQI_SP", line 9 ORA-06512: at line 1 
```

通过将变量直接分配给 进一步证明了这一点`OUTPUT1`。它最多只能容纳 3 个字符。知道如何让它返回超过 3 个字符吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:39:34.757

看来您的输出变量太短了。考虑：

```
SQL> var output1 varchar2(2)
SQL> BEGIN YOUQI_SP('aXXX', 'bcXXXX', :output1); END;
  2  /
BEGIN YOUQI_SP('aXXX', 'bcXXXX', :output1); END;
*
ERROR at line 1:
ORA-06502: PL/SQL: numeric or value error: character string buffer too small
ORA-06512: at "TEST1.YOUQI_SP", line 9
ORA-06512: at line 1

SQL> var output1 varchar2(30)
SQL> BEGIN YOUQI_SP('aXXX', 'bcXXXX', :output1); END;
  2  /
INPUT1 : aXXX
INPUT2 : bcXXXX
OUTPUT1 : aXXXbcXXXX 
```

PL/SQL 过程成功完成。

# php - 处理表单后将变量传递给 URL

> ID：15407450
> 
> 赞同：0
> 
> 时间：2013-03-14T11:04:52.440
> 
> 标签：php, url

我目前正在研究一个退货系统设计，该设计正在添加到我们当前的电子商务系统中——我被困在订单号变量被传递到感谢页面的部分。

目前，客户进入订单页面，点击返回链接（将他们发送到表单），这是一个设置的 url，订单号动态添加到 url。然后，此订单号会从表单发送到表单处理器，后者会通过电子邮件向我们发送订单的详细信息。

一切正常，直到重定向到感谢页面。

在表格上，我有：

```
if(isset($_POST['submitted']))
 {
  if($formproc->ProcessForm())
 {
  $formproc->RedirectToURL();
 }
} 
```

在表单处理器中，我有：

```
function RedirectToURL()
{
$orderurl = $_POST['orderno'];

    $url = 'thank-you.php?returnreq=' . $orderurl;
    header("Location: $url");
    exit;
} 
```

然而，这在thank-you.php页面url中没有返回订单号，尽管订单号被正确地传递给了处理器（因为它发送了一封包含正确订单号的电子邮件）

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:16:40.347

检查 $_POST['orderno'] 在 ProcessForm 方法中是否未设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:11:04.787

尝试将订单号作为函数参数发送

```
function RedirectToURL($orderurl)
{
$url = 'thank-you.php?returnreq=' . $orderurl;
header("Location: $url");
exit;
} 
```

也从 fn 调用中更改，例如

```
....
$formproc->RedirectToURL($_POST["orderno"]);

.... 
```

# html - IE 不会占用链接背景颜色的全部高度

> ID：15407452
> 
> 赞同：0
> 
> 时间：2013-03-14T11:04:56.623
> 
> 标签：html, css, internet-explorer, menu, hyperlink

所有浏览器都很好地显示了我的网站，只有 Internet Explorer 没有。我有一个在 CSS 中设置背景颜色的菜单，我添加了填充以确保链接本身周围有空间。Internet Explorer 不采用底部填充。

这是 HTML：

```
<div class="moduletable_menu">
  <ul class="nav menu">
     <li class="item-101 current active parent"><a href="/" >Reclamebureau</a></li>
     <li class="item-102"><a href="/contact.html" >Contact</a></li>
     <li class="item-125"><a href="/diensten.html" >Diensten</a></li>
     <li class="item-126"><a href="/portfolio.html" >Portfolio</a></li>
  </ul>
</div> 
```

这是悬停和活动状态的 CSS 代码：

```
ul.menu li a:hover,
ul.menu li.active a,
ul.menu li.current a {
  display:inline;
  color: #ffffff;
  background-color: #9a5574;
  z-index:10;
  text-decoration:none;
  padding: 21px 14px 50px 14px;
} 
```

这是我正在谈论的网站：www.appelmeule.com

非常感谢

# oracle - 除非我存储值，否则序列不会增加

> ID：15407456
> 
> 赞同：4
> 
> 时间：2013-03-14T11:05:04.257
> 
> 标签：oracle, plsql, oracle-xe

在常规 SQL 中，每次调用时我的序列都会递增`.NEXTVAL`：

```
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 54
SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL; -- 55
SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL; -- 56
SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL; -- 57
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 57 (54+3, correct) 
```

但是，在 PL/SQL 块内的动态 SQL 中，它不会递增：

```
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 57
BEGIN
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL';
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL';
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL';
END;
/
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 57 
```

...除非我将值存储到变量中：

```
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 57 (!)
DECLARE
    FOO INTEGER;
BEGIN
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL' INTO FOO;
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL' INTO FOO;
    EXECUTE IMMEDIATE 'SELECT PDF_DATOS_TITULO_ID_SEQ.NEXTVAL FROM DUAL' INTO FOO;
END;
/
SELECT PDF_DATOS_TITULO_ID_SEQ.CURRVAL FROM DUAL; -- 60 (57+3, correct) 
```

有什么解释？它是记录在案的行为`EXECUTE IMMEDIATE`吗？

*[在你问之前，SQL 需要是动态的，因为序列名称是可变的。]*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T11:29:34.853

当您省略 into 或批量返回到子句时，Oracle 将仅解析 sql 而不会从中发出任何提取。文档中没有明确说明会发生这种情况，但是文档确实指定了当您有 1 行返回时应该使用 INTO，如果您有可能返回超过 1 行，则应该使用 bulk。

例如：

```
SQL> create sequence testseq;

Sequence created.

SQL> alter session set events '10046 trace name context forever';

Session altered.

SQL> exec execute immediate 'select testseq.nextval from dual';

PL/SQL procedure successfully completed.

SQL> alter session set events '10046 trace name context off';

Session altered.

SQL> exit 
```

我们在跟踪中看到 Oracle 没有打扰 FETCH 阶段：

```
=====================
PARSING IN CURSOR #140341213531640 len=32 dep=1 uid=83 oct=3 lid=83 tim=1363260261727946 hv=956010684 ad='7ac66b58' sqlid='56jwk2hwgr45w'
select testseq.nextval from dual
END OF STMT
PARSE #140341213531640:c=4001,e=50473,p=0,cr=2,cu=0,mis=1,r=0,dep=1,og=1,plh=112670795,tim=1363260261727944
EXEC #140341213531640:c=0,e=219,p=0,cr=0,cu=0,mis=0,r=0,dep=1,og=1,plh=112670795,tim=1363260261728249
STAT #140341213531640 id=1 cnt=0 pid=0 pos=1 obj=79530 op='SEQUENCE  TESTSEQ (cr=0 pr=0 pw=0 time=181 us)'
STAT #140341213531640 id=2 cnt=0 pid=1 pos=1 obj=0 op='FAST DUAL  (cr=0 pr=0 pw=0 time=1 us cost=2 size=0 card=1)'
CLOSE #140341213531640:c=4001,e=24391,dep=1,type=3,tim=1363260261752736
EXEC #140341212444728:c=8002,e=75407,p=0,cr=2,cu=0,mis=0,r=1,dep=0,og=1,plh=0,tim=1363260261752783

*** 2013-03-14 11:24:29.866
CLOSE #140341212444728:c=0,e=37,dep=0,type=0,tim=1363260269866098
===================== 
```

与：

```
SQL> alter session set events '10046 trace name context forever';

Session altered.

SQL> var a number
SQL> exec execute immediate 'select testseq.nextval from dual' into :a;

PL/SQL procedure successfully completed.

SQL> alter session set events '10046 trace name context off';

Session altered. 
```

现在：

```
PARSING IN CURSOR #139830768042232 len=32 dep=1 uid=83 oct=3 lid=83 tim=1363260428931803 hv=956010684 ad='7ac66b58' sqlid='56jwk2hwgr45w'
select testseq.nextval from dual
END OF STMT
PARSE #139830768042232:c=0,e=38,p=0,cr=0,cu=0,mis=0,r=0,dep=1,og=1,plh=112670795,tim=1363260428931802
EXEC #139830768042232:c=0,e=86,p=0,cr=0,cu=0,mis=0,r=0,dep=1,og=1,plh=112670795,tim=1363260428931917
FETCH #139830768042232:c=0,e=22,p=0,cr=0,cu=0,mis=0,r=1,dep=1,og=1,plh=112670795,tim=1363260428931980
STAT #139830768042232 id=1 cnt=1 pid=0 pos=1 obj=79530 op='SEQUENCE  TESTSEQ (cr=0 pr=0 pw=0 time=39 us)'
STAT #139830768042232 id=2 cnt=1 pid=1 pos=1 obj=0 op='FAST DUAL  (cr=0 pr=0 pw=0 time=2 us cost=2 size=0 card=1)'
CLOSE #139830768042232:c=0,e=0,dep=1,type=3,tim=1363260428931980
EXEC #139830768045912:c=0,e=294,p=0,cr=0,cu=0,mis=0,r=1,dep=0,og=1,plh=0,tim=1363260428931980

*** 2013-03-14 11:27:13.138
CLOSE #139830768045912:c=0,e=45,dep=0,type=0,tim=1363260433138490
===================== 
```

可以看到 FETCH。我认为理想情况下，如果用户在未定义 INTO / BULK INTO 的情况下发出选择，Oracle 应该抛出错误。

# isabelle - 部分函数与未指定的总函数

> ID：15407458
> 
> 赞同：4
> 
> 时间：2013-03-14T11:05:14.707
> 
> 标签：isabelle

假设我有一套`A ⊆ nat`. 我想在 Isabelle 中建模一个函数`f : A ⇒ Y`。我可以使用任何一个：

1.  偏函数，即 type 之一`nat ⇒ Y option`，或
2.  一个总函数，即`nat ⇒ Y`未指定输入的类型之一不在`A`.

我想知道哪个是“更好”的选择。我看到几个因素：

*   “偏函数”方法更好，因为它更容易比较偏函数的相等性。也就是说，如果我想看看是否`f`等于另一个函数`g : A ⇒ Y`，那么我就说`f = g`。要比较未指定的总函数`f`和`g`，我不得不说`∀x ∈ A. f x = g x`。

*   “未指定的总函数”方法更好，因为我不必一直关心构造/解构`option`类型。例如，如果`f`是一个未指定的总函数，并且`x ∈ A`，那么我只能说`f x`，但如果`f`是一个部分函数，​​我不得不说`(the ∘ f) x`。再举一个例子，对部分函数进行函数组合比对总函数进行函数组合更棘手。

对于与此问题相关的具体实例，请考虑以下形式化简单图形的尝试。

```
type_synonym node = nat
record 'a graph = 
  V :: "node set"
  E :: "(node × node) set"
  label :: "node ⇒ 'a" 
```

图由一组节点、它们之间的边关系以及`label`每个节点的边关系组成。我们只关心位于 中的节点的标签`V`。那么，应该`label`是带有 的部分函数`node ⇒ 'a option`，`dom label = V`​​还是应该只是在 之外未指定的总函数`V`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:48:33.947

这可能是一个口味问题，也可能取决于您的用途，所以我只是给您我个人的口味，这将是选项 2\. 总功能。原因是我认为这两种方法中的有限量化无论如何都是不可避免的。我认为使用方法 1\. 你会发现最简单的处理方法`Option`是限制你正在推理的域（有界量化）。至于图的例子，图定理总是对 V 中的所有节点说类似的东西。但正如我所说，这可能是一个品味问题。

# text - 在命令行中删除包含多个单词的整行

> ID：15407459
> 
> 赞同：0
> 
> 时间：2013-03-14T11:05:21.517
> 
> 标签：text, command-line, sed

我试图删除包含列表中任何单词的文本中的行。例如：

文件 1：

```
xxx yyy, zzz,
aaa bbb, sss,
ccc fff, zzz,
rrr www, qasd, 
```

文件 2：

```
xxx
zzz
rrr 
```

目标是删除 file1 中包含 file2 中任何单词的行。所以输出应该是：

```
aaa bbb, sss, 
```

我知道如何将 sed 与单个单词一起使用，例如 sed '/zzz/d' 来删除包含 zzz 的行。但它如何在多个单词或文件中的单词中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:08:01.107

您可以通过以下方式轻松做到这一点`grep`：

```
$ grep -Fwvf file2 file1
aaa bbb, sss, 
```

选项：

> -f 文件，--文件=文件
> 
> 从 FILE 中获取模式，每行一个。空文件包含零个模式，因此不匹配任何内容。（-f 由 POSIX 指定。）
> 
> -v，--反转匹配
> 
> 反转匹配的感觉，选择不匹配的行。（-v 由 POSIX 指定。）
> 
> -w, --word-正则表达式
> 
> 仅选择那些包含构成整个单词的匹配项的行。测试是匹配的子字符串必须在行首，或者前面有一个非单词组成字符。同样，它必须位于行尾或后跟非单词组成字符。构成单词的字符是字母、数字和下划线。
> 
> -F，--固定字符串
> 
> 将 PATTERN 解释为固定字符串的列表，由换行符分隔，其中任何一个都将被匹配。（-F 由 POSIX 指定。）

要将更改存储回`file1`：

```
$ grep -Fwvf file2 file1 > tmp && mv tmp file1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:10:09.327

试试这个：

```
grep -vFwf file2 file1 
```

# android - 在android中拖动时如何获得精确的坐标？

> ID：15407461
> 
> 赞同：2
> 
> 时间：2013-03-14T11:05:27.990
> 
> 标签：android, android-layout, android-widget

晚上好

我正在尝试在可拖动视图上使用 onTouchListener 和在拖动区域视图上使用 onDragListener 实现拖放，如下所示：

这是 MyDragListener..

```
class MyDragListener implements OnDragListener {
  Drawable enterShape = getResources().getDrawable(R.drawable.ic_launcher);
  Drawable normalShape = getResources().getDrawable(R.drawable.ic_launcher);

  @Override
  public boolean onDrag(View v, DragEvent event) {
    int action = event.getAction();
    switch (event.getAction()) {

    /*Some irrelevant cases*/

    case DragEvent.ACTION_DROP:
      // Dropped, reassign View to ViewGroup
        View view = (View) event.getLocalState();
        ViewGroup owner = (ViewGroup) view.getParent();
        owner.removeView(view);
        FrameLayout container;
        container = (FrameLayout) v;
    container.addView(view);
    view.setX(event.getX());
    view.setY(event.getY()); 
        view.setVisibility(View.VISIBLE);
      break;
      default:
      break;
    }
    return true;
  }
} 
```

我将此侦听器分配给拖动区域，在我的示例中它是一个 frameLayout，如下所示：

```
 FrameLayout f= (FrameLayout) findViewById(id.FrameLayout);

    f.setOnDragListener(new MyDragListener()); 
```

这是布局：

```
<FrameLayout 
android:id="@+id/FrameLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="0.8">

<ImageView
    android:contentDescription="This is the main panel of the program"
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/blank" 
    android:isScrollContainer="true"
    />
<Button 
    android:id="@+id/DraggableButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Drag me -_-"
    /> 
```

现在的问题是我只能得到原始的 X,Y 坐标并且没有产生精确的结果....

我尝试使用 onTouchListener（并在 DragListener 上提供 ip）来处理这个问题，它给了我容器上的坐标，并且在拖动时产生了精确的结果，但是当我放下视图时它消失了。这是 MyTouchListener 代码：

```
private final class MyTouchListener implements OnTouchListener {
    @Override
      public boolean onTouch(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
          ClipData data = ClipData.newPlainText("", "");
          DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
          view.startDrag(data, shadowBuilder, view, 0);
          view.setVisibility(View.INVISIBLE);
          return true;
        } 
        else 
            if(motionEvent.getAction()==MotionEvent.ACTION_UP)
            {
                    // View view = (View) motionEvent.getLocalState();

                    view.setX(motionEvent.getX());
                    view.setY(motionEvent.getY());

                  view.setVisibility(View.VISIBLE);
               return true;
                }
        return false;

      }
    } 
```

谁能告诉我我想做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-29T06:35:58.033

你必须做这样的事情：

```
case DragEvent.ACTION_DROP:
  // Dropped, reassign View to ViewGroup
    View view = (View) event.getLocalState();
    ViewGroup owner = (ViewGroup) view.getParent();
    owner.removeView(view);
    FrameLayout container;
    container = (FrameLayout) v;
    float y = event.getY() - view.getHeight()/2;

    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(view.getWidth(), view.getHeight());
    layoutParams.setMargins(0, (int)y, 0, 0);
    view.setLayoutParams(layoutParams);

    container.addView(view);
    view.setVisibility(View.VISIBLE);
  break; 
```

# python - 如何使用 unicode 字母进行 sparql 查询？

> ID：15407465
> 
> 赞同：2
> 
> 时间：2013-03-14T11:05:30.783
> 
> 标签：python, unicode, sparql, dbpedia

我正在使用 SPARQL查询法语 dbpedia ( [http://fr.dbpedia.org/ )。](http://fr.dbpedia.org/)

如果有任何区别，我正在使用 Python 和 SPARQLWrapper。

这第一个查询工作正常。

```
 PREFIX dbpp:<http://dbpedia.org/property/>
    PREFIX dbpo:<http://dbpedia.org/ontology/>
    PREFIX dbpr:<http://dbpedia.org/resource/>
    SELECT ?wt ?summary ?source_url
    WHERE {
        ?wt rdfs:label "Concerto"@fr .
        OPTIONAL { ?wt dbpedia-owl:abstract ?summary . }
        OPTIONAL { ?wt foaf:isPrimaryTopicOf ?source_url . }
        filter (lang(?summary) = "fr" )
    } 
```

这第二个查询不起作用。

```
 PREFIX dbpp:<http://dbpedia.org/property/>
    PREFIX dbpo:<http://dbpedia.org/ontology/>
    PREFIX dbpr:<http://dbpedia.org/resource/>
    SELECT ?wt ?summary ?source_url
    WHERE {
        ?wt rdfs:label "Opéra"@fr .
        OPTIONAL { ?wt dbpedia-owl:abstract ?summary . }
        OPTIONAL { ?wt foaf:isPrimaryTopicOf ?source_url . }
        filter (lang(?summary) = "fr" )
    } 
```

唯一的区别是标签的值。该页面`http://fr.dbpedia.org/page/Opéra`存在于 dbpedia 中，并且 rdfs 标签设置为“Opéra”。

我认为该查询不起作用，因为它包含法语字母`é`。我尝试了几次转义 ( `Op%C3%A9re`, `Op\u0233ra`, `Op\xe9ra`) 都没有成功。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:35:20.050

问题是它`FILTER`不是可选的。所以它不匹配`<http://fr.dbpedia.org/resource/Opéra>`，它没有`dbpedia-owl:abstract`。

```
PREFIX dbpp: <http://dbpedia.org/property/>
PREFIX dbpo: <http://dbpedia.org/ontology/>
PREFIX dbpr: <http://dbpedia.org/resource/>
SELECT ?wt ?summary ?source_url
WHERE {
    ?wt rdfs:label "Opéra"@fr .
    OPTIONAL { ?wt dbpedia-owl:abstract ?summary .
    filter (lang(?summary) = "fr" ) 
    }
    OPTIONAL { ?wt foaf:isPrimaryTopicOf ?source_url . }
} 
```

...有效（并且也可以返回`<http://fr.dbpedia.org/resource/Catégorie:Opéra>`）。

# android - Android，访问另一个活动的引用

> ID：15407468
> 
> 赞同：0
> 
> 时间：2013-03-14T11:05:35.317
> 
> 标签：android

再会，

我有一个对象的主要活动，

```
public Network netConnection = null; 
```

然后在我的主要活动中调用：

```
 netConnection = new Network(new Network.OnMessageReceived() {
            @Override
            // here the messageReceived method is implemented
            public void messageReceived(String message) {
                // this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        netConnection.run(); 
```

现在我创建一个新活动并使用以下代码运行它：

```
case R.id.menu_packet: {
        Intent intent = new Intent(this, PacketActivity.class);
        String id = "" + hashCode();
        intent.putExtra("id", id);
        startActivity(intent);
        return true;
    } 
```

我曾尝试按意图等做事`with putExtra()`。但我做得不对。

有没有简单的方法来传递对我的 netConnection 的 PacketActivity 的引用？

我不想复制它或任何东西。只能从 PacketActivity 访问 netConnection 对象吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:16:18.103

您可以扩展[Application](http://developer.android.com/reference/android/app/Application.html)，在扩展的应用程序中创建 setter 和 getter 方法，然后从新活动中调用它。

[这里](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)有一个有用的教程
链接：
[Extending Application](https://stackoverflow.com/questions/3779709/extending-application)
[Extending Application to share variables global](https://stackoverflow.com/questions/4572338/extending-application-to-share-variables-globally)
[Android extends Application basics](https://stackoverflow.com/questions/10178284/android-extends-application-basics)

例如

```
public class myApplication extends Application{
    private myType myObj;

    public void set_myObj(myType theThing){
         myObj = theThing;
    }
    public myType get_myObj(){
         return myObj;
    }    
} 
```

然后从你的主要活动：

```
((myApplication)getApplication()).set_myObj(myObj); 
```

从第二个活动开始：

```
myType myObj = ((myApplication)getApplication()).get_myObj(); 
```

并小心内存泄漏..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:17:56.273

这听起来像是服务的用例：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

问题是一旦您创建网络对象的活动被销毁，例如启动新活动，那么网络对象也将被垃圾收集，所以我认为传递引用不会有帮助......

# perl - 如何配置 Catalyst 应用程序的基本 url？

> ID：15407472
> 
> 赞同：2
> 
> 时间：2013-03-14T11:05:39.317
> 
> 标签：perl, catalyst

我开发了一个 Catalyst 应用程序，它通过 Catalyst 开发服务器运行，例如`localhost:3000`. `http://myhost/myapp/`接下来，我将 Apache 配置为`localhost:3000`使用 mod_proxy代理请求。

我现在希望 Catalyst 知道它已公开重新定位到基本 url `myapp/`，并在通过`uri_for`.

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T12:13:52.763

KT，最简单的做法是安装`Catalyst::TraitFor::Request::ProxyBase`，因为它专门设计用于将请求库替换为 HTTP 代理传递的值。

该模块是完全透明的，不需要修改现有的应用程序。

# javascript - javascript可以删除http头设置的cookie吗？

> ID：15407475
> 
> 赞同：6
> 
> 时间：2013-03-14T11:05:48.457
> 
> 标签：javascript, http, cookies

我尝试删除由 http 标头设置的 cookie，但不起作用。http-set cookie 和 javascript-set cookie 有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T11:51:44.953

是的，javascript 可以删除由 HTTP 标头设置的 cookie，除非它专门是[HTTPOnly](https://www.owasp.org/index.php/HttpOnly) cookie。

cookie 也必须来自与 javascript 相同的域。

另请参阅[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html) 和[使用 JavaScript 清除所有 cookie](https://stackoverflow.com/questions/179355/clearing-all-cookies-with-javascript#179514)

# python - 在 Python 中使用 OptionMenu

> ID：15407476
> 
> 赞同：0
> 
> 时间：2013-03-14T11:05:48.997
> 
> 标签：python, combobox, option, optionmenu

```
self.btype2=StringVar()
self.cboType = OptionMenu(self.master,self.btype2,"Computer","Science","General")
self.cboType.place(x=15, y=20, width=150, height=23)
self.cboType.config(state='normal')
self.btype2=self.cboType 
```

那是我们的选项菜单代码，我们现在的问题是我们如何分配值并将其添加到数据库中？提前谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:36:36.607

使用 btype2 因为那是您的字符串变量。您不需要 self.btype2=self.cboType。如果要从中选择的三个项目是您想要转到 Db 的内容，那么在您的 Db 语句中使用 btype2 您将放置它的位置。IE

插入表名值（btype2）

# ruby-on-rails - 使用下拉菜单在 Ruby on Rails 中过滤数据库结果

> ID：15407478
> 
> 赞同：0
> 
> 时间：2013-03-14T11:05:53.887
> 
> 标签：ruby-on-rails, forms, search, activerecord, filtering

尊敬的人...

我对rails真的很陌生，所以我需要你的宝贵帮助......

我的数据库中有一个名为“graph_hospital_vacant_by_band”的数据库视图

```
mysql> desc graph_hospital_vacant_by_band;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| specialisation_id | int(11)      | NO   |     | NULL    |       |
| specialisation    | varchar(255) | YES  |     | NULL    |       |
| nos               | bigint(21)   | NO   |     | 0       |       |
| hospitalband      | varchar(255) | NO   |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

其型号为：

```
class GraphHospitalVacantByBand < ActiveRecord::Base
 self.table_name = 'graph_hospital_vacant_by_band'
end 
```

控制器如下：

```
class GraphHospitalVacantByBandsController < InheritedResources::Base
end 
```

视图如下：

```
<table class="table table-bordered">
  <thead>
    <tr>
        <th>Specialisation</th>
              <th>No.</th>
        <th>Hospital Band</th>
    </tr>
  </thead>
<tbody>
<% @graph_hospital_vacant_by_bands.each do |graph_hospital_vacant_by_band| %>
  <tr>
             <td><%= graph_hospital_vacant_by_band.specialisation %></td>
             <td><%= graph_hospital_vacant_by_band.nos %></td>
             <td><%= graph_hospital_vacant_by_band.hospitalband %></td>
  </tr>
<% end %>
</tbody>
</table> 
```

目前显示这个

[http://i.stack.imgur.com/v7Jwt.png](http://i.stack.imgur.com/v7Jwt.png)

我需要一个带有可用专业的下拉列表，以便在选择特定专业时显示该专业的 nos,hospitalband ...

我环顾四周并进行了很多实验，但徒劳无功....

我不知道我应该如何更新我的模型和控制器来处理传递的参数....

非常感谢...

真诚的问候-天空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:52:36.510

您可以通过使用范围和 where 子句的组合来提供过滤器，但寻找提供此类功能的 gem 可能是最简单的。

两个流行的选项是[Squeel](https://github.com/ernie/squeel)和[Ransack](https://github.com/ernie/ransack)。Squeel 增强了您如何使用 ActiveRecord 的内置方法搜索记录。Ransack 使用一个单独的“搜索表单”，您可以使用它来过滤您正在显示的记录。

如果您使用其中任何一个 gem，您将更新控制器，添加搜索/过滤逻辑和视图以添加搜索/过滤选项。

在您的控制器中，您将添加

```
def index
  @q = GraphHospitalVacantByBand.search(params[:q])
  @graph_hospital_vacant_by_bands = @q.result(:distinct => true)
end 
```

在您看来，您需要添加一个搜索表单：

```
<%= search_form_for @q do |f| %>
  <%= f.label :specialisation_cont %>
  <%= f.text_field :specialisation_cont %>
  <%= f.label :nos_eq %>
  <%= f.text_field :nos_eq %>
  <%= f.label :hospitalband_cont %>
  <%= f.text_field :hospitalband_cont %>
  <%= f.submit %>
<% end %> 
```

这是一个非常基本的搜索表单，提供接受值的空文本字段。要获得更多润色，您可能希望使用选择并提供可接受的值，但这至少可以帮助您入门。

# php - 将 Wikipedia API 与 Rest 客户端一起使用

> ID：15407479
> 
> 赞同：1
> 
> 时间：2013-03-14T11:05:58.513
> 
> 标签：php, rest, mediawiki-api

我正在尝试使用 MediaWiki 获取维基百科页面（来自特定类别）。为此，我正在学习[本](http://www.ibm.com/developerworks/xml/library/x-phpwikipedia/index.html)教程***清单 3。列出类别中的页面***。我的问题是：如何在不使用 Zend 框架的情况下获取维基百科页面？有没有不需要安装的基于php的Rest Clients？因为 Zend 需要先安装他们的包和一些配置......我不想做所有这些事情。

经过谷歌搜索和一些调查，我发现了一个名为 cURL 的工具，将 cURL 与 PHP 一起使用也可以构建一个 rest 服务。我在实现休息服务方面真的很新，但已经尝试在 php 中实现一些东西：

```
<?php
    header('Content-type: application/xml; charset=utf-8');

    function curl($url) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;
    }
    $wiki = "http://de.wikipedia.org/w/api.php?action=query&list=allcategories&acprop=size&acprefix=haut&format=xml";
    $result = curl($wiki);
    var_dump($result);
?> 
```

但是得到了结果中的错误。有人可以帮忙吗？

**更新：**

```
This page contains the following errors:
error on line 1 at column 1: Document is empty
Below is a rendering of the page up to the first error. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:40:38.520

抱歉这么久才回复，但迟到总比没有好...

当我在命令行上运行您的代码时，我得到的输出是：

```
string(120) "Scripts should use an informative User-Agent string with contact information, or they may be IP-blocked without notice.
" 
```

因此，问题似乎在于您通过不告诉 cURL 发送自定义 User-Agent 标头而遇到了[Wikimedia bot User-Agent 策略。](http://meta.wikimedia.org/wiki/User-Agent_policy)要解决此问题，请遵循该页面底部给出的建议，并将以下行添加到您的脚本中（与其他`curl_setopt()`调用一起）：

```
$agent = 'ProgramName/1.0 (http://example.com/program; your_email@example.com)';
curl_setopt($ch, CURLOPT_USERAGENT, $agent); 
```

附言。`application/xml`除非您*确定*内容实际上是有效的 XML，否则您可能也不想设置内容类型。特别是，即使输入是有效的 XML，输出`var_dump()`也*不会是有效的 XML。*

对于测试和开发，我建议从命令行运行 PHP 或使用`text/plain`内容类型。或者，如果您愿意，可以`text/html`使用`htmlspecialchars()`.

* * *

附言。将此作为社区 wiki 答案，因为我意识到这个问题之前已经被[问过和回答过](https://stackoverflow.com/questions/8956331/how-to-get-results-from-the-wikipedia-api-with-php)。

# ajax - 使用 Ajax 的动态 Flot 图表

> ID：15407480
> 
> 赞同：3
> 
> 时间：2013-03-14T11:06:01.197
> 
> 标签：ajax, dynamic, flot

我是 javascript 和 flot 的新手，希望有人可以帮助我解决我遇到的这个问题。我正在努力实现它在页面上有一个动态浮动图。

要绘制的系列的数据位于一个文件中，每隔几秒就会更新一次。我希望浮点图每隔几秒钟读取一次数据文件并使用新数据进行更新。

这是我得到的代码不起作用。该图在页面加载时显示正常，但不会每 5 秒更新一次。

任何帮助深表感谢。

```
 $(function () {

var dataFolder = "http://localhost/graphdata/";

/***********************************************************************
 *             Function to get series data from a file
 ***********************************************************************/
function getSeriesData(file) {
    var url= dataFolder + file;
    var data = null;
    $.ajax({
        async: false,
        url: url,
        method: 'GET',
        dataType: 'json',
        success: function(datasets){
            data = datasets;
        },
        error: function(error,text,http){
            alert(error + " " + text + " " + http);
        }
    });  

    return data;
}
    var plot = $.plot($("#placeholder"),
        [
            {label: "A", data: getSeriesData("dataA.txt")},
            {label: "B", data: getSeriesData("dataB.txt")},
            {label: "C", data: getSeriesData("dataC.txt")}
        ],
        {
            series: {
                lines: {
                    color: "red",
                    show: true
                },
                points: {
                    show: true
                },
                shadowSize: 0,
                hoverable: true
            },
            colors: ["red", "blue", "green"],
            yaxis: {
                min: 0,  ticks:5
            },
            xaxis: {
                mode: 'time',
                timeformat: '%H:%m',
                show: false
            },
            legend:{
                show: true
            },
            grid:{
                color: "green",
                show: true,
                backgroundColor: "white",
                hoverable: true
            }
        }
);

var updateInterval = 1000 * 5;
function update() {

    plot.setData([
                          {label: "A", data: getSeriesData("dataA.txt")},
                          {label: "B", data: getSeriesData("dataB.txt")},
                          {label: "C", data: getSeriesData("dataC.txt")}
                      ]);
    plot.setupGrid();
    plot.draw();

    setTimeout(update, updateInterval);
}
update();}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:31:06.747

我想到了。该文件的 ajax 调用被缓存在浏览器中，因此对同一文件的任何进一步调用都会从缓存中返回，从而看起来好像没有对图形进行更新。在函数中切换缓存，现在可以正常工作了。

```
function getSeriesData(file) {
    var url= dataFolder + file;
    var data = null;
    $.ajax({
        async: false,
        cache: false,
        url: url,
        method: 'GET',
        dataType: 'json',
        success: function(datasets){
            data = datasets;
        },
        error: function(error,text,http){
            alert(error + " " + text + " " + http);
        }
    });  

    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:20:09.320

使用数字似乎可以正确更新我。您能提供一些数据示例吗？

我更改了 x 轴和数据提取，但更新工作正常。

```
function getSeriesData() {

var randomnumber=Math.floor(Math.random()*11)
var randomnumber2=Math.floor(Math.random()*11)
var data = [ 
             [randomnumber, randomnumber2],
            [randomnumber +1, randomnumber2 +2],
            [randomnumber +3, randomnumber2 +4],
            [randomnumber +5, randomnumber2 +6],
            [randomnumber +7,  randomnumber2 +8],

];

return data; 
} 
```

小提琴 - [http://jsfiddle.net/EX6dv/1/](http://jsfiddle.net/EX6dv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:27:04.580

看来您也需要将以下内容放在更新功能之外。

```
setTimeout(update, updateInterval); 
```

# ssas - 计数不同度量的行聚合

> ID：15407482
> 
> 赞同：0
> 
> 时间：2013-03-14T11:06:04.590
> 
> 标签：ssas, aggregate

我设置了一个相当简单的项目来展示我想要的东西。这是数据：

**团体**

```
身份证名称
 1 组 1
 2 组 2
 3 组 3

```

**人**

```
ID GroupID 年龄名称
 1 1 18 约翰
 2 1 21 斯蒂芬
 3 1 18 凯特
 4 2 18 玛丽
 5 2 19 约瑟夫
 6 2 19 迈克尔
 7 3 21 大卫
 8 3 22 凯文
 9 3 21 朱利安

```

我的多维数据集中有 1 个度量，称为**Person Count**，它是`Distinct count`关于**Person ID**
我已将维度中的每个非 ID 列设置为属性（年龄、人名、组）。

当我在 Business Intelligence Development Studio 中处理和浏览多维数据集时，我得到以下结果集：

![实际结果](../Images/ce7f7765f39cf0cefb59ff9bf7bd9c45.png)

但我在这里真正想要的是 Age 的行来汇总 Person Count 的计数，所以这里应该显示**2**并且只有一行**18**。

![所需结果](../Images/ac35d1a0077207003ccc72d61f511f5b.png)

这可能（以及如何）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:46:55.830

原来这是我为维度设置 Age 属性的方式存在问题。
我有：
**KeyColumns** = `Person.ID`
**ValueColumn** = `Person.Age`。

我不知道我为什么这样做，但解决方案是删除 ValueColumn 的内容**并将****KeyColumns**重新设置为`Person.Age`。

我现在得到以下结果：

![最后结果](../Images/0e110354ec8170a11aa98cd5425aabd1.png)

该项目的其他一切都是相同的；这是唯一的变化，这正是我想要的。如果我对此有任何问题，我会为将来可能遇到此问题的任何其他人更新此帖子。

# emacs - org 模式下的内联 PDF 图像

> ID：15407485
> 
> 赞同：23
> 
> 时间：2013-03-14T11:06:07.570
> 
> 标签：emacs, org-mode

在`emacs`+中，查看 org-mode 缓冲区时，您可以使用命令`org-mode`内联链接图像。`org-toggle-inline-images`这包括开箱即用的各种格式，但显然还没有包括 PDF 图像。

鉴于 emacs 完全能够渲染 PDF 文件，是否可以像处理图像（png、jpeg 等）一样制作 org-mode 内联 PDF 文件？

*一些背景：PDF图像对我来说更方便有几个原因，最大的原因是它们可以很好地缩放并且可以很好地与乳胶一起使用，从小纸到大海报。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-26T03:34:35.023

让我完成这个问题。

首先，Org-mode 本身不支持任何 pdf 内联显示功能。但是，可以进行修改`org-display-inline-images`以实现您想要的。首先你需要参考这个答案：[Configuring emacs for show fixed width inline images](https://stackoverflow.com/questions/17637685/configuring-emacs-for-showing-fixed-width-inline-images)，这给了我很多启发。然后我稍微修改了函数，使其支持在org-mode下显示pdf、bmp。我的功能在下面。

```
(setq image-file-name-extensions
   (quote
    ("png" "jpeg" "jpg" "gif" "tiff" "tif" "xbm" "xpm" "pbm" "pgm" "ppm" "pnm" "svg" "pdf" "bmp")))

(setq org-image-actual-width 600)

(setq org-imagemagick-display-command "convert -density 600 \"%s\" -thumbnail \"%sx%s>\" \"%s\"")
(defun org-display-inline-images (&optional include-linked refresh beg end)
  "Display inline images.
Normally only links without a description part are inlined, because this
is how it will work for export.  When INCLUDE-LINKED is set, also links
with a description part will be inlined.  This
can be nice for a quick
look at those images, but it does not reflect what exported files will look
like.
When REFRESH is set, refresh existing images between BEG and END.
This will create new image displays only if necessary.
BEG and END default to the buffer boundaries."
  (interactive "P")
  (unless refresh
    (org-remove-inline-images)
    (if (fboundp 'clear-image-cache) (clear-image-cache)))
  (save-excursion
    (save-restriction
      (widen)
      (setq beg (or beg (point-min)) end (or end (point-max)))
      (goto-char beg)
      (let ((re (concat "\\[\\[\\(\\(file:\\)\\|\\([./~]\\)\\)\\([^]\n]+?"
                        (substring (org-image-file-name-regexp) 0 -2)
                        "\\)\\]" (if include-linked "" "\\]")))
            old file ov img)
        (while (re-search-forward re end t)
          (setq old (get-char-property-and-overlay (match-beginning 1)
                                                   'org-image-overlay)
        file (expand-file-name
                      (concat (or (match-string 3) "") (match-string 4))))
          (when (file-exists-p file)
            (let ((file-thumb (format "%s%s_thumb.png" (file-name-directory file) (file-name-base file))))
              (if (file-exists-p file-thumb)
                  (let ((thumb-time (nth 5 (file-attributes file-thumb 'string)))
                        (file-time (nth 5 (file-attributes file 'string))))
                    (if (time-less-p thumb-time file-time)
            (shell-command (format org-imagemagick-display-command
                           file org-image-actual-width org-image-actual-width file-thumb) nil nil)))
                (shell-command (format org-imagemagick-display-command
                                         file org-image-actual-width org-image-actual-width file-thumb) nil nil))
              (if (and (car-safe old) refresh)
                  (image-refresh (overlay-get (cdr old) 'display))
                (setq img (save-match-data (create-image file-thumb)))
                (when img
                  (setq ov (make-overlay (match-beginning 0) (match-end 0)))
                  (overlay-put ov 'display img)
                  (overlay-put ov 'face 'default)
                  (overlay-put ov 'org-image-overlay t)
                  (overlay-put ov 'modification-hooks
                               (list 'org-display-inline-remove-overlay))
                  (push ov org-inline-image-overlays)))))))))) 
```

该函数用于`convert file.pdf -thumbnail "400x400>" file_thumb.png`在您的文件夹中生成一个名为 thumbnail 的 file_thumb 以替换 pdf 的覆盖，并强制 org-mode 显示带有 file_thumb 的 pdf，而不对 org 文件进行任何修改。

此外，因为我使用 babel 用 python 生成图像。它总是需要我更新 _thumb 文件，所以我添加了一个 if 条件来说明这个拇指文件是否存在，如果 pdf 文件更改了我需要同时更改拇指文件......等等！

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:57:31.630

简短回答：不支持 PDF 内联图像。

该函数`org-image-file-name-regexp`具有硬编码的图像文件扩展名（不包括 PDF）。此函数由 使用`org-display-inline-images`，而后者又调用`create-image`.

我尝试将 PDF 添加到 org-image-file-name-regexp，然后删除 PDF `imagemagik-types-inhibit`，但没有成功。

您可以尝试进一步挖掘，或向 org-mode 邮件列表请求该功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-08T02:24:37.513

我遇到了同样的问题，经过一番摸索后，通过将以下内容添加到我的 .emacs 文件中使其工作：

```
(add-to-list 'image-type-file-name-regexps '("\\.pdf\\'" . imagemagick))
(add-to-list 'image-file-name-extensions "pdf")
(setq imagemagick-types-inhibit (remove 'PDF imagemagick-types-inhibit))
(setq org-image-actual-width 600) 
```

尚不确定，这些更改是否对其他模式有任何问题。我在 org 模式下的 pdf 是由 python src 代码块创建的，并且上述工作有效，但是当我在 python 模式下更改某些内容时，图像不会更新，我需要手动运行 org-display-inline-images。

这假设您有一个支持 imagemagick 的 emacs，类似的东西也应该适用于使用 ghostscript（可能在 org.el 中进行更多编辑）。

# xpath - 检查前面的兄弟姐妹是否是标题元素

> ID：15407488
> 
> 赞同：0
> 
> 时间：2013-03-14T11:06:18.113
> 
> 标签：xpath

我需要查看图中最接近的前面元素是否是标题元素。我的 XML 结构如下所示：

```
<section>
<title>Something</title>
<figure><graphic></graphic></figure>
<figure><graphic></graphic></figure>
<p>Some text</p>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:10:14.627

获取前面的第一个兄弟并验证它是一个标题：

```
//figure[preceding-sibling::*[1][self::title]] 
```

# javascript - 在 js 脚本中引入内联 javascript 代码

> ID：15407489
> 
> 赞同：1
> 
> 时间：2013-03-14T11:06:28.307
> 
> 标签：javascript, forms, dom

我有这个代码：

```
{% for user in users %}

        <form name="form_user_{{ user.id }}" method="post" action="/networks/{{ net.id }}/sensors/{{ sens.id }}/rights">
          <tr>
            <td>
              <div>
                {{ escape(user.name) }}
                <input type='hidden' name="id" value='{{ user.id }}'>
              </div>
            </td>
            <td>

              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_0" value="0">
                None
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_1" value="1">
                Read
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_4" value="4">
                Read + Commands
              </label>

              {{ xsrf_form_html() }}
            </td>

          </tr>
        </form> 
```

我会将这段代码放在 html 页面底部的函数脚本中，并将该函数与 onClick 事件相关联。

我正在尝试编写该函数，但它不起作用。

这个函数的错误在哪里？

```
function createFormAndSubmit(){

{% for user in users %}

 var submitForm = document.createElement("form_user_{{ user.id }}");
 document.body.appendChild(submitForm);
 submitForm.method = "POST";

 var newElement = document.createElement("<input type='hidden' name='id' value='{{ user.id }}'>");
 inputForm.appendChild(newElement);

 var newElement = document.createElement("<input type='radio' name='perms' id='perms_{{user.id}}_0' value='0'>");
 inputForm.appendChild(newElement);

 submitForm.action= "/networks/{{ net.id }}/sensors/{{ sens.id }}/rights";
 document.forms['form_user_{{ user.id }}'].submit();
 submitForm.submit();

{% end %}

} 
```

我正在尝试构建附加树结构中每个元素的表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:17:32.410

你做错了：不要尝试用任何模板语言生成 Javascript 代码。

**将数据从服务器端传递到客户端 Javascript 代码的推荐方法**

*   将您的 JavaScript 代码创建为单独的 .js 文件

*   当您从页面模板生成 HTML 时，使用数据属性作为 JSON 将相关数据嵌入到 HTML 代码中

[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

*   当页面在浏览器中执行时，如果您在需要执行魔术任务的页面上，则在客户端 DOM 就绪事件上读取此数据。您可以通过调用 jQuery 来找出带有 data 属性的必要元素`$("div.my-marker-css-class").size() > 0`

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

*   使用读取数据属性有效负载`JSON.parse($("div.my-marker-css-class").data())`

*   ...并使用 jQuery 或客户端模板填充或生成必要的客户端 DOM (HTML) 元素

[基于 DOM 树的 JavaScript 模板引擎](https://stackoverflow.com/questions/9282315/dom-tree-based-javascript-template-engines/9299643#9299643)

这边走

*   您不需要生成 JavaScript 代码

*   它更易于维护（您可以获得 .js 文件的语法高亮显示等）。您可以使用 Firebug 等来调试您的 JavaScript 代码和错误行号。

*   它对缓存更友好，对 HTML 页面的负载更少

这种方法在技术上更优越，一旦掌握，更容易维护并且不易出错。但是，这也意味着您必须了解从服务器到浏览器的完整软件堆栈，这意味着新手开发人员需要学习更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:29:00.920

Mikko 是 100% 正确的。您将需要从服务器传递原始数据并使用 javascript 对其进行解析。

值得庆幸的是，有一些插件可以让这更容易。[http://daffl.github.com/2011/01/06/jquery-dform.html](http://daffl.github.com/2011/01/06/jquery-dform.html)就是其中之一。

这是一个 python 编码器/解码器： http: [//docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

要从服务器获取 JSON，您将使用：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

我不太了解python，无法给出一个完整的例子，但这些是您实现目标可以采取的基本步骤。

编辑：我将举一个例子，但准备调试它:) 编辑 2：更改以根据 OP 的要求在自己的文件中制作 javascript。

您的 HTML 将如下所示：

```
<html>
<head>
<script src='path to jquery'></script>
<script src='path to dForm plugin'></script>
<script src='myjs.js'></script> <!-- use relative path -->
</head>
<body>
<form id="myform"></form>

</body>
</html> 
```

您的 myjs.js 文件将如下所示：

```
 $(function(){
        if($("#myform).length > 0) // only run if #myform exists
        $("#myform").buildForm("http://example.com/myform.json");
    }); 
```

myform.json python 文件将包含以下代码：

```
import json
json.dumps({'success': True, 'data': users.values()}) 
```

有关 python 和 JSON 格式的更多信息，请参阅[将 python 输出格式化为 json](https://stackoverflow.com/questions/13607765/format-python-output-to-json)。

要使用内联 python 执行此操作，请尝试以下操作：

```
<html>
<head>
<script src='path to jquery'></script>
<script src='path to dForm plugin'></script>
</head>
<body>
<script>
var dataArray = [
{% for user in users %}
   {
    "action" : "/networks/{{ net.id }}/sensors/{{ sens.id }}/rights",
    "method" : "post", // or get
    "elements" :
    [
        { "type" : "hidden",
          "name" : "id",
          "value" : "{{ user.id }}"
        },
        {
            "name" : "perms",
            "id"   : "perms_{{user.id}}_0",
            "type" : "radio",
            "value": "0"
        },
        {
            "name" : "perms",
            "id"   : "perms_{{user.id}}_0",
            "type" : "radio",
            "value": "0"
        },
        {
            "type" : "submit",
            "value" : "Submit"
        }
        ]
   },
{% end %}
];

for(var i =0; i<dataArray.length; i++){
   $("body").append("<form id='form"+ i +"'></form>");
   $("#form" + 1).dForm(dataArray[i]);
}
</script>
</body>
</html> 
```

我个人不会推荐内联方法，但是，它是一种选择。由于循环，您还需要考虑额外的逗号。根据浏览器，它可能会添加一个空数组项。IE 可能会完全窒息。

# ruby-on-rails - 如何限制当前登录的用户只能查看属于他们的产品？

> ID：15407491
> 
> 赞同：0
> 
> 时间：2013-03-14T11:06:36.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, cancan, rolify

如果用户以特定角色登录`vendor`- 他们应该只看到他们在商店中创建的项目。他们应该看不到其他供应商的产品。

所以我试图在我的授权中这样做（使用 Devise、CanCan、Rolify）。

我试过这个：

```
user ||= User.new # guest user (not logged in)
if user.has_role? :vendor
  can :dashboard
  can :manage, [Product, Vendor], :vendor_id => user.id
  can :view, [Product], :vendor_id => user.id
end 
```

但是....没有太多运气...我错过了什么？

**编辑 1**

我知道我可以限制控制器中的产品，例如：

```
 @product = current_user.products 
```

但这不是我要找的。在这种情况下，供应商（即具有角色的用户`:vendor`）应该只能看到他们添加到商店的产品，而不能看到其他供应商添加的产品。但是，买家（即具有角色的用户`:buyer`）应该能够看到所有买家的所有产品（管理员/等）。买家将无法看到某些产品的价格和其他属性等。

我怎样才能实现所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:19:29.737

在控制器中，您只能找到属于该用户的产品。

```
def show
  @product = @user.products.find(params[:id])
  ... 
```

同样适用于编辑和更新操作。在这种情况下，不需要 Cancan。

# haskell - 使用haskell的整数加法程序

> ID：15407493
> 
> 赞同：-6
> 
> 时间：2013-03-14T11:06:40.927
> 
> 标签：haskell, haskell-platform

首先有一个整数（t）表示测试用例的数量。然后是 2*t 行。在每一行中都有一个整数。我们必须输出每两个数字的总和。

样本输入：

```
3
1
2
3
4
5
6 
```

样本输出：

```
3
7
11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:33:50.680

```
import Control.Monad (replicateM)

main :: IO ()
main = mapM_ print . map (uncurry (+)) =<< flip replicateM readIntPair =<< readLn

readIntPair :: IO (Integer, Integer)
readIntPair = do
    x <- readLn
    y <- readLn
    return (x, y) 
```

`replicateM`来自[Control.Monad](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html)，其他函数是从[Prelude](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html)自动导入的。

您还需要阅读解释 do 表示法的教程的一部分：它看起来与命令式语言中的指令列表相同，但略有不同。

# delphi - Delphi XE2：在 TAc ionManager 对象中迭代动作

> ID：15407494
> 
> 赞同：3
> 
> 时间：2013-03-14T11:06:41.897
> 
> 标签：delphi, iterator, action

我想知道是否有一种方法可以迭代**TActionManager**中的**TActions**而无需经典 for i:= 0 to... 但在代码中使用迭代器

```
for (action in actionManager.actions) do
begin
...
end; 
```

它不起作用。我已经尝试了很多，总是得到相同的结果。

这是不可能的还是我做错了什么？

谢谢！M。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:22:13.260

动作管理器提供的枚举器提供类型为 的动作`TContainedAction`。它由动作管理器类提供，因此您可以直接枚举动作管理器。您的代码尝试迭代`ActionManager.Actions`，这是不可能的，因为`Actions`它是一个索引属性。你不能迭代其中之一。

所以你的代码需要看起来像这样：

```
var
  Action: TContainedAction;
....
for Action in ActionManager do
begin
  ....
end; 
```

如果`as`要访问在`TContainedAction`.

# javascript - 在ajax请求之前从文本框中删除焦点

> ID：15407496
> 
> 赞同：2
> 
> 时间：2013-03-14T11:06:51.017
> 
> 标签：javascript, asp.net, ajax, focus

大家好，我正在通过 javascript 定期保存表单的数据。代码是这样的

```
SetInterval(function(){
$find("<%=AjaxManager1.ClientID%>").ajaxRequest("SaveData")
},20000) 
```

在后面的代码中，我正在编写用于保存表单数据的代码。有各种控件，例如 radtextbox、raddatepicker。等等...我面临的问题是如果文本框有焦点，则不会保存文本框的值。所以我想在下一个 ajax 请求启动之前从任何文本框中删除焦点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:26:43.480

在你需要的地方试试这个

```
 $('textBoxSelector').blur(); 
```

# c# - 设置日期时间格式

> ID：15407499
> 
> 赞同：11
> 
> 时间：2013-03-14T11:06:57.217
> 
> 标签：c#, datetime, format

我有以下代码 -

```
DateTime timeStamp;

timeStamp = System.Convert.ToDateTime(y.InnerText); 
```

`y.InnerText`在哪里`11/03/2013 11:35:24`。

但是，这破坏了我的导入语句，因为数据库正在寻找格式-

```
2013-03-11 11:35:24 
```

如何设置 DateTime 对象的格式？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-14T11:09:24.923

> 如何设置 DateTime 对象的格式？

你不能。`DateTime`values 没有格式，就像*or*`int` values`double`一样。当您想将它们转换为字符串/从字符串转换时，您可以*在*其中指定任何格式信息。

相反，您应该使用参数化 SQL 并避免`DateTime`首先将值转换回字符串。这是一般的最佳实践——不要在 SQL 字符串中包含值；参数化 SQL 有很多好处：

*   它避免了[SQL 注入攻击](http://bobby-tables.com)
*   它避免了像这样的转换问题
*   它使您的代码（SQL）与您的数据（参数值）分开

我*还*建议`Convert.ToDateTime`您在解析时指定预期格式，而不是使用 . 例如：

```
timeStamp = DateTime.ParseExact(y.InnerText,
                                "dd/MM/yyyy HH:mm:ss",
                                CultureInfo.InvariantCulture); 
```

基本上，我尝试应用的两条规则是：

*   避免在不必要的地方执行*任何*转换。如果您确保每个系统都尽可能使用正确的数据类型，那么您通常根本不需要进行任何转换。
*   如果您*确实*需要转换成字符串表示形式/从字符串表示形式转换，请非常明确地说明您想要使用/产生的表示形式。对于机器可读的值，通常应该使用不变的文化和可能的自定义日期/时间格式。对于人类可读的值，通常应该使用用户的文化和标准的日期/时间格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-20T06:51:13.610

我用这一步

1.  转换为日期时间。
2.  使用*ToString();* 功能

**例子 ：**

```
 DateTime myDateTime = DateTime.Now;
 string myDateTimeString = myDateTime.ToString("yyyy-MM-dd hh:mm:ss"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:11:30.790

如果您将日期时间传递给 sql 数据库，请尝试使用 yourdatetime.ToString("yyyy/MM/dd") 格式，这对您有用。

还有一件事，您可以为您的 Applicaton 文化添加日期时间格式。所以这将根据您的需要对待您的日期时间格式。

```
using System;
using System.Globalization;
using System.Threading;

namespace test {
    public static class Program {
        public static void Main() {
            CultureInfo culture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
            culture.DateTimeFormat.ShortDatePattern = "yyyy/MM/dd HH:mm:ss";
            culture.DateTimeFormat.LongTimePattern = "";
            Thread.CurrentThread.CurrentCulture = culture;
            Console.WriteLine(DateTime.Now);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:14:45.657

基本上日期没有格式。如果数据库`parameter/field`是`Datetime type`您应该可以*作为 Date 类型传递*。将日期作为字符串传递不是一个好主意。

但是，如果您必须处理这些事情，那么您最好*`none culture specific date format`*在参数化查询中将日期传递给（ISO8601 或 ISO）。否则，您可能会在不同的文化设置中遇到数据库服务器问题。

例如，对于 sql server，在 ISO8601 中传递日期时间是安全的（*在转换中）；*

```
'yyyy-mm-ddThh:mi:ss.mmm' //(no spaces) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:11:16.703

您可以使用 ToString 转换为 2013-03-11 11:35:24

```
 DateTime timeStamp;

 timeStamp = System.Convert.ToDateTime(y.InnerText).ToString("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-16T14:10:40.163

如果您只是覆盖 DateTime 对象的 ToString() 方法怎么办？难道你不能选择你想要的格式，每次使用它时，它都会按照你想要的方式格式化，而不会被它打扰。

这只是一个想法，所以我不知道是否有更好的解决方案。

然后，您可以使用属性年、月、日，按照您的意愿构建它。就像是：

```
public override ToString(){
   return this.Year + "-" + this.Month + "-" + this.Day;
} 
```

问候

# c# - SignalR 中的音频和视频消息

> ID：15407501
> 
> 赞同：3
> 
> 时间：2013-03-14T11:07:06.170
> 
> 标签：c#, signalr

我正在使用 signalR 开发一个聊天应用程序并完成了文本聊天，但我想知道 signalR 是否支持音频和视频消息？如果它确实是实现它的最佳方法，我已经阅读了 github 上的 wiki，我已经使用简单的文本聊天实现了所有聊天应用程序，但我找不到任何解决方案来解决如何处理音频和视频的问题知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:46:01.130

SignalR 用于发送小消息以指示数据或更改。因此，在这种情况下，您应该传输指向实际图像或视频的链接。网络的工作方式；）

# android - 如何检查是否可以从某些活动中处理意图？

> ID：15407502
> 
> 赞同：123
> 
> 时间：2013-03-14T11:07:08.667
> 
> 标签：android, android-intent, mime-types, file-type, intentfilter

到目前为止我有这种方法，但它出现的时候好像缺少了什么

例如，我有一个返回 false 的文件 /sdcard/sound.3ga （就像没有可以处理此类文件的活动一样），但是当我从文件管理器中打开它时，它会通过媒体播放器打开，没有问题

我认为这个意图并不完整，我需要做更多的事情来让我自己确保 handlerExists 变量只有在没有可以处理这个意图的活动时才会为假

```
PackageManager pm = getPackageManager();
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(new File(uriString)).toString());
String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
intent.setDataAndType(Uri.fromFile(new File(uriString)),mimetype);
boolean handlerExists = intent.resolveActivity(pm) != null; 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2015-05-01T20:17:48.870

edwardxu 的解决方案非常适合我。

只是为了澄清一点：

```
PackageManager packageManager = getActivity().getPackageManager();
if (intent.resolveActivity(packageManager) != null) {
    startActivity(intent);
} else {
    Log.d(TAG, "No Intent available to handle action");
} 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-03-14T11:15:21.273

```
PackageManager manager = context.getPackageManager();
List<ResolveInfo> infos = manager.queryIntentActivities(intent, 0);
if (infos.size() > 0) {
    //Then there is an Application(s) can handle your intent
} else {
    //No Application can handle your intent
} 
```

你试过这个意图吗？

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.fromFile(yourFileHere)); 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-02-16T02:51:41.390

```
if (intent.resolveActivity(getPackageManager()) == null) {
    // No Activity found that can handle this intent. 
}
else{
    // There is an activity which can handle this intent. 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-16T15:55:03.943

您可以使用：

```
public static boolean isAvailable(Context ctx, Intent intent) {
   final PackageManager mgr = ctx.getPackageManager();
   List<ResolveInfo> list =
      mgr.queryIntentActivities(intent, 
         PackageManager.MATCH_DEFAULT_ONLY);
   return list.size() > 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-24T11:23:16.453

使用 Kotlin 如果您需要在意图不可用时做某事，

```
fun isIntentAvailable(context: Context, action: String?): Boolean {
    val packageManager = context.packageManager
    val intent = Intent(action)
    val resolveInfo: List<*> = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY)
    return resolveInfo.isNotEmpty()
} 
```

将此方法实现为

```
private const val SAMPLE_INTENT = "com.realwear.barcodereader.intent.action.SCAN_BARCODE"

if(isIntentAvailable(this,SAMPLE_INTENT)){
    //Do Stuff
} 
```

如果你无事可做，

```
Intent(SAMPLE_INTENT).also { barcodeReaderIntent ->
    barcodeReaderIntent.resolveActivity(packageManager)?.also {
        barcodeReaderIntent.putExtra(EXTRA_CODE_128, false)
        startActivityForResult(barcodeReaderIntent, BARCODE_REQUEST_CODE)
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-14T15:36:14.260

**解决这个问题的明确答案**

```
if (intent.resolveActivity(getPackageManager()) != null) {
    startActivity(intent);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-08T14:48:30.270

对于在 2021 年寻找类似东西的人来说是小更新 :) 由于 Android 11 不需要调用包管理器，因此需要额外的努力。那么为什么不将 startActivity() 包装在 try-catch 中呢？甚至更好 - 使用 Rx 漂亮的错误处理：

```
....
.flatMapCompletable { 
      doSomethingThrowable()
          .onErrorResumeNext { completableCallbackIfNotResolvable() }
}
.subscribe() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-25T23:03:08.643

使用 kotlin 扩展的另一种方法

```
 fun Context.isIntentAvailable(intent: Intent): Boolean {
    val resolveInfo: List<*> = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY)
    return resolveInfo.isNotEmpty()
 } 
```

**片段内的使用**

```
val available = requireContext().isIntentAvailable(this) 
```

**活动内部使用**

```
val available = this.isIntentAvailable(this) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-20T09:28:14.837

这是另一个 Kotlin 解决方案。它甚至适用于**Android 30+**。首先将其包含在您的应用清单中：

```
<queries>
    <intent>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="choose-scheme-goes-here" />
    </intent>
</queries> 
```

然后您可以检查是否可以使用此函数处理意图：

```
private fun isIntentAvailable(intent: Intent): Boolean {
    val manager = requireContext().packageManager
    val info = manager.queryIntentActivities(intent, 0)
    return info.size > 0
} 
```

# python - 在 Pyro4 应用程序中获取调用者的 IP

> ID：15407510
> 
> 赞同：1
> 
> 时间：2013-03-14T11:07:30.610
> 
> 标签：python, pyro

简而言之：有没有办法使用 Pyro4 获取调用远程代理对象的不受信任客户端的 IP？

因此，A 人从 IP 123.123.123.123 调用我的对象，而 B 人从 IP 111.111.111.111 调用我的对象是否有任何方法可以在 Pyro4 中区分它们，假设他们不能被足够信任以提交自己的 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-20T18:17:56.047

我在寻找同样的东西时遇到了你的问题。如果我理解，在服务器端你想知道客户端套接字连接的 IP 地址，对吗？如果是这样，这将做到这一点：

`Pyro4.current_context.client.sock.getpeername()[0]`

发现在[Pyro4 用户指南的这一部分](https://pythonhosted.org/Pyro4/tipstricks.html#client-information-on-the-current-context-correlation-id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:32:50.757

这是我对我的问题的解决方案：因为我真的不需要使用 pyro 获取客户端的特定地址，只是为了将特定子网（在我的课堂上）中的客户端与其他 ips（在家工作的学生）区分开来。我刚刚在两个端口上启动了两个 pyro 客户端，然后使用防火墙过滤了流量。

# javascript - 没有从 Ajax URL 调用控制器？

> ID：15407514
> 
> 赞同：0
> 
> 时间：2013-03-14T11:07:41.627
> 
> 标签：javascript, ajax, jsp, spring-mvc

下面应该调用Controller类的Ajax函数。控制器没有被调用。仅打印 generateExcel 中的第一个警报。

```
function generateExcel(bIndex){
  alert("Inside generateExcel of export_path -> branchIndex = "+bIndex);

  $.ajax({
    type:"post",
    url:"generate/exportexcel.do?branchIndex="+bIndex,
    dataType:"json",
    success:function(data){
      alert("Inside export_path generateExcel()"+data.length);
    }
  });
} 
```

控制器：

```
@RequestMapping("/generate/exportexcel.do")
public String docGeneration(String branchIndex) { 

    System.out.println("branchIndex ==> " +branchIndex);
     try{
        DocGenerator.generateExcel(branchIndex, order, filename, categoryDao);
     }
     catch(Exception e){
        e.printStackTrace();
     }
    return "message/result";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:28:47.243

如果您编写了类似的代码

```
 <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping> 
```

在 web.xml 中

那么我认为没有必要写下`.do`一行..

```
@RequestMapping("/generate/exportexcel.do") 
```

因此将其更改为

```
@RequestMapping("/generate/exportexcel") 
```

如果这不是答案，则显示您的`web.xml`文件`servlet-mapping`条目

# forms - 多页表单识别 VBA

> ID：15407519
> 
> 赞同：1
> 
> 时间：2013-03-14T11:07:49.167
> 
> 标签：forms, vba, multipage

这可能是任何人问过的最愚蠢的问题，但我已经寻找了很长时间，但我找不到答案。

我有一个包含 2 页的多页表单，我想知道用户在按下 ComandButton 时正在填写的页面（当时用户正在查看哪个页面）。我想要那个，因为取决于数据将插入到哪个页面的不同位置。

如果需要更多信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:11:46.780

对于调用的控件，`MultiPage1`您可以返回如下页面

例如

```
`1st tab
Me.MultiPage1.Value = 0
`3rd tab
Me.MultiPage1.Value = 2 
```

# bower - Bower 0.8.5 似乎卡住了

> ID：15407526
> 
> 赞同：0
> 
> 时间：2013-03-14T11:08:03.693
> 
> 标签：bower

我从 0.8.0（我猜）或更高版本更新到 0.8.5，当我进行简单的凉亭安装时，凉亭似乎卡住了。它发生在我的机器和我的 cloudbees 托管 jenkins 上。我试图做 a `bower clean-cache`， a`bower install --force`和 a`rm -rf ~/.bower`没有运气。

它总是卡在复制指令上，例如：

```
bower copying /home/bigx/.bower/cache/require/34f0965def4ee39276726c265c9162b6 
```

或任何其他库，没有模式。

当我尝试重新安装 bower 时，我得到了以下信息（仅在我的机器上，而不是在 cloudbees 上）：

```
npm WARN unmet dependency /usr/lib/node_modules/modulus/node_modules/prompt/node_modules/winston requires pkginfo@'0.2.x' but will load
npm WARN unmet dependency /usr/lib/node_modules/modulus/node_modules/prompt/node_modules/pkginfo,
npm WARN unmet dependency which is version 0.3.0 
```

这是我的 component.json

```
{
    "dependencies": {
        "angular": "~1.0.5",
        "require": "~2.1.4",
        "jquery": "~1.9.1",
        "angular-sanitize": "~1.0.5",
        "foundation": "http://foundation.zurb.com/files/foundation-3.2.5.zip",
        "less.js": "~1.3.3",
        "font-awesome": "~3.0.2"
    },
    "devDependencies": {
        "angular-mocks": "~1.0.5"
    }
} 
```

任何的想法？

问候，

泽维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:51:42.990

好的，这是这里`unzip`使用的库的一个错误`bower` ：[https ://github.com/twitter/bower/issues/314](https://github.com/twitter/bower/issues/314)

# groovy - 如何将闭包解析为 ConfigSlurper

> ID：15407543
> 
> 赞同：6
> 
> 时间：2013-03-14T11:08:29.827
> 
> 标签：groovy

背景。我正在编写一个 gradle 脚本，并希望使用 ConfigSlurper 内联一些默认配置。我已经能够从文件中解析配置，但似乎无法让内联配置工作。

我想做的是这样的：

```
myScript = {
   some {
     random {
        stuff = "You can access"
     }
   }
}

groovy.lang.Script script = new groovy.lang.Script() {
   @Override
   Object run() {
      theScript.call()
   }
}

ConfigSlurper slurper = new ConfigSlurper()
slurper.setBinding(["theScript": myScript])
ConfigObject parse = slurper.parse(script)
assert parse.some.random.stuff == "You can access" 
```

这行不通。它说

```
Caught: groovy.lang.MissingMethodException: No signature of method: scriptStuff.some() is applicable for argument types: (scriptStuff$_run_closure1_closure2) values: [scriptStuff$_run_closure1_closure2@2aca5165]
Possible solutions: dump(), use([Ljava.lang.Object;), sleep(long), wait(), run(), run()
groovy.lang.MissingMethodException: No signature of method: scriptStuff.some() is applicable for argument types: (scriptStuff$_run_closure1_closure2) values: [scriptStuff$_run_closure1_closure2@2aca5165]
Possible solutions: dump(), use([Ljava.lang.Object;), sleep(long), wait(), run(), run()
    at scriptStuff$_run_closure1.doCall(scriptStuff.groovy:2)
    at scriptStuff$_run_closure1.doCall(scriptStuff.groovy)
    at scriptStuff$1.run(scriptStuff.groovy:12)
    at scriptStuff.run(scriptStuff.groovy:18)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

（scriptStuff 是指我运行粘贴脚本的文件：scriptStuff.groovy）

所以我不确定这是否朝着正确的方向发展。实际上，如果您可以将闭包直接传递给 Slurper，那就更好了。但是 Slurper 只接受 Script、脚本文件和 String。另一个方向是将clusure转换为String。这可能吗？

任何解决方案都会很好。

**更新** 只是想详细说明我的用例。我正在为我的 gradle 脚本创建一个插件。作为用户，我想写这样的东西：

```
projectConfiguration {
   //this one is easy to parse with ConfigSlurper
   confFile = "some/path/to/configuration.groovy"

   //this is difficult to parse
   inlineConf = {
      some {
         inlined {
            configuration = "Cool!"
         }
      }
   }
} 
```

因此，即使我可以使用字符串表示法对其进行解析，但上面的表示法看起来更流畅，更像 gradle 脚本的其余部分。另一方面，我不介意解析 clojure 丑陋的代码。它只是插件内的用户。重要的是面向用户的部分是干净的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:32:09.967

使用解决策略将您的委托设置`Closure`为脚本：`DELEGATE_FIRST`

```
class ClosureScript extends Script {
    Closure closure
    def run() {
        closure.resolveStrategy = Closure.DELEGATE_FIRST
        closure.delegate = this
        closure.call()
    }
}
script = new ClosureScript(closure: myScript) 
```

请参阅[从闭包创建 Groovy ConfigObject](http://www.redtoad.ca/ataylor/2013/01/creating-a-groovy-configobject-from-a-closure/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:13:09.023

您可以使用 ConfigSlurper 解析这样的字符串：

```
def myScript = '''
   some {
     random {
        stuff = "You can access"
     }
   }
'''
def config = new ConfigSlurper().parse(myScript)
assert config.some.random.stuff == "You can access" 
```

如果你真的想传递一个 Script，那么你必须扩展 Script，因为它是一个抽象类。例如：

```
class MyConfiguration extends Script {  
    public Object run() { 
       some {
          random {
             stuff = "You can access"
          }
       }
    }
}

def config = new ConfigSlurper().parse(new MyConfiguration())
assert config.some.random.stuff=="You can access" 
```

# android - 如何从 Android 中的 TimePicker 获取选定的 am_pm 值

> ID：15407545
> 
> 赞同：3
> 
> 时间：2013-03-14T11:08:35.223
> 
> 标签：android, timepicker

我正在使用时间选择器，用户可以从中设置或更改时间并保存到数据库。我可以使用 Time Picker 从 Time Picker 中选择 Hour(s) 和 Minutes(s)，

```
TimePicker getTimepickerTime = (TimePicker) findViewById(R.id.timePicker1);
int Hour= getTimepickerTime.getCurrentHour();
int Minute=getTimepickerTime.getCurrentMinute(); 
```

但是如何从时间选择器中选择 am_pm 值？

请给我建议。我被困在这里。

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-20T06:53:00.667

如果您使用的是 TimePicker 而不是 TimePickerDialog，那么您必须使用此代码访问 Am 和 PM。一些帖子还告诉我 AM/PM 是私有的，它也是 android 中的错误。

从谷歌找到的这段代码解决了我的所有问题。

```
timePickerFrom = (TimePicker) findViewById(R.id.timePickerFrom);

    View amPmView  = ((ViewGroup) timePickerFrom.getChildAt(0)).getChildAt(2);
    if(amPmView instanceof Button)
    {
        amPmView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("OnClickListener", "OnClickListener called");
                if(v instanceof Button)
                {
                    if(((Button) v).getText().equals("AM"))
                    {
                        ((Button) v).setText("PM");
                         if (timePickerFrom.getCurrentHour() < 12) {
                             timePickerFrom.setCurrentHour(timePickerFrom.getCurrentHour() + 12);
                            }  

                    }
                    else{
                        ((Button) v).setText("AM");
                         if (timePickerFrom.getCurrentHour() >= 12) {
                             timePickerFrom.setCurrentHour(timePickerFrom.getCurrentHour() - 12);
                            }
                    }
                }

            }
        });
    } 
```

现在您可以使用检索时间，

```
timePickerFrom.setOnTimeChangedListener(new OnTimeChangedListener() {
        @Override
        public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
            // TODO Auto-generated method stub

            int timeFromHour = timePickerFrom.getCurrentHour();
            int timeFromMinute = timePickerFrom.getCurrentMinute();

        }
    }); 
```

我也有这个问题，但经过很多努力，我得到了成功。希望工作顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:22:35.510

如果我们信任此帖子[timepickerdialog-and-am-or-pm](https://stackoverflow.com/questions/2659954/timepickerdialog-and-am-or-pm)，则您不需要获取 am/pm 值，因为小时将始终采用 24 小时格式。Timepicker 显示 ap/pm 但返回 24 小时格式值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T13:16:32.240

这就是我在我的应用程序中解决这个问题的方法：

```
 public static String convert24To12System (int hour, int minute) {
    String time = "";
    String am_pm = "";
    if (hour < 12 ) {
        if (hour == 0) hour = 12;
        am_pm = "AM";
    }
    else {
        if (hour != 12) 
        hour-=12;
        am_pm = "PM";
    }
    String h = hour+"", m = minute+"";
    if(h.length() == 1) h = "0"+h;
    if(m.length() == 1) m = "0"+m;
    time = h+":"+m+" "+am_pm;
    return time;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T01:33:09.807

您始终可以使用 Java 或 Android 框架提供的 SimpleDateFormat 来执行此操作。

onTimeSet Listener 返回的 Hours 始终采用 24 小时格式，只需解析它并将其格式化为您希望它显示的任何方式。

```
this.appointmentTimeDialog = new TimePickerDialog(getActivity(),new TimePickerDialog.OnTimeSetListener() {
                @Override
                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                    SimpleDateFormat format = new SimpleDateFormat("HH:MM");
                    try {
                        Date date = format.parse(""+hourOfDay+":"+minute);
                        timeCallBack.setText(new SimpleDateFormat("h:MM a").format(date.getTime()));
                    }catch(ParseException ex){
                        ex.printStackTrace();
                    }
                }
            }, calendar.get(Calendar.HOUR_OF_DAY), calendar.get(Calendar.MINUTE),false); 
```

我希望解决了一个特殊的 Android 开发者初学者问题 :)

# symfony - symfony2 中的 containerAware 和 Controller

> ID：15407546
> 
> 赞同：3
> 
> 时间：2013-03-14T11:08:37.620
> 
> 标签：symfony, controller, containers, extends

FOSUserBundle 配置文件控制器

```
 use Symfony\Component\DependencyInjection\ContainerAware;
 class ProfileController extends ContainerAware 
```

一些功能还可以......但是当我尝试然后创建表单时

```
$form = $this->createForm 
```

出现这个错误：调用未定义的方法 ProfileController::createForm()

但是当我把它改成这样时：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
class ProfileController extends Controller 
```

表单已呈现...所以...我不知道如何将此控制器添加到我的班级并且不删除 ContainerAware ？：/

//

我的解决方案？

而不是我使用的容器感知

```
use Symfony\Component\DependencyInjection\ContainerAwareInterface; 
```

进而

```
class ProfileController extends Controller implements ContainerAwareInterface 
```

但我不知道我看不到不同的我现在是菜鸟所以......这是一个好的解决方案还是我会破坏一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:13:20.330

要回答您的原始问题，

代替：

```
$form = $this->createForm 
```

和：

```
$form = $this->container->get('form.factory')->create($type, $data, $options); 
```

createForm 方法只是定义在 Symfony\Bundle\FrameworkBundle\Controller\Controller 中的一个便利方法。由于各种原因，第 3 方库倾向于不扩展 Controller 类。因此 createForm 不可用。

真正的问题是：您为什么要尝试扩展 Profile 控制器？在大多数情况下，它是不必要的。最好通过监听事件来进行自定义。这当然假设您使用的是 FOSUserBundle 的开发版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:12:08.637

控制器已经`ContainerAware`- 从控制器声明：

```
class Controller extends ContainerAware 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T11:50:10.313

看看这个博客[Symfony2：](http://richardmiller.co.uk/2011/06/14/symfony2-moving-away-from-the-base-controller/) Richard Miller的远离基础控制器

# objective-c - 如何刷新 NSDocumentDirectory 中的 HTML 文件？（不止一次）

> ID：15407549
> 
> 赞同：2
> 
> 时间：2013-03-14T11:08:47.200
> 
> 标签：objective-c, pdf-generation

我正在使用**HTML**文件在**DocumentDirectory中****生成 pdf**文件。每次调用以下方法时，我需要刷新（使用在 html 文件中具有相同名称的新图像） **HTML 文件。**

 ****现在我正在这样做，但它只是第一次令人耳目一新（当我调用这个方法时）

```
-(void)RefreshingHTML
{
// fetching path
NSArray* deletepath_forDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString* deletedocumentsDirectoryfiles = [deletepath_forDirectory objectAtIndex:0];`

// Delete HTML file in DocumentDirectory
NSString *deleteHTMLPath = [deletedocumentsDirectoryfiles stringByAppendingPathComponent:@"HTML_Demo.html"];
NSString *deletePDFPath = [deletedocumentsDirectoryfiles stringByAppendingPathComponent:@"HTML_Demo.pdf"];
NSLog(@"delete HTML file Path : %@",deleteHTMLPath);
if([[NSFileManager defaultManager] fileExistsAtPath:deleteHTMLPath]) {

    [[NSFileManager defaultManager] removeItemAtPath:deleteHTMLPath error:NULL];
    [[NSFileManager defaultManager] removeItemAtPath:deletePDFPath error:NULL];
}
// fetching HTML file from supporting files
NSString *path = [[NSBundle mainBundle] pathForResource:@"HTML_Demo" ofType:@"html"];
NSURL *pathURL = [NSURL fileURLWithPath:path];
NSArray* path_forDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString* documentsDirectory = [path_forDirectory objectAtIndex:0];

// saving HTML file to DocumentDirectory
NSData* data = [NSData dataWithContentsOfURL:pathURL];
[data writeToFile:[NSString stringWithFormat:@"%@/HTML_Demo.html",documentsDirectory] atomically:YES];

// Fetching HTML file from DocumentDirectory
NSString *HTMLPath = [documentsDirectory stringByAppendingPathComponent:@"HTML_Demo.html"];
NSLog(@"delete HTML file Path: %@",HTMLPath);
if([[NSFileManager defaultManager] fileExistsAtPath:HTMLPath]) {

    NSURL *targetURL = [NSURL fileURLWithPath:HTMLPath];

    // Converting HTML to PDF
    self.PDFCreator = [NDHTMLtoPDF createPDFWithURL:targetURL
                                     pathForPDF:[@"~/Documents/HTML_Demo.pdf" stringByExpandingTildeInPath]
                                       delegate:self
                                       pageSize:kPaperSizeA4
                                        margins:UIEdgeInsetsMake(20, 5, 90, 5)];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:09:46.040

URL 可能正在从缓存中加载。在 NDHTMLtoPDF.m 中，查看 viewDidLoad：

而不是：[webview loadRequest:[NSURLRequest requestWithURL:self.URL]];

尝试使用允许您设置 cachePolicy 的构造函数：

NSURLRequest requestWithURL:<#(NSURL *)#> cachePolicy:<#(NSURLRequestCachePolicy)#> timeoutInterval:<#(NSTimeInterval)#>

此策略可能更适合您的需求：NSURLRequestReloadIgnoringCacheData

或者，您可以在 URL 的查询字符串中添加一些内容，这样就不会在缓存中找到它（例如，索引或时间戳）。****

# html - 在 HTML5 中控制可组合性？

> ID：15407550
> 
> 赞同：0
> 
> 时间：2013-03-14T11:08:48.637
> 
> 标签：html, controls

我是 XAML 的新手。我现在正在构建一个 HTML5 UI，我需要一个下拉框，该下拉框将在分层视图中包含项目（需要在下拉列表中有 ul 和 li(s)）。每个项目还需要在其左侧有一个复选框。如果这是 XAML，我可以轻松完成，因为大多数元素都是容器。但是在 HTML5 中，我不知道该怎么做。

根据我的搜索，我了解到一种方法是使用 jQuery 构建自定义控件。

有没有更简单的方法可以在 HTML5 中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:21:39.687

我认为最简单的方法是使用 jQuery（或任何其他 JS UI 框架）。您也可以只使用纯 Javascript。

HTML 和 CSS 的组合也是可能的。只需搜索“CSS Dropdown”并添加一些复选框。我不知道纯 HTML5 解决方案。

# iphone - 奇怪的图标行为

> ID：15407551
> 
> 赞同：1
> 
> 时间：2013-03-14T11:08:48.483
> 
> 标签：iphone, ios, objective-c, xcode

我正在开发的新应用程序有问题。我有一个没有用于运行应用程序的主图标/徽标的应用程序，问题是每次我在设备上运行该应用程序时，我的应用程序上都会出现另一个应用程序的图标，我进行了测试：

*   我确保我的应用程序证书是独一无二的，而且确实如此。
*   我检查了应用程序文件夹中的图标图像，但一无所获。
*   我清理了xcode并重新启动了我的mac。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:11:04.910

这可能发生在 not-unique 的情况下`bundle identifier`。您的 Bundle ID 应遵循以下格式：

```
com.companyname.appname 
```

# css - 如何在不同的浏览器中使用填充？

> ID：15407560
> 
> 赞同：2
> 
> 时间：2013-03-14T11:09:10.327
> 
> 标签：css, padding

我在使用填充时有一些奇怪的行为。

我有一个 div 作为包装器。这个包装器的两边都有 25px 的填充：

```
.wrapper #header #navline #log form .small {
    height: 25px;
    width: 180px;
    padding: 5px 25px;
} 
```

在那个包装器中，我有一个带有以下 css 的输入字段：

```
input[type="text"],[type="password"] {
    font-size: 10px;
    width: 180px;
    height: 18px;
    line-height: 18px;
    padding-left: 5px;
    padding-right: 5px;
    outline:none;
} 
```

并作为错误类：

```
input.error {
    background-image: url(../images/error.png);
    background-repeat:no-repeat;
    background-position: 160px 50%;
    width: 165px;
    padding-left: 5px;
    padding-right: 20px;
    position: absolute;
    z-index: 3;
} 
```

所以我通过正确的方式设置它变得疯狂。问题是 chrome/safari 和 Firefox 在处理填充属性方面似乎有所不同。例如，当`height`在 chrome/safari 中保留属性时，会自动将填充顶部/底部填充到输入字段中。在 Firefox 中，输入字段的高度不同。显示图像：

火狐： ![火狐](../Images/f1aafd0b8888f7fcc86ad0d578e10d49.png)

铬合金： ![铬合金](../Images/f8cc1de8d3e2d00bc99e663d394745c3.png)

主要问题是我想将输入字段放在包装器 div 的中心。输入的宽度应为 180px。这意味着左边每边有 25px。每边的文本填充也是 5px。因此，当使用填充属性时，输入字段的新宽度是宽度减去填充。所以这将是第一个问题。当使用5px 时`pading-left`，`padding-right`这等于 180px（宽度输入字段）减去 10px（填充）还是因为左侧 +5px 和右侧 -5px 而填充 0px？那么输入字段的正确宽度是多少？

第二个问题是关于错误类的。在那我将添加一张图片，并希望将右手边距从 5px 增加到 20px。即使在这里，输入字段的宽度是多少？我认为背后的逻辑是18​​0px减去+5px，-20px是165px？

第三个问题：我尝试了所有方法，但每个浏览器的结果都不同。我的逻辑背后是否存在失败，因为填充是否应该是填充？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:23:56.927

为每个具有填充的元素添加 css3 框大小。它将解决问题。

```
 .text {
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
box-sizing:border-box;
} 
```

# jquery - 电脑上的 Chrome 在 JS 中的触摸设备检查上返回 true

> ID：15407565
> 
> 赞同：0
> 
> 时间：2013-03-14T11:09:30.200
> 
> 标签：jquery, google-chrome, touch

我一直用它来检测我的脚本中的触摸设备：

```
var is_touch_device = 'ontouchstart' in document.documentElement; 
```

现在 Chrome 25.0.1364.172 m 在我的电脑上返回 true。

[http://jsfiddle.net/zRZD8/](http://jsfiddle.net/zRZD8/)

怎么了？如何更好地检测触摸设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:31:16.643

在同一浏览器中也为我返回 false。你的屏幕可能是可鄙的吗？:)

# c# - 延迟一段时间后检索网页数据（网页抓取）

> ID：15407566
> 
> 赞同：1
> 
> 时间：2013-03-14T11:09:33.273
> 
> 标签：c#, ajax, web-scraping, csquery

目标是在完成 Ajax 调用后从网站检索数据。当前，页面首次加载时正在检索数据。但是所需的数据是在 ajax 调用后加载的 div 中找到的。

总结一下，场景如下：

使用 C# 代码中传递的一些参数调用网页（当前使用 CsQuery for c#）。发送请求时，页面打开并显示“正在加载”图片，几秒钟后检索到所需的数据。然而，cSQuery 代码使用“正在加载”图片检索第一个页面内容..

代码如下

```
UrlBuilder ub = new UrlBuilder("<url>")
       .AddQuery("departure", "KHI")
       .AddQuery("arrival", "DXB")
       .AddQuery("queryDate", "2013-03-28")
       .AddQuery("queryType", "D");

        CQ dom = CQ.CreateFromUrl(ub.ToString());
        CQ availableFlights = dom.Select("div#availFlightsDiv");

        string RenderedDiv = availableFlights["#availFlightsDiv"].RenderSelection(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:16:24.113

当你“抓取”一个网站时，你正在调用网络服务器，你会得到它所提供的服务。如果目标站点的 DOM 被 javascript（ajax 或其他）修改，除非您将其加载到执行抓取的机器上的某种浏览器引擎中，否则您将永远无法获得该内容，该引擎能够执行 javascript来电。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T04:40:36.230

差不多一年的问题，你可能已经得到了答案。但是想在这里提一下这个很棒的项目 - SimpleBrowser。

[https://github.com/axefrog/SimpleBrowser](https://github.com/axefrog/SimpleBrowser)

它使您的 DOM 保持更新。

# javascript - 使用PhoneGap 下载PDF 以供离线查看？

> ID：15407568
> 
> 赞同：2
> 
> 时间：2013-03-14T11:09:39.277
> 
> 标签：javascript, ios, cordova, pdf, download

我正在开发一个 iPhone 应用程序，用户可以在其中使用 Xcode 中的 PhoneGap 和 HTML 下载文件（.pdf、.docx 等），然后“在线”查看它们（*本质上，用户查看从网站下载的文件）*）或“离线”（*用户已预先下载它们，现在正在硬编码正在下载的文件，并且可以从设备上的 LocalFileSystem 查看文件*）。我可以很好地下载一个 .txt 文件；

```
 function downloadEditFile() {
        var fileDownloadEdit = new FileTransfer();
        var uri = encodeURI("http://dl.dropbox.com/u/97184921/editme.txt");

        fileDownloadEdit.download(
                uri,
                pathToRoot + '/editme.txt',
                function(entry) {
                    console.log("download complete: " + entry.fullPath);
                    alert("File Downloaded. Click 'Read Editable Downloaded File' to see text");
                },
                function(error) {
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                }
        );
    } 
```

但是当我尝试开发它以下载 .pdf 文件时，它会中断。我需要帮助，我哪里出错了？我真正要做的就是将文件名更改为`Holidays.pdf`，但`console`出现了说；

```
2013-03-14 11:06:47.921 TestApp1[265:15b03] -[CDVFileTransfer download:] [Line 313] File Transfer downloading file...
2013-03-14 11:06:48.553 TestApp1[265:15b03] File Transfer Finished with response code 404
2013-03-14 11:06:48.553 TestApp1[265:15b03] -[CDVFileTransferDelegate connectionDidFinishLoading:] [Line 437] Write file /Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/AF96D141-0CE5-4D60-9FA8-8A8F9A999C81/Documents/Holidays.pdf
2013-03-14 11:06:48.554 TestApp1[265:15b03] FileTransferError {
code = 3;
"http_status" = 404;
source = "http://dl.dropbox.com/u/97184921/Internship%2520Stuff/Holidays.pdf";
target = "/Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/AF96D141-0CE5-4D60-9FA8-8A8F9A999C81/Documents/Holidays.pdf";
}
2013-03-14 11:06:48.556 TestApp1[265:15b03] [LOG] download error source http://dl.dropbox.com/u/97184921/Internship%2520Stuff/Holidays.pdf
2013-03-14 11:06:48.556 TestApp1[265:15b03] [LOG] download error target /Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/AF96D141-0CE5-4D60-9FA8-8A8F9A999C81/Documents/Holidays.pdf
2013-03-14 11:06:48.557 TestApp1[265:15b03] [LOG] upload error code3 
```

怎么了？我对 Xcode 和 PhoneGap 还很陌生，所以任何帮助都会很棒:)

这是用于下载 pdf 文件的确切 JavaScript；

```
 function downloadPDFFile() {
        var fileDownloadPDF = new FileTransfer();
        var uri = encodeURI("http://dl.dropbox.com/u/97184921/Internship%20Stuff/Holidays.pdf");

        fileDownloadPDF.download(
                                  uri,
                                  pathToRoot + '/Holidays.pdf',
                                  function(entry) {
                                  console.log("download complete: " + entry.fullPath);
                                  alert("File Downloaded. Click 'Read Editable Downloaded File' to see text");
                                  },
                                  function(error) {
                                  console.log("download error source " + error.source);
                                  console.log("download error target " + error.target);
                                  console.log("upload error code" + error.code);
                                  }
                                  );
    } 
```

我用来调用该函数的 HTML 是；

```
<button onclick="downloadPDFFile();">Download PDF File</button> <br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:45:03.113

看起来你的网址是错误的。我认为 JS 从字面上翻译 % 在您的 URI 字符串中。（JS的第3行）

如果您查看控制台输出中的 URL，它是“Internship%2520...”而不是“Internship%20”。很确定这就是为什么您在文件上得到 404，这显然意味着它无法下载。

重命名您的 DB 文件夹，使其中没有空格...使用下划线或只使用一个单词。

# java - 如何不按键而是按值类的字段对地图进行排序？

> ID：15407571
> 
> 赞同：1
> 
> 时间：2013-03-14T11:09:44.617
> 
> 标签：java, sorting, map

我有一张这样的地图：

```
Map<String, TC> mapToSort= new HashMap<String, TC>(); 
```

该值是一个类：

```
class TC {

    private int a;

    public TC(int a) {
        this.a = a;

    }
//getters-setters
    public int getA() {
        return a;
    }
    public void setA(int a) {
        this.a = a;
    }       
} 
```

我想不是按键（使用 TreeMap 很容易）而是按 TC 类中的字段“a”变量对这个地图进行排序。因此，具有最高“a”值的元素应该位于 mapToSort 的顶部。是否有任何内置或其他优雅的解决方案来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:28:16.567

像这样的东西会给你一个排序的值列表。

```
List sortValues(Map mapToSort)
{
  List values = new ArrayList(mapToSort.values());
  Comparator<TC> tcComparator = new Comparator<TC>
  {
    public int compare(TC tc1, TC tc2)
    {
      return tc1.getA() - tc2.getA();
    }
  };
  Collections.sort(values, tcComparator);
  return values;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:21:56.250

使用带有自定义比较器的 TreeMap 作为键。在关键对象中保持到值对象的链接。实现您的比较器以按值进行比较，而不是按键进行比较。在您的情况下，您必须使用以下内容包装一个字符串：

```
class Key{
   public Key(String key, TC value)
   {
      this.key = key;
      this.value = value;
   }
   String key;
   TC value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:18:55.813

由您的类实现 Comparable ，然后将它们放入 TreeSet

```
class TC implements Comparable<TC> {

    private int a;

    public TC(int a) {
        this.a = a;
    }
//getters-setters
    public int getA() {
        return a;
    }
    public void setA(int a) {
        this.a = a;
    }

    @Override
    public int compareTo(TC tc){
        return this.a-tc.getA();     
    } 
} 
```

# magento - Magento getProductCollection 不起作用。

> ID：15407575
> 
> 赞同：1
> 
> 时间：2013-03-14T11:10:01.293
> 
> 标签：magento, magento-1.7, magento-1.4, magento-1.5, magento-1.6

这是我获取所有新产品的 Magento 代码，但它突然停止工作。我添加了一些新类别，然后当我看到前端 New Arrivals 部分为空时。任何帮助，将不胜感激。

这是我的代码：

```
<?php if (($_products = $this->getProductCollection()) && $_products->getSize()): ?>
<div class="new-products">

<div class="title_index">

<!-- <div class="pagination_carousel" id="foo3_pag"></div>-->
 <h2><?php echo $this->__('New Arrivals') ?></h2>
</div>

<div class="index_cont">

<div class="list_carousel">         

<ul id="user_interaction">

<?php $_columnCount = $this->getColumnCount(); ?>

<?php $i=0; foreach ($_products->getItems() as $_product): ?>        

<li><h3 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->htmlEscape($_product->getName()) ?></a></h3>
                                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(220, 200) ?>" width="150" height="130" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" /></a>

<div class="descr"><?php echo($_product->getSku()); ?></div>

<div class="new_price"><?php echo $this->getPriceHtml($_product, true, '-new') ?></div>

<div class="new_pr_btn"><input value="1" type="text" name="qty" class="my-qty-box" /><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php 
echo $this->__('Add to Cart') ?></span></span></button></div>

                        </li>        

    <?php endforeach; ?>

                </ul>

                <div class="clear"></div>           

                </div>

</div>

<div class="shadow-div"></div>

</div>

<?php endif; ?> 
```

谢谢丹妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:33:47.677

$sql=$this->getProductCollection()->getSelect(); 将此代码放在您的 phtml 顶部。回声 $sql; 这将向您展示 sql qquery。

现在直接在 phpMyAdmin 或 miniadmin 中触发此查询，并检查您是否有此查询的记录。

如果不诊断此 sql 查询，请考虑导致某些情况的过滤器，这将引导您进行修复。

否则，您在此处粘贴 sql 查询以获取更多评论。

注意：如果平面目录在代码上，将检查平面目录表。所以检查这些表是否有所有产品。如果没有运行索引。

# json - 使用 Content-Type:application/json 传递 null 正文时无法捕获异常

> ID：15407581
> 
> 赞同：1
> 
> 时间：2013-03-14T11:10:19.930
> 
> 标签：json, jersey, jax-rs

我编写了一个 ExceptionMapper 来捕获我的应用程序中的所有 http 异常 (400,404,500,...)。

```
 @Provider
    public class MyExceptionHandler implements ExceptionMapper<Exception> {

    @Override
    public Response toResponse(Exception ex) {
        //Some Code to build Response
    } 
```

不幸的是，当我使用 Content-Type:application/json 发送带有空或错误格式正文的发布请求时，会发生此错误，我无法在 MyExceptionHandler 中捕获它。

```
Status Code: 400 Bad Request

No content to map due to end-of-input
 at [Source: org.apache.catalina.connector.CoyoteInputStream@5774bb5e; line: 1, column: 1] 
```

我做错什么了？

非常感谢。

环境：JAX-RS、GlassFish 3

编辑：我认为这个错误与 AppServer 有关，必须在那里处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:12:47.590

当有错误的请求（例如错误的格式正文）时，`WebApplicationException`会抛出 。以下是选择异常映射器的方式

*   当抛出具有空实体主体的 WebApplicationException 或其子类之一时，运行时将检查是否存在处理 WebApplicationException 异常的异常映射器。如果存在异常，则映射器用于创建发送给消费者的响应。

*   当抛出除 WebApplicationException 异常或其子类之一之外的任何异常时，运行时将检查适当的异常映射器。如果它处理抛出的特定异常，则选择异常映射器。如果抛出的特定异常没有异常映射器，则选择最近的异常超类的异常映射器。

这是我推荐的

*   注册一个`ExceptionMapper<WebApplicationException>`

*   注册一个`ExceptionMapper<Throwable>`以捕获所有其他异常，并发出一个 500 服务器错误信号的通用响应。

# php - 根据与查询的相关性对mysql结果进行排序

> ID：15407585
> 
> 赞同：1
> 
> 时间：2013-03-14T11:10:28.153
> 
> 标签：php, mysql

我正在使用用户的查询和 php 通过 html 表单搜索 mysql 数据库。

```
SELECT * FROM Collection WHERE `Name` LIKE '%$query%'; 
```

我想对结果进行排序，其中匹配分数最高的行按匹配分数的降序排列。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:12:14.423

您必须查看`FULLTEXT`搜索`Boolean`模式。

### [布尔全文搜索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:45:12.917

```
SELECT * FROM Collection WHERE `Name` LIKE '%$query%' ORDER By name ASC; 
```

使用上述查询进行排序

# gwt - 如何使用 gwt-bootstrap 将整个页面设置为响应式设计？

> ID：15407586
> 
> 赞同：0
> 
> 时间：2013-03-14T11:10:30.637
> 
> 标签：gwt, gwt-bootstrap

我正在为平板电脑构建一个 Web 应用程序。我自己先编写css。现在我添加了一些使用 gwt-bootstrap 的小部件。好吧，现在我看到 gwt-bootstrap 有一些方法，例如：`setHideOn(Device.PHONE)`

我现在正在尝试将这种方法添加到我的整个应用程序中以使其具有响应性。我应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T02:37:58.717

将此添加到您的 *.gwt.xml 文件中：

```
<set-property name="bootstrap.responsiveDesign" value="true"/> 
```

将启用响应式设计。

`setHideOn(Device.PHONE)`您所说的是在特定情况下隐藏/显示特定小部件。

# iphone - 发布请求json解析

> ID：15407587
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:10:35.207
> 
> 标签：iphone, ios, objective-c, json, cocoa-touch

**question_id = 28, value = 'yes',** `null`现在
函数会得到

```
{
 question_id = 22, 
 value = 'yes', 
 array = (9=>1, 28 => 0)
} 
```

9 是 id 1 表示是，0 表示否。该数组存储所有以前的问题和答案，如果没有问题，则显示结果。我如何使用两个操作按钮是和否来**实现/发布/这个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:14:07.640

您可以使用以下代码片段，如[本文所述](http://panditpakhurde.wordpress.com/2009/04/16/posting-data-to-url-in-objective-c/)：

在这里，我简单描述一下如何使用 POST 方法。

> **1.**使用实际用户名和密码设置帖子字符串。
> 
> ```
> NSString *post = [NSString stringWithFormat:@"&Username=%@&Password=%@",@"username",@"password"]; 
> ```
> 
> **2.**`NSASCIIStringEncoding`使用以及您需要以 NSData 格式发送的帖子字符串对帖子字符串进行编码。
> 
> ```
> NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; 
> ```
> 
> 您需要发送数据的实际长度。计算帖子字符串的长度。
> 
> ```
> NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]]; 
> ```
> 
> **3.**创建一个包含所有属性的 Urlrequest，如`HTTP`方法、http 标头字段以及 post 字符串的长度。创建`URLRequest` 对象并初始化它。
> 
> ```
> NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease]; 
> ```
> 
> 设置要向该请求发送数据的 URL。
> 
> ```
> [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.abcde.com/xyz/login.aspx"]]]; 
> ```
> 
> 现在，设置**HTTP**方法（*POST 或 GET*）。像在您的代码中一样编写此行。
> 
> ```
> [request setHTTPMethod:@"POST"]; 
> ```
> 
> `HTTP`使用发布数据的长度设置标题字段。
> 
> ```
> [request setValue:postLength forHTTPHeaderField:@"Content-Length"]; 
> ```
> 
> 还要设置 HTTP 标头字段的编码值。
> 
> ```
> [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Current-Type"]; 
> ```
> 
> 使用 postData设置`HTTPBody`urlrequest 的。
> 
> ```
> [request setHTTPBody:postData]; 
> ```
> 
> **4.**现在，创建 URLConnection 对象。使用 URLRequest 对其进行初始化。
> 
> ```
> NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
> ```
> 
> 它返回初始化的 url 连接并开始为 url 请求加载数据。**您可以使用下面的if/else**语句检查您`URL`的连接是否正确完成。
> 
>  **```
> if(conn)
> {
> NSLog(@”Connection Successful”)
> }
> else
> {
> NSLog(@”Connection could not be made”);
> } 
> ```
> 
> **5.**要接收来自 HTTP 请求的数据，您可以使用 URLConnection 类参考提供的委托方法。委托方法如下。
> 
> ```
> - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data 
> ```
> 
> 上述方法用于接收我们使用 post 方法获取的数据。
> 
> ```
> - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
> ```
> 
> 此方法，您可以在未与服务器建立连接的情况下接收错误报告。
> 
> ```
> - (void)connectionDidFinishLoading:(NSURLConnection *)connection 
> ```
> 
> 上述方法用于连接成功后的数据处理。**

 ****另请参阅** [此](http://deusty.blogspot.in/2006/11/sending-http-get-and-post-from-cocoa.html) **和** [此](http://yuvarajmanickam.wordpress.com/2012/10/17/nsurlconnection-basics-for-ios-beginners/) **文档**以了解`POST`方法。

这是[HTTPPost 方法源代码的最佳示例。](http://kemal.co/index.php/2012/02/fetching-data-with-getpost-methods-by-using-nsurlconnection/)

**编辑：**

```
-(void) buttonPressed:(id) sender
{
    NSURL *url = [NSURL URLWithString:@"URL"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setShouldStreamPostDataFromDisk:YES];
    [request setDidFinishSelector:@selector(uploadFinished:)];
    [request setDidFailSelector:@selector(uploadFail:)];
    [request setTimeOutSeconds:300];
    [request setPostValue:@"Login" forKey:@"action"];
    [request setPostValue:Yourvalue1 forKey:@"key1"];
    [request setPostValue:Yourvalue2 forKey:@"key2"];
    .
    .
    .

    request.delegate = self;
    [self.sendLoader startAnimating];
    [request startAsynchronous];
}

#pragma Mark -
#pragma Mark - ASIHTTPRequest Methods

- (void) uploadFinished:(ASIHTTPRequest *)request
{
    NSString *str = [request responseString];// convert it as JSON also.

}
- (void) uploadFail:(ASIHTTPRequest *)request
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Connection failed !!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
    [alert show];

} 
```**

# jsf - 调用重新渲染事件后动态创建的 Div 没有得到更新

> ID：15407589
> 
> 赞同：0
> 
> 时间：2013-03-14T11:10:40.417
> 
> 标签：jsf, richfaces, tomahawk, rerender

我正在使用 RichFaces 3.3.x 和 Tomahawk。我有一个在 onkeyup 上有 a4j:support 的输入字段，我正在使用“进程”来更新支持 bean。之后，我使用“reRender”来获取我的支持 bean（新）创建的 div。不幸的是，会话范围 bean 创建的 Div 的 getter 没有被调用！我应该怎么办？

```
<t:inputText id="searchString"
    value="#{beans.searchString}"
    onkeydown="if (event.keyCode == 13) { return false; }">
    <a4j:support event="onkeyup" requestDelay="200" ajaxSingle="true"
        reRender="resultsDiv" eventsQueue="quicksearchqueue"
        ignoreDupResponses="true"
        process="searchString" 
    />
</t:inputText>
<t:div id="results" binding="#{bean.resultsDiv}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T07:00:27.737

除了上面代码中的错误ID，我遇到了同样的问题。我使用 rich:tree 和 reRender 属性来重新渲染动态生成的 div 组件。它根本不起作用。如果您使用 rich:panel 而不是 div 组件，它将正常工作：

```
<t:inputText id="searchString"
    value="#{beans.searchString}"
    onkeydown="if (event.keyCode == 13) { return false; }">
    <a4j:support event="onkeyup" requestDelay="200" ajaxSingle="true"
        reRender="results" eventsQueue="quicksearchqueue"
        ignoreDupResponses="true"
        process="searchString" 
    />
</t:inputText>
<rich:panel id="results" binding="#{bean.yourPanel}" /> 
```

在支持 bean 中，您将生成的 div 作为子组件放入丰富的面板组件，如下所示：

```
yourPanel.getChildren().add(yourGeneratedDiv); 
```

我不知道为什么它不能与 t:div 组件一起使用。对此的任何回答将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:12:41.680

首先，您在 a4j:support 中放入 reRender 的 id 是“resultsDiv”，它不同于 .的“results” id。如果这不是问题的根源，请尝试将要在 ajax 中更新的区域放在 ajax 呈现的 outputPanel 中，例如：

```
<a4j:outputPanel id="resultsDiv" ajaxRendered="true" >
  <t:div id="results" binding="#{bean.resultsDiv}" />
</a4j:outputPanel> 
```

当然在 a4j 的 reRender 值中使用 outputPanel 的 id:support

# r - 从函数内部调用带有参数的函数

> ID：15407590
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:10:40.587
> 
> 标签：r, function

我正在编写一个函数，其中一个或多个参数是由函数内的循环生成的向量。
例如：

```
 myfunc<-function(rep, n, arm1, arm2)
   {
   for(i in 1:rep)
    {
     x<-rnorm(n,0,4)
     y<-rnorm(n,0,5)
     res[i]<-t.test(arm1,arm2)
    }
   return(res)
   } 
```

现在我想将该函数称为

```
 myfunc(rep = 10, n=10, arm1 = x, arm2 = x) or
     myfunc(rep = 10, n=10, arm1=x,arm2 = y) 
```

这个想法是比较不同的武器。

希望我已经清楚地说明了我的问题。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:28:06.917

让我们看看我是否得到它...

您想要运行`rep`测试，每个测试都有两个`n`正常随机变量的 vetors。而且你希望能够改变论点......坦率地说，这不是最好的编程方式......但是，我会尽力帮助你。

`res`首先要做的事情是：在创建变量之前，您不能分配给结果的任意位置。所以我会添加`res <- list()`到你的代码中。还`t.test`返回更多信息，因此它必须附加到一个`list`对象，并带有双方括号。

现在，对于参数，您必须让 R 理解它们`arm`是*符号*参数，以便在函数的环境中进行评估。因此，您必须使用捕获它的表达式`substitute`并将其传递给`eval`函数：

```
myfunc<-function(rep, n, arm1, arm2)  
{  
res <- list() ###  
for(i in 1:rep)  
{  
    x<-rnorm(n,0,4)  
    y<-rnorm(n,0,5)  
    res[[i]]<-t.test(eval(substitute(arm1)),eval(substitute(arm2))) ###  
}  
return(res)  
} 
```

尝试一下...

更好的方法如下：

```
newfunc <- function(rep, n, sd1, sd2)  
{  
lapply(1:rep, function(.) t.test(rnorm(n,0,sd1), rnorm(n,0,sd2)))  
} 
```

现在`sd1`和`sd2`是标准差参数。

# internet-explorer - Modernizr：用于 css3 转换的目标 IE

> ID：15407594
> 
> 赞同：1
> 
> 时间：2013-03-14T11:10:55.550
> 
> 标签：internet-explorer, css, transform, modernizr

我使用modernizr 来检测浏览器不支持的css3 属性。对于 CSS3 转换属性来旋转 div 我使用了规则

```
.rotate-div{
    transform:rotate(-35deg);
} 
```

除了 IE，其他浏览器使用供应商前缀的属性都很好。因此，作为 IE 的后备，我希望 div 是直的。因此，如果我想针对 IE 进行 css3 转换，我将其写为

```
.csstransforms .rotate-div{
     /*transform property*/
} 
```

但modernizr 也针对 Firefox 和 chrome 进行 css 转换。任何只针对目标的想法，即使用modernizr。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:45:36.450

我发现我必须在不受支持的属性类之前添加类名`.no-csstransforms`而不是添加类名是我的错误。`.csstransforms`它现在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:07:16.620

IE9使用`-ms`前缀，IE10使用无前缀版本

[![我可以用吗](../Images/8c7399892646cc2ee5da47f6deebfb04.png)](https://i.stack.imgur.com/2bbO2.png)

不幸的是，Prefix Free 没有添加 -ms 前缀或保留无前缀版本

[![前缀免费](../Images/8e1a31433ff8036e322c2762914279bd.png)](https://i.stack.imgur.com/eL0IE.png)

你需要的是类似

```
.rotate-div {
    -webkit-transform: rotate(-35deg);
    -ms-transform: rotate(-35deg);
    transform: rotate(-35deg);
} 
```

[常见问题解答](https://leaverou.github.io/prefixfree/#faq)和[GitHub 问题跟踪器](https://github.com/LeaVerou/prefixfree/issues/16#issuecomment-2428237)中提到了此问题。根据该反馈，它建议执行以下操作...

```
.rotate-div {
    transform:rotate(-35deg);
}
.-webkit- .rotate-div {
    transform: rotate(-35deg) rotateX(0);
} 
```

# c++ - 同一台机器上有多个fastcgi程序

> ID：15407598
> 
> 赞同：1
> 
> 时间：2013-03-14T11:11:06.620
> 
> 标签：c++, c, nginx, fastcgi

如何配置 nginx 以便我可以在同一台机器上使用多个 fastcgi 程序。我了解这个示例[http://www.kutukupret.com/2010/08/20/nginx-fastcgi-hello-world-in-c/](http://www.kutukupret.com/2010/08/20/nginx-fastcgi-hello-world-in-c/)将所有请求传递给生成的 fastcgi 进程。

我需要在专门的服务器上对一些繁重的计算任务进行负载平衡，因此我决定为此目的使用 nginx。但也许会有几个程序，我还没有找到关于那个案例的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:52:53.957

应该使用 upstream 模块和 fastcgi 模块。一个例子来自 nginx 官方网站： http: [//nginx.org/en/docs/http/ngx_http_upstream_module.html](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)。您列出了上游服务器的列表。Nginx 将为您完成剩下的工作。您可以通过一些选项来微调下面的配置。您可以阅读这些模块文档以获取更多详细信息。

```
upstream fastcgi_backend {
    server 127.0.0.1:9000;
    server 127.0.0.1:8000;

    keepalive 8;
}

server {
    ...

    location /fastcgi/ {
        fastcgi_pass fastcgi_backend;
        fastcgi_keep_conn on;
        ...
    }
} 
```

# django - Django中的简单静态面包屑

> ID：15407599
> 
> 赞同：0
> 
> 时间：2013-03-14T11:11:08.933
> 
> 标签：django

如何创建这样的东西：

如果用户在： `http://127.0.0.1:8000/about/`那么在我的 base.html 中我有：

```
You are here: <li><a href="/about/">Home</a></li> 
```

等等。

有简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:24:58.037

这可能会变得很棘手，具体取决于“面包屑”的含义。

1.  Django 的 URL 路由系统没有固有的层次结构，因为任何 URL 都可以映射到任何视图。
2.  因此，您必须完全指定“层次结构”。
3.  …并由您在您的视图或上下文处理器中传递给模板。
4.  您需要为 URL 分配一个 URL 和一个名称（所以您知道`/about/`是“Home”）。

有很多方法可以做到这一点，这完全取决于你想要它的灵活性、你的 URL 模式有多复杂、你是否想要支持嵌套等等。

通常，我只使用[Django Breadcrumbs](https://github.com/chronossc/django-breadcrumbs)。这个项目处理所有奇怪的面包屑，有一个非常易于使用的 API，甚至可以处理奇怪的情况。

虽然完整的代码示例可能会有所帮助，但这是一个漫长而棘手的问题，因此您最好阅读 django-breadcrumbs 的文档，然后带着问题返回这里。

# ruby-on-rails - 如何在 Rails 3.2 项目中显示名称而不是 ID

> ID：15407600
> 
> 赞同：0
> 
> 时间：2013-03-14T11:11:12.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在实现一个库，并且有一个类别表。

类别表如下：-

```
 id serial NOT NULL,
  name character varying(255),
  parent_cat_id integer DEFAULT 0,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT categories_pkey PRIMARY KEY (id) 
```

现在我面临的问题是我想显示类别的名称而不是引用的类别的 id。

我的 index.html.erb 文件如下：-

```
<table class="table table-striped table-bordered">
  <tr>
    <th>Id</th>
    <th>Name</th>
    <th>Parent Category Id</th>
    <th>Edit</th>
    <th>Delete</th>
  </tr>

<% @categories.each do |c| %>
  <tr>
    <td><%= c.id %>&nbsp;</td>
    <td><%= c.name %>&nbsp;</td>
    <td><%= c.parent_cat_id %>&nbsp;</td>
    <td><%= link_to 'Edit', {:action => 'edit', :id => c.id} %> &nbsp;</td>
    <td><%= link_to 'Delete', {:action => 'delete', :id => c.id},
    :data => { :confirm => "Are you sure you want to delete this value?" } %></td>
    </tr>
  </tr>
<% end %>
</table>

<br /> 
```

有什么办法可以实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:33:34.993

您可以在类别模型中添加以下内容

```
class Category < ActiveRecord::Base
  belongs_to :parent_category, class_name: 'Category', foreign_key: :parent_cat_id
end 
```

然后您可以执行以下操作

```
<td><%= c.parent_category.name if c.parent_category %>&nbsp;</td> 
```

我添加`if`只是为了确保如果类别没有父类别不会引发错误

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T11:16:02.040

尝试这个，

```
<td><%= c.parent_cat_id.name %>&nbsp;</td> 
```

如果你的模型是相关的，它就会起作用。

# log4j - Runnig Ex-crawler

> ID：15407602
> 
> 赞同：0
> 
> 时间：2013-03-14T11:11:16.890
> 
> 标签：log4j, web-crawler

嗨，我正在运行这个开源[Ex-Crawler的 jar](http://sourceforge.net/projects/ex-crawler/files/Ex-Crawler%20Distributed%20Client%20%28gui%29/)

但我总是收到此错误：og4j:WARN No appenders could be found for logger (eu.medsea.mimeutil.TextMimeDetector)。log4j:WARN 请正确初始化 log4j 系统。log4j:WARN 有关详细信息，请参阅[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:22:22.287

您正在运行的应用程序使用 log4j 来生成日志文件。log4j 需要一个配置文件，通常名为**log4j.properties**，在应用程序的类路径中可用，以便正确启动。

这是您可能开始使用的默认配置示例：

```
log4j.rootLogger=WARN, console
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.conversionPattern=%5p [%t] (%F:%L) - %m%n 
```

# java - 如何从服务器显示图像而不下载它android

> ID：15407607
> 
> 赞同：1
> 
> 时间：2013-03-14T11:11:28.683
> 
> 标签：java, android

我正在构建一个基于精确 GPS 位置显示图像的 Android 应用程序。

我的想法是从服务器显示这些图像**而不将**它们下载到手机。这样，只有在您下载了该应用程序并可以访问互联网时，您才能查看它们。

安卓可以吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:13:20.463

是的.. 您可以在 webview 中加载它们：

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# php - PHP 保存在 mySQL 中编码的特殊字符 html

> ID：15407608
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:11:29.863
> 
> 标签：php

我正在尝试将特殊字符转换为 html 字符，然后将其保存到数据库中。

所以如果我这样做：

```
myString = '123%';

myNewString = htmlentities(myString); 
```

然后我将其保存到数据库中，但我得到的是：

```
123% 
```

并不是

```
123&#37; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:34:12.693

```
echo htmlentities("<"); 
```

将字符转回可读文本

```
echo html_entity_decode("&lt;"); 
```

但是就像已经说过的那样，这适用于某些字符，对于其他字符，您将不得不使用正则表达式。

# android - 数据的错误值

> ID：15407613
> 
> 赞同：2
> 
> 时间：2013-03-14T11:11:46.343
> 
> 标签：android

我对日期有疑问。我得到日期使用：`measure.getDate()`我在我的日志中得到了 0 Sun Jun 09 14:09:00 CEST 2012 结果。但是当我使用`measure.getDate().getDay())`I got时`0`，因为我得到了 112 的`measure.getDate().getMonth()`结果`5`。`measure.getDate().getYear())`我怎样才能获得好的日期、月份和你的格式？

```
JSONArray jsonArray;
        try {
            jsonArray = new JSONArray(response);
            List<Measure> measures = new Measure.BuilderJSON().buildList(jsonArray);
            for(Measure measure: measures){
                addParamsToLists(measure);
                Log.v("eqwdasfas1", ""+measure.getDate().getDay());
                Log.v("eqwdasfas2", ""+measure.getDate().getDate());
                Log.v("eqwdasfas3", ""+measure.getDate().getYear());
                Log.v("eqwdasfas4", ""+measure.getDate().getMonth());
                Log.v("eqwdasfas5", ""+measure.getDate());
            }

        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

我不知道为什么 getDate() 返回好的值而其他函数返回错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:57:31.230

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)中`Date`：

> 在接受或返回年、月、日、小时、分钟和秒值的 Date 类的所有方法中，使用以下表示：
> 
> 年份 y 由整数 y - 1900 表示。
> 
> 一个月用 0 到 11 的整数表示；0 是一月，1 是二月，以此类推；因此 11 是 12 月。
> 
> 日期（月中的某天）通常以 1 到 31 的整数表示。小时由 0 到 23 之间的整数表示。因此，从午夜到凌晨 1 点的小时为 0 小时，从中午到下午 1 点的小时为 12 小时。
> 
> 以通常的方式，一分钟由 0 到 59 的整数表示。
> 
> 秒用 0 到 61 的整数表示；值 60 和 61 仅出现在闰秒中，即使如此，也仅出现在实际正确跟踪闰秒的 Java 实现中。

因此，对于您的问题，六月*是*5，星期日*是*0，并且`112 = (2012 - 1900)`.

# java - 抗锯齿 JWindow（形状）

> ID：15407622
> 
> 赞同：0
> 
> 时间：2013-03-14T11:12:18.340
> 
> 标签：java, graphics, shape, antialiasing, jwindow

我的应用程序中有一个 JWindow，它会在右上角弹出。我已将形状设置为 RoundRectangle2D，但 thw JWindow 的边框没有抗锯齿，因此看起来很糟糕。所以我的问题是，如何对 JWindow 进行抗锯齿处理？我知道如何使用 Graphics 对形状进行抗锯齿处理，但这不适用于 JWindow 它本身，是吗？无论如何，我怎样才能对我的 JWindow 的边框进行抗锯齿处理？

代码：

公共类选择器实现接口{

```
//Variables
//Windows
    static JWindow Frame = new JWindow();

    static JWindow[] Label = new JWindow[100];

    static Shape Shape;

    static JWindow ExitWindow = new JWindow();

    static JWindow MenuWindowHide = new JWindow();

public static void initialize() {

    //Settings
    Frame.setBounds(0,0,(int)Utility.getScreenRes().getWidth(),(int)Utility.getScreenRes().getHeight());

    Frame.setOpacity(0.4f);

    ExitWindow.setBounds((int) (Utility.getScreenRes().getWidth() - 40), 25,20,20);

    ExitWindow.getContentPane().setBackground(Color.DARK_GRAY);

    ExitWindow.setShape(new RoundRectangle2D.Double(0,0,20,20, 6, 6));

    //Post settings
    Frame.setVisible(true);

    ExitWindow.setVisible(true);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T12:04:01.860

为此，我将展示如何制作具有任何抗锯齿形状的 JFrame。

```
public class MainFrame extends JFrame
{

public MainFrame()
{
    setUndecorated(true);
    setBackground(new Color(0,255,0,0));
    setSize(300, 300);
    add(PaintingSurface); //Where PaintingSurface is JPanel with PaintPanel method below
    setVisible(true);
} 
```

然后添加一个与Frame大小相同的JPanel，并在其paint方法中使用以下方法绘制您想要的shpae

```
public void PaintPanel(Graphics g,Shape PaintArea)
{
    Graphics2D gg = (Graphics2D) g;
    gg.setRenderingHint(RenderingHints.KEY_ANTIALIASING,  RenderingHints.VALUE_ANTIALIAS_ON);

    gg.fill(PaintArea);
} 
```

# java - 在 Gradle 中获取 POM 父级

> ID：15407623
> 
> 赞同：0
> 
> 时间：2013-03-14T11:12:20.550
> 
> 标签：java, maven, repository, gradle

在 Gradle 中，我试图将本地 repo 形式的包所需的所有依赖项复制到我的工作区。我知道我可以通过以下方式获取所有文件：

```
configurations."$configName".each { file -> ... } 
```

这样我还可以解析每个工件的所有 POM，但是如果这些 POM 中定义了父级，Gradle 会将它们解析到其本地 repo。

我可以以某种方式访问​​此列表吗？文件连同它们的 POM 和父 POM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:48:01.833

没有内置的公共 API。您必须解析 POM 的`<parent>`元素（使用 Groovy 很容易），解析父元素，等等，直到没有`<parent>`留下任何元素。

# asp.net - Cheetahmail API 与 MVC4 的集成

> ID：15407626
> 
> 赞同：3
> 
> 时间：2013-03-14T11:12:30.337
> 
> 标签：asp.net, .net, asp.net-mvc-4, email

我想将我的基于 MVC4 的网站与 Cheetahmail API 集成，用于向用户发送自动生成的邮件。我没有找到任何集成 cheetahmail 的示例/想法。有人可以为我提供 Cheetahmail 集成的示例代码/链接吗？

# android - 如何在选项卡活动中创建子活动

> ID：15407630
> 
> 赞同：2
> 
> 时间：2013-03-14T11:12:52.910
> 
> 标签：android, android-intent, tabs, android-tabhost

我使用 tabHost 在我的应用程序中创建了 4 个选项卡，它工作正常。当我单击我的第一个选项卡时，它将加载相应的 xml 页面并显示一些详细信息。在该页面中有一个按钮，当我单击该按钮时，它将使用 Intent 加载另一个活动。我的问题是如何在同一个选项卡中显示该活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:14:41.907

你必须使用这个类

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.ActivityGroup;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Window;

public class TabActivityGroup extends ActivityGroup {

    private ArrayList<String> mIdList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (mIdList == null)
            mIdList = new ArrayList<String>();
    }

    /**
     * This is called when a child activity of this one calls its finish method.
     * This implementation calls {@link LocalActivityManager#destroyActivity} on
     * the child activity and starts the previous activity. If the last child
     * activity just called finish(),this activity (the parent), calls finish to
     * finish the entire group.
     */
    @Override
    public void finishFromChild(Activity child) {
        LocalActivityManager manager = getLocalActivityManager();
        int index = mIdList.size() - 1;

        if (index < 1) {
            finish();
            return;
        }

        manager.destroyActivity(mIdList.get(index), true);
        mIdList.remove(index);
        index--;
        String lastId = mIdList.get(index);
        Intent lastIntent = manager.getActivity(lastId).getIntent();
        Window newWindow = manager.startActivity(lastId, lastIntent);
        setContentView(newWindow.getDecorView());
    }

    /**
     * Starts an Activity as a child Activity to this.
     * 
     * @param Id
     *            Unique identifier of the activity to be started.
     * @param intent
     *            The Intent describing the activity to be started.
     * @throws android.content.ActivityNotFoundException.
     */
    public void startChildActivity(String Id, Intent intent) {
        Window window = getLocalActivityManager().startActivity(Id,
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        if (window != null) {
            mIdList.add(Id);
            setContentView(window.getDecorView());
        }
    }

    /**
     * The primary purpose is to prevent systems before
     * android.os.Build.VERSION_CODES.ECLAIR from calling their default
     * KeyEvent.KEYCODE_BACK during onKeyDown.
     */
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            // preventing default implementation previous to
            // android.os.Build.VERSION_CODES.ECLAIR
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    /**
     * Overrides the default implementation for KeyEvent.KEYCODE_BACK so that
     * all systems call onBackPressed().
     */
    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            onBackPressed();
            return true;
        }
        return super.onKeyUp(keyCode, event);
    }

    /**
     * If a Child Activity handles KeyEvent.KEYCODE_BACK. Simply override and
     * add this method.
     */
    @Override
    public void onBackPressed() {
        int length = mIdList.size();
        if (length > 1) {
            Activity current = getLocalActivityManager().getActivity(
                    mIdList.get(length - 1));
            current.finish();
        }
    }
} 
```

将此类扩展到另一个活动，如下所示

```
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class InterMediateActivity extends TabActivityGroup{
    String TabID;
    String TabName;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        TabID=getIntent().getStringExtra("TabID");
        TabName=getIntent().getStringExtra("TabName");
        Log.i("Tab from intermediate",""+TabID+"   "+TabName);
        filterTabs(TabID);
    }
    private void filterTabs(String TabID)
    {
              startChildActivity("Options", new Intent(this,HomePage.class));

    }

} 
```

而不是直接从选项卡调用内部活动，首先导航到`InterMediateActivity`

如下

```
Intent intent = new Intent(this, InterMediateActivity.class);
            intent.putExtra("TabID", item.elementAt(0));
            intent.putExtra("TabName", item.elementAt(1));
            specTab.setContent(intent);

            mTabHost.addTab(specTab); 
```

# jquery - 在 jQuery 中实时查找

> ID：15407632
> 
> 赞同：2
> 
> 时间：2013-03-14T11:12:57.583
> 
> 标签：jquery, find, live

我使用`find`jQuery 中的方法来查找页面上的特定框。

我还有其他按钮可以创建没有页面刷新的新框。然后找不到这些新框`find`，这是一个问题。

我用：

```
$("fieldset#"+new_item_id).find("div.images").append(img); 
```

但我也在考虑如何实现该`live`方法。或者我应该使用`on`还是其他？这种实时更新的东西很难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:28:22.760

您必须在每个事件上调用一个函数来实现这一点。

```
function addImg( new_item_id, img ){
    $("fieldset#"+new_item_id).find("div.images").append(img);
} 
```

对于那些已经存在的元素，您必须在页面加载时调用它。对于每个添加的元素，您再次调用它。所以你最终会得到类似的东西：

```
$(function(){
    $("fieldset[id]").each(function(){
        var img = //how ever you find this image...
        addImg($(this).attr('id'),img);
    });

    $('button').click(function(){
        //some ajax call
        $.ajax(
            // what ever options you have for url, data etc etc.
            success: function(response){ // assuming response is just the markup
                var $el = $(response);
                $('#content').append($el); // how ever you add this content - its probably NOT #content but you'll know that...
                var img = //how ever you find this image...
                addImg( $el.attr('id'), img );
            }
        );
    });
});

function addImg( new_item_id, img ){
    $("#"+new_item_id).find("div.images").append(img);
} 
```

编辑 - 而不是让函数找到元素只是将它传递进来......

```
$(function(){
    $("fieldset[id]").each(function(){
        var img = //how ever you find this image...
        addImg($(this),img);
    });

    $('button').click(function(){
        //some ajax call
        $.ajax(
            // what ever options you have for url, data etc etc.
            success: function(response){ // assuming response is just the markup
                var $el = $(response);
                $('#content').append($el); // how ever you add this content - its probably NOT #content but you'll know that...
                var img = //how ever you find this image...
                addImg( $el, img );
            }
        );
    });
});

function addImg( $newEle, img ){
    $newEle.find("div.images").append(img);
} 
```

# css - Safari ios 意外结果的相对百分比定位

> ID：15407636
> 
> 赞同：2
> 
> 时间：2013-03-14T11:13:03.053
> 
> 标签：css, css-float

我在 iOS 上遇到 safari 问题，当容器的高度由浮动内容确定时，相对定位的对象无法正确观察其容器的框。

我有两个跨度包含在 2 个锚点中，它们一左一右浮动。他们有一个固定的高度，我希望他们垂直居中所以我使用`top:50%; margin-top:-25px`（他们的一半高度）

我认为问题在于，`div.drawer`一旦清除 .labels > ul 的内容（li 向左浮动），它就设置在顶部容器上没有固定高度

css 中的重要行是顶部容器高度行#7（当前为自动）和跨度在行#51 - 52 上的定位

如果我给出`div.drawer`一个固定的高度（#7 中的注释），一切都会如您所愿；但是，当浮动内容被清除时，我希望自动高度能够工作，它在我测试过的*所有浏览器中都可以，**除了 iOS 上的 safari*。

**示例** [http://jsfiddle.net/robaldred/ANXsK/](http://jsfiddle.net/robaldred/ANXsK/)

![在 Chrome Android 上可以](../Images/4d18ede7c517f2e26a12f7d35bf42a81.png) ![在 Safari Mac 上很好](../Images/01e4b5e526a92950dd6e35dc295ba822.png) ![iOS Safari 问题](../Images/e911c59862cfb135190428f8ca4adadd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:29:04.380

使用位置：绝对，左：0，右：0，上：0，下：0；创建一个 100% 高度和宽度的元素。我用添加的定位叉了你的小提琴。

```
.drawer .nav {
    position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0; 
```

}

[http://jsfiddle.net/hYmpa/](http://jsfiddle.net/hYmpa/)

我不确定为什么在 iOS 高度下：100% 的操作与在桌面上的操作不同。

# c++ - 派生类调用错误的基类构造函数

> ID：15407638
> 
> 赞同：3
> 
> 时间：2013-03-14T11:13:09.083
> 
> 标签：c++, templates, inheritance, constructor

你能解释一下下面代码的输出吗？我需要做什么才能调用正确的基类构造函数？

谢谢。

```
#include <vector>
#include <iostream>

template <class CONTAINER> class SequenceComposite {
protected:
    CONTAINER m_data;
public:
    typedef typename CONTAINER::value_type value_type;
    typedef typename CONTAINER::allocator_type allocator_type;
    typedef typename CONTAINER::size_type size_type;
    explicit SequenceComposite(const allocator_type& alloc = allocator_type()) : m_data(alloc) {
        std::cout << std::endl << "SequenceComposite(alloc)" << std::endl;
    }
    explicit SequenceComposite(size_type n, const value_type& val = value_type(),
        const allocator_type& alloc = allocator_type()) : m_data(n, val, alloc) {
        std::cout << std::endl << "SequenceComposite(n, val, alloc)" << std::endl;
    }
    SequenceComposite(const SequenceComposite& x) : m_data(x.m_data) {
        std::cout << std::endl << "SequenceComposite(x)" << std::endl;
    }

};

template <class DTYPE>
class VectorComposite : public virtual SequenceComposite< std::vector<DTYPE> > {
public:
    typedef typename VectorComposite::value_type value_type;
    typedef typename VectorComposite::allocator_type allocator_type;
    typedef typename VectorComposite::size_type size_type;
    explicit VectorComposite(const allocator_type& alloc = allocator_type()) : SequenceComposite< std::vector<DTYPE> >(alloc) {
        std::cout << "VectorComposite(alloc)" << std::endl;
    }
    explicit VectorComposite(size_type n, const value_type& val = value_type(),
        const allocator_type& alloc = allocator_type()) : SequenceComposite< std::vector<DTYPE> >(n, val, alloc) {
        std::cout << "VectorComposite(n, val, alloc)" << std::endl;
    }
    VectorComposite(const VectorComposite& x) : SequenceComposite< std::vector<DTYPE> >(x) {
        std::cout << "VectorComposite(x)" << std::endl;
    }

};

template<typename T> class MyModel : public virtual VectorComposite<T> {
    public:
        MyModel() {
            std::cout << "MyModel()" << std::endl;
        };
        MyModel(const MyModel<T> &vec) : VectorComposite<T>(vec) {
            std::cout << "MyModel(x)" << std::endl;
        }
        MyModel( size_t n, const T& value= 0) : VectorComposite<T>(n, value) {
            std::cout << "MyModel(n, val)" << std::endl;
        }
};

int main() {
    MyModel<float> c(4, 2.0);
    MyModel<float> e(c);

    VectorComposite<float> a(3, 2.0);
    VectorComposite<float> b(c);

    return 0;
} 
```

输出：

```
SequenceComposite(alloc)
VectorComposite(n, val, alloc)
MyModel(n, val)

SequenceComposite(alloc)
VectorComposite(x)
MyModel(x)

SequenceComposite(n, val, alloc)
VectorComposite(n, val, alloc)

SequenceComposite(x)
VectorComposite(x) 
```

我期望

```
SequenceComposite(n, val, alloc)
VectorComposite(n, val, alloc)
MyModel(n, val)

SequenceComposite(x)
VectorComposite(x)
MyModel(x)
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:45:48.267

虚拟基类从**最派生**类型的构造函数初始化。所以在前两个示例中，`SequenceComposite`调用了默认构造函数。那就是`allocator_type`带有默认参数的那个。要使用不同的构造函数，请从最派生类型的初始值设定项列表中调用它。

# iphone - 无法通过 ABGroupAddMemeber 将联系人添加到特定组？

> ID：15407645
> 
> 赞同：0
> 
> 时间：2013-03-14T11:13:23.210
> 
> 标签：iphone, objective-c, cocoa-touch, abaddressbook

我正在学习 iPhone 编程，我正在尝试将联系人添加到特定组。我有一个包含所有联系人的数组，我想将选定的联系人添加到组中。这是我的代码：

```
 for (int i = 0; i < [array count]; i++)
        {
           ABRecordRef person = [array objectAtIndex:i];
           group  = ABAddressBookGetGroupWithRecordID(addressBook, groupId);
           BOOL didAdd = ABGroupAddMember(group, person, &err);

           if (didAdd) {
              NSLog(@"added");
           }
        } 
```

它返回 NO。我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:35:14.820

记录错误。

```
 if (didAdd == NO) {
      NSLog(@"Error Adding Contact:%@\n%@",err.localizedDescription,err.localizedFailureReason);
 } 
```

# java - Maven，多模块项目的Spring配置

> ID：15407647
> 
> 赞同：8
> 
> 时间：2013-03-14T11:13:32.220
> 
> 标签：java, spring, maven

我正在寻找一个可以很好地扩展的多模块 maven 项目（如下所述）。我对主要来自[Sonatype 示例](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)的方法有一些疑问。

我已经对 Maven 多模块项目进行了一定程度的阅读，但找不到超出基本水平的示例。

## 问题：

1.  这是（下）一个好的项目结构吗？或者它从一开始就充满了灾难的味道 - 即在建立构建时会导致大量重组？简而言之，我希望避免设置与 Maven 相悖的东西。
2.  我期望一些模块是相当独立的，而大多数模块是相互关联的。是否可以将每个模块作为 Git 存储库开始，然后在紧密链接的模块中重构？

## 目标：

1.  模块化 Spring、JSF2、Maven 项目的良好项目结构，这将允许构建涉及选择的模块及其依赖项。

2.  应该可以通过 Maven 配置（如 jetty-maven-plugin）在轻量级容器（如 Tomcat/Jetty）上部署单个 Web 模块。这应该能够通过 Maven 引入必要的依赖项。这使得在开发过程中可以很容易地专注于正在处理的模块（不必运行完整的构建和部署）并仅在完整的构建中部署完整的应用程序。

3.  该设置应允许基于要包含在构建中的模块选择进行多个分发。我认为这可以通过使用构建模块来实现，该模块将拉取并打包相应的模块。

## 项目结构

```
Core domain classes.  
somapp.core (maven project)  
 |- someapp.core (maven module)  
 |- someapp.core.tests  

Account Management Domain classes   
someapp.accountmgmt   
|- someapp.accountmgmt   
|- someapp.accountmgmt.tests   

component1 domain classes   
someapp.component1   
|- someapp.component1   
|- someapp.component1.tests

Service 1 - # account management (User login)
someapp.accountmgmt  
 |- someapp.accountmgmt.api  
 |- someapp.accountmgmt.impl  
 |- someapp.accountmgmt.mocks  
 |- someapp.accountmgmt.tests  

someapp.service2  
 |- someapp.service2.api  
 |- someapp.service2.impl  
 |- someapp.service2.mocks   
 |- someapp.service2.tests   
 |- someapp.service2.cli    # CLI access for service2

someapp.service3  
 |- like above  

someapp.accountmgmt.web  
 |- someapp.accountmgmt.web  

someapp.service2.web  
 |- someapp.service2.web  

someapp.service3.web  
 |- someapp.service3.web  

someapp.build1 # bundle accountmgmt and service2 into 1 war file  

someapp.build2 # bundle accountmgmt and service3 into 1 war file  

somapp.build3 # bundle  accountmgmt, service2 and service3 into 1 war file  

(i.e. someapp.accountmgmt.web.war, someapp.accountmgmt.jar, someapp.service2.web.war, someapp.service2.jar, someapp.service3.web.war, someapp.service3.jar, someapp.core.jar) 
```

我了解项目结构并非一成不变。我想建立一个很好的起点。欢迎提出建议/示例链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T23:09:00.983

[好吧，对于 Spring 部分，它已经讨论过了，并且在Spring Configuration in a multi-module project 中](https://stackoverflow.com/questions/8932724/spring-configuration-in-multi-module-project)接受了答案。就总体布局而言，我只看到每个项目有一个 WAR，并且服务只有在它们相关时才捆绑在一起（例如，UserLoginService 不会与 DomainObjectsService 一起使用）。

我建议将结构分解为几个不同的项目，将依赖项（业务对象等）作为 JAR 项目部署到本地存储库，并在需要它们的（现在不同的）项目中列为正常的 Maven 依赖项。然后在您的应用服务器中，您可以将应用部署到不同的路径（例如 yourdomain.com/app1、yourdomain.com/service2）。

不过，我对你的野心表示敬意！

编辑：如果您愿意，有一种方法可以拥有多个 WAR，请参阅这篇 SpringSource 博客文章，关于[在多战争 Spring 应用程序中使用共享父应用程序上下文](http://spring.io/blog/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T18:21:43.080

从 Spring IO 开始到您的工件的层次结构可以作为单个构建多模块项目来完成。

```
Spring-IO (dependencies)
   - Your parent pom (custom and further dependency management, plugins etc)
      - someapp-parent (really just a container for each -independent- sub-module)
         someapp-api    (deploy as jar into Nexus
         someapp-remote (Implements API and makes REST calls to your web app - also an independent jar)
         someapp-web    ('war' Exposes REST - JSON - representations of your API domain objects)
         someapp-dashboar (Admin console working with the API/web app via remote so you can manage everything, also a 'war') 
```

顺便说一句，Spring IO 确实很好，因为它是一组可以很好地协同工作并避免类加载器问题的受祝福的依赖项。非常值得迁移您的项目以使用它，因为最新版本看起来相当最新。我还建议将 Spring Boot 用于您的 Web 应用程序。

如前所述，我认为将所有与应用程序相关的模块构建为一个是值得的，因此版本控制更容易，并且您可以在单个构建命令中测试所有内容。我最近参与了一个项目，我们将所有这些模块分开，这意味着合并更改、构建工件、部署工件等的工作量增加了 4 倍。

# java - 为什么 Lucene 算法不适用于 Java 中的精确字符串？

> ID：15407649
> 
> 赞同：0
> 
> 时间：2013-03-14T11:13:34.833
> 
> 标签：java, lucene, string-matching

我正在研究**Java中的****Lucene**算法。我们在**MySQL**数据库中有 100K 停止名称。停止名称就像

 ****```
NEW YORK PENN STATION, 
NEWARK PENN STATION,
NEWARK BROAD ST,
NEW PROVIDENCE
etc 
```

当用户提供像**NEW YORK**这样的搜索输入时，我们会在结果中得到**NEW YORK PENN STATION** stop，但是当用户在搜索输入中提供确切的**NEW YORK PENN STATION**时，它会返回**零**个结果。

我的代码是 -

```
public ArrayList<String> getSimilarString(ArrayList<String> source, String querystr)
  {
      ArrayList<String> arResult = new ArrayList<String>();

        try
        {
            // 0\. Specify the analyzer for tokenizing text.
            //    The same analyzer should be used for indexing and searching
            StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);

            // 1\. create the index
            Directory index = new RAMDirectory();

            IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer);

            IndexWriter w = new IndexWriter(index, config);

            for(int i = 0; i < source.size(); i++)
            {
                addDoc(w, source.get(i), "1933988" + (i + 1) + "z");
            }

            w.close();

            // 2\. query
            // the "title" arg specifies the default field to use
            // when no field is explicitly specified in the query.
            Query q = new QueryParser(Version.LUCENE_40, "title", analyzer).parse(querystr + "*");

            // 3\. search
            int hitsPerPage = 20;
            IndexReader reader = DirectoryReader.open(index);
            IndexSearcher searcher = new IndexSearcher(reader);
            TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
            searcher.search(q, collector);
            ScoreDoc[] hits = collector.topDocs().scoreDocs;

            // 4\. Get results
            for(int i = 0; i < hits.length; ++i) 
            {
                  int docId = hits[i].doc;
                  Document d = searcher.doc(docId);
                  arResult.add(d.get("title"));
            }

            // reader can only be closed when there
            // is no need to access the documents any more.
            reader.close();

        }
        catch(Exception e)
        {
            System.out.println("Exception (LuceneAlgo.getSimilarString()) : " + e);
        }

        return arResult;

  }

  private static void addDoc(IndexWriter w, String title, String isbn) throws IOException 
  {
        Document doc = new Document();
        doc.add(new TextField("title", title, Field.Store.YES));

        // use a string field for isbn because we don't want it tokenized
        doc.add(new StringField("isbn", isbn, Field.Store.YES));
        w.addDocument(doc);
  } 
```

**在此代码*源*中是停止名称列表，*查询*是用户给定的搜索输入。**

**Lucene 算法是否适用于大字符串？**

**为什么 Lucene 算法不适用于精确字符串？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:31:27.383

代替

```
1) Query q = new QueryParser(Version.LUCENE_40, "title", analyzer).parse(querystr + "*"); 
```

例如：“new york station”将被解析为“title:new title:york title:station”。***此查询将返回包含上述任何***术语的所有文档。

尝试这个..

```
2) Query q = new QueryParser(Version.LUCENE_40, "title", analyzer).parse("+(" + querystr + ")"); 
```

**Ex1** : "new york" 将被解析为 "+(title:new title:york)"

上面的“+”表示结果文档中出现“ **must** ”一词。它将匹配包含“new york”和“new york station”的文档

**Ex2** : "new york station" 将被解析为 +(title:new title:york title:station)。该查询将仅匹配“new york station”，而不仅仅是“new york”，因为 station 不存在。

请确保字段名称“标题”是您要查找的内容。

**你的问题。**

***Lucene 算法是否适用于大字符串？***

您必须定义什么是大字符串。您是否真的在寻找[Phrase Search](http://en.wikipedia.org/wiki/Phrase_search)。一般来说，是的，Lucene 适用于大字符串。

***为什么 Lucene 算法不适用于精确字符串？***

因为解析 ("querystr" + "* ") 将生成单独的术语查询，并使用 OR 运算符连接它们。例如：'new york*' 将被解析为："title:new OR title:york*

如果您期待找到“纽约站”，上面的通配符查询不是您应该寻找的。这是因为您传入的 StandardAnalyser 在编制索引时会将纽约站标记（分解术语）为 3 个术语。

**因此，查询“york*”将找到“york station”只是因为它有“york”，而不是因为通配符，因为“york”不知道“station”，因为它们是不同的术语，即不同的条目索引。**

您真正需要的是一个用于查找确切字符串的[PhraseQuery](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/PhraseQuery.html)，其查询字符串应该是**带有**引号的“new york”****

# vim-fugitive - 如何使用 Fugitive 运行 `git diff --staged`？

> ID：15407652
> 
> 赞同：28
> 
> 时间：2013-03-14T11:13:43.520
> 
> 标签：vim-fugitive

该命令`:Gdiff`相当于`git diff`在该文件上运行。

`git diff --staged`or的等价物是`git diff --cached`什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-08-22T08:57:16.200

我找到了一种方法来做到这一点。运行`:Gstatus`，你应该得到一个窗口，其内容如下：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   example.txt
# 
```

向下滚动到暂存文件，`example.txt`然后按`Shift`+ `D`。这将打开一个差异视图，比较 HEAD 中的内容和索引中的内容。您会在底部的栏上注意到这两个文件名都是特殊的逃犯文件名。

此外，在 Gstatus 预览窗口中，您可以按`g``?`，这将列出在当前上下文中有效的所有映射。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-05T05:35:25.457

虽然`vim-fugitive`不提供or的直接类似物，但*它**提供*了一个通用的 Vim 命令，用于将任意命令的输出通过管道传输到只读的 Vim 缓冲区：.`git diff --staged``git diff --cached`*`git``:Git!`*

 *## 不适用的答案

在我们开始之前，让我们明确地重申这个问题。`git diff --staged`并且`git diff --cached`是相同底层操作的同义词：将索引的内容（所有分阶段更改的集合）与 HEAD 的内容（当前分支的最新提交）进行比较，通常用于在提交之前查看更改。陈述的问题就变成了：

> **审查所有阶段性更改的最有效方法是`vim-fugitive`什么？**

应该清楚的是，当前接受的自我回答未能解决这个问题。下一个评分最高的自我回答也好不到哪里去。

`:Gstatus`绑定仅适用于当前行上的文件，因此根据定义*不能*用于查看所有分阶段的更改。此外，`:Gstatus` `D`绑定甚至不会检查当前行上文件的所有分阶段更改。它只比较该文件的索引和工作树副本，而不是比较该文件的索引和最近提交的副本（这是一个完全不同的野兽）。

`:Gdiff HEAD`同样不适用。它只区分与当前缓冲区对应的文件的最近提交和工作树副本。`:Gdiff`没有参数相当于`:Gstatus` `D`绑定，再次区分该文件的索引和工作树副本。两者都没有审查所有阶段性更改。

## 适用答案

[emaniacs](https://stackoverflow.com/users/692355/emaniacs)对后一个答案的评论是最接近工作解决方案的：

```
:Git diff --staged 
```

现在我们正在逼近真相！

`:Git`将传递的命令的输出通过管道`git`传送到当前的外部寻呼机，从而可以轻松地查看 Vim 外部的所有阶段性更改。但问题是：**在 Vim 之外。**这意味着没有 Vim 绑定、缓冲区或语法高亮。理想情况下，我们希望使用只读的 Vim 缓冲区语法突出显示`git diff --staged`. 我们可以这样做吗？

## 解决方案

我们可以，或者 Tim Pope 不是 Vim Pope。-`!`后缀的变体就是`:Git`这样做的，它允许轻松地查看 Vim 中的所有阶段性更改*，*并使用基于 Vim 的语法突出显示更改差异：

```
:Git! diff --staged 
```

**是的。**这真是太棒了。

但是，让我们更进一步。在到处都是懒惰的懒鬼的悠久传统中，让我们定义一个`:Greview`封装这个操作的新 Vim 命令和一个`<leader>gr`运行这个命令的新绑定。只需将以下内容存储到您的`.vimrc`：

```
command Greview :Git! diff --staged
nnoremap <leader>gr :Greview<cr> 
```

假设`<leader>`是`,`，审查所有阶段性更改减少到`,gr`. 它无法得到任何Vimmier。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-18T10:22:34.020

```
:Gdiff HEAD 
```

`Gdiff`接受修订参数。所以你可以通过它`HEAD`。这不等同于`git diff --staged`，但可以达到类似的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-29T03:37:53.323

更新：2017 年 3 月 28 日，

当您按下`D`文件时，当前版本的逃犯会自动执行此操作。

如果文件是暂存的，则差异中只会显示暂存的更改。如果文件未暂存，则只有未暂存的更改可见。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-10T19:16:28.087

如前所述，`Gdiff`,`Gdiff :`或`Gdiff :0`为您提供带有索引的差异 ，`Gdiff -`或为您`Gdiff HEAD`提供带有 HEAD 的差异。

### 三分法

因此，首先在 vim 中`:`使用`-`show 3 diff-panes 进行 diff：

1.  头
2.  索引（“缓存”或“暂存”）
3.  工作树

```
command! -bar Gvstage :Gvdiff -|Gvdiff : " vertical 3-split
command! -bar Gsstage :Gsdiff -|Gsdiff : " horizontal 3-split 
```

当然，`Gvdiff -`如果您已经处于差异模式，您也可以这样做。

现在，通过 3 个打开的窗口推送和获取更改稍微复杂一些，但是，您可以`diffput`轻松地从索引到工作树，反之亦然，因为 HEAD`modifiable`已关闭，因此它永远不会成为目标。

否则，您可以为`diffput`and`diffget`命令添加一些快捷方式，知道它们可以采用“缓冲区说明符”，可以是模式（请参阅 :help merge）或缓冲区编号。我修改了前面的命令以保存初始缓冲区的编号并为其他命令使用模式：

```
command! -bar Gvstage :let t:working_copy=bufnr('%')|Gvdiff -|Gvdiff : " vertical 3-split
command! -bar Gsstage :let t:working_copy=bufnr('%')|Gsdiff -|Gsdiff : " horizontal 3-split
nnoremap <Leader>hg :diffget fugitive://*/.git//[0-9a-f][0-9a-f]*/<CR> " HEAD get
nnoremap <Leader>ig :diffget fugitive://*/.git//0/<CR>                 " index get
nnoremap <Leader>ip :diffput fugitive://*/.git//0/<CR>                 " index put
nnoremap <Leader>wg :diffget <C-R>=t:working_copy<CR><CR>              " work get
nnoremap <Leader>wp :diffput <C-R>=t:working_copy<CR><CR>              " work put 
```

* * *

### 差异工具方法

或者，如果你只是想要一个很好的`vimdiff`视图而不是补丁，让我建议：

```
command! Greview :exec "Git difftool --tool=vimdiff --staged " . fugitive#buffer().path() 
```

这会启动一个新的 vim 实例，所以当你退出它时，你会回到你已经打开的选项卡和窗口，这是完美的。这比通过 git 状态窗口转换更快（至少对我而言），但缺点是您无法编辑暂存文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-14T21:32:24.160

使用`:Gtabedit @:% | Gdiff :`.

这比其他答案更好，因为它像 一样在拆分视图中打开`:Gdiff`，而不是将 diff 语法转储到单个缓冲区中。当你完成后，只是`:tabc`为了回来。

### 解释

1.  `Gtabedit`打开一个新选项卡并编辑一个逃犯对象：
    *   从提交`@`（HEAD），特定文件`:`，当前文件`%`。
2.  `Gdiff`将当前缓冲区与另一个逃犯对象进行比较：
    *   从索引中`:`（您可以再次指定文件，`:%`但不需要）。

### 奖金

我们现在有`git diff`( `:Gdiff`) 和`git diff --staged`(上面的命令) 的逃犯等价物。要获取`git show`当前文件的行为，请使用`:Gtabedit @~:% | Gdiff @`.

### 参考

*   [https://github.com/tpope/vim-fugitive/issues/837#issuecomment-247985612](https://github.com/tpope/vim-fugitive/issues/837#issuecomment-247985612)
*   `:help fugitive-object`

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-07-18T09:58:10.397

如果你有人偶然发现了这个问题。

**:Gdiff --staged**

会做.. ：）*

# c# - 如何确保没有两个后续 BeginSend()？

> ID：15407653
> 
> 赞同：0
> 
> 时间：2013-03-14T11:13:47.293
> 
> 标签：c#, multithreading, sockets, synchronization, asyncsocket

我编写了一个应该管理许多客户端的服务器端应用程序。一切都是使用 BeginSend() 和 EndSend() 方法异步完成的。

在某些情况下，我需要向其中一个客户端发送两个后续请求。我希望确保在**第一个**BeginSend() 和**最后一个**EndSend() 之间没有调用新的 BeginSend()。我虽然关于使用 AutomaticResetEvent 执行此操作，这样如果服务器尝试向客户端发送两条消息，则第二条消息将阻塞，直到发送第一条消息

1.  以上述方式这样做有意义吗？
2.  代码有时会抛出“NullReferenceException”。我似乎无法理解为什么？

感谢您的见解。

```
struct SendBuffer
    {
        public const int BUFFER_SIZE = 1024 * 128;
        public byte[] BUFFER;
        public int sent;

        public SendBuffer(byte[] data)
        {
            BUFFER = new byte[data.Length];
            Buffer.BlockCopy(data, 0, BUFFER, 0, data.Length);
            sent = 0;
        }

        public void Dispose()
        {
            BUFFER = null;
            sent = 0;
        }

    }

public void SendAsyncData(string str, CommandsToClient cmd)
        {
            byte[] data = Combine(BitConverter.GetBytes((int)(cmd)), BitConverter.GetBytes((int)(str.Length)), Encoding.ASCII.GetBytes(str));
            SendAutoResetEvent.WaitOne();
            SendAsyncDataWithHeader(data);
        }

        private void SendAsyncDataWithHeader(byte[] data)
        {
            int toSend;
            byte[] dataWithHeader = Combine(BitConverter.GetBytes(data.Length), data);
            sendBuffer = new SendBuffer(dataWithHeader);
            if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
                toSend = SendBuffer.BUFFER_SIZE;
            else
                toSend = sendBuffer.BUFFER.Length - sendBuffer.sent;
            try
            {
                socket.BeginSend(sendBuffer.BUFFER, 0, toSend, SocketFlags.None, sendCallback, null);
            }
            catch (SocketException se)
            {

                switch (se.SocketErrorCode)
                {
                    case SocketError.ConnectionAborted:
                    case SocketError.ConnectionReset:
                        if (Disconnected != null)
                        {
                            Disconnected(this);
                        }
                        break;
                }

            }
            catch (ObjectDisposedException)
            {
            }
            catch (NullReferenceException ex)
            {
            }

            catch (Exception ex)
            {

                Disconnected(this);
            }

        }

        void sendCallback(IAsyncResult ar)
        {
            try
            {
                int bytesSent = socket.EndSend(ar);
                if (bytesSent == 0)
                {
                    if (Disconnected != null)
                    {
                        Disconnected(this);
                        return;

                    }
                }
                sendBuffer.sent += bytesSent;
                if (sendBuffer.sent == sendBuffer.BUFFER.Length)
                {
                    //all data was sent. do some
                    //do some processing...
                    sendBuffer.Dispose();
                    //let new send request in
                    SendAutoResetEvent.Set();
                    return;
                }
                int toSend;
                // exception says that in the following line, sendBuffer.Buffer is null....
                if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
                    toSend = SendBuffer.BUFFER_SIZE;
                else
                    toSend = sendBuffer.BUFFER.Length - sendBuffer.sent;

                socket.BeginSend(sendBuffer.BUFFER, sendBuffer.sent, toSend, SocketFlags.None, sendCallback, null);
            }

            catch (SocketException se)
            {
                switch (se.SocketErrorCode)
                {
                    case SocketError.ConnectionAborted:
                    case SocketError.ConnectionReset:
                        if (Disconnected != null)
                        {
                            Disconnected(this);
                            return;
                        }
                        break;

                }

            }
            catch (ObjectDisposedException ex)
            {

            }
            catch (NullReferenceException ex)
            {
                //here an exception is thrown, 
            }

            catch (Exception ex)
            {

                Disconnected(this);
            }

        }

    }
} 
```

# jsp - 如何在jsp的文本字段中将当前日期设置为默认值

> ID：15407655
> 
> 赞同：0
> 
> 时间：2013-03-14T11:13:49.540
> 
> 标签：jsp, struts, struts-1

我想在一个字段中设置`current date`为默认值`text``jsp`

不使用任何`scriptlets`或**javascript**或**java 代码**

任何可用的**struts1.2**标签？或任何其他方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:04:37.990

根据[Struts 1.x 文档](http://struts.apache.org/development/1.x/struts-taglib/tagreference.html)，您应该使用[`<bean:write>`](http://struts.apache.org/development/1.x/struts-taglib/tlddoc/bean/write.html)标签：

```
<bean:write name="yourBean" format="MM-dd-yyyy" property="date" /> 
```

或者，您可以使用[JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/) [`<fmt:formatDate>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)标记：

```
<fmt:formatDate value="${yourBean.date}" pattern="MM-dd-yyyy" /> 
```

或者，您可能希望升级到[Struts 2](http://struts.apache.org/release/2.0.x/docs/tag-reference.html)并使用[`<s:date>`](http://struts.apache.org/release/2.0.x/docs/date.html)标签：

```
<s:date name="date" format="MM-dd-yyyy" /> 
```

当然，scriptlet 中的 JavaScript`var date = new Date()`和 Java`<c:set var="date" value="<%=new java.util.Date()%>" />`也一直存在。

# r - Spearman 秩相关的检验统计量

> ID：15407656
> 
> 赞同：1
> 
> 时间：2013-03-14T11:13:51.273
> 
> 标签：r, statistics, correlation

我的问题是我计算了两个变量之间的 Spearman 等级相关性。一位审稿人问我是否可以为 p < 0.001 的所有系数添加检验统计量。

这是一个结果：

```
> cor.test(pl$data, pl$rang, method= "spearman")

#       Spearman's rank correlation rho

data:  pl$data and pl$rang
S = 911164.6, p-value = 1.513e-05
alternative hypothesis: true rho is not equal to 0 
sample estimates:
rho 
-0.3347658 
```

测试统计量是否等于**S = 911164.6**？这么大的数字可以吗？如果问题不是很专业，请提前抱歉，但我花了很多时间在书籍和互联网上寻找答案。:(提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:20:05.567

是的。`?cor.test`帮助页面（在“值”部分中）将返回值描述为`cor.test`：

> ```
>  A list with class ‘"htest"’ containing the following components: 
> ```
> 
> statistic：检验统计量的值。

调整该页面上的示例，我们看到

```
x <- c(44.4, 45.9, 41.9, 53.3, 44.7, 44.1, 50.7, 45.2, 60.1)
y <- c( 2.6,  3.1,  2.5,  5.0,  3.6,  4.0,  5.2,  2.8,  3.8)
(result <- cor.test(x, y, method = "spearman"))
#         Spearman's rank correlation rho

# data:  x and y 
# S = 48, p-value = 0.0968
# alternative hypothesis: true rho is not equal to 0 
# sample estimates:
# rho 
# 0.6 
result$statistic
#  S 
# 48 
```

统计量由和`(n ^ 3 - n) * (1 - r) / 6`的`n`长度给出。`x``r <- cor(rank(x), rank(y))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T13:03:21.900

我找到的最佳答案在页面上：[Rpubs Spearman Rank Correlation](https://rpubs.com/aaronsc32/spearman-rank-correlation)

这个问题也在[交叉验证“解释 R 中 Spearman 的等级相关系数输出。什么是‘S’？”](https://stats.stackexchange.com/questions/226069/interpreting-the-spearmans-rank-correlation-coefficient-output-in-r-what-is-s/467528#467528)

虽然论坛`(n ^ 3 - n) * (1 - r) / 6`, were`n`等于变量的样本量并且`r`等于计算 S 统计量的相关系数 (rho) 是明确的，但对于如何解释结果没有明确的解释。我还没有找到明确的答案:(

# android - 在不同 API 级别的 XML 布局中使用各种版本的自定义视图的更好方法？

> ID：15407657
> 
> 赞同：0
> 
> 时间：2013-03-14T11:14:05.893
> 
> 标签：android, android-layout, android-xml, android-custom-view

例如，我有两个版本的自定义`View`调用`MyView`（用于 API 4-10）和`MyView_v11`（用于 API 11+）。它们都继承自`View`Android 中的类。`MyView_v11`只需扩展`MyView`和覆盖*仅在 API 11+ 中可用的*`View`一种方法。

 *目前我正在使用不同的布局文件，例如：

```
layout
    main_activity.xml
layout-v11
    main_activity.xml 
```

第一个布局定义了一个指向 的视图，`MyView`第二个布局*仅*更改该视图并将其指向`MyView_v11`。

*我的问题*：我怎样才能*只使用一个*文件，比如针对不同 API 级别`layout/main_activity.xml` *的*一些单独的辅助布局文件？因为在布局中还有很多其他视图，但只有一个自定义视图。`R.style.AppTheme`我想使用与创建新示例 Android 项目时Andoid SDK 生成的技术相同的技术：

```
values:
    <style name="AppTheme" parent="@android:style/Theme" />
values-v11:
    <style name="AppTheme" parent="@android:style/Theme.Holo" /> 
```

* * *

*编辑*：我更喜欢其他解决方案`commonsware`。我希望这是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:16:26.627

你总是可以放入`MyView`它自己单独的布局，并`include`在你的`main_activity.xml`. 然后，您只需要两个 API 特定版本的简单`my_view_layout.xml`布局，并且只需要一个`main_activity.xml`. 这将允许您复制尽可能少的 xml。

```
 layout
     main_activity.xml
     my_view_layout.xml
 layout-v11
     my_view_layout.xml 
```

[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)*

# ios - iOS NSXMLParser 无法读取非英文字符？

> ID：15407659
> 
> 赞同：0
> 
> 时间：2013-03-14T11:14:08.177
> 
> 标签：ios, nsxmlparser

我有一个包含一些非英文字符的 xml 文件。例如：

```
<item>Rīga</item> 
```

当我用 NSXMLParser 解析它时，我得到了第一个“ **foundCharacters** ”，所以我没有得到空格和换行符。但是当有非英语字符时，它只返回第一个字母“R”作为结果。

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:45:12.363

您可以使用以下代码：

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

NSString *correctString = [NSString stringWithCString:[string cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding];

 } 
```

希望这会帮助你。

一切顺利 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:46:50.867

使用下面的方法

*   (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { NSString *strValue = [NSString stringWithCString:[string cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding]; [currentElement appendString:strValue]; 字符串值 = 零；}

# java - 操作栏中的溢出菜单

> ID：15407661
> 
> 赞同：1
> 
> 时间：2013-03-14T11:14:12.990
> 
> 标签：java, android, android-3.0-honeycomb, android-4.2-jelly-bean

我正在开发一个安卓智能手机和平板电脑的应用程序。我正在尝试在 android 平板电脑（3.x 及更高版本）的操作栏上添加菜单按钮。我在stackoverflow上阅读了其他一些问题（例如：[如何在带有菜单按钮的设备上强制使用溢出菜单](https://stackoverflow.com/questions/9286822/how-to-force-use-of-overflow-menu-on-devices-with-menu-button)），但这不是我想要的。

目前我正在使用标题栏来显示菜单按钮，如您在此屏幕中所见： ![在此处输入图像描述](../Images/bcca854af9dd91568ad318c45bf8f3e5.png)

这是一个“好”的解决方案，但仅适用于 3.x 版，因为 4.x 版既适用于智能手机又适用于平板电脑，出于审美原因，我不想看到标题栏。所以我想要这样的东西 ![在此处输入图像描述](../Images/deb7629469adde45371cc63336774aba.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:24:08.483

这是不可能的，除非指定`android:targetSdkVersion`10 或更少，此时这不是一个好主意，因为它会使您的应用程序看起来很旧。

如果您不想使用操作栏，那很好，但是您需要创建自己的菜单，这些菜单旨在与您自己的 UI 搭配使用。

# c# - 缓存应用程序块

> ID：15407663
> 
> 赞同：0
> 
> 时间：2013-03-14T11:14:17.013
> 
> 标签：c#, .net

我正在将 Microsoft Caching 应用程序块添加到 ac# 项目。无论如何设置应用程序块将使用的最大内存使用量。

我知道我可以`maximumElementsInCacheBeforeScavengings`在缓存等中设置...但是我事先不知道每个项目的大小。

因此，我想说最大内存使用量 = 300mb 或其他东西，而不是项目数。

该应用程序是在具有小内存安装 (2GB) 或更少的 PC 上运行的 C# WPF 应用程序。我想在内存中缓存数据，但显然我需要确保缓存不会开始完全耗尽 2GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:45:09.243

看来这不能用缓存应用程序块来完成。但是，正如 CodeCaster 指出的那样，无论如何我都应该使用 System.Runtime.Caching 类。

正如詹姆斯冈特指出的那样，我已经替换了它并设置了限制。

下面是 app.config 执行此操作的 XML。

```
 <system.runtime.caching>
    <memoryCache>
      <namedCaches>
        <add name="Default"
             cacheMemoryLimitMegabytes="200"
             physicalMemoryLimitPercentage="20"
             pollingInterval="00:05:01" />
      </namedCaches>
    </memoryCache>
  </system.runtime.caching> 
```

# sql - 如何强制 SQL 查询计数 max/min/avg 正常工作？

> ID：15407674
> 
> 赞同：2
> 
> 时间：2013-03-14T11:15:14.893
> 
> 标签：sql, oracle

我在编写正确的 sql 查询时遇到问题，该查询应按国家和站点选择两个日期之间的最小/最大/平均持续时间（以天为单位）以进行试验。

## 我的查询：

```
SELECT v.country as country, v.site as site,
  COUNT(*) as N --,
  --MAX(list of durations in days between discovered date to repored date on each violation by country and site) as "Maximum",
  --MIN(list of durations in days between discovered date to repored date on each violation by country and site) as "Minimum",
  --AVG(list of durations in days between discovered date to repored date on each violation by country and site) as "Mean"
FROM violations v
WHERE v.trial_id = 3
GROUP BY ROLLUP (v.country, v.site) 
```

这是我的[SQLFIDDLE](http://www.sqlfiddle.com/#!4/46249/6/0)，其中包含改进注释行所需的数据结构和查询。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:25:35.520

使用 Oracle，日期存储为偏移量，因此您可以简单地从另一个日期中减去 1 个日期。有关详细信息，请参阅[日期算术](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#sthref3839)。

[SQLFiddle](http://www.sqlfiddle.com/#!4/b5651/1/0)

```
SELECT v.country as country, v.site as site,
  COUNT(*) as N,
  MAX(reporded_date - discovered_date) as "Maximum",
  MIN(reporded_date - discovered_date) as "Minimum",
  AVG(reporded_date - discovered_date) as "Mean"
FROM violations v
WHERE v.trial_id = 3
GROUP BY ROLLUP (v.country, v.site) 
```

请注意，您提供的测试数据总是相隔 1 天，所以我也在我的小提琴中更新了（对于德国）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:32:42.457

您所要做的就是将报告日期和发现日期之间的差异放入聚合函数中：

```
SELECT v.country as country, v.site as site,
  COUNT(*) as N,
  MAX(reported_date-discovered_date) as "Maximum",
  MIN(reported_date-discovered_date) as "Minimum",
  AVG(reported_date-discovered_date) as "Mean"
FROM violations v
WHERE v.trial_id = 3
GROUP BY ROLLUP (v.country, v.site) 
```

您提供的 SQLFiddle 数据实际上不会显示任何差异，因此[这里是一个更新版本](http://www.sqlfiddle.com/#!4/00e4e/1)。

# jquery - jQuery .html .animate

> ID：15407675
> 
> 赞同：0
> 
> 时间：2013-03-14T11:15:16.483
> 
> 标签：jquery, onclick

我正在尝试构建一个只有两个步骤的步骤轮播。我想将图片加载到右侧 div 中，将其滑动到左侧，然后将相同的图片加载到左侧 div 中并再次使用 css 使其可见以恢复原始状态并准备以不同的方式重复该过程图片。

它有点工作。加载页面后，第一次点击一切正常。在第二次单击时，插入的图片仅在动画完成后加载。例如，即使动画时间设置为 20000。

所以这不是图像加载问题，而是代码的一些问题。.html 不能有回调函数 - 那么我该如何正确地做到这一点？

```
$(window).ready(function () {
    $('#unt').click(function () {
        $('#panorama2').html('<img src="img/panoramabild-1.jpg">');
        $('#panoramaslider').animate({
            'margin-left': '-1240px'
        }, 600, function () {
            $('#panorama').html('<img src="img/panoramabild-1.jpg">');
            $('#panoramaslider').css({
                'margin-left': '0'
            });
        });
    });
    $('#phi').click(function () {
        $('#panorama2').html('<img src="img/panoramabild-2.jpg">');
        $('#panoramaslider').animate({
            'margin-left': '-1240px'
        }, 600, function () {
            $('#panorama').html('<img src="img/panoramabild-2.jpg">');
            $('#panoramaslider').css({
                'margin-left': '0'
            });
        });
    });
}); 
```

# android - Flex 自定义布局在我的 Android 平板电脑上表现不同

> ID：15407676
> 
> 赞同：1
> 
> 时间：2013-03-14T11:15:17.573
> 
> 标签：android, apache-flex, air

未能找到解决我[之前问题](https://stackoverflow.com/questions/15354929/my-android-air-app-shows-white-screen-when-textinput-loses-focus)的方法，我决定使用自定义布局实现我自己的软键盘。我想为键盘做的就是能够顺利地适应各种不同的屏幕尺寸。因此，当按键与屏幕边界重叠时，整条线被划分并整齐地定位。

一切都按计划进行。我重写`updateDisplayList()`以重新定位元素并`measure()`分配正确的尺寸，因此当定位在垂直组中时，我的布局会相应地拉伸它。

当我在平板电脑上安装应用程序时，问题就出现了。定位都错了。尺寸似乎是应有的三倍。

我正在我的**SANSUI ETAB 801VP**（AIR 3.6.0.585，Android 4.0.4）上测试该应用程序

下面是定位代码：

```
override public function updateDisplayList(width : Number, height : Number):void
    {
        var x : Number = 0, y : Number = 0;

        for (var i : uint = 0; i < target.numElements; i++) {
            var element : ILayoutElement = target.getElementAt(i);

            element.setLayoutBoundsSize(NaN, NaN);

            var dx : Number = x + element.getLayoutBoundsWidth() + _gap;

            if (dx >= target.parent.width) {
                i = Math.floor(i / 2);
                x = dx = 0;
                y += getMaxHeight(0, i) + _gap;
            }

            element.setLayoutBoundsPosition(x, y);

            x = dx;
        }
    } 
```

并测量：

```
override public function measure():void
    {
        var indent : Number = 0, height : Number = 0;

        var next : uint = 0;

        for (var i : uint = 0; i < target.numElements; i++) {
            var element : ILayoutElement = target.getElementAt(i);

            element.setLayoutBoundsSize(NaN, NaN);

            var dx : Number = indent + element.getLayoutBoundsWidth() + _gap;

            if (dx >= target.parent.width) {
                height += getMaxHeight(next, i) + _gap;

                next = 0;
            }

            indent = dx;
        }

        height += height == 0
            ? getMaxHeight()
            : getMaxHeight(next);

        target.measuredWidth  = target.parent.width;
        target.measuredHeight = height;
    } 
```

`getMaxHeight()`迭代指定范围的元素，计算最大高度：

```
private function getMaxHeight(startIndex : uint = 0, endIndex : uint = 0x7fffffff):Number
    {
        endIndex = Math.min(target.numElements, endIndex);

        var height : Number = 0;

        for (var i : uint = 0; i < endIndex; i++) {
            var element : IVisualElement = target.getElementAt(i);

            element.setLayoutBoundsSize(NaN, NaN);

            height = Math.max(element.height, height);
        }

        return height;
    } 
```

我在这里错过了什么吗？在我的 FlashDevelop 中，平台设置为 AIR Mobile 3.1。我是否应该尝试在我的计算机上安装 AIR 3.6 以满足我在平板电脑上获得的结果？

# multithreading - 使用静态 ninject 容器线程安全吗？

> ID：15407679
> 
> 赞同：0
> 
> 时间：2013-03-14T11:15:25.923
> 
> 标签：multithreading, entity-framework, thread-safety, ninject

我目前正在使用一个静态 ninject 容器，该容器包含对 ninject 内核的引用，该内核配置为每次返回 SOA 架构中特定存储库或服务类的新实例。我在不同的线程之间使用它，这样使用它是否安全？请注意，这不是一个 Web 应用程序，这是一个使用 Entity Framework 作为持久层的控制台应用程序。如果它不是线程安全的，你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:23:24.660

正如你在评论中所说的那样

“我的意思是因为有很多线程将使用容器来获取新实例”

所以每个线程都要求容器创建一个类型的新实例，所以每次你都会得到一个对象的新状态，所以你不会摆弄状态，我认为这里没有任何问题。

# coldfusion - CF Report Builder 将 html 标签（即富文本）显示为纯文本

> ID：15407683
> 
> 赞同：0
> 
> 时间：2013-03-14T11:15:38.933
> 
> 标签：coldfusion, coldfusion-8, cfml, coldfusionbuilder, coldfusion-7

这是来自数据库的内容：

```
<p><b>As the newly reborn Modbook Inc.</b> </p> 
```

报告页面中的实际输出是相同的（包括 html 标签）。

```
<p><b>As the newly reborn Modbook Inc.</b> </p> 
```

预期的输出是粗体文本，例如：

**作为新生的 Modbook Inc.**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:34:52.493

从我所见，您需要使用[自定义函数](http://www.dreamincode.net/forums/topic/130228-using-html-in-cfreport-builder-data/)。看起来有人在 2012 年 3 月 19 日之前尝试使用该解决方案。我[在 Kay Smoljak 的博客上](http://kay.smoljak.com/2006/04/coldfusion-report-builder-sanity-saving-tips/)看到有一个属性可以处理一些标签，但我还没有测试过它（它来自近 7 年前，但是考虑到报表生成器中缺乏人气，我怀疑 Adob​​e 在帮助这个问题上做了很多工作）。

> **神秘的 HTML Formatted Text 属性**
> 
> 报告生成器的最新版本包括文本对象的新属性——HTML 格式化文本（true 或 false）。它不在程序帮助或 livedocs 中。我尝试过的基本 HTML——段落、Hx 元素和强元素——似乎不起作用——呈现的报告中显示的标记。通过反复试验，我发现元素确实有效。其他演示样式的 HTML（例如元素）可能也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T23:40:05.853

1.  使用`<strong>`而不是`<b>`.

2.  使用`<i>`而不是`<em>`.

3.  使用`<a href="http://www.someLocation.com">http://www.someLocation.com</a>`而不是`<a href="http://www.someLocation.com">some English here</a>`.

4.  不要使用`&nbsp;`. 它崩溃了。我没有很好的解决方法。

5.  不要使用`<hr>`. 它崩溃了。我没有很好的解决方法。

您可能会在 adobe 在[https://bugbase.adobe.com/index.cfm?event=bug&id=3861021](https://bugbase.adobe.com/index.cfm?event=bug&id=3861021)中找到更多信息。

# javascript - div滚动自定义选择隐藏在滚动下方的列表项

> ID：15407684
> 
> 赞同：1
> 
> 时间：2013-03-14T11:15:43.427
> 
> 标签：javascript, jquery, listview

![自定义控件](../Images/6d60fd10c4465db3641499320a8cbb84.png)

我正在开发一个自定义控件，该控件呈现一个文本框，并在其下方显示一个有序列表。让我直截了当地说，在文本框中，如果用户向上或向下按，它会遍历列表项，为每个项目提供一个类选择（虚线）并删除从前一个项目中选择的类。Now the problem is, when the selecting class is assigned to the last item visible on the page, everything is fine till then, but after that when a user presses down button, the selecting class is assigned to an item that is not visible on the页面，现在必须向下滚动 div。现在，我不知道如何在这个特定点向下滚动 div，反之亦然。我的意思是如何向下滚动，但是什么应该触发向下滚动。

我还应该提到 list(ol) 包含在一个具有最大高度和溢出自动的 div 中。我将不得不将此 div 向上滚动到我想要向下/向上滚动到的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:20:23.813

尝试这个：

```
$('your-parent-element').scrollTop($('your-item').scrollTop()); 
```

其中 your-parent-element 是父列表，而 'your-item' 是未显示的元素。

# validation - 显示问题 - 验证发生在页面加载中

> ID：15407686
> 
> 赞同：0
> 
> 时间：2013-03-14T11:15:49.367
> 
> 标签：validation, struts2

验证在页面加载时发生。错误消息显示为页面加载。

我的 index.jsp 看起来像

```
<body>
Employee Information : 
   <s:form action="empinfo" method="post">
      <s:textfield name="name" label="Name" size="20" />
      <s:textfield name="age" label="Age" size="20" />
      <s:select name="gender" headerKey="0" headerValue="Select Gender"
     label="gender" list="#{'1':'Male','2':'Female'}" />

      <s:textfield name="email" label="Email" size="20" />
      <s:textfield name="phone" label="Phone_Number" size="20" />
      <s:submit name="submit" label="Login" align="center" />  
   </s:form>
</body> 
```

动作类（Employee.java）

```
public String execute() 
   {
       return SUCCESS;
   } 
```

验证文件 Employee-validation.xml：

```
 <field name="name">
      <field-validator type="requiredstring">
         <message>
            The name is required.
         </message>
      </field-validator>
   </field>

   <field name="age">
      <field-validator type="required">
         <message>
            The age is required.
         </message>
      </field-validator>
   </field> 
```

struts.xml 文件为：

```
<action name="empinfo" 
         class="com.tutorialspoint.struts2.Employee"
         method="execute">
         <result name="init">/index.jsp</result>   
         <result name="input">/index.jsp</result>
         <result name="success">/Edit.jsp</result>
      </action> 
```

单击提交后，我应该怎么做才能验证表单？struts.xml 文件是否需要为此进行任何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:03:13.530

在动作类中编写验证代码。您正在使用 struts2，因此您可以像下面那样执行此操作。

```
<action name="empinfo" class="com.tutorialspoint.struts2.Employee" method="formSubmit">
   <result name="init">/index.jsp</result>   
   <result name="input">/index.jsp</result>
   <result name="success">/Edit.jsp</result>
 </action> 
```

在 Employee.java 中

```
 public String validateFormSubmit() 
  {
    if(age.equals(null)){
     //display msg feild is required
    }

    if(name.equals(null)){
     //display msg feild is required
    }
  }

public String formSubmit() 
   {
       return SUCCESS;
   } 
```

# iphone - 从另一个类继承的 Objective-C 调用方法

> ID：15407688
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:15:57.743
> 
> 标签：iphone, ios, objective-c, multiple-inheritance

我无法让我的左侧类与视图控制器 ivars 方法进行交互，我认为它可能是进行多重继承，但我不知道如何重构它来解决我的问题......</p>

JACenterViewController -> 继承 CustomClass.h // 使用 alloc/init 创建对象...</p>

JALeft -> 继承 JACenterViewController // 我想说 [viewController myCustomClass] helloDelegate];

视图控制器类：

```
#import "CustomClass.h"
@interface JACenterViewController : UIViewController <CustomClassDelegate>

@property (nonatomic, retain) CustomClass *myCustomClass;

-(void)pushMe;
@end

#import "JACenterViewController.h"
@implementation JACenterViewController
@synthesize myCustomClass;

// delegrate method
-(void)sayHello:(CustomClass *)customClass {
    [customClass helloDelegate];
}

// class method
- (void)viewDidLoad {
    [super viewDidLoad];

    self.myCustomClass = [[CustomClass alloc] init];
    [self.myCustomClass setDelegate:self];
    [[self view] addSubview:[self.myCustomClass createButton]];
}

-(void)pushMe {
    NSLog(@"push me %@", [self class]);
    [myCustomClass helloDelegate];
}
@end 
```

我的 VC 继承的自定义类：

```
#import <Foundation/Foundation.h>
@class CustomClass;

@protocol CustomClassDelegate
-(void)sayHello:(CustomClass *)customClass;
@end

@interface CustomClass : NSObject

@property (nonatomic, assign) id delegate;
@property UIButton *button;

-(void)helloDelegate;
-(UIButton*)createButton;
@end

#import "CustomClass.h"
@implementation CustomClass
@synthesize delegate, button;

-(id)init {
    self = [super init];
    return self;
}

-(void)helloDelegate {
    NSLog(@"Hello Delegate working!!: %@", [self class]);
    [self.button setTitle:@"Title" forState:UIControlStateNormal];
}

-(UIButton*)createButton {
    self.button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [self.button setFrame:CGRectMake(0, 0, 100, 100)];
    return self.button;
}
@end 
```

最后是我的左侧课程（顺便说一句：这个课程从故事板加载）：

```
#import "JACenterViewController.h"
@interface JALeft : UIViewController

@end

#import "JALeft.h"

@implementation JALeft

- (void)viewDidLoad {
    JACenterViewController *viewController = [[JACenterViewController alloc] init];

    NSLog(@"Respones %d", [[viewController myCustomClass] respondsToSelector:@selector(helloDelegate)]);
    NSLog(@"Respones %d", [self respondsToSelector:@selector(helloDelegate)]);
    NSLog(@"Respones %d", [super respondsToSelector:@selector(helloDelegate)]);

    /* NOT WORKING: Method should call customClass methods that has been inherited from ViewController */
    [[viewController myCustomClass] helloDelegate];
}

@end 
```

我希望我的 JALeft 类在继承时从视图控制器类调用方法 helloDelegate？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:32:44.587

第一行理论上应该可以工作，但是您没有以调用 viewDidLoad 的方式实例化您的 JACenterViewController - 因此您的 CustomClass 实例没有加载。

要确保调用 viewDidLoad，请使用 nib 实例化您的 JACenterViewController。大概喜欢 `JACenterViewController *viewController = [[JACenterViewController alloc] initWithNibName:nil bundle:nil];`

这样，您的 viewDidLoad 将被调用，然后您应该实例化您的委托。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-15T09:18:07.330

单例：总是返回自身相同实例的类。它为类中的所有资源提供了一个全局访问点。

在 CustomClass.h 中：添加

```
+(CustomClass*)sharedObject; 
```

在 CustomClass.m 中：添加

```
static CustomClass *sharedSingleton = nil;

+(CustomClass*)sharedObject {
        @synchronized(self) {
        if (!sharedSingleton) {
                sharedSingleton = [[CustomClass alloc] init];
            } return sharedSingleton;
        }
}

+(id)alloc {
        @synchronized(self) {
            NSAssert(sharedSingleton == nil, @"Attempted to allocate a second instance of a singleton");
                sharedSingleton = [super alloc];
                return sharedSingleton;
            } return nil; 
```

}

您喜欢传递和接收消息的任何类都在该类中包含此头文件，并使用工厂方法进行初始化。

# spss - 如何使用spss中的if条件从一个变量复制到另一个变量

> ID：15407691
> 
> 赞同：1
> 
> 时间：2013-03-14T11:15:59.957
> 
> 标签：spss

我在 SPSS 中寻找 IF 条件语法。我有 2 个变量，一个是 IND，另一个是代码：

```
IND (String)             Code (String)        i want final var as below

retail                                        retail
finance                  5411                 5411
education                -                    education 
transportation           4491                 4491 
consulting               8711                 8711
insurance                -                    insurance
finance                  -                    finance
other                    4813                 4813 
```

两者都是字符串变量。无论代码为空，我都需要来自 IND 变量的数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:48:33.883

您正在寻找一种`do if`结构。请参阅添加的示例代码：

```
string final_var (a50).

do if code = "0000" or code = "".
comp final_var = ind.
else.
comp final_var = code.
end if.

exe. 
```

# jquery - JQuery Datatable：如何禁用特定的排序

> ID：15407695
> 
> 赞同：8
> 
> 时间：2013-03-14T11:16:04.267
> 
> 标签：jquery, datatables

我想禁用表格第一行的排序，该行看起来像

```
<tr class="no-sort">
<td colspan="4"></td>
<td></td>
<td></td>
<td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:31:43.303

不要将此行添加到显示的数据中。

将代码添加到您的 中，或在您的开头`fnDrawCallback`添加一行：`thead``tbody`

```
var opts = {};

opts.fnDrawCallback = function(){
    var mySpecialRow = '<tr><td>First</td><td>Second</td></tr>';

    $('#mytable thead').append(mySpecialRow);
    // or
    $('#mytable tbody').prepend(mySpecialRow);
}
$('#mytable').dataTable(opts); 
```

也许我错过了一些细节：

```
var $tr = $('#mytable tr.no-sort');
var mySpecialRow = $tr.html();
$tr.remove();

var opts = {};
opts.fnDrawCallback = function(){
    $('#mytable thead').append(mySpecialRow);
    // or
    $('#mytable tbody').prepend(mySpecialRow);
};

// add any other option you want
opts.sPaginationType = "full_numbers";

$('#mytable').dataTable(opts); 
```

# unit-testing - 机器人电动。Maven OutOfMemoryError：超出 GC 开销限制

> ID：15407700
> 
> 赞同：0
> 
> 时间：2013-03-14T11:16:18.593
> 
> 标签：unit-testing, maven, robolectric, android-testing

为什么当我将 pom.xml 依赖项添加到 Robolectric 库时，我得到 OutOfMemoryError：GC 开销限制超出？

我的依赖：

```
 <dependency>
             <groupId>com.pivotallabs</groupId>
             <artifactId>robolectric</artifactId>
             <version>1.2</version>
         </dependency> 
```

当我删除它时，一切正常。当我添加到`android-maven-plugin`下一个字符串时，它没有任何意义

```
 <dexJvmArguments>
            <argument>-Xmx1500m</argument>
        </dexJvmArguments> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:12:33.937

感谢亚伦·冯德哈尔。[回答我的问题](http://groups.google.com/forum/#!msg/robolectric/iY0cpwyhEik/9V3-xhGKK00J)

# c++ - C++ 中的智能指针引用计数

> ID：15407701
> 
> 赞同：1
> 
> 时间：2013-03-14T11:16:18.770
> 
> 标签：c++

我正在阅读*[Safe C++](http://shop.oreilly.com/product/0636920024224.do)*，我对引用计数有疑问。下面代码的注释部分提供了问题？

```
#include <iostream>

using namespace std;

template <typename T>class RefCountPtr {
public: 
    explicit RefCountPtr(T* p = NULL) {
            Create(p);      
    }

    RefCountPtr(const RefCountPtr<T>& rhs) {
        Copy(rhs);      
    }

    RefCountPtr<T>& operator=(const RefCountPtr<T>& rhs) {  
        if(ptr_ != rhs.ptr_) {
            Kill();         
            Copy(rhs);  
        }
        return *this;   
    }

    RefCountPtr<T>& operator=(T* p) {
        if(ptr_ != p) { 
            Kill();     
            Create(p);  
        }   
        return *this;
    }   
    ~RefCountPtr() {
        Kill();
    }
    T* Get() const {
        return ptr_; 
    }

    T* operator->() const { 
        // SCPP_TEST_ASSERT(ptr_ != NULL, "Attempt to use operator -> on NULL pointer.");   
        return ptr_;    
    }   

    T& operator* () const { 
        // SCPP_TEST_ASSERT(ptr_ != NULL, "Attempt to use operator * on NULL pointer.");
        return *ptr_;   
    }

    int GetCount() { return *count_; }
private:    
    T*  ptr_;
    int*    count_;

    void Create(T* p) { 
        ptr_ = p;   
        if(ptr_ != NULL) {
            count_ = new int;
            *count_ = 1;    
        } else {
            count_ = NULL;  
        }   
    }   

    void Copy(const RefCountPtr<T>& rhs) {  
        ptr_ = rhs.ptr_;
        count_ = rhs.count_;
        if(count_ != NULL)  
            ++(*count_);
    }   

    void Kill() {   
        if(count_ != NULL) {
            if(--(*count_) == 0) {  
                delete ptr_;    
                delete count_;  
            }   
        }   
    }
};

void main()
{

    int* pFirstInt = new int;

    RefCountPtr<int> refPointer(pFirstInt);

    cout << "count: " << refPointer.GetCount() << std::endl;

    RefCountPtr<int> refSecondPointer = refPointer; // this calls copy constructor.

    cout << "second count: " << refSecondPointer.GetCount() << std::endl;

    RefCountPtr<int> refThirdPointer;
    refThirdPointer = pFirstInt; **// Question why are we not incrementing same int pointer? How can we correct this?
                                 // If we are not incrementing same pointer why author has provided 
                                 // operator = for data type T? 
                                 // Note: As expected program is crashing while exiting as we are deleting int pointer twice.**

    std::cout << "Third pointer: " << refThirdPointer.GetCount() << std::endl;

    RefCountPtr<int> refFourthPointer;
    refFourthPointer = refSecondPointer;

    cout << "Fourth count: " << refFourthPointer.GetCount() << std::endl;

    return;
}

/*
count: 1
second count: 2
Third pointer: 1
Fourth count: 3
Press any key to continue . . .

*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:21:06.777

问题在于：

```
refThirdPointer = pFirstInt; 
```

从已经由另一个智能指针管理的原始指针进行分配。

因此，您最终会尝试管理两个不相关的智能指针`pFirstInt`。它们是无关的，因为它们有各自的引用计数，并且幸福地不知道彼此的存在。这会导致您正在观察的双重删除。

# openstack - 重新运行 stack.sh 时出错

> ID：15407702
> 
> 赞同：0
> 
> 时间：2013-03-14T11:16:19.243
> 
> 标签：openstack, devstack

我是openstack的新手。我最近从以下教程在我的 ubuntu 虚拟机中完成了单节点 openstack 安装：-

[http://www.openflowhub.org/display/floodlightcontroller/Install+Floodlight+and+OpenStack+on+Your+Own+Ubuntu+VM](http://www.openflowhub.org/display/floodlightcontroller/Install+Floodlight+and+OpenStack+on+Your+Own+Ubuntu+VM)

我能够通过 Horizo​​n 访问这些服务。但是重新启动后，我无法访问 openstack 的任何内容。所以我不得不重新运行stack.sh，在此期间我在quantum net-create 命令中收到以下错误：-

```
Usage: quantum [OPTIONS] <command> [args]
quantum: error: no such option: --tenant_id 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:22:30.863

使用 devstack 时，重要的是要了解它并非旨在成为功能齐全的 openstack 安装。它是开发人员的工具。因此，devstack 安装程序脚本“stack.sh”的功能是假设 devstack 部署是短暂的。

基本上没有坚持。当您重新启动时，该软件仍将驻留在本地磁盘上，但在 init 或 upstart 或您有什么中没有支持的启动例程设置。

处理此问题的公认方法是运行“unstack.sh”，这将删除以前的 devstack 配置。然后再次运行“stack.sh”。

作为附录。

根据我的经验，在 devstack 环境上运行 unstack.sh 之前更新 devstack 可能会破坏该环境。基本上，如果清理逻辑适应新的安装方式，它将不适合取消堆栈以前版本的 stack.sh。

所以要小心。我的偏好是在 kvm 实例中运行 devstack。如果我损坏了某些东西，我会保留一个具有已知工作配置的备份 qcow 可用于交换。这又是一个开发环境。当它坏了你不应该修理它。你应该从轨道上用核武器摧毁它并重新开始。这是云的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:04:00.363

rejoin-stack.sh 是您正在寻找的。唉，它没有完全工作，因为它只重新加入屏幕会话。对此有一个蓝图：[https ://blueprints.launchpad.net/devstack/+spec/restart-services](https://blueprints.launchpad.net/devstack/+spec/restart-services)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T15:44:52.003

我想为此添加一个稍微更新的答案（我现在正在运行 mitaka）

如果您在重新运行时遇到问题`./stack.sh`，请确保您已运行

```
./unstack.sh 
```

然后事情又开始运转`./stack.sh`了

# android - Facebook SDK 3.0 身份验证对话框（只有一次？）

> ID：15407705
> 
> 赞同：3
> 
> 时间：2013-03-14T11:16:28.600
> 
> 标签：android, facebook

我参考了示例 SessionLoginSample 并设置了一些其他权限。在我的 Android 手机中，有一个 Facebook 应用程序（apk）。我点击登录按钮，然后弹出身份验证对话框。

我点击了“取消”。我收到错误“com.facebook.FacebookOperationCanceledException：用户拒绝了该应用程序”。

之后，我点击登录按钮，但无法出现身份验证对话框。有人可以帮助告诉我如何再次获得 Auth 对话框吗？

# c# - 使用 ASP.NET 进行条件 html 呈现

> ID：15407710
> 
> 赞同：2
> 
> 时间：2013-03-14T11:16:38.530
> 
> 标签：c#, asp.net, html, data-binding, itemtemplate

考虑以下代码片段：

```
<asp:TemplateField HeaderText="Item Data">
    <ItemTemplate>
        <%# DataBinder.Eval(Container.DataItem, "ItemData1") %>
        <br />&nbsp;&nbsp;
        <%# DataBinder.Eval(Container.DataItem, "ItemData2") %>
    </ItemTemplate>
</asp:TemplateField> 
```

我需要对此进行重构，以便如果 ItemData2 为空白，`<br />&nbsp;&nbsp;`则不会呈现

我不确定如何实现这一目标。

**编辑：**我试图添加这样的条件：

```
<% if(DataBinder.Eval(Container.DataItem, "ItemData2") != null) { %>
    <br />&nbsp;&nbsp;
    <%# DataBinder.Eval(Container.DataItem, "ItemData2") %>
<% } %> 
```

它没有用，而且看起来很丑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:24:43.383

在 DataBinder.Eval 中，您可以像下面这样传递您的条件，这对您有用。

```
<%#( DataBinder.Eval(Container.DataItem,"Item1)==null ?DataBinder.Eval(Container.DataItem,"Item1"):
DataBinder.Eval(Container.DataItem,"Item2"))%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:25:28.520

将`dataBinder.Eval()`语句放在`asp:literal`控件中，然后在 CodeBehind 中添加 DataBinding 事件处理程序，并`Literal2.Visible = false`根据您的条件进行设置。将您`<br/ >`的放在第二个文字中。

请注意，此方法保持关注点分离，因此您没有 C# 代码返回 HTML 片段，但不是“内联”的。

一个使用中继器的示例，但所有这些控件的工作方式类似：

```
 void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
   {

      // Execute the following logic for Items and Alternating Items.
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
      {

         var dataItem = (YourDataItem)e.Item.DataItem;
         if (null == dataItem.Item2)// this is pseudo code because I don't know what your dataItem looks like 
         {
             ((literal)e.Item.FindControl("Literal2")).Visible = false;
         }
      }
   } 
```

项目模板如下所示：

```
<asp:TemplateField HeaderText="Item Data">
    <ItemTemplate>
        <%# DataBinder.Eval(Container.DataItem, "ItemData1") %>
        <asp:Literal Runat="server" ID="Literal2">
            <br />&nbsp;&nbsp;
            <%# DataBinder.Eval(Container.DataItem, "ItemData2") %>
        </asp:Literal>
    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:22:35.263

不要使用 a `<br />&nbsp;&nbsp;`，而是考虑将这两个项目包装在一个显示为块的元素中，例如 a`div`

```
<asp:TemplateField HeaderText="Item Data">
    <ItemTemplate>
        <div><%# DataBinder.Eval(Container.DataItem, "ItemData1") %></div>
        <div><%# DataBinder.Eval(Container.DataItem, "ItemData2") %></div>
    </ItemTemplate>
</asp:TemplateField> 
```

如果 ItemData2 为空白，则 div 将为空白，并且不会占用任何空间或导致 HTML 中的换行符。

有关示例，请参[见此 JSFiddle](http://jsfiddle.net/XMt79/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:27:29.803

我认为你可以通过在后面的代码中定义公共方法`.cs`然后`ItemData2`检查它是否为空它返回想要的标记字符串，如果不返回空字符串

例子：：

```
<asp:TemplateField HeaderText="Item Data">
    <ItemTemplate>
        <%# DataBinder.Eval(Container.DataItem, "ItemData1") %>        
        CheckEmptyData(Eval("ItemData2").ToString())
    </ItemTemplate>
</asp:TemplateField> 
```

然后在后面的代码中：

```
public string CheckEmptyData(string ItemData2)
{
    if (string.IsNullOrEmpty(ItemData2))
        return "";
    else
        return "<br />&nbsp;&nbsp;" + ItemData2;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:23:52.030

绑定时，您可以在“ItemData2”前面添加换行符和空格。IE，

```
if(ItemData2Field.length>0){
    string item2 = ""+
    "  " + ItemData2;} 
```

把它分成两行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T11:36:37.647

根据 Jodha 的回答，这就是我解决它的方法。当然不是最优雅的解决方案，但我在这里看到的没有什么比这更优雅的了。

```
<%# DataBinder.Eval(Container.DataItem, "ItemData2") != null ? DataBinder.Eval(Container.DataItem, "ItemData1") + "<br />&nbsp;&nbsp;<span style=\"color: gray;\">" + DataBinder.Eval(Container.DataItem, "ItemData2") + "</span>" : DataBinder.Eval(Container.DataItem, "ItemData1") %></asp:Label> 
```

# java - MultipartFile 每次都返回 null

> ID：15407713
> 
> 赞同：1
> 
> 时间：2013-03-14T11:16:40.803
> 
> 标签：java, spring-mvc, http-request-parameters

我正在使用此代码将图像文件发布到我的控制器，但我总是得到文件正文部分的空值。

```
@RequestMapping(value = "/updateprofile", method = RequestMethod.POST)
public @ResponseBody
ResponseMsg updateProfile(
        @RequestHeader(value = "userid", required = false) String userid,
        @RequestHeader(value = "name", required = false) String name,
        @RequestHeader(value = "phone", required = false) int phone,
        @RequestParam(value = "file", required = false) MultipartFile file) {

    ResponseMsg responseMsg = CommonUtils.checkParam(userid, name, phone,
            file);
    if (responseMsg.getStatus().equalsIgnoreCase("True"))
        responseMsg = userService.login(name, userid);
    return responseMsg;
} 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:34:23.837

当您使用时`multipart`，您的表单字段将包含在`request Stream`. 因此，您必须检查它们是否`form fields`存在。

这是我在 servlet 中使用的，您可以在其中进行适当的更改以在`Spring-MVC`.

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        if (isMultipart)
        {
            try 
            {
                List items = upload.parseRequest(request);
                Iterator iterator = items.iterator();
                while (iterator.hasNext()) 
                {
                    FileItem item = (FileItem) iterator.next();

                    if (item.isFormField()) //your code for getting form fields
                    {
                        String name = item.getFieldName();
                        String value = item.getString();
                        System.out.println(name+value);
                    }

                    if (!item.isFormField()) 
                    {
                       //your code for getting multipart 
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:38:03.243

首先请发布更多代码然后我们可以找到更多，其次我认为问题出在您的表单上。如果你使用 Spring mvc 上传文件，你的表单应该是这样的：`<form action="your url" method="post" enctype="multipart/form-data">`注意**enctype**，它让 Spring DispatchServlet 知道你要上传文件。你也应该检查你是否`MutilPartFileResovler`在配置文件中进行了配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T06:23:13.503

对于那些仍在为这个问题苦苦挣扎的人来说，这对我有用。以前我的`input`领域被定义为，

```
<input type="file" /> 
```

我在上面的行中得到了空文件，但是当我添加时`name="file"`一切正常！

```
<input type="file" name="file" /> 
```

希望这可以帮助！

# ruby-on-rails - 路由到 current_user 路径

> ID：15407714
> 
> 赞同：2
> 
> 时间：2013-03-14T11:16:43.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

所以我在顶部有一个 Bootstrap 导航栏。

我想链接到 current_user 的编辑路径，但我总是收到错误：

```
ActionController::RoutingError at /blog

No route matches {:action=>"edit", :controller=>"users"} 
```

这就是我目前正在尝试的：

```
<% if current_user %> <--! user logged in? -->
<% @user ||= current_user %> 
<%= link_to 'Settings', edit_user_path  %>
<% end %> 
```

我在 /user/1/ 页面上没有这个错误，但我在其他任何地方都有这个错误。

也试过这个，但没有帮助：

```
def edit
  if params[:id]
    @user = User.find(params[:id])
  else
    @user = current_user
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:19:54.577

尝试这个，

```
<%= link_to 'Settings', edit_user_path(current_user)  %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:20:51.170

`edit_user_path`需要将用户记录传递到路径，因此请执行以下操作

```
<% if current_user %> <--! user logged in? -->
  <%= link_to 'Settings', edit_user_path(current_user) %>
<% end %> 
```

# linux - 在 linux 中是否可以从任何用户空间程序注册中断处理程序？

> ID：15407718
> 
> 赞同：1
> 
> 时间：2013-03-14T11:16:53.193
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我正在研究Linux中断处理机制，只是怀疑是否允许从用户空间注册中断处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:41:32.913

不，中断是在内核中注册的，必须将驱动程序/模块加载到内核空间才能接收中断。它可以将处理传递给与内核模块挂钩的用户空间守护进程，但必须将某些东西插入内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T15:29:39.003

不能直接注册用户空间中断处理程序。

内核 ISR 通过写文件/设置寄存器/信号来指示中断。用户空间应用程序对此进行轮询并继续使用适当的代码。

Linux 文件抽象用于连接内核和用户空间。这主要由字符设备和 ioctl() 调用执行。

[https://stackoverflow.com/a/47776006/5349798](https://stackoverflow.com/a/47776006/5349798)

# go - 在 Go 的 http 包中，如何获取 POST 请求的查询字符串？

> ID：15407719
> 
> 赞同：143
> 
> 时间：2013-03-14T11:17:00.050
> 
> 标签：go, query-string

我正在使用`http`Go 中的包来处理 POST 请求。如何从`Request`对象访问和解析查询字符串的内容？我无法从官方文档中找到答案。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-03-14T12:03:54.180

[根据定义](http://en.wikipedia.org/wiki/Query_string)， QueryString位于 URL 中。您可以使用`req.URL`( [doc](http://golang.org/pkg/net/http/#Request) ) 访问请求的 URL。URL 对象有一个返回类型的`Query()`方法 ( [doc](http://golang.org/pkg/net/url/#URL.Query)`Values` )，该类型只是`map[string][]string`QueryString 参数中的一个。

如果您要查找的是[HTML 表单提交](http://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms)的 POST 数据，那么这（通常）是请求正文中的键值对。您的答案是正确的，您可以调用`ParseForm()`然后使用`req.Form`字段来获取键值对的映射，但您也可以调用`FormValue(key)`来获取特定键的值。如果需要，这会调用`ParseForm()`，并获取值，无论它们是如何发送的（即在查询字符串中或在请求正文中）。

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2015-03-24T16:09:08.693

下面是一个更具体的示例，说明如何访问 GET 参数。该`Request`对象有一个为您解析它们的方法，称为[Query](http://golang.org/pkg/net/url/#URL.Query)：

假设请求 URL 像[http://host:port/something?param1=b](http://host:port/something?param1=b)

```
func newHandler(w http.ResponseWriter, r *http.Request) {
  fmt.Println("GET params were:", r.URL.Query())

  // if only one expected
  param1 := r.URL.Query().Get("param1")
  if param1 != "" {
    // ... process it, will be the first (only) if multiple were given
    // note: if they pass in like ?param1=&param2= param1 will also be "" :|
  }

  // if multiples possible, or to process empty values like param1 in
  // ?param1=&param2=something
  param1s := r.URL.Query()["param1"]
  if len(param1s) > 0 {
    // ... process them ... or you could just iterate over them without a check
    // this way you can also tell if they passed in the parameter as the empty string
    // it will be an element of the array that is the empty string
  }    
} 
```

另请注意“值映射中的键[即 Query() 返回值] 区分大小写。”

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-01-09T07:37:39.730

下面是一个例子：

```
value := r.FormValue("field") 
```

了解更多信息。关于 http 包，你可以[在这里](http://golang.org/pkg/net/http/)访问它的文档。 `FormValue`基本上按照它找到的第一个顺序返回 POST 或 PUT 值或 GET 值。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-11-13T17:11:15.027

有两种获取查询参数的方法：

1.  使用 reqeust.URL.Query()
2.  使用 request.Form

在第二种情况下，必须小心，因为正文参数将优先于查询参数。关于获取查询参数的完整描述可以在这里找到

[https://golangbyexample.com/net-http-package-get-query-params-golang](https://golangbyexample.com/net-http-package-get-query-params-golang)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-06-22T02:16:59.450

这是一个简单的工作示例：

```
package main

import (
    "io"
    "net/http"
)
func queryParamDisplayHandler(res http.ResponseWriter, req *http.Request) {
    io.WriteString(res, "name: "+req.FormValue("name"))
    io.WriteString(res, "\nphone: "+req.FormValue("phone"))
}

func main() {
    http.HandleFunc("/example", func(res http.ResponseWriter, req *http.Request) {
        queryParamDisplayHandler(res, req)
    })
    println("Enter this in your browser:  http://localhost:8080/example?name=jenny&phone=867-5309")
    http.ListenAndServe(":8080", nil)
} 
```

[![在此处输入图像描述](../Images/a6e4a28659d4204221b6825922a10449.png)](https://i.stack.imgur.com/o1PCh.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-06-05T02:13:32.493

以下文字来自官方文档。

> 表单包含解析后的表单数据，包括**URL 字段的查询参数**和**POST 或 PUT 表单数据**。该字段仅在调用 ParseForm 后可用。

因此，下面的示例代码将起作用。

```
func parseRequest(req *http.Request) error {
    var err error

    if err = req.ParseForm(); err != nil {
        log.Error("Error parsing form: %s", err)
        return err
    }

    _ = req.Form.Get("xxx")

    return nil
} 
```

# jquery - Bootstrap 响应式全宽和移动导航

> ID：15407720
> 
> 赞同：0
> 
> 时间：2013-03-14T11:17:02.020
> 
> 标签：jquery, css, twitter-bootstrap

调整浏览器大小时如何扩展背景全角。我每边都有 10px 的空白。

你可以[在这里测试](http://www.posterlikes.com/page/)

移动导航也不是很好看。为什么搞砸了？

它不居中，位于切换按钮的顶部。

# memory - TLB 物理寻址对我来说没有意义

> ID：15407722
> 
> 赞同：0
> 
> 时间：2013-03-14T11:17:07.843
> 
> 标签：memory, cpu, cpu-architecture, tlb, cpu-cache

我正在以一种简单的方式阅读 TLB 是如何工作的，但我不明白：

> TLB 引用其表中的物理内存地址。它可能位于 CPU 和 CPU 缓存之间、CPU 缓存和主存储内存之间，或者位于多级缓存的各个级别之间。位置决定了缓存是使用物理寻址还是虚拟寻址。如果高速缓存被虚拟寻址，请求会直接从 CPU 发送到高速缓存，并且仅在高速缓存未命中时访问 TLB。如果缓存是物理寻址的，CPU 会对每个内存操作进行 TLB 查找，并将得到的物理地址发送到缓存。

摘要：当 TLB 位于 CPU 和 CPU 缓存之间时，它使用物理寻址，CPU 对每个内存操作进行 TLB 查找，然后将生成的物理地址发送到缓存。

我的问题：既然 CPU 处理虚拟地址，那么这个查询是如何执行的？

我不明白：CPU遇到一个虚拟地址-> CPU联系TLB，它是用物理地址寻址的-> ?? -> TLB 吐出另一个物理地址

TLB：

```
| Physical Address | Another Physical Address | 
```

这对我来说完全没有意义

取自[维基百科](http://en.wikipedia.org/wiki/Translation_lookaside_buffer#Overview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T07:19:21.237

它在哪里说 TLB 是物理寻址的？
TLB当然是从虚拟到物理的，当缓存被物理寻址时，你会得到这个流程：内存单元在虚拟地址空间中运行（除了pagewalks和TLB维护）--> TLB翻译V->P-->缓存查找是使用物理地址完成的。

TLB：

```
| virt Address | Physical Address | 
```

缓存：

```
| Physical Address |        Data           | 
```

上面的部分只是说如果缓存是在这里物理寻址的，您需要在*每次*访问时进行 TLB 查找（甚至在您知道是否命中/未命中之前），而如果缓存是虚拟寻址的，您可以在翻译之前查找缓存，并且仅在您错过并需要转到内存/较低（物理寻址）缓存时才转到 TLB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:23:35.417

根据我的说法，当缓存未命中时，CPU 将始终查找 TLB ... CPU 不会自己知道该地址是虚拟地址还是物理地址。因此 CPU ---> CPU 缓存 --->（如果缓存未命中）TLB--->（如果 TLB 未命中）--->辅助存储器

在获取页面时.. TLB 条目，CPU 缓存将使用这个最近的条目更新..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T10:05:21.640

TLB 从 CPU 获取虚拟地址。该地址的位可以分为虚拟页号和虚拟页偏移量。

虚拟页面偏移量对应于物理页面偏移量。虚拟页码分为标签和索引。基于标签和索引，TLB 在它自己的缓存中检查它是什么物理页号，并假设它已经在 TLB 缓存中并标记为有效，它以物理页号作为缓存标签返回给缓存，并且物理页偏移量分为缓存索引和缓存偏移量。然后用于检查是否已经在该缓存中（如果没有，则从磁盘加载）并最终返回值。

我希望这是正确的并回答了您的问题，我目前也在学习 TLB 的主题，所以请**不要将此答案视为完全正确**。但是，它应该为您提供一个很好的概述。

# iphone - COCOS2D中的ccc4颜色列表

> ID：15407724
> 
> 赞同：1
> 
> 时间：2013-03-14T11:17:11.893
> 
> 标签：iphone, ios, cocos2d-x

我正在寻找一个工具或列表来显示与下面的示例不同的颜色。

```
fillColor = ccc4(255, 0, 0,255); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:26:10.560

这是它的在线工具

1.  [**ARGB 转换器**](http://www.netgfx.com/RGBaZR/)
2.  [**颜色列表**](http://www.javascripter.net/faq/rgbtohex.htm)

**更新**

如果你通过文档`ccc4(255, 0, 0,255);`代表 [**`ccc4(red,green,blue,opacity);`**](http://www.cocos2d-iphone.org/api-ref/latest-stable/cc_types_8h.html#a664b22586e2357db8ed50dc6230cbcb2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:33:52.263

试试这个 XCode 插件，它可以让你预览 UIColor 实例。 [https://github.com/omz/ColorSense-for-Xcode](https://github.com/omz/ColorSense-for-Xcode)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:26:22.560

值是：红色、绿色、蓝色和 alpha（透明度） - 按此顺序。每个值的范围从 0（暗）到 255（全亮）。忽略 alpha/transparency，它不会直接影响颜色。

您几乎可以使用任何将 RGB 值显示为字节 (0-255) 或十六进制代码 (0x00 到 0xFF) 的图像查看或编辑程序来找出哪些值会产生哪种颜色，反之亦然。

网上也有很多 RGB 颜色图表。这是一个[常用颜色的示例](http://www.tayloredmktg.com/rgb/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:30:49.630

```
fillColor = ccc4(Red,Green,Blue,alpha); 
```

[使用检查链接](http://www.workwithcolor.com/hsl-color-picker-01.htm)查找该值

# r - 基于异常计数的子集数据帧

> ID：15407727
> 
> 赞同：5
> 
> 时间：2013-03-14T11:17:41.617
> 
> 标签：r, subset

我有一个如下所示的数据框：

```
df <- data.frame(Site=rep(paste0('site', 1:5), 50),
           Month=sample(1:12, 50, replace=T),
           Count=(sample(1:1000, 50, replace=T))) 
```

我想删除所有站点的计数始终小于每月最大计数的 5% 的所有站点。

所有站点的最大每月计数为：

```
library(plyr)
ddply(df, .(Month), summarise, Max.Count=max(Count)) 
```

如果将计数 1 分配给站点 5，则其计数始终小于所有站点每月最大计数的 5%。因此，我希望删除 site5。

```
df$Count[df$Site=='site5'] <- 1 
```

但是，在为 site2 分配新值后，它的一些计数小于最大每月计数的 5%，而另一些则 >5%。因此我不希望 site2 被删除。

```
df$Count[df$Site=='site2'] <- ceiling(seq(1, 1000, length.out=20)) 
```

如何对数据框进行子集化以删除计数始终<最大每月计数的 5% 的任何站点？如果问题不清楚，请告诉我，我会修改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:22:29.183

一个`data.table`解决方案：

```
require(data.table)
set.seed(45)
df <- data.frame(Site=rep(paste0('site', 1:5), 50),
       Month=sample(1:12, 50, replace=T),
       Count=(sample(1:1000, 50, replace=T)))
df$Count[df$Site=='site5'] <- 1

dt <- data.table(df, key=c("Month", "Site"))
# set max.count per site+month
dt[, max.count := max(Count), by = list(Month)]
# get the site that is TRUE for all months it is present
d1 <- dt[, list(check = all(Count < .05 * max.count)), by = list(Month, Site)]
sites <- as.character(d1[, all(check == TRUE), by=Site][V1 == TRUE, Site])

dt.out <- dt[Site != sites][, max.count := NULL]
#       Site Month Count
#   1: site1     1   939
#   2: site1     1   939
#   3: site1     1   939
#   4: site1     1   939
#   5: site1     1   939
#  ---                  
# 196: site2    12   969
# 197: site2    12   684
# 198: site2    12   613
# 199: site2    12   969
# 200: site2    12   684 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:36:15.057

这是一个`plyr`解决方案：

```
## df2$test is true if Count >= max(Count)*0.05 for this month
df2 <- ddply(df, .(Month), transform, test=Count>=(max(Count)*0.05))
## For each site, test$keep is true if at least one count is >= max(Count)*0.05 for this month
test <- ddply(df2, .(Site), summarise, keep=sum(test)>0)
## Subsetting
sites <- test$Site[test$keep]
df[df$Site %in% sites,] 
```

# ruby-on-rails - 如何合并 2 个对象

> ID：15407728
> 
> 赞同：0
> 
> 时间：2013-03-14T11:17:45.440
> 
> 标签：ruby-on-rails, ruby

红宝石 1.8.7

```
@post = Post.find(1) + Post.find(2) 
```

Post 的未定义方法“+”

```
@post = Post.find(1).merge(Post.find(2)) 
```

Post的未定义方法合并

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:24:19.420

将 ID 传递`find`给单个调用，例如

```
@posts = Post.find([1, 2]) 
```

请注意，如果没有 ID=1 或 ID=2 的帖子，这将引发错误。如果您不这样做，请使用`where`或`find_all_by_id`

```
@posts = Post.where(id: [1, 2])
@posts = Post.find_all_by_id([1, 2]) 
```

两者之间的主要区别在于，您可以将其他查询链接起来，`where`而`find_all_by_id`已经返回一个数组，因此您不能链接查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:22:34.820

您只需附加 ID 即可找到项目数组。所以在你的情况下

`@posts = Post.find(1,2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:26:33.987

还：

```
@posts = []
@posts << Post.find(1)
@posts << Post.find(2) 
```

并继续添加：

```
@posts << Post.find_all_by_id([5, 6]) 
```

甚至：

```
@posts << Post.all 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:34:24.680

你可以简单地做：

```
@posts = Post.find(1,2) 
```

另外，我从评论中读到，你想合并`@posts`和`Post.all`，这两个都是数组，所以你可以简单地使用`+`来添加它们。

除了那个答案，我认为你不需要`@posts`像你正在做的那样做`Post.all`。

作为`@posts`一个数组，您可以简单地合并两个数组：

```
@posts + Post.all 
```

或者你可以这样做：

```
@post | Post.all 
```

# push-notification - Worklight 推送通知和 SecurityTest

> ID：15407731
> 
> 赞同：2
> 
> 时间：2013-03-14T11:18:03.003
> 
> 标签：push-notification, adapter, ibm-mobilefirst, security-testing

我在我的 iOS 和 Android 项目中使用 Worklight。我也在使用适配器，进行安全测试，并使用**基于适配器的身份验证**。

我想使用**推送通知**，从基于适配器的身份验证功能收到用户 ID。所以我使用相同的**securityTest**。

现在，当我尝试将我的安全测试与推送事件源一起使用时，出现错误“*无法从数据库部署适配器*”

```
WL.Server.createEventSource({
    name : 'MyPushEventSource',
    onDeviceSubscribe : 'deviceSubscribeFunc',
    onDeviceUnsubscribe : 'deviceUnsubscribeFunc',
    securityTest : 'MySecurityTest',
}); 
```

当我删除最后一行（securityTest）时，适配器被部署，当我添加它时，它失败了。

此 securityTest 已与多个其他适配器功能一起使用。

任何人都可以解释我怎么了？提前致谢。

编辑：这是我的安全测试定义：

```
<securityTests>
      <customSecurityTest name="MySecurityTest">
        <test isInternalUserID="true" realm="MyAuthRealm"/>
      </customSecurityTest>
</securityTests> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:56:55.850

最后，对我有用的解决方案是添加一个新的安全测试，具有相同的领域，并且类型为 mobileSecurityTest

```
 <mobileSecurityTest name="MyPushSecurityTest">
        <testUser realm="MyAuthRealm"/>
        <testDeviceId provisioningType="none"/>
    </mobileSecurityTest> 
```

我认为这应该添加到当前的 Worklight 文档中，或者必须打开一个错误报告。

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:07:10.327

似乎在“server/conf/authenticationConfig.xml”中没有定义“MySecurityTest”，请确保您在那里添加了一个具有此名称的测试：

```
<securityTests>
    <customSecurityTest name="MySecurityTest">
        <test realm="..." isInternalUserID="..."/>
    </customSecurityTest>
</securityTests> 
```

# highcharts - 实时图形间隔窗口

> ID：15407737
> 
> 赞同：0
> 
> 时间：2013-03-14T11:18:17.163
> 
> 标签：highcharts

我有一个实时线图，随着时间的流逝，新数据点添加到系列中。我想将其限制为一小时窗口并将绘图向左移动。在任何时候绘图都应显示一小时的数据点和导航器句柄最大间隔也应该是一小时。如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:00:32.007

HopeFully 我已经正确理解了您的问题

对于示例，我仅在 10 秒内创建了新条目，您只需在 setTimeout 函数中将其替换为适当的所需值

并将导航器向左移动只需将其添加到您的代码中

```
 xAxis: {min:0, max:3600000} 
```

检查这个小提琴[**FIDDLE**](http://jsfiddle.net/NZwwb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:59:06.507

您可以使用`afterSetExtremes`([链接](http://api.highcharts.com/highcharts#xAxis.events.afterSetExtremes)) 更改适合您需要的极端值。所以只需检查间隔（比较`this.min`和`this.max`），然后设置适当的极值（如果间隔太大或太小）。

# java - 在 lift 应用程序中将 scala 版本更新为 2.10.0

> ID：15407739
> 
> 赞同：4
> 
> 时间：2013-03-14T11:18:19.977
> 
> 标签：java, scala, lift

我正在使用从 github.com 下载的示例 Lift 框架。Scala 2.9.1 是其中的版本。我在 cmd 中使用 Container:start 命令来启动服务器，我可以在 localhost:8080 中看到该应用程序。但我已经在 Eclipse 中安装了 scala 2.10.0。如果我将项目与 Eclipse IDE 集成，则 localhost:8080 会显示一些错误。问题是什么？

我有`build.sbt`：

```
name := "Lift 2.5 starter template"

version := "0.0.1"

organization := "net.liftweb"

scalaVersion := "2.9.1"

resolvers ++= Seq("snapshots"     at      "http://oss.sonatype.org/content/repositories/snapshots",
            "releases"        at "http://oss.sonatype.org/content/repositories/releases"
            )

seq(com.github.siasia.WebPlugin.webSettings :_*)

unmanagedResourceDirectories in Test <+= (baseDirectory) { _ / "src/main/webapp" }

scalacOptions ++= Seq("-deprecation", "-unchecked")

libraryDependencies ++= {
  val liftVersion = "2.5-RC2"
  Seq(
    "net.liftweb"       %% "lift-webkit"        % liftVersion        % "compile",
    "net.liftweb"       %% "lift-mapper"        % liftVersion        % "compile",
    "net.liftmodules"   %% "lift-jquery-module" % (liftVersion + "-2.2"),
    "org.eclipse.jetty" % "jetty-webapp"        % "8.1.7.v20120910"  % "container,test",
    "org.eclipse.jetty.orbit" % "javax.servlet" % "3.0.0.v201112011016" % "container,test"  artifacts Artifact("javax.servlet", "jar", "jar"),
    "ch.qos.logback"    % "logback-classic"     % "1.0.6",
    "org.specs2"        %% "specs2"             % "1.12.1"           % "test",
    "com.h2database"    % "h2"                  % "1.3.167"
  )
} 
```

我已经在 projects/plugins.sbt 中与 Eclipse 集成

```
 addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:21:43.633

**要更新 Eclipse，您需要更新 ScalaIDE 插件以使用 2.10。** [http://download.scala-ide.org/sdk/e37/scala210/dev/site/](http://download.scala-ide.org/sdk/e37/scala210/dev/site/)

如果你的`build.sbt`or`plugin.sbt`包含一行说：

```
scalaVersion := "2.10.0" 
```

SBT 将找到该行，对其进行解释，并自动下载 2.10 Scala 编译器和 2.10 Scala 库以用于类型安全存储库。这可以在类型安全解析器中找到，它通常作为全局解析器添加到 中`~/.sbt/`，就像这样`resolvers += Classpaths.typesafeResolver`。

如果您将`scalaVersion := "2.10.0"`在构建定义中使用一行来编译项目（对于插件也是如此）并且您没有安装 Scala 2.10 或在您的路径中，那么 SBT 将自动从类型安全解析器下载它并将下载的文件放入 `~/.sbt/boot/scala-2.10.0/lib/`，您将在其中找到以下文件：

```
jansi.jar, jline.jar, scala-compiler.jar, scala-library.jar, scala-reflect.jar 
```

这是`build.sbt`最初使用 Scala 2.9.2 创建的 lift 2.5M3 应用程序的示例配置，升级到 2.10。

```
name := "secret"

version := "0.1-SNAPSHOT"

scalaVersion := "2.10.0"

seq(com.github.siasia.WebPlugin.webSettings :_*)

seq(jrebelSettings: _*)

jrebel.webLinks <++= webappResources in Compile

resolvers ++= Seq(
    "Sonatype OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots",
    "Sonatype releases" at "https://oss.sonatype.org/content/repositories/releases",
    "Scala 2.10 support for rogue" at "https://github.com/mattpap/rogue/"
)

libraryDependencies ++= {
    val liftVersion = "2.5-M4"
    Seq(
      "com.foursquare" %% "rogue-field" % "2.0.0-beta22",
      "com.foursquare" %% "rogue-core" % "2.0.0-beta22",
      "com.foursquare" %% "rogue-lift" % "2.0.0-beta22",
      "net.liftweb" %% "lift-webkit" % liftVersion % "compile",
      "net.liftweb"    %% "lift-mongodb-record" % "2.5-M4",
      "com.mongodb.casbah" % "casbah_2.9.0" % "2.2.0-SNAPSHOT",
      "org.specs2" %% "specs2" % "1.12.3" % "test"
     )
}

classpathTypes ~= (_ + "orbit")

libraryDependencies ++= Seq(
  "org.eclipse.jetty.orbit" % "javax.servlet" % "3.0.0.v201112011016" % "container" artifacts (Artifact("javax.servlet", "jar", "jar")
  )
)

libraryDependencies ++= Seq(
  "org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910" % "container" artifacts (Artifact("jetty-webapp", "jar", "jar")
  )
) 

port in container.Configuration := 5555

EclipseKeys.withSource := true 
```

**这是plugins.sbt文件，应该在PROJECTROOT/project/plugins.sbt**

```
libraryDependencies <+= sbtVersion(v => v match {
  case "0.11.0" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.0-0.2.8"
  case "0.11.1" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.1-0.2.10"
  case "0.11.2" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.2-0.2.11"
  case "0.11.3" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.3-0.2.11.1"
  case x if (x.startsWith("0.12")) =>
    "com.github.siasia" %% "xsbt-web-plugin" % "0.12.0-0.2.11.1"
})

resolvers += "Jawsy.fi M2 releases" at "http://oss.jawsy.fi/maven2/releases"

addSbtPlugin("fi.jawsy.sbtplugins" %% "sbt-jrebel-plugin" % "0.9.0") 
```

**这是全局插件文件，它应该在 ~/.sbt/plugins/plugins.sbt**如果你把东西放在这里，它将被加载到你所有的 SBT 项目中，系统范围内。当然，这仅代表您的机器。

```
resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0")

resolvers += "jgit-repo" at "http://download.eclipse.org/jgit/maven"

addSbtPlugin("com.typesafe.sbt" % "sbt-git" % "0.5.0")

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0")

resolvers += "Jawsy.fi M2 releases" at "http://oss.jawsy.fi/maven2/releases"

addSbtPlugin("fi.jawsy.sbtplugins" %% "sbt-jrebel-plugin" % "0.9.0") 
```

# android - 没有布局 xml 的可扩展列表视图

> ID：15407740
> 
> 赞同：0
> 
> 时间：2013-03-14T11:18:22.180
> 
> 标签：android, expandablelistview

我正在创建一个`ExpandableListView`，但 XML 文件没有任何布局。如果我放置任何布局，应用程序将关闭。我需要将标题栏保留在页面顶部，所以请帮我在这个 XML 中放置布局 -

```
<CheckedTextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_marginLeft="5dp"
    android:background="#08FC19"
    android:gravity="center_vertical"
    android:text="@string/hello_world"
    android:padding="10dp"
    android:textSelectHandleLeft="@string/hello_world"
    android:textSize="14sp"
    android:textStyle="bold" 
/> 
```

这就是[源头](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:27:54.637

试试这个代码。

**1\. MYACTIVITY.JAVA**

```
package com.example.expandable_2;
import android.app.Activity;
import android.app.ExpandableListActivity;
import android.content.Context;
import android.os.Bundle;
import android.widget.ExpandableListView;

import java.util.ArrayList;

public class MyActivity extends Activity {
    private ExpandableListView mExpandableList;

    Context context;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        context=this;

        mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);

        mExpandableList.setGroupIndicator(getResources().getDrawable(R.drawable.expandiconempty));

        ArrayList<Parent> arrayParents = new ArrayList<Parent>();
        ArrayList<String> arrayChildren = new ArrayList<String>();

        //here we set the parents and the children
        for (int i = 0; i < 2; i++){
            //for each "i" create a new Parent object to set the title and the children
            Parent parent = new Parent();
            parent.setTitle("Parent " + i);

            arrayChildren = new ArrayList<String>();
            for (int j = 0; j < 5; j++) {
                arrayChildren.add("Child " + j);
            }
            parent.setArrayChildren(arrayChildren);

            //in this array we add the Parent object. We will use the arrayParents at the setAdapter
            arrayParents.add(parent);
        }

        //sets the adapter that provides data to the list.
        mExpandableList.setAdapter(new MyCustomAdapter(MyActivity.this,arrayParents));
        mExpandableList.expandGroup(0);
        mExpandableList.expandGroup(1);

    }
} 
```

**2\. 我的客户适配器**

```
package com.example.expandable_2;
import android.content.Context;
import android.database.DataSetObserver;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.TextView;

import java.util.ArrayList;

/**
 * Created with IntelliJ IDEA.
 * User: zizi
 * Date: 8/10/12
 * Time: 12:05 PM
 * To change this template use File | Settings | File Templates.
 */
public class MyCustomAdapter extends BaseExpandableListAdapter {

    private LayoutInflater inflater;
    private ArrayList<Parent> mParent;

    public MyCustomAdapter(Context context, ArrayList<Parent> parent){
        mParent = parent;
        inflater = LayoutInflater.from(context);
    }

    @Override
    //counts the number of group/parent items so the list knows how many times calls getGroupView() method
    public int getGroupCount() {
        return mParent.size();
    }

    @Override
    //counts the number of children items so the list knows how many times calls getChildView() method
    public int getChildrenCount(int i) {
        return mParent.get(i).getArrayChildren().size();
    }

    @Override
    //gets the title of each parent/group
    public Object getGroup(int i) {
        return mParent.get(i).getTitle();
    }

    @Override
    //gets the name of each item
    public Object getChild(int i, int i1) {
        return mParent.get(i).getArrayChildren().get(i1);
    }

    @Override
    public long getGroupId(int i) {
        return i;
    }

    @Override
    public long getChildId(int i, int i1) {
        return i1;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    //in this method you must set the text to see the parent/group on the list
    public View getGroupView(int i, boolean b, View view, ViewGroup viewGroup) {

        if (view == null) {
            view = inflater.inflate(R.layout.parent, viewGroup,false);
        }

        TextView textView = (TextView) view.findViewById(R.id.list_item_text_view);
        //"i" is the position of the parent/group in the list
        textView.setText(getGroup(i).toString());

        //return the entire view
        return view;
    }

    @Override
    //in this method you must set the text to see the children on the list
    public View getChildView(int i, int i1, boolean b, View view, ViewGroup viewGroup) {
        if (view == null) {
            view = inflater.inflate(R.layout.child, viewGroup,false);
        }

        TextView textView = (TextView) view.findViewById(R.id.list_item_text_child);
        //"i" is the position of the parent/group in the list and 
        //"i1" is the position of the child
        textView.setText(mParent.get(i).getArrayChildren().get(i1));

        //return the entire view
        return view;
    }

    @Override
    public boolean isChildSelectable(int i, int i1) {
        return true;
    }

    @Override
    public void registerDataSetObserver(DataSetObserver observer) {
        /* used to make the notifyDataSetChanged() method work */
        super.registerDataSetObserver(observer);
    }
} 
```

**3.父.JAVA**

```
package com.example.expandable_2;
import java.util.ArrayList;

public class Parent {
    private String mTitle;
    private ArrayList<String> mArrayChildren;

    public String getTitle() {
        return mTitle;
    }

    public void setTitle(String mTitle) {
        this.mTitle = mTitle;
    }

    public ArrayList<String> getArrayChildren() {
        return mArrayChildren;
    }

    public void setArrayChildren(ArrayList<String> mArrayChildren) {
        this.mArrayChildren = mArrayChildren;
    }
} 
```

**设计文件**

**1.活动.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <ExpandableListView android:id="@+id/expandable_list"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:transcriptMode="alwaysScroll"
                        android:cacheColorHint="#00000000"

                        android:listSelector="@android:color/transparent"/>
</LinearLayout> 
```

**子.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/list_item_child"
        android:gravity="center_vertical">

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/list_item_text_child"
              android:textSize="20sp"
              android:padding="10dp"
              android:layout_marginLeft="5dp"/>

</LinearLayout> 
```

**父.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/list_item">

<TextView
android:layout_width="0dp"
android:layout_height="wrap_content"
android:id="@+id/list_item_text_view"
android:textSize="20sp"
android:padding="10dp"
android:layout_weight="1"
android:layout_marginLeft="35dp" />

<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="button"
android:focusable="false"
android:layout_gravity="right"
android:focusableInTouchMode="false"
android:id="@+id/button"/>

</LinearLayout> 
```

# javascript - AngularJS - 将自定义类指令应用于 ng-repeat 项目

> ID：15407742
> 
> 赞同：3
> 
> 时间：2013-03-14T11:18:24.577
> 
> 标签：javascript, angularjs

我正在尝试通过 AngularJS 动态设置 div 的宽度。

```
<ul id="contents">
  <li ng-repeat="content in contents">
    <div class="content_right custom_width">
      <div class="title">{{content.title}}</div>
    </div>
  </li>
</ul> 
```

使用以下指令

```
myApp.directive("custom_width", function() {
  return {
    restrict:"C",
    link: function(scope, element, attrs) {
      element.css("width", 400);
    }
  }
}); 
```

但什么都没有发生。我尝试在“link:function..”中输入“console.log”，但没有打印任何内容。我在这里想念什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:29:30.810

指令定义使用 camelCase：

```
myApp.directive("customWidth", function() {
  return {
    restrict:"C",
    link: function(scope, element, attrs) {
      element.css("width", 400);
    }
  }
}); 
```

[指令文档](http://docs.angularjs.org/guide/directive)

在 AngularJS 中，camel case ( `lowerCamelCase`) 用于定义指令和访问属性（从指令内），而蛇形大小写（`dash-case`- 无论你想怎么称呼它）用于引用 HTML 元素中的指令和/或属性。

# c++ - 为什么是“cerr << s;” 将不同的字符串输出到 s，而控制台的输出添加“1*1*0*1*1*1*1*0*0*1*0*1*1*1*1*0*”向导字符？

> ID：15407744
> 
> 赞同：1
> 
> 时间：2013-03-14T11:18:30.907
> 
> 标签：c++, string, io, console

我已经调试了程序并看到`s == "101111000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000101111000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"`
了但是在控制台中，它的输出`"1*1*0*1*1*1*1*0*0*1*0*1*1*1*1*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*101111000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000101111000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"`
只是添加了代码的向导字符`"1*1*0*1*1*1*1*0*0*1*0*1*1*1*1*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*0*"`
来产生输出：

```
UINT8 sMessage[4096];
memset(sMessage, 0, 4096);

Num_Thread = 0;
OutputNum_Thread = 0;

EncodeInitiatedTestCommandActionSet(&InitiatedTestCommandACTION, sMessage);//fill sMessage with "0101...0101..."

string s = (char*)sMessage;

cerr << s << "\n"; 
```

（使用 QT）

# javascript - 使用 Sizzle 和 JS 将 div 放入数组

> ID：15407746
> 
> 赞同：2
> 
> 时间：2013-03-14T11:18:34.340
> 
> 标签：javascript, arrays, sizzle

```
<div class="item">
   <div id="itemid">001</div>
   <div id="itemname">name 1</div>
</div>

<div class="item">
   <div id="itemid">002</div>
   <div id="itemname">name 2</div>
</div> 
```

我正在使用 Sizzle Library 将这些数据从页面中取出。有 (n) 个可能的项目。

```
myVar = Sizzle('.item'); 
```

有没有办法将这些数据放入数组中

```
[0] itemid => 001
    itemname=> name 1

[1] itemid => 002
    itemname => name 2 
```

我需要将每个项目放入一个数组中，而不使用 jQuery。而且我确实知道每个项目中 DIV 的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:41:49.603

使用 Sizzle 库作为依赖项，以下将迭代所有`<div class="item">`父级，然后迭代每个父级的*所有*子级。

```
<script type='text/javascript' src='https://raw.github.com/jquery/sizzle/master/sizzle.js'></script>
<script type='text/javascript'>
    var itemDivs = Sizzle('.item')
    var items = []
    for (var i = 0; i < itemDivs.length; i++) {
        var children = Sizzle('div', itemDivs[i])
        var item = {}
        for (var j = 0; j < children.length; j++) {
            item[children[j].id] = children[j].innerText || children[j].textContent
        }
        items.push(item)
    }

    console.log(items)
</script> 
```

如果您`HTML`有其他元素，则需要修改上述代码以仅查找数组所需的特定子项。测试的 HTML 是：

```
<div class="item">
   <div id="itemid">001</div>
   <div id="itemname">name 1</div>
</div>

<div class="item">
   <div id="itemid">002</div>
   <div id="itemname">name 2</div>
</div> 
```

我在 Chrome DevTools 控制台中得到的输出是

```
[Object, Object]
0: Object
    itemid: "001"
    itemname: "name 1"
    __proto__: Object
1: Object
    itemid: "002"
    itemname: "name 2"
    __proto__: Object
    length: 2
    __proto__: Array[0] 
```

# javascript - 正则表达式从属性中查找图像 src/path

> ID：15407747
> 
> 赞同：0
> 
> 时间：2013-03-14T11:18:36.217
> 
> 标签：javascript, jquery, regex, find

如果我的 html 是

```
<div style="background-image: url(http://domain.com/randompath/random4509324041123213.jpg);"></div> 
```

我得到了风格属性，比如..

```
var img_src = $('div').css('background-image'); 
```

所以输出是

```
url("http://domain.com/randompath/random4509324041123213.jpg") 
```

任何正则表达式或一些基本的东西来找到图像 src/path 100% ？像

```
http://domain.com/randompath/random4509324041123213.jpg 
```

100% 我的意思是跨浏览器，它应该 100% 工作

我不确定`var img_src = $('div').css('background-image');`在所有浏览器中都有这样的模式的输出，如果“是”，那么我可以执行`.replace()`功能

游乐场：http: [//jsbin.com/apalat/1/edit](http://jsbin.com/apalat/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:23:21.260

试试这个：

```
$("code").html(img_src.slice(5, -2)); 
```

### [结帐小提琴](http://jsfiddle.net/S4GPz/)

## 更新：

`For 'chrome'`因为chrome不加`'"' quotes:`

```
var img_src = $('div').css('background-image');

$("code").html(img_src.slice(5, -2));

if (navigator.userAgent.toLowerCase().indexOf('chrome') >= 0) {
   $("code").html(img_src.slice(4, -1));
} 
```

### [更新的小提琴](http://jsfiddle.net/S4GPz/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:26:10.153

不需要正则表达式，只需剪断字符串...

[http://jsfiddle.net/BHcsQ/2/](http://jsfiddle.net/BHcsQ/2/)

```
var s = 'url("http://domain.com/randompath/random4509324041123213.jpg")';
var s_sub = s.substring(5, s.length-2);

alert(s_sub); 
```

# java - 根据 AsyncTask.execute() 在同一代码块中的运行方式显示 AlertDialog

> ID：15407751
> 
> 赞同：0
> 
> 时间：2013-03-14T11:18:50.603
> 
> 标签：java, android, multithreading

我正在编写一个执行 Http 请求的函数（在 HttpPost、HttpClient 和 AsyncTask 的帮助下）并显示 AlertDialog if `HttpClient.execute()`（在其中运行`AsyncTask.doInBackground()`）需要太多时间。

`AsyncTask.execute()`问题是我应该在被调用后等待一段时间，然后再显示消息。但是，如果我使用`AsyncTask.get()`来阻止我的功能完成，则在 AsyncTask 完成之前，UI 中的任何内容都无法更改。这是代码示例：

```
{
    HttpClient mHttpClient;
    HttpPost mHttpPostAuth;

    public Boolean openConnection()
    {
        //Checking if HttpClient.execute() is finished within 300 milliseconds
        //howing the message if not
        mScheduledThreadPoolExecutor.schedule(new Runnable(){
            public void run(){
                context.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        if(!mResponseReceived){
                            try{
                                mWaitingForResposeAlert = mWaitingForResposeBuilder.show();
                            }
                        }
                    }
                });
            }
        }, 300, TimeUnit.MILLISECONDS);

        try{
            new AsyncTask<Void, Void, HttpResponse>(){
                @Override
                protected HttpResponse doInBackground(Void... params){
                    try {                       
                        mResponseReceived = false;
                        HttpResponse response = mHttpClient.execute(mHttpPostAuth);
                        mResponseReceived = true;
                        return response;
                    }
                    catch (Exception e){
                    }

                    mResponseReceived = true;
                    return null;
                }

                protected void onPostExecute(HttpResponse response){
                    try{
                        if (response == null) return;
                        switch (response.getStatusLine().getStatusCode()){
                            case HttpStatus.SC_OK:{
                                //Reading the response
                                break;
                            }
                            default:{
                                break;
                            }
                        }
                    }
                    catch(Exception e){
                    }
                }
            }.execute().get();

        if(mWaitingForResposeAlert != null) mWaitingForResposeAlert.dismiss();

        return !(sid==null);
    }
} 
```

有什么方法可以根据在`AsyncTask.execute()`同一代码块中的运行方式显示 AlertDialog 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:33:00.540

> 有什么方法可以根据 AsyncTask.execute() 在同一代码块中的运行方式显示 AlertDialog 吗？

您可以显示 AlertDialog / ProgressDialog

*   在`onPreExecute()`AsyncTask 开始工作之前调用的方法中
*   或者调用方法它会自动调用方法，`publicProgress()`在这个方法中你还可以显示 AlertDialog / ProgressDialog`doInBackground()``onProgressUpdate()`

**例子：**

```
@Override
protected HttpResponse doInBackground(Void... unused) {
   ...
   publishProgress(); // it invokes onProgressUpdate() method
   ...
}

@Override
protected void onProgressUpdate(Void... unused) {
   // here show Dialog
} 
```

# javascript - angularjs中指令的动态模板

> ID：15407753
> 
> 赞同：4
> 
> 时间：2013-03-14T11:19:02.010
> 
> 标签：javascript, angularjs, directive

我需要根据日期决定模板。我看到了一个很好的[例子](http://onehungrymind.com/angularjs-dynamic-templates/)。但在那个例子中，模板非常简单，他可以使用字符串。就我而言，我想使用 php 来生成模板，所以我这样使用它：

```
eng.directive('vis', function ($compile) {
var getTemplate = function(ir) {
    var k = (ir.visits.last && parseInt(ir.visits.last.done))?'V':'E';
    var s = (ir.data.kind == 0)?'H':'V';
    return s+k+'T';
}

var linker = function(scope, element, attrs) {
    scope.$watch('ir',function(){
        if (!scope.ir) return;
        element.html(jQuery('#'+getTemplate(scope.ir)).html()).show();
        $compile(element.contents())(scope);
    })
}
return {
    restrict: "E",
    rep1ace: true,
    link: linker
};}); 
```

模板是：

```
<div id=HVT style="display:none">
    <p>horizontal view template</p>
</div>
<div id=HET style="display:none">
    <p>horizontal {{1+5}} Edit template</p>
</div>
<div id=VVT style="display:none">
    <p>vertical view template</p>
</div>
<div id=VET style="display:none">
    <p>vertical Edit template</p>
</div> 
```

我相信有更聪明的方法。使用 templateUrl 更好吗？有人可以告诉我如何在我的情况下使用它吗？

编辑：有问题。模板看不到范围

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-15T07:22:51.400

这也可以在 AngularJS 中创建动态模板：在你的指令中使用：

```
template : '<div ng-include="getTemplateUrl()"></div>' 
```

现在您的控制器可以决定使用哪个模板：

```
$scope.getTemplateUrl = function() {
  return '/template/angular/search';
}; 
```

因为您可以访问范围参数，所以您还可以执行以下操作：

```
$scope.getTemplateUrl = function() {
  return '/template/angular/search/' + $scope.query;
}; 
```

所以你的服务器可以为你创建一个动态模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:16:44.087

我在[这里找到解决方案](https://stackoverflow.com/questions/14862315/angularjs-directive-template-dynamic)

在这个例子中[http://jsbin.com/ebuhuv/7/edit](http://jsbin.com/ebuhuv/7/edit)

找到这段代码：

```
app.directive("pageComponent", function($compile) {
    var template_for = function(type) {
        return type+"\\.html";
    };
    return {
        restrict: "E",
        // transclude: true,
        scope: true,
        compile: function(element, attrs) {
            return function(scope, element, attrs) {
                var tmpl = template_for(scope.component.type);
                element.html($("#"+tmpl).html()).show();
                $compile(element.contents())(scope);
            };
        }
    };}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:16:47.177

使用 Angular，您不需要使用`id`s。此外，`display:none`您可以使用`ng-show`：

```
<div ng-show="HVT">
    <p>horizontal view template</p>
</div>
<div ng-show="HET">
    <p>horizontal {{1+5}} Edit template</p>
</div>
... 
```

您的 $watch 回调（您可以在控制器或指令中定义）然后可以简单地修改适当的范围属性：

```
var getTemplate = function (ir) {
    var k = (ir.visits.last && parseInt(ir.visits.last.done)) ? 'V' : 'E';
    var s = (ir.data.kind == 0) ? 'H' : 'V';
    return s + k + 'T';
}
$scope.$watch('ir', function () {
    if (!$scope.ir) return;
    // hide all, then show the one we want
    $scope.HVT = false;
    $scope.HET = false;
    $scope.VVT = false;
    $scope.VET = false;
    $scope[getTemplate($scope.ir)] = true;
}) 
```

[小提琴](http://jsfiddle.net/mrajcok/DmZeV/)。小提琴在控制器中有上述代码，因为我不知道您可能在哪里使用该指令。小提琴也只是硬编码“VET”，因为我不知道是什么`ir`样子。

# css - 960 网格系统的基本 CSS 布局问题

> ID：15407755
> 
> 赞同：0
> 
> 时间：2013-03-14T11:19:06.517
> 
> 标签：css, 960.gs

在检查萤火虫中的元素`<div id="wrapper">`后，它似乎不包含嵌套在其中的所有内容，实际上非常小。

另一个问题是`<div id="footer">`在萤火虫中检查时位于页面顶部，我不确定为什么。

任何帮助将非常感激。下面有一个链接。

[http://www.the-session.co.uk/pros/](http://www.the-session.co.uk/pros/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:20:51.920

**定义你的身体** `min-width:980px;` **并清除你的** `.container_12` `overflow:hidden;`

**像这样**

```
 body{
    min-width:980px;
    }
.container_12{
    overflow:hidden;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:26:47.497

尝试清除包装器中的浮动：

```
#wrapper {
    overflow: hidden;
} 
```

# java - 在 Java 中获取屏幕大小

> ID：15407756
> 
> 赞同：9
> 
> 时间：2013-03-14T11:19:11.583
> 
> 标签：java, swing, awt, screen

如何在 Java 中获取屏幕大小？

不是屏幕分辨率、屏幕/显示器尺寸（英寸）和纵横比。开发的应用程序必须显示某种大小必须相同的测试，无论屏幕大小和纵横比如何。假设我们想要显示一个 2 厘米宽和 2 厘米高的矩形，并且我们希望它对于每种可能的显示适配器类型都具有相同的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:42:50.673

我认为答案是纯 Java 无法实现，甚至可能根本无法实现。

`Toolkit`您可以通过默认对象获取以像素为单位的可显示屏幕尺寸和 Java 中的标称缩放 (dpi) 。然而，这些通常是不准确的......这会导致非正方形的正方形。

您也许可以通过本机代码获得更准确的值，但这肯定是不可移植的。这个 Q/A 说这是不可能的 -[如何获得屏幕的物理尺寸（即英寸）？](https://stackoverflow.com/questions/11263747/how-to-get-screens-physical-size-i-e-in-inches)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:19:58.803

# powershell - 格式表返回空白列

> ID：15407759
> 
> 赞同：0
> 
> 时间：2013-03-14T11:19:20.100
> 
> 标签：powershell, cmdlets

我无法仅显示`Time`命令的列。

```
Get-EventLog -log Security | where {$_.EventID -eq 4800 -or $_.EventID -eq 4801} 
```

返回：

```
 Index Time          EntryType   Source                 InstanceID Message                                                                                                                  
   ----- ----          ---------   ------                 ---------- -------                                                                                                                  
  167513 Mar 14 10:31  SuccessA... Microsoft-Windows...         4801 The workstation was unlocked....                                                                                         
  167506 Mar 14 10:14  SuccessA... Microsoft-Windows...         4800 The workstation was locked....                                                                                           
  167499 Mar 14 10:08  SuccessA... Microsoft-Windows...         4801 The workstation was unlocked.... 
```

但是，如果我*只想*查看该`Time`列，我什么也得不到：

> Get-EventLog -日志安全 | 其中 {$ *.EventID -eq 4800 -或 $* .EventID -eq 4801} | 格式表时间

```
Time                                                                                                                                                                                          
---- 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:28:17.527

它是空白的，因为没有`Time`属性这样的东西。它是默认视图中使用的别名`Get-EventLog`。

```
PS > Get-EventLog -LogName System | gm

   TypeName: System.Diagnostics.EventLogEntry#System/EventLog/2147489661

Name                      MemberType     Definition
----                      ----------     ----------  
....                                    
TimeGenerated             Property       datetime TimeGenerated {get;}
TimeWritten               Property       datetime TimeWritten {get;}
UserName                  Property       string UserName {get;}
EventID                   ScriptProperty System.Object EventID {get=$this.get_EventID() -band 0x... 
```

用于`Format-Table TimeGenerated`获取事件发生`TimeWritten`的时间，并获取将其保存到日志的时间。

`Time`默认视图中的列`TimeGenerated`格式为`{0:MMM} {0:dd} {0:HH}:{0:mm}`. 您可以在 Powershell 中的一种格式文件中看到这一点。对于这种情况，它位于 "C:\Windows\System32\WindowsPowerShell\v1.0\DotNetTypes.format.ps1xml" 中：

```
.....
<ViewSelectedBy>
    <TypeName>System.Diagnostics.EventLogEntry</TypeName>
</ViewSelectedBy>
.....
<TableColumnHeader>
    <Label>Time</Label>
    <Width>13</Width>
</TableColumnHeader>
.....
<TableColumnItem>
    <PropertyName>TimeGenerated</PropertyName>
    <FormatString>{0:MMM} {0:dd} {0:HH}:{0:mm}</FormatString>
</TableColumnItem>
..... 
```

# actionscript-3 - 在 AS3 中从 Flickr 提要加载图像

> ID：15407761
> 
> 赞同：0
> 
> 时间：2013-03-14T11:19:31.333
> 
> 标签：actionscript-3, flickr, flash-cs5.5

我正在使用 Adob​​e Flash CS5.5（使用 ActionScript 3.0），并且正在尝试插入 Flickr 提要。我希望 Flickr 图像显示在一种画廊中。到目前为止，这是我的代码，其结果是 TEXT 中的 Flickr 提要。如何让它显示实际图像？

```
import fl.controls.TextArea; 

var xmlLoader:URLLoader = new URLLoader(); 
var xmlData:XML = new XML(); 
var texten:TextArea = new TextArea(); 

xmlLoader.load(new URLRequest("http://api.flickr.com/services/feeds/photos_public.gne?tags=snow&format=rss_200"));
xmlLoader.addEventListener(Event.COMPLETE, LoadXML);
xmlLoader.addEventListener(IOErrorEvent.IO_ERROR,ioErrorHandler);

function LoadXML(e:Event):void {
    xmlData = new XML(e.target.data);
    trace(xmlData);
    texten.move(25,25);
    texten.setSize(500, 300); 
    addChild(texten);
    ParseXML(xmlData); 
}

function ParseXML(vaderInput:XML):void {
    var i:int = 0;  
    for each (var object:XML in vaderInput.channel.item) {
        texten.text += "" + object.title + "\r";
        texten.text += "" + object.description + "\r";
        texten.text += "\r";
        i++;
    } 
}

function ioErrorHandler(e:Event):void {
    trace('ERROR!');
    trace('Problems reading the XML-file!'); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:18:50.823

阅读 LiveDocs。您想使用 a[`Loader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)来加载`<media:thumbnail/>`XML 中的数据。Loader 类扩展了 DisplayObject，但包含许多相同的属性/方法`URLLoader`。

所以，基本上，你做这样的事情：

```
var l:Loader = new Loader();
l.contentLoaderInfo.addEventListener( Event.INIT, loaderInitHandler ); //the majority of events for Loader are attached to its contentLoaderInfo property. That is the only reason I included this line
l.load( new URLRequest( /*url goes here*/ );
this.addChild( l ); 
```

这会加载图像并*立即*将其添加到舞台上。一旦图像完全加载（据我所知，Flash 无法显示部分加载的图像），它将在舞台上可见。

从那里，您可以在很大程度上将加载器视为另一个 Sprite/MovieClip。

# select - 为什么 select count distinct 在 yii 中不起作用？

> ID：15407767
> 
> 赞同：4
> 
> 时间：2013-03-14T11:19:38.353
> 
> 标签：select, yii, distinct

有人可以告诉我为什么这不起作用，我的意思是 select distinct 不起作用，计数不正确；

```
$count_participants = BridgeMeeting::Model()->with('idUserRegistry')->count(array(
    'condition' => 'id_meeting=:id_meeting',
    'select' => 'id_user_registry',
    'distinct' => true,
    'params' => array(
        "id_meeting" => $data->id_meeting
    ),
        )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:13:09.530

```
$count_participants = BridgeMeeting::Model()->with('idUserRegistry')->count(array(
    'condition' => 'id_meeting=:id_meeting',
    'select' => 'id_user_registry',
    'distinct' => true,
    'params' => array(
        ":id_meeting" => $data->id_meeting
    ),
        )); 
```

参数名称也应该是`:id_meeting`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T06:42:05.040

深入研究 Yii 的代码，我发现可以指定任意列列表的唯一方法`count(distinct <columns>)`是为 CDbCriteria 提供“选择”，如下所示：

```
$ar->count(
'select' => 'count(distinct <columns>)',
'condition' => ...,
'params' => ...
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:24:44.893

`count` [api](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#count-detail)

> 公共字符串计数（混合 $condition=''，数组 $params=array ( )）

~~所以尝试将`params` ' 作为数组传递给第二个 count 方法的参数。~~

~~前任。~~

 ~~~~```
$count_participants = BridgeMeeting::Model()->with('idUserRegistry')->count(
    array(
        'condition' => 'id_meeting=:id_meeting',
        'select' => 'id_user_registry',
        'distinct' => true,
     ),
    array(
    "id_meeting" => $data->id_meeting
    )
 ); 
```~~  ~~**更新：** `count`结合在一起`->with`不能正常工作。必须报告一个错误。

解决方法是：

```
 BridgeMeeting::Model()->with('idUserRegistry')->count(
                     array(
                        'condition' => 'id_meeting=' . $data->id_meeting,
                        'select' => 'id_user_registry',
                        'distinct' => true,

                        )
                     ); 
```

并调试这个尝试给出常量而不是`$data->id_meeting`~~~~

# velocity - 速度模板语言动态变量

> ID：15407773
> 
> 赞同：1
> 
> 时间：2013-03-14T11:20:02.737
> 
> 标签：velocity, dynamic-variables, vtl

我阅读了所有[Velocity 用户指南](http://velocity.apache.org/engine/devel/user-guide.html)，但看不到如何访问动态变量。

场景：

```
#set ($u14 = "MARCOS SANCHEZ")
#set ($var = "u14") 
```

我如何才能`$u14`使用`$var`？

在 php 中：

`$$var (vm fail)`

预期结果：`MARCOS SANCHEZ`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:51:18.657

您可以使用数组或地图：

```
## initialize the map
#set($map = {})

## add an entry
$!map.put("u14", "MARCOS")

#set($var = "u14")

## retrieve the value
The value you are looking for is ${map.get($var)} 
```

类似的事情可以用[数组](https://stackoverflow.com/questions/6123691/create-and-iterate-through-an-array-in-velocity-template-language)来完成。[另请查看VLT 参考指南](http://velocity.apache.org/engine/devel/user-guide.html#set)的相关部分，其中解释了如何初始化映射或数组。初始化后，您可以从您的速度模板调用[java API](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)中描述的方法（get、put 等）。

# android - Android 方向更改和布局

> ID：15407774
> 
> 赞同：0
> 
> 时间：2013-03-14T11:20:03.097
> 
> 标签：android, tic-tac-toe

```
 @Override
 public Object onRetainNonConfigurationInstance(){
 final TicTacToeGame game = collectData();
    return game;
    }
        private TicTacToeGame collectData(){

            return mGame;
        }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mBoardButtons = new Button[TicTacToeGame.getBOARD_SIZE()];
    mBoardButtons[0] = (Button) findViewById(R.id.one);
    mBoardButtons[1] = (Button) findViewById(R.id.two);
    mBoardButtons[2] = (Button) findViewById(R.id.three);
    mBoardButtons[3] = (Button) findViewById(R.id.four);
    mBoardButtons[4] = (Button) findViewById(R.id.five);
    mBoardButtons[5] = (Button) findViewById(R.id.six);
    mBoardButtons[6] = (Button) findViewById(R.id.seven);
    mBoardButtons[7] = (Button) findViewById(R.id.eight);
    mBoardButtons[8] = (Button) findViewById(R.id.nine);

    mInfoTextView = (TextView) findViewById(R.id.information); 
    mHumanScoreTextView = (TextView) findViewById(R.id.player_score);
    mComputerScoreTextView = (TextView) findViewById(R.id.computer_score);
    mTieScoreTextView = (TextView) findViewById(R.id.tie_score);

    mGame = new TicTacToeGame();

    startNewGame();

    final TicTacToeGame game = (TicTacToeGame)getLastNonConfigurationInstance();

    if (game == null)
    {
        game = collectData();
    } 
```

}

当设备方向从纵向切换到横向时，`Layout`负载正常，但没有保存任何内容，并且分数被重置，这意味着所有数据都丢失了。该`game = collectData();`部分还要求我删除最终修饰符

```
final TicTacToeGame game = (TicTacToeGame)getLastNonConfigurationInstance(); 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:22:44.070

`onRetainNonConfigurationInstance`已弃用。请不要使用它。

如果您正在使用片段，那么您应该使用`setRetainInstance`

如果您使用的是活动，我更喜欢以下方法，

您应该`onSaveInstanceState`用于此目的。

```
@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   outState.putString("message", "This is my message to be saved when activity is restarted.");
}

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  if( savedInstanceState != null ) {
     savedInstanceState .getString("message") //restore data
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:23:32.047

当方向改变时，系统重新启动当前活动。您需要在适当的 android 方法中保存所需的任何变量。请参阅： [Android 数据存储](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:22:19.560

当设备配置更改时，活动将被销毁并重新创建。您必须保存您的数据。[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。如果您正在恢复活动娱乐的大型数据集，请查看标题 ***在配置更改期间保留对象***下的链接。

```
@Override
public Object onRetainNonConfigurationInstance() {
final MyDataObject gamedata = collectMyLoadedData();
return data;// returm game data object
} 

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final MyDataObject data = (MyDataObject) getLastNonConfigurationInstance();
if (data == null) {
   //supple your game data
   //load game data with the data object.
  }

} 
```

对于小数据集，您可以使用以下内容。（仅保留游戏得分数据）

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
super.onSaveInstanceState(savedInstanceState);
// Save UI state changes to the savedInstanceState.
// This bundle will be passed to onCreate if the process is
// killed and restarted.
savedInstanceState.putString("scores",scorevalue);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
 super.onRestoreInstanceState(savedInstanceState);
 // Restore UI state from the savedInstanceState.
 // This bundle has also been passed to onCreate.
 gameScore = savedInstanceState.getString("scores");
} 
```

# jquery - JQuery 在本地 IE 中不起作用，但在服务器上可以正常工作

> ID：15407775
> 
> 赞同：0
> 
> 时间：2013-03-14T11:20:04.483
> 
> 标签：jquery, internet-explorer

对，重写我的问题：

这是一段非常简单的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>IE Test</title>
    <!-- jquery -->
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("a").click(function(){
                $(this).hide();
            });
        });
    </script>
</head>
<body>
<a href="#">click</a>
</body> 
```

当我在 www.green-itea.com/test_place 上传到服务器时，一切正常：当您单击“单击”链接时，它会按照 jquery 的建议隐藏。

然而，

当我在 IE 的计算机上本地运行完全相同的文件进行测试时，没有错误，但是当我单击“单击”链接时，它并没有隐藏，这意味着 jQuery 根本不起作用。

另一件事：在本地，除 IE 外，其他浏览器都可以正常工作。我也在 Internet 设置选项中启用了脚本。

我不知道为什么会发生这种情况，任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:29:24.023

您是否在浏览器上关闭了 Javascript？有时，您可能在不知情的情况下打开了 IE 的一项烦人的安全功能。

来自：[http ://www.activatejavascript.org/en/instructions/ie](http://www.activatejavascript.org/en/instructions/ie)

PC 在工具下拉菜单中，选择 Internet 选项。接下来，选择安全选项卡。然后，选择地球（Internet）图标。然后选择自定义级别按钮。在列表底部附近找到脚本。在活动脚本下，选择启用，然后点击确定。对以下构象框回答“是”。点击确定关闭 Internet 选项窗口。最后，点击浏览器窗口上的刷新以享受 javascript。

# android-listview - ListView 中带有单选按钮的行，带有 arrayadapter

> ID：15407778
> 
> 赞同：1
> 
> 时间：2013-03-14T11:20:06.440
> 
> 标签：android-listview

我遇到以下问题，我尝试创建一个框架，您可以从该框架添加到包含由几个单选按钮组成的新视图单选组的按钮.. 问题在于我的代码，我发现了不需要的行为，例如：当我添加更多行，如果我检查 rabiobuttons 的第一行，我向下滚动然后向上滚动屏幕以查看我的第一行...我的单选按钮未选中（因此回收视图问题，而我强制备份数据在我的代码）当我检查一个单选按钮并通过我之前提到的按钮添加新行时，当时一些单选按钮被自动选中或打开。

这是我的代码，你能告诉我我的错误在哪里吗？

我的框架的一部分：

```
 final ViewGroup root = (ViewGroup) inflater.inflate(
            R.layout.slide_cavite, null);
    listview_cavite = (ListView) root.findViewById(R.id.listview_cavite);
    // Arbre.table_cavite.open();

    adaptor = new Adaptor_cavite_item(root.getContext(),
            R.layout.slide_item_cavite, Arbre.liste_cavite);
    listview_cavite.setAdapter(adaptor);
    ajouter_cavite = (Button) root.findViewById(R.id.ajouter_cavite);
    ajouter_cavite.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //Arbre.liste_cavite.add(new Donnees_cavite());
            adaptor.add(new Donnees_cavite(root.getContext()));
            adaptor.notifyDataSetChanged();
        }
    }); 
```

一行中表示的数据对象：

```
 public class Donnees_cavite {

        int rb_excrement_checked;

        public int get_rb_excrement_checked() {
        return rb_excrement_checked;
        }

        public void setFirstChecked(int firstChecked) {
        this.rb_excrement_checked = firstChecked;
        }

        public Donnees_cavite(Context context){
            this.rb_excrement_checked = -1;
        }

    } 
```

还有我的自定义数组适配器：

```
 public class Adaptor_cavite_item extends ArrayAdapter<Donnees_cavite> {

        int layoutResourceId;
        Holder holder;
        ArrayList<Donnees_cavite> liste;
        private LayoutInflater mInflater;

        ...

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            View row = convertView;

            if (row == null) {

                row = mInflater.inflate(R.layout.slide_item_cavite, null);

                holder = new Holder();

                holder.excrement = (RadioGroup) row.findViewById(R.id.slide_cavite_excrement);
                holder.excrement_1 = (RadioButton) row.findViewById(R.id.slide_cavite_excrement_rb1);
                holder.excrement_2 = (RadioButton) row.findViewById(R.id.slide_cavite_excrement_rb2);

                row.setTag(this.holder);

            }else{
                this.holder = (Holder) row.getTag();
            }

            holder.excrement.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(RadioGroup arg0, int arg1) {
                    // TODO Auto-generated method stub
                    switch (arg1) {
                    case R.id.slide_cavite_excrement_rb1:
                        liste.get(position).setFirstChecked(1);
                        break;

                    case R.id.slide_cavite_excrement_rb2:
                        liste.get(position).setFirstChecked(2);
                        break;
                    }
                }
            });

            if (liste.get(position).get_rb_excrement_checked() == 1){
                holder.excrement_1.setChecked(true);
                holder.excrement_2.setChecked(false);
            }else{
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(true);
            }

            return row;

        }

        static class Holder {
            RadioGroup excrement;
            RadioButton excrement_1,excrement_2; 

            }
        }

    }

            if (liste.get(position).get_rb_excrement_checked() == 1){
                holder.excrement_1.setChecked(true);
                holder.excrement_2.setChecked(false);
            }else if (liste.get(position).get_rb_excrement_checked() == 2){
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(true);
            }else{
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(false);
            } 
```

谢谢您的帮助！

编辑：最糟糕的是，如果我在我的数组适配器末尾替换这段代码：

```
if (liste.get(position).get_rb_excrement_checked() == 1){
                holder.excrement_1.setChecked(true);
                holder.excrement_2.setChecked(false);
            }else if (liste.get(position).get_rb_excrement_checked() == 2){
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(true);
            }else{
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(false);
} 
```

经过

```
if (liste.get(position).get_rb_excrement_checked() == 1){
                holder.excrement_1.setChecked(true);
                holder.excrement_2.setChecked(false);
            }else{
                holder.excrement_1.setChecked(false);
                holder.excrement_2.setChecked(true);
} 
```

不再有不必​​要的行为！一切正常..我已经不明白为什么原始代码会导致我的“错误”^ ^然后，好吧，这段代码有效..但它不适合我，因为我必须使用带有 3,4 ... radiobutton 的 radiogroup ^^

# azure - 为什么 Log4Net 不能在带有表存储的 Azure 上工作？

> ID：15407787
> 
> 赞同：2
> 
> 时间：2013-03-14T11:20:46.137
> 
> 标签：azure, log4net

拼命寻找一种解决方案，让 log4net 在 Azure Worker 角色中工作。慢慢让我发疯。

我已按照此博客[http://blog.tylerdoerksen.com/2012/04/17/logging-in-azure-part-2table-storage](http://blog.tylerdoerksen.com/2012/04/17/logging-in-azure-part-2table-storage)（谢谢）中概述的步骤进行操作，这似乎很有意义，并且 log4net 日志记录有效在以下情况下就像做梦一样：

1.  在模拟器中本地运行 Worker 角色并将日志持久化到本地存储
2.  在模拟器中本地运行辅助角色并将日志持久化到远程暂存 Azure 表存储

当我将工作角色服务部署到 Azure 时，它​​不会在 LogEntities 表中记录任何内容。正是这一点，这一点令人难以置信的沮丧。

我在 Worker Role app.config 中打开了 log4net 调试，我在 WADLogsTable 中看到了以下跟踪

> > log4net：完成名为 [TableStorageAppender] 的附加程序。

就是这样。自从添加

```
<appSettings>
    <add key="log4net.Internal.Debug" value="true"/>
</appSettings> 
```

到我的工人角色 app.config。

我在 Worker Role 覆盖的 Run 方法中配置 log4net：

```
public override void Run()
 {
        try
        {

            XmlConfigurator.Configure();
            ILog Logger = LogManager.GetLogger(GetType());
            Trace.WriteLine("Trace: CheckInService.Run()");
            Logger.Info("log4net: CheckInService.Run()");
            //open the Service and do some other stuff etc 
            while (true)
            {
                Thread.Sleep(1800000);
            }
        catch (Exception ex)
        {
            Trace.TraceError("There was a problem opening the CheckInService");
        }
 } 
```

这是我完整的 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" name="log4net" />
  </configSections>
  <appSettings>
    <add key="log4net.Internal.Debug" value="true"/>
  </appSettings>
  <log4net>
    <appender type="Cloud.Services.Logging.TableStorageAppender, Cloud.Services.Logging" name="TableStorageAppender">
    </appender>
    <root>
      <level value="All" />
      <appender-ref ref="TableStorageAppender" />
    </root>
  </log4net>
  <system.diagnostics>
    <trace autoflush="true">
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

日志记录附加程序（TableStorageAppender）实现在它自己的程序集（Cloud.Services.Logging）中，但我假设这不会有任何区别？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:27:45.960

发布到 Azure 时是否包含 Cloud.Services.Logging 程序集（CopyLocal = True）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T16:55:57.983

也许是缓冲问题？尝试在 appender 配置中设置 bufferSize=1 [https://github.com/stemarie/log4net.Azure/issues/20#issuecomment-135891543](https://github.com/stemarie/log4net.Azure/issues/20#issuecomment-135891543)

# python - selenium python驱动程序，功能：move_to_element_with_offset不正确的行为

> ID：15407790
> 
> 赞同：1
> 
> 时间：2013-03-14T11:20:56.313
> 
> 标签：python, selenium

我遇到了 selenium python 驱动程序的问题，函数：move_to_element_with_offset 似乎该函数只将鼠标移动到元素的中间

```
def setUp(self):

    print "hello"
    self.logger = setuplogging()
    self.browser = webdriver.Firefox()

def _test_add_point(self):

    body = self.browser.find_element_by_tag_name("body")

    body.send_keys(Keys.UP * 20)
    applet = self.browser.find_element_by_id("selected-applet")
    pics = applet.find_elements_by_xpath(".//div[contains(@class, 'picture')]")

    time.sleep(5)
    real_pic = pics[0].find_elements_by_xpath(".//img")
    action_chains = ActionChains(self.browser)

    action_chains.move_to_element_with_offset(real_pic[0], 20, 20).perform()
    time.sleep(5)
    action_chains.click().perform()
    time.sleep(10) 
```

当我执行上面的代码时，它总是会点击到图片的中间，而我的期望是在这种情况下它会点击到中心加上偏移量（20、20）。更改偏移量将无济于事。使用函数 move_by_offset 也无济于事。

能否请你帮忙？

# java - 如何在 JSF 中获取尾随 url 路径

> ID：15407791
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:20:57.553
> 
> 标签：java, jsf

我正在尝试实现一个 JSF 应用程序，其中

```
www.myapp.com/username. 
```

我想获取 /username 路径并使用它来确定向用户显示的内容。就像

```
facebook.com/username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:57:20.003

我是这样理解的：

您正在尝试使用用户名作为 URL 参数。

你需要做的事情：制作一个转换器，一种接受参数的方法和一种发送参数的方法。

创建一个实现 Converter 接口以捕获 url 模式的类。

[这是一个教程](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)

需要用户对象的页面应该有这个：

```
f: viewParam id="username" name="username" value="#{profileBean.user}" converter="#{userConverter}" 
```

我不知道 url 的来源，但如果你想从 bean 发送它，只需将用户名连接到重定向（ + "?username=" + user.username）或作为 f:param 从这页纸。

如果您提供更多信息，答案可能会更完整。

# c# - 将 ValidationControls 动态添加到更新面板？[ASP.NET]

> ID：15407793
> 
> 赞同：2
> 
> 时间：2013-03-14T11:21:02.793
> 
> 标签：c#, asp.net, validation, updatepanel, requiredfieldvalidator

我创建的动态更新面板有问题。

问题是我想为我在服务器端创建的每个元素添加一个验证器，即 RequriedFieldValidator。以上工作正常。但是当我单击提交按钮时，它什么也不做。我可以在 htmlShellcode 中看到 span 元素显示错误，但它具有“style="visibility=hidden"。

我该如何解决这个问题？我也不确定我是否从一开始就做对了（对编程很陌生）。

标记：

```
 <asp:Panel ID="UpdatepanelWrapper" CssClass="Updatepanelwrapper" runat="server">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:PlaceHolder runat="server" ID="WholeWrapper">

                <asp:PlaceHolder runat="server" ID="QuestionWrapper">
                    <asp:PlaceHolder runat="server" ID="LabelQuestion"><asp:PlaceHolder>
                    <asp:PlaceHolder runat="server" ID="Question"></asp:PlaceHolder>                        
                </asp:PlaceHolder>                    
                </asp:PlaceHolder>
            </asp:PlaceHolder>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="btnDelete" EventName="Click" />
        </Triggers>

    </asp:UpdatePanel>
<asp:Panel ID="ButtonPanel" CssClass="ButtonPanel" runat="server">
        <asp:ImageButton ID="btnDelete" runat="server" ImageUrl="~/Images/Deleteicon.png" CssClass="DeleteButton" OnClientClick="btnDelete_Click" />
        <asp:ImageButton ID="btnAdd" runat="server" ImageUrl="~/Images/Addicon.png" CssClass="AddButton" OnClientClick="btnAddQuestion_Click" />
    </asp:Panel>
</asp:Panel> 
```

服务器代码：（**重写方法 OnInit 是重要的）**

```
public partial class _Default : Page
{
    static int CountOfQuestions = 1;

    private RequiredFieldValidator[] ArrRequiredFieldQuestion;
    private Panel[] ArrWholePanel;
    private Panel[] ArrQuestionPanel;

    private Label[] ArrQuestionLabel;
    private TextBox[] ArrQuestionBox;

    protected void Page_Load(object sender, EventArgs e)
    {

    }
    private void LoadControls()
    {
        Control myControl = GetPostBackControl(this.Page);

        if (myControl != null)
        {
            if (myControl.ID.ToString() == "btnAdd") //Ändra till btnAddQuestion om en "button" ska användas
            {
                CountOfQuestions++;
            }
            if (myControl.ID.ToString() == "btnDelete")
            {
                CountOfQuestions--;
            }

        }
    }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        if (!IsPostBack)
        {
            CountOfQuestions = 1;
        }
        LoadControls();

        ArrRequiredFieldQuestion = new RequiredFieldValidator[CountOfQuestions];
        ArrWholePanel = new Panel[CountOfQuestions];
        ArrQuestionPanel = new Panel[CountOfQuestions];
        ArrQuestionLabel = new Label[CountOfQuestions];
        ArrQuestionBox = new TextBox[CountOfQuestions];
        for (int i = 0; i < CountOfQuestions; i++)
        {
            RequiredFieldValidator ReqFieldQuestion = new RequiredFieldValidator();

            PlaceHolder WholeWrapper = UpdatePanel1.FindControl("WholeWrapper") as PlaceHolder;

            Panel WholePanel = new Panel();
            Panel QuestionPanel = new Panel();

            Panel CorrectAnswerPanel = new Panel();

            Label QuestionLabel = new Label();

            TextBox Question = new TextBox();

            QuestionLabel.Text = "Write your question";

            Question.TextMode = TextBoxMode.MultiLine;
            Question.Width = 550;
            Question.Height = 50;

            WholePanel.ID = "WholePanel" + i.ToString();
            QuestionPanel.ID = "QuestionPanel" + i.ToString();
            Question.ID = "tbxQuestion" + i.ToString();

            ReqFieldQuestion.ID = "Validate" + i.ToString();
            ReqFieldQuestion.ControlToValidate = "tbxQuestion" + i.ToString();
            ReqFieldQuestion.ValidationGroup = "QuestionGroup";
            ReqFieldQuestion.ErrorMessage = "Error";
            ReqFieldQuestion.Attributes.Add("runat", "server");

            QuestionPanel.CssClass = "QuestionEntry";

            QuestionPanel.Controls.Add(QuestionLabel);
            QuestionPanel.Controls.Add(Question);
            QuestionPanel.Controls.Add(ReqFieldQuestion);

            WholeWrapper.Controls.Add(WholePanel);
            WholePanel.Controls.Add(QuestionPanel);

            ArrRequiredFieldQuestion[i] = ReqFieldQuestion;

            ArrQuestionPanel[i] = QuestionPanel;

            ArrQuestionLabel[i] = QuestionLabel;
            ArrQuestionBox[i] = Question;
        }
    }

    protected void btnAddQuestion_Click(object sender, EventArgs e)
    {
        //Handeld by Pre_init and LoadControls
    }

    protected void btnDelete_Click(object sender, EventArgs e)
    {
        //Handeld by Pre_init and LoadControls
    }

    public static Control GetPostBackControl(Page thePage)
    {            
        Control postbackControlInstance = null;
        if (postbackControlInstance == null)
        {
            for (int i = 0; i < thePage.Request.Form.Count; i++)
            {
                if ((thePage.Request.Form.Keys[i].EndsWith(".x")) || (thePage.Request.Form.Keys[i].EndsWith(".y")))
                {
                    postbackControlInstance = thePage.FindControl(thePage.Request.Form.Keys[i].Substring(0, thePage.Request.Form.Keys[i].Length - 2));
                    return postbackControlInstance;
                }
            }
        }
        return postbackControlInstance;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:31:53.340

> 但是当我单击提交按钮时，它什么也不做。

由于我没有看到提交按钮，我猜测您的意思是添加和删除按钮。如果是这种情况，问题在于您`RequiredFieldValidators`的所有`ValidationGroup`属性都设置为*QuestionGroup*，但您的任何按钮中都没有设置。

像这样修改按钮：

```
<asp:ImageButton ID="btnAdd" runat="server" ValidationGroup="QuestionGroup" ... /> 
```

# javascript - object.style.left 在 javascript 中什么都不返回？

> ID：15407794
> 
> 赞同：0
> 
> 时间：2013-03-14T11:21:03.213
> 
> 标签：javascript, html, css

我无法访问图像元素的左侧位置。这是[我的 jsFiddle](http://jsfiddle.net/G9Y8w/1/)。警告框不显示任何内容。

```
<!DOCTYPE html>
<html>
<img src="pan.jpg" id="uno" width="600" />
<style>
#uno
{
position:relative;
left:100px;
}
</style>
<script>
     alert(document.getElementById("uno").style.left);
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:29:52.973

JavaScript 的 style 属性只能访问内联样式。你会注意到它适用于这个：（[jsFiddle](http://jsfiddle.net/Tyriar/G9Y8w/)）

```
<img src="pan.jpg" id="uno" width="600" style="left:125px;" /> 
```

我建议你要么只`left`在 JavaScript 中设置，要么在 CSS 中使用类，并检查类的对象而不是样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:48:15.260

**替代解决方案**（如果您不定义内联样式，虽然有点复杂）

```
//document.styleSheets gives the list of available stylesheets for the document
//Here we have only one stylesheet hence document.stylesheets["0"] gives us the only stylesheet    
//document.stylesheets["0"].rules gives the object with defined css rules
var rules = document.styleSheets["0"].rules
//iterating over that object to find the object which has css for element ID "uno"
for(property in rules){
  if(rules.hasOwnProperty(property)){
    if(rules[property].selectorText === "#uno"){
      alert(rules[property].style.left);
    }
  }
} 
```

## 更新后的文件

```
<!DOCTYPE html>
<html>
<img src="pan.jpg" id="uno" width="600" />
<style>
#uno
{
position:relative;
left:100px;
}
</style>
<script>
  var rules = document.styleSheets["0"].rules
  for(property in rules){
    if(rules.hasOwnProperty(property)){
      if(rules[property].selectorText === "#uno"){
        alert(rules[property].style.left);
      }
    }
  }
</script>
</html> 
```

宁可使用 jquery 来为我们完成所有的繁重工作

# php-parser - PHP Simple HTML DOM Parser function to parse(get anchore tag) from html source

> ID：15407796
> 
> 赞同：0
> 
> 时间：2013-03-14T11:21:04.357
> 
> 标签：php-parser

我需要找到一种方法来`<a`从 HTML 文件中请求所有元素的 href 和值。

例如：

`<a href="http://domain.com" class="clsLink">Domain Link</a>`
输出：

```
href: 'http://domain.com'
value: 'Domain Link' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:24:37.863

试试这个代码。

```
$html=file_get_html($url);
foreach ($html->find('a') as $links){

    //Get link text
    echo $links->innertext;

    //Get href value
    echo $links->href;
} 
```

# php - 在这个模拟对象上找不到模拟方法 shouldRecieve()

> ID：15407798
> 
> 赞同：2
> 
> 时间：2013-03-14T11:21:06.970
> 
> 标签：php, laravel, phpunit, laravel-4, mockery

我正在使用带有 Laravel 和 PHPunit 的 padraic/mockery 包。我在 PHP 5.4.3 上。

当试图创建一个模拟对象来测试控制器时，我收到一个错误：

```
"BadMethodCallException: Method ... shouldRecieve() is not found on this mock object" 
```

我的代码在下面，我非常密切地关注教程，但无法弄清楚为什么我的模拟对象似乎没有正确实例化。

```
public function testItWorks()
{
    $mocked = m::mock('SearchRepositoryInterface');
    App::instance('SearchRepositoryInterface', $mocked);

    $mocked->shouldRecieve('test')->once()->andReturn('NOT hitting the db');
    $response = $this->call('GET', 'search');

    $this->assertTrue($response->isOK());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:26:18.390

你有一个错字。它`shouldReceive`不是`shouldRecieve`

# spring - 我如何确认重试在春季批量执行中工作

> ID：15407799
> 
> 赞同：0
> 
> 时间：2013-03-14T11:21:07.947
> 
> 标签：spring, spring-batch

我得到了弹簧批处理，我想配置一个重试逻辑，我得到了以下配置：

```
<step id="roundUpMonthlyJobFetchUsers">
            <tasklet>
                <chunk reader="roundUpMonthlyItemReader" processor="roundUpMonthlyItemProcessor"
                       writer="roundUpMonthlyItemWriter" commit-interval="1" retry-limit="3" >
                    <retryable-exception-classes>
                        <include class="java.io.IOException" />
                    </retryable-exception-classes>
               </chunk>
            </tasklet>
         <end on="COMPLETED"/>
    <fail on="FAILED"/>
</step> 
```

当遇到 IOException 时，如何确认它实际上尝试执行操作至少 3 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:25:00.923

更改此类`roundUpMonthlyItemReader`

要在条目上记录一些东西，然后每次都抛出 IOException，然后检查日志:)

```
log.info("Reading Monthly round up");
throw new IOException("Dummy IOException"); 
```

如果你想在你的单元测试中这样做，你应该能够使用 Mockito

*   模拟读者或作者抛出 IOException
*   确保它被调用 3 次

# php - 使用提交按钮通过 PHP 将条目插入 MySQL 数据库？

> ID：15407802
> 
> 赞同：3
> 
> 时间：2013-03-14T11:21:19.250
> 
> 标签：php, html, mysql, submit-button

我对 PHP 很陌生，所以我不太确定该怎么做。

基本上，我试图通过 HTML 中的“提交”按钮将一个条目插入到我的 MySQL 数据库中。我似乎无法让它工作，这可能吗？

```
 <?php
    include('db_connect.php');
    $SQL = "INSERT INTO chosenitems (ID, Name, Price) VALUES ('', '4-6 Days', '£75.00')";

    $result = mysql_query($SQL);
    ?> 
```

INSERT 本身工作得很好，但我希望它在按下“提交”按钮时执行。

任何帮助将不胜感激。

谢谢

托博。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:23:09.663

只需将`action`表单的 设置为执行插入的脚本的 URL。

请注意，由于您正在修改数据库，因此请求可能[是非幂等的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.2)，您应该使用 POST 方法。

```
<form action="/path/to/your/script.php" method="post">
    <input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T11:23:41.173

```
<form method="post">
    <input type="submit" name="submit" value="submt"/>
</form> 
```

**PHP**

```
<?php
if(isset($_POST['submit']))
{
     $SQL = "INSERT INTO chosenitems (ID, Name, Price) VALUES ('', '4-6 Days', '£75.00')";
     $result = mysql_query($SQL);
}
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T11:22:40.893

您可以检查按钮值是否已发布，并可以在其中执行代码行。

```
<?php
    include('db_connect.php');
    if(isset($_REQUEST['SUBMIT_BUTTON_NAME']))
    {
        $SQL = "INSERT INTO chosenitems (ID, Name, Price) VALUES ('', '4-6 Days', '£75.00')";

        $result = mysql_query($SQL);
    }
?> 
```

希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-19T10:51:53.073

我有提交详细信息：

```
<form id = "submitForm" action="config/profile_save.php" method="post">

<button type="submit" class="button"  name="submit" value="submit">Save Profile</button></form> 
```

在页面上的每个输入字段中，我放置`form = "submitForm"` 了 I 然后也更改了名称。（这是稍后的超级全局变量）

```
<input type="text" autofocus="true" class="custom_link_url_text" id="custom_link_url_text" 
name="custom_link_email" placeholder="Enter your public email address" spellcheck="false" 
style="width: 245px;" maxlength="75" form = "submitForm"> 
```

然后，我能够使用名称作为 POST 变量来捕获下一页上的数据。

```
if(isset($_POST['submit'])) {
    $custom_link_email = $_POST['custom_link_email'];
} 
```

一旦我这样做了，这只是将数据插入数据库的情况。

# php - 用 PHP 解析一个特定的 XML 文件并读取它

> ID：15407811
> 
> 赞同：1
> 
> 时间：2013-03-14T11:21:44.013
> 
> 标签：php, xml, parsing, object

我想了解读取和解析这个“XML”文件的方式。我的代码正在使用另一个 XML 文件，无法理解我错在哪里。

```
<F24 ZId="0" ZdId="0" PlikXml="0" rP="0" DCal="20130314">
  <Kraje i="35">...</Kraje>
  <Mecze>
    <M MId="1049553" LId="28541" _LId="28537" OId="230" SId="5" KId="220" LNr="2" C0="1363226400" ML="1" HId="2590" GId="2975" W="" HN="Pérez Zeledón" GN="Puntarenas FC" HRC="" HRCi="0" GRC="" GRCi="0" Info="" S1="0-0" S2="0-0" MStan="1" OTv="" L="0" A="0" Ao="4"/>
  </Mecze>
</F24> 
```

这就是 XML 文件的结构。我想`F24->Mecze->M{'GN'};`从“Mecze->M”得到什么。

此刻的代码。

```
<?php

$file = '...';
$rss = simplexml_load_file($file);

foreach ($rss->{'M'} as $OO) { 

        $ht = $OO->{'HN'};

        echo $ht;

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:45:34.340

根据演示数据的结构，您需要类似

foreach ($rss->Mecze->M as $OO)

或许

```
foreach ($rss->xpath('Mecze/M') as $OO) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:51:39.557

```
$rss = simplexml_load_string('<F24 ZId="0" ZdId="0" PlikXml="0" rP="0" DCal="20130314">
  <Kraje i="35">...</Kraje>
  <Mecze>
    <M MId="1049553" LId="28541" _LId="28537" OId="230" SId="5" KId="220" LNr="2" C0="1363226400" ML="1" HId="2590" GId="2975" W="" HN="Pérez Zeledón" GN="Puntarenas FC" HRC="" HRCi="0" GRC="" GRCi="0" Info="" S1="0-0" S2="0-0" MStan="1" OTv="" L="0" A="0" Ao="4"/>
  </Mecze>
</F24>');
foreach ($rss->Mecze->M as $OO) { 

        echo $OO['HN'];

} 
```

[http://codepad.org/loNVfOew](http://codepad.org/loNVfOew)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:52:49.083

您可以尝试 sax php [http://www.php.net/manual/en/function.xml-set-object.php](http://www.php.net/manual/en/function.xml-set-object.php)并提取任何节点、属性或创建任何结构

# silverlight - Silverlight Webpart：由于自动生成的代码，部署步骤“激活功能”中发生错误

> ID：15407812
> 
> 赞同：1
> 
> 时间：2013-03-14T11:21:52.557
> 
> 标签：silverlight, sharepoint, visual-studio-2012

我正在 VisualStudio 2012 for SharePoint 2010 的单个解决方案中开发多个 Silverlight-Webpart。有时在 {Project1} 中会出现此错误：

```
Error occurred in deployment step 'Activate Features': 
Failed to instantiate file "SiteAssets/{Project1Folder}/$SilverlightXapFile$" 
from module "Designer": Source path "Features\{Project1Folder}\{otherProject}.xap" not found. 
```

元素.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/" >
  <Module Name="{Module}" List="113" Url="_catalogs/wp">
    <File Path="{Module}\{Webpart}.webpart" Url="{ProjectWebpart}.webpart" Type="GhostableInLibrary">
      <Property Name="Group" Value="{Company}" />
    </File>
 </Module>
 <Module Name="{Project}">
   <File Path="{Project}\{Project1}.xap" Url="SiteAssets/{Project1Folder}/{Project1}.xap" />
   <File Path="{Project}\{otherProject}.xap" Url="SiteAssets/{Project1Folder}/$SilverlightXapFile$" />
 </Module>
</Elements> 
```

感谢 Subversion：我知道 Visual Studio 在 {Project1} Webpart 的 Elements.xml 中添加了一行。

```
 <File Path="{Project}\{otherProject}.xap" Url="SiteAssets/{Project1Folder}/$SilverlightXapFile$" /> 
```

当我删除这个新行时，它会再次起作用。

我的问题：如何防止 VisualStudio 将 Elements.xml 中的“错误”引用添加到同一解决方案中的其他 Silverlight 项目？

# android - Android GridView 奇数项放置

> ID：15407815
> 
> 赞同：3
> 
> 时间：2013-03-14T11:21:54.383
> 
> 标签：android, gridview

我有一个带有两列奇数项目的 Gridview。物品放置如下：

```
Item 1   -  Item 2

Item 3   -  Item 4

Item 5   -  Item 6

Item 7 
```

我希望最后一项 7 应该像这样在中心：

```
Item 1   -  Item 2

Item 3   -  Item 4

Item 5   -  Item 6

      Item 7 
```

请帮助我，如何通过Java代码做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-08T06:27:51.107

您无法使用默认的 gridView 获得此信息。

您可以使用以下解决方法：

1.  尝试三列并使中间一列不可见

    或者

2.  在网格视图下方添加一个单独的视图。

    或者

3.  创建自己的 gridview 实现

我认为这些对你有用。

# c# - C# MVC EF - 将外键设置为 NULL？

> ID：15407816
> 
> 赞同：0
> 
> 时间：2013-03-14T11:21:54.500
> 
> 标签：c#, asp.net-mvc, entity-framework, foreign-keys, code-first

我正在尝试将外键设置为“Null”。使用 SQL Management Studio 它可以正常工作，但是使用 C# 尝试它，我遇到了一个异常：

例外：

> 值不能为空。参数名称：实体。

代码：

```
 var entity = _db.AlleBenutzer.FirstOrDefault(p => p.Id == id);
    if (entity != null)
    {
        var abteilungObjekt = _db.AlleAbteilungen.FirstOrDefault(p => p.Abteilungsname == abteilung);
        var etageObjekt = _db.AlleEtagen.Include(p => p.Abteilung).FirstOrDefault(p => p.Etagenname == etage);
        entity.Abteilung = abteilungObjekt;
        entity.Etage = etageObjekt;
        _db.Entry(entity.Abteilung).State = EntityState.Modified;
        _db.Entry(entity.Etage).State = EntityState.Modified;
        _db.Entry(entity).State = EntityState.Modified;
        _db.SaveChanges();
    } 
```

我的两个模型都是这样的：（切几块）

```
public class Benutzer
{
    public int Id { get; set; }
    public Abteilung Abteilung { get; set; }
    public Etage Etage { get; set; }
}

public class Abteilung
{
    public int Id { get; set; }
    public string Abteilungsname { get; set; }
} 
```

谁能帮我吗？如何修改我的模型以使我的外键可以为空？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:28:48.650

在您的模型中，充当 FK 的 ID 应该是一个`int?`，以使其可以为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:27:37.473

尝试：

```
var entity = _db.AlleBenutzer.FirstOrDefault(p => p.Id == id);
    if (entity != null)
    {
        var abteilungObjekt = _db.AlleAbteilungen.FirstOrDefault(p => p.Abteilungsname == abteilung);
        if (abteilungObjekt != null)
        {
            entity.Abteilung = abteilungObjekt;
            _db.Entry(entity.Abteilung).State = EntityState.Modified;
        }

        var etageObjekt = _db.AlleEtagen.Include(p => p.Abteilung).FirstOrDefault(p => p.Etagenname == etage);
        if (etageObjekt != null)
        {        
            entity.Etage = etageObjekt;
            _db.Entry(entity.Etage).State = EntityState.Modified;
        }

        _db.Entry(entity).State = EntityState.Modified;
        _db.SaveChanges();
    } 
```

当您尝试将它们分配给实体时，看起来 abteilungObjekt 或 etageObjekt 可能为空。`FirstOrDefault()`在引用类型上使用时，您应该始终执行空检查。

# ant - 更改我的属性文件中的值

> ID：15407818
> 
> 赞同：0
> 
> 时间：2013-03-14T11:21:55.657
> 
> 标签：ant

我有一个属性文件：

**自定义属性**

此属性文件的内容是：

```
id=sf2j2345kkklljhlaasfsdfafsf543
name = SOME_NAME 
```

我想将 id 的值更改为“ **aaa** ”，也就是将文件的内容更改为：

```
id=aaa
name = SOME_NAME 
```

我试过了：

```
 <target name="change-id">  
        <replaceregexp file="custom.properties" match="^id=.*" replace="id=aaa" encoding="UTF-8" />
 </target> 
```

我运行命令`ant change-id`

构建成功，**但是它不起作用**，我的属性文件的内容**没有改变**。**为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:43:18.617

要编辑属性文件，请使用[Propertyfile Task](http://ant.apache.org/manual/Tasks/propertyfile.html)
fe ：

```
<propertyfile file="some.properties">
  <entry  key="id" value="aaa"/>
</propertyfile> 
```

# c# - 如果对象是特定类，则检查数据触发器

> ID：15407825
> 
> 赞同：2
> 
> 时间：2013-03-14T11:22:11.780
> 
> 标签：c#, wpf, datatrigger

有没有办法检查`DataTrigger`对象是否属于特定类？

事实上，我想`DataTrigger`回答这个问题`C#`：

```
if(MyObject is MyClass) 
```

我希望它在 XAML 中看起来像这样：

```
<Grid>
   <Grid.Triggers>
     <DataTrigger Binding="{Binding MyObject}" Value="MyClass?">
        <Setter..../>
     </DataTrigger>
   </Grid.Triggers>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:45:14.307

您可以为此使用转换器：

```
<Grid>
    <Grid.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding MyString, Converter={StaticResource OConv}, ConverterParameter=System.String}" Value="True">
                    <Setter Property="Grid.Background" Value="Red"></Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style>
</Grid> 
```

使用 ConverterParameter 来说明您希望接收的对象的类型...如果匹配，转换器将返回 true，否则返回 false...

转换器示例：

```
public clas s ObjectTypeToBooleanConverter : IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value.GetType().ToString() == (string)parameter)
        {
            return true;
        }
        return false;
    } 
```

# android - 在安装之前扫描android中应用程序的权限

> ID：15407831
> 
> 赞同：0
> 
> 时间：2013-03-14T11:22:26.277
> 
> 标签：android, android-permissions

我对android完全陌生，我对这个问题感到震惊......是否可以在将android应用程序安装到移动设备之前扫描它的权限列表。例如，当显示用户权限列表对话框时，我希望我的应用程序扫描这些权限，然后在扫描后向用户建议安装..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:26:40.840

> 例如，当显示用户权限列表对话框时，我希望我的应用程序扫描这些权限，然后在扫描后向用户建议安装

这是不可能的。

您可以在安装*后*发现安装了一个应用程序（通过`ACTION_PACKAGE_ADDED`广播）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:29:36.947

您可以抓取所选应用的 Android Playstore HTML 页面并以这种方式获取权限。

# crystal-reports - 水晶报表：子报表格式化问题

> ID：15407839
> 
> 赞同：1
> 
> 时间：2013-03-14T11:22:47.023
> 
> 标签：crystal-reports, crystal-reports-2008

![格式不正确](../Images/875c538ade43727cd9eb538568993a22.png) ![正确的格式](../Images/d508c21069bba6891c36035d77200bd3.png) 我在同一组部分使用两个子报告。我想要第二种图像格式，我得到了上述格式。当我将第 2 个子报告放在第 1 个报告报告重叠的末尾时。

# batch-file - 使用批处理编辑外部批处理配置值

> ID：15407841
> 
> 赞同：0
> 
> 时间：2013-03-14T11:22:56.397
> 
> 标签：batch-file, external, config, editing

我有一个名为 config.conf 的配置文件，其内容为：

```
[Config]
password=1234 
usertries=0 
allowterminate=0 
```

我只想将 usertries 值编辑为 5，是否有任何批处理脚本代码可以帮助我做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:38:21.387

这有点混乱，但应该可以：

```
@echo off
set ConfigFile=config.conf
setlocal enabledelayedexpansion
(for /f "delims=" %%L in (%ConfigFile%) do (
  set "LINE=%%L"
  if "!LINE:~0,10!"=="usertries=" (echo usertries=5) else (echo !LINE!)
)) > %ConfigFile%.new
move /y %ConfigFile%.new %ConfigFile% > nul 
```

基本上我们将每一行写入一个新文件，除非它以`usertries=`. 在这种情况下，我们只需插入替换行。之后，我们将新文件移到旧文件之上以替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:30:42.850

```
@ECHO OFF
setlocal
::
:: set %1 to value %2 in config.conf
::
SET target=%2&IF NOT DEFINED target ECHO syntax is %0 keyname newvalue&GOTO :EOF 
SET target=Config.conf
MOVE /y %target% %target%.old >NUL
FOR /f "tokens=1*delims==" %%i IN (%target%.old) DO (
IF /i %%i==%1 (ECHO %%i=%2) ELSE (
IF "%%j"=="" (ECHO %%i) ELSE (ECHO %%i=%%j)
)
) >>%target% 
```

使用此版本，您可以使用将现有键更改为值

```
thisbatchname existingkey newvalue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:32:59.733

我知道我参加聚会有点晚了，但我决定编写一个通用的 ini 文件实用程序批处理脚本来解决这个问题。

该脚本将允许您检索或修改 ini 样式文件中的值。它的搜索不区分大小写，并且在 ini 文件中保留空白行。从本质上讲，它允许您将 ini 文件作为一种非常基本的数据库进行交互。

```
:: --------------------
:: ini.bat
:: ini.bat /? for usage
:: --------------------

@echo off
setlocal enabledelayedexpansion

goto begin

:usage
echo Usage: %~nx0 /i item [/v value] [/s section] inifile
echo;
echo Take the following ini file for example:
echo;
echo    [Config]
echo    password=1234
echo    usertries=0
echo    allowterminate=0
echo;
echo To read the "password" value:
echo    %~nx0 /s Config /i password inifile
echo;
echo To change the "usertries" value to 5:
echo    %~nx0 /s Config /i usertries /v 5 inifile
echo;
echo In the above examples, "/s Config" is optional, but will allow the selection of
echo a specific item where the ini file contains similar items in multiple sections.
goto :EOF

:begin
if "%~1"=="" goto usage
for %%I in (item value section found) do set %%I=
for %%I in (%*) do (
    if defined next (
        if !next!==/i set item=%%I
        if !next!==/v set value=%%I
        if !next!==/s set section=%%I
        set next=
    ) else (
        for %%x in (/i /v /s) do if "%%~I"=="%%x" set "next=%%~I"
        if not defined next (
            set "arg=%%~I"
            if "!arg:~0,1!"=="/" (
                1>&2 echo Error: Unrecognized option "%%~I"
                1>&2 echo;
                1>&2 call :usage
                exit /b 1
            ) else set "inifile=%%~I"
        )
    )
)
for %%I in (item inifile) do if not defined %%I goto usage
if not exist "%inifile%" (
    1>&2 echo Error: %inifile% not found.
    exit /b 1
)

if not defined section (
    if not defined value (
        for /f "usebackq tokens=2 delims==" %%I in (`findstr /i "^%item%\=" "%inifile%"`) do (
            echo(%%I
        )
    ) else (
        for /f "usebackq delims=" %%I in (`findstr /n "^" "%inifile%"`) do (
            set "line=%%I" && set "line=!line:*:=!"
            echo(!line! | findstr /i "^%item%\=" >NUL && (
                1>>"%inifile%.1" echo(%item%=%value%
                echo(%value%
            ) || 1>>"%inifile%.1" echo(!line!
        )
    )
) else (
    for /f "usebackq delims=" %%I in (`findstr /n "^" "%inifile%"`) do (
        set "line=%%I" && set "line=!line:*:=!"
        if defined found (
            if defined value (
                echo(!line! | findstr /i "^%item%\=" >NUL && (
                    1>>"%inifile%.1" echo(%item%=%value%
                    echo(%value%
                    set found=
                ) || 1>>"%inifile%.1" echo(!line!
            ) else echo(!line! | findstr /i "^%item%\=" >NUL && (
                for /f "tokens=2 delims==" %%x in ("!line!") do (
                    echo(%%x
                    exit /b 0
                )
            )
        ) else (
            if defined value (1>>"%inifile%.1" echo(!line!)
            echo(!line! | find /i "[%section%]" >NUL && set found=1
        )
    )
)

if exist "%inifile%.1" move /y "%inifile%.1" "%inifile%">NUL 
```

**例子：**

```
C:\Users\me\Desktop>type config.conf
[Config]
password=1234
usertries=0
allowterminate=0

[Other]
password=foo

C:\Users\me\Desktop>ini /i usertries /v 5 config.conf
5

C:\Users\me\Desktop>ini /i usertries config.conf
5

C:\Users\me\Desktop>ini /s config /i password /v bar config.conf
bar

C:\Users\me\Desktop>ini /s other /i password /v baz config.conf
baz

C:\Users\me\Desktop>type config.conf
[Config]
password=bar
usertries=5
allowterminate=0

[Other]
password=baz 
```

# ios - iOS stringWithUTF8String (Really CFAllocatorAllocate) EXC_BAD_ACCESS 崩溃，ARC下

> ID：15407843
> 
> 赞同：2
> 
> 时间：2013-03-14T11:23:05.027
> 
> 标签：ios, nsstring, exc-bad-access

我有一些看起来尽可能安全的代码......但我得到了`EXC_BAD_ACCESS`. 不经常介意，就这一次。

编码：

```
- (void) deviceListenerCallback:(DeviceEventTypeDef)type data:(void*)data
{
    DeviceInfoDef* o = (DeviceInfoDef*)data;
    char newName[256];
    if (o->DeviceName) {
        strncpy(newName, o->DeviceName, 255);
    } else {
        strncpy(newName, "(null)", 255);
    }
    NSString *deviceNameUTF8 = [NSString stringWithUTF8String:(const char *)newName]; 
```

'data' 是从 C 库传递给我们的指针。数据存在且未损坏。

strncpy 中以 newName 结尾的字符是“Network Audio\0\0\0\0\0...”

当`EXC_BAD_ACCESS`我调用 stringWithUTF8String 时，它位于最后一行。错误是：

```
EXC_BAD_ACCESS (code=1, address=0x30303030) 
```

调用栈是：

```
CFAllocatorAllocate
................................
5 +[NSString stringWithUTF8String:]
6 -[MyClass deviceListenerCall... 
```

该项目在 ARC 下运行。

谁能指出我必须做错的新手事情？

谢谢，

-肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:33:39.983

```
NSString *deviceNameUTF8 = [NSString stringWithUTF8String: [[NSString alloc] initWithBytes:newName length:255 encoding: NSUTF8StringEncoding]]; 
```

我认为这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:29:04.423

`strncpy()`鉴于输入字符串包含终止字符，我不清楚您为什么要使用它`NUL`。

为什么不`deviceNameUTF8`直接从创建（误命名为不是 UTF-8）`o->DeviceName`？

```
- (void) deviceListenerCallback:(DeviceEventTypeDef)type data:(void*)data
{
    DeviceInfoDef* o = (DeviceInfoDef*)data;
    NSString *deviceName;
    if (o != NULL)
        deviceName = [NSString stringWithUTF8String:o->DeviceName];
    else
        deviceName = @""; 
```

# objective-c - 解析后 UITableView 委托和数据源在一个单独的类中

> ID：15407844
> 
> 赞同：3
> 
> 时间：2013-03-14T11:23:05.417
> 
> 标签：objective-c, xcode, uitableview

我需要从一个单独的类设置我的 UITableView 委托和数据源（通过方法调用解析后准备好数据），但每次我的表都是空的。我正在使用 ARC，这是简化的代码：

```
//HomeViewController.h

#import <UIKit/UIKit.h>
#import "TableController.h"

@interface HomeViewController : UIViewController {

    IBOutlet UITableView *table;
    TableController *tableController;
}

@end 
```

和

```
//HomeViewController.m

#import "HomeViewController.h"

@interface HomeViewController ()

@end

@implementation HomeViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    tableController = [[TableController alloc] init];
    table.dataSource = tableController.tableSource.dataSource;
    table.delegate = tableController.tableSource.delegate;
    [tableController loadTable]; // HERE I CALL LOADTABLE FROM TABLECONTROLLER CLASS TO PARSE DATA AND POPULATE UITABLEVIEW
    [table reloadData];

} 
```

和

```
// TableController.h

#import <UIKit/UIKit.h>

@interface TableController : NSObject <UITableViewDelegate, UITableViewDataSource> {

   UITableView *tableSource;

   // a lot of NSMutableArray to parse my data

}

- (void)loadTable;

@property (nonatomic, strong) UITableView *tableSource;

@end 
```

和

```
//TableController.m

#import "TableController.h"
#import "AFNetworking.h"

@interface TableController ()

@end

@implementation TableController

@synthesize tableSource;

- (void)loadTable {

    NSURL *parseURL = // remote URL to parse Data
    NSURLRequest *request = [NSURLRequest requestWithURL:parseURL];
    AFJSONRequestOperation *parseOperation = [AFJSONRequestOperation
                                               JSONRequestOperationWithRequest:request
                                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

                                                   // code to parse Data and NSLog to test operation

                                                   [tableSource reloadData];
                                                   [tableSource setUserInteractionEnabled:YES];
                                                   [tableSource scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];

                                               }
                                               failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                   NSLog(@"%@", [error userInfo]);
                                               }];
    [parseOperation start];
    [tableSource setUserInteractionEnabled:NO];
} 
```

而且，显然，仍然在 TableController.m 中，所有经典的 UITableView 委托方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// my code
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// my code
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
// my code
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
// my code
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
// my code
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
// my code
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// my code
} 
```

好吧，解析是完美的（我可以用 NSLog 测试它），但我的**表**是空的。你能帮我吗？

**编辑：**在我的代码`loadTable`中，解析方法是异步的，因此使用正确的数据源和委托加载表，但在解析所有数据之前；事实上，如果我设置一个固定的 numberOfRows 然后 SCROLL TABLE 我可以看到所有填充的行。但是，当我加载 HomeViewController 时，*table 仍然是 EMPTY。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:54:22.457

从哪里/如何`UITableView *tableSource`在 TableController 中设置对象？

还可以尝试在主线程中重新加载 tableview。

**编辑**

在您的 HomeController viewDidLoad 中更改这些

```
 table.dataSource = tableController.tableSource.dataSource;
   table.delegate = tableController.tableSource.delegate; 
```

到

```
 table.dataSource = tableController;
   table.delegate = tableController; 
```

一旦你得到响应，也将设置`HomeController`类作为 & 的代表。`TableController`调用一个方法`HomeController`来重新加载表格视图（在主线程中）！！！

为此，首先创建一个像这样`property parent`的`TableController .h file`

```
@property(nonatomic,retain) id parent; 
```

然后将 HomeController 设置为`HomeController`viewDiDLoad 的委托，例如

`tableController.parent = self`.

一旦你在完成块调用中得到响应，

`[self.parent reloadTableView];`// reloadTableView 将是一个`HomeController`函数`[self.table reloadData]`。

希望这能解决问题。

# selenium-webdriver - 有什么方法可以用 Sikuli 在地图上绘制？

> ID：15407845
> 
> 赞同：1
> 
> 时间：2013-03-14T11:23:06.640
> 
> 标签：selenium-webdriver, sikuli

在 Sikuli 的帮助下，我成功地点击了地图上的特定区域，但我的要求是通过[Sikuli Webdriver在地图上绘制](http://code.google.com/p/sikuli-api/wiki/SikuliWebDriver)

这是我希望能够使用 Sikuli 绘制的示例：

![如何在地图视图上绘图](../Images/8fbbecf226a64727ab04d3d483f35131.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:28:57.243

您已经获得了 Sikuli 网络驱动程序，并且正在查看相关示例。您想使用 webdriver 在地图 web 应用程序中进行绘制。这不受支持，但有可能（通过一些黑客攻击）。以下是您需要的部分的指针。

Sikuli 网络驱动程序的代码[位于 Bitbucket 上](https://bitbucket.org/doubleshow/sikuli-webdriver)。您将需要分支代码并修改`DefaultImageElement`. 现在，它只知道如何`click()`和`doubleClick()`，但它确实有元素的坐标，这正是你所需要的。

接下来，看看 Selenium 的[高级用户交互](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)页面。有一个“生成动作链”部分就是你想要的。文档只显示了作用于 web 元素的东西，但类中还有其他方法`Actions`可以盲目操作鼠标。

综上所述，假设我们要单击**Sign Hill Park**并拖动到**On Trac Warehouse**。这是骨架代码；你必须做一堆实现工作才能让任何东西运行起来。

使用您编写的新方法

```
ImageElement park = driver.findImageElement(SIGN_HILL_PARK_IMG);
ImageElement warehouse = driver.findImageElement(WAREHOUSE_IMG);
park.dragTo(warehouse) 
```

实现思路`dragTo`：

```
public class DefaultImageElement {
    //...
    public void dragTo(DefaultImageElement dest) {
        Actions builder = new Actions(driver);
        Action dragAction = builder.moveToElement(containerWebElement, x, y)  //containerWebElement is the element that holds the map, x and y are the location of our target within the map
            .clickAndHold()
            .moveToElement(dest.containerWebElement, dest.x, dest.y)
            .release()
            .build();
        dragAction.perform();
    }
    //... 
```

# css - 在 wordpress 中，the_content() 中的 css 更改

> ID：15407846
> 
> 赞同：1
> 
> 时间：2013-03-14T11:23:07.803
> 
> 标签：css, wordpress

我是 WordPress 新手。我`the_content()`用来获取图像和发布的文本。我需要更改帖子文本中的 CSS。

Html编码是，

```
<div class="entry-content">
    <p> 
        <a href="http://.../?attachment_id=34#main" rel="attachment wp-att-34">
            <img src="http://.../uploads/2013/03/1-1.jpg" alt="1-1" width="960" height="283" class="alignnone size-full wp-image-34">
        </a>
    </p>

    <p>
        Lorem ipsum dolor sit amet, consectetuer adnenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt Cras dapibus.
    </p>
</div> 
```

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:52:22.240

这可以通过多种方式完成

1.  当您创建新帖子时，将一些 html 元素添加到文本并为其分配一个类并在您的 style.css 中设置该类的样式

2.  使用内联样式。

3.  或者只是将新规则放入 css 文件中

    .entry-content p{ // 你的风格在这里 }

# vb.net - SelectCommand 属性在调用“填充”之前尚未初始化

> ID：15407848
> 
> 赞同：0
> 
> 时间：2013-03-14T11:23:10.877
> 
> 标签：vb.net, odbc, selectcommand

我试图从 excel 文件中上传一些记录，并在将源文件上传到服务器时出现该错误。

```
`sqlQuery = "Select * from [Sheet1$]"
    oleConn = New OleDb.OleDbConnection
    oleConn.ConnectionString = conString
    If oleConn.State = ConnectionState.Closed Then oleConn.Open()

    oleCmd = New OleDb.OleDbCommand(sqlQuery, oleConn)
    oleCmd.Connection = oleConn
    oleCmd.CommandText = "Select * from [Sheet1$]"'--tried to add this but gettin the same error
    oleCmd.CommandType = CommandType.Text'--and this

    oleDa = New OleDb.OleDbDataAdapter(oleCmd)
    oleDa.SelectCommand = oleCmd
    oleDa.Fill(oleDs)
    oleCmd.Dispose()

    If oleConn.State = ConnectionState.Open Then oleConn.Close()
    Return oleDs` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:54:41.683

尝试，

```
For opening connection
If oleConn.State <> ConnectionState.Open Then
oleConn.Open()
End if

For closing

If oleConn.State <> ConnectionState.Closed Then
oleConn.State.Close()
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T03:51:12.207

还是一样。是 VS 上的概率崩溃。在我为 VS 安装 SDK 之前运行良好。但是安装SDK失败后就变成了这样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T13:35:45.200

试试这个代码

```
 Private Sub buttonExecute_Click(sender As Object, e As EventArgs) Handles buttonExecute.Click
    Try
        ' Fill the DataGridView and connection string TextBox
        Dim FilePath As String = "C:\ExcelFile.xls" 'This is where file is located
        Dim FileType As String = "*.xlsx" 'This what extinction that file have
        Using connection As New OleDbConnection(GetConnectionString(FilePath, FileType))
            connection.Open()
            textBoxConnectionString.Text = GetConnectionString(FilePath, FileType)
            Using adapter As New OleDbDataAdapter("Select * from [Sheet1$]", connection)
                adapter.Fill(data)
            End Using
        End Using
    Catch ex As Exception
        ' Display any errors
        MessageBox.Show("[" & ex.[GetType]().Name & "] " & ex.Message & ex.StackTrace)
    End Try
End Sub 
```

这里获取coniction字符串的方法：

```
 Function Excel_GetConnectionString(FilePath As String, FileType As String) As String
    ' Name of the Excel worksheet to open
    Dim filename As String = FilePath

    ' Note: the Types array exactly matches the entries in openFileDialog1.Filter
    ' For Excel 2007 XML (*.xlsx)
    ' For Excel 2007 Binary (*.xlsb)
    ' For Excel 2007 Macro-enabled (*.xlsm)
    ' For Excel 97/2000/2003 (*.xls)
    Dim Types As String() = {"Excel 12.0 Xml", "Excel 12.0", "Excel 12.0 Macro", "Excel 8.0", "Excel 5.0"}
    ' For Excel 5.0/95 (*.xls)
    ' Note: openFileDialog1.FilterIndex was saved into textBoxFilename.Tag
    Dim Type As String = Types(CInt(FileType) - 1)

    ' True if the first row in the Excel data is a header (used for column names, not data)
    Dim Header As Boolean = True

    ' True if columns containing different data types are treated as text
    '  (note that columns containing only integer types are still treated as integer, etc)
    Dim TreatIntermixedAsText As Boolean = True

    ' Build the actual connection string
    Dim builder As New OleDb.OleDbConnectionStringBuilder()
    builder.DataSource = filename
    If Type = "Excel 5.0" OrElse Type = "Excel 8.0" Then
        builder.Provider = "Microsoft.Jet.OLEDB.4.0"
    Else
        builder.Provider = "Microsoft.ACE.OLEDB.12.0"
    End If
    builder("Extended Properties") = Type & ";HDR=" & (If(Header, "Yes", "No")) & ";IMEX=" & (If(TreatIntermixedAsText, "1", "0"))

    ' The "ACE" provider requires either Office 2007 or the following redistributable:
    '  Office 2007 Data Connectivity Components:
    '    http://www.microsoft.com/downloads/details.aspx?familyid=7554F536-8C28-4598-9B72-EF94E038C891&displaylang=en

    ' The "ACE" provider can be used for older types (e.g., Excel 8.0) as well.

    ' The connection strings used for Excel files are not clearly documented; see the following links for more information:
    '  Excel 2007 on ConnectionStrings.com:
    '    http://www.connectionstrings.com/excel-2007
    '  Excel on ConnectionStrings.com:
    '    http://www.connectionstrings.com/excel
    '  Microsoft OLE DB Provider for Microsoft Jet on MSDN:
    '    http://msdn.microsoft.com/en-us/library/ms810660.aspx
    '  KB247412 Methods for transferring data to Excel from Visual Basic:
    '    http://support.microsoft.com/kb/247412
    '  KB278973 ExcelADO demonstrates how to use ADO to read and write data in Excel workbooks:
    '    http://support.microsoft.com/kb/278973
    '  KB306023 How to transfer data to an Excel workbook by using Visual C# 2005 or Visual C# .NET:
    '    http://support.microsoft.com/kb/306023
    '  KB306572 How to query and display excel data by using ASP.NET, ADO.NET, and Visual C# .NET:
    '    http://support.microsoft.com/kb/306572
    '  KB316934 How to use ADO.NET to retrieve and modify records in an Excel workbook with Visual Basic .NET:
    '    http://support.microsoft.com/kb/316934

    Return builder.ConnectionString
End Function 
```

# mongodb - $push 嵌入文档数组

> ID：15407851
> 
> 赞同：2
> 
> 时间：2013-03-14T11:23:20.137
> 
> 标签：mongodb

我想将所有消息标记为“吉姆”已读。这是一个线程的结构：

```
db.threads.save({
    messages: [
        {
            read_by: ['bob', 'jim']
        },
        {
            read_by: ['bob']
        },
        {
            read_by: ['bob']
        }
    ]
}) 
```

如您所见，“jim”已经阅读了一条消息，其余的只有“bob”阅读。我想查找并修改任何嵌入的文档，以便将“jim”附加到`read_by`数组中。

这是我得到的地方：

```
db.threads.findAndModify({
    query: {
        'messages.read_by': {
            $ne: 'jim'
        }
    },
    update: {
        $push: {
            'messages.$.read_by': 'jim'
        }
    }
}) 
```

我收到此错误：

> 未捕获的异常：findAndModifyFailed 失败：“无法使用字符串字段名称 [$] 附加到数组”

该查询适用于 a所以我猜问题出在调用`db.threads.find()`的更新部分。`findAndModify()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T07:44:18.607

我知道已经有一段时间了，但是确实可以插入嵌套文档。您需要在其中添加每个。例如，

```
db.threads.update({
    'messages.read_by': {
        $ne: 'jim'
    }
},
{
    $push: {
        'messages.read_by': {
            $each: ['jim']
        }
    }
}
) 
```

有关更多示例，请参见此处 - [http://docs.mongodb.org/manual/reference/operator/update/push/](http://docs.mongodb.org/manual/reference/operator/update/push/)

即使您只传递一个值，对于嵌套数组，您也需要传递 $each。如果文档已经包含一个包含一些值的 read_by 字段，那么没有 each 的更新就可以了。无论该字段是否存在，使用 $each 都将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:17:14.500

通过一次操作，您还不能做到这一点。看到[这个问题](https://stackoverflow.com/questions/9611833/mongodb-updating-fields-in-nested-array)，这和你的一样。

您将不得不在您的应用程序中进行此类操作：`find()`jim 尚未阅读的所有消息，将他附加到它们，然后将`messages`线程的字段设置为该数组。

# django - django-hvad：编辑对象时在管理员中仅显示几个语言选项卡

> ID：15407856
> 
> 赞同：1
> 
> 时间：2013-03-14T11:23:26.093
> 
> 标签：django, django-hvad

使用 django-hvad 扩展，如果我在 admin 中编辑可翻译对象，我会在那里显示数十种语言。是否可以只保留两个（捷克语和英语）并删除所有其余的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:46:47.200

我发现它取决于变量[settings.LANGUAGES](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-LANGUAGES)。我通过在 settings.py 中定义变量来解决它：

```
LANGUAGES = (
    ('cs', 'Czech'),
    ('en', 'English'),
) 
```

# django - django admin：如何编写一个可重用的类，例如 admin 的地址

> ID：15407857
> 
> 赞同：0
> 
> 时间：2013-03-14T11:23:26.760
> 
> 标签：django, django-admin

比如说，我们正在创建一个网站，客户 ( `Customer`) 可以来为出版社 ( `PublishingHouse`) 打分。我们需要存储 和 的地址`Customer`，`PublishingHouse`所以我们创建一个这样的`Address`类：

```
class Address(models.Model):
  line1 = models.CharField(max_length=50)
  line2 = models.CharField(max_length=50)
  city = models.CharField(max_length=50)
  postal_code = models.CharField(max_length=6)
  country = models.CharField(max_length=50) 
```

然后我们的`Customer`和`PublishingHouse`类有对它的引用，像这样：

```
class Customer(models.Model):
  name = models.CharField(max_length=50)
  address = models.ForeignKey(Address)

class PublishingHouse(models.Model):
  name = models.CharField(max_length=50)
  website = models.URLField(max_length=4096)
  address = models.ForeignKey(Address) 
```

这适用于我在 django shell 中的交互式会话，但是当我为这些模型激活管理员时，有没有办法可以让字段`Address`出现在添加客户或添加出版社页面上？

我正在使用 django 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:25:20.310

您可能正在寻找[通用内联](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#using-generic-relations-as-an-inline)。根据记录的[示例](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#using-generic-relations-as-an-inline) `Address`将是您的`Image`模型

根据您的评论，您可以使用类继承：

```
class Address(models.Model):
    # fields

class DynamicAddress(Address):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey("content_type", "object_id")
    # etc 
```

您还可以使用`max_num`通用内联管理类上的属性限制（通用）内联。

# excel - 汇总子单元格内的信息 Excel 大纲级别 分组

> ID：15407858
> 
> 赞同：1
> 
> 时间：2013-03-14T11:23:27.423
> 
> 标签：excel, formatting, vba

我正在使用 Excel 大纲级别。数据看起来像这样。

![在此处输入图像描述](../Images/c629228c08ade3a335777eadcb18c9d9.png)

我需要红色文本是一个自动值（可能查看多个级别的子级），它将询问组记录的任何子记录并汇总数据。在这种情况下，您可以看到三个条件是： - 如果所有座位都没有被占用，则房间是空的，如果有空座位，则为部分座位，如果所有座位都已满。

你可以用公式来做到这一点还是我需要创建一个 VBA 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:39:06.813

在`C4`并假设 A 列是隐藏的，并在每个座位旁边注明房间：

```
=If(Countif(A:A, B4) - 1 = CountA(Offset(C4, 1, 0, Countif(A:A, B4) - 1)), "FULL", 
      If(0 = CountA(Offset(C4, 1, 0, Countif(A:A, B4) - 1)), "EMPTY", "PARTIAL")) 
```

**此外 ：**

以上两点，如果你还没有标记单元格`A4`，`Room A` 那么删除`- 1`.

同样，一旦为这个单元格完成了这些操作，只需复制并粘贴到其他单元格，它就会使用相对引用自动为您引用正确的单元格。

**如果转置：**

```
=If(Countif(1:1, B2) - 1 = CountA(Offset(B3, 0, 1, , Countif(1:1, B2) - 1)), "FULL", 
      If(0 = CountA(Offset(B3, 0, 1, , Countif(1:1, B2) - 1)), "EMPTY", "PARTIAL")) 
```

# android - Android mapquest 地理编码器国家设置

> ID：15407860
> 
> 赞同：0
> 
> 时间：2013-03-14T11:23:34.917
> 
> 标签：android, geocoding, mapquest

由于我拥有 mapquest（社区版）的应用程序密钥，所有地理编码请求最终都只在美国结束。在我进入应用程序之前，可以对欧洲位置进行地理编码。

我找不到设置默认国家/地区的方法。即使使用 Locale 初始化地理编码器对象也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:24:04.127

目前，mapquest Android API 不支持单行国际地理编码。

这是我从 mapquest 得到的回复：

> 我检查了我们的 Android API 仍在使用我们的 v1 地理编码器，它不支持单行国际地理编码。我的支持建议您首先使用我们的地理编码网络服务进行地理编码：http: [//developer.mapquest.com/web/products/dev-services/geocoding-ws](http://developer.mapquest.com/web/products/dev-services/geocoding-ws) 再次确保请求显示“v2”。

# c# - 在给定时区的情况下将 DateTime 转换为 Utc

> ID：15407863
> 
> 赞同：0
> 
> 时间：2013-03-14T11:23:37.383
> 
> 标签：c#, .net, datetime, utc

我不想每次更改夏令时时都必须更改配置。这是我目前正在做的，因为它使用“标准”时间而不起作用。

```
TimeZoneInfo timeZone = TimeZoneInfo.FindSystemTimeZoneById("US Eastern Standard Time")
TimeZoneInfo.ConvertTimeToUtc(dateTime, timeZone); // This doesn't take into account that it's daylight savings... 
```

是否有一种适合所有解决方案的尺寸。所以我可以给它一个日期时间和一个像“美国东海岸”这样的位置，它给我在UTC的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:28:07.603

我之前通过使用映射表将时区 id 存储在数据库中来完成它。即包含结果的表`TimeZone.GetSystemTimeZones()`

您实际上不需要使用 TimeZoneInfo。`FindSystemTimeZoneById()`但是：您可以使用`TimeZoneInfo.ConvertTimeBySystemTimeZoneId()`. 此方法有一些采用`DateTime`值的重载，以及一些采用`DateTimeOffset`值的重载（这是更可取的，因为它们指定了一个明确的时间点）。

例如

```
TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.Now, "New Zealand Standard Time", "UTC") 
```

使用系统时区 ID 而不是存储在数据库中的偏移量的真正好处是夏令时由`TimeZoneInfo.ConvertTimeBySystemTimeZoneId`.

这个 msdn 也可能对你有帮助>

[http://msdn.microsoft.com/en-us/library/bb382058.aspx](http://msdn.microsoft.com/en-us/library/bb382058.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-27T15:13:59.770

您可以传递位置的 DateTime 和 TimeZone 并将提供的 DateTime 转换为 UTC

在此处检查此[示例](https://rextester.com/ING80333)

```
 string DisplayName = "custom standard name here";//custom Standard Name to display eg: Kathmandu
       string StandardName = "custom standard name here"; // custom Standard Name eg: Asia/Kathamandu, Nepal
       string YourDate="27-03-2019 20:24:56"; // this DateTime doesn't contain any timeZone
       TimeSpan Offset = new TimeSpan(+5, 30, 00);// your TimeZone offset eg: timeZone of Nepal is +5:45
       TimeZoneInfo TimeZone = TimeZoneInfo.CreateCustomTimeZone(StandardName, Offset, DisplayName, StandardName);
       var RawDateTime = DateTime.SpecifyKind(DateTime.Parse(YourDate), DateTimeKind.Unspecified);// I all it RawDateTime Since it doesn't contain any TimeSpan
       DateTime UTCDateTime = TimeZoneInfo.ConvertTimeToUtc(RawDateTime, TimeZone);
       Console.WriteLine(UTCDateTime); 
```

# python - python if条件和“和”

> ID：15407871
> 
> 赞同：5
> 
> 时间：2013-03-14T11:24:03.327
> 
> 标签：python

```
 >>> def foo(a):
        print "called the function"
        if(a==1):
            return 1
        else:
            return None
>>> a=1

>>> if(foo(a) != None and foo(a) ==1):
    print "asdf"

called the function
called the function
asdf 
```

你好。我怎样才能避免在不使用额外变量的情况下调用该函数两次。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T11:26:15.630

您可以像这样链接比较

```
if None != foo(a) == 1: 
```

这就像

```
if (None != foo(a)) and (foo(a) == 1): 
```

除了它只评估 foo(a) 一次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T11:25:51.533

> 我怎样才能避免在不使用额外变量的情况下调用该函数两次。

在这里，您可以简单地替换

```
if(foo(a) != None and foo(a) ==1): 
```

和

```
if foo(a) == 1: 
```

`foo(a) != None`是多余的：如果`foo(a) == 1`，则保证不是`None`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:26:32.293

以下声明

```
if foo(a) == 1: 
```

将处理这两种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:43:50.703

如果 foo(a)==1 ，那么 foo(a) 不会是 None，

因此将您的代码简化为：

```
if foo(a):
    print('asdf') 
```

# java - 为Android提供假速度（例如Vehicle）

> ID：15407875
> 
> 赞同：1
> 
> 时间：2013-03-14T11:24:16.907
> 
> 标签：java, android, accelerometer

我需要伪造手机在车内的移动速度——（没有加速度计）。

我需要能够按手机上的按钮“启动引擎”、“停止引擎”，然后按“加速”、“减速”之间的某个位置。

我是 Android 新手，因此我们将不胜感激任何帮助。干杯

编辑：

我的意思是 UI 按钮。我需要告诉手机它正在移动，即使它没有移动。所以像可能在循环中发送假 GPS 坐标之类的东西？？？但是那我该如何改变速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:40:01.843

如果您谈论的是可以实际按下的**物理按钮**，那么您可以使用具有**android.media.VOLUME_CHANGED_ACTION**过滤器的**BroadcastReceiver**在按键时执行您想做的任何事情。但是，我认为您无法仅通过上下音量来管理那么多动作。如果您正在谈论 UI 上的按钮，那么只需将按钮放在 UI 上并使用**每个按钮的 OnClickListener**来执行您想要的操作。

# sql - SQL 检索第一个匹配行

> ID：15407876
> 
> 赞同：0
> 
> 时间：2013-03-14T11:24:18.660
> 
> 标签：sql, sql-server, tsql, join

我有一个有两个表的数据库。一个`Call_Info`表，其中包含有关传入/传出呼叫的详细信息，并具有一个名为 的唯一 ID `Call_ID`。我有第二个表，它被链接并称为该`After_Call_Work`表。

每次通话将只有一个通话后工作记录。数据集有点混乱，对于同一个呼叫，偶尔会有 3 或 4 个后呼叫工作记录。在进行查询时，我怎样才能只检索该特定呼叫的最早的呼叫后工作记录而忽略其余的？我想象使用 SQL 函数 First_Value 但它似乎不是正确的。

使用 Microsoft SQL Server 2012。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:27:47.267

这可以通过利用`Window Function`

```
WITH call_List
AS
(
    SELECT  Call_ID, OtherColumns, DateColumn,
            ROW_NUMBER() OVER (PARTITION BY Call_ID ORDER BY DateColumn ASC) rn
    FROM    After_Call_Work 
)
SELECT  a.*, b.OtherColumns, b.DateColumn
FROM    Call_Info a
        INNER JOIN call_List b
            ON a.Call_ID = b.Call_ID
WHERE   b.rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/bde84/1)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:28:34.853

你应该可以使用`select top`，像这样：

```
SELECT TOP 1
FROM call_info ci JOIN after_call_work acw ON ci.call_id=acw.call_id
ORDER BY acw.work_time DESC
WHERE ci.call_id=<your_call_id> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:53:55.387

```
 WITH g AS (SELECT ROW_NUMBER() OVER (PARTITION BY callid 
ORDER BY date ASC) AS row,* from after_call_work
select * from call_info cinfo inner join g on 
cinfo.callid = g.callid and g.row=1 
```

# java - 尝试使用字符串作为键和双倍作为值在java中创建哈希表

> ID：15407881
> 
> 赞同：3
> 
> 时间：2013-03-14T11:24:42.260
> 
> 标签：java, string, double, hashtable

在以下程序中：

```
import java.util.*;

public class HashTableStringdouble
{
//  private Hashtable<String, double[]> model  = new Hashtable<String, double[]>();;
    private Hashtable<String, double> model  = new Hashtable<String, double>();;                // this does not work

    public static void main(String args[])
    {
    }
} 
```

有 double[] 有效，但不能加倍。它给出了以下错误：

*HashTableStringdouble.java:7: 错误: 意外类型私有 Hashtable 模型 = new Hashtable();; // 这不起作用 ^ 必需：找到参考：double HashTableStringdouble.java:7：错误：意外类型 private Hashtable model = new Hashtable();; // 这不起作用 ^ 必需：找到参考：双 2 错误*

我不确定我在这里做错了什么。请解释哈希表是如何工作的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T11:26:02.147

您不能将原语用作 Hashtable 中的键或值，您需要使用对象。例如，它将与`Double`而不是一起工作`double`。它使用的原因`double[]`是数组是 Java 中的对象。

此外，Hashtable 有点过时，在大多数情况下首选[HashMap ：](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)

```
private Map<String, Double> model  = new HashMap<String, Double>();
//or if you use Java 7+
private Map<String, Double> model  = new HashMap<>(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T11:26:44.800

1.  不要使用`Hashtable`; 使用`HashMap`. `Hashtable`是 Java 1.0 的遗留物，在 Collections Framework 时代之前。
2.  这不是关于地图在 Java 中的工作方式，而是 Java 的一般工作方式。您不能在任何地方用原始类型替换引用类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T11:26:30.923

尝试使用 Double 类而不是“本机”双

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T11:31:37.053

1.  您不能在`Collection`s 中使用原始类型。`Collection`s 只能包含`Object`类型的后代。如果您需要带有原语的集合，您应该看看这个问题：[最有效的 Java 原语集合库](https://stackoverflow.com/questions/3307622/java-primitive-collections-library)。

2.  使用`HashMap`，不使用`Hashtable`。如果您确定需要同步集合，请查看`Collections.synchronizedMap()`. 例如：

    地图模型 = Collections.synchronizedMap(new HashMap());

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T11:28:52.117

使用包装类。这就是为什么首先发明它们的原因之一。

```
private Hashtable<String, Double> model  = new Hashtable<String, Double>(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T11:30:27.930

```
import java.util.*;

public class HashTableStringdouble
{
  private Hashtable<String, Double> model  = new Hashtable<String, Double>();

    public static void main(String args[])
    {
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T11:51:26.607

使用`Double`而不是`double`. 在通用原始数据类型中是不允许的
，并且不要忘记标记您已接受的正确答案。欢迎来到stackoverflow。如果你使用`double[]`那么这意味着这是双数组`object`（只有对象可以在泛型中）并且当你使用`double`它时意味着原始双

# javascript - Javascript 从 URL 下载图像

> ID：15407884
> 
> 赞同：0
> 
> 时间：2013-03-14T11:24:47.847
> 
> 标签：javascript, web, download

我有一个问题：我想从这个网站下载图片：

[http://www.oasidelleanime.com/minisiti/raccontastorie/Fascicolo1/index.htm](http://www.oasidelleanime.com/minisiti/raccontastorie/Fascicolo1/index.htm)

我可以保存页面，但有一个问题：您在我链接的页面中看到的图像只是缩略图。我需要下载“真实”图像，即单击缩略图时打开的图像。我的问题是：我可以使用任何脚本，这样我就不必手动打开所有图像（这很痛苦，说实话）？

我最好的问候， *亚历山德罗*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:39:28.857

如果您通过脚本表示 javascript，那么简短的答案是否定的。这是因为一个称为跨站点脚本的安全漏洞。维基百科有一篇关于它的文章，见 [http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

但是可以使用 wget 下载带有 shellscript 的图像。以下脚本可能有效：

```
#! /bin/bash
# use this script for downloading websites using 'wget' utility
# replace URL field with the URL to be downloaded

URL="$1"

wget -Nrkpl 0 $URL

# wget flags and their functions
# -r = recursive: follows the links
# -k = changes links adresses to their local file adress
# -p = downloads images
# -l = recursion level. 0 for infinite. 
```

# java - 如何在更多 HTTP 请求中缓存 Spring MVC Web 应用程序中的数据？

> ID：15407886
> 
> 赞同：0
> 
> 时间：2013-03-14T11:24:59.880
> 
> 标签：java, spring, jakarta-ee, caching, spring-mvc

在我的一个网页（Spring MVC Web 应用程序）中，我以多种形式（表格、图表和另一个表格）显示数据。因为我通过 Ajax 请求加载页面内容，所以我不想在每个请求上加载相同的数据。数据属于一个特定的登录用户。

Spring框架中是否有一些合适的技术/缓存处理程序如何处理这种数据？我可以为此目的使用`javax.servlet.http.HttpSession`对象，但我让我想知道是否有更好的技术。

**编辑：**与此同时，我发现可以`session`在我的 bean 的定义中定义范围，我认为这是我需要的，不是吗？

```
<bean id="pageDataCache" class="controller.utils.PageDataCache" scope="session">  
<aop:scoped-proxy/>  
</bean> 
```

因此将为每个 HTTP 会话创建一个新实例并存储数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T19:40:41.417

我认为您正在寻找[Spring 缓存](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)。Spring 缓存是一种缓存抽象，可以由任何实际的缓存提供程序实现，例如 ehcache、memcache 或普通的旧 Java 并发哈希映射。它与 Spring 框架的其余部分很好地集成在一起。

# excel - Excel 工作簿没有响应

> ID：15407888
> 
> 赞同：1
> 
> 时间：2013-03-14T11:25:10.953
> 
> 标签：excel

我正在使用 Excel 2010，并且在使用 Excel 2003 中创建的一个旧工作簿时遇到了困难。要报告很多症状！

没有其他工作簿给我这个问题。此问题文件通常会导致“MS Excel -（工作簿名称.xls）[兼容模式]（无响应）和一个空白屏幕，除了任务栏和此 Excel 消息在屏幕顶部的单行上。等待不会” t 解决问题。如果我关闭 Excel 并选择“关闭程序”选项，它有时会显示我记得的文件几秒钟，然后程序关闭。重新打开文件只是再次给出相同的行为. 在加载的最初几秒钟内，我可以在 Excel 屏幕底部看到消息“正在联系服务器获取信息”。

在任务管理器中，我可以找到正在运行的 EXCEL.EXE *32。我正在使用 Windows 7 Pro 64 位。

这是我在项目中经常使用的一个文件，作为专门的计算器，所以我每次都重新复制并保存，以便将计算记录保存在项目文件中。我发现甚至几年前创建的工作簿版本并且直到现在都没有遇到这个问题，所以它看起来像是 Excel 2010 的问题。这是我第一次尝试打开这些文件，因为从运行 Excel 2003 的 Win XP 计算机迁移。

请问谁能帮我打开文件并解决问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:48:26.613

启动时可能会激活计算或宏，从而使事情变得混乱。

尝试以下操作：

打开 Excel 应用程序，其中包含一个空白工作簿。将计算设置为手动。现在查看您的宏设置并将其设置为“禁用通知”。

设置好这些东西后，再次打开行为不端的工作簿，看看现在会发生什么。不要让宏（如果有的话）开始！打开 VBA 编辑器窗口并检查工作簿中名为 Workbook_Open 的脚本。如果存在，请检查其内容或中断并调试它。

让我们知道您发现了什么，如果有的话。

**更新：** 听起来有一个外部源的数据库链接试图在启动时刷新但不能正常工作（不再）。我现在记得当我有一个包含大量 SQL 查询的 Excel 工作簿时的类似行为（如果通过应用显示完整的表或视图`SELECT * FROM ...`）可能会与其他数据重叠，并且会为我创建自动关闭。当您打开此工作簿并让我们知道时，将外部内容信任中心中的选项更改为禁用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T11:19:40.587

我有一个客户也有同样的问题。通过从工作表中删除所有徽标（图像）解决了该问题。该徽标似乎包含指向某个网站的链接。我将徽标复制到油漆中并将其复制回来。

问题解决了！

似乎放置在工作表中的对象可以嵌入自己的链接？？？

我希望这有帮助！

# php - 获取帖子格式

> ID：15407890
> 
> 赞同：0
> 
> 时间：2013-03-14T11:25:14.117
> 
> 标签：php, wordpress

我需要使用类别名称作为 H1 的类，并且还需要排除类别 2。所以我将下面的 PHP 代码拼凑在一起。它工作正常，除了帖子失去了它的格式。我知道这`get_post_format()`是应用格式的原因，但是当我添加它时，它似乎没有做任何事情。任何帮助将不胜感激，谢谢。

```
<?php while ( have_posts() ) : the_post();
    $excludedcats = array(2);
    $count = 0;
    $categories = get_the_category();
    foreach($categories as $category)
    {
        $count++;
        if ( !in_array($category->cat_ID, $excludedcats) )
            {
             echo '<h1 class="category-heading ' . sprintf( __( "heading-%s" ), $category->slug ) . '" >';

             if( $count != count($categories) )
                 {
            echo " ";
             }

        }
    } 
single_post_title();
echo '</h1>';
the_content(); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T18:46:16.287

`get_post_format()`不应用格式；它只返回帖子类型，然后您可以使用它来应用格式。为了为不同的帖子类型提供不同的格式，您可以执行以下操作：

```
<?php
    get_template_part( 'content', get_post_format() );
?> 
```

然后您需要另一个文件，`content-[post-type-slug].php`（例如，对于图像帖子，该文件将被称为`content-image.php`），您可以在其中显示帖子。您也可以只在返回值上使用 switch 语句，`get_post_format()`但这可能会变得混乱。

# php - 无法解决这个复杂的正则表达式

> ID：15407894
> 
> 赞同：1
> 
> 时间：2013-03-14T11:25:20.393
> 
> 标签：php, regex

我有一些像下面这样的例子。我需要的是删除特定行的计时部分。例如来自：

> 欧联杯联播 8.00am-10.00am

我只需要：

> 欧联杯联播

我是正则表达式的新手。有人可以指导我。

以下是我正在使用的一些示例字符串：

*   Uefa Europa League 8 联播 8.00am-10.00Am
*   MLB：芝加哥白袜队 - 洛杉矶天使队 8.00PM-11.00AM
*   MLB 春季赛：洛杉矶道奇队的芝加哥小熊队 8.00aM-11.00PM
*   现场测试板球新西兰对英格兰：第二次测试第二天上午 9:00 至上午 5:00
*   UEFA 欧洲联赛精彩集锦 10.00pm-11.00pm

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:32:35.080

```
<?php

$str = array("Uefa Europa League Simulcast 8.00am-10.00Am",
"MLB: Chicago White Sox at Los Angeles Angels 8.00PM-11.00AM",
"MLB Spring: Chicago Cubs at Los Angeles Dodgers 8.00aM-11.00PM",
"Live Test Cricket New Zealand v England: Second Test Day Two 9:00am-5:00am",
"UEFA Europa League Hightlights 10.00pm-11.00pm");

foreach ($str as $s) {
   $new = preg_replace('/\s*\d?\d[\.\:]\d\d[ap]m-\d?\d[\.\:]\d\d[ap]m\s*$/i', '', $s);
   echo "$new\n";
} 
```

输出

```
Uefa Europa League Simulcast
MLB: Chicago White Sox at Los Angeles Angels
MLB Spring: Chicago Cubs at Los Angeles Dodgers
Live Test Cricket New Zealand v England: Second Test Day Two
UEFA Europa League Hightlights 
```

的解释`/\s*\d?\d[\.\:]\d\d[ap]m-\d?\d[\.\:]\d\d[ap]m\s*$/i`

*   `\s*`表示零个或多个空格
*   `\d?`表示一位或零位
*   `\d`表示一个数字
*   `[\.\:]`意味着`.`或`:`
*   `[ap]`意味着`a`或`p`
*   `$`表示字符串结束
*   `/.../i`表示不区分大小写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:38:20.430

不需要正则表达式 - 您可以在最后一个空格处修剪字符串：

```
<?php

$str = array(
    "Uefa Europa League Simulcast 8.00am-10.00Am",
    "MLB: Chicago White Sox at Los Angeles Angels 8.00PM-11.00AM",
    "MLB Spring: Chicago Cubs at Los Angeles Dodgers 8.00aM-11.00PM",
    "Live Test Cricket New Zealand v England: Second Test Day Two 9:00am-5:00am",
    "UEFA Europa League Hightlights 10.00pm-11.00pm"
);

foreach ($str as $s) {
    $trimmed = substr($s, 0, strrpos($s, ' '));
    echo "$trimmed\n";
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:38:35.480

正则表达式只匹配正则字符串，所以让我们分解您提供的示例字符串并寻找一些规律性：

```
8.00am-10.00Am
8.00PM-11.00AM
8.00PM-11.00AM
8.00PM-11.00AM
10.00pm-11.00pm 
```

所以我可以看到：

*   它总是以一位或两位数字开头。这可以表示为`\d{1,2}`
*   这后跟一个点`.`或冒号`:`。这可以表示为`[.:]`
*   这总是后跟 2 位数字：`\d{2}`
*   然后是字符串`AM`或`PM`不区分大小写。要使用不区分大小写，我们可以`i`对整个模式使用修饰符，所以我们只需要匹配`am`or `pm`，写成`(am|pm)`。这将表现为一个捕获组，我们不需要捕获，因此我们可以使用`(?:am|pm)`非捕获组优化表达式
*   然后是破折号`-`，这可以从字面上表达
*   然后重复模式的第一部分。

所以当我们把它们放在一起时，我们得到：

```
/\d{1,2}[.:]\d{2}(?:am|pm)-\d{1,2}[.:]\d{2}(?:am|pm)/i 
```

但是等等......这将在主题字符串的末尾留下尾随空格。好吧，我们可以`trim()`把它关掉，但我们也可以让正则表达式为我们处理这个问题，方法是预先添加`\s*`到模式中。

```
/\s*\d{1,2}[.:]\d{2}(?:am|pm)-\d{1,2}[.:]\d{2}(?:am|pm)/i 
```

所以现在我们只需要用一个空字符串替换任何匹配这个模式的东西。您可以在 PHP 中使用以下命令执行此操作`preg_replace()`：

```
$pattern = '/\s*\d{1,2}[.:]\d{2}(?:am|pm)-\d{1,2}[.:]\d{2}(?:am|pm)/i';
$string = 'Uefa Europa League Simulcast 8.00am-10.00Am';

$string = preg_replace($pattern, '', $string);

var_dump($string); 
```

[看到它工作](http://codepad.org/LlmkmPKa)

# c# - MachineKey.Protect/Unprotect 的非 ASP.Net 等效项

> ID：15407895
> 
> 赞同：2
> 
> 时间：2013-03-14T11:25:25.637
> 
> 标签：c#, .net-4.5

`System.Web.Security`在命名空间之外是否有一种简单易用的加密/解密方法`MachineKey.Protect/MachineKey.Unprotect()`？

或者有谁知道您是否可以在 ASP.Net 之外进行设置，因为我的快速试用表明它似乎在应用程序重新启动之间生成了一个新密钥或其他东西，这意味着您无法在应用程序重新启动之间解密任何内容。

我可以使用适当的类自行开发，我只是想知道他们是否最终提供了更简单的 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T13:15:21.977

我也在寻找这个。在花了几个小时挖掘之后，我发现[`System.Security.Cryptography.ProtectedData`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28v=vs.80%29.aspx). 用法非常相似，只是您需要提供范围。这是最好的部分：它可从 .NET 2.0 获得。

希望有一天这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:28:25.930

asp.net 中的 MachineKey 每次启动时都会自动生成。要解决此问题，您可以显式[设置 MachineKey](https://web.archive.org/web/20140804110856/http://aspnetresources.com/tools/machineKey)。

当然，如果该进程与您的潜在黑客在同一台机器上运行，那么这一切都毫无意义。

# c# - 无法使用 C#/.NET 中的服务帐户在 Google 驱动器中授权

> ID：15407898
> 
> 赞同：0
> 
> 时间：2013-03-14T11:25:39.667
> 
> 标签：c#, .net, certificate, google-drive-api, google-api-dotnet-client

我正在尝试使用 Windows 应用程序或服务中的 Google 驱动器。

我不需要 Web App、MVC 等。

系统必须自动运行，没有任何用户入侵，所以我创建了服务帐户并获取证书和电子邮件。

而且，当然，下载了最后一个客户端库 - [http://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/)

我在文档中构建服务对象：

```
 private const string SERVICE_ACCOUNT_EMAIL = "xxx@developer.gserviceaccount.com";
    private const string SERVICE_ACCOUNT_PKCS12_FILE_PATH = @"xxx-privatekey.p12";

    /// <summary>
    /// Build a Drive service object authorized with the service account.
    /// </summary>
    /// <returns>Drive service object.</returns>
    static DriveService BuildService ( )
    {
        X509Certificate2 certificate = new X509Certificate2 ( SERVICE_ACCOUNT_PKCS12_FILE_PATH, "notasecret",
            X509KeyStorageFlags.Exportable );

        var provider = new AssertionFlowClient ( GoogleAuthenticationServer.Description, certificate )
        {
            ServiceAccountId = SERVICE_ACCOUNT_EMAIL,
            Scope = DriveService.Scopes.Drive.GetStringValue ( ),
            ServiceAccountUser = "myemail@gmail.com",
        };
        var auth = new OAuth2Authenticator<AssertionFlowClient> ( provider, AssertionFlowClient.GetState );
        return new DriveService ( auth );
    } // BuildService 
```

然后我这样做：

```
service = BuildService ( );
FilesResource.InsertMediaUpload request = service.Files.Insert ( body, stream, mimeType );
request.Upload ( );
File file = request.ResponseBody; 
```

我在上传方法中遇到异常 - 未知对象标识符 (OID)。我找到了引发此异常的命令：

字符串签名 = UnpaddedUrlSafeBase64Encode (Key.SignData (Encoding.ASCII.GetBytes(assertion.ToString()), "SHA256"));

这在 Google.Apis.Authentication.OAuth2.dll、文件 AssertionflowClient.cs、方法 GenerateMessage 中。

但谷歌证书只有 SHA1 算法。从证书信息窗口可以看出这一点： X509Certificate2UI.DisplayCertificate ( certificate ); 或从窗户。

我尝试使用 SHA1: String signature = UnpaddedUrlSafeBase64Encode ( Key.SignData ( Encoding.ASCII.GetBytes ( assertion.ToString ( ) ), "SHA1" ) );

之后这个异常消失了，但我得到了 HTTP 错误 400（无效请求）。如何使用服务帐户使用 Google 驱动器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:50:07.493

在您的代码中删除

```
ServiceAccountUser = "myemail@gmail.com", 
```

或转到谷歌应用域的管理控制台并授权您的服务帐户。

然后它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:59:37.967

您是否按照[OAuth2 服务帐户](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2?ts=1363783899&updated=OAuth2#Service_Accounts)页面中的说明生成新密钥？

您可以尝试其他服务请求吗，可以说没有媒体上传的插入请求（InsertRequest Insert(Google.Apis.Drive.v1.Data.File body) - 如果其他方法也不适用于您，请告诉我。

请注意，在[服务帐户文档](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingheader)中它说：“服务帐户依赖于 RSA SHA256 算法和 JWT 令牌格式”。这是支持的算法，而不是 SHA1。

# jquery - 在跨域 iFrame 中触发点击

> ID：15407899
> 
> 赞同：5
> 
> 时间：2013-03-14T11:25:43.837
> 
> 标签：jquery, iframe

我想在跨域 iframe 中触发点击事件。

对于视频嵌入，我们使用图像作为这些 iframe 的封面。单击图像时，会加载 iframe。此视频嵌入没有可以使用的自动播放功能，因此我们需要单击加载的嵌入来启动视频。

我们想要单击图像，加载视频嵌入（iframe）并使用 jQuery 再次单击该 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-27T09:55:12.777

```
window.focus();//force focus on the currenct window;

window.addEventListener('blur', function(e){
    if(document.activeElement == document.getElementById('your_iframe_id'))
    {
        //do your stuff
    }
});

    $('your_iframe_id').mouseleave(function(){
        window.focus();
    });// double check when mouse out of iframe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T10:11:30.833

这是一种执行方式：

```
window.focus();
window.addEventListener('click', function(e){
 if(document.activeElement == document.getElementById('ve-panel-iframe'))
 {
    alert(1);
 }
}); 
```

# android - Android 手机在下载视频 (mp4) 文件时崩溃

> ID：15407900
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:25:47.097
> 
> 标签：android, asynchronous, download, task, mp4

我希望我的应用程序从 url 下载视频。现在我想将下载文件写入我的 SD 卡。

我尝试了一些不同的脚本，但没有收到`android.os.NetworkOnMainThreadException`异常。但是我的应用程序崩溃了。 [在 Android 上以编程](https://stackoverflow.com/questions/1714761/downaload-a-file-programatically-on-android) [方式下载文件 在 android 中以编程方式从网络下载文件的最佳方法是什么？](https://stackoverflow.com/questions/4896457/what-is-best-way-to-download-files-from-net-programatically-in-android)

有谁知道如何创建一个工作方法？要解决此异常，它必须是异步任务。

```
public static void downloadFile(String url, File outputFile) {
        try {
              URL u = new URL(url);
              URLConnection conn = u.openConnection();
              int contentLength = conn.getContentLength();

              DataInputStream stream = new DataInputStream(u.openStream());

                byte[] buffer = new byte[contentLength];
                stream.readFully(buffer);
                stream.close();

                DataOutputStream fos = new DataOutputStream(new FileOutputStream(outputFile));
                fos.write(buffer);
                fos.flush();
                fos.close();
          } catch(Exception e) {
              Log.e("theple", "" + e);
          } 
    } 
```

日志：

```
03-14 12:09:46.535: E/theple(6987): android.os.NetworkOnMainThreadException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T05:37:58.820

有很多方法可以执行下载，尽管为它创建了一个方法，但你应该使用**“线程、异步类或服务”**，那个错误“**主线程上的网络**来自于进程正在花费时间”。

我正在展示使用**异步任务**和 **服务的示例**

*

```
*class DownloadFile extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... sUrl) {
        try {
            URL url = new URL(sUrl[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100% progress bar
            int fileLength = connection.getContentLength();
            // download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/file_name.extension");
            byte data[] = new byte[1024];
            long total = 0;
            int count;

            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                publishProgress((int) (total * 100 / fileLength));
                output.write(data, 0, count);
            }
            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
        }
        return null;
    }** 

And With Service 

you can use : 

   class DownloadService extends IntentService {
        public static final int UPDATE_PROGRESS = 8344;
        public DownloadService() {
            super("DownloadService");
        }
        @Override
        protected void onHandleIntent(Intent intent) {
            String urlToDownload = intent.getStringExtra("url");
            ResultReceiver receiver = (ResultReceiver) intent.getParcelableExtra("receiver");
            try {
                URL url = new URL(urlToDownload);
                URLConnection connection = url.openConnection();
                connection.connect();
                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();
                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream("/sdcard/BarcodeScanner-debug.apk");
                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    Bundle resultData = new Bundle();
                    resultData.putInt("progress" ,(int) (total * 100 / fileLength));
                    receiver.send(UPDATE_PROGRESS, resultData);
                    output.write(data, 0, count);
                }
                output.flush();
                output.close();
                input.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            Bundle resultData = new Bundle();
            resultData.putInt("progress" ,100);
            receiver.send(UPDATE_PROGRESS, resultData);
        }
    } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:04:56.687

我让它工作了，谢谢你的帮助。

我的代码：

```
public class FileDownloader extends AsyncTask<String, Integer, String>
{

    @Override
    protected String doInBackground(String... params)
    {
        try {
              URL u = new URL(params[0]);
              URLConnection conn = u.openConnection();
              int contentLength = conn.getContentLength();

              DataInputStream stream = new DataInputStream(u.openStream());

                byte[] buffer = new byte[contentLength];
                stream.readFully(buffer);
                stream.close();

                DataOutputStream fos = new DataOutputStream(new FileOutputStream(new File(params[1])));
                fos.write(buffer);
                fos.flush();
                fos.close();
          } catch(Exception e) {
              Log.e("theple", "" + e);
          } 
        return null;
    }
} 
```

# java - 用于发送文件的网络方法

> ID：15407901
> 
> 赞同：0
> 
> 时间：2013-03-14T11:25:50.527
> 
> 标签：java, web-services, file

我有一个网络服务，我希望客户端通过网络方法在服务器上发送一个文件，然后读取客户端发送的文件。

网络方法是这样的：

```
@WebMethod(operationName = "getfile")
public void getfile(@WebParam(name = "getfile") DataHandler dh) throws IOException {

    InputStream in = dh.getInputStream();
    StringWriter writer = new StringWriter();
    org.apache.commons.io.IOUtils.copy(in, writer, "UTF-8");
    String theString = writer.toString();
    System.out.println(theString);

} 
```

客户端从这里调用该方法：

```
public static void main (String args[]) throws IOException, IOException_Exception{

    SOAPService service = new SOAPService();
    SOAPProxy = service.getGetXMLPort();
    File file = new File("C:\\Users\\manos\\Downloads\\manos.txt");
   FileDataSource fd = new FileDataSource(file);
   DataHandler datahandler = new DataHandler(fd);
   InputStream in = datahandler.getInputStream();
   byte [] array = org.apache.commons.io.IOUtils.toByteArray(in);
   SOAPProxy.getfile(array);

} 
```

但我在 SOAPProxy.getfile(array); 行中得到了 NullPointerException

**这是错误：**

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: java.lang.NullPointerException
at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178)
at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:111)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
at $Proxy32.getfile(Unknown Source)
at com.mantsap.getxmlclient.SOAPClient.main(SOAPClient.java:25) 
```

Java 结果：1

**数组的长度是 8**！我做了一个system.out来确定。

文件 manos 只是一个文本文件。

提前致谢。：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:48:33.070

可能有以下任何原因..

1.  您可能没有发送端口或配置文件。
2.  服务本身可能会返回 null 以便出现异常。

# gcc - 未定义对 wl_dispatch_display_que_pending 的引用

> ID：15407904
> 
> 赞同：1
> 
> 时间：2013-03-14T11:26:00.033
> 
> 标签：gcc, gtk, undefined-reference

我是 gtk+ 的新手，我正在尝试使用 gtk3 在屏幕上放置一个窗口。我的源文件是 win.c，我尝试使用它来编译它

```
$ gcc win.c $(pkg-config --cflags --libs gtk+-3.0) -o win.o 
```

但我得到的是：

```
/lib64/libEGL.so.1: undefined reference to `wl_display_dispatch_queue_pending'
collect2: error: ld returned 1 exit status 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:09:15.843

您可以执行以下命令：

```
yum update libwayland* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:44:34.413

wl_display_dispatch_queue_pending 似乎与 Wayland 有关，Wayland 是由 Xorg 服务器的继任者实现的协议。问题是：你为什么要为 Wayland 建设？

# jquery - JQuery CSS ！重要，点击更改 css

> ID：15407907
> 
> 赞同：0
> 
> 时间：2013-03-14T11:26:06.280
> 
> 标签：jquery, css, menu, toggleclass

我有一个下拉菜单，在单击按钮时位于页面外（负边距）我希望向下推页面并显示菜单。我正在使用 CSS3 来实现这一点并让它正常工作。

我对菜单的下一步是使其更具动态性，我想使用 JQuery 来设置边距值，以便无论（我的菜单）列表中有多少项目，边距都会相应地更新。

我已经非常接近这项工作了，我已经掌握了所有数学知识，但是在切换 css 类以更改高度时遇到了问题。为了让课程覆盖我当前的样式，我需要使用 !important 规则（皱眉，我讨厌它！），首先我在使用 JQuery 的 !important 规则时遇到了麻烦（我已经阅读了关于这）但理想情况下，我想要一种方法来实现相同的目标，而不必使用！重要，有人有什么想法吗？

我要切换的课程是 .body-change

下面的代码：

```
<div id="menu">
    <ul>
        <li><a href="#home" class="contentLink">Guide</a></li>
        <li><a href="#home" class="contentLink">Contents</a></li>
        <li><a href="#home" class="contentLink">Calculator</a></li>
    </ul>
</div>

.body-change{margin-top:141px !important}
.ui-page-active{
    -webkit-transition: margin-top 0.35s linear;  
    -moz-transition: margin-top 0.35s linear;
    -o-transition: margin-top 0.35s linear; 
    -ms-transition: margin-top 0.35s linear;  
    transition: margin-top 0.35s linear;
}

$(function() {  
    var numItems = $("#menu ul").children().length,
        height = $('#menu ul li').outerHeight(),
        margin = numItems * height; 
        console.info('Margin is ' + margin + 'px');

        // Toggle menu 
        $('#menu').css('margin-top', -margin)
        $('.body-change').css('margin-top', margin)

        $("#sidemenu").on('click', function() {   
            $(".ui-page-active").toggleClass("body-change");
        });  

}); 
```

如 JQuery 所示，我在加载时将菜单的边距设置为正确的负值。然后我切换类 body-change，我需要做的是在 JQuery 中设置 body 更改的 css，但我很难做到这一点，因为需要使用 !important 规则..

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:56:41.230

一旦我遇到同样的问题，试试这个：

```
$("#SomeElement").css("cssText", "height: 650px !important;"); 
```

重要的是说我不知道​​它是否是跨浏览器解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T15:33:46.763

不确定您是否已经弄清楚了，但是由于尚未得到答复，因此我将发布我所做的。

```
var bodyChange = $('.body-change');
var style = bodyChange.attr('style') + ' margin-top:' + margin + 'px !important;';
bodyChange.attr('style', style); 
```

# android - 适用于 Android 应用的 TestFlight

> ID：15407908
> 
> 赞同：0
> 
> 时间：2013-03-14T11:26:09.170
> 
> 标签：android, testflight

TestFlight 团队已经开始除了 iOS 之外的 Android 服务。

我有点不愿意转向 TestFlight，因为 Android 测试系统非常简单：构建 APK 并将其分发给每个人。没有像测试 iOS 时那样的 UDID 复杂性。

有人能告诉我切换到 TestFlight for Android 的优缺点是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-31T12:25:34.497

我们为 IOS 和 Android 使用 testflight。

我们的主要优势：

*   IOS和安卓的流程一样
*   制作分发列表，控制您将应用分发给谁

缺点（对我们来说）：

*   用户需要创建一个 testflight 帐户
*   偶尔出现的服务问题（上传/下载缓慢、停机等）

我们自动将构建发送到 testflight（[https://wiki.jenkins-ci.org/display/JENKINS/Testflight+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Testflight+Plugin) / 免责声明我维护该插件），并且在内部我们所有的团队成员都可以访问任何版本。在具有多个产品和版本的分布式环境中，它非常实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:36:34.447

TestFlight 说，

`Android developers and testers can now enjoy the benefits of TestFlight including beta management, distribution, tracking, and centralized feedback. TestFlight’s goal is to streamline the beta-testing process so developers can spend time building better apps versus building tools to manage their beta-testing.`

# c# - 在 64 位 office 插件中加载 32 位 COM dll

> ID：15407912
> 
> 赞同：4
> 
> 时间：2013-03-14T11:26:11.780
> 
> 标签：c#, excel, com, ms-office, 32bit-64bit

我想实现一件事。我想使用 Excel 插件中的 32 位 COM 类型库。请注意，我的机器上安装了 64 位 excel 2010。我已经编译了 32 位的插件。但是当我创建一个 COM 类的实例时，它给出了这个错误“检索具有 CLSID 的组件的 COM 类工厂失败，由于以下错误类未注册”这可能是我想要做的吗？有什么建议（除了使用其他版本的 Excel 或 1 64 位 COM 类型库）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:00:40.830

这就像一个魅力 gfi.com/blog/32bit-object-64bit-environment

# c# - C# 电话号码接收器

> ID：15407914
> 
> 赞同：1
> 
> 时间：2013-03-14T11:26:17.970
> 
> 标签：c#, modem

我正在尝试构建一个简单的应用程序，该应用程序通过调制解调器返回呼叫号码，但是我似乎只获得了从调制解调器接收到的数据的第一行。

当我运行超级终端并通过 AT#CID=1 命令时，拨打号码，我得到完整的输出：

好的

日期=0314

时间=1111

NMBR=4936

姓名=斯图尔特 E

戒指

在我的应用程序中，我似乎只收到包含“OK”部分的第一部分。对我做错了什么或遗漏有任何帮助吗？

代码：

```
 public partial class Form1 : Form
 {
    public SerialPort port = new SerialPort("COM3", 115200,Parity.None,8,StopBits.One);
    public String sReadData = "";
    public String sNumberRead = "";
    public String sData = "AT#CID=1";

    public Form1()
    {
        InitializeComponent();
    }

    private void btnRun_Click(object sender, EventArgs e)
    {
        SetModem();

        ReadModem();

        MessageBox.Show(sReadData);
    }

 public void SetModem()
    {

        if (port.IsOpen == false)
        {
            port.Open();
        }

        port.WriteLine(sData + System.Environment.NewLine);
        port.BaudRate = iBaudRate;
        port.DtrEnable = true;
        port.RtsEnable = true;

    }

    public string ReadModem()
    {

        try
        {
            sReadData = port.ReadExisting().ToString();

            return (sReadData);
        }
        catch (Exception ex)
        {
            String errorMessage;
            errorMessage = "Error in Reading: ";
            errorMessage = String.Concat(errorMessage, ex.Message);
            errorMessage = String.Concat(errorMessage, " Line: ");
            errorMessage = String.Concat(errorMessage, ex.Source);

            MessageBox.Show(errorMessage, "Error");
            return "";
        }
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        port.Close();
        Close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:33:30.297

`ReadModem()`尝试在循环中使用并`port.ReadLine()`循环直到你得到一行说`RING`（如果这是你期望的最后一行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:33:56.777

您只是在设置后读取调制解调器一次。您需要订阅`DataReceivedEvent`on serialPort 以不断从端口获取数据。

```
public void SetModem()
    {

        if (port.IsOpen == false)
        {
            port.Open();
        }

        port.WriteLine(sData + System.Environment.NewLine);
        port.BaudRate = iBaudRate;
        port.DtrEnable = true;
        port.RtsEnable = true;

        port.DataReceived += port_DataReceived;

    }

    void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
            //For e.g. display your incoming data in RichTextBox
            richTextBox1.Text += this.serialPort1.ReadLine();           

           //OR
           ReadModem();
    } 
```

# javascript - 更改鼠标滚动时的滚动条速度

> ID：15407918
> 
> 赞同：3
> 
> 时间：2013-03-14T11:26:26.807
> 
> 标签：javascript, scroll, scrollbar, mousewheel

是否可以在使用鼠标滚轮滚动 JavaScript 中的元素时更改滚动条的速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:40:25.073

你可以这样做：

[http://jsfiddle.net/V3aaN/2/](http://jsfiddle.net/V3aaN/2/)（**编辑：可能导致癫痫发作或癫痫**）

**CSS：**

```
#smallBox {
    height:400px;
    overflow-y:scroll;
}
#whee {
    height:20000px;
} 
```

**HTML：**

```
 <div id="smallbox">
        <div id="whee"></div>
    </div> 
```

**JS：**

```
 var thing = $('#smallBox');
    var extra = 100;
    var old = $(thing).scrollTop();
    $(thing).scroll(function() {
        if ($(thing).scrollTop() < old) {
            $(thing).scrollTop($(thing).scrollTop()-extra);
        } else if ($(thing).scrollTop() > old) {
            $(thing).scrollTop($(thing).scrollTop()+extra);
        }
        old = $(thing).scrollTop();
    }); 
```

# javascript - 如何定义 testacular.conf.js 文件

> ID：15407920
> 
> 赞同：0
> 
> 时间：2013-03-14T11:26:31.873
> 
> 标签：javascript, node.js, jasmine, karma-runner

我在定义 testacular.conf.js 文件时遇到问题。我是 node.js 和 Testacular 的新手。任何建议都会很有用。现在我已经安装了 Node.js 并且我还使用命令安装了 Testacular `npm install -g testacular`。我已经检查了版本：`testacular --version`，它显示`0.6.0`。现在我的问题是：

*   如何定义 testacular 的配置文件？
*   在哪里定义 testacular.conf.js 文件

我已经尝试使用命令执行此操作，`testacular init`但是当我选择一个框架时，它不会让我失望，即使我按 Enter 也没有任何反应。

如果有人可以帮助我提供一些示例程序或示例，我将不胜感激。我看到的链接很少，例如：

*   [https://github.com/testacular/testacular/blob/master/test/client/testacular.conf.js](https://github.com/testacular/testacular/blob/master/test/client/testacular.conf.js)
*   [https://github.com/testacular/testacular](https://github.com/testacular/testacular)

它们也显示错误，例如`LogInfo not defined`and `jasmin not defined`。

你能给我一个例子吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:09:57.437

我也在努力解决这个问题。下面的链接（和提到的回购）有助于正确设置它：

[http://mrforbes.com/blog/2013/02/yeoman-testacular-jquery-require-backbone-sass-mocha-dust-i18n-oh-my/](http://mrforbes.com/blog/2013/02/yeoman-testacular-jquery-require-backbone-sass-mocha-dust-i18n-oh-my/)

# ruby - Ruby-Watir 的简单 Excel 脚本？

> ID：15407922
> 
> 赞同：0
> 
> 时间：2013-03-14T11:26:33.410
> 
> 标签：ruby

谁能解释如何使用 Microsoft Excel 为用户名和密码字段传递不同的值（有效、无效、空）？

1.  就像我需要从 Excelsheet 中获取值

2.  我需要 Ruby 中的脚本

我曾尝试参考但 Excel 脚本没有适当的文档..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:02:44.667

我会建议像 roo 这样的宝石。我不确定它现在托管在哪里，但是这些链接中的任何一个都应该有帮助：

*   [http://roo.rubyforge.org/](http://roo.rubyforge.org/)
*   [http://rubygems.org/gems/roo](http://rubygems.org/gems/roo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:36:45.923

“roo” gem 是您查询的答案。它使用简单，非常容易理解

此 gem 允许您访问

```
* Open-office spreadsheets (.ods)
* Excel spreadsheets (.xls)
* Google (online) spreadsheets
* Excel’s new file format .xlsx 
```

这个链接很有帮助

```
http://roo.rubyforge.org/ 

http://roo.rubyforge.org/rdoc/index.html 
```

# ios - iOS 上的法语语音识别

> ID：15407927
> 
> 赞同：1
> 
> 时间：2013-03-14T11:26:44.590
> 
> 标签：ios, objective-c, speech-recognition, openears

我正在尝试开发一个使用法语语音识别的 iOS 应用程序，但直到现在都没有成功。我尝试使用 openEars 框架，它非常适合英语，但不支持法语。我使用了此[链接](http://www.politepix.com/forums/topic/other-languages/)中的一些信息。

如果有人知道解决方案，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:34:26.973

Openers 默认使用**英语声学和语言模型**。所以它适用于英语，但不支持法语。

[您可以从CMU Sphinx 网站](http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/)下载法语声学和语言模型

一些好的法语声学和语言模型可以[在这里找到](http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/French%20Language%20Model/french3g62K.lm.dmp.bz2/download)

下载并更改您的 Openears 声学和语言模型。

为此，只需将**Openears hub4wsj_sc_8k**文件夹替换为下载的文件夹，并将`.dic`and`.languagemodel`文件替换为下载的文件。

[如果你觉得下载的法语声学和语言模型太大了，那就用这个文档](http://cmusphinx.sourceforge.net/wiki/)用几个词创建我们自己的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:55:13.827

我最终为我的项目使用了这个库[iPhone-Speech-To-Text](https://github.com/todoroo/iPhone-Speech-To-Text)。

它使用 google voice api，发送语音的 FLAC 文件并检索适当的文本。

为了使它适用于法语，`SpeechToTextModule.m`我刚刚更改了 URL

> `NSURL *url = [NSURL URLWithString:@"https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=en-US"];`

到

> `NSURL *url = [NSURL URLWithString:@"https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=fr"];`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T12:48:56.773

我找到的替代方案是 Dragon Speech SDK for Mobile。您只需[注册 Dragon Mobile](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home)并下载 SDK 和 Samples。

它支持英语、法语、德语语音识别。它也比 openEars 工作得非常准确。我已经测试了它的英语并且它工作得很好。

这是支持上述语言识别的样本的屏幕

![在此处输入图像描述](../Images/aae65248920674254b9854d516d60a58.png)

**笔记**

[SDK 可免费下载和使用 90 天，但...](http://readwrite.com/2011/01/24/dragon-speech-sdk-arrives-for-android-ios)

# java - 下拉菜单中的条纹和枚举 Java 类

> ID：15407932
> 
> 赞同：0
> 
> 时间：2013-03-14T11:26:58.150
> 
> 标签：java, sql, binary-data, stripes

当使用带有 Java 枚举的下拉菜单时，Stripes 返回某种二进制内容，而不是应该代表枚举的实际字符串。

更详细地，请查看以下 2 个下拉菜单如何在 SQL 查询中转换：

```
<stripes:select name="firstDropDown" id="firstDropDown">
   <stripes:option value="">All</stripes:option>
   <stripes:option value="ITEM1">First item</stripes:option>
   <stripes:option value="ITEM2">Second item</stripes:option>
</stripes:select>

<stripes:select name="anotherEnumToChose" id="anotherEnumToChose">
   <stripes:option value="">I want them all</stripes:option>
   <stripes:options-enumeration enum="package.to.the.enumerate.AnotherEnumToChoseEnum" label="label" />
</stripes:select> 
```

根据 Stripes，我设置了一个`getLabel()`Java 方法（用于第二个下拉菜单），该方法正确地将枚举返回为`String`.

从前面的 JSP 中，在构建 SQL 查询之后，我在查询中得到以下 where 子句（例如，我从第一个下拉菜单中选择“ITEM1”，从第二个下拉菜单中选择“ENUM1”） ：

```
and     table.first_drop_down ='SMS' 
    and     another_enum_to_chose=_binary'��\0~r\02package.to.the.enumerate.AnotherEnumToChoseEnum\0\0\0\0\0\0\0\0\0\0xr\0java.lang.Enum\0\0\0\0\0\0\0\0\0\0xpt\0ENUM1' 
```

我没有成功地注释掉，`<stripes:option value="">I want them all</stripes:option>`因为我认为它可能与 冲突`<stripes:options-enumeration`，但这仍然不起作用。

另一方面，如果我删除这些二进制设置并直接`another_enum_to_chose = 'ENUM1'`在 SQL where 子句中使用，那么我会从数据库中获取我期望的记录。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:30:32.300

该问题与我使用的 Enumerate Java 类有关。为了获得枚举值，我现在使用`name()`标准文档中描述的方法`java.lang.Enum`。现在使用`name()`我 100% 确定我得到的是一个`String`而不是任何其他类型/对象。

# joomla - 我还能在哪里找到 Joomla 中的样式！用 k2 比在模板中？

> ID：15407938
> 
> 赞同：0
> 
> 时间：2013-03-14T11:27:11.450
> 
> 标签：joomla, joomla2.5

我必须设计一个网站，但必须在joomal中完成，我对此没有太多经验。我已经设置了一个模板，它看起来像[这样](http://iiicstest.eu/index.php/about/testimonials)。但我需要将其重新设计为类似于：![在此处输入图像描述](../Images/4f7d531ed4b7cfa52ecf868a994fa620.png). 我想从你那里得到模块或模板或子模板的名称，例如，我可以在哪里指定日期将与标题在同一行的右侧对齐。因为我在任何地方都找不到。在模板中只有 globa 选项，用于更改网站的整体外观。但是本地 css 或样式选项无处可去。非常感谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:19:42.043

由于您刚刚开始，出于学术目的，您可能会阅读一些 Joomla 模板框架使用的 960 网格系统。

我见过的最好的框架，也是我个人的看法，是 Rocket Themes 的 Gantry。它很容易在布局中放置模块并使用图形界面对齐模块。他们使用 12 列 960 像素的默认布局。

在这里访问它：www.gantry-framework.org

查看此页面上的视频：**www.gantry-framework.org/documentation/joomla/customize/adding-module-positions**

我发现他们的文档比大多数其他 joomla 模板框架要好得多。

使用一个好的框架可以很容易地完成你的工作，可能会减少很多小时。

它是免费的，仅供参考。

# c# - 如何从 SQL Server 获取进度状态

> ID：15407940
> 
> 赞同：0
> 
> 时间：2013-03-14T11:27:19.557
> 
> 标签：c#, sql-server

我有一个存储过程，它在不同的表中有超过 100K 的记录。完成任务需要 4-5 分钟。直到 4-5 分钟用户不知道应用程序中发生了什么。请帮助我如何显示存储过程的进度。如何从 SQL Server 获取进度状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:33:33.120

除了 Steve 发表的评论，尝试使用[Back Ground Worker](http://msdn.microsoft.com/en-us/library/4852et58.aspx)类并报告进度并使 UI 更具响应性。

# android - ImageView 应该和右边的布局高度一样

> ID：15407942
> 
> 赞同：0
> 
> 时间：2013-03-14T11:27:21.493
> 
> 标签：android, xml, layout, user-interface, view

我希望图像视图与右侧的 LinearLayout 具有相同的高度。我不想固定任何高度，我想保持图像纵横比。

![布局](../Images/2f9fcf9cd49bf3405e3ed2314a46751b.png)

```
<LinearLayout
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal" >

 <ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:src="@drawable/ati" />

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="vertical"
    android:padding="4dp" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Name"
        android:textAppearance="@android:style/TextAppearance.Medium" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Description" />
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:32:15.210

1.  从**正确的布局**开始。并设置它的高度`wrap_content`

2.  然后具有`ImageView`以下属性：

    一个。`align top`向右**布局**

    湾。`alight bottom`向右**布局**

    C。`layout_height = "wrap_content"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:34:32.510

尝试使用布局参数为纵横比创建相同的高度和位图

# objective-c - IOS (intcount + 1) = 5

> ID：15407943
> 
> 赞同：-5
> 
> 时间：2013-03-14T11:27:24.910
> 
> 标签：objective-c

当我计数 1 +1 时，我得到 5 的回报……谁能帮助我？以前一直在做这样的 couters，但这一个返回奇怪的结果....

```
load_count = (load_count +1);
NSLog(@"loadcount %d",load_count);
if (load_count == 0){
    load_count = 1;
}
if (load_count = (picture_count +1)) {
    load_count = 1;
} 
```

load_count = int

picture_count = 从数组中提取的 int（返回图片的数量 a 数组）

日志结果：

```
2013-03-14 12:04:44.325  loadcount 5
2013-03-14 12:04:47.977  loadcount 5
2013-03-14 12:04:50.800  loadcount 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:33:57.253

目前尚不清楚，但我*认为*您正试图`load_count`从`0`to增加`picture_count`并再次环绕 to `0`？

如果是这样，这一切：

```
load_count = (load_count + 1) % picture_count; 
```

# eclipse - 调试时复制对象

> ID：15407944
> 
> 赞同：4
> 
> 时间：2013-03-14T11:27:29.173
> 
> 标签：eclipse, debugging

在 eclipse 的调试模式下复制变量值时，我们有选项 Copy Variables ，我们可以使用它来复制存储在该对象中的值，但现在我观察到当我将它们粘贴到记事本中时，名为 Long,Integer 的变量不会给你值，而不是你会得到一些数据类型的参考数字。

例如：id Short (id=2435)

如果我还想在调试时获取对象的详细树副本怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:31:24.750

我找到了答案，展开对象的每个树节点。然后说复制变量，然后只有它会复制您想要复制的变量。

# emacs - 将 Base64 解码为 UTF-8，而不是单字节编码文本

> ID：15407947
> 
> 赞同：3
> 
> 时间：2013-03-14T11:27:33.600
> 
> 标签：emacs, base64

以下是我尝试过的事情：

向缓冲区添加注释：`#-*- coding: utf-8; -*-`

`M-x M-m c`，`utf-8`从列表中选择，然后`M-x``base64-decode-region`。

这是缓冲区显示的内容：`\327\252\327\234 \327\220\327\221\327\231\327\221`. 它“应该”显示的是`תל אביב`. 源字符串如下所示：`16rXnCDXkNeR15nXkQ==`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:11:32.927

缓冲区的编码系统指定从文件读取内容和将内容写入文件时使用的编码系统。IOW，您的“编码：utf-8”仅指示如何解码 ASCII 源字符串（它不需要任何特殊解码，因为它是 ASCII，但 base64 字符串可以被非 ASCII 文本包围）。

您需要的是在调用`decode-coding-region`后调用`base64-decode-region`。

**编辑**

以下是通讯作者：

```
(defun base64-decode-utf8-region (start end)
  (interactive "r")
  (save-restriction
    (narrow-to-region start end)
    (base64-decode-region (point-min) (point-max))
    (decode-coding-region (point-min) (point-max) 'utf-8)))

(defun base64-encode-utf8-region (start end)
  (interactive "r")
  (save-restriction
    (narrow-to-region start end)
    (encode-coding-region (point-min) (point-max) 'utf-8)
    (base64-encode-region (point-min) (point-max)))) 
```

# java - 将ems消息从电脑发送到手机

> ID：15407948
> 
> 赞同：2
> 
> 时间：2013-03-14T11:27:33.933
> 
> 标签：java, sms-gateway, ems

我正在寻找一个支持将 EMS 消息从 pc 发送到移动设备的 java api/library/sms-gateway。通过 EMS，我基本上是指发送串联消息、图片消息（1 位图像）、短音频剪辑（iMelody 格式）。

早些时候，我使用[smslib](http://smslib.org/)发送一条简单的短信。后来我才知道它不支持EMS消息。

然后我发现了支持这个的[smsj 。](http://smsj.sourceforge.net/index.html)但是实施这个给我带来了很多问题。我通过连接 gsm 调制解调器尝试了它，给了我`connection failed at at+cmgf`错误。尝试使用[clickatell](http://www.clickatell.com/)，但在连接到服务器时再次出现连接问题，即使我的互联网连接正常。

我在谷歌上搜索了很多支持这个的其他库，但都是徒劳的。如果有任何其他库支持这一点，您能否指定它们的链接？

以任何方式提供帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:38:41.853

您可以使用 gcm ，但那是针对 android 的。好吧，这是谷歌的推送通知服务

链接在这里

[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

但我认为它的容量很低

Pushwoosh 可以覆盖所有平台

[http://www.pushwoosh.com/](http://www.pushwoosh.com/)

一旦看到这个

这些都不是短信通道，这些是推送通知服务

但根据您的要求，他们可能会帮助您.......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:44:18.597

您可以尝试 ozeki NG SMS 网关。我很久以前就尝试过集成短信。但是，发现我们也可以发送特殊格式，例如EMS。但是该工具是专有的，可以为您提供 20 天的试用期。

[http://www.sms-integration.com/compatibility-issues-in-sms-systems-63.html](http://www.sms-integration.com/compatibility-issues-in-sms-systems-63.html)

[http://www.ozekisms.com/](http://www.ozekisms.com/)

# python - Bash 找不到 python 库，但 pydev 可以

> ID：15407950
> 
> 赞同：1
> 
> 时间：2013-03-14T11:27:36.233
> 
> 标签：python, module, pydev

我正在尝试使用 Python DNS 库（dnspython）编写一些脚本。我使用数据包管理器（apt-get install）安装了它（python-dns 和 python-dnspython）。

我试图在 shell 上以交互方式编写脚本，但它一直说找不到库。

```
>>> import dns
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named dns 
```

有趣的是，当我在 Eclipse (pydev) 上进行相同的导入时，放置它没有问题。这一定是我做错了，比如没有定义路径等（尽管这不太可能，因为 - 据我所知 - apt-get 应该自动处理它）。

操作系统：Ubuntu 12.04 Python 版本：2.7.3

我是 Linux 和 Python 的初学者（我知道组合不好）。任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:31:22.880

在这两种环境中尝试一下，看看有什么区别：

```
import sys
print sys.path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:33:12.693

做这个

```
dpkg -L python-dnspython 
```

这给出了一长串安装路径的列表在我的系统上，python-dnspython 位于 /usr/share/pyshared/ 中（肯定）应该在 python 的搜索路径中。可以肯定的是，手动设置它

```
export PYTHONPATH=/usr/share/pyshared 
```

在运行 cli python 之前

# javascript - javascript中的字符串到数组，来自base64

> ID：15407955
> 
> 赞同：1
> 
> 时间：2013-03-14T11:27:41.340
> 
> 标签：javascript, arrays

我正在尝试从有效字符串中获取数组。我正在使用base64 来编码一个已经是javascript 的数组，也就是说，它是以js 数组格式编码的。

当浏览器解码 base64 时，它将数组存储为文本。

如何将其转换回数组？PHP端：array = "['My User',1,12],['User 2',1,66]"

var 数组 = ajaxResponse.array;

var 数组此时是一个字符串。

# spring - 混合和扩展 Spring XML 配置

> ID：15407957
> 
> 赞同：0
> 
> 时间：2013-03-14T11:27:48.330
> 
> 标签：spring, jaxb

我有一个使用 XML 作为主要配置的 Spring MVC 项目，包括注册 JAXB 类。我现在将它制作成一个多模块应用程序，并有一个单独的项目来创建一个可选的 JAR 文件。JAR 文件将 @Controller 和 @Service 类之类的东西添加到主 MVC 项目中，但主项目不依赖于该 JAR，我想保持这种方式，所以我不想自定义应用程序主项目中的上下文 xml，以添加对可选 JAR 的支持；我只想将该 JAR 添加到类路径中。

在那个可选的 JAR 中，我成功地使用了一个带有 @Configuration 注释的类在我的应用程序上下文中创建新的 bean，但是我现在需要扩展一个现有的 bean，以添加新的 JAXB 注释类和包含 ObjectFactory 类的包等.

我看不到如何做到这一点...

我试图像这样通配编组器包：

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
   <property name="packagesToScan" value="com.app.xml.**"/>
</bean> 
```

但这似乎不起作用，因为我得到：

```
javax.servlet.ServletException: Unable to locate object to be marshalled in model 
```

我可以采取另一种方法吗？理想情况下，我想在我的 @Configuration 类中有一个方法，它只是将新类添加到现有的 Jaxb2Marshaller bean...

或者更好的是，找到一种方法让 Spring 在启动时检测所有带有 JAXB 注释的类......

我通过 Spring OXM 使用 Spring 3.2.1 和 JAXB2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T06:04:17.140

你不能使用 `<property name="packagesToScan" value="com.app.xml.**"/>`packagesToScan 属性不适用于 jaxb2Marshaller .. 而不是你可以使用

```
<property name="contextPath" value="{package name where all classes are generated}"/> 
```

以下作品

```
<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller" >
<property name="contextPath" value="{package name where all classes are generated}"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:21:17.513

我不认为 spring 支持这个用例，但你可以做的是扩展`Jaxb2Marshaller`，并使用像[Reflections](http://code.google.com/p/reflections/)这样的实用程序来查找所有具有 jaxb 注释的类并将它们添加到编组器中。

此外，如果您正在使用 spring 并且不介意使用它提供的某些功能，则可以使用该类[`ClassPathScanningCandidateComponentProvider`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathScanningCandidateComponentProvider.html)来查找类。这是 spring 在内部用来扫描包和子包的。

# iphone - 多线程核心数据

> ID：15407958
> 
> 赞同：1
> 
> 时间：2013-03-14T11:28:00.240
> 
> 标签：iphone, objective-c, core-data, sdk

我很难弄清楚如何以最好的方式设置核心数据。现在我有一个单例，包含核心数据堆栈和一个在主线程上运行的 ManagedObjectContext。在我阅读了很多文章和教程之后，我一直很困惑。一些统计数据表明单例还可以，而其他统计表明，主线程上的单例和一个 managedObjectContext 是一个坏主意（这是正确的吗？）。那么如何使用多个线程最有效地创建核心数据堆栈**呢？**

由于我的应用程序正在将大量解析的 JSON 数据下载并处理到我的核心数据模型中，所以我想在带有 MOC 的后台线程中导入这些数据，并在主线程中使用 MOC 显示数据，这样对吗怎么做**？**

我曾尝试使用 Magical Record，但我认为有关此“工具”的信息很少，我似乎无法理解如何导入 JSON 数据、避免重复、创建关系等。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:47:23.117

最好创建两个`NSManagedObjectContext`。一种用于读取核心数据并更新用户界面，另一种是将记录写入核心数据。在使用主线程和后台线程时将避免冲突

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:07:51.650

Core Data 的单线程或多线程策略**取决于您的应用程序的设计目的**以及它在 Core Data 中保留了多少数据（以及读取/写入的频率）。

使用后台线程导入数据并在主线程上进行一些核心数据读取工作。只要确保每个线程都有一个 MOC，并且您只能访问创建它的线程上的每个 MOC！Core Data 的合并功能（例如`mergeChangesFromContextDidSaveNotification:`）非常有用。

此问题中的一些有用信息和已接受的答案：

[Core Data 多线程应用](https://stackoverflow.com/questions/2138252/core-data-multi-thread-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:11:54.563

如果你锁定它，单身就可以了。

两个都可以，但是您将希望使用相同的后备存储，并从读取上下文观察写入上下文的更改，然后合并更改。

# jquery - jquery 类型错误 = 0，函数

> ID：15407970
> 
> 赞同：0
> 
> 时间：2013-03-14T11:28:22.893
> 
> 标签：jquery, function, typeerror

我的内部有一个功能`document.ready`

```
 function changeLabel (labelname, newValue) {
    if ($(labelname).html().indexOf("span class") > -1) {
        $(labelname).html("<span class='error'>" + newValue + "</span>");
    } else {
        $(labelname).html(newValue);
    }
  } 
```

但现在我在我的萤火虫中收到一条错误消息：

`TypeError: $(labelname).html()`是`null`

我真的不明白是什么问题，使用该功能将是这样的：

```
changeLabel ("#raffle label[for='first_name']",'Firstname *:'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:34:21.387

将选择器更改`'label[for="first_name"]','#raffle'`为此更改查找标签的位置。如果您仅在`#raffle`将选择器替换为类似内容时查找标签。

```
$(labelname,'#raffle').html();

changeLabel('label[for="first_name"]','new value'); 
```

不确定它是否能解决问题。但是可能会像你一样选择器可能不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:38:18.693

使用 jquery `index()`.. 试试这个

```
if ($(labelname).index($("span.error")) > -1) {
    $(labelname).html("<span class='error'>" + newValue + "</span>");
} else {
    $(labelname).html(newValue);
} 
```

# c# - 将 DataGridView 与 BindingList 一起使用 其中 T 是接口和跨线程更新

> ID：15407981
> 
> 赞同：0
> 
> 时间：2013-03-14T11:29:03.003
> 
> 标签：c#, .net, winforms, datagridview, multithreading

当我有这样的界面时：

```
public interface IClass
{
    string { get; set;}
} 
```

还有一个继承接口的类：

```
using System.Runtime.CompilerServices;

public class MyClass : INotifyPropertyChanged : IClass
{
    private string name;

    public event PropertyChangedEventHandler PropertyChanged;

    public string Name
    {
        get { return name;}
        set
        {
            name = value;
            this.NotifyPropertyChanged();
        }
    }    

    public MyClass(string name)
    {
        this.Name = name;
    }

    private void NotifyPropertyChanged([CallerMemberName] string caller = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(caller));
        }
    }
} 
```

我将 DataGridView 数据源绑定到 BindingList，如下所示：

```
BindingList<MyClass> classes = new BindingList<MyClass>();

MyClass testClass = new MyClass("test1");
MyClass testClass = new MyClass("test2");
classes.Add(testClass);

dataGridView1.DataSource = classes; 
```

每当 name 属性从另一个表单更改时，datagridview 就会更新。但是，当我尝试执行以下操作时，它不起作用。

```
BindingList<IClass> classes = new BindingList<IClass>();

MyClass testClass = new MyClass("test");
MyClass testClass = new MyClass("test2");
classes.Add(testClass);

dataGridView1.DataSource = classes; 
```

我可能已经追踪到这个问题，当我使用 IClass 的 BindingList 时，当对属性进行更新时，PropertyChanged 事件为空。但是，将 BindingList 用于 MyClass 它不为空。为什么？

这个想法是这样的，可能存在 MyClassA、MyClassB 等，它们具有可以在 datagridview 中显示的相同属性。

附加问题：如果 MyClass 在非 UI 线程中运行并进行更新怎么办。我是否必须保留对主窗体或线程编组控件的引用？或者这只是简单的糟糕设计？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:16:59.740

您的 MyClass 继承自 INotifyPropertyChanged 和 IClass。这就是在 BindingList 中使用 MyClass 时触发 PropertyChanged 事件的原因。

另一方面，IClass 不继承自 INotifyPropertyChanged，因此它无权访问它的 PropertyChanged 事件处理程序。这就是在 BindingList 中使用 IClass 时不会触发 PropertyChanged 事件的原因。

尝试像这样更改继承顺序。

```
public interface IClass : INotifyPropertyChanged 
    {
        string Name { get; set;}
    }

public class MyClass: IClass
    {
        private string name;

        public event PropertyChangedEventHandler PropertyChanged;

        public string Name
        {
            get { return name; }
            set
            {
                name = value;
                this.NotifyPropertyChanged("Name");
            }
        }

        public MyClass(string name)
        {
            this.Name = name;
        }

        private void NotifyPropertyChanged(string caller = "")
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(caller));
            }
        } 
```

我测试了它。有用。

# javascript - Jquery 和 IIFE 包装器说明？

> ID：15407982
> 
> 赞同：1
> 
> 时间：2013-03-14T11:29:03.873
> 
> 标签：javascript, jquery

`window`不能像我们在这个例子中看到的那样重新定义：

[http://i.stack.imgur.com/IYX0p.jpg](https://i.stack.imgur.com/IYX0p.jpg) ![在此处输入图像描述](../Images/ea9abb2d96b50d085972c609befe956c.png)

那么为什么 jquery 以`window` ( 甚至使用相同的名称) 开头呢？

`(function( window, undefined ) {...})( window );`

我的意思是，它可能在`window`里面有用......

*ps这个`undefined`技巧与它无关......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:43:30.987

我想一个可能的解释是让 JQuery 更容易移植到其他上下文中，其中全局对象可能没有命名`window`，甚至嵌入在其他一些脚本中，在这种情况下`window`指的是当前范围内的有效令牌（或激活目的）。

无论如何，我认为这可能有用的唯一原因是因为 jQuery 代码可以`window`不用担心使用该名称，因为任何供应商都可以将名称绑定到它想要的任何对象，只需更改 jQuery 源代码的一行（最后一）。

# iphone - 从标签栏弹出的图标

> ID：15407984
> 
> 赞同：1
> 
> 时间：2013-03-14T11:29:08.143
> 
> 标签：iphone, ios, objective-c, xcode, uitabbarcontroller

我很好奇从标签栏弹出图标的正确方法。例如，Food Spotting 应用程序（请参见下文）。如果单击它，则从中心选项卡栏项目中弹出三个图标。

有没有标准的方法来做这样的事情？谢谢！

![在此处输入图像描述](../Images/b0fdbe5e9498484ebc77a458bb01d177.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T18:43:57.070

我认为普遍的共识是，第一步，您应该在中心标签栏按钮上放置一个 UIButton。链接到的代码 gazzola 似乎对此有所帮助。下一步是控制中心按钮的触摸并从中为新按钮设置动画。

以下代码显示了如何创建新按钮并以与 Food Spotting 应用程序类似的方式为它们设置动画。

假设您定义了两个属性：

```
@property (nonatomic, weak) IBOutlet UIButton *ourExpandButton;
@property (nonatomic, assign) BOOL buttonsExpanded; 
```

第一个是中心按钮的出口，第二个是用于确定按钮是否显示的布尔值。

```
- (void)viewDidAppear:(BOOL)animated
{
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *button3 = [UIButton buttonWithType:UIButtonTypeCustom];

    button1.backgroundColor = [UIColor redColor];
    button2.backgroundColor = [UIColor blueColor];
    button3.backgroundColor = [UIColor yellowColor];

    // Make the buttons 0 width and height so when we animate they seem to grow
    // Position them in the center of the button that expands them
    button1.frame = CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0);
    button2.frame = CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0);
    button3.frame = CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0);

    [button1 addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchUpInside];
    [button2 addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchUpInside];
    [button3 addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchUpInside];

    button1.tag = 101;
    button2.tag = 102;
    button3.tag = 103;

    [self.view addSubview:button1];
    [self.view addSubview:button2];
    [self.view addSubview:button3];
} 
```

在 viewDidAppear 中，我只是设置按钮，这些都可以在情节提要上完成。

以下方法将与展开按钮的 touchUpInside 事件相关联。

```
- (IBAction)expandButtonTouched:(id)sender
{
    if (!self.buttonsExpanded) {
        [UIView animateWithDuration:0.25 animations:^{
            float screenWidth = self.view.frame.size.width;
            float screenHeight = self.view.frame.size.height;
            [[self.view viewWithTag:101] setFrame:CGRectMake((screenWidth/3 - 22.0), (screenHeight - 100), 44.0, 44.0)];
            [[self.view viewWithTag:102] setFrame:CGRectMake((screenWidth/2 - 22.0), (screenHeight - 150), 44.0, 44.0)];
            [[self.view viewWithTag:103] setFrame:CGRectMake((2*screenWidth/3 - 22.0), (screenHeight - 100), 44.0, 44.0)];
        } completion:^(BOOL finished) {
            self.buttonsExpanded = YES;
        }];
    } else {
        [UIView animateWithDuration:0.25 animations:^{
            [[self.view viewWithTag:101] setFrame:CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0)];
            [[self.view viewWithTag:102] setFrame:CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0)];
            [[self.view viewWithTag:103] setFrame:CGRectMake(self.ourExpandButton.center.x, self.ourExpandButton.center.y, 0.0, 0.0)];
        } completion:^(BOOL finished) {
            self.buttonsExpanded = NO;
        }];
    }
} 
```

这会使按钮呈放射状或半圆形动画，并且它们会随着它们的移动而增长。请注意，您应该弄清楚您希望按钮在哪里设置动画并相应地调整数字。同样显然应该给按钮一个图像，而不仅仅是背景颜色。

此代码没有添加 Food Spotting 所具有的弹跳动画，在该动画中，按钮越过它们的目的地并后退。要添加它，只需将动画中的按钮帧更改为您希望按钮移动的最远距离，然后在完成块中添加另一个动画，将它们移动到最终目的地。

我会发布最终结果的图像，但我没有足够的声誉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:28:27.727

查看此[代码](https://github.com/bharath2020/UITableViewTricks)，它有助于以半圆形方式向您展示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:51:33.990

这里有一个示例（[git 代码](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)），展示了如何制作居中的标签栏按钮。这是您需要的一个很好的开始，您应该检查 Dhara 和 Rushabh 发布的代码。

祝你好运。

# django - Django 喜欢按钮

> ID：15407985
> 
> 赞同：11
> 
> 时间：2013-03-14T11:29:11.380
> 
> 标签：django

我一直在尝试为我的应用程序的每个板上的宠物图片创建一个赞按钮，但我不知道如何创建一个，因为它包含 Integer 。通常我对我创建的功能有一个想法和理解。

当用户点击like按钮时。点赞按钮会加1，并显示在图片附近。

这是我的图片模块。

```
class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board ,related_name='lo')
    image = models.FileField(upload_to="images/",blank=True,null=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)

    def __unicode__(self):
        return self.description 
```

有人可以帮我创建点赞按钮的基础知识吗？所以我可以理解函数的逻辑。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-14T11:35:02.910

我假设很多用户可以喜欢很多图片。

你需要另一个模型：

```
class Like(models.Model):
    user = models.ForeignKey(User)
    picture = models.ForeignKey(Picture)
    created = models.DateTimeField(auto_now_add=True) 
```

并像这样调用喜欢的数量：

```
p = Picture.objects.get(...)
number_of_likes = p.like_set.all().count() 
```

要增加喜欢的数量，您可能希望在视图中执行类似的操作：

```
def like(request, picture_id):
    new_like, created = Like.objects.get_or_create(user=request.user, picture_id=picture_id)
    if not created:
        # the user already liked this picture before
    else:
        # oll korrekt 
```

所以每当有人点击同一个赞按钮两次时，他只会算作一个。

要确定当前用户是否已经喜欢显示的图像：

```
def picture_detail(request, id):
    pic = get_object_or_404(Picture, pk=id)
    user_likes_this = pic.like_set.filter(user=request.user) and True or False 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-15T13:44:03.913

我将与您分享我的喜欢按钮应用程序体验

首先创建like app和like.models里面建立

```
from django.conf import settings
from django.contrib.contenttypes.fields import GenericForeignKey
from django.contrib.contenttypes.models import ContentType

class LikeModel(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL, default=1)
    liked = models.BooleanField()
    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)
    object_id = models.PositiveIntegerField()
    content_object = GenericForeignKey('content_type', 'object_id')

    timestamp = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return str(self.user.username) 
```

那么你应该有 ajax 应用程序，我们将执行保存命令，只需单击心脏或拇指或任何你想要的，一旦你创建了 ajax 应用程序，然后不要更改模型中的任何内容，只需调整 url 并进入 ajax.views 并建立代码

```
def like_it(request):
    user = request.user
    if request.method == 'POST':
        ObjectId = int(request.POST['objectid'])
        Tip = str(request.POST['contentType'])

        likes = LikeModel.objects.filter(object_id=ObjectId, content_object=Tip) # in here we filtered the particular post with its id
        if likes: # if the particular post is there
            if str(user) in str(likes): # then we check the user which is us, in there
                like_obj = LikeModel.objects.get(user=user,object_id=ObjectId, content_object=Tip) #if we there and we returned this data, this part for saving data, I mean if this data is already created than we dont have to delete and create again, we just change LikeModel.liked true or false state, so that if you create like and it will never delete, it just change liked or like state
            else:
                pass

        if Tip == 'UserPost':
            post_content_type_by = UserPost.objects.all().first()

            if str(user) not in str(likes):
                like = LikeModel.objects.create(user=user, liked=True, content_object=ContentType.objects.get_for_model(Tip), object_id=ObjectId)
                like.save() # if data is created then we say 'new'
                okey = 'new'

            elif str(user) in str(likes) and like_obj.liked:
                like_obj.liked = False
                like_obj.save() # if data is already there, then we save it False
                okey = 'false'

            elif str(user) in str(likes) and like_obj.liked == False:
                like_obj.liked = True
                like_obj.save() # if data is already changed to False and we save again to True
                okey = 'true'

    return render(request,'ajaxlike.html',{'likes':likes,'okey':okey}) 
```

之后我们将创建用于返回和保存 ajax 数据的 ajax 模板，我将其命名为 like.html

```
 {% if okey == 'new' %}
    new
  {% elif okey == 'false' %}
    false
  {% elif okey == 'true' %}
    true
  {% endif %} 
```

现在创建您的索引 html 或您想要建立类似按钮的任何位置，并编写 jquery 代码

```
 $('.thumb').click(function(){
    var indx = $('.thumb').index(this)
    var ObjectId = $('.ObjectId:eq('+indx+')').text()
    $.ajax({
      type: 'POST',
      url: '/ajax/ajaxlike/',
      data: {
        'contentType':'UserPost',
        'objectid':ObjectId,
        'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
      },
      success: LikePost,
      dataType: 'html'
    });

    function LikePost(data, textStatus, jqXHR){
      if($.trim(data) == 'new'){
        $('.thumb:eq('+indx+')').css('color','#FF0033');
      }else if($.trim(data) == 'false'){
        $('.thumb:eq('+indx+')').css('color','');

      }else if($.trim(data) == 'true'){
        $('.thumb:eq('+indx+')').css('color','#FF0033');

      }
    }
  }); 
```

在上面的示例中，当我们单击拇指并将数据保存在 LikeModel 中，然后从返回 ajax 数据的 like.html 中保存数据，如果数据是新的并且将拇指着色为红色，如果数据为 false，则表示该数据已经保存但是现在你想删除喜欢，所以然后拇指颜色恢复正常颜色，如果数据是真的，这意味着你已经为这篇文章创建了类似的数据，但是你删除了你的拇指，但现在你想再次喜欢所以拇指去又红了

好的，这几乎完成了，但请记住，当页面刷新所有彩色拇指并计算页面中未显示的点赞数时，它是如此简单，只需编写一些小代码，它就会再次加载所有内容

所以我们在这里所做的，我们创建了类似的应用程序并在数据库的类似表中，在用户创建数据之后，它将永远不会被用户删除，它只是通过布尔字段更改为喜欢的真假状态，所以作为管理员，您始终会保留所有可能对我们有用的数据，但棘手的部分是，所有事件都由 javascript 处理，因此您在使用 jquery 编写代码时必须注意，例如确保 ajax 运行良好，我也想提一下这一点，例如，如果在您的页面中首先加载 10 个帖子，然后滚动页面和页面会自动加载其他 10 个帖子，然后喜欢按钮将不起作用，因为您的主要 jquery 代码在页面中无法在加载的 div 中工作，所以我的意思是你必须为此做一些额外的事情，

但是我想分享我的自定义like和ajax应用程序的主要想法，它对我有用，这个对我来说从来没有失败过：D，真诚的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T02:12:51.950

我想做类似的事情，并使用“django-likes”应用程序为我完成了工作。

在模型的最后，放

```
secretballot.enable_voting_on(Picture) 
```

然后您可以在视图中使用投票。

你可以在这里看到它： [https ://pypi.python.org/pypi/django-likes](https://pypi.python.org/pypi/django-likes)

# c# - 使用 linq 写入 xml 文件

> ID：15407986
> 
> 赞同：4
> 
> 时间：2013-03-14T11:29:11.833
> 
> 标签：c#, xml, linq

[使用 XDocument 写入 XML，但知道在哪里写入](https://stackoverflow.com/q/14947590/2162011) 类似于此 Qn。

希望你能帮助我一点。我正在尝试更新 XML 文件，但正在努力编写写入 XML 文件的方法。这是 XML 文件

```
 <software>
    <software_entry name="Adobe Acrobat X Standard" path="Applications\Acrobat\Acrobat XStandard\AcroStan.msi" />
    ..
  </software>
  <ApplicationConfigurations>
     <Config name ="someName" value ="someValue"/>
      ..
  </ApplicationConfigurations> 
```

这里用户可以更改/添加标签，即software_entry下的名称或路径是未知的，因为用户可以编辑/添加值。除了格式，一切都是未知的。

我能够读取文件，将其存储在 中`DataTable`，填充到网格等。使用 LINQ

但是，在写入 xml 时编辑表格后，我被卡住了..

任何人都可以帮我将这种数据写入xml吗？

到目前为止，我已经尝试过：

```
for (int i = 0; i < dt.Length; i++) //for every table 
{
      XName TableName = dt[i].TableName; //table name.

      XElement[] xInnerElt = new XElement[dt[i].Rows.Count]; //for n rows inside one table
      for (int j = 0; j < dt[i].Rows.Count; j++) //loop each tag inside the table
      {
         XName InnerTagName = htAtributNameForTable[dt[i].TableName].ToString(); //tag name form hash table. i.e, software_entry
         //I am unable to write the next line
         xInnerElt[j] = new XElement(InnerTagName,new XAttribute((XName)ColumnName,rows Item arry)),
         //loop till all column added
      }

      XElement xElt = new XElement(TableName, xInnerElt); //one table aded to tag.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:01:46.987

使用此扩展方法，您可以将 any 转换`DataTable`为`XElement`：

```
public static class Extensions
{
    public static XElement ToXml(this DataTable table, string rowElementName)
    {
        // check if table has name and rowElementName is not empty           

        return new XElement(
            new XElement(table.TableName,
                from row in table.AsEnumerable()
                select new XElement(rowElementName,
                    from column in table.Columns.Cast<DataColumn>()
                    let value = row.Field<string>(column)
                    where value != null
                    select new XAttribute(column.Caption, value)
                    )
                )
            );
    }
} 
```

用法：

```
DataTable table = new DataTable("software");
table.Columns.Add("name");
table.Columns.Add("path");
// add rows to table

XElement software = table.ToXml("software_element"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:20:42.423

**问题：**

您在评论中声明您不确定如何添加将在生成的 XML 中创建属性的内部元素。您的代码的其余部分工作完美，除了这一点：

> ```
>  //I am unable to write the next line
>      xInnerElt[j] = new XElement(InnerTagName,new XAttribute((XName)ColumnName,rows Item arry)), 
> ```

**解决方案**

您想要的缺失部分是遍历 上的列`DataTable`，然后访问每行列的值。这是因为该`DataRow`对象没有关于列名的信息。

因此，您需要通过集合进行另一个内部循环`DataTable.Columns`，然后使用`DataRow`列访问器`dt.Rows[j][column]`从当前列中获取值。

它看起来像这样：

```
 foreach (var column in dt[i].Columns)
              {
                  xInnerElt[j].Add(
                      new XAttribute(
                          (column as DataColumn).ColumnName,
                          dt[i].Rows[j][(column as DataColumn)].ToString()
                      )
                  );
              } 
```

我对您的代码的测试：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Xml.Linq;

namespace XElemFromDT
{
    class Program
    {
        static void Main(string[] args)
        {
            Dictionary<string, string> htAtributNameForTable = new Dictionary<string, string>()
            {
                { "Software", "software_entry" },
                { "ApplicationConfigurations", "config" }
            };

            DataTable dt1 = new DataTable();
            dt1.TableName = "Software";
            dt1.Columns.Add("name", typeof(string));
            dt1.Columns.Add("path", typeof(string));
            dt1.Rows.Add("Adobe Acrobat X Standard", @"Applications\Acrobat\Acrobat XStandard\AcroStan.msi");
            dt1.Rows.Add("Adobe Photoshop", @"Applications\Photoshop\Photoshop.msi");

            DataTable dt2 = new DataTable();
            dt2.TableName = "ApplicationConfigurations";
            dt2.Columns.Add("name", typeof(string));
            dt2.Columns.Add("value", typeof(string));
            dt2.Rows.Add("someName", "someValue");
            dt2.Rows.Add("someOtherName", "someOtherValue");

            DataTable[] dt = new DataTable[] { dt1, dt2 };

            XDocument xDoc = new XDocument(new XElement("Root"));

            for (int i = 0; i < dt.Length; i++) //for every table 
            {

                  XName TableName = dt[i].TableName; //table name.

                  XElement[] xInnerElt = new XElement[dt[i].Rows.Count]; //for n rows inside one table
                  for (int j = 0; j < dt[i].Rows.Count; j++) //loop each tag inside the table
                  {
                     XName InnerTagName = htAtributNameForTable[dt[i].TableName].ToString(); //tag name form hash table. i.e, software_entry
                     //I am unable to write the next line
                     xInnerElt[j] = new XElement(InnerTagName);

                      foreach (var column in dt[i].Columns)
                      {
                          xInnerElt[j].Add(
                              new XAttribute(
                                  (column as DataColumn).ColumnName,
                                  dt[i].Rows[j][(column as DataColumn)].ToString()
                              )
                          );
                      }
                  }

                  XElement xElt = new XElement(TableName, xInnerElt); //one table aded to tag.
                  xDoc.Root.Add(xElt);
            }

            Console.WriteLine(xDoc.ToString());
            Console.ReadKey();
        }
    }
} 
```

**奖金——因为我必须试试这个**

这是一种完全使用 LINQ 的方法：（使用与我之前的示例相同的测试数据）

```
 DataTable[] dt = new DataTable[] { dt1, dt2 };

    XDocument xDoc = new XDocument(new XElement("Root"));

    Func<DataTable, DataRow, IEnumerable<XAttribute>> getAttributes = (t, r) =>
        t.Columns.OfType<DataColumn>().Select(c => new XAttribute(c.ColumnName, r[c].ToString()));

    Func<DataTable, IEnumerable<XElement>> getElements = t =>
        t.Rows.OfType<DataRow>().Select(r => new XElement(htAtributNameForTable[t.TableName], getAttributes(t, r)));

    Func<DataTable[], IEnumerable<XElement>> getTables = dtc =>
        dtc.AsEnumerable().Select(t => new XElement(t.TableName, getElements(t)));

    xDoc.Root.Add(getTables(dt)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:08:18.983

如果您只是在寻找一种将 XElements 流式传输到文件的方法，那非常简单：

```
 using (XmlWriter writer = XmlWriter.Create("filename.xml"))
        {
            writer.WriteStartElement("DocumentElementName");
            // Your code goes here
            xElt.WriteTo(writer);
            writer.WriteEndElement();
        } 
```

# mysql - 反对使用 ENUM 的理由是什么？

> ID：15407989
> 
> 赞同：0
> 
> 时间：2013-03-14T11:29:26.883
> 
> 标签：mysql

我们有一张桌子`products`。永远只有三种产品类型。我的 PM 坚持使用`ENUM`该`product.type`专栏`(free, pay, voucher)`，而我坚持制作它`product.type_id`。

我应该使用什么论据来反对 using `ENUM`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:42:50.373

正如 Raphael 所链接的，那篇文章很好地概述了`ENUM`. 但是，让我们分析一下您的具体情况。

您正在尝试为产品添加数据，特别是它的`type`. 现在您拥有三种产品类型。但是你能肯定地说永远不会有第四种产品吗？由于这在`ENUM`s 中非常昂贵，我会说这是反对使用它们的明确投票。您只应该在定义明确且不变的小而离散的选项集中考虑它们。产品类型只是关于您的产品的另一条信息。因此，它在列定义中没有位置。

这可能就足够了，但我想指出另一个弱点。您不能`ENUM`在其他任何地方链接 s。因此，如果您想将系统扩展到`product_groups`同样受. 当您有几张单独的桌子并且权力决定您应该添加第四张时，您会遇到麻烦。`type``ENUM`

老实说，对我来说，产品类型是一个参考表，通过它的标识符链接到任何依赖它的东西。因为迟早您必须扩展它或将其链接到其他地方。而`ENUM`s 并不是为此而生的。