# StackOverflow 问答 15782000-15782999

# ruby-on-rails - rails嵌套表单为生成的字段分配唯一的ID

> ID：15782006
> 
> 赞同：3
> 
> 时间：2013-04-03T08:07:16.100
> 
> 标签：ruby-on-rails, nested-forms

我想为嵌套表单生成的每一行分配唯一的 ID。

我查看了这个问题[Creating unique id for <fieldset> when using form_for Rails Nested Model Form](https://stackoverflow.com/q/13189689/1970061)但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:37:27.367

我设法通过查看嵌套形式 gem 解决了这个问题。为每个添加动态生成嵌套的 gem 内部唯一 ID。解析数据蓝图，并用生成的唯一 ID 替换“new_#{association}”。在我的情况下，关系就像“目录”has_many“类别”，所以我的关联是类别。我用 id = "new_categories" 分配了新行，并在添加新行时将其替换为唯一 ID。

也许它对其他人有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T11:53:59.597

实际上，Anil Maurya 提供的解决方案仅适用于通过 javascript 使用`link_to_add`gem 提供的动态添加的项目。但对我来说，它会留给`new_association`已经存在的项目。

为了正确识别每个嵌套元素（甚至是深度嵌套的元素），可以使用`f.index`. 优点是如果条目已经存在（意思是，如果它在数据库中），那么它将被它在数组中的索引替换。但是，using`link_to_add`将替换`f.index`为由 nested_form 自动生成的 ID，就像 Anil Maurya 的解决方案一样。

对于深度嵌套的解决方案，不是每次都编写`fields_for`和使用相同的变量`f`，如果您需要正确标记您的元素，您应该指定要渲染的部分，并且每次使用不同的`f`变量，您应该将其传递给部分

例如：如果你有

```
Main has_many :nested1s
Nested1 has_many :nested2s
Nested2 has_many :nested3s 
```

然后你的代码应该是这样的（我举了一个表格的例子，因为它更难）：

```
<%= nested_form_for @Main do |main_form| %>
<table>
    <thead>
        <stuff />
    </thead>
    <%= main_form.fields_for :nested1s, :wrapper => false do |nested1_f| %>
        <%= render 'main/nested1_fields', nested1_f: nested1_f %>
    <% end %> 
```

*_nested1_fields.html.erb*

```
<tbody class="fields">
    <tr>Stuff</tr>
    <tr>
        <table id="nested1-<%= nested1_f.index %>-nested2s">
        <thead>Stuff</thead>
        <%= nested1_f.fields_for :nested2s, :wrapper => false do |nested2_f| %>
            <%= render 'main/nested2_fields', nested1_f: nested1_f, nested2_f: nested2_f %>
        <% end %>
        </table>
    </tr>
    <tr><%= nested1_f.link_to_add 'add nested2', :nested2, :data => { :target => "#nested1-#{nested1_f.index}-nested2s"}, class: "btn btn-sm btn-success" %>
</tbody> 
```

*_nested2_fields.html.erb*

```
<tbody class="fields">
...
    <table id="nested1-<%= nested1_f.index %>-nested2-<%= nested2_f.index %>-nested3s">
       <%= fields_for :nested3s do |nested3_f| %>
       ...
...
</tbody> 
```

同样重要的是要注意 gemnested_form 只有在每个嵌套的字段集都由带有“字段”类的标签包装时才能正常工作

# android - 如何在网格视图中动态显示多个图像

> ID：15782011
> 
> 赞同：0
> 
> 时间：2013-04-03T08:07:28.320
> 
> 标签：android, android-layout

```
private Context mContext;
private int[] colors = new int[] { Color.WHITE, 0x30aaaaaa };
private int[] dotColors = new int[7];
private List<Integer> sta;
private TasksDataSource datasource;
private int con=1000;
public Integer[] mThumbIds = {
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green, R.drawable.green,
        R.drawable.green
    };
public ImageAdapter(Context context, List<Integer> content){
sta = content;
datasource = new TasksDataSource(context); //here
datasource.open(); 
mContext=context;
}
@Override
public int getCount() {
    return mThumbIds.length;
}
@Override
public Object getItem(int position) {
    return mThumbIds[position];
}
@Override
public long getItemId(int position) {
    return 0;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    int[] st = new int[sta.size()];   
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(20, 20));
    return imageView;
} 
```

我有一个动态初始化循环，它在前面的代码中有一些改变..

```
public Integer[] mThumbIds = new Integer[con];
for(int i = 0;i < st.length;i++)
      {
        st[i] = sta.get(i);
        Log.i("st::" + st[i]," ");

      }
      int ii=0,jj=0;
      while(ii<con)
      {
          if(st[jj]==0)
          {
              mThumbIds[ii]=R.drawable.red;
          }
          else if(st[jj]==1)
          {
              mThumbIds[ii]=R.drawable.green;
          }
          else
          {
              mThumbIds[ii]=R.drawable.grey;
          }
      } 
```

上述添加不起作用并无限运行并停止。我想要的是，在 mThumbIds[ii] 为 0 时显示红色 img ，当 mThumbIds[ii] 为 1 时显示绿色，当 mThumbIds[ii] 为 2 时显示灰色。我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:20:14.973

使用**通用图像加载器。**

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

它基于惰性列表（工作原理相同）。可以在本地加载图像或形成服务器。但它还有很多其他配置。我更喜欢使用*Universal Image Loader*，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 public Integer[] mThumbIds = {
    R.drawable.red, R.drawable.green,
    R.drawable.grey, .....
   };
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

根据位置显示图像。

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(mThumbIds[position], image,options);//provide imageurl, imageview and options. 
```

您可以配置其他选项以满足您的需求。

与通用图像加载器一起，您可以查看持有人以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html) 。

# android - 关于 android:launchMode="singleInstance" 兼容性

> ID：15782012
> 
> 赞同：2
> 
> 时间：2013-04-03T08:07:28.907
> 
> 标签：android

我已经`android:launchMode="singleInstance"`在我的应用程序中使用了如何在 android 中完美地编译和运行，`api 2.3.3`但是当我在基于 的 android 操作系统中部署我的应用程序时`api 4.0`，intent 无法在后台启动。android launchmode 和 android api 的版本有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T09:30:24.633

最后，我让它工作了。以下是我的问题的解决方案。

这是我的`BroadcastReceiver`：

```
public class BroadcastReceive extends BroadcastReceiver{
    // Display an alert that we've received a message.    
    @Override 
    public void onReceive(Context context, Intent intent){
        Intent i = new Intent(context,CallActivity.class);
        i.setAction(Intent.ACTION_VIEW);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_FROM_BACKGROUND);
        context.startActivity(i);
    }
} 
```

并在`manifest.xml`：

```
<activity
    android:name=".callActivity"
    android:label="@string/invite_activity_lbl"
    android:launchMode="singleTask">

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
    </intent-filter>
</activity> 
```

它与 API 级别 11 及更高级别兼容

# c# - 声明二维数组的问题

> ID：15782013
> 
> 赞同：3
> 
> 时间：2013-04-03T08:07:30.130
> 
> 标签：c#, multidimensional-array, jagged-arrays

**我有以下代码：**

```
 public int[] _SpDep = new int[50];
    public int[][] _SpDepCnt = new int[50][];
    public int[][] _SpReadType = new int[50][];

     _DepNo = Convert.ToInt16(strFileName[n].Substring(1, 2));
     _CntNo = Convert.ToInt16(strFileName[n].Substring(6, 2));
     _SpDep[_DepNo] = 1;
     _SpDepCnt[_DepNo][_CntNo] = 1;
     _SpReadType[_DepNo][_CntNo] = 1; 
```

**到达此行时出现错误：**

```
 _SpDepCnt[_DepNo][_CntNo] = 1; 
```

但是不知道怎么回事？有什么意见吗？是不是`2d array`申报错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:12:10.143

## 锯齿状阵列`[][]`

如果使用类型的数组`int[][]`（[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)），您希望像这样初始化数组：

```
public int[] _SpDep = new int[50];
public int[][] _SpDepCnt = new int[50][];
public int[][] _SpReadType = new int[50][]; 
```

然后初始化数组中的数组：

```
var length = 20;
for (int i = 0; i < length; i++)
{
    _SpDepCnt[i] = new int[length];
     _SpReadType[i] = new int[length];
} 
```

它被称为锯齿状数组，因为第二部分的长度可以变化，例如：

```
[1,2,3,4]
[5,6]
[7,8,9] 
```

## 多维数组`[,]`

我相信您想使用`int[,]`称为[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)的类型。**他们制作了一个具有两个固定维度**的数组。

```
public int[,] _SpDepCnt = new int[50, 20];
public int[][] _SpReadType = new int[50, 20]; 
```

多维数组将为每个索引创建相同大小的数组：

```
[1,2,3]
[4,5,6]
[7,8,9] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:10:43.930

当您使用 [][] 声明“数组数组”时，您需要初始化外部维度以引用分配的数组，如下所示：

```
public int[][] _SpReadType = new int[50][];

for (int i = 0; i < 50; ++i)
    _SpReadType[i] = new int[SIZE]; // Where you have to decide on SIZE 
```

[][] 数组也称为“不规则数组”或“锯齿数组”，因为每一行的大小可以不同，因为每一行都是一个单独的数组。

或者，您可以使用以下语法使用实际的二维数组：[,]

例如：

```
public int[,] _SpReadType = new int[50,SIZE]; 
```

然后你像这样访问元素：

```
int value = _SpReadType[row,col]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:10:11.473

这是一个锯齿状数组，您必须先初始化元素才能使用它

```
myJaggedArray[0] = new int[5];
myJaggedArray[1] = new int[4];
myJaggedArray[2] = new int[2]; 
```

[http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:11:10.760

你尝试的是所谓*[`jagged arrays`](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)*的，不是*[`multidimensional arrays`](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)*。

如果你想使用二维数组，你可以像这样使用它；

```
 public int[,] _SpDepCnt = new int[50, 50];
 _SpDepCnt[_DepNo, _CntNo] = 1; 
```

如果你想使用*jagged array*，你可以像这样使用它；

```
public int[][] _SpReadType = new int[50][];

for (int i = 0; i < 50; i++)
    _SpReadType[i] = new int[SIZE]; 
```

> 锯齿状数组是**其元素为数组的数组**。锯齿状数组的元素可以具有不同的维度和大小。锯齿状数组有时称为“数组数组”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:11:27.947

您必须为 2D 阵列保留内存

```
public int[][] _SpDepCnt = new int[50][];
_SpDepCnt[_DepNo] = new int[50];
_SpDepCnt[_DepNo][_CntNo] = 1; 
```

# android - Android：将文本文件上传到谷歌驱动器

> ID：15782031
> 
> 赞同：0
> 
> 时间：2013-04-03T08:08:40.823
> 
> 标签：android, google-drive-api

我正在尝试将一个空的临时文本文件上传到谷歌驱动器，但它没有成功。`file`返回 null。但是，我可以使用 google drive 网站上的示例从我的相机上传图像。我需要为缓存设置任何特殊权限吗？谢谢你的帮助。

这是我的尝试：

```
java.io.File outputDir = getApplicationContext().getCacheDir(); // context being the Activity pointer
java.io.File tempFile = java.io.File.createTempFile("hello", "txt", outputDir);
FileContent mediaContent = new FileContent("text/plain", tempFile);

// File's metadata.
File body = new File();
body.setTitle(tempFile.getName());
body.setMimeType("text/plain");
File file = service.files().insert(body, mediaContent).execute(); 
```

谷歌示例是如何做到的：

```
String mediaStorageDir = Environment.getExternalStoragePublicDirectory(
String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
fileUri = Uri.fromFile(new java.io.File(mediaStorageDir + java.io.File.separator + "IMG_"
+ timeStamp + ".jpg"));

Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
saveFileToDrive();

private void saveFileToDrive() {
  Thread t = new Thread(new Runnable() {
  @Override
 public void run() {
    try {           
        java.io.File fileContent = new java.io.File(fileUri.getPath());
        FileContent mediaContent = new FileContent("image/jpeg", fileContent);

        // File's metadata.
        File body = new File();
        body.setTitle(fileContent.getName());
        body.setMimeType("image/jpeg");
        File file = service.files().insert(body, mediaContent).execute();
    }
 });} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:29:38.553

greenapps 回答了它。我无法上传空文本文件。我想我可以，因为您可以上传带有正文（标题、mime 类型..）但没有任何内容的文件。

我的代码最终成为

```
 java.io.File tempFile = java.io.File.createTempFile("supertime", "txt");

            String tempPath = tempFile.getAbsolutePath();

            BufferedWriter bw = new BufferedWriter(new FileWriter(tempPath));
            bw.write("Hello");
            bw.close();

            FileContent mediaContent = new FileContent("text/plain", tempFile);
            Log.i("Drive", tempPath);
            FileInputStream fis = new FileInputStream(tempPath);

            StringBuilder sb = inputStreamToStringBuilder(fis);
            showText(sb);
            Log.i("Drive", "done input stream");
            // File's metadata.
            File body = new File();
            body.setTitle("Kapleck");
            body.setMimeType("text/plain");
            File file = service.files().insert(body, mediaContent).execute(); 
```

# android - Android：随机数生成器选择短语和短语管理

> ID：15782035
> 
> 赞同：0
> 
> 时间：2013-04-03T08:08:56.163
> 
> 标签：android, arrays, string, text

我要求一个特定的场景。

我有很多短引号要随机绘制以显示。是否有以前为此编写的良好示例代码？

我现在在文本编辑器中的引号。我是否应该将它作为文本文件存储在 Android 项目中并逐行加载为文本文件并将其加载到字符串数组中？如果是这样，我该怎么做（从 Android JAVA 中的文本文件加载引号）？

对于每个报价，我还应该将其存储为 String.xml 吗？我问这个 b/c 我认为 XML 标记的非常低效的 b/c 会增大文件大小..

请建议并原谅我对这里的一些事情的无知:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:16:10.080

您可以使用文本文件，并在其中将您的引号放在此格式中

```
string:string:string
string:string:string
string:string:string 
```

现在读取该文件并将其转换为这样的数组

```
FileReader fin = new FileReader(fileName);
Scanner src = new Scanner(fin);
ArrayList<String> lines = new ArrayList<String>();
src.useDelimiter(":");

while (src.hasNext()) {
    lines.add(src.nextLine());
    // replace above line with array
}
String[] lineArray = new String[lines.size()];
lines.toArray(lineArray); 
```

并从中选择随机报价

```
Random r = new Random();
Log.i("selected quote","quote : " + lineArray[r.nextInt(lines.size())]); 
```

希望对你有帮助 ：）

# wpf - 设计时错误（未找到可附加属性 x）

> ID：15782036
> 
> 赞同：4
> 
> 时间：2013-04-03T08:09:09.153
> 
> 标签：wpf, silverlight, windows-phone-7, xaml, expression-blend

我使用 Blend for VS 2012 创建了一个 WP7.8 应用程序的模板。有一些示例数据（位于单独的 xaml 文件中，见下方）在 silverlight 页面上以设计模式正确显示。更改此数据（使用命名空间和类名）会导致编辑器错误，并且新数据不再显示在设计模式中。（List 组件显示为空）

页面的主要xaml文件如下

```
<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800" 
    x:Class="DesignSketch.MainPage"
    d:DataContext="{d:DesignData SampleData/MainViewModelSampleData.xaml}"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <!--Pivot Control-->
        <controls:Pivot Title="Application">
            <!--Pivot item one-->
            <controls:PivotItem Header="List">
                <!--Double line list with text wrapping-->
                <ListBox x:Name="FirstListBox" ItemsSource="{Binding Items}" Margin="0,0,-12,0">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                                <TextBlock Text="{Binding Sum}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                                <TextBlock Text="{Binding Description}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </controls:PivotItem>

        </controls:Pivot>
    </Grid>
</phone:PhoneApplicationPage> 
```

可以看出它使用

```
d:DataContext="{d:DesignData SampleData/MainViewModelSampleData.xaml}" 
```

用于设计模式绑定。但是，错误（提示）显示为“*在 MainViewModelSampleData.xaml 中发现错误*”

这个 xaml 的内容是

```
<viewModels2:ExpensesPageVM
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewModels2="clr-namespace:DesignSketch"
    >
    <viewModels2:ExpensesPageVM.Items>
          <viewModels2:Expense Sum="10" Description="Fee1"   />
          <viewModels2:Expense Sum="600" Description="Fee2"  />
    </viewModels2:ExpensesPageVM.Items>

</viewModels2:ExpensesPageVM> 
```

为此，显示以下提示错误
**在类型 ExpensesPageVM 中找不到可附加属性 Items**

**未找到类型 viewModels2:Expense。确认您没有丢失程序集引用并且所有引用的程序集都已构建**

ExpensesPageVM 和 Expense 类都位于 DesignSke​​tch 命名空间中，并具有以下代码：

```
using System;
using System.Linq;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace DesignSketch
{
    public class ExpensesPageVM : INotifyPropertyChanged
    {
        public ExpensesPageVM()
        {
            this.Items = new ObservableCollection<Expense>();
        }

        /// <summary>
        /// A collection for ItemViewModel objects.
        /// </summary>
        public ObservableCollection<Expense> Items { get;  set; }

        private string _sampleProperty = "Sample Runtime Property Value";
        /// <summary>
        /// Sample ViewModel property; this property is used in the view to display its value using a Binding
        /// </summary>
        /// <returns></returns>
        public string SampleProperty
        { 
            get
            {
                return _sampleProperty;
            }
            set
            {
                _sampleProperty = value;
                NotifyPropertyChanged("SampleProperty");
            }
        }

        public bool IsDataLoaded
        {
            get;
            private set;
        }

        /// <summary>
        /// load initial data from sdf
        /// </summary>
        public void LoadData()
        {
            //...
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String propertyName)
        {
            if (null != PropertyChanged)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

其他文件

```
using System;
using System.Data.Linq.Mapping;
using System.ComponentModel;

namespace DesignSketch
{
   [Table]
    public class Expense: INotifyPropertyChanged, INotifyPropertyChanging
    {
        private int expenseID;

        [Column(IsPrimaryKey = true,
            IsDbGenerated = true,
            DbType="INT NOT NULL Identity",
            CanBeNull=false,
            AutoSync=AutoSync.OnInsert)]
        public int ExpenseID { get {return  expenseID;}
            set
            {
                if (expenseID == value) return;
                NotifyPropertyChanging("ExpenseID");
                expenseID = value;
                NotifyPropertyChanged("ExpenseID");
            }
        }

        private string description { get; set; }

        [Column]
        public string Description { get { return description; }
            set
            {
                if (description == value) return;

                NotifyPropertyChanging("Description");
                description = value;
                NotifyPropertyChanged("Description");
            }
        }

        private decimal sum;

        [Column]
        public decimal Sum
        {
            get { return sum; }
            set
            {
                if (sum == value) return;

                NotifyPropertyChanging("Sum");
                sum = value;
                NotifyPropertyChanged("Sum");

            }
        }

        private DateTime date;

        [Column]
        public DateTime Date { get { return date; }
            set
            {
                if (date == value) return;

                NotifyPropertyChanging("Date");
                date = value;
                NotifyPropertyChanged("Date");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public event PropertyChangingEventHandler PropertyChanging;

        private void NotifyPropertyChanging(string propertyName)
        {
            if (PropertyChanging != null)
            {
                PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
            }
        }
    }
} 
```

费用被定制为存储在手机的本地数据库中。

我有几乎相同的代码工作（由 Blend 生成），其中示例数据在设计时完美显示。有没有人知道为什么它没有这个代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T12:33:37.243

如果 DesignSke​​tch 不在当前装配中，则更改此行

```
 xmlns:viewModels2="clr-namespace:DesignSketch" 
```

至

```
 xmlns:viewModels2="clr-namespace:DesignSketch;assembly=NameOfAssemblyThatHoldsDesignSketch" 
```

# javascript - 我想在链接中使用 javascript vars

> ID：15782043
> 
> 赞同：-5
> 
> 时间：2013-04-03T08:09:29.607
> 
> 标签：javascript, hyperlink

我正在使用以下 javascript。但输出是文本。我想要链接中的这个输出。

```
<script type="text/JavaScript">

  _url = document.location

  _picurl = "danny.jpg"

  _title = "Your Title Here"

  _desc = "Your Description Here"

 _fbshare ="http://fbshare.mobie.in/l"

  document.write( _fbshare + "?" + "site=" + _url + "&Pic=" + _picurl + "&Title=" + _title + "&Ds=" + _desc)

</script> 
```

我想`document.write( _fbshare + "?" + "site=" + _url + "&Pic=" + _picurl + "&Title=" + _title + "&Ds=" + _desc)`在链接中使用，但不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:13:41.350

而不是一些凌乱`document.write`的使用更清洁的方法并选择或创建锚并相应地设置它的属性。

此外，您不能通过 修改已经存在的元素`document.write`，您必须从 dom 中选择它，然后操作它的属性。

例如，如果您的 html 中已有链接，则正确的方法是：

```
<a id="link" href=""></a> 
```

你的脚本：

```
var a = document.getElementById("link"); // or another equivalent method
a.innerHTML = 'linktext';
a.href = "#somelink"; 
```

或者如果链接尚不存在：

```
var a = document.createElement("a");
a.innerHTML = 'linktext';
a.href = "#somelink";
// insert into the document
document.body.appendChild(a); 
```

[看例子](http://jsfiddle.net/usCFt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:26:35.957

在您希望链接出现的位置添加以下元素：

```
<span id='mySpan'></span> 
```

以下代码可以将您的链接放入此元素中：

```
<script language='javascript'>
_url = document.location;    
_picurl = "danny.jpg";    
_title = "Your Title Here";
_desc = "Your Description Here";    
_fbshare ="http://fbshare.mobie.in/l";
_linkTitle = "Link";

document.getElementById('mySpan').innerHTML="<a href='"+_fbshare + "?" + "site=" + _url + "&Pic=" + _picurl + "&Title=" + _title + "&Ds=" + _desc+"'>"+_linkTitle+"</a>";
</script> 
```

# c# - 通过 foreach 与 index 访问 Application.OpenForms

> ID：15782044
> 
> 赞同：1
> 
> 时间：2013-04-03T08:09:30.460
> 
> 标签：c#, arrays, winforms, collections

我只是偶然发现了这个问题，我很好奇为什么会这样：如果我访问`Application.OpenForms`via index 集合中的表单，编译器会告诉我它是一个表单：

```
var form = Application.OpenForms[0];
form.Name = "A new name"; 
```

这工作得很好。但如果我这样访问它：

```
foreach (var form in Application.OpenForms)
{
  form.Name = "A new name";
} 
```

编译器告诉我`form`是一个对象。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:16:17.723

您在 foreach 循环中获取对象，因为`FormCollection`类实现了**非通用** [IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.readonlycollectionbase.getenumerator.aspx)接口（继承自 ReadOnlyCollectionBase）。但它有返回的索引器`Form`。

只需将对象强制转换`Form`为循环输入：

```
foreach (Form form in Application.OpenForms)
{
   form.Name = "A new name";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:26:47.067

如果您检查[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性，它的值由“`FormCollection`包含此应用程序拥有的所有当前打开的表单的 A”定义。继承`FormCollection`自[`ReadOnlyCollectionBase`](http://msdn.microsoft.com/en-us/library/system.collections.readonlycollectionbase.aspx)，然后集合中的每个实例都被定义为一个对象。所以可以将它转换为 a`Form`来使用它，或者只是`Form`在`foreach`循环中使用而不是使用`var`.

# .net - 如何通过 MSBuild 扩展包配置网站以在 IIS 6 上使用 .net 4？

> ID：15782060
> 
> 赞同：0
> 
> 时间：2013-04-03T08:10:22.480
> 
> 标签：.net, iis, iis-6, msbuildextensionpack

我正在使用 msbuild 扩展包（版本 3.5）来创建网站（在 IIS 版本 6、Windows 2003 上）。

我正在尝试将网站配置为使用 .net 框架版本 4.0（而不是默认的 2.0 版本）。

当我使用 IIS 管理包执行此操作时，我选择虚拟目录的属性，转到“asp.net 框架”选项卡，然后选择版本 4.0。

如何使用 msbuild 扩展包中的任务进行配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:54:08.050

在服务器上安装所需版本的 .net 并注册版本

[看这里](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.80%29.aspx)

为您的应用程序创建一个新的应用程序池并将其分配给您在 IIS 中的应用程序

# qt - 停止 QAudioOutput 的正确方法（或错误？）

> ID：15782062
> 
> 赞同：2
> 
> 时间：2013-04-03T08:10:29.800
> 
> 标签：qt, qt4.8

（在 Qt ~~4.8.2~~ 4.8.3、Qt MultimediaKit 1.2、Linux 下（编辑：Kubuntu 12.10、qt from packages）

我有一个*QAudioOutput*，它每 20 毫秒输入一次数据。如果我通过*::stop() 停止*它，它会发出*stateChanged()*信号，表明它已停止（立即；它的线程与控制线程相同。即使它们都在 GUI 线程中或两者都存在，症状仍然存在在另一个）。

然后我将其删除，但每 10 次尝试中会出现一次或两次崩溃，并出现以下回溯：

```
#0  0x00007fab18000148 in ?? ()
#1  0x00007fab47b51eef in QMetaObject::activate (sender=0x7fab1800b060, m=<optimized out>, local_signal_index=<optimized out>, argv=0x7fab2b0e8850) at kernel/qobject.cpp:3541
#2  0x00007fab4aa46eae in QAbstractAudioOutput::stateChanged(QAudio::State) () from /usr/lib/x86_64-linux-gnu/libQtMultimediaKit.so.1
#3  0x00007fab2b0f38c8 in ?? () from /usr/lib/x86_64-linux-gnu/qt4/plugins/audio/libqtmedia_pulse.so
#4  0x00007fab2b0f33ad in ?? () from /usr/lib/x86_64-linux-gnu/qt4/plugins/audio/libqtmedia_pulse.so
#5  0x00007fab420a475b in ?? () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#6  0x00007fab3b1749fd in pa_pdispatch_run () from /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-2.1.so
#7  0x00007fab42086e1d in ?? () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#8  0x00007fab3b178a2b in ?? () from /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-2.1.so
#9  0x00007fab4209a374 in pa_mainloop_dispatch () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#10 0x00007fab4209a725 in pa_mainloop_iterate () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#11 0x00007fab4209a7d0 in pa_mainloop_run () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#12 0x00007fab420a8b1f in ?? () from /usr/lib/x86_64-linux-gnu/libpulse.so.0
#13 0x00007fab3b186543 in ?? () from /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-2.1.so
#14 0x00007fab477aee9a in start_thread (arg=0x7fab2b0e9700) at pthread_create.c:308
#15 0x00007fab46cc6cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#16 0x0000000000000000 in ?? () 
```

这似乎是某种仍在尝试访问旧*QAudioOutput*的脉冲线程（没有运气）。通过信号/插槽，这应该是线程安全的（根据[QObject::~QObject](http://qt-project.org/doc/qt-4.8/qobject.html#dtor.QObject)，我从控制线程中删除它并没有做错任何事情（由外部信号调用，而不是通过*QAudioOutput*的信号顺便说一句）。

即使我调用*deleteLater()*也会发生崩溃。我做错了什么，或者这可能是 Qt 中的错误？如果这是一个错误，我的理论是它没有获得更多数据，这会导致带有*BufferUnderflow错误的**空闲*状态，该错误来自没有正确同步的 Pulse。作为一种解决方法，我将停止喂它并在停止之前等待空闲，但我仍然不明白这种崩溃是如何发生的。

 ***编辑：工作示例**（更改一个简单的 gui 应用程序）

在实际应用中会发生 VoIP 呼叫；大多数时候它关闭正常，但有时它会崩溃。以下示例尝试模拟单个 20ms 数据包播放（之前音频初始化，之后音频停止；我们等待 22ms 使缓冲区下溢/状态更改为空闲，在我看来这是关键。崩溃本身确实由于时序值低（它只是有助于更快地崩溃）而不会发生，在生产代码中它可能会因实际调用而崩溃。）

[主窗口.h主窗口](http://pastebin.com/k4whfeaz) [.cpp](http://pastebin.com/ZqFH9HaL "主窗口.cpp")

附加项目文件：

```
QT += mobility
MOBILITY += multimedia
CONFIG += mobility 
```*

# android - 调用返回 Task 的 WCF Web 服务 来自安卓

> ID：15782063
> 
> 赞同：1
> 
> 时间：2013-04-03T08:10:32.277
> 
> 标签：android, .net, wcf, async-await

我有一个 .NET 4.5 WCF Web 服务，它的界面中有以下代码：

```
[OperationContract]
[WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "UpdCategorieArticoli",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
Task<JsonGenericResponse> UpdCategorieArticoli(string jsonData); 
```

并且是这样实现的（在综合系统中）：

```
public async Task<JsonGenericResponse> UpdCategorieArticoli(string jsonData)
{
    JsonGenericResponse objWmJson = new JsonGenericResponse();
    objWmJson.IsInError = "true";
    try
    {
        DataIfCloudEspresso objData = new DataIfCloudEspresso();
        string xmlData = <some transformation from json>;
        int intUpdatedCount = await objData.UpdCategorieArticoli(xmlData );
        if (intUpdatedCount == 1)
        {
            objWmJson.IsInError = "false";
            objWmJson.Value = intUpdatedCount.ToString();
        }
        return objWmJson;
    }
} 
```

JsonGenericResponse 是一个类：

```
public class JsonGenericResponse
{
    string _Value;
    public string Value
    {
        get
        {
            return _Value;
        }
        set
        {
            _Value = value;
        }
    }
    .... Other properties
} 
```

数据层中被调用的方法：

```
public async Task<int> UpdCategorieArticoli(string xmlData)
{
    try
    {
        using (SqlConnection objConn = new SqlConnection(base.ConnectionString))
        {
            using (SqlCommand cmdADO = new SqlCommand("spUpd_CategorieArticoli", objConn))
            {
                cmdADO.Parameters.Add(new System.Data.SqlClient.SqlParameter("@XMLDoc", SqlDbType.Text));
                cmdADO.Parameters["@XMLDoc"].Value = xmlData;
                cmdADO.Parameters.Add(new System.Data.SqlClient.SqlParameter("@RETURN_VALUE", SqlDbType.Int));
                cmdADO.Parameters["@RETURN_VALUE"].Direction = ParameterDirection.ReturnValue;
                //
                cmdADO.CommandType = CommandType.StoredProcedure;
                //
                await objConn.OpenAsync();
                await cmdADO.ExecuteNonQueryAsync();
                return (int)cmdADO.Parameters["@RETURN_VALUE"].Value;
            }
        }
    }
} 
```

此代码已从 jQuery 成功调用并且它正在工作，调用为

```
$.ajax({
    type: "POST",
    url: "WEspresso.svc/UpdCategorieArticoli",
    data: strData,
    async: true,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    complete: saveCategorieArticoli_onComplete
}); 
```

在回调中，我可以看到我的 json 字符串，基于 JsonGenericResponse 类，正如预期的那样。

当我尝试从 Android 调用此 Web 服务时，问题就来了。如果我执行合同为

```
[OperationContract]
[WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "UpdCategorieArticoliSync",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
JsonGenericResponse UpdCategorieArticoliSync(string jsonData); 
```

如果我使用断点从 Visual Studio 2012 启动调试站点，则实现中的一些假代码我可以看到该方法已到达，而不是如果我尝试调用返回 Task<> 的方法，则 Visual Studio 2012 中的断点是未从我的 Android 代码中获取：

```
public class wsWcfUpdCateg extends AsyncTask<String, Integer, String>{
    public final String SOAP_ACTION = "http://tempuri.org/UpdCategorieArticoli";
    public  final String SOAP_ADDRESS = "http://192.168.0.1/CloudTest/wespresso.svc/UpdCategorieArticoli";
public Context maincontext; 
HttpResponse objResponse = null;

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);             
}

@Override
protected String doInBackground(String... arg0) {
    StringBuilder objString = new StringBuilder();
    try
    {
        HttpClient objHttpClient = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(objHttpClient.getParams(), 10000);
        JSONObject json = new JSONObject();
        HttpPost objPost = new HttpPost(SOAP_ADDRESS);
        //
        ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("jsonData", arg0[0].toString()));
        for (NameValuePair p : params){
            json.put(p.getName(), p.getValue());
        }        
        StringEntity se = new StringEntity(json.toString());
        objPost.setEntity(se);
        objPost.setHeader("Accept", "application/json");
        objPost.setHeader("Content-type", "application/json");  
        objResponse = objHttpClient.execute(objPost);              
        StatusLine objStatusLine = objResponse.getStatusLine();
        Integer intStatus = objStatusLine.getStatusCode();              
        //
        return objString.toString() ;    
    }   
} 
```

}

在上面的代码中， intStatus 是 400 ，如果我只是将 UpdCategorieArticoli 更改为 UpdCategorieArticoliSync 而不是我得到 200 （并且到达.NET代码中的断点）。如何实现 Android 代码，以便它可以与返回 Task 的 WCF 方法一起使用，并使用 JSON 作为响应格式？我应该使用Android的“同步版本”，否则没有希望？

# android - 在 Android 中单击 Spinners 中的下拉菜单时出错

> ID：15782075
> 
> 赞同：0
> 
> 时间：2013-04-03T08:11:27.653
> 
> 标签：android

我想从 JSON 中获取 Title 字符串。我得到了值（使用 Debugger 检查）但是在微调器错误中的下拉列表中列出时

```
 04-03 13:25:07.528: E/AndroidRuntime(663):
 java.lang.IllegalStateException: ArrayAdapter requires the resource ID
 to be a TextView 04-03 13:25:07.528: E/AndroidRuntime(663):at
 android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)

 04-03 13:25:07.528: E/AndroidRuntime(663):     at
 android.widget.ArrayAdapter.getView(ArrayAdapter.java:323) 
```

等等......我需要一个完美的解决方案来解决这个问题............

```
class coursesJson extends AsyncTask<String, Void, String> {

        protected void onPostExecute(String coursesJSON) {

            coursesArray=new JSONArray();
            try {

                coursesArray = new JSONArray(coursesJSON);

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            for (int i = 0; i < coursesArray.length(); i++) {

            try {
                String title = coursesArray.getJSONObject(i).getString(
                        "Title");
                ArrayList<String> Title = new ArrayList<String>();
                Title.add(title);

                Log.d("Title",title);

                 ArrayAdapter<String> coursesAdapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.registeration,Title);
                  coursesAdapter.setDropDownViewResource(android.R.layout.activity_list_item);
                  spinner.setSelection(Title.indexOf(title));
                  spinner.setAdapter(coursesAdapter);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        }
    }

        public String getStringContent(String uri) throws Exception {

        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(uri));
            HttpResponse response = client.execute(request);
            InputStream ips = response.getEntity().getContent();
            BufferedReader buf = new BufferedReader(new InputStreamReader(ips,
                    "UTF-8"));

            StringBuilder sb = new StringBuilder();
            String s;
            while (true) {
                s = buf.readLine();
                if (s == null || s.length() == 0)
                    break;
                sb.append(s);

            }
            buf.close();
            ips.close();
            return sb.toString();

        } finally {
            // any cleanup code...
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:48:03.950

尝试使用这个：

```
ArrayAdapter<String> coursesAdapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_spinner_dropdown_item, Title);
spinner.setAdapter(coursesAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:20:59.167

正如错误所说，您正在尝试使用错误的资源 ID。例如使用

```
android.R.layout.simple_spinner_dropdown_item 
```

代替

```
android.R.layout.activity_list_item 
```

在

```
coursesAdapter.setDropDownViewResource(android.R.layout.activity_list_item); 
```

# html - 使用 CSS 将元素置于最前面

> ID：15782078
> 
> 赞同：101
> 
> 时间：2013-04-03T08:11:32.860
> 
> 标签：html, css, z-index, jsfiddle

我不知道如何使用`CSS`. 我已经尝试将 z-index 设置为 1000 并将位置设置为相对，但它仍然失败。

这是示例-

```
#header {
    background: url(http://placehold.it/420x160) center top no-repeat;
}
#header-inner {
    background: url(http://placekitten.com/150/200) right top no-repeat;
}
.logo-class {
    height: 128px;
}
.content {
    margin-left: auto;
    margin-right: auto;
    table-layout: fixed;
    border-collapse: collapse;
}
.td-main {
    text-align: center;
    padding: 80px 10px 80px 10px;
    border: 1px solid #A02422;
    background: #ABABAB;
}
```

```
<body>
    <div id="header">
        <div id="header-inner">
            <table class="content">
                <col width="400px" />
                <tr>
                    <td>
                        <table class="content">
                            <col width="400px" />
                            <tr>
                                <td>
                                    <div class="logo-class"></div>
                                </td>
                            </tr>
                            <tr>
                                <td id="menu"></td>
                            </tr>
                        </table>
                        <table class="content">
                            <col width="120px" />
                            <col width="160px" />
                            <col width="120px" />
                            <tr>
                                <td class="td-main">text</td>
                                <td class="td-main">text</td>
                                <td class="td-main">text</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <!-- header-inner -->
    </div>
    <!-- header -->
</body>
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-04-03T08:16:00.733

添加`z-index:-1`和`position:relative`到 .content

```
#header {
    background: url(http://placehold.it/420x160) center top no-repeat;
}
#header-inner {
    background: url(http://placekitten.com/150/200) right top no-repeat;
}
.logo-class {
    height: 128px;
}
.content {
    margin-left: auto;
    margin-right: auto;
    table-layout: fixed;
    border-collapse: collapse;
    z-index: -1;
    position:relative;
}
.td-main {
    text-align: center;
    padding: 80px 10px 80px 10px;
    border: 1px solid #A02422;
    background: #ABABAB;
}
```

```
<body>
    <div id="header">
        <div id="header-inner">
            <table class="content">
                <col width="400px" />
                <tr>
                    <td>
                        <table class="content">
                            <col width="400px" />
                            <tr>
                                <td>
                                    <div class="logo-class"></div>
                                </td>
                            </tr>
                            <tr>
                                <td id="menu"></td>
                            </tr>
                        </table>
                        <table class="content">
                            <col width="120px" />
                            <col width="160px" />
                            <col width="120px" />
                            <tr>
                                <td class="td-main">text</td>
                                <td class="td-main">text</td>
                                <td class="td-main">text</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <!-- header-inner -->
    </div>
    <!-- header -->
</body>
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-06-26T01:42:01.553

注意：z-index[仅适用于定位元素](http://www.w3schools.com/cssref/pr_pos_z-index.asp)（`position:absolute`、`position:relative`或`position:fixed`）。使用其中之一。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-09T05:19:42.160

在我的情况下，我必须将我想要的元素的 html 代码移动到 html 文件末尾的前面，因为如果一个元素具有 z-index 而另一个元素没有 z 索引，则它不起作用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-12T18:43:29.783

另一个注意事项：在查看相对于其他对象的子对象时，必须考虑 z-index。

例如

```
<div class="container">
    <div class="branch_1">
        <div class="branch_1__child"></div>
    </div>
    <div class="branch_2">
        <div class="branch_2__child"></div>
    </div>
</div> 
```

如果你给了`branch_1__child`一个 z-index`99`并且你给了`branch_2__child`一个 z-index 1，但你也给了你`branch_2`的 z-index`10`和你`branch_1`的 z-index `1`，你`branch_1__child`仍然不会出现在你的前面`branch_2__child`

无论如何，我想说的是；如果您希望放置在前面的元素的父元素的 z-index 低于其相对元素，则该元素不会被放置在更高的位置。

z-index 是相对于其容器的。放置在层次结构中更靠前的容器上的 z-index 基本上会启动一个新的“层”

开始[inception]tion

这是一个可以玩的小提琴：

[https://jsfiddle.net/orkLx6o8/](https://jsfiddle.net/orkLx6o8/)

# python - 将参数传递给 subprocess.Popen() 调用的“可执行”参数

> ID：15782081
> 
> 赞同：2
> 
> 时间：2013-04-03T08:11:43.327
> 
> 标签：python, subprocess, tcsh

subprocess.Popen() 允许您通过“可执行”参数传递您选择的外壳。
我选择通过“/bin/tcsh”，我不希望 tcsh 读取我的`~/.cshrc`.
tcsh 手册说我需要通过`-f`才能`/bin/tcsh`做到这一点。

如何让 Popen 使用 -f 选项执行 /bin/tcsh？

```
import subprocess

cmd = ["echo hi"]
print cmd

proc = subprocess.Popen(cmd, shell=False,  executable="/bin/tcsh", stderr=subprocess.PIPE, stdout=subprocess.PIPE)
return_code = proc.wait()

for line in proc.stdout:
    print("stdout: " + line.rstrip())

for line in proc.stderr:
    print("stderr: " + line.rstrip())

print return_code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:21:03.273

让您的生活更轻松：

```
subprocess.Popen(['/bin/tcsh', '-f', '-c', 'echo hi'],
    shell=False, stderr=subprocess.PIPE, stdout=subprocess.PIPE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:15:59.967

我不明白您的问题“将参数传递给子进程可执行文件”的标题与其余部分有什么关系，尤其是“我希望 tcsh 不读取我的 ~/.cshrc”。

但是 - 我知道你没有正确使用你的 Popen。

您的 cmd 应该是列表或字符串，而不是 1 个字符串的列表。

所以`cmd = ["echo hi"]`应该是`cmd = "echo hi"`或者`cmd = ["echo", "hi"]`

然后，根据它是字符串还是列表，您需要将 shell 值设置为`True`或`False`。`True`如果是字符串，`False`如果是列表。

* * *

“传递”参数是函数的术语，使用 Popen 或 subprocess 模块与函数不同，虽然它们是函数，但您实际上是在用它们运行命令，而不是传统意义上的向它们传递参数，所以如果你想运行一个进程，`'-f'`你只需添加`'-f'`到你想运行命令的字符串或列表中。

* * *

要将整个事情放在一起，您应该运行以下内容：

```
proc = subprocess.Popen('/bin/tcsh -f -c "echo hi"', shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE) 
```

# java - 构造函数 CompanyDetail() 未定义 (java)

> ID：15782082
> 
> 赞同：0
> 
> 时间：2013-04-03T08:11:45.597
> 
> 标签：java, constructor

```
import java.io.*;
import java.util.*;

public class CompanyDetail {

    int Id;
    String name;
    String department;
    static String companyname="Maruti Suzuki";

    CompanyDetail(int ID,String Name,String Dept) {
        Id=ID;
        name=Name;
        department=Dept;
    }

    public void getdata() {
        try {
            InputStreamReader in = new InputStreamReader(System.in);
            BufferedReader br = new BufferedReader(in);
            System.out.println("Employee Id :");
            Id = Integer.parseInt(br.readLine());
            System.out.println("Employee name :");
            name= br.readLine();
            System.out.println("Employee Department :");
            department=br.readLine();
            System.out.println("Company is :"+companyname);
        }
        catch(Exception e) {
        }
    }
    public void printdata() {
        System.out.println("Employee Id is :"+Id);
        System.out.println("Employee Name is :"+name);
        System.out.println("Employee Department is :"+department);
        System.out.println("Company is :"+companyname);
    }
}

public class CompanyUse {
    public static void main(String[] args)  {
        CompanyDetail cd = new CompanyDetail(int Id,String name,String department);
        cd.getdata();
        cd.printdata();
    }
} 
```

当我创建一个对象时，我在一个主块中遇到错误..eclips 一直告诉我构造函数 CompanyDetail() 是未定义的....没有构造函数它在我的输出中给了我一个空值..请帮助我..i我刚开始学习java...提前非常感谢你:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:30:41.520

仅当您不创建任何其他构造函数时，编译器才会自动创建默认构造函数（带有空参数列表）。在你的情况下，你有`CompanyDetail(int ID,String Name,String Dept)`所以它不是自动生成的。您可以自己编写默认构造函数：

```
CompanyDetail() {} 
```

另外我有一些tips：

*   此代码未编译，请修复所有错误 - java 编译器非常擅长说明代码有什么问题（：
*   永远不要使用空的 catch 块，
*   尝试遵循 Java 中流行的命名约定。

# ios - 在 iOS 上设置初始焦距

> ID：15782083
> 
> 赞同：18
> 
> 时间：2013-04-03T08:11:54.290
> 
> 标签：ios, camera, focus, qr-code

我正在开发一个 iOS 应用程序，其中一个功能是扫描 QR 码。为此，我使用了出色的库 ZBar。扫描工作正常，通常非常快。但是，当您使用较小的 QR 码时，扫描时间会更长，这主要是因为自动对焦需要一些时间来调整。我正在试验并注意到可以使用以下代码锁定焦点：

```
AVCaptureDevice *cameraDevice = readerView.device;
if ([cameraDevice lockForConfiguration:nil]) {
     [cameraDevice setFocusMode:AVCaptureFocusModeLocked];
     [cameraDevice unlockForConfiguration];
} 
```

在成功扫描后使用此代码时，即将进行的扫描非常快。这让我想知道，我可以在扫描一个代码之前以某种方式锁定焦点吗？该应用程序只会扫描相当小的二维码，因此永远不需要关注远处的东西。当然，我可以实现诸如点击聚焦之类的东西，但最好我想避免那个额外的步骤。有没有办法做到这一点？或者在处理较小的二维码时是否有另一种加快速度的方法？

// 亚历山大

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-25T10:31:39.983

在 iOS7 中，这现在是可能的！

Apple 已将属性 autoFocusRangeRestriction 添加到 AVCaptureDevice 类。此属性属于枚举 AVCaptureAutoFocusRangeRestriction，它具有三个不同的值：

1.  AVCaptureAutoFocusRangeRestrictionNone - 默认，无限制
2.  AVCaptureAutoFocusRangeRestrictionNear - 重要的主体靠近相机
3.  AVCaptureAutoFocusRangeRestrictionFar - 重要的主体远离相机

要检查该方法是否可用，我们应该首先检查属性 autoFocusRangeRestrictionSupported 是否为真。而且由于它仅在 iOS7 及更高版本中受支持，我们还应该使用 respondsToSelector，这样我们就不会在早期的 iO​​S 版本中遇到异常。
所以生成的代码应该是这样的：

```
AVCaptureDevice *cameraDevice = zbarReaderView.device;
if ([cameraDevice respondsToSelector:@selector(isAutoFocusRangeRestrictionSupported)] && cameraDevice.autoFocusRangeRestrictionSupported) {
    // If we are on an iOS version that supports AutoFocusRangeRestriction and the device supports it
    // Set the focus range to "near"
    if ([cameraDevice lockForConfiguration:nil]) {
        cameraDevice.autoFocusRangeRestriction = AVCaptureAutoFocusRangeRestrictionNear;
        [cameraDevice unlockForConfiguration];
    }
} 
```

根据我的初步测试，这似乎在某种程度上加快了小 QR 码的扫描速度：)

## 更新 - iOS8

在 iOS8 中，Apple 为我们提供了许多新的相机 API 供我们使用。这种新方法之一是：

```
- (void)setFocusModeLockedWithLensPosition:(float)lensPosition completionHandler:(void (^)(CMTime syncTime))handler 
```

此方法通过将镜头移动到 0.0 和 1.0 之间的位置来锁定焦点。我玩弄了这个方法，将镜头锁定在接近的值。但是，总的来说，它引起的问题比解决的问题多。您必须将 QR 码/条形码保持在非常特定的距离，当您拥有不同大小的代码时，这可能会导致问题。
但。我想我找到了一个很好的替代方法来完全锁定焦点。当用户按下扫描按钮时，我将镜头锁定在近距离，完成后我将相机切换回自动对焦。这为我们提供了保持自动对焦的好处，但会迫使相机在可能找到 QR 码/条形码的近距离开始。这结合：

```
cameraDevice.autoFocusRangeRestriction = AVCaptureAutoFocusRangeRestrictionNear; 
```

和：

```
cameraDevice.focusPointOfInterest = CGPointMake(0.5,0.5); 
```

结果是一个非常活泼的扫描仪。我还使用 iOS7 中引入的 API 构建了一个自定义扫描仪，而不是使用 ZBar。主要是因为 ZBar-libs 已经过时了，当 iPhone 5 引入 ARMv7s 时，我现在不得不为 ARM64 重新编译它。

// 亚历山大

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-06T03:54:42.833

iOS 8 最近添加了这个配置！几乎就像他们读取堆栈溢出一样

```
 /*!
 @method setFocusModeLockedWithLensPosition:completionHandler:
 @abstract
    Sets focusMode to AVCaptureFocusModeLocked and locks lensPosition at an explicit value.

 @param lensPosition
    The lens position, as described in the documentation for the lensPosition property. A value of AVCaptureLensPositionCurrent can be used
    to indicate that the caller does not wish to specify a value for lensPosition.
 @param handler
    A block to be called when lensPosition has been set to the value specified and focusMode is set to AVCaptureFocusModeLocked. If
    setFocusModeLockedWithLensPosition:completionHandler: is called multiple times, the completion handlers will be called in FIFO order. 
    The block receives a timestamp which matches that of the first buffer to which all settings have been applied. Note that the timestamp 
    is synchronized to the device clock, and thus must be converted to the master clock prior to comparison with the timestamps of buffers 
    delivered via an AVCaptureVideoDataOutput. The client may pass nil for the handler parameter if knowledge of the operation's completion 
    is not required.

 @discussion
    This is the only way of setting lensPosition.
    This method throws an NSRangeException if lensPosition is set to an unsupported level.
    This method throws an NSGenericException if called without first obtaining exclusive access to the receiver using lockForConfiguration:.
*/
- (void)setFocusModeLockedWithLensPosition:(float)lensPosition completionHandler:(void (^)(CMTime syncTime))handler NS_AVAILABLE_IOS(8_0); 
```

编辑：这是 AVCaptureDevice 的一种方法

# javascript - 拆分后数组长度未定义

> ID：15782084
> 
> 赞同：2
> 
> 时间：2013-04-03T08:11:58.507
> 
> 标签：javascript, split

我想拆分一个字符串（“1,2,3”）并将其作为一个 int 数组返回，所以我编写了以下函数：

```
function stringToIntArray(string) {
    var split = {};
    split = string.split(',');

    var selected = {};

    for (var i = 0; i <= split.length; i++) {
        selected[i] = split[i];
    }

    return selected;
} 
```

然而 split.length 总是未定义的。我的错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:13:09.907

```
var selected = {}; 
```

不构建数组，而是构建一个没有`length`属性的对象。

您可以通过将其替换为来修复您的代码

```
var selected = []; 
```

如果要返回一个数字数组，可以将代码更改为

```
function stringToIntArray(string) {
    var split = string.split(',');
    var selected = [];
    for (var i = 0; i < split.length; i++) {
        selected.push(parseInt(split[i], 10));
    }
    return selected;
} 
```

请注意，我在您的循环中替换`<=`为。`<`

另请注意，对于现代浏览器，您可以使用[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)函数使其更简单：

```
function stringToIntArray(string) {
    return string.split(',').map(function(v){ return parseInt(v, 10) });
} 
```

# ios - 从凸轮或库中选择多个图像视图的图像

> ID：15782085
> 
> 赞同：1
> 
> 时间：2013-04-03T08:12:07.700
> 
> 标签：ios, objective-c, image, uiimagepickercontroller

我的(Purpose Before ,During, After)`Image views`上有 3 个。`view controller`我需要分别为每个视图选择图像。

此任务的指定方法是：

```
 -(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
      UIImage *image;
        image = [info objectForKey:UIImagePickerControllerOriginalImage];
        [_imgView setImage:image];
        [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

但是如何通知此方法有关哪个按钮调用了图像选择器并分别选择/显示视图上的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:26:51.423

添加一个“私有”（是的，我不知道这样的事情）ivar 来保存对 selectedImageView 的引用

```
@interface MyViewController ()

@property (nonatomic, strong) UIImageView *selectedImageView;

@end 
```

Then when the imageView is selected use this new ivar to keep a reference to the currently active imageView

```
- (void)imageViewTapped:(id)sender
{
  // This assumes the use of a gesture recognizer but you can substitute your usual method
  // of detecting the imageView that you want to edit.
  self.selectedImageView = [sender view];
} 
```

现在你的代表看起来像这样

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  self.selectedImageView.image = info[UIImagePickerControllerOriginalImage];
  self.selectedImageView = nil;

  [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:16:11.863

在类级别上，获取一个包含 imageview 引用的变量。

当您点击图像时，将点击的图像视图的引用存储到此变量中。

进入 imagepicker 委托方法，使用这个变量来设置图像。

# php - 通过解析 json 实现可靠的下拉菜单

> ID：15782087
> 
> 赞同：0
> 
> 时间：2013-04-03T08:12:12.370
> 
> 标签：php, json, drop-down-menu

我有一个与此类似的 json，我想知道如何将以下 json 解析为组织、位置和构建作为可靠的下拉列表，json 如下

```
 [{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"},{"location":[{"building":["test_loc1_building1","test_loc1_building2"],"name":"test location1"},{"building":["test_loc2_building2"],"name":"test location2"}],"name":"test Organization"}] 
```

# asp.net - 用于 vs 2010 安装和配置的 Web API

> ID：15782088
> 
> 赞同：24
> 
> 时间：2013-04-03T08:12:16.580
> 
> 标签：asp.net, visual-studio-2010, asp.net-web-api, webforms

我想开始学习 Web API，因为我需要在我的 Visual Studio 2010 上进行设置。

为了开始，我查看了有关在 vs 2010 上安装和配置 Web API 的在线教程，这让我感到困惑，并决定就此咨询专家意见。

我有几个关于 Web API 的基本问题。

1.  如何在 VS 2010 上安装 Web API？
2.  在 VS 2010 上设置 Web API 的基本要求是什么？
3.  Web API 可以与 asp.net Web 表单一起使用吗（因为我一直在处理 asp.net Web 表单，所以我没有 MVC 经验）

我确信对这几个问题的回答可能会帮助其他想要在 VS 2010 上开始使用 Web API 的用户。

对此的任何帮助都将受到高度赞赏

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T08:23:45.957

Web API 在 ASP.NET MVC 4 项目中。您可以在 VS 2010 中安装它：
[http ://robertbigec.wordpress.com/2012/10/11/developing-mvc-4-web-api-with-visual-studio-2010/](http://robertbigec.wordpress.com/2012/10/11/developing-mvc-4-web-api-with-visual-studio-2010/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-09T13:42:41.160

**在 Visual Studio 2010 中添加一个 ASP.NET MVC Web API 类型的项目，**我们可以：

1 - 安装 .NET Framework 4 和 ASP.NET MVC 4。

2 - 添加一个新项目并选择 MVC 4

（在此屏幕上没有 Web API 模板，许多用户可能希望看到它）

![在此处输入图像描述](https://i.stack.imgur.com/46C8D.png)

3 - 选择 Web API 模板

![在此处输入图像描述](https://i.stack.imgur.com/PVK2U.png)

这是一个对我有帮助的好问题；我希望这个答案也有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-13T15:32:50.133

您必须为 VS 2010 下载并安装 SP1，然后从 Microsoft [http://www.microsoft.com/en-ca/download/details.aspx?id=30683](http://www.microsoft.com/en-ca/download/details.aspx?id=30683)下载 ASP.NET MVC 4 项目 并安装它。我宁愿下载 VS 2013 ，它以 Web Api（也是 Web Api 2）为标准 - 无需下载其他任何东西。

# gcc - GCC 发出 ARM idiv 指令

> ID：15782089
> 
> 赞同：11
> 
> 时间：2013-04-03T08:12:17.120
> 
> 标签：gcc, arm

我如何指示`gcc`发出`idiv`（整数除法`udiv`和`sdiv`）指令`arm application processors`？

到目前为止，我能想到的唯一方法是使用`-mcpu=cortex-a15`gcc 4.7。

```
$cat idiv.c
int test_idiv(int a, int b) {
    return a / b;
} 
```

在 gcc 4.7 上（与[Android NDK r8e](http://developer.android.com/tools/sdk/ndk/index.html)捆绑）

```
$gcc -O2 -mcpu=cortex-a15 -c idiv.c
$objdump -S idiv.o

00000000 <test_idiv>:
   0:   e710f110    sdiv    r0, r0, r1
   4:   e12fff1e    bx  lr 
```

`idiv.c:1:0: warning: switch -mcpu=cortex-a15 conflicts with -march=armv7-a switch [enabled by default]`如果您在`-march=armv7-a`旁边添加`-mcpu=cortex-a15`并且不发出`idiv`指令，即使这个也会给出。

```
$gcc -O2 -mcpu=cortex-a15 -march=armv7-a -c idiv.c

idiv.c:1:0: warning: switch -mcpu=cortex-a15 conflicts with -march=armv7-a switch [enabled by default]

$objdump -S idiv.o
00000000 <test_idiv>:
   0:   e92d4008    push    {r3, lr}
   4:   ebfffffe    bl  0 <__aeabi_idiv>
   8:   e8bd8008    pop {r3, pc} 
```

在 gcc 4.6（与 Android NDK r8e 捆绑）上，它根本不发出`idiv`指令，但`-mcpu=cortex-a15`也不会抱怨`-mcpu=cortex-a15 -march=armv7-a`组合。

Afaik`idiv`在 上是可选的`armv7`，所以应该有一种更简洁的方式来指示 gcc 发出它们但是如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:44:45.460

如果指令不在*机器描述*中，那么我怀疑它`gcc`会发出代码。^(注1)

如果编译器不支持它，您总是可以使用*inline-assembler来获取指令。*^(注意 2) 由于您的内容非常少见/特定于机器，因此在源代码`op-code`中获取它可能没有太多努力。`gcc`特别是，有*arch*和*tune/cpu*标志。*tune/cpu*用于更具体的机器，但arch*应该*允许该架构中的所有*机器*。如果我理解的话，这`op-code`似乎违反了这条规则。

对于`gcc`4.6.2，似乎*thumb2*和*cortex-r4*是使用这些指令的提示，正如您在`gcc`4.7.2 中所指出的，似乎添加了*cortex-a15以使用这些指令。*在`gcc`4.7.2 中，*thumb2.md*文件不再有`udiv`/ `sdiv`。但是，它可能包含在其他地方；我不是 100% 熟悉所有的*机器描述*语言。似乎*cortex-a7*、*cortex-a15*和*cortex-r5*可以在 4.7.2 中启用这些指令。^(注3)

这并不能直接回答问题，但确实提供了一些信息/路径来获得答案。您可以使用 编译模块`-mcpu=cortex-r4`，尽管这可能会产生链接器问题。此外，`int my_idiv(int a, int b) __attribute__ ((__target__ ("arch=cortexe-r4")));`您可以在其中基于每个功能指定代码生成器使用的*机器描述。*我自己没有使用过任何这些，但它们只是尝试的可能性。通常，您不想保留错误的机器，因为它可能会生成次优（并且可能是非法的）操作码。您将不得不进行实验，然后可能会提供**真正的**答案。

**注 1：**这是针对*股票* `gcc`4.6.2 和 4.7.2。不知道你的安卓编译器有没有补丁。

```
gcc-4.6.2/gcc/config/arm$ grep [ius]div *.md
arm.md: "...,sdiv,udiv,other"
cortex-r4.md:;; We guess that division of A/B using sdiv or udiv, on average, 
cortex-r4.md:;; This gives a latency of nine for udiv and ten for sdiv.
cortex-r4.md:(define_insn_reservation "cortex_r4_udiv" 9
cortex-r4.md:       (eq_attr "insn" "udiv"))
cortex-r4.md:(define_insn_reservation "cortex_r4_sdiv" 10
cortex-r4.md:       (eq_attr "insn" "sdiv"))
thumb2.md:  "sdiv%?\t%0, %1, %2"
thumb2.md:   (set_attr "insn" "sdiv")]
thumb2.md:(define_insn "udivsi3"
thumb2.md:      (udiv:SI (match_operand:SI 1 "s_register_operand"  "r")
thumb2.md:  "udiv%?\t%0, %1, %2"
thumb2.md:   (set_attr "insn" "udiv")] 
```

```
gcc-4.7.2/gcc/config/arm$ grep -i [ius]div *.md
arm.md:  "...,sdiv,udiv,other"
arm.md:  "TARGET_IDIV"
arm.md:  "sdiv%?\t%0, %1, %2"
arm.md:   (set_attr "insn" "sdiv")]
arm.md:(define_insn "udivsi3"
arm.md: (udiv:SI (match_operand:SI 1 "s_register_operand"  "r")
arm.md:  "TARGET_IDIV"
arm.md:  "udiv%?\t%0, %1, %2"
arm.md:   (set_attr "insn" "udiv")]
cortex-a15.md:(define_insn_reservation "cortex_a15_udiv" 9
cortex-a15.md:       (eq_attr "insn" "udiv"))
cortex-a15.md:(define_insn_reservation "cortex_a15_sdiv" 10
cortex-a15.md:       (eq_attr "insn" "sdiv"))
cortex-r4.md:;; We guess that division of A/B using sdiv or udiv, on average, 
cortex-r4.md:;; This gives a latency of nine for udiv and ten for sdiv.
cortex-r4.md:(define_insn_reservation "cortex_r4_udiv" 9
cortex-r4.md:       (eq_attr "insn" "udiv"))
cortex-r4.md:(define_insn_reservation "cortex_r4_sdiv" 10
cortex-r4.md:       (eq_attr "insn" "sdiv")) 
```

**注意2：**如果将选项传递给阻止使用指令的选项，请将[预处理器视为汇编程序。](https://stackoverflow.com/questions/15465958/using-gccs-pre-processor-as-an-assembler)例如，您可以使用where *opcode* is some token pasteed stringified register encode 宏输出。此外，您可以注释您的汇编程序以指定. 所以你可以暂时*撒谎*说你有一个*cortex-r4*等。`gcc``gas``udiv/sdiv``asm(" .long <opcode>\n");`*`machine`*

 *****注3：**

```
gcc-4.7.2/gcc/config/arm$ grep -E 'TARGET_IDIV|arm_arch_arm_hwdiv|FL_ARM_DIV' *
arm.c:#define FL_ARM_DIV    (1 << 23)         /* Hardware divide (ARM mode).  */
arm.c:int arm_arch_arm_hwdiv;
arm.c:  arm_arch_arm_hwdiv = (insn_flags & FL_ARM_DIV) != 0;
arm-cores.def:ARM_CORE("cortex-a7",  cortexa7,  7A, ... FL_ARM_DIV
arm-cores.def:ARM_CORE("cortex-a15", cortexa15, 7A, ... FL_ARM_DIV
arm-cores.def:ARM_CORE("cortex-r5",  cortexr5,  7R, ... FL_ARM_DIV
arm.h:  if (TARGET_IDIV)                                \
arm.h:#define TARGET_IDIV               ((TARGET_ARM && arm_arch_arm_hwdiv) \
arm.h:extern int arm_arch_arm_hwdiv;
arm.md:  "TARGET_IDIV"
arm.md:  "TARGET_IDIV" 
```***

# c++ - 复制到system32后文件会改变

> ID：15782103
> 
> 赞同：1
> 
> 时间：2013-04-03T08:13:10.103
> 
> 标签：c++, windows

我有一个帮助 DLL，我使用了很长时间，它的签名没有任何变化，我复制它以便`system32`在我的所有产品中使用它，现在我在它的导出列表中添加一个函数并编译它，一切看起来好的，我有一个包含指定函数的新 DLL。我的问题是当我将它复制到`system32`指定的函数时丢失了，看起来它会以某种方式从缓存中复制并加载一些旧版本，因此依赖于新函数的程序将失败！有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:18:48.657

您很可能拥有 64 位系统。您将文件复制到 64 位系统目录 system32。但是，由于文件系统重定向器，您的 32 位应用程序从 32 位系统目录 SysWOW64 加载它。

通过复制到 SysWOW64 解决问题。

你可能知道这一点，但无论如何我都觉得不得不说出来。系统目录属于系统，您不应该写入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:18:29.883

使用此命令清除 dll 缓存。这已经在 Win XP 和 Win 7 上进行了测试。

```
sfc /purgecache 
```

请注意，您需要成为管理员才能运行此命令或“以管理员身份运行”。不能 100% 确定这是否能解决您的问题。

# sql - 有谁知道如何将此 TSQL 转换为我需要的 PIVOT 表？

> ID：15782104
> 
> 赞同：1
> 
> 时间：2013-04-03T08:13:19.313
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我一直试图在我可以抓取的谷歌所有结果中了解 PIVOT 事物的不同方面。我没有运气翻译我的。:(

我想知道我们如何翻译这张表

```
+-------------+------------------------------+-------------+-------+
|  Question   |          AnswerText          | AnswerText2 | COUNT |
+-------------+------------------------------+-------------+-------+
| Answer this | Please select 'No'           | No          |    13 |
| Answer this | Please select 'Yes'          | No          |     1 |
| Answer this | Please select 'Yes' and 'No' | No          |    12 |
| Answer this | Please select 'Yes'          | Yes         |    13 |
| Answer this | Please select 'Yes' and 'No' | Yes         |    14 |
+-------------+------------------------------+-------------+-------+ 
```

我将这个 TSQL 用于上表

```
 SELECT q.QuestionText as Question, a.AnswerText, pa.AnswerText2, COUNT  ( pa.AnswerText2 ) COUNT
FROM Answer a
    JOIN Question q on a.QuestionId = q.QuestionId
    LEFT JOIN ParticipantAnswer pa on pa.AnswerId = a.AnswerId
    LEFT JOIN Participant p on p.ParticipantId = pa.ParticipantId
WHERE q.QuestionId = 103
            AND a.AnswerTypeId = 2

GROUP BY  q.QuestionText, a.AnswerText, pa.AnswerText2 
```

进入类似的东西

```
+--------------------------------------------+---------------------+
|   Question  |          AnswerText          | YES         | NO    |
+--------------------------------------------+---------------------+
| Answer this | Please select 'No'           | 0           |    13 |
| Answer this | Please select 'Yes'          | 13          |     1 |
| Answer this | Please select 'Yes' and 'No' | 14          |    12 |
+--------------------------------------------+---------------------+ 
```

我希望有人能帮助我。:)

非常感谢！

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:17:55.507

```
SELECT  [Question], 
        [AnswerText], 
        COALESCE(pivotedData.Yes, 0) [Yes],
        COALESCE(pivotedData.No, 0) [N0]
FROM
        (
            SELECT  [Question], [AnswerText], [AnswerText2], [COUNT]
            FROM    TableName
        ) origData
        PIVOT
        (
            MAX([COUNT])
            FOR [AnswerText2] IN ([Yes], [No])
        ) pivotedData; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/4cb5a/4)

输出

```
╔═════════════╦══════════════════════════════╦═════╦════╗
║  QUESTION   ║          ANSWERTEXT          ║ YES ║ N0 ║
╠═════════════╬══════════════════════════════╬═════╬════╣
║ Answer this ║ Please select 'No'           ║   0 ║ 13 ║
║ Answer this ║ Please select 'Yes'          ║  13 ║  1 ║
║ Answer this ║ Please select 'Yes' and 'No' ║  14 ║ 12 ║
╚═════════════╩══════════════════════════════╩═════╩════╝ 
```

不使用关键字产生相同输出的另一种解决方案`PIVOT`是使用`MAX()`and`CASE()`

```
SELECT  [Question],
        [AnswerText],
        MAX(CASE WHEN [AnswerText2] = 'Yes' THEN [COUNT] END) 'Yes',
        MAX(CASE WHEN [AnswerText2] = 'No' THEN [COUNT] END) 'No'
FROM    TableName
GROUP   BY  [Question],
            [AnswerText] 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/4cb5a/6)

**更新 1**

```
SELECT  [Question], 
        [AnswerText], 
        COALESCE(pivotedData.Yes, 0) [Yes],
        COALESCE(pivotedData.No, 0) [N0]
FROM
        (
            SELECT  q.QuestionText as Question, 
                    a.AnswerText, 
                    pa.AnswerText2, 
                    COUNT(pa.AnswerText2) COUNT
            FROM    Answer a
                    INNER JOIN Question q on a.QuestionId = q.QuestionId
                    LEFT JOIN ParticipantAnswer pa on pa.AnswerId = a.AnswerId
                    LEFT JOIN Participant p on p.ParticipantId = pa.ParticipantId
            WHERE   q.QuestionId = 103 AND 
                    a.AnswerTypeId = 2
            GROUP   BY  q.QuestionText, 
                        a.AnswerText, 
                        pa.AnswerText2
        ) origData
        PIVOT
        (
            MAX([COUNT])
            FOR [AnswerText2] IN ([Yes], [No])
        ) pivotedData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:18:04.603

试试这个：

```
SELECT *
FROM
(
  -- Put Yourquery here
) AS t
PIVOT
(
  MAX([Count])
  FOR AnswerText2 IN ([Yes], [No])
) AS p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/b05ee/1)

# php - Zend Framework 2 - 移除表单元素导致验证失败

> ID：15782107
> 
> 赞同：5
> 
> 时间：2013-04-03T08:13:28.620
> 
> 标签：php, validation, zend-framework2, zend-form, zend-form-element

我在几个地方使用了某种形式。在其中一个中，我需要忽略我在验证后以编程方式设置的表单元素。

因为这只是一个例外，我不想创建一个新表单。所以我想，我只是在控制器中删除这个元素，比如：

```
$myForm->remove('myElement'); 
```

问题是表单现在无法验证。我没有收到任何错误，但`$myForm->isValid()`只是返回一个空值。

有什么想法我可能做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T13:57:45.183

好的，我终于[找到了解决方案](https://unofficial-zf2.readthedocs.org/en/wrap/modules/zend.form.quick.start.html)！您可以定义一个`ValidationGroup`允许您设置要验证的属性。其他未验证：

```
$form->setValidationGroup('name', 'email', 'subject', 'message');
$form->setData($data);
if ($form->isValid()) {
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:19:28.260

我想到的第一件事是从 myElement 的 ValidatorChain 中删除验证器。您可以通过以下方式在控制器中获取它：

```
$form->getInputFilter()->get( 'myElement' )->getValidatorChain() 
```

似乎您无法从 ValidatorChain 中删除，只需添加即可。检查这篇[文章](http://zend-framework-community.634137.n4.nabble.com/ValidatorChain-remove-and-edit-validators-td4656571.html)。来自 Zend 的 Matthew Weier O'Phinney 解释了为什么它不能完成以及针对您的场景的可能解决方案。

我解决这个问题的方法是在 FormFilter 类中创建验证器时检查“删除条件”。如果您使用注释，我认为它不适合您，因此您应该使用 Matthew 建议。

或者您可以尝试@Stoyan Dimov 的这篇[文章](https://stackoverflow.com/questions/15753359/zf2-form-validation-zfcadmin-and-bjyauthorize-related/15758172#15758172)中的那个：定义两种形式，一种 BasicForm 和 ExtendedForm。第一个具有所有常见的表单元素，第二个是另一个与其余字段的扩展。根据您的情况，您可以使用一种或另一种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T14:03:19.673

在`class ValidatorChain implements Countable, ValidatorInterface`中，添加一个新方法：

```
public function remove($name){
    foreach ($this->validators as $key => $element) {
        $validator = $element['instance'];
        if($validator instanceof $name){
            unset($this->validators[$key]);
            break;
        }
    }   
} 
```

像这样使用：

```
$form->getInputFilter()->get("xxxxx")->getValidatorChain()->remove('xxxxxx'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:22:32.157

必须为您要删除的特定元素定义一个验证器。

在向表单添加新元素的控制器中，必须有 addValidator 调用，例如：

> $element->addValidator('alnum');

这实际上导致验证失败。因此，您已经从表单中删除了该元素，但您仍然在该元素上定义了要检查的验证。

如果您在控制器中找不到这个验证添加功能，请尝试查看它是否已通过配置文件定义。

您可以在此处进一步了解 zf 中的表单验证：http: [//framework.zend.com/manual/1.12/en/zend.form.elements.html](http://framework.zend.com/manual/1.12/en/zend.form.elements.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-30T13:13:03.663

我删除元素：

```
$form->get('product')->remove('version'); 
```

当我发布表单时，我禁用了此元素上的验证器：

```
$form->getInputFilter()->get('product')->get('version')->setRequired(FALSE); 
```

# c# - DESede/CBC/PKCS5Padding 的 SecretKey 生成

> ID：15782110
> 
> 赞同：0
> 
> 时间：2013-04-03T08:13:50.320
> 
> 标签：c#, java, encryption, des

我在加密要发送到 SOAP 服务的数据时遇到问题。

我想问题出在 SecretKey 生成中，因为密码不正确时响应仍然相同。

当前代码是：

```
WServiceSoap ws = new WService().getWServiceSoap();
MessageDigest md = MessageDigest.getInstance("md5");

byte[] digestOfPassword = md.digest("12345678".getBytes("utf-8"));

final byte[] keyBytes = Arrays.copyOf(digestOfPassword, 24);
for (int j = 0, k = 16; j < 8;) {
  keyBytes[k++] = keyBytes[j++];
}

SecretKey opKey = new SecretKeySpec(keyBytes, "DESede");        
byte[] opIV = { 0, 0, 0, 1, 2, 3, 4, 5 };       
Cipher c = Cipher.getInstance("DESede/CBC/PKCS5Padding");

c.init(Cipher.ENCRYPT_MODE, opKey, new IvParameterSpec(opIV));

byte[] encrypted = c.doFinal(
    ClientDirectOperacionCTMS.DATOS_OPERACION.getBytes("UTF-8"));

String encryptedDatosOperacion= Base64.encodeBase64String(encrypted);
String result= ws.operacionCTMS(encryptedDatosOperacion);
System.out.println(result); 
```

, 例外是

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: Server was unable to process request. ---> La operación de pago con tarjeta no ha sido satisfactoria. ---> Additional non-parsable characters are at the end of the string.
at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178)
at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:111)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107) 
```

我也试过这段代码但没有成功：

```
final byte[] keyBytes = Arrays.copyOf(Base64.decodeBase64("12345678"), 24);
SecretKey opKey = new SecretKeySpec(keyBytes, "DESede"); 
```

服务器完成的解密是

```
CheckKey(ref rgbKey);
cryptoProvider = new TripleDESCryptoServiceProvider();
cryptoTransform = cryptoProvider.CreateDecryptor(rgbKey, s_rgbIV);
memoryStream = new MemoryStream();
using (CryptoStream cryptoStream = new CryptoStream(
    memoryStream, cryptoTransform, CryptoStreamMode.Write))
{
    cryptoStream.Write(rgbEncryptedText, 0, rgbEncryptedText.Length);
}

originalText = Encoding.UTF8.GetString(memoryStream.ToArray()); 
```

, 其中 CheckKey 是

```
 private static void CheckKey(ref Byte[] rgbKey)
    {
        if (rgbKey.Length > KEY_MAX_LENGTH)
        {
            Array.Resize(ref rgbKey, KEY_MAX_LENGTH);
        }
        else if (rgbKey.Length < KEY_MAX_LENGTH)
        {
            Byte fill = 0x41;
            Int32 offset = rgbKey.Length;

            Array.Resize(ref rgbKey, KEY_MAX_LENGTH);

            for (Int32 index = offset; index < KEY_MAX_LENGTH; index++)
            {
                rgbKey[index] = fill++;
            }
        }
    } 
```

# android - 在安卓上使用相机

> ID：15782116
> 
> 赞同：0
> 
> 时间：2013-04-03T08:14:21.710
> 
> 标签：android

在我的库项目中，我有以下代码来初始化相机并开始预览。

```
public class CameraView  {

private SurfaceView preview;
private SurfaceHolder previewHolder;
private Camera camera;
private boolean activeCamera;
private boolean cameraConfigured;
private Activity activity;
private final static int NINTY_DEGREES = 90; 

public CameraView(Activity activity) {
    this.activity = activity;

    View rootView;
    LayoutInflater inflater = activity.getLayoutInflater();
    rootView = inflater.inflate(R.layout.layout_cameraview, null);
    preview = (SurfaceView) rootView.findViewById(R.id.surfaceView);
    previewHolder = preview.getHolder();
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    cameraConfigured = false;
}

private void initializeCamera(int w, int h) {
    if(camera != null && previewHolder.getSurface() != null) {

        try 
        {
            camera.setPreviewDisplay(previewHolder);
        }
        catch(Exception e)
        {
            Log.e("Camera: ", e.getMessage());
        }

        if(!cameraConfigured) {
            Camera.Parameters params = camera.getParameters();
            Camera.Size size = getBestPreviewSize(w, h, params);

            if(size != null) {
                params.setPreviewSize(size.width, size.height);
                cameraConfigured = true;
            }
        }
    }
}

public void startCamera() {
    camera = Camera.open();
    previewHolder.addCallback(surfaceCallback);
}

public void stopCamera() {
    stopPreviewingOnDisplay();
}

public void takePicture() {
    View rootView;
    LayoutInflater inflater = activity.getLayoutInflater();
    rootView = inflater.inflate(R.layout.layout_cameraview, null);
    Button capture = (Button) rootView.findViewById(R.id.capture);
    capture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.e("CameraView: ", "Capture button pressed!");
        }
    });
}

private void startPreviewingOnDisplay() {
    if(camera != null) {
        camera.setDisplayOrientation(NINTY_DEGREES);
        camera.startPreview();
        activeCamera = true;
    }
}

private void stopPreviewingOnDisplay() {
    if(camera != null && activeCamera) {
        camera.stopPreview();
        activeCamera = false;
    }
}

private SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {    
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        initializeCamera(width, height);
        startPreviewingOnDisplay();
        Log.d("CameraView: ", "SurfaceChanged");
    }
};

private Camera.Size getBestPreviewSize(int w, int h, Camera.Parameters params) {

    Camera.Size result = null;

    for(Camera.Size size : params.getSupportedPreviewSizes()) {
        if(size.width < w && size.height <= h) {
            if(result == null) {
                result = size;
            }
            else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if(newArea > resultArea)
                    result = size;
            }
        }
    }       
    return(result);
} 
```

}

这个类的用法：

```
public class History extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
                ......
       camera = new CameraView(this);
    }

    @Override
    public void onResume() { 
       super.onResume();
       Log.i("History.class", "onResume called!");
       camera.startCamera();
    }

    @Override
    public void onPause() {
       super.onPause();
       camera.stopCamera();
    }
} 
```

我已经调试了代码，我注意到相机对象正在初始化，但屏幕上没有出现任何内容，它应该已经预览了相机。谁能看出这种方法有什么问题？

谢谢。

# windows - 如何检查软件是否已安装

> ID：15782120
> 
> 赞同：1
> 
> 时间：2013-04-03T08:14:45.873
> 
> 标签：windows, registry

如何检查Windows上是否安装了软件？

此外，该程序可能已被删除，那么，我如何检查软件是否在确定的日期安装在 Windows 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:20:51.603

我不知道过去的日期，但目前您可以查询注册表项：

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall

（如果您使用的是 64 位计算机，可能还需要检查 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall）

找到你想要的程序。每个都有一个 DisplayName 值，它将告诉您程序名称。

按照这个问题的答案 -[是否有为 Windows 卸载程序批处理？](https://stackoverflow.com/questions/9995241/is-there-uninstall-a-program-batch-for-windows)

# ios - 带有已定义常量的“未声明的标识符”错误

> ID：15782123
> 
> 赞同：0
> 
> 时间：2013-04-03T08:14:51.790
> 
> 标签：ios, objective-c, xcode

我定义的常量给了我“未声明的标识符”问题。我将它们放在一个`Constants.h`文件中，该文件包含在我的 .pch 文件中。我认为这可能与我的 .pch 文件有关，但是，如果我从那里删除它并`#import`在需要其中一个常量的类之一中尝试它，那么我仍然会收到“未声明的标识符”错误。

如果我将每一`#define`行直接放在 .m 类文件的顶部，它们就可以工作。所以我的语法是正确的。

所以它与 .h 文件本身有关，但我不知道是什么。

```
//
//  Constants.h

// Sliding Drawer
#define kOffscreenX 320    // X coord when Sliding Drawer is offscreen
#define kVisibleX 40       // X coord when Sliding Drawer is visible

// WordlistButton
#define kNumScores 3

// Fonts
#define kMessageFontSize 14
#define kScoreFontSize 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:59:19.723

仅从这段代码中不可能看到错误。预处理器往往会产生非常混乱的东西，尤其是在涉及循环导入时。

您可以尝试删除标头的当前编译版本，注意它不在`derived data`文件夹中，它在 XCode 的缓存中（请参阅 Project -> Build Setttings -> Precompiled Headers Cache Path）。

但是，如果您尝试`Constants.h`直接导入但没有成功，则问题可能出在其他地方。

你确定只有 1 个文件被调用`Constants.h`吗？请注意，您应该为您的文件使用前缀（例如`SAConstants.h`，如果`Smooth Almonds`是您的名字）以避免与 Apple 的标题或您正在使用的库的标题发生冲突。

如果您直接导入标题，请转到`.m`文件并点击`Product -> Generate Output -> Preprocessed File`并在其中找到`Constants.h`导入。是你的头吗？

顺便说一句，有一篇关于在预编译头文件中避免这种事情的好文章[http://qualitycoding.org/precompiled-headers/](http://qualitycoding.org/precompiled-headers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T10:52:40.550

由于`upper case parameter`我的定义语句中的另一个错误，我发现了这个线程。我用小写字母解决了我的问题：

```
#define MSB(BTvalue) ((uint8_t) (BTvalue >> 8))  //threw this error 
```

将**BTvalue**更改为仅使用**小写参数的****值**让我很高兴

 **```
#define MSB(value) ((uint8_t) (value >> 8)) 
```**

# bash - 带有引号和双引号的bash变量字符串

> ID：15782124
> 
> 赞同：0
> 
> 时间：2013-04-03T08:14:53.870
> 
> 标签：bash, quotes, double-quotes, quoting

我需要将字符串存储在 bash 的变量中。

这里的字符串...

```
7;310000000007;1390;30000001390;119;130000000119;;;;;939738;30;ST;DESCRIPTION TEXT TEXT " TEXT ' TEXT text;20130318;   1.40;;   0.00;1459 
```

注意有引号和双引号。可以将它存储在 BASH 中的变量中吗？

一个重要的考虑因素：我不能添加 \" 或 \'，因为它是一个像字符串一样具有 150.000 行的文本文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:18:56.727

不太确定，但我认为您可以尝试阅读，例如：

```
while read var
do
    echo $var
done < file.txt 
```

从文件中读取这样的行应该可以读取。

# jsf-2 - 使用漂亮面孔的 p ajax 侦听器

> ID：15782128
> 
> 赞同：0
> 
> 时间：2013-04-03T08:15:13.467
> 
> 标签：jsf-2, prettyfaces

我有 2 个组合框 1.company 和 2.city，当我从公司的组合框中选择任何公司时，它会更改 ajax 上的城市组合框我的问题是我应该使用

```
<p:ajax update="city" listener="pretty:cityOnChange" /> 
```

或者

```
<p:ajax update="city" listener="#{actionClass.cityOnChange}" /> 
```

当我使用下面的语句时，我得到异常
listener="pretty:cityOnChange": Cannot convert pretty:cityOnChange of type class java.lang.String to class javax.el.MethodExpression

```
<p:ajax update="city" listener="pretty:cityOnChange" /> 
```

这是我正在使用的代码

```
<h:outputLabel value="select Company" />
<p:selectOneMenu id="companySelectId" value="#{circleAction.companyBeans.companyBeansId}">
<f:selectItems value="#{circleAction.companyBeans.companyMap}"/>
<p:ajax update="city" listener="pretty:cityOnChange" />
</p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:38:31.250

不，您不能使用 PrettyFaces 导航字符串作为`listener`属性的值。该属性必须引用使用 EL 表达式的方法。就像例外告诉你的那样。

# ios - 目标 c 中长数字的 pow 操作

> ID：15782142
> 
> 赞同：1
> 
> 时间：2013-04-03T08:16:26.147
> 
> 标签：ios, objective-c, math

我正在尝试进行操作 pow(49999994,13)，结果为 1.220701e+100。但是当我在目标中做时，得到了结果-9223372036854775808。如何在 Objective-C 中正确执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:22:21.953

Objective-C 中没有 pow 运算符，所以使用 C 或 NSDecimalNumber（首选）。

### 战俘

```
NSLog(@"%f",(double)pow(49999994,13));        // OK 12207012207044960421719...
NSLog(@"%f",(long long int)pow(49999994,13)); // WRONG -9223372036854775808 
```

`-92233...`使用 a`long long int`而不是 a 的结果`double`。

### NSDecimalNumber

正如 Martin R 所指出的，在 Objective-C 中执行此操作的正确方法是`NSDecimalNumber`，它产生尽可能多的准确数字，后跟零。

```
 NSDecimalNumber *n = [NSDecimalNumber decimalNumberWithString:@"49999994e0"];
    n = [n decimalNumberByRaisingToPower:13];
    NSLog(@"nsdecimal %@",n); 
```

比较结果：

```
 accurate 12207012207044960931467189309843359073812548192494216675520514965298161665721254575494908505339305984
nsdecimal 12207012207044960931467189309843359073800000000000000000000000000000000000000000000000000000000000000
      pow 12207012207044960421719677106210881027530912788496417091073101786581413645039745611250537465292783616.000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:32:22.650

如果你看到 pow() 的方法声明，它是这样的：

```
double pow(double, double); 
```

并且您将结果保存到`long int`或使用整数说明符打印，导致超过`long int`.

您可以将其用作：

```
 double result=pow(49999994,13); 
```

# c++ - const 的奇怪用法 - 为什么会编译？

> ID：15782143
> 
> 赞同：9
> 
> 时间：2013-04-03T08:16:31.097
> 
> 标签：c++, gcc

我最近在我正在查看的一些代码中发现了以下函数定义：

```
void func( const::std::string& str )
{
    // Do something...
} 
```

我很惊讶这`const::std::string`似乎是合法的（它与 GCC4.4、GCC 4.8、Clang 3.2 和 Intel 13.0.1 一起编译）。

标准是否指定`const`可以用作`namespace`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T08:17:54.807

> 标准是否指定 const 可以用作命名空间？

不，它没有，因为它不可能。

您的代码与以下内容相同：

```
void func( const ::std::string& str ); 
```

第一个范围解析运算符表示全局命名空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T08:17:52.823

它被解析为

```
const ::std::string& str 
```

where`::std::string`是一种有效的引用方式`std::string`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T08:18:08.133

这是编译的，因为语法被评估为：

```
void func( const ::std::string& str ) 
```

这意味着`std`在全局范围内声明。在这种情况下，额外的`::`前面`std`是多余的。

# matlab - 线性规划约束：优化变量的乘法

> ID：15782146
> 
> 赞同：4
> 
> 时间：2013-04-03T08:16:34.333
> 
> 标签：matlab, optimization, constraints, linear-programming

给定一个具有两个优化变量 ( `x_in(t)`, `x_out(t)`) 的优化问题。对于任何时间步，当`x_in`非零时，`x_out`必须为零（反之亦然）。写成约束：

```
x_in(t)*x_out(t)=0 
```

`linprog`Matlab的函数中如何包含这样的约束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:33:48.017

由于问题不是完全线性的，我不相信您可以使用该`linprog`函数原样解决它。但是，您应该能够将问题重新表述为[混合整数线性规划](http://en.wikipedia.org/wiki/Integer_programming)问题。然后，您将能够使用例如来自*Matlab Central的*[这个扩展](http://www.mathworks.com/matlabcentral/fileexchange/25259)来解决问题。

 *假设`x_in(t)`和`x_out(t)`分别是具有上限 和 的非负变量`x_in_max`，`x_out_max`那么您可以将变量`y_in(t)`和添加`y_out(t)`到优化问题并包括以下约束：

```
(1) y_in(t) and y_out(t) are binary, i.e. 0 or 1
(2) x_in(t)  <= x_in_max  * y_in(t)
(3) x_out(t) <= x_out_max * y_out(t)
(4) y_in(t) + y_out(t) = 1 
```

鉴于`y_in`and`y_out`是二元变量，约束 (2) 和 (3) 将`x_`and`y_`变量相互关联并确保`x_`变量保持在界限内（`x_`因此可以并且*应该*从问题公式中删除变量的固定界限）。约束 (4) 确保事件`_in`或`_out`事件发生，但不能同时发生。*

# java - 使用 GridBagLayout 时组件重叠

> ID：15782148
> 
> 赞同：1
> 
> 时间：2013-04-03T08:16:36.830
> 
> 标签：java, swing, jlabel, gridbaglayout

在定位我的 JLabels 时，我发现了一个到目前为止我无法解决的问题。JLabels 重叠。

这是有关 gridbaglayout 的代码片段：

```
 c = new GridBagConstraints();

   c.gridx = 0;
   c.gridy = 0;
   c.gridwidth = 3;
   c.fill = GridBagConstraints.HORIZONTAL;
   c.ipady = 20;
   c.weightx = 3;
   c.weighty = 1;
   c.insets = new Insets(0,5,5,5);

   all.add(header, c);

   c.gridx = 0;
   c.gridy = 1;
   c.weightx = 2;
   c.weighty = 4;
   c.insets = new Insets(5,5,5,5);

   all.add(sts, c); //this label overlapped

   c.gridx = 1;
   c.gridy = 1;
   c.weightx = 1;
   c.weighty = 5;
   c.insets = new Insets(5,5,5,5);

   all.add(cl, c); //this label overlapped 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:29:30.750

网格宽度为 3 意味着组件将在 x 网格中占据 3 个位置，请阅读网格包布局教程 [http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

第一个组件位于 x0，这会将 3 列扩展到 x2，因此下一个可用网格位置是 x3

# codeigniter - 个性化-Mailer-CodeIgniter-Spark

> ID：15782150
> 
> 赞同：0
> 
> 时间：2013-04-03T08:16:40.813
> 
> 标签：codeigniter

我正在使用 Codeigniter 中的个性化邮件库向客户发送电子邮件，邮件进展顺利，但我怎样才能获得退回的电子邮件列表。请帮助我如何做到这一点...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T23:19:13.397

不幸的是，服务器不需要发送被拒绝的电子邮件请求。而那些这样做的人，没有这样做的标准方法。gmails 和 hotmails 可能，但你不能依赖回复。

如果您考虑一下，如果允许这样做将是一个很大的安全问题，因为您可以检查域中的所有有效电子邮件。

# c# - 如何验证我的 C# 代码在管理员模式下运行 IISRESET 命令

> ID：15782151
> 
> 赞同：2
> 
> 时间：2013-04-03T08:16:46.577
> 
> 标签：c#, iisreset

我创建了一个 Windows 服务来检查数据库中的错误，如果出现特定的错误，我希望它执行`IISRESET`命令。

问题是，如果我在没有提升权限的情况下运行 IISRESET 命令，那么它实际上不会进行重置。所以我让我的代码做我想做的一切，但我不确定该`IISRESET`命令是否以管理员身份运行，我不知道如何验证。

**这是我的代码**

```
 ErrorCheckerEventLog.WriteEntry("Performing IISReset", EventLogEntryType.Warning);
        Process process = new Process();
        process.StartInfo.Verb = "runas";
        process.StartInfo.FileName = "iisreset.exe";
        process.StartInfo.UseShellExecute = true;
        process.StartInfo.CreateNoWindow = false;
        process.StartInfo.RedirectStandardError = false;
        process.StartInfo.RedirectStandardOutput = false;
        process.Start();
        process.WaitForExit();
        ErrorCheckerEventLog.WriteEntry("IISReset finished", EventLogEntryType.Information); 
```

**在应用程序事件日志中，我得到这些：**

> 侦听器适配器协议“net.tcp”成功连接到 Windows 进程激活服务。
> 
> 侦听器适配器协议“net.pipe”已成功连接到 Windows 进程激活服务。

**在系统事件日志中，我得到这些：**

> 从用户 testing\neil.kenny 收到 IIS 启动命令。记录的数据是状态代码。

这一切对我来说看起来都不错，但我仍然不确定它是否真的进行了重置。它可能只是运行了 iisreset 命令，然后输出拒绝访问消息。

我如何正确验证这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:36:42.473

如果你想**手动**测试它：

*   我想到的第一件事是保持浏览器打开，并重置 IIS 上的任何站点。一直按 F5。网站将关闭，很快将再次启动。
*   签入**事件查看器**并查找指示 IIS 已重新启动的事件条目（检查**系统**日志）。这个[问题](https://stackoverflow.com/questions/8511376/how-to-check-app-pool-last-recycled)可能会有所帮助。在这里你有一张照片。一张图胜过千言万语：

![在此处输入图像描述](https://i.stack.imgur.com/8mKBh.png)

究竟要寻找什么：

*   几个事件表明某些服务已停止。来源是服务控制管理器。其中查找**“万维网发布服务进入停止状态”**
*   来自源 IIS-IISReset 的事件，内容为**“从用户 xxxx 收到 IIS 停止命令”**
*   几个事件表明一些服务已经启动。来源是服务控制管理器。其中查找**“万维网发布服务进入运行状态”**
*   来自源 IIS-IISReset 的事件，内容为**“从用户 xxxx 收到 IIS 启动命令”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:35:47.240

只是一个想法...根据您的要求，您可以做类似...

1\. 调用驻留在托管在您编写的 iis 实例上的站点上的网页或 wcf 端点，以便将某些内容置于应用程序状态。

2\. 运行您的代码。

3\. 用参数再次调用它，告诉它检索应用程序变量，如果它为 null 并且需要一段时间，该应用程序可能由于 iisreset 而重新加载。

如果您的代码与盒子上托管的应用程序无关，那就不理想了，那么我想……为什么不直接检索该事件日志信息呢？

有一个例子：[Read event log in C#](https://stackoverflow.com/questions/3147972/read-event-log-in-c-sharp) ...问题，诚然是一个非常简单的问题，但您正在查看一个最近的特定时间段，并从最近的时间读取日志，从而呈现您的搜索非常快（例如应该在最繁忙的服务器上的前 100 个事件中）。

# iphone - 如何使用计时器更改移动 ccsprite 的图像

> ID：15782154
> 
> 赞同：1
> 
> 时间：2013-04-03T08:16:57.443
> 
> 标签：iphone, ios, cocos2d-iphone, ccsprite

我有大约 10 个相同图像的精灵并且这些精灵正在移动，我想通过使用计时器交替更改所有精灵的图像（2 张图像）。我正在使用以下代码，但它不适合我

```
 CCSprite *target = [CCSprite spriteWithFile:@"images1.png" rect:CGRectMake(0, 0, 120, 140)];
  // Determine where to spawn the target along the Y axis

winSize = [[CCDirector sharedDirector] winSize];
int minY = target.contentSize.height/2;
int maxY = (winSize.height/2) - target.contentSize.height/2;
int rangeY = maxY - minY;
int actualY = (arc4random() % rangeY) ;

// Create the target slightly off-screen along the right edge,
// and along a random position along the Y axis as calculated above

target.position = ccp(winSize.width + (target.contentSize.width/2), actualY);
[self addChild:target];

// Determine speed of the target

int minDuration = 2.0;
int maxDuration = 4.0;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;

id delayTime1 = [CCDelayTime actionWithDuration:1.0f];
id calFun1   = [CCCallBlock actionWithBlock:^{
    //HERE SET BLUE TEXTURE..
    [target setTexture:[[CCSprite spriteWithFile:@"image1.png"]texture]];

}];
id delayTime2 = [CCDelayTime actionWithDuration:1.0f];
id calFun2   = [CCCallBlock actionWithBlock:^{
    //HERE SET RED TEXTURE..
  [target setTexture:[[CCSprite spriteWithFile:@"image2.png"]texture]];

}];

// Create the actions

id actionMove = [CCMoveTo actionWithDuration:actualDuration*2.5 position:ccp(-target.contentSize.width/2, actualY)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
id sequece = [CCSequence actions:delayTime1, calFun1, delayTime2, calFun2,actionMove, actionMoveDone, nil];
id repeate = [CCRepeatForever actionWithAction:sequece];

[target runAction:repeate]; 
```

但是通过使用此代码，只有一张图像会连续显示在精灵上。图像没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:30:41.627

试试这个

```
-(CCSpriteFrame *)getImageWithName:(NSString *)image{
     CCSprite *sprite=[CCSprite spriteWithFile:image];
     CCSpriteFrame *frame=[CCSpriteFrame frameWithTexture:sprite.texture rect:CGRectMake(0, 0, sprite.contentSize.width, sprite.contentSize.height)];
     return frame;
 } 
```

然后

```
[target setDisplayFrame:[self getImageWithName:@"image1"]];

[target setDisplayFrame:[self getImageWithName:@"image2"]]; 
```

# azure - 想要从 sql azure 中的联邦数据库内部访问根数据库表

> ID：15782160
> 
> 赞同：0
> 
> 时间：2013-04-03T08:17:19.433
> 
> 标签：azure, azure-sql-database

在我的应用程序中，我在根数据库中创建了代理和角色表，并根据其 PK 拆分数据库联合。然后我在联邦数据库中创建了客户表，所以当我向客户查询时。那我就得用这个说法了。

使用 FEDERATION AgentFederation(AgentId='5') WITH RESET, FILTERING=OFF

然后我必须访问根数据库上的代理名称和客户角色。那么如何访问联邦数据库中的根数据库表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:37:25.640

这在数据库级别是不可能的（意味着单个连接中的查询）！

您必须在应用程序级别执行此操作。您可以并行执行此操作 - 对联合根执行一个查询以获取代理名称和客户角色，并执行另一个查询以从联合成员获取数据。

这是唯一的方法。这就是 SQL 数据库联合的工作方式。

# php - HP ALM 11 使用 PHP 和 cURL 上传附件

> ID：15782162
> 
> 赞同：1
> 
> 时间：2013-04-03T08:17:29.853
> 
> 标签：php, rest, curl, hp-quality-center

我需要将附件上传到 HP 的 ALM 11 中的测试。为此，我创建了一个基于 cURL 的自定义 PHP 函数以使用 ALM 的 REST API。这是代码：

```
public function attachment($project, $domain, $entity, $id, $filename)
{
    $qc = $this->qc_cookie;
    $ckfile = $this->ckfile;
    $eol = "\n\n";
    $mime_boundary=md5(time());

    $file_to_upload = '--'.$mime_boundary. $eol;
    $file_to_upload .= 'Content-Disposition: form-data; name="filename"';
    $file_to_upload .= $eol;
    $file_to_upload .= $filename;
    $file_to_upload .= $eol;
    $file_to_upload .= $eol;
    $file_to_upload .= '--'.$mime_boundary. $eol;
    $file_to_upload .= 'Content-Disposition: form-data; name="description"';
    $file_to_upload .= $eol;
    $file_to_upload .= 'Test';
    $file_to_upload .= $eol;
    $file_to_upload .= $eol;
    $file_to_upload .= '--'.$mime_boundary. $eol;
    $file_to_upload .= 'Content-Disposition: form-data; name="file"; filename="'.$filename.'"';
    $file_to_upload .= $eol;
    $file_to_upload .= 'Content-Type: text/plain';
    $file_to_upload .= $eol;
    $file_to_upload .= 'Content-Transfer-Encoding: base64' . $eol . $eol;
    $handle = fopen($filename, 'r');
    $file_to_upload .=  fread($handle,filesize($filename));
    $file_to_upload .= $eol;
    $file_to_upload .= '--'.$mime_boundary.'--'. $eol.$eol;
    fclose($handle);

    $header = array("POST /qcbin/rest/domains/".$domain."/projects/".$project."/".$entity.'/'.$id.'/attachments'." HTTP/1.1",
        'Content-Type: multipart/form-data; boundary='.$mime_boundary,
        //'Content-Length: '.strlen($file_to_upload)
        );
    curl_setopt($qc, CURLOPT_HTTPHEADER, $header);   
    curl_setopt($qc, CURLOPT_POSTFIELDS, $file_to_upload); 
    curl_setopt($qc, CURLOPT_COOKIEFILE, $ckfile);
    curl_setopt($qc, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($qc, CURLOPT_URL, $this->url."/qcbin/rest/domains/".$this->domain."/projects/".$this->project."/".$entity."/".$id.'/attachments');
    return curl_exec($qc);
} 
```

当我将请求发送到指定的 URL 时，我从 ALM 收到以下错误：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<QCRestException>
    <Id>qccore.general-error</Id>
    <Title>Illegal multi-part arguments. Attachment wasn't created.</Title>
    <StackTrace>java.lang.IllegalArgumentException: Illegal multi-part arguments. Attachment wasn't created.&#xD;
at org.hp.qc.web.restapi.attachments.AttachmentsResource.createAttachmentMutliPart(AttachmentsResource.java:141)&#xD;
at sun.reflect.GeneratedMethodAccessor985.invoke(Unknown Source)&#xD;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&#xD;
at java.lang.reflect.Method.invoke(Method.java:597)&#xD;
... 
```

我想知道我做错了什么。我正在遵循 API 参考中 POST 字段的指示结构。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:20:15.157

我刚刚解决了这个问题，我很高兴。我的问题是我在标题中用破折号定义边界，就像在正文中引用它们一样。这是不正确的。

这是一个对我有用的示例（基于 REST API 文档）：

标题：

```
Content-Type: multipart/form-data; boundary=myboundary 
```

身体：

```
--myboundary
Content-Disposition: form-data; name="filename"

anna.txt
--myboundary
Content-Disposition: form-data; name="file"; filename="anna.txt"

banana
--myboundary-- 
```

我仍然无法上传二进制附件，但这对我来说是一个很大的进步。

编辑 - 以下 powershell 代码适用于我上传任何文件类型：

```
$contents = gc "my file path"
$body = @"
--boundary
Content-Disposition: form-data; name="filename"

$name
--boundary
Content-Disposition: form-data; name="file"; filename="$name"

$contents
--boundary--
"@

$headers = @{"Content-Length" = $body.Length; "Content-Type" = "multipart/form-data; boundary=$boundary"}

Invoke-RestMethod -Uri "ALM attachment URI" -Method Post -ContentType "multipart/form-data;boundary=boundary" -WebSession $global:session -Body $body 
```

编辑：这是我的最后一次更新 - 一个通过 REST API 成功上传附件的 python 函数。请注意，它是一个更大的库的一部分，但希望您能明白：

```
def upload_attachment(self, entity_type, id, file_name):
        """
        Name
            upload_attachment
        Description
            Uploads an attachment to the supplied entity
        Parameters
            entity_type: the entity type - i.e. 'test-instance', 'run', etc.
            id: the integer id of the entity
            file_name: the name of the file in the local filesystem
        Returns
        """
        print 'Uploading attachment to %s id=%s' % (entity_type, id)
        with open(file_name, 'rb') as file:
            bin_data = file.read()
        qurl = '%s/qcbin/rest/domains/%s/projects/%s/%s/%s/attachments' % \
            (self.url, self.domain, self.project, entity_type, id)
        headers = {'Content-Type' : 'multipart/form-data; boundary=uploadboundary'}
        body = """--uploadboundary
Content-Disposition: form-data; name="filename"

%s
--uploadboundary
Content-Disposition: form-data; name="file"; filename="%s"

%s
--uploadboundary--""" % (file_name, file_name, bin_data)

    rsp = self.session.post(qurl, data=body, headers=headers)
    if rsp.status_code != 201:
            raise Exception('Failed to upload %s - code=%s message=%s' % \
            (file_name, rsp.status_code, rsp.text)) 
```

我希望有人觉得这很有用。

编辑：代码不起作用，因为它是更大库的一部分。这是一个示例，说明如何发布一个名为“hello.txt”的简单文本文件，其内容为“Hello!!” 它是使用上面的代码生成的：

标题：

```
'Content-Type': 'multipart/form-data; boundary=uploadboundary' 
```

身体：

```
--uploadboundary
Content-Disposition: form-data; name="filename"

hello.txt
--uploadboundary
Content-Disposition: form-data; name="file"; filename="hello.txt"

Hello!!
--uploadboundary-- 
```

# winapi - 如何获取在win32中创建的编辑框的内容？

> ID：15782163
> 
> 赞同：1
> 
> 时间：2013-04-03T08:17:29.933
> 
> 标签：winapi, win32gui

我用win32中的方法创建了一个编辑框，如下所示：

```
HWND hwnd=CreateWindowEx(WS_EX_CLIENTEDGE, TEXT("Edit"),
    NULL,WS_CHILD|WS_VISIBLE|ES_PASSWORD,
    0, 0, 200, 20, m_hWnd, NULL, NULL, NULL); 
```

它工作得很好，但是，问题是：我怎样才能得到在窗口中输入的单词，一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:51:05.083

向编辑窗口发送[`WM_GETTEXT`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms632627%28v=vs.85%29.aspx)消息。您需要分配一个字符串缓冲区来存储文本。您可以通过发送来找出所需的长度[`WM_GETTEXTLENGTH`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms632628%28v=vs.85%29.aspx)。

另一种可能稍微简单一点的方法是使用[`GetWindowText()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633520%28v=vs.85%29.aspx)and[`GetWindowTextLength()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633521%28v=vs.85%29.aspx)函数。

对于与调用者在同一进程中的窗口，这两种方法之间没有真正的区别。

# entity-framework - 通用存储库：如何过滤预先加载的导航属性

> ID：15782164
> 
> 赞同：1
> 
> 时间：2013-04-03T08:17:32.693
> 
> 标签：entity-framework, entity-framework-4

这是我使用的通用存储库，正如标题所述，我想知道如何过滤导航属性。

```
public IEnumerable<T> Query(
        Expression<Func<T, bool>> filter = null,
        Func<IQueryable<T>, IOrderedQueryable<T>> orderBy = null,
        string includeProperties = "")
    {
        IQueryable<T> query = _objectSet.Where(e => !e.IsDeleted);            

        if (filter != null)
        {
            query = query.Where(filter);
        }

        foreach (var includeProperty in includeProperties.Split
            (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }

        if (orderBy != null)
        {
            return orderBy(query).ToList();
        }
        else
        {
            return query.ToList();
        }
    } 
```

控制器：

```
var viewModel = new StudentViewModel();
        viewModel.Students= _unitOfWork.Students.Query(
            includeProperties: "Subjects, Instructors"); 
```

现在我的问题是我想使用存储库向 [Subjects] 和 [Instructors] 添加 .Where(e => !e.IsDeleted) 。

谢谢

编辑：根据 Ladislav，目前这是不可能的（在 msdn 中也提到过：http: [//blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature- ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx) )

```
Can i just use this instead?
viewModel.Subjects = viewModel.Students.Where(i => i.StudentID ==Id.Value)
                     .Single().Subjects.Where(e => !e.IsDeleted); 
```

我唯一担心的是查询可能会返回大量 isDeleted==true 的记录。当然我发布的代码作为替代工作，我只是不想提取我不需要的数据，即使我可以使用上面的代码过滤它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:37:15.570

LINQ to SQL 使用 LoadWith DataLoadOption 支持此方案。[http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.loadwith.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.loadwith.aspx)上的示例显示了 EF 支持 Include 语句的简单案例。

```
Northwnd db = new Northwnd(@"c:\northwnd.mdf");
DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Customer>(c => c.Orders);
db.LoadOptions = dlo; 
```

但是，与 EF 不同，LINQ to SQL 还支持以下内容：

```
dlo.LoadWith<Customer>(c => c.Orders.Where(o => o.ShippedDate is Null); 
```

如果您认为这是 EF 的重要增强方案，请考虑在[http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include投票-扩展方法](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method)。

目前，您最好的选择是在 Select 子句中投影您的过滤器，但是使用通用存储库会变得很棘手。

# xslt - XSL 遍历非相似父母的相似孙辈并更新

> ID：15782165
> 
> 赞同：0
> 
> 时间：2013-04-03T08:17:40.243
> 
> 标签：xslt, xpath

我有我的 xml，因此我只想在其他子项不是空白或空值时获取标记名和 segnum，当其他段为空时，我不想在输出中保留为空白。

获取我在 for-each 中使用的标记名，并获取我使用的 segnum “count(preceding::head) + 1”，但是我不知道如何排除空白标签

```
<myxml>
  <a>
    <head>
      <tagname></tagname>
      <segnum></segnum>
    </head>
    <fs>axl</fs>
    <es>hoot</es>
  </a>
  <b>
    <head>
      <tagname></tagname>
      <segnum></segnum>
    </head>
    <zz>suger</zz>
    <sd>mint</sd>
  </b>
  <b>
    <head>
      <tagname></tagname>
    </head>
    <zz></zz>
    <sd></sd>
    <gs></gs>
  </b>
  <g>
    <head>
      <tagname></tagname>
      <segnum></segnum>
    </head>
    <gz></gz>
    <gd></gd>
    <gs></gs>
  </g>
</myxml>

required output:

<myxml>
  <a>
    <head>
      <tagname>a</tagname>
      <segnum>1</segnum>
    </head>
    <fs>axl</fs>
    <es>hoot</es>
  </a>
  <b>
    <head>
      <tagname>b</tagname>
      <segnum>2</segnum>
    </head>
    <zz>suger</zz>
    <sd>mint</sd>
  </b>
  <b>
    <head>
      <tagname></tagname>
      <segnum></segnum>
    </head>
    <zz></zz>
    <sd></sd>
    <gs></gs>
  </b>
  <g>
    <head>
      <tagname></tagname>
      <segnum></segnum>
    </head>
    <gz></gz>
    <gd></gd>
    <gs></gs>
  </g>
</myxml> 
```

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:43:01.043

您可以先使用一个模板来仅匹配其他子元素不为空白的**头部元素**

```
<xsl:template match="head[following-sibling::*/text()]"> 
```

**然后你可以通过使用xsl:number**来计算前面的**head**元素的数量

 **```
<xsl:variable name="count">
   <xsl:number count="head[following-sibling::*/text()]" level="any" />
</xsl:variable> 
```

然后，您可以像这样在您的**标记名**元素中输出它：

```
<tagname><xsl:number value="$count" format="a" /></tagname> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="head[following-sibling::*/text()]">
      <xsl:variable name="count">
         <xsl:number count="head[following-sibling::*/text()]" level="any" />
      </xsl:variable>
      <head>
         <tagname><xsl:number value="$count" format="a"  /></tagname>
         <segnum><xsl:number value="$count" /></segnum>
      </head>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
              <xsl:apply-templates select="@* | node()" />
       </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<myxml>
  <a>
    <head>
       <tagname>a</tagname>
       <segnum>1</segnum>
    </head>
    <fs>axl</fs>
    <es>hoot</es>
  </a>
  <b>
    <head>
       <tagname>b</tagname>
       <segnum>2</segnum>
    </head>
    <zz>suger</zz>
    <sd>mint</sd>
  </b>
  <b>
    <head>
      <tagname/>
    </head>
    <zz/>
    <sd/>
    <gs/>
  </b>
  <g>
    <head>
      <tagname/>
      <segnum/>
    </head>
    <gz/>
    <gd/>
    <gs/>
  </g>
</myxml> 
```**

# android-webview - Android Webview - 返回应用程序时防止重新加载

> ID：15782166
> 
> 赞同：5
> 
> 时间：2013-04-03T08:17:41.947
> 
> 标签：android-webview

当您返回应用程序时，如何防止在 webview 上重新加载？当点击 home 键然后返回应用程序时，webview 被重新加载。我不想要这种行为，我希望用户查看他们访问的上一页（无需重新加载）。

```
private WebView webView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webView = (WebView) findViewById(R.id.webView);
    webView.setWebViewClient(new WebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl( WEBSITE_URL );
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:39:37.150

通过在. `android:launchMode="singleInstance"`_`<activity>``androidmanifest.xml`

# java - Java：优先队列实现可按正确顺序迭代

> ID：15782168
> 
> 赞同：3
> 
> 时间：2013-04-03T08:17:42.160
> 
> 标签：java, iterator, priority-queue

我正在寻找 Java 中 PQ 的一些实现，它允许按 PQ 顺序进行迭代 - 首先是顶部元素，接下来是下一个元素等。我尝试使用 TreeSet（它实现了 NavigableSet），但它会导致一个问题。就我而言：

*   我正在为我的对象使用比较器
*   由于某些外部操作而导致的优先级更改
*   如果优先级发生变化，我知道哪个对象，但我不知道它是以前的优先级

结果到最后一点 - 当我想更新它的优先级时，我在 TreeSet 中找不到我的元素：/ 你碰巧知道：遵守这个的聪明方法吗？或者以“好”方式迭代的一些 PQ 实现？或者我应该创建一些链接数据结构，将对象与其在树中的位置相匹配？

更新：

*   并发不是问题
*   无法从 TreeSet 中删除对象，因为它的优先级已更改，因此 Comparator 将进行不同的评估，并且不会在此数据结构中找到对象。插入不是问题。
*   我不能使用`compareTo`方法，因为此优先级不是比较这些对象的正确方法。这就是为什么我需要使用`Comparator`

可能的解决方案：

*   创建`PrioritizedObject`将按优先级进行比较的类并保留我的对象
*   使用地图：我的对象->`PrioritizedObject`
*   保留`PrioritizedObject`一些`NavigableSet`

我会使用这张地图从`NavigableSet`. 如果我添加一些东西，当然会用新元素更新它。问题是我将不得不从中包装迭代器`NavigableSet`以使迭代器返回我的对象​​。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:09:32.873

如果并发不是问题，您需要做的就是*在*更新元素的优先级后立即重新排序树。如果我正确理解了这个问题，那么这个草图应该适合你。

示例元素：

```
public class Element implements Comparable<Element> {

private final Integer id;
private Integer priority;

public Element(Integer id, Integer priority) {
    this.id = id;
    this.priority = priority;
}

@Override
public String toString() {
    return "Element{" + "id=" + id + ", priority=" + priority + '}';
}

public Integer getPriority() {
    return priority;
}

public void setPriority(Integer priority) {
    this.priority = priority;
}

@Override
public int compareTo(Element o) {
    if (o == null) {
        throw new NullPointerException();
    }
    return priority.compareTo(o.priority);
}
} 
```

草图：

```
public class Tree {

public static TreeSet<Element> priorityQueue = new TreeSet<Element>();

public static void dump(TreeSet<Element> in) {
    for (Element e : in) {
        System.out.println(e);
    }

}

public static void updatePriority(Element e, int newPriority) {
    if (priorityQueue.remove(e)) {
        e.setPriority(newPriority);
        priorityQueue.add(e);
    }
}

public static void main(String[] args) {

    int id;
    Element lastElement = null;
    for (int i = 0;i < 10 ; i++) {
        id = (int)(Math.random()*1000);
        priorityQueue.add(lastElement = new Element(id, id));
    }
    dump(priorityQueue);
    updatePriority(lastElement, 0);
    System.out.println("updating "+lastElement+ " priority to 0");
    dump(priorityQueue);

}
} 
```

您可以通过从[treeset](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)中删除元素、设置新的优先级然后重新插入来更新元素。这种情况下更新操作的复杂性是`2*O(log(n)) = O(log(n))`

更新：

我能理解的最好的是：您有两个需要排序/索引的标准。当我遇到同样的问题时，我使用了这种[方法](https://stackoverflow.com/a/10940234/679982)[，](https://stackoverflow.com/questions/1421322/how-do-i-sort-a-list-with-multiple-sort-parameters)但这是一种非常有趣的方法，我强烈推荐阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:10:35.963

> 如果优先级发生变化，我知道哪个对象，但我不知道它是以前的优先级

你不需要知道它以前的优先级。您所要做的就是将其删除并重新插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:06:22.890

我建议`ConcurrentSkipListSet`不要，`TreeSet`因为它是线程安全的。如果您知道优先级正在发生变化的对象，您可以调用`remove(objToChange)`，更改其优先级，然后将其重新添加到集合中。

`equals`向集合中添加其、`hashcode`和`compareTo`方法依赖于可变字段的任何对象时要非常小心。

编辑：我认为任何解决方案最终都会看起来像你的`PrioritizedObject`，这对我来说似乎很好。如果要遍历对象，请使用`Map.keySet`.

# cfml - Coldfusion“谢谢”页面允许用户无限次刷新

> ID：15782169
> 
> 赞同：1
> 
> 时间：2013-04-03T08:17:48.210
> 
> 标签：cfml

大家好，我需要一些建议。

当订单成功发布时，我们的支付网关会发回一些包含在 url 字符串中的数据。

唯一的问题是用户每次刷新感谢页面时都会刷新页面并发送一堆 cfmail 命令！

这对我们的安全性更好，在此页面加载后不久设置重定向到我们的主页，设置一种方法来阻止用户多次加载页面或删除订单信息以便用户无法点击刷新？

以下是支付网关在成功交易时生成的示例 url。

```
http://www.ourwebsitename.com/ConfirmationPage.cfm?cartinfo=^XXXX^1&orderinfo=Customer^Name^Billing Name^Billing^Line^1^Town^Postcode^websitename^Order^Amount^&responsesitesecurity=SECUREHASHCODE&thisorderid=OURORDERID 
```

人们对保护此页面有何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:38:28.647

我过去解决这个问题的方法是执行以下操作

1.  在显示用户的任何页面上，尽量不要有任何实际执行任何操作的逻辑。仅在显示页面上显示逻辑
2.  在结帐过程结束时，发送电子邮件，然后使用`<cflocation>`重定向到确认页面
3.  添加一些检查位到会话或任何你用来跟踪用户的东西，以标记电子邮件已经发送
4.  如果您真的不希望用户重新发送电子邮件两次，请使用 a`<cflock>`并确认 #3 中提到的标志没有在内部标记`<cflock>`（以确保它没有被锁定它的进程发送）

这应该有助于减少/消除用户刷新的影响。当我过去遇到这种情况时，这是由于人们将逻辑放在输出页面上，而这些逻辑实际上应该在用户没有显示的页面之一上（由于他们默默地重定向）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:27:06.063

我建议您`confirmation_email_sent`在数据库中的订单表中添加一个 -column，然后在您第一次发送电子邮件时设置此标志。如果用户刷新页面，您会注意到此标志已设置，然后可以跳过发送电子邮件。如果除了电子邮件发送之外还有其他副作用，那么可能应该以相同的方式减轻这些副作用。

# java - 休眠似乎形成了错误的查询

> ID：15782171
> 
> 赞同：1
> 
> 时间：2013-04-03T08:17:49.857
> 
> 标签：java, sql-server, hibernate, spring-mvc

我的要求是提取名称不为空的所有不同行（仅名称列）这是我的休眠代码。

```
DetachedCriteria criteria = DetachedCriteria.forClass(A.class);
criteria.add(Restrictions.isNotNull("name"));
ProjectionList list = Projections.projectionList();
list.add(Projections.distinct(Projections.property("name")),"name");
criteria.setProjection(list);
criteria.setResultTransformer(Transformers.aliasToBean(A.class));
result = getHibernateTemplate().findByCriteria(criteria); 
```

形成的SQL如下：

```
select distinct this_.name as y0_ 
from dbo.A this_ 
where y0_ is not null 
```

错误是`ERROR - Invalid column name 'y0_'` 我不明白为什么休眠会形成这样的错误查询。任何帮助表示赞赏。

A类代码：

```
@Entity
@Table(name = "A", uniqueConstraints = {})
public class A implements java.io.Serializable {

    private int skillId;
    private String name;

    public A() {
    }

    @Id
    @Column(name = "SKILL_ID", unique = true, nullable = false, insertable = true, updatable = true)
    @GeneratedValue(strategy = GenerationType.AUTO)
    public int getSkillId() {
        return this.skillId;
    }

    public void setSkillId(int skillId) {
        this.skillId = skillId;
    }

    }

    @Column(name = "name", unique = false, nullable = true, insertable = true, updatable = true, length = 100)
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:35:29.323

尝试这个

```
DetachedCriteria criteria = DetachedCriteria.forClass(A.class);
criteria.add(Restrictions.isNotNull("name"));
ProjectionList list = Projections.projectionList();
list.add(Projections.property("name"));
criteria.setProjection(Projections.distinct(list)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:03:41.083

尝试以下：

```
Criteria criteria = session.createCriteria(Test.class);
ProjectionList projectionList = Projections.projectionList();
ProjectionList projectionList2 = Projections.projectionList();
projectionList2.add(Projections.distinct(projectionList.add(Projections.property("distinctColumn"), "distinctColumn")));
projectionList2.add(Projections.property("col1"), "col1");
projectionList2.add(Projections.property("col2"), "col2");
criteria.setProjection(projectionList2);
criteria.setResultTransformer(Transformers.aliasToBean(Test.class)); 
List list = criteria.list(); 
```

在您的情况下，“distinctColumn”将是“名称”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T15:46:32.270

我们遇到了同样的问题，创建别名解决了这个问题，尝试：

```
Criteria criteria = session.createCriteria(A.class, "a")
criteria.add(Restrictions.isNotNull("a.name"));
ProjectionList list = Projections.projectionList();
list.add(Projections.distinct(Projections.property("a.name")),"name");
criteria.setProjection(list);
criteria.setResultTransformer(Transformers.aliasToBean(A.class));
result = getHibernateTemplate().findByCriteria(criteria); 
```

# cocoa - 如何使自定义窗口从各个方向调整大小

> ID：15782176
> 
> 赞同：0
> 
> 时间：2013-04-03T08:17:58.117
> 
> 标签：cocoa, subclass, nswindow, nsborderlesswindowmask

即使使用 NSBorderlessWindowMask ，如何使 NSWindow 子类从各个方面调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:19:41.263

在 styleMask 参数中包含 NSResizableWindowMask

```
initWithContentRect: contentRect
          styleMask:(NSBorderlessWindowMask | NSResizableWindowMask)
    backing: bufferingType
      defer: flag 
```

# android - 如何将图像从一项活动发送到另一项活动？

> ID：15782180
> 
> 赞同：5
> 
> 时间：2013-04-03T08:18:08.590
> 
> 标签：android, android-activity, imageview, send

我需要像发送字符串“title”一样发送一个imageview，但我不能，我怎样才能将一个imageview（R.drawable.image）从mainactivity发送到secondactivity？

谢谢

主要活动

```
public void NewActivity(View view){ 
Intent intent = new Intent(this, SecondActivity.class); 
intent.putExtra("title", getString(R.string.title));    
startActivity(intent); 
} 
```

第二项活动

```
@Override 
public void onCreate(Bundle bundle) 
{ 

super.onCreate(bundle); 
setContentView(R.layout.pantalla); 
Bundle extras = getIntent().getExtras(); 
if (extras == null) 
{ 
return; 
} 
String title = extras.getString("title"); 

TextView textview = (TextView)findViewById(R.id.titulo); 

textview.setText(title); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:23:18.797

**解决方案1：（**对于非`drawable`资源）

您可以将路径文件名作为字符串发送。就像`"title"`你的例子一样。

*如果您在使用 ImageView 的文件路径时遇到问题。 [从文件路径显示图像视图？](https://stackoverflow.com/questions/4181774/show-image-view-from-file-path-in-android)*

* * *

**解决方案2：（**简单`drawable`轻巧的方式）

发送资源整数值，如：

主要活动

```
Intent intent = new Intent(this, SecondActivity.class); 
intent.putExtra("resourseInt", R.drawable.image);    
startActivity(intent); 
```

第二项活动

```
@Override 
public void onCreate(Bundle bundle) 
{ 

    super.onCreate(bundle); 
    setContentView(R.layout.pantalla); 
    Bundle extras = getIntent().getExtras(); 
    if (extras == null) 
    { 
        return; 
    } 
    int res = extras.getInt("resourseInt"); 

    ImageView view = (ImageView) findViewById(R.id.something); 

    view.setImageResourse(res); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:22:42.803

把图片的路径放到putExtra中。不要发送位图它可能很重

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T08:24:03.410

保存文件路径

```
intent.putExtra("imagePath", filepath); 
```

通过意图发送图像并使用

```
String image_path = getIntent().getStringExtra("imagePath");
Bitmap bitmap = BitmapFactory.decodeFile(image_path);
myimageview.setImageDrawable(bitmap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:42:18.700

**在您的应用程序中的所有活动中都可以使用可绘制对象。** **您可以直接**
访问它们，而不是将它们从一个活动发送到另一个活动。

# google-maps - IE8 中的 Google Maps V3 和信息框

> ID：15782181
> 
> 赞同：0
> 
> 时间：2013-04-03T08:18:22.243
> 
> 标签：google-maps, infobox

通过在除 IE8 及以下版本之外的所有浏览器中单击，我的信息框工作正常，它显示错误：SCRIPT438：对象不支持属性或方法“setContent”，我无法真正理解，因为它在其他浏览器中显然有效。有问题的代码部分：

```
function listenInfoWindows(marker, content) {
  google.maps.event.addListener(marker, 'click', function(){
      this.getMap().setCenter(this.getPosition());
      this.getMap().panBy(0,-80);
      infobox.setContent(content);
      infobox.open(map, this);
    }
  );
} 
```

有任何想法吗？谢谢！

# jenkins - 如何使用 jenkins gradle 插件将系统属性传递给 gradle？

> ID：15782195
> 
> 赞同：9
> 
> 时间：2013-04-03T08:19:23.933
> 
> 标签：jenkins, gradle, system-properties, bintray

我有一个使用 curl 将一些东西部署到 bintray 的 gradle 任务。

为此，它需要我的 bintray api 密钥。我不想把它放在我的构建脚本（或属性文件）中，因为所有这些东西都托管在 github 上。

相反，我让任务使用了一个名为的属性，该属性`bintrayApikey`将在调用 gradle 时提供。当我使用本地运行它时

```
gradlew pushToBintray -DbintrayApikey=<my api key> 
```

一切都按预期工作。

所以下一步是让我的 Jenkins 在 cloudbees 上完成这项工作。由于似乎没有放置系统属性的特殊位置，我只是将它们添加到任务中，但这似乎不起作用。在控制台中，我可以看到它可以正常访问 bintray，但随后完成：

```
This resource requires authentication 
```

那么如何在我的 jenkins 作业配置中提供属性值呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T22:03:50.387

使用`-Pmyprop`而不是`-Dmyprop`.

Gradle Jenkins 插件接受带有`-P`.

`-D`用于java参数。

# opencv - 用于图像聚类的 Kmeans

> ID：15782196
> 
> 赞同：1
> 
> 时间：2013-04-03T08:19:24.577
> 
> 标签：opencv, k-means

我是图像处理的新手，我正在使用 k-means 对我的作业进行聚类。我有一个问题，我的朋友告诉我要在 opencv 中使用 k-mean，我们只需要传递感兴趣对象的颜色而不是整个图像。

这让我很困惑，因为我不确定如何在应用 kmeans 之前获得颜色组合。对不起我的英语，我举个例子。我有一张有几种颜色的图片，假设我想获得蓝色集群，它是一辆汽车。这是否意味着我只需要将蓝色传递给kmeans。

也许我在这方面完全错了，因为我不确定而且我已经挣扎了好几天了。我想我需要一些专家的彻底解释，我想我会在这里得到它。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:16:08.340

为了让您朝着正确的方向前进，以下是一些提示：

1.  您会将所有像素以及所需的集群（或组）数量传递给 k-means 以查找

2.  k-means 将处理您的数据并将您的数据聚集在指定数量的集群中

3.  您将使用蓝色簇（例如）中的像素来做您想做的事情。

我希望这个能帮上忙 ;）

# mysql - 如何在不丢失数据的情况下重新安装 joomla 1.5？

> ID：15782197
> 
> 赞同：0
> 
> 时间：2013-04-03T08:19:27.067
> 
> 标签：mysql, joomla, joomla1.5

我试图在我的 joomla 1.5 注册表单中添加自定义字段。我没有备份。我搞砸了。我的网站在其他模块上运行良好。但我无法从后端管理员帐户或前端帐户登录。它显示此错误“网站在检索[http://mywebsite.com/index.php](http://mywebsite.com/index.php)时遇到错误。它可能因维护而关闭或配置不正确。” 如何将其更换回工作模式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:28:48.163

首先备份everthing，（也是数据库）。

下载一个全新安装，但将其放在另一个文件夹中，然后安装。现在将新安装的 joomla 1.5 文件夹复制粘贴到错误的文件夹上。如果那不起作用。使用备份返回并尝试另一种方式。

# android - 当用户触摸列表时停止在列表视图中滚动 - android

> ID：15782199
> 
> 赞同：2
> 
> 时间：2013-04-03T08:19:28.267
> 
> 标签：android, android-listview, scroll

我有一个包含大约 30 个项目的列表视图。当我向下滚动它时，它只会进入列表的最底部，并且在用户触摸列表时不会停止。

是否有一种方法可以在触摸列表视图时停止滚动，同时用户应该能够使用 onItemClick（已经处理）进行导航。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:51:38.810

使用[`smoothScrollBy`](https://developer.android.com/reference/android/widget/AbsListView#smoothScrollBy(int,%20int)).

```
@Override 
public boolean onTouchEvent(MotionEvent ev) 
{ 
    switch (ev.getAction()) 
    {
        case MotionEvent.ACTION_UP:
            this.smoothScrollBy(0, 0); 
            break; 
    } 
    return super.onTouchEvent(ev);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:37:17.193

通过参考 Nitin Gupta 的回答，我想出了自己的：

```
public class OnTouchListenr implements OnTouchListener{

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction()==MotionEvent.ACTION_DOWN)  
        {
            businessResultListView.smoothScrollBy(0, 0); 
            return true;
        }

        return false;
    }          
} 
```

然后我在列表视图上设置 OnTouchListener，如下所示：

```
businessResultListView.setOnTouchListener(new OnTouchListenr()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T10:21:15.330

在 Listview 中覆盖**dispatchTouchEvent**

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev){
   if(ev.getAction()==MotionEvent.ACTION_MOVE){
      return true;
   }return super.dispatchTouchEvent(ev);
} 
```

# objective-c - Uncrustify：在大括号之前修剪换行符

> ID：15782200
> 
> 赞同：1
> 
> 时间：2013-04-03T08:19:34.250
> 
> 标签：objective-c, xcode, uncrustify

什么是 uncrustify 的正确配置，以便它删除花括号之前的空行，以便：

```
 }

    }
    else
    {
        // foo
    }
    [bar tend];

} 
```

变成：

```
 }
    }
    else
    {
        // foo
    }
    [bar tend];
} 
```

我搜索了文档，但找不到正确的设置，也许它有一个不寻常的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:45:13.160

找到了。下面将处理虚假的空行。

```
eat_blanks_after_open_brace   = TRUE
eat_blanks_before_close_brace = TRUE
nl_max = 2 
```

# jquery - Jquery Selectbox I Beam 问题

> ID：15782207
> 
> 赞同：2
> 
> 时间：2013-04-03T08:19:52.583
> 
> 标签：jquery, html, drop-down-menu, jquery-selectbox

这是一个选择框（我已经使用并修改过）。当我单击选择框时，它会变成文本输入并显示工字梁。只是想禁用这个工字梁。我怎么能得到那个？

[检查 JSfiddle](http://jsfiddle.net/asif097/baUEQ/)

这是html：

```
<select name="Items" id="Items">
    <option value="option1">option1</option>
    <option value="option2">option2</option>
    <option value="option3">option3</option>
    <option value="option4">option4</option>    
</select> 
```

和jQuery：

```
$(document).ready(function () {
    $('#Items').selectbox();
});

jQuery.fn.extend({
    selectbox: function (options) {
        return this.each(function () {
            new jQuery.SelectBox(this, options);
        });
    }
});

if (!window.console) {
    var console = {
        log: function (msg) {}
    }
}

jQuery.SelectBox = function (selectobj, options) {

    var opt = options || {};
    opt.inputClass = opt.inputClass || "selectbox";
    opt.containerClass = opt.containerClass || "selectbox-wrapper";
    opt.hoverClass = opt.hoverClass || "current";
    opt.currentClass = opt.selectedClass || "selected"
    opt.debug = opt.debug || false;

    var elm_id = selectobj.id;
    var active = -1;
    var inFocus = false;
    var hasfocus = 0;
    //jquery object for select element
    var $select = $(selectobj);
    // jquery container object
    var $container = setupContainer(opt);
    //jquery input object 
    var $input = setupInput(opt);
    // hide select and append newly created elements
    $select.hide().before($input).before($container);

    init();

    $input.click(function () {
        if (!inFocus) {
            $container.toggle();
        }
    })
        .focus(function () {
        if ($container.not(':visible')) {
            inFocus = true;
            $container.show();
        }
    })
        .keydown(function (event) {
        switch (event.keyCode) {
            case 38:
                // up
                event.preventDefault();
                moveSelect(-1);
                break;
            case 40:
                // down
                event.preventDefault();
                moveSelect(1);
                break;

            case 13:
                event.preventDefault();
                $('li.' + opt.hoverClass).trigger('click');
                break;
            case 27:
                hideMe();
                break;
        }
    })
        .blur(function () {
        if ($container.is(':visible') && hasfocus > 0) {
            if (opt.debug) console.log('container visible and has focus')
        } else {
            hideMe();
        }
    });

    function hideMe() {
        hasfocus = 0;
        $container.hide();
    }

    function init() {
        $container.append(getSelectOptions($input.attr('id'))).hide();
        var width = $input.css('width');
        $container.width(width);
    }

    function setupContainer(options) {
        var container = document.createElement("div");
        $container = $(container);
        $container.attr('id', elm_id + '_container');
        $container.addClass(options.containerClass);

        return $container;
    }

    function setupInput(options) {
        var input = document.createElement("input");
        var $input = $(input);
        $input.attr("id", elm_id + "_input");
        $input.attr("type", "text");
        $input.addClass(options.inputClass);
        $input.attr("autocomplete", "off");
        $input.attr("readonly", "readonly");
        $input.attr("tabIndex", $select.attr("tabindex"));

        return $input;
    }

    function moveSelect(step) {
        var lis = $("li", $container);
        if (!lis) return;

        active += step;

        if (active < 0) {
            active = 0;
        } else if (active >= lis.size()) {
            active = lis.size() - 1;
        }

        lis.removeClass(opt.hoverClass);

        $(lis[active]).addClass(opt.hoverClass);
    }

    function setCurrent() {
        var li = $("li." + opt.currentClass, $container).get(0);
        var ar = ('' + li.id).split('_');
        var el = ar[ar.length - 1];
        $select.val(el);
        $input.val($(li).html());
        return true;
    }

    function getCurrentSelected() {
        return $select.val();
    }

    function getCurrentValue() {
        return $input.val();
    }

    function getSelectOptions(parentid) {
        var select_options = new Array();
        var ul = document.createElement('ul');
        $select.children('option').each(function () {
            var li = document.createElement('li');
            li.setAttribute('id', parentid + '_' + $(this).val());
            li.innerHTML = $(this).html();
            if ($(this).is(':selected')) {
                $input.val($(this).html());
                $(li).addClass(opt.currentClass);
            }
            ul.appendChild(li);
            $(li)
                .mouseover(function (event) {
                hasfocus = 1;
                if (opt.debug) console.log('over on : ' + this.id);
                jQuery(event.target, $container).addClass(opt.hoverClass);
            })
                .mouseout(function (event) {
                hasfocus = -1;
                if (opt.debug) console.log('out on : ' + this.id);
                jQuery(event.target, $container).removeClass(opt.hoverClass);
            })
                .click(function (event) {
                var fl = $('li.' + opt.hoverClass, $container).get(0);
                if (opt.debug) console.log('click on :' + this.id);
                $('li.' + opt.currentClass).removeClass(opt.currentClass);
                $(this).addClass(opt.currentClass);
                setCurrent();
                hideMe();
            });
        });
        return ul;
    }

}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:15:00.647

我假设你试图使用[这个 jquery 插件](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

有一个“行”（又名文本框光标）的原因是因为这个函数：

```
function setupInput(options) {
    ...
    $input.attr("type", "text");
    ...
} 
```

返回一个文本框。

不完全确定您要实现什么，但由于插件文档不需要这样的功能，那么您应该尝试在不使用 a 的情况下实现它`<input type="text"/>`，也许只是返回 a`<div/>`并通过 jQuery 设置其值？

# google-drive-api - 谷歌驱动器 api php

> ID：15782209
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:08.607
> 
> 标签：google-drive-api

你知道我怎样才能用 php 在 Google Drive 中创建一个目录吗？php 文件是一个 web 服务，用户没有与文件交互，这个 php 文件由 CRM 应用程序 (Zoho CRM WebHooks) 调用。

是否可以长期拥有与另一个应用程序一样多的令牌 OAuth？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:08:27.273

Google Drive 文件夹是具有`application/vnd.google-apps.folder`mime 类型的文件。插入具有此 MIME 类型的新文件。您需要请求刷新令牌，PHP 库会自动请求新令牌。它在[https://developers.google.com/accounts/docs/OAuth2WebServer#offline上有大量记录](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

# perl - 使用 perl 执行 shell 命令，同时保留 shell 环境变量

> ID：15782212
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:09.553
> 
> 标签：perl, shell

我需要使用 perl 运行顺序 shell 命令，但我需要 shell 环境来保留它的变量。

例如：

```
$result = `cd /`;
$result = `touch test.txt`; 
```

在这个例子中，我需要在 / 上创建 test.txt。

另外，我不想在像 $result= 这样的一行代码中运行它们`touch /test.txt`；在环境变量保持不变的情况下，我需要单独调用 shell。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:22:00.993

```
chdir '/';
$result = `touch test.txt`; 
```

# date - 7天后如何执行命令？

> ID：15782213
> 
> 赞同：1
> 
> 时间：2013-04-03T08:20:10.207
> 
> 标签：date, math

很抱歉这个新手问题，但我试图寻找答案，但我找不到一个很好解释的例子。

谁能告诉我如何添加 7 天将它放在今天的变量上 7

```
REM get current date
set today=%date:~10,4%-%date:~4,2%-%date:~-7,2%

Rem add 7 days to variable today
set today7=today+7 days 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:48:03.867

也许[这](http://www.robvanderwoude.com/datetimentexamples.php)会对你有所帮助。（谷歌可以成为你的朋友）

# java - 我试图让 sejda 控制台在我的 Windows8 机器上工作，出现 java 错误

> ID：15782214
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:12.320
> 
> 标签：java

运行 sejda-console 命令时，它告诉我“java”不被识别为内部或外部命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:21:35.603

您需要将java路径添加到环境变量

> 变量名：“路径”
> 
> 变量值：PATH_OF_BIN_OF_YOUR_JAVA_INSTALLATION（例如：c:\program files\java\jdk1.7_13）

# string - 在 SAP 中下载文件时不要修剪

> ID：15782215
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:12.897
> 
> 标签：string, concatenation, abap, space

SAP 对下载的文件进行了修剪，但我需要在字符串末尾添加空格并下载带有这些空格的文件。

我试图在字符串的末尾添加破折号，然后用空格翻译破折号。

我的代码块是；

```
gt_data-line = 'XXX'.
lv_basamak = STRLEN( gt_data-line ).  "result : 3

CONCATENATE gt_data-line '------' INTO gt_data-line RESPECTING BLANKS. 
TRANSLATE gt_data-line USING '- '.

lv_basamak = STRLEN( gt_data-line ).  "result : 9 
```

但是当我下载文件时，字符串末尾没有任何空格。

我可以做些什么来添加空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:09:32.570

`CL_GUI_FRONTEND_SERVICES`使用方法查看类`GUI_DOWNLOAD`。将您的内容转换为二进制字符串（转换为 xstring 或 xstring 表）并以二进制格式下载（filetype = 'BIN'）。

# android - 使用 Scala 的替代方法调用 Java 方法

> ID：15782218
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:20.063
> 
> 标签：android, scala, reflection, type-erasure, scala-java-interop

我正在尝试使用来自 Scala 的 Android API`put`中的类的方法`ContentValues`，但我想不出一种方法来使 Scala 缩小列表元素的类型。例如 ：

```
val a: List[(String, Any)](...)
val cv = new ContentValues
for ((k,v) <- a) cv.put(k,v) 
```

...产生一个错误，粗略地说它无法解决“具有替代*方案的**重载`put`方法”`put(String, String)``put(String, Int),...`*。

我的直觉告诉我我可能应该使用反射，但我无法弄清楚如何准确地做到这一点。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:38:25.993

您的列表类型太不精确。`ContentValues.put`有许多类型的重载，但它们都是特定的（`Integer`、`Float`等），并且没有替代`Object`.

你可以：

*   使列表类型更精确，以防列表只有一种类型的元素（例如，`Int`）。
*   使用[HList](https://github.com/milessabin/shapeless#heterogenous-lists)，但要注意类型巫术。在这种情况下可能有点矫枉过正
*   作为最后的手段，做一个类型测试：

    ```
    for ((k, v) <- a) v match {
      case n: Int => cv.put(k, v)
      case d: Double => cv.put(k, d)
      //...
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:51:58.750

这是 Scala 中一个非常著名且常见的问题。类型系统工作正常，开发人员根本不习惯。

> 在强类型编程语言中，编译器会验证您正在使用的类型的**规则，这可以防止痛苦的运行时错误。**如果您使用反射或强制转换，您可以强制使用类型系统，这会在**运行时**产生意外错误和问题。

你为什么要打破你主要受益的规则？一个很好的理由是当你设计一个库并且你确切地知道你的内部会发生什么（参见 scala 集合）。

当您最终使用 Any 或 AnyRef 等类型时，您应该担心并问自己：

*   为什么我会在等级制度中如此上升？
*   我是否可能对强类型编程语言使用了反模式或错误的构造函数？

事实上我猜你是，我建议我们一起进一步调查为什么你有一个`List[(String,Any)]`. 假设您在将数据放入 中没有问题`ContentValues`，如果稍后您需要从那里提取一些东西怎么办？你怎么知道它是 Int、Double 还是 Float？

# perl - 如何告诉我的开发环境始终加载 CGI::Carp 'fatalsToBrowser'？

> ID：15782219
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:32.943
> 
> 标签：perl, apache, cgi

我正在为（主要）使用 Linux（openSuse）和 Apache 的 CGI 应用程序运行开发环境。我们运行的许多应用程序过去一直都有[CGI::Carp](https://metacpan.org/module/CGI%3a%3aCarp) 'fatalsToBrowser'，当然我们不希望在生产中使用它。所以这是关于在一台机器上做这件事，而不是在另一台机器上做。因此，可怕的 CGI::Carp 需要从代码中消失。

我知道我可以从命令行使用 -M 加载模块。那个很简单，但对我没有帮助。我不想要命令行，我想要 Apache 的 CGI。

我在[perlmonks](http://www.perlmonks.org/?node_id=958615)上了解到有一种叫做 sitecustomize.pl 的东西，在[perlrun](http://perldoc.perl.org/perlrun.html)中有描述。它允许您添加在启动期间很早就执行的代码。我可能会使用它来添加对 CGI 环境的检查并加载模块。

医生说我必须检查`$Config{usesitecustomize}`我的 Perl 是否可以做到这一点。不幸的是，`perl -e 'print $Config{usesitecustomize}'`不会产生任何东西。我感觉它甚至都不知道`$Config`，因为当我使用 Data::Dumper 时它是空的。

我会让系统管理员放一些东西来检查，但这可能需要一些时间。

**有没有其他方法可以让 Perl 加载 CGI::Carp 模块并在`fatalsToBrowser`每次由 Apache 启动时导入？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:11:40.360

您链接到的 perlrun 文档指出，*如果*有问题的 perl 被编译为支持该选项（ ），则`-f`命令行标志会禁用该`usesitecuistomize`选项的执行。*`-Dusesitecustomize`*

 *这个选项似乎是为了对 perl 配置进行全局更改，而不是在每个站点的基础上改变 perl 的行为。

您始终可以决定有条件地加载和导入模块，例如

```
# CGI::Carp is no pragma, so this works without scoping issues:
BEGIN { eval q{ use CGI::Carp qw/fatalsToBrowser/ } if DEBUG_VERSION }; 
```

where`DEBUG_VERSION`在部署时设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T19:30:16.453

我最终`vhosts.conf`为 Apache 配置文件添加了一个开关，告诉 Perl 始终加载模块。由于这只影响开发框，它解决了问题：

```
PERL5OPT="-MCGI::Carp=fatalsToBrowser" 
```

该`PERL5OPT`变量在[perlrun](http://perldoc.perl.org/perlrun.html)中描述。*

# java - ViewScope bean 支持 JSF ajax 调用吗？

> ID：15782225
> 
> 赞同：1
> 
> 时间：2013-04-03T08:20:55.713
> 
> 标签：java, jsf, view, primefaces, updates

ViewScope bean 是否允许 ajax 调用？

例如：

这是一个xhtml页面：

```
<h:body>
        <h:selectOneMenu value="#{test.selected}">
            <f:selectItem itemValue="2" itemLabel="2" />
            <f:selectItem itemValue="3" itemLabel="3" />
            <f:ajax listener="#{test.updateData()}" />
        </h:selectOneMenu>
</h:body> 
```

这是 ViewScoped Bean：

```
@ViewScoped
@Named
public class test implements Serializable{
    private String selected;

    public void updateData(){
        System.out.println("Ajax call successful.");
    }

    public String getSelected() {
        return selected;
    }

    public void setTest(String test) {
        this.selected = selected;
    }
} 
```

当我尝试这个时，它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:47:48.670

实际上，到目前为止，您在发布的代码中存在 3 个严重问题：

1.  `<h:form>`失踪了。不确定这是否是对问题或实际代码的粗心准备。解决方案很明显：将分组`UIInput`和`UICommand`组件放在一个独立的`<h:form>`.

2.  在当前的 JSF 版本中，JSF 的作用域注解`@javax.faces.bean.ViewScoped`不适用于 CDI 的 bean 管理注解`@Named`。

    基本上有3种解决方案：

    *   请改用 CDI `@ConversationScoped`。有关具体示例，另请参阅[如何在 JSF 2.0/2.1 中用 CDI 替换 @ManagedBean / @ViewScope 。](https://stackoverflow.com/questions/14384369/how-to-replace-managedbean-viewscope-by-cdi/14384824#14384824)然而，这有一个令人讨厌的副作用，即它将`cid`请求参数附加到每个结果 URL。
    *   使用[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/)将 JSF`@ViewScoped`连接到 CDI。然而，这有一个令人讨厌的副作用，即它将`windowId`请求参数附加到每个结果 URL。
    *   等待 JSF 2.2 发布，这样您就可以利用 CDI 兼容`@javax.faces.view.ViewScoped`注解将它与 JSF 视图状态联系起来。

    然而，这几乎不是您具体问题的原因，因为应该只调用 bean 操作，但 bean 的行为就像`@RequestScoped`.

3.  缺少 setter 方法。`PropertyNotWritableException`然而，当表单成功提交时，这应该对服务器日志产生相当不言自明的解释。

根据目前提供的信息，还有第四个可能的原因无法确定：丢失`<h:head>`会导致`<f:ajax>`失败，因为`jsf.js`无法自动包含所需的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:28:43.653

你有一个错误的设置器导致错误

```
public void setTest(String test) {
    this.selected = selected;
} 
```

这必须是

```
public void setSelected(String test) {
    this.selected = test;
} 
```

另一方面，这个设置器被称为**h:selectOneMenu value="#{test.selected}"**，当您在组合框中选择一个项目时会触发它。

# android - Android：无法从多维 MongoDB jsonObject 转换为 JSONArray

> ID：15782226
> 
> 赞同：1
> 
> 时间：2013-04-03T08:20:56.837
> 
> 标签：android, json, mongodb

我试图从以 mongodb 作为数据库和 CI 的站点获取数据，我制作了简单的脚本来使站点的 json 编码输出，输出如下：

```
 {
   "mko680": {
       "_id": {
       "$id": "515be1807bfb8b1d0d000000"
        },
       "channel": [
                  "channel a",
                  "subchannel a"
                  ],
       "channel_id": 227,
       "id": "mko680",
    }, 
   "mkv002": {
       "_id": {
       "$id": "515b32407bfb8b1d0d000000"
             },
       "channel": [
                 "channel a",
                 "subchannel b"
                   ],
       "channel_id": 232,
       "id": "mkv002",
  }
} 
```

我尝试像这样在我的android项目中解析该输出

```
JSONArray obj = new JSONArray(outputlike o);
for (int i = 0; i < obj.length(); i++) {
  JSONObject json_data = obj.getJSONObject(i);
  Log.i("test",json_data.getString("channel_id"));
} 
```

logcat 说 org.JSON.Mismatch

任何线索是 json/我的代码不正确？

谢谢，对不起我的坏问题希望你能理解

**更新 ：**

现在我将其更改为 json 对象，例如：

```
JSONObject arr = new JSONObject(bufstring);
for (int i = 0; i < arr.length(); i++) {
Log.i("test",arr.getString("channel_id"));
} 
```

但是logcat现在说，channel_id没有价值，但它确定该输出中有channel_id，有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:29:09.323

您收到的数据是 type`JSONObject`而不是`JSONArray`. 因此，您需要像这样解析您的 json 数据：-

```
String jsonStr = "..."; //Your JSONString
JSONObject obj = new JSONObject(jsonStr);
JSONObject mkObj = obj.getJSONObject("mko680");
String channelId = mkObj.getString("channel_id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:23:38.553

您的返回数据`Jsonobject`不是`JsonArray`.

所以，你可以创建`JsonObject`，

```
JSONObject obj = new JSONObject(outputlike o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:37:04.087

谢谢大家根据你的回答我已经想通了，起初我很难获得动态密钥来获得正确的对象，我使用下面的代码来解决它，不认为它是好的，但我暂时使用它

```
JSONObject arr = new JSONObject(bufstring);   
 Iterator keys = arr.keys();
 while(keys.hasNext()) {
  String ambilKey = (String)keys.next();
  JSONObject AmbilObject = arr.getJSONObject(ambilKey);
  Log.i("test",AmbilObject.toString());
 } 
```

感谢所有的建议，你很摇滚：D

# javascript - 在不同的div中显示不同的网页

> ID：15782227
> 
> 赞同：0
> 
> 时间：2013-04-03T08:20:58.230
> 
> 标签：javascript, jquery, html, css, jsp

我正在使用*JSP* & *Servlets*开发一个 Web 应用程序。

我正在尝试寻找*HTML Frames*的替代品。所以我进行了搜索，发现可以使用*CSS*来完成。

所以我有一个`CSS`将屏幕分为三个部分：

1.  标题
2.  内容
3.  页脚

**HTML 代码**

```
<body>
    <div id="content-wrapper">
        <div id="content">
        content here
    </div>
    </div>
    <div id="header-wrapper">
        <div id="header">
        Header here
        </div>
    </div>
    <div id="footer-wrapper">
        <div id="footer">
        Footer here
        </div>
    </div>
</body> 
```

所以现在我想在每个`div`标签中显示不同的页面。我这样做的目的是将代码`menu's`放在单个*HTML*文件中，然后将该文件在所有其他网页中显示为`Header`. 那么有没有办法做到这一点？

[注意：这是我到目前为止搜索后发现的一种方法，所以请告诉我是否有更好的选择可以替代`Frames`]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:35:11.690

您可以像这样使用 jsp 包含指令：

```
<jsp:include page="include.jsp" /> 
```

或者你可以 iframe ：

```
<iframe src="htmlservlet/file.html" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:29:00.093

您可以使用 JSP 包含指令：

```
<%@ include file="some_file.jsp"%> 
```

允许您构建视图的可重用部分，这些部分可以包含在许多页面中。

[简单的甲骨文教程](http://docs.oracle.com/javaee/1.3/tutorial/doc/JSPIntro8.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:52:20.913

我正在使用 apache Tiles 进行页面布局：[http ://tiles.apache.org/](http://tiles.apache.org/)

```
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<div id="header-wrapper">
    <tiles:insertAttribute name="header" />
</div>
<div id="content-wrapper">
    <tiles:insertAttribute name="content" />
</div>
<div id="footer-wrapper">
    <tiles:insertAttribute name="footer" />
</div> 
```

和配置

```
<definition name="myapp.homepage" template="/layouts/mylayout.jsp">
  <put-attribute name="header" value="/tiles/header.jsp" />
  <put-attribute name="content" value="/tiles/content.jsp" />
  <put-attribute name="footer" value="/tiles/footer.jsp" />
</definition> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:26:04.510

当我单击菜单项时，您可以使用隐藏的 div 或 Jquery 在您网站的内容区域中显示不同的内容，有点像书签选项，但带有隐藏信息..

这样，在单击链接并交换内容之前，公众不会看到它。除了样式和主要 jquery 代码之外，所有代码都可以在一个 HTML 页面上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:28:57.220

```
head:
<style>
#head
{
position:absolute;
top:0px;
width:100%;
height:200px;
}
</style>
<div id='head'>
</div>

footer:
<style>
#footer
{
position:fixed;
bottom:0px;
width:100%;
}
</style>
<div id='footer'>
</div>
now add them where ever you want in between them write content 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T08:29:31.220

我想你正在寻找这个：

```
<%@ include file="header.jsp" %> 
```

在 jsp servlet 中，这是要使用的。

例子：

```
 <div id="content-wrapper">
    <%@ include file="content.jsp" %>
</div>
<div id="header-wrapper">
    <%@ include file="header.jsp" %>
</div>
<div id="footer-wrapper">
    <%@ include file="footer.jsp" %>
</div> 
```

### [在这里阅读更多...](http://roseindia.net/jsp/simple-jsp-example/use-of-include-tag-in-jsp.shtml)

# node.js - 如何在 node.js 中停止/中止读取文件

> ID：15782229
> 
> 赞同：3
> 
> 时间：2013-04-03T08:21:00.977
> 
> 标签：node.js

假设我正在异步读取 500 MB 的文件。这需要时间阅读。现在，在异步读取文件时，如何停止/中止读取文件并调用回调（即成功中止）函数？

```
fs.readFile(filePath, function(err, data) {
    //Do work
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:37:52.737

`fs.readFile`确实异步读取文件，但在读取整个文件之前它不会调用您的回调，因此您无法通过使用该方法来实现这一点。相反，我相信你必须使用[`fs.createReadStream()`](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)which 给你一个[`stream.Readable`](http://nodejs.org/api/stream.html#stream_readable_stream). 然后，您可以为该对象实现适当的事件。

```
function readTheFile(fileName, callback) {
    var stream = fs.createReadStream(fileName);
    stream.on('readable', function() {}); // Do your read logic
    stream.on('error', function(err) {}); // Handle the error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:42:35.687

只需使用[`fs.read`](http://nodejs.org/api/fs.html#fs_fs_read_fd_buffer_offset_length_position_callback)(with `fs.open`) 而不是`fs.readFile`. 例子：

```
fs.open(filepath, 'r', function(err, fd) {

    var finalize = function(buffer) {
        fs.close(fd);
        console.log(buffer);
    };

    if (err) {
        finalize();
        return;
    }

    fs.fstat(fd, function(err, stats) {
        if (err) {
            finalize();
            return;
        }

        var bufferSize = stats.size,
            chunkSize = 512,
            buffer = new Buffer(bufferSize),
            bytesRead = 0;

        var inner_read = function() {
            if ((bytesRead + chunkSize) > bufferSize) {
                chunkSize = (bufferSize - bytesRead);
            };
            if (chunkSize > 0) {
                fs.read(fd, buffer, bytesRead, chunkSize, bytesRead, function(err) {
                    // YOU CAN DO SOMETHING HERE TO STOP READING
                    if (err) {
                        finalize(buffer);
                        return;
                    }
                    bytesRead += chunkSize;
                    inner_read();
                });
            } else {
                finalize(buffer);
            }
        }
        inner_read();
    });
}); 
```

# apache - maven的bulid命令

> ID：15782235
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:21:24.127
> 
> 标签：apache, maven, build

我想知道 maven 的构建命令是什么。包括跳过测试用例。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:27:19.853

`mvn install -DskipTests`试试这个命令。它也包括测试跳过部分。这将解决您的问题。

`mvn install` 这是没有测试跳过的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:26:25.880

下面使用

```
mvn clean package install -Dmaven.test.skip=true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:28:10.663

**构建项目**

```
mvn clean install
mvn clean package 
```

**跳过单元测试**

```
mvn install -Dmaven.test.skip=true
mvn package -Dmaven.test.skip=true 
```

来源：[http ://www.mkyong.com/maven/how-to-skip-maven-unit-test/](http://www.mkyong.com/maven/how-to-skip-maven-unit-test/)

# installation - Silverstripe - 安装文件解释

> ID：15782236
> 
> 赞同：1
> 
> 时间：2013-04-03T08:21:26.513
> 
> 标签：installation, silverstripe

在全新的 silverstripe 安装（3.0.5）中有很多文件我想知道我是否会需要它们或者它们的目的是什么......所以我想要的是一个干净的 silverstripe 安装并删除所有不必要的文件/文件夹.

我需要这些文件/文件夹做什么？：

```
phpunit.teamcity.mssql.xml
phpunit.teamcity.postgresql.xml
phpunit.teamcity.sqlite3.xml
phpunit.teamcity.xml
phpunit.xml.dist
test.php
web.config
vendor 
```

非常感谢您的澄清。弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T14:55:09.663

**PHPUNIT / TeamCity**

```
phpunit.teamcity.mssql.xml
phpunit.teamcity.postgresql.xml
phpunit.teamcity.sqlite3.xml
phpunit.teamcity.xml
phpunit.xml.dist 
```

这些是用于配置 php unit 和 team city 的文件（team city 是 jetbrains 的持续集成软件[https://www.jetbrains.com/teamcity/](https://www.jetbrains.com/teamcity/)）（如果你不使用 teamcity，你可以放心删除这些文件）

**网络服务器配置**

```
.htaccess 
```

这是 apache web 服务器的配置文件（如果你不使用 apache，你可以删除这个文件）

```
web.config 
```

这是针对 Microsoft IIS Web 服务器的，它相当于 .htaccess（如果您不使用 IIS 作为 Web 服务器，您可以删除此文件）

**GIT（版本控制系统）**

```
.git/
.gitignore
.gitatributes 
```

如果你不使用 git，你就不需要它们

**作曲家**

```
 composer.json
    vendor/ 
```

composer 文件包含 php 依赖项的信息以及从何处获取它们。vendor 文件夹是 composer 安装其依赖项的文件夹（composer 是一个 php 依赖项管理器，我真的可以推荐[http://getcomposer.org/](http://getcomposer.org/)）（如果您不使用 composer，则不需要它们）

**PHP 文件**

```
index.php 
```

备用文件以防 mod_rewrite 或 ISS 等效项不起作用

```
install.php 
```

SilverStripe 的安装程序，**安装 SilverStripe 后应删除此文件**

```
install-frameworkmissing.html 
```

安装程序的一部分

**行为**

```
behat.yml 
```

关于 behat 我不能说太多，因为我不使用它，这里引用网站 ( [http://behat.org/](http://behat.org/) ) 的一句话：*“用于测试您的业务期望的 php 框架。”* 我只能说，如果你不使用 behat，你可以删除文件

**其他**

```
test.php 
```

不知道，我从未见过这个文件

README.md 显然是自述文件

```
CONTRIBUTING.md 
```

一个信息文件，其中包含有关向 SilverStripe 做出贡献的指南的信息

```
Makefile
build.xml 
```

不能确切地说如何使用这两个文件，但除非你确实使用它们，否则你可以安全地删除它们

* * *

**tl;博士**

您真正需要的唯一文件是这两个文件之一：

*   如果您使用的是 apache（linux 和 mac，还有 windows），那么您需要保留 .htaccess
*   如果您是 IIS（Windows 服务器），那么您需要 web.config

如果 mod_rewrite 在您的服务器上不可用，则 index.php

所有其他文件仅适用于核心开发人员使用的第 3 方软件

# c# - 从 TableAdapter 插入

> ID：15782244
> 
> 赞同：0
> 
> 时间：2013-04-03T08:21:53.430
> 
> 标签：c#, winforms, ms-access

我必须在数据库访问中从winform插入，

```
INSERT INTO Artikulli
             (Artikulli, Sasia, Cmimi, BID)
VALUES        (?, ?, ?, ?) 
```

我需要在 (?,?,?,?) 中写什么，我正在与 db Access 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:27:39.350

你不必写任何东西来代替？

您将必须传递参数。

例如。

```
cmd=new SqlCommand("insert into.....");

cmd.Parameters.Add("@Artikulli", SqlDbType.Int).Value = Artikulli;

command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:30:58.240

一个快速的谷歌搜索给出了这个：[如何：将新记录插入数据库](http://msdn.microsoft.com/en-us/library/ms233812%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-5)。MSDN 描述了 tableadapter 如何共同工作。还有一个简单的例子！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:39:00.453

如果您使用 插入值来引用`TableAdapter`，请检查[此](https://stackoverflow.com/a/5384028/1129189)Phonon 答案以处理此问题。祝你好运！

# speech-recognition - 如何结合语音识别和说话人分类？

> ID：15782246
> 
> 赞同：3
> 
> 时间：2013-04-03T08:21:54.457
> 
> 标签：speech-recognition, speech-to-text, cmusphinx

我正在尝试结合语音识别和说话者分类技术来确定对话中有多少说话者以及哪个说话者说了什么。

为此，我使用[CMU Sphinx](http://cmusphinx.sourceforge.net)和[LIUM Speaker Diarization](http://www-lium.univ-lemans.fr/diarization/doku.php/programmes)。

我可以分别运行这两个工具，即我可以运行 Sphinx 4 并从音频中获取文本输出并运行 LIUM 工具包并获取音频片段。

现在我想将这两者结合起来，得到如下输出：

```
s0 : this is my first sentence.
s1 : this is my reply.
s2: i do not what you are talking about 
```

有谁知道如何结合这两个工具包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:32:10.393

运行分类工具以获取每个扬声器的分段时间。它们看起来像这样：

```
file1 1 16105 217 M S U S9_file1
file1 1 16322 1908 M S U S9_file1
file2 1 18232 603 M S U S9_file2 
```

像 16106 和 217 这样的数字是段开始和段长度。解析文本输出并将时间存储在数组中。

然后使用时间分割片段上的原始音频。

使用 Sphinx4 分别处理每个片段并显示转录。

或者，对每个说话人的片段运行说话人适应，并使用说话人适应模型再次处理每个片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T11:13:43.560

如果您可以追溯并更改录音设置，您可以将扬声器按录音通道分开，然后单独分析每个通道。这是电话分析中的常用方法。

您可以使用[Google Speech to Text](https://google-cloud-python.readthedocs.io/en/0.32.0/speech/index.html#api-reference)实现此目的，启用每个频道的不同识别 ( `enable_separate_recognition_per_channel=True`) 并启用说话者分类 ( `enable_speaker_diarization=True`)

（使用 Python 语言）

# ruby-on-rails-3 - heroku 没有这样的文件崩溃——spec_helper (LoadError)

> ID：15782247
> 
> 赞同：3
> 
> 时间：2013-04-03T08:22:00.437
> 
> 标签：ruby-on-rails-3, macos, heroku, rspec

我做 git push heroku master 时没有错误。但是在打开heroku时我得到了应用程序错误。所以我检查了heroku日志，唯一突出的是：

```
2013-04-03T08:03:52+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.11/lib/active_support/dependencies.rb:317:in 
`rescue in depend_on': No such file to load -- spec_helper (LoadError) 
```

所以我猜这就是问题所在。这是否意味着它找不到我的 spec_helper.rb 文件？它在规范文件夹中。

在 rails g rspec:install 我得到：

```
identical  .rspec
   exist  spec
identical  spec/spec_helper.rb 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'bootstrap-sass', '2.0.4'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'
gem 'pg', '0.12.2'
gem 'rails_autolink', '~> 1.0.9'
gem 'rinku', '~> 1.5.0', :require => 'rails_rinku'
gem 'auto_html', '1.6.0'
gem 'acts_as_votable', '~> 0.4.0'
gem 'thumbs_up', '~> 0.6.2'
gem 'thin'
gem 'rmagick'
gem "paperclip", "~> 3.0"
gem 'nifty-generators'
gem 'fancybox-rails'

group :development, :test do
  gem 'rspec-rails', '2.11.0'
end

group :development do
  gem 'annotate', '2.5.0'
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'factory_girl_rails', '4.1.0'
  gem 'capybara', '1.1.2'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end 
```

非常感谢任何帮助，谢谢。开始认为我的源代码中某处有某种错字，打算尝试卸载 rspec。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T10:12:53.900

在没有测试和开发的情况下尝试在本地捆绑安装，这样它将产生生产依赖项，然后再次推送到heroku

```
bundle install --without test development 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T00:09:05.493

有已删除的文件未正确提交。当我写 git status 时，我会看到它们。

# mysql - 使用 CASE/WHEN 编写 MySQL 过程时遇到问题

> ID：15782248
> 
> 赞同：0
> 
> 时间：2013-04-03T08:22:01.067
> 
> 标签：mysql, procedure

我正在尝试编写一个过程，该过程将返回所有行的子集或仅根据输入返回所有行。我现在正在使用一些代码（粘贴在下面）。在这段代码中，我手动设置`var1`和`var2`（这些最终将被传递参数）并查询给定的值。

现在，代码返回满足约束的行，`userDataTypeName="currentGPA"`但是`userDataText="4,"`如果这些值中的任何一个为 NULL，则代码不返回任何行。`userDataText=NULL`如果值为 for而不是 none，我希望返回表中的所有行。我想也许 COALESCE 可以帮助我实现这一点，但我不确定。

关于如何做到这一点的任何想法？

```
BEGIN
    DECLARE var1 varchar(20);
        DECLARE var2 varchar(20);
        SET var1 = "currentGPA";
        SET var2 = "4";
    SELECT udata.user_id FROM userdata udata
        WHERE(
    COALESCE(udata.userDataTypeName, '')  =
    CASE
            WHEN var1 IS NULL THEN ''
            ELSE var1
    END
        and
        COALESCE(udata.userDataText, '') = COALESCE(var2, '')) LIMIT 30;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:31:19.007

该 CASE 似乎等于 COALESCE(var1,'')。

现在是查询，您正在将 COALESCE 应用于表中的每一行。这是非常低效的，最好将每行中的值与所需值进行比较。在这种情况下，所需的值为 NULL 或 var1/var2。这给出了以下查询，可以更有效地执行您希望的操作（基于 OP + 以下评论的查询）

```
SELECT udata.user_id 
FROM userdata udata
WHERE udata.userDataTypeName = COALESCE(var1,'')
AND (
    var2 IS NULL
    OR
    udata.userDataText = var2
)
LIMIT 30; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:26:08.890

**案例**什么？

```
CASE var1
   WHEN IS NULL THEN ''
   ELSE var1
END 
```

# c# - GotFocus 事件触发时如何使用 MVVMPattern 验证输入字段？

> ID：15782251
> 
> 赞同：1
> 
> 时间：2013-04-03T08:22:06.667
> 
> 标签：c#, wpf, mvvm

我有以下**观点**

![在此处输入图像描述](https://i.stack.imgur.com/bs3E1.png)

当 TextBox2 获得焦点时，我必须检查 TextBox1 是否为空。如果文本框一个是空的，我必须用消息框提示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:30:23.783

为处理[`GotFocus`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus.aspx)事件`TextBox2`，找到`TextBox1.Text`属性的绑定表达式，然后调用[`BindingExpression.UpdateSource`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpression.updatesource.aspx)。

请注意，如果您想防止默认验证行为（失去焦点时） ，您应该设置`UpdateSourceTrigger="Explicit"`为。`TextBox1.Text``TextBox1`

**升级版**。

代码示例（带有数据错误验证）。视图模型：

```
public class ViewModel : INotifyPropertyChanged, IDataErrorInfo
{
    // INPC implementation is omitted

    public string Text1
    {
        get { return text1; }
        set
        {
            if (text1 != value)
            {
                text1 = value;
                OnPropertyChanged("Text1");
            }
        }
    }
    private string text1;

    public string Text2
    {
        get { return text2; }
        set
        {
            if (text2 != value)
            {
                text2 = value;
                OnPropertyChanged("Text2");
            }
        }
    }
    private string text2;

    #region IDataErrorInfo Members

    public string Error
    {
        get { return null; }
    }

    public string this[string columnName]
    {
        get 
        {
            if (columnName == "Text1" && string.IsNullOrEmpty(Text1))
                return "Text1 cannot be empty.";

            return null;
        }
    }

    #endregion
} 
```

风景：

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBox Grid.Row="0" Margin="5" Name="Text1" Text="{Binding Text1, ValidatesOnDataErrors=True, UpdateSourceTrigger=Explicit}"/>
        <TextBox Grid.Row="1" Margin="5" Text="{Binding Text2, ValidatesOnDataErrors=True}" GotFocus="TextBox_GotFocus" />
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }

    private void TextBox_GotFocus(object sender, RoutedEventArgs e)
    {
        var bindingExpression = Text1.GetBindingExpression(TextBox.TextProperty);
        bindingExpression.UpdateSource();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:50:01.993

ViewModel 应该为其属性提供一些验证错误。见`System.ComponentModel.IDataErrorInfo`。在 MVVM 中，如果视图依赖于它的视图模型是没有问题的。CodeBehind 中的代码本身并不坏，它应该是经过深思熟虑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:35:43.890

您可以将命令连接到事件以对 WPF MVVM 实现的应用程序执行此操作。检查此[链接](http://blog.functionalfun.net/2008/09/hooking-up-commands-to-events-in-wpf.html)man 以供参考。祝你好运！

# jquery - JQuery：如果包含给定的字符串，则直接到相关页面

> ID：15782253
> 
> 赞同：0
> 
> 时间：2013-04-03T08:22:11.770
> 
> 标签：jquery, html

我有一个小项目。在这个项目上。我有包含足球联赛名称的表格。桌子上的所有都是链接。单击这些链接之一时，我需要将我的页面定向到相关的排行榜。例如;

如果我从我的表中点击了英超联赛，我需要将我的页面指向英超联赛表页面。

我写了小代码，但没有用。

```
$(function() {
var tableRow = $("td").filter(function() {
return $(this).text() == "Premier League";
})
window.location.href = "RELATEDURL";
}); 
```

有人可以帮我吗？谢谢你。

编辑1：我用这种方法得到联赛的名字。我需要申请这种格式。

```
$(document).ready(function() { 
$.getJSON("getleaguetablesURL",function(data) {
console.log(data);
$.each(data, function(index, value) {
$('#leaguetable').append("<tr><td class='team'><a href='#'>"
+value.Name+"</a></td></tr>");
});
$('#leaguetable').listview('refresh');
})
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:26:49.933

我建议使用`<a>`标签而不是 JavaScript。您可以使用一些 CSS 将 a 拉伸`<a>`到 a 的大小，`<td>`以便可以单击整个单元格。

[jsFiddle](http://jsfiddle.net/Tyriar/jyqXF/)

**HTML**

```
<table>
    <tr>
        <td>
            <a href="/premierleague.htm">Premier league</a>
        </td>
    </tr>
    <tr>
        <td>
            <a href="/anotherleague.htm">Another league</a>
        </td>
    </tr>
</table> 
```

**CSS**

```
a {
    display:block;
    width:100%;
    height:100%;
    padding:2px;
}

table {
    width:300px;
}

td {
    border:1px solid #000;
    padding:0;
} 
```

* * *

**编辑：**由于您从 JSON 中获取联盟名称，因此您可以简单地在`href`此处填写锚点。

```
$(document).ready(function() { 
    $.getJSON("getleaguetablesURL",function(data) {
        console.log(data);
        $.each(data, function(index, value) {
            var url = "RELATEDURL";
            $('#leaguetable').append("<tr><td class='team'>" +
                "<a href='" + url + "'>" +
                value.Name+"</a></td></tr>");
        });
        $('#leaguetable').listview('refresh');
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:56:32.390

您始终可以使用`jQuery`，但请记住，如果用户将其`javascript`关闭，这将不起作用。

将上面的小提琴示例编辑为以下内容：

[jsFiddle](http://jsfiddle.net/jyqXF/3/)

看看这是否适合你。

# c# - 在 C# winforms 中获得更好的文本渲染质量

> ID：15782254
> 
> 赞同：6
> 
> 时间：2013-04-03T08:22:15.327
> 
> 标签：c#, winforms, text-rendering

有没有办法在窗口窗体中获得更好的文本渲染质量。

我尝试使用“TextRenderingHint”，但没有用。

字体是 Helvetica Neue LT Pro，在 Photoshop 中创建的所需结果显示在所附图像的左侧。我使用 .otf 文件作为资源在 .NET 中引入了它。

![在此处输入图像描述](https://i.stack.imgur.com/503Ba.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T10:38:35.990

Winforms 不支持 Open Type 字体。因此，Windows 字体映射器为您找到了替代的 TrueType 字体。它类似于您的原始字体，但当然不会呈现相同的字体。不启用 ClearType 也不会改善结果。

通常，Windows 中的 Open Type 字体支持并不十分出色。您通常只能依靠 Adob​​e 程序来很好地支持它，对于使用 GDI 或 GDI+ 呈现文本的程序没有像样的后备方案。我只知道 WPF 作为支持它的 GUI 构建器工具。处理 Windows 上无缘无故的 Adob​​e 产品兼容性问题由来已久。并且类似于我使用 Flash 或 Reader 所体验到的乐趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:06:13.563

我的建议首先是使您的图像具有您需要按钮以包含所需边距的确切尺寸。然后`TextImageRelation = ImageAboveText`,和。`ImageAlign = MiddleCenter`_`AutoSize = True``AutoSizeMode = GrowAndShrink`

除了切换到 WPF 并使用令人惊叹的 WPF 按钮从此过上幸福的生活之外，这就是您所能做的一切。

我希望这有帮助。

# java - SMTP 收到错误 554，数据命令被拒绝：Access Manager - 插槽 COS 配额违规

> ID：15782255
> 
> 赞同：0
> 
> 时间：2013-04-03T08:22:16.043
> 
> 标签：java, smtp, jakarta-mail

我正在测试一个 java 邮件应用程序以进行多次发送，我正在从另一个邮箱向一个邮箱发送 500 封电子邮件，只是为了查看转发所有电子邮件需要多长时间。当我这样做时，我得到了这个：

```
INFO: DEBUG SMTP: got response code 554, with response: 554 5.7.1 <DATA>: Data command rejected: Access Manager - slot COS quota violation 
```

我认为问题在于发送电子邮件的速度太高，或者我向同一个地址发送了太多电子邮件。如果可以帮助电子邮件是通过 ssl 发送到 smtps 服务器的认证电子邮件。任何人都知道到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:57:06.360

COS 通常是指`Class of Service`实际上是管理员为邮箱创建的一组规则/策略，其中一个可能的规则是“配额违规”。这些规则由管理员创建，以检查邮箱的公平使用策略。

SMTP 服务会检查每个进入系统的邮件的这些规则。

在您的情况下，当您一次性向单个 id 发送 500 封邮件时，收件人邮箱很可能超出了允许的限制。在这种情况下，SMTP 服务器停止接受收件人的任何进一步邮件，并开始向发件人提供 5xx/4xx 错误

# iphone - 检测 modalView 来自某个 UIViewController

> ID：15782263
> 
> 赞同：1
> 
> 时间：2013-04-03T08:23:09.863
> 
> 标签：iphone, ios, objective-c, ipad

我有一个从两个不同的 UIViewController A 和 B 呈现的 modalView。我想要做的是检测 modalView 来自 A 或 B，并执行一些不同的操作。

我想我可以使用委托或其他标志来检测它，但有更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:28:08.737

`UIViewController.presentingViewController`当您显示模态 VC 时，您可能希望使用`UIViewController presentViewController:animated:completion`.

# ios - 在 iOS 中进入后台时应用程序崩溃

> ID：15782265
> 
> 赞同：2
> 
> 时间：2013-04-03T08:23:13.587
> 
> 标签：ios, objective-c

```
 TESTPRO_TEST[830] has active assertions beyond permitted time: 
        {(
            <BKProcessAssertion: 0x1fd48670> identifier: UIKitBackgroundCompletionTask process: TESTPRO_TEST[830] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:830 preventSuspend  preventIdleSleep ,
            <BKProcessAssertion: 0x2083f190> identifier: UIKitBackgroundCompletionTask process: TESTPRO_TEST[830] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:830 preventSuspend  preventIdleSleep 
        )}
   <Warning>: Forcing crash report of DSC_TEST[830]...
   <Warning>: Finished crash reporting.
     [830] has active assertions beyond permitted time: 
        {(
            <BKProcessAssertion: 0x1fd48670> identifier: UIKitBackgroundCompletionTask process: [830] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:830 preventSuspend  preventIdleSleep 
        )}
   <Warning>: Forcing crash report of [830]...
   <Error>: Multiple simulate crash requests for pid 830
   <Warning>: Finished crash reporting.
   <Warning>: pid_suspend failed for [830]: Unknown error: -1, Unknown error: -1
    com.apple.launchd[1] (UIKitApplication:com.testPro.Test[0x4aff][830]) <Notice>: (UIKitApplication:com.testPro.Test[0x4aff]) Exited: Killed: 9
   <Warning>: Application 'UIKitApplication:com.testPro.Test[0x4aff]' exited abnormally with signal 9: Killed: 9
   �&lt;Debug>: launchd[869] Builtin profile: container (sandbox)
   <Debug>: launchd[869] Container: /private/var/mobile/Applications/3CF1EEC9-B6EF-45EA-999D-EBB9C02106EE (sandbox)
   <Error>: Not saving crash log because we have reached the limit for logs to store on disk.  Sync or otherwise clear logs from /var/mobile/Library/Logs/CrashReporter to save new logs.
   <Error>: Could not save crash report to disk! 
```

当应用程序进入后台时，我已经添加了代码

```
- (void) applicationDidEnterBackground:(UIApplication *) application
{

    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;
    UIBackgroundTaskIdentifier bgTask = 0;
    UIApplication *app = [UIApplication sharedApplication];
    bgTask = [app beginBackgroundTaskWithExpirationHandler: ^{
        [app endBackgroundTask:bgTask];
    }];

} 
```

当应用程序进入后台时发生崩溃。谁能帮我解决这个崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:51:32.493

原因很明显 - 它在日志中指出 - 你的时间已经过期。 `Applications running background tasks have a finite amount of time in which to run them. (You can find out how much time is available using the backgroundTimeRemaining property.) If you do not call endBackgroundTask: for each task before time expires, the system kills the application.`

我认为您不应该调用此方法来`applicationDidEnterBackground:`尝试将其移动到适当的位置（您开始工作的地方）。您可以使用它来包装可能在 bkg 中也可以工作的长时间播放进程。不要严重判断我的回答，这只是我的猜测，可能会成为现实。

PS 这里很好地解释了[什么是 beginBackgroundTaskWithExpirationHandler 和 endBackgroundTask 方法](https://stackoverflow.com/questions/12071726/how-to-use-beginbackgroundtaskwithexpirationhandler-for-already-running-task-in)

# iphone - startMonitoringSignificantLocationChanges 在 iOS5 中不起作用

> ID：15782266
> 
> 赞同：3
> 
> 时间：2013-04-03T08:23:14.643
> 
> 标签：iphone, ios, objective-c

这就是我初始化位置管理器的方式：

```
 self.locationManager = [[[CLLocationManager alloc] init] autorelease];
    self.locationManager.delegate = self;
    [self.locationManager startMonitoringSignificantLocationChanges]; 
```

在 iOS6 中，在创建它之后，立即使用我当前的位置调用委托：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

但是，如果我正在测试的设备是 iOS5，则永远不会调用此委托。

可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:30:20.217

问题是方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

是 iOS6 的新手，在 iOS5 中你必须使用：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

# asp.net - 读取excel文件时.net oledb错误

> ID：15782271
> 
> 赞同：1
> 
> 时间：2013-04-03T08:23:41.720
> 
> 标签：asp.net, excel, window

下面是我用于读取 excel 文件的代码。
我在我的 pc localhost 和 3 窗口服务器中进行测试。
本地主机和 1 台服务器工作正常，另外 2 台服务器将返回错误
`object reference not set to an instance of an object.`

3个服务器文件夹权限相同，并且excel文件存在于正确的路径中。
我不知道为什么错误发生在某些服务器上。

## VB.net代码

```
Dim objExcelConn As New OleDb.OleDbConnection

objExcelConn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & str_FilePath & ";Extended Properties=""Excel 8.0;HDR=No;IMEX=1"""

Try
    objExcelConn.Open()   <------ Where the error occur
Catch ex As Exception
    Throw (New Exception(ex.InnerException.Message))
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:28:55.217

我认为您不会在服务器上安装 excel。
问题是您没有服务器上的 excel 驱动程序。
尝试下载 .dll 并再次运行您的应用程序。

# java - 子类中的时间间隔

> ID：15782278
> 
> 赞同：1
> 
> 时间：2013-04-03T08:24:05.447
> 
> 标签：java, android

我需要在子类中有一个时间间隔，但我不能扩展 Timer 类，因为我已经扩展了另一个类。而且我已经测试了其他一些变体，但它似乎不起作用，因为我的类不是 MainActivity 并且没有任何 onCreate 方法！？

那么我该如何解决呢？

编辑：我正在用一些精灵对象做一个简单的游戏。当一个精灵对象被击中时，我想用 setAlpha() 以间隔淡化它。这就是我在每个精灵对象中需要的时间间隔。我将使用布尔值激活淡入淡出。我想我需要为每个子类创建一个线程，或者我可以做一些静态的事情来获得间隔时间！？每个子类都有一个线程，这会对性能产生负面影响吗？

这可以以某种简单的方式完成吗？

编辑 2：我发现这段代码很丰富

```
private Handler mHandler = new Handler(); 
```

还有这个，但我不确定我应该如何调用它，或者我将如何才能在精灵列表的每个精灵中调用一个方法？一些帮助来开发这将是有帮助的！

```
private Runnable mUpdateTimeTask = new Runnable() {
public void run() {
    // Do some stuff that you want to do here

// You could do this call if you wanted it to be periodic:
    mHandler.postDelayed(this, 5000 );

    }
}; 
```

# php - 警告：25447804 字节的 POST 内容长度超出第 0 行未知中 8388608 字节的限制

> ID：15782279
> 
> 赞同：0
> 
> 时间：2013-04-03T08:24:08.220
> 
> 标签：php, file-upload, size

当我上传超过 8mb 的文件时，我收到此警告。

我已将以下内容更改为 php.ini 文件

```
upload_max_filesize = 10M
post_max_size = 10M
memory_limit = 128M 
```

我也重新启动了apache服务器。

我正在检查这个脚本

```
if($_FILES["submission_file"]["size"] < 1.049e+7)
{
  echo "success";
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:27:31.517

您也可以通过 .htaccess 文件对其进行更改。

php_value upload_max_filesize 10M

php_value post_max_size 10M

# signalr - SignalR 事件在部署到服务器时变得间歇性

> ID：15782281
> 
> 赞同：3
> 
> 时间：2013-04-03T08:24:17.503
> 
> 标签：signalr

通过 VS - IIS Express 在本地运行时，一切都可以 100% 正常运行。

然后当我发布到网络服务器（在网络上或在线）时，我有一些事件停止触发“OnConnected”......但并非一直如此。如果我刷新它可能会触发或不会触发。

有问题的事件是 ResetTimer，请参见下面的示例代码。

我已经登录，控制台没有显示任何错误。

我正在使用信号器 1.0.1

```
 <script type="text/javascript">
    var timerTime, setIntervalInstance;
    $(function () {
        $('#rollresults').tablesorter({ headers: { 0: { sorter: false }, 1: { sorter: true }, 2: { sorter: false } } });

        $.connection.hub.logging = true;
        // Proxy created on the fly          
        var chat = $.connection.brewBattleHub;
        // Start the connection
        $.connection.hub.qs = 'groupName=@ViewContext.RouteData.Values["groupName"]';
        $.connection.hub.start().done(function () {
            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.roll($("#drinkname").val(), $("#comment").val().substr(0, 40));
                $("#rollresults").show('slow');
                $("#broadcast").prop("disabled", "disabled");
                $("#drinkname").prop("disabled", "disabled");
                $("#comment").prop("disabled", "disabled");
            });

            setIntervalInstance = window.setInterval(timerTick, 1000);
        }).fail(function (reason) {
            console.log("SignalR connection failed: " + reason);
            //chat.server.sendMessage(@Model.UserName + " has Error! (Check logs)");
        });

        // Declare a function on the chat hub so the server can invoke it          
        chat.client.addRoll = function (player, roll, drink, comment) {
            $("#rollresults").find("tr").eq(1).removeClass('loserrow');
            $('#rollresults tbody').append('<tr><td>' + player + '</td>' + '<td>' + roll + '</td>' + '<td>' + drink + '</td>' + '<td>' + comment + '</td></tr>');
            $("#rollresults").trigger("update");
            $("#rollresults").tablesorter({ sortList: [[1, 0]] });
            $("#rollresults").find("tr").eq(1).addClass('loserrow');
        };

        chat.client.addMessage = function (message) {
            $('#messages').append("<div class='message'>" + message + "</div>");
        };

        chat.client.resetTimer = function () {
            timerTime = 30;
        };

        function timerTick() {
            if (timerTime > 0) {
                timerTime = timerTime - 1;
                $('#timer').html("<div>Starting in: " + timerTime + "</div>");
                $("#timerbox").show('slow');
            } else {
                clearInterval(setIntervalInstance);
                $("#broadcast").removeProp("disabled", "disabled");
                $('#timerbox').hide('slow');
            }
        }
    }); 
```

枢纽相关部分

```
 public override Task OnConnected()
    {
        var @group = GetOrCreateGroup();

        var user = new ConnectedUser { ConnectionId = Context.ConnectionId, Name = Context.User.Identity.Name };
        @group.AddUser(user);

        foreach (var connectedUser in @group.ConnectedUsers.Where(u => u != user))
        {
            Clients.Caller.addMessage(HttpUtility.HtmlEncode(connectedUser.Name + " has connected."));
        }

        Groups.Add(Context.ConnectionId, @group.Name);
        Clients.OthersInGroup(@group.Name).addMessage(HttpUtility.HtmlEncode(user.Name + " has connected."));
        Clients.Caller.addMessage(HttpUtility.HtmlEncode("You've connected..."));

        ResetTimer(@group.Name);
        return base.OnConnected();
    }

    Group GetOrCreateGroup()
    {
        var groupName = Context.QueryString["groupName"].ToUpper();
        var @group = BattleGroups.FirstOrDefault(g => g.Name.ToUpper() == groupName);

        if (group == null)
        {
            group = new Group { Name = groupName };
            BattleGroups.Add(group);
        }
        return @group;
    }

    public void ResetTimer(string groupName)
    {
        Clients.Group(groupName).resetTimer();
    } 
```

安慰

```
 [09:10:01 GMT+0100 (GMT Daylight Time)] SignalR: Negotiating with '/signalr/negotiate?     groupName=Public'. jquery.signalR-1.0.1.js:54 
[09:10:01 GMT+0100 (GMT Daylight Time)] SignalR: Attempting to connect to SSE endpoint 'http://server:88/signalr/connect?transport=serverSentEvents&connectionToke…onData=%5B%7B%22name%22%3A%22brewbattlehub%22%7D%5D&groupName=Public&tid=4' jquery.signalR-1.0.1.js:54
[09:10:01 GMT+0100 (GMT Daylight Time)] SignalR: EventSource connected jquery.signalR-1.0.1.js:54
[09:10:01 GMT+0100 (GMT Daylight Time)] SignalR: Now monitoring keep alive with a warning timeout of 13333.333333333332 and a connection lost timeout of 20000 jquery.signalR-1.0.1.js:54
[09:10:01 GMT+0100 (GMT Daylight Time)] SignalR: Triggering client hub event 'addMessage' on hub 'brewBattleHub'. 
```

# 附录

实际上似乎不是 100% 在本地工作（只是大多数时候），我认为这可能是通过延迟引入的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:24:26.377

不是一个令人满意的修复，但在 ResetTimer() 之前添加一个线程睡眠*似乎*已经修复了它。

```
 Groups.Add(Context.ConnectionId, @group.Name);
    Clients.OthersInGroup(@group.Name).addMessage(HttpUtility.HtmlEncode(user.Name + " has connected."));
    Clients.Caller.addMessage(HttpUtility.HtmlEncode("You've connected..."));

    Thread.Sleep(TimeSpan.FromSeconds(1)); //<<<<<<<<<
    ResetTimer(@group.Name); 
```

## 附录

甚至更好的解决方法是 Groups.Add 是异步的！！等待它也解决了这个问题。（不要忘记也使 OnConnected 异步）

```
 public async override Task OnConnected()
    {
      --->> await Groups.Add(Context.ConnectionId, "TestGroup"); 

            Clients.Group("TestGroup").showBoxOne();
            Clients.Group("TestGroup").showBoxTwo();
            Clients.Group("TestGroup").showBoxThree();
            Clients.Group("TestGroup").showBoxFour();
            Clients.Group("TestGroup").showBoxFive();
        }

        await base.OnConnected();
    } 
```

# algorithm - 连通图中的最小总路径数

> ID：15782285
> 
> 赞同：2
> 
> 时间：2013-04-03T08:24:42.587
> 
> 标签：algorithm

我正在查看 TopCoder 上的 PenLift 问题，在阅读[了这篇社论](http://community.topcoder.com/tc?module=Static&d1=match_editorials&d2=srm144)之后，我现在明白了如何去做，但是有一件事我不明白。

> *一个众所周知的定理指出，要遍历连通图中的所有边需要 numOfOddVertices/2 个总路径。*

这是什么理论？还有为什么会这样？我的第一个想法是通过添加边来找到欧拉路径，使所有顶点除了 2 之外的度数都是偶数，因为这将允许欧拉路径。我不确定这是否正确，如果正确，我怎么知道这是最好的方法，这似乎很贪婪，但我没有看到任何证据。有人可以将我链接到理论或解释它是如何工作的吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:37:04.973

> 这是什么理论？

图论。

> 还有为什么会这样？

我们需要假设至少一对奇度顶点。

下界：归纳证明具有 2k 个奇数度顶点的图至少需要 k 条路径。基本情况 k = 1：微不足道。步骤 k > 1：从具有 2k 个奇数度顶点的图中删除一条路径至少留下 2k-2 = 2(k-1) 个奇数度顶点。

上限：用连接成对不相交的奇度顶点对的 k 条边来扩充图。现在所有顶点的度数都是偶数，所以存在欧拉回路。从此电路中删除新边；剩下k条路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:09:35.927

在图中，奇数顶点 (n) 的数量始终为零或偶数。如果 n = 0，您可以从任意点开始遍历整个图形。如果 n > 0，要遍历图形，您应该**始终从一个奇数顶点开始**，您**将从另一个奇数顶点结束**。假设您连续绘制的路径数为 K。

*   如果 n = 2，您仍然可以一次遍历图形。即从一个奇数顶点开始，在另一个顶点结束。K = 1
*   如果遍历一次后 n = 4，您将留下一个具有 2 个奇数顶点的子图。您可以一口气遍历该子图。K = 2
*   如果 n = 6，您将不得不遍历图表 3 次。K = 3 以此类推......

请阅读我的博客文章以获取更多信息。[http://jeewanthad.blogspot.com/2012/11/eulerian-trail.html](http://jeewanthad.blogspot.com/2012/11/eulerian-trail.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-17T07:51:02.493

首先，原问题中提出的方法肯定是正确的：将除两个之外的所有奇数顶点配对，在每对之间添加一条边，然后计算欧拉路径。添加的边对应于最终遍历中的移动。

如果希望最小化笔式绘图仪或类似设备的运动，请考虑以下事项：绘制线条的运动始终等于边长的总和，因此保存运动的唯一方法是最小化运动。添加的边表示移动，因此目标是以最小化添加边长度的方式配对奇数顶点。这实际上是一个众所周知但相当困难的问题，称为“一般图上的最小成本完美匹配”（注意，*一般*图，而不是*二分*图）。有一种称为 Blossom 算法的算法可以在 O^3 时间内解决它，但我从未找到完整算法的令人满意的描述——所有这些都相当模糊和令人困惑。

# datatable - 如何从 DataTable 创建 MX Excel 文件？

> ID：15782291
> 
> 赞同：0
> 
> 时间：2013-04-03T08:25:48.420
> 
> 标签：datatable, export-to-excel

我需要在 ASP.NET 应用程序中从 DataTable 创建 MS Excel 文件。我不需要“另存为”对话框。只需创建一个文件并将它们保存到某个文件夹即可。

我在互联网上搜索并找到了一些如何通过使用 Microsoft Excel 互操作库来做到这一点的示例。但是，我不能使用 Excel 互操作库。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:42:56.697

您可以使用[XLReport](http://www.xlreport.com)；它允许您连接到数据库表并将基础数据导入 Excel；您还可以创建一个实时 - 实时 - 连接 Excel 表，您只需点击刷新按钮即可检索最新数据。

# android - java.lang.SecurityException: Permission Denial: 不允许发送广播 android.hardware.usb.action.USB_STATE

> ID：15782292
> 
> 赞同：2
> 
> 时间：2013-04-03T08:25:54.220
> 
> 标签：android, permissions, securityexception

我正在尝试制作一个 apk 以安装在设备中并管理 USB 状态。

apk 向设备发送广播，例如...

```
Intent intent = new Intent(ACTION_USB_STATE);
sendBroadcast(intent); 
```

在 AndroidManifest.xml 我声明了权限部分..

```
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

但是即使我已经声明了许可，也会发生错误。

日志是....

```
W/ActivityManager(  850): Permission Denial: not allowed to send broadcast android.hardware.usb.action.USB_STATE from pid=16082, uid=10109
E/AndroidRuntime(16082): FATAL EXCEPTION: main
E/AndroidRuntime(16082): java.lang.SecurityException: Permission Denial: not allowed to send broadcast android.hardware.usb.action.USB_STATE from pid=16082, uid=10109
E/AndroidRuntime(16082):    at android.os.Parcel.readException(Parcel.java:1425)
E/AndroidRuntime(16082):    at android.os.Parcel.readException(Parcel.java:1379)
E/AndroidRuntime(16082):    at android.app.ActivityManagerProxy.broadcastIntent(ActivityManagerNative.java:2098)
E/AndroidRuntime(16082):    at android.app.ContextImpl.sendBroadcast(ContextImpl.java:1003)
E/AndroidRuntime(16082):    at android.content.ContextWrapper.sendBroadcast(ContextWrapper.java:312)
E/AndroidRuntime(16082):    at com.example.usb_mode_change.USBModeSettingActivity$1.onClick(USBModeSettingActivity.java:43)
E/AndroidRuntime(16082):    at android.view.View.performClick(View.java:4101)
E/AndroidRuntime(16082):    at android.view.View$PerformClick.run(View.java:17082)
E/AndroidRuntime(16082):    at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(16082):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(16082):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(16082):    at android.app.ActivityThread.main(ActivityThread.java:4911)
E/AndroidRuntime(16082):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(16082):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(16082):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
E/AndroidRuntime(16082):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
E/AndroidRuntime(16082):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  850):   Force finishing activity com.example.usb_mode_change/.USBModeSettingActivity 
```

我不知道我做错了什么..

任何线索都会有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:39:36.843

您可以在 framework/base/core/res/AndroidManifest.xml 中找到此声明

此广播在此部分中：

```
 24     <!-- ================================================ -->
  25     <!-- Special broadcasts that only the system can send -->
  26     <!-- ================================================ -->

 106     <protected-broadcast android:name="android.hardware.usb.action.USB_STATE" /> 
```

我相信你能理解这一点。您必须生成自己的固件才能广播此意图。

# ms-access - MS Office 2003 安装了哪些 Jet 提供程序？

> ID：15782294
> 
> 赞同：0
> 
> 时间：2013-04-03T08:26:02.143
> 
> 标签：ms-access, office-2003, ms-jet-ace

我在使用安装`Access Database Engine 2010`在机器上的应用程序时遇到问题`Office 2003`。`ACCDB`尝试以编程方式访问文件时收到“无效密码” 。

可能是什么问题呢？我猜`JET`这`Office 2003`是`Access Database Engine 2010`.

用什么`JET provider`安装`Office 2003`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:54:51.237

> Access 2000、Access 2002 和 Office Access 2003 创建 Microsoft Jet 4.0 格式的数据库文件。

参考： http: [//support.microsoft.com/kb/303528](http://support.microsoft.com/kb/303528)

我怀疑 Jet 4.0*提供程序*文件（DLL 等）的实际版本将更多地取决于 OS + Service_Pack 和更新，因为 Jet 是一个核心 Windows 组件（即，它包含在 vanilla Windows 安装中）。

# xaml - 从磁盘加载所有 xaml 文件（工作流 + 活动）

> ID：15782299
> 
> 赞同：2
> 
> 时间：2013-04-03T08:26:15.677
> 
> 标签：xaml, workflow, workflow-foundation-4, workflow-foundation

我们创建了一些包含其他子工作流 xamls 的工作流 xamls，并将它们（工作流和子工作流）部署在特定文件夹中。如果没有必要，我们的用户可以修改这些 xamls（工作流和子工作流）而无需重新编译。

目前我们使用ActivityXamlServices从磁盘加载工作流，所以它涵盖了我们修改工作流时的情况，但在修改子工作流时没有，我们必须重新编译项目。

这是一个简单的场景：包含 Activity1 的 Workflow.xaml：

```
<Activity mc:Ignorable="sap" x:Class="Workflows.Workflow" sap:VirtualizedContainerService.HintSize="240,240" mva:VisualBasic.Settings="Assembly references and imported namespaces for internal implementation" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:a="clr-namespace:ActivityLibrary;assembly=ActivityLibrary" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System" xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:s1="clr-namespace:System;assembly=System" xmlns:s2="clr-namespace:System;assembly=System.Xml" xmlns:s3="clr-namespace:System;assembly=System.Core" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System" xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel" xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core" xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:sd="clr-namespace:System.Data;assembly=System.Data" xmlns:sl="clr-namespace:System.Linq;assembly=System.Core" xmlns:st="clr-namespace:System.Text;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
```

Activity1.xaml：

```
<Activity x:Class="ActivityLibrary.Activity1" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" mva:VisualBasic.Settings="Assembly references and imported namespaces for internal implementation" xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System" xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:s1="clr-namespace:System;assembly=System" xmlns:s2="clr-namespace:System;assembly=System.Xml" xmlns:s3="clr-namespace:System;assembly=System.Core" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System" xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel" xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core" xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:sd="clr-namespace:System.Data;assembly=System.Data" xmlns:sl="clr-namespace:System.Linq;assembly=System.Core" xmlns:st="clr-namespace:System.Text;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
```

如果我们修改 Activity1.xaml，我们现在必须重新编译... <-- 避免这种情况！我正在考虑的解决方案是使用 XamlBuildTask 在运行时编译。你认为这是正确的解决方案吗？其他选择？

提前致谢！

# ios - 如何实现像'Haze'那样的动画

> ID：15782301
> 
> 赞同：1
> 
> 时间：2013-04-03T08:26:21.627
> 
> 标签：ios, animation, ios6, opengl-es-2.0, quartz-graphics

首先，我想说这不是为 Haze 做广告，是在抄袭，是想弄清楚如何实现[haze](https://itunes.apple.com/us/app/haze/id594476963?mt=8)的动画技术时的问题。

也许有两种选择：OpenGL 和 QuartZ，后者使用 CPU，可能存在性能问题。

这里的问题是寻找更多线索，以便我可以进一步了解这种很酷的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:37:16.767

我怀疑这是 OpenGL 在工作。使用 UIKit 或 Quartz 可以轻松完成较小的轨道圆从中心圆变形的方式。也许是 Core Animation，它是 OpenGL 和 Quarts/UIKit 之间的桥梁，但很可能他们只是在 OpenGL 中从头开始编码。

但不一定。

# javascript - 在dust.js（linkedin-fork）中格式化数字和日期

> ID：15782312
> 
> 赞同：6
> 
> 时间：2013-04-03T08:27:09.633
> 
> 标签：javascript, dust.js, client-side-templating

如何在dust.js 模板中格式化数字、货币或日期值？

**数据：**

```
{
today: 'Wed Apr 03 2013 10:23:34 GMT+0200 (CEST)'
} 
```

**模板：**

```
<p>Today: {today} </p> 
```

**像这样：（使用moment.js）**

```
<p>Today: {moment(today).format('dd.MM.YYYY')}</p> 
```

**或四舍五入一些价格价值***

数据：{价格：56.23423425}

模板：

价格：{price.toFixed(2)}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T22:06:55.380

您可能需要编写一个助手。可以在此处找到有关如何编写帮助程序的详细信息：

*   [https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Writing_a_dust_helper](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Writing_a_dust_helper)

您的日期字符串模板如下所示：

```
<p>Today: {@formatDate value="{today}"/}</p> 
```

您的助手将是这样的：

```
dust.helpers.formatDate = function (chunk, context, bodies, params) {
    var value = dust.helpers.tap(params.value, chunk, context),
        timestamp,
        month,
        date,
        year;

    timestamp = new Date(value);
    month = timestamp.getMonth() + 1;
    date = timestamp.getDate();
    year = timestamp.getFullYear();

    return chunk.write(date + '.' + month + '.' + year);
}; 
```

您还需要添加该部分以在月份或日期前面获得前导零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-06T07:20:56.020

对于需要为 nodeJs 应用程序执行此操作的人，这是一个不错的 KrakenJS 示例：

[https://github.com/lmarkus/Kraken_Example_Date_Format_Helper](https://github.com/lmarkus/Kraken_Example_Date_Format_Helper)

它使用 Moment.js 来避免重新发明日期格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T02:50:06.173

您可以编写一个过滤器来使用时刻。像这样说：dust.filters.formatDate = (value) => moment.utc(value).format('l H:mm'); 在你的脚本中合适的地方。然后在您的 html 中，只需输入 | 除了你的价值：{date|formatDate}

# c#-4.0 - 当窗口 A 打开时限制打开窗口 B

> ID：15782314
> 
> 赞同：0
> 
> 时间：2013-04-03T08:27:20.117
> 
> 标签：c#-4.0, c#-3.0

```
public partial class MainMenu : Form
{
    public MainMenu()
    {
        InitializeComponent();
    }
    windowOne One;
    windowTwo Two;
    private void OneToolStripMenuItem_Click(object sender, EventArgs e)
    {
        if (One != null)
        {
            One.WindowState = FormWindowState.Normal;
            One.Focus();
        }
        else
        {
            One = new windowOne();
            One.MdiParent = this;
            One.FormClosed += (o, ea) => One = null;
            One.Show();
        }
    }

    private void TwoToolStripMenuItem_Click(object sender, EventArgs e)
    {
        if (Two != null)
        {
            TwoWindowState = Two.Normal;
            Two.Focus();
        }
        else
        {
            Two = new windowTwo();
            Two.MdiParent = this;
            Two.FormClosed += (o, ea) => Two = null;
            Two.Show();
        }
    } 
```

我是 C# 的初学者，我正在开发窗口应用程序，我希望当 windowOne 打开时用户无法打开 windowTwo，我使用上面的代码来避免再次打开 windowOne 或 windowTwo ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:34:36.343

您可以根据当时打开的窗口禁用任一菜单项 1/2，然后在您关闭窗口后再次启用它

```
menuItem1.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:32:35.473

在打开之前检查两个窗口，如果其中一个打开，则聚焦正确的一个。像这样：

```
if (One != null)
{
    One.WindowState = FormWindowState.Normal;
    One.Focus();
}
else if (Two != null)
{
    Two.WindowState = FormWindowState.Normal;
    Two.Focus();
}
else
{
    // Show the window
} 
```

* * *

**编辑：**由于这些代码块完全相同，最好将它们分解到自己的方法中。

```
public bool IsWindowOpen()
{
    if (One != null)
    {
        One.WindowState = FormWindowState.Normal;
        One.Focus();
    }
    else if (Two != null)
    {
        Two.WindowState = FormWindowState.Normal;
        Two.Focus();
    }
    else
    {
        return false;
    }
    return true;
} 
```

然后你可以像这样使用它：

```
if (!IsWindowOpen())
{
    // Open window
    Two = new windowTwo();
    Two.MdiParent = this;
    Two.FormClosed += (o, ea) => Two = null;
    Two.Show();
} 
```

# sql - 在终端的标准输出中格式化 SQL 代码

> ID：15782317
> 
> 赞同：2
> 
> 时间：2013-04-03T08:27:32.157
> 
> 标签：sql, linux, unix, terminal, format

是否有任何 unix/linux 实用程序可以将 SQL 代码从标准输入格式化（缩进）到标准输出？我找不到任何东西。我有特殊的记录器实用程序，可以将 SQL 转储打印到标准输出，但由于没有格式化，因此很难阅读。

# c++ - 错误 MSB6006：“cmd.exe”退出，代码 1 运行 QT 应用程序

> ID：15782322
> 
> 赞同：6
> 
> 时间：2013-04-03T08:27:50.303
> 
> 标签：c++, qt, visual-studio-2012

我用 Visual stdio 2012 命令提示符编译了 QT 5.0.1。当我创建控制台应用程序时，一切都很好并且可以正常工作，但是当我创建 QT 应用程序时，它会抛出此错误：

```
Error 1 error MSB6006: "cmd.exe" exited with code 1 
```

（已安装 QT 视觉标准输出`qt-vs-addin-1.2.0`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-23T03:04:07.073

打开详细构建输出以找到您的确切问题，工具 -> 选项 -> 项目和解决方案 -> 构建和运行 -> 构建输出和构建日志详细程度。

我的问题是错误地使用了“CONST”。

（Clean and Rebuild 似乎可以暂时解决问题，但您必须每次都这样做。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-09T09:01:02.220

我也面临同样的问题，我已经解决了这个问题。

我的项目中有一个 XXX.qrc 文件，其中包含一些资源文件，如 xxx.png、xxx.gif 或任何图像文件，如下所示：

```
<RCC>
<qresource prefix="/MocapServer">
    <file>Resources/mocapServer.qss</file>
    <file>Resources/button/disable.png</file>
    <file>Resources/button/unused.png</file>
    <file>Resources/button/config_dialog_close.png</file>
    <file>Resources/button/u73.jpg</file>
    <file>Resources/button/progressbar.png</file>
    ... 
```

但是 XXX.qrc 中的一个文件找不到。这导致编译错误：

> 错误 1 ​​错误 MSB6006：“cmd.exe”以代码 1 退出

更正错误的名称或路径可以解决此问题。

顺便说一句，我的项目是带有 vs2015 update3 的 QT prj。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-07T21:03:23.880

我花了几个月的时间来解决 Visual Studio 和 QT 构建错误。结果是 Visual Studio 不会自动更新 QT 目录和路径变量。当您更改 QT 安装目录、QT 路径变量、升级 QT 版本或将项目复制到另一台 PC 时，通常会出现错误。所以控制步骤如下：

*   首先尝试使您的解决方案文件夹可写并尝试重建。
*   检查您的路径变量。
*   使用记事本打开 (qtproject).vcxproj.user 并检查 QT 路径和变量，如果错误则更正。
*   使用记事本打开 (qtproject).vcxproj 并检查自定义构建部分的 QT 变量，如果错误则更正。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-05T11:22:04.650

面临同样的问题。尝试通过将详细设置为诊断来检查详细日志。就我而言，环境变量中缺少依赖项的路径。检查是否输入了所有路径。对于 Qt 尝试为 bin 和 qmake 添加路径。

# vba - 如果我更改宏代码中的任何内容，Excel 会一直崩溃

> ID：15782323
> 
> 赞同：0
> 
> 时间：2013-04-03T08:27:51.370
> 
> 标签：vba, excel, crash

我想知道您是否可以帮助我，我编写了一个运行良好的宏，然后每当我对它执行任何操作时，excel 就开始崩溃，我在禁用宏的情况下重新运行了 excel，当我更改任何代码时它仍然崩溃。我不明白这是怎么回事。由于我什至更改它的名称时它都会崩溃，所以我看不出它是代码本身的问题。我在工作表中有两个宏，第二个仍然可以正常运行而不会崩溃。但第一个确实如此。

我设法更改了名称并尝试运行它，它将它改回 Sub DefDec() - 我也不知道这个名称的来源。它以红色突出显示 Sub DefDec，并在此处给出错误的预期标识符。

有任何想法吗？我已将代码添加到底部，并且已经多次重新启动系统。

```
Private Sub DefDec()
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual

Dim Previous() As Variant
Dim Current() As Variant
Dim Original() As Variant
Dim maxrow As Long
Dim i As Long
Dim p As Long
Dim f As Long
Dim j As Long
Dim o As Long
Dim k As Long
Dim Position() As Long
Dim rng As Range
Dim strTemp As String
Dim N As Long
Dim w As Long
Dim NoExchanges As Integer
Dim pole As String
Dim h As Integer
Dim holidays As Integer

For h = 1 To Worksheets.Count
Worksheets(h).Unprotect Password:=""
Next h

k = 1
i = 3
maxrow = 3
Worksheets(1).Select
Do While Worksheets(1).Cells(i, 1).Value <> "STAT.HOL'S (ST)"
maxrow = maxrow + 1
i = i + 1
Loop

N = maxrow - 4
ReDim Position(0 To maxrow)

Previous = Worksheets(1).Range("a4:a" & maxrow - 1).Value
ReDim Current(1 To UBound(Previous, 1))
ReDim Original(1 To UBound(Previous, 1))
For i = 1 To UBound(Previous, 1)
Current(i) = Previous(i, 1)
Original(i) = Current(i)
Next

'Sorting Feature - sorts the array until there are no more changes

Do
NoExchanges = True
For p = 1 To UBound(Current) - 1

    If Current(p) > Current(p + 1) Then
        NoExchanges = False
        pole = Current(p)
        Current(p) = Current(p + 1)
        Current(p + 1) = pole
    End If
Next p
Loop While Not (NoExchanges)

'Comparison of strings, makes an array with the change of position

For i = 1 To N
For j = 1 To N

    If Original(i) = Current(j) Then
        Position(k) = j
        k = k + 1
    End If

Next j
Next i

For i = 1 To N

Worksheets("Sort Sheet").Range(("C" & i), ("C" & N)).Value = Position(i)

Next i

' Changing the sheet data

For h = 1 To Worksheets.Count
If Worksheets(h).Name = "Calcs" Then
    holidays = h - 1
End If
Next h

Worksheets(1).Select
For i = 1 To N
Worksheets(1).Select
Cells(3 + i, 1).Select
Selection.Value = Current(i)
Next i

For h = 1 To holidays
Worksheets(h).Select
Range(Worksheets(h).Cells(4, 6), Worksheets(h).Cells(4 + N, 70)).Select
Selection.Copy
Worksheets("Sort Sheet").Select
Cells(1, 1).Select
Selection.PasteSpecial
For f = 1 To N
    For i = 1 To N
        If Position(i) = f Then
            Application.CutCopyMode = False

            Range(Worksheets("Sort Sheet").Cells(i, 1), Worksheets("Sort Sheet").Cells(i, 70)).Select
            Selection.Copy

            With Sheets(h)
                .Cells(f + 3, 6).PasteSpecial
            End With
            Application.CutCopyMode = False

            Exit For
        End If
    Next i
Next f
Next h

For h = 1 To 2
If h = 1 Then
    o = 3
Else
    o = 32
End If

Worksheets("FLEXI").Select
Range(Cells(o, 3), Cells(o + N, 150)).Copy
Worksheets("Sort Sheet").Select
Cells(1, 1).Select
Selection.PasteSpecial

For f = 1 To N
    For i = 1 To N

        If Position(i) = f Then
            Application.CutCopyMode = False

            Range(Worksheets("Sort Sheet").Cells(i, 1), Worksheets("Sort Sheet").Cells(i, 150)).Select
            Selection.Copy

            With Sheets("FLEXI")
                .Cells(o + f - 1, 3).PasteSpecial
            End With
            Application.CutCopyMode = False

            Exit For
        End If
    Next i
Next f
Next h

Application.Calculation = xlCalculationAutomatic
skip_update = False
Worksheets("Sort Sheet").UsedRange.Clear
Worksheets(1).Activate
End Sub 
```

谢谢，艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:18:12.117

它现在工作，设法无缘无故地突然更改名称。

# cuda - Cuda 编程直方图

> ID：15782325
> 
> 赞同：0
> 
> 时间：2013-04-03T08:27:53.980
> 
> 标签：cuda, gpu

我想运行一个 cuda 程序，但我是初学者。我必须为直方图编写一个程序。但是有桶。根据 maxValue（示例中的 40），该数字将被添加到相应的存储桶中。如果我们有 4 个桶：

> 历史：| 1 | 10 | 30 | 39 | 32 | 2 | 4 | 5 | 1 |
> 
> 0-9（第一个桶）
> 
> 10-19（第二桶）
> 
> 20-29（第三桶）
> 
> 30- 39（第四桶）

我的 GPU 具有**计算能力 1.1。**

我试图做一些事情，比如为每个线程在他的临时表上添加他的值的块共享 temp[]：

```
__global__ void histo_kernel_optimized5( unsigned char *buffer, long size,
                               unsigned int *histo )
{
     extern __shared__ unsigned int temp[];
     temp[threadIdx.x] = 0;
     __syncthreads();

     int i = threadIdx.x + blockIdx.x * blockDim.x;
     int offset = blockDim.x * gridDim.x;
     int bucketID;
     while (i < size)
     {
              bucketID = array[i]/Bwidth;
              atomicAdd( &temp[bucketID], 1);
              i += offset;
     }
     __syncthreads();

    atomicAdd( &(histo[threadIdx.x]), temp[threadIdx.x] );
}

histo_kernel_optimized <<<array_size/buckets, buckets,buckets*sizeof(unsigned int)>>>(buffer,SIZE, histogram) 
```

但是编译器说：指令 '{atom,red}.shared' 需要 . **目标 sm_12 或更高**

我还尝试为每个创建的线程创建一个临时表：

```
__global__ void histo_kernel_optimized5( unsigned char *buffer, long size,
                               unsigned int *histo )
{
    unsigned int temp[buckets];
     int j;
    for (j=0;j<buckets;j++){
        temp[j]=0;
    }

    int bucketID;

    int i = threadIdx.x + blockIdx.x * blockDim.x;
    int offset = blockDim.x * gridDim.x;
    while (i < size)
    {
        bucketID = array[i]/Bwidth;
        temp[bucketID]++;
        i += offset;
    }

    for (j=0;j<buckets;j++){
        histo[j] += temp[j];    
    }
 } 
```

但是编译器不允许我这样做，因为它需要一个**常量**来创建临时表。但问题是，**桶是**为命令行动态给出的。

还有另一种方法吗？我不知道该怎么做。我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T16:06:58.273

使用原子时，启动较少的块将减少争用（并因此提高性能），因为它不必在较少的块之间进行协调。启动更少的块，并让每个块在更多的输入元素上循环。

```
for (unsigned tid = blockIdx.x*blockDim.x+threadIdx.x; 
              tid < size; tid += gridDim.x*blockDim.x) {
    unsigned char value = array[tid]; // borrowing notation from another answer here
    int bin = value % buckets;
    atomicAdd(&histo[bin],1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T11:08:06.137

使用原子操作很容易实现直方图。我不知道您为什么要编写如此复杂的内核。并行化操作的动机是利用算法的并行性。无需遍历内核内的整个直方图。这是一个示例 CUDA 内核和包装函数，用于计算具有指定数量的 bin 的数组的直方图。我认为它不能针对 Compute 1.1 设备进行进一步优化。但是对于 Compute 1.2，可以使用共享内存。

```
__global__ void kernel_getHist(unsigned char* array, long size, unsigned int* histo, int buckets)
{
    int tid = blockIdx.x * blockDim.x + threadIdx.x;

    if(tid>=size)   return;

    unsigned char value = array[tid];

    int bin = value % buckets;

    atomicAdd(&histo[bin],1);
}

void getHist(unsigned char* array, long size, unsigned int* histo,int buckets)
{
    unsigned char* dArray;
    cudaMalloc(&dArray,size);
    cudaMemcpy(dArray,array,size,cudaMemcpyHostToDevice);

    unsigned int* dHist;
    cudaMalloc(&dHist,buckets * sizeof(int));
    cudaMemset(dHist,0,buckets * sizeof(int));

    dim3 block(32);
    dim3 grid((size + block.x - 1)/block.x);

    kernel_getHist<<<grid,block>>>(dArray,size,dHist,buckets);

    cudaMemcpy(histo,dHist,buckets * sizeof(int),cudaMemcpyDeviceToHost);

    cudaFree(dArray);
    cudaFree(dHist);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T16:25:54.090

有一种针对没有原子操作的设备的解决方案，并展示了一种将片上内存冲突最小化的方法，Podlozhnyuk[在 CUDA 的直方图计算中提出了对扭曲的细分](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/histogram64/doc/histogram.pdf)

代码位于 CUDASamples\3_Imaging\histogram （来自 CUDA Samples）

# crystal-reports - 水晶报表 - 子报表部分不随字段增长

> ID：15782328
> 
> 赞同：1
> 
> 时间：2013-04-03T08:28:07.597
> 
> 标签：crystal-reports

我在报告的详细信息部分有一个子报告。子报表在详细信息部分有两个字段，“Can Grow”设置为 true，每个字段都保存在不同的部分中，以避免文本重叠。该字段正在增长，但该部分没有随该字段增长，因此打印时仅显示部分文本。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:13:03.407

谢谢克雷格。子报表的“Can Grow”已设置为 true。我找到了另一个与逻辑无关的解决方案，但它确实有效。我增加了子报表的高度，使其在某种程度上等于页眉的高度 + 至少一个详细信息部分 + 子报表的页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:00:28.350

确保将子报表标记为“可以增长”。

# sql - 在 where 子句的 case 中使用 select 语句。收到错误 ORA-00905

> ID：15782329
> 
> 赞同：0
> 
> 时间：2013-04-03T08:28:07.940
> 
> 标签：sql, case

我的示例代码。

在 where 条件内的 case 语句中，当我等同于变量时，我收到以下错误：

> ORA-00905-缺少关键字

我不明白我哪里出错了。

我什至尝试将完整的 case 语句等同于变量，它没有给出所需的输出。

谁能帮我？

```
SELECT JOB_NAME,
       HOURS,
       COMMITTEE,
       REPORT,
       DIRECTOR,
       (CASE
         WHEN L.ACTION IN ('110', '10') AND
              L.APPROVED = 'Y' AND
              (:LV_ACTN = '1' OR :LV_ACTN = '4') THEN
          L.APPRV_JUSTIFY
         WHEN L.ACTION IN ('20', '130') AND
              L.FLAG = 'R' AND (:LV_ACTN = '2' OR :LV_ACTN = '4') THEN
          L.CANCL_JUSTIFY
         WHEN L.ACTION IN ('30', '120') AND
              L.APPROVED = 'Y' AND
              (:LV_ACTN = '3' OR :LV_ACTN = '4') THEN
          L.POSTPONE_JUSTIFY
         ELSE 
          'NO ACTION' 
       END) AS EXPLANATION,
       L.ID,
       MANAGER,
       l.year
  FROM PLAN L
 WHERE  (CASE WHEN
      L.ACTION IN ('110', '10') AND
              L.APPROVED = 'Y' AND
              (:LV_ACTN = '1' OR :LV_ACTN = '4') THEN 'X' 
         WHEN L.ACTION IN ('20', '130') AND 
              L.FLAG = 'R' AND (:LV_ACTN = '2' OR :LV_ACTN = '4') THEN 'X' 
         WHEN L.ACTION IN ('30', '120') AND
              L.APPROVED = 'Y' AND 
              (:LV_ACTN = '3' OR :LV_ACTN = '4') THEN X' END) IS NOT NULL
   AND  ((case when L.ACTION IN ('30', '120') THEN 
        (SELECT DISTINCT AV.YEAR
            FROM PLAN_V AV
           WHERE L.ID = AV.ID
             AND AV.B_ID =
                 (SELECT MAX(B_ID)
                    FROM MS_AUD_AUDIT_PLAN_V
                   WHERE B_ID <
                         (SELECT MAX(B_ID)
                            FROM PLAN_V
                           WHERE ACTION = '120')))**=:LV_PLANYR** ELSE
         L.YEAR END)**= :LV_PLANYR** ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:32:53.280

我编辑了你的代码，使用stackoverflow的语法高亮，错误变得很明显。您缺少 ' 就行了：

```
(:LV_ACTN = '3' OR :LV_ACTN = '4') THEN X' END) IS NOT NULL 
```

好的线路是：

```
(:LV_ACTN = '3' OR :LV_ACTN = '4') THEN 'X' END) IS NOT NULL 
```

# c# - 如果...否则... Button_Click 上的逻辑不起作用

> ID：15782335
> 
> 赞同：0
> 
> 时间：2013-04-03T08:28:16.920
> 
> 标签：c#, wpf, logic

我不明白为什么我的 If... Else 逻辑不起作用。

我要存档的是，当用户单击按钮时，它会首先检查 page 的值是否小于或等于数组的长度，然后它会增加 page 变量并运行 DisplayPath 方法，否则它会设置page 变量为数组的长度。

当我运行应用程序并单击按钮时，一旦它增加超过数组的长度，它就会崩溃。

```
 private string[] filePaths;
    private int page;

    private void Button_Click_3(object sender, RoutedEventArgs e)
    {
        if (page <= filePaths.Length)
        {
            page++;
            DisplayPath(page);
        }
        else
        {
            page = filePaths.Length;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:29:58.373

filePaths 是一个从零开始的数组，将其更改为

```
 private string[] filePaths;
private int page;

private void Button_Click_3(object sender, RoutedEventArgs e)
{
    if (page < filePaths.Length-1)
    {
        DisplayPath(++page);
    }
    else
    {
        page = filePaths.Length;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:31:43.430

因为`filePaths`是一个基于零的数组；

```
if (page < filePaths.Length)
{
    DisplayPath(++page);
} 
```

> 数组索引为零：具有**n 个**元素的数组索引从**0**到 **n-1**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:30:03.103

您应该测试小于 filePaths.Length

```
 if (page < filePaths.Length) 
```

数组从索引零开始，可以索引到 Length - 1

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T08:31:09.170

应该是`page < filePaths.Length -1`因为你添加到`page` **之前** `DisplayPath()` 因为该页面将指向数组中不存在的位置`filePaths`

# java - 为什么不呢，主线程又在调用。

> ID：15782336
> 
> 赞同：-6
> 
> 时间：2013-04-03T08:28:18.083
> 
> 标签：java

我正在阅读`Thread`，`java`我在书中找到了一个 code_snippet 并尝试实现它，但它没有按照书中的说明工作，`why`？

```
public class Main_thread 
{
    public static void main ( String args [] )
    {
        System.out.println("hello kakke");

        Thread t = new Thread () ;
        t.start();
    }   
} 
```

为什么不呢，再次打印“hello kakke”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:35:25.697

> 为什么不呢，再次打印“hello kakke”。

这是因为您只在`main()`方法开始时打印一次。

您之后创建的`Thread`立即终止，并且不做任何额外的事情。为了让`Thread`执行某些工作，您需要重写其`run()`方法或将对象传递给实现`Runnable`接口的构造函数。

要开始使用，请尝试以下操作：

```
Thread t = new Thread () {
   @Override
   public void run() {
       for (int i = 0;   i < 5;  i++) {
           System.out.println("hello kakke - from separate Thread");
           Thread.sleep(500);
       }
   }
};
t.start();

for (int i = 0;   i < 5;  i++) {
    System.out.println("hello kakke - from main Thread");
    Thread.sleep(700);
} 
```

注意：`Thread.sleep()`可以抛出一个`InterruptedException`你需要捕捉的东西——我把它交给你作为练习:)

# java - 默认车速？

> ID：15782337
> 
> 赞同：0
> 
> 时间：2013-04-03T08:28:26.200
> 
> 标签：java, performance, algorithm, logic, game-physics

我的程序中有两个按钮。左按钮刹车（降低速度）和右按钮速度（增加速度）。当没有点击时，汽车具有默认速度。并且有最小 (0.3) 和最大 (2) 速度。现在，我在这里写了这个：

```
private float _speed = 1f;

    if (ButtonClicked) {

        if (brake) {

            float tempSpeed = _speed;
            tempSpeed -= 0.05f;

            if (tempSpeed <= 0.3) {
                //
            } else {
                _speed -= 0.05f;
            }

        }           

        if (speed) {

            float tempSpeed = _speed;
            tempSpeed += 0.1f;

            if (tempSpeed >= 2) {
                //
            } else {
                _speed += 0.1f;
            }           

        }           

    } else {

        float tempSpeed = _speed;

        if (tempSpeed < 1) {
            _speed += 0.1f;
        }

        if (tempSpeed > 1) {
            _speed -= 0.1f;
        }
    } 
```

我不喜欢的部分是“ButtonsClicked”的“else”部分。这是默认的汽车速度部分。我增加或减少速度。车子动起来不好看，就是因为这个增减。我怎样才能让它变得更好？我的意思是，当什么都没有点击时，那么好的恒定车速没有增加或减少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:49:41.010

我认为问题在于，一旦达到默认速度，它将不断加速/制动以保持该速度。由于您的问题并不能很好地解释问题，我们不确定。

这是我的意思的一个示例，您需要在默认速度周围创建一个“死区”：

```
private final float MAX_SPEED = 2f;
private final float MIN_SPEED = 0.3f;

private final float DEFAULT_SPEED = 1f;

private final float ACCEL_SPEED = 0.1f;
private final float BRAKE_SPEED = 0.05f;

private float _speed = DEF_SPEED;

if (ButtonClicked)
{
    if (accelerate)
    {
        _speed = Math.min(_speed + ACCEL_SPEED, MAX_SPEED);
    }

    if (brake)
    {
        _speed = Math.max(_speed - BRAKE_SPEED, MIN_SPEED);
    }
}
else
{

    // only modify the speed if its far off to
    // prevent it from constantly accelerating and braking
    // (modify the 0.5f to increase/decrease the 'dead zone')
    if (Math.abs(_speed - DEFAULT_SPEED) > 0.5f)
    {
        // slowly reset to default speed
        if (_speed < DEFAULT_SPEED)
            _speed += ACCEL_SPEED;

        if (_speed > DEFAULT_SPEED)
            _speed -= BRAKE_SPEED;
    }
} 
```

# python - 在 PySNMP 中查询数字 OID？

> ID：15782339
> 
> 赞同：7
> 
> 时间：2013-04-03T08:28:35.267
> 
> 标签：python, snmp

我正在尝试在 Python 中查询 Cisco 路由设备上的 SNMP 变量，并且正在苦苦挣扎。

我有一个运行良好的 snmpwalk 命令：

```
$snmpwalk -v2c -c <our_community_string> <device_ip_address> 1.3.6.1.4.1.9.9.42.1.2.10.1.1.950
SNMPv2-SMI::enterprises.9.9.42.1.2.10.1.1.950 = Gauge32: 68 
```

现在我正在尝试使用 pysnmp 在 Python 中做同样的事情。

我尝试使用基于此处示例的东西 - [http://pysnmp.sourceforge.net/examples/current/index.html](http://pysnmp.sourceforge.net/examples/current/index.html) - 但得到了一个 SmiError：

```
In [1]: from pysnmp.entity.rfc3413.oneliner import cmdgen

In [2]: cmdGen = cmdgen.CommandGenerator()

In [3]: errorIndication, errorStatus, errorIndex, varBinds = cmdGen.getCmd(
...:     cmdgen.CommunityData('0pe3aro'),
...:     cmdgen.UdpTransportTarget(('10.65.113.28', 161)),
...:     cmdgen.MibVariable('1.3.6.1.4.1.9.9.42.1.2.10.1.1.950', 0)
...: ) 
```

但我得到以下信息：

```
SmiError: MIB file "1.3.6.1.4.1.9.9.42.1.2.10.1.1.950.py[co]" not found in search path 
```

基本上 - 我希望在 NetSNMP 中与此等效，但在 PySNMP ( [http://ben.akrin.com/?p=1234](http://ben.akrin.com/?p=1234) ) 中。

有人知道在 PySNMP 中查询数字 OID 的简单方法吗？

干杯，维克多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T21:16:20.243

我相信以下代码对您有用：

```
from pysnmp.entity.rfc3413.oneliner import cmdgen

cmdGen = cmdgen.CommandGenerator()

errorIndication, errorStatus, errorIndex, varBinds = cmdGen.getCmd(
    cmdgen.CommunityData('public'),
    cmdgen.UdpTransportTarget(('demo.snmplabs.com', 161)),
    '1.3.6.1.2.1.1.3.0'
)

print('\n'.join([ '%s = %s' % varBind for varBind in varBinds])) 
```

您可以将其剪切并粘贴到您的 Python 提示符中以尝试使用它。

MibVariable 对象可用于按名称引用 MIB 符号。

# android - Android 发送带附件的电子邮件并不总是有效

> ID：15782343
> 
> 赞同：6
> 
> 时间：2013-04-03T08:28:43.500
> 
> 标签：android, android-intent, gmail, android-contentprovider

我正在使用 ContentProvider 发送带有附件的电子邮件。

1.  首先，我将文件写入缓存目录。
2.  然后我为内容提供者找到的每个文件创建一个带有 URL 的电子邮件
3.  然后我开始一个带有 ACTION_SEND_MULTIPLE 意图的新活动。
4.  我选择gmail，然后点击发送按钮。

这有时会起作用，它似乎在一段时间内第一次起作用，但在随后的尝试后不起作用......但并不总是这样。

当它不起作用时，电子邮件会卡在 gmail 中发送。这发生在 2.3.3 和 4.0.1 上，在 gmail 客户端中打开邮件并点击发送按钮经常会导致邮件几乎立即发送，但并非每次都发送。

使用 Google Drive 打开 Intent 的行为与 gmail 相同。

到目前为止，使用内置交换邮件客户端打开 Intent 始终有效。

这是发送电子邮件的代码：

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
            sendIntent.putExtra(Intent.EXTRA_EMAIL, exportParams.emailAddresses);
            sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Leader Activity Report");
            sendIntent.putExtra(Intent.EXTRA_TEXT, "Leader Activity Report, see attached file.");
            Uri fileUri = CachedFileProvider.createFileUri(result.fileName);
            if (L.dbg())
                L.dbg("Using uri:" + fileUri.toString());
            ArrayList<Uri> uris = new ArrayList<Uri>();
            uris.add(fileUri);
            Uri fileUri2 = CachedFileProvider.createFileUri(result.fileNameDayByDay);
            uris.add(fileUri2);
            if (L.dbg())
                L.dbg("Using uri2:" + fileUri2.toString());
            sendIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
            sendIntent.setType("text/plain");
            parent.startActivity(sendIntent); 
```

这是内容提供者

```
public class CachedFileProvider extends ContentProvider {

private static final String CLASS_NAME = "CachedFileProvider";
public static final String AUTHORITY = "com.josh.lll.file.provider";

private UriMatcher uriMatcher;

@Override
public boolean onCreate() {
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    uriMatcher.addURI(AUTHORITY, "*", 1);
    return true;
}

@Override
public ParcelFileDescriptor openFile(Uri uri, String mode)
        throws FileNotFoundException {
    try {
        String LOG_TAG = CLASS_NAME + " - openFile";
        Log.v(LOG_TAG,
                "Called with uri: '" + uri + "' - " + uri.getLastPathSegment());
        switch (uriMatcher.match(uri)) {
        case 1:
            String fileLocation = getContext().getCacheDir() + File.separator
                    + uri.getLastPathSegment();
            Log.i(CLASS_NAME,"Returning file :"+fileLocation);
            ParcelFileDescriptor pfd = ParcelFileDescriptor.open(new File(
                    fileLocation), ParcelFileDescriptor.MODE_READ_ONLY);
            return pfd;
        default:
            Log.v(LOG_TAG, "Unsupported uri: '" + uri + "'.");
            throw new FileNotFoundException("Unsupported uri: "
                    + uri.toString());
        }
    } catch (FileNotFoundException t) {
        Bug.major(this, t, "Could not return file descriptor");
        throw t;
    } catch (RuntimeException t) {
        Bug.major(this, t, "Could not return file descriptor");
        throw t;
    } catch (Error t) {
        Bug.major(this, t, "Could not return file descriptor");
        throw t;
    }
}

public static String createFullyQualifiedFileName(Context c, String fileNamePart) {
    File cacheDir = c.getCacheDir();
    Log.i(CLASS_NAME,"Using cache dir:"+cacheDir);
    return cacheDir + File.separator + fileNamePart;
}

public static Uri createFileUri(String fileNamePart) {
    return Uri.parse("content://" + AUTHORITY + "/"+ fileNamePart);
}

public int update(Uri uri, ContentValues contentvalues, String s,
        String[] as) {
    return 0;
}

@Override
public int delete(Uri uri, String s, String[] as) {
    return 0;
}

@Override
public Uri insert(Uri uri, ContentValues contentvalues) {
    return null;
}

@Override
public String getType(Uri uri) {
    return null;
}

@Override
public Cursor query(Uri uri, String[] projection, String s, String[] as1,
        String s1) {
    return null;
} 
```

}

对于成功和“停滞”的电子邮件，gmail 会打印以下日志消息：

```
04-03 22:17:35.027: I/Gmail(13206): >>>>> Attachment uri: content://com.josh.lll.file.provider/report_20100401_20130402_LeadetJosh_3_1364980653516.csv
04-03 22:17:35.035: I/Gmail(13206): >>>>>           type: text/plain
04-03 22:17:35.035: I/Gmail(13206): >>>>>           size: 0
04-03 22:17:35.054: I/Gmail(13206): >>>>> Attachment uri:  content://com.josh.lll.file.provider/backup_20100401_20130402_LeadetJosh_3_1364980653516_day_by_day.lll
04-03 22:17:35.054: I/Gmail(13206): >>>>>           type: text/plain
04-03 22:17:35.054: I/Gmail(13206): >>>>>           size: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T13:47:04.067

它发生在存储在 /data/app 或 /system 等系统文件夹中的文件上。

解决方法是：将这些文件复制到 sdcard 位置并从那里附加/使用它们。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-08-04T21:14:53.320

找到治疗方法：

*   禁用 Gmail。
*   重置为出厂默认设置。
*   重新启动手机，如关闭并重新打开。
*   启用 Gmail。

应该再次为附件工作

# javascript - jq-idealforms 通过 AJAX 发送表单

> ID：15782347
> 
> 赞同：0
> 
> 时间：2013-04-03T08:28:50.267
> 
> 标签：javascript, jquery, ajax, forms

我有一个简单的登录表单。

```
<form id="login" action="process/login_process.php" method="POST" name="login" accept-charset="utf-8">
<div><label>Username:</label><input type="text" name="username" data-ideal="required"/></div>
<div><label>Password:</label><input type="password" name="password" data-ideal="required"/></div>
<div><button id="submit" type="submit">Login</button></div>
</form> 
```

我正在使用 JQ-IDEALFORMS 进行表单的验证和整体美观。我很难弄清楚如何通过 ajax 提交表单。这是我到目前为止的javascript：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.min.js"></script>
<script src="javascripts/jquery.idealforms.min.js"></script>
<script>
    var options = {
        onSuccess: function() {
            $.post('process/login_process.php', $myform.serialize())
            alert(responseXML);
        }
    };
    var $myform = $('#login').idealforms(options).data('idealforms');
    $('#submit').click(function() {
        $.post('process/login_process.php', $myform.serialize());
        alert('hello');
    }); 
```

我遵循了他们文档中非常有限的指示，并将 $.post 添加到选项变量中的 onSuccess 操作中。那是行不通的。然后我尝试向提交按钮添加一个侦听器，但警告框永远不会出现，这意味着侦听器永远不会触发。这应该怎么做？我已经能够提交表单，但是当我这样做时，它会将页面重定向到我的 php 页面，在该页面中我的 XML 正在被回显。出于某种原因，我无法让它回显到我的登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:34:17.787

在表单的 action 属性中，您必须返回 false 以防止表单被提交或将操作更改为`javascript:void(0)`...

```
<form id="login" action="javascript:submitForm()" method="POST" name="login" accept-charset="utf-8"> 
```

而在 JS

```
var submitForm = function() {
    var options = {
       onSuccess: function() {
          $.post('process/login_process.php', $myform.serialize())
          alert(responseXML);
       }
    };
    var $myform = $('#login').idealforms(options).data('idealforms');
     //not sure this part is needed because Post already call in the success method of idealforms
    $.post('process/login_process.php', $myform.serialize());
    alert('hello');
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:35:49.767

通过ajax发送表单。

```
var createForm = $("form#login");
var postData = createForm.serialize();

        $.ajax({
            type: "POST",
            url: "/Offers/CreateOffer",
            data: postData,
            success: function (result, textStatus, jqXhr) {
           }
         }); 
```

# iphone - UILocationNotification 不遵守夏令时

> ID：15782350
> 
> 赞同：2
> 
> 时间：2013-04-03T08:28:55.150
> 
> 标签：iphone, xcode

我正在安排这样的本地通知

```
+ (void) addLocalNotification: (Event *) event {
  UILocalNotification *localNotif = [[UILocalNotification alloc] init];
  localNotif.fireDate = event.scheduleTime;
  localNotif.alertBody = @"Time to apply drops\nPlease press view to see details";
  localNotif.soundName = ALARM_SOUND_FILE;
  localNotif.timeZone = [NSTimeZone localTimeZone];
  localNotif.applicationIconBadgeNumber = 1;
  NSDictionary * dict = [NSDictionary    dictionaryWithObjectsAndKeys:event.number,LN_EVENT_KEY,  ACTION_EVENT, LN_ACTION_KEY,  nil];
  localNotif.userInfo = dict;
  [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
} 
```

然而，在上周末的时钟向前推进后，在时钟向前推进之前安排的通知会在一个小时后触发，即 19:00 而不是 18:00

苹果文档说要获得“挂钟”时间，如上所述设置时区。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:17:54.713

因此，我没有添加 24 小时的时间间隔，而是使用了 ..

```
+ (NSDate *) addOneDayToDate: (NSDate *) date {
   return [currentCalendar dateByAddingComponents:oneDay toDate:date options:0];
} 
```

在哪里

```
 oneDay = [[NSDateComponents alloc] init];
 [oneDay setDay:1];
 currentCalendar = [NSCalendar currentCalendar]; 
```

这在大多数情况下都有效，除非日期介于午夜和时钟通常在凌晨 2:00 左右更改的时间之间。由于日期时间将在此之后，因此不需要逻辑。

# windows - 从具有不同日期设置的服务器获取计划任务，格式相似

> ID：15782355
> 
> 赞同：0
> 
> 时间：2013-04-03T08:29:03.730
> 
> 标签：windows, scheduled-tasks, windows-server-2003, windows-server-2008-r2

*   **起始情况：**有超过 50 种（最坏情况）不同语言的大量服务器。每个服务器可能有不同的语言/日期设置。操作系统是 w2k3 和 w2k8r2。我想从所有这些服务器收集计划任务。特别是日期必须采用一种文化模式，因为我想将收集的文件上传到数据库中。我更喜欢一个适用于两个操作系统的解决方案，除了没有其他东西能很好地工作。
*   **第一个想法：**使用 cmd 命令“schtasks /query /fo csv /v >file.txt”收集数据。这很好用，我得到了我需要的所有信息。（在 2k3 和 2k8 中列的顺序不同；但这可以在 c# 中处理）。**问题：**在这个解决方案中，日期很糟糕（语言设置的不同日期格式） - 我不想手动解析它。
*   **第二个想法：**通过 wmi 获取计划任务。[很容易在msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394601%28v=vs.85%29.aspx?ppud=4)上找到一个站点。**问题：** “此类只能返回使用脚本或 AT.exe 创建的作业。它不能返回有关由计划任务向导创建或修改的作业的信息。” 我知道服务器上大约 30 - 40 % 的 schtasks 是手动创建的（因此通过任务向导）。
*   **问题：**那么，如何在不手动解析日期信息的情况下获取所有 schtasks 信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:55:58.087

新想法 - 编写一个脚本，通过两种方式从服务器收集系统信息。首先使用 systeminfo wmi，然后使用 cmd 命令“systeminfo >file.txt”。

systeminfowmi 文件包含独特模式的安装日期（例如：20121114094908.000000+060）。cmd 命令的文件包含与文化相关的安装日期：（例如：14.11.2012, 09:49:08）

有了这些信息，我编写了一个算法，它在 cmd-commands 文件中搜索 wmifile 给出的日期和时间部分。有了这个，我知道年/月/日等的顺序，但不知道该服务器中使用了哪种语言/日期设置。（当然你可以重新得出结论，但我不在乎这个）。

收集脚本（sysinfo wmi 和 sysinfo cmd）每天运行。之后运行日期识别。因此，将为每个服务器创建一个唯一的日期转换密钥。该信息被加载到数据库中。总的来说，您将来将通过存储过程获得所有具有相应日期转换键的服务器名称 - 然后您将能够准确地转换每个日期。

再次感谢 user2199816 - 他的解决方案也很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:56:49.380

使用您的命令行任务来 file.txt 并将该文件导入 Excel。然后使用日期/时间格式来查看它是否会自动正确解析它们。

[http://excelsemipro.com/2011/06/regional-date-formats-in-excel/](http://excelsemipro.com/2011/06/regional-date-formats-in-excel/)

# javascript - 使用 HTML mailto 时如何防止表单字段出现在邮件正文中？

> ID：15782358
> 
> 赞同：0
> 
> 时间：2013-04-03T08:29:17.313
> 
> 标签：javascript, html, message, mailto

我正在玩弄`mailto:`并想知道为什么我用来收集要放入电子邮件客户端字段的数据的表单也最终出现在消息正文中，如下所示：

```
hello   // test body
msg_address=hello@some.com
msg_comment=hello
msg_cc_message=on 
```

我的表单`action`属性设置如下：

```
var form = $(this).closest('form'),
    first = "info",
    last = "some.com"
    mailto = "mailto:"+first+"@"+last+"?",
    subject = "subject=Website enquiry&",
    message = "body="+$('#msg_comment').val(),
    bcc = $('#msg_cc').is(':checked') ? "bcc=" + form.find('#msg_address').val() + "&" : "";

form.attr("action",mailto+bcc+subject+message).submit() 
```

我希望消息正文只包含设置的内容，`message`而不是包含表单字段名称的整个表单内容。

**问题**：
有什么方法可以防止表单字段出现在邮件正文中？

**编辑：**
这是我的表格：

```
<form action="" method="post" enctype="text/plain" name="mailer">
    <label for="msg_address" data-i18n="contact.label_email" class="t">Email:</label>
    <input data-role="text" type="text" id="msg_address" name="msg_address" value="" maxlength="100" />

    <label for="msg_comment" data-i18n="contact.label_message" class="t">Your Message:</label>
    <textarea rows="10" cols="20" id="msg_comment" name="msg_comment"></textarea><br />

    <input type="checkbox" name="msg_cc" id="msg_cc" class="t" data-i18n-target="" data-i18n="" />
    <label for="msg_cc" data-i18n="contact.label_cc" data-i18n-target=".ui-btn-text" class="t">CC to Email address provided</label>

    <div data-role="controlgroup" data-type="horizontal" class="mailer_menu">
      <input type="reset" value="Reset" data-i18n="contact.delete" data-i18n-target="" class="t" />
      <input type="button" id="mail_trigger" value="Send" data-i18n="contact.send" class="t" data-iconpos="right" data-i18n-target="" data-theme="b" data-icon="arrow-r" />
    </div>
  </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:20:27.113

当您提交表单时，根据定义，它会将类似输入的（输入、文本区域等）元素的数据发送到指定的目标。

现在在 javascript 中，您更改 action 属性以创建格式更好的电子邮件模板，但表单中仍然包含所有输入，因此根据定义，它们将添加到正文中。

为了防止这种情况，您可以将隐藏表单放入您的 html 中，其中没有类似输入的元素，甚至作为自封闭元素，然后修改操作并提交该操作。甚至可以即时创建一个。

这样，您就不会在电子邮件中包含任何您不想拥有的内容。请注意取消第一个表单的提交。

# kml - NOKIA Here API 读取 KML 文件时出错

> ID：15782371
> 
> 赞同：0
> 
> 时间：2013-04-03T08:30:16.100
> 
> 标签：kml, here-api

嗨，我在使用诺基亚这里的 javascript api 读取 kml 文件时遇到了一些问题。

当我读到这个文件时：

```
 <?xml version="1.0" encoding="UTF-8"?> 
   <kml xmlns="http://www.opengis.net/kml/2.2">     
 <Document> <Style id="gitesdegaule.fr"> <LineStyle>

                   <color>30939a9a</color>
                   <width>3</width>
                   </LineStyle>
                   <PolyStyle>
                   <color>2166738f</color>
                   </PolyStyle>
       </Style>

               <Style id="karamelise.fr"></Style>

       <Placemark id="ain"> <name><![CDATA[TOTO]]></name>

                  <id><![CDATA[1]]></id>
               <type><![CDATA[dep]]></type>
       <styleUrl>#gitesdegaule.fr</styleUrl> 
<Polygon> 
<outerBoundaryIs>
 <LinearRing>    <tessellate>1</tessellate> <coordinates>

                              4.25890083,44.2644249 4.27377272,44.27175247 4.28899552,44.29214557 4.2883746,44.31501932 4.30211262,44.3148215 4.31809777,44.32175218 4.32925707,44.33237613 4.32577135,44.33832401 4.37017129,44.34013872 4.38705008,44.34705752 4.39560189,44.34432052 4.40234672,44.33500676 4.40145004,44.32816699 4.39159418,44.30475879 4.39331281,44.29459994 4.40357008,44.28817655 4.43198335,44.28968263 4.43560755,44.28332442 4.44042244,44.28342347 4.45321198,44.29786669 4.44875741,44.2967101 4.4510679,44.33409577 4.45534071,44.34026942 4.46476061,44.34167492 4.48291043,44.33819967 4.50609709,44.3402525 4.5120143,44.33539966 4.51473139,44.32911411 4.52416664,44.32876769 4.53115207,44.32409707 4.54911036,44.32451183 4.54774877,44.32287442 4.54563073,44.31970808 4.55716755,44.30416797 4.56999757,44.2993489 4.5742736,44.30074626 4.59898027,44.29175565 4.60546546,44.2910399 4.61662522,44.27799282 4.63267924,44.28499404 4.64922367,44.27035991 4.65236385,44.29127223 4.65318138,44.29480723 4.65061501,44.32980583 4.64958991,44.3342329 4.64683712,44.34828355 4.64906437,44.373073 4.6643734,44.39894431 4.66305349,44.40702263 4.66710646,44.42991215 4.67597774,44.43670158 4.68928691,44.44051412 4.69528931,44.44579734 4.70041036,44.46939017 4.69953724,44.48008255 4.68941493,44.49234869 4.68788192,44.50293409 4.69310072,44.51670268 4.70312868,44.52456221 4.70658782,44.53407141 4.70297307,44.5360992 4.69244606,44.5465171 4.69573855,44.56307077 4.7047198,44.56351778 4.70640399,44.57631421 4.71087231,44.58199901 4.73286442,44.5858884 4.74116893,44.58877439 4.74420238,44.6008919 4.74040454,44.60239253 4.75242599,44.61893344 4.75808936,44.63073891 4.7729024,44.64263201 4.77907273,44.65469864 4.77673911,44.66391226 4.78221009,44.67252315 4.78158975,44.6788457 4.77196818,44.70599753 4.76422013,44.71502737 4.76402727,44.72902451 4.76415967,44.73203915 4.75950659,44.74847569 4.76932099,44.75958502 4.76103981,44.77121674 4.76177186,44.77360052 4.766536,44.77876582 4.78364702,44.78407517 4.79553544,44.79404144 4.79723182,44.80398306 4.8009896,44.80598437 4.80028196,44.81232676 4.80838187,44.8147796 4.82148517,44.81738395 4.82028053,44.83019175 4.82331588,44.83948982 4.83714704,44.841315 4.84411874,44.84546809 4.84394599,44.8556295 4.84998355,44.86479604 4.85676388,44.86955502 4.86128123,44.87822412 4.85432388,44.89652349 4.85757558,44.90289042 4.86863374,44.90960356 4.87108518,44.91622677 4.8865893,44.93665167 4.88136574,44.94460258 4.87427693,44.95636728 4.86048968,44.96555094 4.85308346,44.97790496 4.85256634,44.97953468 4.85186781,44.99372206 4.84249322,45.00198327 4.8367081,45.00750964 4.84540845,45.01995643 4.84411146,45.02337328 4.83989769,45.02885577 4.84194822,45.0379092 4.85410151,45.0462545 4.86074607,45.05542925 4.85359027,45.0638074 4.83583061,45.06827143 4.82915533,45.07284837 4.82781649,45.07855334 4.83046151,45.08402181 4.82959678,45.09800491 4.82502352,45.10398808 4.81478686,45.11145936 4.80403837,45.12246847 4.80383317,45.1291185 4.80413152,45.13126621 4.82857463,45.15423999 4.82871285,45.15612909 4.82409409,45.16125735 4.81183712,45.16525777 4.8102409,45.17492963 4.81168613,45.1837596 4.80585707,45.19175277 4.80587969,45.19757063 4.81220845,45.20495255 4.80320777,45.22527297 4.80163383,45.24599555 4.80884632,45.25884864 4.80998663,45.26647685 4.80961285,45.26950014 4.80948887,45.28768669 4.80049393,45.2983607 4.78154097,45.30987747 4.7622144,45.3235494 4.76083371,45.33641464 4.76104923,45.33838372 4.76334552,45.34435503 4.76771073,45.34386288 4.77374811,45.34815367 4.77255147,45.3542972 4.75599728,45.3656813 4.72582584,45.36180909 4.72311135,45.35460056 4.70331032,45.34956262 4.69802319,45.34498654 4.68012988,45.34626522 4.63855316,45.32619375 4.64317694,45.31890286 4.6338438,45.31494163 4.61579882,45.31025919 4.61699707,45.30009181 4.62291558,45.29473743 4.62159418,45.29142427 4.6118888,45.29202388 4.59859706,45.28948575 4.59134794,45.27288266 4.59849348,45.26897113 4.60530462,45.26366797 4.60531508,45.25340079 4.58480191,45.24407499 4.5610247,45.24721951 4.54255203,45.24218046 4.53625982,45.23681852 4.51811524,45.24174958 4.50559101,45.23303018 4.49078404,45.23221104 4.48313462,45.23644652 4.48891797,45.2234192 4.48606534,45.21679286 4.48132761,45.21591918 4.476933,45.21067296 4.48055542,45.19545926 4.472579,45.17989475 4.46037636,45.17536308 4.45815694,45.16887199 4.44811122,45.16196037 4.4435648,45.14217993 4.44640633,45.13249815 4.45583873,45.12536009 4.4572857,45.11889321 4.46302519,45.10199568 4.44201443,45.11168919 4.43642476,45.10945593 4.4278427,45.117509 4.42949496,45.13039273 4.41115875,45.14082946 4.39782805,45.13948437 4.37655894,45.14435963 4.37257036,45.12807293 4.39967013,45.11498443 4.39713717,45.10523632 4.38458474,45.10107033 4.37146751,45.10438434 4.35923214,45.09957225 4.36282907,45.08751525 4.35861606,45.08625192 4.35494114,45.07728238 4.3463717,45.07504488 4.34773707,45.0652487 4.36071279,45.05539235 4.37024377,45.05600494 4.37872964,45.05286546 4.38164448,45.0427975 4.37906791,45.03617458 4.35634117,45.03332893 4.35154346,45.02766 4.31808555,45.02993417 4.29968357,45.02003785 4.29111026,44.99732802 4.29878029,44.9887561 4.30731682,44.98588261 4.31323448,44.97958149 4.31436545,44.97316562 4.30114797,44.97104278 4.29422516,44.96680121 4.27941995,44.96670236 4.25658693,44.95987591 4.23523868,44.96780514 4.22385442,44.96287933 4.21657227,44.93357696 4.20485774,44.92762644 4.19004647,44.91418912 4.19168831,44.9121365 4.18432145,44.90832531 4.17947873,44.88651395 4.1661603,44.88194528 4.15663658,44.87397695 4.13689606,44.87405475 4.1179439,44.87811003 4.10842966,44.87793527 4.08790579,44.87033154 4.07756333,44.8698111 4.06930524,44.8676939 4.05685239,44.87206312 4.03890971,44.87276369 4.02873461,44.86616833 4.02520376,44.85100203 4.02004729,44.84586319 4.02858718,44.83461932 4.02125901,44.83036507 4.00908727,44.83462728 3.99860302,44.82357518 3.98959257,44.83133631 3.98492974,44.83169293 3.98145115,44.82596121 3.9871535,44.81638444 3.98188477,44.81167712 3.96732041,44.82017873 3.96318334,44.8297589 3.94554263,44.82434621 3.9444745,44.82101486 3.9368181,44.79809294 3.91802852,44.77885597 3.91752237,44.77572686 3.92433354,44.77097933 3.92491795,44.7696239 3.91365675,44.766539 3.90016631,44.76306592 3.89816504,44.75328619 3.89394309,44.75159164 3.87648653,44.75680012 3.87219056,44.75519536 3.86252733,44.74387248 3.8756356,44.73947496 3.87713813,44.73618578 3.86318298,44.7190807 3.86312762,44.71217548 3.86992028,44.70725146 3.86964774,44.69696268 3.88352915,44.69671771 3.88456326,44.69344121 3.87164707,44.67933634 3.88537341,44.65745732 3.89477809,44.64996294 3.89576609,44.64229316 3.89413972,44.6152877 3.90666232,44.61096322 3.90808444,44.6077014 3.90653997,44.59237276 3.91846593,44.58736759 3.91682073,44.58070997 3.92356688,44.57188481 3.9487739,44.57288659 3.96090595,44.55381227 3.96569168,44.53768216 3.97931816,44.51992532 3.97685158,44.51700323 3.98112661,44.51537179 3.9868601,44.50216744 3.98722191,44.47463359 3.99816299,44.4597976 4.01508223,44.45347624 4.02387624,44.44630077 4.03710323,44.44595204 4.04541872,44.43349476 4.03781265,44.42091793 4.05479488,44.41478791 4.0684402,44.40505961 4.05945332,44.39391121 4.04633101,44.39586419 4.04239308,44.39407402 4.04374938,44.38455454 4.05298035,44.37869605 4.05207497,44.37252902 4.05708949,44.36414472 4.05367698,44.35879401 4.05125959,44.33671638 4.03570617,44.32985115 4.04805864,44.31894948 4.05145166,44.3173237 4.06014404,44.32016597 4.07384193,44.32902636 4.10386084,44.33390556 4.10941995,44.33084284 4.11779265,44.32993887 4.1267519,44.33773356 4.14166453,44.32395917 4.1428677,44.3133509 4.1617005,44.3121543 4.1779905,44.31774254 4.18657907,44.29973545 4.216384,44.28903899 4.23405202,44.27505945 4.24513799,44.26807462 4.25890083,44.2644249 
       </coordinates> 
</LinearRing> 
</outerBoundaryIs> 
</Polygon>
 </Placemark>
</Document> 
</kml> 
```

我没问题，地图上显示了该功能。

但是当我读到这个文件时：

```
 <?xml version="1.0" encoding="UTF-8"?> 
<kml xmlns="http://www.opengis.net/kml/2.2">
 <Document> 
<Style id="gitesdegaule.fr"> 
<LineStyle>

                   <color>30939a9a</color>
                   <width>3</width>
                   </LineStyle>
                   <PolyStyle>
                   <color>2166738f</color>
                   </PolyStyle>
    </Style> <Placemark id="455">
 <name><![CDATA[TOTO]]></name>

               <id><![CDATA[1]]></id>
               <type><![CDATA[dep]]></type>
    <styleUrl>#gitesdegaule.fr</styleUrl> 
<Polygon> 
<outerBoundaryIs> 
<LinearRing> 
<tessellate>1</tessellate> 
<coordinates>

                              4.49078404,45.23221104 4.50559101,45.23303018 4.51811524,45.24174958 4.53625982,45.23681852 4.54255203,45.24218046 4.5610247,45.24721951 4.58480191,45.24407499 4.60531508,45.25340079 4.60530462,45.26366797 4.59849348,45.26897113 4.59134794,45.27288266 4.59859706,45.28948575 4.6118888,45.29202388 4.62159418,45.29142427 4.62291558,45.29473743 4.61699707,45.30009181 4.61579882,45.31025919 4.6338438,45.31494163 4.64317694,45.31890286 4.63855316,45.32619375 4.68012988,45.34626522 4.69802319,45.34498654 4.70331032,45.34956262 4.72311135,45.35460056 4.72582584,45.36180909 4.75599728,45.3656813 4.75702289,45.37145654 4.75884778,45.38472185 4.75485043,45.39779028 4.74478279,45.40736853 4.74314597,45.42041776 4.75995346,45.43260258 4.75994808,45.43849313 4.75553574,45.44704672 4.75493212,45.45102818 4.75693557,45.45570739 4.7385421,45.47278265 4.74308844,45.47406315 4.73818222,45.48705504 4.72182757,45.49439547 4.69999732,45.47823684 4.68192909,45.47980605 4.67767901,45.48109458 4.67114076,45.47655369 4.66218578,45.48661201 4.65416401,45.48769422 4.65060257,45.49711355 4.65390491,45.49963184 4.64955158,45.51648427 4.65078586,45.52998514 4.66164659,45.53663407 4.66533161,45.54283917 4.66649143,45.54304714 4.68517621,45.55475647 4.6874991,45.55820724 4.67575573,45.56883981 4.67092194,45.56971337 4.65858737,45.56377147 4.64927375,45.56490826 4.64815725,45.5545219 4.65940094,45.54339527 4.64470376,45.54052208 4.64316126,45.54296745 4.63600237,45.54795352 4.62579924,45.56808735 4.61485831,45.57547739 4.6028616,45.57040723 4.58711037,45.57072078 4.57059967,45.58225588 4.54726149,45.58015672 4.52157864,45.57293282 4.51407047,45.57693397 4.50477475,45.5765454 4.50352247,45.58617198 4.46781408,45.58575214 4.47451695,45.5947068 4.46084052,45.60100057 4.44987671,45.60564558 4.44706995,45.61805638 4.44148878,45.62305446 4.42244408,45.62966426 4.41028424,45.63205085 4.40885989,45.63712119 4.39261031,45.65361566 4.39603517,45.65804033 4.39255068,45.66247852 4.3659202,45.67115344 4.36873236,45.67370407 4.36589129,45.68299692 4.37344684,45.69077647 4.3655162,45.69851914 4.37271335,45.70316895 4.37513943,45.71337945 4.38478413,45.72118685 4.39124722,45.73787694 4.40292476,45.74391957 4.39755475,45.75182172 4.39067665,45.75507695 4.37327083,45.74944517 4.35916069,45.75110213 4.34910141,45.77117164 4.35828752,45.77891485 4.37644958,45.78410753 4.37561751,45.80445382 4.37938419,45.80677651 4.38784034,45.80300731 4.38028193,45.81744699 4.3824649,45.82026627 4.3760349,45.82482093 4.38056885,45.82531498 4.3836978,45.83399478 4.39060126,45.83747649 4.38308316,45.84597167 4.39061473,45.8502833 4.39614026,45.85982491 4.3944707,45.86516826 4.36109365,45.86616958 4.34246865,45.87690261 4.33693619,45.89016229 4.32622429,45.89736731 4.32322056,45.90388696 4.34621534,45.91576499 4.33758097,45.91833512 4.3460197,45.92994313 4.32172436,45.94101896 4.31198864,45.94200584 4.29391226,45.95339957 4.30057483,45.95832163 4.29776074,45.96493742 4.28882289,45.97317205 4.27574232,45.9777962 4.25897507,45.98117199 4.24804289,45.98672364 4.24383957,45.997388 4.26617258,45.99754587 4.2712853,45.99231911 4.28976261,45.99564064 4.30009571,45.988894 4.3120076,46.00512986 4.31033152,46.00801321 4.30584582,46.02159224 4.30506737,46.02147512 4.28773573,46.01835911 4.28002005,46.02176977 4.26992005,46.03338416 4.26127159,46.03685799 4.25103199,46.0500212 4.25368722,46.05245052 4.2853497,46.05344698 4.29733112,46.06345144 4.30290607,46.07213249 4.30142557,46.07846278 4.31040683,46.08171869 4.31145788,46.0948465 4.30615193,46.1003564 4.30929481,46.11000177 4.31971397,46.11681585 4.322116,46.12998191 4.33274242,46.13550455 4.36158843,46.13845866 4.36922598,46.14651748 4.38180917,46.14966139 4.40824476,46.13706117 4.41736184,46.13592104 4.42365759,46.15138722 4.43116621,46.15557089 4.4385909,46.16787887 4.43338023,46.17285317 4.41431497,46.18007191 4.40635791,46.18224208 4.39617571,46.18922136 4.39687167,46.19567029 4.42296505,46.20313716 4.4217558,46.20702499 4.40674624,46.21962227 4.3880796,46.21978856 4.38841576,46.21308383 4.37476909,46.20951204 4.36335347,46.19856286 4.37349769,46.18724607 4.37080552,46.18433353 4.35851127,46.18267989 4.34664317,46.18726115 4.33490334,46.18174376 4.32664257,46.18489355 4.31641002,46.17130522 4.31183139,46.17119605 4.30287038,46.17432518 4.29028132,46.16931733 4.28243182,46.15681573 4.25319176,46.15781746 4.24865987,46.1671075 4.25340938,46.1673434 4.26191121,46.17517459 4.25814624,46.18454654 4.24536736,46.1882266 4.22657816,46.17837125 4.22499292,46.17763185 4.21955837,46.18510216 4.20621525,46.19449358 4.18922934,46.18863859 4.18493048,46.19012441 4.18485149,46.17986756 4.18675216,46.17663264 4.17813257,46.17368734 4.14332217,46.17599711 4.13384693,46.17731681 4.13339328,46.17732134 4.13263235,46.18065206 4.10383228,46.1984425 4.08357336,46.19116265 4.06755059,46.18674835 4.05997245,46.18845829 4.04983112,46.18093362 4.03114888,46.17197294 4.02748771,46.16959259 4.01804448,46.17201903 3.98852848,46.16985709 3.97149725,46.18967203 3.97257036,46.19973103 3.96516829,46.20286498 3.93621167,46.20619593 3.91710627,46.20388412 3.90945617,46.20792595 3.89013233,46.21449068 3.89750879,46.22686917 3.89739102,46.23710923 3.90740529,46.24388292 3.90876026,46.26062214 3.9037748,46.27400779 3.89953354,46.27591448 3.88695365,46.27378885 3.87767091,46.27557179 3.86889757,46.26366199 3.85055265,46.26208952 3.80768674,46.25721468 3.80269998,46.23851001 3.7782362,46.24305649 3.76928266,46.2404248 3.77335271,46.22718653 3.7849367,46.22064142 3.79408906,46.20851082 3.78866716,46.19948924 3.79050428,46.18568938 3.80786022,46.1615952 3.79162707,46.15658542 3.7933951,46.14353339 3.80125068,46.1314201 3.79348628,46.1122032 3.80283054,46.11013832 3.82129413,46.09023944 3.80560565,46.05306065 3.81370545,46.03665803 3.81594102,46.01913548 3.82471098,46.0065995 3.82734178,46.0002135 3.83207581,45.99966552 3.83173648,45.99944288 3.82448294,45.99483109 3.82322027,45.98815825 3.80972018,45.98466241 3.80017876,45.98323532 3.79068783,45.97539525 3.78171303,45.97279197 3.76002083,45.98067522 3.75520386,45.97981592 3.75063993,45.97003044 3.74207128,45.96669191 3.70961157,45.97414024 3.70180664,45.96572392 3.70450452,45.9555492 3.69416,45.94816574 3.69389159,45.9309583 3.6940178,45.9307324 3.72135,45.92274486 3.7289913,45.91414984 3.74023306,45.90776411 3.75437076,45.88603088 3.7456285,45.88416173 3.7438064,45.87813116 3.73408393,45.87126962 3.71552426,45.87058716 3.72028165,45.86174076 3.72853037,45.86268748 3.7271815,45.85618533 3.7207617,45.85112947 3.71912414,45.85006827 3.72689162,45.83026995 3.71263083,45.8012918 3.695115,45.7947011 3.69339101,45.78863317 3.70039344,45.78355599 3.72846854,45.77601195 3.73797195,45.7677824 3.73310783,45.76194268 3.73043648,45.76035707 3.72710576,45.75557878 3.7459508,45.74117335 3.75105674,45.74685781 3.75583819,45.74660974 3.7680398,45.7286698 3.78091881,45.72467303 3.77701506,45.71953096 3.78238032,45.71165023 3.7758565,45.70017756 3.77758491,45.69056601 3.79453207,45.67347279 3.80542849,45.6560512 3.8177209,45.64669614 3.82070321,45.63740799 3.82392406,45.63214338 3.83711893,45.62701204 3.85686626,45.62499932 3.86091597,45.61553082 3.86866917,45.61323791 3.88163125,45.60369048 3.90808646,45.59668998 3.93216818,45.57936472 3.93950343,45.57179317 3.94461939,45.56275392 3.95447425,45.55582657 3.94643017,45.54340415 3.95855481,45.51379079 3.96483954,45.50321872 3.96567701,45.50056395 3.97273829,45.50013378 3.98400715,45.49506462 3.98562929,45.48618012 3.96755332,45.47155064 3.97312568,45.45939932 3.96909117,45.45331965 3.97510575,45.44826959 3.98855661,45.44636881 3.99609845,45.44958903 3.99930587,45.44723713 3.99906145,45.43719838 3.98583472,45.43283979 3.96328974,45.43751133 3.96325823,45.43643097 3.93731172,45.42998695 3.91843206,45.42132709 3.91389484,45.42224667 3.90708087,45.41295465 3.8985406,45.4098176 3.89036822,45.3936646 3.89451621,45.38376197 3.89214631,45.36985001 3.89740842,45.35708382 3.90278132,45.33869736 3.90626781,45.33324816 3.91932951,45.34180452 3.91838745,45.35436532 3.93450121,45.36169725 3.9387524,45.37139623 3.94761307,45.37405019 3.9610272,45.37027082 3.97826775,45.3756958 3.98559279,45.37157925 3.99293247,45.35616958 4.00248327,45.35599445 4.01460569,45.33363343 4.01656265,45.32823058 4.0205706,45.32819411 4.02343215,45.34497168 4.03473224,45.35038803 4.03588045,45.35375438 4.04538053,45.35566527 4.05415354,45.35219705 4.0625081,45.33957375 4.07080413,45.3360547 4.07652182,45.34187131 4.0801706,45.35552423 4.09851559,45.3595783 4.10780922,45.35480397 4.10911086,45.36179726 4.12039517,45.36837595 4.15469167,45.36621756 4.15673588,45.37298659 4.14444327,45.3841085 4.16210242,45.38890677 4.18082135,45.39170092 4.20092631,45.38222954 4.22656034,45.38972368 4.23955546,45.38499682 4.24434138,45.38527698 4.25717211,45.37168832 4.27080216,45.37492065 4.27163134,45.35976373 4.28975457,45.35907018 4.29564402,45.36403638 4.30381752,45.36283383 4.30772597,45.36443631 4.30819932,45.37098695 4.33643521,45.36615975 4.34839579,45.36045982 4.36800574,45.33711309 4.36337962,45.33748473 4.33165324,45.31847732 4.35230391,45.30416276 4.3662583,45.3012825 4.36769992,45.29606858 4.36126849,45.29186931 4.35960416,45.28536043 4.35018236,45.27770267 4.37118622,45.25988603 4.37493498,45.26194731 4.38722109,45.25757187 4.39121003,45.26361916 4.41965472,45.27540139 4.4340757,45.27470404 4.44548109,45.25954447 4.45690044,45.25345239 4.47924756,45.23791196 4.48313462,45.23644652 4.49078404,45.23221104) (4.30026176,45.41350544 4.27713607,45.41762575 4.26335345,45.4160348 4.25140772,45.42159921 4.24717129,45.4299947 4.24524238,45.43638317 4.25660925,45.44238929 4.24906181,45.45322644 4.25733862,45.46105904 4.25492061,45.46392293 4.28197317,45.46603066 4.29505632,45.46341282 4.29768513,45.45377322 4.30230182,45.45311633 4.30939514,45.43430162 4.3046026,45.41485991 4.30026176,45.41350544 
    </coordinates> 
</LinearRing>
 </outerBoundaryIs>
 </Polygon> 
</Placemark>

    </Document>
 </kml> 
```

文件已加载，但地图上未添加任何功能！我的 kml 很好，因为在 openlayers 上它可以工作！

你能帮我吗 ？

谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:25:04.447

您的第二个文件[无效](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FSO_NokiaKML2.kml)（至少坐标无效）

第[一个是](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FSO_NokiaKML1.kml)

您在这些坐标之间有一个无关的“）（”：

```
4.49078404,45.23221104) (4.30026176,45.41350544 
```

# java - 丰富的选择列表 + javascript 验证

> ID：15782372
> 
> 赞同：0
> 
> 时间：2013-04-03T08:30:19.590
> 
> 标签：java, javascript, validation, richfaces

我正在尝试将 Richfaces 组件选项列表与 javascript 验证一起使用。

我想要做的是在按下添加/删除按钮时调用一个 javascript 方法（这工作正常），但我希望能够取消它的添加或删除操作。

例如，我应该可以说：您尝试从列表中删除一个名为“A”的元素，但您不能，然后什么都不会发生。

我实际上可以删除或添加元素，但即使使用“onlistchanged”属性，我也无法中断选择列表中的添加/删除操作（例如：JS 验证显示，但元素仍被处理并移动到一个或另一个列表）。

你知道这样的事情是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:30:20.983

好吧，我找到了一种方法来做到这一点，但不使用richfaces。

我在“删除按钮”上添加了一个事件侦听器，以便它可以将全局布尔变量切换为 true。

然后使用 onlistchange 属性（不是 onlistchange** d** 因为它对应于列表更新后发生的事件（顺便说一下，文档不清楚，混淆了名称/描述......））我检查是否我要删除的值可以被删除（jQuery 在列表中找到选定的元素...）。

一定要写 onlistchange="return yourFunctionThatDoesWhatever();" ...（返回 false 将中止添加/删除效果）

[这个问题在这个论坛上至少被问过两次](https://stackoverflow.com/questions/7582943/how-to-validate-if-an-item-is-removed-from-picklist#)

jav974

# facebook - 邀请 facebook 好友加入我们的应用程序

> ID：15782376
> 
> 赞同：-2
> 
> 时间：2013-04-03T08:30:25.230
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-invite

我正在使用[facebook php sdk](https://github.com/facebook/facebook-php-sdk)并开发一个应用程序，我想`link`通过向他们发送消息来邀请一些 facebook 朋友。因此，无论我邀请谁，我都想将这些 Facebook ID 保存到我的数据库中。请提出一些解决方案来向每个人发送消息`facebook friend`并获取他的`facebbokId`. 作品更受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:14:55.597

我认为您使用 php sdk ...

通过使用下面的 PHP 代码，您可以从 facebook 获取好友列表

```
 <?php
                $facebook = new Facebook(array(
                      'appId'  => 'CLIENT_ID',
                      'secret' => 'SECRET_KEY',
                ));          
                $access_token = $facebook->getAccessToken();
                $user = $facebook->getUser();
                $result =file_get_contents('https://graph.facebook.com/'.$user.'/friends?access_token='.$access_token.'');  
                                    print_r($result);
                ?> 
```

使用 sdk 从 facebook 获取好友列表数据后。如果您想存储详细信息，请将其存储到数据库中

Javascript代码：

```
$.ajax({
                        type:'POST',                            
                        url:'/action_comes_here',
                        data:{},
                        success: function()
                        {
                            var user_ids = array('14545456','5695695456'); //
                            FB.ui({method: 'apprequests',
                                  app_id:'CLIENT_ID',
                                  message: 'TITLE',
                                  data:{},
                                  to: user_ids,   
                                },
                                function(response) { 
                                    if(response){
                                        ///SUCCESS HERE
                                    }
                                    else
                                    {
                                        ///FALIURE COMES HERE
                                    }
                                });
                            },
                            error: function(){
                                            alert("Something went wrong ... Please Try again");

                            }
                 }); 
```

谢谢萨克蒂

# cuda - 为什么编译器会报错？

> ID：15782386
> 
> 赞同：1
> 
> 时间：2013-04-03T08:30:54.820
> 
> 标签：cuda, compiler-errors, thrust

```
thrust::host_vector<int> A;
thrust::host_vector<int> B;

int rand_from_0_to_100_gen(void)
{
     return rand() % 100;
}

__host__ void generateVector(int count) {

    thrust::host_vector<int> A(count);
    thrust::generate(A.begin(),A.end(),rand_from_0_to_100_gen);

    thrust::host_vector<int> B(count);
    thrust::generate(B.begin(),B.end(),rand_from_0_to_100_gen);
}

__host__ void displayVector(int count){

    void generateVector(count);

    cout << A[1];

} 
```

在上面的代码中，为什么我不能显示向量值？它给出了错误

```
void generateVector(count); 
```

那说`incomplete is not allowed`为什么？这里有什么问题？可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:47:25.370

您在函数`generateVector`内部错误地调用了该函数`displayVector`。它应该是这样的：

```
generateVector(count); 
```

此外，您正在创建向量`A`并`B`在函数内部创建函数，该函数`generateVector`将是函数的局部变量，`thrust::generate`并将对这些局部向量进行操作。全局向量不会被修改`A`。`B`您应该删除局部向量以实现您想要的。而是要求`host_vector::resize`全局向量`A`并`B`分配内存。

最终代码应该是这样的：

```
thrust::host_vector<int> A;
thrust::host_vector<int> B;

int rand_from_0_to_100_gen(void)
{
    return rand() % 100;
}

__host__ void generateVector(int count) 
{
    A.resize(count);
    thrust::generate(A.begin(),A.end(),rand_from_0_to_100_gen);

    B.resize(count);
    thrust::generate(B.begin(),B.end(),rand_from_0_to_100_gen);
}

__host__ void displayVector(int count)
{
    generateVector(count);
    cout << A[1]<<endl;
} 
```

# android - 我如何使用（asmx）.net WebService 从 Android 上传文件

> ID：15782392
> 
> 赞同：1
> 
> 时间：2013-04-03T08:31:11.270
> 
> 标签：android, asp.net, vb.net, web-services

我已经在手机上浏览文件并上传到服务器

**我在文件上传中有问题，它给我找不到文件。**

**.Net文件上传方法（服务器端代码）**

```
Public Function UploadFiles(ByVal docs As Byte(), ByVal filename As String, ByVal UserId As Integer, ByVal PartnerId As Integer, ByVal IdeaId As Integer) As String
        'Public Function UploadFiles(ByVal doctitle As String, ByVal docdescription As String, ByVal docs As Byte(), ByVal filename As String, ByVal UserId As Integer, ByVal UserType As String, ByVal IdeaId As Integer, ByVal PartnerId As Integer) As String

        Dim NoOfDocs As Integer

        Dim iCount As Integer
        Dim sConId As String
        Dim sConId1 As String
        Dim sConId2 As String
        Dim txtTitle As eCMSLib.Component.TextBox
        Dim txtDesc As eCMSLib.Component.TextBox
        Dim Upload1 As FileStream
        Dim dirname As String
        Dim strDocTitle As String = ""
        Dim strDocDesc As String = ""
        Dim dirconsultee As String
        Dim createdirconsultee As String
        Dim ServerPath As String
        Dim ServerPath1 As String
        Dim strFilename As String
        Dim strOnlyFilename As String = ""
        Dim objDoc As New Elegant.BusinessLogicLayer.DocumentAndResponse
        Dim objIdea As New Ideas
        Dim createdir As String
        NoOfDocs = GetNumberOfUploadDocs(PartnerId)
        Try
            '---------------------------------------------------------------------------
            'Create consultation directory
            dirname = "Idea" & IdeaId
            createdir = Server.MapPath("uploaddocs")

            Dim dir As DirectoryInfo
            Dim tempdir As String
            tempdir = createdir & "\" & dirname
            dir = New DirectoryInfo(tempdir)

            If dir.Exists = True Then
            Else
                dir.Create()
            End If
            '---------------------------------------------------------------------------
            'Create the consultee directory
            dirconsultee = "Consultee" & UserId
            'UserID = Integer.Parse(Session("UID_User"))
            createdirconsultee = Server.MapPath("../uploaddocs/Idea" & IdeaId & "")

            Dim dirconsultee1 As DirectoryInfo
            Dim tempdir1 As String
            tempdir1 = createdirconsultee & "\" & dirconsultee
            dirconsultee1 = New DirectoryInfo(tempdir1)

            If dirconsultee1.Exists = True Then
            Else
                dirconsultee1.Create()
            End If
            '---------------------------------------------------------------------------
            NoOfDocs = 1
            For iCount = 0 To NoOfDocs - 1
                ServerPath = ""
                ServerPath = Server.MapPath("../uploaddocs/" & dirname & "/" & dirconsultee & "")
                ServerPath1 = dirname & "/" & dirconsultee
                Directory.SetCurrentDirectory(ServerPath)
                sConId = "m_txt_" & iCount & "_" & "UF" & iCount
                'sConId1 = doctitle(iCount)
                'sConId2 = docdescription(iCount)
                'sConId1 = doctitle
                'sConId2 = docdescription
                Dim ms As New MemoryStream(docs)
                'Dim fs As New System.IO.FileStream(dirname & "/" & dirconsultee & "/" & sConId, IO.FileMode.Create, System.IO.FileAccess.ReadWrite)
                'ms.WriteTo(fs)

                'ms.Close()
                'fs.Close()
                'fs.Dispose()
                'Upload1 = fs
                'txtTitle = CType(tbluploaddoc.FindControl(sConId1), eCMSLib.Component.TextBox)
                'txtDesc = CType(tbluploaddoc.FindControl(sConId2), eCMSLib.Component.TextBox)
                Dim fs As System.IO.FileStream
                'If sConId1 <> "" Then
                '    strDocTitle = sConId1
                'Else
                '    strDocTitle = ""
                'End If
                'If sConId2 <> "" Then
                '    strDocDesc = sConId2
                'Else
                '    strDocDesc = ""
                'End If

                If docs IsNot Nothing Then
                    'If FileFieldSelected(Upload1) = True Then

                    strFilename = sConId

                    If strFilename <> String.Empty Then
                        strOnlyFilename = System.IO.Path.GetFileName(strFilename)

                        If Not eCMSLib.Common.Operation.CommonFunctions.isValidUserDefineFile(strOnlyFilename, ".doc,.docx,.pdf,.ppt,.pptx,.pps,.gif,.jpeg,.jpg,.bmp,.htm,.html") Then
                            'lblErroMsg.Visible = True
                            Dim strErroMsg As String = "Invalid File format. You can upload only files with.doc,.docx,.pdf,.ppt,.pptx,.pps,.gif,.jpeg,.jpg,.bmp,.htm,.html extesion."
                            'Return lblErroMsg.Text
                            'Return False
                            Context.Response.Write("{""Uploaddocs"":" & New JavaScriptSerializer().Serialize(strErroMsg) & "}")
                        End If

                        ServerPath = ServerPath & "/" & strOnlyFilename
                        ServerPath1 = dirname & "/" & dirconsultee & "/" & strOnlyFilename

                        'If Upload1.PostedFile.ContentLength > 15000000 Then
                        '    'lblErroMsg.Visible = True
                        '    Dim strErroMsg As String = "File size is too large. Please try again."
                        '    Context.Response.Write("{""Uploaddocs"":" & New JavaScriptSerializer().Serialize(strErroMsg) & "}")
                        '    'Return lblErroMsg.Text
                        '    'Exit Function
                        'End If
                        Dim bln As Boolean
                        bln = objDoc.IsFileExist(ServerPath1, UserId)

                        If bln = True Then
                            'lblErroMsg.Visible = True
                            Dim strErroMsg As String = "This file " & strOnlyFilename & "has already been uploaded."
                            Context.Response.Write("{""Uploaddocs"":" & New JavaScriptSerializer().Serialize(strErroMsg) & "}")
                            ' Return lblErroMsg.Text
                            'Exit Function
                        End If

                        '--------------------------------------------------------------------------------------
                        Dim BLNUpload As Boolean = ValidationForUpload(UserId, IdeaId)
                        If BLNUpload = False Then
                            Dim UploadedFile As Integer
                            Dim objDocs1 As New DocumentAndResponse
                            UploadedFile = objDocs1.CountUplodedFileForIdeaUser(UserId, IdeaId)
                            'Dim strErroMsg As String = "Your documents " & UploadedFile & "  have been uploaded ."
                            'Return lblErroMsg.Text
                            'Exit Function
                        End If
                        '--------------------------------------------------------------------------------------

                        'eCMSLib.Common.Operation.CommonFunctions.UploadFile(Upload1, ServerPath, 15000000)
                        fs = New System.IO.FileStream(dirname & "/" & dirconsultee & "/" & sConId, IO.FileMode.Create, System.IO.FileAccess.ReadWrite)
                        ms.WriteTo(fs)

                        ms.Close()
                        fs.Close()
                        fs.Dispose()
                    End If

                    '-------------------------------------------------------------------------------------------
                    'Insert Data in  database for upload documents  track.
                    Dim sPath As String
                    Dim DocRefNumber As String
                    Dim UploadFileContForUser As Integer
                    Dim objDocs2 As New DocumentAndResponse
                    UploadFileContForUser = objDocs2.CountUplodedFileForIdeaUser(UserId, IdeaId)

                    If iCount = 0 Then
                        DocRefNumber = IdeaId & "-" & UserId & "-" & Date.Now.Day & "-" & Date.Now.Month & "-" & Date.Now.Year & "-" & UploadFileContForUser + iCount + 1
                    Else
                        DocRefNumber = IdeaId & "-" & UserId & "-" & Date.Now.Day & "-" & Date.Now.Month & "-" & Date.Now.Year & "-" & UploadFileContForUser + 1
                    End If

                    sPath = dirname & "/" & dirconsultee & "/" & strOnlyFilename

                    Dim oInfo As Hashtable = New Hashtable
                    oInfo.Add("n_fkIdeaId", IdeaId)
                    oInfo.Add("t_DocPath", sPath)
                    oInfo.Add("n_UplodedTime", "getdate()")
                    oInfo.Add("n_fkUserID", UserId)
                    oInfo.Add("t_UserType", "Consultee")
                    oInfo.Add("t_DocType", System.IO.Path.GetExtension(strOnlyFilename))
                    oInfo.Add("t_DocSize", fs.Length)
                    oInfo.Add("t_DocRefNumber", DocRefNumber)
                    oInfo.Add("t_DocTitle", strDocTitle)
                    oInfo.Add("t_DocDesc", strDocDesc)
                    objDoc.AddIdeaDocument(oInfo)

                    '-------------------------------------------------------------------------------------------
                    'End If
                End If
            Next
        Catch ex As Exception
            ''Throw ex
            objIdea.DeleteIdea(IdeaId, PartnerId) 'Added by Pinki to resolve the issue when file is invalid - (28 apr 2011)  
        End Try
        Return String.Empty
    End Function
    Public Function GetNumberOfUploadDocs(ByVal PartnerID As Integer) As Integer
        Dim str As String
        Dim Number As Integer
        str = "SELECT ISNULL(paravaluedtl,'0') paravaluedtl from tblparameterdtl  where fkparameterid='NoOFUpload_SubmittingIdea' and fkConsultPartnerID= " & PartnerID & "  "
        Number = eCMSLib.Common.Operation.DatabaseIntraction.GetSingleRowColumnValue(str)
        Return Number
    End Function
    Public Function GetAllowUploadIdeaDocs(ByVal PartnerID As Integer) As String
        Dim str As String
        Dim strAllow As String
        str = "SELECT paravaluedtl from tblparameterdtl  where fkparameterid='EnableUpload_SubmittingIdea' and fkConsultPartnerID= " & PartnerID & "  "
        strAllow = eCMSLib.Common.Operation.DatabaseIntraction.GetSingleRowColumnValue(str)
        Return strAllow
    End Function
    Public Function FileFieldSelected(ByVal FileField As System.Web.UI.HtmlControls.HtmlInputFile) As Boolean
        ' Returns a True if the passed
        ' FileField has had a user post a file
        If FileField.PostedFile Is Nothing Then Return False
        If FileField.PostedFile.ContentLength = 0 Then Return False
        Return True
    End Function
    Public Function ValidationForUpload(ByVal UserID As Integer, ByVal IdeaID As Integer) As Boolean
        Dim objUserDoc As New DocumentAndResponse
        Dim bln As Boolean
        bln = objUserDoc.GetFileUploadCountForIdeaUser(UserID, IdeaID, Session("ConsultPartner"))
        Return bln
    End Function 
```

**上传安卓方法**

```
 /** android File upload start */
    public static String doFileUpload(String path, String URL) {

        final DataOutputStream dos;

        String exiting_file_path = path;

        Log.d("d file path--->", "" + path);

        String boundary = "*****";
        String twohypens = "--";
        String lineend = "\r\n";
        int maxBufferSize = 1 * 1024 * 1024;
        int buferSize;
        int bytesRead;          
        String url_string = URL;

        try {
            Log.d("Debug", "Start Uploading");
            FileInputStream fileInStream = new FileInputStream(
                    exiting_file_path);
            URL url = new URL(url_string);
            httpUrlConn = (HttpURLConnection) url.openConnection();

            httpUrlConn.setDoInput(true);
            httpUrlConn.setDoOutput(true);
            httpUrlConn.setUseCaches(false);
            httpUrlConn.setRequestMethod("POST");
            httpUrlConn.setRequestProperty("connection", "Keep-Alive");
            httpUrlConn.setRequestProperty("content-type",
                    "multipart/form-data;boundary=" + boundary);

            httpUrlConn.setRequestProperty("UserId", "" + SoapParsar.UserID);
            httpUrlConn.setRequestProperty("PartnerId", ""
                    + SoapParsar.PartnerID);
            httpUrlConn.setRequestProperty("IdeaId", "" + 1400);
            httpUrlConn.setRequestProperty("Path", "file://" + path);

            dos = new DataOutputStream(httpUrlConn.getOutputStream());

            dos.writeBytes(twohypens + boundary + lineend);
            dos.writeBytes("content-disposition:form-data; name=\"upload_file\"; filename=\""
                    + exiting_file_path + "\"" + lineend);
            dos.writeBytes(lineend);

            int buferAvailable = fileInStream.available();
            buferSize = Math.min(buferAvailable, maxBufferSize);
            final byte[] buffer = new byte[buferSize];

            bytesRead = fileInStream.read(buffer, 0, buferSize);
            // -------------------
            if (isFromCamera) {
                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                Log.d("bit map hight", "--->" + resizedBitmap.getHeight());
                Log.d("bit map width", "--->" + resizedBitmap.getWidth());
                resizedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray();

                dos.write(byteArray, 0, byteArray.length);
            } else {
                while (bytesRead > 0) {
                    dos.write(buffer, 0, buferSize);
                    buferAvailable = fileInStream.available();
                    buferSize = Math.min(buferAvailable, maxBufferSize);
                    bytesRead = fileInStream.read(buffer, 0, buferSize);
                }
            }
            // ---------------

            dos.writeBytes(lineend);
            dos.writeBytes(twohypens + boundary + twohypens + lineend);
            fileInStream.close();
            dos.flush();
            dos.close();

        } catch (FileNotFoundException e) {

            e.printStackTrace();
        } catch (MalformedURLException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }

        try {
            DataInputStream inStream = new DataInputStream(
                    httpUrlConn.getInputStream());
            STR1 = inStream.readLine();
            while ((STRRRR = inStream.readLine()) != null) {
                Log.d("Debug", "Server Response " + STRRRR);
            }
            inStream.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
        /** in STRRRR you get name of photo */

        Log.d("File Uploded--->", "" + STR1);

        return STR1;
    } 
```

按钮上传点击代码

```
 btnPost.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                String title = ni_title.getText().toString();
                String detail = ni_detail.getText().toString();
                String tag = ni_tag.getText().toString();
                String directorate = ni_directorate.getText().toString();
                String filepath = ni_filepath.getText().toString();

                Log.d("local file path", "" + path + "/" + filepath);

                boolean post_idea = true;

                if (title.equalsIgnoreCase("")) {
                    ni_title.setError("Enter Title");
                    post_idea = false;
                }

                if (detail.equalsIgnoreCase("")) {
                    ni_detail.setError("Enter Descrebtion");
                    post_idea = false;
                }

                if (tag.equalsIgnoreCase("")) {
                    ni_tag.setError("Enter Tag");
                    post_idea = false;
                }

                if (directorate.equalsIgnoreCase("")) {
                    ni_directorate.setError("Enter Directorate");
                    post_idea = false;
                }

                // if(filepath.equalsIgnoreCase("")){
                // ni_filepath.setError("select file");
                // }
                if (!Select_c) {
                    Toast.makeText(add_new_idea.this, "Select Category",
                            Toast.LENGTH_SHORT).show();
                    post_idea = false;
                }

                if (post_idea) {

                    try {
                        General_class.arrayPost.clear();

                        General_class.arrayPost.add(new BasicNameValuePair(
                                "IdeaId", "0"));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "ideaTitle", "" + title));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "ideadescription", "" + detail));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "SessionId", "0"));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "UserID", "" + SoapParsar.UserID));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "UserType", "" + SoapParsar.Usertype));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "emailid", "dhaval@elegantmicroweb.com"));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "PartnerID", "" + SoapParsar.PartnerID));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "tags", "" + tag));
                        General_class.arrayPost.add(new BasicNameValuePair(
                                "categoryids", "" + selected));
                        /*
                         * General_class.arrayPost.add(new BasicNameValuePair(
                         * "categoryids", "" + selected));
                         */
                        // ni_filepath

                        String para = "?IdeaId=0&ideaTitle=" + title
                                + "&ideadescription=" + detail
                                + "&SessionId=0&UserID=" + SoapParsar.UserID
                                + "&emailid=&UserType=" + SoapParsar.Usertype
                                + "&PartnerID=" + SoapParsar.PartnerID
                                + "&tags=" + tag + "&categoryids=" + selected;

                        // String Res = General_class
                        // .Call_Http_URL_PostMethod(SoapParsar.BASEURL_LOGIN
                        // + "/AddEditIdea");

                        String URL = SoapParsar.BASEURL_LOGIN + "/AddEditIdea"
                                + para;
                        URL = General_class.replaceSpace(URL);
                        Log.e("URL--->", "" + URL);
                        String Res = General_class.GETMethod(URL);
                        Log.e("post idea-->", "" + Res);

                        /*
                         * General_class.doFileUpload(ni_filepath.getText()
                         * .toString(), SoapParsar.BASEURL_LOGIN +
                         * "/UploadFiles");
                         */
                    /*  
                        General_class.doFileUpload("" + path + "/" +ni_filepath.getText().toString(),
                                  SoapParsar.BASEURL_LOGIN + "/UploadFiles");
                        */

                    } catch (Exception e) {
                        // TODO: handle exception
                        e.printStackTrace();
                    }

                      General_class.doFileUpload(path + "/" +
                      ni_filepath.getText().toString(),
                      SoapParsar.BASEURL_LOGIN + "/UploadFiles?UserId=" +
                      SoapParsar.UserID + "&PartnerId=" + SoapParsar.PartnerID
                      + "&IdeaId=0&filename="
                      +ni_filepath.getText().toString());   

                    Log.e("path---->111-->", "" + path);

                    /* General_class.doFileUpload("" + path + "/" +ni_filepath.getText().toString(),
                      SoapParsar.BASEURL_LOGIN + "/UploadFiles");*/

                    // General_class.doFileUpload(path + "/"+
                    // ni_filepath.getText().toString(),SoapParsar.BASEURL_LOGIN
                    // + "?op=UploadFiles");

                } else {
                    Toast.makeText(add_new_idea.this, "enter all details",
                            Toast.LENGTH_SHORT).show();
                }
            }
        }); 
```

错误日志：

```
URL--->(21331): http://10.0.0.230:81/samplewebservice/webservice.asmx/AddEditIdea?IdeaId=0&ideaTitle=kihgtff&ideadescription=bhhhjhhb&SessionId=0&UserID=430&emailid=&UserType=Consultee&PartnerID=9&tags=%20&categoryids=17

04-01 18:07:38.476: D/d file path--->(21331): /mnt/sdcard/Aaa.JPG
04-01 18:07:38.476: D/Debug(21331): Start Uploading
04-01 18:07:38.726: W/System.err(21331): java.io.FileNotFoundException: `http://10.0.0.230:81/samplewebservice/webservice.asmx/UploadFiles?UserId=430&PartnerId=9&IdeaId=0&filename=Aaa.JPG`
04-01 18:07:38.750: W/System.err(21331):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:521)
04-01 18:07:38.750: W/System.err(21331):    at com.idea_mobile.General_class.doFileUpload(General_class.java:640)
04-01 18:07:38.750: W/System.err(21331):    at com.idea_mobile.add_new_idea$2.onClick(add_new_idea.java:238)
04-01 18:07:38.750: W/System.err(21331):    at android.view.View.performClick(View.java:2485)
04-01 18:07:38.750: W/System.err(21331):    at android.view.View$PerformClick.run(View.java:9080)
04-01 18:07:38.750: W/System.err(21331):    at android.os.Handler.handleCallback(Handler.java:587)
04-01 18:07:38.750: W/System.err(21331):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-01 18:07:38.750: W/System.err(21331):    at android.os.Looper.loop(Looper.java:130)
04-01 18:07:38.750: W/System.err(21331):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-01 18:07:38.750: W/System.err(21331):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 18:07:38.750: W/System.err(21331):    at java.lang.reflect.Method.invoke(Method.java:507)
04-01 18:07:38.750: W/System.err(21331):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-01 18:07:38.750: W/System.err(21331):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-01 18:07:38.750: W/System.err(21331):    at dalvik.system.NativeStart.main(Native Method)
04-01 18:07:38.750: D/File Uploded--->(21331): null
04-01 18:07:38.750: E/path---->111-->(21331): /mnt/sdcard 
```

它给我的文件在这一行没有找到：

```
DataInputStream inStream = new DataInputStream(
                    httpUrlConn.getInputStream()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:51:42.547

不要使用客户端来读取文件，这似乎是你想要做的。

就我个人而言，我的上传方法签名类似于：

```
//Server
public void UploadFile(bytes[] file, string name)
{
  //Store the BLOB object
}
//Client
public void SendFile()
{
  var bytes = File.ReadAllBytes("Filename");
  UploadFile(bytes, new FileInfo("Filename").Name);
} 
```

请注意，您已经完全标记了您的问题，`C#`这就是我给出的答案，如果您需要转换它，请使用[在线转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)。

# android - 从远程服务器检索用于 android 的 blob 数据

> ID：15782395
> 
> 赞同：1
> 
> 时间：2013-04-03T08:31:24.773
> 
> 标签：android, mysql

这就是问题所在：我正在尝试从服务器上为我在 android 上的应用程序检索 blob 图像。第一个问题是 doInBackground 返回字符串但我想返回位图。我也不确定“bitmapImg =BitmapFactory.decodeStream(inputStream);” 行是正确的。请帮助，在此先感谢。

```
 class blobConnect extends AsyncTask<Boolean, String, String> {

@Override
protected String doInBackground(Boolean... params) {
String result = null;
InputStream inputStream = null;
Bitmap bitmapImg = null;
//convert response to string
try {

// http post
HttpClient httpclient = new DefaultHttpClient();
HttpGet httppost = new HttpGet("http://x.x.x.x/android_connect/img.php");
HttpResponse response = httpclient.execute(httppost);
HttpEntity httpEntity = response.getEntity();
inputStream= httpEntity.getContent();
if (response.getStatusLine().getStatusCode() != 200) {
Log.d("MyApp", "Server encountered an error");
}
bitmapImg =BitmapFactory.decodeStream(inputStream);
Log.d("test", bitmapImg);
} catch (Exception e) {
Log.e("log_tag", "Error converting result " + e.toString());
}
return bitmapImg;
}
}
} 
```

# netbeans - 更改 netbeans 颜色

> ID：15782397
> 
> 赞同：1
> 
> 时间：2013-04-03T08:31:44.400
> 
> 标签：netbeans, fonts

我正在尝试在 Ubuntu 12.04 上设置 netbeans 7.3。我的问题是项目窗口中字体的颜色和背景都是白色的。当我选择它/单击它时，我只能看到一些东西。如何更改 netbeans 7.3 中的字体颜色或背景颜色？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:44:05.187

打开你的netbeans，

工具->选项

选择“字体和颜色”选项卡，然后您可以更改颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T15:52:46.470

您可以通过打开带有后缀的IDE来更改“LookAndFeels”（进入netbeans-7.3.1目录）

./bin/netbeans --laf 金属

或者您更改 ./etc/netbeans.conf 中的设置在这里您将“--laf javax.swing.plaf.metal.MetalLookAndFeel”添加到“netbeans_default_options”

有关 LookAndFeels 的更多信息：[http ://wiki.netbeans.org/NBLookAndFeels](http://wiki.netbeans.org/NBLookAndFeels)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:46:39.830

我们在 Ubuntu 上看到一些字体问题。怀疑是JDK问题。请参阅[https://netbeans.org/bugzilla/show_bug.cgi?id=221778](https://netbeans.org/bugzilla/show_bug.cgi?id=221778)，这听起来与您的不完全相同。你能在NB上提交一个错误吗？你能在 NB bug DB 中提交一个 bug 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-09T16:42:25.623

Netbeans 没有正确使用 GTK 主题。十多年来，更改项目窗口（以及除编辑器之外的任何其他窗口）的背景颜色一直是一个持续存在的问题。有些人提到使用 --laf 更改外观，但这意味着您必须创建自定义外观来更改背景颜色，这可能比仅修改 Netbeans 源代码和自己修改颜色更耗时。

对此有几个问题悬而未决。多年来，它们不时被创建，但在没有人真正解决问题的情况下被关闭。

# c# - 如果本地人在超出范围后被一个匿名函数引用，他们会发生什么？

> ID：15782402
> 
> 赞同：2
> 
> 时间：2013-04-03T08:31:53.307
> 
> 标签：c#, scope, anonymous-function

考虑这个人为的例子：

```
public static class Test {

    private static List<Action> actions = new List<Action>();
    private static Int32 _foo = 123;

    public static void Foo() {

        Int32       foo = _foo += 123;
        Object      bar = new Object();
        IDisposable baz = GetExpensiveObject();

        Action callback = new Action(delegate() {

            DoSomething( foo, bar, baz );

            baz.Dispose();
        });

        foo = 456;
        bar = new Object();

        actions.Add( callback );
    }

    public static void Main() {

        Foo();
        Foo();

        foreach(Action a in actions) a();
    }
} 
```

看`Main`，假设`Foo`调用了两次，然后执行`actions`（到现在，2个实例）的内容，`Action`变量的状态是什么？`foo``bar``baz``callback`

如果`callback`从不被调用，将`baz` *永远*被处置（因为包含在`callback`内的引用`actions`？），那么`actions.Clear()`被调用的东西会`baz`被处置吗？

（我不在一台装有编译器或 IDE 的计算机上供我测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:51:49.537

编译器将重写匿名方法，以保存*对堆上*与本地范围相同的内存区域的引用。垃圾收集器将发现此引用处于活动状态，并且在匿名方法也被收集之前不会对目标进行垃圾收集。

但是...如果您不是在堆上分配，而是在可能被新方法调用覆盖的堆栈上分配怎么办？;)

```
private static void Main(String[] args) {
    var rng = CreateRNG();
    Console.WriteLine(rng());
    Console.WriteLine(rng());
    Console.ReadLine();
}

private static unsafe Func<Int32> CreateRNG() {
    var v = stackalloc Int32[1];
    v[0] = 4;
    return () => v[0];
} 
```

此代码第一次调用打印 4，第二次打印半随机数。

真正的代码，使用 Reflector 提取并手动清理，并重命名方法以便编译（编译器在自动生成的方法名称中使用 <> 等特殊字符）：

```
private static unsafe Func<Int32> CreateRNG() {
    Int32* numPtr = stackalloc Int32[1];

    var class2 = new __c__DisplayClass1();
    class2.v = numPtr;
    class2.v[0] = 4;
    return new Func<Int32>(class2._CreateRNG_b__0);
}

[CompilerGenerated]
public sealed class __c__DisplayClass1 {
    public unsafe Int32* v;

    public unsafe Int32 _CreateRNG_b__0() {
        return v[0];
    }
} 
```

这表明编译器将匿名方法重写为一个新函数，在这种情况下，在一个新类中保存任何引用的本地值。如果不需要保留本地引用，则不需要该类。

而且我还可以猜测第一次调用有效，因为我们调用返回的`Func<Int32>`并且它很容易读取值。方法体很小，大概可以内联。值 4 被传递给，并且该方法调用可能会覆盖堆栈（或反过来`Console.WriteLine`的方法调用），从而更改指针指向的值。`Console.WriteLine`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:29:44.630

好吧，提醒一下，如果在匿名方法中使用局部变量的生命周期，它们的生命周期将会延长。这并不意味着在创建匿名方法时会复制变量的值。所以每次都会用“456”和第二个创建的对象调用“DoSomething”。

如果您创建一个新的 WinForms-Project，您可以检查它，在表单上放置一个新按钮并添加以下代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        int i = 123;

        this.button1.Click += (Lsender, Le) => { MessageBox.Show(i.ToString()); };

        i = 456;
    } 
```

请注意这里的引用类型，因为如果你要写

```
{
private static Foo(object value)
{
    object bar = value;
    //...
}

private static void Main()
{
    object obj = new object();

    Foo(obj);
    Foo(obj);

    //...
} 
```

}

在这种情况下，每个回调都有自己的变量“bar”，但它们中的每一个都引用堆内存中的同一个对象。

# jquery - 在jQuery中获取列位置

> ID：15782403
> 
> 赞同：0
> 
> 时间：2013-04-03T08:31:54.987
> 
> 标签：jquery, html-table

例子：

```
<table>
  <tr>
     <th>Bacon</th>
     <th>Tuna</th>
     <th>Padas</th>
     <th>Another</th>
     <th>Name</th>
    </tr>
 </table> 
```

页面加载后如何获取列位置

```
$(document).ready(function() { 
   bla..bla
}); 
```

输出将是`bacon = 0, tuna = 1 padas = 2`等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:37:19.703

```
$(function() {
    var columns = new Array();
    $('table tr th').each(function(idx) {
        columns[idx] = $(this).text().toLowerCase();
    });

    // do what you need to do with your columns array here.  eg:
    for(var i = 0;i < columns.length;i++)
     document.write(columns[i] + ',');

}); 
```

**这里的例子**：http : [//jsfiddle.net/3Nzhu/1/](http://jsfiddle.net/3Nzhu/1/)

**注意**：你应该给你的表一个 id 并将上面的选择器更改为 '#mytableid tr th'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:38:29.967

你可以使用`map`：

```
var mapping = {};

$('table th').map(function(elem, index) {
    mapping[$(elem).text().toLowerCase()] = index;
}); 
```

尽管这完全取决于您要如何处理这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:39:08.603

```
$(document).ready(function(){
    $counter = -1;
    $("table th").each(function(){
       document.write($(this).text() + " = " + ++$counter);
    });
}); 
```

请享用 ：）

# c++ - 什么是“错误 C2061：语法错误：标识符”？

> ID：15782405
> 
> 赞同：11
> 
> 时间：2013-04-03T08:32:01.673
> 
> 标签：c++

当我编译有一个错误调用“错误C2061：语法错误：标识符'Player'”

我无法弄清楚我的代码有什么问题。这是我的代码

> ```
> #include "Platform.h"
> #include "Player.h"
> class Collision
> {
> public:
>   Collision(void);
>   ~Collision(void);
>   static bool IsCollision(Player &player, Platform& platform);
> }; 
> ```

“IsCollision”方法中存在错误。

播放器.h

```
#include <SFML/Graphics.hpp>
#include "rapidxml.hpp"
#include <fstream>
#include <iostream>
#include "Collision.h"
using namespace rapidxml;
class Player
{
private:
    sf::Texture playerTexture;
    sf::Sprite playerSprite;
    sf::Vector2u position;
    sf::Vector2u source;
    sf::Vector2u size;
    int frameCounter, switchFrame, frameSpeed;
    int walkSpriteWidth;
    float velocity;
    bool isWalk;
    bool isStand;
    bool isFaceRight;

public:
    Player(void);
    ~Player(void);

    void Init();
    void Draw(sf::RenderWindow *window);
    void MoveForward();
    void MoveBackward();
    void Update(sf::Clock *clock);
    void SetSourceY(int value);
    void SetWalk(bool value);
    void SetFacing(std::string value);
    void SetStand(bool value);
    void Stand();
    std::string GetStatus();
    void PrintStatus();
    sf::Vector2f GetPosition();
    int GetWidth();
    int GetHeight();
}; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T08:37:11.730

您有一个循环包含依赖项。Collision.h 包括 Player.h，反之亦然。`#include "Collision.h"`最简单的解决方案是从中删除`Player.h`，因为声明`Collision`中不需要该类。`Player`除此之外，看起来你的一些包含`Collision.h`可以被前向声明替换：

```
// forward declarations
class Player;
class Platform;

class Collision
{
public:
  Collision(void);
  ~Collision(void);
  static bool IsCollision(Player &player, Platform& platform);
}; 
```

然后，您可以将包含在`Collision`的实现文件中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T08:37:58.277

这是一个很常见的错误——你有循环包含依赖。

查看您的代码，您应该替换`#include "Player.h"`为`class Player;`in `Collision.h`。这称为“前向声明”，将打破循环依赖。

* * *

此外，最好添加包含警卫，例如：

```
#ifndef MY_PLAYER_CLASS
#define MY_PLAYER_CLASS

...

#endif 
```

这应该为您编写的每个标题完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-08T16:09:06.090

循环依赖，或者您正在为 C++ 代码使用 C 编译器

# namespaces - 是否可以强制 T4 运行时模板的底层类没有命名空间？

> ID：15782406
> 
> 赞同：0
> 
> 时间：2013-04-03T08:32:03.030
> 
> 标签：namespaces, code-generation, t4, global-namespace

我有一个 T4 运行时模板，我希望这个模板的底层类没有指定命名空间（即在全局命名空间中）。

我知道我可以使用模板文件上的自定义工具命名空间属性为生成的类设置命名空间，但是当将此留空时，默认命名空间是根据项目结构中的模板位置设置的。有没有办法覆盖这个默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:53:21.013

恐怕不行，不行。我们总是生成命名空间语句，除了在 C# 中省略之外，没有办法指定全局命名空间。

# java - JCombobox 始终创建 Private 而不是 public

> ID：15782408
> 
> 赞同：0
> 
> 时间：2013-04-03T08:32:15.690
> 
> 标签：java, swing, ide, jcombobox

只是一个小问题，我在 netbeans 的设计视图中创建 JCombobox 并将其链接到另一个从数据库调用数据的类时遇到问题，

JComboBox 始终作为私有方法创建，因此在其他类中看不到它的变量，因此它将从数据库中获取数据。

只是一个小问题，有没有一种方法可以通过简单地对其进行编码然后在设计视图中编辑它的位置来创建一个 JCombobox？似乎当我编码它时，它没有显示，所以我可以编辑它的位置。

如果我没有清楚地解释它，请告诉我，以便我可以向您展示代码示例。但现在这只是一个基本问题，我认为我不需要显示代码。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:36:34.653

只需制作一个公共吸气剂：

```
public JComboBox getComboBox() {
    return comboBox1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:41:07.570

您应该避免使字段和 UI 组件对应用程序的其他部分可见，而这些部分不应修改它们。这些为您的应用程序打开了在预期流程之外进行修改的可能性。

相反，提供允许应用程序的其他部分向其提供所需数据的方法，或者使用侦听器样式接口（观察者模式）来了解数据何时更改/加载并从类本身更新组合框

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:06:18.300

以下是使用 Netbeans 7.3 提供对 JComboBox 的公共访问的方法。请遵循步骤 1、2 和 3。请记住：使用 Netbeans 一切皆有可能！这是最好的IDE！（我不为 Oracle 工作。:-)）

还是不建议公开。最好使用类似的访问器`public JComboBox getMyCombo()`，并保持 JComboBox 私有，就像这里建议的其他人一样。这样做的原因是你让你的类更容易修改。另一个使用它的类不需要知道变量的实际名称，只需要知道它的公共方法。

您还可以避免获取整个 JComboBox 组件，而只获取选定的项目或索引，您可以在声明 JComboBox 的类中为这些组件安排访问器（getter），具体取决于您在做什么。

![在此处输入图像描述](https://i.stack.imgur.com/LMI9W.png)

# php - 日期比较不起作用

> ID：15782413
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:32:32.583
> 
> 标签：php, validation, date

在php中我想比较两个日期的格式`m-d-Y`

所以我尝试了以下代码

```
$strdte=trim($_REQUEST['stdate']);
$enddte=trim($_REQUEST['enddate']);

$today_time = $strdte;
$expire_time = $enddte;

if ($expire_time < $today_time) 
{
print '<script type="text/javascript">';print 'window.onload = function(){';
print 'alert("You cannot have end date before startdate")';
print '};';print '</script>';  
} 
```

但问题是它有时有效，有时无效。谁能告诉我这个问题的原因是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:49:09.540

检查日期格式，如果它是像'04-03-2013'这样的字符串格式，则不会直接比较。您需要将其转换为 strtotime(time foramt) 这将为您提供第二个字符串，然后您可以进行比较。

```
strtotime($expire_time) < strtotime($today_time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:55:54.337

我会将您的日期转换为[DateTime](http://php.net/manual/fr/class.datetime.php)对象，然后使用日期的时间戳进行比较。与字符串进行日期比较不是一个好主意。这看起来类似于：

```
$start = DateTime($format,$_REQUEST['stdate']);
$end = DateTime($format,$_REQUEST['enddate']);

if ($end->getTimestamp() < $start->getTimestamp())
{
     print '<script type="text/javascript">';print 'window.onload = function(){';
     print 'alert("You cannot have end date before startdate")';
     print '};';print '</script>';  
} 
```

# javascript - 使用 AJAX 将 JavaScript 数组发布到 asp.net MVC 控制器

> ID：15782417
> 
> 赞同：21
> 
> 时间：2013-04-03T08:32:37.337
> 
> 标签：javascript, ajax, asp.net-mvc, jquery

我的控制器：

```
[HttpPost]
public ActionResult AddUsers(int projectId, int[] useraccountIds)
{
    ...
} 
```

我想通过 AJAX 将参数发布到控制器。通过`int projectId`不是问题，但我无法发布`int[]`.

我的 JavaScript 代码：

```
function sendForm(projectId, target) {
    $.ajax({
        traditional: true,
        url: target,
        type: "POST",
        data: { projectId: projectId, useraccountIds: new Array(1, 2, 3) },
        success: ajaxOnSuccess,
        error: function (jqXHR, exception) {
            alert('Error message.');
        }
    });
} 
```

我用一个测试数组尝试过，但没有成功。:(我也尝试过设置`traditional: true`，或者`contentType: 'application/json; charset=utf-8'`也没有成功...

发布到我的`int[] useraccountIds`控制器的内容始终为空。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-03T08:35:02.883

您可以定义一个视图模型：

```
public class AddUserViewModel
{
    public int ProjectId { get; set; }
    public int[] userAccountIds { get; set; }
} 
```

然后调整您的控制器操作以将此视图模型作为参数：

```
[HttpPost]
public ActionResult AddUsers(AddUserViewModel model)
{
    ...
} 
```

最后调用它：

```
function sendForm(projectId, target) {
    $.ajax({
        url: target,
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ 
            projectId: projectId, 
            userAccountIds: [1, 2, 3] 
        }),
        success: ajaxOnSuccess,
        error: function (jqXHR, exception) {
            alert('Error message.');
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-07T14:59:12.427

在 JS 中：

```
var myArray = new Array();
myArray.push(2);
myArray.push(3);
$.ajax({
            type: "POST",
            url: '/MyController/MyAction',
            data: { 'myArray': myArray.join() },
            success: refreshPage
        }); 
```

在 MVC/C# 中：

```
public PartialViewResult MyAction(string myArray)
{
   var myArrayInt = myArray.Split(',').Select(x=>Int32.Parse(x)).ToArray();
   //My Action Code Here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-27T10:34:54.557

使用 $.Ajax()，您可以轻松地将数据从 javascript 获取到 MVC 中的 Controller。

一样，

```
var uname = 'John Doe';

$.ajax({

        url: "/Main/getRequestID",  // This is path of your Controller with Action Result.
        dataType: "json",           // Data Type for sending the data

        data: {                     // Data that will be passed to Controller
            'my_name': uname,     // assign data like key-value pair       
             // 'my_name'  like fields in quote is same with parameter in action Result
        },

        type: "POST",               // Type of Request
        contentType: "application/json; charset=utf-8", //Optional to specify Content Type.

        success: function (data) { // This function is executed when this request is succeed.
                alert(data);
        },

        error: function (data) {
                alert("Error");   // This function is executed when error occurred.
        }
)}; 
```

然后，在控制器端，

```
public ActionResult getRequestID(String my_name)
{

    MYDBModel myTable = new Models.MYDBModel();
    myTable.FBUserName = my_name;
    db.MYDBModel.Add(myTable);
    db.SaveChanges();              // db object of our DbContext.cs
    //return RedirectToAction(“Index”);   // After that you can redirect to some pages…
    return Json(true, JsonRequestBehavior.AllowGet);    // Or you can get that data back after inserting into database.. This json displays all the details to our view as well.
} 
```

参考。 [将数据从 Java Script 发送到 MVC 中的控制器](http://dotnetternikhil.blogspot.in/2014/12/send-data-from-java-script-to.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:41:01.367

如果要将数组传递给 mvc 引擎，请多次发送输入。将您的代码更改为以下内容：

```
function sendForm(projectId, target) {
var useraccountIds = new Array(1, 2, 3);
var data = { projectId: projectId };
for (var i = 0; i < useraccountIds.length; i++) {
  $.extend(true, data, {useraccountIds: useraccountIds[i]});
}
$.ajax({
    traditional: true,
    url: target,
    type: "POST",
    data: data,
    success: ajaxOnSuccess,
    error: function (jqXHR, exception) {
        alert('Error message.');
    }
}); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:50:21.287

*将可序列化属性放在类上。然后它将尝试将您传递的 javascript 对象转换为 C# 类。*

在 JS 中：

```
{
   ProjectId = 0, 
   userAccountIds = []
}

// C#
[Serializable] 
public class AddUserViewModel
{
    public int ProjectId { get; set; }
    public int[] userAccountIds { get; set; }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-23T23:23:31.803

`traditional`除非您指定 ajax 请求 (Post/Get) 的属性设置为 true ，否则它将不起作用 。有关详细信息，请参阅此[问题。](https://stackoverflow.com/questions/5489461/pass-array-to-mvc-action-via-ajax)

# linux - 当安装多个版本的 gcc 时，libtool 在 64 位目标平台上与 32 位版本的 libstdc++.so 链接

> ID：15782420
> 
> 赞同：12
> 
> 时间：2013-04-03T08:32:49.423
> 
> 标签：linux, gcc, 32bit-64bit, autotools, libtool

首先，我想让你知道这是我在 StackOverflow 上的第一篇文章，所以我希望我不会因为问一个非常愚蠢的问题而自欺欺人。几天来我一直在谷歌上搜索这个问题，但到目前为止我找不到任何答案。

情况如下：

我正在开发一个使用自动工具管理的 C++ 项目。目标平台是 RHEL5 64bit，安装了两个版本的 gcc：

*   安装在 /usr 中的 gcc 4.1.2
*   gcc 4.3.5 安装在 /local/opt/gcc-4.3.5

当我使用默认的 gcc 版本（4.1.2）构建我的项目时，一切正常，但是当我切换到 gcc 4.3.5 时，我在链接时收到此错误：

```
/local/opt/gcc-4.3.5/lib/../lib/libstdc++.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status 
```

似乎 libtool 在命令行中硬编码了 32 位版本的 libstdc++.so 的路径，而它应该是 64 位版本。更准确地说，失败的 libtool 调用是：

```
/bin/sh ./libtool --tag=CXX --mode=link g++  -m64   -o libfoo.la -rpath /local/opt/foo/lib  src/foo/libfoo_la-bar1.lo src/foo/libfoo_la-bar2.lo 
```

它被 libtool 翻译为：

```
g++ -shared -nostdlib
/usr/lib/../lib64/crti.o
/local/opt/gcc-4.3.5/lib/gcc/x86_64-unknown-linux-gnu/4.3.5/crtbeginS.o
src/foo/.libs/libfoo_la-bar1.o
src/foo/.libs/libfoo_la-bar2.o
-Wl,--rpath
-Wl,/local/opt/gcc-4.3.5/lib/../lib
-Wl,--rpath
-Wl,/local/opt/gcc-4.3.5/lib/../lib
-L/local/opt/gcc-4.3.5/lib/gcc/x86_64-unknown-linux-gnu/4.3.5
-L/local/opt/gcc-4.3.5/lib/gcc/x86_64-unknown-linux-gnu/4.3.5/../../../../lib64
-L/lib/../lib64
-L/usr/lib/../lib64
-L/local/opt/gcc-4.3.5/lib/gcc/x86_64-unknown-linux-gnu/4.3.5/../../..
/local/opt/gcc-4.3.5/lib/../lib/libstdc++.so
-lm -lc -lgcc_s
/local/opt/gcc-4.3.5/lib/gcc/x86_64-unknown-linux-gnu/4.3.5/crtendS.o
/usr/lib/../lib64/crtn.o
-m64 -Wl,-soname -Wl,libfoo.so.0 -o .libs/libfoo.so.0.0.0 
```

我应该准确地说，我用来从默认 gcc 切换到 gcc 4.3.5 的方法如下：

```
$ export PATH=/local/opt/gcc-4.3.5/bin:$PATH
$ export LD_LIBRARY_PATH=/local/opt/gcc-4.3.5/lib:/local/opt/gcc-4.3.5/lib64:$LD_LIBRARY_PATH
$ export GCC_HOME=/local/opt/gcc-4.3.5 
```

我对所有这些工具都很陌生，所以我怀疑我做错了什么。如果有人能给我一个关于如何解决这个问题的线索，我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-17T15:14:46.257

我刚刚找到了自己问题的答案：除了正确设置 LD_LIBRARY_PATH 之外，我还需要将参数传递`LDFLAGS=-L/local/opt/gcc-4.3.5/lib64`给`configure`脚本。谢谢大家的意见。

# java - URL.openConnection() 和 URLConnection.connect() 的区别？

> ID：15782424
> 
> 赞同：7
> 
> 时间：2013-04-03T08:33:00.483
> 
> 标签：java, android, httpurlconnection

在代码中：

```
HttpURLConnection connection = (HttpURLConnection)createMerchURL.openConnection();
connection.setRequestMethod("PUT");
connection.addRequestProperty("Name", "Value1");

connection.connect();

..
connection.disconnect(); 
```

*   实际上什么时候打开连接？在`..createMerchURL.openConnection();`? 或在`connection.connect();`？

*   如何在`connection`对象中设置 URL 并将其用于`connection.connect()`？（因为我不太习惯`.openConnection()`）

最后，这两者有什么区别吗？

谢谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T09:01:20.850

> 实际上什么时候打开连接？在 ..createMerchURL.openConnection(); ? 或在connection.connect();？

后者。前者只是解析 URL，找到协议，然后创建`HttpURLConnection`对象。

> 如何在连接对象中设置 URL

你不能。

> 并将其与 connection.connect() 一起使用？

你不能。

> （因为我对 .openConnection() 不太满意）

运气不好：适应它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-22T04:21:21.767

`connection.connect()`不需要。依赖于连接的操作，`getContentLength(), getResponseCode()`如必要时将隐式执行连接。

来源：[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#connect())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T21:07:20.100

除了其他答案，如果你只是想`GET`在某个地址触发一些 PHP 文件（通过），你可以简单地使用`connect()`after `openConnection()`，然后`disconnect()`当然。

# java - HQL 可以在另一个查询的结果集上选择吗？

> ID：15782425
> 
> 赞同：22
> 
> 时间：2013-04-03T08:33:03.390
> 
> 标签：java, hibernate, subquery, hql

HQL 可以在另一个查询的结果集上选择吗？例如：

```
SELECT COUNT(*) FROM (SELECT * FROM Table) 
```

我可以在 SQL 中执行此操作，但是当我在 HQL 中尝试上述操作时，它只是向我显示语法错误“意外标记：（第 1 行附近，第 22 列 ...”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T08:36:15.293

HQL 确实支持[子查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/queryhql.html#queryhql-subqueries)，但是它们只能出现在 select 或 where 子句中。您提供的示例最好在 HQL 中编写为直接语句。例如：

```
select count(*) from table t  (where table is the entity name) 
```

如果查询涉及比 更复杂的语句`(select * from Table)`，我建议将此逻辑放入视图中，然后基于此视图创建实体。

> 对于支持子选择的数据库，Hibernate 支持查询中的子查询。子查询必须用括号括起来（通常由 SQL 聚合函数调用）。甚至相关的子查询（在外部查询中引用别名的子查询）也是允许的。

**例子**

```
from DomesticCat as cat
where cat.name not in (
    select name.nickName from Name as name
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-28T23:07:03.430

`from`即使数据库支持，也没有办法在 HQL 子句中进行子查询，我通过将查询作为 a 放入 sql 中解决了这个问题`store procedure`，然后在 HQL 中调用该过程。例如：

将过程插入到您的 sql 中：

```
DELIMITER $$
CREATE PROCEDURE `procedure_name`(
  `arg_name` INT,
) BEGIN
     your query here
END;
$$
DELIMITER ; 
```

然后，如果您使用休眠，请从 java 代码中调用此过程，如下所示：

```
Query query = session.createSQLQuery("CALL procedure_name(:arg_name)");
query.setParameter("arg_name", args);
List list = query.list(); 
```

希望这可以帮到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T14:51:03.657

无法根据需要使用子查询。一种方法是使用独特的这种方式：

```
SELECT COUNT(DISTINCT t.id) FROM table t INNER JOIN t.list l
     WHERE t.status = 'ST1' AND l.status = 'ST2'" 
```

我使用内部连接来表达选择重复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-22T05:12:46.753

我最终为我的查询创建了一个视图，然后为此创建了一个模型对象。然后为它创建 HQL 查询是微不足道的。

不过，我的应用程序没有其他应用程序可能具备的某些性能要求，因此我可以摆脱它。

# c++ - 释放模板参数（并调用其析构函数）

> ID：15782426
> 
> 赞同：1
> 
> 时间：2013-04-03T08:33:04.560
> 
> 标签：c++, dynamic-allocation

**语境**

我正在尝试实现我的`std::vector`模板类版本。向量包含模板参数的动态数组`T`：

```
_vec = new T[n]; 
```

显然`T`可以是任何类型，指针、类、原始类型。当调用`v.resize(4)`一个大小的向量时，`6`它显然应该按照[本规范](http://www.cplusplus.com/reference/vector/vector/resize/)删除动态数组的最后 2 个元素（不重新分配数组） ：

> 如果 n 小于当前容器大小，则内容将减少到它的前 n 个元素，删除超出的那些（并销毁它们）。

通过*破坏*我的意思是，我认为 std 库意味着调用对象的析构函数，或者如果它是包括指针在内的任何其他原始类型，则简单地释放内存空间。

**问题：**是否有可能（如果有，如何）销毁动态分配的数组中的模板元素而不解除分配和重新分配它？

**我尝试了什么？**好吧，我真的不知道从哪里开始：

*   显然[你不应该](https://stackoverflow.com/a/11643420/493122)`delete`在原始类型上调用 a 。

*   [您可以](https://stackoverflow.com/a/6855977/493122)在对象上显式调用析构函数，但如果不是对象，这将不起作用`T`。
*   我想只是减少​​内部`_size`计数器（以便将来`push_back`会覆盖元素），但这不会立即调用对象的析构函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:01:59.700

在实现 时`vector`，您可能希望将存储管理和对象管理分开。

使用`allocator::allocate(size_type n)`和管理存储`allocator::deallocate(pointer p, size_type n)`，它们通常分别实现为`return ::operator new(n * sizeof (T));`和`::operator delete(p);`。

这些函数分配和释放内存，但不调用该内存中包含的对象的构造函数或析构函数。

对象生命周期使用`allocator::construct(U* p, Args&&... args);`和来管理`allocator::destroy(U* p);`，它们通常分别实现为`::new((void *)p) U(std::forward<Args>(args)...);`和`p->~U()`。

这些函数在预分配的内存中构造和解构对象，但它们本身并不管理内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:35:51.730

`new T[n]`不是您想要的，因为这已经创建了 type 的`n` *对象*`T`，但您只想为最多type 的对象分配*内存*。`n``T`

您可能需要阅读有关placement-new 语法和placement-delete 语法的内容。[维基百科](http://en.wikipedia.org/wiki/Placement_syntax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:06:05.020

FredOverflow 关于对象分配是正确的。

根据您的问题，您只需将对象与非对象（标量）区分开来。`<xmemory>`Visual Studio 2010 发行版中有一个真实的代码：

```
template<class _Alloc> inline void _Destroy_range(
  typename _Alloc::pointer _First, typename _Alloc::pointer _Last, _Alloc& _Al);

template<class _Alloc> inline void _Destroy_range(
  typename _Alloc::pointer _First, typename _Alloc::pointer _Last, _Alloc& _Al, 
  _Nonscalar_ptr_iterator_tag);  // Object overload

template<class _Alloc> inline void _Destroy_range(
  typename _Alloc::pointer _First, typename _Alloc::pointer _Last, _Alloc& _Al, 
  _Scalar_ptr_iterator_tag);  // Non-object overload 
```

他们使用带有特殊标志的简单调度，可以使用一些特征类来计算。

# java - 运行jar时找不到元素'beans'的声明错误

> ID：15782430
> 
> 赞同：1
> 
> 时间：2013-04-03T08:33:26.477
> 
> 标签：java, spring, swing, schema

我正在使用 Spring 3.0 开发 swing 项目，并且正在使用 eclipse IDE，该项目是在 IDE 中找到的，但是当我生成 jar 文件时运行它。发生错误**org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自类路径资源 [spring-beans.xml] 的 XML 文档中的第 13 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：13；列号：84；cvc-elt.1：找不到元素“beans”的声明。**

这是我的弹簧配置文件

```
 <?xml version="1.0" encoding="UTF-8"?> 
     <beans xmlns="http://www.springframework.org/schema/beans" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
     xmlns:context="http://www.springframework.org/schema/context" 
     xmlns:tx="http://www.springframework.org/schema/tx"  
     xmlns:p="http://www.springframework.org/schema/p" 
     xsi:schemaLocation=" 
        http://www.springframework.org/schema/beans      
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
        http://www.springframework.org/schema/tx  
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd 
        http://www.springframework.org/schema/context  
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:annotation-config/> 
    <context:component-scan base-package="com.plyd.java"/>
  </beans> 
```

我正在谷歌搜索该错误并在我的项目中测试解决方案，但不行。代码可以在 IDE 中找到。但是当我生成可运行的 jar 并运行它时，会出现错误。请给我一些建议谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T07:46:20.933

如果您使用的是 Eclipse，请尝试使用此导出 jar >*将所需库复制到子文件夹中*

# c# - 更短的名称以访问 C# 中的类

> ID：15782432
> 
> 赞同：0
> 
> 时间：2013-04-03T08:33:27.963
> 
> 标签：c#, asp.net

只需要一些建议，因为我是新手。有没有办法让这个更短？

```
 Student.Classes.Enum.Enum.gender 
```

只需要一种更聪明的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:35:27.337

您可以在导入中使用别名，如下所示：

```
using System;
using System.Collections.Generic;
using ShortAlias = Very.Long.Class.Name;

class Test
{
    private ShortAlias x;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T08:36:29.863

您应该阅读“使用”语句

IE

```
using Student.Classes.Enum.Enum; 
```

将允许您使用

```
gender.Male 
```

# c# - 打开 ZVI 文件的库

> ID：15782434
> 
> 赞同：1
> 
> 时间：2013-04-03T08:33:35.147
> 
> 标签：c#, .net, image-processing

有谁知道是否存在用于打开 ZVI 文件的 .NET 库。我知道存在很多 ZVI 阅读器，但我找不到 ZVI 阅读器或 C# 或 .NET 的库。每一个帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T21:09:25.513

我不太确定它是否会对您有所帮助，但您可以使用 ImageJ 打开 .ZVI，这里甚至还有一个宏代码[http://imagej.1557.x6.nabble.com/Loci-plugin-and-macro -file-conversion-Questions-td5003928.html](http://imagej.1557.x6.nabble.com/Loci-plugin-and-macro-file-conversion-Questions-td5003928.html)如何将它们自动转换为 tifff。

# git - 从 git 存储库中永久删除文件，同时保留历史记录

> ID：15782435
> 
> 赞同：0
> 
> 时间：2013-04-03T08:34:03.020
> 
> 标签：git, revision-history

这是我的情况：

我有一个具有以下布局的 git 存储库

```
myrepo/
myrepo/index
myrepo/data/data01
myrepo/data/data02
myrepo/data/data03
... 
```

我有几百个提交，每个提交都会更改索引文件并添加一个数据文件。现在，存储库变得非常大，我想完全摆脱数据文件，不仅将它们从我的脑海中删除，还从元数据中删除，从而减少存储库的实际大小。但我想这样做，保留我提交的剩余部分（在添加数据的同时完成索引的更改）。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:54:57.950

我自己在[github](https://help.github.com/articles/remove-sensitive-data)上找到了答案。以下是必要的命令：

```
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch data/*' --prune-empty --tag-name-filter cat -- --all
rm -rf .git/refs/original/
git reflog expire --expire=now --all
git gc --prune=now
git gc --aggressive --prune=now 
```

# c# - 有没有办法取消一堆静态属性？

> ID：15782436
> 
> 赞同：0
> 
> 时间：2013-04-03T08:34:03.453
> 
> 标签：c#, static, static-members

在我的 mvc 网站中，我曾经使用静态变量来存储请求之间的共享变量，有没有办法在不重新启动我的所有应用程序的情况下“使”一组静态变量“无效”，或者在它们的 getter 中使它们无效。

```
public static object IdsFromSomethingLocker = new object();
        public static int[] IdsFromSomething
        {
            get
            {
                if (_idsFromSomething == null)
                {
                    lock (IdsFromSomethingLocker)
                    {
                        if (_idsFromSomething == null)
                        {                            
                           _idsFromSomething = // some long loading treatment
                        }
                    }
                }
                return _idsFromSomething;
            }
        } 
```

一种解决方案可能是添加一个断言以知道何时使此变量无效，例如：

```
 public static object IdsFromSomethingLocker = new object();
            public static int[] IdsFromSomething
            {
                get
                {
                    if (_idsFromSomething == null || needToBeInvalidate)
                    {
                        lock (IdsFromSomethingLocker)
                        {
                            if (_idsFromSomething == null)
                            {                            
                               _idsFromSomething = // some long loading treatment
                            }
                        }
                    }
                    return _idsFromSomething;
                }
            } 
```

但我不想为每个类似的处理添加一个布尔值。

有没有办法在我的“缓存”属性上方添加自定义属性以了解何时需要使它们无效？

**编辑 ：**例如，长时间处理可能是“加载一个 xml 文件并解析它”，但是当我的文件被修改时，我想使我的静态属性无效，我不想使用 HttpCache（因为我想要一个可以使用的解决方案在另一个上下文中（winForm）。并且 xml 案例可以是另一个数据源在我的案例中，我从 RavenDB 检索数据。

原始数据由另一个程序更新。

# sql-server - 在整个架构中搜索特定列以查找此类列是否存在或不存在

> ID：15782437
> 
> 赞同：0
> 
> 时间：2013-04-03T08:34:04.857
> 
> 标签：sql-server

如何在 SQL Server 2005 中我的数据库的整个架构中搜索特定列，所提到的列属于哪个表，甚至是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:39:32.133

您可以查询数据库的 INFORMATION_SCHEMA.COLUMNS 视图以查看该列是否存在以及它属于哪个表，请查看以下描述视图中的列的内容：

[信息模式 - 列](http://msdn.microsoft.com/en-us/library/ms188348%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:47:01.980

这是一个示例查询，您将列名称指定为 ' `AddressId`' 并将架构名称指定为`person`。

[资源](http://blog.sqlauthority.com/2008/08/06/sql-server-query-to-find-column-from-all-tables-of-database/)

根据您的要求更改列名称和架构名称

```
USE AdventureWorks2012
SELECT t.name AS table_name,
SCHEMA_NAME(schema_id) AS schema_name,
c.name AS column_name
FROM sys.tables AS t
INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID
WHERE c.name LIKE '%AddressId%' AND SCHEMA_NAME(schema_id)='Person'
ORDER BY schema_name, table_name; 
```

结果

![在此处输入图像描述](https://i.stack.imgur.com/0rxiw.png)

# javascript - jquery将数据属性与数组中的值匹配

> ID：15782443
> 
> 赞同：3
> 
> 时间：2013-04-03T08:34:24.170
> 
> 标签：javascript, jquery, arrays

我有一个类似下面的列表：

```
<p class='info' data-info='1'>Info 1 <span class='status'></span></p>
<p class='info' data-info='2'>Info 2 <span class='status'></span></p>
<p class='info' data-info='3'>Info 3 <span class='status'></span></p>......etc 
```

我需要做的是遍历所有`.info`元素，如果`data-info`数字包含在`myArray`更改跨度文本中。如何在 jQuery 中匹配数组内部的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:45:09.337

```
$('.info').each(function() {
  $this = $(this);
  if ($.inArray($this.data('info'), myArray) !== -1) {
    $this.children('.status').text('New text value');
  }
}); 
```

[**这是一个小提琴**](http://jsfiddle.net/DhBNt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:41:18.647

你需要做这样的事情：

```
$(".info").each(function() {
    if($(this).data('info').val() == <INSERT NUMBER TO MATCH>)
    {
       //Do some code here
       //example
       $(this).find("span").text("Some text here")
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:43:22.880

如下所示，您可以获取每个“p”的数据信息值，然后您可以检查该值是否存在于您的数组中

```
<p class='info' data-info='1'>Info 1 <span class='status'></span></p>
<p class='info' data-info='2'>Info 2 <span class='status'></span></p>
<p class='info' data-info='3'>Info 3 <span class='status'></span></p>......etc

var info = []
$('p').each(function(){
    info.push($(this).attr('data-info'));
});
alert(info) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:45:15.257

与其循环遍历`.info`元素，不如循环遍历`myArray`.

```
for (var i = 0; i < myArray.length; i++) {
    $("p[data-info=" + myArray[i] + "] .status").html("Your text");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T08:45:48.683

```
var valueToFind = ['3', '0', '1'];
$('.info').each(function(){
    var infoData = $(this).data('info');
    for(i=0;i<valueToFind.length;i++){
        if(valueToFind[i]==infoData){
            $(this).find('.status').html('found');
        }
    }
}); 
```

会变魔术。

这是一个现场小提琴示例[http://jsfiddle.net/mayooresan/fw94c/](http://jsfiddle.net/mayooresan/fw94c/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T08:49:36.807

干得好

现场示例[http://jsfiddle.net/mithun/5Ryu5/3/](http://jsfiddle.net/mithun/5Ryu5/3/)

```
var infoSpecialArray = [2, 3, 4, 5];
$("p.info").each(function() {
    if($.inArray(parseInt($(this).data('info'), 10), infoSpecialArray) != -1) {
      $(this).find('span.status').html('special')
    }
}); 
```

# c - strcat C 不打印和 int 到 char*

> ID：15782444
> 
> 赞同：0
> 
> 时间：2013-04-03T08:34:30.003
> 
> 标签：c, casting, strcat

我首先尝试生成一个随机数并将其转换为字符串。它正确执行，但编译器给出“警告：从不同大小的整数转换为指针”。然后，这里的主要问题是我试图连接字符串以构建响应，但由于某种原因，甚至第一个 strcat 都不起作用，它只是停在那里。

```
char *name, *cseq;
srand (time(NULL));
char *session = (char*) ( rand() % (9999 - 1000 + 1) + 1000 );

char* response = "RTSP/1.0 200 OK\nCSeq: ";                     
strcat( response, cseq );                   
strcat ( response, "\n" );                      
strcat ( response, "Session " );
strcat ( response, session );                       
strcat ( response, "\n\n" );

printf("Response: %s", response); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:37:24.340

不，它没有“正确”地做到这一点；你的代码很破。编译器在发出警告时并不想搞笑，他们通常知道他们在说什么，而*你*需要弄清楚你的代码有什么问题导致它触发警告。因为应该没有。

在您的情况下，此代码例如：

```
char *session = (char*) ( rand() % (9999 - 1000 + 1) + 1000 ); 
```

是无效的，并且`session`好像它指向一个有效的字符串一样使用很可能会调用未定义的行为。

您不能将事物“转换”为 C 中的字符串，除非它们是以 0 结尾的字节数组来描述以预期编码开头的字符。

您需要使用例如或类似的东西从随机数*创建字符串：*`sprintf()`

```
const int session_id = rand() % (9999 - 1000 + 1) + 1000;
char session[32];

snprintf(session, sizeof session, "%d", session_id); 
```

当然，一旦你开始使用，`snprintf()`你也可以将它用于所有格式，并且 drop`strcat()`无论如何都是一个非常锋利的工具。

此外，正如 simonc 所指出的，您不能像正在做的那样修改字符串。你可能应该有类似的东西：

```
char response[512];

snprintf(response, sizeof response, "RTSP/1.0 200 OK\nCSeq: %s\nSession %d\n\n",
         cseq, session_id);
printf("Response: '%s'", response); 
```

请注意，这`session_id`从上面使用，但在一次调用中完成所有格式设置`snprintf()`，因此不需要会话 ID 的临时字符串版本。

当然，如果你想`return`this 退出函数，你需要考虑缓冲区管理，你不能按原样返回`response`，因为它是一个局部变量，当函数退出时会超出范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:36:43.097

```
char* response = "RTSP/1.0 200 OK\nCSeq: "; 
```

给你一个只读的字符串文字。你不能修改这个的内容。

一个快速而肮脏的解决方法是更改`response`​​为具有硬编码长度的可写：

```
char response[200] = "RTSP/1.0 200 OK\nCSeq: "; 
```

更好的方法可能是计算各种字符串组件的长度，然后`malloc`计算`response`. 如果您这样做，请务必`free`稍后再致电。

除了`session`unwind 指出的问题之外，请注意`cseq`在您的示例中未初始化，因此取消引用它会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:46:36.857

与以下

```
char *session = (char*) ( rand() % (9999 - 1000 + 1) + 1000 ); 
```

您将随机数解释为内存地址，这是合法的，但可能不是您想要做的。结果是您将随机内存转储到响应中，如果幸运的话，只会获得垃圾，最坏的情况是分段错误。如果您想将其转换为字符串（例如 1234 -> "1234"），您应该使用类似

```
char session[6];
snprintf(session,6, "%d", rand() % (9999 - 1000 + 1) + 1000 ); 
```

（另请参见[此处](https://stackoverflow.com/questions/8257714/how-to-convert-an-int-to-string-in-c)的先前讨论）。

# java - 检查 JDBC String / VARCHAR 比较中的转义百分比？

> ID：15782445
> 
> 赞同：1
> 
> 时间：2013-04-03T08:34:33.000
> 
> 标签：java, sql, regex, jdbc

我正在编写一个 JDBC 库，它接受来自用户输入的**java.lang.String**对象并发出 JDBC **SELECT**语句。我希望存在未转义的**%**字符来引导库在比较中使用**LIKE**子句，而对于没有未转义的**%**字符的字符串，应该使用更严格的**=比较。**

例如下表和数据：

```
CREATE TABLE S (V CHARACTER VARYING);
INSERT INTO S (V) VALUES ('%B%'); -- row a
INSERT INTO S (V) VALUES ('%%%'); -- row b
INSERT INTO S (V) VALUES ('%%X'); -- row c 
```

我希望字符串**"\%\%\%"***（不包含未转义的**%**字符）导致以下查询：

```
SELECT * FROM S WHERE V = '%%%' 
```

...仅匹配 1 行（b 行）。而字符串**"\%%\%"**（包含一个未转义的**%**）应该导致查询：

```
SELECT * FROM S WHERE V LIKE '\%%\%' 
```

...这将只匹配行 a 和 b（但不匹配 c）。

Java中是否有一个实用程序类可以对未转义的**%字符进行这种测试并生成****=**比较所需的未转义版本（当所有**%**字符最初都被转义时？）

逻辑应该如下：

```
 if ( unescapedPercentageExists( s ) )
     likeClause( s )
 else
     equalClause ( removeEscapes( s ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:45:55.407

试试正则表达式

```
public static boolean unescapedPercentageExists(String s){
    return s.matches(".*((?<=[^\\\\])|^)%.*");
} 
```

测试：

```
abc: false
abc\%: false
\%abc: false
a\%bc: false
abc%: true
%abc: true
a%bc: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:42:46.630

下面是一个不使用正则表达式并使用转义**“\”**字符的解决方案，我将结果与 Arun 的解决方案并列并用**DIFF 突出显示！****像"\\%"**这样的字符串的正确行为。可悲的是，它使用了一个魔术字符串：

```
import java.io.IOException;
import java.io.File;
import java.util.List;
import org.apache.commons.lang3.StringEscapeUtils;

public class FooMain {

    private static boolean unescapedPercentageExists(String s) {
        return s.matches(".*((?<=[^\\\\])|^)%.*");
    }

    private static String RARE_STRING="use a rare string, @#$645k";

    private static String replacePerc(String s) {
        return s.replace("%", "n"+RARE_STRING);
    }

    private static boolean unescapedPercentageExists2(String s) {
        return StringEscapeUtils.unescapeJava(replacePerc(s)).indexOf("n"+RARE_STRING)!=-1;
    }

    public static void main(String args[]) throws IOException {
        List<String> testStrs = // read from file to avoid having to escape them as literals (I leave this out as I use one of my utility classes)
        System.out.println("showing if unescaped percentage exists");
        for (String testStr : testStrs) {
            boolean ver1 = unescapedPercentageExists(testStr);
            boolean ver2 = unescapedPercentageExists2(testStr);
            System.out.println(String.format("%10s ver1: %5b ver2: %5b %s",
                                   testStr, ver1, ver2, ver1==ver2?"":"DIFF!"));
        }
    }
} 
```

它产生：

```
showing if unescaped percentage exists
       abc ver1: false ver2: false 
     abc\% ver1: false ver2: false 
     \%abc ver1: false ver2: false 
     a\%bc ver1: false ver2: false 
      abc% ver1:  true ver2:  true 
      %abc ver1:  true ver2:  true 
      a%bc ver1:  true ver2:  true 
         % ver1:  true ver2:  true 
        \% ver1: false ver2: false 
       \\% ver1: false ver2:  true DIFF!
      \\\% ver1: false ver2: false 
     \\\\% ver1: false ver2:  true DIFF! 
```

# iphone - iOS 地图中的 Mapkit 点箭头指示器

> ID：15782448
> 
> 赞同：3
> 
> 时间：2013-04-03T08:34:41.220
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我使用 MapKit 来查看地图并放置注释。我需要一个箭头，它将从蓝点指向具有指定坐标的选定注释。当蓝点随着用户移动而移动时，箭头将旋转并仍指向所选注释的度数。它不是道路导航（如使用 MKPolyline），而只是指向选定点的箭头。

看起来我知道如何分享这张图片以获得更清晰的解释：

![ht！[tps://docs.google.com/file/d/0B3C_JRmFWyOBU0Z3OGFTOFFVUDQ/edit?usp=sharing][1]](https://i.stack.imgur.com/T0xBQ.png)

# python - 如果没有结果我不想打印

> ID：15782457
> 
> 赞同：-3
> 
> 时间：2013-04-03T08:35:18.610
> 
> 标签：python

```
found = False
for i, line in enumerate(file(name, "r")):
        for key in found_dic:
                if key in line.strip(): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:46:55.403

```
for i, line in enumerate(file(name, "r")):
    found = True
    for key in found_dic:
        if key in line.strip():
            found_dic[key].append("LINE:"+str(i)+":" + line.strip())
            found = False 
```

我相信这个代码块应该是

```
found = False
for i, line in enumerate(file(name, "r")):                
    for key in found_dic:
        if key in line.strip():
            found_dic[key].append("LINE: %s: %s" % (i,line.strip()))
            found = True 
```

你有你的`found`值倒置，这意味着 found 只会在没有找到的项目时设置为 true，反之亦然。

此外，您在每次迭代中将找到的值设置为某个默认值，这意味着只有最后一个值才是真正重要的。这不太正确，应该在循环之外设置默认值。

# html - 隐藏水平滚动条

> ID：15782458
> 
> 赞同：4
> 
> 时间：2013-04-03T08:35:19.430
> 
> 标签：html, css, scrollbars

我的水平滚动条有问题。我不希望它出现。实际上它只显示在 Chrome 中，而不显示在 Internet Explorer 中。我能做些什么？我尝试在 css 类中修改宽度和填充，但这也改变了布局。test 里面的内容是动态的，所以它可以垂直溢出，这很好，因为我只不需要水平滚动条。

**HTML：**

```
<div class="test">
    <table>
        <tr>
            <td>test</td>
        </tr>
    </table>
</div> 
```

**CSS：**

```
.test {
    BORDER-TOP: #7F9DB9 1px solid;
    BORDER-RIGHT: #7F9DB9 1px solid;
    BORDER-LEFT: #7F9DB9 1px solid;
    BORDER-BOTTOM: #7F9DB9 1px solid;
    WIDTH: 100%;
    PADDING-RIGHT: 0px;
    PADDING-LEFT: 10px;
    PADDING-BOTTOM: 10px;
    PADDING-TOP: 10px;
    HEIGHT: 100%;
    BACKGROUND-COLOR: #ffffff
} 
```

如果您需要，这是一个小提琴：http: [//jsfiddle.net/XLY9L/](http://jsfiddle.net/XLY9L/)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:42:28.230

有一个简单的解决方案，只需将其添加到您的 CSS 声明中：

```
box-sizing: border-box; 
```

出现水平滚动条的原因是填充和边框默认添加到您为元素提供的任何宽度。通过将其显式设置为`border-box`，填充和边框将包含在该宽度值中。

此属性在 IE8+、FireFox 19+（使用`-moz-box-sizing`）和 iOS Safari 和 Android（使用`-webkit-box-sizing`）中受支持

另外，我强烈建议使用速记 css，如下所示：

```
.test {
    BOX-SIZING: border-box;
    WIDTH: 100%;
    HEIGHT: 100%;
    PADDING: 10px 0 10px 10px;
    BORDER: #7F9DB9 1px solid;
    BACKGROUND-COLOR: #ffffff;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T09:01:32.167

您可以尝试使用简单的方法

```
BODY {
    overflow-x:hidden;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T08:46:18.993

或者@micadelli 的回答，您可以删除`width: 100%`因为`<div class="test">`是*块级*元素，并且会自动填充它在当前容器中占据的水平空间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-26T07:36:59.273

> 将此代码添加到您的 CSS。它将禁用您的水平滚动条。

```
html, body {
    max-width: 100%;
    overflow-x: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T09:55:20.457

您也可以在您的网站中尝试这个简单的 CSS 代码。只需写溢出-x：隐藏；在身体标签上。它会隐藏在你的身体之外。

# html - 具有灵活高度/宽度的 HTML DIV 表

> ID：15782461
> 
> 赞同：0
> 
> 时间：2013-04-03T08:35:25.153
> 
> 标签：html, css, css-tables, fluid-layout

目前我有一个 HTML 表格，如下所示：

```
---COLM1---|---COLM2---|---COLM3---

data1         smalldata

data 2

data 3

NEW ROW 1     NEW ROW 2 
```

新的第 1 行在最长内容的正下方显示第一列的新行，但对于第 2 行，我希望它显示在小数据的正下方。

我目前拥有的适用于此示例但不适用于我想要的代码是：

```
/**-- 3 Column Table  Using Divs
Each Column can be any length
--**/       
.divTable{
width: 100%;
}
.divTableArticle{
display: inline-block;
vertical-align: top;
width: 23%;                     
}

.divTableRow{
clear: left;
padding-top: 15px;
margin-bottom: 10px;
} 
```

和html对应：

```
<div class="divTable">
 <!--AS MANY ROWS-->
       <div class="divTableRow">
           <!---AS MANY ARTICLES--->
           <div class="divTableArticle"></div>
       </div>
</div> 
```

我将如何修改我的代码以符合我的新要求？

由于我目前正在列出每行数据，所以列出每列数据会更好吗？

JS 小提琴：[点击这里](http://jsfiddle.net/C7jZT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:08:29.807

如果这些文章是独立的，并且无法链接（例如，2012 年和 2007 年作为一对），我想如果不定位它们（​​即使用 JS 或 jQuery）是不可能的。但是对于简单的 HTML 和 CSS，这是我设法得到的最接近的（它真的不像你想要的那样工作）：

```
<div class="divTable">
    <div class="divTableArticle"></div><!-- Needed for removing whitespace
 --><div class="divTableArticle"></div>
</div>

.divTableArticle{
    display: inline-block;
    width: 33.3333%;
    float: left;
} 
```

[JS小提琴](http://jsfiddle.net/C7jZT/6/)

# c# - 使用 LINQ 排除数据

> ID：15782464
> 
> 赞同：0
> 
> 时间：2013-04-03T08:35:29.180
> 
> 标签：c#, linq

我有这个 LINQ 查询，它返回大量路线的数据和坐标。当坐标数量超过特定值时，我想排除以下路线的坐标。

这是我尝试执行此操作的方法，问题是当我尝试序列化对象时，JSON.net 序列化超时。

```
 public static object returnFullSelectWithCoordinates(IQueryable<RouteQueryModel> r)
    {
        int totalCoordinateCount = 0;
        foreach (route x in r.Select(c => c.b))
        {
            if (totalCoordinateCount > DataValues.AmountOfCoordinates)
            {
                x.coordinates.Clear();
            }
            else
            {
                totalCoordinateCount += x.coordinates.Count;
                if (totalCoordinateCount > DataValues.AmountOfCoordinates)
                {
                    x.coordinates.Clear();
                }
            }
        }

        return r.Select(b => new
        {
            route_id = b.b.route_id,
            name = b.b.name,
            description = b.b.description,
            distance = b.b.distance,
            distance_to_route = (int)b.distance_to_from_me,
            departure_place = b.b.departure_place,
            arrival_place = b.b.arrival_place,
            owner = b.b.user.username,
            average_rating = b.avg_rating,
            is_favorite = b.is_favorite,
            date = b.b.date,
            attributes = b.b.route_attributes.Select(c => c.route_attribute_types.attribute_name),
            coordinates = b.b.coordinates.Select(c => new coordinateToSend { sequence = c.sequence, lat = c.position.Latitude, lon = c.position.Longitude })
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:07:43.323

正如 Vladimir Frolov 所指出的，您列举了两次结果。这是浪费时间和资源，但最糟糕的是第二次重新开始，第一次迭代的更改丢失。

所以我想把它转过来：首先获取你需要的数据，这样你就可以从缩小 SQL 查询范围的投影中受益。然后更改任何需要更改的内容：

```
public static object returnFullSelectWithCoordinates(IQueryable<RouteQueryModel> r)
{
    var results = r.Select(b => new
    {
        route_id = b.b.route_id,
        name = b.b.name,
        description = b.b.description,
        distance = b.b.distance,
        distance_to_route = (int)b.distance_to_from_me,
        departure_place = b.b.departure_place,
        arrival_place = b.b.arrival_place,
        owner = b.b.user.username,
        average_rating = b.avg_rating,
        is_favorite = b.is_favorite,
        date = b.b.date,
        attributes = b.b.route_attributes
                     .Select(c => c.route_attribute_types.attribute_name),
        coordinates = b.b.coordinates.Select(c => new coordinateToSend 
                                                  { sequence = c.sequence,
                                                    lat = c.position.Latitude, 
                                                    lon = c.position.Longitude
                                                  })
    }).ToList(); // ToList !!

    int totalCoordinateCount = 0;
    foreach (var x in results)
    {
        if (totalCoordinateCount + x.coordinates.Count
                                 > DataValues.AmountOfCoordinates)
        {
            x.coordinates.Clear();
        }
        else
        {
            totalCoordinateCount += x.coordinates.Count;
        }
    }

    return results;
} 
```

# knockout.js - 每页多个视图模型和异步加载模板

> ID：15782465
> 
> 赞同：5
> 
> 时间：2013-04-03T08:35:31.023
> 
> 标签：knockout.js, knockout-2.0

我正在使用 - 1\. Knockout.js 2\. Knockout.js 外部模板引擎 (ifandelse) [间接使用 infuser、trafficcop]、3、Sammy JS、Require JS 等开发应用程序。

为了促进模块化和易于开发，我正在构建应用程序以在每页使用多个视图模型。使用来自 Ryan Niemeyer ( [http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html) ) 的绑定技巧，它描述了如何使用重载版本的 applyBindings 绑定多个视图模型。在我决定使用 Jim Cowart 的 Knockout.js 外部模板引擎库之前，这种技术一直很好，它帮助我将模板分离到文件中，并异步加载它们。它不起作用的原因很简单，对于将 viewmodel 绑定到特定 DOM 元素的 applyBinding，应该存在 DOM 元素（因为 KO 外部模板引擎正在异步请求和加载模板，所以情况并非如此）。我也不能使用 afterRender 等。

有没有人遇到过这种情况？在这方面的任何建议和方向都将非常有帮助。我是否缺少一些可以使用的 KO 功能？

现在，作为一种解决方法，我在 HTML 中定义模板时添加了“templateLoaded”回调：

```
<!--ko template: {name: 'header', templateUrl: '/templates/shell', templateLoaded: function () { header.bindViewModel.call(header) }} -->
<!--/ko--> 
```

HTML 模板：

```
<!-- ko stopBinding: true -->
<header id="divHeader">
    <!-- Template Code using Header viewmodel -->
</header>
<!-- /ko --> 
```

标题视图模型：

```
bindViewModel = function () {
    ko.applyBindings(this, $("#divHeader").get(0));
} 
```

并修改了 Knockout.js 方法“executeTemplate()”，如下所示：

```
if (haveAddedNodesToParent) {
    if (options.templateLoaded ) {
        options.templateLoaded.call(bindingContext['$data']);
    }

    activateBindingsOnContinuousNodeArray(renderedNodesArray, bindingContext);
    if (options['afterRender'])
        ko.dependencyDetection.ignore(options['afterRender'], null, [renderedNodesArray, bindingContext['$data']]);
} 
```

现在，在异步检索模板、解析并加载到 DOM 之后调用回调。这有助于将视图模型绑定到正确的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:23:52.590

我在工作中使用与 MVC4 上相同的架构，答案很简单 Jyotindra 使用 applybindingsTonode 并且当您完成对服务器的请求时

```
 function loadMenu(){
       require('menu.js', function(menuViewmodel){
            ko.applyBindingsToNode(containerElement, { template: { name: 'itemTemplate', foreach: items }, menuViewmodel);
       }
    } 
```

问候！PS：你也可以看看这个[knockout.js - 模板的延迟加载](https://stackoverflow.com/questions/9422984/knockout-js-lazy-loading-of-templates)

# java - 在集合中访问特定于类“类型”的方法

> ID：15782478
> 
> 赞同：0
> 
> 时间：2013-04-03T08:36:08.893
> 
> 标签：java, inheritance, collections, methods, abstract

情况：

*   我有一个带有几种方法的抽象类：
*   我有几个子类扩展了上面的类
*   我有一个集合`<MyAbstractClass>`集合，其中填充了主类中子类的新对象
*   我有一个子类的唯一方法，我希望以覆盖我通常调用的方法的方式执行该方法。

即，如果条件为真，而不是通常的`collection.get(i).method();`where`i`是索引，则执行`collection.get(i).specificMethod();`

谁能指出我正确的主题以进一步研究？此外，对我的情况有一点了解会产生奇迹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:38:57.883

听起来你想要`instanceof`：

```
for (AbstractThing thing : yourCollection) {
    if (thing instanceof SubclassWithSpecialMethod) {
        ((SubclassWithSpecialMethod)thing).specialMethod();
    }
    else {
        thing.method();
    }
} 
```

虽然 有完全合法的用途`instanceof`，但如果你发现你正在使用它（特别是如果你经常使用它），它有时表明最好退后一步，看看大图看看是否有一些方法你可以重新组织事情，所以你不会那样做。

例如，在这种情况下，也许抽象类可能具有`method`，然后具有特殊行为的子类可能会*覆盖* `method`特殊行为，因此调用者只需调用`method`并在处理时启动多态性以赋予它特殊行为特定的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:39:41.483

检查条件，`method()`如果满足，`specificMethod()`则从那里调用。根据您的描述，这仅适用于某些子类。

如果您正在检查外部条件，请将标志传递给`method()`以指示它是否应该调用`specificMethod()`同一实例。

# list - 获取值列表（或数组数组）列表的所有组合 [笛卡尔积]

> ID：15782480
> 
> 赞同：0
> 
> 时间：2013-04-03T08:36:14.230
> 
> 标签：list, combinations

我有一个参数列表列表，我想将它们组合成所有可能的组合。在执行之前我不知道列表的数量和每个列表中指定的值。[这个问题在Cartesian_Product](http://en.wikipedia.org/wiki/Cartesian_product)中定义和讨论。

问题输入可以存储在值数组（或列表列表）中。一个例子可以是两副牌。有两副牌`[Red, Blue]`，每副牌有 4 套牌，每套`[♠, ♥, ♦, ♣]`有 13 张牌`[Ace, King, Queen, Jack, 10, 9, 8, 7, 6, 5, 4, 3, 2]`。

这些数组的笛卡尔积返回一个 104 个元素的集合，包括 2 副牌，每副 52 张可能的扑克牌：

```
[[Red, ♠, Ace], [Red, ♠, King], ..., (Red, ♠, 2), (Red, ♥, Ace), ..., (Red, ♣, 2), 
[Blue, ♠, Ace],[Blue, ♠, King], ..., (Blue, ♠, 2), (Blue, ♥, Ace), ..., (Blue, ♣, 2)] 
```

那么如何生成值列表的所有可能组合呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:36:14.230

在这里，一个用 Javascript 编写的解决方案。

问题的可能输入：

```
var parameterList = [ [ 'Red', 'Blue' ],
                [ '\u2660', '\u2665', '\u2666', '\u2663' ],
                [ 'Ace', 'King', 'Queen', 'Jack', 10, 9, 8, 7, 6, 5, 4, 3, 2 ] ]; 
```

计算组合数

```
var num_comb = 1;
for ( var i = 0; i < parameterList.length; i++)
    num_comb *= parameterList[i].length; 
```

生成所有可能的组合：

```
// index used to store the positions of the combination just generated
var index = new Array(parameterList.length);
for ( var i = 0; i < parameterList.length; i++)
  index[i] = 0;

//array of arrays that will store the final result (i.e., all possible combinations)
var combinationsList = [];

do {
  var temp = [];
  for ( var i = 0; i < index.length; i++)
    temp[i] = parameterList[i][index[i]];
  combinationsList.push(temp);
} while (nextIndex());

function nextIndex() {
  var carryover = true;
  for ( var i = parameterList.length - 1; i >= 0 && carryover; i--) {
    index[i] = (index[i] + 1) % parameterList[i].length;
    if (index[i] != 0)
      carryover = false;
  }
//if 'carryover' is true and 'i' is equal to zero means that all possible combinations 
//have been generated. In this case 'nextIndex' is equal to the first combination.
  return !carryover;
}

var allCombString = printCombinationsList(); 
```

打印所有组合：

```
function printCombinationsList() {
  var ret = "";
  for ( var i = 0; i < combinationsList.length; i++) {
    for ( var j = 0; j < combinationsList[i].length; j++)
      ret += ((j == 0) ? "[" : "") + combinationsList[i][j] + ((j == combinationsList[i].length - 1) ? "]": ", ");
    ret += "<br/>";
  }
return ret;
} 
```

# sql-server - 如何在 WHERE 子句中使用混合文本和日期字段？

> ID：15782486
> 
> 赞同：0
> 
> 时间：2013-04-03T08:36:32.290
> 
> 标签：sql-server, sql-server-2008, date, view

无论如何我可以使用视图/内联表函数来使用包含文本和日期的字段的 where 子句中的日期范围来查询表。

日期字段数据类型为 nvarchar，包含格式为文本和文本日期`dd/mm/yyyy.`

我尝试使用 CTE/子查询，使用该`ISDATE`函数排除非日期值，使用`DATEFORMAT`dmy 设置。这有时有效，但大多数时候会发生此错误。

```
Msg 241, Level 16, State 1, Line 3
Conversion failed when converting date and/or time from character string. 
```

我无法更改表格或系统的设计。我已经在使用多语句表函数来实现这一点，但想知道这是否可以使用内联。

这是使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:19:40.547

此 Connect 项目描述了您的问题：

[http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)

您必须始终使用 CASE 表达式包装日期（/文本混合）列，并对非日期进行 NULL 化，然后再将它们从 CTE 或子查询中传递出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:54:49.943

最近我解决了一个类似的问题。如果适合您，请尝试此解决方案 -

```
DECLARE @temp TABLE (dt VARCHAR(12))

INSERT INTO @temp (dt)
VALUES 
  ('12/12/2012')
, ('13/12/2012')
, ('14/12/2012')
, ('string')
, ('14/05/2013')
, ('test/2013')

DECLARE @t TABLE (dt DATETIME)

INSERT INTO @t
SELECT dt = CONVERT(DATETIME, t.dt, 104)
FROM @temp t
WHERE t.dt LIKE '__/__/____' -- '[1-3][0-9]/[0-1][0-2]/____'

SELECT * 
FROM @t 
WHERE dt BETWEEN '20121212' AND '20121213' 
```

# sql - odbc Action 关键字有什么作用？

> ID：15782488
> 
> 赞同：-4
> 
> 时间：2013-04-03T08:36:40.630
> 
> 标签：sql, sql-server, sql-server-2008

我刚刚遇到了一个代码，更像是

```
SELECT * FROM TableName WHERE Columname=filtercriteria AND action='update' 
```

上述代码中的操作提到了什么？我们如何实现它？我们可以给它赋值吗？如果是这样，如何？我尝试在网上搜索，但无法找到任何答案。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:41:08.383

Action - 是列的名称，'update' 是一个值，用于过滤 SELECT 结果语句。它也可以是保留关键字 ODBC，但我不认为它用于您的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:43:11.510

Action 是一个字段/列名，这就是为什么你找不到它的参考。'action' 在这里被用来过滤你的结果集。

`TableName`要使用您引用的两列向您的表添加值，您可以这样做

```
INSERT INTO TableName 
VALUES ('SomeCriteria', 'SomeAction'); 
GO 
```

请注意，这是假设这些列是“CHAR”类型的。

我希望这有帮助。

# ruby - 如何并行运行两种方法 ruby

> ID：15782492
> 
> 赞同：4
> 
> 时间：2013-04-03T08:36:48.483
> 
> 标签：ruby, linux, shell, methods, parallel-processing

我有两种方法。第一个远程执行可执行文件，第二个执行与可执行文件对话。可执行文件是一个网络服务。第一步不会返回 true（通过 shell 执行），因为它启动并等待第二步。有没有办法并行执行第一种方法和第二种方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:49:20.650

使用线程。

```
t1 = Thread.new do
  first_method
end
second_method
t1.join 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T13:01:31.333

除了股票线程支持，我想提一下伟大的 Ruby gem [Parallel](http://github.com/grosser/parallel)

它可以并行生成进程并**同时**利用多个 CPU/内核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:18:26.220

你可以使用 ruby​​ 的线程来做到这一点。您可以查看链接，以便了解可以使用线程做什么。

[http://www.tutorialspoint.com/ruby/ruby_multithreading.htm](http://www.tutorialspoint.com/ruby/ruby_multithreading.htm)

[http://ruby-doc.org/core-2.0/Thread.html](http://ruby-doc.org/core-2.0/Thread.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-03T16:19:33.950

使用 fork 并行运行事物，由于全局解释器锁一次处理一个线程，线程是并发的，但在 ruby​​ 中不是并行的。

[https://www.toptal.com/ruby/ruby-concurrency-and-parallelism-a-practical-primer](https://www.toptal.com/ruby/ruby-concurrency-and-parallelism-a-practical-primer)

# c++ - 无法从重载运算符传递值

> ID：15782496
> 
> 赞同：0
> 
> 时间：2013-04-03T08:36:57.903
> 
> 标签：c++, operator-overloading

如主题中所述，我在将值从重载运算符传回主函数时遇到问题。我已经搜索了很多但没有效果。这是我的示例运算符。返回 Matrix mi 之前的行已将 cout 用于检查算法是否正常工作。我对乘法运算符有同样的问题。

矩阵.h

```
class Matrix 
{
public:
...
Matrix &operator+(const Matrix &m)
... 

private:
    int x;
    int y;
    double **tab;

}; 
```

矩阵.cpp

```
Matrix &Matrix::operator+(const Matrix &m)
{
if(x==m.x && y==m.y)
{
    Matrix temp(x,y);
    for(int i=0;i<x;i++)
    {
        for(int j=0;j<y;j++)
        {
            temp.tab[i][j]=tab[i][j]+m.tab[i][j];
        }
    }
    cout << temp<< endl;
return temp;
}
else
{
    char er[]={"error!\n"};
    throw er;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:40:21.763

根本问题是加法运算符不应该返回引用，而是返回值：

```
Matrix operator+(const Matrix &m); 
```

这适用于乘法、减法等。

除了您要返回对仅存在于函数范围内的变量的引用这一事实之外，返回引用在语义上也没有意义。想想这个表达式：

```
B + C; 
```

如果要返回一个引用，它应该引用什么？

一种常见的做法是实现`Matrix& operator+=(const Matrix&)`为成员运算符，然后将加法实现为非成员：

```
Matrix operator+(Matrix lhs, const Matrix& rhs)
{
  return lhs += rhs;
} 
```

这使得操作对称 WRT LHS 和 RHS，允许在双方进行隐式转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:42:25.817

简单的答案：永远不要返回对您在函数中创建的对象的引用。意思是，您的运算符应该返回 a `Matrix`，而不是 a `Matrix&`（`&`属于返回类型，您可能希望将其放在那里以使其更明显）。

如果您为 Matrix 类提供适当的移动构造函数，则返回结果时不会有昂贵的副本。

# shell - 用于在多台打印机中打印的 Shell 脚本

> ID：15782498
> 
> 赞同：0
> 
> 时间：2013-04-03T08:37:01.417
> 
> 标签：shell

我有一个下面的 shell 脚本，它检查电子邮件帐户并自动将附件打印到脚本第 8 行列出的打印机。您能否帮我修改它，使第 8 行是一个变量，并且可以通过在电子邮件正文中插入适当的文本 PRINTER=FOO 来设置该变量。这将允许脚本打印到多台打印机。

```
#!/bin/bash
#while [ 1 ]
while [ 1 ]
do
SUPPORTED_FILETYPES=".pdf"
#LP_OPTIONS="-o media=A4,tray1 -o fit-to-page -o position=top -o scaling=100"
LP_OPTIONS=""
PRINTER="PRT04-3" #line no. 8 

MAILFILE=~/eprint/$(date +%H%M%S).txt

PRINT_FOLDER=~/eprint/printable
/usr/bin/fetchmail --bsmtp $MAILFILE

if [ "$?" = "0" ]; then
   MAIL_ADDRESS=$(grep 'From:' $MAILFILE | sed -n -e 's/^[^<]*<\([^>]*\)>.*$/\1/p')
   /usr/bin/uudeview +e $SUPPORTED_FILETYPES -p $PRINT_FOLDER -i $MAILFILE
   rm $MAILFILE

   PRINTED="no"

   for f in $PRINT_FOLDER/*

   do
      if [ "$f" != "$PRINT_FOLDER/*" ]; then
         LP_OUTPUT=$(lp $LP_OPTIONS "$f" -d $PRINTER)
         if [ "$?" != "0" ]; then
            MAILTEXT="File "$f" could not be printed."
            echo "$MAILTEXT" | mail -s "Print-Error" $MAIL_ADDRESS
         fi
         rm "$f"
         PRINTED="yes"
      else
         if [ "$PRINTED" = "no" ]; then
            echo "No printable Attachments" | mail -s "Print-Error" $MAIL_ADDRESS
         fi
      fi
   done
  # ~/mailprint
fi
sleep 4
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:29:33.450

如果您将 PRINTER=FOO 限制在自己的行中，那将很容易：

```
PRINTERLINE=$(grep 'PRINTER=' $MAILFILE)
eval $PRINTERLINE #eval PRINTER=FOO
#$PRINTER equals to FOO now 
```

# python - 是什么导致此 python 脚本的执行时间出现差异？

> ID：15782500
> 
> 赞同：3
> 
> 时间：2013-04-03T08:37:15.177
> 
> 标签：python

我有一个简单的 python 脚本，但是当它在一段时间内第一次运行时，它显示的执行时间要长得多。如果我在它快了几个因素之后立即执行它。

该脚本在没有运行应用程序的私有测试服务器上运行，因此我不认为缺乏系统资源是导致它运行速度变慢的原因。

```
#!/usr/bin/env python
import redis,time,sys
print "hello"

$ time python test.py

real    0m0.149s
user    0m0.072s
sys     0m0.076s

$ time python test.py

real    0m0.051s
user    0m0.020s
sys     0m0.028s 
```

谁能解释执行时间的差异？

我已经对包含外部脚本的 php 脚本进行了类似的测试，并且该脚本的执行时间差异可以忽略不计。

这种差异会影响我的应用程序，因为这样的脚本被多次调用并导致响应在 70 毫秒到 450 毫秒之间传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:38:40.640

可能有几个因素。我现在能想到的两个：

1.  初始字节编译。

    Python 将编译后的字节码缓存在`.pyc`文件中，第一次运行时需要创建该文件，后续运行只需要验证字节码缓存上的时间戳。

2.  磁盘缓存

    Python 解释器，你直接引用的 3 个库，*这些*库使用的任何东西，都需要从磁盘加载，除了脚本和它的字节码缓存。操作系统会缓存此类文件以加快访问速度。

    如果您在同一系统上运行其他东西，这些文件将从缓存中刷新并需要再次加载。

    这同样适用于目录列表；在模块搜索路径中查找模块的位置的检查和字节码缓存的测试都由缓存的目录信息加速。

如果此类启动时间影响您的应用程序，请考虑创建一个守护进程，将这些任务作为服务提供服务。RPC 调用（使用套接字或本地主机网络连接）几乎总能超过这些启动成本。消息队列可以为您提供此类守护程序的体系结构。

# excel - 保存密码以保护工作表

> ID：15782501
> 
> 赞同：0
> 
> 时间：2013-04-03T08:37:18.210
> 
> 标签：excel, excel-2007

我的一个用户负责他的下属也使用的 Excel 表。他希望他们只能编辑前几列。编辑其他列应受密码保护。

我向他展示了如何锁定/解锁单元格以及如何保护/取消保护工作表，但他不满意：如果他取消保护以编辑某些内容，则必须在关闭之前再次对其进行保护（否则下次打开时它将不受保护）。但他不想每次都输入密码。

有没有办法保存最初输入的密码？

基本上，他只想在取消保护时输入密码。保护文件应该通过单击或在关闭文件时自动发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:53:19.330

您可以使用 VBA 在每次保存工作簿时自动保护工作簿，方法是使用工作簿的 before saved 事件，如下所示：

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
  Thisworkbook.Protect("Password", true, false)
End Sub 
```

记住还要对 VBA 项目代码进行密码项目，以免被查看，否则每个人都可以看到密码。

# asp.net - 如何在 Azure 存储的页眉中引用 js 和 css 文件？

> ID：15782502
> 
> 赞同：0
> 
> 时间：2013-04-03T08:37:18.710
> 
> 标签：asp.net, azure, azure-storage, azure-blob-storage, azure-web-roles

如何在 azure storage 的页眉上引用 js 和 css 文件？

我努力了 ：

```
CSS/AppConst.css  // --> this working only locally 
~/CSS/AppConst.css 
```

我收到此错误：

```
GET http://myapp.azurewebsites.net/CSS/AppConst.css 500 (Internal Server Error) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:08:25.190

在网页中，您可以添加以下代码行：

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">        
  <link rel="stylesheet" type="text/css" href="Styles/MyStyle.css"/>
  <script type="text/javascript" src="Scripts/MyScript.js"></script>                
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:52:39.497

在存储中，您必须将您的 blob 存储作为公共访问

# java - ant脚本中的copydir

> ID：15782504
> 
> 赞同：1
> 
> 时间：2013-04-03T08:37:21.463
> 
> 标签：java, ant

通过使用以下 ant 脚本，所有文件将从 source.dir 复制到 build.dir

```
<target name="compile" description="">
        <copy todir="${build.dir}">                                          
            <fileset dir="${source.dir}"/>
        </copy>
    </target> 
```

方法：

```
source/
  1.html
  2.html
  html/
   3.html
   4.html

build/
  1.html
  2.html
  html/
   3.html
   4.html 
```

我想要以下

```
source/
  1.html
  2.html
  html/
   3.html
   4.html

build/
  1.html
  2.html     
  3.html
  4.html 
```

任何人都可以在这里帮助我，我是蚂蚁脚本的新手！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:58:31.687

如果您想在复制时操作文件名，复制您需要一个[映射器](http://ant.apache.org/manual/Types/mapper.html)

```
 <copy todir="${build.dir}">                                          
        <fileset dir="${source.dir}"/>
        <flattenmapper/>
    </copy> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:58:05.613

使用[Ant 移动标签](http://ant.apache.org/manual/Tasks/move.html)

这是一个例子..

```
<move file="file.orig" todir="dir/to/move/to"/> 
```

对于多个文件...

```
 <move todir="some/new/dir">
    <filelist dir="my/src/dir">
      <file name="file1.txt"/>
      <file name="file2.txt"/>
    </filelist>
  </move> 
```

# javascript - 未捕获的 SyntaxError：剑道 ui 网格中的意外数字

> ID：15782508
> 
> 赞同：3
> 
> 时间：2013-04-03T08:37:37.713
> 
> 标签：javascript, kendo-ui, kendo-grid

我正在为我的门户网站使用剑道网格网格的代码是

```
 //Grid for award adding
    var griddataSource = new kendo.data.DataSource({
        dataType: "json",
        transport: {
            read: function(o){
                    //o.success([]);
                    url: ServiceBaseUrl+"/Magazine/getsubscriptiondetails?magazineid="+magazine_id, 
                    dataType: "json",
                },
            create: function(o) {                      
                var item = o.data;
                //assign a unique ID and return the record
                item.id =  len;
                o.success(item);
                len++;
            },
            destroy: function(o) {
                o.success();
            },
            update: function(o){
                o.success();
            }         
        },                      
        autoSync: false,
        schema: {                       
        model: {
        id    : "id",
        fields: {

                        magazine_subscription_id: { editable: true},
                        no_of_issues:{editable: true, type:"number", validation: {
                            required: {
                                message: "No of issues required"
                            },
                            min: 1
                        }
                        },
                        subscription_name: { editable: true, type:"string", validation: {
                            required: {
                                message: "Package Name required"
                            }
                            } 
                        },
                        subscription_key: { editable: true, type:"string", validation: { 
                            required: {
                                message: "Subscription Key required"
                            }
                        } },
                        price_inr: { type: "number", validation: { 
                            required: {
                                message: "Price(INR) Key required"
                            }, min: .1} },
                        price: { type: "number", validation: { 
                            required: {
                                message: "Price($) Key required"
                            },
                            min: .1} },
                        discount_type: { type:"string", editable: true, nullable: false},
                        discount_no_of_free_issue: { type: "number" ,validation: { min: 1}}

        }      
        }
        }
    });

    $("#grid").kendoGrid({
    dataSource: griddataSource,
    pageable: false,
    selectable: "multiple",
    sortable: true,
    filterable: false,
    reorderable: true,
    scrollable: false,
    toolbar: ["create"],

    columns: 
    [
        { field: "no_of_issues", title: "No. of issues", width: "100px", format: ""},
        { field: "subscription_name", title: "Package Name", width: "150px" },
        { field: "subscription_key", title: "Subscription Key", width: "150px" },
        { field: "price_inr", title: "Price (INR)", width: "75px" },
        { field: "price", title: "Price ($)", width: "75px" },
        { field: "discount_type", title: "Type", width: "150px", values: type},
        { field: "discount_no_of_free_issue", title: "Discount / No. of Issues", width: "150px", format: ""},
        { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }
    ],
    editable: "inline"
    }); 
```

网格正确显示内容。但是当我在网格中添加一条新记录时，会显示一个错误

```
 Uncaught SyntaxError: Unexpected number 
```

如果有人知道这一点，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:45:21.527

正如我在[基本示例](http://demos.kendoui.com/web/grid/index.html)中看到的，列定义的参数**宽度**应该是数字而不是字符串

```
 { field: "no_of_issues", title: "No. of issues", width: 100 }, 
```

UPD：正如 Pavel Petrman 所说，现在可以使用字符串宽度来设置适当的比例。例如[这里](http://demos.telerik.com/kendo-ui/web/grid/local-data.html)作者使用“px”，您也可以使用相对点（“100%”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T14:17:20.033

我刚刚遇到了这个问题。这个问题很容易解决，但很难追查。所以我通过提供摆脱了错误

```
create: function(options) {    
    options.success({ID:x});
} 
```

其中 x 是有效的（在我的情况下它是一个字符串）。

没关系，对象中有其他东西：

```
options.success({ID:x, foo:bar, ... , stuff: {}, ...}) 
```

重要的是与您的模型 ID 设置相对应的有效 ID（同样，在我的情况下

```
schema: {
    model: {
       id: "ID", 
```

）。

所以关于这个特定的问题，我会检查`len`参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T08:50:36.683

我得到了这种错误的列映射错误。我有

```
 columns: [
 {
     field: 'Name',
     template: vm.categoryNameTreeTemplate
 },
 { field: 'Description' },
 { field: 'Category Code' }, -- this one is wrong
 { field: 'IsDeleted' },
 { command: ['create', 'edit'] }
] 
```

但正确的版本是

```
columns: [
 {
     field: 'Name',
     template: vm.categoryNameTreeTemplate
 },
 { field: 'Description' },
 { field: 'CategoryCode' },  -- correct
 { field: 'IsDeleted' },
 { command: ['create', 'edit'] }
] 
```

# c++ - 编译器是否删除未使用的函数、定义、变量、宏、包含等

> ID：15782515
> 
> 赞同：6
> 
> 时间：2013-04-03T08:38:06.297
> 
> 标签：c++, visual-c++, gcc, compiler-construction

有时在编程时，我们定义或声明函数、定义、变量、宏包含和数据结构。但在那之后永远不要使用那些。

1.  那些未使用的资源会被编译器自动删除（现代编译器能够优化）？
2.  反正有识别那些吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T09:01:00.853

这取决于：

宏由编译器转换为程序文本。除了替换它们的文本之外，它们不代表任何东西，并且不会超出编译时间（除非......见下文）。

如果局部变量没有重要的构造函数或析构函数，它们可能会被删除。 （您不*希望*`scoped_lock`仅仅因为稍后在代码中没有引用它而将其删除。）对于具有内部链接的变量和函数（例如，使用关键字在命名空间范围内定义`static`）也是如此。然而，在大多数情况下，此类对象所需的资源很少，而且节省的费用可以忽略不计。

功能有点不同，并且取决于。一个虚函数通常会被认为是“使用过的”，如果曾经有一个它的类型的实例，它几乎肯定会存在，即使它从未被调用过。

除此之外（这也适用于全局变量）：这取决于链接器。大多数链接器的粒度是编译“翻译单元”产生的目标文件：该目标文件要么是程序的一部分，要么不是程序的一部分。如果您告诉链接器合并目标文件，那么您应该得到其中的所有内容。如果您将目标文件放在（静态）库中，并告诉链接器使用它，那么当且仅当它解析了其他未解析的外部时，链接器才会将目标文件合并到您的程序中。但如果它合并了目标文件，它通常会合并所有的。（任何好的库都会把每个非虚拟函数放在一个单独的目标文件中，所以你不会得到比你需要的更多的东西。）

在这方面，DLL 的行为类似于目标文件（尽管它们的名称）。如果您将目标文件链接到 DLL，则使用它的程序将获得所有 DLL，或者没有。

最后：虽然不是程序的一部分，但目标文件和最终的可执行文件通常会包含符号信息；最好的系统甚至会维护有关宏的信息，以便调试器可以按照您编写的方式显示内容。（它可以用宏做多远是有争议的。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T08:45:16.520

如果编译器或链接器可以看到没有对 C 函数或 C 变量的引用，他们可以（并且通常会）删除那些未使用的东西。

未使用的宏定义根本不会进入编译代码。typedef 等也是如此。

然而，删除在程序的汇编部分中实现的未使用的代码和数据是比较困难的。

对于编译器来说，是否会使用或执行某个引用变量或某些代码并不总是显而易见的。

所以，是的，这些天来，大部分明显未使用的东西都被删除了。

# android - 可以在线程中进行任何数据库操作吗？

> ID：15782518
> 
> 赞同：2
> 
> 时间：2013-04-03T08:38:23.213
> 
> 标签：android, sqlite

由于我不知道数据库操作需要多少时间，所以可以在线程中调用它们吗？

目前我有一个 ThreadPool 类，其中包含一个 ExecutorService 对象，该对象运行添加的作业。每个与 db 相关的方法都作为作业添加，因此 ThreadPool 将在新线程可用时运行它。

哪个是进行数据库操作的最佳方法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:00:30.177

> 由于我不知道数据库操作需要多少时间，所以可以在线程中调用它们吗？

简短回答：是的。您应该在线程中执行数据库操作。您应该将应用程序的逻辑与应用程序的外观分开。

> 哪个是进行数据库操作的最佳方法？

通常使用线程是我认为您可以选择的最佳实践。使用的工具类型（PoolExecutor、FutureTask、AsyncTask、本机线程）取决于您的预期和假定的操作时间（如果操作持续时间超过 1-2 秒，则应使用线程）。

如果您想告知潜在`USER`的有关正在运行的任务的一些进度，则可以使用 AsyncTask，值得一提的是，它是为理想情况下会持续几秒钟的任务指定的。

对于运行较长时间的任务，适合使用**java.util.concurrent**`API`包中提到的工具，如 ThreadPool、ThreadPoolExecutor、FutureTask 等。

 **我正在使用 AsyncTask 或本机线程进行数据库操作。通常他们持续最大。几秒钟。您始终可以使用`TRANSACTIONS`. 它们可以快速提高您的例如插入速度^(**1**)并且还提供更安全的方式来处理您的数据库。它总是非常好，有效和有用的做法。

* * *

^(**1**)我在测试与基本数据库操作相关的性能时做了一些测试，结果非常有趣。我插入了 100 000 条记录，差异很大。而插入事务大约需要。57,497 秒，没有事务的插入耗时超过 6 分钟。这太疯狂了。与删除和更新相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:59:09.883

执行异步数据库操作完全没问题。

我不确定哪种方法是最好的，但 AFAIK 的标准方法是通过加载器（用于访问 ContentProvider 的[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)或用于访问 SQLite 数据库的[SQLiteCursorLoader ）来完成。](https://github.com/commonsguy/cwac-loaderex/)

您可以自由使用自己的机制，但要小心防止任何潜在的内存泄漏。**

# jakarta-ee - JavaEE web.xml - 解释角色名称标签

> ID：15782523
> 
> 赞同：0
> 
> 时间：2013-04-03T08:38:31.733
> 
> 标签：jakarta-ee, authentication, jboss7.x, jaas

我想问（或者也许更好的词是确认）在将多个角色名称放入 auth-constraint 标记后如何处理给定的角色。如果要访问应用程序，您只需要给定集合中的一个角色（在测试后以这种方式工作）或者用户必须具有所有指定的角色？在下面的示例中，我想知道是否需要角色“A**或**B”或“A**和**B”？

我找不到关于它的官方说明。有谁知道我在哪里可以确认操作员 beetwen 角色名称标签是 OR？我不想只基于我的测试和结果。

我的例子是：

```
<security-constraint>
...
<auth-constraint>
    <description>Desc</description>
    <role-name>A</role-name>
    <role-name>B</role-name>
</auth-constraint>
</security-constraint> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:53:58.520

您的问题的答案是“或”。换句话说，您在元素`auth-constraint`中列出了保护您的`web-resource-collection`. 如果经过身份验证，主体具有此角色之一，他/她将能够访问资源集合。在您的情况下，它是角色 A 或角色 B

# java - Java 双重相等

> ID：15782529
> 
> 赞同：0
> 
> 时间：2013-04-03T08:39:06.750
> 
> 标签：java, while-loop, double

我在比较双打时遇到问题。比较负责停止一段时间循环。代码运行良好，但突然之间，循环永远不会停止。来自 centroidList 的 dimVal 的值与计算的临时变量（粗体位）进行比较。代码总是输入if，我用“！=”还是“==”都没关系。打印出来的值，它们是完全一样的。怎么了？

```
 package clusters;

import java.util.LinkedList;

public class KMeansV2 {

    LinkedList<Record> table;
LinkedList<Centroid> centroidList;
LinkedList<Double> intervalList;
boolean clusterStop;

int meassureType;
int prec=10000000;

KMeansV2()
{
    Read read=new Read(true,"BrCa_HD_full.xlsx");
    table=new LinkedList<Record>(read.table);
    centroidList=new LinkedList<Centroid>();
    CreateCentroids(2);
    SetMeassureType(1);
    while(clusterStop==false)
    {
        UpdateRecords();
        UpdateClusters();
    }
    Output();
}

public void SetMeassureType(int meassureType)
{
    this.meassureType=meassureType;
}

public void CreateCentroids(int centroidCount)
{
    if(centroidList.isEmpty())
    {
        for(int i=0;i<centroidCount;i++)
        {
                centroidList.add(new Centroid(table.get(0).values.size(),i));
        }
    }
    else
    {
        centroidList.clear();
        for(int i=0;i<centroidCount;i++)
        {
                centroidList.add(new Centroid(table.get(0).values.size(),i));
        }
    }

}

public void UpdateRecords()
{
    for(int i=0;i<table.size();i++)
    {
        table.get(i).Update(centroidList, meassureType);
    }
}

public void UpdateClusters()
{
    clusterStop=true;
    for(int i=0;i<centroidList.size();i++) //staiga pa centroidiem
    {
        for(int j=0;j<table.get(0).values.size();j++) //staiga pa kolonnam
        {
            double sum=0;
            double count=0;
            for(int k=0;k<table.size();k++) //staiga pa rindam
            {
                if(centroidList.get(i).type==table.get(k).type)
                {
                    sum+=table.get(k).values.get(j);
                    count++;
                }
            }
            System.out.println(clusterStop);

            double temp=(1/count)*sum;

            **if(centroidList.get(i).dimVal.get(j)==temp);
            {
                System.out.println(centroidList.get(i).dimVal.get(j)+" != "+(1/count)*sum);
                clusterStop=false;
            }**

            centroidList.get(i).dimVal.set(j,temp);
        }
        System.out.println(clusterStop);
    }
}

public void Output()
{
    LinkedList<String> types=new LinkedList<String>();
    for(int i=0;i<table.size();i++)
    {
        if(!types.contains(table.get(i).realType))
        {
            types.add(table.get(i).realType);
        }   
    }   

    for(int i=0;i<centroidList.size();i++) //staiga pa centroidiem
    {       
        for(int j=0;j<types.size();j++) //staiga pa klasem
        {
            int count=0;
            for(int k=0;k<table.size();k++) // staiga pa rindam
            {
                if(table.get(k).type==i && table.get(k).realType.equals(types.get(j)))
                {
                        count++;    
                }
            }
            System.out.println("Centroid "+(i+1)+" has "+count+" of type "+types.get(j));
            //kMeansUI.UpdateLog("Centroid "+(i+1)+" has "+count+" of type "+types.get(j));
        }
    }

    for(int i=0;i<centroidList.size();i++)
    {
        int count=0;
        for(int j=0;j<table.size();j++)
        {
            if(table.get(j).type==i)
            {
                count++;
            }
        }
        System.out.println("Cluster "+i+" has "+count+" records.");
        //kMeansUI.UpdateLog("Cluster "+(i+1)+" has "+count+" records.");
    }
    //kMeansUI.UpdateLog("/-------------------------------------------------------------------------/");

}

public static void main(String[] args)
{
    KMeansV2 test=new KMeansV2();
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:45:42.900

由于计算机内存中十进制数的表示（浮点数，双精度数），您不应该直接比较它们 - 您应该使用增量：

```
 double x = 123.123;
  double y = 123.1234;
  double delta = 0.01;

  boolean areEqual = Math.abs(x - y) <= delta 
```

但我强烈建议您使用其他适用的类型。也许在你的情况下`integer`/`long`是合适的？如果不是，并且您需要精确的精度，请使用`BigDecimal`类实例。另外请记住从字符串构造它们。

关于控制台输出，java 在欺骗你（; - 它使用某种近似值（在内存中 0.1 '几乎' 0.1，它更接近 0.(9)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:46:29.543

由于`double`绝大多数现代处理器都处理浮点数（是双精度浮点数），因此对它们执行操作很少能得到准确的值。

所以你基本上有选择。在比较之前对您的值进行四舍五入，或者自己制定一些比较方法，以允许一些误差范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:49:01.067

if(centroidList.get(i).dimVal.get(j) <--- 你确定那是返回一个双精度值吗？在打印出变量以检查它们的相等性时要注意。它们的字符串表示并不总是相同的作为他们的平等代表。

# git - 当我的项目中没有 10K 文件时，为什么 Codekit 会抱怨 10K 文件？

> ID：15782530
> 
> 赞同：2
> 
> 时间：2013-04-03T08:39:08.170
> 
> 标签：git, codekit

Mac OS 有 10,000 个文件的内置限制，因此如果文件夹中的文件超过 10,000 个，Codekit 会发出警告。

*超出最大项目限制。CodeKit 最多可以同时观看 10140 个项目，这是 Mac OS X 施加的限制。该应用程序当前正在观看 10132 个项目，并且在刷新项目或框架“SocialAppsT”时发现了 12 个新项目。未添加这些项目。减少 CodeKit 中的项目数量，然后单击刷新按钮。*

我有 2000 个以下文件，不包括 .git 文件夹：

```
~/Documents/SomeProject: find . -path ./.git -prune -o -print | wc -l
1966 
```

包括 git 文件夹（默认情况下 Codekit 应该忽略）我有 7000 个文件。

```
~/Documents/SomeProject: find .  -print | wc -l
7064 
```

我怎样才能停止这些警告并让 Codekit 在这个项目上工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T18:39:10.507

通过推特挖掘后找到了解决方案：[https ://twitter.com/MattWilcox/status/273823409266364416](https://twitter.com/MattWilcox/status/273823409266364416)

不活动的项目计入计数。因此，如果您在 Codekit 中有一堆项目，即使未选中，您也会收到此错误。一旦我删除了一些项目，错误就消失了。

似乎可以/应该修复的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T20:48:04.117

检查您的项目文件中对本地文件的符号链接引用，在某些情况下，这似乎会导致 CodeKit 在添加这些文件时循环。

我最近的一个项目的一个例子：

```
index.php -> run-all-tests.php
run-all-tests.php 
```

这导致 CodeKit 增加了`run-all-tests.php`数千次。我怀疑只有在自然文件排序将符号链接放在真实文件之前，或者如果它在同一个文件夹中（因为我没有看到它在所有情况下都会发生）时，它可能才会导致。

修复：*删除符号链接*，或者您可以从编译中*排除文件/文件夹。*

# ember.js - reload() 递归

> ID：15782535
> 
> 赞同：1
> 
> 时间：2013-04-03T08:39:22.957
> 
> 标签：ember.js, ember-data

我使用以下代码`Switchboard`每 x 毫秒重新加载一次。我可以告诉`ember-data`重新加载与递归`SwitchboardEntrys`有hasMany关系的那些吗？`Switchboard`

**应用程序.js**

```
App = Ember.Application.create({
  ready: function() {
    if (reload_interval != 0) {
      var switchboard = App.Switchboard.find(switchboard_id);
      setInterval(function() {
        switchboard.reload();
      }, reload_interval);
    }
  }
});

App.Store = DS.Store.extend({
  revision: 12
});

DS.RESTAdapter.configure("plurals", {
  switchboard_entry: "switchboard_entries"
});

App.Switchboard = DS.Model.extend({
  switchboardEntrys: DS.hasMany('App.SwitchboardEntry'),
  name: DS.attr('string')
});

App.SwitchboardEntry = DS.Model.extend({
  switchboard: DS.belongsTo('App.Switchboard'),
  name: DS.attr('string'),
  path_to_user: DS.attr('string')
}); 
```

# winrt-xaml - Win8：分享功能

> ID：15782536
> 
> 赞同：-2
> 
> 时间：2013-04-03T08:39:25.877
> 
> 标签：winrt-xaml

我需要通过 Windows 共享将信息共享到社交应用程序。我做什么：安装应用程序（Twitter、FB、Latermark）并尝试发布不同类型的信息。但我想检查用户点击了什么（Twitter 或 Facebook 等），在这种情况下，我将发布不同的描述，添加图片......例如，如果用户选择 Twitter，我将添加简短描述“我正在玩...... .bal-bla-bla”如果他通过邮件分享，它会更长“我正在玩......bal-bla-bla（很长的描述）”我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:45:56.013

你不能那样做。共享源应用程序不知道共享接收器，它是设计使然。更重要的是 - 共享合同开始后您无法更改共享内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:05:02.463

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/cb31c30a-1a0a-4311-96b2-5e02459ba217](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/cb31c30a-1a0a-4311-96b2-5e02459ba217) - 感谢您的快速回复和解释

# java - 自动生成泳道图？

> ID：15782538
> 
> 赞同：3
> 
> 时间：2013-04-03T08:39:31.430
> 
> 标签：java, eclipse, eclipse-plugin, flowchart

我们曾经使用流行的编辑器（例如 Visio）来绘制泳道图。eclipse中是否有自动生成泳道图的软件或插件？

就像我们运行我们的应用程序时，软件必须自动跟踪控制流并生成相应的泳道图？

# c# - 来自 .bat 文件 C# 的控制代码

> ID：15782540
> 
> 赞同：1
> 
> 时间：2013-04-03T08:39:30.967
> 
> 标签：c#, batch-file

我是 C# 社区的新手。我有一个控制台应用程序，我通过批处理文件启动它。该`.bat`文件包含以下内容：

```
AffiliationParser.exe "D:\programs\AffiliationParser\Debug\New folder" 
pause 
```

当我运行批处理文件时，我希望代码提取`Folder Path`并将每个`.txt`文件放入路径并应用其余代码。

当我从调试中运行代码时，它工作得很好。**问题是**，当使用批处理文件运行时，它显示错误：

> 未处理的异常：System.IO.DirectoryNotFoundException：找不到路径“D:\programs\Debug\New folder\”的一部分。

请注意，上面错误中提供的**路径**与我在`.bat`文件中编写的路径不同。我以前写过，其实我不知道问题出在哪里。

我的源代码是：

```
using(StreamReader batch=new StreamReader(@"D:\programs\AffiliationParser\Debug\Run.bat")) {
    string bat;

    while(!batch.EndOfStream) {
        bat=batch.ReadLine();

        // do your processing with batch command

        if(bat=="pause") {
            continue;
        }

        string fpath=bat.Substring(bat.IndexOf(" \""));
        string path=fpath.Replace("\"", "");
        string[] name=Directory.GetFiles(path, "*.txt");
        string words=name.Min();
        string word=words.Substring(words.LastIndexOf("\\")).Replace("\\", "");
        string Oword=word.Replace(".txt", "");

        Console.ForegroundColor=ConsoleColor.Yellow;
        Console.WriteLine("================================In progress=====================================");
        Console.WriteLine("Working on File "+word+" in the Path "+path);
    }
} 
```

所以请帮助我，如果我不能正确解释我的问题，我很抱歉。

# coldfusion - 如何将cftimer显示的时间存储在变量中？

> ID：15782544
> 
> 赞同：3
> 
> 时间：2013-04-03T08:39:39.423
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10, cfml

我想将代码执行所花费的时间存储在冷融合变量中。有一个名为 cftimer 的标签显示代码执行所用的时间。有没有办法将 cftimer 标签显示的时间存储在变量中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T09:01:35.190

采用

```
<cfset var startTicks = GetTickCount() />
<!--- code to benchmark --->
<cfset var ticksTaken = GetTickCount() - startTicks /> 
```

为了更好的控制。请注意，刻度是 ms，除非有差异（绝对值没有意义），否则它是无关紧要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T10:46:34.257

正如 Adam 和 MaxH 所说，您将希望使用`getTickCount()`脚本来计时。

getTickCount() 不仅用于故障排除，您还可以用它做很多很酷的事情。如果您愿意，您也可以在您的`onRequest`函数中执行此操作，以对所有脚本进行计时，并在需要时对长脚本做出反应。

```
<cffunction name = "onRequest">
  <cfargument name = "targetPage" ...>
  <cfset startTime = getTickCount()>
  <cfinclude template = "#arguments.targetPage#">
  <cfset processTime = getTickCount()-startTime>
  <cfif structKeyExists(url,"showTime")>
    <cfoutput>The page took #processTime# milliseconds to process</cfoutput>
  </cfif>
  <!--- you could also do other stuff like record processing times to a db or send alerts if processTime > somevalue --->
</cffunction> 
```

我有一个项目依赖于客户订阅的大量外部数据。我将各个进程的所有处理时间保存到会话结构中，这样我就可以查看是我还是导致速度变慢的第 3 方 Web 服务之一。如果其中一项 Web 服务出现故障，我会提醒客户，以便他们决定是否要选择其他服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T09:01:39.947

如果可以的话，这样做会很棘手，并试图从圆孔中取出一个方钉。但是，您可以轻松地使用[`getTickCount()`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6dd0.html)...好吧...手术前后的滴答计数，两者之间的差异是您的持续时间。然后你可以用你想要的做。

# java - 如何将 cookie 中的数据从一个 Web 应用程序传递到另一个

> ID：15782549
> 
> 赞同：1
> 
> 时间：2013-04-03T08:40:04.660
> 
> 标签：java, jakarta-ee, redirect, cookies

我有两个 Web 应用程序部署在不同的应用程序服务器中。我正在从一个 Web 应用程序重定向到另一个。我在 Web 应用程序 1 的 Cookie 对象中设置了一些信息，以便它在 Web 应用程序 2 中可用。我使用 repose.sendRedirect() 发送请求，使用 Cookie[] cookies = request.getCookies() 获取 cookie 信息但我无法得到。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:48:22.020

cookie 是特定于域的，因此如果您的应用程序位于两个不同的域上，您需要使用另一种方式，例如请求参数。

# selenium-webdriver - 在 selenium webdriver 中单击网格格式的按钮

> ID：15782550
> 
> 赞同：0
> 
> 时间：2013-04-03T08:40:05.643
> 
> 标签：selenium-webdriver

如何在 selenium webdriver 中为单击网格格式的按钮编写代码，当由 xpath、classname.click 完成时，代码显示错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:30:36.943

您需要先找到按钮（可以使用 xpath），然后单击找到的元素。

示例（红宝石代码）

```
driver.find_element(:xpath, '//xpath-here').click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:18:20.097

尝试这个

```
selenium.clickAt("//button[@id='blabla']",""); 
```

# windows - 桌面共享

> ID：15782551
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:40:07.200
> 
> 标签：windows, rdp, lync, lync-2010

我想用 Lync 作为服务器来实现桌面共享客户端。Lync 是否使用 RDP，如果是，有人可以指出我的 RDP 实施吗？

我可以调整免费的 RDP 并使其工作吗？感谢您的投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:09:45.340

如果您的另一端没有 Lync 客户端，您将很难让应用程序共享工作。使用 RDP 客户端将不起作用，因为 RDP 只是与机器的连接而不是 SIP 呼叫。应用程序共享流的底层协议可能是相同的（我不知道这一点），但您将丢失处理整个 Lync 连接的部分。

Michael Greenlee 在这里写了一些关于应用程序共享（用于共享桌面）的主题：[Handling applicationsharing calls in UCMA](http://blog.greenl.ee/2012/02/06/handling-application-sharing-calls-ucma/)，关于这个主题的 MSDN 线程在这里：[如何处理应用程序共享邀请](http://social.msdn.microsoft.com/Forums/en-US/ucmanagedsdk/thread/c10fbde5-7193-4910-a249-89999bb5fc3b/)，也许这对你有帮助?

# php - 将变量从 from 传递到控制器 symfony2

> ID：15782552
> 
> 赞同：0
> 
> 时间：2013-04-03T08:40:12.473
> 
> 标签：php, symfony

这是我的表单代码：

```
 class CentrexEdit1Type extends AbstractType
    {
        public function buildForm(FormBuilderInterface $builder, array $options)
        {       
            $builder          
                ->add('bases', 'entity', array(
                  'class'    => 'TelnOperatorBundle:Base',
                  'property' => 'name',
                  'multiple' => true,

                ));
            $ids= $builder->getData()->getBases();  

        }

        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setDefaults(array(
                'data_class' => 'Teln\OperatorBundle\Entity\Centrex'
            ));
        }

        public function getName()
        {
            return 'teln_operatorbundle_centrextype';
        }   

    } 
```

我需要将变量`$ids= $builder->getData()->getBases();`从“CentrexType”传递给控制器​​。我应该使用服务吗？我尝试了 getSession 但失败了。怎么做？

示例：我必须在其中添加 query_builder

```
class CentrexEdit2Type extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {

    $builder->add('softswitchs', 'entity', array(
              'class'    => 'TelnOperatorBundle:Softswitch',
              'property' => 'name',
              'multiple' => true,
              'query_builder' => function(\Teln\OperatorBundle\Entity\SoftswitchRepository $er) use ($ids)
                                         {

                                        $identities=array();
                                        foreach($ids as $id){
                                        $identities[]=$id->getId();
                                        }
                                         $qb = $er->createQueryBuilder('t')
                                                  ->where('t.base IN(:ids)')
                                                  ->setParameter('ids', $identities); 

                                          return $qb;

                                          },
               ));

    } 
```

# jsf - 使用 commandButton 更改 flowScope 值

> ID：15782553
> 
> 赞同：1
> 
> 时间：2013-04-03T08:40:14.003
> 
> 标签：jsf, primefaces

我有一个布尔变量`view-state`：

```
<set name="flowScope.render" value="false" type="java.lang.Boolean" /> 
```

`commandButton`现在我用这个变量渲染一个

```
<p:commandButton value="Show Dates"
                            rendered="#{!render}"
                            update="table1,buttons" /> 
```

现在我想通过单击此命令按钮来更改变量的值。我试过了`setPropertyActionListener`，但它不起作用：

```
<p:commandButton value="Show Dates" rendered="#{!render}" update="table1,buttons">
    <f:setPropertyActionListener value="true" target="#{render}" />
</p:commandButton> 
```

我找不到太多关于如何更改价值的信息。那么这怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:34.267

现在我想通了。
我必须与`transitions`. 在设置变量的相同`view-state`位置，我定义了两个`transitions`：

```
<transition on="rendertrue">
    <set name="flowScope.render" value="true" type="java.lang.Boolean" />
</transition>
<transition on="renderfalse">
    <set name="flowScope.render" value="false" type="java.lang.Boolean" />
</transition> 
```

我不改变存在变量的值，我只是覆盖它。如果这是最好的或清洁的解决方案，我不知道，但它有效。
现在我`transition`用以下`action`语句调用特定的`commandButton`：

```
<p:commandButton value="Show Date"
                            rendered="#{!render}" update="table1,buttons"
                            action="rendertrue" />
<p:commandButton value="Hide Date"
                            rendered="#{render}" update="table1,buttons"
                            action="renderfalse" /> 
```

# php - 从 DB 中的列表中搜索颜色，有一个调色板

> ID：15782555
> 
> 赞同：0
> 
> 时间：2013-04-03T08:40:26.583
> 
> 标签：php, mysql

我有一个从 [http://www.coolphptools.com/color_extract](http://www.coolphptools.com/color_extract)生成的数据库（MySQL）中的颜色列表，可以从这张图片中的颜色托盘中搜索 ![在此处输入图像描述](https://i.stack.imgur.com/1RhSl.png)

查询将是什么，我应该如何将列表保存在数据库中，我很抱歉，但实际上我不知道如何管理，手动为每个图像制作一个列表是很多工作，而且需要时间，而且是不合逻辑，也许存在更好的方法，

我有一个模板列表，我需要创建一个颜色搜索，例如[http://www.templatemonster.com/templates.php](http://www.templatemonster.com/templates.php) ，我只需要知道如何开始

十分感谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:44:58.270

将其存储在数据库中，您可以将红色绿色和蓝色值单独存储，并将十六进制值作为键（甚至将 rgb 值作为复合键）

然后由您决定您将什么定义为“接近另一种颜色”如果您的意思是所有三个颜色通道中颜色的平均差异，那么您将需要构建一个精确的 sql 语句，但是有很多定义什么是“最接近”的，所以这在很大程度上取决于您的具体情况。

# asp.net-mvc - 为什么我应该使用 ViewModel 后缀而不是 VM？

> ID：15782557
> 
> 赞同：1
> 
> 时间：2013-04-03T08:40:29.053
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-viewmodel

这可能是一个愚蠢的问题，但......

我看到标准约定是使用“ViewModel”后缀。

我可以使用 VM 后缀吗？

为什么后缀这么长？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:46:07.230

就像所有的命名约定一样，这并不是说您*不能*使用不同的名称，只是建议您遵守命名规则以获得良好的实践，并在其他开发人员需要重新访问您的代码时善待他们。

如果这是一个个人项目，做任何你想做的事，只要确保你以后能弄明白:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T08:47:23.250

就我个人而言，我从不使用后缀，这几乎与使用 str 和 int 前缀一样糟糕。

将您的视图模型添加到 ViewModel 文件夹中，以便它们与模型分开，这将更改它们的命名空间并使其意图清晰。

我会完全放弃后缀并遵循这种做法。

# php - ZF2 - 如何翻译 Zend 表单验证错误消息？

> ID：15782558
> 
> 赞同：3
> 
> 时间：2013-04-03T08:40:30.090
> 
> 标签：php, zend-framework2

我有不同语言的 .po 和编译的 .mo 语言文件。但是语言翻译不适用于 zend 表单验证错误消息。我不想为此使用额外的 .php 文件，例如 fr.php。

我从[单击此处获得此代码](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.validator.messages.html)

```
$translator = new Zend\I18n\Translator\Translator();
$translator->addTranslationFile(
    'phpArray'
    'resources/languages/en.php',
    'default',
    'en_US'
);

Zend\Validator\AbstractValidator::setDefaultTranslator($translator); 
```

任何解决方案如何在 ZF2 中实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:01:39.527

我不赞成所选的答案：P

在您的配置中添加新的翻译器时，**不要**使用默认的翻译器文本域。语法如下：

```
$translator->addTranslationFile(
    $type,
    $resource,
    $textDomain, //<-- this is the important one
    $lang
); 
```

在您的示例中，您已将文件添加到默认文本域。可悲的是，这带来了很多麻烦，因为它不会总是按预期工作。每当您添加翻译文件时，请将它们添加到您自己的文本域中！

之后，您需要做的就是分配`Zend\Form\View\Helper`您的文本域。这是通过以下方式完成的：

```
// For Labels
$this->formLabel()->setTranslatorTextDomain('your-textdomain');

// For Buttons (input type submit)
$this->formButton()->setTranslatorTextDomain('your-textdomain');

// For Error-Messages
$this->formElementErrors()->setTranslatorTextDomain('your-textdomain'); 
```

**如何让 ServiceManager 进入表单？**

这也很容易。最简单的方法是使用或`constructor-injection`注入您的表单。在控制器级别上，这看起来像这样：`ServiceManager``ServiceLocator``__construct()`

```
$serviceLocator = $this->getServiceLocator();
$form           = new My\Form($serviceLocator); 
```

[可以在我的博客](http://samminds.com/2013/03/zendformelementselect-and-database-values/)上找到对 Form-Dependencies 的更深入介绍，其中我说明了`Zend\Form\Element\Select`依赖 Database-Connections 上的 -Element 的数量。

**关于翻译器本身**

另一件需要注意的事情是：只要有一个 Translator-Service 附加到您的配置中，名称为`translator`，它将自动附加到表单作为默认翻译器。这是我经常在我的模块中使用的示例配置：

```
'translator' => array(
    'locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type'     => 'phparray',
            'base_dir' => __DIR__ . '/lang',
            'pattern'  => '%s.php',
            'text_domain' => __NAMESPACE__,
        ),
    ),
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:14:25.457

只需添加您的`.po`or`.mo`文件而不是`.php`那些，即像这样：

```
$translator = new Zend\I18n\Translator\Translator();
$translator->addTranslationFile(
    'gettext'
    'resources/languages/fr.mo',
    'default',
    'fr_FR'
);
Zend\Validator\AbstractValidator::setDefaultTranslator($translator); 
```

然后翻译它，使用

```
echo $this->formElementErrors($form->get("username"),
                              array('message' => $this->translate("errormessage"))
); 
```

我不知道 ZF2 中的翻译性能如何，但在 ZF1 中，在`.php`文件中使用数组比任何其他方法都快。

# java - 将焦点放在 WebElement 上？

> ID：15782564
> 
> 赞同：1
> 
> 时间：2013-04-03T08:40:47.627
> 
> 标签：java, selenium, selenium-webdriver

我目前正在测试我的应用程序的 GUI，我想知道是否可以将焦点设置为 WebElement ？

我正在使用 Selenium 2.0 和 webdriver。

所以我正在寻找类似的东西：`driver.findElement(xxxx).setfocus();`

谢谢你。

编辑：我已经测试过那种棘手的事情

```
// getting the element WebElement 
eSupplierSuggest = driver.findElement(By.xpath("..."));

//get le location and click 
Point location = eSupplierSuggest.getLocation();
new Actions(driver).moveToElement(eSupplierSuggest, location.x, location.y).click();

//or

//directly perform
new Actions(driver).moveToElement(eSupplierSuggest).click().perform(); 
```

我在某处红色单击焦点元素，但在我的情况下，没有任何效果。哈哈

PS：这是该原始帖子的子问题[单击建议框，webdriver](https://stackoverflow.com/questions/15780909/click-on-a-suggestbox-webdriver)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T03:33:42.473

我通常会向元素发送一个空键，以便它获得焦点。例如：

```
element.send_keys "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T12:54:43.467

为了将焦点设置在元素上，您可以使用 executeScript 方法，如下所述：

```
JavascriptExecutor js;
js.executeScript ("document.getElementById('x').focus()"); 
```

设置焦点后，您可以轻松使用 webdriver api 提供的 send_keys。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:28:13.573

WebDriver API 中没有将焦点设置在元素上的函数。

如果你想这样做，你必须编写一些 JavaScript 来设置焦点，然后使用 JavaScriptExecutor 来运行 JavaScript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T10:14:02.017

尝试使用 cssSelector 进行自动建议单击，如下所示，如果您仍然遇到问题，请告诉我。

```
 // supplier ops, i find and type data into the input
    WebElement eSupplier = driver.findElement(By.id("supplier:supplierOps_input"));
    eSupplier.sendKeys("OPS1");
    sleep(5); // wait the suggestbox

    // i find the suggestbox
    WebElement eSupplierSuggest = driver.findElement(By.cssSelector("css path of that specific value in the auto suggestion box"));
    eSupplierSuggest.click();
    sleep(5); // wait the refresh for the next field supplierAddress 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:13:05.923

确保您没有更改框架....否则 .click() 应该可以解决问题

# mysql - 如何更改 Cloudbees 上 MySQL root 用户的默认密码？

> ID：15782566
> 
> 赞同：1
> 
> 时间：2013-04-03T08:40:55.773
> 
> 标签：mysql, cloudbees

我们在 Cloudbees 上运行 Jenkins，以从 Github 存储库为 MifosX 构建我们的代码库。对于我们的集成测试作业，我们需要在每次运行之前创建一个 MySQL 数据库。我们已经能够做到这一点，但想将默认的 MySQL 凭据（即“root”和空白密码）更改为某个特定的“密码”。有人可以指导我们如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:25:07.263

我假设您正在遵循[本指南](http://wiki.cloudbees.com/bin/view/DEV/MySQL)。

如果是这种情况，您应该能够按照标准 MySQL 说明设置 root 用户的密码：

```
mysqladmin -u root password NEWPASSWORD 
```

但我不确定您为什么要使用密码来保护它。任何网络端口都与其他用户隔离，他们当然无权访问您的文件。

# c# - 派生类中的 AssemblyInitialize

> ID：15782577
> 
> 赞同：12
> 
> 时间：2013-04-03T08:41:26.370
> 
> 标签：c#, mstest

我有一个抽象的基础测试类，它有一个`AssemblyInitialize`应用于方法的属性。但它永远不会被执行......抽象基测试类在另一个程序集中，因为它用于通用扩展。任何想法如何解决这个问题？

编码

```
[TestClass]
public abstract BaseTestClass
{    
   [AssemblyInitialize]
   public static void AssemblyInit(TestContext context)
   {
      //DoDomething
   }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T09:06:31.183

发生这种情况是因为如果您不从中运行测试，则永远不会初始化程序集。我可以给出的一个解决方案（也许是一个傻瓜）是`AssemblyInitialize`在其他程序集上使用并调用基础`AssemblyInitialize`

在`TestProject`包含测试的其中添加以下代码：

```
[TestClass]
public class UnitTest1
{
    [AssemblyInitialize]
    public static void AssemblyInitialize(TestContext testContext)
    {
        // call the base AssemblyInitialize
        BaseTestProject.BaseTest.AssemblyInitialize(testContext);
    }

    public TestContext TestContext { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T08:49:40.683

尝试在您的测试项目中实现一个没有继承的单独类：

```
[TestClass]
public static class YourClass
{
    [AssemblyInitialize]
    public static void AssemblyInit(TestContext context)
    {
       //DoSomething
    }
} 
```

它应该被调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-01T15:35:16.813

当我没有用`[TestClass]`属性标记测试基类时，我遇到了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-06T03:50:15.007

您还应该能够注入`TextContext`，这更清洁，并且如果需要，还`TestContext`可以在单​​独的步骤中轻松使用绑定程序集。

```
class Hooks
{
    private readonly ScenarioContext _scenarioContext;

    public Hooks(ScenarioContext scenarioContext, TestContext context)
    {
        _scenarioContext = scenarioContext;
    }

    [AfterStep]
    public void AfterStep()
    {
    }
} 
```

# algorithm - 使用递归关系的程序的时间复杂度

> ID：15782579
> 
> 赞同：-2
> 
> 时间：2013-04-03T08:41:32.000
> 
> 标签：algorithm, math, recursion, time-complexity

这个程序计算斐波那契数。我想使用递归关系找出它的时间复杂度。

```
Fib(n)
if n<=1
  return n
else
  x= Fib(n-1)
  y= Fib(n-2)
  return x+y 
```

该程序的递推方程为 **T(n)=T(n-1)+T(n-2)+c**

我试图消耗它，但找不到解决方案。

```
 =2T(n-1)+T(n-3)+c+c
 =3T(n-3)+2T(n-4)+c+c+3c
 =5T(n-4)+3T(n-3)+c+c+3c+5c
 -------------------------
 -------------------------
 ------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:11:42.940

您需要考虑对函数进行了多少次调用。每次调用都会产生 2，因此它会产生一棵二叉树：

n

(n-1)-------------(n-2)

(n-2)--(n-3)------(n-3)---(n-4)

等等。

当你第一次达到 1 时考虑树的级别并忽略下面的所有内容。这发生在第 n/2 级（因为每个级别的最小数字是最右边的，并且它总是减少 2）。很明显，直到 n/2 的每一层上的节点总是是前一层的两倍。

因此节点总数为 1 + 2 + 2^2 + ... + 2^(n/2) = 2^(n/2+1) - 1 = O(2^(n/2))

这意味着时间复杂度至少是指数级的。

您可能可以更准确地计算它，但出于所有实际目的，这应该足以避免这种实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:35:34.427

给定的递归关系是，

```
T(n) = T(n-1) + T(n-2) + c   ------ 1
T(n-1)= T(n-2) + T(n-3) + c ------ 2

1-2 -> T(n) = 2T(n-1) - T(n-3) ----- 3
T(n) - 2T(n-1) + T(n-3) = 0 ----- 4 
```

4的特征方程为**x ³ - 2x ² + 1 = 0 ---- 5**

求解方程 5，

解决方案`x = 1`是`x = (1 + √5)/2`和`x = (1 −√5)/2`

一般解决方案是 **T [n] = a((1 + √5)/2) ^n + b((1 - √5)/2) ^n + c 。1^个**

**T** **[n]** **= a((1 + √5)/2)** n **^+** **b((1 - √5)/2)** **^n** **+ c**

让我们假设**T(0) = 0**，从等式 1 我们得到**T(1) = c**和**T(2) = 2c**

其中， **T(0) = a + b + c = 0 ---- 6**

**T(1) = a((1 + √5)/2) + b((1 - √5)/2) + c = c**

有**a((1 + √5)/2) + b((1 - √5)/2) = 0 ----- 7**

**T(2) = a((1 + √5)/2) ² + b((1 - √5)/2) ² + c = 2c**

有**a((1 + √5)/2) ² + b((1 - √5)/2) ² = c ---- 8**

求解 6、7 和 8，得到 a、b 和 c 的值。

一般的解决方案是，

**T [n] = a((1 + √5)/2) ^n + b((1 - √5)/2) ^n + c**

因为**(1 + √5)/2 < 2** ,

**T(n) = O( ^(2n) )。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:27:49.513

关于*您的*递归关系需要注意的是，它***与 Fibonacci 递归本身相同***。这意味着`c`无论您计算的是什么斐波那契数，您都在做工作时间单位。您可以从您计算的前几个步骤中自己看到它。开始像斐波那`c`契数列一样增长。

基本上你的复发归结为 O(Fib(n))。斐波那契数在 中是指数的`n`，所以你要做指数工作。

一个更好的方法是记住其中一个数字。像这样：

```
Fib(n):
    if n <= 2:
        return 1,0
    else:
        x,y = Fib(n-1)
        return x+y,x 
```

因此，当您调用 时`Fib(n)`，您会得到两个值，Fib(n) 和 Fib(n-1)。您返回的额外`x`内容“记住”了 Fib(n-2)，因此您不必计算两次。*这种*递归归结为`T(n) = T(n-1) + c`，即 O(n)。

一旦你有了它，你可以把它减少到一个不错的小 for 循环：

```
x = 1, y = 0
for i from 3 to n:
    x,y = x+y,x 
```

# linux - 为什么我运行 GStreamer 应用程序时会发出警告？

> ID：15782584
> 
> 赞同：1
> 
> 时间：2013-04-03T08:41:50.057
> 
> 标签：linux, gstreamer

我可以编译在[这里](http://docs.gstreamer.com/pages/viewpage.action?pageId=327735)找到的第一个 gstreamer 教程。

但是，当尝试运行它时，我收到如下警告：

```
(basic-tutorial-1:27661): GStreamer-WARNING **: Failed to load plugin '/usr/lib/gstreamer-0.10/libgstffmpeg.so': /usr/lib/x86_64-linux-gnu/libavcodec.so.53: undefined symbol: lame_set_VBR_quality
Cannot connect to server socket err = No such file or directory
Cannot connect to server socket
jack server is not running or cannot be started 
```

我该如何解决这个`lame_set_VBR_quality`问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:46:37.843

输出中报告了两个不相关的问题：

## gstffmpeg

在启动时，gstreamer 会扫描可用的插件并尝试加载它们。这些插件中有文件`/usr/lib/gstreamer-0.10/libgstffmpeg.so`.

您似乎安装了不兼容的库（例如，您的 gstreamer“ffmpeg”插件依赖于不同版本的`libavcodec.so`），因此无法加载 ffmpeg-plugin 集。

问题与 gstreamer 本身并没有真正的关系，而是与您安装这些库的方式有关。

因为linux-distributions通常都是关于解决包间依赖关系（所以如果你只安装了“bar-0.1”，你就永远不能安装依赖于“bar-0.4”的包“foo-2.0”），我猜您添加了一些非官方的不受支持的 3rd-party 存储库（例如，在 debian 上，一个常见的令人头疼的来源是*deb-multimedia*存储库；其他发行版会有其他的）。

如果安装的所有库都来自您发行版的官方存储库，那么您很可能在打包中遇到错误，您应该将错误报告给提供错误库的包的维护人员。

## 杰克

关于 jack 无法启动的另一个“错误”是因为您正在使用的管道使用通用`playbin2`元素，该元素会探测可用的播放后端。在这样做的同时，它还尝试连接到正在运行的[jack](http://jackaudio.org) -server，但未能这样做，并且（希望）回退到另一个可用的音频框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:03:16.873

关于音频方面的另一条评论。检查是否像 gst-launch audiotestsrc 这样简单！autoaudiosink 工作。使用 pulsesink 或 alsasink 而不是 autoaudiosink 重试。在考虑杰克之前，将尝试这两个。

# image - 以 24 位颜色存储一维信息的一致方法

> ID：15782586
> 
> 赞同：1
> 
> 时间：2013-04-03T08:42:00.523
> 
> 标签：image, matlab, opencv, colors

假设我有一个标量信息分配给`2D`矩形的每个像素`R`，例如灰度图像或深度图/凹凸图。

![在此处输入图像描述](https://i.stack.imgur.com/t5lev.jpg)

这样的标量信息被规范地编码在`8 bit`图像中，这允许`2^8=256`不同的色调。方便的是，这里的音调具有非常**直观的含义**，例如`white=0`, 。`black=1``gray=somewhere between 0 and 1`

一旦图像被保存，例如在 .png 中，色调`t`, `0 <= t <= 255`, 将被编码为`RGB`颜色`[t,t,t]`（这会浪费`16bit`每个像素）。

* * *

**问题：** 说，灰度提供的分辨率`8 bit`不足以满足我的目的。

是否有既定的方法可以将`24bit`（1D）信息无损编码到`RGB`颜色空间，保留颜色的一些**直观含义**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:51:23.230

您可能需要考虑[Hilbert 曲线](http://en.wikipedia.org/wiki/Hilbert_curve)。这是将一维曲线嵌入到更高维（2、3 或更多）空间中。

这是将一维曲线映射到二维颜色空间的情况。白色曲线有 2^16 = 65,536 个点，并嵌入到 2^8 x 2^8 = 256 x 256 维色彩空间中。曲线上的任何两个相邻点都非常相似。

可以将其概括为将曲线嵌入到三个维度中，尽管我手头没有代码。如果您愿意，我可以使生成此图的 Matlab 代码可用，但我不相信它会很有帮助...

![在此处输入图像描述](https://i.stack.imgur.com/ekPyd.jpg)

这是通过图像中的希尔伯特曲线最终得到的色阶。不是超级直观，但它确实涵盖了所有 65,536 种颜色。

![在此处输入图像描述](https://i.stack.imgur.com/BEuZa.png)

**编辑**- 这是代码

```
function [x,y] = d2xy(n,d)
# D2XY Embeds a point d into an n*n square (assuming n is a power of 2). For
# example, if n = 8 then we can embed the points d = 0:63 into it.
    x = uint32(0);
    y = uint32(0);
    t = uint32(d);
    n = uint32(n);
    s = uint32(1);
    while s < n
        rx = bitand(1, idivide(t, 2));
        ry = bitand(1, bitxor(t,rx));
        [x,y] = rot(s,x,y,rx,ry);
        x = x + s * rx;
        y = y + s * ry;
        t = idivide(t, 4);
        s = s * 2;
    end
end

function [x,y] = rot(n,x,y,rx,ry)
    if ry == 0
        if rx == 1
            x = n-1-x;
            y = n-1-y;
        end
        # Swap x and y
        t = x; x = y; y = t;
    end
end

b = zeros(65536, 2);

for d = 0:65535
  [x,y] = d2xy(256, d);
  b(d+1,1) = x;
  b(d+1,2) = y;
end

plot(b(:,1), b(:,2)), xlim([-1,256]), ylim([-1,256]), axis square 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:24:04.577

HSV 或 HSI 颜色空间正是您要寻找的： http: [//www.mathworks.com/help/matlab/ref/rgb2hsv.html](http://www.mathworks.com/help/matlab/ref/rgb2hsv.html) HSI 表示色调、饱和度和照度或强度。色调给出了颜色频率，表示颜色非常直观

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:39:51.910

我认为您可以量化为 8，即将强度 / 8 分配为等于 3 种颜色（您会得到灰色）并将剩余位（强度 % 8）添加到分离的 R、G、B 的 LSB。我们可以做一个本地添加。类似的东西（未经测试但已编译）

```
int convert(int N) {

    int Q = N / 8,  //  Q + Z == N
        Z = N % 8;

    int R = (Q >>  0) & 0xFF,
        G = (Q >>  8) & 0xFF,
        B = (Q >> 16) & 0xFF,
        S = R + ((Z >> 0) & 1),
        H = G + ((Z >> 1) & 1),
        C = B + ((Z >> 2) & 1);

    return (S << 0) + (H << 8) + (C << 16);
} 
```

# authentication - 使用 LDAP/AD 控制对程序的访问 - 帐户密码是什么？

> ID：15782587
> 
> 赞同：0
> 
> 时间：2013-04-03T08:42:04.137
> 
> 标签：authentication, active-directory, passwords, ldap

尽管除了 LDAP 和 AD 的基本功能（在本例中为 Microsoft）之外，我对 LDAP 和 AD 几乎一无所知，但我被要求修改一个程序，以便它可以检索用户的电子邮件地址。该应用程序可以配置为使用 LDAP。我不确定它是如何使用它的——这与将应用程序的密码与用户的 LDAP 密码同步有关。应用程序有一个密码，它可能与用户的 LDAP 密码不同。有一些机制可以同步密码 - 但理论上我不应该担心 - 我被告知它有效。

当然，我们这里没有 LDAP 服务器供我尝试。

所以我在 PC 上安装了 Windows 2003 服务器，并在其上启用了 LDAP（我可以告诉你，这是一个巨大的学习曲线）。我添加了几个用户。甚至设法让其中一个成为域管理员的成员。

在我正在处理的应用程序中，有一个设置工具来配置与 LDAP 的连接。这有一个有用的测试设置按钮。如果我输入服务器 IP 地址和端口号，然后按测试设置，它会告诉我测试成功。嗯——这似乎不太可能。它还要求提供其他信息：

*   服务帐户 DN
*   服务帐号密码
*   用户帐户容器。

如果我将这些留空并保存设置，那么我现在可以启动应用程序，并且只输入用户名并输入任何密码或不输入密码 - 这当然是不正确的 - 它应该会阻止我启动我的应用程序。所以我只能假设我需要设置这三个信息。

我创建的 LDAP 服务器被称为，我相信，`Aware.Server`

所以我已经`DC=AWare, DC=Server`输入了服务帐户 DN（我只是在这里猜测，不确定里面应该有什么）和`cn=Users, DC=AWare.Server`用户帐户容器（同样，我真的不知道那是什么，或者是什么意思在那里）。

我不知道服务帐户密码是什么，所以我将其留空。

当我按下测试设置时，它要求我输入用户名和密码。

如果我将这些留空，则表示测试成功。我开始担心了。

如果我输入我在 LDAP 中输入的用户名和密码，则表示测试成功。

实际上，如果我在那些盒子里放任何东西，它就说它是成功的。

但是，如果我在服务帐户密码中输入了一些内容，则测试不成功 - 它表示提供的服务帐户的用户名或密码无效。

所以此时的主要问题是 - 我如何找出服务帐户密码是什么？

我的行为是可以预期的吗？谢谢史蒂夫

验证登录的代码包括：

```
Public Shared Function ValidateUser(ByVal server As String, ByVal port As Integer, ByVal userBase As String, ByVal userName As String, ByVal password As String, ByVal bindUser As String, ByVal bindPassword As String) As LdapValidatorResult
            Dim retVal As New LdapValidatorResult
            Dim conn As New Novell.Directory.Ldap.LdapConnection()
            Try

                'connect to the specificed server for user validation
                conn.Connect(server, port)

                retVal.Result = LdapValidatorResultType.Success
                Try
                    'now authenticate to we can then go on to see if the username specificed exists
                    conn.Bind(bindUser, bindPassword)

                    'construct the distinguished name to uniquely id the specified user
                    Dim searchString As String = String.Format("CN={0},{1}", userName, userBase)

                    'look to see if the user attempting to login to a-ware exists
                    Dim sResults As LdapSearchResults = conn.Search(searchString, Novell.Directory.Ldap.LdapConnection.SCOPE_SUB, Nothing, Nothing, False) '"(&(!(objectClass=computer)))"
                    If sResults.hasMore Then

                        Try

                            'now validate the user with the password as the final check
                            Dim userDN As String = sResults.next.DN
                            conn.Bind(userDN, password)
                            retVal.Result = LdapValidatorResultType.Success

                        Catch ex As Novell.Directory.Ldap.LdapException
                            If ex.ResultCode = Novell.Directory.Ldap.LdapException.INVALID_CREDENTIALS Then
                                retVal.Result = LdapValidatorResultType.InvalidUserNameOrPassword
                            End If
                            retVal.ExceptInfo = ex
                        End Try

                    Else
                        retVal.Result = LdapValidatorResultType.NonExistentUser

                    End If
                Catch ex As Novell.Directory.Ldap.LdapException
                    Select Case ex.ResultCode
                        Case Novell.Directory.Ldap.LdapException.INVALID_CREDENTIALS
                            retVal.Result = LdapValidatorResultType.InvalidBindUserNameOrPassword
                        Case Novell.Directory.Ldap.LdapException.CONNECT_ERROR
                            retVal.Result = LdapValidatorResultType.ServerDown
                    End Select

                    retVal.ExceptInfo = ex
                End Try

            Catch ex As Novell.Directory.Ldap.LdapException
                Dim cause As System.Net.Sockets.SocketException = TryCast(ex.Cause, System.Net.Sockets.SocketException)
                If cause IsNot Nothing Then
                    Select Case cause.ErrorCode
                        Case 1101
                            retVal.Result = LdapValidatorResultType.InvalidNameIp
                        Case 1106
                            retVal.Result = LdapValidatorResultType.RefusedConnectionOnPort
                        Case 10060
                            retVal.Result = LdapValidatorResultType.ServerDown
                    End Select
                End If
                retVal.ExceptInfo = ex
            End Try

            Return retVal
        End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:34:00.037

看起来它希望您在您的域中创建一个用户帐户以供该应用使用。每个对象都有一个专有名称 (DN)。所以它询问您创建的用户的 DN 及其密码，以及您在其中创建用户的容器的 DN。我不知道您的域名 DNS 名称是什么，但我猜它是 AWare。服务器。因此，如果您使用密码 P@ssw0rd 在默认用户容器中创建用户名为 appuser 的用户，那么您将提供以下内容：

服务帐户 DN：CN=appuser,CN=Users,DC=AWare,DC=Server 服务帐户密码：P@ssw0rd 用户帐户容器：CN=Users,DC=AWare,DC=Server

# symfony - 模板中的 Symfony2 翻译不适用

> ID：15782591
> 
> 赞同：1
> 
> 时间：2013-04-03T08:42:10.930
> 
> 标签：symfony, translation

我的树枝模板中有这个：

```
{% trans %}lala{% endtrans %}
{{ 'Presentation'|trans|raw }}
and lots of not translatable twig html in between. 
```

它应用翻译的唯一方法是在控制器操作中我调用翻译器：

```
$t = $this->get('translator')->trans('lala'); 
```

如果我评论上面的行，则不会发生翻译。我怎么能强迫它？（好吧，我做错了什么？）

有关更多信息，这是我的 config.yml 文件：

```
framework:
    translator:      { fallback: %locale% }
    default_locale:  "%locale%" 
```

我通过我的路由获取语言环境变量：

```
my_bundle_name:
    resource: "@MyBundle/Resources/config/routing.yml"
    prefix:   /{_locale}/add
    requirements:
        _locale: en|ja 
```

编辑：这些文件的位置就像一个普通的 symfony 项目。我的树枝模板位于：

```
src/COMP/myBundle/Resources/views/entity1/new.twig.html 
```

唯一的区别可能是它扩展了位于

```
src/COMP/myBundle/Resources/views/base.html.twig 
```

翻译也位于 Resources 文件夹中：

```
src/COMP/myBundle/Resources/translations/messages.en.xlf
src/COMP/myBundle/Resources/translations/messages.ja.xlf
src/COMP/myBundle/Resources/translations/validators.ja.xlf 
```

控制器也位于默认位置：

```
src/COMP/myBundle/Controller/myentitycontroller.php 
```

我一直在使用这个技巧进行开发，明确调用翻译器，现在即使没有这种解决方法，它也突然可以工作。而且我无法像以前一样重复同样的行为。

我仍然很好奇为什么会发生在我身上，但也许我应该删除这个问题......

我的第一个猜测是我试图翻译一个“部分”的模板。我的意思是，从 base.html.twig 我调用了一个控制器的动作：

```
{{ render(controller('COMPMyBundle:Default:Welcome', {'aprequest': app.request})) }} 
```

但我无法重复同样的行为。（以前，当我发生这种情况时，现在，当我试图获得相同的行为时，我多次清除缓存，所以不应该那样）。

# cordova - MonkeyTalk 是否支持基于 PhoneGap Sencha Touch 的 Mobile Hibrid 应用程序？

> ID：15782600
> 
> 赞同：1
> 
> 时间：2013-04-03T08:42:29.577
> 
> 标签：cordova, sencha-touch-2, monkeytalk, hybrid-mobile-app

我们有一个基于 PhoneGap Sencha Touch 的移动混合应用程序，我想在自动化测试中使用 MonkeyTalk。有人能帮我吗？提前致谢。

我安装了monkeytalk-1.0.40，效果很好。有了它，我可以很好地测试原生应用程序。

我用PhoneGap构建了一个Hybrid Application，非常简单，只有1个代码是加载Sencha Touch示例页面：super.loadUrl(" [http://dev.sencha.com/deploy/touch/examples/production/index. html](http://dev.sencha.com/deploy/touch/examples/production/index.html) ");

我还按照 MonkeyTalk 的用户指南 (www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/install-agent/android) 做了所有事情。

然后，一切准备就绪，将简单的 Hybrid Application 部署到设备模拟器。MonkeyTalk IDE 也可以连接到应用程序。我记录了一些动作（点击一个字段并在其中输入了一些字符），但只记录了一些“WebView * 点击”动作（没有点击位置信息）。当我重放它时，它也可以重放一些点击动作，但是没有位置，点击位置不正确。

所以，我必须手动编写一些动作。我发现有时“标签点击”操作可以工作，但有时它会点击不正确的元素。当我进入表单页面（Kitchen Sink -> 用户界面 -> dev.sencha.com/deploy/touch/examples/production/index.html 上的表单）时，我播放了一个动作来点击一个字段，整个 UI移动到屏幕的左下角，很奇怪。而且，我尝试向“名称”字段发送一些文本，但没有任何反应。

你知道是什么问题吗？有可能修复吗？我应该怎么做？

非常非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-22T17:28:38.423

由于 Steve McGarret 所说，使用 Sencha 构建的应用程序并不是最容易测试的，但 MonkeyTalk 使用其[文档网页中解释的替代方法完成了工作：](http://www.cloudmonkeymobile.com/monkeytalk-documentation/monkeytalk-language-reference/command-syntax)

> MonkeyId 也可以指定为 #N 形式的从 1 开始（不是从零开始）的索引。在这种情况下，MonkeyId 标识当前显示的指定类型的第 N 个组件。组件根据最左上角的位置进行索引，即通过 (x,y) 坐标对组件进行排序。

假设您想要自动注册用户。该页面很可能包含多个输入字段，但您不能使用它们的 ID，因为如果您导航到另一个视图，它们会发生变化。以下是您可以执行的操作：

*   打开 chrome 并使用其网络检查器 (chrome://inspect/#devices) 来查找您想要的元素。让我们假设一个具有属性“name”和值“firstName”的输入框。
*   转到 MonkeyTalk 并打开组件树。按“输入”一词过滤。
*   记下它在树中的位置（例如 3）并开始编写脚本：
    *   输入 #3 EnterText 约翰
    *   输入#4 EnterText Doe
    *   (...)

就是这样。MonkeyTalk 将完美地播放您的脚本。如果其他人有更好的解决方案来获取组件树中元素的位置，请告诉我 - 否则如果您的页面有很多 div/元素并且不值得麻烦，这是一个非常痛苦的过程。不妨使用另一个测试框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T10:06:36.147

我使用 MonkeyTalk 和 Sencha 已经有一段时间了。据我了解，MonkeyTalk 为当前视图上的每个（Web-）元素创建了自己的 ID（MonkeyID）。一旦一个元素获得了它的 MonkeyID，它将在接下来的测试中保留它。问题是，Sencha 并没有为它的 WebElements 创建唯一的 ID。这有点令人困惑，因为它根本不合逻辑。

无论如何，Sencha 所做的是生成通用 ID，因此它们仅在当前视图中是唯一的。当您切换到另一个视图并稍后返回时，所有元素可能具有不同的 ID。也许您可以在 Sencha 设置中更改此设置...

这就是为什么 MonkeyTalk 无法为这些元素创建 MonkeyID，而 MonkeyID 是 Monkeytalks 与元素交互的唯一方式，您根本无法单击它们、向它们发送文本或以任何其他方式与它们交互。到目前为止，我发现的使 Sencha 应用程序自动化的唯一解决方案是使用 XPath 并引用元素的标签。但不幸的是 MonkeyTalk 不支持...

# sql - where 子句 regexp_like（换行符、回车符、双空格、�）

> ID：15782603
> 
> 赞同：1
> 
> 时间：2013-04-03T08:42:43.717
> 
> 标签：sql, regex, oracle

我想问你是否有人可以帮助我编写一个正则表达式来检查数据库中的（换行符、回车符、双空格、...）。

我用一些 or 和 instr 函数实现了相同的功能，但想学习一些关于 reg 表达式的知识。

所以这是我的工作 where 子句来识别这种情况：

```
and ((instr (the_value, CHR (10)) > 0) 
  or (instr (the_value, CHR (13)) > 0) 
  or (instr (the_value, '  ') > 0) 
  or (instr(the_value,'�') > 0)
) 
```

非常感谢您的任何支持，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T09:14:29.490

# sql-server-2008 - 单元格的值无效

> ID：15782605
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:42:51.797
> 
> 标签：sql-server-2008

我正在尝试在 Microsoft SQL Server Management Studio 中填充我的表客户。

我收到以下错误。![在此处输入图像描述](https://i.stack.imgur.com/vRTIe.png)这

我是 SQL 新手，如果有人遇到过这种类型的错误，将不胜感激。

**编辑 #1**这是大部分表格

![在此处输入图像描述](https://i.stack.imgur.com/aEZlK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-07T11:46:05.590

我也遇到了这个问题，它有助于关闭和重新打开解决方案，前提是一个具有正确的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:49:05.337

您对组织名称使用**varbinary**类型，并尝试插入字符串格式“Microsoft”的值。将数据类型更改为 varchar 或插入列二进制数据。

# shell - 从系统外壳执行 Ipython 脚本

> ID：15782606
> 
> 赞同：0
> 
> 时间：2013-04-03T08:42:53.497
> 
> 标签：shell, ipython

与我们可以使用 shebangs（或 windows 上的 PyLauncher）执行常规 Python 的方式相同，我们可以对 Ipython 和 .ipy 文件执行相同的操作吗？

在 Windows 注册表中注册 IPython，双击 .ipy 启动 IPython 控制台。或者从 linux 中添加一个 'i' 到 '/usr/bin/python' 并执行。

在 Windows 中，这将非常有用，因为“系统集成”中最棘手的部分之一是命令行参数。如果这些可以塞到shebang（pylauncher风格）的文本文件中，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T16:41:25.130

不确定我是否完全理解您的问题，但您可以在 Windows 上创建一个 py.ini 文件，如PEP 397[的定制命令部分所述](http://www.python.org/dev/peps/pep-0397/)，其中 PyLauncher 是一个实现。

```
[commands]
ipython=C:\Anaconda\Scripts\ipython.exe -v 
```

更改安装本地 IPython 的路径。如果您将 .ipy 文件扩展名与 plauncher 可执行文件（通常为 C:\Windows\py.exe 并且您可以将 py.ini 文件保存到相同路径）相关联，并在 .py/ 顶部使用下面的 shebang。 ipy 文件，它们应该使用 ipython 和 py.ini 文件中指定的选项运行

```
#! ipython 
```

您还可以将 ipython.exe 与 Windows 上的 .ipy 文件相关联，它将运行 .ipy 文件。

# java - Google App Engine 没有选择 Log4j

> ID：15782610
> 
> 赞同：0
> 
> 时间：2013-04-03T08:43:07.363
> 
> 标签：java, google-app-engine, logging, log4j, appender

使用文件附加程序时，Google App Engine 不会创建文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:36:23.287

Google App Engine 根本不提供对文件系统的访问。您[可以](https://developers.google.com/appengine/kb/java?hl=en#readfile)从您的网络应用程序中读取，但您[不能](https://developers.google.com/appengine/kb/java?hl=en#writefile)在任何地方写入。对于您使用的任何框架，这些限制都是相同的。

最常见的例子：您只能使用[File Streaming API](http://commons.apache.org/proper/commons-fileupload/streaming.html)上传文件，而无需将实际文件存储在某个临时文件夹中。

# widget - Wordpress―在管理面板中创建 Widget 后运行 JS

> ID：15782617
> 
> 赞同：2
> 
> 时间：2013-04-03T08:43:40.327
> 
> 标签：widget, wordpress, wordpress-theming

我正在开发一个包含自定义小部件的 Wordpress 主题，一切正常，但有一件事我不知道如何正确实现：

我想在管理面板中创建小部件实例后运行一些 Javascript，这意味着在小部件被放到侧边栏中之后的那一刻，而不是在保存之后。

我在加载页面或保存小部件后运行 JS 没有问题，我想在用户刚刚将新实例放入侧栏后运行 Javascript，实际上可能会发生不止一次而无需重新加载页面。

问候菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T23:20:15.387

Place a script tag in the widget form function.

```
function form($instance)
{
?><script type="text/javascript">console.log("firing javascript");</script>
<?php
//form details...

} 
```

I eventually went a different way with this. Loaded our plugin admin script on the page using wp_enque_script and then just used jquery selectors and an event handler to target the right widget.

```
$('div.widgets-sortables')
                .on('sortstop', function (event, ui) {
                    // only if this widget has the proper identifier...do something
                    if (ui.item.find('.my_widget').length == 0)
                        return;
                    run some function... 
```

Still not my favourite technique...but it is cleaner then coding it in the widget. Does require a variable to track created widgets and using the "this" variable is useful

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T12:08:22.770

我刚刚想出了另一种方法——

我将展示一个涉及依赖关系的更复杂的示例，尽管意识到这一点`Custom_Widget::form()`是问题的真正答案：

```
function add_js_deps() {
  if (is_admin()) {
    wp_enqueue_script('jquery-ui-accordion');
  } 
}
add_action( 'init', 'add_js_deps' ); // "init" because wp_enqueue_scripts is too late.

// Then in the widget....
class Custom_Widget extends WP_Widget {
  public function form($instance) {
    /** Collapsing accordion-y form HTML here **/
    wp_enqueue_script('custom-js', plugins_url('js/my.js', __FILE__), array('jquery-ui-accordion'), '1.0.0', true);
  }
} 
```

我认为这是更好的途径，因为它具有依赖管理，并且您不会在 DOM 中途有一堆 JavaScript。无论如何，使用[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)通常总是更 WordPressian 的做事方式。

# java - 如何将 JPanel 分成左右两个部分？

> ID：15782623
> 
> 赞同：5
> 
> 时间：2013-04-03T08:44:00.893
> 
> 标签：java, swing, layout, jpanel

我想将 JPanel 分成左右两个部分。我怎么做 ？之后，我将在左右半部分放置面板。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T08:45:52.057

如果不需要调整它们的大小，您可以简单地使用 a`BorderLayout`并将面板插入到`BorderLayout.EAST`and中`BorderLayout.WEST`：

```
JPanel panel = new JPanel( new BorderLayout() );
panel.add( leftPanel, BorderLayout.WEST );
panel.add( rightPanel, BorderLayout.EAST ); 
```

您还可以考虑使用[`JSplitPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html)允许调整 UI 大小的 a：

```
JSplitPane pane = new JSplitPane( JSplitPane.HORIZONTAL_SPLIT, 
                                  leftPanel, rightPanel ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:44:57.800

如果您使用[JSPlitPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html)则非常容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T08:45:31.660

有两种方法

*   使用网格布局

*   使用 JSplitPane（带有隐藏分隔符）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T08:45:37.447

```
JPanel panel = new JPanel(new BorderLayout());
panel.add(c1, BorderLayout.WEST);
panel.add(c2, BorderLayout.EAST);

JPanel panel = new JPanel(new GridLayout(1, 2));
panel.add(c1);
panel.add(c2); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T08:46:18.683

使用[JSplitPane](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)或 GridLayout

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-03T08:47:32.603

您可以按照 Costis Aivalis 的建议使用 SplitPane。
或者在 JPanel 上
使用**[边框布局管理器。](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)**
将左侧组件放在 WEST 侧，将右侧组件放在布局管理器的 EAST 侧。

```
JPanel panel = new JPanel(new BorderLayout());
panel.add(c1, BorderLayout.WEST);
panel.add(c2, BorderLayout.EAST); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-03T08:47:34.377

```
JPanel leftPanel = new JPanel();
JPanel rightPanel = new JPanel();
JSplitPane pane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, leftPanel, rightPanel); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-03T08:49:53.030

```
JPanel example = new JPanel(new GridLayout(1,2));
example.add(p1);
example.add(p2); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-10T20:05:41.317

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSplitPane;

public class Display{

JFrame frame=new JFrame("Drawing");
North north;
South south;
East east;
West west;
Center center;
public  int width=600,height=600;

public Display() {
    // TODO Auto-generated constructor stub
    frame.setSize(width,width);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setResizable(true);

    north=new North(frame);
    south=new South(frame);
    east=new East(frame);
    west=new West(frame);
    center=new Center(frame);

    frame.setLayout(new BorderLayout());

JSplitPane pane2=new JSplitPane(JSplitPane.VERTICAL_SPLIT,west,east);

frame.add(pane2);

    frame.setVisible(true);

  }

 } 
```

# c++ - nfq_get_payload 如何构造它的返回数据？

> ID：15782630
> 
> 赞同：0
> 
> 时间：2013-04-03T08:44:38.113
> 
> 标签：c++, linux, network-programming, iptables, netfilter

首先，我试图从 Netfilter 队列有效负载的有效负载中获取源地址和目标端口（使用 nfq_get_payload 函数检索有效负载）。以下问题提出了同样的问题并得到了正确答案：

[如何从iptables队列中的数据包中提取源和目标端口号](https://stackoverflow.com/questions/12673079/how-to-extract-source-and-destination-port-number-from-packet-in-queue-of-iptabl/12685540#12685540)

不幸的是，没有解释为什么在地址中添加 20 和 22 会让您在正确的位置阅读信息。我认为这是因为数据的结构（显然），但如果有一个定义的结构，它是什么？

该文档没有明确解释数据的格式，只是“此函数检索的数据类型将取决于使用 nfq_set_mode() 函数设置的模式”，但是 set_mode 的文档没有提及有关数据的任何内容类型并且来源不会立即显示任何内容。

我觉得这一定是我遗漏或不理解的常见网络编程结构的核心。

注：nfq_get_payload 函数： http: [//www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Parsing.html#gaf79628558c94630e25dbfcbde09f2933](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Parsing.html#gaf79628558c94630e25dbfcbde09f2933)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:58:10.857

我设法弄清楚了这一点，并将其留在这里供其他人查找。

有效负载以 iphdr 结构开始。iphdr 结构有一个协议字段，例如 tcp，如果是 tcp，那么 iphdr 结构之后的数据就是 tcphdr 结构，如果是 udp，那么还有另一个结构 hdr，等等。

要访问端口，假设 q_data 是指向 nfq_data 结构的指针：

```
unsigned char *data;
nfq_get_payload(q_data, (unsigned char**)&data);
struct iphdr * ip_info = (struct iphdr *)data;
if(ip_info->protocol == IPPROTO_TCP) {
    struct tcphdr * tcp_info = (struct tcphdr*)(data + sizeof(*ip_info));
    unsigned short dest_port = ntohs(tcp_info->dest);
} else if(ip_info->protocol == IPPROTO_UDP) {
    //etc etc
} 
```

# android - 三星 Galaxy 2 中的 CSS 兼容性

> ID：15782632
> 
> 赞同：0
> 
> 时间：2013-04-03T08:44:49.183
> 
> 标签：android, css, html

有谁知道三星 Galaxy 2 浏览器是否支持以下 css 标签：

```
input:required:focus:invalid
input:required:invalid
input:required
input:required:focus:valid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:54:35.633

[是的，您可以在此处查看](http://jimbergman.net/webkit-version-in-android-version/)基于 Android 版本的 WebKit 版本列表，请注意 Galaxy 2 附带 2.3，但现在支持 4.0.3。

Webkit 确实支持您需要的选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:54:45.303

只需看看这个网站： [http](http://alistapart.com/article/return-of-the-mobile-stylesheet) ://alistapart.com/article/return-of-the-mobile-stylesheet 您可以为您的 android 应用程序使用各种样式表。

# sql-server - 增量表名

> ID：15782633
> 
> 赞同：1
> 
> 时间：2013-04-03T08:44:49.583
> 
> 标签：sql-server, select

我目前正在尝试通过查询查找一些信息，该查询将每 24 小时在网站上自动更新 - 这涉及我需要从中提取信息的每日备份表中的许多列。

我遇到的问题是查询必须明确说明数据库表，这使得查询相当静态 - 我需要一些更动态的东西。

我有一个命名系统的每日备份表，如下所示：

```
daily_backup_130328 
daily_backup_130329 
daily_backup_130330 
daily_backup_130331 
daily_backup_130401 
daily_backup_130402 
```

因此，当我陈述我的 FROM 表时，我会命名其中之一——通常是最新的可用表（因此`"daily_backup_0402"`来自示例列表）。目前，我可以更新它的唯一方法是每天在计划运行之前手动进入并更新查询。

我的问题是：有没有办法让它选择最新的“daily_backup_??????” 表自动？

编辑：我正在讨论诸如“SELECT * FROM daily_backup_130402”之类的沼泽标准查询，ORDER BY CheeseType ASC；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:51:35.790

一个通用的答案：你可以实现一个 daily_backup SP。

然后，对于指定的服务器/驱动程序，应该有特定的目录和动态查询工具。

填充 daily_backup_NNNNNN 的 SW 也有可能更新存储过程，然后将您从手动负担中解放出来。同样，这可以动态完成，具体取决于服务器详细信息（元数据触发器）。

# android - 如何使用 onpause 和 onresume 创建用于浏览 url 的活动？

> ID：15782636
> 
> 赞同：0
> 
> 时间：2013-04-03T08:44:58.053
> 
> 标签：android, android-activity, webview, onresume

你能帮我解决这个问题吗？

`oncreate`如果 Internet 连接可用，如何创建以方法运行 url 的活动？

我想每 5 秒检查一次 Internet 连接是否可用，如果 Internet 连接消失，它只会提示一次对话框。

如果 Internet 连接到来，那么活动将在会话关闭的地方恢复

下面我的代码是：

```
 public class MainActivity extends Activity {

private String URL="http://www.moneycontrol.com/";

private Handler mHandler = new Handler();

private boolean isRunning = true;

private TextView textlabel=null;    

public WebView webview=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textlabel=(TextView)findViewById(R.id.textlabel);
        displayData();

    }

    private void Chekstate() {

    new Thread(new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            while (isRunning) {
                try {
                    Thread.sleep(1000);
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            // Write your code here to update the UI.
                            displayData();
                        }
                    });
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        }
    }).start(); 

    }

    @SuppressWarnings("deprecation")
    private void displayData() {
        ConnectivityManager cn=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo nf=cn.getActiveNetworkInfo();
        if(nf != null && nf.isConnected()==true )
        {
           textlabel.setText("Network Available");
           Webview();
        }
        else
        {
           textlabel.setText("Network Not Available");
           final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
           alertDialog.setTitle("Intenet Connecction");
           alertDialog.setMessage("Internet Connetion is not available now.");
           alertDialog.setButton(" OK ", new OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                alertDialog.dismiss();
            }
        });
           alertDialog.show();
        }       
    } 

      @Override
        protected void onResume() {
            super.onResume();

        }

        @Override
        protected void onPause() {
            super.onPause();

        }

    @SuppressLint("SetJavaScriptEnabled")
    private void Webview() {
        webview= (WebView) findViewById(R.id.webview);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.setWebViewClient(new WebViewClient());
        webview.loadUrl(URL);
        webview.setInitialScale(1);
        webview.getSettings().setBuiltInZoomControls(true);
        webview.getSettings().setUseWideViewPort(true);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:52:05.650

要检查互联网连接，您可以使用以下内容。

在清单中添加以下权限

```
 <uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

使用处理程序

```
Handler mHandler = new Handler();
boolean isRunning = true; 
```

然后，从你的 onCreate() 方法中使用这个线程：

```
new Thread(new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            while (isRunning) {
                try {
                    Thread.sleep(5000);
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            // Write your code here to update the UI.
                            displayData();
                        }
                    });
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        }
    }).start(); 
```

然后，声明处理程序每​​ 5 秒调用一次的此方法：

```
 private void displayData() {
    ConnectivityManager cn=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo nf=cn.getActiveNetworkInfo();
    if(nf != null && nf.isConnected()==true )
    {
        Toast.makeText(this, "Network Available", Toast.LENGTH_SHORT).show();
        myTextView.setText("Network Available");
    }
    else
    {
        Toast.makeText(this, "Network Not Available", Toast.LENGTH_SHORT).show();
        myTextView.setText("Network Not Available");
    }       
} 
```

要停止线程调用这个：

```
 isRunning = false; 
```

或者，您可以使用以下内容。但它不会每 5 秒检查一次连接性

```
public class CheckNetwork {
private static final String TAG = CheckNetwork.class.getSimpleName();
public static boolean isInternetAvailable(Context context)
{
NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

if (info == null)
{
     Log.d(TAG,"no internet connection");
     return false;
}
else
{
    if(info.isConnected())
    {
        Log.d(TAG," internet connection available...");
        return true;
    }
    else
    {
        Log.d(TAG," internet connection");
        return true;
    }
   }
 }
} 
```

在您的 onCreate() 活动中

```
if(CheckNetwork.isInternetAvailable(MainActivtiy.this))  //if connection available
{

} 
```

[http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)

您可以使用广播接收器。当连接丢失时，系统会广播。但我建议不要使用广播接收器。

# c++ - 在 CPP 文件中实现并在另一个类中使用的 C++ 结构

> ID：15782647
> 
> 赞同：0
> 
> 时间：2013-04-03T08:45:27.340
> 
> 标签：c++, struct

在一个类中创建结构并在另一个类中实现并在另一个类中使用的最佳方法是什么？

**结构体.h**

```
struct White{
   unsigned char r;
   unsigned char g;
   unsigned char b;
   Color() : r(255), g(255), b(255){}
};
struct Black{
   unsigned char r;
   unsigned char g;
   unsigned char b;
   Color() : r(0), g(0), b(0){}
};
White white; //works fine

Black black = {255, 255, 255}; //*error: data member initializer is not allowed!* (because of unsigned char maybe?)
**OR**
Black black; black.r = 255; //*error: this declaration has no storage class or type specifier!* 
```

**另一个类.cpp**

```
#include "Structs.h"
Structs *str = new Structs();
str->white.r //works, is 255
str->black.r //should be 255 too 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:58:09.057

你的设计在我看来是错误的。您将“Black”和“White”定义为不同的类，其对象具有 RGB 值。然后你想要一个具有白色值/属性的“黑色”？这听起来就像定义一辆汽车，拆掉它的轮子，给它翅膀和 320 个座位，然后假装波音 757 仍然是一辆汽车。

您通常想要的应该是以下内容：

```
struct Color {
  unsigned char r;
  unsigned char g;
  unsigned char b;
};

Color black = {0,0,0};
Color white = {255,255,255};
Color blue = {0,0,255}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:52:22.400

也许我不明白这个问题，但我会说 ctor 应该 White(): ... 和 Black():... 否则你的标题将无法编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:04:03.753

**问题出在构造函数上，它应该与 struct_name 相同。**

尝试

```
struct White{
   unsigned char r;
   unsigned char g;
   unsigned char b;
   White() : r(255), g(255), b(255){}
   void show(void)
   {
        cout << "RED:       " << r
             << "\tGreen:   " << g
             << "\tBlack:   " << b << endl;
   }
} white;

struct Black{
   unsigned char r;
   unsigned char g;
   unsigned char b;
   Black() : r(0), g(0), b(0){}
   void show(void)
   {
        cout << "RED:       " << r
             << "\tGreen:   " << g
             << "\tBlack:   " << b << endl;
   }
} black;

black.show();
white.show(); 
```

# yii - 如何记录登录日期哪些会员登录记住我？

> ID：15782651
> 
> 赞同：1
> 
> 时间：2013-04-03T08:45:39.477
> 
> 标签：yii

如果成员使用登录表单登录，我可以在 useridentity.php 中使用身份验证功能记录上次登录时间。但如果会员通过记住我的 cookie 登录，我无法记录上次登录日期。有什么方法可以记录吗？

```
$logindate = UserAccount::model()->findbypk($member->id);
$logindate->last_login_date = date('Y-m-d');
$logindate->save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:33:16.223

您应该在扩展自`CWebUser`. 然后您可以在那里覆盖[`afterLogin()`](http://www.yiiframework.com/doc/api/1.1/CWebUser#afterLogin-detail)并存储登录日期，即使是 cookie 登录也是如此。

# wpf - 如何使用 MVVM Light 在 wpf 4.0 应用程序中实现带/不带反馈的对话框

> ID：15782653
> 
> 赞同：0
> 
> 时间：2013-04-03T08:45:39.727
> 
> 标签：wpf, mvvm, mvvm-light

有人可以指导我如何实现自定义对话框以向 UI 显示错误或简单消息并在不违反 MVVM 的情况下接收响应。我非常需要这个。请帮帮我。

谢谢，扎法尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:00:59.790

关于您的评论，我强烈建议您仔细查看[Messenger 类](http://mvvmlight.codeplex.com/SourceControl/changeset/view/cf8d07c2ec3f#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Messaging/Messenger.cs "信使类")。它甚至提供了 GalaSoft.MvvmLight.Messaging。[DialogMessage](http://mvvmlight.codeplex.com/SourceControl/changeset/view/cf8d07c2ec3f#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Messaging/DialogMessage.cs)类型用于此目的。但是您可以提供自定义的子类`GenericMessage<T>`

您注册这样的消息并定义消息到达时应该发生的情况：

```
Messenger.Default.Register<DialogMessage>(this,
    dm =>
    {
        MessageBox.Show(dm.Content, dm.Caption, dm.Button, dm.Icon);
    }); 
```

虽然只有 WeakReference 保留，但如果我不想再被通知或视图被丢弃，我倾向于取消注册。永远做个好公民；）

```
Messenger.Default.Unregister(this); 
```

向接收者发送消息，并可选择定义回调以取回对话结果：

```
Messenger.Default.Send(new DialogMessage(this, "Content",
    result => Console.WriteLine(result.ToString()))
    {
        Caption = "Caption"
        Icon = MessageBoxImage.Asterisk,
        Button = MessageBoxButton.OK
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:19:03.777

要处理 mvvm 模式中的任何类型的对话内容，您应该使用一种 Dialog-Service。在[这篇文章](https://stackoverflow.com/questions/6595312/creating-an-mvvm-friendly-dialog-strategy)中，您将找到一些使用这种方法的提示。

将对话内容放入服务中可以保持 mvvm 模式不变。该服务负责对话的所有创建并提供结果。视图模型只是调用方法并订阅服务提供的事件。

以这种方式解决问题的一个好方法是使用[User Interaction Patterns](http://msdn.microsoft.com/en-us/library/gg405494%28v=PandP.40%29.aspx#sec10)。

> 就 MVVM 模式而言，视图模型负责启动与用户的交互以及消费和处理任何响应，而视图负责使用任何适当的用户体验实际管理与用户的交互。保持视图模型中实现的表示逻辑与视图实现的用户体验之间的关注点分离，有助于提高可测试性和灵活性。
> 
> 在 MVVM 模式中实现这些类型的用户交互有两种常见的方法。一种方法是实现一个服务，视图模型可以使用该服务来启动与用户的交互，从而保持其对视图实现的独立性。另一种方法使用视图模型引发的事件来表达与用户交互的意图，以及绑定到这些事件并管理交互的视觉方面的视图中的组件。

这是用于执行 DialogServices 等的 MVVM 模式，因此它也符合您的要求。

# rdf - 使用 Jena 响应 filenotfoundexception 读取本地 .owl 文件

> ID：15782656
> 
> 赞同：0
> 
> 时间：2013-04-03T08:45:42.717
> 
> 标签：rdf, jena

我正在做一个耶拿开发。

当我读取本地文件时，即使它只有三行，我也无法正常运行。

这是我的代码：

```
OntModel model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM);
model.read(owlPath, null);
Iterator<OntClass> it = model.listClasses();

while (it.hasNext()) {
    OntClass ontclass = it.next();
    System.out.println(ontclass.getLabel(null));
} 
```

该`owlpath`值类似于`file:\\animals-rdf.owl`, 或`file:\\D:\\Eclipse\\workspace\\jena_demo\\sources\\amimal-rdf.owl`, 或没有`file:\\`前缀，即使我使用了 namespace `example.com# + filepath`，它仍然可以通过。

具体的错误报告是：

```
Exception in thread "main" com.hp.hpl.jena.shared.WrappedIOException:    
java.io.FileNotFoundException: \animals-rdf.owl 
```

有人可以帮忙吗？我完全困惑为什么它不能工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:50:39.740

您的文件 URI 已损坏。尝试：

```
file:///D:/Eclipse/workspace/jena_demo/sources/animal-rdf.owl 
```

AIUI 这就是它在 Windows 上的工作方式。您还可以使用文件输入流，这样就无需构造文件 URI：

```
InputStream in = new FileInputStream("animal-rdf.owl"); // or any windows path
model.read(in, null);
in.close(); 
```

# android - 当图像来自arraylist时设置墙纸

> ID：15782657
> 
> 赞同：0
> 
> 时间：2013-04-03T08:45:44.337
> 
> 标签：android, arrays, wallpaper

当图像存储在我尝试过但没有希望的arraylist中时，我怎么能设置壁纸！

这是代码：

```
final ImageView image = new ImageView(mContext);
image.setImageResource(mImageIds[pos]);                 

try {
    wallpaperManager.setBitmap(image.getDrawingCache());
} catch (IOException e) {
    e.printStackTrace();
} 
```

我尝试使用上面的代码，但它显示`NullPointer Exception`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:56:41.407

您本可以显示更多代码（您的数组如何，图片的字符串名称或 int id）。无论如何我会告诉你我是如何做类似的事情的：

```
Bitmap bitmap;
    final int[] imgs = new int[] { R.drawable.i1, R.drawable.i2, R.drawable.i3,
            R.drawable.i4, R.drawable.i5, R.drawable.i6, R.drawable.i7,
            R.drawable.i8, R.drawable.i9, R.drawable.i10, };

bitmap = BitmapFactory.decodeResource(getResources(), 
                    imgs[pos]);         
            try {
                getApplicationContext().setWallpaper(bitmap);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# datagrid - 避免调整 dojox.grid.datagrid 标题宽度

> ID：15782665
> 
> 赞同：0
> 
> 时间：2013-04-03T08:46:04.747
> 
> 标签：datagrid, grid, dojo, dojox.grid.datagrid

*   下面是我的声明性 dojox.grid.datagrid。我想避免重新调整列的宽度。在 UI 中可以重新调整列大小。如何避免它

    ```
    <div class="claro" id="customer" name="dataGrid" onclick="setWidgetproperty(this.id,'xy','inner__customer')" ondblclick="editCustomGrid(this.id)" onmouseup="setDocStyle(this.id)" style="height: 200px; left: 178px; position: absolute; top: 176px; width: 950px;">
     <table class="claro" dojotype="dojox.grid.DataGrid" id="inner__customer" rowselector="10px" style="height: 180px; width: 400px;">
          <thead>
               <tr>
                    <th field="Column1" width="100px">
                         Column1
                    </th>
                    <th field="Column2" width="100px">
                         Column2
                    </th>
                    <th field="Column3" width="100px">
                         Column3
                    </th>
                    <th field="Column4" width="100px">
                         Column4
                    </th>
                    <th field="Column5" width="100px">
                         Column5
                    </th>
               </tr>
          </thead>
     </table>
     <input id="hidden__customer" name="dataGrid" style="display:none;" type="hidden"> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:30:24.067

这个问题已经回答过了，看看这个帖子：

[Dojo DataGrid - 防止列调整大小](https://stackoverflow.com/questions/3871475/dojo-datagrid-preventing-column-resize)

您将不得不从声明式切换到程序式创建网格，以便能够使用每列的 noresize 属性。

# java - 在 Java NetBeans 中解析 JSON 字符串

> ID：15782666
> 
> 赞同：2
> 
> 时间：2013-04-03T08:46:04.913
> 
> 标签：java, json, string, parsing, netbeans

谁能告诉我如何从每个元标记中获取`og:description`、`og:title`、`book:release_date`、`book:author`和的值？`book:isbn`（请参阅下面的 JSON 内容）最终这些值将显示在表格中，因此我需要将它们作为 Java 对象（字符串）..

到目前为止，我已经尝试过使用许多外部库，但这是我第一个使用 JSON 的项目，所以我不明白它们是如何工作的。

供您参考，我正在使用 NetBeans 并正在制作一个安静的 Web 服务。

我已经设法使用以下代码将它们转换为 JSON 字符串：

```
 JSONObject obj = new JSONObject(builder.toString());
    String theJsonString = obj.toString(); 
```

但是当我尝试这样做时：

```
 ObjectMapper mapper = new ObjectMapper();
                  Map<String,Object> data = mapper.readValue(theJsonString.getBytes(), Map.class);
                  Map items = (Map) data.get("items");
                  Map pagemap = (Map) items.get("pagemap");
                  Map metatags = (Map) pagemap.get("metatags");
                  String b_title = (String) metatags.get("og:title");

     System.out.println(b_title); 
```

我收到此错误：

java.lang.ClassCastException：java.util.ArrayList 无法在 API.GCustSearchAPI.main(GCustSearchAPI.java:77) 处转换​​为 java.util.Map

第 77 行是这样的：

```
Map items = (Map) data.get("items"); 
```

这是json内容：

```
{
"items": [
{
"pagemap": {
"metatags": [
 {
  "og:description": "A boxed set, including the titles 'Harry Potter and the Philosopher's Stone', 'Harry Potter and the Chamber of Secrets', 'Harry Potter and the Prisoner of Azkaban', 'Harry Potter and the Goblet of Fire', 'Harry Potter and the Order of the Phoenix', 'Harry Potter and the Half-Blood Prince' and 'Harry Potter and the Deathly Hallows'.",
  "og:title": "Harry Potter Adult Paperback Boxed Set: Adult Edition (Paperback)",
  "book:release_date": "2008-10-06",
  "book:author": "J. K. Rowling",
  "book:isbn": "9780747595847"
 }
]
}
},
 {
"pagemap": {
"metatags": [
 {
  "og:description": "Offers an in-depth look at the craftsmanship, artistry, technology, and more than ten-year journey that took the world's bestselling fiction from page to screen. From elaborate sets and luxurious costumes to advanced special effects and film making techniques, this title chronicles all eight films.",
  "og:title": "Harry Potter: Page to Screen (Hardback)",
  "book:release_date": "2011-10-25",
  "book:author": "Bob McCabe",
  "book:isbn": "9780857687753"
 }
 ]
}
 }
 ]
} 
```

任何输入将不胜感激。请以简单的方式告诉我，因为我是初学者（刚接触 NetBeans 2 个月）。非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:54:25.273

如果看json`items`是一个数组，对应的java表示就是一个List。所以你需要 fetch`items`作为`List`

```
List items = (List ) data.get("items"); 
```

`metatags`同样的逻辑也适用于

```
List metatags = (List) pagemap.get("metatags"); 
```

通过上述更改，试试这个

```
ObjectMapper mapper = new ObjectMapper();
Map<String, Object> data = mapper.readValue(file, Map.class);
List<Map<String, Object>> items = (List) data.get("items");
for (Map<String, Object> item : items) {
    Map pagemap = (Map) item.get("pagemap");
    List<Map<String, Object>> metatags = (List) pagemap.get("metatags");
    for (Map<String, Object> tag : metatags) {
        String b_title = (String) tag.get("og:title");
        System.out.println(b_title);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:58:37.130

创建一个 java 类，即 item.java 并编写该行

```
Item item= mapper.readValue(new File(theJsonString.getBytes()), Item .class); 
```

然后读取json

# oracle - 如何恢复所有数据库模式的密码

> ID：15782668
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:46:13.620
> 
> 标签：oracle, oracle11g

我已经安装了 Oracle 11g Express Edition 并且正在使用 SQL Developer。

我创建了两个模式但忘记了密码 - 有没有办法解锁它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:34:52.007

非常简单的问题....以 sysdba 身份登录

```
sql>connect / AS sysdba
sql>alter user <use_name> identified by <Password>
ex:alter user xyz identified by stackover --don't enclose by quatos 
```

# devexpress - 如何获取 Devexpress XtraGrid 控件选定的行

> ID：15782671
> 
> 赞同：0
> 
> 时间：2013-04-03T08:46:23.620
> 
> 标签：devexpress, xtragrid

我有一个 devexpress XtraGrid 控件。但是，当 winform 加载时，我无法获取默认选定行的 ID。我知道当用户单击网格时如何获取它。

这是代码快照：

```
 private void Form1_Load(object sender, EventArgs e)
    {
     grid1.DataSource = bindData(DataClassesDataContext.Table1.ToList());

     ID = Convert.ToInt32(gridView.GetRowCellValue(gridView.FocusedRowHandle, "ID"));
     XtraMessageBox.Show(ID.ToString());
    }

    public BindingSource bindData(object obj)
    {
        BindingSource ctBinding;
        try
        {
            ctBinding = new BindingSource();

            ctBinding.DataSource = obj;

            return ctBinding;
        }
        catch (Exception ex)
        {
            XtraMessageBox.Show(ex.Message, "Database Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:58:36.790

如果我理解正确，你需要这样的东西：

```
 private void Form1_Shown(object sender, EventArgs e)
  {
     grid1.DataSource = bindData(DataClassesDataContext.Table1.ToList());

     var item = gridView.GetFocusedRow() as YourDataType
     if(item != null)
     {
       ID = item.ID;
       XtraMessageBox.Show(ID.ToString());
     }
  } 
```

假设您`bindData`返回某种类型的集合。

** 更新 **

将代码移动到`form_Shown`似乎可以解决问题。

# jsp - 使用单个提交按钮在多个 iframe 中提交表单

> ID：15782674
> 
> 赞同：2
> 
> 时间：2013-04-03T08:46:40.467
> 
> 标签：jsp, iframe, form-submit

我有一个场景，我需要提交`multiple jsp forms`带有`multiple iframes`按钮`single submit`的内容。有可能这样做吗？我尝试了各种想法，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:35:06.583

您可以使用以下命令提交多个表单：

```
document.forms["your form name"].submit(); 
```

单击第一个按钮时，您可以调用一个手动为您提交所有表单的方法:)

希望这可以帮助。

# python-2.7 - 在 python 2.7 中静默安装 msi

> ID：15782676
> 
> 赞同：2
> 
> 时间：2013-04-03T08:46:47.403
> 
> 标签：python-2.7, windows-installer

如何使用 python 脚本静默安装 msi？我尝试使用以下脚本，但它对我不起作用！我需要静默安装 msi（不显示任何 UI）并启动创建的 .exe。

```
import subprocess
subprocess.call(msiexec /i "D:\mypath\to\.msi" /qn TARGETDIR="D:\msi" ALLUSERS=1) 
```

msiexec 也没有在命令行中执行！我使用的是 python 2.7 和 windows 7 64 位系统。

# recursion - Sceme 中的递归类型

> ID：15782678
> 
> 赞同：1
> 
> 时间：2013-04-03T08:46:52.170
> 
> 标签：recursion, scheme

我正在学习Scheme语言（我自己）。最近我遇到了这个问题：有两个函数计算相同的值（组合函数 f - n 次）。

```
(define (repeated f n)
  (lambda (x)
    (if (= n 1)
        (f x)
        (f ((repeated f (- n 1)) x)))))

(define (repeated f n)
  (if (= n 1)
      f
      (lambda (x)
        (f ((repeated f (- n 1)) x))))) 
```

据我了解，这两个不是递归过程，但它们返回递归过程（大声笑）。那么这两者有什么区别呢？是否有可能在我给 X 赋值之前第一个返回已经计算过的过程？我很困惑......请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:05:41.953

事实上，这两个过程*都是*递归的，每个过程都在执行过程中的某个时刻调用自己。此外，两者都`lambda`在某个时候返回 a - 意思是：它们是返回过程的过程。

第一个过程总是返回 a `lambda`，而第二个过程短路并`f`在`n`等于时返回，但对于大于的值`1`也返回 a 。所以它们没有什么不同，除了基本情况（equals ）的处理方式。`lambda``n``1``n``1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T13:24:53.600

哇，这比我的简单得多，尽管我的是尾递归的并且适用于（重复 fn 0）假设在参数上运行函数零次就是那个参数。

```
(define (repeated fn times)
 (let loop (
   (continuation (lambda (x) x))
   (count-down times))
  (if (not (> count-down 0))
      (lambda (x) (continuation x))
      (loop (lambda (x) (continuation (fn x))) (- count-down 1))))) 
```

你们两个之间的区别在于，第一个立即返回一个过程，然后将自己作为过程的一部分调用。第二个仅在完全计算出该过程将是什么之后才返回一个过程。

没错，第一个返回一个递归过程，而第二个使用递归返回一个非递归过程。我的工作更像第二个，但可以计算非常大的数值的重复，而上面的两个将超过最大递归深度。

（（重复 cdr 1000000）（iota 1000589））

# java - 如何将日期字符串解析为日期？

> ID：15782685
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:47:20.027
> 
> 标签：java

```
/Date(13863838400000-0400)/ 
```

我得到了上面的日期格式，我将如何在 MM-DD-YY 中显示。以下是我尝试过的。

```
public static void main(String[] args) throws Exception {
    String target = "/Date(13863838400000-0400)/";
    DateFormat df = new SimpleDateFormat("EEE MMM dd kk:mm:ss z yyyy", Locale.ENGLISH);
    Date result =  df.parse(target);  
    System.out.println(result);
} 
```

我没有得到解析的日期......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:05:29.913

看起来日期以毫秒 (LONG) 为单位提供。因此使用如下

```
 Date result = new Date(13863838400000l-0400);
        System.out.println(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:15:28.370

使用给定的附加信息

```
String target = "/Date(13863838400000-0400)/";
long millis = Long.parseLong(target.substring(target.indexOf("(") + 1,
        target.indexOf("-")));
DateFormat df = new SimpleDateFormat("MM-dd-yyyy", Locale.ENGLISH);
System.out.println(df.format(new Date(millis))); 
```

# solr - Solr-Zookeeper 在不设置最大分片数的情况下增加分片数

> ID：15782686
> 
> 赞同：1
> 
> 时间：2013-04-03T08:47:21.630
> 
> 标签：solr, sharding, apache-zookeeper

我在使用动物园管理员创建碎片时遇到问题。

当我创建一个集合和相应集合的分片时，我必须指定集合将拥有的最大分片数。如果我启动了任何新的 solr 服务器，它将被动物园管理员视为新分片。这将发生在我在集合创建期间指定的最大分片数。

我的要求是，在不指定最大分片数的情况下，我必须让动物园管理员将新启动的 solr 实例视为相应集合的分片。

如何实现这个功能......？

# java - 浏览器在 JNLP 中忽略我的 JVM 参数

> ID：15782690
> 
> 赞同：0
> 
> 时间：2013-04-03T08:47:29.977
> 
> 标签：java, browser, applet, jvm, jnlp

我尝试使用此 JNLP 文件测试 JVM 参数：

```
<jnlp spec="1.0+" codebase="" href="">

    <information>
        <title>Test Applet</title>
        <vendor>D2D - Architecture - Composants</vendor>
    </information>

    <resources>
        <!-- Application Resources -->
        <!--<j2se version="1.7*" href="" java-vm-args="-ea -Xincgc -verbose -Xmx768m" />-->

        <j2se version="1.6*" href="" initial-heap-size="512" max-heap-size="1024M" />

        <jar href="Applet.jar" main="true" />
        <!-- Si plusieurs jars : mettre plusieurs balises jar -->
    </resources>

    <applet-desc 
         name="Test Applet"
         main-class="TestApplet"
         width="600"
         height="300">
    </applet-desc>

    <update check="always"/>

</jnlp> 
```

当我启动“jnlp”时，它考虑了这个，但是当我使用这个脚本从 html 页面启动时：

```
<body>
        <h1>Prototype Applet JRE</h1>

        <!-- Script JavaScript pour le déploiement de l'applet -->
    <script src="javaScript/deployJava.js"></script>

    <!-- Les différentes informations sur l'applet -->
        <script> 
            var attributes = { code:'TestApplet.class', archive:'Applet.jar'} ; 
            var parameters = {jnlp_href: 'applet.jnlp'} ; 
            deployJava.runApplet(attributes, parameters, '1.6');
        </script>
</body> 
```

浏览器会忽略此 JVM 参数并正常启动小程序...但 jvm 至少有“512”...

我搜索了很多，测试了很多，但没有结果......

测试环境 ：

浏览器：Chrome 26.0.1410.43 m，IE 8.0.6..

JRE：1.6.0_u22 / 1.7

感谢帮助！

# xml - 需要帮助使用 XMLTable 提取数据

> ID：15782700
> 
> 赞同：0
> 
> 时间：2013-04-03T08:47:55.643
> 
> 标签：xml, oracle

我们正在尝试获取 ns2:Token 数据。下面的 SQL 不起作用。

```
SELECT xml.* FROM xxce_test xx,
                       XMLTable(XMLNamespaces(DEFAULT 'http://www.xcec.com/AgileCard/xsd/12'),'/soapenv:Envelope/soapenv:Body/ns3:CardRefTokenAddRs/ns2:TokenizedData/'
                            passing xx.xml_data
                                columns
                                    merchantId VARCHAR2(125)  PATH 'ns2:Token'
                                    ) xml 
```

xxce_test 表数据（2列）：

```
<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <ns3:CardRefTokenAddRs xmlns="http://www.xcec.com/AgileCard/xsd/12" xmlns:ns2="http://www.xcec.com/AgileCard/xsd/12" xmlns:ns3="http://www.xcec.com/AgileCard/wsdl/TokenizeCardsSvc-v1.0">
        <Status>
            <StatusCode>0</StatusCode>
            <Severity>INFO</Severity>
            <StatusDesc>Success</StatusDesc>
        </Status>

        <RqUID>unique id</RqUID>
        <ResponseContext>
            <Language>EN-US</Language>
            <ServerDt>2013-04-01T12:04:12.523-04:00</ServerDt>
        </ResponseContext>
        <ns2:TokenizedData>
            <ns2:TokenCorrelationId>1</ns2:TokenCorrelationId>
            <ns2:Token>1234567890</ns2:Token>
            <ns2:LuhnValidated>NotValidated</ns2:LuhnValidated>
            </ns2:TokenizedData>
        </ns3:CardRefTokenAddRs>
    </soapenv:Body>
</soapenv:Envelope>

<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <ns3:CardRefTokenAddRs xmlns="http://www.xcec.com/AgileCard/xsd/12" xmlns:ns2="http://www.xcec.com/AgileCard/xsd/12" xmlns:ns3="http://www.xcec.com/AgileCard/wsdl/TokenizeCardsSvc-v1.0">
            <Status>
                <StatusCode>0</StatusCode>
                <Severity>INFO</Severity>
                <StatusDesc>Success</StatusDesc>
                </Status>
            <RqUID>unique id</RqUID>
            <ResponseContext>
                <Language>EN-US</Language>
                <ServerDt>2013-04-01T12:03:22.307-04:00</ServerDt>
            </ResponseContext>
            <ns2:TokenizedData>
                <ns2:TokenCorrelationId>1</ns2:TokenCorrelationId>
                <ns2:Token>0987654321</ns2:Token>
                <ns2:LuhnValidated>NotValidated</ns2:LuhnValidated>
            </ns2:TokenizedData>
        </ns3:CardRefTokenAddRs>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:02:36.723

你的 XPath 是错误的，你还没有声明所有的命名空间。

```
select /*+ cursor_sharing_exact */
 xml.*
  from xxce_test xx,
       xmltable(
         xmlnamespaces(default 'http://www.xcec.com/AgileCard/xsd/12',
                       'http://schemas.xmlsoap.org/soap/envelope/' as "soapenv",
                       'http://www.xcec.com/AgileCard/xsd/12' as "ns2",
                       'http://www.xcec.com/AgileCard/wsdl/TokenizeCardsSvc-v1.0' as "ns3"),
                '/soapenv:Envelope/soapenv:Body/ns3:CardRefTokenAddRs/ns2:TokenizedData'
                passing xx.xml_data 
                columns 
                  merchantid varchar2(125) path 'ns2:Token') xml 
```

小提琴示例：[http ://sqlfiddle.com/#!4/b512f/1](http://sqlfiddle.com/#!4/b512f/1)

# three.js - Three.js 中的对象导入

> ID：15782701
> 
> 赞同：0
> 
> 时间：2013-04-03T08:48:00.603
> 
> 标签：three.js, .obj

[http://victorribeiro.com/modelo3D](http://victorribeiro.com/modelo3D)

如果你看一下上面的例子，你会看到一个 .obj 格式的低多边形模型，上面有一些纹理。我的问题是：有没有办法导入这个相同的模型，应用于身体上的材料和眼睛上的另一种材料？如果你仔细看，你会发现它是同一个模型，有 3 个元素：1 个身体和 2 个眼睛。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:57:01.833

如果您可以将模型分成三个元素，那么您将能够做您想做的事情。我查看了 pig.obj，现在有办法区分不同的元素。您在模型文件中只定义了一组。如果您还可以导出材料，那么您的元素将被命名，并且在您的遍历函数中，您还可以检查元素的名称。

# vb6 - 将 8 字节数组转换为 Double

> ID：15782705
> 
> 赞同：2
> 
> 时间：2013-04-03T08:48:07.187
> 
> 标签：vb6

（谈论Visual Basic 6）

我能够找到如何[将 Double 转换为 8-bytes array](https://stackoverflow.com/questions/7801080/convert-double-into-8-bytes-array/7802361#7802361)，但反之亦然。

在我开始尝试编写代码之前，是否有一些例程可以执行（如链接问题中描述的“CopyMemory”）？在这种情况下可以使用“CopyMemory”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:41:14.137

使用与您链接到的答案相同的代码，但交换源和目标：

```
Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" ( _
    ByRef Destination As Any, _
    ByRef Source As Any, _
    ByVal Length As Long)

Function BytesToDbl(ByRef Bytes() As byte) As Double
  Dim D As Double
  CopyMemory D, Bytes(0), LenB(D)
  BytesToDbl = D
End Function 
```

我已经跳过了这个例子的任何错误检查，但是你需要确保你的字节数组实际上是 8 个字节长，否则你会遇到访问冲突。

请注意，这假定字节数组是使用链接到的问题创建的。来自其他来源的浮点值很可能使用不同的二进制表示，这意味着这将不起作用。

# c# - 录制一段固定时间的广播

> ID：15782708
> 
> 赞同：3
> 
> 时间：2013-04-03T08:48:18.033
> 
> 标签：c#, record, radio, shoutcast

我有这段代码，它从一个直播中录制，但它为不同文件中的每首歌曲标题拆分它。我想要的是将所有记录放在一个文件中，并希望精确的时间

```
public class SHOUTcastRipper
{
    private SHOUTcastRipper()
    {
        // No objects of this class allowed
    }

    [STAThread]
    static void Main()
    {
        // http://relay.pandora.radioabf.net:9000
        String server = "http://radio.mosaiquefm.net:8000/mosalive";
        String serverPath = "/";

        String destPath = "A:\\";           // destination path for saved songs

        HttpWebRequest request = null; // web request
        HttpWebResponse response = null; // web response

        int metaInt = 0; // blocksize of mp3 data
        int count = 0; // byte counter
        int metadataLength = 0; // length of metadata header

        string metadataHeader = ""; // metadata header that contains the actual songtitle
        string oldMetadataHeader = null; // previous metadata header, to compare with new header and find next song

        byte[] buffer = new byte[512]; // receive buffer

        Stream socketStream = null; // input stream on the web request
        Stream byteOut = null; // output stream on the destination file

        // create web request
        request = (HttpWebRequest) WebRequest.Create(server);

        // clear old request header and build own header to receive ICY-metadata
        request.Headers.Clear();
        request.Headers.Add("GET", serverPath + " HTTP/1.0");
        request.Headers.Add("Icy-MetaData", "1"); // needed to receive metadata informations
        request.UserAgent = "WinampMPEG/5.09";

        // execute request
        try
        {
            response = (HttpWebResponse) request.GetResponse();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            return;
        }

        // read blocksize to find metadata header
        metaInt = Convert.ToInt32(response.GetResponseHeader("icy-metaint"));

        try
        {
            // open stream on response
            socketStream = response.GetResponseStream();

            // rip stream in an endless loop
            while (true)
            {
                // read byteblock
                int bufLen = socketStream.Read(buffer, 0, buffer.Length);
                if (bufLen < 0)
                    return;

                for (int i=0; i<bufLen ; i++)
                {
                    // if there is a header, the 'headerLength' would be set to a value != 0\. Then we save the header to a string
                    if (metadataLength != 0)
                    {
                        metadataHeader += Convert.ToChar(buffer[i]);
                        metadataLength--;
                        if (metadataLength == 0) // all metadata informations were written to the 'metadataHeader' string
                        {
                            string fileName = "";

                            // if songtitle changes, create a new file
                            if (!metadataHeader.Equals(oldMetadataHeader))
                            {
                                // flush and close old byteOut stream
                                if (byteOut != null)
                                {
                                    byteOut.Flush();
                                    byteOut.Close();
                                }

                                // extract songtitle from metadata header. Trim was needed, because some stations don't trim the songtitle
                                fileName = Regex.Match(metadataHeader, "(StreamTitle=')(.*)(';StreamUrl)").Groups[2].Value.Trim();

                                // write new songtitle to console for information
                                Console.WriteLine(fileName);

                                // create new file with the songtitle from header and set a stream on this file
                                byteOut = createNewFile(destPath, fileName);

                                // save new header to 'oldMetadataHeader' string, to compare if there's a new song starting
                                oldMetadataHeader = metadataHeader;
                            }
                            metadataHeader = "";
                        }
                    }
                    else // write mp3 data to file or extract metadata headerlength
                    {
                        if (count++ < metaInt) // write bytes to filestream
                        {
                            if (byteOut != null) // as long as we don't have a songtitle, we don't open a new file and don't write any bytes
                            {
                                byteOut.Write(buffer, i, 1);
                                if (count%100 == 0)
                                    byteOut.Flush();
                            }
                        }
                        else // get headerlength from lengthbyte and multiply by 16 to get correct headerlength
                        {
                            metadataLength = Convert.ToInt32(buffer[i])*16;
                            count = 0;
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            if (byteOut != null)
                byteOut.Close();
            if (socketStream != null)
                socketStream.Close();
        }
    }

    /// <summary>
    /// Create new file without overwritin existing files with the same filename.
    /// </summary>
    /// <param name="destPath">destination path of the new file</param>
    /// <param name="filename">filename of the file to be created</param>
    /// <returns>an output stream on the file</returns>
    private static Stream createNewFile(String destPath, String filename)
    {
        // replace characters, that are not allowed in filenames. (quick and dirrrrrty ;) )
        filename = filename.Replace(":", "");
        filename = filename.Replace("/", "");
        filename = filename.Replace("\\", "");
        filename = filename.Replace("<", "");
        filename = filename.Replace(">", "");
        filename = filename.Replace("|", "");
        filename = filename.Replace("?", "");
        filename = filename.Replace("*", "");
        filename = filename.Replace("\"", "");

        try
        {
            // create directory, if it doesn't exist
            if (!Directory.Exists(destPath))
                Directory.CreateDirectory(destPath);

            // create new file
            if (!File.Exists(destPath + filename + ".mp3"))
            {
                return File.Create(destPath + filename + ".mp3");
            }
            else // if file already exists, don't overwrite it. Instead, create a new file named <filename>(i).mp3
            {
                for (int i=1;; i++)
                {
                    if (!File.Exists(destPath + filename + "(" + i + ").mp3"))
                    {
                        return File.Create(destPath + filename + "(" + i + ").mp3");
                    }
                }
            }
        }
        catch (IOException)
        {
            return null;
        }
    }
} 
```

如何修改代码来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:57:06.490

我得到了解决方案，如果有任何机构需要，这就是代码

```
public  void record()
    {
    // http://relay.pandora.radioabf.net:9000
    String server = "http://radio.mosaiquefm.net:8000/mosalive";
    String serverPath = "/";

    String destPath = "A:\\";           // destination path for saved songs
    String fname="test";
    HttpWebRequest request = null; // web request
    HttpWebResponse response = null; // web response

    int metaInt = 0; // blocksize of mp3 data
    int count = 0; // byte counter
    int metadataLength = 0; // length of metadata header

    byte[] buffer = new byte [ 512 ]; // receive buffer

    Stream socketStream = null; // input stream on the web request
    Stream byteOut = null; // output stream on the destination file

    // create web request
    request = ( HttpWebRequest ) WebRequest . Create ( server );

    // clear old request header and build own header to receive ICY-metadata
    request . Headers . Clear ( );
    request . Headers . Add ( "GET" , serverPath + " HTTP/1.0" );
    request . Headers . Add ( "Icy-MetaData" , "1" ); // needed to receive metadata informations
    request . UserAgent = "WinampMPEG/5.09";

    // execute request
    try
        {
        response = ( HttpWebResponse ) request . GetResponse ( );
        }
    catch ( Exception ex )
        {
        Console . WriteLine ( ex . Message );
        return;
        }

    // read blocksize to find metadata header
    metaInt = Convert . ToInt32 ( response . GetResponseHeader ( "icy-metaint" ) );

    try
        {
        // open stream on response
        socketStream = response . GetResponseStream ( );
        byteOut = createNewFile ( destPath , fname );
        // rip stream in an endless loop
        while ( byteOut . Length <1024000) // 23650000 ~ 30 min     
            {
            // read byteblock
            int bufLen = socketStream . Read ( buffer , 0 , buffer . Length );
            if ( bufLen < 0 )
                return;

            for ( int i=0 ; i < bufLen ; i++ )
                {
                  if ( count++ < metaInt ) // write bytes to filestream
                        {
                        if ( byteOut != null ) // as long as we don't have a songtitle, we don't open a new file and don't write any bytes
                            {
                            byteOut . Write ( buffer , i , 1 );
                            if ( count % 100 == 0 )
                                byteOut . Flush ( );
                            }
                        }
                    else // get headerlength from lengthbyte and multiply by 16 to get correct headerlength
                        {
                        metadataLength = Convert . ToInt32 ( buffer [ i ] ) * 16;
                        count = 0;
                        }
                   }
                }
            }

    catch ( Exception ex )
        {
        Console . WriteLine ( ex . Message );
        }
    finally
        {
        if ( byteOut != null )
            byteOut . Close ( );
        if ( socketStream != null )
            socketStream . Close ( );
        }
    } 
```

# python - 在python中重建字典

> ID：15782710
> 
> 赞同：0
> 
> 时间：2013-04-03T08:48:20.100
> 
> 标签：python, dictionary, lookup

我有两个从配置文件创建的字典：

```
 dict1 = {'x':'A', 'y':'B', 'z':'C'} # decoding ABCs
    dict2 = {'ID1': ('x','n1'), 'ID2': ('y','n2'), 'ID3':('z', 'n3') } 
```

我想按以下格式创建一个新字典：

```
 final = {'A':{'ID1':'n1', 'ID2':'n2'}, 'C':{'ID3':'n3'}, ...} 
```

我没有想出一个聪明的方法来做到这一点。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:50:35.323

假设 dict2 中的 x、y、z 和 final 中的 A、B、C：

```
final = {dict1[k]: {id: v} for id, (k, v) in dict2.items()} 
```

* * *

```
In [6]: dict1 = {'x':'A', 'y':'B', 'z':'C'}

In [7]: dict2 = {'ID1': ('x','n1'), 'ID2': ('y','n2'), 'ID3':('z', 'n3') }

In [8]: {dict1[k]: {id: v} for id, (k, v) in dict2.items()}
Out[8]: {'A': {'ID1': 'n1'}, 'B': {'ID2': 'n2'}, 'C': {'ID3': 'n3'}} 
```

* * *

如果你真的是说应该有两个 As，那么它就不能表示为一个 dict。配对列表可以吗？然后你必须决定订购。

```
In [10]: [(dict1[k], {id: v}) for id, (k, v) in dict2.items()]
Out[10]: [('A', {'ID2': 'n2'}), ('C', {'ID3': 'n3'}), ('A', {'ID1': 'n1'})] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:02:14.957

考虑：

```
final = {}
for id, (x, n) in dict2.items():
    final.setdefault(dict1[x], {})[id] = n 
```

这创造了

```
{'A': {'ID2': 'n2', 'ID1': 'n1'}, 'C': {'ID3': 'n3'}} 
```

不知道这是否满足您的需求，但至少它是一个有效的结构。

# ruby-on-rails - Rails 无法识别 PUT 请求

> ID：15782713
> 
> 赞同：2
> 
> 时间：2013-04-03T08:48:35.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

Rails 给出以下错误：

```
No route matches [POST] "/users/32" 
```

即使路由、视图和控制器设置正确。我错过了什么？

**环境**：Rails 3.2.12，Ruby 2.0.0p0

路线

```
Foo::Application.routes.draw do
  resources :users
  match '/pages/:action', controller: "pages", as: "pages"
  root to: 'pages', action: 'index'
end 
```

耙路线

```
 users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy
    pages        /pages/:action(.:format)  pages#:action
     root        /                         pages#index 
```

哈姆

```
= form_tag "/#{@collection_name}/#{@entity.id}", :method => :put do
  ... 
```

哪个被转换成这个html

```
<form accept-charset="UTF-8" action="/users/32" method="post">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="✓">
    <input name="_method" type="hidden" value="put">
    <input name="authenticity_token" type="hidden" value="NnD8tNkx//5o3TQWhBYxFgYGS8kG9n+7WSeA0mon9t8=">
  </div>
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:23:52.930

我有一个显示用户页面，它呈现一个带有禁用输入的表单，其中显示了所有用户数据。

有一个按钮可以启用所有字段并允许编辑用户。此按钮由一些 JavaScript 代码处理，它切换所有表单输入元素的“禁用”属性。

由于`_method`和所有神奇的 Rails 表单属性也是输入，我的 JavaScript 代码`disabled`在它们上放置了一个属性，因为它们没有。

**教训**：不要使用 JAVASCRIPT 处理所有表单输入，RAILS 取决于其中的一些。

# arrays - 如何在perl中加入两个数组条目

> ID：15782714
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:48:36.003
> 
> 标签：arrays, perl, join

我有一个数组，我想加入它的第 5 个和第 6 个条目！

喜欢：@array(1,2,3,4,5,6,7,8,9) 应该是 @array(1,2,3,4,56,7,8,9)

我怎么能做到这一点？我刚刚在互联网上找到了如何合并两个数组，但不是两个条目......

提前致谢。最好的问候，约翰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:53:39.723

最简单的方法是与[数组切片](http://perldoc.perl.org/perldata.html#Slices)[`splice`](http://perldoc.perl.org/functions/splice.html)一起使用。

```
use warnings;
use strict;

my @array = (1,2,3,4,5,6,7,8,9);

splice @array, 4, 2, join('', @array[4,5]);

print "@array"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:52:56.797

```
my @a = (1,2,3,4,5,6,7,8,9);
my @b = (@a[0..3], join('',@a[4..5]), @a[6..8]);

print "@b\n";   # <---- prints: 1 2 3 4 56 7 8 9 
```

# winforms - c++ winform错误处理

> ID：15782718
> 
> 赞同：0
> 
> 时间：2013-04-03T08:48:56.303
> 
> 标签：winforms, c++-cli

```
private: System::Void link1_Click(System::Object^  sender, System::EventArgs^  e) 
     {
        navigate(url1);
     }

private: System::Void navigate(System::String^ url)
     {
             for each ( System::Windows::Forms::HtmlElement^ webpageelement in webBrowser->Document->All )
             {
                 if (webpageelement->GetAttribute("u"))
                    this->webBrowser->Document->GetElementById("u")->SetAttribute("value", url);
             }

             for each ( System::Windows::Forms::HtmlElement^ webpageelement in webBrowser->Document->All )
             {
                 if (webpageelement->GetAttribute("value") == "Go")
                     webpageelement->InvokeMember("click");
             }
     } 
```

我有许多其他按钮调用函数 navigate() 但我只会发布一个因为除了 url 的值之外它们都是相同的。我的问题是，如果我单击按钮，即使表单中不存在网页元素（“u”），如何让我的应用程序停止退出/出现错误。因为如果我单击它，即使表单尚未完全加载，我也会收到消息框说未处理的异常错误，我想将其更改为其他内容或忽略它并让我的应用程序再试一次。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:57:29.800

对这种简单的检查使用异常处理是一种矫枉过正的做法。只需执行以下操作：

```
HtmlElement ele = this->webBrowser->Document->GetElementById("u");
if (ele != null)
  ele->SetAttribute("value", url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:53:28.160

使用`try`and`catch`可以给你一些基本的方法......例如

```
for each ( System::Windows::Forms::HtmlElement^ webpageelement in webBrowser->Document->All )
{
    try 
    {
        if (webpageelement->GetAttribute("u"))
        this->webBrowser->Document->GetElementById("u")->SetAttribute("value", url);
    }
    catch (Exception^ ex)
    {
        // Do something here, can be blank...
        // This will try the above code, if it doesn't work it will continue without any error popup
    }
} 
```

# c# - 通过 ADFS 连接到 Office 365

> ID：15782720
> 
> 赞同：1
> 
> 时间：2013-04-03T08:49:01.627
> 
> 标签：c#, outlook, adfs2.0, office365, adfs

我可能被认为是一个新手，我目前正在为工作中的任务设置通过 ADFS 将 Outlook 插件连接到 Office 365，所以我只使用用户名（而不是用户名和密码）连接到特定的 Office 365 URL

我对有这方面经验的人的问题非常简单：这是否可行，（如果可以，你有什么可以分享的见解）

Thnx提前，你的帮助真的很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:55:39.563

Well, it *should* be possible; but I'll warn you that it will not be simple. From personal experience building a product that integrates with Office365 and AD (and ADFS), you will likely spend a lot of time troubleshooting.

It will help if you if you get a better understanding of how claims identity works (e.g. security tokens, SAML, WS-Federation, WS-Trust). It's quite a bit to digest and be prepared for a rather big time investment.

It would help of you expanded on:

*   What does the addin do? What does it connect to in O365?
*   What technology is it built on?
*   Which version of Office?

# ruby-on-rails-3 - 通过 href 链接到 current_user

> ID：15782724
> 
> 赞同：1
> 
> 时间：2013-04-03T08:49:18.667
> 
> 标签：ruby-on-rails-3, hyperlink

目前我有一个标题，通过这个将用户链接到他的个人资料：

```
<li><%= link_to '<i class="icon-picture"></i> My Profile'.html_safe, current_user %></li> 
```

我希望能够通过执行以下操作将当前用户链接到他的个人资料：

```
<li>
  <a href="<%= current_user %>">
    <div><%= image_tag current_user.avatar (:small) %></div>
    &nbsp; <strong>Surge Pedroza</strong><br/>
    &nbsp; view my profile page
  </a>
</li> 
```

但我不知道如何通过`<a href="...">`. 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:05:55.803

这将是完成您想要的更好的方法：

```
<%= link_to current_user do %>
  <div><%= image_tag current_user.avatar(:small) %></div>
  &nbsp; <strong><%= current_user.full_name %></strong><br/>
  &nbsp; view my profile page
<% end %> 
```

`link_to .. do`对于您描述的确切情况很有用。查看[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)以获取更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:56:03.857

我真的明白了：）

```
<a href="<%= current_user.id %>"> 
```

# html - 表格中的复选框没有自动开始新行

> ID：15782737
> 
> 赞同：0
> 
> 时间：2013-04-03T08:49:42.520
> 
> 标签：html, line-breaks, word-wrap

我有这部分代码：

```
<td>

    <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
    <input type="radio" name="perms" id="perms_{{user.id}}_0" user_id="{{user.id}}" value="0">
    None
    </label>
    <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
    <input type="radio" name="perms" id="perms_{{user.id}}_1" user_id="{{user.id}}" value="1">
    Read
    </label>
    <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
    <input type="radio" name="perms" id="perms_{{user.id}}_4" user_id="{{user.id}}" value="4">
    Read + Commands
    </label>
    </td> 
```

但是当我打开页面时，结果是这样的：

![html页面](https://i.stack.imgur.com/DhLNO.png)

我不知道为什么 Read + Commands 这行会断线...

有办法手动管理换行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:55:43.243

有 CSS 属性 white-space：

```
table td {
    white-space: nowrap;
} 
```

但我不确定它将如何在 td 内的标签下应用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:58:58.420

另一种方法是在`<td>`元素上应用样式并设置适当的宽度。

```
 <td style="width: 400px;">
OR
    <td class="myStyleTD">

    .myStyleTD
    {
    width: 50%;
    } 
```

# casting - 双数据类型转换适用于 Windows 但不适用于 linux

> ID：15782738
> 
> 赞同：0
> 
> 时间：2013-04-03T08:49:43.183
> 
> 标签：casting, double

我在 C 中有一个字符串指针，它有 bigint 数据。

例如`9223372036854775807`，即`2^63`

我想将其转换为 double 但您知道 double 有 15/16 位可用于存储小数部分，其余位将被丢弃。因此上述非常大的数字将转换为`9.22337203685476E+18`ie `922337203685476000`。

这使得比较原始值和转换值不匹配。这通常发生在 Linux 平台上。问题是为什么这不会在 Windows 上发生？

它是依赖于编译器还是我不知道的东西。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:57:53.303

该值是`2^63 - 1`，不能用 精确表示`double`。可以表示的最接近的值是`2^63`。这就是你使用 eg`sscanf`或得到的结果`atof`：

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    const char *str = "9223372036854775807";
    double d;
    double e;
    sscanf(str, "%lf", &d);
    e = atof(str);
    printf("%f\n", d);    // 9223372036854775808.000000
    printf("%f\n", e);    // 9223372036854775808.000000
} 
```

请参阅[http://ideone.com/zz2NIF](http://ideone.com/zz2NIF)。

# osgi - 哪个在 SCR 运行时被称为第一个激活函数或绑定函数

> ID：15782740
> 
> 赞同：5
> 
> 时间：2013-04-03T08:49:50.363
> 
> 标签：osgi, equinox, apache-felix, knopflerfish

我对组件激活时调用哪个函数激活函数或绑定函数的顺序感到困惑。在我看来，激活函数函数将首先被调用，因为 Bind 函数用于绑定服务。但正如我们所知，所有目标服务都首先进入组件上下文，然后组件才会被激活。

请清除我的疑问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:53:23.143

在绑定所有静态引用之后，即在调用绑定方法之后，将调用 activate 方法。所以在激活过程中，您可以确定静态引用的值不会改变。

然而，对于动态参考，所有的赌注都是关闭的。事实上，在执行激活方法*期间*，动态引用的值可能会在不同线程中多次更改。

**更新：**您没有询问停用问题，但您可能会发现此信息同样有用。deactivate 方法将在任何静态引用未绑定*之前被调用。*例如：如果您绑定到具有静态引用的服务并且您绑定的服务消失了，那么 SCR 将首先调用您的 deactivate，然后调用您的 unbind 方法，最后它会释放组件实例以用于垃圾收集。

# sql - SQL获取具有相同列A但不同B的记录

> ID：15782750
> 
> 赞同：4
> 
> 时间：2013-04-03T08:50:32.033
> 
> 标签：sql, postgresql, query-performance

假设我们有下表`meals`：

```
| 餐| 明星 |
-----------------
| 牛排| 1 |
| 牛排| 2 |
| 鱼| 高分辨率照片| CLIPARTO 4 |
| 鱼| 高分辨率照片| CLIPARTO 4 |
| 沙拉| 高分辨率照片| CLIPARTO 5 |

```

**同一餐，不同星级如何获得记录？我需要只有不同星星的记录。**

上表的结果应如下所示：

```
| 餐| 明星 |
-----------------
| 牛排| 1 |
| 牛排| 2 |

```

我尝试了以下查询：

```
SELECT DISTINCT t1.*
FROM meals t1
INNER JOIN meals t2 ON t1.meal = t2.meal
AND t1.stars <> t2.stars; 
```

但它消耗了太多时间和一些显着的内存量。

我的桌子的实际大小是：

```
选择 pg_size_pretty(pg_relation_size('table_name'));
 pg_size_pretty
----------------
 2295 MB

```

所以我需要想出一些别的东西，我正在寻求你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T08:51:57.437

```
SELECT  a.*
FROM    meals a
        INNER JOIN
        (
            SELECT  meal
            FROM    meals
            GROUP   BY meal
            HAVING  COUNT(DISTINCT stars) > 1
        ) b ON a.meal = b.meal 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!1/0f32c/1)

输出

```
╔═══════╦═══════╗
║ MEAL  ║ STARS ║
╠═══════╬═══════╣
║ steak ║     1 ║
║ steak ║     2 ║
╚═══════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:52:56.360

```
 SELECT meal,stars FROM meals
 GROUP BY meal,stars
 HAVING count(*)=1 and meal in (
    SELECT meal FROM meals
    GROUP BY meal
    HAVING count(*)>1 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:28:28.247

这应该是最快的方法：

```
SELECT  *
FROM    meals m
WHERE   EXISTS (SELECT FROM meals WHERE meal = m.meal AND stars <> m.stars); 
```

*“获取所有行，其中至少存在另一顿饭，名称相同但星号不同。”*

假设`NULL`值不出现。

[SQL小提琴。](http://www.sqlfiddle.com/#!17/a6563/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:10:31.477

实现相同结果的简单快捷方式

```
SELECT  
  m.*
FROM    
  meals m
  JOIN meals m2 ON ( m2.meal = m.meal AND m2.stars<>m.stars) 
```

# c# - EF 4 在保存实体之前删除相关项目

> ID：15782756
> 
> 赞同：1
> 
> 时间：2013-04-03T08:50:48.683
> 
> 标签：c#, entity-framework

假设我有以下两个实体：

```
Item
 int Id
 ICollection<ChildItem> ChildItems

ChildItem
 int Id
 Item ParentItem 
```

（在 EF 设计器和 SQL 服务器中，从 Item 到 ChildItem 的删除级联设置），我有一些这样的代码：

```
Item newItem = new Item();
ChildItem child1 = new ChildItem();
ChildItem child2 = new ChildItem();
newItem.ChildItems.Add(child1);
newItem.ChildItems.Add(child2);
myContext.Items.AddObject(newItem);
// Then much, much further down the line
myContext.Items.DeleteObject(newItem); 
```

现在，EF 是否会自动发现它还必须删除子项，还是我应该自己删除它们？

问题是，如果我在 DeleteObject 之前添加 SaveChanges()，我的删除代码可以正常工作，但如果我尝试先删除，然后保存更改，我往往会得到一些“无法确定关联的主体端”-异常. 现在我正在尝试使用 EF 4 进行类似的操作。使用 EF5，我只会使用 context.Local -property，但现在我不太确定 EF 4 对添加了实体状态的对象做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:27:07.787

也许改变 to 的状态`newItem`就`Unchanged`可以了。

但我会采取不同的方法。显然，您正处于决定哪些新项目最终将提交到数据库的过程中。我将使用`List<T>`这些项目的简单本地，最初只在此列表中添加/删除项目。最后，当一切都整理好后，您将剩余的项目添加到`myContext.Items`并保存更改。它还将减少开销，因为更改跟踪器将不那么忙。

# c# - 在 Office 2013 中修复消息，但在其他版本中打开正常

> ID：15782757
> 
> 赞同：0
> 
> 时间：2013-04-03T08:50:51.080
> 
> 标签：c#, openxml, openxml-sdk, presentationml

我使用 OpenXML SDK 2.0 生成了一个演示文稿，该演示文稿在 Office 2007 或 2010 中可以正常打开，但在 Office 2013 中提供了修复消息，OpenXML SDK 生产力工具验证功能没有提供太多帮助。谁能告诉我有什么问题？演示文稿可从以下网址下载：

[https://skydrive.live.com/redir?resid=C4B0274BA6703509!300](https://skydrive.live.com/redir?resid=C4B0274BA6703509!300)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:55:49.527

我已经解决了这个问题，事实证明，就 Office 2013 而言，本文中给出的合并代码需要重新审视：

[http://msdn.microsoft.com/en-us/library/office/ee361883(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/ee361883(v=office.12).aspx)

如果其他人有同样的问题，我特别使用了 OpenXML Power 工具和 PresentationBuilder 来解决这个问题：

[http://powertools.codeplex.com/](http://powertools.codeplex.com/)

# infopath2010 - userName() 为 infopath 2010 表单填充器和 Web 表单返回不同的值

> ID：15782759
> 
> 赞同：0
> 
> 时间：2013-04-03T08:50:53.487
> 
> 标签：infopath2010

我正在编写一个表单，它使用 userName() 获取用户名，如果它不为空，则在表单加载时将其放入文本框中，当表单由 infopath 表单填充器填充时，这将返回 firstName.lastName。但是，如果表单是从 Web 表单填写的，它会返回一些随机字符，后跟 domain/firstName.lastName

理想情况下，我希望两者都相同，并且只是 firstName Lastname 或 FirstName.lastName

目前我正在通过不启用 Web 表单来解决这个问题，但需要修复它，因为很多用户没有 Infopath 表单填充器。

我还需要在调用规则时解决这个问题，因为我也使用该字段来构成文件名的一部分。

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:22:09.030

SharePoint 喜欢在用户名的开头添加随机字符。我假设您看到类似“#15;”的内容 或类似的规定？

要解决此问题，最简单的方法是在后面的代码中完成，您只需抓住绑定到用户名文本框的字段，它将返回一个字符串。

几乎你必须解析字符串，找到 str.IndexOf('/') 并创建一个从该索引开始一直到长度 -1 的子字符串。然后您可以执行 str.Replace('.', ' ') 将句点更改为空格。

祝你好运！

# php - 起始页的 PHP 和 AJAX 注册表单

> ID：15782765
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:51:09.943
> 
> 标签：php, ajax

我正在学习创建一个社交 ntwk。我在注册页面上使用了一个 AJAX 框架，它运行了。现在我正在尝试对起始页使用相同的框架。它的nt wking。问题在于性别条件。提交按钮不单击。Hw cn 我修复了此代码，以便表单在用户是男性或女性时提交

```
}
$sql = "SELECT * FROM users WHERE username='$u' AND activated='1' LIMIT 1";
$user_query = mysqli_query($db_conx, $sql);
// Fetch the user row from the query above
while ($row = mysqli_fetch_array($user_query, MYSQLI_ASSOC)) {

$gender = $row["gender"];   
}

// Ajax calls this REGISTRATION code to execute
if(isset($_POST["f"])){
// CONNECT TO THE DATABASE
// GATHER THE POSTED DATA INTO LOCAL VARIABLES
$f = preg_replace('#[^a-z0-9]#i', '', $_POST['f']); 
$l = preg_replace('#[^a-z0-9]#i', '', $_POST['l']); 
$wt= preg_replace('#[^a-z ]#i', '', $_POST['wt']);
$a= preg_replace('#[^a-z ]#i', '', $_POST['a']);    
$ws= preg_replace('#[^a-z ]#i', '', $_POST['ws']);
$c = preg_replace('#[^a-z ]#i', '', $_POST['c']);

// FORM DATA ERROR HANDLING
if($f == "" || $l == "" || $wt || $a == "" || $ws || $c == "" ){
echo "The form submission is missing values.";
exit();
} else {

// Add user info into the database table for the main site table

$sql = "UPDATE users SET firstname='$f', lastname ='$l', wagsbooty ='$wt', abs ='$a',             wagsboobs ='$ws', crash ='$c' WHERE username='$u' LIMIT 1"; 

$query = mysqli_query($db_conx, $sql);
$uid = mysqli_insert_id($db_conx);  
echo "startup_success";
exit();
}
exit();
}

?>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sign Up</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="style/style.css">
<style type="text/css">
#startupform{
margin-top:24px;    
}
#startupform > div {
margin-top: 12px;   
}
#startupform > input,select {
width: 200px;
padding: 3px;
background: #F3F9DD;
}
#startupbtn {
font-size:18px;
padding: 12px;
}

</style>
<script src="js/main.js"></script>
<script src="js/ajax.js"></script>
<script>

function emptyElement(x){
_(x).innerHTML = "";
}

function startup(){
var f = _("firstname").value;
var l = _("lastname").value; 
var wt = _("wagsbooty").value;
var a = _("abs").value; 
var ws = _("wagsboobs").value; 
var c = _("crash").value; 

var status = _("status");
if(f == "" || l == "" wt || a == "" || ws || c == "" ){
status.innerHTML = "Fill out all of the form data";
} else {
_("startupbtn").style.display = "none";
status.innerHTML = 'please wait ...';
var ajax = ajaxObj("POST", "start_page1.php");
ajax.onreadystatechange = function() {
if(ajaxReturn(ajax) == true) {
if(ajax.responseText != "startup_success"){
status.innerHTML = ajax.responseText;
_("startupbtn").style.display = "block";
} else {
window.scrollTo(0,0);
_("startupform").innerHTML = "OK!";
}
}
}
ajax.send("f="+f+"&l="+l+"&wt="+wt+"&a="+a+"&ws="+ws+"&c="+c);
}
}

</script>
</head>
<body>
<?php include_once("template_pageTop.php"); ?>
<div id="pageMiddle">
<h3>Fill in this form to create your profile!</h3>
<form name="startupform" id="startupform" onsubmit="return false;">
<div>Firstname: </div>
<input id="firstname" type="text" onfocus="emptyElement('status')" maxlength="16"> 
<br /><br />
<div>Lastname: </div>
<input id="lastname" type="text" onfocus="emptyElement('status')" maxlength="16"> 
<br /><br />    

<div>
<?php

if($gender === 'm'){
echo "WAG with hottest booty :";?></br>
<select id="wagsbooty" onfocus="emptyElement('status')" maxlength="255">
<?php include_once("template_wags_list.php");

}else{
echo "Star with hottest abs:";?></br>
<select id="abs" onfocus="emptyElement('status')" maxlength="255">
<?php include_once("template_abs_list.php");    
}
?>  
</select>
</div>
</br>
<div>
<?php   
if($gender === 'm'){
echo "WAG with hottest boobs :";?></br>
<select id="wagsboobs" onfocus = "emptyElement('status')" maxlength="255">
<?php include_once("template_boobs_list.php");

}else{
echo "I have a crash on :";?></br>
<select id="crash" onfocus ="emptyElement('status')" maxlength="255">
<?php include_once("template_crash_list.php");  
}
?>
</div>
</select>
</br>

</br>   
<button id="startupbtn" onclick="startup()">Create Profile</button>
<span id="status"></span>
</form>
</div>
<?php include_once("template_pageBottom.php"); ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T22:01:39.207

您在页面上没有任何地方可供用户在页面中选择他们的性别 - 您应该向页面添加单选按钮或选择框并将该信息传递给 startup() 函数。

# bash - 根据文件名的某些部分将文件移动到目录？

> ID：15782766
> 
> 赞同：0
> 
> 时间：2013-04-03T08:51:12.653
> 
> 标签：bash, filenames, move

我有几千本名为 的电子书`AuthorFirstName AuthorLastName Title XX.pdf`，其中`xx`编号来自`1-99`（卷号）。

作者倾斜名称可以是多个单词，所以在这里我想将文件复制到具有名称的文件夹中`AuthorFirstName AuthorLastName title`。除了数字之外的所有内容都应该是文件夹名称，以便电子书的所有卷都在同一个文件夹中。

例如

```
root.....>AuthorFirstName AuthorLastName Title>AuthorFirstName AuthorLastName Title XX.pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:13:14.587

我会尝试这个：

```
for folder in $(ls | sed -r "s/(.*) ([0-9]{1,2})/\1/" | uniq)
do 
    mkdir $folder
    mv $(find . -name "$folder*") $folder
done 
```

我不知道这是否正确，但它可能会给你一些提示。

编辑：将 uniq 添加到管道中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:09:30.657

您可以为任务混合使用`find`,`sed`和`bash`脚本。但是，您必须自己编写它，并在失败时寻求帮助。

您还可以尝试一些现成的大规模移动/重命名工具，如下所示： http: [//tldp.org/LDP/GNU-Linux-Tools-Summary/html/mass-rename.html](http://tldp.org/LDP/GNU-Linux-Tools-Summary/html/mass-rename.html) 从未使用过其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:25:20.597

使用如下所示的循环：

```
find . -type f -name "*pdf" -print0 | while IFS= read -d '' file
do
    # extract the name of the directory to create
    dirName="${file% *}"

    # create the directory if it doesn't exist
    [[ ! -d "$dirName" ]] && mkdir "$dirName"

    mv "$file" "$dirName"
done 
```

# sql - 获取仅包含某些字符的行

> ID：15782767
> 
> 赞同：1
> 
> 时间：2013-04-03T08:51:25.180
> 
> 标签：sql, sql-server, sql-server-2008, select, sql-like

我只想获取仅包含列中某些字符的行。
假设列名是 DATA。

我想获取 DATA 中的所有行（必须具有所有三个条件！）：

*   数字字符 ( `1 2 3 4 5 6 7 8 9 0`)
*   破折号 ( `-`)
*   逗号 ( `,`)

例如：

值`"10,20,20-30,30"`还可以

值`"10,20A,20-30,30Z"`不正确

值`"30"`不正确

值`"AAAA"`不正确

值`"30-"`不正确

值`"30,"`不正确

值`"-,"`不正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:58:51.797

尝试 patindex：

```
select * from(
    select '10,20,20-30,30' txt union
    select '10,20,20-30,40' txt union
    select '10,20A,20-30,30Z' txt
)x
where patindex('%[^0-9,-]%', txt)=0 
```

对于您的表，请尝试：

```
select 
    DATA
from 
    YourTable
where 
    patindex('%[^0-9,-]%', DATA)=0 
```

根据您新编辑的问题，查询应如下所示：

```
select 
    DATA
from 
    YourTable
where 
    PATINDEX('%[^0-9,-]%', DATA)=0 and
    PATINDEX('%[0-9]%', LEFT(DATA, 1))=1 and
    PATINDEX('%[0-9]%', RIGHT(DATA, 1))=1 and
    PATINDEX('%[,-][-,]%', DATA)=0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:54:24.413

**编辑：**您的问题已被编辑，因此此答案不再正确。我不会费心更新它，因为其他人已经更新了他们的。此答案不满足必须找到所有三种字符类型的条件。

* * *

您可以为此使用[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)表达式，尽管它有点复杂：

```
where data not like '%[^0123456789,!-]%' escape '!' 
```

**解释：**

`[^...]`**匹配不在**零件中的任何字符`...`。`%`匹配任何数字（包括零）的任何字符。`[^0123456789-,]`您要禁止的字符集也是如此。

*但是：* `-`是 内部的一个特殊字符`[]`，所以我们必须转义它，我们使用转义字符来完成，我选择了`!`.

因此，您匹配*不*包含 ( `not like`) 任何不在您的不允许集中的字符的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:01:15.273

将选项与[PATINDEX](http://msdn.microsoft.com/en-us/library/ms188395.aspx)和[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)逻辑运算符一起使用

```
SELECT *
FROM dbo.test70
WHERE PATINDEX('%[A-Z]%', DATA) = 0
  AND PATINDEX('%[0-9]%', DATA) > 0
  AND DATA LIKE '%-%'
  AND DATA LIKE '%,%' 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/1df10/1)上的演示[](http://sqlfiddle.com/#!3/1df10/1)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:14:35.907

正如已经提到的，您可以使用 LIKE 表达式，但它只能在进行一些小的修改时起作用，否则将过滤掉太多的行。

`SELECT * FROM X WHERE T NOT LIKE '%[^0-9!-,]%' ESCAPE '!'`

在这里查看工作示例： [http ://sqlfiddle.com/#!3/474f5/6](http://sqlfiddle.com/#!3/474f5/6)

**编辑：**

满足所有3个条件：

```
    选择 *
    从 X
    在哪里喜欢'%[0-9]%'
      和 T 喜欢 '%-%'
      和 T 喜欢 '%,%'

```

见：[http ://sqlfiddle.com/#!3/86328/1](http://sqlfiddle.com/#!3/86328/1)

也许不是最漂亮但可行的解决方案。**

# java - 如何从 JSP 页面另存为 pdf？

> ID：15782770
> 
> 赞同：0
> 
> 时间：2013-04-03T08:51:36.343
> 
> 标签：java, jsp, pdf, jasper-reports

我正在使用 jasperexportmanager 导出到 JSP 页面，如下所示。

```
jasperPrint=JasperFillManager.fillReport(statReportSummaryJasper, param,jre);
ServletOutputStream servletOutputStream = res.getOutputStream();
res.setContentType("application/PDF");
JasperExportManager.exportReportToPdfStream(jasperPrint, servletOutputStream);

servletOutputStream.flush();
servletOutputStream.close(); 
```

这在 JSP 页面中呈现。当我尝试下载时，它让我可以选择另存为 html 而不是 PDF。如何将其另存为 PDF。

任何帮助或方向都会有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:01:44.620

@Nagarajan....

添加此代码并再次尝试...

```
response.setHeader("Content-Disposition", "attachment; filename="
            + ReportName + ".pdf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T09:53:56.463

我只是将代码更改为如下 response.setHeader("Content-Disposition", "inline; filename=" + ReportName + ".pdf"); 它在浏览器中打开 PDF，用户可以根据需要保存 PDF。再次感谢大家。目标：达成

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-26T09:08:02.953

这是一个“非程序员”的答案！我们的银行在 jsp 中生成对帐单，我想将其保存为 pdf 格式（以便通过电子邮件将它们发送给技术水平比我还低的人）。最后，我只是在浏览器（Chrome）中打开下载的jsp并将其打印为pdf。这对我来说很满意。

# arrays - 使用 tasm 汇编器对数组进行排序

> ID：15782777
> 
> 赞同：1
> 
> 时间：2013-04-03T08:51:56.090
> 
> 标签：arrays, assembly, sorting, tasm

我们如何`array`通过使用 tasm 汇编器动态获取输入来对汇编语言中的 a 进行排序？

```
.model data
.small
array db 90h,10h,23h,33h
.
.
.code

int 3
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:23:11.163

使用某种排序算法 - 例如[快速排序](http://en.wikipedia.org/wiki/Quicksort)

虽然，对于非常小的数组（如您的示例），您最好使用更简单的算法作为[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)

后者，因为非常容易实现（更小的代码）将比小数组的复杂快速排序更快。

# c# - C# 将 HTML 粘贴到 Excel 或 PowerPoint

> ID：15782784
> 
> 赞同：1
> 
> 时间：2013-04-03T08:52:15.717
> 
> 标签：c#, html, excel, powerpoint

如何将 HTML（表格）代码粘贴到 Excel 或 PowerPoint 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:52:15.717

我已经克服了一些关于将 HTML 粘贴到 Excel 和 PowerPoint 中的问题，并注意到很多人都在问这个问题。

我想分享我的研究和解决方案。

假设我们有一个名为**html**的 html 文件，我们想在 Excel 中访问它，让我们执行以下操作：

```
Clipboard.SetText(html); 
```

我们将**html**复制到剪贴板中。剪贴板从 html 生成来自输入文件的真实表格或图像/图表。

```
System.Threading.Thread.Sleep(2000); 
```

让我们等一下预览

```
sheet.Range(cellmapp).PasteSpecial(); 
```

现在，我们通过定义**cellmap**将内容粘贴到我们想要粘贴的范围内。

```
System.Threading.Thread.Sleep(1000); 
```

让我们等一下看看输出

```
sheet.UsedRange.Copy(Missing.Value); 
```

现在，为了将表格图像复制到 PowerPoint 中，我们必须使用**UsedRange.Copy**，因为它将复制当前选定的 Excel 区域。

为了检查我们是否将其粘贴到正确的 Powerpoint 幻灯片中

```
foreach (PowerPoint.Slide slide in presentation.Slides)
{
    foreach (PowerPoint.Shape pptshape in slide.Shapes)
    {
        if(<your condition satisfies>)
        {
            slide.Select(); // some position in any slide
            pptshape.Delete();//delete old content that was in that slide
            ppApp.ActiveWindow.View.PasteSpecial(); //paste the Excel content
        }
    }
} 
```

当然还有其他解决方案，比如用 html 代码制作图像并粘贴，这是我最初的想法。

另一篇提到该操作的帖子： [在 PowerPoint 中显示 HTML](https://stackoverflow.com/questions/13196954/showing-html-in-powerpoint)

# .net - 带有大图像的 PrintPreviewController

> ID：15782790
> 
> 赞同：0
> 
> 时间：2013-04-03T08:52:30.437
> 
> 标签：.net, gdi+, print-preview

我们使用 a`PrintPreviewControl`并直接绘制到它的图形对象。通常这由背景图像和顶部的其他图形组成。

这工作得很好，除非我们必须绘制大背景图像。这里的大是指转换为位图时大约 250 mb 的图像。

当绘制大图像时，一切正常，直到我们手动分配`PrintDocument`一个新的`PrintPreviewController`以便我们可以保存图像（下面的代码）。

```
public Image MakeImage()
{
  PrintController oOriginalController = default(PrintController);
  PreviewPrintController oPreviewController = default(PreviewPrintController);
  Image oImage = default(Image);
  PreviewPageInfo[] oPageInfos = null;
  PreviewPageInfo oPageInfo = default(PreviewPageInfo);

  //Save the original controller
  oOriginalController = moPrintDocument.PrintController;

  //Create a preview controller
  oPreviewController = new PreviewPrintController();
  oPreviewController.UseAntiAlias = true;
  moPrintDocument.PrintController = new PrintControllerWithStatusDialog(oPreviewController);
  moPrintDocument.Print();

  //Get print pages
  oPageInfos = oPreviewController.GetPreviewPageInfo();
  if (oPageInfos.Length > 0)
  {
    //Get the page info
    oPageInfo = oPageInfos(0);

    //Set the image
    oImage = new Bitmap(Convert.ToInt32(oPageInfo.PhysicalSize.Width / 100 * 96), Convert.ToInt32(oPageInfo.PhysicalSize.Height / 100 * 96));

    //Create the graphics object
    using (Graphics oGraphics = Graphics.FromImage(oImage))
    {
      //Clear the image
      oGraphics.Clear(Color.White);

      //Draw the image
      oGraphics.DrawImage(oPageInfo.Image, 0, 0, oImage.Width, oImage.Height);
    }
  }
  else
  {
    //Set no image
    oImage = null;
  }

  //Restore the original controller
  moPrintDocument.PrintController = oOriginalController;

  //Return the pdf document
  return oImage;
} 
```

创建的图像上没有大图像，但它确实有所有其他图纸。

当返回到`PrintPreviewControl`仅显示绘制的第一张大图像时，所有其他绘图都存在。

这种行为只能通过重新启动我们的应用程序来逆转。

# c++ - 使用文件 c++

> ID：15782793
> 
> 赞同：0
> 
> 时间：2013-04-03T08:52:52.363
> 
> 标签：c++, file

我有一张 .bmp 格式的图片，我想在图片中间添加一些文字！我知道所有 seekp 和 seekg 的东西，但是当我使用 ios::app 时，文本会转到文件末尾，而我使用的任何其他东西都会丢弃所有文本！哪个 ios:: ...我应该使用？！这是我的代码：

```
fstream file;
file.open ("mehdi.bmp" , ios::out | ios::binary | ios::ate);
char name[] = "Mehdi";
file.seekp (100);
file.write ((char*)name , sizeof (name)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:55:49.783

最简单的可能是将所有文本读入字符串或行向量，然后修改字符串/向量，然后再次写出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:36:21.120

据我了解您的问题，您似乎想要生成一个图像，其中包含在图片中某处显示的文本，而不是包含字符串字符字节的文件。

如果是这种情况，您应该使用一些绘图库，这些绘图库将使用字体和颜色在图片中的某处绘制文本。

# unity3d - 平铺纹理时边界上的Unity3D可见接缝

> ID：15782796
> 
> 赞同：3
> 
> 时间：2013-04-03T08:52:56.673
> 
> 标签：unity3d, shader, textures, fragment-shader, tiling

对于我的游戏，我编写了一个着色器，它允许我的纹理很好地平铺在多个对象上。我不是根据顶点的相对位置，而是根据绝对世界位置来选择 uv。自定义着色器如下。基本上它只是将纹理平铺在 1x1 世界单位的网格中。

```
Shader "MyGame/Tile" 
{
    Properties 
    {
        _MainTex ("Texture", 2D) = "white" {}
    }
    SubShader 
    { 
        Tags { "RenderType"="Opaque" }
        LOD 200

        CGPROGRAM
        #pragma surface surf Lambert
        sampler2D _MainTex;

        struct Input 
        {
            float2 uv_MainTex;
            float3 worldPos;
        };

        void surf (Input IN, inout SurfaceOutput o) 
        {
            //adjust UV for tiling
            float2 cell = floor(IN.worldPos.xz);
            float2 offset = IN.worldPos.xz - cell;
            float2 uv = offset;

            float4 mainTex = tex2D(_MainTex, uv);
            o.Albedo = mainTex.rgb;
        }
        ENDCG
    } 
    FallBack "Diffuse"
} 
```

我以前在 Cg 和 XNA 上的 HLSL 着色器中做过这种方法，它总是很有魅力。然而，使用 Unity 着色器，我在纹理的边缘看到了非常明显的接缝。我尝试了 Unity 表面着色器和顶点/片段着色器，两者的结果相同。

![可见接缝](https://i.stack.imgur.com/uqmSP.jpg)

纹理本身如下所示。在我的游戏中，它实际上是*.tga*，而不是*.png*，但这不会导致问题。该问题同样出现在所有纹理过滤器设置以及重复或钳位模式上。

![质地](https://i.stack.imgur.com/qeErp.png)

现在我在这里看到有人有类似的问题：[Lightmapping 时平面之间](http://answers.unity3d.com/questions/429810/visible-seams-on-borders-when-tiling-texture.html)的接缝。然而，对于如何解决这样的问题，没有明确的答案。此外，我的问题根本与光照贴图或照明无关。在我测试的片段着色器中，没有启用光照，问题仍然存在。

Unity answers 网站上也发布了相同的问题，但我没有收到任何答案，也没有很多意见，所以我也在这里尝试：[平铺纹理时边界上的可见接缝](http://answers.unity3d.com/questions/429810/visible-seams-on-borders-when-tiling-texture.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:51:38.190

这描述了您的问题的原因：http: [//hacksoflife.blogspot.com/2011/01/derivatives-i-discontinuities-and.html](http://hacksoflife.blogspot.com/2011/01/derivatives-i-discontinuities-and.html)

这是一个很棒的视觉示例，就像您的一样：http: [//aras-p.info/blog/2010/01/07/screenspace-vs-mip-mapping/](http://aras-p.info/blog/2010/01/07/screenspace-vs-mip-mapping/)

除非您要禁用 mipmap，否则我认为 Unity 无法解决此问题，因为据我所知，它不会让您使用可让您指定在片段着色器中使用的 mip 级别的函数（在至少在 OS X / OpenGL ES 上；如果您只针对 Windows，这可能不是问题）。

也就是说，我不知道您为什么要进行片段级 uv 计算；只需从顶点着色器传递数据就可以了，带有可平铺的纹理：

```
struct v2f {
    float4 position_clip : SV_POSITION;
    float2 position_world_xz : TEXCOORD;
};

#pragma vertex vert
v2f vert(float4 vertex : POSITION) {
    v2f o;
    o.position_clip = mul(UNITY_MATRIX_MVP, vertex);
    o.position_world_xz = mul(_Object2World, vertex).xz;
    return o;
}

#pragma fragment frag
uniform sampler2D _MainTex;
fixed4 frag(v2f i) : COLOR {
    return tex2D(_MainTex, i.position_world_xz);
} 
```

# c# - 清单可能无效或文件无法打开。

> ID：15782798
> 
> 赞同：6
> 
> 时间：2013-04-03T08:52:59.513
> 
> 标签：c#, .net, wpf, clickonce

我知道这是一个非常普遍的问题。但是，有一点不同，我的 WPF 可以完美安装并在 Windows 7 和 Windows 8 操作系统上运行。但是，当尝试在运行 Windows XP 的 VM 上安装时，会出现以下错误：

无法继续。应用程序格式不正确。**详情**：

**平台版本信息**

```
Windows             : 5.1.2600.196608 (Win32NT)
    Common Language Runtime     : 4.0.30319.1
    System.Deployment.dll       : 4.0.30319.1 (RTMRel.030319-0100)
    clr.dll             : 4.0.30319.1 (RTMRel.030319-0100)
    dfdll.dll           : 4.0.30319.1 (RTMRel.030319-0100)
    dfshim.dll          : 4.0.31106.0 (Main.031106-0000)

SOURCES
    Deployment url          : file:///S:/K3FrontEnd_NET4/Karacell3.application 
```

**错误摘要**

以下是错误摘要，这些错误的详细信息在日志后面列出。

```
* Activation of S:\K3FrontEnd_NET4\Karacell3.application resulted in exception. Following failure messages were detected:
        + Exception reading manifest from file:///S:/K3FrontEnd_NET4/Karacell3.application: the manifest may not be valid or the file could not be opened.
        + Manifest XML signature is not valid.
        + SignatureDescription could not be created for the signature algorithm supplied.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    * [4/3/2013 2:58:13 PM] : Activation of S:\K3FrontEnd_NET4\Karacell3.application has started.

ERROR DETAILS
    Following errors were detected during this operation.
    * [4/3/2013 2:58:14 PM] System.Deployment.Application.InvalidDeploymentException (ManifestParse)
        - Exception reading manifest from file:///S:/K3FrontEnd_NET4/Karacell3.application: the manifest may not be valid or the file could not be opened.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.Deployment.Application.InvalidDeploymentException (SignatureValidation)
        - Manifest XML signature is not valid.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s)
            at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
        --- Inner Exception ---
        System.Security.Cryptography.CryptographicException
        - SignatureDescription could not be created for the signature algorithm supplied.
        - Source: System.Security
        - Stack trace:
            at System.Security.Cryptography.Xml.SignedXml.CheckSignedInfo(AsymmetricAlgorithm key)
            at System.Security.Cryptography.Xml.SignedXml.CheckSignature(AsymmetricAlgorithm key)
            at System.Security.Cryptography.Xml.SignedXml.CheckSignatureReturningKey(AsymmetricAlgorithm& signingKey)
            at System.Deployment.Internal.CodeSigning.SignedCmiManifest.Verify(CmiManifestVerifyFlags verifyFlags)
            at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s) 
```

**组件商店交易详情**

没有可用的交易信息。

*   我用有效的密钥重新签署了应用程序
*   我已经安装在多台 PC 上，它可以正常安装和运行。

请帮我列举这个错误的可能原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T16:19:27.773

我能够通过删除清单的签名来解决我的问题。
如果您右键单击您的项目并转到属性，然后转到**签名选项卡**；取消选中**Sign the ClickOnce manifests**和**Sign the assembly**。
我不确定这在安全性方面有什么作用，但我的应用是在我删除这些选项后安装的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T15:16:31.440

我遇到了同样的问题，只是机器没有合适的 .Net 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-18T05:00:16.137

我找到了原因。这是服务器设置中的 MIME 类型问题。

因此，请`.htaccess`在 FTP 根目录中添加文件。

并写在里面。

```
AddType application/microsoftpatch .msp
AddType application/microsoftupdate .msu 

AddType application/x-ms-application .application  
AddType application/x-ms-application .manifest  
AddType application/octet stream .deploy   

AddType application/x-ms-vsto .vsto 
```

它非常适合我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T00:31:25.927

您是否在 Windows XP 机器上安装了 SP-3 以及所有可用的 Windows 更新？Microsoft 会定期发布围绕证书、受信任的发布者和其他相关信息的代码更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T09:02:41.327

我之前看到过类似的问题，由于缺少加密提供程序，特定的 WINdows 操作系统无法“理解”或验证证书哈希的结果，在我的特殊情况下，它与使用使用 v3 模板生成的 X509 证书有关点击一次签名。

> 无法为提供的签名算法创建 SignatureDescription

消息中突出显示的部分与在 WinXP 机器上失败之前在多台机器上成功安装相结合，表明您也遇到了类似的问题 - WinXP 不知道您使用的证书中指定的加密算法签署clickonce。

我不知道有什么好的解决方案，你会在互联网上找到的正常建议是使用 v2 模板而不是 v3 模板来生成 X509，但这不一定是一个好的解决方案，并且超出了大多数组织（尤其是大多数人使用购买的证书而不是从他们自己的证书颁发机构生成的证书）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-28T11:23:33.827

这是因为您的开发人员机器安装了 .NET 4.5，而您的客户端机器只安装了 .NET 4.0。.NET 4.0 客户端机器无法读取清单，因为他们期望 SHA-1，而 .NET 4.5 开发人员机器可以。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-03T07:15:24.700

注释掉 app.manifest 中的 vista 条目对我有用

```
 <application>
      <!-- A list of all Windows versions that this application is designed to work with. 
      Windows will automatically select the most compatible environment.-->

      <!-- If your application is designed to work with Windows Vista, uncomment the following supportedOS node-->
      <!--<supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"></supportedOS>-->

      <!-- If your application is designed to work with Windows 7, uncomment the following supportedOS node-->
      <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>

      <!-- If your application is designed to work with Windows 8, uncomment the following supportedOS node-->
      <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"></supportedOS>

      <!--The ID below indicates application support for Windows 8.1 -->
      <supportedOS Id="{1f676c76-80e1-4239-95bb-83d0f6d0da78}"/>

      <!--The ID below indicates application support for Windows 10 -->
      <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}"/>

    </application> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-09-20T17:06:47.473

对于使用 Visual Studio 2012 构建并部署在具有所有关键更新（安装了 SP3 和 Windows Installer 4.5）的 XP 机器上的 WinForms 应用程序，我遇到了同样的问题。我也必须通过转到项目“属性”页面上的 [签名] 选项卡将我的应用程序更改为未签名。我都取消了选中：[签署 Click One 清单] 和 [签署程序集]。相同的应用程序在启用签名的 Windows 7 机器上安装良好。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-15T14:34:43.653

我有类似的问题，几乎相同。我通过删除不在应用程序文件根目录中的 .dll 解决了一个问题。

Visual Studio 2019：右键单击项目名称-属性-发布-应用程序文件。

就像在这篇文章中一样： [https ://social.msdn.microsoft.com/Forums/en-US/3d0c4382-9b48-4d28-9b79-25607e668074/problem-with-installing-clickonce-after-adding-reportviewercontrol-14-to -the-project?forum=winformssetup](https://social.msdn.microsoft.com/Forums/en-US/3d0c4382-9b48-4d28-9b79-25607e668074/problem-with-installing-clickonce-after-adding-reportviewercontrol-14-to-the-project?forum=winformssetup)

# c# - 使用字符串获取表的属性名称

> ID：15782800
> 
> 赞同：0
> 
> 时间：2013-04-03T08:53:05.250
> 
> 标签：c#, entity-framework

我想在实体框架中获取表数据模型的属性名称。我有这个代码

```
 var properties = context.GetType().GetProperties(BindingFlags.DeclaredOnly |
                                        BindingFlags.Public |
                                        BindingFlags.Instance); 
```

我想要的只是将此代码包含在如下方法中，以便拥有一个定义表模型的字符串变量：

```
 MyMethod (string category)
 {
     var properties = "category".GetType().GetProperties(BindingFlags.DeclaredOnly |
                                    BindingFlags.Public |
                                    BindingFlags.Instance);
   ......
   ......

 } 
```

是否可以？提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:57:37.210

您可以使用[Assembly.GetType(string)](http://msdn.microsoft.com/en-gb/library/y0cd10tb.aspx)方法来执行此操作。您的代码将如下所示：

```
// Don't forget to null-check the result of GetType before using it!
// You will also need to specify the correct assembly. I've assumed
// that MyClass is defined in the current executing assembly.
var properties = Assembly.GetExecutingAssembly().GetType("My.NameSpace.MyClass").
    GetProperties(
        BindingFlags.DeclaredOnly |
        BindingFlags.Public |
        BindingFlags.Instance); 
```

您还可以使用[Type.GetType(string)](http://msdn.microsoft.com/en-GB/library/w3f99sx1.aspx)

```
var properties = Type.GetType("My.NameSpace.MyClass").
    GetProperties(
        BindingFlags.DeclaredOnly |
        BindingFlags.Public |
        BindingFlags.Instance); 
```

# list - Haskell [x] 和 x 表示法 - 作为模式示例

> ID：15782801
> 
> 赞同：2
> 
> 时间：2013-04-03T08:53:10.327
> 
> 标签：list, haskell

我正在阅读《Learn you a Haskell for great good》和第 40 页 - 作为模式。

我将示例稍微更改为：

```
firstLetter :: String -> String
firstLetter "" = "Empty string, oops"
firstLetter all@(x:xs) = "The first letter of " ++ all ++ " is " ++ [x] ++ " otherbit " ++ xs 
```

然后可以这样使用：

```
*Main> firstLetter "Qwerty"
"The first letter of Qwerty is Q otherbit werty" 
```

但是我对 [x] 和 x 之间的区别以及为什么在上面的示例中必须使用 [x] 感到困惑。

例如，如果我更改为

```
firstLetter :: String -> String
firstLetter "" = "Empty string, oops"
firstLetter all@(x:xs) = "The first letter of " ++ all ++ " is " ++ x ++ " otherbit " ++ xs 
```

我得到错误：

```
Couldn't match expected type `[Char]' with actual type `Char'
In the first argument of `(++)', namely `x'
In the second argument of `(++)', namely `x ++ " otherbit " ++ xs'
In the second argument of `(++)', namely
  `" is " ++ x ++ " otherbit " ++ xs' 
```

我可以`xs`用来打印`"werty"`，但必须用来`[x]`打印“Q”。这是为什么？

是什么`[x]`意思？

在`(x:xs`) 中，`:`仅分隔每个元素，`x`第一个元素也是如此。为什么我不能使用 打印`x`？

又`xs`是什么类型的？值列表？那么这是否意味着`x`是一个元素并且`xs`必须是列表类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:04:42.783

`++`用于连接列表：

```
(++) :: [a] -> [a] -> [a] 
```

`[x]`是列表，`x`不是列表。

`firstLetter (x:xs)`是模式匹配的一个例子。

```
(:) :: a -> [a] -> [a] 
```

此运算符在列表之前添加元素。
因此 type of`x`是元素，type of`xs`是元素列表。在 Haskell 中，在列表名称中添加后缀 's' 是很常见的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T09:02:36.937

`String`定义为`type String = [Char]`。

`"Qwerty"`是`['Q', 'w', 'e', 'r', 't', 'y']`;的简写 这又是`'Q' : 'w' : 'e' : 'r' : 't' : 'y' : []`.

因此，当您与 匹配`x : xs`时`"Qwerty"`，您会得到`x = 'Q'`和`xs = "werty"`。

```
x     : xs
('Q') : ('w' : 'e' : 'r' : 't' : 'y' : []) 
```

注意：`x = 'Q'`，不是`x = "Q"`。`'Q'`是 a`Char`并且`"Q"`是 a `String`(即 a `[Char]`)。但是如果你有`'Q'`并且你想要`"Q"`，你可以写`['Q']`，因为`"Q"`它只是 的简写`['Q']`。

所以简短的回答是你必须这样做才能使类型匹配。`[x]`是一个长度为 1 的列表，它的单个元素是`x`.

* * *

在这：

```
firstLetter all@(x:xs)
    = "The first letter of " ++ all ++ " is " ++ x ++ " otherbit " ++ xs 
```

您正在构建要使用打印的字符串`++`。有类型

```
(++) :: [a] -> [a] -> [a] 
```

即`++`需要两个列表，并给你一个列表。

但`x`不是一个列表。所以你得到一个类型错误。

相反，您使用

```
"The first letter of " ++ all ++ " is " ++ [x] ++ " otherbit " ++ xs 
```

现在所有参数`++`都是列表，并且所有类型都匹配。

但你可以改为使用

```
"The first letter of " ++ all ++ " is " ++ x : " otherbit " ++ xs 
```

因为类型`:`是由

```
(:) :: a -> [a] -> [a] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T09:03:58.357

[x] 表示“仅包含元素 x 的列表”。

由于 Haskell 中的 String 是一个字符列表，如果 x 是字符 'Q' 那么 [x] 是字符串 "Q"。++ 运算符期望接收两个字符串作为参数，因此您不能只给它一个字符。

这就是编译器告诉你的：`Couldn't match expected type `[Char]' with actual type `Char'`意味着编译器期待一个 [Char] 类型的参数（它是一个字符列表，与 String 相同）但你传递给它一个 Char。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T14:38:27.003

还可以注意到，在许多编程语言中，连接运算符要么被重载，因此根据两边的类型有几种实现，或者参数将被强制转换为字符串。在 Haskell 中情况并非**如此。**

# php - 从字符串中获取文件名

> ID：15782802
> 
> 赞同：2
> 
> 时间：2013-04-03T08:53:16.640
> 
> 标签：php

我确实有以下文件字符串。

```
/img/studio/record.JPG
/img/studio/view.JPG
/img/studio/doors.JPG
img/team/andy.jpg
img/team/jim.jpg 
```

现在我只想获取要在数据库中查找的文件名。

喜欢：记录.JPG

获得它的最佳方法是什么？（我需要一个 php 解决方案。）

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:55:03.023

使用[基本名称](http://php.net/manual/de/function.basename.php)：

```
echo basename('/img/studio/record.JPG'); 
```

将返回`record.JPG`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:55:20.937

尝试`pathinfo()`

```
pathinfo('/img/studio/record.JPG', PATHINFO_BASENAME) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T08:55:30.303

使用`pathinfo`（[文档](http://www.php.net/manual/en/function.pathinfo.php)）：

```
$path = pathinfo('/img/studio/record.JPG');
echo $path['basename'];     // record.JPG 
```

这样您也可以轻松获取目录名称或文件扩展名：

```
echo $path['dirname'];      // /img/studio
echo $path['extension'];    // JPG 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T11:39:01.337

我想提供多种方法来提供相同的结果：

```
$str = '/img/studio/record.JPG';

echo basename($str);
echo pathinfo($str, PATHINFO_BASENAME);
echo explode('/', $str)[count(explode('/', $str))-1];
echo strrev(explode("/", strrev($str))[0]);
echo preg_replace('/.*\//', '', $str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:59:02.153

我认为[basename](http://php.net/basename)函数应该做你需要的：

```
<?php 
echo basename("/img/studio/record.JPG");
?> 
```

返回

```
record.JPG 
```

# c# - SQL Server CE 连接字符串，用于从 Windows 窗体应用程序连接到数据库

> ID：15782815
> 
> 赞同：1
> 
> 时间：2013-04-03T08:54:02.040
> 
> 标签：c#, sql-server-ce

```
SqlCeConnection conn =
   new SqlCeConnection(@"Data Source= " + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) + "\\ITIA.sdf;Persist Security Info=False;"));
conn.Open(); 
```

这是我的代码，它向我显示以下错误：

> 文件名无效。检查数据库的文件名。[ 文件名 = 文件:\C:\Users\Prash\documents\visual studio 2010\Projects\ITIA\ITIA\bin\Debug\ITIA.sdf ]

但在文件夹中，数据库保存为 ITIA。

我想发布我的 Windows 窗体应用程序，以便客户端可以输入可以存储在数据库中的数据。

# php - 独立开发人员的 Git 工作流程（总 git 新手）

> ID：15782817
> 
> 赞同：5
> 
> 时间：2013-04-03T08:54:09.883
> 
> 标签：php, git, github, github-for-windows

我决定是时候在一个我随便开发了十多年的 PHP 项目上开始使用 Git。（拜托，版本控制警察不要讲课！）由于我的 VPS 需要复杂的设置来完成项目所需的一切（尤其是单代码库多客户端结构和具有日语能力的 TeX 安装以创建专业 PDF )，无法在我的本地 Windows 机器上设置开发环境。但是我在服务器上确实有一个可以玩的测试台区域，所以它是我的开发区域。目前我使用 Filezilla 访问服务器并直接在 Notepad++ 中打开文件，当我准备好查看我的编辑时，我只需保存并让 Filezilla 上传。当测试台上一切正常时，我将文件复制到生产代码库区域。是的，除了我自己的评论之外，这没有给我任何更改的历史记录，而且我必须小心不要将错误修复与半成品的​​新功能混为一谈。我可以看到 Git 分支对于正在进行的不同升级的价值。

昨天我弄湿了脚趾头。首先，我创建了一个 Github 帐户，然后（在教程的推荐下）安装了 Git For Windows（带有自己的 Bash 和外观小巧的 GUI）和 Kdiff3，并按照一些说明配置 Git Bash。尽管如此，我最终不得不安装其他东西来与我的 Github 帐户（适当地命名为 Windows 版 Github）交互，这似乎完成了其他两个程序应该为我做的所有事情。无论如何，然后我做了一个简单的任务，作为我第一次涉足 Github 世界 - 我已经为其他人的 jQuery 插件添加了功能并想与开发人员共享它，所以我**分叉**了他的 repo，将它**克隆**到我的机器上，覆盖了文件我之前已经编辑和测试过，**同步过**到我的 Github 帐户，并发送了一个**拉取请求**。最后一句话中的所有术语对我来说都是全新的，所以我为自己能走到这一步感到非常自豪。;) 但我想我只需要 Github 软件，而不是 Git 软件——很难知道该相信哪些教程。

无论如何，现在我想为我自己的东西找出一个工作流程，这是我对你们的实际问题。据我所知，除了公共 Github 之外，在任何地方拥有主仓库都需要花钱，而且我不在乎其他人是否看到我的代码（我不希望其他人从事我由意大利面条代码组成的古怪项目，但如果他们想要，那太好了）。好的，但是然后呢？也许是其中一种情况，或者其他情况：

1.  将 repo 的分支克隆到我的 PC，对本地文件进行编辑，然后将它们上传到 Filezilla 中进行测试（比我当前的工作流程多点击几次，因为 Filezilla 不会自动查看本地文件和远程文件之间的关系，但没什么大不了的）。然后，当我对代码感到满意时，在本地提交，同步到 Github，然后将文件（从某个地方 - 在这一点上不确定）复制到生产区域。

2.  在我的 VPS 上安装 Linux 风格的 Git，以便“本地”Git 文件位置是测试平台，并通过 PuTTY 使用 Git 进行本地提交。文件结构更简单（根本不需要在我的电脑上复制）但使用 Git 更麻烦：

    *   我不经常使用 PuTTY，由于某种原因，连接经常在我身上断开，我必须重新启动。
    *   尽管 Linux 命令行是 Git 的原生栖息地，但我可能更喜欢 GUI（因为我很快忘记了命令语法——我猜是老脑子）。

    此外，由于我从未最终使用我在这里安装的 Git 程序，我不确定我将在服务器上使用的是 Git 还是 Github。

3.  其他一些情况，因为 #1 或 #2 都没有使用 Git/Github 来管理生产文件区域，这可能是一个好主意，这样我就不会忘记复制我需要的所有内容。

我试图研究基于 PHP 的 GUI 与想法 #2 一起使用的可能性（因此我不必使用 PuTTY 进行日常操作），但似乎这些工具的讨论都假设您正在尝试创建自己的 Github 服务，或者“本地”克隆的存储库物理上位于您的本地 PC 上（xAMP 在任何操作系统上运行）。但也许我使用的 Github 软件足以做到这一切——这很难说。我还不了解 Github 上的主公共存储库、某个地方的分支（也在 Github 上？）、我的 Web 服务器上的至少两组文件（测试平台和生产区域）、Github 软件、Git 软件之间的相互作用，和我坐的电脑的键盘/屏幕。

所以请原谅我的新手漫无边际，但如果有人有类似的开发情况，你的工作流程是什么？或者你会给我什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:16:56.903

这是解决问题的一种方法：

您将需要三个存储库：

*   用于编辑代码的本地存储库。[1]
*   服务器上的裸远程存储库。这将位于不公开可见的位置，但您可以通过 ssh 访问。[2]
*   生产环境。[3]

这是实现：

```
workstation$ cd localWorkingDirectory/
workstation$ git init
workstation$ git add .
workstation$ git commit -m 'initial commit'
workstation$ ssh login@myserver
myserver$ mkdir myrepo.git
myserver$ cd myrepo.git
myserver$ git init --bare
myserver$ exit
workstation$ cd localWorkingDirectory/
workstation$ git remote add origin login@myserver:myrepo.git
workstation$ git push origin master 
```

每次在任何分支上进行提交时，请使用以下命令进行备份：

```
workstation$ git push origin BRANCH 
```

当您准备好将分支`version2`投入生产时：执行此操作

```
workstation$ git push origin version2
workstation$ ssh login@myserver
myserver$ git clone path/to/myrepo.git productionDirectory
myserver$ cd productionDirectory
myserver$ git checkout version2 
```

不好了！它不起作用！最好切换回版本1！

```
workstation$ ssh login@myserver
myserver$ cd productionDirectory
myserver$ git checkout version1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:19:35.160

您不需要 github（或任何其他中央存储）即可开始使用 git。特别是因为你是一个孤独的开发者。Git 直接在您自己的机器上运行，没有任何服务器组件（与 subversion 不同）。只是`git init`开始承诺。

我同意这里的其他评论者的观点，即您应该致力于建立并运行本地开发环境。即使需要付出一些努力，这当然是值得的。这样做的副作用之一可能是您被迫解耦一些当前的硬依赖关系，从而从中获得更好的整体应用程序架构。不能轻易在您的开发环境中复制的东西可以改为模拟服务。

一旦到位，请查看脚本部署过程。例如，编写一个将您的开发机器的代码库与生产服务器同步的shell 脚本。有很多方法可以做到这一点，但我建议你从非常简单的开始，然后修改你的选择（Capistrano 是一种选择）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:10:28.930

对于您当前的开发设置，我当然会看一下[capistrano 之类的东西。](https://github.com/capistrano/capistrano)

我可以理解为什么您可能不愿使用终端，但这可能会帮助您在上下文中理解 git。很快就可以掌握这些命令，并且当与 capistrano 等系统绑定时，您将立即将开发代码摇摆到您的环境中：

```
git commit -a 
git push origin develop
cap deploy:dev 
```

当我在 Windows 上工作时，我通常会尝试使用 sun 的 virtualbox 之类的东西来复制我在本地使用虚拟机的部署环境。这样，您可以在本地开发的同时最大限度地减少潜在的环境问题。然后你可以使用 putty ssh 到你的本地虚拟机。虚拟机和主机操作系统以及所有标准 IDE/编辑器之间的设置共享也可以工作。我发现这比必须远程设置 vps 更可取，但无论如何都可以。

# delphi - 如何从第二个线程更新进度指示器？

> ID：15782823
> 
> 赞同：5
> 
> 时间：2013-04-03T08:54:24.383
> 
> 标签：delphi, omnithreadlibrary

我有一个带有进度指示器的主表单。在数据模块中，我有十个数据集，每个数据集都定义了一个 OnBeforeOpen 事件。

我想通过主窗体中的进度条显示已打开数据集的进度百分比。

由于我对多线程编程完全陌生，有人可以给我一些建议吗？

非常感谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T09:09:54.103

要么从线程发布消息到主线程并从那里更新进度条，要么使用 TThread.Queue 方法在主线程的上下文中执行一些代码。

```
unit Unit12;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ComCtrls;

const
  WM_UPDATE_PB = WM_USER;

type
  TForm12 = class(TForm)
    ProgressBar1: TProgressBar;
    ProgressBar2: TProgressBar;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
  public
    procedure WMUpdatePB(var msg: TMessage); message WM_UPDATE_PB;
  end;

var
  Form12: TForm12;

implementation

{$R *.dfm}

procedure UpdateFromThreadViaMessage;
var
  i: integer;
begin
  for i := 1 to 100 do begin
    Sleep(20);
    PostMessage(Form12.Handle, WM_UPDATE_PB, i, 0);
  end;
end;

procedure UpdateFromThreadViaQueue;
var
  i: integer;
begin
  for i := 1 to 100 do begin
    Sleep(20);
    TThread.Queue(nil,
      procedure begin
        Form12.ProgressBar2.Position := i;
      end);
  end;
end;

procedure TForm12.Button1Click(Sender: TObject);
begin
  TThread.CreateAnonymousThread(UpdateFromThreadViaMessage).Start;
  TThread.CreateAnonymousThread(UpdateFromThreadViaQueue).Start;
end;

procedure TForm12.WMUpdatePB(var msg: TMessage);
begin
  ProgressBar1.Position := msg.WParam;
end;

end. 
```

# wpf - 当 DataGrid 绑定到 DataTable 时，如何使用 MVVM 在 WPF 中选择 DataGrid 行

> ID：15782827
> 
> 赞同：0
> 
> 时间：2013-04-03T08:54:26.413
> 
> 标签：wpf, mvvm, datagrid, datatable

我已成功将 a绑定`DataTable`到. （我已经在 中定义了 DataTable 。）`DataGrid``WPF with MVVM``viewmodel`

然后我定义了一个`DataRowView`类型属性并绑定到`SelectedItem`DataGrid 控件的属性。

我可以通过它获得选定的项目。但我试图设置选定的项目，但我找不到办法。有人可以帮我弄清楚。

这`view`

```
<Window x:Class="Pivot.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:Pivot.ViewModels"
    Title="MainWindow" Height="350" Width="525">
<Grid>

    <Grid.DataContext>
        <vm:MainViewModel />
    </Grid.DataContext>

    <DataGrid 
        ItemsSource="{Binding SizeQuantityTable}"
        AutoGenerateColumns="True"
        SelectedValue="{Binding SelectedRow}" 
        Margin="0,0,0,120" />
</Grid>
</Window> 
```

这`View Model`

```
public class MainViewModel : ViewModelBase
{
    #region Declarations

    private DataTable sizeQuantityTable;
    private DataRowView selectedRow;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the size quantity table.
    /// </summary>
    /// <value>The size quantity table.</value>
    public DataTable SizeQuantityTable
    {
        get
        {
            return sizeQuantityTable;
        }
        set
        {
            sizeQuantityTable = value;
            NotifyPropertyChanged("SizeQuantityTable");
        }
    }

    /// <summary>
    /// Gets or sets the selected row.
    /// </summary>
    /// <value>The selected row.</value>
    public DataRowView SelectedRow
    {
        get
        {
            return selectedRow;
        }
        set
        {
            selectedRow = value;
            NotifyPropertyChanged("SelectedRow");
        }
    }

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="MainViewModel"/> class.
    /// </summary>
    public MainViewModel()
    {
        this.SizeQuantityTable = new DataTable();

        DataColumn sizeQuantityColumn = new DataColumn();
        sizeQuantityColumn.ColumnName = "Size Quantity";
        this.SizeQuantityTable.Columns.Add(sizeQuantityColumn);

        DataColumn sColumn = new DataColumn();
        sColumn.ColumnName = "S";
        this.SizeQuantityTable.Columns.Add(sColumn);

        DataColumn mColumn = new DataColumn();
        mColumn.ColumnName = "M";
        this.SizeQuantityTable.Columns.Add(mColumn);

        DataRow row1 = this.SizeQuantityTable.NewRow();
        row1[sizeQuantityColumn] = "Blue";
        row1[sColumn] = "12";
        row1[mColumn] = "15";
        this.SizeQuantityTable.Rows.Add(row1);

        DataRow row2 = this.SizeQuantityTable.NewRow();
        row2[sizeQuantityColumn] = "Red";
        row2[sColumn] = "18";
        row2[mColumn] = "21";
        this.SizeQuantityTable.Rows.Add(row2);

        DataRow row3 = this.SizeQuantityTable.NewRow();
        row3[sizeQuantityColumn] = "Green";
        row3[sColumn] = "24";
        row3[mColumn] = "27";
        this.SizeQuantityTable.Rows.Add(row3);

        DataRow row4 = this.SizeQuantityTable.NewRow();
        row4[sizeQuantityColumn] = "Yellow";
        row4[sColumn] = "30";
        row4[mColumn] = "33";
        this.SizeQuantityTable.Rows.Add(row4);

    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:10:39.003

如果我理解正确，您想从 MainViewModel 类中以编程方式选择网格行。如果这是需要，请尝试以下代码。SelectRow 是 MainViewModel 中的方法。这可能不是完整的解决方案，但对您的要求有一些想法。

```
public void SelectRow(int rowIndex)
{
     SelectedRow = SizeQuantityTable.DefaultView[rowIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T19:07:51.877

长期悬而未决的问题？？？。我在 XAML 中进行了此修改，并通过单击按钮来更改基于文本框行值的网格选择。

```
<Grid>

        <Grid.DataContext>
            <vm:MainViewModel x:Name="Model"/>
        </Grid.DataContext>

        <DataGrid  
        ItemsSource="{Binding SizeQuantityTable}"
        AutoGenerateColumns="True"
        SelectedIndex="{Binding SelectedRow, Mode=TwoWay}" 
        Margin="0,0,0,120" />
        <Button Content="Button" Height="53" HorizontalAlignment="Left" Margin="121,214,0,0" Name="button1" VerticalAlignment="Top" Width="118" Click="button1_Click" />
        <TextBox Height="21" HorizontalAlignment="Left" Margin="272,218,0,0" Name="textBox1" VerticalAlignment="Top" Width="114" Text="1" />
    </Grid>

 /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
//I know this is not the correct way to do it in MVVM but I am am taking time from my work... so need to be quick.. :)
        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Model.SelectedRow = int.Parse(textBox1.Text);
        }
    }

  private int selectedRow;

/// <summary>
        /// Gets or sets the selected row.
        /// </summary>
        /// <value>The selected row.</value>
        public int SelectedRow
        {
            get
            {
                return selectedRow;
            }
            set
            {
                selectedRow = value;
                OnPropertyChanged("SelectedRow");
            }
        } 
```

尝试这个。它应该工作...

# hsqldb - HSQLDB 2.2.9：理解 server.properties 文件

> ID：15782829
> 
> 赞同：1
> 
> 时间：2013-04-03T08:54:28.180
> 
> 标签：hsqldb

我在 ubuntu Linux 上运行 hsqlddb 2.2.9，但我很难理解 server.properties 文件。在 /usr/local 下安装 hsqldb 后，当我从放置 server.properties 文件的位置使用 java org.hsqldb.server.Server 启动服务器时，假设 server.properties 是：

```
server.database.0=file:/usr/local/hsqldb-2.2.9/hsqldb/hibernate/hiberdb
server.dbname.0=hiberdb 
```

然后我得到一个子目录hibdernate，里面有标签

```
hibderdb.{log,script,properties,tmp} 
```

使用 hibderdb.tmp 是一个空目录。到现在为止还挺好。

* * *

但是，在以下情况下，我无法理解 hyper sql db 的逻辑：

假设 server.properties 是：

```
server.database.0=file:/usr/local/hsqldb-2.2.9/hsqldb/hibernate
server.dbname.0=hiberdb 
```

然后 hibderdb 别名是 ignode ，我得到文件

```
hibernate.{log,properties,script,tmp} 
```

在与 server.properties 文件相同的目录中（即在当前目录中）。

甚至以下内容：

```
server.database.0=file:/usr/local/hsqldb-2.2.9/hsqldb/hibernate/
server.dbname.0=hiberdb 
```

那么我得到的只是一个没有 hibderdb.* 文件的休眠子目录，而是我有文件

```
hibernate/{.log,.properties,.script,.tmp} 
```

（这些是隐藏的 Unix 文件，并且别名属性 dbname 再次被忽略）。

HSQLDB 文档有一个示例：

[http://hsqldb.org/doc/2.0/guide/listeners-chapt.html#lsc_server_props](http://hsqldb.org/doc/2.0/guide/listeners-chapt.html#lsc_server_props)

```
server.database.1=file:/opt/db/mydb
server.dbname.1=enrolments 
```

这个例子是过时的还是错误的？

谢谢，

杰森·波西特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:49:52.607

与属性文件中的`server.dbname.0=hiberdb`另一行完全无关。

从客户端访问服务器时使用此“别名”。

文档中的示例是正确的。外部数据库客户端正在处理它称为“注册”的数据库别名，并且不需要知道您在服务器上存储文件的位置。

`jdbc:hsqldb:hsql://localhost/hiberdb`无论您将文件放在何处，始终通过 URL 访问您的“hiberdb”客户端。

# sed - sed 替换 django 设置文件中的 SECRET_KEY，引入垃圾

> ID：15782837
> 
> 赞同：1
> 
> 时间：2013-04-03T08:54:55.680
> 
> 标签：sed

我构建了一个小脚本，从标准 django 设置创建副本。复制项目后，我想替换`SECRET_KEY`. 原始`SECRET_KEY`和替换都包含许多特殊字符。我的外壳代码如下所示：

```
SECRET=$(python -c 'from random import choice; import sys; sys.stdout.write("".join([choice("abcdefghijklmnopqrstuvwxyz0123456789^&*(-_=+)") for i in range(50)]))')
sed --in-place "s/^SECRET_KEY = .*/SECRET_KEY = '${SECRET}'/" src/settings.py 
```

当我运行它时，它有时会起作用，但在大多数情况下，结果看起来像这样：

```
SECRET_KEY = '*n(hbp+o31v*d3pSECRET_KEY = '=ih8(6hwlqiamvg88_jtatqi1w2^axl=+omrpwck*aena-c3ax'8gpv8SECRET_KEY = '=ih8(6hwlqiamvg88_jtatqi1w2^axl=+omrpwck*aena-c3ax'8bwc4ele+bk(*+)vv4tSECRET_KEY = '=ih8(6hwlqiamvg88_jtatqi1w2^axl=+omrpwck*aena-c3ax'*qscez(f' 
```

我不知道所有这些垃圾来自哪里，但我想这与原始`SECRET_KEY`或替换中的特殊字符有关，它们被解释为正则表达式特殊字符。知道如何摆脱这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:04:15.210

做正则表达式转义你的秘密生成器，你应该没问题：

使用 re.escape。

```
SECRET=$(python -c 'import re;from random import choice; import sys; sys.stdout.write(re.escape("".join([choice("abcdefghijklmnopqrstuvwxyz0123456789^&*(-_=+)") for i in range(50)])))') 
```

# python - 在“放置”实体时检测实体的特定属性是否已更改？

> ID：15782840
> 
> 赞同：3
> 
> 时间：2013-04-03T08:54:59.463
> 
> 标签：python, google-app-engine, google-cloud-datastore

寻找一种有效的方法来检查 a 的特定属性是否`db.Model`已更改与其之前存储在数据存储中的版本`putting`。显然我想避免从数据库中获取一个新的实例！可能吗？像这样的东西：

```
class MyClass(db.Model):
    prop = db.StringProperty()

instance = MyClass()
instance.string_property = 'string'
instance.put()

instance2 = db.get(instance.key())
instance2.string_property = 'string2'

instance2.put() #would like to detect that string_property was altered! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:05:11.150

我认为那是个坏主意。

如果您查看 db 的代码（您现在应该真正使用 ndb），那么每个属性/模型（元类在这里大量使用）的引擎盖下都会发生很多事情，并且取决于类/属性和/或值被分配后，您可能会开始遇到一些真正奇怪的行为和/或错误。

这并不意味着你应该，但要仔细考虑你在做什么;-)

我会考虑使用钩子（se nick johnsons blog 获取一些想法 blog.notdot.net/2010/04/...）或切换到 ndb 并使用它的 pre/post 钩子（参见模型钩子 [https://developers.google.com /appengine/docs/python/ndb/entities#hooks](https://developers.google.com/appengine/docs/python/ndb/entities#hooks) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:33:14.927

我意识到这只是一个基本的 Python 编程问题：

```
class MyClass():
    prop = 'init string'

    def __setattr__(self, name, value):
        print name + ' is being updated to ' + value

    test = MyClass()
    test.prop = 'summing else'

    prop is being updated to summing else 
```

# android - Android中具有固定标题的组合布局

> ID：15782844
> 
> 赞同：0
> 
> 时间：2013-04-03T08:55:09.617
> 
> 标签：android, layout

在我的应用程序中，我有一个计数器，我想保留在所有屏幕的标题上，它每隔几秒就会增加一次，因此它应该独立于视图中的其他组件而存在。只有“身体”视图必须改变。

我想过有一个父活动并玩片段，但我不知道如何调整它们的大小来组成我的屏幕。

这是要走的路还是我宁愿使用简单的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:11:51.807

> 为页眉或页脚创建不同的布局，并分别在顶部和底部的布局文件中使用 layout="@layout/main" />
> 
> 如果您使用相同的布局文件并更改中心布局，则代码会变脏，因此请尝试上面的代码来执行此操作

# php - 为什么当我使用 graph-api 时 file_get_contents 不能与 https 一起使用？

> ID：15782846
> 
> 赞同：0
> 
> 时间：2013-04-03T08:55:16.523
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

```
file_get_contents('https://graph.facebook.com/me/accounts?access_token=ACCESS_TOKEN_HERE'); 
```

当我使用访问令牌在浏览器中打开此链接时，它会列出我所有的 Facebook 页面，当我尝试使用 回显它时`file_get_contents`，会出现以下错误：

> 警告：file_get_contents（[https://graph.facebook.com/me/accounts?access_token=ACCESS_TOKEN_HERE](https://graph.facebook.com/me/accounts?access_token=ACCESS_TOKEN_HERE)）[function.file-get-contents]：无法打开流：/home/www/ 中的权限被拒绝***** ** *** * * *** ** *** ***第 4 行的 .php

也`file_get_contents`适用于任何其他网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:03:06.373

如果您使用的是 php sdk，请尝试在 base_facebook.php`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`中包含的每一行之前。`curl_exec`如果它有效，那么您至少可以知道问题出在哪里。

# cakephp - CakePHP 在测试中无法访问其他模型

> ID：15782851
> 
> 赞同：0
> 
> 时间：2013-04-03T08:55:34.470
> 
> 标签：cakephp, testing

这是我的测试控制器：

```
 public function testAdd() {
   $data = array(
       'Article' => array(
           'id' => '1',
           'text' => 'blablabla',
       ),

   );

   $result = $this->testAction(
       '/articles/add',
       array('data' => $data, 'method' => 'post')
   );
   debug($result);
 } 
```

所以我可以访问控制器中的当前模型（$this->Article），但我无法通过 loadModel 加载其他模型。澄清：当我加载其他模型时，控制器中编写的代码可以完美运行，仅当我想测试我的控制器时才会出现问题。

此致。

# r - 你将如何加快这段代码的速度？降低 netcdf 数据的分辨率，然后将其转换为 xyz 格式以进行统计

> ID：15782852
> 
> 赞同：0
> 
> 时间：2013-04-03T08:55:36.340
> 
> 标签：r, optimization, geospatial, netcdf, rworldmap

我正在获取玉米产量和收获面积的 netcdf，将分辨率从 2.5 弧分缩小到 0.5 度，然后将整个数据转换为 XYZ 格式，这样我就可以更轻松地与我的数据“对话”有这种格式。（我想我可以将其他数据转换为矩阵形式，但我喜欢 xyz。）

数据在[这里](http://www.geog.mcgill.ca/landuse/pub/Data/175crops2000/NetCDF/maize_5min.nc.zip)。

下面的代码定义了一些函数来计算收获面积和平均产量的总产量，然后它在查询 netcdf 时使用一些“馈线”数据，然后它使用 plyr 循环通过馈线，提取数据，应用函数，然后保存在 xyz 中。它可以工作，但只运行其中一个文件大约需要 30 分钟，而且我有 100 多个。任何有关优化此代码的方法的建议都会很棒。提取更大的数据块并将函数应用于它们会更​​快吗？就像，也许是地球的整个条纹？我怎么会先验地知道这是否会更快？

```
rm(list=ls()) 
library(ncdf)
library(reshape)
library(plyr)
library(sp)
library(maps)
library(rgeos)
library(maptools)
library(rworldmap)

getha = function(lat,size=lat[1]-lat[2]){
    lat1 = (lat-size/2)*pi/180
    lat2 = (lat+size/2)*pi/180
    lon1 = (0-size/2)*pi/180    #lon doesn't come in because all longitudes are great circles
    lon2 = (0+size/2)*pi/180
    6371^2 * abs(sin(lat1)-sin(lat2))*abs(lon1-lon2)*100    #6371 is the radius of the earth and 100 is the number of ha in a km^2
    }

gethamat = function(mat,latvec,blocksize=6){
    a = getha(latvec)
    areamat = matrix(rep(a,blocksize),blocksize)
    area = t(mat)*areamat   #The matrix is transposed because the dimensions of the Ramankutty's netcdf's are switched
    area
    }

getprod = function(yieldblock,areablock,latvec){
    b = gethamat(areablock,latvec)
    sum(t(yieldblock)*b,na.rm=TRUE)
    }

lat = as.matrix(seq(from=89.75,to=-89.75,by=-.5))
lon = as.matrix(seq(from=-179.75,to=179.75,by=.5))

lon = seq.int(from=1,to=4320,by=6)
lat = seq.int(from=1,to=2160,by=6)

lat = rep(lat,720)
lon = t(matrix(lon,720,360))
lon = as.data.frame(lon)
l = reshape(lon,direction="long",varying=list(colnames(lon)),v.names = "V")
coords = data.frame(cbind(l[,2],lat))
colnames(coords) = c("lng","lat")
feeder = coords
head(feeder)

maize.nc = open.ncdf('maize_5min.nc')

getcrops = function(feed,netcdf,var="cropdata"){
    yieldblock = get.var.ncdf(netcdf,varid=var,start = c(as.numeric(feed[1]),as.numeric(feed[2]),2,1),count = c(6,6,1,1))
    areablock = get.var.ncdf(netcdf,varid=var,start = c(as.numeric(feed[1]),as.numeric(feed[2]),1,1),count = c(6,6,1,1))
    lat = get.var.ncdf(netcdf,varid="latitude",start = feed[2],count = 6)
    prod = getprod(yieldblock,areablock,lat)
    lon = get.var.ncdf(netcdf,varid="longitude",start = feed[1],count = 6)
    #print(c(mean(lat),mean(lon)))
    data.frame(lat=mean(lat),lon = mean(lon),prod=prod)
    }

out = adply(as.matrix(feeder),1,getcrops,netcdf=maize.nc,.parallel=FALSE) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:22:52.027

`plyr`当块的数量变大时，函数的速度非常慢。我真的建议将数据保存在多维数组中。这允许您使用`apply`例如获取所有`lat-lon`组合的平均值等。多维数组占用更少的 RAM 存储空间，因为元数据不是直接存储为列，而是隐含在数组的维度中。此外，`apply`通常比使用`plyr`. 该`ncdf`包本机将数据读取到多维数组中，因此这也为您节省了一个处理步骤（例如使用`melt`）。

减少数据集后，我经常会使用`melt`您所说的 XYZ 格式进行绘图。但是到那时，数据集太小了，这并不重要。

# c# - 在图片框中显示图标

> ID：15782857
> 
> 赞同：12
> 
> 时间：2013-04-03T08:55:46.200
> 
> 标签：c#, icons, picturebox

我正在尝试`icon file`在图片框中显示。我正在使用此代码来设置图像。

```
pictureBox1.Image = new Icon(openFileDialog.FileName, new Size(48, 48)).ToBitmap(); 
```

但我得到了这个例外。

```
System.ArgumentOutOfRangeException: Requested range extends past the end of the array.
   at System.Runtime.InteropServices.Marshal.CopyToNative(Object source, Int32 startIndex, IntPtr destination, Int32 length)
   at System.Runtime.InteropServices.Marshal.Copy(Byte[] source, Int32 startIndex, IntPtr destination, Int32 length)
   at System.Drawing.Icon.ToBitmap() 
```

如何克服这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T09:06:31.517

解决了这个问题。

```
pictureBox1.Image = Bitmap.FromHicon(new Icon(openFileDialog.FileName, new Size(48, 48)).Handle); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-27T15:56:39.397

某些图标的大小不正确，为 48x48 到 32x32。

我的最终代码是：

```
 Bitmap _image;
    try
    {
     _image = new Icon(icon, width, height).ToBitmap();
    }
    catch(ArgumentOutOfRangeException)
    {
     _image = Bitmap.FromHicon(new Icon(icon, new Size(width, height)).Handle);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T15:34:11.187

有时`Bitmap.FromHicon`不能完美转换。我找到了另一个解决方案：

```
// event Paint of pictureBox1
void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawIcon(theIcon, 0, 0);
} 
```

# python - Tkinter 菜单中的复选按钮如何工作？

> ID：15782858
> 
> 赞同：0
> 
> 时间：2013-04-03T08:55:47.950
> 
> 标签：python, tkinter

**目标**

了解检查按钮在 Tkinter 菜单中的工作原理。尤其是关联变量的值如何更改以及命令中提到的函数何时被调用。

**代码**

我在 Tkinter 菜单中添加了以下检查按钮：

```
window = Tk()

shown = BooleanVar()
shown.set(True)        

menubar = Menu(window)

optionsmenu = Menu(menubar,tearoff=0) 

optionsmenu.add_checkbutton(label='Show timing after the run is completed',command=PopUp,variable=shown,onvalue = True,offvalue = False) 
```

为简单起见，复选按钮`true`的开启值为 ，关闭值为`false`。

**我想知道的：**

1.  按下检查按钮时变量的值是否发生了变化，或者是否调用了函数并且需要显式更改变量的值？
2.  该命令是在切换变量之前执行还是在切换之后执行？

**眼镜**

视窗 XP SP3

蟒蛇 2.7

**请**帮我解决这个疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:55:47.950

你的问题的答案是这样的：

1.  是的，当按下复选按钮时，变量会发生变化。这是检查按钮小部件的正常行为。
2.  在变量的值从打开切换到关闭之后调用该命令，反之亦然。

# php - 如何在 Ubuntu 上安装 PHP pthreads 扩展？

> ID：15782860
> 
> 赞同：9
> 
> 时间：2013-04-03T08:55:49.120
> 
> 标签：php, ubuntu, pthreads, ubuntu-12.04

我想在 Ubuntu 上安装“pthreads”PHP 扩展。我正在使用 Ubuntu 12.04.1 LTS。如果需要，我可以升级。我真的不想从源代码编译任何东西。例如，从源代码重新编译 PHP 听起来对我来说是一个可怕的想法。

在我看来，最好的选择是使用命令安装这个扩展`aptitude`。例如像`aptitude install php5-mysql`. 另一个好主意是使用 pecl `pecl install pthreads`。但是由于以下错误，这对我不起作用：

> 检查 ZTS... 配置：错误：pthreads 需要 ZTS，请在启用 ZTS 的情况下重新编译 PHP

让我解释一下为什么我不喜欢从源代码重新编译 PHP 的想法：

*   我想我应该卸载原始的 PHP 包和所有依赖项。因为如果我通过标准 PHP 编译它，那么任何包更新都会覆盖我的更改。是的，另一种选择是阻止 PHP 更新。无论如何，这会引入一些额外的工作并使设置更加复杂。我们在分布式团队中工作。而且我不希望其他人在生产服务器上处理这种复杂的设置。
*   我想在服务器上安装更新。而且我不想因为安全修复等原因重新编译 PHP。
*   我不想在生产服务器上编译任何东西并多次这样做。然后我应该构建自己的包并用新版本等更新它们。抱歉，我不够聪明，无法做到这一点。可能会在 2-3 年内，但不是现在。因为这里有很多事情要记住。例如，如何用自定义包替换标准 PHP 包，同时仍然满足所有依赖项。

一些参考资料：

*   [动态配置PHP线程安全--enable-maintainer-zts，还是使用YUM安装pThreads？](https://stackoverflow.com/questions/15559918/dynamically-configure-php-for-thread-safety-enable-maintainer-zts-or-use-yum)
*   [如何使用 Pthreads PHP 扩展（在 Ubuntu 中）](https://stackoverflow.com/questions/14081444/how-to-use-pthreads-php-extension-in-ubuntu) - 有人谈到我将在这里做什么。
*   [构建 pthread](http://pthreads.org/index.php?id=building)

这篇文章似乎是旧的，而不是实际的。我会保留它仅供参考。我想它应该被理解为'PHP 在 3 年前不是线程安全的'。

*   [不要相信谎言：PHP 还不是线程安全的](http://neosmart.net/blog/2008/dont-believe-the-lies-php-isnt-thread-safe-yet/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T16:51:02.883

ZTS：[Z] 结束 [T] 线程 [S] 安全。

ZTS 是一个编译时选项，不能在运行时启用。它允许通常在单个线程中执行的 PHP 解释器在多个线程中执行，每个线程都有自己独立的解释器实例。

您的唯一选择似乎是全新构建，然后使用包构建工具进行分发。

我无法直接建议创建 deb，但是，创建 rpm 非常简单，[https://github.com/krakjoe/spex](https://github.com/krakjoe/spex)有一个起点，然后您可以使用外星人转如果您不知道如何直接创建 deb 包，请将 RPM 转入 deb。

从源代码构建将是不可避免的，除非您可以找到一些具有 PHP 线程安全构建的存储库，以及完整的构建环境。为此， http: [//pthreads.org/building](http://pthreads.org/building)的信息可能对您有用。构建 PHP 真的没有那么难，也不需要花费很多时间，在现代硬件上，您可以在不到一分钟的时间内完成构建。您可以而且应该借此机会减少安装中的脂肪。

附带说明一下，您引用的有关 PHP 不是线程安全的文章是 2008 年的，这是非常错误的。核心是线程安全的，有一些扩展本质上是不安全的（没有抽象得很糟糕，但从根本上说不合适）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T13:00:09.030

看来，Ubuntu 在官方存储库中没有线程安全 PHP 的包。Pthreads 扩展需要 ZTS。因此，您有两个选择：

1.  自己编译：
2.  在某个地方找到一个 .deb 包，例如其他类 Debian 系统的存储库。

我会使用“checkintsall”实用程序自己编译和打包它。因此，Apt 将有能力跟踪 PHP 版本。我还要求 Canonical 提供 ZTS PHP 的软件包。

# c# - 在新任务 WPF caliburn.micro c# 中打开另一个视图

> ID：15782861
> 
> 赞同：2
> 
> 时间：2013-04-03T08:55:49.387
> 
> 标签：c#, wpf, view, caliburn.micro

我在第一个视图（MainView）中有两个视图，我选择一个文件并将其导入，在第二个视图（BView）中，在数据网格中显示该文件的详细信息。

这是第一个视图（MainView）：

![在此处输入图像描述](https://i.stack.imgur.com/Orbbl.png)

这是第二个视图（BView）： ![在此处输入图像描述](https://i.stack.imgur.com/2TYvm.png)

我希望当我单击“导入”时出现在进度条和文本上，同时加载第二个视图。我想在另一个 TASK 中打开另一个视图，但收到以下错误消息：

**“调用线程无法访问此对象，因为不同的线程拥有它。”**

这是 MainViewModel 的代码是：

```
[Export(typeof(IShell))]
    public class MainViewModel : Screen
    {
        public string Path{ get; set; }
        public bool IsBusy { get; set; }
        public string Text { get; set; }
        [Import]
        IWindowManager WindowManager { get; set; }

        public MainViewModel()
        {
            IsBusy = false;
            Text = "";
        }

        public void Open()
        {
            OpenFileDialog fd = new OpenFileDialog();
            fd.Filter = "Text|*.txt|All|*.*";
            fd.FilterIndex = 1;

            fd.ShowDialog();

            Path= fd.FileName;
            NotifyOfPropertyChange("Path");
        }

        public void Import()
        {
            if (Percorso != null)
            {
                IsBusy = true;
                Text = "Generate..";
                NotifyOfPropertyChange("IsBusy");
                NotifyOfPropertyChange("Text");
                Task.Factory.StartNew(() => GoNew());

            }
            else
            {
                MessageBox.Show("Select file!", "Error", 
                    MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }

        public void GoNew()
        {
            WindowManager.ShowWindow(new BViewModel(Path), null, null);
            Execute.OnUIThread(() =>
            {
                IsBusy = false;
                NotifyOfPropertyChange("IsBusy");
                Text = "";
                NotifyOfPropertyChange("Text");
            });
        }         

    } 
```

我可以做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:40:10.190

您需要`WindowManager.ShowWindow`在 UI 线程上执行，因为 Task.Start() 将在不同的线程上。任何 UI 操作都应始终编组到 UI 线程，否则会出现您提到的跨线程异常。

尝试：

```
 public void GoNew()
    {
        Execute.OnUIThread(() =>
        {
            WindowManager.ShowWindow(new BViewModel(Path), null, null);
            IsBusy = false;
            NotifyOfPropertyChange("IsBusy");
            Text = "";
            NotifyOfPropertyChange("Text");
        });
    } 
```

编辑：试试这个

```
 public void GoNew()
    {
        var vm = new BViewModel(Path);

        Execute.OnUIThread(() =>
        {
            WindowManager.ShowWindow(vm, null, null);
            IsBusy = false;
            NotifyOfPropertyChange("IsBusy");
            Text = "";
            NotifyOfPropertyChange("Text");
        });
    } 
```

# python - 使用 Python 重命名文件，基于输入文件

> ID：15782865
> 
> 赞同：0
> 
> 时间：2013-04-03T08:56:00.477
> 
> 标签：python

我想尝试使用以下文件名重命名文件：

我在一个包含以下列的文件中有一个很长的列表。这是一个输入文件，第一列中包含 MD5sum，第二列中包含新名称：

```
1c59eb1e8d29fecc54d3a0623e6f4c8d Worm:Win32/Allaple.A
1c569fda69ad93670bf611ff2d16baa6 W32.Rahack.W
1c6481ebf5c2e86555b88862c0df597b Worm:Win32/Allaple.A
1c0aa69cbe2b2ed08dc6e73fb2bf1d34 Virus:Win32/Virut.AC
1c6fdcabb61b5b1d6e53280ae934eaa6 Worm:Win32/Allaple.A
1c781a8051fcfac49b62cdfba1d7510f Worm:Win32/Allaple.A 
```

让我们说；

从带有 MD5SUM 的原始文件名，我想从

```
Worm.Allaple.A_1c781a8051fcfac49b62cdfba1d7510f.exe.csv 
```

至

```
Worm:Win32/Allaple.A_1c781a8051fcfac49b62cdfba1d7510f.exe.csv 
```

如何在 Python 上执行此操作（我也尝试使用 bash.. 但我的技能有限，所以尝试寻找另一个选项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:03:46.587

在一些帮助下用 bash 解决了

```
sed -n 's/.*_\(.*\)\.exe\.csv/\1 \0/p' old-name.txt  | sort > n1.txt

sort input-name-file.csv > temp.txt

join -j1 temp.txt n1.txt > j1.txt

tr '/' ':' < j1.txt | awk '{printf "mv %s %s_%s.exe.csv\n",$3,$2,$1}' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T12:37:46.550

您可以使用 shutil 用 python 重命名文件

```
import shutil

# make sure you are passing the correct directory
shutil.move(old_file_name, new_file_name) 
```

# interrupt - PCIe MSI 地址寄存器

> ID：15782868
> 
> 赞同：0
> 
> 时间：2013-04-03T08:56:05.233
> 
> 标签：interrupt, pci-e

如果我理解正确，MSI 主机驱动程序应该将其目标 MSI 地址写入相关远程寄存器。如何获取 MSI 地址寄存器、MSI 配置寄存器等？你能给我解释一下这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T02:29:29.227

我还没有足够的“代表”点来要求澄清您的问题，因此我将从 Windows 主机操作系统的角度回答，因为我不了解您的系统：如果您正在编写功能驱动程序以接收来自 MSI 中断设备，您不应直接访问 PCIe 配置空间中的 MSI 地址/数据寄存器。这应该由 PCI 总线管理器驱动程序完成。但是，如果您必须访问或检查某些 PCIe 配置空间寄存器，则可以通过创建 IOCTL 请求并将堆栈向上发送到总线管理器来从功能驱动程序中完成。如果您仍然需要一些代码，我可以发布它。

# c# - MySQL over SSH“用户'root'@'localhost'的访问被拒绝（使用密码是）”

> ID：15782870
> 
> 赞同：1
> 
> 时间：2013-04-03T08:56:17.577
> 
> 标签：c#, mysql, ssh, sharpssh

我有一个远程服务器托管一个附加了 MySQL 数据库的应用程序。我正在尝试编写一个程序来自动化服务器上​​的进程。这要求我通过 SSH 建立连接，然后连接并查询 MySQL 数据库。

使用 Putty，我可以使用命令建立连接并连接到数据库`"mysql -u root -p blah"`并查询所有我想要的。

但是，当我尝试使用 sharpSSH 和与 MySQL 的连接字符串建立连接时，从我的 .NET 应用程序中**出现错误**：

`"access denied for user 'root'@'localhost' (using password yes)"`

如果我可以使用 Putty 连接，这可能是权限问题，还是我正在使用的工具之一有问题？

我遵循的指南可以在这里找到 - [http://georgelantz.com/2007/09/10/access-mysql-through-ssh-tunnel-in-a-windows-net-application/](http://georgelantz.com/2007/09/10/access-mysql-through-ssh-tunnel-in-a-windows-net-application/)

# ms-access - 多个用户打开 mdb 文件

> ID：15782871
> 
> 赞同：0
> 
> 时间：2013-04-03T08:56:28.827
> 
> 标签：ms-access, vba, ms-access-2003

我是新手，正在开发 2003 版

我正在准备访问中的用户表单，希望一次由这么多用户打开。

那么这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:45:44.910

是的，这是可能的。但问题是你必须拆分数据库。只需参考以下链接，您就会得到答案。

```
http://support.microsoft.com/kb/304932 
```

# c# - 从 ASP.NET GridView 动态添加和删除行

> ID：15782879
> 
> 赞同：0
> 
> 时间：2013-04-03T08:56:58.180
> 
> 标签：c#, asp.net

我使用了来自网络“ `codeproject`”的以下代码用于“从 ASP.NET GridView 动态添加和删除行”，它使用 2 个代码“AddNewRow”、“SetPreviouseData”。我在理解“SetPreviouseData”的代码时遇到问题，似乎一切都将在定义时使用“AddNewRow”代码完成

```
grvStudentDetails.DataSource = dtCurrentTable;
grvStudentDetails.DataBind(); 
```

实际上我不知道“SetPreviouseData”代码的用途是什么，之前已经为它定义了数据源。

```
 private void AddNewRow()
{
    int rowIndex = 0;

    if (ViewState["CurrentTable"] != null)
    {
        DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"];
        DataRow drCurrentRow = null;
        if (dtCurrentTable.Rows.Count > 0)
        {
            for (int i = 1; i <= dtCurrentTable.Rows.Count; i++)
            {
                TextBox TextBoxName = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[1].FindControl("txtName");
                TextBox TextBoxAge = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[2].FindControl("txtAge");
                TextBox TextBoxAddress = 
                  (TextBox)grvStudentDetails.Rows[rowIndex].Cells[3].FindControl("txtAddress");
                RadioButtonList RBLGender = 
                  (RadioButtonList)grvStudentDetails.Rows[rowIndex].Cells[4].FindControl("RBLGender");
                DropDownList DrpQualification = 
                  (DropDownList)grvStudentDetails.Rows[rowIndex].Cells[5].FindControl("drpQualification");
                drCurrentRow = dtCurrentTable.NewRow();
                drCurrentRow["RowNumber"] = i + 1;

                dtCurrentTable.Rows[i - 1]["Col1"] = TextBoxName.Text;
                dtCurrentTable.Rows[i - 1]["Col2"] = TextBoxAge.Text;
                dtCurrentTable.Rows[i - 1]["Col3"] = TextBoxAddress.Text;
                dtCurrentTable.Rows[i - 1]["Col4"] = RBLGender.SelectedValue;
                dtCurrentTable.Rows[i - 1]["Col5"] = DrpQualification.SelectedValue;
                rowIndex++;
            }
            dtCurrentTable.Rows.Add(drCurrentRow);
            ViewState["CurrentTable"] = dtCurrentTable;

            grvStudentDetails.DataSource = dtCurrentTable;
            grvStudentDetails.DataBind();
        }
    }
    else
    {
        Response.Write("ViewState is null");
    }
    SetPreviousData();
}

    private void SetPreviousData()
     {
    int rowIndex = 0;
    if (ViewState["CurrentTable"] != null)
    {
        DataTable dt = (DataTable)ViewState["CurrentTable"];
        if (dt.Rows.Count > 0)
        {
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                TextBox TextBoxName =  (TextBox)grvStudentDetails.Rows[rowIndex].Cells[1].FindControl("txtName");
                TextBox TextBoxAge = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[2].FindControl("txtAge");
                TextBox TextBoxAddress = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[3].FindControl("txtAddress");
                RadioButtonList RBLGender = (RadioButtonList)grvStudentDetails.Rows[rowIndex].Cells[4].FindControl("RBLGender");
                DropDownList DrpQualification = (DropDownList)grvStudentDetails.Rows[rowIndex].Cells[5].FindControl("drpQualification");

                TextBoxName.Text = dt.Rows[i]["Col1"].ToString();
                TextBoxAge.Text = dt.Rows[i]["Col2"].ToString();
                TextBoxAddress.Text = dt.Rows[i]["Col3"].ToString();
                RBLGender.SelectedValue = dt.Rows[i]["Col4"].ToString();
                DrpQualification.SelectedValue = dt.Rows[i]["Col5"].ToString();
                rowIndex++;
            }
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:47:25.557

从代码`AddNewRow`中已经很清楚了，而`SetPreviouseData`似乎用于将最后一个数据显示到组件中（TextBox、RadioButtonList、DropDownList）。

```
 // Get the reference to the objects (TextBoxes, RadioButtonList, DropDownList)
    TextBox TextBoxName =  (TextBox)grvStudentDetails.Rows[rowIndex].Cells[1].FindControl("txtName");
    TextBox TextBoxAge = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[2].FindControl("txtAge");
    TextBox TextBoxAddress = (TextBox)grvStudentDetails.Rows[rowIndex].Cells[3].FindControl("txtAddress");
    RadioButtonList RBLGender = (RadioButtonList)grvStudentDetails.Rows[rowIndex].Cells[4].FindControl("RBLGender");
    DropDownList DrpQualification = (DropDownList)grvStudentDetails.Rows[rowIndex].Cells[5].FindControl("drpQualification");

    // Set the value of the objects to the last on the DataTable
    TextBoxName.Text = dt.Rows[i]["Col1"].ToString();
    TextBoxAge.Text = dt.Rows[i]["Col2"].ToString();
    TextBoxAddress.Text = dt.Rows[i]["Col3"].ToString();
    RBLGender.SelectedValue = dt.Rows[i]["Col4"].ToString();
    DrpQualification.SelectedValue = dt.Rows[i]["Col5"].ToString(); 
```

# python - Python Scrapy XPathSelector

> ID：15782884
> 
> 赞同：1
> 
> 时间：2013-04-03T08:57:02.397
> 
> 标签：python, scrapy

我正在尝试使用 scrapy 爬虫从网站爬取数据。如何`<meta itemprop="rvalue" content="4.0">`使用 select() 获取内容值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:58:28.867

```
item['key'] = xpath.select('//meta[@itemprop="rvalue"]/@content').extract() 
```

它将返回一个列表，因此请使用项目加载器对其进行处理。

# c# - 如何获得 XDocument 的独立副本？

> ID：15782885
> 
> 赞同：19
> 
> 时间：2013-04-03T08:57:03.483
> 
> 标签：c#, xml, linq-to-xml

我正在尝试创建一个新的 XDocument，如下所示：

```
var xmlString = _documentDictionary[documentKey].ToString(SaveOptions.DisableFormatting);

XDocument xml = XDocument.Parse(xmlString); 
```

我现在拥有`xml`了一个文档的独立实例，因为我从原始文档中提取了字符串并从中创建了一个新的。

但是当我修改`xml`然后检查时，`_documentDictionary[documentKey]`我可以看到原始文档也已被修改。

如何从我拥有的现有集合中获取新的独立文档？

**笔记：**

我已经尝试过这些，但它不起作用：

```
var xmlString = _documentDictionary[documentKey].ToString(SaveOptions.DisableFormatting);
var copyDoc = new XDocument(xmlString); 
```

和

```
var copyDoc = new XDocument(_documentDictionary[documentKey]); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-03T08:58:15.413

[为class](http://msdn.microsoft.com/en-us/library/bb341301.aspx)定义了一个[复制构造函数`XDocument`](http://msdn.microsoft.com/en-us/library/bb341301.aspx)：

```
var newDoc = new XDocument(xml); 
```

> 您可以使用此构造函数制作 XDocument 的深层副本。
> 
> 此构造函数遍历其他参数中指定的文档中的所有节点和属性，并在组装新初始化的 XDocument 时创建所有节点的副本。

*快速测试*

```
var doc = new XDocument(new XElement("Test"));
var doc2 = new XDocument(doc);

doc.Root.Name = "Test2";

string name = doc.Root.Name.ToString();
string name2 = doc2.Root.Name.ToString(); 
```

`name`is`"Test2"`和`name2`is ，所做的更改不会影响`"Test"`的证明。`doc``doc2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T08:59:01.637

尝试复制构造函数，例如；

```
var newDoc = new XDocument(xml); 
```

来自*[MSDN](http://msdn.microsoft.com/en-us/library/bb341301.aspx)*：

> 您可以使用此构造函数制作 XDocument 的深层**副本**。
> 
> 此构造函数遍历其他参数中指定的文档中的所有节点和属性，并在组装新初始化的 XDocument 时创建所有节点的副本。

# android - android中的图像未添加到@drawable/

> ID：15782886
> 
> 赞同：0
> 
> 时间：2013-04-03T08:57:07.843
> 
> 标签：android

您好，我正在开发一个 android 应用程序，对于 ListView，我必须将图像添加到可绘制文件夹，但是当我添加它时会出现错误。

这是我项目的文件夹层次结构

![在此处输入图像描述](https://i.stack.imgur.com/0Kf68.jpg)

这是我要添加的图像 arrow.png

![在此处输入图像描述](https://i.stack.imgur.com/PPpAN.png)

这是错误

[2013-04-03 20:57:37 - FileSharing] res/drawable/arrow.png：文件名无效：必须仅包含 [a-z0-9_.]

我根据约定更改了文件名 10 次，但错误仍然没有发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:14:37.367

好吧，我认为您不能将图像文件放在可绘制文件夹中。

您必须选择这些文件夹来为您的应用程序放置图像

![在此处输入图像描述](https://i.stack.imgur.com/ZI2yW.png)

如果您没有看到这些文件夹，请在`res`. 然后清理并重建您的项目。希望这会对您有所帮助

还要留意图像的名称`must contain only [a-z0-9_.]`

我认为默认选择是`drawable-mdpi`文件夹

[参考这个](https://stackoverflow.com/a/2533444/1450401)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:16:02.420

清理您的项目并再次构建。

有时日食的行为很奇怪。

# c++ - 模拟非虚拟方法给出编译错误

> ID：15782887
> 
> 赞同：2
> 
> 时间：2013-04-03T08:57:08.570
> 
> 标签：c++, googletest, googlemock

我需要编写 gtest 来测试一些具有非虚拟方法的现有代码，因此我正在使用以下源进行测试，但我得到了编译错误

> package/web/webscr/sample_template_class3.cpp：在函数âint main()â中：package/web/webscr/sample_template_class3.cpp:64：错误：âclass Templatemyclassâ没有名为âgmock_displayâ的成员

**sample_template_class3.cpp**

```
#include <iostream>
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using namespace std;

template < class myclass>
class Templatemyclass
{
    private:
            myclass T;
    public :

        void display()
        {
            T.display();
        }

};

class Test
{
    public:
         void display()
        {
            cout<<"Inside the display Test:" <<endl;
        }

};

class MockTest

{
    public:
                MOCK_METHOD0(display,void());
};

class FinalTest
{
        public:
                        void show( Templatemyclass<Test> t)
                        {
                                t.display();
                                cout<<"Inside the display FinalTest:" <<endl;
                        }

};
int main()
{

FinalTest test1;
Templatemyclass<Test> obj1;
Templatemyclass<MockTest> obj2;
EXPECT_CALL(obj2,display()).Times(1);
test1.show(obj1);

return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:56:20.580

您的代码中有几个问题。我在下面进行了更改，并通过解释对代码进行了注释。如果这还不够清楚，请添加评论，我会尝试进一步解释。

```
#include <iostream>
#include <gtest/gtest.h>
#include <gmock/gmock.h>

using namespace std;

template <class myclass>
class Templatemyclass {
 private:
  // Hold a non-const ref or pointer to 'myclass' so that the actual
  // object passed in the c'tor is used in 'display()'.  If a copy is
  // used instead, the mock expectations will not be met.
  myclass* T;
 public :
  // Pass 'myclass' in the c'tor by non-const ref or pointer.
  explicit Templatemyclass(myclass* t) : T(t) {}
  void display() { T->display(); }
};

class Test {
 public:
  void display() { cout << "Inside the display Test:" << endl; }
};

class MockTest {
 public:
  MOCK_METHOD0(display, void());
};

class FinalTest {
 public:
  // Templatise this function so we can pass either a Templatemyclass<Test>
  // or a Templatemyclass<MockTest>.  Pass using non-const ref or pointer
  // again so that the actual instance with the mock expectations set on it
  // will be used, and not a copy of that object.
  template<class T>
  void show(T& t) {
    t.display();
    cout<<"Inside the display FinalTest:" <<endl;
  }
};

int main() {
  Test test;
  Templatemyclass<Test> obj1(&test);

  MockTest mock_test;
  Templatemyclass<MockTest> obj2(&mock_test);
  EXPECT_CALL(mock_test,display()).Times(1);

  FinalTest test1;
  test1.show(obj1);
  test1.show(obj2);

  return 0;
} 
```

以下可能会简化这种情况：

```
#include <iostream>
#include <gtest/gtest.h>
#include <gmock/gmock.h>

template <class myclass>
class Templatemyclass {
 public:
  myclass T;
  void show() const { T.display(); }
};

struct Test {
  void display() const { std::cout << "Inside the display Test:\n"; }
};

struct MockTest {
  MOCK_CONST_METHOD0(display, void());
};

int main() {
  Templatemyclass<Test> obj1;
  obj1.show();

  Templatemyclass<MockTest> obj2;
  EXPECT_CALL(obj2.T, display()).Times(1);
  obj2.show();

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T06:45:45.820

如果您不想更改源代码，可以利用[injector++](https://github.com/mazong1123/injectorpp)。目前它只支持 x86 Windows。但 Linux 和 x64 Windows 支持很快就会到来。下面的例子会给你一个简单的想法：

**模拟非虚方法**

下面的例子假货`BaseClassTest::getAnInteger()`使用`fakeFunc()`：

```
class FakeClassNonVirtualMethodTestFixture : public ::testing::Test
{
public:
    int fakeFunc()
    {
        return 6;
    }
};

TEST_F(FakeClassNonVirtualMethodTestFixture, FakeIntFunctionWhenCalled)
{
    // Prepare
    int expected = 6;
    InjectorPP::Injector injector;

    injector.whenCalled(INJECTORPP_MEMBER_FUNCTION(BaseClassTest::getAnInteger))
        .willExecute(INJECTORPP_MEMBER_FUNCTION(FakeClassNonVirtualMethodTestFixture::fakeFunc));

    BaseClassTest b = BaseClassTest();

    // Act
    // FakeFunc will be executed!
    int actual = b.getAnInteger();

    // Assert
    EXPECT_EQ(expected, actual);
} 
```

**模拟虚拟方法**

Injector++ 支持虚拟方法模拟（太棒了，嗯？）。下面是一个简单的例子：

```
int FakeIntFuncForDerived()
{
    return 2;
}

TEST_F(FakeClassVirtualMethodTestFixture, MockDerivedClassVirtualMemberFunctionWhenCalled)
{
    // Prepare
    int expected = 2;
    BaseClassTest* derived = new SubClassTest();

    InjectorPP::Injector injector;
    injector.whenCalledVirtualMethod(derived, "getAnIntegerVirtual")
        .willExecute(fakeIntFuncForDerived);

    // Act
    // FakeIntFuncForDerived() will be exectued!
    int actual = derived->getAnIntegerVirtual();

    // Assert
    EXPECT_EQ(expected, actual);

    delete derived;
    derived = NULL;
} 
```

**模拟静态方法**

Injector++ 支持静态方法模拟。下面是一个简单的例子：

```
Address FakeGetAnAddress()
{
    Address addr;
    addr.setAddressLine("fakeAddressLine");
    addr.setZipCode("fakeZipCode");

    return addr;
}

TEST_F(FakeClassNonVirtualMethodTestFixture, FakeStaticFunctionReturnUserDefinedClassWhenCalled)
{
    // Prepare
    Address expected;
    expected.setAddressLine("fakeAddressLine");
    expected.setZipCode("fakeZipCode");

    InjectorPP::Injector injector;

    injector.whenCalled(INJECTORPP_STATIC_MEMBER_FUNCTION(BaseClassTest::getAnAddressStatic))
        .willExecute(INJECTORPP_MEMBER_FUNCTION(FakeClassNonVirtualMethodTestFixture::fakeGetAnAddress));

    // Act
    // FakeGetAnAddress will be executed!
    Address actual = BaseClassTest::getAnAddressStatic();

    // Assert
    EXPECT_EQ(expected, actual);
} 
```

# android - 如何在应用计费 api V3 中与 Google 一起使用 nonce

> ID：15782889
> 
> 赞同：3
> 
> 时间：2013-04-03T08:57:19.427
> 
> 标签：android, in-app-purchase, in-app-billing

我正在尝试在我的 android 应用程序中实现应用程序购买。我正在使用应用内计费 API v3 来实现 IAP（应用内购买）。作为参考，我正在关注 Google 提供的 trivialdrive 示例。在`launchPurchaseFlow`方法

```
public void launchPurchaseFlow(Activity act, String sku, String itemType, int requestCode,
                        OnIabPurchaseFinishedListener listener, String extraData) {
        checkSetupDone("launchPurchaseFlow");
        flagStartAsync("launchPurchaseFlow");
        IabResult result;

        if (itemType.equals(ITEM_TYPE_SUBS) && !mSubscriptionsSupported) {
            IabResult r = new IabResult(IABHELPER_SUBSCRIPTIONS_NOT_AVAILABLE, 
                    "Subscriptions are not available.");
            if (listener != null) listener.onIabPurchaseFinished(r, null);
            return;
        }

        try {
            logDebug("Constructing buy intent for " + sku + ", item type: " + itemType);
            Bundle buyIntentBundle = mService.getBuyIntent(3, mContext.getPackageName(), sku, itemType, extraData);
            int response = getResponseCodeFromBundle(buyIntentBundle);
            if (response != BILLING_RESPONSE_RESULT_OK) {
                logError("Unable to buy item, Error response: " + getResponseDesc(response));

                result = new IabResult(response, "Unable to buy item");
                if (listener != null) listener.onIabPurchaseFinished(result, null);
                return;
            }

            PendingIntent pendingIntent = buyIntentBundle.getParcelable(RESPONSE_BUY_INTENT);
            logDebug("Launching buy intent for " + sku + ". Request code: " + requestCode);
            mRequestCode = requestCode;
            mPurchaseListener = listener;
            mPurchasingItemType = itemType;
            act.startIntentSenderForResult(pendingIntent.getIntentSender(),
                                           requestCode, new Intent(),
                                           Integer.valueOf(0), Integer.valueOf(0),
                                           Integer.valueOf(0));
        }
        catch (SendIntentException e) {
            logError("SendIntentException while launching purchase flow for sku " + sku);
            e.printStackTrace();

            result = new IabResult(IABHELPER_SEND_INTENT_FAILED, "Failed to send intent.");
            if (listener != null) listener.onIabPurchaseFinished(result, null);
        }
        catch (RemoteException e) {
            logError("RemoteException while launching purchase flow for sku " + sku);
            e.printStackTrace();

            result = new IabResult(IABHELPER_REMOTE_EXCEPTION, "Remote exception while starting purchase flow");
            if (listener != null) listener.onIabPurchaseFinished(result, null);
        }
    } 
```

在上面的代码`getBuyIntent`中并不期望`nonce`，我们有额外的数据，我们在其中传递 developerpayload（特定于每个购买项目）。在这里，我无法弄清楚如何传递 nonce，因为它是在 API V2 中传递并作为成功购买的响应而收到的。`nonce`V3中不需要吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T15:45:16.197

使用 IAB API v3 时，只需使用您从 Google Play 收到的原始 JSON 响应，并使用签名和公共 RSA 对其执行 OpenSSL 验证。

最好通过自己的 API 执行此检查，因为在应用程序中捆绑公共 RSA 密钥是不安全的。[这是此 OpenSSL 验证的 PHP 示例。](https://github.com/mgoldsborough/google-play-in-app-billing-verification/blob/master/library/GooglePlay/InAppBilling/GooglePlayResponseValidator.php)

如该示例所示，它只是从请求中获取参数：响应数据和签名，并使用公钥对其进行验证。

您只需要篡改您的应用程序和 API 中的原始 JSON 数据，以便了解用户购买了什么，**而不是**验证购买本身的有效性。

简而言之：不要担心随机数。IAB API v3 删除了它，您不必担心它的缺失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T14:45:39.537

APIv3 返回 orderId，可以作为 nonce 来避免重放攻击。

# python - Django - 调用原始和覆盖的保存方法

> ID：15782890
> 
> 赞同：0
> 
> 时间：2013-04-03T08:57:23.157
> 
> 标签：python, django

这可能是一个愚蠢的问题，但它让我很困扰（我对 django 和 python 都很陌生）

在我的 django 应用程序中，我重写了模型的 save() 方法以在文件系统上执行一些交互。

我创建了一个这样的表单类：

```
class AddItemForm(ModelForm):
    class Meta:
        model = OriginalModel 
```

因此，在我看来，当我调用 form.save() 时，一切工作正常。

但是，在测试我的应用程序时，我希望能够调用原始的 save() 方法以避免创建大量我不会使用并且必须处理的文件。

我尝试的是创建一个 savebis() 方法，以保留原始的 save() 方法，但是如何将它传递给 ModelForm，以便我可以调用 form.save() 或 form.savebis() ?

编辑： savebis() 已经在我的模型中编写并工作。我希望能够从模型表单实例中调用它，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:21:56.043

从您的问题来看，在我看来，您有一些可选的处理应该发生在`Model`'s save 方法中。正如问题评论中所建议的，只需在测试期间使用`TESTING = True`的文件中添加一个类型常量，`settings.py`并在方法中检查此值`Model` `save`：

```
from django.conf import settings

class OriginalModel(Model):
    ...
    def save(self, *args, **kwargs):
        if not settings.TESTING:
            # Do some file system interaction, but not during testing.
            pass
        # Now save instance as per normal.
        return super(originalModel, self).save(*args, **kwargs) 
```

如果您沿着覆盖该`ModelForm` `save`方法的路径前进，那么您必须复制该`ModelForm` `save`方法的现有功能，并将其更改为调用您模型的`savebis()`方法而不是该`save()`方法。我建议不要走这条路，因为它会使代码比需要的更复杂。

# jquery - AJAX 搜索不是动态的 - 保留结果并且不计算结果

> ID：15782893
> 
> 赞同：0
> 
> 时间：2013-04-03T08:57:34.910
> 
> 标签：jquery, ajax, json

我进行了实时 ajax 搜索，并尝试将结果分为 2 个类别，这是可行的。我遇到的问题是，当我输入或删除一个字符时，列表结果会增加相同的项目而不是定义。结果的数量也以一种非常奇怪的方式显示。

```
$("#searchterm").keyup(function (e) {
var q = $("#searchterm").val();
$.getJSON('https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',

function (data) {
    $("#results").empty();
    $("#results").append("Results for <b>" + q + "</b>");
    $.each(data.items, function (i, item) {
        var title = item.volumeInfo.title;
        $.each(item.volumeInfo.industryIdentifiers, function (i2, type) {
            $("<div/>")
            .append(title)
            .appendTo("div[id='" + type.type + "']");
            $(".number").append(" total " + type.type.length);
        });
    });

});
}); 
```

请查看小提琴**[http://jsfiddle.net/sFn8t/](http://jsfiddle.net/sFn8t/)**并随时对其进行修改，以便其他人可以将其用作示例。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:26:22.317

我已设法修改代码并使其正常工作。请关注我更新的小提琴 - 我希望它对像我这样的初学者有所帮助。

```
$("#searchterm").keyup(function (e) {
var q = $("#searchterm").val();
$.getJSON('https://www.googleapis.com/books/v1/volumes?q=:' + q,

function (data) {
    var tmp = {};

    $.each(data.items, function (i, item) {
        var type = item.volumeInfo.industryIdentifiers[0].type;
        if (!tmp[type]) {
            tmp[type] = [];
        }
        tmp[type].push(item);

    });
    var html = [];
    $.each(tmp, function (key, item) {
        html.push('<h3>' + key + ' - ');
        html.push(item.length + '</h3><ul>');
        $.each(item, function (i, val) {

            html.push('<li><a href="page/?id=' + val.id + '"><strong>' + val.volumeInfo.title + '</strong></li></a>');

        });

        html.push('</ul>');
    });

    $('#results').html(html.join(''));

});
}); 
```

[http://jsfiddle.net/sFn8t/1/](http://jsfiddle.net/sFn8t/1/)

# jquery - Joomla 中的 Imagemapster jQuery 插件

> ID：15782895
> 
> 赞同：0
> 
> 时间：2013-04-03T08:57:38.067
> 
> 标签：jquery, imagemapster

我一直在尝试在我的 Joomla 页面中使用 Imagemapster jQuery 插件，但这是不可能的。

进入我放置的模板的 index.php 的头部

```
<script type="text/javascript" src="/media/system/js/jquery.imagemapster.js"></script> 
```

此代码可以正常工作。

在我放的一篇文章中

```
<script type="text/javascript">

$(document).ready(function () {
       var image = $('img');
       var xref = {
            carrots: "<b>Carrots</b> are delicious and may turn your skin orange!",
            asparagus: "<b>Asparagus</b> is one of the first vegetables of the spring. Being a dark green, it's great for you, and has interesting side effects.",
            squash: "<b>Squash</b> is a winter vegetable, and not eaten raw too much. Is that really squash?",
            redpepper: "<b>Red peppers</b> are actually the same as green peppers, they've just been left on the vine longer. Delicious when fire-roasted.",
            yellowpepper: "Similar to red peppers, <b>yellow peppers</b> are sometimes sweeter.",
            celery: "<b>Celery</b> is a fascinating vegetable. Being mostly water, it actually takes your body more calories to process it than it provides.",
            cucumbers: "<b>Cucumbers</b> are cool.",
            broccoli: "<b>Broccoli</b> is like a forest of goodness in your mouth. And very good for you. Eat lots of broccoli!",
            dip: "Everything here is good for you but this one. <b>Don't be a dip!</b>"
       };
       var defaultDipTooltip = 'I know you want the dip. But it\'s loaded with saturated fat, just skip it and enjoy as many delicious, crisp vegetables as you can eat.';

       image.mapster(
       {
            fillOpacity: 0.4,
            fillColor: "d42e16",
            strokeColor: "3320FF",
            strokeOpacity: 0.8,
            strokeWidth: 4,
            stroke: true,
            isSelectable: true,
            singleSelect: true,
            mapKey: 'name',
            listKey: 'name',
            onClick: function (e) {
                var newToolTip = defaultDipTooltip;
                $('#selections').html(xref[e.key]);
                if (e.key==='asparagus') {
                    newToolTip = "OK. I know I have come down on the dip before, but let's be real. Raw asparagus without any of that " +
                            "delicious ranch and onion dressing slathered all over it is not so good.";
                }
                image.mapster('set_options',{areas: [{
                    key: "dip",
                    toolTip: newToolTip
                    }]
                });
            },
            showToolTip: true,
            toolTipClose: ["tooltip-click", "area-click"],
            areas: [
                {
                    key: "redpepper",
                    fillColor: "ffffff"
                },
                {
                    key: "yellowpepper",
                    fillColor: "000000"
                },
                {
                    key: "carrots",
                    fillColor: "000000"
                },
                {
                   key: "dip",
                  toolTip: defaultDipTooltip
                },
                {
                   key: "asparagus",
                   strokeColor: "FFFFFF"
                }
                ]
        });
      });
      </script>

<p><img id="puzzle" src="images/primaria/puzzle_primaria_01.png" alt="" width="500" height="500" usemap="#puzzle" />
</p>
<p>
    <map id="puzzle_map" name="puzzle"><area shape="poly" coords="123,117,130,115,141,111,155,105,166,96,171,89,170,78,163,73,159,67,157,54,161,46,167,44,173,44,178,44,183,45,186,53,189,56,192,65,199,66,212,62,220,57,228,49,233,49,236,54,242,57,248,63,254,71,259,79,260,85,260,90,258,96,248,102,242,107,236,113,236,121,239,128,244,132,252,136,261,136,272,125,277,118,282,118,288,120,292,126,297,132,299,138,301,145,303,153,304,158,301,163,291,173,284,179,278,183,270,188,261,192,253,192,245,189,242,185,240,178,242,175,239,167,229,168,220,171,214,175,210,181,209,187,210,196,215,200,218,205,221,211,220,219,214,226,209,229,204,233,196,236,192,226,190,216,185,205,179,200,173,197,160,196,153,199,147,204,144,210,141,214,132,212,125,209,119,202,119,194,123,188,129,181,134,182,141,179,148,175,150,166,145,155,142,146,136,141,130,132,123,121,123,116" href="#" /><area shape="poly" coords="116,121,123,130,131,144,137,151,143,164,144,173,139,177,132,179,124,183,116,189,115,197,118,207,125,213,129,215,138,216,145,212,150,205,154,199,161,198,169,199,176,205,182,214,186,222,189,231,191,238,184,242,173,247,162,251,152,255,140,260,130,268,129,275,134,280,142,285,147,288,150,294,152,301,150,307,147,313,140,316,131,317,125,314,123,307,121,296,121,287,115,284,107,288,98,293,95,298,89,304,83,310,78,310,70,303,61,294,49,277,48,269,51,268,58,267,63,264,66,258,66,251,64,245,61,238,54,233,46,232,40,235,35,240,34,246,31,251,24,254,19,250,14,243,9,233,6,226,5,211,6,202,9,193,17,186,25,175,32,167,43,166,48,165,51,170,51,179,51,186,55,192,60,194,65,194,75,194,77,190,78,188,81,182,82,176,82,166,77,160,72,156,69,152,65,146,66,137" href="#" /><area shape="poly" coords="200,239,208,235,218,228,225,218,226,212,225,206,222,202,219,200,216,195,213,190,213,189,213,183,214,181,217,180,220,175,224,174,228,174,233,173,237,172,239,173,239,176,239,180,239,184,242,188,246,193,252,194,258,195,262,193,268,192,273,189,282,183,293,176,305,164,308,165,310,168,313,173,322,179,331,189,337,197,341,203,343,209,343,213,334,219,324,226,321,233,322,238,324,244,327,248,330,253,334,254,338,254,345,251,349,246,354,243,358,238,361,238,367,237,369,240,372,246,375,252,375,257,377,264,377,269,378,272,375,276,370,279,362,282,356,287,347,291,339,296,334,303,334,308,338,311,344,316,348,320,352,325,355,331,355,337,353,342,351,345,346,349,341,350,335,350,330,348,325,342,322,334,321,327,317,323,311,319,307,319,302,320,298,323,292,328,287,333,283,336,278,342,272,346,266,345,260,340,252,336,245,331,238,325,233,317,234,312,238,308,244,305,249,302,253,299,257,294,258,288,258,285,258,281,255,279,252,274,250,272,244,271,236,271,230,271,228,275,224,278,224,281,218,286,215,286,210,282,208,273,205,265,202,256,199,245" href="#" /><area shape="poly" coords="84,318,92,327,97,333,100,338,104,343,108,350,110,358,109,362,104,364,103,365,101,365,94,365,89,368,84,372,81,379,82,388,84,392,88,399,96,399,101,398,105,396,111,390,115,385,119,382,126,382,128,383,131,387,132,391,135,400,138,407,140,412,144,419,148,427,152,427,157,427,164,425,169,424,177,421,189,420,197,417,203,413,206,412,209,407,213,402,213,394,210,385,205,379,202,376,197,369,194,365,196,356,200,354,205,354,205,351,207,351,212,350,218,350,222,353,225,356,228,360,231,366,233,370,235,374,237,378,239,379,241,381,244,381,247,382,251,376,254,370,257,367,261,359,268,353,268,349,262,346,257,345,253,341,244,336,237,327,230,322,228,313,229,307,233,307,238,302,239,301,240,301,242,301,249,297,255,290,253,279,248,275,244,274,238,275,232,277,227,283,225,286,221,290,214,290,209,287,206,282,205,276,201,267,199,256,196,245,191,243,182,249,174,251,164,255,152,261,140,265,132,268,132,271,135,278,143,282,148,283,153,290,153,296,155,300,156,305,156,309,152,315,146,320,141,320,131,320,126,316,121,312,120,309,118,304,119,296,118,290,115,289,110,289,103,294,99,296,97,304,89,310,86,313" href="#" /><area shape="poly" coords="314,152,320,149,323,149,328,149,337,149,342,150,351,148,359,139,364,133,365,128,365,121,360,116,356,112,350,107,348,103,347,98,351,93,357,89,363,86,367,86,370,86,374,89,376,92,378,96,380,102,380,105,385,112,388,116,392,116,396,114,399,111,403,106,406,101,410,95,415,88,420,83,424,79,427,79,427,82,429,84,430,92,430,93,433,99,436,105,439,110,442,114,448,120,452,120,460,117,464,107,471,106,476,106,484,106,490,113,490,117,489,124,483,130,477,133,469,137,467,141,464,147,465,151,466,152,467,159,470,162,478,169,481,173,485,177,489,181,493,187,492,191,489,195,486,200,483,205,479,212,475,215,468,218,463,219,457,219,454,216,454,213,452,208,453,200,451,195,446,192,439,192,430,192,425,196,422,203,422,206,424,212,428,216,432,221,435,225,438,231,439,236,438,240,434,245,425,249,420,252,410,256,400,261,394,265,388,271,381,271,380,266,379,258,378,250,375,243,371,235,366,234,361,235,356,238,349,242,346,246,341,250,335,251,328,247,326,239,324,231,329,225,336,221,345,217,348,210,348,205,343,198,336,190,331,184,323,179,319,172,312,164,311,153" href="#" /> </map>
</p> 
```

正如它在 imagemapster 插件的演示页面上显示的那样。

我得到了错误： Uncaught TypeError: Object # has no method 'ready' ; 然后我解决了通过 jQuery 将 $ 更改为代码的问题。

但是，图像没有显示更改，并且在 javascript 控制台中没有错误。

我能做些什么？错误在哪里？

提前致谢。

弗兰

# python - 如何提高 NLTK 的性能？备择方案？

> ID：15782898
> 
> 赞同：2
> 
> 时间：2013-04-03T08:57:53.837
> 
> 标签：python, nltk, mahout

我尝试在这里和那里搜索它，但找不到任何好的解决方案，所以尽管咨询了 nlp 专家。我正在开发一个文本相似性查找应用程序，我需要将成千上万的文档（每个文档大约 1000 个单词）相互匹配。对于 nlp 部分，我最好的选择是 NLTK（看到它的能力和 python 的算法友好性。但是现在当词性标记本身花费这么多时间时，我相信，nltk 可能不是最合适的。Java 或 C 不会伤害了我，因此任何解决方案都对我有用。请注意，我已经开始从 mysql 迁移到 hbase，以便在如此大量的数据上更自由地工作。但是仍然存在问题，如何执行算法。Mahout 可能是一个选择，但这也是用于机器学习，而不是专用于 nlp（可能对语音识别有好处）。还有什么可用的选项。总而言之，我需要高性能的 nlp，（从高性能机器学习降级）。（我有点倾向于 Mahout，看未来的用法）。

这是关于缩放 nltk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:42:44.877

您可以使用 Mahout 查找哪些文档彼此最相关。

这是一个快速教程（[链接](https://cwiki.apache.org/MAHOUT/quick-tour-of-text-analysis-using-the-mahout-command-line.html)），它将教您一些概念，但最好在 Mahout in Action 书籍的第 8 章中对其进行解释。

基本上，您首先需要以 Hadoop [SequenceFile](http://wiki.apache.org/hadoop/SequenceFile)格式表示您的数据，您可以使用该`seqdirectory`命令，但这可能太慢了，因为它希望每个文档都作为自己的文件（因此，如果您有“成千上万文档” I/O 将受到影响。）[这篇文章](https://stackoverflow.com/questions/11932668/vectorization-in-apache-mahout/11948318#)是相关的，因为它讨论了如何从 CSV 文件制作 SequenceFile，其中每一行都是一个文档。不过，如果我没记错的话，Mahout 的后备箱可能有一些功能。您可能想在 Mahout 用户邮件列表中询问。

然后，在您的文档以 Hadoop [SequenceFile](http://wiki.apache.org/hadoop/SequenceFile)格式表示后，您需要应用该`seq2sparse`命令。可用命令行选项的完整列表在本书的第 8 章中，但您可以查看该命令的帮助提示，它会给您一个命令列表。您需要的命令之一是`-a`您要使用的（lucene？）文本分析器的类名，在这里您可以去除停用词、词干、删除标点符号等...默认分析器是`org.apache.lucene.analysis.standard.StandardAnalyzer`.

然后，您使用`rowid`命令将数据表示为矩阵。

之后，您使用该`rowsimilarity`命令获取最相似的文档。

希望这可以帮助。

# vba - Word 抑制边距错误

> ID：15782899
> 
> 赞同：0
> 
> 时间：2013-04-03T08:57:56.900
> 
> 标签：vba, ms-word, margins

打印 Word (2010) 文档时出现臭名昭著的错误

> 可打印区域外的边距

我发现您可以使用以下宏来抑制此警告：

```
Public WithEvents App As Word.Application

Private Sub App_DocumentBeforePrint(ByVal Doc As Document, Cancel As Boolean)

    Dim bPrintBackgroud As Boolean

    'Save current setting of background printing
    bPrintBackgroud = Options.PrintBackground
    Options.PrintBackground = False

    'Turn off DisplayAlerts
    Application.DisplayAlerts = wdAlertsNone

    Dialogs(wdDialogFilePrint).Show

    'Turn on DisplayAlerts again
    Application.DisplayAlerts = wdAlertsAll

    'Set original background printing setting
    Options.PrintBackground = bPrintBackgroud

End Sub 
```

这可行，但在打印作业完成后，我仍然会收到边距错误。所以脚本并没有真正抑制警告，它只是延迟它。任何人都可以指出我永久禁用此警告的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:18:37.400

有两种选择：

a）消除问题，这意味着将您的边距放在可打印区域内。

b)`Application.DisplayAlerts = wdAlertsNone`绝对不推荐的永久设置。在您的情况下，这意味着注释该行：

```
'Application.DisplayAlerts = wdAlertsAll 
```

但是，如果您这样做，请记住在您离开或关闭存在边距问题的文档时运行上述代码。在其他情况下，您将不会被告知您习惯被告知的问题。

# asp.net - 设置菜单中项目的背景颜色

> ID：15782900
> 
> 赞同：0
> 
> 时间：2013-04-03T08:58:05.253
> 
> 标签：asp.net

我有一个菜单。这是我的代码。

```
 <Items>
        <asp:MenuItem NavigateUrl="#" Text="New Item" Value="New Item">

            <asp:MenuItem NavigateUrl="#" Text="New Item" Value="New Item"></asp:MenuItem>
            <asp:MenuItem NavigateUrl="#" Text="New Item New Item" Value="New Item"></asp:MenuItem>
            <asp:MenuItem NavigateUrl="#" Text="New Item" Value="New Item"></asp:MenuItem>
        </asp:MenuItem> 
```

我的问题是如何设置菜单中子项的背景颜色？我还需要知道如何设置显示所有子项的列的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T23:05:48.627

在 Visual Studio 中，如果您`Menu`在源视图中选择 ASP 标记，属性窗口将列出此特定 ASP 标记的可用属性。

然后`DynamicMenuItemStyle`从可用选项中选择并将 ASP`BackColor`属性设置为任何值。

您还可以`DynamicHoverStyle`从可用选项中进行选择，并将 ASP`BackColor`属性设置为任何鼠标悬停效果。

* * *

这是将生成的代码（嵌套在`Menu`标签内，放置在`Items`标签上方）：

```
<DynamicHoverStyle BackColor = "red" />
<DynamicMenuItemStyle BackColor = "blue" /> 
```

* * *

***注意****：用于* `StaticMenuItemStyle` *影响最顶层的菜单项，并* `DynamicMenuItemStyle` *影响所有子菜单项。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:05:40.443

尝试这个：

```
<Items>
    <asp:MenuItem NavigateUrl="#" Text="New Item" Value="New Item">
    <asp:MenuItem style="background-color:red;" NavigateUrl="#" Text="New Item" Value="New Item"></asp:MenuItem>
    <asp:MenuItem style="background-color:red;" NavigateUrl="#" Text="New Item New Item" Value="New Item"></asp:MenuItem>
    <asp:MenuItem style="background-color:red;" NavigateUrl="#" Text="New Item" Value="New Item"></asp:MenuItem>
    </asp:MenuItem>
</Items> 
```

# html - css/html 不能在 Internet Explorer 上工作，但可以在 chrome 和 safari 上工作

> ID：15782902
> 
> 赞同：0
> 
> 时间：2013-04-03T08:58:06.473
> 
> 标签：html, css

有什么理由不能在 Internet Explorer 上运行，但它可以在 google chrome 和 safari 上运行

```
body,html {
    min-width:600px;
    height:100%;
    margin:0;
    padding:0;
    font-family:Calibri;
    overflow:hidden;
} 
```

这是我完整代码的小提琴：http: [//jsfiddle.net/charliejsford/7a2uH/](http://jsfiddle.net/charliejsford/7a2uH/)

编辑：似乎只有这部分不适用于 IE

```
<header class="ex1">
        <div class="header-left"><img src="images/phone_icon.png" width="323" height="58" /></div>
        <div class="header-right">Shopping Basket</div>
        <div class="logo"><img src="images/logo" width="409" height="138" /></div>
    </header> 
```

然后是 CSS：

```
header {
    width: 100%;
    min-width: 800px;
    height: 160px;
    overflow: auto;
}
.ex1 .header-left {
    display:inline-block;
    width: 33%;
    max-width: 190px;
    float: left;
    margin:50px 0 0 70px;
}
.ex1 .logo {
    width: 409px; /* width of the logo */
    margin:10px auto 0 auto;
}
.ex1 .logo img {
    display: block;
}
.ex1 .header-right {
    display:inline-block;
    width: 33%;
    max-width: 190px;
    float: right;
    margin:50px 70px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:24:01.947

Internet Explorer 9+ 支持该`<header>`标记。

# c - 阻止 fgetc 根据输入数 + 1 重复循环？

> ID：15782910
> 
> 赞同：0
> 
> 时间：2013-04-03T08:58:38.667
> 
> 标签：c, loops

我的问题是，根据我输入的字符数，我的代码循环基于那个加 1。例如，5 个字符 + 1，我的代码循环 6 次。

我尝试过使用不同的替代方法，例如 getchar、scanf，但我坐在 fgetc 中，只是因为我更喜欢它。

问题代码是：

```
char decision = ' ';
printf("input data: ");
decision = fgetc(stdin);

while (checkChar(&decision) != 1)
    {
    printf("Please input a valid choice, 1 or 0\n");
    decision = fgetc(stdin);
    } 
```

注意，checkChar 只是检查 char 是 1 还是 0，非常基本。例如，如果我输入 4 将导致： 请输入一个有效的选择，1 或 0 请输入一个有效的选择，1 或 0 请输入一个有效的选择，1 或 0 请输入一个有效的选择，1 或 0 请输入一个有效的选择，1 或 0

我已经找到了使用的解决方案：

```
while(fgetc(stdin) != '\n') 
```

但它并不完全是我所说的整洁。我只是想知道是否有更好的方法？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:21:26.283

不太清楚你想要什么——听起来有点像你想一次真正地读取一个字符，这在 C++ 中是不可能的。（为此，您需要一个单独的库，例如 curses。）来自键盘的输入*始终*是面向行的，因此您可能需要一次输入一行。这种事情属于一个单独的功能，例如：

```
char
getDecision( std::istream& source, char const* legalDecisions )
{
    char results = '\0';
    std::string line;
    while ( results == '\0' && std::getline( source, line) ) {
        if ( ! line.empty() 
                && std::strchr( legalDecisions, line[0] ) != NULL ) {
            results = line[0];
        }
    }
    return results;
} 
```

在实践中，您可能希望在上面的循环中进行更多处理。跳过前导空格，验证是否只有命令等。但上面应该给出基本的想法。（假设标准的面向行的输入是可以接受的。否则，你需要curses。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:13:56.283

既然你说 C++，就这样做：

```
#include <string>
#include <iostream>

std::cout << "Input data: ";
char decision = '\0';

for (std::string d; std::getline(std::cin, d); )
{
    if (d == "1" || d == "0") { decision = d[0]; break; }
    std::cout << "Please input a valid choice ('0' or '1'): ";
}

if (d == '\0')
{
    std::cout << "Premature end of input, aborting.\n";
    std::exit(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:17:43.560

您可以`scanf()`用于您的情况

```
int decision, c;
char tmp;

printf("input data: ");

while ((c = (scanf(" %d%c", &decision, &tmp)!=2 || !isspace(tmp)))
        || (decision<0 || decision>1))
    {
    printf("Please input a valid choice, 1 or 0\n", c);
    if(c) scanf("%*[^\n]");
    } 
```

这一行：

```
if(c) scanf("%*[^\n]"); 
```

如果您在输入中输入了非数字字符，则允许清理您的标准输入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T11:30:29.083

我已经搞砸了很多，我已经想出了如何体面地做到这一点，但是这种方法只有在你不打算进行任何类型的输入重定向时才有效，因为你肯定会遇到问题。基本上您想使用字符串读取该行，例如：char buffer[21]。然后，您将要使用 fgets 将数据读入该行： fgets(buffer, 21, stdin)。

然后在你完成之后直接有一个 if 语句说 if buffer[19] != '\0' that do: rewind(stdin); ~ 这会清除标准输入（基本上），但会导致重定向问题。谢谢！

之后使用： sscanf(buffer, "%c", &myChar) 来获取输入。

差不多就这些了，谢谢大家的帮助！这花了我的时间太长了。呵呵。

# c# - 如何在母版页的第一页加载中仅调用一次方法

> ID：15782912
> 
> 赞同：1
> 
> 时间：2013-04-03T08:58:45.650
> 
> 标签：c#, asp.net, master-pages, page-lifecycle, ispostback

我有以下情况：

`Page1.aspx`这个页面有母版页`master.aspx`。

我在母版页中有一些代码：

```
 if (!Page.IsPostBack)
            {
                adjustServiceBar();

            } 
```

当我单击其中的任何按钮时，`Page1.aspx`它会进入`!Page.IsPostBack`并执行该方法！

`!Page.IsPostBack)`我只想要这个方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:09:19.887

一种方法是设置一个会话变量，然后检查该变量以确保您的代码只会触发一次。另一种方法是在表单上设置隐藏控件并使用其 text 或 value 属性。

根据每个场景，解决方案可能非常复杂，例如自定义派生母版页和扩展当前事件功能以满足您的需求的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:10:01.173

`IsPostBack`我相信在内容页面中检查更加一致。您可以将此条件移动到母版页中的`Page1.aspx`并公开`adjustServiceBar()`方法，以便内容页面可以调用它，例如`Master.adjustServiceBar()`.

# c++ - C++ 行跳转和文件读取

> ID：15782913
> 
> 赞同：0
> 
> 时间：2013-04-03T08:58:50.100
> 
> 标签：c++

我有一个文件，里面有数字。我想阅读某些行（那些尚未阅读但由于我的代码运行方式而不再易于访问的行）

例如..

我有类似的代码

```
for (c=0; c < 5;c++)
{
in >> tmp;
} 
```

实现时，这会读取第一行的 5 个部分（行的长度都相同）。

我希望能够再次调用同一段代码并能够阅读 second..third.ect

我需要做什么才能完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:05:38.693

假设`in`是一个输入流 ( `istream`)，您可以使用它的`seekg`方法来寻回文件的开头。

```
// read it the first time
for (c=0; c < 5;c++)
{
    in >> tmp;
}

in.seekg(0, in.beg); // seek to the beginning

// read it the second time
for (c=0; c < 5;c++)
{
    in >> tmp;
} 
```

查看该[方法的](http://www.cplusplus.com/reference/istream/istream/seekg/)[文档`seekg`](http://www.cplusplus.com/reference/istream/istream/seekg/)。

# asp.net-mvc - 更改 Web 应用程序 asp.net MVC

> ID：15782916
> 
> 赞同：0
> 
> 时间：2013-04-03T08:58:58.340
> 
> 标签：asp.net-mvc

我们有一个用 asp.net MVC 编写的用于管理我们公司的项目、会议等的 Web 应用程序。现在每个部门都有自己的副本。5部5份。我们怎样才能使它成为一个应用程序并解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:19:16.817

通过将数据库集中在一个中心位置，您可以轻松地做到这一点，或者通过使用 microsoft 同步框架，您可以轻松地将数据同步到一个数据库到另一个数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:13:02.850

我会创建一个中央 mvc 项目，为每个部门设置单独的区域，将每个区域的源代码放入主项目中。

您还可以将每个项目用作此处概述的区域：

[http://nileshhirapra.blogspot.co.uk/2012/02/aspnet-mvc-pluggable-application.html](http://nileshhirapra.blogspot.co.uk/2012/02/aspnet-mvc-pluggable-application.html)

# c# - 将数据加载到网格的 Handsontable ASPX 代码背后的方法

> ID：15782924
> 
> 赞同：0
> 
> 时间：2013-04-03T08:59:11.170
> 
> 标签：c#, asp.net, handsontable

在上一篇文章[Handsontable Grid - 从 aspx 网页加载和保存数据中，](https://stackoverflow.com/questions/15681661/handsontable-grid-loading-and-saving-data-from-aspx-web-page)我在 Stephen B. Burris Jr 的帮助下解决了“将 ajax 数据传输到服务器以进行保存”，对此非常感谢。我一直无法让相反的过程工作 - 即从服务器加载数据到网格。我正在使用来自 GitHub 的示例代码作为客户端 javascript 代码，但我完全不清楚需要如何“打包”数据以响应 ajax 调用。如果有人可以向我展示代码隐藏方法的结构，我将非常感激。下面是带有 ajax 调用的 javascript 代码：

```
 var handsontable = $container.data('handsontable');
            $(document).find('button[name=load]').click(function () {
                $.ajax({
                    url: "Default.aspx/getJSData",
                    dataType: 'json',
                    type: 'GET',
                    success: function (res) {
                        handsontable.loadData(res.data);
                        $console.text('Data loaded');
                    },
                    error: function () {
                        $console.text('Load error');
                    }
                });

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T00:00:10.130

看看[这个帖子](https://stackoverflow.com/questions/16061532/loading-handsontable-from-an-ajax-enabled-wcf-service/17355015#17355015)

这是使用 WCF 的有效解决方案。

你没有说明它需要什么技术，但我注意到了 C# 标签。

我希望它有所帮助。

# jquery - Vimeo 使用块上传

> ID：15782926
> 
> 赞同：1
> 
> 时间：2013-04-03T08:59:25.093
> 
> 标签：jquery, api, upload, vimeo

我遇到了与此处相同的问题：使用“Content-Range”标头[按块上传视频文件，](https://stackoverflow.com/questions/10110479/upload-a-video-file-by-chunks)但给出的解决方案均不适合我。我正在使用 javascript 将视频放到 Vimeo 端点。我得到了一张上传票，并通过 php 在另一台服务器上处理上传的初始化和完成。javascript 所做的只是将视频数据放到一个端点上。

我的客户有一个不可靠的互联网连接，因此我正在构建一个尝试自动恢复的可恢复上传器。

我注意到的是，如果我删除“Content-Range”标题并将我的块大小设置为大于上传视频，它会正确上传。一旦我添加标题，事情就会出错。我知道标头应该采用**“Content-Range”的形式：“bytes 1001-4999/5000”**，但这会由于某种原因导致问题。当我使用这种格式时，chrome 不会发送“Content-Length”标头并且请求失败。FF 发送标头，但也失败了。

我为“Content-Range”标头尝试了不同的组合，包括：**“1001-4999/5000”**、**“range=1001-4999-5000”**。这不会给出错误但 vimeo 无法识别，因为当我要求上传的字节时，我总是得到最后上传的块的长度。我也尝试过发送没有标头的第一个块，其余的都带有它，但它是标头本身没有被正确发送。

## Javascript：

```
/*
 * Uploads raw data to the server
 *
 */
var uploadRawData = function(starting_byte, ending_byte, data_to_send){
    $('.auto_uploader #play_pause_button').addClass('pause').removeClass('disabled');
    $('.auto_uploader #stop_button').removeClass('disabled');
    $('.auto_uploader #status_display').attr('class', '').fadeIn(); //Remove all other classes
    _offset_starting_from = parseInt(starting_byte) || 0;

    _uploader_process = $.ajax({
        url: _endpoint,
        type: 'PUT',
        beforeSend: function (request)
        {
            //if (starting_byte != 0){ // Send the first chunk with without content-range header
                // If this function is being called to resume a file, add the starting offset
                var content_range_header = "bytes " + starting_byte + "-" + ending_byte + "/" + _file.size;
                request.setRequestHeader("Content-Range", content_range_header);
            //}
            request.setRequestHeader("Content-Type", _file.type);
            //request.setRequestHeader("Content-Length", data.byteLength);
        },
        processData: false,
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress', progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        success: function() {
            if (ending_byte < _file.size - 1){ // Not complete (chunk mode)
                var next_upload_byte = ending_byte + 1;
                retryUpload(); // Check for uploaded bytes before next chunk upload (this creates an infinite loop since vimeo only reports the last byte uploaded, since the Content-Range header above is not being recognised) - Or
                //uploadFilePart(next_upload_byte, next_upload_byte + _chunk_size - 1); // - doesn't check uploaded bytes before send of next chunk (Uploads all parts, but vimeo only registers the last chunk)
            } else { // Complete!
                //retryUpload(); // Check to make sure the entire file was uploaded
                $('.auto_uploader #status_display').attr('class', 'tick');
                resetButtons();
                _completeFunction(); //Call user defined callback
            }
        },
        error: function(data) {
            console.log(data.responseText);
            if (!_paused && _file != null){ //Aborting (pausing) causes an error
                // Retry the upload if we fail
                if (_retry_count < _retry_limit){
                    _retry_count = _retry_count + 1;
                    console.log('Error occurred while uploading file "' + _file.name + '",  retry #' + _retry_count + ' in ' + _retry_count * 10 + ' sec');
                    setTimeout(function() {   //calls click event after a certain time
                        retryUpload(); // Call the retry upload method in 10 sec
                    }, 10000);
                } else if (_retry_count == _retry_limit){
                    //We've tried enough!});
                    resetButtons();
                    $('.auto_uploader #status_display').attr('class', 'error');
                    alert('Maximum number of retries exceeded!');
                }
            }
        },
        //error: errorHandler,
        // Form data
        data: data_to_send,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false
    });
} 
```

我在这里上传了一个测试版本： http: [//test.paperjet.info/auto_uploader/](http://test.paperjet.info/auto_uploader/)和完整的源代码：http: [//test.paperjet.info/auto_uploader.zip](http://test.paperjet.info/auto_uploader.zip)标题被添加到**autoUploader 的第 121 行。 js**。请注意，如果您使用它，它有一个硬编码到 index.html 的端点，并且可能已经过期。

如果有人解决了这个问题或已经使用javascript成功实现了这个功能，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-25T06:32:10.990

我遇到了同样的问题，并设法在 Github 上构建了一个将视频文件按块上传到 Vimeo 的实现：[https ://github.com/websemantics/vimeo-upload](https://github.com/websemantics/vimeo-upload)

它使用可恢复的 PUT 并显示进度条并返回上传视频的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:06:13.813

在服务器上获取字节的正确方法是`Content-Range: bytes */*`在请求标头中执行 PUT：

```
var byte_request = new XMLHttpRequest();
byte_request.open('PUT', upload_url, true);
byte_request.overrideMimeType('application/octet-stream');
byte_request.setRequestHeader('Content-Range', 'bytes */*');
byte_request.send(); 
```

这应该返回 308 响应。在您的成功处理程序中，转义`Range`标题：

```
function onByteRequestSuccess(e) {
    var range_header,
        bytes_received;

    if (byte_request.status === 308) {
        range_header = xhr.getResponseHeader('Range');

        // The Range header will return something like "bytes=0-215235".
        // This grabs the group of numbers AFTER the "-" character,
        // which is the total bytes on the server.
        bytes_received = parseInt(range_header.split('-')[1], 10);
    }
} 
```

至于您的`Content-Type`标头不会出现，我发现大多数库（jQuery 和 MooTools）对于此类请求都不可靠。如果您仍然遇到问题，可能需要更深入地研究 jQuery 的代码库。

# c# - C# 嵌套模拟 - 在模拟用户的同时模拟另一个用户

> ID：15782927
> 
> 赞同：0
> 
> 时间：2013-04-03T08:59:32.437
> 
> 标签：c#, impersonation

当我已经使用 C# 模拟另一个用户时，我有一个相当奇怪的要求是能够模拟一个用户。

我正在编写一个允许管理 Active Directory 用户的应用程序。该应用程序将使公司中的任何人都能够查看和维护有关他们自己的某些详细信息（其中一些实际上不会保存到 Active Directory，但其中一些会），以便管理人员能够查看和维护有关他们的详细信息他们的团队，并让 HR 能够查看和维护任何人的详细信息。

出于显而易见的原因，我不想针对实时域进行开发或测试。我们最近将所有用户从另一个域移植到该域，这意味着我实际上可以针对旧域进行测试而不会影响任何事情。但是，为了让我能够做到这一点，我必须在旧域上模拟我的旧帐户，我在加载应用程序时会这样做。

虽然对我来说一切都会很好，因为我设置为域管理员，但显然并非所有用户都是域管理员，并且无法在自己的帐户下写入 AD，因此我们有另一个域管理员专门为此应用程序的用户设置，每当需要将数据保存到模拟该用户的 AD 时。这在我针对我在虚拟机上设置的 Active Directory 进行测试之前工作得很好，因为我登录到本地域，但是这不允许我在 Visual Studio 中单步执行代码，所以调试很慢，因此我已经停止使用该虚拟机并正在使用这个旧域。现在我已经在模拟另一个用户（即我的旧域帐户），当它尝试模拟域管理员用户时，它失败并显示“System.

如果我更改我的代码，所以我实际上是使用新的域管理员而不是我的旧帐户登录，它第一次通过它成功登录（所以凭据是正确的），但是当它通过并尝试再次执行相同操作以写入 AD，但上述异常失败。因此，我认为尝试进行嵌套模拟一定是个问题。

是否可以进行嵌套模拟？

下面是我正在使用的代码：

```
private static WindowsImpersonationContext ImpersonateUser(out string result, string sUsername,
                                                           string sDomain, string sPassword)
{
  // initialize tokens
  var pExistingTokenHandle = new IntPtr(0);
  var pDuplicateTokenHandle = new IntPtr(0);

  // if domain name was blank, assume local machine
  if (sDomain == "")
  {
    sDomain = Environment.MachineName;
  }

  try
  {
    result = null;

    const int logon32ProviderDefault = 0;

    // create token
    const int logon32LogonInteractive = 2;

    // get handle to token
    var bImpersonated = LogonUser(sUsername, sDomain, sPassword,
                                  logon32LogonInteractive,
                                  logon32ProviderDefault,
                                  ref pExistingTokenHandle);

    // did impersonation fail?
    if (!bImpersonated)
    {
      var nErrorCode = Marshal.GetLastWin32Error();
      result = "LogonUser() failed with error code: " + nErrorCode + "\r\n";
    }

    // Get identity before impersonation
    result += string.Format("Before impersonation: {0}\r\n", WindowsIdentity.GetCurrent().Name);

    var bRetVal = DuplicateToken(pExistingTokenHandle, (int)SecurityImpersonationLevel.SecurityImpersonation,
                                  ref pDuplicateTokenHandle);

    // did DuplicateToken fail?
    if (bRetVal)
    {
      // create new identity using new primary token
      var newId = new WindowsIdentity(pDuplicateTokenHandle);
      var impersonatedUser = newId.Impersonate();

      // check the identity after impersonation
      result += "After impersonation: " + WindowsIdentity.GetCurrent().Name + "\r\n";

      return impersonatedUser;
    }
    else
    {
      var nErrorCode = Marshal.GetLastWin32Error();
      CloseHandle(pExistingTokenHandle); // close existing handle
      result += "DuplicateToken() failed with error code: " + nErrorCode + "\r\n";
      return null;
    }
  }
  finally
  {
    // close handle(s)
    if (pExistingTokenHandle != IntPtr.Zero)
    {
      CloseHandle(pExistingTokenHandle);
    }

    if (pDuplicateTokenHandle != IntPtr.Zero)
    {
      CloseHandle(pDuplicateTokenHandle);
    }
  }
} 
```

当调用失败的嵌套模拟时，“bImpersonated”实际上是“真”，bRetVal 也是如此，这表明它有效，但是当它到达“WindowsIdentity.GetCurrent().Name”时，它会失败，但出现上述异常。

我希望这是有道理的，并会感谢任何帮助。

# xcode - mac os x boost 包含未找到异常

> ID：15782930
> 
> 赞同：2
> 
> 时间：2013-04-03T08:59:35.480
> 
> 标签：xcode, macos, boost

包括项目提升 1_53

xcode 说“找不到‘异常’文件”

在文件 boost / throw_exception.hpp 行

```
# include <exception> 
```

你需要什么？错误在哪里？

# sql-server - 如何查询 INFORMATION_SCHEMA.VIEWS

> ID：15782934
> 
> 赞同：0
> 
> 时间：2013-04-03T08:59:50.917
> 
> 标签：sql-server, views, sql-server-2000

在 SQL Server 2000 中工作时，在一个旧系统上，我运行了以下查询

```
SELECT * FROM INFORMATION_SCHEMA.VIEWS
where VIEW_DEFINITION LIKE '%XXXX%' 
```

并得到一个结果集`VIEW_DEFINITION ---> CREATE VIEW [dbo].[vw_ISLocation] AS ....`

现在的问题是，数据库中没有具有该名称 ( `vw_ISLocation`) 的视图。唯一具有相同 TEXT 的视图具有不同的名称`vw_Location`。

有谁知道这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:30:09.163

一种可能的解释是该对象最初是使用名称创建的，`vw_ISLocation`后来使用`sp_rename`. 这是记录在案的行为（来自[Books Online](http://msdn.microsoft.com/en-us/library/aa238878%28v=sql.80%29.aspx)）：

> 重命名存储过程、视图或触发器不会更改 syscomments 表中相应对象名称的名称。这可能会导致为对象生成脚本时出现问题，因为旧名称将从 syscomments 表插入到 CREATE 语句中。为获得最佳结果，请勿重命名这些对象类型。相反，通过新名称删除并重新创建对象。

（中的定义`INFORMATION_SCHEMA.VIEWS`基于与 相同的数据`syscomments`）

# cqrs - CQRS 读取模型端 - 规范化表

> ID：15782935
> 
> 赞同：3
> 
> 时间：2013-04-03T08:59:59.470
> 
> 标签：cqrs

我一直在阅读有关命令查询职责分离 (CQRS) 以及这种模式如何适合我们当前应用程序的信息。

说到读模型，我很清楚这些概念：“分离的读写数据模型”，“瘦读层返回的平面非规范化数据”。在大多数情况下，我们被困在同一个数据库（同一个读/写数据模型）上，运行在带有规范化表的 SQL Server 上，上面有通用的分层应用程序。

那么，在这种情况下应用 CQRS 是否有任何价值？如果是这样，在读取模型方面会是什么？

我想到的另一个问题是 MVC 应用程序从我的薄读取层请求信息，这些信息暴露了扁平视图。暴露的数据在呈现给用户之前仍然需要结构化（聚合），还是我错了？

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:54:42.703

CQRS 不需要有一个扁平化的读取模型；这是 CQRS 可以让您提供的好处，但它既不是必需的，也不是该方法的关键部分。

CQRS 是关于分离（如果你遵循名称，则为分离）。这是类固醇的命令查询分离原则（在我看来）。它为您提供的好处（在我的脑海中）是：

*   将读操作与写操作分开；
*   通过消息传递（例如命令、事件）在层之间进行通信，以便您的层是干净的；
*   在您的层内分离，应用单一职责原则（例如，您的域应用业务逻辑，您的命令处理路由命令，您的非规范化器或事件处理程序（或任何您称之为的）将信息保存到您的读取存储等）
*   允许您让团队成员在应用程序的不同部分上工作，而他们之间没有硬依赖；
*   等等

因此，如果上述这些对您很重要或您想要争取的东西（并且您的应用程序的设计支持实现 CQRS），那么 CQRS 将为您提供好处和价值。

CQRS 有很多好处。这不是解决所有问题的正确解决方案，但是当星星对齐时，它是解决问题的好方法（即使您没有非规范化读取存储、事件存储或异步模型等）。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T14:20:17.950

在我的职业生涯中，我曾多次与多个连接作斗争，以至于当像 CQRS 和 ES 这样的结构出现并提供了一种简洁的方式来简化读取方面时，我就跳了起来。好处是您可以获得许多好处，而不必实现通常与 CQRS 和 ES 相关的所有元素。只需将命令与查询分开就可以简化代码。但是，当您开始使用反规范化器为您的应用程序构建读取模型时，您会突然意识到您的应用程序是多么简单、干净和高性能。

如果有助于了解这种非规范化的“如何”工作，请查看这篇文章（它附带了一个代码示例以供参考）：[How to build a master details view with CQRS and ES](http://danielwhittaker.me/2014/10/05/build-master-details-view-using-cqrs-event-sourcing/)。我希望你觉得这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:54:40.497

如果它允许您停止从域对象投影读取模型，则在相同（例如）第三范式数据库上应用 CQRS 仍然可以在读取方面为您提供价值。

这也允许您更好地将您的域专门用于（我假设）事务处理，这意味着可能不需要许多关系。

# ios - 在 iPad 应用中创建乘法效果

> ID：15782938
> 
> 赞同：0
> 
> 时间：2013-04-03T09:00:10.090
> 
> 标签：ios, opengl-es, cocos2d-iphone

我正在尝试在 iOS 的 iPad 应用程序中创建绘画功能。我已经设法通过触摸使颜色出现，但我想重新创建 Photoshop 的多重功能，以便底层的黑白图像继续通过颜色显示。我开始使用不透明度进行操作，但越过同一个位置会导致它最终被移除。我正在使用 cocos2d，这是示例代码。

```
in header
CCSprite *background;
CCRenderTexture *target;
CCSprite *brush;

in init method:
background = [CCSprite spriteWithFile:@"background.png"];
background.position = ccp(self.size.width/2, self.size.height/2);
[self addChild: background z:-1];
target = [[CCRenderTexture alloc] initWithWidth:self.size.width height:self.size.height pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
[target setPosition:ccp(self.size.width/2, self.size.height/2)];
brush = [[CCSprite spriteWithSpriteFrameName:@"brush_spot.png"] retain];
[brush setColor:ccRED];

in -(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event method:
[target begin];
[brush setPosition:<CALCULATED POSITION>];
[brush visit];
[target end]; 
```

我已经尝试在画笔上使用不同的混合功能，但没有任何东西能够创造出我想要的外观。当直接在背景顶部添加精灵并将其混合功能设置为时，我确实得到了正确的效果

```
[sprite setBlendFunc:(ccBlendFunc) { GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA }]; 
```

但是当我尝试在画笔上使用这个混合功能时，屏幕上什么也没有出现。

谢谢伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:05:38.187

blend 函数将上面的内容与后面的内容混合在一起。当您渲染到纹理时，您会与纹理空白的任何内容混合在一起。我猜这是 alpha 0 的东西。所以您应该使用不透明度绘制到纹理。

当您用颜色填充纹理并将其附加到精灵时，您可以再次渲染它并将其与背景精灵混合。然后你可以使用乘法混合。

# .net - logLevel 的默认值是多少？

> ID：15782939
> 
> 赞同：0
> 
> 时间：2013-04-03T09:00:11.550
> 
> 标签：.net, azure, diagnostics

我在我的 Azure 实例上使用 System.Diagnostics。我的 webconfig 上有一些设置：

```
<system.diagnostics>
    <switches>
      <!-- Off = 0, Error 1, Warning = 2, Info = 3, Verbose = 4 -->
      <add name="logLevel" value="2" />
    </switches>
    <trace autoflush="true"
     ... 
```

我想知道默认的 logLevel 值是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:26:22.807

switch 没有默认值。`value`是必需的属性。如果未提供任何值，应用程序将抛出 ConfigurationErrorsException（来自[此处](http://msdn.microsoft.com/en-us/library/system.diagnostics.switch.value.aspx)）。

[在此处](http://msdn.microsoft.com/en-us/library/cex3872f.aspx)阅读有关配置的更多信息。

# regex - 用于替换除数字和“N/A”以外的任何内容的正则表达式

> ID：15782940
> 
> 赞同：1
> 
> 时间：2013-04-03T09:00:13.270
> 
> 标签：regex, perl

我有一个字符串：

```
my $str = "asd na ann nna aannaa NA 10012 3212and123 complan-boy 
           NANANANA n/a n/a nn/a na/a n/a/a"; 
```

我正在尝试编写一个正则表达式，它将删除除数字和`N/A`or之外的所有内容`NA`。

为此，我需要将此正则表达式***否定***为`/(n\/a|na|\d+)/i`.

我试过这个正则表达式：

```
s/[^(na|n\/a|\d+)]//gi 
```

最终归结为：

```
s/[^\d+na()\/|]//ig; 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:20:21.103

正如一些评论中所指出的，优雅的方法是拿走你想要保留的东西，而忘记其余的：

```
use Test::More tests => 1;
my $str = "asd na ann nna aannaa NA 10012 3212and123 complan-boy 
           NANANANA n/a n/a nn/a na/a n/a/a";
my $replaced = join '' => $str =~ m{n/?a|\d+}gi;
is $replaced, 'nananaNA100123212123NANANANAn/an/an/anan/a'; 
```

与复杂的外观相比，我发现这非常简单且可维护。您只需要知道，在列表上下文中，未定义捕获组的全局正则表达式匹配会返回所有匹配子字符串的列表。例如`"foo" =~ /o/g`，将`"o", "o"`在列表上下文中评估为。
该列表被连接起来，然后代表所需的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:06:05.410

一种简单的方法是查找后面跟 n/a 或数字（或字符串结尾）的任何内容，然后仅将其替换为 n/a 或数字部分。

```
use warnings;
use strict;

my $str = "asd na ann nna aannaa NA 10012 3212and123 complan-boy 
           NANANANA n/a n/a nn/a na/a n/a/a";

$str =~ s#.*?(n/?a|\d+|\z)#$1#gis;

print $str; 
```

`/s`启用单行模式，允许`.*`跨换行符匹配。

一般来说，正则表达式中的**负**匹配往往非常困难。大多数负匹配问题实际上可以表示为**正**匹配，这样做通常更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:02:06.410

```
s/[^na\d]|n(?!\/?a)|(?<!n)(?<!n\/)a//ig 
```

注意：我认为您不能替换`(?<!n)(?<!n\/)`为，`(?<!n\/?)`但您可以尝试。

# mysql - 在另一个表中求和加上时间间隔

> ID：15782941
> 
> 赞同：0
> 
> 时间：2013-04-03T09:00:14.923
> 
> 标签：mysql, sql, sum, external

我试图制作一个 sql 但不知道如何让它工作。我得到了这个 MySQL 数据库：

线：

```
*id
-date
-title
-text
-user_id 
```

评分：

```
*id
-thread_id
-user_id 
```

我需要在一段时间内计算确定 THREAD 的正评级。对于我使用此工作 SQL 的时间间隔：

```
SELECT 
SUM(valor=1) AS total_likes
FROM threads
WHERE date>= date_sub(current_date, INTERVAL 7 day)
ORDER BY total_likes; 
```

我尝试使用 THREAD 的 ID 进行 INNER 连接，但我认为我失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:05:00.370

你的意思是这样的吗？

```
SELECT threads.id, COUNT(ratings.id) AS total_likes
FROM threads
LEFT JOIN ratings ON ratings.thread_id = threads.id
WHERE threads.date >= date_sub(current_date, INTERVAL 7 day)
GROUP BY threads.id
ORDER BY total_likes; 
```

每个线程，它给出了该线程各自评级的数量。

# python - 如何使用 argparse 在单独的命名空间中使用子解析器参数？

> ID：15782948
> 
> 赞同：9
> 
> 时间：2013-04-03T09:00:28.170
> 
> 标签：python, python-2.7, argparse

我有以下测试代码

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--verbose", default = 0, type=int)

subparsers = parser.add_subparsers(dest = "parser_name")

parser_lan = subparsers.add_parser('car')
parser_lan.add_argument("--boo")
parser_lan.add_argument("--foo")

parser_serial = subparsers.add_parser('bus')
parser_serial.add_argument("--fun")

print parser.parse_args() 
```

它定义了两个子解析器，具有不同的参数集。当我将测试代码称为

```
tester.py  --verbose 3 car --boo 1 --foo 2 
```

我得到了预期的结果

```
Namespace(boo='1', foo='2', parser_name='car', verbose=3) 
```

相反，我想要的是来自每个子解析器的值在单独的命名空间或字典中，例如

```
Namespace(subparseargs={boo:'1', foo:'2'}, parser_name='car', verbose=3) 
```

以便每个子解析器的参数与主解析器的参数逻辑分离（如`verbose`本例所示）。

如何使用**同一**命名空间中的每个子解析器的参数来实现这一点（`subparseargs`在示例中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:16:04.417

您需要深入了解`argparse`一下，但将脚本更改为以下内容应该可以解决问题：

```
import argparse
from argparse import _HelpAction, _SubParsersAction

class MyArgumentParser(argparse.ArgumentParser):
    def parse_args(self, *args, **kw):
        res = argparse.ArgumentParser.parse_args(self, *args, **kw)
        from argparse import _HelpAction, _SubParsersAction
        for x in parser._subparsers._actions:
            if not isinstance(x, _SubParsersAction):
                continue
            v = x.choices[res.parser_name] # select the subparser name
            subparseargs = {}
            for x1 in v._optionals._actions: # loop over the actions
                if isinstance(x1, _HelpAction): # skip help
                    continue
                n = x1.dest
                if hasattr(res, n): # pop the argument
                    subparseargs[n] = getattr(res, n)
                    delattr(res, n)
            res.subparseargs = subparseargs
        return res

parser = MyArgumentParser()
parser.add_argument("--verbose", default = 0, type=int)

subparsers = parser.add_subparsers(dest = "parser_name")

parser_lan = subparsers.add_parser('car')
parser_lan.add_argument("--boo")
parser_lan.add_argument("--foo")

parser_serial = subparsers.add_parser('bus')
parser_serial.add_argument("--fun")

print parser.parse_args() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:34:22.260

我已经开始开发一种不同的方法（但类似于 Anthon 的建议）并提出了一个更短的代码。但是，我不确定我的方法是解决问题的一般方法。

与 Anthon 的提议类似，我定义了一个新方法，它创建一个保存在 中的“顶级”参数列表`args`，而所有其他参数都作为附加字典返回：

```
class MyArgumentParser(argparse.ArgumentParser):
    def parse_subargs(self, *args, **kw):
        # parse as usual
        args = argparse.ArgumentParser.parse_args(self, *args, **kw)

        # extract the destination names for top-level arguments
        topdest = [action.dest for action in parser._actions]

        # loop over all arguments given in args
        subargs = {}
        for key, value in args.__dict__.items():

            # if sub-parser argument found ...
            if key not in topdest:

                # ... remove from args and add to dictionary
                delattr(args,key)
                subargs[key] = value

        return args, subargs 
```

欢迎对这种方法发表评论，尤其是我忽略的任何漏洞。

# php - 不从脚本发送消息

> ID：15782950
> 
> 赞同：1
> 
> 时间：2013-04-03T09:00:37.897
> 
> 标签：php, serial-port, at-command

我知道我可能会投很多票，但请在我快到了的时候帮助我完成这个。我有以下代码。

```
<?php
exec("mode COM1 BAUD=9600 PARITY=N data=8 stop=1 xon=off");
$fp = fopen ("\\.\com1", "r+");
//$fp = dio_open('COM5:', O_RDWR | O_NOCTTY | O_NONBLOCK);
if (!$fp) 
{
    echo "Uh-oh. Port not opened.";
} 
else 
{

    $string  = "AT+CMGF=1";

    $string  = $string."OK";

    $string  = $string."AT+CMGS='+44XXXXX'";

    $string  = $string."> Hello World?<Ctrl>+<Z>";

    $string  = $string."+CMGS: 44";

    $string  = $string."OK";

    fputs ($fp, $string );
    echo $string."\n";
    fclose ($fp);
}

?> 
```

上面的代码正在输出`AT+CMGF=1OKAT+CMGS='+44XXXX'> Hello World?++CMGS: 44OK`，但实际上并未向该号码发送任何消息。

我的设备与装有 SIM 卡的 PC 相连。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:04:36.977

根据我对 AT 命令的了解，它是一个对话。您必须发送`AT+CMGF=1`然后等待**调制解调器发送** `OK`，发送下一个命令等等。

您现在正在发送所有内容，包括调制解调器在一个字符串中的响应。

有关维基百科的更多信息（一如既往）：[http ://en.wikipedia.org/wiki/Hayes_command_set](http://en.wikipedia.org/wiki/Hayes_command_set)

代码应该是（在我脑海中，未经测试）：

```
$string = "AT+CMGF=1";
fputs($fp, $string);
$r = fgets($fp);
if ($r == "OK") {
  $string = "AT+CMGS='+44XXXXX'";
  fputs($fp, $string);
  $r = $fgets($fp);
  ... etc ...
} 
```

# php - 使用 facebook php sdk 登录后获取用户的 facebook 信息

> ID：15782951
> 
> 赞同：1
> 
> 时间：2013-04-03T09:00:42.787
> 
> 标签：php, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我正在使用 Facebook javascript sdk 和 php sdk 将用户登录到我的网络应用程序。使用javascript，我可以登录/退出工作，并且可以获得登录用户的公共Facebook详细信息。

但是，当使用 php 时，我没有得到用户的 facebook 详细信息。为了给你一些关于应用程序的信息，当我导航到包含表单的某个页面时，代码会检查他们是否登录。如果没有，他们会得到一个 LoginUrl 链接。登录后，我有 $user_id，所以现在用户可以使用该表单，但在提交表单时，我没有将他们的 Facebook 详细信息保存在 MySQL 数据库中。有人对我应该做什么有建议吗？我肯定有 $user_id，因为只有在我有 $user_id 时才会显示表单。

我的代码基于[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)

```
<?php
require 'facebook.php';
//create application instance
$config = array(
'appId' => '**************',
'secret' => '****************************',
'cookie' => true);
$facebook = new Facebook($config);
$user_id = $facebook->getUser(); 
?>

//Page containing form
<div data-role="page" id="postAJourney" data-add-back-btn="true" data-back-btn-text="back" data-rel="back" data-direction="reverse" data-transition="flip" data-theme="b" >
    <div data-role="header"  data-position="fixed">
       <h1>Post A Journey</h1>
    </div>

    <div data-role="content">
       <?php if ($user_id): ?>
       <form action="add_journey.php" method="post" id="postAJourneyForm">
       <?php
       try
       {
           $access_token = $facebook->getAccessToken();
       $param_token = array('access_token' => $access_token); 
       //Proceed knowing you have a logged in user who's authenticated.
       $user_profile = $facebook->api('/me','GET',$param_token);
       echo "Name: " . $user_profile['name'];
       // store session data
       $_SESSION['fb_id'] = $user_profile['id'];
       $_SESSION['fb_name'] = $user_profile['name'];
       $_SESSION['fb_first_name'] = $user_profile['first_name'];
       $_SESSION['fb_last_name'] = $user_profile['last_name'];
       $_SESSION['fbImg'] = "https://graph.facebook.com/".$user_profile['id']."/picture";
    $_SESSION['fbLink'] = "https://www.facebook.com/".$user_profile['name'];
       }
       catch(FacebookApiException $e)
       {
       // If the user is logged out, you can have a 
       // user ID even though the access token is invalid.
       // In this case, we'll get an exception, so we'll
       // just ask the user to login again here.
       $login_url = $facebook->getLoginUrl(); 
       error_log($e->getType());
       error_log($e->getMessage());
       }
       ?>

       //jQuery Mobile Form would be here

 <?php else: ?>
 <?php // No user, print a link for the user to login
$login_url = $facebook->getLoginUrl(array(
'scope' => 'email',
'redirect_uri' => "http://localhost/share/#postAJourney"
));
 ?>
 <div>
     Login using OAuth 2.0 handled by the PHP SDK:
     <a href="<?php echo $login_url; ?>">Login with Facebook</a>
 </div>
 <?php endif ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:39:13.090

/*您需要用户访问令牌，然后将该令牌作为参数传递给 Facebook /me API，然后您可以获得 Facebook 用户的登录信息。你需要从范围内的用户那里传递你想要的权限范围。为了检索用户访问令牌，你可以像这样使用 */

$loginUrl = $facebook->getLoginUrl(array('scope' => 'manage_pages','redirect_uri'=>'你的 url'));

/* 制作 oauth url 并在其中传递范围以允许用户访问 Facebook 誓言页面以获得许可 从 facebook 重定向获取访问令牌，它将在请求中为您提供 */

$access_token = $facebook->getAccessToken();

$param_token = array('access_token' => $access_token);

$user_profile = $facebook->api('/me'); //替换为该行

$user_profile = $facebook->api('/me','GET',$param_token);

# python - Python中for循环中最后一项的事件处理程序

> ID：15782952
> 
> 赞同：0
> 
> 时间：2013-04-03T09:00:43.817
> 
> 标签：python, for-loop, event-handling

我找不到任何（对于初学者）可读的信息。是否可以在 for 循环中的最后一项上发生事件：

```
array = ["foo", "bar", "john", "test"]
for item in array:
    print item
LastItemEvent: forLoop + lastItem
def lastItem:
    # call another function
    doneWithLoop() 
```

还是我需要增加整数计数等？可怕的例子，但我希望你们能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:02:06.507

`item` *将*是循环结束时的最后一个元素，因为它采用数组中的每个值（实际上是列表），所以一旦完成，它将被设置为最后一个。

```
array = ["foo", "bar", "john", "test"]
for item in array:
    print item

print "last item", item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:16:55.353

我猜你可以使用 else 语句：

```
for x in range(10):
    print x
else:
    print x**2 
```

来自 Python 文档：

> 当项目用尽时（即序列为空时立即），else 子句中的套件（如果存在）将被执行，并且循环终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:16:45.467

我猜你正在做一些奇怪的事情，如果你解释你真正想做的事情，会有更好的解决方案。但是，如果你真的想做你所要求的，你可以迭代除最后一个之外的所有元素：

```
for item in array[:-1]:
    do_something(item) 
```

在那之后，你当然可以对最后一个元素做一些别的事情：

```
do_something_else(array[-1]) 
```

# java - 如何对 android 进行编程以查找特定网络？（简单教程之后的问题）

> ID：15782953
> 
> 赞同：0
> 
> 时间：2013-04-03T09:00:45.567
> 
> 标签：java, android, eclipse, wifimanager

我正在尝试使用以下示例：

[如何对 android 进行编程以查找特定网络？](https://stackoverflow.com/questions/11060414/how-do-i-program-android-to-look-for-a-particular-network)

但是由于以下问题，我无法执行它：

WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);

在那之后，我遇到了其他几个错误——但是[我认为]我已经完全按照教程/示例进行了操作。

```
import java.util.List;
import android.app.Activity;    
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.util.Log;
import android.content.Context; 

public class Connect extends Activity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect);
        String networkSSID = "ANDRE-PC_NETWORK";
        String networkPass = "superman";

        WifiConfiguration conf = new WifiConfiguration();
        conf.SSID = "\"" + networkSSID + "\"";   //ssid must be in quotes

        conf.wepKeys[0] = "\"" + networkPass + "\""; 
        conf.wepTxKeyIndex = 0;
        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 

        conf.preSharedKey = "\""+ networkPass +"\"";

        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);

        WifiManager wifiManager = (WifiManager)getSystemService(WIFI_SERVICE); 
        wifiManager.addNetwork(conf);

        List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
                 WifiManager.disconnect();
                 WifiManager.enableNetwork(i.networkId, true);
                 WifiManager.reconnect();                

                 break;
            }           
         }

    }} 
```

ECLIPSE 问题日志中的问题：

```
Description Resource    Path    Location    Type
Cannot make a static reference to the non-static method reconnect() from the type WifiManager   Connect.java        line 41 Java Problem
Cannot make a static reference to the non-static method disconnect() from the type WifiManager  Connect.java        line 39 Java Problem
Cannot make a static reference to the non-static method enableNetwork(int, boolean) from the type WifiManager   Connect.java        line 40 Java Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:26:29.313

您似乎混淆了一些变量名称：

```
WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE); 
wifiManager.add(conf);

List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
    if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
         wm.disconnect();
         wm.enableNetwork(i.networkId, true);
         wm.reconnect();                
         break;
    }           
} 
```

`wifiManager`应该是`wm`，反之亦然。也`context`应该或只是作为你的类的方法被`this`遗漏。`getSystemService()`

我不确定`add()`...的问题

**编辑**：

Well`add()`不存在`WifiManager`但`addNetwork()`确实存在，所以我想你需要那个方法而不是`add()`

**编辑2**：

你不知道你在做什么，对吧？您甚至不了解类名和变量名之间的区别！

`WifiManager wifiManager`<- 首先是Type，也称为类。第二个是变量名。在您的`for`循环中，您使用类型/类而不是变量，所以只需编写`wifiManager`而不是`WifiManager`.

你应该明确地从了解编程、OOP 和 Java 的基础知识开始。说真的...在尝试编写语言之前先学习语言...

# machine-learning - 监督学习，（ii）无监督学习，（iii）强化学习

> ID：15782956
> 
> 赞同：5
> 
> 时间：2013-04-03T09:00:48.810
> 
> 标签：machine-learning, artificial-intelligence

我是机器学习的新手。在阅读有关监督学习、无监督学习、强化学习的信息时，我遇到了以下问题并感到困惑。请帮助我在以下三个中确定哪一个是监督学习，无监督学习，强化学习。

什么类型的学习（如果有的话）最能描述以下三个场景：

(i) 为自动售货机创建硬币分类系统。为了做到这一点，开发人员从美国造币厂获得准确的硬币规格，并得出尺寸、重量和面额的统计模型，然后自动售货机使用该模型对其硬币进行分类。

(ii) 不是调用美国造币厂来获取硬币信息，而是提供一种算法，其中包含大量标记的硬币。该算法使用这些数据来推断自动售货机用来对其硬币进行分类的决策边界。

(iii) 计算机通过反复下棋并通过惩罚最终导致失败的动作来调整其策略来制定玩井字游戏的策略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:57:55.317

(i) 无监督学习——因为没有可用的标记数据

(ii) 监督学习 - 因为您已经有可用的标记数据

(iii) 强化学习——你根据动作和动作的效果/回报来学习和重新学习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:37:47.613

假设您将数据集表示为 matrix `X`。中的每一行`X`都是一个观察值（实例），每一列代表特定的变量（特征）。

如果你也有（并使用）`y`标签向量，对应于观察，那么这是**监督学习**的任务。涉及“主管”，表示哪些观察属于第 1 类，哪些属于第 2 类，等等。

如果您没有观察标签，那么您必须根据`X`数据集本身做出决定。例如，在硬币的示例中，您可能希望为硬币参数建立正态分布模型，并创建在硬币具有异常参数时发出信号的系统（因此可能是欺诈企图）。在这种情况下，您没有任何类型的主管会说什么硬币是好的，什么代表欺诈企图。因此，它是**无监督学习任务**。

在前面的 2 个示例中，您首先训练了模型，然后使用它，而无需对模型进行任何进一步的更改。在**强化学习**模型中，基于处理过的数据和结果不断改进。例如，寻求从 A 点到 B 点的路径的机器人可能首先计算移动参数，然后根据这些参数移动，然后分析新的位置并更新移动参数，以便下一步移动更准确（重复直到到达 B)。

基于此，我很确定您将能够找到这三种学习方式与您的项目之间的对应关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T06:56:18.827

**在监督算法中，**类别是预先确定的。这些类可以被认为是一个有限集，以前是由人类获得的。在实践中，某些数据段将被标记为这些分类。机器学习者的任务是搜索模式并构建数学模型。然后根据与数据本身的方差度量相关的预测能力来评估这些模型。文档中引用的许多方法（决策树归纳、朴素贝叶斯等）都是监督学习技术的示例。

**没有为无监督学习者**提供分类。事实上，无监督学习的基本任务是自动开发分类标签。无监督算法寻找数据片段之间的相似性，以确定它们是否可以被表征为形成一个组。这些组被称为集群，并且有一整套集群机器学习技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T07:46:02.837

我写了一篇关于 Perceptron for Novices 的文章。我已经用 Delta Rule 详细解释了监督学习。还描述了无监督学习和强化学习（简要）。有兴趣的可以去看看。

“人工神经网络（感知器）从自动驾驶汽车中检测汽车/行人的直观示例”

[https://www.spicelogic.com/Blog/Perceptron-Artificial-Neural-Networks-10](https://www.spicelogic.com/Blog/Perceptron-Artificial-Neural-Networks-10)

# jquery - 切换类 onclick

> ID：15782964
> 
> 赞同：0
> 
> 时间：2013-04-03T09:01:03.787
> 
> 标签：jquery

对于我的网站，我有一个包含内容的 div。

在 div 上方，我有如下标签：

```
<div id="tabs">
   <div id="tab1" class="tab" onclick="tabClick('tab1');">
      Info
   </div>
   <div id="tab2" class="tab" onclick="tabClick('tab2');">
      Video
   </div>
   <div id="tab3" class="tab" onclick="tabClick('tab3');">
      Serie
   </div>
</div> 
```

如果我点击我想切换类：tabactive。

我有jQuery：

```
function tabClick(id)
{
     $(id).toggleClass("tabactief");      //add the class to the clicked element
} 
```

但它不起作用，使用 onclick 请求 jquery 操作是错误的吗？

我想要做的是将点击的 div 的类切换到 tabactief。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:01:38.117

将其更改为：

```
$('#' + id).toggleClass("tabactief"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:01:46.720

您必须在[id selector](http://api.jquery.com/id-selector/)`#`之前添加。`id`

```
 $('#' + id).toggleClass("tabactief"); 
```

或者你可以从你打电话的地方`#`通过`id``tabClick`

```
<div id="tab1" class="tab" onclick="tabClick('#tab1');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:04:07.087

```
$('#'+id).toggleClass("Active"); 
```

我想这就是你要找的。

# c# - 发布商政策重定向不起作用

> ID：15782966
> 
> 赞同：1
> 
> 时间：2013-04-03T09:01:05.860
> 
> 标签：c#, .net, .net-assembly, publisher-policy

我正在学习使用发布者策略文件重定向程序集。做了以下事情：

*   我有一个名为 Dependency 的 DLL，它是一个签名的，并已在 GAC 中注册。

*   注册时，程序集版本为 1.0.0.1。

*   我开发了一个测试客户端（消费者）并引用了相同的版本并构建并运行了一次。

*   将依赖 DLL 的 AssemblyVersion 更改为 1.0.0.2

*   创建了一个发布者策略文件，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/sTQrw.jpg)

*   在GAC注册新版本
*   使用Al.EXE之类的生成策略程序集如下图：

    D:\Test> al /link:policy.config /out:policy.1.0.Dependency.dll /keyfile:....\keyfile.snk /platform:x86

*   我确保我只在消费者和依赖项中使用 X86 配置

*   即使在注册策略程序集之后，我仍然看到消费者正在使用旧版本 (1.0.0.1)，并且没有发生策略配置重定向。
*   我尝试使用 Fusion 日志查看器，但没有看到任何重定向失败

请通过指导我所缺少的来帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:36:09.493

将文化信息更改为中立后，我解决了这个问题。我把它当作 en-US :( 当本地 app.config 重定向也不起作用时发现这个。

# c# - 过度使用泛型

> ID：15782969
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:01:18.393
> 
> 标签：c#, .net, generics

当没有明显的实际好处时，人们如何看待泛型的使用。下面是一个示例代码片段，它与我正在处理的代码相似，我正在尝试确定使用泛型可以获得什么好处。

```
 public void DoSomething<Request>(Request request)
    {

        if (request == null) 
        {
            throw new ArgumentNullException("request");
        }

        if (Request is ISomeInterface)
        {
            DoSomething();
        }
        else
        {
        DoSomethingElse();
        }
    } 
```

为什么不直接使用 Object？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:05:21.693

引用自：[C#：System.Object 与泛型](https://stackoverflow.com/questions/4424030/c-system-object-vs-generics)

> 使用 object == cast 操作和值类型的装箱/拆箱。由于这些原因，泛型更快、更优雅（没有强制转换）。而且 - 主要原因是，您不会使用泛型获得“InvalidCastException”
> 
> 因此，泛型 == 速度和编译时错误。对象 == 运行时异常，速度较低（有时低得多）

# java - 安全和认证协议

> ID：15782972
> 
> 赞同：2
> 
> 时间：2013-04-03T09:01:24.100
> 
> 标签：java, authentication, ssl, restful-authentication, restful-architecture

我正在研究身份验证协议的主题，特别是适用于 JAVA 和 REST API 的协议，并且对此主题有疑问。所需系统的架构是一个简单的客户端 - 服务器。

我发现了一些有用的协议，比如 2 legged OAuth、digest authentication、Amazons S3 协议，当然还有 SSL。

我是这个身份验证业务的初学者，我不太明白为什么我们应该使用所有其他协议而不是只使用 SSL？

据说SSL速度较慢，但​​我知道很久以前就是这种情况，现在这个协议没有这个问题。无论如何，所有其他协议都依赖于 SSL，这也让我感到困惑。

我知道 SSL 会阻止重放攻击和中间人攻击。与上述协议相比，SSL 有何不同或不足？每个协议的贡献是什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:41:21.187

您描述了 2 个不同的要求。您可以将其中一个或两个都应用于您的应用程序：

1) 数据保护

2) 身份验证

数据保护包括机密性、内容完整性、重放攻击和中间人攻击等。所有这些功能都可以通过 SSL 来实现。SSL 几乎可以应用于所有协议。

身份验证意味着您要控制谁访问您的应用程序。有很多协议，您应该根据您的要求和您想要在身份验证上投入的时间来选择身份验证协议。请考虑 OAuth2。

此外，客户端身份验证在 SSL 中是可选的。SSL 中的客户端身份验证是使用客户端证书执行的（通常是 X.509 证书[http://en.wikipedia.org/wiki/X.509](http://en.wikipedia.org/wiki/X.509)）查看客户端证书身份验证： [http ://docs.oracle.com /javaee/1.4/tutorial/doc/Security5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html)

客户端证书是最安全的身份验证，但基础设施投资成本最高。至少它需要您组织中的 PKI 基础设施[http://en.wikipedia.org/wiki/Public-key_infrastructure](http://en.wikipedia.org/wiki/Public-key_infrastructure)。

# javascript - 如何检测我的网站在 iframe 中并删除 iframe？

> ID：15782974
> 
> 赞同：0
> 
> 时间：2013-04-03T09:01:27.417
> 
> 标签：javascript, jquery, iframe

我想知道我怎么知道我的网站嵌入在 iFrame 中并删除 iFrame 以像往常一样在地址栏中使用 url 加载我的网站！

就像这个：

```
<iframe src="http://varzesh3.com"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:03:23.593

`self`你可以很容易地通过评估and来实现这一点`top`，然后使用`replace()`打破框架：

```
if (self !== top)
    top.location.replace(self.location.href) 
```

# python - 恢复 matplotlib 中的左刻度

> ID：15782975
> 
> 赞同：1
> 
> 时间：2013-04-03T09:01:28.737
> 
> 标签：python, matplotlib

我有一个类似的问题： [Python Matplotlib Y-Axis ticks on Right Side of Plot](https://stackoverflow.com/questions/10354397/python-matplotlib-y-axis-labels-on-right-side-of-plot)

我修复了将 y 轴刻度标签放在绘图右侧的问题，但我也想在左侧恢复 y 刻度。

我试过：

```
yax.set_ticks_position('both') 
```

但我得到：

```
ax0.set_ticks_position('both')
AttributeError: 'AxesSubplot' object has no attribute 'set_ticks_position' 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:12:51.550

你没有得到正确的对象来调用`set_ticks_position()`。这是一个更简单的方法`gca()`：

```
from pylab import *

figure()
plot(arange(5))
ax = gca()
ax.yaxis.tick_right()
ax.yaxis.set_ticks_position('both') 
```

![在此处输入图像描述](https://i.stack.imgur.com/seGkM.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:09:53.193

在您使用的第二个代码示例`ax0`中，我猜这是一个`Axes`实例，在您使用的第一个代码示例`yax`中，大概是`ax0`.

我认为您正在寻找[tick_params](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params)：`ax0.tick_params(axis = 'y', direction = 'in')`

# encoding - .ENCODING 国际字符（希伯来文、泰文、俄文、中文、....）

> ID：15782978
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:01:37.097
> 
> 标签：encoding, utf-8, wget, hebrew, iconv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:08:17.127

这些页面不是“像这样保存的”，无论您用来查看文件的内容都只是错误地解释了编码。要知道文件的编码是什么，您应该在下载过程中注意 HTTP`Content-Type`标头；现在没有了。
如果文档`<head>`有*一个*.

否则只能*猜测*文档的编码。

请参阅[每个程序员绝对、积极需要了解的关于使用文本的编码和字符集](http://kunststube.net/encoding/)的知识，以获取更多所需的背景知识。

# c# - 从 C# 类生成 JSON 模式

> ID：15782982
> 
> 赞同：44
> 
> 时间：2013-04-03T09:01:43.563
> 
> 标签：c#, json, jsonschema

有没有办法以编程方式从 C# 类生成 JSON 模式？

我们可以使用[http://www.jsonschema.net/手动执行的操作](http://www.jsonschema.net/)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-10-12T12:32:53.837

另一个支持生成 JSON Schema v4 的选项是[NJsonSchema](http://njsonschema.org)：

```
var schema = JsonSchema.FromType<Person>();
var schemaJson = schema.ToJson(); 
```

该库可以通过[NuGet](https://www.nuget.org/packages/NJsonSchema/)安装。

**NJsonSchema v9.4.3+ 的更新：**

```
using NJsonSchema;

var schema = await JsonSchema.FromTypeAsync<Person>();
var schemaJson = schema.ToJson(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-11T21:59:55.347

```
JsonSchemaGenerator js = new JsonSchemaGenerator();
var schema = js.Generate(typeof(Person));
schema.Title = typeof(Person).Name;
using (StreamWriter fileWriter = File.CreateText(filePath))
{
      fileWriter.WriteLine(schema);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-06T12:01:37.207

对于那些从谷歌搜索反向
（从 JSON 生成 C# 类）登陆这里的人 - 我使用那些优秀的在线工具：

JSON： http:
[//json2csharp.com/](http://json2csharp.com/)
（来源：http: [//jsonclassgenerator.codeplex.com/](http://jsonclassgenerator.codeplex.com/)）

XML： http:
[//xmltocsharp.azurewebsites.net/](http://xmltocsharp.azurewebsites.net/)
（来源：[https](https://github.com/msyoung/XmlToCSharp) ://github.com/msyoung/XmlToCSharp ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T13:12:59.730

这在[Json.NET](https://www.newtonsoft.com/jsonschema)中通过[Newtonsoft.Json.Schema](https://www.nuget.org/packages/Newtonsoft.Json.Schema/) NuGet 包得到支持。有关如何使用它的说明可以在[官方文档](https://www.newtonsoft.com/jsonschema/help/html/GeneratingSchemas.htm)中找到，但我还在下面提供了一个简单的示例。

```
JSchemaGenerator generator = new JSchemaGenerator();
JSchema schema = generator.Generate(typeof(Person));
Console.WriteLine(schema.ToString());
//{
//  "type": "object",
//  "properties": {
//    "Name": {
//      "type": [ "string", "null" ]
//    },
//    "Age": { "type": "integer" }
//  },
//  "required": [ "Name", "Age" ]
//} 
```

# html - 由于可访问性而从 HTML4 更改为 HTML5？

> ID：15782983
> 
> 赞同：0
> 
> 时间：2013-04-03T09:01:43.417
> 
> 标签：html, accessibility, html4

我在**公共部门**工作，我不得不从上级那里接手一个网络项目。该页面已经可供残障人士访问。

在进行一些更改时，我考虑**过从 HTML4**更改为**HTML5**，因为我听说它在可访问性方面有一些新的、更好的方面。

改变真的有回报吗？还是只是浪费时间转换代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:11:34.470

HTML5 带来了大量的语义元素，让用户代理可以进一步了解页面的布局方式。这绝对是值得的，而且不应该太费时，特别是如果你的风格不错并且不依赖标签类型。`<div>`你基本上会用它们的语义对应物替换一堆s 。

例如，以下是 HTML5 中的一些新标签：

*   `<section>`
*   `<nav>`
*   `<article>`
*   `<aside>`
*   `<hgroup>`
*   `<header>`
*   `<footer>`
*   `<time>`
*   `<mark>`

HTML5 的其他部分，如 CSS3、本地存储等，并没有真正具有可访问性优势。

我建议阅读更多关于所有这些标签的实际含义，以确保您正确使用它们。还有其他变化，例如`<b>`,`<em>`和`<strong>`标签的明确含义。

## 支持

一些浏览器，如 IE6（不确定 IE7）不喜欢这些新标签，并且在使用时会破坏页面。你可以包含一个像 Modernizr 这样的 polyfill 库来解决这个问题，只需包含脚本，一切正常！

## 进一步阅读

*   [深入研究 HTML - 语义](http://diveintohtml5.info/semantics.html)
*   [HTML5 医生](http://html5doctor.com/lets-talk-about-semantics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:11.207

虽然 html5 是一个很好的标准，但许多浏览器仍然不支持较新的标签/标记……输入 ARIA 或[WAI-ARIA（可访问的富 Internet 应用程序套件）。](http://www.w3.org/WAI/intro/aria)

[Clarissa Peterson 的网站](http://www.clarissapeterson.com/2012/11/html5-accessibility/)给出了 html5 v ARIA 的一个很好的真实示例。请参阅标题为**HTML5 和 ARIA**的部分。

# c# - 简单的 Wcf 服务不会导致端点异常

> ID：15782984
> 
> 赞同：0
> 
> 时间：2013-04-03T09:01:44.447
> 
> 标签：c#, wcf

我刚刚学习 wcf 并尝试创建 WCF 服务，但我不断收到此异常：

> 未处理的异常：System.ServiceModel.EndpointNotFoundException：没有`http://localhost:8733/Person/`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException 离子（如果存在）。---> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection can ould be because the target machine主动拒绝它 127.0.0.1:8733

我首先创建了一个 WCF 服务库。我在这里定义了我的服务合同和数据合同。并配置了端点女巫，如下所示：

```
<service name="SelfHosting.PersonContract">
    <endpoint address="" binding="basicHttpBinding" contract="SelfHosting.IPersonContract">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8733/Person/" />
      </baseAddresses>
    </host>
  </service> 
```

这两个端点已经添加，我只是将它们配置为我的需要。我不确定 mex 端点的用途，所以我希望有人能告诉我。

然后我创建了一个控制台应用程序并添加了对该服务的引用。我已经初始化了一个服务实例，然后我尝试调用它：

```
static PersonContractClient client = new PersonContractClient();

static void Main(string[] args)
{
        var persons = client.GetPersons();
        foreach (var personData in persons)
        {
            Console.WriteLine(personData.Name);
            Console.WriteLine(personData.Email);
        }
    } 
```

我没有在客户端上设置任何端点，因为据我所知，当您添加对服务的引用时它们会自动添加。这是在我添加引用之后添加的：

```
 <endpoint address="http://localhost:8733/Person/" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IPersonContract" contract="PersonNamespace.IPersonContract"
            name="BasicHttpBinding_IPersonContract" /> 
```

我的解决方案还包含另一个项目，其中包含我使用实体框架获得的数据。我不知道这是否与问题有关。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-06T00:45:11.920

当我尝试在控制台应用程序中使用自主机创建双工 wcf 通信时，我遇到了类似的问题。按照这个例子[http://adamprescott.net/2012/08/15/a-simple-wcf-service-callback-example/](http://adamprescott.net/2012/08/15/a-simple-wcf-service-callback-example/)说清楚了。得到错误是很常见的

“未处理的异常：System.ServiceModel.EndpointNotFoundException：在[http://localhost:8733/Person/](http://localhost:8733/Person/)处没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。请参阅 InnerException，如果---> System.Net.WebException: 无法连接到远程服务器 ---> System.Net.Sockets.SocketException: 无法建立连接，因为目标机器主动拒绝了它 127.0 .0.1:8733"

在尝试在客户端控制台应用程序中发现服务引用之前，您需要通过右键单击文件夹位置中的 .exe 来启动服务的可执行文件 (.exe) > 复制服务 app.config 中基地址中的 uri并粘贴在添加服务引用对话框中，然后单击确定...修复它。我希望这对其他人有所帮助，因为这个问题有点老了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T17:38:35.823

使用端点的 IP 地址代替 url 中的“localhost”。

# objective-c - NSPredicate 搜索 NSSet

> ID：15782986
> 
> 赞同：1
> 
> 时间：2013-04-03T09:01:45.010
> 
> 标签：objective-c, regex, full-text-search, nspredicate

我一直在环顾四周，看到了与我正在做的类似但无法让它们工作的例子。我有一个“产品”核心数据实体，它与“制造商”实体有一对多关系。“制造商”有一个我要搜索的属性“名称”。“产品”还有一个我希望搜索的“isCustomItem”属性。所以我想要达到的效果如下：

`Product`1...m`Manufacturer.name` 和 `Product.isCustomItem`== 0

到目前为止，这是我设法聚在一起的：

```
NSPredicate *p3 = [NSPredicate predicateWithFormat:@"SUBQUERY(manufacturer,$m,$m.name CONTAINS[c] %@) AND (isCustomItem == 0)", searchString]; 
```

但是我不断收到错误消息：

```
**'Unable to parse the format string "SUBQUERY(manufacturer,$m,$m.name CONTAINS[c] %@) AND (isCustomItem == 0)"'** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:10:23.960

尝试这样的事情......

```
NSPredicate *namePredicate = [NSPredicate predicateWithFormat:@"ANY manufacturer.name CONTAINS[c] %@", searchString];
NSPredicate *customPredicate = [NSPredicate predicateWithFormat:@"isCustomItem == 0"];

NSPredicate *compoundPredicate = [NSCompoundPredicate andPredicateWithSubPredicates:@[namePredicate, customPredicate]]; 
```

然后使用 CompoundPredicate 过滤您的集合。

# c - 浮点运算如何在 c 中工作？大数字奇怪的结果

> ID：15782988
> 
> 赞同：0
> 
> 时间：2013-04-03T09:01:53.043
> 
> 标签：c, floating-point

以下代码给出了一些奇怪的结果：

```
#include <stdio.h>
#include <float.h>

int main()
{
    float t = 1.0;  
    float res;
    float myFltMax = 340282346638528859.0;
    printf("FLT_MAX %f\n", FLT_MAX);

    res = FLT_MAX - t;
    printf("res %f\n", res);

    res = myFltMax - t;
    printf("res myFltMax %f\n", res);

    return 1;

} 
```

结果是：

```
FLT_MAX 340282346638528859811704183484516925440.000000
res 340282346638528859811704183484516925440.000000
res myFltMax 340282356122255360.000000 
```

因此，如果我从 FLT_MAX 中减去 1，结果是相同的，如果我从其他大浮点数中减去 1，则结果大于初始数字。

我正在使用 gcc 版本 4.7.2。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:12:50.940

如果从中减去 1，`myFltMax`则不会得到大于初始数字的差。你得到相同的号码。也打印`myFltMax`，你会看到它是`340282356122255360`和不是`340282346638528859`。

[证明](http://ideone.com/zzfGRz)。

基本上，编译器会将您四舍五入`340282346638528859`到可以用浮点类型表示的最接近的值，并且恰好是`340282356122255360`.

# android - 写入 SD 卡时遇到问题

> ID：15782992
> 
> 赞同：0
> 
> 时间：2013-04-03T09:02:01.927
> 
> 标签：android, file-io

代码有什么问题？我已经添加了权限。Logcat 没有打印它应该显示的消息。

我猜我必须使用文件流？

```
public class Run {

int abc = 2;
int[] myIntArray = {1,2,3};
String texts = "abcabac";

//Person p = new Person();
 Paragraph p = new Paragraph(abc, texts, myIntArray);

Serializer serializer = new Persister();
File file = new File("paragraphs.xml");

private final static String TAG = Run.class.getCanonicalName();

String a = "writeing something nothing";

    // Now write the level out to a file

    Serializer serial = new Persister();

    //File sdDir = Environment.getExternalStorageDirectory(); should use this??

    //File sdcardFile = new File("/sdcard/paragraphs.xml");
    File sdcardFile = new File(Environment.getExternalStorageDirectory().getPath());
    {

    try {
        serial.write(p, sdcardFile);
    } catch (Exception e) {
        // There is the possibility of error for a number of reasons. Handle this appropriately in your code
        e.printStackTrace();
    }
    Log.i(TAG, "XML Written to File: " + sdcardFile.getAbsolutePath()); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:07:08.617

我有android 4.1.2的**三星 Galaxy s3 。****我的内部手机内存命名为 sdcard0 和我的外部卡 extSdCard。**

```
Environment.getExternalStorageDirectory() 
```

所以上面返回sdcard0的路径，它是手机内部存储器

在这种情况下，要获得实际路径，您可以使用以下

```
String externalpath = new String();
String internalpath = new String();

public  void getExternalMounts() {
Runtime runtime = Runtime.getRuntime();
try 
{
Process proc = runtime.exec("mount");
InputStream is = proc.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
String line;
BufferedReader br = new BufferedReader(isr);
while ((line = br.readLine()) != null) {
if (line.contains("secure")) continue;
if (line.contains("asec")) continue;

if (line.contains("fat")) {//external card
    String columns[] = line.split(" ");
    if (columns != null && columns.length > 1) {
        externalpath = externalpath.concat("*" + columns[1] + "\n");
    }
 } 
    else if (line.contains("fuse")) {//internal storage
    String columns[] = line.split(" ");
    if (columns != null && columns.length > 1) {
        internalpath = internalpath.concat(columns[1] + "\n");
    }
  }
  }
}
 catch(Exception e)
 {
  e.printStackTrace();
 }
  System.out.println("Path  of sd card external............"+externalpath);
  System.out.println("Path  of internal memory............"+internalpath); 
 } 
```

获得路径后，您可以使用以下内容。

试试下面

```
String filename = "filename.xml";
File file = new File(Environment.getExternalStorageDirectory(), filename);
//Instead of Environment.getExternalStorageDirectory() you can use internalpath or externalpath from the above code.
FileOutputStream fos;
byte[] data = new String("data to write to file").getBytes();
try {
fos = new FileOutputStream(file);
fos.write(data);
fos.flush();
fos.close();
} catch (FileNotFoundException e) {
// handle exception
} catch (IOException e) {
// handle exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:06:58.580

你所要做的

文件名是 test.xml、text.jpg 或 test.txt

```
File sdcardFile = new File(Environment.getExternalStorageDirectory()+"/"+filename); 
```

检查此[链接](https://stackoverflow.com/a/15739387/1168654)。

有关[外部存储的更多详细信息](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:26:09.880

```
 //to get sdcard path
    String sdcardpath = Environment.getExternalStorageDirectory().getPath();

  //to write a file in sd card
  File file = new File("/sdcard/FileName.txt");
    if (!file.exists()) {
        file.mkdirs();

        } 
```

添加清单的权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# ios - Double @synchronized：需要吗？

> ID：15782995
> 
> 赞同：3
> 
> 时间：2013-04-03T09:02:06.637
> 
> 标签：ios, objective-c, synchronization

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我的应用程序是 Android 应用程序的一个端口，我有以下两种方法：

```
- (MyObject*)getMyObject:(MyObjectType)myObjectType
{
    @synchronized(self)
    {
        for (int index = 0; index < [myObjects count]; index++)
        {
            MyObject* myObject = (MyObject*)[myObjects objectAtIndex:index];
            if (myObject.Type == myObjectType)
                return myObject;
        }

        return nil;
    }
}

- (BOOL)isMyObjectVisible:(MyObjectType)myObjectType
{
    @synchronized(self)
    {
        return ([self getMyObject:myObjectType] != nil);
    }
} 
```

我有`isMyObjectVisible:`，即`@synchronized`调用另一种`@synchronized`方法。

**`isMyObjectVisible:`有必要`@synchronized`吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:26:23.467

要回答您的第一个问题，**不**，不需要双重锁定。

你可以把锁留在里面`getMyObject`。那保护它。但是，`isMyObjectVisible`除了对 的调用之外没有其他内容`getMyObject`，因此在该方法中没有**其他**需要保护的内容。

但是，borrrden 的评论在这里不是问题。[使用 @synchronized](https://stackoverflow.com/a/8956919/119114)时你会得到一个[递归锁](http://en.wikipedia.org/wiki/Reentrant_mutex)，所以你可以像在没有死锁的情况下那样嵌套调用。在你的情况下，没有**必要**。`synchronized`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T10:14:14.677

这是您需要使用 double @synchronized 的示例：

```
NSString * str;
str = [[NSString alloc] initWithFormat:@"str"];

-(void)viewDidLoad{

  NSString *foo = @"foo";
  NSString *bar = @"bar";
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  [self firstAction:foo];
  });
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  [self secondAction:bar];
  });
}
- (void)firstAction:(NSString *)sender {
    NSLog(@"firstAction");
    @synchronized (self) {
        str = sender;
        for (int i=0; i<5; i++) {
            NSLog(@"first: %@",str);
        }
    }
}

- (void)secondAction:(NSString *)sender {
        NSLog(@"secondAction");
        @synchronized (self) {
            str = sender;
            for (int i=0; i<5; i++) {
                NSLog(@"second: %@",str);
            }
        }  
 } 
```

（str 是静态变量） - 尝试在没有 @synchronized (self) 的情况下运行它，看看会发生什么。**

# java - 无法连接到 MSSQL 数据库 2012

> ID：15782997
> 
> 赞同：0
> 
> 时间：2013-04-03T09:02:14.043
> 
> 标签：java, sql-server-2012

我在本教程中使用代码片段连接到 MSSQL darabase。

[http://www.java-tips.org/other-api-tips/jdbc/how-to-connect-microsoft-sql-server-using-jdbc.html](http://www.java-tips.org/other-api-tips/jdbc/how-to-connect-microsoft-sql-server-using-jdbc.html)

但是当我运行程序时，我得到了这个错误。

```
 java.sql.SQLException: Network error IOException: Connection timed out: connect
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:410)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at DB.dbConnect(Test.java:28)
    at Test.main(Test.java:12)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:307)
    at net.sourceforge.jtds.jdbc.SharedSocket.<init>(SharedSocket.java:257)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:311)
    ... 6 more 
```

我的连接网址是

```
db.dbConnect(
     "jdbc:jtds:sqlserver://CSLK-PT12DB:1434/R8_JBOSS_MSSQL_Archived_Migrated_Beta","spider3","spider3");
    } 
```

此异常的原因是什么以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:16:09.450

如果没有监听，SQL Server 不接受 TCP 连接。您必须配置 SQL Server 才能执行此操作。[本文](http://msdn.microsoft.com/en-us/library/ms191294.aspx)介绍如何为给定实例启用服务器网络协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-29T16:00:46.163

我遇到了同样的错误，我通过更改 SQL Server Express 属性来修复它。MyComputer > Manage > SQL Server Services > SQL ServerLog on > built-in account > 从网络服务到本地系统。

# sql - 在 SQL Server 中更新表的属性时触发？

> ID：15782999
> 
> 赞同：1
> 
> 时间：2013-04-03T09:02:19.370
> 
> 标签：sql, sql-server-2008, triggers

我创建了计算机审计应用程序。当我运行我的应用程序时，它会在浏览器上显示计算机附件，例如 computerName、osVersion、lastAudit、model、totalMemory、processor、userName。

我在 SQL Server 2008 中用一张表创建了一个数据库`Computers`。将值插入该表时，我需要更新列中的表值。为了尝试这个，我使用了触发器。但是，我并不完全了解触发器的工作原理。

有人可以告诉我如何做到这一点。

我的表有这些列：

```
id, computerName, osVersion, lastAudit, model, totalMemory, processor, userName 
```

我知道在此代码中存在错误或缺失，但我无法完成此操作。请在这方面帮助我。

```
 CREATE TRIGGER update_trigger
  ON computers
  AFTER UPDATE
   AS 
   BEGIN
declare @id as int
declare @computerName as varchar(100)
declare @osVersion as varchar(100)
declare @lastAudit as datetime
declare @model as varchar(100)
declare @totalMemory float
declare @processor as varchar(100)
declare @userName as varchar(100)
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
if update(id)
BEGIN
    insert into computers values(@id,@computerName,@osVersion,@lastAudit,@model,
                            @totalMemory,@processor,@userName,'Update')

SET NOCOUNT ON;

    END
    GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:40:38.897

如果您想在插入新行时（或更新它们时简单地更新现有表的一列或多列？不太清楚......），请尝试这样的触发器：

```
CREATE TRIGGER trigUpdateTable
ON dbo.Computers
AFTER INSERT  -- or AFTER UPATE or AFTER INSERT, UPDATE
AS 
BEGIN
  -- do whatever you want to do on INSERT and/or UPDATE
  UPDATE 
      dbo.Computers
  SET 
      LastAudit = GETDATE()
  FROM 
      dbo.Computers c
  INNER JOIN 
      Inserted i ON c.id = i.id 
```

要记住的一个非常重要的一点：SQL Server 触发器***不是***在受影响的每行调用 - 而是每条语句，如果您的`INSERT`or`UPDATE`语句影响多行，您将在`Inserted`伪表中有多个条目，您需要能够处理在你的触发器中有这个事实