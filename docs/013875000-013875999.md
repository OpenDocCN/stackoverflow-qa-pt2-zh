# StackOverflow 问答 13875000-13875999

# c - 如何使用 amqp C 库发送长度为 N 的 char*？

> ID：13875000
> 
> 赞同：-1
> 
> 时间：2012-12-14T08:26:26.497
> 
> 标签：c, rabbitmq, amqp

如何通过[amqp (RabbitMQ) C 库](https://github.com/alanxz/rabbitmq-c)`char*`发送长度？在所有样本中，他们使用类似while I have not null terminatestinge but a pair and its ?`N``amqp_basic_cstring(char*)``char *``length`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:49:46.957

所有 C 字符串都以特殊字符 终止`'\0'`。如果你`N`的长度小于字符串的长度，你可以制作一个副本，然后在位置终止它`N`并将其作为普通的 C 字符串发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:58:45.913

API中没有`amqp_basic_cstring()`，我认为您的意思`amqp_cstring_bytes()`是将C字符串包装在`amqp_t`结构中，使用此函数时必须对字符串进行空终止，因为它在`strlen()`内部使用对字符串进行计数，因此分配一个额外的字节并以空终止字符串。

```
str[len-1]='\0'; 
```

另一种选择是将C字符串包装在`amqp_byte_t`你自己中，无论如何我认为你不应该这样做：

```
amqp_bytes_t str;
str.len = length; //string length
str.bytes = cptr; //pointer to string

foo(..., str, ...); 
```

# ssas - ROLAP 模式是否需要处理？

> ID：13875001
> 
> 赞同：3
> 
> 时间：2012-12-14T08:26:27.473
> 
> 标签：ssas, data-warehouse

我理解 ROLAP、MOLAP、HOLAP 的区别，但这是否意味着 ROLAP 永远不需要处理，因为您总是直接从数据库中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:15:02.217

在 MOLAP 中，您会将聚合存储在 Analysis Services 的数据目录中。使用 ROLAP，您可以将聚合存储在关系数据库的索引视图中。ROLAP 将为您提供比 MOLAP 更慢的实时方法，但对于您需要不时查看的历史资料很有用。

来自 MSDN：

> 如果分区使用 ROLAP 存储模式并且其源数据存储在 SQL Server 数据库引擎中，Analysis Services 会尝试创建索引视图以包含分区的聚合。如果 Analysis Services 无法创建索引视图，则不会创建聚合表。尽管 Analysis Services 处理在 SQL Server 数据库引擎上创建索引视图的会话要求，但 ROLAP 分区及其架构中的表必须满足以下条件，Analysis Services 才能为聚合创建索引视图：

*   分区不能包含使用 Min 或 Max 聚合函数的度量。

*   ROLAP 分区模式中的每个表只能使用一次。例如，架构不能包含 [dbo].[address] AS "Customer Address" 和 [dbo].[address] AS "SalesRep Address"。

*   每个表必须是表，而不是视图。

*   分区架构中的所有表名都必须使用所有者名称进行限定，例如 [dbo].[customer]。

*   分区架构中的所有表必须具有相同的所有者；例如，您不能有引用表 [tk].[customer]、[john].[store] 和 [dave].[sales_fact_2004] 的 FROM 子句。

*   分区度量的源列不能为空。

*   视图中使用的所有表都必须在以下选项设置为 ON 的情况下创建：

*   *   ANSI_NULLS
*   *   QUOTED_IDENTIFIER

*   SQL Server 数据库引擎中索引键的总大小不能超过 900 字节。在处理 CREATE INDEX 语句时，SQL Server 数据库引擎将根据固定长度的键列断言此条件。但是，如果索引键中有可变长度列，SQL Server 数据库引擎也会为基表的每次更新断言此条件。由于不同的聚合具有不同的视图定义，使用索引视图的 ROLAP 处理可能会成功或失败，具体取决于聚合设计。

*   创建索引视图的会话必须将以下选项设置为 ON：ARITHABORT、CONCAT_NULL_YEILDS_NULL、QUOTED_IDENTIFIER、ANSI_NULLS、ANSI_PADDING 和 ANSI_WARNING。可以在 SQL Server Management Studio 中进行此设置。

*   创建索引视图的会话必须将以下选项设置为 OFF：NUMERIC_ROUNDABORT。可以在 SQL Server Management Studio 中进行此设置。

[在这里阅读整个事情。](http://technet.microsoft.com/en-us/library/ms174915.aspx)

# javascript - Web 套接字连接未正确关闭

> ID：13875003
> 
> 赞同：2
> 
> 时间：2012-12-14T08:26:29.227
> 
> 标签：javascript, html, websocket

我正在尝试构建一个逻辑，在该逻辑中我尝试在断开连接时重新连接 websocket 连接。我写了以下逻辑。

```
var webSocketObj = null;
var countForWebSocketReconnection = 0;
var intervalIdForWebSocket = "";

function webSocketConnection (message_arr) {
    if ("WebSocket" in window) {
        try {
            webSocketObj.onopen = null;
            webSocketObj.onmessage = null;
            webSocketObj.onclose = null;
            webSocketObj.onerror = null;

            webSocketObj.close();
        } catch (e) {
             console.log('try/catch around location update'+e);
        } finally {
            webSocketObj = new WebSocket(webSocketUrl);
            webSocketObj.onopen = function() {
                webSocketOpen(message_arr);
            };
            webSocketObj.onmessage = function (evt) {
                websocketMessage(evt);
            }
            webSocketObj.onclose = function() {               
                if(countForWebSocketReconnection>=6){
                    alert("Web-socket connection is terminated by the browser. Please reload the page.");
                    clearTimeout(intervalIdForWebSocket );
                    intervalIdForWebSocket = "";
                } else {
                    monitorIntervalIdForWebSocket = setTimeout(function(){
                        webSocketObj.onopen = null;
                        webSocketObj.onmessage = null;
                        webSocketObj.onclose = null;
                        webSocketObj.onerror = null;

                        webSocketObj.close();

                        webSocketConnection(message_arr);
                        countForWebSocketReconnection++;
                    }, 10000);
                }
            }
            webSocketObj.onerror = function(evt) {
               webSocketOnError(evt);
            }
           }
    } else {

    }
} 
```

在任何断开连接的情况下，它会尝试重新连接 6 次。在尝试这样做时，它会打开 6 个连接（以防 6 次尝试连接失败），因为我在 Google Chrome 控制台上进行了监控。有人可以在这里建议我做错了什么还是我的方法有问题？这将非常有帮助。

# android - 在android listview中设置项目

> ID：13875005
> 
> 赞同：0
> 
> 时间：2012-12-14T08:26:39.563
> 
> 标签：android, android-listview

我在列表视图中显示学生姓名列表。对于每个学生，我需要捕获签名并创建证书。因此，为此我为每个列表项保留了两张图片作为父权。我为每张图片保留了单独的点击操作。我可以以任何其他方式保留捕获签名和创建证书而不是为每个列表项创建两个图像吗？

# c++ - 树内容的格式化输出 - 前序遍历

> ID：13875010
> 
> 赞同：0
> 
> 时间：2012-12-14T08:26:57.137
> 
> 标签：c++, algorithm, recursion, tree, preorder

我有一种打印树内容的方法：

```
void RedBlackTree::printPreorder(RedBlackNode *root){
    if(root == NULL) 
        return;
    cout << root->data << endl;
    printInorder(root->left);
    printInorder(root->right);
} 
```

我的树的内容读取正确，但我想格式化树，使其看起来更好。现在，对于一棵树：

```
 c
   / \
  b   k
 /   / \
a   d   m 
```

打印内容：

```
c
b
a
k
d
m 
```

但我想添加一些缩进，使其内容为：

```
c
    b
        a
    k
        d
        m 
```

格式为：

```
Root
    Left 
        LeftLeft
        LeftRight
    Right
        RightLeft
        RightRight

etc.... 
```

我只是对递归有点迷失了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:39:19.560

```
void RedBlackTree::printPreorder(RedBlackNode *root, int depth){
    if(root == NULL) 
        return;
    for(int i=0; i<=depth; i++)
      cout <<" ";

    depth++;
    cout << root->data << endl;
    printInorder(root->left, depth);
    printInorder(root->right, depth);
} 
```

试试看！！

# md5 - 在 GPU 上计算单个 MD5 SHA1 哈希

> ID：13875018
> 
> 赞同：6
> 
> 时间：2012-12-14T08:27:19.017
> 
> 标签：md5, gpu, sha1

我想知道是否有可能在 GPU 上比在 CPU 上更有效地计算单个 MD5 或 SHA1 哈希。

我知道有些应用程序可以并行计算大量哈希值和蛮力密码。这不是我要找的。我想快速散列大量数据缓冲区。

从算法来看，似乎不可能将它们并行化以实现高效的 GPU 计算。但也许我错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-08T11:45:12.590

单个 MD5 或 SHA1 哈希无法在 GPU 上有效计算。这两种散列算法不能并行化，但本质上是顺序的。GPU 只能有效地处理可以分解为数千个并行部分的任务。在顺序任务上，GPU 比常规 CPU 慢得多。暴力破解密码之所以有效，是因为可以同时计算许多不同密码的哈希值。

# python - 如何从 QLineEdit 接受值作为 int

> ID：13875022
> 
> 赞同：1
> 
> 时间：2012-12-14T08:27:35.753
> 
> 标签：python, pyqt4

我设置了 3 个 QLineEdits，它们应该具有浮点变量或 int

```
 self.sfEdt=QtGui.QLineEdit()
  self.efEdt=QtGui.QLineEdit()
  self.bfEdt=QtGui.QLineEdit() 
```

甚至设置验证器

```
 self.sfEdt.setValidator(QtGui.QIntValidator())
      self.efEdt.setValidator(QtGui.QIntValidator())
      self.byfrEdt.setValidator(QtGui.QIntValidator()) 
```

但是当我检查它的值类型是 QString 时，应该如何将值作为 int 或 float ？

因为在这些 QLineEdit 中显示的值已加载浮点转换为字符串，如果我不将其转换为字符串，则默认为 QString，它们应该是输入或加载到 QLineEdit 中的值可以保持浮点的方式...

# c++ - 使用宏和 C 样式字符串混合 C/C++

> ID：13875023
> 
> 赞同：2
> 
> 时间：2012-12-14T08:27:39.523
> 
> 标签：c++, c

```
gcc/g++ 4.7.2
CXXFLAGS -Wall -Wextra -g -O2 
```

你好，

我有这个使用 C 风格编写的头文件 (mu_test.h)。它包含以下马科斯

```
#define GET_ERROR() ((errno == 0) ? "None" : strerror(errno))

#define LOG_ERR(fmt, ...) fprintf(stderr, "[ERROR] %s:%d: errno: %s " fmt "\n", __func__, __LINE__, GET_ERROR(), ##__VA_ARGS__)

#define MU_ASSERT(test, msg) do {               \
        if(!(test)) {                           \
            LOG_ERR(msg);                       \
            return msg;                         \
        }                                       \
    } while(0) 
```

我有一个使用 g++ 编译的 cpp 文件 (floor_plan_src.cpp)，其中包括 mu_test.h

```
#include "mu_test.h"
char* test_memory_allocation()
{
    plan = new floor_plan();

    MU_ASSERT(plan != NULL, "Failed to allocate memory for floor_plan");

    return NULL;
} 
```

我收到这个警告：

```
deprecated conversion from string constant to ‘char*’ 
```

因此，我传递给类似函数的 marco 的字符串常量不喜欢它（C 字符串），因为我使用 g++ 编译了我的源代码。

我认为这个问题与混合 c/c++ 有关。

解决方案 1：用 extern "C" 包装 mu_test.h 中的所有宏

```
#ifdef __cplusplus
extern "C"
{
#endif /* _cplusplus */
#define GET_ERROR() ((errno == 0) ? "None" : strerror(errno))

#define LOG_ERR(fmt, ...) fprintf(stderr, "[ERROR] %s:%d: errno: %s " fmt "\n", __func__, __LINE__, GET_ERROR(), ##__VA_ARGS__)

#define MU_ASSERT(test, msg) do {               \
        if(!(test)) {                           \
            LOG_ERR(msg);                       \
            return msg;                         \
        }                                       \
    } while(0)
#ifdef __cplusplus
}
#endif /* __cplusplus */ 
```

解决方案 1 仍然给了我同样的警告。

解决方案2：将头文件包装在 floor_plan_src.cpp 中

```
extern "C" {
#include "mu_test.h"
} 
```

解决方案 2 仍然给了我同样的警告

解决方案3：包装函数

```
extern "C" char* test_memory_allocation()
{
    plan = new floor_plan();

    MU_ASSERT(plan != NULL, "Failed to allocate memory for floor_plan");

    return NULL;
} 
```

方案3同上

解决方案 4：尝试将常量字符串转换为非 const char*

```
MU_ASSERT(plan != NULL, (char*)"Failed to allocate memory for floor_plan"); 
```

给出了以下错误：

```
 expected primary-expression before char
"[ERROR] %s:%d: errno: %s " cannot be used as a function 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:39:01.790

问题是您`test_memory_allocation`可能会返回一个字符串文字，并且您不应该将字符串文字衰减为 non-const `char*`：它在 C++ 中是允许的，但仍然不推荐使用。

您的代码扩展为：

```
char* test_memory_allocation()
{
    plan = new floor_plan();

    do {
        if(!(plan != NULL)) {
            LOG_ERR("Failed to allocate memory for floor_plan")
            return "Failed to allocate memory for floor_plan";
        }
    } while(0);

    return NULL;
} 
```

要修复它，您只需要`test_memory_allocation`返回 a `const char*`，否则您可以返回一个指向可能衰减为非常量的指针`char*`（例如静态`char`数组或堆分配的内存区域）。

`extern "C"`只需要避免 C++ 名称修改，它只影响函数，而不影响宏。

# makefile - 为什么 `config.log` 包含错误时`configure` 不会失败？

> ID：13875028
> 
> 赞同：1
> 
> 时间：2012-12-14T08:27:46.183
> 
> 标签：makefile, configure, automake

在[我尝试编译 GCC](https://stackoverflow.com/a/13874779/321973)时，我注意到虽然`./configure`不会产生错误消息并返回错误代码 0，但仍然存在登录错误`config.log`，这些错误稍后会导致`make`失败。那么，为什么还没有`configure`失败呢？还是以后`make`修改`config.log`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:10:02.913

`config.log`包含所有`configure`探针的输出。其中一些预计会失败。例如，Autoconf 经常探测特定功能的几种不同可能的替代实现，其中一些可能会失败，具体取决于系统的特性。

因此，`configure.ac`如果结果不可行，则由 Autoconf 脚本的作者明确失败配置步骤。有些人在编写他们的文件时`configure.ac`会这样做，而有些人则不会。有时在配置时很难知道一组特定的结果是否可行。还有一个合理的论点是，在构建过程中诊断问题比稍后发出错误消息`configure`并让人们搜索`config.log`细节更容易。如果问题相对模糊，情况尤其如此。

简短的回答是，这`configure`并没有失败，因为编写您正在运行的配置脚本的人没有将它编程为因您所看到的特定错误而失败，出于某种原因。

# java - 如何获取使用特定注释注释的对象的所有字段和属性？

> ID：13875029
> 
> 赞同：9
> 
> 时间：2012-12-14T08:27:48.883
> 
> 标签：java, reflection

如何在不遍历其**所有**字段或属性描述符的情况下获取使用特定注释注释的对象（不是类）的所有字段和属性？

我的目标是避免对显然甚至没有注释的每个字段或属性进行不必要的迭代，例如 getClass() 或不是实例的字段或成员变量的类的任何字段。

还是迭代是唯一的出路？没有其他更好的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T08:33:24.417

您可以使用为您完成所有工作的[反射包](http://code.google.com/p/reflections/)。项目描述：

> Reflections 扫描您的类路径，索引元数据，允许您在运行时查询它，并且可以为项目中的许多模块保存和收集该信息。
> 
> 使用反射，您可以查询元数据，例如：
> 
> *   获取某种类型的所有子类型
> *   获取所有带有一些注释的类型/方法/字段，没有注释参数匹配
> *   获取匹配正则表达式的所有资源

* * *

## 例子：

```
 Reflections reflections = new Reflections("my.project.prefix");

 Set<Class<? extends SomeType>> subTypes = 
           reflections.getSubTypesOf(SomeType.class);

 Set<Class<?>> annotated = 
           reflections.getTypesAnnotatedWith(SomeAnnotation.class);

 Set<Class<?>> annotated1 =
           reflections.getTypesAnnotatedWith(new SomeAnnotation() {
                public String value() { return "1"; }
                public Class<? extends Annotation> annotationType() { 
                    return SomeAnnotation.class; 
                }
            }); 
```

# wpf - 如何动态地将 Image 控件绑定到 ListBox？

> ID：13875031
> 
> 赞同：0
> 
> 时间：2012-12-14T08:27:58.050
> 
> 标签：wpf, wpf-controls

我想实现一个 ListBox，其中每个项目都包含一个 Image 控件和一些其他控件，然后用它来绑定一些数据。由于这个 ListBox 需要包含 2000 多个项目，这意味着我必须对其进行一些优化。

首先，我注意到大多数图像控件都有一个相同的图片（默认头像），所以我为数据创建了一个单一的 ImageSource 对象。但是虽然 Image 控件的源是同一个对象，但你知道我还需要在 ListBox 中创建 2000 个 Image 控件，下面是 DataTemplate：

```
 <ListBox ItemsSource="{Binding Items}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <Image Source="{Binding Avatar}" />
                            <TextBlock Text="{Binding Name}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

有没有办法减少我程序中图像控件对象的数量？谢谢！

# jquery - 需要 jquery/backbone 框架来进行基于表单的数据编辑

> ID：13875032
> 
> 赞同：0
> 
> 时间：2012-12-14T08:28:03.387
> 
> 标签：jquery, json, backbone.js

我发现 SlickGrid [https://github.com/mleibman/SlickGrid](https://github.com/mleibman/SlickGrid)对于查看和编辑表格数据非常有用。有没有类似的东西适用于基于表单的数据？我想敲掉一些脚手架来编辑从休息服务交付的数据，我不想重新发明轮子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:34:41.807

（创造性地命名的）[骨干形式](https://github.com/powmedia/backbone-forms)项目似乎非常符合要求。我没有个人经验，但根据文档，它似乎很有希望。

# java - Oracle 数据库返回的字符串与 MySql 不同

> ID：13875033
> 
> 赞同：0
> 
> 时间：2012-12-14T08:28:04.893
> 
> 标签：java, mysql, string, oracle

我在 Java 中有一个模式匹配代码，它从数据库中获取模式当我使用 mysql 数据库做 JUnit 时，一切都变得非常酷

```
Original Pattern in database 
[a-zA-Z]{1}[0-9]{2}[a-zA-Z]{3}[0-9]{5}_[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}\\.csv
Mysql is retruning as expected and as it's stored.
Oracle is returning with extra backslashes 
[a-zA-Z]{1}[0-9]{2}[a-zA-Z]{3}[0-9]{5}_[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}\\\\.csv 
```

为什么它返回不同。在我使用休眠来获取数据之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:16:31.000

在 MySQL 中，`\`是字符串的转义字符，但在 Oracle 中并非如此。这意味着此插入对它们中的每一个都有不同的作用：

```
INSERT INTO PATTERNS (ID, VALUE) VALUES (1, '\\\\'); 
```

这将插入`\\`MySQL 但`\\\\`在 Oracle 中。如果只想`\\`在 Oracle 中插入，则必须将插入更改为：

```
INSERT INTO PATTERNS (ID, VALUE) VALUES (1, '\\'); 
```

# javascript - 传递多个字段并显示在文本字段上

> ID：13875037
> 
> 赞同：-2
> 
> 时间：2012-12-14T08:28:39.777
> 
> 标签：javascript, jquery

参考[SOF 问题的](https://stackoverflow.com/questions/9904274/jquery-get-value-from-multiple-fields-and-show-in-text-field)答案，我想得到一个修复，以便在页面加载后（在用户的个人资料页面上）自动将选择的选项值传递给目标字段。

我也想知道在失去焦点之前触发文本字段上的更改方法。

[jsFiddle 上的示例](http://jsfiddle.net/e2ScF/46/)

```
$(function () {
    $("#options").change(function () {
        setTarget(); // Something has changed so lets rebuild the target
    });
    $("#options2").change(function () {
        setTarget(); // Something has changed so lets rebuild the target
    });
});

// Just get the values you want and update the target
function setTarget() {
    var tmp = $("#options").val();
    tmp += $("#options2").val();
    $('#targetTextField').val(tmp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:44:36.860

1.  要在页面加载时传递选定的选项值，请在您的`$`函数中添加此事件：

    ```
    $(function () {
        ...

        // Add it here
        setTarget();
    }); 
    ```

2.  对于传输到值的文本字段的更改，请使用`keyup`event 而不是`change`：

    ```
    $(function () {
        ...

        $("#options3").keyup(function () {
            setTarget(); // Text has changed
        });

        ...
    }); 
    ```

看到这个小提琴：http: [//jsfiddle.net/scaillerie/e2ScF/49/](http://jsfiddle.net/scaillerie/e2ScF/49/)

# c# - 将 PrivateFontCollection 添加到 RichTextBox

> ID：13875044
> 
> 赞同：1
> 
> 时间：2012-12-14T08:29:20.823
> 
> 标签：c#, fonts, privatefontcollection

我正在尝试将嵌入式资源字体更改为我的 RichTextBox。但它不工作。它适用于标签，但不适用于我的富文本框。将字体更改为richtextbox 后，我在控制台中写出了我的richtextbox 的字体名称，它拼出了正确的名称，但它并没有改变屏幕上的字体。

这是我的代码

```
//define a private font collection
System.Drawing.Text.PrivateFontCollection pfc = new System.Drawing.Text.PrivateFontCollection();
//read your resource font into a byte array
byte[] Bytes = Properties.Resources.BRAILLE11;
//allocate some memory and get a pointer to it
IntPtr ptr = System.Runtime.InteropServices.Marshal.AllocCoTaskMem(Bytes.Length);
//copy the font data byte array to memory
System.Runtime.InteropServices.Marshal.Copy(Bytes, 0, ptr, Bytes.Length);
//Add the font to the private font collection
pfc.AddMemoryFont(ptr, Bytes.Length);
//free up the previously allocated memory
System.Runtime.InteropServices.Marshal.FreeCoTaskMem(ptr);
//define a font from the private font collection
System.Drawing.Font fnt = new System.Drawing.Font(pfc.Families[0], 16f, System.Drawing.FontStyle.Regular, GraphicsUnit.Point);
//dispose of the private font collection
pfc.Dispose();

//return the font created from your font resource
richTextBoxEditor.Font = fnt;
lblStatus.Font = fnt;

Console.Write(richTextBoxEditor.Font.Name);

fnt.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:56:10.623

是`Properties.Resources.BRAILLE11`文件`.bin`还是`.ttf`文件？

查看这些链接：

1.  [将字体嵌入到应用程序中](http://www.emoreau.com/Entries/Articles/2007/10/Embedding-a-font-into-an-application.aspx)
2.  [与阿姆哈拉语押韵（又名嵌入一点早餐怎么样，亲爱的？）](http://www.siao2.com/2007/04/14/2128198.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:10:35.367

我认为富文本框可以在单个文本框中包含多种字体的文本，例如粗体、斜体和其他字体。所以你必须首先选择所有文本。看。[http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont.aspx)

# php - smarty 模板 - 在 url 中传递 javascript 变量

> ID：13875048
> 
> 赞同：2
> 
> 时间：2012-12-14T08:29:38.373
> 
> 标签：php, javascript, smarty, fullcalendar

我是 smarty 模板的新手，我添加了日历，我只想将日历的日期传递到其他页面。

例如：
当用户点击`24-12-2012`日期时，我需要一个类似以下格式的网址：
`eventpost.php?ed=24-12-2012`

我有 calendar.tpl 文件：

```
$('#calendar').fullCalendar({
    dayClick: function (date, allDay, jsEvent, view) {
        var myJsDate = date;
        var dispDate = myJsDate.getDate() + '-' + (myJsDate.getMonth() + 1) + '-' + myJsDate.getFullYear(); // 24-12-2012
        var det = dispDate
        $("#currentDate").val(dispDate);
        $('#offDayPopUp').dialog({
            autoOpen: true,
            modal: true,
            resizable: false,
            width: 300,
            height: 180,
            draggable: false
        });
        $('#calmonth_' + myJsDate.getMonth()).addClass('cal_month_active');
    }, 
```

**HTML：**

```
<div id="offDayPopUp" class="offDayDialog" title="Create Event,Commitment,Visiting Area.">
    <div class="CrateDiv">
        <div style="float:left; padding-right:10px;"><b>Date :</b></div>
        <div><input type="text" name="currentDate" id="currentDate" readonly="readonly" /></div>
        <ul>
            <li><a href="{$cfgRoot}/event/eventPost.php"><b>Create A New Event.</b></a></li>
            <li><a href="{$cfgRoot}/commitment/commitment.php"><b>Create A New Commitment.</b></a></li>
            <li><a href="{$cfgRoot}/area/areaPost.php"><b>Create A New Visiting Area.</b></a></li>
        </ul>
    </div>
</div> 
```

我只想将该日期从 JavaScript 传递到 url，例如：

```
eventPost.php?ed=24-12-2012
commitment.php?ed=24-12-2012
areaPost.php?ed=24-12-2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:47:45.327

跟随丹麦 hasmi 使用 PHP 的可能性，最好像这样使用 PHP。Javascript 并不打算用于可以在服务器端完成的数据操作。

```
//[...]
<li><a href="{$cfgRoot}/event/eventPost.php?ed={php}echo date('d-m-Y',mktime());{/php}"><b>Create A New Event.</b></a></li>
//[...] 
```

请参阅[php.net](http://php.net/manual/de/function.mktime.php)上的 mktime 以调整 mktime 参数并将其设置在您想要的日期。

**//更新**

尽管使用 PHP 更有意义，但为了您的利益，这就是您在 Javascript 中执行此操作的方式。

```
$('#calendar').fullCalendar({
    dayClick: function (date, allDay, jsEvent, view) {
        var myJsDate = date;
        var dispDate = myJsDate.getDate() + '-' + (myJsDate.getMonth() + 1) + '-' + myJsDate.getFullYear(); // 24-12-2012

        $(".CrateDiv > ul").find("li").each(function() {
           var atmhref = $("a",this).attr("href");
           $("a",this).attr("href",atmhref+"?ed="+dispDate);
        });
        //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:48:10.933

试试这种方式，您可以使用 onclick 事件并使用 Javascript 函数传递选定的日期

```
<script>
 {literal}
 function golink(type) {
   var selecteddate = $("#currentDate").val();
   if(type=='event'){
       location.href="http://www.mysite.com/event/eventPost.php?ed="+selecteddate;
    }
   if(type=='commitment'){
       location.href="http://www.mysite.com/commitment/commitment.php?ed="+selecteddate;
    }
  if(type=='area'){
       location.href="http://www.mysite.com/area/areaPost.php?ed="+selecteddate;
    }
 }
  {/literal}
</script>

<div id="offDayPopUp" class="offDayDialog" title="Create Event,Commitment,Visiting Area.">
    <div class="CrateDiv">
        <div style="float:left; padding-right:10px;"><b>Date :</b></div>
        <div><input type="text" name="currentDate" id="currentDate" readonly="readonly" /></div>
        <ul>
            <li><a href="#" onclick="golink('event')"><b>Create A New Event.</b></a></li>
            <li><a href="#" onclick="golink('commitment')"><b>Create A New Commitment.</b></a></li>
            <li><a href="#" onclick="golink('area')"><b>Create A New Visiting Area.</b></a></li>
        </ul>
    </div>
</div> 
```

# python - Python 排名和列表

> ID：13875049
> 
> 赞同：0
> 
> 时间：2012-12-14T08:29:39.433
> 
> 标签：python, rank

我有这个脚本，假设根据数字对水果进行排名。

```
#! /usr/bin/python
fruits = {'Apple':1,'Banana':2,'Pineapple':3}
alist = [(v, k) for k, v in fruits.items()]
alist.sort(reverse=False)
fruit_order = str(alist).translate(None, "[]()'123456789").replace(", , ",    "    ,     ",").replace(" ", "")[1:]
print fruit_order 
```

水果实际上是一个用 .append(fruits) 检查组成的列表

```
#! /usr/bin/python
import re
from configobj import ConfigObj
config = ConfigObj('sites.conf')
fruits = []

substance = "juice"
target_list = config['MainConfig']['fruits']
for target in target_list:
  if re.search( config[target]['Skiplist'], substance, re.M|re.I):
     target = target + "'" + ":" + config[target]['Rank'] + ","
     fruits.append(target)
  else:
   print "Dident pass"
fruits1 = "{'" + "'".join(fruits) + "}"
alist = [(v, k) for k, v in fruits1.list()]
alist.sort(reverse=False)
fruit_rank = str(alist).translate(None, "[]()'123456789").replace(", , ", ",").replace(" ", "")[1:] 
```

示例 2 中的 print fruit_rank 打印出与示例 1 中的 test 完全相同的行。

但是我仍然在 example2 上遇到错误，AttributeError: 'str' object has no attribute 'list'

我无法真正弄清楚这一点。我该怎么做？

我正在寻找的是在配置文件中我对每个水果都有一个等级，该行应该打印出它的等级中的水果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:42:48.010

```
fruits = {'Apple': 1,'Banana': 2,'Pineapple': 3}
print ','.join(sorted(fruits, key=fruits.get)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:50:25.240

您应该使用内置函数`sorted`，并指定您希望按排名而不是名称本身进行排序。对于您的第一个示例，这就是我要做的。它按值（它们的等级）对字典的键（水果名称）进行排序。

```
fruits = {'Apple':1,'Banana':2,'Pineapple':3}
sorted_keys = sorted(fruits.keys(), key=lambda k: fruits[k]) 
```

您的第二个示例很难阅读。我建议您对如此复杂的代码进行注释。

看起来您正在尝试创建一个包含 Python 代码的字符串，然后执行该代码。就像一个`eval`声明。这不是好的编程习惯。您将需要执行以下操作：

```
fruits = {} # create dict
for line in my_file.readlines():
    fruit_name, rank = function_to_parse_line(line)
    fruits[fruit_name] = rank
sorted_keys = sorted(fruits.keys(), key=lambda k: fruits[k]) 
```

现在，读取数据的代码和排序数据的代码之间有了很好的分离。如果你想从不同类型的文件中读取数据，你可以重新定义`function_to_parse_line`.

# regex - Notepad++ 正则表达式替换 print( stuff ); 有回声的东西；

> ID：13875053
> 
> 赞同：0
> 
> 时间：2012-12-14T08:30:02.477
> 
> 标签：regex, notepad++

我正在尝试用正则表达式替换 notpad++，但我不知道该怎么做。

搜索：打印（**忽略这些东西**）；

替换：回显**忽略的东西**；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:39:12.597

只需找到：-

```
print\((.*)\) 
```

用。。。来代替 ：-

```
echo \1 
```

编辑2：

1.  使用**.* 匹配任意内容**
2.  使用**括号来记住匹配的内容**，以便您以后参考
3.  使用**\1、\2 等来指代**在第一组括号、第二组括号内捕获的内容，依此类推。

编辑1：

## 我喜欢记事本++ :)

# ruby-on-rails - 在 bash 中读取错误消息

> ID：13875054
> 
> 赞同：1
> 
> 时间：2012-12-14T08:30:09.853
> 
> 标签：ruby-on-rails, bash, jruby

我正在尝试运行一项`jruby -S rake db:migrate`操作。

这会导致一个错误，该错误超出了我的 bash 终端所包含的行数，因此我看不到最相关的行，并且我遇到了大约 1000 行：

```
....
org/jruby/runtime/Block.java:89:in `call'
org/jruby/RubyProc.java:261:in `call'
org/jruby/RubyProc.java:249:in `call19'
org/jruby/RubyProc$INVOKER$i$0$0$call19.gen:-1:in `call'
org/jruby/internal/runtime/methods/DynamicMethod.java:216:in `call'
org/jruby/internal/runtime/methods/DynamicMethod.java:212:in `call'
org/jruby/runtime/callsite/CachingCallSite.java:202:in `call'
org/jruby/ast/CallTwoArgNode.java:59:in `interpret'
.... 
```

我试过`jruby -S rake db:migrate > migrate.out`了，但错误消息仍然出现在我的终端上，内容`migrate.out`是

```
==  ChangeFieldsOnFoo: migrating ========================================
-- remove_column(:foos, :bar) 
```

当然必须有一种方法可以阅读此错误消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:34:34.887

使用[`stderr`](https://stackoverflow.com/tags/stderr/info)( `2`) 到[`stdout`](https://stackoverflow.com/tags/stderr/info)( `1`)`2>&1`并`|`通过“寻呼机”将输出( ) 连接到 ( )，[`less`](http://www.gnu.org/software/less/)以便将其保留在屏幕上，直到您完成它：

```
jruby -S rake db:migrate 2>&1 | less 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:34:35.573

试试这个：`jruby -S rake db:migrate >> migrate.out 2>&1` 这将重定向`stdout`到`stderr`一个文件。

# iphone - if 语句不能正常工作

> ID：13875058
> 
> 赞同：-4
> 
> 时间：2012-12-14T08:30:32.323
> 
> 标签：iphone, objective-c, ios, if-statement

这是我的代码：

```
NSString * atime = [NSString stringWithFormat:@"%@",[theDataObject.minuteArray objectAtIndex:indexPath.row]];

NSLog(@"value of atime is:%@",atime);

if (atime==@"0") {

    NSString * timeStr = [NSString stringWithFormat:@"%@s",[theDataObject.secondArray objectAtIndex:indexPath.row]];

    cell.timeLabel.text = timeStr;
}
else {
    NSString * timeStr = [NSString stringWithFormat:@"%@m%@s",[theDataObject.minuteArray objectAtIndex:indexPath.row],[theDataObject.secondArray objectAtIndex:indexPath.row]];

    cell.timeLabel.text = timeStr;
} 
```

但它永远不会返回第一个语句只返回第二个语句，即使是 atim 值是 0。

日志值：

```
MyAudioRecorder[2484:10703] value of atime is:0 
```

也试过把 0 代替 @"0"，还是不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:32:13.137

尝试以下操作：

```
if ([atime isEqualToString : @" "]) {} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T08:41:49.277

```
if (atime==@"0") 
```

**将 的内存地址**`atime`与常量字符串的地址进行比较`@"0"`。

```
if ([atime isEqualToString:@"0"]) 
```

比较存储在两个内存位置中的**值。**

从您的要求可以看出，您想要比较的不是内存位置的值。所以去第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:33:29.060

**isEqualToString:** ->

```
- (BOOL)isEqualToString:(NSString *)aString 
```

返回一个布尔值，该值指示给定字符串是否等于使用**基于 Unicode 的文字比较的接收者。**

**讨论**-> 当此方法比较两个字符串时，如果各个 Unicode 相同，则字符串相等

有关更多信息，您可以访问苹果 [NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
if([atime isEqualToString:@"0"])
{
}
else
{
} 
```

# email - 取消订阅电子邮件营销中的链接

> ID：13875060
> 
> 赞同：0
> 
> 时间：2012-12-14T08:30:40.213
> 
> 标签：email, html-email, spam

刚刚注册了第三方电子邮件营销提供商，当我提供模板时，他们给了我一个小标签，他们用用户特定的退订链接代替。

我担心该链接是单击链接，没有后续确认，等等。虽然我很容易删除，但我担心恶意软件扫描程序、反病毒引擎、垃圾邮件扫描程序的任何组合都会跟随链接并因此退订很多合法用户。

这是让单个 HTTP GET 请求取消订阅用户的规范吗？其他开发人员如何处理此问题？

注意：有问题的提供者是 critsend

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:33:48.403

有趣的问题。这不是常态。但这在谨慎的电子邮件服务提供商中很常见。例如，MailChimp 还为他的免费增值用户提供一键退订。我也不是那个的忠实粉丝。（我更喜欢预先填写的表单字段，用户通过单击“提交”确认他希望取消订阅。）但是，直到现在我没有看到使用 1-click-unsub 的任何问题。

仅供参考，[这](http://blog.wordtothewise.com/2011/08/a-disturbing-trend/#comment-11218)是针对类似主题的讨论（误报双重选择确认）。您可能还想查看[这篇文章](http://www.smartinsights.com/email-marketing/email-marketing-analytics/why-robots-can-ruin-your-email-split-testing-results/)和[这个讨论](http://www.emailmarketersclub.com/forum/topics/email-security-suite-affecting)（需要论坛注册）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T20:21:55.100

一旦单击该规范，它就会进入一个表单，您可以单击一个按钮来确认删除。奇怪的是，甚至可以单击一下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T01:20:20.323

就 HTTP 而言，任何更改 HTTP GET 请求的副作用都是不合格的。特别是，请参阅[RFC 2616，第 9.1.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.1)：

> 特别是，已经建立了约定，即 GET 和 HEAD 方法不应该具有采取除检索之外的操作的意义。这些方法应该被认为是“安全的”。这允许用户代理以特殊的方式表示其他方法，例如 POST、PUT 和 DELETE，以便用户意识到正在请求可能不安全的操作。

将实际取消订阅放在表单提交之后以导致 POST 会更标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:49:53.830

我知道 Campaign Monitor 已经内置了捕获非用户退订的程序。不确定 critsend。

# sql - 通过工作无法获得订单

> ID：13875061
> 
> 赞同：0
> 
> 时间：2012-12-14T08:30:40.637
> 
> 标签：sql, sql-server-2005

我有这个查询：

```
 EDITED 
```

问题是执行查询后出现此错误：

> *关键字“union”附近的语法不正确。*

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:39:42.370

如果您查看以下[文档](http://msdn.microsoft.com/en-us/library/ms180026.aspx)：

```
C. Using UNION of two SELECT statements with ORDER BY 
```

你会看到你不能在第一个查询中使用**ORDER BY 。**

请记住：

*   number 和列的顺序在所有查询中必须相同。
*   数据类型必须兼容。

# mysql - SQL：MySQL 中的 GROUP BY 问题

> ID：13875062
> 
> 赞同：3
> 
> 时间：2012-12-14T08:30:42.133
> 
> 标签：mysql, sql, select, group-by

这是数据库表

```
╔════╦═════════════╦══════════════════╦═══════╗
║ id ║ customer_id ║    last_seen     ║ param ║
╠════╬═════════════╬══════════════════╬═══════╣
║  1 ║       12345 ║ 2012-08-01 12:00 ║     1 ║
║  2 ║       22345 ║ 2012-08-01 12:00 ║     1 ║
║  3 ║       32345 ║ 2012-08-01 12:00 ║     1 ║
║  4 ║       42345 ║ 2012-08-01 12:00 ║     1 ║
║  5 ║       52345 ║ 2012-08-01 12:00 ║     1 ║
║  6 ║       12345 ║ 2012-09-01 12:00 ║     2 ║
║  7 ║       12345 ║ 2012-10-01 12:00 ║     3 ║
╚════╩═════════════╩══════════════════╩═══════╝ 
```

其中`id`是 AUTO INCREMENT 主键。

我想要实现的是获取每个`customer_id`. 预期结果 ：

```
╔════╦═════════════╦══════════════════╦═══════╗
║ id ║ customer_id ║    last_seen     ║ param ║
╠════╬═════════════╬══════════════════╬═══════╣
║  2 ║       22345 ║ 2012-08-01 12:00 ║     1 ║
║  3 ║       32345 ║ 2012-08-01 12:00 ║     1 ║
║  4 ║       42345 ║ 2012-08-01 12:00 ║     1 ║
║  5 ║       52345 ║ 2012-08-01 12:00 ║     1 ║
║  7 ║       12345 ║ 2012-10-01 12:00 ║     3 ║
╚════╩═════════════╩══════════════════╩═══════╝ 
```

我试过这个 SQL，但它返回不正确的结果：

```
SELECT customer_id, param, last_seen 
FROM `my_table` 
GROUP BY customer_id 
ORDER BY last_seen DESC 
```

我在这里想念什么？

**更新**：表结构（输出`DESC my_table`）

```
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| customer_id  | varchar(8)   | NO   |     | NULL    |                |
| last_seen    | datetime     | NO   |     | NULL    |                |
| param        | int(11)      | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T08:32:36.350

子查询背后的想法是它分别获取`last_seen`每个`Customer_ID`. 如果必须满足条件，则子查询的结果将与原始表连接：`CustomerID`日期*必须*相互匹配。

```
SELECT  a.*
FROM    Customer a
        INNER JOIN
        (
            SELECT Customer_ID, MAX(last_seen) maxDate
            FROM Customer
            GROUP BY Customer_ID
        ) b ON a.Customer_ID = b.Customer_ID AND
                a.last_seen = b.maxDate
ORDER BY a.ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/43acb/1)

*追问：能否请您检查一下`last_seen`记录id的值`6`是否正确？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:45:15.737

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/7c4ee/4)

在 MySQL 中，您可以这样做：

```
select ID,CUSTOMER_ID,LAST_SEEN,PARAM from
(
   select t.*,
       if(@i=customer_id,0,1) isLast,
       @i:=customer_id 
       from `my_table` t,(select @i:=0) t1 
   order by customer_id,last_seen desc
) t2 where isLAst=1 
```

# matlab - Matlab GUI：动态更改弹出菜单

> ID：13875070
> 
> 赞同：4
> 
> 时间：2012-12-14T08:31:00.233
> 
> 标签：matlab, matlab-guide

我有一个`GUI`我想添加一个`popup menu`。`popup menu`应显示的字段保存在文件`targets.txt`中。

当我打开我的程序时，我希望`popup menu`包含上面提到的文件中的行。 **我这样做是因为我希望** `popup menu` **在程序中动态更改。由于它将包含用户在另一个字段中输入的目录路径，因此我将目录路径保存在一个文件中，并且每次用户输入一个文件夹时，我都会** `popup menu` **根据文件进行设置。**（我做到了，效果很好）

由于`function myFunction_OpeningFcn(hObject, eventdata, handles, varargin)`仅**在**调用 的`"create function"`每个组件之后才被调用`GUI`，因此我*无法*在程序中进行初始化`"opening function"`。相反，我不得不这样做：

```
function databaseMenu_CreateFcn(hObject, eventdata, handles)
if ispc&&isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end
handles.databaseMenuObject=hObject; % (1) see below
guidata(hObject, handles); 
```

**(1)**：我将弹出菜单对象保存在句柄中，以便在打开函数中使用它。

然后，在打开功能中，我可以这样做：

```
fid_r = fopen('targets.txt', 'r');
C = textscan(fid_r, '%s');
set(handles.databaseMenuObject,'String', C{1}); 
```

因此，当有人`"database"`在程序中添加新文件夹时，`popup menu` *更改*（我将用户选择的文件夹添加到文件中，然后我将其设置为`popup menu`从文件中获取其字段（上面的函数）。所以它'看起来像这样：

![用户进入两个文件夹后的程序](../Images/439044302c4988c612a82159d085f76d.png)

我不喜欢我的代码设计，我不知道如何以不同的方式做到这一点，有没有办法让程序`"create function"`的**被**`"popup menu"`调用？还是有更好的方法来实现我的目标？ **`"opening function"`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:37:00.513

好吧，我现在了解您想要实现的目标，尽管我不确定我是否了解问题，但希望这会有所帮助：

从描述来看，这似乎是事情发生的逻辑顺序：

1：初始化，只是初始化一切，你已经知道你会有一个下拉菜单但你还不知道内容。因此，只需从默认选项或空（可能不可见）开始。

2：更新，一旦用户保存新输入，您就更新列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:35:33.833

**背景**

一些可能有帮助的事情：

*   您可以根据需要在 GUI 中定义附加功能；您不仅限于定义的回调。
*   标记图形元素可以很容易地从任何回调中找到它们。
*   `gcbf`返回当前回调图。
*   `union`可以返回字符串元胞数组的并集。

**建议**

下面是我如何编写这样的函数。这将所有内容放在一个地方，可以从 GUI 中的任何位置调用该函数，它会自动更新缓存列表，并消除任何重复条目。

您将在初始化代码的末尾调用此代码，以及添加文件夹的回调。可以通过右键单击并在 GUIDE 中设置属性来设置*标签。*

```
updatePopupMenu()
  popupMenuHandle = findobj(gcbf,'Tag','myPopupMenuTag');
  popupMenuContents = get(popupMenuHandle,'String');

  % Initialization
  if isempty(popupMenuContests)
    fid_r = fopen('targets.txt', 'r');
    C = textscan(fid_r, '%s');
    popupMenuContents = C{1};
  end

  % Join
  otherFields = howeverYouGetFieldsFromOtherList();
  combinedContents = union(popupMenuContents, otherFields);

  % Save
  set(popupMenuHandle,'String', combinedContents);
  fid_w = fopen('targets.txt','w+');
  for i = 1:length(combinedContents)
    fprintf(fid_w,'%s\n',combinedContents{i}); 
  end
  fclose(fid_w);
end 
```**

# iphone - ViewControllers 之间的转换不起作用

> ID：13875075
> 
> 赞同：0
> 
> 时间：2012-12-14T08:31:13.290
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, viewcontroller

所以我得到了这个按钮，它带有一个`if`推送到`StartViewController`. 我`NSLog@"transition successful"`在`viewDidLoad`这个视图控制器中做了一个检查是否进行了转换。

在日志中显示转换成功，但在屏幕上未进行转换。

这是代码：

```
-(IBAction)initialButton:(id)sender {
    NSLog(@"initialButton clicked");

   if([userEmail.text length] <4)
   {
       [WCAlertView showAlertWithTitle:@"Email is empty" message:@"You haven't entered an email yet. Please enter one so we can sent you the shipping labels." customizationBlock:^(WCAlertView *alertView) {
           alertView.style = WCAlertViewStyleBlackHatched;
       } completionBlock:^(NSUInteger buttonIndex, WCAlertView *alertView) {
           if (buttonIndex == 0) {
               NSLog(@"Cancel");
           } else {
               NSLog(@"Ok");
           }
       } cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
   }
   else
   {

       StartViewController *startViewController = [[StartViewController alloc] init];
       self.transitionController = [[[TransitionController alloc] initWithViewController:startViewController] initWithNibName:@"StartViewController" bundle:nil];
       [initialViewController.view removeFromSuperview];
       self.window.rootViewController = self.startViewController;

   }

} 
```

这是日志：

```
2012-12-14 09:22:55.431 Janssenpakketapp[24165:c07] initialViewController loaded
2012-12-14 09:23:04.021 Janssenpakketapp[24165:c07] initialButton clicked
2012-12-14 09:23:06.116 Janssenpakketapp[24165:c07] Ok
2012-12-14 09:23:11.909 Janssenpakketapp[24165:c07] initialButton clicked
2012-12-14 09:23:11.911 Janssenpakketapp[24165:c07] transition succesful 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:39:11.933

新更新：这应该有效：

```
StartViewController *startViewController = [[StartViewController alloc] init];
    [[UIApplication sharedApplication].delegate.transitionController transitionToViewController:startViewController withOptions:UIViewAnimationOptionTransitionFlipFromRight]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:51:16.093

你想添加过渡动画然后使用下面的代码......

```
 StartViewController *startViewController = [[StartViewController alloc] init];
    self.window.rootViewController = self.startViewController;
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"]; 
```

# linux - nproc 和 ulimit 的区别？

> ID：13875081
> 
> 赞同：12
> 
> 时间：2012-12-14T08:31:24.477
> 
> 标签：linux, unix

Ulimit 和 nproc 都用于限制 *nix 系统中特定用户或应用程序的系统进程和资源（如果我错了，请纠正我）。两者的主要区别是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-14T08:36:26.587

`nproc`from`coreutils`打印处理器的数量。来自`man nproc`：

```
NPROC(1)                         User Commands                        NPROC(1)

NAME
       nproc - print the number of processing units available

SYNOPSIS
       nproc [OPTION]...

DESCRIPTION
       Print  the number of processing units available to the current process,
       which may be less than the number of online processors 
```

**但是，中的`nproc`设置`/etc/security/limits.conf`确实限制了进程的数量**：

来自`man limits.conf`：

```
 nproc
           maximum number of processes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:39:41.307

```
 both are used for limiting the system processes and resources 
```

如果您指的是[**limits.conf**](https://linux.die.net/man/5/limits.conf)中的nproc 参数，那么是的，它用于限制进程数。

shell 实用程序[**ulimit**](http://man7.org/linux/man-pages/man1/ulimit.1p.html)也用于获取/设置资源的限制。例如，获取每个进程的堆栈大小：

```
$ulimit -s 
```

将堆栈大小更改为 1MB：

```
$ulimit -s 1024 
```

将堆栈大小更改为`unlimited`：

```
$ulimit -s unlimited 
```

`/etc/security/limits.conf`` and`通过ulimit设置/更改资源没有区别。

但是，shell 实用程序`ulimit`更改仅适用于当前 shell。但是 /etc/security/limits.conf 更改将适用于所有指定用户的系统范围。此外 /etc/security/limits.conf 通常只能由特权用户更改。

但`ulimit`不需要特权。

所以你可以把`ulimit`资源限制想成*只为你*临时更改，你可以自己更改；而`/etc/security/limits.conf`用于系统范围的设置（对于一个或多个用户），您通常无法更改（通常您的系统管理员会设置资源限制，如果有的话）。

* * *

而`nproc(1)`utliity 则完全不同，它只列出了可用的处理器数量。

# jquery - 在 Spring MVC 应用程序中使用静态 HTML 模板发送电子邮件

> ID：13875082
> 
> 赞同：0
> 
> 时间：2012-12-14T08:31:36.380
> 
> 标签：jquery, spring, spring-mvc

我在基于 Spring MVC 3 的应用程序中要求将交易详细信息发送给客户和企业，并定期向客户发送新闻通讯。我知道如何使用 Spring 发送电子邮件，因为我对创建电子邮件 HTML 正文的方式感到困惑。我找到了一个像 www.thymeleaf.org 这样的解决方案，但不确定它是否有效。

我可以使用邮件黑猩猩之类的服务来发送时事通讯，但我必须有一个内部解决方案来在每次翻译后发送电子邮件。有人可以指导我如何使用静态 HTML 模板创建动态电子邮件，这些模板可以快速填充值并作为电子邮件发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:48:54.873

如果需要更多功能（如循环、if 测试等），您可以只使用`String.format()`, 或，请使用 FreeMarker 或 Velocity。`MessageFormat.format()`

# ruby - 正则表达式：替换单个字符

> ID：13875084
> 
> 赞同：0
> 
> 时间：2012-12-14T08:32:00.497
> 
> 标签：ruby, regex

如果它是单独存在的，我需要将“\n”字符替换为“”。

我有一个字符串，如： **“Hello\n Stack\n\n\nover\nflow”**

它应该替换为： **“Hello Stack\n\n\nover flow”**

我试过像这样的红宝石：

```
> "Hello\n Stack\n\n\nover\nflow".gsub(/\n(?![\n])/, " ")
=> "Hello  Stack\n\n over flow" 
```

但它节省了一个额外的“\n”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:33:54.833

我猜你需要类似的东西`/(?<!\n)\n(?!\n)/`。`\n`检查匹配之前或之后是否没有。

感谢@JohnySkovdal 的更正

# .net - .net 将 List(Of Point) 转换为 PointF

> ID：13875085
> 
> 赞同：1
> 
> 时间：2012-12-14T08:32:02.523
> 
> 标签：.net, vb.net, drawing

是否可以将点列表转换为 PointF？

从：

```
Dim _Points As List(Of Point) 
```

到：

```
Dim p() As PointF = {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:34:14.420

在 c# 中它看起来像这样

```
_Points.Select(p=>new PointF(p.X, p.Y)).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:40:17.457

您可以在 中使用`Cast`运算符[`ConvertAll`](http://msdn.microsoft.com/en-us/library/73fe8cwf.aspx)。但我也会使用`List(Of T)`：

```
Dim _Points As New List(Of Drawing.Point)
' fill the list 
Dim pointFs As List(Of Drawing.PointF) 
pointFs = _Points.ConvertAll(Function(p) CType(p, Drawing.PointF)) 
```

如果你真的需要一个数组：

```
Dim pArray = pointFs.ToArray() 
```

# android-activity - Actionbar 和 ListActivity 在一个 Activity 中

> ID：13875090
> 
> 赞同：2
> 
> 时间：2012-12-14T08:32:29.757
> 
> 标签：android-activity, android-actionbar, listactivity

我有一个程序，它显示 SDCARD 目录中的文件列表，当用户单击文件时，它会打开 PDF。例如，一项活动将显示一个文件夹的内容。

我一直想添加 ActionBar 进行导航，并且可以让 ActionBar 在它自己的活动中工作，我的 ListActivity 在它自己的活动中工作，但是我不能让它们一起工作。

我不知道如何将两者结合起来，以便我最终得到一个在一个活动中显示操作栏和文件列表的活动？

Actionbar Activity 以

```
public class SecondActivity extends FragmentActivity implements ActionBar.OnNavigationListener { 
```

显示可点击列表的 Activity 以

```
public class MainActivity extends ListActivity { 
```

我的 android 应用程序编程非常基础并且是自学的，所以我可能遗漏了一些明显的东西。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T00:00:55.253

我发布了一个替代解决方案，[将 List 和 ActionBar 的关注点分开](https://stackoverflow.com/a/22493553/1798991)。使代码更整洁 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:24:45.160

我认为您可以将您的类扩展到`ListActivity`并覆盖方法`onCreateOptionsMenu`以将您的操作栏绑定到活动：

```
public class MainActivity extends ListActivity {
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.your_action_bar_name_here, menu);

        return (super.onCreateOptionsMenu(menu));
    }

    // your other methods
} 
```

# jsf-2 - jsf数据表中行的图像分隔符

> ID：13875092
> 
> 赞同：1
> 
> 时间：2012-12-14T08:32:46.283
> 
> 标签：jsf-2

我想有条件地在行之间显示一条线/图像作为分隔符（如此处所示 - 附加图像），我不知道如何实现这一点，请建议，这是我为复制实际场景而编写的示例，

```
<h:panelGrid columns="1" >
<h:dataTable value="#{testBean.myBeanList}" var="myBean">
<h:column>
<f:facet name="header">  
<h:outputText value="EMPLOYEE NAME"  />  
</f:facet>
<h:outputText value="#{myBean.empName}"/>
</h:column>
<h:column>
<f:facet name="header">  
<h:outputText value="EMPLOYEE DEPARTMENT"  />  
</f:facet>
<h:outputText value="#{myBean.empDept}"/>
</h:column>
<h:column>
<f:facet name="header">  
<h:outputText value="EMPLOYEE HR NAME"  />  
</f:facet>
<h:outputText value="#{myBean.empHRName}"/>
</h:column>
</h:dataTable>
</h:panelGrid>

public TestBean() {
myBeanList = new ArrayList<MyBean>();
for(int i =0;i<8;i++){
MyBean mb = new MyBean();
if(i == 2 || i == 4){
mb.setEmpName("NAME"+i);
}else{
mb.setEmpName("EMPLOYEE NAME"+i);
mb.setEmpDept("EMPLOYEE DEPT"+i);
mb.setEmpHRName("EMPLOYEE HR NAME"+i);
}
myBeanList.add(mb);
}
} 
```

![在此处输入图像描述](../Images/9657ccd9c463afd3cd57bafa250bcf2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:05:21.253

使用 的`rowClasses`属性`<h:dataTable>`。它需要一个以逗号分隔的 CSS 类名字符串，这些类名将应用于后续生成的`<tr>`元素。然后，您可以使用 CSS 在相关单元`<td>`格`<tr>`（

```
<h:dataTable ... rowClasses="#{bean.rowClasses}"> 
```

在填充数据模型的同时，您还应该填充行类。对于屏幕截图中的特定示例，它应该返回如下内容：

```
none,none,separator,none,separator,none,none,none 
```

然后你只需要提供必要的 CSS：

```
tr.separator td {
    border-top: 1px solid gray;
} 
```

不需要丑陋和老式的分隔符图像。

# r - 比较 R OR PostgreSQL 中两个时间序列数据集的趋势

> ID：13875094
> 
> 赞同：0
> 
> 时间：2012-12-14T08:32:55.307
> 
> 标签：r, compare, design-patterns, trend

我有两个时间序列数据集，我想根据它们的模式比较它们。

P29：数据集 1：

```
 temperature  Data_Time
1   -1.14 2007-09-29 00:01:57
2   -1.12 2007-09-29 00:03:57
3   -1.33 2007-09-29 00:05:57
4   -1.44 2007-09-29 00:07:57
5   -1.54 2007-09-29 00:09:57
6   -1.29 2007-09-29 00:11:57 
```

P28：数据集 2：

```
 temperature(Float)     Date_Time(time-stamps)
1   -1.89 2007-09-29 00:00:14
2   -1.79 2007-09-29 00:02:14
3   -1.78 2007-09-29 00:04:14
4   -1.66 2007-09-29 00:06:14
5   -1.68 2007-09-29 00:08:14
6   -1.90 2007-09-29 00:10:14 
```

实际上，我考虑过使用 ARMA() 但我不知道以后应该做什么来比较趋势。

# recursion - 尾递归和反转列表的问题？

> ID：13875095
> 
> 赞同：2
> 
> 时间：2012-12-14T08:32:55.083
> 
> 标签：recursion, prolog, logic, tail

你好，我有一个像这个数字列表（436，L）的电话。

如何反转列表，并使其尾递归？

```
list_of_digits(0,[]).
list_of_digits(M, [Z|Zx]) :- M > 0 , 
                  MM is floor(M / 10), 
                  Z is M mod 10,        
                  list_of_digits(MM,Zx). 
```

任何人都可以帮助我吗？

我想将我的号码（在本例中为 436）转换为类似 [4,3,6] 的列表。

```
I call  ?-  list_of_digits(436,L)
and get 
    L = [6,3,4] ;
    false.
back. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:30:19.317

使用累加器：

```
list_of_digits(X,L) :- lod_acc(X, [], L).
lod_acc(0,R,R).
lod_acc(M,Acc,R) :-
    M > 0, 
    MM is floor(M / 10), 
    Z is M mod 10,        
    lod_acc(MM,[Z|Acc],R). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:55:59.340

我会这样做，以处理负数和零本身（一种特殊情况）：

```
%
% the external/public API predicate.
%
% this handles the special case of zero, which has 1 digit.
% all other cases are handled by the internal worker predicate.
%
digits_in( X , Ds  ) :- int(X) , X > 0 ,               digits_in(X,[],Ds).
digits_in( X , Ds  ) :- int(X) , X < 0 , Y is abs(X) , digits_in(Y,[],Ds).
digits_in( 0 , [0] ) .

%
% the internal/private guts-of-the-operation predicate
%
digits_in( 0 , Ds , Ds ).        % when we hit zero, we're done.
digits_in( X , Ts , Ds ) :-      % otherwise...
  T  is X mod 10 ,               % get the lower order digit via modulus arithmetic
  X1 is X //  10 ,               % get the high order digits via integer division
  digits_in( X1 , [T|Ts] , Ds )  % [tail-]recurse down.
  . 
```

# eclipse - Eclipse 远程系统资源管理器和 sudo

> ID：13875097
> 
> 赞同：14
> 
> 时间：2012-12-14T08:33:02.773
> 
> 标签：eclipse

我使用 Eclipse RSE 访问 Web 服务器上的文件。为了与 Eclipse RSE 建立 sftp 连接，我使用了 HippieBandJam 用户 ID。要编辑文件，我需要 root 访问权限，我只能通过 sudo 命令获得。在 Eclipse RSE 中，我尝试启动一个新的 ssh 终端，使用 sudo su 然后刷新 sftp 树，但这似乎不起作用。有谁知道如何“升级” sftp 连接以便我可以编辑文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:23:21.507

如果你想要一些真正异国情调的东西，你可以：

1.  用 C 语言编译一个只做一件事的小程序：执行 shell
2.  为可执行文件设置一个 suid 位
3.  创建一个新用户并将我们新编译的二进制文件设置为该用户的登录 shell
4.  为二进制文件设置适当的权限，只允许新用户执行这个文件
5.  使用新用户的凭据登录服务器

呵呵 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:04:53.557

这是一个想法：

在 /media/ 的本地系统中创建一个挂载点

使用 sshfs cmd 将远程服务器文件系统目录挂载到 .

在 Eclipse 中使用该项目，使用将目录添加到您的项目步骤：右键单击您的项目 -> 新建 -> 文件夹 -> 高级（选择链接到备用位置）链接文件夹。

在那里，您的远程系统文件已同步...

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T16:10:46.950

我的解决方法是设置连接以从一开始就使用 root 用户。首先，您需要在您的 ssh 客户端上启用它： [https ://forums.aws.amazon.com/thread.jspa?threadID=86876](https://forums.aws.amazon.com/thread.jspa?threadID=86876)

然后你可能需要配置 authorized_keys 文件：/root/.ssh/authorized_keys 来接受密钥。

希望有帮助！它不是很安全，所以要小心这种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-18T21:45:15.900

其他解决方法：不在实时服务器上！！！！

在您编辑文件期间分配文件组写入权限并将您的帐户添加到组中。

# http - HTTP是否可以识别某人来自重定向301？

> ID：13875102
> 
> 赞同：2
> 
> 时间：2012-12-14T08:33:46.197
> 
> 标签：http, redirect

我有两个网站 A 和 B。我将关闭第一个网站并使用 301 重定向将所有流量重定向到 B。由于此重定向，我想在 B 上识别来自 A 的流量。

但我不能在 URL 上放置跟踪器。我怎么能以不同的方式做到这一点？

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:02:51.393

您可以使用以下方法获取页面的 url（从表单数据发布到当前页面的位置）-

```
$url=$_SERVER['HTTP_REFERER']; 
```

但这不能完全信任，因为“http 标头”信息可能会被更改或被黑客入侵，或者用户可能使用代理服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:36:38.203

您可以在站点 B 的 javascript 中执行此操作

`document.referrer`将引用 url 返回到该地址。

# solr - Solr：如何获取具有匹配关键字的 Facet

> ID：13875104
> 
> 赞同：0
> 
> 时间：2012-12-14T08:34:01.593
> 
> 标签：solr, solrnet

我不确定这是否可行或最好的方法是什么？如何在 Solr 中获取方面计数，如以下示例所示。

假设我有以下值等于它们在字段中重复的次数..

电视 = 100

索尼电视 = 10

LG电视=10

诺基亚移动= 5

iPhone 手机 = 4

如果用户查询是“电视和移动”。基于字段中的上述值，我怎样才能获得诸如...

电视 (120)

手机 (9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:17:07.513

您可以以层次结构形式索引数据并使用[Solr Pivots](http://wiki.apache.org/solr/HierarchicalFaceting#Pivot_Facets)来实现此方面。

例如电视/索尼、电视/LG、手机/诺基亚和手机/iPhone

这将帮助您了解父级并进一步深入研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:37:15.657

根据您对 Jayendra 的回答的评论，您希望利用 Solr [MultiValued](http://wiki.apache.org/solr/SchemaXml#Data_Types)字段来存储这些值，然后对该 multiValued 字段进行构面。这会给你你想要的刻面行为。

此外，如果您想将构面结果限制为一组特定的值，您将提供一个[facet.query](http://wiki.apache.org/solr/SimpleFacetParameters#facet.query_%3a_Arbitrary_Query_Faceting)以及您对 Solr 的请求。

# android - 根据条件以编程方式修改 RelativeLayout

> ID：13875113
> 
> 赞同：1
> 
> 时间：2012-12-14T08:34:21.750
> 
> 标签：android, android-layout, android-relativelayout, android-view

我有一个`RelativeLayout`与xml类似的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/appHolder"
  android:layout_width="210dp"
  android:layout_height="100dp"
  android:background="@drawable/app_container_box"
  android:paddingBottom="10dp"
  android:paddingLeft="15dp"
  android:paddingRight="10dp"
  android:paddingTop="10dp" >
  ...
</RelativeLayout> 
```

我想根据某些条件以编程方式修改此布局的宽度。

在`GetView()`方法中，我有：

```
public View getView(int position, View recycledView, ViewGroup viewGroup) {
    View row = recycledView;
    Holder holder;
    row = inflater.inflate(R.layout.app_icon_tile, viewGroup, false);
    if (row == null) {
        /*
        * I added only the following `if` block
        * The rest is older code and was working fine
        */
        if (changeWidth) {
            row.setLayoutParams(new RelativeLayout.LayoutParams(260, 100));
        }
        holder = new Holder();
        holder.icon = (ImageView) row.findViewById(R.id.gridAppIcon);
        holder.appTitle = (TextView) row.findViewById(R.id.gridAppTitle);
        row.setTag(holder);
    } else {
        holder = (Holder) row.getTag();
    }
    return (row);
} 
```

但是在运行此代码时，我的应用程序崩溃并显示以下堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
       at android.widget.GridView.onMeasure(GridView.java:937)
       at android.view.View.measure(View.java:8314)
       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
       at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
       at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
       at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
       at android.view.View.measure(View.java:8314)
       at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
       at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
       at android.view.View.measure(View.java:8314)
       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
       at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
       at android.view.View.measure(View.java:8314)
       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
       at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
       at android.view.View.measure(View.java:8314)
       at android.view.ViewRoot.performTraversals(ViewRoot.java:843)
       at android.view.ViewRoot.handleMessage(ViewRoot.java:1866)
       at android.os.Handler.dispatchMessage(Handler.java:99)
       at android.os.Looper.loop(Looper.java:130)
       at android.app.ActivityThread.main(ActivityThread.java:3683)
       at java.lang.reflect.Method.invokeNative(Native Method)
       at java.lang.reflect.Method.invoke(Method.java:507)
       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
       at dalvik.system.NativeStart.main(Native Method) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:41:01.507

你的问题出在这里：

```
if (changeWidth) {
       row.setLayoutParams(new RelativeLayout.LayoutParams(260, 100));
} 
```

因为当您设置布局参数时，它们应该是父级的类型，而不是您为其创建参数本身的视图。

因此，例如，如果您`RelativeLayout`在 a 中`ListView`，它应该得到`ListView.LayoutParams`.

# jquery - 表单提交后jQuery.hide（）不起作用

> ID：13875116
> 
> 赞同：0
> 
> 时间：2012-12-14T08:34:31.420
> 
> 标签：jquery, html, css, dom

如果启用了 JS，我正在尝试让表单工作在我想要隐藏可选字段的地方。所以我在那里有以下几行。

```
 $(document).ready(function(){
        $('#anfrageFormularOptionalContainer').hide();
    }); 
```

当我第一次进入页面时，一切正常。可选容器设置为“display:none;”。但是当我现在提交表单时，会显示可选容器，但它的 css 设置为“display:none;”。那为什么还显示呢？我真的不知道为什么会发生这种奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:12:46.547

好的，对于每个人来说，这是我使用 modx 的方式出现的错误。所以我必须这样做。

这不是 JS 的错误，所以答案不属于这里。

无论如何都要感谢大家！！！你一直对我很有耐心所以非常感谢！

# java - 获取选定的值下拉 jstl

> ID：13875117
> 
> 赞同：0
> 
> 时间：2012-12-14T08:34:31.993
> 
> 标签：java, jsp, jstl

使用此下拉菜单，我将选择一个值并传入一个 url，但是使用此代码我无法仅获取所选的一个，你们能帮我设置 ac:if 并在旁边标记选择吗？不管怎么说，还是要谢谢你。

```
<select>
<c:forEach var="foo" items="${bar}">
<option value="${foo}">${foo}</option>
</c:forEach></select>

<div class="links" style="font-size: 110%">
<a href="someURL?path=${foo}">someName</a>
</div> 
```

前任：

```
<select>
<c:forEach var="name" items="${names}">
<option value="${name}">${name}</option>
</c:forEach></select> 
```

选择名称后，将选定的名称放在网址中

```
<div class="links" style="font-size: 110%">
<a href="someURL?path=${name}">someName</a>
</div> 
```

对不起，我的英语不是那么好，所以有时很难表达自己

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:40:28.480

```
<option value="${foo}" 
        <c:if test="${param.path == foo}">selected="selected"</c:if>>${foo}</option> 
```

阅读[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSIntro7.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T09:05:33.893

你可以使用javascript遍历来获取选择的值，如果你不使用这个，你可以使用request.setAttribute("","")来设置值，<%= request.getAttribute("","")%>到get value , <% for(){}%> ,javascript 来获取选定的值。

# winforms - 如何在一个 .NET WinForms 应用程序（不是静态/共享字段）中的 UserControl 实例之间共享对象？

> ID：13875120
> 
> 赞同：1
> 
> 时间：2012-12-14T08:34:34.647
> 
> 标签：winforms, object, share

当我们的 UserControl 的第一个实例在显示带有它的表单时被初始化时，它应该创建一个具有布尔属性的对象，该对象可以由 UserControl 的其他实例访问，这些实例可以在同一应用程序的其他表单中创建。

这个临时共享对象应该只在一个应用程序中工作，另一个应用程序将拥有这个对象的另一个实例。

一个重要的要求：它不应该是类的静态（C#）/共享（VB.NET）字段。

如果在应用程序关闭时自动销毁共享对象，那就太好了。

在 .NET 中为 WinForms 应用程序执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:54:38.547

你可以使用单例。

下面是一些如何实现单例的示例：
[在 C# 中实现单例模式](http://csharpindepth.com/Articles/General/Singleton.aspx)

这里有一个参考这个问题：
[Singleton by Jon Skeet clarification](https://stackoverflow.com/questions/2550925/singleton-by-jon-skeet-clarification)

# ssl - 在大量机器上更新 SSL 证书

> ID：13875121
> 
> 赞同：0
> 
> 时间：2012-12-14T08:34:38.407
> 
> 标签：ssl, certificate, multi-tier

我在客户端-服务器应用程序中使用 SSL 证书；客户端和服务器都使用 2 个即将过期的证书。通常，您只需用新证书替换证书，但这不能立即发生，因为客户数量众多。因此，如果仅更新服务器和部分客户端，则其余客户端将无法再进行身份验证。

一个快速的解决方法是用一个简单地忽略证书到期日期的版本替换二进制文件；客户端的更新可以按顺序进行，只要在证书到期之前完成即可。

我想到的长期解决方案：

1.  使用 Puppet 在客户端推送新证书

    *   不幸的是，不可行，因为并非所有客户端都/将通过 Puppet 进行管理
2.  使用第二组证书

    *   如果第一组已过期，请使用第二组
    *   这样，服务器将拥有新证书，部分客户端将拥有新证书，其余客户端将拥有旧证书，但一切正常
3.  如果当前证书已过期，客户端将向服务器请求新证书。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:06:23.970

我假设您使用 SSL 证书进行在线 SSL 连接，例如 HTTPS 或 SFTP。

最大的问题是：您是否仍然信任并想要使用您的服务器端密钥！如果是这样，您可以使用旧密钥重新颁发具有新到期日期的服务器证书，从而延长使用寿命。问题是，您是否仍然信任旧密钥或者是否应该更换它。那时旧客户端可能仍会连接到您。您仍在使用相同的公钥/私钥对，只是为它制作了新的“终身版本”证书。（这是大多数公共服务器所做的......）

在服务器端为不同的密钥使用两组活动 SSL 证书实际上并不可行，只有在您对客户端的握手过程有很好的控制并且您的服务器应用程序支持它时才有可能。问题在于，在 SSL 协商期间，服务器必须首先发送其证书，并且它可能从客户端获得的唯一指示是 ClientHello 期间的 ServerName 扩展。（假设客户端实际上发送了一个）。否则，服务器对对方将支持或不支持的内容“不知所措”。（还有一些其他扩展可能有助于指示支持的 CA 证书，但您的客户应该支持这些）。

对于支持它的客户来说，第一个是最实用的。只需更新他们的证书（可能还有密钥）并推送它们。你已经完成了这些。

对于其他人，更新客户端软件并确保他们生成新密钥并在需要时（或提前）从服务器请求新证书可能是最佳解决方案。

# tkinter - 如何在 tk.Text 小部件上绘图？

> ID：13875123
> 
> 赞同：1
> 
> 时间：2012-12-14T08:34:40.903
> 
> 标签：tkinter, tk

我需要在 tk.Text 小部件中的某些单词周围绘制圆角矩形。这该怎么做？是否有某种文本的内部“画布”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:40:58.067

你不能做你想做的；没有可在其上绘制的内部画布。

您可以突出显示文本区域，并在文本区域周围放置边框，但不能在其上绘图。

# ios - 运行有限长度的后台任务

> ID：13875124
> 
> 赞同：5
> 
> 时间：2012-12-14T08:34:59.503
> 
> 标签：ios, ios5, ios4, ios6

当应用程序进入后台状态时，我正在做一些处理，我把它放在**beginBackgroundTaskWithExpirationHandler()**下，因此应该分配十分钟。但是，我相信该应用程序在此之前已被暂停。我正在执行的任务是内存和 CPU 密集型的，那么操作系统是否有可能将我的应用程序置于挂起状态？
如果是这样，有没有办法绕过这些限制。（我愿意使用私有 API）。

下面是启动后台任务的代码：

```
 if([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]){

        if([[UIDevice currentDevice] isMultitaskingSupported]){
            __block UIBackgroundTaskIdentifier bgTask;
            UIApplication *application = [UIApplication sharedApplication];
            bgTask = [application beginBackgroundTaskWithExpirationHandler:^{

                    [application endBackgroundTask:bgTask];
                    bgTask = UIBackgroundTaskInvalid;
            }];

            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                [self captureImage];
                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:02:55.627

我不确定 Daij-Dan 是否完全正确。

这部分我同意他的观点：

```
the os may kill you at any time when its pressured. 
```

然而，“压力”这个词是相当模糊的。而且我相信应该有很大的压力（例如内存不足）来暂停合法请求更多时间的应用程序。一方面，这是一个真实的场景案例。另一方面，这种情况并不经常发生（iOS 设备现在有相当多的内存）。

从文档（http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html）：

对该方法的每次调用都必须通过对 endBackgroundTask: 方法的匹配调用来平衡。运行后台任务的应用程序有有限的时间来运行它们。（**您可以使用 backgroundTimeRemaining 属性找出可用的时间。**）如果您没有在时间到期之前为每个任务调用 endBackgroundTask:，系统会终止应用程序。如果您在 handler 参数中提供一个块对象，系统会在时间到期之前调用您的处理程序，让您有机会结束任务。

我会推荐：

*   在完成处理程序中添加一些日志
*   将日志添加到带逻辑的日志中（包括 backgroundTimeremaining）

如果您的应用程序被暂停，请查看系统控制台日志。

PS 我删除了 iphone-privateapi 标签，因为它是公共 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:47:29.763

当操作系统受到压力时，它可能会随时杀死你。十分钟左右没有保证。（如果你表现得好，你也可以跑更长的时间：D）

**没有办法强制 ios 运行您的应用程序 AFAIK**

# android - Android：可以将蓝牙连接到自己吗？

> ID：13875126
> 
> 赞同：1
> 
> 时间：2012-12-14T08:35:12.307
> 
> 标签：android, bluetooth, simulate

今年年初，我尝试实现一个 android-app，它可以将所有系统音频流式传输到远程系统。

这并不容易，因为（当时）没有办法获得所有系统音频。所以我开发了一个劫持音频的内核模块。

但它有点bug，很难发布。

所以我停止了它的工作。

但现在，几个月后，我想知道是否有可能：

> 通过蓝牙连接到我自己（= 模拟蓝牙），因为这样我可以通过 API 将系统音频转发给它，然后在另一端获取它。

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:58:51.863

我对此表示怀疑。出于几个原因，没有蓝牙环回设备（另请参见[此处](https://stackoverflow.com/questions/6497723/loopback-in-android-bluetooth)），您基本上想使用它。

您可以尝试使用 PulseAudio 作为 Android 的 AudioFlinger 的替代品，因为 Pulse 至少为 Linux 提供了一个环回模块。

# android - 带有光标的 Android ListView SectionIndexer

> ID：13875129
> 
> 赞同：0
> 
> 时间：2012-12-14T08:35:37.180
> 
> 标签：android, android-listview

我想使用 SectionIndexer 创建基于类别项目的列表视图，其中数据来自 ContentProvider。我发现了一些示例，他们将数据从光标设置为 HashMap 或 TreeMap。但这不是使用游标的好方法。我想知道是否有一种方法可以在没有任何集合的情况下在 sectionindexer 中使用游标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:40:28.710

[AlphabetIndexer](http://developer.android.com/reference/android/widget/AlphabetIndexer.html)是您所需要的。它会为你做所有的工作。

编辑：对于 CharSequence，使用“ABCDEFGHIJKLMNOPQRSTUVWXYZ”。字符序列开头的“”是必需的。

编辑：[这是](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/AlphabetIndexer.java)AlphabetIndexer 的源代码。尝试自定义它以返回部分名称而不是字母表。

# javascript - vbscript Chr() 函数的 JavaScript 等效项是什么？

> ID：13875131
> 
> 赞同：14
> 
> 时间：2012-12-14T08:35:52.340
> 
> 标签：javascript, vbscript

我需要将以下行转换为 JavaScript：

```
cOrderNumList = frmSearch.OrderNumList.Value
cOrderNumList = Replace(cOrderNumList, Chr(10), "")
aOrderNumList = Split(cOrderNumList,",") 
```

什么是 JavaScript 等价物`Chr(10)`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T08:39:46.843

```
cOrderNumList = frmSearch.OrderNumList.Value;
cOrderNumList = cOrderNumList.replace(String.fromCharCode(10), "");
aOrderNumList = cOrderNumList.split(","); 
```

我的更改是否正确？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-14T08:37:57.657

你需要[`String.fromCharCode()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)：

```
cOrderNumList = Replace(cOrderNumList, String.fromCharCode(10), "") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T08:37:43.650

要将字符代码转换为字符串，您可以执行以下操作：

```
var outputString = yourString.replace(cOrderNumList, String.fromCharCode(10)) 
```

您会注意到，这会将 char 代码转换为一个字母的字符串。您不能真正转换为纯 char，因为 JavaScript 中不存在 char 类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-14T08:39:17.563

您可以使用[String.fromCharCode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)但如果您的角色是硬编码的，最好是简单地使用`"\n"`.

由于替换只会替换第一个，我建议使用这个简单的正则表达式：

```
cOrderNumList = cOrderNumList.replace(/\n/g, "") 
```

# javascript - 用于谷歌地图的带有动态编号的自定义图标标记

> ID：13875138
> 
> 赞同：0
> 
> 时间：2012-12-14T08:36:28.437
> 
> 标签：javascript, google-maps, maps

我已经看到了许多在标记图标上动态生成数字的示例。我发现其中之一是 google chart apis。[这](https://stackoverflow.com/questions/9407886/display-number-on-marker-for-google-maps)部分解决了我的问题。编辑我的代码后，我能够生成数字，如下所示。
但是是否可以添加这样的自定义图标[![](../Images/803ce34ffdd1c0a5408f57653a53b8cf.png)](https://i.stack.imgur.com/1ukvu.png) ，然后在其上生成数字？

```
function addMarker(id,location,address,facility,name,ratings) 
    {

        marker = new google.maps.Marker(
        {
            position: location,
            map: map,
            animation:  google.maps.Animation.DROP,
            icon: 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld='+id+'|FF776B|000000',
             shadow:'https://chart.googleapis.com/chart?chst=d_map_pin_shadow'
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T08:33:06.823

此图表 API 现在已弃用，谷歌将根据其修订后的“条款和条件”提供仅一年的支持。

我认为最好的方法是在服务器端创建标记。如果您的应用程序需要显示有限数量的标记（例如一次最多 25 个），那么您可以将它们放在服务器上。图像处理工具以 Java 或任何其他编程语言提供。

这是一个使用 java 的简短片段。

```
BufferedImage image = null;
try {
   image = ImageIO.read(new File("/path/to/base/icon"));
} catch (IOException e) {
   e.printStackTrace();
}

Graphics g = image.getGraphics();
g.setFont(g.getFont().deriveFont(30f));
g.drawString("1", x, y);  // x,y are points where you want to add the number
g.dispose();

try {
    ImageIO.write(image, "png", new File("test.png"));
} catch (IOException e) {
    e.printStackTrace();
} 
```

您可以使用 for 循环创建任意数量的编号标记。

# android - 如何自定义 EditText setError() 弹出视图

> ID：13875141
> 
> 赞同：7
> 
> 时间：2012-12-14T08:36:51.247
> 
> 标签：android

我正在处理“setError”以显示错误消息。

我的要求是将红色弹出`setError()`视图线更改为黑色，我正在尝试`"android:errorMessageBackground"`在扩展 EditText 小部件的 styles.xml 中使用。但不幸的是，我收到“未找到资源错误”

使用主题：`Theme.NoTitleBar` 使用的基础 API：2.2（甚至尝试使用 4.0.3）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-08-23T12:41:36.497

检查您需要的edittext输入数据，如果它为空，则使用`edittext.setError()`方法显示错误。

```
if( editText.getText().toString().trim().equalsIgnoreCase(""))
     editText.setError("Please enter Value"); 
```

当您关注或单击 edittext 输入数据时，此代码会从 edittext 中删除错误。

```
editText.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                editText.setError(null);
            }
        }); 
```

# asp.net-mvc - 禁用 asp.net mvc 中所有控件的 TAB 键

> ID：13875143
> 
> 赞同：0
> 
> 时间：2012-12-14T08:37:02.667
> 
> 标签：asp.net-mvc, visual-studio-2010, tabindex

我有一个包含多个页面的 asp.net MVC 项目。对于每个页面，我必须将 TAB 键设置为仅在某些控件之间进行。我知道我可以设置：

```
tabIndex=x , x > 0 //to enable
tabIndex=-1, //to disable 
```

问题是我有 5 个 TAB 键应该工作的控件和 50 个不应该工作的控件（这些数字只是为了理解比例）。所以我想知道是否有一种方法可以禁用整个页面的 TAB 键（来自 *.css 或管理器），而不是只为需要它的几个特定控件启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:06:02.077

据我所知，这不能像您希望的那样直接完成。您可以考虑做的是对所有未设置选项卡索引的元素执行 JS 函数，将其设置为小于零：

```
var elements = document.querySelectorAll("input:not([tabindex])");
for (var i = 0; i < elements.length; i++) {
    elements[i].tabindex = -1;
} 
```

请记住，根据您拥有的元素数量，这可能会拖累性能，因此您需要考虑进行基准测试。

您可以考虑的另一个选项是创建一个 HTML 助手服务器端，它禁用元素的选项卡索引。您可以使用 Razor`@helper`语法在本地执行帮助程序，也可以使用 HtmlHelper 类上的扩展方法全局执行帮助程序。这将比 JS 执行得多，但根据您的情况可能会有点笨拙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:22:48.267

由于有很多元素不应该被选项卡，而是为它们禁用 TAB 键，我更改了具有 tabIndex, onkey 按下的元素的默认行为：

1) 我取了所有 tabIndex 大于 0 的元素：

```
var tabbables = document.querySelectorAll("input[tabindex], textarea[tabindex]"); 
```

这是一个简化版本，您应该进行可见性检查并选择其他类型的元素（例如按钮等）

2) 我在 2 种情况下替换了默认行为：按下 TAB 并选择具有选项卡索引的最后一个元素或按下 SHIFT+TAB 并选择第一个元素。对于这些情况，我将重点放在第一个元素上，分别放在最后一个元素上。

一个类似的问题有一个很好的答案（不是公认的答案，得票最多的答案）在这里：[“Focus Next Element In Tab Index”](https://stackoverflow.com/questions/7208161/focus-next-element-in-tab-index)

# wordpress - Wordpress：在管理菜单页面中添加元框

> ID：13875144
> 
> 赞同：0
> 
> 时间：2012-12-14T08:37:17.903
> 
> 标签：wordpress

我正在开发一个插件，它创建了几个虚拟页面，我希望这些链接在菜单管理页面中可用，让用户在创建菜单时可以自由添加它们。

我想在菜单管理中添加一个元框，非常类似于页面/类别元框，让用户选择要在菜单中添加的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:46:20.863

[http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

使用 post_type '导航菜单'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:58:48.997

显然，唯一可能的研究是在核心本身。

在这里，**[`/wp-includes/nav-menu.php`](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/nav-menu.php)**我们可以知道如何插入元框：

```
add_action('admin_init', 'so_13875144_nav_menu_meta_box');

function so_13875144_nav_menu_meta_box() {
    add_meta_box( 
        'my-custom-nav-box', 
        __('Custom Box'), 
        'so_13875144_display_menu_custom_box', 
        'nav-menus', 
        'side', 
        'default' 
    );
}

function so_13875144_display_menu_custom_box() {
    /* Not sure about this global var */
    //global $_nav_menu_placeholder;
    //$_nav_menu_placeholder = ( 0 > $_nav_menu_placeholder ) ? intval($_nav_menu_placeholder) - 1 : -1;
    ?>
        <p id="menu-item-custom-box">
            <label class="howto" for="custom-menu-item-custom-box">
                <span><?php _e('URL'); ?></span>
                <input id="custom-menu-item-custom-box" name="menu-item[<?php echo $_nav_menu_placeholder; ?>][menu-item-custom-box]" type="text" class="code menu-item-textbox" value="my text" />
            </label>
        </p>
    <?php
} 
```

> ![导航菜单元框](../Images/873091146c701b3b50ba3c5582297cb0.png)

**但是**，我没有设法完成的困难部分是保存价值。
这是**[`/wp-admin/nav-menus.php`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/nav-menus.php)**必须研究的文件。

试图挂钩到动作*[`wp_update_nav_menu`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/nav-menus.php#L368)*，但自定义元框输入字段没有被传递到`$_POST`。

WordPress 答案可能有一些提示：[https ://wordpress.stackexchange.com/search?q=wp_update_nav_menu](https://wordpress.stackexchange.com/search?q=wp_update_nav_menu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T13:16:37.247

我知道我参加聚会迟到了，但对于其他试图这样做的人来说......

b__ 是对的，这是让它在页面上显示的方法，除了使用复选框比任何其他字段更容易，因为有一个内置的 javascript 函数可以查找复选框。

您需要做的就是从现有复选框中复制 html -

```
<li><label class="menu-item-title"><input type="checkbox" class="menu-item-checkbox" name="menu-item[-1][menu-item-object-id]" value="2"> Sample Page</label><input type="hidden" class="menu-item-db-id" name="menu-item[-1][menu-item-db-id]" value="0"><input type="hidden" class="menu-item-object" name="menu-item[-1][menu-item-object]" value="page"><input type="hidden" class="menu-item-parent-id" name="menu-item[-1][menu-item-parent-id]" value="0"><input type="hidden" class="menu-item-type" name="menu-item[-1][menu-item-type]" value="post_type"><input type="hidden" class="menu-item-title" name="menu-item[-1][menu-item-title]" value="Sample Page"><input type="hidden" class="menu-item-url" name="menu-item[-1][menu-item-url]" value=""><input type="hidden" class="menu-item-target" name="menu-item[-1][menu-item-target]" value=""><input type="hidden" class="menu-item-attr_title" name="menu-item[-1][menu-item-attr_title]" value=""><input type="hidden" class="menu-item-classes" name="menu-item[-1][menu-item-classes]" value=""><input type="hidden" class="menu-item-xfn" name="menu-item[-1][menu-item-xfn]" value=""></li> 
```

但给他们每个人一个唯一的 ID，并为 URL、标题等输入你的详细信息。

然后，在末尾添加一个提交按钮以添加到菜单 -

```
<input type="submit" class="button-secondary submit-add-to-menu right" value="<?php esc_attr_e('Add to Menu'); ?>" name="YOUR NAME" id="YOUR ID" onclick="(function(){$('#THE DIV YOU HAVE PUT YOUR LIST IN').addSelectedToMenu( api.addMenuItemToBottom );})"/> 
```

这应该将该项目添加到列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-25T19:24:30.997

这是一个*非常*古老的问题，但我今天试图这样做，以防万一它指向正确的方向......

我不会介绍添加元框，因为它已经在上面介绍过。我也只会介绍一个自定义链接，因为我没有考虑添加帖子、页面、术语链接等。

只是为了涵盖我如何到达那里的逻辑......看看`wp-admin/js/nav-menu.js`，对于您想要使用的自定义链接`window.wpNavMenu.addItemToMenu()`。这个 ajax提交给`wp_ajax_add_menu_item()`. `wp-admin/includes/ajax-actions.php`然后提交给`wp_save_nav_menu_items()`in `wp-admin/includes/nav-menu.php`。查看这些文件的结果是所有菜单项都是 post_type、taxonomy、post_type_archive 或自定义类型。

根据需要将 javascript 与 HTML 挂钩，但如果要提交自定义链接，则需要`addItemToMenu()`如下调用：

```
var url = 'http://example.com';
var title = 'Link text';
window.wpNavMenu.addItemToMenu({
    '-1': {
        'menu-item-type': 'custom',
        'menu-item-url': url,
        'menu-item-title': title,
    }
}, window.wpNavMenu.addMenuItemToBottom); 
```

菜单项类型必须是“自定义”，否则它需要与菜单项关联的帖子、页面等信息。

# android - 确保调用了 MediaPlayer onCompletionListener 并且线程没有死

> ID：13875146
> 
> 赞同：1
> 
> 时间：2012-12-14T08:37:42.360
> 
> 标签：android, android-mediaplayer

我有一个经常性的警报，它触发了一个 BroadcastReceiver，它启动了一个使用 MediaPlayer 播放声音的 IntentService。但是，我的 OnCompletionListener （用于释放资源）没有被调用，因为来自 IntentService 的线程在声音结束之前就死了，并且我在日志中收到一条警告消息：

```
Handler{4072a788} sending message to a Handler on a dead thread 
```

在调用 oncompletionlistener 之前，如何保持线程处于活动状态。还是有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:55:44.380

对于通过本地服务播放的 Controll 媒体播放器，最好将媒体播放器引用发送给其他类，例如 CarefulMediaPlayer(mp, this);。您处理此类中的所有媒体播放器属性。我认为它对你有帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:01:11.073

我在这个问题上挣扎了一段时间，最后我使用下面的类让它正常工作。这个想法是使用一个带有 Looper 的线程，该线程保持活动状态并处理所有 MediaPlayer 逻辑。

如果服务收到明确的停止消息，我只会退出 looper 并清理线程

```
public class PlayService extends IntentService {
private static PowerManager.WakeLock wakeLock;
private static final String TAG = "PlayService";
private static String LOCK_NAME = TAG;
public static final String EXTRA_FILE = "file";
public static final String ACTION_PLAY = "play";
private static final String ACTION_STOP = "stop";
public static final int MSG_START = 1;
public static final int MSG_STOP = 2;

public PlayService(String name) {
    super(name);
}

public PlayService() {
    super("PlayService");
}

@Override
public void onCreate() {
    super.onCreate();
}

@Override
protected void onHandleIntent(Intent intent) {
    Message msg = new Message();
    if (ACTION_PLAY.equalsIgnoreCase(intent.getAction())) {
        String fileName = intent.getExtras().getString(EXTRA_FILE);
        msg.what = MSG_START;
        msg.obj = fileName;
    } else if (ACTION_STOP.equalsIgnoreCase(intent.getAction())) {
        msg.what = MSG_STOP;
    }
    try {
        PlayMediaThread.getInstance(this).sendMessage(msg);
    } catch (InterruptedException e) {
        Log.e(TAG, e.getMessage());
    }
}

public static PowerManager.WakeLock acquireLock(Context context) {
    if (wakeLock == null || !wakeLock.isHeld()) {
        PowerManager powerManager = (PowerManager) context
                .getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                LOCK_NAME);
        wakeLock.setReferenceCounted(true);
        wakeLock.acquire();
    }
    return wakeLock;
}

public static void releaseLock(Context context) {
    if (wakeLock != null && wakeLock.isHeld()) {
        wakeLock.release();
    }
}

 }

class PlayMediaThread extends Thread implements OnCompletionListener,
    OnErrorListener, OnPreparedListener {
private static Semaphore semaphore = new Semaphore(0);
private static Handler handler;
private static Looper myLooper;
private static Context context;
private static String currentFileName;
private static MediaPlayer player;
private static PlayMediaThread instance;
private static final String TAG = "PlayMediaThread";

private PlayMediaThread(Context context) throws InterruptedException {
    super(TAG);
    PlayMediaThread.context = context;
    start();
    // To insure that the looper was initialized correctly before return an
    // instance
    semaphore.acquire();
}

public static PlayMediaThread getInstance(Context context)
        throws InterruptedException {
    if (instance == null) {
        instance = new PlayMediaThread(context);
    }
    PlayMediaThread.context = context;
    return instance;
}

public void sendMessage(Message msg) {
    handler.sendMessage(msg);
}

public void quitLooper() {
    try {
        if (myLooper != null) {
            myLooper.quit();
            Log.i(TAG, "After quit");

        }
    } catch (Exception ex) {
        Log.e(TAG, ex.getMessage());
    }
}

@Override
public void run() {
    Looper.prepare();
    myLooper = Looper.myLooper();
    handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if (msg.what == PlayService.MSG_START) {
                startPlayer((String) msg.obj);
            } else if (msg.what == PlayService.MSG_STOP) {
                // when stop command is coming from the activity i.e. user
                // explicitly clicked stop, I quit the looper and
                // clean the thread
                stopPlayer(true);
            }
        }
    };
    semaphore.release();
    Log.i(TAG, "Before Loop");
    Looper.loop();      
}

private void stopPlayer(boolean clean) {                
    if (player != null) {
        if (player.isPlaying()) {
            player.stop();
        }
        player.release();
        player = null;
    }
    if (clean) {
                    PlayService.releaseLock(context);
        quitLooper();
        instance = null;

    }
}

private void startPlayer(String fileName) {
    if (player != null && player.isPlaying() && currentFileName != null
            && currentFileName.equalsIgnoreCase(fileName)) {
        return;
    }
    currentFileName = fileName;
    stopPlayer(false);

    player = new MediaPlayer();
    player.setOnCompletionListener(this);
    player.setOnErrorListener(this);
    player.setOnPreparedListener(this);

    try {
        player.setDataSource(context, Uri.parse(currentFileName));
        player.prepare();
        player.start();
        PlayService.acquireLock(context);
    } catch (Exception e) {
        Log.e(TAG, e.getMessage());
    }
}

@Override
public boolean onError(MediaPlayer mp, int arg1, int arg2) {
    Log.e(TAG, "onError");      

    stopPlayer(true);

    return false;
}

@Override
public void onCompletion(MediaPlayer mp) {
    Log.d(TAG, "onCompletion");
            // Just to quit the looper and clean the thread
            stopPlayer(true);
}

@Override
public void onPrepared(MediaPlayer mp) {
    Log.d(TAG, "onPrepared");       
}

} 
```

# html - 如何隐藏图片后面的文字

> ID：13875153
> 
> 赞同：1
> 
> 时间：2012-12-14T08:38:41.370
> 
> 标签：html, css, photoshop

我已经准备好我的网页模板（用 Photoshop 制作）并设置为上传到服务器；但是，如果用户隐藏/禁用图像，则网站将为空白，因为所有文本都在图像上。

我已经创建了 CSS 布局并想要制作网站的文本版本，但是如何在不让文本与图像重叠的情况下实现这一点？我希望用户仍然可以看到网站的文本版本，以防他们禁用浏览器上的图像。

HTML 代码：

```
<div id="main_divs_container">
    <div id="left_div"><img src="images/left_div.jpg" width="249" height="622" alt=""></div>
    <div id="index_middle_div"><img src="images/index_middle_div.jpg" width="488" height="622" alt=""></div>
    <div id="right_div"><img src="images/right_div.jpg" width="253" height="622" alt=""></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:41:41.600

将文本放在`alt=`标签中。

当图像被阻止时，它应该显示文本。
（这几乎就是 alt 标签的目的，以一种或另一种方式在图像无法访问时表示内容）

但是，如果它包含大量文本，则它不会很漂亮，如果它完全呈现的话。
最好的选择是使用图像（无文本）作为背景，并通过 HTML 在其上添加文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:47:05.437

您必须创建一个 html 版本的网站。在 Photoshop 中，我们创建模板仅供参考或客户评论（仅用于视觉目的。）。这不是最终的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:43:27.267

您可以使用 CSS 图像替换 ( [http://css-tricks.com/css-image-replacement/](http://css-tricks.com/css-image-replacement/) ) 在 HTML 中同时包含文本和图像（文本不可见）。

比你必须编写 CSS 样式，一种会显示图像并隐藏文本，第二种会做相反的事情。

接下来只需使用 JS 应用正确的样式来检测用户是否阻止了图像:)

# symfony - Symfony2 创建后响应

> ID：13875159
> 
> 赞同：0
> 
> 时间：2012-12-14T08:39:15.243
> 
> 标签：symfony

我想使用组件 Symfony\Component\HttpFoundation\Response 在 symfony2 中创建 POST 响应 我如何通过更改标头值来模拟 POST

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:04:27.800

HTTP 响应没有方法。只有请求有。例如，您可以使用 curl 创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:04:28.663

代码示例：

```
$curl_opts = array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL            => 'http://myserver.com/dataRoute',
    CURLOPT_POSTFIELDS     => json_encode($json),
    CURLOPT_HTTPHEADER     => array('Content-Type: application/json')
);

$curl = curl_init();
curl_setopt_array($curl, $curl_opts);
$result = curl_exec($curl);
curl_close($curl);

var_dump($result); 
```

或使用 JavaScript & jQuery

```
var url = '/dataRoute';
var postData = {
    'key1': value1,
    'key2': value2
};
$.post(url, postData, function(data) {
    console.log(data);
}); 
```

# c# - 处理从 C# 调用的 FILE * 的 C DLL - 传入和传出流

> ID：13875165
> 
> 赞同：4
> 
> 时间：2012-12-14T08:39:30.127
> 
> 标签：c#, c, stream, pinvoke, bytearray

从我的 C# 代码调用 C DLL 函数时遇到问题。C DLL 有一个接受文件名 ( `const char *`) 的函数，然后打开文件，对内容执行一些工作（通过 读取`FILE *`）并将结果写入另一个文件。我想对其进行优化，以便不执行磁盘读/写操作，因为我的 C# 应用程序的内存流中已经有要处理的文件。我可以自由修改两端（C# 应用程序和 C DLL）。C# 应用程序基于 .NET 2.0。

我想扩展 DLL，使其具有接受和吐出字节数组的函数，这样我就可以轻松实现`PInvoke`它。输出部分在 C 端似乎很容易 - 而不是写入 a`FILE *`我可以将连续字节保存到数组中 - 但输入似乎很难。我不知道如何在 C 端处理获得的字节数组以使其成为内存流并从这一点开始处理物理文件流（我不想重写整个 DLL 来读取从字节数组而不是`FILE *`- 我希望大多数 DLL 内部保持不变，只是为了包装它并调整输入/输出）。但实际上我不知道，也许有更好的主意。

所以**问题是**：如何将 C 中的字节数组转换为 a`(FILE *)`而无需将其实际写入磁盘并打开 a`FILE *`来读取此文件？ **或者**：如何将内存流从 C# 传递`PInvoke`到 C DLL，以便它可以在 C 端轻松识别并用作`FILE *`（再次，没有物理磁盘写入/读取，仅在内存中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T02:43:47.887

Windows 中的命名管道通过内存缓冲区进行处理，并且与大多数文件 API 兼容。要操作管道，请使用“\\.\pipe”命名空间，例如“\\.\pipe\foo”之类的名称。要创建管道，请使用 CreateNamedPipe Win32 API。使用 fopen 在 C 端打开它。

另一种选择是由 CreateMailSlot API 创建并通过 "\\.\mailslot" 命名空间操作的邮件槽。主要区别是在数据报级别上操作，而不是像管道那样在流上操作。

# c# - Winforms 应用程序在以毫秒为单位接收数据时挂起

> ID：13875166
> 
> 赞同：1
> 
> 时间：2012-12-14T08:39:31.117
> 
> 标签：c#, winforms, listview, freeze

我有 ac# Winforms 应用程序，它从串口接收数据，然后处理它并显示在`listview`.

以 100ms 接收数据效果很好，但是当源传输速率更改为 10 毫秒时，应用程序会在 1 分钟或 2 分钟后挂起。

细节：

该应用程序以字节为单位接收数据，因此我需要转换为字符串，存储在arraylist中并将其填充到listview列中，操作中涉及的转换很少：

1.  字节到字符串
2.  很少将字符串转换为整数。

我也在使用普通的列表视图代码，如下所示：

```
ListViewItem item = new ListViewItem(DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.ffff"));
item.SubItems.Add(hex1.ToString());
item.SubItems.Add(hex2.ToString());

.....

listView1.Items.Add(item); 
```

所以我不确定出了什么问题。是`listview`无法处理数据到来的速度吗？

任何建议为什么应用程序以这种速度挂起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:49:56.293

您应该在另一个`Thread`或. 从那里你不直接填写你的。相反，您应该将其配置为使用. 可以[在 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode.aspx)中找到有关如何使用的示例。`Task``BackgroundWorker``ListView``VirtualMode``VirtualMode`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:45:25.160

我希望在插入每个项目后列表视图会重新绘制自身。如果重新绘制的时间比插入之间的间隔时间长，你就会把它挂起来。当然，随着列表变长，这种情况会变得越来越糟。

您也许可以通过累积更新批次来修复它，并在插入批次之前调用 ListView.BeginUpdate() 并在插入批次之后调用 ListView.EndUpdate() 。

# python - Python argparse：nargs='?' 和可选参数

> ID：13875173
> 
> 赞同：5
> 
> 时间：2012-12-14T08:40:11.137
> 
> 标签：python, argparse

假设我有一个名为的简单程序`readfile.py`，它通过使用 Python 的`argparse`.

程序从位置参数指定的文件中读取`input`。如果没有指定额外的参数，这个程序不是很令人兴奋。它*只是*读取`input`并退出。可选参数`--output [OUTPUT_FILE]`表示应将输入文件写入文件。`OUTPUT_FILE`也是可选的。如果未指定，则应将输入写入`default.out`.

我像这样设置我的参数解析器：

```
parser = argparse.ArgumentParser(description='Read from a file')
parser.add_argument(
    'input',
    help='file to read from')
parser.add_argument(
    '--output',
    nargs='?',
    const='default.out',
    default=None,
    help="""write file to %(metavar)s. If %(metavar)s isn't
         specified, write file to %(const)s.""",
    metavar='OUTPUT_FILE')
args = parser.parse_args()
return args.file, args.output_file 
```

注意我使用`default=None`这样如果`--ouput`没有出现在命令行上，我可以用 None 检测它的缺失。

它给出了这样的使用签名：

```
usage: readfile.py [-h] [--output [OUTPUT_FILE]] input 
```

如果我运行，这将按预期处理参数

```
python readfile.py input.in --output somefile.out 
```

或者

```
python readfile.py --output somefile.out input 
```

如果我跑步，它会设置`output`为`default.out`

```
python readfile.py input.in --output 
```

但如果我跑

```
python readfile.py --output input.in 
```

它抱怨争论太少。我认为 argparse 足够“聪明”来解释这种模式，设置`input`为`input.in`和`output`to `default.out`。生成的用法甚至暗示了这一点。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:03:44.903

不，它不会承认这一点。您在最后一个示例中清楚地传递`input.in`到`--output`.

我建议您翻转`default`和`const`参数。您希望默认为 default.out，所以它应该是`default='default.out'`. 然后可以针对具有空参数`const`的情况将其设置为其他值。`--output`

`--output`这样，除非您想更改默认值，否则您不必添加参数，例如`--output`，如果您想输出到，则可以使用空参数。`stdout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T16:31:06.080

您可以通过“--”来标记任何选项的结束。例如：

```
python readfile.py --output -- input 
```

有预期的效果。但是，使 --output 的参数成为必需并允许：

```
python readfile.py --output - input 
```

可能更干净。

# c - 解析后在 C 结构中获取垃圾字符

> ID：13875176
> 
> 赞同：0
> 
> 时间：2012-12-14T08:40:20.730
> 
> 标签：c, xml

我正在使用一个简单的 xml 文件。

```
<COMPANY>
    <EMPLOYEES>
            <EMPLOYEE>
                <NAME>BOB</NAME>
                <EMPID>51211</EMPID>
                <SEX>M</SEX>
                <DOB>10-1-1982</DOB>
                <DOJ>12-7-2001</DOJ>
        </EMPLOYEE>
    </EMPLOYEES>
</COMPANY> 
```

相同的 xml booster 元定义文件如下

```
 <SYSTEM NAME="testmeta" >
    <CCONFIG MAXLEN="100"
       ARRAYSIZE="5"
       FLATMODE="TRUE"/>        
    <ELEMENT NAME="COMPANY" TAG="COMPANY" MAIN="TRUE" >
            <FIELDS>
                    <FIELD NAME="EMPLOYEES" REFTYPE="EMPLOYEE" MODE="DEFAULT" />
            </FIELDS>
            <FORMULA>
                    <ENCLOSED NAME="EMPLOYEES" >
                            <META NAME="COMMENT" >Target field is EMPLOYEES</META>
                            <REPEAT TARGET="EMPLOYEES" ATLEASTONE="TRUE" >
                                    <ELEMENTREF NAME="EMPLOYEE" />
                            </REPEAT>
                    </ENCLOSED>
            </FORMULA>
    </ELEMENT>
    <ELEMENT NAME="EMPLOYEE" TAG="EMPLOYEE" >
            <FIELDS>
                    <FIELD NAME="NAME" TYPE="STRING" />
                    <FIELD NAME="EMPID" TYPE="INTEGER" />
                    <FIELD NAME="SEX" TYPE="STRING" />
                    <FIELD NAME="DOB" TYPE="STRING" />
                    <FIELD NAME="DOJ" TYPE="STRING" />
            </FIELDS>
            <FORMULA>
                    <CONCAT>
                            <ENCLOSED NAME="NAME" >
                                    <META NAME="COMMENT" >Target field is NAME</META>
                                    <PCDATA TARGET="NAME" />
                            </ENCLOSED>
                            <ENCLOSED NAME="EMPID" >
                                    <META NAME="COMMENT" >Target field is EMPID</META>
                                    <PCDATA TARGET="EMPID" />
                            </ENCLOSED>
                            <ENCLOSED NAME="SEX" >
                                    <META NAME="COMMENT" >Target field is SEX</META>
                                    <PCDATA TARGET="SEX" />
                            </ENCLOSED>
                            <ENCLOSED NAME="DOB" >
                                    <META NAME="COMMENT" >Target field is DOB</META>
                                    <PCDATA TARGET="DOB" />
                            </ENCLOSED>
                            <ENCLOSED NAME="DOJ" >
                                    <META NAME="COMMENT" >Target field is DOJ</META>
                                    <PCDATA TARGET="DOJ" />
                            </ENCLOSED>
                    </CONCAT>
            </FORMULA>
    </ELEMENT>
</SYSTEM> 
```

使用以下命令使用 xmlbooster lite 生成相同的 .c 和 .h 文件

```
xmlblit.exe -C testmeta.xmlb 
```

现在在我的函数应用程序中`main`调用 `accept_COMPANY`函数并传递`S_XMLB_CONTEXT`上下文对象。功能成功但是当我使用打印每个员工值时

```
 printf("%s, %d, %s, %s, %s", En->aNAME,
    En->aEMPID,
    En->aSEX,
    En->aDOB,
    En->aDOJ);
    printf("\n"); 
```

我正在打印垃圾字符，即使是整`aEMPID`数值。

我正在使用 Visual Studio 2010 编译和运行 C 程序。

尝试了 Unicode 和 MultiByte 项目，但没有获得正确的值。

我得到的输出为

```
 UOB, 78, M, j0-1-1982, 1t-7-2001 
```

调试生成的 .c 文件后发现，生成器正在为`PCDATA`类型字段设置不需要的值。例如，`NAME`从 XML 中检索名称后的字段，代码具有以下语句

```
/* Regexp */
if (strlen(obj->aNAME) > 0)
    (obj->aNAME)[0] = 'U'; 
```

有人遇到过类似情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:17:19.897

写信给 xmlbooster 支持得到了以下回复。

> XMLBooster Lite 仅支持 Java；C 仅用于评估目的，因为正如您在示例程序和生成的代码中所注意到的那样，值是加扰的。您需要购买 XMLBooster Pro 才能在 C 中生成生产级解析器。

得到了答案，希望这对正在试验的其他人也有帮助。

# c# - Win32 和 x64 平台命名

> ID：13875182
> 
> 赞同：1
> 
> 时间：2012-12-14T08:40:38.743
> 
> 标签：c#, api, platform

我有一个应用程序，它提供 API 用户可以调用以获取应用程序平台描述。这是我的枚举：

```
/// <summary>
/// Target platforms
/// </summary>
public enum Platform
{
    /// <summary>
    /// 32-bit platform
    /// </summary>
    Win32,
    /// <summary>
    /// 64-bit platform
    /// </summary>
    X64
} 
```

有人建议将`X64`枚举值重命名为 Win64。一方面，将其重命名为`Win64`与`Win32`值对称是有意义的。另一方面，平台名称`x64`在 Visual Studio 和其他应用程序中广泛用于描述 Windows 64 平台。

我的枚举正确吗？还是应该`Win64`代替`x64`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:44:50.003

我会说你选择的是正确的。正如您所说的X64被广泛使用，我从未见过有人将64位称为Win64。如果要求它们对称，我会将 Win32 更改为 X86。

虽然如果您的 API 可以在多个操作系统上使用，那么 Win64 可能会更好，假设它只打算用于 Windows 并且对于其他操作系统有等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:37:57.050

除了PC级的x64（AMD64、x86-64）（每台几十到几百美元），还有面向高端服务器的Intel IA64（安腾）架构（每台几千美元）。

通常，我们的大多数软件只能在 x86 和 x86-64 上运行，而不是在 Itanium 上运行。

还有 Windows 的 Itanium 版本。

因此，x64 是一个更好的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:43:21.237

不要认为任何人都可以对此给出正确的答案，因为对于这类事情来说，什么是对的，什么是错的，必须在开发组中决定。如果您和其他人认为`Win64`，更清楚，也因为有`Win32`，请保留它。

只需选择适合您的。

枚举*命名*不是遵循某人设定的严格准则。

`Win64`在这种情况下，我个人会选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T09:10:44.560

亲自？我不确定是否有硬性解决方案……但是查看大多数软件包和 Internet 站点，“x86”和“x64”比 Win32 和 Win64 更常见。只是我的两分钱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:46:43.007

这个决定是纯粹的约定，您必须在 API 中正确定义和记录

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-07T00:42:57.843

```
Platform GetApplicationPlatform()
{
    switch (IntPtr.Size)
    {
        case 4:
            return Platform.X86;
        case 8:
            return Platform.X64;
        default:
            return Platform.Unknown;
    }
} 
```

# r - 如何将 nohup 与 R 脚本一起使用，并将任何保存命令重定向到我的本地文件夹

> ID：13875186
> 
> 赞同：0
> 
> 时间：2012-12-14T08:40:53.177
> 
> 标签：r, save, nohup

我想使用 nohup 在 R 中运行我的脚本，但是在我的脚本中，我通常将变量保存在我的本地文件夹中，此外，当我尝试使用 nohup 命令时，我还想将任何警告消息重定向到我的本地文件夹当我在我的 R 脚本中调用 save 命令时，通常不会保存我的变量，那么有没有办法做到这一点？谢谢

# php - DOMdocument 搜索标签

> ID：13875189
> 
> 赞同：0
> 
> 时间：2012-12-14T08:41:08.603
> 
> 标签：php, xml, dom

我正在尝试这样做：

我有几千个 xml 文件，我正在阅读它们，我正在寻找带有特定标签的 xml 中的特殊文本，但是那些具有我需要的文本的标签是不同的。到目前为止我所做的是：

```
$xml_filename = "xml/".$anzeigen_id.".xml";
    $dom = new DOMDocument();
    $dom->load($xml_filename);
    $value = $dom->getElementsByTagName('FormattedPositionDescription');
    foreach($value as $v){
        $text = $v->getElementsByTagName('Value');
        foreach($text as $t){
            $anzeige_txt = $t->nodeValue;
            $anzeige_txt = utf8_decode($anzeige_txt);
            $anzeige_txt = mysql_real_escape_string($anzeige_txt);
            echo $anzeige_txt;
            $sql = "INSERT INTO joinvision_anzeige(`firmen_id`,`anzeige_id`,`anzeige_txt`) VALUES ('$firma_id','$anzeigen_id','$anzeige_txt')";
            $sql_inserted = mysql_query($sql);
            if($sql_inserted){
                echo "'$anzeigen_id' from $xml_filename inserted<br />";
            }else{
                echo mysql_errno() . ": " . mysql_error() . "\n";
            }
        }
    } 
```

现在我需要做的是：

在 xml 中查找`FormattedPositionDescription`，如果那里没有此标记，则`anothertag`在同一个 xml 文件中查找..

我该怎么做，提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:46:22.840

只需检查以下`length`属性[`DOMNodeList`](http://php.net/manual/en/class.domnodelist.php)：

```
$value = $dom->getElementsByTagName('FormattedPositionDescription');

if($value->length > 0)
{
    // found some FormattedPositionDescription
}
else
{
    // didn't find any FormattedPositionDescription, so look for anothertag
    $list = $dom->getElementsByTagName('anothertag');
} 
```

# osx-lion - Applescript 的不当行为：告诉应用程序“终端”执行脚本

> ID：13875190
> 
> 赞同：1
> 
> 时间：2012-12-14T08:41:09.533
> 
> 标签：osx-lion, applescript

在 MacOS 10.7.5 上，以下 Applescript

```
tell application "Terminal" to do script "echo foo" 
```

打开一个新的终端窗口，但 foo 未打印。使用命令 echo 没什么特别的，我根本无法执行任何命令（我在尝试执行命令 cd 时发现了这个错误）。我找到了解决方法：

```
tell application "Terminal" 
  do script
  do script "echo foo" in window 1
end tell 
```

我错过了什么吗？或者这是预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:22:58.287

我只会使用：

```
do shell script "echo foo" 
```

但是，如果你想要 shell 脚本的响应，你可以使用：

```
set shellresponse to do shell script "echo foo" 
```

# javascript - Float32Array 设置属性在 Firefox 中不起作用

> ID：13875191
> 
> 赞同：2
> 
> 时间：2012-12-14T08:41:12.080
> 
> 标签：javascript, google-chrome, firefox

我在 Float32Array 中添加了 3 个名为“x”、“y”和“z”的属性。getter 在 chrome 和 firefox 中都可以正常工作，但似乎 setter 只能在 chrome 中工作。这是为什么？它是一个错误吗？有没有办法让它在Firefox中工作？

```
Object.defineProperty(Float32Array.prototype, 'x', {
    get: function(){
        return this[0];
    },
    set: function(x){
        this[0] = x;
    }
});

// creating a Float32Array-Vector using mjs.js  
var vector = V3.$(1,2,3);

// works fine
document.writeln(vector.x);

// works in chrome but not in firefox
vector.x = vector.y + vector.z; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:56:58.433

我发现这个问题非常有趣，并对其进行了研究。我能够重现您遇到的问题。setter 永远不会被调用，但 getter 会被调用。在探索中，发现了以下文字：

```
JavaScript 1.8.1 note
Starting in JavaScript 1.8.1, setters are no longer called when setting properties in object and array initializers. 
```

查看网址：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

还有更多参考资料：[https ://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.8.1](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.8.1)

和[https://dev.mozilla.jp/localmdc/localmdc_11696.html](https://dev.mozilla.jp/localmdc/localmdc_11696.html)

被引用为安全漏洞的原因（受影响的 twitter）在[此处](http://code.google.com/p/chromium/issues/detail?id=73636)
的 chromium 中对此进行讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:34:19.957

这里发生的是 Firefox 只是不允许在类型化数组上设置任何非数字属性。任何此类集合都将被忽略。在搜索原型链之前它们会被忽略，这就是为什么你的原型上的设置器没有被调用。

我不清楚每个规范的正确行为是什么；在这方面已经改变了几次。

注意[https://bugzilla.mozilla.org/show_bug.cgi?id=695438](https://bugzilla.mozilla.org/show_bug.cgi?id=695438)

# jquery - TinyMCE：一些图标没有出现

> ID：13875192
> 
> 赞同：1
> 
> 时间：2012-12-14T08:41:15.237
> 
> 标签：jquery, icons, tinymce

我正在为 TinyMCE 使用*thebigreason*皮肤（3.5.8 jQuery 包）：
[http ://thebigreason.com/blog/2008/09/29/thebigreason-tinymce-skin](http://thebigreason.com/blog/2008/09/29/thebigreason-tinymce-skin)

问题是**一些**图标没有出现：

![在此处输入图像描述](../Images/00ebb8616a035ae794a6787a5471bfe1.png)

我在 Firebug 中检查了 CSS 和 URL，但没有检测到问题：（
未*出现的图标存在于**icons.png**文件*中）

![在此处输入图像描述](../Images/fdffe63b0ac1bf33501d138ae9b24bc6.png)

我已经删除了浏览器的缓存并在所有主要浏览器中进行了检查，但存在相同结果的问题。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:51:02.517

[http://www.tinymce.com/tryit/jquery_plugin.php](http://www.tinymce.com/tryit/jquery_plugin.php)

您必须添加所有微小的 mce 选项，这是一个示例：

> tinyMCE.init（{ theme_advanced_buttons1 ：“分隔符，插入日期，插入时间，预览，缩放，分隔符，前色，背景色”，theme_advanced_buttons2 ：“bullist，numlist，分隔符，outdent，缩进，分隔符，撤消，重做，分隔符”，theme_advanced_buttons3 ：“ hr,removeformat,visualaid,分隔符,sub,sup,分隔符,charmap" });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:44:58.727

我已经通过删除一些像“ **advlist** ”这样的插件来解决它。似乎皮肤不支持某些图标的下拉菜单。

您可以看到这是带有**advlist**的图像：![在此处输入图像描述](../Images/df945a9213a2459a2df17a66bb98fbaf.png)而没有它：![在此处输入图像描述](../Images/b45d7df2764f87f5a1cd6781e728089a.png)

另一件事是**icons.png**文件中的一些图标被遗漏了：（
比如*高亮**文本**和**表格控件***）

原始 TinyMCE: ( **icons.png** )

![在此处输入图像描述](../Images/c6b08a3f4b7587ac7ab6ec183106dba0.png)

TheBigReason 皮肤：( **icons.png** )

![在此处输入图像描述](../Images/f0d39c2ab9da5547e9198f1de52ee108.png)

希望他们能解决问题。

# iphone - objective c explode NSString

> ID：13875193
> 
> 赞同：-1
> 
> 时间：2012-12-14T08:41:18.803
> 
> 标签：iphone, objective-c

i need something equivalent of this in objective c

```
list($var1,$var2) = explode("=",$array); 
```

i tried

```
NSArray *stringArray = [postString componentsSeparatedByString:@"&"];
for (NSString* str in stringArray) {
     NSArray *keyvalue = [str componentsSeparatedByString:@"="];
     [postParam setValue:[keyvalue objectAtIndex:1] forKey:[keyvalue objectAtIndex:0]];
     [postData addObject:postParam];
} 
```

but my app crash with message

> <__NSDictionaryI 0x727abc0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key XY

any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:42:51.953

```
[postParam setValue:[keyvalue objectAtIndex:1] forKey:[NSString stringWithFormat:@"%@",[keyvalue objectAtIndex:0]]]; 
```

# c++ - 输出到文件 c++

> ID：13875194
> 
> 赞同：0
> 
> 时间：2012-12-14T08:41:23.283
> 
> 标签：c++

非常简单的程序，不知道为什么它不工作：

```
#include <iostream>
#include <fstream>
#include <stdio.h>

using namespace std;

int main ()

{
ofstream myfile ("test.txt");
if (myfile.is_open()) 
{
    for(  int i = 1;  i < 65535;  i++  )

     {
     myfile << ( "<connection> remote 208.211.39.160 %d udp </connection>\n", i );
     }
    myfile.close();
}
  return 0;
} 
```

基本上它应该打印该句子 65535 次，然后将其保存到 txt 文件中。但是 txt 文件只有一个从 1 到 65535 的数字列表，没有文字或格式。有任何想法吗？感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T08:44:24.630

如果要连接输出，只需将数据通过管道传输到两个`<<`运算符，如下所示：

```
myfile << "<connection> remote 208.211.39.160 %d udp </connection>\n" << i; 
```

请注意，在这种情况下插值不起作用，因此如果要将`i`变量放在字符串的中间，则必须手动拆分它：

```
myfile << "<connection> remote 208.211.39.160 " << i << " udp </connection>\n" 
```

或者在输出之前应用某种其他插值格式。

## 问题

问题存在于您的代码中，因为在 C++ 中，`(a, b)`（逗号运算符）返回`b`. 因此，在您的代码中，这意味着您只是写入`i`了一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:46:42.617

尝试以下操作：

```
myfile << "<connection> remote 208.211.39.160 %d udp </connection>\n" << i; 
```

基本上，`myfile << (str , i)`意思是“*评估`(str , i)`并将评估结果写入 ostream myfile* ”。

评估结果`( "<connection> remote 208.211.39.160 %d udp </connection>\n", i )`等于`i`

看一下逗号运算符描述： [http ://en.wikipedia.org/wiki/Comma_o​​perator](http://en.wikipedia.org/wiki/Comma_operator)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:45:58.210

改变

```
myfile << ( "<connection> remote 208.211.39.160 %d udp </connection>\n", i ); 
```

至

```
myfile << "<connection> remote 208.211.39.160 " << i << " udp </connection>\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:47:03.990

看起来您正在尝试“printf”并流式传输...

我认为这更像你想要的：

```
myfile << "<connection> remote 208.211.39.160 " << i << " udp </connection>"<<std::endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:46:17.417

您正在使用 printf 语法使用 ofstream 进行编写。其他人已经解释了为什么它不起作用。要修复它，请执行以下操作

```
myfile << "<connection> remote 208.211.39.160"<<i<<"udp </connection>\n"; 
```

或者如果你想去 C 风格

```
printf( "<connection> remote 208.211.39.160 %d udp </connection>\n", i ); //fprintf to write to file 
```

# forms - 在 Racket 中向 servlet 提交 HTML 表单

> ID：13875201
> 
> 赞同：2
> 
> 时间：2012-12-14T08:41:59.910
> 
> 标签：forms, servlets, racket

有人可以分享一个例子吗

1.  HTML 表单通过 POST 方法将表单提交给 servlet
2.  打印发布值的 servlet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:59:09.953

请参阅 web-server 集合中的以下示例。

[https://github.com/racket/web-server/blob/master/web-server-lib/web-server/default-web-root/htdocs/servlets/examples/add-page.rkt](https://github.com/racket/web-server/blob/master/web-server-lib/web-server/default-web-root/htdocs/servlets/examples/add-page.rkt)

# hadoop - 在 Amazon Elastic MapReduce 和 S3 中读取参数文件

> ID：13875203
> 
> 赞同：0
> 
> 时间：2012-12-14T08:42:10.537
> 
> 标签：hadoop, amazon-web-services, amazon-s3, mapreduce, elastic-map-reduce

我正在尝试在 Amazon Elastic MapReduce 系统中运行我的 hadoop 程序。我的程序从本地文件系统获取一个输入文件，其中包含程序运行所需的参数。但是，由于该文件通常是从本地文件系统中读取的，因此`FileInputStream`在 AWS 环境中执行该任务时会失败，并显示未找到参数文件的错误。请注意，我已经将文件上传到 Amazon S3。我该如何解决这个问题？谢谢。下面是我用来读取参数文件并因此读取文件中参数的代码。

```
FileInputStream fstream = new FileInputStream(path);
            FileInputStream os = new FileInputStream(fstream);
            DataInputStream datain = new DataInputStream(os);
            BufferedReader br = new BufferedReader(new InputStreamReader(datain));

            String[] args = new String[7];

            int i = 0;
            String strLine;
            while ((strLine = br.readLine()) != null) {
                args[i++] = strLine;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:29:41.923

如果您必须从本地文件系统读取文件，您可以将 EMR 作业配置为使用[boostrap 操作](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html)运行。[在该操作中，只需使用s3cmd](http://s3tools.org/s3cmd)或类似工具将文件从 S3 复制到本地文件。

您还可以通过 Hadoop FileSystem 类来读取文件，因为我很确定 EMR 支持这样的直接访问。例如：

```
FileSystem fs = FileSystem.get(new URI("s3://my.bucket.name/"), conf);
DataInputStream in = fs.open(new Path("/my/parameter/file")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:51:18.307

您可以将此文件添加到分布式缓存中，如下所示：

```
...
String s3FilePath = args[0];
DistributedCache.addCacheFile(new URI(s3FilePath), conf);
... 
```

稍后，在 mapper/reducer 的 configure() 中，您可以执行以下操作：

```
...
Path s3FilePath;
@Override
public void configure(JobConf job) {
s3FilePath = DistributedCache.getLocalCacheFiles(job)[0];
FileInputStream fstream = new FileInputStream(s3FilePath.toString());
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T01:14:53.023

我还没有尝试过 Amazon Elastic，但它看起来像是分布式缓存的经典应用程序。`-files`您使用选项（如果您实现`Tool`/ `ToolRunner`）或方法添加文件做缓存`job.addCacheFile(URI uri)`，并像本地存在一样访问它。

# c++ - 在 VC 2010 上使用 SSL 的 libpq

> ID：13875213
> 
> 赞同：2
> 
> 时间：2012-12-14T08:43:18.323
> 
> 标签：c++, visual-c++, openssl, postgresql-9.2, libpq

我对在支持 SSL 的 Windows（VS2010 32 和 64 位）上编译 libpq 有疑问。我下载了最新的 [postgres](http://www.postgresql.org/ftp/source/v9.2.2/ "postgres")源以及[OpenSSL](http://slproweb.com/products/Win32OpenSSL.html) Win64 v1.0.1c。我在 libpq 文件夹中运行 nmmake：

> cd postgresql-9.2.2\interfaces\libpq
> 
> nmake /f win32.mak CPU=AMD64 USE_SSL=1 SSL_INC=C:\OpenSSL-Win64\include SSL_LIB_PATH=C:\OpenSSL-Win64\lib

然后编译结束，他找不到bufferoverflowU.lib。搜索了一下我发现，这个库是与 windows SDK 一起部署的，并且由于 VS 2005 不再需要（参见[Vista / Win 7 SDK bufferoverflowu.lib 链接错误](https://stackoverflow.com/questions/2242665/vista-win-7-sdk-bufferoverflowu-lib-linking-error)）。所以在 libpq 的 make 文件 (win32.mak:20) 中我注释掉了这一行

> ADD_SECLIB=bufferoverflowU.lib

它编译得很好。我也没有遇到任何麻烦，用 ssl 测试这个 libpq。

我是否需要良心不好从构建中删除 bufferoverflowU.lib 还是仅仅因为 makefile 不适用于 VS 2010？（顺便说一句：openssl 已将 VC 文件夹中的库名称分别更改为 *MD.lib *MT.lib。旧命名的库位于 C:\OpenSSL-Win64\lib 中，一个目录）

有人能告诉我在 VS2010 构建中是否需要 bufferoverflowU.lib 吗？

干杯，550

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T03:54:55.553

> 有人能告诉我在 VS2010 构建中是否需要 bufferoverflowU.lib 吗？

不，不再需要了。`bufferoverflow.lib`和朋友们被推入检查堆栈cookie的代码中。请参阅此 KB：[*当您使用 Windows Server 2003 Service Pack 1 的 Win32 软件开发工具包 (SDK) 或 Windows Server 2003 驱动程序开发工具包 (DDK) 构建源代码时，您可能会收到“链接器工具错误 LNK2001”错误消息*](http://support.microsoft.com/kb/894573)。

我相信您可以通过`/GS`开关解决问题并强化您的可执行文件。

* * *

```
nmake /f win32.mak CPU=AMD64 USE_SSL=1 SSL_INC=C:\OpenSSL-Win64\include
SSL_LIB_PATH=C:\OpenSSL-Win64\lib 
```

[*您应该考虑添加使用 Visual C++ 防御保护您的代码中*](http://msdn.microsoft.com/en-us/magazine/cc337897.aspx)讨论的所有开关。以下是您时间紧迫的清单：

*   /GS
*   /SafeSEH
*   /NX 兼容
*   /动态基础

此外，`#define _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES 1`如果可能，您应该这样做。最后，您还应该添加`#pragma strict_gs_check(on)`到 Windows 上的高风险源文件。它应该谨慎使用，但建议在高风险情况下使用，例如当源文件解析来自 Internet 的输入时。

*nix 项目通常会错过 Windows 上的安全开关。我称之为“断开连接”，我已经看到它是双向的（*nix -> Windows 和 Windows -> *nix）。每个人都不能成为所有方面的专家；）

（对不起，有点徘徊。糟糕的项目设置是我的一个小烦恼）。

# c - 读取windows ntfs系统文件和文件夹

> ID：13875233
> 
> 赞同：-1
> 
> 时间：2012-12-14T08:45:20.597
> 
> 标签：c, windows, delphi, ntfs

在我的论文中，我正在处理 Windows NTFS 文件系统低级属性，为此我正在尝试开发一个演示程序来读取和显示 NTFS 系统文件和文件夹，如 $Extend。不幸的是，到目前为止还没有成功。谁能让我走上正轨？任何 C 或 Delphi 示例也将受到欢迎。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:07:49.093

> 任何 C 或 Delpi 示例也将受到欢迎

谷歌：“Linux + NTFS”

AFAIR 它有（按照它们的发展顺序）三种实现：
1）旧的一种，只读的，NTFS
2）NTFS-captive - 有限的 WinNT 内核实现，用作将原始 NTFS.sys 推入 FUSE 的包装器
3）新的读/写NTFS 第三代

#2 对你没有兴趣。

#3 将是最新但复杂的代码库
#1 将过时且功能有限 - 但更易于阅读和学习

但是将＃1和＃3的两个来源都拿来自己比较

# jquery - 在单击事件中没有获取 jquery 中文本框的值

> ID：13875235
> 
> 赞同：2
> 
> 时间：2012-12-14T08:45:29.373
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.2

在每一行中都有一个文本框和一个按钮，我想通过它们各自的文本框单击按钮来获取文本数据。但问题是我为每个按钮单击获得相同的值，因为 textboxID 是相同的......在循环中我的代码就是这样......有没有办法获取每个文本框的值以进行 diff 按钮单击

```
 <% @obj.each_with_index do |time_sheet, i| %>
   <tr>
     <td style="width:30px;"><input type="text" name="comment"  id='commentId'></td>
     <td class="table-styling"> <button type="button" id="waiver">Waiver</button></td>
   </tr>
  <% end %>

  $('#waiver').live("click", function() {
 var commentVal = $("#commentId").val();
 alert(commentVal); //getting same value for each button click

   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:48:08.690

```
$(document).on('click', '#waiver', function() {
   var commentVal = $(this).closest('tr').find("#commentId").val();
   console.log(commentVal);
}); 
```

当然，ID 是唯一的，看起来您正在循环内批量生产具有相同 ID 的元素，这不是一个好主意，并且会使 javascript 变得 boo-boo。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T08:48:47.523

您正在创建大量具有相同`id`属性的元素。该`id`属性用于标识*一个*元素。不再。

改用一个类：

```
<% @obj.each_with_index do |time_sheet, i| %>
    <tr>
        <td style="width: 30px;">
            <input type="text" name="comment" class="comment" />
        </td>

        <td class="table-styling">
            <button type="button" class="waiver">Waiver</button>
        </td>
    </tr>
<% end %> 
```

还有你的 JS：

```
$(document).on('click', '.waiver', function() {
    var commentVal = $(this).closest('tr').find('.comment').val();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T08:50:18.933

首先重要的是 ID 应该是唯一的！

如果要获取相应的文本框值，可以尝试**将代码替换为类名而不是**下面显示的 id

```
<% @obj.each_with_index do |time_sheet, i| %>
 <tr>
 <td style="width:30px;">
   <input type="text" name="comment"  class='comment-textbox'>    </td>
 <td class="table-styling"> 
   <button type="button" class="btn-waiver">Waiver</button></td>
 </tr> 
```

```
 $('.btn-waiver').live("click", function() {
 var commentVal =$(this).closest('tr').find('.comment-textbox').val();
     //or
 var commentVal = $(this).parents('tr:first').find('.comment-textbox').val();
 alert(commentVal); //getting same value for each button click

 }); 
```

# ios - SLRequest 进度回调（iOS 6）

> ID：13875236
> 
> 赞同：0
> 
> 时间：2012-12-14T08:45:33.363
> 
> 标签：ios, facebook, upload, progress, social

我正在使用 iOS6 的新社交 API 实现 Facebook 视频上传，一切正常，除了我没有找到知道上传进度的方法……Apple 似乎提供的唯一 API 是如果上传完成或失败，有可能他们是如此--------以至于他们没有提供知道它的方法吗？

我也没有找到关于这个话题的任何问题，不可能只有我对此感兴趣，如果有人知道其他任何事情，请告诉我们。

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:23:01.470

我一直在努力解决这个问题，终于让它工作了。我想我会分享我的片段：

```
-(void)sendTwitter {
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:
                              ACAccountTypeIdentifierTwitter];

[account requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
    if (granted == YES) {
        NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];
        if ([arrayOfAccounts count] > 0) {
            twitterAccount = [arrayOfAccounts lastObject];

            NSString *status = @"Secrets";
            UIImageView *uploadImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 640, 480)];
            UIImage *uploadImage = [image resizedImageToFitInSize:uploadImageView.bounds.size scaleIfSmaller:NO];

            NSURL *requestURL = [NSURL URLWithString:@"https://upload.twitter.com/1.1/statuses/update_with_media.json"];

            SLRequest *postRequest = [SLRequest
                                      requestForServiceType:SLServiceTypeTwitter
                                      requestMethod:SLRequestMethodPOST
                                      URL:requestURL parameters:nil];
            [postRequest addMultipartData:UIImageJPEGRepresentation(uploadImage, 0.6) withName:@"media[]" type:@"multipart/form-data" filename:nil];
            [postRequest addMultipartData:[status dataUsingEncoding:NSUTF8StringEncoding] withName:@"status" type:@"multipart/form-data" filename:nil];
            [postRequest setAccount:twitterAccount];

            NSURLRequest *preparedRequest = [postRequest preparedURLRequest];

            AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:preparedRequest];

            [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
                NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
            }];
            [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
                    NSLog(@"Twitter upload success");
                    [self completedSendingPhotos];
                } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                    NSLog(@"Twitter upload error");
                }];

            [operation start];
        }
    }
}]; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:50:18.047

用于`preparedURLRequest`获取`NSURLRequest`对象。通过手动发送请求，`NSURLConnection`您可以提供一个可以处理委托方法的委托，例如`connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T17:54:11.327

对于那些感兴趣的人来说，我是如何使用 AFNetworking 的，在拥有一个 SLRequest 对象之后，我使用@Jesper 的方式来获取一个进度监听器。

```
NSURLRequest* preparedRequest = [uploadRequest preparedURLRequest];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:preparedRequest];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"%lld bytes out of %d sent.", totalBytesWritten, fileSize);
    float progress = totalBytesWritten/(float)fileSize;
}];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Facebook upload success");
    });
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Facebook upload error");
    });
}];

[operation start]; 
```

希望有帮助！

# ios - IOS，Facebook不断在webview而不是Safari中打开

> ID：13875237
> 
> 赞同：0
> 
> 时间：2012-12-14T08:45:39.857
> 
> 标签：ios, facebook, xcode4, integration

我正在将 Facebook 集成到我的 iOS 应用程序中，并已按照[此链接](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)中的所有步骤进行操作。但是当我尝试登录用户时，它会不断打开登录页面，`UIWebView`而不是在 Safari 中打开，这反过来又不起作用。

我在这里错过了什么吗？

> > 原来我的应用程序是在 6.0 上构建的。一旦我开始在 4.3 上运行它，它就得到了修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T08:33:49.653

原来我的应用程序是在 6.0 上构建的。一旦我开始在 4.3 上运行它，它就得到了修复。

# postgresql - Postgresql 无法正确安装

> ID：13875244
> 
> 赞同：6
> 
> 时间：2012-12-14T08:46:11.600
> 
> 标签：postgresql

最近几天我一直在尝试安装 PostgreSQL 9.2。我想我尝试了所有可以在网上找到的东西，但服务仍然无法启动。我目前正在运行 Windows 7 SP1。我曾经安装过 PostgreSQL 8.3 并且工作正常，但几周前我决定卸载它。我彻底卸载了它（删除了 postgres 用户和数据文件），现在每次我尝试安装任何版本时，在加载数据库模块时，我都会在安装结束时收到这个非致命错误。我设法看到 postgresql 服务没有启动，或者正如 Windows 所说的那样，它启动然后停止。这是安装日志文件的相关部分：

成功处理771个文件；处理 0 个文件失败

initcluster.vbs 运行完成

脚本标准错误：

```
正在配置数据库服务器启动...
执行 cscript //NoLogo "C:\Program Files (x86)\PostgreSQL\9.2\installer\server\startupcfg.vbs" 9.2 "NT AUTHORITY\NetworkService" "****" "C:\Program Files (x86)\ PostgreSQL\9.2" "C:\Program Files (x86)\PostgreSQL\9.2\data" "postgresql-9.2"
脚本退出代码：0

脚本输出：
 startupcfg.vbs 运行完成

脚本标准错误：

创建菜单快捷方式...
执行 cscript //NoLogo "C:\Program Files (x86)\PostgreSQL\9.2\installer\server\createshortcuts.vbs" 9.2 "postgres" 5432 "PostgreSQL 9.2 (x86)" "C:\Program Files (x86)\PostgreSQL \9.2" "C:\Program Files (x86)\PostgreSQL\9.2\data" "postgresql-9.2"
脚本退出代码：0

脚本输出：
 启动 FixupFile(C:\Program Files (x86)\PostgreSQL\9.2\scripts\serverctl.vbs)...
   正在打开文件以供阅读...
   正在关闭文件（正在读取）...
   替换占位符...
   正在打开文件进行写入...
   正在关闭文件...
  结束 FixupFile()...
启动 FixupFile(C:\Program Files (x86)\PostgreSQL\9.2\scripts\runpsql.bat)...
   正在打开文件以供阅读...
   正在关闭文件（正在读取）...
   替换占位符...
   正在打开文件进行写入...
   正在关闭文件...
  结束 FixupFile()...
createshortcuts.vbs 运行完成

脚本标准错误：

启动数据库服务器...
执行 cscript //NoLogo "C:\Program Files (x86)\PostgreSQL\9.2\installer\server\startserver.vbs" postgresql-9.2
脚本退出代码：0

脚本输出：
 启动 postgresql-9.2
服务postgresql-9.2启动成功
startserver.vbs 运行完成

脚本标准错误：

正在加载其他 SQL 模块...
执行 cscript //NoLogo "C:\Program Files (x86)\PostgreSQL\9.2\installer\server\loadmodules.vbs" "postgres" "****" "C:\Program Files (x86)\PostgreSQL\9.2" "C:\Program 文件 (x86)\PostgreSQL\9.2\data" 5432
脚本退出代码：2

脚本输出：
 在 postgres 数据库中安装 adminpack 模块...
    执行 'C:\Users\George\AppData\Local\Temp\radA5996.bat'...
psql：服务器意外关闭连接
    这可能意味着服务器异常终止
    在处理请求之前或期间。

无法在“postgres”数据库中安装“adminpack”模块
loadmodules.vbs 运行完成

脚本标准错误：
 程序以错误退出代码结束

运行 cscript 时出错 //NoLogo "C:\Program Files (x86)\PostgreSQL\9.2\installer\server\loadmodules.vbs" "postgres" "****" "C:\Program Files (x86)\PostgreSQL\9.2 " "C:\Program Files (x86)\PostgreSQL\9.2\data" 5432 : 程序以错误退出代码结束

[10:34:28] 将数据目录写入ini文件...
[10:34:28] 将端口号、服务 ID、区域设置和超级用户写入 ini 文件...
[10:34:28] 将 ServiceID(postgresql-9.2) 写入注册表/ini ...
[10:34:28] 将超级用户写入 ini 文件和 Windows 注册表...
[10:34:28] 将服务帐户写入 ini 文件和 Windows 注册表...
[10:34:28] 将服务器描述写入 ini 文件...
[10:34:28] 将服务器品牌写入 ini 文件...
[10:34:28] 将“堆栈生成器是否已禁用”写入 ini 文件...
[10:34:29] 完成运行后安装/升级任务。

创建卸载程序
创建卸载程序 25%
创建卸载程序 50%
创建卸载程序 75%
创建卸载程序 100%
安装完成

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:01:31.213

我有同样的问题。在某一时刻，它需要通过互联网连接获取一个包。这是不对的，因为安装包 s/b 能够在没有连接的情况下安装，但事实就是如此。您的防火墙阻止了安装。这是您需要做的：

关闭 Windows 防火墙（控制面板\所有控制面板项\Windows 防火墙\自定义设置）

如果您使用这个出色的程序，请关闭防火墙控制（从任务栏退出或使用任务管理器来终止 UI 和服务 - 2 项）

用于下载选定的包：关闭密钥保护服务：关闭基本过滤（让您不受保护！- 重新启动 BFE 时将重新启动依赖项） 基本过滤引擎 IKE 和 AuthIP IPsec 密钥模块 IPsec 策略代理 ICS ...

不要忘记重新启动所有保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T10:57:12.003

我在 Win7 x64 上遇到了 Pg 9.2.4 安装程序的类似问题。事实证明，由于停止了 postgres 服务，'adminpack' 模块没有加载。它开始，然后几乎立即终止。您可以手动检查这个正在运行的 Pg 服务，看看它是否可以加载。如果不能，这可能是因为“数据”目录中缺少配置文件。initdb 命令无法创建有效的集群并复制相应的 *.conf 文件。我试图深入研究细节，安装程序对用户权限进行了复杂的检查，这在你（和我）的情况下可能会失败。

只需尝试从 zip 二进制文件安装 Pg。只用了以下命令（不到 20 分钟）。[原创文章](http://www.petrikainulainen.net/programming/tips-and-tricks/installing-postgresql-9-1-to-windows-7-from-the-binary-zip-distribution/)。

1）创建“postgres”windows用户（没有管理员权限）并授予它对您的Pg文件夹和“data”文件夹的完全权限。要从命令行执行此操作，请以管理员身份运行“cmd”（按 Ctrl-Shift-Enter 而不是 Enter 来运行“cmd”）并发出：“net user postgres /add”。然后右键单击您的 Pg 文件夹（和“data”文件夹，如果它在外面）并授予“postgres”的所有权限。

2) 安装 Microsoft Visual C++ 20xx Redistributable Package 附带一键式 Pg 安装程序 (vcredist_x64.exe from Users\"your user"\AppData\Local\Temp\postgresql_installer_ ***** ***** - 由第一次运行时一键式 Pg 安装程序创建的文件夹）。

3) 将 Pg 二进制文件解压缩到您的 Pg 文件夹，并以管理员身份将“cmd”解压缩到其 bin 目录。

4) 运行初始化集群：initdb -U postgres -A password -E utf8 -W -D "path to your Pg folder"\data

5）运行安装windows服务：pg_ctl register -N "postgresql" -U ".\postgres" -D "path to your Pg folder/data" -w

6）打开windows服务列表并打开“postgresql”服务属性。然后在那里为 windows 用户 postgres 设置密码。尝试启动新的 Pg 服务。如果它开始，那么一切都应该没问题。

7) 打开 bin\pgAdmin3，连接到本地服务器并打开 postgres 数据库及其元数据。您应该会看到有关缺少管理服务的投诉并提出更正此问题的建议。只需按确定 - 应该安装“adminpack”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-26T18:58:59.307

只能从用英文编写的 Windows 帐户安装 postgres。例如，从用户“Аня”安装总是失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T21:48:26.800

Solution is to shutdown the windows firewall before installing. After the installation you can enable the windows firewall.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-07T07:46:45.413

尝试在 Windows 上具有特殊权限的“C:\Program Files”之外安装。我们遇到了类似的问题，只需安装到 C:\Postres92 中，一切都可以直接使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T07:54:42.823

*我有同样的问题，由于程序文件*目录中的访问权限受限，因为数据目录是`C:\Program Files (x86)\PostgreSQL\9.2\data`

更改数据目录以`C:\ProgramData\PostgreSQL\9.2\data`解决问题。

# php - JavaScript 确认框在 php 中不起作用

> ID：13875245
> 
> 赞同：1
> 
> 时间：2012-12-14T08:46:13.470
> 
> 标签：php, javascript

```
echo"<td> <a href ='del.php?id=$id' onclick='return confirm('Are you sure?');'><center>Delete</center></a></td>"; 
```

我想要一个提示消息，因为如果他/她按“确定”，用户将单击“删除”，然后它将重定向到数据将被删除的页面，如果他/她将按“取消”，则不会发生任何事情. 通过使用上面的代码，我无法获取我的提示框和数据直接被删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T08:47:37.050

你在这里混`'`在一起`"`。

```
echo "<td> <a href ='del.php?id=$id' onclick='return confirm(\"Are you sure?\");'><center>Delete</center></a></td>"; 
```

您的代码会输出以下内容：

```
<td> 
  <a href ='del.php?id=123' onclick='return confirm('Are you sure?');'><center>Delete</center></a>
</td> 
```

即使从 SOs 语法突出显示中您也可以看到，`onclick`处理程序中存在问题。你有`'`其他的里面`'`。因此，此时您应该将内部替换`'`为`"`. 要在 PHP 中这样做（你也有周围`"`的地方），只需`"`使用转义来转义内部`\"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:23:24.070

要消除复杂性，您可以编写如下代码：

```
$confirm="return confirm('Are you sure?');";
echo "<td> <a href ='del.php?id=$id' onclick='$confirm'><center>Delete</center></a></td>"; 
```

或者

```
echo "<script> function isConfirm() { if(!confirm('Are you sure?')) return false;}";
echo "<td> <a href ='del.php?id=$id' onclick='return isConfirm()'><center>Delete</center></a></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:49:51.050

这与 PHP 无关。标记的 onclick 处理程序`a`不会阻止浏览器更改位置。你可以这样做：

```
echo"<td> <a href='javascript:void' onclick='if (confirm(\"Are you sure?\")) window.location=\"del.php?id=$id\";'><center>Delete</center></a></td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:19:37.640

```
echo"<td><a href ='del.php?id=$id' onclick=\"return confirm('Are you sure?');\"><center>Delete</center></a></td>"; 
```

你错过了双引号 onclick=\" \";

由于单引号，程序未检测到您的确认框 >> onclick='return confirm('Are you sure?');'

# macos - PyQt 安装过程中 SIP 版本检查不正确

> ID：13875246
> 
> 赞同：6
> 
> 时间：2012-12-14T08:46:15.200
> 
> 标签：macos, pyqt, osx-leopard, python-sip

我一直在尝试在我的 mac（OSX 10.6.8）上安装 PyQt，但我仍然遇到这个问题：

当我尝试安装 PyQt-mac-gpl-4.9.6 时，我得到了这个

```
Error: This version of PyQt requires SIP v4.14.2 or later. 
```

奇怪的是，当我想在控制台上检查 sip 版本并写

```
sip -V 
```

，我得到正确的版本：4.14.2

我检查了我的 PATH，但我发现的在线提示都没有帮助我。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:47:09.110

我建议检查您是否在不同的位置安装了 sip，较新的版本位于不在`PATH`.

```
mdfind -name sip | grep '/bin/' 
```

这应该会告诉您计算机上的所有 sip 二进制文件。检查所有的版本，然后确保路径在前面`PATH`

它实际上可能是什么，不管看起来你只有一口，是一个剩余的`.pyc`文件，在你想要的小口之前被拾取。试试这个来确认：

```
$ python
>>> import sipconfig
>>> print sipconfig 
```

这将告诉您它在哪里找到 sipconfig。如果它看起来像错误的位置，或者如果您检查它并且只剩下`pyc`文件，请将其删除。然后应该正确找到您的新sip。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T01:43:36.147

在 Mac OSX 10.7.4 和 Python 2.7 上安装 sip 4.14.2 而不是以前版本的 4.13.1 后，我遇到了类似的问题。奇怪的是，命令行中的 sip 版本与 Python sipconfig 模块中的版本不同。

```
$ sip -V
4.14.2
$ python -c "import sipconfig; print sipconfig.version_to_string(sipconfig.Configuration().sip_version)"
4.13.1 
```

我再次运行安装，这次以“sudo make install”运行安装步骤，两个版本在 4.14.2 匹配，PyQt 安装成功。

```
$ cd ~/Downloads/sip-4.14.2/
$ python configure.py
$ make
$ sudo make install 
```

# c++ - 使用 C++ 进行用户界面设计

> ID：13875251
> 
> 赞同：0
> 
> 时间：2012-12-14T08:46:22.227
> 
> 标签：c++, user-interface

我想创建一个用户界面。格式应为以下链接中的示例。我想使用 C++ 语言作为 PL。那么，您有什么建议我该如何实现？

开发平台应该是Windows和Linux。

[http://www.visualpharm.com/images/Image/Loto%20Master/ui_design_lotomaster_main.png](http://www.visualpharm.com/images/Image/Loto%20Master/ui_design_lotomaster_main.png)

[http://www.crystalxp.net/galerie/img/img-resources-psp-firmware-user-interface-psd-gctonyhawk7-463.jpg](http://www.crystalxp.net/galerie/img/img-resources-psp-firmware-user-interface-psd-gctonyhawk7-463.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:52:43.977

[qt](http://qt.digia.com/Product/) ，用 c++ 创建 UI 的框架。IDE 适用于 linux 和 windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:56:15.737

Windows 和 Linux 下的用户界面开发是完全不同的领域。在 Windows 上，您通常在 Linux GTK+ 或 KDE 上使用带有框架的 WinAPI（例如 MFC）。但是，有一个适用于（Windows 和 Linux）的框架 - [Qt](http://qt-project.org/)。

# java - 移除桌面服务环境中的 Java 应用程序部署和更新

> ID：13875254
> 
> 赞同：1
> 
> 时间：2012-12-14T08:46:27.900
> 
> 标签：java, windows, deployment, remote-desktop

我有一个需要在[远程桌面服务](http://technet.microsoft.com/en-us/windowsserver/ee236407)环境中使用的 Java 应用程序。

由于 javaw.exe 进程拥有 JAR 文件的文件句柄，因此只要其他用户正在使用它，我就无法替换 JAR。

我也看不到当前用户，因为在同一台服务器上运行的其他 JAR 文件可能还有许多其他 javaw.exe 进程。在服务器场中，我必须检查每台服务器是否有打开的实例。

是否有在此环境中部署和更新 Java 应用程序的最佳实践？

一些想法：

*   使用具有配置文件的启动器应用程序，该配置文件指定 JAR 文件的位置
*   修改开始菜单中的条目以指向新的 JAR 文件位置
*   登录时将 jar 复制到用户特定的工作文件夹
*   使用 JWS

然而，选项 3 和 4 意味着需要将 Log4J 输出定向到操作/开发人员可以访问的文件夹中的位置

# objective-c - 核心数据 sqlite 文件增长

> ID：13875255
> 
> 赞同：2
> 
> 时间：2012-12-14T08:46:29.730
> 
> 标签：objective-c, ios, sqlite, core-data

我有一个同步过程，我用`Core Data`它来存储大量信息。几次我`SQLite`用组织者下载了真实的数据库文件来检查数据是否正确。

几天前，我意识到两个`SQLite`文件的大小差异很大。一个文件是 80MB，另一个文件是 100MB。当我用查看器检查其中的数据时，`SQLite`没有任何区别。相同的表，相同的索引，相同的行。怎么可能？当我删除对象时，是否有可能某些数据仍在文件中`Core Data`？

编辑：

解决方案是一个选项标志，可以插入一个选项 NSDictionary 并作为参数添加到 addPersistentStore 方法。

```
NSSQLiteManualVacuumOption
Option key to rebuild the store file, forcing a database wide defragmentation when the store is added to the coordinator.

This invokes SQLite's VACUUM command. It is ignored by stores other than the SQLite store. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:49:08.563

出于性能原因，Sqlite 在删除数据时不会主动返回未使用的磁盘空间。这可能就是您看到差异的原因。有关更多信息，请参阅此链接：

[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q12)

# java - MaxPermSize 忽略了 Tomcat 7

> ID：13875256
> 
> 赞同：2
> 
> 时间：2012-12-14T08:46:40.753
> 
> 标签：java, tomcat, permgen

我正在尝试在 Windows Tomcat 服务器上运行多个工具。服务器启动正常，我也可以看到Tomcat的管理器页面。但是当我打开一个工具时，会出现“OutOfMemoryError: PermGen space”。我在 catalina.bat 中设置 MaxPermSize 做了很多尝试，这是我的 CATALINA_OPTS：

```
set CATALINA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms64m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=512m -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled" 
```

当我在我的 Tomcat 服务器旁边运行 JVisualVM 时，我可以看到参数被很好地拾取： ![概述](../Images/dc6b7b7387e81fd5c059d284413e8836.png)

但是当我转到监视器选项卡并检查 PermGen 时，最大值是 67mb，而不是我设置的 CATALINA_OPTS 的 512。因此设置了参数，但 Tomcat 忽略了它们。 ![烫发素](../Images/b881c25eea9e8632841187879166d98c.png)

我已经尝试解决这个问题几个小时了，但没有成功..

任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:25:31.157

删除集合中的“”，你就没事了……还不知道为什么。但这就是答案

设置 CATALINA_OPTS=-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms64m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=512m -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled

- 编辑

顺便说一句，我认为您也需要 UseConcMarkSweepGC，否则其他 2 个 CMS 参数将不起作用（并且仅需要 2 个参数中的一个，具体取决于 JVM 的版本）

请参阅 [JVM 标志 CMSClassUnloadingEnabled 实际上做了什么？](https://stackoverflow.com/questions/3334911/what-does-jvm-flag-cmsclassunloadingenabled-actually-do)

-- 编辑 2

这个问题也被问到了tomcat6：[https ://serverfault.com/questions/64894/setting-catalina-opts-for-tomcat6-on-windows-doesnt-work](https://serverfault.com/questions/64894/setting-catalina-opts-for-tomcat6-on-windows-doesnt-work)

太糟糕了，博主没有解释为什么你不需要在 windows 中使用引号。

[http://javahowto.blogspot.nl/2006/06/6-common-errors-in-setting-java-heap.html](http://javahowto.blogspot.nl/2006/06/6-common-errors-in-setting-java-heap.html)

但我认为这是因为引号被视为一个重要论点。我唯一不明白的是为什么 jvisualvm 假装你设置正确。但我猜参数的显示实际上并没有看它是如何在 JVM 中设置的，而只是很好地格式化了参数。

# c# - 如何计算 C# 或 linq 列表中包含的项目数

> ID：13875259
> 
> 赞同：0
> 
> 时间：2012-12-14T08:46:44.457
> 
> 标签：c#, linq

我想计算列表包含字符串的计数。

我不想要列表计数。我不想要列表的特定字符串计数。

我只想要列表中包含特定字符串的项目数。

在 Linq 或普通 c# 中以任何方式

```
 Hashtable newlist  = new Hashtable();
      newlist = System.Web.HttpContext.Current.Application["Userlogin"] as Hashtable;
count = newlist.Count(s => newlist.Contains(sKey));

foreach (DictionaryEntry item1 in newlist)
{
    if (newlist.Contains(sKey))
    {
         count = count + 1;
    }
} 
```

newlist 是一个哈希表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:54:09.803

据我所知你的问题

```
List<string> list = new List<string>() { "a","b","a","c","c" };

var counts = list.GroupBy(x => x).ToDictionary(x => x.Key, x => x.Count());

var cntC = counts["c"];
var cntA = counts["a"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:50:41.567

怎么样 ：

```
count = newlist.AsQueryable().Where(s => s.Contains(sKey)).Count(); 
```

我是否正确理解你想要得到的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:55:50.617

类似的东西

```
var newlist = new string[5] {"qqq","wwqww","wqwww","wqwww","wqwwxw"};

var count = newlist.Count(s => s.Contains("x")); 
```

输出

```
count = 1 
```

# eclipse - 集成 JBOSS 和 Eclipse

> ID：13875262
> 
> 赞同：0
> 
> 时间：2012-12-14T08:47:08.373
> 
> 标签：eclipse, jboss

我有 JBOSS 服务器。我曾经只使用 notepad++ 来制作 Web 应用程序。我曾经创建必要的文件夹，如 web-inf 和 web.xml 等文件。对于大型项目，完成所有这些并手动编译变得很麻烦。我想为此使用eclipse。我看到了这个教程 - [http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html](http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html)。但我不明白如何制作服务器。我已经有服务器了。

**我想要做的是在 eclipse 中编写 JSP 和 Servlet，并且构建应该自动部署在 jboss 服务器中。** 这要怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:12:04.143

安装[**JBoss 工具**](http://marketplace.eclipse.org/node/420896)

之后，按照[**此处**](https://docs.jboss.org/jbossweb/3.0.x/deployer-howto.html)的说明开始并将应用程序部署到 JBoss 服务器。

要在构建后自动部署应用程序，您可以使用 ANT 或 Maven 等构建工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T08:56:37.443

前段时间我为此写了一个教程：[使用 Eclipse 设置 Web 开发环境](http://www.software-architect.net/tutorials/setting-up-a-web-development-environment-with-eclipse/setting-up-the-application-server-jboss.html)

它展示了如何在 Eclipse 中设置 JBoss（此外，它还展示了如何设置 Tomcat 和 Weblogic），还展示了如何构建一个简单的示例 Servlet 来验证安装是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T08:50:28.827

如果您已经在服务器端使用 JBoss，那么也请查看客户端：[http ://www.jboss.org/developer](http://www.jboss.org/developer)

（我自己没试过，但是……）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T12:40:06.527

只需打开eclipse然后转到：

1.  “Help-> Check For Updates” 它将检查 Eclipse 更新并安装新的可用版本。
2.  现在“Help -> Eclipse Market Place”从搜索结果中搜索“Jboss tools”，选择一个（作为你的eclipse版本）并安装它。它将为新的 jboss 版本添加适配器。
3.  现在从服务器视图添加新服务器，选择 Jboss 版本，然后添加您的 jboss 主目录。然后完成。

第 1 步是可选的，但有时它会有所帮助。

# iphone - UITableview 如何在tableview中显示图片

> ID：13875266
> 
> 赞同：-2
> 
> 时间：2012-12-14T08:47:48.743
> 
> 标签：iphone, ios, xcode

![在此处输入图像描述](../Images/3924f3f967c11338e7f425b19299d57a.png)视图控制器.h

```
#import <UIKit/UIKit.h>

@interface TableViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>
{
    UITableView *table;
    NSArray *tableData;
}
@end 
```

视图控制器.m

```
#import "TableViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    table.delegate = self;
    table.dataSource = self;

    table = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds] style:UITableViewCellStyleDefault];
    [self.view addSubview:table];

    tableData = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"StopWatch.png"],[UIImage imageNamed:@"TrashCan.png"],[UIImage imageNamed:@"Key.png"],[UIImage imageNamed:@"Telephone.png"],[UIImage imageNamed:@"ChalkBoard.png"],[UIImage imageNamed:@"Bucket.png"],nil];

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil)
    {
        //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.imageView.image = [tableData objectAtIndex:indexPath.row];
    return cell;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *str = @"TableViewSection";
    return str;
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 22;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 80;
}

@end 
```

我想在 tableview 单元格上显示这些图像。

请告诉我，如何在表格视图单元格上显示图像。

我的风格只是编码。我不习惯故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:59:26.180

您在对象初始化之前分配`delegate`and`dataSource`属性，请尝试更改顺序，如下所示：

```
table = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds] style:UITableViewCellStyleDefault];
table.delegate = self;
table.dataSource = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:42:06.117

你的数据源是什么？xml 表格视图单元格

这样静态 cell.imageView.image = [UIImage imageNamed:@"Maps-icon.png"]; cell.imageView.highlightedImage = [UIImage imageNamed:@"Maps-icon.png"]; 或者

```
[cell.imageView setImageWithURL:[NSURL URLWithString:[newsItem objectForKey:@"image"]]
               placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

newsItem NSDictionary

NSDictionary *newsItem = [soapSource objectAtIndex:indexPath.row];

# java - 锁定按钮长按 3 秒

> ID：13875268
> 
> 赞同：-2
> 
> 时间：2012-12-14T08:47:58.353
> 
> 标签：java, button, swt

> **可能重复：**
> [java 按钮按下 3 秒](https://stackoverflow.com/questions/13805482/java-button-pressed-for-3-seconds)

我创建了一个按钮，我想要这些：

当用户单击按钮时，它会保持按下状态 3 秒。3 秒后按钮应该再次看起来可以按下。所以用户不能在不等待 3 秒的情况下再次单击该按钮。我试过这些：

```
{
 button3 = new Button(c20, SWT.PUSH | SWT.CENTER);
 button3.setText("QUERY");
 button3.setBounds(205, 131, 62, 40);
 button3.addSelectionListener(new SelectionListener() {
    public void widgetSelected(SelectionEvent event) {
        try {
            start_query();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    setPressedIcon();///??
    public void widgetDefaultSelected(SelectionEvent event) {
    }
}); 
```

}

你有什么建议吗？

# delphi - 如何可靠地知道（以编程方式）何时在 Chromium 中加载页面

> ID：13875271
> 
> 赞同：6
> 
> 时间：2012-12-14T08:48:11.197
> 
> 标签：delphi, chromium, tchromium

我在使用 TChromium (DCEF1) 的 OnLoadEnd 事件时遇到问题。

我有一个带有 TButton 和 TChromium 的表单。

按钮的 OnClick 事件调用一个函数，该函数列出了已加载页面的表单。如果我等待页面加载完成然后单击按钮，此功能可以正常工作；但是如果我从 TChromium OnLoadEnd 事件处理程序调用此函数，则永远不会调用回调函数，因此，我得到一个空列表。

按钮代码（将注释读入代码）：

```
procedure TForm2.Button3Click(Sender: TObject);
var
  Q: TWebChromium;
begin
  Q := TWebChromium.Create(Chromium1); // <- class to access DOM
  Q.WebFormNames; // <- method to get forms name
  ShowMessage(Q.Forms.Text); // <- show forms
end; 
```

OnLoadEnd 代码：

```
procedure TForm2.Chromium1LoadEnd(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer; out Result: Boolean);
begin
  if (browser <> nil) and (browser.GetWindowHandle = TChromium(Sender).BrowserHandle) and ((frame = nil) or (frame.IsMain)) then
  begin
    Button3Click(nil);
  end;
end; 
```

获取表单名称的方法代码（将注释读入代码）：

```
procedure TWebChromium.WebFormNames;
var
  Finish: Boolean;
  EndTime: TTime;
begin
  FForms.Clear; // <- property (TStringList)
  if not Assigned(FWebBrowser) then // <- FWebBrowser: property that contain the TChromium
    raise Exception.Create('WebBrowser not assigned');
  if not (FWebBrowser is TChromium) then 
    raise Exception.Create('The WebBrowser property is not a TChromium.');

  Finish := False;
  TChromium(FWebBrowser).Browser.MainFrame.VisitDomProc(
        procedure (const doc: ICefDomDocument) // <- this procedure is not called if this method is called from OnLoadEnd event
        begin
          FForms.CommaText := GetFormsName(doc.Body); 
          Finish := True;
        end
  );
  EndTime := IncSecond(Time, 4);

  repeat Application.ProcessMessages until Finish or (Time > EndTime);
  if Time > EndTime then
    raise Exception.Create('Time out');
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-11T11:35:51.870

好吧，我知道这个问题是几年前提出的，但我对 TChromium 还是很陌生。这是我从以前的提案中提出的解决方案。一般情况下，TChromium 会发送 Event OnLoadEnd，但会在加载之前发送，例如 JS。所以我解决了这个问题，以便我在 OnLoadEnd 过程中等待一段时间，以防仍然加载任何脚本，然后发送通知，像这样

```
procedure TForm1.OnLoadEndCust(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer);
var EndTime: TTime;
begin
  EndTime := IncSecond(Now, 2);

  repeat Application.ProcessMessages until (Now > EndTime);

end; 
```

到目前为止 - 这已经足够了，但还有其他更好或更优雅的解决方案吗？

为什么我们应该在上面的代码中使用 VisitDomProc？当我们从 OnLoadEnd 调用它时，它似乎是不必要的。小伙伴们怎么看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T09:37:27.323

我已经使用了 DCEF 1 和 DCEF 3，如果你可以切换到 3，你应该有很多改进。

这是 DCEF 3 的链接： [https ://code.google.com/p/dcef3/](https://code.google.com/p/dcef3/)

您拥有的方法绝对应该有效：

```
procedure TMainForm.Chromium1LoadEnd(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer);
begin
  if IsMain(browser, frame) then begin
    // main window done from here on in
  end;
end; 
```

如果不是，它可能是两件事中的一件，

1.  您的表单数据搞砸了，不知何故不再附加事件，请仔细检查组件中的事件属性。

2.  您的构建有问题，尝试在示例目录中运行 GUIClient，它具有相同的事件并且应该被触发，如果它没有尝试找到另一个构建（最好是我之前链接到的 DCEF3 版本）

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-22T10:32:43.383

我遇到了同样的问题，我注意到当 httpStatusCode 为 200 时页面已完全加载。为了方便起见，我实现了一个布尔变量。

```
 TForm2 = class(TForm)
    procedure Chromium1LoadEnd(Sender: TObject; const browser: ICefBrowser;
      const frame: ICefFrame; httpStatusCode: Integer);
    procedure Chromium1LoadStart(Sender: TObject; const browser: ICefBrowser;
  private
    { Private declarations }
    IsFullyDisplayed : Boolean;
  end;

procedure TForm2.Chromium1LoadEnd(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer);
begin
  if frame = nil then
    exit;

  if httpStatusCode=200 then
  begin
    IsFullyDisplayed:=True;
  end;
end;

procedure TForm2.Chromium1LoadStart(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame);
begin
  IsFullyDisplayed := False;
end; 
```

# .htaccess - 带有 htaccess 的动态子域（不重定向）

> ID：13875273
> 
> 赞同：4
> 
> 时间：2012-12-14T08:48:24.060
> 
> 标签：.htaccess, dynamic, subdomain

目前，我通过使用 htaccess 有一个这样的 url 系统：

```
- www.domain.com/member/username
- www.domain.com/member/username/contact
- www.domain.com/member/user/album/title-of-the-album/albumID 
```

..类似的东西

这是我的 htaccess，它运行良好。

```
RewriteRule ^member/([a-zA-Z0-9_-]+)$   member.php?username=$1
RewriteRule ^member/([a-zA-Z0-9_-]+)/contact$   contact.php?username=$1
RewriteRule ^member/([a-zA-Z0-9_-]+)/album/([a-zA-Z0-9_-]+)/([0-9]+)$   album.php?username=$1&title=$2&album_id=$3 
```

现在我想为用户设置一个动态子域系统，比如“username.domain.com”所以我决定使用下面的htaccess：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} ([^.]+)\.domain\.com [NC]
RewriteRule ^(.*)$ www.domain.com/member/%1 [L] 
```

但这会将用户重定向到他们的旧域“www.domain.com/member/username”而不是“www.domain.com/member/username”我想让用户留在“username.domain.com”（不地址栏中的 url 更改）。

如果可能，是否有机会为其他新 url 保持相同的结构，例如当我键入时：

*   “username.domain.com/contact”将加载“www.domain.com/member/username/contact”的内容（地址栏没有url变化）
*   "username.domain.com/album/title-of-the-album/albumID" 将加载 "www.domain.com/member/username/album/title-of-the-album/albumID" 的内容（没有 url地址栏中的更改）

请帮忙 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:50:14.613

尝试：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} ([^.]+)\.domain\.com [NC]
RewriteRule ^/?$ /member.php?username=%1 [L]

RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} ([^.]+)\.domain\.com [NC]
RewriteRule ^/?contact$ /contact.php?username=%1 [L]

RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} ([^.]+)\.domain\.com [NC]
RewriteRule ^/?album/([a-zA-Z0-9_-]+)/([0-9]+)$ /album.php?username=%1&title=$1&album_id=$2 [L] 
```

# git - 在推送到 git 后重新启动 PlayFramework 2 实例的脚本 bash？

> ID：13875275
> 
> 赞同：4
> 
> 时间：2012-12-14T08:48:28.047
> 
> 标签：git, bash, playframework-2.0

当我推送到我的服务器时，我想自动拉取、停止和重新启动我的 Play Framework 2.1 实例。

我制作了一个从命令行运行的 bash 脚本来执行所有操作，但我希望它在推送后自动运行。我想通过一个`post-receive`钩子来执行它，但是脚本运行时间太长，并且退出太快。

（需要太长时间的是 compile & stage 命令）

这是我的脚本：

```
#!/bin/bash
#
# /etc/rc.d/init.d/myscript
#
# Starts the myscript Play Framework daemon
#

### BEGIN INIT INFO
# Provides: myscript
# Required-Start: $local_fs $remote_fs $network $syslog
# Required-Stop: $local_fs $remote_fs $network $syslog
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: Start myscript server at boot time
### END INIT INFO

### BEGIN vars
PORT=9500
BASE_DIR=/path/to/project/
ENV=dev
PLAY_VERSION=2.1rc1
### END vars

#export _JAVA_OPTIONS="-Xms64m -Xmx1024m -Xss2m"

# Exit immediately if a command exits with a nonzero exit status.
set -e

update() {
    cd $BASE_DIR$ENV

    # Updating the project
    git pull origin master

    # Creating new project (MUST BE ON THE GOOD DIR)
    /opt/play/$PLAY_VERSION/play clean compile stage
}

start() {
    /sbin/start-stop-daemon --start --quiet --oknodo --user cyril --chuid cyril --background --startas $BASE_DIR$ENV"/target/start" -- "-Dhttp.port="$PORT" -Dconfig.file="$BASE_DIR$ENV".conf"
}

stop() {
    /sbin/start-stop-daemon --stop --quiet --oknodo --user cyril --chuid cyril --pidfile $BASE_DIR$ENV"RUNNING_PID"
    rm -f $BASE_DIR$ENV"RUNNING_PID"
}

case "$1" in
    start)
        echo "Updating and starting the server"
        update
        start
    ;;
    force-start)
        echo "Starting server"
        start
    ;;
    stop)
        echo "Stopping server"
        stop
    ;;
    restart)
        echo "Updating and re-starting the server"
        stop
        update
        start
    ;;
    force-restart)
        echo "Re-starting the server"
        stop
        start
    ;;
    *)
        echo $"Usage: $0 {start|force-start|stop|restart|force-restart}"
esac

exit 0 
```

如何在不等待整个停止、编译、阶段和启动命令完成的情况下从我的接收后挂钩调用此脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:02:22.077

您可以考虑将脚本放在 post-receive 钩子之外，将其放在 PATH 中，然后从 post-receive 钩子中调用它，并`&`在末尾加上 a（以便它与 post-receive 脚本分离运行）。

# java - 加速 Java 应用程序

> ID：13875277
> 
> 赞同：0
> 
> 时间：2012-12-14T08:48:28.560
> 
> 标签：java, multithreading

我的应用程序侦听某个目录及其子目录。为了收听目录，我使用[JNotify](http://jnotify.sourceforge.net)。在目录应用程序上创建新文件时，会检查文件并以某种方式对其进行处理。下面是代码：

```
import net.contentobjects.jnotify.JNotify;
import net.contentobjects.jnotify.JNotifyListener;

    public class JNotifyDemo {

    public void sample() throws Exception {
        // path to watch
        //String path = System.getProperty("user.home");
        String path = "/folder";
        System.out.println(path);

        // watch mask, specify events you care about,
        // or JNotify.FILE_ANY for all events.
        int mask = JNotify.FILE_CREATED
                | JNotify.FILE_DELETED
                | JNotify.FILE_MODIFIED
                | JNotify.FILE_RENAMED;

        // watch subtree?
        boolean watchSubtree = true;

        // add actual watch
        int watchID = JNotify.addWatch(path, mask, watchSubtree, new Listener());

        // sleep a little, the application will exit if you
        // don't (watching is asynchronous), depending on your
        // application, this may not be required
        Thread.sleep(1000000);

        // to remove watch the watch
        boolean res = JNotify.removeWatch(watchID);
        if (!res) {
            // invalid watch ID specified.
        }
    }

    class Listener implements JNotifyListener {

        public void fileRenamed(int wd, String rootPath, String oldName,
                String newName) {
            print("renamed " + rootPath + " : " + oldName + " -> " + newName);
        }

        public void fileModified(int wd, String rootPath, String name) {
            print("modified " + rootPath + " : " + name);
        }

        public void fileDeleted(int wd, String rootPath, String name) {
            print("deleted " + rootPath + " : " + name);
        }

        public void fileCreated(int wd, String rootPath, String name) {
            print("created " + rootPath + " : " + name);
            //check file whether it is xml or not
            //validate xml
            //do some internal processing of file
            // and do other jobs like inserting into database
        }

        void print(String msg) {
            System.err.println(msg);
        }
    }

    public static void main(String[] args) throws Exception {
        new JNotifyDemo().sample();
    }
} 
```

从代码中可以看出，应用程序每次处理一个文件。有什么建议可以加快这个应用程序的速度，比如使用线程或其他任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:54:09.007

我建议您使用`java.nio.file.Path`which extends`Watchable`接口，它可能会注册到监视服务，以便可以监视更改和事件。

这种事件驱动的方法可以加速您的应用程序。看看[例子](http://java.dzone.com/news/how-watch-file-system-changes)。

`Path`两者`Watchable`都包含在 java 7 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:14:31.610

实际进行了多少处理？请记住，IO 非常慢，除非您的处理需要相当长的时间，否则多线程解决方案将在读取文件时遇到瓶颈。

无论如何，实现并行处理的快速方法是启动一个[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)`Runnable`并以文件路径作为参数提交它。

# android - 使用 android-support-v4.jar 在 Android 2.x 中滚动小部件？

> ID：13875281
> 
> 赞同：0
> 
> 时间：2012-12-14T08:48:50.917
> 
> 标签：android, android-support-library

如我所见，Android 4.x 中越来越多的功能（如片段或操作栏）现在通过使用支持库在较低的 android 版本上得到支持。任何人都知道，如果它也适用于在 Android 3.x 中引入的小部件内部滚动？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:59:20.360

可能不会发生，也可能不太可能。这需要相应`RemoteView`的's等支持，比fragments等在平台上更深一些，当然欢迎大家试一试。

# java - Java中的模式比较技术

> ID：13875283
> 
> 赞同：1
> 
> 时间：2012-12-14T08:48:55.357
> 
> 标签：java, schema-compare

我正在使用 Spring、Hibernate 和 JPA 开发 Web 应用程序。在我的应用程序中，必须在源数据库中处理数据，并且必须在目标数据库中复制加密数据，这由 Masking Engine 完成。

如果创建了应用程序并且在进行掩码时如果数据库模式发生了更改，则必须对其进行处理。

目前我正在使用 SchemaCrawler 进行模式比较。但它对性能有很大的影响。

那么在 Java 中进行模式比较是否有任何替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:14:56.210

雅婷，

SchemaCrawler 有许多选项允许您仅获取您感兴趣的元数据，从而节省时间。例如，您可以使用正则表达式仅查找某些模式中的某些表。有关更多详细信息，请查看[SchemaCrawlerOptions的 javadocs。](http://schemacrawler.sourceforge.net/apidocs/schemacrawler/schemacrawler/SchemaCrawlerOptions.html)

Sualeh Fatehi，[SchemaCrawler](http://schemacrawler.sourceforge.net)

# iphone - 分发构建时冻结和黑屏 - 在调试中工作正常

> ID：13875286
> 
> 赞同：2
> 
> 时间：2012-12-14T08:49:15.120
> 
> 标签：iphone, objective-c, ios, freeze

我做了一个非常简单的图像浏览器应用程序，没有 xibs，没有高级的东西。我使用 AFNetwork 进行 JSON 调用，并在滚动视图中显示一些图像（10 张图像）

当我直接构建到设备时，它就像一个魅力，但如果我选择进行临时构建，应用程序会冻结在黑屏上。它甚至没有到达我的根视图控制器......

它不会崩溃，所以我没有崩溃报告，我在控制台中只有这样：

> mobile_house_arrest[4897]：最大打开文件数：125

代码如何在构建中运行，但在分发中失败？

我尝试了以下措施，但没有任何运气：

*   尝试从调试版本中删除 DEBUG = 1 变量
*   更改了方案，因此我的设备构建使用了发布方案
*   关闭僵尸和所有其他调试方法
*   Triplechecked 签名、配置文件等

我的构建目标是 6.0

我的应用委托：

```
@implementation SCAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[SCTestViewController alloc] init];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

有谁知道可能导致这种情况的原因？还是在调试中有效但在发布中无效的常见事物？

# ios - GIT 与 restKit 的混淆

> ID：13875291
> 
> 赞同：0
> 
> 时间：2012-12-14T08:49:30.787
> 
> 标签：ios, github, restkit

因此，我正在学习如何缓慢地使用 git 来获取 RestKit 的最新更新，因为旧版本具有保留周期……但是，当我使用 gitHub 客户端拉取时，它不会给我 AFNetworking 文件，我然后被告知使用命令

```
git submodule update --init --recursive 
```

我这样做，问题是我注意到运行后我运行

```
git submodule status 
```

它让我离开了 master 分支并将 HEAD 放回原处，从而使我恢复了旧的东西。因此回到泄漏和东西。

所以我想也许我可以使用 cocoapods 安装，或者在 AFNetworking 的 restkit 子模块中放置一个子模块......一切似乎都不起作用，现在我已经按照本指南[如何删除子模块？](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)直到最后一步，因为我不知道提交会做什么？我希望它不会承认我将所有内容都删除到 restkit 网站上的事实？我很困惑，最初我想做的就是将我必须的当前分支子模块切换到主模块。

援助将不胜感激。

**编辑：** 好的，回答 Commit 的作用，提交只会影响您的存储库副本，绝不会影响其他人从中获取代码的远程“主”存储库，所以本质上我能够提交它，然后运行来自我想要的分支的全新子模块，但问题仍然存在有没有办法在使用 --recursive 更新时切换您从中提取数据的分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:38:12.663

只需进入 RestKit 目录并输入：

```
git pull origin master 
```

（如果你当然使用主分支）

此外，如果您需要更新所有子模块，只需转到项目的根目录，然后键入：

```
git submodule foreach git pull 
```

`git submodule update`令人困惑，这是它的真正作用：

> 当您调用 git submodule update 时，它​​会在父存储库中查找每个子模块的 SHA，进入这些子模块，并检出相应的 SHA。如果您在常规存储库中签出 SHA，就会出现这种情况，这会将子模块置于分离的 HEAD 状态。

**编辑**

要简单地切换子模块的分支，比如说“开发”，只需在子模块中执行`git checkout development`，然后您应该可以执行`git pull origin development`

# c# - SaveChanges() 用于实体框架 4.1 中具有 TransactionScope 的多个 dbcontext

> ID：13875302
> 
> 赞同：3
> 
> 时间：2012-12-14T08:50:13.687
> 
> 标签：c#, .net, entity-framework, entity-framework-4, asp.net-mvc-3-areas

我使用`SaveChanges()`的方法如下：

`objAdbContext`数据库的`A`

`objBdbContext`数据库的`B`

更新 DB A 的表，如下所示

```
public string SaveA()
{

//Some stuff

  objAdbContext.SaveChanges();

  string result=UpdateDatabaseB(some parameters)

  //Some stuff

}

public string UpdateDatabaseB(some parameters)

{

  //Some stuff

   objBdbContext.SaveChanges();

  return "Success";

} 
```

这种情况下，数据库 B 没有更新。它是更新多个数据库的正确方法吗？

两者都是独立的数据库，在这种情况下如何实现 TransactionScope？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:07:46.487

试试这个：

```
using (TransactionScope scope = new TransactionScope())
{
    // Save changes but maintain context1 current state.
    context1.SaveChanges(SaveOptions.DetectChangesBeforeSave);

    // Save changes but maintain context2 current state.
    context2.SaveChanges(SaveOptions.DetectChangesBeforeSave);

    // Commit succeeded since we got here, then completes the transaction.
    scope.Complete();

    // Now it is safe to update context state.
    context1.AcceptAllChanges();
    context2.AcceptAllChanges();
} 
```

此示例取自此博​​客文章：

[使用 Entity Framework 4 管理事务](http://www.luisrocha.net/2011/08/managing-transactions-with-entity.html)

# hudson - 使用 hudson 创建和部署 war 文件

> ID：13875303
> 
> 赞同：0
> 
> 时间：2012-12-14T08:50:14.883
> 
> 标签：hudson

我想使用 hudson 创建一个战争文件。我做了以下步骤。

1.我在我的项目中创建了 build.xml。

2.在那个 ant 文件中，我提供了编译应用程序和创建战争的目标。

3.然后我创建了 hudson 作业，我在其中提供构建选项，即由 ant 调用。在部署选项中，我提供了 weContainer，我必须在其中部署战争。

4.它创造了战争并将其部署在网络容器上。

但这是正确的做法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:24:52.720

您可以使用 maven cargo 插件和复制工件插件来使用 hudson 部署战争。提供您的服务器管理员。在 apache tomcat 中添加用户。

```
<!-- Configuration for the Maven build -->
<build>
    <!-- The plugins tag as mandated by maven -->
    <plugins>
        <!-- Start's the plugin tag for Cargo! -->
        <plugin>
            <!-- Cargo Group Id -->
            <groupId>org.codehaus.cargo</groupId>
            <!-- Cargo's Artifact Id -->
            <artifactId>cargo-maven2-plugin</artifactId>
            <!-- This the most important part of the setup -->
            <configuration>
                <!--
                    When Cargo starts the container, the following tag instructs it to
                    wait for you to kill the session with Crtl-C
                -->
                <wait>true</wait>
                <!--
                    The following tag details the container you want to
                    deploy to.
                -->
                <container>
                    <!--
                        Specifying "tomcat6x" is very important! This one tripped me up
                        for quite a while. The issue is that instead of being an
                        identifier for you, "tomcat6x" is an identifier for Cargo that
                        you want to deploy your webapp in Tomcat 6.x. I had initially
                        thought otherwise and hence just dropped the 'x', making it
                        "tomcat6", but that never worked.
                    -->
                    <containerId>tomcat6x</containerId>
                    <!--
                        Type == Installed means that you want to deploy to a container
                        that's installed on your computer
                    -->
                    <type>installed</type>
                    <!-- The home folder for your local Tomcat -->
                    <home>${catalina.home}</home>
                </container>
                <configuration>
                    <!--
                        This is another one that confused me for long. Its not enough to
                        specify 'installed' in the container tag. You have to now specify
                        another configuration with type == existing and re-issue the home
                        path
                    -->
                    <type>existing</type>
                    <home>${catalina.home}</home>
                </configuration>
                <!--
                    Cargo has the notion of a 'deployer' in which you specify
                    'deployables'
                -->
                <deployer>
                    <!-- You have to again specify that the type for the deployer -->
                    <type>installed</type>
                    <deployables>
                        <!-- This deployable specifies the webapp you want to deploy -->
                        <deployable>
                            <groupId>com.dpillay.oworld</groupId>
                            <artifactId>oworld-webapp</artifactId>
                            <type>war</type>
                        </deployable>
                    </deployables>
                </deployer>
            </configuration>
            <!--
                Executions specify the targets that you want to run during build
            -->
            <executions>
                <!--
                    Maven has the concept of a 'phase' which can be thought of a
                    collection of goals. Hence here we are specifying that during the
                    'install' phase first deploy the webapp to the container specific
                    folder and then start the container. Both 'deployer-deploy' and
                    'start' are cargo specific goals.
                -->
                <execution>
                    <id>verify-deploy</id>
                    <phase>install</phase>
                    <goals>
                        <goal>deployer-deploy</goal>
                        <goal>start</goal>
                    </goals>
                </execution>
                <!--
                    Specifying that during the 'pre-clean' phase, Cargo should first
                    stop the container.
                -->
                <execution>
                    <id>clean-undeploy</id>
                    <phase>pre-clean</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

# javascript - highcharts：动态定义饼图中的颜色

> ID：13875315
> 
> 赞同：19
> 
> 时间：2012-12-14T08:50:56.393
> 
> 标签：javascript, colors, highcharts, series

我正在尝试根据每个系列的类型动态定义颜色。下面是我的代码，它不起作用，但显示了我正在尝试做的事情。我想为某些类型定义颜色，例如：

```
if type = 'IS' then color =  '#FFCACA' 
```

我不能指望 ret 会有所有类型，所以我需要知道在 ret 中返回了哪些类型，然后将颜色与某种类型相关联。

怎么做？

这是收到数据后的代码：

```
success: function (ret) {

    $(function () {
        var chart;
        $(document).ready(function () {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'divPie_' + id,
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: true,
                    width: 350,
                    height: 350
                },
                title: {
                    text: refrigname
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                    percentageDecimals: 1
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Current selection',
                    color: (function () {
                            switch (ret.type) {
                                case 'AB': return '#C6F9D2'; 
                                case 'BC': return '#CCCCB3'; 
                                case 'CL': return '#CECEFF'; 
                                case 'CI': return '#FFCAFF'; 
                                case 'HB': return '#D0CCCD'; 
                                case 'ON': return '#FFCC99'; 
                                case 'PM': return '#FFCBB9'; 
                                case 'SR': return '#EAEC93'; 
                                case 'TS': return '#D7FBE6'; 
                                case 'IS': return '#FFCACA'; 
                                case 'FREE': return '#00FF00'; 
                            }
                    }),
                    data: (function () {
                        var arr = [];
                        $(ret).each(function () {
                            var labelname = "";
                            switch (this.type) {
                                case "AB": labelname = "Antibodies"; break;
                                case "BC": labelname = "Bacteria"; break;
                                case "CL": labelname = "Cell lines"; break;
                                case "CI": labelname = "Custom items"; break;
                                case "HB": labelname = "Hybridoma"; break;
                                case "ON": labelname = "Oligonucleotides"; break;
                                case "PM": labelname = "Plasmids"; break;
                                case "SR": labelname = "siRNA"; break;
                                case "TS": labelname = "Tissue samples"; break;
                                case "IS": labelname = "Isolates"; break;
                                case "FREE": labelname = "Free space"; break;
                            }
                            arr.push([labelname, this.cnt]);
                        })
                        return arr;
                    })()
                }]
            });
        });
    });

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-14T16:37:33.080

对于饼图，您必须在内部设置切片颜色`data`。
而且您必须使用点`name`而不是意式类型，意式类型将始终是`"pie"`.

为此，您可以**使用 javascript 对象表示法**来存储每个系列将具有的颜色。
**它比使用`switch`**.

```
var getColor = {
    'AB': '#C6F9D2',
    'BC': '#CCCCB3',
    'CL': '#CECEFF', 
    'CI': '#FFCAFF', 
    'HB': '#D0CCCD', 
    'ON': '#FFCC99', 
    'PM': '#FFCBB9', 
    'SR': '#EAEC93', 
    'TS': '#D7FBE6', 
    'IS': '#FFCACA', 
    'FREE': '#00FF00'
};

series: [{
    type: 'pie',
    name: 'Current selection',
    data: [
        {
            name: 'AB',
            y: 45.0,
            color: getColor['AB']
        }, {
            name: 'BC',
            y: 26.8,
            color: getColor['BC']
        }, {
            name: 'CL',
            y: 12.8,
            sliced: true,
            selected: true,
            color: getColor['CL']
        }, {
            name: 'CI',
            y: 8.5,
            color: getColor['CI']
        }, {
            name: 'HB',
            y: 6.2,
            color: getColor['HB']
        }, {
            name: 'ON',
            y: 0.7,
            color: getColor['ON']
        }
    ]
}] 
```

你可以看到它[**在这里工作**](http://jsfiddle.net/vDBHA/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:56:27.427

您在那里的`return`语句是从传递给`each`函数的函数返回的，而不是颜色函数。此外，在 JavaScript 中不需要为此使用 switch case。

**编辑**：尝试这样的事情

```
series: [{
    type: 'pie',
    name: 'Current selection',
    color: {
        'AB': '#C6F9D2',
        'BC': '#CCCCB3',
        'CL': '#CECEFF',
        'CI': '#FFCAFF',
        'HB': '#D0CCCD',
        'ON': '#FFCC99',
        'PM': '#FFCBB9',
        'SR': '#EAEC93',
        'TS': '#D7FBE6',
        'IS': '#FFCACA',
        'FREE': '#00FF00'
    }[this.type]
}] 
```

从您的代码中并不清楚它是什么`ret`，所以我不确定上面的代码是否有效，但它应该让您大致了解它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:57:51.897

为什么在将数据系列推送到图表时不设置颜色属性？在没有看到您用于构建系列对象的情况下，我只能提供一些伪代码：

```
for each seriesItem in seriesList (
     set highcharts.series[seriesItem].name = seriesList[seriesItem].seriesTitle
     set highcharts.series[seriesItem].data = seriesList[seriesItem].data
     set highcharts.series[seriesItem].Note = seriesList[seriesItem].extraInfo
     set highcharts.series[seriesItem].color = switch (seriesList[seriesItem].type) {
                                case 'AB': return '#C6F9D2'; 
                                case 'BC': return '#CCCCB3'; 
                                case 'CL': return '#CECEFF'; 
                                case 'CI': return '#FFCAFF'; 
                                case 'HB': return '#D0CCCD'; 
                                case 'ON': return '#FFCC99'; 
                                case 'PM': return '#FFCBB9'; 
                                case 'SR': return '#EAEC93'; 
                                case 'TS': return '#D7FBE6'; 
                                case 'IS': return '#FFCACA'; 
                                case 'FREE': return '#00FF00'; 
                            }
     ) 
```

本质上，您预处理数据系列元素。有关显式格式，请参阅[此](https://stackoverflow.com/questions/5727419/highcharts-is-it-possible-to-customize-the-colors-of-individual-series)问题。您可以设置`color`系列的属性 - 您不必依赖默认的 HighCharts 颜色列表或自定义颜色列表，如另一个答案中所述。请注意，该`color`属性未在 HighCharts API[参考](http://api.highcharts.com/highcharts#series)中列出，但您可以使用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T10:12:46.973

我使用 Highcharts 没有提供任何颜色属性，因为它使用自己的库来自动选择颜色。在下面使用，希望它对你有用

```
series: [{
type: 'pie',
name: 'Current selection',
data: [
       ['Name_1',  537],
       ['Name_2',  181],
       ['Name_3',  156]
]
}] 
```

我们可以通过设置 highchart 自定义颜色`setOption function`

```
Highcharts.setOptions({
  colors: ['#F64A16', '#0ECDFD', '#FFF000']
}); 
```

# java - Akka：动态配置更改

> ID：13875319
> 
> 赞同：1
> 
> 时间：2012-12-14T08:51:26.340
> 
> 标签：java, scala, akka

我目前正在阅读有关 Akka 的一些信息，但有一点我到目前为止还没有发现任何东西。虽然我喜欢强大的配置选项，但 f.ex。配置路由器动态调整大小和使用给定的远程主机等，我还没有看到如何在运行时修改这些配置更改。

为了让问题更具体：假设我们有一个路由器，它被配置为路由到三个已知的远程主机（比如 192.168.0.1、192.168.0.2、192.168.0.3）。现在我在 192.168.0.4 向系统添加另一台机器。如果我理解正确，它需要运行一个 Akka 微内核，然后我可以更改配置以包含这台机器。

但是，更改配置文件似乎需要重新启动整个系统（也许我在那里弄错了？）。在这种情况下，有没有一种方法可以动态地修改路由器参与者以将这台新机器包含在其未来的路由中，而不会干扰其当前操作（至少超过必要）？

关于如何开发在运行时可重新配置的 Akka 系统，是否有任何最佳实践，即不需要任何停机时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:00:26.947

您可以创建自己的路由器来做任何您想做的事情。 有关如何执行此操作的详细信息，[请参阅此内容。](http://doc.akka.io/docs/akka/snapshot/scala/routing.html)或者，您可以等待 2.2，它应该内置此功能。

# java - 通过批处理执行 JAR 文件 + 设置库路径

> ID：13875321
> 
> 赞同：0
> 
> 时间：2012-12-14T08:51:32.860
> 
> 标签：java, ant, batch-file, path

我有一个需要执行的jar文件和一个需要在执行前设置的库路径（**库****路径很重要**）：

```
// works but without library path being set
start bin/myJar.jar

// should work but doesn't because OS path knows no java paths
// error message like: "java" could not be found
start java -Djava.library.path=bin\native -jar bin\myJar.jar 
```

我认为 Oracle 在安装他们的产品方面做得很差，因为总是需要手动操作。我不能指望我的用户自己设置路径变量。那么有没有办法通过批处理更新路径变量（最好是临时执行这个jar）？

我还使用 ant 构建来生成 jars。我可以做的所有设置是：

```
// ...
<manifest>
    <attribute name="Class-Path" value="another.jar another2.jar " />
    <attribute name="Main-Class" value="myPackage.MyClass" />
</manifest>
// ... 
```

有没有办法设置库路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:01:45.667

您可以在同一个文件夹中拥有所有需要的 jar。然后默认情况下 claspath 设置为当前目录。

其他选项是让您的应用程序安装程序复制 jar 文件，以便 Java 可以在默认位置找到它：*jre/lib/ext*

其他选择是将您的应用程序打包为 zip 存档并要求用户提取它。您支持的每个操作系统都应该包含启动脚本。这样您就可以在依赖于操作系统的 calsspath 本地 jar 中包含

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:27:11.303

正如您所推测的，最好的方法是通过在 jar 的清单中指定主类和类路径来创建一个可执行的 jar。

看：

*   [在使用 Ant 编译的文件中找不到主类](https://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290)
*   [如何在 ant 中获取 flattenmapper 结果？](https://stackoverflow.com/questions/13512529/how-to-get-hold-on-the-flattenmapper-result-in-ant/13518566#13518566)

使用[manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务意味着您可以将 jar 和它的依赖库一起发送。然后，您的批处理脚本可以是一个简单的调用，如下所示：

```
start java -jar myjar.jar 
```

# java - 如何查找哪个父对象创建了子对象

> ID：13875325
> 
> 赞同：1
> 
> 时间：2012-12-14T08:51:59.843
> 
> 标签：java, jakarta-ee, cdi, tapestry

我有一个经理，由几个不同的班级调用。管理器通过 Inject 实例化。所以当我调试时，我需要知道谁实例化了这个管理器？有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:54:49.910

除非调用者将自己传递给创建管理器的方法，然后传递给管理器的构造函数，然后将其存储在私有变量中。如果您不明确跟踪此信息，它将丢失。

或者，您还可以在管理器的构造函数中设置调试断点，并在命中断点时检查调用堆栈以找出调用它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:01:43.623

找出哪个对象实例化您的管理器的一种方法是在管理器的构造函数中创建堆栈跟踪。使用 Thread.currentThread().getStackTrace() 获取 StackTraceElements 数组。

调试时，只需检查这个 StackTraceElements 数组即可查看哪个对象创建了管理器。

# ruby-on-rails - 带有 I18n 的邮件的 Rspec

> ID：13875329
> 
> 赞同：7
> 
> 时间：2012-12-14T08:52:08.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, internationalization, actionmailer

我不明白如何使用 rspec 和国际化进行测试。例如，在我做的请求测试中

```
I18n.available_locales.each do |locale|
  visit users_path(locale: locale)
  #...
end 
```

它工作得很好：每个语言环境都测试正确。

但在邮件中，这个技巧不起作用。

**user_mailer_spec.rb**

```
require "spec_helper"

describe UserMailer do
  I18n.available_locales.each do |locale|
    let(:user) { FactoryGirl.build(:user, locale: locale.to_s) }
    let(:mail_registration) { UserMailer.registration_confirmation(user) }

    it "should send registration confirmation" do
      puts locale.to_yaml
      mail_registration.body.encoded.should include("test") # it will return error with text which allow me to ensure that for each locale the test call only :en locale email template
    end
  end
end 
```

它运行几次（与我的语言环境一样多），但每次它只为默认语言环境生成 html。

当我`UserMailer.registration_confirmation(@user).deliver`从控制器调用时，它工作正常。

**user_mailer.rb**

```
...
def registration_confirmation(user)
  @user = user
  mail(to: user.email, subject: t('user_mailer.registration_confirmation.subject')) do |format|
      format.html { render :layout => 'mailer'}
      format.text
  end
end
... 
```

**意见/user_mailer/registration_confirmation.text.erb**

```
<%=t '.thx' %>, <%= @user.name %>.
<%=t '.site_description' %>
<%=t '.credentials' %>:
<%=t '.email' %>: <%= @user.email %>
<%=t '.password' %>: <%= @user.password %>
<%=t '.sign_in_text' %>: <%= signin_url %>
---
<%=t 'unsubscribe' %> 
```

我再说一遍 - 它适用于所有语言环境。我只有关于 rspec 测试的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:47:44.217

我认为您可能必须将测试包装在一个`describe/context`块中以允许该`it`块查看您的`let`变量：

```
require "spec_helper"

describe UserMailer do
  I18n.available_locales.each do |locale|
    describe "registration" do
      let(:user) { FactoryGirl.build(:user, locale: locale.to_s) }
      let(:mail_registration) { UserMailer.registration_confirmation(user) }

      it "should send registration confirmation" do
        puts locale.to_yaml
        mail_registration.body.encoded.should include("test")
      end
    end
    # ...
  end
  # ...
end 
```

至于为什么，也许[这个 StackOverflow 关于`let`变量范围](https://stackoverflow.com/q/5554123/567863)的答案可能会有所帮助。

### 编辑

问题是您已为用户分配了区域设置，但您没有将其传递给`mail`任何地方的方法？也许[这个 StackOverflow 答案](https://stackoverflow.com/q/11097855/567863)将是参考。希望两个答案之一与您的情况相关。这是我根据您的情况调整第一个答案的简单尝试（显然未经测试）：

**user_mailer.rb**

```
...
def registration_confirmation(user)
  @user = user
  I18n.with_locale(user.locale) do
    mail(to: user.email, 
             subject: t('user_mailer.registration_confirmation.subject')) do |format|
      format.html { render :layout => 'mailer' }
      format.text
    end
  end
end
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:17:46.697

您可能需要指定语言环境，如下所示：

`mail_subscribe.body.encoded.should include(t('user_mailer.subscribe_confirmation.stay', locale: locale))`

您也可以尝试在方法中的调用`I18n.locale = user.locale`之前添加。`mail``registration_confirmation`

# android - 关于android中的JNI

> ID：13875330
> 
> 赞同：0
> 
> 时间：2012-12-14T08:52:11.443
> 
> 标签：android, android-ndk, java-native-interface

错误日志：

```
D/dalvikvm( 1010): Trying to load lib /data/data/com.mediatek.cmmb.app/lib/libcmmbsp.so 0x4051bb80

W/System.err( 1010): java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1346]:    86 cannot locate '_ZN7android7RefBase14moveReferencesEPvPKvjRKNS_22ReferenceConverterBaseE'...

W/System.err( 1010): at java.lang.Runtime.load(Runtime.java:425) 
```

libcmmbsp.so 可以在 4.0 平台上运行良好。但它在平台 2.3 中存在错误。是因为版本问题吗？我认为图书馆不会因为版本而出现问题。而且我找不到这么健全的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:26:55.517

找不到功能

```
android::RefBase::moveReferences(void*, void const*, unsigned int, android::ReferenceConverterBase const&) 
```

因为该功能直到 Android 4.0 才引入。

这是一个内部库函数，不是 NDK 的一部分。除了 Android 平台本身的内部代码之外，什么都不应该使用它。它可能会在未来的版本中消失、更改签名或更改行为。

# asp.net-mvc - 如果操作按钮和表单字段位于不同的部分怎么办？

> ID：13875332
> 
> 赞同：0
> 
> 时间：2012-12-14T08:52:24.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

假设我们有一个编辑表单来创建一个新用户。现在保存按钮被放置在不同的部分，页脚。

我的问题是我无法在一个表单中获取编辑字段和保存按钮，因为该按钮位于不同的部分。

因此，我无法提交表单。

解决这个问题的最佳方法是什么？

_Layout.cshtml

```
<div class="content">
    @RenderBody()
</div>
<div class="footer">
    @RenderSection("Footer")
</div> 
```

索引.cshtml

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Footer
{
    <input type="submit" value="Save" />
}

@using(Html.BeginForm())
{
    <h2>New User</h2>
    @Html.EditorForModel()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:57:13.683

您可以`form.Dispose()`显式调用，而不是`using`语句：

```
@{ var form = Html.BeginForm() }

<h2>New User</h2>
@Html.EditorForModel()

@section Footer
{
    <input type="submit" value="Save" />
    @{ form.Dispose(); }
} 
```

**编辑**

但是您至少必须确保 Body 和 Footer 部分在同一个容器中，例如：

```
<div class="content">
    @RenderBody()
    <div class="footer">
        @RenderSection("Footer")
    </div>
</div> 
```

使用问题中所写的布局，`content`div（以及`form`标签）必须在`submit`按钮出现之前关闭。这不可能在逻辑上起作用：

```
<div class="content">
    @RenderBody()               @@ form opens, and therefore must close here
</div>
<div class="footer">
    @RenderSection("Footer")    @@ submit button is here -- can never be inside the form
</div> 
```

[**抛开编辑不谈：** 将表单拆分为多个局部视图似乎是一个非常糟糕的主意。你可能会称之为代码异味——如果可能的话，我会尽量避免它。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:19:28.773

你发现了一个非常尴尬的工作。我建议这样做：

*   为了区分单击的不同按钮的操作，请在模型中创建一个新属性：`public string Action { get; set; }`
*   给你一个 id 并为你的新模型属性包含一个隐藏的输入。

```
<form id="my-form">
    @Html.HiddenFor(x => x.Action)
    ...
</form> 
```

*   在页脚中创建具有相同类但值不同的按钮：

```
<button class="btn-submit" value="action1">Submit</button>
<button class="btn-submit" value="action2">Submit</button> 
```

*   使用以下 JavaScript：

```
$('.btn-submit').live('click', function() {
    // update value of hidden input inside the form
    $('#Action').val($(this.val()));
    // submit the form
    $('#my-form').submit();
}); 
```

*   在您的 ActionResult 中，根据 Action 属性的值执行不同的操作：

```
public ActionResult WahteverAction(WhateverModel model)
{
    if(ModelState.IsValid)
    {
        if(model.Action == "action1")
        {
            // do whatever needs to be done for action1
        }
        if(model.Action == "action2")
        {
            // do whatever needs to be done for action2
        }
    }
    return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:50:44.253

我找到了解决我的问题的方法。这不是很好，但它有效。

我用锚点替换了提交按钮。单击锚点时，将调用一个 javascript 函数。

```
<a name="save" onclick="submitAction(this)"></a> 
```

javascript 函数在表单中创建一个隐藏的提交按钮并单击它。

```
function submitAction(sender) {
    var action = $(sender).attr('name');
    $('form').append('<input type="submit" style="display:none" id="tmpSubmit" />');
    $('#tmpSubmit').attr('name', action);
    $('#tmpSubmit').click();
} 
```

# objective-c - 从 AppDelegate 将子视图添加到活动 viewController

> ID：13875333
> 
> 赞同：0
> 
> 时间：2012-12-14T08:52:27.960
> 
> 标签：objective-c, ios

我正在创建一个带有 sqlite 数据库的应用程序。我使用从 Web 服务检索到的信息更新数据库。我像这样从 AppDelegate 调用 Web 服务：

```
-(void)applicationDidBecomeActive:(UIApplication *)application{

    // get new information from web service
    // update sqlite database

} 
```

Web 服务可能需要相当长的时间，所以我想在`UIActivityIndicatorView`任何`viewController`处于活动状态的内容中添加一个。当然，在更新完成后将其删除。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:20:41.733

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 420, 480)];
    testView.backgroundColor = [UIColor redColor];
    [self.window.rootViewController.view addSubview:testView];
} 
```

然后，无论何时完成：

```
[testView removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:20:06.283

在您的每个视图控制器（或常见的超类视图控制器）中，监听`UIApplicationDidBecomeActiveNotification`应用程序激活时发送的通知。

这样，您可以为每个视图控制器自定义逻辑，而无需通过使用大量 if 将应用程序委托耦合到代码的其他部分（如果您需要区分哪个视图控制器是活动的）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T09:20:21.070

因为您的视图层次结构可以采用任何形式，所以您必须自己跟踪当前可见的视图控制器。例外：如果您的应用程序中的所有内容都发生在 UINavigationController 中，您始终可以使用它获取当前视图控制器。

```
[navigationController topViewController]; 
```

但是，如果您需要做的只是呈现一个覆盖，您可以将该视图添加到根视图控制器的视图中；无论如何，所有子视图控制器都只是作为子视图呈现。

```
UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[self.window.rootViewController.view addSubview:activityIndicator];
[activityIndicator startAnimating]; 
```

但是，像这样手动将视图放入混合中并不是很优雅。我会考虑在各种网络事件发生时发布通知，并让每个视图控制器适当地更新自己。

# matlab - 如何解决 MATLAB 中的内存问题 - 如何增加内存和最大数组长度？

> ID：13875336
> 
> 赞同：2
> 
> 时间：2012-12-14T08:52:34.100
> 
> 标签：matlab, image-processing

我有叶绿素数据的 HDF 文件。我正在尝试处理这些 HDF4 文件以生成该期间的 NDVI。但是当我尝试执行时

```
Band = hdfread('F:\MATLAB\HDF data\binned hdf\OCMHDFFiles_20-Sep-2012\O2_01APR2011_004_000_GAN_L3B_CL_M.hdf','clo','Fields','');
% Construct an RGB matrix from the three bands into one 3D matrix.
SPCrater_321 = cat(Band);
% Display the image
figure(1)
imshow(SPCrater_321)
xlabel('Longitude (pixels)')
ylabel('Latitude (pixels)')
title('ASTER Bands 3, 2, 1')
??? Error using ==> permute
Out of memory. Type HELP MEMORY for your options.
Error in ==> hdfsdsread at 57
data = permute(data,ndims(data):-1:1);
Error in ==> hdfread at 240
varargout{1} = hdfsdsread(hinfo,start,stride,edge); 
```

下一个执行是，

```
Band_3 = hdfread('F:\MATLAB\HDF data\binned hdf\OCMHDFFiles_20-Sep-2012\O2_01APR2011_004_000_GAN_L3B_CL_M.hdf','clo','Fields','ImageData3N');
Band_2 = hdfread('F:\MATLAB\HDF data\binned hdf\OCMHDFFiles_20-Sep-2012\O2_01APR2011_004_000_GAN_L3B_CL_M.hdf','clo','Fields','ImageData2');
Band_1 = hdfread('F:\MATLAB\HDF data\binned hdf\OCMHDFFiles_20-Sep-2012\O2_01APR2011_004_000_GAN_L3B_CL_M.hdf','clo','Fields','ImageData1');
% Calculate NDVI.
Band_2 = im2single(Band_2);
Band_3 = im2single(Band_3);
SPCrater_NDVI = (Band_3 - Band_2) ./ (Band_3 + Band_2);
% Display the image.
j=imresize(SPCrater_NDVI,0.5);
figure(5)
imshow(j,'DisplayRange',[0 1])
??? Out of memory. Type HELP MEMORY for your options. 
```

这就是我在执行时键入“memory”命令时得到的结果：

```
memory
Maximum possible array:             255 MB (2.669e+008 bytes) *
Memory available for all arrays:    569 MB (5.971e+008 bytes) **
Memory used by MATLAB:             1197 MB (1.255e+009 bytes)
Physical Memory (RAM):             8181 MB (8.578e+009 bytes)
*  Limited by contiguous virtual address space available.
** Limited by virtual address space available. 
```

谁能帮我解决这个问题。如何增加内存数组的长度。

我非常感谢您能提供的任何帮助。如果你能把这些信息发给我，我将不胜感激。

M.普拉布

（马普拉布）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:01:48.770

请参阅此技术说明：http: [//www.mathworks.nl/help/matlab/matlab_prog/resolving-out-of-memory-errors.html? s_tid=doc_12b#brh72ex-52](http://www.mathworks.nl/help/matlab/matlab_prog/resolving-out-of-memory-errors.html?s_tid=doc_12b#brh72ex-52)

最直接的解决方案是使用 64 位。

# cordova - 如果 UserAgent 设置为 iOS，Sencha Touch 2.1 无限加载屏幕

> ID：13875337
> 
> 赞同：0
> 
> 时间：2012-12-14T08:52:36.820
> 
> 标签：cordova, extjs, sencha-touch, sencha-touch-2.1

我的第一个 sencha touch 应用程序（“原始”/构建）的本地预览工作得很好，没有错误也没有警告。每当我将 UserAgent 设置为 iOS 时，我都会得到一个无限加载屏幕（3 个闪烁的点），也没有错误和警告。

关于如何解决这个问题的任何建议？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:21:06.123

打开浏览器控制台（在 Chrome 中：右键单击、检查元素、控制台选项卡）并查找错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:16:31.860

我们使用了错误的 cordova.js。这引起了很多混乱，因为没有打印出错误消息。我们通过替换文件来修复它。

# javascript - 对象属性动态删除

> ID：13875338
> 
> 赞同：7
> 
> 时间：2012-12-14T08:52:39.353
> 
> 标签：javascript, jquery, object-properties

我很好奇一种基于通配符从 javascript 对象中动态删除属性的改进方法。首先，假设我有以下对象：

```
object =
{
    checkbox_description_1 : 'Chatoyant',
    checkbox_description_2 : 'Desultory',
    random_property : 'Firefly is a great program',
    checkbox_mood_1 : 'Efflorescent',
    checkbox_description_3 : 'Ephemeral'
} 
```

### 任务

现在，最终结果是以“checkbox_description”为幌子删除了所有属性，并保持对象的其余部分完好无损，如下所示：

```
object =
{
    random_property : 'Firefly is a great program',
    checkbox_mood_1 : 'Efflorescent',
} 
```

### 我的解决方案

目前我的解决方案涉及jquery和以下代码：

```
var strKeyToDelete = 'checkbox_description'

/* Start looping through the object */
$.each(object, function(strKey, strValue) {

    /* Check if the key starts with the wildcard key to delete */
    if(this.match("^"+strKey) == strKeyToDelete) {

        /* Kill... */
        delete object[strKey];
    };
}); 
```

### 问题

这对我来说似乎很不雅，如果对象的大小合理，则过程密集。有没有更好的方法来执行这个操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T08:55:33.387

这是最低要求：

```
function deleteFromObject(keyPart, obj){
    for (var k in obj){          // Loop through the object
        if(~k.indexOf(keyPart)){ // If the current key contains the string we're looking for
            delete obj[k];       // Delete obj[key];
        }
    }
}

var myObject = {
    checkbox_description_1 : 'Chatoyant',
    checkbox_description_2 : 'Desultory',
    random_property : 'Firefly is a great program',
    checkbox_mood_1 : 'Efflorescent',
    checkbox_description_3 : 'Ephemeral'
};
deleteFromObject('checkbox_description', myObject);
console.log(myObject);
// myObject is now: {random_property: "Firefly is a great program", checkbox_mood_1: "Efflorescent"}; 
```

所以这非常接近您拥有的 jQuery 函数。
（虽然快一点，考虑到它不使用 jQuery，而`indexOf`不是`match`）

**那么，`~`之前的情况是怎样的`indexOf`呢？**

`indexOf`返回一个整数值：`-1`如果没有找到字符串，`0`如果找到，则返回一个从 开始的索引。（因此，如果找到，则始终为正整数）
`~`是按位的`NOT`，它会反转此输出。碰巧的是，反相输出`indexOf`正是我们需要指示“找到”或“未找到”的内容。

`~-1`变成`0`，一个虚假的值。
`~x`, where `x`is `0`or positive, 变成`-(x+1)`, 一个真实的值。

这样，`~string.indexOf('needle')`就像`string.contains('needle')`我们在 JavaScript 中没有的函数一样。

`!!`此外，您可以在 , 前面添加一个双布尔值 not ( )`~`以将 true-ish 或 false-ish 输出转换为真正的 true / false，但这在 JavaScript 中不是必需的。
在功能上，`~string.indexOf('needle')`并且`!!~string.indexOf('needle')`是平等的。

* * *

如果您特别需要从针头**开始**的钥匙，请更换：

```
~k.indexOf(keyPart) 
```

和：

```
k.indexOf(keyPart) === 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-18T17:44:31.150

```
 var myObject = {
        checkbox_description_1 : 'Chatoyant',
        checkbox_description_2 : 'Desultory',
        random_property : 'Firefly is a great program',
        checkbox_mood_1 : 'Efflorescent',
        checkbox_description_3 : 'Ephemeral'
   };

const removeProperty = dyProps => ({ [dyProps]: _, ...rest }) => rest;

const remove_random_property = removeProperty('random_property');
console.log(remove_random_property(myObject)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T11:29:43.313

您可以使用[如何检查一个字符串“StartsWith”是否是另一个字符串？](https://stackoverflow.com/questions/646628/javascript-startswith)：

```
function deleteFromObject(keyToDelete, obj) {
    var l = keyToDelete.length;
    for (var key in obj)
        if (key.substr(0, l) == keyToDelete) // key begins with the keyToDelete
            delete obj[key];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T00:05:11.857

如果您正在寻找一种不会改变原始对象的解决方案，您可以尝试这样的事情

```
const omit = (source = {}, omitKeys = []) => (
  Object.keys(source).reduce((output, key) => (
    omitKeys.includes(key) ? output : {...output, [key]: source[key]}
  ), {})
) 
```

测试

```
const original = {a:1, b:2, c:3, d:4, e:5}
console.log('original: ', JSON.stringify(original));

const modified = omit(original, ['b', 'd'])
console.log('modified: ', JSON.stringify(modified));
console.log('original: ', JSON.stringify(original));

// Will log: 
// original: {"a":1,"b":2,"c":3,"d":4,"e":5}
// modified: {"a":1,"c":3,"e":5}
// original: {"a":1,"b":2,"c":3,"d":4,"e":5} 
```

这将创建一个新对象并将源对象的所有属性传播到其中，除了那些包含在异常列表 (omitKeys) 中的属性。

# api - 谷歌地图信息窗口不再显示

> ID：13875341
> 
> 赞同：0
> 
> 时间：2012-12-14T08:52:50.323
> 
> 标签：api, infowindow

早上好，

我的一位前同事创建了一个应用程序，您可以在其中通过邮政编码进行搜索，然后在 5-40 公里半径范围内的地图（谷歌地图）上放置标记。

这些位置是距您要查找的邮政编码 40 公里半径范围内的商店。该功能本身仍在工作，只有带有信息的信息窗口不再工作。

我有几个使用此应用程序运行的网站，但对于所有网站，信息窗口都不再工作。会不会是谷歌自己在api做了调整，我也需要在某个地方进行调整？

这是我的同事放在一起的代码，没有任何改变，但它不再起作用了......这里有人知道这个问题，因为我无法弄清楚自己......

```
 <script type="text/javascript">
                        var geocoder;
                        var map;
                        function initialize() {
                            geocoder = new google.maps.Geocoder();
                            var myOptions = {
                                zoom: <?php
                                if(is_array($postcodevelden) && count($postcodevelden) > 0 && !empty($_POST['address']))
                                {
                                    switch($radius)
                                    {
                                        case "5":
                                            echo "12";
                                            break;
                                        case "10":
                                            echo "11";
                                            break;
                                        case "15":
                                        case "20":
                                            echo "10";
                                            break;
                                        case "30":
                                        case "40":
                                            echo "9";
                                            break;
                                    }
                                }
                                else
                                {
                                    echo "7";
                                }
                                ?>,
                                center: new google.maps.LatLng(<?php if(is_array($postcodevelden) && count($postcodevelden) > 0) { echo $lat.", ".$lon; } else { echo "52.2008737173322, 5.25146484375"; } ?>),
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                            }
                            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

<?php
        if(is_array($adressen) AND count($adressen) > 0) 
        {
            foreach($adressen as $adres)
            {
                $afstand = round((6371 * acos(sin(deg2rad($lat)) * sin(deg2rad($adres->locatie_lat)) + cos(deg2rad($lat)) * cos(deg2rad($adres->locatie_lat)) * cos(deg2rad($adres->locatie_lon) - (deg2rad($lon))))), 2);
?>
                            addMarker(<?php echo $adres->locatie_lat.", ".$adres->locatie_lon.", '".$adres->locatie_naam."', '".$adres->locatie_straat."', '".$adres->locatie_postcode."', '".$adres->locatie_plaats."', '".$adres->locatie_telefoon."', '".$afstand."'"; ?>);
<?php
            }
        }
?>
                        }

                        var infowindow = new google.maps.InfoWindow();

                        function addMarker(lat, lon, naam, straat, postcode, plaats, telefoon, afstand)
                        {
                            var marker = new google.maps.Marker({
                                position: new google.maps.LatLng(lat, lon),
                                map: map,
                                icon: "images/pincard/wheel-icon.png",
                                title: naam
                            });

                            google.maps.event.addListener(marker, 'mouseover', function() {
                                var contentString = '<div>'+
                                '<b style="border-bottom: 1px solid #000000;">' + naam + '</b><br/>'+
                                'Afstand (hemelsbreed): ' + afstand + ' km<br/>' +
                                straat + '<br/>' +
                                postcode + ' ' + plaats + '<br/>';
                                if(telefoon != "")
                                {
                                    contentString = contentString + 'Telefoonnr: ' + telefoon;
                                }
                                contentString = contentString + '</div>';
                                infowindow.content = contentString;
                                infowindow.open(map, marker);
                            });

                            google.maps.event.addListener(marker, 'mouseout', function(){
                                infowindow.close(map);
                            });
                        }

                        google.maps.event.addDomListener(window, 'load', initialize);
                    </script> 
```

我这样调用api：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

如果有人知道为什么所有网站的信息窗口停止工作，那么我很想听听，因为我不明白为什么它不再工作。

提前感谢您的任何努力

亲切的问候，

乔普

PS：这是一个网站，例如：

轮胎间...php?lang=nl&p=4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:53:13.523

我被同样的问题所困扰，并去谷歌搜索答案。

找到了我的问题的答案——看起来谷歌可能已经收紧了它的 infoWindow API 有点强迫你通过适当的 Set() 函数设置 .content 成员。

换线试试

`infowindow.content = contentString;`

和

`infowindow.setContent(contentString);`

看看是否有帮助。我用我的代码做到了这一点，并修复了破损。

# java - 暂停时保持相机活跃

> ID：13875342
> 
> 赞同：4
> 
> 时间：2012-12-14T08:52:54.357
> 
> 标签：java, android, camera, flashlight

我有一个手电筒应用程序，如果该应用程序暂停，则释放相机。无论是主页按钮还是电源按钮。当我完全关闭应用程序时，我希望相机在按下和释放其中任何一个时保持活动状态。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:48:44.607

此功能旨在确保您不会消耗不必要的电量，并且设备上的其他软件可以按需访问相机。[可以在此处找到](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)有关 Activity 生命周期的一些有用信息。

通常，Android 开发人员的选项是：

1.  构建一个自定义 Android 固件，让您的应用程序有权访问相机。此选项通常仅在您提供专用硬件、预安装此固件和您的应用程序时才真正可行。

2.  以不同的方式处理您的应用程序设计，当它不在前台时不需要使用相机。

3.  坚持现有的行为，并在市场上向用户详细说明警告（并可能作为第一次弹出对话框来吸引他们的注意力）以减少投诉的数量。

# facebook - Facebook 登录 500 内部服务器错误

> ID：13875343
> 
> 赞同：-6
> 
> 时间：2012-12-14T08:53:15.857
> 
> 标签：facebook, login

我的 facebook 页面出现 500 内部错误，无法登录。这是在使用“访问我的页面”的应用程序之后。我什至无法使用 facebook 帮助，每当我尝试登录时，它都会给我消息（见附件）。

![在此处输入图像描述](../Images/5e59447fc2e306c913552fc30fe797ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:02:56.870

清除您的 chrome cookie 并重新启动浏览器，然后重试。

# c# - 测试代码——如何绕过测试环境中的线程

> ID：13875357
> 
> 赞同：0
> 
> 时间：2012-12-14T08:54:20.723
> 
> 标签：c#, multithreading, unit-testing

请考虑以下简单代码，然后我会问我的问题。

```
public static void Save(XmlDocument saveBundle)
    {
        ThreadStart threadStart = delegate
        {
            SaveToDatabase(saveBundle);
        };

        new Thread(threadStart).Start();            
    } 
```

在 Visual Studio (2005) 中使用线程的问题是你不能轻易地遍历它们（我相信有一种方法可以切换我没有研究过的线程，因为我希望有一种更简单的方法）。

所以，在现场，我的代码比上面的例子更复杂，我们使用一个新线程，因为它对时间很关键，但原理是一样的。最重要的是，测试的时间并不紧迫！

目前，我可能会做类似使用的事情，`#if debug`但这样做感觉不对 - 我在这里以正确的方式使用 #if 还是有更好的方法来解决这个问题？

```
public static void Save(XmlDocument saveBundle)
    {

   #if debug
      {
        SaveToDatabase(parameters);
        }
   #else
        {
            ThreadStart threadStart = delegate
            {
                SaveToDatabase(parameters);
            };

            new Thread(threadStart).Start();
        }
   #endif
      }
    } 
```

虽然我被困在 .NET 2.0 上，但我对 .NET 20 以后的任何版本都感兴趣（我相信有一天我会离开侏罗纪并加入其他人的行列）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:59:16.537

我会说您的原始代码缺少一个重要功能；操作完成（或失败）时的某种报告机制：

```
public static void Save(XmlDocument saveBundle, Action<Exception> completedCallback)
{
    ThreadStart threadStart = delegate
    {
        try
        {            
            SaveToDatabase(saveBundle);
            completedCallback(null);
        }
        catch (Exception ex)
        {
            completedCallback(ex);
        }
    };

    new Thread(threadStart).Start();            
} 
```

这样，您可以使用某种同步方法来编排您的单元测试：

```
Exception actualException = null;
using (AutoResetEvent waitHandle = new AutoResetEvent(false))
{

    instance.Save(xmlDocument, ex =>
    {
        actualException = ex;
        waitHandle.Set();
    });
    waitHandle.WaitOne();
}

Assert.IsNull(actualException); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:59:59.220

如果您真正想做的不是在调试版本中使用线程 - 这是正确的方法，也可能是最快和最有能力的方法。它可能看起来有点难看，但替代方案只是更多的布尔、配置和其他变通方法。

如果您有兴趣直接调试线程（如果并发是一个问题，这可能很重要！您应该始终尽可能靠近生产环境进行测试），那么您可以简单地去 (Debug -> Windows -> Threads) 然后右键单击要调试的线程并“切换到线程”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:06:32.560

也许您可以将此线程代码放入单独的方法中，并在测试时替换该方法。

```
virtual void SaveToDBInSeparateThread(...)
{
    ThreadStart threadStart = delegate
    {
        ...
    };

    new Thread(threadStart).Start();  
} 
```

然后，您可以代替返回 void 返回线程运行或类似的东西。

或者您可以向您的方法添加一个输入参数，如下所示：

```
virtual void SaveToDB(bool inSeparateThread)
{
    if(inSeparateThread)
    {
      ThreadStart threadStart = delegate
      {
        ...
      };

      new Thread(threadStart).Start();  
    }
    ...
} 
```

或者您可以提供某种 DatabaseSavingContext：

```
interface IDBSaveContext
{
    public void SaveToDB(...)
} 
```

并根据执行类型使用此接口的不同实现（线程、非线程）。

# android - 我可以在java中将字符串解析为时间吗

> ID：13875359
> 
> 赞同：3
> 
> 时间：2012-12-14T08:54:24.077
> 
> 标签：android

我正在使用 android.text.format.Time 并且我需要一个函数来获取一个字符串并将该字符串转换为一个 Time 对象。由于其他原因，我最初将时间对象存储为字符串。我现在只需要将字符串转换为 Time 对象。代码：

```
 Time time = new Time();
 String time = time.toString();

  Time t = new Time();
  t.parse(time);
  this.time = t; 
```

现在

```
t.parse(time) 
```

给出一个布尔值。

```
boolean value = time.parse(s) 
```

参数： time - 要解析的字符串返回： true - 如果结果时间值是 UTC 时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:02:40.537

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = sdf.parse("2012-12-14 14:05:59");
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(date.getTime());
Time time = new Time();
time.set(int second, int minute, int hourOfDay, int monthDay, int month, int year);

// int second => calendar.get(Calendar.SECOND);
// etc minute, hourOfDay, monthOfDay, month, year... 
```

# wso2 - WSO2 身份服务器 userAdmin Web 服务无法重用

> ID：13875361
> 
> 赞同：1
> 
> 时间：2012-12-14T08:54:29.677
> 
> 标签：wso2, cxf, jax-ws, wso2is

我的 WSO2 身份服务器版本是 4.0.0 最终版本。我已经打开了管理服务。

这是两个请求。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mgt="http://mgt.user.carbon.wso2.org">
   <soapenv:Header/>
   <soapenv:Body>
      <mgt:listUsers>
         <!--Optional:-->
         <mgt:filter>*</mgt:filter>
      </mgt:listUsers>
   </soapenv:Body>
</soapenv:Envelope>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mgt="http://mgt.user.carbon.wso2.org">
   <soapenv:Header/>
   <soapenv:Body>
      <mgt:getAllRolesNames/>
   </soapenv:Body>
</soapenv:Envelope> 
```

如果我在测试用例中单独调用它们，那没关系。如果我先调用 listUsers，然后调用 getAllRolesNames（在 SOAPUI 中，先调用 listUser，然后将 Envelope 更改为 getAllRolesName 一个），它会显示

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <soapenv:Fault>
         <faultcode>soapenv:Server</faultcode>
         <faultstring>unknown</faultstring>
         <detail>
            <ns:UserAdminUserAdminException xmlns:ns="http://mgt.user.carbon.wso2.org">
               <UserAdminException xsi:type="ax2566:UserAdminException" xmlns="http://mgt.user.carbon.wso2.org" xmlns:ax2566="http://common.mgt.user.carbon.wso2.org/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <ax2566:errorMessage xsi:nil="true"/>
               </UserAdminException>
            </ns:UserAdminUserAdminException>
         </detail>
      </soapenv:Fault>
   </soapenv:Body>
</soapenv:Envelope> 
```

这是否意味着服务器端实现中有一些错误？

我在 SOAPUI 中对它们进行了测试。登录会话没有过期，我仍然可以使用它进行查询。这是否意味着我必须使用请求范围而不是会话范围来创建 ws 客户端 bean？

非常感谢。

# c# - 菜单的键盘序列快捷键

> ID：13875362
> 
> 赞同：8
> 
> 时间：2012-12-14T08:54:42.953
> 
> 标签：c#, .net, visual-studio, menu, keyboard-shortcuts

我希望我正在开发的程序（在 C# .net 中）有一个序列快捷方式来访问菜单系统中的各种按钮。

例如： `Ctrl`+ `W`,`O`

首先，用户将按`Ctrl`+ `W`，然后按`O`

Visual Studio 的很多菜单快捷方式都使用了这种方法。

但是，当我编辑菜单时，我仅限于一个快捷键`Ctrl`+`W`或只是`O`，我无法对它们进行排序。

这可能与现有框架有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:27:07.087

只需您可以这样做：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
  if (previousKeyEvent != null)
  {
    if (previousKeyEvent.Modifiers == Keys.Control && previousKeyEvent.KeyCode == Keys.W && e.KeyCode == Keys.O)
    {
      MessageBox.Show("Ctrl + W then O");
    }
    else
    {
      MessageBox.Show("Not handled");
      previousKeyEvent = null;
    }
  else
    previousKeyEvent = e;
  }
} 
```

**需要考虑的事项**

*   单键组合 - 处理那些没有先前键事件范围的组合。
*   用于显示您正在等待用户输入的标签，就像 Visual Studio 一样。
*   使用 ShortCutKeyDisplayString 属性在菜单项旁边显示自定义快捷方式。

# javascript - 我想在 ember.js 的示例 Todo 应用程序中嵌套 todos

> ID：13875363
> 
> 赞同：1
> 
> 时间：2012-12-14T08:54:46.700
> 
> 标签：javascript, jquery, ember.js

我是 ember.js 的新手。我正在尝试构建这个示例待办事项应用程序。（[http://emberjs.com/examples/todos/](http://emberjs.com/examples/todos/)）

我有一个问题。

我希望嵌套任务如下所示。

*   任务一

    *   任务一

    *   任务 b

*   任务 B

    *   任务一

*   任务 C

我该如何实施？

我阅读了 ember.js 文档（[http://emberjs.com/documentation/](http://emberjs.com/documentation/)），但我认为该文档没有提供足够的信息来完成我想要的。

如果您能给我一些提示，我将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:41:16.137

我会首先更新模型以满足[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)，然后更新车把视图以反映子视图（类似类型）。

# oauth-2.0 - 什么是 id_token google oauth

> ID：13875366
> 
> 赞同：63
> 
> 时间：2012-12-14T08:54:56.243
> 
> 标签：oauth-2.0, google-oauth

当我尝试对 googleapi 执行 oauth2 时，我刚刚得到以下结果。[只有一件事：我在文档](https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse)中找不到 id_token 的用途。

```
{
  "access_token": "xxxx",
  "token_type": "Bearer",
  "expires_in": 3600,
  "id_token": "veryverylongstring",
  "refresh_token": "abcdefg"
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-17T21:06:05.257

id_token 是 JSON Web 令牌 (JWT)。如果您对其进行解码，您会看到它包含多个断言，包括用户的 ID。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/13016081/1678199)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-02-22T07:02:02.973

id_token*用*在 OpenID Connect 协议中，在该协议中用户被认证和授权。（身份验证和授权之间有一个重要[区别](http://www.differencebetween.net/technology/difference-between-authentication-and-authorization/)。）您将获得*id_token*和*access_token*。

id_token值包含有关用户身份验证的信息*。*ID 令牌类似于身份卡的概念，采用标准 JWT 格式，由 OpenID 提供者 (OIDP) 签名。要获得一个，客户端需要通过身份验证请求将用户发送到他们的 OIDP。

ID令牌的特点：

1.  断言用户的身份，在 OpenID (sub) 中称为主题。
2.  指定颁发机构 (iss)。
3.  为特定受众生成，即客户 (aud)。
4.  可能包含一个随机数（nonce）。
5.  可以根据强度 (acr) 指定何时 (auth_time) 以及如何对用户进行身份验证。
6.  有问题 (iat) 和过期时间 (exp)。
7.  可能包括有关主题的其他请求详细信息，例如姓名和电子邮件地址。
8.  已进行数字签名，因此可以由预期的收件人进行验证。可以选择对机密性进行加密。

ID 令牌语句或声明被打包在一个简单的 JSON 对象中：

```
{
  "sub"       : "alice",
  "iss"       : "https://openid.c2id.com",
  "aud"       : "client-12345",
  "nonce"     : "n-0S6_WzA2Mj",
  "auth_time" : 1311280969,
  "acr"       : "c2id.loa.hisec",
  "iat"       : 1311280970,
  "exp"       : 1311281970
} 
```

# postgresql - 如何更新 PostgreSQL 中的大量行？

> ID：13875376
> 
> 赞同：2
> 
> 时间：2012-12-14T08:55:23.803
> 
> 标签：postgresql, query-optimization

我需要更新表中的数千行。例如，我有 1000 行 ids - 1, 2.. 1000：

```
mytable:
| id   | value1 | value2 |
|  1   |  Null  |  Null  |
|  2   |  Null  |  Null  |
...
| 1000 |  Null  |  Null  | 
```

现在我需要更改前 10 行。我可以这样做：

```
UPDATE mytable SET value1=42, value2=111 WHERE id=1
...
UPDATE mytable SET value1=42, value2=111 WHERE id=10 
```

这需要很多请求并且不是很快，所以我决定做这个优化：

```
UPDATE mytable SET value1=42  WHERE id in (1, 2, 3.. 10)
UPDATE mytable SET value2=111 WHERE id in (1, 2, 3.. 10) 
```

**注意**：在这种情况下，我实际上可以编写`SET value1=42, value2=111`，但在现实世界的应用程序中，这组 id 是不一样的，对于一个行，我需要设置 value1，对于其他 - value2，对于一些行的子集，我需要同时设置两者。因此，我需要两个查询。

问题是我有大量的身份证。这个查询大约是 1Mb！

**Q1**：这是优化此更新的正确方法吗？

**Q2**：发送这么大的查询是否正确？我可以通过将此查询分成几个较小的部分来获得更快的更新吗？

我不能使用`where`语句，我的程序中有很多行 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:05:53.507

创建一个[TEMPORARY TABLE](http://www.postgresql.org/docs/current/static/sql-createtable.html)并使用您的目标 id 和新值填充它。然后使用[带有 FROM](http://www.postgresql.org/docs/current/static/sql-update.html)子句的 UPDATE 加入该目标并在单个命令中完成。

一般来说，每当你有大量像这样的 id/values 时，如果你先将它们移动到数据库中，生活会变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:13:02.963

**Q1**：这是优化此更新的正确方法吗？

`CASE ... WHEN`应该仍然可以使用语法结构将其写在一个查询中：

```
UPDATE mytable SET
  value1 = 
    CASE 
      WHEN id IN ( 1, 2, 3, 10) THEN 42
      WHEN id IN (11,12,13, 20) THEN 43
      ELSE value1
    END,
  value2 =    
    CASE 
      WHEN id IN ( 1, 2, 3, 10) THEN 42
      WHEN id IN (11,12,13, 20) THEN 43
      ELSE value2
    END; 
```

等等

您提到您可能必须在多个位置更新行，而上面的内容可以让您在一个查询中毫无问题地做到这一点。

**更新**：我忽略了速度是你主要关心的事实（你说“优化”），我的回答在这方面是不正确的。使用所选答案中解释的临时表会带来更好的性能。

**Q2**：发送这么大的查询是否正确？我可以通过将此查询分成几个较小的部分来获得更快的更新吗？

我不认为 Postgresql 在处理大型查询（甚至远大于 1mb）时应该有很多问题。请记住，SQL DB 初始化脚本可能比 1mb 大得多。

# linux - 如何使用完整路径或文件名显示 grep 结果

> ID：13875380
> 
> 赞同：40
> 
> 时间：2012-12-14T08:55:41.967
> 
> 标签：linux, bash, grep

我需要知道完整的文件路径`grep`。

我使用类似的命令

```
cat *.log | grep somethingtosearch 
```

现在我需要用完整的文件路径显示结果，从其中取出匹配的结果。

帮助任何人？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T09:47:10.373

假设您有两个日志文件：

*   C:/temp/my.log
*   C:/temp/alsoMy.log

cd 到 C: 并使用：

```
grep -r somethingtosearch temp/*.log 
```

它会给你一个类似的列表：

```
temp/my.log:somethingtosearch
temp/alsoMy.log:somethingtosearch1
temp/alsoMy.log:somethingtosearch2 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-31T10:47:23.007

当我正在寻找完全相同的问题时，我跌倒在这里，也许它可以帮助其他人。

我认为真正的解决方案是：

```
cat *.log | grep -H somethingtosearch 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-06T11:11:51.093

如果您想查看完整路径，我建议您`cd`到顶级目录（如果使用 Windows，则为您的驱动器）

```
cd C:\
grep -r somethingtosearch C:\Users\Ozzesh\temp 
```

或者在 Linux 上：

```
cd /
grep -r somethingtosearch ~/temp 
```

如果你真的反对你的文件名过滤 (*.log) 并且你想要`recursive`（文件并不都在同一个目录中），组合`find`和`grep`是最灵活的方式：

```
cd /
find ~/temp -iname '*.log' -type f -exec grep somethingtosearch '{}' \; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-21T18:17:01.457

命令：

```
grep -rl --include="*.js" "searchString" ${PWD} 
```

返回输出：

```
/root/test/bas.js 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-12T04:20:08.067

这类似于[BVB Media](https://stackoverflow.com/a/47420001/8863043)的回答。

```
grep -rnw 'blablabla' `pwd` 
```

它在我的 ubuntu bash 上运行良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-06T10:28:22.660

为了我

```
grep -b "searchsomething" *.log 
```

按我的意愿工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-07T09:18:00.353

打印完整路径的最简单方法是将相对起始路径替换为绝对路径：

```
grep -r --include="*.sh" "pattern" ${PWD} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-14T08:58:04.897

采用：

```
grep somethingtosearch *.log 
```

并且文件名将与匹配项一起打印出来。

# android - 简单的代码，但游标仍然从内容提供者返回 null

> ID：13875382
> 
> 赞同：0
> 
> 时间：2012-12-14T08:55:45.287
> 
> 标签：android, null, cursor, android-contentprovider

这里有一个使用 managedQuery 游标的简单代码部分的问题。两部分，代码的上半部分将一个字符串放入 MediaStore 数据库内容提供程序的 LATITUDE 列。

下面代码的第二部分从数据库中读取相同的字符串。这是它返回空结果的地方。要么是因为在代码的第一部分中字符串没有正确读入数据库，要么是在第二部分从数据库中读回字符串时出错。

我正在使用 Media.images 内容提供程序的 LATITUDE 列来存储一个字符串。没有其他可用的未使用列，这就是我使用它的原因。目标是将 mp3 文件的字符串路径名放入图像的 LATITUDE 列中，稍后通过另一个查询再次将其读回。

我将问题追溯到以下代码。第二部分代码中的游标返回 null。我使用游标有什么问题，或者我不知道有什么错误吗？

```
 String displayName; // string pathname of the mp3 file to be put into LATITUDE column
  String filename; // the pathname of the image that I want to add the database info to

  ContentValues imageValues = new ContentValues();
  String selection3 = MediaStore.Images.Media.DATA + "='" + filename +"'";
  imageValues.put(MediaStore.Images.Media.LATITUDE, displayName);
  getContentResolver().update(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
  imageValues, selection3, null);

  String[] proj6 = { MediaStore.Images.Media.LATITUDE };
  String selection6 = MediaStore.Images.Media.DATA + "='" + filename +"'";
  Cursor cursor2 = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
  proj6, selection6, null, null);
   cursor2.moveToFirst();        
  String displayer = (String)
  cursor2.getString(cursor2.getColumnIndex(MediaStore.Images.Media.LATITUDE)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:56:12.170

发现并没有像我想象的那样出现错误。这只是一个打字错误。

put 方法有“Images.Media.LATITUDE”，更新方法有“Audio.Media.LATITUDE”，将其更改为“Images.Media.LATITUDE”，就像在 put 方法中一样，现在可以使用。

```
 imageValues.put(MediaStore.Images.Media.LATITUDE, displayName);
  getContentResolver().update(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
  imageValues, selection3, null); 
```

# javascript - 在参数中传递函数，以在加载时运行

> ID：13875385
> 
> 赞同：0
> 
> 时间：2012-12-14T08:55:50.440
> 
> 标签：javascript, jquery

这是在加载时运行的全局函数：

```
$.fn.loadfns = function(specificfns) {
    $('#wrapper').hide();
    $('#load').fadeIn(400);
    $(window).load( function() {
        $('#load').fadeOut(400, function() {
            $('#wrapper').fadeIn(600, function() {
                specificfns;
            })
        })
    });
}; 
```

问题是，有些页面需要在加载后运行额外的功能（比如将事件插入 glDatePicker），所以我试图将它们作为 loadfns 的参数传递，比如

```
$.fn.loadfns("alert('I won't be run');"); 
```

但是什么也没发生，它没有被执行。如果我做

```
... rest of function ...
$('#wrapper').fadeIn(600, function() {
    alert(specificfns);
}) 
```

它提醒“警报（'我不会被跑'）;” （不带括号）应该作为一个函数工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:58:41.983

要传递一个函数，你传递一个*函数*，而不是一个字符串。

如果您只想允许一个额外的功能（当然可以调用其他功能）：

```
$.fn.loadfns = function(extraFunction) {
$('#wrapper').hide();
$('#load').fadeIn(400);
$(window).load( function() {
  $('#load').fadeOut(400, function() {
    $('#wrapper').fadeIn(600, function() {
        if (extraFunction) {
            extraFunction();
        }
    })
  })
});
}; 
```

像这样使用：

```
$("....").loadfns(function() {
     alert("Do something");
}); 
```

如果你想允许多个额外的功能，传入一个数组：

```
$.fn.loadfns = function(extraFunctions) {
$('#wrapper').hide();
$('#load').fadeIn(400);
$(window).load( function() {
  $('#load').fadeOut(400, function() {
    $('#wrapper').fadeIn(600, function() {
        var index;

        if (extraFunctions) {
            for (index = 0; index < extraFunctions.length; ++index) {
                extraFunctions[index]();
            }
        }
    })
  })
});
}; 
```

（当然，如果您在启用 ES5 的环境中或使用 shim，`forEach`则可以使用而不是`for`循环。）

像这样使用：

```
$("....").loadfns([doSomething, doSomethingElse]);

function doSomething() { /* ... */ }
function doSomethingElse() { /* ... */ }
// They don't have to be named, it's just clearer this way than with inline ones 
```

`try/catch`如果您想处理来自函数的异常，您可以考虑在函数调用周围放置块。

# php - XMLRPC 32300：仅在 Cron 作业上出现传输错误

> ID：13875386
> 
> 赞同：0
> 
> 时间：2012-12-14T08:55:56.423
> 
> 标签：php, wordpress, cron, xml-rpc

我正在使用 Wordpress 中的 XMLRPC 函数运行一些脚本，但在我的脚本中收到错误“发生错误 - -32300：传输错误 - 无法打开套接字”。

有趣的是，当我手动运行脚本时，一切正常。当我将它作为 cron 作业运行时，我收到带有此错误消息的电子邮件。我没有成功的事情是......

1) 禁用所有插件 2) 联系我的托管公司支持。他们不知道为什么，给我留下了“我不是程序员”的答案。

我所有其他查询各种 API 或 RSS 提要的脚本都运行得很好，但任何试图查询 XML RPC 提要的脚本都因此错误而死。谁能帮我诊断问题？我正在运行默认启用 XML RPC 的 Wordpress 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:05:59.043

问题解决了。对于数百万其他有 32300 套接字错误问题的人，我的问题是通过在调用新的 IXR_Client 时删除我的 xml rpc 路径中的 $_SERVER['HTTP_HOST'] 来修复的。不知道我不能像那样使用 $_SERVER['HTTP_HOST'] 。

# php - 如何将多维数组与magento中的并行行和列索引进行比较？

> ID：13875390
> 
> 赞同：1
> 
> 时间：2012-12-14T08:56:17.223
> 
> 标签：php, arrays, compare

**嗨，请运行我的代码：**请查看我的预期输出。如何为我的预期结果调整我的代码。

```
<?php
$arrayA=array(array("id" => 8, "name" => "test1"),  
            array("id" => 4, "name" => "test2"),  
            array("id" => 4, "name" => "test3")  
);
$arrayB=array(array("id" => 3, "domain_name" => "www.test.com","activation_key" =>"ADKLJ"),
            array("id" => 4,  "domain_name" => "www.yahoomail.com","activation_key" =>"LKLJ"),
            array("id" => 4, "domain_name" => "www.gmail.com","activation_key" =>"OLOLJ")           
);

//$places=Array();
$i=0;
foreach($arrayA as $itemA)
{
    $match=0;

    foreach($arrayB as $itemB)
    {
        if($itemA["id"]==$itemB["id"])
        {
            $arrayA[$i]["domain_name"]=$itemB["domain_name"];
            $arrayA[$i]["activation_key"]=$itemB["activation_key"];
            $match=1;
        }
    }
    if($match==0)
    {
            $arrayA[$i]["domain_name"]="";
            $arrayA[$i]["activation_key"]="";
    }
    $i++;
}
echo "<pre>";
print_r($arrayA);
echo "</pre>";

?> 
```

**输出**

数组（[0] => 数组（[id] => 8 [name] => test1 [domain_name] => [activation_key] =>）

```
[1] => Array
    (
        [id] => 4
        [name] => test2
        [domain_name] => www.gmail.com
        [activation_key] => OLOLJ
    )

[2] => Array
    (
        [id] => 4
        [name] => test3
        [domain_name] => www.gmail.com
        [activation_key] => OLOLJ
    ) 
```

)

**但我的预期输出是**

数组（[0] => 数组（[id] => 8 [name] => test1 [domain_name] => [activation_key] =>）

```
[1] => Array
    (
        [id] => 4
        [name] => test2
        [domain_name] => www.yahoomail.com
        [activation_key] => LKLJ
    )

[2] => Array
    (
        [id] => 4
        [name] => test3
        [domain_name] => www.gmail.com
        [activation_key] => OLOLJ
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:24:34.167

```
// store all activated domains
$activated = array();

foreach($arrayA as $key => $itemA)
{
    $match=0;

    foreach($arrayB as $itemB)
    {
        if($itemA["id"]==$itemB["id"] && !in_array($itemB["domain_name"],$activated))
        {
            $arrayA[$key]["domain_name"]=$itemB["domain_name"];
            $arrayA[$key]["activation_key"]=$itemB["activation_key"];
            $match=1;
            $activated[] = $itemB["domain_name"];
            break;
        }
    }
    if($match==0)
    {
            $arrayA[$key]["domain_name"]="";
            $arrayA[$key]["activation_key"]="";
    }
}
echo "<pre>";
print_r($arrayA);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:04:11.583

尝试以下方式

```
<?php
$arrayA=array(array("id" => 8, "name" => "test1"),  
            array("id" => 4, "name" => "test2"),  
            array("id" => 4, "name" => "test3")  
);
$arrayB=array(array("id" => 3, "domain_name" => "www.test.com","activation_key" =>"ADKLJ"),
            array("id" => 4,  "domain_name" => "www.yahoomail.com","activation_key" =>"LKLJ"),
            array("id" => 4, "domain_name" => "www.gmail.com","activation_key" =>"OLOLJ")           
);

//$places=Array();
$i=0;
foreach($arrayA as $key => $itemA)
{
    $match=0;
    $itemB = $arrayB[$key]; 
        if($itemA["id"]==$itemB["id"])
        {
            $arrayA[$i]["domain_name"]=$itemB["domain_name"];
            $arrayA[$i]["activation_key"]=$itemB["activation_key"];
            $match=1;
        }
    if($match==0)
    {
            $arrayA[$i]["domain_name"]="";
            $arrayA[$i]["activation_key"]="";
    }
    $i++;
}
echo "<pre>";
print_r($arrayA);
echo "</pre>";

?> 
```

工作样本：[http ://codepad.org/mrBqqeli](http://codepad.org/mrBqqeli)

# c - 链表头地址变化 C

> ID：13875395
> 
> 赞同：0
> 
> 时间：2012-12-14T08:56:38.327
> 
> 标签：c, pointers, linked-list, structure, scanf

我创建了我的结构的链表，但由于某种原因，每次我添加另一个链接时它都会改变头地址，但我希望 y 头地址是第一个条目。这是我的代码：

```
struct checkPoints *tgh = NULL;
struct checkPoints **linkedlist = &tgh;
struct checkPoints *cp = malloc(sizeof (struct checkPoints));
chPo = fopen(fileName, mode);
if (chPo == NULL) {
    printf("Can't find the files.");
    exit(1);
} else {
    for (i = 0; i < lines; i++) {

        fscanf(chPo, "%c %d %d %d:%d\n", &cp->dropOut, &cp->currentPoint, &cp->competitor, &cp->hour, &cp->minute);
        cp->next = NULL;
        if (*linkedlist == NULL) {
            printf("ONCE");
            *linkedlist = cp;
        } else {
            struct checkPoints *new = *linkedlist;
            while (new->next != NULL) {
                new = new->next;
            }
            new->next = cp;
        }
    }
} 
```

每个 fscanf 发生它都会将头地址更改为下一个，有什么想法吗？

此行之后的头地址更改：`fscanf(chPo, "%c %d %d %d:%d\n", &cp->dropOut, &cp->currentPoint, &cp->competitor, &cp->hour, &cp->minute);`

结构是这样的：

```
struct checkPoints{
char dropOut;
int currentPoint;
int competitor;
int hour;
int minute;
struct checkPoints *next;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:02:39.053

这里的问题是你没有分配新的节点，你只有一个节点，你一遍又一遍地改变。您需要在循环内分配节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:03:12.417

我没有看到任何 malloc/calloc 来创建新节点，这些节点将被添加到列表中。

您需要**创建**新节点，这些节点将被添加到列表中。正确的位置就在之前

```
 cp->next = NULL; 
```

线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:05:32.763

您需要为`struct checkPoints`您阅读的每一行分配一个新的。它会给你一个像这样的循环：

```
struct checkPoints *linkedlist = NULL;
/* … */
for (i = 0; i < lines; i++) {
    struct checkPoints *cp = malloc(sizeof(struct checkPoints));
    fscanf(chPo, "%c %d %d %d:%d\n", &cp->dropOut, &cp->currentPoint, &cp->competitor, &cp->hour, &cp->minute);
    cp->next = NULL;
    if (linkedlist == NULL) {
        linkedlist = cp;
    } else {
        struct checkPoints *new = linkedlist;
        while (new->next != NULL) {
            new = new->next;
        }
        new->next = cp;
    }
} 
```

请注意，这种处理方式效率非常低，因为它需要为每一行再次扫描整个列表。您应该保留指向列表尾部的指针，以便可以在没有`while`循环的情况下追加。一个聪明的替代方法是将每一行放在列表的前面，一旦你阅读了整个文件，就反转整个列表。

```
struct checkPoints *cp;
for (i = 0; i < lines; i++) {
    cp = malloc(sizeof(struct checkPoints));
    fscanf(chPo, "%c %d %d %d:%d\n", &cp->dropOut, &cp->currentPoint, &cp->competitor, &cp->hour, &cp->minute);
    cp->next = linkedlist;
    linkedlist = cp;
}
cp = linkedlist;
linkedlist = NULL;
struct checkPoints *next = cp;
while (cp) {
    next = cp->next;
    cp->next = linkedlist;
    cp = next;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:14:07.613

在您的情况下，您正在分配一个节点并将数据写入同一地址。

您需要为循环内的新节点分配内存。

必须在循环的开头添加以下行，

struct checkPoints *cp = malloc(sizeof (struct checkPoints));

# html - 分区中心的图像

> ID：13875397
> 
> 赞同：2
> 
> 时间：2012-12-14T08:57:02.577
> 
> 标签：html, css, image, center

我有分割（`same width and height`）和图像（`different width and height`）。我试图以该部门内的图像为中心。所以用

```
{ text-align: center} 
```

这里图像居中，但最高值没有改变。

这是我真正需要的例如图像。

![在此处输入图像描述](../Images/5e6e42b2f44d63ece3c99400a16ed37d.png)

这是我尝试过的[**jsfiddle 。**](http://jsfiddle.net/Arav8/1/)我在等你的建议。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:05:13.390

您可以使用`display:table-cell`将内部图像对齐到 div 的中间。

但在这种情况下，你不能给`margin`，因为`table-cell`强制`div`充当 a`td`并且从技术上讲，你不能给 table 留有余地`td`。

所以我用白色为 div 添加了边框。

**CSS**

```
.background-image{
    width: 150px;
    height: 160px;
    background: #C8BFE7;
    text-align: center;
    display:table-cell;
    vertical-align:middle;
    border:white 5px solid
}
​ 
```

**[演示](http://jsfiddle.net/Arav8/3/)**

**- - - - - - - - - - - - - - - 或者 - - - - - - - - - - ---------------------**

您可以为每个 div 添加一个外部 div，并为外部 div 指定边距。

**CSS**

```
.outer{margin: 0 0 10px 10px; display:inline-block}
.background-image{
    width: 150px;
    height: 160px;
    background: #C8BFE7;    
    text-align: center;
    display:table-cell;
    vertical-align:middle;
}
​ 
```

**[演示 2](http://jsfiddle.net/Arav8/7/)**

# php - 传递 DB 数据以查看的正确 MVC 概念

> ID：13875398
> 
> 赞同：1
> 
> 时间：2012-12-14T08:57:07.130
> 
> 标签：php, codeigniter

我想使用正确的 MVC 概念。所以，说在模型中我们有例如查询数据库

```
 class my_model {

        public function getUserData () {
            $res = $this->db->query("
                SELECT name, lastname, age, mail FROM users
            ");

            return $res;
        }

    } 
```

我做什么：我将`mysqli_result`对象传递给视图，然后在`while`循环视图中从数据库打印数据。

但据我所知，传递`mysqli_result`给视图，是不对的 MVC。

那么，你能告诉我，在这种情况下，什么是正确的 MVC 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:10:37.093

在 MVC 中，视图会直接从模型中请求数据，而不会被任何东西传递数据。视图依赖于模型并请求自己的数据。请参阅此答案：[MVC 应该如何在 CodeIgniter 中工作，](https://stackoverflow.com/questions/13813046/how-is-mvc-supposed-to-work-in-codeigniter/13821880#13821880)以更详细地描述为什么会这样。

答案是在模型之后初始化视图，并在构造函数中将整个模型传递给视图。

例如

```
class View {
    private $model;

    public function __construct(my_model $model) {
        $this->model = $model;
    }

    public function output() {
        $html = '<ul>';
        foreach ($this->model->getUserData() as $row) {
            $html .= '<li>' . $row->name . '</li>';
        }
        $html .= '</ul>';
        return $html;       
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:00:33.437

我认为您应该实现一个保存用户数据的 DTO 类。然后，您应该将此 DTO 类与 Iterator 一起使用，以便在获取结果时不会初始化 100 个 DTO 类。一个好的做法是实现一个服务外观，它执行实际的数据库查询和迭代器构建，以便您的模型只调用这个存储库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T20:14:43.260

在我的 MVC 中，我会做类似的事情：

```
class my_model {
  public function getUserData () {
    $res = $this->db->query("
      SELECT name, lastname, age, mail FROM users
    ");

    while ($row = mysql_fetch_assoc($res)) {
      $results[] = $row;
    }
    return $results;
  }
}

class my_controller {
  function index() {
    $user_data = $my_model->getUserData();
    include("view.php");
  }
}

  // view.php
  echo "<ul>";
  foreach ($user_data as $d) {
      echo "<li>" . $d[keyname] . "</li>";
  }
  echo "</ul>"; 
```

# iphone - 删除开发者资料

> ID：13875403
> 
> 赞同：1
> 
> 时间：2012-12-14T08:57:22.637
> 
> 标签：iphone, ios, xcode4, certificate, xcode4.5

我想从 xcode 中删除我的开发人员资料，因为我不确定 xcode 是否正在使用我想要的资料。

所以，我用组织者删除了它，但我可以在设备中安装我的应用程序，所以它没有被删除，是吗？

我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:32:35.663

有多个地方可以缓存配置文件。组织者只有一个地方。在构建应用程序时，它会在临时位置创建一个副本。然后构建的产品也有一个副本作为 embedded.mobileprovision。当应用程序安装在设备上时，配置文件将被复制到设备的配置文件存储中。

因此，要完全摆脱配置文件的所有实例：

*   在组织者中删除
*   删除您的构建文件夹
*   进入首选项-设备上的常规并在那里删除配置文件

# java - 错误 - 构造函数 Level2Class(double) 未定义

> ID：13875405
> 
> 赞同：1
> 
> 时间：2012-12-14T08:57:31.437
> 
> 标签：java

我的代码 -

```
public abstract class Level1Class
{
  protected double num = 0.0D;  
  protected Level1Class(){}
  protected Level1Class(double num){this.num = num;}
  protected abstract methods A, B, C...etc //pseudocode !

}

public class Level2Class extends Level1Class
{
  //NO CONSTRUCTORS HERE
  //BUT, only implementation of methods A,B, C
} 

public class Tester
{
  Level2Class l2c = new Level2Class(10.0D); //This causes the compiler error ! 
} 
```

有人可以告诉我为什么会出现此错误。我知道如果我在 Level2Class 中创建必要的构造函数，它就会成功。但是，我想知道原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:02:49.773

您描述的行为的主要原因是Java构造函数没有被继承。创建类时，您有两种选择：

1.  根本不要指定任何构造函数（如您的示例中所示）。在这种情况下，编译器会自动添加一个默认构造函数（不带参数）。

2.  创建特定的构造函数（带参数或不带参数）。在这种情况下，类中只存在您定义的构造函数，编译器不会添加默认构造函数。

在您的示例中，您没有在 class 中定义任何构造函数`Level2Class`，因此编译器添加了不带参数的默认构造函数。`double`编译后的类中不存在带参数的构造函数，因此您的错误*Constructor undefined*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T09:00:23.760

`Level2Class`有一个由编译器实现的唯一默认构造函数。`Level2Class`没有以 double 作为参数的构造函数。

```
Level2Class l2c = new Level2Class(10.0D); 
```

这将尝试找出`Level2Class`类中不可用的双重构造函数，因为构造函数没有被继承。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T09:12:45.810

在 Level2Class 类中创建一个带双参数的构造函数

```
public class Level2Class extends Level1Class
{
   Level2Class (double val)
   {
     // body of the constructor
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T09:06:10.773

java中的构造函数不是多态的，当你调用`new Level2Class(10.0D)`程序时找不到`Level2Class(double)`它看到`Level2Class()`在这种情况下哪个是默认构造函数。

在编译你的代码后简单地说就像：

```
Level2Class {
  Level2Class() { super(); }
} 
```

所以你必须声明构造函数`Level2Class(double) { super(double) }`才能使它工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T09:06:20.610

在Java中，当一个类被扩展时，只有公共和受保护的方法会被继承，构造函数不会。

# php - 如何在php中使用列颜色格式化导出的excel表？

> ID：13875407
> 
> 赞同：1
> 
> 时间：2012-12-14T08:57:39.237
> 
> 标签：php

我已经导出了一个 Excel 表，它将从我的**客户**表**（Mysql 数据库）**中收集数据，现在我想用列颜色对其进行格式化。

这是我导出excel表的代码....

```
<?php

ob_start();
session_start();
include("include/session.php");
include("common_function.php");
//connect the database

$customer_id=$_GET['pid'];
//Enter the headings of the excel columns
$contents="Sr.,Agent Name,Contact Person,Contact Number,Password,Deal With Customer,References,Time to reach,Package Offered,Mode of Payment,Note,NEAREST CROSS STREET,DATE OF BIRTH\n"; 

//Mysql query to get records from datanbase
//You can customize the query to filter from particular date and month etc...Which will depends your database structure.

$sql = "SELECT id,agent_id,fname1,mobile_no,password,fname,rentfrom,cheque_no,package_id,monthly_monitoring,final_comment,cross_street,dob1 FROM customer WHERE `id`='$customer_id'";

$user_query = mysql_query($sql);

//While loop to fetch the records
while($row = mysql_fetch_array($user_query))
{
$contents.=$row['id'].",";
$contents.=$row['agent_id'].",";
$contents.=$row['fname1'].",";
$contents.=$row['mobile_no'].",";
$contents.=$row['password'].",";
$contents.=$row['fname'].",";
$contents.=$row['rentfrom'].",";
$contents.=$row['cheque_no'].",";
$contents.=$row['package_id'].",";
$contents.=$row['monthly_monitoring'].",";
$contents.=$row['final_comment'].",";
$contents.=$row['cross_street'].",";
$contents.=$row['dob1']."\n";
}

// remove html and php tags etc.
$contents = strip_tags($contents); 

//header to make force download the file

header("Content-Disposition: attachment; filename=Sale_report".date('d-m-Y').".csv");
print $contents;

?> 
```

现在我想给我的第一行上色...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:23:34.383

嘿 Cnik，Ayyappan Sekar 是对的。PHPExcel 是一个可用于生成 xls（和许多其他格式）文件的库。它的目的是生成一个文件，而不是在某个 id 上发送它。

您可以做的是，首先使用 PHPExcel 库生成一个文件并将其保存在某处。要向某个 id 发送电子邮件，您可以使用 http://php.net/manual/en/function.mail.php'>mail 功能。然而，使用 php 的邮件功能发送带有附件的电子邮件并不复杂，虽然不是很困难。

请参阅下面给出的链接：
1] [http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/](http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/)
2][通过 PHP 邮件附加文件](https://stackoverflow.com/questions/11961969/attach-file-through-php-mail)（参考答案阿斯普林）
3] [http://www.texelate.co.uk/blog/send-email-attachment-with-php/](http://www.texelate.co.uk/blog/send-email-attachment-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:00:47.983

CSV 文件是一个简单的文本文件，不能用颜色格式化它 [http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:10:05.177

[您好，您可以使用PHPExcel](http://phpexcel.codeplex.com/)库，而不是使用标头导出到 excel 。它提供了更简单的内置方法来实现你想要的......甚至你可以应用样式、合并单元格等

# javascript - div上的onclick功能不起作用

> ID：13875408
> 
> 赞同：1
> 
> 时间：2012-12-14T08:57:46.693
> 
> 标签：javascript, jquery

我有一个从数据库中获取 keyup 事件记录的功能。这是我的代码：

```
function displaySearch(key) {
$.ajax({
    type:"POST",
    url:"searchprofile.php",
    data:{
        k:key
    },
    success:function(data){
       var details_arr=data.split("+");
        $('.searchresult').empty();
        for(var i=0;i<details_arr.length-1;i++){
            $('.searchresult').append("<div class='profile' id='searchprofile'><img class='profilepic' src='images/profile.jpg'/><div class='doctorname'><div class='pname' onclick='saveName("+details_arr[i]+")'>"+details_arr[i]+"</div></div></div>");
            $('.searchresult').show();
            $('.searchresult .profile').show();
        }
        details_arr.length=0;
    }
});
} 
```

但我在这里收到 javascript 错误，说“意外令牌非法”。如何为 onclick 函数提供 details_arr[i] 的值？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:00:22.010

因为你有 jQuery，你真的不应该内联代码。如您所见，它使处理带引号的字符串中的引号变得更加困难（是的，您的参数周围缺少引号`saveName`）。

你可以这样做：

```
 (function(i){
      $('.searchresult').append(
        "<div class='profile' id='searchprofile'>"
        + "<img class='profilepic' src='images/profile.jpg'/>"
        + "<div class='doctorname'>"
        + "<div id=someId class='pname'>"+details_arr[i] // <- give some Id
        +"</div></div></div>"
      );
      $('#someId').click(function(){saveName(details_arr[i])});
  })(i);
  $('.searchresult').show(); 
```

请注意，我使用了一个闭包来确保 i 在回调中具有所需的值（而不是迭代结束时的值）。

小心拆分：在大多数浏览器`"+aaa".split('+')`上`["", "aaa"]`，由于您不会迭代到数组的末尾，因此这个示例字符串会让您什么都不迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:45:34.530

```
function openNow(x)
{
    var pageUrl = '<%=ResolveUrl("~/OnFriends.php")%>'
    $.ajax({
        type: "POST",
        url: pageUrl + '/CreateNew',
        data: '{k: "'+ x +'"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success:function(data)
        {
            <---Now Do Your Code Hear--->
        }
        });
} 
```

CreateNew 是我在 .php 文件中创建的 Web 服务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:29:38.663

我会使用类似的东西， `bare in mind ID must be unique inside a document (HTML Page)` 因为内容是动态生成的；最好使用 JQuery “on”

```
 $(".pname").on("click", function (event) {
       saveName($(this).text());
   }); 
```

绑定点击事件的事件处理程序

```
function displaySearch(key){
    $.ajax({
        type: "POST",
        url: "searchprofile.php",
        data: {
            k: key
        },

        success: function(data) {
            var details_arr = data.split("+");

            var searchResults = "";
            for (var i = 0; i < details_arr.length - 1; i++) {
                searchResults += "<div class='profile'>" +
                    "<img class='profilepic' src='images/profile.jpg'/>" +
                    "<div class='doctorname'>" +
                    "<div class='pname'>" + details_arr[i] +
                    "</div></div></div>";

            }
            $('.searchresult').html(searchResults).show();
        }
    });
}

$(".pname").on("click", function (event) {
    saveName($(this).text());
}); 
```

使用 Jquery html 替换循环外 searchresult 内的所有内容，这样它将被调用一次而不是 details_arr.length - 1 次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:14:00.283

你应该告诉你出错的那一行

我认为您没有在 ajax 调用中指定您的 Web 服务...“url:”searchprofile.php”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T06:35:03.487

终于让onclick功能工作了。:)

我不是每次都添加 div，而是通过在 ajax 返回的数据中添加我需要的 html 来编辑我的 php 页面。

# three.js - 射线交叉点和子相机

> ID：13875413
> 
> 赞同：0
> 
> 时间：2012-12-14T08:58:20.487
> 
> 标签：three.js, camera, intersection, raytracing

我已经玩了 three.js 几个星期了，并且在**光线投射**方面几乎没有不一致的地方。这是一个简化版本，演示了我遇到的错误之一：

[http://jsfiddle.net/eMrhb/12/](http://jsfiddle.net/eMrhb/12/)

例如，将相机添加到球体**网格**以进一步使用**TrackBallControl**。

```
scene.add(mesh);    
mesh.add(camera); 
```

在球体上单击几次并打开控制台，没有向我们显示**光线**和**网格**之间的预期交点。

将相机添加到场景（[http://jsfiddle.net/eMrhb/9/](http://jsfiddle.net/eMrhb/9/)），解决了这个问题：

```
scene.add(mesh);    
scene.add(camera); 
```

但是我可以在场景对象和相机之间使用更复杂的层次结构来满足我的需要。

这是一个限制吗？如果是，有什么我可以使用的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:12:52.020

是的，这是可以修复的。

如果相机是另一个旋转或平移对象的子对象，那么您必须在光线投射中使用不同的模式。

而不是这种熟悉的模式：

```
var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() ); 
```

您必须改用此模式：

```
var position = camera.matrixWorld.getPosition().clone();
var ray = new THREE.Ray( position, vector.subSelf( position ).normalize() ); 
```

三.js r.53

# android - Android中的图像标题

> ID：13875424
> 
> 赞同：1
> 
> 时间：2012-12-14T08:59:03.290
> 
> 标签：android, uiimageview

我需要使用从服务器获取的 Caption 在 ImageViwer 中打开图像，我正在获取图像 URL 和文本标题。我想要一个可以显示带有标题的图像的自定义图像查看器。

图像应如下所示：

![图片](../Images/e0159bbc79293fc919c1c8edacddaf21.png)

任何帮助都是不言而喻的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:03:31.020

使用 FrameLayeout 将 Caption 放置在 imageview 上。首先取一个 Framealayout 然后取一个 imageview 和一个 textview 来放置 image 和 Caption 。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:49:27.587

您可以通过使用 ImageView 和 EditText 或 textView 创建自己的 UI(XML) 来实现这一点

# integer - 在Arduino中串行发送一个整数

> ID：13875425
> 
> 赞同：8
> 
> 时间：2012-12-14T08:59:10.627
> 
> 标签：integer, char, byte, arduino, serial-communication

我需要使用串行通信向 Arduino 发送一个整数，比如 0-10000 之间。这样做的最佳方法是什么？

我可以考虑将数字分解为一个字符数组*（例如：500 为 '5'、'0'、'0'）*并将它们作为字节流发送（是的，这很难看）。然后在另一端重建。（任何东西都是作为字节流串行发送的，对吧？）

没有更好的方法吗？不知何故，它应该能够将值分配给`int`类型变量。

*（如果可能的话，真的需要对字符串也有同样的了解）*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T01:16:21.997

如果您正在寻找的是速度，那么您可以将您的数字分成两个字节，而不是发送 ASCII 编码的 int，这是一个示例：

```
uint16_t number = 5703;               // 0001 0110 0100 0111
uint16_t mask   = B11111111;          // 0000 0000 1111 1111
uint8_t first_half   = number >> 8;   // >>>> >>>> 0001 0110
uint8_t sencond_half = number & mask; // ____ ____ 0100 0111

Serial.write(first_half);
Serial.write(sencond_half); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-27T21:12:17.217

Another way:

```
unsigned int number = 0x4142; //ASCII characters 'AB';
char *p;

p = (char*) &number;

Serial.write(p,2); 
```

will return 'BA' on the console (LSB first).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T10:00:11.053

您没有指定*from*环境，所以我认为您的麻烦在于在 Arduino 上读取串行数据？

[无论如何，如Arduino 串行参考](http://arduino.cc/en/Reference/serial)中所见，您可以使用`Serial.parseInt()`方法调用读取整数。您可以使用例如读取字符串。`Serial.readBytes(buffer, length)`但你真正的问题是知道什么时候需要一个字符串，什么时候需要一个整数（以及如果出现其他问题该怎么办，例如噪音等等......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-04T22:02:31.140

另一种方式：

```
char p[2];
*p = 0x4142; //ASCII characters 'AB'
Serial.write(p,2); 
```

我喜欢这种方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T15:51:07.910

我不是来自编码背景，今天我也在尝试同样的方法并让它工作..我只是按字节发送数字，并添加了开始和结束字节（'a'和'b'）。希望能帮助到你..`enter code here`

```
//sending end
unsigned char a,n[4],b;
int mynum=1023;// the integer i am sending
for(i=0;i<4;i++)
{
    n[i]='0'+mynum%10; // extract digit and store it as char
    mynum=mynum/10;
}

SendByteSerially(a);
_delay_ms(5);
SendByteSerially(n[3]);
_delay_ms(5);
SendByteSerially(n[2]);
_delay_ms(5);
SendByteSerially(n[1]);
_delay_ms(5);
SendByteSerially(n[0]);
_delay_ms(5);
SendByteSerially(b);
_delay_ms(100);

//at receiving end. 
while(portOne.available() > 0) 
{
    char inByte = portOne.read();
    if(inByte!='a' && inByte !='b')
    {
    Serial.print(inByte);
    }
    else if(inByte ='a')
        Serial.println();
    else if(inByte ='b')
        Serial.flush();
    }
delay(100); 
```

# ios - 如何从 UICollectionViewCell 访问 UICollectionView 中 Cell 的 indexPath

> ID：13875428
> 
> 赞同：21
> 
> 时间：2012-12-14T08:59:23.057
> 
> 标签：ios, ibaction, uicollectionview, nsindexpath, uicollectionviewcell

我想为何`UICollectionViewCell`时调用动作制作动画。
我已经做过`UICollectionViewCell`了`Interface Builder`，`UICollectionView`也。现在我想`indexPath`在我的`actionBtnAddToCard`方法中得到正确的。

这就是我现在尝试的方式（ProduktViewCell.m 中的方法）：

```
- (IBAction)actionAddToCart:(id)sender {
    XLog(@"");

    // see this line
    NSIndexPath *indexPath = ??** how can i access the correct indexPath**??;
    SortimentViewController *svc = [[SortimentViewController alloc] initWithNibName:@"SortimentViewController_iPad" bundle:[NSBundle mainBundle]];
    [svc.collectionViewProdukte cellForItemAtIndexPath:indexPath];

    [svc collectionView:svc.collectionViewProdukte didSelectItemAtIndexPath:indexPath];
} 
```

SortimentViewController 是继承 UICollectionView 的 viewController。
**如何访问正确的 indexPath？**

**更新 1：编辑帖子以便更好地理解。**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-29T12:50:32.457

```
- (IBAction)actionAddToCart:(id)sender {
   NSIndexPath *indexPath;
   indexPath = [self.collectionView indexPathForItemAtPoint:[self.collectionView convertPoint:sender.center fromView:sender.superview]]; 
   ...
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-14T09:40:11.903

如果您知道视图层次结构，这很容易。

```
UIButton *button = (UiButton *) sender; 
```

如果按钮是这样 **-> UITableViewCell -> 按钮**

然后你可以像这样得到细胞

```
UITableViewCell *cell = (UITableViewCell *)[button superview]; 
```

如果按钮是这样 **-> UITableViewCell -> 内容视图 -> 按钮**

```
UITableViewCell *cell = (UITableViewCell *)[[button superview] superview]; 
```

最后可以像这样提取索引路径

```
NSIndexPath *indexPath = [self.table_View indexPathForCell:cell]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-23T13:59:21.233

不要依赖视图。试试这个。

```
CGPoint buttonPosition = [sender convertPoint:CGPointZero toView:self.collectionView];
NSIndexPath *indexPath = [self.collectionView indexPathForItemAtPoint:buttonPosition];

NSLog(@"%ld", (long)indexPath.row); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-27T16:53:52.127

使用类似的代码`[[button superview] superview]`是脆弱的，而且不是面向未来的；实际上，除非您明确测试它，否则它甚至不能保证适用于所有 iOS 版本。为此，我总是使用迭代辅助方法：-

```
- (UIView *)superviewWithClassName:(NSString *)className fromView:(UIView *)view
{
    while (view)
    {
        if ([NSStringFromClass([view class]) isEqualToString:className])
        {
            return view;
        }
        view = view.superview;
    }
    return nil;
} 
```

然后我从按钮处理程序中调用它，如下所示： -

```
- (IBAction)buttonClicked:(id)sender
{
    UIButton *button = (UIButton *)sender;
    UICollectionViewCell *cell = (UICollectionViewCell *)
                                [self superviewWithClassName:@"UICollectionViewCell"
                                fromView:button];
    if (cell)
    {
        NSIndexPath *indexPath = [self.collectionView indexPathForCell:cell];
        // do whatever action you need with the indexPath...
    }
} 
```

更新：Swift 版本的`superviewWithClassName`. 使它成为一个类方法，因为它从不引用`self`.

```
static func superviewWithClassName(className:String, fromView view:UIView?) -> UIView? {
    guard let classType = NSClassFromString(className) else {
        return nil
    }
    var v:UIView? = view
    while (v != nil) {
        if v!.isKindOfClass(classType) {
            return v
        }
        v = v!.superview
    }
    return nil
} 
```

以及一些调用它的代码，来自`prepareForSegue`或按钮处理程序：-

```
guard let cell = UIView.superviewWithClassName("UICollectionViewCell", fromView: sender as? UIView) as? UITableViewCell else {return} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-20T22:37:32.513

**Swift**解决方案：像这样的 UICollectionView 扩展对此很有用。

```
extension UICollectionView {
    func indexPathForView(view: AnyObject) -> NSIndexPath? {
        let originInCollectioView = self.convertPoint(CGPointZero, fromView: (view as! UIView))
        return self.indexPathForItemAtPoint(originInCollectioView)
    }
} 
```

随处使用变得容易。

```
let indexPath = collectionView.indexPathForView(button) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-18T22:16:26.093

您可以这样做，indexPathsForVisibleItems 将为当前在视图中可见的项目返回 NSIndexPaths 数组，第一个对象返回第一个（如果每个视图有一个单元格）。

```
NSIndexPath *indexPath = [[svc.collectionViewProdukte indexPathsForVisibleItems] firstObject] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-14T09:10:32.430

如果要为特定单元格设置动画，则需要获取对该单元格的引用。只需调用

```
[svc.collectionViewProdukte cellForItemAtIndexPath:indexPath]; 
```

什么也没做。您需要保留该方法返回的单元格，如下所示：

```
UICollectionViewCell *cell = [svc.collectionViewProdukte cellForItemAtIndexPath:indexPath]; 
```

之后，继续制作动画：

```
[UIView animateWithDuration:0.2f animations:^{
    cell.transform = CGAffineTransformMakeScale(0.5f, 0.5f);
}]; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-22T16:59:50.113

Swift 3 解决方案：基于 Ishan Handa 的回答

```
extension UICollectionView {
func indexPathForView(view: AnyObject) -> IndexPath? {
    let originInCollectioView = self.convert(CGPoint.zero, from: (view as! UIView))
    return self.indexPathForItem(at: originInCollectioView) as IndexPath?
  }
} 
```

用法：

```
func deleteCell(sender:UIButton){
    var indexPath:IndexPath? = nil
    indexPath = self.collectionView.indexPathForView(view: sender)        
    print("index path : \(indexPath)")
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-31T18:40:52.340

```
//Note: this is for a storyboard implementation

// here is code for finding the row and section of a textfield being edited in a uicollectionview
UIView *contentView = (UIView *)[textField superview];
UICollectionViewCell *cell = (UICollectionViewCell *)[contentView superview];
cell = (UICollectionViewCell *)[contentView superview];

// determine indexpath for a specific cell in a uicollectionview
NSIndexPath *editPath = [myCollectionView indexPathForCell:cell];
int rowIndex = editPath.row;
int secIndex = editPath.section; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-25T12:13:34.300

尽管我在这里找到了很多答案。无论视图层次结构如何，这都是最短且有用的

```
- (void) actionAddToCart:(id)sender
{
    id view = [sender superview];

    while (view && [view isKindOfClass:[UICollectionViewCell class]] == NO) 
    {
        view = [view superview];
    }
    NSIndexPath *thisIndexPath = [self.collectionView indexPathForCell:view];

    NSLog(@"%d actionAddToCart pressed",thisIndexPath.row);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-07T06:13:53.960

你几乎肯定有一个 UICollectionViewCell 子类。只需添加一个属性并在 cellForItemAtIndexPath 中设置 indexPath。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-01T13:45:02.997

Xcode10。斯威夫特 4.2 版本。

```
extension UICollectionView {

  func indexPathForView(view: AnyObject) -> IndexPath? {
      guard let view = view as? UIView else { return nil }
      let senderIndexPath = self.convert(CGPoint.zero, from: view)
      return self.indexPathForItem(at: senderIndexPath)
  }

} 
```

用法：

```
// yourView can be button for example
let indexPath = collectionView.indexPathForView(view: yourView) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-24T17:40:45.880

```
 internal func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: “cell_id”, for: indexPath)

    let bttn_obj = UIButton(frame: CGRect(x: 5.5, y: 5.5, width: 22, height: 22))
    bttn_obj.addTarget(self, action: #selector(bttn_action), for: UIControl.Event.touchUpInside)
    cell.addSubview(bttn_obj)        

    return cell
}

@IBAction func bttn_action(_ sender: UIButton) -> Void {

    let cell_view = sender.superview as! UICollectionViewCell
    let index_p : IndexPath = self.collectionview.indexPath(for: cell_view)!

    print(index_p)

} 
```

# c# - 可观察的依赖属性

> ID：13875432
> 
> 赞同：2
> 
> 时间：2012-12-14T08:59:34.507
> 
> 标签：c#, wpf, system.reactive, observable, reactiveui

我是 Reactive Extension 的粉丝，尤其是 ReactiveUI 我在其他解决方案的项目中拥有 DP，而不是我的。我想将其转换为包含此 DP 的可观察类是内部的并从 DependencyObject 派生，因此我不能使用 Class.ObservableFromDP 因为类必须从 FrameworkElement 派生

我有这个解决方案

```
public static IObservable<T> ToObservable<T>(this DependencyObject dependencyObject, DependencyProperty property)
    {
        return Observable.Create<T>(o =>
                                        {
                                            var des = DependencyPropertyDescriptor.FromProperty(property,
                                                                                                dependencyObject.
                                                                                                    GetType());
                                            var eh =
                                                new EventHandler(
                                                    (s, e) => o.OnNext((T) des.GetValue(dependencyObject)));
                                            des.AddValueChanged(dependencyObject, eh);
                                            return () => des.RemoveValueChanged(dependencyObject, eh);
                                        }); 
```

但是目标类是内部的，我无法访问此类中的属性 DependencyProperty

我怎样才能从这个属性中获得 Observable

有没有什么方法

`obj.ObservableFromDP(x=>x.ActiveEditor)`处理不是从 FrameworkElement 派生的 obj？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:11:05.830

这实际上已在 >= ReactiveUI 4.0 中修复。现在你要做的就是：

```
// WhenAny now works on any object, will detect DependencyObject automatically
obj.WhenAny(x => x.ActiveEditor, x => x.Value)
   .Subscribe(/* ... */) 
```

# linux - 在 Linux 上使用 grep 压缩

> ID：13875435
> 
> 赞同：0
> 
> 时间：2012-12-14T08:59:43.993
> 
> 标签：linux, grep, zip

我在目录中有许多 txt 文件（>100）。我想压缩文件中包含某些文本的所有文件。我试过

```
for z in `grep -lr "some-string" .`
do 
  zip -g upload.zip $z; 
done 
```

但它给出了错误，因为文件名包含空格。如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T09:08:46.643

处理文件名中的空格、换行符和其他奇怪字符的最安全方法是使用`-Z`选项在文件名之间输出零字节以分隔它们。然后，您可以使用`xargs`将文件传递给`zip`.

```
grep -lrZ "some-string" . | xargs -0 zip -g upload.zip 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:00:44.337

从不写

```
for file in <command> 
```

因为它不适用于包含空格的文件名。如果您需要循环从某个命令输出的文件名列表，请这样做：

```
<command> |
while IFS= read -r file 
```

对于包含换行符的文件名，它仍然会失败，但这些文件名很少见，应该修复为不包含换行符。

所以，而不是：

```
for z in `grep -lr "some-string" .`
do 
  zip -g upload.zip $z; 
done 
```

你会写：

```
grep -lr "some-string" . |
while IFS= read -r z
do 
  zip -g upload.zip "$z"
done 
```

我还在 $z 周围添加了引号。总是引用你的 shell 变量，除非你有一个非常好的、明确的理由不和完全理解所有后果（包括在包含空格和/或通配符的文件名上失败）。

# asp.net - 通过AsyncFileUpload（ajaxToolkit）上传文件后在页面中获取文件ID

> ID：13875436
> 
> 赞同：0
> 
> 时间：2012-12-14T08:59:47.753
> 
> 标签：asp.net

我正在使用 AsyncFileUpload (ajaxToolkit) 控件从注册页面上传图像文件。上传的文件内容存储到数据库中。所以我需要在 httphander 的 asp:image 控件中显示我上传的文件，比如`<asp:image id="imgLogo" runat="server" ImageUrl="Images.aspx/id=12" />`. 那么如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:40:50.857

我已经查看了很多网站，我得到了这个问题的答案.. [http://www.mikeborozdin.com/post/AJAX-File-Upload-in-ASPNET-with-the-AsyncFileUpload-Control.aspx](http://www.mikeborozdin.com/post/AJAX-File-Upload-in-ASPNET-with-the-AsyncFileUpload-Control.aspx)

```
<ajaxToolkit:AsyncFileUpload ID="afuCompanyLogo" runat="server" 
            OnClientUploadError="uploadError" OnClientUploadComplete="uploadComplete"
            UploaderStyle="Modern" UploadingBackColor="#CCFFFF" 
            ThrobberID="myThrobber" 
        onuploadedcomplete="afuCompanyLogo_UploadedComplete" />
        <asp:Image ID="imgCompanylogo" CssClass="imgCompanylogo" runat="server" Height="80px" Width="80px" AlternateText="" />

protected void afuCompanyLogo_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
        {
            if(afuCompanyLogo.HasFile)
            {
                FileManagementEntity fileManagementEntity = new FileManagementEntity();
                FileManagement fileManagement = fileManagementEntity.Create();

                fileManagement.FileContentType = afuCompanyLogo.ContentType;
                fileManagement.FileContent = afuCompanyLogo.FileBytes;
                fileManagement.Size = afuCompanyLogo.FileBytes.Count();
                fileManagement.OriginalName = afuCompanyLogo.FileName;
                fileManagementEntity.Save(fileManagement);

                ViewState["logoID"] = fileManagement.FileManagementID;
                imgCompanylogo.ImageUrl = "Image.aspx?id=" + fileManagement.FileManagementID.ToString();
                ScriptManager.RegisterClientScriptBlock(afuCompanyLogo, afuCompanyLogo.GetType(), "img", "top.document.getElementById('" + imgCompanylogo.ClientID + "').src='Image.aspx?id=" + fileManagement.FileManagementID + "';", true);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:03:53.720

假设您将图像作为 byte[] 存储在 DB 中；

```
var data = new byte[1]; //Replace this with your values from DB
var mimeType = "application\pdf"; //Replace this with your values from DB
response.ContentType = mimeType ;
response.BinaryWrite(data); 
```

在您从数据库中检索到值后，此代码应放置在 images.aspx 中的 page_load 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:11:07.450

您的图像页面处理程序 page_load 方法将是

**图片.aspx**

```
protected void Page_Load(sender s, eventagrs e){

var imagecontent= new byte[XXXX]; // Read DB content as bytes for the passed Id

response.ContentType = 'jpeg/gif/anything' ; 
//this should be a valid MIME type saved in database
response.BinaryWrite(imagecontent);

} 
```

**编辑：**

```
From your comments you are trying to update the image tag src value 
from codebehind using Asp.Net Ajax. 

If you want to do this, first make sure your page has access to view state 
information  about those image tags. This is not a big deal, you simply 
wrap the image tags container panel/div with update panel. 

So your ajax request will send the information about those viewstate and 
push the partial update for those image container panel also. 
```

# android - 多选 GridView

> ID：13875444
> 
> 赞同：0
> 
> 时间：2012-12-14T09:00:31.917
> 
> 标签：android, android-listview, android-gridview

我想突出显示 GridView 上的选定项目，因此 GridView 的行为必须像多选 ListView。有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:44:45.307

请使用下面的代码进行多选网格视图，下面的示例从设备的图库中获取图像，可能会解决您的问题。

GridView_Activity.java:-

```
public class GridView_Activity extends Activity {
    private int count;
    private Bitmap[] thumbnails;
    private boolean[] thumbnailsselection;
    private String[] arrPath;
    private ImageAdapter imageAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final String[] columns = { MediaStore.Images.Media.DATA,
                MediaStore.Images.Media._ID };
        final String orderBy = MediaStore.Images.Media._ID;
        Cursor imagecursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,
                null, orderBy);
        int image_column_index = imagecursor
                .getColumnIndex(MediaStore.Images.Media._ID);
        this.count = imagecursor.getCount();
        this.thumbnails = new Bitmap[this.count];
        this.arrPath = new String[this.count];
        this.thumbnailsselection = new boolean[this.count];
        for (int i = 0; i < this.count; i++) {
            imagecursor.moveToPosition(i);
            int id = imagecursor.getInt(image_column_index);
            int dataColumnIndex = imagecursor
                    .getColumnIndex(MediaStore.Images.Media.DATA);
            thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
                    getApplicationContext().getContentResolver(), id,
                    MediaStore.Images.Thumbnails.MICRO_KIND, null);
            arrPath[i] = imagecursor.getString(dataColumnIndex);
        }
        GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
        imageAdapter = new ImageAdapter();
        imagegrid.setAdapter(imageAdapter);
        imagecursor.close();

        final Button selectBtn = (Button) findViewById(R.id.selectBtn);
        selectBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                final int len = thumbnailsselection.length;
                int cnt = 0;
                String selectImages = "";
                for (int i = 0; i < len; i++) {
                    if (thumbnailsselection[i]) {
                        cnt++;
                        selectImages = selectImages + arrPath[i] + "|";
                    }
                }
                if (cnt == 0) {
                    Toast.makeText(getApplicationContext(),
                            "Please select at least one image",
                            Toast.LENGTH_LONG).show();
                } else {
                    Toast.makeText(getApplicationContext(),
                            "You've selected Total " + cnt + " image(s).",
                            Toast.LENGTH_LONG).show();
                    Log.d("SelectedImages", selectImages);
                }
            }
        });
    }

    public class ImageAdapter extends BaseAdapter {
        private LayoutInflater mInflater;

        public ImageAdapter() {
            mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        public int getCount() {
            return count;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.galleryitem, null);
                holder.imageview = (ImageView) convertView
                        .findViewById(R.id.thumbImage);
                holder.checkbox = (CheckBox) convertView
                        .findViewById(R.id.itemCheckBox);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.checkbox.setId(position);
            holder.imageview.setId(position);
            holder.checkbox.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    int id = cb.getId();
                    if (thumbnailsselection[id]) {
                        cb.setChecked(false);
                        thumbnailsselection[id] = false;
                    } else {
                        cb.setChecked(true);
                        thumbnailsselection[id] = true;
                    }
                }
            });
            holder.imageview.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int id = v.getId();
                    Intent intent = new Intent();
                    intent.setAction(Intent.ACTION_VIEW);
                    intent.setDataAndType(Uri.parse("file://" + arrPath[id]),
                            "image/*");
                    startActivity(intent);
                }
            });
            holder.imageview.setImageBitmap(thumbnails[position]);
            holder.checkbox.setChecked(thumbnailsselection[position]);
            holder.id = position;
            return convertView;
        }
    }

    class ViewHolder {
        ImageView imageview;
        CheckBox checkbox;
        int id;
    }
} 
```

Main.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/selectBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:minWidth="200dip"
        android:text="@string/mBtnSelect" />

    <GridView
        android:id="@+id/PhoneImageGrid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/selectBtn"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:13:18.857

可能有多种方法可以做到这一点。您可以在 Gridview 项目布局中设置一个复选框，并在此复选框上设置一个 onclick 侦听器。现在您可以单击此复选框，您将看到该项目已被选中。

还有一种方法是在 GridView 项目布局的整个布局上设置一个 onclick 侦听器，并且可能依赖于此更改布局颜色或其他东西。

# vim - 在 Vim 中复制和关闭折叠

> ID：13875447
> 
> 赞同：4
> 
> 时间：2012-12-14T09:00:38.240
> 
> 标签：vim, folding

尽管使用 Vim 已有十年，但有时我仍然为折叠而苦恼。在 Vim 7.3 中没有 .vimrc 的情况下，这个问题中的所有内容都是可重现的。我将 foldmethod=marker 与默认折叠标记一起使用。

考虑以下嵌套折叠结构（使用 foldmethod=marker 和默认标记）。第一列是行号（fold0 的缩进为零）。

```
 1|{{{ fold0
 2|    {{{ fold1
 3|        {{{ fold2
 4|        }}}
 5|    }}}
 6|}}} 
```

假设`fold1`和`fold2`都关闭并且光标位于第 2 行。我可以使用 拉出并放置关闭的折叠`yyp`，但新插入的折叠都是打开的。

我想要的是关闭“放置”命令产生的折叠。或者，是否有一种方便的方法可以在“放置”之后关闭它们？也就是说，从这个位置（光标在第 6 行）：

```
 1|{{{ fold0
 2|+---  4 lines: fold1----------------------------------------
 6|    {{{ fold3
 7|        {{{ fold4
 8|        }}}
 9|    }}}
10|}}} 
```

我可以`zc`用来关闭 fold3，但 fold 4 在`zo`. 如果改为使用`zC`，它会关闭 fold3 并折叠 0，但当我这样做时，折叠 4 仍然打开`2zo`。这不是我期望递归折叠关闭的工作方式。有没有办法实现`zc`但也递归地关闭所有包含的折叠？

我工作的公司指定折叠是通过匹配对来定义的，而没有明确的折叠级别，因此涉及显式折叠级别的解决方案是没有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:28:44.423

以下序列（在您的 之后`y``y``p`）似乎可以满足您的要求：

`v``%`- 直观地从`{`光标下选择到相应的`}`

`z``C`- 递归关闭光标下的所有折叠（不幸的是，这包括您想要保持打开的外部折叠）

`z``v`- 打开足够的折叠以显示光标线

`z``c`- 关闭新材料的单个外折叠

当然，您希望将其映射到 vimrc 中的其他一些组合键。

# c# - 使用 TCP 客户端建立连接时出错

> ID：13875448
> 
> 赞同：0
> 
> 时间：2012-12-14T09:00:37.953
> 
> 标签：c#, sockets, c#-4.0, tcpclient, socketexception

我正在尝试使用 C# 与网络中的远程系统建立连接。然后程序抛出以下异常

> 无法建立连接，因为目标机器主动拒绝它 192.168.1.42:8000

```
private void Start_Sending_Video_Conference(string remote_IP,int port_number)
{
    try
    {
        ms = new MemoryStream();// Store it in Binary Array as 
        pictureBox1.Image.Save(ms,System.Drawing.Imaging.ImageFormat.Jpeg);
        byte[] arrImage = ms.GetBuffer();
        myclient = new TcpClient (remote_IP,port_number);//Connecting with server
        myns = myclient.GetStream ();
        mysw = new BinaryWriter (myns);
        mysw.Write(arrImage);//send the stream to above address
        ms.Flush();
        mysw.Flush();
        myns.Flush();
        ms.Close();
        mysw.Close ();
        myns.Close ();
        myclient.Close ();
    }
    catch (Exception ex)
    {
        Capturing.Enabled = false;
        MessageBox.Show(ex.Message, "Video Conference Error Message", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:48:50.783

请检查通常的嫌疑人：

1.  服务器应用程序是否真的在运行
2.  它真的在端口 8000 上监听吗？
3.  客户端计算机上的防火墙是否允许端口 8000 上的传出流量？
4.  服务器计算机上的防火墙是否允许端口 8000 上的传入流量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T18:27:16.143

如果上述解决方案不起作用，那么问题可能出在服务器代码中。您可能已经使用了 TcpListener 的实例来监听指定的端口，但是您将哪个 IpAddress 传递给了构造函数？如果你写了以下代码：

```
mylistener = new TcpListener(IPAddress.Loopback, 8000); 
```

这将导致该错误。发生这种情况是因为 Loopback 不会让侦听器侦听所有网络接口，而只会侦听来自 localhost (127.0.0.1) 的请求。

请改用此代码

```
mylistener = new TcpListener(IPAddress.Any, 8000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:05:03.583

你确定有东西在另一端听吗？在这种情况下，您的本地服务器似乎实际上拒绝了该请求。请确认服务器正在运行，TCPServer 正在侦听，并且服务器正在运行的机器（如果它在本地，这应该不是问题）设置为允许来自 LAN 的传入数据包。

# java - 在 Java 中读取 Unicode 字符

> ID：13875453
> 
> 赞同：0
> 
> 时间：2012-12-14T09:00:59.567
> 
> 标签：java

我正在使用“FileInputStream”和“FileReader”从包含 unicode 字符的文件中读取数据。

当我将默认编码设置为“cp-1252”时，两者都在读取垃圾数据，当我将默认编码设置为 UTF-8 时，两者都读取正常。

1.  这两个都使用系统默认编码来读取数据是真的吗？
2.  那么如果它依赖于系统编码，那么使用字符流的好处是什么。
3.  除了：

    ```
     BufferedReader fis = new BufferedReader(new InputStreamReader(new FileInputStream("some unicode file"),"UTF-8")); 
    ```

    在默认编码不是 UTF-8 时正确读取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:07:03.470

恕我直言，不推荐使用 FileReader 和 FileWriter。利用

```
new InputStreamReader(new FileInputStream(file), "UTF-8") 
```

或者。

这里还存在一个没有编码参数的重载版本，使用默认平台编码：`System.getProperty("file.encoding")`。

# knockout.js - 如何清除淘汰赛中的可观察属性？

> ID：13875454
> 
> 赞同：2
> 
> 时间：2012-12-14T09:01:01.097
> 
> 标签：knockout.js, knockout-mapping-plugin

我有 javascript 代码块和 html 如下所示。模型对象是通用的。它是在运行时定义的。

它可以是这样的。

```
var model = { "xId": ko.observable(0), "xName": ko.observable(null), "Type": ko.observable("x") };
   /* var model = { "yId": ko.observable(0), "yName": ko.observable(null), "Type": ko.observable("y") };
    var model = { "zId": ko.observable(0), "zName": ko.observable(null), "Type": ko.observable("z") };  */

    var vm = function (data) {
        ko.mapping.fromJS(data, {}, this);
    };

    var vm2 = function () {
        var self = this;
        self.New = ko.observable(null);
        self.NewItem = function () {
            console.log(model);
            self.New(new vm(model));
        };
    };

    var viewModel = new vm2();
    ko.applyBindings(viewModel);

    vm.prototype.Save = function () {
        viewModel.New(null);
        /*In here all of inputs must be cleared but How to :)*/
    }; 
```

第一个模型的 newForm。

```
<input type="button" data-bind="click: NewItem" value="Add" />
<div data-bind="with:New" id="newForm">
    <input type="text" data-bind="value:xId" />
    <input type="text" data-bind="value:xName" />
    <input type="text" data-bind="value:Type" />
    <input type="button" data-bind="click: Save" value="Save" />
</div> 
```

我单击添加按钮，然后将某些内容输入到输入中，然后单击保存按钮。newForm 是不可见的。到目前为止一切正常。但是我再次点击添加按钮，我已经写好的值还在输入中。保存后我无法清除 newForm。

编辑：

```
public class Test{
    public int TestId {get; set;}
    public int TestName {get; set;}
}

public class Test2{
    public int Test2Id {get; set;}
    public int Test2Name {get; set;}
} 
```

实体类的数量不清楚。

我的实体类已转换为 json。该模型是由 .net 像这样创建的。我的项目有一个母版页和子页。对于测试页：

```
var model = <%=ViewModelCreator.Create<Test>() %>; 
```

对于 test2 页面：

```
var model = <%=ViewModelCreator.Create<Test2>() %>; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T09:07:22.870

编辑：您的视图模型有点奇怪，因为内部模型是对相同可观察对象的静态引用，映射插件将在找到旧可观察对象时重用它们。你为什么还要像这样映射到静态定义的可观察对象集合，为什么不直接显式声明你的视图模型？

**旧答案** 可以吗？

```
for(var index in vm) {
   if(ko.isObservable(vm[index])) {
      vm[index](null);
   }
} 
```

编辑：您还可以创建一个可清除的特殊 observable

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T08:06:11.143

您必须清除观测值，例如：

```
self.propertyName(''); 
```

例子：

```
self.XID(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:13:54.230

您的代码有一些设计问题。`model`object 已经包含 observables，所以你不需要使用映射插件来转换它们。我建议按如下方式更新您的代码：

```
function vm(){
    var self = this;

    self.xId = ko.observable(0);
    self.xName = ko.observable(null);
    self.Type = ko.observable("x");    
}

var vm2 = function() {
    var self = this;
    self.New = ko.observable(null);
    self.NewItem = function() {
        self.New(new vm());
    };
};

var viewModel = new vm2();
ko.applyBindings(viewModel);

vm.prototype.Save = function() {
    viewModel.New(null);
}; 
```

这是工作小提琴：http: [//jsfiddle.net/3uhN7/](http://jsfiddle.net/3uhN7/)

# asp.net-mvc-4 - 查看下的MVC4额外文件夹

> ID：13875456
> 
> 赞同：0
> 
> 时间：2012-12-14T09:01:38.147
> 
> 标签：asp.net-mvc-4, views, directory, routes, viewengine

我目前将 MVC 实施到一个相当大的项目中，并希望将视图分类。MVC 似乎不理解这一点，我在寻找干净的解决方案时遇到了问题。基本上我希望通过路线解决这个问题，但它不起作用。

我在项目中的文件夹结构是这样的：

```
- Controller
  - SLResources
    - FAQController.cs 
```

...

```
- View
  - SLResources
    - FAQ
      - (cshtml files in here) 
```

我还尝试在控制器文件夹结构中的 - SLResources 之后添加 - FAQ 文件夹。

然后我做了以下路由，但没有运气：

```
RouteTable.Routes.MapRoute(
   name: "FAQ",
   url: "SLResources/FAQ/{action}/{id}",
   defaults: new { controller = "FAQ", action = "Index", id = UrlParameter.Optional }
); 
```

基本上我想通过使用这个网址来访问常见问题解答：[http ://www.xxxxxxxx.com/SLResources/FAQ/](http://www.xxxxxxxx.com/SLResources/FAQ/)

是创建重定向到正确视图的虚拟类还是自定义 ViewEngine 的唯一解决方案？

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:08:34.473

如果您的目标是让 url 带有`SLResources/FAQ`，那么您不需要在 Views 中创建单独的文件夹。

您的路线已经为您做到了。保持您的路线不变，并将您的 cshtml 文件放在“Views>FAQ”文件夹中，它会起作用。

# winforms - Windows 窗体 IsClosing 标志？

> ID：13875462
> 
> 赞同：0
> 
> 时间：2012-12-14T09:01:47.817
> 
> 标签：winforms

有没有办法知道 Windows 窗体是否正在关闭？

我必须从另一个类中知道对 windows 窗体的引用。就像是：

如果 WinForm.IsClosing 则 ....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:03:41.007

如何使用事件[Form.FormClosing Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

> FormClosing 事件在窗体被关闭时发生。当表单关闭时，它会被释放，释放与表单相关的所有资源。如果您取消此事件，表单将保持打开状态。要取消关闭窗体，请将传递给事件处理程序的 FormClosingEventArgs 的 Cancel 属性设置为 true。

# visual-c++ - 最新 ATL 版本

> ID：13875463
> 
> 赞同：3
> 
> 时间：2012-12-14T09:01:53.343
> 
> 标签：visual-c++, atl

我找不到与 Visual Studio 2012 一起分发的当前活动模板库 (ATL) 的确切数量。有人知道确切的版本号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:05:46.687

来自`atldef.h`：

```
/////////////////////////////////////////////////////////////////////////////
// Master version numbers

#define _ATL     1      // Active Template Library
#define _ATL_VER 0x0A00 // Active Template Library version 10.00

#ifndef _ATL_FILENAME_VER
#define _ATL_FILENAME_VER "100"
#endif

#ifndef _ATL_FILENAME_VER_NUM
#define _ATL_FILENAME_VER_NUM 100
#endif

#ifndef _ATL_VER_RBLD
#define _ATL_VER_RBLD "10.00"
#endif 
```

# javascript - 什么是 AngularJS 指令？

> ID：13875466
> 
> 赞同：184
> 
> 时间：2012-12-14T09:02:11.470
> 
> 标签：javascript, angularjs, angular-directive

我花了很多时间阅读 AngularJS 文档和一些教程，我对文档的难以接近程度感到非常惊讶。

我有一个简单的、可回答的问题，可能对其他想要学习 AngularJS 的人也有用：

**什么是 AngularJS 指令？**

在某个地方应该有一个简单、精确的指令定义，但是[AngularJS 网站](https://angularjs.org/#create-components)提供了这些令人惊讶的无用定义：

[在主页上](https://angularjs.org/#create-components)：

> 指令是 AngularJS 中一个独特而强大的功能。指令让您发明新的 HTML 语法，特定于您的应用程序。

在[开发者文档](http://docs.angularjs.org/guide/directive)中：

> 指令是一种教授 HTML 新技巧的方法。在 DOM 编译期间，指令与 HTML 匹配并执行。这允许指令注册行为，或转换 DOM。

还有[一系列](http://blog.angularjs.org/2012/11/about-those-directives.html)关于指令的讨论，具有讽刺意味的是，它们似乎假设观众已经理解它们是什么。

为了清晰的参考，任何人都可以提供一个指令的精确定义，它解释了：

1.  [它是什么（以 jQuery](http://jquery.com/)的明确定义为例）
2.  它旨在解决哪些实际问题和情况
3.  它体现了什么样的设计模式，或者说，它如何适应 AngularJS 的 MVC/ [MVW](https://plus.google.com/104744871076396904202/posts/DRUAkZmXjNV)使命。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-12-16T02:23:30.177

> 它是什么（以 jQuery 的明确定义为例）？

指令本质上是一个函数^†，当 Angular 编译器在 DOM 中找到它时执行。函数几乎可以做任何事情，这就是为什么我认为定义指令是相当困难的原因。每个指令都有一个名称（如 ng-repeat、tabs、make-up-your-own），每个指令确定它可以在哪里使用：元素、属性、类、在注释中。

^†指令通常只有（后）链接功能。一个复杂的指令可能有一个编译函数、一个预链接函数和一个后链接函数。

> 它打算解决哪些实际问题和情况？

指令可以做的最强大的事情是扩展 HTML。您的扩展是用于构建应用程序的[领域特定语言(DSL)。](http://en.wikipedia.org/wiki/Domain-specific_language)例如，如果您的应用程序运行在线购物站点，您可以扩展 HTML 以具有“购物车”、“优惠券”、“特价商品”等指令——在“在线购物”域，而不是“div”和“span”（正如@WTK 已经提到的）。

指令还可以将 HTML 组件化——将一堆 HTML 组合成一些可重用的组件。如果您发现自己使用 ng-include 来提取大量 HTML，那么可能是时候重构为指令了。

> 它体现了什么样的设计模式，或者，它如何适应 angularjs 所谓的 MVC/MVW 使命

指令是您操作 DOM 和捕获 DOM 事件的地方。这就是指令的编译和链接函数都接收“元素”作为参数的原因。你可以

*   定义一堆 HTML（即一个模板）来替换指令
*   将事件绑定到此元素（或其子元素）
*   添加/删除一个类
*   更改 text() 值
*   监视同一元素中定义的属性的更改（实际上是监视属性的值——这些是范围属性，因此指令监视“模型”的更改）
*   等等

* * *

在 HTML 中，我们有诸如`<a href="...">`, `<img src="...">`, `<br>`,之类的东西`<table><tr><th>`。您如何描述 a、href、img、src、br、table、tr 和 th 是什么？这就是指令。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-10T07:16:44.543

也许角度指令的一个非常**简单和初始**的定义是

> AngularJS 指令（ng-directives）是带有 ng 前缀（ng-model、ng-app、ng-repeat、ng-bind）的 HTML 属性，Angular 使用它来扩展 HTML。（[来自：W3schools 角度教程](http://www.w3schools.com/angular/angular_intro.asp)）

这方面的一些例子是

> **ng-app**指令定义了一个 AngularJS 应用程序。
> 
> **ng-model**指令将HTML 控件（输入、选择、文本区域）的值绑定到应用程序数据。
> 
> **ng-bind**指令将应用程序数据绑定到 HTML 视图。

```
<div ng-app="">
    <p>Name: <input type="text" ng-model="name"></p>
    <p ng-bind="name"></p>
</div> 
```

查看本教程，至少对我而言，这是对 Angular 的最佳介绍之一。更完整的方法将是@mark-rajcok 之前所说的一切。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T09:08:24.653

查看文档，指令是您可以编写 angularjs 解析以创建对象和行为的结构。换句话说，它是一个模板，您可以在其中混合使用任意节点和伪 javascript 以及数据占位符来表达意图您的小部件（组件）是结构化的，它的行为方式以及它如何提供数据。然后 Angularjs 针对这些*指令*运行以将它们转换为工作的 html/javascript 代码。

指令在那里，因此您可以使用适当的语义构建更复杂的组件（小部件）。只需看一下指令的 angularjs 示例 - 他们正在定义选项卡窗格（这在常规 HTML 中当然无效）。它比使用类似 div-s 或 spans 来创建结构更直观，然后将其设置为*看起来像*选项卡窗格。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-14T06:48:33.090

在 AngularJS 中，指令是 HTML DOM 元素的 html re 标记，例如属性（restrict-A）、元素名称（restrict-E）、注释（restrict-M）或 CSS 类（restrict-C），它们告诉 AngularJS 的 HTML 编译器（$ compile) 以对该 DOM 元素执行指定的行为，甚至转换 DOM 元素及其子元素。一些示例是 ng-bind 、ng-hide/show 等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-14T09:13:15.393

主页对此非常清楚：当您将鼠标悬停在最后一部分的选项卡上时：

> 我们使用自定义`tabs` 元素扩展了 HTML 的词汇。`tabs`抽象了呈现选项卡所需的复杂 HTML 结构和行为。结果是一个更易读的视图和非常容易重用的语法。”

然后在下一个选项卡中：

```
angular.module('components', []).
  directive('tabs', function() {
    return {
      restrict: 'E',
      transclude: true,
      scope: {},
      controller: function($scope, $element) {
        var panes = $scope.panes = [];

        $scope.select = function(pane) {
          angular.forEach(panes, function(pane) {
            pane.selected = false;
          });
          pane.selected = true;
        } 
```

因此，您可以发明 html 元素`tabs`，即让 Angular 处理这些元素的渲染。

# .net - windbg 和 SciTech 分析器：无法为 x64 内存转储加载数据访问 DLL

> ID：13875467
> 
> 赞同：2
> 
> 时间：2012-12-14T09:02:27.570
> 
> 标签：.net, windbg, memory-profiling

我知道这已经被问过很多次了，但是我已经阅读了所有这些并且无法解决问题。

基本上，我有一个在 Azure 中作为 Web 角色运行的 IIS 7.0 x64 w3wp.exe 进程的内存转储。我有多个转储，无法在 windbg 或 SciTech .Net Memory Profiler 中加载其中任何一个。对于两者来说，问题似乎都在于找到正确的 mscordacwks.dll。

我已经从机器上获得了 x64 和 x86 mscordacwks.dll，这无法加载它们中的任何一个。

因此，当我想在 windbg 中查看托管线程等时，我会遇到熟悉的错误：

```
0:000> !threads
The version of SOS does not match the version of CLR you are debugging.  Please
load the matching version of SOS for the version of CLR you are debugging.
CLR Version: 4.0.30319.551
SOS Version: 4.0.30319.17929
CLRDLL: Unable to get version info for 'D:\Windows\Microsoft.NET\Framework64\v4.0.30319\mscordacwks.dll', Win32 error 0n87
DBGHELP: C:\Program Files\Debugging Tools for Windows (x64)\sym\mscordacwks_AMD64_AMD64_4.0.30319.551.dll\4F191DB4964000\mscordacwks_AMD64_AMD64_4.0.30319.551.dll - OK
CLRDLL: Loaded DLL C:\Program Files\Debugging Tools for Windows (x64)\sym\mscordacwks_AMD64_AMD64_4.0.30319.551.dll\4F191DB4964000\mscordacwks_AMD64_AMD64_4.0.30319.551.dll
Failed to load data access DLL, 0x80004005
Verify that 1) you have a recent build of the debugger (6.2.14 or newer)
            2) the file mscordacwks.dll that matches your version of clr.dll is 
                in the version directory or on the symbol path
            3) or, if you are debugging a dump file, verify that the file 
                mscordacwks_<arch>_<arch>_<version>.dll is on your symbol path.
            4) you are debugging on supported cross platform architecture as 
                the dump file. For example, an ARM dump file must be debugged
                on an X86 or an ARM machine; an AMD64 dump file must be
                debugged on an AMD64 machine. 
```

所以我在这里看到了两个奇怪的地方：

1.  Windows 部署在 Azure 上的 D:\ 驱动器上（这会导致问题吗？）
2.  CLR 版本：4.0.30319。**551**但 SOS 版本：4.0.30319。**17929**

那么它可能是**17929**的 SOS 版本吗？服务器上的 mscordacwks.dll 肯定是**551**。

在没有解决问题的情况下，我已经运行了你能想象到的每一个命令行。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:29:42.453

从技术上讲，始终要求使用与您正在调试的运行时相同版本的 SOS。但是，您通常可以通过匹配前三个版本的位置来解决问题。不过，在这个转储中，它是 .NET 4.0，但您的 SOS 版本是 4.5。这永远不会奏效，因为底层调试 API 在 .NET 4.5 中已完全改变。因此，您需要获取正确版本的 SOS.dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:32:49.370

Microsoft 的 PSSCOR4.dll 是 SOS.dll 的超集，适用于 .NET 4.5 之前的所有 .NET 4 框架版本。感谢 Steve Johnson 澄清它不适用于 .NET 4.5。

psscor4.dll 可以从[这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=21255)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:14:02.620

好的，我为同一个盒子抓取了 SOS.dll 并修复了它。所以这是没有人在帖子的任何地方**告诉你的。**

# 您需要生成转储的机器上的 SOS.dll 和 mscordacwks.dll - 而不仅仅是 mscordacwks.dll。

# ios - 如何设置动画以弹出推送的 UIViewController

> ID：13875477
> 
> 赞同：4
> 
> 时间：2012-12-14T09:03:06.410
> 
> 标签：ios, xcode, viewcontroller

我有一个小问题。我有一个 pushviewcontroller，它使用动画。我的代码是这样的：

```
 [UIView  beginAnimations: @"Showinfo"context: nil];
   [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
   [UIView setAnimationDuration:0.75];
   [self.navigationController pushViewController:dtv  animated:YES];
   [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
   [UIView commitAnimations];` 
```

它工作得很好，但是当`view`被推动并且我回去时，这不会做动画。所以我不知道当我回去时如何做同样的动画。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:47:27.990

作为替代方案，您也可以使用它，

```
CATransition* transition = [CATransition animation];
transition.duration = 0.5;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
//transition.subtype = kCATransitionFromTop; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom
[self.navigationController.view.layer addAnimation:transition forKey:nil];
[[self navigationController] popViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:40:47.393

这就是我一直设法完成这项任务的方式。

对于推送：

```
[UIView  beginAnimations: @"Showinfo"context: nil];
   [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
   [UIView setAnimationDuration:0.75];
   [self.navigationController pushViewController:dtv  animated:YES];
   [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
   [UIView commitAnimations];` 
```

对于流行音乐：

[

```
UIView  beginAnimations: @"Showinfo"context: nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelay:0.375];
[self.navigationController popViewControllerAnimated:NO];
[UIView commitAnimations]; 
```

我仍然从中得到很多反馈，所以我将继续更新它以使用动画块，这是 Apple 推荐的动画制作方式。

对于推送：

```
MainView *nextView = [[MainView alloc] init];
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [super pushViewController:nextView animated:NO];
                             [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
                         }]; 
```

对于流行音乐：

```
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [UIView setAnimationTransition:transition forView:self.navigationController.view cache:NO];
                         }];
[self.navigationController popViewControllerAnimated:NO]; 
```

# coldfusion - 强制coldfusion 8重新加载组件缓存？

> ID：13875479
> 
> 赞同：1
> 
> 时间：2012-12-14T09:03:17.010
> 
> 标签：coldfusion, coldfusion-8

ColdFusion 8 正在缓存我的 cfcs。发展处于停滞状态。我无权访问管理面板。我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:18:18.847

### 1) 访问 CF 管理员。

真的。我不想托管任何我无法控制的地方。

### 2) 以编程方式清除缓存。

使用管理 API：

```
createObject("component","cfide.adminapi.runtime").clearTrustedCache() 
```

当然，如果您无权访问 CFAdmin，您可能也无权访问它，但值得一试。

根据[Ray Camden 的这篇博客文章，](http://www.raymondcamden.com/index.cfm/2007/6/7/ColdFusion-8-Admin-API-and-Trusted-Cache)在运行上述命令之前，您需要通过 API 登录到管理员，这当然表明如果没有访问权限，它就无法工作。

```
<cfset API = createObject("component","cfide.adminapi.runtime") />
<cfset API.login(adminPassword="password") />
<cfset API.clearTrustedCache() /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:25:32.043

我使用 application.cfc 清除所有 cfc 缓存。

```
 <!--- *****************************************************************
      Run before the request is processed
      ************************************************************--->      
<cffunction name="onRequestStart" returnType="boolean" output="false">
    <cfargument name="thePage" type="string" required="true">
    <cfscript>
        if (structKeyExists(url,'reinit')) {
            structClear(application);
            structClear(session);
            onApplicationStart();
            onSessionStart();
        }
    </cfscript>
    <cfreturn true>
</cffunction> 
```

这个想法是传递一个名为“reinit”的 url 变量。只要在 URL 中定义此变量，就会启动应用程序。

为了测试这一点： 1\. 对 cfc 进行更改 2\. 通过 xxx.cfm?reinit=1 调用 cfm 页面 3\. 观察 cfc 中的更改是否得到反映。

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T00:05:57.600

I know that this post is old, but I needed to do this for a (more) modern version of ColdFusion (2016) and the answer from Peter wouldn't work on CF 2016\. Not looking to be the answer, just a footnote for newer versions of CF.

Here is a version that will work with CF 2016:

```
<cfscript>
    variables['adminPW'] = "my cf admin password";

    cfAdminAPIAdmin = createObject("component", "cfide.adminapi.administrator");
    cfAdminAPIAdmin.login(variables.adminPW);

    cfAdminAPIRuntime = createObject("component", "cfide.adminapi.runtime");

    // clear the component and trusted (template) caches
    cfAdminAPIRuntime.clearComponentCache();
    cfAdminAPIRuntime.clearTrustedCache();
</cfscript> 
```

Adobe appears to have separated the CF admin functionality from the runtime component. That's really the only difference. The version above shows how to clear the component cache too.

NOTE: I had been doing something very similar to CFNinja's answer, but one site (out of about 25 similar sites) just wouldn't clear the application scope components, the old version remained in a cache somehow.

# ruby-on-rails - 与我的生产服务器上的 ruby 和 nginx 冲突？

> ID：13875482
> 
> 赞同：2
> 
> 时间：2012-12-14T09:03:29.460
> 
> 标签：ruby-on-rails, ruby, nginx, production-environment

我的生产服务器上有一个奇怪的问题。有Ubuntu服务器，上面安装了nginx+phusion客。我用 rvm 管理我的 ruby​​ 版本，它是 ruby​​ 1.9.3-p327 和 rails 3.2.9。

有时，由于`rake asset:precompile`任务失败，无法部署我的应用程序。当我尝试直接在我的服务器上执行此操作时，我遇到了同样的问题。我跑步时的相同痕迹`bundle exec rails c production`

这是跟踪的一部分（结束）（对不起，我没有完整的跟踪，因为它太长了）：

```
3.2.0/lib/paperclip.rb
 966 /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/ancestry-1.3.0/lib/ancestry/class_methods.rb
 967 /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/ancestry-1.3.0/lib/ancestry/instance_methods.rb
 968 /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/ancestry-1.3.0/lib/ancestry/exceptions.rb

 * Process memory map:

 00400000-00401000 r-xp 00000000 09:02 50595451                           /home/deploy/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
 00600000-00601000 r--p 00000000 09:02 50595451                           /home/deploy/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
 00601000-00602000 rw-p 00001000 09:02 50595451                           /home/deploy/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
 00602000-037a4000 rw-p 00000000 00:00 0                                  [heap]
 7f19e615d000-7f19e615e000 rw-p 00000000 00:00 0
 7f19e615e000-7f19e6188000 r-xp 00000000 09:02 50594719                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/socket.so
 7f19e6188000-7f19e6387000 ---p 0002a000 09:02 50594719                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/socket.so
 7f19e6387000-7f19e6388000 r--p 00029000 09:02 50594719                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/socket.so
 7f19e6388000-7f19e6389000 rw-p 0002a000 09:02 50594719                   /home/deploy/.rvm/rubies/ruby-1.
 9.3-p286/lib/ruby/1.9.1/x86_64-linux/socket.so
 7f19e6389000-7f19e638e000 r-xp 00000000 09:02 50594729                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
 7f19e638e000-7f19e658d000 ---p 00005000 09:02 50594729                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
 7f19e658d000-7f19e658e000 r--p 00004000 09:02 50594729                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/li
 b/ruby/1.9.1/x86_64-linux/racc/cparse.so
 7f19e658e000-7f19e658f000 rw-p 00005000 09:02 50594729                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
 7f19e658f000-7f19e6590000 r-xp 00000000 09:02 50594733                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
 7f19e6590000-7f19e678f000 ---p 00001000 09:02 50594733                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
 7f19e678f000-7f19e6790000 r--p 00000000 09:02 50594733                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
 7f19e6790000-7f19e6791000 rw-p 00001000 09:02 50594733                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
 7f19e6791000-7f19e67d1000 rw-p 00000000 00:00 0
 7f19e67d1000-7f19e67d2000 ---p 00000000 00:00 0

 7f1a0b2e9000-7f1a0b2ea000 r--p 00014000 09:01 132081                     /lib/x86_64-linux-gnu/libgcc_s.so.1
 7f1a0b2ea000-7f1a0b2eb000 rw-p 00015000 09:01 132081                     /lib/x86_64-linux-gnu/libgcc_s.so.1
 7f1a0b2eb000-7f1a0b3cd000 r-xp 00000000 09:01 399334                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
 7f1a0b3cd000-7f1a0b5cc000 ---p 000e2000 09:01 399334                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
 7f1a0b5cc000-7f1a0b5d4000 r--p 000e1000 09:01 399334                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
 7f1a0b5d4000-7f1a0b5d6000 rw-p 000e9000 09:01 399334                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
 7f1a0b5d6000-7f1a0b5eb000 rw-p 00000000 00:00 0
 7f1a0b5eb000-7f1a0b988000 r-xp 00000000 09:02 50987342                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/therubyracer-0.10.2/ext/v8/v8.so
 7f1a0b988000-7f1a0bb88000 ---p 0039d000 09:02 50987342                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/therubyracer-0.10.2/ext/v8/v8.so
 7f1a0bb88000-7f1a0bbab000 r--p 0039d000 09:02 50987342                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/therubyracer-0.10.2/ext/v8/v8.so
 7f1a0bbab000-7f1a0bbaf000 rw-p 003c0000 09:02 50987342                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/therubyracer-0.10.2/ext/v8/v8.so
 7f1a0bbaf000-7f1a0bbb2000 rw-p 00000000 00:00 0
 7f1a0bbb2000-7f1a0bc50000 r-xp 00000000 09:01 398982                     /usr/lib/x86_64-
 7f1a0be9a000-7f1a0c09a000 ---p 00045000 09:01 399309                     /usr/lib/x86_64-linux-gnu/libhx509.so.5.0.0
 7f1a0c09a000-7f1a0c09c000 r--p 00045000 09:01 399309                     /usr/lib/x86_64-linux-gnu/libhx509.so.5.0.0
 7f1a0c09c000-7f1a0c09e000 rw-p 00047000 09:01 399309                     /usr/lib/x86_64-linux-gnu/libhx509.so.5.0.0
 7f1a0c09e000-7f1a0c09f000 rw-p 00000000 00:00 0
 7f1a0c4d6000-7f1a0c4d7000 rw-p 00028000 09:01 399337                     /usr/lib/x86_64-linux-gnu/libwind.so.0.0.0
 7f1a0c4d7000-7f1a0c4da000 r-xp 00000000 09:01 132084                     /lib/x86_64-linux-gnu/libgpg-error.so.0.8.0
 7f1a0c4da000-7f1a0c6d9000 ---p 00003000 09:01 132084                     /lib/x86_64-linux-gnu/libgpg-error.so.0.8.0
 7f1a0c6d9000-7f1a0c6da000 r--p 00002000 09:01 132084                     /lib/x86_64-linux-gnu/libgpg-error.so.0.8.0
 7f1a0c6da000-7f1a0c6db000 rw-p 00003000 09:01 132084                     /lib/x86_64-linux-gnu/libgpg-error.so.0.8.0
 7f1a0c6db000-7f1a0c6ec000 r-xp 00000000 09:01 399321                     /usr/lib/x86_64-linux-gnu/libp11-kit.so.0.0.0
 7f1a0c6ec000-7f1a0c8eb000 ---p 00011000 09:01 399321                     /usr/lib/x86_64-linux-gnu/libp11-kit.so.0.0.0
 7f1a0c8eb000-7f1a0c8ec000 r--p 00010000 09:01 399321                     /usr/lib/x86_64-linux-gnu/libp11-kit.so.0.0.0
 7f1a0c8ec000-7f1a0c8ed000 rw-p 00011000 09:01 399321                     /usr/lib/x86_64-linux-gnu/libp11-kit.so.0.0.0
 7f1a0c8ed000-7f1a0c8fd000 r-xp 00000000 09:01 403677                     /usr/lib/x86_64-linux-gnu/libtasn1.so.3.1.12
 7f1a0c8fd000-7f1a0cafc000 ---p 00010000 09:01 403677                     /usr/lib/x86_64-linux-gnu/libtasn1.so.3.1.12
 7f1a0cafc000-7f1a0cafd000 r--p 0000f000 09:01 403677                     /usr/lib/x86_64-linux-gnu/libtasn1.so.3.1.12
 7f1a0cafd000-7f1a0cafe000 rw-p 00010000 09:01 403677                     /usr/lib/x86_64-linux-gnu/libtasn1.so.3.1.12
 7f1a0cafe000-7f1a0cb12000 r-xp 00000000 09:01 399329                     /usr/lib/x86_64-linux-gnu/libroken.so.18.1.0
 7f1a0cb12000-7f1a0cd11000 ---p 00014000 09:01 399329                     /usr/lib/x86_64-linux-gnu/libroken.so.18.1.0
 7f1a0cd11000-7f1a0cd12000 r--p 00013000 09:01 399329                     /usr/lib/x86_64-linux-gnu/libroken.so.18.1.0
 7f1a0cf45000-7f1a0cf46000 rw-p 00032000 09:01 399306                     /usr/lib/x86_64-linux-gnu/libhcrypto.so.4.1.0
 7f1a0cf46000-7f1a0cf47000 rw-p 00000000 00:00 0
 7f1a0cf47000-7f1a0cfe2000 r-xp 00000000 09:01 399279                     /usr/lib/x86_64-linux-gnu/libasn1.so.8.0.0
 7f1a0cfe2000-7f1a0d1e1000 ---p 0009b000 09:01 399279                     /usr/lib/x86_64-linux-gnu/libasn1.so.8.0.0
 7f1a0d1e1000-7f1a0d1e3000 r--p 0009a000 09:01 399279                     /usr/lib/x86_64-linux-gnu/libasn1.so.8.0.0
 7f1a0d1e3000-7f1a0d1e7000 rw-p 0009c000 09:01 399279                     /usr/lib/x86_64-linux-gnu/libasn1.so.8.0.0
 7f1a0d1e7000-7f1a0d267000 r-xp 00000000 09:01 399312                     /usr/lib/x86_64-linux-gnu/libkrb5.so.26.0.0
 7f1a0d267000-7f1a0d467000 ---p 00080000 09:01 399312                     /usr/lib/x86_64-linux-gnu/libkrb5.so.26.0.0
 7f1a0d467000-7f1a0d469000 r--p 00080000 09:01 399312                     /usr/lib/x86_64-linux-gnu/lib
 krb5.so.26.0.0
 7f1a0d469000-7f1a0d46d000 rw-p 00082000 09:01 399312                     /usr/lib/x86_64-linux-gnu/libkrb5.so.26.0.0
 7f1a0d46d000-7f1a0d473000 r-xp 00000000 09:01 399308                     /usr/lib/x86_64-linux-gnu/libheimntlm.so.0.1.0
 7f1a0d473000-7f1a0d672000 ---p 00006000 09:01 399308                     /usr/lib/x86_64-linux-gnu/libheimntlm.so.0.1.0
 7f1a0d672000-7f1a0d673000 r--p 00005000 09:01 399308                     /usr/lib/x86_64-linux-gnu/libheimntlm.so.0.1.0
 7f1a0d673000-7f1a0d674000 rw-p 00006000 09:01 399308                     /usr/lib/x86_64-linux-gnu/libheimntlm.so.0.1.0
 7f1a0d674000-7f1a0d6ee000 r-xp 00000000 09:01 131966                     /lib/x86_64-linux-gnu/libgcrypt.so.11.7.0
 7f1a0d6ee000-7f1a0d8ee000 ---p 0007a000 09:01 131966                     /lib/x86_64-linux-gnu/libgcrypt.so.11.7.0
 7f1a0d8ee000-7f1a0d8ef000 r--p 0007a000 09:01 131966                     /lib/x86_64-linux-gnu/libgcrypt.so.11.7.0
 7f1a0d8ef000-7f1a0d8f2000 rw-p 0007b000 09:01 131966                     /lib/x86_64-linux-gnu/libgcrypt.so.11.7.0
 7f1a0d8f2000-7f1a0d9a6000 r-xp 00000000 09:01 398964                     /usr/lib/x86_64-linux-gnu/libgnutls.so.26.21.8
 7f1a0d9a6000-7f1a0dba6000 ---p 000b4000 09:01 398964                     /usr/lib/x86_64-linux-gnu/libgnutls.so.26.21.8
 7f1a0dba6000-7f1a0dbac000 r--p 000b4000 09:01 398964                     /usr/lib/x86_64-linux-gnu/libgnutls.so.26.21.8
 7f1a0dbac000-7f1a0dbad000 rw-p 000ba000 09:01 398964                     /usr/lib/x86_64-linux-gnu/libgnutls.so.26.21.8
 7f1a0dbad000-7f1a0dbae000 rw-p 00000000 00:00 0
 7f1a0dbae000-7f1a0dbe8000 r-xp 00000000 09:01 399303                     /usr/lib/x86_64-linux-gnu/libgssapi.so.3.0.0
 7f1a0dbe8000-7f1a0dde8000 ---p 0003a000 09:01 399303                     /usr/lib/x86_64-
 7f1a0e213000-7f1a0e214000 r--p 0000c000 09:01 403690                     /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2.8.1
 7f1a0e214000-7f1a0e215000 rw-p 0000d000 09:01 403690                     /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2.8.1
 7f1a0e215000-7f1a0e22d000 r-xp 00000000 09:01 132255                     /lib/x86_64-
 7f1a0eeef000-7f1a0eef0000 r--p 0003b000 09:01 398940                     /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2.2
 7f1a0eef0000-7f1a0eef2000 rw-p 0003c000 09:01 398940                     /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2.2
 7f1a0eef2000-7f1a0eef5000 r-xp 00000000 09:01 132073                     /lib/x86_64-linux-gnu/libcom_err.so.2.1
 7f1a0eef5000-7f1a0f0f4000 ---p 00003000 09:01 132073                     /lib/x86_64-linux-gnu/libc
 om_err.so.2.1
 7f1a0f0f4000-7f1a0f0f5000 r--p 00002000 09:01 132073                     /lib/x86_64-linux-gnu/libcom_err.so.2.1
 7f1a0f0f5000-7f1a0f0f6000 rw-p 00003000 09:01 132073                     /lib/x86_64-linux-gnu/libcom_err.so.2.1
 7f1a0f0f6000-7f1a0f1ba000 r-xp 00000000 09:01 398933                     /usr/lib/x86_64-linux-gnu/libkrb5.so.3.3
 7f1a0f1ba000-7f1a0f3b9000 ---p 000c4000 09:01 398933                     /usr/lib/x86_64-linux-gnu/libkrb5.so.3.3
 7f1a0f3b9000-7f1a0f3c3000 r--p 000c3000 09:01 398933                     /usr/lib/x86_64-linux-gnu/libkrb5.so.3.3
 7f1a0f3c3000-7f1a0f3c4000 rw-p 000cd000 09:01 398933                     /usr/lib/x86_64-linux-gnu/libkrb5.so.3.3
 7f1a0f3c4000-7f1a0f3ed000 r-xp 00000000 09:01 408194                     /usr/lib/libpq.so.5.4
 7f1a0f3ed000-7f1a0f5ec000 ---p 00029000 09:01 408194                     /usr/lib/libpq.so.5.4
 7f1a0f5ec000-7f1a0f5ee000 r--p 00028000 09:01 408194                     /usr/lib/libpq.so.5.4
 7f1a0f5ee000-7f1a0f5f0000 rw-p 0002a000 09:01 408194                     /usr/lib/libpq.so.5.4
 7f1a0f5f0000-7f1a0f601000 r-xp 00000000 09:02 50728854                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
 7f1a0f601000-7f1a0f801000 ---p 00011000 09:02 50728854                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
 7f1a0f801000-7f1a0f802000 r--p 00011000 09:02 50728854                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
 7f1a
 0f802000-7f1a0f803000 rw-p 00012000 09:02 50728854                   /home/deploy/www/limouzi/shared/bundle/ruby/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
 7f1a0f803000-7f1a0f816000 r-xp 00000000 09:02 50594709                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
 7f1a0f816000-7f1a0fa15000 ---p 00013000 09:02 50594709                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
 7f1a0fa15000-7f1a0fa16000 r--p 00012000 09:02 50594709                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
 7f1a0fa16000-7f1a0fa17000 rw-p 00013000 09:02 50594709                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
 7f1a0fa17000-7f1a0fa18000 r-xp 00000000 09:02 50594712                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/fcntl.so
 7f1a0fa18000-7f1a0fc17000 ---p 00001000 09:02 50594712                   /home/deploy/.rvm/rubies/rub
 y-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/fcntl.so
 7f1a0fc17000-7f1a0fc18000 r--p 00000000 09:02 50594712                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/fcntl.so
 7f1a0fc18000-7f1a0fc19000 rw-p 00001000 09:02 50594712                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/fcntl.so
 7f1a0fc19000-7f1a0fc6b000 r-xp 00000000 09:01 131958                     /lib/x86_64-linux-gnu/libssl.so.1.0.0
 7f1a0fc6b000-7f1a0fe6b000 ---p 00052000 09:01 131958                     /lib/x86_64-linux-gnu/libssl.so.1.0.0
 7f1a0fe6b000-7f1a0fe6e000 r--p 00052000 09:01 131958                     /lib/x86_64-linux-gnu/libssl.so.1.0.0
 7f1a0fe6e000-7f1a0fe74000 rw-p 00055000 09:01 131958                     /lib/x86_6
 4-linux-gnu/libssl.so.1.0.0
 7f1a0fe74000-7f1a0fe75000 rw-p 00000000 00:00 0
 7f1a0fe75000-7f1a0fecc000 r-xp 00000000 09:02 50594724                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/openssl.so
 7f1a0fecc000-7f1a100cc000
 ---p 00057000 09:02 50594724                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/openssl.so
 7f1a100cc000-7f1a100cd000 r--p 00057000 09:02 50594724                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/openssl.so
 7f1a100cd000-7f1a100cf000 rw-p 00058000 09:02 50594724                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/openssl.so
 7f1a100cf000-7f1a100d0000 rw-p 00000000 00:00 0
 7f1a100d0000-7f1a100df000 r-xp
 00000000 09:02 50594723                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/zlib.so
 7f1a100df000-7f1a102de000 ---p 0000f000 09:02 50594723                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/zlib.so
 7f1a102de000-7f1a102df000 r--p 0000e000 09:02 50594723                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/zlib.so
 7f1a102df000-7f1a102e0000 rw-p 0000f000 09:02 50594723                   /home/deploy/.rvm/r
 ubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/zlib.so
 7f1a102e0000-7f1a102e2000 r-xp 00000000 09:02 50594806                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/iso_8859_1.so
 7f1a102e2000-7f1a104e1000 ---p 00002000 09:02 50594806                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/iso_8859_1.so
 7f1a104e1000-7f1a104e2000 r--p 00001000 09:02 50594806                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/iso_8859_1.so
 7f1a104e2000-7f1a104e3000 rw-p 00002000 09:02 50594806                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/iso_8859_1.so
 7f1a104e3000-7f1a104e6000 r-xp 00000000 09:02 50594833
 /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest.so
 7f1a104e6000-7f1a106e5000 ---p 00003000 09:02 50594833                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest.so
 7f1a106e5000-7f1a106e6
 000 r--p 00002000 09:02 50594833                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest.so
 7f1a106e6000-7f1a106e7000 rw-p 00003000 09:02 50594833                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest.so
 7f1a106e7000-7f1a106fd000 r-xp 00000000 09:01 132127                     /lib/x86_64-linux-gnu/libz.so.1.2.3.4
 7f1a106fd000-7f1a108fc000 ---p 00016000 09:01 132127                     /lib/x86_64-linux-gnu/libz.so.1.2.3.4
 7f1a108fc000-7f1a108fd000 r--p 00015000 09:01 132127                     /lib/x86_64-linux-gnu/libz.so.1.2.3.4
 7f1a108fd000-7f1a108fe000 rw-p 00016000 09:01 132127                     /lib/x86_64-linux-gnu/libz.so.1.2.3.4
 7f1a108fe000-7f1a10a9d000 r-xp 00000000 09
 :01 131959                     /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
 7f1a10a9d000-7f1a10c9c000 ---p 0019f000 09:01 131959                     /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
 7f1a10c9c000-7f1a10cb7000 r--p 0019e000 09:01 131959
 /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
 7f1a10cb7000-7f1a10cc2000 rw-p 001b9000 09:01 131959                     /lib/x86_64-linux-gnu/libcrypto.so.1.0.0
 7f1a10cc2000-7f1a10cc6000 rw-p 00000000 00:00 0
 7f1a10cc6000-7f1a10cc7000 r-xp 00000000 09:02 50594731                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
 7f1a10cc7000-7f1a10ec6000 ---p 00001000 09:02 50594731                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest
 /sha1.so
 7f1a10ec6000-7f1a10ec7000 r--p 00000000 09:02 50594731                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
 7f1a10ec7000-7f1a10ec8000 rw-p 00001000 09:02 50594731                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so
 7f1a10ec8000-7f1a10efa000 r-xp 00000000 09:02 50594827                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/date_core.so
 7f1a10efa000-7f1a110fa000 ---p 000
 32000 09:02 50594827                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/date_core.so
 7f1a110fa000-7f1a110fb000 r--p 00032000 09:02 50594827                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/date_core.so
 7f1a110fb000-7f1a110fd000 rw-p 00033000 09:02 50594827                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/date_core.so
 7f1a110fd000-7f1a110fe000 rw-p 00000000 00:00 0
 7f1a110fe000-7f1a11104000 r-xp 00000000 09:02 50594828                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/strscan.so
 7f1a11104000-7f1a11303000 ---p 00006000 09:02 50594828                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64
 -linux/strscan.so
 7f1a11303000-7f1a11304000 r--p 00005000 09:02 50594828                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/strscan.so
 7f1a11304000-7f1a11305000 rw-p 00006000 09:02 50594828                   /home/deploy
 /.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/strscan.so
 7f1a11305000-7f1a1130c000 r-xp 00000000 09:02 50594711                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/stringio.so
 7f1a1130c000-7f1a1150b000 ---p 00007000 09:02 50594711                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/stringio.so
 7f1a1150b000-7f1a1150c000 r--p 00006000 09:02 50594711                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-
 linux/stringio.so
 7f1a1150c000-7f1a1150d000 rw-p 00007000 09:02 50594711                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/stringio.so
 7f1a1150d000-7f1a1152d000 r-xp 00000000 09:02 50467319                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libyaml-0.so.2.0.2
 7f1a1152d000-7f1a1172c000 ---p 00020000 09:02 50467319                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libyaml-0.so.2.0.2
 7f1a1172c000-7f1a1172d000 r--p 0001f000 09:02 50467319
 /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libyaml-0.so.2.0.2
 7f1a1172d000-7f1a1172e000 rw-p 00020000 09:02 50467319                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libyaml-0.so.2.0.2
 7f1a1172e000-7f1a11735000 r-xp 00000000 09:02 50594746                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/psych.so
 7f1a11735000-7f1a11934000 ---p 00007000 09:02 50594746                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/psych.so
 7f
 1a11934000-7f1a11935000 r--p 00006000 09:02 50594746                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/psych.so
 7f1a11935000-7f1a11936000 rw-p 00007000 09:02 50594746                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/psych.so
 7f1a11936000-7f1a11939000 r-xp 00000000 09:02 50594736                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/etc.so
 7f1a11939000-7f1a11b38000 ---p 00003000 09:02 50594736
 /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/etc.so
 7f1a11b38000-7f1a11b39000 r--p 00002000 09:02 50594736                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/etc.so
 7f1a11b39000-7f1a11b3a000 rw-p 00003000 09:02 50594736                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/etc.so
 7f1a11b3a000-7f1a11b40000 r-xp 00000000 09:02 50594832                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/pathname.so
 7f1a11b40000-7f1a11d40000 ---p 00006000 09:02 50594832                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/pathname.so
 7f1a11d40000-7f1a11d41000 r--p 00006000 09:02 50594832                   /ho
 me/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/pathname.so
 7f1a11d41000-7f1a11d42000 rw-p 00007000 09:02 50594832                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/pathname.so
 7f1a11d42000-7f1a11d4400
 0 r-xp 00000000 09:02 50594801                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
 7f1a11d44000-7f1a11f44000 ---p 00002000 09:02 50594801                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
 7f1a11f44000-7f1a11f45000 r--p 00002000 09:02 50594801                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
 7f1a11f45000-7f1a11f46000 rw-p 00003000 09:02 50594801                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
 7f1a11f46000-7f1a11f48000 r-xp 00000000 09:02 50594756                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linu
 x/enc/encdb.so
 7f1a11f48000-7f1a12147000 ---p 00002000 09:02 50594756                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
 7f1a12147000-7f1a12148000 r--p 00001000 09:02 50594756                   /home/deploy/
 .rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
 7f1a12148000-7f1a12149000 rw-p 00002000 09:02 50594756                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
 7f1a12149000-7f1a1234c000 r--p 00000000 09:01 394409                     /usr/lib/locale/locale-archive
 7f1a1234c000-7f1a12447000 r-xp 00000000 09:01 132258                     /lib/x86_64-linux-gnu/libm-2.15.so
 7f1a12447000-7f1a12646000 ---p 000fb000 09:01 132258                     /lib/x86_64-linux-gnu/libm-2.15.so
 7f1a12646000-7f1a12647000 r--p 000fa000 09:01 132258                     /lib/x86_64-linux-gnu/libm-2.15.so
 7f1a12647000-7f1a12648000 rw-p 000fb000 09:01 132258                     /lib/x86_64-linux-gnu/libm-2.15.so
 7f1a1264
 8000-7f1a12651000 r-xp 00000000 09:01 132259                     /lib/x86_64-linux-gnu/libcrypt-2.15.so
 7f1a12651000-7f1a12851000 ---p 00009000 09:01 132259                     /lib/x86_64-linux-gnu/libcrypt-2.15.so
 7f1a12851000-7f1a12852000 r--p 00009000
 09:01 132259                     /lib/x86_64-linux-gnu/libcrypt-2.15.so
 7f1a12a85000-7f1a12a8c000 r-xp 00000000 09:01 132254                     /lib/x86_64-linux-gnu/libr
 t-2.15.so
 7f1a12a8c000-7f1a12c8b000 ---p 00007000 09:01 132254                     /lib/x86_64-linux-gnu/librt-2.15.so
 7f1a12c8b000-7f1a12c8c000 r--p 00006000 09:01 132254                     /lib/x86_64-linux-gnu/librt-2.15.so
 7f1a12c8c000-7f1a12c8d000 rw
 -p 00007000 09:01 132254                     /lib/x86_64-linux-gnu/librt-2.15.so
 7f1a12c8d000-7f1a12ca5000 r-xp 00000000 09:01 132252                     /lib/x86_64-linux-gnu/libpthread-2.15.so
 7f1a12ca5000-7f1a12ea4000 ---p 00018000 09:01 132252                     /lib/x86_64-linux-gnu/libpthread-2.15.so
 7f1a12ea4000-7f1a12ea5000 r--p 00017000 09:01 132252                     /lib/x86_64-linux-gnu/libpthread-2.15.so
 7f1a12ea5000-7f1a12ea6000 rw-p 00018000 09:01 132252                     /lib/x86_64-linux-gnu/libpthread-2.15.so
 7f1a12ea6000-7f1a12eaa000 rw-p 00000000 00:00 0
 7f1a12eaa000-7f1a1305f000 r-xp 00000000 09:01 132250                     /lib/x86_64-linux-gnu/libc-2.15.so
 7f1a1305f000-7f1a1325e000 ---p 001b5000 09:01 132250                     /
 lib/x86_64-linux-gnu/libc-2.15.so
 7f1a1325e000-7f1a13262000 r--p 001b4000 09:01 132250                     /lib/x86_64-linux-gnu/libc-2.15.so
 7f1a13262000-7f1a13264000 rw-p 001b8000 09:01 132250                     /lib/x86_64-linux-gnu/libc-2.15.so
 7f1a13
 264000-7f1a13269000 rw-p 00000000 00:00 0
 7f1a13269000-7f1a134a7000 r-xp 00000000 09:02 50467318                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libruby.so.1.9.1
 7f1a134a7000-7f1a136a6000 ---p 0023e000 09:02 50467318                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libruby.so.1.9.1
 7f1a136a6000-7f1a136ab000 r--p 0023d000 09:02 50467318                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libruby.so.1.9.1
 7f1a136ab000-7f1a136af000 rw-p 00242000 09:02 50467318                   /home/deploy/.rvm/rubies/ruby-1.9.3-p286/lib/libruby.so.1.9.1
 7f1a136af000-7f1a136cd000 rw-p 00000000 00:00 0
 7f1a136cd000-7f1a136ef000 r-xp 00000000 09:01 132264                     /lib/x86_64-linux-gnu/ld-2.15.so
 7f1a13718000-7f1a137d8000 rw-p
 00000000 00:00 0
 7f1a137d8000-7f1a137df000 r--s 00000000 09:01 400807                     /usr/lib/x86_64-linux-gnu/gconv/gconv-modules.cache
 7f1a137df000-7f1a138e5000 rw-p 00000000 00:00 0
 7f1a138e9000-7f1a138ea000 ---p 00000000 00:00 0
 7f1a138ea000-7
 f1a138ef000 rw-p 00000000 00:00 0
 7f1a138ef000-7f1a138f0000 r--p 00022000 09:01 132264                     /lib/x86_64-linux-gnu/ld-2.15.so
 7f1a138f0000-7f1a138f2000 rw-p 00023000 09:01 132264                     /lib/x86_64-linux-gnu/ld-2.15.so
 7fffa4851000-7fffa4872000 rw-p 00000000 00:00 0                          [stack]
 7fffa494e000-7fffa494f000 r-xp 00000000 00:00 0                          [vdso]
 ffffffffff600000-ffffffffff601000 r--p 00000000 00:00 0                  [vsyscall]

 [NOTE]
 You may have encountered a bug in the Ruby interpreter or extension libraries.
 Bug reports are welcome.
 For details: http://www.ruby-lang.org/bugreport.html 
```

有趣的是跟踪的结尾，它说 ruby​​ 解释器中有一个错误。有一次我有跟踪的开始，它说的是这样的：`*** glibc detected *** ruby: double free or corruption (!prev)`

目前要修复错误，我需要重新启动 nginx。正是出于这个原因，我问了这个问题：是 ruby​​ 和 nginx 之间的冲突还是 ruby​​ 解释器内部的冲突？以及如何解决这个问题？

谢谢

**编辑 ：**

错误已经出现。我想知道这是否不是因为 ImageMagick 的问题。事实上，一个 cron 任务每天都会执行几次上传图片。当没有很多图片时，一切似乎都很好。但是当每两个小时有大约 100 张图片时，我有一种错误出现的感觉。我会这样检查。如果有人有想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:09:57.483

试试，导出 MALLOC_CHECK_=2。因为这个 glibc 会在 free() 期间做额外的检查，以避免堆损坏。一旦检测到损坏，它将 abort() 并给出核心转储，而不是等到损坏导致实际问题出现。

或使用[http://valgrind.org/](http://valgrind.org/)了解更多详情。

# javascript - 多个多边形、InfoWindow、setMap

> ID：13875483
> 
> 赞同：0
> 
> 时间：2012-12-14T09:03:29.400
> 
> 标签：javascript, google-maps-api-3

好吧，我在这方面花了一段时间，在许多教程和示例的帮助下，我偶然发现并走到了这一步。

我需要创建多个多边形，每个多边形都有一个单独的信息窗口。认为我已经做到了，但是 setMap 遇到了麻烦。这是我已经走了多远：

收到类型错误

```
object #<object> has no method 'setMap' 
```

我该如何解决这个错误？

```
<script>
var map;
var infoWindow;

function initialize() {
  var myLatLng = new google.maps.LatLng(24.886436490787712, -70.2685546875);
  var mapOptions = {
    zoom: 5,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

  // Let's start with an empty object:
var countries = {    
};

// Now let's add a county polygon:
countries['UK'] = new google.maps.Polygon({
  paths: [
    new google.maps.LatLng(59.677361, -2.469846),
    new google.maps.LatLng(59.299717,   -6.314917),
    new google.maps.LatLng(57.877247,   -9.314917),
    new google.maps.LatLng(54.428078,  -11.638861),
    new google.maps.LatLng(51.784554,  -11.702241),
    new google.maps.LatLng(50.185848,  -10.054354),
    new google.maps.LatLng(49.405380,   -7.012100),
    new google.maps.LatLng(49.090675,   -3.272664),
    new google.maps.LatLng(48.775970,   -1.709283),
    new google.maps.LatLng(49.757851,   -2.089565),
    new google.maps.LatLng(50.714554,    1.037195),
    new google.maps.LatLng(51.482437,    2.304801),
    new google.maps.LatLng(53.433609,    3.276632),
    new google.maps.LatLng(55.863132,    3.445646)
    // ...
  ],
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "#FF0000",
  fillOpacity: 0.3
});

// Next county:
countries['FR'] = new google.maps.Polygon({
  paths: [
    // This is not real data:
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.757370),
    new google.maps.LatLng(25.774252, -80.190262)
    // ...
  ],
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "#FF0000",
  fillOpacity: 0.3
});

// And so on...

countries.setMap(map)

;
  // Add a listener for the click event
  google.maps.event.addListener(UK, 'click', showInfoUK);
  google.maps.event.addListener(FR, 'click', showInfoFR);

  infowindow = new google.maps.InfoWindow();
}

function showInfoUK(event) {
    var contentString = "<b>UK</b><br />";
        contentString += "UK, Channel Islands, Ireland";

  // Replace our Info Window's content and position
  infowindow.setContent(contentString);
  infowindow.setPosition(event.latLng);

  infowindow.open(map);
}
function showInfoFR(event) {
    var contentString = "<b>FR</b><br />";
        contentString += "France, N,W";

  // Replace our Info Window's content and position
  infowindow.setContent(contentString);
  infowindow.setPosition(event.latLng);

  infowindow.open(map);
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:16:26.673

Javascript 没有对诸如 php 之类的键的引用，因此无法设置国家 ['UK']。您必须使用数字键。所以语法应该是这样的：

```
countries[0] = new google.maps.Polygon({ ... });
countries[1] = new google.maps.Polygon({ ... }); 
```

我让你的例子工作：

[http://jsfiddle.net/AcCzT/15/](http://jsfiddle.net/AcCzT/15/)

可以微调。这并不完美。这只是一个快速修复。你可以从那里继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:57:15.580

Javascript 数组没有`.setMap()`方法。google.maps.Polygon() 对象可以。此外，javascript中没有关联数组，例如国家['UK']

这可能有效：

```
countries['UK'].setMap(map); 
```

但这是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:20:08.370

使用 ajax 更简单，更简单。例如，

```
downloadUrl("url", function(data) {
    for (var i = 0; i < polygons.length; i++) {
        ........
        var decodedPath = ........
        polygon.setMap(map);
        ........
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:06:02.303

您的代码中有两个问题：

1.  Marcelo 所说的，要将多边形添加到地图中，请使用：`countries["UK"].setMap(map);`
2.  要添加点击侦听器，您需要引用多边形：`google.maps.event.addListener(countries["UK"], 'click', showInfoUK);`

[工作示例](http://www.geocodezip.com/v3_simpleMap_countryPolygons.html)

# algorithm - 如何在 trie 表中对 IP 地址进行排序？

> ID：13875486
> 
> 赞同：1
> 
> 时间：2012-12-14T09:03:35.983
> 
> 标签：algorithm, routing, go, binary-tree, cidr

我想编写一些代码来在我的 Go 程序中创建一个小的“路由表”。

[我正在使用带有http://github.com/petar/GoLLRB](http://github.com/petar/GoLLRB)包的左倾红黑树，基本上它似乎在对它大惊小怪后可以工作，但是我怀疑我没有对 IP 进行排序创建树时正确添加前缀。我实验使用的“lessThan”函数是

```
func lessRoute(a, b interface{}) bool {
    aNet := a.(Route).Net
    bNet := b.(Route).Net

    for i, a := range aNet.IP {
        if a < bNet.IP[i] {
            return true
        }
        if a > bNet.IP[i] {
            return false
        }
    }
    return false
} 
```

（完整代码在[https://gist.github.com/4283789](https://gist.github.com/4283789)）

这似乎给了我正确的结果，但不是很有效。

在我的测试中，我正在添加路线

```
AddRouteString(tree, "10.0.0.0/8", 10)
AddRouteString(tree, "10.20.0.0/16", 20)
AddRouteString(tree, "10.21.0.0/16", 21) 
```

然后在查找 10.22.0.1 的路线时，它会在找到正确的结果之前查看 10.21.0.0/16 和 10.20.0.0/16。

我应该如何订购我的树以更快地找到正确的结果？

**更新**：@jnml 对如何更快地进行 IP 比较有一个很好的建议（也许这是我能做的最好的），但在我看来，有一种方法可以利用前缀长度来排序树因此可以在更少的步骤中找到匹配项。这就是我要找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:16:08.303

我可能会写：

```
if bytes.Compare([]byte(a), []byte(b)) < 0 {
        // ... whatever to do when address a < b (lexicographically)
} 
```

或者对于树比较器：

```
func lessRoute(a, b interface{}) bool {
        return bytes.Compare([]byte(a.(Route).Net.IP), []byte(b.(Route).Net.IP)) < 0
} 
```

`bytes.Compare()`记录[在这里](http://golang.org/pkg/bytes/#Compare)。

# jquery - JQuery SlideUp/SlideDown 偶尔工作

> ID：13875491
> 
> 赞同：1
> 
> 时间：2012-12-14T09:03:55.903
> 
> 标签：jquery, slidedown, slideup

开发站点是这样的： [https ://bcdev01.alpineincdev.com/](https://bcdev01.alpineincdev.com/)

如果您将鼠标悬停在购物车区域（右上角）上，一个新的 div 会向下滑动，覆盖触发区域。当鼠标离开新的 div 时，它应该向上滑动。

有时此功能有效。有时它不会向上滑动，而是卡在伸展位置。其他时候，但并不总是（在 Firefox 中），它会不断上升和下降。

是什么赋予了？

Jquery代码如下

```
 <script>
jQuery.noConflict();

 // Use jQuery via jQuery(...)
 jQuery(document).ready(function(){

    jQuery("#minicart_trigger").hover(
        function () {
          jQuery("#minicart").slideDown("slow");  
        }
      );

    jQuery("#minicart").mouseleave(function() {
        jQuery("#minicart").slideUp("slow");
    });

 }); 
```

知道为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:28:39.580

替换为：

```
jQuery("#minicart_trigger").hover(function () {
        jQuery("#minicart").stop().slideDown("slow");  
    },function() {
        jQuery("#minicart").stop().slideUp("slow");
}); 
```

# entity-framework - 具有 Entity Framework 6 Alpha 2 的现有 Azure 数据库

> ID：13875496
> 
> 赞同：0
> 
> 时间：2012-12-14T09:04:24.063
> 
> 标签：entity-framework, azure, azure-sql-database, entity-framework-6

我有一个需要聚集索引的天蓝色数据库。我想使用 Entity-Framework 6 Alpha 2，因为我想使用新的异步功能。当我使用 SQL Express 2012 在本地机器上测试它时，一切都很好，但是当我使用我的 azure 数据库尝试它时，我收到以下错误：

此版本的 SQL Server 不支持没有聚集索引的表。请创建聚集索引并重试。

我不知道该怎么做，因为当我使用空数据库对其进行测试时，每个主键都是聚集索引。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:06:36.517

您能否对“Windows Azure 上的现有数据库”以及与 EF 6 一起使用的情况进行一些说明？首先 - 您使用的是 EF CodeFirst、ModelFirst、DatabaseFirst 吗？那么如果你真的有现有的数据库，你是如何创建它的呢？手动 DB + Schema，使用一些向导（SSMS、SQL Azure 迁移向导、EF CodeFirst 创建它等？）。这个现有的数据库是如何结束在 Azure 中的？

然后追踪完整的错误消息，检查它发生在哪个表上，并在该表上手动添加聚集索引。确实，您在 SQL Server 中创建的每个主键默认也是一个 CLUSTERED。但是如果表是先创建的，那么主键是作为单独的 DDL 语句（ALTER TABLE ....）添加的，它可能没有被创建为 CLUSTERED。

所以，信息很清楚——请先创建聚集索引。找出 SQL Azure 抱怨的表并在其上创建聚集索引。如果它没有主键，只需添加一个作为 CLUSTERD：

```
ALTER TABLE [dbo].[Individual]
ADD CONSTRAINT [PK_Individual_CustomerID]
PRIMARY KEY CLUSTERED
(
[CustomerID] ASC
) 
```

如果它有一个主键 - 检查包含哪些列，删除它，然后将其重新创建为集群。

# mysql - MySQL中字符串数字部分的比较

> ID：13875497
> 
> 赞同：1
> 
> 时间：2012-12-14T09:04:27.123
> 
> 标签：mysql, sql

我有一个包含版本信息的字段，例如：

```
V12.0
V1.0
BE0.50
VV24 
```

我想查询更大的版本`n`。我要进行比较的数字前面是不固定数量的字符。是否可以执行以下操作：

```
SELECT version FROM table WHERE int_part(version) > 10

V12.0
VV24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:49:54.900

在这种情况下，版本号似乎只出现在末尾，字母在开头。因此，可能的解决方案是反转字符串，键入强制转换以获取数字，然后反转获得的数字。

尝试以下解决方案

```
 SELECT   version
     FROM table
     HAVING CAST(REVERSE(IF(LOCATE(".", version), (CAST(REVERSE(version) AS DECIMAL(4,2))), (CAST(REVERSE(version) AS UNSIGNED INTEGER)))) AS DECIMAL(4,2)) > 12; 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:55:58.743

似乎您必须创建自己的函数才能执行此操作：

```
CREATE FUNCTION IsNumeric (val varchar(255)) RETURNS tinyint 
 RETURN val REGEXP '^(-|\\+){0,1}([0-9]+\\.[0-9]*|[0-9]*\\.[0-9]+|[0-9]+)$';

CREATE FUNCTION NumericOnly (val VARCHAR(255)) 
 RETURNS VARCHAR(255)
BEGIN
 DECLARE idx INT DEFAULT 0;
 IF ISNULL(val) THEN RETURN NULL; END IF;

 IF LENGTH(val) = 0 THEN RETURN ""; END IF;

 SET idx = LENGTH(val);
  WHILE idx > 0 DO
  IF IsNumeric(SUBSTRING(val,idx,1)) = 0 THEN
   SET val = REPLACE(val,SUBSTRING(val,idx,1),"");
   SET idx = LENGTH(val)+1;
  END IF;
  SET idx = idx - 1;
  END WHILE;
  RETURN val;
 END; 
```

* * *

```
select NumericOnly('vv24');
+---------------------+
| NumericOnly('vv24') |
+---------------------+
| 24                  |
+---------------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:51:52.847

MySQL 的一大缺点是不支持 REPLACE 方法中的正则表达式。如果我必须进行任何类型的匹配，我通常会将所有数据提取到我的 PHP 并在那里进行处理。从长远来看，这是更好的解决方案。当然，如果您愿意，您总是可以使用用户定义的函数。

[http://dev.mysql.com/doc/refman/5.0/en/adding-udf.html](http://dev.mysql.com/doc/refman/5.0/en/adding-udf.html)

@shubhansh

24 不会更改为 0.24 并且失败 > 12 吗？

# javascript - IE8 上的 html2canvas 和 flashcanvas 无法正常工作

> ID：13875498
> 
> 赞同：4
> 
> 时间：2012-12-14T09:04:26.980
> 
> 标签：javascript, canvas, internet-explorer-8, html2canvas, flashcanvas

我使用 html2canvas 库制作表格的 png 图像。

*它适用于 Chrome、Firefox 和 Safari。*

代码如下：

```
$('#myTable').html2canvas ({     
    onrendered : function(canvas) {                           
        var img = canvas.toDataURL('image/png');
        var newWin = window.open('', '_blank','width=500,height=400');
        var htmlPage = "";
        htmlPage += "<html>";
        htmlPage += "<head>";
        ...
        htmlPage += "</head>";
        htmlPage += "<body>";
        ...   
        htmlPage += "<img src='"+img+"' width='400px'/>";
        ...   
        htmlPage += "</body>";
        htmlPage += "</html>";
        newWin.document.write(htmlPage);
    }
}); 
```

当我用**IE8 打开页面时，页面不起作用。**

我读过我应该使用 flashcanvas，所以我添加了 flashcanvas 库并在页面中添加了这一行：

```
<!--[if lt IE 9]>                
   <script type="text/javascript src="../sample/flashcanvas.js"></script>
<![endif]--> 
```

所以，当我用 IE8 打开页面时，库 flashcanvas.js 被加载了！

但问题依然存在！IE8 告诉我：

```
"The object does not support the property or the method 'toDataURL'" 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:13:00.133

我不确定`canvas`元素是如何创建的，但您可能需要在`onrendered`回调中执行以下操作：

```
if (typeof FlashCanvas != "undefined") {
    FlashCanvas.initElement(canvas);
}
var img = canvas.toDataURL('image/png');
// etc... 
```

请参阅此处的文档：http: [//flashcanvas.net/docs/usage](http://flashcanvas.net/docs/usage)

# user-interface - 如果作为查询的一部分涉及可选字段，我如何设计查询界面

> ID：13875501
> 
> 赞同：0
> 
> 时间：2012-12-14T09:04:34.123
> 
> 标签：user-interface, usability

如何设计用于查询可选字段是否是记录的一部分的界面。

```
Record contains (name, foo_type, bar_type, value) 
```

foo_type 可以是 foo1，foo2 bar_type 是 bar1，bar2 并且只对 foo1 有效，如果 foo2 被存储，bar_type 的值总是空的。

我想过滤某个 bar_type 的记录，比如 bar1 或 bar2。但是如果选择了没有 bar_type 的 foo(s)（比如 fooX、fooY），那将没有意义。在这种情况下，如果用户选择 bar1 或 bar2，结果集将为空。

我如何在这里设计一个直观的用户界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:44:48.450

很难说这些例子是通用的。如果您将示例映射到您的实际域，那么我会将您的两个选项包装成一个选择 - 因为只有三个选项：

*   foo1 & bar1
*   foo1 & bar2
*   foo2

您可以采用的其他方法是根据最初选择的选项逐步显示更多选项。例如，我设计了一个联系表格，其中一个问题是“您希望如何联系？” 如果他们选择“电话”，我们会显示一个电话字段。如果他们选择邮寄，我们会显示一个地址字段。等等。

你能谈谈你的实际域名吗？这将有助于人们给出更好的答案。

# javascript - 有没有更好的方法从 webview 返回 Cordova/Phonegap 应用程序？

> ID：13875502
> 
> 赞同：3
> 
> 时间：2012-12-14T09:04:43.223
> 
> 标签：javascript, cordova, webview, back

目前我正在使用它从 Cordova 应用程序内部加载外部网页：

```
window.location.href = "http://www.example.com"; 
```

这是从 www.example.com 返回到我的 Cordova 应用程序：

```
window.history.back(); 
```

它有效。但是，如果我进一步深入 www.example.com 页面，则需要在每个 www.example.com 子页面上都有一个后退按钮/链接（例如：www.example.com/page1.html、www.example.com/ page2.html, ...) 以便能够访问我首先登陆的 www.example.com 页面。进入第一页后，我可以再次单击返回以访问 Cordova 应用程序。

有没有更好的方法只使用 javascript，这样我就可以直接从 www.example.com 上的任何子页面返回 Cordova 应用程序？谢谢你。

（我目前正在 iOS 上进行这项工作，但我希望它尽可能便携，所以我尽量避免使用 Objective-C 和 Java 编码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:13:10.717

如果您使用的是 phonegap 2.1，则转到 res/xml/config.xml 编辑此行并将其从“false”更改为“true”

```
<preference name="useBrowserHistory" value="true" /> 
```

这将允许在应用程序中使用浏览器历史记录。所以导航回以前的网址只是通过

window.history.go(-1)

# android - java.lang.unsatisfiedlinkerror:couldn't load testjni: findLibrary returned null

> ID：13875504
> 
> 赞同：3
> 
> 时间：2012-12-14T09:04:56.597
> 
> 标签：android, android-ndk, java-native-interface

**我在没有 Eclipse 的 android 源路径/packages/apps/**中创建了一个 android 项目（TestJni）。我已经编译了android源代码。

我已经添加了**jni**文件夹。**在 jni 文件夹下**，有一些文件，包括 Android.mk 和 basic.c 。

安卓.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := basic.c
LOCAL_MODULE := testjni
include $(BUILD_SHARED_LIBRARY) 
```

基本的.c

```
#include<string.h>
#include<jni.h>
jstring Java_com_example_FristJniActivity_getStringFromJni(JNIEnv *env, jobject thiz) {
    return (*env)->NewStringUTF(env, "hello ndk and jni");
} 
```

当前android项目的根目录，有一个Android.mk Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := $(call all-java-files-under, src)
LOCAL_PACKAGE_NAME := TestJni
LOCAL_JNI_SHARD_LIBRARIES := testjni
LOCAL_REQUIRED_MODULES := testjni
include $(BUILD_PACKAGE) 
```

在src文件夹中，有一个activity(FristJniActivity) FristJniActivity.java

```
static {
    System.loadLirary("testjni");
}
public native String getStringFromJni();

public void onCreate(Bundle b) {
    super.onCreate(b);
    TextView tv = new TextView(this);
    tv.setText(getStringFromJNi());
    setContentView(tv);
} 
```

然后我编译TestJni应用程序，可以找到apk。但是将它推入手机后，**强制关闭**。

错误是：java.lang.unsatisfiedlinkerror:couldn't load testjni: findLibrary returned null

我用谷歌搜索。但我找不到解决方案。

我检查了apk文件，testjni.so文件已经存在于/lib/armeabi-v7a/目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:45:32.040

我修改了一些值

**jni/Android.mk**

```
LOCAL_MODULE := libtestjni 
```

安卓.mk

```
LOCAL_JNI_SHARD_LIBRARIES := libtestjni
LOCAL_REQUIRED_MODULES := libtestjni 
```

，并使用命令“ **adb install** *** .apk ”。

然后它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T10:47:58.240

UnsatisfiedLinkerror由此解决。通过ndk_build再次构建您的.so文件**因为** 每次您更改.c文件时，您都必须构建**.so**文件

# python - 将数字字符串转换为上标

> ID：13875507
> 
> 赞同：6
> 
> 时间：2012-12-14T09:05:09.387
> 
> 标签：python, unicode

我需要将数字字符串转换为上标，有更好的（内置）方法吗？

```
def to_sup(s):
    sups={u'1': u'\xb9', 
          u'0': u'\u2070',
          u'3': u'\xb3', 
          u'2': u'\xb2',
          u'5': u'\u2075',
          u'4': u'\u2074',
          u'7': u'\u2077',
          u'6': u'\u2076',
          u'9': u'\u2079',
          u'8': u'\u2078'}
    if s.isdigit():
        return ''.join([sups[i] for i in s])
print to_sup('0123') 
```

输出：

```
⁰¹²³ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T09:16:19.240

你的方法有点不正确。更好的是：

```
def to_sup(s):
    sups = {u'0': u'\u2070',
            u'1': u'\xb9',
            u'2': u'\xb2',
            u'3': u'\xb3',
            u'4': u'\u2074',
            u'5': u'\u2075',
            u'6': u'\u2076',
            u'7': u'\u2077',
            u'8': u'\u2078',
            u'9': u'\u2079'}

    return ''.join(sups.get(char, char) for char in s)  # lose the list comprehension 
```

~~`s.isdigit()`只会检查第一个字母，这可能没有意义。~~

如果由于某种原因你想要一个单线：

```
u''.join(dict(zip(u"0123456789", u"⁰¹²³⁴⁵⁶⁷⁸⁹")).get(c, c) for c in s) 
```

# c# - 无法加载 DLL 'opencv_core242'：找不到指定的模块。恩古简历

> ID：13875514
> 
> 赞同：7
> 
> 时间：2012-12-14T09:05:45.453
> 
> 标签：c#, emgucv

我正在尝试开始使用 emgu CV open CV for C#。但我无法让它发挥作用。我正在按照本指南使用 emgu CV [Link](http://www.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp)制作简单的程序，但出现以下错误：（知道我做错了什么吗？）

```
 System.TypeInitializationException was unhandled
      Message=The type initializer for 'Emgu.CV.CvInvoke' threw an exception.
      Source=Emgu.CV
      TypeName=Emgu.CV.CvInvoke
      StackTrace:
       at Emgu.CV.Image`2..ctor(String fileName) in c:\Emgu\emgucv-windows-x86-gpu 2.4.2.1777\Emgu.CV\Image.cs:line 144
       at TEST.Form1.button1_Click(Object sender, EventArgs e) in c:\documents and settings\laci\my documents\visual studio 2010\Projects\TEST\TEST\Form1.cs:line 28
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at TEST.Program.Main() in c:\documents and settings\laci\my documents\visual studio 2010\Projects\TEST\TEST\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.DllNotFoundException
       Message=Unable to load DLL 'opencv_core242': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
       Source=Emgu.CV
       TypeName=""
       StackTrace:
            at Emgu.CV.CvInvoke.cvRedirectError(CvErrorCallback errorHandler, IntPtr userdata, IntPtr prevUserdata)
            at Emgu.CV.CvInvoke..cctor() in c:\Emgu\emgucv-windows-x86-gpu 2.4.2.1777\Emgu.CV\PInvoke\CvInvoke.cs:line 166
       InnerException: 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T09:10:02.627

由于 Emgu.CV 只是一个 .NET 包装器（参见[http://en.wikipedia.org/wiki/Wrapper_library](http://en.wikipedia.org/wiki/Wrapper_library)），因此您需要将 OpenCV 的本机 .DLL 文件放在应用程序输出目录中。

可以在[http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/OpenCV-2.4.2.exe/download下载对应版本的OpenCV找到需要的文件](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/OpenCV-2.4.2.exe/download)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T13:26:31.557

我会为大家节省很多时间。对于 EMGU CV 版本 2.4.*，缺少的 dll 是“nvcuda.dll”，它不是 EMGU 二进制文件的一部分，但它通常位于 system32 文件夹中（也许你需要安装 nvidia 驱动程序，如果不只是在线查找 dll )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T18:51:54.430

您可以通过在“opencv_core242.dll”上使用 Dependency Walker -> [http://www.dependencywalker.com/来查找任何丢失的 DLL 来解决此问题。](http://www.dependencywalker.com/)

对我来说，它表明我没有 tbb.dll 作为 Thread here [tbb.dll not found](https://stackoverflow.com/questions/8818790/tbb-dll-not-found)

只需从[https://www.threadingbuildingblocks.org/](https://www.threadingbuildingblocks.org/)下载并将 tbb*.dll 复制到工作目录或“System32”就可以了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T21:18:13.700

旧的，但我有同样的问题。事实证明 2.4.0 集成了 GPU，如果您没有 Nvidia 卡，则缺少 nvcuda.dll 并且 opencv_core242.dll 无法加载。尝试了一切，唯一的解决方案是回到 2.3.0 并且一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T09:07:08.000

正如错误所述 - 它在您的应用程序的工作目录中找不到本机 DLL。确保将 opencv_core242.dll 库复制到应用程序的输出目录和工作目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-28T06:06:23.027

[从http://www.dependencywalker.com/](http://www.dependencywalker.com/)下载dependency walker并打开声称不加载的.dll。然后查找依赖项，如果甚至您的系统文件夹（system32 或 syswow64）的应用程序目录中缺少一个或多个依赖项，那么它们需要在其中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-01T11:40:24.630

这是解决问题的正确步骤。

访问：[https](https://sourceforge.net/project/emgucv/emgucv/2.4.2/)
: //sourceforge.net/project/emgucv/emgucv/2.4.2/ 根据您的操作系统下载特定版本的 emgucv 2.4.2，例如 windows x86，您可以下载：libemgucv-windows-x86-gpu-2.4 .2.1777.exe

将它安装在 C:\Emgu 之类的地方，然后转到 C:\Emgu\emgucv-windows-x86-gpu 2.4.2.1777\bin\x86 并复制所有 opencv dll 文件并将其粘贴到您的应用程序 exe 输出目录中。

*   要删除不必要的 opencv dll 文件，请运行您的应用程序，然后按 ctrl+A 并尝试删除这些文件，您的应用程序使用的那些文件您将无法删除，因为您的应用程序正在运行并且它们正在使用中重置未使用的dll文件将被删除，除了您可以使用过时的依赖walker应用程序（[http://www.dependencywalker.com/](http://www.dependencywalker.com/)）可能会或可能不会工作

# c# - 如何在c#中将字符串拆分为两个字符串？

> ID：13875517
> 
> 赞同：0
> 
> 时间：2012-12-14T09:05:48.763
> 
> 标签：c#, string, c#-4.0, string-parsing

我有一个包含 HTML 数据的字符串变量。现在我想将该 html 字符串拆分为多个字符串，然后最后将这些字符串合并为一个。

**这是html字符串：**

```
<p><span style="text-decoration: underline; color: #ff0000;"><strong>para1</strong></span></p>
<p style="text-align: center;"><strong><span style="color: #008000;">para2</span> स्द्स्द्सद्स्द para2 again<br /></strong></p>
<p style="text-align: left;"><strong><span style="color: #0000ff;">para3</span><br /></strong></p> 
```

**这是我的预期输出：**

```
<p><span style="text-decoration: underline; color: #ff0000;"><strong>para1</strong></span><strong><span style="color: #008000;">para2</span>para2 again<br /></strong><strong><span style="color: #0000ff;">para3</span><br /></strong></p> 
```

我的拆分逻辑如下...

1.  `</p>`根据标签将 HTML 字符串拆分为令牌。
2.  并获取第一个令牌并将其存储在单独的字符串变量（firstPara）中。
3.  现在获取每个标记，然后删除以 . 开头`<p`和结尾的任何标签`</p>`。并将每个值存储在单独的变量中。

4.然后取名为 firstPara 的第一个令牌并替换标签`</p>`，然后**附加我们通过****步骤 3**获得的每个令牌。

5.所以，现在变量 firstPara 具有整个值...

1.  最后，我们只是`</p>`在 firstPara 的末尾追加...

这是我的问题...

你能帮我摆脱这个问题吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:21:11.400

这是正则表达式示例如何执行此操作。

```
String pattern = @"(?<=<p.*>).*(?=</p>)";
var matches = Regex.Matches(text, pattern);
StringBuilder result = new StringBuilder();
result.Append("<p>");
foreach (Match match in matches)
{
    result.Append(match.Value);
}
result.Append("</p>"); 
```

这就是你应该如何使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(text);
var nodes = doc.DocumentNode.SelectNodes("//p");
StringBuilder result = new StringBuilder();
result.Append("<p>");
foreach (HtmlNode node in nodes)
{
    result.Append(node.InnerHtml);
}
result.Append("</p>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:24:26.217

如果您想将 a 拆分为`string`另一个`string`，您可以使用`string.Split(string[] separator, StringSplitOptions options)`where`separator`是一个`string`包含至少一个字符串的数组，该字符串将用于拆分`string`

**例子**

```
//Initialize a string of name HTML as our HTML code
string HTML = "<p><span style=\"text-decoration: underline; color: #ff0000;\"><strong>para1</strong></span></p> <p style=\"text-align: center;\"><strong><span style=\"color: #008000;\">para2</span> स्द्स्द्सद्स्द para2 again<br /></strong></p> <p style=\"text-align: left;\"><strong><span style=\"color: #0000ff;\">para3</span><br /></strong></p>";
//Initialize a string array of name strSplit to split HTML with </p>
string[] strSplit = HTML.Split(new string[] { "</p>" }, StringSplitOptions.None);
//Initialize a string of name expectedOutput
string expectedOutput = "";
string stringToAppend = "";
//Initialize i as an int. Continue if i is less than strSplit.Length. Increment i by 1 each time you continue
for (int i = 0; i < strSplit.Length; i++)
{
    if (i >= 1) //Continue if the index is greater or equal to 1; from the second item to the last item
    {
        stringToAppend = strSplit[i].Replace("<p", "<"); //Replace <p by <
    }
    else //Otherwise
    {
        stringToAppend = strSplit[i]; //Don't change anything in the string
    }
    //Append strSplit[i] to expectedOutput
    expectedOutput += stringToAppend;
}
//Append </p> at the end of the string
expectedOutput += "</p>";
//Write the output to the Console
Console.WriteLine(expectedOutput);
Console.Read(); 
```

**输出**

```
<p><span style="text-decoration: underline; color: #ff0000;"><strong>para1</stro
ng></span> < style="text-align: center;"><strong><span style="color: #008000;">p
ara2</span> ?????????????? para2 again<br /></strong> < style="text-align: left;
"><strong><span style="color: #0000ff;">para3</span><br /></strong></p> 
```

**注意**：因为我的程序不支持 Unicode 字符，所以它无法读取`स्द्स्द्सद्स्द`。因此，它被翻译为`??????????????`。

谢谢，
我希望你觉得这有帮助:)

# java - Sharepoint GetListItems 不返回任何行

> ID：13875518
> 
> 赞同：3
> 
> 时间：2012-12-14T09:05:50.550
> 
> 标签：java, sharepoint, soap, webservice-client

我有一个 jax ws 客户端可以在给定列表名称和视图名称的情况下调用 GetListItems，并且它在我的 Windows 7 机器上本地运行良好。但是，当我部署到我的 Linux 服务器时，相同的服务返回零行。没有例外，我比较了两台机器的肥皂请求，结果相同

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T21:30:12.513

您是否已通过 SharePoint 网站进行身份验证？这里有一篇关于 SharePoint ajax 身份验证的优秀文章：[https ://sharepoint.stackexchange.com/questions/79803/how-to-authenticate-user-in-sharepoint-online-using-javascript](https://sharepoint.stackexchange.com/questions/79803/how-to-authenticate-user-in-sharepoint-online-using-javascript)

从上一个链接，这里是验证代码：

```
var soapDataString = "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'> \
  <soap:Body> \
    <Login xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
      <username>username</username> \
      <password>password</password> \
    </Login> \
  </soap:Body> \
</soap:Envelope>"

// Call web service
$.ajax({
  url: "http://mywebsitename:2355/_vti_bin/authentication.asmx",
  type: "POST",
  dataType: "xml",
  data: soapDataString,
  success: resultsFeedback,
  contentType: "text/xml; charset=\"utf-8\""
});

function resultsFeedback(xData, status) {
   alert(xData);
   alert(status);
} 
```

# mysql - 在mysql中创建两个用外键链接的表，插入、删除和更新

> ID：13875520
> 
> 赞同：0
> 
> 时间：2012-12-14T09:05:56.380
> 
> 标签：mysql

我有一个场景，我必须创建一个包含以下字段的表

部门名称、部门名称、域名、协调员名称、协调员电子邮件

现在，对于每个部门名称，可以有多个 coordinator_name，并且与其对应的 coordinator_email 也不止一个。

我不能在一个表（部门）中执行此操作，因为我无法将两个协调员姓名及其协调员电子邮件存储在 mysql 的单行中。

所以我计划用部门名称（主键），部门名称，域名和部门名称（主键），协调器名称，协调器电子邮件创建一个表（协调器），外键引用部门（部门名称）

现在我如何使用插入语句，以便将数据一次插入两个表中。同样，我如何使用删除和更新语句...

请帮忙...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:13:57.957

只是不清楚你的问题。您写了该表 Coordinator 将以 department_name 作为主键。这怎么可能？您不应该将部门名称作为协调器表中的外键吗？如果我误解了你的问题，我很抱歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:19:21.913

1.  你可以用一张桌子

部门 A - 事工 - 领域 - 协调员 A - 协调员电子邮件 A

部门 A - 事工 - 领域 - 协调员 B - 协调员电子邮件 B

部门 A - 事工 - 领域 - 协调员 C - 协调员电子邮件 C

部门 B - 事工 - 领域 - 协调员 A - 协调员电子邮件 A

如果您只需要部门，您会忽略协调员的信息并按部门分组？除非你特别想要两张桌子？

1.  您可以使用 TRIGGERS 来实现，每次执行 INSERT、UPDATE、DELETE 时都会发生触发器。

2.  将其拆分为两个不同的表

Coordinator：id、name、email、departmentId（Departments.id 的外键） 部门：id、名称、部门、域

然后外键将负责更新和删除（如果部门被删除，将删除所有协调员）

- 编辑

然后首先遍历部门：

从 your_table 中选择 DISTINCT(department_name)

如果然后第二个循环是显示每个部门的所有协调员

SELECT * FROM your_table WHERE department_name = ''

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:35:58.813

首先，不要使用名称作为主键，而是使用 id 作为键。以您的部门为例，创建一个 id（自动递增）并且没有值，以便它自己执行此操作。然后生成一个附加到该部门名称的唯一 ID，如果需要，您可以使用此唯一 ID 稍后调用。但是，您需要此 ID 才能将其他名称与该部门相关联。将部门名称保存在您创建唯一 ID 的一个表中，并在另一个表中包含这些名称以及每个使用的值的此 ID。你需要不止一个查询来做到这一点。

* * *

部门 表：id(primary|auto inc) uid dept_name

协调。table: id(primary|auto inc) uid(from dept. table) min_name coord_name coord_email

```
<?php
    mysql_query("
        insert into `dept` values(
            NULL,
            `$uid`,
            `$dept_name`
        )
    ");
    mysql_query("
        insert into `coord` values (
            NULL,
            `$uid`,
            `$coord_name`,
            `$coord_email`,
            `$ministry_name`
        )
    ");
?> 
```

也许这为你解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:51:00.133

如果您使用 2 个表表“部门”列：id、名称、部门、域

表“协调员”列：id、name、email、departmentId

假设您在 Department 和 Coordinator 表之间有关系。下面的查询应该根据部门名称返回记录

```
select * from Coordinator 
     join Department on Coordinator.departmentId = Department.Id
Where Department.name = '' --- pass any name you want in single quotes 
```

让我知道这是否适合您

# c - 由于 malloc() 导致的 STATUS_ACCESS_VIOLATION？

> ID：13875528
> 
> 赞同：1
> 
> 时间：2012-12-14T09:06:09.680
> 
> 标签：c, exception, memory, status, access-violation

在我正在创建的这个 C 程序中，我在运行时得到一个 STATUS_ACCESS_VIOLATION，我相信这是由于一次初始化所有结构，然后使用 malloc() 来增加它们的大小，导致指向已在使用中的引用内存的指针。这是发生此异常的函数：

```
void process_track(char filename[], struct track *tracks) {
    int i = 0;
    FILE* fp;
    int lines;
    lines = count_file_lines(filename);
    tracks = malloc(lines);
    fp = fopen(filename, "r");
    if (fp == NULL) {
        printf("\n\"%s\" File not found", filename);
        exit(1);
    } else {
        for (i = 0; i < lines; i++) {
            fscanf(fp, "%d %d %d %d\n", &tracks[i].number, &tracks[i].startnode, &tracks[i].endnode, &tracks[i].minutes);
        }
        for (i = 0; i < lines; i++) {
            printf("%d ", tracks[i].number);
            printf("%d ", tracks[i].startnode);
            printf("%d ", tracks[i].endnode);
            printf("%d\n", tracks[i].minutes);
        }
    }
} 
```

具体来说，它发生在以下行：

```
fscanf(fp, "%d %d %d %d\n", &tracks[i].number, &tracks[i].startnode, &tracks[i].endnode, &tracks[i].minutes); 
```

该函数在以下函数中调用（案例 3）：

```
void get_file(char textfilename[], int optnumber) {
    struct node *nodes;
    struct track *tracks;
    struct course *courses;
    struct entrant *entrants;
    struct checkpointdata *checkpointdatas;
    char filename[20]; //Array of char for filename
    printf("Enter the name of the %s text file(with file extension) :", textfilename);
    scanf(" %[a-zA-Z._1-9]", &filename);
    switch (optnumber) {
        case 1:
            process_name(filename);
            break;
        case 2:
            process_node(filename, nodes);
            break;
        case 3:
            process_track(filename, tracks);
            break;
        case 4:
            process_course(filename, courses);
            break;
        case 5:
            process_entrant(filename, entrants);
            break;
        case 6:
            process_checkpointdata(filename, checkpointdatas);
            break;
    }

} 
```

它读第一行很好，但在那之后失败了。由于其他“process_[data]”非常相似，我也尝试了这些。有些可以正常工作，有些也会出现异常，有些会在输出时检索垃圾。

我将如何解决这个问题，或者分配内存以便它不会与预先分配的内存冲突（如果这确实是问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:08:15.567

[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)接受要分配的字节数，而不是元素数。发布的代码仅分配`lines`字节：

```
tracks = malloc(lines); 
```

这对于一个数组来说是不够的，`struct track`并且将导致后续`for`循环写入和读取超出分配的内存块的范围。传递元素的大小以及元素的数量：

```
tracks = malloc(lines * sizeof(*tracks)); 
```

请注意，`tracks`对函数内所做的任何更改仅对该函数可见。由于`tracks`在调用函数后实际上并未使用该参数，因此可以将其替换为局部变量。

请记住，每个都`malloc()`必须有一个[`free()`](http://en.cppreference.com/w/c/memory/free).

# facebook - Facebook graph api 上传后我可以删除图片吗？

> ID：13875530
> 
> 赞同：1
> 
> 时间：2012-12-14T09:06:16.890
> 
> 标签：facebook, facebook-graph-api, cdn

我使用图形 api 将图像上传到朋友页面：

```
FB.api('/' + friendId + '/photos', 'post', {
            message:'Why don’t you surprise your friends with a special Happy Holidays greeting on their timeline?,
            url:picUrl
        }, function(response){

            if (!response || response.error) {}
                console.log('Posting error: ' + response.error.message);
            } else {
                console.log('Post ID: ' + response.id);
            }
        }); 
```

一旦发生这种情况，我就会看到带有类似[http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/-IMAGEID-.jpg的网址的帖子](http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/-IMAGEID-.jpg)

Facebook 是否会立即将图像放在 CDN 上，并且我可以删除服务器上的本地图像？只是想知道，因为我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:05:03.147

是的。图片上传到 Facebook 后，您不再需要将图片保存在服务器上。我个人在几个项目中多次这样做，我让用户生成图像，然后将这些图像上传到相册。

这是一篇关于他们的 CDN 的旧 Facebook 博客文章：[http ://blog.facebook.com/blog.php?post=2406207130](http://blog.facebook.com/blog.php?post=2406207130)

# jquery - 在日历中获取活跃月份

> ID：13875532
> 
> 赞同：5
> 
> 时间：2012-12-14T09:06:27.960
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我想在日历中获取当前活动月份的月份。例如，当前月份（2012 年 12 月）包括（但不显示）11 月 26 日至 30 日，`beforeShowDay`(date) 函数在循环“日期”时包括该日期。我想在一开始就获得 Dec '11' （基于 0 的索引），但找不到如何获得它。

使用`date.getMonth() + 1`不起作用，因为它首先给了我 11 月的月份编号，但我想要 12 月，因为那是日历中选定的月份。当我最终通过“日期”进入循环时，我得到了 12 月，但那时为时已晚。

任何想法如何得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:29:23.870

```
var datePicker = $('#datepicker')
    datePicker.datepicker();
var date  =  datePicker.datepicker('getDate');

alert(date.getMonth()) 
```

将输出 11（当前），尽管这仅在日历日期选择器已初始化或显示后才有效。这意味着如果您使用文档（输入字段）中的标记，您将不会收到任何警报。解决此问题的方法可能是将日期选择器设置为围绕输入​​的 div，并在输入获得或失去焦点时触发日期选择器显示/隐藏。

在这把[小提琴](http://jsfiddle.net/Ugyvf/)上的东西。这有点难看，但它应该作为输入部分的解决方法：

```
var datePicker = $('#datepicker')
    datePicker.datepicker();
    datePicker.hide();

var date  =  datePicker.datepicker('getDate');

alert(date.getMonth());

$("[rel='#datepicker']").focus(function(){
   datePicker.show(); 
});

$("[rel='#datepicker']").blur(function(){
   datePicker.hide(); 
}); 
```

使用以下 HTML：

```
<input rel='#datepicker' type='text'/>
<div id='datepicker'></div>​ 
```

**更新** 您还询问如何获取日历上的月份的`beforeShow`方法。在我看来，你有两种选择。您要么设置了覆盖该`defaultMonth`选项的月份，要么将其设置为当前月份。如果你手动设置了它，你已经有了它，如果你没有，它可能只是与 in 相同的数字`new Date().getMonth()`（在这种情况下，正如你可能猜到的那样，11）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:58:12.907

如果我理解正确，这就是你要找的东西：http: [//jsfiddle.net/kACfV/](http://jsfiddle.net/kACfV/)

```
// Initially, set current date as the active month.
var activeMonth = new Date().getMonth() + 1;

$(function() {
    $("#datepicker").datepicker({ 
        // This is run before beforeShowDay(date).
        onChangeMonthYear: function (year, month, inst) {
            activeMonth = month; // Store active month when month is changed.
        },
        beforeShowDay: function (date) {
            // Do your logic here with activeMonth.
            console.log(date + " > " + activeMonth);
            return [true, ""]
        }
    });
}); 
```

# wpf - 何时应用数据绑定？

> ID：13875537
> 
> 赞同：9
> 
> 时间：2012-12-14T09:06:48.123
> 
> 标签：wpf, data-binding

在对象生命周期的什么时候，绑定第一次被解析？

这是一个简单的问题，但我在书中或通过谷歌都找不到任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T12:57:07.903

其实没那么简单，你不会得到这个问题的直接答案。这取决于上下文。

这里有两个简单的例子：

如果有界属性由不在 ControlTemplate 内的 WPF 控件拥有，则在第一次[调用 UpdateLayout](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout.aspx)方法时，如果已设置 DataContext，则很可能会首次解析绑定。如果 DataContext 没有设置，它会在控件加载后尝试解析：见下面的 DataBindEngine.RequestRun()

```
private void RequestRun()
{
    base.Dispatcher.BeginInvoke(DispatcherPriority.DataBind, new DispatcherOperationCallback(this.Run), false);
    base.Dispatcher.BeginInvoke(DispatcherPriority.Loaded, new DispatcherOperationCallback(this.Run), true);
} 
```

但是，如果有界属性由 ControlTemplate 内的 WPF 控件拥有，则它将在第一次布局传递期间首次解析，这将触发[ApplyTemplate](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.applytemplate.aspx)并导致解析绑定。

这些只是具体的例子，如果你想完全了解绑定机制，你应该使用反射器来看看`MS.Internal.Data.DataBindEngine`和`System.Windows.Data.BindindExpression`类。这些是在依赖属性上使用绑定时负责推送正确数据的类。

# javascript - 使用 JavaScript 检测 IE10 Metro 上的方向变化

> ID：13875539
> 
> 赞同：5
> 
> 时间：2012-12-14T09:06:52.023
> 
> 标签：javascript, internet-explorer-10, orientation-changes

我有一个可变高度 div 固定 div 可以在方向更改时更改高度，所以理想情况下我想通过 javascript 更改 CSS。但是在使用 Surface 的 IE10 Metro 上，我找不到任何处理此问题的 JS 事件？iOS 和 Chrome 都处理得很好。

我尝试过 onorientationchange 和 onresize 无济于事......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T15:31:04.497

不幸的是，IE 10 不支持设备方向事件[0]。他们确实有一个原型[1]，但这对已经发布的浏览器没有帮助。

根据您想要执行的操作，您可以使用方向媒体功能 [2] 在纵向或横向时设置不同的 CSS 高度值。IE[3] 支持此功能

*   [0] [http://caniuse.com/#feat=deviceorientation](http://caniuse.com/#feat=deviceorientation)
*   [1] [http://blogs.msdn.com/b/ie/archive/2012/08/30/exploring-device-orientation-and-motion.aspx](http://blogs.msdn.com/b/ie/archive/2012/08/30/exploring-device-orientation-and-motion.aspx)
*   [2] [http://www.w3.org/TR/css3-mediaqueries/#orientation](http://www.w3.org/TR/css3-mediaqueries/#orientation)
*   [3] [http://msdn.microsoft.com/en-us/library/ie/hh772710(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh772710(v=vs.85).aspx)

# c - 为什么 gcc 数学库效率这么低？

> ID：13875540
> 
> 赞同：30
> 
> 时间：2012-12-14T09:06:54.797
> 
> 标签：c, performance, gcc, fortran, archlinux

当我将一些 fortran 代码移植到 c 时，令我惊讶的是，使用 ifort（intel fortran 编译器）编译的 fortran 程序和使用 gcc 编译的 c 程序之间的大部分执行时间差异来自对三角函数的评估（`sin`，`cos`）。这让我感到惊讶，因为我曾经相信这个[答案](https://stackoverflow.com/a/2284932/1809545)所解释的，正弦和余弦等函数是在微处理器内部的微码中实现的。

为了更明确地发现问题，我在 fortran 中制作了一个小型测试程序

```
program ftest
  implicit none
  real(8) :: x
  integer :: i
  x = 0d0
  do i = 1, 10000000
    x = cos (2d0 * x)
  end do
  write (*,*) x
end program ftest 
```

在`intel Q6600`处理器上，`3.6.9-1-ARCH x86_64 Linux` 我得到了`ifort version 12.1.0`

```
$ ifort -o ftest ftest.f90 
$ time ./ftest
  -0.211417093282753     

real    0m0.280s
user    0m0.273s
sys     0m0.003s 
```

而`gcc version 4.7.2`我得到

```
$ gfortran -o ftest ftest.f90 
$ time ./ftest
  0.16184945593939115     

real    0m2.148s
user    0m2.090s
sys     0m0.003s 
```

这几乎是10倍的差异！我是否仍然可以相信 gcc 的实现`cos`是微处理器实现的包装器，其方式与英特尔实现中可能完成的方式类似？如果这是真的，瓶颈在哪里？

**编辑**

根据评论，启用的优化应该会提高性能。我的观点是优化不会影响库函数……这并不意味着我不在非平凡的程序中使用它们。但是，这里有两个额外的基准（现在在我的家用电脑上`intel core2`）

```
$ gfortran -o ftest ftest.f90
$ time ./ftest
  0.16184945593939115     

real    0m2.993s
user    0m2.986s
sys     0m0.000s 
```

和

```
$ gfortran -Ofast -march=native -o ftest ftest.f90
$ time ./ftest
  0.16184945593939115     

real    0m2.967s
user    0m2.960s
sys     0m0.003s 
```

您（评论员）想到了哪些特定的优化？在这个特定示例中，编译器如何利用多核处理器，其中每次迭代都取决于前一次的结果？

**编辑 2**

Daniel Fisher 和 Ilmari Karonen 的基准测试让我认为问题可能与 gcc 的特定版本（4.7.2）有关，也可能与我在计算机上使用的特定版本（Arch x86_64 Linux）有关。所以我`intel core i7`用`debian x86_64 Linux`,`gcc version 4.4.5`和`ifort version 12.1.0`

```
$ gfortran -O3 -o ftest ftest.f90
$ time ./ftest
  0.16184945593939115     

real    0m0.272s
user    0m0.268s
sys     0m0.004s 
```

和

```
$ ifort -O3 -o ftest ftest.f90
$ time ./ftest
  -0.211417093282753     

real    0m0.178s
user    0m0.176s
sys     0m0.004s 
```

对我来说，这是一个非常可接受的性能差异，这绝不会让我问这个问题。看来我将不得不在 Arch Linux 论坛上询问这个问题。

但是，对整个故事的解释仍然非常受欢迎。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T16:10:05.663

这主要是由于数学库的差异。需要考虑的几点：

*   是的，带有 x87 单元的 x86 处理器具有 fsin 和 fcos 指令。但是，它们是用微码实现的，没有什么特别的理由说明它们必须比纯软件实现更快。
*   GCC 没有它自己的数学库，而是使用系统提供的一个。在 Linux 上，这通常由 glibc 提供。
*   32 位 x86 glibc 使用 fsin/fcos。
*   x86_64 glibc 使用使用 SSE2 单元的软件实现。长期以来，这比只使用 x87 指令的 32 位 glibc 版本慢*很多。*但是，已经（最近）进行了改进，因此根据您拥有的 glibc 版本，情况可能不再像以前那样糟糕。
*   英特尔编译器套件拥有非常快速的数学库 (libimf)。此外，它还包括矢量化的超越数学函数，通常可以进一步加速这些函数的循环。

# c++ - VS2010 和 VS2012 和 C++11 错误 C2059: syntax error : '...' 如何解决？

> ID：13875542
> 
> 赞同：0
> 
> 时间：2012-12-14T09:07:04.523
> 
> 标签：c++, visual-studio-2010, c++11, visual-studio-2012, variadic-templates

我尝试编译[简单的 C++11 代码](http://ideone.com/AlDoKA)（我主要针对 vs2010 以及作为次要选项 vs 2012）[他们说它](https://stackoverflow.com/a/13792100/1056328)应该编译并且[可以在一些现代编译器上编译](http://liveworkspace.org/code/KKkbu$1) 所以我想知道如何编译包含以下结构的代码：

```
struct C {
    A *_first__;
    B *_second__;
     C(A * _first__, B * _second__):_first__(_first__), _second__(_second__) {
    } template < typename K, typename ... T > static auto _a_caller__(K * k, T && ... args)->decltype(k->a(std::forward < T > (args) ...)) {
    return k->a(std::forward < T > (args)...);
    }
    template < typename...T > auto a(T &&...args)->decltype(_a_caller__(_first__, std::forward < T > (args)...)) {
        return _a_caller__(_first__, std::forward < T > (args)...);
    }
    template < typename...T > auto a(T &&...args)->decltype(_a_caller__(_second__, std::forward < T > (args)...)) {
        return _a_caller__(_second__, std::forward < T > (args)...);
    }
    template < typename K, typename...T > static auto _b_caller__(K * k, T && ... args)->decltype(k->b(std::forward < T > (args) ...)) {
        return k->b(std::forward < T > (args)...);
    }
    template < typename...T > auto b(T &&...args)->decltype(_b_caller__(_first__, std::forward < T > (args)...)) {
        return _b_caller__(_first__, std::forward < T > (args)...);
    }
    template < typename...T > auto b(T &&...args)->decltype(_b_caller__(_second__, std::forward < T > (args)...)) {
        return _b_caller__(_second__, std::forward < T > (args)...);
    }
}; 
```

在 vs 2010 中，如果在 vs2012 中不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:10:14.250

VS2010 和 VS2012 都不支持可变参数模板：http: [//msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx) VS2012 CTP 支持它们：[http://blogs.msdn。 com/b/vcblog/archive/2012/11/02/visual-cc-11-and-the-future-of-c.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/11/02/visual-c-c-11-and-the-future-of-c.aspx)

如果您打算使用 CTP，另请参阅[VS 2012 中的可变参数模板（Visual C++ 2012 年 11 月 CTP） 。](https://stackoverflow.com/questions/13238408/variadic-template-in-vs-2012-visual-c-november-2012-ctp)

# wcf - 如何将对象列表转换为流

> ID：13875543
> 
> 赞同：4
> 
> 时间：2012-12-14T09:07:04.433
> 
> 标签：wcf, stream

嗨，我正在构建一个 wcf 服务，我试图让它作为 StreamedResponse 发送请求。现在我的服务曾经返回一个对象列表，现在应该只返回一个流。我的问题是如何转换这个列表将对象作为流发送，以便正确发送。我正在用 C# 编写我的 wcf 服务。谢谢您的时间

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:21:02.243

我建议您将列表序列化为 JSON 或 XML，然后将其转换为流。假设您的列表包含字符串，这是一个将字符串列表序列化为 json 并将其加载到内存流中的示例。我希望这对你有一些教育价值，让你更好地理解这种编程语言的可能性:)

```
List<string> listOfStrings = new List<string>();
listOfStrings.Add("Hello");
listOfStrings.Add("World!");
listOfStrings.Add("Foo");
listOfStrings.Add("bar");

// this is of datatype string
var json = new JavaScriptSerializer().Serialize(listOfStrings);

// this is an array of datatype byte
var bytes = System.Text.Encoding.UTF8.GetBytes(json);

// your stream
var memStream = new MemoryStream(bytes);

// TODO: Add code for sending your memory stream 
```

# internet-explorer-10 - IE10中asp.net 2.0的问题

> ID：13875549
> 
> 赞同：0
> 
> 时间：2012-12-14T09:07:22.607
> 
> 标签：internet-explorer-10

我们有一个使用框架 2.0 的 vs2005 开发的网站。该网站在所有浏览器中都能正常工作，除非 IE10。response.redirect 不起作用，某些按钮会引发 javascript 错误。如果将资源管理器模式强制为 IE10 兼容性视图可以正常工作，但我们不想告诉所有用户手动强制。有人有同样的问题吗？非常感谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:15:50.217

我通过将 App_Browsers 映射插入到根映射中解决了类似的问题，其中包含浏览器文件 BrowserFile.browser 和代码：

```
 <browser refID="Default">
        <capabilities>
            <!-- To avoid wrong detections of e.g. IE10 -->
            <capability name="ecmascriptversion" value="3.0" />
        </capabilities>
    </browser> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:03:33.390

试试看：

在 IE10 中打开您的网站

> 工具 > 兼容性视图设置 > 单击添加到您的域网站 > 关闭

重新加载您的网站。

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:20:30.907

.NET 2.0 和 .NET 4 附带的浏览器定义文件中存在一个错误，即它们包含特定范围浏览器版本的定义。但是某些浏览器（如 IE 10）的版本不再在这些范围内。因此，ASP.NET 将它们视为未知浏览器，默认为下层定义，这有一定的不便，比如它不支持 JavaScript、CSS 等特性。

尝试以下链接中给出的修复。对我来说工作得很好。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# c# - 集合在 asp.net MVC 4 中被修改错误

> ID：13875550
> 
> 赞同：1
> 
> 时间：2012-12-14T09:07:29.277
> 
> 标签：c#, asp.net-mvc, collections, error-handling

我试图在我的 ASP.NET MVC 4 应用程序中找到以下错误的来源。

```
Exception type: System.InvalidOperationException
Exception message: Collection was modified; enumeration operation may not execute

Stack trace: at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
at System.Collections.Generic.Dictionary`2.Enumerator.MoveNext()
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
at System.Web.Mvc.MvcHandler.RemoveOptionalRoutingParameters()
at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory)
at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state)
at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

问题是我有一个集合的所有（少数）地方都在迭代，我没有以任何方式改变集合结构。堆栈跟踪没有太大帮助，因为它不包含对我的代码的任何引用。

我已经阅读了很多关于这个主题的帖子，基本上这就是他们提到的解决方案。有人知道此类问题的其他解决方案吗？有关如何获取有关错误的更多信息的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:49:37.193

nrod，为了完整起见，最好发布您的代码。

但是，从您的堆栈跟踪中，我已经可以看到（MVC）框架（例如 System.Web）中发生了错误。Í如果堆栈跟踪指向您自己的代码，则问题通常是由于在迭代集合时（例如在 foreach 循环中）操作集合（例如删除、添加）。一些建议是以相反的方式进行迭代或在您的集合上使用 .ToList() ，请参阅： [集合已修改；枚举操作可能无法执行](https://stackoverflow.com/questions/604831/collection-was-modified-enumeration-operation-may-not-execute) [Collection 被修改；枚举操作可能无法执行 - 为什么？](https://stackoverflow.com/questions/4536090/collection-was-modified-enumeration-operation-may-not-execute-why)

但是，您的堆栈跟踪表明问题出在您的代码对（MVC）框架的调用。此类问题可能是由于在共享自定义实现的 IRouteHandler.GetHttpHandler() 中使用实例成员变量引起的。这是因为实例成员不是线程安全的，如 MSDN 中所述：http: [//msdn.microsoft.com/en-us/library/system.web.http.webhost.httpcontrollerroutehandler%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.http.webhost.httpcontrollerroutehandler%28v=vs.108%29.aspx)

您的堆栈跟踪表明您确实在使用成员变量。当执行大量并发调用时（例如在生产环境中），可能会发生错误。

您可以通过重构代码以不使用任何实例成员来解决此问题。这可能会导致代码有些单一和重复。例如，当重构为仅使用局部变量时。但是您也可以尝试将使用重构为公共静态成员或静态函数，因为它们是线程安全的。

在自己解决了这个问题之后，我决定最好总是对新代码进行一些负载测试，否则这些问题只会在生产中检测到！

# html - 允许用户将 kml 导入诺基亚定位应用程序

> ID：13875551
> 
> 赞同：1
> 
> 时间：2012-12-14T09:07:31.507
> 
> 标签：html, kml, kmz, here-api

我只是想知道是否可以允许用户打开或加载他们自己的 KML/KMZ 文件到移动 html5 版本的 Here Maps 中，并让他们通过 api 中包含的图层按钮激活或停用 kml 图层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:58:10.650

目前看来这是不可能的。addLayer **()**方法可用于添加叠加层，如下所示，但未设置为读取 KML。如果您正在考虑加载 KML，您可能会更好地使用 Maps API for JavaScript，如本示例所示[http://developer.here.net/apiexplorer/examples/api-for-js/data-可视化/显示数据-on-map.html](http://developer.here.net/apiexplorer/examples/api-for-js/data-visualization/display-data-on-map.html)

或者，您可以查看[jHERE](http://jhere.net/)库，它确实从底层库中公开了 KML 支持。

由于 Mobile HMTL5 库不提供折线实现，因此很难将 KML 路线添加到地图，但可以使用 JavaScript 库加载一组标记的数据，然后使用添加标记addPOI **()**方法，但这似乎相当复杂。

这是一个基于按钮按下的工作覆盖：

```
<!doctype html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=100">
    <!-- Definitions of mobile-friendly documents e.g. for BlackBerry: -->
    <meta name="HandheldFriendly" content="True">
    <!-- Definitions of mobile-friendly documents for Microsoft Browser: -->
    <meta name="MobileOptimized" content="width">
    <!-- iOS viewport definitions: -->
    <!--meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- disable BlackBerry UI events -->
    <meta name="touch-event-mode" value="native">
    <meta name="cursor-event-mode" value="native">
    <!-- disables address sniffing -->
    <meta name="format-detection" content="telephone=no"/>
    <meta name="format-detection" content="address=no"/>

    <link rel="stylesheet" href="http://api.maps.nokia.com/mobile/latest/lib/mh5.css" type="text/css">
    <link rel="stylesheet" href="http://api.maps.nokia.com/mobile/latest/lib/colors.css" type="text/css">
    <style>
        .mh5_ProgressBar {
            width: 300px;
            left: 20px;
            position: relative;
        }
        .mh5_Map {
            height: auto;
            -webkit-box-flex: 1;
            -ms-flex:         1 0 auto;
            box-flex:         1;
        }
    </style>
</head>
<body>
        <div id="mapContainer" style="height: 480px; width: 320px;"></div>

        <script src="http://api.maps.nokia.com/mobile/1.0.0/lib/mh5.js"></script>

    <script type="text/javascript">
           nokia.mh5.assetsPath = "../../lib/";
        nokia.mh5.appId = "demo_wwzrmoloHAFVvyW";
        nokia.mh5.appCode = "Vgl_08RQWnjJo92Lw1F_uQ";

        var progressObject,
            page = new nokia.mh5.ui.Page({
                children: ["controls",  "map"],
                layout: {
                    type: nokia.mh5.ui.RowLayout
                },
                visible: true,
                controls: {
                    control: nokia.mh5.ui.Container,
                    children: [ "show" ],
                    layout: {
                        type: nokia.mh5.ui.ColumnLayout
                    },

                    show: {
                        control: nokia.mh5.ui.Button,
                        text: "Show",
                        disabled: false,
                        onClick: function() {
                            page.map.addLayer(oldBerlin, "OLD_BERLIN");
                        }
                    }
                },

                map: {
                    control: nokia.mh5.components.Map,
                    center: {
                        longitude: 13.405,
                        latitude: 52.515
                    },
                    //enable either box or zoom
                    zoom: 13,
                    schema: "normal.day"
                }
            });

        document.body.appendChild(page.root);

      var oldBerlin = function(column,row,z){
        var zoom = 0;

        while (z > 1){
                zoom++;
                z = z /2;
        }

        if (((zoom == 12) &&  ( row != 1343  || column != 2200))||
            ((zoom ==13) &&  ( row < 2686 || column < 4400 || row >   2687 || column > 4401 ))||
            ((zoom == 14) &&  ( row <  5372 || column < 8800 || row >   5375 || column > 8803  ))||
            ((zoom  == 15)  &&  ( row  < 10744 || column < 17601 || row >   10750 || column > 17607 ))) {
                return "http://developer.here.net/apiexplorer/examples/res/old_berlin_overlay_tiles/blank.png";
        }

        return "http://developer.here.net/apiexplorer/examples/res/old_berlin_overlay_tiles/"+ zoom + "/"+ row+ "/" + column + ".png";
     };

    </script>

</body>
</html> 
```

# mysql - CakePHP 有并且属于许多不存在的条件

> ID：13875552
> 
> 赞同：0
> 
> 时间：2012-12-14T09:07:45.680
> 
> 标签：mysql, sql, cakephp

```
$conditions = Array
(
  [table] => products_pages
  [alias] => ProductsPage
  [type] => inner
  [foreignKey] => 
  [conditions] => Array
  (
   [0] => ProductsPage.product_id = Product.id
  )
) 
```

我正在尝试设置 NOT EXISTS 条件，例如以下 SQL 语句：

```
SELECT * FROM products_pages,products 
WHERE NOT EXISTS (SELECT id 
                  from products_pages 
                  where products_pages.product_id = products.id) 
```

所以基本上选择 products_pages 表中不存在的任何产品。

为 CakePHP 格式化 SQL 语句并在此处替换它的正确方法是什么：

[条件] => 数组（ [0] => （这里插入 SQL 的正确方法是什么？）

非常感谢您的帮助，我一直在尝试解决这个问题大约 5 个小时，但没有运气。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T09:26:51.360

`query`如果您找不到使用 CakePHP 的方法， 您可以随时使用：http: [//book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-query](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-query)

在这种情况下，安全性不会受到影响，因为您没有使用任何输入。

无论如何，简单的事情就是多一步完成：

```
//selecting the products in the productcs_pages table
$productsWithPages = /* query to get them*/

//getting an array of IDs
$productsWidthPagesIds = Hash::extract($productsWithPages, '{n}.Product.id');

//doing the NOT IN to select products without pages
$productsWithoutPages= $this->Product->find('all', 
        array('conditions' => 
             array( 'NOT' => array('Product.id' => $productsWidthPagesIds )
        )
); 
```

# java - 如何检查目录是否已挂载且可用？

> ID：13875556
> 
> 赞同：0
> 
> 时间：2012-12-14T09:08:02.457
> 
> 标签：java, linux, jakarta-ee, network-programming, mount

服务器上的文件夹挂载如下：

root@ubuntusrv:/mnt# mount -t cifs //192.168.14.12/share -o auto,user,iocharset=utf8,uid=1001,umask=000,username=john,password=smith /mnt/target

或者：

root@ubuntusrv:/mnt# mount -t cifs //192.168.14.12/share -o username=john,password=smith /mnt/target

如何在 Java Web 应用程序中检查文件夹 /mnt/target 是否已安装且现在可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:10:38.937

答案：

```
File f = new File("/mnt/target/some_existing_dir);
f.exists(); 
```

不依赖于目录内容的东西可能需要依赖本机/操作系统的代码。您始终可以执行 mount 命令并过滤输出以查明您的目录是否已挂载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:32:25.290

Better is to check the folder size, as directory into where them remote file-system is mounted exists anyway. Better to check the size if the size is more or less the expected one as mounted folder is usually large for additional storage.

[Link on checking folder size](https://stackoverflow.com/questions/2149785/size-of-folder-or-file):

# jquery - jQuery 验证和 jqTransform 问题

> ID：13875558
> 
> 赞同：1
> 
> 时间：2012-12-14T09:08:10.807
> 
> 标签：jquery, validation, jqtransform

我在获取已使用 jqTransform 设置样式以使用 jQuery 验证插件进行验证的复选框、单选按钮和选择时遇到问题。

有没有人有这方面的经验？这是我可以用这个`addMethod`功能做的吗？

这是我要验证的表单的链接：

[http://www.kriskrosdemo.com/index.cfm/submit-spring-offers/](http://www.kriskrosdemo.com/index.cfm/submit-spring-offers/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:54:40.083

该页面抛出一​​个错误说`Uncaught TypeError: Object [object Object] has no method 'jqTransform'`。

无论如何，问题在于 jqTransform 隐藏了真正的复选框、收音机等，并用样式化的 div 替换它们等等。jQuery Validate 默认只验证*可见*的东西。这可以通过在 jQuery Validate 初始化中添加一个选项来解决：

```
$('#myform').validate({
  ignore:'',
  //your options
}); 
```

该忽略选项的默认值为`:hidden`，因此将其设置为`''`应该可以解决您的问题！

# javascript - 如何在循环中创建 JS 类对象

> ID：13875559
> 
> 赞同：0
> 
> 时间：2012-12-14T09:08:14.333
> 
> 标签：javascript

我在 JS*作业*中有一个类，现在我想要一种简单的方法来在 for 循环中创建它的对象，我尝试这样做的方法是：

```
 for(var i=1;i<=jobsCount;i++)
         {
          var eval("job"+i)=new job();

         } 
```

但是这种语法给了我一个错误，因为非法的生命手边分配，有没有简单的方法可以做到这一点，？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:09:35.300

如果你想在全局上下文中动态创建变量，你可以这样做：

```
window['job'+i]=new job(); 
```

但我建议使用数组来避免混乱全局上下文：

```
var jobs = [];
for(var i=1; i<jobsCount; i++){ // why starting at 1 ? shouldn't it be <= ?
      jobs[i] = new job();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:09:57.047

```
var jobs = [];
for(var i=1;i<jobsCount;i++)
{
    jobs[i]=new job();

} 
```

# ember.js - 使用 ember-data 和 non-rest 操作更新多个对象

> ID：13875563
> 
> 赞同：5
> 
> 时间：2012-12-14T09:08:21.663
> 
> 标签：ember.js, ember-data

假设我有一个拥有许多产品**的****客户**

 **该 api 有一个**PUT: /customers/:id/cancel**取消客户并取消所有产品，然后返回客户和产品以进行侧载：

```
{
  customer: {
    id: 1,
    name: "Customer Name",
    canceled: true,
    products: [1, 2] },

  products: [
    {id: 1, customer_id: 1, name: "Product 1", canceled: true},
    {id: 2, customer_id: 1, name: "Product 2", canceled: true}
  ]
} 
```

我将如何：

1.  对客户采取该行动？
2.  更新 Ember 商店中的所有对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T18:06:43.310

对于您问题的第 1 部分，

*   你会想在商店里找到它`var customer = store.find('customer', 1);`
*   然后告诉它删除`customer.destroyRecord();`
*   最后提交删除`customer.save();`

对于第 2 部分。删除产品，您必须在 forEach 循环中手动删除它们，隐藏在`Ember.run.once`. 中，因为在游戏的这个阶段，ember 数据中没有级联删除。

这是一个顶级删除的示例，因此您需要遵循相同的逻辑，但您需要遵循相同的逻辑，`products`然后使用[`.then`](http://emberjs.com/guides/routing/asynchronous-routing/)删除连接的客户。

*   单层示例： http: [//jsbin.com/samegiqe/1/edit ?js,output](http://jsbin.com/samegiqe/1/edit?js,output)
*   已连接 StackOverflow 以供进一步阅读：[如何在不清除本地存储的情况下删除与 ember 模型关联的所有记录？](https://stackoverflow.com/questions/19257758/how-to-delete-all-records-associated-with-an-ember-model-without-clearing-local)

*   复杂的 mixin 来解决这个问题：http: [//jsbin.com/hupabovo/1/edit](http://jsbin.com/hupabovo/1/edit)

*   其连接的 StackOverflow：[使用 ember-data 删除关联模型](https://stackoverflow.com/questions/15177723/delete-associated-model-with-ember-data)

希望这能满足您的要求。干杯!**

# python - Python CSV 文件 UTF-16 到 UTF-8 打印错误

> ID：13875566
> 
> 赞同：3
> 
> 时间：2012-12-14T09:08:31.790
> 
> 标签：python, unicode, utf-8, cjk, utf-16

网上有很多关于这个问题的话题，但我似乎找不到我的具体案例的答案。

我有一个 CSV 文件。我不确定对它做了什么，但是当我尝试打开它时，我得到：

> UnicodeDecodeError：“utf8”编解码器无法解码位置 0 的字节 0xff：无效的起始字节

这是一个完整的`Traceback`：

```
Traceback (most recent call last):
  File "keywords.py", line 31, in <module>
    main()
  File "keywords.py", line 28, in main
    get_csv(file_full_path)
  File "keywords.py", line 19, in get_csv
    for row in reader:
UnicodeEncodeError: 'ascii' codec can't encode character u'\u5a07' in position 10:    ordinal    not in range(128) 
```

在 Stack Overflow 的帮助下，我打开了它：

`reader = csv.reader(codecs.open(file_full_path, 'rU', 'UTF-16'), delimiter='\t', quotechar='"')`

现在的问题是，当我阅读文件时：

```
def get_csv(file_full_path):
    import csv, codecs
    reader = csv.reader(codecs.open(file_full_path, 'rU', 'UTF-16'), delimiter='\t', quotechar='"')
    for row in reader:
        print row 
```

我被亚洲符号困住了：

> UnicodeEncodeError：'ascii' 编解码器无法在位置 10 编码字符 u'\u5a07'：序数不在范围内（128）

我已经在包含该字符的字符串上尝试了`decode`'encode' `unicode()`，但它似乎没有帮助。

```
for row in reader:
    #decoded_row = [element_s.decode('UTF-8') for element_s in row]
    #print decoded_row
    encoded_row = [element_s.encode('UTF-8') for element_s in row]
    print encoded_row 
```

在这一点上，我真的不明白为什么。如果我

```
>>> print u'\u5a07'
娇 
```

或者

```
>>> print '娇'
娇 
```

有用。同样在终端中，它也可以工作。我已经检查了终端和 Python shell 上的默认编码，它到处都是 UTF-8。它可以轻松打印该符号。我认为这与我`codecs`使用 UTF-16 打开文件有关。

我不知道从这里去哪里。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:22:27.400

该`csv`模块*无法*处理 Unicode 输入。它在其[文档页面](http://docs.python.org/2/library/csv.html)上特别说明：

> **注意：**此版本的`csv`模块不支持 Unicode 输入。此外，目前还有一些关于 ASCII NUL 字符的问题。因此，为了安全起见，所有输入都应该是 UTF-8 或可打印的 ASCII；

您需要将 CSV 文件转换为 UTF-8 以便模块可以处理它：

```
with codecs.open(file_full_path, 'rU', 'UTF-16') as infile:
    with open(file_full_path + '.utf8', 'wb') as outfile:
        for line in infile:
            outfile.write(line.encode('utf8')) 
```

或者，您可以使用命令行实用程序[`iconv`](http://en.wikipedia.org/wiki/Iconv)为您转换文件。

然后使用该重新编码的文件来读取您的数据：

```
 reader = csv.reader(open(file_full_path + '.utf8', 'rb'), delimiter='\t', quotechar='"')
 for row in reader:
     print [c.decode('utf8') for c in row] 
```

请注意，这些列需要手动解码为 un​​icode。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T09:21:29.043

当您尝试将 unicode 字符转换为 8 位序列时，会出现编码错误。因此，您的第一个错误不是实际*读取*文件时出现的错误，而是稍后发生的错误。

您可能会收到此错误，因为 Python 2 CSV 模块希望文件处于二进制模式，而您打开它时它会返回 unicode 字符串。

将您的开口更改为：

```
reader = csv.reader(open(file_full_path, 'rb'), delimiter='\t', quotechar='"') 
```

你应该没事。甚至更好：

```
with open(file_full_path, 'rb') as infile:
    reader = csv.reader(infile, delimiter='\t', quotechar='"')
    # CVS handling here. 
```

但是，您不能使用 UTF-16（或 UTF-32），因为分隔字符是 UTF-16 中的两个字节字符，它无法正确处理，因此您需要将其转换为 UTF-8第一的。

# c++ - 递归模板类型

> ID：13875568
> 
> 赞同：3
> 
> 时间：2012-12-14T09:08:35.377
> 
> 标签：c++

我想让下面的代码片段工作

```
typedef boost::function<result_type ()> functor_type;
typedef boost::variant<int, functor_type> result_type; 
```

两种类型相互依赖，如何打破循环依赖？

* * *

动机

基本上，我想在 C++ 中实现尾调用，就像这样

```
template<typename ResultT>
struct TailCall
{
    typedef ResultT result_type;
    typedef boost::function<ret_type ()> continuation_type;
    typedef boost::variant<result_type, continuation_type> ret_type;

    TailCall(const continuation_type& init) : next(init) {}

    result_type operator()()
    {
         while (true) {
            ret_type r = next();
            result_type *result = boost::get<result_type>(&r);
            if (result)
                return *result;
            else
                next = boost::get<continuation_type>(r);
         }
    }

private:
    continuation_type next;
};

TailCall<int>::ret_type fibonacci_impl(int term, int val, int prev)
{
    if (term == 0) return prev;
    if (term == 1) return val;
    return boost::bind(fibonacci_impl, term-1, val+prev, val);
}

int fibonacci(int index)
{
    TailCall<int> fib(boost::bind(fibonacci_impl, index, 1, 0));
    return fib();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:15:56.717

请看一看`boost::recursive_variant`。

[Boost.Spirit](http://www.boost.org/doc/libs/release/libs/spirit/doc/html/index.html)示例中的一个示例：

```
 struct mini_xml;

    typedef
        boost::variant<
            boost::recursive_wrapper<mini_xml>
          , std::string
        >
    mini_xml_node;

    struct mini_xml
    {
        std::string name;                           // tag name
        std::vector<mini_xml_node> children;        // children
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:44:10.993

Boost 变体有两个特定的实用程序（recursive_variant 和 recursive_wrapper）来做到这一点。

这是一个使用 recursive_wrapper 的示例

```
struct functor_type;

typedef boost::variant<int,
            boost::recursive_wrapper<functor_type> > result_type;

struct functor_type : public boost::function<result_type()> {
      using boost::function<result_type()>::boost::function<result_type()>;
}; 
```

# java - 高效的文本处理 Java

> ID：13875570
> 
> 赞同：1
> 
> 时间：2012-12-14T09:08:45.360
> 
> 标签：java, performance

我创建了一个应用程序来处理日志文件，但是当文件数量 = ~20 时遇到了一些瓶颈

问题来自一种特定的方法，该方法平均需要大约一秒钟才能大致完成，并且您可以想象，当它需要完成 > 50 次时，这是不切实际的

```
private String getIdFromLine(String line){
    String[] values = line.split("\t");
    String newLine = substringBetween(values[4], "Some String : ", "Value=");
     String[] split = newLine.split(" ");
     return split[1].substring(4, split[1].length());
}

private String substringBetween(String str, String open, String close) {
      if (str == null || open == null || close == null) {
          return null;
      }
      int start = str.indexOf(open);
      if (start != -1) {
          int end = str.indexOf(close, start + open.length());
          if (end != -1) {
              return str.substring(start + open.length(), end);
          }
      }
      return null;
  } 
```

一行来自读取一个非常有效的文件，因此除非有人询问，否则我觉得不需要发布该代码。

无论如何，有没有改善这个的性能？

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:35:46.243

有几件事可能有问题：

1.  无论您是否意识到，您*都在*使用正则表达式。to 的参数`String.split()`被视为正则表达式。使用`String.indexOf()`几乎肯定会是一种更快的方法来找到您想要的字符串的特定部分。正如 HRgiger 所指出的，Guava 的分离器是一个不错的选择，因为它就是这样做的。

2.  你分配了一堆你不需要的东西。根据您的行有多长，您可能会创建大量不需要的额外`String`s 和`String[]`s（以及垃圾收集它们）。避免的另一个原因`String.split()`。

3.  我还建议您使用 if 所做的所有这些东西，`String.startsWith()`只是因为它更容易阅读。`String.endsWith()``indexOf()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:12:59.027

我会尝试使用正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:38:40.903

此代码中的主要问题之一是“ `split`”方法。比如这个：

```
 private String getIdFromLine3(String line) {
        int t_index = -1;
        for (int i = 0; i < 3; i++) {
            t_index = line.indexOf("\t", t_index+1);
            if (t_index == -1) return null;
        }
        //String[] values = line.split("\t");
        String newLine = substringBetween(line.substring(t_index + 1), "Some String : ", "Value=");
//        String[] split = newLine.split(" ");
        int p_index = newLine.indexOf(" ");
        if (p_index == -1) return null;
        int p_index2 = newLine.indexOf(" ", p_index+1);
        if (p_index2 == -1) return null;
        String split = newLine.substring(p_index+1, p_index2);

//        return split[1].substring(4, split[1].length());
        return split.substring(4, split.length());
    } 
```

**UPD**：它***可能***快 3 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:18:04.463

我会建议使用[VisualVM](http://visualvm.java.net/)在 oprimisation 之前找到瓶颈。
如果您需要应用程序的性能，那么无论如何您都需要进行分析。

作为优化，我会制作一个自定义循环来替换你`substringBetween`的方法并摆脱多次`indexOf`调用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T09:23:02.887

[谷歌番石榴分离器](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)也很快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T09:49:59.827

您是否可以尝试使用正则表达式并发布结果，仅供比较：

```
Pattern p = Pattern.compile("(Some String : )(.*?)(Value=)"); //remove first and last group if not needed (adjust m.group(x) to match

@Test
public void test2(){
    String str = "Long java line with Some String : and some object with Value=154345 ";
    System.out.println(substringBetween(str));      
}

private String substringBetween(String str) {       
    Matcher m = p.matcher(str);
    if(m.find(2)){
        return m.group(2);          
    }else{
        return null;
    }
} 
```

如果这更快找到一个结合了这两个函数的正则表达式

# android - 应用程序已安装但未在我的 android 设备中说明

> ID：13875572
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:09:09.453
> 
> 标签：android

应用程序安装成功但没有在模拟器上启动我正在使用服务，可能是我在这里启动服务时做错了我正在放置清单和控制台详细信息任何一个帮助启动我的应用程序

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        android:installLocation="auto"
        package="fi.harism.wallpaper.flowers"
        android:versionCode="10"
        android:versionName="3.2" >

        <uses-sdk android:minSdkVersion="8" />

        <uses-feature android:glEsVersion="0x00020000" />
        <uses-feature android:name="android.software.live_wallpaper" />

        <application
            android:icon="@drawable/ic_application"
            android:label="@string/app_name" >
            <service
                android:name=".FlowerService"
                android:description="@string/description"
                android:label="@string/app_name"
                android:permission="android.permission.BIND_WALLPAPER" >
                <intent-filter>
                    <action android:name="android.service.wallpaper.WallpaperService" />
                </intent-filter>

                <meta-data
                    android:name="android.service.wallpaper"
                    android:resource="@xml/flowers" />
            </service>

            <activity
                android:name=".prefs.FlowerPreferenceActivity"
                android:exported="true"
                android:label="@string/preferences_name" />
        </application>

    </manifest>

    [2012-12-14 14:33:30 - flowers] Android Launch!
    [2012-12-14 14:33:30 - flowers] adb is running normally.
    [2012-12-14 14:33:30 - flowers] No Launcher activity found!
    [2012-12-14 14:33:30 - flowers] The launch will only sync the application package on the device!
    [2012-12-14 14:33:30 - flowers] Performing sync
    [2012-12-14 14:33:30 - flowers] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'AVD_4.0'
    [2012-12-14 14:33:30 - flowers] Uploading flowers.apk onto device 'emulator-5554'
    [2012-12-14 14:33:31 - flowers] Installing flowers.apk...
    [2012-12-14 14:33:37 - flowers] Success!
    [2012-12-14 14:33:37 - flowers] \flowers\bin\flowers.apk installed on device
    [2012-12-14 14:33:37 - flowers] Done! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:22:19.973

在 Intent 过滤器中应用此代码。

```
 <activity
    android:name=".prefs.FlowerPreferenceActivity"
    android:exported="true"
    android:label="@string/preferences_name"> 
 <intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />    
 </intent-filter>
</activity> 
```

# c# - 在静态类中定义通用列表属性

> ID：13875579
> 
> 赞同：6
> 
> 时间：2012-12-14T09:09:24.940
> 
> 标签：c#, list, generics

我需要在运行时使用静态类来保存一些简单的值：

```
public static class Globals
{
    public static string UserName
    { get; set; }

     ...more properties
} 
```

我现在需要存储一个对象列表 - 根据我定义的类键入。这个 List 将被重新用于不同的 Object 类型，所以我想把它定义为 Generic。
这就是我卡住的地方：如何在静态类中定义一个属性，该属性将在应用程序执行的不同时间包含不同类型的列表？

需要是这样的：

```
 public List<T> Results {get; set;} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T09:13:13.860

您需要将您的类定义为[通用](http://msdn.microsoft.com/en-us/library/sz6zd40f%28v=vs.80%29.aspx)类。

```
public static class Globals<T>
{
    public static string UserName
    { get; set; }
    public static List<T> Results { get; set; }

} 
```

稍后您可以像这样使用它：

```
Globals<string>.Results = new List<string>(); 
```

*此外，您的财产`Results`必须是私有的。您可以考虑公开您的方法以与列表交互，而不是通过属性公开列表。*

请参阅：[C#/.NET 基础知识：返回不可变集合](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/11/04/c.net-fundamentals-returning-an-immutable-collection.aspx)

# c - c中的字符串数据类型

> ID：13875581
> 
> 赞同：0
> 
> 时间：2012-12-14T09:09:33.427
> 
> 标签：c, string, char

我是 C 的初学者，我正在尝试编写一个函数来返回一个字符串。我知道在 C 中我们没有字符串数据类型。而不是这些，我尝试使用一个字符数组，但这不是我的解决方案。

```
char[] my_function(int x){
    if(x>0)
        return 'greaterThanZero';
    else
        return 'smallerOrEqualOfZero';
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:13:08.103

返回类型需要是`const char *`并且字符串文字需要用双引号括起来：

```
const char * my_function(int x)
{
    if (x > 0)
        return "greaterThanZero";
    else
        return "lessThanOrEqualToZero";
}

int main(void)
{
    printf("my_function(1)  = %s\n", my_function(1));
    printf("my_function(0)  = %s\n", my_function(0));
    printf("my_function(-1) = %s\n", my_function(-1));
    return 0;
} 
```

请注意，单引号用于`char`变量：

```
char c = 'X';                // single character - single quotes
char *s = "Hello world!";    // string - double quotes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:18:08.190

```
void my_function(int x, char **ret){
    if(x>0)
        *ret= "greaterThanZero";
    else
        *ret= "smallerOrEqualOfZero";
} 
```

主要是

```
int main() {
   char *string;
   my_function(1, &string);
   printf("%s",string);
} 
```

其他方式：

```
void my_function(int x, char *T){
        if(x>0)
            strcpy(T,"greaterThanZero");
        else
            strcpy(T, "smallerOrEqualOfZero");
    } 
```

主要是

```
int main() {
   char string[100];
   my_function(1, string);
   printf("%s",string);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T09:11:04.880

使用`"`代替`'`（`'greaterThanZero'`应该是`"greaterThanZero"`）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T09:11:12.117

在greaterThanZero 和smallerOrEqualOfZero 周围使用双引号。

或者，您也可以返回单个字符（例如 g/s），然后在调用函数中使用条件。

注意：“greaterThanZero”通常会进入 const 部分，而不是堆栈。因此从函数返回应该是安全的。

# java - Hibernate 手动删除特定的多对多关联

> ID：13875583
> 
> 赞同：0
> 
> 时间：2012-12-14T09:09:36.597
> 
> 标签：java, hibernate, jpa

所以我有两个类 :`File`和`FileSet`，它们具有由连接表链接的双向多对多关系`FILE_FILE_SET`。

一个文件可以是许多文件集的一部分，反之亦然。对文件集的更改通过`@ManytoMany(cascade = CascadeType.All)`注释级联到单个文件（但不是相反）。特别是，在 FileSet 中遇到超过 1000 个文件的情况并不少见。我们已经启动并运行了这些类的代码，但是当我们尝试从 FileSets 中删除单个文件时遇到问题：虽然删除正确发生，但随着集中文件数量的增加，删除所需的时间与 O 成比例(n^2)。这是因为删除 FileSet-File 关联的当前代码获取 FileSet 的一个实例，删除 File，然后使用 保存更新的 FileSet `SaveOrUpdate()`，这反过来又保存了所有关联的文件。

这对于小型集合很好，但当 FileSet 中有许多文件时会变得非常慢。不幸的是，FileSet 对象保存在代码中的许多其他点，级联是一件好事，所以我宁愿不完全关闭级联。

所以，要解决我的实际问题：休眠中有没有办法删除两个对象之间的特定关联？例如，是否可以运行 HQL 查询来从连接表中删除条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:15:23.393

首先，ManyToXxx 关联上的 CascadeType.ALL 没有多大意义。如果一个文件集的文件是另一个文件集的一部分，您不想在删除一个文件集时删除所有文件，因为它们仍然被其他文件集引用。

现在，要回答这个问题，您希望它从文件集中删除什么文件。这只需从文件集中的文件集合中删除文件即可完成：

```
public removeFilesFromFileSet(FileSet fileSet, Set<File> filesToRemove) {
    fileSet.getFiles().removeAll(filesToRemove);
} 
```

不过，这会加载 FileSet 中的所有文件。如果您不想这样，那么您必须映射关联表或使用 SQL。

# python - 查找列表中不同元素数量的有效方法

> ID：13875584
> 
> 赞同：0
> 
> 时间：2012-12-14T09:09:38.420
> 
> 标签：python, python-3.x, k-means

我正在尝试使用 Kruskal 的最小生成树算法进行 K-Means 聚类。我最初的设计是运行输入的全长 Kruskal 算法并产生一个 MST，然后删除最后的 k-1 个边（或等效的 k-1 个最昂贵的边）。

当然，这与运行 Kruskal 算法并在它添加最后 k-1 条边之前停止它是一样的。

我想使用第二种策略，即不是运行全长 Kruskal 算法，而是在到目前为止的集群数等于 K 之后停止它。我正在使用 Union-Find 数据结构并在此 Union-Find 数据中使用列表对象结构体。

此图上的每个顶点都由其在此列表中的当前簇表示，例如，`[1,2,3...]`表示顶点 1、2、3 位于它们不同的独立簇中。如果连接两个顶点，则列表数据结构上的相应索引将更新以反映这一点。

例如，合并顶点 2 和 3 会使列表数据对象保留为`[1,2,2,4,5.....]`

我的策略是每次合并两个节点时，计算列表中 DISTINCT 元素的数量，如果它等于所需集群的数量，则停止。我担心这可能不是最有效的选择。有没有一种方法可以有效地计算列表中不同对象的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:12:59.350

最简单也可能最有效的是

```
len(set(l)) 
```

清单在哪里`l`。如果合适的话，您可以首先考虑将数据存储在集合中而不是列表中。

请注意，要使其正常工作， 的元素`l`必须是可散列的，这对于数字是有保证的，但对于通用“对象”则不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:17:41.553

一种方法是对列表进行排序，然后通过将每个元素与前一个元素进行比较来遍历元素。如果它们不等于您的“不同计数器”的总和 1。此操作为 O(n)，对于排序，您可以使用您喜欢的排序算法，例如快速排序或归并排序，但我猜您使用的库中有可用的排序算法。

另一种选择是创建一个哈希表并添加所有元素。插入的数量将是不同的元素，因为不会插入重复的元素。我认为这是 O(1) 在最好的情况下，所以也许这是更好的解决方案。祝你好运！

希望这可以帮助，

迪达克·佩雷斯

# simulator - Xilinx 仿真错误保险丝：500

> ID：13875585
> 
> 赞同：5
> 
> 时间：2012-12-14T09:09:40.807
> 
> 标签：simulator, fpga, fuse, xilinx

我正在尝试使用 Xilinx ISim 模拟我的 VHDL 代码。

当我尝试为模拟生成测试平台时，模拟器抛出以下错误：

```
FATAL_ERROR:Simulator:Fuse.cpp:500:1.133 - Failed to compile generated C file isim/ 
```

我尝试在 32 位 Ubuntu 12.04 上使用 ISE 14.3、32 位 Windows XP SP3 以及 ISE 14.3 和 64 位 Windows 7 SP1 与以前相同的 ISE 版本对其进行模拟。

Xilinx 支持提供了重新安装作为解决方案，但这并没有解决问题。

也许 Stack Overflow 上的社区有一个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:02:13.983

那是一个工具崩溃，在 stackoverflow 上很难得到答案，至少在不提供一些代码和导致问题的步骤的情况下。我会得到 Xilinx 支持并打开一个案例——这是他们需要在工具中修复的问题。您可以将您的代码作为测试用例提供给他们吗？可能会减少它，使其尽可能简单，同时仍然会导致问题。

由于机密性，我永远不能将生产代码作为测试用例提供给 EDA 供应商。我经常发现，在创建*可以*发送的较小测试用例时，我还能够找到原始问题的解决方法。尝试一个二分搜索程序——删除或黑盒一半的设计，看看崩溃是否仍然发生。

并且——你能找到编译失败的特定 C 文件吗？查看它可能会为您的设计中可能导致问题的原因提供线索。

# xml - 使用 build.xml 从 .jar 文件创建 .exe

> ID：13875587
> 
> 赞同：3
> 
> 时间：2012-12-14T09:09:53.127
> 
> 标签：xml, jar, exe

是否可以使用一些脚本（build.xml）从 jar 文件创建一个 exe。目前我使用构建文件创建一个 jar，然后使用 Launch4J 创建 exe。现在我想通过脚本制作应用程序的 exe。我想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:45:05.377

你应该提高你的研究技能。我花了 2 秒钟才找到 Launch4j 文档的部分，其中`launch4j`解释了特殊的 Ant 任务。看这里： http: [//launch4j.sourceforge.net/docs.html#Ant_task](http://launch4j.sourceforge.net/docs.html#Ant_task)

所以是的，这是可能的。您可以将 Ant 用于该特殊任务，并且它已记录在案。

# java - 使用反向指针获取平衡分区中子集的元素

> ID：13875593
> 
> 赞同：2
> 
> 时间：2012-12-14T09:10:09.560
> 
> 标签：java, processing, partition-problem

我想实现平衡分区问题并使用反向指针获取子集的元素。

我有一个关于反向指针的问题：

在[麻省理工学院的动态编程练习题](http://people.csail.mit.edu/bdean/6.046/dp/) Nr 的帮助下。7和[这个示例代码](https://sites.google.com/site/kevindrasingh/algorithms-r/balanced-partition-problem)，我设法在处理中获得了一个工作程序（因为我是一个编程新手......）。

现在我希望能够获得两个子集的元素。

在 MIT Video 中解释说，这可以“使用维护反向指针的标准技巧”来实现。

有谁知道如何做到这一点？

```
int N=4;
int[] Weights=new int[N];
int Deviation=5;

void setup()
{
 for(int i=0;i<N;i++)
{
 Weights[i]=10+int(random(-Deviation, Deviation));
 println(i+"   "+Weights[i]);
} 

println("-------------------");

BalancedPartition(Weights,N);

}

void BalancedPartition ( int a[] , int n ){

    int sum = 0;
    for( int i = 0 ; i < n ; i++)
        sum += a[i];

    int[] s = new int[sum+1];

    s[0] = 1;
    for(int i = 1 ; i < sum+1 ; i++)    
    {
      s[i] = 0;
    }

    int ans = 0;
    int diff = 1000000000;

    for(int i = 0 ; i < n ; i++)
    {
        for(int j = sum ; j >= a[i] ; j--)
        {

            s[j] = s[j] | s[j-a[i]];
            if( s[j] == 1 )
            {   

                if( diff > abs( (sum/2) - j) )
                {

                    diff = abs( (sum/2) - j );
                    ans = j;

                 }

            }

        }
    }
println("Sum Set 1: "+ans+"        Sum Set 2: "+(sum-ans)+"          Difference: "+abs(ans-(sum-ans)) );

} 
```

# sql - 获取第二个最晚日期价格的 Sql 查询

> ID：13875596
> 
> 赞同：0
> 
> 时间：2012-12-14T09:10:24.943
> 
> 标签：sql, sql-server, syntax

我有这个查询：

```
select @cost = @cost +                  
    (select top 1 price from
    (select top 2 price, date  from myTable order by date DESC)
     order by date ASC
) 
```

我得到错误：关键字“订单”附近的语法不正确。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:20:12.393

我猜这个子查询

```
(select top 2 price, date  from myTable order by date DESC) 
```

需要一个别名，像这样

```
(select top 2 price, date  from myTable order by date DESC) sq 
```

但我会这样写：

```
SELECT @cost = @cost + (
SELECT price FROM (
SELECT price, date, ROW_NUMBER() OVER (ORDER BY date DESC) AS rownum
) sq WHERE rownum = 2
) 
```

# c - 动态指针数组重新分配失败

> ID：13875604
> 
> 赞同：0
> 
> 时间：2012-12-14T09:10:52.383
> 
> 标签：c, realloc

我对 realloc 有问题。这是我的函数，它从输出中读取单词并在检测到 EOF 时终止。该函数导致内存泄漏，以下程序抛出 SIGSEGV 或 SIGABORT。有什么问题？

```
int inx=0;
char **wordList=NULL;

int v;
char tmpArr[100];

do
{
  v=scanf("%s",tmpArr);
  if(v!=-1)
  {
    char* word=(char*)malloc(strlen(tmpArr)+1);
    strcpy(word,tmpArr);
    char**more=(char**)realloc(wordList,sizeof(char*)*(inx+1));
    if(more!=NULL) {wordList=more;} else return 1;
    wordList[inx++]=word;
    printf("%d\n",inx);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:24:03.463

```
v=scanf("%s",tmpArr); 
```

如果输入字符串大于 100，则上述内容可能会导致内存覆盖。您可能希望`fgets(tmpArray,sizeof(tmpArray),stdin)`改用将输入限制为最大缓冲区大小（或使用`scanf_s`）。

你不应该强制转换 malloc 返回的内容，它返回一个不需要强制转换的 void*，如果你强制转换，如果你忘记包含 stdlib.h，你可以掩盖错误

```
char* word = /* (char*) */ malloc(strlen(tmpArr)+1); 
```

每次读取新字符串时都增加数组不是很有效，而是考虑分配一堆字符串指针或最好使用其他数据结构，例如列表

例如

```
if ( inx == maxindex  )
{
  char**more=(char**)realloc(wordList,sizeof(char*)*(maxindex + bunch));

  if (more != NULL) 
  {
    wordList = more;
    maxindex += bunch ;
  } 
  else 
  { 
    return 1;
  }
} 
```

...

# iphone - UItableView 中的 CustomCell 崩溃

> ID：13875605
> 
> 赞同：2
> 
> 时间：2012-12-14T09:10:55.160
> 
> 标签：iphone, ios, uitableview, autolayout

我一直在 a`customCell.xib`中使用它自己`customCellClass`的 a `UITableView`，它是在不使用`autoLayout`功能的情况下构建的（因为我需要让它在之前的平台上工作`iOS6`）。在其方法`UITableView`中获取这个定制的 xib 单元。`dataSource`我面临的困境是，在`UITableView`我运行它的 50% 的时间里突然崩溃，但在其余时间执行并完美地显示了 tabeview..

我目前正在使用 XCode 4.5。

这是我收到的崩溃日志..

> '执行 -layoutSubviews 后仍需要自动布局。UITableViewCell 的-layoutSubviews 实现需要调用super。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:41:39.620

这个这里已经讲了一些细节了，也不是简单的调用[super layoutSubviews]那么简单；

[使用 UITableViewCell 子类执行“-layoutSubviews”后仍需要自动布局](https://stackoverflow.com/questions/12610783/auto-layout-still-required-after-executing-layoutsubviews-with-uitableviewcel)

尝试在您的每个视图上禁用“translatesAutoresizingMaskIntoConstraints”。自动布局以某种方式被触发，这导致 UITableView 上的这个错误弹出。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-14T09:30:10.453

您的自定义单元类实现覆盖 layoutSubviews 而不调用 super。就在崩溃日志中！

# java - 从工作线程调用侦听器方法，但让它在添加侦听器的线程上运行

> ID：13875617
> 
> 赞同：4
> 
> 时间：2012-12-14T09:11:53.637
> 
> 标签：java, multithreading, listeners

我正在编写一个我想要自包含的 TCP 服务器类。也就是说，使用此类的应用程序无需担心内部工作线程。TCP 服务器类有一个 start() 方法，我希望能够在调用 start() 的同一线程上调用侦听器的方法（在正常使用情况下，主线程）。这可能用代码更好地解释：

```
public class ProblemExample {
    private Listener mListener;

    public ProblemExample() {
        mListener = new Listener() {
            @Override
            public void fireListener() {
                System.out.println(Thread.currentThread().getName());
            }
        };
    }

    public void start() {
        mListener.fireListener(); // "main" is printed
        new Thread(new Worker()).start();
    }

    public interface Listener {
        public void fireListener();
    }

    private class Worker implements Runnable {
        @Override
        public void run() {
            /* Assuming the listener is being used for status updates while
             * the thread is running, I'd like to fire the listener on the
             * same thread that called start(). Essentially, the thread that
             * starts the operation doesn't need to know or care about the
             * internal thread. */
            mListener.fireListener(); // "Thread-0" is printed
        }
    }
} 
```

我试过搜索这个，但我不确定要搜索什么。我发现最好的是[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)似乎可以做到这一点，但我不知道怎么做。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:28:25.843

如果没有客户端线程（调用的线程）的明确合作，您所要求的理论上是不可能的`start()`。停下来想一想：主线程总是忙于以某种特定的方法运行一些特定的代码。完整的调用堆栈专用于当前调用。现在您想打断它并突然开始执行侦听器代码。

Swing 实现这一点的方式是在 Event Dispatch Thread 中运行一个主事件循环。在这个循环中，您可以想象`Runnable`从队列中拉出的实例以及`run`依次调用它们的方法。只有当一个`run`方法返回时，才能调用下一个方法。

这也是您需要为您的案例设计的内容，但我不确定您是否有类似的想法。唯一的选择是显式支持在外部线程上执行的侦听器方法。

# java - GAE 数据核不获取子实体

> ID：13875619
> 
> 赞同：0
> 
> 时间：2012-12-14T09:11:54.737
> 
> 标签：java, google-app-engine, jdo, datanucleus

我将 JDO 版本 2 数据核与 App Engine SDK 1.7.3 一起使用。我在检索一对多关系中的子对象时遇到问题。

```
contents = (Collection<ContentType>) persistenceManager.newQuery(ContentType.class).execute(); 
```

此查询返回 ContentType 的所有实例，但 ContentType 还包含未从数据库中获取的子“内容”列表。

**内容类型.java**

```
public Collection<ContentType> getAllContents() {

        PersistenceManager persistenceManager = PersistenceFactory
                .getInstance().getPersistenceManager();
        Transaction transaction = persistenceManager.currentTransaction();
        Collection<ContentType> contents = null;
        try {
            transaction.begin();
            contents = (Collection<ContentType>) persistenceManager.newQuery(ContentType.class).execute();

            Logging.log("contents in getAllContents=== "+ contents);

            if(contents!=null)
                {
                Logging.log("contents size in getAllContents=== "+ contents.size());

                }

        for (ContentType contentTypeElement : contents) {
            Logging.log("inside main loop in getAllContents, contentTypeElement=== "+ contentTypeElement);
            if(contentTypeElement!=null)
            {
                Logging.log("inside main loop in getAllContents, contentTypeElement having list === "+ contentTypeElement.getContentList());

            }
            if(contentTypeElement.getContentList()!=null)
            {

            for (Content contentElement : contentTypeElement.getContentList()) {
                Logging.log("inside second loop in getAllContents");
                String contentPath = Constants.CONTENT_BASE_URL
                        + contentElement.getContentPath();
                contentElement.setContentPath(contentPath);
            }
            }
            Logging.log("At end of main loop iteration");
        }
        transaction.commit();
        } catch (Exception e) {
            transaction.rollback();
            e.printStackTrace();
            Logging.log("Exception retriving all content, detail in getAllContents: "
                    + e.toString());

        } finally {
            persistenceManager.close();
        }
        return contents;
    } 
```

这是日志

```
2012-12-14 13:27:14.101
org.datanucleus.TransactionImpl internalPreCommit: >> calling preCommit on org.datanucleus.store.connection.ConnectionManagerImpl$2@873b9f
I 2012-12-14 13:27:14.102
org.datanucleus.TransactionImpl internalPreCommit: >> calling preCommit on org.datanucleus.ObjectManagerImpl@c6b8b0
I 2012-12-14 13:27:14.102
org.datanucleus.TransactionImpl preFlush: >> calling preFlush on org.datanucleus.store.connection.ConnectionManagerImpl$2@873b9f
I 2012-12-14 13:27:14.102
org.datanucleus.TransactionImpl preFlush: >> calling preFlush on org.datanucleus.ObjectManagerImpl@c6b8b0
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: contents in getAllContents=== [com.test.igreetings.persistence.domain.ContentType@14fdb76, com.test.igreetings.persistence.domain.ContentType@1d15a18, com.test.igreetings.persistence.domain.ContentType@171f735, com.test.igreetings.persistence.domain.ContentType@1bf496b]
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: contents size in getAllContents=== 4
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement=== com.test.igreetings.persistence.domain.ContentType@14fdb76
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement having list === null
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: At end of main loop iteration
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement=== com.test.igreetings.persistence.domain.ContentType@1d15a18
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement having list === null
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: At end of main loop iteration
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement=== com.test.igreetings.persistence.domain.ContentType@171f735
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement having list === null
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: At end of main loop iteration
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement=== com.test.igreetings.persistence.domain.ContentType@1bf496b
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: inside main loop in getAllContents, contentTypeElement having list === null
I 2012-12-14 13:27:14.135
com.test.igreetings.util.Logging log: At end of main loop iteration
I 2012-12-14 13:27:14.136
org.datanucleus.TransactionImpl internalPreCommit: >> calling preCommit on org.datanucleus.store.connection.ConnectionManagerImpl$2@66da2c
I 2012-12-14 13:27:14.136
org.datanucleus.TransactionImpl internalPreCommit: >> calling preCommit on org.datanucleus.ObjectManagerImpl@274608 
```

**数据核日志**

```
1\.  org.datanucleus.store.connection.ConnectionManagerImpl allocateConnection: Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@74ece8 for key=org.datanucleus.ObjectManagerImpl@107c76b in factory=ConnectionFactory:tx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@119549e]
2\.  
3\.  D2012-12-14 17:20:11.232
4\.  org.datanucleus.store.query.QueryManager getQueryCompilationForQuery: Query "SELECT FROM com.test.igreetings.persistence.domain.ContentType" of language "JDOQL" has been run before so reusing existing generic compilation
5\.  D2012-12-14 17:20:11.232
6\.  com.google.appengine.datanucleus.query.JDOQLQuery performExecute: JDOQL Query : Executing "SELECT FROM com.test.igreetings.persistence.domain.ContentType" ...
7\.  D2012-12-14 17:20:11.233
8\.  com.google.appengine.datanucleus.query.JDOQLQuery performExecute: Query compiled as : Kind=com.test.igreetings.persistence.domain.ContentType
9\.  D2012-12-14 17:20:11.233
10\. com.google.appengine.datanucleus.query.DatastoreQuery executeNormalQuery: Executing query in datastore for SELECT FROM com.test.igreetings.persistence.domain.ContentType
11\. D2012-12-14 17:20:11.233
12\. org.datanucleus.store.connection.ConnectionManagerImpl allocateConnection: Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@74ece8 for key=org.datanucleus.ObjectManagerImpl@107c76b in factory=ConnectionFactory:tx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@119549e]
13\. D2012-12-14 17:20:11.234
14\. com.google.appengine.datanucleus.query.JDOQLQuery performExecute: JDOQL Query : Execution Time = 2 ms
15\. D2012-12-14 17:20:11.279
16\. org.datanucleus.ObjectManagerImpl getObjectFromLevel1Cache: Object with id "com.test.igreetings.persistence.domain.ContentType:ContentType(3)" not found in Level 1 cache [cache size = 0]
17\. D2012-12-14 17:20:11.279
18\. org.datanucleus.ObjectManagerImpl putObjectIntoLevel1Cache: Object "com.test.igreetings.persistence.domain.ContentType@165d118" (id="com.test.igreetings.persistence.domain.ContentType:ContentType(3)") added to Level 1 cache (loadedFlags="[NNYNN]")
19\. D2012-12-14 17:20:11.279
20\. org.datanucleus.state.JDOStateManager wrapSCOField: Object "com.test.igreetings.persistence.domain.ContentType@165d118" (id="com.test.igreetings.persistence.domain.ContentType:ContentType(3)") is having the value in field "endDate" replaced by a SCO wrapper
21\. D2012-12-14 17:20:11.280
22\. org.datanucleus.state.JDOStateManager wrapSCOField: Object "com.test.igreetings.persistence.domain.ContentType@165d118" (id="com.test.igreetings.persistence.domain.ContentType:ContentType(3)") is having the value in field "startDate" replaced by a SCO wrapper
23\. D2012-12-14 17:20:11.280
24\. org.datanucleus.ObjectManagerImpl enlistInTransaction: Object "com.test.igreetings.persistence.domain.ContentType@165d118" (id="com.google.appengine.api.datastore.Key:ContentType(3)") enlisted in transactional cache
25\. D2012-12-14 17:20:11.280
26\. org.datanucleus.ObjectManagerImpl getObjectFromLevel2Cache: Object with id="com.test.igreetings.persistence.domain.ContentType:ContentType(3)" taken from Level 2 cache (fields="[0, 1, 2, 3, 4]", version="") - represented as "com.test.igreetings.persistence.domain.ContentType@165d118"
27\. D2012-12-14 17:20:11.280
org.datanucleus.store.connection.ConnectionManagerImpl allocateConnection: Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@74ece8 for key=org.datanucleus.ObjectManagerImpl@107c76b in factory=ConnectionFactory:tx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@119549e] 
```

因此 contentList 被提取为空，尽管在管理控制台数据查看器中有许多与内容类型相关联的内容实例。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:25:22.943

由于您现在说 List 的 ContentType 中没有属性，因此您没有使用 GAE JDO 插件的 v2 保存数据。因此，您不能指望它知道集合中的元素。

解决方案：修复您的数据。

# mongodb - 创建 mongodb 集合时没有任何文档

> ID：13875620
> 
> 赞同：2
> 
> 时间：2012-12-14T09:11:57.217
> 
> 标签：mongodb, spring-data, spring-data-mongodb

所以我的问题是在我的生产数据库中自动创建集合，这些集合旨在包含临时数据（但从逻辑上讲，这些临时文档中的任何一个都不会填充）。为什么会这样，我该如何避免这种行为？

例如更正式的解释，我有两个数据库 - 以及它们包含的集合

```
productiveDB.coll1
productiveDB.coll2 
```

和

```
temporaryDB.col3
temporaryDB.col4 
```

但是当我开始存储数据时，spring会自动创建

```
productiveDB.coll1
productiveDB.coll2
productiveDB.col3
productiveDB.col4 
```

作为记录：我已经在使用 1.1.1.RELEASE。我创建了一个小测试用例，其中重复了这种行为：两个文档（MyDocOne 和 MyDocTwo）都在自定义字段上包含 @Indexed 注释 - 它们还包含对象类型的字段。因此，当我创建实体`myDocOne and myDocTwo`- 设置`myDocTwo.obj = myDocOne`和持久化时 - spring在......中`myDocTwo`创建了一个集合，这有点令人困惑 - 我希望下面的代码能提供更好的概述。`myDocOne``template2`

```
public static void main(String[] args ) {
    App app = new App();
    ApplicationContextLoader loader = new ApplicationContextLoader();
    loader.load(app, "applicationContext.xml");

    MongoTemplate template1;
    MongoTemplate template2;

    try {
        template1 = new MongoTemplate(new Mongo("localhost"), "tmp1");
        template1.setApplicationContext(loader.getApplicationContext());
        template2 = new MongoTemplate(new Mongo("localhost"), "tmp2");
        template2.setApplicationContext(loader.getApplicationContext());
        MyDocOne one = new MyDocOne("foo", "bar");
        template1.save(one);            
        MyDocTwo two = new MyDocTwo("foo", "baz");
        two.setAny(one);
        template2.save(two);

    } catch (Exception e) {
            e.printStackTrace();
    }
} 
```

和文件：

```
@Document
public class MyDocOne {

    @Indexed
    String a;
    String b;

    public MyDocOne(String a, String b) {
        super();
        this.a = a;
        this.b = b;
    }
}

@Document
public class MyDocTwo {
    @Indexed
    String a;
    String b;
    Object any;

    public MyDocOne(String a, String b) {
        super();
        this.a = a;
        this.b = b;
    }

    public void setAny(Object any) {
        this.any = any;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:02:38.017

目前这是不可能的。MongoDB 中的集合在写入时会延迟创建，并且在它们变为空时不会自动删除。有几个开放的 JIRA 问题或与之相关的行为，特别是：

[https://jira.mongodb.org/browse/SERVER-610](https://jira.mongodb.org/browse/SERVER-610)

[https://jira.mongodb.org/browse/SERVER-3215](https://jira.mongodb.org/browse/SERVER-3215)

您将不得不手动清理空集合。定期扫描所有数据库以查找空集合并删除它们（可选地，仅当集合名称以特定字符串为前缀时，例如“temp”）将起到作用。

# c++ - 假定 C++ 错误 C4430 int

> ID：13875625
> 
> 赞同：1
> 
> 时间：2012-12-14T09:12:46.437
> 
> 标签：c++, string, compiler-errors, int, identifier

我是 C++ 的新手，在 C++ 中只有一个小头文件，里面有一个简单的结构。

PGNFinder.h：

```
#ifndef PGNFINDER_H
#define PGNFINDER_H

struct Field
{
    int Order;
    string Name;
   //more variables but doesn't matter for now
};

#endif 
```

这给出了下一个错误：

```
error C2146: syntax error : missing ';' before identifier 'Name'    
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

当我将其更改为：

```
 struct Field
{
    int Order;
    std::string Name;
}; 
```

它在 .exe 文件和 .obj 文件中给出错误

```
error LNK1120: 1 unresolved externals   (in the .exe file)
error LNK2019: unresolved external symbol "int __cdecl Convert::stringToInt(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?stringToInt@Convert@@YAHV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "private: void __thiscall CAN::calculateMessageLength(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?calculateMessageLength@CAN@@AAEXV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 
```

当我添加

```
#include <string> 
```

并改回

```
string Name; 
```

它给出了与开始时相同的错误。那么为什么头文件不能识别int和string呢？

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:17:21.363

为了`string`用作变量的类型，您需要

*   包括声明它的标头 ( `#include <string>`)
*   使用完全限定类型，例如`std::string`或通过 using 目录`using namespace std;`注意，但是，`using`在头文件中不建议这样做（请参阅[c++ headers 中的“使用命名空间”](https://stackoverflow.com/questions/5849457/using-namespace-in-c-headers)）

如果你只尝试其中一种，它就行不通。

但是，您的第二条错误消息似乎指向链接器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:17:01.503

因为我倾向于经常使用评论功能。

您的问题是缺少包含，当您包含 string.h 时，您仍然忘记了“字符串类”的标准命名空间。

所以要么使用`using namespace std`（对于初学者最佳实践，因为大多数东西很可能是 std 东西）或者在你的结构中将你的字符串声明为 std::string 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:21:15.770

将其更改为 std::string 清楚地修复了编译器错误。

然后你有一个与那行代码无关的链接器错误。您似乎有一个“转换”类，其中缺少“stringToInt”函数的实现。

# java - 触摸边框时如何循环精灵（android游戏开发）

> ID：13875626
> 
> 赞同：2
> 
> 时间：2012-12-14T09:12:47.137
> 
> 标签：java, android, eclipse

请帮忙。我是android游戏开发和java的新手。我希望我的鹿在触摸屏幕边框时再次循环或从 0,0 开始，但我不知道如何编码。

包 com.cmanres.bunnyjourney；

```
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Rect;

public class Spriteleft {
       private static final int BMP_COLUMNS = 3;
   private static final int BMP_ROWS = 2;
   private int x = 0; 
   private int y=0;
       private int xSpeed = 3;
       private Levelunogame gameView;
       private Bitmap deer1;
   private int width;
   private int height;
   private int currentFrame=0;

 public Spriteleft(Levelunogame gameView, Bitmap deer1) {
         this.gameView=gameView;
         this.deer1=deer1;
         this.width = deer1.getWidth() / BMP_COLUMNS;
         this.height = deer1.getHeight() / BMP_ROWS;
   }

   private void update() {
         if (x > gameView.getWidth() - width - xSpeed) {
                xSpeed = -3;
         }
         if (x + xSpeed< 0) {
                xSpeed = 3;
         }
         x = x + xSpeed;
         currentFrame = ++currentFrame % BMP_COLUMNS;
   }

   public void onDraw(Canvas canvas) {
         update();
         int srcX = currentFrame * width;
         int srcY = 1 * height;
         Rect src = new Rect(srcX, srcY, srcX + width, srcY + height);
         Rect dst = new Rect(x, y, x + width, y + height);
         canvas.drawBitmap(deer1, src , dst, null);
       }
 } 
```

这是我在 android 手机游戏教程中遵循的代码。谁能告诉我怎么做？或提供任何教程链接？我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:55:14.263

假设您的精灵位于 x, y 与 sprite_width, sprite_height

// 检查你的精灵位置是否在屏幕边界之外

```
if( x < 0 || x > gameView.getWidth() - sprite_width 
 || y < 0 || y > gameView.getHeight() - sprite_height ) {
    // Set x, y to 0,0
    x = 0;
    y = 0;
} 
```

# android - 如何在单击按钮时更改列表视图中的行文本

> ID：13875630
> 
> 赞同：0
> 
> 时间：2012-12-14T09:13:03.847
> 
> 标签：android, listview, onclicklistener

我有一个包含 Textview 和 Edittext 的列表视图。我在相同的布局上有一个按钮。我希望当我单击该按钮时，在列表视图的位置 3 上获取数据的某些位置会被其他一些文本更改

我已经尝试过这段代码，但它不起作用

天

```
public View getView(int position, View convertView, ViewGroup parent) {
                    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater.inflate(R.layout.taskstrt, parent, false);

                   if (convertView == null || convertView.getTag() == null) {

                         holder = new ViewHolder();

                        holder.editText = (EditText) convertView.findViewById(R.id.editText1);
                        holder.textView = (TextView) convertView.findViewById(R.id.textView1);

                        holder.textView.setText(values.get(position).toString());
                        holder.editText.setText(arrayList2.get(position).toString());
                        holder.textView.setId(position);
                        holder.editText.setId(position);
                        holder.editText.setEnabled(false);

                   }

                   button.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        try{

                        button.setEnabled(false);
                        holder.editText.setId(2);
                        holder.editText.setText("ACCEPT");
                        }
                        catch(Exception e)
                        {
                            System.out.println("ERROR:");
                        }
                    }
                });

                   convertView.setTag(holder);
                   return convertView;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:36:36.027

首先这是`getView`应该的样子：

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.taskstrt, parent, false);
        holder = new ViewHolder();
        //..instantiations

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //^don't forget that this up there

    //...listeners and what not here
    return convertView;
} 
```

此外，我注意到您的按钮没有作为 getView 的一部分实例化，就像其他持有者视图一样。如在哪里？

```
Button button = (Button) convertView.findViewById(R.id.button1); 
```

如果它是同一布局的一部分，为什么它不是持有者类的一部分？如果按钮没有被实例化为同一视图层次结构的一部分或根本没有实例化，那么该按钮将不会响应任何内容。

# r - 使用 doubleYScale 绘图更改 y 轴文本大小

> ID：13875637
> 
> 赞同：5
> 
> 时间：2012-12-14T09:13:43.223
> 
> 标签：r, lattice

我做了一个`doubleYScale`情节：

```
library(lattice)
library(latticeExtra)

# Some data
foo <- list(x = 1:100, y = cumsum(rnorm(100)))

obj1 <- xyplot(y~ x, data=foo,xlab=list(cex=1.2), 
               main="TOtalProduktion VS SummaSkulder/TotaltKapital i procent",
               type = c("l","g"),col="black",
               lty=1,key = simpleKey(col=c('black'),
               text=c("Produktion"),cex=1.2,points=FALSE, lines=TRUE),
               scales=list(x=list(rot=90,tick.number=25,
               cex=1,axs="r")))

obj2 <- xyplot(y^2 ~ x,data= foo ,type = "o",col="black",
               lty=9,key = simpleKey(col=c('black'),
               text=c("Summa.skulder"),cex=1.2,lines=FALSE,points= TRUE))

doubleYScale(obj1, obj2, add.ylab2 = TRUE) 
```

![在此处输入图像描述](../Images/12a9ec0c7fe7509250228154efe97ec7.png)

是`problem`我无法更改 y 轴标签的文本大小（`y`和`y^2`文本，我想让它更大）。`obj1`如果我只绘制或单独绘制，更改它是没有问题的`obj2`，但它不适用于`doubleYScale`...

另一方面，我可以通过以下方式更改 y 轴上数字的大小：

```
trellis.par.set(axis.text=list(cex=1)) 
```

有什么建议么？我找不到办法:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-13T04:54:31.693

这是另一个直接使用`lattice`and的解决方案`latticeExtra`：您可以在其中独立设置所有轴标签的大小：

```
library(lattice)
library(latticeExtra)
foo <- list(x = 1:100, y = cumsum(rnorm(100)))

obj1 <- xyplot(y~ x, data=foo,
               xlab=list("Thing", fontsize = 22),
               ylab = list("Something", fontsize = 32),
               ylab.right = list("Anything", fontsize = 16),
               par.settings = simpleTheme(col = 1),
               type = c("l","g"),
               lty=1,
               scales=list(x=list(rot=90,tick.number=25,
                                  cex=1,axs="r")))

obj2 <- xyplot(y^2 ~ x,data= foo ,type = "o",col="black",
               lty=9)

doubleYScale(obj1, obj2) 
```

![在此处输入图像描述](../Images/9615cb56259ab59fe0f98f557332cf6b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T18:54:58.147

```
 library(grid)
    ##  the text size of the 2 y-axic labels
    grid.edit(gPath='GRID.text',grep=T,global=T,gp =gpar(cex=3)) 
```

如果要设置不同的轴尺寸

```
 grobs <- sapply(grid.get(gPath='GRID.text',grep=T,global=T),'[')['name',]
    grid.edit(gPath=grobs[[1]],gp =gpar(cex=2))
    grid.edit(gPath=grobs[[2]],gp =gpar(cex=1.5)) 
```

![在此处输入图像描述](../Images/31be1a36ce91e6b55226709a767835b8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T03:57:42.423

这并不能直接回答您的问题，但是在一个轴上混合两个不同大小的图可能不是最好的方法，因为它可能会产生误导。也许使用多面图`ggplot`可以完成这项工作或更好？下面的所有元素都很容易调整。

![刻面图](../Images/96376b46dd0f7ac4795b1f8191e00b14.png)

```
library(ggplot2)
library(reshape)

set.seed(123)
foo <- list(x = 1:100, y = cumsum(rnorm(100)))

foo <- as.data.frame(foo)
foo$z <- foo$y^2
mymelt <- melt(foo, id.var = 'x')
mymelt$label <- ifelse(mymelt$variable == 'y', "Produktion", "Summa.skulder")
mymelt$line.colour <- ifelse(mymelt$variable == 'y', "red", "blue") # specify colours here

ggplot(data = mymelt, aes(x = x, y = value)) +
    geom_line(aes(colour = mymelt$line.colour)) +
    facet_wrap(~ label, ncol = 1, scales = "free_y") +
    scale_colour_manual(values = unique(mymelt$line.colour)) +
    ggtitle("TOtalProduktion VS SummaSkulder/TotaltKapital i procent") +
    theme(strip.text.x = element_text(size = 12)) +
    theme(axis.text.x = element_text(size = 9)) +
    theme(axis.text.y = element_text(size = 9)) +
    theme(axis.title.x = element_text(size = 15)) +
    theme(axis.title.y = element_text(size = 15)) +
    theme(axis.title.x = element_blank()) + # comment out this line if you want an x axis title
    theme(axis.title.y = element_blank()) + # comment out this line if you want a y axis title
    theme(legend.position = "none") 
```

# macos - 虚拟主机主页正在运行，但链接不可用

> ID：13875638
> 
> 赞同：2
> 
> 时间：2012-12-14T09:13:43.443
> 
> 标签：macos, apache, drupal, xampp

我有一个用 Drupal 制作的网站，我最终被迫为 XAMPP 设置虚拟主机，因为我正在管理多个本地版本。我遵循了看似简单的 OSX 帮助指南，但是，只有 fornt 页面有效，并且填充了数据。然而，任何 RESTFUL 链接都会得到 404。

/Applications/XAMPP/xamppfiles/etc/extra/ `httpd-vhosts.conf`：

```
<VirtualHost p1>
    ServerName p1
    DocumentRoot /Users/path/to/p1
</VirtualHost>  

<VirtualHost p2>
    ServerAdmin email@p2.org
    ServerName p2
    DocumentRoot /Users/path/to/p2
    RewriteEngine On
    RewriteOptions inherit
</VirtualHost> 
```

`httpd.conf`在 /Applications/XAMPP/xampp/etc 和 /etc/apache2 中都没有注释：

```
# Virtual hosts
Include /Applications/XAMPP/etc/extra/httpd-vhosts.conf 
```

`hosts`/etc/ 中的文件：

```
127.0.0.1   p1

127.0.0.1   p2 
```

在 /Users/path/to/p2`.htaccess`文件是：

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

这些是我最初上传到服务器的相同设置和当前服务器上的相同设置。我什至再次将它们从服务器上拉下来，以确保它们是重复的。

我错过了什么？我也无法直接访问网址。不知何故，路由没有正确完成是我最好的猜测。

访问主页后，access_log 为：

```
127.0.0.1 - - [14/Dec/2012:04:53:25 -0500] "GET / HTTP/1.1" 200 13838
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/system/system.base.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/system/system.menus.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/comment/comment.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /sites/all/modules/date/date_api/date.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/system/system.messages.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/system/system.theme.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /sites/all/modules/date/date_popup/themes/datepicker.1.7.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /sites/all/modules/date/date_repeat_field/date_repeat_field.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/node/node.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/field/theme/field.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/search/search.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /modules/user/user.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /sites/all/modules/views/css/views.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /sites/all/modules/ctools/css/ctools.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/css/layout.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/css/style.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/css/colors.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/css/print.css?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /misc/jquery.once.js?v=1.2 HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /misc/jquery.js?v=1.4.4 HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /misc/drupal.js?menhjd HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/logo.png HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /themes/bartik/images/buttons.png HTTP/1.1" 304 -
127.0.0.1 - - [14/Dec/2012:04:53:26 -0500] "GET /misc/feed.png HTTP/1.1" 304 - 
```

然后点击一个链接：

是`error_log`：

```
[Fri Dec 14 04:55:45 2012] [error] [client 127.0.0.1] File does not exist: /Users/path/to/p1/projects, referer: http://p1 
```

为什么服务器要查找文件夹，而它应该根据 RESTFUL URL 查找数据库？

是`access_log`：

```
127.0.0.1 - - [14/Dec/2012:04:55:45 -0500] "GET /projects HTTP/1.1" 404 1204 
```

此外，`.ht.sqlite`权限是用户（读取和写入）、员工（只读）和每个人（读取和写入

即使无法访问 db 文件，这也会阻止主页显示文件中的当前数据.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:26:11.707

`httpd-vhosts.conf`需要更新以包含目录 。

根据[这个](http://www.andypangus.com/drupal-and-virtual-hosts)网站：

1.  锁定网站

您可以通过添加正确的配置来锁定您的开发站点并防止外人在您的服务器上访问它。以下内容将阻止外部访问此虚拟主机：

```
<VirtualHost *:80>
    ServerName p2
    DocumentRoot "/Users/path/to/site"
    <Directory "/Users/path/to/site">
        Options Includes FollowSymLinks
        AllowOverride All
        Order deny,allow
        Deny from all
        Allow from 127.0.0.1
    </Directory>
</VirtualHost> 
```

或 2\. 允许外部访问

当然，您可能希望能够从开发机器以外的其他地方访问该站点，以便您可以使用以下内容：

```
<VirtualHost *:80>
    ServerName p2
    DocumentRoot "/Users/path/to/site"
    <Directory "/Users/path/to/site">
        Options Includes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T10:35:46.253

1.  在 xampp > apache > conf > extra 中编辑 Httpd-vhosts.conf 文件
2.  重启阿帕奇。
3.  转到您的网站/wp-admin 并登录。转到设置 > 永久链接，然后单击保存在您的永久链接上。如果你在版本控制中有你的 .htaccess 文件，你会注意到它会编辑一些值。

这将允许您像对我一样解决您的问题

# python - 在图结构中传播评级

> ID：13875640
> 
> 赞同：1
> 
> 时间：2012-12-14T09:13:46.713
> 
> 标签：python, algorithm, graph, neural-network, graph-algorithm

我有以下问题：

```
Consider a weighted direct graph. 
Each node has a rating and the weighted edges represents 
      the "influence" of a node on its neighbors.
When a node rating change, the neighbors will see their own rating modified (positively or negatively) 
```

如何在一个节点上传播新评级？
我认为这应该是一种标准算法，但是哪一种呢？

这是一个普遍的问题，但实际上我使用的是 Python ;)

谢谢

[编辑]
评级是 0 到 1 之间的简单浮点值：[0.0,1.0]
肯定存在收敛问题：我只想将传播限制为几次迭代......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:20:14.197

有一个简单的标准方法如下：

```
let G=(V,E) be the graph
let w:E->R be a weight function such that w(e) = weight of edge e
let A be an array such that A[v] = rating(v)
let n be the required number of iterations

for i from 1 to n (inclusive) do:
    for each vertex v in V:
          A'[v] = calculateNewRating(v,A,w) #use the array A for the old values and w
    A <- A' #assign A with the new values which are stored in A'
return A 
```

但是，在某些情况下 - 您可能会根据图表的特征以及如何重新计算每个节点的评级来获得更好的算法。例如：

1.  假设`rating'(v) = sum(rating(u) * w(u,v)) for each (u,v) in E`，你得到一个[Page Rank的变体，如果图是强连通的（](http://en.wikipedia.org/wiki/PageRank) [Perron-Forbenius 定理](http://en.wikipedia.org/wiki/Perron%E2%80%93Frobenius_theorem)），它保证收敛到主特征向量，所以计算最终值很简单。
2.  假设`rating'(v) = max{ rating(u) | for each (u,v) in E}`，那么它也保证收敛并且可以使用强连通分量线性求解。[这个线程](https://stackoverflow.com/q/13050714/572670)讨论了这个案例。

# python - 使用 Tkinter 提醒

> ID：13875641
> 
> 赞同：3
> 
> 时间：2012-12-14T09:13:46.137
> 
> 标签：python, time, tkinter

我正在使用 Windows 7 *（32 位）*。

作为编程练习，我必须使用`tkinter`.

更具体：

我的主要项目是帮助患有*阿尔茨海默*病的人。

所以，我的目标之一是提醒他们帮助他们做必要的活动/事情。

例如，

在*14:00 点*，创建一个消息框（如果可能，播放声音）..说*“该吃饭了”*。
然后在*18:00 点*，创建一个消息框（如果可能的话播放声音）..说*“是时候散步了”*。

ETC...

我怎么能做到这一点？
python（或tkinter）中有一个特殊的模块或一些工具可以帮助我吗？

以前，在 Visual Basic 中编码，记得我使用过类似“计时器”的东西..但我不记得更多了.. :P

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:17:43.997

起初以为您可以有一个 tk 配置对话框，您可以在其中添加新规则、编辑消息框字符串等。然后您将在其中使用该`time`模块。从那里您可以访问系统时间。

如果要显示 windows 消息框，可以在 ctypes 库中找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T23:52:32.837

您可以使用的时间：

```
from datetime import datetime 
```

对于消息框，您可以使用：

```
import ctypes
ctypes.windll.user32.MessageBoxW(None, 'it\'s time to eat!', 'reminder', 0x40)
#0x40 makes an ok button 
```

# mysql - 如何让 MySQL innoDB 支持新的 unicode 字符集，例如 '\U0001f3b8'

> ID：13875649
> 
> 赞同：1
> 
> 时间：2012-12-14T09:14:20.817
> 
> 标签：mysql, innodb

如何让 MySQL InnoDB 支持新的 Unicode 字符集，例如`\U0001f3b8`.

char`\U0001f3b8`是`GUITAR`由 iPhone 的输入法生成的。

问题是它不能保存在 MySQL DB 中。

保存的列类型是`VARCHAR`，我试过改成`TEXT`，还是不行。

例外是：

> 警告：不正确的字符串值：第 1 行的列 'message' 的 '\xF0\x9F\x8E\xB8'

顺便说一句：我的工作环境是 python + Django

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:19:01.180

我假设*新的 unicode 字符集*意味着完整的 UTF-8 支持。您需要将表/列排序规则更改为包含`utf8mb4`编码的排序规则。`utf8`在仅支持最多三个字节的不完整实现中很旧。为此，您需要 MySQL/5.5。

# search - 如何为自动完成收集有用的数据？

> ID：13875655
> 
> 赞同：2
> 
> 时间：2012-12-14T09:14:32.923
> 
> 标签：search, autocomplete, autosuggest

我试图实现一个典型的自动完成框，就像你从 amazon.com 知道的那样。你去那里，输入一封信，你会得到一个合理的建议，说明你可能会尝试在搜索框中输入什么。

盒子本身将由 jquery 实现，持久层和建议算法将基于 Apache Lucene/Solr 及其 Suggest-Feature。另外，我使用 lucene 的 WFST-Suggestion 对结果进行加权建议。

我的问题是，**例如亚马逊如何获得这种合理的数据**？我的意思是他们从哪里获得所有这些关键字和分数，所以这有意义吗？

每个产品上都是纯手工制作的款式信息吗？我认为这将是真正艰难的。或者是否可以使用机器学习理论中的聚类或分类等方法来收集数据？（然后我可以使用 mahout 或 carrot2）。

查看亚马逊的建议，我认为数据包含：

*   产品名称
*   产品/书籍的生产者/制造商/作者
*   产品特性（如颜色、类型、尺寸）

它包含更多吗？

接下来的事情是，看起来建议本身是排名的。**他们如何获得这种*分数*来衡量建议的权重？** 它是一个简单的用户点击路径跟踪，你在哪里看，用户在框中输入了什么，他选择了什么或者他之后看了什么产品？

是否使用某种逻辑在每个查询（可能缓存）上计算出这种分数？（**哪个？**也许是贝叶斯定理？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T09:15:14.997

他们可能会使用一些简单的方法，例如根据用户查询和/或产品名称构建 n-gram 模型，并使用它来预测最有可能的自动完成。

# bash - 用于从分隔值中获取有限值的 Shell 脚本

> ID：13875657
> 
> 赞同：1
> 
> 时间：2012-12-14T09:14:43.707
> 
> 标签：bash, shell, unix

我需要下面的shell脚本。

我有 14 个变量：

场景 1 输入：

```
a#@#b#@#c#@#d#@#e#@#f#@#g#@#e#@#f#@#g#@#h#@#i#@#j#@#k#@#l#@#m#@#n 
```

场景 2 输入：

```
a#@#b#@#c#@#d#@#e#@#f#@#g#@#e#@#f#@#g#@#h#@#i#@#j#@#k#@#l#@#m#@#n#@# 
```

我想要输出为

```
op1 = a

op2 = b

op3 = c

op4 = d

op5 = e

op6 = g

op7 = f

op8 = h

op9 = i

op10 = j

op11 = k

op12 = l

op13 = m

op14 = n 
```

这里`op1`是`op14`变量，我必须在其中存储值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:25:26.387

首先`#@#`用一个唯一的字符分隔符替换，例如`#`，然后使用`read`将其读入数组。数组的元素包含字符。这如下所示。

```
$ input="a#@#b#@#c#@#d#@#e#@#f#@#g#@#e#@#f#@#g#@#h#@#i#@#j#@#k"
$ IFS='#' read -a arr  <<< "${input//#@#/#}"
$ echo ${arr[0]}
a
$ echo ${arr[1]}
b
$ echo ${arr[13]}
k

# print out the whole array
$ for (( i=0; i<${#arr[@]}; i++ ))
> do
>     echo "Element at index $i is ${arr[i]}"
> done
Element at index 0 is a
Element at index 1 is b
Element at index 2 is c
Element at index 3 is d
Element at index 4 is e
Element at index 5 is f
Element at index 6 is g
Element at index 7 is e
Element at index 8 is f
Element at index 9 is g
Element at index 10 is h
Element at index 11 is i
Element at index 12 is j
Element at index 13 is k 
```

# batch-file - 使用java访问远程计算机

> ID：13875662
> 
> 赞同：2
> 
> 时间：2012-12-14T09:14:55.657
> 
> 标签：batch-file, remote-desktop

我正在使用虚拟机，我想运行其他虚拟机中的批处理文件（受保护，但我知道凭据）。
我拥有的工具是单独的“ **RAD ”。**

我也不能下载任何东西，因为没有管理员权限。

所以请帮我写一个java程序来解决这个任务。原因是，我需要运行存储在许多其他机器上的这么多批处理文件。如果需要任何进一步的要求，请告诉我！！！

# android - android中的Facebook应用权限

> ID：13875666
> 
> 赞同：0
> 
> 时间：2012-12-14T09:15:02.223
> 
> 标签：android, facebook, permissions, facebook-opengraph

我有一个 Facebook 应用程序，它向用户发布 video.watches 操作。我的问题是我不能将它发布给不是开发人员或测试人员或这些特殊角色之一的用户。沙盒模式已禁用。当用户第一次想要使用该应用程序时，它会请求权限，但在 android 应用程序中会出现对话框：“使用此应用程序需要：您的基本信息您的照片”但预览登录对话框“此应用程序将收到：您的基本信息你的活动......”等等我在权限中定义的内容。有人可以告诉我我是否遗漏了什么，或者我如何要求定义的许可？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:17:44.297

第一次授权用户时，您不能要求发布类型权限。

请参阅：[https ://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/)

并且注意：

“注意：在新的 SDK 中，您可能只在首次打开会话时请求读取权限。在用户实际向 Facebook 发布操作之前，您不应提示用户提供发布权限。这增加了用户信任，以及您的用户选择从您的应用发布故事的可能性。要请求进一步的权限，请使用 Session.openForRead 或 Session.openForPublish。

# javascript - 如何获取特定格式的json键值对并在选择框中填充键/值

> ID：13875667
> 
> 赞同：0
> 
> 时间：2012-12-14T09:15:03.923
> 
> 标签：javascript, json

我有一个如下的 JSON 数组：

```
var regions = {
    "af": "Africa",
    "as": "Asia",
    "au": "Australia",
    "at": "Austria",
    "be": "Belgium",
    "uk": "Engalnd",
    "fr": "France",
    "us": "USA"
} 
```

我正在使用如下简单的代码：

```
<option value="">Please Select Country</option>
    {if regions!=undefined}
        {for r in regions}
            <option value="${r}" >${r}</option>
        {/for}
    {/if} 
```

我想提取键和值，也想在上面的代码中传递给选项值。我怎么能在上面的代码中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:23:10.030

在 Javascript 中，我们可以通过

```
for (r in regions){
     html += "<option value="+r+">"+regions[r]+"</option>";
} 
```

在 jst 模板中获取 id 和 value

```
{for r in regions}
<option value="${r_index}" >${r}</option>
{/for} 
```

# c# - 渲染问题 RichTextBox Windows Phone 8

> ID：13875675
> 
> 赞同：1
> 
> 时间：2012-12-14T09:15:29.513
> 
> 标签：c#, richtextbox, windows-phone-8

我在 WindowsPhone 8 中实现了一个 RichTextBox。我在运行时用段落、运行、图像和超链接按钮填充这个框。现在出现的问题是RichTextBox被剪切了一些内容行之后。我宣布了一个红色边框，它也被剪掉了。仍然显示链接和图像。这是一个屏幕截图： ![错误截图](../Images/bd6f63fbe548bce9e2574f160fdbe507.png)

我的 XamlCode 很简单：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <ScrollViewer>
        <RichTextBox x:Name="ContentBox"  HorizontalAlignment="Stretch" VerticalAlignment="Top" BorderThickness="2" BorderBrush="Red" >
        </RichTextBox>
    </ScrollViewer>
</Grid> 
```

知道问题是什么还是模拟器错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:22:29.830

鉴于填充率计数器为 2.4，我的水晶球告诉我您正在达到单个 UI 元素的 4096 像素大小限制。如果是这种情况，您将不得不在几个不同的控件之间拆分 RichTextBox 内容。

# c# - 1000个用户可以同时阅读单个文本？

> ID：13875678
> 
> 赞同：2
> 
> 时间：2012-12-14T09:15:42.657
> 
> 标签：c#, asp.net

在我的网站中，我有一个 csv 文件，其中包含数百万条记录。基于一些搜索键，我需要选择一条记录。这部分我完成了。我的疑问是**如果多个用户（1000 个用户）**访问我的网站（只有一个 csv 文件可用）......我们可以读取 100 个用户的同一个文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:22:22.620

1M的记录不是很多。坦率地说，我只是将它全部加载到结构化数据中，然后引用它。一旦它成为内存，任何数量的用户都可以访问它（尤其是只读的）。

但最终理想的答案是：使用数据库。SQL Server Express 是免费的，可以轻松应对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:21:37.717

只要应用程序只需要阅读，您就不会有问题。然而，使用数据库来完成这项任务会更有效。您可以制作索引并使用易于访问的 sql。无需在每个请求上解析文件，您甚至可以在站点运行时添加/更改数据。

# c# - Selenium Chrome 驱动程序以不同的方式显示页面，然后手动导航到链接

> ID：13875679
> 
> 赞同：0
> 
> 时间：2012-12-14T09:15:43.500
> 
> 标签：c#, selenium, selenium-webdriver, ui-testing

我在 C# 中使用 Selenium Web 驱动程序时遇到了一个奇怪的问题。

当我在 Chrome 中手动导航到[该网页](http://www.sangar.ee/et/mensshirts/meeste-sark-franco-s310166890.html)或使用 Firefox Selenium WebDriver 时，会显示以下“Proovikabiin”链接。

![在此处输入图像描述](../Images/37398d1b62e372940edda3e40ccc8f9c.png) ![在此处输入图像描述](../Images/3c0160a0f81f32933a3e3a1f933c1e54.png)

但是在使用 Chrome WebDriver 时，不会显示该按钮。

![在此处输入图像描述](../Images/7774f48f7d9197bd10777687f64813ec.png)

到底什么会导致这种行为差异？我更喜欢让我的测试与浏览器无关。

[编辑] 软件版本

*   Selenium.WebDriver，2.26.0。通过 NuGet 安装。
*   Chrome WebDriver，23.0.1240.0 从 [这里](http://chromedriver.googlecode.com/files/chromedriver_win_23.0.1240.0.zip)。显示按钮的照片是从 Web 驱动程序启动的同一个 chrome 实例创建的，但只是复制并粘贴链接。
*   我正在使用内置的 Firefox 驱动程序。当前计算机上安装了 Firefox 17.0.1。

这是一些代码。

```
using NUnit.Framework;
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using OpenQA.Selenium.Firefox;

namespace IntegrationMonitorLibrary.WebTests.FailFolder
{
    [TestFixture]
    class BrowserInconsistancyWithProovikabiinButton
    {
        [Test]
        public void FirefoxShowsButton()
        {
            IWebDriver driver = new FirefoxDriver();
            var url = "http://www.sangar.ee/et/mensshirts/meeste-sark-franco-s310166890.html";
            driver.Navigate().GoToUrl(url);

            var buttonId = "fitsmebutton";
            driver.FindElement(By.Id(buttonId)).Click();
        }

        [Test]
        public void ChromeDoesNotShowButton()
        {
            IWebDriver driver = new ChromeDriver();
            var url = "http://www.sangar.ee/et/mensshirts/meeste-sark-franco-s310166890.html";
            driver.Navigate().GoToUrl(url);

            var buttonId = "fitsmebutton";
            driver.FindElement(By.Id(buttonId)).Click();
        }
    }
} 
```

# php - 在 php 中使用 Joomla 身份验证

> ID：13875680
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:15:45.340
> 
> 标签：php, joomla

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在使用 Joomla 2.5 我在 joomla 之外开发了一个小表单，并希望使用 Joomla 身份验证来限制对它的访问。

我创建了三个文件：

auth.php（它存在于 joomla 根目录中）

```
<?php
define( '_JEXEC',1);
define('JPATH_BASE', dirname(__FILE__));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
/* Create the Application */
$mainframe =& JFactory::getApplication('site');
/* Make sure we are logged in at all. */
if (JFactory::getUser()->id == 0)
die("Access denied: login required.");
?> 
```

其次是connect-db.php

```
 <?php
    $server = 'xxxxxxxxx';
    $user = 'xxxxxxxx';
    $pass = 'xxxxxxxxxxxx';
    $db = 'xxxxxxxxxxx';

    // Connect to Database
    $connection = mysql_connect($server, $user, $pass) 
    or die ("Could not connect to server ... \n" . mysql_error ());
    mysql_select_db($db) 
    or die ("Could not connect to database ... \n" . mysql_error ());

    ?> 
```

第三是 list_names.php 它在文件夹“list”中

```
 <?php
    // connect to the database
include('../auth.php');
    include('connect-db.php');
    // get results from database
    $result = mysql_query("SELECT * FROM names") 
            or die(mysql_error());             
    // display data in table
    echo "<table border='0' cellpadding='10' cellspacing='1' width='650'>";
    echo "<tr> <th>ID</th> <th>Names</th><th>Delete</th></tr>";
    // loop through results of database query, displaying them in the table
    while($row = mysql_fetch_array( $result )) {
            // echo out the contents of each row into a table
            echo "<tr>";
            echo '<td width="20">' . $row['id'] . '</td>';
            echo '<td width="330">' . $row['Name'] . '</td>';
            echo '<td width="150"><a class="btn-del" href="delete_name.php?id=' .             $row['id'] . '">Delete</a></td>';
            echo "</tr>"; 
    } 
    // close table>
    echo "</table>";
    ?>
    <p><a class="btn-add" href="new_name.php">Add New name</a></p> 
```

现在的问题是当我访问文件时出现此错误：

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由 /home/xxxxxxxx/public_html/name/list/list_names.php:2 中的 /home/xxxxxxxx/public_html 发送（输出开始于 /home/xxxxxxxx/public_html /name/libraries/joomla/session/session.php 在第 532 行
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 /home/xxxxxxxx/public_html 中发送（输出开始于 /home/xxxxxxxx/public_html/name/list/list_names.php:2） /name/libraries/joomla/session/session.php 在第 532 行访问被拒绝：需要登录。

我不是程序员！我正在边做边学，请帮助。问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:23:48.340

该`headers already sent`警告是由在发送 HTTP 标头（在您的情况下为 cookie）之前将输出发送到浏览器引起的。

看起来您在and中的开始`<?php`标记 之前有空格。开始 PHP 标记之前的空格会导致此警告，因此您需要将其删除。`list_names.php``db-connect.php`

此外，您连接到数据库两次，如果您包含 Joomla，则无需手动连接第二次，只需获取 Joomla 的数据库对象：

```
$db =& JFactory::getDBO(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:28:50.053

如果您使用以下代码

```
define( '_JEXEC',1);
define('JPATH_BASE', dirname(__FILE__));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
/* Create the Application */
$mainframe =& JFactory::getApplication('site');
/* Make sure we are logged in at all. */ 
```

不需要额外的数据库连接。您可以使用 joomla DB 对象。

```
$db     = JFactory::getDBO();
$query = "SELECT * FROM table_name";
$db->setQuery($query);
$db->query();
$num    =   $db->getNumRows();
$result = $db->loadObject(); 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T12:09:15.867

按照示例中的说明将您的代码放入身份验证插件中。

# javascript - Javascript嵌套json函数：访问“this”

> ID：13875683
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:15:58.730
> 
> 标签：javascript

如果我有这个 json 结构：

```
var j = {
    param1: 'hello',
    param2: 'world',
    func:   function() {
        console.log(this.param1 + ' ' + this.param2);
    }
}; 
```

`this`in`func`未定义。如何在这个 json 对象中访问 self？谢谢

**编辑：**

我正在尝试：

```
j.func(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:19:44.240

`this`由函数的调用方式决定。要回答你的问题，我们需要看看你是怎么称呼的`func()`。

如果你打电话：

```
j.func() 
```

然后，`this`inside of`func`将被设置为`j`.

如果您`func()`直接调用（如果您`j.func`作为回调传递，然后由其他函数直接调用，则会发生这种情况），那么`this`可能会被设置为`window`或者`undefined`取决于您是否处于严格模式。例如：

```
function callme(callback) {
    // the context of `j` will be lost here and 
    // this will just call func() directly without setting this to j
    callback();
}

callme(j.func); 
```

`this`也可以由调用者通过使用`j.func.apply()`或`j.func.call()`允许调用者指定所需的值来显式设置`this`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:20:01.180

您只需要调用**j.func()**并且 func 中的 this 将引用 j，因为它是调用者。

# mysql - codeigniter mysql视图与查询

> ID：13875687
> 
> 赞同：4
> 
> 时间：2012-12-14T09:16:12.427
> 
> 标签：mysql, performance, codeigniter, activerecord, query-optimization

我正在使用 Codeigniter 进行开发，当它涉及到我正在使用的复杂数据库查询时

```
$this->db->query('my complicated query'); 
```

然后使用转换为对象数组`$query->result();`

到目前为止它非常好用

**现在我的问题是**

1.  如果我想创建 mysql 视图并从中选择怎么办？将要

    ```
    $this->db->from('mysql_view') 
    ```

    将 mysql 视图视为表或不是表？

2.  如果我这样做，性能上的任何差异是视图比普通数据库查询更快吗？

3.  Codeigniter 和 MYSQL 数据库处理复杂查询的最佳实践是什么，因为我知道 ActiveRecord 只是查询构建器，并且作为一些测试它甚至会慢一点

提前感谢您的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:23:23.027

1.  MySQL 视图的查询方式与表的查询方式相同，附带说明，您不能让表和视图共享相同的名称。
2.  取决于您在视图中使用的查询，视图可以在内部缓存，因此从长远来看 - 是的，它们更快。
3.  在这种情况下，最佳实践是使用您认为易于为您自己和您的团队使用的任何东西，我个人坚持使用`$this->db->query();`，因为我发现将此类简单查询更改为具有一些高级功能（如子查询或其他东西）更容易使用 CI 查询生成器很难和/或不可能做到这一点。我的建议是坚持一种查询方式 - 如果您使用`->query()`，则在任何地方使用它们，如果您使用查询构建器，则在任何可能使用它来实现结果的地方使用它。

# asp.net - 从禁用的下拉列表中访问选定的值

> ID：13875689
> 
> 赞同：0
> 
> 时间：2012-12-14T09:16:20.773
> 
> 标签：asp.net

当我使用 js 禁用下拉列表时，然后我从 .cs 页面访问。即使选择了一项，它也会给出 o 值。

我想禁用下拉列表，但同时我也想访问它的选定值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:26:31.873

尝试在隐藏字段中添加*下拉列表*的选定值，并从隐藏字段访问值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:22:04.550

您无法从 Code behind 访问禁用的项目。

禁用的表单值将不会在发布数据中发送。

检查这个帖子

[禁用的表单字段不提交数据](https://stackoverflow.com/questions/8925716/disabled-form-fields-not-submitting-data)

如果您需要添加一些 css 技术，例如不透明度并执行。

# oracle - Oracle 11g 和许多听众

> ID：13875690
> 
> 赞同：1
> 
> 时间：2012-12-14T09:16:23.217
> 
> 标签：oracle, oracle11g, listener

我目前正在学习 Oracle 11g 产品的数据库管理，但遇到了一些问题：

1）当共享服务被激活时，我们一定需要两个听众，我是对的吗？一个用于客户端与调度程序的连接，另一个用于启动等管理任务，...？（连接到共享服务器时无法启动服务器，我是对的吗？）

2）在客户端，我如何指示他必须使用哪个监听器？我知道它与 de tnsname.ora 文件有关，但如何在客户端站上设置它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:55:49.050

你仍然可以有一个听众。什么样的连接（共享与专用）取决于如何定义 tns 别名。所以只需在 tnsnames.ora 中定义单独的别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:46:22.567

您必须将 (SERVER=DEDICATED) 添加到您的 tnsnames 记录
中，并且您可以在数据库中运行管理任务

BASE1 =
    (DESCRIPTION =
      (ADDRESS_LIST =
        (ADDRESS = (PROTOCOL = TCP)(HOST = *host* )(PORT = *port* ))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = *SERVICE_NAME*)
      (SERVER=DEDICATED)
    )
    )

(SERVER=SHARED) - 用于共享连接；

# android - 如何仅使用一台设备为多设备屏幕尺寸开发 Android 应用程序

> ID：13875691
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:16:25.150
> 
> 标签：android

我开始开发android应用程序。

请教我如何为多设备开发 android 应用程序的任何资源或技巧。Android，有这么多设备尺寸。这让我很困惑。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:52:42.520

如果您使用的是日食；

在布局的可视化编辑器中，搜索“调色板”旁边的配置按钮。选择“预览所有屏幕尺寸”，因此您可以查看所有可能的屏幕尺寸的布局。然而，这只能帮助您查看布局，以便查看正在运行的功能、创建虚拟设备和测试您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:21:54.453

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)上有一个很棒的教程，其中列出了布局设计的最佳实践。还考虑使用[http://developer.android.com/guide/practices/tablets-and-handsets.html围绕片段构建应用程序以支持大型设备上的多个页面](http://developer.android.com/guide/practices/tablets-and-handsets.html)

最后，如果您只有一台设备，您可以使用模拟器测试不同的屏幕分辨率，并确保它仍然按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:27:55.623

您应该执行以下步骤：

1.)**使其适用于所有屏幕。**

将以下代码粘贴到`<manifest>`标签中，但粘贴在标签上方`<application>`。

代码：：

```
 <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" /> 
```

2.)**设置所有必需的 sdk 目标，示例如下：**

```
<uses-sdk
        android:maxSdkVersion="16"
        android:minSdkVersion="7"
        android:targetSdkVersion="8" /> 
```

3.)**添加以下文件夹`res/`并为每个文件夹开发布局**

```
a. layout
b. layout-land
c. layout-small
d. layout-small-land
e. layout-large
f. layout-large-land
g. layout-xlarge
h. layout-xlarge-land 
```

希望这会帮助你。

谢谢，哈普雷特。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:18:18.143

您必须创建具有不同大小和密度的 avd 实例来测试各种屏幕。

在日食中：

*   点击 Window/Android 虚拟设备管理器；
*   新的
*   设备 -> 在这里您可以选择屏幕尺寸和像素密度

# iphone - 具有自动滚动功能的 UILabel

> ID：13875700
> 
> 赞同：2
> 
> 时间：2012-12-14T09:16:54.003
> 
> 标签：iphone, ios, label

如何使用从左到右的自动滚动创建 UILabel？

像这样[http://www.youtube.com/watch?v=moI3ROPBm4Y](http://www.youtube.com/watch?v=moI3ROPBm4Y)

谢谢！

我为此使用此代码（来自 YouTube）：

```
-(void)time:(NSTimer *)theTimer{
  textLabel.center = CGPointMake(textLabel.center.x - 2.2, textLabel.center.y);

    if (textLabel.center.x < -(textLabel.bounds.size.width/1.5)){
    textLabel.center = CGPointMake(320 + (textLabel.bounds.size.width/1/5), textLabel.center.y);

} 
```

如何从左到右更改移动标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:18:06.850

您可以使用循环选择器将框架的视图区域缓慢地侧向移动。这应该可以解决问题，而不会阻塞 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:27:20.550

您必须创建一个覆盖 drawRect 的 UILabel 子类。然后在计时器上，您将使用偏移量重绘文本，最容易的是在图形上下文上不断增加平移变换。

您还必须小心在常用模式上安排计时器，否则标签的滚动将在用户开始滚动任何滚动视图时立即停止。

# sql - MERGE 语句的问题 - 分号错误 (SQL Server 2008)

> ID：13875707
> 
> 赞同：2
> 
> 时间：2012-12-14T09:17:31.430
> 
> 标签：sql, sql-server-2008

我已经在这个小提琴中完成了我所知道的关于 MERGE 的所有事情，但没有得到输出。希望有人会为此提出解决方案。

我已经做了一个简单的 MERGE 语句来同时使用源表插入、更新和删除目标表的值，一切都很好，但我收到错误消息说

![错误 - MERGE 语句必须以分号 (;) 终止](../Images/c47167554b164cf3baf21d956a92d09a.png)

我已经放了分号，但错误不断弹出。我正在研究 MERGE 语句以及如何使用 SQLFiddle 使用两个表来使用它们，有人请告诉我放置分号的正确方法。

这是小提琴 - [SQLFiddle](http://sqlfiddle.com/#!3/bf3dd/20)

这是 MERGE 的代码

```
MERGE Students AS T 

USING Teachers AS S
ON S.LastName = T. LastName and
S.FirstName = T.FirstName

WHEN MATCHED THEN
UPDATE SET T.Address = S.Address,
         T.Age = S.Age 

WHEN NOT MATCHED THEN
INSERT (LastName, 
      FirstName, 
      Address, 
      Age) 
      VALUES (S.LastName, 
      S.FirstName, 
      S.Address, 
      S.Age)

WHEN NOT MATCHED BY SOURCE THEN 
DELETE;

OUTPUT $action, Inserted.LastName, Inserted.FirstName, Deleted.LastName, Deleted.FirstName INTO @T;

Select * from @T; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:36:52.953

试试这个**[SQL Fiddle](http://sqlfiddle.com/#!3/bf3dd/47/0)**，`@T`定义是错误的，我还删除了分号，`DELETE`并将 SQL Fiddle 上的查询终止符更改为`GO`而不是分号。

# c - 如何将ASCII转换的int与C中的字符串连接起来

> ID：13875709
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:17:37.667
> 
> 标签：c

```
#include "stdio.h"
#include "conio.h"
int main()
{
    char str1[]=asc(20);
    char str2[]="SpApp|";
    strcat(str1,str2);  
    printf(str1);
    getch();  
} 
```

我想编写一个先转换`int`为`ASCII`代码的程序，然后将其连接`SpApp|`并打印`c`程序中的值。

虽然`printf("%c",20);`也提供了`ASCII`转换，但我不知道如何将它保存在另一个中`char str1[]`，然后将它与`char str2[];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:21:38.837

用于[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)创建包含附加字符串的缓冲区`int`：

```
char str2[32];
snprintf(str2, sizeof(str2), "SpApp|%d", 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:21:54.193

该`asc`函数返回单个字符，而不是字符串，因此数组`str1`将不包含终止特殊字符`'\0'`。

您必须`str1`正确初始化：

```
char str1[] = { asc(20), '\0' }; 
```

第二*个*问题是目标字符串`str2`不够大，无法同时包含您开始的字符串*和*要添加到其中的额外字符串。您需要使其足够大以包含两个字符串：

```
char str2[16] = "..."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:22:10.833

尝试使用 str1 和 str2 的指针，如下所示：

```
char *str1 = "string1";
char *str2 = "string2"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:25:29.253

```
#include "stdio.h"

int main() {
    char a[MAX_BUFFER];
    char res[MAX_BUFFER];

    itoa(20, a, 10);
    sprintf(res, "SpApp|%s", a);
    printf("%s", res);
} 
```

# css - SmartGWT：从 CSS 应用样式

> ID：13875715
> 
> 赞同：0
> 
> 时间：2012-12-14T09:17:48.847
> 
> 标签：css, smartgwt

我有一个 IButton 实例，我想在单击后更改它的名称和颜色。

```
 button.addClickHandler(new ClickHandler() {  
            public void onClick(ClickEvent event) {  
                if(button.getTitle().equals("Enabled")) {
                    button.setTitle("Disabled");
                    button.setTitleStyle("disabledButton");
                }
                else {
                    button.setTitle("Enabled");
                    button.setTitleStyle("enabledButton");
                }                   
            }
       }); 
```

正如我们在一般 GWT 项目中所做的那样，我在默认的 .css 文件中添加了以下内容：

```
.enabledButton {
  color:green;
}

.disabledButton {
  color:red;
} 
```

但是当我运行应用程序时，它既不显示红色也不显示绿色。

SmartGWT 中还有其他方法可以应用 CSS 样式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:10:01.307

IButton 是一个 StatefulCanvas，这意味着它处理状态。这是通过在基本样式名称后添加后缀来完成的。例如，如果您将 titleStyle 设置为“enableButton”并将鼠标移到按钮上，它将查找 css 类：enableButtonOver。如果按钮也被聚焦，它将寻找 enableButtonFocusedOver 等（有几个后缀组合）。如果您从浏览器外部单击，则您的示例有效，因此它将失去焦点，并且只会使用 enableButton css 类。您可以通过例如 setShowFocused(false) 禁用每个状态。请参阅[api](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/StatefulCanvas.html)。

# zend-framework - 如何使用语言文件夹中的多个语言文件在 Zend Framework 中使用多种语言

> ID：13875719
> 
> 赞同：0
> 
> 时间：2012-12-14T09:17:59.897
> 
> 标签：zend-framework, zend-translate

我想将我的系统转换为在 zend 框架中构建的多种语言。我有一个语言文件夹，这个文件夹我创建了多个语言文件夹，如 en、jp、ch 等。所有语言文件夹都有自己的语言文件，如 en.php、jp.php、ch.php 并在其中定义了常量。那么我如何在 Zend Framework 中使用这个语言系统。

# .net - 从子中的 FormClosing 事件中关闭父级

> ID：13875729
> 
> 赞同：2
> 
> 时间：2012-12-14T09:18:36.140
> 
> 标签：.net, winforms

是否可以在子窗体的 FormClosing 事件中关闭父窗体？

这会引发错误，因为`Close()`父母会再次尝试关闭孩子......

我会更新这个问题，因为有人反对它。我将progress（OpenEdge）与.NET一起使用。如果我有这样的结构，其中子表单试图关闭父表单，我会收到一个巨大的进度错误。我想知道在纯 .NET WinForms 应用程序中这是否会成为问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:28:05.947

如果您先删除子项，可以使用以下方法将子项从其父项中删除：

```
' Remove child from parent
    Dim p As Form = myChild.Parent
    p.Children.Remove(myChild) 
```

# sql-server - 必须在 sql 过程中声明标量变量

> ID：13875732
> 
> 赞同：4
> 
> 时间：2012-12-14T09:18:51.770
> 
> 标签：sql-server, stored-procedures

请问下面的程序语句有什么问题

```
 DECLARE  @result int 
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    set @result = (select COUNT(*) from populate)

    if (@result > 1)
    Begin
        insert into populate (brch, terminal_id) values(@branch, @atmid)
    end 
```

* * *

```
 SET ANSI_NULLS ON
    GO
     SET QUOTED_IDENTIFIER ON
    GO

    CREATE PROCEDURE insertion @id varchar(50), @brch varchar(50)
    -- Add the parameters for the stored procedure here

   AS
    BEGIN
   DECLARE  @result int 
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    set @result  = (COUNT(*) from populate)

    if (@result > 1)
    Begin
        insert into populate (brch, terminal_id) values(@id, @brch)
    end
    END
    GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:27:12.033

似乎您首先发布了一段给出错误的代码，`Msg 137, Level 15, State 2, Line 11 Must declare the scalar variable "@branch".`然后添加了一个给出错误的完整过程，从而使事情变得混乱`Msg 156, Level 15, State 1, Procedure insertion, Line 13 Incorrect syntax near the keyword 'from'.`

请确保您发布您正在使用的真实代码以及完整的错误消息，否则人们无法帮助您。

无论如何，我忽略了代码片段，只查看了过程，正如 ABFORCE 所说，问题在于您填充的位置，`@result`因为您的语法错误。此过程代码在 SQL Server 2008 中解析没有错误：

```
 CREATE PROCEDURE insertion @id varchar(50), @brch varchar(50)
    -- Add the parameters for the stored procedure here

   AS
    BEGIN
   DECLARE  @result int 
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    select @result  = COUNT(*) from populate

    if (@result > 1)
    Begin
        insert into populate (brch, terminal_id) values(@id, @brch)
    end
    END
    GO 
```

您可能需要查看为变量和关键字[赋值的文档。](http://msdn.microsoft.com/en-us/library/ms175852%28v=sql.100%29.aspx)[`SET`](http://msdn.microsoft.com/en-us/library/ms189484%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:24:31.893

正如错误消息中所说的那样，问题是在`@branch`使用`@atmid`它们的值之前没有提到任何地方。

你已经声明`@result`了`set`它的价值，所以你需要做同样的事情，`@branch`而且`@atmid`系统无法为你预测价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T06:42:08.347

尝试这个

```
select @result =COUNT(*) from populate 
```

# c# - 重载方法的单元测试

> ID：13875735
> 
> 赞同：1
> 
> 时间：2012-12-14T09:19:09.090
> 
> 标签：c#, unit-testing

我一直在努力为我们的一些代码编写一些单元测试，而我正在努力解决这个问题：

我们有一个重载的方法，它是这样的：

```
 Public Client GetClient(int productID)
 {
  //Some sql that evaluate a client

  if(!GetClient(clientRef,ClientTypeRef))
   Return Client.UnknownClient;
    //some other sql and codes
  Return Client.CustomerClient;
  } 
```

问题是我该如何解决这个问题，在我的测试中，我尝试向 中添加一个模拟`GetClient(clientRef,ClientTypeRef)`并返回一个 OK 客户端（除 之外的任何内容`Client.UnknownClient`）以允许我继续但我得到一个空引用？是否可以模拟和测试这些方法，我将如何继续这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:13:55.630

单元测试变得如此流行的原因之一是它被证明可以鼓励[SOLID 设计原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

根据您包含的一小段代码，我认为您的困难可能来自您的`GetClient(int productID)`职责太多，因此您很难单独测试它们。

按照我的理解，你是：

*   从数据库加载客户端（按产品 ID？）
*   检查（复杂的逻辑涉及对数据库的更多查询？）它是什么类型的客户端

我鼓励您（如果可能）尝试重构代码，而不是模拟`GetClient(clientRef,ClientTypeRef)`以便您可以测试其下的每个逻辑路径，以便您将客户端的加载与客户端类型的检查以及可能的一些您分组的逻辑`//some other sql and codes`。

这应该使单独测试每个部分变得更容易，但最重要的是会使您的代码更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:24:56.303

您正在使用什么模拟框架工作？

我使用[moq](http://code.google.com/p/moq/)来模拟这种方法，你会做类似的事情

```
 _mockClientRepository.Setup(x => x.GetClient(It.IsAny<int>(),It.IsAny<int>())).Returns(Client.CustomerClient); 
```

基本上这意味着传递给该方法的任何整数将始终返回 Client.CustomerClient

# objective-c - 如何从 NSDate 获取格式 2012-11-19T19:35:00.0000000-07:00？

> ID：13875738
> 
> 赞同：1
> 
> 时间：2012-12-14T09:19:31.160
> 
> 标签：objective-c, nsdate, nsdateformatter

我有一个格式 2012-11-19T19:35:00.0000000-07:00 我怎样才能从 NSDate 实现这个？

```
 NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"yyy-MM-dd'T'HH:mm:ssZ"];
 NSDate *today = [NSDate date];
 NSString *dateString =[dateFormatter stringFromDate:today];
 NSLog(@"Date is: %@",dateString); 
```

我得到 NSLog 为 2012-11-09T14:22:00+0530 但我想要 2012-11-09T19:35:00.0000000-07:00

我怎样才能把它弄出来。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:28:00.017

采用

```
[dateFormatter setDateFormat:@"yyy-MM-dd'T'HH:mm:ss.SSSSSSSZZZZZ"]; 
```

更多关于如何在[此处](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)使用 NSFormater 格式化日期。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:28:24.150

`NSDate`符合 Unicode 技术标准，您需要查看[Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)以找出您想要的格式，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:55:30.757

根据您的要求，您可以执行此操作。结果将是

```
//Your desired : 2012-11-09T19:35:00.0000000-07:00 
//You will get : 2012-11-09T12:30:00.0000000+05:30

[dateFormatter setDateFormat:@"yyy-MM-dd'T'HH:mm:ss.SSSSSSSZZZZZ"]; 
```

# user-controls - Sitefinity 小部件对象引用未设置为对象的实例

> ID：13875744
> 
> 赞同：0
> 
> 时间：2012-12-14T09:19:47.047
> 
> 标签：user-controls, widget, sitefinity-4

我创建了一个 Sitefinity 小部件，其中只有和 iframe。

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="ApplicationFrame.ascx.cs"
Inherits="MyProject.Web.Ui.Customized.EmbeddedApplications.ApplicationFrame" %>

<iframe runat="server" id="ApplicationIFrame" height="250" width="250" scrolling="no" frameborder="0" seamless="seamless" src=""></iframe> 
```

在小部件的 Page_Load 中，我尝试访问服务器端 iframe 的任何属性，但我总是得到“对象引用未设置为对象的实例”。

这是C#

```
namespace MyProject.Web.Ui.Customized.EmbeddedApplications
{
        [ControlDesigner(typeof(ApplicationFrameDesigner))]
        public partial class ApplicationFrame : System.Web.UI.UserControl
        {
            public string FrameSourceUrl {get;set;}
            public string FrameHeight { get; set; }
            public string FrameWidth { get; set; }
            protected void Page_Load(object sender, EventArgs e)
            {
                //set the values of the iframe to the current properties
                ApplicationIFrame.Attributes["src"] = FrameSourceUrl;
                ApplicationIFrame.Attributes["height"] = FrameHeight;
                ApplicationIFrame.Attributes["width"] = FrameWidth;
            }
        }
} 
```

我最近将项目从网站更改为 Web 应用程序，但这似乎并没有以任何方式影响项目。

除此之外，我不明白为什么无论我做什么都会抛出这个异常。

其他人知道问题可能是什么吗？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T14:20:58.960

根据您创建的小部件的类型，这可能不起作用。它可能适用于普通用户控件，但不适用于自定义控件。

如果您遵循 sitefinity 文档，则可以从 SimpleView 继承。然后，您可以访问用于从模板中检索控件的辅助方法。所以代替这个：

```
ApplicationIFrame.Attributes["src"] = FrameSourceUrl; 
```

你可以这样做：

```
this.GetControl<HtmlControl>("ApplicationIFrame", true).Attributes["src"] = FrameSourceUrl; 
```

# r - Tktable：在 R 中找不到

> ID：13875747
> 
> 赞同：3
> 
> 时间：2012-12-14T09:19:51.873
> 
> 标签：r, tcl, tk

我尝试在 R 中使用 tcltk，但找不到包 Tktable。

```
> library("tcltk")
Loading Tcl/Tk... OK
> tclRequire("Tktable")
[1] FALSE
Warning :
In tclRequire("Tktable") : the package Tcl 'Tktable' is not found 
```

当我安装 R (r-base-core) 时，所有这些 linux 软件包也都安装了：

```
tcl                     install
tcl-dev                 install
tcl8.5                  install
tcl8.5-dev              install
tcllib                  install
tk                      install
tk-dev                  install
tk8.5                   install
tk8.5-dev               install
tklib                   install 
```

我尝试手动安装 libtktable2.9，这些软件包会自动安装：

```
libtktable2.9:i386          install
tk8.4:i386                  install
tcl8.4:i386                 install 
```

我尝试了 R 中的函数 addTclPath （使用不同的路径，因为我真的不明白 tcl 位置在哪里......），但没有任何变化。

我在几个论坛上看到过类似的帖子，但还没有答案。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-27T14:37:29.263

[http://bioinf.wehi.edu.au/affylmGUI/#testBWTk](http://bioinf.wehi.edu.au/affylmGUI/#testBWTk)描述了安装 Tktable。

> 要安装 Tktable，请从[http://tktable.sourceforge.net](http://tktable.sourceforge.net)下载。从这个站点，选择“File Distributions”，选择“tktable”链接，选择最新版本（当前为 2.10），然后选择 tar.gz 文件（当前为“Tktable2.10.tar.gz”）。将其保存到合适的位置，解压缩并解压缩它（示例命令是“tar zxf Tktable2.10.tar.gz”）。查看 Tktable 目录并阅读 README.txt 文件安装说明。

为了让 Tktable 在 debian 上安装，我先安装了这个

```
sudo apt-get install tcl-dev tk-dev mesa-common-dev libjpeg-dev libtogl-dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-09T10:04:00.080

在 Ubuntu 18.04 上，我可以安装包`tk-table`

```
sudo apt install tk-table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T14:07:01.943

仅用于其他读者的文档目的：

> Windows 用户应该知道， **R for Windows 安装程序中包含的 Tcl 扩展“BWidget”和“Tktable”**是扩展，确实需要声明。'Tktable' 确实作为 CRAN for Mac OS X 上提供的 Tcl/Tk 的一部分提供，但您需要告诉您的用户如何使用它：
> 
> ```
>  > addTclPath('/usr/local/lib/Tktable2.9')
>  > tclRequire('Tktable')
>  <Tcl> 2.9 
> ```

所以不需要额外的 tcl/tk 或 tktable 安装。

来源：[http ://www.pqr-project.org/R-exts.html](http://www.pqr-project.org/R-exts.html)

# android - 在 Android 中使用 Fragment 崩溃进行方向更改活动

> ID：13875750
> 
> 赞同：0
> 
> 时间：2012-12-14T09:19:54.767
> 
> 标签：android, screen-orientation

我正在开发一个使用片段的应用程序。在线程应用程序崩溃时调用 Web 服务。当方向改变时，日志以红色显示以下异常：

```
12-14 14:36:51.770: E/WindowManager(5270): Activity com.weg.ecatalogfragment.ECatalogFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41457e20 that was originally added here
12-14 14:36:51.770: E/WindowManager(5270): android.view.WindowLeaked: Activity com.weg.ecatalogfragment.ECatalogFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41457e20 that was originally added here
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:345)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:268)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:216)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:141)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-14 14:36:51.770: E/WindowManager(5270):  at android.app.Dialog.show(Dialog.java:278)
12-14 14:36:51.770: E/WindowManager(5270):  at android.app.ProgressDialog.show(ProgressDialog.java:117)
12-14 14:36:51.770: E/WindowManager(5270):  at android.app.ProgressDialog.show(ProgressDialog.java:100)
12-14 14:36:51.770: E/WindowManager(5270):  at android.app.ProgressDialog.show(ProgressDialog.java:95)
12-14 14:36:51.770: E/WindowManager(5270):  at com.weg.ecatalogfragment.HomeScreen.syncWithServer(HomeScreen.java:416)
12-14 14:36:51.770: E/WindowManager(5270):  at com.weg.ecatalogfragment.HomeScreen.onClick(HomeScreen.java:622)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.View.performClick(View.java:3528)
12-14 14:36:51.770: E/WindowManager(5270):  at android.view.View$PerformClick.run(View.java:14235)
12-14 14:36:51.770: E/WindowManager(5270):  at android.os.Handler.handleCallback(Handler.java:605)
12-14 14:36:51.770: E/WindowManager(5270):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-14 14:36:51.770: E/WindowManager(5270):  at android.os.Looper.loop(Looper.java:137)
12-14 14:36:51.770: E/WindowManager(5270):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-14 14:36:51.770: E/WindowManager(5270):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 14:36:51.770: E/WindowManager(5270):  at java.lang.reflect.Method.invoke(Method.java:511)
12-14 14:36:51.770: E/WindowManager(5270):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
12-14 14:36:51.770: E/WindowManager(5270):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
12-14 14:36:51.770: E/WindowManager(5270):  at dalvik.system.NativeStart.main(Native Method) 
```

再次调用此 Activity 后，由于代码流的原因，上下文无法出现在警报框和应用程序崩溃。

```
12-14 14:37:16.950: E/AndroidRuntime(5270): FATAL EXCEPTION: main
12-14 14:37:16.950: E/AndroidRuntime(5270): java.lang.NullPointerException
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.AlertDialog.<init>(AlertDialog.java:98)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.ProgressDialog.<init>(ProgressDialog.java:78)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.ProgressDialog.show(ProgressDialog.java:111)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.ProgressDialog.show(ProgressDialog.java:100)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.ProgressDialog.show(ProgressDialog.java:95)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at com.weg.ecatalogfragment.HomeScreen$1.dispatchMessage(HomeScreen.java:141)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.os.Looper.loop(Looper.java:137)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at java.lang.reflect.Method.invoke(Method.java:511)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
12-14 14:37:16.950: E/AndroidRuntime(5270):     at dalvik.system.NativeStart.main(Native Method) 
```

要么它不应该再次调用 Activity，要么此时流应该停止。

如果使用此片段，请建议我，我应该如何处理我的网络服务。下面是我的代码：

```
public class HomeScreen extends Fragment implements OnClickListener,OnItemSelectedListener,IServerResponse
{

    private Handler _handler = new Handler() {
        public void dispatchMessage(Message msg) {
            switch (msg.arg2) {
            case Constant.PID_GETUPDATEDATA:
                final ProgressDialog progressDialog = ProgressDialog.show(HomeScreen.this.getActivity(),"", Constant.MSG_SYNC);
                final String msgData = (String) msg.obj;
                new Thread(new Runnable() {
                    public void run() {
                        Looper.prepare();
                        try{
                            if (msgData.equalsIgnoreCase("We apologize, no data was found.")) {

                                HomeScreen.this.getActivity().runOnUiThread(new Runnable() {
                                    public void run() {
                                        Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR,
                                                Constant.MSG_NOUPDATE, HomeScreen.this.getActivity(), false);       
                                    }
                                });

                            }else{
                                JSONObject jsonObject=new JSONObject(msgData);
                                JSONObject electricObject = jsonObject.getJSONObject("NewDataSet");
                                JSONArray electricDBArray=electricObject.getJSONArray("Electrical_DB");

                                int count=electricDBArray.length();

                                String PrivousDateTime=myPref.getString("PREVIOUS_DATETIME", "");
                                if(PrivousDateTime.equals("")||PrivousDateTime==null)
                                {                                                   
                                    _eCatalogueTable.deleteTable(ECatalogueDatabase.DATABASE_TABLE);
                                }

                                for(int j=0;j<count;j++)
                                {
                                    String productLineID=electricDBArray.getJSONObject(j).getString("id");
                                    String productLine=electricDBArray.getJSONObject(j).getString("productline");
                                    String hp = electricDBArray.getJSONObject(j).getString("outputhp");
                                    String rpm = electricDBArray.getJSONObject(j).getString("rpm");
                                    String voltage = electricDBArray.getJSONObject(j).getString("voltage");
                                    String frame = electricDBArray.getJSONObject(j).getString("frame");
                                    if(!isProductIDPresentInDb(productLineID))
                                    {                           
                                        _eCatalogueTable.InsertECatalogue(productLineID,productLine,hp, rpm, voltage, frame);
                                    }else
                                    {
                                        _eCatalogueTable.updateECatalogue(productLineID,productLine, hp, rpm, voltage, frame);
                                    }
                                }       

                                HomeScreen.this.getActivity().runOnUiThread(new Runnable() {
                                    public void run() {
                                        Constant.showAlertDialog(Constant.DIALOG_TITLE_SUCCESS,Constant.MSG_SUCCESS, HomeScreen.this.getActivity(), false); 
                                        findGMTDateTime();
                                        _mEditPref=myPref.edit();
                                        _mEditPref.putString("PREVIOUS_DATETIME", dateTimeValue);
                                        _mEditPref.commit();
                                    }
                                });
                            }
                        }catch(Exception e)
                        {
                            e.printStackTrace();
                            HomeScreen.this.getActivity().runOnUiThread(new Runnable() {
                                public void run() {
                                    Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR,
                                            Constant.MSG_SERVER_FAIL, HomeScreen.this.getActivity(), false);        
                                }
                            });

                        }
                        progressDialog.cancel();
                    }

                }).start();
                break; 
            case Constant.PID_ALERTDIGLOG:
                Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR,Constant.MSG_SERVER_FAIL, HomeScreen.this.getActivity(),false);
                break;

            }
        };
    };

    @SuppressWarnings({ "unchecked", "rawtypes" })
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {
        mContentView = inflater.inflate(R.layout.home_screen , container, false);

        _eCatalogueTable=new ECatalogueDatabase(HomeScreen.this.getActivity());
        _eCatalogueTable.open();

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            _headetRelativelayout=(RelativeLayout)mContentView.findViewById(R.id.header_layout);
            _headetRelativelayout.setVisibility(View.GONE);

        }
        if(savedInstanceState!=null)
        {
            saveState="SavedInstance";
            rotateSaveInstace=true;
            Constant.checkPdf=false;
            //Toast.makeText(this.getActivity(),"savedInstaceState", Toast.LENGTH_LONG).show();
        }else
        {
            saveStateBoolea=true;
            saveState="NoSavedInstance";
            //  Toast.makeText(this.getActivity(),"No savedInstaceState", Toast.LENGTH_LONG).show();
        }

        _productText=(TextView)mContentView.findViewById(R.id.productline_txt);
        _hpText=(TextView)mContentView.findViewById(R.id.hp_txt);
        _rpmText=(TextView)mContentView.findViewById(R.id.rpm_txt);

        _voltageText=(TextView)mContentView.findViewById(R.id.voltage_txt);
        _frameSizeText=(TextView)mContentView.findViewById(R.id.frame_txt);

        _searchBypartEditText=(EditText)mContentView.findViewById(R.id.searchpart_edittxt);

        _searchButton=(Button)mContentView.findViewById(R.id.serach_btn);
        _searchButton.setEnabled(false);
        _searchButton.setOnClickListener(this);

        _syncButton=(Button)mContentView.findViewById(R.id.sync_btn);
        _syncButton.setOnClickListener(this);

        _productSpinner=(Spinner)mContentView.findViewById(R.id.productline_spinner);
        _productSpinner.setOnItemSelectedListener(this);

        _hpSpinner=(Spinner)mContentView.findViewById(R.id.hp_spinner);
        _hpSpinner.setOnItemSelectedListener(this);

        _rpmSpinner=(Spinner)mContentView.findViewById(R.id.rpm_spinner);
        _rpmSpinner.setOnItemSelectedListener(this);

        _voltageSpinner=(Spinner)mContentView.findViewById(R.id.voltage_spinner);
        _voltageSpinner.setOnItemSelectedListener(this);

        _frameSpinner=(Spinner)mContentView.findViewById(R.id.frame_spinner);
        _frameSpinner.setOnItemSelectedListener(this);

        _productRealtiveLayout=(RelativeLayout)mContentView.findViewById(R.id.product_layout);
        _productRealtiveLayout.setOnClickListener(this);

        _hpRelativeLayout=(RelativeLayout)mContentView.findViewById(R.id.hp_layout);
        _hpRelativeLayout.setOnClickListener(this);

        _rpmRelativeLayout=(RelativeLayout)mContentView.findViewById(R.id.rpm_layout);
        _rpmRelativeLayout.setOnClickListener(this);

        _voltageRelativeLayout=(RelativeLayout)mContentView.findViewById(R.id.voltage_layout);
        _voltageRelativeLayout.setOnClickListener(this);

        _framSizeRelativeLayout=(RelativeLayout)mContentView.findViewById(R.id.frame_layout);
        _framSizeRelativeLayout.setOnClickListener(this);

        useTextwatcher();

        _mHPArrayList.add(0, getString(R.string.hp_txt));
        _mRPMArrayList.add(0, getString(R.string.rpm_txt));
        _mVoltageArrayList.add(0,getString(R.string.voltage_txt));
        _mFrameSizeLineArrayList.add(0,getString(R.string.frame_txt));

        _productSpinner.setSelection(0);
        _hpSpinner.setSelection(0);

        _rpmSpinner.setSelection(0);
        _voltageSpinner.setSelection(0);
        _frameSpinner.setSelection(0);

        fetchProductLineFromDatabase();

        _productLineArrayAdapter = new ArrayAdapter(this.getActivity(),android.R.layout.simple_spinner_dropdown_item,_mProductLineArrayList);

        _hpArrayAdapter=new ArrayAdapter(this.getActivity(),android.R.layout.simple_spinner_dropdown_item,_mHPArrayList);
        _rpmArrayAdapter = new ArrayAdapter(this.getActivity(),android.R.layout.simple_spinner_dropdown_item,_mRPMArrayList);
        _voltageArrayAdapter = new ArrayAdapter(this.getActivity(),android.R.layout.simple_spinner_dropdown_item,_mVoltageArrayList);
        _frameSizeArrayAdapter=new ArrayAdapter(this.getActivity(),android.R.layout.simple_spinner_dropdown_item,_mFrameSizeLineArrayList);

        _productSpinner.setAdapter(_productLineArrayAdapter);
        _hpSpinner.setAdapter(_hpArrayAdapter);
        _rpmSpinner.setAdapter(_rpmArrayAdapter);
        _voltageSpinner.setAdapter(_voltageArrayAdapter);
        _frameSpinner.setAdapter(_frameSizeArrayAdapter);

        // GMT Date Time
        date=new Date();
        simpleDateFormat=new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
        myPref=getActivity().getPreferences(Context.MODE_PRIVATE);
        String PrivousDateTime=myPref.getString("PREVIOUS_DATETIME", "");
        boolean firstCheckAlert=myPref.getBoolean("FIRST_ALRT", firstTimeShowAllert);
        if(!firstCheckAlert)
        {
            showMessageAlert();
        }
        if(PrivousDateTime.equals("")||PrivousDateTime==null)
        {
            dateTimeValue= "01/01/2012 00:00:00";
        }else
        {
            dateTimeValue=PrivousDateTime;
        }
        return mContentView;
    }

    private void syncWithServer() {

        if (NetworkAvailablity.checkNetworkStatus(HomeScreen.this.getActivity()))
        {

            final ProgressDialog progressDialog = ProgressDialog.show(HomeScreen.this.getActivity(),"",Constant.MSG_SYNC);
            new Thread(new Runnable() {
                public void run() {
                    String response = "";
                    SoapObject request = new SoapObject(WebServiceDetails.SERVICENAMESPACE,WebServiceDetails.METHOD_CHECKLATESTDATADATE);
                    request.addProperty("lastmodifieddate",dateTimeValue);
                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.dotNet = true;
                    envelope.setOutputSoapObject(request);
                    AndroidHttpTransport httpTransport = new AndroidHttpTransport(WebServiceDetails.URL);
                    httpTransport.debug = true;
                    try {
                        httpTransport.call(WebServiceDetails.SOAP_CHECKLATESTDATADATE, envelope); // send

                        Object data = envelope.getResponse();
                        if (data instanceof SoapObject) {
                            SoapObject data2 = (SoapObject) data;
                            response = data2.toString();
                        } else if (data instanceof SoapPrimitive) {
                            SoapPrimitive data3 = (SoapPrimitive) data;
                            response = data3.toString();
                        } else if (data != null) {
                            response = data.toString();
                        } else if (data == null) {
                            response = "nodata";
                        }
                        serverResponse(response,Constant.PID_GETUPDATEDATA);
                    }catch (Exception e) {
                        e.printStackTrace();
                        serverResponse(null,Constant.PID_ALERTDIGLOG);
                    }
                    progressDialog.dismiss();
                }
            }).start();
        }
        else {
            Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR,Constant.MSG_INTERNETERROR, HomeScreen.this.getActivity(),false);
        }

    }

    public void onClick(View v) {
        fetchTextvalue();
        switch (v.getId()) {

        case R.id.serach_btn:
            if (NetworkAvailablity.checkNetworkStatus(HomeScreen.this.getActivity())){
                FragmentManager fm = this.getActivity().getSupportFragmentManager();
                int count=fm.getBackStackEntryCount();
                System.out.println("gdfgdgcvbccccccccccccccccccc "+count);
                for(int i = 0; i < count; ++i) {    
                    fm.popBackStack();
                }
                fetchTextvalue();

                if(!(_fetchProductText.equalsIgnoreCase(getString(R.string.product_txt))||_fetchHpText.equalsIgnoreCase( getString(R.string.hp_txt))
                        ||_fetchRPMText.equalsIgnoreCase( getString(R.string.rpm_txt))||_fetchVoltageText.equalsIgnoreCase(getString(R.string.voltage_txt))
                        ||_fetchFrameSizeText.equalsIgnoreCase(getString(R.string.frame_txt))))
                {
                    if(_mGetEditValue.equalsIgnoreCase(getString(R.string.enterpart_txt))||_mGetEditValue==null)
                    {
                        dataSheetCall();
                    }else
                    {
                        Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR, Constant.MSG_ENABLESEARCH, HomeScreen.this.getActivity(), false);
                        _searchBypartEditText.setText("");
                        _searchButton.setEnabled(true);
                        _mGetEditValue=(getString(R.string.enterpart_txt));
                    }
                }else if((!_mGetEditValue.equalsIgnoreCase(getString(R.string.enterpart_txt)))||_mGetEditValue!=null)
                {
                    if((_fetchProductText.equalsIgnoreCase(getString(R.string.product_txt))&&_fetchHpText.equalsIgnoreCase( getString(R.string.hp_txt))
                            &&_fetchRPMText.equalsIgnoreCase( getString(R.string.rpm_txt))&&_fetchVoltageText.equalsIgnoreCase(getString(R.string.voltage_txt))
                            &&_fetchFrameSizeText.equalsIgnoreCase(getString(R.string.frame_txt))))
                    {
                        dataSheetCall();
                    }
                    else
                    {
                        Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR, Constant.MSG_ENABLESEARCH, HomeScreen.this.getActivity(), false);
                        _searchBypartEditText.setText("");
                        _searchButton.setEnabled(true);
                        resetValue();

                    }
                }
            }else{
                Constant.showAlertDialog(Constant.DIALOG_TITLE_ERROR,Constant.MSG_INTERNETERROR, HomeScreen.this.getActivity(),false);
                _productSpinner.setSelection(0);
            }

            break;          

            case R.id.sync_btn:
        syncWithServer();

        break;
        default:
            break;
        }       
    }

    private void dataSheetCall()
    {
        if (getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) {
            Intent datasheetIntent=new Intent(this.getActivity(),DataSheetScreenActivity.class);
            datasheetIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            datasheetIntent.putExtra("PRODUCTLINE", _productString);
            datasheetIntent.putExtra("HP", _hpString);
            datasheetIntent.putExtra("RPM",_rpmString);
            datasheetIntent.putExtra("VOLTAGE", _voltageString);
            datasheetIntent.putExtra("FRAMESIZE", _frameSizeString);
            datasheetIntent.putExtra("PART NUMBER", _mGetEditValue);
            Constant.putAllValue(_productString, _hpString, _rpmString, _voltageString, _frameSizeString,_mGetEditValue);
            startActivity(datasheetIntent);
        } else {

            if(saveStateBoolea)
            {
                ImageFragment rightFrag = (ImageFragment) getFragmentManager().findFragmentByTag("imageFragmentTag");
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.remove(rightFrag);
                ft.commit();
                saveStateBoolea=false;
            }else if(saveState.equalsIgnoreCase("SavedInstance")&&(rotateSaveInstace==true))
            {
                ImageFragment rightFrag = (ImageFragment) getFragmentManager().findFragmentByTag("imageFragmentTag");
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.remove(rightFrag);
                ft.commit();
                rotateSaveInstace=false;
            }

            DataSheetScreenFragment dataSheetFragment = new DataSheetScreenFragment();
            fragmentTransaction = this.getActivity().getSupportFragmentManager().beginTransaction();
            fragmentTransaction.add(R.id.top_right_datasheet_relative_layout, dataSheetFragment, "rightDrawingFragmentTag"); //First parameter is the container id
            fragmentTransaction.addToBackStack("1");
            fragmentTransaction.show(dataSheetFragment);
            fragmentTransaction.commit();

            Constant.putAllValue(_productString, _hpString, _rpmString, _voltageString, _frameSizeString,_mGetEditValue);

            _pdfIcon=(ImageButton)this.getActivity().findViewById(R.id.pdf_icon);
            _pdfIcon.setVisibility(View.VISIBLE);

            _pdfText=(TextView)this.getActivity().findViewById(R.id.pdf_txt);
            _pdfText.setVisibility(View.VISIBLE);
        }
        resetValue();
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        Toast.makeText(this.getActivity(), "No select", Toast.LENGTH_LONG).show();
    }
    @Override
    public void onDestroy() {
        _eCatalogueTable.close();
        super.onDestroy();
    }
    @Override
    public void onResume() {
        super.onResume();
        if(!Constant.checkPdf)
        {
            _productSpinner.setSelection(0);
        }

    }

    public void serverResponse(String response, int processid) {
        Message msg = new Message();
        msg.arg2 = processid;
        msg.obj = response;
        _handler .sendMessage(msg);     
    }
    @Override
    public void onPause() {
        super.onPause();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:44:35.170

可能是解决方案是在退出活动之前调用`dismiss()`您创建的对话框。`ViewRootImpl.java`

**编辑：**

看到你的错误在下面说：

```
android.view.WindowLeaked: Activity com.weg.ecatalogfragment.ECatalogFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41457e20 that was originally added here
at android.view.ViewRootImpl.<init>(ViewRootImpl.java:345) 
```

因此，当您传递构造函数时，每个视图都有对其父上下文的引用。如果你离开一个 Activity 而不破坏 Dialogs 和其他动态创建视图的 Activity，它们仍然持有对你的 Activity 的引用（如果你使用`this`as Context: like创建`new ANY(this)`），所以它**不会被 GC 收集，从而导致内存泄漏**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:35:34.527

添加到 android manifest.xml 中的活动标签中

```
<activity android:name=".activityname"
              android:label="@string/app_name" android:configChanges="orientation" 
```

# php - 过滤 MySQL 结果的最佳实践

> ID：13875753
> 
> 赞同：5
> 
> 时间：2012-12-14T09:20:02.933
> 
> 标签：php, mysql, join, filter

我想在我的 PHP 项目中实现一个过滤器功能。为了实现过滤器，我通常只在查询中添加一个 WHERE 子句来显示过滤结果。

我的问题是：这些过滤器不仅需要一个简单的添加 WHERE 子句，还需要一个包含多个 JOIN的**巨大查询。**生成的查询有 > 30 行。

稍后，还应该有一个搜索功能，然后也需要这个巨大的查询。我想知道这是否是一个好习惯，或者我是否应该在我的数据库表中添加一个“冗余”数据库列，在其中计算每次更新时过滤所需的属性。有了这个专栏，我就不会在我的项目的不同地方进行大量查询，而是有一个多余的专栏。

你怎么看？

问候

**如上所述，这里是表结构/代码。**这不是确切的代码，因为还有一个修订系统使它变得更加复杂，但理解这一点就足够了：

**表格提交：**

```
ID (primary)
(additionalColumns) 
```

**表格报告：**

```
ID (primary)
submissionID (reference to submission table)
(additionalColumns) 
```

**表报告对象：**

```
reportID (reference to reports table, multiple report_object for one report) 
```

**表会计：**

```
ID (primary)
reportID (reference to reports table, multiple accountings for one report)
(additionalColumns) 
```

**表accounting_objects：**

```
ID
accountingID (reference to accounting table, multiple accounting_object for one accounting)
(additionalColumns) 
```

对于提交，正在创建一个或多个报告，其中包含多个帐户对象 (report_objects)。对于每个报告，我可以创建多个会计，其中每个会计用于报告的几个对象。会计报表对象存储在accounting_object中

我的查询/过滤器检查一个submissionID 的每个report_object 是否为一个submissionID 计算（accounting_object 存在）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:21:02.113

没有一个明确的答案，并且在实践中，如果它可以工作并且运行速度足够快以满足您的需求，那么您可以保持原样。优化总是你可以回来的东西。

## 正确加入

如果您只是检查连接表的存在并且只包含该连接的结果，您可以通过正确的 LEFT / RIGHT JOIN 表达式来执行此操作。这始终是第一个电话。

## 表现力

还要尽可能地使用 SQL 来表达，你想给它最好的机会来优化你的查询，例如，有诸如 EXISTS 之类的关键字，请确保使用它们。

## 非规范化

您可以添加一个存储计算值的列，由此产生的复杂性是确保该值始终是最新的。这可以通过触发器或手动完成。优点：

*   这是解决计算列引入的缓慢的最简单方法。

缺点：

*   破坏你漂亮的规范化模式
*   如果您在代码中手动执行此操作，您将忘记在某个地方执行此操作，从而导致头痛。
*   触发器可能有点痛苦。

## 物化视图

这类似于非规范化，但可以防止通过创建存储视图来污染规范化表。在 MySQL 中，这是通过在值更改时将复杂选择的结果存储到结果表中来实现的。同样，与非规范化一样，复杂性是保持最新。它通常使用触发器来完成。这可能会很痛苦，但可以避免架构的复杂性。正如@eggyal 所提到的，它还不是 MySQL 支持的功能，所以你必须自己动手做...... [MySQL 的物化视图](http://www.fromdual.com/mysql-materialized-views)

优点：

*   使脏的非规范化的东西远离你漂亮的规范化模式。

缺点：

*   不支持物化视图，因此设置它们需要工作。
*   如果您在代码中触发视图的刷新，您会得到陈旧的数据，但并不像非规范化的单列陈旧那样痛苦。
*   触发器可能有点痛苦。

如果您不确定，并且确实很重要，请进行一些基准测试。

**编辑**如果您的代码在您的代码库中以一种或另一种形式使用此查询，那么这有可能在将来引起头痛，因为如果或当它们发生变化时，您必须记住在所有地方更改语句。

如果通过执行上述操作，您的陈述非常简单明了，那么它们之间的差异可能足够大，不会成为问题。

你可以做一些事情来帮助你：

1.  将所有相关查询放在一个地方，即以各种形式处理此查询的单个类或脚本。这样，至少所有更改都仅限于一个文件。
2.  为了进一步帮助自己，您可以对其进行一些重构以消除查询之间的重复。

此外，如果您觉得数据库信息过于暴露给代码，您可能希望将其抽象到视图后面。

# asp.net-mvc-3 - 当我们在 MVC3 中使用多个模型时，如何更改 textboxfor 的输入名称？

> ID：13875758
> 
> 赞同：2
> 
> 时间：2012-12-14T09:20:22.043
> 
> 标签：asp.net-mvc-3

我正在使用多个模型，因此 textboxfor 的输入名称因多个模型而不同，因此参数始终为空。

我解释了我的意思，如下所示：

```
@Html.TextBoxFor(model => model.managers.person_name) 
```

我有两个表，分别是“manager”和“mayor_assistance”，我和我的班级一起称这些模型。此时一切都很好。但是，当我将这些模型与 TextBoxFor 一起使用时，输入名称设置为“manager.person_name”，但我的名称为 manager 的表有一个 person_name 列，因此我的参数始终为空，如下面的 html 标记

```
<input id="managers_person_name" name="managers.person_name" type="text" value=""> 
```

然后我必须用“新”标签更改输入名称的 tex 框，我得到相同的结果

```
 @Html.TextBoxFor(model => model.managers.person_name,new { @name="person_name" }) 
```

那么如何更改 TextBoxFor 输入名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:57:01.863

最后我找到了答案。我想分享我的解决方案谁面临我的问题。

TextBoxFor 或类似 EditBoxFor 等的东西。它们的名称和 id 由模型上的属性设置。因此，您得到的参数始终为 Null！

解决方案非常简单，只需使用 TextBox 并将您的列名作为字符串

```
 <div class="editor-field ">
            @Html.TextBox("person_name")
             @Html.ValidationMessage("person_position")
        </div> 
```

# unit-testing - 带有标头异常的 PHPUnit 输出（--stderr 无结果）

> ID：13875761
> 
> 赞同：2
> 
> 时间：2012-12-14T09:20:43.470
> 
> 标签：unit-testing, zend-framework, testing, phpunit

使用 zend 和 phpunit 进行测试时。控制台上显示标题错误。我发现错误：

```
Cannot modify header information - headers already sent by (output started at /usr/share/php/PHPUnit/Util/Printer.php:173) 
```

我尝试使用某些主题中的说明进行调试 [有没有办法在 PHPUnit 中测试 STDERR 输出？](https://stackoverflow.com/questions/8348927/is-there-a-way-test-stderr-output-in-phpunit) 和 [PHPUnit 输出导致 Zend_Session 异常](https://stackoverflow.com/questions/5505130/phpunit-output-causing-zend-session-exceptions)。但是当使用 --stderr 选项时，我找不到测试用例的一些输出和报告。这是控制台上的输出：

```
root@ubuntu:/home/boingonline/www/testunit# phpunit --stderr
PHPUnit 3.5.15 by Sebastian Bergmann.

root@ubuntu:/home/boingonline/www/testunit# 
```

对这个问题有什么想法吗？感谢所有的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T13:34:06.627

这是[PHP 中的一个错误](https://bugs.php.net/bug.php?id=42197)。每当输出某些内容时（即使在 CLI 上，这就是问题所在），您就不能再使用`header()`调用了。

一种解决方法是使用[`@runInSeparateProcess`](http://www.phpunit.de/manual/current/en/appendixes.annotations.html#appendixes.annotations.runInSeparateProcess).

# php - PHP中的XOR字符串与键

> ID：13875762
> 
> 赞同：6
> 
> 时间：2012-12-14T09:20:45.147
> 
> 标签：php

我需要在 PHP 中对字符串/文本进行异或，然后对其进行 base64 编码，但是出现了问题：

```
<?php

$mustget = 'Kw4SCQ==';
$string = 'Josh';

echo("Must get: " . $mustget . "\n");
echo("We got: " . base64_encode(xor_this($string)) . "\n");

function xor_this($text) {
    $key = 'frtkj';
    $i = 0;
    $encrypted = '';
    foreach (str_split($text) as $char) {
        $encrypted .= chr(ord($char) ^ ord($key{$i++ % strlen($key)}));
    }
    return $encrypted;
}

?> 
```

我得到以下结果，但我需要得到“$mustget”一个：

```
Must get: Kw4SCQ==
We got: LB0HAw== 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T09:43:56.710

```
$mustget = 'Kw4SCQ==';

$key = 'frtkj';
$key_length = strlen($key);

$encoded_data = base64_decode($mustget);

$result = '';

$length = strlen($encoded_data);
for ($i = 0; $i < $length; $i++) {
    $tmp = $encoded_data[$i];

    for ($j = 0; $j < $key_length; $j++) {
        $tmp = chr(ord($tmp) ^ ord($key[$j]));
    }

    $result .= $tmp;
}

echo $result; // Josh 
```

[http://ideone.com/NSIE7K](http://ideone.com/NSIe7K)

我相信你可以反转它并创建一个函数，“加密”数据;-)

# php - 解析错误：语法错误，更新 wordpress 时出现意外的 T_FUNCTION

> ID：13875763
> 
> 赞同：1
> 
> 时间：2012-12-14T09:20:46.303
> 
> 标签：php, wordpress, parsing, syntax-error

手动更新我的 wordpress 安装后出现此错误：

> 解析错误：语法错误，意外的 T_FUNCTION

这是导致错误的代码：

```
function paginate_links($args = ''){
$defaults = array(
    'base' => '%_%', // http://example.com/all_posts.php%_% : %_% is replaced by format (below)
    'format' => '?page=%#%', // ?page=%#% : %#% is replaced by the page number
    'total' => 1,
    'current' => 0,
    'show_all' => false,
    'prev_next' => true,
    'prev_text' => __('&laquo; Previous'),
    'next_text' => __('Next &raquo;'),
    'end_size' => 1,
    'mid_size' => 2,
    'type' => 'plain',
    'add_args' => false, // array of query args to add
    'add_fragment' => '');
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:36:05.637

你说的手动是什么意思？你没有使用内置更新程序？如果没有，您是否运行了更新脚本？

1.  `wp-admin/update.php`
2.  `wp-admin/upgrade.php`
3.  `wp-admin/update-core.php`

一个一个地做，看看它是否固定在两者之间。

# html - 适用于所有屏幕的移动设备媒体查询

> ID：13875764
> 
> 赞同：4
> 
> 时间：2012-12-14T09:20:48.593
> 
> 标签：html, css

我正在创建一个移动应用程序，正在使用媒体查询：

```
/* Smartphones (portrait) ----------- */
@media only screen
and (max-width : 320px) {
/* Your Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen
and (min-width : 321px) {
/* Your Styles */
} 
```

但分辨率不适合较小的屏幕设备。

一般来说，对于响应式 UI，您应该为尺寸范围设置样式。例如，任何屏幕分辨率低于 320x480 或类似的设备。

是否有任何媒体查询支持移动设备的所有屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:30:17.560

完整教程在这里： [http ://www.9lessons.info/2012/12/responsive-web-design-css3.html](http://www.9lessons.info/2012/12/responsive-web-design-css3.html)

```
*{margin:0px;padding:0px}
#header
{
padding:20px;
overflow:auto;
}
#main
{
padding:10px;
}
#footer
{
padding:20px;
clear:both
}
#article,#sidebar
{
min-height:250px;margin-bottom:20px;overflow:auto
}

ul
{
list-style:none;
width:100%
}
li
{
padding:4px;
margin-bottom:5px;
background-color:#ffffcc;
text-align:center;
color:#00000
}

@media only screen and (min-width: 480px){

ul
{
float:left;
}
li
{
float:left;
width:16%;
padding:4px;
margin-right:8px
}

}

@media only screen and (min-width: 768px){

#article
{
float:left;
width:68%;
}
#sidebar
{
float:right;
width:30%;
}
#logo
{
float:left;
width:10%;
}
#nav
{
float:right;
width:80%;
}

}

@media only screen and (min-width: 1140px) {

#main
{
padding:20px 40px 20px 40px;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:24:07.853

我不认为这是屏幕分辨率的问题，更多的是与媒体查询支持有关。尝试这样的测试：

```
@media only screen
and (min-width : 1px) {
   body {
    background: red;
   }
} 
```

如果这不影响浏览器，则它[不支持媒体查询](http://caniuse.com/css-mediaqueries)。您可以获得 javascript 替换以支持旧设备，例如[Respond.JS](https://github.com/scottjehl/Respond)

# xml - 更正 Doxygen XML 输出中的错误

> ID：13875770
> 
> 赞同：4
> 
> 时间：2012-12-14T09:21:19.693
> 
> 标签：xml, qt, doxygen

我目前正在为 doxygen XML 输出编写解析器。部分是因为学术原因和 doxygen/addons/doxmlparser 的代码是古老的。

我正在使用 QXmlStreamReader 解析 XML，它会在某些属性中引发错误。例如以下 XML 是由 doxygen 生成的：

```
...
<listofallmembers>
...
<member refid="qset_1operator&" prot="public" virt="non-virtual"><scope>libDatabase::Set</scope><name>operator&amp;</name></member>
...
</listofallmembers> 
```

这`refid="qset_1operator&"`当然是个问题：

```
XmlStreamReaderError: Expected '#' or '[a-zA-Z]', but got '"'. 
```

其他错误包括`<>`在 XML 属性中包含字符（和其他）。

我知道这些字符必须被它们的`&lt;`,`&gt;`等对应物替换。

当我不能使用 Qt 的类甚至查看 XML 时，我将如何轻松（当然是自动）更正 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:52:51.407

一种可能性是解决错误并在它们出现时手动修复它们，迭代 XML 直到其格式正确。请参阅这个 Stackoverflow 问题： [Ignoring a Invalid XML-Tag using Qdom?](https://stackoverflow.com/questions/13265366/ignoring-a-invalid-xml-tag-using-qdom/13289398#13289398)

您还可以使用[tidy 库](http://tidy.sourceforge.net/libintro.html)在处理之前修复输入。

# insert - 插入时 DB2 重复键错误，但在选择计数后工作（*）

> ID：13875776
> 
> 赞同：3
> 
> 时间：2012-12-14T09:21:45.910
> 
> 标签：insert, count, db2, duplicates, ibm-midrange

我有一个 - 对我来说未知 - 问题，我不知道它背后的逻辑/原因是什么。当我尝试在表中插入一条记录时，我收到一条 DB2 错误消息：

```
[SQL0803] Duplicate key value specified: A unique index or unique constraint *N in *N
exists over one or more columns of table TABLEXXX in SCHEMAYYY. The operation cannot 
be performed because one or more values would have produced a duplicate key in 
the unique index or constraint. 
```

这对我来说是一个非常明确的信息。**但**实际上，如果我插入我的新记录，看看那里已经有什么记录，就不会有重复的键。当我做 a`SELECT COUNT(*) from SCHEMAYYY.TABLEXXX`然后尝试插入记录时，它可以完美地工作。

怎么会在执行时`SELECT COUNT(*)`突然插入记录？是否有某种与之相关的索引可能会因为不同步而出现问题？我没有设计数据模型，所以我对系统还没有深入的了解。

原始的 DB2 SQL 是：

```
--  Generate SQL 
--  Version:                    V6R1M0 080215 
--  Generated on:               19/12/12 10:28:39 
--  Relational Database:        S656C89D 
--  Standards Option:           DB2 for i 
CREATE TABLE TZVDB.PRODUCTCOSTS ( 
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY ( 
START WITH 1 INCREMENT BY 1 
MINVALUE 1 MAXVALUE 2147483647 
NO CYCLE NO ORDER 
CACHE 20 ) 
, 
PRODUCT_ID INTEGER DEFAULT NULL , 
STARTPRICE DECIMAL(7, 2) DEFAULT NULL , 
FROMDATE TIMESTAMP DEFAULT NULL , 
TILLDATE TIMESTAMP DEFAULT NULL , 
CONSTRAINT TZVDB.PRODUCTCOSTS_PK PRIMARY KEY( ID ) ) ; 

ALTER TABLE TZVDB.PRODUCTCOSTS 
ADD CONSTRAINT TZVDB.PRODCSTS_PRDCT_FK 
FOREIGN KEY( PRODUCT_ID ) 
REFERENCES TZVDB.PRODUCT ( ID ) 
ON DELETE RESTRICT 
ON UPDATE NO ACTION; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T01:56:34.920

我想看看这些陈述……但由于这个问题已经存在一年了……我不会老去。

我在想问题可能是默认生成的

而不是为标识列传递 NULL ，而是第一次不小心传递了零或其他一些重复值。

始终传递 NULL、传递非重复值或切换到 GENERATED ALWAYS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:02:31.713

查看作业日志中前面的消息，了解导致此问题的具体原因。我不明白 INSERT 如何在 COUNT(*) 之后突然工作。请让我们知道您发现了什么。

由于它显示`*N`（即 n/a）作为索引或约束的名称，这表明它不是标准的 DB2 对象，因此可能是[用 DDS](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakb%2Fldef.htm)而不是 SQL 定义的“逻辑文件”[LF]，具有与您在 COUNT(*) 上执行的操作不同的关键结构。

您的商店可能有更好的工具来查看依赖文件的密钥，但下面的方法可以在任何地方使用。

如果您的表可能不是实际的“物理文件”，请`DSPFD TZVDB.PRODUCTCOSTS`在 5250（“绿屏”）会话中使用“显示文件描述”进行检查。

使用“显示数据库关系”命令，`DSPDBR TZVDB.PRODUCTCOSTS`查找在您的表中定义的文件。然后您可以`DSPFD`在每个文件上查看索引键的定义。还要检查是否维护了这些索引中的每一个`*IMMED`，而不是`*REBUILD`or `*DELAY`。（关于你的奇怪异常的远程可能原因的疯狂猜测。）

您将在 IBM i 7.1 信息中心或其他发行版中找到 DB2 [for](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzas2%2Frzas2finder.htm) [i](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp)消息[查找](http://publib.boulder.ibm.com/eserver/ibmi.html)器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T21:45:44.413

是分页问题吗？当一行被保留以进行更新并且它锁定可能包含插入所需的索引的页面时，我们似乎偶尔会在插入上得到-0803？这只是一个猜测，但在我看来这就是正在发生的事情。

# spring - 我应该在 STS 的智能模板项目中添加什么？

> ID：13875780
> 
> 赞同：0
> 
> 时间：2012-12-14T09:22:01.667
> 
> 标签：spring, spring-mvc, sts-springsourcetoolsuite

STS 中的 Smart Template 项目中有很多文件夹。我的问题是在哪里添加什么？ SRC 1\. Main/java
下有 4 个文件夹。 2\. 主要/资源。 3.测试/java。 4\. 测试/资源。 我应该将我的控制器添加到上述所有文件夹中还是添加到几个 or or or or.. 中？

还有一个文件夹叫 SRC！
我应该使用“视图”文件夹来添加我的所有网页（比如 JSP 页面）吗？

谁能详细说明？

另外请让我知道使用动态 Web 项目是否比使用 Spring 模板项目更好，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:43:33.747

这个文件夹结构是[一个 maven 项目](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)的结构。

`src/main/java`例如，您的应用程序的 Java 类应该在`src/main/java/com/example/web`（com.example.web 是包）

JSP 应该在`src/main/webapp/WEB-INF/jsps`（*您可以使用其他子文件夹，`jsps`但它必须在下面`src/main/webapp/WEB-INF/`*）

> 另外请让我知道使用动态 Web 项目是否比使用 Spring 模板项目更好，反之亦然？

如果您了解 Maven，那么 Spring 模板会更好（在我看来）。

*`pom.xml`顺便说一句，在项目根目录中拥有很重要。*

# objective-c - 从 ccarray cocos2d 中识别一个精灵

> ID：13875781
> 
> 赞同：1
> 
> 时间：2012-12-14T09:22:02.460
> 
> 标签：objective-c, cocos2d-iphone, ios6

我在 ccarray 中添加了三种类型的精灵。

```
CCArray *storeObject=[[CCArray alloc]initWithCapacity:10];
    CCSprite *sprite1=[CCSprite spriteWithFile:@"sprite1.png"];
    CCSprite *sprite2=[CCSprite spriteWithFile:@"sprite2.png"];
    CCSprite *sprite3=[CCSprite spriteWithFile:@"sprite3.png"];
    [storeObject addObject:sprite1];
    [storeObject addObject:sprite2];
    [storeObject addObject:sprite3];
    [self addChild:sprite1 z:1 tag:100];
    [self addChild:sprite2 z:1 tag:101];
    [self addChild:sprite3 z:1 tag:102]; 
```

我正在使用这个数组的逻辑。我想识别这些恶意并希望执行不同类型的操作。那么我的问题是如何从 ccarray 中识别这些精灵。请用语法回答。我在数组中随机添加了这三个精灵。现在在 for 循环中，我想确定我拥有哪一个精灵。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:52:07.870

尝试这个 ：

```
for (CCSprite *spr in storeObject)
{
     if (spr.tag == currentTag)
     {
         // you will get the current sprite
         break;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:25:03.063

为了完整起见，您应该知道可以将多个子对象添加到具有相同标签的对象中。例如，下面的代码将在之后提供日志：

```
for (NSUInteger i = 0; i < 10; i++) {
    CCLabelAtlas *toto = [SpriteUtils mapDamageLabel:23+i];

    toto.tag = 901210;
    [self addChild:toto z:0 tag:toto.tag];;
}

MPLOG(@"*** remove me : before refresh %@ ***", self.soldier);
for (id child in children_) {
    CCNode *ch = (CCNode *) child;
    MPLOG(@"<%@> tag: %i name : %@", self.soldier, ch.tag, ch.name);
} 
```

*** 现在是日志 ***

-[SoldierMapLayout sequenceEngagement:] : *** remove me : before refresh red ***

-[SoldierMapLayout sequenceEngagement：]：标签：1024 名称：CCSprite：walk_red_rogue_idle0001.png

-[SoldierMapLayout sequenceEngagement:]：标签：891 名称：CCSprite：不能移动

-[SoldierMapLayout sequenceEngagement:]：标签：889 名称：CCSprite：无法治愈

-[SoldierMapLayout sequenceEngagement:] : tag: 890 name : CCSprite : Charmed

-[SoldierMapLayout sequenceEngagement:]：标签：886 名称：CCSprite：健康栏：18

-[SoldierMapLayout sequenceEngagement：]：标签：896 名称：CCSprite：walk_red_rogue_cast0001.png

-[SoldierMapLayout sequenceEngagement:]：标签：895 名称：CCLabelAtlas：致命伤害 16

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 23

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 24

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 25

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 26

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 27

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 28

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 29

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 30

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 31

-[SoldierMapLayout sequenceEngagement:]：标签：901210 名称：CCLabelAtlas：伤害 32

因此，当您稍后执行 [self getChildByTag:901210] 时，CCNode 将返回它找到的第一个带有标签的标签，不一定是您要查找的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:58:52.470

首先，拧紧额外的 CCArray（也：拧紧 CCArray 它有问题，改用 NSMutableArray）。你很可能根本不需要它。这将您的代码简化为：

```
CCSprite *sprite1=[CCSprite spriteWithFile:@"sprite1.png"];
CCSprite *sprite2=[CCSprite spriteWithFile:@"sprite2.png"];
CCSprite *sprite3=[CCSprite spriteWithFile:@"sprite3.png"];
[self addChild:sprite1 z:1 tag:100];
[self addChild:sprite2 z:1 tag:101];
[self addChild:sprite3 z:1 tag:102]; 
```

然后使用 sprite3.png 获取精灵，只需使用 getChildByTag：

```
CCSprite* itsSprite3 = [self getChildByTag:102]; 
```

毕竟这就是标签的用途！

如果你只有 3 个精灵并且你没有将它们从它的部分中删除，那么如果你只创建 3 个 ivars sprite1、sprite2、sprite3 来在课堂上的任何时间任何地方访问它们就更容易了。

# c# - 在实体框架中使用计算的 DateTime 列

> ID：13875784
> 
> 赞同：7
> 
> 时间：2012-12-14T09:22:08.803
> 
> 标签：c#, entity-framework, datetime, entity-framework-5, calculated-columns

`StoreGeneratedPattern="Computed"`在 type 的列上完美运行`timestamp`。但是您不能将 TimeStamp 显示为人类可读的形式。

因此，您无法向用户显示“此行已修改`{TimeStamp}`”，因为您根本无法将 SQL 时间戳解析为 DateTime。

现在我还可以为列创建计算列，`DateTime`这样我就不需要手动设置了吗？ `myEntity.LastModification = DateTime.Now`

更不用说，如果某些用户**真的**想做坏事，只需更改他的计算机时间，这将很容易出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:32:54.040

是的，如此处所述：[有没有办法为列指定默认值？我的数据库中的某些 DateTime 列设置为 getdate()，但 EF 不知道这些默认值](http://social.technet.microsoft.com/wiki/contents/articles/3793.entity-framework-faq-mapping-and-modeling.aspx#Is_there_a_way_to_specify_default_values_for_columns_Some_DateTime_columns_in_my_database_are_set_to_getdate_but_the_EF_is_unaware_of_these_default_values)

提炼：

> ...如果将 StoreGeneratedPattern 设置为 Identity（如果该值仅在插入时计算）或 Computed（如果在每次更新时计算），那么当您调用 SaveChanges 时，EF 将获取数据库中生成的值并将其带入返回更新您的对象...

*编辑：要更新数据库服务器端修改日期，请遵循此答案[https://stackoverflow.com/a/8461681/1679310](https://stackoverflow.com/a/8461681/1679310)。`Computed`设置将重新加载*

# c++ - 指向成员表示的指针

> ID：13875786
> 
> 赞同：13
> 
> 时间：2012-12-14T09:22:13.367
> 
> 标签：c++, function-pointers, member-function-pointers

我正在尝试从成员函数进行一些回调，并且一切正常，直到我尝试使用从 2 个类派生的模板类作为回调对象时出现以下错误：

```
error C2440: 'reinterpret_cast' : Pointers to members have different representations; cannot cast between them 
```

这件事告诉我成员函数指针有不同的表示（doh！）

这些表示是什么？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T09:27:55.963

[Danny Kalev 很好地解释了这一点](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=142)：

> **指向成员的指针的基础表示**
> 
> 尽管指向成员的指针表现得像普通指针，但在幕后它们的表示是完全不同的。实际上，在某些情况下，指向成员的指针通常由一个最多包含四个字段的结构组成。这是因为指向成员的指针不仅要支持普通的成员函数，还要支持虚成员函数、具有多个基类的对象的成员函数以及虚基类的成员函数。因此，最简单的成员函数可以表示为一组两个指针：一个保存成员函数的物理内存地址，第二个指针保存`this`指针。但是，在虚拟成员函数、多重继承和虚拟继承等情况下，指向成员的指针必须存储附加信息。因此，您不能将指向成员的指针转换为普通指针，也不能在指向不同类型成员的指针之间安全地转换。
> 
> 要了解编译器如何表示指向成员的指针，请使用`sizeof`运算符。在以下示例中，采用指向数据成员的指针和指向成员函数的指针的大小。如您所见，它们具有不同的大小，因此具有不同的表示形式：

```
struct A
{
 int x;
 void f();
};
int A::*pmi = &A::x;
void (A::*pmf)() = &A::f;
int n = sizeof (pmi); // 8 byte with my compiler
int m = sizeof (pmf); // 12 bytes with my compiler 
```

> 请注意，这些指针中的每一个都可能具有不同的表示形式，具体取决于所讨论的类以及成员函数是否为虚拟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:18:29.453

这是微软的事情：在某些情况下，它们使指向成员函数的指针更小，代价是生成指向具有不同表示形式的成员函数的指针，正如您刚刚看到的那样。有一个开关可以关闭它（[`/vmg`](https://docs.microsoft.com/en-us/cpp/cpp/inheritance-keywords)），以便所有指向成员的指针都具有相同的表示。

# java - 从文件中读取特殊符号

> ID：13875794
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:22:30.963
> 
> 标签：java, file, io

我正在尝试使用 Java 读取文件，并且该文件也包含特殊字符。我正在尝试将文件的内容写入另一个文件。

读取特殊字符文件的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:25:10.157

以 UTF-8 编码文件并使用 java 编码感知流运算符：

```
new InputStreamReader(new FileInputStream(file), "UTF-8") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:30:23.587

> 您需要找出文件使用的确切编码，然后在`InputStreamReader`参数中指定。

尽管如此，通常最好通过将 InputStream 与 InputStreamReader 包装到 Reader 或 BufferedReader 中来读取字符数据

```
BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(your file), "UTF-8")); 
```

**编辑评论：**
`FileReader`使用 Java 的平台默认编码，这取决于运行它的计算机的系统设置。

> 不幸`FileReader`的是不允许设置编码。相反，您必须使用上述代码来获取文件的期望编码。

# mysql - 在 Openshift 上使用 MySQL 和 Symfony 2

> ID：13875795
> 
> 赞同：2
> 
> 时间：2012-12-14T09:22:35.427
> 
> 标签：mysql, symfony, pdo, openshift

我将 MySQL 和 PHPMyAdmin 墨盒添加到我的 openshift php 应用程序中。添加 mysql 墨盒后，我看到页面显示：

```
Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/ 
```

但我不知道这是什么意思。

当我通过 PHPMyAdmin 访问 mysql 数据库时，我看到 127.8.111.1 作为数据库主机，所以我配置了我的 symfony 2 应用程序（parameters.yml）：

```
parameters:    
    database_driver:   pdo_mysql
    database_host:     127.8.111.1
    database_port:     3306
    database_name:     <some_database>
    database_user:     admin
    database_password: <some_password> 
```

现在，当我访问我的网页时，它会抛出一个错误，我认为这与 mysql 连接有关。有人可以告诉我执行上述操作的正确方法吗？

编辑：似乎mysql连接工作正常，但不知何故

```
Error 101 (net::ERR_CONNECTION_RESET): Unknown error 
```

被抛出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-08T10:40:02.117

我使用并且运行良好的代码可以使我的应用程序在 localhost 和 openshift 上运行，而无需每次在它们之间移动时更改数据库配置参数是这样的：

```
<?php
# app/config/params.php
if (getEnv("OPENSHIFT_APP_NAME")!='') {
    $container->setParameter('database_host', getEnv("OPENSHIFT_MYSQL_DB_HOST"));
    $container->setParameter('database_port', getEnv("OPENSHIFT_MYSQL_DB_PORT"));
    $container->setParameter('database_name', getEnv("OPENSHIFT_APP_NAME"));
    $container->setParameter('database_user', getEnv("OPENSHIFT_MYSQL_DB_USERNAME"));
    $container->setParameter('database_password', getEnv("OPENSHIFT_MYSQL_DB_PASSWORD"));
}?> 
```

*这将告诉应用程序，如果是 openshift 环境，它需要加载不同的用户名、主机、数据库等。*

然后你必须从你的`app/config/config.yml`文件中导入这个文件（params.php）：

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    - { resource: params.php }
... 
```

就是这样。当您在 openshift 或 localhost 上移动时，您将永远不必接触此文件或 parameters.yml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:25:19.913

```
Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/ 
```

OpenShift 向您的应用程序公开环境变量，其中包含数据库的主机和端口信息。您应该在配置中引用这些环境变量，而不是硬编码值。我不是 Symfony 专家，但在我看来，您需要执行以下操作才能在您的应用程序中使用此信息：

为您的应用程序创建一个预启动挂钩并以 Symfony 的预期格式导出变量。将以下内容添加到应用程序的 git 存储库中的 .openshift/action_hooks/pre_start_php-5.3 文件中：

```
export SYMFONY__DATABASE__HOST=$OPENSHIFT_MYSQL_DB_HOST
export SYMFONY__DATABASE__PORT=$OPENSHIFT_MYSQL_DB_PORT 
```

[Symphony 使用此模式来识别环境中的外部配置](http://symfony.com/doc/2.0/cookbook/configuration/external_parameters.html)，并将使此配置可用于您的 YAML 配置：

```
parameters:    
    database_driver:   pdo_mysql
    database_host:     "%database.host%"
    database_port:     "%database.port%" 
```

编辑：

公开此信息以在 YAML 配置中使用的另一个选项是在您的 app/config/config.yml 中导入一个 php 文件：

```
imports:
    - { resource: parameters.php } 
```

在 app/config/parameters.php 中：

```
$container->setParameter('database.host', getEnv("OPENSHIFT_MYSQL_DB_HOST"));
$container->setParameter('database.port', getEnv("OPENSHIFT_MYSQL_DB_PORT")); 
```

# python - Python - 带有启用/禁用图标的工具栏 - wxGlade 第一个和第二个位图

> ID：13875796
> 
> 赞同：1
> 
> 时间：2012-12-14T09:22:37.563
> 
> 标签：python, toolbar, wxglade

Python - 带有启用/禁用图标的工具栏 - wxGlade 第一个和第二个位图

您好，我在哪里可以找到带有启用/禁用图标的简单工具栏示例？

我可以使用 wxGlade 制作一个不错的工具栏，并且我在启用和禁用情况下都有每个图标的图像，但是我无法弄清楚程序运行后如何通过代码启用/禁用图标。

wxGlade 有“第一个位图”和“第二个位图”的选项

我认为类似于“如果 bmpDisabled 是 wx.NullBitmap，则会创建普通位图的阴影版本并将其用作禁用图像。”

[http://wxpython.org/docs/api/wx.ToolBarBase-class.html#AddLabelTool](http://wxpython.org/docs/api/wx.ToolBarBase-class.html#AddLabelTool)

理论上Python它自己制作图标的阴影版本，但我没有要学习的样本。

我的代码示例：

```
#!/usr/bin/env python
# -*- coding: iso-8859-15 -*-
# generated by wxGlade 0.6.5 (standalone edition) on Tue Dec 11 21:54:42 2012

import wx

# begin wxGlade: extracode
# end wxGlade

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
        # begin wxGlade: MyFrame.__init__
    kwds["style"] = wx.DEFAULT_FRAME_STYLE
    wx.Frame.__init__(self, *args, **kwds)

        # Tool Bar
        self.frame_1_toolbar = wx.ToolBar(self, -1, style=wx.TB_HORIZONTAL | wx.TB_TEXT)
        self.SetToolBar(self.frame_1_toolbar)
        self.frame_1_toolbar.AddLabelTool(1, "CUT", wx.Bitmap("editcut.png", wx.BITMAP_TYPE_ANY), wx.Bitmap("editcutapagado.png", wx.BITMAP_TYPE_ANY), wx.ITEM_NORMAL, "CUT", "")
        self.frame_1_toolbar.AddLabelTool(2, "EXIT", wx.Bitmap("exit.png", wx.BITMAP_TYPE_ANY), wx.Bitmap("exitaapagado.png", wx.BITMAP_TYPE_ANY), wx.ITEM_NORMAL, "EXIT", "")
        # Tool Bar end

        self.__set_properties()
        self.__do_layout()
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: MyFrame.__set_properties
        self.SetTitle("frame_1")
        self.frame_1_toolbar.Realize()
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: MyFrame.__do_layout
        sizer_1 = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(sizer_1)
        sizer_1.Fit(self)
        self.Layout()
        # end wxGlade

# end of class MyFrame
if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    frame_1 = MyFrame(None, -1, "")
    app.SetTopWindow(frame_1)
    frame_1.Maximize()
    frame_1.Show()
    app.MainLoop() 
```

那么，我该如何禁用/启用

```
self.frame_1_toolbar.AddLabelTool(1, "CUT", wx.Bitmap("editcut.png", wx.BITMAP_TYPE_ANY), wx.Bitmap("editcutapagado.png", wx.BITMAP_TYPE_ANY), wx.ITEM_NORMAL, "CUT", "") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:17:11.970

您是否要禁用其中的完整工具栏或按钮。

对于每个按钮示例：

self.frame_1_toolbar.EnableTool( 1, False ) # .. 将 id 放在这里 1 禁用 CUT。或者启用 True 按钮

# linux - ldap 在了解树结构时查询 OU

> ID：13875797
> 
> 赞同：2
> 
> 时间：2012-12-14T09:22:39.313
> 
> 标签：linux, ldap, centos

我在 Centos 桌面上的一个名为 Itop 的工具中尝试了两件事。

我在这里发帖是因为它是关于一般 ldap 查询的。我正在尝试使用 ldap explore 和 Itop 进行查询。

1.从一个OU中导入多个用户，但它不起作用。

我的 ldap 查询可能不好：

```
(&(objectCategory=organizationalUnit)(memberOf=CN=Organizational-Unit,CN=Schema,CN=Configuration,DC=mydomain,DC=local)) 
```

或者

```
(&(objectCategory=user)(memberOf=OU=Users,OU=Informatique,OU=Administration,DC=mydomain,DC=local)) 
```

知道我的树结构是这样的：

```
DC=mydomain,DC=local => OU=Administration => OU=Informatique, OU=Users 
```

2.导入特定用户：

```
(objectcategory=user)((cn=seb)) 
```

查询正在运行，但我在 Itop 中出现错误，可能缺少一个字段：错误：

```
An error occured while processing 1: Object not following integrity rules: issues = Unexpected value for attribute 'name': Null not allowed, Unexpected value for attribute 'email': Wrong format [seb@mydomain.local], class = Person, id = 
```

怎么解决？使用哪些查询？谢谢，塞塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:05:38.863

我可以尝试帮助您进行查询。(memberOf= *parameter* ) 过滤器适用于组，而不是 OU。LDAP 查询具有三个组件：基本、过滤器和范围。如果你想要你的 OU 中的所有用户，那么你需要设置

1.  基于 OU 的专有名称

    `OU=Users,OU=Informatique,OU=Administration,DC=mydomain,DC=local`

2.  过滤以仅获取用户

    `(objectCategory=user)`

3.  范围为子树（或 OneLevel，如果您不想在目标 OU 下搜索 OU）。

# windows - 批处理脚本的 Windows“双快捷方式”

> ID：13875798
> 
> 赞同：0
> 
> 时间：2012-12-14T09:22:44.693
> 
> 标签：windows, batch-file, keyboard-shortcuts, shortcut

在 Windows 中，我们可以为任何批处理脚本创建快捷方式并为其分配快捷方式。（右键单击快捷方式->属性->快捷键）

如何为这样的快捷方式分配双快捷方式？例如`Ctrl`+ `Alt`+ `J`，`Ctrl`+ `Alt`+ `K`。当我按顺序按`Ctrl`+ `Alt`+`J`和`Ctrl`+ `Alt`+时，我希望批处理脚本执行。`K`

这在 Windows 中可能吗？如果这个方法不起作用，有没有其他方法可以实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:48:29.040

不，分配热键组合是不可能的。Windows 快捷方式本质上是存储的[IShellLink](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774950%28v=vs.85%29.aspx)对象。该对象的[GetHotKey()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774926%28v=vs.85%29.aspx)文档显示只能使用一个热键。

也许你可以试试[AutoHotKey](http://www.autohotkey.com/)。虽然我没有这方面的经验，但 AHK 通常是此类事情的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:55:39.147

您还可以使用`SHIFT`键，这将为您提供更多的键组合。

*   `CTRL`+ `ALT`+***键***
*   `CTRL`+ `SHIFT`+***键***
*   `CTRL`+ `SHIFT`+ `ALT`+***键***
*   `SHIFT`+ `ALT`+***键***

# r - 绘制一条连接绘图外部点的线

> ID：13875810
> 
> 赞同：1
> 
> 时间：2012-12-14T09:23:24.933
> 
> 标签：r

我想绘制一条连接绘图外部点的线

```
plot(rnorm(1000), rnorm(1000), xlim=c(-5,5),ylim=c(-5,5)) 
```

因此“包”了情节的所有点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:49:00.080

这里要使用的函数是`chull`. 第 4 号线用于关闭圆圈。有关更多示例，请参见[此处](http://chitchatr.wordpress.com/2011/12/30/convex-hull-around-scatter-plot-in-r/)。

```
x <- data.frame(x = rnorm(100), y = rnorm(100))
plot(x)
chx <- chull(x)
chx <- rbind(x = x[chx, ], x[chx[1], ])
lines(chx) 
```

![在此处输入图像描述](../Images/d3e10fa0bd5fb29fbf1bd5b5bd6f30c9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:55:06.100

```
a  <-  rnorm(1000)
b  <-  rnorm(1000)

Plot_ConvexHull<-function(xcoord, ycoord, lcolor){
hpts <- chull(x = xcoord, y = ycoord)
hpts <- c(hpts, hpts[1])
lines(xcoord[hpts], ycoord[hpts], col = lcolor)
}

(xrange <- range(c(a)))
(yrange <- range(c(b)))

par(tck = 0.02, mgp = c(1.7, 0.3, 0))
plot(a, b, type = "p", pch = 1, col = "black", xlim = c(xrange), ylim = c(yrange))
Plot_ConvexHull(xcoord = a, ycoord = b, lcolor = "black") 
```

# yii - 在 yii 中使用 url manager 将 url 更改为 seo 友好

> ID：13875819
> 
> 赞同：3
> 
> 时间：2012-12-14T09:24:11.903
> 
> 标签：yii, seo

如何将这些 URL 转换为 SEO 友好的 URL 我在 yii 中尝试了 Url manager 但没有得到正确的结果是否有任何关于 url manager 的好教程

```
http://localhost/nbnd/search/city?city=new+york
http://localhost/nbnd/search/manualsearch?tosearch=Hotel+%26+Restaurants+&city=New+york&yt0=Search&searchtype= 
```

我尝试在 url manager 中进行以下设置

```
'<controller:\w+>/<action:\w+>/<city:\d>'=>'<controller>/<action>', 
```

与网址一起使用`http://localhost/nbnd/search/city/city/Delhi`

我希望将此网址减少到`http://localhost/nbnd/search/city/Delhi`

我在我看来生成的链接是`<?php echo CHtml::link(CHtml::encode($data->city), array('/search/city', 'city'=>$data->city)); ?>`

这会生成链接为`http://localhost/nbnd/search/city?city=Delhi` 我如何将该链接转换为喜欢`http://localhost/nbnd/search/city/Delhi`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T16:08:31.197

规则应该是（删除额外的城市，即 GET 参数名称）：

```
'<controller:\w+>/<action:\w+>/<city:\w+>'=>'<controller>/<action>', // not city:\d, since Delhi is a string, not digit 
```

所以规则应该能够匹配参数名称，如果你有 foo/Delhi，你会使用`<foo:\w+>`.

并删除`?`使用[`appendParams`,`CUrlManager`](http://www.yiiframework.com/doc/api/1.1/CUrlManager#appendParams-detail "http://www.yiiframework.com/doc/api/1.1/CUrlManager#appendParams-detail")（在您的`urlManager`配置中）：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'appendParams'=>true,
    // ... more properties ...
    'rules'=>array(
        '<controller:\w+>/<action:\w+>/<city:\w+>'=>'<controller>/<action>',
        // ... more rules ...
    )
) 
```

什么时候`appendParams`

> 为真，GET 参数将附加到路径信息并使用斜杠彼此分隔。

* * *

更新：如果您有多个参数传递给操作，即：

```
http://localhost/nbnd/search/manualsearch/Delhi?tosearch=restaurants 
```

`/*`在规则末尾使用 a ：

```
'<controller:\w+>/<action:\w+>/<city:\w+>/*'=>'<controller>/<action>' 
```

要获取表单的网址：

```
http://localhost/nbnd/search/manualsearch/Delhi/tosearch/restaurants 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:54:40.890

在 Yii 中，我们可以动态创建 url 例如。

```
$url=$this->createUrl($route,$params);
$route='post/read'.
$params=array('id'=>100) 
```

我们将获得以下 URL：

```
/index.php?r=post/read&id=100 
```

要更改 URL 格式，我们应该配置 urlManager 应用程序组件，以便`createUrl`可以自动切换到新格式，并且应用程序可以正确理解新的 URL：

```
array(
    ......
    'components'=>array(
        ......
        'urlManager'=>array(
            'urlFormat'=>'path',
        ),
    ),
); 
```

我们会得到这个

```
/index.php/post/read/id/100 
```

[您可以在 yii http://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)中参考此链接以获取用户友好的 url

# sql - SQL 中的 BETWEEN 子句

> ID：13875824
> 
> 赞同：1
> 
> 时间：2012-12-14T09:24:26.137
> 
> 标签：sql, sql-server, vb.net, between

我有一个 SQL 语句来显示两个日期之间的数据。我几乎明白了，但有一个问题。

如果我输入`March 1,2012 to March 7, 2012`.. 它应该显示日期介于两者之间的数据.. 但它也显示 2012 年 3 月以下的所有日期.. 但每当我输入 2012 年 3 月 10 日至 2012 年 3 月 30 日时，SQL 都能完美运行.. 任何帮助将不胜感激。谢谢

```
SELECT 
   agentname, noofcalls, qualified, booking, resched, 
   actualbooking, sales, remarks, 
   concat(month,' ',day,',',year) as 'date' 
FROM 
   tblagents
WHERE 
   (month between '" & cbosmonth.Text & "' AND '" & cboemonth.Text & "')
   AND (day between '" & cbosday.Text & "' AND '" & cboeday.Text & "')
   AND (year between '" & cbosyear.Text & "' AND '" & cboeyear.Text & "')" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:35:59.287

您正在每个“之间”中进行字符串比较。每个以 1、2 或 3 开头的数字，无论后面是什么，即 21、26 或 31，如果您将它们视为字符串，它们都小于 7。1 到 30 有效，因为您只留下 31，并且 30 < 31 作为字符串也是如此。

先做连接，然后做中间：

```
WHERE concat(month,' ',day,',',year) 
      BETWEEN concat(cbosmonth.Text,' ', cbosday.Text,' ',cbosyear.Text)
      AND concat(cboemonth.Text,' ', cboeday.Text,' ',cboeyear.Text) 
```

（检查正确的语法，我只是从你的问题中复制粘贴，没有尝试过）

顺便说一句，除非您有理由这样做，否则您可能应该将整个日期存储在具有正确数据时间（日期时间、时间戳、...）的单个列中，而不是三个单独的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:44:48.030

这是在数据库中存储日期的错误方法。将日期列更改为数据类型**date**。

然后你可以这样做：

```
SELECT *
FROM table
WHERE bookingDate between to_date ('2012/03/01', 'yyyy/mm/dd')
AND to_date ('2012/03/07', 'yyyy/mm/dd'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:45:57.420

这种方法是错误的。

为了使日期在两个间隔日期之间，它不必在两个日期之间有天数，例如（伪代码）

*   `date = May-25-2012; startDate = March-15-2012, endDate = June-01-2012`
*   `date`显然在`startDate`and之间`endDate`，然而
*   `day(date)`是 25，它不在`day(startDate) = 15`和之间`day(endDate) = 1`
*   更多，因为 15 大于 1，它们之间没有数字，所以条件总是为假

可以为日期的月份部分制作类似的示例（例如`date = May-25-2012; startDate = September-15-2010, endDate = Match-01-2015`）

您需要获取日、月、年的值，并在应用程序或服务器上构造一个日期，并使用它来比较这些值。

* * *

在 VB 中从文本字段中创建日期

```
Dim startDate = new DateTime( 
      Convert.ToInt32(cbosyear.Text), 
      Convert.ToInt32(cbosmonth.Text), 
      Convert.ToInt32(cbosday.Text)) 
```

请注意，如果用户输入，例如年份值的“一些文本”，这将失败。您需要添加一些数据验证来实现这一点。

要从 SQL Server 中的部分制作日期时间，[请看这里](https://stackoverflow.com/questions/266924/create-a-date-with-t-sql)，这里解释了很多技术。

此外，您应该*始终*避免将值粘贴到 sql 字符串中，这会导致 sql 注入问题。你应该这样做：

```
Dim command = new SqlCommand()
command.CommandText = "SELECT .... FROM tblagents where DATEFROMPARTS(year, month, day) between @startDate AND @endDate"
command.Parameters.AddWithValue("@startDate", startDate)
command.Parameters.AddWithValue("@endDate", endDate) 
```

# c# - 取消和完成按钮的 Revit API 2012 事件处理程序

> ID：13875832
> 
> 赞同：0
> 
> 时间：2012-12-14T09:24:49.633
> 
> 标签：c#, events, revit-api

在创建模型组或地板时，我需要事件来捕捉 Revit 中的完成和取消按钮。下图显示了按钮。这些动作有事件吗？

![Revit 2012 按钮](../Images/35ca7fb2ffb7a4dda7e610eb0e8f831e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:17:47.240

我不确定，但我想至少 Finish 按钮会引发 Document_Changed 事件，也许您可​​以获取交易名称来缩小您真正想要的操作。

# delphi - 如果您使用索引，.Locate 会更快吗？

> ID：13875844
> 
> 赞同：2
> 
> 时间：2012-12-14T09:25:36.087
> 
> 标签：delphi, indexing

我在大量数据上使用多个定位，定位不需要索引即可运行。但是如果我有一个会更快吗？

我正在使用德尔福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:10:24.830

数据集大多是抽象的。这将取决于调用 locate 方法时到底发生了什么的底层实现。

话虽如此，我所知道的几乎所有实现都会使用索引（包括 DBF 索引）

# c++ - boost::asio QNX 链接器错误

> ID：13875848
> 
> 赞同：4
> 
> 时间：2012-12-14T09:26:06.047
> 
> 标签：c++, boost-asio, qnx-neutrino

我是在 QNX 平台上使用 boost 库的新手。我在链接 asio 库时遇到问题。它给我带来了未定义的参考链接器错误`boost::asio::detail::socket_ops`。消息是：

在函数`boost::asio::detail::socket_ops::call_bind`未定义引用绑定..

`listen`& , `recvmsg`, `accept`, `setsockopt`..的类似错误

当我将 asio 库仅作为头库包含时出现这些错误（我没有单独编译它）。

然后我尝试通过定义`BOOST_ASIO_SEPARATE_COMPILATION`和包含`<boost/asio/ssl/impl/src.hpp>`一次来显式编译库。它向我抛出了更多未定义的对 socket_ops.hpp 中定义的函数的引用错误。

错误发生在`socket_ops.ipp`我在 QNX Neutrino Momentics 6.50 中使用 boost_1_49

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T01:32:04.203

您是否为您的平台构建了 boost？它是否在您的应用程序目标的兼容配置中？

Asio 需要一些其他的 boost 库（如果我记得的话，其中包括 date_time 和线程），它们必须在使用之前构建（有些库不是仅标头，或者它们依赖于不是仅标头的库）。

# jquery - JQuery Mobile 中的大写选项

> ID：13875849
> 
> 赞同：0
> 
> 时间：2012-12-14T09:26:06.820
> 
> 标签：jquery, css, jquery-mobile

我有一个带有`select`元素的 JQM 页面：

```
<select>
    ...
</select> 
```

我尝试使用 css 将其选项大写：

```
select{
    text-transform: capitalize;
} 
```

我还在我的css中添加了：

```
select option{
    text-transform: capitalize;
} 
```

大写适用于 Firefox 和 Chrome 等桌面网​​络浏览器，但不适用于 dolphin 等移动网络浏览器以及 android webview。我怎样才能让它在移动网络浏览器中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:36:32.693

您是在谈论使用原生 android 显示来显示选项元素的经典选择元素吗？如果你这样做，那么你不能大写它，它使用选项文本在android原生选择外观中显示它，它不会采用css格式，

如果您正在谈论自定义 jQm 选择元素，这将解决它：http: [//jsfiddle.net/Gajotres/p3SHm/](http://jsfiddle.net/Gajotres/p3SHm/)

CSS：

```
fieldset .ui-controlgroup-controls .ui-checkbox label span span.ui-btn-text {
    text-transform: capitalize;
}

.ui-select div span span.ui-btn-text span {
    text-transform: capitalize;
}

select option{
    text-transform: capitalize;
} 
```

**编辑：**

您可以做的是使用 javascript 将每个单词大写，在 pagebeforeshow 事件中使用它（或在页面显示之前更改您的文本的任何其他事件）。看看我在上面的例子，看看如何。

```
$('option').each(function(){
    $(this).html($(this).html().replace(/\w+/g, function(w){return w[0].toUpperCase() + w.slice(1).toLowerCase();}));
}); 
```

# c# - 如何在c#的客户端套接字程序中知道客户端端口和IP地址

> ID：13875850
> 
> 赞同：0
> 
> 时间：2012-12-14T09:26:10.613
> 
> 标签：c#, sockets, network-programming, client-server

> **可能重复：**
> [如何在java中的客户端套接字程序中知道客户端端口和IP地址](https://stackoverflow.com/questions/13876303/how-to-get-know-the-client-port-and-ip-address-in-client-socket-program-in-java)

我使用套接字在 c# 中创建了一个多客户端-服务器通信。我有一个服务器和一个客户端。我想用多个客户端测试我的程序。我计划创建一个动态创建 ip 和端口的刺激器。为此我只想知道如何在套接字程序中设置客户端 ip 和端口。谁能帮我。

```
socket m_socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:45:43.970

> 如何在socket中设置客户端ip和端口

在发出 a 之前`Socket.Connect()`，您可以`Bind()`像这样将套接字连接到本地地址：

```
var socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
var addr = new IPAddress(new byte[] { 192, 168, 1, 115 });
var ep = new IPEndPoint(addr, 0);
socket.Bind(ep); 
```

但是，一旦您提供了一个未绑定到计算机上任何适配器的 IP 地址，就会出现“请求的地址在其上下文中无效”。将抛出异常。

> 我想用多个客户端测试我的程序

因此，只需多次运行您的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:44:25.353

你读过 MSDN [Socket Constructor (AddressFamily, SocketType, ProtocolType)](http://msdn.microsoft.com/en-us/library/2b86d684.aspx)主题吗？页面上有一个非常明显的例子。

# google-maps - 如何在融合表中上传批量数据

> ID：13875853
> 
> 赞同：0
> 
> 时间：2012-12-14T09:26:33.483
> 
> 标签：google-maps, google-fusion-tables

我想将批量数据导入融合表。我应该使用什么数据格式来导入数据，即 JSON 、CSV 。

如果我想以 JSON 格式导入数据，我该怎么做，因为在谷歌帮助下，唯一的方法是上传 CSV 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:18:27.323

[支持通过 Fusion Tables UI 上传的格式为](http://support.google.com/fusiontables/answer/171181/?&)：

*   逗号分隔文本 (.csv)
*   其他以文本分隔的文件（.tsv 等）
*   KML (.kml)
*   给定 Google Docs 限制的电子表格（.xls、.xslx、.ods 和 Google 电子表格）。

如果您编写自己的应用程序，则可以使用[Fusion Tables API v1](https://developers.google.com/fusiontables/docs/developers_guide)上传数据，但我不会将其称为“批量导入”，因为限制较小。

# c# - 如何使用 fiddlercore 编辑 HTTP 请求 C#

> ID：13875858
> 
> 赞同：1
> 
> 时间：2012-12-14T09:27:06.913
> 
> 标签：c#, http, networking, post, request

我希望能够做的：在将 HTTP 请求发送到服务器之前对其进行编辑

用户在浏览器中导航到他们选择的网页 > 他们遇到想要编辑的请求 > 他们编辑请求，然后将其发送到服务器而不是原始请求。

到目前为止我所做的：我已经捕获了请求，现在我需要帮助找到代码来编辑它。这是我到目前为止捕获请求的代码：

```
 Fiddler.FiddlerApplication.BeforeRequest += sess =>
    {
        //Code to detect user specified URL here
    } 
```

我是否可以在实际发送请求之前对其进行编辑？如果只能使用 FiddlerCore API 来完成，我将不胜感激，但如果需要，我愿意下载更多二进制文件。

附加说明：我尝试过流式写入器，二进制写入器，将响应复制到内存流中编辑它然后将其复制回来，这些方法都不适合我。此外，当我尝试一些方法时，我的应用程序只是挂起并且不响应按 X 之类的操作。

也许我只是不擅长解释我想要实现的目标，似乎我唯一的好答案是关于响应：/

如果请求读取字符串“hello world”，那么我希望用户能够将请求更改为“hello there”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:27:57.070

我犯了一个如此愚蠢的错误，我认为 RequestBody 是只读的！原来我可以像这样简单地编辑响应：

```
 session.RequestBody = myBytes; 
```

为此真的很气自己！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:03:19.797

在演示应用程序中，添加委托如下所示：

```
 Fiddler.FiddlerApplication.BeforeResponse += delegate(Fiddler.Session oS) {
        // Console.WriteLine("{0}:HTTP {1} for {2}", oS.id, oS.responseCode, oS.fullUrl);

        // Uncomment the following two statements to decompress/unchunk the
        // HTTP response and subsequently modify any HTTP responses to replace 
        // instances of the word "Microsoft" with "Bayden". You MUST also
        // set bBufferResponse = true inside the beforeREQUEST method above.
        //
        //oS.utilDecodeResponse(); oS.utilReplaceInResponse("Microsoft", "Bayden");
    }; 
```

# php - 将 301 重定向到 htaccess 中不起作用

> ID：13875859
> 
> 赞同：0
> 
> 时间：2012-12-14T09:27:08.537
> 
> 标签：php, .htaccess

> **可能重复：**
> [htaccess 301 重定向不起作用](https://stackoverflow.com/questions/3117012/htaccess-301-redirect-not-working)

当有人想要时，我需要重定向`test.php to newpage.php`。

我的 htaccess 包含：

```
Options All -Indexes
RewriteEngine on
RewriteRule ^contact.shtml$ contact.php [NC]

RewriteRule ^news/(.*)/(.*)$ news_main.php?id=$1&title=$2 [L]

Redirect /test.php http://mydomain.com/newpage.php 
```

但它不起作用。这里有什么问题吗？如果是我们，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:33:41.047

If the redirect is important, you should place it above the section that is related to the rewrite module.

Also if you want a 301 (Permanent) redirect, you need to specify it. By default, the redirect is 302.

Apart from that, everything looks right in my eyes.

```
# Core Module
Options All -Indexes

# Alias Module
Redirect 301 /test.php http://mydomain.com/newpage.php

# Rewrite Module
RewriteEngine on
RewriteRule ^contact.shtml$ contact.php [NC]
RewriteRule ^news/(.*)/(.*)$ news_main.php?id=$1&title=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:34:59.027

您可以直接在 .htaccess 文件中添加如下代码 -

重定向 301 /test.php [http://mydomain.com/newpage.php](http://mydomain.com/newpage.php)

# iphone - 如何动态变换图像的大小？

> ID：13875860
> 
> 赞同：2
> 
> 时间：2012-12-14T09:27:11.347
> 
> 标签：iphone, objective-c, ios, uiimageview

我想裁剪用户选择的图像的选定部分。我想在下图中实现 ![在此处输入图像描述](../Images/079031081ed5c8eaaddf2611cea503d8.png)

![在此处输入图像描述](../Images/456554776cf8364b379cc2b0a4f3d253.png)

通过移动按钮/图像（绿色边框），用户可以选择他想要的部分。任何人都可以告诉我如何做到这一点，或者如果您有任何示例代码，请提供给我。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:29:28.613

查看[BJImageCropper](https://github.com/barrettj/BJImageCropper)。这也有一个例子。

# java - 将表单提交到 servlet 中的 .java 页面的问题

> ID：13875863
> 
> 赞同：0
> 
> 时间：2012-12-14T09:27:29.067
> 
> 标签：java, apache, jakarta-ee, tomcat

嘿伙计们，我正在开发一个 Apache Tomcat v7.0 servlet，用户在其中输入一些值，被发送到一个页面进行预览，然后点击提交。问题是，一旦他们点击提交，我会得到一个 404 说文件不存在。

项目设置——

WebContent 文件夹包含welcome.js 文件，该文件发送到roster.js 文件以进行预览-在您点击提交的roster.js 文件中，它会将您发送到此链接-`src/bandServ/BandListServ.java`此链接与WebContent 文件夹一起包含在Java Resources 文件夹中. Java Resources 文件夹包含我的包，这就是我希望从 roster.js 文件上的表单发送数据的地方。

roster.js 文件的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
   <%@ include file="/includes/header.html" 

   %>

</head>
<body>
    <h1>Battle Of Bands</h1>

    <p>Here is our band roster:</p>

    <table cellspacing="5" cellpadding="5" border="1">
        <tr>
            <td align="right">Band1:</td>
            <td><%= request.getParameter("Band1name")  %></td>
        </tr>
        <tr>
            <td align="right">Band2:</td>
            <td><%= request.getParameter("Band2name") %></td>
        </tr>
        <tr>
            <td align="right">Band3:</td>
            <td><%= request.getParameter("Band3name") %></td>
        </tr>
        <tr>
            <td align="right">Band4:</td>
            <td><%= request.getParameter("Band4name") %></td>
        </tr>
        <tr>

    </table>

    <p>Ready to Rock</p>

    <form action="src/bandServ/BandListServ.java" method="post">
        <input type="submit" value="submit">
    </form>

</body>
</html>
<%@ include file="/includes/footer.jsp" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:10:44.560

不能直接从表单调用 Java 类。应该创建一个类作为扩展[HttpServlet](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServlet.html)类的 Servlet。然后必须修改[部署描述符](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)(/Project/WEB-INF/web.xml) 以包含 servlet 类详细信息和映射到它的 url。

```
<servlet>
  <servlet-name>BandListServ</servlet-name>
  <servlet-class>bandServ.BandListServ</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>BandListServ</servlet-name>
  <url-pattern>/list-bands</url-pattern>
</servlet-mapping> 
```

修改 JSP 中的 from 以调用 web.xml 中定义的 URL 模式。

```
<form action="/list-bands" method="post">
    <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:32:20.957

您应该提供将 URL 请求转换为方法调用的 servlet 映射。 [http://docs.oracle.com/cd/E11035_01/wls100/webapp/configureservlet.html](http://docs.oracle.com/cd/E11035_01/wls100/webapp/configureservlet.html)

一种更简单的方法是使用 Java Server Pages，它会自动为您翻译代码并进行 servlet 映射。

[编辑]

添加指向 servlet 教程的链接：

[http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:10:47.827

这条线

```
<form action="src/bandServ/BandListServ.java" method="post"> 
```

我相信是磨损的。

action= " " 应该包含一个 uri，它映射到 web.xml 中的逻辑 servlet 名称，该名称映射到 servlet 的完整限定类名称。相反，您不能在操作中指定您的 servlet 名称。

你的 web.xml 应该包含这样的东西

```
<servlet>
  <servlet-name>BandServlet</servlet-name>
  <servlet-class>com.band.BandServlet</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>BandServlet</servlet-name>
  <url-pattern>/getBands</url-pattern>
</servlet-mapping> 
```

并在表单标签中执行此操作

```
<form action="getBands" method="post"> 
```

# codeigniter-2 - 分页时子文件夹中的 Codeigniter 管理控制器问题

> ID：13875872
> 
> 赞同：1
> 
> 时间：2012-12-14T09:28:05.467
> 
> 标签：codeigniter-2

我是 codeigniter 的新手。我已经为管理控制器创建了子文件夹，例如

控制器->admin->news.php

现在，当我访问新闻控制器时，它的工作正常

[http://mysite.com/sacha/admin](http://mysite.com/sacha/admin)`enter code here` /news

但是当我尝试编辑删除或分页时

[http://mysite.com/sacha/admin/news/index/1](http://mysite.com/sacha/admin/news/index/1)

或者

.../sacha/admin/news/1

它显示 404 页面未找到错误

我正在使用的路线是

```
 $route['admin/news'] = 'admin/news';
    $route['admin/news/index'] = 'admin/news/index';
    $route['admin/news/(:num)'] = 'admin/news/$1';
    $route['admin/news/index/(:num)'] = 'admin/news/index/$1'; 
```

我也使用了 (:any) 但没有一个工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:32:05.533

remove your four line you specified above and just update your routes as this,.

```
$route['admin/news/index/(:num)'] = 'admin/news/index/$1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T11:00:05.123

```
$config['uri_segment'] = 4; 
```

您必须在分页中包含此配置参数。

# java - 在 java 中发送没有 gmail 身份验证的电子邮件

> ID：13875878
> 
> 赞同：0
> 
> 时间：2012-12-14T09:29:08.847
> 
> 标签：java, authentication, smtp, sendmail

嗨，我必须用 java 发送电子邮件。

以下已成功为我工作。

```
 public class SendMail {

             public static void main(String[] args) {                   
                 Properties props = new Properties();
                 props.put("mail.smtp.host", "smtp.gmail.com");
                 props.put("mail.smtp.socketFactory.port", "465");
                 props.put("mail.smtp.socketFactory.class",
                                "javax.net.ssl.SSLSocketFactory");
                 props.put("mail.smtp.auth", "true");
                 props.put("mail.smtp.port", "465");

                 Session session = Session.getDefaultInstance(props,
                                   new javax.mail.Authenticator() {
                                     protected PasswordAuthentication getPasswordAuthentication() {
                                        return new PasswordAuthentication("xxxx@gmail.com","xxxxx!1");
                                     }
                                   });

                  try {
                        Message message = new MimeMessage(session);
                        message.setFrom(new InternetAddress("krishnaveni.veeman@gmail.com"));
                        message.setRecipients(Message.RecipientType.TO,
                                      InternetAddress.parse("mercy.krishnaveni@gmail.com"));
                        message.setSubject("Testing Subject");
                        message.setText("Dear Mail Crawler," +
                                      "\n\n No spam to my email, please!");
                        Transport.send(message);
                        System.out.println("Done"); 
                      } catch (MessagingException e) {
                          throw new RuntimeException(e);
                      }
              }

           } 
```

在这里，我提到了 gmail 用户名和密码。但是我必须在我的代码中不使用用户名和密码的情况下发送电子邮件。我该如何开发这个。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:30:31.033

创建一个 mail.properties 文件并将用户名和密码放入该文件中。在代码中使用属性从该文件中检索数据。

此链接可用于加载 Properties 对象

[http://www.dzone.com/snippets/loading-property-file](http://www.dzone.com/snippets/loading-property-file)

# spring-security - Spring Security 是否提供任何这样的 API，我可以在其中传递用户名和密码并获取身份验证对象？

> ID：13875879
> 
> 赞同：0
> 
> 时间：2012-12-14T09:29:10.867
> 
> 标签：spring-security

Spring Security 是否提供了任何此类 API，我可以在其中传递用户名和密码，并且它将返回 Authentication Object 以进行成功的身份验证或 AuthenticationCredentialsNotFoundException 用于不成功的身份验证？

让我详细说明我的要求：

我们的应用程序有一个 HTTP API（比如 /createXXX.do），客户端使用用户名、密码和其他参数来访问它。

现在我想验证 + 授权这个访问（来自 HTTP Hits 到我的应用程序）。

我的计划设计如下： a) 我不会限制对我的 HTTP API 上下文的访问（即 /createXXX.do）

b) 一旦请求到达我的 doGet()/doPost()，我将从请求中检索用户名和密码，并希望使用一些 Spring Security API，如下所示：

Authentication validateXXXXX(String username, String password) 抛出 AuthenticationCredentialsNotFoundException；

c) 以便上面的 API 在内部将这些用户名/密码推送到现有的 spring 安全链，并返回 Authentication Object 用于成功的身份验证或 AuthenticationCredentialsNotFoundException 用于不成功的身份验证。

d) 对于不成功的身份验证，我将捕获 AuthenticationCredentialsNotFoundException 并返回带有 AUTHENTICATION_ERROR 代码的 HttpServletResponse。

e) 为了成功进行身份验证，基于身份验证对象的权限，我将允许或返回带有 AUTHORIZATION_ERROR 代码的 HttpServletResponse。

任何人都可以知道这样的弹簧安全 API 吗？任何指针/建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:57:08.090

如果您只有一个身份验证源（只有 LDAP 或只有 DB），您可以在安全上下文中配置 org.springframework.security.authentication.AuthenticationProvider 的一些实现。然后你可以使用它：

```
User user = new User(login, password, true, true, true, true, new ArrayList<GrantedAuthority>());
Authentication auth = new UsernamePasswordAuthenticationToken(user, password,new ArrayList<GrantedAuthority>());
try {
    auth = authenticationProvider.authenticate(auth);
} catch (BadCredentialsException e) {
    throw new CustomBadCredentialsException(e.getMessage(), e);
}

// but your need to push authorization object manually
SecurityContext sc = new SecurityContextImpl();
sc.setAuthentication(auth);
SecurityContextHolder.setContext(sc); 
```

这是“低级”操纵。您可以使用 Spring Security 命名空间中的元素。它可以为您提供登录控制器，甚至登录表单（它可以自动处理这种情况）。

# windows - 让全屏 XNA 游戏保持领先

> ID：13875881
> 
> 赞同：2
> 
> 时间：2012-12-14T09:29:15.163
> 
> 标签：windows, fullscreen, xna-4.0, direct3d, multiple-monitors

我有一个全屏 xna 游戏，如果可用，它应该在辅助屏幕上运行。在辅助屏幕上进入全屏模式一切正常。但是，当我在主屏幕上聚焦一个窗口时，辅助屏幕上的全屏应用程序会失去焦点。AlwaysOnTop 在这里不是一个选项，因为这不是一个表单，而是一个全屏应用程序。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-30T21:35:42.073

全屏通常应该只有在我认为有焦点的情况下才能工作。您总是可以使应用程序成为一个无边框的窗口，即显示器的大小。所以它仍然是“全屏”而不必有焦点。我不久前写了一些代码来做到这一点，这真的不难让我看看我是否能找到它..

```
 WindowPoint = Window.Position;
        WindowPoint.X = System.Windows.Forms.Screen.AllScreens[0].WorkingArea.Location.X;
        WindowPoint.Y = System.Windows.Forms.Screen.AllScreens[0].WorkingArea.Location.Y;
        Window.Position = WindowPoint;
        Window.IsBorderless = true;

        graphics.PreferredBackBufferWidth = System.Windows.Forms.Screen.AllScreens[0].WorkingArea.Width;
        graphics.PreferredBackBufferHeight = System.Windows.Forms.Screen.AllScreens[0].WorkingArea.Height;
        graphics.IsFullScreen = false;           
        graphics.ApplyChanges(); 
```

我确信有更好的方法来做到这一点。我仍在学习自己，但这可以完成工作。在我的电脑上，AllScreens[0] 是第二台显示器，[1] 是主显示器。让我知道这是否有帮助。祝你好运 ：）

# iphone - 半页卷曲动画背景视图颜色？

> ID：13875882
> 
> 赞同：8
> 
> 时间：2012-12-14T09:29:20.257
> 
> 标签：iphone, objective-c, ios, xcode

在我的项目中，我正在使用页面动画。我的问题是我想在卷曲视图的背景上显示红色。我该如何做到这一点？提前致谢。

![在此处输入图像描述](../Images/9cbaacca031974381b1a74e079fd77f7.png)

```
CATransition *animation = [CATransition animation];
[animation setDelegate:self]; [animation setDuration:0.75];
[animation setTimingFunction:UIViewAnimationCurveEaseInOut];
animation.type = @"pageUnCurl"; 
animation.fillMode = kCAFillModeBackwards;
animation.startProgress = 0.65; 
[animation setRemovedOnCompletion:NO];
[[self view] exchangeSubviewAtIndex:[self.view.subviews count]-2 withSubviewAtIndex:3];
[[self view] exchangeSubviewAtIndex:[self.view.subviews count]-3 withSubviewAtIndex:2];
[[[self view] layer] addAnimation:animation forKey:@"pageCurlAnimation"]; 
```

这就是我改变看法的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:08:59.487

如果您正在使用图层，那么当应用程序进入后台进程时，您可以放松该特定图层的卷曲效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:57:14.363

如果在动画发生时使用 CALayer 作为背景页面，这是可能的。

```
topPageReverseOverlay = [[CALayer alloc] init];
topPageReverseOverlay.backgroundColor = [[[UIColor redColor] colorWithAlphaComponent:0.8] CGColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:43:06.020

如果您想完全控制部分卷曲背后的内容的显示，您可以将其设置为单独的 VC。这是一个例子：

```
EndPartialCurlViewController *nextViewController = [[EndPartialCurlViewController alloc] init];
[nextViewController setModalTransitionStyle:UIModalTransitionStylePartialCurl];
[[self navigationController] presentViewController:nextViewController animated:YES completion:nil]; 
```

然后，您可以在此 EndPartialCurlViewController 中构建您想要的任何颜色、视图、按钮等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:39:50.063

我相信您的问题的答案可以在此线程中找到。 [使用 UIViewAnimationTransitionCurlUp 的卷曲视图的底面颜色](https://stackoverflow.com/questions/2019501/underside-color-of-curling-view-using-uiviewanimationtransitioncurlup)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:58:31.760

经过大量冲浪后，我发现有一种方法可以通过使用过滤器和图层来实现，但这是一种未记录的方法，如果您使用图层，那么当应用程序进入后台进程时，您可以放松该特定图层的卷曲效果..

# couchdb - SaaS、中央数据库、每个用户的数据库，还是组合？

> ID：13875883
> 
> 赞同：0
> 
> 时间：2012-12-14T09:29:22.177
> 
> 标签：couchdb, saas, couchapp

手头的问题如下：

*   SaaS 保存维护记录
*   95% 的数据将特定于每个用户，即不需要被其他用户访问
*   5% 的数据共享（并由所有用户贡献），例如用于维护的部件
*   SaaS 将作为 CouchApp 交付，即面向公众的 CouchDB

所以我在每个用户的数据库和所有用户的单一数据库之间纠结。

每个用户的数据库似乎提供了更容易的备份和维护、更小的数据集和更容易的访问控制。不利的一面是，我如何处理共享数据？

是否可以为每个用户拥有一个数据库，以及一个用于共享信息（部分）的通用数据库？然后将零件文档从所有用户数据库复制到中央数据库，然后再从那里复制到所有用户数据库？在这种情况下如何处理冲突（或者如果可能的话甚至更好地避免）？

或者任何更简单的方法？还是硬着头皮只使用一个中央数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:57:28.917

我猜这取决于共享数据的性质。从用户数据库到共享数据库的过滤复制和从共享数据库到用户数据库的未过滤复制似乎很自然；我认为这涵盖了您的要求？它使每个用户只需要读取/写入他们的特定数据库，而您仍然可以分发共享文档。

直接从共享数据库查询可能比将其复制回用户数据库更容易，但这实际上取决于那里的数据类型。

# css - 输入文本溢出：省略号；对于 Opera 和 IE 不起作用

> ID：13875889
> 
> 赞同：3
> 
> 时间：2012-12-14T09:29:55.007
> 
> 标签：css, internet-explorer, opera

我正在尝试使用 text-overflow: ellipsis 作为我的输入，但只有 chrome 和 Firefox 显示它很好。在 IE 和 Opera 上它没有任何效果。有没有破解..

### 小提琴：http: [//jsfiddle.net/SZYFw/](http://jsfiddle.net/SZYFw/)

```
input {
    text-overflow: ellipsis
}

<pre>
   <input type="text" value="Lorem ipsum dolor sit amet, consectetuer adipiscing elit.">​
</pre> 
```

歌剧版本：12.11 Build 1661 即版本：10

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:08:47.627

我可以使它与具有所有兼容性的 DIV一起工作，但是，不幸的是，在[这里](http://jsfiddle.net/SZYFw/2/)查看它对**输入**元素[的说明](https://stackoverflow.com/questions/9771795/how-to-use-text-overflow-ellipsis-in-an-html-input-field)...

Opera 的兼容性：

```
-o-text-overflow: ellipsis; 
```

另请参阅此[链接](http://www.css3.info/preview/text-overflow/)。我认为 Opera 和 IE 不支持它......但正如你所看到的，其余的都很完美！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:49:13.067

在我起草的[CSS Basic U](http://www.w3.org/TR/css3-ui/#text-overflow)`text-overflow`中， “指定内联内容溢出其块容器时的渲染”。但是一个`input`元素没有内容；它有一个值，显示出来，但该值不是元素内容。

为了考虑解决方法，请指定使用省略号作为输入文本的上下文和目的。如果需要，自动水平滚动值的正常实现`input type=text`，并且可以期望用户看到他到达输入框的末尾。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T09:32:37.313

### Assuming you have no code, ellipsis doesn't work.

See if your code matches to this:

```
display: inline-block;
*display: inline;
*zoom: 1;
text-overflow: ellipsis;
-ms-text-overflow: ellipsis;
white-space: nowrap;
overflow: hidden;
word-wrap: normal;
max-width: 130px;
vertical-align: bottom; 
```

### Fiddle: [http://jsfiddle.net/4mmQm/](http://jsfiddle.net/4mmQm/)

This works in IE 7, IE 8, IE 9, IE 10, Firefox, Chrome

# opencart - opencart - 库存状态名称未更新

> ID：13875894
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:18.443
> 
> 标签：opencart

我得到了 opencart 1.4.9.5 版本。我正在系统 -> 本地化 -> 库存状态的管理员中更改库存状态名称。它已正确保存，但产品页面上的“状态名称”仍然是旧的。

即使我将产品状态更改为任何其他状态，它在管理区域中也已更改，但在产品的前端视图中它仍然是相同的。Stock id 也会在数据库中更改。有什么问题？

阿雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:26:04.970

如果我没记错的话，状态文本实际上是在旧版本的 OpenCart 的语言文件中定义的。我认为这是产品语言文件`catalog/language/your-language/product/product.php`。如果没有，那就是`catalog/language/your-language/your-language.php`

# css - CSS大方格-如何生成表格

> ID：13875897
> 
> 赞同：1
> 
> 时间：2012-12-14T09:30:21.247
> 
> 标签：css, css-tables

我想制作一个大约 50 列和 50 行的网格，每个单元格的高度和宽度为 10px。

```
<!DOCTYPE html>
<html>
<head>
<style>
table
 {
   border-collapse:collapse;
 }
table,th, td
 {
   border: 1px solid black;
 }
td{width:10px;}
tr{height:10px;}
</style>
</head>
<body>

  <table border="1">
    <tr>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </table>

</body>
</html> 
```

我可以通过编写代码一百次来做到这一点..但我认为应该有一些更实用的方法来通过 css 来做到这一点..任何人都可以帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:49:22.587

我不确定你是否可以在 css 中做到这一点，但你当然可以用 javascript 做到这一点：

```
<style>
    td {
        width: 10px;
        border: 1px solid black;
    }

    tr {
        height: 10px;
    }
</style>

<script>
    function makeCells() {
        var t = document.createElement("TABLE");

        for (var rows = 0; rows < 50; rows++) {
            var newRow = document.createElement("TR");
            console.log(newRow);
            t.appendChild(newRow);
            for (var cols = 0; cols < 50; cols++) {
                var newCell = document.createElement("TD");
                newRow.appendChild(newCell);
            }
        }

        document.body.appendChild(t);
    }

    makeCells();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:12:41.153

作为其他有效答案的替代方案，您可以尝试这样的事情[。](http://jsfiddle.net/x9MaJ/2/)

我所做的是`<div>`使用 javascript 创建 2500 s，然后在 500px 容器中为它们提供 1% 的填充。500 的 1% 是 5，所以这给了我们 10px x 10px 的正方形。将它们全部漂浮在容器中，它们很好地对齐到这个 50x50 的网格中。

关键代码是：

```
div {
    padding: 1%;
    background: #aaa;
    float: left;
} 
```

我添加了备用背景颜色以帮助向您展示那里的内容。如果您向 div 添加内容，这将不会很好地播放，但如果它们只有 10px 宽，您似乎不想这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:31:48.893

This is all you need:

```
td {
  width:10px;
  height:10px;
} 
```

However, using a table you can't be sure the width will be always 10px for each cell, because if the window's width is less than the table width, the cells will shrink by default.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:25:45.097

无论如何，您需要 50 × 50 个元素，并且您不能在 CSS 或 HTML 中循环创建元素（它们没有循环，因为它们不是编程语言）。有许多不同的方法可以在服务器端或客户端编程语言中生成元素，但您首先需要决定使用哪种技术，然后使用所选语言的基本结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:06:23.157

```
 <!DOCTYPE html>
   <html>
   <head>
   <style>
       table{ border-collapse:collapse; }
       table,th, td{ border: 1px solid black; }
       td{width:10px;}
       tr{height:10px;}
   </style>
   </head>
   <body>
   <table border="1">
   <?php for($ctr=0; $ctr<=50; $ctr++){ ?>
   <tr>
       <?php for($ctr2=0; $ctr2<=50; $ctr2++){ ?>
       <td></td>
       <?php }?>
   </tr>
   <?php }?>
   </table>
   </body>
   </html> 
```

试一试

# iphone - 从 iphone 应用程序发布到 twitter 和 facebook

> ID：13875900
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:25.693
> 
> 标签：iphone, objective-c, ios, facebook, twitter

我使用以下代码从我的 iphone 应用程序发布到 FB 和 twitter

**但是我怎样才能在不显示作曲家的情况下直接发布**

```
 -(IBAction)fbposting{

   if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook ]) {

    slComplose = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [slComplose addImage:imageV.image];
    [slComplose addURL:[NSURL URLWithString:@"http://newagesmb.com"]];

    [slComplose setInitialText:self.textView.text];
    [self presentViewController:slComplose animated:YES completion:nil];

} 
```

[self.textView resignFirstResponder];

}

```
-(IBAction)twitposting{
   if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter ]) {

    slComplose = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    [slComplose setInitialText:self.textView.text];
    [slComplose addURL:[NSURL URLWithString:@"http://newagesmb.com"]];

    [slComplose addImage:imageV.image];

    [self presentViewController:slComplose animated:YES completion:nil];

   }
   [self.textView resignFirstResponder];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:35:55.277

在 SLRequest 类中使用以下方法获取 Request 对象

```
+(SLRequest *)requestForServiceType:(NSString *)serviceType requestMethod:(SLRequestMethod)requestMethod URL:(NSURL *)url parameters:(NSDictionary *)parameters 
```

然后发布请求

```
performRequestWithHandler 
```

# html - 当子元素浮动时，“最大宽度”属性不起作用？

> ID：13875901
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:27.840
> 
> 标签：html, css

我想`max-width`在其子元素浮动的容器元素上进行设置。我该怎么做？

默认情况下，该`max-width`属性在给定场景中不起作用（但`min-width`确实如此）。[这是一个小提琴](http://jsfiddle.net/its_me/bJG54/)，你可以用它来帮助我解决这个问题。

查看小提琴的预览窗格——这就是我所说的（`.dropdown-menu`类定义了相关的样式）：

![最小宽度不起作用](../Images/6a8ab9e00b522ae1e6c8fcdaebc39579.png)

但这就是它应该看起来的样子（有点）：

![预览它的外观](../Images/a019571820b1f23c50717ff8f833480e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:44:35.633

替换`position:absolute;`为`position:fixed;`

并更改`left:0px;`为`left:35px;`

**更新笔**：[http ://codepen.io/joe/pen/hzDaG](http://codepen.io/joe/pen/hzDaG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:45:00.287

更改`position:absolute`为`position: fixed;`_`.dropdown-menu`

`width/height:100%`不适用于绝对位置。

```
.dropdown-menu {
    position: fixed;
    top: 36px;
    left: 35px; 
    z-index: 1000;
    display: none;
   max-width: 100% !important; 
    padding: 0;
    margin: 0;
    list-style: none;
    background-color: #fff;
    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    -moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.12);
    color: #222;
} 
```

**[演示](http://jsfiddle.net/Arav8/9/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:54:17.273

为什么不直接使用 with 而不是 max width，那样工作.. 或者放一个 div 来包围 ul 标签然后放一个宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T17:58:21.327

这些引用应该回答这个问题：

> 浮动框位于正常流中，然后从流中取出并尽可能向左或向右移动。内容可能会沿着浮动的一侧流动。
> 
> 当一个盒子从正常流中取出时，所有仍在正常流中的内容将完全忽略它并且不为它腾出空间。
> 
> 您应该始终在浮动项目上设置宽度（除非直接应用于具有隐式宽度的图像）。如果未设置宽度，则结果可能无法预测。
> 
> 一方面，被浮动的盒子应该有一个明确的或隐含的宽度。否则，它将水平填充其包含块，就像非浮动内容一样，没有空间让其他内容在其周围流动。其次，与正常流程中的盒子不同，浮动盒子的垂直边距不会随着盒子的边距在其上方或下方折叠。最后，浮动框可以与正常流程中与其相邻的块级框重叠。

**- 通过[粉碎杂志](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)**

因此，您唯一的选择是`min-width`和`width`。

# google-chrome - How to make the window (webview) in Chrome Packaged Apps scroll for pages with content more than available height?

> ID：13875905
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:39.003
> 
> 标签：google-chrome, google-chrome-frame

I created a test application using Yeoman/Angular.js and pasted a chunk load of HTML (responsive) to view it as a Chrome Packaged App (CPA). The page_height with all its content is more than the height of packaged application in full_screen mode.

There seems no way to scroll down the view (touch/mouse-drag) to see the content below. How do I add/enable scroll bar on a page? Shouldn't this be by default?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T23:54:56.613

有同样的问题。在您的 css 文件中，添加：

```
html {
    overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T10:05:27.000

另一个更顺利的解决方案如下：

```
body {
    margin:0;
    padding:0;
    overflow-y: hidden;
}
body:hover {
    overflow-y: scroll;
} 
```

[提琴手](http://jsfiddle.net/4RSbp/165/)

[参考](https://stackoverflow.com/a/24911864/3370265)

# iphone - MPMoviePlayerController fast forward in full screen mode issue?

> ID：13875907
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:53.063
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

> **Possible Duplicate:**
> [MPMoviePlayerController seek forward in fullscreen mode until end is stuck](https://stackoverflow.com/questions/6982664/mpmovieplayercontroller-seek-forward-in-fullscreen-mode-until-end-is-stuck)

When I do fast forward in full screen mode in MPMoviePlayerController screen turns black and then I cant do any thing.

this is a major issue I am facing ,please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:26:09.363

线索是处理 // 注册以在电影播放完毕时接收通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self  
                                     selector:@selector(moviePlayBackDidFinish:)  
                                         name:MPMoviePlayerPlaybackDidFinishNotification  
                                       object:moviePlayer]

- (void) moviePlayBackDidFinish:(NSNotification*)notification {  
  MPMoviePlayerController *moviePlayer = [notification object];  
  [[NSNotificationCenter defaultCenter] removeObserver:self  
                                                  name:MPMoviePlayerPlaybackDidFinishNotification  
                                                object:moviePlayer];  

    [moviePlayer dismissVC];  
  [moviePlayer release];  
  } 
```

# x86 - Loading a PE in memory for emulation

> ID：13875908
> 
> 赞同：3
> 
> 时间：2012-12-14T09:30:52.930
> 
> 标签：x86, kernel, emulation, portable-executable

I am currently developing a code emulator more for fun than for anything else, using libemu as the core for this emulator.

The only thing that I really want achieve is to load an entire PE into memory and let it rip.

So I've build a little TODO list with the following items:

*   Read the headers ◦Check if the PE is Valid (x86 Platform)
*   Extract the required data to setup the memory segments
*   Hook all the imported functions to my custom API.
*   Set the EIP to work correctly
*   Build the stack segment (set esp and ebp)
*   Set the Eflags

I've managed to get most of this done within a day. Although I seem to have issues with setting the stack segment correctly. Currently I set my registers with the following code segment:

```
/* Set Registers */
entry_point = pe->nt_header->AddressOfEntryPoint;
emu_cpu_eip_set(cpu, entry_point);
emu_cpu_reg32_set(cpu, eax, 0x00
emu_cpu_reg32_set(cpu, ecx, 0x00);   
emu_cpu_reg32_set(cpu, edx, entry_point); 
emu_cpu_reg32_set(cpu, ebx, 0x00);       
emu_cpu_reg32_set(cpu, ebp, (0x0095f000 - 0x1000 / 2));        
emu_cpu_reg32_set(cpu, esp, emu_cpu_reg32_get(cpu, ebp));  
emu_cpu_reg32_set(cpu, esi, 0x00);

emu_cpu_reg32_set(cpu, edi, 0x00); 
```

emu_cpu_eflags_set(cpu, 0x0000246);

I am thinking the issue lays within the ebp register. The values seem odd, but PyEmu seems to use them aswell. The reason I think the issue lays within the use of the stack is well it's hardcoded to start with and second the code that crashes is 83 65 f8 00 that translates to 00692D67, and dword ptr [ebp-8], 0 in Assembler.

I think that the stack is set with the use of the NTLoader for the PE files. But I can't seem to find it or the documentation about this.

Any pointers on how to continue would be really really appreciated.

*   Robin

ps. I've cross posted this on a couple of boards etc to increase the chance for an answer. I've read a lot of old Windows documentation about loading PE files but they all just point at the SP segment in the headers. But as thats not the ESP I doubt it's the base (EBP) of the stack.

One cross-post can be found on OpenRCE: [http://www.openrce.org/forums/posts/2171](http://www.openrce.org/forums/posts/2171) The other cross-post can be found at SysInternals: [http://forum.sysinternals.com/topic28898_post138041.html#138041](http://forum.sysinternals.com/topic28898_post138041.html#138041)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:19:52.853

问题似乎是堆栈位于不同的内存偏移量中。

# javascript - How do I programmatically select a qooxdoo table cell and then start editing?

> ID：13875909
> 
> 赞同：0
> 
> 时间：2012-12-14T09:30:53.680
> 
> 标签：javascript, qooxdoo

I would like to programmatically select a cell in a Qooxdoo table widget and then start the editor for that cell.

So far, I’ve been able to figure out the following: I can select and focus the cell as follows:

```
var pane = table.getPaneScroller(0);
var selectionModel = table.getSelectionModel();
selectionModel.resetSelection();
selectionModel.addSelectionInterval(row, row);
pane.setFocusedCell(col, row); 
```

However, a subsequent call to `table.startEditing()` will not start the cell editor. It works if the cell had manually been selected by the user.

What does the user’s selection of the cell do that my programmatic approximation fails to?

I’ve put together an [example](http://demo.qooxdoo.org/2.1/playground/#%7B%22code%22%3A%22function%2520createRandomRows(rowCount)%2520%257B%250A%2520%2520var%2520rowData%2520%253D%2520%255B%255D%253B%250A%2520%2520for%2520(var%2520row%2520%253D%25200%253B%2520row%2520%253C%2520rowCount%253B%2520row%252B%252B)%2520%257B%250A%2520%2520%2520%2520rowData.push(%255BMath.random()%2520*%252010000%255D)%253B%250A%2520%2520%257D%250A%2520%2520return%2520rowData%253B%250A%257D%250A%250A%250A%252F%252F%2520table%2520model%250Avar%2520tableModel%2520%253D%2520new%2520qx.ui.table.model.Simple()%253B%250AtableModel.setColumns(%255B%2520%2522A%2520number%2522%2520%255D)%253B%250AtableModel.setData(createRandomRows(10))%253B%250A%250A%252F%252F%2520make%2520second%2520column%2520editable%250AtableModel.setColumnEditable(0%252C%2520true)%253B%250A%250A%252F%252F%2520table%250Avar%2520table%2520%253D%2520new%2520qx.ui.table.Table(tableModel)%253B%250Athis.getRoot().add(table)%253B%250A%250Avar%2520row%2520%253D%25201%252C%2520col%2520%253D%25200%253B%250A%250Avar%2520pane%2520%253D%2520table.getPaneScroller(0)%253B%250Avar%2520selectionModel%2520%253D%2520table.getSelectionModel()%253B%250AselectionModel.resetSelection()%253B%250AselectionModel.addSelectionInterval(row%252C%2520row)%253B%250Apane.setFocusedCell(col%252C%2520row)%253B%250A%250A%252F%252FThis%2520seems%2520to%2520not%2520have%2520any%2520effect%250Atable.startEditing()%253B%250A%250A%252F%252FClicking%2520into%2520the%2520cell%2520during%2520the%2520timeout%2520will%2520have%2520the%2520startEditing%2520call%2520working%2520correctly.%250Awindow.setTimeout(function()%2520%257B%250A%2520%2520table.startEditing()%253B%250A%2520%2520alert(%27editing%2520started%27)%253B%250A%257D%252C%25205000)%253B%250A%22%2C%20%22mode%22%3A%22ria%22%7D) demonstrating the problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:00:57.907

我一直痴迷于`startEditing`不工作，以至于我没有看到明显的：我完全弄错了聚焦部分。我从[一个旧的讨论线程](http://qooxdoo.678.n2.nabble.com/table-focus-question-td4776865.html)中复制了它。显然，它太旧了。

现在我正在这样做：

```
var selectionModel = table.getSelectionModel();
selectionModel.resetSelection();
selectionModel.addSelectionInterval(row, row);
table.setFocusedCell(col, row);
table.startEditing(); 
```

选择单元格所在的行甚至不是绝对必要的，但未选择行中的焦点单元格看起来有点奇怪。

# c++ - C++ Boost: Split function is_any_of()

> ID：13875913
> 
> 赞同：5
> 
> 时间：2012-12-14T09:31:37.343
> 
> 标签：c++, boost

I'm trying to use the `split()` function provided in `boost/algorithm/string.hpp` in the following function :

```
vector<std::string> splitString(string input, string pivot) { //Pivot: e.g., "##"
    vector<string> splitInput;  //Vector where the string is split and stored
    split(splitInput,input,is_any_of(pivot),token_compress_on);       //Split the string
    return splitInput;
} 
```

The following call :

```
string hello = "Hieafds##addgaeg##adf#h";
vector<string> split = splitString(hello,"##"); //Split the string based on occurrences of "##" 
```

splits the string into `"Hieafds" "addgaeg" "adf"` & `"h"`. However I don't want the string to be split by a single `#`. I *think* that the problem is with `is_any_of()`.

How should the function be modified so that the string is split only by occurrences of `"##"` ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T09:37:14.480

你是对的，你必须使用**is_any_of()**

```
std::string input = "some##text";
std::vector<std::string> output;
split( output, input, is_any_of( "##" ) ); 
```

**更新**

但是，如果你想精确地分割两个锐利，也许你必须使用正则表达式：

```
 split_regex( output, input, regex( "##" ) ); 
```

看看[文档示例](http://www.cplusplus.com/faq/sequences/strings/split/)。

# javascript - Javascript : find a city using latitude/longitude?

> ID：13875914
> 
> 赞同：0
> 
> 时间：2012-12-14T09:31:40.197
> 
> 标签：javascript, xml, location, latitude-longitude

I have a XML file containing meteorological measures with their latitudes and longitudes. I want to find the city corresponding to a given latitude and longitude with Javascript. How should I do ?

Thanks for your answers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:08:58.567

```
// To initialisation Map and GeoCoder
var geocoder = new google.maps.Geocoder();
var infowindow = new google.maps.InfoWindow(); 
var marker,map;
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();

 directionsDisplay = new google.maps.DirectionsRenderer();
            var chicago = new google.maps.LatLng(41.850033, -87.6500523);
            var mapOptions = {
                zoom: 6,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: chicago
            }

 map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

// It is called Reverse Geocoding

      var latlng = new google.maps.LatLng(41.850033, -87.6500523);
        geocoder.geocode({'latLng': latlng}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {
              map.setZoom(11);
              marker = new google.maps.Marker({
                  position: latlng,
                  map: map
              });
              infowindow.setContent(results[1].formatted_address);
              infowindow.open(map, marker);
            } else {
              alert('No results found');
            }
          } else {
            alert('Geocoder failed due to: ' + status);
          } 
```

# cocoa - NSTextView textDidChange/didChangeText not called for bindings

> ID：13875915
> 
> 赞同：4
> 
> 时间：2012-12-14T09:31:43.983
> 
> 标签：cocoa, cocoa-bindings, nstextview

I have a custom `NSTextView` implementation that automatically adjusts the font size so that the text fills the entire view.

I overwrote `didChangeText` to call my font size adjustment method. Works great when the user is editing text, but `didChangeText` (and the delegate method `textDidChange:`) are not called when the text view contents are set via bindings.

The font adjustment code needs to run whenever the text is set/changes, not only when it's changed by the user.

How can I detect all changes to the text in an `NSTextView`, even via bindings?

*Note:* If there's a better way to have the text fill the entire text view other than increasing the font size, let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:52:11.653

最好将字体属性设置`NSAttributedString`为绑定到文本视图的“attributedString”。在`textDidChange:`委托方法中，您可以`NSAttributedString`使用正确的字体属性重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T08:43:31.263

当绑定更新文本（与更新模型的文本视图相反）时，不会调用 NSTextView 方法 didChangeText。

didChangeText 是绑定更新的来源。如果您覆盖它并且不调用 super，则绑定被破坏。didChangeText 调用委托方法 textDidChange。

不幸的是，在 NSTextView 更新过程中，didChangeText 也被调用得相当晚——在布局和存储委托调用之后。

我发现 NSTextStorageDelegate 方法“didProcessEditing”是捕获绑定字符串更改的最佳方法。尽管此时您必须小心您可以对 textview 进行哪些更改 - 一些调用崩溃了。

我在这里更全面地回答了我自己的类似问题： [NSTextView textDidChange not called through binding](https://stackoverflow.com/questions/54574055/nstextview-textdidchange-not-called-through-binding)

# c# - 对属性更改执行动画

> ID：13875919
> 
> 赞同：3
> 
> 时间：2012-12-14T09:32:01.357
> 
> 标签：c#, wpf, storyboard

我有`ContentControl`一个属性`Content`。我希望在属性内容更改时制作动画

**实际情况**

**XAML**

```
 <ContentControl Grid.Row="0" Content="{Binding Path=CurrentPage}">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type vm:SomeVM}">
                        <view:SomeView />
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type vm:SomeOtherVM}">
                        <view:SomeOtherView />
                    </DataTemplate>
                </ContentControl.Resources>
     </ContentControl> 
```

现在我希望以`Fade Out`当前内容当属性`CurrentPages`

也可以`Fade In`在新页面中使用。

CurrentPage 的值可以是任何东西，所以我希望如果它改变然后拖动画踢...

在这个方向上的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:44:16.290

我们使用这种[附加行为](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)

```
public class AnimatedSwitch : DependencyObject
{
    // Define the attached properties      
    public static DependencyProperty BindingProperty =
        DependencyProperty.RegisterAttached("Binding", typeof(object), typeof(AnimatedSwitch),
        new PropertyMetadata(BindingChanged));

    public static DependencyProperty PropertyProperty =
        DependencyProperty.RegisterAttached("Property", typeof(string), typeof(AnimatedSwitch));

    public static object GetBinding(DependencyObject e)
    {
        return e.GetValue(BindingProperty);

    }

    public static void SetBinding(DependencyObject e, object value)
    {
        e.SetValue(BindingProperty, value);
    }

    public static string GetProperty(DependencyObject e)
    {
        return (string)e.GetValue(PropertyProperty);
    }

    public static void SetProperty(DependencyObject e, string value)
    {
        e.SetValue(PropertyProperty, value);
    }
    // When the value changes do the fadeout-switch-fadein      
    private static void BindingChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Storyboard fadeout = new Storyboard();
        var fadeoutAnim = new DoubleAnimation() { To = 0, Duration = new Duration(TimeSpan.FromSeconds(0.3)) };
        Storyboard.SetTarget(fadeoutAnim, d);
        Storyboard.SetTargetProperty(fadeoutAnim, new PropertyPath("Opacity"));
        fadeout.Children.Add(fadeoutAnim);
        fadeout.Completed += (d1, d2) =>
        {
            var propName = GetProperty(d);
            if (propName != null)
            {
                var prop = d.GetType().GetProperty(propName);
                var binding = GetBinding(d);
                prop.SetValue(d, binding, null);
            }
            Storyboard fadein = new Storyboard();
            var fadeinAnim = new DoubleAnimation() { To = 1, Duration = new Duration(TimeSpan.FromSeconds(0.3)) };
            Storyboard.SetTarget(fadeinAnim, d);
            Storyboard.SetTargetProperty(fadeinAnim, new PropertyPath("Opacity"));
            fadein.Children.Add(fadeinAnim);
            fadein.Begin();

        };
        fadeout.Begin();
    }
} 
```

然后

```
<ContentControl Grid.Row="0"  
     yourNamespace:AnimatedSwitch.Binding="{Binding CurrentPage}"   
     yourNamespace:AnimatedSwitch.Property="Content">
            <ContentControl.Resources>
                <DataTemplate DataType="{x:Type vm:SomeVM}">
                    <view:SomeView />
                </DataTemplate>

                <DataTemplate DataType="{x:Type vm:SomeOtherVM}">
                    <view:SomeOtherView />
                </DataTemplate>
            </ContentControl.Resources>
 </ContentControl> 
```

# regex - HTML5 pattern exclude words

> ID：13875922
> 
> 赞同：3
> 
> 时间：2012-12-14T09:32:09.653
> 
> 标签：regex, html, textarea, spam

I want to exclude some unwanted words in an input field of textarea using the pattern function in HTML5.

so I want exclude word inside a text like 'viagra' and 'cialis'

How can I code this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T09:41:08.703

您可以使用此正则表达式：

```
^((?!viagra)(?!cialis).)*$ 
```

如帖子中所述：[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:36:22.080

你可以使用它

```
<input type="text" pattern="[^(^viagra$|^cialis$)]"> 
```

# jquery-ui - 如何仅使用 jQuery 动画添加背景颜色？

> ID：13875926
> 
> 赞同：0
> 
> 时间：2012-12-14T09:32:27.040
> 
> 标签：jquery-ui

jQuery 的动画功能不适用于背景色。如何在不添加 jQuery UI 或其他插件的情况下顺利地将背景颜色从白色变为颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:32:27.040

您可以通过使用fadeIn() 的简单技巧来做到这一点。

```
$('element').css('background-color','red');
$('element').hide();
$('element').fadeIn(500); 
```

# objective-c - 每个对象的核心数据和唯一 UIImage

> ID：13875942
> 
> 赞同：0
> 
> 时间：2012-12-14T09:33:29.877
> 
> 标签：objective-c, ios, core-data, uiimage, save

我正在制作一个简单的应用程序，用户可以在其中创建使用 CoreData 保存的多个对象。

我的问题是，我希望每个对象都有一个链接到它的图像。图像是由 iphone 相机或用户个人相机胶卷带来的，因此图像的权重很高（我认为每个图像 > 1MB）。我读到当图像的权重很高时，处理这个问题的好方法是将图像保存在documentsDirectory文件夹中，并将路径保存到coreData。我很容易做到了这一点。

但是如何找到要链接到唯一对象的图像的路径名？CoreData 并不能真正处理唯一的 ID，并且两个对象可以具有相同的名称......我搜索了 objectID，但它的工作并不好，我不确定这是处理这个问题的好方法。

你有什么主意吗？还有其他我完全想念的简单方法吗？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:04:20.703

使用 coredata 的 objectID 作为标识符

```
id uri = [self sanitizeFilename:coreDataObject.objectID.URIRepresentation];
[NSString stringWithFormat:@"%@.png", uri]; 
```

助手清理文件名：

```
- (NSString *)sanitizeFileNameString:(NSString *)fileName {
    NSCharacterSet* illegalFileNameCharacters = [NSCharacterSet characterSetWithCharactersInString:@"/\\?%*|\"<>"];
    return [[fileName componentsSeparatedByCharactersInSet:illegalFileNameCharacters] componentsJoinedByString:@""];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:49:44.777

只需在您的 CoreData 模型实体描述中创建一个 object_id 编号属性，每次创建新对象时将此属性加一并将其分配给对象，然后使用命名约定，如

`[NSString stringWithFormat:@"object_%d_img.png", idNumber];`

并将其保存到`NSDoctumentsDirectory`.

然后在对象的`- (void)prepareForDeletion`方法中删除图像。

至于如何增加 id 值，创建一个方法来获取具有最大 id 值的对象 - 只需按 id desc 获取所有具有排序描述符的对象，并在创建新实体时使用它 + 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T21:27:01.183

感谢@Daij-Djan。我为 Swift 创建了版本：

```
 var itemObjectId:String = item.objectID.URIRepresentation().absoluteString!
    var fileName = NSString(format:"%@.png", FileHelper.sanitizeFileNameString(itemObjectId)) as String 
```

消毒助手：

```
struct FileHelper {
 static func sanitizeFileNameString(fileName:String) ->String {
    let illegalFileNameCharacters:NSCharacterSet = NSCharacterSet(charactersInString: "/\\?%*|\"<>")
    let components : [String] = fileName.componentsSeparatedByCharactersInSet(illegalFileNameCharacters)
    let joinedString = join("", components)
    return joinedString
} 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T09:50:24.557

我认为您需要自己生成唯一ID。因为一个用户可以有多个对象。所以也许图像ID可以这样命名

```
userId-objectId-somesalt 
```

将值保存到对象的路径

# c# - 返回缩进的 json 对象

> ID：13875945
> 
> 赞同：0
> 
> 时间：2012-12-14T09:33:56.630
> 
> 标签：c#, asp.net, json, json.net

我正在尝试返回一个对象的美化 json 序列化并使用 Response.Write 在 ASP.NET 中输出它，这是我的代码。不要介意不验证用户输入的明显罪行，这只是一个愚蠢的小测试应用程序。

```
try
{
var customer = this.sc.GetCustomer(Convert.ToInt32(TextBox1.Text));
var json = JsonConvert.SerializeObject(customer, Formatting.Indented);
Response.Write(json);
}
catch (Exception ex)
{
    Response.Write("An error occurred: " + ex.Message);
} 
```

Formatting.Indented 似乎没有效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:37:23.647

看看你的网页的源代码，你可能会发现它的布局很好。HTML 在浏览器中呈现时会忽略/折叠空格和换行符。

您需要将`json`值放入`<pre></pre>`标签中以显示间距，或将其放入多行文本框或类似内容中。

```
Response.Write("<pre>");
Response.Write(json);
Response.Write("</pre>"); 
```

# php - color picker box not works

> ID：13875949
> 
> 赞同：2
> 
> 时间：2012-12-14T09:34:17.140
> 
> 标签：php, javascript, jquery, color-picker

I have a problem with jquery color picker. When I click on box to display the panel, it show me an error message on firebug:

*TypeError: dhe.get(...) is undefined in javascript file with name idrag.js*

Here's the code of idrag.js:

```
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[(function(e){return d[e]})];e=(function(){return'\\w+'});c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('8.a={m:W,7:W,2d:u(){n c.2A(u(){9(c.22){c.1c=W;8(c).21(\'2o\',8.a.29)}})},2r:u(e){9(8.a.7!=W){8.a.1y(e);n d}25 6=c.1c;8(19).1R(\'2x\',8.a.26).1R(\'2y\',8.a.1y);6.5.A=8.D.2P(e);6.5.S=6.5.A;6.5.1H=d;6.5.3o=c!=c.1c;8.a.7=6;9(6.5.10&&c!=c.1c){23=8.D.2a(6.1i);1N=8.D.1w(6);1O={x:q(8.z(6,\'I\'))||0,y:q(8.z(6,\'H\'))||0};g=6.5.S.x-23.x-1N.18/2-1O.x;j=6.5.S.y-23.y-1N.V/2-1O.y;8.1L.2Y(6,[g,j])}n d},29:u(e){6=8.a.7;6.5.1H=F;1z=6.E;6.5.1F=8.z(6,\'R\');6.5.1j=8.z(6,\'1r\');9(!6.5.2e)6.5.2e=6.5.1j;6.5.p={x:q(8.z(6,\'I\'))||0,y:q(8.z(6,\'H\'))||0};6.5.1o=0;6.5.1p=0;9(8.1l.1S){1X=8.D.1W(6,F);6.5.1o=1X.l||0;6.5.1p=1X.t||0}6.5.f=8.1G(8.D.2a(6),8.D.1w(6));9(6.5.1j!=\'2f\'&&6.5.1j!=\'2n\'){1z.1r=\'2f\'}8.a.m.2s();K=6.2Z(F);8(K).z({R:\'2g\',I:\'14\',H:\'14\'});K.E.2b=\'0\';K.E.2h=\'0\';K.E.2c=\'0\';K.E.2i=\'0\';8.a.m.1I(K);9(6.5.17)6.5.17.1n(6,[K]);C=8.a.m.U(0).E;9(6.5.1V){C.1T=\'2O\';C.1U=\'2O\'}L{C.1U=6.5.f.V+\'M\';C.1T=6.5.f.18+\'M\'}C.R=\'2g\';C.2b=\'14\';C.2h=\'14\';C.2c=\'14\';C.2i=\'14\';8.1G(6.5.f,8.D.1w(K));9(6.5.v){9(6.5.v.I){6.5.p.x+=6.5.A.x-6.5.f.x-6.5.v.I;6.5.f.x=6.5.A.x-6.5.v.I}9(6.5.v.H){6.5.p.y+=6.5.A.y-6.5.f.y-6.5.v.H;6.5.f.y=6.5.A.y-6.5.v.H}9(6.5.v.1Q){6.5.p.x+=6.5.A.x-6.5.f.x-6.5.f.V+6.5.v.1Q;6.5.f.x=6.5.A.x-6.5.f.18+6.5.v.1Q}9(6.5.v.27){6.5.p.y+=6.5.A.y-6.5.f.y-6.5.f.V+6.5.v.27;6.5.f.y=6.5.A.y-6.5.f.V+6.5.v.27}}6.5.1q=6.5.p.x;6.5.1J=6.5.p.y;9(6.5.1b||6.5.k==\'1s\'){1k=8.D.1W(6.1i,F);6.5.f.x=6.32+(8.1l.1S?0:8.1l.2C?-1k.l:1k.l);6.5.f.y=6.33+(8.1l.1S?0:8.1l.2C?-1k.t:1k.t);8(6.1i).1I(8.a.m.U(0))}9(6.5.k){8.a.2m(6);6.5.Q.k=8.a.2I}9(6.5.10){8.1L.35(6)}C.I=6.5.f.x-6.5.1o+\'M\';C.H=6.5.f.y-6.5.1p+\'M\';C.1T=6.5.f.18+\'M\';C.1U=6.5.f.V+\'M\';8.a.7.5.1v=d;9(6.5.12){6.5.Q.T=8.a.2G}9(6.5.11!=d){8.a.m.z(\'11\',6.5.11)}9(6.5.N){8.a.m.z(\'N\',6.5.N);9(1C.1D){8.a.m.z(\'2u\',\'2v(N=\'+6.5.N*2w+\')\')}}9(6.5.16==d){1z.R=\'1m\'}9(8.G&&8.G.1Z>0){8.G.36(6)}n d},2m:u(6){9(6.5.k.J==2t){9(6.5.k==\'1s\'){6.5.s=8.1G({x:0,y:0},8.D.1w(6.1i));1g=8.D.1W(6.1i,F);6.5.s.w=6.5.s.18-1g.l-1g.r;6.5.s.h=6.5.s.V-1g.t-1g.b}L 9(6.5.k==\'19\'){20=8.D.37();6.5.s={x:0,y:0,w:20.w,h:20.h}}}L 9(6.5.k.J==2B){6.5.s={x:q(6.5.k[0])||0,y:q(6.5.k[1])||0,w:q(6.5.k[2])||0,h:q(6.5.k[3])||0}}6.5.s.g=6.5.s.x-6.5.f.x;6.5.s.j=6.5.s.y-6.5.f.y},1B:u(7){9(7.5.1b||7.5.k==\'1s\'){8(\'2j\',19).1I(8.a.m.U(0))}8.a.m.2s().3b().z(\'N\',1);9(1C.1D){8.a.m.z(\'2u\',\'2v(N=2w)\')}},1y:u(e){8(19).21(\'2x\',8.a.26).21(\'2y\',8.a.1y);9(8.a.7==W){n}7=8.a.7;8.a.7=W;9(7.5.1H==d){n d}9(7.5.1K==F){8(7).z(\'1r\',7.5.1j)}1z=7.E;9(7.10){8.a.m.z(\'2p\',\'2q\')}9(7.5.28==d){9(7.5.P>0){9(!7.5.B||7.5.B==\'1u\'){x=2M 8.P(7,7.5.P,\'I\');x.2z(7.5.p.x,7.5.1e)}9(!7.5.B||7.5.B==\'1A\'){y=2M 8.P(7,7.5.P,\'H\');y.2z(7.5.p.y,7.5.1f)}}L{9(!7.5.B||7.5.B==\'1u\')7.E.I=7.5.1e+\'M\';9(!7.5.B||7.5.B==\'1A\')7.E.H=7.5.1f+\'M\'}8.a.1B(7);9(7.5.16==d){8(7).z(\'R\',7.5.1F)}}L 9(7.5.P>0){7.5.1v=F;9(8.G&&8.G.2D&&8.1E){1a=8.D.2a(8.1E.m.U(0))}L{1a=d}8.a.m.3f({I:1a?1a.x:7.5.f.x,H:1a?1a.y:7.5.f.y},7.5.P,u(){7.5.1v=d;9(7.5.16==d){7.E.R=7.5.1F}8.a.1B(7)})}L{8.a.1B(7);9(7.5.16==d){8(7).z(\'R\',7.5.1F)}}9(8.G&&8.G.1Z>0){8.G.3h(7)}9(8.1E&&8.G.2D){8.1E.3i(7)}9(7.5.Y&&(7.5.1e!=7.5.p.x||7.5.1f!=7.5.p.y)){7.5.Y.1n(7,7.5.3j||[0,0,7.5.1e,7.5.1f])}9(7.5.13)7.5.13.1n(7);n d},2G:u(x,y,g,j){9(g!=0)g=q((g+(c.5.12*g/O.2H(g))/2)/c.5.12)*c.5.12;9(j!=0)j=q((j+(c.5.1d*j/O.2H(j))/2)/c.5.1d)*c.5.1d;n{g:g,j:j,x:0,y:0}},2I:u(x,y,g,j){g=O.2J(O.2K(g,c.5.s.g),c.5.s.w+c.5.s.g-c.5.f.18);j=O.2J(O.2K(j,c.5.s.j),c.5.s.h+c.5.s.j-c.5.f.V);n{g:g,j:j,x:0,y:0}},26:u(e){9(8.a.7==W||8.a.7.5.1v==F){n}25 7=8.a.7;7.5.S=8.D.2P(e);9(7.5.1H==d){2R=O.3n(O.2Q(7.5.A.x-7.5.S.x,2)+O.2Q(7.5.A.y-7.5.S.y,2));9(2R<7.5.1t){n}L{8.a.29(e)}}g=7.5.S.x-7.5.A.x;j=7.5.S.y-7.5.A.y;2T(i 2U 7.5.Q){Z=7.5.Q[i].1n(7,[7.5.p.x+g,7.5.p.y+j,g,j]);9(Z&&Z.J==2V){g=i!=\'1Y\'?Z.g:(Z.x-7.5.p.x);j=i!=\'1Y\'?Z.j:(Z.y-7.5.p.y)}}7.5.1q=7.5.f.x+g-7.5.1o;7.5.1J=7.5.f.y+j-7.5.1p;9(7.5.10&&(7.5.15||7.5.Y)){8.1L.15(7,7.5.1q,7.5.1J)}9(!7.5.B||7.5.B==\'1u\'){7.5.1e=7.5.p.x+g;8.a.m.U(0).E.I=7.5.1q+\'M\'}9(!7.5.B||7.5.B==\'1A\'){7.5.1f=7.5.p.y+j;8.a.m.U(0).E.H=7.5.1J+\'M\'}9(8.G&&8.G.1Z>0){8.G.30(7,K)}n d},2L:u(o){9(!8.a.m){8(\'2j\',19).1I(\'<2k 34="2l"></2k>\');8.a.m=8(\'#2l\');1x=8.a.m.U(0);X=1x.E;X.1r=\'2n\';X.R=\'1m\';X.2p=\'2q\';X.38=\'1m\';X.3a=\'3c\';9(1C.1D){1x.2E=u(){n d};1x.2F=u(){n d}}L{X.3d=\'1m\';X.3e=\'1m\'}}9(!o){o={}}n c.2A(u(){9(c.22||!8.D)n;9(1C.1D){c.2E=u(){n d};c.2F=u(){n d}}25 1P=o.2N?8(c).3l(o.2N):8(c);c.5={28:o.28?F:d,16:o.16?F:d,1K:o.1K?o.1K:d,10:o.10?o.10:d,1b:o.1b?o.1b:d,11:o.11?q(o.11)||0:d,N:o.N?2W(o.N):d,P:q(o.P)||W,1M:o.1M?o.1M:d,Q:{},A:{},17:o.17&&o.17.J==1h?o.17:d,13:o.13&&o.13.J==1h?o.13:d,Y:o.Y&&o.Y.J==1h?o.Y:d,B:/1A|1u/.31(o.B)?o.B:d,1t:o.1t?q(o.1t)||0:0,v:o.v?o.v:d,1V:o.1V?F:d};9(o.Q&&o.Q.J==1h)c.5.Q.1Y=o.Q;9(o.k&&((o.k.J==2t&&(o.k==\'1s\'||o.k==\'19\'))||(o.k.J==2B&&o.k.2S==4))){c.5.k=o.k}9(o.24){c.5.24=o.24}9(o.T){9(3k o.T==\'3m\'){c.5.12=q(o.T)||1;c.5.1d=q(o.T)||1}L 9(o.T.2S==2){c.5.12=q(o.T[0])||1;c.5.1d=q(o.T[1])||1}}9(o.15&&o.15.J==1h){c.5.15=o.15}c.22=F;1P.U(0).1c=c;1P.1R(\'2o\',8.a.2r)})}};8.3g.1G({2X:8.a.2d,39:8.a.2L});',62,211,'|||||dragCfg|elm|dragged|jQuery|if|iDrag||this|false||oC|dx|||dy|containment||helper|return||oR|parseInt||cont||function|cursorAt||||css|pointer|axis|dhs|iUtil|style|true|iDrop|top|left|constructor|clonedEl|else|px|opacity|Math|fx|onDrag|display|currentPointer|grid|get|hb|null|els|onChange|newCoords|si|zIndex|gx|onStop|0px|onSlide|ghosting|onStart|wb|document|dh|insideParent|dragElem|gy|nRx|nRy|contBorders|Function|parentNode|oP|parentBorders|browser|none|apply|diffX|diffY|nx|position|parent|snapDistance|horizontally|prot|getSize|el|dragstop|dEs|vertically|hidehelper|window|ActiveXObject|iSort|oD|extend|init|append|ny|so|iSlider|hpc|sliderSize|sliderPos|dhe|right|bind|msie|width|height|autoSize|getBorder|oldBorder|user|count|clnt|unbind|isDraggable|parentPos|fractions|var|dragmove|bottom|revert|dragstart|getPosition|marginTop|marginBottom|destroy|initialPosition|relative|block|marginRight|marginLeft|body|div|dragHelper|getContainment|absolute|mousedown|cursor|move|draginit|empty|String|filter|alpha|100|mousemove|mouseup|custom|each|Array|opera|overzone|onselectstart|ondragstart|snapToGrid|abs|fitToContainer|min|max|build|new|handle|auto|getPointer|pow|distance|length|for|in|Object|parseFloat|DraggableDestroy|dragmoveBy|cloneNode|checkhover|test|offsetLeft|offsetTop|id|modifyContainer|highlight|getClient|listStyle|Draggable|overflow|hide|hidden|mozUserSelect|userSelect|animate|fn|checkdrop|check|lastSi|typeof|find|number|sqrt|fromHandler'.split('|'),0,{})) 
```

The code of color picker page is:

```
 <?php
$myData = mysql_query('SELECT * FROM ui_table order by settings_id');
?>
<table id="rounded-corner" style="width: 100%" summary="2007 Major IT Companies' Profit">
    <thead>
        <tr>

            <th scope="col" class="rounded" align=center>name</th>
            <th scope="col" class="rounded" align=center>value</th>
            <th scope="col" class="rounded" align=center>update</th>

        </tr>
    </thead>
        <tfoot>
        <tr>
            <td colspan="6" class="rounded-foot-left"><em>table</em></td>
            <td class="rounded-foot-right">&nbsp;</td>

        </tr>
    </tfoot>
    <?php while($row = mysql_fetch_array($myData, MYSQL_ASSOC)){?>
    <tbody>

<?php echo '<tr id="row_'.$row['settings_id'].'">';
echo '<td align=center><input type="text" name="settings_key" id="settings_key_'.$row['settings_id'].'" style="text-align: center" value="' . $row['settings_key'] . '" size=30/></td>';
echo '<td align=center><input type="text" readonly=readonly id="settings_value_'.$row['settings_id'].'" style="text-align: center" value="' . $row['settings_value'] . '" size=30/>';
if (($row['settings_key'] == 'background-color') || ($row['settings_key'] == 'color')) {
echo '<a href="javascript:void(0);" rel="colorpicker&objcode=settings_value_'.$row['settings_id'].'&objshow=myshowcolor_'.$row['settings_id'].'&showrgb=1" style="text-decoration:none;" ><div id="myshowcolor_'.$row['settings_id'].'" style="width:15px;height:15px;border:1px solid black;">&nbsp;</div></a></div></td>';}

echo '<td align=center><a href="#" onclick="ajaxFunction_ui('.$row['settings_id'].', this.id)" id="update"><img src="includes/images/user_edit.png" alt="" title="" border="0" /></a></td>';
echo "</tr>";
    }

echo "<tr>";
echo '<td align="center"></td>';
echo '<td align="center"><input type="text" name="settings_key_new" id="settings_key_new" style="text-align: center" size="30" value="" /></td>';
echo '<td align="center"><input type="text" name="settings_value_new" id="settings_value_new" style="text-align: center" value="" size="30"/></td>';
echo '<td><input type="button" id="addnew" name="addnew" onclick="addNewRecord_ui()" value="add!!" /></td>';
echo '<td></td>';
echo '</tr>';
    ?>  

</tbody>
<script language="Javascript" type="text/javascript">

//init colorpicker
        $(document).ready(
                function()
                {
                    $.ColorPicker.init();
                }
            );

        </script>

</table> 
```

The head is at page of index.php. if head is in the same page with the above code, all works fine.

Head code in index.php is this:

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>admin panel</title>
<link rel="stylesheet" type="text/css" href="includes/admin_style.css" />
<link rel="stylesheet" type="text/css" media="all" href="includes/niceforms-default.css" />

<script language="javascript" type="text/javascript" src="includes/niceforms.js"></script>

<script type="text/javascript" src="includes/jquery.min.js"></script>

<script src="js_color_picker/jquery/jquery.js" type="text/javascript"></script>
    <script src="js_color_picker/jquery/ifx.js" type="text/javascript"></script>
    <script src="js_color_picker/jquery/idrop.js" type="text/javascript"></script>
    <script src="js_color_picker/jquery/idrag.js" type="text/javascript"></script>
    <script src="js_color_picker/jquery/iutil.js" type="text/javascript"></script>
    <script src="js_color_picker/jquery/islider.js" type="text/javascript"></script>

    <script src="js_color_picker/jquery/color_picker/color_picker.js" type="text/javascript"></script>

    <link href="js_color_picker/jquery/color_picker/color_picker.css" rel="stylesheet" type="text/css">
<script src="jquery.jclock-1.2.0.js.txt" type="text/javascript"></script>
<script type="text/javascript" src="includes/jconfirmaction.jquery.js"></script> 
```

# windows - Bat file - Net use from remote desktop not work well in some cases

> ID：13875950
> 
> 赞同：0
> 
> 时间：2012-12-14T09:34:18.643
> 
> 标签：windows, batch-file, remote-desktop, net-use

I try to run `.bat` file from remote desktop.

I do it by run the next command:

```
net use m: \\the-ip-of-the-remote-computer mypassword /myuser
// Execution works well 
```

then, I try to xcopy from the remote desktop to my computer. So I write this:

```
net use t: \\the-ip-of-the-remote-desktop mypassword /myuser
xcopy \\the-ip-of-the-remote-computer my-libary 
```

But in some cases, this command is not execute well.

I also try this, and it doesn't work:

```
net use m: \\the-ip-of-the-remote-desktop mypassword /myuser
xcopy net use t: \\the-ip-of-the-remote-computer mypassword /myuser my-libary 
```

and It also doesn't work.

What can be the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:15:12.690

尝试映射共享，然后在使用之前更改为该驱动器`xcopy`

```
net use M: \\the-ip-of-the-remote-computer mypassword /myuser
pushd M:\
xcopy folder\filetocopy C:\yourcdrivefolder 
```

# php - 如何在自定义处理程序中反序列化会话数据

> ID：13875961
> 
> 赞同：5
> 
> 时间：2012-12-14T09:35:07.630
> 
> 标签：php, session

我曾经`sessionHandlerInterface`将会话保存在数据库中。一切正常。但我想从数据库中获取所有序列化数据，例如

```
SELECT data FROM session; 
```

并希望他们在我输出这些数据时解码数据。我试过使用`session_decode()`which 来操纵`$_SESSION`数组本身，这会造成麻烦。我只想获取序列化数据并返回解码数据。

这是保存在`data`列中的数据库中的示例会话数据

> fb_422782977793963_code | S：216： “AQAVKa4Q8sOuioW75V9Ls-cDUEizgJDX5ZkRVLArDlroFvvhasdwKvbyzKEwiMVrN7nc5ghMaw0W67jQu5kt_sc_Edm9sABzB5PakdkUpXr52AViTOltPfPBQHM9T-JoGOQ4gasdbssC8Xt93NKFvdV7XRZ7ZYGZqIsu5SFpfFBHK_hNGDdRVbnbe_xUZVP9WI4h0jDy”; fb_422782977793963_access_token | S：111： “AAAGAhasdaAKL7hAvXRv6FHUj1Tk24r7j4NqDwWWUzmXDZA2Igsb1pHjuP4jbBRNKfeYzutm0MFmgxuKPg1n0NEbvZAXM3bwoNZBiZCgZDZD”; fb_422782977793963_user_id | S：15： “100004835469598”;图像| S：61：的“http：//m-static.ak .fbcdn.net/rsrc.php/v2/yo/r/sdIqmHJn-SK.gif";

它适用于正常的会话处理，它按应有的方式读取和写入会话到数据库。

我想获取活动会话的所有数据。如果我使用从会话中选择数据。它返回上面的会话数据（编码）我想得到它的解码数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:28:17.820

PHP[`serialize`](http://php.net/serialize)和[`unserialize`](http://php.net/unserialize)函数不能用于序列化和反序列化会话数据。即使（默认情况下 - 并且仅默认情况下）序列化可能看起来相似，这两个*只*关心单个变量内容的函数也有重要区别：

> 这些 [sessions] 是带有变量名的序列化值列表。

（*来自：* [序列化自述文件](https://github.com/ktomk/Serialized/blob/master/README#L26)）

因此，您需要创建自己的`session_unserialize`函数，该函数能够解码[`session_decode`](http://php.net/session_decode)从数据库返回的字符串（例如 via ）。注意这需要那里的所有内容，例如，如果会话包含序列化对象，则需要加载类定义。

一个示例`session_unserialize`函数可能看起来像（*采用自：* [与会话相关的答案](https://stackoverflow.com/a/12930902/367456)）：

```
function unserialize_session($data) {
    $hasBuffer = isset($_SESSION);
    $hasBuffer && $buffer = $_SESSION;
    session_decode($data);
    $session = $_SESSION;
    $hasBuffer ? $_SESSION = $buffer : unset($_SESSION);
    return $session;
} 
```

# c# - Atmel 处理器或 AT91Boot dll 是否会导致我的 USB 端口崩溃

> ID：13875963
> 
> 赞同：0
> 
> 时间：2012-12-14T09:35:17.463
> 
> 标签：c#, atmel

我正在调整一些用于通过 USB 将 .bin 文件上传到我们的产品之一的测试软件。该产品具有 Atmel AT91SAM7X256 处理器。该软件全部用 c# 编写，在 windows XP 机器上运行。

以前的程序员（不再与公司合作）使用名为 AT91BootDLL.dll 的 dll 文件来扫描 USB 端口以查找 ateml 处理器并获取其句柄。然后它可以打开 USB 连接并执行各种操作，例如读取、写入等。这一切正常，但时不时地它无法再找到任何连接的东西。发生这种情况时，我无法再通过 USB 将任何东西连接到 PC，因为 Windows 无法检测到它。然后我必须关闭 PC，并且在执行此操作时，Windows 决定冻结。

我需要深入了解它，因为我对这个 dll 或嵌入式编程都没有经验，所以我只有这些结论。处理器正在做某事导致 USB 端口锁定，或者这个 dll 文件正在做这件事。

我可以在程序中做些什么来帮助防止这种情况发生吗？

对于上传然后从这个处理器读回，有没有人知道另一种方法？

下面是一些用于扫描和打开的代码。

```
private static AT91BootDLL at91 = new AT91BootDLL();

private static unsafe int GetHandle()
{
  // Create a dummy list for the dummy SAM-BA interface ;-)
  byte* dummyName = stackalloc byte[100];
  byte** dummyList = stackalloc byte*[100]; // { n1, n2, n3, n4, n5 };
  for (int i = 0; i < 100; ++i)
  {
    dummyList[i] = dummyName;
  }

  // This function needs to be called before a USB connection can be opened.
  at91.AT91Boot_Scan(ref *(byte*)dummyList);

  // Now that the scan function has been called, we may open an USB connection.
  int handle;
  byte[] name = Encoding.ASCII.GetBytes("\\usb\\ARM0\x00");
  at91.AT91Boot_Open(ref name[0], out handle);

  return handle;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:12:11.933

您可以在此处下载最新的 SAM-BA 套件，因此请确保您拥有所有内容的最新版本：

[http://www.atmel.com/tools/ATMELSAM-BAIN-SYSTEMPROGRAMMER.aspx](http://www.atmel.com/tools/ATMELSAM-BAIN-SYSTEMPROGRAMMER.aspx)

但是看看上面的代码，它在很大程度上依赖于 Atmel 提供的例程。调用逻辑和/或固件中可能存在其他错误，但除非您发布完整的代码，否则我认为没有人能够帮助您。如果您不想发布它，可以尝试 Atmel 工程，如果您是大客户，那么支持是可以的。

就我个人而言，我一直使用 CDC 接口为 AT91SAM 系列编写自己的引导加载程序，以将新映像从主应用程序写入外部 FLASH，然后设置一个标志并重新启动以加载它以摆脱外部依赖项，但那是相当大的事业。

# php - php汇总以逗号分隔的变量，以点结尾

> ID：13875967
> 
> 赞同：0
> 
> 时间：2012-12-14T09:35:30.480
> 
> 标签：php, comma, summary

我一直在努力思考这个问题，但我无法得到自己的答案......

例如，当我总结所有收到电子邮件的人时，我想用逗号分隔他们，但以点结尾！

例如这段代码：

```
$emailnotificationmessage = "<p id='notification'>An e-mail notification has been sent to: ";
while( $record=mysql_fetch_array($checkwhotosendresult) )
{
    $mailto=$record['email'];
    $mail_ontv = $mailto;

    if (mail($mail_ontv, $onderwerp, $inhoud_mail, $headers))
    {             
        $emailnotificationmessage .= "$mail_ontv, ";
    }
    else
    {
        $emailnotificationmessage = "<p id='notification'>Error. E-mail could not be sent to the receipent.";
    }
}
$emailnotificationmessage .= "</p>"; 
```

它返回：

`An e-mail notification has been sent to: mail@mail.com, mail2@mail.com, mail3@mail.com,`

那么我怎样才能以点结尾，以保持语言正确......？

**编辑**

我不想为此发布新问题，只是想知道如何`and`在最后`2`一封电子邮件之间放置一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:45:03.457

我会以不同的方式解决这个问题（很多方法可以给猫剥皮）

```
// create new arrays
$sentemails = $failedemails = array();

while ($record = mysql_fetch_array($checkwhotosendresult))
{
    $mailto = $record['email'];
    $mail_ontv = $mailto;

    if (mail($mail_ontv, $onderwerp, $inhoud_mail, $headers))
    {
        $sentemails[] = $mailto;
    }
    else
    {
        $failedemails[] = $mailto;
    }
}

$emailnotificationmessage = '';

if ( ! empty($sentemails))
{
    $emailnotificationmessage .= '<p>An email notification has been sent to: ' . implode(', ', $sentemails) . '.</p>';
}
if ( ! empty($failedemails))
{
    $emailnotificationmessage .= '<p>Emails could not be sent to: ' . implode(', ', $failedemails) . '.</p>';
} 
```

这将为您提供已发送和失败的电子邮件列表，并且不会用失败的消息覆盖已发送的邮件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:44:06.123

用这个

```
<?php
$emailnotificationmessage="An e-mail notification has been sent to: mail@mail.com, mail2@mail.com, mail3@mail.com,";
$newsentance = substr($emailnotificationmessage, 0,-1).".";    
 echo $newsentance ;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:39:14.500

你可以通过`substr`

```
$emailnotificationmessage = substr($emailnotificationmessage,0,-2) . "."; 
```

# javascript - 在字符串中搜索并用 rgb 值替换十六进制颜色代码

> ID：13875974
> 
> 赞同：1
> 
> 时间：2012-12-14T09:35:50.517
> 
> 标签：javascript, jquery, regex, color-codes

我有一个元素的 HTML 源代码。我想搜索其中的所有十六进制颜色代码并将它们替换为它们的 RGB 等价物。我怎样才能使用 JavaScript 做到这一点？

例如：

```
This is <span style="color:#FF0000">red</span> and <span style="color:#3C9310">green</span> color. 
```

应该替换为

```
This is <span style="color: rgb(255, 0, 0)">red</span> and <span style="color: rgb(60, 147, 16)">green</span> color. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:44:33.037

您可以使用 jquery `css('color')`。

**[现场演示](http://jsfiddle.net/n33BK/)**

```
$('#spcolor').css('color') 
```

对于迭代许多元素具有相同的类。

**[现场演示](http://jsfiddle.net/n33BK/1/)**

```
$('.someclass').each(function(){
   alert($(this).css('color'))    
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T09:51:05.453

如果您想将字符串中的所有十六进制颜色转换为十进制 RGB 值`str`，以下方法可以解决问题。请注意，这仅考虑 8 位/通道十六进制值（例如，`#FF0000`），而不是 4 位变体（例如，`#F00`）；但是，这很容易增强。

```
var rgbHex = /#([0-9A-F][0-9A-F])([0-9A-F][0-9A-F])([0-9A-F][0-9A-F])/gi
str.replace(rgbHex, function (m, r, g, b) {
  return 'rgb(' + parseInt(r,16) + ','
                + parseInt(g,16) + ','
                + parseInt(b,16) + ')';
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T09:45:10.783

使用[此处显示的函数](https://stackoverflow.com/questions/4262417/jquery-hex-to-rgb-calculation-different-between-browsers/4262484#4262484)，您可以将页面上已设置为 RGB 的所有元素的颜色属性从十六进制更改：

```
var all = document.getElementsByTagName("*");
var elemCount = all.length;

for (var i=0; i < elemCount; i++) {
    if(all[i].style.color && all[i].style.color.indexOf('#') > -1){ //Check if the color property is set, and if it's hex.
        all[i].style.color = hex2rgb(all[i].style.color)
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T09:44:59.200

您可以执行以下操作：

```
rgbval = "rgb("
"#ff0000".replace(/[a-z0-9]{2}/g, function(val) {rgbval  += (parseInt(val, 16)) + ","})
rgbval  += ")" 
```

将在末尾添加一个额外的逗号，例如 rgb(255,0,0,) 但我认为您可以将其删除。

# ios - 代替 字典中的字符串

> ID：13875975
> 
> 赞同：0
> 
> 时间：2012-12-14T09:35:54.070
> 
> 标签：ios, nsdictionary

> **可能重复：**
> [遍历 NSDictionary 以获取空值](https://stackoverflow.com/questions/8477789/iterating-through-nsdictionary-for-null-value)

我有一个类似 json 的[图像](http://mocku.ps/wz69f)，**我想将所有值字符串替换为空字符串**。我看到[它与这个问题相似，](https://stackoverflow.com/questions/12213822/replace-occurance-of-nsnull-in-nested-nsdictionary)但所有值都没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:44:31.763

你`"<null>"`的不是空的！这是一个 NSString。如果你想在你的 JSON 中为 null，你应该有

```
"someKey": null 
```

如果你想替换它，你应该使用[NSNull 类](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)

**编辑：**

基于评论中的屏幕截图：如果您使用此类别从 SBJSON 到您的字典，这是非常错误的。您假设您从 JSON 收到的所有内容`NSString`都是不正确的。如果您不使用它并将其用于每个子词典，则可以。

改变

```
if(object == nul) 
```

至

```
if([object isKindOfClass:[NSNull class]]) 
```

或在您的 JSON 中（这真的是错误的！）

```
if([object isKindOfClass:[NSString class]])
   if([(NSString*)object isEqualToString:@"<null>"]) 
```

请使用代码编辑您的原始帖子。不要在评论中粘贴屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:48:41.490

您可以使用`enumerateKeysAndObjectsUsingBlock:`. 这是您正在尝试的解决方案，请查看此[链接](https://stackoverflow.com/questions/8477789/iterating-through-nsdictionary-for-null-value#answer-8478820)。

# python - Python 子进程 Popen：为什么“ls *.txt”不起作用？

> ID：13875978
> 
> 赞同：4
> 
> 时间：2012-12-14T09:35:57.783
> 
> 标签：python, subprocess, ls

我正在看[这个](https://stackoverflow.com/questions/4760215/running-shell-command-from-python-and-capturing-the-output)问题。

就我而言，我想做一个：

```
import subprocess
p = subprocess.Popen(['ls', 'folder/*.txt'], stdout=subprocess.PIPE, 
                                 stderr=subprocess.PIPE)

out, err = p.communicate() 
```

现在我可以在命令行上检查执行“ls 文件夹/*.txt”是否有效，因为该文件夹有许多 .txt 文件。

但在 Python (2.6) 中，我得到：

*ls: 无法访问 * : 没有这样的文件或目录*

我尝试过做： `r'folder/\*.txt'` `r"folder/\*.txt"` `r'folder/\\*.txt'` 和其他变体，但似乎`Popen`根本不喜欢这个`*`角色。

有没有其他的逃生方法`*`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T09:38:18.993

`*.txt`由您的外壳`file1.txt file2.txt ...`自动扩展为。如果你引用`*.txt`，它不起作用：

```
[~] ls "*.py"                                                                  
ls: cannot access *.py: No such file or directory
[~] ls *.py                                                                    
file1.py  file2.py file3.py 
```

如果您想获取与您的模式匹配的文件，请使用`glob`：

```
>>> import glob
>>> glob.glob('/etc/r*.conf')
['/etc/request-key.conf', '/etc/resolv.conf', '/etc/rc.conf'] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T09:45:37.120

您可以将参数 shell 传递给 True。它将允许通配符。

```
import subprocess
p = subprocess.Popen('ls folder/*.txt',
                     shell=True,
                     stdout=subprocess.PIPE, 
                     stderr=subprocess.PIPE)
out, err = p.communicate() 
```

# asp.net-mvc - MVC 将 Json 对象集合绑定到控制器操作

> ID：13875982
> 
> 赞同：2
> 
> 时间：2012-12-14T09:36:05.783
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

有没有办法将对象集合发送到 MVC 操作？

看法：

```
 $(".iconDocumentText").click(function (e) {
            e.preventDefault();
            var $inputs = $("form.form :input:not('.submit')");
            var values = {}; // get search form values
            $inputs.each(function () {
                if ($(this).val()) {
                    values[this.name] = $(this).val();
                }
            });
            console.log(JSON.stringify(values));
            $.ajax({
                url: "@Url.Action("Export","Log")",
                data: JSON.stringify(values),
                contentType: 'application/json',
                type: 'GET',
                success: function (data) {
.........
                }
            });
        }); 
```

我试过这个没有任何运气：

```
 public ActionResult Export(Dictionary<string, string> values)
    {
.... 
```

这是发送到控制器操作的内容：

```
{"f_device":"4","f_package":"AGI-VS-GAME-M52-1.5.3.2.67"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:41:38.037

您还必须指出它是数据类型`json`并直接传递它们：

**脚本 ：**

```
$.ajax({
    url: "@Url.Action("Export","Log")",
    data: values,
    contentType: 'application/json',
    type: 'GET',
    dataType: 'json'
}); 
```

**控制器 ：**

```
public ActionResult Test(int f_device, string f_package)
{ 
```

* * *

**编辑 ：**

但是如果你想检索一个字典，你可以将你的数据封装在一个对象中：

**脚本 ：**

```
$.ajax({
    url: "@Url.Action("Export","Log")",
    data: { values : values },
    contentType: 'application/json',
    type: 'GET',
    dataType: 'json'
}); 
```

**控制器 ：**

```
public ActionResult Test(Dictionary<string, string> values)
{ 
```

# c# - 导出到 excel 时，货币代码带有 Unicode

> ID：13875988
> 
> 赞同：0
> 
> 时间：2012-12-14T09:36:36.170
> 
> 标签：c#, asp.net, excel, grid

我正在导出到 excel gridview。我在英镑的网格价格中有符号，当我导出到 excel 时，符号带有 unicode，如价格 (Â£)。

我怎样才能摆脱那个符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:53:16.193

```
Response.Charset = "";
Response.ContentEncoding = System.Text.Encoding.Default; 
```

我已经从堆栈溢出本身中获取了它

[如何将英镑符号从 C# Web App 正确导出到 Excel？（产生的是£而不是£）](https://stackoverflow.com/questions/772016/how-to-export-pound-symbol-from-a-c-sharp-web-app-to-excel-correctly-is-pro)

谢谢

# python - 将url中的图像与python文件系统中的图像进行比较

> ID：13875989
> 
> 赞同：5
> 
> 时间：2012-12-14T09:36:38.943
> 
> 标签：python, image-processing, diff, python-imaging-library, image-comparison

有没有一种快速简便的方法来进行这种比较？

我发现很少有来自 stackoverflow 的图像比较问题，但没有一个实际上证明了这个问题的答案。

我的文件系统中有图像文件和一个从 url 获取图像的脚本。我想检查 url 中的图像是否已经与磁盘上的图像相同。通常我会将磁盘中的图像和 url 加载到 PIL 对象并使用我找到的以下函数：

```
def equal(im1, im2):
    return ImageChops.difference(im1, im2).getbbox() is None 
```

但是，如果您使用 PIL 将图像保存到磁盘，这将不起作用，因为即使您将质量设置为 100 ，它也会被压缩`im1.save(outfile,quality=100)`。

我的代码目前如下： http: [//pastebin.com/295kDMsp](http://pastebin.com/295kDMsp) 但图像总是最终重新保存。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T19:18:19.103

问题的标题表明您有两个确切的图像要比较，这很简单。现在，如果您有相似的图像要比较，那么这就解释了为什么您没有找到完全令人满意的答案：没有适用于每个问题的指标给出预期结果（请注意，预期结果因应用程序而异）。问题之一是很难——在没有共同协议的意义上——比较具有多个波段的图像，比如彩色图像。为了解决这个问题，我将考虑在每个波段中应用给定的指标，并且该指标的结果将是最低的结果值。这假设度量标准具有良好的范围，例如 [0, 1]，并且此范围内的最大值意味着图像是相同的（根据给定的度量标准）。反过来，

所以，我在这里要做的就是给你两个指标。其中一个是[SSIM](https://ece.uwaterloo.ca/~z70wang/research/ssim/)，另一个我称之为 NRMSE（均方误差根的归一化）。我选择介绍第二种，因为它是一种非常简单的方法，它可能足以解决您的问题。

让我们从示例开始。图像按以下顺序排列：f = PNG 格式的原始图像，g1 = 质量为 50% 的 JPEG `f`（使用 制作`convert f -quality 50 g`），g2 = 质量为 1% 的 JPEG `f`，h =“变亮”g2。

![在此处输入图像描述](../Images/3a68dcd8b32a3e4b67a16e8e427fedcb.png) ![在此处输入图像描述](../Images/6640995eb45605b7d8243ff6b26bd941.png) ![在此处输入图像描述](../Images/8cf5d6343359349444e500f58bfdc828.png) ![在此处输入图像描述](../Images/ba3c6c1b4f76062a407a456ecce203bb.png)

结果（四舍五入）：

*   NRMSE(f, g1) = 0.96
*   NRMSE(f, g2) = 0.88
*   NRMSE(f, h) = 0.63
*   SSIM(f, g1) = 0.98
*   SSIM(f, g2) = 0.81
*   SSIM(f, h) = 0.55

在某种程度上，这两个指标都很好地处理了修改，但`SSIM`通过在图像实际上在视觉上不同时报告较低的相似性以及通过在图像在视觉上非常相似时报告更高的值来显示更明智。下一个示例考虑彩色图像（f = 原始图像，g = 5% 质量的 JPEG）。

![在此处输入图像描述](../Images/6768975096f85773985e28785e0c738b.png) ![在此处输入图像描述](../Images/4970ace932731d5ef15b770ab92c28bb.png)

*   NRMSE(f, g) = 0.92
*   SSIM(f, g) = 0.61

因此，由您决定您喜欢的指标是什么以及它的阈值。

现在，指标。我命名为 NRMSE 的只是 1 - [RMSE / ( `maxval`- `minval`)]。哪里`maxval`是来自被比较的两个图像的最大强度，并且对于 分别相同`minval`。RMSE 由 MSE 的平方根给出：sqrt[(sum(A - B) ** 2) / |A|]，其中 |A| 表示 A 中的元素数。通过这样做，RMSE 给出的最大值为`maxval`。如果您想进一步了解图像中 MSE 的含义，请参见例如[https://ece.uwaterloo.ca/~z70wang/publications/SPM09.pdf](https://ece.uwaterloo.ca/~z70wang/publications/SPM09.pdf)。度量标准 SSIM（结构相似性）涉及更多，您可以在前面包含的链接中找到详细信息。要轻松应用指标，请考虑以下代码：

```
import numpy
from scipy.signal import fftconvolve

def ssim(im1, im2, window, k=(0.01, 0.03), l=255):
    """See https://ece.uwaterloo.ca/~z70wang/research/ssim/"""
    # Check if the window is smaller than the images.
    for a, b in zip(window.shape, im1.shape):
        if a > b:
            return None, None
    # Values in k must be positive according to the base implementation.
    for ki in k:
        if ki < 0:
            return None, None

    c1 = (k[0] * l) ** 2
    c2 = (k[1] * l) ** 2
    window = window/numpy.sum(window)

    mu1 = fftconvolve(im1, window, mode='valid')
    mu2 = fftconvolve(im2, window, mode='valid')
    mu1_sq = mu1 * mu1
    mu2_sq = mu2 * mu2
    mu1_mu2 = mu1 * mu2
    sigma1_sq = fftconvolve(im1 * im1, window, mode='valid') - mu1_sq
    sigma2_sq = fftconvolve(im2 * im2, window, mode='valid') - mu2_sq
    sigma12 = fftconvolve(im1 * im2, window, mode='valid') - mu1_mu2

    if c1 > 0 and c2 > 0:
        num = (2 * mu1_mu2 + c1) * (2 * sigma12 + c2)
        den = (mu1_sq + mu2_sq + c1) * (sigma1_sq + sigma2_sq + c2)
        ssim_map = num / den
    else:
        num1 = 2 * mu1_mu2 + c1
        num2 = 2 * sigma12 + c2
        den1 = mu1_sq + mu2_sq + c1
        den2 = sigma1_sq + sigma2_sq + c2
        ssim_map = numpy.ones(numpy.shape(mu1))
        index = (den1 * den2) > 0
        ssim_map[index] = (num1[index] * num2[index]) / (den1[index] * den2[index])
        index = (den1 != 0) & (den2 == 0)
        ssim_map[index] = num1[index] / den1[index]

    mssim = ssim_map.mean()
    return mssim, ssim_map

def nrmse(im1, im2):
    a, b = im1.shape
    rmse = numpy.sqrt(numpy.sum((im2 - im1) ** 2) / float(a * b))
    max_val = max(numpy.max(im1), numpy.max(im2))
    min_val = min(numpy.min(im1), numpy.min(im2))
    return 1 - (rmse / (max_val - min_val))

if __name__ == "__main__":
    import sys
    from scipy.signal import gaussian
    from PIL import Image

    img1 = Image.open(sys.argv[1])
    img2 = Image.open(sys.argv[2])

    if img1.size != img2.size:
        print "Error: images size differ"
        raise SystemExit

    # Create a 2d gaussian for the window parameter
    win = numpy.array([gaussian(11, 1.5)])
    win2d = win * (win.T)

    num_metrics = 2
    sim_index = [2 for _ in xrange(num_metrics)]
    for band1, band2 in zip(img1.split(), img2.split()):
        b1 = numpy.asarray(band1, dtype=numpy.double)
        b2 = numpy.asarray(band2, dtype=numpy.double)
        # SSIM
        res, smap = ssim(b1, b2, win2d)

        m = [res, nrmse(b1, b2)]
        for i in xrange(num_metrics):
            sim_index[i] = min(m[i], sim_index[i])

    print "Result:", sim_index 
```

请注意，当给定大于图像时，`ssim`拒绝比较图像。通常非常小，默认为 11x11，因此如果您的图像小于该值，则没有太多“结构”（来自度量的名称）可比较，您应该使用其他东西（如其他功能`window`）。可能有更好的方法来实现，因为在 Matlab 中它运行得更快。`window``nrmse``ssim`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:44:32.753

您可以进行自己的比较 - 使用平方差。然后，您将设置一个阈值，例如 95%，如果它们相似，那么您不必下载它。它消除了压缩问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:55:49.863

根据[Bartlomiej Lewandowski](https://stackoverflow.com/a/13876106/298171)的建议，我建议比较直方图熵，这很容易计算并且相对快速：

```
def histogram_entropy(im):
    """ Calculate the entropy of an images' histogram.
    Used for "smart cropping" in easy-thumbnails;
    see also https://raw.github.com/SmileyChris/easy-thumbnails/master/easy_thumbnails/utils.py
    """
    if not isinstance(im, Image.Image):
        return 0  # Fall back to a constant entropy.

    histogram = im.histogram()
    hist_ceil = float(sum(histogram))
    histonorm = [histocol / hist_ceil for histocol in histogram] 
```

...这个功能是我在我构建的[自动方形裁剪过滤器](https://github.com/fish2000/django-instakit/blob/master/django_instakit/processors/squarecrop.py)中使用的功能- 但您可以使用熵值来比较任何两个图像（即使是不同大小的图像）。

我还有其他应用这种想法的示例，如果您希望我以您的方式发送特定示例，请在评论中告诉我。

# bash - 用主机名变量和双引号替换 bashrc 上的 Sed

> ID：13875995
> 
> 赞同：1
> 
> 时间：2012-12-14T09:36:55.817
> 
> 标签：bash, sed, escaping

我厌倦了在 /etc/bashrc 上找到 sed 替换的解决方案

我喜欢换线

```
PS1="\u@\h NEW [\w]# " 
```

为了这

```
PS1="\u@\h.hostname.com NEW [\w]# " 
```

在哪里 hostname.com

```
HOST=$(hostname) 
```

尝试几种 sustituions，逃避 \ 但什么都没有。

另请参阅另一个问题，[如何在嵌入 bash 脚本的 sed 脚本中转义反斜杠，](https://stackoverflow.com/questions/8713201/how-do-i-escape-backslashes-in-a-sed-script-embedded-in-a-bash-script)但我迷路了。

通常我使用 "" 来使用 ${VARIABLE} 但不起作用，如果使用 \ 进行转义也是如此

```
sed -i "s/^PS1.*$/PS1=\"\\u@\\h.${HOST}\ \[\\w\]#\ \"/g" /etc/bashrc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:43:02.523

如果`\H`您想在提示中显示完整的主机名，请使用。那么您就不必担心这种`sed`替换。

将您更改`PS1`为：

```
PS1="\u@\H NEW [\w]# " 
```

如果你想使用`sed`，下面的命令应该可以工作：

```
sed 's/\(^.*\h\)\(.*$\)/\1.'"$HOST"'\2/g' /etc/bashrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:31:12.830

经过多次测试，我得到了解决方案。

```
HOST=$(hostname); sed -i "s/^PS1.*$/PS1=\"\\\u@\\\h.${HOST}\ \[\\\w\]#\ \"/g" /etc/bashrc 
```

阅读用户 dogbane y 的评论后更改为

```
sed -i "s/^PS1.*$/PS1=\"\\\u@\\\H\ \[\\\w\]#\ \"/g" /etc/bashrc 
```

谢谢...

# ios - 如何获取 iOS 设备的相机名称？

> ID：13875999
> 
> 赞同：1
> 
> 时间：2012-12-14T09:37:09.507
> 
> 标签：ios, objective-c, cocoa-touch, playback, avcapturedevice

IOS的采集设备和播放设备有没有名字或者路径？通常我们可以在windows中获取连接相机的路径及其名称，我想在Mac中我们也可以做到这一点。任何人都知道如何在 IOS 上获取捕获和播放设备的名称和路径？

```
 // RETURNS HOW MANY AUDIO CAPTURE DEVICES ARE THERE... 
  for eg: [[AVCaptureDevice devicesWithMediaType:AVMediaTypeAudio] count]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:21:35.290

```
NSArray *devices = [AVCaptureDevice devices];
AVCaptureDevice *frontCamera;
AVCaptureDevice *backCamera;

for (AVCaptureDevice *device in devices) {

    NSLog(@"Device name: %@", [device localizedName]);

    if ([device hasMediaType:AVMediaTypeVideo]) {

        if ([device position] == AVCaptureDevicePositionBack) {
            NSLog(@"Device position : back");
            backCamera = device;
        }
        else {
            NSLog(@"Device position : front");
            frontCamera = device;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:41:24.790

你得到设备名称以下方法

```
NSString *name =[[UIDevice currentDevice] name]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T20:03:59.607

唉，“设备”在 iOS 10.0 中已被弃用。请改用 AVCaptureDeviceDiscoverySession。