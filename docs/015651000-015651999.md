# StackOverflow 问答 15651000-15651999

# bash - 逐行提取文件中出现的字符

> ID：15651003
> 
> 赞同：1
> 
> 时间：2013-03-27T02:34:10.787
> 
> 标签：bash

我有一个双语词典的大文件，其行格式为：

```
abatement: disminucion; mitigacion; moderacion; rebaja; deduccion; supresion; anulacion 
```

我试图找出哪一行的翻译单词最多，所以我想找到出现次数最多的行`;`，然后回显英文单词。

我已经设法接近了一些东西，但它使用 sed 来修剪数据，这意味着我无法将英文单词匹配回该行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:43:05.317

```
awk -F'[:;]' '{if(NF>n){n=NF;w=$1}}END{print w}' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:40:34.707

作为`;`字段分隔符，带有 的`;`行将拥有最多的字段。

```
while IFS=';' read -a fields; do
    n=${#fields[@]}
    if (( n > max )); then
       max=$n
       english=${fields[0]%:}
    fi
done < file.txt
echo "$english" 
```

# php - mysql_fetch_array() 和 mysql_query() 问题

> ID：15651008
> 
> 赞同：0
> 
> 时间：2013-03-27T02:34:35.670
> 
> 标签：php, mysql, wordpress, buddypress

我在错误日志中不断收到此错误，但我不知道为什么。我到处寻找并用谷歌搜索，但我迷路了，我需要帮助：

```
[Wed Mar 27 02:14:56 2013] [error] PHP Warning:  mysql_query() expects parameter 2 to
 be resource, null given in /nas/wp/www/cluster-1434/XXXXXXXX/wp-content/themes/mytheme
/groups/single/home.php on line 23
[Wed Mar 27 02:14:56 2013] [error] PHP Warning:  mysql_fetch_array() expects 
 parameter  
1 to be resource, null given in /nas/wp/www/cluster-1434/XXXXXXXX/wp-content/themes
/mytheme/groups/single/home.php on line 24 
```

这是它引用的代码：

```
$getlatlong = mysql_query("SELECT * FROM zipcity WHERE zip='".$url[2]."'",$con);
$ll = mysql_fetch_array($getlatlong); 
```

如果您需要，这是完整的代码：

```
<?php
global $bp;
global $current_user;
$group_name = $bp->groups->current_group->name;
$group_id = $bp->groups->current_group->id;
$groupll = groups_get_groupmeta( $group_id, $meta_key = 'latlong');
$groupnamecount = strlen($group_name);
$groupcity = groups_get_groupmeta( $group_id, $meta_key = 'city');
$groupstate = groups_get_groupmeta( $group_id, $meta_key = 'state');
$mapaddress = $group_name.'+'.$groupcity.'+'.$groupstate;
if ($groupnamecount == '5')
{
$grouptype = "zip"; 
}
if ($grouptype == "zip") {

$url = explode('/',$_SERVER['REQUEST_URI']);
$zip = $url[2]; 
$getlatlong = mysql_query("SELECT * FROM zipcode WHERE zip='".$url[2]."'",$con);
$ll = mysql_fetch_array($getlatlong);
} else {
$groupcity = groups_get_groupmeta( $group_id, $meta_key = 'city');
$groupstate = groups_get_groupmeta( $group_id, $meta_key = 'state');
$mapaddress = $group_name.'+'.$groupcity.'+'.$groupstate;
} 
```

**更新**

问题是 $con 在代码的下方被声明了。一旦我解决了这个问题，它就完美地工作了。感谢所有回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:41:36.013

看起来您的`$con`变量要么从未定义，要么连接失败。如果您根本没有指定连接参数，PHP 将自动使用最后一个 MySQL 连接，如下所示：

```
$getlatlong = mysql_query("SELECT * FROM zipcode WHERE zip='". $url[2] ."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:38:31.443

您不需要将`$conn`in`mysql_query()`函数放入它只是为了执行您的 SQL 语句，因为您已经这样做了，使用`mysql_select_db()` 您的`$con`设置连接到数据库，如下所示..

```
 $getlatlong = mysql_query("SELECT * FROM zipcity WHERE zip='".$url[2]."'",$con);
    $ll = mysql_fetch_array($getlatlong); 
```

首先你的连接应该像这样..

```
$conn = mysql_connect($host,$user,$pass);  // mysql config
mysql_select_db('databasename',$conn);    // connection to database 
```

然后像这样查询..

```
$getlatlong = mysql_query("SELECT * FROM zipcity WHERE zip='".$url[2]."'");
        $ll = mysql_fetch_array($getlatlong); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T02:37:00.517

您的连接 $con 有问题，它没有连接并返回 null。

# mongodb - MongoDB，getIndexes。“钥匙”中的零

> ID：15651012
> 
> 赞同：0
> 
> 时间：2013-03-27T02:35:17.073
> 
> 标签：mongodb, indexing

这是 mongodb shell 中“getIndexes”命令的输出：

```
db.users.getIndexes()
[
    {
        "v" : 1,
        "key" : {
            "online" : 1,
            "region" : 1,
            "status" : 0
        },
        "ns" : "Pr.users",
        "name" : "online_1_region_1_status_-1"
    },
    {
        "v" : 1,
        "key" : {
            "birthdate" : 1,
            "status" : 1,
            "region" : 1,
            "sex" : 1,
            "profile.uptime" : -1
        },
        "ns" : "Pr.users",
        "name" : "birthdate_1_status_1_region_1_sex_1_profile.uptime_-1"
    }
] 
```

“关键”值中的“0”是什么意思？在文档（[http://docs.mongodb.org/manual/reference/method/db.collection.getIndexes/](http://docs.mongodb.org/manual/reference/method/db.collection.getIndexes/)）中只有“1”和“-1”。

> system.indexes.key
> 
> 包含一个文档，其中包含索引中保存的键以及索引的顺序。索引可以是降序或升序。负值（例如-1）表示按降序排序的索引，而正值（例如1）表示按升序排序的索引。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:09:44.090

我会说这是未定义的行为。从下面的示例来看，mongo 对设置为 0 的索引值方向感到非常困惑。

# 简单测试：

## 降序索引

```
db.test.ensureIndex({t : 1}) 
```

让我们看看在按字段“t”对测试集合进行排序时使用的游标

```
db.test.find.sort({t : 1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_1"`

```
db.test.find.sort({t : -1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_1 reverse"`

这是预期的行为。

## 升序指数

```
db.test.ensureIndex({t : -1}) 
```

-

```
db.test.find.sort({t : 1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_-1 reverse"`

```
db.test.find.sort({t : -1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_-1"`

这也是预期的行为。

## 索引 0

```
db.test.ensureIndex({t : 0}) 
```

-

```
db.test.find.sort({t : 1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_0 reverse"`

```
db.test.find.sort({t : -1}).explain() 
```

使用的光标：`"cursor" : "BtreeCursor t_0 reverse"`

对于两个排序方向，mongo 都使用反向光标。

不知道为什么 mongo 不处理这样的事情。即使是文档中的简单段落也足够了。

有趣的是，您甚至可以将字符串设置为索引方向。

```
{
        "v" : 1,
        "key" : {
            "t" : "sjdhfsdfsdf"
        },
        "ns" : "playground.test",
        "name" : "t_"
    } 
```

或者是这样的：

```
db.test.ensureIndex({t: ObjectId()}, {additionalParam : "dfsdf"})
...
{
        "v" : 1,
        "key" : {
            "t" : ObjectId("51527ebaa845a81ea8434d69")
        },
        "ns" : "playground.test",
        "name" : "t_",
        "additionalParam" : "dfsdf"
    } 
```

# c# - 未能通过 thrift api 更新列值

> ID：15651013
> 
> 赞同：0
> 
> 时间：2013-03-27T02:35:22.970
> 
> 标签：c#, insert, cassandra, thrift

这个测试用例第一次会通过，但接下来会失败。我不知道为什么它在第二次执行插入方法后没有将列值更新为“value1”。

```
 [TestMethod]
    public void TestMethod()
    {

        client.set_keyspace(KEYSPACE);

        byte[] key = utf8Encoding.GetBytes("123456789");

        ColumnParent parent = new ColumnParent();
        parent.Column_family = "Users";

        Column column = new Column();
        column.Name = utf8Encoding.GetBytes("columnname1");
        column.Timestamp = DateTime.Now.Millisecond;
        column.Value = utf8Encoding.GetBytes("value1");

        // insert
        client.insert(key, parent, column, ConsistencyLevel.ONE);

        ColumnPath path = new ColumnPath();
        path.Column_family = "Users";
        path.Column = utf8Encoding.GetBytes("columnname1");

        // search
        ColumnOrSuperColumn returnedColumn = client.get(key, path, ConsistencyLevel.ONE);
        Assert.AreEqual("value1", utf8Encoding.GetString(returnedColumn.Column.Value));

        // update
        column.Timestamp = DateTime.Now.Millisecond;
        column.Value = utf8Encoding.GetBytes("value2");
        client.insert(key, parent, column, ConsistencyLevel.ONE);

        returnedColumn = client.get(key, path, ConsistencyLevel.ONE);
        Assert.AreEqual("value2", utf8Encoding.GetString(returnedColumn.Column.Value)); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T05:27:55.703

如果你在代码中连续调用两次，你需要确保你的时间戳是递增的。使用微秒分辨率并创建一个函数，该函数会记住上次返回的时间，如果下一次小于或等于上次返回的时间，则添加一个。

仅使用毫秒分辨率，所有时间戳可能都相同，因此 Cassandra 恢复为比较字节，因此 value2 获胜。

# objective-c - 在 Xcode 中分配基本数学运算的结果时，“初始化元素不是编译时常量”

> ID：15651014
> 
> 赞同：0
> 
> 时间：2013-03-27T02:35:23.593
> 
> 标签：objective-c, c, initialization

```
int x = 10;
float y= 3.5;
float z =x*y; 
```

我输入了这个，但我得到一个错误，Xcode 无法识别 * 并说“初始化元素不是编译时常量”发生了什么？（顺便说一句，我是一个完整的初学者。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:12:47.787

问题是您在文件范围内声明这些。全局变量必须在编译时初始化，而不是运行时初始化，并且不允许使用其他变量初始化它们。

如果你在一个函数中声明这些就不会有问题。但如果你只是使用常量，你可以`z`直接用 35.0.0 初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:54:14.537

声明 z 时不能分配表达式。尝试这个

```
int x = 10;
float y= 3.5;
float z;
z=x*y; 
```

# iphone - 检查子视图中的点是否在父视图中

> ID：15651019
> 
> 赞同：1
> 
> 时间：2013-03-27T02:35:50.527
> 
> 标签：iphone, ios, cocoa-touch, uiview

我有以下设置：

![在此处输入图像描述](../Images/ddba5f9663ef3551ddcd299c858269eb.png)

浅蓝色视图，我们称之为`parentView`，有一个矩形子视图（紫色视图），称为`childView`。用户可以使用平移触摸来旋转和拉伸 childView，方法是将手指放在红点显示的点上并推动或拉动它。

有`childView`可能 可以缩放到足够小，以至于在用户完成触摸后，红点表示的点将在`parentView`.

我的目标是创建一种可以检测红点是否在其中的方法`parentView`。我编写了以下代码：

```
CGPoint childViewRedPoint = CGPointMake(self.bounds.size.width, self.bounds.size.height / 2);
CGPoint rotatedChildViewRedPoint = CGPointApplyAffineTransform(childViewRedPoint, CGAffineTransformMakeRotation(self.rotateAngle));
CGPoint convertedChildViewRedPoint = [self convertPoint:rotatedChildViewRedPoint toView:self.superview];

if (CGRectContainsPoint(self.superview.bounds, convertedChildViewRedPoint))
{
    return YES;
}
else
{
    return NO;
} 
```

首先，我找到 中定义的红点`childView`，然后将其旋转视图旋转的量，然后将其转换为`parentViews`坐标。

我得到的观点似乎没有意义，这不起作用。想知道是否有人知道我要去哪里错了？我没有考虑 parentViews superview 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:01:31.817

我不是 100% 确定，但我认为这`convertPoint:`已经考虑了旋转（或任何其他转换），所以你只需要：

```
CGPoint childViewRedPoint = CGPointMake(self.bounds.size.width, self.bounds.size.height / 2);
CGPoint convertedChildViewRedPoint = [self convertPoint:childViewRedPoint toView:self.superview];

if (CGRectContainsPoint(self.superview.bounds, convertedChildViewRedPoint))
... 
```

# ios - UIWindow 启动后丢失 rootviewcontroller

> ID：15651030
> 
> 赞同：3
> 
> 时间：2013-03-27T02:37:08.527
> 
> 标签：ios, uinavigationcontroller, uiwindow, appdelegate

我的应用程序有一个带有正确设置的 rootview 控制器的 UIWindow。我知道这一点，因为我在设置 rootViewController 后检查它（在应用程序委托中），一切都很好。

一旦我的应用程序启动，一切正常。我的问题是，当我签入“主”视图时，UIWindow 上的 rootview 控制器不再正确设置。

我的应用程序运行良好.. 那么您可能想知道的问题是什么......好吧，我正在尝试实现 AdColony（视频广告），他们需要获取 UIWindow 的 rotviewcontroller 来显示他们的广告。当他们检查 rootviewcontroller 时......它是空的。

我也添加了代码来检查.. rootviewcontroller 为空。

我的 UIWindow 如何丢失指向 rootviewcontroller 的指针？我需要帮助了解 UIWindow 架构的工作原理。

谢谢

检查 UIWindow 的可见控制器的代码（下面的代码为 viewcontrollers 值返回 nil。

```
 UIWindow* window = [UIApplication sharedApplication].keyWindow;
    UIViewController* rootViewController = [window rootViewController];

    [self getVisibleViewControllerChild:rootViewController];

- (UIViewController*)getVisibleViewControllerChild:(UIViewController*)viewController {

UIViewController* visibleViewController = nil;

if(!viewController) {
    NSLog(@"nil");
    return nil;
}

if ([viewController isKindOfClass:[UINavigationController class]]) {
    UINavigationController* navigationController = (UINavigationController*)viewController;
    viewController = navigationController.visibleViewController;
    NSLog(@"viewcontroller is nav controller");
}

while (visibleViewController == nil) {

    if (viewController.modalViewController == nil) {
        visibleViewController = viewController;
        NSLog(@"visibleViewController = %@", visibleViewController);
    } else {

        if ([viewController.modalViewController isKindOfClass:[UINavigationController class]]) {
            UINavigationController *navigationController = (UINavigationController *)viewController.modalViewController;
            viewController = navigationController.visibleViewController;
            NSLog(@"modal 1");
        } else {
            viewController = viewController.modalViewController;
            NSLog(@"modal 2");
        }
    }

}

return visibleViewController; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:40:00.137

我真的不知道你想用这段代码做什么，但方法 keyWindow 似乎返回 nil，所以 rootViewController 也将是 nil。我不知道为什么这是真的，但你可以得到 rootViewController （我假设你是从一个视图控制器做这个）：

```
self.view.window.rootViewController 
```

# java - 编程挑战扫雷帮助：如何检查二维字符串数组中的“*”？

> ID：15651032
> 
> 赞同：0
> 
> 时间：2013-03-27T02:37:37.760
> 
> 标签：java, matrix, multidimensional-array, arrays, minesweeper

我正在尝试为编程挑战网站编写扫雷程序，并且无法检测 2D 数组中的某个元素是否是地雷并增加周围区域。这是我的代码，用于检查数组角落中的地雷并增加周围区域

```
 public void constructPointers(){
    int counter = 0;
    for(int i = 0; i<row;i++){
        for(int j = 0;j<colm;j++){
            if(minefield[i][j].equals("*")){
                if(i == 0 && j == 0){
                    int val = Integer.parseInt(minefield[i+1][j]);
                    val++;
                    minefield[i+1][j] = "" + val;

                    val = Integer.parseInt(minefield[i][j+1]);
                    val++;
                    minefield[i][j+1] = "" + val;
                    val = Integer.parseInt(minefield[i+1][j+1]);
                    val++;
                    minefield[i+1][j+1] = "" + val;
                }
                if(i == minefield.length -1 && j == 0){
                    int val = Integer.parseInt(minefield[i-1][j]);
                    val++;
                    minefield[i-1][j] = "" + val;
                    val = Integer.parseInt(minefield[i][j+1]);
                    val++;
                    minefield[i][j+1] = "" + val;
                    val = Integer.parseInt(minefield[i-1][j+1]);
                    val++;
                    minefield[i-1][j+1] = "" + val;
                }
                if(i == 0 && j == minefield[i].length - 1){
                    int val = Integer.parseInt(minefield[i+1][j]);
                    val++;
                    minefield[i+1][j] = "" + val;
                    val = Integer.parseInt(minefield[i][j-1]);
                    val++;
                    minefield[i][j-1] = "" + val;
                    val = Integer.parseInt(minefield[i+1][j-1]);
                    val++;
                    minefield[i+1][j-1] = "" + val;
                }
                if(i == minefield.length - 1 && j == minefield[i].length -1){
                    int val = Integer.parseInt(minefield[i-1][j-1]);
                    val++;
                    minefield[i-1][j-1] = "" + val;
                    val = Integer.parseInt(minefield[i-1][j]);
                    val++;
                    minefield[i-1][j] = "" + val;
                    val = Integer.parseInt(minefield[i][j-1]);
                    val++;
                    minefield[i][j-1] = "" + val;
                }
                if(i == 0){
                    int val = Integer.parseInt(minefield[i+1][j]);
                    val++;
                    minefield[i+1][j] = "" + val;
                    val = Integer.parseInt(minefield[i][j+1]);
                    val++;
                    minefield[i][j+1] = "" + val;
                    val = Integer.parseInt(minefield[i+1][j+1]);
                    val++;
                    minefield[i+1][j+1] = "" + val;
                }
            } 
```

如果我输入：

```
*.*
...
*.* 
```

此代码将输出：

```
* 2 *
2 4 2
* 2 * 
```

我的问题是：如何让我的代码“跳过”相邻的地雷并增加周边区域？如果我输入

```
*.*
*..
*.* 
```

我希望它输出：

```
 * 3 *
    * 5 2
    * 3 * 
```

编辑：你们所有人都有很好的答案，但我选择了最佳答案，因为它解决了我没有提到的许多其他问题。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:57:41.350

只是为您的矿山更新循环提供建议：

```
// You are on a mine
if(minefield[i][j].equals("*")){

    // Now go around your current position
    for(int tempRow = i-1; tempRow <= i+1; tempRow++) {
        for(int tempCol = j-1; tempCol <= j+1; tempCol++) {
            // If a valid square and not a mine
            if(tempRow >= 0 && tempRow < row &&
                tempCol >= 0 && tempCol < colm &&
                !minefield[tempRow][tempCol].equals("*")) 
            {
                // Do your update stuff
                int val = Integer.parseInt(minefield[tempRow][tempCol]);
                val++;
                minefield[tempRow][tempCol] = "" + val;
            }
        }
    }
} 
```

这个循环也可以更容易扩展到更大的电路板尺寸......

注意：如果不是地雷，我假设雷区被初始化为“0”。否则第一个会有问题`parseInt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:55:11.967

您可能会发现迭代每个单元格更容易，并且对于每个不是地雷的单元格，计算单元格周围的地雷数。换句话说，您一次计算每个单元格的计数。这可以解决您关于如何处理相邻地雷的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T02:40:55.383

```
if(minefield[i][j] == "*"){
    // do stuff
} 
```

我不明白有什么大不了的，嗯。

# 编辑

不正确 - 正如评论中所说：

```
if(minefield[i][j].equals("*")){
    // do stuff, they are equal.
} 
```

ps不是很有建设性的答案，但由于建设性的意见，我离开了它。

# c++ - 如何在 C++ execve 命令中将字符串转换为 char[]*？

> ID：15651043
> 
> 赞同：0
> 
> 时间：2013-03-27T02:39:14.743
> 
> 标签：c++, string, char, execve

尝试使用 execve 命令时，我收到关于我最后 2 个参数的错误。

```
 #include <unistd.h>        
     const char * c = enviorment.c_str();
     execve(full.c_str() , cl.getArgVector(), c); 
```

我尝试使用几种不同的选项来复制字符串，例如：

```
char *temp2 = new char[(path).size()+1];
strcpy ( temp2, cl.getCommand());
    execve(full.c_str() , cl.getArgVector(), temp); 
```

但我无法让它工作并收到一条错误消息：

错误：无法将参数 3 的 char* 转换为 char* const* 到 int execve(const char*, char* const*, char* const*)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:24:18.733

环境变量数组是一个字符串数组 (char*)，而不是一个字符串。它需要一个 NULL 值作为数组中的最后一个元素。

模仿您用于实现 c1.getArgVector() 的代码，确保数组中的最后一个 char* 为 NULL。

# c# - 如何使用 LINQ 将序号插入字段？

> ID：15651051
> 
> 赞同：1
> 
> 时间：2013-03-27T02:39:58.910
> 
> 标签：c#, linq

我有以下代码用于使用 Entity Framework 将数据放入关系表中：

```
 public IList<Objective> createObjectives()
    {
        var objectiveNames = new[]
        {
            "Objective 1",
            "Objective 2",
            "Objective 3",
            "Objective 4",
            "Objective 5",
            "Objective 6",
            "Objective 7",
            "Objective 8"
        };
        var objectives = objectiveNames.Select(o => new Objective
        {
            ObjectiveSeq = ??,
            Name = o,
            Description = o + " Description",
            ModifiedDate = DateTime.Now
        }
        );
        return objectives.ToList();
    } 
```

我的表名 ObjectiveSeq 中有一个新字段。如何修改我的 LINQ 以在该字段中插入从 1 开始的序列号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:43:54.883

```
 var objectives = objectiveNames.Select((o, index) => new Objective
        {
            ObjectiveSeq = index,
            Name = o,
            Description = o + " Description",
            ModifiedDate = DateTime.Now
        }
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:42:35.230

函数有过载`Select`。你可以在[这里](http://msdn.microsoft.com/en-sg/library/bb534869.aspx)找到它。

```
Enumerable.Select<TSource, TResult> Method (IEnumerable<TSource>, Func<TSource, Int32, TResult>) 
```

查看页面中显示的示例。

```
 string[] fruits = { "apple", "banana", "mango", "orange", "passionfruit", "grape" };

 var query = fruits.Select((fruit, index) => new { index, str = fruit });

 foreach (var obj in query)
 {
    Console.WriteLine("{0}", obj);
 } 
```

你可以看到我们正在使用`(fruit, index)`. 您正在选择元素和索引。

输出将是

```
{ index = 0, str = apple }
{ index = 1, str = banana }
{ index = 2, str = mango }
{ index = 3, str = orange }
{ index = 4, str = passionfruit }
{ index = 5, str = grape } 
```

# ms-access - 在网络上重新共享文件

> ID：15651053
> 
> 赞同：1
> 
> 时间：2013-03-27T02:40:04.513
> 
> 标签：ms-access, vb6, compact-database

我目前使用 VB6 CompactDatabase 方法来压缩 .mdb (Access DB) 文件，并在上下搜索了一种使用 VB6 在原始数据库上重新应用共享权限的方法。

压缩数据库代码：

```
Set jro = CreateObject("jro.JetEngine")
If IsObject(jro) Then

    jro.CompactDatabase _
        "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sourcePath & _
            ";Jet OLEDB:Database Password=" & DBPassword, _
        "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & tmpPath & _
            ";Jet OLEDB:Database Password=" & DBPassword & _
            ";Jet OLEDB:Encrypt Database=True;Jet OLEDB:Engine Type=5;"
Else
    compactDB = "Compact Failed: MDAC not installed correctly - missing JRO.JETENGINE"
End If 
```

这将压缩到新数据库，序列是删除原始数据库并将新数据库重命名为旧数据库。

问题在于新文件没有原始共享权限，当前设置为“所有人”和“完全控制”。我找到了有关如何设置文件夹权限但不直接设置文件权限的代码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:55:24.937

对于任何有兴趣的人，我已经找到了解决方案。

在原始代码中；通过使用临时路径“C:\temp”创建新的“.mdb”，然后将其复制到我的 Program Files 目录；我实际上继承了“临时”文件夹的权限。

我将临时文件名更改为与当前数据库位于同一目录中，并且当进程完成时，新的 .mdb 具有与 Old.mdb 一样的完全权限。干杯

# d3.js - D3 中的更新选择为空

> ID：15651056
> 
> 赞同：0
> 
> 时间：2013-03-27T02:40:24.287
> 
> 标签：d3.js, crossfilter

在我的代码中，我的更新选择始终为空，我的退出选择也是如此，因此转换永远不会运行。每次刷新时，我都会重新绘制整个 DOM 片段，就好像它以前从未存在过一样（即我可以删除除 .enter 之外的所有内容，并且行为不会改变）。

我正在使用 data() 中的键函数来确保连接是在唯一值而不是位置上进行的。

整个代码位于[http://jsfiddle.net/colin_young/xRQjX/23/](http://jsfiddle.net/colin_young/xRQjX/23/)，但我已经提取了我认为是相关部分的内容（基本上，我只是想遵循[一般更新模式](http://bl.ocks.org/mbostock/3808218)）：

```
var key = function (d) {
    return d.index;
}

var filterDistance = function () {
var names = list.selectAll("div")
    .data(byDistance.bottom(40), key);

// Update
names.attr("class", "update");

// Add
names.enter()
    .append("div")
    .attr("class", "enter")
    .style("opacity", "0")
    .transition()
    .duration(500)
    .style("opacity", "1")
    .text(function (d) {
        return displayText(d);
    });

// Remove
names.exit()
    .transition()
    .duration(750)
    .style("opacity", "0")
    .remove();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:03:15.647

在[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/9mrspdWqkiU](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/9mrspdWqkiU)最下方能够找到问题。事实证明，在我的“工作”摘要显示中，我使用`$('results').text('insert summary here')`的当然是清除了我可能卡在其中的任何其他内容（例如我的 D3 生成的 div）。

# c++ - 可能是感兴趣区域中的 MatIterator_ 错误

> ID：15651057
> 
> 赞同：2
> 
> 时间：2013-03-27T02:40:43.607
> 
> 标签：c++, opencv, roi

我正在使用 C++ 进行一些`OpenCV 2.4.4`对象*检测*。不幸的是，我必须检测的那些对象没有独特的形状，但它们在 HSV 颜色空间中确实有一些非常特定的颜色范围（现在我正在检测一些红色对象）。

此外，对象应该只出现在图像的某些部分，所以我没有扫描所有图像，此外，在这个 ROI 下我有子 ROI（小矩形，我需要知道这些矩形中的哪个对象在一个框架中）。

所以，首先我试图检测它在大 ROI 中发现了一些东西，如果是的话，我将它设置为与我的环境不同的颜色。我用下面的代码做到了：

```
cvtColor(frame(Range(0,espv),Range::all()),framhsv,CV_BGR2HSV); 
MatIterator_<Vec3b> it, ith, end, endh;
ith  = framhsv.begin<Vec3b>();
endh = framhsv.end<Vec3b>();
it   = (frame(Range(0,espv),Range::all())).begin<Vec3b>(); 
for (;ith != endh; ++it,++ith){
    if( (((*ith)[0] <=7 && (*ith)[0]>=0)||((*ith)[0]>170)) && (*ith)[1]>=160){
        (*it)[0] = 63;
        (*it)[1] = 0;
        (*it)[2] = 255;}} 
```

一切正常，物体被“检测到”，所以我转到下一个陡峭的地方，检测物体是否在每个子 ROI 中。为此，我创建了以下函数，返回每个子 ROI 中“检测到”像素的数量，因此我可以考虑哪个是正确的子 ROI。

这是功能：

```
Vector<int> CountRed(cv::Mat &frame, int hspa, int vspa, int nlines ,int nblocks){
    Vector<int> count(nblocks*nlines,0);
    for(int i = 1; i<= nlines; i++){
        for(int j = 1; j<= nblocks; j++){

            Mat framhsv;
            cvtColor(frame(Range((i-1)*vspa,i*vspa),Range((j-1)*hspa,j*hspa)),framhsv,CV_BGR2HSV); //Converte somente a área de interesse para HSV

            MatIterator_<Vec3b> it, ith, endh;
            ith  = framhsv.begin<Vec3b>();
            endh = framhsv.end<Vec3b>();
            it   = (frame(Range((i-1)*vspa,i*vspa),Range((j-1)*hspa,j*hspa))).begin<Vec3b>();

            for (;ith != endh; ++it,++ith){
                if( (((*ith)[0] <=7 && (*ith)[0]>=0)||((*ith)[0]>170)) && (*ith)[1]>=160){
                    (*it)[0] = 63;
                    (*it)[1] = 0;
                    (*it)[2] = 255;
                    count[(j)+nblocks*(i-1)-1]++;}}}}
return count;
} 
```

代码编译时没有警告或错误，并且视频显示，但如果我在 ROI 的任何部分插入我必须检测到的对象，则代码停止工作，如果我删除以下内容也会发生这种情况：

`count[(j)+nblocks*(i-1)-1]++;`

线。我收到以下错误： `Access violation writing location 0xFFFFF970.`

我真的认为问题一定出在不使用时访问迭代器`Range::All()`

为了澄清我在这里所做的是一个框架的图像：http: [//i.imgur.com/Irvr8bk.jpg](http://i.imgur.com/Irvr8bk.jpg)

紫色区域是框架，红色区域是 ROI，每个黑色区域是子 ROI。

我也尝试使用`frame(Rect(0,0,frame.cols,2*vspa)`来定义 ROI，它也有效，但是在尝试使用`cv::Rect`. `MatIterator_`所以，我真的认为在不访问完整的行结构时这一定是一个错误。

那么，我应该如何处理这些子 ROI 呢？

# google-app-engine - 使 db.put() 故障安全

> ID：15651062
> 
> 赞同：1
> 
> 时间：2013-03-27T02:41:33.740
> 
> 标签：google-app-engine, google-cloud-datastore

我想让我的 Google App Engine 服务中的 db.put() 操作尽可能有弹性，即使在基础设施出现问题或过载的情况下也能最大限度地提高成功的可能性。我目前想出的是捕捉所有可能发生的异常，并创建一个任务，如果第一次尝试失败，则重试提交：

```
try:
    db.put(new_user_record)
except DeadlineExceededError:
    deferred.defer(db.put,new_user_record)
except:
    deferred.defer(db.put,new_user_record) 
```

此代码是否捕获所有可能的错误路径？或者是否有其他方法 db.put() 可能会失败而不会被此代码捕获？

* * *

2013 年 3 月 28 日编辑 - 澄清预期失败的时间

到目前为止，似乎答案假设如果 db.put() 失败，那是因为数据存储已关闭。根据我运行相当高工作负载应用程序的经验，这不一定是必需的。有时您会遇到特定于工作负载的 API 瓶颈，有时一个 API 的缓慢会导致另一个 API 的请求截止日期到期。即使此类事件的频率较低，但如果流量很高，它们的数量可能会很大。这些是我试图涵盖的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:55:01.570

我不会说这是最好的方法 - 任何导致原始异常的原因都可能再次发生。为了获得额外的弹性，我要做的是首先将要保存的记录加载到内存缓存中，如果 put 发生异常（任何异常），它可以尝试一定次数的重试（例如 3 次），每次重试之间都有短暂的睡眠试图。根据您的应用程序，这可以是同步操作，也可以是使用延迟任务，它可以使用内存缓存中的数据异步完成。
最后，我实际上会对数据存储中的记录进行查询，即使没有异常来确认该行实际上已被写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:52:36.903

好吧，我认为尝试这样的回退根本不是一个好主意。如果数据存储已关闭，则它已关闭并且您不走运（不应该经常发生:)对您的代码的一些想法：

*   在 put 操作期间可能会引发更多异常（例如 InternalError、Timeout、CommittedButStillApplying、TransactionFailedError），其中一些并不意味着 put 失败。（即 CommittedButStillApplying 只是意味着放置操作被**延迟**）。使用您的方法，在延迟调用成功后，您最终会在数据存储中两次获得该条目。
*   任务限制在 ~100KB（总大小，不是有效负载）。如果您的有效负载接近或高于该限制，则 deferred-api 将自动尝试将您的有效负载序列化到数据存储区，以使任务本身低于该限制。如果数据存储真的不可用，这也会失败。

因此，最好捕获数据存储错误，并通知您的用户他的请求失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T05:16:26.560

重试一切都很好，但是使用指数退避和最重要的正确事务使用，以便失败 xoesnt 最终导致 oa 部分写入。

# mysql - 无法远程访问 MySQL 服务器

> ID：15651066
> 
> 赞同：0
> 
> 时间：2013-03-27T02:42:01.543
> 
> 标签：mysql, router

我在尝试远程访问我的 MySQL 数据库时遇到了一些麻烦。在本地或通过 LAN 访问它可以正常工作，但是通过 Internet 尝试时出现此错误：

**不允许主机 '192.168.1.1' 连接到此 MySQL 服务器**

我已经完成了所有这些：

*   禁用防火墙
*   授予本地客户端权限：`GRANT ALL ON *.* TO root@'%' IDENTIFIED BY 'root'`;

然后当我尝试连接时：

```
mysql -h190.XXX.XXX.XXX -uroot -proot 
```

请注意，我尝试通过公共 IP（190.XXX.XXX.XXX）连接，但错误显示路由器本地 IP（路由器配置为将端口 3306 转发到服务器主机）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:53:49.237

很多可能的原因：

_ 首先在 my.cnf 中：

```
#skip-networking # should be disabled
bind-address = 0.0.0.0  #make sure it is not bound to localhost 
```

_ 然后确保没有防火墙，并且您不需要在 /etc/hosts.allow 中打开端口（或您使用的任何东西，例如亚马逊策略编辑器）

_ 你的授权也应该有授权选项（我会使用 root 以外的东西进行远程访问）：

```
GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'%' IDENTIFIED BY 'pass' WITH
GRANT OPTION; 
```

_ 然后确保刷新权限（在授予之后）：

```
 flush privileges; 
```

# ajax - 无法在codeigniter中获得json返回

> ID：15651069
> 
> 赞同：0
> 
> 时间：2013-03-27T02:42:13.030
> 
> 标签：ajax, json, return, codeigniter-2

我有一个登录页面，当有人尝试登录时，它会向服务器发送一个 ajax 请求。ajax 会转到服务器，因为他们登录了我已经能够确认。但问题是我的 jQuery 似乎没有收到 JSON。

我的控制器中的功能是：

```
public function login(){
    $this->load->model('users_model');
    if((!!$this->input->post('email')) || (!!$this->input->post('password'))){
        $ret = $this->users_model->login($this->input->post('email'), $this->input->post('password'));
        echo json_encode(array('status' => "OK", 'msg' => 'Logged in!')); //also tried return
    }else{
        echo json_encode(array('status' => 'FAIL', "msg" => 'Invalid Email or Pass'));
    }
} 
```

AJAX 函数是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#login").ajaxForm(function(json) {
            alert(json);
        if(json.status == true) {
                alert(json.msg);
            //window.location = '<?php echo base_url(); ?>';
            } else {
                alert("Problem");
                $(".error_msg").html(json.msg);
            };
        });
    });
</script> 
```

如果我提醒 json 变量，它是空白的，如果我做 json.msg 它说未定义。那么......我必须做些什么才能得到这个回调，一个json对象或任何类型的对象？请解释一下，以便我理解问题，而不仅仅是如何解决它。非常感谢！

编辑：这也是表格：

```
<span class="error_msg"></span></br>

<form id="login" action="<?php echo base_url(); ?>users/login" method="POST" enctype="multipart/form-data">
    Email: <input name="email" type="text"/></br>
    Password: <input type="password" name="password"></br>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:18:11.703

啊，我想我明白了。

这是你使用的插件吗？[http://www.malsup.com/jquery/form/#api](http://www.malsup.com/jquery/form/#api)

在这种情况下，使用`ajaxSubmit`，而不是`ajaxForm`。

其他在线示例执行以下操作：

```
$(document).ready(function() {
    $('#login').submit(function() {
    $("#login").ajaxSubmit({
        success: function(json) {
            alert(json);
            if(json.status == true) {
                alert(json.msg);
                //window.location = '<?php echo base_url(); ?>';
            } else {
                alert("Problem");
                $(".error_msg").html(json.msg);
            }
        }
    });
    return false;
    });
}); 
```

# javascript - 简单的backbone.js问题

> ID：15651073
> 
> 赞同：1
> 
> 时间：2013-03-27T02:42:51.893
> 
> 标签：javascript, backbone.js, underscore.js

对于我的生活，我无法弄清楚为什么这不起作用......

它检索主干和下划线没有问题，并且不会传播任何错误，但它也不会将 hello world 输出到控制台。

```
<body>
 <script src="D:/underscore.js"></script>
 <script src="D:/"></script>

<script type="text/javascript">

  Person = Backbone.Model.extend({
     initialize: function() {
        console.log('hello world');
    }
});

</script>

</body>
</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:47:53.460

您需要创建一个新的人。此时您所做的就是指定 Person 模型的属性。所以添加：

```
var myPerson = new Person(); 
```

在脚本标签的末尾。这应该有效。

# javascript - 创建一个使用新值更新 dom 元素的 setter？

> ID：15651074
> 
> 赞同：0
> 
> 时间：2013-03-27T02:42:52.370
> 
> 标签：javascript

有没有办法制作一个 setter 来在对象的属性发生更改时更新 DOM 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:47:14.840

我不相信。如果不创建 setter，那么`x`将是一个普通的 jane 属性，它挂在对象上，无法知道它何时发生了变化。为什么要避开二传手？这是实现目标的一种非常干净的方法。

但是要记住的一件小事`Object.defineProperty`，虽然更冗长，但更受支持并“赢得”了`set`and `get`：

```
a = {};
Object.defineProperty(a, 'x', {
    get: function() {
        return this._x;
    },
    set: function(newX) {
        this._x = newX;
        $("#my_element").html(newX);
    }
}); 
```

# asp.net-mvc - 使 MVC Url.Action 可编译

> ID：15651079
> 
> 赞同：0
> 
> 时间：2013-03-27T02:43:44.567
> 
> 标签：asp.net-mvc, model-view-controller

使用 URL.Action 时，我的控制器开始出现管理问题。我可以为所有控制器操作定义常量，但这似乎相当霸道。我记得在某处看到了一个工具，它可以为控制器方法添加编译时间检查。有人有建议吗？

# r - ggplot2 将变量映射到 y 并使用 stat="bin" 时出错

> ID：15651084
> 
> 赞同：16
> 
> 时间：2013-03-27T02:44:41.543
> 
> 标签：r, ggplot2

我正在使用 ggplot2 制作直方图：

```
geom_histogram(aes(x=...), y="..ncount../sum(..ncount..)") 
```

我得到了错误：

```
Mapping a variable to y and also using stat="bin".
  With stat="bin", it will attempt to set the y value to the count of cases in each group.
  This can result in unexpected behavior and will not be allowed in a future version of ggplot2.
  If you want y to represent counts of cases, use stat="bin" and don't map a variable to y.
  If you want y to represent values in the data, use stat="identity".
  See ?geom_bar for examples. (Deprecated; last used in version 0.9.2) 
```

一般是什么原因造成的？我对错误感到困惑，因为我没有将变量映射到`y`，只是直方图，`x`并且希望直方图条的高度代表数据的归一化部分（这样所有条的高度总和为 100%数据。）

*编辑*：如果我想制作密度图`geom_density`而不是`geom_histogram`，我使用`..ncount../sum(..ncount..)`or`..scaled..`吗？我不清楚是做什么`..scaled..`的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T03:43:08.280

这里的混淆是一个长期存在的混淆（如冗长的警告消息所证明的那样），一切都以`stat_bin`.

但是用户通常不会意识到他们的困惑是围绕 . 展开的`stat_bin`，因为他们通常在使用`geom_bar`或时遇到问题`geom_histogram`。请注意每个文档：默认情况下，它们都使用`stat = "bin"`（在当前的**ggplot2**版本中，此统计信息已分为`stat_bin`连续数据和`stat_count`离散数据）。

但是，让我们备份。`geom_*`' 控制将数据实际呈现为某种几何形式。`stat_*`只是转换您的数据。这种区别在实践中有点令人困惑，因为添加一层`stat_bin`将默认调用，因此它看起来与您学习时`geom_bar`没有区别。`geom_bar`

无论如何，请考虑类似“条形”的几何图形：直方图和条形图。两者显然都将涉及沿线某处的一些数据分箱。但我们的数据可以是预先汇总的，也可以不是。例如，我们可能想要一个条形图：

```
x
a
a
a
b
b
b 
```

或等效地来自

```
x  y
a  3
b  3 
```

第一个还没有被装箱。第二个是预装箱。两者的默认行为`geom_bar`是`geom_histogram`假设您*没有*预先分箱数据。因此，他们将尝试调用`stat_bin`（对于直方图，现在`stat_count`对于条形图）您的`x`值。

正如警告所说，它将尝试`y`为您映射到结果计数。如果您*还*尝试将`y`自己映射到其他变量，您最终会进入 Here There Be Dragons 领域。映射`y`到`stat_bin`(`..count..`等) 返回的变量的函数应该没问题，并且不应该抛出该警告（它不适用于我上面使用@mnel 的示例）。

这里的要点是，`geom_bar`如果您已经预先计算了条形的高度，请始终记住使用`stat = "identity"`，或者最好使用默认使用的较新`geom_col`的`stat = "identity"`。因为`geom_histogram`您不太可能预先计算 bin，所以在大多数情况下，您只需要记住不要映射`y`到从`stat_bin`.

`geom_dotplot`使用它自己的分箱统计`stat_bindot`，我相信这个讨论也适用于这里。这类事情对于 2d 分箱情况 (`geom_bin2d`和) 通常不是问题，因为在 1d 情况下，与分箱变量`geom_hex`类似的变量没有那么多的灵活性。如果未来的更新开始允许对 2d 分箱案例进行更多花哨的操作，我想这可能会成为您必须注意的事情。`z``y`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T03:43:53.713

的文档`geom_histogram`声明它是`stat_bin`和的别名`geom_bar`

`geom_density`使用生成的平滑密度估计的状态的文档`stat_density`

按照链接（或直接查找帮助页面）

### `stat_bin`

的文档`stat_bin`描述了如何`stat_bin`返回带有以下（附加）列的 data.frame

> **计算** bin 中的点数
> 
> **密度** bin 中点的密度，缩放到积分为 1
> 
> **ncount** 计数，最大为 1
> 
> **ndensity** 密度，最大为 1

### `stat_density`

的文档`stat_density`描述了如何`stat_density`返回带有以下（附加）列的 data.frame

> **密度** 密度估计
> 
> **计数** 密度 * 点数 - 适用于堆积密度图
> 
> **缩放** 密度估计，缩放到最大值 1

* * *

要生成相同比例的图，您似乎需要`..ndensity..`来自`stat_bin`和`..scaled..`来自`stat_density`或`..density..`来自两者

```
ggplot(dd, aes(x=x)) + 
  geom_histogram(aes(y= ..density..)) +  
  geom_density(aes(y=..density..))

ggplot(dd, aes(x=x)) + 
  geom_histogram(aes(y= ..ndensity..)) + 
  geom_density(aes(y=..scaled..)) 
```

# jquery - AJAX 和 200 OK 消息：是否需要它们来完成服务器端调用？

> ID：15651085
> 
> 赞同：1
> 
> 时间：2013-03-27T02:44:44.543
> 
> 标签：jquery, ajax, wordpress

我们正在开发一个跟踪系统，该系统使用 WordPress AJAX API 在 WordPress 环境中连续进行 3 次 ajax 调用，并在第 3 次调用时刷新页面。

我注意到有时我的数据输入尝试在后端失败，我假设（可能不正确）发生这种情况是因为我们的最后一个 Ajax 调用在前一个得到 200 OK 清除之前完成，并中断了连接，这意味着数据永远不会被存储。

现在我的印象是，一旦发出 jQuery.ajax({type: 'POST' 调用，我就可以立即关闭页面，并且我发布到的服务器端仍然会接收并处理数据，不管是什么发生父连接。

但是我的数据测试显示一些数据没有得到一致的输入。在先前的 AJAX 调用以 200OK 清除之前，我认为这不应该与我的最终 AJAX 调用完成（并重新加载页面）有关吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:06:07.767

是的，如果您将 ajax 请求发送到服务器，那么您可以关闭页面，服务器将完成请求（执行代码）。

但是有一点你必须知道，你无法知道你的请求是否到达了服务器。

```
jQuery.ajax("htpp://",{type: 'POST'}); 
```

这是一个异步请求，所以它会在后台执行代码。执行这行代码并不代表你已经发送了请求。它有一些在后台工作的阶段。

1.  jQuery 会解析你的代码，看看你想要什么，
2.  它将创建一个 xmlhttprequest 对象，而不是设置选项。
3.  最后它将向服务器发送请求。

因此，如果您立即关闭页面，在第三阶段之前，将不会发送请求。

我建议您发送同步 ajax 请求并等待刷新/关闭页面的任何响应。因为同步 ajax 请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。

在[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)中，您必须设置 async false 以使其同步，如下所示，

```
 jQuery.ajax({
    url: Url,
    success: function(r) {},
    async:false
  }); 
```

# android - Android浏览器 - h1标签呈现看起来像wingdings，p标签呈现得很好

> ID：15651098
> 
> 赞同：0
> 
> 时间：2013-03-27T02:46:02.927
> 
> 标签：android, twitter-bootstrap, fonts

我有一个引导站点可以在所有浏览器上干净地工作。
但是，在我的 Android 手机上浏览时，H1 和 H3 标签是用类似于wingdings 的字体编写的。我尝试取消自定义字体并使用与段落样式相同的 CSS，但无济于事。

```
h1, h2, h3, h4 {
    font-family: Raleway, Georgia, Times, serif;
    -webkit-text-stroke: 1px;
    -webkit-font-smoothing: antialiased;
}

p, blockquote, body {
    font-family: Helvetica, Arial, sans-serif;
} 
```

我在任何地方都没有看到任何关于这个问题的帖子。我在我的几个网站上看到过。很不解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:12:55.153

这是引导程序 2.3.1 中的一个错误（[https://github.com/twitter/bootstrap/pull/7310](https://github.com/twitter/bootstrap/pull/7310)）

在我的 android 手机 (htc mytouch) 上坏了，但在 windows 7 上的 chrome 上看起来很完美。是否有 @media 查询仅排除 chrome 手机浏览器？

修复这个添加到 your.css

```
h1, h2, h3, h4, h5, h6 {
    text-rendering: auto;
} 
```

# php - 您如何限制未注册用户的访问权限，同时为注册用户提供完全访问权限？

> ID：15651099
> 
> 赞同：1
> 
> 时间：2013-03-27T02:46:24.747
> 
> 标签：php, mysql, restrictions

我正在尝试创建一个网页，其中包含只能由注册用户访问的用户和信息。是否可以限制未注册用户可以看到的文件？如果是这样，怎么做？我已经有一个 MySQL 数据库，在 index.php 中有一个连接。这是我到目前为止所拥有的：

```
<head></head>
<body>
    <h3>Signup Here:</h3>
        <form method="post" action="userindex.php">

                Please enter user name: <input type="text" name="username" value="" /><br />
                 Please enter password: <input type="password" name="password" value="" />
                <br />
                <input type="submit" value="Submit"/>

        </form>
</body>

<?php
include ("dbroutines.php");

if (isset($_POST['username'])) {

    if ($_POST['username']>'' && $_POST['password']>'' ) {
        $q="insert into users (Name, Password ) values ('".$_POST['username']."', '".$_POST['password']."')";
        echo 'query='.$q;
        $conn=db_connect();
        $result=$conn->query($q);
        echo '<br />xxx'.$conn->error."xxx";
        unset($_POST['username']);
        unset($_POST['password']);
    } else {
        echo 'Please enter both username AND password!';
    }

}

$q="select Name, Password from users";
$conn=db_connect();
$result=$conn->query($q);
echo 'xxx'.$conn->error."xxx";
if ($result){

           echo '<hr />';
            for ($count=0; $row=$result->fetch_row(); ++$count ) {
                echo $count." Name=".$row[0]." password=".$row[1].'<br />';

            }
          echo '<b style="color:red;">there are '.$count.' users in your database!'.'</b><hr />';
} 
```

从这里，你能指定什么样的用户可以访问某些文件，比如 userindex.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:25:02.583

您可以将一个额外的字段放在登录表名称“角色”中。

每次登录时间。检查是否是Master用户，然后它可以访问更多的访问权限。

如果是额外用户，则访问受限。

你明白我的意思了吗？或任何查询？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:51:33.790

是的。使用如下所示的查询查询具有给定用户名和密码的人的数据库：

```
select * from users where Name = 'john.doe' and Password = 'hunter2' limit 1 
```

如果它产生任何行，则用户存在，你应该让他们进入。如果没有行，那么用户名和密码的组合是无效的，你不应该让他们进入。

这是基础，但如果你真的要把它投入生产，你会想要做更多的改变：

*   适当地转义您放入查询中的数据或使用准备好的查询。照原样，您的代码容易受到[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)攻击。比如说，我尝试创建一个用户名或密码中带有撇号的帐户。你的代码会坏掉。这也可能被用于恶意手段，所以你真的应该修补它。

    修补它的最简单方法是在将其放入查询之前转义所有内容，例如使用[`mysql_real_escape_string`](http://www.php.net/mysql_real_escape_string). 这可能会起作用，但更好的是（因为`mysql_`不推荐使用整个函数系列）是使用准备好的查询和[PDO](http://www.php.net/pdo)，如下所示。

*   对您的密码进行散列和加盐处理，因此数据库泄露（如果上述漏洞未修补，则很容易发生）不会泄露所有密码。

您的代码可能如下所示：

```
// You'd probably want to put these in a separate configuration file.
$db = new PDO('mysql:dbname=test', 'my_mysql_user', 'hunter2');

// Make any errors throw an exception.
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$query = $db->prepare('select * from users where Name = :name limit 1');
$query->bindValue(":name", $_POST['username'], PDO::PARAM_STR);
$row = $query->fetch(PDO::FETCH_ASSOC);

if($row === FALSE) {
    // User not in the database; don't let them in.
}

$calculatedHash = hash("sha512", $row['PasswordSalt'] . $_POST['password']);
if($calculatedHash === $row['PasswordHash']) {
    // Password's right. Let them in.
}else{
    // Password's wrong. Keep them out.
} 
```

进一步的改进是使用 bcrypt 而不是盐渍 SHA-512。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T03:12:47.077

我认为验证用户不是万无一失的解决方案。您必须在 Session 中保留一个令牌以记住该用户是注册用户。您必须创建一个名为 Security.php 的通用 php 页面，您将在其中放置以下代码，因为聪明的用户可以直接键入 URL 并访问您的机密页面。您需要将此页面包含在要保护的每个 php 页面的顶部。

```
 if (!isset($_SESSION['AuthId'])) {
         header('Location:Login.php');
         exit;
         } 
```

# jquery - 排序时保持一行的位置

> ID：15651102
> 
> 赞同：2
> 
> 时间：2013-03-27T02:46:41.647
> 
> 标签：jquery, datatables

在我的表（JQuery 数据表）中，有一行（最后一行）必须始终位于末尾（用于总计）。

我可以区分它的值，因为它们就像：

```
<td><span class="last-row">MY VALUE</span></td> 
```

如何使排序功能始终将这种行放在末尾，无论按哪一列排序，也不管排序是 ASC 还是 DESC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:12:25.700

只是为了充实 SiGanteng 的建议，您可以使用该元素`tfoot`在表格中定义页脚行。

```
<table>
    <thead>
      <tr> 
      <!-- modern browsers know how to render these, it is also used by screen readers and other assistive technologies -->
        <td>header 1</td>
        <td>header 2</td>
        <td>header 3</td>
      </tr>
    </thead>
    <tfoot> <!--ditto-->
      <tr>
        <td colspan="3">footer text</td>
      </tr>
    </tfoot>
    <tbody>
      <!-- regular html rows & cols here -->
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:03:04.337

Yes

If it must be a td element then you will have to create a custom function sorting plugin [http://www.datatables.net/plug-ins/sorting](http://www.datatables.net/plug-ins/sorting)

Heres an example of a sort plugin that always puts null fields at the bottom, you can adjust to look for your special value in the column with whatever type of sort it is by subbing out nbsp; for your val, and assign this in aoColums stype

```
jQuery.fn.dataTableExt.oSort['mystring-asc'] = function(x,y) {
var retVal;
x = $.trim(x);
y = $.trim(y);

if (x==y) retVal= 0;
else if (x == "" || x == "&nbsp;") retVal=  1;
else if (y == "" || y == "&nbsp;") retVal=  -1;
else if (x > y) retVal=  1;
else retVal = -1;  // <- this was missing in version 1

return retVal;
 }
jQuery.fn.dataTableExt.oSort['mystring-desc'] = function(y,x) {
var retVal;
x = $.trim(x);
y = $.trim(y);

if (x==y) retVal= 0; 
else if (x == "" || x == "&nbsp;") retVal=  -1;
else if (y == "" || y == "&nbsp;") retVal=  1;
else if (x > y) retVal=  1;
else retVal = -1; // <- this was missing in version 1

return retVal;

 } 
```

The assignment in datatable() function

```
 ...
 "aoColumns": [
  { "sType": 'mystring' },
 ... 
```

# android - Android ActionBarSherlock 风格选中的动作项

> ID：15651103
> 
> 赞同：0
> 
> 时间：2013-03-27T02:46:42.487
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个`ViewPager`AND 每页显示一张照片。我展示了一个带有喜欢/不喜欢动作的拆分`ActionBar`，因此用户可以投票“喜欢”照片或“不喜欢”它。

我成功地为每张照片实现了投票功能。

**问题**：

如何为每张照片设置所选投票的样式？换句话说，如何`MenuItem`根据照片的当前状态来管理图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:56:02.007

您应该创建一个`boolean`来检测何时喜欢照片，然后调用`setIcon`您的`MenuItem`.

```
final MenuItem liked = YOUR_MENU.findItem(THE_LIKED_ACTION_ID);
    if (isLiked()) {
        liked.setIcon(YOUR_LIKED_DRAWABLE);
    } else {
        liked.setIcon(YOUR_DEFAULT_LIKED_DRAWABLE);
    }

mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            invalidateOptionsMenu();
        }
    }); 
```

# weblogic12c - weblogic 12c 请在此域的配置中启用 DomainRuntimeMBean Server 和 Edit MBean Server

> ID：15651104
> 
> 赞同：0
> 
> 时间：2013-03-27T02:46:53.843
> 
> 标签：weblogic12c

在我的 windows 7 64 位机器上，我完全安装了 weblogic 12c，但是当我登录到管理控制台时，它给了我这个错误：

请在此域的配置中启用 DomainRuntimeMBean Server 和 Edit MBean Server

我已经尝试卸载并进行全新安装，但无济于事。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:14:26.750

尝试删除域根目录中的待处理文件夹并重新启动服务器。默认域可能已损坏。

[http://weblogicfordummies.blogspot.com/2008/10/wls10please-enable-domainruntimembean.html](http://weblogicfordummies.blogspot.com/2008/10/wls10please-enable-domainruntimembean.html)

# macos - 卸载 rvm 后，我在打开新的终端会话时得到以下信息

> ID：15651107
> 
> 赞同：0
> 
> 时间：2013-03-27T02:47:41.957
> 
> 标签：macos, rvm

卸载 rvm 后，我在打开新的终端会话时得到以下信息：

```
Last login: Tue Mar 26 22:39:30 on ttys000
-bash: /etc/profile.d/sm.sh: No such file or directory
-bash: /etc/profile.d/rvm.sh: No such file or directory
~\ $ 
```

我如何确定它来自哪里？

```
-bash: /etc/profile.d/sm.sh: No such file or directory
-bash: /etc/profile.d/rvm.sh: No such file or directory 
```

我通过运行此安装程序安装了 rvm：[http](http://railsinstaller.org/) ://railsinstaller.org/在带有 Mountain Lion 的 Mac 上。我为该软件包运行了卸载程序。这应该是卸载 rvm，但留下了一些痕迹。毕竟我不会使用 rvm，因为在安装 rubies 时会出现一些 openssl 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:23:46.270

检查`/etc/profile`：

```
source /etc/profile.d/sm.sh
source /etc/profile.d/rvm.sh 
```

如果是这种情况，请报告 Railsinstaller 的错误：[https ://github.com/railsinstaller/railsinstaller-nix/issues](https://github.com/railsinstaller/railsinstaller-nix/issues)

# haskell - 看似随机位置的 Haskell 语法错误

> ID：15651118
> 
> 赞同：1
> 
> 时间：2013-03-27T02:49:32.153
> 
> 标签：haskell, syntax

这段代码在几分钟前还在工作，在我重新启动我的 ghci 后，它就停止工作了。现在我在`where`,`snst`或`size`. （不知道我改变了什么导致每个单独的错误）

有人可以指出我的语法有什么问题吗？

```
instance Array Tree where
    new n x  
        | n <= 0    = Leaf
        | odd n     = Node n nst x nst
        | even n    = Node n (Node (n `div` 2) snst x snst) x snst
        where nst = (new (n `div` 2) x)
              snst = (new (n `div` 2 - 1) x)

    size Leaf            = 0
    size (Node s _ _ _)  = s 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:59:26.843

在这些情况下，请确保没有隐藏选项卡。

我检查了您的缩进方式`where`是否有效。因此，除非声明之前有错误，否则`instance`我看不到任何语法错误。

此外，消除错误来源的一个想法是移出`new`.

```
myNew :: ...
myNew n x  
        | n <= 0    = Leaf
        | odd n     = Node n nst x nst
        | even n    = Node n (Node (n `div` 2) snst x snst) x snst
        where nst = (new (n `div` 2) x)
              snst = (new (n `div` 2 - 1) x)

instance Array Tree where
    new = myNew

    size Leaf            = 0
    size (Node s _ _ _)  = s 
```

试试这个，看看是否编译

# android - 离线谷歌地图安卓

> ID：15651120
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:49:52.110
> 
> 标签：android, google-maps

我尝试按照文档使用谷歌地图 API，但它不起作用。

我的清单

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.gogplemap"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />  
        <permission
           android:name="com.example.gogplemap.GOOGLEMAP"
           android:protectionLevel="signature"
           ></permission>
        <uses-permission android:name="com.example.gogplemap.GoogleMap"/>
        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.gogplemap.GoogleMap"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <meta-data
        android:name="com.google.android.gms.maps.MapFragment"
        android:value="AIzaSyBPQPMrlJk-Ft48z0CWvpWBRcLyrIJJ4X4"/>       
        </application>

    </manifest> 
```

我的布局 activity_google_map.xml

```
 <?xml version="1.0" encoding="utf-8"?>
            <fragment xmlns:android="http://schemas.android.com/apk/res/android"
                      android:id="@+id/map"
                      android:layout_width="match_parent"
                        android:layout_height="match_parent"
                      android:name="com.google.android.gms.maps.MapFragment"/> 
```

我在 GoogleMap.java 中的 setcontentView 方法

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_map);
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:13:30.247

到目前为止，我可以看到您所做的一些错误：

**1.**首先，如果您的 min SDK 是 V8，那么您必须使用`SupportMapFragment`and `FragmentActivity`objects 而不是`MapFragment`and `Activity`object。当然，您还需要将`google_support-v4`库的引用添加到您的项目中，因此对于映射 XML 文件，您应该编写：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:name="com.google.android.gms.maps.SupportMapFragment"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

**2.**其次，看起来你定义了错误的方式，而不是：

```
<meta-data
    android:name="com.google.android.gms.maps.MapFragment"
    android:value="AIzaSyBPQPMrlJk-Ft48z0CWvpWBRcLyrIJJ4X4"/> 
```

你应该写：

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBPQPMrlJk-Ft48z0CWvpWBRcLyrIJJ4X4" /> 
```

**3.**接下来，你使用的权限不正确，而不是：

```
 <permission
       android:name="com.example.gogplemap.GOOGLEMAP"
       android:protectionLevel="signature"
       ></permission>
    <uses-permission android:name="com.example.gogplemap.GoogleMap"/> 
```

添加这个：

```
<permission android:name="your.application.package.permission.MAPS_RECEIVE"    android:protectionLevel="signature"/>
<uses-permission android:name="your.application.package.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

在您的情况下，不要忘记将您的应用程序包而不是“your.application.package”字符串放在前两个权限`"com.example.gogplemap"`中。

你可以从我写的关于这个主题的博客文章中获得更多信息：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:54:09.443

像这样尝试：它会为你工作！

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

活动：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
    }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidmapview"
    android:versionCode="1"
    android:versionName="1.0" >

   <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.androidmapview.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.androidmapview.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.androidmapview.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="*********************************uw"></meta-data>
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
</manifest> 
```

# ruby-on-rails - 有条件地包含带有 RABL 的子节点

> ID：15651121
> 
> 赞同：6
> 
> 时间：2013-03-27T02:49:52.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, one-to-many, restful-architecture, rabl

当我使用 rabl 为标准 RESTful 控制器方法返回 JSON 时，我认为我有一个非常基本的情况......

首先假设我与父母和孩子有典型的一对多关系（假设客户和帐户）：

```
class Customer < ActiveRecord::Base
  has_many :accounts
end 
```

在我的客户控制器中，我有索引和编辑 - 索引我只想返回所有客户（没有帐户）并编辑我想返回特定客户及其所有帐户的位置。由于明显的性能（N + 1）原因，我不想使用索引返回帐户。

在我的 rabl 中，我有以下内容：

```
#index.rabl (for listing all customers)
collection :@customers
extends "customers/_customer" 
```

和

```
#edit.rabl (for editing a single customer)
object :@customer
extends "customer/_customer" 
```

我正在为索引和编辑重用 _customer.rabl。

```
#_customer.rabl
object :@customer
attributes :name, ......

if @include_accounts
  child :accounts do
    extends "accounts/_account"
  end
end 
```

我在我的编辑（控制器）中设置了@include_accounts，而不是索引——但这不起作用——基本上这里的实例变量（@include_accounts）永远不会被传递下去。实现这个的正确模式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:52:24.247

尽管 rails-rabl gem 声称它更快，但我发现模板对于条件表达式并不灵活 - 请参阅 rabl-rails 自述文件：实例变量。

# javascript - 正则表达式有些奇怪

> ID：15651125
> 
> 赞同：4
> 
> 时间：2013-03-27T02:50:28.093
> 
> 标签：javascript

假设我有以下正则表达式代码：

```
var str = "{$ for ( var i = 0, len = O.length; i < len; i++ ) { $}";

var reg = /\{\$(.*?)\$\}/g;

console.log(reg.test(str));

console.log(reg.test(str));

console.log(reg.test(str)); 
```

为什么结果是真假交替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:04:52.147

Per [docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test):

> When you want to know whether a pattern is found in a string use the test method (similar to the String.search method); for more information (but slower execution) use the exec method (similar to the String.match method). As with exec (or in combination with it), **test called multiple times on the same global regular expression instance will advance past the previous match.**

To illustrate what's happening, we can use [`exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec) and see what's happening. In order of passes:

1.  *original string* (truthy)
    The entire string is matched which is evaluated as true.
2.  `null` (falsy)
    Consecutive calls continue on, so since the first called returned the entire result, we are left with `null`.
3.  *original string* (truthy)
    And the pattern returns back to start and continues on.

For proof, [run the following](http://jsfiddle.net/qHwvS/):

```
var str = '{$ for ( var i = 0, len = O.length; i < len; i++ ) { $}';
var reg = /\{\$(.*?)\$\}/g;
for (var i = 0; i < 3; i++){
    var result = reg.exec(str);
    console.log(result);
    console.log(!!result);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:05:01.297

JavaScript `RegExp`s [maintain state](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp#RegExp_instances-Properties) internally, including fields such as the last index matched. Because of that, you can see some interesting behavior when reusing a regex as in the example you give.

The `/g` flag would cause it to return `true` once for each successive match against the given string (of which there only happens to be one in your example), after which it would return `false` once and then start all over again. Between each call, the aforementioned `lastIndex` property would be updated accordingly.

Consider the following:

```
var str = "12";
var regex = /\d/g;

console.log(regex.test(str)); // true
console.log(regex.test(str)); // true
console.log(regex.test(str)); // false 
```

Versus:

```
console.log(/\d/g.test(str)); // true
console.log(/\d/g.test(str)); // true
console.log(/\d/g.test(str)); // true
console.log(/\d/g.test(str)); // true
// ...and so on, since you're instantiating a new RegExp each time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:04:10.983

Interesting find! I believe it has something to do with your global modifier '/g'. When you remove the global modifier it seems to work as expected. I'm no regex expert; I could only presume that the .test() could be iterating over the $ symbols even though it shouldn't match twice.

# python - 在这个 Semaphore 示例中，是否需要锁定 refill() 和 buy()？

> ID：15651128
> 
> 赞同：2
> 
> 时间：2013-03-27T02:50:43.810
> 
> 标签：python, python-3.x

在这个 Semaphore 示例中，是否需要锁定 refill() 和 buy() ？

这本书说：当虚拟自动售货机的所有者来向库存中添加一件物品时，执行 refill() 函数。整个例程代表一个关键部分；这就是为什么获取锁是执行所有行的唯一方法。

但我认为没有必要锁定 refill() 和 buy() 你的意见呢？

```
#!/usr/bin/env python

from atexit import register
from random import randrange
from threading import BoundedSemaphore, Lock, Thread
from time import sleep, ctime

lock = Lock()
MAX = 5
candytray = BoundedSemaphore(MAX)

def refill():
   # lock.acquire()
    try:
        candytray.release()
    except ValueError:
        pass
    #lock.release()

def buy():

    #lock.acquire()
    candytray.acquire(False)
    #lock.release()

def producer(loops):
    for i in range(loops):
        refill()
        sleep(randrange(3))

def consumer(loops):
    for i in range(loops):
        buy()
        sleep(randrange(3))

def _main():
    print('starting at:', ctime())
    nloops = randrange(2, 6)
    print('THE CANDY MACHINE (full with %d bars)!' % MAX)
    Thread(target=consumer, args=(randrange(nloops, nloops+MAX+2),)).start() # buyer
    Thread(target=producer, args=(nloops,)).start() # vendor

@register
def _atexit():
    print('all DONE at:', ctime())

if __name__ == '__main__':
    _main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:20:51.397

锁是绝对必要的。如果您稍微更改代码以打印每次生产者/消费者调用后剩余的糖果数量，也许会有所帮助。替换了信号量，因为它所做的只是保持计数。

我添加了

```
numcandies = 5 
```

补充：

```
def refill():
    global numcandies
    numcandies += 1
    print ("Refill: %d left" % numcandies) 
```

购买：

```
def buy():
    global numcandies
    numcandies -= 1
    print("Buy: %d left" %numcandies) 
```

这是没有锁的输出（显示数据竞争问题）。

```
('starting at:', 'Tue Mar 26 23:09:41 2013')
THE CANDY MACHINE (full with 5 bars)!
Buy: 4 left
Refill: 5 left
Refill: 6 left
Buy: 5 left
Buy: 4 left
Buy: 3 left
Refill: 6 left
Refill: 7 left
Buy: 6 left
('all DONE at:', 'Tue Mar 26 23:09:43 2013') 
```

在调用 of`producer`和实际更新`numcandies`计数器之间的某个地方，我们连续调用了 2 次`consumer`.

如果没有锁定，就无法控制谁实际修改计数器的顺序。所以在上面的例子中，即使`numcandies`更新为 3 buy `consumer`，`producer`仍然有一个 5 的本地副本。更新后，它将 counter 设置为 6，这是完全错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:14:23.773

当然它是关键部分 - 你必须锁定它。取消注释那些注释行。

`candytray`是线程挣扎的资源。有关于任务独立性的规则：如果两个任务没有相同的域并且第一个域不等于第二个域并且第二个域不等于第一个域，则它们是独立的。这意味着，两个任务只能从一个内存/变量/等中读取。

在您的情况下，如果`candytray`实现为某个队列，则不需要锁定，因为“写入器”将数据放在左侧，而“读取器”从右侧读取。因此，它们的域和共域不相等，并且该任务是独立的。但是，如果不是队列，如果是一些，比如说堆，那么作者的域会干扰读者的域。它们是依赖的，你需要锁定。

# 编辑

如您所见，我是从理论方面讲的，而不是 Python 方面。但我猜你想要那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:17:13.550

来自 Wesley Chun 的《*Core Python Applications Programming* 》一书的[原始代码](http://my.safaribooksonline.com/book/programming/python/9780132779371/multithreaded-programming/ch04lev1sec7)如下所示：

 *```
def refill():
    lock.acquire()
    print 'Refilling candy...',
    try:
        candytray.release()
    except ValueError:
        print 'full, skipping'
    else:
        print 'OK'
    lock.release()

def buy():
    lock.acquire()
    print 'Buying candy...',
    if candytray.acquire(False):
        print 'OK'
    else:
        print 'empty, skipping'
    lock.release() 
```

如果没有`lock`，打印语句可能会交织成难以理解的输出。例如，假设糖果盘已满。然后假设有一个调用，`refill`然后是一个调用，`buy`使得代码行按此顺序执行（没有锁）：

```
print 'Refilling candy...',

print 'Buying candy...',    

try:
    candytray.release()

if candytray.acquire(False):
    print 'OK'

except ValueError:
    print 'full, skipping' 
```

输出将如下所示：

```
 # we start with 5 candy bars (full tray)
Refilling candy... # oops... tray is full
Buying candy...    
OK                 # So now there are 4 candy bars
full, skipping     # huh? 
```

那没有意义，所以需要锁。*

# google-plus - 使用 API 保存、删除和管理 Google Hangout 视频通话？

> ID：15651133
> 
> 赞同：0
> 
> 时间：2013-03-27T02:51:11.783
> 
> 标签：google-plus

我想知道，我们是否可以使用 API 保存、删除和管理 Google+ 环聊视频通话？如果是，我可以知道哪个 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:56:56.653

这完全取决于您所说的“保存、删除和管理”是什么意思，但通常答案是否定的。

[Hangout API](https://developers.google.com/+/hangouts/)用于在 Hangout 内部运行的应用程序。您可以对视频流进行一些操作，但无法直接访问视频本身。

如果您将其作为环聊直播运行，则可以使用[YouTube 数据 API](https://developers.google.com/youtube/v3/)以您想要的方式管理录音。

# excel - sumifs 使用范围单元格 - 错误 1004

> ID：15651134
> 
> 赞同：0
> 
> 时间：2013-03-27T02:51:18.317
> 
> 标签：excel, range, formula, cells

我需要你的帮助。

如果我正在运行此代码，则不会出现问题（请注意*Sheet1.Range("F2:BL6991")）*

```
Colnumber = Sheet2.Range("A1").End(xlToRight).Column
    'MsgBox (Colnumber)

     For j = 3 To Colnumber

        For i = 2 To Rownumber
        Sheet2.Cells(i, j).Value = Application.WorksheetFunction.SumIfs(Sheet1.Range("F2:BL6991"), Sheet1.Range("E2:E6991"), Sheet2.Cells(i, 1))

        Next i

    Next j 
```

但是当我尝试更改此代码时：（我将代码从 *Sheet1.Range("F2:BL6991") 更改为 Sheet1.Range(cells(2,j+3), cells(6991, j+3))）*

```
Colnumber = Sheet2.Range("A1").End(xlToRight).Column
        'MsgBox (Colnumber)

         For j = 3 To Colnumber

            For i = 2 To Rownumber
            Sheet2.Cells(i, j).Value = Application.WorksheetFunction.SumIfs(Sheet1.Range(cells(2,j+3), cells(6991, j+3)) , Sheet1.Range("E2:E6991"), Sheet2.Cells(i, 1))

            Next i

        Next j 
```

它给了我错误1004。

即使我使用了这段代码，它也给了我错误：

```
Sheet1.Range(cells(2,6), cells(6991, 6)) 
```

或者

```
Sheet2.Cells(i, j).Value = varResult
        varResult = Application.WorksheetFunction.SumIfs( _
                        Arg1:=Sheet1.Range(Cells(2, 6), Cells(6991, 6)), _
                        Arg2:=Sheet1.Range("E2:E6991"), _
                        Arg3:=Sheet2.Cells(i, 1)) 
```

你能指导我哪里做错了以及如何解决它吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:27:51.593

您的主要问题是 SUMIF 仅包含 3 个参数：

```
SUMIF(range, criteria, [sum_range]) 
```

这将起作用：

```
Dim Range1 As Range
Dim Condition As Range

Set Range1 = Worksheets("Sheet1").Range("F2:BL6991")

Colnumber = Sheet2.Range("A1").End(xlToRight).Column
For j = 3 To Colnumber
    For i = 2 To 10
        Set Condition = Worksheets("Sheet2").Cells(i, 1)
        Sheet2.Cells(i, j).Value = Application.WorksheetFunction.SumIf(Range1, Condition)
    Next i
Next j 
```

# jquery - 向两台服务器提交表单

> ID：15651139
> 
> 赞同：4
> 
> 时间：2013-03-27T02:51:48.940
> 
> 标签：jquery, ruby-on-rails, same-origin-policy, mechanicalturk

我希望能够将表单提交到两个服务器。这就是原因（如果有更好的方法，我会全力以赴）

我有一个嵌入机械土耳其人的 iframe。iframe 中有一个表单。

当工作人员提交表单时，我需要做两件事：

我需要通知我的本地服务器，以便我可以立即采取一些措施。我需要将结果发布到 mturk，以便 turk 显示下一个工作。

如果我不这样做，我的服务器需要轮询 turk 以完成工作，这是低效的。

我尝试了多种方案，但无法让它们发挥作用。

我尝试使用 ajax 在本地发布一篇文章，然后提交一份表单，使用如下代码：

```
<%= form_for(@task, :url => "http://workersandbox.mturk.com/mturk/externalSubmit", 
:remote => true, :method => "post", :authenticity_token => false) do |f| %>

.... 
```

在我不显眼的 js 文件中

```
$(form).post({url: "/notify",opt, function() {console.log("notify done")}); 
```

这会导致js错误

```
XMLHttpRequest cannot load http://workersandbox.mturk.com/mturk/externalSubmit. Origin http://mytest.herokuapp.com is not allowed by Access-Control-Allow-Origin. 
```

我无法控制服务器，因此无法解决此问题。

任何关于这样做的正确方法的建议都将被感激地接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:45:27.293

使用 jQuery 很容易做到这一点。本质上，如果您使用该`.serialize()`方法，您可以将数据发布到任意数量的地方。

假设您有这样的表格：

```
<form>
    <input type="text" id="field1" name="field1" value="abc123" />
    <input type="text" id="field2" name="field2" value="def456" />
    <input type="submit" value="Submit" />
</form> 
```

您可以使用以下 jQuery 代码执行 POST

```
$(function() {
    $('form').submit(function() {
        var data = $(this).serialize();

        $.post("http://www.location1.com/somePlace/", data, function() { });
        $.post("http://www.location2.com/anotherPlace/", data, function() { });

        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:25:40.283

我决定我想这一切都错了。我不应该尝试提交表单两次。相反，我只提交给土耳其人，并使用他们的通知服务使用 SQS（[http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/Concepts_NotificationsArticle.html](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/Concepts_NotificationsArticle.html)）来获得服务器上更改的通知

# javascript - 你如何让 $this 的引导程序的属性/属性用作参数

> ID：15651141
> 
> 赞同：2
> 
> 时间：2013-03-27T02:51:58.850
> 
> 标签：javascript, twitter-bootstrap, javascript-objects

我如何获取 twitter 引导参数值的弹出框的 this 属性，就像我需要获取列表项属性，即要在引导弹出框标题中使用的 data-boothtype 一样？数据标题是不够的

**HTML**

```
<li class="booth" data-boothnumber="46" data-boothtype="prime" style="left: 240px; top: 30px;">46</li> 
```

**JS**

```
$('.booth').popover({title: this.data-boothtype + "'s Booth", content: "test", placement: "right", callback:function(){ console.log(this)}}); 
```

PS：回调函数是[使用twitter bootstrap创建工具提示/弹出框后回调函数的测试单元？](https://stackoverflow.com/questions/14694930/callback-function-after-tooltip-popover-is-created-with-twitter-bootstrap)

```
$.fn.popover.Constructor.prototype.show = function () {
  tmp.call(this);
  if (this.options.callback) {
    this.options.callback();
  }
} 
```

**编辑** 确定这里缩小：http: [//jsfiddle.net/tHHQ6/](http://jsfiddle.net/tHHQ6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:19:41.767

你需要做

```
$('.booth').each(function(i, v){
    var $el = $(v);
    $el.popover({
        title: 'test' + $el.data('boothnumber'), 
        content: "test", 
        placement: "right"
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/tHHQ6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:56:01.253

使用 JQuery，您可以执行以下操作：

```
$('.booth').data('boothnumber') 
```

有关.data() api，请参见[此处](http://api.jquery.com/jQuery.data/)

# c# - ContextMenu 中的 CommandBinding

> ID：15651143
> 
> 赞同：3
> 
> 时间：2013-03-27T02:52:48.267
> 
> 标签：c#, wpf, contextmenu, hierarchicaldatatemplate, commandbinding

我有一个 TreeView 并创建了一个基本的 TreeItem 类型。每个 TreeItem 都有一个标题、一个用于子项的 TreeItem 集合和一个用于可能的上下文菜单的集合。TreeItem 类具有这些对象：

```
public delegate void dExecute(TreeItem item);

public dExecute ExecuteTarget { get; set; }
public object Tag { get; set; }
public string Header { get; set; }
public List<TreeItem> Children { get; set; }
public List<TreeItem> ContextMenu { get; set; } 
```

上下文菜单再次使用 HierarchicalDataTemplate 来显示 TreeItem 对象（我将 TreeItem 类用于树视图和上下文菜单中的项目）。上下文菜单如下所示：

```
<ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}" Visibility="{Binding ShowContextMenu}" ItemsSource="{Binding ContextMenu}">
    <ContextMenu.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Header}"  />
            <HierarchicalDataTemplate.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Command" Value="{Binding Execute}"/>
                </Style>
            </HierarchicalDataTemplate.ItemContainerStyle>
        </HierarchicalDataTemplate>
    </ContextMenu.ItemTemplate>
</ContextMenu> 
```

上下文菜单按我想要的方式呈现。我创建了一个上下文菜单，我只是将它附加到树视图中的一些项目上。这是它的内容。

```
public List<TreeItem> ContextMenu
{
    get
    {
        List<TreeItem> list = new List<TreeItem>();
        TreeItem ti = new TreeItem("Some Action") { ExecuteTarget = targetMethod};
        list.Add(ti);
        ti = new TreeItem("test");
        ti.Children.Add(new TreeItem("foo") { ExecuteTarget = targetMethod});
        ti.Children.Add(new TreeItem("bar") { ExecuteTarget = targetMethod});
        ti.Children.Add(new TreeItem("foo") { ExecuteTarget = targetMethod});
        TreeItem ti2 = new TreeItem("inner"){ ExecuteTarget = targetMethod};
        ti.Children.Add(ti2);
        ti2.Children.Add(new TreeItem("foo") { ExecuteTarget = targetMethod});
        list.Add(ti);
        return list;
    }
} 
```

上下文菜单如下所示。

![渲染的上下文菜单](../Images/8b4646a6bcfacfdbf3fa729b5add8c49.png)

它看起来应该是这样。这些命令按应有的方式工作。上下文菜单最高级别的命令除外。当我单击“某些操作”时，没有任何反应。我假设我必须向 XAML 添加一些内容，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:16:21.880

```
<ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}" Visibility="{Binding ShowContextMenu}" ItemsSource="{Binding ContextMenu}">
    <ContextMenu.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Header}"  />
            <HierarchicalDataTemplate.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Command" Value="{Binding Execute}"/>
                </Style>
            </HierarchicalDataTemplate.ItemContainerStyle>
        </HierarchicalDataTemplate>
    </ContextMenu.ItemTemplate>

    <!-- this is what you're missing -->
    <ContextMenu.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Setter Property="Command" Value="{Binding Execute}"/>
        </Style>
    </ContextMenu.ItemContainerStyle>
</ContextMenu> 
```

# uicollectionview - 给 UICollectionViewCell 一个绝对位置

> ID：15651149
> 
> 赞同：0
> 
> 时间：2013-03-27T02:54:01.027
> 
> 标签：uicollectionview, uicollectionviewcell, uicollectionviewlayout

是否可以控制 a 的布局`UICollectionViewCell`以使其具有绝对 x 或 y 位置？

我想`UICollectionView`在表格的每一行中使用 , 来创建一个简单的 5 天日历。目前我只是在单元格中定位一组具有绝对 x 值的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:52:04.407

是的，但您需要子类化`UIcollectionViewLayout`.

[本教程](http://skeuo.com/uicollectionview-custom-layout-tutorial)帮助我解决问题。

# awk - AWK - 打印输入文件每行的倒数第二个字段

> ID：15651150
> 
> 赞同：5
> 
> 时间：2013-03-27T02:54:11.063
> 
> 标签：awk, field

我有一个输入文件文件，其内容不断更新不同数量的字段，我试图将输入文件每行的最后一个字段的下一个字段打印到一个新文件：awk'{print $( NF-1)}' 输出文件

错误：和 awk：(FILENAME=- FNR=2) 致命：尝试访问字段 -1

需要帮忙。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T02:57:47.103

在没有字段的行（空白行或所有空格）`NF`上为 0，因此计算结果为`$(-1)`. 此外，如果只有一个字段，您的代码将打印出来`$0`，这可能不是您想要的。

```
awk 'NF>=2 {print $(NF-1)}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T05:00:11.283

应该`awk 'NF > 1 { print $(NF - 1); }'`

`awk 'NF { print $(NF - 1) }'`是不正确的。什么`NF == 1`时候打印`$0`哪个不在**最后一个字段旁边**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T11:22:55.163

另一条 awk 行：（打高尔夫球）：

```
awk 'NF>1&&$0=$(NF-1)' 
```

# r - 为什么我不能在 data.frame 中的一系列列上使用聚合和 cbind？

> ID：15651153
> 
> 赞同：1
> 
> 时间：2013-03-27T02:54:17.513
> 
> 标签：r, aggregate, cbind

我正在处理的 20 行数据：

```
Zv9_NA110   6176    7276    5'to3'IntronExon    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA110   10126   11226   5'to3'IntronExon    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   7   9   9   15  18  18  18  18  18  18  18  18  18  18  18  18  18  18  18  18  18  18  13  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA110   11219   12319   5'to3'ExonIntron    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA110   14887   15987   5'to3'IntronExon    0   +   1100    1 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   7   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9
Zv9_NA110   18923   20023   5'to3'IntronExon    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA110   21069   22169   5'to3'ExonIntron    0   +   1100    0 135   115 65  54  45  36  27  16  9   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA113   1615    2715    5'to3'IntronExon    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA113   2335    3435    5'to3'ExonIntron    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   7   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   3   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA113   5398    6498    5'to3'IntronExon    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA113   7173    8273    5'to3'ExonIntron    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA118   11674   12774   5'to3'IntronExon    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA118   12711   13811   5'to3'ExonIntron    0   +   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA123   38151   39251   5'to3'ExonIntron    0   -   1100    0 1061  958 844 796 695 600 464 346 265 210 150 133 94  81  72  46  18  4   0   0   0   0   0   0   0   0   0   7   9   9   9   11  21  35  43  58  91  108 180 268 406 547 712 833 882 960 1094    1172    1245    1331    1432    1510    1604    1711    1810    1830    1837    1823    1781    1690    1638    1560    1489    1257    854 731 631 589 551 497 439 404 369 301 231 168 123 76  58  50  42  28  20  11  9   9   24  27  27  27  27  27  25  18  18  18  18  18  18  18  18  18  18  18  18  18  14  5   0   0
Zv9_NA124   2578    3678    5'to3'ExonIntron    0   +   1100    0 423   407 401 377 357 345 324 304 249 185 111 54  30  12  0   0   0   0   0   0   0   0   0   0   0   0   0   1   9   9   9   9   14  18  25  27  27  27  27  27  27  27  27  27  27  27  26  18  18  18  18  18  18  16  4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   8   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   9   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA129   4939    6039    5'to3'IntronExon    0   +   1100    226 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   4   9   9   9   9   9   9   9   9   9   9   9   9   14  34  45  60  97  128 175 293 395 524 621 764 894 1036    1164    1334    1469    1639    1801    1885    1983
Zv9_NA132   12589   13689   5'to3'ExonIntron    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA132   13634   14734   5'to3'IntronExon    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA132   14481   15581   5'to3'ExonIntron    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   5   9   9   9   9   9   9   9   9   9   5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA132   19534   20634   5'to3'IntronExon    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
Zv9_NA132   28708   29808   5'to3'ExonIntron    0   -   1100    0 0 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   5   9   15  18  24  27  42  46  73  112 142 157 162 162 162 162 162 162 162 162 159 153 153 153 153 153 150 144 132 112 76  52  30  25  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
```

我按如下方式将其放入 R 中：

```
> dat <- read.table("dat.dat",header=F) 
```

我需要得到第 9 到 118 列的平均值，由第 4 列解析。

这有效：

```
> all_means <- aggregate(cbind(V9,V10,V11)~V4,data=dat,FUN=mean)

                V4 V9  V10 V11
1 5'to3'ExonIntron  0 0.00   0
2 5'to3'IntronExon  0 0.75   1 
```

但是我不可能把它输入到 V118。

我试过这个：

```
> aggregate(cbind(9:118)~V4,data=blah,FUN=mean) 
```

但我得到这个错误：

```
Error in model.frame.default(formula = cbind(9:118) ~ V4, data = blah) : 
  variable lengths differ (found for 'V4') 
```

我错过了什么愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:01:14.987

你有很多选择。

`.`使用并传递数据的子集创建公式

```
aggregate( . ~ V4, data = dat[,c(4,9:118)], FUN = mean) 
```

您还可以使用创建列名向量`paste`

```
nn <- paste0('V', 9:118) 
```

并按列名引用

```
aggregate( . ~ V4, data = dat[,c('V4',nn)], FUN = mean) 
```

考虑到公式方法有效，在这里使用没有多大意义`cbind`，但是例如。

```
aggregate( do.call(cbind,lapply(nn, as.name)) ~ V4, data = dat, FUN = mean) 
```

但这很混乱，因为它不能很好地命名列。（而且很难理解）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T03:11:15.307

如果速度通常是一个问题（此操作不是必需的）并且您想使用该`data.table`包，请按如下方式完成：

**更安全的解决方案**

感谢 mnel 的评论，我会使用它：

```
library(data.table)
dat <- as.data.table(dat)
dat[,lapply(.SD,mean),by="V4",.SDcols=paste0("V", 9:118)] 
```

**旧解决方案**

```
dat[,lapply(.SD,mean),by="V4",.SDcols=9:118] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:03:47.077

您可以使用

```
## S3 method for class 'data.frame'
aggregate(x, by, FUN, ..., simplify = TRUE) 
```

假设您的数据在数据框中`DF`

```
DF <- read.table(text = txt, header = FALSE, stringsAsFactors = FALSE)
result <- aggregate(DF[, 9:118], by = list(DF[, 4]), FUN = mean)

# Using pander to print result table nicely. It's not needed for aggregation :)
require(pander)
pandoc.table(result)
## 
## ----------------------------------------------------
##     Group.1       V9    V10   V11   V12   V13   V14 
## ---------------- ----- ----- ----- ----- ----- -----
## 5'to3'ExonIntron 161.9  148   131  122.7 109.7 98.1 
## 
## 5'to3'IntronExon  0.0    0     0    0.0   0.0   0.0 
## ----------------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V15   V16   V17   V18   V19   V20   V21   V22 
## ----- ----- ----- ----- ----- ----- ----- -----
## 81.5  66.6  52.3  39.5  26.1  18.7  12.4   9.3 
## 
##  0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V23   V24   V25   V26   V27   V28   V29   V30 
## ----- ----- ----- ----- ----- ----- ----- -----
##  7.2   4.6   1.8   0.4    0     0     0    0.5 
## 
##  0.0   0.0   0.0   0.0    0     0     0    0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V31   V32   V33   V34   V35   V36   V37   V38 
## ----- ----- ----- ----- ----- ----- ----- -----
##  0.9   1.5   1.8   2.4   2.7    5    6.4   9.1 
## 
##  0.0   0.0   0.0   0.0   0.0    0    0.0   0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V39   V40   V41   V42   V43   V44   V45   V46 
## ----- ----- ----- ----- ----- ----- ----- -----
##  13   16.2  19.2  21.5   23   24.7   28   29.7 
## 
##   0    0.0   0.0   0.0    0    0.0    0    0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V47   V48   V49   V50   V51   V52   V53   V54 
## ----- ----- ----- ----- ----- ----- ----- -----
## 36.9  45.7  59.5  73.3  89.2  101.3 106.2  114 
## 
##  0.0   0.0   0.0   0.0   0.0   0.0   0.0    0  
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V55   V56   V57   V58   V59   V60   V61   V62 
## ----- ----- ----- ----- ----- ----- ----- -----
## 127.3  134  140.7 148.1 156.2 160.4 167.4 175.7
## 
##  0.0    0    0.0   0.0   0.0   0.0   0.0   0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V63   V64   V65   V66   V67   V68   V69   V70 
## ----- ----- ----- ----- ----- ----- ----- -----
## 183.9 183.1 183.7 182.3 178.1  169  163.8 156.7
## 
##  0.0   0.0   0.0   0.0   0.0    0    0.0   0.0 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V71   V72   V73   V74   V75   V76   V77   V78 
## ----- ----- ----- ----- ----- ----- ----- -----
## 149.8 126.6 86.3  74.0  64.0  59.8  56.0  50.6 
## 
##  0.7   0.9   0.9   1.5   1.8   1.8   1.8   1.8 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V79   V80   V81   V82   V83   V84   V85   V86 
## ----- ----- ----- ----- ----- ----- ----- -----
## 45.6  42.2  38.7  31.9  24.9  18.6  14.1   9.4 
## 
##  1.8   1.8   1.8   1.8   1.8   1.8   2.2   2.7 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V87   V88   V89   V90   V91   V92   V93   V94 
## ----- ----- ----- ----- ----- ----- ----- -----
##  7.6   6.2   5.1   3.7   2.9   2.5   2.7   2.7 
## 
##  2.7   2.7   2.7   2.7   2.7   2.7   2.2   0.9 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## --------------------------------------------------
##  V95   V96   V97   V98   V99   V100   V101   V102 
## ----- ----- ----- ----- ----- ------ ------ ------
##  4.2   4.5   4.5   4.5   4.5   4.5    4.3    2.5  
## 
##  0.9   0.9   0.9   1.4   4.1   5.4    6.9    10.6 
## --------------------------------------------------
## 
## Table: Table continues below
## 
##  
## -------------------------------------------------------
##  V103   V104   V105   V106   V107   V108   V109   V110 
## ------ ------ ------ ------ ------ ------ ------ ------
##  1.8    1.8    1.8    1.8    1.8    1.8    1.8    1.8  
## 
##  13.7   18.4   30.2   40.4   53.3   63.0   77.3   90.3 
## -------------------------------------------------------
## 
## Table: Table continues below
## 
##  
## -------------------------------------------------------
##  V111   V112   V113   V114   V115   V116   V117   V118 
## ------ ------ ------ ------ ------ ------ ------ ------
##  1.8    1.8    1.8    1.8    1.4    0.5    0.0    0.0  
## 
## 104.5  117.3  134.3  147.8  164.8  181.0  189.4  199.2 
## -------------------------------------------------------
## 
```

# ios - 带有 ZXing 错误的 Cocoa 静态库

> ID：15651155
> 
> 赞同：0
> 
> 时间：2013-03-27T02:54:18.840
> 
> 标签：ios, static-libraries, zxing

我的项目使用了一些 Cocoa 静态库，其中一个是 Zxing 项目。我在尝试合并这个项目时遇到了很多错误。奇怪的是，我能够在一个单独的项目中使用 Zxing 创建一个演示，没有任何错误。只要我不包含 Zxing 的 Cocoa 静态库，我的主要项目就可以构建并运行。

那么问题来了，如何将 ZXing 静态库包含到我的 Cocoa 项目中？如何配置库（例如如何设置标题搜索路径~~）。

谢谢。

关于我的项目的一些细节

结构

EnjoyMobile -CustomStaticLibrary.xcodeproj -ZXingWidegt.xcodeproj

我的 -CustomStaticLibrary 目标中的标题搜索路径 ./zxing/iphone/ZXingWidget/Classes ./zxing/cpp/core/src

错误

```
Undefined symbols for architecture i386: 
```

“_OBJC_CLASS_$_QRCodeReader”，引用自：libCustomerLibrary.a(CustomerViewController.o) 中的 objc-class-ref：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 到见调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:15:52.437

它没有看到一些 lib 类。仔细检查 README 中的步骤，尤其是第 2 步。如果仍然失败，请发布失败的链接命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:11:46.023

Zxing 是一种痛苦的集成，在新版本的 Xcode Apple 中也添加了更多的错误检查。我建议您使用 cococapods 进行更好的集成或这里的 ObjectiveC 包装[器](https://github.com/TheLevelUp/ZXingObjC)

# javascript - jquery 1.8.3升级后javascript在IE和Firefox中不起作用

> ID：15651168
> 
> 赞同：0
> 
> 时间：2013-03-27T02:56:00.550
> 
> 标签：javascript, jquery, firefox

我已经从 jquery 1.7 更新到 jquery 1.8.3（在所有浏览器中一切正常），但是我安装了一个需要 jquery 1.8.2 或 1.8.3 的 javascript

现在，此页面上的 javascript 图像调整大小在 IE 10 和 Firefox 中不起作用，在 Chrome 和 Safari 中它可以正确调整图像大小。

Firefox 中没有 javascript 错误，所以我不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:59:06.333

> HTML1513：`<html>`发现额外的“”标签。每个文档只能`<html>`存在一个“”标签。
> albert-einstein-physicist-you-have-to-learn-the-rules-of-the-game-and-then-you-have, 第 9 行字符 5
> 
> HTML1513：`<html>`发现额外的“”标签。每个文档只能`<html>`存在一个“”标签。
> albert-einstein-physicist-you-have-to-learn-the-rules-of-the-game-and-then-you-have, 第 11 行字符 9
> 
> HTML1517：无效的嵌套。一个“ `<form>`”标签不应放置在另一个“ `<form>`”中。
> albert-einstein-physicist-you-have-to-learn-the-rules-of-the-game-and-then-you-have，第 120 行字符 41
> 
> HTML1508：不匹配的结束标记。
> albert-einstein-physicist-you-have-to-learn-the-rules-of-the-game-and-then-you-have，第 125 行字符 41
> 
> HTML1409：属性名称字符无效。属性名称不应包含 (")、(')、(<) 或 (=)。
> albert-einstein-physicist-you-have-to-learn-the-rules-of-the-game-and-then-你有，第 249 行字符 55

这些可能没有帮助。但无论如何，看起来您需要做的就是`max-width/min-width`将图像上的属性更改为`width:100%`.

# typescript - 打字稿在保存时编译为单个文件

> ID：15651172
> 
> 赞同：15
> 
> 时间：2013-03-27T02:56:02.130
> 
> 标签：typescript

我正在使用 TypeScript 0.8.3 并尝试[在保存时进行编译](http://typescript.codeplex.com/wikipage?title=Compile-on-Save)。

我的设置有点不同，但它应该真的可以工作。请记住，当我构建项目时它工作正常，而不是保存：

显然第一件事：**工具 > 选项 > 文本编辑器 > TypeScript > 项目 > 保存时编译设置为“自动编译作为项目一部分的 TypeScript 文件”**

然后在我的 .csproj 文件中

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
    <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
    <TypeScriptGeneratesDeclarations>false</TypeScriptGeneratesDeclarations>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
    <TypeScriptOutFile>application.js</TypeScriptOutFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptGeneratesDeclarations>false</TypeScriptGeneratesDeclarations>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
    <TypeScriptOutFile>application.js</TypeScriptOutFile>
  </PropertyGroup>

  <!-- this imports the code below from Microsoft.Typescript.targets -->
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" /> 
```

我改变了 Microsoft.TypeScript.targets 如下：

```
<Target Name="CompileTypeScript">
   <Message Text="Compiling TypeScript files" />
   <Message Text="Creating response file typescriptcompiler.input" />
   <WriteLinesToFile
      File="typescriptcompiler.input"
      Lines="&quot;C:\MyProject\MyProject.Web\Scripts\_references.ts&quot;" <!-- recursively gets individual file paths referenced therein -->
      Overwrite="true"
      Encoding="Unicode"/>

  <Message Text="Executing tsc $(TypeScriptBuildConfigurations) @typescriptcompiler.input" />
  <Exec Command="tsc $(TypeScriptBuildConfigurations) @typescriptcompiler.input" />
  <Delete Files="typescriptcompiler.input"/>
</Target> 
```

然而我仍然需要重建项目来生成我的单曲`application.js`。保存单个文件不起作用。

注意：当尝试一次编译太多文件时，我必须更改 Microsoft.Typescript.targets 以解决 tsc 使用的 WScript 库中的缓冲区错误。基本上解决方法是写入文件然后传递给编译器。

任何想法为什么它不会在保存时重新编译？

Microsoft.Typescript.targets 中有这条线，但它似乎没有做任何事情我尝试删除这两个条件，所以它总是正确的，保存时仍然没有编译。这应该做什么？：

```
<TypeScriptCompileOnSaveEnabled Condition="'$(TypeScriptEnableCompileOnSave)' != 'false' and '$(TypeScriptOutFile)' == ''">true</TypeScriptCompileOnSaveEnabled> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T23:41:49.420

Compile-On-Save 的当前实现不支持指定输出文件名。一旦有了输出文件名，该功能就会被禁用。如果您查看 .targets 文件，则有一个表达相同含义的语句。

```
<TypeScriptCompileOnSaveEnabled Condition="'$(TypeScriptEnableCompileOnSave)' != 'false' and '$(TypeScriptOutFile)' == ''">true</TypeScriptCompileOnSaveEnabled> 
```

这是当前实现中的一个限制，应该在未来的版本中取消。我已经记录了一个错误来跟踪这个：[http ://typescript.codeplex.com/workitem/854](http://typescript.codeplex.com/workitem/854)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-21T00:44:59.470

您可以解决当前 TypeScript IDE 集成的限制，强制 IDE 在保存某些文件或特定文件时调用您的构建目标。

**一步步：**

1.  在 Visual Studio/解决方案资源管理器中选择一个 .ts 文件，该文件应在保存时触发操作；

2.  单击属性面板（F4）；

3.  将**“自定义工具”**属性设置为“**MSBuild:***NameOfYourMSBuildTarget*;

4.  对于这个例子，我们可以使用现有的**CompileTypeScript**目标，定义在文件**Microsoft.TypeScript.targets**中，只要这个文件被导入到项目文件中；

5.  因此，该属性的值将是**MSBuild:CompileTypeScript**，如下图所示：

![在此处输入图像描述](../Images/c6459790fa047a2e21e1163daabda56b.png)

在此示例中，我仅在文件**_references.ts**中定义了此属性，即您的问题中提到的那个。但是您可以在任何您希望的文件中指定自定义工具，这取决于您。

我只是建议您避免在多个文件中指定相同的自定义工具，因为这将是多余的并且会减慢您的 TypeScript 编译过程。

之后，每次保存此文件时，都会触发自定义工具属性中指定的操作。

无论您在工具/选项/文本编辑器/TypeScript 中的 TypeScript 编译器设置如何，并且独立于 WebEssentials，此设置都将起作用。

我希望这可以帮助你！

# c++ - 如何在 C++ 中使用 std::sort？

> ID：15651178
> 
> 赞同：1
> 
> 时间：2013-03-27T02:57:14.930
> 
> 标签：c++, sorting

我正在使用 std::sort 函数`<algorithm>`。[我遵循了http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)中给出的示例。我想使用如下所示的示例：

```
// using default comparison (operator <):
   std::sort (myvector.begin(), myvector.begin()+4); 
```

应用于我的课程，它看起来像这样：

```
std::sort(newTuples->begin(), newTuples->end()); 
```

`newTuples`类型在哪里

```
std::vector<Tuple>* 
```

所以我覆盖了类的`operator<`功能`Tuple`：

```
bool const Tuple::operator<(Tuple * tup1){
    bool result = false;

    for(int iii=0; iii<tup1->size(); iii++){
        if(tup1->at(iii)->getTokensValue() < this->at(iii)->getTokensValue()){
            result = true;
            break;
        }
        else if (tup1->at(iii)->getTokensValue() > this->at(iii)->getTokensValue())
            break;
    }

    return result;

} 
```

问题是当我尝试在 XCode 中构建时，它给了我显示的错误：

![Xcode 错误](../Images/aab27bd566f65f3f95a70dd8c20c6a47.png)

哪个代码片段在`<algorithm>`.

它给了我各种各样的堆栈跟踪，其中一行给了我以下信息：

![xcode错误2](../Images/feee0854a7d406b61792a3d042b1df9c.png)

哪个代码片段在我的`Tuple.h`文件中。

我不知道还能做什么！非常感谢任何帮助，因为我的 CS 课程项目现在晚了 3 天，因为我无法弄清楚这个 LAST 排序算法。我已经用关系和关系操作选择、项目和重命名实现了一个关系数据库管理系统。我有正确格式化这些元组，它们只需要按排序顺序。谢谢！

编辑：

所以我按照答案中的建议更改了声明，但现在它给了我：

![又一个错误](../Images/561db3f023dc868c187ea6763166bad8.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:10:40.530

这将 a`Tuple`与 a进行比较`Tuple*`

```
bool const Tuple::operator<(Tuple * tup1) 
```

你应该把它改成这样：

```
bool Tuple::operator<( const Tuple &tup1 ) const 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:01:11.470

您需要一个`const Tuple*`与`const Tuple*`. 在 Tuple 类中声明：

```
friend bool operator<(const Tuple*, const Tuple*); 
```

并将其实现为常规功能。

* * *

**编辑**

如果你的向量是`std::vector<Tuple>`那么你应该实现：

```
bool Tuple::operator<(const Tuple&) const; 
```

而不是您的指针版本。

# python - 更改字典中条目的类型会引发错误

> ID：15651180
> 
> 赞同：0
> 
> 时间：2013-03-27T02:57:55.343
> 
> 标签：python, python-2.7

```
d = {'today': datetime.today()}
d['today'] = str(d.today)

#AttributeError: 'dict' object has no attribute 'today' 
```

玩弄 python 控制台我发现你不能做上面的事情。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:59:00.347

正如它所说的你没有“今天”属性——“今天”只是字典的一个键。更改您的代码：

```
d = {'today': datetime.today()}
d['today'] = d['today'].strftime(<your format>) 
```

# asp.net - asp.net MVC3 Ninject.Web.Common 的注入提供程序

> ID：15651182
> 
> 赞同：0
> 
> 时间：2013-03-27T02:57:57.033
> 
> 标签：asp.net, asp.net-mvc-3, code-injection

我将 Ninject.Web.Common 安装到我的项目中。(App_Start/NinjectWebCommon.cs)

NinjectWebCommon 未注入自定义提供程序。

```
public class CustomMembershipProvider : MembershipProvider
{
    private IUserRepository userRepository {get; set; } // User Table Db Context. Is injected into the injection I want here.
} 
```

自定义提供程序注入 我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:06:04.497

您必须让 ninject 进行属性注入或构造函数注入。IE

```
public class CustomMembershipProvider : MembershipProvider
{
    private IUserRepository userRepository;

    public CustomMembershipProvider(IUserRepository userRepository)
    {
        this.userRepository = userRepository;
    }
} 
```

或者

```
public class CustomMembershipProvider : MembershipProvider
{
    private IUserRepository userRepository;
    [Inject]
    public IUserRepository UserRepository
    {
        get{return userRepository;}
        set{userRepository = value;}
    }
} 
```

# java - 有没有办法在应用服务器之外执行 EJB？

> ID：15651193
> 
> 赞同：2
> 
> 时间：2013-03-27T02:59:41.367
> 
> 标签：java, ejb, containers

EJB 就像鱼一样，不能在应用服务器提供的功能海洋之外生存。 

但在某些时候，我不需要应用服务器的所有功能：我唯一需要的就是一个 EJB 容器，其他什么都不需要。

因为当我的鱼只需要一小碗水（EJB 容器）时，这就像使用海洋（JBoss、Websphere）或湖泊（Glassfish）。

简而言之，有没有办法专门使用 Java EE 运行 EJB？也许是一个虚拟/本地容器？

以 JAX-WS 为例：它提供了 EndPoint 类，允许您在完全没有任何应用程序服务器的情况下进行发布。它极大地简化了学习的障碍：让您无需设置任何东西或下载额外的 jar 就可以直接开车。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:06:09.583

[OpenEJB](http://openejb.codehaus.org/)是一个小型的、可嵌入的 EJB 容器，它可能正好满足您的需求。

# android - 谷歌地图 API 崩溃

> ID：15651195
> 
> 赞同：1
> 
> 时间：2013-03-27T02:59:52.620
> 
> 标签：android, google-maps, nullpointerexception, itemizedoverlay

我在我的应用程序上使用 google maps API 的第 1 版，顶部有自定义重叠。问题是，在很多情况下，我都会在应用程序上遇到崩溃和强制关闭，我很确定这是由地图引起的。我检查了线程，我意识到我需要使用 populate() 函数。

问题是我不确定在哪里使用它，因为代码不是我最初编写的:(。

```
03-27 10:53:09.440: E/InputEventReceiver(28709): Exception dispatching input event.
03-27 10:53:09.440: E/MessageQueue-JNI(28709): Exception in MessageQueue callback:     handleReceiveCallback
03-27 10:53:09.490: E/MessageQueue-JNI(28709): java.lang.NullPointerException
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.ItemizedOverlay.getItemsAtLocation(ItemizedOverlay.java:617)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.ItemizedOverlay.getItemAtLocation(ItemizedOverlay.java:586)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.ItemizedOverlay.handleMotionEvent(ItemizedOverlay.java:498)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.ItemizedOverlay.onTouchEvent(ItemizedOverlay.java:572)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.OverlayBundle.onTouchEvent(OverlayBundle.java:63)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at com.google.android.maps.MapView.onTouchEvent(MapView.java:681)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.View.dispatchTouchEvent(View.java:7337)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2410)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2145)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2117)
03-27 10:53:09.490: E/MessageQueue-JNI(28709):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416) 
```

这是我的逐项叠加类，它造成了麻烦

```
public class AdvrItemizedOverlay extends ItemizedOverlay<MapOverlayItem> {

protected Vector<AdvrMapItem> mOverlayItems = new Vector<AdvrMapItem>();

protected Bitmap mEmptyMarker = null;

protected Resources mResources = null;

protected Rect mDstRect = new Rect(6, 6, 66, 66);

public AdvrItemizedOverlay(Resources res) {
    super(boundCenterBottom(res.getDrawable(R.drawable.bg_map_mark_adver)));
    mEmptyMarker = BitmapFactory.decodeResource(res, R.drawable.bg_map_mark_adver);
    float density = (float)mEmptyMarker.getWidth() / 72.0f;
    mDstRect.left *= density;
    mDstRect.top *= density;
    mDstRect.right *= density;
    mDstRect.bottom *= density;
    mResources = res;
    performPopulated();
}

@Override
protected MapOverlayItem createItem(int i) {
    AdvrMapItem advrItem = mOverlayItems.get(i);
    MapOverlayItem overlayItem = advrItem.overlayItem();
    Drawable marker = advrItem.mapMarker(mResources, mEmptyMarker, mDstRect);
    if (marker != null)
        overlayItem.setMarker(boundCenterBottom(marker));
    return overlayItem;

}

@Override
public int size() {
    return mOverlayItems.size();
}

public void add(AdvrMapItem userItem) {
    mOverlayItems.add(userItem);
    populate();
}

public void remove(AdvrMapItem item) {
    mOverlayItems.remove(item);
    setLastFocusedIndex(-1);
    populate();
}

public void clear() {
    mOverlayItems.removeAllElements();
    setLastFocusedIndex(-1);
    populate();
}

public void performPopulated() { populate(); } 
```

}

我不确定何时调用构造函数以及放置填充方法的位置。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:43:43.903

你在某个时候给它传递了一个空标记。你需要找出在哪里。您可能还需要考虑更新 - 不仅版本 2 中的 API 更简单，而且他们不再分发新的 v1 api 密钥/

# mysql - MySQL多表user_id不存在查询

> ID：15651198
> 
> 赞同：2
> 
> 时间：2013-03-27T03:00:12.543
> 
> 标签：mysql

我有 3 个这样的表：

```
User table
user_id     first_name     email
1           Bob            bob@bob.com
2           Jane           jane@jane.com
3           Fred           fred@fred.com

Listing
listing_id  user_id        status
1           1              1
2           1              1
3           2              1
4           3              1

User billing
billing_id  user_id        status
1           1              1
2           2              1 
```

用户表包含所有用户信息。列表表包含有关拍卖列表的信息。此表的状态列用于确定列表是活动的还是结束的。计费表具有与用户计费详细信息相关的信息。

所有表都基于 user_id 关联。我要提取的是用户拥有活动列表但尚未输入其帐单详细信息的所有用户信息。所以上表示例的预期结果将是

```
user_id     first_name     email
3           Fred           fred@fred.com 
```

因为 Fred 目前有一个活跃的列表，但尚未填写他的帐单信息。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:12:27.880

你可以试试这样的东西。

```
select * from usertable inner join listing on usertable.user_Id=listing.user_Id 
```

使用它，您可以从这两个表中获取数据。你明白我的意思了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:03:40.597

```
SELECT u.*
FROM User u
INNER JOIN Listing l USING (user_id)
LEFT OUTER JOIN User_billing b USING (user_id)
WHERE b.user_id IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:03:56.560

Try...

```
SELECT user.user_id, user.first_name, user.email 
FROM user 
LEFT JOIN listing ON listing.user_id = user.user_id AND listing.status = 1
WHERE user.user_id NOT IN (SELECT user_id FROM billing) 
```

or...

```
SELECT user.user_id, user.first_name, user.email 
FROM user 
LEFT JOIN listing ON listing.user_id = user.user_id AND listing.status = 1
LEFT JOIN billing ON billing.user_id = user.user_id
WHERE billing.user_id IS NULL 
```

I recommend the second method over the first simply because of the NOT IN and the execution time vs a LEFT JOIN which is much faster and uses less resources

# java - JInternalFrames 监听 JDesktopPane 事件

> ID：15651199
> 
> 赞同：4
> 
> 时间：2013-03-27T03:00:23.733
> 
> 标签：java, mouselistener, jinternalframe, jlayeredpane, jdesktoppane

有什么简单的方法可以让我的 jinternalframes 两全其美

*   当我希望它们充当 jdesktoppane 的一部分时嵌入
*   也可移动并能够处理自己的事件

![在此处输入图像描述](../Images/68b4a51f1ea38aea1b1bb40e5a84198c.png)

希望这张图片能有所帮助。现在我有我的代码可以将项目拖到你的播放器并插入下一个可用的背包槽，但我也希望能够将它拖到任何背包槽，但正如你在下面看到的那样。有什么快速而肮脏的方法来解决这个问题吗？我的 JDesktopPane 顶部有一个面板，用于绘制所有内容（当然除了 jinternalframes 之外）。对不起所有的代码，没有 SSCCEE。只是觉得最好展示我的逻辑。

```
theDesktop.addMouseMotionListener(new MouseMotionListener() {
    @Override
    public void mouseDragged(MouseEvent e) {
        updateMouseCursor(e);
        if (MapGamePanel.draggingItem){
            Point point = e.getPoint();
            MapGamePanel.currentX = point.x;
            MapGamePanel.currentY = point.y;
        }
    }

    @Override
    public void mouseMoved(MouseEvent e) {
        updateMouseCursor(e);
    }
});

theDesktop.addMouseListener(new MouseListener() {
    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getButton() == MouseEvent.BUTTON1){ //left
            int whiteLeftSpace = (theDesktop.getWidth() - xTiles*32)/2;
            boolean inGamePanel = e.getX() > whiteLeftSpace && e.getX() < (xTiles*32 + whiteLeftSpace) && e.getY() < yTiles*32;
            String globalCoords = localToGlobalCoords((e.getX()-whiteLeftSpace)/32 + "," + e.getY()/32);
            if (inGamePanel){
                //looking for tiles with no mobs or players and loot
                String[] globalCoordsSplit = globalCoords.split(",");
                int globalX = Integer.parseInt(globalCoordsSplit[0]);
                int globalY = Integer.parseInt(globalCoordsSplit[1]);
                if ((!(globalX == characterX && globalY == characterY)) && //not under character
                        ((globalX-1) == characterX || globalX == characterX || (globalX+1) == characterX) && //(+/-) 1 xTile
                        ((globalY-1) == characterY || globalY == characterY || (globalY+1) == characterY)){ //(+/-) 1 yTile
                    HashMap <String, String> dropsToDrag = new HashMap <String, String>();
                    Boolean mobPresent = false;
                    Boolean playerPresent = false;
                    if (MapGamePanel.entityInfoHashTable.containsKey(globalCoords)){ //no mobs/npcs
                        mobPresent = true;
                    }
                    Iterator<Entry<String, String>> it = MapGamePanel.entityInfoHashTable.entrySet().iterator();
                    while (it.hasNext()) {
                        Entry<String, String> pairs = it.next();
                        String key = pairs.getKey();
                        if (!key.contains(",") && !key.contains("-")){
                            String[] values = pairs.getValue().split("\\|");
                            String tempCoords = values[0];
                            if (globalCoords.equals(tempCoords)){ //player on spot
                                playerPresent = true;
                            }
                        } else if (key.contains("-")){
                            String[] splitKey = key.split("-");
                            if (splitKey[0].equals(globalCoords)){
                                dropsToDrag.put(key, pairs.getValue());
                            }
                        }
                    }
                    int smallEntityId = Integer.MAX_VALUE; //2147483647
                    if (!mobPresent && !playerPresent && !dropsToDrag.isEmpty()){
                        Iterator<Entry<String, String>> it2 = dropsToDrag.entrySet().iterator();
                        while (it2.hasNext()) {
                            Entry<String, String> pairs = it2.next();
                            String[] keyWithPK = pairs.getKey().split("-");
                            String tmpCoords = keyWithPK[0];
                            String[] coordsSplit = tmpCoords.split(",");
                            int tempX = Integer.parseInt(coordsSplit[0]);
                            int tempY = Integer.parseInt(coordsSplit[1]);
                            int tmpEntityId = Integer.parseInt(keyWithPK[1]);
                            String[] values = pairs.getValue().split("\\|");
                            String tmpId = values[0];
                            int tmploot_amt = Integer.parseInt(values[1]);
                            String tmploot_filename = values[2];
                            if (tmpEntityId < smallEntityId){
                                smallEntityId = tmpEntityId;
                                MapGamePanel.dragItemXCoord = tempX;
                                MapGamePanel.dragItemYCoord = tempY;
                                MapGamePanel.dragItemEntityId = tmpEntityId;
                                MapGamePanel.dragItemId = tmpId;
                                MapGamePanel.dragItemAmt = tmploot_amt;
                                MapGamePanel.draggingItemFilename = tmploot_filename;
                            }
                        }
                        MapGamePanel.draggingItem = true;
                        Point point = e.getPoint();
                        MapGamePanel.startX = point.x;
                        MapGamePanel.startY = point.y;  
                    }
                }
            }
        }
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        if (e.getButton() == MouseEvent.BUTTON3){ //right
            movementBitKeys.keyReleased(87);
            movementBitKeys.keyReleased(68);
            movementBitKeys.keyReleased(83);
            movementBitKeys.keyReleased(65);
            mouseHeld = false;
        }
        if (MapGamePanel.draggingItem){
            int whiteLeftSpace = (theDesktop.getWidth() - xTiles*32)/2;
            String[] globalCoords = localToGlobalCoords((MapGamePanel.currentX-whiteLeftSpace)/32 + "," + MapGamePanel.currentY/32).split(",");
            int globalX = Integer.parseInt(globalCoords[0]);
            int globalY = Integer.parseInt(globalCoords[1]);

            String[] startCoords = localToGlobalCoords((MapGamePanel.startX-whiteLeftSpace)/32 + "," + MapGamePanel.startY/32).split(",");
            int startX = Integer.parseInt(startCoords[0]);
            int startY = Integer.parseInt(startCoords[1]);
            if (globalX == characterX && globalY == characterY){
                    sendToServer("pickupItem|" + startX + "," + startY + "-" + MapGamePanel.dragItemEntityId + "|backpack|-1|" + MapGamePanel.dragItemAmt);
            } else if (((globalX-1) == characterX || globalX == characterX || (globalX+1) == characterX) &&
                    ((globalY-1) == characterY || globalY == characterY || (globalY+1) == characterY)){
                if (!(startX == globalX && startY == globalY)){
                    sendToServer("moveItem|" + startX + "," + startY + "-" + MapGamePanel.dragItemEntityId + "|ground|" + globalX + "," + globalY + "|-1|" + MapGamePanel.dragItemAmt);
                }
            }
            MapGamePanel.draggingItem = false;
        }
    }

    @Override
    public void mouseClicked(MouseEvent e) {}

    @Override
    public void mouseEntered(MouseEvent e) {}

    @Override
    public void mouseExited(MouseEvent e) {}
}); 
```

}

**编辑**由于这些建议，我与 JLayeredPane 混在一起。

```
public static JFrame frame;
public static JLayeredPane theDesktop;
public static MapGamePanel gamePanel; //where all my game tiles draw
    ....//lines removed
theDesktop = new JDesktopPane();
theDesktop.setOpaque(false);
theDesktop.add(backpackFrame, JLayeredPane.DEFAULT_LAYER);
theDesktop.add(gamePanel, JLayeredPane.DEFAULT_LAYER);
theDesktop.add(new JLabel("THIS SHOULD SHOW UP ABOVE THE OTHER CRAP, but does not"), JLayeredPane.DRAG_LAYER);
    ....//lots of lines removed
frame.getContentPane().add(theDesktop); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:01:50.313

为了解决这个问题，我创建了一个 JLabel，当一个项目处于我的 (draggingItem boolean) 状态时，我将始终更新它。这是一些代码。感谢大家的所有帮助和想法...

```
public void mouseDragged(MouseEvent e) {
    updateMouseCursor(e);
    if (MapGamePanel.draggingItem){
        Point point = e.getPoint();
        MapGamePanel.currentX = point.x;
        MapGamePanel.currentY = point.y;
        dragJLabel.setBounds(MapGamePanel.currentX, MapGamePanel.currentY, 32, 32);
    }
}

public void mousePressed(MouseEvent e) {
    MapGamePanel.startX = point.x;
    MapGamePanel.startY = point.y;
    dragJLabel = new JLabel(MapGamePanel.draggingItemFilename);
    dragJLabel.setBounds(MapGamePanel.startX, MapGamePanel.startY, 32, 32);
    theDesktop.add(dragJLabel, JLayeredPane.DRAG_LAYER);
} 
```

mouseReleased 也是一样，我只删除 JLabel。此外，正如您在我的屏幕截图中看到的那样，还没有图像，只有文本，只是快速编码，所以我可以在这里提供答案以帮助其他人......

![在此处输入图像描述](../Images/30c0ae531822512ef6b1fb28ac2587e4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:28:37.170

[`DragLabelOnLayeredPane`](https://stackoverflow.com/q/4893265/261156)并且[`ChessBoard`](https://stackoverflow.com/q/2561690/261156)是使用`JLayeredPane`.

[`GlassPaneDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)显示在玻璃窗格上拖动。

`JComponent#setComponentPopupMenu()`将是一种添加上下文菜单的方法。

# android - 在Android中获取PC的本地IP地址

> ID：15651201
> 
> 赞同：1
> 
> 时间：2013-03-27T03:00:36.933
> 
> 标签：android, android-emulator, ip-address

我在 PC 上的 Android 模拟器中运行一些 Android 代码。我想在我的 Android 代码中获取 PC 的本地 IP 地址，不确定这是否可能......

我已经检查了以下帖子 [如何通过代码在android模拟器中获取PC的IP地址](https://stackoverflow.com/questions/10118590/how-to-get-ip-address-of-pc-in-android-emulator-through-code) 但看起来它只能给我PC的公共IP地址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:23:35.927

您可以[在此处查看我自己的答案](https://stackoverflow.com/a/8191487/489607)，以验证您的 Android 模拟器实例可访问的各种设备的路由：

> **`10.0.2.2`可以使用模拟器中的 IP 地址访问主机。**
> 
> 这些是从模拟器获得的 IP 地址：
> 
> *   `10.0.2.1`, 路由器/网关地址。
> *   `10.0.2.2`, 主机环回接口的特殊别名（即开发机器上的 127.0.0.1）
> *   `10.0.2.3`, 第一个 DNS 服务器
> *   `10.0.2.4`// `10.0.2.5`,`10.0.2.6`可选的第二、第三和第四个DNS服务器（如果有的话）
> *   `10.0.2.15`, 仿真设备自己的网络/以太网接口
> *   `127.0.0.1`, 仿真设备自己的环回接口

包含说明的完整列表可以在“[模拟器网络](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)”的 Android 文档中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:10:31.370

通常，应将 android 设备或模拟器视为与您的开发计算机分开的计算机。

也就是说，如果您想从 android 模拟器/设备连接到本地计算机，那么这里有 2 个选项供您选择。

1.  使用将名称指向本地 PC 的内部 DNS，如果这是您想要的，您甚至可以使用它覆盖“实时”url。

2.  使用 BuildConfig.DEBUG 标志或类似机制在实时和调试 URL/资源之间切换

例如，要在导出时在实时 URL 之间切换，在测试时进行调试，我使用：

```
public final class MyAppConstants
{
    // url base for all requests to my API
    public static final String BASE_URL;

    // auto-switch between live and debug urls based on usage
    static 
    {
        if (BuildConfig.DEBUG)
        {
            URL_BASE = "http://debug.server.com/";
        }
        else
        {
            URL_BASE = "http://live.server.com/";
        }
    }
} 
```

# objective-c - Mac 状态栏应用程序图标在单击时移动

> ID：15651204
> 
> 赞同：1
> 
> 时间：2013-03-27T03:00:59.107
> 
> 标签：objective-c, xcode, statusbar

当您单击状态栏图标以显示该应用程序时，该图标会跳到左侧，直到您将注意力集中在另一个上或重新绘制窗口，例如当您激活任务控制时。我发现只有当我将表格视图的“内容视图”设置为“基于视图”时才会这样做。如果我将表格视图的“内容模式”设置为“基于单元格”，则不会发生。请参阅下面的图片。

**基于视图的内容模式** ![基于视图的内容模式](../Images/98f847c6d2d97a69efff99c623bec5a6.png)

**基于单元格的内容模式** ![基于单元格的内容模式](../Images/e80c0d6fe5963ed3a92d8004ca79540c.png)

有没有其他人遇到过这个问题？任何帮助，将不胜感激。先感谢您。

# linux - .deb 安装程序 (linux) 依赖项。如果它不在存储库中怎么办？

> ID：15651205
> 
> 赞同：1
> 
> 时间：2013-03-27T03:01:05.100
> 
> 标签：linux, google-chrome, ubuntu, deb, debian-based

我希望我的应用程序自行安装 Google Chrome。我只是添加了一个名为`google-chrome-stable`deb 安装程序的依赖项，它就可以工作了。

但是，它仅在目标计算机的存储库中有 Chrome 时才有效（例如，在干净的 Ubuntu 安装中不是这种情况）。

有没有办法解决这个问题？我能以某种方式指定一个 URL 或其他一些数据，使 Linux 能够解决依赖关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:33:08.623

要解决您的问题，`google-chrome`您可以添加`chromium-browser`存储库中的依赖项。

我认为不可能自动添加另一个存储库来满足您的包的依赖关系。您可以在您的包中添加请求的依赖项（如果它适合），或者安装失败，向用户解释要添加的存储库以及如何添加它。`How to install it`例如，您的包裹网站上的一个很好的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:26:48.340

看看这个脚本，它会自动添加 apt repo 并安装 chrome [https://github.com/jeevandongre/ruby_rails_web](https://github.com/jeevandongre/ruby_rails_web)

# html - 为什么我的班级 ID 标签不起作用？

> ID：15651209
> 
> 赞同：1
> 
> 时间：2013-03-27T03:01:15.867
> 
> 标签：html, css, text, styles, text-align

这是我的网站：

[http://violetoeuvre.com/](http://violetoeuvre.com/)

我有两个问题。

1\. 想不通为什么侧边栏导航的文字不是黑色的！取而代之的是蓝色。

```
#side_wrapper_text a:link{
        font-family: 'Playfair Display', sans-serif;
        font-size: 32px;
        font-style: italic;
        font-weight: 100; 
        color:rgba (255,255,255,1);
        text-decoration: none; 
        text-align: right;
        letter-spacing:0.2em;

} 
```

2\. 我希望文本在其框的顶部完全对齐，但我不明白为什么它不能自动这样做。我尝试使用行距选项无济于事。

```
/* CONTENT ********************************************************/

.content_wrapper {
    float: left; 
    width: 980px;
    margin-left: 15px;
    margin-top: 45px;

}
/* Photo Box on Home Page ************************/

.home_photo { 
        display:block;
        height: 400px;
        background: rgba(0,0,255, .5);

}

/* Text Box on Home Page */

.home_text{ 
        display:block;
        float: left;
        background: rgba(255,100,255,.5);
        height: 190px;
        text-align: left;
}

/* WRITING ***************************************/

.home_writing {
    display: block;
    background: rgba(50,50,50,.5);
    height: 1000px;
    text-align: left;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:09:54.293

对于问题 #1，删除“rgba”和以下括号之间的空格，即`color: rgba(255,255,255,1)`.

在 Chrome 25 中，这使颜色变为白色，而不是黑色（意料之中）。如果您想要黑色，只需使用`color: #000;`或者`color: rbga(0,0,0,1);`如果您出于某种原因想要指定 Alpha 通道。

对于问题 #2：段落`<p>`标签的边距大约为 1em，由浏览器的默认样式表设置。将其设置为零（或其他值）以进行修改。

例子：

```
P { margin: 0; } 
```

您还可以考虑使用[重置样式表](http://yuilibrary.com/yui/docs/cssreset/)来规范跨浏览器的行为并重置浏览器默认样式表设置的许多样式。

或者至少将所有填充/边距重置为零（这修复了许多常见问题）：

```
* { padding: 0; margin: 0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:07:26.760

尝试更改此行

```
color:rgba (255,255,255,1); 
```

对此：

```
color: #000000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:07:38.137

对于文本颜色，删除“rgba”后的空格：

```
color:rgba(255,255,255,1); 
```

我不完全确定我理解你的第二个问题，而不是玩行间距。我认为您想将段落的顶部填充和顶部边距更改为 0。

# python - Python 3.3 似乎在 pocketsphinx 库中找不到解码器模块

> ID：15651210
> 
> 赞同：2
> 
> 时间：2013-03-27T03:01:22.037
> 
> 标签：python, python-3.x, setup.py, cmusphinx

我收到错误**AttributeError：“模块”对象没有属性“解码器”。** 我正在使用以下代码。因为没有包含 setup.py 文件，所以我将 dll 和库手动移动到 python33 目录中各自的文件夹中。（lib 中的库文件和 DLL 中的 dll）。我能够毫无错误地导入 pocketsphinx 和 sphinxbase 模块。任何帮助，将不胜感激。

```
import pocketsphinx 
import sphinxbase 

lmd="C:\Python33\Lib\site-packages\pocketsphinx\model\lm\HUB4_trigram_lm\language_model.arpaformat"
hmd="C:\Python33\Lib\site-packages\pocketsphinx\model\hmm\en_US"
dictd="C:\Python33\Lib\site-packages\pocketsphinx\model\lm\HUB4_trigram_lm\language_model.vocabulary"

fh = open('test1.wav', 'rb')
fh.seek(44)
decoder = pocketsphinx.Decoder(hmmd,lmd, dictp)
nsamp = Decoder.decode_raw(fh)

hyp, uttid, score = decoder.get_hyp()
print('Got result'+ hyp+'score'+score) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:45:02.147

> nsamp = 解码器.decode_raw(fh)

这部分必须是`decoder.decode_raw(fh)`。您正在尝试在默认模块中查找解码器，而不是在对象中查找方法。

# c# - EF 5.0 不回滚具有计算标识值的事务

> ID：15651211
> 
> 赞同：1
> 
> 时间：2013-03-27T03:01:23.583
> 
> 标签：c#, entity-framework, entity-framework-5, transactionscope, auto-generate

我有两张桌子，HOTEL 和 OWNER。两者都有 Identity 列，但其中一个具有另一个表所需的外键。

我需要同时以事务方式添加两条记录，但如果在主表上插入失败，我需要回滚为辅助表写入记录的事务。

据我了解，我需要 .SaveChanges() 从辅助表中获取自动生成的 ID，但这似乎也正在提交事务。

有没有其他方法可以做到这一点？

```
public class HOTEL
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Int64 HOTEL_ID { get; set; }

    public string blah1 { get; set; }

    public string blah2 { get; set; }
}

public class OWNER
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Int64 OWNER_ID { get; set; }

    public string blah3 { get; set; }

    public string blah4 { get; set; }

    public Int64 HOTEL_ID { get; set; }

    [ForeignKey("HOTEL_ID")]
    public virtual HOTEL HOTEL { get; set; }
} 
```

...

```
public class MyContext : DbContext
{
    public MyContext() : base() { }
    public MyContext(string connectionString) : base(connectionString) { }

    public DbSet<HOTEL> HOTELs { get; set; }
    public DbSet<OWNER> OWNERs { get; set; }

    public ObjectContext ObjectContext
    {
        get
        {
            return (this as IObjectContextAdapter).ObjectContext;
        }
    }
} 
```

...

```
Int64 ret = 0;

// Suppress required for DB2.
using (var transaction = new TransactionScope(TransactionScopeOption.Suppress))  
{
    try
    {
        using (var context = new MyContext())
        {
            var secondaryEntity = new HOTEL();
            context.HOTELs.Add(secondaryEntity);

            // This appears to commit the changes in the trasaction.
            context.SaveChanges();

            primaryEntity.HOTEL_ID = secondaryEntity.HOTEL_ID;

            context.OWNERs.Attach(primaryEntity);
            context.Entry(primaryEntity).State = primaryEntity.OWNER_ID == 0 ? EntityState.Added : EntityState.Modified;

            context.SaveChanges();
            ret = primaryEntity.OWNER_ID;
        }
    }
    catch (Exception ex)
    {
        // Deal with errors.
    }

    if (ret != 0)
    {
        transaction.Complete();
    }
}

return ret; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:52:21.987

解决这个问题后，事实证明真正的问题是因为我使用的是 TransactionScopeOption.Suppress。我正在使用它，因为 DB2 似乎没有使用任何其他选项。这是因为我使用的是 Client 9.7 Fixpack 4。使用任何其他 TransactionScopeOption 时它返回以下错误。

```
ERROR [57016] [IBM][DB2/NT64] SQL0668N  Operation not allowed for reason code "7" on table "DB2ADMIN.HOTEL". 
```

深入研究，这是因为 DB2 没有参与 TransactionScope。在查看了有关此问题的其他一些问题后，通过以下步骤解决了该问题。

*   MSDTC 属性中启用的 XA 事务
    1.  开始，运行“dcomcnfg”以启动组件服务管理控制台。
    2.  导航树到“组件服务 > 计算机 > 我的电脑 > 分布式事务协调器 > 本地 DTC”。
    3.  在“本地 DTC”上，右键单击并选择属性。
    4.  选择“安全”选项卡。
    5.  检查“启用 XA 事务”选项卡。
    6.  按确定。
*   如果我继续使用 DB2 9.7 FP4，我需要在注册表项 HKLM\SOFTWARE\Microsoft\MSDTC\XADLL 下输入一个名称为“DB2CLI.DLL”和值为“C:\ Program Files \IBM\SQLLIB\BIN\”的值DB2CLI.DLL'

    [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSDTC\XADLL] "DB2CLI.DLL"="C:\Program Files\IBM\SQLLIB\BIN\db2cli.dll"

*   或者（从注册表项），至少安装 DB2 Client 9.7 FP6。

*   重新启动计算机。
*   在处置 TransactionScope 之前不要关闭连接。

最终的代码变成了这样。

```
Int64 ret = 0;

using (var transaction = new TransactionScope(TransactionScopeOption.Required))
{
    try
    {
        using (var context = new MyContext())
        {
            var secondaryEntity = new HOTEL();
            context.HOTELs.Add(secondaryEntity);

            // SaveChanges(bool) has been depricated, use SaveOptions.
            // SaveChanges is required to generate the autogenerated Identity HOTEL_ID.
            context.ObjectContext.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);
            primaryEntity.HOTEL_ID = secondaryEntity.HOTEL_ID;

            context.OWNERs.Attach(primaryEntity);
            context.Entry(primaryEntity).State = primaryEntity.OWNER_ID == 0 ? EntityState.Added : EntityState.Modified;

            context.ObjectContext.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);
            ret = primaryEntity.OWNER_ID;

            if (ret != 0)
            {
                transaction.Complete();
                context.ObjectContext.AcceptAllChanges();
            }
        }
    }
    catch (Exception ex)
    {
        // Deal with errors.
    }
}

return ret; 
```

阅读@Pawel 的评论后的另一种选择，它将生成secondaryEntity 的ID 并将其自动附加到primaryEntity 而无需手动分配值：

```
Int64 ret = 0;

using (var transaction = new TransactionScope(TransactionScopeOption.Required))
{
    try
    {
        using (var context = new MyContext())
        {
            var secondaryEntity = new HOTEL();
            primaryEntity.HOTEL = secondaryEntity;

            context.HOTELs.Add(secondaryEntity);
            context.OWNERs.Attach(primaryEntity);
            context.Entry(primaryEntity).State = primaryEntity.OWNER_ID == 0 ? EntityState.Added : EntityState.Modified;

            context.SaveChanges();
            ret = primaryEntity.OWNER_ID;

            // TransactionScopeOption.Required can still used in case something 
            // goes wrong with additional processing at this point.

            if (ret != 0)
            {
                transaction.Complete();
            }
        }
    }
    catch (Exception ex)
    {
        // Deal with errors.
    }
}

return ret; 
```

# php - 提取特定的字符串格式

> ID：15651212
> 
> 赞同：0
> 
> 时间：2013-03-27T03:01:32.507
> 
> 标签：php, string

我不擅长 preg thingy，但我发现了一个名为 preg_split 的函数。

假设我有一个字符串： `"word1<>word2<>word3<>word4"`

我想拆分字符串并将单词 1 提取到单词 4 而没有`<>`

我如何在 preg 中做到这一点？

我的代码：

```
$extractedWord = preg_split(<pattern>,"word1<>word2<>word3<>word4"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:04:16.587

Regexes are for regular expressions, not static strings:

```
$extractedWords = explode("<>",$inputString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:05:03.453

如果您尝试使用`preg_split()`代替`explode()`或其他具有相同结果功能的 php 函数

```
$extractedWord = "word1<>word2<>word3<>word4"; // values to be splitted on "<>"
$result = preg_split("/<>/",$extractedWord); // execute function to split
print_r($result); 
```

生成的输出将是：

```
Array
(
    [0] => word1
    [1] => word2
    [2] => word3
    [3] => word4
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T03:04:16.720

```
$mystring="word1<>word2<>word3<>word4";
print_r(explode('<>',$mystring)); 
```

# c# - 默认情况下，如何在数据库中拥有实体框架导航属性查询过滤器？

> ID：15651218
> 
> 赞同：2
> 
> 时间：2013-03-27T03:02:21.883
> 
> 标签：c#, entity-framework, dbcontext, objectcontext

dbcontext api 似乎将导航属性设置为 ICollections （用于关联的 * 端）。获取可查询对象的正常方法（例如，如果您想要计数）似乎是

```
int count = dbcontext.Entry(entry).Collection(c => c.navprop).Query().Count(); 
```

但如果您想经常在数据库中过滤，那会很不方便。更重要的是，它也很容易忘记。如果有人不小心说

```
int count = entry.navprop.Count(); 
```

然后它获取服务器上的所有数据并在那里进行计数，这很慢。

ObjectContext 默认使用的 EntityCollection 类型也是如此。

```
int count = entry.navprop.CreateSourceQuery().Count(); 
```

有没有办法在模型或其他地方设置导航属性的默认集合类型是 IQueryable 或 ObjectQuery 或某种可查询类型？

请注意，这只是导航属性的问题，因为上下文中的实际对象集和数据库集项目似乎是可查询的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:19:34.593

我想出了一个解决方案，可以解决我的大部分问题。我最终做的是在我的模型中使用 ObjectContext API，并使需要很长时间才能访问私有的导航属性（用于获取和设置）。您可以通过右键单击 nav 属性在 edmx 文件中执行此操作。

然后我为包含私有导航属性的类创建了一个部分类文件，并添加了一些类似的内容。

```
public ObjectQuery<NavPropType> NavPropName
{
   get
   {
      if(privateNavProp != null) //in case lazy loading is disabled or something
         return privateNavProp.CreateSourceQuery();
      else
         return null;
   }
} 
```

现在该类的任何用户都不会意外地尝试拉入所有的 navprop 项目，其中有很多。而且在 nav 属性上进行查询也很容易，而不必记住每次都调用 CreateSourceQuery。

我没有添加设置器，因为该导航属性在我的应用程序中是只读的。我确信有一种方法可以制作出适合这种模式的方法，但我对 ObjectContext API 的了解还不够，无法说明如何做到这一点。

我最终只对可能有大量数据的导航属性执行此操作，因为保留其他属性对性能没有影响。

编辑：我后来遇到的将其设为私有的一个缺点是我不能再这样做了

```
db.EntryTable.OrderBy(e => e.privateNavProp.Count()) 
```

即使它足够聪明，不会得到所有实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:55:08.870

不，IQueryable 不是一个集合；IQueryable 是一个接口，其实现评估针对数据源的查询（集合将是数据源）。

您可以在加载实体对象时加载计数，但是，如果内联一些无害的方法调用不是您的事：

```
from e in EntityA
<optional where clause for entity>
select new
{
    Entity = e,
    filteredNavPropCount = e.navprop.Where( np => <optional where clause for collection> ).Count()
} 
```

# c++ - C++: BOOST-ASIO No server causes client to crash?

> ID：15651222
> 
> 赞同：0
> 
> 时间：2013-03-27T03:02:39.603
> 
> 标签：c++, crash, client, boost-asio, connector

The following code crashes at the connector `boost::asio::connect(s, iterator);` with the output:

```
before connector:
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.

Process returned 3 (0x3)   execution time : 1.281 s
Press any key to continue. 
```

I don't have a server running at port 4001 with the localhost connected and I wondered if there is a way to prevent this crash from occurring in case the server isn't running for some reason yet the client can still run the software somewhat. In other words is there a way to see if a server exists without crashing the program?

Heres the code

```
//
// blocking_tcp_echo_client.cpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2012 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <cstdlib>
#include <cstring>
#include <iostream>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

enum { max_length = 1024 };

int main(int argc, char* argv[])
{
  //try
 // {
    //if (argc != 3)
    //{
    //  std::cerr << "Usage: blocking_tcp_echo_client <host> <port>\n";
    //  return 1;
    //}

    boost::asio::io_service io_service;

    tcp::resolver resolver(io_service);
    //tcp::resolver::query query(tcp::v4(), argv[1], argv[2]);
    tcp::resolver::query query(tcp::v4(), "127.0.0.1", "4001");
    tcp::resolver::iterator iterator = resolver.resolve(query);

    tcp::socket s(io_service);
    std::cout << "before connector: ";
    boost::asio::connect(s, iterator);
    std::cout << "after connector: ";
    using namespace std; // For strlen.
    std::cout << "Enter message: ";
    char request[max_length];
    std::cin.getline(request, max_length);
    size_t request_length = strlen(request);
    boost::asio::write(s, boost::asio::buffer(request, request_length));

    char reply[max_length];
    size_t reply_length = boost::asio::read(s,
        boost::asio::buffer(reply, request_length));
    std::cout << "Reply is: ";
    std::cout.write(reply, reply_length);
    std::cout << "\n";
  //}
  //catch (std::exception& e)
  //{
  //  std::cerr << "Exception: " << e.what() << "\n";
  //}

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:16:52.730

`boost::asio::connect`抛出错误。所以注释掉的 try {} 块和 catch { } 块对于检测错误而不是崩溃很有用。

如果未找到端口，resolver.resolve(query) 返回 .end() 而不是有效的迭代器，因此您可以在尝试调用之前先测试迭代器`connect`

来自 boost 文档：

*   @throws boost::system::system_error 失败时抛出。如果序列是
*   为空，关联的@c error_code 为 boost::asio::error::not_found。
*   否则，包含上次连接尝试的错误。

# iphone - Could anyone tell me why UIImage.ciimage is null

> ID：15651228
> 
> 赞同：24
> 
> 时间：2013-03-27T03:03:52.340
> 
> 标签：iphone, ios

I found that in IOS **UIImage** can change to **CIImage**.and there is a property CIImage in UIImage. and when i use the UIImage,UIImage object is not null but `UIImage.ciimage` is null ,why?

forgive my stupid question if someone can help me ,thank you very much.

* * *

ADD

for example, the code like below return null:

```
UIImage *image = [UIImage imageNamed:@"test.jpg"];
CIImage *ciImage = image.CIImage 
```

but if in this way CIImage is not null:

```
UIImage *image = [UIImage imageNamed:@"test.jpg"];
CIImage *myImage = [[CIImage alloc] initWithCGImage:image.CGImage options:nil]; 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-27T03:19:42.360

这是因为这个 UIImage 实际上不是 CIImage。换句话说，`CIImage`只有当 UIImage 已经由 CIImage 支持时（例如，因为它是由 生成的`imageWithCIImage:`），UIImage 才不是 nil。您不能使用它来神奇地将 UIImage 转换为 CIImage，就像您似乎希望做的那样。

文档实际上对此非常清楚。永远值得一读。

# c++ - Weird result on simple linked list code

> ID：15651230
> 
> 赞同：-3
> 
> 时间：2013-03-27T03:03:58.513
> 
> 标签：c++, data-structures, singly-linked-list

Okay. I am paying around with a simple linked list code.

I keep the head node as public. then I declare a pointer (head2)to store the head node of the first list(first) in the main program. I declare a second list called second, and assign head2 as the head node of the second list. Then I delete head2\. I then access the members of "second" (whose head node is deleted) and print them. I expected a segmentation fault. But it works, only printing 0 for the data of the head node. What is puzzling to me is that if the head node is deleted, how is the next pointer of the head node still in memory? (this is accessed by print to traverse through the list.I am using g++ 4.6.1 in Ubuntu.Here is the code:

```
#include<iostream>

struct Node
{
    int data;
    Node* next;
};

class list1
{
public:
    list1();
    Node* head;
    void insert(int);
    void print();
};

list1::list1()
{
    head=NULL;
}

void list1::insert(int a)
{
    Node* newnode=new Node;
    newnode->data=a;
    newnode->next=head;
    head=newnode;
}

void list1::print()
{
    Node* dummy=head;
    while(dummy)
    {
        std::cout<<dummy->data<<std::endl;
        dummy=dummy->next;
    }
}

int main()
{
    list1 first;
    first.insert(1);
    first.insert(2);
    first.insert(4);
    first.insert(9);

    list1 second;
    Node* head2=new Node;
    head2=first.head;
    second.head=head2;
    delete head2;
    second.print();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:08:55.240

您的代码通过访问生命周期结束的对象来调用未定义的行为。

它可能仍然有效，这并不奇怪。

未定义的行为意味着任何事情都可能发生，包括你正在观察的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:12:52.960

删除内存只是将内存返回给系统，返回的内存准备好再次分配。但是内存中的数据仍然存在，直到内存被覆盖。由于您的程序已经删除了内存，并且您的程序不知道何时以及谁将再次分配内存块。因此，对于您的程序，仍然使用内存会导致未定义的行为。

# linked-list - doubly linked list in alloy

> ID：15651231
> 
> 赞同：0
> 
> 时间：2013-03-27T03:04:07.717
> 
> 标签：linked-list, doubly-linked-list, alloy

I was trying to reverse a doubly linked list in alloy, I created a signature for it. This is the signature

```
sig node{}

//define each field as disjoint subset of node
sig first extends node{}

sig last extends node{} 

sig element extends node{}

sig doublylinkedlist{
head:one first,  //define one head pointer
null:one last,  //define one null pointer
ele:set element, //elements of the linked list
links:ele->ele, //paths between elements of a linked list
headpoint:head->one ele, //head points to one element of linked list
nullpoint:ele->null //one element of linked list points to null
}{
no links & iden  // no self refrence
one nullpoint //only one element points to null
links=links + ~links    //elements can point to prev element
all e:ele | e.(^(links))=ele // elements are connected
all e:ele | one r:head, n:null | (r->e) in headpoint => (e->n) not in nullpoint     //element being pointed by head cannot point to null
all e:ele | #(e.(links))<3 and #((links).e)<3 //elements cannot have more than 3   indegree and more than 3 outdegree
all e:ele | one r:head | (r->e) in headpoint => #((links).e)=1 && #(e.(links))=1 //element being pointed by head has indegree and outdegree 1
all e:ele | one n:null | (e->n) in nullpoint => #((links).e)=1 && #(e.(links))=1 //element being pointing to null has indegree and outdegree 1
 }

pred reverse{
}

run reverse for 1 doublylinkedlist, exactly  4 element ,exactly 1 first,exactly 1 last,exactly 0 node 
```

The problem is that it gives desired result when i run for exactly 8 elemnts. After that it shows instances where one element has more than 3 indegree and 3 outdegree.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:29:06.330

我的第一印象是这个模型对于这个问题过于复杂，我强烈建议重写而不是调试它。

以下是关于您的模型的一些不相关的评论

*   而不是`exactly 1`在范围规范中使用，您可以`one sig`在相应的 sig 声明中使用（例如，`one sig first`代替`exactly 1 first`;

*   而不是`exactly 0`在范围规范中使用，您可以`abstract sig`在相应的 sig 声明中使用（例如，`abstract sig node`代替`exactly 0 node`;

*   我真的不认为有充分的理由让“第一个”、“最后一个”和“元素”不同类型的节点；我宁愿使用单个`node`签名；

*   两者兼而有之`head: one first`，`headpoint: head -> one ele`似乎是多余的。如果打算有一个头节点，你可以简单地说`head: one node`；

*   同样，`one r: head`在您附加的事实之一中使用也是不必要的，因为您知道这`head`将指向一个节点（在您的模型中始终是 的单个原子`first`），因此`r`始终是该节点。

我不知道您是否有充分的理由以这种方式为您的列表建模。我的第一种方法是更多面向对象的风格，例如，

```
sig Node {
    next: lone Node, 
    prev: lone Node
}

sig DLinkedList {
    head: lone Node
}

... 
```

如果您希望您的节点独立于双向链表而存在（即，让`DLinkedList`sig 包含定义它的所有必要关系，这绝对没问题），我仍然不会使用特殊`first`和`last`subsigs。也许像

```
sig Node {}

sig DLinkedList {
    head: lone Node,
    tail: lone Node,
    nxt: Node -> lone Node,
    prv: Node -> lone Node,
    nodes: set Node
} {
    nodes = head.*nxt
    some nodes => one tail
    no ^nxt & iden // no cycles
    nxt = ~prv     // symetric   
    no prv[head]   // head has no prv
    no nxt[tail]   // tail has no nxt
    head.^nxt = Node.^nxt // all nodes in nxt are reachable from head
}

pred reverse[dl, dl': DLinkedList] {
    dl'.head = dl.tail
    dl'.tail = dl.head
    dl'.nxt = dl.prv
}

run {
    some dl, dl': DLinkedList | reverse[dl, dl']

    // don't create any other lists or nodes
    #DLinkedList = 2
    Node = DLinkedList.nodes
} 
```

# python - python class: store a variable in the class and use it later

> ID：15651232
> 
> 赞同：0
> 
> 时间：2013-03-27T03:04:10.277
> 
> 标签：python

First I have to say that I'm not a professional python programmer,
so I might ask some really stupid questions, please bear with me...

Here is the idea:

```
class Foo:
    def __init__(self):
        self.myValue = ''
    def function1(self, something):
        self.myValue = something
    def function2(self):
        print self.myValue

foo = Foo()
foo.function1("target") --> I want to store the value "target" in the class and use it later
foo.function2()  --> I want to print out "target" 
```

Obviously, this is really wrong, but I don't know how how to correct it.

If you can give me some directions, I'll really appreciate it!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:12:20.800

您也可以尝试查看@property 装饰器：

```
class Foo(object):

    def __init__(self):
        self._myValue = None

    @property
    def myValue(self):
        print self._myValue
        return self._myValue

    @myValue.setter
    def myValue(self, something):
        self._myValue = something

foo = Foo()
foo.myValue = 10
foo.myValue 
```

在这里找到更多[关于如何在 python 中使用属性功能的真实世界示例？](https://stackoverflow.com/questions/6304040/real-world-example-about-how-to-use-property-feature-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:05:48.490

你很接近，只是一些错别字。里面`function2`应该说`myValue`：

```
def function2(self):
    print self.myValue 
```

并调用`function2`添加一组空括号：

```
foo.function2() 
```

# visual-studio-2010 - Cannot remove temp directory after VS 2010 installation

> ID：15651238
> 
> 赞同：0
> 
> 时间：2013-03-27T03:04:34.947
> 
> 标签：visual-studio-2010, directory, installation

I cannot remove an installation temp directory "19a5e95b7185dd381eea" and all its sub directories after a successful VS 2010 installation. The OS is Win 7 Sp1\. I have Admin privileges. I tried to remove it in Safe Mode with no avail. I cannot change privileges for these directories to delete them. It's read only directory. It's large enough to ignore. How can I delete it?

Solution:

Based on Derek's suggestion, I had to add myself as owner to all sub directories individually. If there is a way to do on the root, if would be easier. After the ownership is given, it was possible to delete all the directories.

Microsoft should create a proper deployment for VS2010 that cleans itself after!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:15:09.670

您可以尝试将目录的所有权更改为自己。该目录可能由其他人（例如 System）拥有，并且由于您不拥有它，因此无法将其删除。至少值得一试。

德里克

# image - convert jpgs and mp3 to flv using java

> ID：15651240
> 
> 赞同：0
> 
> 时间：2013-03-27T03:04:55.470
> 
> 标签：image, video, ffmpeg, flv

Now I am trying to convert a few jpg files and a mp3 to flv file.

The ffmpeg command can do this.

```
ffmpeg -loop 1 -i image.jpg -i music.mp3 -shortest -c:v libx264 -crf 20 -tune stillimage -c:a copy output.mkv 
```

but I must use this function in my java project ):

Are there any java opensource projects?

thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:17:13.077

我不确定这是否与您有关，但我认为这会有所帮助：

[使用 java-ffmpeg 包装器，还是简单地使用 java 运行时来执行 ffmpeg？](https://stackoverflow.com/questions/1281353/)更准确地说是得分最高的答案：

[https://stackoverflow.com/a/1281454/1091386](https://stackoverflow.com/a/1281454/1091386)当然是 4 岁。按照论坛主题的第二个链接[http://red5.5842.n7.nabble.com/java-call-ffmpeg-td25005.html](http://red5.5842.n7.nabble.com/java-call-ffmpeg-td25005.html)似乎建议类似

```
Runtime rt = Runtime.getRuntime();
Process proc = rt.exec("ffmpeg"); 
```

可能适用于您的情况。当然，您将希望单独传递选项...

# matlab - 使用十进制索引从 For 循环创建结果向量

> ID：15651243
> 
> 赞同：0
> 
> 时间：2013-03-27T03:05:01.550
> 
> 标签：matlab, for-loop

我正在尝试运行以下 for 循环并使用每次迭代的结果创建一个向量。

```
for x=0.2:0.1:1,
        a=quadgk(h,0.2,x)
    end 
```

我尝试了通常可行的不同方法，但问题是“quadgk”函数中的“x”必须是标量。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:27:59.457

如果我理解正确，您希望将每次迭代的结果放入`a`. 您可以执行以下操作：

```
count=0;
for x=0.2:0.1:1
    count=count+1;
    a(count)=quadgk(h,0.2,x)
end 
```

# c - C 结构指针数组

> ID：15651247
> 
> 赞同：0
> 
> 时间：2013-03-27T03:05:19.690
> 
> 标签：c, arrays, pointers

我有 2 个结构 A 和 B：

```
struct A {
 int v;
}

struct B {
 struct A* ptrs[MAX_PTRS];
} 
```

基本上，我希望结构 B 的元素是指向结构 A 的指针数组（MAX_PTRS 是在头文件中定义的宏）。

现在，假设我有一个全局变量：

```
struct B* sB; 
```

出于某种原因，如果我尝试以下命令

```
int x = sB->ptrs[0]->v; 
```

我收到错误“'->' 的类型参数无效”。

怎么了？（假设一切都已正确初始化和分配）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:50:49.010

通常`invalid type argument of '->'`意味着您应该使用点运算符 ( `.`)，而您使用的是点引用运算符 ( `->`)，如在类似问题中[所见](https://stackoverflow.com/questions/4983010/invalid-type-argument-of-c-structs)。

在您的代码中，如果您这样做了，您可以看到这一点：

```
struct A {
 int v;
};

struct B {
 struct A ptrs[MAX_PTRS];  // note the missing *
}; 
```

这种缺失`*`将导致您看到的错误：`error: invalid type argument of ‘->’ (have ‘struct A’)`

如果一切都*真正*初始化并正确分配，那么应该没有问题，看这个例子：

```
#define MAX_PTRS 3

struct A {
 int v;
};

struct B {
 struct A ptrs[MAX_PTRS];
};

int main (int argc, char *argv[]) {
    struct B *sB = malloc(sizeof(struct B));
    sB->ptrs[0] = malloc(sizeof(struct A));
    sB->ptrs[0]->v = 10;
    int x = sB->ptrs[0]->v;
    printf("%d\n", x);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:49:05.003

结构在每个右括号后都应该有`;`符号..

你的代码没有问题

`struct B* sB;`

```
int x = sB->ptrs[0]->v; 
```

但你应该需要初始化你的 sB。

# vb.net - 为什么新 使用 {} 工作，但 New With {} 不工作？

> ID：15651256
> 
> 赞同：2
> 
> 时间：2013-03-27T03:07:57.390
> 
> 标签：vb.net, asp.net-mvc-4, anonymous-types, razor-2

我一直用`New With {}`没问题。为什么这不一样？

**Razor VB.NET 代码**

```
Using Ajax.BeginForm(New AjaxOptions With {.HttpMethod = "Post"})
    @* no problem *@
End Using 
```

```
Using Ajax.BeginForm(New With {.HttpMethod = "Post"})
    @* Value of type '<anonymous type>' cannot be converted to 'System.Web.Mvc.Ajax.AjaxOptions'. *@
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:11:36.023

匿名[类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)( `New With {}`) 不会扩展/继承- 并且*需要*`AjaxOptions`符合`AjaxOptions`的对象。*`BeginForm`*

# java - Java 未与 Eclipse 一起运行，编辑 eclipse.ini 会出错

> ID：15651268
> 
> 赞同：1
> 
> 时间：2013-03-27T03:09:43.490
> 
> 标签：java, android, eclipse

我最近安装了包含 Eclipse 的最新版本的 Android SDK。在尝试运行 Eclipse 时，我首先遇到了错误

`A Java Runtime Environment or Java Development Kit must be available...`

正如许多其他用户发现的那样。我意识到我错误地安装了 Java，并解决了这个问题。该错误消息不再出现。但是，我现在收到消息：

`Failed to load the JNI shared library "C:\Program Files (x86)\Java\jdk1.7.0_17\bin\..\jre\bin\client\jvm.dll`

我查看了这个问题，发现很多人建议编辑 eclipse.ini 文件以包含 -vm 参数。我已经尝试过了，但我无法保存文件。每当我尝试时，我都会收到一条错误消息说`Access is denied.`

我正在运行 Windows 8。Eclipse 和 Java 都是 64 位的。我是计算机的唯一管理员。如果您能向我提供如何解决我的问题的任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:18:26.310

不要将 eclipse 放入“Program Files”文件夹。默认情况下，eclipse 想要写入安装的子目录，这在该位置不起作用。它还将解释您在编辑 ini 文件时遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:13:10.033

在 Windows 8 中，驱动器 C:\ 是系统驱动器，只有管理员用户才能修改其内容。不建议将 Eclipse 放在此位置，但如果只想运行它，您可以右键单击 eclipse.exe 然后选择**以管理员身份运行**，可能会出现一个弹出窗口以确认您决定运行该程序，选择选项“**是**” .

# android - 如何在 CubicLineChart 上绘制垂直线？

> ID：15651269
> 
> 赞同：1
> 
> 时间：2013-03-27T03:09:44.120
> 
> 标签：android, achartengine

我正在展示一个包含两个 XYSeries 的漂亮图表。每个系列有 24 个值，绘制在 X 位置 0 到 23。一个系列显示 24 小时内的温度，另一个系列显示同一 24 小时内的降水概率。

当我尝试添加第三个系列来绘制一条垂直线（用作“光标”，以及`OnTouchListener`）时，问题就来了。这个想法是绘制一个 2 数据点系列，它将呈现为一条垂直线，我可以将其用于我的光标。

我试过这个：

```
XYSeries cursorLine = new XYSeries("", 2);
cursorLine.add(5, 0);
cursorLine.add(5, 100);
dataset.addSeries(cursorLine); 
```

但这并没有显示任何东西。

我还尝试使用 ACE 的 Dan 在[此 Google Group 帖子](https://groups.google.com/forum/?fromgroups=#!topic/achartengine/nB135l6qvA0)中建议的两个非常接近的 X 值：

```
XYSeries cursorLine = new XYSeries("", 2);
cursorLine.add(5.00000, 0);
cursorLine.add(5.00001, 100);
dataset.addSeries(cursorLine); 
```

不幸的是，这会将“光标”线延伸到图表的整个宽度，就像假设它由 24 个数据点组成，而不仅仅是我指定的 2 个。例子：

![在此处输入图像描述](../Images/8691e8db3d8fa37feba96c01ce95da29.png)

我还尝试添加 24 个数据点，其中 23 个的 Y 值为 0，只有一个（在 X 位置 5）的 Y 值为 100。因为这是一个 CUBIC 折线图，所以我的光标在其上显示为“高跟鞋”底部; 其他 23 个点上的光标也在图表底部可见。例子：

![显示光标线的后跟](../Images/0f62b61a3def49190b6c3edc27af031c.png)

我尝试将相邻的数据点设置为 +/- 0.00001 的 X 值，但这并没有移除脚跟——无论我设置它们与光标位置的水平距离有多近，它们都差不多小。

过去一个小时左右我一直在玩这个，但我无法显示一条简单的垂直线。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:57:37.553

问题似乎是您将 scale = 2 用于垂直线系列。每个比例计算可见数据范围，并尝试完全拟合数据，例如它显示的数据。我建议您将垂直线数据添加到已经存在的比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:12:12.227

我终于想出了一些可行的方法，因为它显示了一条看似垂直的直线。感觉真的，真的很脏，但这里是代码：

```
double x = 5;

for(double i = 0; i < 24; i++)
{
    if(i != x)
    {
        cursorLine.add(i, -100);
    }
    else
    {
        cursorLine.add(x - 0.000001, -100);
        cursorLine.add(x, 200);
        cursorLine.add(x + 0.000001, -100);
    }
} 
```

`x`可以设置为绘制光标的任何 X 位置。

基本上，我正在做的是将线的底部和顶部绘制到远离图形的地方，以至于可见的部分是直线部分。所以这仍然在底部有“高跟鞋”等。但由于我不允许缩放或平移，这些东西是隐藏的，因此它工作得很好。

如果有人对此有更好的解决方案，那就太好了。我要去洗个冷水澡...

# c# - 在 EPPlus 中编写 Excel 文件

> ID：15651272
> 
> 赞同：26
> 
> 时间：2013-03-27T03:10:23.850
> 
> 标签：c#, epplus

我已经坚持了好几天了，尽管有所有的帮助，但这些解决方案都没有为我工作。我想要做的是使用 EPPlus 库创建一个 excel 文件，其中包含一些我从存储过程中提取的基本数据。这是我的 ExportDocument.cs 文件中的代码：

```
public static ExcelPackage CreateExcelDocument(int [] arr)
{
    String path = @"D:\temp\testsheet3.xlsx";
    //FileInfo newFile = null;
    /*if (!File.Exists(path + "\\testsheet2.xlsx"))
    newFile = new FileInfo(path + "\\testsheet2.xlsx");
    else
        return newFile;*/
    using (ExcelPackage package = new ExcelPackage())
    {
        ExcelWorksheet ws = package.Workbook.Worksheets.Add("testsheet");
        ws.Cells["B1"].Value = "Number of Used Agencies";
        ws.Cells["C1"].Value = "Active Agencies";
        ws.Cells["D1"].Value = "Inactive Agencies";
        ws.Cells["E1"].Value = "Total Hours Volunteered";
        ws.Cells["B1:E1"].Style.Font.Bold = true;

        int x = 2;
        char pos = 'B';
        foreach (object o in arr)
        {
            String str = pos + x.ToString();
            ws.Cells[str].Value = o.ToString();
            if (pos > 'E')
            {
                pos = 'B';
                x++;
            }
            pos++;
        }
        package.Save();
        return package;
    }
} 
```

所有注释的代码都是我在互联网上找到的不同的东西来尝试。请注意，这是一个学校组织，我们没有使用 MVC。然后我使用文件后面的代码来提取这个方法，如下所示：

```
protected void GenerateReport(Object o, EventArgs e)
{
    Session["reportSession"] = ddReport.SelectedItem.Value.ToString();
    int [] arr = new int [ReportRepository.GetAgencyCounts().Count];
    ReportRepository.GetAgencyCounts().CopyTo(arr, 0);

    ExcelPackage pck = ExportDocument.CreateExcelDocument(arr);
    /*try
    {
        byte [] data = ExportDocument.CreateExcelDocument(arr).GetAsByteArray();
        Response.Clear();
        Response.Buffer = true;
        Response.BinaryWrite(data);
        Response.AddHeader("content-length", data.Length.ToString());
        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        Response.Flush();
        Response.Close();
        Response.End();
    }
    catch (Exception ex) { }*/

    /*var stream = new MemoryStream();
    pck.SaveAs(stream);

    String filename = "myfile.xlsx";
    String contentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    var cd = new System.Net.Mime.ContentDisposition
    {
        Inline = false,
        FileName = filename
    };
    Response.AppendHeader("Content-Disposition", cd.ToString());
    stream.Position = 0;

    return File(stream, contentType, filename);*/

    /*Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + file.Name);
    Response.TransmitFile(Path.GetFullPath(file.Name));
    Response.Flush();
    Response.Close();*/

    /*Response.ClearHeaders();
    Response.BinaryWrite(pck.GetAsByteArray());
    Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    Response.AddHeader("content-disposition", "attachment;  filename=Sample2.xlsx");
    Response.Flush();
    Response.Close();*/
} 
```

再次注意，所有注释的代码都是我从各种来源找到的没有用的东西。

所以我没有收到任何错误，但是当我单击应用程序上的按钮以执行方法背后的代码时，什么也没有发生。它正在加载并运行，但没有创建文件，没有打开任何文件。这是我第一次使用 EPPlus，我并不完全熟悉以编程方式将东西导出到 excel，所以我在这里感到迷茫。

你们有什么建议吗？我也很乐意澄清我没有完全理解的任何观点。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-03T13:34:09.777

您看过 EPPlus 提供的样本吗？

这个向您展示如何创建文件 [http://epplus.codeplex.com/wikipage?title=ContentSheetExample](http://epplus.codeplex.com/wikipage?title=ContentSheetExample "简单示例")

这个向您展示了如何使用它来流回文件 [http://epplus.codeplex.com/wikipage?title=WebapplicationExample](http://epplus.codeplex.com/wikipage?title=WebapplicationExample "网络示例")

这就是我们使用包生成文件的方式。

```
var newFile = new FileInfo(ExportFileName);
using (ExcelPackage xlPackage = new ExcelPackage(newFile))
{                       
    // do work here                            
    xlPackage.Save();
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-03T14:13:44.127

最好使用`DataSet`s 和/或`DataTable`s。一旦你有了它，最好是直接从你的存储过程中获得正确的标题列名，你可以使用以下方法：

`ws.Cells.LoadFromDataTable(<DATATABLE HERE>, true, OfficeOpenXml.Table.TableStyles.Light8);`

.. 这将产生一个漂亮的 excelsheet 和一张漂亮的桌子！

现在为您的文件提供服务，假设您`ExcelPackage`在上面的代码中有一个名为`pck`..

```
Response.Clear();

Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("Content-Disposition", "attachment;filename=" + sFilename);

Response.BinaryWrite(pck.GetAsByteArray());
Response.End(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-27T13:52:31.130

如果您有一组使用存储过程加载的对象，您也可以使用`LoadFromCollection`.

```
using (ExcelPackage package = new ExcelPackage(file))
{
    ExcelWorksheet worksheet = package.Workbook.Worksheets.Add("test");

    worksheet.Cells["A1"].LoadFromCollection(myColl, true, OfficeOpenXml.Table.TableStyles.Medium1);

    package.Save();
} 
```

# ruby-on-rails - .last 和 .each 在导轨中

> ID：15651277
> 
> 赞同：0
> 
> 时间：2013-03-27T03:11:01.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, each

创建新的子评论时，我正在尝试获取视图中的最后一条记录...我的代码如下...

```
<% @subcomment = @comment.subcomments.order("created_at").last %>
<% @subcomment.each do |comment| %>
    this worked!
<% end %> 
```

我知道@subcomment 有最后一条记录...（即当我使用.inspect 时，它会显示对象），但由于某种原因使用.each 会出现以下错误...

```
NoMethodError (undefined method `each' for #<Subcomment:0x007fb14c0e5510>): 
```

我需要使用 .each，因为我通常使用此视图来显示所有子评论。为什么 .each 不起作用，有什么替代方案？

谢谢你。

最后......我想要这样的东西：

```
<% if defined? showlast %>
    <% @subcomments = @comment.subcomments.order("created_at").last %>
    <% [@subcomments].each do |subcomment| %>
    <div id="subcomments">
<% else %>
<div id="subcomments">
  <% @subcomments.each do |subcomment| %>
     <<here is a long template of what to do with @subcomments>> 
```

即我希望模板在多个情况下进行迭代，如果发送参数 :showlast 则为最后一项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:17:44.620

使用 last 只会给你带来一个选项，你不能迭代单一的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:31:45.417

好的，所以如果您想对单个实体强制执行迭代，最简单的方法是创建一个包含一个元素的数组。

在这种情况下，不要`@subcomment.each`尝试`[@subcomment].each`在你的块中使用。

话虽如此，我建议您重新考虑这种方法。您的查找正在执行 a `.last`，这可确保返回单个实体。因此，您可以只使用它而不是迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:59:20.330

您应该放入`<<here is a long template of what to do with @subcomments>>`一个名为`_subcomment.html.erb`. 然后你可以简单地这样做：

```
<div id="subcomments">
  <% if defined? showlast %>
    <%= render @comment.subcomments.order("created_at").last %>
  <% else %>
    <% @subcomments.each do |subcomment| %>
      <%= render subcomment %>
    <% end%>
  <% end %>
</div> 
```

# android - 如何使用 onTouchListener 检测画布绘图或位图上的单击？

> ID：15651279
> 
> 赞同：0
> 
> 时间：2013-03-27T03:11:03.990
> 
> 标签：android, canvas, bitmap, touch-event, ontouchlistener

该游戏的目标类似于泡泡爆破游戏。每次触摸气泡时，都会发生交互/事件。

到目前为止，这就是我所拥有的。这有点乱，因为我是新手，但我的教授告诉我使用 onTouch(view v, motionevent event) 并且在这种方法中，我将使用类似 event.getSource(); 让我能够创建与服务于可触摸绘图/位图图像目的的方法的交互。

任何建议或帮助都会很棒！非常感谢。

```
public class MainActivity extends Activity implements OnTouchListener {

OurView v;
Bitmap icon1, icon2, icon3;
float x,y;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    v = new OurView(this);
    v.setOnTouchListener(this);
    icon1 = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    icon2 = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    icon3 = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    x = y = 0;
    setContentView(v);
}

@Override
protected void onPause() {
    super.onPause();
    v.pause();
}

@Override
protected void onResume() {
    super.onResume();
    v.resume();
}

public class OurView extends SurfaceView implements Runnable {

    Thread t = null;
    SurfaceHolder holder;
    boolean isItOK = false;

    public OurView(Context context) {
        super(context);
        holder = getHolder();
    }

    @Override
    public void run() {
        while (isItOK == true){
            if (!holder.getSurface().isValid()){
                continue;
            }
            Canvas c = holder.lockCanvas();
            c.drawARGB(255, 100, 120, 10);
            c.drawBitmap(icon1, x=50, y=100, null);
            c.drawBitmap(icon2, x=180, y=100, null);
            c.drawBitmap(icon3, x=310, y=100, null);
            holder.unlockCanvasAndPost(c);
        }
    }

    public void pause() {
        isItOK = false;
        while(true){
            try{
                t.join();
            }catch (InterruptedException e){    
                e.printStackTrace();
                }
            break;
            }
        t = null;
    }

    public void resume(){
        isItOK = true;
        t = new Thread(this);
        t.start();
    }
}

@Override
public boolean onTouch(View v, MotionEvent me) {

    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    me.getSource();

    switch(me.getAction()){
    case MotionEvent.ACTION_DOWN:
        x = me.getX();
        y = me.getY();
        break;
    case MotionEvent.ACTION_UP:
        break;
    case MotionEvent.ACTION_MOVE:

        break;
    }
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:22:34.963

尝试创建一个条件，其中 init 检查 xy 坐标位图的矩形是否可能在循环内，是否在位图的矩形内？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:26:13.607

您在已知坐标处绘制位图，那么为什么不进行范围检查呢？例如，如果 x > 50 且 x < 100 且 y > 100 且 y < 150 则他们点击图标 1（假设您的位图为 50x50）几秒钟前通过 mob

# git - Windows 机器上 github 的 mingw32 shell 的 vimrc 或 vim 配置文件在哪里？

> ID：15651286
> 
> 赞同：20
> 
> 时间：2013-03-27T03:11:54.783
> 
> 标签：git, vim, cygwin, putty, mingw32

Cygwin 有一个主目录，我可以在其中存储一个 .vimrc 文件来设置语法高亮。我知道在 linux 机器上，这个文件通常位于主目录中，并且可以全局存储（尽管我还没有弄清楚全局的东西是如何工作的）。

我是 windows 用户（我很抱歉），所以我对不同的事情使用不同的 shell，并且不太确定为什么当我从 git bash shell 启动它时语法突出显示不起作用。它适用于 cygwin 和 putty。但对于 git 的 mingw32 来说并没有那么多。

另一件事是，当我使用 cygwin ssh 到远程服务器时，我无法使用 Vim，但是当我使用 Putty 的 shell 连接时，我可以很好地使用 Vim。

对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T03:28:02.707

Git bash 使用 MSYSGIT，它带有自己的 Vim 。一种查找方法-

在你的 git bash 类型中

```
$ type vim 
```

它会告诉你使用了哪个 vim 可执行文件。在我的机器上它指向

/bin/vim

如果你输入

`vim --version`，它吐出了很多环境。

将它通过管道传递给 grep，就像这样

`vim --version | grep vimrc`这将告诉您此 vim 实例将查找 vimrc 的位置。

# android - 未调用 getChildView

> ID：15651288
> 
> 赞同：10
> 
> 时间：2013-03-27T03:12:13.377
> 
> 标签：android, expandablelistview, expandablelistadapter

我正在制作一个包含自定义 ExpandableListView 适配器的菜单。尽管尝试将我的代码与 API 示例和我在网上看到的任何其他示例（包括多个密切相关的 SO 问题）相匹配，但我仍然无法使其正常工作。

我知道正在使用适配器，因为正在显示组视图（由 xml 制成）。单击组项也会调用“getGroupView”，但代码从不运行“getChildView”、“getChild”或“getChildId”。

我什至浏览了 Android-15 源代码以找出我可能做错了什么，但没有发现任何奇怪的地方。

= 基础活动

```
public class SettingsM extends FragmentActivity
{
    static Context context;
    ViewPager mViewPager;
    CollectionPagerAdapter mDemoCollectionPagerAdapter;
    //ColorPicker picker;

    SharedPreferences preferences;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

        context = this;
        // Set up action bar.
        final ActionBar actionBar = getActionBar();

        actionBar.setDisplayHomeAsUpEnabled(false);
        actionBar.setDisplayUseLogoEnabled(false);
        actionBar.setTitle("Particle emitter settings");

        // get the preferences for this screen
        preferences = this.getSharedPreferences("base_world", 0);

        // tab holder
        setContentView(R.layout.tabmenu_holder);
        mViewPager = (ViewPager) findViewById(R.id.pager);

        mDemoCollectionPagerAdapter = new CollectionPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mDemoCollectionPagerAdapter);
    }

    public class CollectionPagerAdapter extends FragmentStatePagerAdapter
    {
        public CollectionPagerAdapter(FragmentManager fm) 
        {
            super(fm);
        }

        @Override
        public Fragment getItem(int i)
        {
            Fragment fragment = new TabFragment();
            Bundle args = new Bundle();
            if(preferences != null)
                {
                if(i == 0)
                {// world
                    args.putBoolean("world", true);
                } else
                {// emitter
                    args.putBoolean("world", false);
                    args.putInt("emitter", i-1);
                }
            }
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount()
        {
            return 100;
        }

        @Override
        public CharSequence getPageTitle(int position) 
        {
            if(position == 0)
            {
                return "World";
            } else
            {
                return "Emitter #" + position;
            }
        }
    }

    public static class TabFragment extends Fragment
    {        
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
        {
            Bundle args = getArguments();
            View rootView = new TextView(context);// use a textview as the default

            if(args.getBoolean("world"))
            {
                rootView = inflater.inflate(R.layout.m_backdrop, container, false);

                // add face drop-down
                ExpandableListView face_list = (ExpandableListView) rootView.findViewById(R.id.FaceList);
                if(face_list != null)
                {
                    face_list.setAdapter(new ExpandableFaceList(context));
                    face_list.setOnGroupClickListener(new OnGroupClickListener()
                    {

                        @Override
                        public boolean onGroupClick(ExpandableListView parent,
                            View v, int groupPosition, long id)
                        {
                            Log.i("FaceList", "Clicked:" + groupPosition);
                            return false;
                        }
                    });
                }

            } else
            {
                return rootView;
            }
            return rootView;
        }
    }
} 
```

= 可扩展列表视图适配器

```
public class ExpandableFaceList extends BaseExpandableListAdapter implements ExpandableListAdapter
{
    public Context context;
    private LayoutInflater inflator;
    private float mDensity = 1f;

    private boolean bShowSw = true;
    private ColorPickerMenuView cp;
    private Switch sw;

    public ExpandableFaceList(Context context)
    {
        this.context = context;
        this.inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        mDensity = context.getResources().getDisplayMetrics().density;
    }

    @Override
    public int getGroupCount()
    {
        return 1;
    }

    @Override
    public int getChildrenCount(int groupPosition)
    {
        return 6;// because there are 6 faces to a cube
    }

    // list views
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent)
    {
        View v = convertView;
        TextView tv;

        if(v == null)
        {
            v = inflator.inflate(R.layout.exlist_head, parent, false);

            tv = (TextView) v.findViewById(R.id.exList_Title);
            if(tv != null)
                tv.setText("Face Colors");

            tv = (TextView) v.findViewById(R.id.exList_Summary);
            String s_text = "The color for each face, click to ";
            s_text += ((isExpanded)? "collaspe": "expand");
            if(tv != null)
                tv.setText(s_text);
        } else
        {
            tv = (TextView) v.findViewById(R.id.exList_Summary);
            String s_text = "The color for each face, click to ";
            s_text += ((isExpanded)? "collaspe": "expand");
            if(tv != null)
                tv.setText(s_text);
            parent.invalidate();
        }        

        return v;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent)
    {
        View v = convertView;

        if(v == null)
        {
            if(bShowSw)
            {
                v = (LinearLayout) inflator.inflate(R.layout.face_info_sw, parent, false);
            } else
            {
                v = (LinearLayout) inflator.inflate(R.layout.face_info, parent, false);
            }
        }

        switch(childPosition)
        {
        case 0:
            v.setTag("Front");
            break;
        case 1:
            v.setTag("Back");
            break;
        case 2:
            v.setTag("Left");
            break;
        case 3:
            v.setTag("Right");
            break;
        case 4:
            v.setTag("Top");
            break;
        case 5:
            v.setTag("Bottom");
            break;
            }

        Log.i("ELV", "Pos:" + childPosition);

        cp = (ColorPickerMenuView) v.findViewById(R.id.face_color);
        cp.setTitle((String) v.getTag());

        cp.setOnClickListener(new OnClickListener() {
            public void onClick(View v) { UpdateData(v); }
        });

        if(bShowSw)
        {
            sw = (Switch) v.findViewById(R.id.face_sw);
            sw.setOnClickListener(new OnClickListener() {
                public void onClick(View v) { UpdateData(v); }
            });
        }

        return v;
    }

    private void UpdateData(View v) { }

    @Override
    public Object getGroup(int groupPosition)
    {
        return groupPosition;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition)
    {
        return "Child:" + groupPosition + "." + childPosition;
    }

    @Override
    public long getGroupId(int groupPosition)
    {
        return groupPosition;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition)
    {
        return childPosition;
    }

    @Override
    public boolean hasStableIds()
    {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }
} 
```

= Activity 的 xml 视图

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <android.support.v4.view.PagerTitleStrip android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:textColor="#fff"
        android:paddingTop="4dp"
        android:paddingBottom="4dp" />

</android.support.v4.view.ViewPager> 
```

= m_backdrop.xml（背景设置菜单）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:app="http://schemas.android.com/apk/res/com.zyphronics.aquafinger">

      <RelativeLayout
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:orientation="vertical" >

            <TextView
            android:id="@+id/Title_GeneralSettings_text"
            style="?android:attr/listSeparatorTextViewStyle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="General Settings" />

        <ExpandableListView
            android:id="@+id/FaceList"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_below="@id/Title_GeneralSettings_text" >
        </ExpandableListView>

        </RelativeLayout>

</ScrollView> 
```

= face_info.sw.xml（与face_info.xml相同，但没有开关）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Switch
        android:id="@+id/face_sw"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:tag="face_sw"
        android:text="Enabled?"
        android:textOff="No"
        android:textOn="Yes" />

    <com.zyphronics.AF.Controls.colorpicker.ColorPickerMenuView
        android:id="@+id/face_color"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:tag="face_color" />
</LinearLayout> 
```

即使在 face_info_sw.xml 中没有“ColorPickerMenuView”部分，子视图仍然没有被调用。我也尝试过单独使用相对布局，而不是在滚动视图中，但这阻止了进一步添加的项目被滚动到（并且还使自定义控件具有奇怪的大小）。

解决这个问题的任何帮助都会很棒。如果有人需要这个（与eclipse兼容）的打包源，如评论中所示，我会回复一个链接。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-08-19T14:37:15.633

问题是，您的 ExpandableListView 在 ScrollView 中。这在大多数情况下是布局错误的结果，您应该尽量避免它。

然而，有时它是唯一的解决方案（这实际上不是真的，但其他解决方案可能超出了范围）。您的解决方案也有效，但有点复杂。而是像这样编写一个自定义 ExpandableListView：

```
public class ExpandExpandableListView extends ExpandableListView{
    boolean expanded = true;

    public ExpandExpandableListView(Context context) {
        super(context);
    }

    public ExpandExpandableListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ExpandExpandableListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public boolean isExpanded()
    {
        return expanded;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (isExpanded())
        {
            // Calculate entire height by providing a very large height hint.
            // View.MEASURED_SIZE_MASK represents the largest height possible.
            int expandSpec = MeasureSpec.makeMeasureSpec(MEASURED_SIZE_MASK, MeasureSpec.AT_MOST);
            super.onMeasure(widthMeasureSpec, expandSpec);

            ViewGroup.LayoutParams params = getLayoutParams();
            params.height = getMeasuredHeight();
        }else{
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    public void setExpanded(boolean expanded)
    {
        this.expanded = expanded;
    }
} 
```

在你的 m_backdrop.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    ...    

      <RelativeLayout
         ...

        <com.package.name.to.class.ExpandExpandableListView
            android:id="@+id/FaceList"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_below="@id/Title_GeneralSettings_text" >
        </ExpandableListView>

        </RelativeLayout>

</ScrollView> 
```

已经是这样了。它应该按预期工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T08:05:54.247

令人遗憾的是，没有人能够回答这个问题......但是，幸运的是我能够找到解决这个问题的方法，因此其他人也可以将可扩展的列表视图添加到他们的片段中。

我在查看微调器的源代码时找到了解决方案（因为我想用自定义条目制作微调器）。代码中的关键点在于它的“onMeasure”，当它测量它的所有孩子时......嗯，高达 15 的预定义限制，但测量孩子是重点。

= 解决方案 = 创建适配器时，您需要传入您的父视图。这是关键，因为它是您从适配器到视图的唯一链接（只有简单的方法）。

```
public Context context;
public ExpandableListView parent;
private LayoutInflater inflator;
// Only measure this many items to get a decent max height.
private static final int MAX_ITEMS_MEASURED = 15;

public ExpandableFaceList(Context context, final ExpandableListView parent)
{
    this.context = context;
    this.parent = parent;
    this.inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mDensity = context.getResources().getDisplayMetrics().density;
} 
```

接下来，在您的“getGroupView”中，因为这似乎是唯一通常被称为的东西，您需要添加以下代码：

```
public View getGroupView(int groupPosition, boolean isExpanded,
View convertView, ViewGroup parent)
{
    if(convertView != null)
    {
        int nH = 0;
        if(isExpanded)
        {
            nH = measureChildrenHeight(groupPosition);
        } else
        {
            nH = convertView.getMeasuredHeight();
        }
        parent.getLayoutParams().height = (int) (nH * mDensity);

        parent.invalidate();
    }

    return convertView;
} 
```

上面代码中的关键部分是“measureChildrenHeight”，“convertView.getMeasuredHeight()”只是在折叠时恢复ELV。测量子代代码如下：

```
int measureChildrenHeight(int groupPosition)
{
    int height = 0;
    View itemView = null;
    LinearLayout viewGroup = new LinearLayout(context);
    viewGroup.setOrientation(LinearLayout.VERTICAL);

    final int widthMeasureSpec =
    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    final int heightMeasureSpec =
    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);

    // Make sure the number of items we'll measure is capped. If it's a huge data set
    // with wildly varying sizes, oh well.
    int start = 0;//Math.max(0, getSelectedItemPosition());

    final int end = Math.min(getChildrenCount(groupPosition), start + MAX_ITEMS_MEASURED);
    final int count = end - start;
    start = Math.max(0, start - (MAX_ITEMS_MEASURED - count));
    for (int i = start; i < end; i++) 
    {
        itemView = getChildView(groupPosition, i, (i+1 == end), itemView, viewGroup);
        if (itemView.getLayoutParams() == null)
        {
            itemView.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT));
        }
        itemView.measure(widthMeasureSpec, heightMeasureSpec);

        if(i+1 != end)
        height += itemView.getMeasuredHeight();//Math.max(height, itemView.getMeasuredHeight());
    }

    return height;
} 
```

注意：我不得不调整代码以排除最后一项的高度，因为它在最后一项下方添加了额外的空间。如果你有不同身高的孩子，可能会有麻烦。我仍然在儿童/组标题下方有一些空白空间，但这是可以原谅的（与之前的数量不同，它是 3-4 个孩子高）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-02T03:34:07.550

查看您的控件是否可见。我以编程方式将其设置为不可见。

# c - 重试机制和超时消息

> ID：15651289
> 
> 赞同：0
> 
> 时间：2013-03-27T03:12:14.747
> 
> 标签：c, linux, data-structures, network-programming

我在 Linux 服务器上实现了一个配置系统，代码很大，所以我要放算法，它的工作原理是这样的

```
1\. Read provisioning commands from file
2\. Send it to another server using TCP 
3\. Save the request in hash.
4\. Receive the response then
    A. if successful response received then remove request from hash 
    B. if failed response received then retry the message 
```

我现在遇到的问题是当程序由于超时原因没有收到响应时，请求将永远等待响应并且不会重试。

我尝试使用计时器，但这并没有帮助，因为我最终会得到这么多等待计时器，而且我不确定这是否是这样做的好方法。

问题是如何将消息保存在某些数据结构中，并在另一端没有响应时检查以删除或重试它？

# objective-c - 在 VC 之间移动数据不起作用

> ID：15651293
> 
> 赞同：0
> 
> 时间：2013-03-27T03:12:26.943
> 
> 标签：objective-c, viewcontroller

我知道我最近问了一个与此问题稍有相似的问题，但我将在几个小时内提交项目，这是我剩下的唯一错误。

在第一个 VC 中：

```
- (void)textViewDidEndEditing:(UITextView *)textView {
SecondViewController *theVCMover = [[SecondViewController alloc] init]; //I imported the .h file

    theVCMover.rawUserInput = textView.text;
    //If I put an NSLog of theVCMover.rawUserInput here, it works and displays the string

    theVCMover.hexOrBinIndex = hexOrBin.selectedSegmentIndex; //same problem here 
```

在第二个 VC 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog (@"Bt-dubs, the moved text is %@", rawUserInput); //is (null) here
    CleanerText.text = rawUserInput; //CleanerText is a TextView
} 
```

我无法将用户在第一个 VC 中输入的文本移动到第二个 VC。我尝试调试并初始化 theVCMover.rawUserInput，它确实接收 textView.text 并将其成功保存在第一个 VC 中，但随后它在移动到第二个 VC 时迷失了方向，并在那里显示为 (null)。我一夜之间尝试了很多不同的方法，每一种都有自己的死胡同……但是这个相当简单，所以我想在我未来的项目中使用它。

PS起初我太关心在按下第二个选项卡（第二个VC）后立即显示的移动字符串，但现在我关心的只是成功移动那个该死的字符串。永远的感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:32:18.173

如果要将文本推送到选项卡栏中已存在的视图控制器，则不应在该`textViewDidEndEditing`方法中初始化新的视图控制器。您应该更改标签栏已有的 VC 中的文本。

```
// Not nice code because it uses magic numbers and fixed locations of view
// controllers in the tab bar
- (void)textViewDidEndEditing:(UITextView *)textView {
  // Assumes the SecondViewController is the second tab on the tab bar controller
  SecondViewController *theVCMover = [self.tabBarController.viewControllers objectAtIndex:1]; 

  theVCMover.rawUserInput = textView.text;
  theVCMover.hexOrBinIndex = hexOrBin.selectedSegmentIndex;
  .....
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:24:45.907

是范围问题吗？在分配了 theVCMover.hexOrBinIndex 之后，您还没有显示代码。大概这就是你显示第二个 VC 的地方（比如你推动它或其他东西）。否则当 textvewDidEndEditing 退出时，VCMover 将超出范围，并且您所做的更改将在实际加载视图时丢失。您可以 NSLog theVCMover 然后在 viewDidLoad 中使用 'self'，这些应该是同一个对象。如果它们不是您加载的视图，则不是您初始化的视图

# iphone - 如何使用 Tapgesture 找到我们正在触摸的对象

> ID：15651296
> 
> 赞同：0
> 
> 时间：2013-03-27T03:12:44.530
> 
> 标签：iphone, uiview

我在 self.view 上有很多 UIview 对象，而且 self.view 上也可以使用一键手势。现在我担心的是，当我触摸 self.view 时，我想知道在我的触摸下是否存在任何 UIView 对象，如果我想获取该对象的属性（如标签值）。请帮助我如何获取信息。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:18:22.130

你可能想读我关于这个主题的书：

[http://www.aeth.com/iOSBook/ch18.html#_hit_testing](http://www.apeth.com/iOSBook/ch18.html#_hit_testing)

该部分的示例代码：

```
CGPoint p = [g locationOfTouch:0 inView:self]; // g is the gesture recognizer
UIView* v = [self hitTest:p withEvent:nil]; 
```

`self`手势识别器附加到的超级视图在哪里。您需要进行必要的替换...

# tmux - tmux-powerline 状态栏在终端而不是在 iterm2 中工作

> ID：15651302
> 
> 赞同：0
> 
> 时间：2013-03-27T03:13:06.047
> 
> 标签：tmux, iterm2

使用相同的主题 .tmux-powerlinerc 和 .tmux.conf，我的 tmux-powerline 状态行在 Apple Terminal 中有效，但在 iTerm2 中无效。在 iTerm2 中，它不显示左侧状态。

在我第一次安装 tmux-powerline 并对其进行配置后，状态行工作正常。在编辑我的主题文件副本时，左侧状态突然消失了，我没有尝试过将其恢复。

`git checkout -- <file>`我通过无济于事退出了所有更改。我完成了删除 tmux-powerline 并重新开始认为这是我搞砸的一些配置更改，再次没有结果。

Terminal.app 和 iTerm2 都设置了 UTF8 进行编码。我的 .tmux.conf 有`set -g ut8`和`set -g status-utf8 on`. 我没有使用修补字体，因此`TMUX_POWERLINE_PATCHED_FONT_IN_USE`设置为 false。

我最近没有对 iTerm2 的偏好进行任何更改。

我不知道为什么左侧状态突然消失以及如何使其恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:13:05.753

我通过卸载 iTerm2 并重新安装它解决了这个问题。删除 com.googlecode.iterm2.plist 文件没有帮助，所以我求助于从轨道上对整个东西进行核对。

不确定是什么损坏了，但我很高兴重新安装纠正了它。

# javascript - 对象文字与函数的 Javascript 性能提升

> ID：15651305
> 
> 赞同：2
> 
> 时间：2013-03-27T03:13:39.143
> 
> 标签：javascript, html, resources, game-development

所以，让我们在这里想大一点。假设你有一个完整的 MMO 想要组合在一起。自然，这涉及到来自生物、物品、精灵表、瓷砖地图、对话、角色等的大量资源。在典型的游戏引擎中，您会根据一些任意指示符加载或卸载这些资源，例如地图或“区”。

有这个的Javascript版本吗？例如，当游戏循环运行时，您是否能够做到。

（伪代码）

```
If playerPosition = theRightPlace {
    Load Resources for Next Zone
    Unload Resources for Previous Zone
} 
```

这样做有性能提升吗？还是应该只加载游戏的所有资源并完成它？假设在某些区域我有一个类 UglyMonster，而在另一个区域我有 UglierMonster。

我可以通过 John Resig 的经典继承类结构实例化这两个类（在我点击这个对话启动器之前我一直在使用它，这对于这种程序很方便）

```
var UglyMonster = Monster.extend({
    Stuff why it is ugly;
    Make a position!
    Attack player!!!
});

var Monster1 = new UglyMonster(); 
```

或功能

```
function UglyMonster(name, position) {
    Create Ugly Monster!!!! Attack player!
    Stuff why it is ugly
}

var Monster1 = new UglyMonster('Fred', 100); 
```

如果我将它们都声明为变量，那么游戏中的所有怪物都坐在全局变量中，不是吗？有没有办法在不实际构造变量的情况下声明变量？我是 Javascript 中整个继承游戏的新手，所以也许我遗漏了一些明显的东西。

处理这些浮动的类的最佳方法是什么？离开他们？删除它们？通过函数实例化？它有明显的不同吗？

我希望我已经足够清楚地说明了我希望实现的目标。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:29:24.180

我不完全确定你在问什么，但是

```
function UglyMonster(name, position) {
   ...
} 
```

和

```
var UglyMonster = function (name, position) {
    ...
} 
```

是等价的表达式。函数是 Javascript 中的对象。在这两种情况下，这些函数都保存为变量并作为属性附加到全局对象上。

这两种方法不会有任何明显的性能差异。

据，直到...为止

> > 有没有办法在不实际构造变量的情况下声明变量？

您可以声明一个变量而不定义它。只是`var x;`。或者您可以声明一个类构造函数，而无需立即实例化该类的对象。您刚刚定义了一个实际上还没有运行的函数。

### 更新

关于如何在 javascript 中读取函数的更多背景知识。

当 javascript 引擎解释一个新的作用域时，它首先将代码中的所有变量声明提升到当前作用域（全局作用域或当前函数）的顶部。这些变量然后“存在”但未定义。然后它处理函数声明，因为它们默认移动到顶部。

所以下面的代码

```
var x = 3+2;

var UglyMonster = function (name, position) {
    ...
}

function UglyMonster2(name, position) {
   ...
} 
```

被解释为好像是这样写的：

```
var UglyMonster, UglyMonster2,x;

UglyMonster2 = function(name, position) {
   ...
}

x = 3+2;

UglyMonster = function (name, position) {
    ...
} 
```

重要的是要注意在这个例子中实际上没有运行任何函数。它们刚刚被定义。在您运行之前，不会运行任何函数，也不会创建 UglyMonster 的实例

`new UglyMonster()`. 如果你正在创造许多怪物，那么尽可能长时间地推迟创造这些怪物可能是有价值的。但最终，性能将取决于很多事情，唯一确定的方法就是测试它并自己尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:37:13.470

这是很多问题！让我们一一尝试。

### 我应该加载和卸载我的资源吗？

我相信游戏引擎将资源*从磁盘加载到内存中*。在浏览器 JavaScript 中，您无法从磁盘读取，必须从网络读取，这很慢。因此，只有在您遇到严重的内存使用问题时才加载/卸载（使用浏览器工具检查）。

### *如果我将它们都声明为变量，那么游戏中的所有怪物都位于全局变量中*

如果你说`function UglyMonster`的是不同的，那不是。它也在全球范围内。如果您想保持全局范围的清洁，请将您的代码包装在立即调用的函数表达式中：

```
(function(){}(
    // your code here
)); 
```

### *有没有办法在不实际构造变量的情况下声明变量？*

不确定你的意思，但你可以定义对象文字：

```
var Monster = {
    attack : function() {  },
    eyes : 5
}; 
```

您还可以从任何对象继承`Object.create`：

```
var UglyMonster = Object.create(Monster); 
```

### *处理这些浮动的类的最佳方法是什么？离开他们？删除它们？通过函数实例化？它有明显的不同吗？*

我不知道你在这里问什么！:)

# c# - 如何访问附加到派生类的值？

> ID：15651307
> 
> 赞同：1
> 
> 时间：2013-03-27T03:13:46.070
> 
> 标签：c#, inheritance

我有一堂课叫`Animal`. 对于任何给定的动物`a`，`a.number_of_legs`应该是 4。

我有一个名为的类`Human`，它继承自`Animal`. 对于任何给定的 human `h`，`h.number_of_legs`应该是 2。

如何设置`number_of_legs`属性？

* * *

这是我到目前为止所拥有的：

```
 class Animal {
      int number_of_legs = 4;
 }

 class Human : Animal {
      int number_of_legs = 2;
 } 
```

但如果我随便拿一些动物问它有多少条腿，答案总是 2：

```
 Animal x = new Animal();
 Animal y = new Human();
 x.number_of_legs // --> 4
 y.number_of_legs // --> 4 
```

我知道这个 new`Human`被视为一个，`Animal`因为变量`y`存储一个`Animal`.

如何设置`number_of_legs`属性`x.number_of_legs`为 4 和`y.number_of_legs`2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T03:16:23.443

首先，您应该将实际的 C#[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)用于像这样的可公开访问的值，而不是公共字段。

在基类中标记该属性[`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx)，以便它可以在派生类中被覆盖。

```
public class Animal {

    // By default, Animals will have 4 legs.
    public virtual int NumberOfLegs { get { return 4; } }
} 
```

然后[`override`](http://msdn.microsoft.com/en-us/library/ebca9ah3.aspx)它在派生类中提供不同的实现。

```
public class Human : Animal {

    // But humans have 2 legs.
    public override int NumberOfLegs { get { return 2; } }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:49:03.547

尝试这个 ...

```
namespace StackOverflow
{
    public class Animal
    {
        public int Legs { get; set; }
        public Animal() { Legs = 4;  }
        public Animal(int legs) { Legs = legs; }
    }
    public class Human : Animal
    {
        public Human() : base(2) { }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:26:02.753

乔，你也可以试试……（对于派生类中的多个初始值设定项）

```
namespace StackOverflow
{
    public class Animal
    {
        public int Legs { get; set; }
        public string Color { get; set; }
        public string Origin { get; set; }

        public Animal() { Initialize(); }
        public virtual void Initialize() { Legs = 4; Color = "blue"; Origin = "everywhere"; }
    }

    public class Human : Animal
    {
        public Human() { }
        public override void Initialize() { Legs = 2; Color = "black"; Origin = "Africa"; }
    }

    public class Program
    {
        public static void main()
        {
            Animal a = new Animal();
            Animal h = new Human();
        }
    }
} 
```

# jqgrid - jqgrid编辑单元格在失去焦点时触发

> ID：15651310
> 
> 赞同：0
> 
> 时间：2013-03-27T03:13:51.520
> 
> 标签：jqgrid

我在 jqgrid 中使用单元格编辑进行编辑。

当用户开始在 beforeeditcell 上编辑某些单元格时，我正在尝试设置 status editing = true ，当用户离开文本框时，editing = false 。

```
beforeEditCell : function(rowid, iRow, iCol){
                    selICol = iCol;
                    selIRow = iRow;
                    editingstatus = true;
                }, 
```

我想将编辑状态设置回 false

```
beforeSaveCell : function(){
                    editingstatus=false;
                }, 
```

但如果用户没有更改数据.. 似乎 beforesavecell 没有被触发并且editingstatus 仍然是真实的。什么比之前的savecell 事件用户没有更改数据更合适的触发器... TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:54:41.627

尝试**afterEditCell**事件：

```
afterEditCell: function(){
                    editingstatus=false;
                }, 
```

# angularjs - ng-view 在 angularjs 中的嵌套

> ID：15651317
> 
> 赞同：4
> 
> 时间：2013-03-27T03:14:52.437
> 
> 标签：angularjs

我正在尝试将两个角度应用程序放在一页上。

我的场景：我有一个有很多应用程序的网站。所以对于例如页眉，页脚，左侧边栏，右侧边栏不会改变整个网页，只有内容会改变。所以我使用了角度模板（ng-view）。在单击日历等应用程序时，它将在 ng-view 中加载。在日历应用程序中，我有一个用于不同视图（月、周、日）的 ng-view，所以它会像

```
<ng-view>
    calendar or some other app
    <ng-view>
        month or week or day or SOMEOTHER APP TEMPLATE
    </ng-view>
</ng-view> 
```

当我尝试这个时，浏览器崩溃了。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:58:58.503

`ngView`加上`$routeProvider`，表示根据当前路由/uri更新。这也意味着您不能将两个不同的视图绑定到一个 URI。

您可以只使用`ngInclude`要显示的网址。它的工作原理与从服务器获取方面相同`ngView`。

如果您只提供 url，您不会一次下载所有 3 个 url，它将*按需*获取。

但是，在大多数应用程序中，最好一次提供所有可能的静态文件，然后将其缓存，这将导致整体更好的性能；只有初始负载会受到一点影响；这比一般的慢速应用程序要好。

如果这会使整个应用程序响应更快，我宁愿再等 2 秒。

# asp.net - DotNetNuke - CS1056：意外字符“਍”

> ID：15651327
> 
> 赞同：0
> 
> 时间：2013-03-27T03:15:27.963
> 
> 标签：asp.net, dotnetnuke

在过去的几周里，DNN 一直在尝试回答为什么会发生这种情况——但没有得到任何回复。

在 WinHost 上全新安装 DNN7 时，当我尝试添加新页面时，出现以下错误：

```
Error: is currently unavailable. DotNetNuke.Services.Exceptions.ModuleLoadException:         
e:\web\speedyto\DesktopModules\Admin\Tabs\ManageTabs.ascx.cs(2): 
error CS1056: Unexpected character '਍' ---> System.Web.HttpCompileException: 
e:\web\speedyto\DesktopModules\Admin\Tabs\ManageTabs.ascx.cs(2): error CS1056: Unexpected character '਍' at 
System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) at 
System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at 
System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at 
System.Web.Compilation.BuildManager.GetVPathBuildResultWithAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at 
System.Web.UI.TemplateControl.LoadControl(VirtualPath virtualPath) at 
DotNetNuke.UI.ControlUtilities.LoadControl[T](TemplateControl containerControl, String ControlSrc) at 
DotNetNuke.UI.Modules.WebFormsModuleControlFactory.CreateModuleControl(TemplateControl containerControl, ModuleInfo moduleConfiguration) at 
DotNetNuke.UI.Modules.ModuleControlFactory.LoadModuleControl(TemplateControl containerControl, ModuleInfo moduleConfiguration) at 
DotNetNuke.UI.Modules.ModuleHost.LoadModuleControl() --- End of inner exception stack trace --- 
```

我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:49:28.430

我建议在您的本地计算机上安装完全相同版本的 dotnetnuke 并尝试重新生成问题。如果它没有重新生成，请覆盖`\DesktopModules\Admin\Tabs\ManageTabs.ascx.cs`您的主机副本中的文件。

我相信这会帮助你找到一些方向。如果您可以提供 dotnetnuke 的确切构建版本（当前版本是 07.00.04），我可以提出更多解决方案。

*   普拉尚

# c++ - 这个 C++ 宏中的 # 符号是什么意思？

> ID：15651331
> 
> 赞同：3
> 
> 时间：2013-03-27T03:16:21.067
> 
> 标签：c++, macros

`#`这个 C++ 宏是什么意思：

```
#define ASSERT(expr)   \
   {if (!(expr)){CM_ERROR_TRACE("assert  "<< #expr <<" failed"); assert(expr);} } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T03:19:49.843

这是“字符串化”运算符。在宏中， if`x`是一个宏参数，然后`#x`计算为`x`. 例如，宏

```
#define STRINGIZE(x) #x 
```

在这种情况下评估

```
STRINGIZE(2 + 3 + 4) 
```

扩展到

```
"2 + 3 + 4" 
```

这里的宏是

```
#define ASSERT(expr)   \
   {if (!(expr)){CM_ERROR_TRACE("assert  "<< #expr <<" failed"); assert(expr);} } 
```

这里的使用`#expr`意味着如果表达式的计算结果不为真，它将打印出宏参数的字符串表示。例如

```
ASSERT(myFunction()) 
```

会扩大到

```
{if (!(myFunction())){CM_ERROR_TRACE("assert " << "myFunction()" << " failed"); assert(myFunction());} } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T03:18:34.153

当宏被预处理 `#expr`时将替换为`"expr"`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T03:19:50.523

`#`是一个预处理器操作符，它从标记创建一个字符串。

```
#define STRINGIZE(macro) #macro 
```

`STRINGIZE(Hello)`将替换为“你好”

# java - 将 JLabel 部分显示在另一个 JLabel 之上

> ID：15651346
> 
> 赞同：3
> 
> 时间：2013-03-27T03:18:03.480
> 
> 标签：java, swing, user-interface, jlabel, miglayout

我正在尝试在我的 GUI 中显示卡片，并且我想重叠卡片以节省空间。但是，我似乎无法让它工作。我目前正在使用 MigLayout，但感觉更像是 JLabel 问题而不是其他问题。

要从高层次上描述它，请考虑在现实生活中玩纸牌游戏。当你正常持牌时，你只需要看到这张牌的一部分，这张牌的大部分被另一张牌重叠，以此类推，直到最后一张牌完全显示出来，因为它上面什么都没有。我想以一种只显示下面的部分卡片的方式重叠，然后完全显示最上面的卡片。

当前的问题是，当我将 JLabel 添加到 JPanel 时，它会将最新的标签放在已经存在的标签后面。我希望它出现在已经存在的东西之前。我似乎找不到任何方法可以让我设置哪个标签在前面。

我想做类似的事情：

将卡片 1 放入单元格 0 0 将卡片 2 放入单元格 0 0 并带有转置的 y 位置 两张卡片重叠的任何区域都有卡片 2 在顶部

只需添加它就会将其置于后面，这表明组件的显示具有先到先得的优先级。我宁愿有一个后到先得的优先权。就像我说过的那样，我没有运气试图找到一种允许任何这些的方法。

如果有任何不清楚的地方，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T04:01:22.940

看起来 JPanel 是从 Container 继承而来的，Container 有一个方法`setComponentZOrder()`，听起来就像你需要的那样。

[setCompoentZOrder() 文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#setComponentZOrder%28java.awt.Component,%20int%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T05:10:09.760

查看[Overlap Layout](http://tips4java.wordpress.com/2009/07/26/overlap-layout/)，它更详细地解释了 ZOrder 的工作原理，甚至可以为您提供一个布局管理器来帮助您进行纸牌游戏。

# java - 如何使用if语句并搜索数组中的最后一个字母

> ID：15651348
> 
> 赞同：-4
> 
> 时间：2013-03-27T03:18:14.770
> 
> 标签：java, arrays, string, if-statement

我基本上需要创建一个 if 语句，基本上说“如果数组中字符串的最后一个字母是 P，那么等等等等，但我不知道正确的方法。

这是我到目前为止所拥有的：

```
public double calculateBonus(String str)            
    {
        double dResult = 0.0;
        double dResult = 0.0;
        String twoLol = str.substring( 0,2);
        for ( int d=0; d<bonusPts.length; d++ ) 
            { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:20:17.803

看String类的方法，有一个叫.length()和.charAt(int index)，.charAt(int index)返回的是你指定的索引中的字符，所以如果你说yourString.charAt(10)它会给你第十个位置的字符，所以很容易做一个比较

> int length() 返回此字符串的长度。
> 
> char charAt(int index) 返回指定索引处的字符。

结合这两种方法，你可以很容易地得到你想要的字符，从那时起很容易做一个

```
if(c=='P') 
```

c 是一个字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:21:00.780

您可以使用String 类的`charAt()`and`length()`方法。下面的代码示例将产生“d”

```
String str = "hello world";
char last = str.charAt(str.length()-1);
System.out.println(last); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:20:29.927

```
if (twoLol.charAt(twoLol.length()-1)=='P'){
   //blah deee blah
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T05:53:02.443

基本上，字符串的最后一个字符可以通过whateverString.length()-1 找到。您也可以使用循环找到它，但这更快。现在只需将whateverString.lenth()-1 视为一个字符并将其与'P' 或任何其他值进行比较！

# regex - 正则表达式过滤单词列表

> ID：15651353
> 
> 赞同：0
> 
> 时间：2013-03-27T03:18:52.877
> 
> 标签：regex, filter

我需要一个简单的正则表达式，但我不能自己制作。我尝试不同的方法但没有运气

我有一个需要从文本 xej 中排除的单词列表。

```
Text=Hoy es un dia soleado y mañana las nubes no estaran y los pajaros tampoco 
```

我将从文本中过滤的单词列表：`y`, `es`, `Es`, `ES`, `un`, `UN`, `Un`, `las`, `los`, `la`,`lo`等

因此，生成的文本将是：

```
Hoy dia soleado mañana nubes estaran pajaros tampoco 
```

这些词将是我需要从文本中过滤的过滤器列表。

我试过这样的事情：

```
(?![Ll][aAoO][sS]*\b|[Ee]?[Ll]\b])[\w]+ 
```

所以我可以过滤：

`?![Ll][aAoO][sS]*\b`, `Las`, `Los`, `las`, `la`_`lo`

`[Ee]?[Ll]\b]`, `el`, `El`, `EL`_`eL`

但是，如果我应用该正则表达式，则字母 L 和 l 不会被过滤。

我怎样才能制作这个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:52:07.970

```
s/\b(y|es|Es|ES|un|UN|Un|las|los|la|lo)\b//g 
```

解释：

`\b`是单词边界。它会查找单词中断的地方，但实际上并没有选择任何内容。

# r - 具有不同点大小的散点图

> ID：15651362
> 
> 赞同：4
> 
> 时间：2013-03-27T03:20:01.927
> 
> 标签：r

我是新的 R 用户，所以如果我的问题看起来很简单，请原谅我。尽管我研究了 Cookbook 和 The Handbook of Statistical Analysis，但我一直无法根据自己的喜好构建特定的图表。

我试图绘制的两列是年龄和收入。年龄采用整数值（40、34、50，...），而收入采用二进制值（<= 50k，>=50k）。有 32561 行不同年龄的数据。我想创建一个以年龄为 X 轴和收入二进制变量为我的 Y 轴的绘图，绘图（年龄，收入）。这当然会导致具有两条平行线的图，因为收入是一个很好的二元变量。我试图从情节中获得的信息是属于任一收入类别的给定年龄的人数。我想这样做的方法是让圆圈大小与每个收入阶层中特定年龄的人数成正比。例如，如果 25 岁时有 700 人属于 <=50k 组，而 150 人属于另一个组，两点的大小会因人数而异。因此，落入 <=50k 桶的 700 人将由一个大圆圈表示，而后者则是一个小得多的圆圈。我想为所有年龄段的人做这个......我希望这是有道理的。如果需要澄清，请告诉我。谢谢！我相信在不久的将来你会再次收到我的来信。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T03:29:57.777

用示例数据更容易回答这些问题，但在这种情况下，很容易想出一些大致反映问题的东西：

```
age = rep(c(20, 30, 40, 50, 60), 20)
income = c(rep(">50k", 80), rep("<50k", 20))

df1 = data.frame(age=age, income=income) 
```

首先，我们生成数据摘要，获取`count`每个年龄和收入组合的人：

```
library(plyr)
df1_summary = ddply(
  df1,
  .(age, income),
  summarize,
  count=length(income)
  ) 
```

然后很容易使用`ggplot2`：

```
ggplot(df1_summary, aes(age, income, size=count)) +
  geom_point() 
```

![大小映射到计数](../Images/fd8e678132f4a423ebdfcb9d9a92c4ba.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T05:23:12.773

这是一个使用基本 R 图形的版本，采用 @Marius 的示例数据：

```
test <- with(df1,table(age,income))
test <- as.matrix(as.data.frame.matrix(test))
plot(
  row(test),
  col(test),
  cex=test/3,pch=20,
  xlim=c(0.5,nrow(test)+0.5),
  ylim=c(0.5,ncol(test)+0.5),
  axes=FALSE,
  ann=FALSE
)
axis(1,at=1:nrow(test),labels=rownames(test),cex.axis=0.8)
axis(2,at=1:ncol(test),labels=colnames(test),cex.axis=0.8)
title(xlab="Age Group",ylab="Income")
box() 
```

![在此处输入图像描述](../Images/636bed98b48e421470a1a0a6f4b9ea76.png)

# ios - 旋转/移动一个 uiview 并同时移动其他

> ID：15651365
> 
> 赞同：1
> 
> 时间：2013-03-27T03:20:19.660
> 
> 标签：ios, objective-c, uiview, rotation, move

这是我在这里的第一个问题，我是 iOS 编程的新手。

我在网上搜索了很多技巧，其中有很多来自 stackoverflow 的提示。我已经搜索了 Xcode 帮助并观看了视频等，但我似乎仍然无法让它工作。

我有一个包含大约 6 个不同 UIView 的视图。其中一个 UIView 是位于垂直面板的另一个 UIView 上方的箭头图像。箭头图像正在接收触摸，然后触发两种方法

一种方法将面板和箭头向右移动。另一种方法是随着移动旋转箭头。

我试过`CATransform3DMakeRotation`,`CGAffineTransformMakeRotation`和`CATransform3DMakeRotation`，但是我不能让箭头随着箭头的移动和面板的移动而旋转。

我能达到的最好效果是使用`CATransform3DMakeRotation`，但这只是翻转箭头，并且不会为旋转设置动画。

其他人将旋转箭头，但不允许面板移动。

这是我旋转箭头的代码。如你看到的。我尝试过的很多已注释掉的项目。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    CGRect bugRect = [[[RightArrow layer] presentationLayer] frame];
    if (CGRectContainsPoint(bugRect, touchLocation)) {
        [self RotateArrowOFF];
        [self MovePanels];
        NSLog(@"Arrow tapped!");
    } else {
        NSLog(@"Arrow not tapped.");
        return;
    }

}

-(IBAction)MoveLeftColorPanel
{
    NSLog(@"Right Arrow Center %@", NSStringFromCGPoint(RightArrow.center));

}
- (void)MovePanels
{

    if (_PanelsAreOffScreen == NO) { 

        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionLayoutSubviews animations:^{
            RightPanel.center = CGPointMake(1065, 384);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 1 complete");
                             _PanelsAreMoving = YES;

                         }];
        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            LeftPanel.center = CGPointMake(-50, 384);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 2 complete");
                             _PanelsAreMoving = YES;

                         }];

        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            RightArrow.center = CGPointMake(1010, 82);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 3 complete");
                             _PanelsAreMoving = YES;

                         }];

        _PanelsAreOffScreen = YES;
    }
    else { 
        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            RightPanel.center = CGPointMake(914, 384);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 5 complete");
                         }];
        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            LeftPanel.center = CGPointMake(108, 384);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 6 complete");
                         }];
        [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            RightArrow.center = CGPointMake(836, 82);
        }
                         completion:^(BOOL finished) {
                             NSLog(@"Animation 7 complete");
                         }];

        _PanelsAreOffScreen = NO;
    }

}

- (void)RotateArrowOFF//:(CGRect)rect
{

    RightArrow.layer.anchorPoint = CGPointMake(0.06, 0.5);

    if (_PanelsAreOffScreen == NO)
    {
        [CATransaction begin];
        [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
        [CATransaction setValue:[NSNumber numberWithFloat:2.0f] forKey:kCATransactionAnimationDuration];
        CATransform3D RotateArrow = RightArrow.layer.transform;
        RotateArrow = CATransform3DMakeRotation(M_PI,0.0,0.0,1.0);
        RightArrow.layer.transform = RotateArrow;
    }
    else
    {
        [CATransaction begin];
        [CATransaction setValue:[NSNumber numberWithFloat:2.0f] forKey:kCATransactionAnimationDuration];

        CATransform3D RotateArrow = RightArrow.layer.transform;
        RotateArrow = CATransform3DMakeRotation(0,0.0f,0.0f,1.0f);
        RightArrow.layer.transform = RotateArrow;

        [CATransaction commit];
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:26:15.597

> ```
>  RightArrow.layer.transform = RotateArrow; 
> ```

所以你的问题是，为什么这里没有任何动画发生？问题是 RightArrow 是一个 UIView，`RightArrow.layer`它的“底层”也是。您不能仅通过分配给视图的属性来隐式地为视图的底层设置动画。你必须要么使用 UIView 动画（使用视图的`transform`属性），要么你必须直接使用核心动画（CABasicAnimation）。

这是一个例子（来自我的书）：

```
[CATransaction setDisableActions:YES];
v.layer.transform = CATransform3DRotate(v.layer.transform, M_PI/4.0, 0, 0, 1);
CABasicAnimation* anim = [CABasicAnimation animationWithKeyPath:@"transform"];
anim.duration = 0.8;
[v.layer addAnimation:anim forKey:nil]; 
```

# facebook - 以用户而非页面的身份发布到 Facebook 页面墙

> ID：15651366
> 
> 赞同：1
> 
> 时间：2013-03-27T03:20:28.600
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 facebook php sdk 尝试从我的页面选项卡应用程序发布到 facebook 粉丝页面。

如果它通过请求“manage_pages”权限像这篇文章一样发布为页面，我可以让代码工作：

[通过 PHP 发布到 Facebook 粉丝页面的简单示例？](https://stackoverflow.com/questions/7818667/simple-example-to-post-to-a-facebook-fan-page-via-php)

但是，我想以访问我的页面选项卡应用程序而不是页面本身的用户身份发布。如果我删除“manage_pages”权限，我会收到以下错误：

“(#200) 用户未授予应用程序自动发布提要故事的权限”

这是我的一些代码：

```
$fbPermissions = 'publish_actions,publish_stream';

    //Call Facebook API
    $facebook = new Facebook(array(
      'appId'  => $appId,
      'secret' => $appSecret
    ));

    $fbuser = $facebook->getUser();

    //Post variables we received from user
    $userPageId     = "999792964025950"; 
    $userMessage    = $_POST["reason"];

    if(strlen($userMessage)<1) 
    {
        //message is empty
        $userMessage = 'No message was entered!';
    }

    //HTTP POST request to PAGE_ID/feed with the publish_stream
    $post_url = '/'.$userPageId.'/feed';

         //posts message on page statues 
    $msg_body = array(
       'message' => $userMessage,
    );
        $postResult = $facebook->api($post_url, 'post', $msg_body ); 
```

我真的无法弄清楚为什么会这样以及发生了什么。我尝试设置访问令牌，但无济于事。

# ruby - Gem:Module 的未定义方法“searcher”

> ID：15651371
> 
> 赞同：1
> 
> 时间：2013-03-27T03:20:51.617
> 
> 标签：ruby, rake

当我运行时`bundle exec rake db:initial_setup`，出现错误：

> 耙中止！Gem:Module 的未定义方法“搜索器”。

我怎样才能解决这个问题？

这是 bundle exec rake db:initial_setup --trace 的输出

```
rake aborted!
undefined method `searcher' for Gem:Module
/home/jesse/workspace/canvas/lib/tasks/hair_trigger.rake:2:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:171:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:171:in `block in load_with_new_constant_marking'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:547:in `new_constants_in'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:171:in `load_with_new_constant_marking'
/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/tasks/rails.rb:14:in `block in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/tasks/rails.rb:14:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/tasks/rails.rb:14:in `<top (required)>'
/home/jesse/workspace/canvas/Rakefile:10:in `require'
/home/jesse/workspace/canvas/Rakefile:10:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/rake_module.rb:25:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:604:in `raw_load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:89:in `block in load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:88:in `load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:72:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:70:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.6/bin/rake:37:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>' 
```

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:04:04.133

这是因为 Gem.searcher 已被弃用，看来您最近更新了 ruby​​ gems。使用命令检查您的版本

```
$ gem -v 
```

您可以使用命令返回到任何旧版本

```
$ rvm rubygems 1.8.24 
```

# java - 将 JTextPane 的内容保存到普通文本文件失败

> ID：15651373
> 
> 赞同：0
> 
> 时间：2013-03-27T03:21:09.977
> 
> 标签：java, swing, file-io, jtextpane

我有以下代码块：

```
private void saveAs()
{
    CDocument currentDocument=this.panelMain().openedDocuments().get(this.panelMain().openedDocuments().size()-1);
    StyledDocument contents=currentDocument.getStyledDocument();
    DefaultEditorKit kit=new DefaultEditorKit();
    JFileChooser chooserSaveAs=new JFileChooser();

    chooserSaveAs.setDialogTitle("Save as ...");
    if(chooserSaveAs.showSaveDialog(this)==JFileChooser.APPROVE_OPTION)
    {
        String strNewFilename=chooserSaveAs.getSelectedFile().getName();
        BufferedOutputStream out;

        try
        {
            out=new BufferedOutputStream(new FileOutputStream(strNewFilename));
            kit.write(out,
                    contents,
                    contents.getStartPosition().getOffset(),
                    contents.getLength());
            out.close();
        }
        catch(IOException | BadLocationException ex)
        {
            Logger.getLogger(CFrameMain.class.getName()).log(Level.SEVERE,
                    null,
                    ex);
        }
    }
} 
```

一旦执行，此​​代码不会产生任何异常，但我无法在磁盘上的任何地方找到保存的文件（我已经使用 Total Commander 搜索了本地磁盘）。为什么没有生成文件？我目前正在使用 Windows 7 Ultimate 并尝试保存到登录用户的桌面（因为可能存在访问冲突问题......）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T03:23:13.257

获取文件而不是名称，它应该保存到正确的位置。

您还可以注销文件的绝对路径以查看它的位置。

```
 File file =chooserSaveAs.getSelectedFile();
    System.out.println(file.getAbsolutePath());
    FileOutputStream fos = new FileOutputStream(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:41:37.183

不，但我已经设法修复它。我使用了@Tom 的方法，它有效！这是代码块：

```
 try
    {
        out=new BufferedOutputStream(new FileOutputStream(file));
        kit.write(out,
                  contents,
                  contents.getStartPosition().getOffset(),
                  contents.getLength());
        out.close();
    }
    catch(IOException | BadLocationException ex)
    {
         bError=true;
         Logger.getLogger(CFrameMain.class.getName()).log(Level.SEVERE,
                        null,
                        ex);
     }
     finally
     {
          if(bError!=true)
          {
                       currentDocument.setFilename(chooserSaveAs.getSelectedFile().getAbsolutePath());
                      this.toolBarFileSwitcher().listOpenedFiles().model().set(this.toolBarFileSwitcher().listOpenedFiles().getSelectedIndex(),
                            currentDocument.filename());
                    this.toolBarFileSwitcher().updateUI();
           }
    } 
```

# java - 使用“列表”检索 BigQuery 的 queryResult 只得到 512 条记录

> ID：15651374
> 
> 赞同：0
> 
> 时间：2013-03-27T03:21:45.443
> 
> 标签：java, list, google-bigquery, google-api-java-client

queryResult 显示它有 13224 行，然后我用

```
List<TableRow> rows = queryResult.getRows(); 
```

然后它显示列表“行”只有 512 行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:31:45.317

如果行很大或有很多行，您可能无法取回所有行。您可以通过调用带有相应偏移量的 jobs.GetQUeryResults() 或 tabledata.List() 来获取剩余的行。

来自[https://developers.google.com/bigquery/docs/queries](https://developers.google.com/bigquery/docs/queries)：

1.  使用您的查询字符串调用 jobs.query。此方法需要一个可选的超时时间；如果设置为 0 或未指定，该方法将默认为 10 秒。如果查询在指定的超时时间内返回，该方法将返回第一页结果。如需其他结果，请按如下所述调用 jobs.getQueryResults。如果在查询完成之前查询超时到期，则该方法将返回 jobComplete=false，并且您必须调用 jobs.getQueryResults，如下所述。即使在超时期限之后，查询作业仍将继续运行，直到它成功或因为发生错误而完成。
2.  [如有必要] 调用 jobs.getQueryResults 以分页浏览其他结果，从超过其超时的查询中获取结果，或检查任何查询结果，直到临时表被删除。此方法允许您指定起始行，并且还采用与作业相同的超时。查询超时以允许在作业尚未完成时等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:32:14.183

我认为您必须使用结果集对象来获取该行。result_set.getString() 方法用于获取行的属性。

# python - Python：将值从函数传递到函数

> ID：15651376
> 
> 赞同：1
> 
> 时间：2013-03-27T03:21:53.983
> 
> 标签：python, return

我已经为此奋斗了三个小时。

**ETA- 应该提到这一点，但出于此类的目的，不允许使用全局变量。**

在函数 main() 中，当且仅当它是第一次运行整个函数时，我才想运行函数 firstPass。firstPass 函数初始化几个变量，并打印一些您不是第一次看到时不感兴趣的信息。

我有：

```
#Initialize variables that need to run before we can do any work here
count = 0

def firstPass():
    x = 5
    y = 2
    print "Some stuff"
    count = count + 1
    print "Count in firstPass is",count
    return count,x,y

def main ():
    print "Count in main is",count
    if count == 0:
        firstPass()
    else:
        #Do a whole bunch of other stuff that is NOT supposed to happen on run #1
        #because the other stuff uses user-modified x and y values, and resetting
        #to start value would just be self-defeating.

main() 
```

这在第一次传递时正确返回，但在随后的传递中，返回：

```
Count in main is 1 
```

这也是我在其他函数中用户修改的 x 和 y 值的问题。虽然我没有在这里修改它们，但我确实包含了它们，因为稍后我需要在代码中的函数之间传递多个值，但是当我为了示例而可以将它们放在这里时，谁愿意阅读所有这些...... .

我的印象是

```
return [variable] 
```

将变量的 CURRENT（即该变量在当前函数中的任何值）传递回其他后续函数。要么我的理解错了，要么我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:24:48.750

你需要做：

```
def firstPass():
    global count 
```

获取`count`要更新的变量。

通过使用`global`关键字，您可以告诉解释器将值加载并存储到全局`count`变量中，而不是将其保存到同名的局部变量中。例如：

我定义了两个函数，一个有使用，一个没有使用`global`：

```
>>> a = 0
>>> def foo():
...   a += 1
...   return a
>>> def bar():
...   global a
...   a += 1
...   return a 
```

使用模块拆解这两个函数后[`dis`](http://docs.python.org/2/library/dis.html)，很明显区别是什么：

```
>>> import dis
>>> dis.dis(foo)
  2           0 LOAD_FAST                0 (a)
              3 LOAD_CONST               1 (1)
              6 INPLACE_ADD         
              7 STORE_FAST               0 (a)

  3          10 LOAD_FAST                0 (a)
             13 RETURN_VALUE        

>>> dis.dis(bar)
  3           0 LOAD_GLOBAL              0 (a)
              3 LOAD_CONST               1 (1)
              6 INPLACE_ADD         
              7 STORE_GLOBAL             0 (a)

  4          10 LOAD_GLOBAL              0 (a)
             13 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:41:18.597

你的理解`return`是错误的。

返回的值不仅被插入回调用者的命名空间，还必须被接收。他们也不必以相同的名字接收。

```
count,a,b = firstPass() 
```

另外我建议将电流`count`作为参数传递给函数，而不是从全局中获取它。它只是更好的风格，让你的功能更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:29:22.320

您可能要考虑使用一个类。它是维护状态的更好容器。

```
def firstPass():
    x = 5
    y = 2
    print "Some stuff"
    count = count + 1
    print "Count in firstPass is",count
    return count,x,y        

class MyActivityManager(object):
    def __init__(self):
        """Initialize instance variables"""
        self.run_count = 0

    def run(self):
        if not self.run_count:
            results = firstPass()
            self.run_count += 1
            # consider saving results in the instance for later use
        else:
            # other stuff

if __name__ == "__main__":
    runner = MyActivityManager()
    runner.run() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:37:53.323

```
def firstPass(count):
    x = 5
    y = 2
    print "Some stuff"
    count = count + 1
    print "Count in firstPass is",count
    return count,x,y

def main():
    count = 0 # initialize it here; you're only running main once
    print "Count in main is",count
    if count == 0:
        count, x, y = firstPass(count) # sets the values from firstPass()
    else:
        #Do a whole bunch of other stuff that is NOT supposed to happen on run #1
        #because the other stuff uses user-modified x and y values, and resetting
        #to start value would just be self-defeating.

main() 
```

但是，如果要在`count`之外进行初始化`main()`，请使用`main(count)`：

```
#Initialize variables that need to run before we can do any work here
count = 0

def firstPass(count):
    x = 5
    y = 2
    print "Some stuff"
    count = count + 1
    print "Count in firstPass is",count
    return count,x,y

def main (count):
    print "Count in main is",count
    if count == 0:
        firstPass()
    else:
        #Do a whole bunch of other stuff that is NOT supposed to happen on run #1
        #because the other stuff uses user-modified x and y values, and resetting
        #to start value would just be self-defeating.

main(count) # pass it as an argument 
```

但是，如果您只调用`main()`一次，您可以像这样重写您的代码和一般结构：

```
def main():
    count = 0
    count, x, y = firstPass(count) # no need to check if it is 0
    # do everything else

def firstPass(count):
    x, y = 5, 2 # multiple assignment, same as x = 5; y = 2
    print "some stuff"
    count += 1 # shorthand for count = count + 1
    print "Count in firstpass is", count
    return count, x, y

main() 
```

# eclipselink - 我无法理解 EclipseLink MOXy XmlProperty 或 xml-property 的含义，谁能提供更多信息？

> ID：15651379
> 
> 赞同：1
> 
> 时间：2013-03-27T03:22:26.453
> 
> 标签：eclipselink, moxy

我在谷歌上能找到的只有 3 条信息，最详细的是设计文档，如下 URL

[http://wiki.eclipse.org/EclipseLink/DesignDocs/317962/Phase2.1#.40XmlProperty](http://wiki.eclipse.org/EclipseLink/DesignDocs/317962/Phase2.1#.40XmlProperty)

它确实提到“xml-property 元数据标记将用于配置属性”。并且给出了两个没有编组结果的示例如下：

```
Example: type-level property
The following example will demonstrate how a type-level property can be applied.

Setting xml-property on a type via EclipseLink XML metadata can be accomplished as follows:

<java-type name="org.example.Employee">
    <xml-properties>
        <xml-property name="identifier" value="101" value-type="java.lang.Integer" />
        <xml-property name="isTrue" value="false" value-type="java.lang.Boolean" />
    </xml-properties>
</java-type>
Setting @XmlProperty on a type via annotations can be accomplished as follows:

org.example.Employee.java
@XmlProperties({@XmlProperty(name="identifier", value="101", valueType=Integer.class), 
                @XmlProperty(name="isTrue", value="false", valueType=Boolean.class)})
public class Employee {
   ...
}
Example: property-level property
The following example will demonstrate how a property-level property can be applied.

Setting xml-property on a property via EclipseLink XML metadata can be accomplished as follows:

<java-type name="org.example.Employee">
    <java-attributes>
        <xml-element java-attribute="myelement">
            <xml-properties>
                <xml-property name="isAttribute" value="false" value-type="java.lang.Boolean" />
                <xml-property name="comment" value="this is an element" />
            </xml-properties>
        </xml-element>
    </java-attributes>
</java-type>
Setting @XmlProperty on a property via annotations can be accomplished as follows:

org.example.Employee.java
public class Employee {

  @XmlProperties({@XmlProperty(name="isAttribute", value="false", valueType=Boolean.class),
                  @XmlProperty(name="comment", value="this is an element")}
  public String myelement;
} 
```

我也尝试了我的示例，但我无法区分使用和不使用 xml-property 的东西。

谁能向我解释 XmlProperty 是做什么的？它会产生什么样的效果？或何时使用 XmlProperty？是否有任何带有封送结果的示例代码？

```
<?xml version="1.0"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/oxm http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_4.xsd"
    version="2.1">
    <xml-schema element-form-default="QUALIFIED">
        <xml-ns prefix="ns1" namespace-uri="http://www.example.org/customer" />
        <xml-ns prefix="ns2" namespace-uri="http://www.example.org/phone" />
        <xml-ns prefix="ns3" namespace-uri="http://www.example.org/addr" />
    </xml-schema>
    <java-types>
        <java-type name="example.gettingstarted.demo1.Customer">
            <xml-root-element />
            <xml-type namespace="http://www.example.org/customer"
                prop-order="name address phoneNumbers" />
            <xml-properties>
                <xml-property name="hello" value="false" value-type="java.lang.String" />
                <xml-property name="world" value="this is an element"
                    value-type="java.lang.String" />
            </xml-properties>
            <java-attributes>
                <xml-attribute java-attribute="name" xml-path="@name" />
                <xml-element java-attribute="address">
                </xml-element>
                <xml-element java-attribute="phoneNumbers" xml-path="contact-info/phone-number" />
            </java-attributes>
        </java-type>
        <java-type name="example.gettingstarted.demo1.PhoneNumber">
            <xml-root-element />
            <xml-type namespace="http://www.example.org/phone"></xml-type>
            <java-attributes>
                <xml-attribute java-attribute="type" />
                <xml-value java-attribute="value" />
            </java-attributes>
        </java-type>
        <java-type name="example.gettingstarted.demo1.Address">
        </java-type>
    </java-types>
</xml-bindings> 
```

Java 文件：

```
package example.gettingstarted.demo5;

import java.util.HashMap;
import java.util.Map;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.transform.Source;
import javax.xml.transform.stream.StreamSource;

import org.eclipse.persistence.jaxb.JAXBContextFactory;

import example.gettingstarted.demo1.Address;
import example.gettingstarted.demo1.Customer;
import example.gettingstarted.demo1.PhoneNumber;

/**
 * @author barry
 * make Customer.Address.street as Customer.@street
 */
public class Demo {

    @SuppressWarnings({ "rawtypes", "deprecation" })
    public static void main(String[] args) throws JAXBException {
        // Step 1 - Create the Domain Model
        Customer customer = new Customer();
        customer.setName("Jane Doe");
        Address address = new Address();
        address.setStreet("123 Any Street");
        address.setCity("My Town");
        customer.setAddress(address);
        PhoneNumber workPhoneNumber = new PhoneNumber();
        workPhoneNumber.setType("work");
        workPhoneNumber.setValue("613-555-1111");
        customer.getPhoneNumbers().add(workPhoneNumber);
        PhoneNumber cellPhoneNumber = new PhoneNumber();
        cellPhoneNumber.setType("cell");
        cellPhoneNumber.setValue("613-555-2222");
        customer.getPhoneNumbers().add(cellPhoneNumber);

        // Step 2 - Convert the Domain Model to XML
        final Map<String, Source> metadataSourceMap = new HashMap<String, Source>();
        metadataSourceMap.put("example.gettingstarted.demo1", new StreamSource("./example/gettingstarted/demo5/eclipselink-oxm.xml"));

        final Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, metadataSourceMap);

        final Class[] classes = new Class[1];
        classes[0] = Customer.class;

        JAXBContext jaxbContext = (JAXBContext) JAXBContext.newInstance(classes, properties);
        Marshaller marshaller = jaxbContext.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }
} 
```

无论是否应用了 xml-property，我的输出如下。

My Town 123 Any Street 613-555-1111 613-555-2222

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:15:17.540

[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的`@XmlProperty`扩展是一种将自定义数据获取到 MOXy 的本机映射元数据的方法。它适用于一些非常独特的用例。我将在下面演示如何使用它。

**JAVA模型**

我将在此示例中使用以下模型。

```
package forum15651379;

public class Foo {

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**演示代码**

在下面的演示代码中，`JAXBContext`将在 MOXy 的外部映射文档中引导（参见：[http](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html) ://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html ）。

```
package forum15651379;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum15651379/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Foo foo = new Foo();
        foo.setBar("Hello World");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**常见用例**

下面是典型的用例。映射是用`java-attributes`元素定义的。

**oxm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum15651379">
    <java-types>
        <java-type name="Foo">
           <xml-root-element name="FOO"/>
            <java-attributes>
                <xml-element java-attribute="bar" name="BAR">
                </xml-element>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<FOO>
   <BAR>Hello World</BAR>
</FOO> 
```

**高级用例**

**oxm.xml**

我已经扩展了`oxm.xml`包含属性并指定了描述符定制器。

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum15651379">
    <java-types>
        <java-type name="Foo" xml-customizer="forum15651379.FooCustomizer">
            <xml-properties>
                <xml-property name="key1" value="value1"/>
                <xml-property name="key2" value="value2"/>
            </xml-properties>
           <xml-root-element name="FOO"/>
            <java-attributes>
                <xml-element java-attribute="bar" name="BAR">
                    <xml-properties>
                        <xml-property name="key3" value="value3"/>
                        <xml-property name="key4" value="value4"/>
                    </xml-properties>
                </xml-element>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**描述符定制器 (FooCustomizer)**

描述符定制器使您可以访问 MOXy 的本机映射元数据。下面是一个简单的示例，说明您可以对`oxm.xml`文件中指定的属性执行哪些操作。

```
package forum15651379;

import org.eclipse.persistence.config.DescriptorCustomizer;
import org.eclipse.persistence.descriptors.ClassDescriptor;
import org.eclipse.persistence.oxm.XMLDescriptor;
import org.eclipse.persistence.oxm.mappings.XMLDirectMapping;

public class FooCustomizer implements DescriptorCustomizer{

    @Override
    public void customize(ClassDescriptor descriptor) throws Exception {
        XMLDescriptor xmlDescriptor = (XMLDescriptor) descriptor;
        String key1Value = (String) xmlDescriptor.getProperty("key1");
        xmlDescriptor.setDefaultRootElement(key1Value);

        XMLDirectMapping barMapping = (XMLDirectMapping) xmlDescriptor.getMappingForAttributeName("bar");
        String key3Value = (String) barMapping.getProperty("key3");
        barMapping.setXPath(key3Value + "/text()");
    }

} 
```

**输出**

下面我们将看到我们所做的`FooCustomizer`对生成的 XML 的影响。

```
<?xml version="1.0" encoding="UTF-8"?>
<value1>
   <value3>Hello World</value3>
</value1> 
```

# android - 官方谷歌翻译 API v2 (Android)

> ID：15651381
> 
> 赞同：2
> 
> 时间：2013-03-27T03:23:12.137
> 
> 标签：android, google-translate

如何在 Android 上使用 Google 官方翻译 API v2？请帮忙！有什么例子吗？

我为该服务付费，并尝试使用该非官方 API 并且无法正常工作。该非官方 API 有 Java 示例。官方 API 没有 Java 示例，因为使用 RES（HTTP 请求）并返回 JSON。有那么复杂吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:32:43.203

如果您想问如何访问 Google Translate API v2，它是一项付费服务​​，可以在[此处](https://developers.google.com/translate/)购买。否则，如果您想问如何使用它，这些示例位于同一网站上的“入门”部分。

虽然我认为你可能正在寻找[这个](https://code.google.com/p/google-api-translate-java/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T06:46:35.060

这里有一个我在应用程序上使用的简单示例：

```
private String translateText(String toTrasnlate){
TranslateOptions options = TranslateOptions.newBuilder()
    .setApiKey("XXXXXXXXXXXXXXXXXXXXX_XXXXXXXX")
    .build();
Translate translate = options.getService();
Translation translation = translate.translate(toTrasnlate, 
Translate.TranslateOption.targetLanguage("en"));
return translation.getTranslatedText();
} 
```

这个链接对我很有用： [https ://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/translate/src/main/java/com/example/cloud/translate/samples/TranslateText.java](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/translate/src/main/java/com/example/cloud/translate/samples/TranslateText.java)

# java - Java Applet 完成后变成一个空白屏幕

> ID：15651384
> 
> 赞同：0
> 
> 时间：2013-03-27T03:23:28.207
> 
> 标签：java, applet, awt, paint, java-2d

我的小程序所做的就是一步一步地画一些东西。

我的`update()`块是这样的：

```
public void update(Graphics g)
{
  if (!done)
  {
    while (!doneDrawing)
    {
      imageGraphics.drawSomething(...);
      g.drawImage(image);
    }
    done = true;
  }
} 
```

该`done`变量可防止循环在完成后再次执行整个绘图过程，并且我可以通过将其设置为 false 来使小程序再次绘制绘图。

我将小程序放在网页上，它按预期工作，但是当我切换标签/窗口并返回时，我看到的只是白屏（使用 Chrome）。当我按下一个设置`done`为 false 的按钮时，小程序会重新绘制绘图，看起来一切都很好而且很漂亮，直到我切换选项卡。

我试图让小程序不断在屏幕上绘制图片，即使`done == true`，但这似乎并没有改变任何东西。

```
public void update(Graphics g)
{
  if (!done)
  {
    while (!doneDrawing)
    {
      imageGraphics.drawSomething(...);
      g.drawImage(image);
    }
    done = true;
  }
  g.drawImage(image);
} 
```

编辑：上面的第二段代码实际上确实解决了这个问题。在我关闭/重新打开选项卡之前，我的网络浏览器不想更改为更新的代码，而不仅仅是刷新。但是，我将按照 Andrew 的建议开始学习 JFrames/JPanels。

# java - 在迭代列表时插入列表是否不安全？

> ID：15651389
> 
> 赞同：0
> 
> 时间：2013-03-27T03:24:01.767
> 
> 标签：java, concurrency

在迭代列表时插入列表是不安全的吗？想法？我个人不确定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:19:20.577

如果您使用对象遍历集合`Iterator`，则更改底层集合将创建一个`ConcurrentModificationError`会使代码崩溃的集合。即使您使用的是 for-each 循环，这也适用，因为这种类型的循环隐式声明了一个`Iterator`.

[有关 ConcurrentModificationException 的更多信息。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:24:13.787

正如我所料，它会抛出 ConcurrentModificationException。我在简单的例子中测试它：

```
public class Test {
    public static void main(String[] args) {
        List<Integer> list = new ArrayList<Integer>();
        list.add(1);
        list.add(2);
        list.add(3);
        for(Iterator<Integer> it = list.iterator(); it.hasNext();it.next()){
            System.out.println(it.toString());
            list.add(4);
        }
    }
} 
```

将 ArrayList 更改为 LinkedList 给出相同的结果。如果我完全记得只有删除操作是有效的

# python - 使用python将输入值插入sqlite3

> ID：15651392
> 
> 赞同：1
> 
> 时间：2013-03-27T03:24:18.607
> 
> 标签：python, sqlite

该程序运行良好，但它没有在数据库中插入任何内容。我不明白！

```
import sqlite3 as db

conn = db.connect('C:\\SQLite\\test.db')
cursor = conn.cursor()

answer = "ok"

while answer != "":

    title = raw_input("Enter film: ")
    year = raw_input("Enter year: ")
    director = raw_input("Enter director: ")

    cursor.execute("insert into films (title, year, director) values (?, ?, ?)", (title, year, director))

    answer = raw_input("Continue?  ")

conn.close() 
```

# mysql - 按+全部分组...？

> ID：15651397
> 
> 赞同：2
> 
> 时间：2013-03-27T03:24:50.860
> 
> 标签：mysql, sql

我想知道所有连接值是否都在另一个表中。

例子：

```
id childId
1  2
1  3
1  4
2  6
2  7
2  8
2  9

childIds
2
3
4
6
7

 **desired result:**

id allChildrenInChildIds
1  True
2  False 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:14:50.193

尝试这个

```
SELECT 
    ID
   ,MIN(allChildrenInChildIds) 
FROM 
(
   SELECT id,
   CASE WHEN childId  IN (SELECT childIds FROM Table2) THEN 'TRUE' ELSE 'FALSE'
   END AS allChildrenInChildIds
   FROM Table1
) result 
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:57:41.453

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/05b65/1)**

```
 select id, case when sum(TrueorFalse) = count(1) then 'true'
                else 'false' end
from (
select id, case  when exists (select 1 from ChildIDs where id = childid) then 1
             else 0 
             end as TrueOrFalse
from child ) A
group by A.id 
```

使用时存在（从...中选择...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T05:29:10.390

像这样的东西？

```
select
  id,
  case when exists (
    select c.childid
    from Child as c
    where c.id = ids.id
    and not exists (
      select *
      from Childids
      where c.childid = Childids.id
    )) then 'No' else 'Yes' end as WereAllChildrenFound
from ids 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T01:48:31.440

这个怎么样 ？

```
 select id , case when count(c.childid) <> count(ci.childid) then 'false' else 'true' end as allChildrenInChildIds
from Child c 
left join ChildIds ci 
on c.childid = ci.childid 
group by id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T03:54:30.553

如果您运行此查询

```
SELECT id, GROUP_CONCAT(childId) 
FROM  table 
WHERE childId NOT IN (2,3,4,5,6,7,8) 
GROUP BY id 
```

结果中的任何想法都是错误的。我添加了 GROUP_CONCAT，以便您可以确定哪些 childId 不在集合中。如果 id 不在结果中，则为 true。

# jquery - 将 .toggle() 添加到单元格内容

> ID：15651398
> 
> 赞同：0
> 
> 时间：2013-03-27T03:24:52.027
> 
> 标签：jquery, jqgrid

我想问一下，是否可以在 jqGrid 的某个特定单元格中附加一个 .toggle() 函数？可以使用 setCell 更改单元格的内容，但根据我的尝试，它只会更改它的 CSS 属性。

```
grid.jgGrid("setCell", cellId, colName, "", {visibility: 'hidden'}); 
```

有没有办法让我在 GridComplete 的单元格内显示/隐藏/闪烁我的文本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:55:03.577

好吧，您可以在单击单元格时将文本的颜色更改为透明。这是[jsfiddle](http://jsfiddle.net/NCgTm/)

它切换每个单元格数据。您可以根据您的要求定制

jqgrid **oncellselect**函数：

```
 onCellSelect : function(rowid,iCol, cellcontent,e){
        var td = $("#"+rowid).find("td");
        var reqTd = td[iCol];

        if($(reqTd).attr("class") == 'transp'){
              $(reqTd).removeClass("transp");
        } else {
            $(reqTd).addClass("transp");

        }

    } 
```

**CSS**

```
.transp {
    color: transparent;
}; 
```

# android - 来自我的应用程序的数据库查询结果真的很奇怪（sqlite 数据库 - 里面有详细的代码）

> ID：15651399
> 
> 赞同：0
> 
> 时间：2013-03-27T03:24:52.703
> 
> 标签：android, database, filtering, android-sqlite

在使用数据库结果填充列表视图时，我的应用程序现在遇到了最奇怪的问题。
所以，我有一个警报对话框，我可以在其中**选择两个标准**发送到我的数据库：一个**类别**产品（餐厅、商店等）和一个**支付选项**（卡/现金）。

当用户选择某些东西时，它会将 String 变量设置为某个时间间隔（**categoryInterval**和**paymentInterval**），这样：

**对于类别**（它在弹出菜单中）：

```
case R.id.item11c:
                            filterTitle = "Bakery and Pastry Shops ";
                            categoryInterval = "('" + 86 + "','" + 87 + "')"; 
                            filterButton.setText("Bakery and Pastry shops");
                            return true; 
```

**对于付款选项**（在单选按钮中）：

```
OnClickListener radiobutton_no_listener = new OnClickListener() {
    public void onClick(View v) {
        paymentInterval = "('" + "')";
    }
};

OnClickListener radiobutton_yes_listener = new OnClickListener() {
    public void onClick(View v) {
        paymentInterval = "('" + "visa" + "','" + "master" + "')";
    }
}; 
```

然后，当用户做出选择并单击警报对话框的“确定”按钮时，会出现一个调用查询方法**findFilterInTable()**的显示方法（其目的是查找具有 - 在本例中 -他们编号为 86 或 87 的类别列和内部带有“visa”或“master”的付款列）并在我的列表视图中显示结果：

```
public Cursor findFilterInTable(String categoryInterval,
        String paymentInterval) {
    String where = COL_CAT1 + " IN " + categoryInterval + " OR " + COL_CAT2
            + " IN " + categoryInterval + " OR " + COL_CAT3 + " IN "
            + categoryInterval + " AND " + COL_PAYMENT + " IN "
            + paymentInterval;

    Cursor c = myDatabase.query(DATABASE_TABLE, new String[] { KEY_ROWID,
            COL_NAME, COL_STREET, COL_WEBSITE, COL_PAYMENT, COL_TELEPHONE,
            COL_PRICE, COL_REMARKS, COL_DATEFRIENDLY }, where, null, null,
            null, null);
    return c;
} 
```

但它只是部分起作用：它对类别部分（categoryInterval 中的 COL_CAT1 或 .... 中的 COL_CAT2）非常有效，但对于支付部分，我有一个奇怪的结果。当我单击此按钮（通过卡付款）时，它会从列表中检索一些结果，与我不单击时相比，它会检索与研究完全无关的内容。无论我在 paymentInterval （“visa”或“master”以及“okokininjfnsoe”）中写什么，它似乎只是在类别部分检索一些具有特定数字组合的元素。例如，在这种情况下，CAT_3 = 87 的元素，这是没有意义的。
因此，在我的 findFilterInTable() 方法中，我的 paymentInterval 的值会影响结果，但它甚至不会在适当的列 (COL_PAYMENT) 中查找，而是在 COL_CAT1、COL_CAT2、COL_CAT3 中查找，并且由于某种原因，会删除一些结果。

我对此感到非常沮丧，不知道如何找到解决方案。我实际上不知道如何解决我不理解且对我没有意义的问题！谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:34:28.787

改变

```
String where = COL_CAT1 + " IN " + categoryInterval + " OR " + COL_CAT2
        + " IN " + categoryInterval + " OR " + COL_CAT3 + " IN "
        + categoryInterval + " AND " + COL_PAYMENT + " IN "
        + paymentInterval; 
```

至

```
String where = "(" + COL_CAT1 + " IN " + categoryInterval + " OR " + COL_CAT2
        + " IN " + categoryInterval + " OR " + COL_CAT3 + " IN "
        + categoryInterval + ") AND " + COL_PAYMENT + " IN "
        + paymentInterval; 
```

# api - 如何使用 WIN32 API (C/C++) 在组合框中捕获“输入键”？

> ID：15651401
> 
> 赞同：1
> 
> 时间：2013-03-27T03:25:10.463
> 
> 标签：api, winapi, combobox, key, enter

当用户在组合框中按 Enter 时，我想要捕获事件。怎么抓你。例如：我在组合框中输入“Nguyen Phong Sac”。按 Enter 键后，会显示一条消息：“Nguyen Phong Sac”。谢谢你的帮助，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T09:10:23.903

我仍然想知道你在写什么样的程序，但我会按照你的要求给你一个例子：

```
//Tested with Windows 7 x64, VS2012
//When Creating:
hWndComboBox = CreateWindow(WC_COMBOBOX, TEXT(""), 
               CBS_DROPDOWN | CBS_HASSTRINGS | WS_CHILD | WS_OVERLAPPED | WS_VISIBLE,
               xpos, ypos, nwidth, nheight, hwndParent, NULL, HINST_THISCOMPONENT,
               NULL);

hWndEditBox = CreateWindow(WC_EDIT, TEXT(""), 
              CBS_DROPDOWN | CBS_HASSTRINGS | WS_CHILD | WS_OVERLAPPED | WS_VISIBLE,
              xpos, ypos-30, nwidth, 30, hwndParent, NULL, HINST_THISCOMPONENT,
              NULL);

//Get hwnd of edit control in combobox created earlier.
HWND hwndEdit = GetWindow(hWndComboBox, GW_CHILD);
//Use SetWindowLong to create subclass, lpfnEditWndProc is original proc
lpfnEditWndProc = (WNDPROC) SetWindowLong(hwndEdit, GWL_WNDPROC, (DWORD) SubClassProc); 

//In Subclass Proc
LRESULT CALLBACK SubClassProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) 
{ 
   switch (msg) 
   { 
    case WM_KEYDOWN: 
        switch (wParam) 
        {  
            case VK_RETURN: 
                                    //Get Text&Set Text
                LPTSTR buffer = new TCHAR[255];
                GetWindowText(hwnd, buffer, 255);
                SetWindowText(hWndEditBox, buffer);
            break;
        } 
        break; 

  } 

  return CallWindowProc(lpfnEditWndProc, hwnd, msg, wParam, lParam); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T14:57:17.237

你也可以在 WTL 中实现这一点

```
#define YOUR_WM_ENTER WM_USER + 2

class CCommandBarEdit : public CWindowImpl<CCommandBarEdit, CEdit, CControlWinTraits>
{
    typedef CWindowImpl<CCommandBarEdit, CEdit, CControlWinTraits> baseClass;

public:
    HWND hwndMain;

    DECLARE_WND_SUPERCLASS(_T("YOUR_COMMANDBAREDIT"), _T("EDIT"));

    BEGIN_MSG_MAP(CCommandBarEdit)
        MESSAGE_HANDLER(WM_CHAR, OnKeyDown)
        DEFAULT_REFLECTION_HANDLER()
    END_MSG_MAP()

private:
    LRESULT OnKeyDown(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
    {
        if (wParam == VK_RETURN && GetFocus() == m_hWnd)
        {
            ::SendMessage(hwndMain,  YOUR_WM_ENTER,0,0);
        }
        else
        {
            bHandled = FALSE;
        }

        return 0;
    }
}; 
```

在您保留编辑容器的位置，m_Combo 是您的组合框

```
CCommandBarEdit m_cmdTextBox;

HWND hWndEdit = ::GetWindow(m_Combo.m_hWnd, GW_CHILD);
    if (hWndEdit)
        m_cmdTextBox.SubclassWindow(hWndEdit); 
```

您在哪里回复消息

```
MESSAGE_HANDLER(YOUR_WM_ENTER, OnCommandEnter)
LRESULT CMainFrame::OnCommandEnter(UINT /*uMsg*/, WPARAM /*wParam*/, LPARAM /*lParam*/, BOOL& /*bHandled*/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T11:53:41.847

我知道那是 2 晚了，但你可以使用 WndProc

```
 protected override void WndProc(ref Message m)
        {
              if (m.Msg == 0x100 && (int)m.WParam == 13){
                    //Enter pressed
              }

              base.WndProc (ref m);
        } 
```

# installation - 避免手动添加组件

> ID：15651406
> 
> 赞同：2
> 
> 时间：2013-03-27T03:26:19.450
> 
> 标签：installation, wix, components

我有一个包含大约 50 个 dll 的文件夹。有什么方法可以将它们添加为 wix 代码中的每个组件。而不是手动写这50个？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:35:23.007

WiX 工具集中提供的`heat.exe`工具可以通过扫描目录中的文件来生成 .wxs 文件。这是快速入门的最简单方法。就像是：

```
heat dir path\to\directory\with\files -cg YourComponentGroup -ag -o generated.wxs 
```

还有很多其他可用的选项，它们`heat.exe -?`会告诉你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:48:06.567

以下链接对我来说效果很好，它比命令提示符简单。所有的事情都可以在设置项目中处理。 [http://blog.martindoms.com/2012/02/27/how-to-include-a-large-directory-tree-in-a-wix-installer-using-a-visual-studio-wix-project/](http://blog.martindoms.com/2012/02/27/how-to-include-a-large-directory-tree-in-a-wix-installer-using-a-visual-studio-wix-project/)

# qt - Qt QAudio输出推送模式

> ID：15651407
> 
> 赞同：5
> 
> 时间：2013-03-27T03:26:28.440
> 
> 标签：qt, audio

我有一个关于使用 QAudioOutput 以特定采样率将样本直接写入声音输出设备的问题。我正在编写一个模拟器，它在每帧的基础上模拟声音芯片，然后获取一个包含一帧音频样本的缓冲区，我想将其写入音频输出。目前，为了测试我的音频输出例程，我分配了一个巨大的（5 分钟）缓冲区来放入随机数，如下所示：

标题：

```
uint16_t *audio_outputBuffer;
uint32_t audio_bytesRemainingToRead;
QAudioOutput *audio_outputStream;
QIODevice *audio_outputDevice; 
```

执行：

```
audio_outputBuffer = (uint16_t *) malloc((96000 * 4) * 300);
int i = 0;

uint16_t *tempAudioBuffer = audio_outputBuffer;
for(i = 0; i < ((96000 * 4) * 150); i++) {
    *tempAudioBuffer = (uint16_t) rand() & 0xFFFF;
    tempAudioBuffer++;
}

audio_bytesRemainingToRead = (96000 * 4) * 300; 
```

接下来，我使用一些基本参数设置我的音频设备：

```
// Set up the format
QAudioFormat format;
format.setFrequency(96000); // Usually this is specified through an UI option
format.setChannels(2);
format.setSampleSize(16);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::UnSignedInt);

// There's code here to notify the user of inability to match the format and choose an action, which is omitted for clarity

// Create audio output stream, set up signals
audio_outputStream = new QAudioOutput(format, this);

connect(audio_outputStream, SIGNAL(stateChanged(QAudio::State)), this, SLOT(audio_stateChanged(QAudio::State)));

audio_outputDevice = audio_outputStream->start(); 
```

然后，在由 QTimer 以 60 FPS 调用的计时器滴答例程中，我执行以下代码将音频数据“块”写入 QAudioOutput 的缓冲区：

```
if(audio_outputDevice->isOpen() && audio_outputStream->state() != QAudio::StoppedState) {
    qint64 bytesOfAudioWrittenToDevice = audio_outputDevice->write((char *) audio_outputBuffer, audio_outputStream->periodSize());
    audio_bytesRemainingToRead -= bytesOfAudioWrittenToDevice;
    qDebug() << "Wrote" << bytesOfAudioWrittenToDevice << "bytes of audio to output device. Remaining bytes to read:" << audio_bytesRemainingToRead;
    qDebug() << "Free bytes in audio output:" << audio_outputStream->bytesFree();
} 
```

一旦我开始音频输出过程，我会在控制台上得到以下输出：

```
Current audio state: 3 Error: 0 
Wrote 2048 bytes of audio to output device. Remaining bytes to read: 115197952 
Free bytes in audio output: 6144 
Current audio state: 0 Error: 0 
Wrote 2048 bytes of audio to output device. Remaining bytes to read: 115195904 
Free bytes in audio output: 4096 
Wrote 2048 bytes of audio to output device. Remaining bytes to read: 115193856 
Free bytes in audio output: 2048
Wrote 2048 bytes of audio to output device. Remaining bytes to read: 115191808 
Free bytes in audio output: 0 (This and the above line is repeated forever) 
```

对我来说，看起来 QAudioOutput 没有将其内部缓冲区刷新到声卡，这与整个“我的计算机没有声音”的事情有关。

什么会导致这个问题，我该如何解决？

（顺便说一句，我正在 Mac OS X 10.7.4 上针对 Qt 4.8.1 编译我的代码。）

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-04T06:37:33.523

前期只想指出：这*不是*Qt 错误。为什么？答案是在 WAV 规范中，8 位样本总是无符号的，而 16 位样本总是有符号的。任何其他组合都不起作用。这是设备相关的，框架对此无能为力。

所以这不起作用，因为您设置了 16 位样本大小和无符号整数格式。是的，解决方案是：您必须将样本类型设置为有符号的 16 位分辨率：

```
format.setSampleType(QAudioFormat::SignedInt); 
```

相反，对于 8 位样本，您必须输入：

```
format.setSampleType(QAudioFormat:UnsignedInt); 
```

此外，这个非常相似的问题（相同的问题，但使用 8 位）向您表明，在 Qt 中使用有符号或无符号样本并不是一个特殊问题，而是样本大小和类型的组合很重要（对于音频设备，不适用于 Qt ;) [Qt5 中的 QAudioOutput 不产生任何声音](https://stackoverflow.com/questions/15594180/qaudiooutput-in-qt5-is-not-producing-any-sound)

恕我直言，Qt 没有通过强制使用正确的格式来处理这些情况，这是一个缺陷，但并非缺乏功能。

您可以在本页的注释部分了解更多信息：[https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:52:42.197

我已经弄清楚了——显然 Qt 对 UNSIGNED 样本有问题。如果您将示例类型设置为已签名，则无论平台如何，一切正常。

# javascript - 如何仅基于标题行应用一些 jquery 内容

> ID：15651408
> 
> 赞同：2
> 
> 时间：2013-03-27T03:26:56.407
> 
> 标签：javascript, jquery, html-table, jquery-selectors

我有这样的表：

```
<table> 
<thead>
   <th>id </th><th>name </th><th>number </th><th>result </th> 
</thead>        
<tbody>
<tr>
 <td>stuff</td>
 <td>stuff</td>
 <td>stuff</td>
 <td>stuff</td> 
</tr>
</tbody>
 </table> 
```

我想将`class = "red"`唯一添加到`td`标题为`result`

所以只有在页面加载时动态地使用 jquery 的结果列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:32:53.543

[`.index()`](http://api.jquery.com/index/)您可以使用然后使用[`:nth-child`选择器](http://api.jquery.com/nth-child-selector/)应用类来获取标题的索引。

[jsFiddle](http://jsfiddle.net/2hgJU/)

![在此处输入图像描述](../Images/7bc873076bac814a4107fd47c5243c7f.png)

```
var resultHeaderIndex = $('th:contains("result")').index();
$('td:nth-child(' + (resultHeaderIndex + 1) + ')').addClass('red') 
```

* * *

如果您还想将类添加到标题中，那么您可以在获取索引之前简单地添加它：

[jsFiddle](http://jsfiddle.net/9ukB6/1/)

![在此处输入图像描述](../Images/a525126035af971dabd8a9a4de0ccba3.png)

```
var resultHeaderIndex = $('th:contains("result")')
    .addClass('red')
    .index();
$('td:nth-child(' + (resultHeaderIndex + 1) + ')').addClass('red') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:43:04.510

我认为使用 jQuery `.index()`，`.eq()`你可以很容易地做到这一点：

```
(function($){
    $.fn.colorColumn = function(headerText, color){
        var index = this.find("th").filter(function(){
            return ($(this).text() == headerText);
        }).css("backgroundColor", color).index();
        this.find("tr").each(function(){
            $(this).children().eq(index).css({backgroundColor: color});
        })
    }
})(jQuery);

$("table").colorColumn("number", "red"); 
```

工作演示：http: [//jsfiddle.net/pitaj/eG5KE/](http://jsfiddle.net/pitaj/eG5KE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:34:17.133

我会这样做的方式是使用条件和 jQuery `each`：

```
$("th").each(function() {
    if ($(this).text() === "result") { $(this).addClass('red') }
} 
```

# ruby-on-rails - Rspec 控制器使用 STI 用户模型进行测试？

> ID：15651410
> 
> 赞同：1
> 
> 时间：2013-03-27T03:27:02.203
> 
> 标签：ruby-on-rails, rspec, devise, factory-bot

我正在尝试为子控制器编写一些控制器规范，在本例中为 Admin::UsersController

它具有基本的 CRUD 操作集。

我的 users_controller_spec.rb

```
describe Admin::CarriersController do
  before(:each) do
    sign_in FactoryGirl.create(:admin)
  end

  it "should have a current_user" do
    subject.current_user.should_not be_nil
  end

  describe "GET 'index'" do
    it "assigns all users as @users" do
      user = create(:user)
      get :index
      assigns(:users).should eq [user]
    end
    it "renders the index view" do
      get :index
      expect(response).to render_template :index
    end
  end
end 
```

现在我遇到的问题是索引操作。我的控制器工作并且是一个简单的@users = User.all

让事情复杂的是我的用户表是 STI 所以

```
class User < ActiveRecord::Base
end
class Client < User
end
class Seller < User
end 
```

我的工厂

```
FactoryGirl.define do
  factory :user do
    name { Faker::Company.name }
    sequence(:email) {|n| "test#{n}@test.com"}
    password "password"
    password_confirmation {|instance| instance.password }
    type "Seller"

    factory :admin do
      type "Admin"
    end

    factory :seller do
      type "Seller"
    end

    factory :client do
      type "Client"
    end
  end
end 
```

显然 eq 方法不起作用，因为 RSpec 在我的 assigns(:users) 期望中匹配类名时存在问题。我的确切错误是：

```
1) Admin::UsersController GET 'index' assigns all users as @users
     Failure/Error: assigns(:users).should eq user
       expected #<ActiveRecord::Relation [#<Client id: 1282, name: "Marks-Kozey", type: "Client"...]> to eq #<User id: 1282, name: "Marks-Kozey", type: "Client"... 
```

我的问题是我的工厂吗？还是我测试不正确。这是我第一次测试 STI，所以任何帮助都会不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T18:51:18.317

尝试将类符号传递给子工厂，例如：

```
factory :client, class:Client do
  type "Client"
end 
```

工厂生成的对象应该是 type`Client`而不是`User`.

# mysql - 卡住左连接

> ID：15651411
> 
> 赞同：0
> 
> 时间：2013-03-27T03:27:02.910
> 
> 标签：mysql

我试过了，但无法返回所有行。它只返回左侧查询中的一些行。请找出错误。

```
SELECT c.star_ident, c.fix_ident 
from corept.std_star_leg as c  
INNER JOIN  
(
  SELECT star_ident,
    transition_ident,
    max(sequence_num) seq,
    route_type 
  FROM     corept.std_star_leg
  WHERE data_supplier='J' 
    AND airport_ident='KOPF'  
  group by star_ident,transition_ident
) b  
  ON c.sequence_num=b.seq 
  and c.star_ident=b.star_ident 
  and c.transition_ident=b.transition_ident
LEFT OUTER JOIN  
(
  SELECT name,
    trans 
  FROM skyplan_deploy.deploy_stars d 
  WHERE apt='KOPF' 
    AND name!=trans
) as x  
  on x.name=c.star_ident 
  and x.trans=c.transition_ident  
where c.data_supplier='J' 
  and c.airport_ident='KOPF' 
  and x.name is null; 
```

让`corept.std_star_leg`表是这样的。

```
star_ident transition_ident sequence_num fix_ident airport
A               XX               10         QWE     KOPF  
A               XX               20         WER     KOPF  
A               XX               30         HYU     KOPF  
A               XX               40         GJI     KOPF   
B               YY               10         SJI     KOPF  
B               YY               20         DJI     KOPF  
B               YY               30         FJI     KOPF  
B               YY               40         GHI     KOPF  
B               YY               50         KDI     KOPF 
```

执行内部连接后，将获得如下结果。

```
A               XX               40         GJI  
B               YY               50         KDI 
```

从而检索最大`sequence_num`行数。之后，`skyplan_deploy.deploy_stars`表格将如下所示。

```
apt            name              trans    
KOPF            A                 FJI  
KOPF            A                 DHI   
KOPF            B                 VNM 
```

我需要输出

```
A  GJI   
B  KDI 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T09:37:32.197

这可能有效。检查一次。

```
SELECT DISTINCT c.airport_ident,c.sid_ident,c.transition_ident,c.fix_ident
               FROM corept.std_sid_leg c
                INNER JOIN
                (SELECT sid_ident,transition_ident,max(sequence_num) seq,route_type
                 FROM corept.std_sid_leg
                 WHERE data_supplier='J'
                 AND airport_ident='KOPF'
                 GROUP BY sid_ident,transition_ident)b
                 ON c.sequence_num=b.seq AND c.sid_ident=b.sid_ident AND c.transition_ident=b.transition_ident
                LEFT JOIN
                 (SELECT name,trans
                  FROM skyplan_deploy.deploy_sids
                  WHERE apt='KOPF'
                  AND name!=trans) d
                 ON d.name=c.sid_ident AND d.trans=c.fix_ident
                 WHERE c.data_supplier='J' AND c.airport_ident='KOPF' AND d.name is null 
```

# crystal-reports - 组级数据与汇总数据的比率 - Crystal Reports

> ID：15651412
> 
> 赞同：1
> 
> 时间：2013-03-27T03:27:05.307
> 
> 标签：crystal-reports, cumulative-sum, group-summaries

我无法找到一种方法来将汇总数据与组级别数据（不是详细级别）进行比率

问题的简化版本如下：

* * *

说，我有两个具有一对多关系的表：

```
stock LEFT OUTER JOIN sales ON stock.barcode=sales.barcode 
```

报告布局如下：

```
GroupHead2 |
GroupHead1 | Sales$                       %             Stock$      %
Details    | Sales
GroupFoot1 | a=Sum(Sales,{Group1})       a/b            c=Stock      c/d
GroupFoot2 | b=Sum(Sales)                               d=Sum(Stock) 
```

我可以得到 a/b 的比率，如下所示：

```
a/b = Sum({Sales},{Group1})/Sum({Sales}) 
```

但是“d”是一个运行总计（使用运行总计向导制作），因为我只想要每个条码的现有库存与每个条码的销售额总和。

因此，如果我尝试获得比率“c/d”，我会收到一个错误。

* * *

编辑：输出如下所示 - 说：

```
Sales$   %            Stock$   %     
200      13.3         50       100
300      20           20       28.5 
800      53.3         30       30
200      13.3         10       9.1
----------------------------------------------------------------
1500                  110 
```

请注意，百分比库存很古怪，因为它正在重新计算每行的总数（运行）而不是使用总值（例如 110）

* * *

编辑2：

我认为这是一个[类似的问题](https://stackoverflow.com/questions/4205573/calculating-sub-totals-as-a-percentage-of-grand-total-in-crystal-reports-2008)，并希望有人可以提供这个答案的改编（我已经逃脱了）以适应上述情况。

答案如下：

```
Sum ({ numeric field }, { grouping item }) % Sum ({ numeric field }) 
```

这个问题与我的问题略有不同，因为 { numeric field } 是在第 1 组级别引入的，因此每个组 1 只需要评估一次。

* * *

我猜可能有一种方法可以在不使用总和（？）的情况下获得“d”，或者有一种更好的方法来使比率“c/d”？

# sql-server - 对我来说，使用 SQL Server 在表中的 FK 字段上建立索引的最佳方法是什么？

> ID：15651413
> 
> 赞同：0
> 
> 时间：2013-03-27T03:27:17.350
> 
> 标签：sql-server

我有以下内容：

```
 CREATE TABLE Topic (
            [TopicId] INT IDENTITY (1, 1) NOT NULL,
            [TopicSeq] INT NOT NULL,
            [SubjectId] INT NOT NULL,
            [Name] NVARCHAR (50) Not NULL,
            [Version] rowversion,
            [ModifiedDate] [datetime] NOT NULL,
            CONSTRAINT [PK_Topic] PRIMARY KEY CLUSTERED ([TopicId] ASC)
        )"; 
```

我在想如果我需要找到一个主题的所有主题，这将需要很长时间。如果我为 SubjectID 添加索引，那么这会自动改进每个查询吗？我要添加的最佳索引是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:39:39.747

SubjectID 上的索引会相当便宜。您不需要唯一索引，因此它是 CLUSTERED 或 UNCLUSTERED。我会选择 CLUSTERED 因为索引不是很宽（32 位），即使可能有很多非唯一值。

# android - Android - 通过引用其他定义的颜色来定义颜色

> ID：15651414
> 
> 赞同：24
> 
> 时间：2013-03-27T03:27:20.973
> 
> 标签：android, xml, colors, android-resources

我一次又一次地想知道是否有某种方法可以`colors.xml`通过引用另一种已定义的颜色来定义颜色。好吧，我试过了，确实，你似乎可以使用@color/XXX 引用其他颜色。

例如，一个 colors.xml 可能看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    …
    <color name="primary_blue">#205081</color>
    <color name="action_bar_text">@color/primary_blue</color>
    …
</resources> 
```

但我不希望其他人`primary_blue`直接使用我的定义——在没有上下文的情况下将某些东西变成蓝色是没有意义的。我想出的最佳解决方案是在“直接”颜色前面加上前缀`primary_blue`，然后评论它们不应该直接使用。

有什么方法可以防止使用这些直接颜色，同时仍然允许我的 colors.xml 文件引用它们？我在想也许样式或 apklib 可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-17T08:07:07.840

在此处添加答案，以防将来有人遇到此问题。

创建 Android 库时，您可以[将资源标记为 public](https://developer.android.com/studio/projects/android-library.html#PrivateResources)。任何不在`public.xml`文件中的资源都被认为是私有的。

> 隐式地将属性设为私有不仅可以防止您的库的用户体验来自内部库资源的代码完成建议，而且还允许您重命名或删除私有资源而不会破坏您的库的客户端。私有资源会从代码完成和主题编辑器中过滤掉，当您尝试引用私有资源时，Lint 会发出警告。

# c# - 关于如何在 ASP.net 中拖放的建议

> ID：15651416
> 
> 赞同：1
> 
> 时间：2013-03-27T03:27:36.590
> 
> 标签：c#, jquery, asp.net, ajax, web-parts

好的，所以我想要一个简单的 SINGLE 网页，它可以带一个小人，并将他拖到一个运动场（只是一个背景形状的足球场），然后单击“保存”按钮并保存坐标。但我需要有能力在比赛场上增加更多的小人物。

我该怎么做？我正在查看 JQuery Droppable 控件/ASP.NEt 组合，但我没有看到有人将所有坐标保存到数据库的示例。

任何提示或建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:18:52.580

有很多可能的方法。我使用图书馆 Telerik for asp。

*   **Telerik**（付费）- [http://demos.telerik.com/aspnet-ajax/treeview/examples/functionality/draganddropnodes/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/treeview/examples/functionality/draganddropnodes/defaultcs.aspx)

*   **Ajax dragAndDrop 通过 reorderlist** - [http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/reorderlist/drag-and-drop-via-reorderlist-cs](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/reorderlist/drag-and-drop-via-reorderlist-cs)

*   **DragAndDrop 与 asp.net** - [http://msdn.microsoft.com/en-us/magazine/cc135985.aspx](http://msdn.microsoft.com/en-us/magazine/cc135985.aspx)

*   **使用 HTML 5 的 DragAndDrop** - [http://www.developer.com/lang/using-html5-drag-and-drop-in-asp.net.html](http://www.developer.com/lang/using-html5-drag-and-drop-in-asp.net.html)

所有这些链接都是asp的模型“拖放”技术

# python - 在哪里可以了解scrapy SgmlLinkExtractor？

> ID：15651417
> 
> 赞同：1
> 
> 时间：2013-03-27T03:27:44.330
> 
> 标签：python, scrapy

对不起，我对python和scrapy真的很陌生，试图通过反复试验来学习它们。

关于 SgmlLinkExtractor，我看到每个人（至少在这个站点上）都非常擅长找到代表正确路径的正确代码，我在哪里/如何学习？像`(allow=[r'page/\d+'])`or`allow=[r'series-\d{1}-episode-\d{2}.']`等​​等等等。

我试图刮掉一个内容总是在story.html中的网站，链接格式是这样的：

[http://www.example.com/folder/category/description/1234567/story.html](http://www.example.com/folder/category/description/1234567/story.html)

*注 1234567 是一个不断变化的 7 位数字

我的起始网址是[http://www.example.com/folder/](http://www.example.com/folder/)

我正在尝试`SgmlLinkExtractor`如下使用和定义我的路径。我想包括 url 的描述部分和 7 位数字部分中的任何内容。我想确保网址以以下结尾`story.html`：

`Rule(SgmlLinkExtractor(allow=(r'category1/././story\.html',)), callback='parse_item', follow=True)`,

但显然`/././`不允许我跳过两个子级别来访问story.html

写这个的正确方法是什么`SgmlLinkExtractor`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:03:42.583

尝试这个

```
Rule(SgmlLinkExtractor(allow=(r'category1/description/\d+/story\.html',)), callback='parse_item', follow=True) 
```

但我会建议你只使用`/description/\d+/story\.html`这部分，因为它的独特性足以抓取类别

在规则中我们通过正则表达式，所以你只需要学习[正则表达式](http://www.regular-expressions.info/)，有一堆[在线正则表达式测试](http://regexpal.com/)工具可用

# c# - 使用 Observable Collection MVVM 绑定 Pivot 控件（windows phone 8）

> ID：15651419
> 
> 赞同：4
> 
> 时间：2013-03-27T03:27:58.087
> 
> 标签：c#, silverlight, mvvm, windows-phone-8, inotifypropertychanged

我是 WP8 和 MVVM 的新手。我创建了 wp8 应用程序，该应用程序在用户登录后请求各种数据。我只是无法让我的数据透视表头动态创建，我不知道是不是因为我在绑定中做某事， INotifyPropertyChanged，两者或其他！

这是我到目前为止所做的：

我在 App.cs 中定义了一个全局 MainViewModel ，它将存储登录时返回的所有数据。

一旦登录成功并且数据已加载到 MainViewModel 中，我会将其重定向到包含 Pivot Control 的测试页面，并且我正在尝试动态创建 Pivot Items。

这是我的测试页面的 xaml，即 MainPivotPage.xaml，我的 MainPivotViewModel 已初始化，因为它被定义为本地资源并设置为 Pivot 控件的数据上下文，我不知道我是否这样做正确，但我'将“名称”属性分配给 PivotItem 的 Header，它们是存储在我的可观察集合 Pivots 中的对象。属性名称是我在名为 Pivot 的类中拥有的 2 个属性之一，该类包含 PivotId 和 Name。

```
<phone:PhoneApplicationPage
    x:Class="TestApp.Views.MainPivotPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModel="clr-namespace:TestApp.ViewModels"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait"  Orientation="Portrait"
    shell:SystemTray.IsVisible="True" Loaded="PhoneApplicationPage_Loaded">
    <!--LayoutRoot is the root grid where all page content is placed-->

    <phone:PhoneApplicationPage.Resources>
        <viewModel:MainPivotViewModel x:Key="MainPivotViewModel" />
    </phone:PhoneApplicationPage.Resources>

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <!--Pivot Control-->
        <phone:Pivot Title="My Search Options" x:Name="MainPivots" ItemsSource="{Binding Pivots}" DataContext="{StaticResource MainPivotViewModel}">
            <phone:PivotItem Header="{Binding Name}">
                <!--<Grid/>-->
            </phone:PivotItem>
        </phone:Pivot>
    </Grid>
</phone:PhoneApplicationPage> 
```

创建 MainPivotViewModel 时，我将 Pivots 可观察集合设置为存储在 MainViewModel 中的相同可观察集合，该集合包含登录时返回的所有数据。如您所见，我将其分配给属性而不是内部变量，以确保它将触发 INotifyPropertyChanged （嗯...，我认为）

```
public class MainPivotViewModel : BaseViewModel
{
    private ObservableCollection<Pivot> _pivots = null;

    public MainPivotViewModel()
    {
        Pivots = App.MainViewModel.Pivots;            
    }

    public ObservableCollection<Pivot> Pivots
    {
        get
        {
            return _pivots;
        }

        set
        {
            if (_pivots != value) this.SetProperty(ref this._pivots, value);
        }
    }
} 
```

我使用包含在我的基类中的 SetProperty 函数，用于生成 INotifyPropertyChanged 事件，并允许我在每次需要 INotifyPropertyChanged 事件时都设置属性名称。

这是我的 BaseView 的代码：

```
public class BaseViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
    {
        if (object.Equals(storage, value)) return false;

        storage = value;
        this.OnPropertyChanged(propertyName);
        return true;
    }

    protected void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var eventHandler = this.PropertyChanged;
        if (eventHandler != null)
        {
            eventHandler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

我的 Pivot 类如下所示：

```
public class Pivot: BaseModel
{
    private int _pivotId;
    private string _name = string.Empty;

    public Pivot()
    {

    }

    public Pivot(int pivotId, string name)
    {
        PivotId = pivodId;
        Name = name;
    }

    public int PivotId
    {
        get { return _pivotId; }
        set { if (_pivotId != value) this.SetProperty(ref this._pivotId, value); }
    }

    public string Name
    {
        get { return _name; }
        set { if (_name != value) this.SetProperty(ref this._name, value); }
    }
} 
```

您可能会注意到这是从 BaseModel 继承的。这与 BaseViewModel 中的代码完全相同，但我想将两者分开。我不确定这在我的 Pivot 课程中是否需要，但我正在尝试不同的场景并暂时保留它。

我不知道我做错了什么，但无论我尝试什么，我都无法将“名称”属性显示为标题的文本。我很确定 MainPivotViewModel 在被分配为本地资源时已被初始化，因为我正确地调用了我的构造函数，然后它正在初始化我的可观察集合，但仅此而已。

但它绝对没有显示！

我注意到的另一件事是，当我在 BaseViewModel 类的 OnPropertyChanged 方法的“Set”中放置断点时，eventHandler 始终为空，无论我认为不应该是什么，但我看不到我的做错了。

我有很多关于 stackoverflow 和其他文章的文章，但我只是看不出我做错了什么？有人有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:54:01.523

问题解决了！！！

我的代码一直都是正确的，但 XAML 不是！

我猜是陡峭而痛苦的学习曲线！无论如何，我在找到一篇关于 stackoverflow 的文章后找到了解决方案，该文章基本上向我展示了我编写 xaml 的方式不合适。

老实说，我不明白为什么这不能按照定义的方式工作，但简而言之，我必须使用 HeaderTemplate 和 ItemTemplate 才能在绑定到 ViewModel 时正确显示数据！

这是帖子：[Databound pivot is not loading the first PivotItem in Windows Phone 8](https://stackoverflow.com/questions/14023948/databound-pivot-is-not-loading-the-first-pivotitem-in-windows-phone-8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T12:24:43.050

不，你的回答是错误的，你的代码是错误的。

错误一：

```
 set
    {
        if (_pivots != value) this.SetProperty(ref this._pivots, value);
    } 
```

在这里，如果您更改属性或绑定将丢失的变量，这并不重要。

错误 2：从 ItemsControl 派生的所有 UIElement 都忽略 INotifyPropertyChanged，因为它不会仅更新 DataContext 的 ItemsSource。

工作示例

```
 public ObservableCollection<string> LstLog { get; set; }
    private ObservableCollection<string> _lstContent = new ObservableCollection<string>();
    public ObservableCollection<string> LstContent
    {
        get
        {
            LstLog.Add("get");
            return _lstContent;
        }
        set
        {
            LstLog.Add("set");
            _lstContent = value;
        }
    }
    public MainWindow()
    {
        LstLog = new ObservableCollection<string>();

        InitializeComponent();
        this.DataContext = this;
    }

    private void Add_Click(object sender, RoutedEventArgs e)
    {
        LstContent.Add("Value added");
    }

    private void New_Click(object sender, RoutedEventArgs e)
    {
        _lstContent = new ObservableCollection<string>();
    }

    private void NewBind_Click(object sender, RoutedEventArgs e)
    {
        _lstContent = new ObservableCollection<string>();
        listObj.ItemsSource = _lstContent;
    }

    private void NewProp_Click(object sender, RoutedEventArgs e)
    {
        LstContent = new ObservableCollection<string>();
    }

    private void NewPropBind_Click(object sender, RoutedEventArgs e)
    {
        LstContent = new ObservableCollection<string>();
        listObj.ItemsSource = LstContent;
    } 
```

和用户界面

```
<Grid DataContext="{Binding}">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition Height="25" />
    </Grid.RowDefinitions>

    <ItemsControl Grid.Row="0" Name="logObj" ItemsSource="{Binding Path=LstLog}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
    <ItemsControl Grid.Row="1" Name="listObj" ItemsSource="{Binding Path=LstContent}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
    <StackPanel Grid.Row="2" Orientation="Horizontal">
        <Button Name="Add" Content="Add" Click="Add_Click"/>
        <Button Name="New" Content="New" Click="New_Click"/>
        <Button Name="NewBind" Content="New Bind" Click="NewBind_Click"/>
        <Button Name="NewProp" Content="New Prop" Click="NewProp_Click"/>
        <Button Name="NewPropBind" Content="New Prop Bind" Click="NewPropBind_Click"/>
    </StackPanel>
</Grid> 
```

只是为了`LstLog`查看事件列表，如果单击`add`它将更新两个列表，但如果单击`New`或`New Prop`绑定将丢失，直到您像在`New Bind`或中一样更新它`New Prop Bind`

希望这将澄清 XAML 列表事件反复出现的问题。

PS：这是在 WPF 中，但在 WP8 和 Windows 商店应用程序中的工作方式相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T20:51:56.687

这一切对我来说都很好，所以我认为 App.MainViewModel.Pivots 在调用构造函数时为空或为空（因此 Pivot 控件为空），并且您最终在 MainViewModel 中创建了一个新的 Pivots 实例在 MainPivotViewModel 实例化之后。

您是否尝试在 MainPivotViewModel.Pivots 的 getter 中设置断点以确认有一些项目？

# c# - 如何将 mp3 读入字节数组

> ID：15651422
> 
> 赞同：-4
> 
> 时间：2013-03-27T03:28:26.110
> 
> 标签：c#, naudio

我想使用带有 MP3FileReader 对象的 NAudio 将 mp3 读入字节数组，然后我会尝试 fft 它来创建频谱分析仪，但我找不到任何关于它的方法的文档。你有什么建议或例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:50:33.827

MP3 被编码。在 MP3 上执行 FFT 只会扰乱数据。首先解码，删除元数据，然后作为样本读入数组。确保元素大小与样本大小相同。

MATLAB 和 Octave 非常适合信号处理。

抱歉，没有任何 NAudio 经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:37:52.220

[File.ReadAllBytes](http://msdn.microsoft.com/en-US/library/system.io.file.readallbytes%28v=vs.110%29.aspx)将文件读入字节数组：

```
 var bytes = File.ReadAllBytes(fileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:00:07.753

要将音频传递到 FFT，您需要先将其转换为 PCM。NAudio`Mp3FileReader`附带的会自动执行此操作。因此，当您调用时，`Read`您将获得 16 位 PCM 作为字节数组。如果`AudioFileReader`改为使用，则可以将样本作为浮点数，标准化为 +/- 1.0 范围，这是传递给 FFT 的理想选择（尽管您需要分别计算每个通道的 FFT）。如果您查看 NAudio WPF 项目的源代码，您会发现它使用 FFT 来创建频谱分析仪。

# angularjs - 需要 Testacular Angular UI 引导程序“指令”

> ID：15651423
> 
> 赞同：2
> 
> 时间：2013-03-27T03:28:27.237
> 
> 标签：angularjs, angular-ui, karma-runner

我正在尝试对使用 Angular UI-Bootstrap 对话框指令的控制器进行单元测试，但收到**错误：需要参数“指令”**错误。

一旦我将`ui-bootstrap.min.js`文件包含在 Testacular 配置中，这实际上就会发生。

控制器定义为：

```
angular.module('xFormsEntries')
    .controller('xFormsEntryListCtrl', function ($scope, $dialog, Form, FormEntry, FormField) {... 
```

单元测试是：

```
describe('xForms Controllers', function() {

    beforeEach(function() {
        this.addMatchers({
            toEqualData: function(expected) {
                return angular.equals(this.actual, expected);
            }
        });
    });

    beforeEach(module('xFormsServices'));
    beforeEach(module('xFormsEntries'));

    describe('xFormsEntryListCtrl', function() {
        var scope, ctrl, $httpBackend, $dialog;
        var formData = {formId: 1, name: 'FormName'};

        apiURL = ''; // Override the global API URL

        beforeEach(inject(function(_$httpBackend_, $rootScope, $controller, _$dialog_) {
            // Arrange
            $httpBackend = _$httpBackend_;
            $httpBackend.expectGET('/xFormsAPI/Form').respond(formData);

            $dialog = _$dialog_;

            scope = $rootScope.$new();
            scope.formId = 1;
            ctrl = $controller('xFormsEntryListCtrl', {$scope: scope});
        }));

        it('should fetch the form from the server', function () {
            expect(scope.formModel).toBe(undefined);
            $httpBackend.flush();
            expect(scope.formModel).toEqualData(formData);
        });
}); 
```

在集成 UI-Bootstrap 之前，所有测试都通过了。

我尝试将`beforeEach(module('ui.bootstrap'));`和其他变体添加到测试中，但没有成功。

我缺少什么魔法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T17:59:56.753

您是否包含依赖项以及实际的 js 文件？

安装 一旦你下载了所有文件并包含在你的页面中，你只需要声明对 ui.bootstrap 模块的依赖：

```
angular.module('myModule', ['ui.bootstrap']); 
```

# android - 如何使用 SherlockActionbar 实现带有列表视图的搜索小部件？

> ID：15651429
> 
> 赞同：1
> 
> 时间：2013-03-27T03:29:21.717
> 
> 标签：android, listview, actionbarsherlock, searchview

所以，我试图在我的应用程序上实现这个代码（[https://stackoverflow.com/a/14085524/2213992](https://stackoverflow.com/a/14085524/2213992)），但到目前为止没有成功。

这是我的 MainActivity.java：

```
import java.util.List;

import android.app.SearchManager;
import android.content.Context;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.SearchView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class MainActivity extends SherlockListActivity implements
// public class MainActivity extends ListActivity implements
        ActionBar.TabListener {
    private List<Scos> scoss;
    ScosDataSource datasource;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        datasource = new ScosDataSource(this);
        datasource.open();
        scoss = datasource.findAll();
        if (scoss.size() == 0) {
            createData();
            scoss = datasource.findAll();
        }
        refreshDisplay();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getSupportMenuInflater().inflate(R.menu.options, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search)
                .getActionView();
        if (null != searchView) {
            searchView.setSearchableInfo(searchManager
                    .getSearchableInfo(getComponentName()));
            searchView.setIconifiedByDefault(false);
        }

        SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {

            public boolean onQueryTextChange(String newText) {
                // this is your adapter that will be filtered
                adapter.getFilter().filter(newText);
                return true;
            }

            public boolean onQueryTextSubmit(String query) {
                // this is your adapter that will be filtered
                adapter.getFilter().filter(query);
                return true;
            }
        };
        searchView.setOnQueryTextListener(queryTextListener);

        return super.onCreateOptionsMenu(menu);

        // return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            return (true);
        }
        return (super.onOptionsItemSelected(item));
    }

    public void refreshDisplay() {

        ArrayAdapter<Scos> adapter = new ScosListAdapter(this, scoss);
        setListAdapter(adapter);
    }

    @Override
    protected void onResume() {
        super.onResume();
        datasource.open();
    }

    @Override
    protected void onPause() {
        super.onPause();
        datasource.close();

    }

    private void createData() {
    }

} 
```

这是我的 option.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_search"
    android:actionViewClass="com.actionbarsherlock.widget.SearchView"
    android:showAsAction="ifRoom|collapseActionView"
    android:icon="@drawable/ic_action_search"
    android:title="@Search">
</item>

</menu> 
```

提前感谢您的帮助。

哈维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T10:00:46.147

I hope that it would help because I had the same problem.

To use the adapter the best way is that the class implements SearchView.OnQueryTextListener and then you don´t have to create the inner class and you will have the adapter.

In your code will be something as:

```
public class MainActivity extends SherlockListActivity implements SearchView.OnQueryTextListener 
```

and then in the class you have to define the methods. The adapter will be the adapter that you have in your class ArrayAdapter adapter. But you should define it as private in the class.

```
public boolean onQueryTextChange(String newText) {
    // this is your adapter that will be filtered
    adapter.getFilter().filter(newText);
    return true;
}

public boolean onQueryTextSubmit(String query) {
    // this is your adapter that will be filtered
    adapter.getFilter().filter(query);
    return true;
} 
```

In the line where you are setting:

```
 searchView.setOnQueryTextListener(queryTextListener); 
```

Should be:

```
 searchView.setOnQueryTextListener(this); 
```

If you have any problem let me know, I was with a similar problem today and read your question without answer.

# mysql - 实体框架 LIKE 查询

> ID：15651438
> 
> 赞同：3
> 
> 时间：2013-03-27T03:31:09.993
> 
> 标签：mysql, entity-framework-4.1

我将 EF4.1 与 MySql 一起使用，并且无法使 LIKE 查询正常工作。我想获取名称如 app 的产品列表

.Where(p=>p.Name.Contains("app") 仅返回一个名为 Apple 的产品。生成的 SQL 包含 LOCATE 运算符代替 LIKE '%app%'

我尝试使用 SqlQuery("select * from product where name like '%@p0%'", "app") 执行 sql 命令，但无济于事。它不会重新运行任何产品。

有人可以建议我如何为 MySql db 写 LIKE。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T20:15:34.747

我不知道 EF（你没有 hablo Microsoft），但我敢打赌，你的文字上的通配符会干扰参数替换。

如果您尝试以下类似的方法，它有帮助吗？

```
SqlQuery("select * from product where name like concat('%',@p0,'%')", "app") 
```

“@p0”是参数吗？我假设是这样。

另外，尝试：

```
SqlQuery("select * from product where name like '@p0'", "%app%") 
```

还：

```
SqlQuery("select * from product where name like @p0", "'%app%'") 
```

我敢打赌其中一个会起作用。

# java - 自定义类型化集合的自定义字符串表示

> ID：15651443
> 
> 赞同：0
> 
> 时间：2013-03-27T03:32:13.443
> 
> 标签：java, string, collections

如果我需要自定义类型化集合的自定义字符串表示，这是最好的选择子类集合并覆盖 toString()，或者只是创建一个实用方法来获取自定义类型化集合并返回自定义字符串？还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:44:00.667

我倾向于创建一个实用方法。几个原因：

*   从逻辑上讲，您的自定义字符串表示是您在原始类之上分层的东西：它不是原始类的一部分。所以它不属于原始类的定义。
*   创建子类可能只是为了覆盖一种方法而过大
*   由于不同的原因，创建自定义子类使得无法使用覆盖原始类的对象。如果您将继承用于此类事情，您的继承层次结构很快就会变得难以管理。总是喜欢组合而不是继承！
*   出于某些原因，您可能希望继续使用原始`toString()`的：也许您需要两个字符串表示，或者其他一些库依赖于原始`toString()`行为。在这种情况下，覆盖它会导致问题......

在“实用方法”选项中，您还有另一个选择：

*   创建一个简单的静态实用程序方法。简单，快速，这应该是你的首选。
*   使用类似的方法创建一个“格式化程序”对象`formatter.formatAsString(targetObject)`。如果您有一些可以存储在格式化程序中的格式化选项，这将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:35:07.113

The Java object's [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html) `toString` method is intended to provide a string representation for the object. So overriding the `toString` sounds logical.

# php - rar 多个文件由 php

> ID：15651447
> 
> 赞同：0
> 
> 时间：2013-03-27T03:32:29.753
> 
> 标签：php, rar

我正在尝试通过在 php 中使用 exec() 来 rar 多个文件。（使用 rar 命令行）

示例代码：

```
exec("rar a CommandOptionsHere File.rar File.txt"); 
```

上面的代码是对单个文件进行rar，如何在一行代码中对多个文件进行rar？

卷拆分在后期是可能的。

有什么建议吗？

P/S：我想 rar 多个文件，而不是文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:33:53.717

像这样：

```
exec("rar a CommandOptionsHere File.rar File1.txt File2.txt"); 
```

见： http: [//pl.digipedia.org/man/doc/view/rar.1/](http://pl.digipedia.org/man/doc/view/rar.1/)

# javascript - 提交按钮上的 HTML 确认弹出窗口

> ID：15651449
> 
> 赞同：0
> 
> 时间：2013-03-27T03:32:40.010
> 
> 标签：javascript, asp.net, html, web

在我的应用程序中，我有提交按钮，该按钮在我的数据库中调用存储过程，也在同一页面上具有需要数据的文本框。我对该文本框使用了必填字段验证器。如果文本框为空，则我的提交按钮和确认验证会触发 Ajax 规范。我需要检查该文本框是否已归档数据，并且只有在该构造后才应在按钮上触发。我不想在必需的字段验证之前弹出弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:39:09.697

你可以使用类似的东西

```
var button = document.getElementById('button'); // or whatever ID your button has
var textbox = document.getElementById('textbox'); //or whatever ID your input has
button.onclick = function() {
    if (textbox.value === "") {
        return false;
    }
    else {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:27:54.420

您可以使用此代码

```
jQuery('#<%= button.ClientID %>').click(function(){
    if(jQuery('#<%= textbox.ClientID%>').val()=='')
    {
         return false;
    }
    else
    {
        return(confirm('Are you sure?'));
    }
}); 
```

# php - 如何使用我的“.selectedIndex;” 选择框中的值作为我的 PHP 请求中的索引？

> ID：15651451
> 
> 赞同：0
> 
> 时间：2013-03-27T03:32:45.350
> 
> 标签：php, ajax, select, dojo, indexing

我有一个选择框，它使用“onchange”根据用户的选择来选择一个值。

```
//AddSelect start of function
    var TownSelect = function(options){
        var _dom_element = document.createElement("select");
            _dom_element.id = 'selectMenu';

        for ( var i = 0; i < options.length; i++ ) {
        var _option = document.createElement("option");
            _option.value = options[i];
            _option.innerHTML = options[i];
            _dom_element.appendChild(_option);

            _dom_element.onchange = function(){
            var checkValue = document.getElementById('selectMenu').selectedIndex;
                //alert(options [checkValue]);
            };
        }

        this.getDomElement = function() {
            return _dom_element;
        }
    }
    //AddSelect end of function 
```

在这里，我有我的 dojo ajax 函数，它使用我需要的索引（ntown）向我的 PHP 文件发出请求 = 我的选择菜单选择值的值（希望这是有道理的）：

```
 var _getWeatherInfo = function(ntown){
     dojo.xhrget({

         url: "PHP/weather.php?ntown=" + ntown,

         handleAs: "json",
         timeout: 5000,

         load: function(response) {
               _refreshWeatherList(response); 
         },

         error: function(error_msg, response) {
             _handleError(error_msg);
         }
     });
 } 
```

我的最后一个问题引起了一些混乱，如果您需要更多信息或更好的解释，请询问我。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:42:54.067

您必须在 onchange 函数中调用 _getWeatherInfo**作为函数**！

```
_dom_element.onchange = function(){
   var checkValue = document.getElementById('selectMenu').selectedIndex;
   _getWeatherInfo(checkValue);
 }; 
```

# jquery-ui - Plone Dexterity RelationChoice 小部件与 jQueryUI 冲突？

> ID：15651455
> 
> 赞同：4
> 
> 时间：2013-03-27T03:33:05.853
> 
> 标签：jquery-ui, plone, jquery-ui-autocomplete, dexterity

我的自定义类型中的 RelationChoice 小部件工作正常，直到`collective.js.jqueryui autocomplete`启用，然后它停止工作，即停止进行关系查找；当您在该字段中键入时，没有任何反应。

（在网站的另一部分，我使用`collective.js.jqueryui autocomplete`Google Maps API 在用户填写地址字段时返回地址建议。）

当前的解决方法是`collective.js.jqueryui autocomplete`在我想使用 RelationChoice 小部件时禁用（然后重新启用）。不是一个好的解决方案。

*   克隆 4.2.1.1
*   collective.js.jqueryui 1.8.16.9（也尝试过 1.10.0.1 - 相同的冲突）
*   plone.app.dexterity 1.2.1

独立：

*   如果我只启用`plone.formwidget.autocomplete/jquery.autocomplete.min.js`我的谷歌地图查找不会触发（见下面的代码）但 RelationChoice 小部件有效
*   如果我只启用`collective.js.jqueryui autocomplete`我的谷歌地图查找工作但 RelationChoice 小部件不会触发

代码示例：

* * *

```
 $(document).ready(function() {
        initialize();

        $(function() { // Google maps lookup
            $("#address").autocomplete({
                //This bit uses the geocoder to fetch address values
                source: function(request, response) {
                geocoder.geocode( {'address': request.term}, function(results, status) { ... 
```

* * *

```
 ... <input type="text" name="address" id="address" autocomplete="off" class="ac_input"> 
```

我可以`plone.formwidget.autocomplete/jquery.autocomplete.min.js`在上面的代码中重复使用吗？我不知道如何让它触发我的谷歌地图查找......？（`collective.js.jqueryui autocomplete`启用后成功激活上述功能。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T06:44:44.820

好的，我已经做到了。至少在 Plone 4.3 上

第一部分是，完全启用包中的 jQuery ui 效果。存在命名空间问题和丢失文件，导致`.effects() is not a function`.

首先，将正确的 jQueryUI 版本 cd 下载到其中并

```
jquery=/buildout_dir/parts/omelette/collective/js/jqueryui

cp jquery.ui.effect.min.js $jquery/js/jquery.ui.effect.core.min.js 
```

然后 cd 进入`$jquery`目录并将所有效果包转换为正确的命名空间。例如：

```
mv js/jquery.ui.effect-highlight.min.js js/jquery.ui.effect.highlight.min.js 
```

然后用 替换所有出现`effects`的`effect` `$jquery/config.py`。在 vim 中使用

```
:1,$s/effects/effect/g 
```

其次，要启用基于 jQuery 的自动完成小部件，请 cd 进入构建的 src 目录，然后

```
 git clone https://github.com/plone/plone.formwidget.autocomplete.git plone.formwidget.autocomplete
 git checkout jqueryui-autocomplete 
```

然后编辑你的`versions.cfg`. 为了我

```
plone.formwidget.autocomplete >= 2.0 
```

作品。然后编辑您的并在和`buildout.cfg`下添加包。我做了一个扩展，但它可能足以重新启动 Zope。最后一步显然是访问门户安装程序并重新安装产品。`zcml``develop`

**更新**

如评论中所述，它没有完全发挥作用。我还必须修改一个 .js 文件，即`autocomplete.js`从`plone.formwidget.autocomplete`包中。这是结果

[http://pastebin.com/RPaLk80H](http://pastebin.com/RPaLk80H)

这一切使 RelationChoiceWidget 和 AutocompleteWidget以一种形式**一起工作。**我喜欢。

我还在 github 上为 jQueryUI 包提交了错误报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:43:19.113

Contenttree 小部件基于自动完成小部件。

自动完成小部件与 jqueryui 自动完成插件冲突。

使用collective.js.jqueryui，您可以使用portal_registry 取消激活自动完成插件。

ploneformwidget.autocomplete 被 jqueryui 破坏了很多年。plone.formwidget.autocomplete 有一个基于 jqueryui（分支 2.0）的分支，但我还没有使用 contenttree 小部件对其进行测试。

所以要解决您的问题：转到 jqueryui 控制面板并取消选中自动完成插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:42:55.443

**更新**（根据问题的更新）：

参考 Martin 的教程和[关于关系的部分](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/references)，Dexterity 拉取 plone.formwidget.contenttree，拉取 plone.formwidget.contenttree，拉取 plone.formwidget.autocomplete。

后者包括 jQuery 的自动完成源，collective.js.jqueryui 也是如此，由您的地图产品拉取。很可能发生冲突。

尝试这个：

*   转到[http://yourhost.org:8080/yourSiteId/portal_javascripts/manage_workspace](http://yourhost.org:8080/yourSiteId/portal_javascripts/manage_workspace)

*   取消选中 '++resource++plone.formwidget.autocomplete/jquery.autocomplete.min.js' 并点击底部的保存。确保调试模式已打开（复选框位于最顶部）。

# c++ - 通过回调更新类属性

> ID：15651457
> 
> 赞同：0
> 
> 时间：2013-03-27T03:33:11.117
> 
> 标签：c++, windows, visual-studio, events, callback

我正在构建一个需要根据活动窗口/程序加载不同设置的应用程序（例如，如果您使用的是 chrome，则会加载与 Chrome 关联的设置，当您切换到 MS Word 时，会加载 MS Word 设置）。

现在，我正在研究一个类，该类在每次活动窗口更改时从数据库中获取正确的设置。此类还将有一个“LookUp”方法，该方法根据上次获取的设置返回一个值。

描述我试图用伪代码实现的内容：

```
class RecipeBook{
   public:
       RecipeBook();
       HWINEVENTEVENTHOOK hEvent;
       string currentProgram;
       static VOID CALLBACK WindowCallback(HWINEVENTHOOK hWinEventHook, 
                                           DWORD dwEvent,
                                           HWND hwnd, LONG idObject, 
                                           LONG idChild, 
                                           DWORD dwEventThread, 
                                           DWORD dwmsEventTime); //Actual callback
       void messageCheck(void*);
 }

 RecipeBook::RecipeBook(){
      this->hEvent = SetWinEventHook(EVENT_SYSTEM_FOREGROUND, 
                                     EVENT_SYSTEM_FOREGROUND, 
                                     NULL,&WinEventProcCallback, 
                                     0, 0, 
                                     WINEVENT_OUTOFCONTEXT | WINEVENT_SKIPOWNPROCESS);

      Start messageCheck(void*) in separate thread
 }

 void messageCheck(void*){
    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0))
    {
     TranslateMessage(&msg);
     DispatchMessage(&msg);
    }

 }

 VOID CALLBACK WindowCallback(HWINEVENTHOOK hWinEventHook, 
                                           DWORD dwEvent,
                                           HWND hwnd, LONG idObject, 
                                           LONG idChild, 
                                           DWORD dwEventThread, 
                                           DWORD dwmsEventTime){

       Get the name of the active program from the HWND handle //This is working
       Update RecipeBook->CurrentProgram
 } 
```

我遇到的问题：

1) 无法让消息检查在单独的线程中运行。如果我按顺序运行代码，它工作正常。当我尝试在线程中生成 messageCheck 时（使用

```
 AfxBeginThread(&messageCheck, &currentProgram, THREAD_PRIORITY_NORMAL, 0, 0,NULL) 
```

)

似乎没有创建另一个线程。

2) 我不知道如何从回调中修改 RecipeBook 中的值。我曾想过从回调中返回名称，但我还没有设法让它发挥作用。如果我可以从回调中编辑字符串，那就太好了。

3）我想在调用 LookUp 方法时只询问当前的活动程序，但我只能找到获取调用进程 ID 的方法，而不是活动的 Windows 进程 ID。

这是一个很大的问题，但任何建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:23:31.947

```
GetForgroundWindow() 
```

这就是我要找的！

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505(v=vs.85).aspx)

出于某种原因，我试图使用 GetActiveWindow() 并且每当我出于某种原因看到 Forground 窗口时，我都在考虑背景窗口。哎呀！

除非任何人都可以很好地解释如何进行多任务处理，CALLBACK 的东西，否则我将只使用这个函数并在 LookUp 完成时查询当前窗口。不应该那么频繁，这个过程不会花费太长时间。

对于任何对如何使用窗口句柄从活动窗口/PID获取进程名称感兴趣的人，这就是我一直在做的事情：

```
DWORD processID;
LPTSTR processName = new TCHAR[MAX_PATH];
DWORD nameSize = MAX_PATH;
HWND activeWindowH = GetForegroundWindow();
DWORD threadID = GetWindowThreadProcessId(activeWindowH,&processID);
HANDLE processHandle = OpenProcess(PROCESS_QUERY_LIMITED_INFORMATION | PROCESS_QUERY_INFORMATION,FALSE,processID);
BOOL nameSuccess = QueryFullProcessImageName(processHandle,0,processName,&nameSize); 
```

干杯!

# php - 在 symfony2 中删除具有特定 Uri 的缓存文件

> ID：15651461
> 
> 赞同：0
> 
> 时间：2013-03-27T03:33:51.247
> 
> 标签：php, caching, symfony

当我为自定义页面使用 HTTP 缓存时，Symfony2 会在缓存文件夹下为其创建一个文件，并且可以为此缓存设置超时。但是，当我更新与该特定页面相关的一些数据库信息时，我的用户无法看到更改（取决于缓存寿命）。为了解决这个问题，我想使用该页面的 URI 在更新操作中删除特定文件。在 symfony 书中说：“最标准的方法是通过使用特殊的 PURGE HTTP 方法请求给定 URL 来清除缓存”。但是如何从我的 symfony 控制器内部创建 PURGE HTTP 方法？可能吗？还是有另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:25:14.997

内置的反向代理缓存可能不是进行这种缓存的最佳位置。这个缓存最好按照描述使用——不要用它来存储需要手动失效的东西，它会给你省去很多麻烦。

如果您正在执行的数据库查找很繁重，那么请考虑使用[学说结果缓存，或者使用](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html)[现有缓存包](http://knpbundles.com/search?q=cache&page=2)之一在学说和您的响应之间实现缓存

# objective-c - 为什么 NSString 复制返回相同的字符串

> ID：15651463
> 
> 赞同：1
> 
> 时间：2013-03-27T03:34:06.980
> 
> 标签：objective-c, xcode4.5

```
po self.URL.copy
$1 = 0x1fc3ced0 http://maps.googleapis.com/maps/api/staticmap?&zoom=16&size=160x160&maptype=roadmap&sensor=true&center=-6.2032,106.7696&markers=size:small%7Ccolor:blue%7C-6.2032,106.7696
$2 = 0x1fc3ced0 http://maps.googleapis.com/maps/api/staticmap?&zoom=16&size=160x160&maptype=roadmap&sensor=true&center=-6.2032,106.7696&markers=size:small%7Ccolor:blue%7C-6.2032,106.7696
$3 = 0x1fc3ced0 http://maps.googleapis.com/maps/api/staticmap?&zoom=16&size=160x160&maptype=roadmap&sensor=true&center=-6.2032,106.7696&markers=size:small%7Ccolor:blue%7C-6.2032,106.7696
(lldb) po self.URL
$4 = 0x1fc3ced0 http://maps.googleapis.com/maps/api/staticmap?&zoom=16&size=160x160&maptype=roadmap&sensor=true&center=-6.2032,106.7696&markers=size:small%7Ccolor:blue%7C-6.2032,106.7696 
```

我认为副本应该返回相同但地址不同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:36:49.863

`NSString`是不可变的，因此几乎没有理由实际复制它。相反，它可能只是在内部增加引用计数。检查[此问题](https://stackoverflow.com/questions/2521468/nsstring-copy-not-copying)以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T03:36:57.310

如果字符串是不可变的，那么`copy`实际上只是一个`retain`. 由于字符串的内容永远不会改变，因此无需复制字符串的数据。

# sql - 从 SQL 查询将项目添加到组合框

> ID：15651466
> 
> 赞同：1
> 
> 时间：2013-03-27T03:34:25.437
> 
> 标签：sql, vb.net, combobox

嘿伙计们，我想在 vb.net 中将项目添加到我的 ComboBox 中。但我需要的数据在我的数据库中。

我这里有一个 SQL 查询语句：

```
"SELECT DISTINCT(Tags) from Legal_Records" 
```

我想要做的是将此 SQL 查询的结果添加到我的 ComboBox 中。

任何人都可以帮助我，让它变得简单 tnx 伙计们！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T03:49:47.193

你可以让datagridview看起来像一个组合框..

删除行标题和列标题..您可以通过添加“向下箭头”按钮来复制下拉操作..在向下箭头按钮单击时添加一个事件..它应该显示datagridview ..如果您单击datagridview上的单元格。 .您应该复制所选单元格的内容并将其复制到您的文本框，然后隐藏datagridview ..

> 它只需要 3 个控件*，您可以轻松地管理您的数据源（使用 datagridview）..

```
* (1)textbox and (2)arrow button down - to make it look like a combobox.. last is the (3)datagridview 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T16:52:46.637

这是我的样本

```
 cbsection.Items.Clear()
    strsql = "select DISTINCT(section)  from sassign where grade like @field1"
    sqlcmd = New SqlClient.SqlCommand(strsql, sqlconn)
    With sqlcmd
        .Parameters.AddWithValue("@field1", cbgrade.Text)
    End With
    sqldr = sqlcmd.ExecuteReader
    While (sqldr.Read())
        With cbsection.Items.Add(sqldr("section"))
        End With
    End While
    sqlcmd.Dispose()
    sqldr.Close( 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:52:11.270

您可能会从该查询返回多个结果，但这里是如何去做您想做的事情：

1.  如果您还没有连接，则需要某种连接：

    ```
    Dim conn As SqlConnection = New SqlConnection('连接字符串)    
    conn.Open()
    ```

2.  您已完成命令，现在只需执行以下操作：

    ```
    暗命令 As SqlCommand = New SqlCommand("SELECT DISTINCT(Tags) from Legal_Records", conn)
    ```

3.  现在，您需要一个阅读器，如下所示：

    ```
    昏暗阅读器 As SqlDataReader = command.ExecuteReader()                   
    '您的查询将返回一个对象数组，除非您知道只有一个值要返回，如果是这种情况，您可以使用 command.ExecuteScalar()，它只返回第一行的第一列

    而 reader.Read()  
    ComboBox1.Items.Add(reader.GetString(0)) '你也可以做GetInt32、GetDouble等。每次调用GetString或任何你选择的，它都会移动到对象数组中的下一个项目`
    ```

就是这样，希望对您有所帮助，不要忘记关闭并处置您的所有资源。

# facebook - Error 500 on dialog/oauth API after today's push at 8:21

> ID：15651469
> 
> 赞同：8
> 
> 时间：2013-03-27T03:35:05.040
> 
> 标签：facebook, oauth

Our apps are getting error 500 on this call :

[https://www.facebook.com/dialog/oauth?client_id=89dc1edc0036d868930ccbac657e8b7f&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Frealmofempires%2F&scope=email](https://www.facebook.com/dialog/oauth?client_id=89dc1edc0036d868930ccbac657e8b7f&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Frealmofempires%2F&scope=email)

Does anyone know of any issues?

There is a work around, just replace the "www.facebook.com" with "m.facebook.com"

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T13:15:20.927

Facebook 似乎已经放弃了对旧 API KEY 的支持。如果您查看您的应用程序设置页面，您将看到应用程序 ID/Api 密钥。这些已在 2011 年合并，因此只需将您的 api_key 替换为您的 app_id 即可获得 client_id 参数。

这应该是一个突破性的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T11:14:58.727

根据您使用的 oauth 工具，如果 API 密钥和/或密钥丢失，可能会出现错误 500

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:29:29.730

我可以通过删除 facebook.com 上的所有 cookie 来重现您的问题，然后访问您发布的链接。

如果您访问[http://www.facebook.com](http://www.facebook.com)一次，那么您的 URL 将起作用。如果找到它现在需要 facebook.com 上的 cookie 才能工作（在 facebook.com 上名为 datr）。facebook一定有变化/问题。

如果您直接访问相应的 login.php 也可以。

# javascript - How To Replace jQuery 1.9.1's $.parseJSON function with the implementation from jQuery 1.8.3

> ID：15651471
> 
> 赞同：1
> 
> 时间：2013-03-27T03:35:18.963
> 
> 标签：javascript, jquery, jquery-1.9

jQuery has altered it's implementation of $.parseJSON as of version 1.9.0 and we really depended on the way earlier versions of jQuery parsed null and empty strings, e.g. jQuery used to not throw an exception and would return a null value for null and empty string.

We would like to utilize the newest version of jQuery which at the time of writing is 1.9.1, but replace the implementation of $.parseJSON.

Documentation stating the change from jQuery: [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

Is there some JavaScript we could use to tell jQuery to replace it's "natural" version of the $.parseJSON function with another implementation / function with the same name...the version from jQuery 1.8.3?

[http://code.jquery.com/jquery-1.8.3.js](http://code.jquery.com/jquery-1.8.3.js) has the function's implementation that we need.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:58:00.803

如果必须，请这样做：

```
jQuery._parseJSON = jQuery.parseJSON;

jQuery.parseJSON = function( data ) {

    if ( !data || typeof data !== "string") {
        return null;
    }

    return jQuery._parseJSON( data );

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:49:44.923

我不会推荐它，但如果你仍然想这样做

创建一个 jquery-override.js 文件并将以下内容添加到其中

```
jQuery.parseJSON = function( data ) {
        if ( !data || typeof data !== "string") {
            return null;
        }

        // Make sure leading/trailing whitespace is removed (IE can't handle it)
        data = jQuery.trim( data );

        // Attempt to parse using the native JSON parser first
        if ( window.JSON && window.JSON.parse ) {
            return window.JSON.parse( data );
        }

        // Make sure the incoming data is actual JSON
        // Logic borrowed from http://json.org/json2.js
        if ( rvalidchars.test( data.replace( rvalidescape, "@" )
            .replace( rvalidtokens, "]" )
            .replace( rvalidbraces, "")) ) {

            return ( new Function( "return " + data ) )();

        }
        jQuery.error( "Invalid JSON: " + data );
    } 
```

然后在 jquery-1.9.1.js 文件之后包含这个文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T20:51:51.140

如果您的问题与在 jQuery 的**$.ajax()方法的上下文中发生的****$.parseJSON()**调用有关，那么这里是一个不错的解决方案。您可以通过设置如下转换器来覆盖从 JSON 字符串到 JS 对象的默认转换：

 **```
$.ajaxSetup({ 
            converters: { "text json": function (jsonString) {
                var jsonObj = mySpecialParsingMethod(jsonString);
                return jsonObj;
            } }
}); 
```

如果您没有就 $.ajax() 方法问这个问题......那么没关系。:-)**

# c# - Calling a windowsservice ExecuteCommand to excute a OnCustomCommand on itself?

> ID：15651473
> 
> 赞同：0
> 
> 时间：2013-03-27T03:35:26.803
> 
> 标签：c#, windows-services, command, execute, self

ServiceController.ExecuteCommand in C# can be used to send custom command to a windows service. Like here - [How to send a custom command to a .NET windows Service from .NET code?](https://stackoverflow.com/questions/3695245/how-to-send-a-custom-command-to-a-net-windows-service-from-net-code)

ServiceController myService = new ServiceController("MyService");

myService.ExecuteCommand(200);

I also understand that the command number should be between 128 and 256.
So I tried doing the same with both the service name and service display name, but crashed the windows service both times. It doesn't get caught in try catch.
And EventViewer says - "The MyService service terminated unexpectedly. It has done this 1 time(s)."

So my question is - Is it possible for a windows service to call ExecuteCommand within itself to invoke a call to OnCustomCommand() in the same windowsservice?

Thanks-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T11:33:37.490

是的。有可能做到这一点。我曾经在 Windows 服务中托管 WCF 服务的地方做过一次，使用 ExecuteCommand 调用主机的方法。如果您需要语法方面的帮助，我想看看您现在正在处理的代码。

# jquery - Convert a jqplot figure into data url and send as part of html form

> ID：15651477
> 
> 赞同：0
> 
> 时间：2013-03-27T03:35:38.820
> 
> 标签：jquery, html, jqplot

I have a dynamic figure which is generated by jqplot. Now I need to pass this plot to another webpage in the PNG format. My solution is

1.  Convert this jqplot as data url in a variable

    ```
    var imgData = $('#chart1').jqplotToImageStr({}); 
    ```

2.  Send this variable as part of html form to the next page

    ```
    $('<tr style="display:none"><td><input type="hidden" name="extract1"></td></tr>')
        .appendTo('.getpdf')
        .find('input')
        .data(imgData); 
    ```

    I also tried to use `.val(imgData)`, which also failed

3.  Print it and check.

    extract1 = form.getvalue('extract1')

    html = html + """'<'img id="imgChart1" src="%s" />"""%(extract2)

However, on the next page, when I tried to print this variable, I got nothing. It seems like it did escape this variable properly. If I assign `extract2` with data-url string, it worked. Could anyone give me some suggestions?

### Update:

It seems like the problem existed in the step sending image as data-url to the next page. In the new page, if I supply a verified image data-url, it worked.

# c - Difference in variable value inside and outside a function

> ID：15651479
> 
> 赞同：0
> 
> 时间：2013-03-27T03:36:00.883
> 
> 标签：c, function, return-value, output, structured-programming

I wrote a program in which I found the area of cylinder using a function`area` with a return-type and without parameters. `answer`was returned to `main` function. However, I am getting different output in `main` and a different output in `area`. The decimal places seem to be replaced by 0 in the `main` function. Why is it so? ![enter image description here](../Images/e5796b9ce6a800bc801daebe1c424257.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:39:30.757

将 area 的返回类型从 int 更改为 float

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:38:23.967

您的函数返回一个`int`截断值的任何实部的函数。

```
float area() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T03:39:25.750

您的变量`answer`在区域函数中是浮点数，但区域函数的返回类型是`int`. 所以它在返回过程中输入大小写，在 main

```
int area(){
 ^  should be float

 float answer;

 // print float
 return answer;
}

int main(){
 answer = area(); // answer gets integral part
 // print int part
} 
```

# c# - 从 SQLite 数据库获取行消耗 100% 的处理器时间

> ID：15651485
> 
> 赞同：0
> 
> 时间：2013-03-27T03:36:33.747
> 
> 标签：c#, .net, database, sqlite

这是我们为表格获取的 DDL 脚本：

```
CREATE TABLE [stat_ping] (
  [lid] INT NOT NULL ON CONFLICT IGNORE, 
  [ping] NUMERIC(6, 2) NOT NULL ON CONFLICT IGNORE, 
  [timeping] DATETIME NOT NULL ON CONFLICT IGNORE); 
```

表格数据样本：﻿</p>

```
lid ping    timeping
2036    1   2013-02-26 10:46:27.000
2002    1   2013-02-26 10:46:27.000
2006    1   2013-02-26 10:46:27.000
2015    1   2013-02-26 10:46:27.000
2009    1   2013-02-26 10:46:27.000
2000    1   2013-02-26 10:46:27.000
2016    1   2013-02-26 10:46:27.000
2031    1   2013-02-26 10:46:27.000
2016    1   2013-02-26 10:46:27.000
2018    1   2013-02-26 10:46:27.000
2012    1   2013-02-26 10:46:27.000
2008    1   2013-02-26 10:46:28.000
2019    1   2013-02-26 10:46:29.000
2001    0   2013-02-26 10:46:29.000
2005    1   2013-02-26 10:46:29.000
113     1   2013-02-26 10:46:30.000 
```

我们使用此类查询通过该数据计算服务可用性的百分比：

```
lock (Logger._lockObj)
{
    using (SQLiteConnection sql = new SQLiteConnection(ConfigurationManager.ConnectionStrings["SQLite"].ToString()))
    {
        sql.Open();
        foreach (var item in kk)
        {
            item.ping.stconn = 0;
            string sqlquery = "select (sum(s.ping)*100/count(s.timeping)) from stat_ping as s where s.timeping between datetime('" + DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") + "','-1 day') and datetime('" + DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") + "') and s.lid=" + item.lid;
            using (SQLiteCommand comm = new SQLiteCommand(sqlquery, sql))
            {                                
                item.ping.stconn = Convert.ToByte(comm.ExecuteScalar());
            }
        }
    }
} 
```

我们使用 Devart SQLite 数据提供程序进行连接。表 stat_ping 包含大约 100000 行。因此，对于 5 个项目，计算百分比大约需要 6-7 秒，并且需要 100% 的处理器。

我知道我们应该使用单独的存储过程来计算所有项目的百分比，只需要一次调用存储过程/函数，但是任何人都可以分享真实的性能和使用机会的经验吗？

我的另一个项目将使用 SQLite 数据库作为 SOAP 消息记录的容器。我认为数据库会占用很多空间，因为一对请求和响应就需要 150KB。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:48:23.853

您是否尝试过使用一些索引来加快查询速度？我还建议使用准备好的和参数化的查询，因为在循环中生成新命令非常繁重。

另外，根据我的经验，当表中有很多行时，SQLite 数据库会很慢。我们曾经清理过旧数据的 SQLite 数据库，我们将其归档到另一个数据库中。

顺便说一句，当表中有大量数据时，MS SQL Server CE（它是嵌入式进程内数据库，无需设置）表现得非常完美。我们用作处理数千个客户端的 Windows 服务的缓存数据库。当数据库大小增长超过 1GB 时，它开始变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:42:18.333

要执行查询，SQLite 引擎当然需要 CPU 时间，这也取决于查询的复杂性。dotConnect for SQLite 调用 sqlite3.dll 引擎的函数，然后该引擎定义所需的资源量，包括 CPU 时间。使用所需 CPU 时间的事实是正常行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:16:17.857

你说你的列上只有一个索引`lid`——但你在这里过滤你的数据`timeping`：

```
 string sqlquery = "select (sum(s.ping)*100/count(s.timeping))
   from stat_ping as s where s.timeping between
   datetime('" + DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") + "','-1 day')
   and
   datetime('" + DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") + "')
   and s.lid=" + item.lid; 
```

– 所以尝试在`timeping`.

而且我还注意到您正在`lid`循环中对这里的几个进行此查询。*也许尝试通过一个*查询 GROUPing by获取所有数据会更有效`lid`？（当然，删除当前的最后一个 WHERE 条件。或者，如果您不想要表中所有`lid`条目的数据，而只想要几个选定条目的数据，那么添加一个`and s.lid IN (…,…,…)`条件。）

# c++ - C++这个数组的静态分配和动态分配有什么区别？

> ID：15651486
> 
> 赞同：2
> 
> 时间：2013-03-27T03:36:34.747
> 
> 标签：c++, c, variable-length-array

```
int length = 5;
int hi[length]; 
```

对比

```
int length = 5;
int *hi = new int[length]; 
```

每当您尝试静态分配大小不恒定的数组时，我都被告知编译器会在 C 中抱怨。因此，如果您需要未知大小的数组，则需要动态分配内存。但是，既然有允许第一个示例的编译器，那么它们到底在做什么呢？他们仍然在数据段中，还是不在堆中？如果它们在堆上，那么示例之间有什么区别，为什么我仍然必须在第二个示例中调用 delete[] 而不是第一个示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:02:08.383

> 但是，既然有允许第一个示例的编译器，那么它们到底在做什么呢？他们仍然在数据段中，还是不在堆中？如果它们在堆上，那么示例之间有什么区别，为什么我仍然必须在第二个示例中调用 delete[] 而不是第一个示例？

第一个是声明一个*静态*变量（通常在堆栈上*），它将在定义它的代码块的末尾*死亡。*

第二个是动态分配一个变量（通常在堆*上），这意味着您可以决定在哪里释放它`delete[]`（是的，您应该记住这样做）。

在数组上下文中，两者之间的主要区别在于，第二个可以通过解除分配它指向的内存（例如前一个数组）并使其指向仍然动态分配的新数组来轻松调整大小。

```
int* arr = new int[5];
[...]
delete[] arr;
arr = new int[10]; 
```

静态数组`int hi[length]`通常声明`const int*`不应修改的 a 。也就是说，C++ 提供了一整套可以/应该使用的容器来代替数组。

[*]*注意：C++ 标准没有指定在哪里分配动态或静态内存。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:01:18.690

大概是你的代码

```
int length = 5;
int hi[length]; 
```

是在本地范围内，而不是在文件范围内，因为后者是不合法的。

> 他们还在数据段中吗

他们永远不会进入数据段；他们进入堆栈（在典型/常见的实现中；语言标准没有说明他们去哪里）。

> 为什么我仍然必须在第二个示例中调用 delete[] 而不是第一个示例？

首先，VLA（像 的可变长度数组`hi[length]`）在 C++ 中是不合法的，所以你不能调用 delete[]。但是没有必要调用 delete，因为`hi`在它所在的块的末尾超出了范围。由`new`OTOH 分配的对象或数组在删除之前不会超出范围。只有指针`hi`超出范围，但您可能已将其值分配给仍在范围内的另一个指针。

# c++ - 如何在模板参数列表中传递模板函数

> ID：15651488
> 
> 赞同：35
> 
> 时间：2013-03-27T03:36:47.193
> 
> 标签：c++, templates, c++11, function-templates

假设我有一个`template`功能：

```
template<typename T>
T produce_5_function() { return T(5); } 
```

我怎样才能将这整个传递`template`给另一个`template`？

如果`produce_5_function`是函子，就没有问题：

```
template<typename T>
struct produce_5_functor {
  T operator()() const { return T(5); }
};
template<template<typename T>class F>
struct client_template {
  int operator()() const { return F<int>()(); }
};
int five = client_template< produce_5_functor >()(); 
```

但我希望能够使用原始函数模板来做到这一点：

```
template<??? F>
struct client_template {
  int operator()() const { return F<int>(); }
};
int five = client_template< produce_5_function >()(); 
```

我怀疑答案是“你不能这样做”。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T04:10:49.703

> 我怀疑答案是“你不能这样做”。

是的，就是这样，您不能将函数模板作为模板参数传递。从 14.3.3 开始：

> 模板模板参数的模板参数应该是类模板或别名模板的名称，表示为 id-expression。

在将模板函数传递给另一个模板*之前*，需要对其进行实例化。一种可能的解决方案是传递一个包含静态的类类型，`produce_5_function`如下所示：

```
template<typename T>
struct Workaround {
  static T produce_5_functor() { return T(5); }
};
template<template<typename>class F>
struct client_template {
  int operator()() const { return F<int>::produce_5_functor(); }
};
int five = client_template<Workaround>()(); 
```

使用别名模板，我可以更接近一点：

```
template <typename T>
T produce_5_functor() { return T(5); }

template <typename R>
using prod_func = R();

template<template<typename>class F>
struct client_template {
  int operator()(F<int> f) const { return f(); }
};

int five = client_template<prod_func>()(produce_5_functor); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T03:51:48.597

包装那个函数怎么样？

```
template<typename T>
struct produce_5_function_wrapper {
    T operator()() const { return produce_5_function<T>(); }
}; 
```

然后你可以使用包装器而不是函数：

```
int five = client_template< produce_5_function_wrapper >()(); 
```

单独使用模板函数是行不通的，没有“模板模板函数”之类的东西。

# jquery - jQuery遍历

> ID：15651493
> 
> 赞同：1
> 
> 时间：2013-03-27T03:37:01.230
> 
> 标签：jquery

我有一个有几行的表：

```
 <tr class='data'>
        <td class='img'><img class='thumbnail' src='ProductImages/img_1894_72.jpg'/></td>
        <td class='bc_img'><img class='thumbnail' src='ProductImages/img_1893_72.jpg'/></td>
   </tr>

    <tr class='data'>
        <td class='img'><img class='thumbnail' src='ProductImages/img_1318_72.jpg'/></td>
        <td class='bc_img'><img class='thumbnail' src='ProductImages/img_1646_72.jpg'/></td>
    </tr> 
```

单元格中的图像是缩略图（名称中的 72 指定 72px 宽度）。我想写一些 jQuery，让我单击任一行中的第二个 td，感知我选择的两行中的哪一行，然后用同一图像的更大版本替换该行中的 src 图像，即替换 72 in带有 300 的 src 名称。

我的问题是从单击的 td 到该 td 中的原始 img 节点。我一直在玩：

```
$("td.bc_img").click(function () {
    console.log("1\. this is " , this);  
    imgNode = $(this).find('img').get();
    console.log("2\. imgNode is " , imgNode);
    console.log("3\. imgNode.src is " , imgNode.src);
    var thumbSrc = ?;  // not sure how to get this
    var bigImgSrc = thumbSrc.replace(/_72\.jpg/, "_900.jpg");
}); 
```

这会产生控制台输出：

![控制台输出](../Images/8c27350a5dcd6d7dd59058f1ceb6b226.png)

但这似乎不是我需要的。我想我需要得到一些看起来像：

```
 <img class="thumbnail" src="ProductImages/img_1893_72.jpg"> 
```

在我可以将 .src 添加到它并修改 src 之前。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:59:06.410

关键是您用来`$(this).find("img")`在收到点击的单元格中查找图像。

```
$("td.bc_img").click(function () {
    var img = $(this).find("img").get(0);
    img.src = img.src.replace(/_72\.jpg/, "_900.jpg");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:41:36.337

您的选择器正在返回一个没有`src`属性的元素数组（注意美化控制台文本周围的方括号）。获取该数组的第一个元素（或使用`.get(0)`，它做同样的事情）：

```
> $('img').get();
[img]
> $('img').get()[0];
<img src="foo.jpg" />
> $('img').get(0);
<img src="foo.jpg" /> 
```

您还可以`src`使用 jQuery 对象获取属性`.attr('src')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T03:42:13.863

用于`get(0)`获取图像的 DOM 对象：

```
imgNode = $(this).find('img').get(0); 
```

现在我相信 的值`thumbSrc`可以设置为`imgNode.src`。

[http://jsfiddle.net/xyH6v/](http://jsfiddle.net/xyH6v/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T03:43:11.420

我更改了一些代码行以获取所需的 src 并更改属性

```
$("td.bc_img").click(function () {
        console.log('rw');
        imgNode = $(this).find('img').attr('src');
        console.log("The image node source is " , imgNode);
        $(this).find('img').attr('src', 'put your replacement url here');
}); 
```

小提琴网址是[http://jsfiddle.net/8fd8Q/1/](http://jsfiddle.net/8fd8Q/1/)

# javascript - 将对象分配给临时变量

> ID：15651495
> 
> 赞同：4
> 
> 时间：2013-03-27T03:37:18.257
> 
> 标签：javascript, performance

如果您创建这样的对象：

```
building[45] = new Object();        
building[45].name = myName; 
building[45].price = parseInt(myPrice);

building[128] = new Object();       
building[128].name = myName;    
building[128].price = parseInt(myPrice); 
```

现在，如果我想`building[128]`在一个函数中使用，最好将它分配给一个临时变量，这样浏览器就不必遍历所有对象来查找`building[128]`属性？

例子：

```
var theID = 128;
var temp = building[theID]; //temp.name & temp.price 
```

还是直接使用`building[theID].name`and `building[theID].price`？

它们的查找方式有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:41:03.030

数组访问是一个常数时间操作（在 Big-O 表示法中，这是`O(1)`）。换句话说，浏览器*在*访问`building[128]`.

在这种情况下，我仍然建议将数组项存储在变量中。这样做的主要原因是 JavaScript 缩小程序将能够将变量重命名为短名称，例如`a`，以便属性访问`a.name`等等。这在这里和那里节省了几个字节，并且在更大的范围内，总字节节省是显着的。

> JavaScript 数组是 JavaScript 对象的一种特殊形式，数组索引实际上只是恰好是整数的属性名称。 [JavaScript：权威指南，大卫弗拉纳根](https://rads.stackoverflow.com/amzn/click/com/0596000480)

使用 Flanagan 对数组的定义，每次通过索引访问数组项时，实际上是在开始一个两步过程：访问数组对象，然后通过属性名称（索引）查找值。通过将数组项保存在变量中，访问它就像查看内存中的值一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:02:51.620

或者，您可以像这样构建：

```
building[45] = {
    name: myName,
    price: parseInt(myPrice, 10)
};

building[128] = {
    name: myName,
    price: parseInt(myPrice, 10)
}; 
```

**编辑**：哦，我看到您的问题与我阅读的方式不同。对不起。我会在这里保留这个答案，因为它可能会有所帮助。

# php - 从 get/post 预填充表单

> ID：15651496
> 
> 赞同：0
> 
> 时间：2013-03-27T03:37:27.653
> 
> 标签：php, forms

我英语不流利，而且我是 HTML 新手，所以我不知道该如何解释。xx

这是**send.php：**

```
<?php 
$user="user"; 
$password="password123"; 
$url="http://www.website.com:1114/?user=" .$user. "&password=" .$password; 
$get = file_get_contents($url); 
echo 
$get;
?> 
```

**将重定向但不会显示链接**

```
http://www.website.com:1114/?user=username&password=password123 
```

**形式：**

```
 <form action=send.php" method="post">
   <p class="number-input">
Number: <br/>
<select name="PhoneNUmber" id="prefix">
<option value=""></option>
<option value="0905">0905</option>
<option value="0906">0906</option>
<option value="0907">0907</option>
<option value="0908">0908</option>
<option value="0909">0909</option>
<option value="0910">0910</option>
<option value="0912">0912</option>
<option value="0915">0915</option>
<option value="0916">0916</option>
<option value="0917">0917</option>
<option value="0918">0918</option>
<option value="0919">0919</option>
<option value="0920">0920</option>
<option value="0921">0921</option>
<option value="0922">0922</option>
<option value="0923">0923</option>
<option value="0926">0926</option>
<option value="0927">0927</option>
<option value="0928">0928</option>
<option value="0929">0929</option>
<option value="0930">0930</option>
<option value="0932">0932</option>
<option value="0933">0933</option>
<option value="0935">0935</option>
<option value="0936">0936</option>
<option value="0937">0937</option>
<option value="0938">0938</option>
<option value="0939">0939</option>
<option value="0942">0942</option>
<option value="0943">0943</option>
<option value="0946">0946</option>
<option value="0947">0947</option>
<option value="0948">0948</option>
<option value="0949">0949</option>
<option value="0989">0989</option>
<option value="0996">0996</option>
<option value="0997">0997</option>
<option value="0999">0999</option>
</select><input type="text" name="PhoneNumber" id="phone" size="7" maxlength="7"/>
</p>
    Message: <input type="text" name="Text">
    </br>
    <input type="submit" value="Send">
    </form> 
```

**该链接将是：**

```
http://www.website.com:1114/?user=username&password=password123&PhoneNumber=" "&Text=" " 
```

**但会在浏览器中显示：**

```
http://www.othersite.com/send.php?PhoneNumber=" "&Text=" " 
```

**示例图片：** [示例图片点击这里](http://i.stack.imgur.com/mWmfO.png)

**将进入：**

```
http://www.othersire.com/send.php?PhoneNumber=09052093489&Text=Hi 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:59:18.687

我不确定您要做什么，但是如果您要进行重定向，则需要标头。

```
<?php
 $user="user"; 
$password="password123"; 
$url="http://www.website.com:1114/?user=" .$user. "&password=" .$password; 
header("Location: $url"); 
```

# jqplot - jqplot y轴标签不垂直

> ID：15651497
> 
> 赞同：1
> 
> 时间：2013-03-27T03:37:30.997
> 
> 标签：jqplot

我花了两天的大部分时间试图使 y 轴标签垂直但没有成功。所以，我第一次设置了一个 jsfiddle（希望我做对了），它显示了与我的代码相同的问题，除了 y 轴标签问题之外，它应该可以正常工作。

```
var fLatImb = [
[-10, 400000],
[-10, 797000],
[-2.9, 878000],
[2.9, 878000],
[10, 797000],
[10, 400000]
];

$.jqplot.config.enablePlugins = true;
dpLatImbOpt = {
    seriesDefaults: {
        shadow: false
    },
    axes: {
        xaxis: {
            min: -15,
            max: 15,
            numberTicks: 7,
            label: '&larr; left &middot; 1000000 in-lbs &middot; right &rarr;'
        },
        yaxis: {
            min: 400000,
            max: 950000,
            numberTicks: 12,
            label: 'lbs gross weight',
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
        }
    },
    grid: {
        background: 'black',
        gridLineColor: '#666666',
        shadow: false
    },
    highlighter: {
        fadeTooltip: false,
        show: true,
        showToolTip: true,
        useAxesFormatters: true,
        formatString: '%.1f,%.0f'
    },
    series: [{
        color: 'red'
    }]
};

$.jqplot('dpLatImb', [fLatImb], dpLatImbOpt); 
```

我曾认为为 y 轴提供 labelRenderer 会导致默认为该标签的垂直对齐，但事实并非如此，我不明白为什么。

jsfiddle 位于[http://jsfiddle.net/tliitts/RkkeT/14/](http://jsfiddle.net/tliitts/RkkeT/14/)

模糊的 y 轴标签显示为“磅毛重”。

由于我是一个相对新手，因此欢迎提出与眼前问题以外的其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:51:32.403

查看您当前的脚本：

```
<script src='http://terryliittschwager.com/WB/jslib/jquery.jqplot.min.js'></script>
<script src='http://terryliittschwager.com/WB/jslib/jqplot.canvasTextRenderer.min.js></script>
<script src='http://terryliittschwager.com/WB/jslib/jqplot.canvasAxisLabelRenderer.min.js></script>
<script src='http://terryliittschwager.com/WB/jslib/jqplot.highlighter.min.js'></script>
<div id="dpLatImb" style="margin-top:20px; margin-left:20px; width:400px; height:400px;"></div> 
```

这两个中缺少一个`'`字符：

```
<script src='http://terryliittschwager.com/WB/jslib/jqplot.canvasTextRenderer.min.js></script>
<script src='http://terryliittschwager.com/WB/jslib/jqplot.canvasAxisLabelRenderer.min.js></script> 
```

如果我在and`'`之后添加一个，那么该小提琴将垂直显示 y 轴标签。`jqplot.canvasTextRenderer.min.js``jqplot.canvasAxisLabelRenderer.min.js`

# php - 立即购买按钮返回 url：更新数据库中的字段

> ID：15651499
> 
> 赞同：0
> 
> 时间：2013-03-27T03:37:36.910
> 
> 标签：php, mysql, paypal

我正在尝试做的事情（但不知道该怎么做）是在有人在 PayPal 上成功完成交易后，我需要它返回我的网站并更新数据库中相对于用户的一个字段。

我不知道如何做到这一点，我一直在寻找几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:11.177

您可以通过以下两种方式之一来执行此操作。付款完成后，您可以使用 IPN 或 PDT 更新您的数据库。两种方法中更好的方法是使用 IPN，或者至少将 IPN 与 PDT 结合使用。

即时付款通知 (IPN) 是一种消息服务，可通知您与 PayPal 交易相关的事件。您可以使用它来自动化后台和管理功能，例如履行订单、跟踪客户以及提供与交易相关的状态和其他信息。

[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)的页面上找到更多关于 IPN 的信息。同样在该页面上，左侧还有一些有用的链接。这里有用于创建侦听器、设置、测试、IPN 历史、带 FMF 的 IPN、IPN/PDT 变量和示例代码[的](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)页面。

PayPal 的 PDT 系统向使用 PayPal Payments Standard 的商家网站发送订单确认，并让他们验证此信息。然后，此类站点可以在本地“订单确认”页面中显示此数据。IPN 比 PDT 更可靠，而且使用 PDT，它依赖于买家单击按钮返回您的站点。如果他们没有单击按钮返回您的站点，则不会发回任何信息，并且您无法像使用 IPN 那样重新发送此信息。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN)找到更多关于 PDT的信息。

我个人只使用 PDT 在我的网站上创建一个动态的感谢页面，并使用 IPN 来更新我的数据库和自动化一些任务。希望这可以帮助。:)

# mysql - 去除冗余信息，SQL查询困难

> ID：15651502
> 
> 赞同：1
> 
> 时间：2013-03-27T03:38:05.297
> 
> 标签：mysql, sql

我有一个格式为：

```
`users`
- id
- views
- email 
```

以下是我的一些条目：

```
`id`        `email`                 `likes`
9570800   -anroy@gmail.com      888
5355388   -Btionz@gmail.com     3042
8610061   -cmendez@naia.org         450
6189810   -dancox_photog@yahoo.co.uk 0
6625684   -david.d.@gmail.com        0
16841675  -david.d.@gmail.com        40
9716153   -david.d.@gmail.com        0
9716353                              0
97161453                             0 
```

我希望`DELETE`所有具有重复电子邮件的条目并保留最高的条目`likes`。例如，在上面，重复的 for`-david.d.@gmail.com` 意味着`6625684`并且`9716153`都将被删除，并且`16841675`将被保留（因为它在重复项中拥有最多的喜欢。

此外，如果`email`为空白（`''`或`NULL`），忽略它/不要删除它。

我将如何完成此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:42:39.560

```
DELETE lesser FROM MyTable AS greater JOIN MyTable AS lesser USING (email)
WHERE greater.email <> '' AND greater.likes > lesser.likes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:43:12.750

```
DELETE FROM Users WHERE NOT userid in (
    SELECT userid FROM Users u 
        INNER JOIN (SELECT userid,max(likes) ml FROM Users GROUP BY userid) u2
           ON u.userid = u2.userid AND u.likes = u2.ml
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:43:21.280

首先，要小心。查看可能删除的列表：

```
SELECT * FROM users
INNER JOIN (
  SELECT email, max(likes) max_likes FROM users GROUP BY email HAVING count(*) > 1
) keep ON users.email = keep.email
WHERE users.likes <> keep.max_likes 
```

然后，如果您觉得这没问题，请替换`SELECT *`为`DELETE users`

# javascript - 打字稿可以导出功能吗？

> ID：15651510
> 
> 赞同：69
> 
> 时间：2013-03-27T03:39:13.353
> 
> 标签：javascript, typescript, syntax, typescript-module-resolution

是否可以从打字稿模块导出一个简单的函数？

[这不是为我编译的。](http://www.typescriptlang.org/Playground/#src=module%20SayHi%20%7B%0A%20%20%20%20export%20function%28%29%20%7B%0A%09%09console.log%28%22Hi%22%29;%0A%09%7D%0A%7D%0Anew%20SayHi%28%29;%0A)

```
module SayHi {
    export function() {
    console.log("Hi");
  }
}
new SayHi(); 
```

[这个工作项](https://typescript.codeplex.com/workitem/47)似乎暗示你不能但没有直截了当地说出来。不可能吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-27T04:57:14.327

在那个例子中很难说出你要做什么。*是关于从外部*`exports =`模块导出的，但您链接的代码示例是一个*内部*模块。

 **经验法则：如果你写`module foo { ... }`，你就是在写一个内部模块；如果你`export something something`在文件的顶层编写，你正在编写一个外部模块。您实际上`export module foo`在顶级编写（因为那时您将双重嵌套名称）有点罕见，而且您`module foo`在具有顶级导出的文件中编写（因为`foo`不会外部可见）。

以下事情是有道理的（每个场景都由水平规则描绘）：

* * *

```
// An internal module named SayHi with an exported function 'foo'
module SayHi {
    export function foo() {
       console.log("Hi");
    }

    export class bar { }
}

// N.B. this line could be in another file that has a
// <reference> tag to the file that has 'module SayHi' in it
SayHi.foo();
var b = new SayHi.bar(); 
```

* * *

**文件1.ts**

```
// This *file* is an external module because it has a top-level 'export'
export function foo() {
    console.log('hi');
}

export class bar { } 
```

**文件2.ts**

```
// This file is also an external module because it has an 'import' declaration
import f1 = module('file1');
f1.foo();
var b = new f1.bar(); 
```

* * *

**文件1.ts**

```
// This will only work in 0.9.0+. This file is an external
// module because it has a top-level 'export'
function f() { }
function g() { }
export = { alpha: f, beta: g }; 
```

**文件2.ts**

```
// This file is also an external module because it has an 'import' declaration
import f1 = require('file1');
f1.alpha(); // invokes f
f1.beta(); // invokes g 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-12-09T10:30:52.690

要直接回答您的问题的标题，因为这首先出现在 Google 中：

**是的，TypeScript 可以导出函数！**

这是 TS 文档的直接引用：

“任何声明（例如变量、函数、类、类型别名或接口）都可以通过添加 export 关键字来导出。”

[参考链接](https://www.typescriptlang.org/docs/handbook/modules.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-09-01T09:35:46.467

如果您将其用于 Angular，则通过命名导出导出函数。如：

```
function someFunc(){}

export { someFunc as someFuncName } 
```

否则，Angular 会抱怨对象不是函数。

编辑：我现在使用 angular 11，这不再需要了。所以就足够了`export function(){ ...}`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-09T10:37:36.850

就我而言，我这样做是这样的：

```
 module SayHi {
    export default () => { console.log("Hi"); }
 }
 new SayHi(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-25T20:20:03.200

您还可以使用`from`关键字 with`import`并直接破坏导出的对象。

> 文件1.ts

```
export const CARS_QUERY = `
    {
      getAllCars {
        model,
        make,
        picture
      }
    }
    `; 
```

> 文件2.ts

```
import { CARS_QUERY } from "file1.ts"; 
```**

# ios - Obj-c 中数组的文字语法

> ID：15651511
> 
> 赞同：1
> 
> 时间：2013-03-27T03:39:18.320
> 
> 标签：ios, objective-c

在阅读此[博客](http://www.mikeash.com/pyblog/friday-qa-2012-06-22-objective-c-literals.html)时，作者说

```
NSArray *array = @[ @"one", @"two" ]; 
```

如果上面的数组是一个全局变量，那么它就会出错。原因是

> 这是因为 @[] 语法从字面上翻译为对 NSArray 方法的调用。编译器无法在编译时计算该方法的结果，因此在这种情况下它不是合法的初始化程序。

我的问题是方法中的相同声明如何有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T03:49:01.957

数组字面量语法被翻译为：

```
NSString *vals[2] = { @"one", @"two" };
[NSArray arrayWithObjects:vals count:2]; 
```

全局变量和静态变量只能使用编译时常量进行初始化。以上不是编译时间常数。它只能在运行时进行评估。

常规变量可以在运行时初始化，因此该值不需要是编译时常量。

静态或全局的一种选择是`initialize`在类的方法中对其进行初始化：

```
static NSArray *array = nil;

+ (void)initialize {
    if (self == [ThisClass class]) {
        array = @[ @"one", @"two", nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:44:32.170

我不完全确定，但我猜想虽然全局变量必须能够在编译时初始化，因此编译器必须能够计算它，但方法内部的变量直到运行时才会计算，因此可以使用该语法。

# r - 返回 j 中的命名列表时，data.table 中的内存泄漏缓慢（尝试重塑 data.table）

> ID：15651515
> 
> 赞同：12
> 
> 时间：2013-03-27T03:39:34.207
> 
> 标签：r, data.table

编辑3：

我创建了一个更短的内存泄漏示例。我希望它可以更容易地推理正在发生的事情。随着迭代的进行，您会看到 gc() VCell 内存使用量稳步增加，而 tables() 报告的内存使用量保持不变。不知何故， unlist(.SD) 调用似乎是负责任的。这里是：

```
DT = data.table(k = 1:100, g = 1:20, val = rnorm(2e6))
for (i in 1:100){
  tmp = DT[ , unlist(.SD), by = 'k']
  print(gc())
  tables()
} 
```

原帖：

使用 data.table 包时，我看到一些我不理解的内存行为。我将 R-2.13.0 与 data.table 1.8.8 一起使用。我在 64 位 suse linux 上运行。

我的最终目标是使用尽可能少的内存将 data.table 从“长”格式重塑为“宽”格式。我遵循了另一个 [SO 帖子] 中的建议（[在多个列上嵌套了 if else 语句](https://stackoverflow.com/questions/15510566/nested-if-else-statements-over-a-number-of-columns/15511689?noredirect=1#comment21968080_15511689)）。基本上，我尝试重塑在 j 表达式中返回命名列表的 data.table。

我看到内存使用量稳步增加，这似乎是内存泄漏。data.tables 或其他对象使用的总内存不考虑 gc() 中显示的内容。特别是，Vcells 从大约 17 MB 开始，到接近 30 MB 结束，而 tables() 报告的总内存使用量为 19 MB（最后）。没有其他对象（我可以看到）使用任何有意义的内存量。重复运行下面的代码显示了 print(gc()) 语句的内存使用量增加。

我是否遗漏了什么或者 dogroups.c 中的某些内存分配有问题？

这是重现我看到的问题的代码。有任何想法吗？我真的希望能够相对有效地重塑 data.table，内存使用比速度更重要。

```
library(data.table)

if(!exists('DT')){
  cat('creating DT\n')
  # make a "long" matrix with 300 columns and keys v,d
  v = 1:250
  d = 1:50
  grid = expand.grid(v,d)
  DT = data.table(v = grid[,1], d = grid[,2])    
  # now add many columns
  DT[,sprintf('col%s',1:100) := 1:nrow(DT)]; 
  # set d as key, we don't care much about v for this example
  setkey(DT,'d')
}

# The following code attempts to cast a "long" data.table to "wide" format
# it is the equivalent the reshape2 call:
#
#   dcast(melt(DT, c('d','v')), d ~ v + variable, value_var='value')
#
# When I run the code I see ever-increasing memory use.  sourcing the file
# repeatedly shows that as well. The total memory used by the input
# and result data.table or any other objects do not account for the total use.

# casting patterned after
# https://stackoverflow.com/questions/15510566/nested-if-else-statements-over-a-number-of-columns/15511689?noredirect=1#comment21968080_15511689

paste.dash <- function(...){ paste(..., sep='-')}    

# assumes keys is  a vector of characters
dt.melt <- function(dt, keys) {
  dt[, list(variable = names(.SD), value = unlist(.SD)), by = keys]
}

# assumes keys is  a vector of characters.
# all.names is all the column names we expect in the wide data.table
# we accommodate for the possibility of missing wide table values 
# for some groups by appending NAs for any column names not present.
# in the particular example above there are no missing values,
# but the data I intend to run this on does.
dt.recast<- function(dat, keys, all.names,verbose=FALSE){

  if (verbose){
    cat(sprintf('dt.recast(): keys = %s\n', paste(keys, collapse=',')))
    print(gc())
  }
  # id, variable, value
  m = dt.melt(dat, keys)

  # m.names will be the wide table column names.
  m.names = do.call(paste.dash, m[, c(keys,'variable'),  with=FALSE])

  #append anything that's missing in this group to end of list with NA values
  missing.names = setdiff(all.names, m.names)
  missing.vals = rep(NA_real_, length(missing.names))
  ret.val = c(m$value, missing.vals)
  # set names and make a list as required by data.table to generate a wide row
  ret.val = as.list(setattr(ret.val,'names', c(m.names,missing.names)))

  if (verbose){
    print(gc())
  }

  return(ret.val)
}

# turn to wide format row key 'd': columns are cartesian product of v and
# current non-key columns

all.wide.names = do.call(paste.dash, expand.grid(unique(DT$v), tail(names(DT),-2)))

print (gc())

DT.wide = DT[ , dt.recast(.SD, 'v', all.wide.names, verbose = TRUE),
  by = 'd',
  verbose=TRUE ]

print (gc()) 
```

编辑：

```
#Here is the output of sessionInfo
> sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8    LC_PAPER=en_US.UTF-8       LC_NAME=C   \
               LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] data.table_1.8.8
> 
```

Edit2：这是两次连续运行的一些输出。

```
> source('memory-leak.R')
data.table 1.8.8  For help type: help("data.table")
creating DT
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 231906 12.4     407500 21.8   350000 18.7
Vcells 272022  2.1     786432  6.0   773683  6.0
Finding groups (bysameorder=TRUE) ... done in 0.001secs. bysameorder=TRUE and o__ is length 0
Optimization is on but j left unchanged as 'dt.recast(.SD, "v", all.wide.names, verbose = TRUE)'
Starting dogroups ... dt.recast(): keys = v
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 233168 12.5     467875   25   350000 18.7
Vcells 292303  2.3     786432    6   773683  6.0
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 258224 13.8     531268 28.4   350000 18.7
Vcells 474776  3.7     905753  7.0   773683  6.0
The result of j is a named list. It's very inefficient to create the same names over and over again for each group. When j=list(...), any names are detected, removed and put back after grouping has completed, for efficiency. Using j=transform(), for example, prevents that speedup (consider changing to :=). This message may be upgraded to warning in future.
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283206 15.2     531268 28.4   350000 18.7
Vcells 1699595 13.0    2029708 15.5  1699607 13.0
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308232 16.5     597831   32   350000 18.7
Vcells 1882303 14.4    2221551   17  2029708 15.5
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1732347 13.3    2412628 18.5  2029708 15.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831   32   350000 18.7
Vcells 1915666 14.7    2613259   20  2284358 17.5
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1764847 13.5    2823921 21.6  2284358 17.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 1948166 14.9    3045117 23.3  2316858 17.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1797347 13.8    3045117 23.3  2316858 17.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 1980666 15.2    3277372 25.1  2349358 18.0
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1829847 14.0    3277372 25.1  2349358 18.0
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2013166 15.4    3277372 25.1  2381858 18.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1862347 14.3    3277372 25.1  2381858 18.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2045666 15.7    3277372 25.1  2414358 18.5
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1894847 14.5    3277372 25.1  2414358 18.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2078166 15.9    3277372 25.1  2446858 18.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1927347 14.8    3277372 25.1  2446858 18.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2110666 16.2    3277372 25.1  2479358 19.0
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1959847 15.0    3277372 25.1  2479358 19.0
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2143166 16.4    3521240 26.9  2511858 19.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 1992347 15.3    3521240 26.9  2511858 19.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2175666 16.6    3521240 26.9  2544358 19.5
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2024847 15.5    3521240 26.9  2544358 19.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2208166 16.9    3521240 26.9  2576858 19.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2057347 15.7    3521240 26.9  2576858 19.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2240666 17.1    3521240 26.9  2609358 20.0
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2089847 16.0    3521240 26.9  2609358 20.0
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2273166 17.4    3521240 26.9  2641858 20.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2122347 16.2    3521240 26.9  2641858 20.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2305666 17.6    3521240 26.9  2674358 20.5
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2154847 16.5    3521240 26.9  2674358 20.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2338166 17.9    3777302 28.9  2706858 20.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2187347 16.7    3777302 28.9  2706858 20.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2370666 18.1    3777302 28.9  2739358 20.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2219847 17.0    3777302 28.9  2739358 20.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2403166 18.4    3777302 28.9  2771858 21.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2252347 17.2    3777302 28.9  2771858 21.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2435666 18.6    3777302 28.9  2804358 21.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2284847 17.5    3777302 28.9  2804358 21.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2468166 18.9    3777302 28.9  2836858 21.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2317347 17.7    3777302 28.9  2836858 21.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2500666 19.1    4046167 30.9  2869358 21.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2349847 18.0    4046167 30.9  2869358 21.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2533166 19.4    4046167 30.9  2901858 22.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2382347 18.2    4046167 30.9  2901858 22.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2565666 19.6    4046167 30.9  2934358 22.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2414847 18.5    4046167 30.9  2934358 22.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2598166 19.9    4046167 30.9  2966858 22.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2447347 18.7    4046167 30.9  2966858 22.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2630666 20.1    4046167 30.9  2999358 22.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2479847 19.0    4046167 30.9  2999358 22.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2663166 20.4    4046167 30.9  3031858 23.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2512347 19.2    4046167 30.9  3031858 23.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2695666 20.6    4328475 33.1  3064358 23.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2544847 19.5    4328475 33.1  3064358 23.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2728166 20.9    4328475 33.1  3096858 23.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2577347 19.7    4328475 33.1  3096858 23.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2760666 21.1    4328475 33.1  3129358 23.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2609847 20.0    4328475 33.1  3129358 23.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2793166 21.4    4328475 33.1  3161858 24.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2642347 20.2    4328475 33.1  3161858 24.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2825666 21.6    4328475 33.1  3194358 24.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2674847 20.5    4328475 33.1  3194358 24.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2858166 21.9    4328475 33.1  3226858 24.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2707347 20.7    4328475 33.1  3226858 24.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2890666 22.1    4624898 35.3  3259358 24.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2739847 21.0    4624898 35.3  3259358 24.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2923166 22.4    4624898 35.3  3291858 25.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2772347 21.2    4624898 35.3  3291858 25.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2955666 22.6    4624898 35.3  3324358 25.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2804847 21.4    4624898 35.3  3324358 25.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 2988166 22.8    4624898 35.3  3356858 25.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2837347 21.7    4624898 35.3  3356858 25.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 3020666 23.1    4624898 35.3  3389358 25.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 2869847 21.9    4624898 35.3  3389358 25.9

... <snip> ...

dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 3162347 24.2    5262949 40.2  3681858 28.1
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 3345666 25.6    5262949 40.2  3714358 28.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 3194847 24.4    5262949 40.2  3714358 28.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 3378166 25.8    5262949 40.2  3746858 28.6
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 3227347 24.7    5262949 40.2  3746858 28.6
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 3410666 26.1    5262949 40.2  3779358 28.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  283211 15.2     597831 32.0   350000 18.7
Vcells 3259847 24.9    5262949 40.2  3779358 28.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  308247 16.5     597831 32.0   350000 18.7
Vcells 3443166 26.3    5262949 40.2  3811858 29.1
done dogroups in 10.972 secs
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  258292 13.8     597831 32.0   350000 18.7
Vcells 3247919 24.8    5262949 40.2  3811858 29.1
> tables()
     NAME      NROW MB COLS                                                                             KEY
[1,] DT      12,500  5 v,d,col1,col2,col3,col4,col5,col6,col7,col8,col9,col10,col11,col12,col13,col14,c d  
[2,] DT.wide     50 14 d,1-col1,1-col2,1-col3,1-col4,1-col5,1-col6,1-col7,1-col8,1-col9,1-col10,1-col11 d  
Total: 19MB
> source('/memory-leak.R')
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  260024 13.9     597831 32.0   350000 18.7
Vcells 3279245 25.1    5262949 40.2  3859228 29.5
Finding groups (bysameorder=TRUE) ... done in 0.001secs. bysameorder=TRUE and o__ is length 0
Optimization is on but j left unchanged as 'dt.recast(.SD, "v", all.wide.names, verbose = TRUE)'
Starting dogroups ... dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  260400 14.0     597831 32.0   350000 18.7
Vcells 3297670 25.2    5262949 40.2  3859228 29.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  285438 15.3     597831 32.0   350000 18.7
Vcells 3480986 26.6    5262949 40.2  3859228 29.5
The result of j is a named list. It's very inefficient to create the same names over and over again for each group. When j=list(...), any names are detected, removed and put back after grouping has completed, for efficiency. Using j=transform(), for example, prevents that speedup (consider changing to :=). This message may be upgraded to warning in future.
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   350000 18.7
Vcells 4705194 35.9    5606096 42.8  4781165 36.5
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 4888513 37.3    5966400 45.6  5257204 40.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   374617 20.1
Vcells 4737694 36.2    6344720 48.5  5257204 40.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 4921013 37.6    6741956 51.5  5289704 40.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   374617 20.1
Vcells 4770194 36.4    7159053 54.7  5289704 40.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 4953513 37.8    7597005   58  5322204 40.7
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4802694 36.7    7597005   58  5322204 40.7
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 4986013 38.1    7597005   58  5354704 40.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4835194 36.9    7597005   58  5354704 40.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 5018513 38.3    7597005   58  5387204 41.2
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4867694 37.2    7597005   58  5387204 41.2
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 5051013 38.6    7597005   58  5419704 41.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4900194 37.4    7597005   58  5419704 41.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 5083513 38.8    7597005   58  5452204 41.6
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4932694 37.7    7597005   58  5452204 41.6
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 5116013 39.1    7597005   58  5484704 41.9
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4965194 37.9    7597005   58  5484704 41.9
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831   32   374617 20.1
Vcells 5148513 39.3    7597005   58  5517204 42.1
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831   32   374617 20.1
Vcells 4997694 38.2    7597005   58  5517204 42.1
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 5181013 39.6    8056855 61.5  5549704 42.4
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   374617 20.1
Vcells 5030194 38.4    8056855 61.5  5549704 42.4
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 5213513 39.8    8056855 61.5  5582204 42.6
dt.recast(): keys = v
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   374617 20.1
Vcells 5062694 38.7    8056855 61.5  5582204 42.6
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 5246013 40.1    8056855 61.5  5614704 42.9
dt.recast(): keys = v

 ... <snip> ...

          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  310409 16.6     597831 32.0   374617 20.1
Vcells 6265194 47.8    9579015 73.1  6784704 51.8
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  335445 18.0     597831 32.0   374617 20.1
Vcells 6448513 49.2    9579015 73.1  6817204 52.1
done dogroups in 11.53 secs
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  260003 13.9     597831 32.0   374617 20.1
Vcells 4978149 38.0    9579015 73.1  6817204 52.1
> tables()
     NAME      NROW MB COLS                                                                             KEY
[1,] DT      12,500  5 v,d,col1,col2,col3,col4,col5,col6,col7,col8,col9,col10,col11,col12,col13,col14,c d  
[2,] DT.wide     50 14 d,1-col1,1-col2,1-col3,1-col4,1-col5,1-col6,1-col7,1-col8,1-col9,1-col10,1-col11 d  
Total: 19MB
> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T07:57:19.463

**更新**- 现在在 v1.8.11 中修复。来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：

> 固定分组中长期未解决的（通常很小）内存泄漏。当最后一组小于最大组时，这些大小的差异不会被释放。同样在非平凡的聚合中，每个组返回不同数量的行。大多数用户运行一次分组查询并且永远不会注意到，但是任何循环调用分组的人（例如并行运行时）都可能受到影响，#2648。添加了测试。
> 
> 非常感谢 vc273、YT 和其他人。

* * *

这个问题顶部的特定（伟大）示例被认为是“非平凡的”聚合，其中每个组的结果可以是不同数量的行，而不仅仅是一行中的单个聚合。添加`verbose=TRUE`揭示：

> 写入的行数 (4000000) 少于分配的行数 (4488000)。

这就是在这种情况下泄漏的地方。仅当您需要多次重复分组时才重要，因为有时需要。结果是正确的。

* * *

为后代保留以前的答案...

考虑这部分：

```
#now add many columns
for (i in 1:100){
    DT[[sprintf('col%s',i)]] = 1:nrow(DT);
} 
```

这不是使用`:=`或提供的通过引用添加列`set()`的`data.table`方法。与;`=`相同 `<-`即，在此循环的每次迭代中，将复制`for`整个内容，以便为单个额外列腾出空间。`DT`您描述的内存泄漏将与此`for`循环一致。

一些选项是：

*   一次添加许多列`cbind`
*   `:=`使用例如 一次性添加列`DT[,sprintf('col%s',1:100):=1:nrow(DT)]`
*   保持`for`循环，但在每次迭代中使用`:=`or`set()`

我实际上并没有运行你的代码来检查，所以以后可能还会有其他问题。

* * *

更新：我现在已经运行了你的代码，我想我可能能够猜到你对内存使用的意思。但是猜测会占用很多时间，尤其是在这样的领域。您能否对此进行大量扩展：

> 我看到内存使用量稳步增加，这似乎是内存泄漏。

你到底看到了什么；即，数字是多少？它从什么开始，又在什么结束？你跑了多少次？还请提供输出`sessionInfo()`；尽管您提供的 R (2.13.0) 版本很有帮助，但它有助于了解您是 32 位还是 64 位 Linux、Mac 或 Windows。

# php - jquery imgareaselect 不工作

> ID：15651518
> 
> 赞同：0
> 
> 时间：2013-03-27T03:39:41.043
> 
> 标签：php, jquery, mysql

imgareaselect 不允许选择。编辑器框中的按钮就像它们不起作用一样。我不确定它是否没有正确接收我的字符串。我确信它与我的 java 代码有关，但无法查明它。这也可能是我将代码传递给它的方式。

编辑器框打开图片和选择作品。

我不想被代码淹没，但我认为你必须看看整个事情。

这是编辑页面：

```
<div>
                    <a href="javascript:history.back()" style="color:#333">Back to photos</a>&nbsp;&nbsp;
                    <a href="javascript: void(0);" id="editorLoader" style="color:#333">Edit Photo</a>
                    <div id="editorDialog"></div>
                    <script type="text/javascript">
                    $(document).ready(function() {
                        var editorDialogOptions = {
                            title: "<?php echo "Image Editor"; ?>",
                            modal: true,
                            autoOpen: false,
                            height: 475,
                            width: 825,
                            open: function() {
                            $("#editorDialog").load('<?php echo "editor.php?ID=".$pic['photo_id']; ?>');
                            },
                            close: function(event, ui) {
                                $('#imgSource').imgAreaSelect({ remove: true });
                                $(this).dialog('destroy');
                            }
                        };
                        $('#editorLoader').click(function() {
                            $("#editorDialog").dialog(editorDialogOptions).dialog('open');  
                        });
                    });
                    </script>
                </div> 
```

这是编辑器：

```
<?php
    $sql = mysql_query("SELECT * FROM `employee_photos` WHERE photo_id = $ID") or die(mysql_error());
    $urls = mysql_fetch_array($sql);

    $baseUrl = "http://" . $_SERVER['HTTP_HOST'];
    if (isset($_SERVER['SCRIPT_NAME']) && ($pos = strripos($baseUrl, basename($_SERVER['SCRIPT_NAME']))) !== false) {
        $baseUrl = substr($baseUrl, 0, $pos);
    }

    $piclink = $urls['piclink'];
    $picurl  = $urls['picurl'];

    $data = array(
        'Thumbnail' => $picurl,
        'Original' => $piclink,

    );
    $dataString = rawurlencode(base64_encode(json_encode($data)));
?>
<div class="editorbox">
<div class="grid_7 alpha">
<div class="t_a_line">
    <h2>Image Details</h2>
</div>

<div>
    <div class="clearfix" style="padding-top: 10px">
        <ul style="list-style-type: none">
            <li style="float: left; padding-right: 5px">
                File Size
                <select name="imageSize" id="imageSize">
                    <?php if ($data != null) { ?>
                        <?php foreach ($data as $size => $source) { ?>
                        <option value="<?php echo $size; ?>"><?php echo $size; ?></option>
                        <?php } ?>
                    <?php } ?>
                </select>
            </li>
        </ul>
    </div>
</div>  

<div class="grid_7 alpha t_a_top">
    <input type="button" class="image_crop" name="cropButton" id="cropButton" value="Crop" disabled="disabled" />
    <input type="button" name="rotateLeftButton" id="rotateLeftButton" value="Rotate Left" />
    <input type="button" name="rotateRightButton" id="rotateRightButton" value="Rotate Right" />
    <input type="button" name="flipVerticalButton" id="flipVerticalButton" value="Flip Verticle" />
    <input type="button" name="flipHorizontalButton" id="flipHorizontalButton" value="Flip Horizontal" />
</div>

<div class="clearfix t_a_bottom"></div> 
<div>

<div id="sourceContainer" style="width: 400px; border: 1px solid #CCCCCC; overflow: auto; text-align: center;">
    <img id="imgSource" src="" style="max-width: 400px" />
</div>
    </div>
</div>

<div class="grid_2 omega">
<div class="grid_2 t_g_bottom">
    <div class="t_a_line">
        <h2><?php echo 'Crop Image'; ?></h2>
    </div>
    <div>
        <div class="grid_2 alpha clearfix t_a_top">
            Selection 
            <input type="text" name="imageWidth" id="imageWidth" style="width: 40px" /> : 
            <input type="text" name="imageHeight" id="imageHeight" style="width: 40px;" />
        </div>
    </div>
</div>

<div class="clearfix t_a_bottom"></div>

<div class="grid_2 t_g_bottom">
    <div class="t_a_line">
        <h2>Settings</h2>
    </div>
    <div>
        <div class="grid_2 alpha clearfix t_a_bottom" style="padding-top: 10px">
            <label>Apply changes to:</label><br />
                <select name="sizeSelect" id="sizeSelect">
                <option value="">Current size</option>
                    <?php if ($data != null) { ?>
                        <?php foreach ($data as $size => $source) { ?>
                        <option value="<?php echo $source; ?>|<?php echo $size; ?>"><?php echo $size; ?></option>
                        <?php } ?>
                    <?php } ?>
                </select>

            <input type="hidden" name="fileId" id="fileId" value="<?php echo $ID; ?>" />
        </div>
    </div>
</div> 
```

这是编辑器的 Javascript：

```
var baseUrl = '<?php echo $baseUrl ?>';
var data = $.evalJSON(base64_decode(rawurldecode('<?php echo $dataString; ?>')));
var options = {
    fadeSpeed: 400,
    handles: true,
    onSelectChange: onSelectChange,
    instance: true
};
var imgSource = $('#imgSource');
var images = data;
var editor = null;

function onSelectChange(img, selection) {
if (selection.width != 0 || selection.height != 0) {
    /**
     * Enable image crop button
     */
    $('.image_crop').unbind('click').bind('click', function() {
        imageAction('crop', null); 
    }).removeAttr('disabled');
} else {
    /**
     * Disable image crop button
     */
    $('.image_crop').attr('disabled', 'disabled').unbind('click');
}

$('#imageWidth').val(selection.width);
$('#imageHeight').val(selection.height);

var divHeight = 40;
var top = selection.height + 5;
var height = $('#imgSource').height();
if ((top  + selection.y1) > height - divHeight) {
    top = - divHeight;  
}

$('.imgareaselect-selection').parent().css('overflow', '');

if ($('#imageCropForm').html() == undefined) {
    $('.imgareaselect-selection').parent().css('overflow', '');
    $('.imgareaselect-selection').after('<div id="imageCropForm" style="position: relative; left: 0; top: ' + top + 'px"><input type="button" class="image_crop" value="Crop" /></div>');
} else {
    $('#imageCropForm').css('top', top + 'px');
}
};

function imageAction(action, mode) {
var dataPost = null;
switch (action) {
    case 'rotate':
        var degrees = 450;
        if (mode == 'left') {
            degrees = 270;
        } 
        dataPost = { degrees: degrees };
        break;
    case 'flip':
        dataPost = { mode: mode }
        break;
    case 'crop':
        if (editor == undefined || editor == null) {
            return false;
        }
        var selection = editor.getSelection();
        dataPost = { x1: selection.x1, y1: selection.y1, width: selection.width, height: selection.height };
        $('#cropButton').attr('disabled', 'disabled').unbind('click');
        break;
    default:
        break;
}

if (dataPost != null) {
    dataPost.source    = $(imgSource).attr('src');
    dataPost.action    = action;
    dataPost.des       = $('#sizeSelect').val();
    dataPost.file_id   = $('#fileId').val();
    dataPost.max_width = 400;
    dataPost.load      = 'edit';

    editor = $(imgSource).imgAreaSelect({ remove: true });
    $.ajaxq('image_load', {
        type: 'POST',
        url: '<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>',
        data: dataPost,
        success: function(response) {
            if (response != 'RESULT_ERROR') {
                $(imgSource).hide();
                response = $.evalJSON(response);
                if (response.image_url != undefined) {
                    $(imgSource).attr('src', response.image_url + '?rand=' + Math.random()).fadeIn("slow");
                    editor = $(imgSource).imgAreaSelect(options);
                    $(imgSource).fadeIn('slow');
                }
                if (response.type != undefined && response.type != null) {
                    $('#imageSize option').each(function() {
                        $(this).removeAttr('selected');
                        if (response.type == this.value) {
                            $(this).attr('selected', 'selected');
                            images[response.type] = response.image_url;
                            $('#imageSize').change();
                            return;
                        }
                    });
                }
            }
        }
    });
}
};

$(document).ready(function() {
$('#imageSize').bind('change', function() {
    var size = this.value;
    if (images[size] != undefined) {
        var src = images[size];
        $(imgSource).hide().attr('src', src + '?rand=' + Math.random()).fadeIn('slow');
        editor = $(imgSource).imgAreaSelect({ remove: true });
        $('.image_crop').unbind('click');
        $('#rotateLeftButton').unbind('click');
        $('#rotateRightButton').unbind('click');
        $('#flipVerticalButton').unbind('click');
        $('#flipHorizontalButton').unbind('click');
        if (src.indexOf(baseUrl) >= 0) {
            editor = $(imgSource).imgAreaSelect(options);
            $('#rotateLeftButton').bind('click', function() {
                imageAction('rotate', 'left');
            }).removeAttr('disabled');

            $('#rotateRightButton').bind('click', function() {
                imageAction('rotate', 'right');
            }).removeAttr('disabled');

            $('#flipVerticalButton').bind('click', function() {
                imageAction('flip', 'vertical');
            }).removeAttr('disabled');

            $('#flipHorizontalButton').bind('click', function() {
                imageAction('flip', 'horizontal');
            }).removeAttr('disabled');

        } else {
            $('#rotateLeftButton').unbind().attr('disabled', 'disabled');
            $('#rotateRightButton').unbind().attr('disabled', 'disabled');
            $('#flipVerticalButton').unbind().attr('disabled', 'disabled');
            $('#flipHorizontalButton').unbind().attr('disabled', 'disabled');
            $('#imageWidth').unbind().attr('disabled', 'disabled');
            $('#imageHeight').unbind().attr('disabled', 'disabled');
        }
    }
});
$('#imageSize option:last').attr('selected', 'selected').change();

$('#imageWidth').bind('keyup', function() {
    var selection = editor.getSelection();
    var x1 = selection.x1;
    var y1 = selection.y1;
    var x2 = x1 + parseInt($(this).val());
    var y2 = y1 + parseInt($('#imageHeight').val());
    editor.setSelection(x1, y1, x2, y2, true);
    editor.update();
});

$('#imageHeight').bind('keyup', function() {
    var selection = editor.getSelection();
    var x1 = selection.x1;
    var y1 = selection.y1;
    var x2 = x1 + parseInt($('#imageWidth').val());
    var y2 = y1 + parseInt($(this).val());
    editor.setSelection(x1, y1, x2, y2, true);
    editor.update();
});
}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:52:02.430

2013 年 3 月 28 日更新 上面的帖子没有说明我遇到的问题。我偶然发现了问题所在。它在 base64 部分中寻找完整的 URL。出于某种原因，它在查找照片时需要查看完整的 URL。上传的照片只是数据库中照片的直接链接——你不会看到，因为我没有包含它。无论如何，我将上传页面更改为将完整链接上传到数据库。现在我可以访问选择。

# android - android中带有复选框的对话框

> ID：15651520
> 
> 赞同：-5
> 
> 时间：2013-03-27T03:40:06.493
> 
> 标签：android

我想知道如何使用只能选择 4 个复选框的元素列表来实现对话框。我怎样才能做到这一点？有教程吗？我有类似的东西：

```
protected void showSelectMeasurementsDialog() {
      boolean[] checkedMeasurements = new boolean[measurements.length];
      int count = measurements.length;

      for(int i = 0; i < count; i++)

              checkedMeasurements[i] = selectedMeasurements.contains(measurements[i]);

      DialogInterface.OnMultiChoiceClickListener measurementsDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
       @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecselectedMeasurementsChecked){
           if(isChecselectedMeasurementsChecked)

                   selectedMeasurements.add(measurements[which]);

          else{
            selectedMeasurements.remove(measurements[which]);

          }

          onChangeSelectedMeasurements();
        }
       };

      AlertDialog.Builder builder = new AlertDialog.Builder(this);
      builder.setTitle("Select Measurements");
      builder.setMultiChoiceItems(measurements, checkedMeasurements, measurementsDialogListener);

      AlertDialog dialog = builder.create();
      dialog.show();
    } 
```

但我不知道当我选择了 4 个项目时如何阻止选择项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:00:03.303

1.  [实现一个可检查的列表视图，如此处](http://blog.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/)所示 。
2.  在适配器中保留一个`Collection`已检查的项目（通过实现`setOnCheckedChangeListener`列表项中包含的复选框，并在每次检查项目时将其添加到此集合中。
3.  最后，使用此集合的大小来确定允许/禁止单击复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:50:04.017

像这样试试。

```
public void dialog(View v){
String str[] = {"yyyy","xxxx","ccccc","cxcxxc","dadfssaas"};
    final AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this);
    LayoutInflater inflater = getLayoutInflater();

    View view = inflater.inflate(R.layout.dialog, null);
    ListView lv = (ListView)view.findViewById(R.id.listView1);
    ArrayAdapter<String> adp = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_list_item_multiple_choice,str);
    lv.setAdapter(adp);
    final boolean[] checkedItems = new boolean[str.length];
    alertDialog.setMultiChoiceItems(str, checkedItems, new DialogInterface.OnMultiChoiceClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecked) {
            // TODO Auto-generated method stub

            int count = 0;
            for (int i = 0; i < checkedItems.length; i++) {
                // loop through the checkedItems array, if checkedItems
                // increment count*/

                if (checkedItems[i]) {

                    count++;

                }
                if (count == 5) {
                    // if the number of checked items become
                    // four, set the last checkedItems item 'which'
                    // to false and uncheck the checkbox
                    checkedItems[which] = false;
                    ((AlertDialog) dialog).getListView().setItemChecked(which, false);
                    break;
                }

            }

        }
    });

    alertDialog.show();
} 
```

# python - Python GUI 中的掷骰子

> ID：15651521
> 
> 赞同：1
> 
> 时间：2013-03-27T03:40:27.480
> 
> 标签：python, dice

`randint`我试图弄清楚如何使用该函数在 Python GUI 中掷骰子。

我想用两次鼠标点击从 生成骰子掷出的两个数字`randint`，然后再点击两次来更改骰子以显示这些数字。

我已经展示了骰子和所有内容，但我不确定如何在该项目的窗口中使用与骰子相关的`randint`和`mouseclick`函数。此项目必须使用`randint`and 。`mouseclick`我一直在尝试使用 a`list`随机删除或不删除骰子中的点，但问题是似乎没有一种有效的方法来使用`randint`. 我将不胜感激任何建议。

```
from graphics import *

def main():

    #Set interface
    w = GraphWin()
    s1 = Rectangle(Point(70,70), Point(20,20))
    s1.setFill("Green")
    s1.setOutline("Black")
    s1.draw(w)

    s2 = Rectangle(Point(140, 140), Point (90,90))
    s2.setFill("Green")
    s2.setOutline("Black")
    s2.draw(w)

    center = Point(60,60)
    ds1 = Circle(center, 5)
    ds1.setFill("Red")
    ds1.draw(w)

    center2 = Point(45,60)
    ds2 = Circle(center2, 5)
    ds2.setFill("Red")
    ds2.draw(w)

    center3 = Point(30,60)
    ds3 = Circle(center3, 5)
    ds3.setFill("Red")
    ds3.draw(w)

    center4 = Point(30,30)
    ds4 = Circle(center4, 5)
    ds4.setFill("Red")
    ds4.draw(w)

    center5 = Point(45,30)
    ds5 = Circle(center5, 5)
    ds5.setFill("Red")
    ds5.draw(w)

    center6 = Point(60,30)
    ds6 = Circle(center6, 5)
    ds6.setFill("Red")
    ds6.draw(w)

    center7 = Point(130,130)
    ds7 = Circle(center7, 5)
    ds7.setFill("Red")
    ds7.draw(w)

    center8 = Point(130,115)
    ds8 = Circle(center8, 5)
    ds8.setFill("Red")
    ds8.draw(w)

    center9 = Point(130,100)
    ds9 = Circle(center9, 5)
    ds9.setFill("Red")
    ds9.draw(w)

    center10 = Point(100,100)
    ds10 = Circle(center10, 5)
    ds10.setFill("Red")
    ds10.draw(w)

    center11 = Point(100,115)
    ds11 = Circle(center11, 5)
    ds11.setFill("Red")
    ds11.draw(w)

    center12 = Point(100,130)
    ds12 = Circle(center12, 5)
    ds12.setFill("Red")
    ds12.draw(w)

    #Display message
    m = Text(Point(1,3), ("Click to roll dice: "))
    m.draw(w) 
```

# 实验室4.py

```
from graphics import *
from random import*
def main():
    print ("This program rolls dice using randint")

    w = GraphWin()
    s1 = Rectangle(Point(70,70), Point(20,20))
    s1.setFill("Green")
    s1.setOutline("Black")
    s1.draw(w)

    s2 = Rectangle(Point(140, 140), Point (90,90))
    s2.setFill("Green")
    s2.setOutline("Black")
    s2.draw(w)

    #Display message
    m = Text(Point(1,3), ("Click to roll dice: "))
    m.draw(w)

    center = Point(60,60)
    sd1 = Circle(center, 5)
    sd1.setFill("Red")

    center = Point(45,60)
    sd2 = Circle(center, 5)
    sd2.setFill("Red")

    center3 = Point(30,60)
    sd3 = Circle(center3, 5)
    sd3.setFill("Red")

    center4 = Point(30,30)
    sd4 = Circle(center4, 5)
    sd4.setFill("Red")

    center5 = Point(45,30)
    sd5 = Circle(center5, 5)
    sd5.setFill("Red")

    center6 = Point(60,30)
    sd6 = Circle(center6, 5)
    sd6.setFill("Red")

    center7 = Point(130,130)
    sd7 = Circle(center7, 5)
    sd7.setFill("Red")

    center8 = Point(130,115)
    sd8 = Circle(center8, 5)
    sd8.setFill("Red")

    center9 = Point(130,100)
    sd9 = Circle(center9, 5)
    sd9.setFill("Red")

    center10 = Point(100,100)
    sd10 = Circle(center10, 5)
    sd10.setFill("Red")

    center11 = Point(100,115)
    sd11 = Circle(center11, 5)
    sd11.setFill("Red")

    center12 = Point(100,130)
    sd12 = Circle(center12, 5)
    sd12.setFill("Red")

    w.getMouse()
    RN = randint(0,5)
    if RN == 0:
        w.getMouse()
        sd1.draw
    elif RN == 1:
        w.getMouse()
        sd1.draw
        sd2.draw
    elif RN == 2:
        w.getMouse()
        sd1.draw
        sd2.draw
        sd3.draw
    elif RN == 3:
        w.getMouse()
        sd1.draw
        sd2.draw
        sd3.draw
        sd4.draw
    elif RN == 4:
        w.getMouse()
        sd1.draw
        sd2.draw
        sd3.draw
        sd4.draw
        sd5.draw
    elif RN == 5:
        w.getMouse()
        sd1.draw
        sd2.draw
        sd3.draw
        sd4.draw
        sd5.draw
        sd6.draw

        w.getMouse()
        RN = randint(0,5)
        if RN == 0:
                w.getMouse()
                sd7.draw
        elif RN == 1:
                w.getMouse()
                sd7.draw
                sd8.draw
        elif RN == 2:
                w.getMouse()
                sd7.draw
                sd8.draw
                sd9.draw
        elif RN == 3:
                w.getMouse()
                sd7.draw
                sd8.draw
                sd9.draw
                sd10.draw
        elif RN == 4:
                w.getMouse()
                sd7.draw
                sd8.draw
                sd9.draw
                sd10.draw
                sd11.draw
        elif RN == 5:
                w.getMouse()
                sd7.draw
                sd8.draw
                sd9.draw
                sd10.draw
                sd11.draw
                sd12.draw

                #Change message
                m = Text(Point(1,3), ("Click to close program: "))
                m.draw(w)
                w.getMouse()
                w.close() 
```

这就是我最终解决它的方法。

```
from graphics import *
from random import*
def main():
    print ("This program rolls dice using randint")

    w = GraphWin()
    s1 = Rectangle(Point(70,70), Point(20,20))
    s1.setFill("Green")
    s1.draw(w)

    s2 = Rectangle(Point(140, 140), Point (90,90))
    s2.setFill("Green")
    s2.draw(w)

    #Display message
    m = Text(Point(60,10), ("Click to roll dice: "))
    m.draw(w)
    #Define die faces
    center = Point(60,60)
    sd1 = Circle(center, 5)
    sd1.setFill("Red")

    center = Point(45,60)
    sd2 = Circle(center, 5)
    sd2.setFill("Red")

    center3 = Point(30,60)
    sd3 = Circle(center3, 5)
    sd3.setFill("Red")

    center4 = Point(30,30)
    sd4 = Circle(center4, 5)
    sd4.setFill("Red")

    center5 = Point(45,30)
    sd5 = Circle(center5, 5)
    sd5.setFill("Red")

    center6 = Point(60,30)
    sd6 = Circle(center6, 5)
    sd6.setFill("Red")

    center7 = Point(130,130)
    sd7 = Circle(center7, 5)
    sd7.setFill("Red")

    center8 = Point(130,115)
    sd8 = Circle(center8, 5)
    sd8.setFill("Red")

    center9 = Point(130,100)
    sd9 = Circle(center9, 5)
    sd9.setFill("Red")

    center10 = Point(100,100)
    sd10 = Circle(center10, 5)
    sd10.setFill("Red")

    center11 = Point(100,115)
    sd11 = Circle(center11, 5)
    sd11.setFill("Red")

    center12 = Point(100,130)
    sd12 = Circle(center12, 5)
    sd12.setFill("Red")

    #Set loops for each die
    w.getMouse()
    RN = randint(1,6)
    if RN == 1:
        w.getMouse()
        sd1.draw(w)
    elif RN == 2:
        w.getMouse()
        sd1.draw(w)
        sd2.draw(w)
    elif RN == 3:
        w.getMouse()
        sd1.draw(w)
        sd2.draw(w)
        sd3.draw(w)
    elif RN == 4:
        w.getMouse()
        sd1.draw(w)
        sd2.draw(w)
        sd3.draw(w)
        sd4.draw(w)
    elif RN == 5:
        w.getMouse()
        sd1.draw(w)
        sd2.draw(w)
        sd3.draw(w)
        sd4.draw(w)
        sd5.draw(w)
    elif RN == 6:
        w.getMouse()
        sd1.draw(w)
        sd2.draw(w)
        sd3.draw(w)
        sd4.draw(w)
        sd5.draw(w)
        sd6.draw(w)

    w.getMouse()
    RN2 = randint(1,6)
    if RN2 == 1:
        w.getMouse()
        sd7.draw(w)
    elif RN2 == 2:
        w.getMouse()
        sd7.draw(w)
        sd8.draw(w)
    elif RN2 == 3:
        w.getMouse()
        sd7.draw(w)
        sd8.draw(w)
        sd9.draw(w)
    elif RN2 == 4:
        w.getMouse()
        sd7.draw(w)
        sd8.draw(w)
        sd9.draw(w)
        sd10.draw(w)
    elif RN2 == 5:
        w.getMouse()
        sd7.draw(w)
        sd8.draw(w)
        sd9.draw(w)
        sd10.draw(w)
        sd11.draw(w)
    elif RN2 == 6:
        w.getMouse()
        sd7.draw(w)
        sd8.draw(w)
        sd9.draw(w)
        sd10.draw(w)
        sd11.draw(w)
        sd12.draw(w)

    #Change message
    m.undraw()
    m2 = Text(Point(80,10), ("Click to close program: "))
    m2.draw(w)

    w.getMouse()
    w.close()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:23:13.690

试试这个方法：

1.  创建一个包含所有骰子面的列表。
2.  当有人点击鼠标时，选择一个介于 0 和骰子面数之间的随机整数。
3.  然后取该数字并将其用作骰子面列表的下标。
4.  显示骰子面。

既然你问了`randint`：

```
>>> from random import randint
>>> randint(0,5)
2
>>> randint(0,5)
5
>>> randint(0,5)
1 
```

所以你现在需要的是这个逻辑：

```
if mouse_click:
   random_number = randint(0,5)
   display_dice_face(dice_faces[random_number]) 
```

这更容易，因为该`getMouse()`方法将等待鼠标单击。

我认为这应该让你开始。

# python - 如何阻止 python pandas 在每个日期添加“00:00:00”？

> ID：15651527
> 
> 赞同：2
> 
> 时间：2013-03-27T03:41:17.047
> 
> 标签：python, pandas

`csv`使用`pandas.Series.to_csv`添加到每个日期索引将时间序列数据写入文件`00:00:00`，这在另一个应用程序中打开 csv 文件时很烦人。

```
Date,price
2000-06-01 00:00:00,90.3
2000-06-02 00:00:00,92.69
2000-06-05 00:00:00,96.1 
```

是否有一种干净/pythonic 的方式可以将日期值写为没有额外的日期`00:00:00`？

更一般地说，是否有可能`pandas`有一个索引列，它是日期而不是时间戳？

**编辑：**对于那些可能访问这个问题的人来说，这是我想出的解决方案：

```
with io.StringIO() as sout:
  data.to_csv(sout, header=True, index=True)
  with open(fname, 'w') as fout:
    fout.write(sout.getvalue().replace(' 00:00:00','')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T23:33:27.433

在新版本的 Pandas 中，您可以使用[to_csv](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)方法的 date_format 参数：

```
df.to_csv(filename, date_format='%Y%m%d') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:40:33.757

在写入 csv 文件之前映射您的系列/数据框：

```
In [8]: import pandas as pd

In [9]: import datetime

In [10]: s = pd.Series([datetime.datetime.utcnow()])

In [11]: s.map(lambda x:x.date() if isinstance(x, datetime.datetime) else x).to_csv('test.csv') 
```

测试.csv：

```
0,2013-03-27 
```

# mysql - 时间数据类型 - MySQL

> ID：15651529
> 
> 赞同：0
> 
> 时间：2013-03-27T03:41:26.800
> 
> 标签：mysql, sql, database, sqldatatypes

我需要在创建记录时为记录分配日期和时间，（创建时间）

我尝试使用此语句，但每次收到错误消息时：

```
'OrderDate' DATE DEFAULT (GETDATE()) NOT NULL, 
```

当我尝试对其进行可视化编辑时，PHPMYSQL 显示字段数据类型已成功更改的消息，但事实并非如此。

底线；我需要知道正确的数据类型/函数来将字段的值设置为创建时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:46:42.323

要获取自动设置记录创建日期的字段，请使用：

```
OrderDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL; 
```

在 MySQL 5.6 之前，如果你需要一个`DATETIME`字段类型来自动初始化，那么你可以定义你的`OrderDate`as

```
OrderDate DATETIME DEFAULT 0 NOT NULL; 
```

并使用 a`TRIGGER`分配日期：

```
DROP TRIGGER IF EXISTS atable_insert_before;

DELIMITER //

CREATE
TRIGGER atable_insert_before
    BEFORE INSERT ON 
        atable
    FOR EACH ROW
BEGIN
    IF IFNULL(NEW.OrderDate, 0) <= 0
    THEN
        SET NEW.OrderDate = NOW();
    END IF;
END;
//

DELIMITER ; 
```

在 MySQL 5.6 中，`DATETIME`字段可以像现在一样自动初始化`TIMESTAMP`。请参阅[http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html)

# java - 需要有关删除二叉搜索树节点的帮助

> ID：15651531
> 
> 赞同：0
> 
> 时间：2013-03-27T03:41:50.427
> 
> 标签：java

这是 12 年级的作业。其中一个问题要求我们在 BTree 类中编写一个方法，该方法采用 BNode 或整数，并从树中删除该节点。

这是我尝试过的：

```
public void delete(BNode b){
    if(b==null){
        return;
    }
    if(b.getLeft()==null && b.getRight()==null){

        b = null;
    }
    else{
        //System.out.println("boiboi");
        BNode tmp = b;
        b = null;
        add(tmp.getLeft());
        add(tmp.getRight());
        tmp = null;
    }
}
public void delete(int v){
    //System.out.println("gord");
    delete(find(v));
} 
```

这是我认为正确的添加和查找方法：

```
public BNode find(int v){
    return find(v, root);
}
public BNode find(int v, BNode branch){
    if(branch == null || branch.getVal() == v){
        return branch;
    }
    if(v<branch.getVal()){
        return find(v, branch.getLeft());
    }
    else{//else if(v>branch.getVal())
        return find(v, branch.getRight());
    }
}
public void add(int v){
    if(root == null){
        root = new BNode(v);
    }
    else{
        add(v, root);
    }
}
public void add(int v, BNode branch){
    if(v == branch.getVal()){
        return;
    }
    if(v<branch.getVal()){
        if(branch.getLeft() == null){
            branch.setLeft(new BNode(v));
        }
        else{
            add(v, branch.getLeft());
        }
    }
    else{
        if(branch.getRight() == null){
            branch.setRight(new BNode(v));
        }
        else{
            add(v, branch.getRight());
        }
    }
}
public void add(BNode n){
    if(n==null){
        return;
    }
    add(n.getVal());
} 
```

这是我的测试课：

```
 BTree bTree = new BTree();
    bTree.add(50);
    bTree.add(60);
    bTree.add(40);
    bTree.add(35);
    bTree.add(55);
    bTree.add(45);
    bTree.add(51);
    bTree.delete(60);
    bTree.display(); 
```

输出仍然是我添加的所有内容：35 40 45 50 51 55 60 即使我尝试删除 51 这是最简单的情况，仍然是相同的输出。任何帮助或建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:50:49.243

从 BST 中删除节点时，需要注意三种情况。

1.  如果它是一片叶子，请继续删除。

2.  如果一个节点只有 1 个子节点，只需将其子节点连接到其父节点。[您显然需要一些辅助方法来获取ParentOfNode 等]

3.  如果一个节点有2个孩子，则在右子树中找到最小的元素。并将其值放入当前节点并删除该节点。

更多信息在这里。 [http://www.cs.sunysb.edu/~skiena/373/notes/lecture6/lecture6.html](http://www.cs.sunysb.edu/~skiena/373/notes/lecture6/lecture6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-28T13:09:38.577

```
/* Algorithm to delete a record from a B-tree of order n.
The field used indicates how many keys in the node are being used. */
    q = NULL;
    p = tree;
    while (p) {
        i = nodesearch(p, key);
        q = p;
        if (i < used(p) -1 && key == k(p,i)) {
            found = TRUE;
            position = i;
            break;
        }
        p = son(p,i);
    }
    if (!found)
    /* error - item not found */
    else if (subtree(p)) {
        /* node is not a leaf */
        if (used(p) > ((n-1)/2)+1)
            /* no underflow */
            delkey (p, position, key);
        else {
            /* Statements to replace key to be deleted */
            /* with successor in father node. */
            replace (p, position, fsucc(p));
            p0 r1 p1 r2 p2 r3 ……. pn-1 rn-1 pn
            q = &fsucc(p);
            qpos = index of fsucc;
            if (used(rbrother(p)) > ((n-1)/2)+1)
                replace (q, qpos, sonsucc(q));
            else
                while (q && used(q) < (n-1)/2) {
                    concatenate(q, brother(q));
                    q = father(q);
                }
        }
    }
    else /* is a leaf */
    delkey(p, position, key);
} 
```

# php - 限制动作 PHP

> ID：15651533
> 
> 赞同：1
> 
> 时间：2013-03-27T03:42:01.817
> 
> 标签：php

基本上，我有一个函数可以返回数据库内的“项目”总数，这些项目的限制是**40**，如果返回的值小于**40**我希望它执行操作，从而将限制增加**1**直到它再次达到**40**，之后我希望它停止，我当前使用的代码如下所示

```
$count = $row['COUNT'];
foreach($result as $row) {
    if($count < 40) {
       //I want to execute a function, thus increasing the $count by one evertime
       //until it reaches 40, after that it must stop
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:47:17.810

```
$count = $row['COUNT'];
foreach($result as $row) {
    if($count >= 40) {
       break; // exit foreach loop immediately
    }
    //put code here
    $count += 1; // or whatever you want it to be incremented by, e.g. $row['COUNT']
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:48:05.590

尝试这个：

```
function custom_action(&$count) {
    while($count++ < 40) {
          // do some cool stuff...
          $count++;
    }
}

$count = $row['COUNT'];
foreach($result as $row) {
    if($count < 40) {
        custom_action($count);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:44:48.263

我认为你想要一个`while`循环。[http://php.net/manual/en/control-structures.while.php](http://php.net/manual/en/control-structures.while.php)

```
$count = $row['COUNT'];
foreach($result as $row) {
    while($count < 40) {
       //Execute the function that increases the count
    }
} 
```

# user-interface - OCaml：GUI 编程的有效途径？

> ID：15651539
> 
> 赞同：19
> 
> 时间：2013-03-27T03:42:41.100
> 
> 标签：user-interface, interface, ocaml, user-interaction

我已经看到了一些涉及 OCaml 中的 GUI 编程的线程，但是当需要 GUI 界面时，我觉得它们并没有明确地导致明确的解决方案。

更具体地说，我的问题如下：为 OCaml 软件编写 GUI 时，最有效（且易于掌握）的方法是什么？有没有人接触过 OCaml 本身中简单有效的 GUI 模块，或者找到了一种有效的语言或免费软件包，可以在其中完成并与 OCaml 很好地通信/播放？

我用 OCaml 编写了一个解释器，所以我的词法分析器、解析器、核心解释器函数等都是 OCaml 模块。目前，我有一个命令行解决方案（“main.ml”），它允许用户通过在命令行中输入表达式并接收显示解析和简化表达式等的打印终端输出来与解释器交互。但是，命令行解决方案仅用于测试目的。我希望用户通过 GUI 进行交互，它可以很简单（从很久以前就想到了 Java 框架），但需要以某种方式与我编写的 OCaml 模块进行交互。到目前为止，我在 OCaml 中找到了一个库：http: [//caml.inria.fr/pub/docs/manual-ocaml-4.00/manual042.html](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual042.html)。有谁知道这是否有效和有用？（我想我'

如果我选择用更优化的语言对 GUI 进行编程，软件交互会是：用合适的语言（可能是 C++、Python 等）编写 GUI，然后将 OCaml 编写的解释器编译成可执行文件，然后以某种方式将 GUI 连接到可执行文件？我对一些松散连接或奇怪的解决方案不感兴趣，通过管道（我一直在考虑这些的进程间通信，例如操作系统设计中所关心的）或套接字（我倾向于将这些用于网络编程），我想象一下，如果不是 OCaml 本身，必须有某种方法将我的 OCaml 编码解释器“容纳”在另一种语言的 GUI 代码中。有什么想法、指导或建议吗？

编辑：如果我能得到一个类似 Linux 的操作系统（即 Linux RedHat）的 GUI，我会很高兴。如果我可以让 GUI 在 Windows 上运行，那就太好了，但至少我的目标是 Linux。

编辑2：刚刚发现这个，有人对“OCaml-Java”有想法吗？ [http://ocamljava.x9c.fr/](http://ocamljava.x9c.fr/) 听起来很有趣，因为它有“...运行使用 ocamlc 编译的 Objective Caml 源代码的能力；第二，将 Objective Caml 源代码编译成可执行 jar 文件的能力。” 我担心的是，Java 是获得快速但有用的 GUI 的最佳方式从来没有让我感到震惊……

当前解决方案：在检查了@Jeffrey Scofield 在下面提出的解决方案帖子中的各种选项后，我选择目前更深入地研究 LablGtk（这将使我能够留在 OCaml 中）。对于那些看这篇文章的人来说，下一个有希望的选择是研究与 C 的外语接口，因为 C 和 OCaml 已经开始建立关系。似乎有在 OCaml 中调用 C 代码和在 C 中调用 OCaml 的方法（尽管这可能非常困难，因为您最终会使用一些复杂的包装函数来包装 OCaml 函数调用，这些函数将更具体到您调用的函数类型在 OCaml-->ie 中，您将不得不处理 C) 中每个 OCaml 函数及其参数的“映射”。看一眼： [http://www.mega-nerd.com/erikd/Blog/CodeHacking/Ocaml/calling_ocaml.html](http://www.mega-nerd.com/erikd/Blog/CodeHacking/Ocaml/calling_ocaml.html), 了解更多信息。OCaml-Java 最初似乎是一个好主意，因为我对 Java GUI 编程很熟悉，但是这两种语言之间的交互不像 C 和 OCaml 那样直接，另外，这方面的文档似乎很薄（并且使用 OCaml -Java 不是你刚刚学习并获得 Java GUI 的东西......）。OCaml-JavaScript 看起来很有趣，但请记住，如果您选择此路径，除了一些 JavaScript 之外，您很可能还需要在良好的 HTML 5 编码设置上投入时间。或者，这里有几篇关于管道和套接字的帖子，它们是创建 GUI 后端系统的有效方法。但是，如果您不介意您的程序系统/产品将“松散耦合”，这是一个好主意。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T04:16:29.157

我认为[LablGtk](https://forge.ocamlcore.org/projects/lablgtk/)工具包是相当最新的并且目前得到维护。所以这将是一种选择。但是，我自己没有使用过它。

将一组 OCaml 模块链接到用 C、C++ 或 Objective C 编写的主程序中并不难。您可以或多或少地直接调用您的 OCaml 函数并返回结果。为此，您需要学习外部函数接口，一旦您熟悉，这并不难。然后，您可以使用 C 系列方面的任何您喜欢的 GUI 库。如果您对这种方法感兴趣，可以从OCaml 手册的[第 19 章开始。](http://caml.inria.fr/pub/docs/manual-ocaml/manual033.html)

您可以使用 C 中介链接其他语言，具体取决于语言。对于解释型语言，您可能可以将 OCaml 函数添加为新的原语。（根据我的经验，解释器通常是用 C 或 C++ 编写的。）

对于 Java，有[OCaml-Java](http://ocamljava.x9c.fr/)（正如你提到的）。我自己没有用过，但很有趣。我相信 JVM 施加了一些限制，因此您可能需要在编码时格外小心。

对于 Web 应用程序，有[js-of-ocaml](http://ocsigen.org/js_of_ocaml/)，它将 OCaml 编译为 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-11T08:38:55.097

目前在我雇主的项目中，我将 C++ 和 OCaml 与 Qt 一起使用，并将 C 部分添加到 OCaml 以进行互操作。OCaml 部分被 C++ 作为进程调用，两者与 Qt 的共享内存进行通信。它适用于我们的项目，但对于更频繁的数据交换，它不会有效。

这里可能是另一个解决方案，使用转译器： [https ://github.com/bloomberg/bucklescript](https://github.com/bloomberg/bucklescript)

这个项目用 JavaScript 翻译你的 OCaml 代码，所以你可以用这种方式在 HTML5 基础 GUI 框架上做 GUI。

这个编译器的主要作者也曾作为 OCaml 编译器的核心贡献者有一段时间了。React 团队也对这个项目提供了很多反馈。

# r - 从程序加载数据

> ID：15651546
> 
> 赞同：4
> 
> 时间：2013-03-27T03:43:20.960
> 
> 标签：r, dataset, package

我正在尝试访问作为程序一部分的一组数据。结果是数据不存在的声明。我使用的代码如下：

> 图书馆（生存）

加载所需的包：样条

> 数据（包=“生存”）
> 
> 数据（AML）

警告消息：在数据（aml）中：未找到数据集“aml”

命令 data(package="survival") 生成包含 aml 的数据列表，但 data(aml) 命令确实使数据可用。我是否缺少必需的命令，或者生存包的文件可能有问题？我怎样才能找到文件并测试 aml 的存在？

我已经对数据文件 aml 和 am1 进行了测试，以确保我没有误读文本。没有一个工作。根据数据文件列表中的描述，这个数据文件的名字全是字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:59:48.063

在 的情况下`survival`，包作者已经实现`lazyData`，这意味着您无需调用就可以访问数据`data`，它已经可以在搜索路径上找到。

```
library(survival)
exists('aml')
## [1] TRUE

head(aml)
  time status          x
1    9      1 Maintained
2   13      1 Maintained
3   13      0 Maintained
4   18      1 Maintained
5   23      1 Maintained
6   28      0 Maintained 
```

# python - matlab函数到python函数的转换

> ID：15651549
> 
> 赞同：1
> 
> 时间：2013-03-27T03:43:22.490
> 
> 标签：python, matlab, function

我有一个matlab函数

```
function [indx, indy] = coord2index(hres, vres, hdiv, vdiv, x, y)

  indx = hdiv + x + 1;

  indy = -1*y + vdiv; 
```

如何将其转换为 python 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:54:11.173

我可能是错的，但你试过这个：

```
def coord2index(hres, vres, hdiv, vdiv, x, y):
    return hdiv + x + 1, (-1) * y + vdiv 
```

您可以阅读更多关于[在 python 教程中定义的函数](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:54:05.367

我想它会是这样的：

```
def coord2index(hres, vres, hdiv, vdiv, x, y):
  indx = hdiv + x + 1
  indy = -1*y + vdiv
  return indx, indy 
```

假设您的输入是`numpy.ndarray`形状广播应该与 matlab 相同。

# android - Android - 在 C/C++ 代码中检测有根设备

> ID：15651552
> 
> 赞同：1
> 
> 时间：2013-03-27T03:44:06.020
> 
> 标签：android, c

有很多示例展示了如何在 java 代码中检测 root 的 android 设备，我需要在 C 代码中执行此操作（当然由 jni 包装），找不到任何示例。请帮忙。谢谢。

经过研究发现，在 JNI C 代码中：system("echo \"test\" > /data/test.txt\n");

1.  在有根设备上返回 512，512 表示错误代码 2（严重错误）。
2.  在无根设备上返回 256，256 表示错误代码 1（小错误）权限被拒绝。

检查返回错误 512 是否足以说明设备已植根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:39:57.310

你可以做一些更简单的事情。

在Java中有一个标志来确定手机是否已root。如果是，当您将执行 JNI 调用时，传递此标志以指示相同。然后，您可以在 C 中处理有根/无根的代码流。

# ios - NSString URL 解码？

> ID：15651553
> 
> 赞同：18
> 
> 时间：2013-03-27T03:44:10.450
> 
> 标签：ios, nsstring, urldecode, percent-encoding

我已经尝试了很多方法，但是这个小字符串不能被 URL 解码。

```
NSString *decoded;
NSString *encoded = @"fields=ID%2CdeviceToken";
decoded = (__bridge NSString*)CFURLCreateStringByReplacingPercentEscapesUsingEncoding(NULL, (CFStringRef)encoded, NULL, NSUTF8StringEncoding);
NSLog(@"decodedString %@", decoded); 
```

上面的代码在替换百分比转义后只记录相同的 (!) 字符串。

有可靠的解决方案吗？我认为某种基于某些文档的 RegEx 解决方案可能会起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-27T03:52:57.347

另一种选择是：

```
NSString *decoded = [encoded stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-27T03:49:31.967

使用`CFSTR("")`而不是`NULL`倒数第二个参数。从[CFURL 参考](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFURLRef/Reference/reference.html)：

> charactersToLeaveEscaped
> 
> 您希望保留其百分比转义序列的字符，例如空格字符的 %20。传递 NULL 以指定不替换任何百分比转义符，或传递空字符串 (CFSTR("")) 以指定全部替换。

```
 NSString *encoded = @"fields=ID%2CdeviceToken";
    NSString *decoded = (__bridge_transfer NSString *)CFURLCreateStringByReplacingPercentEscapesUsingEncoding(NULL, (CFStringRef)encoded, CFSTR(""), kCFStringEncodingUTF8);
    NSLog(@"decodedString %@", decoded); 
```

印刷：

> 2013-03-26 21:48:52.559 URLDecoding[28794:303] 解码字符串字段=ID,deviceToken

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-21T08:23:57.527

***CFURLCreateStringByReplacingPercentEscapesUsingEncoding***在 iOS 9 中已弃用。请改用***stringByRemovingPercentEncoding***。

```
NSString *decoded = [encoded stringByRemovingPercentEncoding]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-17T14:25:18.350

斯威夫特 3

```
import Foundation

let charSet = CharacterSet.urlPathAllowed.union(.urlQueryAllowed) // just use what you need, either path or query
let enc = "Test Test Test".addingPercentEncoding(withAllowedCharacters: charSet)!
let dec = enc.removingPercentEncoding!

print("Encoded: \(enc)")
print("Decoded: \(dec)") 
```

输出：

> 编码：Test%20Test%20Test
> 
> 解码：测试测试测试

# php - 日期验证无效时无法弹出对话框

> ID：15651554
> 
> 赞同：0
> 
> 时间：2013-03-27T03:44:15.843
> 
> 标签：php, ajax, validation, yii

我是一个新的 Yii 用户，当我想建立一个网站时遇到了问题。我的网站有一部分需要用户输入开始日期和结束日期，我想要一个功能，如果结束日期设置在开始日期之前，它会显示一个对话框自动警告用户，但我不能那样做。有什么想法吗？

这是我的两个日期文本字段的代码：

```
<td>Start
    <?php 

            $this->widget('zii.widgets.jui.CJuiDatePicker', array(
            'name'=>'COURSE_START_DATE',
            'model'=>$Cmodel,
            'attribute'=>'COURSE_START_DATE',
            'language'=>Yii::app()->language=='en_us',

            'options'=>array(
                'showAnim'=>'fold', // 'show' (the default), 'slideDown', 'fadeIn', 'fold'
                'showOn'=>'button', // 'focus', 'button', 'both'
                'buttonText'=>Yii::t('ui','Calendar'),
                'buttonImage'=>Yii::app()->request->baseUrl.'/images/calendar.png',
                'buttonImageOnly'=>true,
            ),
    )
        ?></td>

     <td>End 
    <?php 
        $this->widget('zii.widgets.jui.CJuiDatePicker', array(
            'name'=>'COURSE_END_DATE',
            'model'=>$Cmodel,
            'attribute'=>'COURSE_END_DATE',
            'language'=>Yii::app()->language=='en_us',
            'options'=>array(
                'showAnim'=>'fold', // 'show' (the default), 'slideDown', 'fadeIn', 'fold'
                'showOn'=>'button', // 'focus', 'button', 'both'
                'buttonText'=>Yii::t('ui','Calendar'),
                'buttonImage'=>Yii::app()->request->baseUrl.'/images/calendar.png',
                'buttonImageOnly'=>true,

            ),
        ));

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:23:14.907

如果你真的是 yii 新手，你必须学习很多东西：

**1、yii中如何进行ajax和客户端验证：**

在您的表单中，您需要指出可能会执行 ajax 和客户端验证。这是一个例子：

```
<?php $form=$this->beginWidget('CActiveForm', array(
  'id'=>'contacts-form',
  'enableAjaxValidation'=>true, // this turns on AJAX validation
  'enableClientValidation'=>true, // this turns on Client validation
)); ?> 
```

**2\. 在控制器中启用 ajax 验证**

例如在您的控制器操作调用中：

```
$this->performAjaxValidation($model); 
```

和：

```
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='contacts-form') {
    echo CActiveForm::validate($model);
    Yii::app()->end();
    }
} 
```

**3\. 在模型中创建验证规则**

然后，您需要创建将比较您的两个值的验证规则。为此，您可以使用[CCompareValidator](http://www.yiiframework.com/doc/api/1.1/CCompareValidator)中的构建，例如将默认运算符更改为“>”。因此，在您的模型中，您将拥有以下内容：

```
public function rules()
{
    return array(
        //your other rules
        array('COURSE_END_DATE', 'compare', 'compareAttribute'=>'COURSE_START_DATE', 'operator' => '>'),
    );
} 
```

# html - 你怎么知道pix中的位置

> ID：15651555
> 
> 赞同：1
> 
> 时间：2013-03-27T03:44:16.213
> 
> 标签：html, css, image, positioning

如果我不清楚，我将尝试以最好的方式问这个问题。

我正在尝试学习 css 和 html。

例如`top: # px;`，在定位图像时，我如何知道像素位置是什么？是否有一个程序或它是一个猜谜游戏？

我希望你能理解我的问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:53:03.430

仅通过使用 CSS 来知道元素的位置是不可能的。这可以使用 javascript 来完成。检查这个[link1](https://stackoverflow.com/q/1409355/1577396)和[link2](http://www.quirksmode.org/js/findpos.html)。

如果你知道 jQuery，它会更简单。只需使用[`.offset()`](http://api.jquery.com/offset/).

> 有没有这样的程序或者是一个猜谜游戏？

当您为布局中的所有元素分配固定尺寸时，您还可以猜测元素的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:59:21.420

如果您尝试将 CSS`top`属性与`display:absolute`or结合使用`fixed`，那么是的，这主要是一个猜谜游戏。您可以使用浏览器插件来调整 CSS，以便在更改元素时看到元素的位置，获得支持实时更新或预览的 IDE，或者自己截取屏幕截图并测量像素。

但是，通常不应该以这种方式放置元素。只需让 DOM 完成它的工作，并使用填充和边距将内容放在正确的位置。让事物在视觉上具有吸引力需要一些尝试和错误，但它确实还不错。

# android - android.intent.category.DEFAULT 可能会造成麻烦

> ID：15651556
> 
> 赞同：1
> 
> 时间：2013-03-27T03:44:28.293
> 
> 标签：android, android-activity, menu, manifest, dropbox

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="net.clmitchell.ewtraker"
android:versionCode="1"
android:versionName="1.0" 
android:installLocation="auto" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17"
    android:maxSdkVersion="17" />

<supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"
              android:anyDensity="true"
              android:requiresSmallestWidthDp="320" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock">
    <activity
        android:name=".ActSplash"
        android:label="@string/title_act_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".pSectors.ActSectors"
        android:label="@string/title_act_sectors" />
    <activity
        android:name=".ActDBMaint"
        android:label="@string/title_act_dbmaint" />
    <activity
        android:name=".pSectors.ActSectorDetail"
        android:label="@string/title_act_sectord" />
    <activity
        android:name=".pAlliances.ActAlliances"
        android:label="@string/title_act_alliances" />
    <activity
        android:name=".pAlliances.ActDlgAddAllc"
        android:label="@string/title_act_addallc" />
    <activity
        android:name=".pAlliances.ActAllianceDetail"
        android:label="@string/title_act_allianced" />
    <activity
        android:name=".pPlayers.FrgActPlayers"
        android:label="@string/title_act_players" />
    <activity
        android:name=".pPlayers.ActDlgAddPlyr"
        android:label="@string/title_act_addplyr" />
    <activity
        android:name=".pPlayers.FrgActPlyrDtl"
        android:label="@string/title_act_plyrd" />
    <activity
        android:name=".pBases.FrgActBases"
        android:label="@string/title_act_bases" />
    <activity
        android:name=".pBases.ActDlgAddBase"
        android:label="@string/title_act_addbase" />
    <activity
        android:name=".pBases.FrgActBaseDtl"
        android:label="@string/title_act_based" />
    <activity
        android:name=".pBases.ActPlyrBases"
        android:label="@string/title_act_pbases" />
    <activity
        android:name=".ActDropBox"
        android:label="@string/title_act_dbox" />
    <activity android:name="com.dropbox.sync.android.DbxAuthActivity" />
    <activity
      android:name="com.dropbox.client2.android.AuthActivity"
      android:launchMode="singleTask" >
      <intent-filter>
        <data android:scheme="db-1njkuxldz7m7g4j" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE" />
        <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
    </activity>
    <service
      android:name="com.dropbox.sync.android.DbxSyncService"
      android:enabled="true"
      android:exported="false"
      android:label="Dropbox Sync" />
    <service
        android:name=".CtlSplash"
        android:exported="false"/>   
    <service
        android:name=".pSectors.CtlSectors"
        android:exported="false"/>
    <service
        android:name=".pAlliances.CtlAlliances"
        android:exported="false"/>
    <service
        android:name=".pPlayers.CtlPlayers"
        android:exported="false"/>
    <service
        android:name=".pBases.CtlBases"
        android:exported="false"/>
    </application>
</manifest> 
```

当我注意到我的前两个活动（ActSectors 和 ActSectorDetail）不再响应加载活动 ActDBMaint 的菜单项时，我正在设置 DropBox 支持。我的应用程序是 SQLite 密集型的，所以我怀疑 Manifest 中为 DropBox 添加的条目可能会造成一些麻烦。

这是从按下 ActDBMaint 的菜单项开始的 Logcat：

```
04-02 12:52:09.195: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
04-02 12:52:09.225: W/EGL_emulation(795): eglSurfaceAttrib not implemented
04-02 12:52:11.935: W/InputMethodManagerService(288): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40dc0508 attribute=null, token = android.os.BinderProxy@40f06190 
```

我已阅读以下[文章](http://developer.android.com/guide/components/intents-filters.html "文章")；但我看不到它们如何应用于我的应用程序。

我是 Android 编程的菜鸟，所以我会很感激一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:45:31.287

事实证明，菜单项的 ID/名称（菜单 xml 条目和活动的 onOptionsItemSelected() 中的列表）不匹配！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:37:59.283

我注意到这两个活动是包“pSectors”中唯一的活动。您是否偶然将实际的类移动到不同的包中？

# r - 为什么 var 在 R 中表现得像 cov？

> ID：15651562
> 
> 赞同：7
> 
> 时间：2013-03-27T03:44:52.840
> 
> 标签：r

很抱歉问这个......这肯定是一个常见问题解答，这是一个愚蠢的问题，但它一直困扰着我。假设我想获取数据框中每个数字列的方差，例如

```
df <- data.frame(x=1:5,y=seq(1,50,10)) 
```

自然，我尝试

```
var(df) 
```

而不是给我我希望的东西，就像

```
 x    y
2.5  250 
```

我明白了

```
 x   y
x  2.5  25
y 25.0 250 
```

它在对角线上有方差，在其他位置有协方差。当我查找 help(var) 并读到“var 只是 cov 的另一个接口”时，这是有道理的。当然，方差是变量与其自身之间的协方差。输出有点混乱，但我可以沿对角线读取，或者使用`diag(var(df))`、`sapply(df, var)`或或通过反复`lapply(df, var)`调用and来生成方差。`var``df$x``df$y`

但为什么？方差是一种常规的、基本的描述性统计数据，仅次于均值。将它应用于数据框的列不应该是完全和完全微不足道的吗？当我只要求方差时，为什么要给我协方差？只是好奇。感谢您对此的任何评论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T03:47:21.917

惯用的方法是

```
sapply(df, var) 
```

`var` ~~有一种`data.frames`~~`data.frames`通过强制转换为 a~~来~~处理的方法`matrix`。

`Variance`是常规的基本描述性统计量，协方差和相关性也是如此。它们都是相互关联且有趣的，特别是如果您打算使用线性模型。

您总是可以创建自己的功能来执行您想要的

```
Var  <- function(x,...){
  if(is.data.frame(x)) {
   return(sapply(x, var,...))} else { return(var(x,...))}
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T04:05:40.350

这记录在 中`?var`，即：

```
Description:

     ‘var’, ‘cov’ and ‘cor’ compute the variance of ‘x’ and the
     covariance or correlation of ‘x’ and ‘y’ if these are vectors.  If
     ‘x’ and ‘y’ are matrices then the covariances (or correlations)
     between the columns of ‘x’ and the columns of ‘y’ are computed. 
```

其中“矩阵”文本表示类的对象`"matrix"`和`"data.frame"`。

`var`没有传统意义上的数据帧方法。`var`只需将输入数据帧强制转换为矩阵`as.matrix`，然后调用`cov`该矩阵。

为了回答为什么这个问题，我猜方差与协方差的概念密切相关，并且为了保持代码简单，R Core 为类矩阵对象的协方差编写了一个实现，并将其用于方差，因为你最有可能从矩阵中得到的东西。

*或者更简洁地说；这就是 R Core 实现这一点的方式。学会忍受它。:-)*

另请注意，R 正在远离具有类似功能`mean`并对`sd`数据框的组件（列）进行操作。如果你想应用这些函数中的任何一个，包括`var`，你需要调用类似的东西：

```
apply(foo, 2, mean) ## for matrices
sapply(foo, mean) ## for data frames 
```

或更快的特定替代品

```
colMeans(foo) 
```

~~在这种情况下，我怀疑这`diag(var(df))`将是获取差异的最有效方法，而不是通过函数族`var`之一重复调用。`apply`~~ `diag(var(df))`不太可能比前者更快，`sapply(df, var)`因为前者必须计算所有协方差和方差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:07:11.180

@GavinSimpson 已经涵盖了您的实际答案。因为`var`你也可以只使用：

```
sd(df)^2
# x     y 
# 2.5 250.0 
```

通过这样做，您将看到@GavinSimpson 对 R 的含义“*不再具有类似的功能`mean`并对`sd`数据框的组件（列）进行操作*”。已弃用意味着该功能可能会随着即将发生的 R 版本更改而停用，如果您不注意警告并进行适当更改，您的代码可能会中断：

> 警告消息：sd() 已弃用。使用 sapply(*, sd) 代替。

所以我们可以使用：

```
sapply(df,sd)^2
# x     y 
# 2.5 250.0 
```

这给了我们完全相同的结果。

但是，这样做有点愚蠢，因为您实际上是在调用`(sqrt(var(x, na.rm = na.rm)))^2`每一列！相反，正如@mnel 所建议的那样，`sapply( df , var)`您应该如何获得每个列向量的方差。

# perl - 有没有办法判断网站是否是用 perl 从源代码或任何东西构建的

> ID：15651566
> 
> 赞同：2
> 
> 时间：2013-03-27T03:45:22.083
> 
> 标签：perl

我只是想知道，有没有一种方法可以确定网站是否使用 perl。就像我可以用 built with 来判断它使用 wordpress 或 php 一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T05:18:26.887

你不能问一个网站它是用什么语言实现的。没有规则说“.php” URL 必须运行 PHP（尽管它可能是），这一切都由服务器端决定。不能保证说“由 Wordpress 提供支持”的网站确实被 Wordpress 使用。一般来说，泄露有关您的实施细节的信息的安全性很差，因为攻击者可以使用它来选择已知的攻击。

但是，有很多方法可以猜测。

最简单的判断方法之一是查看 URL。它是否以“.pl”结尾？它可能是 Perl（或者您正在查看一个波兰域）。

如果您查看响应标头，有时 Web 服务器会清楚地将自己标识为使用 Perl。例如，您可以使用仅从服务器`curl -I`请求[HTTP 标头](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message)并查看“Server”和“X-Powered-By”标头。

```
$ curl -I http://perldancer.org
HTTP/1.1 200 OK
Date: Wed, 27 Mar 2013 05:04:14 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Server: Perl Dancer 1.311
Content-Length: 19849
X-Powered-By: Perl Dancer 1.311 
```

可能使用 Perl。同样，“Server”和“X-Powered-By”字段纯粹是信息性的，用于收集统计信息。基本上是在吹嘘。服务器不需要说实话。事实上，[他们宣传它是一个次要的安全问题](https://pretty-rfc.herokuapp.com/RFC2616#header.server)。

如果网页识别出它使用的是什么技术，例如[http://blogs.perl.org](http://blogs.perl.org)说它是由 Movable Type 提供支持，你可以查看它是否是[用 Perl 编写的](https://en.wikipedia.org/wiki/Outline_of_Perl#Perl_software)。

有时您可以从 HTML 和其他内容中的小细节中获得提示。有时他们会在注释中明确说明用于输出 HTML 的内容。有时您可以根据某些表单字段进行猜测。有时您可以从 cookie 名称和值中看出。有时您可以从它如何创建 JSON、XML、YAML 或 RSS 输出中看出。有时，生成软件会在图像和 PDF 标题中标识自己。

有诸如[nmap](http://nmap.org/book/osdetect.html)之类的工具会根据操作系统如何实现其网络协议的非常小的细节来猜测操作系统，但我不知道有这样的东西可以检测网站的实现语言。

而且，正如科林建议的那样，您可以尝试让服务器吐出一条错误消息。

但你永远无法真正知道。这就是网络作为通用通信协议的美妙之处，不管它是用什么写的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T03:53:10.723

不是一般意义上的。如果创建网站的人没有泄露有关其实施的信息，您将无法找到。

如果你能以某种方式导致错误，有时生成的错误消息会给你提供实现的线索。

# c - C中的隐写术

> ID：15651567
> 
> 赞同：7
> 
> 时间：2013-03-27T03:45:22.310
> 
> 标签：c, image-processing, pixel, steganography, ppm

尝试对 PPM 图像进行基本的隐写术。

我已经完成了基本算法。读入文件，检查头部以P6开头，得到图像宽高，像素数据。

我一共需要四个方法：ReadPPM、WritePPM、WriteMsg 和 ReadMsg。

我有 ReadImg 和 WriteImg 方法，但我卡住的地方是我的 WriteMsg 方法。这是基本的隐写术，只是将字符串的每一位写入每个字节的最后一位。假设前 8 个字节包含被隐藏字符串的大小，然后每个字节开始隐藏消息。

我的想法是创建一个庞大的数组，其中包含字符串大小的二进制代码，然后是字符串本身的二进制代码。我只是想弄清楚如何获取该数组并将其添加到图像中的每个字节。

任何帮助深表感谢。这是我当前的代码：

```
#include<stdio.h>
#include<stdlib.h>

typedef struct {
     unsigned char red,green,blue;
} PPMPixel;

typedef struct {
     int x, y;
     PPMPixel *data;
} PPMImage;

#define CREATOR "RPFELGUEIRAS"
#define RGB_COMPONENT_COLOR 255

static PPMImage *readPPM(const char *filename)
{
    char buff[16];
    PPMImage *img;
    FILE *fp;
    int c, rgb_comp_color;
    //open PPM file for reading
    fp = fopen(filename, "rb");
    if (!fp) {
         fprintf(stderr, "Unable to open file '%s'\n", filename);
         exit(1);
    }

    //read image format
    if (!fgets(buff, sizeof(buff), fp)) {
         perror(filename);
         exit(1);
    }

    //check the image format
    if (buff[0] != 'P' || buff[1] != '6') {
         fprintf(stderr, "Invalid image format (must be 'P6')\n");
         exit(1);
    }

    //alloc memory form image
    img = (PPMImage *)malloc(sizeof(PPMImage));
    if (!img) {
         fprintf(stderr, "Unable to allocate memory\n");
         exit(1);
    }

    //check for comments
    c = getc(fp);
    while (c == '#') {
    while (getc(fp) != '\n') ;
         c = getc(fp);
    }

    ungetc(c, fp);
    //read image size information
    if (fscanf(fp, "%d %d", &img->x, &img->y) != 2) {
         fprintf(stderr, "Invalid image size (error loading '%s')\n", filename);
         exit(1);
    }

    //read rgb component
    if (fscanf(fp, "%d", &rgb_comp_color) != 1) {
         fprintf(stderr, "Invalid rgb component (error loading '%s')\n", filename);
         exit(1);
    }

    //check rgb component depth
    if (rgb_comp_color!= RGB_COMPONENT_COLOR) {
         fprintf(stderr, "'%s' does not have 8-bits components\n", filename);
         exit(1);
    }

    while (fgetc(fp) != '\n') ;
    //memory allocation for pixel data
    img->data = (PPMPixel*)malloc(img->x * img->y * sizeof(PPMPixel));

    if (!img) {
         fprintf(stderr, "Unable to allocate memory\n");
         exit(1);
    }

    //read pixel data from file
    if (fread(img->data, 3 * img->x, img->y, fp) != img->y) {
         fprintf(stderr, "Error loading image '%s'\n", filename);
         exit(1);
    }

    fclose(fp);
    return img;
}

void writePPM(const char *filename, PPMImage *img)
{
    FILE *fp;
    //open file for output
    fp = fopen(filename, "wb");
    if (!fp) {
         fprintf(stderr, "Unable to open file '%s'\n", filename);
         exit(1);
    }

    //write the header file
    //image format
    fprintf(fp, "P6\n");

    //comments
    fprintf(fp, "# Created by %s\n",CREATOR);

    //image size
    fprintf(fp, "%d %d\n",img->x,img->y);

    // rgb component depth
    fprintf(fp, "%d\n",RGB_COMPONENT_COLOR);

    // pixel data
    fwrite(img->data, 3 * img->x, img->y, fp);
    fclose(fp);
}

void writeMsg(PPMImage *img, char *s)
{   

    int i;
    int len;
    len = sizeof(s);

    if (img)
    {
         j = 0;
         for (i=0; i < img->x * img->y; i++)
         {
              while(j < 8)
              {
                   if(len & 0x80)   
                   {
                        img->data[i].red= img->data[i].red | 0x01;
                   }
                   else 
                   {
                        img->data[i].red= img->data[i].red & 0xFE;
                   }

                   len=len << 1;
                   j++;

                   if (len & 0x80)  
                   {
                        img->data[i].green= img->data[i].green | 0x01;
                   }
                   else
                   {
                        img->data[i].green= img->data[i].green & 0xFE;
                   }

                   len = len << 1;
                   j++;

                   if (len & 0x80)  
                   {
                        img->data[i].blue= img->data[i].blue | 0x01;
                   }
                   else
                   {
                        img->data[i].blue= img->data[i].blue & 0xFE;
                   }
                   j++;
              }
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:02:46.323

要从一个字节中提取一个位，请执行以下操作：

`bit(i) = byte >> i & 0x1`

这会将字节的位向右移动 i 次，然后将`and`其与 0000 0001 一起发送（这样除了最低位之外的所有位都归零，最低位为 0 表示 0，1 表示 1）。

您可以对 16 位短、32 位整数、64 位长……甚至对`char`字符串的 s 执行类似操作。您可以使用 sizeof(char) 查看 char 中有多少字节。

但是，当然你会有不止一个 char （或 long 或 int 或...）来获得额外的位。要决定从哪个元素中增加一点：

如果你想要第`i`th 位并且元素是`x`位宽，那么`i%x`从元素中获取位`[i/x]`

现在您有了这个位，要将其放在一个字节（或 int 或 char 或...）内，请执行以下操作：

隐写术字节 = 原始字节&(~0x1) + 位

这意味着，你取数字...... 0000 0001，反转它的位，所以它是...... 1111 1110，`and`它与原始字节一起保存，所以它的所有位都保留下来，除了最低的，然后只需添加你的位。

# javascript - 标记它提交 id 而不是值或标签

> ID：15651570
> 
> 赞同：1
> 
> 时间：2013-03-27T03:46:00.067
> 
> 标签：javascript, jquery, tag-it

使用这个插件 [https://github.com/aehlke/tag-](https://github.com/aehlke/tag-it) 顺便说一句，它非常酷。

问题：

```
 <input type="hidden" name="tags" id="mySingleField" value="Apple, Orange" disabled="true">
        Tags:<br>
        <ul id="mytags"></ul>

<script type="text/javascript">
    $(document).ready(function () {
        $("#mytags").tagit({
            singleField: true,
            singleFieldNode: $('#mySingleField'),
            allowSpaces: true,
            minLength: 2,
            removeConfirmation: true,
            tagSource: function (request, response) {
                //console.log("1");
                $.ajax({
                    url: "../City/GetList",
                    data: { term: request.term },
                    dataType: "json",
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                label: item.label + " (" + item.id + ")",
                                value: item.value
                            }
                        }));
                    }
                });
            }
        });
    });

</script> 
```

当标记它选择值时，它会将值添加到值 attr 中 CSV 格式的隐藏字段中。我想让它做ID而不是有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:06:19.477

这里有几件事。您可以通过将参数设置为下划线来设置分隔符而不是 CSV：

```
$("#mytags").tagit({
  ...
  singleFieldDelimiter: '_',
  ... 
```

然后你可以在第 197 行修改 tag-it.js 文件以使用 ID 属性。

改变：

```
var tags = node.val().split(this.options.singleFieldDelimiter); 
```

成为

```
var tags = node.attr("id").split(this.options.singleFieldDelimiter); 
```

因此，假设您将隐藏字段修改为：

```
<input type="hidden" name="tags" class="mySingleField" id="Apple_Orange_Banana" value="Apple_Orange" disabled="true"> 
```

您可以这样修改 javascript 以获得所需的输出：

```
 $(document).ready(function () {
        $("#mytags").tagit({
            singleField: true,
            singleFieldNode: $('.mySingleField'),
            singleFieldDelimiter: '_',
            allowSpaces: true,
            minLength: 2,
            removeConfirmation: true,
            tagSource: function (request, response) {
                //console.log("1");
                $.ajax({
                    url: "../City/GetList",
                    data: { term: request.term },
                    dataType: "json",
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                label: item.label + " (" + item.id + ")",
                                value: item.value
                            }
                        }));
                    }
                });
            }
        });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:04:36.613

更改 tag-it.js 文件

第 264 行的评论

```
// that.createTag(that._cleanedInput());

// The autocomplete doesn't close automatically when TAB is pressed.
// So let's ensure that it closes.
// that.tagInput.autocomplete('close'); 
```

285号线附近

```
var autocompleteOptions = {
    select: function(event, ui) {
        that.createTag(ui.item); 
```

创建一个新函数

```
assignedTagsData: function(){
    // Only to be used when singleField option is not seleted
    var tags = [];
    this.tagList.children('.tagit-choice').each(function() {
        tags.push($(this).data('tag_item_data') );
    });
    return tags;
}

that.createTag(ui.item); 
```

创建标签

```
var tag = $('<li></li>')
    .data('tag_item_data',item) //add this line
    .addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all')
    .addClass(additionalClass)
    .append(label); 
```

# git - GitHub 团队使用情况

> ID：15651576
> 
> 赞同：1
> 
> 时间：2013-03-27T03:47:01.823
> 
> 标签：git, github, merge

嗨，我刚刚完成了 GitHub [Learn-in-15 minutes 教程](http://try.github.com/levels/1/challenges/1)。GitHub 看起来非常好，而且很容易上手。我不明白的一件事是在团队环境中与可能编辑相同文件的人一起工作？

据我了解

*   将有一个`origin`包含应用程序最新文件的远程 repo ()。
*   每位队员拉`origin`师傅
*   每个团队成员都可以创建他们自己本地的分支编辑文件，提交分支并与他们的本地合并`master`。
*   团队成员现在可以将其推`master`送到`origin/master`.

现在如果 2 个团队成员不编辑同一个文件会发生什么。

起源V1

MemberA 创建了 V2，现在推送 Origin V2

MemberB 仍然有 V1，但已经制作了 V3 并推送了它，MemberA 推送的更改不会回滚原来的 V1，因为

或者这就是舞台和将文件添加到舞台以进行推送的地方？

IE 它不会用你的推送“替换”所有文件.. 但只有那些你添加到你的阶段/提交的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:50:03.287

如果您尝试推送到您的遥控器（`origin`在您的示例中）并且该遥控器上的文件在您尝试推送之前已更新，那么您的推送将被拒绝。您必须`pull`先从远程操作并解决任何冲突，然后才能推送。

否则，如果没有冲突，文件只会在推送到`master`. 请记住，这里有一个完整的过程。一个人不会简单地推到主人:-)（或合并）。对不起模因，但我不得不这样做。

![一个不简单的合并成主人](../Images/b20f056538353d57d7264fac09fab324.png)

最简单的情况是，如果遥控器上的文件在您有机会推送之前已更新，那么您将无法推送。如果您更改的文件在遥控器上没有更改，那么您的推送将成功。

基本流程需要经常拉入您的分支以使其与 master 保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:44:26.737

Git 的美妙之处在于它不会规定您的工作流程——您从产品所有者的想法到开发人员的手指、测试和生产所采取的步骤。相反，它只是识别跟踪事物的方法。因此，您的过程可以是您想要的。有些人觉得这种开放性太局限了——你如何通过空白页？

[Git-Flow](http://nvie.com/posts/a-successful-git-branching-model/)是分支的命名约定以及分支和合并方法，可跟踪各个阶段的开发过程。它非常擅长提供团队工作所需的结构。它通常面向特定的定期发布，因此对某些人来说可能太多了。

[（这里](https://github.com/nvie/gitflow/wiki/Installation)还有一个 Git-Flow 的 git 插件。）

如果 Git-Flow 太多，您可能希望查看[GitHub Flow](http://scottchacon.com/2011/08/31/github-flow.html)，其中用户仅从 master 分支、构建功能、测试并合并回 master。

归根结底，这些只是处理流程的惯例，您可以根据他们与团队文化的匹配程度来选择全部或不采取任何措施。

# ubuntu - rvm init.d 脚本

> ID：15651580
> 
> 赞同：0
> 
> 时间：2013-03-27T03:47:23.107
> 
> 标签：ubuntu, rvm, init.d

我目前有 ruby​​ 1.8.7 设置与 rvm。目前一切都在使用 rvmsudo，但是我需要一个可以运行以下命令的 init.d 脚本： rvmsudo /var/rails/sandbox/script/server -p 8080 -e sandbox

不幸的是，rvmsudo 部分使其变得困难，因为 root 无法识别 rvmsudo。有人对我如何编写这个初始化脚本有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:21:27.930

使用它的完整路径：`/path/to/rvm/bin/rvmsudo`

# linux - 从大型文本文件中提取和复制行和列

> ID：15651585
> 
> 赞同：0
> 
> 时间：2013-03-27T03:48:45.087
> 
> 标签：linux

除了我之前的问题 - 如何从大型文本文件中提取列格式的值。另外，如果我想提取特定列的值。文本文件看起来像附加的图像。

我想提取文本中给出的 RESOL 和 FSC 值，以在 Numbers 或 EXCEL 中绘制它。

更笼统地说 - 如果我确实想稍后将值提取到 Part_FSC 和 CC 应该怎么做。

谢谢

文本文件：

```
 Opening MRC/CCP4 file for WRITE...
 File      : map2.mrc
 NX, NY, NZ:    600   600   600
 MODE      : real

 SYMMETRY REDUNDANCY:    1

 Fraction_mask, Fraction_particle =    0.1193    0.0111

C                                                 sqrt       sqrt
C  NO.  RESOL  RING RAD   FSPR    FSC  Part_FSC  Part_SSNR   Rec_SSNR       CC  
C   2  952.50    0.0017   0.09  1.000     0.000   400.0145    479.40   0.1222   
C   3  476.25    0.0033   0.19  1.000     0.000   159.3959    159.98   0.1586   
C   4  317.50    0.0050   0.92  0.999     0.000    48.2248     43.27   0.0155   
C   5  238.12    0.0067   0.42  1.000     0.000    88.3074     76.69   0.2637   
C   6  190.50    0.0083   0.48  0.999     0.000    64.0162     56.25   0.4148   
C   7  158.75    0.0100   1.41  0.992     0.000    17.1695     15.64   0.1282   
C   8  136.07    0.0117   5.56  0.954     0.000     6.8244      6.47   0.0171   
C   9  119.06    0.0133   1.49  0.993     0.000    16.1918     16.42   0.2729   
C  10  105.83    0.0150   1.68  0.990     0.000    12.8313     13.83   0.3729   
C  11   95.25    0.0167   3.55  0.969     0.000     6.8012      7.95   0.2624   
C  12   86.59    0.0183  16.00  0.830     0.000     2.5273      3.13   0.0826 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:00:50.110

未经测试，但应该可以工作

```
awk '$1 == "C"{printf "%s\t%s\n", $3,$6}' <filename> 
```

# c - 链表，为什么我得到不兼容的类型和不完整的结构错误

> ID：15651594
> 
> 赞同：0
> 
> 时间：2013-03-27T03:50:07.237
> 
> 标签：c, pointers, linked-list

假设我有 2 个结构。

```
 typedef struct name{
    char*name;
    struct test *next;
    }name_t;

    typedef struct test {
    int grade;
    int studentNumber;
    struct test *next;
    }test_t; 
```

所以标记有一个指向测试的指针我将如何创建链接列表？

我试过这个

```
name_t *marker1 = malloc(sizeof(name_t));
// added name from another function
test_t *temp= malloc(sizeof(test_t));
// add the grade and student number from another function
if(marker1->next==NULL)
marker1->next=temp; 
```

但它给了我错误

我将如何解决这个问题？这是我第一次编码链表，所以任何帮助将不胜感激

编辑：我也将以下内容变成了一个函数

```
void test(name_t* marker1,int data)
{
        test_t *temp= malloc(sizeof(test_t));
        test_t *location=NULL;
        temp->grade=data;
        temp->next=NULL;
        location=marker1->next;
        if(location==NULL)
        {
        //  printf("%i \n",temp->grade);
            marker1->next=temp;
        }
        else
        {
            while(location!=NULL)
            {
                printf("%i \n",location->grade);
                printf("%p \n",location->next);
                location=location->next;
            }
            location=temp;
        }
} 
```

由于某种原因，它似乎没有通过列表。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:52:42.780

`struct test *next;`指一个`tag`名字`test`。

```
typedef struct THIS_IS_WHERE_TAG_NAME_SHOULD_BE {
  ...
} test; 
```

而且您在任何地方都没有这样的标签名称。添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:11:26.787

您的程序的第二个块中有错误。你写

```
if(marker1==NULL)
marker1->next=temp; 
```

在此之前你写过

```
name *marker1 = malloc(sizeof(name)); 
```

只有当 malloc 无法为您分配任何内存并返回 NULL 时，marker1 才会为 NULL。当 marker1 为 NULL 时，您无法访问 marker1->next，这会导致分段错误。当您询问超出限制的内存量并且您编写的 if 语句将不正确时，Malloc 返回 NULL。但是应该避免 if 块内的语句。当指针为 NULL 时，在尝试访问数据的地方编写代码是错误的做法。

# facebook - 如何从 Facebook 相册中获取所有照片？

> ID：15651601
> 
> 赞同：0
> 
> 时间：2013-03-27T03:51:11.260
> 
> 标签：facebook

我知道这个话题很热门，但我的问题是编码中的“一半问题”。

我有一个包含 266 张照片的 Facebook 相册。我使用 jquery 和 FQL 请求相册 ID，然后从相册中获取所有照片 ID 及其 src。代码运行良好。但我注意到我只能获得 102 张照片或 266 张照片。

我怎样才能完全获取 facebook 相册中的所有照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:29:07.113

嗯...我在graph.facebook.com 中进行了一些尝试后找到了答案 FQL 允许我们使用“限制”数字。看起来 facebook 默认将限制数设置为 100。这意味着，如果我们没有在 FQL 中设置任何限制数，它只会在 FQL 中获得 100 条记录。

我在 FQL 中添加“限制 1000”并再次获取照片，它正确显示了 266 张照片。

# java - Oracle AQ 性能调优

> ID：15651602
> 
> 赞同：2
> 
> 时间：2013-03-27T03:51:14.307
> 
> 标签：java, database, oracle, jms, oracle-aq

我正在使用带有 java JMS API 的高级队列 (AQ) 的 oracle 数据库 [11.2]。我当前的 oracle 设置是默认设置，没有额外的调整参数。高层架构：

***数据库将消息排入持久队列（按优先级排序）***

```
EXEC DBMS_AQADM.CREATE_QUEUE_TABLE (queue_table => 'order_queue_table', queue_payload_type => 'aqadm.order_message_t', sort_list=>'PRIORITY,ENQ_TIME'); 
EXEC DBMS_AQADM.CREATE_QUEUE (queue_name => 'order_queue', queue_table => 'order_queue_table'); 
EXEC DBMS_AQADM.START_QUEUE (queue_name => 'order_queue'); 
```

***Java JMS 消费者是具有 3 个并发线程的出列消息。***

一切都很好！和快乐的场景，只要队列中的消息@10K。一旦队列中的消息增加**一倍**或三倍，***出队***性能就会显着下降！！！。

我按照以下链接 [http://docs.oracle.com/cd/B28359_01/server.111/b28420/perform.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28420/perform.htm)

关于 IO 和 AQ 的性能调整有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T14:43:26.447

我看到这是旧的，但我会试一试。它在队列中的少量消息运行良好但在大量消息的情况下运行不佳这一事实使我相信问题可能出在底层队列表和 IOT 的优化器统计信息中。

从[11gR2 Oracle 高级队列用户指南](http://docs.oracle.com/cd/E11882_01/server.112/e11013/perform.htm#sthref434)：

> 确保正在收集统计信息，以便选择用于检索消息的最佳查询计划。默认情况下，队列表被锁定，无法自动收集统计信息。推荐的用途是收集具有代表性的队列消息负载的统计数据并锁定它们。

还有其他几种可能性，包括调整（或不调整）`AQ_TM_PROCESSES`和使用 ASSM，但如果没有更多关于您的数据库环境的信息，就很难提出修复建议，甚至很难知道这是否是问题所在。

# json - Http获取json成字符串

> ID：15651604
> 
> 赞同：5
> 
> 时间：2013-03-27T03:51:16.040
> 
> 标签：json, delphi, delphi-7, indy, idhttp

我正在尝试通过 HTTP GET 方法获取对字符串的 json 响应，但我得到的只是：![在此处输入图像描述](../Images/539991dbe0562ba423b22fb23cd1088e.png)

我正在使用这样的代码：

```
memo1.Text:= idhttp1.Get('http://blabla.com/bla.php'); 
```

它返回 json 数据。我需要得到对 memo1 的 json 响应。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T17:38:04.527

我找到了解决方案。该代码完美运行。

```
function GetURLAsString(aURL: string): string;
var
  lHTTP: TIdHTTP;
  lStream: TStringStream;
begin
  lHTTP := TIdHTTP.Create(nil);
  lStream := TStringStream.Create(Result);
  try
    lHTTP.Get(aURL, lStream);
    lStream.Position := 0;
    Result := lStream.ReadString(lStream.Size);
  finally
    FreeAndNil(lHTTP);
    FreeAndNil(lStream);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:25:17.150

尝试更新版本的 Indy，Indy 仍然支持非 Unicode Delphi。

Indy TIdHTTP Get 应该自动将 UTF-8 转换为 Ansi（有限制）：

> 在内部，TIdHTTP.Get() 将服务器的 UTF-8 数据解码为 Unicode，然后在 2009 之前的版本中将其作为 AnsiString 返回时将其转换为 Ansi。AnsiString 使用操作系统的默认 Ansi 代码页，所以是的，如果操作系统的当前语言不支持服务器使用的 Unicode 字符，则可能会丢失数据。 [http://forums2.atozed.com/viewtopic.php?f=7&t=3011](http://forums2.atozed.com/viewtopic.php?f=7&t=3011)

# php - 锂插入实体数组到模型对象属性中

> ID：15651608
> 
> 赞同：1
> 
> 时间：2013-03-27T03:51:56.797
> 
> 标签：php, lithium

以下编码示例不起作用。

```
$joiner = new Entity();
$joiner->name = $post['name'];
$joiner->address = $post['address'];
$meeting = Meeting::first($_id);
$meeting->joiner[] = $joiner;
$meeting->save(); 
```

我希望每次表单发布的时候都能成功。应将新的加入者实体推入会议对象的“加入者”属性中。

如何纠正它？并感谢所有帮助。

**更新**

现在我已经像这样改变了它。它工作正常，但仍然不是很好。

```
$joiner = new Entity();
$joiner->name = $post['name'];
$joiner->address = $post['address'];
$meeting = Meeting::first($_id);

if(empty($meeting->joiner)){
    $joiners = array($joiner);
}
else{
    $joiners = array();
    foreach($meeting->joiner as $one){
        $joiners[] = $one;
    }
    $joiners[] = $joiner;
}

$meeting->joiner = $joiners;
$meeting->save(); 
```

# visual-studio-2010 - 在 Visual Studio 中查看数组的内容（汇编语言）

> ID：15651624
> 
> 赞同：2
> 
> 时间：2013-03-27T03:53:31.093
> 
> 标签：visual-studio-2010, x86, masm

在Visual Studio中，调试汇编语言代码时是否可以查看数组的内容？我已经知道如何将数组添加`num`到“观察”窗口，但我仍在试图弄清楚如何观察数组的内容。可以将`sword`数组添加到 Visual Studio 中的“观察”窗口，但是否可以在单步执行程序时查看数组的内容？

```
.686p
.model flat,stdcall
.stack 2048
.data
num   sword  1000,-1000,2000,-2000 ;I want to keep track of each value in this array while debugging.
;Is it possible to display the contents of all indices of num while debugging?

ExitProcess proto, exitcode:dword
.code

start:![Lots of ?'s are showing up here instead of the actual value of the array][1]

mov ax, num;
mov ax, [num+1];

invoke  ExitProcess, 0
end start 
```

![在此处输入图像描述](../Images/8637c4b927f5e49adcca201ac9f314f9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:58:47.233

您可以显示阵列占用的内存。

*   转到“auto”、“locals”等旁边的“memory1”选项卡
*   输入要检查的符号名称，或选择源中的变量名称并将其拖到`Address`内存窗口的字段中。这就是我在调试 C 代码时使用的方式，当我第一次使用程序集对其进行测试时，看来我需要“以 C 风格”键入它，即输入`&num`以显示`num`符号的地址。
*   您可以通过右键单击窗口来自定义要显示的字长（每个字 1 到 8 个字节），您可以在窗口的工具栏选项中选择显示的列数

# ant - 如何从目录中获取文件并一次并行执行 5 个文件

> ID：15651625
> 
> 赞同：1
> 
> 时间：2013-03-27T03:54:01.553
> 
> 标签：ant, ant-contrib

我正在使用 ant 来获取目录中的所有文件并仅并行执行 5 个文件，然后再执行 5 个文件。已经执行的文件不应再次执行。

```
<target name="ParallelTest" description="Checking the parallelTest">
        <for param="file" >
            <path> 
                <fileset dir="C:/RCBuild3/ofs/bin/prd1">
                        <include name="*.xml"/> 
                </fileset>
            </path>
            <sequential>
                <antcall target="parallelexecutoin">
                    <param name="productfile" value="@{file}"/>
                </antcall>
            </sequential>
        </for> 

    </target>
    <target name="parallelexecutoin">
        <exec dir="C:/RCBuild3/ofs/bin/" executable="cmd">
            <arg value="/c"/>
            <arg value="productupload.bat"/>
            <arg value="-fileName"/>
            <arg value="${productfile}"/>
        </exec>
    </target> 
```

上面的代码按顺序执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:11:35.833

先上代码：

```
<fileset dir="C:/RCBuild3/ofs/bin/prd1" id="src.files">
    <include name="*.xml"/> 
</fileset>

<pathconvert pathsep="," property="file.list" refid="src.files"/>

<for list="${file.list}" delimiter="," param="file" parallel="true" threadCount="5">
    <sequential>
        <antcall target="parallelexecutoin">
            <param name="productfile" value="@{file}"/>
        </antcall>
    </sequential>
</for> 
```

解释：

首先，您`fileset`为所有需要处理的文件准备一个。

然后，使用`pathconvert`将文件集转换为属性“file.list”，例如：`filename1.xml,filename2.xml,filename3.xml`.

`for`任务的 java 代码（隐藏在 Ant 文件后面）将使用逗号将“file.list”拆分为`List`，并循环遍历`List`. 对于 中的每个元素`List`，循环体（`sequential`部分）将运行。

`parallel`告诉`for`任务使用多个线程运行循环体，并且`threadcount`是可以同时运行的最大线程数。

因此，使用`parallel = true`and `threadcount = 5`，就像您所描述的那样：一次 5 个文件。

# node.js - nodejs expressjs result.end() 如果从回调中调用，则不发送 POST 请求的结果

> ID：15651627
> 
> 赞同：0
> 
> 时间：2013-03-27T03:54:10.773
> 
> 标签：node.js, asynchronous, express

我有一个快速应用程序可以处理如下所示的发布请求（coffeescript）

```
#Handle CSV Uploads
app.post '/upload', (req, res) ->
  res.setHeader 'Content-Type', 'text/json'

  if !req.session.user?
    res.json
      success: false
    return

  if !req.files.files? || !req.files.files.length
    res.json
      success: false
      message: 'No Files Uploaded'
    return

  file = req.files.files[0]

  if file.mime is not 'text/csv'
    res.json
      success: false
      message: 'Invalid Upload Type'
    return

  #Find IDs of all shippers referenced in this csv
  client_shippers_ids = []
  chainer = new Sequelize.Utils.QueryChainer

  csv()
    .from.stream(fs.createReadStream(file.path))
    .to.path('/tmp/tempcsv.out')
    .transform((row) ->

      return row

    ).on('record', (row, index)->

      chainer.add DB.Order.create
        po_num:      Math.random() + ''
        description: Math.random() + ''
        requested_by: ''
        received:    false
        status:      'Purchase Order Received'

    ).on('end', (count)->
      console.log 'end'
      console.log count
      chainer.run().success () ->
        console.log 'chainer fin'
        res.json #<----- This part does not send
          success: true
          message: 'complete'
    ) 
```

特别是这个电话

```
res.json #<----- This part does not send
              success: true
              message: 'complete' 
```

不返回任何东西。在此之前是否调用了 res.end() ？

# html - 幻灯片放映的样式问题

> ID：15651630
> 
> 赞同：0
> 
> 时间：2013-03-27T03:54:25.637
> 
> 标签：html, css, coding-style

嘿伙计们，所以我在我构建的 jquery 滑块上设计了一个内容主体.....我的问题是我需要一些图片才能`float: left`让它们相互对齐，但是父级有一个`margin: -6em 0 0 0;`，如果我添加`float:left`它就可以了在父 div 之外......HTML：

```
 <div id="Content">
        <div class="main_Body">
            <div class="top-halfCont">
                <div class="online_training">
                    <div class="training_image">
                        <img src="images/onlinetraining_home_03.png" width="75" height="75" />
                    </div><!-- .training_image -->
                </div><!-- .online_training -->
                <div class="background_check">
                    <div class="background_image">
                        <img src="images/background_check_home_03.png" width="75" height="75" />
                    </div><!-- .background_image -->
                </div><!-- .background_check -->
                <div class="uninsured_alert">
                    <div class="uninsured_alert_image">
                        <img src="images/unisuredalert_system_03.png" width="75" height="75" />
                    </div><!-- .uninsured_alert_image -->
                </div><!-- .uninsured_alert -->
            </div><!-- .top-halfCont -->
        </div><!-- .main_Body -->
    </div><!-- #Content --> 
```

风格：

```
/* main content #Content */
#Content {
    display:block;
    max-width:1200px;
    margin:0 auto;  
    background: white;
    position: relative;
    box-shadow: 5px 0px 13px #888888;
}
.main_Body {
    display:block;  
    margin: -6em 0 0 0;
    padding: 1em;
}
.online_training {
    display:block;
    width:200px;    
}
.training_image {
    width:75px;
    height:75px;
    margin:0 auto;  
}
.background_check {
    display:block;
    width:200px;
}
.background_image {
    width:75px;
    height:75px;
    margin:0 auto;  
}
.uninsured_alert {
    display:block;
    width:200px;
}
.uninsured_alert_image {
    width:75px;
    height:75px;
    margin:0 auto;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:56:49.640

包括以下更改

```
.top-halfCont{
    margin:6em 0 0 0;
}
.main_Body {
    display:block;  
    margin: -6em 0 0 0;
    padding: 1em;
    overflow:auto;
} 
```

# ios - 检测精灵像素的不透明度

> ID：15651634
> 
> 赞同：1
> 
> 时间：2013-03-27T03:54:40.993
> 
> 标签：ios, opengl-es, cocos2d-iphone, textures, sprite

我正在使用 cocos2d 开发儿童游戏，其中一个阶段涉及用户清除覆盖盒子的沙/雪。因此，我正在根据我在这里看到的内容实现一个橡皮擦工具：http: [//muhammedalee.wordpress.com/2012/09/21/erasing-pixels-from-ccrendertexture/](http://muhammedalee.wordpress.com/2012/09/21/erasing-pixels-from-ccrendertexture/)。基本上，我有一个 pileSprite （一堆沙子），我最初调用它：

```
[renderTexture begin];
[pileSprite visit];
[renderTexture end]; 
```

以便将其渲染到renderTexture。然后，当橡皮擦被拖到精灵上时，我会：

```
[renderTexture begin];
[eraserSprite visit];
[renderTexture end]; 
```

我想知道整个 pileSprite 何时被擦除（不透明度 = 0）以触发任务的完成。我可能会在每个 ccTouchEnded 调用这个检查方法。我应该检查 renderTexture 的 UIImage 中的所有像素吗？有没有办法遍历精灵的像素并检查每个像素是否透明？非常感谢任何帮助。我研究过这个：[如何从 UIImage (Cocoa Touch) 或 CGImage (Core Graphics) 获取像素数据？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)也一样，但真的不知道要为 count、xx、yy 设置什么值。

# android - 编写我自己的 OBJ 解析器来加载 VBO 中的数据，如何重新排序数据以匹配单个索引列表？

> ID：15651638
> 
> 赞同：0
> 
> 时间：2013-03-27T03:55:28.343
> 
> 标签：android, parsing, opengl-es-2.0, vbo, wavefront

我一直在尝试将我之前编写的使用显示列表的 OBJ 解析器转换为使用 VBO，并试图看看我是否可以在没有任何外部帮助的情况下自己解决这个问题，但现在我想我一直在看代码太长，找不到任何错误。

这是一个 Android 应用程序，通过 OpenGLES 2.0，我最终在屏幕上出现了一些三角形，但根本不在正确的位置。我有一种感觉，我尝试根据单个索引列表获取每个面的所有元素是不正确的，我最终只是把所有东西都乱七八糟地扔掉了，但我找不到我的错误。

本质上，由于 OBJ 格式为顶点、纹理坐标和法线向量提供了单独的索引，因此我最终得到了 3 个彼此完全乱序的数据列表，但 VBO 基于单个引用每个部分索引列表。

这是我的代码，以帮助某人帮助我：

OBJ工具包：

```
public class OBJToolkit {
    public static Mesh loadOBJ(String modelLocation) throws FileNotFoundException, IOException
    {
        Log.d("OBJToolkit", "Location searched for model: " + modelLocation);

        ArrayList<Float> allVertices = new ArrayList<Float>();
        ArrayList<Float> allTextureCoors = new ArrayList<Float>();
        ArrayList<Float> allNormals = new ArrayList<Float>();

        ArrayList<Face> faces = new ArrayList<Face>();

        BufferedReader reader = new BufferedReader(new FileReader(new File(modelLocation)));

        Mesh mesh = new Mesh();

        Log.d("OBJToolkit", "About to read the contents of the model");
        while (reader.ready())
        {
            String line = reader.readLine();

            if (line == null)
                break;

            if (line.startsWith("v "))
            {
                allVertices.add(Float.valueOf(line.split(" ")[1]));
                allVertices.add(Float.valueOf(line.split(" ")[2]));
                allVertices.add(Float.valueOf(line.split(" ")[3]));
            }

            if (line.startsWith("vt "))
            {
                allTextureCoors.add(Float.valueOf(line.split(" ")[1]));
                allTextureCoors.add(Float.valueOf(line.split(" ")[2]));
            }

            if (line.startsWith("vn "))
            {
                allNormals.add(Float.valueOf(line.split(" ")[1]));
                allNormals.add(Float.valueOf(line.split(" ")[2]));
                allNormals.add(Float.valueOf(line.split(" ")[3]));
            }

            if (line.startsWith("f "))
            {
                Face f = new Face();
                String[] lineArray = line.split(" ");

                for (int index = 1; index < lineArray.length; index++)
                {
                    String[] valueArray = lineArray[index].split("/");
                    f.addVertexIndex(Integer.valueOf(valueArray[0]));
                    if (valueArray.length > 1)
                        f.addTextureIndex(Integer.valueOf(valueArray[1]));
                    if (valueArray.length > 2)
                        f.addNormalIndex(Integer.valueOf(valueArray[2]));
                }
                faces.add(f);
            }
        }
        reader.close();

        ArrayList<Float> verticesInOrder = new ArrayList<Float>();
        ArrayList<Integer> indicesInOrder = new ArrayList<Integer>();
        ArrayList<Float> textureCoorsInOrder = new ArrayList<Float>();
        ArrayList<Float> normalsInOrder = new ArrayList<Float>();

        int counter = 0;
        Log.d("OBJToolkit", "About to reorganize each point of data");
        for (Face f : faces)
        {
            for (int value : f.vertexIndices)
            {
                verticesInOrder.add(allVertices.get(value));
            }

            for (int value : f.textureIndices)
            {
                textureCoorsInOrder.add(allTextureCoors.get(value));
            }

            for (int value : f.normalIndices)
            {
                normalsInOrder.add(allNormals.get(value));
            }
            indicesInOrder.add(counter);
            counter++;
        }

        Log.d("OBJToolkit", "Vertices");
        printFloatArrayList(verticesInOrder);
        Log.d("OBJToolkit", "Indices");
        printIntegerArrayList(indicesInOrder);
        Log.d("OBJToolkit", "Texture Coordinates");
        printFloatArrayList(textureCoorsInOrder);
        Log.d("OBJToolkit", "Normals");
        printFloatArrayList(normalsInOrder);

        Log.d("OBJToolkit", "About to create the VBOs");
        mesh.createBuffers(floatListToFloatArray(verticesInOrder), integerListToShortArray(indicesInOrder), null, floatListToFloatArray(textureCoorsInOrder));
        return mesh;
    }

    public static void printFloatArrayList(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += value + ", ";
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static void printIntegerArrayList(ArrayList<Integer> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += value + ", ";
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static float[] floatListToFloatArray(ArrayList<Float> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Float");
        float[] returnArray = new float[list.size()];
        int counter = 0;
        for (float i : list)
        {
            returnArray[counter] = i;
            counter++;
        }
        return returnArray;
    }

    public static short[] integerListToShortArray(ArrayList<Integer> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Integer");
        short[] returnArray = new short[list.size()];
        int counter = 0;
        for (int i : list)
        {
            returnArray[counter] = (short)i;
            counter++;
        }
        return returnArray;
    }
} 
```

网格类：

```
public class Mesh { 
    Bitmap bitmap = null;

    private FloatBuffer verticesBuffer;
    private ShortBuffer indicesBuffer;
    private int numOfIndices = -1;
    private float[] rgba = new float[] {1.0f, 1.0f, 1.0f, 1.0f};
    private FloatBuffer colorBuffer;
    private FloatBuffer mTextureBuffer;
    private int mTextureId = -1;
    private Bitmap mBitmap;
    private boolean mShouldLoadTexture = false;

    public float x = 0, y = 0, z = 0, rx = 0, ry = 0, rz = 0;

    public Mesh() {

    }

    public void draw(GL10 gl)
    {
        //Log.d("Mesh", "About to render mesh");
        gl.glFrontFace(GL10.GL_CCW);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glCullFace(GL10.GL_BACK);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer);
        gl.glColor4f(rgba[0], rgba[1], rgba[2], rgba[3]);
        if (colorBuffer != null)
        {
            gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
            gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);
        }

        if (mShouldLoadTexture)
        {
            loadGLTexture(gl);
            mShouldLoadTexture = false;
        }

        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glEnable(GL10.GL_TEXTURE_2D);
            gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
            gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTextureBuffer);
            gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        }

        gl.glTranslatef(x, y, z);
        gl.glRotatef(rx, 1, 0, 0);
        gl.glRotatef(ry, 0, 1, 0);
        gl.glRotatef(rz, 0, 0, 1);
        gl.glDrawElements(GL10.GL_TRIANGLES, numOfIndices, GL10.GL_UNSIGNED_SHORT, indicesBuffer);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        }
        gl.glDisable(GL10.GL_CULL_FACE);
    }

    public void setTexture(Bitmap bitmap) {
        this.bitmap = bitmap;
    }

    public void createBuffers(float[] vertices, short[] indices, float[] colors, float[] textureCoords)
    {
        Log.d("MeshCreateBuffers", "Vertices: " + floatArrayToString(vertices));
        setVertices(vertices);
        Log.d("MeshCreateBuffers", "Indices: " + shortArrayToString(indices));
        setIndices(indices);
        if (colors != null)
            setColors(colors);
        setTextureCoordinates(textureCoords);
        Log.d("MeshCreateBuffers", "Texture Coors: " + floatArrayToString(textureCoords));
    }

    public String floatArrayToString(float[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += array[i];
        }
        return returnString;
    }

    public String shortArrayToString(short[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += array[i];
        }
        return returnString;
    }

    protected void setVertices(float[] vertices)
    {
        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        verticesBuffer = vbb.asFloatBuffer();
        verticesBuffer.put(vertices);
        verticesBuffer.position(0);
    }

    protected void setIndices(short[] indices)
    {
        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indicesBuffer = ibb.asShortBuffer();
        indicesBuffer.put(indices);
        indicesBuffer.position(0);
        numOfIndices = indices.length;
    }

    protected void setColor(float red, float green, float blue, float alpha)
    {
        rgba[0] = red;
        rgba[1] = green;
        rgba[2] = blue;
        rgba[3] = alpha;
    }

    protected void setColors(float[] colors)
    {
        ByteBuffer cbb = ByteBuffer.allocateDirect(colors.length * 4);
        cbb.order(ByteOrder.nativeOrder());
        colorBuffer = cbb.asFloatBuffer();
        colorBuffer.put(colors);
        colorBuffer.position(0);
    }

    protected void setTextureCoordinates(float[] textureCoords)
    {
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(textureCoords.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mTextureBuffer = byteBuf.asFloatBuffer();
        mTextureBuffer.put(textureCoords);
        mTextureBuffer.position(0);
    }

    public void loadBitmap(Bitmap bitmap)
    {
        this.mBitmap = bitmap;
        mShouldLoadTexture = true;
    }

    private void loadGLTexture(GL10 gl)
    {
        int[] textures = new int[1];
        gl.glGenTextures(1, textures, 0);
        mTextureId = textures[0];
        gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, mBitmap, 0);
    }
} 
```

我是否在做一些我无法发现的明显错误或过于复杂的事情？

我感谢任何愿意提供意见的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:45:54.263

在大多数情况下，我终于让它工作了。我没有将每个顶点的相关数据保存得足够好，所以在需要渲染的时候，一切都乱了套。到目前为止，解析器支持顶点、法线和纹理坐标，尽管网格的细节较为精细，但它会达到最大堆大小并陷入非常长的垃圾收集循环中。我在 Blender 中创建了 suzanne 猴头，用平滑对其进行了细分，然后将其导出为 OBJ。它确实加载了，但花了大约 20 分钟。

这是源代码，我相信它会对某人有所帮助，因为我无法找到读取 OBJ 文件并以 VBO 的形式将其发送到显卡的代码，法线和纹理坐标正常工作：

```
public class OBJToolkit {
    private static ArrayList<String> parseOBJ(String modelLocation) throws IOException
    {
        BufferedReader reader = new BufferedReader(new FileReader(new File(modelLocation)));
        ArrayList<String> lines = new ArrayList<String>();
        while(reader.ready())
        {
            lines.add(reader.readLine());
        }
        reader.close();
        reader = null;
        return lines;
    }

    public static Mesh loadOBJ(String modelLocation) throws FileNotFoundException, IOException
    {
        Log.d("OBJToolkit", "Location searched for model: " + modelLocation);

        ArrayList<Vector3f> allVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> allTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> allNormals = new ArrayList<Vector3f>();

        ArrayList<Face> faces = new ArrayList<Face>();

        Mesh mesh = new Mesh();

        ArrayList<String> lines = parseOBJ(modelLocation);

        Log.d("OBJToolkit", "About to read the contents of the model");
        for (String line : lines)
        {
            if (line == null)
                break;

            if (line.startsWith("v "))
            {
                allVertices.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("vt "))
            {
                allTextureCoords.add(new Vector2f(Float.valueOf(line.split(" ")[1]),Float.valueOf(line.split(" ")[2])));
            }

            if (line.startsWith("vn "))
            {
                allNormals.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("f "))
            {
                //Log.d("OBJToolkit", line);
                Face f = new Face();
                String[] faceVertexArray = line.split(" ");

                for (int index = 1; index < faceVertexArray.length; index++)
                {
                    String[] valueArray = faceVertexArray[index].split("/");

                    if (allTextureCoords.size() > 0)
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), allTextureCoords.get(Integer.valueOf(valueArray[1]) - 1)));
                    else
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), new Vector2f(0, 0)));
                }
                faces.add(f);
            }
        }

        Log.d("OBJToolkit", "Number of vertices: " + allVertices.size());
        Log.d("OBJToolkit", "Number of normals: " + allNormals.size());
        Log.d("OBJToolkit", "Number of texture coords: " + allTextureCoords.size());

        lines = null;
        allVertices = null;
        allNormals = null;
        allTextureCoords = null;

        ArrayList<Vector3f> VBOVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> VBOTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> VBONormals = new ArrayList<Vector3f>();
        ArrayList<Integer> VBOIndices = new ArrayList<Integer>();

        Log.d("OBJToolkit", "About to reorganize each point of data");
        int counter = 0;
        for (Face f : faces)
        {
            for (Vertex v : f.vertices)
            {
                VBOVertices.add(v.position);
                VBONormals.add(v.normal);
                VBOTextureCoords.add(v.textureCoord);
                VBOIndices.add(counter);
                counter++;
            }
        }

        faces = null;

        mesh.createBuffers(vector3fListToFloatArray(VBOVertices), integerListToShortArray(VBOIndices), null, vector2fListToFloatArray(VBOTextureCoords), vector3fListToFloatArray(VBONormals));

        VBOVertices = null;
        VBONormals = null;
        VBOTextureCoords = null;
        VBOIndices = null;
        return mesh;
    }

    public static void printFloatArrayList(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static String floatArrayToString(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        return strToPrint;
    }

    public static String vector3fArrayToString(ArrayList<Vector3f> list)
    {
        String strToPrint = "";
        for (Vector3f v : list)
        {
            strToPrint += v.x + ", ";
            strToPrint += v.y + ", ";
            strToPrint += v.z + ", ";
        }
        return strToPrint;
    }

    public static void printStringArray(String[] list)
    {
        String strToPrint = "";
        for (String s : list)
        {
            strToPrint += s + ",";
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static void printIntegerArrayList(ArrayList<Integer> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static float[] floatListToFloatArray(ArrayList<Float> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Float");
        float[] returnArray = new float[list.size()];
        int counter = 0;
        for (Float i : list)
        {
            returnArray[counter] = i.floatValue();
            counter++;
        }
        return returnArray;
    }

    public static short[] integerListToShortArray(ArrayList<Integer> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Integer");
        short[] returnArray = new short[list.size()];
        int counter = 0;
        for (int i : list)
        {
            returnArray[counter] = (short)i;
            counter++;
        }
        return returnArray;
    }

    public static float[] vector3fListToFloatArray(ArrayList<Vector3f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector3f");
        float[] returnArray = new float[list.size() * 3];
        int counter = 0;
        for (Vector3f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
            returnArray[counter] = v.z;
            counter++;
        }

        return returnArray;
    }

    public static float[] vector2fListToFloatArray(ArrayList<Vector2f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector2f");
        float[] returnArray = new float[list.size() * 2];
        int counter = 0;
        for (Vector2f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
        }

        return returnArray;
    } 
```

矢量3f：

```
public class Vector3f {
    public float x, y, z;

    public Vector3f()
    {
        setTo(0, 0, 0);
    }

    public Vector3f(float x, float y, float z)
    {
        setTo(x, y, z);
    }

    public void setTo(float x, float y, float z)
    {
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public float lengthSquared()
    {
        return x*x + y*y + z*z;
    }

    public float length()
    {
        return (float) Math.sqrt(lengthSquared());
    }

    public Vector3f add(Vector3f v)
    {
        return new Vector3f(x + v.x, y + v.y, z + v.z);
    }

    public Vector3f addAndSet(Vector3f v)
    {
        x += v.x;
        y += v.y;
        z += v.z;
        return this;
    }

    public Vector3f crossProduct(Vector3f v)
    {
        return new Vector3f(y * v.z - z * v.y,
                z * v.x - x * z,
                x * v.y - y * v.x
                );
    }

    public Vector3f negate()
    {
        x *= -1;
        y *= -1;
        z *= -1;
        return this;
    }

    public Vector3f normalize()
    {
        float l = length();

        return new Vector3f(x / l, y / l, z / l);
    }

    public float dotProduct(Vector3f v)
    {
        return x * v.x + y * v.y + z * v.z;
    }

    public float angleBetween(Vector3f v)
    {
        float dls = dotProduct(v) / (length() * v.length());
        if (dls < -1f)
            dls = -1f;
        else if (dls > 1.0f)
            dls = 1.0f;
        return (float)Math.acos(dls);
    }

    public Vector3f scale(float scale)
    {
        return new Vector3f(x * scale, y * scale, z * scale);
    }

    public Vector3f scaleAndSet(float scale)
    {
        x *= scale;
        y *= scale;
        z *= scale;
        return this;
    }

} 
```

矢量2f：

```
public class Vector2f {
    public float x, y;

    public Vector2f()
    {
        setTo(0, 0);
    }

    public Vector2f(float x, float y)
    {
        setTo(x, y);
    }

    public void setTo(float x, float y)
    {
        this.x = x;
        this.y = y;
    }

    public float lengthSquared()
    {
        return x * x + y * y;
    }

    public float length()
    {
        return (float) Math.sqrt(lengthSquared());
    }

    public Vector2f add(float x, float y)
    {
        return new Vector2f(this.x + x, this.y + y);
    }

    public Vector2f addAndSet(float x, float y)
    {
        this.x += x;
        this.y += y;
        return this;
    }

    public Vector2f negate()
    {
        x *= -1;
        y *= -1;
        return this;
    }

    public Vector2f normalize()
    {
        float l = length();
        return new Vector2f(x / l, y / l);
    }

    public float dotProduct(Vector2f v)
    {
        return x * v.x + y * v.y;
    }

    public float angleBetween(Vector2f v)
    {
        float dls = dotProduct(v) / (length() * v.length());
        if (dls < -1f)
            dls = -1f;
        else if (dls > 1.0f)
            dls = 1.0f;
        return (float)Math.acos(dls);
    }

    public Vector2f scale(float scale)
    {
        return new Vector2f(x * scale, y * scale);
    }

    public Vector2f scaleAndSet(float scale)
    {
        x *= scale;
        y *= scale;
        return this;
    }
} 
```

网：

```
public class Mesh { 
    Bitmap bitmap = null;

    private FloatBuffer verticesBuffer;
    private ShortBuffer indicesBuffer;
    private FloatBuffer normalsBuffer;
    private int numOfIndices = -1;
    private float[] rgba = new float[] {1.0f, 1.0f, 1.0f, 1.0f};
    private FloatBuffer colorBuffer;
    private FloatBuffer mTextureBuffer;
    private int mTextureId = -1;
    private Bitmap mBitmap;
    private boolean mShouldLoadTexture = false;

    public float x = 0, y = 0, z = 0, rx = 0, ry = 0, rz = 0;

    public Mesh() {

    }

    public void draw(GL10 gl)
    {
        //Log.d("Mesh", "About to render mesh");
        gl.glFrontFace(GL10.GL_CCW);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glCullFace(GL10.GL_BACK);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer);
        gl.glNormalPointer(GL10.GL_FLOAT, 0, normalsBuffer);
        gl.glColor4f(rgba[0], rgba[1], rgba[2], rgba[3]);
        if (colorBuffer != null)
        {
            gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
            gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);
        }

        if (mShouldLoadTexture)
        {
            loadGLTexture(gl);
            mShouldLoadTexture = false;
        }

        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glEnable(GL10.GL_TEXTURE_2D);
            gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
            gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTextureBuffer);
            gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        }

        gl.glTranslatef(x, y, z);
        gl.glRotatef(rx, 1, 0, 0);
        gl.glRotatef(ry, 0, 1, 0);
        gl.glRotatef(rz, 0, 0, 1);
        gl.glDrawElements(GL10.GL_TRIANGLES, numOfIndices, GL10.GL_UNSIGNED_SHORT, indicesBuffer);
        gl.glDisableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        }
        gl.glDisable(GL10.GL_CULL_FACE);
    }

    public void setTexture(Bitmap bitmap) {
        this.bitmap = bitmap;
    }

    public void createBuffers(float[] vertices, short[] indices, float[] colors, float[] textureCoords, float[] normals)
    {
        Log.d("MeshCreateBuffers", "Vertices: " + floatArrayToString(vertices));
        setVertices(vertices);
        Log.d("MeshCreateBuffers", "Indices: " + shortArrayToString(indices));
        setIndices(indices);
        if (colors != null)
            setColors(colors);
        if (textureCoords != null)
            setTextureCoordinates(textureCoords);
        if (normals != null)
            setNormals(normals);
        Log.d("MeshCreateBuffers", "Texture Coors: " + floatArrayToString(textureCoords));
    }

    public String floatArrayToString(float[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += ", " + array[i];
        }
        if (returnString.length() > 2)
            return returnString.substring(2);
        else
            return returnString;
    }

    public String shortArrayToString(short[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += ", " + array[i];
        }
        if (returnString.length() > 2)
            return returnString.substring(2);
        else
            return returnString;
    }

    protected void setVertices(float[] vertices)
    {
        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        verticesBuffer = vbb.asFloatBuffer();
        verticesBuffer.put(vertices);
        verticesBuffer.position(0);
    }

    protected void setIndices(short[] indices)
    {
        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indicesBuffer = ibb.asShortBuffer();
        indicesBuffer.put(indices);
        indicesBuffer.position(0);
        numOfIndices = indices.length;
    }

    protected void setColor(float red, float green, float blue, float alpha)
    {
        rgba[0] = red;
        rgba[1] = green;
        rgba[2] = blue;
        rgba[3] = alpha;
    }

    protected void setColors(float[] colors)
    {
        ByteBuffer cbb = ByteBuffer.allocateDirect(colors.length * 4);
        cbb.order(ByteOrder.nativeOrder());
        colorBuffer = cbb.asFloatBuffer();
        colorBuffer.put(colors);
        colorBuffer.position(0);
    }

    protected void setTextureCoordinates(float[] textureCoords)
    {
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(textureCoords.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mTextureBuffer = byteBuf.asFloatBuffer();
        mTextureBuffer.put(textureCoords);
        mTextureBuffer.position(0);
    }

    protected void setNormals(float[] normals)
    {
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(normals.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        normalsBuffer = byteBuf.asFloatBuffer();
        normalsBuffer.put(normals);
        normalsBuffer.position(0);
    }

    public void loadBitmap(Bitmap bitmap)
    {
        this.mBitmap = bitmap;
        mShouldLoadTexture = true;
    }

    private void loadGLTexture(GL10 gl)
    {
        int[] textures = new int[1];
        gl.glGenTextures(1, textures, 0);
        mTextureId = textures[0];
        gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, mBitmap, 0);
    }
} 
```

脸：

```
public class Face {
    ArrayList<Vertex> vertices = new ArrayList<Vertex>();

    public Face()
    {

    }

    public void addVertex(Vertex vertex)
    {
        vertices.add(vertex);
    }
} 
```

顶点：

```
public class Vertex {
    public Vector3f position, normal;
    public Vector2f textureCoord;

    public Vertex(Vector3f pos, Vector3f norm, Vector2f textCoord)
    {
        position = pos;
        normal = norm;
        textureCoord = textCoord;
    }
} 
```

主要活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        MyGLSurfaceView view = new MyGLSurfaceView(this);
        OpenGLRenderer renderer = new OpenGLRenderer();
        view.renderer = renderer;
        //renderer.plane.loadBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
        view.setRenderer(renderer);
        setContentView(view);
    }
}

class MyGLSurfaceView extends GLSurfaceView implements OnGestureListener, OnTouchListener
{
    OpenGLRenderer renderer;
    GestureDetector detector;

    float lastX = 0, lastY = 0;

    float onDown = 0, onUp = 0;

    public MyGLSurfaceView(Context context) {
        super(context);
        detector = new GestureDetector(this);
        setOnTouchListener(this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent me)
    {
        detector.onTouchEvent(me);
        //Log.d("OBJToolkit", "X: " + me.getX());
        //Log.d("OBJToolkit", "Y: " + me.getY());
        return super.onTouchEvent(me);
    }

    @Override
    public boolean onTouch(View v, MotionEvent me)
    {
        Log.d("OBJToolkit", "Registered onTouch event");
        Log.d("OBJToolkit", "X: " + me.getX());
        Log.d("OBJToolkit", "Y: " + me.getY());
        if (me.getAction() == MotionEvent.ACTION_DOWN)
        {
            lastY = me.getY();
        }
        else if (me.getAction() == MotionEvent.ACTION_MOVE)
        {
            renderer.moveMesh(me.getY() - lastY);
        }
        /*
        if (lastX == 0)
        {
            lastX = me.getX();
        }
        if (lastY == 0)
        {
            lastY = me.getY();
        }
        Log.d("OBJToolkit", String.valueOf((me.getY() - lastY) * 0.1f));
        renderer.moveMesh(me.getY() - lastY);
        */
        lastY = me.getY();

        return true;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onDown Event");
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onFling Event");
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onLongPress Event");

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onScroll Event");
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onShowPress Event");
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onSIngleTapUp Event");
        return false;
    }

} 
```

OpenGL渲染器：

```
public class OpenGLRenderer implements Renderer
{
    //SmoothColoredSquare smoothSquare = new SmoothColoredSquare();
    //Cube cube = new Cube(1, 1, 1);
    public Mesh plane;

    public float meshMoveSpeed = .05f, planePosition = 0f;

    float zNear = 0.01f, zFar = 1000.0f, fieldOfView = 45.0f, size;

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        Log.d(getClass().getName(), "About to attempt to load model");
        try {
            plane = OBJToolkit.loadOBJ(Environment.getExternalStorageDirectory().getPath() + "/testModel.obj");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            Log.d("FNF", "testModel.obj not found");
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("IOE", "testModel.obj not found IOE");
            e.printStackTrace();
        }
        //.z = -7.7f;
        //plane.rx = -10;
        gl.glEnable(GL11.GL_DEPTH_TEST);
        gl.glDepthFunc(GL10.GL_LEQUAL);
        gl.glMatrixMode(GL11.GL_MODELVIEW);
        gl.glShadeModel(GL11.GL_SMOOTH);
        gl.glClearDepthf(1.0f);
        gl.glEnable(GL11.GL_LIGHTING);
        gl.glEnable(GL11.GL_LIGHT0);
        float ambientColor[] = {0.2f, 0.2f, 0.2f, 1.0f};
        float diffuseColor[] = {0.2f, 0.2f, 0.2f, 1.0f};
        float lightPosition[] = {-2f, 5f, -2f, 1f};
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_AMBIENT, ambientColor, 0);
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, diffuseColor, 0);
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_POSITION, lightPosition, 0);
        gl.glLoadIdentity();
        gl.glClearColor(0.8f, 0.8f, 0.8f, 1.0f);
        gl.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT, GL11.GL_NICEST);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        //Reset viewport
        gl.glViewport(0, 0, width, height);
        //Select projection matrix
        gl.glMatrixMode(GL10.GL_PROJECTION);
        size = (float) (zNear * Math.tan((fieldOfView / 180.0f) * Math.PI) / 2.0f);
        gl.glFrustumf(-size, size, -size / (width / height), size / (width / height), zNear, zFar);
        gl.glViewport(0, 0, width, height);
        //Reset projection matrix
        gl.glLoadIdentity();
        //Calculate aspect ratio of window
        GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);
        //GLU.gluLookAt(gl, -5f, 2f, 0f, 0f, 0f, 0f, 0f, 1f, 0f);
        //Select modelview matrix
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        //Reset modelview matrix
        gl.glLoadIdentity();
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        //Clear the screen before drawing
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        //plane.ry += 2f;
        //plane.rz += 2f;

        plane.x += meshMoveSpeed;
        plane.z = planePosition;
        if (plane.x > 3f)
        {
            meshMoveSpeed *= -1;
        }
        else if(plane.x < -3f)
        {
            meshMoveSpeed *= -1;
        }

        //Reset the current position held by OpenGL, otherwise the
        //camera will be pushed farther and farther back every frame
        gl.glLoadIdentity();

        //Move the camera backwards in order to actually see the face
        gl.glTranslatef(0, 0f, -15f);

        plane.draw(gl);
    }

    public void moveMesh(float distance)
    {
        planePosition += distance * 0.05f;
    }
} 
```

# java - 如何在 Struts 2 中显示图像？

> ID：15651640
> 
> 赞同：2
> 
> 时间：2013-03-27T03:55:55.763
> 
> 标签：java, database, image, jsp, struts2

我需要使用保存在字节数组中的图像检索数据库中的行。如何使用 Strut2 显示图像？

我已经使用自定义结果显示了它。我传递了 id 并在数据库中对其进行了操作搜索。我的问题是如何多次调用它？我有一个检索所有行的操作。如何从列表动作中调用显示图像动作？还是有更好的方法来实现这一目标？

**JAVA**

我的操作有一个我想在 JSP 上显示的对象的列表。

**JSP**

第一种方式：我使用迭代器标记，并且在每次迭代中我想显示字节数组中的图像。我想在这里调用操作来检索图像。

第二种方式：我试过这篇[文章](https://stackoverflow.com/questions/10510416/jsp-convert-byte-array-to-an-image)，但它对我不起作用。

```
<img src="data:image/jpg;base64, <s:property value="imageData"></s:property> />" > 
```

图像数据是字符串中的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:46:06.883

要在数据库中检索行有很多方法，但它们都使用 JDBC API。您可以将对象映射为包含您在数据库中持久保存的字节或 blob 或 clob 数据的图像数组。

显示将其发送到浏览器所需的图像。在 Struts2 中有一个[流结果](https://struts.apache.org/core-developers/stream-result.html)类型，可用于将图像数据输出到浏览器。

或者使用[Servlet API](https://tomcat.apache.org/tomcat-7.0-doc/servletapi/)在 JSP 上传输数据，类似于[How to send and display image from action class to JSP in Struts 2](https://stackoverflow.com/a/15278402/573032) answer。

结合您在问题中已经启发的答案的经验来对数据进行*字符串化*，您可能会获得合适的结果。

# python - 如何在 MAC 上的 python 中打开 Excel 实例？

> ID：15651641
> 
> 赞同：3
> 
> 时间：2013-03-27T03:55:56.693
> 
> 标签：python, macos, excel

我认为这个问题之前已经被问过，但不清楚，在最初的问题中，用户提供了 excel.exe，它是一个 Windows 可执行扩展，而不是 Mac。

*   我需要在 MAC 上的 Python 中打开新的 Excel 实例。

我应该导入哪个模块？

我是一个新手，我已经完成了 Python 语言的学习，但无法理解文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:46:31.600

如果您只需要启动 Excel，最好的方法就是使用 LaunchServices 来完成。

如果您有`PyObjC`（如果您使用的是 Apple 在 10.6 及更高版本上预安装的 Python，您会这样做；否则，您可能必须安装它）：

```
import Foundation
ws = Foundation.NSWorkspace.sharedWorkspace()
ws.launchApplication_('Microsoft Excel') 
```

如果没有，您可以随时使用该`open`工具：

```
import subprocess
subprocess.check_call(['open', '-a', 'Microsoft Excel']) 
```

无论哪种方式，您都可以像用户在 Finder 中双击应用程序图标一样有效地启动 Excel。

如果你想让 Excel 做一些简单的事情，比如打开一个特定的文档，那并不难。查看[`NSWorkspace`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)or[`open`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html)文档以了解如何做任何你想做的事情。

如果您确实想要*控制*Excel（例如，打开一个文档、进行一些更改并保存它），您将需要使用它的 AppleScript 界面。

Apple 推荐的方法是 via [`ScriptingBridge`](https://developer.apple.com/documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/)，或者使用双语言方法（编写 AppleScripts 并通过执行它们[`NSAppleScript`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAppleScript_Class/Reference/Reference.html)- 在 Python 中，您可以通过执行它们`PyObjC`）。但是，我可能会使用[`appscript`](http://appscript.sourceforge.net)（从[这里](https://github.com/abarnert/appscript)获取代码）。尽管它已被其最初的创建者抛弃，并且只是很少维护，并且可能最终会停止与某些未来的 OS X 版本一起使用，但它仍然比官方解决方案好得多。

这是一个示例（未经测试，因为我这里没有 Excel）：

```
import appscript
excel = appscript.app('Microsoft Excel')
excel.workbooks[1].column[2].row[2].formula.set('=A2+1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T06:27:11.353

从评论中，您是否需要使用数据“更新” Excel 文件并不完全清楚，只是假设您需要 Excel 来执行此操作，或者您需要更改一些 Excel 文件以包含新数据。

在不启动 Excel 的情况下“更新”Excel 文件通常更容易，当然也更快（执行速度）。但是更新不是正确的词：您必须读入文件并将其写出新的。您当然可以覆盖原始文件，因此它看起来像一个更新。

对于“更新” [，](http://www.python-excel.org/)如果您使用的文件是文件 (Excel 2003) ，您可以使用三重奏[`xlrd`, 。`xlwt``xlutils`](http://www.python-excel.org/)`.xls`IIRC xlwt 不支持`.xlsx`写入（但`xlrd`可以读取这些文件）。

对于`.xlsx`我使用的文件[`openpyxl`](http://pythonhosted.org/openpyxl/)，

两者都足以编写数据、公式和基本格式等内容。

如果您有作为“模板”使用的现有 Excel 文件，如果您使用上述软件包之一进行读/写，这些信息会丢失，**那么**您必须在 Excel 中更新该文件。我必须这样做，因为我没有简单的方法来包含 Visual Basic 宏和客户端指定的非常具体的格式。有时更容易直观地设置电子表格，然后以编程方式填充单元格。但这一切都是在 Windows 上完成的。

如果你真的要在 Mac 上驱动 Excel，因为你需要使用现有文件作为模板，我建议你看看 Applescript。或者，如果它是一个选项，请查看 OpenOffice/LibreOffice [PyUno](http://wiki.openoffice.org/wiki/Python)界面。

# entity-framework - 实体框架多对多但也可以多次发生关系

> ID：15651642
> 
> 赞同：0
> 
> 时间：2013-03-27T03:56:09.237
> 
> 标签：entity-framework, orm

我不知道如何定义这种关系。我有用户和徽章，用户可以收集许多徽章，他们也可以多次拥有某个徽章。（就像 Stackoverflow 一样）。

如何定义这个 numberOfTimesEarntBadge 计数？

我试过简单地再次访问 user.badges.add(badge) ，但它没有插入数据库。

目前，徽章（在用户类内部）定义为：

```
public virtual ICollection<Badge> Badges { get; set; } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:05:25.583

您需要一个关系实体，例如 UserBadge，因此导航属性将是 ICollection UserBadges

UserBadge 将有一个用户和徽章的导航属性，以及一个 PK ID 字段。

然后要获得徽章计数，您可以按徽章对用户的 UserBadges ICollection 进行分组，然后计算每个组：

```
var badgeCountQuery =
for ub in userEntity.UserBadges
group ub by ub.Badge into g
select new
{
    Badge = g.Key,
    BadgeCount = g.Count()
}; 
```

# java - Jetty Server 未启动：无法建立环回连接

> ID：15651644
> 
> 赞同：2
> 
> 时间：2013-03-27T03:56:20.927
> 
> 标签：java, jetty

所以我正在尝试设置一个嵌入式 jetty 9 服务器。但是，当我尝试：

> mvn clean 编译 exec:java

执行停止于：

> 信息：oejs.Server：com.main.SimpleServer.main（）：jetty-9.0.0.RC2

过了一会儿，我得到如下异常：

> WARN:oejuc.AbstractLifeCycle:com.main.SimpleServer.main(): FAILED org.eclipse.jetty.io.SelectorManager$ManagedSelector@45a0110e keys=-1 selected=-1: java.io.IOException: Unable to建立环回连接
> 
> java.io.IOException：无法建立环回连接 java.net.ConnectException：连接被拒绝：连接

我的代码如下所示：

```
public class HelloHandler extends AbstractHandler {
    final String _greeting;

    final String _body;

    public HelloHandler() {
        _greeting = "Hello World";
        _body = null;
    }

    public HelloHandler(String greeting) {
        _greeting = greeting;
        _body = null;
    }

    public HelloHandler(String greeting, String body) {
        _greeting = greeting;
        _body = body;
    }

    public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        response.setContentType("text/html;charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        baseRequest.setHandled(true);
        response.getWriter().println("<h1>" + _greeting + "</h1>");
        if (_body != null) response.getWriter().println(_body);
    }
} 
```

和

```
public class SimpleServer {
     public static void main(String[] args) throws Exception {
            Server server = new Server(8080);
            server.setHandler(new HelloHandler());
            server.start();
            server.join();
        }
} 
```

我的 pom.xml 看起来像：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>TestJetty</groupId>
    <artifactId>TestJetty</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <properties>
    <jettyVersion>9.0.0.RC2</jettyVersion>
  </properties>

    <dependencies>
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
            <version>${jettyVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-websocket</artifactId>
            <version>7.4.4.v20110707</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-util</artifactId>
            <version>${jettyVersion}</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>3.0-alpha-1</version>
        </dependency>

    </dependencies>

    <build>
    <plugins>
      <plugin>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>${jettyVersion}</version>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
          <execution><goals><goal>java</goal></goals></execution>
        </executions>
        <configuration>
          <mainClass>com.main.SimpleServer</mainClass>
        </configuration>
      </plugin>

    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:24:09.417

这意味着有关 localhost 环回的某些内容要么配置错误（例如报告为非环回 IP 地址），要么被某些东西阻止使用（最常见的原因是 Microsoft Windows 策略决策和防火墙规则）。

不太常见的是没有可用 IPv4 的机器（只有 IPv6）。

尝试编译并运行它...

```
package stackoverflow.jetty;

import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.util.Collections;
import java.util.Enumeration;
import java.util.List;

public class AddrList
{
    public static void main(String[] args)
    {
        try
        {
            InetAddress loopback = InetAddress.getLoopbackAddress();
            dump("Loopback",loopback);
        }
        catch (Throwable t)
        {
            System.out.println("Unable to getLoopbackAddress()");
            t.printStackTrace();
        }

        try
        {
            InetAddress localhost = InetAddress.getLocalHost();
            dump("LocalHost",localhost);
        }
        catch (Throwable t)
        {
            System.out.println("Unable to getLocalHost()");
            t.printStackTrace();
        }

        try
        {
            InetAddress alladdr = InetAddress.getByName("0.0.0.0");
            dump("0.0.0.0",alladdr);
        }
        catch (Throwable t)
        {
            System.out.println("Unable to getLocalHost()");
            t.printStackTrace();
        }

        try
        {
            Enumeration<NetworkInterface> nets = NetworkInterface.getNetworkInterfaces();
            for (NetworkInterface iface : Collections.list(nets))
            {
                try
                {
                    System.out.println("DisplayName = " + iface.getDisplayName());
                    System.out.println("Name = " + iface.getName());

                    List<InetAddress> addrs = Collections.list(iface.getInetAddresses());
                    int i = 0;
                    for (InetAddress addr : addrs)
                    {
                        dump(Integer.toString(i++),addr);
                    }
                }
                catch (Throwable t)
                {
                    System.out.println("Unable to InetAddress for NetworkInterface: " + iface.getDisplayName());
                    t.printStackTrace();
                }
            }
        }
        catch (SocketException e)
        {
            System.out.print("Unable to get all network interfaces");
            e.printStackTrace();
        }
    }

    public static void dump(String type, InetAddress addr)
    {
        String header = String.format("[%s] InetAddress",type);
        try
        {
            System.out.println(header + " = " + addr);
            System.out.println(header + ".isAnyLocalAddress = " + addr.isAnyLocalAddress());
            System.out.println(header + ".isLinkLocalAddress = " + addr.isLinkLocalAddress());
            System.out.println(header + ".isLoopbackAddress = " + addr.isLoopbackAddress());
        }
        catch (Throwable t)
        {
            System.out.printf("[%s] Failed to list InetAddress details%n",type);
            t.printStackTrace();
        }

        try
        {
            header = String.format("[%s] InetSocketAddress",type);
            InetSocketAddress isockaddr = new InetSocketAddress(addr,8080);
            System.out.println(header + " = " + isockaddr);
            System.out.println(header + ".isUnresolved = " + isockaddr.isUnresolved());
        }
        catch (Throwable e)
        {
            e.printStackTrace();
        }
    }
} 
```

这应该列出您机器上网络接口的所有变体。如果您有错误或异常，您需要先解决该问题，然后才能在该机器上启动 Jetty。

在普通机器上，您会看到以下输出：

```
[Loopback] InetAddress = localhost/127.0.0.1
[Loopback] InetAddress.isAnyLocalAddress = false
[Loopback] InetAddress.isLinkLocalAddress = false
[Loopback] InetAddress.isLoopbackAddress = true
[Loopback] InetSocketAddress = localhost/127.0.0.1:8080
[Loopback] InetSocketAddress.isUnresolved = false
[LocalHost] InetAddress = lapetus/127.0.1.1
[LocalHost] InetAddress.isAnyLocalAddress = false
[LocalHost] InetAddress.isLinkLocalAddress = false
[LocalHost] InetAddress.isLoopbackAddress = true
[LocalHost] InetSocketAddress = lapetus/127.0.1.1:8080
[LocalHost] InetSocketAddress.isUnresolved = false
[0.0.0.0] InetAddress = /0.0.0.0
[0.0.0.0] InetAddress.isAnyLocalAddress = true
[0.0.0.0] InetAddress.isLinkLocalAddress = false
[0.0.0.0] InetAddress.isLoopbackAddress = false
[0.0.0.0] InetSocketAddress = /0.0.0.0:8080
[0.0.0.0] InetSocketAddress.isUnresolved = false
(snip ... long list of other interfaces) 
```

这向我展示了所有 3 个选择：loopback、localhost 和 0.0.0.0（任何接口）都可以作为 Jetty 的侦听器。

最后，升级到[最终的非 RC Jetty 9.0.0.v20130308](http://dev.eclipse.org/mhonarc/lists/jetty-announce/msg00043.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-21T05:30:50.043

码头服务器已配置并为我工作。在美好的一天，它开始出现“无法建立环回连接”错误。我已经重新启动了我的机器，它又开始工作了。所以我认为这个错误与 Windows 操作系统完全相关。

# jquery - 禁用html标签的悬停状态

> ID：15651645
> 
> 赞同：2
> 
> 时间：2013-03-27T03:56:22.163
> 
> 标签：jquery, hover, state

我想禁用我的 html 元素的悬停状态，但不使用另一个 css 来覆盖悬停的 css。

这是我的代码行：

```
<div id="test">
    Hello world
</div>

<style>
    #test {color: red; border: 1px blue solid;}
    #test:hover {color: green; border: 1px blue solid;}
</style> 
```

在这种情况下，当鼠标悬停时，“Hello world”将变为绿色，但我不希望鼠标悬停时发生任何事情，并且不添加/覆盖新的 CSS 来禁用悬停。有没有办法通过 javascript/jquery 禁用悬停状态？

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:37:41.117

You can disable hover state with this jQuery code:

```
$(document).ready(function () {
    $('#test').hover(
      function () {
        $('#test').css('color','red');
      }
    );
}); 
```

# php - 使用 SQLSrv 和 PHP 5.4.7 连接到 MSSQL 时出错

> ID：15651646
> 
> 赞同：2
> 
> 时间：2013-03-27T03:56:29.403
> 
> 标签：php, sql-server

我正在尝试使用 PHP 连接到 MSSQL 数据库，但在尝试连接时遇到了一个非常令人沮丧的错误。它会加载一分钟，然后打印出以下消息：

```
 Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[08001]: 
[Microsoft][SQL Server Native Client 11.0]Named Pipes Provider: Could not open a connection to SQL Server [53]. 
```

这是我的连接字符串：

```
DB::config("sqlsrv:Server={$dbHost} ; Database={$dbName}", $dbUser, $dbPass); 
```

在我的数据库类中：

```
public static function config($dsn, $user, $pass)
    {
        self::$_pdo = @new PDO($dsn, $user, $pass);
        ...// intentionally left out 
```

我很困惑。我在 php.ini 文件中配置了以下模块：extension=php_pdo_sqlsrv_54_ts.dll。虽然我认为我安装正确并且我没有收到任何关于驱动程序不工作的错误消息，但这段 PHP 没有打印任何内容：

```
if (function_exists( 'sqlsrv_connect' ))
    echo "hey"; 
```

正如您从我上面的错误消息中看到的那样，SQL Server Native Client 11 似乎正在工作。我在Windows平台上。我尝试禁用防火墙无济于事。我没有太多关于 SQL 服务器的信息，否则我会在这里分享。

这是我第一次在 Stack 上发帖，所以如果我遗漏了关键信息或者我没有以某种方式遵守适当的礼仪，我深表歉意，但任何帮助都非常感谢。

* * *

另外，我应该补充一点，我已经做了太多的谷歌搜索，并且没有取得任何成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T04:56:51.630

我的安装过程确实有效，但连接确实无效。我应该一直使用 IP 地址作为主机名，但我没有。我还在端口号之前使用了冒号而不是逗号。最后，连接字符串中不允许有空格，我认为它会被自动删除。因此，对于那些可能发现自己处于类似困境的人来说，这是一个有效的连接字符串：

```
$connectionString="sqlsrv:Server=123.123.12.1,9864;Database=mssqldatabaseWootWoot"; 
```

此外，为了响应我之前对该函数 sqlsrv_connect 的观察，我没有启用该函数所需的驱动程序。它位于php_sqlsrv_54_ts.dll中，启用后报告该功能存在。

感谢任何花时间解决这个问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T21:44:37.417

我遇到了同样的问题，但我发现我不需要使用 IP 地址，服务器名称适时工作。另外我不确定我的服务器使用的是什么端口，我在这里找到了信息：[如何找到 MS SQL Server 2008 的端口？](https://stackoverflow.com/questions/1518823/how-to-find-the-port-for-ms-sql-server-2008)

我还发现以下链接有助于 PDO 工作：

[PHP PDO 连接到具有集成安全性的 SQL Server？](https://stackoverflow.com/questions/857194/php-pdo-connection-to-sql-server-with-integrated-security)

[在课堂上使用 PDO](https://stackoverflow.com/questions/2047264/use-of-pdo-in-classes)

[MS SQL Server (PDO) — Microsoft SQL Server 函数 (PDO_SQLSRV)](http://www.php.net/manual/en/ref.pdo-sqlsrv.php)

我知道 ncksllvn 解决了他的问题，所以我希望这对其他访问者有所帮助！

# java - 我如何检测 JasperViewer 处理报告时间

> ID：15651648
> 
> 赞同：1
> 
> 时间：2013-03-27T03:56:36.347
> 
> 标签：java, process, jasper-reports, ireport, reportviewer

我们知道 jasper viewer 需要很多时间来根据将显示的数据处理报告。我想处理它，给用户加载信息。这是我的步骤：

1.  检查，查看器是否正在处理或已完成。
2.  如果正在处理中，请创建 JLabel 并将文本设置为“正在加载报告...”
3.  如果完成，将文本设置为 "" 或 null

第一*点*，我不知道如何检查查看器是否在生成过程中？请帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:09:07.977

`viewReport()`在单独的线程中进行调用。存储实例级别的 AtomicBoolean，并在报告完成后将其设置为 false。在您的客户端检查方法中，定期检查此实例变量以检查报告是否完成。

示例伪代码：

```
public void YourClass {

private AtomicBoolean reportRunning;

...

private void getReport() {

    new Thread() {

     reportRunning = new AtomicBoolean(true);
     JRViewer.viewReport();
     reportRunning.set(false);

    }.start();

}

// Call periodically and update UI    
private boolean clientCheck() {

    return reportRunning != null && reportRunning.get();

} 
```

# postgresql - 尝试在 Heroku 中运行 rails 应用程序我得到 PG:ERROR 连接被拒绝

> ID：15651649
> 
> 赞同：0
> 
> 时间：2013-03-27T03:56:37.407
> 
> 标签：postgresql, heroku, ruby-on-rails-3.2, ruby-on-rails-4

当我转到默认的 rails 登录页面时，显示它没有问题，但是当我尝试显示用户时，我收到以下消息：

```
Started GET "/users" for 190.21.126.51 at 2013-03-27 03:27:19 +0000 
Mar 26 20:27:19 timepoints app/web.1:  PG::Error (could not connect to server: Connection refused 
Mar 26 20:27:19 timepoints app/web.1:   Is the server running on host "localhost" and accepting 
Mar 26 20:27:19 timepoints app/web.1:   TCP/IP connections on port 5432? 
Mar 26 20:27:19 timepoints app/web.1:  ): 
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `initialize' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `new' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `connect' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout' 
Mar 26 20:27:19 timepoints app/web.1:    /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection' 
Mar 26 20:27:19 timepoints app/web.1:    /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/query_cache.rb:67:in `rescue in call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/query_cache.rb:61:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `_run__572927131951691028__call__675318756725154442__callbacks' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_call_callbacks' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/callbacks.rb:27:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/remote_ip.rb:31:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:17:in `call' 
Mar 26 20:27:19 timepoints app/web.1:    vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service' 
Mar 26 20:27:19 timepoints app/web.1:    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service' 
Mar 26 20:27:19 timepoints app/web.1:    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run' 
Mar 26 20:27:19 timepoints app/web.1:    /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
Mar 26 20:27:19 timepoints heroku/router:  at=info method=GET path=/users host=timepoints.herokuapp.com fwd="190.21.126.51" dyno=web.1 connect=2ms service=8ms status=500 bytes=643 
Mar 26 20:27:20 timepoints heroku/router:  at=info method=GET path=/favicon.ico host=timepoints.herokuapp.com fwd="190.21.126.51" dyno=web.1 connect=20ms service=13ms status=304 bytes=0 
```

我已经设置了我的`application.rb`和`production.rb`：

```
config.assets.initialize_on_precompile = false 
```

我确实`heroku run rake db:setup`按照其他帖子中的建议运行，并且还尝试了`db:migrate`和`db:reset`

我已经检查过`heroku config`，我可以看到`DATABASE_URL`已经设置为`HEROKU_POSTGRESQL_OLIVE_URL`

我还删除了该应用程序并部署到一个新应用程序，但同样的问题不断发生。

我`Gemfile`的有以下几点：

```
group :production do
  gem 'thin'
  gem 'activerecord-postgresql-adapter'
end 
```

我正在使用 Rails 3.2.6 和 Ruby 1.9.2

* * *

**更新：** 我刚刚升级到 Rails 4.0.0 和 Ruby 2.0.0，但我一直收到同样的错误

* * *

**更新 2：** 我已将我的应用程序降级到 rails 3.1.0 和 ruby​​ 1.9.3 并且已经解决了一些错误。我仍然有连接到服务器的问题。

* * *

**更新 3：** 我联系了 Heroku，他们帮助我解决了问题。这是一个与我的开发数据库的连接，我在一些帮助文件中调用了该文件，该文件破坏了生产中的连接。删除解决了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:14:48.570

我已经将我的应用程序降级到 rails 3.1.0 和 ruby​​ 1.9.3 并且已经解决了一些错误。

然后我联系了 Heroku，他们帮我解决了这个问题。这是一个与我的开发数据库的连接，我在一些帮助文件中调用了该文件，该文件破坏了生产中的连接。删除解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:52:29.260

你应该使用`gem 'pg'`

```
group :production do
  gem 'pg'
end 
```

然后应该自动建立连接，假设您`DATABASE_URL`指向一个有效的数据库。

您还应该确认`RAILS_ENV`（也许还有`RACK_ENV`）设置为`production`in `$ heroku config`。

您的 Procfile 是否提及`RAILS_ENV`or `RACK_ENV`？

# linux - 以太网校验和是否通过 AF_PACKET 暴露？

> ID：15651651
> 
> 赞同：2
> 
> 时间：2013-03-27T03:56:46.120
> 
> 标签：linux, sockets, ethernet, raw-sockets

正如[这个问题所暗示的那样，校验和似乎是由以太网硬件计算和验证的，因此](https://stackoverflow.com/questions/13210355/why-is-the-frame-check-sequence-at-the-end-of-an-ethernet-frame-and-not-somewher)[在](https://stackoverflow.com/questions/6329583/how-to-reliably-generate-ethernet-frame-errors-in-software)使用 AF_PACKET 套接字发送帧时，它似乎极不可能由软件生成，如此处和[此处](https://stackoverflow.com/a/6374862/578749)所示。另外，我认为它不能从套接字接收，也不能通过任何简单的方式接收，因为即使 Wireshark 也不会显示它。

那么，有人可以证实这一点吗？我真的需要自己发送校验和，如最后两个链接所示？以太网适配器会自动创建和检查校验和吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T17:08:26.750

不，您不需要包含 CRC。

在 Linux using 中使用数据包套接字时`socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL) )`，必须在发送时提供第 2 层标头。这由`struct ether_header`in定义`netinet/if_ether.h`，包括目标主机、源主机和类型。不包括帧校验序列，也不包括前导码、帧开始定界符或尾部。这些是由硬件添加的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T10:18:20.800

在 Linux 上，如果你提到 socket(AF_PACKET, SOCK_RAW, htobe16(ETH_P_ALL)) 类似的情况，你不需要计算以太网校验和，网卡硬件/驱动会为你做。这意味着您需要在将其发送到原始套接字之前提供除校验和之外的整个数据链路层帧。

# r - 如何使用 zoo 或 xts 处理大数据？

> ID：15651652
> 
> 赞同：6
> 
> 时间：2013-03-27T00:30:40.523
> 
> 标签：r, time-series, xts, zoo

如何将 R 包 zoo 或 xts 用于非常大的数据集？(100GB) 我知道有一些包比如 bigrf, ff, bigmemory 可以处理这个问题，但是你必须使用它们有限的命令集，它们没有 zoo 或 xts 的功能，我不知道如何制作 zoo 或 xts 来使用它们。我该如何使用它？

我已经看到还有其他一些与数据库相关的东西，例如 sqldf 和 hadoopstreaming、RHadoop 或 Revolution R 使用的其他一些东西。你有什么建议？还有其他的吗？

我只想聚合系列，清理并执行一些协整和绘图。我不希望每次都使用小块数据为我需要的每个命令编写和实现新功能。

补充：我在Windows上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T01:13:33.040

我也遇到过类似的问题（尽管我只玩了 9-10 GB）。我的经验是，**R 无法单独处理这么多数据**，尤其是因为您的数据集似乎包含时间序列数据。

如果您的数据集包含很多零，您可以使用稀疏矩阵来处理它 - 请参阅**Matrix**包（[http://cran.r-project.org/web/packages/Matrix/index.html](http://cran.r-project.org/web/packages/Matrix/index.html)）；本手册也可能派上用场（[http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/](http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/)）

我使用了 PostgreSQL——相关的 R 包是**RPostgreSQL**（[http://cran.r-project.org/web/packages/RPostgreSQL/index.html](http://cran.r-project.org/web/packages/RPostgreSQL/index.html)）。它允许您查询您的 PostgreSQL 数据库；它使用 SQL 语法。数据作为数据帧下载到 R 中。它可能很慢（取决于查询的复杂性），但它很健壮并且可以方便地进行数据聚合。

**缺点**：您需要先将数据上传到数据库中。您的原始数据需要干净并以某种可读格式（txt/csv）保存。如果您的数据尚未采用合理的格式，这可能是最大的问题。然而，将“行为良好”的数据上传到数据库很容易（参见[http://www.postgresql.org/docs/8.2/static/sql-copy.html](http://www.postgresql.org/docs/8.2/static/sql-copy.html)和[如何将 CSV 文件数据导入 PostgreSQL 表？](https://stackoverflow.com/questions/2987433/how-to-import-csv-file-data-into-a-postgres-table)）

我建议您使用 PostgreSQL 或**任何其他关系数据库**来完成您的任务。我没有尝试 Hadoop，但使用 CouchDB 几乎让我走弯路。坚持使用良好的旧 SQL

# android - 行变大后 ListView 不会调整大小 从异步任务加载图像

> ID：15651653
> 
> 赞同：1
> 
> 时间：2013-03-27T03:57:09.413
> 
> 标签：android, android-asynctask, imageview, android-listfragment

我有一个`ListView`在里面的`TabHost`。有一个习惯`CursorAdapter`将 4 个不同的视图返回到列表中。4 种类型之一是从 SD 或资产文件夹中提取的图像。最初我从`CursorAdapter`自身加载图像，这会导致 UI 线程在加载每个图像时挂起，因此我将代码移动到`AsyncTask`.

除了返回非常短的项目列表的情况外，这一切都有效。发生这种情况时，`ListView`图像加载后不会重新调整大小，您只能在顶部屏幕的一小部分滚动。

我无法弄清楚如何获得`listView`重新布局。在视图本身上调用重新布局和无效是不起作用的。尝试查找 View 的父级返回 null。默认的 ListFragment 布局已经将高度设置为“Match_Parent”。手动将 onCreateView 中的布局设置为所有高度都设置为“Match_Parent”的布局并不能修复它。传入适配器本身来调用`notifyDataSetChanged()`只会导致循环并且不会重新调整`ListView`.

令人沮丧的是，当我更改选项卡时，视图会在新选项卡被绘制之前正确闪烁。偶尔，当我旋转设备或在选项卡之间轻弹时，它会正确呈现，但大多数时候不会。

出于调试目的，我尝试向 onListItemClick 添加各种重新布局命令，发现调用 ListView.relayout() 有时可以解决问题，但通常不能。

![](../Images/979dfb9e1c2588bb983c8b7a696419c5.png) ![](../Images/bf88485aee42362a2ba96ce179ef61d9.png)

左边是它如何通过 AsyncTask 加载，右边是它如何通过主线程加载器加载。内容在左侧，但您必须滚动，因为列表视图的大小不正确。

我错过了什么？有没有办法让`ListView`当前选项卡甚至整个屏幕重绘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:44:57.537

您需要通知 ListView 重绘自身。这是昂贵的，你应该尽量避免它。随着滚动位置的不断变化，它也可能会导致用户感到沮丧。我建议尝试找到一个理想的 ImageView 大小并使用它来锁定行高/宽度，以便动态内容确实会导致这些问题。

[http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged())

```
arrayAdapter.notfityDataSetChanged(); 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:36:00.973

问题是由于 ListView 布局后 ImageView 调整大小造成的。在关闭 AsyncTask 之前将 ImageView 的高度和宽度设置为图像的尺寸，使 ListView 布局正确。

我的图像都是本地的，文件名等在数据库中，因此我可以在加载图像之前获得正确的尺寸。如果您无法提前获得图像尺寸，我不能 100% 确定您会做什么。

# javascript - 检查主干中 $(this.el) 的值

> ID：15651655
> 
> 赞同：0
> 
> 时间：2013-03-27T03:57:32.420
> 
> 标签：javascript, backbone.js

我刚刚开始使用主干、javascript、jquery 等。我正在查看这篇文章的主干视图，[Backbone.js View can't unbind events](https://stackoverflow.com/questions/6831362/backbone-js-view-cant-unbind-events-properly) proper ，看来我需要取消对我的事件的委托。我的事件与 ID 为 #createBtn 的元素相关联。所以我尝试了这个：

```
$(this.el).undelegate('#createBtn', 'click'); 
```

当我的主干视图被初始化时，这个事件被注册到：

```
events: {
            "click #createBtn": "createNewTemplate", 
```

我仍然看到我的按钮做正常的事情。我猜我的 undelegate 没有以某种方式工作，并且想要一种方法来调查 $(this.el) 真正指向的内容。整个 JS`this`和一切都让我感到困惑。所以我不确定 $(this.el) 是否会以我尝试的方法工作，或者我是否需要做其他事情。任何有关如何处理 $(this.el) 或我如何查看该对象的调试提示都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:24:48.217

尝试 console.log 在取消委托之前输出 this 和 this.el 的值。像这样...

`console.log("this is this", this)`

`console.log("this is this.el", this.el)`

然后查看浏览器控制台中的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:09:55.867

Chrome 有一些出色的调试工具。您可以跳过 jscript 并获取上下文信息。Ctrl + Shift + j。来源。使用右侧的步进/跳过按钮添加断点和控制。

# ios - 通过忽略空格对 NSString 的 NSArray 进行排序

> ID：15651656
> 
> 赞同：0
> 
> 时间：2013-03-27T03:57:33.380
> 
> 标签：ios, sorting, nsarray

我有一个

```
NSArray *foo = @[@"Chicago Hts, IL", @"Chicago Heights, IL", @"Chicago, IL"]; 
```

我想得到一个这样的排序数组：

```
@[@"Chicago, IL", @"Chicago Heights, IL", @"Chicago Hts, IL"]; 
```

我用了

```
[foo sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:), 
```

这导致

```
@[@"Chicago Heights, IL", @"Chicago Hts, IL", @"Chicago, IL"]; 
```

该数组有大约 100k+ 个条目，因此根据空白空间拆分字符串并对其进行排序和“未拆分”会导致性能不佳。

我意识到 Finder 对文件的排序方式与“localizedCaseInsensitiveCompare”相同，所以我想我不走运。

我倾向于根据第一个字符“a”拆分数组，根据空白空间加入字符串，对其进行排序，然后在 tableView 中将其显示给用户，如果用户滚动超过第一组结果，获取“b”的下一组对象，通过忽略空格连接单词，排序，“取消连接单词”并显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:03:26.263

提供您自己的比较器：

```
NSArray *sorted = [foo sortedArrayUsingComparator:^NSComparisonResult(NSString *str1, NSString *str2) {
    // Remove all spaces
    NSString *s1 = [str1 stringByReplacingOccurrencesOfString:@" " withString:@""];
    NSString *s2 = [str2 stringByReplacingOccurrencesOfString:@" " withString:@""];

    return [s1 localizedCaseInsensitiveCompare:s2];
}]; 
```

# php - CodeIgniter CLI - 将多个参数传递给方法

> ID：15651658
> 
> 赞同：2
> 
> 时间：2013-03-27T03:57:49.600
> 
> 标签：php, codeigniter, model, command-line-interface

我正在通过 CLI 测试 CodeIgniter 项目中的一些模型，有问题的方法有两个参数：

```
public function get_questions_from_block($block_name, $return_array = FALSE) 
```

我试过这个：

```
php index.php test_controller get_question_block_name example_block TRUE 
```

但它返回 0 或 FALSE。如何通过 CLI 传递多个参数？我必须使用：

```
$_SERVER['argv']; 
```

得到所有的论点？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:20:43.050

你可以使用[`getopt()`](http://php.net/manual/en/function.getopt.php)而不是`$_SERVER['argv']`

但是在这种情况下，我认为这不会对您有所帮助（无需大量代码修改）。

也许您应该查看 CI 提供的[`unit-test`课程](http://ellislab.com/codeigniter/user-guide/libraries/unit_testing.html)。

在这种情况下，您可以通过在单独的单元测试文件中执行以下操作来简单地针对您的模型运行一系列测试：

```
$this->load->model('test_model');
$this->unit->run(
    $this->test_model->get_questions_from_block(args),
    $expected_behavior /* what should be returned */,
    $test_name /* name your test */
); 
```

# eclipse-rcp - 基本产品的 RCP P2 更新

> ID：15651659
> 
> 赞同：0
> 
> 时间：2013-03-27T03:57:57.390
> 
> 标签：eclipse-rcp, rcp, p2

我正在开发 RCP P2 更新。

1.  我创建了 RCP 邮件模板应用程序。(com.project.app.mail)
2.  我添加了产品配置文件 MailProduct.product
3.  如果我的插件项目，我在依赖项选项卡中添加了 org.eclipse.equinox.p2.ui.sdk 作为依赖项。添加后，我在帮助菜单下获得了安装新软件和检查更新选项。
4.  我添加了具有以下内容的 p2.inf 文件。

    instructions.configure=\ addRepository(type:0,location:http${#58}//localhost:8080/REPO/);\ addRepository(type:1,location:http${#58}//localhost:8080/回购/）；

5.  我将产品转换为基于功能的产品。

6.  我创建了一个功能项目（com.project.feature.mail）
7.  我在功能 com.project.feature.mail 的插件选项卡中添加了 com.project.app.mail
8.  我通过产品文件启动了 RCP 产品。由于失败，我去运行配置，添加了所需的插件。之后应用程序成功启动。
9.  我出口了产品。出口产品运行良好。
10.  现在我对 com.project.app.mail 做了一些更改。
11.  将 com.project.feature.mail 版本更新为 1.0.100.quailfier（早期版本 1.0.0.quialifier）
12.  添加了更新站点项目。添加了 ID 为 com.project.category.mail 的类别。添加了版本 1.0.100.qualifier 的邮件功能。
13.  单击全部构建，将生成的功能、插件、工件和 repository.xml 移动到本地 http 服务器 (tomcat)
14.  我尝试通过检查更新选项来更新 com.project.feature.mail。
15.  它说没有找到更新，而安装新软件页面显示更新的 com.project.feature.mail 和更新的版本。在继续安装时，它告诉只有更新是可能的，而更新找不到新的更新。

请指导我如何为基础产品提供更新。

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T06:30:02.477

Dear Priyank what is your product(MailProduct.product) version? Following suggestions will solve your problem.

1.  You have to change MailProduct.product version too.
2.  Re-export your product with Generate Metadata Repository option.
3.  Use this Repository on your Web-Server to get updates.
4.  With Update Site Project software updates not work so easily.

# java - 如何为在 Selenium 中充当按钮的图像记录单击事件？

> ID：15651661
> 
> 赞同：0
> 
> 时间：2013-03-27T03:58:08.923
> 
> 标签：java, html, forms, selenium-rc, onsubmit

在我的应用程序中，我有一个图像作为按钮。当我在 Selenium IDE 中记录按钮单击事件并重播时，我只是播放它，但单击事件实际上并没有提交值

例如：提交按钮（这是一个图像）实际上应该将值提交到数据库。但是当我签入数据库时​​，没有在那里添加值

***元素值***

```
<input width="98" vspace="3" type="Image" height="15" border="0" 
id="Image1" src="images/butt_submit.gif" value="Submit" name="Submit"> 
```

***硒代码***

```
selenium.click("//input[@id='Image1']");
selenium.waitForPageToLoad("30000"); 
```

请协助。

感谢您！

HG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:33:55.493

问题不在于 Selenium/IDE 没有单击图像。即使您手动提交，您使用的代码（在 HTML 中）也不会提交表单数据。你先检查了吗？

无论如何，如果您想使用**图像作为**表单的提交操作，请为图像添加一个**`onclick`**事件以提交表单。请参阅[W3Schools 上的此](http://www.w3schools.com/jsref/met_form_submit.asp)示例`form.submit`：

```
<html>
<head>
<script>
function formSubmit()
{
document.getElementById("frm1").submit();
}
</script>
</head>
<body>

<form id="frm1" action="form_action.asp">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="button" onclick="formSubmit()" value="Submit form">
</form>

</body>
</html> 
```

他们在这里使用了一个按钮，但您可以将其用于您的图像。

有关 HTML 表单基础知识的更多信息：http: [//www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

# ruby-on-rails - 我可以在我的电脑上练习 capistrano 吗？

> ID：15651663
> 
> 赞同：0
> 
> 时间：2013-03-27T03:58:16.657
> 
> 标签：ruby-on-rails, capistrano

我正在研究 ruby​​ on rails，但我在使用 capistrano 部署的章节中停了下来，

我想知道我是否可以仅在装有 Windows 7 的电脑上使用 capistrano 进行练习？

我不太清楚在部署什么，似乎是要在不同的地方使用多个服务器，所以，我可以只在一台电脑上练习吗？（我的电脑装有 windows 7）

如果您对此有任何教程或想法，我想知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:58:20.317

如果您在虚拟机上安装了 Linux，是否**只有我的装有 Windows 7 的电脑**才有效？

如果是 - 您可以设置带有[Vagrant的虚拟机，在](http://www.vagrantup.com/)[带有 Vagrant](http://railscasts.com/episodes/292-virtual-machines-with-vagrant) railscast的虚拟机中描述。安装许多可用[操作系统](http://www.vagrantbox.es/)之一，并开始使用 capistrano 部署到您的新“虚拟服务器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:16:16.913

您可以在亚马逊上免费获得 1 年的微型实例，然后您不仅可以练习部署，还可以在生产环境中测试您的应用程序。您也可以将其他系统安装到virtualpc（或类似的）中，正确路由到里面，然后在配置环境后，您可以尝试部署。然而这并不容易

# python - 随着时间的推移跟踪文件

> ID：15651666
> 
> 赞同：1
> 
> 时间：2013-03-27T03:58:28.943
> 
> 标签：python, file, file-io, filesystems

我的想法是在两个时间点之间随时间跟踪文件系统上的特定文件，`T1`并且`T2`. 这里的重点在于将文件视为文件系统上的唯一实体。一种可以改变数据和属性但仍保持其独特身份的产品。

最终目标是通过捕获`T1`和`T2`记录文件的数据哈希和创建/修改属性`T1`并将它们与`T2`. 如果所有属性都未更改但哈希未验证，我们可以说存在问题。在所有其他情况下，我们可能愿意说更改的哈希是修改的结果，而未更改的哈希和未更改的修改属性是文件（数据）根本没有更改的结果。

现在，有几种引用文件的方法和相应的缺点：

*   *文件的路径*：但是，如果将文件移动到不同的位置，此方法将失败。
*   *文件数据的数据哈希*：允许找到文件，或者更确切地说（a）指向磁盘上文件数据的指针，即使指针已移动到不同的目录，但数据不能更改或者这种方法也失败了。

我的想法是检索该特定文件的 fileId`T1`以跟踪该文件 at `T2`，即使它已更改其位置，因此不需要将其视为*新*文件。

我知道 pywin 提供的两种方法。`win32file.GetFileInformationByHandle()`和`win32file.GetFileInformationByHandleEx()`，但它们显然仅限于特定的文件系统，破坏了跨平台兼容性并偏离了跟踪文件的通用方法。

我的问题很简单：是否有任何其他想法/理论来跟踪文件，最好是跨平台/FS？

欢迎任何头脑风暴的思考食物！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:10:20.760

一般来说，这并不可行，因为文件身份的想法是一种幻觉（类似于物理身份的幻觉，但这不是哲学论坛）。

1.  您无法使用文件内容跟踪身份，因为内容会发生变化。

2.  您无法通过附加到文件的任何其他属性进行跟踪，因为许多文件编辑器将通过删除旧文件并创建新文件来保存更改。

版本控制系统以三种方式处理此问题：

1.  (CVS) 不要跟踪移动操作。

2.  （颠覆）手动跟踪移动操作。

3.  (Git) 使用启发式方法将操作标记为基于文件内容更改的“移动”操作（例如，如果新文件与现有文件的差异小于 50%，则将其标记为副本）。

像 inode 数量这样的东西**并不**稳定，不值得信任。在这里，您可以看到使用 Vim 编辑文件会更改 inode 编号，我们可以使用以下命令进行检查`stat -f %i`：

```
$ 触摸文件.txt
$ stat -f %i 文件.txt
4828200
$ vim 文件.txt
...对 file.txt 进行更改...
$ stat -f %i 文件.txt
4828218

```

# paypal - 在创建付款响应中缺少送货地址和给卖家的备注

> ID：15651668
> 
> 赞同：5
> 
> 时间：2013-03-27T03:59:07.467
> 
> 标签：paypal, paypal-sandbox

我正在使用 REST API 使用 payment_method="paypal" 创建付款（在沙盒环境中）。出于某种原因，我没有在响应中的 payer_info 对象中获得送货地址。我也不确定如何通过 REST API 获取“给卖家的备注”。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T01:04:20.683

在我们提供的 REST API 中，目前不会为 PayPal 交易返回送货地址数据，除非最初与请求一起提交了送货地址。

然而，我们新的 REST API 正在不断发展——不过，我看到了您对它的所有请求，所以我肯定会传递这些信息。

在此期间，您或许可以考虑再次调用我们的经典`GetExpressCheckoutDetails`API。这只需要 Express Checkout 令牌 (EC-xxxxx)、经典 API 用户名、API 密码和 API 签名，并在响应 ( [docs](https://developer.paypal.com/webapps/developer/docs/classic/api/merchant/GetExpressCheckoutDetails_API_Operation_NVP/) ) 中向您返回送货地址数据（除其他外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T18:26:23.207

Paypal REST Api 现在支持送货地址。设置 ShippingAddress 对象，然后将其添加到 ItemList 对象

```
 $shippingAddress = new ShippingAddress();
 $shippingAddress->setLine1($_POST['shipstreet'])
->setCity($_POST['shipcity'])
->setState($_POST['shipstate'])
->setPostalCode($_POST['shipzip'])
->setCountryCode($_POST['shipcountry'])
->setRecipientName($_POST['shipname']);

 $itemList = new ItemList();
 $itemList->setItems($itemsarr); //my array of items
 $itemList->setShippingAddress($shippingAddress); 
```

您可能希望在发送 POST 变量之前对其进行清理。其他一些有趣的注释，您可以设置 payer_info 的名字和姓氏以及电子邮件地址。

```
 $payerinfo = new PayerInfo();
 $payerinfo->setEmail($_POST['email'])
->setFirstName($_POST['firstName'])
->setLastName($_POST['lastName']);

 $payer = new Payer();
 $payer->setPaymentMethod("credit_card")
->setPayerInfo($payerinfo)
->setFundingInstruments(array($fi)); 
```

# view - 如何在 sencha touch 2 中创建这样的视图？

> ID：15651671
> 
> 赞同：-1
> 
> 时间：2013-03-27T03:59:17.530
> 
> 标签：view, sencha-touch, sencha-touch-2

我需要在 sencha touch 中创建这样的视图。我是初学者。请帮我。我没有在组件上获得点击事件。

![在此处输入图像描述](../Images/eee96cde2a58736456da884651496bb8.png)

我的代码

```
config: {
    defaults: {
        margin: 10
    }, layout: {
        type: 'hbox'
    },
    items: [{

        flex:1,
        layout: {
            type: 'vbox'
        },
        items: [
            {
                xtype: 'component', flex: 10,
                html: 'Flex: 1', style: 'background-color: lightgray'
            },
            {
                xtype: 'spacer',flex:1
            },
            {
                xtype: 'component', flex: 10,
                html: 'Flex: 2', style: 'background-color: pink'
            }
        ]
    }, {

        flex: 1,
        layout: {
            type: 'vbox'
        },
        items: [
            {
                xtype: 'component', flex: 10,
                html: 'Flex: 3', style: 'background-color: orange',
                handler:function() {
                    console.log('Tapped !');
                }

            },
            {
                xtype: 'spacer',flex:1
            },
            {
                xtype: 'component', flex: 10,
                html: 'Flex: 4', style: 'background-color: lightblue'
            }
        ]

    }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:02:55.553

试试 Ext.dataview.DataView。您将从 github 获得示例。

# c# - 如何在 2 个条件下在 Linq 中加载数据

> ID：15651680
> 
> 赞同：0
> 
> 时间：2013-03-27T04:00:12.863
> 
> 标签：c#, sql, linq, linq-to-entities

我正在尝试根据 2 个条件在 Linq 中加载数据，但无法获得准确的结果：

```
dlo.AssociateWith<DBProp>(item => item.Tratable.Where(t => t.Flag == null && t.TratableChild.Flag == null )); 
```

在这里，如果所有 tratablechild 标志都不是 NULL，我将获得第一行值。我不需要它——即在 Linq Tratable 中是父类。

在此我将 tratablechild 作为 entityref，tratablechild 包含单个 Tratable ID 的一些标志值，但在运行时我只想加载标志值为 NULL 的 tratablechild。
否则我只想将 Tratablechild 本身设置为 NULL。这怎么可能？

# javascript - 需要一个 Javascript URL 正则表达式

> ID：15651690
> 
> 赞同：2
> 
> 时间：2013-03-27T04:01:42.023
> 
> 标签：javascript, jquery, regex, soundcloud

想知道是否有人可以帮助创建一个正则表达式..

基本上，获取 iFrame 的 src，并查看它是否来自 SoundCloud。如果是，则返回其 id。例如：

```
var src = 'http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F85110490&auto_play=false&show_playcount=false&show_user=false&show_comments=false&amp;buying=false&liking=false&sharing=false&show_artwork=false&color=00e7ff';

function soundcloudId(src) {
   var p = /___________/;
   return (src.match(p)) ? RegExp.$1 : false;
}

soundcloudId(src); 
```

结果，它将通过正则表达式运行“src”，如果是 soundcloud 链接，则返回 85110490。否则，返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:07:52.957

试试这个正则表达式：

```
/http:\/\/w.soundcloud\.com\/.*%2Ftracks%2F([0-9A-F]+)/ 
```

可运行示例：http: [//jsfiddle.net/mYf6P/](http://jsfiddle.net/mYf6P/)

# git - 如何将完成的工作补丁而不是其整个历史合并到测试分支中？

> ID：15651692
> 
> 赞同：2
> 
> 时间：2013-03-27T04:02:05.883
> 
> 标签：git, branching-and-merging, branching-strategy

开发人员开始开发一项功能，我们称之为*“修复硬编码链接”*，一旦完成，它就会传递给另一个开发人员进行同行评审。同行评审员对代码更改和**将功能分支合并到测试分支没问题**。*“修复硬编码链接”*现在在测试服务器上等待技术测试。

`test`是功能分支在经过其他开发人员同行评审后合并的`staging`地方，是功能分支通过同行评审、TT 和 UAT 后合并的分支。

下一位开发人员开始处理下一张卡片并创建一个如下所示的分支：

```
git checkout test
git checkout -b story/bar 
```

开发人员完成工作并将其传递给同行评审。同行审阅者对传递到 TT 和 UAT 的代码感到满意，所有人都很高兴并进入 PO。PO 很高兴，然后他**将功能分支合并到 staging**

```
git checkout staging
git merge origin/story/bar 
```

通过这样做，我发现我们不仅应用了附加到特定卡修复程序的补丁，而且还应用了分支附带的整个历史记录。结果是提交*“修复硬编码链接”*正在暂存，但尚未完成该过程。

*   我们的方法有什么问题以及改进它的任何建议吗？
*   我们应该在 staging 之外创建我们的功能分支吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:49:44.810

基本上，您需要考虑发布工作流程（推/拉），而不仅仅是合并工作流程（`feature`to `test`to `staging`to...）：此发布工作流程与[合并工作流程](https://stackoverflow.com/questions/216212/how-do-you-maintain-development-code-and-production-code#216228)[正交](https://stackoverflow.com/questions/2563836/sell-me-distributed-revision-control/2563917#2563917)。

任何新`feature`分支都必须在您要使用的最新官方版本之上开发`feature`。

如果是`staging`，则表示：

```
git fetch
git checkout -b newFeature origin/staging
# hack...

# make sure newFeature still works on top of staging as right now
# since staging might have received other feature 
# during the development of newFeature

git fetch
git rebase origin/staging
# local and/or unit tests...
# push for review
git push -u origin newFeature 
```

当您合并 a`feature`到`test`or`staging`时，您应该重新`newFeature`设置在 之上`test`，然后在 之上，然后才`staging`合并`newFeature`（快进合并）。
变基期间的任何冲突都意味着该功能被拒绝（开发人员必须获取，然后`newFeature`在导致问题的基础上本地变基该分支，以查看为什么存在冲突）。

# delphi - FindStyleResource 找不到浮动动画

> ID：15651699
> 
> 赞同：0
> 
> 时间：2013-03-27T04:02:41.990
> 
> 标签：delphi, styles, firemonkey-fm2

我正在尝试关闭 firemonkey 进度条上的连续动画。但我无法弄清楚如何使用 FindStyleResource 找到动画对象。

```
T := MyProgressBar.FindStyleResource('floatanimation');
if (T <> nil) and (T is TFloatAnimation) then
  TFloatAnimation(T).Loop := false; 
```

在上面的代码中，T 总是 nil。非常感谢任何关于我是否会出错的建议。

马丁

# sql-server - SQL Server 2008 Management Studio 不显示数据库

> ID：15651701
> 
> 赞同：1
> 
> 时间：2013-03-27T04:02:47.527
> 
> 标签：sql-server, windows-server-2008-r2, ssms

我全新安装了 Windows Server 2008 R2 SP1，并且刚刚安装了 SQL Server 2008 R2，包括 SQL Server 2008 R2 Management Studio。

当我进入 Management Studio 时，它没有显示在安装过程中创建的 SQL Server 实例。它只有（本地），根本不会让我连接到它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:45:07.347

问题解决了。Management Studio 需要`<computer name>/<instance name>`在“服务器”部分下。我只是输入实例名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:50:21.617

首先检查您的 SQL 配置管理器上是否安装了 SQL Server 2008 实例。

如果它不存在，您需要重新安装 sql server 2008 r2 并按照以下链接上的这些步骤操作：

[SQL SERVER – 2008 – 带图像的分步安装指南](http://blog.sqlauthority.com/2008/06/12/sql-server-2008-step-by-step-installation-guide-with-images/)

它存在只需添加服务器名称：yourpcname

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T18:09:07.530

另一个对我有用的解决方案：

输入“localhost”作为服务器（计算机名\MSSQLSERVER 失败）

不知道为什么，但配置管理器中显示的名称“MSSQLSERVER”不是我通过 Management Studio 登录时显示的名称。Management Studio 中的名称是 SQL Server 9.0.5000，它对应于 SQL Server 2005 SP4（在我的情况下是正确的）。

# ios - 在xcode4.6中使用sqlite将图像插入数据库

> ID：15651708
> 
> 赞同：5
> 
> 时间：2013-03-27T04:03:28.057
> 
> 标签：ios, database, image, sqlite

*我正在使用 Xcode 4.6 中的 sqlite 将IMAGE 插入数据库*，我只想插入一个**文本字段**和**uiimageview**（具有动态生成的条形码图像）。

不幸的是我得到***“错误是：内存不足”***

听到是我正在使用的代码，请让我知道我的错误在哪里&让我知道更多细节

*** 1\. 数据库创建***

```
-(void)createoropendb {

    NSArray *path =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docpath =[path objectAtIndex:0];

    dbpathstring =[docpath stringByAppendingPathComponent:@"DataBase.db"];
    char *error;

    NSFileManager *filemanager =[NSFileManager defaultManager];

    if (![filemanager fileExistsAtPath:dbpathstring])
    {
        const char *dbpath =[dbpathstring UTF8String];

        if (sqlite3_open(dbpath, &barcodeDB) == SQLITE_OK)
        {
            const char *sql_start ="CREATE TABLE IF NOT EXISTS DBTABLE1(NAME TEXT UNIQUE,IMAGEURL BLOB)";
             NSLog(@"db created");
            sqlite3_exec(barcodeDB, sql_start,NULL,NULL, &error);
            sqlite3_close(barcodeDB);

        }
    }
} 
```

*** 2.按钮插入数据***

```
- (IBAction)savedata:(id)sender  {
    UIImage *image =imageView.image;
    NSData *imageData=UIImagePNGRepresentation(image);   
    [self SaveImagesToSql: imageData.bytes:Uimagetext.text];  
} 
```

*** 3.插入数据的方法***

```
- (void) SaveImagesToSql: (NSData*) imgData :(NSString*) mainUrl {   

    const char* sqliteQuery = "INSERT INTO DBTABLE1(NAME,IMAGEURL) VALUES (?, ?)";
    sqlite3_stmt* statement;

    if( sqlite3_prepare_v2(barcodeDB, sqliteQuery, -1, &statement, NULL) == SQLITE_OK )
    {
        sqlite3_bind_text(statement, 1,[mainUrl UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_blob(statement, 2,[imgData bytes],[imgData length], SQLITE_TRANSIENT);

        sqlite3_step(statement);

        NSLog( @"Saved image successfully" );

    }
    else
    {

      NSLog( @"SaveBody: Failed from sqlite3_prepare_v2\. Error is:  %s",sqlite3_errmsg(barcodeDB) );
    }
    // Finalize and close database.
    sqlite3_finalize(statement);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:06:51.683

返回代码（不是`SQLITE_OK`）无疑是正在返回`SQLITE_MISUSE`，这意味着您正在尝试使用尚未打开的数据库。如果数据库不存在，则您`createoropendb`正在创建和打开，但如果它确实存在，则您不会打开它（即使它确实存在，您也会在创建后关闭它）。

底线，如果您调用时未打开数据库，则`sqlite3_prepare`该函数将返回`SQLITE_MISUSE`，任何调用都`sqlite3_errmsg`将返回误导性的“内存不足”文本消息。

# php - PayPal Rest API for Payments 在沙箱中返回 NULL

> ID：15651716
> 
> 赞同：3
> 
> 时间：2013-03-27T04:04:10.747
> 
> 标签：php, api, rest, paypal, payment

我有一个 PayPal 沙盒帐户。我可以在 PHP 上使用 curl 通过 api 检索令牌，但是处理测试卡只会返回 null。有人看到代码有问题吗？这是 PayPal 沙盒的已知问题吗？下面片段中的客户端是虚构的，但是，如前所述，使用我的真实凭据我可以成功调用以检索令牌。

生成请求的 PHP：

```
 <?php

    class psPayPal {

    private $tokenUrl = 'https://api.sandbox.paypal.com/v1/oauth2/token';
    private $paymentUrl = 'https://api.sandbox.paypal.com/v1/payments/payment';
    private $client = 'dlkjasdfkja;skdjfaksdjfkajsdkfjaejkjefkekjakdjfaksjdfadjf;ja';
    private $secret = 'klj;akjdfjeieiadfaldkjfelkajsdfkjaejeiejisadif;alkdsfj;kjjie';
    private $token;
    private $tokenHandle;
    private $paymentHandle;

    public function __construct()
    {
        $this->tokenHandle = curl_init($this->tokenUrl);
        $this->buildTokenRequest();
    }

    public function buildTokenRequest()
    {
        $header = array(
            'Accept: application/json',
            'Accept-Language: en_US'
        );

        $user = $this->client . ':' . $this->secret;

        $data = 'grant_type=client_credentials';

        curl_setopt($this->tokenHandle, CURLOPT_HTTPHEADER, $header);
        curl_setopt($this->tokenHandle, CURLOPT_USERPWD, $user);
        curl_setopt($this->tokenHandle, CURLOPT_POSTFIELDS, $data);
        curl_setopt($this->tokenHandle, CURLOPT_RETURNTRANSFER, true);

        $this->commitTokenRequest();
    }

    public function commitTokenRequest()
    {
        $response = json_decode(curl_exec($this->tokenHandle));

        $this->token = $response->access_token;

        curl_close($this->tokenHandle);
    }

    public function buildPaymentRequest($cost = '', $description = '')
    {
        $this->paymentHandle = curl_init($this->paymentUrl);

        $header = array(
            'Accept: application/json',
            'Accept-Language: en_US',
            'Authorization:Bearer ' . $this->token
        );

        $data = array(
            'intent' => 'sale',
            'payer' => array(
                'payment_method' => 'credit_card',
                'funding_instruments' => array(
                        array(
                            'credit_card' => array(
                                'number' => '5500005555555559',
                                'type' => 'mastercard',
                                'expire_year'=> '2018',
                                'cvv2'=> '111',
                                'first_name'=> 'Joe',
                                'last_name' => 'Shopper'
                            )
                        )
                )
            ),
            'transactions' => array(
                    array(
                        'amount' => array(
                            'total' => '39.54',
                            'currency' => 'USD'
                        ),
                        'description' => 'This is my descrription for hats'
                    )
            )
        );
        $d = json_encode($data);

        curl_setopt($this->paymentHandle, CURLOPT_HTTPHEADER, $header);
        curl_setopt($this->paymentHandle, CURLOPT_POSTFIELDS, $d);
        curl_setopt($this->paymentHandle, CURLOPT_RETURNTRANSFER, true);

        $this->commitPaymentRequest();
    }

    public function commitPaymentRequest()
    {
        $response = json_decode(curl_exec($this->paymentHandle));

        var_dump($response);

        curl_close($this->paymentHandle);
    }

}

?> 
```

尽管我相信上面的代码是完整的，但我尝试了多种选择。我还验证了我使用 JSON Lint 发送的 JSON。JSON如下：

```
{
"intent": "sale",
"payer": {
    "payment_method": "credit_card",
    "funding_instruments": [
        {
            "credit_card": {
                "number": "5500005555555559",
                "type": "mastercard",
                "expire_year": "2018",
                "cvv2": "111",
                "first_name": "Joe",
                "last_name": "Shopper"
            }
        }
    ]
},
"transactions": [
    {
        "amount": {
            "total": "39.54",
            "currency": "USD"
        },
        "description": "This is my descrription for hats"
    }
] 
```

}

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:24:03.383

原来解决方案是添加一个标头，Content-Type: application/json。由于某种原因，php 在令牌请求中猜到了正确的 Content-type（可能是因为 Accepts 标头），但是当传递 json-array 时，将 content-type 更改为 application/xml。现在一切都好！

# iphone - 如何为 CAShapeLayer 路径和填充颜色设置动画

> ID：15651717
> 
> 赞同：20
> 
> 时间：2013-03-27T04:04:18.473
> 
> 标签：iphone, ios, core-animation, cgpath, cashapelayer

如何为 CAShapeLayer 路径和填充颜色设置动画？

如何为 strokeEnd 设置动画以显示正在绘制的路径？以及如何为填充颜色设置动画？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-27T04:04:18.473

动画路径

```
 //setup the CAShapeLayer
myShapeLayer.strokeColor = [[UIColor blueColor] CGColor];
myShapeLayer.lineWidth = 5;
myShapeLayer.fillColor = [[UIColor yellowColor] CGColor];

//Display it!
[self.view.layer addSublayer:myShapeLayer];

//Animate path
CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
pathAnimation.duration = 1.5f;
pathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
pathAnimation.toValue = [NSNumber numberWithFloat:1.0f];
pathAnimation.repeatCount = 10;
pathAnimation.autoreverses = YES;
[myShapeLayer addAnimation:pathAnimation forKey:@"strokeEnd"];

//Animate colorFill
CABasicAnimation *fillColorAnimation = [CABasicAnimation animationWithKeyPath:@"fillColor"];
fillColorAnimation.duration = 1.5f;
fillColorAnimation.fromValue = (id)[[UIColor clearColor] CGColor];
fillColorAnimation.toValue = (id)[[UIColor yellowColor] CGColor];
fillColorAnimation.repeatCount = 10;
fillColorAnimation.autoreverses = YES;
[myShapeLayer addAnimation:fillColorAnimation forKey:@"fillColor"]; 
```

我希望这有帮助 ：）

**2021 更新**

**迅速**

```
 myShapeLayer.strokeColor = UIColor.blue.cgColor
myShapeLayer.lineWidth = 5
myShapeLayer.fillColor = UIColor.yellow.cgColor

//Display it!
view.layer.addSublayer(myShapeLayer)

//Animate path
let pathAnimation = CABasicAnimation(keyPath: "strokeEnd")
pathAnimation.duration = 1.5
pathAnimation.fromValue = NSNumber(value: 0.0)
pathAnimation.toValue = NSNumber(value: 1.0)
pathAnimation.repeatCount = 10
pathAnimation.autoreverses = true
myShapeLayer.add(pathAnimation, forKey: "strokeEnd")

//Animate colorFill
let fillColorAnimation = CABasicAnimation(keyPath: "fillColor")
fillColorAnimation.duration = 1.5
fillColorAnimation.fromValue = UIColor.clear.cgColor
fillColorAnimation.toValue = UIColor.yellow.cgColor
fillColorAnimation.repeatCount = 10
fillColorAnimation.autoreverses = true
myShapeLayer.add(fillColorAnimation, forKey: "fillColor") 
```

# jsf-2 - JSF 2 验证码使用 我在我的应用程序中遇到问题，其中我有一个作为 JSF 自定义标签构建的验证码组件： 在我的 JavaEE 6 webapp 中，我使用：JSF 2.1 + Jboss Richfaces 问问题 问问题 2013-03-27T04:04:28.957 3465 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在我的应用程序中遇到问题，其中我有一个作为 JSF 自定义标签构建的验证码组件： 在我的 JavaEE 6 webapp 中，我使用：JSF 2.1 + Jboss Richfaces 4.2.3 + EJB 3.1 + JPA 2.0 + PrettyFaces 3.3.3 我有一个 JSF2 自定义标签，即： <tag><tag-name>captcha</tag-name> tags/captcha.xhtml </tag> 在我的名为 accountEdit.xhtml 的 XHTML 页面中，我显示了验证码： <ui:fragment rendered="#{customerMB.screenComponent.pageName eq 'create'}"><atl:captcha></atl:captcha></ui:fragment>在 captcha.xhtml 中： <ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich">| <h:graphicimage id="capImg" value="#{facesContext.externalContext.requestContextPath}/../captcha.jpg"></h:graphicimage> | <a4j:commandbutton id="resetCaptcha" value="#{msg.changeImage}" immediate="true" action="#{userMB.resetCaptcha}"></a4j:commandbutton> |
|  |</ui:composition> 在我的 web.xml 中，我配置了一个 CaptchaServlet 来处理在运行时生成验证码的请求： <servlet><servlet-name>CaptchaServlet</servlet-name> <servlet-class>com.myapp.web.common.servlet.CaptchaServlet</servlet-class> <init-param><description>passing height</description> <param-name>height</param-name> <param-value>30</param-value></init-param> <init-param><description>passing width</description> <param-name>width</param-name> <param-value>120</param-value></init-param> <load-on-startup>3</load-on-startup></servlet> <servlet-mapping><servlet-name>CaptchaServlet</servlet-name> <url-pattern>/captcha.jpg</url-pattern></servlet-mapping> 我的 CaptchaServlet 实现： public class CaptchaServlet extends HttpServlet { /** * */ private static final long serialVersionUID = 6105436133454099605L; private int height = 0; private int width = 0; public static final String CAPTCHA_KEY = "captcha_key_name"; @Override public void init(ServletConfig config) throws ServletException { super.init(config); height = Integer .parseInt(getServletConfig().getInitParameter("height")); width = Integer.parseInt(getServletConfig().getInitParameter("width")); } @Override protected void doGet(HttpServletRequest req, HttpServletResponse response) throws IOException, ServletException { // Expire response response.setHeader("Cache-Control", "no-cache"); response.setDateHeader("Expires", 0); response.setHeader("Pragma", "no-cache"); response.setDateHeader("Max-Age", 0); BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB); Graphics2D graphics2D = image.createGraphics(); Hashtable <textattribute, object="">map = new Hashtable<textattribute, object="">(); Random r = new Random(); String token = Long.toString(Math.abs(r.nextLong()), 36); String ch = token.substring(0, 6); Color c = new Color(0.6662f, 0.4569f, 0.3232f); GradientPaint gp = new GradientPaint(30, 30, c, 15, 25, Color.white, true); graphics2D.setPaint(gp); Font font = new Font("Verdana", Font.CENTER_BASELINE, 26); graphics2D.setFont(font); graphics2D.drawString(ch, 2, 20); graphics2D.dispose(); HttpSession session = req.getSession(true); session.setAttribute(CAPTCHA_KEY, ch); OutputStream outputStream = response.getOutputStream(); ImageIO.write(image, "jpeg", outputStream); outputStream.close(); } } 当我在 Glassfish 3.1.1 上运行此应用程序时，在渲染时调用 Servlet 的 doGet() 方法 对于呈现的 HttpServlet doGet() 方法： <h:graphicimage id="capImg" value="#{facesContext.externalContext.requestContextPath}/../captcha.jpg">doGet() 只为 Google Chrome 呈现一次，因此可以正确呈现。 对于 Firefox 和 IE，doGet() 渲染两次更新验证码密钥，但不更新页面上绘制的验证码图像。 如果有人可能知道什么可以解决这个问题，以及为什么 Chrome 的这种行为不同于其他浏览器，请告诉我。 提前致谢！ 具有大量参数的最佳编译方式（一种 cpp 程序） 这些天我正在学习opengl，并且正在从命令行编译（我不想使用IDE，因为我习惯了VIM）。编译 opengl 文件可能很麻烦，假设我有一个名为 hello.cpp 的文件，为了快速编译和运行，我必须这样做： g++ -framework GLUT -framework OpenGL -framework Cocoa hello.cpp & ./a.out 由于我正在学习 opengl，因此我将使用许多不同的文件进行测试，并且一直键入上述命令对我来说是不可行的。我想要的是这样的： some_command % & ./a.out some_command最好是一些常用的（如g++、make），%是文件名。 我认为 makefile 可能是一个可能的解决方案，所以我继续学习了 makefile 但它似乎适用于特定名称；有一些方法可以将参数传递给makefile，但对我来说似乎还是太麻烦了（我必须手动输入 ARGUMENT=filename 部分）。 另外我认为 shell 脚本可能是一个很好的解决方案。唯一的后备是我必须为 shell 脚本自定义一个名称。 我想知道是否有更好的方法让我快速编译和运行 opengl cpp 文件 非常感谢。 jsf-2java-ee-6graphics2dservlet-3.0prettyfaces 4 2 回答 2 This answer is useful 3 浏览器正在缓存响应。您避免这种情况的尝试是不完整且不正确的： response.setHeader("Cache-Control", "no-cache"); response.setDateHeader("Expires", 0); response.setHeader("Pragma", "no-cache"); response.setDateHeader("Max-Age", 0); 请参阅如何在所有浏览器中控制网页缓存？对于正确的集合： response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1\. response.setHeader("Pragma", "no-cache"); // HTTP 1.0\. response.setDateHeader("Expires", 0); // Proxies. 此外，为了使其更健壮，将带有当前时间戳的查询字符串（以毫秒为单位）添加到图像 URL。这是一个示例，前提是您有一个java.util.Date名为托管 bean 的实例now： <h:graphicimage id="capImg" value="#{request.contextPath}/../captcha.jpg?#{now.time}">（请注意，我还简化了获取请求上下文路径的方法，我只是不明白如果你去域根目录有什么用../） 于 2013-03-27T12:11:33.500 回答 This answer is useful 0 我找到了一个解决方案，不是最佳解决方案，但它有效，这里是： 验证码.xhtml

| <h:graphicimage url="#{request.contextPath}/../jcaptcha"></h:graphicimage> |  |

CaptchaServlet doGet 方法： protected void doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException { byte[] captchaChallengeAsJpeg = null; // the output stream to render the captcha image as jpeg into ByteArrayOutputStream jpegOutputStream = new ByteArrayOutputStream(); try { // get the session id that will identify the generated captcha. //the same id must be used to validate the response, the session id is a good candidate! String captchaId = httpServletRequest.getSession().getId(); // call the ImageCaptchaService getChallenge method BufferedImage challenge = CaptchaServiceSingleton.getImageChallengeForID(captchaId, httpServletRequest.getLocale()); // a jpeg encoder JPEGImageEncoder jpegEncoder = JPEGCodec.createJPEGEncoder(jpegOutputStream); jpegEncoder.encode(challenge); } catch (IllegalArgumentException e) { httpServletResponse.sendError(HttpServletResponse.SC_NOT_FOUND); return; } catch (CaptchaServiceException e) { httpServletResponse.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); return; } captchaChallengeAsJpeg = jpegOutputStream.toByteArray(); // flush it in the response httpServletResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1\. httpServletResponse.setHeader("Pragma", "no-cache"); httpServletResponse.setDateHeader("Expires", 0); httpServletResponse.setContentType("image/jpeg"); ServletOutputStream responseOutputStream = httpServletResponse.getOutputStream(); responseOutputStream.write(captchaChallengeAsJpeg); responseOutputStream.flush(); responseOutputStream.close(); } 创建 CaptchaServiceRequestSingleton.java package com.myapp.web.common.listener; import java.awt.image.BufferedImage; import java.util.HashMap; import java.util.Locale; import com.octo.captcha.service.image.DefaultManageableImageCaptchaService; import com.octo.captcha.service.image.ImageCaptchaService; public class CaptchaServiceSingleton { private static ImageCaptchaService instance = new DefaultManageableImageCaptchaService(); private static final int MAX_CACHE_SIZE = 200; private static HashMap <string, bufferedimage="">captchaImgCache = new HashMap<string, bufferedimage="">(); public static ImageCaptchaService getInstance(){ return instance; } public static BufferedImage getImageChallengeForID(String id, Locale locale) { if (captchaImgCache.containsKey(id)) { return captchaImgCache.get(id); } else { BufferedImage bImage = instance.getImageChallengeForID(id, locale); // if limit reached reset captcha cache if (captchaImgCache.size() > MAX_CACHE_SIZE) { captchaImgCache = new HashMap<string, bufferedimage="">(); } captchaImgCache.put(id, bImage); return bImage; } } public static void resetImageChallengeForID(String id) { if (captchaImgCache.containsKey(id)) { captchaImgCache.remove(id); } } } 单击“创建帐户”按钮时，验证码被重置： CustomerMB.openCreateCustomerAccount()： public String openCreateCustomerAccount() { customerAccountEditVO = new CustomerAccountVO(); screenComponent.setPageName(NameConstants.CREATE); getUserMB().resetCaptcha(); return null; } 在 UserMB.resetCaptcha() 中： public String resetCaptcha() { CaptchaServiceSingleton.resetImageChallengeForID(JSFUtil.getRequest().getRequestedSessionId()); return null; } 也许这不是完美的解决方案，但至少它适用于所有浏览器。 于 2013-03-29T22:25:04.003 回答 Related 1 teamcity - Team City 项目和用户帐户迁移到测试环境 1 android - 如何让 USB 电阻式触摸屏在 Android 上工作。 0 jquery - jQuery Mobile 启动画面在 Safari 中不断重新加载 2 vb.net - VB 中的 SQL 查询 - 缺少操作数 9 sass - Sass：浏览器供应商前缀 2 objective-c - NSDateFormatter 解析错误 1 jquery - jQuery：.load() 没有响应 2 php - 代码优化——mysql输出 1 nginx - 如何使用 NGINX 映射多个 URI？ 0 iphone - 长按时 UILongPressGestureRecognizer 不显示 ActionSheet Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,></string,></string,></h:graphicimage></h:graphicimage></textattribute,></textattribute,>

> ID：15651719
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jsf-2, java-ee-6, graphics2d, servlet-3.0, prettyfaces

我在我的应用程序中遇到问题，其中我有一个作为 JSF 自定义标签构建的验证码组件：

在我的 JavaEE 6 webapp 中，我使用：JSF 2.1 + Jboss Richfaces 4.2.3 + EJB 3.1 + JPA 2.0 + PrettyFaces 3.3.3

我有一个 JSF2 自定义标签，即：

```
<tag>
    <tag-name>captcha</tag-name>
    <source>tags/captcha.xhtml</source>
</tag> 
```

在我的名为 accountEdit.xhtml 的 XHTML 页面中，我显示了验证码：

```
 <ui:fragment rendered="#{customerMB.screenComponent.pageName eq 'create'}">
                    <div class="form_row">
                            <label class="contact"><strong>#{msg.captcha}:</strong>
                            </label>
                            <atl:captcha></atl:captcha>                     
                    </div>                                                          
                </ui:fragment> 
```

在 captcha.xhtml 中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

    <table border="0">
        <tr>
            <td>
            <h:graphicImage id="capImg" value="#{facesContext.externalContext.requestContextPath}/../captcha.jpg" />
            </td>
            <td><a4j:commandButton id="resetCaptcha" value="#{msg.changeImage}" immediate="true" action="#{userMB.resetCaptcha}" >
                <a4j:ajax render="capImg" execute="@this" />                
            </a4j:commandButton></td>
        </tr>
        <tr>
            <td><h:inputText value="#{userMB.captchaComponent.captchaInputText}" /></td>            
        </tr>
    </table>

</ui:composition> 
```

在我的 web.xml 中，我配置了一个 CaptchaServlet 来处理在运行时生成验证码的请求：

```
<servlet>   
    <servlet-name>CaptchaServlet</servlet-name>
    <servlet-class>com.myapp.web.common.servlet.CaptchaServlet</servlet-class>      
    <init-param>
        <description>passing height</description>
        <param-name>height</param-name>
        <param-value>30</param-value>
    </init-param>
    <init-param>
        <description>passing width</description>
        <param-name>width</param-name>
        <param-value>120</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>CaptchaServlet</servlet-name>
    <url-pattern>/captcha.jpg</url-pattern>
</servlet-mapping> 
```

我的 CaptchaServlet 实现：

```
public class CaptchaServlet extends HttpServlet {

    /**
     * 
     */
    private static final long serialVersionUID = 6105436133454099605L;

    private int height = 0;
    private int width = 0;
    public static final String CAPTCHA_KEY = "captcha_key_name";

    @Override
    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        height = Integer
                .parseInt(getServletConfig().getInitParameter("height"));
        width = Integer.parseInt(getServletConfig().getInitParameter("width"));
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse response)
            throws IOException, ServletException {

        // Expire response
        response.setHeader("Cache-Control", "no-cache");
        response.setDateHeader("Expires", 0);
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Max-Age", 0);

        BufferedImage image = new BufferedImage(width, height,
                BufferedImage.TYPE_INT_RGB);
        Graphics2D graphics2D = image.createGraphics();
        Hashtable<TextAttribute, Object> map = new Hashtable<TextAttribute, Object>();
        Random r = new Random();
        String token = Long.toString(Math.abs(r.nextLong()), 36);
        String ch = token.substring(0, 6);
        Color c = new Color(0.6662f, 0.4569f, 0.3232f);
        GradientPaint gp = new GradientPaint(30, 30, c, 15, 25, Color.white,
                true);
        graphics2D.setPaint(gp);
        Font font = new Font("Verdana", Font.CENTER_BASELINE, 26);
        graphics2D.setFont(font);
        graphics2D.drawString(ch, 2, 20);
        graphics2D.dispose();
        HttpSession session = req.getSession(true);
        session.setAttribute(CAPTCHA_KEY, ch);

        OutputStream outputStream = response.getOutputStream();
        ImageIO.write(image, "jpeg", outputStream);
        outputStream.close();
    }
} 
```

当我在 Glassfish 3.1.1 上运行此应用程序时，在渲染时调用 Servlet 的 doGet() 方法

对于呈现的 HttpServlet doGet() 方法：

```
<h:graphicImage id="capImg" value="#{facesContext.externalContext.requestContextPath}/../captcha.jpg" /> 
```

doGet() 只为 Google Chrome 呈现一次，因此可以正确呈现。

对于 Firefox 和 IE，doGet() 渲染两次更新验证码密钥，但不更新页面上绘制的验证码图像。

如果有人可能知道什么可以解决这个问题，以及为什么 Chrome 的这种行为不同于其他浏览器，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:11:33.500

浏览器正在缓存响应。您避免这种情况的尝试是不完整且不正确的：

```
response.setHeader("Cache-Control", "no-cache");
response.setDateHeader("Expires", 0);
response.setHeader("Pragma", "no-cache");
response.setDateHeader("Max-Age", 0); 
```

请参阅[如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407#2068407)对于正确的集合：

```
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
response.setDateHeader("Expires", 0); // Proxies. 
```

此外，为了使其更健壮，将带有当前时间戳的查询字符串（以毫秒为单位）添加到图像 URL。这是一个示例，前提是您有一个`java.util.Date`名为托管 bean 的实例`now`：

```
<h:graphicImage id="capImg" value="#{request.contextPath}/../captcha.jpg?#{now.time}" /> 
```

*（请注意，我还简化了获取请求上下文路径的方法，我只是不明白如果你去域根目录有什么用`../`）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:25:04.003

我找到了一个解决方案，不是最佳解决方案，但它有效，这里是：

验证码.xhtml

```
<table border="0">
    <tr>
        <td>
            <h:graphicImage url="#{request.contextPath}/../jcaptcha"/>
        </td>
        <td>
            <input type='text' name='j_captcha_response' value='' />
        </td>
    </tr>
</table> 
```

CaptchaServlet doGet 方法：

```
 protected void doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException {

        byte[] captchaChallengeAsJpeg = null;
        // the output stream to render the captcha image as jpeg into
        ByteArrayOutputStream jpegOutputStream = new ByteArrayOutputStream();
        try {
        // get the session id that will identify the generated captcha.
        //the same id must be used to validate the response, the session id is a good candidate!
        String captchaId = httpServletRequest.getSession().getId();
            // call the ImageCaptchaService getChallenge method
            BufferedImage challenge =
                    CaptchaServiceSingleton.getImageChallengeForID(captchaId,
                            httpServletRequest.getLocale());
            // a jpeg encoder
            JPEGImageEncoder jpegEncoder =
                    JPEGCodec.createJPEGEncoder(jpegOutputStream);
            jpegEncoder.encode(challenge);
        } catch (IllegalArgumentException e) {
            httpServletResponse.sendError(HttpServletResponse.SC_NOT_FOUND);
            return;
        } catch (CaptchaServiceException e) {
            httpServletResponse.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
            return;
        }
        captchaChallengeAsJpeg = jpegOutputStream.toByteArray();

        // flush it in the response
        httpServletResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        httpServletResponse.setHeader("Pragma", "no-cache");
        httpServletResponse.setDateHeader("Expires", 0);
        httpServletResponse.setContentType("image/jpeg");
        ServletOutputStream responseOutputStream =
                httpServletResponse.getOutputStream();
        responseOutputStream.write(captchaChallengeAsJpeg);
        responseOutputStream.flush();
        responseOutputStream.close();
    } 
```

创建 CaptchaServiceRequestSingleton.java

```
 package com.myapp.web.common.listener;

    import java.awt.image.BufferedImage;
    import java.util.HashMap;
    import java.util.Locale;

    import com.octo.captcha.service.image.DefaultManageableImageCaptchaService;
    import com.octo.captcha.service.image.ImageCaptchaService;

public class CaptchaServiceSingleton {

    private static ImageCaptchaService instance = new DefaultManageableImageCaptchaService();
    private static final int MAX_CACHE_SIZE = 200;
    private static HashMap<String, BufferedImage> captchaImgCache = new HashMap<String, BufferedImage>();

    public static ImageCaptchaService getInstance(){
        return instance;
    }

    public static BufferedImage getImageChallengeForID(String id, Locale locale) {
        if (captchaImgCache.containsKey(id)) {
            return captchaImgCache.get(id);
        } else {
            BufferedImage bImage = instance.getImageChallengeForID(id, locale);

            // if limit reached reset captcha cache
            if (captchaImgCache.size() > MAX_CACHE_SIZE) {
                captchaImgCache = new HashMap<String, BufferedImage>();
            }

            captchaImgCache.put(id, bImage);
            return bImage;
        }
    }

    public static void resetImageChallengeForID(String id) {        
        if (captchaImgCache.containsKey(id)) {      
            captchaImgCache.remove(id);
        }               
    }

} 
```

单击“创建帐户”按钮时，验证码被重置：

CustomerMB.openCreateCustomerAccount()：

```
public String openCreateCustomerAccount() {
    customerAccountEditVO = new CustomerAccountVO();
    screenComponent.setPageName(NameConstants.CREATE);
    getUserMB().resetCaptcha();
    return null;
} 
```

在 UserMB.resetCaptcha() 中：

```
public String resetCaptcha() {
    CaptchaServiceSingleton.resetImageChallengeForID(JSFUtil.getRequest().getRequestedSessionId());     
    return null;
} 
```

也许这不是完美的解决方案，但至少它适用于所有浏览器。

# c++ - 具有大量参数的最佳编译方式（一种 cpp 程序）

> ID：15651721
> 
> 赞同：0
> 
> 时间：2013-03-27T04:04:44.020
> 
> 标签：c++, compilation, makefile

这些天我正在学习opengl，并且正在从命令行编译（我不想使用IDE，因为我习惯了VIM）。编译 opengl 文件可能很麻烦，假设我有一个名为 hello.cpp 的文件，为了快速编译和运行，我必须这样做：

```
g++ -framework GLUT -framework OpenGL -framework Cocoa hello.cpp & ./a.out 
```

由于我正在学习 opengl，因此我将使用许多不同的文件进行测试，并且一直键入上述命令对我来说是不可行的。我想要的是这样的：

```
some_command % & ./a.out 
```

some_command最好是一些常用的（如g++、make），%是文件名。

我认为 makefile 可能是一个可能的解决方案，所以我继续学习了 makefile 但它似乎适用于特定名称；有一些[方法可以将参数传递给makefile](https://stackoverflow.com/questions/2214575/passing-arguments-to-make-run)，但对我来说似乎还是太麻烦了（我必须手动输入 ARGUMENT=filename 部分）。

另外我认为 shell 脚本可能是一个很好的解决方案。唯一的后备是我必须为 shell 脚本自定义一个名称。

我想知道是否有更好的方法让我快速编译和运行 opengl cpp 文件

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:10:18.150

使用 Makefile

```
CC=g++
PARAM=-framework GLUT    \
      -framework OpenGL  \
      -framework Cocoa  #\

hello: hello.cpp
       $(CC) $(PARAM) ${ARGS} hello.cpp -o hello 
```

然后编译并运行`make hello; ./hello;`

您可能想知道`${ARGS}`. 它用于自定义命令行参数。所以现在你可以做类似的事情`make ARGS="-framework CustomX" hello; ./hello;`，它将被添加到 Makefile 中的其他 g++ 选项中。

[您可以在此处](http://en.wikipedia.org/wiki/Make_%28software%29#Example_makefiles)、[此处](http://www.gnu.org/software/make/manual/make.html)和[此处](http://mrbook.org/tutorials/make/)阅读有关 GNU Makefile的更多信息

**更新**：这是一个小的单线，将生成您需要的所有目标。如果需要，您可以将其扩展为脚本，以便您可以更好地控制它。

`ls *.cpp | perl -ne 'chomp; $n=$_; $n=~s/\.cpp$//; print "$n: $_\n\t\$(CC) \$(PARAM) \${ARGS} $_ -o $n\n";' >> Makefile`

除此之外，我通常会手写我的目标。如果您想要真正通用的东西，@Emil Sit 的解决方案可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:24:09.730

我认为您希望能够执行以下操作：

```
make foo 
```

（例如，来自`vim`），`foo`具体取决于您使用的源文件。

要实现这一点`make`，您需要使用[模式规则](http://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html)。

例如：

```
CXX=g++
CXX_FLAGS=-framework GLUT -framework OpenGL -framework Cocoa

%: %.cpp
    $(CXX) $(CXX_FLAGS) -o $@ $<
    ./$@ 
```

这应该允许您运行`make hello`，它将：

*   `hello`构建在当前目录中调用的可执行文件（如果`hello.cpp`已更改）。
*   为你运行`hello`，如果它决定编译并且编译成功。

# javascript - 修改函数以同时过滤多个数据属性

> ID：15651722
> 
> 赞同：2
> 
> 时间：2013-03-27T04:04:56.067
> 
> 标签：javascript, jquery, find, custom-data-attribute

下面的功能允许用户通过 过滤产品`data-attributes`，并支持同时按多个值过滤。它通过创建一个包含所选值的数组来做到这一点，当单击任何值（在本例中为选中/未选中）时，它会隐藏所有项目，然后重新显示与更新数组中的值匹配的项目。

它在过滤 one 时可以正常工作`data-attribute`，但是当组合过滤多个属性时，它不再显示与任何值匹配的所有结果，而是仅显示与所有指定值匹配的结果。

我在这里发布了一个演示问题的小提琴：http: [//jsfiddle.net/chayacooper/WZpMh/94/](http://jsfiddle.net/chayacooper/WZpMh/94/)除了其中一个项目之外的所有项目都具有两者的值，因此如果其中一个过滤器是`data-style="V-Neck"`，`data-color="Black"`它们应该保持可见已选中，但如果来自不同的另一个值，则`data-attribute`某些项目将被隐藏。

```
$(document).ready(function () {
    var selected = [];
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrColor),1);
        }
        else {
            $this.parent().addClass("active");
            selected.push(attrColor);
        }
        $("#content").find("*").hide();
        $.each(selected, function(index,item) {
            $('#content').find('[data-color *="' + item + '"]').show();
        });
        return false;
    });

$('#attributes-Silhouettes *').click(function () {
        var attrStyle = $(this).data('style');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrStyle),1);
        }
        else {
            $this.parent().addClass("active");
            selected.push(attrStyle);
        }           
        $("#content").find("*").hide();
        $.each(selected, function(index,item) {
            $('#content').find('[data-style *="' + item + '"]').show();
        });
       return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:10:25.110

您的两个处理程序都在更新`selected`数组，但只有一个处理程序在`click`. 如果颜色被（取消）选择，则为第一个，如果样式为第二个。假设您点击了“黑色”和“圆领”。那时您选择的数组将如下所示：`[ "Black", "Crew_Neck" ]`. 下次您进行选择时，假设您单击“Short Sleeves”，第二个（样式）处理程序将执行。这是正在发生的事情：

1.  `Short_Sleeves` 被添加到选定的数组中。
2.  所有项目都使用隐藏`$("#content").find("*").hide();`
3.  选定的数组将被迭代，并根据动态选择器再次显示项目。

3号是问题。在上面的示例中，单击了一个样式，因此样式处理程序正在执行。所选数组中的任何颜色项都将失败，因为例如，不会使用诸如`$('#content').find('[data-style *="Black"]').show();`.

我会建议两件事。

1.  保留 2 组选择，一组用于颜色，一组用于样式。
2.  组合您的代码以对两个组仅使用一个处理程序。

这是一个（大部分）工作[示例](http://jsfiddle.net/WZpMh/98/)。

请注意，我`data-type="color|style"`在您的`.filterOptions`容器中添加了一个，以允许组合使用单个处理程序并且仍然知道哪个组已更改。

这是完整的脚本：

```
$(document).ready(function () {
    // use 2 arrays so the combined handler uses correct group 
    var selected = { color: [], style: [] };

    // code was similar enough to combine to 1 handler for both groups
    $('.filterOptions').on("click", "a", function (e) {
        // figure out which group...
        var type = $(e.delegateTarget).data("type");
        var $this = $(this);
        // ...and the value of the checkbox checked
        var attrValue = $this.data(type);

        // same as before but using 'type' to access the correct array
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected[type].splice(selected[type].indexOf(attrValue),1);
        }
        else {
            $this.parent().addClass("active");
            selected[type].push(attrValue);
        }

        // also showing all again if no more boxes are checked
        if (attrValue == 'All' || $(".active", ".filterOptions").length == 0) {
            $('#content').find('*').show();
        } 
        else {
            // hide 'em all
            $("#content").find("*").hide();
            // go through both style and color arrays
            for (var key in selected) {
                // and show any that have been checked
                $.each(selected[key], function(index,item) {
                    $('#content').find('[data-' + key + ' *="' + item + '"]').show();
                });
            }
        }
    }); 
}); 
```

**更新：合并评论中的建议**

使处理程序使用复选框而不是链接是对事件绑定代码的一个小改动。它现在使用`change`方法而不是`click`侦听`:checkbox`元素而不是`a`：

```
$('.filterOptions').on("change", ":checkbox", function (e) {
    // handler code
}); 
```

“所有”选项“打嗝”比我想象的更难修复。这就是我最终得到的结果：

```
// get a jQuery object with all the options the user selected
var checked = $(":checked", ".filterOptions");

// show all of the available options if...
if (checked.length == 0 // ...no boxes are checked
    || // ...or...
    checked.filter(".all").length > 0) // ...at least one "All" box is checked...
{
    // remainder of code, including else block, unchanged
} 
```

我还在`all`适当的元素中添加了一个类`checkbox`来简化上述条件。

[**更新小提琴**](http://jsfiddle.net/WZpMh/111/)

# ios - 从导航控制器内的表视图控制器中的按钮展开

> ID：15651730
> 
> 赞同：0
> 
> 时间：2013-03-27T04:05:53.307
> 
> 标签：ios, objective-c, uinavigationcontroller, uistoryboardsegue

我在情节提要中有以下控制器：

![故事板](../Images/76c28ea4705767e7945c5ca0c6f92a18.png)

导航控制器由左侧主视图控制器中的按钮连接。它出现在弹出窗口中。当用户单击右侧表格视图控制器顶部的“退出”按钮时，我需要返回主视图控制器，调用执行退出的方法，然后显示身份验证视图控制器（如果用户未登录，则无法使用该应用程序）。我尝试过的每一种方法都失败了。

1.  我几乎可以通过展开 segue 来做到这一点，但如果在主视图中的展开方法中我启动身份验证视图控制器，我会收到“在演示或关闭正在进行时尝试从视图控制器关闭”警告。设置计时器以等待任意时间以完成解雇似乎是一种黑客行为。（我希望有一个“你的 segue 刚刚完成”回调。）

2.  我不能通过在 prepareForSegue 方法中将主视图控制器设置为设置控制器的委托并在单击按钮时在其上调用委托方法来做到这一点，这将是常态，因为 segue 中的destinationViewController 不是我的设置控制器，它是容纳它的导航控制器。

有一些明显的方法可以做到这一点，对吧？也许通过将按钮附加到设置视图控制器中的方法，该方法会自行关闭，然后在完成块中触发 NSNotification？这似乎仍然很老套。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:20:58.303

您可以使用以下方法使主视图控制器成为 prepareForSegue 方法中设置控制器的委托：

```
 SettingsViewcontroller *settings =  [(UINavigationController *)segue.destinationViewController topViewController];
settings.delegate = self; 
```

我认为您可以在设置控制器的 viewDidDisappear 方法中调用委托方法。

# c++ - 调用函数将 int 更改为 binary

> ID：15651731
> 
> 赞同：2
> 
> 时间：2013-03-27T04:05:58.587
> 
> 标签：c++, function, binary

我有一个将 int 转换为二进制的函数，当从`main`函数调用它时，它会给出错误`binary: identifier not found`代码有什么问题？

```
#include <iostream>
using namespace std;

int main(){

int dec;
cin >> dec; 
binary(dec);
return 0;
}

void binary(int decimal) {
int remainder;

if(decimal <= 1) {
   std::cout << decimal;
   return;
}
remainder = decimal % 2;
binary(decimal >> 1);    
std::cout << remainder;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:07:44.753

您必须先声明`binary`才能使用它。编写代码以将函数定义放在调用它们的函数之上（在递归的情况下并不总是可能），或者提供前向函数声明......例如，把

```
void binary(int decimal); 
```

在您的主要功能之上。

在大型 C++ 项目中，每个源文件都有一个随附的头文件，用于声明源文件定义的所有类和函数。然后你只需将头文件#include 到任何使用这些类和函数的源文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:08:56.120

您要么将二进制函数实现移到 main 之上，要么定义一个原型

# vim - 该插件不适用于 gui 模式下的新选项卡

> ID：15651732
> 
> 赞同：1
> 
> 时间：2013-03-27T04:06:12.477
> 
> 标签：vim, vim-plugin

我使用 flake8-vim 插件。[http://www.vim.org/scripts/script.php?script_id=4440](http://www.vim.org/scripts/script.php?script_id=4440)

如果我输入：

```
gvim blabla/python_code_file.py 
```

我可以使用命令：

```
:PyFlake 
```

然后，如果我打开一个新类型：

```
:tabnew blabla/another_python_code_file.py 
```

我不能再在该特定选项卡上使用该命令：

```
:PyFlake
E492: Not an editor command: PyFlake 
```

但该命令仍然适用于原始选项卡。这里发生了什么？

# ios - 为 UITableView 中的每个单元格指定一个数字

> ID：15651733
> 
> 赞同：0
> 
> 时间：2013-03-27T04:06:14.900
> 
> 标签：ios, uitableview

我写了一个代码，给我的 TableView 中的每个单元格一个从 8 开始的数字，当它达到 12 时，我在应用程序小时内调用它的计数器

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

while (hour < 15)
{
    if (hour == 12) {
        hour=1;
    } else {
        NSString *str = [NSString stringWithFormat:@"%d",hour];
        cell.textLabel.text = [courses objectAtIndex:indexPath.row];
        cell.detailTextLabel.text = str;
        NSLog(@"%@",str);
        hour++;
        return cell;

    }
}

return cell;} 
```

当我用模拟器运行应用程序时效果很好，但是当我滚动它时，它会不断更改第一个和第二个单元格中的数字，我希望即使滚动表格也不会改变数字。

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:11:59.650

它看起来像是`hour`在方法之外定义的，并且没有链接到单元格的`indexPath`. 如果您想确保单元格的显示字符串保持不变，您应该能够确定地`indexPath`单独计算它，因此即使表格无序加载单元格，它们也会保持正确的文本。

# php - array_diff 不显示差异

> ID：15651742
> 
> 赞同：2
> 
> 时间：2013-03-27T04:07:16.220
> 
> 标签：php, array-difference

我正在尝试使用以下代码比较两个数组：

```
 $diff = array_diff($selected, $checkboxes);

            echo '<br>selected:';
            print_r($selected);
            echo '<br>original:';
            print_r($checkboxes);
            echo '<br>difference:';
            print_r($diff); 
```

奇怪的是，虽然这会导致以下结果：

```
selected:Array ( [0] => Forum1 [1] => Forum3 [2] => Furniture ) 
original:Array ( [0] => Forum1 [1] => Forum3 [2] => forum4 [3] => Furniture [4] => Nieuwforum ) 
difference:Array ( [0] => Forum1 [1] => Forum3 [2] => Furniture ) 
```

似乎 array_diff 函数只复制“选定”数组。我尝试了一些在类似问题中发布的东西，例如使用 array_diff_assoc 但这没关系。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:17:27.660

如[array_diff](http://www.php.net/manual/en/function.array-diff.php)中所述。

*返回一个数组，其中包含 array1 中不存在于任何其他数组中的所有条目*

```
$diff = array_diff($checkboxes,$selected); 
```

[键盘演示。](http://codepad.org/uIvQImA3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T11:44:29.743

我认为您正在搜索**array_intersect**。

# r - 仅测试 R 脚本中的单个函数

> ID：15651745
> 
> 赞同：4
> 
> 时间：2013-03-27T04:08:02.613
> 
> 标签：r, unit-testing

我正在尝试在 R 脚本中测试单个函数，其中包含一个函数调用作为脚本的最后一个语句，即这里是 R 代码：

```
mul.R
#!/usr/bin/env Rscript

mul <- function(n, m) {
        prod <- n * m
        return (prod)
}

mul(4,5) 
```

这是测试脚本：

```
test_simpleProgram.R
#!/usr/bin/env Rscript

library('RUnit')
source("./../simpleProgram.R")

test.mul <- function() {
        checkEqualsNumeric(mul(n= 2,m= 3), 4)
} 
```

我使用以下命令执行测试脚本：

```
runTestFile(absFileName= file.path("test_simpleProgram.R")) 
```

现在，当我获取要测试的 R 脚本时，即`mul.R`，由于最后一条语句已经调用了该`mul`函数，因此将执行整个脚本，然后测试脚本再次运行该函数。`source(..)`这使得测试目的不需要第一次执行（由于）。

有没有办法测试这样的脚本，而不是在测试脚本中获取脚本时运行脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:51:35.350

使用`parse`代替`source`：

```
code <- parse("c:/R/mul.R") # actual file path may vary 
```

这会将文件加载为未评估的表达式。可以看作：

```
# > as.list(code)
# [[1]]
# mul <- function(n, m) {
#     prod <- n * m
#     return(prod)
# }
# 
# [[2]]
# mul(4, 5) 
```

上面列表的第一个元素实际上是对`'<-'`函数的调用：

```
# > as.list(code[[1]])
# [[1]]
# `<-`
# 
# [[2]]
# mul
# 
# [[3]]
# function(n, m) {
#     prod <- n * m
#     return(prod)
# } 
```

第二个元素 OTOH 是对`mul`函数的调用：

```
# > as.list(code[[2]])
# [[1]]
# mul
# 
# [[2]]
# [1] 4
# 
# [[3]]
# [1] 5 
```

因此，如果您的文件由分配和不需要的函数调用组成，我们可以通过检查上面列表中每个条目的第一个元素来识别：

```
filter <- sapply(code, function(x)as.character(x[[1]])=="<-")

# >filter
# [1] TRUE FALSE 
```

现在我们只能评估分配：

```
eval(code[filter], envir=globalenv()) 
```

然后你可以调用你的`test.mul`函数。您可以使用这些语句来替换您的`source`调用。

这可以推广到其他过滤器。例如，如果你想评估除最后一个之外的所有语句，你可以使用这个：

```
eval(code[-length(code)], envir=globalenv()) 
```

# android - 具有上下文/活动的静态实用程序类 - Android

> ID：15651747
> 
> 赞同：8
> 
> 时间：2013-03-27T04:08:19.863
> 
> 标签：android, android-activity, utilities

在 Android 应用程序的开发过程中，我发现了一组实用程序类型的方法，这些方法已放入静态类中。所有这些方法都在多个活动中使用，其中大多数不需要来自调用活动的任何信息。

但是，我现在有一些方法需要 Activity 的 Context 和一个需要 Activity 本身的方法。让我举例说明其中的一些：

*   getDeviceNaturalOrientation() - 使用 Activity 的 getWindow().getWindowManager().getDefaultDisplay() 来访问显示器的旋转、宽度和高度，以确定设备的自然方向。
*   getDeviceOrientation() - 与上面类似，但获取当前方向
*   createFile() - 使用 Context 来访问一些资源（字符串）并创建和显示一些 Toast

现在，我关于这个 Utils 类的大问题是：

1.  到目前为止，每个函数都需要一个 Context 参数，我从我所在的任何 Activity 传递它，但是可以在 Utils 类中创建一个静态 Context 或 Activity 变量并将其设置在每个 Activity 的开头（如在 onCreate )? 此变量将用于任何需要 Context 或 Activity 实例的函数。
2.  假设不推荐上述方法，是否可以将 Activity 参数传递给方法，或者是否有理由仅将 Activity 作为 Context 传递？我用于上述设备定向功能的方法是特定于 Activity 对象的，而不是 Context，所以我要么作为 Activity 传递，要么作为 Context 传递并转换为 Activity（后者听起来很糟糕）。

另外，我非常愿意接受这个 Util 类可能不是这些需要 Context/Activity 的方法的方法，所以我欢迎那些仍然阻止在使用它们的每个活动类中复制这些方法的替代方法.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:36:44.597

1) 到上下文的静态链接可能会导致内存泄漏。这意味着对 Activity 的引用即使在其销毁后仍将保留在静态变量中，因此 Activity 的所有内存及其所有视图都将保持有效并且不会被 gc 清除。您可以这样做，但您必须小心在完成后将变量清空。最好只是避免它。

2）将活动作为活动传递有点尴尬，但没有技术理由不这样做。那时我们正在争论代码的清洁度/可维护性。有时非清洁解决方案更容易。当然，在上述情况下，我宁愿将orientation/display/Resources 对象传递给函数，也不愿传递整个上下文或制作特殊的访问器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:53:50.877

我认为当您从 Activity 调用时，以下设计应该没问题

```
MyUtility utility=new MyUtility();
utility.getDeviceNaturalOrientation(this);
utility.getFile(this); 
```

你可以定义这些函数，比如

```
public int getDeviceNaturalOrientation(Activity activity){
 //code
return some_oreientation
} 
```

像这样

```
public File getFile(Context context){
 //code
//return file handler
} 
```

Activity 是 Context 的子类，因此您甚至可以将设计更改为以下

```
MyUtility utility=new MyUtility(this); //this refer to Activity
utility.getDeviceNaturalOrientation();
utility.getFile(); 
```

只要您通过活动就可以了，但是如果您按照活动进行操作，则第一个方法调用会出错

```
MyUtility utility=new MyUtility(getApplicationContext());
utility.getDeviceNaturalOrientation(); //will throw exception
utility.getFile(); 
```

而且，是的，第一个想法不是推荐的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T09:01:41.193

我建议你发送一个`WeakReference of your Activity`or `getApplicationContext()`（对于那些可以使用它的作品）并且不要使用`static method`，因为**它会导致内存泄漏**。也[阅读开发者博客](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)

# c++ - 不知道段错误发生在哪里

> ID：15651749
> 
> 赞同：0
> 
> 时间：2013-03-27T04:08:34.933
> 
> 标签：c++, segmentation-fault

出于某种原因，当我运行此代码时，当 for 循环中 i 的值为 7654319 时出现段错误。但奇怪的是，当我不检查该值是否为泛数字时，它可以正常工作没有段错误。当我检查它是否只是泛数字时，它也可以工作；但不适合两者。我使用 gdb 单步执行代码，这是我得到的输出：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004007d3 in main () at Pand.cc:81
81      if (isPandigital(i) && Primes[i])
6: Primes[i] = <error: Cannot access memory at address 0x7ffefffffff4>
5: i = <error: Cannot access memory at address 0x7ffefffffff4>
4: Primes[7654317] = <error: Cannot access memory at address 0x7ffefffffff8>
3: Primes[7654321] = <error: Cannot access memory at address 0x7ffefffffff8>
2: Primes[7654319] = <error: Cannot access memory at address 0x7ffefffffff8>
1: Primes = <error: Cannot access memory at address 0x7ffefffffff8> 
```

从输出来看，似乎通过在`isPandigital(int)`函数中操纵 i 的值，这也会影响 main 中 i 的值。这对我来说没有任何意义，但我继续使用不同的变量来表示`isPandigital(int)`函数中的 i，但我仍然得到同样的错误。

有人能帮助我吗？这类错误非常烦人，因为一切似乎都应该正常工作，但事实并非如此，解决方案只是将自己隐藏在实施层之下。任何帮助表示赞赏！

```
#include <cstdio>
#define MAX 7700000

typedef unsigned int uint;

bool* GetPrimes()
{  
  const int Need = MAX;
  bool* Sieve = new bool[Need];

  for (int s = 0; s < Need; ++s)
    Sieve[s] = 1;

  bool Done = false;
  uint w = 3;

  while (!Done)
  {  
    for (uint q = 3, Prod = w * q; Prod < (uint)Need ; q += 2, Prod = w * q)
      Sieve[Prod] = false;

    Done = (w > (Need >> 1) ? true : false);

    w+=2;
  }
  return Sieve;
}

bool isPandigital(int num)
{
  int arr [] = {1,2,3,4,5,6,7}, G, count = 7;
  do
  {
    G = num%10;
    if (arr[G-1])
      --count;
    arr[G-1] = 0;
  } while (num/=10);

  return (!count);
}

int main()
{  
  bool* Prime = GetPrimes();
  int i;

  for (i = 7654321 ;i > 2; i-=2)
  {
    if (Prime[i] && isPandigital(i))
      break;
  }

  printf("%d\n", i); 

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:12:30.057

在你的`isPandigital`功能中。请注意，如果`num`是 10 的倍数或等于`8`or `9`mod `10`，您将遇到一些问题。越界数组访问通常会导致段错误。

发生这种情况的第一个素数是 19（如果从 7654321 倒退，则为 7654319）：

```
bool isPandigital(int num)//num is (76543)19
{
  int arr [] = {1,2,3,4,5,6,7}, G, count = 7;
  do
  {
    G = num%10;        //G is 9
    if (arr[G-1])      //G-1 is 8; G is only indexed from 0 to 6.
      --count;            
    arr[G-1] = 0;      //G-1 is 8; G is only indexed from 0 to 6.
  } while (num/=10);

  return (!count);
} 
```

请注意，尽管*解决方案*中没有 8 或 9，但您测试的任何素数都可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:11:11.673

看着：

```
 G = num%10;
    if (arr[G-1]) 
```

那么，如果`G`是零呢？这也会破坏你的堆栈，使调试变得困难。

从表面`isPandigital`上看，在传递的数字是泛数字的情况下工作得很好，否则有一个数组绑定在/溢出？

# php - 为什么我的叠加功能在我的浏览器中不起作用

> ID：15651751
> 
> 赞同：-3
> 
> 时间：2013-03-27T04:08:43.837
> 
> 标签：php, javascript, html

我使用谷歌浏览器作为我的浏览器，这是我的网页源

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>

<script type="text/javascript">
function createOverlay() {
    var div = document.createElement("div");
    div.innerHTML = "your own code here";
    div.id = "overlay";
    div.display = "none";
    div.style.position = "absolute";
    div.style.border = "1px solid";
    document.body.appendChild(div);
}

//this function show layout
function showOverlay(el) {
    if (!document.getElementById("overlay")) createOverlay();
    var div = document.getElementById("overlay");
    div.style.display = "block";
    div.style.width = "200px";
    div.style.height = "200px";
    div.style.backgroundColor="FFFF"
    div.style.top = el.offsetTop + 40 + "px";
    div.style.left = parseInt(el.offsetLeft) + parseInt(div.style.width) / 2 + "px";
    div.onmouseover = function (event) {
        event.stopPropagation();
        return false;
    };
}

// and this function hide - you can use it for "close" button on overlay
function hideOverlay() {
    document.getElementById("overlay").style.display = "none";
}

//here is the code which add event handlers to td elements of your table
var table = document.getElementsByTagName("table")[0];
var tds = table.getElementsByTagName("td");
var flag = true;
if (document.getElementById("overlay")) {
    if (document.getElementById("overlay").style.display != "none") flag = false;
}
for (i in tds) {
    tds[i].onmouseover = function (event) {
        if (flag) {
            showOverlay(this);
            event.stopPropagation();
        } else {
            return false;
        }
    };
}
</script>
<body>
<div>
<table width="1023" height="248" border="1">
  <tr>
    <th colspan="2" scope="col">A1</th>
    <th colspan="2" scope="col">A2</th>
    <th colspan="2" scope="col">A3</th>
    <th colspan="2" scope="col">A4</th>
    <th colspan="2" scope="col">A5</th>
    <th colspan="2" scope="col">A6</th>
    <th colspan="2" scope="col">A7</th>
    <th colspan="2" scope="col">A8</th>
    <th colspan="2" scope="col">A9</th>
  </tr>
  <tr>
    <td><div align="center">A1.4</div></td>
    <td><div align="center">A1.8</div></td>
    <td><div align="center">A2.4</div></td>
    <td><div align="center">A2.8</div></td>
    <td><div align="center">A3.4</div></td>
    <td><div align="center">A3.8</div></td>
    <td><div align="center">A4.4</div></td>
    <td><div align="center">A4.8</div></td>
    <td><div align="center">A5.4</div></td>
    <td><div align="center">A5.8</div></td>
    <td><div align="center">A6.4</div></td>
    <td><div align="center">A6.8</div></td>
    <td><div align="center">A7.4</div></td>
    <td><div align="center">A7.8</div></td>
    <td><div align="center">A8.4</div></td>
    <td><div align="center">A8.8</div></td>
    <td><div align="center">A9.4</div></td>
    <td><div align="center">A9.8</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.3</div></td>
    <td><div align="center">A1.7</div></td>
    <td><div align="center">A2.3</div></td>
    <td><div align="center">A2.7</div></td>
    <td><div align="center">A3.3</div></td>
    <td><div align="center">A3.7</div></td>
    <td><div align="center">A4.3</div></td>
    <td><div align="center">A4.7</div></td>
    <td><div align="center">A5.3</div></td>
    <td><div align="center">A5.7</div></td>
    <td><div align="center">A6.3
    </div>
    <div align="center"></div></td>
    <td><div align="center">A6.7</div></td>
    <td><div align="center">A7.3</div></td>
    <td><div align="center">A7.7</div></td>
    <td><div align="center">A8.3</div></td>
    <td><div align="center">A8.7</div></td>
    <td><div align="center">A9.3</div></td>
    <td><div align="center">A9.7</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.2</div></td>
    <td><div align="center">A1.6</div></td>
    <td><div align="center">A2.2</div></td>
    <td><div align="center">A2.6</div></td>
    <td><div align="center">A3.2</div></td>
    <td><div align="center">A3.6</div></td>
    <td><div align="center">A4.2</div></td>
    <td><div align="center">A4.6</div></td>
    <td><div align="center">A5.2</div></td>
    <td><div align="center">A5.6</div></td>
    <td><div align="center">A6.2</div></td>
    <td><div align="center">A6.6</div></td>
    <td><div align="center">A7.2</div></td>
    <td><div align="center">A7.6</div></td>
    <td><div align="center">A8.2</div></td>
    <td><div align="center">A8.6</div></td>
    <td><div align="center">A9.2</div></td>
    <td><div align="center">A9.6</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.1</div></td>
    <td><div align="center">A1.5</div></td>
    <td><div align="center">A2.1</div></td>
    <td><div align="center">A2.5</div></td>
    <td><div align="center">A3.1</div></td>
    <td><div align="center">A3.5</div></td>
    <td><div align="center">A4.1</div></td>
    <td><div align="center">A4.5</div></td>
    <td><div align="center">A5.1</div></td>
    <td><div align="center">A5.5</div></td>
    <td><div align="center">A6.1</div></td>
    <td><div align="center">A6.5</div></td>
    <td><div align="center">A7.1</div></td>
    <td><div align="center">A7.5</div></td>
    <td><div align="center">A8.1</div></td>
    <td><div align="center">A8.5</div></td>
    <td><div align="center">A9.1</div></td>
    <td><div align="center">A9.5</div></td>
  </tr>
</table>
</div>
</body>
</html> 
```

当我在这里的演示中尝试时[http://jsfiddle.net/andricoga/yTj8K/](http://jsfiddle.net/andricoga/yTj8K/)它的工作。但是当我在本地主机上尝试时，没有任何改变，只是显示的表格。我的 java 脚本不起作用。知道什么问题。请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:15:47.927

您需要在执行之前检查*DOM*是否已**加载**：

```
//here is the code which add event handlers to td elements of your table
var table = document.getElementsByTagName("table")[0];
var tds = table.getElementsByTagName("td");
var flag = true;
if (document.getElementById("overlay")) {
    if (document.getElementById("overlay").style.display != "none") flag = false;
}
for (i in tds) {
    tds[i].onmouseover = function (event) {
        if (flag) {
            showOverlay(this);
            event.stopPropagation();
        } else {
            return false;
        }
    };
} 
```

所以要么在事件发生后执行它`onload`。或者移动这部分脚本，使其在您`<table>`的渲染之后出现。

您可以使用 jQuery `$(document).ready(function() { ... });`。或者非 jQuery 的解决方案，请参见：[Dom 加载事件跨浏览器原生 javascript 代码](https://stackoverflow.com/questions/8181061/dom-loaded-event-cross-borwser-native-javascript-code)

它在 jsfiddle 中工作，因为脚本被指定为执行*onload*。

# iphone - IOS中的消息API

> ID：15651753
> 
> 赞同：-2
> 
> 时间：2013-03-27T04:08:46.727
> 
> 标签：iphone, ios, objective-c, sms

我是一名 IOS 开发人员，正在寻找 ios 中的 Messaging api，我已经浏览了互联网，并在 Java、php、android 等其他可能的域中找到了该功能，但不在 IOS Sector.so 中，你能告诉我解决方案吗？ SMS API 将消息发送到其他手机

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:15:00.587

请注意，您不能在用户不知情的情况下自动发送短信。您可以让用户参与进来，然后让他/她做事......

在 iOS 中发送短信非常简单。你需要[`MFMessageComposeViewController`](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)采取行动。下面我们有 2 种委托方法 - 一种用于编写您的 SMS，另一种用于在用户操作后控件返回给您时。

```
- (void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSArray *)recipients
{
  MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
  if([MFMessageComposeViewController canSendText])
  {
    controller.body = bodyOfMessage;    
    controller.recipients = recipients;
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
  }    
}

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
  [self dismissModalViewControllerAnimated:YES];

  if (result == MessageComposeResultCancelled)
    NSLog(@"Message cancelled")
  else if (result == MessageComposeResultSent)
    NSLog(@"Message sent")  
  else 
    NSLog(@"Message failed")  
} 
```

有大量带有完整代码的在线教程可以帮助您快速入门。这是[一个](http://iosdevelopertips.com/core-services/how-to-send-an-sms-progammatically.html)。希望这可以帮助...

# android - 简单的Android布局问题

> ID：15651756
> 
> 赞同：0
> 
> 时间：2013-03-27T04:09:03.917
> 
> 标签：android, layout

我想做一些非常简单的事情。我想要一个顶部有一个微调器的布局，然后是一个列表视图，然后是一个包含一些按钮的最底部的线性布局。我希望列表视图扩展以填充微调器和按钮之间的空间，无论窗口有多大。我一直在尝试使用包含所有三个元素的线性布局，并且我已经尝试了我能想到的 Wrap Content 和 Fill Parent 的每种组合，但除非我将 List View Layout_Height 硬编码为 300 dip，否则按钮会被按下离开屏幕。我知道必须有一个简单的方法来做到这一点，但我束手无策。我已经尝试了我能想到的一切。

这是使用硬编码高度的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/fileType"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="300dip" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="bottom"
    android:gravity="bottom"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ManageFiles_DeleteItem"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Delete item" />

        <Button
            android:id="@+id/ManageFiles_DeleteAll"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Delete all" />

        <Button
            android:id="@+id/ManageFiles_DisplayItem"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Display item" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ManageFiles_OKcustom"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="10dip"
            android:layout_weight="1"
            android:text="OK" />

        <Button
            android:id="@+id/ManageFiles_CancelCustom"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="10dip"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>
</LinearLayout> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:37:07.720

你可以尝试一些简单的事情

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/spinner1"
    android:layout_above="@+id/button1" >
</ListView>

<Button
    android:id="@id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Button1" />

<Button
    android:id="@id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Button2" /> 
```

诀窍是使用RelativeLayout 而不是LinearLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:26:50.137

像这样尝试它会适合所有屏幕尺寸。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/ftr_btn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:gravity="bottom"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ManageFiles_DeleteItem"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Delete item" />

        <Button
            android:id="@+id/ManageFiles_DeleteAll"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Delete all" />

        <Button
            android:id="@+id/ManageFiles_DisplayItem"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:text="Display item" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ManageFiles_OKcustom"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="10dip"
            android:layout_weight="1"
            android:text="OK" />

        <Button
            android:id="@+id/ManageFiles_CancelCustom"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_margin="10dip"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>
</LinearLayout>

<Spinner
    android:id="@+id/fileType"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/ftr_btn"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/fileType" >
</ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:23:09.253

使用以下

```
android:weightSum="Your total length" //in your main layout

android:layout_weight="" //in each of your listview,spinner,linearlayout 
```

例如：如果你需要为所有 3 个元素使用相等的空间

```
android:weightSum="3" 
```

然后在

```
Spinner
android:layout_weight="1"
/>

ListView
android:layout_weight="1"
/>

LinearLayout
android:layout_weight="1"
/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T04:31:53.040

使用权重，为列表视图赋予两个权重，为微调器赋予一个权重，并在底部包含按钮的布局，然后您可以改变权重并检查哪个更适合您。

# c++ - 在 XCode 中构建时出现 FreeType 错误

> ID：15651769
> 
> 赞同：4
> 
> 时间：2013-03-27T04:10:39.103
> 
> 标签：c++, xcode, macos, sfml, freetype

首先是一些背景故事：

我不知道我在做什么。

那是谎言，我知道我在做什么。我是一名 Web 开发人员，所以查看代码并不全是胡言乱语，但尝试使用 Xcode 对我来说是一本新书。无论如何，我设计了一个在 Windows 上使用 SFML 用 C++ 编译的游戏，现在我们正试图将它带到 OS X 上（我是这群人中唯一拥有 Mac 的人）。

使用 Xcode 4.6.1 和 SFML 2.0 我一直在尝试构建这个该死的应用程序，但到目前为止，它只是令人头疼。让这个东西工作的当前状态还不错，它最终构建没有错误，但构建停止并且显示如下：

```
dyld: Library not loaded: @executable_path/../Frameworks/freetype.framework/
Versions/A/freetype

Referenced from: /Users/Eric/Library/Developer/Xcode/DerivedData/
Test-haconqzbewevbwgukppsacykkpml/Build/Products/Debug/Test.app/
Contents/Frameworks/sfml-graphics.framework/Versions/2.0.0/sfml-graphics

Reason: Incompatible library version: sfml-graphics requires version 17.0.0 or
later, but freetype provides version 16.0.0 
```

我只是不明白这个错误。我有最新版本的 FreeType。考虑到 FreeType 是 2.4.11，我什至不确定该版本号指的是什么。我似乎在其他任何地方也找不到这个错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:01:31.557

错误消息中提到的版本号是指库的*兼容版本*。这是一个版本号，它在构建时被嵌入到给定的动态库中。当另一个二进制文件链接到该库时，兼容性版本被复制到`LC_LOAD_DYLIB`加载命令中，该命令在运行时告知`dyld`需要加载哪些动态库。加载库时`dyld`，会检查兼容性版本，如果程序的版本高于库的版本，则为错误。

运行时，`otool -L freetype.framework/Versions/A/freetype`您会看到它报告其兼容版本为`16.0.0`. 如果你在上面运行它，`sfml-graphics.framework/Versions/2.0.0/sfml-graphics`你会看到它报告了`17.0.0`for的兼容版本`freetype.framework`。因此，您遇到了上述错误情况。

此类错误的最常见原因是针对旧版本的框架运行您的应用程序，而不是您构建它的版本，以及任何链接的框架。请注意，这个意义上的“旧”指的是兼容性版本，而不是与框架相关的任何其他版本号（例如，营销版本）。

在不知道所涉及的两个框架的起源（例如，如果您自己构建它们，或者您从哪里获得二进制文件）的情况下，您在哪里出错并不完全清楚。但是我会注意到 SFML git 存储库似乎有[一个`freetype.framework`](https://github.com/LaurentGomila/SFML/tree/master/extlibs/libs-osx/Frameworks)具有适当兼容性版本 ( `17.0.0`) 的版本，因此如果您使用`sfml-graphics.framework`SFML 人员提供的二进制文件，那么选择他们的 FreeType 框架可能是您的解决方案。

# android - onclicklistener 通知

> ID：15651771
> 
> 赞同：-1
> 
> 时间：2013-03-27T04:10:59.457
> 
> 标签：android, notifications

我在我的应用程序中设置了一个通知。它工作正常。如果我单击通知，`statusbar`它将进入我的应用程序。
现在我需要设置一些工作，如果单击通知我可以在哪里设置？单击通知时是否有任何隐式调用的方法？
另外，如果单击该通知，我想删除该通知，该怎么做？

这是我的代码

```
notifManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);  
Intent inty=getIntent();
note = new Notification(R.drawable.icon, "New E-mail", System.currentTimeMillis());  
PendingIntent intent = PendingIntent.getActivity(MainActivity.this, 0, inty, 0);  
note.setLatestEventInfo(MainActivity.this, "New E-mail", "You have one unread message.", intent);
notifManager.notify(R.string.search_hint, note); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:29:49.047

尝试调用 broadcastReceiver 它可能对您的要求有所帮助，

```
Intent notificationIntent = new Intent(this, dummy_activity.class);
notificationIntent.setAction("android.intent.action.MAIN");
notificationIntent.addCategory("android.intent.category.LAUNCHER");
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                                notificationIntent,
                                PendingIntent.FLAG_UPDATE_CURRENT | 
                                Notification.FLAG_AUTO_CANCEL);

// Now, once this dummy activity starts send a broad cast to your parent activity and finish the pending activity
//remember you need to register your broadcast action here to receive.
BroadcastReceiver call_method = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action_name = intent.getAction();
        if (action_name.equals("call_method")) {
            // call your method here and do what ever you want.
        }
    }
};
registerReceiver(call_method, new IntentFilter("call_method")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:39:37.943

您可以向意图添加一些额外的数据，然后在您的活动中的 onCreate 和 onNewIntent 方法中查找它。

例如：

```
inty.putExtra("came from notification", true); 
```

然后，您可以通过传递给 onNewIntent 的意图或使用 getIntent() 在 onCreate 中读取它。

```
intent.getBooleanExtra("came from notification", false); 
```

# list - 在 Haskell 中获取自定义列表类型的头部和尾部

> ID：15651772
> 
> 赞同：5
> 
> 时间：2013-03-27T04:11:03.847
> 
> 标签：list, haskell, functional-programming

我有一个自定义列表类型：

```
data NNList a = Sing a | Append ( NNList a) ( NNList a) deriving (Eq)
data CList a = Nil | NotNil ( NNList a) deriving (Eq) 
```

我正在尝试实现一个返回列表头部和尾部的函数：

> cListGet :: CList a -> Maybe (a, CList a)

我的尝试：

```
cListGet :: CList a -> Maybe (a, CList a)
cListGet Nil             = Nothing
cListGet xs@(NotNil nxs) =
case nxs of
  Sing x        -> (x, Nil)
  Append l r    -> ((fst $ cListGet (NotNil l)), (Append (snd $ cListGet (NotNil l)), r)) 
```

这对我来说意味着继续向左走，直到我得到一个单。一旦我得到单个元素（头），返回元素和一个 Nil 列表。然后将该 Nil 列表与列表组合，然后作为最终结果返回。

我什至不确定逻辑是否 100% 正确。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T05:37:01.463

好吧，人们通常会将您拥有的数据结构称为一种树，而不是列表。但不管怎么说...

问题#1：Haskell 对缩进敏感，你的`case`表达式没有缩进。这会导致解析错误。

问题 #2，也是更大的问题：你还没有理解`Maybe`类型是如何工作的。我的印象是你认为它在更常见的语言中就像空值一样工作，这让你失望。

在像 Java 这样的语言中，`null`是一个可以出现在大多数其他值可以出现的地方的值。如果我们有一个具有以下签名的方法：

```
public Foo makeAFoo(Bar someBar) 
```

...那么将其称为以下任何一种方式都是合法的：

```
// Way #1: pass in an actual value
Bar theBar = getMeABar();
Foo result = makeAFoo(theBar);

// Way #2: pass in a null
Foo result2 = makeAFoo(null) 
```

`theBar`并且`null`在某种意义上是“并行的”，或者更准确地说，*它们具有相同的类型*——您可以在程序中将一个替换为另一个，并且在两种情况下都可以编译。

另一方面，在 Haskell 中，字符串`"hello"`和`Nothing`不具有相同的类型，并且您*不能*在另一个地方使用一个。Haskell 区分这三件事：

1.  需要存在的字符串：`"hello" :: String`
2.  缺少可选字符串：`Nothing :: Maybe String`
3.  可选字符串的存在：`Just "hello" :: Maybe String`

#1 和 #3 之间的区别是你在你的函数中系统地遗漏了什么。使用`Maybe a`，在您确实有一个*必须*使用的值的情况下`Just`，它就像一个包装器来表示“这不仅仅是一个`a`，它是一个`Maybe a`”。

您缺少的第一个地方是表达式`Just`的右侧`case`，我们可以这样修复：

```
-- This still fails to compile!
cListGet :: CList a -> Maybe (a, CList a)
cListGet Nil             = Nothing
cListGet xs@(NotNil nxs) =
    case nxs of
                       -- I added 'Just' here and in the next line:
      Sing x        -> Just (x, Nil)
      Append l r    -> Just (fst $ cListGet (NotNil l), (Append (snd $ cListGet (NotNil l)), r)) 
```

但这还没有结束，因为你正在做`fst $ cListGet (NotNil l)`，它会遇到相反的问题：`cListGet`返回`Maybe (a, CList a)`，但`fst`在 上工作`(a, b)`，而不是在 上`Maybe (a, b)`。您需要对结果进行模式匹配`cListGet`以测试它是`Nothing`还是`Just (x, l')`. （同样的问题也出现在您的`snd $ cListGet (NotNil l)`.）

第三，您`Append`错误地使用了构造函数。你有它的形式，它应该在和`(Append foo, bar)`之间没有逗号。在 Haskell 中，这种事情会给你比大多数其他语言更令人困惑的错误消息，因为当 Haskell 看到这个时，它不会告诉你“你犯了语法错误”；Haskell 比大多数语言更文字化，因此它认为您正在尝试将 with作为第一个元素，作为第二个元素，因此它得出的结论是必须具有 type 。`foo``bar``Append foo``bar``(Append foo, bar)``(NNList a -> NNList a, NNList a)`

第四个也是最后一个问题：你给自己设置的问题没有明确说明，因此没有好的答案。你说你想找到 a 的“头”和“尾” `CList a`。这意味着什么？在 Haskell`[a]`类型的情况下，带有构造函数`[]`and `:`，这很清楚：头部是`x`in `x:xs`，尾部是`xs`.

据我了解，您所说的“头”似乎是递归结构的最左侧元素。我们可以这样得到：

```
cListHead :: CList a -> Maybe a
cListHead Nil = Nothing
-- No need to cram everything together into one definition; deal with
-- the NNList case in an auxiliary function, it's easier...
cListGet (NotNil nxs) = Just (nnListHead nxs)

-- Note how much easier this function is to write, because since 'NNList'
-- doesn't have a 'Nil' case, there's no need to mess around with 'Maybe'
-- here.  Basically, by splitting the problem into two functions, only
-- 'cListHead' needs to care about 'Maybe' and 'Just'.
nnListHead :: NNList a -> a
nnListHead (Sing a) = a
nnListHead (Append l _) = nnListHead l 
```

所以你可能认为“尾巴”就是其他一切。好吧，问题在于“其他所有内容”不是您的*子部分*`CList`or `NNList`。举个例子：

```
example :: CList Int
example = NotNil (Append (Append (Sing 1) (Sing 2)) (Sing 3)) 
```

“头”是`1`。但是没有`example`包含`2`和`3`不包含的结构中定义的子部分`1`。您必须构建一个`CList`形状与原始形状不同的新产品才能获得它。这是可能的，但坦率地说，我不认为它作为初学者练习的价值。

如果不清楚我所说的“子部分”是什么意思，可以把这个例子想象成一棵树：

```
 NotNil
          |
          v
        Append
         / \
        v   v
     Sing   Append
      |      / \
      v     v   v
      1  Sing   Sing
          |      |
          v      v
          2      3 
```

子部分 = 子树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T04:19:15.420

提示：尝试仅使用模式匹配而不是相等检查 ( `==`) 来重写它。

**编辑：**

首先，了解什么是模式匹配以及它是如何工作的至关重要。我建议去[这里](http://en.wikibooks.org/wiki/Haskell/Pattern_matching)阅读；网络上也有很多关于此的其他资源（谷歌是你的朋友）。

完成后，这里有另一个提示：首先编写一个函数`nnListGet :: NNList a -> (a, CList a)`，然后使用它来实现`cListGet`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T08:44:21.463

只是添加到其他（非常彻底的）答案：很高兴意识到您的自定义列表是可折叠的结构。这意味着，它表示可以组合在一起的一系列值。这样的数据类型可以实现[`Foldable`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Foldable.html)类型类。在您的情况下，它将是：

```
import Prelude hiding (foldr)
import Data.Foldable

data NNList a = Sing a | Append (NNList a) (NNList a) deriving (Eq)
data CList a = Nil | NotNil (NNList a) deriving (Eq)

instance Foldable NNList where
    foldr f z (Sing x)          = f x z
    foldr f z (Append xs ys)    = foldr f (foldr f z ys) xs
instance Foldable CList where
    foldr _ z Nil               = z
    foldr f z (NotNil xs)       = foldr f z xs 
```

从中您将`Data.Foldable`免费获得所有定义的功能，例如最大值/最小值，搜索元素等。

对于 any `Foldable`，您可以`headMaybe`使用[`First`monoid](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Monoid.html#t%3aFirst)实现返回其第一个元素。这是一个非常简单的[幺半群](https://en.wikipedia.org/wiki/Monoid)，它返回最左边的非空元素。所以如果你`Foldable`使用这个幺半群折叠 a 的所有元素，你会得到它的第一个：

```
import Data.Monoid

headMaybe :: (Foldable f) => f a -> Maybe a
headMaybe = getFirst . foldMap (First . Just) 
```

（或者，您可以`foldr`直接使用`Maybe`的实例[`Alternative`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#t%3aAlternative)，它再次返回最左边的非空元素：

```
import Control.Applicative

headMaybe = foldr (\x y -> pure x <|> y) Nothing 
```

.)

但是，这并不能解决您问题的第二部分 - 计算`tailMaybe`。这不能以通用方式定义，如`headMaybe`，您需要自定义函数，就像您所做的那样。

也可以看看：

*   [折叠](https://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)维基百科。
*   Haskell wiki 上的[可折叠和可遍历。](http://www.haskell.org/haskellwiki/Foldable_and_Traversable)
*   [折叠](http://www.haskell.org/haskellwiki/Fold)在 Haskell wiki 上。
*   Haskell wikibook 上的[列表处理。](https://en.wikibooks.org/wiki/Haskell/List_processing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:27:03.653

你为什么用两种类型来声明？这是一个看似更合适的类型声明，具有正确的功能：

```
data CList a
  = Nil
  | Sing a
  | Append (CList a) (CList a)
  deriving (Eq)

headAndTail :: CList a -> Maybe (a, CList a)
headAndTail Nil = Nothing
headAndTail (Sing a) = Just (a, Nil)
headAndTail (Append a b) = 
  case headAndTail a of
    Nothing -> headAndTail b
    Just (head, tail) -> Just (head, Append tail b) 
```

# java - 以跨平台方式收集当前服务器信息

> ID：15651774
> 
> 赞同：3
> 
> 时间：2013-03-27T04:11:13.467
> 
> 标签：java, hostname

我们有一些 Java 应用程序，可以从命令行或 Web 服务器内部调用。无论哪种方式，他们都会登录到中央数据库。能够设置我们的 Java 应用程序以在启动时读取主机名（或其他一些唯一标识符）将非常有用，因此他们可以报告他们正在哪个服务器上运行以进行调试。Java中有这样的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:21:35.483

试试看嘛

```
InetAddress.getLocalHost().getHostName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:12:42.493

我已经[`ManagementFactory#getRuntimeMXBean()`](http://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getRuntimeMXBean%28%29)相当有效地用于调试目的。您可能只想要[名称](http://docs.oracle.com/javase/7/docs/api/java/lang/management/RuntimeMXBean.html#getName%28%29)：

```
String localHostName = ManagementFactory.getRuntimeMXBean().getName(); 
```

> 返回代表正在运行的 Java 虚拟机的名称。返回的名称字符串可以是任意字符串，Java 虚拟机实现可以选择在返回的名称字符串中嵌入特定于平台的有用信息。每个正在运行的虚拟机可以有不同的名称。

# python - Tkinter 全屏应用

> ID：15651776
> 
> 赞同：8
> 
> 时间：2013-03-27T04:11:29.653
> 
> 标签：python, tkinter, fullscreen

我正在创建一个应用程序。我需要它是一个真正的全屏应用程序。我的意思是顶部或周围没有任何标题栏。

这是我的代码的基本版本：

```
from tkinter import *

window = Tk()
canvas = Canvas(window, width=1400, height=820, bg="SteelBlue2")
canvas.pack()

xposition = 0
yposition = 0

temperature = "46"
message = "The temperature right now is " + temperature
indepth = "Its a clear night"

def moveleft(event):
    global yposition, xposition
    if yposition == 0 and xposition > -2:
        x = 0
        for i in range(40):
            canvas.move('test', x, 0)
            canvas.after(10)
            canvas.update()
            x -= 1
        xposition -= 1

def moveright(event):
    global yposition, xposition
    if yposition == 0 and xposition < 2:
        xposition += 1
        x = 0
        for i in range(40):
            canvas.move('test', x, 0)
            canvas.after(10)
            canvas.update()
            x += 1

def moveup(event):
    global i
    global yposition, xposition
    if xposition == 0 and yposition == 0:
        yposition += 1
        x = 0
        for i in range(10):
            canvas.move('test', 0, x)
            canvas.after(10)
            canvas.update()
            x -= 1
        i = canvas.create_text(700, 400, text=indepth, font=('Helvetica Neue UltraLight', 50),
                               fill="white", anchor='c')

def movedown(event):
    global i
    global yposition, xposition
    if xposition == 0 and yposition == 1:
        yposition -= 1
        x = 0
        canvas.delete(i)
        for i in range(10):
            canvas.move('test', 0, x)
            canvas.after(10)
            canvas.update()
            x += 1

test = canvas.create_text(700, 400, text=message, font=('Helvetica Neue UltraLight', 50),
                          fill="white", anchor='c', tag='test')

window.bind("<Left>", moveright)
window.bind("<Right>", moveleft)
window.bind("<Up>", moveup)
window.bind("<Down>", movedown)

window.mainloop() 
```

任何人都可以建议一种方法来改变它，让它全屏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-14T16:57:47.800

`window.attributes("-fullscreen",True)`应该做的伎俩。

# isa-swizzling - 我在 python 中添加两个矩阵时遇到问题

> ID：15651778
> 
> 赞同：1
> 
> 时间：2013-03-27T04:11:36.850
> 
> 标签：isa-swizzling

我想在 python 3 中添加两个矩阵，但是当我添加`input`到程序时问题就来了

这是我的代码

```
def addmatrix(a,b):
    d=[]
    n=0
    while n < len (a):
        c = []
        k = 0
        while k < len (a[0]) : 
            c.append(a[n][k]+b[n][k])
            k += 1 
        n += 1
        d.append (c)
    return d

def main():
    a = input("Enter a Matrix: ")
    b = input("Enter another Matrix: ")
    print (addmatrix(a,b))
main() 
```

如果输入是

输入矩阵：`[[5,6], [1,2], [2,4]]`

输入另一个矩阵：`[[2,3], [-6,0], [-2, 4]]`

输出为 [['[['], ['[['], ['52'], [',,'], ['63'], [']]'], [',, '], [''], ['[['], ['1-'], [',6'], ['2,'], [']0'], [',]'], [','], ['['], ['2['], [',-'], ['42'], ['],'], ['] ']]

但是如果我`input`从程序中取出并使它

```
def main():
    a = [[5,6], [1,2], [2,4]]
    b = [[2,3], [-6,0], [-2, 4]]
    print (addmatrix(a,b))
main() 
```

然后输出`[[7, 9], [-5, 2], [0, 8]]`是正确的。

有没有一种方法可以使我的程序正常工作，以便当一个人输入两个矩阵时，它们相加？我是 python 新手，所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:16:57.910

您必须将用户输入转换为 Python 对象。现在，它是一个字符串。

您可以使用`eval`（如果您**不**知道用户将输入什么，则不应使用。我可以输入`__import__('os').system('rm /some/file.txt')`，Python 将删除一个文件）：

```
a = eval(input("Enter a Matrix: ")) 
```

或者您可以使用`ast.literal_eval`，这是安全的：

```
from ast import literal_eval

...

a = literal_eval(input("Enter a Matrix: ")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:22:24.480

尝试这个：

```
import ast

def addmatrix(a,b):
    return [map(sum, zip(*x)) for x in zip(a,b)]

def main():
    a = ast.literal_eval(raw_input("Enter a Matrix: "))
    b = ast.literal_eval(raw_input("Enter another Matrix: "))
    print addmatrix(a,b)

main() 
```

# html - IE8 CSS 文本间距问题 Text-Justify

> ID：15651779
> 
> 赞同：0
> 
> 时间：2013-03-27T04:11:49.177
> 
> 标签：html, css, fancybox

我在 ie8 中遇到了 CSS text justify 问题，需要创建一个 ie8 特定规则来解决这个问题，但我对这个过程不太熟悉。

页面和文本应该如下所示：**[链接到页面](http://tinyurl.com/d3va35m)**（使用现代浏览器，如 Chrome / Safari / Firefox）。

附上显示 ie8 间距的图片。![ie8文字间距问题](../Images/db832c0f27b2969cbfb37017e28a78f0.png)

我怎样才能解决这个问题？一如既往地感谢您的帮助！

**CSS**

```
/*Fancybox Gallery Divs*/

#thumbs {   
    width: 960px;
    margin-top:20px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

#thumbs a {
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
}

.stretch {
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
}

/*Descriptions*/

#desc-wrapper {
    width: 960px;
    padding-top: 5px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

.description {
    float:left;
    width: 320px; // Increase/decrease width for margin between images
    height: 25px;
    text-align: center;
    margin-bottom: 30px;
}

.clear {
    clear:both;
} 
```

**HTML**

```
<!--/ Photo Thumbs Row 1-->

<div id="thumbs">

<a id="single_image" href="/bp/images/roscoes-run.jpg"><img src="/bp/images/roscoes-run(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/roscoes-run-2.jpg"><img src="/bp/images/roscoes-run-2(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/chicken-waffles.jpg"><img src="/bp/images/chicken-waffles(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
<div class="clear"></div>
</div>

<!--/ Photo Thumbs Row 2-->

<div id="thumbs">

<a id="single_image" href="/bp/images/mens-retreat-2012.jpg"><img src="/bp/images/mens-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/winter-retreat-2012.jpg"><img src="/bp/images/winter-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/new-years-eve-2012.jpg"><img src="/bp/images/new-years-eve-2012(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Men's Retreat 2012</div>
<div class="description">Winter Retreat 2012</div>
<div class="description">New Year's Eve 2012</div>
<div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T23:21:38.203

尝试添加`text-justify: inter-word`到 .description 样式。

# google-apps-script - 谷歌脚本 Session.getActiveUser().getEmail() 不工作

> ID：15651781
> 
> 赞同：3
> 
> 时间：2013-03-27T04:12:11.837
> 
> 标签：google-apps-script

我用谷歌脚本开发了一个网络应用程序，并在我的 gs 中编写了代码。

```
var email = Session.getActiveUser().getEmail();
Logger.log(email);
// then do something to render the Email address on the page 
```

发布脚本后，我用另一个帐户登录并执行脚本。

然后页面显示如下：

**此应用程序是由其他用户而非 Google 创建的。**

**此应用程序可以访问以下个人信息：电子邮件地址。**

但日志中仍然没有任何内容，页面也没有显示任何内容。

我只是不明白...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:04:08.357

尽管 Session.GetActiveUser() 的参考文档中没有明确说明，但我的测试确认您的 Web 应用程序需要在用户访问 Web 应用程序时执行才能访问 getActiveUser()。我使用了下面的代码和[这里描述的日志库。](http://stevewhisenhant.wordpress.com/2013/03/25/google-apps-script-logging-library/)

根据您的应用程序的用例，也许您可​​以[创建一个包含集中式 ScriptDB 实例的库](https://developers.google.com/apps-script/scriptdb#centralizing_a_place_to_get_a_database_instance)来捕获活动用户电子邮件。然后，创建另一个与您的私人电子表格和相同 scriptDB 库一起使用的项目。

```
var LOG_FILENAME = 'your-log-doc'
var LOG_PATH = 'folder/subfolder/third-folder'

function doGet() {
  //Change variable above to a good path and filename for you
  var x = LogLibrary.InitializeLogging(LOG_PATH, LOG_FILENAME)
  Logger.log(x)

  var email = Session.getActiveUser().getEmail();
  Logger.log("Start email logging")
  Logger.log(email);
  LogLibrary.fnSaveLog()  //Write the save and flush the logger content

  // then do something to render the Email address on the page
  var HTMLToOutput = '<html><h1>A header</h1><p>' + email + '</p></html>';
  return HtmlService.createHtmlOutput(HTMLToOutput);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-13T11:04:51.423

我进行了一些测试，因为我正在寻找关于同一问题的解决方案，我得出的结论是：

*   为了使功能可以工作，网络应用程序应作为“用户访问网络应用程序”执行，为此，网络应用程序应配置为可以作为访问网络应用程序的用户执行
*   请注意：用户将被要求授权脚本访问、编辑和管理它的驱动器以及接收和发送邮件（这对于大多数 corse 用户来说并不明显！！）。

最后，这取决于您将使用它的目的。

在谷歌文档中没有提到这个问题！

对于将电子邮件地址作为文本返回以用作脚本或在 google html 表单中的简单函数.. 等：

```
function OnOpen(){
var emailName = Session.getActiveUser().getEmail();
var optionsHtml =  emailName.toString().split(",");

     return optionsHtml;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T14:11:23.573

如果您的应用程序是 2013 年 6 月 25 日之前的应用程序，并且您正在使用 getEffectiveUser() 或 getUser() 方法，则由于新的授权体验，您将需要重新授权脚本。

您可以在此处查看文档。

[https://developers.google.com/apps-script/scripts_google_accounts#understandingPermissions](https://developers.google.com/apps-script/scripts_google_accounts#understandingPermissions)

并且不要忘记在部署之前执行脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T05:12:09.827

查看气体问题论坛（谷歌）。它已经解决了很多次。基本上，如果您希望来自域外的用户，您需要将其设置为以访问应用程序的用户身份运行。更改该设置很可能会破坏您的应用程序，具体取决于它需要的权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-01T16:58:44.230

如果您想访问用户的电子邮件，请确保您已将`"https://www.googleapis.com/auth/userinfo.email"`电子邮件访问策略添加到`appsscript .json`

您可以在此处查看文档。

[https://developers.google.com/apps-script/reference/base/session#authorization](https://developers.google.com/apps-script/reference/base/session#authorization)

# php - 想要将 $_post 数据插入到临时表中

> ID：15651782
> 
> 赞同：0
> 
> 时间：2013-03-27T04:12:15.267
> 
> 标签：php

这是我的代码是否有任何语法错误，请指导我

```
$degree = $_POST['edu'];

$board  = $_POST['bu'];

$result = $_POST['rdd'];

$marks  = $_POST['tm'];

$maketemp = "CREATE TEMPORARY TABLE temp_table_1 ( `degree` varchar(100),`board` varchar(100),`resultd` varchar(100), `marks` varchar(100),)";

mysql_query($maketemp);

$insertemp = "INSERT INTO temp_table_1 (degree, board, resultd, marks ) VALUES ('$degree', '$board', '$resultd', '$marks',) ";

mysql_query($insertemp);

$show =  mysql_query("SELECT * FROM temp_table_1");

if($show)
{
    while($row = mysql_fetch_assoc($show)){

        echo $row['degree'];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:15:02.027

您的两个查询中的语法错误，只需将您的两个查询替换为...

```
$maketemp = "CREATE TEMPORARY TABLE temp_table_1 ( `degree` varchar(100),`board` 
varchar(100),`resultd` varchar(100), `marks` varchar(100))";  // removed last comma

  mysql_query($maketemp);

$insertemp = "INSERT INTO temp_table_1 (degree, board, resultd, marks ) VALUES ('$degree', 
'$board', '$resultd', '$marks') ";  // removed last comma 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:27:38.310

查询中有一些错误。从 create table 中的查询末尾删除 TEMPORARY 和 ','。

改成这个

```
CREATE TABLE temp_table_1 ( `degree` varchar(100),`board` varchar(100),`resultd` varchar(100), `marks` varchar(100))

INSERT INTO temp_table_1 (degree, board, resultd, marks ) VALUES ('".$degree."','".$board."','".$resultd."', "'.$marks."'") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:03:10.603

我发现 4 个错误：

```
Extra comma after`marks` varchar(100)
Extra comma after '$marks'
Missing 'd' on $result = $_POST['rdd'];
Missing end brace of the if statement 
```

下面是一个工作版本。我建议使用

```
 die( die(mysql_error() . "<br>Query: " . ...) 
```

在每个 mysql_query() 之后。它提供了很多帮助。

```
$degree = $_POST['edu'];
$board = $_POST['bu'];
$resultd = $_POST['rdd'];
$marks = $_POST['tm'];

$maketemp = "CREATE TEMPORARY TABLE temp_table_1 ( 
    `degree` varchar(100),
    `board` varchar(100),
    `resultd` varchar(100), 
    `marks` varchar(100)
)";

mysql_query($maketemp) or die(mysql_error() . "<br>Query: " . $maketemp);

$insertemp = "INSERT INTO temp_table_1 (
    degree, board, resultd, marks 
    ) VALUES (
    '$degree', '$board', '$resultd', '$marks'
) ";

mysql_query($insertemp) or die(mysql_error() . "<br>Query: " . $inserttemp);

$select_temp = "SELECT * FROM temp_table_1";
$show = mysql_query($select_temp)  or die(mysql_error() . "<br>Query: " . $select_temp);

if($show) { 

    while($row = mysql_fetch_assoc($show)){
      echo "<br>".$row['degree'];
      echo "<br>".$row['board'];
      echo "<br>".$row['resultd'];
      echo "<br>".$row['marks'];
    }

}
?> 
```

# mysql - 在 mysql 中使用 select 更新

> ID：15651788
> 
> 赞同：0
> 
> 时间：2013-03-27T04:12:58.947
> 
> 标签：mysql

我将使用存储在 table_b 中的变量更新 table_a。但是当我尝试使用选择查询进行更新时，出现错误，请帮助我。十分感谢。

这是 2 个表的结构：

```
CREATE TABLE IF NOT EXISTS `table_a` (
  `fk1` int(11) DEFAULT NULL,
  `avg_100` int(11) DEFAULT NULL,
  `avg_score` int(11) DEFAULT NULL,
  `cvg_date` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `table_b` (
  `fk1` int(11) NOT NULL DEFAULT '0',
  `avg_100` int(11) DEFAULT NULL,
  `avg_score` int(11) DEFAULT NULL,
  `cvg_date` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

当我尝试执行查询时

```
UPDATE table_a a LEFT JOIN (( 
        SELECT fk1, SUM(avg_100) as avg_100, SUM(avg_score) as avg_score, MAX(cvg_date) as cvg_date
        FROM table_b
            GROUP BY fk1 
 ) AS b1 ) AS b ON a.fk1= b.fk1
SET
    a.avg_score = b.avg_score,
  a.avg_100 = b.avg_100, 
  a.cvg_date = b.cvg_date 
```

我有一个错误：

```
[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'b ON a.fk1= b.fk1
SET
    a.avg_score = b.avg_score,
  a.avg_100 = b.avg_100, 
' at line 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:56:24.657

您正在为 select 返回的表设置别名“b”和“b1”。你只需要一个。试试这个查询：

```
UPDATE table_a a 
LEFT JOIN ( 
    SELECT fk1, SUM(avg_100) as avg_100, SUM(avg_score) as avg_score, MAX(cvg_date) as cvg_date
    FROM table_b GROUP BY fk1 
) AS b 
ON a.fk1= b.fk1
SET
a.avg_score = b.avg_score,
a.avg_100 = b.avg_100, 
a.cvg_date = b.cvg_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:23:20.080

我认为您在左连接之后添加一个选择会出现语法错误。我发现了一个带有更新的堆栈溢出帖子，也许您可​​以将其用作重新排列查询的示例： [UPDATE multiple tables in MySQL using LEFT JOIN](https://stackoverflow.com/questions/806882/update-multiple-tables-in-mysql-using-left-join)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T17:27:29.033

我使用 rownum 解决了这个问题

```
UPDATE TABLE1 set TABLE1.COLUMN1 = (select T2.COLUMN1 from TABLE1 AS T2
where T2.PK = TABLE1.PK
and rownum = 1 ) 
```

# mysql - sql 错误 1111 - 组函数的使用无效

> ID：15651791
> 
> 赞同：0
> 
> 时间：2013-03-27T04:14:06.753
> 
> 标签：mysql, database

我在使用下面的脚本时遇到了这个错误，我在这个网站和谷歌上搜索了很多线程，但我找不到我的问题的解决方案。

```
 select ct.tons as total_tons,
       sum(IF(sum(wr.tons) is not null,sum(wr.tons),0)) as total_delivered,            
       sum(ct.tons - IF(sum(wr.tons) is not null,sum(wr.tons),0)) as total_balance,
             sum(IF(sum(f.tons_fixed) is not null, sum(f.tons_fixed), 0)) as total_fixed,
             sum(IF(sum(f.tons_fixed) is not null, ct.tons - sum(f.tons_fixed), 0)) as total_unfixed,
             avg(sum(IF(f.tons_fixed * f.hedge_price is not null,f.tons_fixed * f.hedge_price, 0))/IF(sum(f.tons_fixed) is not null, sum(f.tons_fixed), 1) + ct.differential_fob) as avg_contract_price,
           avg(db.current_basis) as avg_market_price,            
             avg(ct.contract_price_foreign - db.current_basis) as avg_outright_fob,
             avg(ct.differential_fob) as avg_contract_fob_diff,
             avg(IF(mf.diff is not null, mf.diff, 0)) as avg_market_fob,
             avg(ct.differential_fob - IF(mf.diff is not null, mf.diff, 0)) as avg_diff_fob 
from contract ct 
left join grade_master gm on ct.grade_id = gm.id
left join movement m on m.contract_id = ct.id
left join warehouse_receipt wr on wr.movement_id = m.id
left join daily_basis db on ct.terminal_month = db.id 
left join contract_price_fixation f on f.contract_id = ct.id
left join market_fob_diff mf on mf.grade_id = ct.grade_id
left join grade_master gmt on mf.grade_id = gmt.id
left join company_master cm on cm.id = ct.supplier_buyer_id
GROUP BY ct.id 
```

我认为问题可能是总和（平均）内的总和，因为在删除最左边的总和时，脚本有效。请帮我纠正它！
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:49:48.917

像这样换行

```
sum(IF(sum(wr.tons) is not null,sum(wr.tons),0)) as total_delivered 
```

至

```
COALESCE(SUM(wr.tons), 0) AS total_delivered 
```

返回它的`COALESCE()`第一个不为空的参数。

# ios - 在 iPad 应用程序中禁用 UIImageView 的手势识别器

> ID：15651794
> 
> 赞同：0
> 
> 时间：2013-03-27T04:14:29.927
> 
> 标签：ios, objective-c, uiimageview, uigesturerecognizer, uipagecontrol

我有一个`PageControl`，每个页面（`ViewController`）都有不同数量的`imageviews`（`UIImageView`），它们是动态创建的。

每个`imageview`都分配一个`gesture recognizer (tapped or move)`. 由于这些在 a 内`PageControl`，我想启用/禁用它，`gesture recognizer`这样它就不会干扰`swipe`到页面事件。

我知道有一种`removeGestureRecognizer`方法，但我不想每次都删除并附加它。仅启用和禁用是否有等效项？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:28:40.203

您可以使用 UIGestureRecognizer 的启用或禁用属性，例如：

```
swipeGestureRecognizer.enabled = NO; 
```

或者如果您不想触摸，可以使用手势识别器方法 return **null**

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
       shouldReceiveTouch:(UITouch *)touch; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:36:37.040

如果你想同时禁用所有手势，你可以这样做

```
imageView.userIntractionEnabled = NO; 
```

如果您只想禁用一个手势识别器，那么

```
NSArray *gestures = imageView.gestureRecognizers;
for(UIGestureRecognizer *gesture in gestures)
{
    if([gesture isKindOfClass: [UITapGestureRecognizer class]])
    {
        gesture.enabled = NO;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:25:38.150

您可以`userInteractionEnabled`为此禁用`UIImageView`吗？如果您这样做，您可以在 Interface Builder 中执行此操作，或者您可以像这样以编程方式设置它 -`imageView.userInteractionEnabled = NO;`希望这会有所帮助......

![在此处输入图像描述](../Images/05ca084f02162067a19ff5be738a0160.png)

# map - Google 地球专业版替代品

> ID：15651797
> 
> 赞同：1
> 
> 时间：2013-03-27T04:14:44.417
> 
> 标签：map, gis, shapefile

有没有像 Google Earth Pro 这样的替代免费应用程序？，我的主要事情是它应该将形状文件作为地图中的图层导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T20:45:23.883

有一个名为“Marble”的开源应用程序可以正常工作……但不幸的是，您无法将 shapefile 加载到其中。在加载它们之前，您必须使用 qgis 或其他东西将您的 shapefile 转换为 wkt。卫星图像是如此可悲，以至于被认为不存在。但它肯定比 Google Earth Pro 快，而且您可以使用 OpenStreetMap 获得相当不错的矢量缩放体验以查看您所在的位置。

[http://marble.kde.org/index.php](http://marble.kde.org/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:59:44.397

取决于你在寻找什么。如果您真的只想查看 shapefile，请使用 qgis 或 udig 之类的东西。

如果您想在街道地图或卫星基础层上查看 shapefile，我不确定是否有适合您的开箱即用的东西。Open Street Map 有数据；像[http://www.osm974.re/osm2gis/](http://www.osm974.re/osm2gis/)这样的服务可以将有限区域的开放街道地图数据导出为 shapefile。

您可能想仔细阅读 Open Street Map wiki 中的此页面：[http ://wiki.openstreetmap.org/wiki/Shapefiles](http://wiki.openstreetmap.org/wiki/Shapefiles)

# session - Coldfusion 10：在url中传递时jessionid不起作用

> ID：15651799
> 
> 赞同：3
> 
> 时间：2013-03-27T04:14:56.990
> 
> 标签：session, coldfusion, jsessionid, coldfusion-10

我们正在从 ColdFusion 8 迁移到 10。我们的应用程序也具有用 .NET 编写的功能，但是会话仅在 ColdFusion 中维护。

## ColdFusion 8 中用于 .NET 和 CF 集成的当前架构：

1.  会话在用户登录应用程序时设置（在 CF 中）。（我们正在使用 J2EE 会话。）
2.  当用户点击 .NET 链接，`Jsessionid,CFID`并`CFTOKEN`通过 url 传递到 .net 页面时。在 .net 代码中，执行以下步骤来检查会话：

    2a。`jsessionid`调用一个通用函数，该函数将在 url 中执行 ColdFusion 文件请求 (chkSession.cfm) 。

    2b。如果可用， chkSession.cfm 将返回`session.UID`，否则将返回 -1。如果in url 有效，`Session.UID`则将可用。`jsessionid`

    2c。如果返回有效的 UID，将加载 .NET 页面。如果返回-1，用户将被重定向到登录页面。

## CF 10 中的问题：

在 CF 10 中，我们总是得到-1。我读到，作为 CF 10 中安全性增强的一部分，我们将无法通过在 url 中传递`cfide`,`cftoken`来重新创建 ColdFusion 会话。`jsessionid`

我想就什么是使我们的 .NET 功能在 ColdFusion 10 中工作的最佳方法获得您的建议。有没有更好的方法来检查来自 .NET 的 ColdFusion 会话？我能想到的一种选择是使用数据库。我期待一个可以快速实施且功能强大的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:32:14.630

我认为可行的是更改您的 .Net 客户端代码以通过 JSessionID 作为其请求中的 cookie 值发送。这样，您应该再次使用的功能。

值得注意的是，在 URL 中公开 Session ID 可能会使您暴露于某些安全漏洞，因此您将来可能希望避免这种情况。

我也使用了您提到的数据库方法。如果您走这条路，请让 CF 代码使用 GUID 作为标识符和创建记录时的时间戳插入记录。在 .Net 方面，查找 GUID 并仅在时间戳来自小于 X 秒前的情况下接受请求，因此您不会创建会长时间验证您的令牌。X 需要是您认为客户端遵循从 CF 到 .Net 页面的重定向所需的最大时间，因此 2 可能很多。您将要删除已使用的令牌并有一个计划任务来删除“未使用”的令牌。

# eclipse - Google App Engine 上的 NoClassDefFoundError

> ID：15651800
> 
> 赞同：0
> 
> 时间：2013-03-27T04:14:59.617
> 
> 标签：eclipse, google-app-engine, noclassdeffounderror

我正在使用 GWT 和 GAE 在 Eclipse Juno 上开发一个项目。

我的原始项目在同一个项目中包含所有包和类，并且在开发模式下以及在 Internet 上上传到 Google App Engine 时都可以正常工作。

然后我创建了另一个项目（在同一个工作区），我移动了通用类，以便它们可以用于其他项目。我还没有创建 Jar 文件。我一定要吗？我希望我可以将我的通用类保留在另一个项目中，而不将它们放在 jar 文件中。

过了一会儿，我能够在两个项目上创建正确的 XXX.gwt.xml 文件，并将新项目添加到主项目属性（项目 >> 属性 >> 项目）的“项目”选项卡中，以使移动的类对主要项目。GWT 编译器找到那些移动的类，将它们翻译成 Javascript 代码，主项目能够在客户端执行它们。

我的问题在服务器端。无论我尝试什么，服务器部分都找不到移动的类，并且在尝试执行它们中的任何一个时，在开发模式下运行时都会出现“NoClassDefFoundError”错误（我没有尝试上传到互联网上的 Google App Engine然而）。如果我在服务器端注释掉对这些类的所有引用，则不会出现错误，但我当然没有它们的功能。

加斯顿·塞隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:27:06.880

是的，您必须创建第二个项目的 jar，并将其放在 WEB-INF/lib 文件夹中。

如果您可以使用 maven 或 ant，您可能可以设置 appengine 以将其他项目编译成 jar 并将其用作 app engine 项目的依赖项。

# python - 我正在为 python 应用程序编写插件，发现我无法加载任何外部库

> ID：15651805
> 
> 赞同：-1
> 
> 时间：2013-03-27T04:15:15.463
> 
> 标签：python, plugins, import, external

我正在为 python 应用程序编写插件，发现我无法加载任何外部库...这个 python 应用程序有自己的小型库集，并且不会在 python26 文件夹中搜索其他库。因此我发现它很难导入任何库我的插件脚本中的外部库（例如python-twitter）..顺便说一句，我不允许修改那个python应用程序，所以我需要在我的插件脚本中添加一些代码来加载那些外部库......还有更多的乐趣，大多数库调用其他库...我找到了一种加载一个库的方法，但是当这个库调用其他库时仍然出错...试图在前面添加 PYTHONPATH='C:/Python26/Lib/site-packages/'我的脚本，不是真的有效....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:55:42.870

您可以将位置添加到 python 路径，如下所示..并在您的插件中添加它的主要代码之前

```
import sys
sys.path.append('your path') 
```

或者

```
sys.path.insert(0,"your path") 
```

[修改 Python 的搜索路径](http://docs.python.org/2/install/index.html#modifying-python-s-search-path)

# php - mysql_fetch_array() boolean 给定无法找到错误

> ID：15651806
> 
> 赞同：-1
> 
> 时间：2013-03-27T04:15:19.997
> 
> 标签：php, mysql, wordpress, buddypress

在解决另一个问题后，我现在在我的错误日志中得到了这个。我查看了 stackoverflow 上的所有内容，我想出的只是让它显示错误，问题是我找不到错误显示的位置，所以我无法以这种方式对其进行故障排除。任何人都可以帮助给我一些指导吗？我不想重复，我真的只是想了解发生了什么，如果放错了地方，对不起（如果是，请告诉我！）。

这是错误：

```
[Wed Mar 27 01:36:41 2013] [error] PHP Warning:  mysql_fetch_array() expects parameter 1 to be resource, boolean given in /nas/wp/www/cluster-1434/XXXXXXX/wp-content/themes/mytheme/functions.php on line 574
[Wed Mar 27 01:36:14 2013] [error] PHP Warning:  mysql_fetch_array() expects parameter 1 to be resource, boolean given in /nas/wp/www/staging/XXXXXXX/wp-content/themes/mytheme/functions.php on line 572 
```

这是第 572 行：

> $ll = mysql_fetch_array($getLL);

这是第 574 行：

> $cou = mysql_fetch_array($getCount);

这是代码：

```
<?php
$con = conDB();
$x = 0;
//if ( false === ( $zip = get_transient( 'distinct_zips' ) ) ) {
$getZips = mysql_query("SELECT Distinct(meta_value) FROM wp_postmeta WHERE meta_key='_gmap_zip'",$con);
//$zip = mysql_fetch_array($getZips);
//  set_transient('distinct_zips', $zip, 60*5);
//}
while($zip = mysql_fetch_array($getZips)){
$getLL = mysql_query("SELECT * FROM zipcodes WHERE zip=".$zip['meta_value'],$con);
$ll = mysql_fetch_array($getLL);
$getCount = mysql_query("SELECT Count(*) FROM wp_postmeta WHERE meta_key='_gmap_zip' AND meta_value=".$zip['meta_value'],$con);
$cou = mysql_fetch_array($getCount);
$zipvalue = $zip['meta_value'];
$getNewest = mysql_query('SELECT * FROM wp_postmeta WHERE meta_key="_gmap_zip" AND meta_value="'.$zipvalue.'" LIMIT 5',$con);
if(strlen($ll['lat'])){
?> 
```

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:23:03.880

查询：

```
$getLL = mysql_query("SELECT * FROM zipcodes WHERE zip=".$zip['meta_value'],$con);
$getCount = mysql_query("SELECT Count(*) FROM wp_postmeta WHERE meta_key='_gmap_zip' AND meta_value=".$zip['meta_value'],$con); 
```

未能返回 false，导致这两个警告。

作为一般经验法则，您应该在处理查询时始终检查错误。你可以通过运行来做到这一点：

```
if (!empty(mysql_error())) // error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:23:15.223

```
try var_dump($getLL) 
```

由于 mysql_query() 执行中的任何错误，它似乎返回 false。在将它传递给另一个函数之前，请始终尝试仔细检查从 mysql 函数返回的答案。

```
while($zip = mysql_fetch_array($getZips)){
$getLL = mysql_query("SELECT * FROM zipcodes WHERE zip=".$zip['meta_value'],$con);
if($getLL == false)
{
    echo mysql_error();
    exit;
}
$ll = mysql_fetch_array($getLL);
$getCount = mysql_query("SELECT Count(*) FROM wp_postmeta WHERE meta_key='_gmap_zip' AND meta_value=".$zip['meta_value'],$con);
$cou = mysql_fetch_array($getCount);
$zipvalue = $zip['meta_value'];
$getNewest = mysql_query('SELECT * FROM wp_postmeta WHERE meta_key="_gmap_zip" AND meta_value="'.$zipvalue.'" LIMIT 5',$con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:50:28.707

请在之后使用以下代码`$getLL = mysql_query(...`

```
if (!$getLL) { 
    die('Invalid query getLL: ' . mysql_error());
} 
```

以及之后的代码`$getCount = mysql_query(...`

```
if (!$getCount) { 
    die('Invalid query getCount: ' . mysql_error());
} 
```

# php - 需要修改 Wordpress 主页模板以包含编辑器字段的忽略内容

> ID：15651810
> 
> 赞同：1
> 
> 时间：2013-03-27T04:15:37.337
> 
> 标签：php, css, themes, wordpress-theming, clearfix

我正在尝试调整一个名为[Pytheas](http://www.wpexplorer.com/pytheas-free-wordpress-theme/)的现有 Wordpress 主题（有关其功能的快速视频导览，请访问[此页面](http://www.wpexplorer.com/videos/pytheas-overview/)）。这是一个面向展示投资组合的 WP 主题。主页设有幻灯片。**我的目标是用嵌入的 Prezi 演示文稿替换幻灯片。**

主页元素是（从上到下移动）：标题、菜单、幻灯片、标语、亮点、帖子。然而，*主页*是一个奇怪的小东西。它会忽略您在编辑窗口中输入的任何内容（而是仅使用已上传到另一个仪表板部分的图像）。

我已经**确认**Prezi-Embedder 插件适用于标准样式*默认、博客和页面。*我的假设是有一些 CSS 元素在起作用。

我的*直觉*（和一点点嗅探）说这段 CSS（来自 template-home.php）可能会起作用。特别*是 clearfix*：

```
<div id="home-wrap" class="clearfix">
<?php
//get template path
$template_path = get_template_directory();

//show tagline if setting isn't empty
if(of_get_option('home_tagline')) { ?>
<div id="home-tagline" class="clearfix">
    <?php
    //tagline content
    echo of_get_option('home_tagline'); ?>
</div> 
```

这就是我向您求助的地方，*StackOverflow 社区成员。*我可以做些什么来提供额外的数据和/或上下文？

非常感谢您的关注。

马特·沃伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:53:51.550

第一步是验证幻灯片内容确实被输出到最终的 HTML。在验证了这一点之后，我转向显示的一个 JavaScript 错误：

`Uncaught Error: Syntax error, unrecognized expression: a[href$=.mp3]`

对完整错误的[快速谷歌](http://wordpress.org/support/topic/578167)似乎证实了这个错误正在杀死您网站的其余 JavaScript 的怀疑，从而导致您的幻灯片无法工作。

所以现在的想法（无法看到所有已安装的插件）是，您安装了一些插件来播放 MP3 文件。这就是我向您指出可能的解决方法的地方。上面的链接为导致此问题的已安装插件提供了潜在的修复，但简单地安装新的音频播放器是另一种有效且技术含量较低的解决方案。

我只能通过实际查看该站点来帮助您，这可能是提供相关信息以从社区获得更多反馈。

很高兴你解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:54:12.873

我联系了我的一位更精通 php/css 黑暗艺术的同事。他能够**确认**clearfix不是**问题***所在*。我走得很远。然而，他的修修补补让一些神经元放电，他窥探了一会儿。

 **使用 Chrome 的内置开发人员工具，他能够确定我遇到了与[此人相同的](http://wordpress.org/support/topic/does-not-work-with-latest-jquery-solution-provided)**javascript 错误**（对*我来说*是不可见的）。

在*该*线程中，一个zoonini 提供[了另一个指向](http://wordpress.org/support/topic/no-mp3-play-button-just-a-link?replies=9#post-2201546)*她*使用的解决方案的链接。钱在这里：

```
Search for href$=.mp3 and replace by href$=".mp3" 
```

据我所知，这就是问题所在：无论出于何种原因，HTML5 之前的嵌入式音频插件都会扰乱这些新奇的*自适应*主题（哦，我用了一个流行词吗？）。我摆弄了 javascript 文件，无法解决问题并说“去死吧”。

**我的解决方案是卸载 WPAudio 并*安装*Haiku Minimalist Player**（它是 HTML5 并且不会干扰此类主题元素）。

这不仅使我的嵌入式 Prezi 可显示，它还允许我的**首页幻灯片**（开始不起作用）正常工作。**

# javascript - 从字符串块中删除行的jQuery问题

> ID：15651812
> 
> 赞同：0
> 
> 时间：2013-03-27T04:15:44.697
> 
> 标签：javascript, jquery

我有以下字符串：

```
aaaaaaaa1
bbbbbbbb2
cccccccc3
dddddddd4 
```

这是我的领域：

```
<textarea id="myLinesField"></textarea> 
```

使用 jQuery，虽然我可以选择和删除任何行（以任何顺序），但我正在尝试从我的行中删除特定行，例如第二行以获得如下所示的确切结果：

```
aaaaaaaa1
cccccccc3
dddddddd4 
```

这是我的代码：

```
var value = $('#myLinesField').val();
var newVal = recipientValue.replace(stringLineToBeRemoved,'');
var finalResults = newVal.replace("\n", "");
$('#myLinesField').val(finalResults); 
```

但在某些情况下（并非总是）我会得到类似的东西：

```
aaaaaaaa1cccccccc3

dddddddd4 
```

谁能告诉我我在这里错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:33:27.330

# 试试这个：

**[http://jsfiddle.net/aidioo7/SpnrN/](http://jsfiddle.net/adiioo7/SpnrN/)**

# JS：

```
jQuery(function ($) {
    $("#btnSubmit").on("click", function () {
        var value = $('#myLinesField').val();
        var newVal = value.replace($("#strToRemove").val(), '');
        var finalResults = newVal.replace("\n", "");
        $('#myLinesField').val(finalResults);
    });
}); 
```

# html:

```
<textarea id="myLinesField" style="height:100px;width:100px;">aaaaaaaa1 bbbbbbbb2 cccccccc3 dddddddd4</textarea>
<br/>
<br/>Please enter the string to remove :
<input type="text" id="strToRemove"></input>
<input type="button" id="btnSubmit" value="submit"></input> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:26:27.253

改变

`var finalResults = newVal.replace("\n", "");`

至

`var finalResults = newVal.replace("\n", "\r");`

A`carriage return`将确保附加到前一行的行从下一行（它自己的）开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:36:50.713

尝试这个：

```
 var stringLineToBeRemoved = "bbbbbbbb2";
    var foundin = $('textarea:contains("'+stringLineToBeRemoved+'")');
    if(foundin)
    {
        var value = $('#myLinesField').val();
        var newVal = value.replace(stringLineToBeRemoved,'');
        var finalResults = newVal.replace("\n", "");
        $('#myLinesField').val(finalResults);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T04:43:15.713

您可以尝试这种方法（参见小提琴的工作示例：http: [//jsfiddle.net/amyamy86/29evM/](http://jsfiddle.net/amyamy86/29evM/)）：

```
var removeStr = function (str, index) {
    var parts = str.replace(/$(\s)*/gm, "\n").split("\n");
    parts.splice(index, 1);
    return parts.join("\n");
}; 
```

如果您的文本区域是：

```
<textarea id="myLinesField">aaaaaaaa1
bbbbbbbb2

cccccccc3
dddddddd4</textarea> 
```

然后：

```
var recipientValue = $('#myLinesField').val();
var finalResults = removeStr(recipientValue, 1);  // removes the 2nd line (non-empty line) 
```

将产生：

```
aaaaaaaa1
cccccccc3
dddddddd4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T04:46:15.923

尝试使用正则表达式

```
var stringLineToBeRemoved = 'cccccccc3';

var value = $('#myLinesField').val();
var regex =  new RegExp(stringLineToBeRemoved + '(\r\n|\n|\r)', 'm');
$('#myLinesField').val(value.replace(regex,'')); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Tg2yV/)

# ruby-on-rails - 如何将我的 assets/javascripts/ 中另一个目录中的 js 添加到 assets.precompile？

> ID：15651815
> 
> 赞同：1
> 
> 时间：2013-03-27T04:16:16.233
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

在我的一种观点中，我有这个：

```
<%= javascript_include_tag "piggybak_variants/piggybak_variants" %> 
```

其中包括一个`piggybak_variants.js`文件。

我在我的`production.rb`

```
config.assets.precompile += %w(piggybak_variants.js) 
```

但是我仍然在 Heroku 中收到关于该文件未预编译的错误。

除了做之外，我该如何解决这个问题`*.js`？这似乎是使用大锤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:49:50.883

您的包含路径缺少父目录。这应该有效：

```
config.assets.precompile += %w(piggybak_variants/piggybak_variants.js) 
```

# delphi - Shelltreeview从节点获取路径

> ID：15651818
> 
> 赞同：1
> 
> 时间：2013-03-27T04:16:51.173
> 
> 标签：delphi

我正在使用带有 onMouseMove 的自定义提示并且它工作正常我遇到的问题是将完整路径返回到字符串，这就是我的代码。

```
procedure TCoreVMain.CoreShellTreeViewMouseMove(Sender: TObject;
  Shift: TShiftState; X, Y: Integer);

  var
   tree: TsShellTreeView;
   hoverNode: TTreeNode;
   hitTest : THitTests;

begin

 if (Sender is TsShellTreeView) then
     tree := TsShellTreeView(Sender)
   else
     Exit;

   hoverNode := tree.GetNodeAt(X, Y) ;
   hitTest := tree.GetHitTestInfoAt(X, Y) ;
 if (lastHintNode <> hoverNode) then
   begin
     Application.CancelHint;

     if (hitTest <= [htOnItem, htOnIcon, htOnLabel, htOnStateIcon]) then
     begin
       lastHintNode := hoverNode;
       FileToolPanel.Caption := tree.path; //hovernode.Text;
       tree.Hint := NodeHint(hoverNode) ;
     end;
   end;
end; 
```

hovernode.text 仅返回显示名称“temp”而不是“c:\temp”，当节点项悬停且未选择时，如何恢复节点的完整路径？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:19:53.850

您需要从节点转换到其关联的 shell 文件夹。你可以这样做：

```
var 
  shellFolder: TShellFolder;
....
shellFolder := tree.Folders[hoverNode.Index]; 
```

shell 文件夹对象只是存储在节点的`Data`属性中，所以你可以这样做：

```
shellFolder := TShellFolder(hoverNode.Data); 
```

拥有 shell 文件夹后，您可以获得完整路径

```
tree.Hint := shellFolder.PathName; 
```

# php - 获取用户地理位置并根据位置回显 mysql 结果？

> ID：15651819
> 
> 赞同：0
> 
> 时间：2013-03-27T04:16:53.313
> 
> 标签：php, mysql

嗨，我正在尝试从他们的 IP 地址中找到我的用户所在的城市，以便能够在我的数据库中显示靠近他们/在他们所在地区的用户列表。

我一直在看这个api：

[http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php)

我已经注册并获得了一个 api 密钥，但我不确定从这里去哪里。这是他们用来获取用户位置的示例代码：

```
<?php
include('ip2locationlite.class.php');

//Load the class
$ipLite = new ip2location_lite;
$ipLite->setKey('<api key>');

//Get errors and locations
$locations = $ipLite->getCity($_SERVER['REMOTE_ADDR']);
$errors = $ipLite->getError();

//Getting the result
echo "<p>\n";
echo "<strong>First result</strong><br />\n";
if (!empty($locations) && is_array($locations)) {
  foreach ($locations as $field => $val) {
    echo $field . ' : ' . $val . "<br />\n";
  }
}
echo "</p>\n";

//Show errors
echo "<p>\n";
echo "<strong>Dump of all errors</strong><br />\n";
if (!empty($errors) && is_array($errors)) {
  foreach ($errors as $error) {
    echo var_dump($error) . "<br /><br />\n";
  }
} else {
  echo "No errors" . "<br />\n";
}
echo "</p>\n";

?> 
```

但是我现在将如何设置一个 mysql 查询，说明如果用户位置是伦敦并且用户在数据库中被列为伦敦，然后将这些显示给用户？

如果有人可以提供帮助，我将非常感谢您朝着正确的方向前进，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:36:17.317

这是一个示例（不知道您的数据库结构且未经测试；）。将其插入到 foreach ($locations as $field => $val) 循环中，如下所示：

```
foreach ($locations as $field => $val) {
    echo $field . ' : ' . $val . "<br />\n";

    $mysqli = new mysqli('<mysql server>', '<mysql user>', '<mysql password>', '<database>');
    if(mysqli_connect_errno()) {
        echo 'Error: Unable to connect to Database; ';
    } else {
        if ($stmt_evt = $mysqli -> prepare('SELECT <other_users>, ... FROM <your table> WHERE <user_location> LIKE ? ORDER BY <whatever>')) {
            $stmt_evt -> bind_param('s', $val);
            $stmt_evt -> execute();
            $stmt_evt -> bind_result($<other_users>, $...);
            while ($stmt_evt->fetch()) {
                echo 'Other users in your area: '.$<other_users>;
            }
        } else {
            echo 'Error: Unable to prepare Event statement.';
        }
    }
} 
```

# c - 调用 sem_init 时，“在数字常量之前应为 ')'

> ID：15651820
> 
> 赞同：0
> 
> 时间：2013-03-27T04:16:55.707
> 
> 标签：c, posix, semaphore

使用信号量和 POSIX 线程进行 OS 编程分配。这是我的代码：

```
#include <pthread.h>
#include <semaphore.h>

sem_t mutex, to_b, to_a;

int main()
{
    // Initialize semaphores
    sem_init(&mutex, 0, 1);
    sem_init(&to_b, 0, 0);
    sem_init(&to_a 0, 0);
} 
```

用我编译`gcc main.c -lpthread`得到：

```
main.c: In function 'main':
main.c:11:24: error: expected ')' before numeric constant
main.c:11:24: error: too few arguments to function 'sem_init'
/usr/include/semaphore.h:37:12: note: declared here 
```

知道是什么原因造成的吗？我肯定正确地调用了 sem_init 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:20:07.440

中缺少一个逗号

```
sem_init(&to_a 0, 0); 
```

它应该是

```
sem_init(&to_a, 0, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:20:11.440

```
sem_init(&to_a 0, 0);
              ^ 
```

你只是少了一个逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:20:32.360

所以看看错误：`main.c:11:24: error: too few arguments to function 'sem_init'`

第 11 行有一个问题，它“参数太少”。你在 10 号线和 9 号线打同样的电话，对吧？但没有这样的错误，所以请仔细查看第 10 行和第 11 行之间的字符。

你会看到你错过了一个逗号：

```
sem_init(&to_b, 0, 0);
sem_init(&to_a 0, 0);  // see it's shorter? 
```

应该：

```
sem_init(&to_a, 0, 0); 
```

# c# - 无法解析 CloudStorageAccount

> ID：15651824
> 
> 赞同：2
> 
> 时间：2013-03-27T04:17:25.577
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我的代码：

```
CloudStorageAccount.TryParse("DefaultEndpointsProtocol=http;AccountName=your_storage_account_name;AccountKey=your_storage_account_key"); 
```

总是返回假。我只能让它为连接字符串“UseDevelopmentStorage=true”工作。出于测试目的，我需要使用另一个（虚拟）连接字符串运行它，但我无法解析它。请指教。

抛出的异常是“找不到有效的帐户信息组合”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T16:16:43.203

试试这个：（使用 HTTPS）

```
 Dim account As CloudStorageAccount

    If CloudStorageAccount.TryParse("AccountName=youraccount;AccountKey=YourAccountKey;DefaultEndpointsProtocol=https", account) Then
        Dim tableClient As CloudTableClient = account.CreateCloudTableClient()
        Dim table As CloudTable = tableClient.GetTableReference("Test")
        table.CreateIfNotExists()
    End If 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-06T10:13:36.143

您需要使用具有有效大小和格式的帐户密钥。尝试使用这个：kiRN0h4jm24fyLZIT7y5+iA8nLE+5QUPisiFNJ/9bH4ws6T/m9sHmr22/dw0i+31Dgb/9JxYjj/V8SHxVPp7IA==

# php - 需要帮助在 PHP 中创建搜索框

> ID：15651827
> 
> 赞同：0
> 
> 时间：2013-03-27T04:17:35.090
> 
> 标签：php, html, search-box

我刚刚开始学习 php 之前的一些弱点.. 我正在研究一个搜索框，但我无法得到结果

```
 <html>
  <head><title>Search Form</title></head>
  <body>
        <form action="12.html" method="GET">
               <input type="text" name="keyword" id="keyword width="50" value="" />
               <input type="submit" value="Search"/>
  </form>
  </body>
  </html>
  <?php
  $searchfor = $_GET['keyword'];
  $file = '12.html';
  $contents = file_get_contents($file);
  $pattern = preg_quote($searchfor, '/');
  $pattern = "/^.*$pattern.*\$/m";
  if(preg_match_all($pattern, $contents, $matches)){
  echo "Found matches:<br />";
  echo implode("<br />", $matches[0]);
  }
  else{
  echo "No matches found";
  fclose ($file); 
  }
  ?> 
```

我的搜索内容在 12.html 文件中。如果我在搜索框中输入单词，我的页面的整个正文就会出现，因为结果我需要特定的行或其中的单词。即使我输入了我的内容中不存在的单词。我的文件正文显示我不知道我在哪里犯了错误，任何人都可以指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:22:53.930

首先，您的 HTML 语法有错误。您希望操作指向您的脚本。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET"> 
```

您的输入项中有错误。

```
<input type="text" name="keyword" id="keyword" width="50" value="" />

<?php
$searchfor = $_GET['keyword'];
$file = '12.html';
$contents = file_get_contents($file);
$pattern = preg_quote($searchfor, '/');
$pattern = '/'.$pattern.'/m';
if(preg_match_all($pattern, $contents, $matches)){
    echo "Found " . count($matches) . " matches:<br />";
//here you are imploding the entire array;
    echo implode("<br />", $matches);
}
else{
    echo "No matches found";
    fclose ($file); 
}
?> 
```

我不明白您为什么要内爆匹配项，因为这只会列出相同的单词，无论它被找到多少次。如果你想找到具体的线路，你可以试试这个。

```
<?php
$lines = explode('\n',$contents);
$lineNum = 1;
$linesFound = array();
foreach ($lines as $line){
    if (preg_match($pattern, $line)){
        $linesFound[] = $lineNum;
    }
    $lineNum++
}
if (!empty($linesFound)){
}
echo "Keyword found on line(s): 
?> 
```

# jquery - 使用 JQuery 在表行上添加列

> ID：15651830
> 
> 赞同：0
> 
> 时间：2013-03-27T04:18:06.117
> 
> 标签：jquery, html-table

我已经搜索并尝试了一些在表格行上添加 cols 的代码，这是我的完整代码：

```
<!doctype htlm>
<html>
<head>
<script language="Javascript" type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script>
function addCols2(){
$(document).ready(function(){
    $('#myTable').find('tr').each(function(){
        $(this).find('td').eq(6).after('<td>col 8</td>');
    });
});
}
</script>
</head>
<body>
<table id="myTable" border =1>
<?php

for($x=0;$x<5;$x++){
echo '<tr><td class=TableHeading>column 1</td>
        <td class=TableHeading>column 2</td>
        <td class=TableHeading>column 3</td>
    <td class=TableHeading>column 4</td>
    <td class=TableHeading>column 5</td>
    <td class=TableHeading>column 6</td>
    <td class=TableHeading>column 7</td>
<script type="text/javascript">
  addCols2();
 </script>
</tr>';
}

?>
</table>

</body>
</html> 
```

但是当我检查显示时，每一行都有 5 个（根据循环）col 8（我添加的）。有人能告诉我代码哪里错了吗？

# mysql - SQL 语法错误，但从 MYSQL 复制

> ID：15651839
> 
> 赞同：0
> 
> 时间：2013-03-27T04:19:47.997
> 
> 标签：mysql, sql

我有一个从 MYSQL 复制的 SQL 查询，但我删除了引号，但它似乎不起作用。

```
 conn = connect();
           selectStatement = "UPDATE student SET Item ? = ?, Type ? = ? WHERE ID = ?";
           System.out.println(selectStatement);
           if(conn != null)
           {
                preparedStatement = conn.prepareStatement(selectStatement);       
                preparedStatement.setString(2, id);
                preparedStatement.setInt(1, location);
                preparedStatement.setInt(3, location);
                preparedStatement.setString(4, type);
                preparedStatement.setString(5, userId);
                preparedStatement.executeUpdate();        
                return true; 
```

我不确定为什么它不起作用，因为抛出的异常是这个

com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '1 = 'sad', Type 1 = 'asd' WHERE ID = 'student1'' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:58:38.600

最后这奏效了。

```
 conn = connect();
          selectStatement = "UPDATE student SET `Item " + location + "` = ? , `Type " + location + "` = ? WHERE ID = ?";
          System.out.println(selectStatement);
          if(conn != null)
          {
               preparedStatement = conn.prepareStatement(selectStatement);       
               preparedStatement.setString(1, id);
               preparedStatement.setString(2, type);
               preparedStatement.setString(3, userId);
               preparedStatement.executeUpdate();        
               return true;
          } 
```

# security - 限制 Plone 作者上传文件类型

> ID：15651840
> 
> 赞同：2
> 
> 时间：2013-03-27T04:20:06.467
> 
> 标签：security, tinymce, plone, zope

有没有办法限制 Plone 作者上传某些文件类型，例如上传过滤器禁止说 *.exe 等？

也可以像这样添加 TinyMCE 限制：[http ://www.tinymce.com/wiki.php/MCImageManager:upload.extensions](http://www.tinymce.com/wiki.php/MCImageManager:upload.extensions)

如果这是在 TinyMCE 控制面板中，那就太好了。

# java - 我的代码中的异常 - Java

> ID：15651842
> 
> 赞同：0
> 
> 时间：2013-03-27T04:20:10.117
> 
> 标签：java, exception, try-catch

我是Java编程新手。我正在准备一项作业，我需要一些关于我的代码的帮助。说明说我需要在我的`numberOfRows()`和`convertFileArray()`方法中处理异常。练习包括读取 csv 文件、将文件转换为多维数组、在屏幕上打印数组。我的程序运行良好，我唯一的问题是我无法弄清楚我可以在这两种方法中处理哪些异常。

我写了一般例外只是因为我不知道该怎么做。任何建议都会非常有帮助。此外，我只发布需要放置 try-catch 块的课程。提前致谢。

这是我的代码：

```
import java.io.*;
import java.nio.file.*;
import java.util.StringTokenizer;

public class ReadFiles {
    int rows = 0;
    int columns = 0;
    String s = null;
    private String[][] arrayValues;
    Path filePath;

    public ReadFiles(String name) {

        filePath = Paths.get("C:\\stocks\\" + name);      //newMSFT.csv
        System.out.println("Path for file entered " + filePath.toString());

    }

    public boolean fileExists() {

        if(Files.exists(filePath))
            return true;

        else 
            return false;
    }

    public int numberOfRows() { 

        try {
            InputStream data = new BufferedInputStream(
              Files.newInputStream(filePath));
            BufferedReader reader = new BufferedReader(
              new InputStreamReader(data));
            s = reader.readLine();

            while(s != null) {
                rows++;
                s = reader.readLine();
            }    
        }

        catch(Exception e) {
            System.out.println("Message: " + e);
        }

        return rows;
    }

    public void convertFileArray() {

        try {
            InputStream data = new BufferedInputStream(
              Files.newInputStream(filePath));
            BufferedReader reader = new BufferedReader(
              new InputStreamReader(data));

            s = reader.readLine();   

            StringTokenizer z = new StringTokenizer(s, ",");
            columns = z.countTokens();

            arrayValues = new String[rows][columns];

            for(int x = 0; x < rows; x++) {
                z = new StringTokenizer(s, ",");

                //when there are still more tokens, place it in the array:
                int y = 0;
                while(z.hasMoreTokens()) {
                    arrayValues[x][y] = z.nextToken();
                    y++;
                }

                s = reader.readLine();
            }

            System.out.println("An array was created and has " +
              rows + " rows and " + columns + " columns.");
        } 

        catch(Exception e) {
            System.out.println("Message: " + e);
            e.printStackTrace();
        }
    }

    public void printArray() {  

        System.out.println("The data from the array is >> ");

        for(int a = 0; a < rows; a++) {
            String output = null;    

            for(int b = 0; b < columns; b++) {
                System.out.print(arrayValues[a][b] + "  ");

            }
            System.out.println();
        }
    }

    public String[][] getArrayValues() {
        return arrayValues;
    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:24:49.350

您所做的大部分事情看起来都是抛出[IOException](http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html)的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:30:25.687

如果您像这样使用 IDE，`eclipse`它会向您显示需要处理哪些异常。

在你的程序中有一个`IOException`in`convertFileArray()`和 in`numberOfRows()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:33:13.970

您的[readLine](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)方法抛出`IOException`.

```
try {
      s = reader.readLine();
    } catch (IOException e) {
      e.printStackTrace();
    } 
```

并且[Files.newInputStream(filePath)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newInputStream%28java.nio.file.Path,%20java.nio.file.OpenOption...%29)抛出以下异常：

*   `IllegalArgumentException`- 如果指定了无效的选项组合
*   `UnsupportedOperationException`- 如果指定了不受支持的选项
*   `IOException`- 如果发生 I/O 错误
*   `SecurityException`- 在默认提供程序的情况下，并且安装了安全管理器，调用 checkRead 方法来检查对文件的读取访问权限。

因此，由您决定如何处理以及要处理哪个异常。

# linux - 让 Asterisk 自动呼叫我和其他人加入会议

> ID：15651850
> 
> 赞同：2
> 
> 时间：2013-03-27T04:21:18.200
> 
> 标签：linux, asterisk, voip, phone-call, conference

我们正在尝试设置 Asterisk 服务器。我们已经启动并配置了中继和路由。我们每天在同一时间召开 2 或 3 人的每日电话会议。我们想告诉 Asterisk 自动呼叫每位同事并将他们带入会议。我们目前使用 GotoMeeting，但希望使用 Asterisk 自动执行此过程。有没有人见过这样的事情，或者对如何处理这样的情况有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:22:35.967

你需要

1.  设置会议号码

2.  创建通话文件一侧是您要邀请的号码，另一侧是会议号码和上下文（对于 freepbx context=from-internal）

因此，您需要为每个用户创建一个文件。

这个页面有很多例子：

[http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

可能出现的问题：

*   您使用 g729 编解码器进行呼叫，系统中没有编解码器。解决方案：在中继上禁止 g729
*   您呼叫 2-3 个用户，但只有一个呼出线路。

# c# - 任何人都知道是否可以使用 CallbackContracts 设置 Castle Windsor

> ID：15651855
> 
> 赞同：0
> 
> 时间：2013-03-27T04:21:44.357
> 
> 标签：c#, wcf, iis-7, callback, castle-windsor

我一直在使用 Castle Windsor 开发 WCF 服务，我可以在设置容器后注册，如下所示：

```
IWindsorContainer container = new WindsorContainer();

container.AddFacility<WcfFacility>().Register(
    Component.For<IActivityLogsRepository>().ImplementedBy<ActivityLogsRepository>(),
    Component.For<IActivityLogsService>().ImplementedBy<ActivityLogsService>()
    .Named("Company.ServiceImplementation.ActivityLogsService"), 
```

但我的问题从使用 CallbackContract 开始，如此处所述 [http://msdn.microsoft.com/en-us/library/ms752254(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms752254(v=vs.100).aspx)

从 Castle 文档中我发现了这个 [http://docs.castleproject.org/Windsor.WCF-Facility-Lifestyles.ashx](http://docs.castleproject.org/Windsor.WCF-Facility-Lifestyles.ashx)

我做了这样的事情

```
Component.For<ISampleService>().ImplementedBy<SampleService>()
    .LifeStyle.PerWcfSession(), 
```

我的服务器配置文件是

```
<bindings>
  <basicHttpBinding>
    <binding name="LargeHttpBinding" closeTimeout="00:10:00" openTimeout="00:10:00"
      sendTimeout="00:10:00" maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
      maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>
  <netTcpBinding>
    <binding name="LargeNetTcpBinding" maxBufferPoolSize="5242880"
      maxBufferSize="5242880" maxReceivedMessageSize="5242880" />
  </netTcpBinding>
</bindings>
<services>
  <service behaviorConfiguration="LargeBehavior" name="MyCompany.ServiceImplementation.SampleService"><endpoint address="net.tcp://localhost:808/MyCompany.WcfServices/SampleService.svc" binding="netTcpBinding" bindingConfiguration="LargeNetTcpBinding"
      name="netTcp" contract="MyCompany.ServiceContract.ISampleService" />
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
      name="Mex" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:808/MyCompany.WcfServices/" />
      </baseAddresses>
    </host> 
```

有人知道是否可以使用回调设置温莎城堡设施，如果可以，如何实现

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:28:50.327

我认为（99% 肯定）目前不支持此功能。

# c# - .net 中的正则表达式以获取特殊标记

> ID：15651856
> 
> 赞同：0
> 
> 时间：2013-03-27T04:21:47.477
> 
> 标签：c#, regex

有一个示例 html 代码，如下所示：

```
<div><span>span1</span></div>
<b>for test</b>
<span>span2</span> 
```

有什么方法可以获取所有不在 div 标签中的 span 标签（在此示例中：span2）

根据这篇文章[C# 正则表达式排除字符串](https://stackoverflow.com/questions/6956010/c-sharp-regular-expression-excluding-a-string)，这是我的模式，但它不起作用。图案：`((?:(?!\b<div>\b))*)((.|\n)*?)<span>((.|\n)*?)</span>((.|\n)*?)((?:(?!\b</div>\b))*)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:33:56.300

您真的不想使用正则表达式来尝试解析 HTML。您可以阅读有关此 Stack Overflow 问题的许多原因的更多信息： [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

您应该使用 HTML 解析器，例如[Html Agility Pack](http://htmlagilitypack.codeplex.com/)，甚至是简单的 XML 解析器，例如[XMLReader](http://msdn.microsoft.com/en-us/library/9d83k261(v=vs.71).aspx)

# c++ - 如何有效地等待一组信号量？

> ID：15651857
> 
> 赞同：1
> 
> 时间：2013-03-27T04:22:03.367
> 
> 标签：c++, shared-memory, semaphore, busy-waiting

我正在使用带有共享内存的信号量在多生产者和多客户端之间进行通信。我的系统中有两种主要的信号量，分别是“存储的信号量”和“处理的信号量”。

系统运行如下：生产者不断地将数据放入共享内存，然后增加存储的信号量的值，而消费者则在循环中，等待存储的信号量。消费者在收到生产者的数据后，会对这些数据进行处理，然后增加处理后的信号量的值。生产者将通过等待“已处理的信号量”来获得结果

生产者代码：

```
for(int i =0;i<nloop;i++){
    usleep(100);
    strcpy(shared_mem[i], "data for processing");
    sem_post(&shared_mem[i].stored_semaphored);
    if(sem_timedwait(&msg_ptr->processed_semaphore,&ts)==-1){ //waiting for result 
        if(errno == ETIMEDOUT){
        }
        break;
    }else{
       //success
    }

} 
```

消费者代码：

```
for (int j = 0; j < MAX_MESSAGE; j++) {
if (sem_trywait(&(shm_ptr->messages[j].stored_semaphore)) == -1) { 
    if (errno == EAGAIN) {
    } else {
            //success ==> process data
            //post result back on the shared memory, and increase                         
            //the processed semahore
        strcpy(shared_mem[j].output, "Processed data");
        sem_post(&(shared_mem[j].processed_semaphore)); 
    }
}
}//for loop over MAX_MESSAGE 
```

我的问题是消费者代码中的 for 循环几乎浪费了 100% 的 CPU，因为在没有来自生产者的数据的情况下，这个 for 循环会连续运行。

我的问题是，还有其他方法可以等待一组信号量（可能类似于 SELECT、POLL 或 EPOLL 的等待机制），这不会浪费 CPU 时间。

希望看到你的回答。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:03:00.117

据我所知，没有办法等待一组信号量。这意味着所有访问都需要通过单个信号量进行汇集。您正在循环一组信号量，因此它们可以共同成为一个对象。该消费者需要知道任何信号量何时已发出信号，因此在新信号量上使用附加`sem_post`信号量来表示信号量集已更改。

你的生产者代码变成了这样：

```
....
sem_post(&shared_mem[i].stored_semaphored);
sem_post(&list_changed_semaphore); /* Wake the consumer. */
.... 
```

和消费者：

```
/* Block until a consumer has indicated that it has changed the semaphore list */
if (!sem_wait(&list_changed_semaphore)) {
    /* At least one producer has signalled a change. */
    for (int j = 0; j < MAX_MESSAGE; j++) {
        if (sem_trywait(&(shm_ptr->messages[j].stored_semaphore)) == -1) { 
        }
    }
} 
```

代替使用信号量，`list_changed_semaphore`您可以使用`pthread_cond_t`条件变量来表示信号量集中的某些内容发生了变化。不需要像这里`list_changed_semaphore`显示的示例那样是计数器，它只需要一个位即可指示生产者已修改列表。

# ms-access - 如何以格式化的 ID 值作为报告名称将 MS Access 报告导出为 PDF？

> ID：15651861
> 
> 赞同：0
> 
> 时间：2013-03-27T04:22:37.573
> 
> 标签：ms-access, vba, ms-access-2007

我正在使用 Access 2007。

我创建了一个按钮，允许我将当前发票输出为 .pdf，并且我希望它以“发票编号加客户名称”命名，我很接近但还没有完全到那里。这是我目前拥有的代码，它工作正常：

```
Private Sub Create_Document_Click()

    DoCmd.OutputTo acOutputReport, "Invoices", acFormatPDF, [Invoice_ID] & "_" & [Client_ID] & ".pdf"

End Sub 
```

这给了我一个名为“1_1.pdf”的报告，我希望它被称为“1007735001_XYZCompany.pdf”。

在我的 Invoices 表中，我已将 Invoice_ID 字段格式化为自动编号字段“1007735”00，但输出报告将其命名为 1 而不是格式化的数字，我首先想知道是否可以更改它以显示格式化的价值。可能吗？

然后我想知道如何将客户端名称值从 1 更改为客户端名称。我的字段名称是 Client_ID 和 Client_Name，表称为 Clients。

我现在已经搜索了几个论坛并尝试了许多解决方案，但都给了我错误，任何帮助将不胜感激。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:29:10.463

你似乎犯了许多罪。您不应该向表格添加格式，正如您所发现的，格式只是一种格式，它不会更改字段的内容（[http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/MSAccess/ AccessVBAJetSQL/为什么你不应该添加](http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/MSAccess/AccessVBAJetSQL/why-you-should-not-add)）。此外，您似乎添加了对 ClientID 的查找，这是另一个反功能 ( [http://access.mvps.org/access/lookupfields.htm](http://access.mvps.org/access/lookupfields.htm) )。

您将需要再次查找客户端并重新格式化该号码。

```
 Client = DlookUp("ClientName","ClientTable","ClientID=" & [Client_ID])
 Invoice = Format([Invoice_ID], """1007735""000")
 FileName= Invoice & "_" & Client & ".pdf" 
```

# java - 数组越界将一个字节数组添加到另一个

> ID：15651862
> 
> 赞同：2
> 
> 时间：2013-03-27T04:22:44.200
> 
> 标签：java, arrays, encryption

处理一些加密货币并遇到数组越界异常。我在纸上追踪了几次，对我来说一切似乎都很好，所以我无法真正确定错误的根源。如果有人可以提供帮助，那就太棒了！

```
 static byte[] encrypt(byte[] ptBytes, javax.crypto.SecretKey key, byte[] IV){

    byte [] ct; 
    byte [] pt;
    byte [] ptBlock, ctBlock;
    int bytes;              //the number of bytes left over in the last block // this comes into play w/ the last 2 blocks witht the swap and stuff

    //get the extra bytes in case last block of plain text isn't whole
    bytes = ptBytes.length%16;

    //pad the plain text array to proper length
    pt = Arrays.copyOf(ptBytes, (((ptBytes.length )/16) + 1) * 16 );
    System.out.println(Arrays.toString(pt));

    //ctBlock = one block of cipher text
    ctBlock = new byte [16];

    //make ct the length of the padded pt 
    ct = new byte [pt.length];

    //do the encryption
    //i is for the current block of plain / cipher text we are on
    for( int i = 1; i <= ((ptBytes.length )/16)+1; i++){
        if( i == 1 ){

            //make ptBlock the first block of the entire plain text
            ptBlock = Arrays.copyOfRange(pt, 0, (i*16));

            //since i = 1 do the XOR to get new plain text with IV
            for (int j = 0; j < ptBlock.length - 1; j++){
                ptBlock[j] = (byte)(ptBlock[j] ^ IV[j]);
            }

            //now time to do the encryption between the current block of plain text and the key
            try {
                ctBlock = AES.encrypt(ptBlock, key);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //now put the cipher text block we just got into the final cipher text array
            for( int k = 0; k < ctBlock.length; k++){
                ct[k] = ctBlock[k];
            }

        }
        else{
            //make ptBlock the current number block of entire plain text
            ptBlock = Arrays.copyOfRange(pt, (i-1)*16, (i*16));

            //now XOR the plain text block with the prior cipher text block
            for(int j = 0; j < ptBlock.length - 1; j++){
                ptBlock[i] = (byte) (ptBlock[j] ^ ctBlock[j]);
            }

            //now time to do the encryption between the current block of plain text and the key
            try {
                ctBlock = AES.encrypt(ptBlock, key);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //now put the cipher text block we just got into the final cipher text array
            for( int k = (i-1)*16; k < (i*16)-1; k++){
                ct[k] = ctBlock[k-16];
            }
        }
    }

    return ct;
} 
```

它说错误在这一行

```
ct[k] = ctBlock[k-16]; 
```

这没有多大意义。数组 ct 的长度为 48，而 ctBlock 的长度为 16，如果此错误出现在 for 循环中，i 等于 2 或 3，因此我将一个大小为 16 字节的数组添加到第二个三分之一数组 ct 或第三个第三个。就像我说的那样，我在纸上追踪了它，它看起来很合法，所以 idk！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:33:04.317

考虑当 时的情况`i = 3`。

```
for( int k = (i-1)*16; k < (i*16)-1; k++){
    ct[k] = ctBlock[k-16];
} 
```

这里 -

*   k 从 32 开始
*   条件变为 32 < 47
*   数组索引`ctBlock`变为 32 - 16 = 16，并且 bam! 数组索引超出范围！

快速解决 -

```
for( int k = (i - 1) * 16; k < (i * 16) - 1; k++){
    ct[k] = ctBlock[k - (16 * (i - 1))];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:32:16.697

如果`i == 3`像你说的那样，那么`k == 32`开始并增加到`47`。您说这`ctBlock`是一个大小为 16 的数组，在这种情况下，尝试`16`通过索引访问元素`31`会引发错误。

# php - 从 1 个表格插入 2 个表格

> ID：15651864
> 
> 赞同：0
> 
> 时间：2013-03-27T04:22:48.657
> 
> 标签：php, mysql, sql-server, mysqli

**如何从 1 个表格插入 2 个表格？**

我想提交表格：画廊和猫。

这是我刚刚提交到画廊的代码。如何同时向 cat 表添加信息？

```
$sql = 'INSERT INTO gallery (image_url, image_name, image_description)
VALUES (?, ?, ?)';

$stmt = $conn->stmt_init();
if ($stmt->prepare($sql)) {

$stmt->bind_param('sss', $_FILES['upload']['name'], $_POST['image_name'],     
$_POST['image_description']);
$OK = $stmt->execute();

} 
```

我该怎么办：

```
$sql_2 = 'INSERT INTO cat (cat_name) VALUES (?)'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:07:24.130

在上面的代码之后，只需初始化一个新语句，绑定它并执行。您可以使用现有的连接 ( `$conn`)。和变量已经通过插入第一个表完成了它们的工作，所以只需将它们重置为第二个插入`$sql`。`$stmt`

```
... your code as posted above, followed by:

$sql = 'INSERT INTO cat (cat_name) VALUES (?)';
$stmt = $conn->stmt_init();
if ($stmt->prepare($sql)) {
  $stmt->bind_param('s', put your cat_name value here);
  $OK = $stmt->execute();
} 
```

要记住的重要一点是，第二次插入就像第一次一样：您必须对其进行初始化、绑定和执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:36:38.227

[您应该使用这里演示的](https://stackoverflow.com/questions/5178697/mysql-insert-into-multiple-tables-database-normalization "检查这篇文章")事务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T04:51:27.363

不，您不能在一个 MySQL 命令中插入多个表。但是，您可以使用事务。

BEGIN INSERT INTO users (username, password) VALUES('test', 'test') INSERT INTO profiles (userid, bio, homepage) VALUES(LAST_INSERT_ID(),'Hello world!', ' [http://www.stackoverflow. com](http://www.stackoverflow.com) '); 犯罪;

查看 LAST_INSERT_ID 以重用自动增量值。编辑：您说“经过这么长时间试图弄清楚，它仍然不起作用。我不能简单地将刚刚生成的 ID 放入 $var 并将 $var 放入所有 MySQL 命令中吗？”

让我详细说明一下：这里有 3 种可能的方法：

1/ 是你在上面看到的代码。这一切都在 MySQL 中完成，第二个语句中的 LAST_INSERT_ID 将自动成为第一个语句中插入的 autoincrement-column 的值。

不幸的是，当第二条语句本身在具有自增列的表中插入行时，LAST_INSERT_ID 将更新为表 2 的值，而不是表 1。如果您之后仍然需要表 1 的值，我们将不得不存储它在一个变量中。这将我们引向方法 2 和 3：

2/ 将 LAST_INSERT_ID 存储在 MySQL 变量中：

A/ INSERT B/ SELECT LAST_INSERT_ID 进入@mysql_variable_here C/ INSERT INTO table2 (@mysql_variable_here D/ INSERT INTO table3 (@mysql_variable_here ...

3/ 将 LAST_INSERT_ID 存储在 php 变量中（或任何可以连接到数据库的语言，您可以选择）：

A/ INSERT B/ 使用您的语言来检索 LAST_INSERT_ID，或者通过在 MySQL 中执行该文字语句，或者使用例如 php 的 mysql_insert_id() 为您执行此操作 C/ INSERT ()

# javascript - 使用 JQuery 的 Gridview 加载动画是静止帧，即不动画

> ID：15651868
> 
> 赞同：0
> 
> 时间：2013-03-27T04:23:09.637
> 
> 标签：javascript, jquery, button, gridview, loading

您好，感谢您的关注。

在我早期的项目中，当我忙于创建数据以绑定我的 Gridview 时，我使用 UpdatePanel 来显示加载程序 gif。我想将这部分代码移至 JQuery，因此在查看此解决方案（[页面加载动画](https://stackoverflow.com/questions/3101275/page-loading-animation)）后，我将 UpdatePanel 替换为链接到 gif 的 img 标签

在我的 index.html 页面中，我有

```
 <script>

        $(document).ready(function () {
            $('#loadingImage').hide();
        });

        function ShowLoaderImage() {
            $('#loadingImage').show();
        }
    </script> 
```

我从我用来填充 Gridview 源的 asp:Button 中调用了 ShowLoaderImage。

```
<asp:Button ID="View_Data_Button" CssClass="dataButton" OnClick="View_Data_Button_Click" OnClientClick="ShowLoaderImage()" runat="server" Text="View Data" /> 
```

我希望当我单击按钮加载 GridView 时图像开始旋转，并在完成加载 GridView 后消失，因为 document.ready 也随之引发。相反，我看到了 gif 的冻结帧——没有动画。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:47:38.420

我建议替换元素中的html

```
 $('#data_loding_div').html('<img  alt="loadingImage" src="/images/loadingImage.gif" />') 
```

拿到数据后，

```
 $('#data_loding_div').html(data); 
```

# javascript - 网格无法加载数据和页面导航不起作用

> ID：15651871
> 
> 赞同：1
> 
> 时间：2013-03-27T04:23:18.500
> 
> 标签：javascript, jquery, ajax, servlets, jqgrid

网格无法从 servlet 加载数据，页面导航不起作用，但是当“loadonce：false”网格加载但页面导航不起作用时 -

```
 jQuery("#list").jqGrid({
                url:'JQGridServlet?action=fetchData',
               datatype: "xml",
                height: 550 ,    
                width:840,                                                      //    'B2C'           'AD''AC'                   
                colNames:['srNo','DNO','C_Id','Customer_Name','FR','PA','mty','Act','Location','Detail_Address'],
                colModel:[
                           // {name:'act1',index:'act1', width:20,sortable:false},
                          {name:'srNo',index:'srNo', width:35,sortable:true,editable:false,hidden:true},
                          // {name:'delboy',index:'delboy', width:35,sortable:true,editable:false},
                          {name:'DNO',index:'DNO', width:33,sortable:true,editable:false,editoptions: { readonly: 'readonly' },focus:false},

                          {name:'FR',index:'FR', width:25,sortable:false,editable:true,editrules:{number:true}},
                          {name:'PA',index:'PA', width:25,sortable:false,editable:true,editrules:{edithidden:true,number:true}},
                          {name:'mty',index:'mty', width:25,sortable:false,editable:true,editrules:{edithidden:true,number:true}},
                          {name:'act',index:'act', width:13,sortable:false},
                          {name:'Location',index:'Location', width:50,sortable:false},
                       {name:'Detail_Address',index:'Detail_Address',width:150,sortable:false
                            }
                        ],
                  paging: true,
                  rowNum:50,
                  rowList:[50,100,150],
                  pager: $("#page"),
                  sortname: 'DNO',
                  sortorder: 'asc',
                  sortable: true, 
                  footerrow: true,
                  userDataOnFooter: true,
                  //loadonce:true,
                  viewrecords:true,
                  gridview: true,
                  altRows : true,
                 onSelectRow : function(id)
                {
                    if (id && id !== lastsel) 
                    {
                       // alert(parseInt(id)+1);
                        DNO = $('#list').getCell(id,'DNO');
                        jQuery("#list").jqGrid('setGridParam',{editurl: 'JQGridServlet?action=Edit&DNO='+DNO});
                        jQuery('#list').saveRow(lastsel, true, 'clientArray');
                        jQuery('#list').editRow(id, true, null, null);
                        jQuery("#list").jqGrid('restoreRow',lastsel);
                        lastsel = id;
                      } 
                },
//MY servelet code:

if (request.getParameter("action").equals("fetchData")) 
                    {
                         System.out.println("in fetchData");
                    } 
```

但在“loadonce:true”时不要参与该动作。请任何机构建议如何解决这个问题。

# php - php计数和搜索

> ID：15651877
> 
> 赞同：0
> 
> 时间：2013-03-27T04:23:36.847
> 
> 标签：php, arrays, search, count

代码

```
$array = array($cat2);
print_r(array_count_values($array));

//out
Array ( [YES] => 1 ) Array ( [YES] => 1 ) Array ( [YES] => 1 ) Array ( [YES] => 1 ) Array ( [NO] => 1 ) Array ( [NO] => 1 ) Array ( [YES] => 1 ) Array ( [NO] => 1 ) Array ( [NO] => 1 ) Array ( [YES] => 1 ) 
```

有多少算是和否这是我的代码

```
$YES = array_search('YES', $array);

$NO = array_search('NO', $array); 
```

结果是

```
Array ( [YES] => 1 ) 0 Array ( [YES] => 1 ) 0 Array ( [YES] => 1 ) 0 Array ( [YES] => 1 ) 0 Array ( [NO] => 1 ) Array ( [NO] => 1 ) Array ( [YES] => 1 ) 0 Array ( [NO] => 1 ) Array ( [NO] => 1 ) Array ( [YES] => 1 ) 0 
```

结果没有

```
Array ( [YES] => 1 )Array ( [YES] => 1 )Array ( [YES] => 1 )Array ( [YES] => 1 )Array ( [NO] => 1 )Array ( [NO] => 1 )Array ( [YES] => 1 )Array ( [NO] => 1 )Array ( [NO] => 1 )Array ( [YES] => 1 ) 
```

我有结果了

```
YES = 6
NO = 4 
```

这个没有mysql的php，请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:33:46.767

因为`$array`是一个包含另一个数组的数组（我假设你想要分组），那么试试这个：

```
print_r(array_count_values($array[0])); 
```

# azure - 如何使用 Microsoft 用户 ID 获取用户名？

> ID：15651878
> 
> 赞同：1
> 
> 时间：2013-03-27T04:23:47.567
> 
> 标签：azure, windows-store-apps, winjs, azure-mobile-services

我正在开发一个 Windows 商店 javascript 应用程序。我已经使用了来自 azure 的 microsoft 登录身份验证，如下所示。

```
client.login("microsoftaccount").done(function (results) {;
userId = results.userId;
refreshTodoItems();
var message = "You are now logged in as: " + userId;

var dialog = new Windows.UI.Popups.MessageDialog(message);
dialog.showAsync().done(complete);
} 
```

我能够检索用户 ID，例如“Microsoftaccount：c2892313bla ....”

我应该如何检索该 Microsoft 帐户 ID 的关联用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:12:12.257

登录后，在服务器端的任何脚本上，您都可以查询用户的*身份*（通过`user.getIdentities()`函数），这将为您提供一个带有访问令牌的对象，您可以使用该对象与身份验证提供者对话。[http://blogs.msdn.com/b/carlosfigueira/archive/2012/10/25/getting-user-information-on-azure-mobile-services.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/10/25/getting-user-information-on-azure-mobile-services.aspx)上的帖子有一个关于如何获取用户名的示例对于 MS 帐户（以及其他提供商）。

# javascript - 移除圆形物体

> ID：15651882
> 
> 赞同：3
> 
> 时间：2013-03-27T04:24:16.743
> 
> 标签：javascript, circular-reference

我有一个函数，我调用它来剪切超出一点的任何内容，但是有没有其他方法可以找到对自身的引用并以某种方式巧妙地删除该引用？

这是我现在使用的：

```
//Changing the max level will speed things up, but it will mean that some things might not be persisted
function cleanse(Obj, level) {
    var r, i, prims = ["string", "number", "boolean"], maxLevel = 8;
    level = level || 0;
    if (prims.indexOf(typeof Obj) !== -1) {
        r = Obj;
    } else if (Obj instanceof Function) {
        console.log("Please dont reference objects");
        return undefined;
    } else {
        if (Obj instanceof Array) {
            r = [];
        } else {
            r = {};
        }
        for (i in Obj) {
            if (Obj.hasOwnProperty(i)) {
                if (level <= maxLevel) {
                    r[i] = BackStack.cleanse(Obj[i], level + 1);
                }
            }
        }
    }
    return r;
}; 
```

# android - Eclipse SDK 崩溃

> ID：15651883
> 
> 赞同：0
> 
> 时间：2013-03-27T04:24:31.917
> 
> 标签：android, eclipse, sdk

每次我访问我的任何**Android 项目的属性**并转到`Android`选项时，SDK 似乎都会崩溃。奇怪的是，它只会在我尝试使用该选项时崩溃，它在其他选择上效果很好......比如`Android Lint Properties`, `Builders`, `Java Build Path`... 等等。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:31:33.377

Eclipse 错误日志说什么？

可以通过以下两种方式之一访问日志：

帮助 > 关于 Eclipse > 配置详细信息 > 查看错误日志

该文件的位置是`workspaceLoaction/.metadata/.log`

# c# - C#为一列更新多个文本框？

> ID：15651887
> 
> 赞同：0
> 
> 时间：2013-03-27T04:24:54.443
> 
> 标签：c#, sql-update, oledb

我的 Windowform 上有 5 个文本框和一个按钮，它显示来自我的访问数据库文件的数据。

然后我使用更新语句将所有数据键更新到 textbox1、textbox2、textbox3 等。

我的更新声明：

```
cmd = new oledbcommand("UPDATE Table2 SET BALANCE = ? " + " WHERE ID = ? ", con);
cmd.parameters.addwithvalue("BALANCE", textbox5.text);
cmd.parameters.addwithvalue("BALANCE", textbox6.text);
cmd.parameters.addwithvalue("BALANCE", textbox7.text);
cmd.parameters.addwithvalue("BALANCE", textbox8.text);
cmd.parameters.addwithvalue("BALANCE", textbox9.text); 
```

cmd.parameters.addwithvalue("ID", textbox10.text)

但它失败了，没有错误。

所以我尝试了另一种方法

```
cmd.parameters.addwithvalue("BALANCE", textbox5.text + textbox6.text + textbox7.text + textbox8.text + textbox9.text ); 
```

我输入的所有值都进入 textbox5。有什么方法可以解决这个问题吗？

对不起，我是新人。希望你能理解我的问题。

**编辑**

```
I tried to cmd = new oledbcommand("UPDATE Table2 SET BALANCE = ? ", con);
    cmd.parameters.addwithvalue("BALANCE", textbox5.text);
    cmd.parameters.addwithvalue("BALANCE", textbox6.text);
    cmd.parameters.addwithvalue("BALANCE", textbox7.text);
    cmd.parameters.addwithvalue("BALANCE", textbox8.text);
    cmd.parameters.addwithvalue("BALANCE", textbox9.text); 
```

我把不同的数字放到不同的文本框中，然后我预览数据，所有的数据值都是一样的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:36:24.153

```
cmd.parameters.addwithvalue("BALANCE", textbox5.text +","+ textbox6.text  +","+ textbox7.text  +","+ textbox8.text  +","+ textbox9.text ); 
```

当你想使用它们时`,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:51:33.690

尝试这个

```
var totalBalance = Convert.ToDouble(Textbox1.Text) +  Convert.ToDouble(Textbox2.Text) + Convert.ToDouble(Textbox3.Text) + Convert.ToDouble(Textbox4.Text) +  Convert.ToDouble(Textbox5.Text) ;

cmd.parameters.addwithvalue("BALANCE", totalBalance); 
```

# mysql - MySQL 在多列上的 SELECT WITH "OR" 上运行缓慢

> ID：15651888
> 
> 赞同：3
> 
> 时间：2013-03-27T04:25:06.873
> 
> 标签：mysql, optimization

我有一个大约有 300 万行的表。当我使用这个查询来选择时：

```
SELECT order_code, store_debit, total_price
FROM orders
WHERE 4624603 IN (id, pid) AND `status` = -6; 
```

或此查询（使用**OR**）

```
SELECT order_code, store_debit, total_price
FROM orders
WHERE (id = 4624603 OR pid = 4624603) AND `status` = -6; 
```

那一个花了**>17secs**。但是当我将它分成 2 个查询时：

```
SELECT order_code, store_debit, total_price
FROM orders
WHERE id = 4624603 AND `status` = -6; 
```

和

```
SELECT order_code, store_debit, total_price
FROM orders
WHERE pid = 4624603 AND `status` = -6; 
```

**它立即**返回结果。我如何优化第一个查询以使其运行速度与其他 2 个一样快。

谢谢你们！

更新：这些是表的索引

```
cop_type    payment_type, cod_type, cash_transfer, pid, status, created Normal  BTREE
all_type    payment_type, cash_transfer, pid, status, created   Normal  BTREE
theodoi user_id, pid, payment_type, cash_transfer, status, report_atm, pay_status, created  Normal  BTREE
item_lib    item_id, status, pay_status, payment_type, created  Normal  BTREE
search_phone    phone   Normal  BTREE
search_order_code   order_code  Normal  BTREE
search_order_email  email   Normal  BTREE
order_work  cod_id, status, district, payment_type, pay_status, cash_transfer, cod_type, free_ship  Normal  BTREE
select_hot  province, status, type, created, payment_type, pay_status, item_id  Normal  BTREE
coupon_after_buy    id, pid, status, free_ship  Normal  BTREE
search_ofice    office, created, status, ship_status    Normal  BTREE
search_item item_id, office, created, status, ship_status   Normal  BTREE
idx_ward_id ward_id Normal  BTREE
idx_street  street_id   Normal  BTREE
idx_group_code  group_code, pid Normal  BTREE
idx_paytime payment_time    Normal  BTREE
search_all  pid, status, created    Normal  BTREE
idx_country_type    country_type    Normal  BTREE
idx_book_time   book_time   Normal  BTREE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:34:12.780

使用最后两个的 UNION 怎么样？in/or 可能会强制进行表扫描。

# python - GAE - 包括外部 python 模块而不将它们添加到存储库？

> ID：15651891
> 
> 赞同：2
> 
> 时间：2013-03-27T04:25:16.167
> 
> 标签：python, google-app-engine, module, repository, flask

我目前正在开发一个基于 python 的 Google App Engine 项目。具体来说，我将 Flask 用于应用程序。我想知道包含外部 python 模块的公认方法是什么，特别是在存储库中。据我所知，在我的存储库中包含其他人的代码是不好的形式，原因有几个。但是，其他人将在同一个存储库上工作，因此我们应该使用相同的外部模块来确保相同的结果。

具体来说，我需要在我的应用程序中包含 Flask（及其依赖项）。使用 Google App Engine 执行此操作的最简单方法是将它们放入根级别：

```
MyProject
    app.yaml
    main.py
    MyApp
    Flask
    ... 
```

在这样的项目中引入这些外部模块的正确方法是什么？一个笼统的答案和一个针对我的案例的具体答案都会很有用。此外，任何其他相关建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:21:55.407

虽然确实可以将第三方库作为子模块或来自外部存储库的符号链接包含在内，但实际上这不是一个好主意。以下是可能出错的两种情况：

1.  如果第三方库发布了破坏功能的新版本，您将不得不进行所有必要的更改以满足新要求，或者只是找到以前的版本以继续工作并中断外部连接。通常，当您非常接近最后期限时，就会发生这种情况。

2.  如果第三方库发布了新版本，并且您的一位同事升级并进行了所有必要的更改以支持新版本，那么您这边的代码将被破坏，直到您也将升级。

上述示例在具有大量依赖项的大型项目中更为明显，并且随着越来越多的人长期加入该项目，这将成为一个大问题！我可以想出更多的例子，但我想你能明白这一点。

您最好的选择是将外部库包含到您的存储库中，这还有一个优势，即您可以让整个项目在没有很多依赖项的新机器上启动并运行。[关于如何组织第三方库](https://stackoverflow.com/a/14851686/8418)有很多方法，所有这些方法都需要包含在您的`app.yaml`文件中相同或更深的级别。正如@dragonx 提到的，只包含核心库代码。

也不要害怕将东西放入您的存储库，因为现在空间不是问题，这些库通常不会经常更新，因此您的存储库大小不会随着时间的推移变得太大。

由于您在 Google App Engine 上提到了 Flask，您可以查看我的[gae-init](http://gae-init.appspot.com)项目，您可以在其中实际了解[外部库](https://bitbucket.org/lipis/gae-init/src/tip/main/lib)的组织方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T06:25:16.110

你实际上在这里问了两个问题。

1.  如何在我的 GAE 项目中包含外部库？

你有正确的想法。无论您采用哪种方式，都必须以某种方式将 Flask 及其依赖项包含在 GAE 项目的根目录中。一种方法是直接将副本放在那里。

第二种方法是使用符号链接指向包含外部库的文件夹。我不确定 Flask，但通常外部存储库在子目录中包含实际的库代码 - 所以通常你不希望 GAE 应用程序中的存储库的根目录，而只是实际源代码的根目录。在这种情况下，更容易放置链接到源文件夹的符号链接。

1.  如何在我的源代码库中管理外部库？

这是一个更难回答的问题，因为它取决于您使用的源代码控制工具。是的，您确实希望每个人都使用相同版本的外部库，并且它们应该以某种方式包含在您的源代码管理中。

如果您使用的是 git，`git submodule`那是要走的路。开始有点混乱，但它会完成工作。

我推荐一个看起来像这样的回购结构

```
repo/
    thirdparty/
        flask/
        other_dependency/
        another_dependency/
            README.TXT
            setup.py
            src/
    app/
        app.yaml
        your_source.py
        softlink_to_flask
        softlink_to_other_dependency
        softlink_to_another_dependency_src 
```

在此示例中，您将外部库的源代码保存在第三方文件夹中。这些可能是 git 子模块。在 app 文件夹中，您有您的源代码，以及指向您的应用程序运行实际需要的适当文件的软链接。在这种情况下， another_dependency 的实际代码可能位于 another_dependency/src 文件夹中，而不是另一个依赖项的实际根目录。这样您就不需要在部署文件夹中包含不必要的文件，但您仍然可以将整个库保存在您的存储库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T05:56:33.463

您不能只创建`requirements.txt`并将其放入 GAE。您的代码必须包含所有使用您的项目且不受 GAE 支持的纯 Python 库 ( [https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27) )。

如果您查看 GAE 的烧瓶部署示例（[http://flask.pocoo.org/docs/quickstart/#deploying-to-a-web-server](http://flask.pocoo.org/docs/quickstart/#deploying-to-a-web-server)和[https://github.com/kamalgill/flask-appengine-template](https://github.com/kamalgill/flask-appengine-template) ) 您可以找到一些依赖项，例如`flask`，`werkzeug`等等，所有这些依赖项都必须推送到 GAE 服务器。

所以我看到了三个解决方案：

1.  使用本地要求进行本地开发并制作自定义构建功能，该功能将下载所有依赖项，与您的应用程序一起放置并上传到 GAE 服务器。

2.  当您刚启动将所需库与您的应用程序一起放置的项目时，添加用于本地部署的工具（不要忘记`.gitignore`）。

3.  使用类似`git submodules`需求存储库的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-30T15:52:57.887

在google app engine项目中使用python第三方包有两种情况：

如果您的库是GAE部分[受支持的运行时提供的第三方库之一](https://cloud.google.com/appengine/docs/python/tools/built-in-libraries-27)

只需将其添加到库下的 app.yml 文件中

```
 libraries:
        - name: package_name
          version: latest 
```

添加您的代码

```
import pack_name 
```

有时你需要安装包

```
pip install package_name 
```

确保您使用正确的解释器，通过使用

```
pip freeze 
```

您可以确保软件包已成功安装到正确的路径。

否则，如果 GAE**不支持你的 library**，你需要手动下载并保存在本地 root/Lib 目录下：或通过 GIT 或通过 pip (pip install package_name -t path/to/your/Lib/dir)

之后，我们应该在pycharm **pycharm->preferences->Project Structure中将**Lib目录声明为source dir 选择Lib目录并将其标记为source。
然后，导入它。

```
import pack_name 
```

请注意，当您进行导入时，您选择的是本地路径而不是您的 python 路径。

一般来说，建议有 requirements.txt 文件，其中包含所有使用的包名称，然后 pycharm 将识别已卸载的包并建议您安装它们。

祝你好运

# java - 为什么没有 StrongReference 对象？

> ID：15651896
> 
> 赞同：19
> 
> 时间：2013-03-27T04:26:05.990
> 
> 标签：java, memory-management, reference

我正在实现一些行为，这些行为有时可以从使用弱引用中受益。我希望班级的用户能够在施工时指出是否是这种情况。由于乍一看`WeakReference`扩展，我似乎可以做类似的事情（这是一个模型，而不是我真正想要做的事情）：`Reference`

```
public class Container<T> {
    private boolean useWeakRef;
    private Reference<T> ref;

    public Container(boolean isWeak) {
        useWeakRef = isWeak;
    }

    public void store(T val) {
        if(useWeakRef) {
            ref = new WeakReference<>(val);
        } else {
            ref = new StrongReference<>(val);
        }
    }

    // May return null
    public T get() {
        return ref.get();
    }
} 
```

但是没有`StrongReference`类，并且根据[参考 javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/Reference.html)：

> 因为引用对象是与垃圾收集器密切合作实现的，所以这个类不能直接子类化。

所以我不能创建我自己的引用子类来持有对对象的强（即正常）引用。这似乎意味着不可能创建一个隐藏它是否使用来自调用者的弱（或软）引用的类。

我真的不明白为什么这个类不存在，一个`StrongReference`对象应该总是简单地从 get() 返回对象，除非 clear() 已被调用。为什么这个不见了？在某种程度上是`StrongReference`不一致的吗？`Reference`这将使构建通用引用持有者对象变得更加简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:15:36.393

当我需要这样做时，我只是创建了一个自定义的 Reference 接口和一个 WeakReference 的简单子类。这很烦人，但它和你能做的一样好。

```
public interface MyReference<T> {
  public T get();
}

public class MyWeakReference<T> extends WeakReference<T> implements MyReference<T> {
}

public class MyStrongReference<T> implements MyReference<T> {
  // obvious implementation here ...
} 
```

更新：

澄清一下，我不知道*为什么*它首先没有包含在 jdk 中（我也希望它已经包含），但是，我觉得这是一个合理的解决方法。

对于那些寻求证明这个想法的人，我发现在实现自定义缓存时有必要，其中引用的强度是缓存配置的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T05:49:50.397

您不能继承 Reference 因为它没有任何公共/受保护的构造函数。但是有一个解决方法：

```
class StrongReference<T> extends WeakReference<T> {
    private final T referent;

    StrongReference(T referent) {
        super(null);
        this.referent = referent;
    }

    @Override
    public T get() {
        return referent;
    }

    // implement other methods
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-24T20:41:16.447

Guava's`LocalCache`使用一个[`StrongValueReference`](https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676)类来复制我想要一个`StrongReference`类做的事情。虽然 Guava 没有将其公开为公共类太糟糕了，但我认为这是确认这是 JDK 中缺少的功能，并且可以在必要时复制它。

也就是说，大多数需要抽象他们正在使用的引用类型的用例可能能够像我一样直接使用[Guava 的`Cache`](https://code.google.com/p/guava-libraries/wiki/CachesExplained)行为。我鼓励任何遇到这个问题的人在自己重新发明这种抽象引用行为之前探索 Guava 现有的缓存机制。

# r - 在 R 中运行嵌套的 logit 回归

> ID：15651901
> 
> 赞同：3
> 
> 时间：2013-03-27T04:26:37.807
> 
> 标签：r, nested, regression, logistics, multinomial

我想在 R 中运行嵌套逻辑回归，但我在网上找到的示例并没有太大帮助。我阅读了这个网站上的一个例子（[关于如何在 R 中运行嵌套逻辑回归的逐步过程](https://stackoverflow.com/questions/5906272/step-by-step-procedure-on-how-to-run-nested-logistic-regression-in-r)），这与我的问题相似，但我发现它最终似乎没有解决（提问者报告了错误，我没有看不到更多答案）。

所以我有 9 个预测变量（连续分数）和 1 个分类因变量（DV）。DV被称为“效果”，它可以分为2大类：“负（0）”和“正（1）”。我知道如何运行一个简单的二元 logit 回归（使用一般分组方式，即负 (0) 和正 (1)），但这还不够。“积极”可以进一步分为两种类型：“身体（1）”和“精神（2）”。所以我想运行一个嵌套模型，它包括这 3 个类别（负（0）、物理（1）和心理（2）），并反映“物理”和“心理”嵌套在“正”中的性质。也许 R 可以将这两个模型（一般与详细）一起比较？于是我新建了两个栏目，一个叫“效果通用”，其中个人得分为“负（0）”和“正（1）”；另一个称为“效果详细”，它包含 3 个值 - 负 (0)、物理 (1) 和心理 (2)。我只使用“效果一般”运行了一个简单的二进制 logit 回归，但我不知道如何为“效果详细”运行嵌套 logit 模型。

从我搜索的示例和其他材料来看，R 包“mlogit”似乎是正确的，但我不知道如何使它适用于我的数据。我不太了解 R-help 中的示例，以及我之前提到的本网站示例中的这一部分 (...shape='long', alt.var='town.list', nests=list(town .list)...) 让我很困惑：我可以看到我的数据形状应该是“宽的”，但我不知道“alt.var”和“nests”是什么......

我还查看了 mlogit 手册的第 19 页，了解嵌套 logit 模型调用的示例。但我仍然无法决定我需要什么选项。（[http://cran.r-project.org/web/packages/mlogit/mlogit.pdf](http://cran.r-project.org/web/packages/mlogit/mlogit.pdf)）

有人可以为我提供有关如何操作的详细步骤和说明吗？我相信这个例子（如果得到很好的讨论和解决）也会对我和其他人有很大帮助！

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T11:30:48.233

我可以帮助您了解 mlogit 结构。使用`mlogit.data()`命令时，指定`choice = yourchoicevariable`（`id.var = respondentid`如果您有面板数据集，即您有来自同一个人的多个响应）以及`shape='wide'`参数。创建的新 data.frame 将采用长格式，每种选择情况都有一条线，消极的、身体的、精神的。因此，您将有 3 行，而您只有一个宽数据格式。无论您的 MN 选择变量是什么，它现在都将是一列逻辑值，其中`TRUE`包含受访者选择的行。行名称现在将采用格式`observation#.level(choice variable)`因此在您的情况下，如果您的数据集的第一行该人的响应为否定，您将看到：

```
row.name   | choice
1.negative | TRUE
1.physical | FALSE
1.mental   | FALSE 
```

也不是每个选择的实际因子水平都存储在名为`alt`mlogit.data.frame 的索引中，您可以通过该索引查看该索引，`index(your.data.frame)`并且观察数（即宽格式 data.frame 中的行号）存储在`chid`. 这本质上就是 row.name 告诉你的，即`chid.alt`. 另请注意，您不必指定`alt.var`数据是否为宽格式，只需指定长格式。`mlogit.data`正如我刚刚描述的那样，该功能为您完成了这项工作。本质上，它需要`unique(choice)`您指定您的选择变量并`alt.var`为您创建，因此如果您的数据是宽格式的，则它是多余的。

然后，您可以通过向`mlogit()`命令中添加一个命名的嵌套列表来指定嵌套，假设您的因子级别只是“0”、“1”、“2”：

`mlogit(..., nests = c(negative = c('0'), positive = c('1','2')`

或者如果因子水平是“负面的”、“身体的”、“精神的”，它将是这样的：

`mlogit(..., nests = c(negative = c('negative'), positive = c('physical','mental')`

`c()`另请注意，仍然必须根据包文档使用参数指定一个嵌套。如果您指定参数，则生成的模型将具有嵌套之间的 iv 估计值，或者如果 您可能发现[Kenneth Train 的示例有用](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCMQFjAA&url=http%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fmlogit%2Fvignettes%2FExercises.pdf&ei=XY9HVJLsGYypyAS3hoC4AQ&usg=AFQjCNFPiJbSspPZ3GfCvJhVNJA6sVkvyA&sig2=4DhkOVvNdEjX7OBJ1INrwQ&bvm=bv.77880786,d.aWw)`un.nest.el=T`，则为嵌套特定估计值`un.nest.el=F`

# c++ - OpenCV C++ 绘图和分析线

> ID：15651903
> 
> 赞同：1
> 
> 时间：2013-03-27T04:26:55.867
> 
> 标签：c++, opencv

我正在开发一个 OpenCV 程序，该程序能够检测拳击手的拳击并对其进行分类。目前我的程序经历了所有不同的图像处理，查找和检测轮廓，在 ROI（感兴趣区域）上绘制边界框，我还在计算每个边界框的一些属性，例如：区域和中心点。

现在我想做的是从每个边界框从中心点开始画一条线，并分析该线的角度和长度。看一下说明我的目标的图像：

![在此处输入图像描述](../Images/6c7cafd73b437d89de4e9dc418c6f310.png)

所以希望现在你们有一个更好的概述......

我的问题是我如何从起始位置到结束位置绘制这样的线将其存储在向量中以分析它...？

我对绘制线条的各种功能进行了一些研究，但它们似乎都不适合我的目的。以下是一些研究链接：

[Opencv画线和线迭代器和折线](http://docs.opencv.org/modules/core/doc/drawing_functions.html#line)

还查看了 arcLength、fitLine、clipLine 和 Hough 变换

有人可以告诉我哪种技术最适合我的目标......？一些很好的阅读，例子，或者只是建议如何开始这整个事情

问候希望我的问题现在已经很好理解了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:42:09.880

**将被跟踪对象的质心**位置逐帧存储在数组中，然后将其提供给 PolyLines() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:02:16.027

我们可以使用折线如下：

```
polylines(img  /*image where to plot*/, &points /*the points (centroids in your case)*/ ,&numPoint /*number of points*/,1,false /*contour is not closed shape*/, Scalar(255,255,255),3, CV_AA, 0); 
```

- 注意点必须定义为Mat

# windows - 将JDK更改为另一个版本问题

> ID：15651908
> 
> 赞同：1
> 
> 时间：2013-03-27T04:27:41.840
> 
> 标签：windows, configuration, java

我已经开始了一个项目，该项目专门说使用 1.6 JDK 来防止表单[测试失败。](https://wiki.openmrs.org/display/docs/Step+by+Step+Installation+for+Developers) 当我尝试将 JDK 从 1.7 更改为 1.6 时，我遇到了一个奇怪的行为。

即使我将环境变量从 1.7 更改为 1.6 JDK 版本，当我运行`java.exe -version`或`java -version`in 时`cmd`，它仍然提供早期版本。但是当我运行`javac -version`它时，它给出了 1.6 版本。

到目前为止我所做的是，

在用户环境变量中，

*   classpath to `C:\Program Files\Java\jdk1.6.0_43`（JDK安装路径）
*   添加 java_home 变量并将路径更改为`C:\Program Files\Java\jdk1.6.0_43`（JDK 安装路径）
*   更改为`C:\Program Files\Java\jdk1.6.0_43\bin`（Java bin）的路径

在系统环境变量中，

*   添加`C:\Program Files\Java\jdk1.6.0_43\bin`到`CLASSPATH`
*   创建 JAVA_HOME 变量并添加`C:\Program Files\Java\jdk1.6.0_43\bin`

有一个与 Java 相关的变量，称为 QLJAVA，路径设置为`C:\Program Files (x86)\Java\jre7\lib\ext\QTJava.zip`，我也删除了该变量。 **在**我编辑之前，`CLASSPATH`这是相同的路径

**我的问题**，

1.  为什么在使用 java -version 时选择 1.7，为什么在运行时会给出不同的结果`javac -version`。或者我已经做的有什么问题吗？
2.  什么是`QLJAVA`变量，它的用途是什么，最终是如何出现在系统变量中的。？

3.  为什么改到1.6没有任何backword兼容性。？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T06:22:00.157

以下是为 java 设置环境变量时的一些指南。

`JAVA_HOME`应该指向java安装路径
PATH应该包括`%JAVA_HOME%/bin`

我通常将不同的 java 版本设置为不同的环境变量，并通过更改来切换它们`JAVA_HOME`

例如。

```
JAVA_6=c:\jdk6
JAVA_7=c:\jdk7
JAVA_HOME=%JAVA_6% (or JAVA_HOME=%JAVA_7%)
PATH=%JAVA_HOME%\bin;%PATH% 
```

此外，路径中的其他一些条目可能指向不同版本的 Java，因此我通常`%JAVA_HOME%\bin`先添加条目。

此外，在更改环境变量时，您应该关闭并打开一个新的 cmd 实例以重新加载环境变量。

最后，路径上有空格可能会产生影响。您可能需要为它们添加引号或使用 DOS 的旧变量约定。例如。`PROGRA~1`而不是程序文件。

要回答您的问题：

1.  您的 PATH 环境变量指向 java 和 javac 的不同路径。只需将`%JAVA_HOME%\bin`PATH 变量设置为第一个条目，它应该会选择您想要的正确版本的 JAVA。

2.  至于QTJAVA，我还没有遇到过，所以无法给出具体的答案。至于它是如何到达那里的，嗯，一些软件/程序会在您安装它们时修改环境变量，以便它们以这种方式到达那里。

3.  它应该向后兼容或尝试向后兼容。我没有看到代码，也没有真正尝试过足够长的 JDK 7，但是根据您提供的链接上的问题（[https://tickets.openmrs.org/browse/TRUNK-3142](https://tickets.openmrs.org/browse/TRUNK-3142)），它看起来像 JDK 7 问题.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T04:55:55.473

加载器`java.exe`通常放在`Windows\System32`目录中，但在 JDK 中也有副本。编译器`javac.exe`始终在 JDK 中。这是你所看到的根源。

副本很有可能`java.exe`出现在路径中早于`Windows\System32\java.exe`.

也有可能安装 v1.6 无法覆盖旧版本`java.exe`，因为您没有足够的写入权限`Windows\System32`，但在这种情况下应该提供错误。

我知道弄清楚发生了什么的最好方法是安装一个`which.exe`命令，你可以在 Cygwin 或 MinGW 中找到它。当您说 时`which java.exe`，您将看到`java.exe`导致问题的 v1.7 的路径。调整路径、删除或重命名文件。

# javascript - 使用 jQuery 打印 iFrame

> ID：15651910
> 
> 赞同：2
> 
> 时间：2013-03-27T04:28:01.243
> 
> 标签：javascript, jquery

我遵循了关于如何使用 jQuery 打印 iframe 的无限示例，但无论我尝试什么，它都不起作用。

我有一个带有“打印”按钮的页面，因此用户可以打印 iframe。因此，我按照示例和过去使用 jQuery 的经验得出了以下结论：

```
$('#printButton').click(function() {        
    window.frames["frameright"].focus();
    window.frames["frameright"].print();
}); 
```

因此，我的 iframe 是

```
<iframe seamless="seamless" id="frameright" name="frameright" src="url..."></iframe> 
```

但是当我单击“打印”按钮时，什么也没有发生。

有好心人把我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:36:23.493

无需为此使用 jQuery。

只需使用：

```
function printiframe() {
        window.frames["frameright"].focus();
        window.frames["frameright"].print();
} 
```

# sitecore - 将条件渲染应用于特定渲染的所有实例

> ID：15651911
> 
> 赞同：1
> 
> 时间：2013-03-27T04:28:04.413
> 
> 标签：sitecore, sitecore6

如何将条件渲染规则应用于特定渲染的所有实例（在 MVC 应用程序中，如果相关）？

根据我找到的文档，应该有一个“个性化”部分，但即使我在“应用程序选项”中启用了它，它也不会出现在渲染的属性中。

我读过MVC 不支持*全局*条件渲染规则，但我认为这意味着规则不能应用于所有渲染，而不仅仅是特定类型的所有渲染。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:00:49.903

我还将查看[JetBrains DotPeek中的以下管道](http://www.jetbrains.com/decompiler/)

```
<insertRenderings>
  <processor type="Sitecore.Pipelines.InsertRenderings.Processors.EvaluateConditions, Sitecore.Kernel"/>
</insertRenderings> 
```

我可能希望重写该`GetGlobalRules`方法来执行您的自定义逻辑，也许从 Sitecore 加载一组自定义条件并将它们添加到，`ruleList`以便它们也得到评估。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:25:23.577

*" **Sitecore MVC 解决方案不支持全局条件渲染规则**，这是一种条件渲染形式，它将同一组规则应用于所有表示组件。您可以为单个表示组件应用条件渲染规则，但您不能定义条件渲染规则与 Web 表单解决方案一样适用于所有演示组件。”* [资料来源：约翰·韦斯特](http://www.sitecore.net/sverige/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/01/Conditional-Rendering-in-MVC-Solutions-That-Use-the-Sitecore-ASPNET-CMS.aspx)

所以你需要使用不同的策略：

如果我理解正确，条件渲染规则是在项目级别配置的。所以这意味着必须在每个项目上设置一个*全局规则。*

您可以通过使用模板继承和自动执行此操作`Standard Values`：

*   创建具有标准值的基本模板。
*   在标准值项的显示详细信息中配置渲染（这是您设置条件渲染规则的地方）。
*   让所有需要这个条件渲染规则的模板都继承自基础模板。
*   标准值的表示细节也将被继承。

此解决方案唯一棘手的问题是您应该在创建项目之前设置所有模板和标准值。*理论上这应该无关紧要*，但是我遇到了一些奇怪的症状，如果在创建项目后更改它们，标准值表示细节的继承将无法正常工作。

# java - 检查字符串是否为回文

> ID：15651916
> 
> 赞同：2
> 
> 时间：2013-03-27T04:28:46.810
> 
> 标签：java, recursion, palindrome

我非常接近完成我的一个处理回文和字符串参数的练习问题，并且我坚持使用调用该方法的主要方法。每次我编译我的代码时，它都会编译，但是当我输入数据时，它会继续运行并且不会给我结果。任何人都可以帮助我完成我需要做的事情来让它返回结果吗？问题只是要求创建一个方法来检查它是否是回文，我测试它的主要方法是给我带来麻烦的方法。

这是我的代码：

```
import java.util.*;
public class TestisPalindrome
{
  public static boolean isPalindrome(String str) {
    int left = 0;
    int right = str.length() -1;

    while(left < right) {
      if(str.charAt(left) != str.charAt(right)) {
        return false;
      }
    }
    left ++;
    right --;

    return true;
  } 

  public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a string to see if it is a palindrome or not: ");
    String st1 = scan.nextLine();
    System.out.println(isPalindrome(st1));
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:30:07.083

左右增量应该在`while`循环中

```
while(left < right)
     {
        if(str.charAt(left) != str.charAt(right))
        {
            return false;
        }
        left ++;
        right --;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:35:53.883

您已经创建了一个无限循环。你有一个while循环，但永远不要改变条件。

```
while(left < right)
{
    if(str.charAt(left) != str.charAt(right))
    {
        return false;
    }
} 
```

假设您开始时 left < right，这将永远不会改变。

您有行要左右递增，但您的代码永远不会到达这些行，因为它永远不会退出 while 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:33:19.440

你多虑了。看`StringBuffer`：

```
StringBuffer input = new StringBuffer(str);
return str.equals(input.reverse()).toString); 
```

请注意，您的实施会对性能产生影响：

```
while(left < right) { //multiply inner operations by n/2
  if(str.charAt(left) != str.charAt(right)) { //three operations
    return false;
  }
  //This need to be inside your while loop
  left ++; //one operation
  right --; //one operation
} 
```

这导致`O(n) = (n * 5) / 2`. 另一方面，如果你只是简单地反转一个字符串，它只是`O(n) = n` *在最坏的情况下*。这*不是*一个重大影响，但可以根据您访问它的方式累加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T05:48:05.473

你也可以这样解决：

```
public static boolean isPalindrome (String str){
    String convertedStr = "";

    for (int i = 0; i <str.length(); i++){
        if (Character.isLetterOrDigit(str.charAt(i)))
            convertedStr += Character.toLowerCase(str.charAt(i));
    }
    if (convertedStr.equals(reverseString(convertedStr)))
        return true;
    else
        return false;    
} //End of isPalindrome 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T19:14:42.650

这是我用来确定字符串是否为回文字符串的代码：

```
private static boolean isPalindromeString(String str){
    if (str == null) 
        return false;
    int len  = str.length();
    for (int i=0; i<len/2 ; i++){
        if (str.charAt(i) != str.charAt(len - i - 1)){
            return false;
            }
    }       
    return true;
} 
```

我希望这可以帮助你。

# java - Couchbase Java getAndLock 混淆

> ID：15651927
> 
> 赞同：1
> 
> 时间：2013-03-27T04:30:33.757
> 
> 标签：java, multithreading, couchbase, membase

我有两个问题。我有一个多线程 Java 应用程序。当一个线程在一个键上调用 getAndLock 之后，另一个线程立即在同一个键上调用 getAndLock 会发生什么？

1.  在第一个线程释放锁之前，第二个线程会自动阻塞吗？或者，函数调用会返回一个空的 CAS 值吗？或者，它会抛出异常吗？

2.  如果第一个线程删除了键（整个文档），那么第二个线程会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:46:09.523

（盐粒；我只熟悉 pecl-memcache 语义）。

[文档](http://www.couchbase.com/docs/couchbase-sdk-java-1.1/couchbase-sdk-java-retrieve-get-and-lock.html#table-couchbase-sdk_java_get-and-lock-transcoder)说它将尝试获取锁三秒钟然后返回`OperationTimeoutException`。（正如 mikeweid 指出的那样）如果锁已经存在，它应该立即返回并指示密钥存在于错误消息中，但文档没有说明在这种情况下会引发什么异常/错误。

至于第二个问题，如果第一个线程删除了一个键，它应该返回，就好像那个键不存在一样；在这种情况下`null`。

# c# - 有什么方法可以在不使用反射的情况下知道 IQueryable 对象的内容？

> ID：15651929
> 
> 赞同：0
> 
> 时间：2013-03-27T04:31:02.853
> 
> 标签：c#, reflection, dataset, iqueryable

我必须使用给定的类`"QueryGenerator"`，该类由用户使用 StringConnection 和 Provider 从选定的表和列生成动态查询。无论如何，我不必知道该类的实现，但我必须使用它并且我有货。

最后，`"QueryGenerator"`将结果查询作为对象返回，我唯一知道的（因为我在类上使用 Reflector）是我可以对该查询结果进行 IQueryable 强制转换。这是一个例子：

```
var result = (IQueryable)myQueryGenerator.Result; 
```

为了了解 的内容`result`，我必须使用反射。

那么，有没有更好的方法来找出 的内容`result`，例如，用它填充 DataSet 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:50:55.860

不，没有。

IQueryable 可以返回不同类型的对象（例如，如果您查询对象数组）。在这种极端情况下，您需要在访问枚举查询时确定每个项目的类型。

演示此场景的示例代码：

```
object[] objs = new object[3]{ "string", 78, DateTime.Now };

var q = objs.AsQueryable().Skip(1).Take(2);

foreach( var o in q )
{
    var t = o.GetType();
} 
```

# django - 带有遗留数据库的 Django 模型 utf8

> ID：15651930
> 
> 赞同：3
> 
> 时间：2013-03-27T04:31:05.503
> 
> 标签：django

我有一个带有 latin1 编码的旧数据库。我无权将其更改为 utf8。当我从模型中读取值时，我收到了乱码。

我尝试使用 name.decode('utf-8') 但它抛出了一个 unicode 错误：

```
 'ascii' codec can't encode characters in position 4-12: ordinal not in range(128) 
```

name.encode('utf-8') 也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:52:41.607

如果您有权访问您的“settings.py”文件，那么您可以更改设置，说明您的数据库正在使用“latin1”。

以下是“settings.py”文件中“DATABASES”配置的示例。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'test_db',
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '3306',
        'OPTIONS': {
                    'charset': 'latin1',
                    'use_unicode': True, },
    }, 
} 
```

我之前遇到过类似的问题，请查看此处的链接[Django database charset issue](https://stackoverflow.com/questions/13686767/django-database-charset-issue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:11:50.537

```
u = unicode(name,'latin-1')
print u.encode('utf-8') 
```

# python - python中的可重置计时器重复直到取消

> ID：15651931
> 
> 赞同：0
> 
> 时间：2013-03-27T04:31:05.620
> 
> 标签：python, timer, reset

我已经从这个网址复制了代码[http://code.activestate.com/recipes/577407-resettable-timer-class-a-little-enhancement-from-p/](http://code.activestate.com/recipes/577407-resettable-timer-class-a-little-enhancement-from-p/)

创建一个可重置的计时器，它工作得很好，但一旦完成它就会结束。我想重新开始，但我是新手，不知道该怎么做。

我厌倦了在 run() 函数的底部创建一个新的实例：

```
print "Time: %s - timer finished!" % time.asctime() 
```

但python似乎不喜欢它。

Eddy Jacob 创建的复制粘贴代码是这样的：

```
from threading import Thread, Event, Timer
import time

def TimerReset(*args, **kwargs):
    """ Global function for Timer """
    return _TimerReset(*args, **kwargs)

class _TimerReset(Thread):
    """Call a function after a specified number of seconds:

    t = TimerReset(30.0, f, args=[], kwargs={})
    t.start()
    t.cancel() # stop the timer's action if it's still waiting
    """

    def __init__(self, interval, function, args=[], kwargs={}):
        Thread.__init__(self)
        self.interval = interval
        self.function = function
        self.args = args
        self.kwargs = kwargs
        self.finished = Event()
        self.resetted = True

    def cancel(self):
        """Stop the timer if it hasn't finished yet"""
        self.finished.set()

    def run(self):
        print "Time: %s - timer running..." % time.asctime()

        while self.resetted:
            print "Time: %s - timer waiting for timeout in %.2f..." % (time.asctime(), self.interval)
            self.resetted = False
            self.finished.wait(self.interval)

        if not self.finished.isSet():
            self.function(*self.args, **self.kwargs)
        self.finished.set()
        print "Time: %s - timer finished!" % time.asctime()

    def reset(self, interval=None):
        """ Reset the timer """

        if interval:
            print "Time: %s - timer resetting to %.2f..." % (time.asctime(), interval)
            self.interval = interval
        else:
            print "Time: %s - timer resetting..." % time.asctime()

        self.resetted = True
        self.finished.set()
        self.finished.clear() 
```

我使用以下方法运行计时器：

```
tim = TimerReset(10, AddBlank)
tim.start() 
```

AddBlank 函数做了一些事情，但我希望再次调用计时器，但只有在它结束之后。非常感谢对此的帮助，我知道在不理解的情况下复制代码是不好的做法，但我真的只是想要一个简单的可重置计时器来重复调用函数，除非重置，这几乎可以做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:16:00.333

将函数更改`run`为：

```
def run(self):
    while not self.finished.isSet():
        print "Time: %s - timer running..." % time.asctime()

        self.resetted = True
        while self.resetted:
            print "Time: %s - timer waiting for timeout in %.2f..." % (time.asctime(), self.interval)
            self.resetted = False
            self.finished.wait(self.interval)

        if not self.finished.isSet():
            self.function(*self.args, **self.kwargs)
    print "Time: %s - timer finished!" % time.asctime() 
```

这将导致它无限期地运行，直到`finished`被设置。

# java - 使用模拟输入摆动屏幕外渲染

> ID：15651932
> 
> 赞同：3
> 
> 时间：2013-03-27T04:31:07.697
> 
> 标签：java, swing, scala, opengl

我正在尝试将摆动 UI 渲染到 OpenGL 纹理中。到目前为止，所有工作都是这段代码（顺便说一句，它是 Scala，但应该很明显）

```
var image = new BufferedImage( width, height, BufferedImage.TYPE_4BYTE_ABGR)
mainFrame.paint(image.getGraphics)
var outputfile = new File("saved.png")
ImageIO.write(image, "png", outputfile) 
```

但这些东西仍然是mississg：

*   当摆动组件中的任何内容发生变化时，我需要得到通知，以便我可以在需要时更新 glTextures。
*   应禁用对摆动窗口的渲染
*   一个虚拟鼠标会很好，这样我就可以在纹理上使用我的投影鼠标位置
*   动态键盘处理，这样只要 UI 处于活动状态，我就可以激活键盘处理。否则我会使用 LWJGL 输入处理。

我认为解决前两个问题的最佳方法是为用于绘制所有摇摆组件的 Graphics 对象添加一个装饰器，但我没有找到任何方法将我对该类的变体植入 Swing。

我希望就是这样。但是如果你知道一个已经解决了我的问题的库，欢迎你，但请不要推荐 TWL。

# css - 有没有办法用css删除正在播放的视频？

> ID：15651933
> 
> 赞同：0
> 
> 时间：2013-03-27T04:31:18.470
> 
> 标签：css, video

阅读[此](https://wiki.mozilla.org/Gecko%3aMoving_Plugins_To_Content)内容后，我知道即使我将其更改为`display:none`（与 Chrome 不同），Firefox 也不会停止播放视频。我想知道是否有任何解决方法可以仅使用 css（而不是 javascript）？

# ruby-on-rails - 如何在 Rails 控制器中添加另一种方法

> ID：15651937
> 
> 赞同：1
> 
> 时间：2013-03-27T04:31:35.540
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, rabl, rails-api

我在向控制器添加新方法时遇到问题，以下是详细信息：

**match_controller.rb**

```
def index
  @matches = Match.all    
  render rabl: @matches
end

def current
  @matches = Match.find_by_sql("SELECT * FROM `TEST`.`matches` where live=1;")    
  render rabl: @matches
end 
```

**路线.rb**

```
resources :matches, defaults: {format: :json}, except: :edit do 
  collection do
    get :current
  end
end 
```

**current.json.rabl**

```
collection @match
   attributes :id,:live 
```

**耙路线**

```
current_matches GET    /matches/current(.:format) matches#current {:format=>:json}
        matches GET    /matches(.:format)         matches#index {:format=>:json}
                POST   /matches(.:format)         matches#create {:format=>:json}
      new_match GET    /matches/new(.:format)     matches#new {:format=>:json}
          match GET    /matches/:id(.:format)     matches#show {:format=>:json}
                PUT    /matches/:id(.:format)     matches#update {:format=>:json}
                DELETE /matches/:id(.:format)     matches#destroy {:format=>:json} 
```

**日志中的错误**

```
NameError (undefined local variable or method `flash' for #<MatchesController:0x0000000d7b2368>):
app/controllers/application_controller.rb:6:in `block in <class:ApplicationController>' 
```

**应用程序.rb**

```
class ApplicationController < ActionController::API
   include ActionController::MimeResponds
   include CanCan::ControllerAdditions

  rescue_from CanCan::AccessDenied do |exception|
    flash[:error] = exception.message
    puts exception.message
    redirect_to root_url
  end

  def log_exception(exception)
    logger.error(exception.message)
    logger.error(exception.backtrace.join("\n"))
  end
end 
```

我以前在另一个应用程序中做过这个，我不知道为什么它在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:35:20.533

您不能`flash`在直接传递给`rescue_from`. 但是，`flash`如果您传递异常处理程序方法的符号，则可以访问。例如：

```
class ApplicationController < ActionController::API
  rescue_from CanCan::AccessDenied, :with => :access_denied

  private

  def access_denied(exception)
    flash[:error] = exception.message
    redirect_to root_url
  end
end 
```

有关详细信息，请参阅[ActionController Rails 指南](http://guides.rubyonrails.org/action_controller_overview.html#rescue_from)部分。`rescue_from`

# android - 如何根据时间填充弹出窗口，然后在 android 中 20 秒后隐藏？

> ID：15651938
> 
> 赞同：3
> 
> 时间：2013-03-27T04:31:36.060
> 
> 标签：android, popup, android-alertdialog

如何根据时间填充弹出窗口，然后在 android 中 20 秒后隐藏？

这是我的代码：

```
public class ExPopup extends Activity {

Dialog myDialog;
Button myButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AlertDialog.Builder helpBuilder = new AlertDialog.Builder(ExPopup.this);
    helpBuilder.setTitle("Pop Up");
    helpBuilder.setMessage("This is a Simple Pop Up");
    helpBuilder.setPositiveButton("Positive",
            new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // Do nothing but close the dialog
        }
    });
    helpBuilder.setNegativeButton("Negative", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });
    helpBuilder.setNeutralButton("Neutral", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });
    // Remember, create doesn't show the dialog
    final AlertDialog helpDialog = helpBuilder.create();
    helpDialog.show();
    Timer tShow = new Timer();
    final Timer tHide = new Timer();

    // This timer will show the popup every 10 second
    tShow.schedule(new TimerTask(){

         public void run(){
              helpDialog.show();
              Date d = new Date(0);
              d.setSeconds(d.getSeconds()+20);

               //This will hide the popup after 20 secnds
               tHide.schedule(new TimerTask(){
                      public void run(){
                          helpDialog.dismiss();
                      }
               },d);
         }
    },0,10*1000);
}   
   } 
```

嘿，我收到此错误并且应用程序已`forcibly`关闭：

```
03-27 10:55:21.371: E/AndroidRuntime(523): FATAL EXCEPTION: Timer-0
03-27 10:55:21.371: E/AndroidRuntime(523): java.lang.IllegalArgumentException
03-27 10:55:21.371: E/AndroidRuntime(523):  at      java.sql.Date.getSeconds(Date.java:109)
03-27 10:55:21.371: E/AndroidRuntime(523):  at com.example.android.ExPopup$4.run(ExPopup.java:60)
03-27 10:55:21.371: E/AndroidRuntime(523):  at java.util.Timer$TimerImpl.run(Timer.java:284)
03-27 10:55:24.601: E/WindowManager(523): Activity com.example.android.ExPopup has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4051bd00 that was originally added here
03-27 10:55:24.601: E/WindowManager(523): android.view.WindowLeaked: Activity com.example.android.ExPopup has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4051bd00 that was originally added here
03-27 10:55:24.601: E/WindowManager(523):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
03-27 10:55:24.601: E/WindowManager(523):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
03-27 10:55:24.601: E/WindowManager(523):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-27 10:55:24.601: E/WindowManager(523):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.Dialog.show(Dialog.java:241)
03-27 10:55:24.601: E/WindowManager(523):   at com.example.android.ExPopup.onCreate(ExPopup.java:50)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-27 10:55:24.601: E/WindowManager(523):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 10:55:24.601: E/WindowManager(523):   at android.os.Looper.loop(Looper.java:123)
03-27 10:55:24.601: E/WindowManager(523):   at android.app.ActivityThread.main(ActivityThread.java:3683)
03-27 10:55:24.601: E/WindowManager(523):   at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:55:24.601: E/WindowManager(523):   at java.lang.reflect.Method.invoke(Method.java:507)
03-27 10:55:24.601: E/WindowManager(523):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-27 10:55:24.601: E/WindowManager(523):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-27 10:55:24.601: E/WindowManager(523):   at dalvik.system.NativeStart.main(Native Method)
03-27 10:55:25.941: I/Process(523): Sending signal. PID: 523 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:46:34.323

使用处理程序，

```
Handler handler=new Handler();
handler.postDelayed(new Runnable(){
public void run(){
//ToDo your function
//hide your popup here
 helpDialog.dismiss();
}
},2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:49:09.200

您可以创建一个计时器，然后像这样隐藏对话框：

```
Timer tShow = new Timer();
Timer tHide = new Timer();

// This timer will show the popup every 10 second
tShow.schedule(new TimerTask(){

     public void run(){
          helpDialog.show();
          Date d = new Date();
          d.setSeconds(d.getSeconds()+20);

           //This will hide the popup after 20 secnds
           tHide.schedule(new TimerTask(){
                  public void run(){
                      helpDialog.dismiss();
                  }
           },d);
     }
},0,10*1000); 
```

将 Timers 和 Dialog 声明为类的变量。但是，我不明白，如果你每 10 秒显示一次弹出窗口并每 20 秒隐藏一次，它会如何工作？

**编辑**

```
private Timer tShow = new Timer();
private Timer tHide = new Timer();
private AlertDialog helpDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AlertDialog.Builder helpBuilder = new AlertDialog.Builder(MainActivity.this);
    helpBuilder.setTitle("Pop Up");
    helpBuilder.setMessage("This is a Simple Pop Up");
    helpBuilder.setPositiveButton("OK",
            new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // Do nothing but close the dialog
        }
    });
    helpBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });
    helpBuilder.setNeutralButton("Neutral", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });
    helpDialog = helpBuilder.create();

    // This timer will show the popup every 10 second
    tShow.schedule(new TimerTask(){

        @Override
         public void run(){
              abc();
         }
    },0,10*1000);
}

public void abc(){
    this.runOnUiThread(my_Function);
}

private Runnable my_Function = new Runnable() {

    @Override
    public void run() {
        helpDialog.show();
        Date d = new Date();
        d.setSeconds(d.getSeconds()+20);

         //This will hide the popup after 20 secnds
         tHide.schedule(new TimerTask(){
                public void run(){
                    helpDialog.dismiss();
                }
         },d);

    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

# android - 如何使用 EntityUtils 编写对 TextView 的服务器响应？

> ID：15651939
> 
> 赞同：0
> 
> 时间：2013-03-27T04:31:39.330
> 
> 标签：android, textview

为什么运行此代码时模拟器会崩溃？

```
 TextView servmsg;
    String data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_msg);
        Vars();
        new SendtheData().execute("");
    }

    private void Vars() {
        // TODO Auto-generated method stub
        servmsg = (TextView) findViewById(R.id.tvServerMsg);
    }

    public class SendtheData extends AsyncTask<String, Integer, Void> {

        protected void onPreExecute(String f) {
            // called before doInBackground has started
            f = "f";
        }

        protected Void doInBackground(String... params) {
            // TODO Auto-generated method stub
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(
                    "http://192.168.1.6/androidp2p/process.php");
            try {
                List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
                pairs.add(new BasicNameValuePair("from", "test4"));
                pairs.add(new BasicNameValuePair("to", ""));
                pairs.add(new BasicNameValuePair("message", ""));
                post.setEntity(new UrlEncodedFormEntity(pairs));
                HttpResponse response = client.execute(post);
                // Convert the response into a String
                HttpEntity resEntity = response.getEntity();

                // Print the response
                data = EntityUtils.toString(resEntity);
                servmsg.setText(data);

                // Write the response to a log file
                if (resEntity != null) {
                    Log.i("RESPONSE", EntityUtils.toString(resEntity));
                }
            } catch (UnsupportedEncodingException uee) {
                uee.printStackTrace();
            } catch (ClientProtocolException cpe) {
                cpe.printStackTrace();
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
            return null;
        }

        protected void onProgressUpdate(Integer... progress) {
            // called when the background task has made any progress
        }

        protected void onPostExecute() {
            // called after doInBackground has finished
        }

    } 
```

但是当我注释掉这些行时：

// data = EntityUtils.toString(resEntity) // servmsg.setText(data)

它工作正常。如何获取服务器对 xml TextView 的响应？

另外，如果我可以添加的话，服务器的响应有 3 个字段，“to、from 和 message”。将这些中的每一个放入自己的 TextView 中的最佳方法是什么？

日志猫：

```
E/Trace(1584): error opening trace file: No such file or directory (2)
D/gralloc_goldfish(1584): Emulator without GPU emulation detected.
I/Choreographer(1584): Skipped 102 frames!  The application may be doing too much work on its main thread.
W/dalvikvm(1584): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
E/AndroidRuntime(1584): FATAL EXCEPTION: AsyncTask #1
E/AndroidRuntime(1584): java.lang.RuntimeException: An error occured while executing doInBackground()
E/AndroidRuntime(1584): at android.os.AsyncTask$3.done(AsyncTask.java:299)
E/AndroidRuntime(1584): at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
E/AndroidRuntime(1584): at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
E/AndroidRuntime(1584): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
E/AndroidRuntime(1584): at java.util.concurrent.FutureTask.run(FutureTask.java:137) 
```

提前致谢。

在尝试受保护的 void onPostExecute() { // 在 doInBackground 完成后调用 servmsg.setText(data); }

这是新的 LogCat：

```
03-27 00:56:24.006: W/dalvikvm(1736): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
03-27 00:56:24.048: E/AndroidRuntime(1736): FATAL EXCEPTION: AsyncTask #1
03-27 00:56:24.048: E/AndroidRuntime(1736): java.lang.RuntimeException: An error occured while executing doInBackground()
03-27 00:56:24.048: E/AndroidRuntime(1736):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.lang.Thread.run(Thread.java:856)
03-27 00:56:24.048: E/AndroidRuntime(1736): Caused by: java.lang.IllegalStateException: Content has been consumed
03-27 00:56:24.048: E/AndroidRuntime(1736):     at org.apache.http.entity.BasicHttpEntity.getContent(BasicHttpEntity.java:84)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at org.apache.http.conn.BasicManagedEntity.getContent(BasicManagedEntity.java:100)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:112)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at com.project.keegan.testPrintMsg$SendtheData.doInBackground(testPrintMsg.java:77)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at com.project.keegan.testPrintMsg$SendtheData.doInBackground(testPrintMsg.java:1)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 00:56:24.048: E/AndroidRuntime(1736):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

这是我的 PHP 代码：

```
<?php

/* connect to database */
$db = mysql_connect("localhost", "root", "root");
if (!$db)
    die('could not connect');

mysql_select_db('androidp2p')
    or die("could not select database");

$from = mysql_real_escape_string($_POST['from']); 
$to = mysql_real_escape_string($_POST['to']);
$message = mysql_real_escape_string($_POST['message']);

if ($_POST['to'])
{
    /* user wants to send a message */
    $query = "INSERT INTO messages (fromuser, touser, message) VALUES ('$from', '$to', '$message')";

    mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    echo "ok. Messages have been saved.";

}
else
{
    /* user wants to retrieve his messages*/
    $query = "SELECT * FROM messages WHERE touser='$from'";

    $result = mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    $message_count = mysql_num_rows($result);
    if( $message_count == 0)
    {
        /* no messages*/
        echo "ok. There are no messages.";  
    }
    else
    {
        /* output messages */
        while ($row = mysql_fetch_assoc($result))
        {
            echo "message start\n{$row['fromuser']}\n{$row['message']}\nmessage end\n";
        }

        /* clear messages */
        $query = "DELETE FROM messages WHERE touser='$from'";

        mysql_query($query)
            or die("\n\ndatabase error!\n". mysql_error());

        echo "ok. Cleared all messages.";       
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:17:16.783

```
public class SendtheData extends AsyncTask<String, Integer, String> {

    protected void onPreExecute(String f) {
        // called before doInBackground has started
        f = "f";
    }

    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        String data = null;
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(
                "http://192.168.1.6/androidp2p/process.php");
        try {
            List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
            pairs.add(new BasicNameValuePair("from", "test4"));
            pairs.add(new BasicNameValuePair("to", ""));
            pairs.add(new BasicNameValuePair("message", ""));
            post.setEntity(new UrlEncodedFormEntity(pairs));
            HttpResponse response = client.execute(post);
            // Convert the response into a String
            HttpEntity resEntity = response.getEntity();

            // Print the response
            data = EntityUtils.toString(resEntity);

            // Write the response to a log file
            if (resEntity != null) {
                Log.i("RESPONSE", EntityUtils.toString(resEntity));
            }
        } catch (UnsupportedEncodingException uee) {
            uee.printStackTrace();
        } catch (ClientProtocolException cpe) {
            cpe.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        return data;
    }

    protected void onProgressUpdate(Integer... progress) {
        // called when the background task has made any progress
    }

    protected void onPostExecute(String data) {
        if(null != data)
        {
            servmsg.setText(data);
        }else{
            //handle Error
        }

    }

} 
```

您可以像这样更改您的`AsyncTask`, 实施。总是`onPsotExecute`在`AsyncTask`. 希望这会有所帮助。

> 另外，如果我可以添加的话，服务器的响应有 3 个字段，“to、from 和 message”。将这些中的每一个放入自己的 TextView 中的最佳方法是什么？

您从 PHP 页面返回的响应，您可以将其设为`JSON`响应并从客户端`JSON`使用 android 解析该响应`JSONParser`，您的响应可能如下所示`"{status:'200',statusMessage:'success or as you wish',data{to:'value',from:'value',message:'your message'}}"`

# ios - 我安排一个计时器使用 readRSSI 函数读取 RSSI，但是当我的应用程序进入后台时计时器停止

> ID：15651940
> 
> 赞同：3
> 
> 时间：2013-03-27T04:31:47.117
> 
> 标签：ios, bluetooth, core-bluetooth, rssi

我使用 readRSSI 函数安排了一个计时器来读取 RSSI，但是当我的应用程序进入后台时计时器停止。当应用程序进入后台时，也许有一种很好的方法可以从外围设备的通知中获取 RSSI 值。但我不知道该怎么做。有人可以帮助我吗？谁有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:59:43.507

我有同样的问题，我有两个想法。

1.

首先，您应该有一些定期获得核心蓝牙委托的服务。或者我的例子，我有一个电池服务，我可以定期获得委托`didUpdateValueForCharacteristic`。

二、设置readRSSI函数`didUpdateValueForCharacteristic`。并且不要忘记使用Corebluetooth设置后台模式。所以现在您可以在更新电池值时更新RSSI。

这对我来说很好，但我从一些示例代码中得到了另一个想法。

2.

每当您想启动 RSSI 阅读器时，请使用以下代码：

```
NSTimer *rssiTimer; 
[rssiTimer invalidate];    
rssiTimer = [NSTimer timerWithTimeInterval:1.0 target:peripheral selector:@selector(readRSSI) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop]addTimer:rssiTimer forMode:NSRunLoopCommonModes]; 
```

它对我也很好。

# core-data - 设置持久存储和父上下文

> ID：15651943
> 
> 赞同：0
> 
> 时间：2013-03-27T04:31:54.893
> 
> 标签：core-data, nspersistentstore

当`NSManagedObjectContext`持久存储和父上下文都设置并调用保存时会发生什么？它会将数据一一推送到持久存储和父上下文吗？还是会同时进行？或者核心数据会简单地抛出一个抱怨的异常吗？

API 不会直接阻止一个给定上下文设置两个“父母”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T06:06:20.053

这将发生：

`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Context already has a coordinator; cannot replace.'`

发生这种情况是因为当您设置 时`parentContext`，`persistentStoreCoordinator`会自动设置`persistentStoreCoordinator`为父上下文的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-19T02:46:05.210

如果我们为父上下文分配协调器，我们不需要为托管上下文设置协调器

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    [self setManagedObjectContext:moc];

    [self setPrivateContext:[[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType]];

    /// when you set parentContext, the persistentStoreCoordinator is automatically set to the persistentStoreCoordinator of the parent contex
    [self.privateContext setPersistentStoreCoordinator:coordinator];
    [self.managedObjectContext setParentContext:self.privateContext]; 
```

这是在框架示例中使用的完整代码 -

```
 NSURL *modelURL = [[NSBundle bundleForClass:[self class]] URLForResource:@"TVModelSDK" withExtension:@"momd"];
    NSManagedObjectModel *mom = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    NSAssert(mom, @"Failed to initialize mom from URL: %@", modelURL);

    NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];

    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    /// DONOT set coordinator for managed Context ! 
    // [moc setPersistentStoreCoordinator:coordinator];
    [self setManagedObjectContext:moc];

    [self setPrivateContext:[[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType]];
    /// when you set parentContext, the persistentStoreCoordinator is automatically set to the persistentStoreCoordinator of the parent contex
    [self.privateContext setPersistentStoreCoordinator:coordinator];
    [self.managedObjectContext setParentContext:self.privateContext]; 
```

# javascript - 在javascript中的图像上绘制矩形

> ID：15651953
> 
> 赞同：2
> 
> 时间：2013-03-27T04:32:39.667
> 
> 标签：javascript, jquery, html

我正在尝试编写一个简单的 java 脚本程序来标记图像上的矩形。单击一个按钮以添加一个矩形，然后单击左上角和右下角，程序应将矩形标记为红色。我正在使用带有 jquery 的直接 javascript。

几乎一切正常，除非在这种情况下，当一个矩形的左上角或右下角在另一个矩形内时，在处理单击事件时，x 和 y 不正确。

我已经尝试解决这个问题几个小时了，谷歌没有帮助。我特别尝试过：

*   将 e.pageX 更改为 e.screenX 和 e.screenY
*   使用绝对位置（顶部和左侧）而不是偏移量

很明显，我遗漏了一些不能让我正确处理的东西，但我不知道到底是什么。

我创建了一个[带有显示问题的示例的 jsfiddle](http://jsfiddle.net/65FDe/4/)。然而，如果你不想点击它，这是我的 JS 代码：

```
var rects = [{x1: 708, y1: 246, x2: 738, y2: 277},
             {x1: 442, y1: 239, x2: 474, y2: 271},
             {x1: 676, y1: 242, x2: 703, y2: 270}];

var $container = $("#container");
var click_count = 0;
var added_rects = 0;
var waiting_for_clicks = false;
var new_rects = [];
var current_rect = {};

var add_rect = function(color, rect) {
    $('<div class="child"/>')
    .appendTo($container)
    .css("left", rect.x1 + "px")
    .css("top", rect.y1 + "px")
    .css("width", (rect.x2-rect.x1)+"px")
    .css("height", (rect.y2-rect.y1)+"px")
    .css("border", "1px solid " + color);
};

var remove_last_rect = function() {
    if (new_rects.length > 0) {
        $container.children('div:last-child').remove();
        new_rects.pop();
    }
}
_.map(rects, _.partial(add_rect, 'red'));

var listen_for_rect = function() {
    click_count = 0;
    waiting_for_clicks = true;
    current_rect = {x1: -1, y1: -1, x2: -1, y2: -1};
    $('#add-rect').attr('disabled', 'disabled');
    $('#remove-rect').attr('disabled', 'disabled');
};

var stop_listening_for_rects = function() {
    waiting_for_clicks = false;
    $("#add-rect").removeAttr('disabled');
    $('#remove-rect').removeAttr('disabled');
    add_rect('red', current_rect);
    new_rects.push(current_rect);
}

$('#add-rect').click(function(e) {
    e.preventDefault();
    listen_for_rect();
});

$('#remove-rect').click(function(e) {
    remove_last_rect();
    if (new_rects.length == 0) $(this).attr('disabled', 'disabled');
});

var click_event = function(e) {
    e.preventDefault();
    if (waiting_for_clicks) {
        click_count++;
        var offset = $(this).offset();
        var x = e.pageX-offset.left;
        var y = e.pageY-offset.top;
        console.log(x);
        console.log(y);
        if (click_count == 1) {
            current_rect.x1 = x;
            current_rect.y1 = y;
        } else if (click_count == 2) {
            current_rect.x2 = x;
            current_rect.y2 = y;
            stop_listening_for_rects();
        }
    }
};

$container.on('click', '.child', click_event);

$('img').click(click_event);
// console.log($('.child')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:49:52.777

如果单击矩形内部，则 x 和 y 坐标**相**对于矩形的左上角，而不是图像的左上角。

原因是，$(this).offset() 返回的是您单击的元素的偏移量，而不是图像的偏移量，因此当您在矩形内部单击时，它会返回矩形的偏移量。

试试这个`click_event = function(e) {`：

```
var offset = $("img").offset(); 
```

# c# - 如何将`var`变量等同于另一个查询

> ID：15651955
> 
> 赞同：0
> 
> 时间：2013-03-27T04:33:01.453
> 
> 标签：c#, linq, casting, type-conversion

我有`var`一个名为 retVal 的变量，它等于一些查询。在某些条件之后，我想将其等同于另一个查询。但我收到一个错误，例如`implicit cast of type "System.Collections.Generic.IEnumerable<AnonymousType#1>" in "System.Collections.Generic.IEnumerable<AnonymousType#2>" is impossible`. 你可以问我为什么我不想定义另一个`var`变量。因为这个是`foreach`循环使用的。让我们看一下代码：

```
var retVal = from groupItem in result.AsEnumerable()
                             where groupItem.Sms.First().amountOfParts == (
                               (from item in rawSmsList.AsEnumerable()
                                where item.referenceNumber == groupItem.Sms.First().referenceNumber
                                select item).Count()
                             )
                             select new
                             {
                                 Value = groupItem.Value,
                                 Sms = groupItem.Sms
                             };
                //CONDITION
                if (retVal.ToArray().Length==0)
                {
                    //HERE I NEED TO RETVAL EQUATE NEW QUERY
                    retVal = from groupItem in result.AsEnumerable()
                                 where groupItem.Sms.First().amountOfParts == (
                                   (from item in rawSmsList.AsEnumerable()
                                    where item.senderNumber == groupItem.Sms.First().senderNumber
                                    select item).Count()
                                 )
                                 select new
                                 {
                                     Value = groupItem.Value,
                                     Sms = groupItem.Sms
                                 };                        
                }

                foreach (var item in retVal)//FOREACH EXPECTS THE SAME RETVAL!!! 
```

那么如何将不同的查询转换为同一个`var`变量呢？或者如何找到`var`变量的类型，然后将其转换为新定义的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:35:01.760

[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)意味着隐式类型变量，这意味着它的类型将在编译时确定，所以在你第一次使用时，它将被分配一个匿名类型，在你第二次你试图为它分配一个不同的匿名类型时，你不能这样做。

您可以修改代码以使用类而不是匿名对象，然后投影到该类，然后您将做您现在正在做的事情。您可以像这样创建类：

```
public class MyClass 
{
   public int Value {get;set;}
   public string Sms {get;set;}
} 
```

然后通过将您的 select 语句修改为：

```
var retVal = ......
             select new MyClass
               {
                  Value = groupItem.Value,
                   Sms = groupItem.Sms
               }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T04:40:15.273

您用于投影的匿名类在我们看来是一样的，但就编译器而言，它们是两个独立的类，这就是您会在错误中看到 AnonymousType#1 和 AnonymousType#2 的原因。

一种解决方案是简单地选择“groupItem”而不是使用匿名类进行投影，因为您只使用 groupItem 本身内的属性。这将为您提供相同的 IQueryable 类型。

旁注：您应该将“retVal.ToArray().Length == 0”替换为“!retVal.Any()”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T04:42:58.357

添加到哈比卜的答案：

只需创建一个实际的类而不是使用匿名类型（每次使用它都是一个不同的类）。我不知道您示例中的类型，因此您必须指定：

```
public class ValueSmsThing          // Give it a better name!
{
    public IDontKnow Value { get; private set; }    // specify the type!
    public SmsNumber Sms   { get; private set; }    // !!

    public ValueSmsThing( IDontKnow value, SmsNumber sms) {
        Value = value;
        Sms = sms;
    }
} 
```

然后在您的查询中，而不是使用匿名类型：

```
 select new
 {
     Value = groupItem.Value,
     Sms = groupItem.Sms
 }; 
```

使用您创建的具体类

```
select new ValueSmsThing( groupItem.Value, groupItem.Sms ); 
```

然后您的`for`循环将知道迭代`ValueSmsThing`s。

# haskell - 使用 XHB 的假按键

> ID：15651958
> 
> 赞同：1
> 
> 时间：2013-03-27T04:33:06.887
> 
> 标签：haskell, keyboard, x11, xcb

我正在尝试使用 XHB 和 XTest 模拟按键，并使用此[示例代码](http://cgit.freedesktop.org/xcb/demo/tree/app/xte/xte.c#n75)作为参考。不幸的是，无论我做什么，生成的程序都没有效果。没有例外，没有警告。

有任何想法吗？

我在 Ubuntu 12.04 上使用 XHB 0.5.2012.11.23 和 GHC 7.4.1。

这是我到目前为止所得到的：

```
import Control.Monad
import Control.Concurrent
import Graphics.XHB
import Graphics.XHB.Gen.Test

main = do
    Just c <- connect
    let keyCode = 38  -- A
    forever $ do
        fakeInput c $ MkFakeInput (toBit' EventMaskKeyPress) keyCode 0 (fromXid xidNone) 0 0 0
        threadDelay $ 1 * 1000
        fakeInput c $ MkFakeInput (toBit' EventMaskKeyRelease) keyCode 0 (fromXid xidNone) 0 0 0
        threadDelay $ 1 * 1000

toBit' :: (BitEnum a, Integral b) => a -> b
toBit' = fromIntegral . toBit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:50:55.867

这里的问题有点微妙。如果您查看[XTest 协议](http://www.x.org/docs/Xext/xtest.pdf)，您会发现`FAKE_EVENT`不需要`EVENT_MASK`a 而是需要`FAKE_EVENT_TYPE`. `KeyPress`是`FAKE_EVENT_TYPE` `2`而是。`KeyRelease`_ `3`在使用这些值代替`EventMaskKeyPress`and之后，事情会按预期工作`EventMaskKeyRelease`（此外，您不需要讨厌的`toBit`强制，这是让我认为这是不正确的气味）。

# c# - 当 Windows 主题设置为经典时，WinForms 使用 Windows Aero 主题

> ID：15651963
> 
> 赞同：0
> 
> 时间：2013-03-27T04:33:40.390
> 
> 标签：c#

我想知道是否有人找到了一种方法来保留使用 Windows 7 Aero 主题设计的 Windows 窗体应用程序，以便在计算机上的主题切换到 Classic 时保留 Aero 主题。当用户将主题切换为经典时，所有控件看起来都像 windows xp 之前的样式。感谢任何人都可以提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:28:22.340

Corey 的评论很到位，但是在经典模式下程序仍然不应该看起来“糟糕”（Office 2003 实际上看起来更好），所以我建议对您的程序进行一些视觉调整:)

您可以发布屏幕截图以便我们提供一些指导吗？

请注意，将来这将不再是问题，因为在 Windows 8 下无法禁用主题。

# c - Linux：可以抢占信号处理程序执行吗？

> ID：15651964
> 
> 赞同：4
> 
> 时间：2013-03-27T04:33:42.953
> 
> 标签：c, linux, signals, interrupt-handling

我遇到了以下存储 errno 变量的信号处理程序代码，这样它就不会影响主线程的 errno 处理。

```
void myhandler(int signo)
{
    int esaved;
    esaved = errno;
    write(STDOUT_FILENO, "Got a signal\n", 13);
    errno = esaved;
} 
```

但这真的有目的吗？如果另一个线程在 write() 之后和恢复 errno 之前检查共享的 errno 变量会发生什么？由于竞争条件，该线程会得到错误的 errno 值吗？

或者信号处理程序相对于线程/进程以*原子*方式执行，因此一旦信号处理程序执行，内核不会调度线程直到信号处理程序完成？

换句话说-一旦开始，信号处理程序就会执行而不会被以下内容中断：

```
 - 1) Scheduler (process/threads),  or  
 - 2) Other signals,  or
 - 3) Hardware interrupt handlers  ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:38:55.643

该变量`errno`是线程特定的——或者更准确地说，在线程环境中，是线程本地或每个线程的值——所以在这个线程中所做的事情`errno`不会影响`errno`其他线程。

代码保存和恢复的目的`errno`是隐藏`write()`系统调用设置的任何错误`myhandler()`。但是如果`write()`失败，它可能会设置`errno`为某个新值——它不会为零，但这就是你能说的全部——但是你所询问的代码会恢复调用之前的值到调用`write()`之后的值`write()`，所以发生写入的事实是“不可见的”，因为它不会影响`errno`该线程。

信号处理函数本身可能会被未被其响应的信号的信号掩码阻塞的信号中断。也可以重新安排。硬件中断也可能发生，但代码很难注意到这些影响。

* * *

在 Linux 上，您可能会发现`/usr/include/bits/errno.h`定义宏`errno`（包含的`#ifdef`代码比此处显示的更多）：

```
extern int *__errno_location (void) __THROW __attribute__ ((__const__));

#  if !defined _LIBC || defined _LIBC_REENTRANT
/* When using threads, errno is a per-thread value.  */
#   define errno (*__errno_location ())
#  endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T04:43:10.277

在 Linux 上，`errno`是一个扩展为函数调用的宏，该函数调用返回一个可修改的左值，该左值对于每个线程都是不同的。

查看[手册页](http://man7.org/linux/man-pages/man3/errno.3.html)：

> errno 由 ISO C 标准定义为 int 类型的可修改左值，不得显式声明；errno 可能是一个宏。errno 是线程本地的；在一个线程中设置它不会影响它在任何其他线程中的值。

但是，确实可以在信号处理程序的执行过程中再次触发信号（如果您使用`signal()`而不是`sigaction()`，则取决于您的环境；`sigaction()`建议使用这些不一致的原因），或者另一个信号可能会中断处理程序的执行。这就是为什么通常在您设置信号处置时，您会在执行信号处理程序期间通过将其添加到信号掩码来阻止信号（在具有该处理程序的多个信号的情况下） . 这可以防止信号处理程序中断自身（在某些情况下，防止无限循环）。

参考：

*   `sa_mask`可以传递给的组件[`sigaction()`](http://man7.org/linux/man-pages/man2/sigaction.2.html)：

    > sa_mask 指定在信号处理程序执行期间应被阻塞的信号掩码（即，添加到调用信号处理程序的线程的信号掩码）。此外，**触发处理程序的信号将被阻塞**，除非使用 SA_NODEFER 标志。

*   [`signal()`](http://man7.org/linux/man-pages/man2/signal.2.html)：

    > signal() 的唯一可移植用途是将信号的处置设置为 SIG_DFL 或 SIG_IGN。使用 signal() 建立信号处理程序时的语义因系统而异（POSIX.1 明确允许这种变化）；**不要将其用于此目的。**
    > 
    > **POSIX.1 通过指定 sigaction(2) 解决了可移植性混乱**，它在调用信号处理程序时提供对语义的显式控制；使用该接口而不是信号（）。
    > 
    > [...] 此外，相同信号的快速传递可能会导致处理程序的递归调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T04:44:16.790

信号处理程序确实可以被另一个信号中断（假设它与首先调用处理程序的信号不同）。

> 您的处理程序仍然可以通过传递另一种信号而中断。为避免这种情况，您可以使用传递给 sigaction 的操作结构的 sa_mask 成员来明确指定在信号处理程序运行时应阻止哪些信号。这些信号是对调用处理程序的信号以及通常被进程阻塞的任何其他信号的补充。请参阅阻止处理程序。
> 
> 当处理程序返回时，被阻塞的信号集恢复到处理程序运行之前的值。因此，在处理程序内部使用 sigprocmask 只会影响处理程序本身执行期间可以到达的信号，而不影响处理程序返回后可以到达的信号。

[http://www.gnu.org/software/libc/manual/html_node/Signals-in-Handler.html#Signals-in-Handler](http://www.gnu.org/software/libc/manual/html_node/Signals-in-Handler.html#Signals-in-Handler)

# c# - 让 Windows Store Sockets 与 Netcat 聊天？

> ID：15651966
> 
> 赞同：2
> 
> 时间：2013-03-27T04:33:52.343
> 
> 标签：c#, sockets, networking, windows-runtime, netcat

我正在尝试使用 Windows.Networking.Sockets API 获得适用于 Windows Store 的基本接口。到目前为止，我有这个：

```
 public async void Test()
    {
        using (var socket = new StreamSocket())
        {
            socket.Control.KeepAlive = false;
            socket.Control.NoDelay = false;
            await socket.ConnectAsync(new HostName("192.168.1.1"), "5555", SocketProtectionLevel.PlainSocket);
            using (var writer = new DataWriter(socket.OutputStream))
            {
                writer.UnicodeEncoding = UnicodeEncoding.Utf8;
                writer.WriteString("yea!");
                //writer.WriteByte(0x50); //this doesn't work either to send raw ASCII
                var t = writer.FlushAsync();
                while (t.Status != AsyncStatus.Completed) ; //just in case?
            }
        }
    } 
```

到目前为止，我似乎确实获得了成功的连接和断开连接。但是，我从来没有收到任何文本。

我的 netcat 命令（在 OpenBSD 路由器下运行）

```
$ nc -lv 5555 
```

如果我在运行 Test 函数时没有运行 netcat，它会抛出异常，所有这些都和预期的一样。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:55:40.447

这对我来说绝对没有意义，但显然`StoreAsync`是`DataWriter`. 我会认为 Flush 应该调用它，但显然不是。关于 WinRT API 的另一个有趣的部分。我的固定代码：

```
 using (var socket = new StreamSocket())
        {
            socket.Control.KeepAlive = false;
            socket.Control.NoDelay = false;
            await socket.ConnectAsync(new HostName("192.168.1.1"), "5555", SocketProtectionLevel.PlainSocket);
            using (var writer = new DataWriter(socket.OutputStream))
            {
                writer.UnicodeEncoding = UnicodeEncoding.Utf8;
                writer.WriteString("yea!");
                await writer.StoreAsync();
            }
        } 
```

# asp.net-2.0 - AjaxPro 框架击中超时功能？

> ID：15651967
> 
> 赞同：1
> 
> 时间：2013-03-27T04:33:55.257
> 
> 标签：asp.net-2.0, ajaxpro

我正在尝试开发一个聊天应用程序。我正在使用 Asp.Net2.0 和 vs2005.Iam 使用 AjaxPro[框架](http://www.ajaxpro.info/)来**`asynchronous calls`**访问服务器端。

`timeout`我的问题是当我在几秒钟后发送消息时 出现错误。可能是什么问题，我将如何解决？

我的另一个疑问是使用中是否存在严重问题 **`AjaxPro Framework`**

这是我在客户端用来发送消息的代码

```
 <script language="javascript">
           // Send messages
        function sendMessage()
        {               
            // input box for entering message
            var ta_content = el("txtcontent");

            // if the content input is not empty
            if (ta_content.value.length > 0)
            {
                //the message show area
                var div_recentMsg = el("recentMsg");        

                var clientUname=document.getElementById("<%=hFieldClientUserName.ClientID %>").value;       

                var adminUname=document.getElementById("<%=hFieldAdminUserName.ClientID %>").value; 

                // send the message
                AjaxProChat.SendMessage(clientUname,adminUname,ta_content.value);

                // clear the input box
                ta_content.value = "";

                // roll up the web page with the messages
                ta_content.scrollIntoView(false);

                getNewMessage();

            }
        }

        //Obtain the new messages
        function getNewMessage()
        {
            // AjaxProChat.timeouPeriod(1800000);
            // the user name
            var username = document.getElementById("<%=hFieldClientUserName.ClientID %>").value;        

            // the message show area
            var div_recentMsg = el("recentMsg");

            // Obtain the DataTable for the newest messages
            var dt = AjaxProChat.GetNewMsg(username).value;
            for (var i = 0;i < dt.Rows.length;i++)
            {

                // one message in response to one <span> object
                var oneMsg = document.createElement("span");

                // the message sender and corresponding sent content
                var strLine1 = dt.Rows[i].Sender + " says: (" + dt.Rows[i].SendTime + ")";
                strLine1 = DealBrackets(strLine1);

                // the content of the message
                var strLine2 = dt.Rows[i].Contents;
                strLine2 = DealBrackets(strLine2);

                // show style
                oneMsg.innerHTML = "<pre>" + strLine1 + "<br>&nbsp;&nbsp;" + strLine2 + "</pre>";
                oneMsg.style.padding = "2px 2px 2px 2px";
                oneMsg.style.color = (dt.Rows[i].Sender == username) ? "blue" : "red";
                oneMsg.style.fontFamily = "'Courier New'";

                // attached to DOM
                div_recentMsg.appendChild(oneMsg);
            }
        }

</script> 
```

这是html代码

```
 <div style="text-align: center">
    <strong><span style="font-size: 24pt"><span style="color: #333399; background-color: #ffffff">
        Chatting Room</span></span></strong>  

</div>
    <table border="2" style="width: 792px; height: 443px;background-color:#ffffff;">
        <tr>
            <td colspan="3" style="height: 373px; width: 729px;">
                <div id="recentMsg" style="width: 779px; height: 368px; overflow:auto;">
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="3" style="height: 30px; width: 729px;">
                <asp:Label ID="Label1" runat="server" Font-Size="X-Large" ForeColor="Maroon">Input the message and click Send or press ENTER key:</asp:Label>
            </td>
        </tr>
        <tr>
            <td colspan="3" style="height: 40px; width: 729px;">
                <input id="txtcontent" onkeydown="if (event.keyCode==13) {sendMessage();return false;}"
                    style="width: 55%; height: 30px" type="text" runat="server" />         
                <input onclick="javascript:sendMessage();" style="width: 58px; border-top-style: groove;
                    border-right-style: groove; border-left-style: groove; background-color: #ebf1fa;
                    border-bottom-style: groove; height: 34px;" type="button" value="Send" id="btnSend" /></td>
        </tr>
        <tr>
            <td colspan="3" style="width: 729px">
            </td>
        </tr>
    </table> 
```

这是我在服务器端编写的发送和接收消息的代码

```
 [AjaxPro.AjaxMethod]//code for sending messages
public void SendMessage(string Sender,string Receiver,string Content)
{
    ChatBAL clsChat = new ChatBAL();
    clsChat.SENDER = Sender;
    clsChat.RECEIVER = Receiver;
    clsChat.CONTENT = Content;
    clsChat.SendMessage();

}

[AjaxPro.AjaxMethod]//code for getting latest message and returns datatable
public DataTable GetNewMsg(string UserName)
{
    ChatBAL clsChat = new ChatBAL();
    DataTable dtNewMsg =new DataTable();
    try
    {
        clsChat.USERNAME = UserName;
        dtNewMsg = clsChat.GetNewMessage();            
    }
    catch
    {
        throw;
    }
    finally
    {
        clsChat = null;
    }
    return dtNewMsg;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T12:27:45.477

在您的 javascript 代码中，您可以在 ajax 调用之前使用此代码。

```
 AjaxPro.timeoutPeriod = 120 * 1000; //this will add a 2 minutes timeout
    AjaxPro.onTimeout = (function (time, obj, something) {
       if (time < AjaxPro.timeOutPeriod || obj.method !="SendMessage") return false;
       else
        {
           console.log("Ajaxpro timeout exception after 120 seconds!");
         }
    }); 
```

# xcode - 从 .ipa 或可执行文件中提取 Xcode 项目文件

> ID：15651970
> 
> 赞同：11
> 
> 时间：2013-03-27T04:34:01.343 元素
> 
> 标签：xcode

有没有办法从 .ipa（可执行文件）中提取 Xcode 项目文件？

我尝试了以下方法：

制作 .ipa 文件的副本并将 .ipa 更改为 .zip。双击**Payload**文件夹并打开项目文件夹。右键单击该文件夹并选择**Show Package Contents**。

一切似乎都很好，但我想查看现在显示为可执行文件的代码。有什么工具或方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T04:38:57.313

如您所见，.ipa 文件包含已编译的项目。所以不，您无法获取 Xcode 项目文件或源代码。（当然，除非有人故意复制这些文件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T04:48:45.550

**不，您不能将已编译的可执行文件转换回源代码。**

An`.ipa`是已编译的 iOS 应用程序的存档，包含已编译的可执行文件以及任何资源（图像、属性列表等）。您无法轻松地将编译后的代码翻译回生成它的人类可读的源代码，当然也无法获得定义应用程序构建过程的 Xcode 项目文件。虽然那里有机器代码反汇编程序，但它们只会为您提供原始代码的粗略近似值，并且可能会丢失有价值的信息，例如原始变量名称、注释等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-18T22:37:04.500

实际上，您可以将其解压缩并查看许多可能有用的包含文件。对我来说，我需要查看 .ipa 文件中的 cordova 版本和 cordova 插件版本。

使用 XCode 导出以前的提交后，将 .ipa 文件更改为 .zip。在“有效负载”目录中，右键单击您的应用名称，然后单击`Show Package Contents`并瞧。

要查看 cordova 版本，请导航到 www/cordova.js，您将看到`PLATFORM_VERSION_BUILD_LABEL`

对于插件，检查文件的**最底部**`cordova_plugins.js`

感谢 oxdaily.com 提供有关转换为 zip 文件的提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T05:56:16.480

是的，斯图尔特是对的，我们不能轻易地从其二进制文件中提取代码，逆向工程过程非常难以完成，即使完成它也有很多复杂性，而且代码的形式并不完全相同，更重要的是无法**理解**

# php - PHP函数删除给定html中没有HTML标签的字符串

> ID：15651979
> 
> 赞同：1
> 
> 时间：2013-03-27T04:35:08.847
> 
> 标签：php, html

我有一个html代码：

```
<a href="#">foo</a>bar is dummy string<p>hello</p> 
```

我想要一个输出

```
<a href="#">foo</a><p>hello</p> 
```

我正在搜索 PHP 代码以获得上述结果。仅过滤要输出的 html 嵌入字符串。我知道 strip_tags() 函数将删除 html 标签并仅输出字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:02:21.053

尝试这个

```
$html = <<<_HTML
<!DOCTYPE html>
<html>
<head><title>Test</title></head>
<body>
<a href="#">foo</a>bar is dummy string<p>hello</p>
</body>
</html>
_HTML;

$doc = new DOMDocument();
$doc->loadHTML($html);

$xpath = new DOMXPath($doc);
$textNodes = $xpath->query('/html/body/a/following-sibling::text()[1]');
if ($textNodes->length) {
    $node = $textNodes->item(0);
    $node->parentNode->removeChild($node);
}
echo '<pre>', htmlspecialchars($doc->saveHTML()), '</pre>'; 
```

结果是

```
<!DOCTYPE html>
<html><head><title>Test</title></head><body>
<a href="#">foo</a><p>hello</p>
</body></html> 
```

演示在这里 - [http://codepad.viper-7.com/akDqkj](http://codepad.viper-7.com/akDqkj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:02:34.387

让我们在 $html 中获取您的 html 代码

```
$string = strip_tags($html); 
$final = str_replace($string , "", $html); 
```

它可能会帮助你。有人回答了同样的问题，不幸的是他已经删除了。

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T04:45:26.490

用于`regex`执行此类替换...

# embed - 如何自动启动jw播放器？

> ID：15651981
> 
> 赞同：2
> 
> 时间：2013-03-27T04:35:18.497
> 
> 标签：embed, jwplayer, autostart

这是我的嵌入代码：

```
<embed width="576" height="432" flashvars="&amp;
    file=kgalive&amp;
    streamer=rtmp://5.77.33.107/kga" wmode="opaque" 
    allowscriptaccess="always" allowfullscreen="true"
    quality="high" name="player" id="player" style=""
    src="player.swf" autostart="always" 
    type="application/x-shockwave-flash"/> 
```

它可以工作，但我的播放器在打开网页时不会自动启动。我应该怎么做才能自动启动我的播放器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:43:31.700

基本上：

```
<embed width="576" height="432" flashvars="&amp;
    file=kgalive&amp;
    streamer=rtmp://5.77.33.107/kga" wmode="opaque" 
    allowscriptaccess="always" allowfullscreen="true"
    quality="high" name="player" id="player" style=""
    src="player.swf" autostart="always" 
    type="application/x-shockwave-flash"/> 
```

需要是：

```
<embed width="576" height="432" flashvars="&amp;
    autostart=true&amp;file=kgalive&amp;
    streamer=rtmp://5.77.33.107/kga" wmode="opaque" 
    allowscriptaccess="always" allowfullscreen="true"
    quality="high" name="player" id="player" style=""
    src="player.swf" autostart="always" 
    type="application/x-shockwave-flash"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:40:44.810

我认为应该是

```
autostart="true" 
```

我这样做：

```
<object id="mediaplayer" width="100%" height="100%" type="application/x-shockwave-flash" data="jwplayer/player.swf" bgcolor="#000000" name="mediaplayer" tabindex="0">
  <param name="allowfullscreen" value="true">
  <param name="allowscriptaccess" value="always">
  <param name="seamlesstabbing" value="true">
  <param name="wmode" value="opaque">
  <param name="flashvars" value="netstreambasepath=<URLHERE>&id=mediaplayer&autostart=true&repeat=always&shuffle=false&controlbar.position=none">
</object> 
```

# cassandra - 使用赫克托的 Cassandra 连接池

> ID：15651982
> 
> 赞同：1
> 
> 时间：2013-03-27T04:35:21.513
> 
> 标签：cassandra, hector

如何使用 hector 为 cassandra 创建连接池？有人可以为此举一个简单的例子。我已经搜索了网络，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:08:46.300

Hector 为您处理[连接池](https://github.com/hector-client/hector/wiki/User-Guide#pools-of-pools-per-server)。从他们的[文档中](https://github.com/hector-client/hector/wiki/User-Guide#basic-configuration-and-setup)：

> Hector 中连接池逻辑的基本设计是根据明确标识给 Hector 的 Cassandra 节点的数量创建一个由各个连接池组成的主池。例如，如果我们配置了三个 Cassandra 节点，HConnectionManager 将包含三个单独的连接池——每个节点一个。
> 
> ...
> 
> 如果 localhost:9160 的底层 HConnectionManager 和特定于主机的池不存在，它们都将自动创建。

您还可以通读连接和池设置的所有可能[配置选项](https://github.com/hector-client/hector/wiki/User-Guide#finer-grained-configuration)。

# python - 如何在任何版本的 youtube python API 中使用 OAuth2 令牌

> ID：15651985
> 
> 赞同：0
> 
> 时间：2013-03-27T04:36:03.217
> 
> 标签：python, youtube, oauth-2.0

我正在使用我剥离的一些功能获取 Oauth2 令牌： [https ://code.google.com/p/google-api-python-client/source/browse/#hg%2Foauth2client](https://code.google.com/p/google-api-python-client/source/browse/#hg%2Foauth2client)

我试过了：

```
yt_service              = gdata.youtube.service.YouTubeService()
yt_service.developer_key    = YOUTUBE_DEV_KEY
yt_service.access_token     = FRESH_OAUTH2_ACCESS_TOKEN
yt_service.client_id    = YOUTUBE_OAUTH2_CLIENT_ID
yt_service.email            = YOUTUBE_USER_EMAIL
yt_service.password         = YOUTUBE_USER_PASSWORD
yt_service.source           = YOUTUBE_DEV_SRC
yt_service.ProgrammaticLogin() 
```

但我不确定如何正确接听电话`GetFormUploadToken`或`UpdateVideoEntry`. 以前我只是使用 a`developer_key`并且它正在工作（使用`gdata.youtube.service.YouTubeService()`）。

我也尝试使用这个例子，但它没有很好地评论，文档也没有更好： [https ://code.google.com/p/youtube-api-samples/source/browse/samples/python/ update_video.py](https://code.google.com/p/youtube-api-samples/source/browse/samples/python/update_video.py)

我试着简单地改变 `build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION, http=credentials.authorize(httplib2.Http()))`

至

`build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION, ACCESS_TOKEN=current_access_token)`

但它只是抱怨它不知道是什么`ACCESS_TOKEN`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:09:11.660

我就是这样做的。

```
def _yt_oauth_flow_hack(self, secret_json_str, scope, redirect_uri=None):
    """
    A hacked version of: oauth2client.clientflow_from_clientsecrets
    """
    client_type, client_info = clientsecrets.loads(secret_json_str)
    if client_type in [clientsecrets.TYPE_WEB, clientsecrets.TYPE_INSTALLED]:
        return OAuth2WebServerFlow(
            client_info['client_id'],
            client_info['client_secret'],
            scope,
            redirect_uri=redirect_uri,
            user_agent=None,
            auth_uri=client_info['auth_uri'],
            token_uri=client_info['token_uri']
        )        
def begin_authentication(self):
    '''Starts the authentication process and returns the URL that we have to use to authorize the content
    if we need to authorize it, otherwise will generate the service and return None'''

    credentials = self._storage.get()
    if credentials is None:
        print 'Credentials Not Stored - We Require Fresh Authentication'
        flow = self._yt_oauth_flow_hack(AUTH_JSON, self.scope)
        flow.redirect_uri = OOB_CALLBACK_URN
        return flow.step1_get_authorize_url()
    elif (credentials.invalid or credentials.token_expiry <= (datetime.now() + timedelta(seconds=time.timezone))):
        print 'Credentials are Expired - Going to attempt to refresh them'
        try:
            http = httplib2.Http()
            credentials.refresh(http)
            print 'Success!'
        except AccessTokenRefreshError:
            print 'Unable to refresh credentials - requesting new ones.'
            flow = self._yt_oauth_flow_hack(AUTH_JSON, self.scope)
            flow.redirect_uri = OOB_CALLBACK_URN
            return flow.step1_get_authorize_url()

    print 'Credentials ->', credentials

    http = httplib2.Http()
    http = credentials.authorize(http)
    self.service = build('youtube', 'v3', http=http)
    return None 
```

AUTH_JSON 是我在设置 API 帐户时下载的。存储是其存储的定制版本，可与 postgres 数据库一起使用，但原理仍然相同。

# c#-4.0 - 在dridview中不显示数据

> ID：15651990
> 
> 赞同：0
> 
> 时间：2013-03-27T04:36:29.463
> 
> 标签：c#-4.0, datagridview

![错误快照](../Images/552be5f760dede6fbeeeaff9b7da0ab0.png)

为什么会发生此错误，我的数据源不为空。请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T17:47:58.140

你在哪里调用 GetGrid()？它在 InitializeComponent() 之前调用它吗？它必须在 InitializeComponent() 之后调用；

# asp.net-mvc-4 - 在 mvc4 中用于 SMS 集成的任何好的 Web 服务

> ID：15651996
> 
> 赞同：0
> 
> 时间：2013-03-27T04:36:52.343
> 
> 标签：asp.net-mvc-4, sms, sms-gateway

在 mvc4 中是否有任何用于 SMS 集成的好的 Web 服务？我知道 ozeki，但它不能用作 mvc4 中 SMS 的 web 服务，但还有其他可用 web 服务列表，如 smsgateway 等，这让我很难选择，任何可以使用的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:25:07.780

我听说过关于[Twilio的好消息](http://www.twilio.com)

# c - 为什么价值观相同？

> ID：15651997
> 
> 赞同：0
> 
> 时间：2013-03-27T04:36:59.513
> 
> 标签：c

我无法理解这段代码。我不明白为什么 sx, sa, sy 的值是相同的，意思是 42。我知道它与指针有关。如果有人能解释

```
#include <stdio.h> 

static int sx;
static int sa[100];
static int sy;

int main() {
    int *p;
    for(p=&sx; p <=&sx+200; p++) 
    {
        *p = 42;
    }   
    printf("sx = \t%i\n",sx);
    printf("sa[0] = \t%i\n",sa[0]);
    printf("sa[109] = \t%i\n",sa[109]);
    printf("sy = \t%i\n",sy);

    getchar();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:41:09.170

此代码假设您的静态数据的内存布局如下所示：

```
+----+-----------------------------+----+
| sx | sa .....                    | sy |
+----+-----------------------------+----+ 
```

因此，数组由`sx`和“界定” `sy`，因此使用它们的地址作为边界包括 的所有元素`sa`。在这种情况下，它也使用`&sx + 200`which 可能覆盖`sa`然后更多（请记住，指针算术是缩放的）。

严格来说，这是未定义的行为，您不能依赖它。但是，这就是为什么它适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:39:24.723

您正在编写超出变量范围的内容，因此它是**未定义的行为**。

```
for(p=&sx; p <=&sx+200; p++) 
{
    *p = 42;
} 
```

此代码片段写入超出分配的内存`sx`并导致未定义的行为。注意`p`是指向`sx`并且`sx`只是一个整数而不是数组的指针。循环迭代并写入超出分配给的内存`sx`。

未定义的行为不一定要求程序崩溃，它只是意味着程序的输出可以是任何东西。它可能看起来有效或无效或显示一些奇怪的结果，简单来说任何结果都是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:45:34.450

首先，您在那里覆盖内存。因此，如果您想使用指针进行更改：

```
for(p=&sx; p <=&sx+200; p++) 
```

至：

```
for(p=&sx; p <=&sy; p++) 
```

现在，您正在做的是用值 42 覆盖之间的每个内存位置。碰巧`sx`，并且每个元素都在这些内存地址中。`sy``sx``sy``sa`

顺便说一句，代码对内存安排做出了假设，这在每台计算机中可能都不成立。

# jquery-mobile - 页面加载小部件中的 JQuery Mobile 自定义 HTML

> ID：15651999
> 
> 赞同：1
> 
> 时间：2013-03-27T04:37:23.373
> 
> 标签：jquery-mobile

如何为 JQuery Mobile Web 应用程序的页面加载小部件自定义 HTML？

我尝试了以下方法：

```
$(document).on('mobileinit', function(){
    $.mobile.loader.prototype.options.html = "<span class='ui-bar ui-overlay-c ui-corner-all'><img src='/image/logo.png' /><h2>loading...</h2></span>";
}); 
```

但它仍然显示默认图像。我想要一个全局配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:54:09.380

## 在单页中

[此处提供加载程序](http://view.jquerymobile.com/1.3.0/docs/widgets/loader/)的文档。另请查看[与您非常相关的文档](http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html)。

您应该执行以下操作

```
$(document).ready(function() {
  $.mobile.loading('show', {
    text: 'foo',
    textVisible: true,
    theme: 'z',
    html: "<span class='ui-bar ui-overlay-c ui-corner-all'><img src='http://www.shougun.it/images/loading.gif' /><h2>loading...</h2></span>"
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" rel="stylesheet" />
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<div data-role="page">
  <div data-role="header">
    <h1>header</h1>
  </div>
</div>
```

## 设置为全局

它需要在 belog`<script src=jquery.js>`之前`<script src=jquerymobile.js>`，并且必须在`mobileinit`事件中调用。你在加载 jQuery Mobile js 之前导入了 js 吗？