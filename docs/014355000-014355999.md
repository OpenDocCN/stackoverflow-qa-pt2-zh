# StackOverflow 问答 14355000-14355999

# node.js - 什么 SQLite 与 nodejs 一起使用

> ID：14355004
> 
> 赞同：43
> 
> 时间：2013-01-16T09:27:39.087
> 
> 标签：node.js, sqlite

我正在使用`node.js`. 在那我愿意`SQLite`用作嵌入式数据库。我在网上搜索了`SQLite`npm 模块。我找到了各种模块：

1.  [https://github.com/grumdrig/node-sqlite](https://github.com/grumdrig/node-sqlite)
2.  [https://github.com/orlandov/node-sqlite](https://github.com/orlandov/node-sqlite)
3.  [https://github.com/developmentseed/node-sqlite3](https://github.com/developmentseed/node-sqlite3)

从文档和其他来源中，我了解到 (1) 同步运行，而 (2) 和 (3) 异步运行。所以，我放弃了使用（1）的计划。

现在，我想知道（2）和（3）之间有什么区别，应该首选哪一个？我用谷歌搜索了很多，但找不到太多帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-09T23:46:26.937

使用[https://github.com/mapbox/node-sqlite3](https://github.com/mapbox/node-sqlite3)。它是异步的（几乎是必备的），它是最积极维护的，并且它在 GitHub 上拥有最多的星星。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-24T16:27:18.987

或者，您可以使用 javascript 嵌入式数据库。这样，您只需要在您的应用程序中将数据库声明为依赖项`package.json`即可`require()`。

例如，查看[NeDB](https://github.com/louischatriot/nedb)（我写的）或[nStore](https://github.com/creationix/nstore)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-10-09T04:33:01.463

对于我的架构，同步`better-sqlite3`似乎更好：

[https://www.npmjs.com/package/better-sqlite3](https://www.npmjs.com/package/better-sqlite3)

*   完整的交易支持
*   为性能、效率和安全而生
*   易于使用的同步 API（比异步 API 更快）
*   自定义 SQL 函数支持
*   64 位整数支持（在需要之前不可见）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-22T07:48:31.310

### [用于 Node.js 应用程序的 SQLite 客户端](https://github.com/kriasoft/node-sqlite)/w 内置基于 SQL 的迁移 API

[![NPM 版本](../Images/bece5aba14994f008691a84b5839eec7.png)](https://www.npmjs.com/package/sqlite) [![NPM 下载](../Images/ad07cb2ee53b90b7466cf58331863332.png)](http://npm-stat.com/charts.html?package=sqlite) [![在线聊天](../Images/66982d47df6f89ae8e41d032a3307abf.png)](https://gitter.im/kriasoft/node-sqlite)

```
import express from 'express';
import db from 'sqlite';                                       // <=
import Promise from 'bluebird';

const app = express();
const port = process.env.PORT || 3000;

app.get('/posts', async (req, res, next) => {
  try {
    const posts = await db.all('SELECT * FROM Post LIMIT 10'); // <=
    res.send(posts);
  } catch (err) {
    next(err);
  }
});

Promise.resolve()
  // First, try to open the database
  .then(() => db.open('./database.sqlite', { Promise })        // <=
  // Update db schema to the latest version using SQL-based migrations
  .then(() => db.migrate({ force: 'last' })                    // <=
  // Display error message if something went wrong
  .catch((err) => console.error(err.stack))
  // Finally, launch the Node.js app
  .finally(() => app.listen(port)); 
```

**注意**：上面的示例仅适用于[Node.js](https://nodejs.org/) v6 和更高版本（假设代码中使用[`import`](http://www.2ality.com/2014/09/es6-modules-final.html)的[`async/await`](https://ponyfoo.com/articles/understanding-javascript-async-await)语言特性与[Babel](https://babeljs.io)进行了转换）。对于早期版本的 Node.js，请使用`var db = require('sqlite/legacy');`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T23:39:14.153

Grumdrig 的模块似乎是 Stack Overflow 和其他网站上引用最多的模块。

此外，文档非常好：http: [//github.grumdrig.com/node-sqlite/](http://github.grumdrig.com/node-sqlite/)

我对 Node SQLite 的经验很少，但社区似乎已经选择了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-02T05:32:11.240

我已从[https://github.com/mapbox/node-sqlite3](https://github.com/mapbox/node-sqlite3)切换到[https://github.com/JoshuaWise/better-sqlite3](https://github.com/JoshuaWise/better-sqlite3)。原因之一是 better-sqlite 作者给了我一个彻底的答案，[https://github.com/JoshuaWise/better-sqlite3/issues/181](https://github.com/JoshuaWise/better-sqlite3/issues/181)，关于为什么[https://github.com/JoshuaWise/better-sqlite3#why-我应该使用这个而不是节点-sqlite3](https://github.com/JoshuaWise/better-sqlite3#why-should-i-use-this-instead-of-node-sqlite3)

# sql - SSRS 中的动态 sql 查询（Sql Server Report Server 2012）

> ID：14355010
> 
> 赞同：1
> 
> 时间：2013-01-16T09:27:52.890
> 
> 标签：sql, dynamic, reporting-services

我在 vs2010 中创建了一个名为“ `clients`”的报告，其中显示了具有以下属性的客户端列表：

```
clientID,firstname,lastname,adres,country,birthday 
```

我用数据源和数据集创建了这个报告。在这个数据集中，我创建了一个这样的查询：

```
select firstname, lastname, adres, country, birthday
from clients 
```

这是有效的！

我想添加 2 `optonal parameters`：

```
param_clientID ,param_birthDay 
```

我想仅在填充这些参数的情况下在 where 子句中使用这些参数。

```
where clientID = param_clientID and birthday = param_birthDay 
```

应该有可能填写了clientID，而没有填写生日参数。否则也。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:28:06.137

向您的报告添加（可选）参数非常容易。

首先让你的参数可以为空。

```
select firstname, lastname, adres, country, birthday 
from clients
where (clientID = @clientID or @clientID is null) 
and (birthday = @birthDay or @birthDay is null) 
```

更详细的描述：

*   参数： http: [//msdn.microsoft.com/en-us/library/aa337432 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/aa337432(v=sql.105).aspx)
*   可选参数：[http ://bloggingabout.net/blogs/egiardina/archive/2007/06/26/sql-server-reporting-services-optional-parameters.aspx](http://bloggingabout.net/blogs/egiardina/archive/2007/06/26/sql-server-reporting-services-optional-parameters.aspx)

# jsf - JSF 中的 Web 过滤器

> ID：14355017
> 
> 赞同：5
> 
> 时间：2013-01-16T09:28:07.580
> 
> 标签：jsf, jakarta-ee, servlet-filters

我正在通过引用[此链接来实现网络过滤器](https://stackoverflow.com/tags/servlet-filters/info)

我的代码是

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>project_name</display-name>
    <welcome-file-list>
        <welcome-file>/project_name/faces/jsp/HomePage.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>

    <context-param>
        <param-name>org.richfaces.CONTROL_SKINNING</param-name>
        <param-value>enable</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.LoadScriptStrategy</param-name>
        <param-value>ALL</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.LoadStyleStrategy</param-name>
        <param-value>ALL</param-value>
    </context-param>
    <context-param>
        <param-name>org.ajax4jsf.DEFAULT_EXPIRE</param-name>
        <param-value>2764800</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.ERROR_HANDLING</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>org.ajax4jsf.handleViewExpiredOnClient</param-name>
        <param-value>true</param-value>
    </context-param>

    <filter>
        <display-name>RichFaces Filter</display-name>
        <filter-name>richfaces</filter-name>
        <filter-class>org.ajax4jsf.Filter</filter-class>
        <init-param>
            <param-name>createTempFiles</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>maxRequestSize</param-name>
            <param-value>20000000</param-value>
        </init-param>
        <init-param>
            <param-name>enable-cache</param-name>
            <param-value>true</param-value>
        </init-param>

    </filter>

    <filter>
        <filter-name>loginFilter</filter-name>
        <filter-class>com.common.LoginFilter</filter-class>
    </filter>

     <filter-mapping>
        <filter-name>loginFilter</filter-name>
        <url-pattern>/faces/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>richfaces</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
    </filter-mapping>

    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>Resource Servlet</servlet-name>
        <servlet-class>org.primefaces.resource.ResourceServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Resource Servlet</servlet-name>
        <url-pattern>/primefaces_resource/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

登录过滤器类

```
public class LoginFilter implements Filter {

    @Override
    public void init(FilterConfig config) throws ServletException {
        // If you have any <init-param> in web.xml, then you could get them
        // here by config.getInitParameter("name") and assign it as field.
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        System.out.println("Inside Login Filter");
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
System.out.println("session..."+ session);
        if (session == null || session.getAttribute(IConstants.HAS_USER_ID) == null) {
            response.sendRedirect(request.getContextPath() + "/faces/jsp/login.jsp"); // No logged-in user found, so redirect to login page.
        } else {
            chain.doFilter(req, res); // Logged-in user found, so just continue request.
        }
    }

    @Override
    public void destroy() {
        // If you have assigned any expensive resources as field of
        // this Filter class, then you could clean/close them here.
    }

} 
```

登录成功后设置会话变量

```
FacesContext.getCurrentInstance().getExternalContext()
                .getSessionMap()
                .put(IConstants.HAS_USER_ID, IConstants.HAS_USER_ID); 
```

但我面临的问题是我一直低于日志

```
Inside Login Filter
session...org.apache.catalina.session.StandardSessionFacade@1c134e1 
```

在控制台和页面永远不会重定向到下一页或登录页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T10:42:48.110

这是因为您的过滤器也匹配登录页面上的请求。它基本上是在无限循环中运行，重定向到登录页面。基本上有2个选项：

1.  确保过滤器映射未覆盖登录 URL。将受限制的页面放在 , 等文件夹`/secured/*`中，`/app/*`并将过滤器映射到该 URL 模式，并将登录页面放在外面。

2.  如果当前未请求登录 URL，请检查过滤器。

    ```
    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
        boolean loggedIn = (session != null) ? session.getAttribute(IConstants.HAS_USER_ID) != null : false;
        String loginURL = request.getContextPath() + "/faces/jsp/login.jsp"; 

        if (!loggedIn && !request.getRequestURI().equals(loginURL)) {       
            response.sendRedirect(loginURL);
        } else {
            chain.doFilter(request, response);
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T02:21:35.760

我实现了一个缓存过滤器。这是代码。看看这是否有帮助

在您的 web.xml 中添加以下内容

```
<filter>
    <filter-name>cache</filter-name>
    <filter-class>au.com.webapp.config.CacheFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>cache</filter-name>
    <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

在您的 au.com.webapp.config 包中创建一个类 CacheFilter，如下所示：

```
package au.com.webapp.config;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class CacheFilter implements Filter {
    private static long maxAge = 86400 * 30; // 30 days in seconds

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException {
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        String uri = ((HttpServletRequest) request).getRequestURI();
        if (uri.contains(".js") || uri.contains(".css") || uri.contains(".svg") || uri.contains(".gif")
                || uri.contains(".woff") || uri.contains(".png")) {
            httpResponse.setHeader("Cache-Control", "max-age=" + maxAge);
        }
        chain.doFilter(request, response);
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        System.out.println("Cache Filter started: ");

    }

    @Override
    public void destroy() {
    }
} 
```

# asp.net-mvc - 分析器所需的功能已被另一个应用程序拦截

> ID：14355018
> 
> 赞同：1
> 
> 时间：2013-01-16T09:28:09.187
> 
> 标签：asp.net-mvc, performance, visual-studio, memory, profiling

我正在尝试分析 MVC1 Web 应用程序。在 Visual Studio 2010 Ultimate 中启动探查器的那一刻，我收到此错误消息并且探查器在那之后无法工作。

```
Functionality needed by the profiler has been intercepted by another application... 
```

谷歌搜索相同，指出它通常是防病毒或防火墙问题。

我有迈克菲 (v 4-6-0-2292)。

任何指针？

# android - 未为 Spinner 元素设置背景颜色

> ID：14355021
> 
> 赞同：0
> 
> 时间：2013-01-16T09:28:13.753
> 
> 标签：android, spinner

我有这个静态方法来为 Spinner 条目的背景着色，但它不起作用。知道为什么吗？如果不扩展，您将如何做到这一点`SpinnerAdapter`？

```
public static void colorizeSpinnerElements(final Activity activity, final int id) {
    final Spinner aux = (Spinner) activity.findViewById(id);
    final SpinnerAdapter adapter = aux.getAdapter();
    if (adapter != null) {
        final int num = adapter.getCount();
        for(int i = 0; i < num; i++) {
            adapter.getView(i, null, null).setBackgroundColor(ColorHelper.COLOR_LIST[i]);
        }
    }
} 
```

我认为这可能与我仅在加载时才这样做有关`Spinner`，因此在`getView()`调用刷新显示时它会丢失背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:42:26.217

我认为您需要从**适配器的 getView()**方法中执行相同的操作：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = super.getView(position, convertView, parent);
    v.setBackgroundColor(ColorHelper.COLOR_LIST[position]);
    return v;    
} 
```

**编辑：**

你可以`override`的`getDropDownView`方法。为每个项目调用此方法。

```
@Override
public View getDropDownView(int position, View view, ViewGroup parent) {

   if (view == null) {
       LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

       // expand your list item here
       view = vi.inflate(R.layout.mylistitem, null);
    }
    // get whatever items are in your view
    TextView text = (TextView) view.findViewById(R.id.text);
    ImageView left = (ImageView) view.findViewById(R.id.leftImage);

    // do whatever you want with your item view 

    view.setBackgroundColor(ColorHelper.COLOR_LIST[position]);    
    return(view);
} 
```

# ios - AFNetworking 是否支持块编码下载？

> ID：14355023
> 
> 赞同：2
> 
> 时间：2013-01-16T09:28:20.340
> 
> 标签：ios, nsurlconnection, afnetworking

AFNetworking 是否支持块编码下载？以及如何使用它？一些例子将不胜感激？

# asp.net - 母版页继承网页的css

> ID：14355026
> 
> 赞同：0
> 
> 时间：2013-01-16T09:28:33.683
> 
> 标签：asp.net, css, styles

![网页图片](../Images/7c52d4f0f966e7141149f5e35f3e82f8.png)

蓝色的顶栏来自母版页。它使用 bootstrap.css 文件设置样式。该网页使用 demos.css 进行样式设置。蓝顶栏从 demos.css 继承 css 样式表。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:47:20.560

不包含 demos.css 是最明显的答案，但如果您出于任何原因必须包含它，请为您的主体分配一个 id 并为主体赋予其自己的样式。这将覆盖任何继承的样式。

# ios - iOS 方向问题

> ID：14355028
> 
> 赞同：0
> 
> 时间：2013-01-16T09:28:46.737
> 
> 标签：ios, objective-c, uiwebview, orientation

我有一个简单的 Web 应用程序，我使用本机构建。

我的 MainWindow.xlb 应用程序中充满了本机视图控制器。

在 Native View Controller.mi 中有以下代码：

[http://pastebin.com/xXFc0JCW](http://pastebin.com/xXFc0JCW)

看着乱七八糟的复制粘贴到这里。

我似乎无法理解我哪里出错了，为什么我的应用程序/ UIWebView 总是保持纵向。

我是 iOS 开发的新手。

完整源代码：[https ://www.dropbox.com/s/i9woti5ptecr9n4/Native.zip](https://www.dropbox.com/s/i9woti5ptecr9n4/Native.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:35:05.713

坦率地说，我在您的代码片段中看不到任何问题。然而，最近发生了变化，引入了 iOS6。如果我没记错的话，对于使用当前 SDK 构建的应用程序，将不再调用 shouldRotateToInterfaceOrientation 。取而代之的是，您在 info.plist 中定义支持的界面方向，并可能通过覆盖方法 supportedInterfaceOirentations 来覆盖视图控制器中的该设置，该方法返回整数中的位掩码（多么现代... :)

从文档：

> *处理视图旋转 在 iOS 6 中，您的应用程序支持在应用程序的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。*

如果我在这里错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:58:59.893

现在它起作用了：

NativeAppDelegate.m

```
#import "NativeAppDelegate.h"
#import "NativeViewController.h"

@implementation NativeAppDelegate

@synthesize window;
@synthesize viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after app launch    

    [self.window setRootViewController:viewController];

    return YES;
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end 
```

NativeViewController.m

```
#import "NativeViewController.h"

@implementation NativeViewController

@synthesize webView;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"login" ofType:@"html"];
    NSData *htmlData = [NSData dataWithContentsOfFile:filePath];

    if (htmlData) {
        NSBundle *bundle = [NSBundle mainBundle]; 
        NSString *path = [bundle bundlePath];
        NSString *fullPath = [NSBundle pathForResource:@"login" ofType:@"html" inDirectory:path];
        [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:fullPath]]];
    }
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [webView release];
    [super dealloc];
}

@end 
```

我还在 InterfaceBuilder 的 WebView 中取消选中 ScaleToFill ，否则你必须滚动页面才能看到你的世界。

我删除了定位方法并将 RootviewController 为您的 Window 设置为您的 ViewController。您的窗口没有 RootVieController。

# php - 是否可以在运行时向 PHP 中的类添加特征？

> ID：14355029
> 
> 赞同：19
> 
> 时间：2013-01-16T09:28:47.970
> 
> 标签：php, traits

简单的问题，是否可以在不使用 eval 的情况下在运行时向 php 类动态添加特征？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T09:36:45.153

正如 Glavic 所说，你不能不使用 eval() 或反射黑客（我什至不确定）。

但这不太可能你真的需要。

您可以通过动态类组合（将具有您想要的某些功能的类组合到另一个类中）来实现很多目标。这只是将具有所需功能的类的引用放入托管类中的变量中的问题。

```
class SomeClassWithNeededFunctionality {}

class SomeClassThatNeedsTheFunctionalityOfTheOtherClass {
    private $serviceClass = NULL;

    public function __construct (SomeClassWithNeededFunctionality $serviceClass) {
        $this -> serviceClass = $serviceClass;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:34:50.533

不。

ps 你可以将它们放在独立文件中，并使用 include() 吗？

# azure - Azure Worker Role 性能不一致 - 问题

> ID：14355030
> 
> 赞同：1
> 
> 时间：2013-01-16T09:28:48.237
> 
> 标签：azure, entity-framework-5, azure-sql-database, azure-worker-roles, azure-servicebus-queues

我有带有 ExtraSmall 实例的 Azure Worker Role 和 Web Role。

我正在传递 Service Bus BrokeredMessage 以从 Azure Web 角色更新实体。

我刚刚测试了更新实体，前三次在数据库中反映需要 5 秒。之后，每次更新都需要 30 多秒。不知道为什么 Azure Worker Role 的性能不一致？如果有人知道请分享您的想法。

我正在同步发送和接收消息。

注意：工人角色，我为每次更新连接数据库

代码示例 WorkerRole 类

```
public override void Run()
{
 while (true)
  {
   receivedmsg = CUDClient.Receive();
   UpdateProjectEntity(receivedmsg);
   Thread.Sleep(1000);
  }
}
private void UpdateProjectEntity (BrokeredMessage msg)
{       
  ProjectModel model = msg.GetBody<ProjectModel>();
  //connect federation database
  CrmEntities _db = Azure.ConnectCustomerEntity(model.ShardId);
  //update entities 
  ....
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:28:51.297

一个原因可能是您与 7 个重型实例共享物理计算机。当他们大量工作时，您的实例会变慢。但是，5 秒到 30 秒似乎很多。你能升级到使用自己的实例，再次测试，然后看看性能是否更均匀？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:15:55.083

这基本上是同步接收消息，这就是为什么慢。我转换为异步接收消息，性能非常好。看这里的帖子

[Azure Worker Role 异步接收消息：我应该休眠多长时间？（毫秒）](https://stackoverflow.com/questions/14502891/azure-worker-role-asynchronous-receive-message-how-long-i-should-put-the-sleep)

# sql - 条件内连接

> ID：14355032
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:02.043
> 
> 标签：sql, join, conditional-statements

我有一个如下构建的数据库： 非活动表 - 包括所有已删除\非活动用户 活动表 - 包括所有当前活动用户 主表 - 包括所有用户（活动和非活动）

所有三个表中都存在一些字段（例如用户名），我想从非活动或活动表中获取数据（因为所有表中的数据并不总是相等），所以我想要一个连接将来自活动表或非活动表（根据主表中的 ActiveState 字段）

我的查询非常复杂，但为了简化它，我有一个小例子来解释我的问题：

```
SELECT M.ID,
       A.userName
FROM   MainTbl M

IF M.ActiveState = 'Active'
   THEN 
   INNER JOIN ActiveTbl A ON A.UserID = M.ID
ELSE
    INNER JOIN InactiveTbl A ON A.UserID = M.ID
END
    INNER JOIN SomeTbl S ON S.Field = A.Field 
```

***注意：*** *对于我使用 A 的两个表，原因是我将此表用于选择本身和一些更多的内部连接*

有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:38:02.630

使用 LEFT JOIN 而不是 INNER JOIN，然后是这样的：

```
SELECT CASE WHEN A.ID IS NULL 
            THEN I.userName
            ELSE ActiveTbl.userName 
       END AS userName
FROM   MainTbl M
       LEFT JOIN ActiveTbl A 
                 ON A.UserID = M.ID 
                 AND m.ActiveState = 'Active'
       LEFT JOIN InactiveTbl I
                 ON I.UserID = M.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:43:56.327

```
SELECT CASE M.ActiveState
            WHEN 'Active' THEN A.userName
            ELSE I.userName
       END AS userName
FROM   MainTbl M
       LEFT JOIN ActiveTbl A
            ON  A.UserID = M.ID
       LEFT JOIN InactiveTbl I
            ON  I.UserID = M.ID 
```

# shell - 在 Unix shell 脚本中使用 if 条件时出错

> ID：14355037
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:20.127
> 
> 标签：shell, unix, ksh

我编写了以下 shell 脚本：

```
#!/bin/ksh
main()
{
    echo 'Checking if process is running...'
    if [ [ps -ef|grep "Djava.security.auth.login.config"|grep -v grep|wc -l] != 0 ]; then
            echo "startEventProcessorScript is not running"
            nohup /apps/fasigw/test/bin/startEventProcessor &
    fi

    echo '******************************************************************'
    echo ' Script started successfully '
    echo '******************************************************************'
}
main $* 
```

当我执行上述脚本时，我收到以下错误消息：

```
Checking if process is running...
main[3]: test: ] missing
wc: illegal option -- ]
usage: wc [-c|-m] [-lw] [name ...] 
```

我无法解决这个问题。**startEventProcessor**是路径 /apps/fasigw/test/bin 中的脚本。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:44:49.403

要在您的`if`语句中获取命令的输出，您应该使用[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)，即使用`$(...)`而不是`[..]`。

```
if [ $(ps -ef|grep "Djava.security.auth.login.config"|grep -v grep|wc -l) != 0 ] 
```

请注意，这可以简化为：

```
if [ $(pgrep -cf "Djava.security.auth.login.config") != 0 ] 
```

或者 ：

```
if ps -ef | grep -q "[D]java.security.auth.login.config"; then 
```

（中的括号`"[D]java..."`是经常用来确保 grep 命令不匹配自己的进程的技巧）。

# php - php。使用流或自定义 ftp 包装器从 FTP 下载

> ID：14355039
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:21.697
> 
> 标签：php

我需要在 PHP 中创建自定义 FTP 包装器的帮助。

我用了

```
$h=fopen('ftp://....'); 
```

但这不适用于所有 FTP 服务器（有时主动/被动模式存在问题），我无法用包装器控制它。

我使用来自[http://php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php)的函数，一切正常。我只在使用 PHP FTP 包装器下载时遇到问题。

我需要使用包装器，因为我不想将下载的文件存储到磁盘。我从流中读取文件的一部分，然后输出到用户浏览器。

所以我想在 PHP 中创建自定义 FTP 包装器。最重要的是，如果它基于[http://php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php)中的函数。

我看到那里的例子[http://php.net/manual/en/function.ftp-fget.php](http://php.net/manual/en/function.ftp-fget.php)

```
function ftp_get_contents ($conn_id, $filename, 
//Create temp handler: 
     $tempHandle = fopen('php://temp', 'r+'); 

//Get file from FTP assuming that it exists: 
     ftp_fget($conn_id, $tempHandle, $filename, FTP_ASCII, 0)); 

     //Getting detailed stats to check filesize: 
     $fstats = fstat($tempHandle); 

     return fread($tempHandle, $fstats['size']); 
 } 
```

但这并不好，因为它将完整文件保存到磁盘，并且只有在此之后我才能从本地文件中读取。

您是否知道这样的事情，但允许我从 FTP 服务器读取部分文件，而无需在本地缓存完整文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:37:12.120

我找到了解决方案。

我做

```
$h=popen('wget -q -O - ftp://.....','r'); 
```

它工作正常。但是必须安装 wget。

# smartcard - JavaCard：CLEAR_ON_DESELECT 瞬态的覆盖和限制？

> ID：14355043
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:31.470
> 
> 标签：smartcard, javacard

在 Java Card（我对 Classic 一直到 2.1.1 感兴趣）中，applet 所需的瞬态（RAM）通常在安装时由`makeTransientByteArray()`. 该方法接受一个参数`CLEAR_ON_RESET`或`CLEAR_ON_DESELECT`。后者带有警告

> `CLEAR_ON_DESELECT`仅当创建对象的小程序与当前选定的小程序处于同一上下文中时，才能访问瞬态对象。
> 
> `CLEAR_ON_DESELECT`如果在当前选定的小程序与创建对象的小程序不在同一上下文中时访问瞬态对象，Java Card 运行时环境将抛出 SecurityException 。

我的阅读是`CLEAR_ON_DESELECT`（但不是`CLEAR_ON_RESET`）将允许运行时覆盖两个小程序之间的瞬态（如上所述在安装时分配），只要它们没有同时被选中，这样分配*m* [j]字节的几个小程序将消耗大约 max( *m* [j] ) 瞬态字节，而不是 sum( *m* [j] )。

更新：有人告诉我，至少在某些运行时环境中，覆盖选择性地发生在从不同包分配的瞬态中。但我找不到参考，或对此类规则/机制的精确描述。

问题：这种覆盖机制有时会在运行时实现吗？如果是，什么时候发生？是否有运行时*没有*实现它的卡？如果是的话，除了实验之外，有没有其他方法可以判断，可能是从广告中的 Java Card 版本？

其他问题：引用的限制中的“上下文”到底是什么意思？特别是，一个小程序的另一个实例是否可以使用瞬态，并与[此处](https://stackoverflow.com/a/14257052/903600)`CLEAR_ON_DESELECT`显示的机制分配的实例共享它？注意：我对共享瞬态的内容不感兴趣，只是为了避免两次分配，以解决运行时可能缺少覆盖的问题。

[更新：我在这里](https://forums.oracle.com/forums/thread.jspa?messageID=10795498)问了同样的问题，得到了一个有趣的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:58:34.983

Oracle 没有直接的理由指定`CLEAR_ON_DESELECT`可用于在不同的小程序实例之间共享内存，但如果它不允许这种情况发生，那将是一个非常奇怪的实现。

如果它在任何地方指定，它可能在 Oracle 为实施 Java Card 的公司提供的测试工具中。实际上，Oracle 根本没有指定实际的底层内存模型，如果他们想要对齐数据，则取决于实现。必须支持 Java Card 字节码和 CAP 文件格式，但关于底层实现仅此而已。

至于上下文，来自 VM 规范：

> 在定义小程序的上下文和包之间存在一对一的映射。将上下文视为包的运行时等价物的一种简单方法是，因为 Java 包是编译时构造，并且在运行时没有直接表示。因此，来自同一个包的所有小程序实例将共享相同的上下文。

请注意，这并不意味着`CLEAR_ON_DESELECT`如果以任何方式取消选择小程序，则不会清除数组。这只是关于访问条件。我将不得不找出答案，但我猜如果同一上下文中的另一个小程序使用该数组，它将只能看到清零字节。

但这部分关于`CLEAR_ON_DESELECT`和上下文就是我阅读规范的方式。

# c++ - 确定文本文件中指针的位置

> ID：14355044
> 
> 赞同：1
> 
> 时间：2013-01-16T09:29:38.897
> 
> 标签：c++, pointers, text-files

假设我有一个文本文件

```
ID       Name         A1      B1       C1     D1
1234567  Bob Persie   12.1    33.0     44.0   55.0
7654321  Tom Hard     12.2    13.0     31.0   3.0 
```

我需要附加单词：与单词交谈：汤姆，所以它看起来像这样

```
ID       Name         A1      B1       C1     D1
1234567  Bob Persie   12.1    33.0     44.0   55.0
7654321  Tomtalking Hard     12.2    13.0     31.0   3.0 
```

我知道我需要使用 readt.seekp 函数将指针设置到单词中字母“m”之后的位置：Tom。

我无法确定字母“m”的位置。

readt.seekp(位置, ios::beg);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:38:28.247

你必须重写整个文件，你不能像从文本编辑器那样插入一些文本，你只能覆盖现有的内容并附加到文件的末尾。

一种可能的解决方案可能是逐行读取，按摩，逐行写入临时文件，最后将临时文件重命名为原始文件名。

对于按摩，请更换绳子。所以：

```
source = open(sourcename, read-only)
(temp, tempname) = tempfile(write-only)

for each line in source:
    line.replace("Tom", "Tomtalking")
    temp.write(line)

close(temp)
close(source)
rename(tempname, sourcename) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:39:27.100

逐行读取整个文件 - 例如，进入字符串向量，执行您需要的附加并覆盖文件。这是一种比 seekp 更常见、更简单的方法。

# iphone - iOS 手动增加播放次数、上次播放日期等

> ID：14355046
> 
> 赞同：2
> 
> 时间：2013-01-16T09:29:49.713
> 
> 标签：iphone, ios, objective-c, mpmediaitem

我有一个音乐应用程序，可以播放一小段歌曲。我希望能够增加歌曲的播放次数，更新这些歌曲的最后播放日期等。

我搜索了谷歌和 SDK，找不到任何关于设置这些值的参考，只得到..

有谁知道这是否可能？

编辑：我希望这些数据与 iTunes 中显示的数据同步，而不是存储只有我的应用才能看到的播放计数的本地副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:38:52.163

使用持久数据。IE; 数据库。它不会占用太多内存，但可以让您保存必要的数据。当您播放歌曲时，比较它的键（如 id 或标题）并在数据库中增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:35:44.640

据我所知，iTunes 数据库是只读的

# c# - 根据属性值（2 种形式）打开和取出脏标记

> ID：14355047
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:50.790
> 
> 标签：c#, .net, winforms

这个问题是前一个问题的进一步发展。我正在使用 C# .NET 框架 2.0，Visual Studios 10。我有一个文本编辑器，我想在表单标题中有一个脏标记，在本例中是一个简单的“ *”。如果文本框已更改，则“* ”应出现在标题中。保存文本框后，“*”应该会消失。我尝试了以下事情，但可能不正确： 1 个表单，编辑器，具有保存按钮和文本框

---- 编辑器.cs

---- 函数.cs

一个不同的文件，不是表单，Functions.cs，在保存时被调用，它执行保存（为了保持整洁，表单代码上只有按钮等，另一个文件做脏活）。

--在第二个功能文件中更改 Editor._isDirty 值 --在编辑器文件本身中更改 _isDirty 值 --在编辑器中更改 IsDirty（我无法从功能文件中弄清楚如何做到这一点）

这是相关的代码：

```
 public static bool _isDirty = false;

    public plainTextEditor() 
    {
        InitializeComponent();
        functionsProxy = new Functions();
        IsDirty = false;
    }

    /* Property added to flag Changed _isDirty event */
    public bool IsDirty
    {
        get { return _isDirty; }
        set
        {
            if (_isDirty != value)
            {
                _isDirty = value;
                OnIsDirtyChanged(IsDirty);
            }
        }
    }
    protected void OnIsDirtyChanged(bool _isDirty)
    {
        if (_isDirty == true)
        {
            //textBox1.BackColor = Color.LightCoral;
            this.Text += "*";
        }
        else
        {
            this.Text = "Text Editor";
            //textBox1.BackColor = SystemColors.Window;
        }
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        string newtext = textBox1.Text;
        if (currentText != newtext)
        {
            // This solves the problem of initial text being tagged as changed text
            if (currentText == "")
            {
                //textBox1.BackColor = SystemColors.Window;
                IsDirty = false;
            }
            else
            {
                IsDirty = true;
            }
            currentText = newtext;
        }
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        functionsProxy.doSave(textBox1.Text);
        //_isDirty = false;
        IsDirty = false;
    } 
```

现在，根据我对事件和属性的了解..如果我什至更改 _isDirty 的值，应该调用并更改 OnIsDirty 对吗？无论我在哪里更改 _isDirty 的值，都说它来自不同的形式。无论如何，这就是我想要的.. * 事件的出现或消失取决于 _isDirty 是否发生变化！不知何故，它只是用来标记脏的而不是清除它。

如果可以，请提供帮助，或建议另一种方法（示例代码将是王牌！）；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:58:59.673

您的代码中有几个问题。其中之一是方法中静态成员和参数的混合。我试图更正代码。这是我给你的建议：

```
private bool _isDirty = false;

public plainTextEditor() 
{
    InitializeComponent();
    functionsProxy = new Functions();
    IsDirty = false;
}

/* Property added to flag Changed _isDirty event */
public bool IsDirty
{
    get { return _isDirty; }
    set
    {
        if (_isDirty != value)
        {
            _isDirty = value;
            OnIsDirtyChanged();
        }
    }
}

private void OnIsDirtyChanged()
{
    if (_isDirty == true)
    {
        //textBox1.BackColor = Color.LightCoral;
        this.Text += "*";
    }
    else
    {
        this.Text = "Text Editor";
        //textBox1.BackColor = SystemColors.Window;
    }
}

private void textBox1_TextChanged(object sender, EventArgs e)
{
    string newtext = textBox1.Text;
    if (currentText != newtext)
    {
        // This solves the problem of initial text being tagged as changed text
        if (currentText == "")
        {
            //textBox1.BackColor = SystemColors.Window;
            IsDirty = false;
        }
        else
        {
            IsDirty = true;
        }
        currentText = newtext;
    }
}

private void btnSave_Click(object sender, EventArgs e)
{
    functionsProxy.doSave(textBox1.Text);
    IsDirty = false;
} 
```

将“_isDirty”对您的表单保密。您已经使用属性 IsDirty 公开了脏状态。如果您不希望表单外部的任何代码更改 IsDirty，则将 setter（“set”）设为私有。现在你的代码应该运行了。

# javascript - 从我的构造函数对象创建一个 youtube iframe 视频，这样我就可以创建多个视频

> ID：14355052
> 
> 赞同：4
> 
> 时间：2013-01-16T09:29:55.527
> 
> 标签：javascript, jquery, youtube-api

我正在尝试使用 youtube iframe api 以及我正在处理的构造函数创建一个 youtube 视频，但我遇到了一个绊脚石。目前在我的 Player 函数中，我创建了一些默认属性，然后我将一些新属性传递给我的新对象，以便通过扩展默认属性和新属性来创建播放器。我现在的问题是我不确定我实际上是如何初始化 youtube 视频的？我不确定`player = new YT.Player('player', {`应该去哪里？

这是我正在研究的**JS**和 jsFiddle [http://jsfiddle.net/kyllle/6zuh5/7/](http://jsfiddle.net/kyllle/6zuh5/7/)

```
function Player(options) {  
  var $player = $(options.id);

  var defaults = {
    height: '100',
    width: '200',
    videoId: 'u1zgFlCw8Aw',
    events: {
      'onReady': onPlayerReady

    },
    playerVars: {
      modestbranding: 0,
      controls: 0, //remove controls
      showinfo: 0,
      enablejsapi : 1,
      iv_load_policy: 3
    }
  };

  var combinedOptions = _.extend(defaults, options);
  console.log('Combined Options', combinedOptions);

  return {    
    pause: function () {      
      $player.pauseVideo();    
    },

    seek: function () {       
      //$player.seekTo();          
    },

    destroy: function () {      
      $player.destroy();    
    },

    changeVideo: function () {      
      $player.stopVideo();    
    }  
  }
};

function onPlayerReady() {
  console.log('player fired');
}

var myPlayer = new Player({  
    id: '#divId',
    autoPlay: true,
    videoId: 'asdadads'
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:44:18.860

在函数之后添加一个调用`init`的`changeVideo`函数。然后在实例化 Player 之后，您将在该新实例上调用 init。(`i.e. myPlayer.init()` )

这是我在想的一个例子：我省略了下划线，而是使用了 jQuery 的`$.extend`函数，这样我就不用多管闲事了：

```
<html>
<head>
    <title>Video Player</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function Player(options) {  

        var defaults = {
            height: '100',
            width: '200',
            videoId: 'u1zgFlCw8Aw',
            events: { 'onReady': null},
            playerVars: {
                  modestbranding: 0,
                  controls: 0, //remove controls
                  showinfo: 0,
                  enablejsapi : 1,
                  iv_load_policy: 3
             }
          };

          var combinedOptions = $.extend(defaults, options);
          console.log('Combined Options', combinedOptions);

          return {
            player: null,

            pause: function () {      
                this.player.pauseVideo();    
            },

            seek: function () {       
              //this.player.seekTo();          
            },

            destroy: function () {      
                this.player.destroy();    
            },

            changeVideo: function () {      
                this.player.stopVideo();    
            },

            onPlayerReady: function() {
                this.player.play();
            },

            init: function() {
                this.player = new YT.Player(combinedOptions.id, {
                height: combinedOptions.height,
                width: combinedOptions.width,
                videoId: combinedOptions.videoId,
                events: {
                    'onReady': this.onPlayerReady,
                    'onStateChange': null
                }
                });
            }
             }
        };

        var myPlayer;
        function onYouTubeIframeAPIReady() {
            myPlayer = new Player({  
                id: 'divId',
                autoPlay: true,
                videoId: 'NeGe7lVrXb0'
            });

            myPlayer.init();

        }

        $(document).ready(function() {
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);    
        });

    </script>
</head>
<body>
    <div id="divId"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:46:32.913

Player 类的工作示例，用于创建和控制单独的播放器。

[JSFiddle 示例](http://jsfiddle.net/rFC88/)

HTML：

```
<div id="divId1"></div>
<a href="#" id="play1">Play</a>

<a href="#" id="pause1">Pause</a>

<a href="#" id="stop1">Stop</a>
<br>
<div id="divId2"></div>
<a href="#" id="play2">Play</a>

<a href="#" id="pause2">Pause</a>

<a href="#" id="stop2">Stop</a>

<script>
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script> 
```

Javascript

```
var Player = (function(){
  //private static
  var defaults = {
    height: '100',
    width: '200',
    videoId: 'u1zgFlCw8Aw',
    events: {},
    playerVars: {
      modestbranding: 0,
      controls: 0, //remove controls
      showinfo: 0,
      enablejsapi : 1,
      iv_load_policy: 3
    }
  };

    var constructor = function(options){
        this.options = _.extend(defaults, options);

        this.pause = function(event){
            event.target.pauseVideo()
        }

        if(this.options.autoPlay){
            this.options.events['onReady'] = function(event){
                event.target.playVideo()
            }
        }
        this.player = new YT.Player(this.options.id,this.options)
        //pause on click
        $(this.options.pauseID).bind('click',function(event){
            this.player.pauseVideo()
        }.bind(this))
        //play on click
        $(this.options.playID).bind('click',function(event){
            this.player.playVideo()
        }.bind(this))
        //stop on click
        $(this.options.stopID).bind('click',function(event){
            this.player.stopVideo()
        }.bind(this))
    }

    return constructor;
})() //function(){

$(document).ready(function(){
  var myPlayer = new Player({  
    id: 'divId1',
    pauseID:'#pause1',
    playID:'#play1',
    stopID:'#stop1',
    autoPlay: false,
    videoId: 'oe_mGl1f4xs'
  });

  var myPlayer2 = new Player({  
    id: 'divId2',
    pauseID:'#pause2',
    playID:'#play2',
    stopID:'#stop2',
    autoPlay: false,
    videoId: 'u1zgFlCw8Aw'
  });
}) 
```

创建 Player 类的代码基于[这个问题](https://stackoverflow.com/questions/1114024/constructors-in-javascript-objects)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:37:30.583

将其放置在您希望视频所在的位置：

```
<div width="200" height="100" onclick="loadVideo();"></div> 
```

将它放在页面末尾：

```
<script>
function loadVideo() { // 2\. This code loads the IFrame Player API code asynchronously.
 var tag = document.createElement('script');
 tag.src = "http://www.youtube.com/player_api";
 var firstScriptTag = document.getElementsByTagName('script')[0];
 firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); }
 // func loadVideo
 // 3\. This function creates an <iframe> (and YouTube player)
 // after the API code downloads.
 var player;
 function onYouTubePlayerAPIReady() { player = new YT.Player('player', { height: '100', playerVars: { 'autoplay': 1, rel: 0 }, width: '200', videoId: 'mXtJ9BbeGB4', events: { 'onReady': onPlayerReady } }); }
 // 4\. The API will call this function when the video player is ready.
 function onPlayerReady(event) { event.target.playVideo(); }
</script> 
```

# oracle - 表的模式和所有者

> ID：14355053
> 
> 赞同：1
> 
> 时间：2013-01-16T09:29:55.937
> 
> 标签：oracle, oracle11g, schema

oracle中表的模式和表的所有者是否相同？如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:34:40.180

在 Oracle 中，表的模式和所有者在技术上是相同的。

如果您谈论**架构**，您通常指的是用户拥有的所有对象，但是当您说**用户**时，它通常意味着只有可以连接到数据库的人。但这只是语言使用-再次，技术上**user与****schema**相同。

来自其他数据库的人通常会将**schema**等同于**database**，因为通常所有表都在一个模式中。例如，当与 SQL-Server 人员谈论 Oracle 时，这会使事情变得有些混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:35:04.063

正如[汤姆所说](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11%5FQUESTION%5FID:6162110256950)：

> 您应该将架构视为用户帐户和其中所有对象的集合，作为用于所有意图和目的的架构。

由用户创建的表 - 因此由该用户拥有，`owner`例如`all_tables`- 构成该用户架构的一部分。所以是的，所有者和架构是相同的。

另请参阅[这个较早的问题](https://stackoverflow.com/q/880230/266304)，它引用了同一个 AskTom 帖子，并且还突出显示了这一行：

> 出于所有意图和目的，只需考虑 user = schema = user = schema = 相同的东西

# iphone - 在 iphone 应用中，一边评论一边寻找朋友

> ID：14355054
> 
> 赞同：0
> 
> 时间：2013-01-16T09:29:57.030
> 
> 标签：iphone, objective-c, uitextfield, uitextview

在我的 Iphone 应用程序中，当用户键入符号“@”时，会弹出一个窗口并显示他的所有朋友列表，他可以从中选择任何朋友。

但是现在我的客户需要做一些修改。如果用户输入@，弹出窗口不应该出现，但是当他在@后面输入任何字母时，所有以该字母开头的朋友名字都应该弹出。例如：- 如果用户键入 @p - 弹出窗口将带有所有以字母 P 开头的朋友姓名。

如何做到这一点，我尝试了一些但无法实现（加载视图时我在数组中获取朋友列表）现在我正在使用

```
 - (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {

     if([string isEqualToString:@"@"])
     {
       s=1;

        [UIView beginAnimations:nil context:nil];
       [UIView setAnimationDuration:0.5];
       [frndsView setCenter:CGPointMake(frndsView.center.x, frndsView.center.y-310)];
       [UIView commitAnimations];

     [commentField resignFirstResponder];
      }
     return YES;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:32:10.193

在文本的 textChanged 上使用此代码

```
NSMutableArray *subpredicates = [NSMutableArray array];

    for(NSString *term in arryOfWordsToBeSearched) {
        NSPredicate *p = [NSPredicate predicateWithFormat:@"self contains[cd] %@",term];
        [subpredicates addObject:p];
        }

     NSPredicate *filter = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];
    result = (NSMutableArray*)[arryOfDummyData filteredArrayUsingPredicate: filter]; 
```

结果是一个数组

# ios - 我应该把检查它是否是 iphone 5 的 bool 方法放在哪里？

> ID：14355056
> 
> 赞同：0
> 
> 时间：2013-01-16T09:30:05.473
> 
> 标签：ios, objective-c, cocoa-touch

这是非常基本的东西，但我正在做的事情感觉不对，所以我问专家。

我有一个布尔方法来检查用户是否在 iphone 5

`- (BOOL)isTall { CGRect bounds = [[UIScreen mainScreen] bounds]; CGFloat height = bounds.size.height; CGFloat scale = [[UIScreen mainScreen] scale];
return (([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) && ((height * scale) >= 1136));}`

我将它放在另一个名为 stuff.m 的类中，并将它导入到我正在使用的所有其他类中，并像这样启动它：

`- (void)viewDidLoad { [super viewDidLoad]; DataManager *testMe = [[DataManager alloc]init]; if(test.isTall) NSLog(@"Hey");`

这是正确的方法吗？似乎应该有更好的方法来做到这一点，而无需`testMe`在每个班级中分配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:38:29.633

将它放在实用程序类中。创建一个名为实用程序的类并将其放在该类中并使其成为类函数。

```
+(bool)isIPhone5{ method }; 
```

通过这种方式，您可以在任何地方使用它。甚至实用程序类也可以重用于进一步的项目。并使用它来查看是否加载函数以更改实现或初始化函数（如果有任何初始化更改）

```
[className isIPhone5]; 
```

如果您已导入标头并在 .h 文件中声明，将为您提供结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:33:48.440

使用类成员`+ (BOOL)isTall`并使用`[Stuff isTall]`. 请注意，当此模块仅包含辅助类方法时，您不需要分配它，`- (id)init`也不需要 a。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:37:03.237

您可以在应用程序委托中实现此方法，并将结果作为布尔值存储在 NSUserDefault 中。然后您可以在应用程序的任何位置访问它。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:40:11.757

每个应用程序都有一个名为 AppDelegate 的类，其中包含一个名为：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

} 
```

每当应用程序完成启动时，都会执行此方法。但是您的方法在这里并将 BOOL 存储在 NSUserDefaults 中，如下所示：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:self.isIPhone5 forKey:@"isIPhone5"]; 
```

然后，您可以通过执行以下操作来获取此默认设置的值：

```
self.isIPhone5 = [defaults boolForKey:@"isIPhone5"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T09:43:44.030

你可以在你的`UIApplicationDelegate`

```
#define IS_IPHONE5 ((([UIScreen mainScreen] bounds].size.height-568)?NO:YES) 
```

将其导入您选择的班级。

```
#import "yourAppDelegate.h" 
```

您只需在代码块中执行此操作！

```
if (IS_IPHONE5) 
{
   NSLog(@"iPhone 5");
} 
```

# css - 两个相邻的 div

> ID：14355068
> 
> 赞同：0
> 
> 时间：2013-01-16T09:30:46.203
> 
> 标签：css

我正在使用没有任何 JS 工具包的纯 CSS。问题是，我想让两个单独的 div 并排放置。当第二个 div 中断时，它不应该位于第一个下方。我认为我的 dabblet 更好地解释了这个问题；）重要的是周围的包装 div 总是与包含两个 div 的大小相同。

[http://dabblet.com/gist/4545815](http://dabblet.com/gist/4545815)

我已经尝试过将 div1 和 div2 浮动到左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:39:02.707

*div1, div2 { 显示：表格单元格 }*

是我的问题的解决方案:) 如果只有 div2 具有 table-cell 属性是不够的。分辨率可以在这里找到：http: [//dabblet.com/gist/4545926](http://dabblet.com/gist/4545926)

# php - 在隐藏元素值中以 html 形式执行的内容

> ID：14355069
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:30:49.290
> 
> 标签：php, javascript, html, forms

我有一个 html 形式的隐藏元素

```
<input type="hidden" name="Something" id="Something" value="<?php echo "somevalue";?>"/> 
```

我有一个更改该值的javascript，问题是元素在“somevalue”或javascript值后获得哪个值

在我的js函数中

```
<script>
function some(){
document.getElementById('Something').value="123";
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:34:06.873

当页面被“创建”时，PHP 在服务器上执行。JavaScript 在显示时在浏览器中执行。

因此，JavaScript 能够在*稍后*执行时修改“已创建”页面的内容。因此，假设您调用`some()`，则值为`123`，否则为`somevalue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:33:12.323

这取决于`some()`函数何时执行。如果它在表单提交之前执行，则值为“123”，否则为“somevalue”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:04:52.163

首先执行 PHP，然后执行 javascript。`some()`必须调用javascript函数才能执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:32:57.630

它将从 javascript 中获取值

假设您在代码中的某处调用了 show() 函数...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:33:09.580

如果您`some()`在页面加载后或之后调用 javascript 函数，则该值将是 javascript 值，因为原始值将被覆盖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:36:29.370

执行 PHP 代码以创建实际页面 - 这意味着当用户显示站点时，输入的值具有“somevalue”。但是，一旦页面在用户计算机上，浏览器就可以执行 javascript 并更改文档上的任何内容。

此外，您应该记住，与 PHP 不同，任何 javascript 代码都可以由用户显示、更改或编辑。所以不要使用 javascript 保护您的网站，使用 PHP！

参考： [Javascript和PHP的区别](https://stackoverflow.com/questions/6369313/difference-between-javascript-and-php)

# javascript - 使用节点处理 XML 文件

> ID：14355072
> 
> 赞同：0
> 
> 时间：2013-01-16T09:30:56.530
> 
> 标签：javascript, xml, node.js

我知道我的问题可能是一个“菜鸟”，但我有点迷路了......

我想从 XML 文件中提取“对象”，以便操作它们并在数据库中添加/更新它们。我尝试使用xml2js，我有一个js对象，但之后我不知道如何使用它......

对不起这个noobish问题。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:06:21.687

我喜欢使用[xml-splitter](https://github.com/lindory-project/node-xml-splitter)，它可能对你有一些帮助。

它从 XPath 中拆分 XML，并返回 JSON 对象...

# deployment - http到https重定向，反之亦然

> ID：14355073
> 
> 赞同：0
> 
> 时间：2013-01-16T09:30:59.007
> 
> 标签：deployment, configuration

我面临一个有线问题，如果我将我的网站部署在生产服务器上并假设它可以作为 www.sampledomain.com 访问

在公共互联网上公开它后，我们面临的主要问题之一是 httpRedirection 301 不起作用。

我们有以下页面，只能通过 https 访问 [我们在网站上安装和配置了有效的 SSL 证书]，我们已将网站中的一个页面的标志 RequiresSSL 设置为 true

[http://sampledomain.com/feedback](http://sampledomain.com/feedback)

因此，当通过 http 请求此页面时，服务器会发送 http 301 状态代码，但不会更新响应标头中的位置字段。下面是通过 fiddler 捕获的请求和响应标头。

请求标头

```
GET http://sampledomain.com/feedback  HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: en-US
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: sampledomain.com
Cookie: ASP.NET_SessionId=1qhnx44cyjev5n4dkvdad31l;.ASPXAUTH=FF155AF2A8698A8AC1AB36639BB3C0BF4C4CABCB8FEA1982A02103A137577F5FC9432578B74E60E0F2999E3BCD33A7FDBE61CABAF3B20FC884A13D56BFCB0810202D58C0718D7987F74F26A8288F1276F2AD0046CAA2132E56D35299482EC1B6BCACC114BDB3496AA5BA5DBFCAA05DF65C0D6E406A5B36135079FF7F9C5A34B3 
```

响应头

```
HTTP/1.1 301 OK
Connection: Keep-Alive
Content-Length: 208
Date: Wed, 05 Dec 2012 06:35:39 GMT
Location: http://sampledomain.com/feedback  
Server: PSA's Webserver

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="https://sampledomain.com/feedback  ">here</a>.</h2>
</body></html> 
```

在这里，您看到服务器在 Location 字段中发送回相同的 url，因此浏览器陷入无限循环并且页面未加载。

如果我通过 https 协议请求页面，一切正常。 [https://sampledomain.com/feedback](https://sampledomain.com/feedback)

如果我们通过网络访问网站，自动 http 重定向也可以正常工作，这意味着当我们不通过互联网并通过公司网络访问网站时。

非常感谢帮助解决这个问题

感谢和问候

高拉夫

# cakephp - 多个模型关联到同一个表

> ID：14355076
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:31:13.050
> 
> 标签：cakephp, model-associations

我的情况：我想带一个 HABTM 和一个 hasOne 关系在同一模型中工作。不幸的是，它没有将组长用户信息加载到用户组中。

*   一个用户可以有多个用户组
*   **一个用户组可以有一个组长（用户 ID）**

任何帮助

我有这样的表格布局：

* * *

**用户**

```
id
username 
```

**用户用户组**

```
id
user_id
usergroup_id 
```

**用户组**

```
id
groupname
groupleader (value is user_id) 
```

* * *

**用户组模型**

```
public $hasAndBelongsToMany = array(
    'User' => array(
        'className' => 'Users',
        'foreignKey' => 'usergroup_id',
        'associationForeignKey' => 'user_id'
    )
);

public $hasOne = array(
    'GroupLeader' => array( 'className' => 'User',
    'foreignKey' => 'usergroup_groupleader' )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:40:40.210

控制器中缺少以下内容

```
$this->Staffgroup->recursive = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:49:18.720

添加

```
public $hasAndBelongsToMany = array(
'User' => array(
    'className' => 'Users',
    'joinTable'=>'user_usergroups',
    'foreignKey' => 'usergroup_id',
    'associationForeignKey' => 'user_id'
) 
```

);

现在，当您在用户组控制器中检索信息时，它将包含用户组负责人的信息。

# android - Json没有在其中返回属性

> ID：14355080
> 
> 赞同：1
> 
> 时间：2013-01-16T09:31:27.223
> 
> 标签：android, json, listview, arraylist

我必须从 jason 中提取名称和流 url。我正在获取 jason，但我无法获取流 url。尽管获取频道名称没有问题。

```
public class listviewData extends Activity{

ListView listview;
ArrayList<String> gidarrayobtained;
ArrayList<String> channellist;
ArrayList<String> urlarray;
JSONArray station_list = null; 
EditText inputsearch;
ArrayAdapter<String> adapter;

//ArrayList<String> list;
    public void onCreate(Bundle saved)
{
    super.onCreate(saved);
    setContentView(R.layout.listview);
    inputsearch=(EditText)findViewById(R.id.inputsearch);
    listview=(ListView)findViewById(R.id.listView1);
    Intent in=getIntent();
    ArrayList<String> b=in.getStringArrayListExtra("list");
    gidarrayobtained=in.getStringArrayListExtra("gidarray");
    //System.out.println("nav array"+gidarrayobtained);

    //list=b.getStringArrayList("list");
    adapter=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,b);
    listview.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */

    inputsearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3)
        {
            // When user changed the Text
            listviewData.this.adapter.getFilter().filter(cs);   
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) 
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0)
        {
            // TODO Auto-generated method stub

        }
    });

    listview.setOnItemClickListener(new OnItemClickListener()
    {
    public void onItemClick(AdapterView<?> parent, View view,
              int position, long id)
    {

        ongenreclick(position); 
        //System.out.println("we got"+position);

    }
    });

}

public void ongenreclick(int pos)
{

    String gid=gidarrayobtained.get(pos);
    //System.out.println("here comes the"+gid);
    String num="&num=1000";
    String finalchannellisturl="http://streamfinder.com/api/index.php?api_codekey=UopOfoCpfTujFxwqk5gjyHb38nSY1f45EMPD2gzwKQBe81buHw2e5ZA2i2eJNXk7GiT1chjgCbspwzpefcb3vy5o6uRpjTBbURUZqWdAedw7tyX2yTFXFAy67Pw5NSrG&return_data_format=json&do=genre_search"+"&gid="+gid;
    String premiumapigenre=finalchannellisturl+num;
    System.out.println(premiumapigenre);
    Uri uri=Uri.parse(premiumapigenre);

    JSONParser jParser = new JSONParser();

    JSONObject json = jParser.getJSONFromUrl(uri.toString());
    System.out.println("we are getting the channels"+json);

    //String str=json.toString();
    //int a=str.indexOf("name");

    try

    {
        //System.out.println("Names of  the channels are"+json.getJSONObject("station_list").getJSONObject("10000").get("name"));
        //System.out.println("Finally we got the array"+json.getJSONObject("station_list").getJSONObject("1").getJSONObject("streams").get("stream_url"));
        System.out.println("Finally we got the diffrent array"+json.getJSONObject("station_list").getJSONObject("1").getJSONObject("streams").get("stream_format_string").toString());
        channellist=new ArrayList<String>();

        for(int i=0;i<50;i++)
        {
            try
            {
                channellist.add(json.getJSONObject("station_list").getJSONObject(""+i).get("name").toString());

                urlarray=new ArrayList<String>();
                String st[]=json.toString().split("stream_url");
                for(int j=0;i<st.length;i++)
                    System.out.println("url done by me"+st[j]);
                urlarray.add(json.getJSONObject("station_list").getJSONObject(""+i).getJSONObject("streams").get("stream_url").toString());
                System.out.println("Finally we got the array"+json.getJSONObject("station_list").getJSONObject("1").getJSONObject("streams").get("stream_url"));

            }
            catch(Exception e)
            {

            }
        }

        System.out.println("urlarray is"+urlarray.size());
        Intent intent=new Intent(listviewData.this,channelsOfGenres.class);
        intent.putStringArrayListExtra("channellist",channellist);
        intent.putStringArrayListExtra("urlarray",urlarray);
        listviewData.this.finish();
        startActivity(intent);
    }

    catch(JSONException e1)

    {
        System.out.println(e1.getMessage());
    }

}
} 
```

JSON字符串的形式

```
{"station_list":{"35":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=KRTHFM","sid":"6386","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=KRTHFM"},"number":35,"name":"CBS Radio KRTHFM - Classic Hits"},"36":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=KXKLFM","sid":"6399","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=KXKLFM"},"number":36,"name":"CBS Radio KXKLFM - Classic Hits"},"159":{"www":"www.pointbreakfm.moonfruit.com","sid":"37070","streams":{"test_up":0,"stream_bitrate":"5","stream_format_string":"Shoutcast (AAC+)","now_playing":"","stream_bitrate_string":"128 kbps","stream_format":"20","stream_url":"http:\/\/open.wavepanel.net\/shoutcast\/listen\/f77e2312b0e73a12585975a65de4d236bfce83e2\/1\/ram"},"number":159,"name":"Pointbreak FM"},"33":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=KOOLFM","sid":"6379","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=KOOLFM"},"number":33,"name":"CBS Radio KOOLFM - Classic Hits"},"158":{"www":"radio.xynez.com\/sg\/yes933\/","sid":"35906","streams":{"test_up":0,"stream_bitrate":"1","stream_format_string":"Windows Media","now_playing":"","stream_bitrate_string":"24 kbps","stream_format":"8","stream_url":"http:\/\/radio.xynez.com\/sg\/yes933\/play.asx"},"number":158,"name":"YES 933 FM ???????? Your Entertainment Station"},"34":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=KQJKFM","sid":"6381","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=KQJKFM"},"number":34,"name":"CBS Radio KQJKFM - Jack"},"157":{"www":"radiomobiel.playtheradio.com\/","sid":"35853","streams":{"test_up":0,"stream_bitrate":"0","stream_format_string":"Shoutcast","now_playing":"","stream_bitrate_string":null,"stream_format":"1","stream_url":"http:\/\/listen.radionomy.com\/radiomobiel.m3u"},"number":157,"name":"Radio Mobiel"},"39":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=WCBSFM","sid":"6419","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=WCBSFM"},"number":39,"name":"CBS Radio WCBSFM - Jack"},"156":{"www":"www.wonderlandradio.nl","sid":"35729","streams":{"test_up":0,"stream_bitrate":"5","stream_format_string":"Shoutcast","now_playing":"","stream_bitrate_string":"128 kbps","stream_format":"1","stream_url":"http:\/\/www.server-07.stream-server.nl:8388"},"number":156,"name":"wonderlandradio"},"155":{"www":"kfm.listen2myradio.com","sid":"35449","streams":{"test_up":0,"stream_bitrate":"4","stream_format_string":"Shoutcast","now_playing":"","stream_bitrate_string":"96 kbps","stream_format":"1","stream_url":"http:\/\/kfm.listen2myradio.com"},"number":155,"name":"kfmuae decades of hits"},"37":{"www":"cbsplayer.streamtheworld.com\/?CALLSIGN=KZJKFM","sid":"6408","streams":{"test_up":0,"stream_bitrate":"2","stream_format_string":".MP3\/.M3U Playlist","now_playing":"","stream_bitrate_string":"32 kbps","stream_format":"9","stream_url":"http:\/\/cbsplayer.streamtheworld.com\/?CALLSIGN=KZJKFM"},"number":37,"name":"CBS Radio KZJKFM - Jack"},"154":{"www":"ituneshits.listen2myradio.com","sid":"35399","streams":{"test_up":0,"stream_bitrate":"4","stream_format_string":"Shoutcast","now_playing":"","stream_bitrate_string":"96 kbps","stream_format":"1","stream_url":"ituneshits.listen2myradio.com"},"number":1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:52:54.680

尝试解析 json String 以从中获取`stream_url`：

```
JSONObject json = jParser.getJSONFromUrl(uri.toString());

JSONObject jsonstation_list=json.getJSONObject("station_list");

ArrayList<String> urlarray=new ArrayList<String>();

// get all names from json object
JSONArray jsonarray_names=jsonstation_list.names();
 for(int i=0;i<jsonarray_names.length();i++){
    // get jsonobjects
    JSONObject jsonone=jsonstation_list.getJSONObject(
                                              jsonarray_names.getString(i));

    // get streams
    JSONObject jsonstreams=jsonone.getJSONObject("streams");
    // get stream_url 
    urlarray.add(jsonstreams.getString("stream_url"));
  }

} 
```

# c# - C# - 方法参数可以是变量类型的类吗？

> ID：14355085
> 
> 赞同：0
> 
> 时间：2013-01-16T09:31:43.077
> 
> 标签：c#

我有一个静态方法，其内部代码能够处理多个不同的类。但是我不确定如何在运行时将类放入方法中。

例如，假设我有 ClassA 和 ClassB

我的方法可以与这些类中的任何一个一起使用，因此我希望参数看起来像这样。

```
public static void MyMethod(Object obj)
{
    //...obj is either ClassA or ClassB
    //...do work on variable class
} 
```

但是当我尝试任何一个时，我都会收到无效的参数消息

```
ClassA a = new ClassA();
MyMethod(a);

ClassB b = new ClassB();
MyMethod(b) 
```

甚至可能有一个参数在运行时之前的类型是未知的？

如果是这样，我该怎么做？

如果没有，如何以这种方式利用在许多类上执行某些功能的方法，而不在每个类中重复方法代码？

编辑 - 我已经编辑了上面的内容，因为我的代码确实传递了一个类的实例，而不仅仅是类名。但是我仍然收到 Invalid argument 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:34:02.063

假设`ClassA`是类型名称，那么该语法无效；您必须传入类型的*实例*或类型的实例`Type`：

```
MyMethod(new ClassA()); 
```

或者

```
MyMethod(typeof(ClassA)); 
```

对于后一种情况，您还可以考虑重构以使用泛型：

```
MyMethod<ClassA>(); 
```

> 甚至可能有一个参数在运行时之前的类型是未知的？

绝对地; `object`会很好，但你需要给那个参数一个有效的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:35:49.993

您需要传递该类的实例（对象）。尝试：

```
MyMethod(new ClassA());
MyMethod(new ClassB()); 
```

我建议`overloading`使用 MyMethod，例如：

```
public void MyMethod(ClassA a) { ... }
punlic void MyMethod(ClassB b) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:37:37.107

实际上错误就在这里-

```
public static void MyMethod(Object obj) 
```

一旦我将参数更改如下：

```
public static void MyMethod(object obj) 
```

它工作得很好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:34:14.770

您正在传递一个类型，而不是一个类型的实例。

考虑一下这个： -

```
var test = new ClassA();
MyMethod(test); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:38:27.707

你应该按照理查德的建议重载`MyMethod`。

如果您仍想只使用一种方法定义，则可以使用以下内容：

```
public static void UnknownArgumentsMethod2(params object[] list)
{
    foreach (object o in list)
    {
        if (o.GetType() == typeof(int))
        {
            Console.WriteLine("This is an integer: " + (int)o);
        }
        else if (o.GetType() == typeof(ClassA))
        {
            Console.WriteLine("This is an object of ClassA");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T09:45:12.753

如果 ClassA 和 ClassB 具有相同的函数签名，请考虑使用接口。如果实现也相同，则在基本抽象类中实现它们，并在需要时在继承类中覆盖它们。

```
interface IMyInterface
{
    void MethodX();
}

abstract class ClassBase: IMyInterface
{
    public virtual void MethodX()
    {
        Console.WriteLine("MethodX from base class");
    }
}

// this will use base class implementation of MethodX
class ClassA : ClassBase
{
}

class ClassB : Classbase
{
    public void MethodX()
    {
         Console.WriteLine("MethodX from ClassB");
    }
}

class Foo
{
    public void MyMethod(IMyInterface obj)
    {
        obj.MethodX();
    }
}

Foo f = new Foo();

IMyInterface ca = new ClassA();
f.MyMethod(ca);  // This Print MethodX from ClassA, in this case BaseClass

IMyInterface cb = new ClassB();
f.MyMethod(cb);  // This Print MethodX from ClassB 
```

# java - 多个组件的方法无效

> ID：14355086
> 
> 赞同：0
> 
> 时间：2013-01-16T09:31:46.643
> 
> 标签：java, swing, casting, components, jlabel

代码已大大简化，仅突出显示问题。我也不确定这是否是解决此问题的最佳方法。

我正在尝试制作一个可以具有任何单个摆动组件和一组通用方法来编辑组件的对象。在这种情况下，如果组件是 JLabel 并返回是否成功，则具有设置组件文本的方法。

```
package table;

import java.awt.Component;

public class CompTest
{
    private Component comp;
    public CompTest(Component C)
    {
        comp=C;
    }

    public boolean setText(String S)
    {
        if(comp instanceof javax.swing.JLabel)
        {
            comp.setText(S); //error
            return true;
        }
        return false;
    }
} 
```

该对象的创建方式类似于；

```
...
CompTest comp1=new CompTest(new javax.swing.JLabel());
... 
```

我正在使用 Netbeans IDE 7.2，并在包含“//error”的行（在第一个代码块中）给我一个错误；

```
cannot find symbol
 symbol: method setText(String)
 location: variable comp of type Component 
```

我该如何解决这个问题，如果没有（我怀疑）我如何让 Netbeans 玩得很好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:33:31.943

投射到`JLabel`

```
((javax.swing.JLabel)comp).setText(S); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T09:34:29.273

该类`Component`没有名为 的方法`setText`。

您必须`comp`先转换为 JLabel，然后才能调用该方法，例如：

```
((javax.swing.JLabel)comp).setText(S); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:35:09.840

因为 `comp.setText(S); //error`不可用

尝试`comp.setName()`

# jquery - JQuery Mobile：“返回”链接不保存表单信息

> ID：14355090
> 
> 赞同：0
> 
> 时间：2013-01-16T09:31:56.280
> 
> 标签：jquery, caching, dom, jquery-mobile

所以我有这个表单，它通过 Ajax 调用多个页面来处理。

在第二页上，我有一个带有`data-rel="back"`属性的链接，这个链接应该重新显示第一页。

无论有没有`data-dom-cache="true"`第一页，该页面都不会被缓存，单击此链接将触发 Ajax 请求，因此我的所有表单数据都将丢失。

有没有办法强制这个页面在点击后退按钮时保持缓存和重新显示而没有太多的黑客攻击？

# scala - Scala：数组和类型擦除

> ID：14355092
> 
> 赞同：11
> 
> 时间：2013-01-16T09:31:56.793
> 
> 标签：scala, type-erasure, overloading

我想编写如下重载函数：

```
case class A[T](t: T)
def f[T](t: T) = println("normal type")
def f[T](a: A[T]) = println("A type") 
```

结果如我所料：

> f(5) => 普通型
> f(A(5)) => A 型

到现在为止还挺好。但问题是同样的事情不适用于数组：

```
def f[T](t: T) = println("normal type")
def f[T](a: Array[T]) = println("Array type") 
```

现在编译器抱怨：

> 双重定义：第 14 行的方法 f:[T](t: Array[T])Unit 和方法 f:[T](t: T)Unit 在擦除后具有相同的类型： (t: java.lang.Object)Unit

我认为类型擦除后第二个函数的签名应该是 (a: Array[Object])Unit 而不是 (t: Object)Unit，所以它们不应该相互冲突。我在这里想念什么？

如果我做错了什么，那么写 f 的正确方法是什么，以便根据参数的类型调用正确的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T13:02:24.090

这在 Java 中从来都不是问题，因为它不支持泛型中的原始类型。因此，以下代码在 Java 中是相当合法的：

```
public static <T> void f(T t){out.println("normal type");}
public static <T> void f(T[] a){out.println("Array type");} 
```

另一方面，Scala 支持所有类型的泛型。尽管 Scala 语言没有原语，但生成的字节码将它们用于 Int、Float、Char 和 Boolean 等类型。它使 Java 代码和 Scala 代码有所不同。Java 代码不接受`int[]`作为数组，因为`int`它不是`java.lang.Object`. 所以Java可以将这些方法参数类型擦除为`Object`和`Object[]`。（这意味着在 JVM 上。`Ljava/lang/Object;`）`[Ljava/lang/Object;`

另一方面，您的 Scala 代码处理所有数组，包括`Array[Int]`、`Array[Float]`、`Array[Char]`等`Array[Boolean]`。这些数组是（或可以是）原始类型的数组。它们不能被强制转换到JVM 级别`Array[Object]`或`Array[anything else]`在 JVM 级别上。`Array[Int]`和有一个超类型`Array[Char]`：它是`java.lang.Object`。它是您可能希望拥有的更通用的超类型。

为了支持这些陈述，我编写了一个不太通用的方法 f 的代码：

```
def f[T](t: T) = println("normal type")
def f[T <: AnyRef](a: Array[T]) = println("Array type") 
```

此变体的工作方式类似于 Java 代码。这意味着，不支持原语数组。但是这个小改动足以让它编译。另一方面，由于类型擦除的原因，无法编译以下代码：

```
def f[T](t: T) = println("normal type")
def f[T <: AnyVal](a: Array[T]) = println("Array type") 
```

添加@specialized 并不能解决问题，因为生成了一个泛型方法：

```
def f[T](t: T) = println("normal type")
def f[@specialized T <: AnyVal](a: Array[T]) = println("Array type") 
```

我希望@specialized 可能已经解决了这个问题（在某些情况下），但编译器目前不支持它。但我不认为这将是 scalac 的高优先级增强。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T09:51:30.580

> 我认为类型擦除后第二个函数的签名应该是 (a: Array[Object])Unit 而不是 (t: Object)Unit，所以它们不应该相互冲突。我在这里想念什么？

擦除正是意味着您丢失了有关泛型类的类型参数的任何信息，并且仅获得原始类型。所以签名`def f[T](a: Array[T])`不能是`def f[T](a: Array[Object])`因为你还有一个类型参数（`Object`）。根据经验，您只需删除类型参数即可获取擦除类型，这将为我们提供`def f[T](a: Array)`. 这适用于所有其他泛型类，但数组在 JVM 上是特殊的，~~特别是它们的擦除很简单`Object`（没有`array`原始类型）。因此，`f`后擦除的签名确实是`def f[T](a: Object)`。~~ **[更新，我错了]**实际上在检查了java规范之后，我似乎完全错了。规范说

> 数组类型 T[] 的擦除是 |T|[]

`|T|`的擦除在哪里`T`。所以，数组确实被特殊对待，但奇怪的是，虽然类型参数确实被删除了，但类型被标记为 T 的数组，而不仅仅是 T。这意味着`Array[Int]`，在擦除之后仍然是`Array[Int]`。但`Array[T]`不同的是：`T`是泛型方法的类型参数`f`。为了能够通用地处理任何类型的数组，scala 没有其他选择，只能`Array[T]`变成`Object`（顺便说一下，我想 Java 也是这样做的）。这是因为正如我上面所说，没有原始类型这样的东西`Array`，所以它必须是`Object`。

我会试着换一种说法。通常，在编译带有 type 参数的泛型方法时`MyGenericClass[T]`，仅删除类型这一事实`MyGenericClass`就可以（在 JVM 级别）传递 的任何实例`MyGenericClass`，例如`MyGenericClass[Int]`和`MyGenericClass[Float]`，因为它们在运行时实际上都是相同的。但是，这不适用于数组：`Array[Int]`是与 完全无关的类型`Array[Float]`，并且它们不会擦除为常见的`Array`原始类型。它们最不常见的类型是`Object`，因此当对数组进行一般处理时，这是在幕后操纵的（每次编译器都无法静态知道元素的类型）。

**更新 2**：v6ak 的回答添加了一些有用的信息：Java 不支持泛型中的原始类型。所以 in `Array[T]`,`T`一定是（在 Java 中，但不是在 Scala 中）的子类，`Object`因此它的擦除`Array[Object]`完全有意义，不像在 Scala 中`T`，例如可以是原始类型`Int`，这绝对不是`Object`（又名`AnyRef`）的子类. 为了与 Java 处于相同的情况，我们可以`T`用一个上限进行约束，果然，现在它编译得很好：

```
def f[T](t: T) = println("normal type")
def f[T<:AnyRef](a: Array[T]) = println("Array type") // no conflict anymore 
```

至于如何解决这个问题，一个常见的解决方案是添加一个虚拟参数。因为您当然不想在每次调用时显式传递一个虚拟值，所以您可以给它一个虚拟默认值，或者使用编译器总是会隐式找到的隐式参数（例如在 中`dummyImplicit`找到的`Predef`）：

```
def f[T](a: Array[T], dummy: Int = 0)
// or:
def f[T](a: Array[T])(implicit dummy: DummyImplicit)
// or:
def f[T:ClassManifest](a: Array[T]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T09:41:01.903

[Scala 2.9] 一种解决方案是使用隐式参数，这些参数自然地修改方法的签名，使它们不会发生冲突。

```
case class A()

def f[T](t: T) = println("normal type")
def f[T : Manifest](a: Array[T]) = println("Array type")

f(A())        // normal type
f(Array(A())) // Array type 
```

`T : Manifest`是第二个参数列表的语法糖`(implicit mf: Manifest[T])`。

不幸的是，我不知道为什么`Array[T]`会被删除，`Object`而不是`Array[Object]`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T09:43:57.737

要克服 scala 中的类型擦除，您可以添加一个隐式参数，该参数将为您提供[Manifest](http://www.scala-lang.org/api/current/index.html#scala.reflect.Manifest) (scala 2.9.*) 或[TypeTag](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.api.TypeTags) (scala 2.10)，然后您可以获得有关类型的所有信息，如下所示：

> def f[T](t: T)(隐式清单：Manifest[T])

您可以检查 m 是否是 Array 等的实例。

# java - Android JNI ThrowNew 找不到构造函数

> ID：14355094
> 
> 赞同：0
> 
> 时间：2013-01-16T09:32:00.020
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试从 JNI 中引发异常，但 Activity 因以下 logcat 错误而崩溃：

```
WARNING: exception class 'Lthis/is/package/A$B;' missing constructor (msg='' kind=0
java.lang.RuntimeException: re-throw on exception class missing constructor 
```

我的代码与此类似：

在 JAVA 中：

```
package this.is.package;
public class A {
    public class B extends Exception {
        public B () { super (); }
        public B ( String s ) { super ( s ); }
        public B ( Throwable t ) { super ( t ); }
        public B ( String s, Throwable t ) { super ( s, t ); }
    }
} 
```

在 JNI 中：

```
(*env)->ThrowNew ( env, (*env)->FindClass ( "this/is/package/A$B" ), "" ); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T07:39:14.993

当一个 java 类在另一个类中定义时，它的构造函数将自动附加隐含的参数，例如，父类实例。

要解决这个问题，只需在`"static"`B 类中添加标识符/关键字：

例如 `public static class B extends Exception`

# wpf - 模板和 ItemsSource 属性中的 wpf 绑定

> ID：14355103
> 
> 赞同：0
> 
> 时间：2013-01-16T09:32:48.197
> 
> 标签：wpf, binding, controltemplate

我将 DataGrid 的 ItemsSource 属性绑定到我的 ViewModel 的属性！

```
<DataGrid ItemsSource="{Binding Path=ExcelData}" ColumnHeaderStyle="{DynamicResource ColumnHeaderStyle}" Grid.Row="1" Margin="0 10 0 10" Visibility="{Binding DisplayGridView, Converter={StaticResource booltovisibility}}" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserSortColumns="False" /> 
```

如您所见，DataGrid 有一个特殊的标题模板。

```
<Style x:Key="ColumnHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Background" Value="{x:Static pm:MetroColors.FeatureBrush}" />
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DataGridColumnHeader">
                    <Border BorderThickness="2" CornerRadius="5" Background="{x:Static pm:MetroColors.FeatureBrush}" BorderBrush="{x:Static pm:MetroColors.FeatureBrush}">
                        <StackPanel>
                            <ComboBox ItemsSource="{Binding ComboDataSource}" DisplayMemberPath="Text" SelectedValuePath="Name" ext:ComboBoxExtensions.ComboBoxName="{TemplateBinding Content}" SelectionChanged="ComboBox_SelectionChanged" />
                            <Label Content="{TemplateBinding  Content}" />
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

问题：组合框未填充。

我有这个输出：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'ComboDataSource' property not found on 'object' ''String' (HashCode=752763509)'. BindingExpression:Path=ComboDataSource; DataItem='String' (HashCode=752763509); target element is 'ComboBox' (Name=''); target property is 'ItemsSource' (type 'IEnumerable') 
```

我同意！绑定到列标题的对象上没有名为 ComboDataSource 的属性。

如何将我的组合框绑定到不同的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:42:13.187

您可以通过遍历树找到另一个合适的源，因为您可以像这样使用带有 FindAncestor 的 RelativeSource 标记

```
ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=DataContext.ComboDataSource}" 
```

这当然意味着`DataGrid`在 的祖先中有一个`ComboBox`并且 DataGrids`DataContext`已设置并且它包含一个名为 的属性`ComboDataSource`。

我喜欢组合框中静态数据的另一个解决方案是为绑定设置一个新源

```
ItemsSource = "{Binding Source={x:Static my:StaticData.MyEntries}}" 
```

如果您使用单例管理器，您可以这样做

```
ItemsSource = "{Binding Source={x:Static my:StaticData.Instance}, Path=MyEntries}" 
```

最后你可以使用 DataObjectProvider，虽然我自己从来没有真正使用过它，但这[应该](http://www.zagstudio.com/blog/449#.UPZ1gFcsuHE)解释你可以用它做什么。

# php - 使用 jquery 提交表单不起作用

> ID：14355110
> 
> 赞同：-2
> 
> 时间：2013-01-16T09:33:27.890
> 
> 标签：php, jquery, html

在表单提交中，我正在使用 jquery 进行操作

这是我的 HTML 代码

```
<form name="frmSearchTops" id="frmSearchTops" method="post" onsubmit="searchitem();">
        <select  name="cboCityNameRes" id="cboCityNameRes">
          <option value=''>City</option>
             {foreach from= $arritemCities item=foo}                      
               {if $smarty.post.hdnCityName eq $foo}                                
                  <option value="{$foo}" selected="selected">{$foo}</option>          
               {else}    
                <option value="{$foo}" {if $foo eq 'City'} selected="selected"{/if}>
                     {$foo}
                </option>
               {/if}    
             {/foreach}    
        </select>
    <select name="cboMaterial" id="cboMaterial">
      <option value="">Material</option>
      <option value="CT">Cotton</option>
      <option value="SL">Silk</option>
    </select>
     <input name="btnSearch" type="button" value="Search" id="btnSearch"/>       
 </form> 
```

jQuery代码

```
<script type="text/javascript">
 function searchitem()
 {
    var strCity = $('#cboCityNameRes').val();
    $("#frmSearchTops").attr("action", "/womens-tops-" + strCity + ".php");
    $("#frmSearchTops").submit();
 }
 </script> 
```

在这里，我正在对一个虚拟链接 womens-tops-chennai.php 采取行动。在控制器中，它将重定向到实际页面。但对我来说它不起作用。我可以这样提交吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:38:28.043

将您的按钮更改为提交按钮。您有一个输入类型`button`，默认情况下不会提交表单。这就是您的表单不提交的原因。

```
<input name="btnSearch" type="submit" value="Search" id="btnSearch"/> 
```

使用提交按钮，您无需调用`.submit()`，因为当您的`onsubmit`事件处理程序完成时，这将自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:37:43.410

您正在尝试使用`button`无法提交表单的类型提交表单，因此请使用 onclick 事件调用该函数，并且您的脚本具有提交表单的代码

```
<input name="btnSearch" type="button" value="Search" id="btnSearch" onclick='searchitem();'/> 
```

## [工作演示](http://jsbin.com/obasoj/1/)

# module - 模块参数权限

> ID：14355114
> 
> 赞同：2
> 
> 时间：2013-01-16T09:33:41.237
> 
> 标签：module, kernel, kernel-module

我是内核编程的新手。我在浏览时`module_param`，被权限值0弄糊涂了。解释说它不会在sysfs中获得条目，而其他喜欢的`S_IRUGO`会获得条目。我无法理解这个概念。

perm 值 0 表示什么？我们什么时候需要 sysfs 条目？那有什么需要？

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T22:22:30.820

您可以通过某些方式将模块参数传递给内核模块。假设一个内核模块`foo`的参数名为`bar`：

*   使用可以在引导加载程序配置中提供的内核命令行。要查看当前引导的命令行，请运行`cat /proc/cmdline`. 示例输出：`BOOT_IMAGE=/vmlinuz root=/dev/sda1 foo.bar=some-value`
*   `insmod`使用or加载内核模块时`modprobe`: `modprobe foo bar=some-value`。
*   加载模块时，您通常可以在 中看到找到`bar`模块`foo`的参数`/sys/module/foo/parameters/bar`。

权限值`0`阻止创建 sysfs 条目（上面的第三个项目符号）。内核代码中的一个示例用法是允许启用调试而不在 sysfs 中公开此参数。

可读/可写模块参数的示例是`acpi`. 它允许您动态设置应生成的调试信息。可`acpi.debug_level`用于内核命令行或`/sys/module/acpi/parameters/debug_level`sysfs 条目。

# nsview - NSUSerNotification 的自定义视图

> ID：14355115
> 
> 赞同：1
> 
> 时间：2013-01-16T09:33:44.213
> 
> 标签：nsview, nswindow, nsusernotification

有没有办法在 Mac OS X 中将自定义视图或窗口显示为 NSUserNotification？我想显示附加信息，例如图像，据我所知，我无法使用标准 NSUserNotification 来做到这一点。如果做不到这一点，有没有办法简单地将通知添加到列表中并显示我自己的弹出窗口？

在此先感谢，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T22:04:27.993

您不能将自定义视图或自定义窗口显示为 NSUserNotification。可以提供帮助的第三方工具是[Growl SDK](http://growl.info/downloads)。如果你想坚持使用 NSUserNotification，从 OS X 10.9 开始，有一个新的属性*[contentImage](https://developer.apple.com/library/prerelease/mac/documentation/Foundation/Reference/NSUserNotification_Class/index.html#//apple_ref/occ/instp/NSUserNotification/contentImage)*可以设置为在通知中显示自定义图像，例如：

![NSUserNotification 中的自定义图像](../Images/5b92ff1305ce53dc7e0988ea52378cb4.png)

NSUserNotifications 似乎也有一些新的交互可能性，它们也没有在类参考中正确记录，但也在 Foundation Release Notes 中进行了描述。您可以检查我尚未测试的新 * responsePlaceholder* 属性。

# php - 将所有行放入数组 PHP

> ID：14355118
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:33:55.580
> 
> 标签：php

美好的第一天，

这个 php 语句似乎只带回了表中的一行。我将如何修改它以使其恢复所有行？

```
while($row = $result->fetch_array())

  {

$array = array("UserID" => $row['UserID'], "runDate" => $row['runDate'],"firstName" => $row['firstName'], "Time" => $row['Time'], "Distance" => $row['Distance']);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:34:55.610

改变

```
$array = array(/** */); 
```

到

```
$array[] = array(/** */); 
```

就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T09:36:24.520

我会使用：

```
while($row = $result->fetch_array()){

   $array[] = $row;

} 
```

通过使用该`$row`变量，它使您的数组键与数据库列名相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:36:37.983

这应该可以工作（虽然我没有测试过）：

```
$all_rows = array();
while($row = $result->fetch_array())
{
  $all_rows[] = array("UserID" => $row['UserID'], "runDate" => $row['runDate'],"firstName" => $row['firstName'], "Time" => $row['Time'], "Distance" => $row['Distance']);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:41:40.377

试试这个 ：

```
foreach($result->fetch_array() as $row)

{
    $array["UserID"][] = $row['UserID'];
    $array["runDate"][] = $row['runDate'];
    $array["firstName"][] = $row['firstName'];
    $array["Time"][] = $row['Time'];
    $array["Distance"][] = $row['Distance'];
} 
```

然后检查一下：

```
var_dump($array); 
```

# java - 关闭的套接字，java.net.SocketException：套接字关闭

> ID：14355119
> 
> 赞同：0
> 
> 时间：2013-01-16T09:33:57.720
> 
> 标签：java, jakarta-ee

我正在开发一个允许用户上传文件的应用程序。系统执行一个线程来对该文件做一些事情。当系统完成对文件的处理后，它允许用户下载包含进程详细信息的文件。没有问题，但是如果您反复这样做，系统会崩溃并出现异常。

这是堆栈跟踪：

```
java.io.IOException: Stream closed
at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
at java.io.BufferedInputStream.read(BufferedInputStream.java:241)
at org.postgresql.core.PGStream.ReceiveChar(PGStream.java:166)
at org.postgresql.core.QueryExecutor.executeV3(QueryExecutor.java:128)
at org.postgresql.core.QueryExecutor.execute(QueryExecutor.java:101)
at org.postgresql.core.QueryExecutor.execute(QueryExecutor.java:43)
at org.postgresql.jdbc1.AbstractJdbc1Statement.execute(AbstractJdbc1Statement.java:515)
at org.postgresql.jdbc1.AbstractJdbc1Statement.execute(AbstractJdbc1Statement.java:296)
at com.hinet.utils.db.Db.modify(Bdd.java:143)
at com.hinet.gus.service.LogService.insert(LogService.java:332)
at com.hinet.gus.service.LogService.logFile(LogService.java:441)
at com.hinet.gus.service.upload.UploadExternColectiveFile.execute(UploadExternColectiveFile.java:60)
at com.hinet.gus.service.utils.ThreadExterns.run(ThreadExterns.java:41) 
```

你可以帮我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:38:17.553

这意味着服务器端出现问题并且连接已关闭。（可能是服务器端异常？？）

检查您的服务器日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:42:43.733

此异常通常意味着连接被突然关闭。通常是因为客户端浏览器在发送完整响应之前关闭了连接。

# c - 链表删除并返回第一个元素

> ID：14355123
> 
> 赞同：0
> 
> 时间：2013-01-16T09:34:10.423
> 
> 标签：c, list, loops, linked-list, element

我正在尝试使用 C 解析 shell 脚本中的命令。我目前已经设置了链表，但我无法正确删除和返回第一个元素。当我尝试获取第一个元素时，它可以正常工作一次，但之后它会卡住并进入无限循环，我不明白为什么。提前感谢您的帮助。这是我的代码：

```
 enum command_type
       {
         AND_COMMAND,         // A && B
         SEQUENCE_COMMAND,    // A ; B
         OR_COMMAND,          // A || B
         PIPE_COMMAND,        // A | B
         SIMPLE_COMMAND,      // a simple command
         SUBSHELL_COMMAND,    // ( A )
       };

     // Data associated with a command.
     struct command
     {
       enum command_type type;

       // Exit status, or -1 if not known (e.g., because it has not exited yet).
       int status;

       // I/O redirections, or null if none.
       char *input;
       char *output;

       union
       {
         // for AND_COMMAND, SEQUENCE_COMMAND, OR_COMMAND, PIPE_COMMAND:
                  struct command *command[2];

         // for SIMPLE_COMMAND:
         char **word;

         // for SUBSHELL_COMMAND:
         struct command *subshell_command;
       } u;
     };

     typedef struct command_stream *command_stream_t;
     typedef struct command *command_t;

     struct command_stream
     {
        command_t command_stream;
        command_stream_t next;
     }

     command_t
     read_command_stream(command_stream_t s)
     {
        if(s)
        {
           command_t comm = s->command;
           s=s->next;
           return comm;
        }
        return NULL;
     }

     void printList(command_stream_t head)
     { 
        command_t command;
        while((command = read_command_stream(head)))
        { 
           //print_command is a function that takes in a command_t and then prints the    
           //command in a nice format.
           print_command(head->command);
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:40:31.127

在此函数中，您正在修改指针的*本地副本*（不是您传入的主指针），因此您的`head`指针永远不会移动。

```
 command_t
 read_command_stream(command_stream_t s)
 {
    if(s)
    {
       command_t comm = s->command;
       s=s->next;
       return comm;
    }
    return NULL;
 } 
```

你需要改变这个函数来接受一个*指针到指针*，如果你不理解这个概念，我建议一本好书（或教程）会让你开始。

# ruby-on-rails - 如何在 ruby on rails 中进行迁移和回滚工作

> ID：14355126
> 
> 赞同：0
> 
> 时间：2013-01-16T09:34:16.603
> 
> 标签：ruby-on-rails

当我们打电话

```
bundle exec db:migrate 
```

它总是创建一个新表吗？或者只是创建不在前一个表中的新列？

回滚有什么作用？它怎么知道要删除哪一列，这个删除的东西是可逆的吗？例如，如果我不小心删除了一个有用的列，我可以取消之前的操作并将其取回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:42:16.710

我假设你的意思是，`bundle exec rake db:migrate`

1.  Active Record 跟踪哪些迁移已经运行。示例：如果您使用 sqlite3 作为数据库，您可以查看该表 -`schema_migrations`其中包含这些迁移详细信息。它主要有类似的条目

    > ```
    >  row id          version
    >     1            "20120926105202" #matched migration timestamp 
    > ```

2.  此 rake 任务仅运行您在`<app>/db/migrate/`. 因此，如果您在该迁移文件中创建了表，它会这样做。

3.  要回滚上次迁移，您可以随时运行`rake db:rollback`

4.  为了更好地理解，我请求您阅读[Rails 迁移指南](http://guides.rubyonrails.org/migrations.html#writing-a-migration)。通读它可以解决您对迁移的所有查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:42:53.407

您正在描述自己要做什么。 [http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

```
class CreateProducts < ActiveRecord::Migration
  def up # for rake db:migrate
    create_table :products do |t|
      t.string :name
      t.text :description

      t.timestamps
    end
  end

  def down # for rake db:rollback
    drop_table :products
  end
end 
```

# c# - 了解非布尔参数之间的按位比较

> ID：14355128
> 
> 赞同：1
> 
> 时间：2013-01-16T09:34:20.180
> 
> 标签：c#, winforms, bit-manipulation, bitwise-operators

我正在使用一些旧代码，试图对其进行改进，但遇到了以下问题，我无法理解：

```
controlToUpdate.Font = 
    new System.Drawing.Font(someFont,
                            someFontSize,
                            controlToUpdate.Font.Style ^ 
                                (controlToUpdate.Font.Style & FontStyle.Bold)); 
```

具体来说，我对最后一个参数的作用感到困惑。据我了解，以下应该进行按位比较，并返回结果：

```
controlToUpdate.Font.Style ^ (controlToUpdate.Font.Style & FontStyle.Bold) 
```

..但是在这种情况下这意味着什么？可能的结果是什么，可以作为第三个参数传递给`new Font(...)`，我怎样才能更清楚地重写它，同时保持原始程序员的意图？

*旁注：在使用 Windows 窗体时，这是一种正常的做事方式吗？我在那个领域有点新 - 这里的意图对于在这个领域更有经验的编码人员来说是显而易见的吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:47:25.763

```
controlToUpdate.Font.Style & FontStyle.Bold 
```

`FontStyle.Bold`如果样式 ( `controlToUpdate.Font.Style`) 包含粗体，并且`0`样式不包含粗体，则执行“与”返回：基本上，它只得到“粗体”位。

```
controlToUpdate.Font.Style ^ (controlToUpdate.Font.Style & FontStyle.Bold) 
```

执行“异或”；如果设置了粗体位，则将其删除；*如果未*设置粗体位，则它什么也不做（因为“xor”与 0 是无操作的）。

所以基本上，那个复杂的代码只是删除了“粗体”位（如果已设置）。一个更简单的实现是：

```
controlToUpdate.Font.Style & ~FontStyle.Bold 
```

它是如何工作的：在这里，`~FontStyle.Bold` *反转*所有位；`FontStyle.Bold`是`1`：

```
000....000001 
```

所以`~FontStyle.Bold`是：

```
111...1111110 
```

然后我们用我们当前的样式“和”它，这意味着它保留了***除***粗体位之外的所有旧样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:41:36.477

[`FontStyle`](http://msdn.microsoft.com/en-us/library/system.drawing.fontstyle.aspx)枚举就是枚举，把[`Flags`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)它们做成[位图](http://en.wikipedia.org/wiki/Bitmap)。

使用按位运算符，您可以找出哪些标志是“on”、“off”，当然，还可以更改它们。

这很常见 - 例如，要确定样式是粗体还是斜体，您可以使用：

```
FontStyle.Bold | FontStyle.Italic 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:44:04.553

这是否正常取决于这样做的*原因*，但基本上这意味着：

```
controlToUpdate.Font.Style ^ (controlToUpdate.Font.Style & FontStyle.Bold) 
```

`(controlToUpdate.Font.Style & FontStyle.Bold)`: 按位`AND`，所以有 a 就足够了`0`，它会返回`0`（可以把它想象成乘法）

```
1 0 = 0
0 1 = 0 
1 1 = 1 
0 0 = 0 
```

所以会返回 true ，`(controlToUpdate.Font.Style & FontStyle.Bold)`只有当`controlToUpdate.Font.Style`也是**Bold时**

在我们拥有之后

`controlToUpdate.Font.Style ^`：位运算`XOR`符，其中相同的值给出`0`

```
1 1  = 0 
0 0  = 0
1 0  = 1 
0 1 =  1 
```

所以，考虑到以前的输出（比如说它是一个**Bold**），结果将是`false`or `0`，所以**Regular**字体样式。

实际上，这是一种强制*常规*类型字体的方法，独立于控件上设置的实际样式。

# javascript - Node.js 找出访问者的入口页面、当前页面和退出页面？

> ID：14355131
> 
> 赞同：0
> 
> 时间：2013-01-16T09:34:41.880
> 
> 标签：javascript, node.js

我用 socket.io 在 Node 中编写了一个小型服务器，我想找出入口、当前和出口页面。我的想法是将然后存储在用户会话中以供以后使用。

我的问题是我不知道从哪里获得这些信息，有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:29:32.047

我想你正在寻找这样的东西。

[节点会话](https://github.com/dresende/node-sessions)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T10:38:54.607

入口页面可以取自`Referer`HTTP 标头（如果存在）。

当前页面是`request.url`

更改时应在浏览器中获取退出页面`window.location`

# nsmutablearray - 从可变数组创建 TableView

> ID：14355137
> 
> 赞同：0
> 
> 时间：2013-01-16T09:34:53.810
> 
> 标签：nsmutablearray, tableview

我对 iOS 开发很陌生，似乎找不到问题的答案：我有一个包含（除其他外）TableView 的 ViewController。这个 TableView 填充了来自可变数组的项目，我想要做的是创建一个表，如果可变数组只有 2 个条目，则该表将仅由 2 行组成。而且，如果表格有超过（比方说）5 个条目，TableView 应该有一个滚动。

关于如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:43:55.123

Its pretty much simple. Lets say your array is chuckJokes. Just add the array as a property or member of the class so that you can use it in all methods.

Then populate the array with whatever values you need. Later follow the following methods to populate the tableview according to the array.

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [chuckJokes count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"chuck"];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"chuck"] autorelease];
    }
    cell.text = [chuckJokes objectAtIndex:[indexPath.row]];

    return cell;
} 
```

# php - 搜索所有 php 加载速度很慢？

> ID：14355144
> 
> 赞同：0
> 
> 时间：2013-01-16T09:35:13.007
> 
> 标签：php, mysql

我的网站[www.guidedsolutions.co.uk](http://www.guidedsolutions.co.uk)是前段时间建立的，我对 php 不太了解，但是当我输入搜索条件时，即苏格兰的医疗销售工作，搜索结果加载速度非常快，但是当我点击搜索所有结果页面加载非常缓慢，有时甚至不加载。这是它的直接链接：[www.guidedsolutions.co.uk/medical_devices/search_results.php](http://www.guidedsolutions.co.uk/medical_devices/search_results.php) 我不确定要复制 php 的哪一部分，这就是我发送链接的原因，但是如果我可以提供更多信息，请让我知道。非常感激。

**

```
$conds_cat = "";
$conds_loc = "";
$conds_sec = "";
$conds_sal = "";

if (isset($i["start"]) && $i["start"] > 0)
    $start = $i["start"];

if (isset($i["limit"]) && $i["limit"] > 0)
    $limit = $i["limit"];

if(isset($i["category"]) && $i["category"] != "")
    $conds_cat = "AND ".CAT_TABLE."_id ='".$i["category"]."'";

if(isset($i["location"]) && $i["location"] != "")
    $conds_loc = "AND ".LOC_TABLE."_id ='".$i["location"]."'";

$searchstring = "&category=".$i["category"]."&location=".$i["location"]."&limit=".$i["limit"];

$sql = "SELECT * FROM ".JOB_TABLE." LEFT JOIN (".JBC_TABLE.", ".JBL_TABLE.", ".JBS_TABLE.", ".JBP_TABLE.") ON (".JBC_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id AND ".JBL_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id AND ".JBS_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id AND ".JBP_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id) WHERE ".JOB_TABLE."_display = '1' AND (".CAT_TABLE."_id IN (SELECT ".CAT_TABLE."_id FROM ".CAT_TABLE." WHERE ".CAT_TABLE."_display='1' ".$conds_cat.") AND ".LOC_TABLE."_id IN (SELECT ".LOC_TABLE."_id FROM ".LOC_TABLE." WHERE ".LOC_TABLE."_display='1' ".$conds_loc.")) GROUP BY ".JOB_TABLE.".".JOB_TABLE."_id ORDER BY ".JOB_TABLE."_rank DESC"; 
```

更新：感谢 dwurf，以下代码：

```
//echo $sql;
$res=$_Db->execute($sql);
$total = $_Db->numResults($res);

$displaylimit = $limit;

if ($total<$displaylimit+$start)
    $displaylimit=$total-$start;

$sql .= " LIMIT ".$start.", ".$limit;
//echo $sql;
$res=$_Db->execute($sql);

if($_Db->numResults($res)>0) {

    $co = 0;
    while($row=$_Db->fetchAssoc($res)) {    

        $jobs[$co]["id"]=$row[JOB_TABLE."_id"];
        $jobs[$co]["title"]=$row[JOB_TABLE."_title"];
        $jobs[$co]["product"]=getCatLocSecTitle($_Db, PDT_TABLE, $row[PDT_TABLE."_id"]);
        $jobs[$co]["salary"]=getCatLocSecTitle($_Db, SAL_TABLE, $row[SAL_TABLE."_id"]);

        $co++;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:11:30.947

哇。

问题是您的查询是垃圾。数据库设计也可能需要一些工作。我认为 PHP 没有任何问题（除了过多的字符串操作），但我们只能在那里看到一点点。

让我们整理一下您的 SQL 语句，以便我们可以欣赏它的所有荣耀：

```
$sql = 
"SELECT * FROM ".JOB_TABLE." 
LEFT JOIN (
    ".JBC_TABLE.", 
    ".JBL_TABLE.", 
    ".JBS_TABLE.", 
    ".JBP_TABLE.") 
ON (
    ".JBC_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBL_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBS_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBP_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id) 
WHERE 
    ".JOB_TABLE."_display = '1' 
AND (".CAT_TABLE."_id IN 
    (SELECT ".CAT_TABLE."_id FROM ".CAT_TABLE." WHERE ".CAT_TABLE."_display='1' ".$conds_cat.") 
AND ".LOC_TABLE."_id IN 
    (SELECT ".LOC_TABLE."_id FROM ".LOC_TABLE." WHERE ".LOC_TABLE."_display='1' ".$conds_loc.")) 
GROUP BY ".JOB_TABLE.".".JOB_TABLE."_id 
ORDER BY ".JOB_TABLE."_rank DESC"; 
```

性能问题的根源很简单。如果未设置类别或位置，则查询会检索*作业表中每个作业的**所有*类别/位置的完整列表。我们说它以 O(m*n) 缩放，这是不好的。

 *提高性能的一种简单方法是在未设置位置/类别时完全删除该子句。我们还将直接连接到这些表并检查类别是否应显示在 where 子句中。

```
$conds_cat = "";
$conds_loc = "";
$conds_sec = "";
$conds_sal = "";

if (isset($i["start"]) && $i["start"] > 0)
    $start = $i["start"];

if (isset($i["limit"]) && $i["limit"] > 0)
    $limit = $i["limit"];

$conds_cat = '';
$conds_loc = '';
if(isset($i["category"]) && $i["category"] != "")
    $conds_cat = " AND ".CAT_TABLE.".".CAT_TABLE."_id ='".$i["category"]."'"; 
if(isset($i["location"]) && $i["location"] != "")
    $conds_loc = " AND ".LOC_TABLE.".".LOC_TABLE."_id ='".$i["location"]."'"; 

$searchstring = "&category=".$i["category"]."&location=".$i["location"]."&limit=".$i["limit"];

$sql = 
"SELECT 
    ".JOB_TABLE.".*,
    ".JBC_TABLE.".*, 
    ".JBL_TABLE.".*, 
    ".JBS_TABLE.".*, 
    ".JBP_TABLE.".* 
FROM 
    ".CAT_TABLE.",
    ".LOC_TABLE.",
    ".JOB_TABLE."
LEFT JOIN (
    ".JBC_TABLE.", 
    ".JBL_TABLE.", 
    ".JBS_TABLE.", 
    ".JBP_TABLE.") 
ON (
    ".JBC_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBL_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBS_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id 
    AND ".JBP_TABLE.".".JOB_TABLE."_id=".JOB_TABLE.".".JOB_TABLE."_id) 
WHERE 
    ".JOB_TABLE."_display = '1' 
AND ".JOB_TABLE.".".CAT_TABLE."_id = ".CAT_TABLE.".".CAT_TABLE."_id
AND ".JOB_TABLE.".".LOC_TABLE."_id = ".LOC_TABLE.".".LOC_TABLE."_id
AND ".CAT_TABLE."_display = '1' 
AND ".LOC_TABLE."_display = '1' 
$conds_cat 
$conds_loc
GROUP BY ".JOB_TABLE.".".JOB_TABLE."_id 
ORDER BY ".JOB_TABLE."_rank DESC"; 
```

更新：修复了两个会导致 PHP 错误或 SQL 结果不正确的错误。更新 2：修复了类别/位置过滤器中的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:47:36.580

我会首先确保它不可注射。你直接从用户那里获取输入并直接发送到数据库。唯一的检查是那里有东西。

PHP / MySQL 有验证这一点的工具。我不确定您使用什么函数来查询数据库，但我会假设它是标准的 mysql 库？

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

但还要注意顶部的红色警告，它已过时（尽管仍然有效）*

# jquery - 如何使用指令在angularjs内的列表中添加和删除项目时触发jquery动画？

> ID：14355145
> 
> 赞同：1
> 
> 时间：2013-01-16T09:35:13.733
> 
> 标签：jquery, animation, angularjs, directive

> **可能重复：**
> [删除元素时的 angularJS 通知](https://stackoverflow.com/questions/11548390/angularjs-notification-when-element-is-removed)

作为标题，基本上我想在列表添加新项目/删除旧项目时进行淡入/淡出。现在我必须通过指令执行添加动画，但通过控制器删除动画，我怎样才能整合在一起并只使用指令，因为它与核心逻辑并不真正相关？

# javascript - 如何等待函数结果？

> ID：14355146
> 
> 赞同：0
> 
> 时间：2013-01-16T09:35:19.707
> 
> 标签：javascript, openlayers

我有一个功能：

```
 function createWFS(){
    //WMS
    wms_proj = new OpenLayers.Projection("EPSG:900913");    
    //WFS
    SS=new OpenLayers.Strategy.Save();
    FS=new OpenLayers.Strategy.Filter({filter:Ffilter});
    var myStyle = OpenLayers.Util.extend({},
        OpenLayers.Feature.Vector.style['default']);
    myStyle.strokeWidth = 1.5;
    myStyle.strokeColor = "#ff0000";
    myStyle.fillOpacity = 0.1;

    myVecLayer= new OpenLayers.Layer.Vector("Редактируемый участок");
    myVecLayer.projection=wms_proj;
    app.mapPanel.map.addLayers([myVecLayer]);
    myVecLayer.visibility=false;

    //Стор для зума
    zoom_tab = new GeoExt.data.FeatureStore({
        layer: myVecLayer,
        fields: [
            {name: 'id', type: 'int'},
            {name: 'filedata', type: 'String'}
        ],
        proxy: new GeoExt.data.ProtocolProxy({
            protocol: new OpenLayers.Protocol.HTTP({
                //url: "/geoserver/ows?service=WFS&request=GetFeature&typeName=mrsk:parcels_temp&srsName=EPSG:4326&outputFormat=GML2",
                url: "/geoserver/ows?service=WFS&request=GetFeature&typeName=cite:parcels_temp&srsName=EPSG:4326&outputFormat=GML2",
                format: new OpenLayers.Format.GML()
            })
        }),
        autoLoad: true
    });
    zoom_store=zoom_tab;
} 
```

您会看到此函数创建 WFS 图层和 GeoExt.FeatureStore。我不知道功能会工作多久。
所以现在我调用这个函数并希望在制作下一个代码之前等待函数结果。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:41:35.323

只需将您自己的回调传递给它：

```
function createWFS(callback) {
    //WMS
    ...
    if (callback)
        callback();
}

function Main() {
    createWFS(NextStep);
}

function NextStep() {
    //stuff here
} 
```

# database - 如何删除Oracle中不同列的重复记录？

> ID：14355149
> 
> 赞同：0
> 
> 时间：2013-01-16T09:35:30.747
> 
> 标签：database, oracle

我在删除具有不同列的行中的重复数据时遇到问题：

```
SELECT   p1, p2

  FROM   (SELECT   'A' AS p1, 'B' AS p2 FROM DUAL
          UNION
          SELECT   'B' AS p1, 'A' AS p2 FROM DUAL) a; 
```

结果将是：

```
P1 P2
-- --
甲,乙  
乙,甲  

```

**我只需要 A,B 或 B,A**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:29:19.277

```
SELECT   distinct least(p1, p2), greatest(p1, p2)
  FROM   (SELECT   'A' AS p1, 'B' AS p2 FROM DUAL
          UNION
          SELECT   'B' AS p1, 'A' AS p2 FROM DUAL) a; 
```

# python - 如何使 pandas HDFStore 'put' 操作更快

> ID：14355151
> 
> 赞同：2
> 
> 时间：2013-01-16T09:35:36.267
> 
> 标签：python, pandas

我正在尝试使用 pandas hdf5 构建一个 ETL 工具包。

我的计划是

1.  从mysql中提取表到DataFrame；
2.  将此 DataFrame 放入 HDFStore；

但是当我执行第 2 步时，我发现将数据框放入 *.h5 文件会花费太多时间。

*   源mysql服务器中的表大小：498MB
    *   52列
    *   924,624 条记录
*   将数据框放入后 *.h5 文件的大小：513MB
    *   'put' 操作花费 849.345677137 秒

我的问题是：
这个时间成本正常吗？
有没有办法让它更快？

* * *

## 更新 1

谢谢杰夫

*   我的代码很简单：

    extract_store = HDFStore('extract_store.h5')
    extract_store['df_staff'] = df_staff

*   当我尝试“ptdump -av file.h5”时，出现错误，但我仍然可以从这个 h5 文件加载数据框对象：

> tables.exceptions.HDF5ExtError：HDF5 错误回溯
> 
> 文件“../../../src/H5F.c”，第 1512 行，在 H5Fopen 中
> 无法打开文件文件“../../../src/H5F.c”，第 1307 行，在 H5F_open
> 无法读取超级块文件“../../../src/H5Fsuper.c”，第 305 行，在 H5F_super_read 中
> 无法找到文件签名文件“../../../src/H5Fsuper.c”，第 153 行，在 H5F_locate_signature
> 中找不到有效的文件签名
> 
> HDF5 错误回溯结束
> 
> 无法打开/创建文件“extract_store.h5”

*   其他一些信息：

    *   熊猫版本：'0.10.0'
    *   操作系统：ubuntu 服务器 10.04 x86_64
    *   cpu: 8 * Intel(R) Xeon(R) CPU X5670 @ 2.93GHz
    *   内存总量：51634016 kB

我会将 pandas 更新为 0.10.1-dev 并重试。

* * *

## 更新 2

*   我已将熊猫更新为“0.10.1.dev-6e2b6ea”
*   但是时间成本并没有减少，这次花费了884.15 s秒
*   'ptdump -av file.h5' 的输出是：

```
    /（根组）''  
      /._v_attrs (AttributeSet)，4个属性：  
       [类：='组'，  
        PYTABLES_FORMAT_VERSION := '2.0',  
        标题：=''，  
        版本：='1.0']  
    /df_bugs (组) ''  
      /df_bugs._v_attrs（属性集），12个属性：  
       [类：='组'，  
        标题：=''，  
        版本 := '1.0',  
        axis0_variety := '常规',  
        axis1_variety := '常规',  
        block0_items_variety := '常规',  
        block1_items_variety := '常规',  
        block2_items_variety := '常规',  
        nblocks := 3,  
        ndim := 2,  
        pandas_type := '框架',  
        pandas_version := '0.10.1']  
    /df_bugs/axis0 (Array(52,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      主调：= 0  
      味道 := 'numpy'  
      byteorder := '无关'  
      块状 := 无  
      /df_bugs/axis0._v_attrs（属性集），7个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',  
        种类 := '字符串',  
        名称 := 无，  
        转置：=真]  
    /df_bugs/axis1（数组（924624，））''  
      atom := Int64Atom(shape=(), dflt=0)  
      主调：= 0  
      味道 := 'numpy'  
      字节序 := '小'  
      块状 := 无  
      /df_bugs/axis1._v_attrs（属性集），7个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',  
        种类 := '整数',  
        名称 := 无，  
        转置：=真]  
    /df_bugs/block0_items (Array(5,)) ''  
      atom := StringAtom(itemsize=12, shape=(), dflt='')  
      主调：= 0   
      味道 := 'numpy'  
      byteorder := '无关'  
      块状 := 无  
      /df_bugs/block0_items._v_attrs（属性集），7个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',  
        种类 := '字符串',  
        名称 := 无，  
        转置：=真]  
    /df_bugs/block0_values (Array(924624, 5)) ''  
      atom := Float64Atom(shape=(), dflt=0.0)  
      主调：= 0  
      味道 := 'numpy'  
      字节序 := '小'  
      块状 := 无  
      /df_bugs/block0_values._v_attrs（属性集），5个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',  
        转置：=真]  
    /df_bugs/block1_items (Array(19,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      主调：= 0  
      味道 := 'numpy'  
      byteorder := '无关'  
      块状 := 无  
      /df_bugs/block1_items._v_attrs（属性集），7个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',  
        种类 := '字符串',  
        名称 := 无，  
        转置：=真]  
    /df_bugs/block1_values (Array(924624, 19)) ''  
      atom := Int64Atom(shape=(), dflt=0)  
      主调：= 0  
      味道 := 'numpy'  
      字节序 := '小'  
      块状 := 无  
      /df_bugs/block1_values._v_attrs（属性集），5个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，   
        版本 := '2.3',  
        转置：=真]  
    /df_bugs/block2_items (Array(28,)) ''  
      atom := StringAtom(itemsize=18, shape=(), dflt='')  
      主调：= 0  
      味道 := 'numpy'  
      byteorder := '无关'  
      块状 := 无  
      /df_bugs/block2_items._v_attrs（属性集），7个属性：  
       [类：='阵列'，  
        风味 := 'numpy',  
        标题：=''，  
        版本 := '2.3',
        种类 := '字符串',  
        名称 := 无，  
        转置：=真]  
    /df_bugs/block2_values (VLArray(1,)) ''  
      原子 = 对象原子（）  
      byteorder = '无关'  
      nrows = 1  
      风味='numpy'  
      /df_bugs/block2_values._v_attrs（属性集），5个属性：  
       [类：='VLARRAY'，  
        伪原子 := '对象',  
        标题：=''，   
        版本：='1.3'，  
        转置：=真]  

```

*   我在下面尝试了您的代码（将数据帧放入 hdfstore 中，参数“表”为 True），但出现错误，似乎不支持 python 的数据时间类型：

> 例外：找不到正确的原子类型 -> [dtype->object] 类型“datetime.datetime”的对象没有 len()

* * *

## 更新 3

谢谢杰夫。抱歉耽搁了。

*   表。**版本**：'2.4.0'。
*   是的，884 秒只是 put 操作成本，没有来自 mysql 的 pull 操作
*   一行数据框（df.ix[0]）：

```
bug_id 1
分配给 185
bug_file_loc 无
bug_severity 严重
bug_status 关闭
创建_ts 1998-05-06 21:27:00
delta_ts 2012-05-09 14:41:41
short_desc 两个游标。
host_op_sys 未知
guest_op_sys 未知
优先级 P3
rep_platform IA32
记者56
product_id 7
类别 ID 983
组件 ID 12925
分辨率固定
目标里程碑ws1
qa_contact 412
status_whiteboard                         
票数 0
关键词 SR
上次差异 2012-05-09 14:41:41
曾经确认过 1
记者可访问 1
cclist_accessible 1
估计时间 0.00
剩余时间 0.00
截止日期 无
别名 无
found_in_product_id 0
found_in_version_id 0
found_in_phase_id 0
cf_type 缺陷
cf_reported_by 开发
cf_attempted NaN
cf_failed NaN
cf_public_summary                         
cf_doc_impact 0
cf_security 0
cf_build NaN
cf_branch                                 
cf_change NaN
cf_test_id NaN
cf_regression 未知
cf_reviewer 0
cf_on_hold 0
cf_public_severity ---
cf_i18n_impact 0
cf_eta 无
cf_bug_source ---
cf_viss 无
名称：0，长度：52

```

*   数据框的图片（只需在 ipython 笔记本中输入“df”）：

```
Int64Index：924624 个条目，0 到 924623
数据列：
bug_id 924624 非空值
assign_to 924624 个非空值
bug_file_loc 427318 非空值
bug_severity 924624 非空值
bug_status 924624 非空值
creation_ts 924624 个非空值
delta_ts 924624 个非空值
short_desc 924624 非空值
host_op_sys 924624 个非空值
guest_op_sys 924624 个非空值
优先级 924624 个非空值
rep_platform 924624 非空值
记者 924624 非空值
product_id 924624 非空值
category_id 924624 个非空值
component_id 924624 非空值
分辨率 924624 非空值
target_milestone 924624 个非空值
qa_contact 924624 非空值
status_whiteboard 924624 个非空值
投票 924624 个非空值
关键字 924624 个非空值
lastdiffed 924509 个非空值
everconfirmed 924624 个非空值
report_accessible 924624 非空值
cclist_accessible 924624 非空值
估计时间 924624 个非空值
剩余时间 924624 个非空值
截止日期 0 非空值
别名 0 非空值
found_in_product_id 924624 个非空值
found_in_version_id 924624 个非空值
found_in_phase_id 924624 个非空值
cf_type 924624 非空值
cf_reported_by 924624 个非空值
cf_attempted 89622 非空值
cf_failed 89587 非空值
cf_public_summary 510799 非空值
cf_doc_impact 924624 非空值
cf_security 924624 非空值
cf_build 327460 非空值
cf_branch 614929 非空值
cf_change 300612 非空值
cf_test_id 12610 非空值
cf_regression 924624 非空值
cf_reviewer 924624 非空值
cf_on_hold 924624 个非空值
cf_public_severity 924624 非空值
cf_i18n_impact 924624 非空值
cf_eta 3910 非空值
cf_bug_source 924624 非空值
cf_viss 725 个非空值
数据类型：float64(5)、int64(19)、object(28)

```

*   在“convert_objects()”之后：

```
数据类型：datetime64[ns](2)、float64(5)、int64(19)、object(26)

```

*   并将转换后的数据帧放入 hdfstore 成本：**749.50 s** :)
    *   似乎减少“对象”数据类型的数量是降低时间成本的关键
*   并将转换后的数据帧放入具有参数“表”为真的 hdfstore 仍然返回该错误

```
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes（self，axes，obj，validate , nan_rep, data_columns, min_itemsize, **kwargs)
   2203 加薪
   2204 除外（例外），详细信息：
-> 2205 raise Exception("找不到正确的原子类型 -> [dtype->%s] %s" % (b.dtype.name, str(detail)))
   2206 j += 1
   2207
例外：找不到正确的原子类型 -> [dtype->object] 类型“datetime.datetime”的对象没有 len()

```

*   我正在尝试放置没有日期时间列的数据框

* * *

## 更新 4

*   mysql中有4列类型为datetime：
    *   创建_ts
    *   delta_ts
    *   最后的差异
    *   最后期限

调用 convert_objects() 后：

*   创建_ts：

```
时间戳：1998-05-06 21:27:00

```

*   delta_ts：

```
时间戳：2012-05-09 14:41:41

```

*   最后的差异

```
datetime.datetime(2012, 5, 9, 14, 41, 41)

```

*   截止日期始终为无，无论在调用“convert_objects”之前还是之后

```
没有任何

```

*   放置不带“lastdiff”列的数据框需要**691.75 秒**
*   当放置没有列'lastdiff'的数据框并将参数'table'设置为True时，我遇到了一个新错误，：

```
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes（self，axes，obj，validate , nan_rep, data_columns, min_itemsize, **kwargs)
   2203 加薪
   2204 除外（例外），详细信息：
-> 2205 raise Exception("找不到正确的原子类型 -> [dtype->%s] %s" % (b.dtype.name, str(detail)))
   2206 j += 1
   2207

例外：找不到正确的原子类型 -> 'Decimal' 类型的 [dtype->object] 对象没有 len()

```

*   'estimated_time'、'remaining_time'、'cf_viss' 列的类型在 mysql 中是 'decimal'

* * *

## 更新 5

*   我已通过以下代码将这些“十进制”类型列转换为“浮点”类型：

```
no_diffed_converted_df_bugs.estimated_time = no_diffed_converted_df_bugs.estimated_time.map(float)

```

*   现在，时间成本为**372.84 s**
*   但 'table' 版本的 put 仍然引发错误：

```
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes（self，axes，obj，validate , nan_rep, data_columns, min_itemsize, **kwargs)
   2203 加薪
   2204 除外（例外），详细信息：
-> 2205 raise Exception("找不到正确的原子类型 -> [dtype->%s] %s" % (b.dtype.name, str(detail)))
   2206 j += 1
   2207

例外：找不到正确的原子类型 -> [dtype->object] 类型为“datetime.date”的对象没有 len()

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:11:12.833

我非常确信您的问题与 DataFrames 中实际类型的类型映射以及 PyTables 如何存储它们有关。

*   具有固定表示的简单类型（floats/ints/bools），这些被映射到固定的 c 类型
*   如果可以正确转换日期时间，则会处理它们（例如，它们的 dtype 为“datetime64[ns]”，尤其是 datetimes.date 未处理（NaN 是另一回事，根据使用情况可能会导致整个列类型被错误处理）
*   字符串被映射（在 Storer 对象到 Object 类型，Table 将它们映射到 String 类型）
*   未处理 Unicode
*   所有其他类型在存储器中作为对象处理，或者为表抛出异常

这意味着如果您正在对存储器（固定表示）进行放置，那么所有不可映射的类型都将变为对象，请参阅this *。***PyTables 腌制这些列**。请参阅下面的 ObjectAtom 参考

[http://pytables.github.com/usersguide/libref/declarative_classes.html#the-atom-class-and-its-descendants](http://pytables.github.com/usersguide/libref/declarative_classes.html#the-atom-class-and-its-descendants)

表格将引发无效类型（我应该在此处提供更好的错误消息）。如果您尝试存储映射到 ObjectAtom 的类型（出于性能原因），我想我也会提供警告。

要强制某些类型，请尝试其中一些：

```
import pandas as pd

# convert None to nan (its currently Object)
# converts to float64 (or type of other objs)
x = pd.Series([None])
x = x.where(pd.notnull(x)).convert_objects()

# convert datetime like with embeded nans to datetime64[ns]
df['foo'] = pd.Series(df['foo'].values, dtype = 'M8[ns]') 
```

这是 64 位 linux 上的示例（文件为 1M 行，磁盘大小约为 1 GB）

```
In [1]: import numpy as np

In [2]: import pandas as pd

In [3]: pd.__version__
Out[3]: '0.10.1.dev'

In [3]: import tables

In [4]: tables.__version__
Out[4]: '2.3.1'

In [4]: df = pd.DataFrame(np.random.randn(1000 * 1000, 100), index=range(int(
   ...: 1000 * 1000)), columns=['E%03d' % i for i in xrange(100)])

In [5]: for x in range(20):
   ...:     df['String%03d' % x] = 'string%03d' % x

In [6]: df
Out[6]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1000000 entries, 0 to 999999
Columns: 120 entries, E000 to String019
dtypes: float64(100), object(20)

# storer put (cannot query) 
In [9]: def test_put():
   ...:     store = pd.HDFStore('test_put.h5','w')
   ...:     store['df'] = df
   ...:     store.close()

In [10]: %timeit test_put()
1 loops, best of 3: 7.65 s per loop

# table put (can query)
In [7]: def test_put():
      ....:     store = pd.HDFStore('test_put.h5','w')
      ....:     store.put('df',df,table=True)
      ....:     store.close()

In [8]: %timeit test_put()
1 loops, best of 3: 21.4 s per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:43:24.723

## 如何使这更快？

1.  使用 'io.sql.read_frame' 将数据从 sql db 加载到数据帧。因为“read_frame”将通过将类型为“十进制”的列转换为浮点数来处理它们。
2.  填充每列的缺失数据。
3.  在进行操作之前调用函数“DataFrame.convert_objects”
4.  如果 dateframe 中有字符串类型的列，请使用“table”而不是“storer”

store.put('key', df, table=True)

做完这些工作，在同样的数据集下，put操作的性能有了很大的提升：

```
CPU times: user 42.07 s, sys: 28.17 s, total: 70.24 s
Wall time: 98.97 s 
```

* * *

第二次测试的配置文件日志：

```
在 68.688 CPU 秒内进行 95984 次函数调用（95958 次原语调用）

   排序：内部时间

   ncalls tottime percall cumtime percall filename:lineno(function)
      445 16.757 0.038 16.757 0.038 {numpy.core.multiarray.array}
       19 16.250 0.855 16.250 0.855 {'tables.tableExtension.Table' 对象的方法'_append_records'}
       16 7.958 0.497 7.958 0.497 {'numpy.ndarray'对象的方法'astype'}
       19 6.533 0.344 6.533 0.344 {pandas.lib.create_hdf_rows_2d}
        4 6.284 1.571 6.388 1.597 {'tables.tableExtension.Row'对象的方法'_fillCol'}
       20 2.640 0.132 2.641 0.132 {pandas.lib.maybe_convert_objects}
        1 1.785 1.785 1.785 1.785 {pandas.lib.isnullobj}
        7 1.619 0.231 1.619 0.231 {'numpy.ndarray'对象的方法'flatten'}
       11 1.059 0.096 1.059 0.096 {pandas.lib.infer_dtype}
        1 0.997 0.997 41.952 41.952 pytables.py:2468(write_data)
       19 0.985 0.052 40.590 2.136 pytables.py:2504(write_data_chunk)
        1 0.827 0.827 60.617 60.617 pytables.py:2433（写入）
     1504 0.592 0.000 0.592 0.000 {“tables.hdf5Extension.Array”对象的“_g_readSlice”方法}
        4 0.534 0.133 13.676 3.419 pytables.py:1038(set_atom)
        1 0.528 0.528 0.528 0.528 {pandas.lib.max_len_string_array}
        4 0.441 0.110 0.571 0.143 internals.py:1409(_stack_arrays)
       35 0.358 0.010 0.358 0.010 {方法'复制''numpy.ndarray'对象}
        1 0.276 0.276 3.135 3.135 internals.py:208(fillna)
        5 0.263 0.053 2.054 0.411 common.py:128(_isnull_ndarraylike)
       48 0.253 0.005 0.253 0.005 {'tables.hdf5Extension.Array'对象的方法'_append'}
        4 0.240 0.060 1.500 0.375 internals.py:1400(_simple_blockify)
        1 0.234 0.234 12.145 12.145 pytables.py:1066(set_atom_string)
       28 0.225 0.008 0.225 0.008 {'tables.hdf5Extension.Array' 对象的方法'_createCArray'}
       36 0.218 0.006 0.218 0.006 {'tables.hdf5Extension.Array' 对象的方法'_g_writeSlice'}
     6110 0.155 0.000 0.155 0.000 {numpy.core.multiarray.empty}
        4 0.097 0.024 0.097 0.024 {方法'所有'的'numpy.ndarray'对象}
        6 0.084 0.014 0.084 0.014 {tables.indexesExtension.keysort}
       18 0.084 0.005 0.084 0.005 {'tables.hdf5Extension.Leaf'对象的方法'_g_close'}
    11816 0.064 0.000 0.108 0.000 文件.py:1036(_getNode)
       19 0.053 0.003 0.053 0.003 {'tables.hdf5Extension.Leaf'对象的方法'_g_flush'}
     1528 0.045 0.000 0.098 0.000 array.py:342(_interpret_indexing)
    11709 0.040 0.000 0.042 0.000 文件.py:248(__getitem__)
        2 0.027 0.013 0.383 0.192 index.py:1099(get_neworder)
        1 0.018 0.018 0.018 0.018 {numpy.core.multiarray.putmask}
        4 0.013 0.003 0.017 0.004 index.py:607(final_idx32)

```

# java - ZK MVVM 中的表单验证（服务器端）示例

> ID：14355153
> 
> 赞同：1
> 
> 时间：2013-01-16T09:35:40.683
> 
> 标签：java, validation, mvvm, server-side, zk

您能否解释一下如何使用 MVVM 方法在服务器端进行表单验证。我试过了，但不能有效地做到这一点。我已经使用 intbox 等在客户端进行了小型验证。但我想做如下验证：

> 1.  属性的值不应超过 100。
> 2.  如果属性 A 的值由用户填写，则属性 B 变为强制性的，就像这样。
> 3.  如果属性 A 的值为 100 且 B 为 50，则属性 C 的值变为强制性且不能超过 150

我无法在 MVVM 中找到一种方法。我正在使用 ZK CE 6.0.0 版本。

我尝试了下面提到的代码：

验证.zul

```
<zk>
    <window title="Validation" border="normal"
        apply="org.zkoss.bind.BindComposer" id="validtionWin"
        viewModel="@id('vm') @init('com.nagarro.validator.CustomValidator')">
        <intbox
            value="@save(vm.quantity) @validator(vm.rangeValidator)" />

        <button label="Submit"></button>
    </window>
</zk> 
```

ViewModel CustomValidator.java

```
import org.zkoss.bind.ValidationContext;
import org.zkoss.bind.Validator;
import org.zkoss.bind.validator.AbstractValidator;

public class CustomValidator implements Validator{

    private Validator rangeValidator;

    private String quantity;

    /**
     * @return the quantity
     */
    public String getQuantity() {
        return quantity;
    }

    /**
     * @param quantity
     *            the quantity to set
     */
    public void setQuantity(String quantity) {
        this.quantity = quantity;
    }
    @Override
    public void validate(ValidationContext ctx) {

    }

    /**
     * @return the rangeValidator
     */
    public Validator getRangeValidator() {
        return new AbstractValidator() {
            public void validate(ValidationContext ctx) {
                Integer val = (Integer)ctx.getProperty().getValue();
                if(val<10 || val>100){
                    addInvalidMessage(ctx, "value must not < 10 or > 100, but is "+val);
                }
            }
        };
    }

    /**
     * @param rangeValidator the rangeValidator to set
     */
    public void setRangeValidator(Validator rangeValidator) {
        this.rangeValidator = rangeValidator;
    }

} 
```

请找出上面代码中的错误。:)

运行上述代码时，我收到以下警告。

```
Jan 16, 2013 4:58:07 PM org.zkoss.bind.validator.AbstractValidator
addInvalidMessages:84 WARNING: ValidationMessages not found on binder
org.zkoss.bind.AnnotateBinder@cf7fda, please init it 
```

我应该如何设置验证消息请帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:42:18.757

看看[这个](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/Validator)或使用[约束](http://books.zkoss.org/wiki/ZK_Component_Reference/Base_Components/InputElement#Constraint)。 如果您需要更多详细信息或有问题，请提供一些代码。`InputElements`

## 编辑

你不见了

```
validationMessages="@id('vmsgs') 
```

在你的`Window`.
请阅读[此](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/Validator#Validation_Message_Holder)内容以了解。

# php - LIKE 查询无法正常工作

> ID：14355155
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:35:43.380
> 
> 标签：php, javascript, database, phpmyadmin, .post

感谢观看。

我正在尝试为我的网站创建一个自定义搜索插件，以从我的数据库行中获取用户在搜索框中输入的任何查询的值。我正在为我的搜索插件运行 ajax。

它最初似乎起作用，但我意识到并非所有输入的值都会发生这种情况。

以下是我的脚本：

.POST 脚本

```
 $search=$_POST['search'];
    if($type=='search'){
        $query_str=$search;
        $query1="SELECT * FROM ads1_adsmanager_ads WHERE ad_headline LIKE '%$query_str%' OR ad_text LIKE '%$query_str%' ORDER BY id DESC LIMIT $count";
    }else if($type='normal'){
        .
        ..
        .. .. 
```

我能够获得更通用的值，例如“演示”，.. 等等

但我无法获得“一般”、“工作”等价值。

一直在查看大量示例并尝试变量 $query_str 周围的所有括号，但我不确定我的查询是否存在影响结果的语法问题。

肯定会在这里得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:58:23.293

最简单的方法是检查查询，`echo $query1`你会看到错误，就像评论中一个人说的那样，尝试将它放在 phpmyadmin 中的查询控制台中，它也会向你显示错误，如果它们是当下

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T09:41:08.490

查询将是

```
$query1="SELECT * FROM ads1_adsmanager_ads WHERE ad_headline LIKE '%".$query_str."%' OR ad_text LIKE '%".$query_str."%' 
```

# windows - 使用 win git，git 变量不再位于 enironment_variables 中，如何打开 Git Shell 并从那里运行命令？

> ID：14355159
> 
> 赞同：1
> 
> 时间：2013-01-16T09:35:49.390
> 
> 标签：windows, git, command-line

所以我想写一个文件：

cd /d 我的文件夹 git pull

但是在windows的默认cmd中没有定义git变量，只有我打开桌面上的git shell图标：“C:\Documents and Settings\Administrador\Definições locais\Application Data\GitHub\GitHub.appref-ms” --open-shell

如何使用 git shell 打开 cmd 并 cd 进入特定文件夹并运行 pull 命令，然后窗口应保持打开状态并让我在必要时运行其他命令。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:00:46.670

如果您实际安装“Git for Windows”（即 git-1.8.0-preview2012___.exe）而不是便携式的，并指定要从 Windows 命令提示符运行，它会将 Git\cmd 目录添加到您的路径，以便您可以从命令脚本或命令提示符运行 git。

使用便携式安装，您可以手动执行相同的操作——将 cmd 子目录添加到路径中。cmd\git.exe 和 cmd\gitk.cmd 文件配置了运行真正的 git 命令（在 bin\git.exe 中）所需的环境，而无需将所有其他命令添加到搜索路径中。这避免了我们为您提供所包含工具的不同版本（例如 perl 和 tclsh）。

从 1.8.0 开始，git wrapper 命令不再是 cmd 脚本，这使得在批处理 / cmd 脚本中使用变得更加简单（您不再需要从批处理脚本中“调用”它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:39:46.950

您安装 GIT 的文件夹需要添加到 PATH 环境变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:23:14.933

如果您安装了[GitHub for Windows](http://windows.github.com/)，您将无法轻松使用 CLI：只能使用 GUI。

只需[将 Git 的可移植安装存档](http://code.google.com/p/msysgit/downloads/list)（如“ [PortableGit-1.8.0-preview20121022.7z](http://code.google.com/p/msysgit/downloads/detail?name=PortableGit-1.8.0-preview20121022.7z&can=2&q=) ”）提取到您想要的任何位置（因为它是可*移植*安装），并准备好脚本以在您需要 git 时修改您的路径。

例如见[我的要点](https://gist.github.com/3159881)。

我打电话（[第 30 行](https://gist.github.com/3159881#file-senv-bat-L30)）

```
call:cleanAddPath PATH "%GITROOT%\bin" 
```

这将确保我只包含*一次*`PATH`我想要的 git ，即使我重复调用我的脚本（遵循“[如何将变量的值保留在使用“延迟扩展本地”模式的 Windows 批处理脚本之外？](https://stackoverflow.com/q/12020152/6309) “）

 *在任何 DOS 窗口中调用该脚本，您就可以使用 git 命令了。*

# jquery-ui - JQuery UI sortable 在 mousedown 上创建无尽的占位符

> ID：14355162
> 
> 赞同：0
> 
> 时间：2013-01-16T09:35:50.647
> 
> 标签：jquery-ui, twitter-bootstrap, jquery-ui-sortable

尝试创建一个简单的可排序列表

```
 $('#sortable').sortable();
    $('#sortable').disableSelection(); 
```

但结果是在鼠标按下时创建了**无数的占位符。**我正在为应用程序使用**twitter 引导**程序，如果有帮助的话！

# ruby - 安装 CocoaPods：无响应

> ID：14355165
> 
> 赞同：178
> 
> 时间：2013-01-16T09:35:56.640
> 
> 标签：ruby, rubygems, cocoapods

尝试从终端安装 CocoaPods：

```
$ sudo gem install cocoapods 
```

输入我的root密码后，什么也没有发生。

我该如何调试呢？

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2013-05-11T13:59:09.923

对于其他想知道的人来说，安装 gem 需要很长时间。如果你运行：

```
export GEM_HOME=~/.gems
export PATH=$GEM_HOME/bin:$PATH

gem install cocoapods -V 
```

使用标志安装`V`会启用详细输出，这将让您在下载和安装过程中看到所有输出，这是相当多的。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-06-13T21:49:41.930

使用更新 gem 到最新版本

`sudo gem update --system`它应该工作得更快一点

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-16T09:44:09.673

我必须至少等待 5 分钟：

> 构建原生扩展。这可能需要一段时间...

出现

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-14T11:23:45.420

您应该在两个单独的命令中执行此操作：

第一的：

```
gem update 
```

然后：

```
export GEM_HOME=~/.gems
export PATH=$GEM_HOME/bin:$PATH

gem install cocoapods 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-16T12:49:29.740

它没有卡住，它正在从互联网上下载 ruby​​ 文件。您可以按照以下步骤进行检查：

1.  打开***活动监视器***

2.  选择***网络***选项

3.  检查下面的谷歌浏览器。（***红宝石*** ***下载***）

[![在此处输入图像描述](../Images/11a228e1793a1807c1eb931fc9bbc913.png)](https://i.stack.imgur.com/snkoq.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T13:36:18.567

尝试从安装最新的 Git 版本

[https://git-scm.com/downloads](https://git-scm.com/downloads)

这对我有用

在终端中编写以下命令：

1.  `export GEM_HOME=~/.gems`
2.  `export PATH=$GEM_HOME/bin:$PATH`
3.  `gem install cocoapods`
4.  使用命令设置项目的路径`cd path/to/project`
5.  `pod init`
6.  打开 podfile
7.  添加适当的吊舱
8.  `pod install`

# python - 计数线号 使用蟒蛇

> ID：14355168
> 
> 赞同：3
> 
> 时间：2013-01-16T09:36:15.280
> 
> 标签：python, python-3.x, python-2.7

> **可能重复：**
> [如何在 Python 中廉价地获得行数？](https://stackoverflow.com/questions/845058/how-to-get-line-count-cheaply-in-python)

在我的工作中，我需要打开一个文件并计数。在那行中，我试过这个

`Last_Line = len(open(File_Name).readlines())`

它工作正常。现在我有一个问题，实际上没有。文件中的行数是 453，但如果我打印`Last_Line`它只显示 339。如果我尝试

```
print linecache.getline(File_Name, 350) 
```

它正在显示行号的内容。350。

我尝试以所有模式打开文件。无论是文件问题还是我的逻辑问题？请帮忙。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:27:47.027

你有混合的行尾。您的 IDE 将它们都视为有效，而 Python 则不是。使用通用换行标志打开文件，`"U"`让 Python 将它们全部作为有效的行尾。

```
>>> f = open("file.txt", "w")
>>> f.write("a\rb\nc\r\nd\n\re\n")
>>> f.close()
>>> open("file.txt").readlines()
['a\rb\n', 'c\r\n', 'd\n', '\re\n']
>>> open("file.txt", 'rU').readlines()
['a\n', 'b\n', 'c\n', '\n', 'd\n', '\n', 'e\n'] 
```

的文档`linecache`似乎没有指定它如何处理行尾。根据经验，它使用通用换行符：

```
>>> for n in range(1, 8):
...   linecache.getline('file.txt', n)
...
'a\n'
'b\n'
'c\n'
'\n'
'd\n'
'\n'
'e\n' 
```

# eventbrite - 订单/票的条形码 ID

> ID：14355170
> 
> 赞同：3
> 
> 时间：2013-01-16T09:36:25.047
> 
> 标签：eventbrite

除了调用 event_list_attendees 并通过试图找到正确用户匹配的与会者进行分页之外，是否有其他方法可以获取票证/订单的用户条形码 ID？这种方法会对 eventbrite 服务器和客户端产生大量不必要的工作/资源造成负担。

似乎这应该默认包含在 user_list_tickets 的返回 json 中。有人有任何想法或其他方法可以更有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:54:34.520

看起来现在这不是一个选择。

# xcode - 如何在 Xcode 4.5 中使 xcodeproj 文件相对

> ID：14355173
> 
> 赞同：2
> 
> 时间：2013-01-16T09:36:30.123
> 
> 标签：xcode, path, static-libraries, relative-path, xcode4.5

我正在关注[本](http://iphoneincubator.com/blog/xcode/how-to-add-multiple-static-library-files-with-different-architectures-to-xcode#comments)教程并偶然发现了这个屏幕截图：

![在此处输入图像描述](../Images/d685dc6413f537dd4a66b9100ec372fd.png)

显然有一种方法可以使 Xcode 项目文件相对于早期版本的 Xcode 中的某些用户定义的 env 变量（您可以通过突出显示项目文件然后单击`cmd`+来实现`i`）

我在 Xcode 4.5 中找不到解决方法（我能找到的最接近的方法是[这篇](https://stackoverflow.com/a/10052224/766570)文章，但说明不适用于 Xcode 4.5）

想法？

**更新**：我尝试了在构建设置下更改“标题搜索路径”的想法..并按照[此处](https://stackoverflow.com/a/1416999/766570)的建议将“始终搜索用户路径”设置为“是” ..但是如果我尝试这样做，我的项目总是会成功构建，即使我在该字段中放置一条不存在的路径。

# plsql - Oracle 11g：将新 TYPE 声明为 TABLE 时，我必须添加“INDEX BY PLS_INTEGER”吗？

> ID：14355174
> 
> 赞同：5
> 
> 时间：2013-01-16T09:36:30.510
> 
> 标签：plsql, oracle11g

`INDEX BY PLS_INTEGER`在新表类型声明的末尾添加和不添加有什么区别。看这个例子：

```
DECLARE
    GC_BULK_LIMIT CONSTANT INTEGER := 500;
    CURSOR CUR_CLIENTS IS SELECT C.ID, C.NAME FROM CLIENTS C;
    TYPE RT_CLIENTS IS TABLE OF CUR_CLIENTS%ROWTYPE;
    -- TYPE RT_CLIENTS IS TABLE OF CUR_CLIENTS%ROWTYPE INDEX BY PLS_INTEGER;
    LT_CLIENTS RT_CLIENTS;
BEGIN
    OPEN CUR_CLIENTS;
    LOOP
        FETCH CUR_CLIENTS BULK COLLECT INTO LT_CLIENTS LIMIT GC_BULK_LIMIT;
        EXIT WHEN LT_CLIENTS.COUNT = 0;
        FOR I IN 1..LT_CLIENTS.COUNT LOOP
            -- ... SOME LOGIC
        END LOOP;
    END LOOP;
    CLOSE CUR_CLIENTS;
END; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T10:24:34.427

回应“我必须添加”。最简洁的答案是不。

不同之处在于

```
TYPE RT_CLIENTS IS TABLE OF CUR_CLIENTS%ROWTYPE; 
```

是一个嵌套表。这意味着对于这种类型的给定变量，我们知道下标是连续的。即下标从 1 开始，一直到数组长度。

因此，以下循环是访问嵌套表数组的正确方法：

```
FOR I IN 1..LT_CLIENTS.COUNT LOOP 
```

然而，这被称为关联数组：

```
TYPE RT_CLIENTS IS TABLE OF CUR_CLIENTS%ROWTYPE INDEX BY PLS_INTEGER; 
```

（如果需要，您也可以按 a 进行索引`varchar2`）。不同之处在于，这种情况下的下标不必是连续的，这取决于数组的填充方式。在您的代码中，它们会是（因为批量收集会这样做），但并非总是如此。

访问和循环`index by`数组的安全方法是：

```
 v_subscript := t_arr.first;
  while v_subscript is not null loop
    dbms_output.put_line(v_subscript || ': ' || t_arr(v_subscript));
    v_subscript := t_arr.next(v_subscript); 
  end loop; 
```

其中`v_subscript`是`index by`零件数据类型相同的变量。

同样使用嵌套表，您可以使用以下方法快速填充数组：

```
declare
  type myarr is table of number;
  t_arr         myarr;
    v_subscript   number;
begin
  t_arr := myarr(1, 12, 44); 
```

而使用数组索引时，您必须在那里有三行来填充它：

```
 t_arr(1):= 1;
  t_arr(2):= 12;
  t_arr(3):= 44; 
```

对于您的特定情况，没有`index by`完全可以。

进一步阅读：[http ://docs.oracle.com/cd/E18283_01/appdev.112/e17126/composites.htm](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/composites.htm)

# c# - 在表单中提交下拉列表的值和文本

> ID：14355180
> 
> 赞同：1
> 
> 时间：2013-01-16T09:36:48.697
> 
> 标签：c#, .net, asp.net-mvc

我使用 MVC HTML Helper 来呈现 Html DropDownList：

```
@Html.DropDownListFor(m => m.ParentId, menuSelectList) 
```

我把它`DropDownList`放在一个 HTML 表单中。在此表单中按下按钮提交时，将创建一个 HTML 表单数据并在 POST 请求中发送。此数据将包含键名`ParentId`，键值为`DropDownList`'s selected value。如何在此数据中包含**所选文本**`DropDownList`的键名是.**`ParentName`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:47:07.763

1）您可以使用隐藏的“ParentName”输入，并在您的组合（DropDownList）上触发更改事件时使用所选文本（javascript / jQuery）填充它。

2）只需在提交后（在POST操作中）从键中获取值，应该是可能的（例如db查询）。

`selectList`3）以键包含键和值的方式构建您的（`~`例如，以a分隔，并在POST操作中拆分“key~value”）

我个人会选择第二种解决方案，但是......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:31:46.067

您可以使用 JavaScript 来完成，因为浏览器不会将所选文本发送到任何地方。

一个技巧是将此类代码放在 .aspx 页面的最底部：（在 .aspx 之前`</body>`）

```
var arrDDLs = document.getElementsByTagName("select");
for (var i = 0; i < arrDDLs.length; i++) {
    var oDDL = arrDDLs[i];
    if (!oDDL.name || oDDL.name.length === 0)
        continue;
    var inputName = oDDL.name + "_text";
    var input = document.createElement("input");
    input.type = "hidden";
    input.name = inputName;
    input.id = inputName;
    oDDL.form.appendChild(input);
    oDDL.onchange = function () {
        var index = this.selectedIndex;
        var text = (index >= 0) ? this.options[index].text : "";
        var inputName = this.name + "_text";
        var input = document.getElementById(inputName);
        input.value = text;
    };

    //populate initial text:
    oDDL.onchange();
} 
```

这段代码本质上是在[另一个答案](https://stackoverflow.com/a/14355404/447356)中实现第一个想法，并获取所选文本，您只需阅读选择键的请求值加上“_text”，例如：

```
string selectedText = Request.Form[m.ParentId + "_text"]; 
```

[现场测试用例](http://jsfiddle.net/Kv8ky/)。（仅限 JavaScript 端）**

# python - Django，更改用户名

> ID：14355183
> 
> 赞同：8
> 
> 时间：2013-01-16T09:36:58.337
> 
> 标签：python, django

是否可以更改用户名？

我尝试了以下方法：-

```
user = User.objects.get(username = username)
user.username = newusername
user.save() 
```

没有什么变化

我可以在管理屏幕中更改用户名，但有 100 多个客户要求使用不同的用户名。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-15T21:42:07.657

正如您所注意到的（[Django，更改用户名](https://stackoverflow.com/questions/14355183/django-change-username/17664467#comment19963848_14355183)），这是您的代码中的一个错误 - 代码示例没有反映您的代码。发布的代码示例实际上可以更改`User`对象的用户名：

```
user = User.objects.get(username = username)
user.username = newusername
user.save() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T10:49:53.653

还有另一种可能的情况，为什么用户名在保存后没有改变......

您在 User 对象中的用户名默认最大长度为 30，您尝试将用户名更改为超过 30 个字符且新旧用户名的前 30 个字符相同；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-08T19:11:26.353

在更改用户名之前，还要确保用户名不存在：

```
if User.objects.filter(username=newusername).exists():
    raise forms.ValidationError(u'Username "%s" is not available.' % newusername)

user = User.objects.get(username = username)
user.username = newusername
user.save() 
```

# php - Instagram API，需要输入：随着时间的推移从特定主题标签中抓取 instagram 图像并同步最新的，例如本地排序查询的计数

> ID：14355184
> 
> 赞同：0
> 
> 时间：2013-01-16T09:36:58.690
> 
> 标签：php, mysql, api, instagram

你好，警告文字墙:)

我即将建立一个网站来抓取和收集属于两个标签的五个组合的 instagram 照片。第一个标签将是相同的，并且是网站/活动的名称，另一个标签直到成为五个主题之一。

这也需要在 instagram 用户名下进行排序，以便每个用户都可以“收集”所有五个主题的图像。

然后需要将其呈现为按“图像数量 DESC，组合喜欢 DESC”排序的“顶级列表”。每个主题一张图片，换句话说，每个用户最多五张图片。

有点难以解释，我将尝试通过我需要构建的顶级列表的示例来说明它：

排行榜：

**排名 1。**

```
USERNAME - score 27 (has collected all 5 topics and have most combined likes)

(img) #competition #topic-1 5 likes

(img) #competition #topic-2 3 likes

(img) #competition #topic-3 10 likes

(img) #competition #topic-4 5 likes

(img) #competition #topic-5 4 likes 
```

**排名 2。**

```
 USERNAME - score 25

(img) #competition #topic-1 5 likes 

(img) #competition #topic-2 3 likes

(img) #competition #topic-3 8 likes

(img) #competition #topic-4 5 likes

(img) #competition #topic-5 4 likes 
```

**排名 3。**

```
USERNAME - score 38 (has more likes than the leader but has only 4 topics covered..)

(img)#competition #topic-1 5 likes

(img) #competition #topic-2 3 likes

(img) #competition #topic-3 10 likes

(img) #competition #topic-4 20 likes 
```

**排名 4。**

```
USERNAME - score 17
(img) #competition #topic-1 1 likes

(img) #competition #topic-2 2 likes 

(img) #competition #topic-3 3 likes 

(img) #competition #topic-4 11 likes 
```

等等....

我一直在研究 API，似乎“/tags/tag-name/media/recent”是我最好的，如果不仅仅是这个问题的“入口点”？

所以我正在考虑做的是每 5 分钟运行一个脚本，或者直到通过标记为“#competition”的最新图像运行一个脚本，然后检查是否有 5 个辅助标签中的任何一个在那里，如果是 - 如果没有，则保存已经在数据库中。

我想我必须缓存以获取所有与这些标签匹配的图像？我还没有达到每个查询的 Instagrams 对象限制......但如果没有别的，如果我每次都尝试加载，我将达到我自己的服务器超时。

从我的角度来看，最大的痛苦是喜欢，因为这些需要不断地从 instagram 更新以保持记分牌的活力。只是使用 cron 循环遍历所有缓存的图像，然后执行 api 请求来更新每个点赞数，这对于我的服务器和 instagrams api 限制来说似乎都有些繁重。

也许我可以利用登录的用户会话/令牌以某种聪明的方式做到这一点？

还是我应该让团队的其他成员相信这是一个坏主意，我们应该建立或拥有“投票”机制，让比赛保持本地化，与柜台等 Instagram 分开？

请分享您对如何存储和解决此问题的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:39:27.763

我认为标签端点，就像你建议的那样，是要走的路——这将返回你需要的所有数据——并存储在数据库中。这样您就可以进行所有计算（用户聚合、喜欢等），而不必过多担心速率限制、身份验证等。

不幸的是，我认为实时更新获取不会触发点赞（这对你来说是理想的），所以你不得不通过所有图像来获得点赞数，或者像你提到的那样创建你自己的点赞机制- 不确定您的要求是什么以及您期望有多少用户/图片，但如果您随着时间的推移将其分散（即每 x 分钟获得 x 数量），我认为服务器没有任何问题......

当您提到图像缓存时，我假设您的意思是存储 url 而不是实际的二进制图像数据？

# node.js - 在 node.js 中安装 mysql 模块时出错

> ID：14355187
> 
> 赞同：0
> 
> 时间：2013-01-16T09:37:02.607
> 
> 标签：node.js, npm

我尝试通过 npm 为 node.js 安装 mysql 模块。

我使用下一个命令：

```
$npm install -d mysql 
```

这是堆栈跟踪：

```
npm http GET https://registry.npmjs.org/mysql
npm http 200 https://registry.npmjs.org/mysql
npm info install mysql@2.0.0-alpha5 into C:\Users\Yoshi
npm info installOne mysql@2.0.0-alpha5
npm info C:\Users\Yoshi\node_modules\mysql unbuild
npm info preinstall mysql@2.0.0-alpha5
npm info trying registry request attempt 1 at 13:22:30
npm http GET https://registry.npmjs.org/require-all/0.0.3
npm http 304 https://registry.npmjs.org/require-all/0.0.3
npm info install require-all@0.0.3 into C:\Users\Yoshi\node_modules\mysql
npm info installOne require-all@0.0.3
npm info C:\Users\Yoshi\node_modules\mysql\node_modules\require-all unbuild
npm info C:\Users\Yoshi\node_modules\mysql\node_modules\require-all unbuild
npm info C:\Users\Yoshi\node_modules\mysql unbuild
npm info preuninstall mysql@2.0.0-alpha5
npm info uninstall mysql@2.0.0-alpha5
npm info postuninstall mysql@2.0.0-alpha5
npm ERR! Error: ENOENT, open 'C:\Users\Yoshi\node_modules\mysql\node_modules\require-all\package.json'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install"
 "-d" "mysql"
npm ERR! cwd C:\Users\Yoshi\nodejs
npm ERR! node -v v0.9.4
npm ERR! npm -v 1.1.70
npm ERR! path C:\Users\Yoshi\node_modules\mysql\node_modules\require-all\package.json
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\Yoshi\nodejs\npm-debug.log
npm ERR! not ok code 0 
```

你能告诉我有什么问题吗？

谢谢

# wordpress - 将自定义数据添加到 Wordpress 主题的首选方式是什么？

> ID：14355189
> 
> 赞同：0
> 
> 时间：2013-01-16T09:37:06.813
> 
> 标签：wordpress, custom-fields

我已经阅读了许多关于将自定义内容添加到 Wordpress 主题的文章和教程。它们几乎总是指一些小的数据，例如电话号码或电子邮件，这些数据可以通过使用 Wordpress 中的选项机制轻松处理。这很好，我已经设法以多种方式实现相同的功能。

我的问题是；

如果我想为作者添加一个选项以在主页上包含一些自定义内容 - 比如说横幅图像、一段文本（使用 HTML 编辑器）和指向另一个页面的链接，什么是最适合 Wordpress 的这样做的方式？

我可能应该提一下，我不是在寻找操作方法或一步一步，只是在寻找意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:49:03.080

最好的方法是使用[设置 api](http://codex.wordpress.org/Settings_API)。[wp. ​​tutsplus](http://wp.tutsplus.com/tutorials/using-the-settings-api-part-1-create-a-theme-options-page/)上有一个很好的教程，它很长。一个更短的来自[Otto](http://ottopress.com/2009/wordpress-settings-api-tutorial/)。
一开始可能会很混乱，但这并不难。

# c# - 使用 WebAuthenticationBroker 进行 oAuth

> ID：14355195
> 
> 赞同：2
> 
> 时间：2013-01-16T09:37:33.613
> 
> 标签：c#, windows-8, oauth, microsoft-metro

我想将 WebAuthenticationBroker 用于带有 Pocket (http://getpocket.com) 的 oAuth。[在http://getpocket.com/developer/docs/authentication](http://getpocket.com/developer/docs/authentication)中描述了 Pocket API 。问题是重定向uri。在他们的示例中，它被设置为 iOS 和 Android 的自定义协议。你如何在 WinRT 上处理这个问题？

当我提供一个空的重定向 uri 时它不起作用。当我提供像[http://www.google.sk](http://www.google.sk)这样的 uri 时，我会看到 Pocket 的授权对话框，我授权我的应用程序并被重定向到[http://www.google.sk](http://www.google.sk)。但是窗口不会关闭，我只能单击后退按钮，这会导致 WebAuthenticationResult 被取消。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:00:46.137

我相信答案是您必须使重定向 URI ms-app:// 才能使 WebAuthenticationBroker 正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T12:22:42.067

WebAuthenticationBroker 需要一个回调 URI。如果在 Web 视图中调用此 URI，*主机将结束导航并向代理发出信号*- 如[MSDN 上的 Web 身份验证代理工作流中](http://msdn.microsoft.com/en-us/library/windows/apps/hh750286.aspx)所述。

您作为 POST 参数提交的 Pocket API`redirect_uri`应该与`WebAuthenticationBroker.GetCurrentApplicationCallbackUri`.

您可以将其指定为第三个参数：

```
WebAuthenticationBroker.AuthenticateAsync(options, requestUri, callbackUri) 
```

顺便说一句：
如果您需要一个简单的 Pocket API 包装器，我已经为 C# 构建了一个名为[PocketSharp](http://pocketsharp.frontendplay.com)

# android - 在android中使用http比较服务器上文件的大小和sdcard上的文件大小

> ID：14355196
> 
> 赞同：0
> 
> 时间：2013-01-16T09:37:40.523
> 
> 标签：android, filesize

我可以使用 android 下载管理器很好地从服务器下载文件并将其保存在 sdcard 中。

现在我需要获取服务器中文件的大小以与 sdcard 上下载的文件进行比较。我能够获得下载文件的大小，现在我需要帮助来创建一种方法来返回服务器中文件的大小，我已经尝试过这个但不起作用..

```
 public  int getFileSizeAtURL(URL url)
        {

          int filesize = -1;

          try
          {
              URL urls = new URL(file_url);
              HttpURLConnection http = (HttpURLConnection)urls.openConnection();
              http.connect();
              filesize = http.getContentLength();
              http.disconnect();

          }
          catch(Exception e)
          {

          }

          return filesize;

        } 
```

通过使用

```
 Toast.makeText(getApplicationContext(),getFileSizeAtURL(urls)+" kb", Toast.LENGTH_LONG).show(); 
```

它给了我初始化值..-1kb 我怎样才能使用这个方法，以便它返回文件大小

```
 Solved it !!!! 
```

我通过将此代码放在主要方法上解决了我的问题

```
 if (android.os.Build.VERSION.SDK_INT > 9) {
                            StrictMode.ThreadPolicy policy = 
                                new StrictMode.ThreadPolicy.Builder().permitAll().build();
                            StrictMode.setThreadPolicy(policy);
                        } 
                      URL urls = new URL(file_url);
                      HttpURLConnection http = (HttpURLConnection)urls.openConnection();
                      http.connect();
                      int filesize = http.getContentLength();

                      http.disconnect(); 
```

它给了我服务器中文件的文件大小，现在我可以与 sdcard 上的文件进行比较

```
 File file=Environment.getExternalStorageDirectory();
                        String filename = file.getPath() + "/test/testing";
                        File myfile = new File(filename);
                        long size = myfile.length() 
```

享受伙计们！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:40:39.173

```
final URLConnection connection = url.openConnection();
final int length = connection.getContentLength(); 
```

尝试使用[`URLConnection.getContentLength`](http://developer.android.com/reference/java/net/URLConnection.html#getContentLength%28%29)如上。如果服务器没有指定长度，那么你就无法知道。

`length`返回服务器文件大小。这样您就可以比较这两个文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:35:50.573

```
 if (android.os.Build.VERSION.SDK_INT > 9) {
                        StrictMode.ThreadPolicy policy = 
                            new StrictMode.ThreadPolicy.Builder().permitAll().build();
                        StrictMode.setThreadPolicy(policy);
                    } 
                  URL urls = new URL(file_url);
                  HttpURLConnection http = (HttpURLConnection)urls.openConnection();
                  http.connect();
                  int filesize = http.getContentLength();

                  http.disconnect(); 
```

它给了我服务器中文件的文件大小，现在我可以与 sdcard 上的文件进行比较

```
 File file=Environment.getExternalStorageDirectory();
                    String filename = file.getPath() + "/test/testing";
                    File myfile = new File(filename);
                    long size = myfile.length() 
```

# java - JSF/PrimeFaces 对话框中的 Javabean 验证错误

> ID：14355197
> 
> 赞同：2
> 
> 时间：2013-01-16T09:37:41.350
> 
> 标签：java, jsf, jsf-2, primefaces, bean-validation

最近我已将我的应用程序更新到 JSF 2.1.7 和 PrimeFaces 3.4.2。当下面的对话框用于添加新组时，在保存新组之前，我收到**“名称大小必须在 1 到 40 之间”**验证错误。当我单击选择器的添加按钮时会发生这种情况。我了解显示此消息是因为验证失败。`immediate=true`添加到 p:commandButton时不会出现验证错误。我不知道是什么触发了验证。

```
<h:form id="formg" prependId="false">
    <!-- messages -->
    <p:growl id="msgsg" showDetail="true" />

    <!-- data table -->
    <ui:include src="/WEB-INF/flows/groupsTable.xhtml" />

    <p:separator />

    <!-- bottom tool bar -->
    <ui:include src="/WEB-INF/flows/groupsToolBar.xhtml" />

    <!-- preview, edit dialog -->
    <ui:include src="/WEB-INF/flows/groupsDialog.xhtml" />
</h:form>

<p:dialog id="dialogg" header="#{groupsBean.dialogTitle}"
    widgetVar="groupsDialog" dynamic="true" resizable="false" width="800"
height="600" showEffect="fade" hideEffect="fade" modal="true">
    <p:ajax event="close" listener="#{groupsBean.refresh}"
        immediate="true" update=":formg" global="false" process="@this" />

    <p:tabView id="tabPicker">
        <p:tab title="General">
            <h:panelGrid id="displayg" columns="2">
                <h:outputText value="#Group name*:" />
                <p:inputText value="#{groupsBean.selectedGroup.name}" size="40"
                    readonly="#{!groupsBean.updatable}" maxlength="40" />
            </h:panelGrid>
        </p:tab>
        <p:tab title="Members">
            <ui:include src="/WEB-INF/custom/picker.xhtml">
                ... some params passed to picker
            </ui:include>
        </p:tab>
    </p:tabView>
</p:dialog> 
```

选择器类似于[`<p:password>`](http://www.primefaces.org/showcase-labs/ui/picklist.jsf)，它由两个 p:dataTable 组件和它们之间的 4 个按钮组成。这些按钮与 ah:panelGrid 组合在一起。按钮属性类似。这是按钮示例代码：

```
<p:outputPanel autoUpdate="true">
    <p:commandButton actionListener="#{eval.evaluateAsMethod(pickerAdd)}"
    update="source, target, #{messages}" immediate="true"
    disabled="#{pickerSourceDisabled}"
    icon="ui-icon ui-icon-arrowthick-1-s" />
</p:outputPanel> 
```

*source* , *target*是两个数据表的 id。*pickerAdd*作为参数传递，值为`groupsBean.picker.add`. 这些表包含 FooDomain 对象。

```
public class FooDomain implements Serializable {
    ...
    @NotNull  
    @Size(min = 1, max = 40)
    @Column(name = "NAME")
    private String name;
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:56:02.540

PrimeFaces`<p:commandButton>`默认处理整个表单（如，`process="@form"`），因此默认情况下会触发所有验证。您的验证错误来自`@Size`对属性的限制。如果您只想处理按钮自己的操作，那么您应该添加`process="@this"`.

```
<p:commandButton ... process="@this" /> 
```

`immediate="true"`也可以使用它来解决它，但它在幕后的行为有些不同：仍然处理整个表单，但是在 APPLY_REQUEST_VALUES 阶段而不是 INVOKE_ACTION 阶段调用该操作。并且只有已经设置的输入组件*也*`immediate="true"`将被处理，其他的将被跳过。

# .net - 如何更改视图文件夹位置？

> ID：14355204
> 
> 赞同：0
> 
> 时间：2013-01-16T09:37:56.920
> 
> 标签：.net, asp.net-mvc

我正在使用 .Net MVC 4，并构建了一个主题引擎，可以将视图搜索`~/views/`从`~/themes/foo/views`. 这一切正常，但 Visual Studio 环境不知道该文件夹存在，所以我得到上下文错误。

环境如何知道视图在哪个文件夹中？我该如何编辑/更改它？

更新：移动视图文件夹时，Visual Studio 中的智能感知不提供正确的基于上下文的菜单。如何告诉 Visual Studio 视图文件夹存在的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:50:19.407

您需要继承 WebFormViewLocator 并将您的自定义路径添加到路径列表中。

查看[这篇文章](http://blogs.teamb.com/craigstuntz/2008/07/31/37827/)以了解如何实现这一点。

# javascript - 灯箱中的 Javascript

> ID：14355209
> 
> 赞同：1
> 
> 时间：2013-01-16T09:38:02.840
> 
> 标签：javascript, jquery, lightbox

在灯箱中使用 JavaScript 时遇到问题：我已经为我的网站实现了评级功能。当我在普通的嵌入式 html 中使用该功能时，效果很好，但用户会被带到反馈页面。我想使用灯箱来提供反馈，让用户有可能提供反馈并留在他实际所在的位置。

现状：一切正常，但 JS 脚本未在灯箱中启动。表示评级的单选按钮不会被带有星形图像的脚本替换。最后我收到这个错误：

> TypeError: starRating is undefined starRating.create('.feedbackSelect');

当我从 Firebug 中复制错误时，我收到以下信息：

> TypeError：starRating 未定义 [http://xxx.xxx.xxx.xxx/xxxx/interface/themes/blueprint/js/jquery.min.js/eval/seq/2](http://xxx.xxx.xxx.xxx/xxxx/interface/themes/blueprint/js/jquery.min.js/eval/seq/2)第2行

var starRating 在后面的行中定义：

```
var starRating = {
  create: function(selector) {
... 
```

让我感到困惑的是，Firebug 指的是另一个文件，即 jQuery 库，并且再次：没有灯箱它可以正常工作。我会感谢任何提示如何解决这个问题！

pd：这里是 smarty 的 html 代码：

```
{js filename="feedback.js"}

{* <div class="span-5 {if $sidebarOnLeft}pull-18 sidebarOnLeft{else}last{/if}">
  {include file="MyResearch/menu.tpl"}
</div> *}

<div class="span-18{if $sidebarOnLeft} push-5 last{/if}">
  {if $user->cat_username}
    <h1>{translate text='Feedback'}</h1>
    <br>
    {if $success}
      <p class="success">{translate text='feedback_thanks'}</p>
    {else}
      {if $errorMsg}
        <p class="error">{translate text=$errorMsg}</p>
      {/if}
      <form method="post" action="{$url}/Feedback/Feedback" id="feedback_form">
        <input type="hidden" name="hash" value="{$hash|escape}" />
        <table id="feedback" class="citation">
        {if $feedbackIssues}

          {foreach from=$feedbackIssues item=issue}

        <tr>
          <th>{translate text=$issue->title}:</th>
          <td class="feedbackSelect">
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-1"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-1" name="issue{$issue->id|escape}" type="radio" value="1"/>0.5</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-2"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-2" name="issue{$issue->id|escape}" type="radio" value="2"/>1</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-3"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-3" name="issue{$issue->id|escape}" type="radio" value="3"/>1.5</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-4"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-4" name="issue{$issue->id|escape}" type="radio" value="4"/>2</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-5"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-5" name="issue{$issue->id|escape}" type="radio" value="5"/>2.5</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-6"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-6" name="issue{$issue->id|escape}" type="radio" value="6"/>3</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-7"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-7" name="issue{$issue->id|escape}" type="radio" value="7"/>3.5</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-8"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-8" name="issue{$issue->id|escape}" type="radio" value="8"/>4</label>
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-9"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-9" name="issue{$issue->id|escape}" type="radio" value="9"/>4.5</label> 
            <label for="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-10"><input id="{$issue->title|lower|regex_replace:'/[^a-z0-9]/':''|escape}-10" name="issue{$issue->id|escape}" type="radio" value="10"/>5</label>  
          </td>
        </tr>
        {/foreach}
        {/if}

        <tr>
          <th>{translate text="Comments"}:</th>
          <td><textarea name="comment" class="formularLarge">{$comment}</textarea></td>
        </tr>

        <tr>
          <th>&nbsp;</th>
          <td><input type="submit" name="submitFeedback" value="{translate text="submit_feedback"}" class="senden"></td>
        </tr>

        </table>
      </form>
    {/if}
  {else}
    {include file="AJAX/login.tpl"}
  {/if}
</div>

<div class="clear"></div> 
```

# jquery - 使用编辑规则在网格中进行验证的 jqgrid 内联编辑

> ID：14355212
> 
> 赞同：2
> 
> 时间：2013-01-16T09:38:11.860
> 
> 标签：jquery, validation, jqgrid

我正在使用 jqGrid 内联编辑和网格中的验证，使用编辑规则向数据库添加和更新值。

问题是在将值提交到服务器后出现验证失败警报

```
 colModel: [
     {name: 'Country', 
     index: 'Country', 
  editable: true, 
  edittype: 'text',
  sortable: false, 
     align: 'left', 
    search: false,
validation: { required: true }}
    ], 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:46:24.317

来自 的项目没有`validation`属性`colModel`。您应该使用正确的属性名称[editrules](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editrules)：

```
editrules: { required: true } 
```

此外，您可以删除不需要的属性`edittype: 'text'`和（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acolmodel_options)`align: 'left'`中的默认值）。因为属性的值与你的值相同，你也可以删除它。`index``name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T06:13:33.470

在**JqGrid 中**

每当我们尝试在 jqGrid 中创建或更新记录时，如果有任何错误，它会引发错误吗？

我们可以通过两种方式做到这一点

1）**服务器端调用**-

它将访问服务器并通过 successfun() 或 errorfunction() 将响应返回给网格，jqGrid 可以自动处理。

2)**客户端验证**-

**它用于在使用editrules**选项将值提交到服务器之前验证用户输入

**编辑规则**

此选项向可编辑元素添加附加属性，应在 colModel 中使用。

句法：

**{name:'price', ..., editrules:{required:true}, editable:true }**

**自定义功能：**

我们可以为该特定列使用我们自己的自定义函数通过使用**custom:true**属性

# c++ - 在同一个 R 包中组合 C 代码

> ID：14355219
> 
> 赞同：3
> 
> 时间：2013-01-16T09:38:27.717
> 
> 标签：c++, r

假设我在两个不同的`R`包中有两个独立的 cpp 代码：（请不要从字面上理解这些示例，这些是我问题的最小版本）。

```
#include <algorithm>
#include <Eigen/Dense>

using namespace std;
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;
using Eigen::RowVectorXf;

float Fmedian(VectorXf& x){
    const int n=x.rows();
    const int half=(n+1)/2-1;               
    float med;
    std::nth_element(x.data(),x.data()+half,x.data()+x.size()); 
    if((n%2)==1){
        med=x(half);
    } else {
        float tmp0=x(half);
        float tmp1=x.segment(half+1,half-1).minCoeff(); 
        med=0.5*(tmp0+tmp1);
    }
    return med;
}
extern "C"{
    void R_Fastmedian(int* n,float* X,int* fMet){
        MatrixXf xi=Map<VectorXf>(X,*n);        
        float Um=Fmedian(xi);
        *fMet=Um;
    }
} 
```

然后，在另一个文件中，我有：

```
#include <algorithm>
#include <Eigen/Dense>

using namespace std;
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;
using Eigen::RowVectorXf;

float Fmedian(VectorXf& x){
    const int n=x.rows();
    const int half=(n+1)/2-1;               
    float med;
    std::nth_element(x.data(),x.data()+half,x.data()+x.size()); 
    if((n%2)==1){
        med=x(half);
    } else {
        float tmp0=x(half);
        float tmp1=x.segment(half+1,half-1).minCoeff(); 
        med=0.5*(tmp0+tmp1);
    }
    return med;
}
float Fmad(VectorXf& x,float& med){
    const int n=x.rows();
    const int half=(n+1)/2-1;
    float mad;              
    x-=med;
    x=x.cwiseAbs();
    std::nth_element(x.data(),x.data()+half,x.data()+x.size()); 
    if((n%2)==1){
        mad=x(half);
    } else {
        float tmp0=x(half);
        float tmp1=x.segment(half+1,half-1).minCoeff(); 
        mad=0.5*(tmp0+tmp1);
    }
    return(mad*1.4826);
}
extern "C"{
    void R_Fastmad(int* n,float* X,int* fMet){
        MatrixXf xi=Map<VectorXf>(X,*n);        
        float U1=Fmedian(xi);
            float U2=Fmad(xi,U1);
        *fMet=U2;
    }
} 
```

现在，我想将这两个功能组合在一个包中。当我使用 编译第二个代码`R CMD`时，我会收到 Fmedian 的错误，大意是该函数已在第一个文件中定义。将这两个文件链接在一起的最直接方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:05:00.020

如果我没看错，`Fmedian`那么两个文件中的实现完全相同。但编译器实际上并不知道这一点，因为它们可能不同并导致歧义，因此出现错误。要修复它，您应该将两种实现统一为一个。

一种方法是：

```
// the first file
#include <algorithm>
#include <Eigen/Dense>

using namespace std;
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;
using Eigen::RowVectorXf;

// Forward-declare Fmedian as an external function.
// This means that its definition will be found
// in some other file (C++ translation unit) during compilation.
extern float Fmedian(VectorXf& x);

extern "C" {
    void R_Fastmedian(int* n,float* X,int* fMet){
        MatrixXf xi=Map<VectorXf>(X,*n);        
        float Um=Fmedian(xi);
        *fMet=Um;
    }
} 
```

你的第二个文件保持不变。

* * *

另请参阅[C++](https://stackoverflow.com/questions/6218793/externing-functions-in-c)中[的外部函数，链接器如何知道外部函数的定义在哪里？](https://stackoverflow.com/questions/12879081/how-does-the-linker-know-where-is-the-definition-of-an-extern-function)

# oracle - 在休眠状态下查询？

> ID：14355220
> 
> 赞同：1
> 
> 时间：2013-01-16T09:38:27.783
> 
> 标签：oracle, hibernate, hibernate-criteria

我正在使用休眠，我可以使用它来获得工资为 2000 的员工名单。

```
Criteria cr = session.createCriteria(Employee.class);
cr.add(Restrictions.eq("salary", 2000));
List results = cr.list(); 
```

现在我想让员工的薪水为 2000 和 3000 。

我如何`in query`使用标准在休眠中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:50:56.990

您可以使用 Restrictions.in 即

```
 Criteria cr = session.createCriteria(Employee.class);
        List<Integer> salaryList = new ArrayList<Integer>();
        salaryList.add(2000);
        salaryList.add(3000);
        criteria.add(Restrictions.in("salary", salaryList));
        List results = cr.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:12:30.853

朋友可以用这个

```
 List list =session.createCriteria(Employee.class).
add(Restrictions.between("salary",2000,3000); 
```

这之间的方法非常有用

# javascript - 在画布上绘制花哨的圆圈有奇怪的效果

> ID：14355230
> 
> 赞同：3
> 
> 时间：2013-01-16T09:39:00.693
> 
> 标签：javascript, geometry, html5-canvas, drawing

我正在尝试在画布上画一个圆圈，它的生成方式如下：

![效果怪异的圆圈](../Images/730b39355bfc2e9ea70ffaa70708fcfb.png)，并放大： ![在此处输入图像描述](../Images/05d0729a362a7e6468916f45939735fe.png)

我不确定为什么会发生这种情况，尽管我之前已经看到过效果并且我怀疑这与部分像素有关（尽管我没有这样做）。[在这个jsfiddle](http://jsfiddle.net/metalskin/gcpvv/2/)可以看到一个工作示例。

总结一下代码，我正在使用一个函数来绘制圆圈。我逐渐向内绘制内部和外部边缘，同时调整 alpha。代码如下：

```
function drawCircle(x, y, radius, startAngle, endAngle, antiClockwise, lineWidth, r, g, b, a) {
    c.beginPath(); 

    var w = Math.abs(lineWidth / 2);

    var alphaFactor = a / w;
    var alpha = alphaFactor;

    var outer = radius + w;
    var inner = radius - w;

    // draw centre line
    c.lineWidth = 1;
    c.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';
    c.arc(x, y, radius, startAngle, endAngle, true); 
    c.stroke();

    for(i = 0; i < w; i++, inner++, outer--, alpha += alphaFactor) {
        // draw inner
        c.beginPath(); 
        c.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + alpha + ')';
        c.arc(x, y, inner, startAngle, endAngle, true); 
        c.stroke();

        // draw outer
        c.beginPath(); 
        c.arc(x, y, outer, startAngle, endAngle, true); 
        c.stroke();
    }
}; 
```

我相信我可以使用径向渐变来解决这个问题（我认为会更快，具体取决于线的宽度），但是我想了解为什么会出现上面显示的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:46:04.300

我想这是由于非直线（一个圆圈包含很多）的抗锯齿/圆角效果。特别是，线宽（非常）小。我的猜测是，这会导致部分重叠的圆线，部分彼此相邻的线，甚至可能在某些地方留下间隙的线......

这个问题似乎通过增加线宽来解决：

```
c.lineWidth = 1.4; 
```

请参阅更新的[jsFiddle 演示](http://jsfiddle.net/veger/gcpvv/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:01:45.757

我通过不绘制单条线而仅绘制一条带有径向渐变的线来解决问题，从而重现了我正在寻找的效果：

![在此处输入图像描述](../Images/ea9b33888c3a42e693b30ef1f0f0cc8a.png)

这似乎（afaict）效率更高，因为它只使用一个填充，而不是多个笔画。

可以在这个[JSFiddle](http://jsfiddle.net/metalskin/MYedA/)看到解决方案，而代码非常小：

```
$(function () {
  draw(document.getElementById('canvas').getContext('2d'));

  function draw(ctx) {
    var radgrad = ctx.createRadialGradient(60, 60, 0, 60, 60, 60);
    radgrad.addColorStop(0.8, 'rgba(255,0,0,0)');
    radgrad.addColorStop(0.85, 'rgba(255,0,0,.6)');
    radgrad.addColorStop(0.9, 'rgba(255,0,0,1)');
    radgrad.addColorStop(0.95, 'rgba(255,0,0,.6)');
    radgrad.addColorStop(1, 'rgba(255,0,0,0)');

    ctx.fillStyle = radgrad;
    ctx.arc(60, 60, 60, 0, 2 * Math.PI, true);
    ctx.fill();
  }
}); 
```

我从另一个[问题](https://stackoverflow.com/a/9743575/1125784)的解决方案中得出我的解决方案。

# java - 来自字符串的键盘输入

> ID：14355241
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:39:35.700
> 
> 标签：java, string

我有这个代码

```
 System.out.println("Enter surname to search for:");
 String choice2;
 choice2= sc.nextLine(); 
```

在我看来，这应该可行，但由于某种原因，程序没有暂停等待用户输入姓氏，下一行代码正好在它之后执行。请问这段代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:51:35.340

This code is correct , and already wait until the user enter the name , but this code will not pausing in case of you press the Enter key before you enter the name because you use **sc.nextLine()** , but **sc.next()** will wait you until you enter the text

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:49:59.320

这将尝试`choice2`使用“Hello”之类的东西打印值：

```
 System.out.println("Enter surname to search for:");
 String choice2;
 choice2= sc.nextLine();
 System.out.println("Hello "+choice2); 
```

让我们看看这条线是否正在打印，但它不应该。

如果它的打印`Hello`并且没有其他任何东西意味着您输入了额外的新行，那么只需`choice2= sc.nextLine();`在下面再次调用一个条件 ifchoice2 is `""`。

```
 System.out.println("Enter surname to search for:");
 String choice2;
 choice2= sc.nextLine(); 
 while(choice2.equels("").trim()){
     choice2= sc.nextLine();      
  } 
```

有关更多详细信息，请访问以下站点。

[扫描器](http://www.cs.utexas.edu/users/ndale/Scanner.html)

# c++ - 在队列循环中找到最少的

> ID：14355250
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:40:07.817
> 
> 标签：c++, loops, struct, queue

我有一个队列循环（队列`n`数），我想搜索所有大小的队列并找到最小大小的队列。

我只是想到了一个逻辑

```
std::queue<int> q;
/* fill queue ... */
int min_value = INT_MAX;
std::size_t size = q.size();
for( q=2; q=n; q++){ // from the second queue to the end queue
if
 min_value=min.size() > q.size()?
 q.size()=min_value 
```

这个逻辑是否正确，我不确定，有人可以帮助我！

**编辑**：我试图弄清楚

```
std::queue<int> q;
    /* fill queue ... */
    int min_value = INT_MAX;
    std::size_t size = q.size();
    for( q=0; q<n; q++){ // given loop of queues
    if
    (q.size()<min_value) // q.size() is compared with the min_value (limits MAX)
    min_value=q.size(); // any value of my q.size() which is less than INT_MAX will initially be declared the minimum value. On subsequent iterations this value is refined -- if a smaller value is found that's used for future iterations. at the end of loop, i will get the least value. 
```

这个逻辑正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:53:10.857

你有几个错误：

1.  大多数语言中的数组包括`c++`零索引，因此循环可能应该是：

    ```
    for( q=0; q<n; q++){ 
    ```

    注意：您的条件`q=n`完全没有意义，会导致无限循环。

2.  在循环中使用`min_value`not `min.size`which 没有任何意义。

3.  在循环中和之前按索引访问队列。我建议您将队列保留在向量中，因此这将是：

    ```
    std::vector<std::queue<int> > q; 
    ```

    并且您使用 . 访问给定队列的大小`q[i].size()`。

# ios - UINavigationBar隐藏时如何通过触摸事件查看UINavigationBar下方

> ID：14355251
> 
> 赞同：0
> 
> 时间：2013-01-16T09:40:11.057
> 
> 标签：ios, uinavigationcontroller

我的应用程序有一个全屏页面（使用`UINavigationController`）。我已经隐藏了`NavigationBar`和状态栏，但是我发现当隐藏`NavigationBar`和状态栏时，触摸事件无法传递到下面的视图。

我需要定制`UINavigationController`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:35:49.510

是的，您可以使用自定义导航栏。在其上添加一个视图并为该视图添加一个手势。

# iphone - 在 iPhone 中安全地保存硬币计数

> ID：14355254
> 
> 赞同：0
> 
> 时间：2013-01-16T09:40:16.377
> 
> 标签：iphone, ios, security, nsuserdefaults

我尝试通过网络搜索并找到了一种将应用内购买布尔变量安全保存在钥匙串中的方法。但我想要的是保存计数，因为用户可以轻松地操纵用户默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:10:45.070

您始终可以将您的值转换为 NSString 并将其保存在钥匙串中并在阅读后将其转换回来

# tomcat - Liferay死了，如何修复？

> ID：14355257
> 
> 赞同：2
> 
> 时间：2013-01-16T09:40:23.280
> 
> 标签：tomcat, liferay

突然，我试图查看我的 liferay 6.1.1 tomcat 7.0.27 服务器：

```
HTTP Status 500 - 

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 
org.apache.jasper.JasperException: java.lang.NullPointerException
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 
java.lang.NullPointerException
    com.liferay.portal.util.PortalUtil.getHomeURL(PortalUtil.java:605)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:114)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这一切意味着什么以及如何使我的服务器正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T11:25:27.623

我遇到了同样的问题，只有 /webapps/ROOT 文件夹中的 web.xml 文件丢失了。从备份中获得了相同的文件，Liferay 恢复了活力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:39:54.900

在相同的 Liferay/Tomcat 版本上，我突然遇到了完全相同的错误。

检查已部署的 portlet。在我的例子中，webapps 文件夹中的所有 portlet、主题和 ROOT 的 web.xml 都已删除。我不知道原因，也许 Liferay 做了一些魔法。在我从备份中恢复已删除的 web.xml-s 后，一切又开始工作了。

# sql-server - 如何使用默认 dbo 模式创建简单成员资格表

> ID：14355261
> 
> 赞同：3
> 
> 时间：2013-01-16T09:40:31.873
> 
> 标签：sql-server, asp.net-mvc-4, simplemembership

我首先使用实体​​框架代码对 SQL 服务器的简单成员资格有疑问。

当我跑

```
WebSecurity.InitializeDatabaseConnection( "MyDB", "Users", 
                                          "UserID", "Username", true); 
```

在我自己的开发电脑上，它创建了下表

```
dbo.Users
dbo.webpages_Membership
dbo.webpages_Roles
dbo.webpages_UsersInRoles 
```

但是，当我在主机上运行该站点时，它会将表创建为：

```
myusername.Users
myusername.webpages_Membership
myusername.webpages_Roles
myusername.webpages_UsersInRoles 
```

请问，如何让简单的成员资格提供程序使用默认的 dbo 模式创建表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:06:31.150

您可以在此处找到一种无需为用户指定默认架构的好方法。

您只需要遵循[此实现](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)并定义默认架构。像这样：

```
[Table("webpages_Membership", Schema = "SCHEMA_NAME")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:02:20.400

```
WebSecurity.InitializeDatabaseConnection uses the default schema 
assigned to your Database User to create\access the tables 
for the SimpleMembershipProvider. 
```

因此，您需要更改用户在主机数据库上的默认模式。

您的主机是否允许您为数据库用户设置默认模式？

# objective-c - 如何在objective-c中fork一个项目

> ID：14355266
> 
> 赞同：0
> 
> 时间：2013-01-16T09:40:51.387
> 
> 标签：objective-c, xcode4.5

假设您创建了一个项目。然后你想做点别的。您想创建另一个使用前一个项目的所有文件的项目。然后你稍微修改一下。

在 vb.net 中很简单。您只需复制 vbproj 文件即可。

在 Objective-C 中，复制 xcproj 将导致无法编译的项目文件。

解决方案？

笔记：

1.  我不想做简单的复制。如果我做简单的复制更改将不会传播。我想如果叉子改变，原始文件也会改变。
2.  据我所知，更改项目文件名会使项目无法编译。因此，除非我做错了什么，否则仅复制项目文件是行不通的。

我认为在更改 xcodeproj 文件的名称后没有简单的方法使项目工作，这完全是荒谬的？我什至无法在 textedit 中打开那个 xcodeproj 文件。在 vb.net 中，我可以直接破解项目文件。为什么不在 xcode 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:45:17.760

我更喜欢两种选择：-

如果有一些类是不变的并且没有变化，你可以制作一个叫做 Cocoa Touch 静态库的库

或者

只需将文件夹复制到另一个位置，重命名应用程序名称和您想要进行的更改并运行它！

希望这些信息对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T09:45:41.240

我渴望有一天你可以简单地从 Xcode(!) 中选择“另存为模板”。与此同时，从 AppStore中查看[Project Duplicator可能会让你有些头疼。](https://itunes.apple.com/no/app/project-duplicator-for-xcode/id467950482?l=nb&mt=12)我自己还没有尝试过，但听起来它的设计目的正是为了满足您的要求。

如果您想以手动方式执行此操作，您可以在 Finder 中复制包含所有相应文件的文件夹，然后从那里重命名所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T14:37:13.077

您可以为您的项目创建多个目标。看看这个[链接](http://blog.just2us.com/2009/07/tutorial-creating-multiple-targets-for-xcode-iphone-projects/)。

# asp.net - 使用查询字符串在 .net 4.0 中重写 URL

> ID：14355270
> 
> 赞同：1
> 
> 时间：2013-01-16T09:41:07.167
> 
> 标签：asp.net, c#-4.0

我怎样才能从

www.xyz.com/department.aspx?p=9&c=8

到

www.xyz.com/department?p=9&c=8

我尝试了很多示例，但无法完成。

```
RouteTable.Routes.MapPageRoute("department", "/department{*queryvalues}", "~/department.aspx", false, new RouteValueDictionary { { "p", @"\d{4}" } }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:45:33.343

并不是说这是你想要的答案。我发现在 Web 中使用路由是一件有问题的事情。更容易使用 Url Rewriter 模块，该模块拦截请求并重写 url，以便将其发送到正确的页面。

这是 scott gu 关于如何做到这一点的文章。

[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

如果您对此有任何疑问，请在评论中提问或开始聊天？

# google-app-engine - 使用java的谷歌应用引擎中blobinfo的文件名属性

> ID：14355272
> 
> 赞同：0
> 
> 时间：2013-01-16T09:41:08.440
> 
> 标签：google-app-engine

我已`blob`使用 java 将文件存储在应用程序引擎中。显示`blobInfo`所有详细信息。我已经使用以下代码显示：

```
 BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
 Iterator<BlobInfo> blobInfos = blobInfoFactory.queryBlobInfos(); 
```

现在如何在java中单独检索文件名属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:23:01.733

您需要`blobKey`，那么最简单的是：

```
BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(blobKey)
String blobFilename = blobInfo.getFilename(); 
```

# python - 如何获取最近插入的行的主键值

> ID：14355276
> 
> 赞同：1
> 
> 时间：2013-01-16T09:41:19.313
> 
> 标签：python, mysql

```
import MySQLdb 
```

如何获取最近插入的行的主键值，在下面的执行中。

```
cursor = mysql.cursor()
cursor.execute("""INSERT INTO foos (val1,val2) VALUES (%s,%s)""", (v1, v2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:44:36.583

从[文档](http://www.python.org/dev/peps/pep-0249/)：

> 光标.lastrowid
> 
> 此只读属性提供最后修改行的 rowid（大多数数据库仅在执行单个 INSERT 操作时才返回 rowid）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:43:26.397

您可以在表上添加时间戳并使用`now() - interval 1 hour`例如获取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:44:28.063

Ignacio 的答案更适合您使用的 API，但一般来说。

MySQL 允许您获取最近插入的 ID。

```
SELECT LAST_INSERT_ID(); 
```

# nginx - RabbitMQ 管理 Nginx 代理

> ID：14355278
> 
> 赞同：6
> 
> 时间：2013-01-16T09:41:21.020
> 
> 标签：nginx, rabbitmq

我有负载均衡器和带有 rabbitmq 代理的 vm。如果我要创建rabbitmq的代理，则在rabbitmq上使用插件管理打开5672端口recive

> > curl：（52）来自服务器的空回复

我可以通过 telnet 连接到 rmq 服务器并进行回调

> > curl：（56）Recv失败：对等方重置连接

Nginx 配置

```
server {
    listen    xxx.xxx.xxx.yy:80;
    server_name xxxxxxxxxx
    access_log acces.log;
    error_log error.log;
    location / {
            client_body_buffer_size 128k;
            proxy_send_timeout   90;
            proxy_read_timeout   90;
            proxy_buffer_size    4k;
            proxy_buffers     16 32k;
            proxy_busy_buffers_size 64k;
            proxy_temp_file_write_size 64k;
            proxy_connect_timeout 30s;
            proxy_pass   http://xxx.xxx.xxx.xx:5672;
            proxy_set_header   Host   $host;
            proxy_set_header   X-Real-IP  $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T09:58:08.810

哦，我把管理插件的端口弄错了，是15672，不是5672。一切都好

```
server {
    listen    xxx.xxx.xxx.yy:80;
    server_name xxxxxxxxxx
    access_log acces.log;
    error_log error.log;
    location / {
        client_body_buffer_size 128k;
        proxy_send_timeout   90;
        proxy_read_timeout   90;
        proxy_buffer_size    4k;
        proxy_buffers     16 32k;
        proxy_busy_buffers_size 64k;
        proxy_temp_file_write_size 64k;
        proxy_connect_timeout 30s;
        proxy_pass   http://xxx.xxx.xxx.xx:15672;
        proxy_set_header   Host   $host;
        proxy_set_header   X-Real-IP  $remote_addr;
        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
    }
} 
```

# regex - 如何根据值将目录中的所有文件夹移动到子目录？

> ID：14355279
> 
> 赞同：1
> 
> 时间：2013-01-16T09:41:21.960
> 
> 标签：regex, linux

我继承控制权的旧版 Web 应用程序似乎已达到我的 Web 服务器上文件夹中的最大子目录数。每当在系统中创建文章时，它的静态内容都会放置在与 pattern 匹配的文档根目录的子目录中`/uploads/story/{STORY_ID}/`。但是现在系统无法在文件夹中创建任何新目录`/uploads/story/`。

我想分两步解决这个问题，但我不确定如何运行必要的 linux 命令来实现这一点。你能帮忙吗？

1.  作为为我争取更多时间来实现更好的目录结构的临时解决方案，我想归档 STORY_ID 小于 1000 的所有故事的静态内容。这些应该`/uploads/story/`从`/uploads/story_archive/`.

2.  我会将上传路径更改为`/uploads/story/{THOUSANDS}/{STORY_ID}/`在代码中，但需要能够将其中的所有文件夹移动`/uploads/story/`为这种格式。例如`/uploads/story/65312/`会变成`/uploads/story/65/65312/`. 我怎样才能做到这一点？

## 编辑

修复 (1) 就像运行一样简单：

```
$ cd /path/to/uploads/
$ mkdir story_archive
$ for i in {1..999}; do mv story/$i story_archive/; done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:59:01.763

鉴于您确定`/uploads/story/*`会在零件中给您一个编号`*`，您可以执行以下操作（**注意：备份整个内容以防万一**）：

```
# update this based on your actual directory
path_to_fix=/uploads/stories

# move the directories out of the way so they don't get mixed up
mv $path_to_fix $path_to_fix/../temp
mkdir $path_to_fix > /dev/null 2>&1

# get all directories to be moved
dirs=$(ls $path_to_fix/../temp)

# for each of them
for d in $dirs; do
  # get the basename, which is store_id
  id=$(basename $d)
  # divide by 1000
  sub=$((id / 1000))
  # create the appropriate directory
  mkdir $path_to_fix/$sub > /dev/null 2>&1
  # move the original directory to that sub-directory
  mv $path_to_fix/../temp/$d $path_to_fix/$sub
done

# cleanup
rm -Rf $path_to_fix/../temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:05:40.160

对于临时修复，您可以使用 for 循环和 glob

```
for path in /uploads/story/*; do
   storyid=${path##*/}
   if [[ ${storyid} -lt 1000 ]]; then
        mv "${path}" /uploads/story_archive/${storyid}
   fi
done 
```

这将使用 $path var 中的完整路径遍历 /uploads/story/ 目录中的所有目录。bash 构造 ${variable##pattern} 将从变量的左侧删除最长的子字符串匹配模式，在这种情况下，所有前导目录只留下 storyid 存储在 var 中。然后我们检查楼层 ID 是否小于 1000 并将其移动到故事存档中。

下一点。

```
for path in /uploads/story/*; do
   storyid=${path##*/}
   if [[ $storyid -ge 1000 ]]; then
       thous=${storyid%%???}
       [[ -d/uploads/story/$thous/ ]] || mkdir /uploads/story/$thous/
       mv $path /uploads/story/$thous/
   fi
done 
```

好的，我们再次遍历所有目录并提取故事 ID。这次虽然我们确保 storyid 大于或等于 1000 并使用 %%??? 从 storyid 中删除最后三个字符（与 ## 技巧相同，但从变量的右侧删除。）然后我们查看 thousads 目录是否存在，如果不存在则创建并移动该目录。

您甚至可以一次扫描并同时完成两项任务

```
for path in /uploads/story/*; do
   storyid=${path##*/}
   if [[ $storyid -lt 1000 ]]; then
       mv "${path}" /uploads/story_archive/${storyid}
   else
       thous=${storyid%%???}
       [[ -d/uploads/story/$thous/ ]] || mkdir /uploads/story/$thous/
       mv $path /uploads/story/$thous/
   fi
done 
```

# php - 使用 ajax 从需要身份验证的网页中检索数据

> ID：14355280
> 
> 赞同：0
> 
> 时间：2013-01-16T09:41:24.330
> 
> 标签：php, ajax

我需要从需要身份验证的网页中检索数据。如果我不登录，它将发送受限访问响应。如何使用 PHP 登录该页面，然后将我的参数发送到该页面并检索数据？如果我在我的场景中完全误解了这样做的正确方法是什么？我必须添加这个，第二页是另一台服务器上的jsp页面。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:51:21.577

您可以使用以下会话：

```
authentication.php
<?php
session_start();
$sessionUserId = $_SESSION['userid'];

if(empty($sessionUserId))
{
   //send the user to the login page
   header("location:login.php");  // or any other page
}
?> 
```

然后在您将使用 ajax 调用的 php 中，将其包含在页面的第一行中：

```
include_once("authentication.php"); 
```

因此，它会检查会话是否存在，它将继续执行或者它会要求用户登录。

**注意：** `$_SESSION['userid']`有效登录后取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:44:52.373

你可以使用卷曲。在用于 ajax 请求的 php 脚本中，您可以打开登录页面。然后检查登录页面需要哪些参数，然后使用另一个 curl 请求将数据发布到登录页面。之后，您应该登录并可以使用另一个最后的 curl 请求检索所需的数据。确保设置 cookie 使用，以便页面可以通过会话识别您的请求。

# r - 生成固定度数的小世界网络

> ID：14355289
> 
> 赞同：3
> 
> 时间：2013-01-16T09:41:48.380
> 
> 标签：r

我想生成一个固定度数为 10 的小世界网络。

我尝试了 watts.strogatz.game(1, 100, 5, 0) ，它的度数为 10，但每个节点只有 5 个邻居。

我猜这是因为网络是无向的。有没有办法让它无向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:20:38.573

该`igraph`包包含许多用于创建和操作图形的函数。特别是，该`get.edgelist`函数以您想要的格式返回边列表。

当您将概率设置为 1 时，该`erdos.renyi.game`函数会生成完整的图形。

```
library(igraph)
g1 <- erdos.renyi.game(5, 1)
plot(g1)
get.edgelist(g1) 
```

该`degree.sequence.game`函数生成具有规定度分布的随机图。

```
g2 <- degree.sequence.game( c(3,3,3,2,1,1,1), method="vl" )
plot(g2) 
```

该`watts.strogatz.game`函数生成小世界网络。

```
g <- watts.strogatz.game(1, 100, 5, 0.05)
plot(g) 
```

# java - FileReader 是否接受 Eclipse 插件项目中的相对路径？

> ID：14355290
> 
> 赞同：0
> 
> 时间：2013-01-16T09:41:49.690
> 
> 标签：java, filereader

在 Eclipse 插件项目下会出现以下问题。

我可以使用**绝对**路径（例如。 ）`FileReader`读取 .txt 文件。但是如果我尝试使用**相对**路径（例如），它会变坏并抛出 FNE。**`new FileReader("C:\\email.txt")`**`new FileReader("email.txt")`****

 ****更奇怪的是，当我尝试使用代码打印当前路径时`new File(".").getAbsolutePath()`，它竟然是**D:\Software\eclipse-rcp-juno-SR1-win32**（我安装了我的 Eclipse）...

我认为 RCP/Plug-in 的延迟加载设计模式会导致所有问题。是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:47:45.767

这与延迟加载策略或其他任何与 OSGi 相关的内容无关。应用程序从某个**当前工作目录**启动。在您的情况下，此目录与您发布的一样。您可以在 Eclipse 的运行配置（参数选项卡）下根据自己的喜好设置当前工作目录。****

# android - 如何在android中检查电话服务状态

> ID：14355292
> 
> 赞同：2
> 
> 时间：2013-01-16T09:41:54.670
> 
> 标签：android

我正在开发一个应用程序，我正在尝试检查手机的服务状态

使用服务状态：IN_SERVICE 如果电话是 IN_SERVICE 则生成 Toast 电话正在服务中，如果不是，则生成 Toast 电话不在服务中 我正在尝试此代码

```
public class MyphoneStateListener extends PhoneStateListener
{
public void onCallStateChanged(int state, String incomingNumber)
{
     switch (state) {  
        case TelephonyManager.CALL_STATE_IDLE:   
            break;  
        case TelephonyManager.CALL_STATE_RINGING: 
           sendemail(); 
            break;  
        case TelephonyManager.CALL_STATE_OFFHOOK:  
        default:  
            break;  
        }  
        super.onCallStateChanged(state, incomingNumber);  
    }
} 
```

无法获得服务状态：IN_SERVICE 请帮助我提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T10:02:21.260

```
TelephonyManager telMng = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);    
telMng.listen(new PhoneStateListener() {    
    @Override
    public void onServiceStateChanged (ServiceState serviceState) {
        super.onServiceStateChanged(serviceState);
        String phonestate;

        switch(serviceState.getState()) {
            case ServiceState.STATE_EMERGENCY_ONLY: 
                phonestate ="STATE_EMERGENCY_ONLY";
                break;
            case ServiceState.STATE_IN_SERVICE: 
                phonestate ="STATE_IN_SERVICE";
                break;
            case ServiceState.STATE_OUT_OF_SERVICE: 
                phonestate ="STATE_OUT_OF_SERVICE"; 
                break;
            case ServiceState.STATE_POWER_OFF: 
                phonestate ="STATE_POWER_OFF"; 
                break;
            default:
                phonestate = "Unknown";
                break;
        }   
    } 
}, PhoneStateListener.LISTEN_SERVICE_STATE); 
```

# jquery - 当您从 GitHub 改进 jQuery 插件时，协议是什么？

> ID：14355298
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:42:09.570
> 
> 标签：jquery, jquery-plugins, github

我一直在使用一个驻留在 GitHub 上的插件。我已经做出了一些在我看来似乎的改进。让作者/社区看看的正确方法是什么？我不追求任何荣耀:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:01:54.427

最好的方法是简单地向作者发送“拉取请求”。这是 Github 的主要功能之一，它真的很酷。分叉他的存储库并将您的更改提交到您的分叉，然后向他发送一个“拉取请求”，提供您的更改的详细信息。

拉取请求将列出您所做的提交并显示文件的差异，因此作者可以很容易地完成您所做的更改并理解其意图。

如果事情不完美，他或你也可以评论和进一步讨论。

# php - PHP 日期计算 startdate 是否大于 18 个月

> ID：14355300
> 
> 赞同：0
> 
> 时间：2013-01-16T09:42:11.807
> 
> 标签：php, date, time

我有一个简单的 php 函数，它按顺序列出从预设开始日期到当前日期的月份，如下所示：

```
$this_date=date('F Y', time());
$startdate="1 December 2012";

function printMonths($var)
{
    $start = strtotime($var);
    $now = strtotime("Now");
    while ($now > $start)
    {
            echo date("F Y n", $now);
            echo "|";
            $now = strtotime("-1 month", $now);
    }       
}

$return_months=printMonths($startdate); 
```

我需要做的是找出开始日期是否比现在大 18 个月，如果是，则从 18 个月前设置一个新的开始日期。（一旦数据正好 19 个月大，所有数据都会从数据库中删除）。我已经设置了一个变量`$this_date`，但不确定将其与`$startdate`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:47:15.843

使用 PHP 的`DateTime`对象可以很容易地获得两个日期之间的月差。例如：

```
$start = new DateTime('1 December 2012');
$end = new DateTime('today');
$diff = $start->diff($end); 
```

然后该`$diff`对象将保存您需要的所有数据：

```
object(DateInterval)[3]
  public 'y' => int 0
  public 'm' => int 1
  public 'd' => int 16
  public 'h' => int 0
  public 'i' => int 0
  public 's' => int 0
  public 'invert' => int 0
  public 'days' => int 46 
```

然后，您可以匹配`$diff->y == 1 && $diff->m >= 6`或`$diff->y > 1`或一定数量`$diff->days`来查看数据是否“太旧”。

**更新**

如果要列出“过去 18 个月”（从 2012 年 12 月开始），可以使用`DatePeriod`该类。例如：

```
$start = new DateTime('1 December 2012');
$today = new DateTime('today');
$interval = new DateInterval('P1M');
$range = new DatePeriod($start, $interval, $today);

foreach($range as $date) {
    $diff = $today->diff($date);
    if(($diff->y == 1 && $diff->m >= 6) || $diff->y > 1) {
        break; // Stop iterations if more than 18 months.
    }
    echo $date->format('F Y'); // Prints December 2012 and January 2013
} 
```

# android - 这种方式的系统管理在 Android 操作系统中可行吗？

> ID：14355305
> 
> 赞同：-2
> 
> 时间：2013-01-16T09:42:19.103
> 
> 标签：android

在阅读了供应商网站上的 android 设备管理教程后，我想知道，是否可以禁用 android 设备的硬件组件以使任何应用程序都无法启用它？这种方式系统管理可以在 Android 操作系统中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:43:22.657

如果通过“硬件组件”，您真正的意思是“相机”，那么是的，设备管理 API 可以阻止对相机的访问。

如果“硬件组件”是指“任何硬件组件”，那么不，设备管理 API 不允许您阻止屏幕、CPU、GPU、电池、键盘（如果存在）、传感器等。

# sql - '=' 错误附近的语法不正确

> ID：14355307
> 
> 赞同：0
> 
> 时间：2013-01-16T09:42:25.717
> 
> 标签：sql, select

我只想从我的数据库中检索图像路径，我在运行时提供表名，但是 id 也出现了问题，它给了我“=”附近语法不正确的错误

这是我的查询

```
string query = "select strImage from " + tableName + "where intID ="+Id; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:43:29.013

`WHERE`您需要在子句之前添加额外的空格，

```
string query = "SELECT strImage FROM " + tableName + " WHERE intID ="+Id;
                                                   -- ^ HERE 
```

假设变量的`tableName`值为`Hello`，当它被连接时，查询将如下所示，

```
SELECT strImage FROM HelloWHERE intID =0
                      --  ^ lacking space here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:44:29.990

我希望您的查询是正确的。有一点语法问题。试试这个

```
string query = "select strImage from " + tableName + " where intID ="+Id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:46:15.687

```
string query = String.Format("SELECT strImage FROM {0} WHERE intID = {2}", tableName, Id); 
```

字符串的连接导致创建多个对象

# c# - ASP.NET 中的条件功能发布

> ID：14355309
> 
> 赞同：0
> 
> 时间：2013-01-16T09:42:36.007
> 
> 标签：c#, asp.net, .net

我们有一个 ASP.NET 产品，我们会在 3 个月内不断添加新功能。现在我们有一些更大的功能要实现，这些功能在 3 个月内无法完成。我们希望继续进行这些更改，但不希望在我们做出决定之前将它们提供给客户。但我们确实希望每 3 个月发布一次，我们将包含一些其他较小的功能。这些功能还包括一些数据库更改。

在 ASP.NET 中进行此有条件发布的最佳解决方案是什么。我们暂时不想使用分支和合并，因为这需要付出很多努力。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:46:10.990

如果没有对您的产品或您要完成的工作有任何进一步的了解，我会说您需要在产品本身中实现这种有条件的发布功能。如果更改更多的是独立模块性质。这样，您可以在整个开发生命周期中保持构建完整性。

但是，在 3 个月以上的发布计划的背景下，我认为分支合并选项并不需要付出很多努力。最多需要几天的时间来设置它，而在开发结束时几天来合并到主分支。如果您的新功能会影响很多地方的大量代码，这无疑是最佳选择。

在任何情况下，不要让你的代码混乱

```
if (yourapplication.version != someversion)
{
   //do version specific stuff
}
else
{
   //do other stuff
} 
```

这最终会破坏你的代码库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:44:43.153

好吧，最好的解决方案实际上是使用分支和合并。将您的项目分支到“更大的版本”分支中，同时继续在主分支上添加新功能。我想在你完成那些更大的功能之前，完全**不进行源代码控制需要****付出**更多的努力。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:54:45.163

[我们将Team Foundation Server](http://msdn.microsoft.com/en-us/magazine/gg598921.aspx)中的分支用于这样的场景，以便较小的增强功能和事件发布日期不会受到较大项目的阻碍**

# ios - 存折跳到指定的通行证

> ID：14355310
> 
> 赞同：0
> 
> 时间：2013-01-16T09:42:37.417
> 
> 标签：ios, passbook

您好，当我将通行证添加到存折时，我想在我使用的存折上查看它：

```
 [UIApplication sharedApplication] openURL:[[passLib passWithPassTypeIdentifier:[pass passTypeIdentifier] serialNumber:[pass serialNumber]] passURL]];

                                NSLog(@"coupon:%@",[pass serialNumber]); 
```

当我只向存折添加一个通行证时，一切正常。但是当我向存折添加其他通行证时，它会跳到第一个通行证，而不是新通行证，我使用记分卡。当我使用优惠券卡时一切正常，通过我可以向存折添加许多优惠券通行证，它可以跳过指定的通行证。但是我使用记分卡样式，当我添加许多通行证时，它不能跳过指定的通行证。

我的序列号都不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:00:39.143

你运行的是什么版本的iOS？当前生产版本中存在一个错误，该错误已在最新测试版中修复。

尝试升级到最新的测试版，看看这是否解决了您的问题。

# java - 使用和声明通用列表

> ID：14355311
> 
> 赞同：18
> 
> 时间：2013-01-16T09:42:38.163
> 
> 标签：java, list, generics, object, arraylist

所以我在 Java 中工作，我想声明一个通用列表。

所以到目前为止我正在做的是`List<T> list = new ArrayList<T>();`

但现在我想添加一个元素。我怎么做？通用元素是什么样的？

我试过做类似 List.add("x") 的事情来看看我是否可以添加一个字符串，但这不起作用。

（我没有声明 a 的原因`List<String>`是因为我必须将此 List 传递给另一个仅`List<T>`作为参数的函数。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T09:53:08.140

您应该有一个泛型类或一个泛型方法，如下所示：

```
public class Test<T>  {
    List<T> list = new ArrayList<T>();
    public Test(){

    }
    public void populate(T t){
        list.add(t);
    }
    public static  void main(String[] args) {
        new Test<String>().populate("abc");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:45:37.837

The T is the type of the objects that your list will contain. You can write `List<String>` and use it in a function which needs `List<T>`, it shouldn't be a problem since the T is used to say that it can be anything.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:12:15.187

您不能直接将“X”（字符串）添加到类型为的列表中，因此您需要编写一个接受 T 作为参数并添加到列表中的函数，例如

```
List<T> myList = new ArrayList<T>(0);
public void addValue(T t){
  myList.add(t);
} 
```

在调用此函数时，您可以传递字符串。

```
 object.addValue("X"); 
```

# c++ - 基于时间的滑动窗口

> ID：14355318
> 
> 赞同：1
> 
> 时间：2013-01-16T09:42:55.133
> 
> 标签：c++, machine-learning, time-series

我正在寻找为基于时间的滑动窗口正确编写 c++ 类的材料。我正在使用判别算法（svm）对时间序列进行机器学习，我需要对新的流媒体系列进行预测，然后我需要不同大小和比例的滑动窗口。谢谢。

# embedded - AT91SAM7X512 复位类型问题

> ID：14355320
> 
> 赞同：2
> 
> 时间：2013-01-16T09:43:00.330
> 
> 标签：embedded, arm, microcontroller, reset, atmel

我正在为我的应用程序使用 AT91SAM7X512。我在某些操作后执行软件重置。处理器复位。但是在读取`RSTC_RSR`状态寄存器时，我得到了一个无效的复位类型寄存器值：`RSTC_RSR = 0x700`它将`RSTTYP`寄存器值转换为`111`. 数据表中未定义此条件。我正在使用语句读取重置类型`unsigned int buffer = AT91C_RSTC_RSTTYP;`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:15:19.017

`AT91C_RSTC_RSTTYP`是常数，它是屏蔽寄存器中位`0x700`的位掩码（定义在 中）：`RSTTYP``RSTC_SR``AT91SAM7X512.h`

```
#define AT91C_RSTC_RSTTYP     (0x7 <<  8) // (RSTC) Reset Type 
```

要读取寄存器，有一个指针`AT91C_RSTC_RSR`：

```
#define AT91C_RSTC_RSR  (AT91_CAST(AT91_REG *)  0xFFFFFD04) // (RSTC) Reset Status Register 
```

所以

```
unsigned int buffer = *AT91C_RSTC_RSR; 
```

应该可以读取寄存器（但我没有测试它）。

# c# - LINQ TO XML 属性标记不给出对象引用错误

> ID：14355321
> 
> 赞同：0
> 
> 时间：2013-01-16T09:43:01.253
> 
> 标签：c#, xml, linq-to-xml

嗨，我正在做如下

```
 XDocument xmlDoc = XDocument.Load(@"F:\test2.xml");
        var q = from c in xmlDoc.Descendants("autoivr.ok")
                where c.Element("LS_CZIP4").Value == "1234"
                select new
                {
                    name = c.Element("LS_LIN").Value,
                    state = c.Element("LS_STATE").Value                        
                }; 
```

当我使用 where c.attribute("LS_CZIP4").Value == "1234" 我得到未设置对象引用的错误但是当我使用 c.element 时没有这样的错误。

以下是我制作的 xml，它实际上是 sql 中转换为 xml 文件的表

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
   <autoivr.ok>
      <LS_LIN>abc</LS_LIN>
      <LS_STATE>def</LS_STATE>
      <LS_TYPE>5</LS_TYPE>
      <LS_CZIP4>1234</LS_CZIP4>
   <priority>0</priority>
   </autoivr.ok> 
```

有人可以让我知道这个问题吗？我该如何解决？我可以只使用元素标签而不是属性。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:44:18.370

使用强制转换而不是访问`Value`属性。转换为字符串将为不存在的元素返回 null。获取`Value`会抛出异常

```
XDocument xmlDoc = XDocument.Load(@"F:\test2.xml");
var q = from c in xmlDoc.Descendants("autoivr.ok")
        where (string)c.Element("LS_CZIP4") == "1234"
        select new
        {
            name = (string)c.Element("LS_LIN"),
            state = (string)c.Element("LS_STATE")
        }; 
```

顺便说一句，您需要结束标记`<DocumentElement>`. 也是`LS_CZIP4`元素，而不是属性。请参阅此处的区别[XML Elements vs. Attributes](http://www.w3schools.com/dtd/dtd_el_vs_attr.asp)。

元素：`<LS_LIN>abc</LS_LIN>`

属性：`<autoivr.ok LS_LIN="abc">`

# java - 将@RequestParam 从@ActionMapping 传递给@RenderMapping

> ID：14355322
> 
> 赞同：4
> 
> 时间：2013-01-16T09:43:04.103
> 
> 标签：java, spring, spring-mvc, portlet

我正在使用 Liferay 上的 Spring MVC portlet，我正在寻找一种将 RequestParam 从 ActionRequest 传递到 RenderRequest 的方法。这是我的 2 函数的签名。

```
 @ActionMapping(params="action=bookmark_fiche")
    public void bookmarkFicheRef(@RequestParam long ficheId, ActionRequest request, ActionResponse response){

        ...
        response.setRenderParameter("action", "view_fiche");
    }

    @RenderMapping (params="action=view_fiche")
    public String showFiche(@RequestParam long ficheId, ModelMap model, RenderRequest request, RenderResponse response){
        ...
    } 
```

渲染功能 showFiche 被其他链接使用，使用时工作正常

```
<portlet:renderURL var="rowURL" >
    <portlet:param name="action" value="view_fiche" />
    <portlet:param name="ficheId" value="${fiche.ficheId}" />
</portlet:renderURL> 
```

但如果我使用

```
<portlet:actionURL var="boookmarkFicheRefURL">
    <portlet:param name="action" value="bookmark_fiche" />
    <portlet:param name="ficheId" value="${SEARCH_CONTAINER_RESULT_ROW.object.ficheId}" />
</portlet:actionURL> 
```

动作阶段成功但渲染阶段失败并出现错误：

```
09:24:39,132 ERROR [http-bio-8080-exec-5][render_portlet_jsp:154] org.springframework.web.portlet.bind.MissingPortletRequestParameterException: Required long parameter 'ficheId' is not present 
```

`response.setAttribute("ficheId", Long.toString(ficheId));`也不起作用...

是否存在在不修改渲染方法的情况下传输参数的方法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T15:59:07.673

我不明白这是否是您想要的，但如果您想从 action 方法调用 render 方法，以及：

```
response.setRenderParameter("action", "view_fiche"); 
```

您正确添加的（设置渲染参数“action”），您应该添加 ficheId 参数

```
response.setRenderParameter("ficheId", Long.toString(ficheId)); 
```

render 方法也期望。

# sql - 想了解更多关于 NTILE()

> ID：14355324
> 
> 赞同：41
> 
> 时间：2013-01-16T09:43:10.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在阅读 ms sql 的 RANKING 函数。我了解除 NTILE() 之外的其他功能。假设我有这些数据：

```
 StudentID     MARKS  
      S1           75  
      S2           83
      S3           91
      S4           83
      S5           93 
```

所以如果我做一个`NTILE(2) OVER(ORDER BY MARKS desc)`什么会是结果，为什么？
如果它是一个`NTILE(3)`？简单的解释任何人？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-16T09:51:23.413

把它想象成桶，NTILE(2) 会产生 2 个桶，一半的行的值为 1，另一半的值为 2

例子

```
create table  #temp(StudentID char(2),    Marks  int) 
insert #temp  values('S1',75 ) 
insert #temp  values('S2',83)
insert #temp  values('S3',91)
insert #temp  values('S4',83)
insert #temp  values('S5',93 ) 

select NTILE(2) over(order by Marks),*
from #temp
order by Marks 
```

这是输出，因为您的行数是奇数，所以存储桶 1 将多出 1 行

```
1   S1  75
1   S2  83
1   S4  83
2   S3  91
2   S5  93 
```

如果再添加一行

```
insert #temp  values('S6',92 ) 
```

现在两个桶都有 3 行

```
1   S1  75
1   S2  83
1   S4  83
2   S3  91
2   S6  92
2   S5  93 
```

实际上，我从未在生产代码中使用过 NTILE，但我可以看到您需要将结果拆分为 n 个桶的用途

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-16T09:47:09.447

它将按照标记的降序排列数据，然后将其分成2组。

如果数据不能被分成相等的组，那么前几组将比后面的组有更多的行。

所以 NTILE(2) 会给你

```
StudentID       MARKS       NTILE  
      S5           93           1 
      S3           91           1 
      S2           83           1
      S4           83           2
      S1           75           2 
```

同样 NTILE(3) 会给你

```
StudentID       MARKS       NTILE  
      S5           93           1 
      S3           91           1 
      S2           83           2
      S4           83           2
      S1           75           3 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-09T16:12:23.553

我经常使用 NTILE 将电子邮件列表拆分为存储桶以进行 10/10/80 测试。例如，我们正在测试一封电子邮件的主题行，并希望将两个选项中的一个发送给列表中的每个 10%，将性能更好的一个发送给剩余的 80%。

SELECT [字段列表],(NTILE(10) OVER(order by newid()))-1 AS Segment FROM [数据]

“order by newid()”确保了随机顺序。“[NTILE ...]-1”语法是我们用来进行文本解析而不是整数数学的其他一些工具的直接结果，因此从 0-9 而不是 1-10 运行结果更容易. 细分字段将填充一个 0-9 的值，我可以使用它很容易地分离出 10% 的记录，并且不止一次用于对它们进行多次努力的活动。

如果您需要具有可复制结果的查询，则需要在“order by”子句中使用确定性的内容，或者添加带有 GUID 的列以用于 order by 子句。

PARTITION BY 子句将用于创建基于状态、职业或其他一些预定分组的桶组，即 NTILE(10) OVER (PARTITION BY State ORDER BY newid()) 等。我相信 ORDER BY 子句是必需的 - PARTITION BY 是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T06:17:03.353

Ntile 不使用分区子句，只需根据 ntile(number) 中的数字划分数据集，这样：如果行数为 7，例如：1,1,1,2,3,4,5 ntile(3) 将给3,2,2。我是如何得到 3、2、2 的？首先假设 7 为 6（减一以使其相等）， 6/3 给出 2,2,2 ，然后添加 +！到第一个分区。如果行数是偶数，那么没有问题。只划分数据集

Ntile 使用分区子句，只需根据数据集中的值划分数据集，这样：如果行数为 7，示例行值为：1,1,1,2,3,4,5 则：ntile(3) 分区按值将给出：1,2,3,1,1,1,1。我是怎么得到这个的？首先根据值分解数据集：这里，1,1,1 是一个分区，接下来所有值形成一个不同的分区。然后开始为每个分区分配 ntile rank。在这里，1,1,1 将变为 1,2,3 然后继续下一个分区，您只能将排名拉到 ntile() 函数中指定的数字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-12T08:30:47.863

在 Ntile 函数中，首先计算行数并除以 ntile 传入的参数，然后根据商组成相等的一组行并对其进行排序，然后将剩余的行从顶部以移动方式分配给每个组并且不会从最少的行中取出它，例如如果 group1 有 4 行，那么它将在其组中占据第 5 行而不是最后一行。

谢谢

# ios - 核心数据 NSFetchedResultsController 和排序

> ID：14355327
> 
> 赞同：0
> 
> 时间：2013-01-16T09:43:14.570
> 
> 标签：ios, objective-c, core-data

我有两个名为 Assignment 和 Question 的核心数据实体。分配实体具有分配详细信息，例如其名称、ID 等。问题表具有问题名称、ID 等。分配与问题具有一对多关系。当我尝试从服务器获取作业详细信息时，我得到作业和问题数据，并且作业和问题实体都在核心数据存储中更新。请注意，两个不同的作业可能共享相同的问题。

现在让我们考虑一下，作业 1 有 id 为 1,2 和 3 的问题。而作业 2 有 id 为 4、5 和 1 的问题。在我的问题表中，它只有 5 个条目，因为 id 为 1 的问题在两者中都很常见作业。

我正在使用 NSFetchedResultsController 在 UI 上填充它。我在以添加到核心数据存储（数据库）的相同顺序获取问题时遇到问题

例如：对于作业 2，我需要 oder 4,5 和 1 中的问题。没有唯一键可以用来创建排序描述符。没有排序描述符我无法创建 NSFetchRequest，没有它就不可能创建 NSFetchedResultsController . 对解决这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:03:58.957

在我看来，最好的模式是创建一个新实体 ，`AssignmentQuestion`它与 具有多对一关系`Assignment`和多对一关系`Question`，以及序列号属性。

```
Assignment <--------->> AssignmentQuestion <<--------> Question
|--name                 |--sequence                   |--text
|--id                                                 |--id
|--etc.                                               |--etc 
```

# java - 抑制 Eclipse 中死代码的错误

> ID：14355329
> 
> 赞同：1
> 
> 时间：2013-01-16T09:43:23.503
> 
> 标签：java, eclipse, compiler-errors

我的 Eclipse 配置为在死代码上添加错误。但是，一些自动生成的 java 文件有这个错误。
当它被配置为警告时，我可以添加到类定义`@SuppressWarnings("unused")`中并删除警告。
当这是一个错误时，是否有类似的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:08:26.833

不幸的是（对您而言），JLS*要求无法访问的代码是编译错误；*见[JLS 14.21](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)。由于 Eclipse Java 编译器旨在与 JLS 兼容，因此它无法抑制错误。

您需要修复生成器（或其输入），使其不会生成无效的 Java 代码。

# outlook - 防止 Outlook 删除重复事件

> ID：14355332
> 
> 赞同：0
> 
> 时间：2013-01-16T09:43:27.590
> 
> 标签：outlook, appointment

我有一个插件，可以将 Outlook 中的只读共享日历与我们的协作系统同步。我需要确保用户不能删除这些只读日历中的任何约会。可以将事件处理程序附加到 Outlook 中的任何约会（这可行），但它不适用于重复事件。重复模式中的每次出现都是 Outlook 中的一个单独对象，应用程序必须将事件处理程序附加到每个此类对象。如果重复模式是无限的（这在此类约会中非常流行），则应用程序应附加无限数量的事件处理程序。

是否可以一次将事件处理程序附加到某种分组对象（如果存在这样的实体），或者是否有任何其他方法可以解决我的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:53:34.203

当定期约会的实例被删除时，主约会将被修改。您可以通过订阅 AppointmentItem.Write 事件来拦截该更改，该事件具有 Cancel 参数。

# javascript - 如何在 google appscripts 中调试客户端 javascript（在 html 页面中）

> ID：14355334
> 
> 赞同：4
> 
> 时间：2013-01-16T09:43:32.583
> 
> 标签：javascript, debugging, google-apps-script

我开始欣赏 google app 脚本编辑环境中的调试功能，但是我注意到我似乎无法选择客户端 javascript 函数在 html 页面中进行调试，如图所示![无法在谷歌应用脚​​本编辑环境的 html 页面中选择 javascript 函数](../Images/89b32cb8d8d83c2de206b7a30fe59252.png)

有没有办法解决这个问题？目前我想我只是要破解并观看错误消息......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:17:45.227

不幸的是，除了控制台日志之外，没有其他好的方法来调试客户端 Web UI。正如您所指出的，JavaScript/DOM 是重新编写的，因此您不能使用标准的 Chrome 调试工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-20T15:30:03.167

有时，您可以在从 Google 应用脚本提供的 HTML 页面中的 javascript 中嵌入警报，但有时警报不会显示。我不知道为什么。当他们工作时，他们很棒。我从未在 javascript 中看到任何来自 Logger.log 或 console.log 语句的输出。

# c# - 为什么当查询包含声明的变量时，来自 Entity Framework 的 SQL 查询在 Sql Server Profiler 中不可见？

> ID：14355335
> 
> 赞同：1
> 
> 时间：2013-01-16T09:43:34.150
> 
> 标签：c#, entity-framework, sql-server-profiler

一段代码：

```
 using (var dc = new Database())
        {
            var results = from a in dc.Article
                          where a.IdNeswpaper == 12
                          select new
                          {
                              a.Id,                               
                          };
            dataGrid1.ItemsSource = results;
        } 
```

此查询在 Sql Profiler 中可见，但是：

```
 int idNews = 12;
        using (var dc = new Database())
        {
            var results = from a in dc.Article
                          where a.IdNeswpaper == idNews
                          select new
                          {
                              a.Id,                               
                          };
            dataGrid1.ItemsSource = results;
        } 
```

不可见，两者都正确完成并显示数据。为什么第二个查询在 Sql Profiler 中不可见？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:47:41.083

我不想告诉你，但你必须看起来更好。查询就在那里。也许你过滤掉它？

重点是 - 如果不提​​交 SQL 文本，就无法通过连接从数据库中提取数据。没有任何。因此，要获取数据，查询必须存在。

# java - 上传期间文件大小增加

> ID：14355344
> 
> 赞同：0
> 
> 时间：2013-01-16T09:44:02.563
> 
> 标签：java, http, httpclient, openstack-swift

我正在使用 httpclient 上传文件。上传文件大小后更改。在文件上传期间，一些额外的东西被添加到文件中。

在上传文件之前，它包含：

```
hi this is vipin check 
```

上传文件后包含：

```
--j9q7PmvnWSP9wKHHp2w_KCI4Q2jCniJvPbrE0
Content-Disposition: form-data; name="vipin.txt"; filename="vipin.txt"
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary

hi this is vipin check
--j9q7PmvnWSP9wKHHp2w_KCI4Q2jCniJvPbrE0-- 
```

为什么文件大小会发生变化？为什么要添加这些额外的内容？

我的httpclient代码是：

```
HttpPut httppost = new HttpPut(URIUtil.encodeQuery(newUrl));
httppost.setHeader("X-Auth-Token", cred.getAuthToken());
httppost.addHeader("User-Agent", "NetMagic-file-upload");
System.out.println("Dest : " + dest.getAbsolutePath());

MultipartEntity mpEntity = new MultipartEntity();
ContentBody cbFile = (ContentBody) new FileBody(src);
mpEntity.addPart(dest.getName(), cbFile);
httppost.setEntity(mpEntity);
System.out.println("executing request " + httppost.getRequestLine());

HttpResponse response = httpclient.execute(httppost); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:20:02.273

似乎正在发生的是客户端正在发送要作为多部分实体上传的文件，但服务器将其视为纯文件。目前尚不完全清楚故障在哪里。

*   服务器可能会忽略请求标头中的内容类型。这很可能是负责处理上传请求的 servlet（或其他）中的错误。

*   客户端可能没有在请求标头中设置内容类型。我原以为客户端库会为您解决这个问题。但是您可能需要明确地执行此操作。

我建议查看客户端发送或服务器接收到的请求标头，以查看是否存在适当的多部分内容类型。这将帮助您确定问题出在哪里。

* * *

但是有一个明显的解决方案。如果服务器无法处理多部分，请将客户端更改为不发送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:20:26.043

您正在执行 PUT 请求，但您的客户端使用 HTML 表单帖子中常用的多部分编码。

# iphone - 获取商家的经过验证的贝宝电子邮件 ID

> ID：14355347
> 
> 赞同：1
> 
> 时间：2013-01-16T09:44:08.657
> 
> 标签：iphone, ios, email, paypal, verify

我已将 paypal 与我的 ios 应用程序集成，并希望我的交易仅在商家拥有经过验证的 paypal 电子邮件 ID 时完成。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-10T07:29:17.773

Paypal Adaptive Accounts 提供的 Get Verified Status API。在 PHP 上，您应该必须集成 SDK“adaptiveaccounts-sdk-php-namespace-php”，然后使用 API 调用您可以验证 Paypal ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:40:51.023

我建议您使用此参数：`payer_status=verified`用于 IPN 或`PayerStatus= Verified`Express Checkout。根据 PayPal，这意味着以下内容：

> 付款人的 PayPal 帐户状态。Verified 值表示客户已确认银行帐户的所有权或已通过其他方式验证其帐户状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:47:47.587

经过大量搜索，我找到了答案，paypal提供了“GetVerifiedStatus”api，用于检查用户是否拥有正确的paypal电子邮件地址。我已经使用以下链接解决了这个问题： [https://www.x。 com/developers/paypal/documentation-tools/api/getverifiedstatus-api-operation](https://www.x.com/developers/paypal/documentation-tools/api/getverifiedstatus-api-operation)

# batch-file - 在 .txt 中的命令提示符输出中运行 jar 文件

> ID：14355350
> 
> 赞同：3
> 
> 时间：2013-01-16T09:44:22.917
> 
> 标签：batch-file, command-prompt, output

这是我用来启动/停止我的 Jar 应用程序的 2 个文件。

**开始.bat**：`start "app_test" java -jar application-test-1.2.0.jar %*> log.txt`
**停止.bat**：`TASKKILL /FI "WINDOWTITLE eq app_test`

当我运行我的应用程序时，输出不会重定向到 log.txt。我不明白为什么，有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:15:51.220

不要`start`在你的脚本中使用，那么它应该可以工作。

**开始.bat**：`java -jar application-test-1.2.0.jar %* > log.txt`

在 Windows XP SP3 和 Java 1.6.0_31 上对其进行了测试，并将所有 Java 输出写入指定的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T07:27:36.863

如果您使用的是 Windows，则在命令提示符下，

C:> something.bat > console_output.txt

# mysql - mysql workbench ssh custo 命令

> ID：14355355
> 
> 赞同：0
> 
> 时间：2013-01-16T09:44:32.440
> 
> 标签：mysql, ssh, workbench

我正在尝试通过 SSH 隧道配置新连接。

但是在服务器上，命令 mysql 不存在。我有我自己的名为 custo-mysql 的编译。

我的意思是，当我在服务器上时，我使用以下命令：

```
$ custo-mysql -u root -pmypassword 
```

如何告诉工作台使用 custo-mysql 而不是 mysql ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:47:22.707

`mysql`（和你的`custo-mysql`）是服务器的客户端。Workbench 也是一个客户端，所以它不需要使用那个`custo-mysql`东西。它只是连接到您的服务器。

基本上，在您的服务器上，您有一个“mysqld”正在运行：一个 mysql 服务器。您的命令`custo-mysql`作为一种接口连接到该服务器。`Workbench`具有完全相同的功能，因此如果您的网络/隧道等正确，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:18:09.543

正如@Nanne 已经提到的，您不需要`mysql`客户端使用 Workbench 连接到您的 MySQL 服务器。

我只想指出，**Workbench 确实使用 mysql 命令行客户端**在 Admin / Data Import/Restore 部分中导入数据库。话虽如此，如果没有它，你肯定会没事的。

干杯，

# bash - grep 精确整数匹配

> ID：14355360
> 
> 赞同：1
> 
> 时间：2013-01-16T09:44:47.653
> 
> 标签：bash, unix

```
read -p "Please enter ID: " staffID 
id=$(grep -w "$staffID" record | cut -d ":" -f1 | sort -u );
echo $id 
```

我在尝试从文件中 grep 正确值时遇到一些问题。

以下内容存储在记录文件中。

```
12:Griffin:Peter:13:14:16
14:Griffin:Meg:19:19:10
10:Griffin:Loi:19:20:20
130:Griffin:Stewie:19:19:19
13:Wayne:Bruce:19:20:2 
```

我的第一列存储了始终唯一的 id，这是我在 grep 中寻找的。使用上面的代码，我只想找到用户输入并显示在屏幕上的唯一 ID，但是如果我输入 ID 13，而我的回显会产生一个空白值，而它显然应该产生 13。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:56:52.417

```
#!/bin/bash
read -p "Please enter ID: " staffID

#your code was commented out
#id=$(grep -w "$staffID" record | cut -d ":" -f1 | sort -u );

id=$(grep -oP "^${staffID}(?=:)" record)
line=$(grep "^${staffID}:" record)

echo $id #use this line if you just want ID 
echo $line #use this line if you want the line with given ID 
```

查看代码中的注释

**注意** 我不知道确切的要求，但我建议在执行 grep 之前检查用户输入，如果他们输入了有效的 id`([0-9]+)`可能？因为用户可以输入`.*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T12:54:18.947

似乎在 grep 中添加 ^ 应该可以解决您的问题。

```
 read -p "Please enter ID: " staffID
    [[ "$staffID" =~ ^[0-9]+$ ]] || { echo "Enter only Numbers. Aborting" ; exit 2 ;  }
    id=$(grep -w "^$staffID" record | cut -d ":" -f1 | sort -u );
    if [ "$id" == "" ]; then
            echo "ID : Not found"
    else
            echo $id
    fi 
```

我添加了一行来检查您的输入是否为有效数字。

# iphone - 如何在动力学 js 中启用移动缩放功能

> ID：14355363
> 
> 赞同：2
> 
> 时间：2013-01-16T09:44:52.320
> 
> 标签：iphone, html, zooming, kineticjs, pan

我正在创建一个带有**动态 js + html5**画布的网站，它在 web 中很好地显示，但是当网站在移动设备中显示时出现问题，我可以知道有什么方法可以**“解锁**”动态 js 中的移动平移和缩放功能吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:30:50.027

我制作了一个 KineticJS 插件，以便轻松制作可平移和可捏合的图层。随意检查/使用它：[PinchLayer 插件](https://github.com/eduplus/pinchlayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:23:19.490

您可以寻找的是 JavaScript 的“手势”库，例如 jGestures，它们支持手势，即平移和缩放功能。

您还可以编写自己的函数来记录触摸位置并分析它以检查它是否是“滑动”，然后这可能意味着平移或缩放。

否则，您需要构建一个按钮或其他东西，当您触摸或拖动它时允许平移或缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T20:21:54.037

在创建阶段时`listening`添加属性。`false`

```
var stage = new Kinetic.Stage({
    container: 'my_container',
    listening: false
}); 
```

# jquery - jQuery：使用 touchmove 禁用和启用触摸

> ID：14355365
> 
> 赞同：1
> 
> 时间：2013-01-16T09:44:58.463
> 
> 标签：jquery, touchmove

我使用此代码禁用和启用触摸：

```
jQuery(document).ready(function(){

 jQuery("body").on("touchmove", false);

 jQuery('button').click(function(){
     jQuery("body").on("touchmove", true);
 });

}); 
```

功能可以很好地禁用触摸，但单击按钮后无法启用触摸。

代码有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T09:48:00.600

问题在于您没有传递[on](http://api.jquery.com/on/)所需的参数。您应该传递一个函数（事件处理程序）而不仅仅是一个布尔值。

解除绑定然后重新绑定的最简单方法是在某处有一个布尔值并在您的处理程序中对其进行测试。例如 ：

```
myapp = {active: true}; // change this boolean
jQuery("body").on("touchmove", function(e) {
    if (myapp.active) { // change myapp.active
        // do things
    }
}); 
```

如果您想明确解除绑定，而不是传递`false`给`on`，请使用`off`. 传递`false`是一个未记录的技巧，可能会在未来的版本中中断。

该`off` [文档](http://api.jquery.com/off/)还包含在 click 上绑定/取消绑定函数的另一种方法的示例：

```
function aClick() {
  $("div").show().fadeOut("slow");
}
$("#bind").click(function () {
  $("body").on("click", "#theone", aClick)
    .find("#theone").text("Can Click!");
});
$("#unbind").click(function () {
  $("body").off("click", "#theone", aClick)
    .find("#theone").text("Does nothing...");
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T09:50:51.300

使用`bind()`和`unbind()`

尝试这个

```
 jQuery('body').bind('touchmove', function(e){e.preventDefault()});

 jQuery('button').click(function(){
     jQuery('body').unbind('touchmove');
  }); 
```

# visual-studio-2012 - Visual Studio 2012 速度大解决方案

> ID：14355366
> 
> 赞同：8
> 
> 时间：2013-01-16T09:45:05.957
> 
> 标签：visual-studio-2012

您能否建议我如何加快编译、加载大型解决方案（约 50 个项目）。我的意思是只有 VS 2012 工作室或 Windows 设置，而不是硬件更改。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T09:50:01.783

考虑您在一个解决方案中需要 50 个项目 - 有许多相互引用的项目是减速的主要原因之一。

拥有单独项目的少数正当理由之一是因为您需要单独部署生成的程序集。如果不是这种情况，请考虑合并项目 - 使用文件夹进行逻辑分离。

项目数量越少，构建速度就越快。

此外，如果您将构建更改为输出到特定的共享目录并引用 DLL 而不是项目，则不需要的重新编译的数量应该会大大减少，尽管您必须自己管理构建顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-09T16:42:12.630

我在使用 Visual Studio 2012 Update 3 的解决方案中使用了 100 多个项目，而且构建速度很快。

1.  我同意 Oded 的共享输出目录评论，但我想提一下，项目引用也可以正常工作。
2.  确保您的 \Users\\AppData\Local\Microsoft\WebsiteCache 文件夹为空。不知何故，即使使用仅限桌面的解决方案，这也是一个问题。
3.  我禁用了 Productivity Power Tools 2012，因为它们在后台编译代码，这对我来说有点太多了。禁用所有插件和扩展，看看它是否有任何区别。
4.  通过减少输出详细程度来抑制过多的输出消息到磁盘和屏幕 ![构建运行](../Images/3cb143586a5b6d5476d073ba77ed06ba.png)
5.  将多核与 MSBuild 结合使用。
6.  在编写代码时，请尝试使用接口和抽象类 (C#) 来限制项目之间的依赖关系。
7.  尝试新鲜的 *.suo 和新鲜的 *.sdf 文件。（备份用户设置和数据库，然后删除它们并再次尝试构建）
8.  当所有其他方法都失败时，请使用 ProcessMonitor 或附加 Visual Studio 的另一个实例，以便在构建 Visual Studio 时对其进行分析。
9.  尝试从您的构建中排除文件系统过滤器，例如防病毒。例如，某些防病毒软件有一种方法可以跳过对某些目录或文件名的扫描。

# iphone - 切换标签栏时检测选定的标签栏

> ID：14355367
> 
> 赞同：0
> 
> 时间：2013-01-16T09:45:05.850
> 
> 标签：iphone, ios, objective-c

我有三个标签栏应用程序，我的标签是 TAB1、TAB2、TAB3 我在 TAB1 视图控制器中编写了以下代码来检测用户按下了哪个标签

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
{ 
    NSLog(@"tab selected: %@", item.title); 
} 
```

但是这个代表永远不会被调用

我已经在 appdelegate.m 中设置了我的标签

```
- (void)setupTabBar 
{
    self.myWorkListViewController = [[MyWorkListViewController alloc] initWithNibName:@"MyWorkListViewController"
                                                                               bundle:nil];
    self.askHRViewController = [[AskHRViewController alloc] initWithNibName:@"AskHRViewController"
                                                                     bundle:nil];

    self.moreViewController = [[MoreViewController alloc] initWithNibName:@"MoreViewController"
                                                                           bundle:nil];

    self.bookLeaveViewController = [[BookLeaveViewController alloc] initWithNibName:@"BookLeaveViewController"
                                                                             bundle:nil];
    self.helpViewController = [[HelpViewController alloc] initWithNibName:@"HelpViewController"
                                                                   bundle:nil];

    // Create navigation controllers
    workListNavigationController = [[UINavigationController alloc] initWithRootViewController:self.myWorkListViewController];

    askHRNavigationController = [[UINavigationController alloc] initWithRootViewController:self.askHRViewController];

    bookLeaveViewController = [[UINavigationController alloc] initWithRootViewController:self.bookLeaveViewController];

    moreNavigationController = [[UINavigationController alloc] initWithRootViewController:self.moreViewController];

    helpNavigationController = [[UINavigationController alloc] initWithRootViewController:self.helpViewController];

    [self setTabBarImagesAndText];

    // Setup tab bar controller
    self.tabBarController = [[UITabBarController alloc] init];
    [self.tabBarController setViewControllers:[NSArray arrayWithObjects:workListNavigationController, askHRNavigationController, bookLeaveViewController, helpNavigationController,moreNavigationController, nil]];
    //Set TabBar background
    [self.tabBarController.tabBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"TabBar_iOS4_Background"]] atIndex:0];
    [self.tabBarController setSelectedIndex:0];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T09:46:57.113

您可以像这样检测选定的标签栏项目：- 作为您的代码，您只需要添加这一行

```
// Setup tab bar controller
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.delegate=self;
    [self.tabBarController setViewControllers:[NSArray arrayWithObjects:workListNavigationController, askHRNavigationController, bookLeaveViewController, helpNavigationController,moreNavigationController, nil]];
    //Set TabBar background
    [self.tabBarController.tabBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"TabBar_iOS4_Background"]] atIndex:0];
    [self.tabBarController setSelectedIndex:0]; 
```

在 .h 文件中定义如下

```
@interface yourViewcontroller : UIViewController<UITabBarControllerDelegate>
{
   //declare your Tabbar controller with @proparty 
} 
```

在 .m 文件中

> ```
>  //@synthesize here your Tabbar controller 
> ```

```
- (void)viewDidLoad
{
  self.yourTabbarControler.delegate=self;
    [super viewDidLoad];

} 
```

现在把这个 UITabbarController 的委托

```
- (void)tabBarController:(UITabBarController *)tabBarController 
 didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"controller class: %@", NSStringFromClass([viewController class]));
    NSLog(@"controller title: %@", viewController.title);

    if (viewController == tabBarController.moreNavigationController)
    {
        tabBarController.moreNavigationController.delegate = self;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:53:28.767

您必须使用代码（在 ViewDidLoad 等中）或在界面构建器中“连接”委托。
看看这个解释如何连接 textView 委托的答案（几乎相同）：[https ://stackoverflow.com/a/1785366/764575](https://stackoverflow.com/a/1785366/764575)

# r - 在函数内循环并在 R 中自动创建对象

> ID：14355368
> 
> 赞同：1
> 
> 时间：2013-01-16T09:45:07.843
> 
> 标签：r, function, object, loops

我尝试计算 R 中不同组的列均值。存在几种分配组的方法，因此创建的两列包含不同的分组。

```
 # create a test df
    df.abcd.2<-data.frame(Grouping1=c("a","f","a","d","d","f","a"),Grouping2=c("y","y","z","z","x","x","q"),Var1=sample(1:7),Var2=sample(1:7),Var3=rnorm(1:7))
    df.abcd.2 
```

现在我用assign、lapply、split和colMeans创建了一个循环来获取我的结果并将其存储在不同的dfs中。循环工作正常。

```
 #Loop to create the colmeans and store them in dataframes
    for (i in 1:2){
      nam <- paste("RRRRRR",deparse(i), sep=".")
      assign(nam, as.data.frame(
        lapply(
          split(df.abcd.2[,3:5], df.abcd.2[,i]), colMeans)
      )
      )
    } 
```

所以现在我想创建一个函数来将此方法应用于不同的数据帧。我的尝试看起来像这样：

```
 # 1\. function to calculate colMeans for diffrent groups
    # df= desired datatframe, 
    # a=starting column: beginning of the columns that contain the groups, b= end of columns that contain the groups
    # c=startinc column: beginning of columns to be analized, d=end of columns do be analized

    function.split.colMeans<-function(df,a,b,c,d)
    {for (i in a:b){
      nam <- paste("OOOOO",deparse(i), sep=".")
      assign(nam, as.data.frame(
        lapply(
          split(df[,c:d], df[,i]), colMeans)
      )
      )
    }
    }
    #test the function
    function.split.colMeans(df.abcd.2,1,2,3,5) 
```

因此，当我测试此功能时，我既没有收到错误消息，也没有收到结果……有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:54:06.243

它运行良好。阅读分配的帮助。了解框架和环境。

换句话说，它在您的函数内部创建变量，但它们不会泄漏到您`ls()`在命令行中看到的环境中。如果您将`print(ls())`其放入函数循环中，您会看到它们，但是当函数结束时，它们会消失。

通常，函数与其调用环境交互的唯一方式是通过它们的返回值。任何其他方法都在进入一个痛苦的世界。

不要使用 assign 来创建具有顺序或信息名称的事物。曾经。除非您知道自己在做什么，但您不知道...将它们放在列表中，然后您可以索引这些部分以进行循环等等。

# r - 终端中的 R 语法高亮显示

> ID：14355369
> 
> 赞同：28
> 
> 时间：2013-01-16T09:45:10.180
> 
> 标签：r, terminal

我们可以在终端中获得 R 的语法突出显示吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-23T12:54:30.637

我终于找到了一个满足我需求的库。
现在我对我的编码环境更满意了。

> [colorout](https://github.com/jalvesaq/colorout)是一个 R 包，它在终端仿真器中运行时为 R 输出着色。该包不能在 CRAN 上，因为它更改了 R 已经加载的代码，这是 CRAN 存储库策略所禁止的。该包替换了将结果和消息输出到 R 控制台的函数，这是必要的，因为如果不替换这些函数，我们就无法对输出进行着色。要安装它，请在 R 中执行以下操作：

```
install.packages("devtools")
devtools::install_github("jalvesaq/colorout")
library("colorout")
# do something 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T09:48:20.850

在 emacs 或[RStudio上使用](http://www.rstudio.com)[ess](http://ess.r-project.org/)之类的东西来突出显示 R 的语法，而不是期望它在终端中工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-03T14:46:35.210

现在的另一个选择是使用[弧度](https://github.com/randy3k/radian)而不是默认的 R 提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:31:15.797

如 hd1 所示，这不是 R 问题。你要求 OSX`Terminal.app`做一些它不能做的事情。快速浏览一下 Google（Zamboni 生日快乐！）显示[Vim 语法 Highlighting](https://stackoverflow.com/questions/6309083/vim-syntax-highlighting) 用于在`vim`或[https://superuser.com/questions/72057/terminal-emulator-with-custom-color-palette](https://superuser.com/questions/72057/terminal-emulator-with-custom-color-palette)中突出显示，但不知道这些是否会运行在达尔文之下。

编辑：我不能远离搜索:-)。所以看看这些线程： [https://superuser.com/questions/400360/syntax-highlighting-in-terminal-mac-os-x](https://superuser.com/questions/400360/syntax-highlighting-in-terminal-mac-os-x) ，[http://forums.macrumors.com/showthread.php?t=412609](http://forums.macrumors.com/showthread.php?t=412609)，以及安装建议`zsh`，[https://apple.stackexchange.com/questions/12161/os-x-terminal-must-have-utilities](https://apple.stackexchange.com/questions/12161/os-x-terminal-must-have-utilities)

# c# - Razor 如何知道何时以错误状态呈现页面？

> ID：14355371
> 
> 赞同：1
> 
> 时间：2013-01-16T09:45:16.387
> 
> 标签：c#, asp.net-mvc, razor

如标题所述：razor 如何知道页面何时应该呈现错误或正常状态？

我需要知道这些信息，这样我才能在错误模式下显示一个页面并显示验证消息等。不幸的是，我不能简单地这样做`View()`，因为找到处于无效状态的模型的代码在子视图中。

**编辑**
我正在尝试做这样的事情来强制剃须刀在错误模式下呈现视图：

```
// just for tests....
// model: a model which was marked as invalid in different controller
// state: state of the model from that controller
public ActionResult asdf(TModel model, ModelStateDictionary state) {
    var result = View(this.Partial, model);
    result.ViewData.ModelState.Clear();
    foreach (var x in state) {
        result.ViewData.ModelState.Add(x.Key, x.Value);
    }

    return result;
} 
```

**EDIT2**
最终解决方案。在之前的尝试中，从 Json 到 c# 类型的自动反序列化不起作用（原文如此！）所以我决定接收一个普通的 json 字符串并使用另一个库将其反序列化，如下所示：

```
public ActionResult ErrorIndex(string jsonParamsString) {
    var param = Newtonsoft.Json.JsonConvert.DeserializeObject<ForceInvalidStateRequestArg<TModel>>(jsonParamsString);

    if (param != null && param.Errors != null) {
        this.ModelState.Clear();
        foreach (var s in param.Errors) {
            this.ModelState.AddModelError(s.PropertyName, s.ErrorMessage);
        }
    }
    var result = View(this.PartialName, param == null ? this.NewModel : param.Model);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:51:29.590

有关模型有效性的信息存储在`ModelState`对象中。

可以在控制器中访问，例如：

```
this.ModelState.IsValid 
```

鉴于：

```
this.ViewContext.ViewData.ModelState 
```

**到您的编辑：**

您可以像这样添加模型验证错误：

```
this.ModelState.AddModelError("key", "an error message"); 
```

因此，如果您想强制 @razor 呈现验证错误消息。它可能看起来像：

```
public ActionResult asdf(TModel model, ModelStateDictionary state) 
{
    var result = View(this.Partial, model);
    result.ViewData.ModelState.Clear();
    foreach (var pair in state.Where(m=> m.Value != null && m.Value.Errors.Any()))
    {
        result.ViewData.ModelState.AddModelError(pair.Key, string.Join(",",pair.Value.Errors.Select(e=>e.ErrorMessage).ToArray()));
    }  
    return result;
} 
```

# ruby-on-rails - 带有嵌套 GET 的资源路由中断资源路由？

> ID：14355375
> 
> 赞同：0
> 
> 时间：2013-01-16T09:45:29.663
> 
> 标签：ruby-on-rails, routes, ruby-on-rails-3.2

运行 Rails 3.2.11，我有一个常规控制器“LbuController”，它基本上是一个增强的脚手架，由用于 AJAX 请求的 4 个额外的 GET 方法增强。

```
resources :lbus do
  get 'add_offering'
  get 'remove_offering'
  get 'add_offering_element'
  get 'remove_offering_element'
end 
```

跑步`rake routes`给了我以下路线

```
 lbu_add_offering GET    /lbus/:lbu_id/add_offering(.:format)                                 lbus#add_offering
        lbu_remove_offering GET    /lbus/:lbu_id/remove_offering(.:format)                              lbus#remove_offering
   lbu_add_offering_element GET    /lbus/:lbu_id/add_offering_element(.:format)                         lbus#add_offering_element
lbu_remove_offering_element GET    /lbus/:lbu_id/remove_offering_element(.:format)                      lbus#remove_offering_element
                       lbus GET    /lbus(.:format)                                                      lbus#index
                            POST   /lbus(.:format)                                                      lbus#create
                    new_lbu GET    /lbus/new(.:format)                                                  lbus#new
                   edit_lbu GET    /lbus/:id/edit(.:format)                                             lbus#edit
                        lbu GET    /lbus/:id(.:format)                                                  lbus#show
                            PUT    /lbus/:id(.:format)                                                  lbus#update
                            DELETE /lbus/:id(.:format)                                                  lbus#destroy 
```

这似乎正是我想要的。

但是按照`http://localhost:3000/lbus/new`创建的链接`link_to "new", new_lbu_path`会给我以下错误：

```
No route matches {:action=>"add_offering", :lbu_id=>nil, :offering_id=>1, :controller=>"lbus"} 
```

这对我来说完全没有意义。有人知道这里发生了什么以及出了什么问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:21:40.283

在“新”视图中，您必须使用 lbu_add_offering 路径。

这条路似乎不正确。错误指的是 :action=> "add_offering"。

# android - 安卓像素 VS dp

> ID：14355377
> 
> 赞同：-2
> 
> 时间：2013-01-16T09:45:36.287
> 
> 标签：android

正如 android 文档所说“将 dp 单位转换为屏幕像素很简单：`px = dp * (dpi / 160)`。例如，在 240 dpi 屏幕上，1 dp 等于 1.5 个物理像素。”

我对这个例子有点困惑。根据公式， `px=(240/160)dp => px = 1.5dp` 为什么会变成“在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素”？它应该说 1 px 等于 1.5 dp。请让我清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:12:47.090

The higher is the density, the smaller are the physical pixels. Therefore, to keep the size of a measure in dp to remains the same, 1dp requiert more physical pixels at a higher density because there are smaller.

The official normalisation for a dp is 1dp = 1px at a density of 160dpi; therefore, at a density of 240dpi - which is 50% greater - you need 50% more physical pixels in order to keep the same length for a measure expressed in dp.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T14:04:52.657

Android 为不同屏幕密度的设备定义了密度比。对于 mdpi 设备，此比率设置为 1。因此，如果您将宽度指定为 1dp，android 会通过将 dp 值乘以密度比率来计算像素值，即对于 mdpi 设备，px = 1 (dp) * 1 (ratio) = 1px .

但是在 xhdpi 设备这样的高密度设备上，比率是 2，android 会通过将 dp 值乘以密度比率来将 dp 转换为像素。px = 1 (dp) * 2 (比率) = 2px。因此，您的元素将在 xhpi 设备上为 2px。

更多信息可以在这里找到：[http ://www.jtechniques.com/android/android-basics/understanding-dp-in-android-ui-px-vs-dp](http://www.jtechniques.com/android/android-basics/understanding-dp-in-android-ui-px-vs-dp)

# css - 两个 div 与父母互相推倒

> ID：14355381
> 
> 赞同：0
> 
> 时间：2013-01-16T09:45:48.297
> 
> 标签：css, width

我试图在没有空格的情况下适应父级内部的 div，并使用一个定义像素和另一个百分比。没有推倒另一个。目前我有

```
<style>
    .wrapper {overflow: auto;}
    .container {float: left;margin-right: 150px;}
    .menu {float: right;width: 100px;}
    * {margin: 7px; padding:1px;}
</style>
<div class="wrapper">
    <div class="container">
    </div>
    <div class="menu">
    </div>
</div> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:57:55.337

您可以尝试使用以下样式：

```
.wrapper {padding-right:150px;}
.container {float: left; width:100%;}
.menu {float: right;width: 100px; margin-right:-150px;} 
```

请注意，您的菜单类在您的示例中具有大写 M，但您的样式表使用小 m

可以在这里看到一个例子[http://jsfiddle.net/ACk9B/](http://jsfiddle.net/ACk9B/)

# java - 字符数组大小？Stringbuffer 将 HTMl 文件保存在字符串中

> ID：14355382
> 
> 赞同：0
> 
> 时间：2013-01-16T09:45:49.403
> 
> 标签：java, string, url

我正在阅读一个 HTML 文件并将其保存在一个字符串中。我想读取长度（`int len = con.getcontentlength()`）并放入 char`charArray=new char(len)`但结果`getContentLength`始终为-1。所以我修复了 charArray 但如果我输入 `char[] charArray=new char[1]` or `char[] charArray=new char[512]` 或 `char[] charArray=new char[1024]`

它总是有效的。

我不明白为什么。

```
public static void main(String[] args) throws Exception
{
    String name="AAAA";     
    URL url = new URL("http:...");
    URLConnection con = url.openConnection();

    InputStream is = con.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);

    int numCharsRead;   
    char[] charArray = new char[1];
    StringBuffer sb = new StringBuffer();
    while ((numCharsRead = isr.read(charArray)) > 0)
        sb.append(charArray, 0, numCharsRead);
    String htmlString = sb.toString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:47:00.273

从 更改`new char[1];`为`new char[isr.available()];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:48:33.610

```
InputStreamReader isr = new InputStreamReader(is);
    int c = 0;
    while((c = isr.read()) != -1) {
        char character = (char) c;

        System.out.println(character);

    } 
```

# android - Android MapView 不以缩放级别 1 显示地图

> ID：14355384
> 
> 赞同：3
> 
> 时间：2013-01-16T09:45:56.857
> 
> 标签：android, android-mapview, zooming

我对 android 地图视图有疑问。

我尝试使用地图开发简单的应用程序，但我不明白缩放级别为 1 时地图会发生`MapView`什么。如果 . 则不显示任何内容`zoom == 1`。这个问题的原因是什么？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="api_key"
    android:clickable="true"
    android:enabled="true"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:43:23.163

```
@Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);
        if (mapView.getZoomLevel() < 2)
            mapView.getController().setZoom(2);
    } 
```

> 在您的地图视图类检查条件。

# winforms - 在winforms中的文本框OnKeyUp事件中捕获换行符

> ID：14355386
> 
> 赞同：1
> 
> 时间：2013-01-16T09:46:01.880
> 
> 标签：winforms, textbox, onkeyup, linefeed

我有一个 Windows 窗体应用程序，其中包含一个文本框，用于从手持条形码扫描仪向应用程序提供输入。我们使用的条形码可能包含特殊的控制字符，例如 ESC，其默认行为是清除输入行。为了能够将此类条形码字符串读入应用程序，我使用了以下方法，该方法在按键事件中与文本框挂钩：

```
private void OnKeyUp(object sender, KeyEventArgs e){barcodestr += (char)e.KeyValue;} 
```

问题是 OnKeyUp 方法忽略了换行字符，我不确定如何捕获这些字符。

请注意，以 true 和 false 的任意组合设置 Multiline/AcceptsReturn 文本框属性似乎没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:28:33.457

最后，它在切换到使用 KeyPress 事件而不是 KeyUp 后起作用。

# sql - SQL 无效标识符

> ID：14355395
> 
> 赞同：0
> 
> 时间：2013-01-16T09:46:15.793
> 
> 标签：sql, oracle, join, oracle11g, inner-join

任何人都可以帮助我进行查询，该查询从我的家表中选择一个家，并将另一个表中的值列表获取到单个列中。该查询来自我在此处发布的另一个问题的帮助，但是我现在正尝试根据需要添加到查询中。当我尝试在另一个表中添加一个列时，Oracle 会抛出一个无效标识符错误，下面是我的查询；

```
SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
listagg(features.feature_name, ',') WITHIN GROUP (ORDER BY features.feature_name)  features, home_type.type_name, home_photo.photo, home_photo.description
FROM homes, home_type, home_photo
INNER JOIN home_feature
    ON homes.home_id = home_feature.home_id
INNER JOIN features
    ON home_feature.feature_id = features.feature_id
INNER JOIN home_photo
    ON home_photo.home_id = homes.home_id
WHERE home_type.type_code = homes.type_code AND homes.homes_id = home_photo.home_id
GROUP BY homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name; 
```

上面的查询抛出了这个，但该列确实是正确的：

```
ORA-00904: "HOMES"."HOME_ID": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 5 Column: 4 
```

从我的其他问题中删除原始查询的列会导致查询工作吗？以下是添加来自不同表的其他列之前的工作查询：

```
SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
listagg(features.feature_name, ',') WITHIN GROUP (ORDER BY features.feature_name)  features
FROM homes
INNER JOIN home_feature
    ON homes.home_id = home_feature.home_id
INNER JOIN features
    ON home_feature.feature_id = features.feature_id
GROUP BY homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft; 
```

如果有人可以提供帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:52:42.153

```
SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
listagg(features.feature_name, ',') WITHIN GROUP (ORDER BY features.feature_name)  features, home_type.type_name, home_photo.photo, home_photo.description
FROM homes
INNER JOIN home_feature
    ON homes.home_id = home_feature.home_id
INNER JOIN home_type
    ON home_type.type_code = homes.type_code
INNER JOIN home_photo
    ON homes.homes_id = home_photo.home_id
INNER JOIN features
    ON home_feature.feature_id = features.feature_id
INNER JOIN home_photo
    ON home_photo.home_id = homes.home_id
GROUP BY homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name; 
```

将工作。即不要混淆ANSI + oracle 连接语法。

# c++ - 在 linux 上运行 cygwin 编译的 c++ 程序

> ID：14355399
> 
> 赞同：1
> 
> 时间：2013-01-16T09:46:28.960
> 
> 标签：c++, linux, windows, compilation, cygwin

我想在 cygwin（在 windows 上）编译一个 c++ 程序，然后在 Linux 机器上运行它。我不想在 Linux 上编译它的原因是缺少库，而且一团糟（包括访问受限）安装这些。

我希望我可以编译它，然后将程序名 .exe 文件复制到我的 linux 文件夹中，然后运行*​​./programname* *。*但这不起作用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:47:49.850

简短的回答是：你不能。

更长的答案：您可以，但是您必须设置一个生成本机 Linux 二进制文件的交叉编译器。或者在 Linux 中使用[WINE等环境。](http://www.winehq.org/)

即使使用 GCC 编译，您也不能只从 Windows 复制可执行文件的原因是该文件具有在 Linux 上不被视为可执行文件的特定格式。

# sql - 在 SQLServer 中解析日期

> ID：14355401
> 
> 赞同：0
> 
> 时间：2013-01-16T09:46:52.800
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试从 VARCHAR(50) 转换为 DATE；只有日期；但它没有给我任何结果，但这是我使用的语句：

```
SELECT COUNT(F0)
FROM [OriginalData]
WHERE F1 between Convert(VARCHAR(11),'25/12/1988',103) and 
          convert(VARCHAR(11),'16/01/2013',103) AND F0 = 120002 
```

它显示结果的唯一方法是日期字符串为 01；例如：

1988 年 1 月 1 日和 2013 年 1 月 1 日

所以请任何建议如何从字符串转换为日期并进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:51:18.303

假设`F1`是`varchar(50)`，那么你正在做一个字符串比较。

使用正确的 ISO 日期...

```
...
WHERE CONVERT(date, F1, 112) -- change this to match F1 format
         BETWEEN CONVERT(date,'19881225',112) and 
                 CONVERT(date,'20130116',112)
       AND F0 = 120002 
```

请注意，从索引的角度来看，这不是有效的，因为`CONVERT`需要 on `F1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:49:05.887

你需要像这样转换它

```
SELECT convert(datetime, '23/07/2009', 103) 
```

这意味着查询将是

```
SELECT COUNT(F0)
FROM [OriginalData]
WHERE F1 between Convert(datetime,'25/12/1988',103) and 
          convert(datetime,'16/01/2013',103) AND F0 = 120002 
```

而不是在转换时`VARCHAR(11)`使用 `DateTime`数据类型

**注意**：假设`F1`是类型`datetime`

* * *

如果 varchar 的 F1 数据类型大于

```
SELECT COUNT(F0)
FROM [OriginalData]
WHERE Convert(datetime,F1,103) between Convert(datetime,'25/12/1988',103) and 
          convert(datetime,'16/01/2013',103) AND F0 = 120002 
```

转换 F1 也像上面的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:17:39.657

您可以使用以下查询：

```
declare @t varchar(100) = '26/12/1988'

select case
        when convert(date,@t,103) between Convert(date,'25/12/1988',103) and convert(date,'16/01/2013',103) 
                then @t
        else
            'date is not in the specified range'    
        end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:52:14.193

我相信从字符串转换到日期是这样的：

```
CONVERT (datetime, '16.01.2013', 103) 
```

你在`Varchar`那里使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:49:19.473

尝试这个

```
CONVERT(DATETIME, '25/12/1988', 101) 
```

# python - 获取上传文件内容到wsgi

> ID：14355409
> 
> 赞同：4
> 
> 时间：2013-01-16T09:47:16.160
> 
> 标签：python, wsgi

我正在编写一个简单的 wsgi 脚本来上传文件。使用 html 表单。

以下是wsgi脚本，

```
import os
import cgi
import cgitb; cgitb.enable()

class upfile(object):

    def __init__(self):
        self.script_dir = os.path.dirname(__file__)
        self.errors = []

    def __call__(self, environ, start_response):

        f = open(os.path.join(self.script_dir, 'upload.html'))
        self.output = f.read()
        f.close()

        self.response_content_type = 'text/html;charset=UTF-8'
        fields = None
        if 'POST' == environ['REQUEST_METHOD'] :        
            fields = cgi.FieldStorage(fp=environ['wsgi.input'],environ=environ, keep_blank_values=1)
            fileitem = fields['file']
            fn = os.path.basename(fileitem.filename) 
            open('uploads/' + fn, 'wb').write(fileitem.file.read())

        self.output = self.output % {"filepath":str(fields)} # Just to see the contents

        response_headers = [('Content-type', self.response_content_type),('Content-Length', str(len(self.output)))]
        status = '200 OK'
        start_response(status, response_headers)
        return [self.output]

application = upfile() 
```

然后像往常一样在我的 HTML 表单中放置一个文件字段，

```
<input type='file' name='file' /> 
```

我的问题是字段（cgi.FieldStorage）只有文件名。没有文件内容。我希望文件内容不仅要上传文件名。

以下是字段变量的值，

`"FieldStorage(None, None, [MiniFieldStorage('file', 'CatchSkull-large.jpg'), MiniFieldStorage('email', 'chamith@gmail.com'), MiniFieldStorage('operation', 'Upload'), MiniFieldStorage('current', 'upload')])"`

请忽略其他字段，它们是表单上的其他字段。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:09:02.047

最后我想出了答案。我错过了将 enctype 放在 HTML 表单上，

```
<form id="upload" name="upload" method="POST" enctype="multipart/form-data"> 
```

然后一切顺利。

谢谢。

# c# - 保存单选按钮选择

> ID：14355415
> 
> 赞同：0
> 
> 时间：2013-01-16T09:47:24.797
> 
> 标签：c#, asp.net, radio-button, postback

我有单选按钮，我需要在页面之间保持选中状态。我已经查找了所有解决方案，但我仍然对我应该做什么感到困惑。我将提供显示单选按钮功能的代码

.aspx 页面

```
<p>What Is Your Budget?
<asp:RadioButton ID="High_B" GroupName="Budget" runat="server" Text="High" 
        oncheckedchanged="High_B_CheckedChanged" ViewStateMode="Enabled" 
        AutoPostBack="True">
    </asp:RadioButton>
     <asp:RadioButton ID="Low_B" GroupName="Budget" runat="server" Text="Low" 
        oncheckedchanged="Low_B_CheckedChanged" AutoPostBack="True" 
        ViewStateMode="Enabled"> 
    </asp:RadioButton>
 </p>
    <p>What is the level of excitement around FWC 2014?
     <asp:RadioButton ID="High_E" GroupName="Radio" runat="server" Text="High" 
        oncheckedchanged="High__E_CheckedChanged" ViewStateMode="Enabled" 
            AutoPostBack="True">
    </asp:RadioButton>
     <asp:RadioButton ID="Low_E" GroupName="Radio" runat="server" Text="Low" 
        oncheckedchanged="Low_E_CheckedChanged" AutoPostBack="True" 
            ViewStateMode="Enabled"> 
    </asp:RadioButton></p> 
```

.aspx.cs 页面

```
public void Chart()
    {
        if (High_E.Checked && High_B.Checked)
        {

            DataSet dSet = new DataSet();
            dSet.ReadXml(Server.MapPath("~/ChartData/HighBud_Ex.xml"));
            Chart1.DataSource = dSet.Tables[0];
            Chart1.DataBind();
            Session["name"] = "High";
            setName();
        }

        if (High_E.Checked && Low_B.Checked)
        {
            DataSet dSet = new DataSet();
            dSet.ReadXml(Server.MapPath("~/ChartData/LowBud_HighEx.xml"));
            Chart1.DataSource = dSet.Tables[0];
            Chart1.DataBind();
            Session["name"] = "LowHigh";
            setName();
        }

        if (Low_E.Checked && High_B.Checked)
        {
            DataSet dSet = new DataSet();
            dSet.ReadXml(Server.MapPath("~/ChartData/HighBud_LowEx.xml"));
            Chart1.DataSource = dSet.Tables[0];
            Chart1.DataBind();
            Session["name"] = "HighLow";
            setName();
        }

        if (Low_E.Checked && Low_B.Checked)
        {
            DataSet dSet = new DataSet();
            dSet.ReadXml(Server.MapPath("~/ChartData/LowBud_Ex.xml"));
            Chart1.DataSource = dSet.Tables[0];
            Chart1.DataBind();
            Session["name"] = "Low";
            setName();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:50:48.813

您应该在回发之间保留单选按钮的状态。也就是说，在`oncheckedchanged`事件中，例如将单选按钮的状态保存在**Session**中，然后在回发之后，设置回这些状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:19:16.000

我也有这个问题，我使用会话变量来存储单选按钮的状态，我所做的是在回发时。我将单选按钮的状态存储在一个用逗号分隔的字符串中，然后当我需要恢复状态时。我使用字符串拆分函数取数组 n 中的值取决于字符串我恢复了控件的状态

# iphone - 集合视图中的单元格不可见

> ID：14355422
> 
> 赞同：1
> 
> 时间：2013-01-16T09:47:46.950
> 
> 标签：iphone, ios, objective-c, uicollectionview, uicollectionviewcell

这是集合视图的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ...
    [_teamsCollection registerClass:[MWTeamCollectionCell class] forCellWithReuseIdentifier:@"Cell"];

}
#pragma mark data source and delegate methods of collection view
-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return 10;
}
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";
    MWTeamCollectionCell *cell = [_teamsCollection dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
        cell = (MWTeamCollectionCell*)[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.teamName.text = @"team name";
    return cell;
} 
```

当我调试线路`return cell;`时，我得到了正确的日志，但我没有看到单元格。

```
(gdb) po cell
<MWTeamCollectionCell: 0x72aff80; baseClass = UICollectionViewCell; frame = (0 0; 50 50); layer = <CALayer: 0x72b0090>>
(gdb) po cell
<MWTeamCollectionCell: 0x72b08e0; baseClass = UICollectionViewCell; frame = (67.5 0; 50 50); layer = <CALayer: 0x72b0970>>
(gdb) po cell
<MWTeamCollectionCell: 0x8aad380; baseClass = UICollectionViewCell; frame = (135 0; 50 50); layer = <CALayer: 0x8a72d20>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:37:00.487

不需要像UITabeView这样注册类，试试这个：

```
[yourCollection registerClass:[MWTeamCollectionCell class] forCellWithReuseIdentifier:@"CellName"]; 
```

进而

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    MWTeamCollectionCell *cell = [yourCollection dequeueReusableCellWithReuseIdentifier:@"CellName" forIndexPath:indexPath];
    //Setting some thing here

    return cell;

} 
```

够了，记住 MWTeamCollectionCell:UICollectionViewCell 并在 MWTeamCollectionCell.m 中的 (id)init 中自定义（初始化您的团队名称标签）

并且 UICollectionView 仅适用于 iOS6，如果您尝试 iOS5，则没有显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:27:15.653

看起来您正在分配 UITableViewCell 而不是 UICollectionViewCell。

此外，根据您实现自定义收集单元的方式，确保笔尖已正确解码（加载）。我建议首先使用 UICollectionViewCell 来验证您在界面生成器中的插座和标识符名称是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T05:36:16.010

替换此行

```
[yourCollection registerClass:[MWTeamCollectionCell class] forCellWithReuseIdentifier:@"CellName"]; 
```

使用以下工作线

```
UINib *cellNib = [UINib nibWithNibName:@"MWTeamCollectionCell" bundle:nil];    
[self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"CellName"]; 
```

对我来说效果很好。

# c# - 如何检查节点是否有子元素

> ID：14355424
> 
> 赞同：0
> 
> 时间：2013-01-16T09:47:53.737
> 
> 标签：c#, xml, xmlreader

我正在编写一个 xml 阅读器，其中类结构将表示来自 xml 文件的数据。

例如：

```
<catalog>
<book id="bk101">
  <author>Gambardella, Matthew</author>
  <title>XML Developer's Guide</title>
  <genre>Computer</genre>
  <price>44.95</price>
  <publish_date>2000-10-01</publish_date>
  <description>An in-depth look at creating applications 
  with XML.</description>
</book>
</catalog> 
```

我怎样才能找到一个节点包含子节点！我使用了 isempty 元素方法！但我有一个例外。

```
 public element read(XmlReader xml)
    {
        element elem = new element();
        while (xml.Read())
        {
            if (xml.IsEmptyElement)
            {
                elem.ElemName = xml.Name;
                if (xml.HasAttributes)
                {
                    for (int i = 0; i <= xml.AttributeCount; i++)
                    {
                        xml.MoveToNextAttribute();
                        attribute attrib = new attribute();
                        attrib.AttName = xml.Name;
                        attrib.AttValue = xml.Value;
                        elem.Attributes.Add(attrib);
                    }
                }
                return elem;
            }
            else
            {
                elem.ElemName = xml.Name;

                if (xml.HasAttributes)
                {
                    for (int i = 1; i < xml.AttributeCount; i++)
                    {
                        xml.MoveToNextAttribute();
                        attribute attrib = new attribute();
                        attrib.AttName = xml.Name;
                        attrib.AttValue = xml.Value;
                        elem.Attributes.Add(attrib);
                    }
                }

                elem.subElems.Add(read(xml)); -> Object reference not set to an instance of an object.
                return elem;
            }
        }
        return elem;
    } 
```

我使用两个类。一种称为元素，一种称为属性。我在这里做的是逐行查找，当我找到一个元素时，我创建一个元素类型对象。然后我检查该元素是否包含任何属性。如果是这样，我会为遇到的属性创建属性类型对象，并将它们添加到元素对象中的属性列表中。然后我检查子元素，如果找到，我将它们作为单独的元素对象添加到主元素对象的列表中。

```
 class element
{
    private String elemName;

    public String ElemName
    {
        get { return elemName; }
        set { elemName = value; }
    }
    private String elemValue;

    public String ElemValue
    {
        get { return elemValue; }
        set { elemValue = value; }
    }
    private List<attribute> attributes;

    internal List<attribute> Attributes
    {
        get { return attributes; }
        set { attributes = value; }
    }

    private List<element> SubElems;

    internal List<element> subElems
    {
        get { return SubElems; }
        set { SubElems = value; }
    }

}

class attribute
{
    private String Name;

    public String AttName
    {
        get { return Name; }
        set { Name = value; }
    }
    private String value;

    public String AttValue
    {
        get { return this.value; }
        set { this.value = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:50:40.237

创建时，`element elem = new element();`您永远不会将值分配给`subElems`，而只会分配给`elem.ElemName = xml.Name`。因此，您得到的结果`NullReferenceException`是因为在创建对象之后您拥有 subElems `null`。我已经重构了您的代码（请注意，我对类一无所知`element`）

```
public element read(XmlReader xml)
{
    element elem = new element();
    while (xml.Read())
    {
        elem.ElemName = xml.Name;
        if (xml.HasAttributes)
        {
            for (int i = 0; i <= xml.AttributeCount; i++)
            {
                xml.MoveToNextAttribute();
                attribute attrib = new attribute();
                attrib.AttName = xml.Name;
                attrib.AttValue = xml.Value;
                elem.Attributes.Add(attrib);
            }
        }
        if (xml.IsEmptyElement)
        {   
            return elem;
        }
        else
        {
            elem.subElems = new List<element>(); //create new List of subelements
            elem.subElems.Add(read(xml)); 
            return elem;
        }
    }
    return elem; 
```

## 或者

`element`在初始化的构造函数中定义`subElems`之`Attributes`类的

```
public element()
{
    this.subElems = new List<element>();
    this.Attributes = new List<attribute>();
} 
```

## 或者

将您的字段声明更改为

```
private List<element> SubElems = new List<element>();
private List<attribute> attributes = new List<attribute>(); 
```

# winforms - 43679是一个神奇的数字吗？

> ID：14355427
> 
> 赞同：22
> 
> 时间：2013-01-16T09:48:08.850
> 
> 标签：winforms, magic-numbers

最近我正在调查这个问题：[Storing long values in DataGridView C#](https://stackoverflow.com/questions/14353785/storing-long-values-in-datagridview-c-sharp)。经过一些测试，我发现即使该值实际存储在单元格中并且您可以通过编程方式访问它，它`DataGridViewCell`也不会显示任何长度大于**43679 个字符的文本。**

实际上，这也被报告为一个错误`SQL Server Management Studio`：[SSMS - Can not paste more than 43679 characters from a column in Grid Mode](https://connect.microsoft.com/SQLServer/feedback/details/499608/ssms-can-not-paste-more-than-43679-characters-from-a-column-in-grid-mode)。

我猜这个限制是为了防止 UI 渲染出现任何过载。但我的问题是：

1.  为什么要使用这个确切的值？
2.  有这个限制的任何文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:49:48.177

如果转换`43679`为十六进制，则为`0xAAA0`. 或以相反的形式`0xAAA0 = 0xFFFF - 0x555F`。

0x555F是中文Unicode符号['open; 开始'](http://www.fileformat.info/info/unicode/char/555F/index.htm)。可能是中文信息或某种中国魔法）

# c# - 使用 datagrid 显示数据库中的数据

> ID：14355428
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:09.570
> 
> 标签：c#, winforms

我在winform中工作一个字典项目。我有一个文本框，我在其中输入我的文本。每当我输入任何文本时，我都会在word = my_entered_text的位置显示单词及其含义。我试过这样

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {

        string word = textBox1.Text;

        //connect to database
        SqlCeConnection con = new SqlCeConnection(@"Data Source=C:\Users\Imon-Bayazid\Documents\new2.sdf");

        using (con)
        {
            con.Open();
            // 2
            // Create new DataAdapter
            using (SqlCeDataAdapter a = new SqlCeDataAdapter(
               "SELECT English FROM Table1 WHERE (English like '" + word + "%')", con))
            {
                // 3
                // Use DataAdapter to fill DataTable
                DataTable t = new DataTable();
                a.Fill(t);
                // 4
                // Render data onto the screen
                dataGridView2.DataSource = t;
            }

            using (SqlCeDataAdapter b = new SqlCeDataAdapter(
                "SELECT Bangla FROM Table1 WHERE (English like '" + word + "%')", con))
            {
                // 3
                // Use DataAdapter to fill DataTable
                DataTable tt = new DataTable();
                b.Fill(tt);
                // 4
                // Render data onto the screen
                dataGridView1.DataSource = tt;

            }
        }
    } 
```

但它在“dataGridView1.DataSource = tt;”行显示“参数无效”异常 我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:55:16.130

```
"SELECT Bangla FROM Table1 WHERE (English like '" + word + "%')" 
```

PS。*表 Bangla 中可能不存在“English”列*

# visual-studio-2010 - 源代码控制无法访问数据库

> ID：14355431
> 
> 赞同：4
> 
> 时间：2013-01-16T09:48:17.903
> 
> 标签：visual-studio-2010, git

```
The associated source control plug-in is not installed or could not be initialized.
Common causes for this error include server unavailability and/or incorrect workspace mappings.

O Temporarily work uncontrolled
o Permanentnly remove source control association bindings 
```

亲爱的朋友们，

我已经安装了 git 和 git 扩展，我已经正确使用了克隆存储库，git 系统在我的系统上运行良好，但我收到了这个错误

有什么问题？映射？如何解决它... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T13:08:13.003

OP报告安装了Visual Studio的git插件（应该是“ [Visual Studio Tools for Git](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c) ”），错误信息消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T10:08:31.333

**常见的解决方法通常是通过完成以下步骤来刷新本地缓存：**

删除以下文件夹中的内容

C:\Users\<>\AppData\Local\Microsoft\Team Foundation

C:\Users\<>\AppData\Local\Microsoft\VisualStudio

C:\Users\<>\AppData\Local\Microsoft\VSCommon

在命令提示符下转到 Visual Studio IDE 文件夹，然后从 Visual Studio IDE 文件夹运行以下命令“devenv /resetuserdata”。

64 位的典型位置：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE

32 位的典型位置：

C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE

在执行上述步骤之前，请关闭您的 Visual Studio 的所有实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T23:37:22.343

文件中应该有一个 Global 部分，这是所有设置所在的位置。查找 GlobalSection(TeamFoundationVersionControl) 并将整个部分删除到 EndGlobalSection。

一旦你这样做了，重新加载解决方案并告诉它重新上线，你的绑定应该再次工作。

# .net - 如何制作适用于双平台（32/64 位）的 vb.net 应用程序

> ID：14355432
> 
> 赞同：1
> 
> 时间：2013-01-16T09:48:20.630
> 
> 标签：.net, vb.net, 32bit-64bit, anycpu

我可以创建一个可以同时在两个 Windows 平台（32 / 64 位）上运行的应用程序吗？如果没有，我如何创建 64 位版本和 32 位版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:51:43.403

是的，您可以 - 只需将 Vizual Studio 中的编译选项设置为 AnyCPU ( `Build>Configuration Manager>Active Solution Platform`)。以 32 位或 64 位为目标，将平台分别设置为 x86 或 x64

看看[这个链接解释差异](http://visualstudiohacks.com/articles/visual-studio-net-platform-target-explained/)

但是 AnyCPU 不一定是最好的选择 - 所以看看这篇文章：[AnyCPU 是邪恶](http://channel9.msdn.com/Forums/TechOff/502739-Any-CPU-Is-it-evil)的，你自己决定你想要什么设置

如果您使用的是 Visual Studio Express，请查看[此问题和答案，](https://stackoverflow.com/questions/4104228/change-target-cpu-settings-in-visual-studio-2010-express)说明如何执行此操作

# jquery - vAlign 元素居中，但相对于内容处于水平位置

> ID：14355435
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:21.413
> 
> 标签：jquery, css

[http://jsfiddle.net/DAFHq/1/](http://jsfiddle.net/DAFHq/1/)

```
<div id="gray-box">
<div id="red-box"></div>
</div> 
```

我需要将红色方块放置在灰色框右侧 20 像素处，其中包含滚动内容，同时保持它在中心垂直对齐。

在滚动和调整屏幕大小时，它应该保持相对于灰色框的位置。

有任何想法吗？jsFiddle 是我发现并修改以显示我需要的东西，垂直对齐是完美的，但我不知道如何将它放置在我需要的水平位置。

也许与jQuery有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:53:53.757

您需要一个用于滚动元素的支架元素。

```
<div id="grey-box">
    <div id="red-box"></div>
    <div id="elements-holder"></div>
</div>

.elements-holder {
    overflow: auto;
}

#grey-box {
    position: relative;
}

#red-box {
    position: absolute;
    right: 20px;
    height: 40px;
    width: 40px;
    top: 50%;
    margin-top: -20px; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:05:42.533

试试这个：

```
var positionFoo = function() {
  $('#foo').css({
    'left': $('#bar').offset().left + $('#bar').width() + 20 + 'px',
    'top': ($(window).height() / 2) - ($('#foo').height() / 2)
  });
};

$(window).resize(positionFoo);
positionFoo(); 
```

您还需要添加`position: fixed;`到`#Foo`.

[**更新的小提琴**](http://jsfiddle.net/RoryMcCrossan/DAFHq/5/)

# php - 代码点火器将表单下拉列表转换为常规选择框

> ID：14355438
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:30.140
> 
> 标签：php, jquery, ajax, codeigniter, dropdownbox

我正在尝试将我的表单代码转换为常规选择框..但它在 form_dropdown 而不是常规选择框中工作..我认为我做错了什么..实际上我是代码点火器的新手..

这是我的两个下拉选择框..逻辑实际上是这样实现的，它根据前一个下拉列表显示第二个下拉列表中的选项..

```
 <!-- Categories -->
        <?php $items['#'] = 'Please Select'; ?>

   Select a Category: 
<?php echo form_dropdown('cat_id', $records2, '#','id="category"  class = "cho"');?>

        <!-- end of Categories -->

        <!-- Items -->
        Items: </label>

<?php echo form_dropdown('item_id', $records3 , '#', 'id="items" class="cho"'); ?>
                <br />

        <!-- end of Items --> 
```

项目基于类别..我只是希望他们将这两个选择或下拉框转换为常规的 html 方式..

这是我的 javascript

```
 <script type="text/javascript">// <![CDATA[
         $(document).ready(function(){       
            $('#category').change(function(){ 

        if (document.getElementById('items_chzn') != undefined) {
            $("#items_chzn").remove();
            $("#items").attr("class","");
            //$("#items").show();         
        }

        $("#items > option").remove(); 
        var category_id = $('#category').val();  
        $.ajax({
            type: "POST",
            url: "stockInController/get_Items/"+category_id,

            success: function(items) 
            {
                $.each(items,function(item_id,item_name) 
                {
                    var opt = $('<option />'); 
                    opt.val(item_id);
                    opt.text(item_name);
                    $('#items').append(opt); 
                });

                //alert("applying plugin");
                $('#items').chosen({no_results_text: "No results matched"});
            }

        });

    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:07:01.557

为什么要将其更改为常规的 html 方式..当您以 CI 方式工作时...无论如何

尝试这个

**类别**

```
 <select name="cat_id" id="category"  class = "cho">
   <?php foreach($records2 as $row){?>  //loop through your categories option  here
     <option value="<?php echo $row['value']?>"><?php echo $row['text']?></option>
  <?php } ?>
 </select> 
```

**项目**

```
 <select name="item_id" id="items" class="cho">
  //optional <?php foreach($records3 as $row){?>  //since this is dynamic i don't think u need options here
     <option value="<?php echo $row['value']?>"><?php echo $row['text']?></option>
  <?php } ?> // optional ends
 </select> 
```

**更新**

用于 CI 表单多选

```
$selectmultioption= array('//value1 of option you want to select', '//value2 of option you  want to select');
<?php echo form_multiselect('cat_id[]', $records2, $selectmultioption ,'id="category"  class = "cho"');?> 
```

# java - 如何使用 CQL 更新 Cassandra 中的列值？

> ID：14355439
> 
> 赞同：1
> 
> 时间：2013-01-16T09:48:31.490
> 
> 标签：java, cassandra, cql

我创建了一个包含两个列字段的键空间。一个是 ID，另一个是名称。我已在该键空间中插入记录。我想更新特定 id 的名称字段。

我使用了以下 CQL 查询

```
UPDATE keyspaceName/columnFalmilyName SET name='name' WHERE id = 'id' 
```

在执行此查询时，它会抛出异常

```
InvalidRequestException(why:line 1:56 mismatched input 'id' expecting K_KEY)... 
```

如果查询框架错误，如何使用 CQL 更新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:09:23.470

插入和更新需要指定行键，而您似乎正在尝试使用列名。插入新的 id、name 对时使用了什么键？

请参阅 [http://cassandra.apache.org/doc/cql3/CQL.html][1] 上的 CQL 文档

```
<update-stmt> ::= UPDATE <tablename>
                  ( USING <option> ( AND <option> )* )?
                  SET <assignment> ( ',' <assignment> )*
                  WHERE <where-clause>
The UPDATE statement writes one or more columns for a given row in a table. The 
<where-clause> is used to select the row to update and must include all columns 
composing the PRIMARY KEY. Other columns values are specified through <assignment> 
after the SET keyword. 
```

您需要查看您的 ColumnFamily 定义并查看您的主键是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T15:03:34.770

你试过吗：UPDATE keyspaceName/columnFalmilyName SET name='name' WHERE id = (without '')

# c++ - 在 boost python 中使用自定义智能指针

> ID：14355441
> 
> 赞同：5
> 
> 时间：2013-01-16T09:48:42.987
> 
> 标签：c++, python, boost, smart-pointers, boost-python

***我想使用 Boost::Python 在 python 中公开包装在自定义智能指针中的对象***

注意事项

*   自定义智能指针的现有使用过于普遍，无法经济地升级到 boost 智能指针
*   我想使用在几个位置描述的自动取消引用技术

问题是我似乎无法完全正确。这是一个示例代码：

**LegacyCode::Ptr** -> 旧智能指针代码

**LegacyCode::Session** -> 包裹在旧智能指针中的旧对象

```
namespace boost { namespace python
{
    template <class T> T* get_pointer(LegacyCode::Ptr<T> const& p)
    {
        return p.get();
    }

    template <typename T>
    struct pointee<LegacyCode::Ptr<T> >
    {
        typedef T type;
    };

}}*

BOOST_PYTHON_MODULE(pyro)
{
    using namespace boost::python;

    class_<LegacyCode::Session,LegacyCode::Ptr<LegacyCode::Session>>("Session")
                                          .def("get_type",&LegacyCode::Session::getType);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:15:38.813

这是一个完整的示例。您几乎拥有它 - 您必须`get_pointer()`从`boost::python`命名空间中删除 。

```
#include <boost/python.hpp>

// dummy smart ptr class
template <typename T> class Ptr {
  public:
    typedef T element_type;

    Ptr(): px(0) {}
    Ptr(T* p): px(p) {}

    // base operators
    T* operator->() { return px; }
    const T* operator->() const { return px; }
    T& operator*() { return *px; }
    const T& operator*() const { return *px; }

    // getters
    T* get() { return px; }
    const T* get() const { return px; }

  private:
    T* px;
};

// a dummy class that will be held by your custom smart pointer
class  Session {
  public:
    Session(int value) : value_(value) {}
    virtual ~Session() {}

    // a few methods to play with the class
    int value() const { return value_; };
    void value(int value) { value_ = value; }

  private:
    int value_;
};

// this emulates methods actually using your smart pointers
void print_value_1(const Ptr<Session>& s) {
  std::cout << "[by const reference] The value of this session is " << s->value() << std::endl;
}

void print_value_2(Ptr<Session> s) {
  std::cout << "[by value] The value of this session is " << s->value() << std::endl;
}

// here comes the magic
template <typename T> T* get_pointer(Ptr<T> const& p) {
  //notice the const_cast<> at this point
  //for some unknown reason, bp likes to have it like that
  return const_cast<T*>(p.get());
}

// some boost.python plumbing is required as you already know
namespace boost { namespace python {

  template <typename T> struct pointee<Ptr<T> > {
    typedef T type;
  };

} }

// now the module
BOOST_PYTHON_MODULE(example) {
  using namespace boost::python;
  class_<Session, Ptr<Session>, boost::noncopyable>("Session", init<int>());
  def("print_value_1", &print_value_1);
  def("print_value_2", &print_value_2);
} 
```

您可以使用以下 python 代码对此进行测试：

```
import example
s = example.Session(27)
example.print_value_1(s)
example.print_value_2(s) 
```

我们通过示例演示`boost.python`将根据需要正确运行转换。

# android - 如何将变量传递给广播接收器？

> ID：14355443
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:51.723
> 
> 标签：android, broadcastreceiver, alarmmanager

从主要活动中，我调用带有警报管理器的广播接收器来启动重复功能。我还创建了共享时段的偏好。如何将周期时间整数传递给另一个类广播接收器？

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences preferences = getSharedPreferences("dataiowebusb" ,  VATE);

      String strUpdatetime = preferences.getString("Period","3");

      text5.setText(strUpdatetime);

      Tperiod =Integer.parseInt(strUpdatetime);

        if(Tperiod>1200){
            Tperiod=1200;//20min
        }

        sendBroadcast(new Intent(this,MyScheduleReceiver.class));//Call ala   

}

    public class MyScheduleReceiver extends BroadcastReceiver {

public static int period=20;

private static final long REPEAT_TIME = 1000 * period;
public void onReceive(Context context, Intent intent) {

AlarmManager service = (AlarmManager) context
    .getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, MyStartServiceReceiver.class); 
```

如果我在广播接收器类中使用共享首选项，则会出现错误 MODE_PRIVATE..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:56:52.237

您可以`Intent`使用`extras`属性及其访问方法[putExtra传递对象上的数据，并使用](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20int%29)[getIntExtra](http://developer.android.com/reference/android/content/Intent.html#getIntExtra%28java.lang.String,%20int%29)检索数据。

因此，您的调用代码应如下所示：

```
Intent intent=new Intent(this,MyScheduleReceiver.class)
intent.putExtra("PERIOD", Tperiod);
sendBroadcast(intent);//Call ala 
```

要收回它，请在您的接收器`onReceive`方法中：

```
int tPeriod= intent.getIntExtra("PERIOD", 1200); //taking 1200 as a default value, used if no "PERIOD" Bondle is found at the Intent extras. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:58:57.600

在创建 Intent 时将一些数据放入包中（附加）

```
new Intent(this, SomeClass.class).putExtra("someKey", someValue); 
```

在广播接收器上时，从意图 onReceive 方法读取数据

```
intent.getExtras().getInt("someKey") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:56:17.643

把你的价值观放在额外的意图中。

**Intent i = new Intent(context, MyStartServiceReceiver.class); i.putextra("key",value);**

# iphone - 如何获取 iPhone 中安装的应用程序名称列表

> ID：14355444
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:53.860
> 
> 标签：iphone, ios, objective-c, xcode, ipad

> **可能重复：**
> [获取所有已安装应用程序的列表](https://stackoverflow.com/questions/7226406/get-list-of-all-installed-apps)

我正在寻找应用程序控制系统工具，其中我想要一个所有已安装应用程序名称的列表，并且用户将允许更改那里的状态，即用户可以从跳板中隐藏这些。如果可以，那有可能吗？请帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:14:58.530

尝试这个

```
-(NSArray *) installedApps
{
    BOOL isDir enter code here= NO;
    NSDictionary *cacheDienter code herect;
    NSDictionary *user;
    static NSString *const cacheFileName = @"com.apple.mobile.installation.plist";
    NSString *relativeCachePath = [[@"Library" stringByAppendingPathComponent: @"Caches"] stringByAppendingPathComponent: cacheFileName];
    NSString *path = [[NSHomeDirectory() stringByAppendingPathComponent: @"../.."] stringByAppendingPathComponent: relativeCachePath];
    if ([[NSFileManager defaultManager] fileExistsAtPath: path isDirectory: &isDir] && !isDir) // Ensure that file exists
    {
        cacheDict    = [NSDictionary dictionaryWithContentsOfFile: path];
        user = [cacheDict objectForKey: @"System"]; // Then all the user (App Store /var/mobile/Applications) apps
    }

    //NSLog(@"Installed Applications = %@",[user allKeys]); 
    //return [user allKeys];
    return nil;
} 
```

这将为您提供一系列已安装的应用程序。

这个链接也可以帮助你[链接](http://iphonedevsdk.com/forum/iphone-sdk-development/37103-finding-out-what-apps-installed.html)

# c++ - 使用模板类的 c++ 编译器行为

> ID：14355445
> 
> 赞同：0
> 
> 时间：2013-01-16T09:48:54.860
> 
> 标签：c++

> **可能重复：**
> [两阶段查找 - 需要解释](https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed)

当我使用模板类时，编译器不会向我显示缺少#includes 的错误/警告。

例如，如果我有一个名为“A”的类，它看起来或多或少像这样：

```
template<class T>
class A {
    void print() const {cout << "Hey I didn't use include for 
                                 iostream and It works just fine!!!";}
}; 
```

如果我删除模板 <class T>，我会得到缺少 <iostream>include 的错误。

为什么当我使用模板类时编译器不显示这些错误？

只是要指出，当我说它有效时，我的意思是当我编写类时它不会显示任何编译错误，但只有当我使用它而不是非模板类时才会显示错误，而错误会立即显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:51:10.557

当你编写模板代码时，大量的语法检查只有在你创建这个类的实例时才会发生，如果它从未被使用过，它就永远不会被检查。

为了验证这一点，在最后添加这一行，`A<int>;`

[两阶段查找](https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed)中的更多信息- jrok 指出需要解释。

编辑：

链接的帖子提出了一个有趣的观点，即使没有实例化，这也会[在 gcc](http://liveworkspace.org/code/1AGkKa$4)和 clang 上出错。我想和我一样，你在 MSVC++

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:59:53.373

当编译器第一次解析你的模板时，它只需要执行最基本的语法检查和非依赖类型的类型检查（不是根据模板参数定义的类型）。对于完全专门化的模板类型的每个成员函数，所有依赖类型（依赖于模板参数的类型）的类型检查只需要在第一次遇到使用该函数的表达式时（例如通过调用它）进行。这也意味着您不使用（用于特定专业化）模板类型的任何成员函数可能根本不会被完全编译。

这称为两阶段名称查找，（如其他答案中所述）您可以在此处找到有关它的更多信息：[两阶段查找](https://stackoverflow.com/questions/12561544/two-phase-name-lookup-for-c-templates-why?lq=1 "两阶段查找")

# matlab - 设置图形平移和缩放状态

> ID：14355446
> 
> 赞同：1
> 
> 时间：2013-01-16T09:48:57.510
> 
> 标签：matlab, zooming, matlab-figure, pan

我知道我可以使用例如以下代码设置 MATLAB 图的缩放状态：

```
zoom on;
zoom(2); % zoom in 2x 
```

我想要实现的是放大图形的特定位置，我将其指定为坐标。我该怎么做？我想一定有一些命令可以让你指定图形平移位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:49:29.767

```
set(gca,'xlim',[minx maxx],'ylim',[miny maxy]) 
```

# load-testing - 使用 CapCal 对 ASP.NET Web 应用程序进行负载测试

> ID：14355451
> 
> 赞同：0
> 
> 时间：2013-01-16T09:49:08.993
> 
> 标签：load-testing, performance-testing

我正在使用[CapCal](http://www.gridrobotics.com/solutions/capcal-web-performance-testing/)在 asp.net WebForms Web 应用程序上执行负载测试。当一个新的构建被上传到测试环境时，我们需要记录（我使用 fiddler 来记录测试）一组新的测试，否则会抛出 VIEWSTATE 错误。

构建并没有太大的不同，每个构建都进行了相同的测试，我们想看看从一个构建到下一个构建是否有性能改进。我们希望使用相同的测试来评估每个构建在相同条件下的性能，而且记录过程非常耗时。

1.  CapCal 中有没有办法将 VIEWSTATE 设置为变量（从页面源中提取视图状态，将提取的值分配给变量）而不是硬编码值？

2.  不相关的问题：当上传一组新的测试时，url中的“+”号被替换为“”（空格），即“/index.aspx?WebSiteRedirect=true&host=DateTime=2013-01-15+05%3a43 %3a01" 变为 "/index.aspx?WebSiteRedirect=true&host=DateTime=2013-01-15 05%3a43%3a01"。CapCal 中是否有避免此问题的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:33:27.343

那么我可以帮你解决第二个问题：

将 + 替换为 %2b 即可。

就视图状态相关性而言，我仍在研究它。

如果您仍然感兴趣，我会及时通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:43:06.887

> CapCal 中有没有办法将 VIEWSTATE 设置为变量（从页面源中提取视图状态，将提取的值分配给变量）而不是硬编码值？

您要查找的内容通常称为自动测试配置或自动变量关联。我不熟悉 CapCal，也许搜索“相关”或“动态”的帮助会有所帮助。如果 CapCal 无法为您做到这一点，那么您可能需要寻找可以做到的工具。像 __VIEWSTATE 这样的字段的手动配置可能非常耗时。许多 .NET 应用程序还有其他需要这种处理的字段——我现在不记得它们，但我想到了 __EVENTARGUMENT、__EVENTTARGET 和 __EVENTVALIDATION。

另一个问题与打开正确的“URL 编码”方案有关，但我不知道如何在 CapCal 中做到这一点:(

# mysql - 是否可以将日志文件转储到数据库中？

> ID：14355452
> 
> 赞同：0
> 
> 时间：2013-01-16T09:49:19.023
> 
> 标签：mysql, logging, mysqldump, logfile

我正在使用一个将其日志存储在平面文件中的应用程序进行项目。

然而，日志还需要存储在 mysql 数据库中以用于监控目的。

是否可以使用日志文件作为输入来创建数据库？所以我想这将与mysqldump相反？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:34:22.490

是的，这是可能的。有一百万种方法可以做到这一点，这里有一种使用 bash 和 sqlite3 作为数据库的方法。

```
dw2:/tmp$ echo 'create table log (datetime string, message varchar(255));' | sqlite3 test.db
dw2:/tmp$ cat test.log
2013-01-16 05:24:40-05:00 Log line 1
2013-01-16 05:24:42-05:00 Log line 2
2013-01-16 05:24:44-05:00 Log line 3
2013-01-16 05:24:46-05:00 Log line 4
dw2:/tmp$ while read date time logmsg; do 
    echo "insert into log values ('$date $time', '$logmsg');" | sqlite3 test.db
done < test.log
dw2:/tmp$ echo 'select * from log;' | sqlite3 test.db                           
2013-01-16 05:24:40-05:00|Log line 1
2013-01-16 05:24:42-05:00|Log line 2
2013-01-16 05:24:44-05:00|Log line 3
2013-01-16 05:24:46-05:00|Log line 4 
```

# protocol-buffers - 标头包含由`protoc`生成的文件中的路径

> ID：14355460
> 
> 赞同：6
> 
> 时间：2013-01-16T09:50:08.100
> 
> 标签：protocol-buffers

当我`protoc`这样打电话时

```
protoc --cpp_out=. path/to/test.proto 
```

文件

*   `path/to/test.pb.cc`和
*   `path/to/test.pb.h`

生成这是我想要的。但是，由于`cc`需要`h`,`h`是这样包含的

```
#include "path/to/test.pb.h" 
```

这*不是*我想要的。背景是我的构建工具 ( `scons`) 从项目的根目录调用`protoc`，而不是从包含源文件的目录调用。我在手册页或帮助文本中没有发现明显的选项。

所以我的下一个想法是认为这是“正确的”并调整我的构建系统，但是：这两个文件是目录树中的兄弟，所以当一个包含另一个时，不需要路径。即使手动编译也会失败。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T07:06:37.753

对生成的文件进行查找替换很可能比重组构建系统更容易（`sed`在 Linux/unix 上使用命令）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:49:04.713

我最终为我的项目做的事情如下：

1.  创建与您的和目录`pb/`相同级别的目录。`include/``src/`

2.  把你的`.proto`文件放在那里，然后创建一个makefile。在其中写下以下内容：

    ```
    CXX = g++
    CXXFLAGS = -O3

    PROTOBF = $(shell find ./ -name '*.proto')
    SOURCES = $(subst proto,pb.cc,$(PROTOBF))
    OBJECTS = $(subst proto,pb.o,$(PROTOBF))

    default: $(OBJECTS)
        @echo -n

    $(SOURCES): %.pb.cc : %.proto
        protoc --cpp_out=. $<

    $(OBJECTS): %.pb.o : %.pb.cc
        $(CXX) $(CXXFLAGS) -c $< -o $@ 
    ```

    当被调用时，它本质上将生成和构建 protobuffer 文件。

3.  在您的主 makefile 中，只需添加以下包含路径：`-Ipb/`.

    并且在包含协议缓冲区标头时，请使用`#include <whatever.pb.h>`.

4.  将生成的目标文件添加`pb/`到链接步骤中。我自己我用过：

    ```
    PB_OBJS = $(shell find pb/ -name '*.pb.o') 
    ```

    并将其与`obj/`.

* * *

`pb/`然后，如果你想自动化它，你可能可以从主 makefile 调用makefile。重要的一点是`protoc`从`pb/`目录中调用，否则包含将被搞砸。

对不起，丑陋的makefile。至少它有效，我希望这对你有帮助......

# ios - 在测试应用内购买时是否可以模拟/模拟一些不寻常的情况？

> ID：14355462
> 
> 赞同：4
> 
> 时间：2013-01-16T09:50:12.283
> 
> 标签：ios, testing, in-app-purchase

我正在寻找测试我们的应用内购买代码，并希望能够测试所有不同的可能情况。但是，似乎很难/不可能测试一些有时会发生的罕见情况。

我知道使用 iOS6 可以模拟不良的网络连接，但肯定还有其他可能导致失败的情况。例如，

1.  如果用户需要验证他们的付款方式（例如，因为他们正在使用新信用卡或他们是第一次在设备上购买）。据我所知，没有办法在沙盒环境中测试这种情况。

2.  应用程序内的交易失败（我想这可以通过不良网络模拟来模拟）

3.  进入错误的应用商店：

    3.1。也许用户的应用商店中没有应用内购买，或者，

    3.2\. 用户需要切换应用商店

如果有人有一些可靠的方法来测试其中一些场景（以及我上面没有写的任何其他场景），我将非常感激。在您进入生产环境之前，其中一些似乎无法测试。

参考：

*   [苹果文档](https://developer.apple.com/appstore/in-app-purchase/index.html)
*   [沙盒：是否可以模拟失败或中断的应用内购买？](https://stackoverflow.com/q/12836387/377384)
*   [https://stackoverflow.com/q/12089490/377384](https://stackoverflow.com/q/12089490/377384)
*   [iPhone - 应用内购买测试失败](https://stackoverflow.com/q/6720616/377384)

# c# - 互斥量结果在系统中有所不同

> ID：14355464
> 
> 赞同：0
> 
> 时间：2013-01-16T09:50:16.700
> 
> 标签：c#, .net, multithreading, mutex

我在 C# 中有一个控制台应用程序，我想限制我的应用程序一次只运行一个实例。它在一个系统中工作正常。当我尝试在另一个系统中运行 exe 时它不起作用。问题是在一台电脑上我只能打开一个exe。当我尝试在另一台电脑上运行时，我可以打开多个 exe。我该如何解决这个问题？下面是我写的代码。

```
string mutexId = Application.ProductName;
using (var mutex = new Mutex(false, mutexId))
{
    if (!mutex.WaitOne(0, false))
    {
        MessageBox.Show("Instance Already Running!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Hand);
        return;
    }

        //Remaining Code here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:03:34.957

无论如何，我会使用这种方法：

```
// Use a named EventWaitHandle to determine if the application is already running.

bool eventWasCreatedByThisInstance;

using (new EventWaitHandle(false, EventResetMode.ManualReset, Application.ProductName, out eventWasCreatedByThisInstance))
{
    if (eventWasCreatedByThisInstance)
    {
        runTheProgram();
        return;
    }
    else // This instance didn't create the event, therefore another instance must be running.
    {
        return; // Display warning message here if you need it.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:09:05.020

我的好旧解决方案：

```
 private static bool IsAlreadyRunning()
    {
        string strLoc = Assembly.GetExecutingAssembly().Location;
        FileSystemInfo fileInfo = new FileInfo(strLoc);
        string sExeName = fileInfo.Name;
        bool bCreatedNew;

        Mutex mutex = new Mutex(true, "Global\\"+sExeName, out bCreatedNew);
        if (bCreatedNew)
            mutex.ReleaseMutex();

        return !bCreatedNew;
    } 
```

[资源](https://stackoverflow.com/questions/4722198/checking-if-windows-application-is-running "资源")

# c - 面向汇编程序员的 Linux/x86-64 系统调用中的结构布局？

> ID：14355466
> 
> 赞同：9
> 
> 时间：2013-01-16T09:50:22.763
> 
> 标签：c, linux, linux-kernel, x86, x86-64

许多 linux/x86-64 系统调用接受指向结构的指针作为参数。

例如第二个参数`stat(2)`是`struct stat*`...

```
 struct stat {
       dev_t     st_dev;     /* ID of device containing file */
       ino_t     st_ino;     /* inode number */
       mode_t    st_mode;    /* protection */
       nlink_t   st_nlink;   /* number of hard links */
       uid_t     st_uid;     /* user ID of owner */
       gid_t     st_gid;     /* group ID of owner */
       dev_t     st_rdev;    /* device ID (if special file) */
       off_t     st_size;    /* total size, in bytes */
       blksize_t st_blksize; /* blocksize for file system I/O */
       blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
       time_t    st_atime;   /* time of last access */
       time_t    st_mtime;   /* time of last modification */
       time_t    st_ctime;   /* time of last status change */
   }; 
```

这意味着如果你想从纯汇编中调用系统调用，那么你必须知道每种类型有多大的规则，以及成员之间是否有任何用于对齐目的的填充，等等。

C 标准是否将其保留为（编译器）实现定义，还是可以从标准中确定（假设原始类型大小已知）？

如果它保持打开状态，内核或 x86-64 架构是否以任何方式定义它？还是只是内核碰巧用哪个编译器编译的问题？

（给定结构的某些成员，我需要计算该成员相对于结构地址的起始偏移量）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T09:58:47.377

结构的布局不是在 C 标准中定义的，而是在 ABI 定义中定义的，在您的情况下是 System V AMD64 ABI。也就是说，通常布局依赖于操作系统，并且所有针对该操作系统的编译器都必须符合 ABI（尽管如果您知道自己在做什么，大多数编译器都可以选择生成不同的布局）。ABI 还定义了如何将参数传递给函数、如何返回值、必须在调用之间保留哪些寄存器等等。

您需要的 ABI 定义应在[http://www.x86-64.org/](http://www.x86-64.org/)上提供（似乎已关闭）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:43:38.687

在 Linux/x86-64 下：

一个字节是 8 位。大小和内存地址以 1 字节为单位。

## 原始类型

原始类型的对齐等于它们的大小：

原始类型大小（和对齐方式）是：

```
bool 1
char 1
short 2
int 4
long 8
long long 8
__int128 16
void* 8
float 4
double 8
long double 16
__float128 16
__m64 8
__m128 16 
```

## 结构体、联合体和数组

*   结构（和联合）对齐是其任何组件的最大对齐。

*   每个结构成员都分配给具有适当对齐方式的最低可用偏移量。

*   结构的大小向上舍入到最接近的对齐倍数。

*   结构和联合对象可能需要填充以满足大小和对齐约束。任何填充的内容都是未定义的。

*   小于 16 字节的数组具有其元素类型的对齐方式。

*   16 字节或更长的数组具有 (a) 16 中较高的对齐；(b) 其元素类型的对齐方式。

# mysql - 按 SQL 查询排序

> ID：14355471
> 
> 赞同：0
> 
> 时间：2013-01-16T09:50:36.530
> 
> 标签：mysql, sql, performance, sql-order-by, multiple-columns

这是在线门户的产品表结构。
目前产品表有超过100万条记录。

![在此处输入图像描述](../Images/b353256ddfd0ffe9045ceaaffaed4977.png)

我创建了关于状态和交付 ID 的索引。
通过`ORDER BY status DESC, delivery_id ASC`
完整查询列出产品时出现性能问题：

```
SELECT product_name FROM product ORDER BY status DESC, delivery_id ASC LIMIT 10 
```

如何改进此查询以更快地执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:54:32.587

如[`ORDER BY`优化](http://dev.mysql.com/doc/en/order-by-optimization.html)中所述：

> 在某些情况下，MySQL 不能使用索引来解析`ORDER BY`，尽管它仍然使用索引来查找与`WHERE`子句匹配的行。这些案例包括：
> 
> `[ *deletia* ]`
> 
> *   你混合`ASC`和`DESC`：
>     
>     
>     
>     ```
>     SELECT * FROM t1 ORDER BY ***key_part1*** DESC, ***key_part2*** ASC;
>     ```

# sql - VBscript 从 Sql Server 2008 获取参数

> ID：14355474
> 
> 赞同：0
> 
> 时间：2013-01-16T09:50:41.933
> 
> 标签：sql, sql-server, sql-server-2008, tsql, vbscript

在以下情况下，我需要您的帮助：
我正在开发一个后端有 Sql Server 2008 数据库的应用程序。
我想在数据库中存储一些 URL，并在我的界面中放置一个按钮，该按钮应该打开这些 URL。
我想用 VBscript 编写按钮，但我是这种语言的新手。
我发现这段代码`CreateObject("WScript.Shell").Run "\\195.234.22\server\docs"`工作正常，但我想从数据库中获取链接，我想我应该设置一些参数，但我不知道该怎么做。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:41:34.210

那么前进的方法是编写一个存储过程以从数据库中返回您想要的日期，然后将其绑定到网格模板，然后您可以选择列控件类型作为 html 链接。你会得到很多额外的好东西。

# jquery - 在动态页面中，位置相对 div 的顶部值在 chrome 中很奇怪

> ID：14355483
> 
> 赞同：0
> 
> 时间：2013-01-16T09:50:58.963
> 
> 标签：jquery, css, google-chrome

**动态**页面只有一个这样的div；

```
<div id='test' style="position:relative;top:-130px;width:10px;height:10px"></div>

alert($('#test').css('top')) // why the result is not -130 in chrome? 
```

这是测试用例。 [http://jsfiddle.net/B6ea6/1/](http://jsfiddle.net/B6ea6/1/)

* * *

感谢您的快速反馈。因为我通过**ctrl + 鼠标中键**放大了 chrome ，但在 IE 和 FireFox 中没问题。

# linux - 如何编译测试示例 alsa

> ID：14355488
> 
> 赞同：0
> 
> 时间：2013-01-16T09:51:17.897
> 
> 标签：linux, compilation, alsa

我想从 alsa-lib 编译放置在“test”目录中的 pcm.c 文件。我已经做的是：制作 pcm 导致除了 pcm.ca pcm.o 文件。

但我想要一个可执行文件。下一步该做什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-11T18:45:32.613

```
make check 
```

注意：我在[alsa-lib-1.0.27.2上对此进行了测试](ftp://ftp.alsa-project.org/pub/lib/alsa-lib-1.0.27.2.tar.bz2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:14:41.843

运行该`make`命令时，将创建对象和可执行文件：

```
$ make pcm
  CC     pcm.o
  CCLD   pcm 
```

如果`pcm`未创建目标，`make`将输出错误消息。

# c# - 将 WPF 中的图像源绑定到 Url

> ID：14355489
> 
> 赞同：3
> 
> 时间：2013-01-16T09:51:21.307
> 
> 标签：c#, .net, data-binding, winrt-xaml

我一直在浏览不同的帖子，试图找出我的问题出了什么问题。基本上，我的用户控件上有一个 Image 标签，而我想绑定到一个 url 的 Source。但是，这不起作用。我尝试使用返回的 ValueConverter，`BitmapImage(new Uri((string)value));` 但这不起作用。我唯一能得到的是你不能绑定到一个url，你必须下载你想要绑定的图像。我不想下载我搜索的所有图像。是否有解决方法来完成此任务而无需在本地下载图像。我认为 ValueConverter 方法通过返回 BitmapImage 是最好的。请帮忙？

```
public class MyViewModel
{
    private string _posterUrl;
        public string PosterUrl
        {
            get
            {
                //Get Image Url, this is an example and will be retrieved from somewhere else.
                _posterUrl = "http://www.eurobuzz.org/wp-content/uploads/2012/08/logo.jpg";
                return _posterUrl;    
            }
            set 
            { 
                _posterUrl = value;
                NofityPropertyChanged(p => p.PosterUrl);
            }
        }
} 
```

这是我的值转换器：

```
public class BitmapImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if(value is string)
            return new BitmapImage(new Uri((string)value, UriKind.RelativeOrAbsolute));

        if(value is Uri)
            return new BitmapImage((Uri)value);

        throw new NotSupportedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

这是我的 XAML：

```
<Image Source="{Binding PosterUrl, Converter={StaticResource bitmapImageConverter}}" Width="100" Height="100" /> 
```

所以这是绑定到包含 imageurl 的 PosterUrl 属性，并将其转换为位图图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:47:24.803

试试看

```
<Image Helpers:ImageAsyncHelper.SourceUri="{Binding Url, IsAsync=True}" x:Name="img" /> 
```

在哪里

```
using System;
using System.Windows;
using System.Windows.Data;
using System.Windows.Controls;

public class ImageAsyncHelper : DependencyObject {
    public static Uri GetSourceUri(DependencyObject obj){
        return (Uri)obj.GetValue(SourceUriProperty);
    }

    public static void SetSourceUri(DependencyObject obj, Uri value){
        obj.SetValue(SourceUriProperty, value);
    }

    public static readonly DependencyProperty SourceUriProperty =
        DependencyProperty.RegisterAttached("SourceUri",
            typeof(Uri),
            typeof(ImageAsyncHelper),
            new PropertyMetadata { PropertyChangedCallback = (obj, e) =>
                ((Image)obj).SetBinding(
                    Image.SourceProperty,
                    new Binding("VerifiedUri"){
                        Source = new ImageAsyncHelper{
                            _givenUri = (Uri)e.NewValue
                        },
                        IsAsync = true
                    }
                )
            }
        );

    private Uri _givenUri;
    public Uri VerifiedUri {
        get {
            try {
                System.Net.Dns.GetHostEntry(_givenUri.DnsSafeHost);
                return _givenUri;
            }
            catch (Exception) {
                return null;
            }
        }
    }
} 
```

和

```
public Uri Url {
    get {
        return new Uri(SomeString, UriKind.Absolute);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:15:04.760

你想这样做吗？

```
<UserControl x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<StackPanel Orientation="Vertical">
    <Image Height="100" Width="100" Source="{Binding}" />

    <Image Height="100" Width="100" Source="http://www.eurobuzz.org/wp-content/uploads/2012/08/logo.jpg"/>
</StackPanel> 
```

后面的代码：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        this.DataContext = "http://www.eurobuzz.org/wp-content/uploads/2012/08/logo.jpg";
        InitializeComponent();
    }
} 
```

# c# - 使用 Linq 访问 XML

> ID：14355492
> 
> 赞同：0
> 
> 时间：2013-01-16T09:51:27.097
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有这种结构的 XML 文档：

```
<dipOrders>
    <interchangeInfo senderEdiCode="LSC58" senderEdiCodeQal="ZZ" receiverEdiCode="15274" receiverEdiCodeQal="ZZ" syntax="X12" syntaxId="X" syntaxVersion="003010"/>
    <order orderNumber="219299" orderDate="2012-12-05T00:00:00" validityDate="2012-12-05T00:00:00">
        <buyer name="LEAR MTO">
            <partyCode buyerCode="811567924"/>
        </buyer>
        <supplier name="BRIDGE OF WEIR LEATHER CO">
            <partyCode buyerCode="749630"/>
        </supplier>
        <orderConsignee name="LEAR MEXICAN SEATING CORP">
            <partyCode buyerCode="LSC59"/>
            <orderLine description="LEA DC 378 HERO 6RSB 5B8" orderNumber="246767" engineeringChangeNumber="N">
                <partyCode buyerCode="DC378105H6RSB5B8AA"/>
                <cumulativeQuantity date="2012-12-04T00:00:00" quantity="0"/>
                <orderQuantity quantity="0" commitmentLevel="Firm" timingQualifier="Weekly" shipDate="2012-12-05T00:00:00"/>
            </orderLine>
            <orderLine description="LEA DC 378 HERO 6RSB 5V0" orderNumber="246767" engineeringChangeNumber="N">
                <partyCode buyerCode="DC378105H6RSB5V0AA"/>
                <cumulativeQuantity date="2012-12-04T00:00:00" quantity="0"/>
                <orderQuantity quantity="0" commitmentLevel="Firm" timingQualifier="Weekly" shipDate="2012-12-05T00:00:00"/>
            </orderLine> 
```

我正在尝试在 .NET 控制台应用程序中使用 Linq to XML 访问它以获取 orderLine 项目详细信息：

```
XDocument doc = XDocument.Load(sourceDirectory + "\\" + fileName);

                var data = from item in doc.Descendants("orderLine")
                           select new
                           {
                               orderNumber = item.Element("orderNumber").Value
                           };

                foreach (var i in data)
                {
                    Console.WriteLine(i.ToString());
                }

                Console.ReadLine(); 
```

但我得到“对象引用未设置为对象的实例”错误。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:52:58.497

您正在尝试从元素中获取`orderNumber` *元素*`orderLine`......但它是一个*属性*。顺便说一下，不清楚为什么要从中创建匿名类型 - 或者为什么要使用查询表达式开始。我会这样写：

```
var orderNumbers = doc.Descendants("orderLine")
                      .Select(x => (int) x.Attribute("orderNumber"));
foreach (int orderNumber in orderNumbers)
{
    Console.WriteLine(orderNumber);
} 
```

# javascript - 使用 eval() 在 IE8 和 IE 7 中不起作用，但在 IE9、FF、Chrome 中起作用？

> ID：14355496
> 
> 赞同：0
> 
> 时间：2013-01-16T09:51:32.170
> 
> 标签：javascript, eval

我有关于 eval() 的问题，我正在验证用户使用对象 javascript 提交的数据。

例如

```
for(var i=0;i<count;i++){

     switch(caseType){
       case: 'Group':
        ### it will execute the ff code
        ### it will call MustChecked function

        if(!eval(this.MustChecked(getAttribute('class'), getAttribute('min'), getAttribute('max')))) {

           ####this will alert all the errors..
          this.AddError(i, getAttribute("msg"));
        }
     }

} 
```

从此代码中，它将警告所有错误...此代码在 IE8 和 IE7 中不起作用...任何人都知道为什么在 IE8 和 IE7 中不起作用？

**更新：必须检查的功能**

> ```
> MustChecked : function(name, min, max)
>   {
>       var groups = document.getElementsByClassName(name);
>       alert(groups);
>       //console.log(name + ":" + groups.length);
>       var hasChecked = 0;
>       min = min || 1;
>       max = max || groups.length;
>       for(var i=groups.length-1;i>=0;i--)
>           if(groups[i].checked) hasChecked++;
>           return min <= hasChecked && hasChecked <= max;
>   }, 
> ```

**更新 V1.1**

我试过这样

```
getElementsByClassName : function (className) {
        if (document.getElementsByClassName) { 
          return document.getElementsByClassName(className); 
        }
        else { 
            return document.querySelectorAll('.' + className); 
        } 
}, 
```

这在 IE8 中有效，但在 IE7 中无效……运气好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:11:53.550

`getElementsByClassName`IE7/8 不支持该方法。你在你的`MustChecked`函数中使用它。

不支持，如“不存在”。

有可用的垫片。快速谷歌搜索会给你一些结果。或者你可以使用 Sizzle 或简单的`querySelectorAll`垫片，它们更通用。

如果您想了解某个功能是否受支持，[caniuse.com](http://caniuse.com/#search=getElementsByClassName)是一个很好的资源。

# python - 如何在 SQLAlchemy 中为“UNIQUE”约束建模？

> ID：14355499
> 
> 赞同：18
> 
> 时间：2013-01-16T09:51:35.460
> 
> 标签：python, flask, sqlalchemy, flask-sqlalchemy

我正在编写一个 Flask/SQLAlchemy 应用程序，其中有用户和组。

用户可以属于多个组，并且**他们在每个组中都有一个唯一的编号**。[在询问如何为数据库建模时，](https://dba.stackexchange.com/questions/32961/how-to-model-a-user-group-relationship-where-users-are-assigned-an-unique-number/32965#32965)我被建议对多对多关系使用以下表结构：

```
TABLE UserGroups
  GroupID 
  UserID
  UserNumber
  PRIMARY KEY (GroupID, UserID)
  UNIQUE (GroupID, UserNumber)
  FOREIGN KEY (GroupID)
    REFERENCES Groups (GroupID)
  FOREIGN KEY (UserID)
    REFERENCES Users (UserID) 
```

现在我知道如何使用 SQLAlchemy 创建常规的多对多关系，但我不知道如何用附加字段表示`UNIQUE`约束。`UserNumber`

我在数据库设计、ORM 和 SQLAlchemy 方面没有太多经验，所以这可能很明显，但我找不到表达它的方法。

我没有得到的事情是：使用常规的多对多关系，我的`User`班级有一个*类似列表的*属性`groups`，其中包含他所属的所有组，但这完全隐藏了`UserGroups`连接表，我没有不知道如何访问该`UserNumber`字段。

这对我来说有点模糊。关于如何使用 SQLAlchemy 做这样的事情，你有什么好的例子或解释吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T11:31:31.970

[cleg](https://stackoverflow.com/a/14355621/851737)已经回答了问题的第一部分（关于创建具有多列的唯一约束）。

但是，如果您想在映射表中添加额外的列，则默认的多对多方法不起作用。相反，您应该使用[关联对象模式](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)。[此外，您可以使用association_proxy](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html#simplifying-association-objects)简化用户和组之间的访问。

[`proxied_association.py`](https://bitbucket.org/zzzeek/sqlalchemy/src/master/examples/association/proxied_association.py)来自[SQLAlchemy 的示例](http://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#associations)应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T09:57:55.153

`UniqueConstraint`在您的模型中使用。详细描述了这个问题：[sqlalchemy unique across multiple columns](https://stackoverflow.com/questions/10059345/sqlalchemy-unique-across-multiple-columns)

至于多对多关系，SQLAlchemy 有[很好的教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#building-a-many-to-many-relationship)。

PS对不起，我错过了答案的第二部分（它比我想象的更复杂，所以请参阅@schlamar的答案），但第一部分仍然是正确的。

# vb.net - 如何使用 vb.net 获得一年中的总小时数？

> ID：14355502
> 
> 赞同：2
> 
> 时间：2013-01-16T09:51:43.423
> 
> 标签：vb.net

我想使用 VB.Net 获得一年中的总小时数。是否有任何方法或功能可以帮助我们实现这一目标？

我想得到类似的东西：

```
Private Function GetTotalHours(ByVal year As String) As String
    Dim time As String = String.Empty
    Try
         ' Calculate here...

    Catch ex As Exception

    End Try        
    Return time
End Function 
```

并像这样使用它：

```
TextBox1.Text = GetTotalHours('2008')   ' Result will be = 8784
TextBox1.Text = GetTotalHours('2013')   ' Result will be = 8760 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T09:59:37.130

你可以使用这个：

```
Public Function GetTotalHours(ByVal year As Integer) As Integer
    Dim dtAux As New Date(year, 1, 1)
    Dim ts As TimeSpan = dtAux.AddYears(1) - dtAux

    Return CInt(ts.TotalHours)
End Function 
```

# android - 在我的应用程序的活动中下载 PDF 保存并显示（渲染）它

> ID：14355503
> 
> 赞同：-6
> 
> 时间：2013-01-16T09:51:50.983
> 
> 标签：android, pdf, pdf-reader, pdfrenderer

当用户第一次查看 webview 时，我想从链接下载 PDF。

之后想要将它们保存在 SdCard 中，当用户请求查看时，在我的应用程序的活动中显示存储的 PDF。

我知道下载的东西，但坚持使用 PDF 渲染和显示。

任何帮助将不胜感激

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:54:54.817

您无法更新资产。

相反，您可以将文件下载到`sdcard`sdcard 并从 sdcard 访问文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:57:40.113

无法更新资产。因此，您可以将该文件保存到 FileSystem（根据您的要求内部或外部）并像下面的示例一样将其取回。

将文件存储到 InternalFileSystem。

```
 FileOutputStream fos = null;
try {
    fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
    fos.write(pdfData.getBytes());
    fos.flush();
    fos.close();

} catch (FileNotFoundException e) {

} catch (Exception e) {

} finally {
    if (fos != null) {
        fos = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:00:32.387

一旦 apk 是项目的构建，我们不能修改 apk 文件。由于资产文件夹在apk里面，所以我们不能复制资产文件夹中的pdf文件。将其保存在手机内存或 SD 卡的外部或内部。

# xml - 如何获取属性的xml值？

> ID：14355504
> 
> 赞同：0
> 
> 时间：2013-01-16T09:51:51.577
> 
> 标签：xml, linux, grep

我需要标签中属性的值。
前任 。名称 xmlns:xsi="http://www.w3.org/2001/XMLinst" xsi:spaceSchema="Name_5879.xsd">
...
/Name>"
我可以使用 xml_grep 获取值“Name_5879.xsd”吗?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:55:17.420

```
$ xmlstarlet sel -t -m "Name" -v "@xsi:spaceSchema" input.xml 
Name_5879.xsd 
```

# forms - JSF 2 - 复合组件 - 由于组件具有空值，Bean 验证失败

> ID：14355505
> 
> 赞同：1
> 
> 时间：2013-01-16T09:51:54.600
> 
> 标签：forms, jsf-2, bean-validation, composite-component

我有一个复合组件（实际上是一个验证码），我在 ah:form 中使用它。
当我单击 h:form 的提交按钮时出现以下错误。

> 1 月 16 日。2013 10:02:06 javax.faces.validator.BeanValidator 验证
> 注意：无法验证具有空值的组件：验证码：验证码文本

这是验证码的复合组件的xhtml代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:composite="http://java.sun.com/jsf/composite" xmlns:xcc="http://java.sun.com/jsf/composite/components">
<h:body>

  <composite:interface>
    <composite:attribute name="id" type="java.lang.String" />
    <composite:attribute name="imageWidth" type="java.lang.Integer" />
    <composite:attribute name="imageHeight" type="java.lang.Integer" />
    <composite:attribute name="imageClass" type="java.lang.String" />
    <composite:attribute name="inputClass" type="java.lang.String" default="" />
    <composite:attribute name="placeholder" type="java.lang.String" default="" />
    <composite:attribute name="failureMessage" type="java.lang.String" default="Captcha validation failed" />

    <composite:editableValueHolder name="captchaText" />
  </composite:interface>

  <composite:implementation>
    <h:inputText id="captchaText" required="true" styleClass="#{cc.attrs.inputClass}" placeholder="#{cc.attrs.placeholder}"
      autocomplete="off" maxlength="10">
      <f:param name="failureMessage" value="#{cc.attrs.failureMessage}" />
      <f:validateLength minimum="6" />
      <f:validator validatorId="captchaValidator" />
    </h:inputText>
    <h:graphicImage id="captchaImage" alt="" style="margin-left:3px;" styleClass="#{cc.attrs.imageClass}" width="#{cc.attrs.imageWidth}"
      height="#{cc.attrs.imageHeight}" value="__captcha.jpg" />
  </composite:implementation>

</h:body>
</html> 
```

这是 Captcha 的 JSF Validator 代码。

```
import javax.faces.application.FacesMessage;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.validator.FacesValidator;
import javax.faces.validator.Validator;
import javax.faces.validator.ValidatorException;

import net.paissad.waqtsalat.servlet.CaptchaServlet;

    @FacesValidator(CaptchaValidator.VALIDATOR_ID)
    public class CaptchaValidator implements Validator {

    public static final String VALIDATOR_ID = "captchaValidator";

    @Override
    public void validate(final FacesContext context, final UIComponent component, final Object value) throws ValidatorException {

        final String enteredValue = (String) value;
        final String expectedValue = (String) context.getExternalContext().getSessionMap()
            .get(CaptchaServlet.CAPTCHA_KEY);

        final boolean ok = (enteredValue != null) && (enteredValue.equals(expectedValue));
        if (!ok) {
            String summary = (String) component.getAttributes().get("failureMessage");
             if (summary == null) summary = "";
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, summary, summary));
        }
    }

} 
```

我真的没有必要展示构建真正的验证码图像的 CaptchaServlet 的代码。我只能说它确实很好用。[我从这里](http://javahunter.wordpress.com/2010/09/25/integrating-captcha-in-jsf-2-0/ "JSF 2 验证码 Servlet")的代码中得到启发。

这基本上是我在表单中使用复合组件的方式。（这不是我真正的用例顺便说一句）

```
<h:form>
    <xcc:captcha id="captcha" imageClass="img-rounded" placeholder="#{i18n.Captcha_enter_code_here}" failureMessage="Captcha validation failed" />
    <h:commandButton styleClass="btn btn-success" type="submit" value="#{i18n.Submit}"
            actionListener="#{accountRegistrationController.register}" action="success" />
</h:form> 
```

表单呈现如下（法语本地化）：

![在此处输入图像描述](../Images/bbfe482bed8c246a93f330d7654a8b2f.png)

我更喜欢使用复合组件 + 验证器 + servlet
我更喜欢避免使用控制器 bean (@Named / @RequestScoped) 和验证 Captcha 输入值的方法。

当我在 Eclipse 中调试验证器代码时，代码行为正确。唯一的错误是以下部分代码永远不会从 Captcha 的组件中检索“failureMessage”属性，我该如何解决这个问题？它始终为空。

```
String summary = (String) component.getAttributes().get("failureMessage"); 
```

那么，我该如何解决 Bean 验证问题呢？
以及如何在我的 Validator 中正确检索属性“failureMessage”？

我已经尝试了很多东西，现在我依靠你。
提前感谢您的帮助。

PS：我目前正在使用 TomEE 1.5+，Java6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:24:33.463

看起来您的 inputText 标记缺少 value 属性。value 属性在输入和 bean 之间进行绑定。

```
<h:inputText value="#{yourBean.yourValue" ... 
```

# ocaml - OCaml sexplib，如何定义自定义 to_sexplib 函数？

> ID：14355509
> 
> 赞同：4
> 
> 时间：2013-01-16T09:51:59.680
> 
> 标签：ocaml, s-expression

我正在使用`with sexp`语法自动生成 s-exp 函数。

问题是我用 sexplib 打印的数据结构有一些递归指针，打印最终会导致堆栈溢出。

所以我需要重写一个 to_sexp 函数并让它返回`"(SomeRecursiveData)"`，我该怎么做？

注意：我的数据定义格式为：

```
type somedata ...
and someotherdata ...
and this_is_problematic_recursive_data
and ....
with sexp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:46:53.480

我不能说我完全理解你的问题，但如果函数 to_sexp 不是交叉递归的（即`let rec to_sexp = ...`不是`let rec to_sexp = ..... and foo = .... calls to_sexp somewhere.....`）你可以试试这个技巧：

```
module A = struct type t with sexp end

module B = struct 
  include A
  let to_sexp = .... your code ...
end 
```

# blackberry - 如何在 BlackBerry Java 中更改焦点时更改现场经理的背景图像

> ID：14355511
> 
> 赞同：15
> 
> 时间：2013-01-16T09:52:04.367
> 
> 标签：blackberry, blackberry-jde

我是黑莓的新手，并使用选项创建菜单。每个选项都包含一个位图图像和标签。

这是第一个菜单项的代码：

```
hmf1_vfm1 = new VerticalFieldManager(Field.FIELD_HCENTER |          VErrticalFieldManager.USE_ALL_WIDTH | VerticalFieldManager.FIELD_HCENTER |   VerticalFieldManager.FOCUSABLE | Field.FOCUSABLE)
{
 boolean isFocus;
//Bitmap bmp1 = Bitmap.getBitmapResource("mnu_tile1.png");
protected void sublayout(int maxWidth, int maxHeight)
 {
super.sublayout(100,125);
setExtent(100,125);
 }

protected void paint(Graphics g) {
try
{
   //g.setBackgroundColor(0x504A4B);
   //g.drawBitmap(0, 0, bmp1.getWidth(), bmp1.getHeight(), bmp1, 0, 0);
                    g.clear();
    Background bg = BackgroundFactory.createBitmapBackground(Bitmap.getBitmapResource("mnu_tile1.png")); //mnu_tile1.png
                    this.setBackground(bg);
                    super.paint(g);
                }
                catch (IllegalArgumentException e) {
                    //SupportClass.showLog(TAG+" err 2 : "+e);
                }
            }

            protected void onFocus(int direction) {
                isFocus = true;
                super.onFocus(direction);
            }
            protected void onUnfocus() {
                isFocus = false;
                super.onUnfocus();
            }

            protected boolean navigationClick(int status, int time) {

                //SupportClass.showLog("New Order...navigationClick");
                return true;
            }
            public boolean isFocusable() {
                return true;
            }
            /*protected boolean touchEvent(net.rim.device.api.ui.TouchEvent message) {

                //SupportClass.showLog("New Order...touchEvent");
                return true;
            };*/
        }; 
```

位图和标签字段被添加到这个 vfm。顺便说一句

```
BitmapField bfNO = new BitmapField(bmpNO,Field.FIELD_HCENTER | Field.FOCUSABLE)
        {
            protected boolean navigationClick(int status, int time) {
                SupportClass.showLog("bitmap...navigationClick");
                return true;
            }
            protected void paint(Graphics graphics) {
                //this.setBackground(BackgroundFactory.createSolidTransparentBackground(Color.BLACK,0));
                super.paint(graphics);
            }
        };

LabelField txtNO = new LabelField("New Order",LabelField.FIELD_HCENTER | Field.FOCUSABLE )
        {
            protected void paint(Graphics g) {
                g.setColor(Color.WHITE);
                //g.setBackgroundColor(0x00000000);
                super.paint(g);
            }
            protected boolean navigationClick(int status, int time) {
                SupportClass.showLog("lable...navigationClick");
                return true;
            }
        }; 
```

*   我想关注包含图像和标签的垂直字段管理器，同时设置背景我看不到背景。我猜有些图层重叠在背景上。

*   我还想将字段（蓝色背景）的选择器颜色更改为透明。

*   请告诉我我犯了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T08:44:42.307

嗨，请尝试使用 invalidate() 方法。

# ubuntu - 你如何在 Ubuntu 上安装流星？

> ID：14355512
> 
> 赞同：0
> 
> 时间：2013-01-16T09:52:06.553
> 
> 标签：ubuntu, meteor

我如何从 Meteor 开始？有初学者指南之类的简单教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:31:22.807

Meteor 的最佳起点是[Meteor 文档](http://docs.meteor.com)本身。

除此之外，这些是掌握 Meteor 基础知识的一些不错的文章。

[andrewscala.com](http://andrewscala.com/meteor/)、[net.tutsplus.com](http://net.tutsplus.com/tutorials/javascript-ajax/whats-this-meteor-thing/)和[andrewmunsell.com](http://www.andrewmunsell.com/blog/introduction-to-realtime-web-meteor-and-nodejs/#.UPZ91R3qlyN)

要在 ubuntu 上安装 Meteor，请参阅这个[Meteor Github](https://github.com/meteor/meteor/blob/master/README.md#slow-start-for-developers)页面。

# sql - 如何在 SQL 视图中更改列类型

> ID：14355516
> 
> 赞同：0
> 
> 时间：2013-01-16T09:52:18.967
> 
> 标签：sql, sql-server, sql-server-2008

也许听起来像一个愚蠢的问题，但这是我的情况：

我有一个带有整数类型字段（名称 PartnerID）的表。我需要在这个表上创建一个视图，并在整数字段中添加（实际上替换）前导零。

字段示例 (PartnerID) 11235 11567 11567 22789 22657 22456 33567

应该是（在视图中）：00235 00567 00567 00789 00657 00456 33567

既然那不可能，我有什么选择？

编辑：我没有添加零我替换。

这是视图中字段 PartnerID 的当前公式，但这只是忽略了前导零。在我看来，我想根据这个公式使用前导零。

```
CASE WHEN (LEN(PartnerID) = 5 AND (PartnerID LIKE '11%' OR
                      PartnerID LIKE '22%')) THEN stuff(PartnerID, 1, 2, '00') ELSE PartnerId END AS PartnerID 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:56:10.083

尝试将 Integer PartnerId 转换为字符串，例如：

```
CASE WHEN (LEN(PartnerID) = 5 AND (PartnerID LIKE '11%' OR
                      PartnerID LIKE '22%')) THEN stuff(PartnerID, 1, 2, '00') ELSE CONVERT(VARCHAR(5), PartnerId) END AS PartnerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:56:22.427

是什么让你认为这是不可能的？

这样的事情行不通吗

```
SELECT RIGHT('0000'+ CONVERT(VARCHAR,IntegerColumn), 5) FROM YourTable 
```

# c# - 获取文字控制的 id

> ID：14355517
> 
> 赞同：1
> 
> 时间：2013-01-16T09:52:19.517
> 
> 标签：c#, asp.net

我正在使用 Asp.net 和 c#。

在我的应用程序中，我有一个带有文字控件的**自动完成文本框。我需要在我的代码隐藏中获取该文字控件的****ID**，但我无法获得，因为没有**runat**属性。如果我使用 runat 属性，我的自动完成功能不起作用。请给我一些解决这个问题的建议。

代码：

```
 <input ID="txtrecipient"/> 
```

***注意**：我需要代码隐藏中的 id **txtrecipient**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:57:04.647

最简单的解决方案是使用属性 runat="server" 的服务器控件并设置其 ClientIDMode=Static。

如果您不想更改 ClientIDMode，您还可以访问客户端文本框的客户端 ID。请参见下面的示例：

```
<script>
     document.getElementById("<%= txtrecipient.ClientID %>").value = "";
     ... or
     $("<%= txtrecipient.ClientID %>").autoComeplete();
</script> 
```

# java - 这是什么意思：${somevalue}

> ID：14355518
> 
> 赞同：1
> 
> 时间：2013-01-16T09:52:20.537
> 
> 标签：java, xml

我在我的 XML 代码中多次使用它：

```
${some.value} 
```

some.value 可能来自哪里

1.  属性文件
2.  System.setProperty("some.value", "any_value");

**例子：**

在春天的情况下，

```
 <bean id="placeholderConfig"
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="location" value="classpath:test.properties" />
        </bean>

<bean id="anyID" class="com.my.package.MyClass" >
        <constructor-arg index="0" value="${some.value}" />
    </bean> 
```

而 test.properties 是，

```
some.value=any_value 
```

他们叫什么？

它们到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:55:25.433

您配置此类内容的一些地方是 XML/属性文件。春天叫他们`property-placeholders`。通常这些变量可以在运行时加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:57:41.713

**系统属性：**
它是您机器的通用属性文件，由 Java 在`java.lang.System`类中维护。这是[System Properties](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)的详细文档。

当您设置时，`System.setProperty("some.value", "any_value");`您可以通过调用在您的 java 程序中的任何位置访问属性的值`System.getproperty("some.value");`

**属性文件：**

`Key & Value`以带有新行分隔符的对格式保存的文件，是`.properties`文件的扩展名。[属性](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)的 Java 文档

# zend-framework2 - Zend Framework 2 - 查询

> ID：14355521
> 
> 赞同：1
> 
> 时间：2013-01-16T09:52:22.823
> 
> 标签：zend-framework2

我正在研究 ZF2。我想打印查询。我如何在模型文件中执行？

我正在使用数据库记录进行表单验证 - 对于已经存在的条件。

但是，这行不通。所以，我喜欢对查询进行故障排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:56:57.990

您只需执行以下操作：

```
echo $this->getSql(); 
```

虽然这不是推荐的方式，但它在紧要关头有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T11:59:10.680

如果您使用 TableGateway 执行查询，请尝试以下代码。

构建整个 $select 对象后 -

```
$select = new Select(database_table_name);
$select->join(...);
$select->where(...);
...
....
$select->order(...);

/*Required lines of code to print the whole query*/
$sql = new \Zend\Db\Sql\Sql($this->tableGateway->adapter);
echo $sql->getSqlStringForSqlObject($select);
exit();   //(optional) 
```

# qt - 弹出窗口消失

> ID：14355524
> 
> 赞同：0
> 
> 时间：2013-01-16T09:52:32.783
> 
> 标签：qt, popup

我使用 QFrame 在 QT 中制作了一个弹出窗口。这个 QFrame 上有两个 QPushButton，分别是一个取消和一个确定按钮。我希望仅当按下这些按钮之一时弹出窗口才会消失。不幸的是，当我单击弹出窗口旁边时，弹出窗口也会消失！我使用哪个设置来禁用它？那么，只要我不按“确定”或“取消”按钮，我怎样才能让它保持在最前面呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:57:34.077

您可能希望将 QDialog 与 setModal(true); [http://doc.qt.digia.com/qt/qdialog.html](http://doc.qt.digia.com/qt/qdialog.html)

# mysql - 获取行，如果 ID 不在 Array/comma-separated-list 中

> ID：14355527
> 
> 赞同：0
> 
> 时间：2013-01-16T09:52:41.587
> 
> 标签：mysql, sql

我不知道这是否是 SQL 功能......简而言之：我想要一个表中的行，在另一个表的数组/逗号分隔列表中找不到 id。更多信息如下：

设置是两个表；一个用户表和一个问题表。user-table 有一个名为 answersQuestions 的列，这是一个逗号分隔的列表，其中包含用户已回答的问题 ID。

我试图得到 4 个随机问题，每个问题都没有得到回答。

**我如何通过 SQL 查询获得 4 个随机数**

```
SELECT * FROM questions WHERE id >= RAND() * (SELECT MAX(id) FROM questions) LIMIT 4 
```

但这只会返回 4 个随机问题，而不会考虑用户之前是否有过该问题。

**如果我应该用 Javascript 来做，它看起来像这样**

```
var questions = [1,2,3,4,5,6,7,8,9,10,11,12];
var answeredQuestions = [3,5,9,12];
var sqlReturn = [];

for (var i=0;i<4;i++) { 
  var randNo = 0;

  while (randNo == 0 || sqlReturn.indexOf(randNo) > -1 || answeredQuestions.indexOf(randNo) > -1) {
    randNo = Math.floor((Math.random()*questions.length)+1);
  }

  sqlReturn[i] = randNo;
}

document.write(sqlReturn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:05:06.713

不太喜欢您的解决方案。您的底层数据库设计让您自己的事情变得更加困难。

您有两个表，一个代表用户，另一个代表问题。你真正需要的是一个连接这两个概念的表格，比如用户问题。

建议设计：-

```
create table `user-questions`
(
   user_id int,
   question_id int,
   answered datetime
) 
```

记录答案的建议方法。

每次您的用户回答问题时，在用户问题中输入一行以表示用户已经回答了问题。

在这种结构下，解决你的具体问题，找到尚未回答的问题，变得微不足道。

```
-- Find a question that hasn't been answered by user id 22.
SELECT
  q.* 
FROM 
  `questions`
LEFT OUTER JOIN `user-questions` uq
ON q.question_id = uq.question_id
-- Just a sample user ID
AND uq.user_id = 22
WHERE
  uq.question_id IS NULL 
```

我不每天玩 MySQL，所以请随时纠正任何错别字，SO'ers。不过，这种方法是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:06:49.970

虽然 Paul 是正确的，但您确实应该重构您的数据库。以下应该使用您现有的结构来完成：

声明@askedIDs VARCHAR(2000)

SET @askedIDs =（从用户那里选择已回答的问题 UserID = @userID）

EXECUTE ('SELECT * FROM Questions WHERE ID NOT IN (' + @askedIDs +')')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:07:04.790

该功能`FIND_IN_SET`将帮助您这样做

要获取给定用户的所有未回答问题：

```
SELECT *
  FROM questions
 WHERE NOT FIND_IN_SET( id, ( SELECT answered_questions 
                                FROM users 
                               WHERE id = 1 ) ) 
```

并且只得到 4 个随机未回答的问题：

```
 SELECT *
    FROM questions
   WHERE NOT FIND_IN_SET( id, ( SELECT answered_questions 
                                  FROM users 
                                 WHERE id = 1 ) )
ORDER BY RAND()
   LIMIT 4 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/a3dad/7)

尽管您可以运行此程序，但您应该查看规范化并重新设计表结构。

# c# - 带有 C# asp.net 的 GCM 推送通知在 android 设备中提供 null 作为通知

> ID：14355528
> 
> 赞同：2
> 
> 时间：2013-01-16T09:52:41.557
> 
> 标签：c#, android, push-notification, google-cloud-messaging

我正在 C# 中创建一个类，该类具有使用 GCM 在 android 中发送推送通知的方法。该方法运行良好，并且谷歌也给出了成功的响应。但在 android 模拟器中，通知为空。这是我正在使用的代码，

```
public void NotifyTest(string regId)
    {
        var applicationID = "AIza*************"; 

        var SENDER_ID = "xxxxxxxxxx"; 
        var httpWebRequest = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
        httpWebRequest.ContentType = "application/json";
        httpWebRequest.Method = "POST";
        httpWebRequest.Headers.Add(string.Format("Authorization: key={0}", applicationID));
        httpWebRequest.Headers.Add(string.Format("Sender: key={0}", SENDER_ID));
        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            string json = "{\"registration_ids\":[\""+ regId +"\"]," +
                        "\"data\": { \"score\" : \"1234\"}}";
            Console.WriteLine(json);
            streamWriter.Write(json);
            streamWriter.Flush();
            streamWriter.Close();

            var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
            using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
            {
                var result = streamReader.ReadToEnd();
                Console.WriteLine(result);
            }
        }
    } 
```

该代码工作正常，没有任何错误，并且也返回了 Google 的响应。请让我知道这些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T14:30:37.743

在 Android OnMessage（在 GCMIntent 服务中）写下一行

```
 String message = intent.getStringExtra("score"); 
```

快乐的编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:28:49.130

您需要如下替换 json 字符串并修改您的 Android 代码以获取消息和名称。

字符串 json = "{\"registration_ids\":[\"" + regId + "\"]," + "\"data\": { \"message\" : \"1234\", \"name\" : \"Arvind Sharma\"}}";

# php - Zend Framework DB_TABLE 中的 mySQL 语句

> ID：14355565
> 
> 赞同：0
> 
> 时间：2013-01-16T09:54:12.850
> 
> 标签：php, mysql, zend-framework, zend-db

我想知道在这种情况下如何使用 ZEND 正确编写 mySQL 语句：

```
SELECT * FROM `users` WHERE role_id = 2 AND status = 2 AND bddate BETWEEN '1988-05-07' AND '1991-01-01' ORDER BY lastname DESC 
```

我会有 if 语句，例如。如果在过滤器用户中选择了 role_id，我会将其包含在 WHERE 等中，其余部分相同。

到目前为止，我有 1 个 WHERE 条件，并且我已经这样做了（现在我需要更复杂的条件）：

```
 $select = $this->select()
            ->setIntegrityCheck(false)
            ->from(array('u'=>'users'))
            ->join(array('r'=>'user_roles'), 'u.role_id = r.role_id', array('role'=>'title'));          
    if(count($filters) > 0) {
        foreach($filters as $field => $filter) {
            $select->where($field . ' = ?', $filter);
        }
    }

    if(null != $sortField) {

        $select->order($sortField);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:22:25.330

好的，所以你遇到了 BETWEEN 的问题。有两种可能的解决方案：

a) 你使用两个 where 子句来分割 BETWEEN，所以你得到

```
$select = $this->select()
//... other conditions
    ->where('bddate >= ?', '1988-05-07')
    ->where('bddate <= ?', '1991-01-01'); 
```

或者

b)

```
$select = $this->select()
//... other conditions
    ->where ('bddate BETWEEN '1988-05-07' AND '1991-01-01'); 
```

我会推荐选项 a)，因为它正确地转义了您的值。

# javascript - 在 asp.net 中的 javascript 中的提示中链接到另一个页面

> ID：14355572
> 
> 赞同：1
> 
> 时间：2013-01-16T09:54:49.160
> 
> 标签：javascript, asp.net, prompt

如何在asp.net中的javascript提示中链接到另一个页面

否则我想链接另一个页面

```
function  a()
{
    var s = prompt("hello");
    if (s != 123) {
        alert("enter number correctly");
        return true;
    }
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:55:27.700

您可以使用[window.location.href](http://www.w3schools.com/js/js_window_location.asp)在其他部分打开其他页面。

```
function  a()
{
    var s = prompt("hello");
    if (s != 123) {
        alert("enter number correctly");
        return true;
    }
    else
        window.location.href = 'http://www.google.com'; 
} 
```

# c# - Jquery 对话框弹出不适用于 window.showModalDialog(..)

> ID：14355575
> 
> 赞同：0
> 
> 时间：2013-01-16T09:54:58.407
> 
> 标签：c#, jquery, asp.net

我有一个在网络浏览器的新标签中调用的 aspx 页面。这个页面基本上使用了 jquery 对话框弹出 - 也就是说，在这个页面上有一个填充数据的网格，所以只要用户点击其中一行，就会弹出 jquery 对话框以允许用户编辑此特定行的数据。它通过调用服务器端 '[Webmethod]' -> ajax/json 来保存数据。

如果我在浏览器的新选项卡中打开此页面，一切正常。但我遇到的问题是，如果我在网页对话框 (window.showModalDialog) 中打开页面，此弹出窗口无法调用服务器端“[WebMethod]”。

有人知道为什么吗？

# unix - 使用 awk 获取文件中行的百分位数

> ID：14355579
> 
> 赞同：1
> 
> 时间：2013-01-16T09:55:08.080
> 
> 标签：unix, awk, statistics, percentile

我有一个带有数值的排序文件，例如

```
foo 2.3
bar 2.6
baz 4.7 
```

并希望有一个单行，将一行的百分位数放入最后一列，比如

```
foo 2.3 0.3333
bar 2.6 0.6666
baz 4.7 1.0000 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:01:17.877

我假设您的意思是行数，为此您需要首先知道行数。

这是使用 awk 的两遍解决方案的一种方法：

```
 awk 'FNR == NR { tot=NR; next } { printf( "%s %.4f\n", $0, FNR/tot) }' file file 
```

输出：

```
foo 2.3 0.3333
bar 2.6 0.6667
baz 4.7 1.0000 
```

第一个块仅在`FNR == NR`第一次通过期间有效。第二块负责打印。

### 确定文件长度的其他替代方法

`NR-1`开始第二遍 ( ) 时使用`FNR != NR`：

```
awk 'FNR != NR { if(!tot) tot=NR-1; printf( "%s %.4f\n", $0, FNR/tot) }' file file 
```

`wc`在运行 awk 之前使用：

```
awk -v tot=$(wc -l < file) '{ printf( "%s %.4f\n", $0, FNR/tot) }' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:22:33.767

```
$ awk 'c=NR-FNR{printf "%s %.4f\n",$0,FNR/c}' file file
foo 2.3 0.3333
bar 2.6 0.6667
baz 4.7 1.0000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T13:42:03.637

即使@thor 解决方案很好，也不需要遍历文件两次。相反，我们可以在内存本身内部进行。

```
awk '{a[NR]=$0;}END{for(i=1;i<=NR;i++)print a[i],i/NR;}' your_file 
```

测试：

```
> cat temp
foo 2.3
bar 2.6
baz 4.7
> awk '{a[NR]=$0;}END{for(i=1;i<=NR;i++)print a[i],i/NR;}' temp
foo 2.3 0.333333
bar 2.6 0.666667
baz 4.7 1 
```

如果您具体了解精度，请使用以下内容：

```
> awk '{a[NR]=$0;}END{for(i=1;i<=NR;i++)printf("%s %0.4f\n",a[i],i/NR);}' temp
foo 2.3 0.3333
bar 2.6 0.6667
baz 4.7 1.0000 
```

# django - 如何强制 Django 创建具有特定排序规则的测试数据库？

> ID：14355580
> 
> 赞同：5
> 
> 时间：2013-01-16T09:55:11.093
> 
> 标签：django

我有一个 Postgres 安装，它设置为使用 LATIN1 作为默认编码。但是，我的生产数据库要求我使用 UTF8（它托管在 Heroku 上，所以我没有任何选择）。

我已经创建了本地开发数据库以正确设置此设置：

```
sudo createdb -Upostgres $PROJECT_NAME --template=template0 \
    --encoding=UTF8 --lc-collate=en_US.UTF-8 --lc-ctype=en_US.UTF-8 
```

但是，我现在无法运行 django 测试，因为测试数据库只使用默认的 Postgres 集群设置 (LATIN1)，这会导致测试失败（我在某些模板中有无效字符 - `...character 0xe28099 of encoding "UTF8" has no equivalent in "LATIN1"`）

“核”选项是使用正确的 (en_US.UTF8) 设置重新安装 Postgres，但是由于我在 VM 中运行它，所以每次启动 VM 时我都不想这样做。如果有一种方法可以按摩 Django 以首先正确地创建数据库，那将是可取的。

**[更新 1：TEST_ENCODING]**

按照@sneawo 的建议，我设置了数据库的 TEST_ENCODING 属性，现在得到以下错误：

```
Creating test database for alias 'default'...
Got an error creating the test database: encoding UTF8 does not match locale en_US
DETAIL:  The chosen LC_CTYPE setting requires encoding LATIN1. 
```

**[更新 2：核选项]**

我在上面提到了这个，它并不适合所有人，但由于我在 VM 上运行它，实际上我很容易在我的 Vagrant 配置脚本（shell 脚本）中使用正确的排序规则重新创建 postgres 集群：

```
sudo service postgresql stop
sudo pg_dropcluster 9.1 --stop main
sudo pg_createcluster --start -e UTF-8 9.1 main
sudo cp -f $CONF_DIR/pg_hba.conf /etc/postgresql/9.1/main/pg_hba.conf
sudo cp -f $CONF_DIR/postgresql.conf /etc/postgresql/9.1/main/postgresql.conf
sudo service postgresql restart 
```

我有默认的“允许一切”版本，`pg_hba.conf`并且`postgresql.conf`我从主机复制过来以覆盖创建集群时创建的默认值。这有点像大锤敲击坚果的解决方案，但它确实有效，而且速度很快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T09:40:34.030

在 settings.py 底部添加此代码

```
try:
    from local_settings import *
except ImportError:
    pass 
```

在 local_settings.py 中添加此代码

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'test_db',
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '3306',
        'OPTIONS': {
                    'charset': 'latin1',
                    'use_unicode': True, },
    }, 
} 
```

将 local_settings.py 添加到 git ignore。

# ruby-on-rails - 为什么不显示验证错误消息？

> ID：14355581
> 
> 赞同：2
> 
> 时间：2013-01-16T09:55:12.807
> 
> 标签：ruby-on-rails, ruby, validation, ruby-on-rails-3.2

我正在做一个可以节省用户的简单项目。我遵循 Ruby on Rails 教程及其步骤，但我对显示验证错误消息感到困惑。当我单击“创建我的帐户”按钮而不填写空白时，直接重定向到 /users。但我看不到验证错误。如下代码：

**用户.rb**

```
class User < ActiveRecord::Base
  has_secure_password

  attr_accessible :name, :email, :password, :password_confirmation

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

**用户控制器：**

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to @user
    else
      render 'new'
    end
  end
end 
```

**新的.html.erb**

```
<% provide(:title, 'Sign up') %>
   <h1>Sign up</h1>

   <div class="row">
     <div class="span6 offset3">
       <%= form_for(@user) do |f| %>
         <%= render 'shared/error_messages' %>
         <%= f.label :name %>
         <%= f.text_field :name %>
         <%= f.label :email %>
         <%= f.text_field :email %>

         <%= f.label :password %>
         <%= f.password_field :password %>

         <%= f.label :password_confirmation, "Confirmation" %>
         <%= f.password_field :password_confirmation %>

         <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
       <% end %>
     </div>
   </div> 
```

**应用程序.html.erb**

```
<!DOCTYPE html>
   <html>
     <head>
       <title><%= full_title(yield(:title)) %></title>
       <%= stylesheet_link_tag    "application", media: "all" %>
       <%= javascript_include_tag "application" %>
       <%= csrf_meta_tags %>
       <%= render 'layouts/shim' %>    
     </head>
     <body>
       <%= render 'layouts/header' %>
       <div class="container">
         <% flash.each do |key, value| %>
           <div class="alert alert-<%= key %>"><%= value %></div>
         <% end %>
         <%= yield %>
         <%= render 'layouts/footer' %>
         <%= debug(params) if Rails.env.development? %>
       </div>
     </body>
   </html> 
```

**路线.rb**

```
SampleApp::Application.routes.draw do

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/help',to: 'static_pages#help'
  match '/about',to:'static_pages#about'
  match '/contact',to:'static_pages#contact'
  match "/users", to:'users#showall'
  match '/users/:id', to: 'users#show', as: 'user'
end 
```

**_error_messages.html.erb**

```
<% if @user.errors.any? %>
 <div id="error_explanation">
   <div class="alert alert-error">
     The form contains <%= pluralize(@user.errors.count, "error") %>.
   </div>
   <ul>
   <% @user.errors.full_messages.each do |msg| %>
     <li>* <%= msg %></li>
  <% end %>
   </ul>
 </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:57:27.857

我认为以下 SO 问题底部的“更新 - 找到解决方案”也会对您有所帮助。

[Rails 渲染路线路径](https://stackoverflow.com/questions/7533061/rails-render-route-path)

正如sameera207 所提到的，通过将“用户”声明为资源，您可以获得为该资源定义的所有正确路由。

# python - 以特定模式排列列表项

> ID：14355585
> 
> 赞同：0
> 
> 时间：2013-01-16T09:55:24.113
> 
> 标签：python, list, dictionary

我想要实现的是以特定模式排列列表中的项目。说，我有以下字典：

```
>>>dict_a = {
       'north' : 'N',
       'south' : 'S',
       'east' : 'E',
       'west' : 'W',
       'north east' : 'NE',
       'north west' : 'NW'
   } 
```

现在检查一个字符串是否包含上述字典中的任何项目：

```
>>>string_a = 'North East Asia'
>>>list_a = []
>>>for item in dict_a:
       if item in string_a.lower():
           list_a.append(item) 
```

它给我的结果如下，这是有道理的

```
>>>['north', 'north east', 'east'] 
```

但我想要得到的是`['north east']`并忽略`north`and `east`。我如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:01:48.797

尝试[difflib.closest_match](http://docs.python.org/2/library/difflib.html#difflib.SequenceMatcher.find_longest_match)

```
>>> dict_a = {
       'north' : 'N',
       'south' : 'S',
       'east' : 'E',
       'west' : 'W',
       'north east' : 'NE',
       'north west' : 'NW'
   }
>>> import difflib
>>> string_a = 'North East Asia'
>>> dict_a[difflib.get_close_matches(string_a, dict_a.keys())[0]]
'NE' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T10:11:32.480

您可以使用[`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)（Python 2.7+ 中的新功能）以一致的顺序存储键/值对。要获得单个结果，只需在第一次匹配后中断循环。

```
import collections

# create the mapping with the desired order of matches
dict_a = collections.OrderedDict([
    ('north east', 'NE'),
    ('north west', 'NW'),
    ('north', 'N'),
    ('south', 'S'),
    ('east', 'E'),
    ('west', 'W'),
])

string_a = 'North East Asia'
list_a = []
for item in dict_a:
    if item in string_a.lower():
        list_a.append(item)
        break  # found something 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:59:05.510

```
>>> max(['north', 'north east', 'east'], key=len)
'north east' 
```

# java - 使用 Eclipse 创建的 Jar 文件：找不到主类：UI.MainWindow。程序将会退出

> ID：14355591
> 
> 赞同：3
> 
> 时间：2013-01-16T09:55:39.743
> 
> 标签：java, eclipse, jar, main, classnotfoundexception

我有一个用 Eclipse 开发的 Java 应用程序。我试图将它导出为 .jar 文件，以独立运行它，但如果我尝试使用命令运行它

> java -jar 应用程序.jar

我收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jfree/data/xy/XYDataset
 Caused by: java.lang.ClassNotFoundException: org.jfree.data.xy.XYDataset
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccesController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$%AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

找不到主类：UI.MainWindow。程序将会退出

目前，主类是 MainWindow.class。它包含一个**公共静态 void main(String[] args)**方法。我检查了 manifest.mf 文件，它似乎是正确的：

> ```
>  Manifest-Version: 1.0
>   Main-Class: UI.MainWindow 
> ```

我在 64 位 Windows 2008 系统上使用*Eclipse IDE for Java Developers 版本：Helios Release 。*

我能做什么？我怎么能解决这个问题？org/jfree/data/xy/XYDataset 错误是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:32:46.537

当您的类路径中未包含一个或多个所需的依赖项 jar 文件时，通常会发生这种情况，并且从`MANIFEST`您包含的代码段来看，这似乎是您的问题。

另一方面，您可能想要使用导出`Runnable Jar`功能，这可以保证您导出的 jar 将正常工作，因为您`Runtime Configuration`用作导出此 jar 的模板是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T10:29:56.857

你可以做的两件事是

1.  在类路径中使用依赖项 jar 启动 java 应用程序，如下所示。
    `java -cp jfreechart-1.x.x.jar -jar application.jar`

2.  > 在您的 MANIFEST.MF 中添加 Classpath 选项，如下所示
    > Manifest-Version: 1.0
    > Main-Class: UI.MainWindow Class-Path: < PATH to the jfreechart-1.xxjar >

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:57:24.123

这意味着在您的代码 main() 方法中 -`org/jfree/data/xy/XYDataset`未找到

可能的原因是您的类路径中不存在 org.jfree 库 jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:15:23.367

1.您可以尝试将库放入jdk类路径
2.然后导出jar并运行

```
lib path will be
$JDK_HOME\jre\lib\ext
$JDK_HOME is your jdk installation root path 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-07T17:56:19.330

通过 Google Web Toolkit 示例 Web 应用程序创建，我得到了类似的结果。这是错误的，因为 Java 编译器设置为 1.6 并且 GWT v2.6 需要 jdk 1.7 + 。我切换了jdk和版本。GWT 能够编译。

# xcode - CocoaPods - pod 设置 http 请求失败

> ID：14355595
> 
> 赞同：1
> 
> 时间：2013-01-16T09:56:10.600
> 
> 标签：xcode, git, cocoapods

在 OSX 10.8.2 上工作

全新安装 CocoaPods 后。
我试图

```
$ pod setup 
```

我得到

```
[!] git clone 'https://github.com/CocoaPods/Specs.git' master

Cloning into 'master'...
error: The requested URL returned error: 503 while accessing
  https://github.com/CocoaPods/Specs.git/info/refs

fatal: HTTP request failed 
```

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:11:04.690

由于一些 Github 可用性问题，这应该是一个小故障：

从[Github 状态页面](https://status.github.com/messages)：

> 今天（UTC 时间 1 月 16 日 9:50）
> 
> 我们正在努力解决几个文件服务器集群的问题。只有少数用户会受到影响。

从

> 上游网络连接问题继续影响一小部分用户的 GitHub 访问。
> 我们已收到通知，我们的上游网络提供商之一将对故障设备进行紧急维护，以尝试在今天晚些时候解决此问题。

因此，如果您稍后重试，它应该可以工作。

由于它是一个公共 repo，因此像[https://github.com/CocoaPods/Specs.git](https://github.com/CocoaPods/Specs.git)这样的地址可以用于读取（为所有人拉取）和写入（仅限合作者）。

# android - 安卓。什么是 android:popupPromptView？

> ID：14355596
> 
> 赞同：4
> 
> 时间：2013-01-16T09:56:15.627
> 
> 标签：android, spinner

我为安卓开发。我的 IDE 是 Eclipse。我最近一直在和纺纱厂打交道。在制作微调器布局时，eclipse 建议我这样一个属性：android:popupPromptView，eclipse 内置文档对此有以下说明：

```
Reference to a layout to use for displaying a prompt in the 
 dropdown for spinnerMode="dropdown". [reference] 
```

但是，一旦我使用它，eclipse 会告诉我以下信息：

```
Error: No resource found that matches the given name: attr 'android:popupPromptView'. 
```

然后我转到android官方文档，微调器页面，在那里我根本看不到`android:popupPromptView`......这怎么可能？这个属性存在吗？如果是的话，一旦我使用它，如何摆脱错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-17T11:17:04.670

你可以用简单的方式 declera 微调器

```
<Spinner
                android:id="@+id/spin_adit_region"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" /> 
```

`<item name="android:popupPromptView">@android:layout/simple_dropdown_hint</item>`用于微调器定制

# java - 如何从 JCAPS 迁移到 WSO2 ESB

> ID：14355598
> 
> 赞同：2
> 
> 时间：2013-01-16T09:56:19.810
> 
> 标签：java, wso2, esb, wso2esb, jcaps

我们正在使用[JavaCAPS](http://en.wikipedia.org/wiki/Java_Caps)（JCAPS 5.X 和 6.X）并希望迁移到[WSO2 ESB](http://wso2.com/products/enterprise-service-bus/)。现在的问题是我们如何尽可能多地进行自动迁移。

可以将 JCD 迁移到由 WSO2 代理或序列提供的自定义中介类。但我们的主要问题是迁移不同的 OTD（对象类型定义），如 DatabaseStockedProcedure、WebService、CustomTextFile……

**是否有任何工具或操作指南将 JCAPS 组件转换为 WSO2 兼容组件（或标准 Java 实现，如 JAXB 或类似的）？**

（请不要推荐其他 ESB）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:19:10.047

Linkedin 上有一篇关于[此](http://www.linkedin.com/groupItem?view=&gid=876687&type=member&item=204641575&qid=419cfe4f-5efe-47fc-8ffe-0f63c0d386b8&trk=group_most_recent_rich-0-b-cmr&goback=.gmr_876687.gde_876687_member_200182440.gmr_876687.gde_876687_member_200925637.gmr_876687.gde_876687_member_202228007.gmr_876687)的帖子。您可能需要拥有linkedin 个人资料才能看到讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:09:56.250

有一些关于[从 JCAPS 迁移到 WSO2](http://de.slideshare.net/avintis/avintis-jcaps-migration)的新的附加幻灯片。

# c# - 将 CallerMemberName 与参数组合

> ID：14355600
> 
> 赞同：32
> 
> 时间：2013-01-16T09:56:22.753
> 
> 标签：c#, string-formatting, optional-parameters, c#-5.0

现在（C# 4.0），我们的日志记录方法看起来像

```
public void Log(string methodName, string messageFormat, params object[] messageParameters) 
```

记录器在哪里进行字符串格式化，这样调用者就不必输入 String.Format 来创建漂亮的日志消息（如果没有附加日志查看器，则允许记录器跳过字符串格式化）。

在 C# 5.0 中，我想通过使用新的 CallerMemberName 属性来摆脱 methodName 参数，但我不知道如何将它与“params”关键字结合使用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-09-30T14:18:41.843

你可以这样做：

```
protected static object[] Args(params object[] args)
{
    return args;
}

protected void Log(string message, object[] args = null, [CallerMemberName] string method = "")
{
    // Log
} 
```

要使用日志，请执行以下操作：

```
Log("My formatted message a1 = {0}, a2 = {2}", Args(10, "Nice")); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-16T14:12:21.640

我相信您根本无法`params`将`CallerMemberName`. 您能做的最好的事情是使用实际数组而不是`params`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-22T04:17:55.180

为了建立@guilhermekmelo 的答案，我可能会建议使用链式方法：

所以保持你当前的`Log(string,string,object[]`方法：

```
public void Log(string methodName, string messageFormat, params object[] messageParameters) 
```

并添加这个新的重载 ( `Log(string,string)`)：

```
public LogMessageBuilder Log(string messageFormat, [CallerMemberName] string methodName = null)
{
    // Where `this.Log` is 
    return new LogMessageBuilder( format: messageFormat, logAction: this.Log );
}

public struct LogMessageBuilder
{
    private readonly String format;
    private readonly String callerName;
    private readonly Action<String,String,Object[]> logAction;

    public LogMessageBuilder( String format, String callerName, Action<String,String,Object[]> logAction )
    {
        this.format = format;
        this.callerName = callerName;
        this.logAction = logAction;
    }

    public void Values( params Object[] values )
    {
        this.logAction( this.format, this.callerName, values );
    }
} 
```

像这样使用：

```
this.Log( "My formatted message a1 = {0}, a2 = {2}" ).Values( 10, "Nice" ); 
```

请注意，它`LogMessageBuilder`是 a `struct`，所以它是一个值类型，这意味着它不会导致另一个 GC 分配 - 尽管使用`params Object[]`会导致调用站点的数组分配。（我希望 C# 和 .NET 支持基于堆栈的可变参数，而不是用堆分配的参数数组来伪造它）。

* * *

另一种选择是使用`FormattableString`- 但请注意，由于 C#[编译器具有内置的特殊情况魔法](https://stackoverflow.com/questions/38119074/what-is-the-original-type-of-interpolated-string)，`FormattableString`因此您需要小心不要让它被隐式转换为`String`（也很糟糕，您不能添加扩展方法直接`FormattableString`，抱怨）：

```
public void Log(FormattableString fs, [CallerMemberName] string methodName = null)
{

    this.Log( messageFormat: fs.Format, methodName: methodName, messageParameters: fs.GetArguments() );
} 
```

用法：

```
this.Log( $"My formatted message a1 = {10}, a2 = {"Nice"}" ); 
```

# windows-8 - 共享 writeablebitmap 总是失败

> ID：14355601
> 
> 赞同：1
> 
> 时间：2013-01-16T09:56:28.540
> 
> 标签：windows-8, share, writeablebitmap

我想分享一个可写位图，但是当我打开分享目标应用程序时，没有图像。下面是我的代码。

```
private async void OnDataRequested(DataTransferManager sender, DataRequestedEventArgs e)
    {
        DataPackage requestData = e.Request.Data;
        requestData.Properties.Title = "Image";

        Guid encoderId;
        switch (file.FileType)
        {
            case ".png":
                encoderId = BitmapEncoder.PngEncoderId;
                break;
            case ".jpg":
            case ".jpeg":
            default:
                encoderId = BitmapEncoder.JpegEncoderId;
                break;
        }

        DataRequestDeferral deferral = e.Request.GetDeferral();
        try
        {
            using (IRandomAccessStream stream = new InMemoryRandomAccessStream())
            {
                BitmapEncoder encoder = await BitmapEncoder.CreateAsync(encoderId, stream);
                // image is the WriteableBitmap
                Stream pixelStream = image.PixelBuffer.AsStream();
                byte[] pixels = new byte[pixelStream.Length];
                await pixelStream.ReadAsync(pixels, 0, pixels.Length);
                encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Ignore, (uint)image.PixelWidth, (uint)image.PixelHeight, 96.0, 96.0, pixels);
                await encoder.FlushAsync();
                RandomAccessStreamReference rasr = RandomAccessStreamReference.CreateFromStream(stream);
                requestData.Properties.Thumbnail = rasr;
                requestData.SetBitmap(rasr);                    
            }
        }
        catch (Exception ex)
        {
            NotifyUser(ex.ToString());
        }
        finally
        {
            deferral.Complete();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:52:20.223

请试试这个：

```
private async void OnDataRequested(DataTransferManager sender, DataRequestedEventArgs e)
        {
        DataRequestDeferral deferral = e.Request.GetDeferral();

        DataPackage requestData = e.Request.Data;
        requestData.Properties.Title = "Image";
        IRandomAccessStream stream = new InMemoryRandomAccessStream();
        Guid encoderId;
        switch (file.FileType)
        {
            case ".png":
                encoderId = BitmapEncoder.PngEncoderId;
                break;
            case ".jpg":
            case ".jpeg":
            default:
                encoderId = BitmapEncoder.JpegEncoderId;
                break;
        }
        BitmapEncoder encoder = await BitmapEncoder.CreateAsync(encoderId, stream);
        Stream pixelStream = image.PixelBuffer.AsStream();
        byte[] pixels = new byte[pixelStream.Length];
        await pixelStream.ReadAsync(pixels, 0, pixels.Length);
        encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Ignore, (uint)image.PixelWidth, (uint)image.PixelHeight, 96.0, 96.0, pixels);
        requestData.SetBitmap(RandomAccessStreamReference.CreateFromStream(stream));
        await encoder.FlushAsync();

        deferral.Complete();
    } 
```

# php - mysql query match exact string or number

> ID：14355602
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:56:35.597
> 
> 标签：php, mysql, mysqli

I have result in `MySQL` table. I need to get result only where is only 6 not 26 in user_id not.

```
id   users_id

 15    6,5
 16    1,5
 18    2,8
 19    1,26
 20    6,26
 21    5,10
 22    28,6
 23    21,9 
 24    29,6 
```

**i am using MySQL query**

```
SELECT * FROM WHERE users_id LIKE '%6%' 
```

**Result**

```
id  user_id

15  6,5
19  1,26   why is this here..
20  6,26
22  28,6
24  29,6 
```

result is not correct. i need only :

```
id  user_id

15  6,5
22  28,6
24  29,6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:59:49.453

Try::

```
SELECT  *
FROM    tableName
WHERE   user_id like '6,%' or user_id like '%,6' or user_id like '%,6,%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:58:30.887

```
SELECT  *
FROM    tableName
WHERE   FIND_IN_SET(6, users_id) > 0 AND
        FIND_IN_SET(26, users_id) = 0 
```

*   [SQLFiddle Demo](http://sqlfiddle.com/#!2/1133d/1)

SOURCE

*   [FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:59:04.573

because your query checks if the result contains a 6 at every place.

Obviously, 26 contains 6...

You could do (other ways exist)

```
where (users_id like '6,%' or users_id like '%,6') 
```

[sqlFiddle](http://sqlfiddle.com/#!2/e49c4/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:16:31.807

maybe try:

```
SELECT * FROM WHERE users_id IN ('6'); 
```

should just match the 6.

[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T18:57:55.943

Or without knowing about FIND_IN_SET or about 'OR' you just could:

```
id   users_id

 15    |6|5|
 16    |1|5|
 18    |2|6|

```

and select user_id like '%|6|%'

# asp.net - 无法在 c# 中选择旧日期和今天日期的日期验证器

> ID：14355604
> 
> 赞同：0
> 
> 时间：2013-01-16T09:56:41.660
> 
> 标签：asp.net, validation

当用户在文本框中插入所选日期时，日期不能是旧日期或今天日期我可以使用什么验证规则？

我也不确定要使用哪个验证器控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:58:16.493

对于这种非标准情况，您需要使用 a `CustomValidator`，这将要求您编写服务器端验证函数。MSDN 在这里有详细信息：

[http://msdn.microsoft.com/en-us/library/9eee01cx(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/9eee01cx(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:02:57.767

一种方法是使用 a`CustomValidator`和`ServerValidate`这样的：

```
<asp:CustomValidator runat="server"
    ID="CustDateValidator" 
    ControlToValidate="txtDate"
    onservervalidate="CustDateValidator_ServerValidate" 
    ErrorMessage="enter valid date in the future" /> 
```

代码隐藏：

```
protected void CustDateValidator_ServerValidate(object source, ServerValidateEventArgs args)
{
    DateTime dt;
    args.IsValid = (DateTime.TryParse(args.Value, out dt) 
                    && dt > DateTime.Today);
} 
```

如果需要，您也可以提供[`ClientValidationFunction`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx)（实施取决于您）。

**注意**：如果输入控件为空，则不调用验证函数并且验证成功。

如果你需要确保它不是空的，那么你也需要一个`RequiredFieldValidator`。

# c# - 具有动态的 ServiceStack.Text json 序列化程序

> ID：14355605
> 
> 赞同：2
> 
> 时间：2013-01-16T09:56:43.210
> 
> 标签：c#, json, serialization, jsonserializer

我正在使用**ServiceStack.Text**库来序列化动态生成的对象（匿名类型）

它像魅力一样工作，但有一种情况它给了我以下错误

```
Unable to cast object of type '<>f__AnonymousType14`2[System.String,<>f__AnonymousType2`10[System.String,System.String,System.String,System.String,System.Int32,System.Int32,System.Int32,System.String,System.String,System.String]]' to type '<>f__AnonymousType14`2[System.String,<>f__AnonymousType13`3[System.String,System.Int32,System.String]]'. 
```

情况是，这是一种搜索方法，它使用关键字在不同类型的数据中进行搜索，并使用 c# 动态返回结果，如下所示

```
dynamic data = new
                {
                 ResultType = "Place",
                 Data = new
                         {
                          Name = place.Name,
                          Address = place.Address,
                         }
                 }; 
```

`Data`另一种类型可能是这样的，在子类型中具有或多或少的属性

然后我将这些`data`对象添加到 List 对象中，效果很好，我可以在调试中看到结果，

![在此处输入图像描述](../Images/5ff833940ac24293e3a7c7998011813c.png)

但是一旦我转到序列化程序，它就会给我这个错误

你可以帮帮我吗 ..

编辑：我通过使用**字典**而不是**列表**部分解决了这个问题，其中我使用对象类型的键和结果行的值

```
var dicResult = new Dictionary<string, dynamic>();
....
dicResult.Add("Category", new
                                      {
                                        Foo = "bar",
                                        .....
                                      }

dicResult.Add("Place", new
                                      {
                                        FooInt = 123,
                                        .....
                                      } 
```

结果是这样的

```
{
    .....
    "Data": [
        {
            "Key": "Category",
            "Value": {
                "Foo": "bar",
                ....  
            }
        },
        {
            "Key": "Place",
            "Value": {
                "FooInt": 123,
                .....
             }
        }]
} 
```

但我仍在寻求更好的解决方案

# sql-server - SQL Server 全文搜索 NOT 运算符

> ID：14355616
> 
> 赞同：2
> 
> 时间：2013-01-16T09:57:35.023
> 
> 标签：sql-server, full-text-search

我想用 NOT 运算符搜索我的全文索引。

```
SELECT * FROM CONTAINSTABLE(MY_TABLE, *, 'NOT name'), 
```

以下例外：

```
Msg 7630, Level 15, State 3, Line 1
Syntax error near 'name' in the full-text search condition 'NOT name'. 
```

有什么问题？**如何仅**使用NOT 运算符搜索我的全文索引？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:16:57.097

而不是 not，您可以使用 not contains ：

```
SELECT * FROM MY_TABLE
where not contains( *, 'name') 
```

以供参考 ：

> [http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-31T09:58:41.567

我是全文搜索的新手，但根据[文档](https://docs.microsoft.com/en-US/sql/t-sql/queries/contains-transact-sql?view=sql-server-ver15)：

> NOT 只能出现在 AND 之后，如 AND NOT。不允许使用 OR NOT 运算符。NOT**不能在第一个术语之前指定**。

所以在你的情况下，`CONTAINSTABLE(MY_TABLE, *, 'NOT name')`被认为是无效的。我发现将`NOT`运算符与 CONTAINSTABLE 一起使用的唯一方法如下：

```
SELECT * 
FROM CONTAINSTABLE({table_name}, *, N'{another_condition} AND NOT name') 
```

@NG 提交的语法。当您不需要`RANK`信息时工作正常，但只要您想要它，您似乎需要在`NOT`运算符之前添加另一个（虚拟）条件（这会很混乱......如果可以的话，不要使用虚拟条件躲开它）。

**注意**：在我看来，当您的论点是要获得排名结果时，在 CONTAINSTABLE 中只有一个`NOT`运算符的概念并没有真正意义。实际上，如果允许这样做，所有匹配结果将共享相同的排名值（因为它们不包含排除的标记）。这`RANK`将成为不相关的信息，`CONTAINS`可以使用简单的信息`CONTAINSTABLE`（参见@NG。答案）。

# android - 在地图视图中距离当前位置约 500 米处放置一个圆圈

> ID：14355618
> 
> 赞同：1
> 
> 时间：2013-01-16T09:57:40.783
> 
> 标签：android, map, android-mapview

我搜索了半天，我无法找到解决方案。请给我一些想法。

这就是我想在 MapView 中显示的方式，

![这就是我想在 MapView 中显示的方式](../Images/6ac33f67b9f6f62650feeff0345b0640.png)

这就是我得到的，

![这就是我得到的](../Images/61649cb31c1dc6cfe5b799734125c614.png)

所以，以当前位置为中心，以500米为半径画出那个圆。

```
if(GPSTracker == true)
{
    cl_drawable = getResources().getDrawable(R.drawable.blue);
    cl_itemizedOverlay = new MyItemizedOverlay(cl_drawable, mapView, shadow);
    mapView.getOverlays().clear();

    cur_loc = new GeoPoint((int)(latPt*1E6),(int)(lngPt*1E6));
    Log.e("Current place ", " is "+cur_loc);
    cl_overlayItem = new OverlayItem(cur_loc, "current location", "");
    cl_itemizedOverlay.addOverlay(cl_overlayItem);

     if(xxxx != 0)
     {
         drawable = getResources().getDrawable(R.drawable.yellow_pin);
         itemizedOverlay = new MyItemizedOverlay(drawable, mapView, shadow);

         for(int la=0;la<GoConstants.drink_venue_id.size();la++)
         {
             latpt = Double.valueOf(latd.get(la));
             lngpt = Double.valueOf(lond.get(la));

             p = new GeoPoint((int)(latpt*1E6),(int)(lngpt*1E6));
             overlayItem = new OverlayItem(p, GoConstants.xxxxx.get(la), "");
             itemizedOverlay.addOverlay(overlayItem);
         }

         mapOverlays.add(cl_itemizedOverlay);
         mapOverlays.add(itemizedOverlay);
         mapController = mapView.getController();
         mapController.animateTo(cur_loc);
         mapController.setZoom(10);
         mapView.getController().setCenter(cur_loc); 
```

这是我的代码的一部分。我应该将代码放在什么地方以及在哪里获取上述 mapView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:21:38.313

使用这个类：

```
import java.util.ArrayList;

import org.mabna.order.utils.Farsi;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Typeface;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.text.TextPaint;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class MapItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    // member variables
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    private int markerHeight;
    private int mTextSize;
    private int mTitleMargin;

    private Typeface tf;
    private boolean mDrawCircle;
    private int mRadiusInMeter = 0;

    public MapItemizedOverlay(Drawable defaultMarker, Context context,
            int textSize, int titleMargin, boolean drawCircle) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
        mTextSize = textSize;           
        markerHeight = ((BitmapDrawable) defaultMarker).getBitmap().getHeight();
        mTitleMargin = titleMargin;
        mDrawCircle = drawCircle;
    }

    // In order for the populate() method to read each OverlayItem, it will make
    // a request to createItem(int)
    // define this method to properly read from our ArrayList
    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);

        // Do stuff here when you tap, i.e. :
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();

        // return true to indicate we've taken care of it
        return true;
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView,
            boolean shadow) {
        super.draw(canvas, mapView, shadow);

        // go through all OverlayItems and draw title for each of them
        for (OverlayItem item : mOverlays) {
            /*
             * Converts latitude & longitude of this overlay item to coordinates
             * on screen. As we have called boundCenterBottom() in constructor,
             * so these coordinates will be of the bottom center position of the
             * displayed marker.
             */
            GeoPoint point = item.getPoint();
            Point markerBottomCenterCoords = new Point();
            mapView.getProjection().toPixels(point, markerBottomCenterCoords);

            /* Find the width and height of the title */
            TextPaint paintText = new TextPaint();
            Paint paintRect = new Paint();

            Rect rectText = new Rect();
            paintText.setTextSize(mTextSize);
            paintText.getTextBounds(item.getTitle(), 0, item.getTitle()
                    .length(), rectText);

            rectText.inset(-mTitleMargin, -mTitleMargin);
            rectText.offsetTo(
                    markerBottomCenterCoords.x - rectText.width() / 2,
                    markerBottomCenterCoords.y + 5);

            paintText.setTextAlign(Paint.Align.CENTER);
            paintText.setTextSize(mTextSize);
            paintText.setARGB(255, 255, 255, 255);
            // paintText.setFlags(Paint.FAKE_BOLD_TEXT_FLAG);

            paintRect.setARGB(100, 0, 0, 0);

            if (mDrawCircle && mapView != null) {
                int radius = metersToRadius(mRadiusInMeter, mapView);
                int arcWidth = (int) ((float) radius * 0.01);
                arcWidth = arcWidth == 0 ? 1 : arcWidth;

                Paint paintCircle = new Paint();
                paintCircle.setARGB(10, 0, 0, 255);

                Paint paintArc = new Paint();
                // paintArc.setColor(Color.BLUE);
                paintArc.setARGB(80, 0, 0, 255);
                paintArc.setStrokeWidth(arcWidth);
                paintArc.setAntiAlias(true);
                paintArc.setStrokeCap(Paint.Cap.ROUND);
                paintArc.setStyle(Paint.Style.STROKE);

                RectF rectArc = new RectF();
                rectArc.set(markerBottomCenterCoords.x - radius,
                        markerBottomCenterCoords.y - radius,
                        markerBottomCenterCoords.x + radius,
                        markerBottomCenterCoords.y + radius);

                canvas.drawCircle(markerBottomCenterCoords.x,
                        markerBottomCenterCoords.y, radius, paintCircle);
                canvas.drawArc(rectArc, 0, 360, false, paintArc);
            }

            if (item.getTitle().length() > 0) {
                canvas.drawRoundRect(new RectF(rectText), 2, 2, paintRect);
                canvas.drawText(item.getTitle(),
                        rectText.left + rectText.width() / 2,
                        rectText.bottom - mTitleMargin, paintText);
            }
        }
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void removeOverlay(OverlayItem overlay) {
        mOverlays.remove(overlay);
        populate();
    }

    public void clear() {
        mOverlays.clear();
        populate();
    }

    public static int metersToRadius(float meters, MapView map) {
        return (int) (map.getProjection().metersToEquatorPixels(meters));
    }

    public void setRadius(int radiusInMeter) {
        mRadiusInMeter = radiusInMeter;
    }
} 
```

# javascript - Backbone.js 中的数据完整性

> ID：14355619
> 
> 赞同：1
> 
> 时间：2013-01-16T09:57:41.003
> 
> 标签：javascript, backbone.js, model

在我的项目中，服务器发送的数据发生了变化。小的变化，一些 foo 属性变成了 foobar，但这已经在客户端造成了严重破坏，因为我没有意识到这一点。我花了很长时间才弄清楚错误来自哪里。

有什么东西（现有的或计划的）可以让主干告诉它没有收到有效的数据吗？

编辑：更准确地说，我的想法是为 BB 提供某种模型定义对象，详细说明：字段名称、字段长度、必需或可选。通用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:38:03.233

覆盖模型上的[validate 方法](http://backbonejs.org/#Model-validate)。Backbone 默认有一个空实现，你可以根据你的应用手动检查属性。

当您调用 set 或 create 创建新模型时，Backbone 会自动调用 validate。

如何使用：（来自文档）

如果出现错误，则返回除 undefined 之外的任何值/对象，否则不返回任何值/对象（未定义）。

如果检测到错误，您的模型将保持不变。

```
var Chapter = Backbone.Model.extend({
  validate: function(attrs, options) {
    if (attrs.end < attrs.start) {
      return "can't end before it starts";
    }
  }
}); 
```

# ios - iOS——一种浏览sqlite数据库的方法

> ID：14355628
> 
> 赞同：1
> 
> 时间：2013-01-16T09:58:22.593
> 
> 标签：ios, sqlite

> **可能重复：**
> [有没有好的 Core Data 浏览工具？](https://stackoverflow.com/questions/1609683/is-there-a-good-core-data-browsing-tool-out-there)

有没有办法在 iOS 上浏览 sqlite 数据库？

我使用 CoreData 将实体存储在我的一个应用程序中，并且我想浏览表以确保数据库保存我想要的内容。我正在考虑一种数据库查看器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:21:20.720

如果您在 Mac 上的模拟器中运行应用程序，则可以访问其中的文件

`/Users/username/Library/Application Support/iPhone Simulator/version/appid/Documents`

只需使用 Base 或 SQLiteManager 等任何工具打开您的数据库。

**更新：**

自 IOS 8 以来，他们将其放在不同的文件夹中：

`Library/Developer/CoreSimulator/Devices/(numbers and letters)/data/Containers/Data/Application/(numbers and letters)/Documents/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:19:07.823

我已经为 Firefox 使用了[SQLite Manager](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)插件，它在 SQLite 数据库中运行良好。

# c - C中的递归，了解递归示例

> ID：14355629
> 
> 赞同：0
> 
> 时间：2013-01-16T09:58:26.617
> 
> 标签：c, recursion

我无法理解这个例子。我无法弄清楚在某一点之后实际发生了什么。

这是代码，结果应该是4。

我可以看到它多次调用自己，但它实际上是如何得出 4 的结果的，我完全不知道。任何帮助将不胜感激。

```
#include <stdio.h>

int recursion(int i) 
{ 
  return (i>1 ? i - recursion(i/2) : 3);
} 

int main() 
{ 
  int number = 9; 
  printf("The result is %d\n", recursion(number)); 
  return 0;
} 
```

**编辑：** 非常感谢，这清除了它！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:29:39.300

这里来自代码， `recursion(1) = 3`以及`i/2`何时`i>1`，`9/2 = 4`（因为 int 作为参数）

这个递归函数的基本条件是当`i = 1` ![递归用图解释自己]](../Images/a20eabe410729e1b5a4a1da1378cd0b9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:01:56.237

我认为理解这一点的最好方法就是在调试器中单步执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:05:42.280

你可以通过代入和简化来推理这个问题。

你开始调用递归（9），让我们用 9 代替 i 并减少

```
recursion(9)
->  9 > 1 ? 9 - recursion(9/2) : 3
->  true ? 9 - recursion(4) : 3
->  9  - recursion(4) 
```

现在你做`recursion(4)`了，为了简化这个你可以重复这个过程......

```
recursion(4)
->  4 > 1 ? 4 - recursion(4/2) : 3
->  true  ? 4 - recursion(2) : 3
-> 4 - recursion(2)

recursion(2)
-> 2 > 1 ? 2 - recursion(2/2) : 3
-> true ? 2 - recursion(1) : 3
-> 2 - recursion(1)

recursion(1)
-> 1 > 1 ? ... : 3
-> false ? ... : 3
-> 3 
```

在这里，您得到了最终结果，因此将其替换回`recursion(1)`

```
2 - 3 -> -1 
```

和`recursion(2)`

```
4 - -1 -> 5 
```

和`recursion(4)`

```
9 - 5 -> 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T10:11:45.767

递归是重复自身多次直到条件为真的过程。

如果 i>1 为 false，则函数递归返回值 3，如果为 true，则递归调用。

当 i=9 时，它第一次检查 9>1 为真。因此，函数返回 9 - recursion(9/2=4)，因为 i 是 int。

然后它调用 recursion(4) 4>1 因此，返回 4 - recursion(4/2=2)

再次 2>1，返回 2 - 递归（1）

再次 1>1 为假，它返回 3 应替换为上述值，即 2-3 = -1。

然后 4 - (-1) = 5

9 - 5 = 4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T10:02:54.677

您应该查看调用是如何链接的。调试输出有助于：

```
int recursion(int i) 
{ 
   int result;
   printf( "called with i=%d\n", i );
   result = (i>1 ? i - recursion(i/2) : 3);
   printf( "call with i=%d will return %d\n", i, result );
   return result;
} 
```

基本思想是，当递归调用完成时，原始调用将暂停，直到递归调用结束。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T10:19:59.837

**递归**函数可以通过这种方式以不太紧凑的方式编写：

```
int recursion(int i) 
{ 
    if(i>1)
    {
        int j;
        j = i - recursion(i/2); // note here that the function recall itself
                                // note also that as i is integer the function
                                // will be invoked with i/2 rounded to the lower int value
        return j;
    }
    else
    {
        return 3;
    }
} 
```

希望这可以帮助...

# javascript - 在 onclick 中更改 location.hash 时，它会更改为 undefined

> ID：14355639
> 
> 赞同：1
> 
> 时间：2013-01-16T09:58:57.007
> 
> 标签：javascript, html, undefined

我有这样的代码：

```
$(e).click(function() {
    console.log(this.href);
    location.hash = this.href;
}); 
```

这`e`是一个`<li>`像这样的元素：`<li href="#about">About</li>`
`location.hash`有 onchange 监听器：

```
$(window).hashchange(function() {
    if (location.hash=="") location.hash="me";
    $(".content").spin();
    $(".content").load("http://example.com/inc/"+location.hash.substr(1), function() {
        $(this).spin(false);
    });
}); 
```

**UPD：问题不在于变量访问，因为 console.log 打印变量的正确值。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:04:56.907

href 不是 LI 的有效属性

将 data-href（或者更好的：data-hash）添加到您的 LI

```
<li data-href="somevalue">... 
```

并使用

```
$(e).click(function() {
    location.hash = $(this).data("href");
}); 
```

# python - 为什么python中子进程的数量会影响子进程的内存消耗？

> ID：14355642
> 
> 赞同：2
> 
> 时间：2013-01-16T09:59:00.810
> 
> 标签：python

我在 python 中有一个非常有趣的案例。

主进程创建N个子进程。**子流程是从multiprocessing.Process**继承的类。

现在，当子进程数为10个时，每个子进程消耗大约15M的驻留内存。但是，当我将子进程数增加到100个时，每个子进程的驻留内存消耗会跃升至50M左右！！！

任何人都可以解释这种记忆跳跃/建议如何避免它？

下面是子流程类的结构：

```
class MySubProcess(multiprocessing.Process):
    def __init__(self, sub_process_number):
        multiprocessing.Process.__init__(self, target=self.go)

        self.m_sub_process_number = sub_process_number

    def go(self):
        self.m_config = global_config
        while (True):
        .... 
```

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:06:24.863

当我尝试一个简单的例子时，每个子进程什么都不做，但`time.sleep()`我没有看到这种行为，所以我不相信这是`multiprocessing`模块固有的东西。

我最好的猜测是 的内存复制功能`fork()`，它`multiprocessing`很可能在后台使用。在 Unix 上 fork 一个新进程的语义要求将父进程的整个内存空间复制到子进程中。因此，假设您要`MySubProcess`在启动其中任何一个之前创建这些结构的列表。然后，该列表将被复制到每个子进程的地址空间中，因此当您查看每个这些进程的驻留大小时，它会显得大得多（假设您的结构占用了大量的内存）。

此外，您在启动子进程之前分配的任何其他内存都将被复制，但实例列表是我能想到的主要内容，随着您分配更多进程，它的大小会增加。根据您的代码，可能还有其他数据结构会随着进程的数量（例如工作队列）而扩展。

如果您`del`在每个孩子的上下文中不需要所有东西，您*可能会*发现它们的大小会变小，但这取决于 Python 分配器和系统内存分配器之间相当复杂的交互，所以这绝不是肯定的。从本质上讲，Python 可以保留释放的内存以供重复使用，即使 Python 解释器没有，系统分配器也可以这样做。简而言之，这可能不值得付出努力 - 有关更多信息，请参阅我的答案的结尾。

然而，这并没有看起来那么糟糕，因为 Linux（和其他现代 Unix 变体）使用所谓[的写时复制](http://en.wikipedia.org/wiki/Copy-on-write)语义来确保 的行为`fork()`不是那么低效。本质上，子进程保持对与父进程相同的内存页面的引用——只要两个进程都没有改变任何内容，内存*实际上*并没有被复制，尽管如果你将两个进程的内存使用数据相加，`ps`它将`top`是计算了两次，因为他们的每个进程的方法不够聪明，无法注意到页面的共享。这与拥有多个指向同一个基础文件的硬链接没有什么不同，如果您曾经遇到过这种情况的话。

一旦进程写入内存页面，它*就会被*复制（因此称为“写时复制”），因此将使用实际的物理内存。在这种情况下，所需的额外内存量很难预测，因为它涉及将 Python 数据结构一直映射到物理内存页面。然而，原则本身才是重要的。

您可以通过使用该实用程序显示整体系统内存使用情况并比较两种情况之间的数据来测试我的理论是否正确`free`- 如果我是对的，您会在 100 个子进程的情况下看到*一些*增加的内存，但没有那么多正如检查每个进程的内存使用情况所建议的那样。不要忘记使用第二行（即`-/+ buffers/cache`行）中的数字，因为这将消除两次测试之间文件系统缓存中的任何更改。

假设这是正确的，最好的办法是在父进程分配大量内存之前尽早尝试启动子进程。然而，除了你在这方面的最大努力之外，你可能不需要太担心它 - 即使页面在写入时被复制，它们也不会被子进程访问，因此将被换出到磁盘需要并且可能永远不会换回，因此不会对性能造成太大影响（除非您的平台没有任何交换）。

最后一点 - 在实践中，创建更多的工作进程可能没有什么意义，而不是机器上的核心，除非你使用非常专业的硬件，否则通常不超过 8 个或 16 个左右。如果你创建了太多的进程，那么你可能浪费了更多的时间来调度它们而不是你得到的好处——无论你做什么，你都无法获得比物理内核更多的并行化（尽管[超线程](http://en.wikipedia.org/wiki/Hyper-threading)会使这稍微复杂化）。

[This other SO question](https://stackoverflow.com/questions/10369219/multiprocessing-module-showing-memory-for-each-child-process-same-as-main-proces)可能会提供一些更有用的信息。

# twitter-bootstrap - 将 select2 插入 Bootstrap 下拉菜单

> ID：14355644
> 
> 赞同：0
> 
> 时间：2013-01-16T09:59:02.790
> 
> 标签：twitter-bootstrap, drop-down-menu, jquery-select2

我在尝试从 Bootstrap将[select2](http://ivaynberg.github.com/select2/)插入[下拉菜单时遇到问题。](http://twitter.github.com/bootstrap/components.html#dropdowns)标记是这样的：

```
<ul class="dropdown-menu dropdown-select-box">
    <li>
        Choose categories:
        <select id="choose-category" multiple="">
            <option></option>
            <option></option>
            <option></option>
        </select>
    </li>
</ul> 
```

我的 .dropdown-select-box 类，用于样式设置和更好的控制。我似乎无法让它发挥作用，这让我发疯并浪费了我宝贵的时间。这是我希望通过此实现的结果：

![Select2 进入 Boostrap 的下拉菜单](../Images/bef5622d0d31061886080ee6505729b0.png)

这意味着 select2-container 需要始终打开并且（以某种方式）相对于下拉菜单定位，以便下拉菜单可以缩放到 select2-container 的大小。我试图把我的想法包裹在这个问题上，但空手而归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:34:40.420

我认为引导下拉 js 和选择插件 js 相互冲突......

尝试删除引导下拉 js 并运行代码...

```
 <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script> //Remove this...
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
    <script src="assets/js/bootstrap-affix.js"></script> 
```

从您的模板中删除所有无用的js...

# java - 从集合中获取第一个（也是唯一的值）

> ID：14355651
> 
> 赞同：26
> 
> 时间：2013-01-16T09:59:09.093
> 
> 标签：java, collections

> **可能重复：**
> [Java：从集合中获取第一项](https://stackoverflow.com/questions/1671378/java-get-first-item-from-a-collection)

在 Java 中，我经常遇到一个包含一个元素的集合，我需要检索它。因为集合不保证顺序一致，没有`first()`or`get(int index)`方法，所以我需要使用比较难看的东西，比如：

```
public Integer sillyExample(Collection<Integer> collection){
    if(collection.size()==1){
        return collection.iterator().next();
    }
    return someCodeToDecideBetweenElements(collection);
} 
```

*那么*，如何取出唯一的元素呢？我不敢相信没有更好的方法...

请注意，我知道没有“第一”的概念，当我知道其中只有一个元素时，我只是想避免构建迭代器。

编辑：彼得伍斯特在这里发现了一个非常相似的[问题](https://stackoverflow.com/questions/1671378/java-get-first-item-from-a-collection)。我将其保持打开状态，因为我不是试图获取“第一个”元素，这意味着一致的顺序，而是在检查它确实是唯一元素之后的“唯一”元素。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T10:10:15.457

最简单的答案是你做了什么！

```
first = collection.iterator().next(); 
```

请注意， iterator() 是一种方法，这是一个错字吗？

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T10:11:24.707

你看过谷歌番石榴吗？如果您知道该集合只有一个元素**，**则可以使用`Iterables.getOnlyElement(collectionWithOneElement);`，但如果您不知道但仍只想要您可以使用的第一个元素`getFirst(Iterable, T default)`。如果它为空，它还将返回您定义的默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T10:33:26.220

就这么简单，

```
 Iterator<Integer> itr = collection.iterator(); 
 Object firstObj = itr.hasNext()? itr.next() : null; 
```

# c - fnctl : invalid argument in C

> ID：14355652
> 
> 赞同：3
> 
> 时间：2013-01-16T09:59:11.883
> 
> 标签：c, file-locking, inter-process-communicat

I m working with File Locking in interprocess Communication , the following code bugs me... when run through terminal in Macintosh

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <errno.h>
    #include <fcntl.h>
    #include <unistd.h>

  int main(int argc , char *argv[])
  {
   // l_type , l_whence , l_start , l_len , l_pid
    struct flock f1 = {F_WRLCK , SEEK_SET , 0 , 0 , 0};
    int fd;

  f1.l_pid = getpid() ;

// if command line arguments  , then assign a Read Lock
if (argc > 1)
{
    f1.l_type = F_RDLCK ;
}

if ((fd = open("lockdemo.c", O_RDWR)) == -1)
{
    perror("open");
    exit(1);
}

printf("Press <RETURN> to try to get lock");
getchar() ;

printf("trying to get lock...");

if (fcntl(fd, F_SETLKW , &f1)  == -1)
{
    perror("fcntl");
    exit(1);
}

printf("got lock !\n");
printf("Press <RETURN> to release lock:");
getchar();

f1.l_type = F_UNLCK ; //set to unlock same region

if (fcntl(fd, F_SETLK , &f1) == -1)
{
    perror("fcntl");
    exit(1);
}

printf("Unlocked .. \n");
close(fd);

return 0;
 } 
```

But the following error appears : fnctl : invalid argument

plz help me in this question...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:26:20.460

On MacOs, the members of `struct flock` have a different order than in Linux.

to make your code portable you should assign the fields by name, and not assume a particular order.

From the MacOS Man page for fcntl:

```
 struct flock {
             off_t       l_start;    /* starting offset */
             off_t       l_len;      /* len = 0 means until end of file */
             pid_t       l_pid;      /* lock owner */
             short       l_type;     /* lock type: read/write, etc. */
             short       l_whence;   /* type of l_start */
         }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:17:32.133

I tried your code and it works fine without any modification on Linux Min 12 64 bit.

```
 gcc lock.c 
-Compaq-6200-Pro-MT-PC ~/Dropbox/Misc $ ./a.out 1
Press <RETURN> to try to get lock
trying to get lock...got lock !
Press <RETURN> to release lock:
Unlocked .. 
-Compaq-6200-Pro-MT-PC ~/Dropbox/Misc $ ./a.out
Press <RETURN> to try to get lock
trying to get lock...got lock !
Press <RETURN> to release lock:
Unlocked .. 
```

Of course i created a lockdemo.c file in the same folder.

Seems like your locking api on mac might have issues.

# iphone - 在 viewDidAppear 方法中访问用户的位置

> ID：14355654
> 
> 赞同：0
> 
> 时间：2013-01-16T09:59:21.797
> 
> 标签：iphone, ios, objective-c, core-location, locationmanager

我有两个不同`UIViewControllers`的需要访问用户的`Latitude`和`Longitude`. 我只需要在视图出现时访问该位置一次。我目前将 存储`LocationManager`在应用程序委托中，但该`viewDidAppear:`方法加载速度太快，无法找到用户的位置。有谁知道解决这个问题的最佳方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:28:10.520

我创建了一个共享的`LocationManager`. 然后`startUpdatingLocation`和`stopUpdatingLocation`之后你得到一个回调。

这是我使用的代码：

在您`appDelegate`添加以下方法：

```
+ (NHAppDelegate *)sharedDelegate
{
    return (NHAppDelegate *)[[UIApplication sharedApplication] delegate];
} 
```

并使 LocationManager 可用：

```
@property (nonatomic, strong) CLLocationManager *locationManager; 
```

然后在你的 UIViewController 你可以这样做：

```
[NHAppDelegate sharedDelegate].locationManager.delegate = self;
[[NHAppDelegate sharedDelegate].locationManager startUpdatingLocation]; 
```

然后我使用以下代码获取位置并将其显示在 UILabel 中。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [self loadPositionWithLocation:newLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *location = [locations objectAtIndex:0];
    [self loadPositionWithLocation:location];
}

-(void)loadPositionWithLocation:(CLLocation *)newLocation
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:newLocation completionHandler:
     ^(NSArray* placemarks, NSError* error){
         if ([placemarks count] > 0)
         {
             CLPlacemark *placemark = [placemarks objectAtIndex:0];

             NSString *thoroughfare = placemark.thoroughfare;
             NSString *subThoroughfare = placemark.subThoroughfare;
             NSString *postalCode = placemark.postalCode;
             NSString *locality = placemark.locality;

             if( thoroughfare == nil )      {  thoroughfare = @"";     }
             if( subThoroughfare == nil )   {  subThoroughfare = @"";  }
             if( postalCode == nil )        {  postalCode = @"";       }
             if( locality == nil )          {  locality = @"";         }

             NSString *addressString = [NSString stringWithFormat:@"%@ %@\n%@ %@", thoroughfare, subThoroughfare, postalCode, locality];

             self.positionLabel.text = addressString;

             [[NHAppDelegate sharedDelegate].locationManager stopUpdatingLocation];
         }
     }];
} 
```

重要的是最后一行`stopUpdatingLocation`，所以`LocationManager`只有一次被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:35:25.763

`NSNotification`听起来像是s 有用的典型案例。我相信 CoreLocation 不会发送通知。在这种情况下，你必须自己做。在 AppDelegate.h 中，您定义：

```
const string* LocationUpdateNotification  = @"LocationUpdateNotification"; 
```

然后在 AppDelegate.m 中的 CoreLocation 委托方法中执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^
{
    [[NSNotificationCenter defaultCenter] postNofificationName:LocationUpdateNotification 
                                                        object:self];
}); 
```

最后在您的每个视图控制器中：

```
 [[NSNotificationCenter defaultCenter] addObserverForName:MyNotification
                                                      object:nil
                                                       queue:[NSOperationQueue mainQueue]
                                                  usingBlock:^(NSNotification* note)
    {
        // YOUR LOCATION UPDATE CODE.
    }]; 
```

# javascript - jQuery.parseJSON 单引号与双引号

> ID：14355655
> 
> 赞同：76
> 
> 时间：2013-01-16T09:59:23.773
> 
> 标签：javascript, jquery, json

这实际上有什么区别？

这工作正常：

```
var obj1 = jQuery.parseJSON('{"orderedList": "true"}');
document.write("obj1 "+ obj1.orderedList ); 
```

但以下不起作用：

```
var obj2 = jQuery.parseJSON("{'orderedList': 'true'}");
document.write("obj2 "+ obj2.orderedList ); 
```

这是为什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-16T10:03:34.120

这是因为双引号被认为是标准的，而单引号不是。这并不是 JQuery 所特有的，而是关于[JSON 标准](http://www.json.org/)的。因此，无论 JS 工具包如何，您都应该期待相同的行为。

> 值可以是双引号中的字符串、数字、true 或 false 或 null，也可以是对象或数组。这些结构可以嵌套。

**更新**

或者它可能是[JSON 响应中 jQuery 单引号的副本](https://stackoverflow.com/questions/2275359/jquery-single-quote-in-json-response)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-16T10:00:44.680

根据 API 文档，双引号被认为是有效的 JSON，单引号不是。

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-02T09:19:08.030

访问[www.Jsonlint.com](http://jsonlint.com)网站并检查您的单引号 json 字符串，您会发现它不是有效的 json 字符串。因为双引号 json 是标准的 json 格式。

jsonlint.com 是一个检查 json 格式正确与否的网站。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-11T05:06:37.873

您可以使用替换来解决此问题。这对我有用。

```
var str = "{'orderedList': 'true'}";

str = str.replace(/\'/g, '\"');

JSON.parse(str); 
```

# android - Play Store LicenseCheck 结果错误

> ID：14355657
> 
> 赞同：1
> 
> 时间：2013-01-16T09:59:36.083
> 
> 标签：android, google-play, android-lvl

我为 Google Play 商店制作了一个新应用，并尝试在其中使用 LVL。该应用程序已上传到我的开发者控制台，但尚未发布。我将我的 gmail 帐户添加到了测试帐户，它似乎可以工作，我从谷歌服务器（LICENSED 或 NOT_LICENSED）获得了正确的答案。但是，当我使用不在我的测试帐户列表中的其他 Google 帐户尝试此操作时，我总是会收到 LICENSED 消息。我期待答案 NOT_LICENSED。

有没有人经历过类似的事情或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:07:29.327

请参阅[许可证参考](http://developer.android.com/intl/es/google/play/licensing/licensing-reference.html#server-response-codes)：

> LICENSED 应用程序被许可给用户。用户已购买应用程序**或应用程序仅作为草稿存在**。

# mysql - EntityFramework 6 Alpha 2 & MySQL 连接器/NET 6.6.4

> ID：14355659
> 
> 赞同：3
> 
> 时间：2013-01-16T09:59:39.237
> 
> 标签：mysql, entity-framework, mysql-connector, entity-framework-6

6.6.4 MySQL .NET 连接器显然支持 EF6。我已从 EF5 和 .NET 4 升级到 EF6 alpha2 和 .NET 4.5。自升级以来，我重新创建了 ADO.NET 实体数据模型。

在对数据库执行任何操作时，它会抛出一条异常消息：

> ItemModel.ssdl(2,2)：错误 0152：没有为“MySql.Data.MySqlClient”ADO.NET 提供程序找到实体框架提供程序。确保提供程序已在应用程序配置文件的“entityFramework”部分注册。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

目前我的 app.config 文件包含；

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
</entityFramework>
<connectionStrings>
    <add name="ItemEntities" connectionString="metadata=res://*/ItemModel.csdl|res://*/ItemModel.ssdl|res://*/ItemModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;user id=user;password=password;persist security info=True;database=Item_dbo&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

我的 app.config 中是否存在我合法缺少的配置项，或者我只是使用了一个版本的 MySQL 连接器和 EF alpha，它们根本不兼容？

我的意图是当这在 Windows 上被证明是成功的时，让它在单声道 3.0.3 下运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:15:57.573

简单地将它添加到您的 web.config

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.4.0" />
    </DbProviderFactories>
  </system.data>

  <entityFramework>
    <providers>
      <provider invariantName="MySql.Data.MySqlClient" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.4.0" >
      </provider>
    </providers>
  </entityFramework> 
```

但我认为您不能将 6.6.4 与 EF6 一起使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T22:45:12.973

MySql Connector/NET 6.6 不支持仅 EF4 的 EF6，对于 EF6 使用 Connector/NET 版本 6.8.3

有关配置的详细信息，请参见： [http ://dev.mysql.com/doc/connector-net/en/connector-net-entityframework60.html](http://dev.mysql.com/doc/connector-net/en/connector-net-entityframework60.html)

# database - 检查 oracle 脚本是否有效并且可以在另一个数据库上运行

> ID：14355660
> 
> 赞同：1
> 
> 时间：2013-01-16T09:59:42.010
> 
> 标签：database, oracle, toad, database-scripts

我想知道是否有一个工具可以让我检查 oracle 脚本是否可以在另一个数据库上正常运行（如果我的来自 DEV db 的脚本在 QA db 上运行正常）。我不想在那里运行/执行任何东西（我没有权限），我只想验证一旦有人运行脚本，它将执行没有错误。这可能吗？

我使用 Toad for Oracle 作为我当前的 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:13:15.263

The usual approach is to take a copy of the production database into a test database and apply the script on the test database.

If you don't have a spare test database, you can recreate the DEV db from production (at least the structure) and run the test on your DEV database.

# jakarta-ee - 在 Java EE 应用程序中设置类加载顺序以首选应用程序类有什么缺点

> ID：14355668
> 
> 赞同：4
> 
> 时间：2013-01-16T10:00:08.423
> 
> 标签：jakarta-ee, classloader, nosuchmethoderror, websphere-8

在我的 WebSphere 8 应用服务器上，默认的类加载顺序是**parent_first**（尝试从应用服务器类加载器加载，然后才从 EAR 类加载器加载）。
这会在我的应用程序对 Apache 的 HttpClient 的使用和 WebSphere 的内部使用之间产生冲突。
我正在考虑将加载顺序切换到**parent_last**（ WebLogic 中*的 prefer-web-inf-classes*）。

**将 Java EE 应用程序类加载顺序翻转到 parent_last 时需要注意哪些陷阱？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:49:40.783

应该没有。

这`PARENT_LAST`允许您的应用程序使用类和 jar 进行分发，否则这些类和 jar 会与 WebSphere 的冲突。`ClassClassException`当两个不同的不兼容类加载器加载 WebSphere AS 和您的应用程序中的类时，将使用该设置。

[WebSphere Application Server 8.0 信息中心的类加载器中描述了类](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/crun_classload.html)`PARENT_FIRST`加载`PARENT_LAST`器模式。

人们倾向于将 jar 包捆绑在应用程序中，这会使部署时间更长、内存消耗更高并且（库）管理更加困难。

对于开发人员来说，将所有内容保存在应用程序中显然更容易，因此他们不必描述管理员必须设置的共享库（或 OSGi 存储库）。

`PARENT_LAST`除非我们假设在应用程序中分发 jar 是一件好事，否则我想不出有帮助的情况（我会争论这一点）。

应用程序中的 jar 越少越好：

1.  当通过共享库或 OSGi 存储库修复问题时，应用程序可以从升级其 jar 中受益，这将简化其维护
2.  应用程序可以共享库，从而降低内存期望并提高可重用性（显然部署变得更快）

可能有更多的理由不在应用程序中捆绑 jar，这会进一步减少`PARENT_LAST`配置设置。

坚持下去，`PARENT_FIRST`直到他们告诉你他们有理由改变，当它发生时你告诉他们答案;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:41:38.303

从 [了解 IBM Software Developers Kit (SDK) for Java > 类加载](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.aix.70.doc/diag/understanding/cl_delegation.html)：

> [委托模型] 通过假定与核心 API 的一部分相同的名称来防止来自不太受信任的来源的代码替换受信任的核心 API 类。

因此，`PARENT_LAST`似乎存在应用程序由于版本不兼容而必须覆盖基类的情况，但这样做也可能会削弱安全性。

# css - ie7中的分词

> ID：14355669
> 
> 赞同：0
> 
> 时间：2013-01-16T10:00:11.577
> 
> 标签：css, internet-explorer-7, css-tables

我需要在以下结构中允许分词/自动换行：

```
<ul>
    <li><strong>Forename</strong><span>forename value</span></li>
    <li><strong>Forename</strong><span>forename value</span></li>
    <li><strong>Forename</strong><span>forename value</span></li>
<ul> 
```

我无法将宽度固定为跨度或 li，因为 li 的数量可能会有所不同。使 li 显示为**表格单元**有助于对跨度内容进行分词，如图所示。

![在此处输入图像描述](../Images/b3fc0c504065c8f9f8374ec5d1d921ba.png)

*   **有没有办法让 IE7 表现/理解 table-cell ？**

**编辑 ：**

我最初的问题是我正在尝试实现如下图所示的显示，但是如果将完整的长字符串作为输入而不是破坏单词，则内容会在右侧被剪切。

1.  我想知道为什么**word-break:break-all**不会生效，除非将 span 设为 block 或 inline-block ？

2.  即使将 span 设置为 inline-block，下一个问题是如何使后续内容在连续线上流动？

附图：http : [//i.stack.imgur.com/1gB92.png](https://i.stack.imgur.com/1gB92.png)

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:53:35.123

你可以试试我[在 JSBin 中的演示](http://jsbin.com/izaxen/2/edit)

您可以检查`white-space`每个 css 的属性`span`以确保值`white-space`is `normal`， not `nowrap`- 防止换行；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:17:00.180

您的意思是您拥有的三个文本块中的每一个都可能不超过 3 行文本？如果是这样：

```
<li style="height:100%;">
    <div style="width:100%;height:100%;overflow:hidden;">
         <strong>Forename</strong>
         <span>forename value</span>
    </div>
</li> 
```

这样，可能存在的第四个文本行将不可见。

我不再支持 IE7，因为创建一个与之兼容的网站需要花费大量时间，而且我在一些统计数据中看到 IE7 的使用率约为 5%。

如果访问者使用 ie7 并显示他们使用自 2008 年底以来不再更新的浏览器的消息，我只会弹出一个窗口，这使他们容易受到攻击。并建议他们更新到较新的版本。如果我们都这样做，我们很快就会摆脱 IE7。

# c# - 如何通过 WPF 和 C# 将文件保存到服务器中的共享文件夹

> ID：14355670
> 
> 赞同：2
> 
> 时间：2013-01-16T10:00:15.320
> 
> 标签：c#, .net, wpf, file

> **可能重复：**
> [在网络共享驱动器上复制文件](https://stackoverflow.com/questions/1432213/copy-file-on-a-network-shared-drive)
> [从 C# 访问远程目录](https://stackoverflow.com/questions/5433570/access-a-remote-directory-from-c-sharp)
> [如何在服务器路径写入文件期间传递凭据？](https://stackoverflow.com/questions/10415980/how-to-pass-credentials-during-writting-file-at-server-path)

如何从我的 WPF 和 C# 应用程序将文件保存到服务器的共享文件夹中。我拥有服务器的 IP 和凭据，并已授予对共享文件夹的读/写权限。

```
AppDomain.CurrentDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);
            WindowsIdentity identity = new WindowsIdentity(username, password);
            WindowsImpersonationContext context = identity.Impersonate();

            try
            {
                File.Copy(@"d:\MyFile.txt", @"\\1.2.3.4\CopyData\Myfile.txt", true);
            }
            catch (Exception)
            {                    
                context.Undo();
            } 
```

得到以下异常：

**“提供的名称不是格式正确的帐户名称。”**

# c++ - 检索函数调用图

> ID：14355673
> 
> 赞同：3
> 
> 时间：2013-01-16T10:00:28.673
> 
> 标签：c++, function, pointers, stack

> **可能重复：**
> [获取代码图形函数调用图的工具](https://stackoverflow.com/questions/517589/tools-to-get-a-pictorial-function-call-graph-of-code)

我很久以前在 dll 中（在 Windows 上）写了一个 C++ 函数......有些人写了 api ，使用函数指针调用我的函数，有些人只是调用它..

我想知道谁是我的函数的调用者（代码路径）。我想分析调用我函数的每个 api 的堆栈。

有没有办法我可以很容易地做到这一点。我的意思是当我查找调用者（代码路径）时，由于函数指针的方式，我基本上必须手动做很多工作。因此，如果有任何相同的开源解决方案，请分享..

我不想使用断点或自己编写函数来显示堆栈。原因是因为这有点像如果调用路径被击中，它会显示在我的结果中..但是如果调用路径没有被击中，那会怎样？所以我会知道只有当函数 X 被调用时才会调用我的函数 X ；但并非总是如此

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:18:20.417

你没有说你需要哪个操作系统，如果是**Linux**，你有@Magnus 的答案，如果是**Windows**，你可以阅读这个。

在 C++ 中获取调用堆栈绝非易事。您不需要太多代码来获取调用堆栈作为内存地址，但是将它们映射到函数名称可能非常棘手（因为您必须在每个模块中的每个地址解析函数）。

幸运的是，有一个 Windows 函数可以做到这一点：[Debug Help Library](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679309%28v=vs.85%29.aspx)中的[StackWalk64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650%28v=vs.85%29.aspx)（不要介意后缀，它适用于 32 位和 64 位）。在那里，您可以找到在每个已知平台中解析完整堆栈所需的所有函数（使用调试信息（如果存在）来解析和取消修饰函数名称）。`-64`

您可以阅读[CodeGuru](http://www.codeguru.com/cpp/w-p/system/threading/article.php/c10317/Walking-the-Callstack.htm)上的这篇文章以获取完整的工作示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T10:03:08.747

如果您主要关心的是在运行时查找函数的所有调用者，您可以查看 callgrind 或 cachegrind 作为 valgrind 套件的一部分。有一些 GUI 工具可以可视化连接，它对于许多其他问题也很有用。

见这里：http: [//valgrind.org/](http://valgrind.org/)

编辑：更准确地说，这个工具：http: [//valgrind.org/info/tools.html#callgrind](http://valgrind.org/info/tools.html#callgrind)

# javascript - javascript 类对象属性作为回调函数

> ID：14355679
> 
> 赞同：0
> 
> 时间：2013-01-16T10:00:47.130
> 
> 标签：javascript, class, object, properties, callback

我正在编写一些 javascript 类代码，它将接受“步骤”对象的数组，并将执行步骤导航。

我打算做的是，每当调用 Next() 方法时，它应该在进行下一步之前调用一个回调函数。

伪码

```
var mySteps = {[1,"Step1","javascriptCallbackStep1"],[2,"Step2","javascriptCallbackStep2"]};
var StepsManager.Next = function() {
  var step = getcurrentStep();
  if(step.javascriptCallbackStep1())
      //go next
} 
```

这个 javascriptCallbackStep1 没有被调用，任何关于这个小细节的帮助将不胜感激。

谢谢，

**[更新：答案]** 我想我没有正确地问它。

我试图做的是将函数名称作为字符串传递给 javascript 类属性，并期望它被调用。

```
passedValue = "MyFunctionName";
Class.Validate = passedValue; 
```

然后最后调用它正在尝试如下所示

```
Class.Validate(); 
```

当然，它不像在 Class.Validate 中那样工作，有字符串，并且没有将其视为函数而不是字符串的规范。

所以我成功地尝试了以下

```
Class.Validate = function () { return window[passedValue](); }; 
```

有效。无论如何谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:08:32.870

怎么样：

```
var mySteps = {
    [1,"Step1", javascriptCallbackStep1 ],
    [2,"Step2", javascriptCallbackStep2 ]
};

var StepsManager.Next = function() {
    var step = getcurrentStep();

    if(step[2]())
    //go next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:09:07.860

你`step`是一个数组，没有`javascriptCallbackStep1`方法。试试这个：

```
var mySteps = {
    {id:1,name:"Step1",callback:javascriptCallbackStep1},
    {id:2,name:"Step2",callback:javascriptCallbackStep2}
};
var StepsManager.Next = function() {
  var step = getcurrentStep();
  if(step.callback && step.callback())
      //go next
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:52:35.467

我想我没有正确地问它。

我试图做的是将函数名称作为字符串传递给 javascript 类属性，并期望它被调用。

```
passedValue = "MyFunctionName";
Class.Validate = passedValue; 
```

然后最后调用它正在尝试如下所示

```
Class.Validate(); 
```

当然，它不像在 Class.Validate 中那样工作，有字符串，并且没有将其视为函数而不是字符串的规范。

所以我成功地尝试了以下

```
Class.Validate = function () { return window[jsValidationCallBack](); }; 
```

有效。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:20:24.473

Javascript 需要引用一个函数来执行它。传递函数本身或执行@paul 建议的操作是编写可预测/可靠运行的代码的最可靠方法。

您不应该将函数名称作为字符串传递，但要知道您可以：

```
function someFunction(name) { return "hello " + name; }
var fn = window["someFunction"]; 
console.log(fn("test")) 
```

*将窗口*更改为函数所在的命名空间

# c# - Windows Phone 的 bcrypt 实现

> ID：14355681
> 
> 赞同：1
> 
> 时间：2013-01-16T10:00:47.783
> 
> 标签：c#, windows-phone-7, cryptography, windows-phone, bcrypt

我正在寻找 Windows Phone 的 bcrypt 算法的实现。我已经找到 bcrypt.net 库，在[其他 stackoverflow 问题](https://stackoverflow.com/questions/873403/net-implementation-of-bcrypt)中推荐。不幸的是，它似乎没有为 windows phone 做好准备。下载源代码仍然无济于事 - silvelright 和 .net 之间的差异很大。

那么，您知道将在 Windows Phone 上运行的任何其他 bcrypt 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:19:04.317

[BCrypt 实现在我们的SecureBlackbox](http://www.eldos.com/sbb/net-pki.php)产品版本 10 中可用，该产品可用于 Windows Phone 7 Mango 和 Windows Phone 8。

# django - 如何在管理员中使用一些数据初始化新条目？

> ID：14355682
> 
> 赞同：0
> 
> 时间：2013-01-16T10:00:48.143
> 
> 标签：django, django-models, django-admin

我有一个模型：

```
class MyModel(models.Model):
    name = [...]
    surname = [...]
    symbol = models.CharField(unique=True)
    [...] 
```

当用户在管理面板中单击“新建”时，我想在符号字段中自动生成一些数据。例如：

```
def generate_symbol():
    last_symbol = MyModel.objects.all().order_by('symbol')[0]
    return "%d" % (last_symbol + 1) 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:22:01.000

覆盖[ModelAdmin.get_form()](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form)，并使用[动态初始值](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)。

# java - 更新 ACL 时 JdbcMutableAclService + HSQLDB = BadSqlGrammarException

> ID：14355683
> 
> 赞同：0
> 
> 时间：2013-01-16T10:00:51.700
> 
> 标签：java, spring, spring-security, hsqldb

我将 Spring ACL 与 MySQL 一起使用，它工作正常。但是，当我在集成测试中使用 HSQLDB 引擎时，当我调用`aclService.updateAcl(myAcl)`它时会引发以下异常：

```
Caused by: org.springframework.jdbc.BadSqlGrammarException: 
  PreparedStatementCallback; bad SQL grammar 
  [insert into acl_entry (acl_object_identity, ace_order, sid, mask, granting,
  audit_success, audit_failure)values (?, ?, ?, ?, ?, ?, ?)]; nested exception is
  java.sql.SQLException: statement is not in batch mode
...
java.sql.SQLException: statement is not in batch mode
...
org.hsqldb.HsqlException: statement is not in batch mode 
```

整个代码片段是：

```
ObjectIdentity oi = new ObjectIdentityImpl(domainObject);
MutableAcl acl = aclService.createAcl(oi);
acl.setOwner(new PrincipalSid(SYSTEM_PRINCIPAL_SID));
if (parentObject != null) {
    Acl parent = aclService.readAclById(new ObjectIdentityImpl(parentObject));
    acl.setParent(parent);
}
aclService.updateAcl(acl); 
```

该`aclService`字段是类的实例`JdbcMutableAclService`。请注意，在 MySQL 上一切正常。

春季 3.1.2.RELEASE。

**编辑：** 实际上只有在`acl.getEntries()`返回空列表时才会引发异常（因为刚刚创建了 ACL - 它不包含 ACE）。我通过扩展默认实现并通过调用空列表`JdbcMutableAclService`覆盖`updateAcl()`导致问题的方法来解决问题。`createEntries()`我仍然不知道这个问题的真正原因，但我设法让它工作。这是我的快速解决方案：

```
@Override
public MutableAcl updateAcl(MutableAcl acl) throws NotFoundException {
    if (acl.getEntries().size() > 0) {
        return super.updateAcl(acl);
    }

    Assert.notNull(acl.getId(), "Object Identity doesn't provide an identifier");

    // Change the mutable columns in acl_object_identity
    updateObjectIdentity(acl);

    // Retrieve the ACL via superclass (ensures cache registration, proper retrieval etc)
    return (MutableAcl)super.readAclById(acl.getObjectIdentity());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:52:43.017

根据我的一般经验（老实说，我从未尝试过将 Spring ACL 与 HSQLDB 一起使用），根据[这一点](http://sourceforge.net/projects/hsqldb/forums/forum/73673/topic/4580493)，当 PreparedStatement 与 HSQLDB 一起使用时，必须添加批处理。因此，我猜您无法在 HSQLDB 上测试 Spring ACL。

# mysql - 如何创建从不同服务器和数据库读取数据的 MySQL 视图？

> ID：14355684
> 
> 赞同：1
> 
> 时间：2013-01-16T10:00:54.413
> 
> 标签：mysql

我有一个表 test1，它存储在主机 server_A 上的 MySQL 数据库 dbtest 中。我想在主机 server_B 上的数据库 MySQL test2 上创建一个视图 V。我想将表 test2 中的数据读取到视图 V 中。并且......我不允许使用复制。MySQL 甚至可以从另一个 MySQL 服务器读取数据吗？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:07:19.717

实现此行为的一种可能方法是使用具有*FEDERATED*存储引擎的表（与 MyISAM、InnoDB 相对）。

这种存储本质上是一个代理。假设您在主机“ *remote_host* ”上的数据库“ *remote_db ”上有一个表“* *remote_table* ”。如果您想使用该表，就好像它是主机“ *local_host ”上的数据库“* *local_db* ”上的本地表一样，您可以使用*FEDERATED存储引擎在“* *local_db* ”上设置一个新表“ *local_table* ” ，并将其指向' *remote_host.remote_db* ' 上的' *remote_table* '。它将充当虚拟代理表，通过 MySQL 客户端 API 将语句转发到远程表并返回结果。

 ***设置和使用*FEDERATED*表非常容易。

在 remote_db 上，您不需要做任何特别的事情，除了可能出于安全原因为此表创建一个具有有限权限的专用用户。

在 local_db 上，创建一个镜像 remote_table 的新表：

```
CREATE TABLE federated_table (
    [column definitions go here]
)
ENGINE=FEDERATED
CONNECTION='mysql://remote_user@remote_host:9306/remote_db/remote_table'; 
```

最后两行做了所有的魔法 - 他们使这个表充当远程表的代理，`CONNECTION`在行中指定。

但是，有一些问题 - 没有事务，没有查询缓存（在 local_host 服务器上），大批量插入的性能较慢，......

参考资料： [MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/federated-storage-engine.html)***

# apache-flex - 是否可以为不同的字符集应用不同的未嵌入字体？

> ID：14355685
> 
> 赞同：0
> 
> 时间：2013-01-16T10:00:55.863
> 
> 标签：apache-flex, localization, fonts, flex4

我需要为不同的字符集应用不同的系统字体，如 SimSun 和 Calibri，例如，A、B、C...和承、认...
我有这个问题，因为象形文字在 Calibri 中不可读，但英文字母看起来SimSun中的丑陋。而且我希望我的应用程序在两种语言中看起来都很漂亮。那么有人知道我怎么能弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:19:16.410

一种方法是根据当前语言环境（这将确定需要哪些字符集）动态加载具有 CSS 样式的不同嵌入字体。

首先创建嵌入的字体。

英文.css

```
@font-face {
        fontFamily: Calibri;
        fontStyle: normal;
        fontWeight: normal;
        ...
}

Application
{
        font-family: Calibri;
} 
```

其他.css

```
@font-face {
    font-family:SimSun;
    ... 
}

Application {
    font-family: SimSun
} 
```

然后根据您的语言环境，选择要加载的文件。声明了 CSS，以便将字体应用于整个应用程序，因此您只需要在一个地方执行此操作，可能在 application 上`preInitialize`。

应用程序.mxml

```
loadLocaleFont() {
    var cssFileToLoad = getLocaleCssFile();
    var styleEvent:IEventDispatcher = StyleManager.loadStyleDeclarations(cssFileToLoad);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:05:25.977

**您可以在自定义FontManagement 类**中实现开关。如果您的主要字体不支持某种语言，请恢复为另一种字体或使用系统字体（客户端默认）。使用类作为格式化对象的集中`Label`点`TextField`。

或者，您可以尝试将字体嵌入 css`class`并将`style`名称分配给您的`Label`或`TextField`对象。两者都应该工作。

```
var params:Object = {color:0xffffff , size:12, supported:false , etc...};
var tf:TextField= FontManagement.formatTextField(tf , params );

public class FontManagement
{
    public static function formatTextField( textfield:TextField , params:Object ):TextField
    {
        if( params.supported )
           tf.embedFonts = true;
        else
           tf.embedFonts = false;

        return textfield;
    }
} 
```

# objective-c - 调整 iCarousel

> ID：14355686
> 
> 赞同：1
> 
> 时间：2013-01-16T10:01:13.227
> 
> 标签：objective-c, ios5

我正在尝试调整 iCarousel 以实现此轮播：

![在此处输入图像描述](../Images/f678c4a1f58ce6d6b0ac41c38114c4f2.png)

我正在使用 iCarousel：[https ://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

这是我目前的工作：

![在此处输入图像描述](../Images/a882d478afd1b0b5e90d947a216645c5.png)

所以我现在需要做的是改变轮播视角并放大中心项目。我有点迷茫，发现这篇文章与同一问题有关：

[iPhone - 轮播](https://stackoverflow.com/questions/12246237/iphone-carousel)

所以我以这种方式修改了 iCarousel 类：

```
- (CATransform3D)transformForItemView:(UIView *)view withOffset:(CGFloat)offset
{   
    //set up base transform
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = _perspective;
    transform = CATransform3DTranslate(transform, -_viewpointOffset.width, -_viewpointOffset.height, 0.0f);

    //perform transform
    switch (_type)
    {
        case iCarouselTypeCustom:
        {
            if ([_delegate respondsToSelector:@selector(carousel:itemTransformForOffset:baseTransform:)])
            {
                return [_delegate carousel:self itemTransformForOffset:offset baseTransform:transform];
            }

            //else, fall through to linear transform
        }
        case iCarouselTypeLinear:
        {
            CGFloat spacing = [self valueForOption:iCarouselOptionSpacing withDefault:1.0f];
            if (_vertical)
            {
                return CATransform3DTranslate(transform, 0.0f, offset * _itemWidth * spacing, 0.0f);
            }
            else
            {
                return CATransform3DTranslate(transform, offset * _itemWidth * spacing, 0.0f, 0.0f);
            }
        }
        case iCarouselTypeRotary:
        {
            CGFloat count = [self circularCarouselItemCount];
            CGFloat spacing = [self valueForOption:iCarouselOptionSpacing withDefault:1.0f];
            CGFloat arc = [self valueForOption:iCarouselOptionArc withDefault:M_PI * 2.0f];
            CGFloat radius = [self valueForOption:iCarouselOptionRadius withDefault:fmaxf(_itemWidth * spacing / 2.0f, _itemWidth * spacing / 2.0f / tanf(arc/2.0f/count))];
            CGFloat angle = [self valueForOption:iCarouselOptionAngle withDefault:offset / count * arc];

            if (_type == iCarouselTypeInvertedRotary)
            {
                radius = -radius;
                angle = -angle;
            }

            if (_vertical)
            {
                return CATransform3DTranslate(transform, 0.0f, radius * sin(angle), radius * cos(angle) - radius);
            }
            else
            {
                float MAX_TILT_VALUE = 3.0f;
                float tilt = MAX_TILT_VALUE * cos(angle); // greater angle means greater vertical offset
                return CATransform3DTranslate(transform, radius * sin(angle), tilt, radius * cos(angle) - radius);
            }
        } 
```

顺便说一句，我正在使用 iCarouselTypeRotary。我在没有运气的情况下调整了所有值。我将感谢您的帮助，我喜欢图形编程，这对我来说是新的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:01:39.033

以下是如何使效果接近您想要达到的效果：

```
 case iCarouselTypeInvertedRotary:
    {
        ...
        //-- you might need to multiply radius by a certain factor to make the carousel appear denser:
        CGFloat radius = 0.35 * [self valueForOption:iCarouselOptionRadius withDefault:fmaxf(_itemWidth * spacing / 2.0f, _itemWidth * spacing / 2.0f / tanf(arc/2.0f/count))];

        ...

        else
        {

            //-- for the not inverted case, you need to add
            //-- an y-axis translation factor to add depth-tilting of the carousel plane
            //-- + a factor to increase depth-scaling effect:

            return CATransform3DTranslate(transform,
                            radius * sin(angle),
                            0.5 * radius * cos(angle),
                            2.0 * (radius * cos(angle) - radius));
        }
    } 
```

我使用了您可能需要调整以获得正确效果的示例值。

顺便说一句，这样做的正确方法不是修改`transformForItemView`，而是您需要将轮播变成 a`iCarouselTypeCustom`然后在您的委托中返回转换`carousel:itemTransformForOffset:baseTransform:`。

# c# - 使用撤消和重做功能在richtextbox中撤消重做

> ID：14355687
> 
> 赞同：0
> 
> 时间：2013-01-16T10:01:17.483
> 
> 标签：c#, richtextbox, undo-redo

我试过 if (e.Control && (e.KeyCode == Keys.Z)) RTB.Undo(); 和 .Redo() 但在richtextbox中没有任何反映。我也尝试过发送消息。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:24:17.980

我试过 id 并且它工作正常。

```
if (e.Control && e.KeyCode == Keys.Z)
                richTextBox1.Undo(); 
```

您是否启用了当前表单的 KeyPreview 属性以开始捕捉按键？

谈论这个属性。 ![在此处输入图像描述](../Images/76ccae682569f88ba973a133dd5911fb.png)

# ruby-on-rails - 如何通过 ruby on rails 模型为数据库提供空值

> ID：14355691
> 
> 赞同：2
> 
> 时间：2013-01-16T10:01:32.353
> 
> 标签：ruby-on-rails, ruby

在我的`model`我有以下代码。

```
 hash_values = JSON.parse(question_hash)
 hash_values.each do |k,v|
   b = UpdateData.new
   b.question, b.answer, b.phase = v[0].to_i, v[1], v[2].to_i
   b.save!
 end 
```

我有相位值的问题。`b.phase`有一个`id`，`0 to 5`它也应该是`null`。当没有为阶段输入数据时，该值被`""(.to_i = 0)`视为`0`在数据库中。我需要存储一个`null`值而不是`0`相位值是否为`""`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:08:33.680

只需检查字符串是否为空：

```
if v[2].empty?
  b.phase = nil
else
  b.phase = v[2].to_i
end 
```

[或使用三元运算符](http://en.wikipedia.org/wiki/%3F%3a#Ruby)的漂亮单行：

```
p.phase = v[2].empty? ? nil : v[2].to_i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:06:36.410

尝试：

```
hash_values.each do |k,v|
  b = UpdateData.new
  b.question, b.answer = v[0].to_i, v[1]
  b.phase = v[2].blank? ? nil : v[2].to_i
  b.save!
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:46:23.003

对于模型中存在的每个属性，有一个[gem](https://github.com/tilsammans/nilly_vanilly)可以自动为您执行此操作：

将此添加到您的`Gemfile`并运行`bundle install`：

```
gem 'nilly_vanilly' 
```

此 gem 会将任何空字符串转换为 NIL 值以存储到您的数据库中。

====== 更新 =====

我刚刚尝试了这个 Gem，但它不起作用。我报了，开发者说postgreSQL不兼容。他正在修补宝石。目前，我最终创建了自己的库。

只需创建包含以下行的文件**lib/my_model_tools.rb ：**

```
module MyModelTools
  private

    def blank_string_attributes_to_nil
      self.attributes.each do |attr_name, attr_value|
        self.send("#{attr_name}=", nil) if attr_value.kind_of?(String) && attr_value == ''
      end
    end
end 
```

然后您必须将这些行添加**到您的每个 app/models/***文件中：

```
require Rails.root.to_s + '/lib/my_model_tools.rb'

class MyExampleModel < ActiveRecord::Base

  include MyModelTools
  before_validation :blank_string_attributes_to_nil

  ...

end 
```

这会将任何空字符串属性转换为 NIL 值以存储到您的数据库中（对于您复制上述行的模型）。

因此，当它们为空字符串时，您不必手动将每个属性分配给 NIL。

# ember.js - EmberJS {{action}} 和嵌套 li

> ID：14355692
> 
> 赞同：0
> 
> 时间：2013-01-16T10:01:34.653
> 
> 标签：ember.js

我对嵌套 li 元素的动作助手有一个奇怪的问题。

例如

```
<ul>
   <li><a {{action someAction target="view"}}>Link 1</a></li>
   <ul>
       <li><a {{action someAction target="view"}}>Link 2</a></li>
   </ul>
</ul> 
```

链接 1 操作将触发，但链接 2 操作不会（控制台中也没有错误）。我以前使用 Em.Button 来解决这个问题，但我知道现在正在贬值。

**编辑：**

从进一步研究来看，当嵌套是导航栏中`ul`的引导程序时，这似乎是一个问题。`dropdown-menu`

有没有其他人看到过这种问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:06:12.383

你的第二个`<ul></ul>`应该被包裹`<li></li>`：

```
<ul>
   <li><a {{action someAction target="view"}}>Link 1</a></li>
   <li>
       <ul>
          <li><a {{action someAction target="view"}}>Link 2</a></li>
       </ul>
   </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T04:08:20.427

This is an old question but I ran into a similar issue recently and got it to work like this, with an empty href and placing the action on the "li" instead of the "a".

```
<ul>
   <li {{action someAction target="view"}}><a href="#">Link 1</a></li>
   <ul>
       <li {{action someAction target="view"}}><a href="#">Link 2</a></li>
   </ul>
</ul> 
```

# c# - 在silverlight应用程序的viewmodel中设置ImagePath

> ID：14355695
> 
> 赞同：0
> 
> 时间：2013-01-16T10:01:49.840
> 
> 标签：c#, image, mvvm, silverlight-4.0

在其中一个数据网格列中，我想根据用户的状态（活动/非活动）设置图像..！用户的状态来自数据库。如何实现这个..？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:16:02.367

您需要创建一个单元格模板并放置一个图像标签。使用从数据库获取原始数据的转换器。在转换器中，根据数据返回要加载的图像 url。

# jquery - 滑动和弹跳

> ID：14355696
> 
> 赞同：0
> 
> 时间：2013-01-16T10:01:51.733
> 
> 标签：jquery

```
$("a.details")
    .click(function () {
    var $this = $(this);

    $this.parents(".subscription")
        .find('.plan-details')
        .stop(true, true)
        .animate({
        height: ['toggle', 'easeOutBounce']
    }, 'slow',

    function () {
        $this.text(function (i, text) {
            return text == 'View Details' ? 'Hide Details' : 'View Details';);
        }) ,

        function (e) {
            $this.parents(".subscription")
                .find('.plan-details')
                .stop(true, true)
                .animate({
                height: 'toggle'
            });

        }); 
```

小提琴：http: [//jsfiddle.net/6fCrd/](http://jsfiddle.net/6fCrd/)

...不知道我在这里做错了什么，它不起作用。它应该以弹跳效果向下滑动，并更改触发文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:18:08.873

这里有一个语法错误：

```
return text == 'View Details' ? 'Hide Details' : 'View Details';);
// ... and here
$this.text(function (i, text) {
        return text == 'View Details' ? 'Hide Details' : 'View Details';
}, function (e) { 
```

**编辑**

您必须包含 jquery ui 以获得动画效果

试试我的演示：http: [//jsfiddle.net/6fCrd/7/](http://jsfiddle.net/6fCrd/7/)

# labview - 针对 cDAQ 的 LabView 许可建议：NI9426 开路连接器脉冲和 NI9213 温度警报

> ID：14355698
> 
> 赞同：3
> 
> 时间：2013-01-16T10:01:54.913
> 
> 标签：labview

我对 LabView/DAQ 完全陌生（通常是技术工程师和程序员）。

去年，我的公司购买了 National Instruments 硬件，急于启动和运行一个项目。

**数据采集​​硬件：**

*   1x NI cDAQ-9188 CompactDAQ 8 槽以太网机箱
*   1x NI 9426 32 通道、24 V、7 µs 源型数字输入模块
*   2x NI 9213 16 通道热电偶输入模块
*   2x NI 9205 32 通道 ±200 mV 至 ±10 V、16 位、250 kS/s 模拟输入模块

**传感器：**

硬件上连接了三种类型的传感器。

*   24 个液位传感器连接到 NI9205（电压/电阻）
*   24 个热电偶连接到 NI9213（K 型）
*   24 个连接到 NI9205 的压力传感器（电压/电阻）
*   24 个连接到 NI 9426 的流量传感器（集电极开路，每升 263 个脉冲）

大多数传感器只是简单地收集数据，除了发出警报（如果温度超过设定值）之外，没有涉及任何实际处理。

**我们现在要做的是：**

*   记录不同机器的液位
*   记录温度（并在温度过高时发出警报）
*   此时未记录压力（在开发阶段使用但不再需要）
*   此刻根本没有记录流速（但这将是必要的，也是最令人头疼的问题）

对于几乎所有的东西（少了警报），LabView Signal Express 的免费许可似乎就足够了。

**流速：**

缺少的是流量记录。这似乎需要 LabView 的许可证，因为 NI 9426 实际上并不计算脉冲数并且必须编写程序。LabView Signal Express 显然无法实时记录到文本文件（如果我错了，请纠正我），而且我正在努力以我的知识和时间以批处理模式导出日志。

流量计的数据表在这里： [http ://www.digisavant.com/PDF/FS-4400H-Spec.pdf](http://www.digisavant.com/PDF/FS-4400H-Spec.pdf)

LabView (VI) 的试用版已经制作了一个初步程序，但是制作它的人已经不在了。它已经表明传感器和 NI 硬件可以完成这项工作，但仅此而已。

**当前许可证（试用）：**

LabView 和 LabView Signal Express 均提供试用许可证，试用许可证将在一两周内用完。LabView Signal Express 的试用许可证到期将有效地禁用警报，因为这是完整许可证的一个功能。LabView 的许可证用完不会做任何事情，因为此时它甚至还没有安装。

这些许可证用完意味着我们必须很快购买一些东西。这正是我的问题。

如果我向我的公司推荐购买 Signal Express，我们只需支付 999 美元就可以拥有我们现在拥有的警报器。但我仍然不确定它是否可以实时或通过日志处理流量。

如果我选择 LabView Full (?)，它将花费 2,699 美元（或等值加上我的货币多一点，因为我们在亚洲）。

如您所知，我真的对所有选项感到困惑。但从现在开始，我将自己做 DAQ，收拾残局，做正确的事。

**以下是我的问题：**

*   对于我们的情况，您会推荐什么许可证？请记住，我们只计划做简单的事情。

*   我可以使用免费版本的 LabView Signal Express 解决警报吗？

*   拥有完整 LabView 许可证和 LabView 知识的外部人员是否能够提供一个 EXE 文件来满足我们的需要，而无需购买额外的许可证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:03:47.653

LabVIEW 的基本软件包足以满足您的需求 - 假设您在 Windows 上 - 但如果您想将 LabVIEW 程序变成一个独立的可执行文件，而不是继续在开发环境中运行它，您还需要应用程序生成器。如果您负担得起这种组合并且您乐于编写一些 LabVIEW 代码，那么从长远来看，这将是最灵活的解决方案和物有所值，因为您可以构建和分发任意数量的应用程序，而无需额外的许可费用.

如果您需要更多时间使用 LabVIEW 试用许可证来做出决定，请联系 National Instruments - 如果您解释您的需求，他们可能会给您延期。此外，如果您愿意，他们将能够推荐可以为您进行 LabVIEW 开发的供应商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T13:16:37.123

尽管 SignalExpress 非常有限，但它可以进行实时日志记录。至少有两种方法可以做到这一点。一种是在您的项目中包含一个记录到文件的步骤。另一个是打开默认日志记录。后一种方法生成一个 tdms 文件，这是一种非常方便的文件结构，因为它是二进制的（因此速度很快），您可以下载 Excel 插件，以便将数据导入 Excel。

我不知道 SE 是否可以完成您需要的计数。它可以进行一些有限的信号处理，例如在完整许可证中将一个信号添加到另一个信号。警报也仅在完整许可证中可用。

LabVIEW 代码生成功能 IIRC 很差。生成的代码质量不是很好，因为它使用了很多 Express VI，但没有您需要的可扩展架构。

SE 是一种快速而简单的解决方案，适用于非常基本的 DAQ。如果您引入即使是适度复杂的控制，它也不会提供。

我的建议是从头开始使用 LabVIEW。使用像生产者-消费者这样的可扩展架构，你会没事的。

# java - “缺少 SecurityManager 检查：可序列化”：Fortify SourceAnalyzer

> ID：14355699
> 
> 赞同：1
> 
> 时间：2013-01-16T10:01:55.520
> 
> 标签：java, fortify

我在 Fortify SourceAnalyzer 中看到以下警告，用于我的类，它实现了`ISerializer`接口`IDeSerializer`：-

“缺少 SecurityManager 检查：可序列化”。

这是一个安全漏洞，因为如果您正在序列化一些敏感数据并在类的构造函数中放置了安全管理器检查以避免未经检查地创建新对象实例。您必须覆盖 write 方法并将相同的安全管理器检查放入 write 方法中。（因为有些人仍然可以从序列化字节创建一个新实例，因为没有 java 控制从序列化字节创建的对象，它只会反序列化这些字节，所以避免的唯一方法是在写入中放置相同的安全管理器检查方法）。

如果我正在序列化一些敏感数据并将安全管理器检查放在构造函数中，上述解释就很好了。但是，如果我有不敏感的数据并且我想在没有任何安全管理器检查构造函数的情况下对其进行序列化。我仍然从 Fortify 报告中得到了上述警告。我不确定如何消除此警告，这是 Fortify 工具中的错误还是我遗漏了什么？

注意：- 我不希望任何安全管理器检查我的构造函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:31:34.800

我从 Fortify 得到了一些不同的解释，因为这个问题通常不是指`write`，而是指`read`（反序列化）。背景是反序列化数据时不调用构造函数，因为运行时负责从序列化数据中初始化成员，因此当您`SecurityManager`的构造函数中有 a 时，通过反序列化创建实例时不会考虑。

无论如何，对于您的问题，如果您已经分析了问题并得出结论认为它不是问题，您可以在审核问题时将其标记为此类。这在 Fortify SSC（中央强化服务器）和 Audit Workbench (AWB) 中都是可能的。在 Fortify SSC 中，转到您的问题列表，选择特定问题的“查看详细信息”，然后在左下角选择“分析：不是问题”。AWB 中存在类似的选项。

如果您正在执行后续扫描并将它们上传到服务器（或使用 AWB 合并它们），Fortify 会识别出此问题已被审核并较早标记为“不是问题”并保留“不是问题”信息。

# javascript - javascript中对象与数组的内存使用情况和速度

> ID：14355704
> 
> 赞同：8
> 
> 时间：2013-01-16T10:02:19.170
> 
> 标签：javascript, arrays, object

什么会使用更多的内存，items1，其中每个项目是一个数组或 items2，其中每个项目是一个对象：

```
var items1=[['James Bond',8,40],
...,
['Superman',9999,36]];
var items2=[{Name,'James Bond',strength:8,coolness:40},
...,
{Name,'Superman',strength:9999,coolness:36}]; 
```

哪个是获取数据 search1 或 search2 的最快方法？

```
var search1=items[432][2];
var search2=items2[432]["coolness"]; 
```

PS：给出的分数是非官方的，我个人对2个角色的看法

第二次编辑：我有一张测试的照片，但正如菲利克斯所指出的那样，它被扭曲了。这是更正确的：http: [//jsperf.com/sparse-objects/3](http://jsperf.com/sparse-objects/3)，它说数组查找速度提高了 20%。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:20:47.080

我不是最擅长编写单元测试，但这里有一个简单的例子告诉我没有太大的区别：

```
// see code in fiddle 
```

[http://jsfiddle.net/ryanwheale/HbHxv](http://jsfiddle.net/ryanwheale/HbHxv) `

这是另一个具有更多输出和控制的：

```
// see code in fiddle 
```

[http://jsfiddle.net/ryanwheale/HbHxv/4/](http://jsfiddle.net/ryanwheale/HbHxv/4/)

我喜欢第二个选项，因为您可以通过在开发工具中使用 Chrome 的时间轴来查看每种方法占用多少内存。开始录制，并单击“对象”按钮数次，等待几秒钟，然后单击“数组”按钮数次。您会看到对象消耗的内存超过了数组使用的内存。就执行时间而言，数组似乎也有一点优势。然而，我们谈论的是一百万个项目......这是非常不现实的。

# jquery - Backbone.js - 抛出错误

> ID：14355705
> 
> 赞同：1
> 
> 时间：2013-01-16T10:02:19.873
> 
> 标签：jquery, backbone.js

我对backbone.js非常基础，我正在尝试向body添加几个元素，因为它使用了这个函数，但我得到的错误是“Uncaught ReferenceError：age is not defined”——我的有什么问题代码？

我得到的错误：

```
"Uncaught ReferenceError: age is not defined" 
```

HTML（模板）：

```
<script id="person" type="text/template">
    <strong><%= name %></strong><sup><%= age %></sup>
</script> 
```

功能：

```
(function($){

var Model = Backbone.Model.extend({
  defaults:{
      name:'default name',
      age:'default age'
  }
});

var Col = Backbone.Collection.extend({
    model:Model    
});

var PersonView = Backbone.View.extend({
    tagName:'li',
    template:_.template($('#person').html()),
    initialize:function(){
        this.render();
    },
    render:function(){
        $('body').append(this.$el.html(this.template(this.model.toJSON())));
    }
});

var ncol = new Col({model:[{name:'abc',age:1},{name:'cdf',age:2},{name:'ghi',age:1}]});

var persons = new PersonView({model:ncol});

})(jQuery) 
```

任何人帮助我解决我的问题..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:35:59.043

您正在错误地初始化您的收藏。构造`Collection`函数期望初始模型是一个数组，而不是一个对象。所以而不是：

```
new Col({model:[
    {name:'abc',age:1},
    {name:'cdf',age:2},
    {name:'ghi',age:1}
]}); 
```

它应该是：

```
new Col([
    {name:'abc',age:1},
    {name:'cdf',age:2},
    {name:'ghi',age:1}
]); 
```

这可能会或可能不会导致您的特定错误，但至少这会造成严重破坏。

# php - 如何重命名 file_put_contents 中的文件？

> ID：14355708
> 
> 赞同：0
> 
> 时间：2013-01-16T10:02:24.543
> 
> 标签：php

我有这个代码片段，它可以抓取一个 SWF 文件并将其保存在本地。奇迹般有效！但是，我需要重命名文件并且不知道该怎么做。非常感谢所有帮助！谢谢！

```
$filename = "filename"; //Without extension
$urls = array($swf_url);
foreach($urls as $url) {
   $data = file_get_contents($url);
   file_put_contents('/home/public/'.basename($url), $data);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:04:39.897

......首先给它一个不同的名字......

```
file_put_contents('/home/public/' . $someothername, $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:04:33.060

只需使用您想要的名称保存它：

```
file_put_contents('/home/public/whatever/you/want.swf', $data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:06:16.790

为什么你不首先改变你写它的地方？

如果您阅读[file_put_contents 的文档](http://php.net/manual/en/function.file-put-contents.php)，您会知道第一个参数`$filename`是文件名。将它写入不同的位置所需要做的就是更改第一个参数。

即，修改`'/home/public/'.basename($url)`为您想要的任何内容。

如果你真的想重命名一个文件，你可以像这样使用 PHP 的[rename](http://php.net/manual/en/function.rename.php)方法：

```
rename('/home/public/' . basename($url), '/home/public/newname.swf'); 
```

..但这没什么意义。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T10:05:20.900

```
rename('oldname.swf', 'newname.swf'); 
```

[您可以在文档](http://php.net/rename)中阅读更多内容。

# javascript - Node.js 中的面向对象设计

> ID：14355709
> 
> 赞同：3
> 
> 时间：2013-01-16T10:02:30.260
> 
> 标签：javascript, performance, oop, node.js, modularity

我正在为*Node.js的**异步*流程而苦苦挣扎。假设您有以下课程：

 *```
function myClass() {
  var property = 'something';
  var hasConnected = false;

  this.connect = function(params) {
    //Some logic that connects to db and in callback returns if the connection is successful
    connectToSomeDB('ConnectionString', function(connectionResult) {
      hasConnected = connectionResult
    })
  };

  this.get = function(params) {
    if(hasConnected) {
      DoGetOperation() //
    }
    else {
      //Another question. What should be done here. Call the connect again?
    }
  }
} 
```

考虑到 Javascript 和 Node 结构，我当然相信我的设计存在一些重大问题，但我无法找到解决办法，因为`connect` **必须调用**才能使任何操作正常工作。但是当我在操作后进行一些日志记录时：

```
brandNewObject = myClass();
brandNewObject.connect();
brandNewObject.get(); 
```

`isConnected`我观察到在获取全局变量之前调用了 get 函数。在不违背 Node 的异步结构的情况下，我能做些什么来完成这项工作？

理想情况下，我正在寻找的解决方案实际上是在内部处理“连接”而不是定义回调“外部类”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:08:04.197

你必须使用回调。

```
function myClass() {
  var property = 'something';
  var hasConnected = false;

  // added second parameter
  this.connect = function(params, callback) {
    //Some logic that connects to db and in callback returns if the connection is successful
    connectToSomeDB('ConnectionString', function(connectionResult) {
      hasConnected = connectionResult;
      // Now call the callback!
      callback();
    })
  };

  this.get = function(params) {
    if(hasConnected) {
      DoGetOperation() //
    }
    else {
      //Another question. What should be done here. Call the connect again?
    }
  }
}
brandNewObject = myClass();
brandNewObject.connect({}, function () {
  // this function gets called after a connection is established
  brandNewObject.get();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:08:24.197

将回调参数添加到您的`connect`方法。

```
 this.connect = function(params, callback) {
    //Some logic that connects to db and in callback returns if the connection is successful
    connectToSomeDB('ConnectionString', function(connectionResult) {
      hasConnected = connectionResult;

      // Call the callback provided
      callback(params);
    })
  }; 
```

然后你可以这样称呼它：

```
brandNewObject = myClass();
brandNewObject.connect({}, function(/* optionally, "params" */) {
    brandNewObject.get();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:20:56.480

对此有不同的解决方法。

一种简单的方法类似于您正在做的事情

```
this.get = function(params) {
    if (hasConnected) {
        DoGetOperation(params);
    } else {
        //here you can check the status of the connect. if it is still in 
        //progress do nothing. if the connection has failed for some reason
        //you can retry it. Otherwise send a response back indicating that the
        //operation is in progress.
    }
} 
```

另一种方法可能是为您的 get 函数使用相同的异步回调机制，这会将您的方法签名更改为类似的内容。

```
this.deferredOperations = new Array();

this.get = function(params, callback) {
    if (hasConnected) {
       //using a callback as an optional parameter makes the least 
       //impact on your current function signature. 
       //If a callback is present send the data back through it, 
       //otherwise this function simply returns the value (acts synchronously).
       if (callback !== null) {
         callback(DoGetOperation(params));
       } else {
         return DoGetOperation(params);
       }
    } else {
       this.deferredOperations.push([params,callback]);
    }
}

//connect changes now
this.connect = function(params) {
//Some logic that connects to db and in callback returns if the connection is successful
connectToSomeDB('ConnectionString', function(connectionResult) {
  hasConnected = connectionResult;
  if (hasConnected && this.deferredOperations.length > 0) {
    for (var i=0; i < this.deferredOperations.length; i++) {
      var paramFunction = this.deferredOperations.pop();
      var params = paramFunction[0];
      var func = paramFunction[1];
      DoAsyncGetOperation(params, func); //Need to write a new function that accepts a callback
    }
  }
})
}; 
```

高温高压*

# amazon-web-services - 如何根据请求 URI 进行负载均衡？

> ID：14355711
> 
> 赞同：1
> 
> 时间：2013-01-16T10:02:36.613
> 
> 标签：amazon-web-services, amazon-ec2

我正在使用弹性负载均衡器。现在我想根据 URI 检查进行负载平衡。

现在我有一组实例，我想重定向到那组特定的实例。

举个例子

如果我使用自定义标头数据将发布请求发送到像 [http://www.example.com/group1](http://www.example.com/group1)这样的一个实例，那么现在这个请求应该使用负载平衡器将此请求重定向到 group1 服务器。

如果我使用自定义标头数据将发布请求发送到像 [http://www.example.com/group2](http://www.example.com/group2)这样的同一实例，那么现在应该使用负载平衡器将此请求重定向到 group2 服务器。

总之我想做有条件的负载平衡。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:26:44.767

有几种方法可以做到这一点。

1.  由于 Amazon 不支持条件负载均衡，您可以创建两个负载均衡器，一个具有 group1 实例，另一个具有 group2 实例。现在您必须使用 Route53 路由流量。定义一条 Cname 记录或具有别名的 A 记录作为负载均衡器 A 记录名称。一个问题是我不确定 uri [http://www.example.com/group1](http://www.example.com/group1)和[http://www.example.com/group2](http://www.example.com/group2)是否有效，但[http://www.group1.example.com/](http://www.group1.example.com/)和[http://www.group2.example.com/](http://www.group2.example.com/)肯定会工作。

2.  另一种选择是处理来自您的服务器（ec2 实例）的请求。如果 group1 请求到达 group2 服务器，则必须重定向请求，反之亦然。在这种情况下，您将不需要 2 个负载均衡器。

# java - 将 JComboBox 添加到 JTable 单元格

> ID：14355712
> 
> 赞同：13
> 
> 时间：2013-01-16T10:02:37.973
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

> **可能重复：**
> [如何将 JComboBox 添加到 JTable 单元格？](https://stackoverflow.com/questions/2059229/how-to-add-a-jcombobox-to-a-jtable-cell)

我发现很难添加`JComboBox`到 a 的一个单元格中`JTable`，我尝试了下面的代码，但它不起作用..

**如何将 jcombobox 添加到特定单元格？**

在按下`enter`一个新的`jcombobox`应该自动添加到所需的列。

```
jTable1 = new javax.swing.JTable();
mod=new DefaultTableModel();
mod.addColumn("No");
mod.addColumn("Item ID");
mod.addColumn("Units");
mod.addColumn("Amount");
mod.addColumn("UOM");
mod.addColumn("Delivery Date");
mod.addColumn("Total Amount");
mod.addColumn("Notes");
mod.addColumn("Received");
mod.addRow(new Object [][] {
        {1, null, null, null, null, null, null, null, null}
    });
jTable1.setModel(mod);
jTable1.getColumnModel().getColumn(1).setCellEditor(new DefaultCellEditor(generateBox()));
jTable1.setColumnSelectionAllowed(true);

Code to generate ComboBox

private JComboBox generateBox()
 {
     JComboBox bx=null;
     Connection con=CPool.getConnection();
     try
     {
         Statement st=con.createStatement();
         String query="select distinct inid from inventory where company_code="+"'"+ims.MainWindow.cc+"'";
         ResultSet rs=st.executeQuery(query);
         bx=new JComboBox();
         while(rs.next()){
             bx.addItem(rs.getString(1));
         }
         CPool.closeConnection(con);
         CPool.closeStatement(st);
         CPool.closeResultSet(rs);
     }catch(Exception x)
     {
         System.out.println(x.getMessage());
     }
             return bx;

 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T10:19:02.393

看看这个链接它会帮助你

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html) ![在此处输入图像描述](../Images/0a53a242f749906ca100bd9248e9a0a1.png)

和代码：

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableRenderDemoProject/src/components/TableRenderDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableRenderDemoProject/src/components/TableRenderDemo.java)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T10:11:27.077

`JComboBox``JTable`通过扩展 DefaultCellEditor添加到

**例子：**

```
TableColumn comboCol1 = table.getColumnModel().getColumn(0);
comboCol1.setCellEditor(new CustomComboBoxEditor());

/**
   Custom class for adding elements in the JComboBox.
*/
public class CustomComboBoxEditor extends DefaultCellEditor {

  // Declare a model that is used for adding the elements to the `Combo box`
  private DefaultComboBoxModel model;

  public CustomComboBoxEditor() {
      super(new JComboBox());
      this.model = (DefaultComboBoxModel)((JComboBox)getComponent()).getModel();
  }

  @Override
  public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
      // Add the elements which you want to the model.
      // Here I am adding elements from the orderList(say) which you can pass via constructor to this class.
      model.addElement(orderList.get(i));

      //finally return the component.
      return super.getTableCellEditorComponent(table, value, isSelected, row, column);
  } 
} 
```

> 通过使用自定义类在 JTable 中创建组件，您可以更好地控制正在显示的内容。

# python - 如何更改 Sublime Text 2 中的内置 python？

> ID：14355719
> 
> 赞同：11
> 
> 时间：2013-01-16T10:03:05.470
> 
> 标签：python, sublimetext2, sublimerope

像这样的问题：[Change python interpreter - Sublime Text 2](https://stackoverflow.com/questions/11313131/change-python-interpreter-sublime-text-2)非常适合如果你真的想针对你的 Python 代码运行 Build。但是，我希望插件（例如 SublimeRope）运行我选择的 Python 而不是内置的 Python，它恰好是 2.6

我在 Python 2.7 中工作，因此在尝试使用 SublimeRope 时，内置的 Python 2.6 会导致经常出现语法错误。

我找到了各种方法来更改与正在运行的代码相关的 Python，但没有一种方法会影响插件使用的 Python。

我一直在使用：

```
import sys
print sys.version 
```

在插件 .py 代码中查看针对它运行的版本，它始终是内置的 2.6

编辑 1：我看到 Sublime Text 2 中有一个功能请求，以使 Python 2.7 成为嵌入式 python：[http](http://sublimetext.userecho.com/topic/105249-update-the-python-embedded-interpreter-to-27/) ://sublimetext.userecho.com/topic/105249-update-the-python-embedded-interpreter-to-27/ 如果没有其他方法可以做到这一点，请投票。

编辑2：插件SublimeLinter的这个问题是相关的：[https](https://github.com/SublimeLinter/SublimeLinter/issues/13) ://github.com/SublimeLinter/SublimeLinter/issues/13 由于该插件的设置方式，似乎可以使用系统Python而不是Sublime Text 2 嵌入式Python。我还没有找到一种类似的方法来更改用于 SublimeRope 插件的 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:58:50.447

我通过创建[自定义构建系统](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)解决了这个问题。

这是例如我正在使用的：

```
{
    "cmd": ["/Library/Frameworks/Python.framework/Versions/Current/bin/python", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

# ios - 更新过期的 iO S MDM 配置文件

> ID：14355726
> 
> 赞同：3
> 
> 时间：2013-01-16T10:03:35.173
> 
> 标签：ios, mdm

所以我设置了 SCEP 服务器来生成一个只在短时间内有效的 iOS 身份证书。当它过期时，配置文件会显示“此配置文件已过期。更新此配置文件以获得较新的版本”，并显示“更新配置文件”按钮。

但是单击此按钮只会告诉我“无法更新配置文件。请联系您的网络管理员”。不会尝试联系 MDM 服务或 SCEP 服务，并且日志中不会出现任何 MDM 活动或错误的指示。

再次注册设备工作正常，所以我不怀疑打电话给网络管理员实际上是一个解决方案。那么如何更新过期的 MDM 配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T19:00:37.177

我在 iOS 6.1.3 上接近证书到期时的配置文件更新出现问题，但在 iOS 7 上一切正常。证书到期日期低于 1​​4 天后，MDM 配置文件上会出现配置文件更新按钮。配置文件的状态始终是“配置文件已过期”，因此 Apple 文档不正确，状态永远不会“即将过期”。在 iOS 7 上，我可以更新配置文件，它实际上会自动进行新注册。在 iOS 6.1.3 上，总是出现错误“无法更新配置文件。请联系您的网络管理员”，并且设备没有任何网络活动的痕迹。

任何的想法？

谢谢，

拉特科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:50:15.500

一年多以前，我与 MDM 合作过。所以，我可能对一些细节有误。

这是我记得的：

a) 设备为 OTA MDM 执行两次 SCEP 调用。

看这张[图](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html)

第一次 SCEP 调用是作为 OTA 证书注册的一部分完成的（图表上的第 2 阶段）

当 OTA 提供带有 MDM 和 SCEP 有效负载的配置文件时，第二次 SCEP 调用完成（如图中的第 3 阶段）。

从您的问题中不明显的一件事是哪个 iOS 识别证书是短暂的。

b) 如果您的 MDM 身份已过期，您将停止接收所有 MDM 命令。

c) 如果您的 OTA 身份已过期，您将无法升级您通过无线方式交付的任何配置（例如 MDM）。

如果您有权访问 Apple Enterprise Developer Program，则可以在其中找到 MDM 文档。它会说如果你做了OTA MDM，你需要在它**即将到期**时更新它。

我记得，如果您的 OTA + MDM 已过期，那么您就完蛋了（除了重新注册，您别无选择）。

顺便提一句。我相信让这些身份长寿（正是因为这些问题）是一种常见的做法。

如果您担心无法阻止某人接收更新，您可以随时：

*   发送擦除命令
*   删除所有托管配置文件
*   撤销身份证书

# c# - C# 异常行号始终为零 (0)

> ID：14355729
> 
> 赞同：13
> 
> 时间：2013-01-16T10:03:48.213
> 
> 标签：c#, asp.net, exception, .net-4.0, line-numbers

我在调试模式下发布了我的项目并将 dll 和 pdb 文件都放在我的服务器中，
现在我想使用这些代码获取异常行号：

```
 System.Diagnostics.StackTrace trace = new System.Diagnostics.StackTrace(ex, true);
   Response.Write("Line: " + trace.GetFrame(0).GetFileLineNumber()); 
```

但我不知道为什么异常的行号始终为零-> 0
我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T10:08:31.743

尝试

```
System.Diagnostics.StackTrace trace = new System.Diagnostics.StackTrace(ex, true);
var stackFrame = trace.GetFrame(trace.FrameCount - 1);
var lineNumber = stackFrame.GetFileLineNumber(); 
```

# c# - Silverlight - 更改动态创建的按钮文本颜色

> ID：14355730
> 
> 赞同：0
> 
> 时间：2013-01-16T10:04:00.917
> 
> 标签：c#, silverlight, xaml

我正在尝试使用 ViewModel 更改 Silverlight 表单上动态创建的按钮的按钮文本颜色。我面临的问题是，当我更改按钮文本的颜色时，所有按钮都会生效。由于按钮是动态创建的，因此我无法对其进行控制。

有人建议我在 Model 中写入 ForegroundColor 属性，然后附加到按钮上，我尝试了如您在代码中看到的那样，但对此无能为力。

您能否看到我在做什么，并帮助我提出您的建议，因为我不确定，我做对了。

谢谢

**模型**

```
namespace Web.Models
{
  [DataContract(IsReference = true)]
  public class Sales
  {
    [DataMember]
    public int SalesId { get; set; }
    [DataMember]
    public int ShowOrder { get; set; }
    [DataMember]
    public bool Active { get; set; }
    [DataMember]
    public bool Regurgitate { get; set; }

    [DataMember]
    public int ForegroundColor { get; set; }

    public Sales(Salese result)
    {
        SalesId = result.SalesId;
        ShowOrder = result.ShowOrder;
        Active = result.Active;
        Regurgitate = result.Regurgitate;            

        if (SalesId == 12)
        {
            var bytes = System.BitConverter.GetBytes(ForegroundColor);
            Color btnColor = Color.FromArgb(bytes[3], bytes[2], bytes[1], bytes[0]);

            SolidColorBrush myBrush = new SolidColorBrush(btnColor);
        }
   }
} 
```

}

**视图模型**

```
private Brush _foregroundColor = new SolidColorBrush(Colors.Black); 

public override void Loaded()
{
    OnMainOutcome();
}

public Brush ForegroundColor
{
   get { return _foregroundColor; }
   set
   {
       if (_foregroundColor == value) return;
       _foregroundColor = value;                

       OnPropertyChanged("ForegroundColor");
    }
 }

 private void OnMainOutcome()
 {
    var selectedSalesId = (int)OutcomeCommand.CommandParameter;
    CurrentSubOutcomes = GetCurrentSubOutcomes(selectedSalesId);

    foreach (var index in CurrentOutcomes)
    {
       if (index.OutcomeId == 12)        
          ForegroundColor = new SolidColorBrush(Colors.Red);
       else
          ForegroundColor = new SolidColorBrush(Colors.Black);
    }
 } 
```

**XAML 已编辑**

```
 <controls:ChildWindow.Resources>
    <converters:NumericToColorConverter x:Key="NumericToColorConverter"/>
</controls:ChildWindow.Resources>

 <ListBox Grid.Row="1" Height="Auto" MinHeight="200" Width="160" Margin="2,2,2,2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Path=CurrentOutcomes}" Background="{x:Null}" BorderBrush="{x:Null}">
      <ListBox.ItemTemplate>
          <DataTemplate>
               <Button Height="30" Width="150" HorizontalAlignment="Center" Content="{Binding Outcome}" CommandParameter="{Binding SalesOutcomeId }" Command="{Binding Source={StaticResource ViewModel}, Path=OutcomeCommand}" Foreground="{Binding Source={StaticResource ViewModel}, Converter={StaticResource NumericToColorConverter}, Path=ForegroundColor}" />
          </DataTemplate>
      </ListBox.ItemTemplate>
 </ListBox> 
```

**转换器类 NEW**

```
 using System;
  using System.Windows.Data;
  using System.Windows.Media;
  using System.Windows;

  namespace Converters
  {
      public class NumericToColorConverter : IValueConverter
      {
        static readonly SolidColorBrush RED_BRUSH = new SolidColorBrush(Colors.Red);
        static readonly SolidColorBrush BLUE_BRUSH = new SolidColorBrush(Colors.Blue);

        public object Convert(object value, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
        {
           //Int32 id = System.Convert.ToInt32(value);

           //LinearGradientBrush brush = new LinearGradientBrush();
           //brush.StartPoint = new Point(0, 1);
           //brush.EndPoint = new Point(0, 0);
           //brush.GradientStops.Add(new GradientStop()
           //{
           //    Color = Colors.White,
           //    Offset = 0
           //});
           //brush.GradientStops.Add(new GradientStop()
           //{            
           //    Color = Color.FromArgb(
           //        200,
           //        System.Convert.ToByte((id * 103) % 256),
           //        System.Convert.ToByte((id * 157) % 256),
           //        System.Convert.ToByte((id * 233) % 256)
           //    ),
           //    Offset = 1
           //});

           //return brush;
           var OutcomeId = (int)value;

           if (OutcomeId == 12)
           {
              return RED_BRUSH;
           }
           else
           {
              return BLUE_BRUSH;
           }
    }

    public object ConvertBack(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:28:49.630

您的列表框显示一个列表`Sales`，但每个项目都被模板化以将按钮前景绑定到 VM 中的单个属性。在您的类中创建`MyBrush`属性`Sales`并绑定到它。

```
namespace Web.Models
{
  [DataContract(IsReference = true)]
  public class Sales
  {
    [DataMember]
    public int SalesId { get; set; }
    [DataMember]
    public int ShowOrder { get; set; }
    [DataMember]
    public bool Active { get; set; }
    [DataMember]
    public bool Regurgitate { get; set; }

    [DataMember]
    public int ForegroundColor { get; set; }

    [DataMember]
    public SolidColorBrush MyBrush { get; set; }

    public Sales(Salese result)
    {
        SalesId = result.SalesId;
        ShowOrder = result.ShowOrder;
        Active = result.Active;
        Regurgitate = result.Regurgitate;            

        if (SalesId == 12)
        {
            var bytes = System.BitConverter.GetBytes(ForegroundColor);
            Color btnColor = Color.FromArgb(bytes[3], bytes[2], bytes[1], bytes[0]);

            MyBrush = new SolidColorBrush(btnColor);

        }
   }
} 
```

* * *

```
<ListBox Grid.Row="1" Height="Auto" MinHeight="200" Width="160" Margin="2,2,2,2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Path=CurrentOutcomes}" Background="{x:Null}" BorderBrush="{x:Null}">
      <ListBox.ItemTemplate>
          <DataTemplate>
               <Button Height="30" Width="150" HorizontalAlignment="Center" Content="{Binding Outcome}" CommandParameter="{Binding SalesOutcomeId }" Command="{Binding Source={StaticResource ViewModel}, Path=OutcomeCommand}" Foreground="{Binding MyBrush}"  />
          </DataTemplate>
      </ListBox.ItemTemplate>
 </ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:32:11.780

您将 绑定`Foreground`到 a 上的一个值，`StaticResource`因此所有按钮都将绑定到这个相同的值。

您可以创建一个特定的“ButtonForegroundConverter”，也可以将 Brush 属性添加到项目级视图模型中，该视图模型也具有`Outcome`您已经绑定到`Content`按钮的属性。然后按钮 xaml 将如下所示：

```
<Button ...
        Content="{Binding Outcome}" 
        Foreground="{Binding OutcomeForegroundBrush}" 
        ...
        /> 
```

如果您直接绑定到实体，那么添加这样的属性不是一个好主意，因此上面的示例假设您有一个中间视图模型或控制器，您可以在其上添加这样的属性。

如果您选择使用转换器，它将如下所示：

```
<Button ...
        Content="{Binding Outcome}" 
        Foreground="{Binding OutcomeId, Converter={StaticResource OutcomeToForegroundConverter}}" 
        ...
        /> 
```

和转换器：

```
namespace MyConverters {

    public sealed class OutcomeToColorConverter : IValueConverter {

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {

            // We must have a valid integer value, double check bindings
            if (value == null) {
                throw new ArgumentNullException("value", 
                    "Please make sure the value is not null.");
            }

            var OutcomeId = (int)value;

            if (OutcomeId == XXX) { 
                return RED_BRUSH; 
            }
            else {
                return BLUE_BRUSH;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
            throw new NotImplementedException();
        }

        static readonly SolidColorBrush RED_BRUSH = new SolidColorBrush(Colors.Red);

        static readonly SolidColorBrush BLUE_BRUSH = new SolidColorBrush(Colors.Blue);
    }
} 
```

记得声明资源：

```
<myconverters:OutcomeToForegroundConverter x:Key="OutcomeToForegroundConverter" /> 
```

# android - 从另一个活动中杀死一个活动

> ID：14355731
> 
> 赞同：10
> 
> 时间：2013-01-16T10:04:06.503
> 
> 标签：android, android-intent, android-activity

我有两个活动A和B。B是透明的通过活动，A是可见的。我想通过按下按钮 A 杀死 B。

这是我到目前为止所尝试的：

```
B obj=new B();
obj.finish(); 
```

我创建了一个 B 的对象并试图杀死它。那没有用。

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.putExtra("keep", true);
                startActivity(intent); 
```

这段代码应该做的是清除最重要的活动，即 B 并再次调用 B，除了这次我传递一个值，使得 B 在几秒钟后杀死自己。

由于某种原因，这只会堆积更多的活动实例。或者至少我认为这是因为许多透明活动导致屏幕像素化而发生的。

这是我的清单：

```
<activity
        android:name="com.xxx.xxx.B"
        android:excludeFromRecents="true"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"
        android:clearTaskOnLaunch="true" >
    </activity> 
```

当我在活动显示后点击按钮并且第二次将其杀死时，我该怎么做？创作部分显然得到了照顾。我的活动 B 弹出，现在我想杀死它，因为 B 在上面。

**编辑**

我用复选框尝试了这个，这是代码：

```
enable.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            finishActivity(0);
            Intent intent = new Intent(A.this, B.class);
            if (enable.isChecked()) {
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.putExtra("keep", true);
                intent.putExtra("value", 10);
                startActivityForResult(intent, 0);
            }
            else
            {
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.putExtra("keep", false);
                startActivityForResult(intent, 0);
            }
        }
    }); 
```

选中启用后，将调用活动，这可以正常工作。但他们继续堆积。当我选中和取消选中复选框时，它不是这样的 A->B->A->B。它是 A->B->BB->BBB

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-16T10:58:41.413

您可以尝试通过在该活动中调用静态方法来直接终止该活动：

活动 A 应该有一个变量

```
 static ActivityA activityA; 
```

在 onCreate 状态：

```
 activityA = this; 
```

并添加此方法：

```
public static ActivityA getInstance(){
   return   activityA;
 } 
```

在活动 B 中，调用函数 getInstance()

```
ActivityA.getInstance().finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:43:29.123

我找到了一种从另一项活动中完成一项活动的好方法，它类似于 Lumis 所做的。所以如果你想从 ActivityB 关闭 ActivityA 你可以这样做：

在 ActivityA 中：

```
className = this.getClass().getName(); 
```

并将其传递给 AvtivityB。然后在 ActivityB 中执行：

```
((Activity) Class.forName(className).newInstance()).finish(); 
```

您可以自己将带有类名的字符串放入 className 中，但它也需要是带有包的全名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T18:08:21.063

在我看来，更清晰的方法是创建本地广播，这样就不会出现内存泄漏或 null 问题。实际上，这是将数据传递给先前活动的准确而熟练的方法。首先，在 Activity_A 中创建一个接收器，并在 resume 上注册它，在 destroy 时注册它。在 Activi_A 中（在我的情况下为 Bg_show 类）：

```
 BroadcastReceiver bgshowBroacast = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String extra = intent.getStringExtra("BROADCAST");
            if (extra != null) {
                if (extra.equalsIgnoreCase("finishBgShowActivity")) {

                    finish();
                    Log.i(TAG, "onReceive: Bg_show_BroadCast receive from bg_send class ");
                }
            }
        }
    };

    @Override
    protected void onResume() {
        super.onResume();
        LocalBroadcastManager.getInstance(mContext).registerReceiver(bgshowBroacast, new IntentFilter("BG_SHOW_BROADCAST"));
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        LocalBroadcastManager.getInstance(mContext).unregisterReceiver(bgshowBroacast);
    } 
```

然后在 Activity_B （在我的情况下为 Bg_send 类）：

```
Intent intent = new Intent("BG_SHOW_BROADCAST");
                        intent.putExtra("BROADCAST", "finishBgShowActivity");
                        LocalBroadcastManager.getInstance(mContext)
                                .sendBroadcast(intent); 
```

因此，先前的活动将在接收者注册的地方完成。

快乐的编码......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T10:19:05.843

[您可以通过调用Activity.finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)来停止其他活动。或者，您可以使用[Activity.finishActivity()](http://developer.android.com/reference/android/app/Activity.html#finishActivity%28int%29)来完成由 startActivityForResult() 启动的活动。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-19T21:06:18.937

创建静态类变​​量来保存实例：static SampleActivity sampleActivity；

在创建第一个 Activity 时保存实例，如下所示：incidenteActivity = this;

创建一个静态方法来获取实例：

```
public static SampleActivity getInstance(){
    return   sampleActivity;
} 
```

无论您想打电话到哪里：

```
SampleActivity.getInstance().finish(); 
```

它真的有效，问候，

# python - 如何使用python解析文件系统 钥匙？

> ID：14355733
> 
> 赞同：0
> 
> 时间：2013-01-16T10:04:14.860
> 
> 标签：python, python-3.x

我想要的是要求用户输入路径，但不要强迫他完全手写，通过按 TAB 帮助他完成终端？如何在python中编码？

```
 if __name__== '__main__' : 

                       path=sys.argv[1]
                  a=glob.glob(path+"/abc*") 
```

我在这里通过命令行获取路径。这不是我想要的方式。我想显示一个提示要求用户

预期输出：“输入文件的路径”：现在他应该能够通过文件系统进行解析。

注意：我不想把它作为命令行参数*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:07:16.943

像[readline 模块](http://docs.python.org/2/library/readline.html)这样的东西应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:57:16.520

希望这会给你一个开始做你想做的事，它非常粗糙，需要针对所有这些边缘情况进行改进，但希望你会发现它有一些用处。我只是希望我已经回答了我认为你问的问题。

```
#!/usr/bin/env python 
import readline
import os.path
import glob

class Completer(object):
    def __init__(self):
        self.matches = []
    def complete_path(self, text, state):
        if state == 0:
            self.matches = glob.glob(text + "*")
        if state < len(self.matches):
            if os.path.isdir(self.matches[state]):
                return self.matches[state] + "/"
            else:
                return self.matches[state]
        else:
            self.matches = []
            return None

readline.parse_and_bind('tab: complete')
readline.parse_and_bind('set editing-mode emacs')

# Allow '/'
default_delims = readline.get_completer_delims()
delims = default_delims.translate(None, "/")
readline.set_completer_delims(delims)

readline.set_completer(Completer().complete_path)

while True:
    line = raw_input('Enter Path: ["^C" to quit] : ')
    print 'Line: "%s"' % line 
```

# ios - 快速枚举定义中的方法是否只被调用一次或每次迭代（objective-c）？

> ID：14355741
> 
> 赞同：1
> 
> 时间：2013-01-16T10:04:53.157
> 
> 标签：ios, objective-c, enumeration

例子

```
for(id obj in [self getObjectsSorted]) {
   ...
} 
```

[self getObjectsSorted] 会被调用一次还是每次迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:52:25.110

快速枚举将您的计数器和对象转换为不可变常量。和`start`和`end`循环计数器立即固定。你不能改变它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:04:53.157

通过检查断点，它似乎只被调用一次。

# c++ - Python 列表和 c/c++ 数组

> ID：14355747
> 
> 赞同：0
> 
> 时间：2013-01-16T10:05:11.013
> 
> 标签：c++, python, c, list

例如，如果我们在 python 中有一个数组`arr = [1,3,4]`。`arr.remove(element)`我们可以通过使用ot来删除数组中的元素，`arr.pop()`并且 list 会发生变异，它的长度会发生变化，并且该元素将不存在。有没有办法做到这一点是C ot C++？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:06:09.083

我猜您正在寻找`std::vector`（或标准库中的其他容器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:16:58.310

C 中的数组只是指针，它们不包含有关其长度的信息。因此，C 程序员不仅应该保留一个指针，还应该保留它的长度。这是从“C-array”中删除特定值的片段

```
/// \return a new length
int removeFromArray( int * array, int arrayLength, int elementToRemove ) {
    int i;
    for ( i = 0; i < arrayLength; i++ ) {
        if ( array[ i ] == elementToRemove ) {
            memmove( & array[ i ], & array[ i + 1 ], arrayLength - i - 1 );
            return arrayLength - 1;
        }
    }
    return arrayLength;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:13:38.653

在 C++ 中，您可以使用`std::list`或`std::vector`根据您的里程

如果你需要实现 in `C`，你需要编写你的双链表实现，或者如果你`std::vector`不想模拟，你可以使用`memcpy`and`array indexing`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:16:32.957

据我了解，您不想或无法使用标准库（顺便说一句，为什么？）。

您可以查看其中一种 STL 实现中的向量模板的代码，并了解它是如何实现的。

基本算法很简单。如果要从数组中间删除某些内容，则必须在之后缩小它。如果您要插入中间 - 您必须先扩展它。例如，有时它涉及内存重新分配和移动数组`memcpy`。

或者您可以如前所述实现双链表。但它不会像数组一样。

# entity-framework-5 - 无法加载文件或程序集“EntityFramework”或其依赖项之一 - 强名称验证

> ID：14355751
> 
> 赞同：1
> 
> 时间：2013-01-16T10:05:28.717
> 
> 标签：entity-framework-5, strongname

我最近开始在我的 .NET 4.5 MVC 应用程序中遇到以下错误：

`Could not load file or assembly 'EntityFramework' or one of its dependencies. Strong name signature could not be verified. The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)`

这怎么可能发生？我已经检查了 EntityFramework.dll 的有效性（使用 sn.exe -v）并且还使用 NuGet Packet 管理器重新下载了它......但仍然无济于事。

我该如何克服呢？

# windows - 使用命令行的虚拟目录

> ID：14355752
> 
> 赞同：2
> 
> 时间：2013-01-16T10:05:28.960
> 
> 标签：windows, iis-7, batch-file

如何使用命令行在 Windows 2008 上的 IIS 7 中创建新的虚拟目录。你能不能给我一个命令。这样我就可以在我的批处理脚本中添加该命令。

假设我要创建的 VDIR 的名称是 ZFP，它必须在默认网站下创建。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:59:24.447

从 Microsoft 的 Technet[创建一个虚拟目录（IIS 7）](http://technet.microsoft.com/en-us/library/cc771804%28v=ws.10%29.aspx)：

> appcmd 添加 vdir /app.name:string/ /path:string /physicalPath:string

另请参阅[启动 Appcmd.exe (IIS 7)](http://technet.microsoft.com/en-us/library/cc730918%28v=ws.10%29.aspx)：appcmd 可执行文件不在默认系统路径上，本文解释了它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:48:27.240

我总是使用`SUBST`在 Windows 中创建虚拟文件夹，但我不确定它是否可以在 IIS 中工作。尝试以下操作：

```
SUBST  K:   C:\MYFOLDER 
```

在上面的示例中，`K:`将创建一个新的虚拟驱动器（带有字母），其内容将是里面的任何内容（`C:\MYFOLDER`）

# iphone - 可以在应用运行时清空 Caches 目录吗？

> ID：14355758
> 
> 赞同：1
> 
> 时间：2013-01-16T10:05:43.647
> 
> 标签：iphone, ios, ipad

我们将核心数据和其他对象保存在 Caches 目录中。如果它们被删除没关系，但如果它们在应用程序运行时消失，它就会变得混乱。这真的会发生吗，或者我们可以假设一旦创建了一个文件，它就会在应用程序的其余运行时存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:18:29.217

[表 1-3](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW1)说：

> ...当系统磁盘空间非常低时，系统可能会在极少数情况下删除 Caches 目录。这在应用程序运行时永远不会发生。

那很好，然后:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T10:18:34.083

> NSCache 类包含各种自动删除策略，确保它不会使用过多的系统内存。如果其他应用程序需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除一些项目，从而最大限度地减少其内存占用

你可以看到文档：http: [//developer.apple.com/library/mac/#technotes/CachingPurgeableMemory/Introduction/Introduction.html](http://developer.apple.com/library/mac/#technotes/CachingPurgeableMemory/Introduction/Introduction.html)

缓存有一个成本限制，如果您的文件大于阈值，它将自动删除。但是您可以使用`countLimit`,`totalCostLimit`属性来控制它们，并且可以使用成本添加对象，请查看`setObject:forKey:cost:`.

您也可以自己驱逐对象。将 NSDiscardableContent 协议实现添加到您的对象`setEvictsObjectsWithDiscardedContent:`和`YES`.

但是当您的缓存较大时，当您的应用程序在后台运行时，缓存将驱逐一些对象（可能全部）

# android - ro.sf.lcd_density 必须定义为构建属性

> ID：14355759
> 
> 赞同：12
> 
> 时间：2013-01-16T10:05:44.677
> 
> 标签：android

在模拟器上运行应用程序时，我遇到了这些错误。我该如何解决它，以便我的程序更可靠？

错误：

```
 01-16 11:06:49.211: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
01-16 11:06:49.760: E/Trace(1633): error opening trace file: No such file or directory (2)
01-16 11:06:51.230: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T21:18:26.947

这与您的应用程序无关，它只是来自模拟器的噪音。检查真实设备，您将不会再看到此消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T06:06:13.760

当 /res/drawable 中有一个图标时，我收到了这条日志消息。我将它移到 /res/drawable-hdpi 并删除 /res/drawable 并且日志消息消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T14:23:08.440

我的模拟器处于飞行模式。当我关闭它并按下“再次打开应用程序”时，它以某种方式工作。

# linq - Linq Sql函数

> ID：14355760
> 
> 赞同：0
> 
> 时间：2013-01-16T10:05:46.143
> 
> 标签：linq

我将链接以将日期时间列转换为字符串。如果我们使用 System.Data.Objects.SqlClient.SqlFunctions 将在数据库中执行相同的查询并在数据库中执行，这应该发生在数据库示例中。

在所有建议的帖子中，首先需要查询然后我们需要选择。在选择中，我们可以使用 .ToString()。我不想先获取记录，而是想在获取时进行转换。

我的要求。我有实体员工。

```
public class EmpEntities
{
 public string Id { get; set; }
 public DateTime CreatedDate { get; set; }
} 
```

假设我的数据 Emp-19,2012-01-01 11:33:454 Emp-17,1999:06:06 12:44:898

我的搜索条件是 20 ，在所有字段中任何员工都有 20（包含） 这我需要过滤包含需要检查的属性列表。为此，我需要将我创建的日期列转换为 linq 中的字符串。

```
var query=
(from ee in entities.Employee
 where ee.CreatedDate.Value.ToString().Contains("20")
select ee).ToList(); 
```

如果我们使用上面的一个，它会出错。

如果我们使用下面的工作正常。

```
var query=
     (from emp in entities.Employee                        
       select emp)
.AsEnumerable()
.Where(x=>x.CreatedDate.Value.ToString().Contains("20")); 
```

我需要检查包含实体的日期时间属性。有什么方法可以将 datetime 属性转换为字符串并检查 linq 中的包含。

我需要将我的日期时间属性转换为字符串，然后我需要使用包含。

所以这里我的问题是我想在数据库级别过滤数据，例如我正在为员工 ID 做准备

```
var query= (from emp in entities.Employee.Where(x =>   System.Data.Objects.SqlClient.SqlFunctions.StringConvert((decimal?)x.Empid).Contains("20"))                   
                select emp).ToList(); 
```

sql查询中的这个等价物是。

```
SELECT  1 AS [C1],  [Extent1].[name] AS [name] FROM [dbo].[Employee] AS [Extent1]
WHERE STR( CAST( [Extent1].[EmpId] AS decimal(19,0))) LIKE N'%5%' 
```

在 sql 执行中，它将整数类型转换为字符串，并在获取记录时执行条件。

同样，我想与 empid 一起过滤创建日期。但我无法将日期时间列转换为字符串，以便我可以使用包含。

有什么方法可以实现我对整数数据类型所做的上述方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:47:27.070

对此有一个简短的回答：不。但我认为 sgmoore 正确地指出了您方法中的缺陷。a 的字符串表示形式`DateTime`可以在任何地方包含一个字符串，那么它有多大用处？

看起来您只想选择`>= 2000-01-01`可以通过以下方式完成的日期

```
var d1 = new DateTime(2000,1,1);
var query = from emp in entities.Employee
            where emp.CreatedDate >= d1
            select emp; 
```

请告诉我这是否不符合您的意图以及为什么匹配`LIKE %20%`如此重要。如果是这样，只有使用的方法`.AsEnumerable()`才能完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:27:17.700

使用 Linq2Sql，您可以执行以下操作：

```
var query=
   (from ee in entities.Employee
    where SqlMethods.Like(ee.CreatedDate.Value.ToString() , "%20%")
    select ee).ToList(); 
```

想问一下，为什么？我正在努力思考为什么有人想要这样的东西的任何可能原因？

我想你知道这将匹配日期

```
1900-01-01 20:00:00 
1900-01-01 00:00:20
1900-01-20 00:00:00
1920-01-01 00:00:00
2000-01-01 00:00:00 
```

等等等等

# iphone - 关闭共享实例视图控制器

> ID：14355761
> 
> 赞同：0
> 
> 时间：2013-01-16T10:05:46.660
> 
> 标签：iphone, xcode

我有一个我无法解决的问题。在我的登录页面上，我正在创建一个共享实例并加载它：

```
ViewController *vc = [ViewController sharedInstance];

if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 5.1) {
    [self presentViewController:vc animated:YES completion:nil];
}else{
    [self presentModalViewController:vc animated:YES];
} 
```

这是第一次很好地工作。在我的视图控制器上，我有一个如下所示的注销方法：

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 5.1) {
    [self dismissViewControllerAnimated:NO completion:nil];       
}else{
    [self dismissModalViewControllerAnimated:NO];
} 
```

它也很好用，但是在我注销并尝试再次登录后，它停在代码中间……没有错误，没有借口。

有人知道解决方案吗？

谢谢

**编辑：**方法`sharedInstance`

```
static ViewController *vcontroller; 
+ (ViewController *) sharedInstance { 
    if (!vcontroller) { 
        vcontroller = [[ViewController alloc] init]; 
    } return vcontroller; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:45:30.860

根据您的解释，我确实想要（应该）删除共享实例。因此，请确保您有一种方法可以在代码中将 cController 静态变量设置为 nil。我不认为调用 sharedInstance 和设置会起作用，因为看起来你正在使用单例，如果你有单例模式的正确实现，它将不起作用。您也可以根据您的要求清除此变量以登录

# c++ - 为什么 SFINAE 在这里不起作用

> ID：14355762
> 
> 赞同：5
> 
> 时间：2013-01-16T10:05:48.640
> 
> 标签：c++, sfinae

我想实现静态检查以确定类型是否可构造：

```
#include <iostream>

template<typename T>
struct IsConstr
{
    typedef char TrueType;
    typedef struct{char a[2];} FalseType;
    template<typename C>
    static decltype((C(),TrueType())) test(int);
    template<typename C>
    static FalseType test(...);

    enum{value=(sizeof(test<T>(0))==sizeof(TrueType))};
}; 

struct S{private: S();};
int main()
{
    std::cout<<IsConstr<S>::value<<std::endl;
    std::cout<<IsConstr<int>::value<<std::endl;
    return 0;
} 
```

代码无法编译，显示错误

> “替换失败。'S::S()' 是私有的”。

为什么 SFINAE 不在这里工作？谢谢。

# wpf - 在列表框项目上捕获鼠标滚轮

> ID：14355763
> 
> 赞同：0
> 
> 时间：2013-01-16T10:05:52.227
> 
> 标签：wpf, mousewheel, listboxitem

我有一个列表框，其中填充了相对较少的项目。这些项目不适合屏幕，因此列表框会自动在右侧获得一个垂直滚动条。滚动条响应鼠标滚轮，但列表框项目不响应。如何使项目响应鼠标滚轮？

提前致谢！

——纳乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T12:24:19.303

这会选择我在 WPF 窗口中的列表框中的项目。当您转动鼠标滚轮时，会选择一个 ListBox 项。ListBox 在此之前获得焦点，并且已经选择了第一项。

在类文件中放置：

```
private void ListBox1_MouseWheel(object sender, MouseWheelEventArgs e)
{
    int cap = (ListBox1.Items.Count) - 1;
    int place = ListBox1.SelectedIndex;
    int incre = e.Delta/120;
    place += incre;
    if (place > cap)
    {
        place = 0;
    }
    if (place < 0)
    {
        place = cap;
    }
    ListBox1.SelectedIndex = place;
    ListBox1.ScrollIntoView(itemNoresult1.SelectedItem);
} 
```

在列表框的 XAML 属性中放置：`PreviewMouseWheel="ListBox1_MouseWheel"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T21:41:20.893

如果要避免 ListBox 响应鼠标滚轮事件，则需要在 ListBox 元素的上下文中处理鼠标滚轮事件。

在该处理程序中，您可以设置 e.Handled=true 这将停止事件冒泡到包含列表框。

您不妨将该语句放在 ListBoxItem 内的包含元素中。

# ruby-on-rails - 如何在 Ruby on Rails 的 URL 中添加参数？

> ID：14355767
> 
> 赞同：0
> 
> 时间：2013-01-16T10:06:07.253
> 
> 标签：ruby-on-rails, ruby

我在 routes.rb 中这样写：

```
get 'app/:name&:target' => 'apps#show', :as => :app_info 
```

我想访问“app/myapp&mytarget”，然后转到apps_controller#show，这是haml：

```
link_to app_item[:name], app_info_url(app_item[:name], app_item[:target]) 
```

但它返回：

```
No route matches [GET] "/app/myapp&mytarget" 
```

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:27:58.027

您无需指定希望在路由中接受的 URL 参数。只需创建到您的控制器#action 的路由，例如）

```
get 'app/:name' => 'apps#show', :as => :app_info 
```

在您的应用程序#show 操作中从 params[:target] 访问 URL 参数，可能有许多这样的 URL 参数，所有这些都将在 rails 为您生成的 params 哈希中。您不需要在路线中明确提及它们。

所以只需将参数传递给您的 url 助手：

```
link_to app_item[:name], app_info_url(app_item[:name], target: app_item[:target]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:42:08.137

在路径或 url 中这样传递

```
app_info_url(app_item[:name], app_item[:target], :params1 => "value1", params2 => "value2"......) 
```

# sublimetext2 - Sublime Text 2 折叠标签

> ID：14355768
> 
> 赞同：4
> 
> 时间：2013-01-16T10:06:08.313
> 
> 标签：sublimetext2, folding

是否有在 Sublime Text 2/3 中仅折叠指定的 html 标签的功能？例如： `<span>`很多文字`</span>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:38:33.597

就在这里。您只需使用 找到所需的起始标签`ctrl+F`，然后使用 选择它们`ctrl+D`。之后折叠它们只需按`ctrl+shift+[`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T18:45:51.440

这是一篇较旧的帖子，但是当我在寻找相同的东西时，我想我会发布我找到的解决方案。

如果您将鼠标悬停在排水沟中，将显示折叠/展开代码块的箭头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-12T13:35:57.540

确保安装包控制。说明可在此处找到。

在 Sublime Text 中，按 `Ctrl`＋<kbd>Shift＋<kbd>P (Win, Linux) 或`Cmd`＋<kbd>Shift＋<kbd>P (OSX)

调出快速面板并开始输入`Package Control: Install Package`

选择命令，它将显示可安装插件的列表。

开始输入`BracketHighlighter`，当你看到它时，选择它。

> 首选项 > 包设置 > BracketHighlighter > 键绑定 - 用户

```
[{
  "keys": ["ctrl+alt+]"],
  "command": "bh_key",
  "args": {
    "plugin": {
      "type": ["__all__"],
      "command": "bh_modules.foldbracket"
    }
  }
}] 
```

重新启动以确保所有内容都正确加载。

`ctrl`+ `alt`+ `]`-快捷键享受！

# javascript - iPhone Safari 浏览器未绑定 div 点击事件

> ID：14355773
> 
> 赞同：1
> 
> 时间：2013-01-16T10:06:16.220
> 
> 标签：javascript, iphone, dom-events, mobile-safari

我有一个没有 CSS 设置的 div 元素`cursor:pointer`。我想`click`在那个 div 上绑定一个 JS 事件，但是 JS 没有监听`click`div 上的事件。

此设置适用于所有浏览器，包括 Safari、Safari 上的移动模拟器、Android、Galaxy Tab。

它似乎不适用于 iPhone。

当我`cursor:pointer`在 div 上添加 时，它开始工作。谁能解释我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:20:28.263

如果问题是根本没有调用 CLICK 处理程序，那么您可以尝试使用诸如“touchstart”或“touchend”之类的触摸事件，因为在触摸设备上您没有鼠标指针，因此您无法“单击”。

# jquery-mobile - jQueryMobile - 如何结合内部页面和普通页面滑动？

> ID：14355775
> 
> 赞同：0
> 
> 时间：2013-01-16T10:06:17.547
> 
> 标签：jquery-mobile

我正在尝试在同一解决方案中导航内部 jqueryMobile 页面（data-page="mypage"）和普通页面（xxxx.php）。我希望它的行为如下：

*   从#lista-x 向右滑动并转到#listas
*   从#listas 执行新的向右滑动并转到 index.php

问题是，如果我在#lista-x 上执行滑动，它会直接进入 index.php。我几乎看不到它正在执行这两个操作，也就是说，首先它转到#listas，然后是 index.php。这是我的代码（为了让您更容易理解而对其进行了简化）：

```
 <!-- EXAMPLE.PHP -->
    <div data-role="page" id="listas">
            <a data-role="button" href="#lista-1">lista 1</a>
            <a data-role="button" href="#lista-2">lista 2</a>
            <a data-role="button" href="#lista-3">lista 3</a>
        </div>
        <div data-role="page" id="lista-1">
            //something...
        </div>
        <div data-role="page" id="lista-2">
            //something...
        </div>
        <div data-role="page" id="lista-3">
            //something...
        </div>

<script type="text/javascript">    
$("[id='listas']").bind('pageshow', function(){
    // Gestos táctiles
            $(function() {
                $("body").bind('swiperight', function(event) {
                        window.location = "mov-eventos.php";
                        // $.mobile.changePage( "mov-eventos.php");
                });

            });
    });

    $("[id^='lista-']").bind('pageshow', function(){
    // Gestos táctiles
        $(function() {
            $("body").bind('swiperight', function(event) {
                    $.mobile.changePage("#listas", "slide", false, true);
            });
        });
    });
</script> 
```

我该如何解决它才能表现得像我之前解释的那样？：

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:29:33.097

问题在于，尽管您只选择了一些元素（例如`$("[id^='lista-']")`），但您将`swiperight`事件绑定到 body 元素，因此`swiperight`会触发两次。您必须将其绑定到选定的元素。

# regex - 删除短信不支持字符的正则表达式

> ID：14355776
> 
> 赞同：-3
> 
> 时间：2013-01-16T10:06:20.080
> 
> 标签：regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:10:54.863

You could replace all characters that don't match the valid ones:

```
[^A-Za-z0-9@$_\/.,"():;\-=+&%#!?<>' \n] 
```

The `[]` means: "any of" and the `^` means: "not". So the whole expression says: Match anything but...

So you'd write:

```
replace all [^A-Za-z0-9@$_\/.,"():;\-=+&%#!?<>' \n] in the SMS by nothing 
```

For further information (and your further questions ;-)) please have a look at this [Howto](http://www.regular-expressions.info/tutorial.html).

# php - jquery 文件上传插件不适用于大于 5 mb 的文件

> ID：14355784
> 
> 赞同：0
> 
> 时间：2013-01-16T10:06:55.160
> 
> 标签：php, javascript, jquery, codeigniter

我已经在 Codeigniter 中实现了 jquery 文件上传插件，用于我网站的任何 ext 文件。我已将上传文件大小升级到 50 MB。但是在上传大于 8 mb 的文件时，会出现错误（它适用于小于 8 mb 的文件。）。当我检查它时，它显示进度条和 ajax 进程异常停止并且 $_FILES[] - 这个数组在 php.ini 中是空的。为此，我增加了 ajax 的超时时间。然后 ajax 进程和进度条进程工作正常，但我仍然得到 $_FILES[] 数组为空。任何人都对此问题有解决方案或建议。我只想使用这个插件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:16:26.750

我认为这是因为您的托管服务提供商限制下载大于 8 MB 的文件 - 这类似于系统设置。尝试添加到站点根目录中的 .htaccess-file 字符串：'php_value memory_limit 50M'

**请注意：**如果您的托管服务提供商阻止了 php_value - 指令，则可能导致 500 错误（然后您必须要求您的提供商增加上传文件的限制）

# javascript - 在 Selenium 中使用 $(window).width

> ID：14355788
> 
> 赞同：0
> 
> 时间：2013-01-16T10:07:02.337
> 
> 标签：javascript, jquery, selenium, window, selenium-webdriver

我有一个 `$(window).width()`在 JS 函数中使用的网站。

在 Selenium 中，我想测试函数是否已执行并且 div 的值是否为`$(window).width() * 0.8`.

有可能这样做吗？将浏览器宽度设置为某个值不起作用。可能是因为仍然有窗口边框包含在一个计算中但不包含在另一个计算中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:34:27.003

尝试使用 JavascriptExecutor：

```
((JavascriptExecutor) driver).executeScript("return document.documentElement.clientWidth"); 
```

如果你想要高度，那将返回视口的宽度：

```
((JavascriptExecutor) driver).executeScript("return document.documentElement.clientHeight") 
```

# javascript - 使用javascript删除字符串中最后出现的逗号

> ID：14355791
> 
> 赞同：3
> 
> 时间：2013-01-16T10:07:12.057
> 
> 标签：javascript, regex, string, comma

我有一段文字

> 测试，文本，123，没有最后一个逗号

需要它

> 测试，文本，123 没有最后一个逗号

（123 后没有逗号）。如何使用 javasctipt 实现这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T10:09:04.880

```
str.replace(/,(?=[^,]*$)/, '') 
```

这使用[肯定的前瞻断言](http://www.regular-expressions.info/lookaround.html)来替换逗号，后跟非逗号。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T10:11:04.113

非正则表达式选项：

```
var str = "test, text, 123, without last comma";
var index = str.lastIndexOf(",");
str = str.substring(0, index) + str.substring(index + 1); 
```

但我喜欢[正则表达式](https://stackoverflow.com/a/14355832/157247)。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:48:44.127

用正则表达式替换的另一种方法：

```
str.replace(/([/s/S]*),/, '$1') 
```

这依赖于贪婪的事实`*`，并且正则表达式最终将匹配`,`字符串中的最后一个。`[/s/S]`匹配任何字符，与之相反`.`，匹配除换行符之外的任何字符。

# jquery - 指向同一图像灯箱的两个链接

> ID：14355793
> 
> 赞同：1
> 
> 时间：2013-01-16T10:07:14.340
> 
> 标签：jquery, hyperlink, lightbox

我需要将 2 个不同的链接添加到同一个灯箱画廊 (http://lokeshdhakar.com/projects/lightbox2/)。问题是，如果我将相同的图像 url 设置为 href，当我单击其中一个链接时，我会得到相同的图像重复两次。这是我写的代码：

```
<a href="<?php echo base_url().'gallery/'.md5($annuncio['id']).'/'.$first_image; ?>" rel="lightbox[gallery]">first link</a>
<a href="<?php echo base_url().'gallery/'.md5($annuncio['id']).'/'.$first_image; ?>" rel="lightbox[gallery]">second link with same image url</a>
<a href="<?php echo base_url().'gallery/'.md5($annuncio['id']).'/'.$second_image; ?>" rel="lightbox[gallery]">third link to a different image</a>
<a href="<?php echo base_url().'gallery/'.md5($annuncio['id']).'/'.$third_image; ?>" rel="lightbox[gallery]">fourth link to a different image</a> 
```

# java - JavaFX bundle exe 不显示 TableView 内容

> ID：14355794
> 
> 赞同：5
> 
> 时间：2013-01-16T10:07:14.433
> 
> 标签：java, tableview, javafx, native, proguard

我们创建了一个 JavaFX 应用程序，其中包含许多用于显示数据的**TableView 。**我们已经使用**Ant**构建了本机包，并且我们正在使用**Proguard-4.8**对jar进行**混淆**， 并且我们能够使用该混淆的 jar 成功创建本机包 exe。当我们运行 exe 时，它​​成功启动了应用程序，一切正常，tableView 中存在数据，但我们无法在 TableView 中看到数据。下面附上从 exe 为 TableView 拍摄的屏幕截图 -

 ****注意：我们可以使用未经混淆创建的 jar 和 exe 在 TableView 中查看数据。**

![表视图](../Images/b9c9aaa59ab63a1453c3b0098a440d8c.png)

在 build.xml 中混淆 jar 的步骤

```
<target name="ObfuscatingProject" depends="apidocs">

            <taskdef resource="proguard/ant/task.properties" classpath="${WorkingFolder}/proguard.jar" />
            <proguard>
                -dontusemixedcaseclassnames
                -printmapping Project_Proguard.map
                -dontshrink
                -dontoptimize
                -dontskipnonpubliclibraryclasses
                -dontskipnonpubliclibraryclassmembers

                -libraryjars "${java.home}/lib/rt.jar"
                -libraryjars "${java.home}/lib/javaws.jar"
                -libraryjars "${env.JAVA_HOME}/lib/ant-javafx.jar"
                -libraryjars "${env.JAVA_HOME}/jre/lib/jfxrt.jar"           
                -libraryjars ${WorkingFolder}/libs/BareBonesBrowserLaunch.jar
                -libraryjars ${WorkingFolder}/libs/activation.jar
                -libraryjars ${WorkingFolder}/libs/log4j-1.2.16.jar
                -libraryjars ${WorkingFolder}/libs/commons-codec-1.5.jar
                -libraryjars ${WorkingFolder}/libs/commons-httpclient-3.1.jar
                -libraryjars ${WorkingFolder}/libs/commons-logging-1.1.1.jar
                -libraryjars ${WorkingFolder}/libs/commons-io-2.0.1.jar
                -libraryjars ${WorkingFolder}/libs/xercesImpl-2.9.1.jar
                -libraryjars ${WorkingFolder}/libs/javax.mail.jar
                -libraryjars ${WorkingFolder}/libs/balloontip-1.2.1.jar
                -libraryjars ${WorkingFolder}/libs/httpclient-4.1.1.jar
                -libraryjars ${WorkingFolder}/libs/httpcore-4.1.3.jar
                -libraryjars ${WorkingFolder}/libs/jcifs-1.3.16.jar         
                -libraryjars ${WorkingFolder}/libs/proguard-4.8.jar
                -libraryjars ${WorkingFolder}/libs/xml-apis-1.3.04.jar
                -libraryjars ${WorkingFolder}/libs/swingx-1.6.jar
                -libraryjars ${WorkingFolder}/libs/derby.jar

                -injars ${WorkingFolder}/${app.name}.jar
                -injars ${WorkingFolder}/CustomJars/LicVerifier.jar(!META-INF/MANIFEST.MF)
                -injars ${WorkingFolder}/CustomJars/LicUtility.jar(!META-INF/MANIFEST.MF)

                -outjars ${WorkingFolder}/ObfuscatedProjectJar/ProjectObfuscated.jar

                -ignorewarnings

                -keepattributes 

                Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,LocalVariable*Table,*Annotation*,Synthetic,EnclosingMethod
                -adaptresourcefilecontents **.fxml,**.properties,META-INF/MANIFEST.MF,images/*.jar,Project.version

                -keepclassmembernames class * {
                    @javafx.fxml.FXML *;
                } 

                -keepclassmembernames class com.javafx.main.Main {
                    public static void main(java.lang.String[]);
                } 

                -keep class com.javafx.main.*

                -keepclasseswithmembers public class com.javafx.main.Main{
                    public static void main(java.lang.String[]);
                }

                -keepclasseswithmembers public class com.project.main.ProjectEntryFX{
                    public static void main(java.lang.String[]);
                 }

                -keepclasseswithmembers public class net.project.license.LicEntryPoint{
                     public *;
                 }

                -keep class * extends org.xml.sax.helpers.DefaultHandler

                -keepclassmembers class * extends org.xml.sax.helpers.DefaultHandler {
                    private *;
                        public *;
                }

            </proguard>
    </target> 
```

有人可以建议我在 JavaFX TableView 中查看数据需要改进什么吗？

感谢帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T10:48:12.793

javaFx must access some methods of your classes considering their name.

For example: if you have a class Person whith attribue name, surName,... you probably wrote:

```
public Class Person {

private StringProperty name, surname,....

public StringProperty nameProperty() {
        return name;
    }

public StringProperty surnameProperty() {
        return surname;
}

...

} 
```

methods like nameProperty, surnNameProperty may be probably accessed in your application by code like this:

```
new PropertyValueFactory<Person, String>("name")
new PropertyValueFactory<Person, String>("surName") 
```

The obfuscator must not rename such methods (nameProperty, surnameProperty...). You can tell this with a configuration like this:

```
-keepclassmembers public class yourpackage.** {
    public javafx.beans.property.StringProperty *Property();
} 
```**

# ruby-on-rails - RMagick 的 Gem 安装错误

> ID：14355798
> 
> 赞同：1
> 
> 时间：2013-01-16T10:07:23.887
> 
> 标签：ruby-on-rails, gem, rmagick

过去我使用 RMagick 也有 Imagemagick，最近我捆绑安装了更新版本的 RMagick。

重新启动我的 Rails 服务器时出现错误。所以我决定先卸载imagemagick（来自brew），然后卸载rmagick。

我尝试重新安装 rmagick，但遇到了一些麻烦（第一个是我无法从 bundle 命令安装）。我试过`gem install rmagick -v '2.13.1'`了，但我得到了以下权限错误：

```
ERROR:  While executing gem ... (Errno::EACCES)
Permission denied - /Users/username/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper 
```

我也尝试过`sudo`并得到了

```
ERROR:  While executing gem ... (Errno::EACCES)
Permission denied - /Users/username/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper
usercomputer:~ Username$ sudo gem install rmagick -v '2.13.1'
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

    /Users/username/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for /usr/bin/gcc-4.2... yes
checking for Magick-config... no
Can't install RMagick 2.13.1\. Can't find Magick-config in /Users/username/.rvm/gems/ruby-1.9.3-p194/bin:/Users/Aurelien/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/username/.rvm/rubies/ruby-1.9.3-p194/bin:/Applications/MAMP/bin/php5/bin:/Applications/MAMP/htdocs/cake/cake/cake/console:/Users/username/.rvm/gems/ruby-1.9.3-p194/bin:/Users/username/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/username/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/username/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/username/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

Gem files will remain installed in /Users/username/.rvm/gems/ruby-1.9.3-p194/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/username/.rvm/gems/ruby-1.9.3-p194/gems/rmagick-2.13.1/ext/RMagick/gem_make.out 
```

当然，我在此过程中做错了什么，但我不确定是什么？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:43:27.880

似乎最新版本的 ImageMagick 与 RMagick 不兼容。我通过以下方式解决了这个问题：

[http://blog.paulopoiati.com/2013/01/28/installing-rmagick-in-mac-os-x-mountain-lion-with-homebrew/](http://blog.paulopoiati.com/2013/01/28/installing-rmagick-in-mac-os-x-mountain-lion-with-homebrew/)

# lua - Corona：如何在 Corona 中捕获屏幕？

> ID：14355806
> 
> 赞同：-2
> 
> 时间：2013-01-16T10:07:52.650
> 
> 标签：lua, screenshot, coronasdk, 2d-games

谁能建议如何在全屏和特定部分的电晕中捕获屏幕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T04:53:14.553

试试这个。它将起作用：

```
 local function captureDeviceScreen()
       local captured_image = display.captureScreen( true )
       captured_image:scale(.5,.5)
       local alert = native.showAlert( "Success", "Captured Image is Saved to Library", { "OK" } )
    end
    Runtime:addEventListener("tap",captureDeviceScreen) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T10:10:11.167

[谷歌](https://www.google.co.uk/search?q=how%20to%20capture%20a%20screen%20in%20corona?&oq=how%20to%20capture%20a%20screen%20in%20corona?&aqs=chrome.0.57j60.545&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)搜索产生了这个链接：[How to capture a screen in corona](http://developer.coronalabs.com/reference/index/displaycapturescreen)

如果您在实施时遇到问题，请提供更多信息，也许可以说出您到目前为止所做的尝试，以便我们知道下一步该去哪里。

# sql - 在 SQL CE 中使用 IN 条件

> ID：14355807
> 
> 赞同：0
> 
> 时间：2013-01-16T10:07:54.117
> 
> 标签：sql, sql-server, sql-server-ce, sql-server-ce-3.5

我们如何在 SQLCE 中将值列表作为参数传递？

使用以下代码有效（在查询中直接传递值列表时）

```
 SqlCeCommand cmd = string.Format("Select VMID from Booking where (VMID in ({0})", 
                       selectedVMs );
    SqlCeManager.OpenSqlConnection();//my custom code to open sql connection
    sqlCmd = new SqlCeCommand(cmd, SqlCeManager.sqlConn); 
```

但是下面的代码不起作用（使用参数传递值列表时）。

```
 SqlCeCommand cmd = "Select VMID from Booking where (VMID in (@VMIDs))";
    SqlCeManager.OpenSqlConnection();//my custom code to open sql connection     
    sqlCmd.Parameters.Add("@VMIDs", string.Join(",", selectedVMs));
    sqlCmd = new SqlCeCommand(cmd, SqlCeManager.sqlConn); 
```

我得到的错误是**“@IDs：8,7 - 输入字符串的格式不正确。”**

我在这里想念什么？

# c++ - 数字文字运算符错误

> ID：14355809
> 
> 赞同：12
> 
> 时间：2013-01-16T10:08:11.263
> 
> 标签：c++, c++11, user-defined-literals

为什么这段代码：

```
constexpr float operator "" _deg(long double d) {
    // returns radians
    return d*3.1415926535/180;
}

static const float ANGLES[] = {-20_deg, -10_deg, 0_deg, 10_deg, 20_deg}; 
```

产生其中 5 个错误：

> 错误：无法找到数字文字运算符 'operator"" _deg'

我正在使用 GCC 4.7.3。( `arm-none-eabi-g++`, 带有`-std=c++0x`标志)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T10:15:30.337

似乎 GCC 不使用用户定义的文字进行类型转换，因此例如`-10`in`-10_deg`被认为是一个整数。

添加`.0`到所有数字，它应该有望工作：

```
static const float ANGLES[] = {-20.0_deg, -10.0_deg, 0.0_deg, 10.0_deg, 20.0_deg}; 
```

当然，您也可以添加另一个运算符函数`int`作为参数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T10:20:38.837

添加定义

```
constexpr float operator "" _deg(unsigned long long d) {
    // returns radians
    return d*3.1415926535/180;
} 
```

让它工作。

# c# - 读取 xls/xlsx 并显示在屏幕上

> ID：14355810
> 
> 赞同：0
> 
> 时间：2013-01-16T10:08:12.320
> 
> 标签：c#, asp.net, exceldatareader

我正在使用“ExcelDataReader”读取 Excel 文件，我想在屏幕上显示该文件。

```
protected void Page_Load(object sender, EventArgs e)
{
    string filePath = @"C:\WORK\BoireannSVN\trunk\VS\CRCConnect\Spreadsheet\Spreadsheet.xlsx";

    FileStream stream = File.Open(filePath, FileMode.Open, FileAccess.Read);

    IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);

    excelReader.IsFirstRowAsColumnNames = true;
    DataSet result = excelReader.AsDataSet();

    while (excelReader.Read())
    {
        Label x = new Label();
        x.Text = result.Tables[0].Rows[0].ItemArray[0].ToString();
        uploadExcel.Controls.Add(x); 

        excelReader.GetInt32(0);
    }

    excelReader.Close();

} 
```

我已经在

```
Label x = new Label(); 
x.Text = result.Tables[0].Rows[0].ItemArray[0].ToString(); 
```

试图让 excel 表显示在屏幕上，尽管我对此没有运气。我认为这就像

```
table1.Columns.Add;
table1.Rows.Add; 
```

但似乎无法继续进行，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:57:38.137

我遇到了类似的情况，我做了以下事情：

```
var rows = results.Tables[0].AsEnumerable(); 
```

然后您可以迭代并选择列的值：

```
foreach (var dataRow in rows)
            {

                Console.WriteLine(dataRow[0]);
                //or
                Console.WriteLine(dataRow["ColumnName"]);
            } 
```

# sql - T-SQL 复制现有的列信息

> ID：14355811
> 
> 赞同：1
> 
> 时间：2013-01-16T10:08:13.963
> 
> 标签：sql

我目前正在创建一个 SP，它将信息从表 a 复制到表 b 中。我面临的问题是可以在表 c 中自由定义将要复制的信息。例如：表 a 有列 test nvarchar(50)、test1 nvarchar(79)、beta2 nvarchar(80) 和 id int

在设置表中，定义列 test 和 test1 应从表 a 复制到表 b。

我确实检查了该列是否已经存在。它现在在以下几行失败：

```
DECLARE @dataType nvarchar(100)
DECLARE @statement nvarchar(250)

set @dataType = 
SELECT c.*, s.name 
FROM sys.columns c 
INNER JOIN sys.objects o 
ON c.object_id = o.object_id 
INNER JOIN sys.types s 
ON c.user_type_id = s.user_type_id 
WHERE o.name = 'a' AND c.name = 'test'
set @Statement = 'Alter table dbo.t_hist_Devicereport add test ' + @dataType 
exec (@Statement) 
```

* * *

错误消息是我附近的语法不正确，`SELECT`但如果我自己运行 SELECT 语句，它工作得很好......我正在使用 SQL Server 2005，以防出现问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:52.940

```
DECLARE @dataType nvarchar(100)
DECLARE @statement nvarchar(250)
SELECT @dataType = CASE WHEN s.name = 'nvarchar' THEN 'nvarchar(' + CAST(c.max_length AS varchar(4)) + ')' ELSE s.name END             
FROM sys.tables t JOIN sys.columns c ON t.object_id = c.object_id 
                  JOIN sys.types s ON c.user_type_id = s.user_type_id 
WHERE t.name = 'a' AND c.name = 'test'

SET @Statement = 'Alter table dbo.t_hist_Devicereport add test ' + @dataType 
EXEC sp_executesql @Statement 
```

# string - 在 shell 中删除包含特定字符串的行

> ID：14355815
> 
> 赞同：2
> 
> 时间：2013-01-16T10:08:19.500
> 
> 标签：string, shell, sed, line

我想从我的文件中删除包含特定字符串的行。我这样做：

```
 sed -i "/example/d" myfile 
```

但是我的文件包含许多行，其中包含包含我要删除的字符串的字符串。例如，我的文件包含如下行，我只想删除包含“example”的第一行：

```
myfile:
 example
 example1
 example2
 .. 
```

我的问题是，如果只想删除完全包含我的字符串“example”的行并保留其他行，该怎么办。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:10:18.123

简单的。更加详细一些。

```
sed -i "/\bexample\b/d" myfile 
```

# sql - Oracle中的最大语句长度是多少

> ID：14355819
> 
> 赞同：12
> 
> 时间：2013-01-16T10:08:27.983
> 
> 标签：sql, oracle, oracle10g, oracle-sqldeveloper

我正在构建一个包含数据的 SQL 语句，我想知道我是否会打破 Oracle 10g 中的一些最大语句长度。

该语句大约有 3 200 000 个字节，不能被拆分，并且必须是整体可解析的。

在我以这种方式投入太多时间之前，我想知道我是否会受到此语句大小的限制。

我正在使用 SQL 开发人员，但我认为如果服务器可以做到，那么 SQL 开发人员也可以。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T10:19:25.720

没有固定的数字。请参阅“逻辑数据库限制”： [http ://docs.oracle.com/cd/B19306_01/server.102/b14237/limits003.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14237/limits003.htm)

“SQL 语句的长度限制取决于许多因素，包括数据库配置、磁盘空间和内存”。

您可能还会受到其他限制的影响，例如子查询的最大级别。

鉴于 PL/SQL 过程的最大长度为 2000-3000 行，我的感觉是您可能会遇到 3M 字节查询的问题。我还认为，如果它完全有效，解析时间将是“有趣的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T07:53:12.133

根据 11.2 限制文档：

> SQL 语句的最大长度，包括 NULL 终止符。409,600

[https://docs.oracle.com/cd/E11882_01/timesten.112/e21643/limit.htm#TTREF455](https://docs.oracle.com/cd/E11882_01/timesten.112/e21643/limit.htm#TTREF455)

# python - 使用 Python 3.X 访问网络摄像头

> ID：14355825
> 
> 赞同：1
> 
> 时间：2013-01-16T10:08:49.593
> 
> 标签：python, webcam

对于一个学校项目，我使用 Raspberry Pi 来检测网络摄像头图像中的某些颜色。但是，我似乎找不到任何使用 Python 3.X 访问网络摄像头的方法。是否有任何适用于 windows 和 linux 的 python 3.X 库（我在 windows 7 上创建程序但将在 R-Pi 上使用它）？

如果不是，我想我最终可能会选择 Python 2.7，因为 R-Pi 上安装了两个版本（虽然我不知道 2.7，所以它可能不太顺利）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:35:35.670

做这件事有很多种方法：

1.  您可以使用支持从网络摄像头获取数据的[OpenCV](http://code.google.com/p/ctypes-opencv/)，并且有 Python 包装器；
2.  [gstreamer](http://pygstdocs.berlios.de/pygst-tutorial/webcam-viewer.html)也有 python 绑定；

此外，在 GNU/Linux 上，您可以使用[v4l2](http://pypi.python.org/pypi/v4l2)。

# c++ - 使用 python27.dll 而不是 python.exe 时无法导入站点包

> ID：14355828
> 
> 赞同：0
> 
> 时间：2013-01-16T10:08:54.957
> 
> 标签：c++, python, embedding

我已经在寻找两天没有成功的答案。我希望这里有人可以帮助解决我的问题。情况如下：我在 WinXP 32 机器上安装了 Python 2.7，以及一些第三方软件包。

我正在开发一个 C++ 应用程序，它通过来自[http://www.codeproject.com/Articles/11805/Embedding-Python-in-CC-Part-I](http://www.codeproject.com/Articles/11805/Embedding-Python-in-C-C-Part-I)的示例代码的略微修改版本调用 py 脚本。

我使用python标准安装目录中的python27.lib来链接，我使用system32目录中的python27.dll来运行应用程序。只要我没有在 py 脚本中导入第三方包，一切都会顺利进行，但只要我导入例如“import matplotlib.pyplot”，我的 C++ 应用程序就会在我尝试调用 py 脚本时崩溃。

当我从我的 python 环境（Pydev @ Eclipse）运行调用的 python 脚本时，脚本运行正常。

我已经尝试运行初始化脚本以将标准环境中的 PYTHONPATH 条目添加到我的 C++ python27.dll 解释器会话中，但没有成功。同样的结果，我的 C++ 应用程序在导入 matplotlib 时崩溃。

有谁知道，我如何设置 python27.dll 解释器作为我的 python.exe 解释器工作？

还是我完全走错了路？

感谢您的任何建议，我非常感谢 stackoverflow 和这里的活跃社区。

干杯，马库斯

# php - 如何使用 commit() 查找插入到 mysql 的记录

> ID：14355830
> 
> 赞同：2
> 
> 时间：2013-01-16T10:08:58.093
> 
> 标签：php, mysql

对不起这个初学者的问题，我不是 PHP 开发人员，但现在我正在努力学习它。

我想在 MySQL 数据库中添加记录，我正在使用事务锁。

我的代码如下。

```
$SqlQuery="INSERT INTO tab_photo VALUES('$PhotoID','$ProjectId','$Day','$barCode','$photoName','$PhotoXml')";

$waiting = true;
while($waiting) {
    try {
        // save border data
        $stmt = $conn->prepare($SqlQuery);
        $conn->beginTransaction();
        $stmt->execute();
        sleep(1);

        $x=$conn->commit();
        echo "x value-".$x;

        echo "Success";
        $waiting = false;
    }
    catch (PDOException $e){
        echo "Failled :".$PhotoID."-".$PhotoID;
        if(stripos($e->getMessage(), 'DATABASE IS LOCKED') !== false) {
            // This should be specific to SQLite, sleep for 0.25 seconds
            // and try again.  We do have to commit the open transaction first though
            $conn->commit();
            usleep(250000);
        } else {
            $conn->rollBack();
            throw $e;
        }
    }
} 
```

在这里作为它给出的输出，

```
x value-1 Success 
```

但实际上这条记录并没有添加到数据库中。

**我的问题：**

1.  即使提交成功（输出1）它如何不添加到数据库中？
2.  如何检查记录是否已添加到数据库中？（有没有办法在不写选择语句的情况下找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:30:44.790

据我了解，您希望当语句执行失败时会抛出 PDOException 。但正如我所见，在这种情况下，默认情况下不会抛出异常。[在此处](https://stackoverflow.com/a/1967569/1558311)查看如何更改

假设在您的情况下，您应该有这样的代码：

```
$conn = new PDO($connection_string); 
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // this will force PDO to throw exception when SQL statement fails instead of simply setting an error. 
```

假设这对你来说很好。

请注意，您不应该使用

```
$SqlQuery="INSERT INTO tab_photo VALUES('$PhotoID','$ProjectId','$Day','$barCode','$photoName','$PhotoXml')"; 
```

取而代之的是，您应该使用参数绑定：

```
$SqlQuery="INSERT INTO tab_photo VALUES(:PhotoID,:ProjectId,:Day,:barCode,:photoName,:PhotoXml)";
$stmt = $conn->prepare($SqlQuery);
$conn->beginTransaction();
$stmt->execute(array(':PhotoID' => $PhotoID, ':ProjectId' => $ProjectId, ....));
sleep(1); 
```

有关更多详细信息，请参阅[此](http://php.net/manual/en/pdostatement.execute.php)内容。

# python - Python 如何使用 setuptools 将包安装到特定目录

> ID：14355834
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:05.880
> 
> 标签：python, installation, python-module

安装程序.py

```
from setuptools import setup

setup(
 name = "Project",
 version = "1.0",
 packages = ['Project','Project.project','Project.LOG',\
            'Project.reporting','Project.templates',\
           ],

install_requires = ['django-grappelli==2.3.8','pycairo==1.10.0','django-chart-tools==0.2.1','django-admin-tools==0.4.0'],
package_data = {
    '': ['*.html','*.pyd','*.txt','*.gif','*.png','*.jpeg','*.jpg','*.css','*.js','*.py','*.html~','*.sh','*.wsgi'],

},

# metadata for upload to PyPI
author = "Me",
author_email = "me@example.com",
description = "This is an Example Package",  ) 
```

现在我希望所有的包都安装在 dev/workspace 中，如果是 windows 的话，/var/www 是 ubuntu OS 的。我希望所有 install_requires 都安装在 python/Lib/site-packages 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:20:24.787

我认为您真的很想看看[virtualenv](http://www.virtualenv.org/)。它允许您创建自己的 Python 环境，您的代码和依赖项可以安装到 - 任何您想要的地方，并且完全独立于现有的 Python 安装。我看不出为什么要在现有 Python 安装中安装依赖项的充分理由。

# vim - Vim - 为什么'filetype'有时是空的，即使我打开一个现有的文件

> ID：14355838
> 
> 赞同：1
> 
> 时间：2013-01-16T10:09:17.080
> 
> 标签：vim, macvim

有时，显然是随机的，Vim 决定不知道我们打开了什么文件类型。我不知道为什么，所以请原谅我模糊的问题。

知道为什么会发生以及如何减轻它吗？我正在打开一个 .php 文件。

我已经在我的 vimrc 中设置`filetype`了。`on`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:16:34.773

Vim 本身不识别文件类型，各种语言的插件会为你做到这一点，特别是 ftplugins。通常，它们将在其中定义一个自动命令，例如。）

```
autocmd BufNewFile,BufRead todo.txt,*.task,*.tasks  setfiletype task 
```

这样的文件放在 ftplugin 目录下，通常命名为 .vim。尽管在某些情况下它可能会有所不同并且可能很复杂，但是您应该从简单的示例中获得总体思路。

因此，对于 VIM 无法识别的文件或该类型没有 ftplugin 的文件，它将为空。

# playframework - 扩展 Playframework 2.0 构建系统以压缩 (gzip) 资产

> ID：14355839
> 
> 赞同：1
> 
> 时间：2013-01-16T10:09:18.000
> 
> 标签：playframework, playframework-2.0, sbt

根据我从[“Playframework's working with public assets”](http://www.playframework.org/documentation/2.0.2/Assets)中了解到的情况，它将通过提供压缩版本（后缀为 .gz）（如果存在）来服务资产。

现在我想知道是否有办法在构建过程中自动压缩公共资产？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:27:49.523

你应该检查这个主题：[Gzipping assets](https://groups.google.com/d/msg/play-framework/dSJEKhYiMDE/u-N50plw6hwJ)，这正是你要找的。

它将添加一个 gzip 所有资产的新 sbt 任务，并在`dist`/时自动启动此命令`start`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T15:53:08.677

尽管它适用于`play start`，但据我测试，它不会在您运行`play dist`或`play stage`.

如果您需要创建用于在生产中部署的二进制包，请参阅我在[Play Framework 2.0.4 GZip](https://stackoverflow.com/questions/16960943/play-framework-2-0-4-gzip/18130518#18130518)上的回答，它解决了我的问题。

# c# - 通过网络将邮件发送到文件夹

> ID：14355842
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:22.073
> 
> 标签：c#, visual-studio-2008, sendmail

我正在尝试发送邮件，在本例中为 gridview 到我机器上的指定文件夹，以便能够查看邮件。因此，我正在发送邮件，但它并没有最终出现在文件夹中。我怎样才能做到这一点？

我将此添加到 web.config：

```
<system.net>
<mailSettings >
  <smtp deliveryMethod="Network" from="ArianG@lr.co.za">
    <network host="staging.itmaniax.co.za"/>
    <specifiedPickupDirectory pickupDirectoryLocation="C:\testdump\emaildump\"/>
  </smtp>
</mailSettings> 
```

这是我发送 gridview 的代码。（我认为我不需要 SmtpClient，因为我不想连接到端口，25 或 587）：

```
private void MailReport()
{
    //*****************************************************
    string to = "arianul@gmail.com";
    string From = "ArianG@lr.co.za";
    string subject = "Report";
    string Body = "Good morning, Please view attachment<br> Plz Check d Attachment <br><br>";

    Body += GridViewToHtml(GridView1);

    Body += "<br><br>Regards,<br>Arian Geryts(ITManiax)";
    bool send = sendMail(to, From, subject, Body);

    if (send == true)
    {
        string CloseWindow = "alert('Mail Sent Successfully!');";
        ClientScript.RegisterStartupScript(this.GetType(), "CloseWindow", CloseWindow, true);
    }
    else
    {
        string CloseWindow = "alert('Problem in Sending mail...try later!');";
        ClientScript.RegisterStartupScript(this.GetType(), "CloseWindow", CloseWindow, true);
     }
    //*****************************************************

}

public bool sendMail(string to, string from, string subject, string body)
{
    bool k = false;
    try
    {
        MailMessage msg = new MailMessage(from, to);
        msg.Subject = subject;

        AlternateView view;
        SmtpClient client;
        StringBuilder msgText = new StringBuilder();
        view = AlternateView.CreateAlternateViewFromString(msgText.ToString(), null, "text/html");
        msg.AlternateViews.Add(view);
        msgText.Append(" <html><body><br></body></html> <br><br><br>  " + body);

        //*****
        /*client = new SmtpClient("smtp.gmail.com", 25);
        client.Host = "staging.itmaniax.co.za";
        client.Port = 25;

        //****
        client.EnableSsl = true;
        client.Send(msg);*/

        k = true;     
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:16:54.973

将 web.config 中的邮件设置更改为：

```
 <smtp deliveryMethod="SpecifiedPickupDirectory">
    <specifiedPickupDirectory pickupDirectoryLocation="C:\smtp" /> 
```

这应该可以解决问题。或者，您可以在部署解决方案后通过 IIS gui 更改设置。

亲切的问候。

/edit：当然你需要一个 smtp 客户端。该程序必须将电子邮件消息发送到 smtp 服务器。该消息只是被 IIS 拾取并填充到一个文件夹中。

# javascript - 将字母数字参数传递给javascript函数

> ID：14355844
> 
> 赞同：2
> 
> 时间：2013-01-16T10:09:30.980
> 
> 标签：javascript, alphanumeric

当我调用 javascript 函数时`onclick="doSome(this.value)" where this.value=123`，它工作正常。

但如果我打电话`onclick="doSome(this.value) where this.value=A123`，它不工作。如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-03T18:08:22.167

我也面临同样的问题。我不得不调用一个带有产品代码作为参数的函数。当产品代码是数字时它可以工作并且它不适用于像“AE11002”这样的产品。

我通过将方法调用从更改为 `onClick="decreaseQuantity(${product.code})"`来解决了这个问题`onclick='decreaseQuantity("${product.code}")'`。

我想这也会对你有所帮助。请试试这个。

# xml - 使用 XSL 使 XML Item/@id 变为 Item/ID

> ID：14355845
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:33.260
> 
> 标签：xml, xslt, drupal-6, migrate

如何编写一些 XSL 来更改外部文档，使其结构从：

```
 <Item id="1">
  </Item> 
```

至：

```
 <Item>
         <Id>1</Id>
   </Item> 
```

或者可以用PHP完成吗？我在 Drupal 中使用了一个名为 Migrate 的模块，这使我无法将我的 XML 转换为节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:13:13.973

```
<xsl:template match="Item">
  <Item>
    <Id><xsl:value-of select="@id" /></Id>
  </Item>
</xsl:template> 
```

# php - 定义的变量（没有值）是否在 PHP 中被认为是未定义的？

> ID：14355846
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:36.470
> 
> 标签：php, variables, runtime-error, undefined-behavior

使用以下代码（PHP 5.4.4-10，Debian 测试）：

```
<?php
$a = 0;
$b;
echo '$a: ' . $a . PHP_EOL;
echo '$b: ' . $b . PHP_EOL; 
```

我将有以下输出：

> $ php teste.php $a: 0 PHP 注意：未定义变量：第 5 行 /tmp/teste.php 中的 b PHP 堆栈跟踪：PHP 1\. {main}() /tmp/teste.php:0
> 
> 注意：未定义的变量：第 5 行 /tmp/teste.php 中的 b
> 
> 调用堆栈：0.0002 221952 1\. {main}() /tmp/teste.php:0
> 
> $b:

$b 在 $a 之后定义。为什么它被认为是未定义的？它是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:11:51.327

这不是一个错误。您已经声明了一个变量但没有定义它（即您没有为它分配任何值）。

# json - 如何在 GWT 项目中将 JSON 转换为 Java 对象，反之亦然？

> ID：14355847
> 
> 赞同：3
> 
> 时间：2013-01-16T10:09:38.547
> 
> 标签：json, rest, gwt

我将 GWT 用于客户端应用程序和 REST Web 服务而不是服务器（不在 GWT 中使用 RPC 或 servlet）。我想将 java 对象转换为 JSON 并将 JSON 对象从客户端传递到服务器以及服务器到客户端。但是对于处理我想将 JSON 对象转换为 java 对象 i 服务器。GWT 不支持 GSON 有没有办法将 java 对象转换为 JSON 对象，反之亦然？

我使用 Autobean 框架将 java 对象转换为 JSON 做了一个示例项目，但出现以下错误

```
[ERROR] [gwtmodules] - Deferred binding result type 'com.mycompany.gwtmodules.client.MyFactory' should not be abstract
] Failed to create an instance of 'com.mycompany.gwtmodules.client.Gwtmodules' via deferred binding 
java.lang.RuntimeException: Deferred binding failed for 'com.mycompany.gwtmodules.client.MyFactory' (did you forget to inherit a required module?) 
```

以下是我的代码

```
public interface Test {

    public int getAge();
    public void setAge(int age);
    public String getName();
    public void setName(String name);

}

import com.google.web.bindery.autobean.shared.AutoBean;
import com.google.web.bindery.autobean.shared.AutoBeanFactory;

public interface MyFactory extends AutoBeanFactory{
AutoBean<Test> test();
}
public class Gwtmodules implements EntryPoint {

    MyFactory factory = GWT.create(MyFactory.class);

    /**
     * This is the entry point method.
     */
    Test makeTest() {
        // Construct the AutoBean
        AutoBean<Test> test = factory.test();

        // Return the Person interface shim
        return test.as();
    }

    Test deserializeFromJson(String json) {
        AutoBean<Test> bean = AutoBeanCodex.decode(factory, Test.class, json);
        return bean.as();
    }

    String serializeToJson(Test test) {
        // Retrieve the AutoBean controller
        AutoBean<Test> bean = AutoBeanUtils.getAutoBean(test);
        return AutoBeanCodex.encode(bean).getPayload();
    }

    public void onModuleLoad() {

        final Test test = makeTest();
        test.setAge(44);
        test.setName("achu");
        final Button button = new Button("Click here");
        button.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                String s = serializeToJson(test);
                Window.alert("alert" + s);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T10:37:37.897

**有什么方法可以将 java 对象转换为 JSON 对象，反之亦然？**

您可以使用 GWT 的 autobean 框架。它可以在服务器端和客户端使用。

*   [AutoBean 框架](http://code.google.com/p/google-web-toolkit/wiki/AutoBean#GWT_AutoBean_framework)

**例子：**

```
String serializeToJson(Test test) 
{
    // Retrieve the AutoBean controller
    AutoBean<Test> bean = AutoBeanUtils.getAutoBean(test);
    return AutoBeanCodex.encode(bean).getPayload();
}

Test deserializeFromJson(String json) 
{     
    AutoBean<Test> bean = AutoBeanCodex.decode(myFactory, Test.class, json);     
    return bean.as();   
} 
```

# php - 如何使用 preg_match 从字符串中搜索，包括符号？

> ID：14355848
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:38.780
> 
> 标签：php, preg-match

我有一个模式`status: available`，但冒号符号不起作用。如何修改这个模式？

我在代码中弄乱了一些东西，当我找到它时会通知你。谢谢你

好的，我分解了代码。我正在为域可用性编写脚本。

```
<?php
$server = 'whois.cira.ca';
$pattern = 'status: available';

$domain = 'nonexistingdomain';
$extension = '.ca';

$buffer = NULL;
$sock = fsockopen($server, 43) or die('Error Connecting To Server: ' . $server);
fputs($sock, $domain.$extension . "\r\n");

while( !feof($sock) )
{
    $buffer .= fgets($sock,128);
}

//If I give a value localy to $buffer (like below) it works, but if $buffer takes the value from fgets() function it wont
$buffer = "Domain name: nonexistingdomain.ca Domain status: available % WHOIS look-up made at 2013-01-16 12:35:45 (GMT) % % Use of CIRA's WHOIS service is governed by the Terms of Use in its Legal % Notice, available at http://www.cira.ca/legal-notice/?lang=en % % (c) 2013 Canadian Internet Registration Authority, (http://www.cira.ca/) NO";

fclose($sock);

if(preg_match("/$pattern/", $buffer))
    echo "YEP";
else
    echo "NO";
?> 
```

如果我将 $pattern 更改为“可用”，它会起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:24:51.600

好像你缺少一个分隔符。

尝试这个：

```
<?php

$pattern = '/status: available/';

$string = "String1: status: available";
$string1 = "String2: status: unavailable";

if (preg_match($pattern,$string))
    echo 'String1 matches<br>';
else
    echo 'String1 does not match<br>';

if (preg_match($pattern,$string1))
    echo 'String2 matches<br>';
else
    echo 'String 2 does not match<br>';
?> 
```

给出以下输出：

`String1 matches`

`String 2 does not match`

# jquery - 找不到合适的选择器

> ID：14355849
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:41.323
> 
> 标签：jquery, jquery-selectors

我试图让一个类在单击时调用一个函数，但它不起作用。

```
$('.container_vragen').click(appendContainerVragenToContent_vragen); 
```

`.container_vragen`使用此代码调用该函数，但我只想在它位于 div 中时调用该操作`#geregeld`

```
$('.container_vragen' , '#geregeld').click(appendContainerVragenToContent_vragen); 
```

当我定义它`.container_vragen`在里面`#geregeld`时，它不会调用函数`appendContainerVragenToContent_vragen`

什么是正确的选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:10:42.537

您在上下文中传递`string`而不是对象，请在[**此处**](http://api.jquery.com/jQuery/)`DOM`找到有关选择器和上下文的更多信息。[](http://api.jquery.com/jQuery/)

 ***改成*

```
$('.container_vragen' , $('#geregeld')).click(appendContainerVragenToContent_vragen); 
```

或使用[**后代选择器**](http://api.jquery.com/descendant-selector/)

```
 $('#geregeld .container_vragen').click(appendContainerVragenToContent_vragen); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:11:36.233

简单的解决方案是使用选择器的强大功能：

```
$('#geregeld .container_vragen').click(appendContainerVragenToContent_vragen); 
```

但请注意，如果您调用后 DOM 发生了变化，这将不起作用。如果您想允许这样做，请使用

```
$(document.body).on('click', '#geregeld .container_vragen', appendContainerVragenToContent_vragen); 
```**

# macos - 在 BASH 中，如何使用 plist 上的默认值写入数组中的现有元素？

> ID：14355850
> 
> 赞同：1
> 
> 时间：2013-01-16T10:09:44.457
> 
> 标签：macos, bash, plist

我想`DEFAULT_VALUE_PLACEHOLDER`使用命令行工具更改以下 plist 中的值[`defaults`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/defaults.1.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PreferenceSpecifiers</key>
    <array>
        <dict>
            <key>DefaultValue</key>
            <string>DEFAULT_VALUE_PLACEHOLDER</string>
            <key>Type</key>
            <string>PSTitleValueSpecifier</string>
            <key>Title</key>
            <string>Version</string>
            <key>Key</key>
            <string>prefs_item_version_title</string>
        </dict>
    </array>
    <key>StringsTable</key>
    <string>Root</string>
</dict>
</plist> 
```

我意识到一个简单的查找和替换就可以做到（例如sed），但是，我想要一种更强大的方法来做到这一点。

我认为是这样的，但是[语法的文档](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/defaults.1.html)还不够好。

```
defaults write $PLIST_PATH  'PreferenceSpecifiers { 1 = { DefaultValue = $NEW_DETAULT_VALUE; }; }' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:49:34.833

我认为没有任何方法可以做到这一点`defaults`（这并不完全丑陋）——你最好用 PlistBuddy 做这样的事情：

```
/usr/libexec/PlistBuddy -c "set :PreferenceSpecifiers:0:DefaultValue '$NEW_DEFAULT_VALUE'" "$PLIST_PATH" 
```

请注意，与 不同的是`defaults`，PlistBuddy 希望您给它的文件名包含“.plist”；此外，（如上所示），数组索引从 0 开始。

# sql - Oracle SQL Developer 选择查询 blob

> ID：14355852
> 
> 赞同：0
> 
> 时间：2013-01-16T10:09:58.530
> 
> 标签：sql, oracle, join, oracle11g, blob

有谁知道我如何从表中的列中选择一个 blob（在这种情况下为图像）？我在下面的查询引发了这个错误：

```
ORA-00932: inconsistent datatypes: expected - got BLOB
00932\. 00000 -  "inconsistent datatypes: expected %s got %s"

SELECT homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
       listagg(features.feature_name, ',') WITHIN GROUP (ORDER BY features.feature_name)  features, home_type.type_name, home_photo.photo, home_photo.description
FROM homes
INNER JOIN home_feature
    ON homes.home_id = home_feature.home_id
INNER JOIN home_type
    ON home_type.type_code = homes.type_code
INNER JOIN home_photo
    ON homes.home_id = home_photo.home_id
INNER JOIN features
    ON home_feature.feature_id = features.feature_id
INNER JOIN home_photo
    ON home_photo.home_id = homes.home_id
GROUP BY homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name, home_photo.photo, home_photo.description; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:21:43.873

您收到此错误是因为您尝试将 GROUP BY 与 BLOB 列一起使用。这在 Oracle 中是不可能的。

您应该能够通过在子查询中进行分组并将带有 home_photo 的 JOIN 移动到外部查询来解决此问题：

```
select v1.*,
       home_photo.photo,
       home_photo.description
  from (SELECT homes.homes_id,
               homes.title,
               homes.description,
               homes.living_room_count,
               homes.bedroom_count,
               homes.bathroom_count,
               homes.price,
               homes.sqft,
               listagg(features.feature_name,
                       ',') WITHIN GROUP(ORDER BY features.feature_name) features,
               home_type.type_name
          FROM homes
         INNER JOIN home_feature
            ON homes.home_id = home_feature.home_id
         INNER JOIN home_type
            ON home_type.type_code = homes.type_code
         INNER JOIN features
            ON home_feature.feature_id = features.feature_id
         GROUP BY homes.homes_id,
                  homes.title,
                  homes.description,
                  homes.living_room_count,
                  homes.bedroom_count,
                  homes.bathroom_count,
                  homes.price,
                  homes.sqft,
                  home_type.type_name) v1
 INNER JOIN home_photo
    ON home_photo.home_id = v1.home_id 
```

# r - 在距离矩阵中查找 5 个最近样本的索引

> ID：14355853
> 
> 赞同：9
> 
> 时间：2013-01-16T10:09:58.577
> 
> 标签：r, matrix, distance

用户

我有一个距离矩阵 dMat 并想找到与第一个最近的 5 个样本。我可以在 R 中使用什么功能？我知道如何找到最接近的样本（参见第 3 行代码），但不知道如何获取其他 4 个样本。

编码：

```
Mat <- replicate(10, rnorm(10))
dMat <- as.matrix(dist(Mat))
which(dMat[,1]==min(dMat[,1])) 
```

第 3 行代码查找最接近第一个样本的样本的索引。

谢谢你的帮助！

最好的，切加

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T10:26:31.553

您可以使用它`order`来执行此操作：

```
head(order(dMat[-1,1]),5)+1
[1] 10  3  4  8  6 
```

请注意，我删除了第一个，因为您可能不想包含您的参考点距自身 0 距离的事实。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T10:46:27.973

替代使用`sort`：

```
sort(dMat[,1], index.return = TRUE)$ix[1:6] 
```

`set.seed(.)`在矩阵中使用时添加一个会很好，`random numbers`这样我们就可以显示结果是相同的。我将在这里跳过结果。

**编辑（正确的解决方案）：**上述解决方案只有在第一个元素*总是*最小的情况下才有效！这是正确的解决方案，它将始终为列的第一个元素提供 5 个最接近的值：

```
> sort(abs(dMat[-1,1] - dMat[1,1]), index.return=TRUE)$ix[1:5] + 1 
```

例子：

```
> dMat <- matrix(c(70,4,2,1,6,80,90,100,3), ncol=1)
# James' solution
> head(order(dMat[-1,1]),5) + 1
[1] 4 3 9 2 5 # values are 1,2,3,4,6 (wrong)
# old sort solution
> sort(dMat[,1], index.return = TRUE)$ix[1:6]
[1] 4 3 9 2 5 1 #  values are 1,2,3,4,6,70 (wrong)
# Correct solution
> sort(abs(dMat[-1,1] - dMat[1,1]), index.return=TRUE)$ix[1:5] + 1
[1] 6 7 8 5 2 # values are 80,90,100,6,4 (right) 
```

# c# - 如何使用核心服务在 Tridion 2011 中创建新用户？

> ID：14355854
> 
> 赞同：1
> 
> 时间：2013-01-16T10:09:59.063
> 
> 标签：c#, tridion, tridion-2011

我知道如何创建组件、页面、结构组，但是在使用 .net 的核心服务创建新用户时遇到了困难？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:32:57.533

这样的事情应该让你开始：

```
public void CreateUser(string userName, string friendlyName, bool makeAdministrator)
{
    var defaultReadOptions = new ReadOptions();

    using (var client = GetCoreServiceClient())
    {
        var user = (UserData)client.GetDefaultData(ItemType.User, null);
        user.Title = userName;
        user.Description = friendlyName;
        user.Privileges = makeAdministrator ? 1 : 0;
        client.Create(user, defaultReadOptions);
    }
} 
```

# ant - JSPC任务给出错误

> ID：14355857
> 
> 赞同：3
> 
> 时间：2013-01-16T10:10:05.517
> 
> 标签：ant

apache.jasper.JasperException [jasperc] org.apache.jasper.JasperException：无法识别的选项：-v9。使用 -help 寻求帮助。对于一个简单的 build.xml

```
<property name="message" value="Deploying the .jar file." />
<property name="src" location="source" />
<property name="output" location="bin" />

<target name="main" depends="init, compile">
    <echo>
        ${message}
    </echo>
</target>

<target name="init">
    <mkdir dir="${output}" />
</target>

<target name="compile">
    <jspc srcdir="${src}"
        destdir="${output}"
        package="org.antbook.jsp"
        verbose="9">
        <include name="**/*.jsp" />
    </jspc>
</target> 
```

在 ant 的库中，我把 servlet-api-2.4.jar jasper-compiler.jar jasper-runtime.jar

不知道追加什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T21:30:20.180

看起来 -v 选项已从 jasper 编译器 5.5 中删除。使用 jasper 编译器 4.1 对我来说很好。

# android - 如何在 CustomListview 中正确使用 CheckBox

> ID：14355858
> 
> 赞同：0
> 
> 时间：2013-01-16T10:10:05.753
> 
> 标签：android, checkbox, android-listview

我有一个带有 [PICTURE] - [TEXT] - [CHECKBOX] 的自定义列表视图当我选择一个复选框并且我喜欢向下滚动时，会选择更多复选框。为什么呢？我该如何解决这个问题？

-> 我只选择一个复选框 -> 然后我向下滑动并选择了更多复选框

![在此处输入图像描述](../Images/9ae5d85dc71357365e07dafa55ec914a.png) ![在此处输入图像描述](../Images/90dfdd83f41c8d594fb03d71b14f0428.png) 最好的问候 MSeiz5

我的自定义适配器_

```
public class CustomAdapter extends BaseAdapter{
            TextView rawTextView;

            boolean[] checkBoxState;
            LayoutInflater mInflater;   
            ListContent holder;
            private ArrayList<Notification> arrNotification=null;

    private ArrayList<HashMap<String, String>> arrlist = new ArrayList<HashMap<String, String>>();

    public CustomAdapter(ArrayList<HashMap<String, String>> arrlist) {

        arrNotification = new ArrayList<Notification>();

        mInflater = LayoutInflater.from(connected_upload.this);
        checkBoxState=new boolean[arrNotification.size()];            
        this.arrlist = arrlist;
    }

    @Override
    public int getCount() {
        return arrlist.size();
    }

    public int getCount2()
    {
        return arrNotification.size();      
    }

    public Object getItem2(int position) 
    {
        return position;
    }
    public long getItemId2(int position) 
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        convertView = mInflater.inflate(R.layout.connected_upload, null);
        holder=new ListContent();
        holder.checkbox = (CheckBox) convertView.findViewById( R.id.checkBox1 );

        convertView.setTag(holder);

        if(convertView == null){
            // LayoutInflater class is used to instantiate layout XML file into its corresponding View objects.
            LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.connected_upload_row, null);

            holder=new ListContent();
            holder.checkbox = (CheckBox) convertView.findViewById( R.id.checkBox1 );

            convertView.setTag(holder);
        }
                   // R.id.img_list, R.id.string_cell
                     maptemp=new HashMap<String, String>();
                     maptemp=arrlist.get(position);
        rawTextView = (TextView) convertView.findViewById(R.id.string_cell);
        rawTextView.setText(maptemp.get("string_cell"));

            if (isfolder == true){
                imgview=(ImageView) convertView.findViewById(R.id.img_list);
                imgview.setImageResource(R.drawable.folder);

            } else {

                    Bitmap test = getbitpam(maptemp.get("img_list"));
                    imgview=(ImageView) convertView.findViewById(R.id.img_list);

                    imgview.setImageBitmap(test); 

                    System.gc();

            }
        return convertView;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

} 
```

日志猫：

```
01-16 13:41:05.885: E/AndroidRuntime(1720): FATAL EXCEPTION: main
01-16 13:41:05.885: E/AndroidRuntime(1720): java.lang.NullPointerException
01-16 13:41:05.885: E/AndroidRuntime(1720):     at mseiz.freeftp.connected_upload$CustomAdapter.getView(connected_upload.java:306)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.AbsListView.obtainView(AbsListView.java:2465)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1250)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.ListView.onMeasure(ListView.java:1162)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2361)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:576)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5057)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.View.measure(View.java:15481)
01-16 13:41:05.885: E/AndroidRuntime(1720):     at android.view.ViewGroup.measureChildWithMargins(V 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:20:37.077

ListView 中的 CheckBox 的问题是视图由于 ListView 的回收而被回收，并且 Checkbox 的值（选中或取消选中）未被维护。为了保持 CheckBox 的状态，必须有一些东西可以存储 Checkbox 的状态。

请参阅此[链接](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)。它有很好的解释示例。

```
 public class ListViewAdapter extends BaseAdapter
 {
            private boolean[] checkBoxState;
            private LayoutInflater mInflater;   
            private ListContent holder;
            private ArrayList<Notification> arrNotification=null;
            public ListViewAdapter(Context context,ArrayList<Notification> notify)
            {     
                arrNotification = new ArrayList<Notification>();

                mInflater = LayoutInflater.from(context);
                checkBoxState=new boolean[arrNotification.size()];
                imageLoader=new ImageLoader(NotificationListActivity.this.getApplicationContext());
            }
            public int getCount()
            {
                return arrNotification.size();      
            }

            public Object getItem(int position) 
            {
                return position;
            }
            public long getItemId(int position) 
            {
                return position;
            }
            public View getView(final int position, View convertView, ViewGroup parent)
            {
                if (convertView == null) 
                {
                    convertView = mInflater.inflate(R.layout.noti_list, null);
                    holder=new ListContent();
                    holder.entity_type = (TextView) convertView.findViewById(R.id.entityname_textview);
                    holder.noti_thumb = (ImageView) convertView.findViewById(R.id.img_noti_thumb);
                    holder.checkbox = (CheckBox) convertView.findViewById( R.id.CheckBox01 );

                    convertView.setTag(holder);
                } 
                else
                {
                    holder = (ListContent)convertView.getTag();
                }           

                holder.noti_thumb.setTag(arrNotification.get(position).thumbnail);
                imageLoader.DisplayImage(arrNotification.get(position).thumbnail,NotificationListActivity.this, holder.noti_thumb);

                holder.checkbox.setChecked(checkBoxState[position]);

                holder.checkbox.setOnClickListener(new OnClickListener()
                {
                    public void onClick(View v) 
                    {
                        if (((CheckBox) v).isChecked())
                        {
                            checkBoxState[position]=true;

                        }
                        else
                        {
                            checkBoxState[position]=false;

                        }
                    }
                });

                holder.checkbox.setTag(position);

                return convertView; 
            }
        }

        class ListContent 
        {
            TextView entity_type;
            TextView content_type;
            ImageView noti_thumb;
            CheckBox checkbox;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:23:08.470

我有同样的问题...

我做了什么：

在我的对象中，我放置和`boolean id_selected`在我的 CustomAdapter 中，我检查是否选择了对象（然后我检查复选框），并在`getView`我禁用可单击的复选框中，并在`convertview`单击中反转`id_selected`并刷新复选框。有了这个，当用户单击复选框或行中时，他们选中或取消选中复选框并可以做你想做的事......

这是一个例子：

```
 final T t = getItem(position);

            if (convertView == null) {
                convertView = inflater.inflate(resourceId, parent, false);
            }

            final View vv = convertView;

            convertView.setClickable(true);
            convertView.setFocusable(true);
            convertView.setBackgroundResource(R.drawable.listview_background);

                  TextView tv_ds_lista          = (TextView) convertView.findViewById(R.id.ds_lista);
            final CheckBox chkbx_id_selecionado = (CheckBox) convertView.findViewById(R.id.id_selecionado);

            chkbx_id_selecionado.setClickable(false);

            convertView.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {    
                        chkbx_id_selecionado.setChecked(!chkbx_id_selecionado.isChecked());

                    t.setId_selecionado(chkbx_id_selecionado.isChecked());

                }
            });

            tv_ds_lista.setText(t.toString());

            return convertView; 
```

我修改了我的一些课程，但精髓就在那里......在我原来的课程中，我使用反射和其他特定方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:19:38.137

尝试设置复选框的标签并在设置复选框的值时检查标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:43:46.450

```
List<String> recIdArr = new ArrayList<String>();
List<String> selectedIds = new ArrayList<String>();
List<String> reportslist;
public View getView(final int position, final View convertView, ViewGroup parent) 
{
  View row = super.getView(position, convertView, parent);
  CheckBox cBox=(CheckBox)row.findViewById(R.id.cb1);

  if(cBox.isChecked())
  {
    selectedIds.add(recIdArr.get(reportslistview.getPositionForView(cBox)));    
  }
  else
  {
    selectedIds.remove(recIdArr.get(reportslistview.getPositionForView(cBox)));
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T10:13:55.923

试试这个..它可能会帮助你。

```
mList.setAdapter(new ArrayAdapter<String>
(mSplitActivity,android.R.layout.simple_list_item_multiple_choice, mStrings));
        mList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

也试试这个 [http://androidcocktail.blogspot.in/2012/04/adding-checkboxes-to-custom-listview-in.html](http://androidcocktail.blogspot.in/2012/04/adding-checkboxes-to-custom-listview-in.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T10:45:11.693

您必须使用自定义适配器存储项目的状态，如下例所示：

```
public class MyAdapter extends ArrayAdapter<MyClass> {
// MyClass has a field named 'selected'

@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View rowView;
        final MyClass item = getItem(position);

        if (convertView == null) {
            LayoutInflater inflator = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            rowView = inflator.inflate(rsc, null);
        } else {
            rowView = (View) convertView;
        }

       //...
       CheckBox chkSelected = (CheckBox) rowView
                .findViewById(R.id.chkSelected);
       chkSelected.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                item.selected = isChecked;
            }
        });
        chkSelected.setChecked(item.selected);

        //...
     }

} 
```

# android - 如何将数据从一个应用程序发送到android中的另一个应用程序？

> ID：14355860
> 
> 赞同：8
> 
> 时间：2013-01-16T10:10:06.687
> 
> 标签：android, android-intent

我需要将一些字符串数据从我的一个应用程序活动发送到我在 android 中的另一个应用程序活动，而不是在同一应用程序内的活动之间。怎么做？我的其他应用程序需要声明什么意图过滤器？请尝试举例说明......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T10:26:43.067

据我从您的回答中了解到，您正在寻找意图：

在 App A - Activity Alpha 的清单上，您声明了一个带有 Category DEFAULT 和 Action = 的意图过滤器 `com.your_app_package_name.your_app_name.ActivtiyAlpha`

在 App B，Activity Beta 上，您将代码用于启动 A 并传递数据：

```
Intent i = new Intent("com.your_app_package_name.your_app_name.ActivtiyAlpha");
i.putExtra("KEY_DATA_EXTRA_FROM_ACTV_B", myString);
// add extras to any other data you want to send to b 
```

然后回到 App A - Activity Alpha 你把代码：

```
Bundle b = getIntent().getExtras();
if(b!=null){
    String myString = b.getString("KEY_DATA_EXTRA_FROM_ACTV_B");
    // and any other data that the other app sent
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T10:21:40.740

如果您只关心少量数据，Android 提供了一个 SharedPreferences 类来在应用程序之间共享首选项。最值得注意的是，您可以将 OnSharedPreferenceChangeListener 添加到每个应用程序，以便在其他应用程序更改值时通知它们。

最重要的是，您无法确保两个应用程序都在运行

[您可以在http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)上找到更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-29T20:55:55.770

我通过使用广播将 gps 坐标从应用 A 传递到应用 B 来通信两个应用

这是在APP B（谁发送数据）

```
Intent sendGPSPams = new Intent();
sendGPSPams.setAction(ACTION_GET_GPS_PARAMS);
sendGPSPams.putExtra("Latitude",latitude);
sendGPSPams.putExtra("Longitude",longitude);
sendGPSPams.putExtra("Velocity",velocity);
sendGPSPams.putExtra("DOP",PDOP);
sendGPSPams.putExtra("Date",time);
sendGPSPams.putExtra("Bearing", bearing);

sendBroadcast(sendGPSPams); 
```

这是在接收 GPS 参数或从应用 B 发送的数据的应用 A 中

```
private  BroadcastReceiver   myBrodcast = new BroadcastReceiver() {
double latitude;
double longitude;
double velocity;
double DOP;
String date;

double bearing;
@Override
public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(ACTION_GET_GPS_PARAMS)) {

            latitude = intent.getDoubleExtra("Latitude", 0);
            longitude = intent.getDoubleExtra("Longitude", 0);
            velocity = intent.getDoubleExtra("Velocity", 0);
            DOP = intent.getDoubleExtra("DOP", 0);
            date = intent.getStringExtra("Date");
            bearing = intent.getDoubleExtra("Bearing", 0);
            String text = "Latitude:\t" + latitude +"\nLongitude\t"+ longitude +
                    "\nVelocity\t" +velocity +"\nDOP\t" + DOP +"\n Date \t" + date +"\nBearing\t" + bearing;
            tv_text.setText(text);

    }
} 
```

};

请看这个视频。

[广播](https://www.youtube.com/playlist?list=PLrnPJCHvNZuBqr_0AS9BPXgU6gvNeai5S)

# java - 在 sling 中创建一个新的 mixin

> ID：14355861
> 
> 赞同：2
> 
> 时间：2013-01-16T10:10:09.000
> 
> 标签：java, jackrabbit, jcr, sling

我无法使用以下代码在 apache sling 中为 jackrabbit 创建新的自定义类型。这在 Jackrabbit 上效果很好，但在 Apache Sling 上效果不佳。我是否正确地为吊索执行此操作？谢谢

以下代码给了我一个“javax.jcr.InvalidItemStateException：冲突”。我使用的是独立的吊索，并且是唯一的用户，所以绝对没有冲突。

```
Repository repository = JcrUtils.getRepository("http://localhost:8080/server");

Session session = repository.login(new SimpleCredentials("admin", "admin".toCharArray()));

NamespaceRegistry registry = session.getWorkspace().getNamespaceRegistry();
registry.registerNamespace("my", "http://my.com/v1.0");

CndImporter.registerNodeTypes(new FileReader("C:\\test.cnd"), session); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:39:27.227

如果您使用的是 Sling，则可以通过将 CND 文件放在 OSGi 包中（无论如何，您的 java 代码应该驻留在其中）中，并带有一个告诉 Sling 在哪里可以找到它的标头来避免所有这些。

当您的捆绑包被激活时，您的节点类型将自动注册。有关此示例，请参阅在该模块的[pom.xml](https://github.com/apache/sling-org-apache-sling-event/blob/master/pom.xml)中设置的 Sling-Nodetypes 包头中声明的[event.cnd](https://github.com/apache/sling-org-apache-sling-event/blob/master/src/main/resources/SLING-INF/nodetypes/event.cnd)文件（或者如果您不使用 Maven，则以任何其他方式）。

另请注意，无论如何您都不应该在 Sling 中需要 JcrUtils.getRepository，获取存储库的正确方法是通过 SlingRepository OSGi 服务，该服务以一致的方式为所有 Sling 组件处理存储库登录和配置。您可以通过 Java 代码中的 SlingRepository 的 @Reference 获取存储库，或者从 Sling 提供的资源中获取 JCR 会话，以请求 servlet 和脚本等处理程序。Slingbucks[示例](http://svn.apache.org/repos/asf/sling/trunk/samples/slingbucks/)使用这两种机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:39:04.043

[InvalidItemStateException](http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/InvalidItemStateException.html)的 JavaDocs提供了这个线索：

> 如果尝试的更改与通过另一个会话对持久工作区所做的更改发生冲突，则节点和属性的写入方法以及保存和刷新会引发异常。如果该对象表示已从工作区中删除的项目，则节点和属性的方法也会抛出。

您确定没有任何旧会话仍在运行，也许是一个未正确关闭的守护进程？

# javascript - 刷新外部加载的 javascript 文件

> ID：14355862
> 
> 赞同：1
> 
> 时间：2013-01-16T10:10:09.047
> 
> 标签：javascript, external

我有许多 js 文件，我将它们放在另一个文件夹中，以便于更新和在不同页面之间共享。这些文件是从另一个页面调用的，我使用

```
<script type="text/javascript" src="/js/file.js"></script> 
```

符号。

这工作正常，但是当我在其中一个 js 文件中更改某些内容时，浏览器（chrome、firefox、safari）仍然会加载以前的版本而不进行更改，因此不会将它使用的 js 文件更新为更新的文件。我试图清理缓存以强制它再次加载 js 文件（带有更改），但无济于事。

我唯一的解决方法是将外部文件重命名为 file2.js 并将其包含在调用它的页面中，但这是一个乏味的过程，因为如果我进行另一项更改，我必须将名称更改为 file3.js 等。

有没有办法强制浏览器重新加载原始js而不使用之前存储的>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T10:15:02.107

您可以通过在 URL 中添加一些独特的内容来强制刷新：

在下面的代码中，必须为每个请求生成字符串“d6aa97d33d459ea3670056e737c99a3d”。你可以使用时间戳、散列、随机数，任何你想要的。正因为如此，浏览器不会重用缓存中的内容，并且总是会下载 JS 文件。

```
<script type="text/javascript" src="/js/file.js?d6aa97d33d459ea3670056e737c99a3d"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:14:42.337

您可以尝试向查询字符串添加随机数的经典技术。

```
<script type="text/javascript" src="/js/file.js?r=123"></script> 
```

这将实现与使用不同文件名相同的效果（就浏览器而言，这是一个不同的 URL），但您不必重命名文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:17:20.820

只需使用这个：

```
<script type="text/javascript" src="/js/file.js?1"></script> 
```

见`?1`文件名后面的。

# c# - 避免“非常量字段不应该可见”的代码分析警告

> ID：14355864
> 
> 赞同：2
> 
> 时间：2013-01-16T10:10:11.587
> 
> 标签：c#, code-analysis

我有一个对象，其中包含在验证对象时检查的业务规则列表。

在类的顶部，我创建了 BusinessRule 类型的静态字段，如下所示：-

```
public class SyncFile : Waterstons.Patterns.Entities.BaseEntity<Guid>
{        
    public static BusinessRule NameRequiredRule = new BusinessRule("Name", "The audit file must have a name");
    ....

    protected override void Validate()
    {
        if (Id == default(Guid))
        {
            AddBrokenRule(IdRequiredRule);
        }
        .... 
```

这导致代码分析抱怨我不应该有公共字段，除非它们是 const。我不确定我可以根据我使用它们的方式将它们定义为 const 。

那么有没有更好的方法来解决这个问题？我应该将它们公开为如下属性吗？

```
 public static BusinessRule _nameRequiredRule = new BusinessRule("Name", "The audit file must have a name");
    public static BusinessRule Test
    {
        get { return _nameRequiredRule; }
    } 
```

还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T10:13:41.330

您可以将静态字段声明更改为此

```
 public static readonly BusinessRule NameRequiredRule = new BusinessRule("Name", "The audit file must have a name"); 
```

所以要确保公共字段在执行过程中不会改变。还要注意使`BusinessRule`类不可变，这样不仅引用不能更改，`NameRequiredRule`而且实例内容在运行时也不能更改。

如果您不能强制执行不变性 - 考虑将`NameRequiredRule`静态字段声明为私有并创建一个静态属性。

```
private static BusinessRule _nameRequiredRule = new BusinessRule("Name", "The audit file must have a name");
public static BusinessRule NameRequiredRule
{
    get { return _nameRequiredRule; }
} 
```

# javascript - 运行编码的 ui 测试时检测 javascript 对话框

> ID：14355869
> 
> 赞同：1
> 
> 时间：2013-01-16T10:10:23.007
> 
> 标签：javascript, visual-studio-2010, dialog, coded-ui-tests

我正在从 Visual Studio 运行编码的 ui 测试。我创建了一个根据控件类型执行操作的库。

例如，如果控件是一个按钮，我会执行以下操作：

```
if (myButton.Id.CompareTo(Id) == 0)
{
    Mouse.Click(myButton);
} 
```

现在，有时单击按钮会打开一个 javascript 对话框以确认单击。我事先不知道哪些按钮会触发一个对话框，所以我想知道如何检测到有一个。然后我会做这样的事情：

```
UIMapInfo.PerformDialogAction(BrowserDialogAction.Ok); 
```

有谁知道如何检测有一个对话框？

# android-contentresolver - 内容解析器的使用

> ID：14355870
> 
> 赞同：12
> 
> 时间：2013-01-16T10:10:23.613
> 
> 标签：android-contentresolver

我是安卓领域的新手，正处于学习阶段。我有几个查询：

每个应用程序是否有一个 ContentResolver 对象？它是一个单例对象吗？谁管理这个对象生命周期？如果是单例的，它如何处理多个查询 ContentProvider 的请求？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-10T11:09:40.173

来自 Alex Lockwood 的博客 - [http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html](http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html)

> **什么是内容解析器？**
> 
> 内容解析器是您的应用程序中的单个全局实例，它提供对您（和其他应用程序的）内容提供者的访问。内容解析器的行为正如其名称所暗示的那样：它接受来自客户端的请求，并通过将这些请求定向到具有不同权限的内容提供者来解析这些请求。为此，内容解析器存储了从权限到内容提供者的映射。这种设计很重要，因为它允许以简单且安全的方式访问其他应用程序的内容提供程序。
> 
> Content Resolver 包括与 Content Provider 类中的抽象方法（插入、删除、查询、更新）对应的 CRUD（创建、读取、更新、删除）方法。Content Resolver 不知道与之交互的 Content Providers 的实现（也不需要知道）；每个方法都传递一个 URI，该 URI 指定要与之交互的 Content Provider。
> 
> **什么是内容提供者？**
> 
> 内容解析器提供应用程序内容提供者的抽象，而内容提供者提供底层数据源（即 SQLite 数据库）的抽象。它们提供了定义数据安全性的机制（即通过强制读/写权限），并提供了一个标准接口，将一个进程中的数据与另一个进程中运行的代码连接起来。
> 
> 内容提供者基于使用 content:// 模式的简单 URI 寻址模型为发布和消费数据提供了一个接口。它们使您能够将应用程序层与底层数据层分离，通过抽象底层数据源使您的应用程序数据源不可知。
> 
> **查询的生命周期**
> 
> 那么简单查询背后的分步过程到底是什么？如上所述，当您通过内容提供程序从数据库中查询数据时，您不会直接与提供程序通信。相反，您使用 Content Resolver 对象与提供者进行通信。下面给出了进行查询时发生的特定事件顺序：
> 
> *   发出呼叫`getContentResolver().query(Uri, String, String, String, String)`。该调用调用内容解析器的查询
>     方法，而不是`ContentProvider's`.
>     
>     
> *   当`query`调用该方法时，内容解析器解析`uri` 参数并提取其权限。
>     
>     
> *   内容解析器将请求定向到向（唯一）授权注册的内容提供者。这是通过调用
>     Content Provider 的`query`方法来完成的。
>     
>     
> *   调用该`Content Provider's query`方法时，将执行查询并返回 Cursor（或引发异常）。产生的
>     行为完全取决于 Content Provider 的
>     实现。

# windows - 如何让 Internet Explorer 自动登录某个域

> ID：14355873
> 
> 赞同：3
> 
> 时间：2013-01-16T10:10:28.903
> 
> 标签：windows, internet-explorer, authentication

在我的 IE 中，当我想访问 SharePoint 网站时，系统会要求我输入用户名/密码（显然）。

有没有办法让 IE 知道，当我访问域 XXX 时，它应该使用某些凭据？即使我必须使用插件。

我尝试了 Windows Vault，但这似乎不适用于 IE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:57:53.603

将域添加到 IE 安全中的“本地 Intranet 站点”。这将登录登录到 PC 的当前用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:20:48.037

您可以在客户端所在的域上设置 ADFS 服务器（身份提供程序）。从您的源域发出的 SAML 或 WS-Federation 令牌将受到第二个 ADFS 服务器（服务提供者）的信任。

以下是您访问 SharePoint 网站时会发生的情况：

1.  你去 SP 站点，“裸体”（没有 kerberos、密码或客户端证书）
2.  您被重定向到本地 ADFS 服务器
3.  您的浏览器使用本地 ADFS 服务器的 Kerberos 票证进行身份验证。
4.  本地 ADFS 服务器发出 SAML 或 WS-Federation 令牌并将您重定向回“远程”SharePoint 站点
5.  您使用包含 WS-Federation 令牌的 POST 转到远程 SharePoint 站点。
6.  看到令牌并信任签名或源域，就授予访问权限。

但说起来容易做起来难。需要注意的事项：

*   您将如何将现有的基于用户名密码的帐户与闪亮的新 ADFS 登录联系起来？
*   如果有重复的用户名怎么办？
*   这是否会破坏仅使用 Kerberos 的远程用户的身份验证（因为对他们来说，它是本地 SharePoint）？
*   更改 URL 以使用户首先访问您的 ADFS 服务器会有什么影响？

+注意：Windows Server 2008 R2 中的 ADFS 服务器角色将安装 ADFS 1.?。不要使用它。下载并安装 ADFS 2.0 或更高版本。

# c# - 优化 linq 查询以增加

> ID：14355874
> 
> 赞同：0
> 
> 时间：2013-01-16T10:10:30.797
> 
> 标签：c#, linq, datatable

我有以下 linq 查询搜索相同的数据表，并且想知道是否可以进行一次搜索并执行以下 for 循环以将数据添加到相同的变量中，以便它可以使系统更快。

```
var sort = configurationData.AsEnumerable().Where(sorts => sorts.Field<String>("QuestionStartText") == question &&
    sorts.Field<String>("slideNo") == Convert.ToString(slideNumber) )
             .Select(sorted => sorted.Field<String>("SortByColumn")).Distinct().AsParallel();

var rowNeedAfterSort = configurationData.AsEnumerable().Where(sorts => sorts.Field<String>("QuestionStartText") == question &&
    sorts.Field<String>("slideNo") == Convert.ToString(slideNumber))
                 .Select(sorted => sorted.Field<String>("NoOfRows")).Distinct().AsParallel();

var indexs = configurationData.AsEnumerable().Where(sorts => sorts.Field<String>("QuestionStartText") == question &&
    sorts.Field<String>("slideNo") == Convert.ToString(slideNumber))
                 .Select(sorted => sorted.Field<String>("ColumnInExcel")).Distinct().AsParallel();

int p = 0;
int chartValue = 0;

foreach (string inedcies in indexs)
{
    if (inedcies != null)
    {
        if (!inedcies.ToUpper().Equals("NULL"))
        {

            if (inedcies.Contains(','))
            {
                Array.Clear(valuesUsed, 0, valuesUsed.Length);
                string[] index = inedcies.Split(',');
                foreach (string a in index)
                {
                    valuesUsed[p] = Convert.ToInt32(a);
                    p++;
                }
            }
            else if (inedcies.Equals("7"))
            {
                Array.Clear(valuesUsed, 0, valuesUsed.Length);
                valuesUsed[p] = Convert.ToInt32(inedcies);
            }
            else
            {
                chartValue = Convert.ToInt32(inedcies);
            }
        }
    }
}

foreach (string sortedint in sort)
{
    if (sortedint != null)
    {
        if (!sortedint.ToUpper().Equals("NULL"))
        {
            SortData2(sortedint);
            sortedData = "true";
        }
    }
}

foreach (string rows in rowNeedAfterSort)
{
    if (rows != null)
    {
        if (!rows.ToUpper().Equals("NULL"))
        {
            string[] values = rows.Split(' ');
            rowCount = Convert.ToInt32(values[1]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:00:05.037

一旦你清理了下面的代码，你将能够看到如何/在哪里可以取出 foreach 循环。

```
 foreach (string a in index)
        {
            valuesUsed[p] = Convert.ToInt32(a);
            p++;
        } 
```

我们有什么保证`index.length < valuesUsed.length`？

```
Foreach (x in y)
{ 
if (x != null)
    {
     do something
    }
} 
```

更具可读性。您也不需要在 foreach 循环中检查元素是否为空。可能需要检查元素的属性，但不需要检查元素本身。

```
y.Foreach(x => do what you need here) 
```

# c# - Linq to sql 表达式树执行区问题

> ID：14355875
> 
> 赞同：1
> 
> 时间：2013-01-16T10:10:34.037
> 
> 标签：c#, sql, linq, linq-to-sql, expression-trees

我有一点问题，想知道是否有办法让我的蛋糕吃掉。

目前我有一个关于如何使用 Linq2Sql 的存储库和查询样式模式，但是我遇到了一个问题，我看不到解决它的好方法。这是问题的一个例子：

```
var someDataMapper = new SomeDataMapper();
var someDataQuery = new GetSomeDataQuery();
var results = SomeRepository.HybridQuery(someDataQuery)
                            .Where(x => x.SomeColumn == 1 || x.SomeColumn == 2)
                            .OrderByDescending(x => x.SomeOtherColumn)
                            .Select(x => someDataMapper.Map(x));

return results.Where(x => x.SomeMappedColumn == "SomeType"); 
```

这里要注意的主要位是 Mapper、Query、Repository 和最后的 where 子句。我这样做是作为更大重构的一部分，我们发现有很多类似的查询得到的结果集略有不同，但随后以相同的方式将它们映射到特定领域的模型。因此，例如取回 a`tbl_car`然后将其映射到一个`Car`对象。因此，映射器基本上采用一种类型并吐出另一种类型，因此与选择中通常发生的情况完全相同：

```
// Non mapped version
select(x => new Car 
{
    Id = x.Id,
    Name = x.Name,
    Owner = x.FirstName + x.Surname
});

// Mapped version
select(x => carMapper.Map(x)); 
```

因此，汽车映射器在执行类似查询并返回相同最终结果但沿途执行不同位的所有区域上更可重用。但是，我不断收到错误消息，说 Map 无法转换为 SQL，这很好，因为我不希望它是这样，但是我明白，因为它在表达式树中，它会尝试转换它。

```
{"Method 'SomeData Map(SomeTable)' has no supported translation to SQL."} 
```

最后，返回和映射的对象被进一步向上传递到堆栈以供其他对象使用，这些对象利用 Linq to SQL 的组合能力向查询添加额外的条件，然后最终 ToList() 或迭代返回的数据，但是它们基于映射模型的过滤器，而不是原始表模型，我认为这在上一个问题中回答得非常好：

[Linq2Sql点取数据](https://stackoverflow.com/questions/13623344/linq2sql-point-of-retrieving-data)

所以总结一下，我可以使用我的映射模式而不尝试将单个部分转换为 SQL 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:13:25.230

是的你可以。放在`AsEnumerable()`最后一个之前`Select`：

```
var results = SomeRepository.HybridQuery(someDataQuery)
                            .Where(x => x.SomeColumn == 1 || x.SomeColumn == 2)
                            .OrderByDescending(x => x.SomeOtherColumn)
                            .AsEnumerable()
                            .Select(x => someDataMapper.Map(x)); 
```

但是请注意，第二个`Where`- 操作的那个`SomeMappedColumn`- 现在将在内存中执行，而不是由数据库执行。如果最后一个 where 子句显着减少了结果集，这可能是一个问题。

* * *

另一种方法是创建一个返回该映射的表达式树的方法。只要映射中发生的所有事情都可以转换为 SQL，就应该像下面这样工作。

```
Expression<Func<EntityType, Car>> GetCarMappingExpression()
{
    return new Expression<Func<EntityType, Car>>(x => new Car 
    {
        Id = x.Id,
        Name = x.Name,
        Owner = x.FirstName + x.Surname
    });
} 
```

用法是这样的：

```
var results = SomeRepository.HybridQuery(someDataQuery)
                            .Where(x => x.SomeColumn == 1 || x.SomeColumn == 2)
                            .OrderByDescending(x => x.SomeOtherColumn)
                            .Select(GetCarMappingExpression()); 
```

# 3d - Matplotlib：使用 alpha 绘制 3d 数据

> ID：14355876
> 
> 赞同：0
> 
> 时间：2013-01-16T10:10:34.673
> 
> 标签：3d, matplotlib

我有 3D 数据，即`data.shape=(N,N,N)`. 我打算做的是在 3D 中绘制这些数据，使用不同的颜色来反映`data[x,y,z]`. 如果某个值低于阈值，我希望该点完全不可见（`alpha=0`）。所以从这个意义上说，我正在寻找“3D 等高线图”。

这甚至可以用matplotlib吗？

感谢您的任何建议。

我在数学中找到了一个解决方案，使用`ListContourPlot3D`. 如果有 matplotlib 的等价物，请告诉我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:37:16.590

这当然是可能的，请参见下面的示例，其中 3 个 nxm 网格相互绘制。请注意，中间的数据（在这种情况下）具有高于某个阈值的屏蔽数据。可以使用颜色图的 cmap.set_bad() 属性来控制 alpha。

```
from mpl_toolkits.mplot3d import Axes3D
import mpl_toolkits.mplot3d.art3d as art3d
import numpy as np
import matplotlib.pyplot as plt 

fig = plt.figure()

ax = fig.add_subplot(111, projection='3d')
fig.text(.5,.9, 'Fancy plot', ha='center', size=14)

ax.set_xticklabels([])
ax.set_yticklabels([])
ax.set_zticklabels([])

cmap=plt.cm.RdYlGn
cmap.set_bad('white', alpha=0)

p = ax.pcolor(x, y, ndvi1data, cmap=cmap)
art3d.poly_collection_2d_to_3d(p, 0)

q = ax.pcolor(x, y, np.ma.masked_where(ndvi2data>100,ndvi2data), cmap=cmap)
art3d.poly_collection_2d_to_3d(q, 5)

o = ax.pcolor(x, y, ndvi3data, cmap=cmap)
art3d.poly_collection_2d_to_3d(o, 10)

ax.set_xlim([x[0,0], x[-1,0]])
ax.set_ylim([y[0,0], y[0,-1]])
ax.set_zlim([0,10])

fig.colorbar(p) 
```

![在此处输入图像描述](../Images/2cfecf850c2f8d36081a2ece8428fc7d.png)

# ruby-on-rails - 如何使用回形针将图像保存到相应的 ID？

> ID：14355877
> 
> 赞同：2
> 
> 时间：2013-01-16T10:10:36.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

![在此处输入图像描述](../Images/3535e0243c181dbb363d08ef4a9a9c0a.png)我在上传图像后显示图像预览。我的视图包含具有姓名、电子邮件 ID、文件上传和图像预览的人员表。在提交按钮上，它将所有图像保存到各自的图像。我被卡住了如何保存每个图像的哈希通过回形针到各自的一个。我成功地获得了以每个人的身份作为密钥的哈希值。我有两个控制器 Person 和 Image，这个预览和保存功能适用于新的和创建的图像。

图像控制器代码：

```
def new
 @people = Person.where("avatar_file_name is ?",nil)
end

def create
 @people = Person.where("avatar_file_name is ?",nil)

 p=@people.coun
 u=Array.new

 @people.each do |e|

    u.push(e.id)
 end

   h=Hash.new
  h=params

   u.each do |x|

     @newimage=h["#{x}"]
        ######## Here in @newimage we get hash of image 
 end` 
end
 end 
```

得到每个图像的哈希后我必须写什么？任何人都需要更多的描述，他们可以问............提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:03:47.657

得到了解决方案......非常简单的一个

```
u.each do |x|

        @person = Person.find(x)
        @person.update_attribute(:avatar,h["#{x}"])

   end 
```

它工作正常

# php - 静态函数可以访问php中的非静态变量吗？

> ID：14355885
> 
> 赞同：8
> 
> 时间：2013-01-16T10:11:06.437
> 
> 标签：php, static-variables

```
<?php
    class Stat
    {
        public $var1='H';
        public static $staticVar = 'Static var';

        static function check()
        {

            echo $this->var1;               
            echo "<br />".self::$staticVar ."<br />";
            self::$staticVar = 'Changed Static';
            echo self::$staticVar."<br />";
        }
        function check2()
        {
            Stat::check();
            echo $this->var1;           
            echo "b";
        }
    }

?> 
```

我可以这样用吗

```
$a = new Stat();
$a->check2(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T10:14:26.580

不，静态方法将无法访问`$this`（因为在静态上下文中没有`$this`可讨论的内容）。

如果您需要在静态方法中引用当前对象，则它不是静态方法。但是，您可以从非静态方法访问静态属性和函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T10:19:11.990

正如其他答案所说，您不能在静态方法中使用实例方法。但是，您可以将静态属性存储为实例数组。使用这样的一些代码：

```
private static $_instances = array();

public function __construct() {
    self::$_instances[] = $this;
} 
```

这样，您可以在静态方法中调用所有实例上的方法。使用这样的一些代码：

```
public static effItAll() {
    foreach (self::$_instances as $instance) {
        $instance->instanceMethod();
    }
} 
```

或者您也可以只存储最后一个实例。或某些实例取决于参数。无论如何，您可以将任何实例存储在静态属性中，从而能够在您的静态方法中调用该实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:14:54.120

你就是不能。`$this`解释很简单：在静态方法上下文中无法访问。你必须找到另一种设计来实现你想要的:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:19:18.923

不可以。静态方法和实例对象不能以这种方式一起工作。但是，您可以将实例对象的引用传递给静态方法：

```
static function check(&$classReference) //Adding class reference to function
{

    echo $classReference->var1;               
    echo "<br />".self::$staticVar ."<br />";
    self::$staticVar = 'Changed Static';
    echo self::$staticVar."<br />";
}
function check2()
{
    Stat::check($this); //Passing $this
    echo $this->var1;           
    echo "b";
} 
```

**然而**，仅仅因为它是可能的并不意味着它应该被完成。可能还有另一种方法可以以更好的 OOP 方式实现您想要的。

# php - MongoDB 查找 $in

> ID：14355893
> 
> 赞同：0
> 
> 时间：2013-01-16T10:11:30.120
> 
> 标签：php, mongodb, mongodb-php

我想看看现场：

```
[case-file-header] => Array (
                      [filing-date] => 20130111) 
```

像这样：

```
$cursor = $mongo->$db->$collection->find(array('case-file-header'=>
                                                     array('filing-date' => 
                                                                 array('$in' => array($current_date))))); 
```

我究竟做错了什么？

我的收藏包含 700 万条记录。以下是一条记录的示例：

```
[_id] => MongoId Object (
    [$id] => 50f5a5630c7263b79a373390
)
[serial-number] => 76713205
[registration-number] => 0000000
[transaction-date] => 20130114
[case-file-header] => Array (
   [filing-date] => 20130111
   [status-code] => 630
   [status-date] => 20130114
   [mark-identification] => ALPHACHEMICAL
   [mark-drawing-code] => 3000
   [attorney-docket-number] => 113,328
   [attorney-name] => William Nitkin
   [principal-register-amended-in] => F
   [supplemental-register-amended-in] => F
   [trademark-in] => T
   [collective-trademark-in] => F
   [service-mark-in] => F
   [collective-service-mark-in] => F
   [collective-membership-mark-in] => F
   [certification-mark-in] => F
 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:17:58.900

您应该真正使用位置运算符，因为 MongoDB 在您进行嵌套时实际上会尝试其他操作，例如：

```
array('case-file-header'=>
array('filing-date' => 
```

所以：

```
$mongo->$db->$collection->find(array(
    'case-file-header.filing-date' => array('$in' => array($current_date))
)); 
```

应该管用

这是与您展示的文档一起使用的确切示例：

```
$mongo = new Mongo();
$db = $mongo->mydb;

$current_date = 20130111;

$db->some_test_collection->insert(array(
    '_id' => new MongoId('50f5a5630c7263b79a373390'),
    'serial-number' => 76713205,
    'registration-number' => 0000000,
    'transaction-date' => 20130114,
    'case-file-header' => Array(
       'filing-date' => 20130111,
       'status-code' => 630,
       'status-date' => 20130114,
       'mark-identification' => 'ALPHACHEMICAL',
       'mark-drawing-code' => 3000,
       'attorney-docket-number' => '113,328',
       'attorney-name' => 'William Nitkin',
       'principal-register-amended-in' => 'F',
       'supplemental-register-amended-in' => 'F',
       'trademark-in' => 'T',
       'collective-trademark-in' => 'F',
       'service-mark-in' => 'F',
       'collective-service-mark-in' => 'F',
       'collective-membership-mark-in' => 'F',
       'certification-mark-in' => 'F'
    )
));
$cursor = $db->some_test_collection->find(array('case-file-header.filing-date' => array('$in' => array($current_date))));
foreach($cursor as $row) var_dump($row);
var_dump($cursor->count());
exit(); 
```

输出为：

```
int 1

array
  '_id' => 
    object(MongoId)[5]
      public '$id' => string '50f5a5630c7263b79a373390' (length=24)
  'serial-number' => int 76713205
  'registration-number' => int 0
  'transaction-date' => int 20130114
  'case-file-header' => 
    array
      'filing-date' => int 20130111
      'status-code' => int 630
      'status-date' => int 20130114
      'mark-identification' => string 'ALPHACHEMICAL' (length=13)
      'mark-drawing-code' => int 3000
      'attorney-docket-number' => string '113,328' (length=7)
      'attorney-name' => string 'William Nitkin' (length=14)
      'principal-register-amended-in' => string 'F' (length=1)
      'supplemental-register-amended-in' => string 'F' (length=1)
      'trademark-in' => string 'T' (length=1)
      'collective-trademark-in' => string 'F' (length=1)
      'service-mark-in' => string 'F' (length=1)
      'collective-service-mark-in' => string 'F' (length=1)
      'collective-membership-mark-in' => string 'F' (length=1)
      'certification-mark-in' => string 'F' (length=1) 
```

所以一定有别的地方不对劲

# php - 以毫秒为单位从时间戳中获取 Dateobject

> ID：14355897
> 
> 赞同：0
> 
> 时间：2013-01-16T10:11:34.533
> 
> 标签：php, timestamp

我有一个以毫秒为单位的时间戳，例如 1358328037000

从中取出 Dateobject 的最快方法是什么？我需要这样 Date(2013,0,2,12,2,20)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:55:24.397

使用从 PHP 5.3 开始提供的[DateTime](http://ca.php.net/manual/en/class.datetime.php)类。您在这里寻找的功能是[createFromFormat](http://ca.php.net/manual/en/datetime.createfromformat.php)：

```
$dt = \DateTime::createFromFormat('U', (string) floor(1358328037000/1000));
echo $dt->format('Y,m,d,h,i,s'); 
```

这将减少微秒，如果它们不重要，这没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:31:12.950

```
$mil = 1358328037000;
$seconds = $mil / 1000;
echo date("y,m,d,h,i,s", $seconds); 
```

我自己没有尝试过，但它应该可以帮助您实现目标。

我还建议您查看这些页面

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)

# tridion - 无法初始化 TDSE 对象。访问 Tridion UI 时无法加载文件或程序集“Tridion.ContentManager.Publishing”

> ID：14355898
> 
> 赞同：1
> 
> 时间：2013-01-16T10:11:35.890
> 
> 标签：tridion, tridion-2011

打开 Tridion UI 时出现此错误：

> 无法初始化 TDSE 对象。无法加载文件或程序集“Tridion.ContentManager.Publishing, Version=6.1.0.996, Culture=neutral, PublicKeyToken=360aac4d3354074b”或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）“Tridion.ContentManager.TypeRegistry”的类型初始化程序引发了异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:39:59.497

很可能您从网络复制了一些扩展或类似的东西，并且您的 DLL 被锁定。您需要找到此 DLL 并从上下文菜单中单击取消阻止。您很可能也必须为所有其他复制的 dll 执行此操作。它应该看起来像这样： [http ://www.izenda.com/Site/KB/Uploads/Images/unblock.PNG](http://www.izenda.com/Site/KB/Uploads/Images/unblock.PNG)

如果你不知道去哪里找 - 使用 procmon

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T14:19:52.467

我还会仔细检查 Tridion.ContentManager.Publishing dll 是否在 GAC 中。
快速查看此内容的方法是查看 c:\windows\assembly 并匹配 DLL 的版本。您可以将 DLL 重新拖放到那里以确保一切正常。

# php - 检查字符串函数

> ID：14355902
> 
> 赞同：1
> 
> 时间：2013-01-16T10:11:47.393
> 
> 标签：php

我目前正在尝试了解一些基本的 php 字符串函数。我目前使用此代码确定输入的用户名是否足够长，例如：

```
 if (strlen($_GET['name']) < 3) {
        echo 'First Name should be at least 3 characters long!';
        exit;
    } 
```

这很好用。如果我想检查特定名称，我应该使用哪个字符串函数？例如，一旦有人在表单字段中输入特定的单词，我想触发一条消息。

一些专家的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:13:44.137

这个[60 个 PHP 验证函数](http://www.maheshchari.com/60-validation-functions-with-php/)的链接是一个很好的资源。

对于您检查名称的情况，您可以使用以下内容：

```
if (strtolower($_GET['name']) === 'joe') {
  // Do something for Joe
}

elseif (in_array(strtolower($_GET['name']), array('dave', 'bob', 'jane')) {
  // Do something else for Dave, Bob or Jane
} 
```

这`strtolower`将确保大写、小写或混合大小写的名称匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T10:13:15.100

你不需要一个函数。您可以使用`if`语句和`==`：

```
if ( $_GET['name'] == 'Dave' )
{
  // user entered 'Dave'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T10:15:08.873

`if`声明，或者如果您打算检查多个名称，`switch()`.

```
switch($_GET['name']){
    case "Eric":
        //Eric
    break;
    case "Sally":
        //Sally
    break;
    case "Tom":
        //Tom
    break;
    default:
        //Unknown
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T10:18:20.663

使用前检查`$_GET['name']`设置的好习惯。回答您的问题是 IMO 的好方法`in_array(needle,haystack)`

```
<?php 

 if (!empty($_GET['name']) && strlen($_GET['name']) < 3) {
        echo 'First Name should be at least 3 characters long!';
        exit;
 }

 //From a database or preset
 $names = array('Bob','Steve','Grant');
 if(in_array($_GET['name'], $names)){
    echo 'Name is already taken!';
    exit;
 }
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T10:21:09.247

您可以使用**strstr**或**stristr**（不区分大小写）函数，如果要搜索句子中的特定单词。

只需检查 php 手册中的[strstr](http://php.net/manual/en/function.strstr.php)和[strstr 即可](http://php.net/manual/en/function.stristr.php)。

# apache - Spring secuity 代理传递失败

> ID：14355904
> 
> 赞同：3
> 
> 时间：2013-01-16T10:11:51.647
> 
> 标签：apache, mod-rewrite, spring-security, proxypass

我已经写了一套规则来重定向

```
http://server.com/application/c/<UserIdValue> 
```

网址的类型

```
http://localserver.com/application/?userid=<UserIdValue> 
```

我在 apache httpd.conf 中写了以下规则

```
<Location  /application>
  ProxyPassReverse http://server.com/application/ 
  RewriteEngine On

  RewriteCond %{REQUEST_URI} /c/ [NC]
  RewriteRule application/c/(.*)$ http://localserver.com/application/?userid=$1 [QSA,P] 
```

有了这个我可以访问我的应用程序中的登录页面和其他页面，但是当我尝试在应用程序中登录/注销时，它会进入“本地服务器”位置。

问题出在 spring security**`j_spring_security_check, j_spring_security_logout`**上。我不知道该怎么做。

Spring 安全性优先于代理通行证！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T09:28:48.013

您必须更改两件事才能使其正常工作：

1.  将您的 ProxyPass / ProxyPassReverse 行更改为不以尾随 / 结尾。
2.  告诉您的应用程序服务器正确设置 contextURL（ProxyPassReverse 不会为您更改表单上的 URI）。如果您使用的是 Tomcat，您可以通过编辑 conf/server.xml，找到带有属性 protocol="HTTP/1.1" 的标签，然后添加两个新属性：proxyHost="localserver.com" proxyPort=" 80"（如果 localserver.com 和 server.com 在同一个端口上运行，则不需要 proxyPort="80"）。

问题 1 的原因是 Spring Security 没有规范化 URI，所以如果代理给你的应用服务器一个类似[http://server.com/application//j_spring_security_check](http://server.com/application//j_spring_security_check)的 URI ，Spring Security 拦截器会将它与[http:/匹配/server.com/application/j_spring_security_check](http://server.com/application/j_spring_security_check)，注意由于额外的斜线而不同，并拒绝拦截请求。

# c# - C# .NET 4.5 中的 JavaScript 解析器和分析器

> ID：14355910
> 
> 赞同：6
> 
> 时间：2013-01-16T10:12:15.410
> 
> 标签：c#, javascript, .net, .net-4.5

不确定标题是否正确解释。

无论如何，我正在构建一个 .NET WPF 应用程序，它应该通过 JavaScript 并识别诸如

1.  如果定义的变量最后被取消
2.  如果正在使用 try/catch/finally 块。
3.  函数调用

我在这里解决了所有围绕 c/c++ 的问题。现在我后悔把我的编译器类装了。

我想知道如何验证 C# 中的第 1-3 点。那里有任何图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T13:27:26.693

您正在寻找的是用 C# 编写的用于 Javascript的[抽象语法树解析器。](http://en.wikipedia.org/wiki/Abstract_syntax_tree)

我知道有几个选择：

Microsoft 的 Ajax Minifier 库带有自己的 AST 解析器（用于缩小/优化 Javascript 文件）。您可以在[Codeplex](http://ajaxmin.codeplex.com/SourceControl/latest#AjaxMinDll/JavaScript/jsparser.cs)上找到它的源代码。

[Esprima.net](https://github.com/Diullei/Esprima.NET)是另一种选择。它是流行的 Javascript 库[Esprima](http://www.esprima.org)的一个端口。

Esprima 的好处是它以通用格式（由 Mozilla 定义）输出 AST，该格式[在](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Parser_API)几个解析器中使用，使得移植实用程序来遍历树等变得非常容易，因为它们都使用相同的底层数据结构.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:05:38.550

查看 IronJS 我知道他们有一个非常好的用于 .Net 的 JavaScript 库

[IronJS](https://github.com/fholm/IronJS)

# git - 如何在 Assembla 上将 Jenkins 配置为 Git？

> ID：14355912
> 
> 赞同：0
> 
> 时间：2013-01-16T10:12:20.463
> 
> 标签：git, jenkins, build-automation

我能够通过 ToutoiseGit（使用 RSA 公钥）克隆 Git，但无法通过 Jenkins 或 bash 克隆。有人可以帮助我是否必须调整詹金斯中的一些设置。我在 bash 中遇到的错误是“权限被拒绝（公钥，键盘交互）致命：无法从远程存储库读取。请确保您具有正确的访问权限并且存储库存在。”

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T21:29:26.610

Jenkins 需要一个密钥对来进行身份验证：

```
sudo su - -s /bin/bash jenkins
ssh-keygen -t rsa -C "jenkins@aws" 
```

在您的 Assembla 设置中，您需要共享该秘密。然后，第一次使用 shell 连接 git（通过 ssh）来摆脱“按是”的烦恼。

`git ls-remote -h git@git.assembla.com:projectname.git HEAD`

在那之后詹金斯应该应付。

[我把它写得](http://splashinapond.blogspot.co.uk/2013/07/ci-with-jenkins-ant-git-and-assembla.html)更详细一点，以帮助我记住！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:03:59.940

jenkins 用户可能是一个访问受限的守护进程。您可能必须更改用户配置，使其不是守护程序。请参阅下面的此链接。[http://colonelpanic.net/2011/06/jenkins-on-mac-os-x-git-w-ssh-public-key/](http://colonelpanic.net/2011/06/jenkins-on-mac-os-x-git-w-ssh-public-key/)

# python - 螃蟹：为什么螃蟹的 UserBasedRecommender 这么慢？

> ID：14355913
> 
> 赞同：5
> 
> 时间：2013-01-16T10:12:21.037
> 
> 标签：python, machine-learning, scikits

螃蟹的基准是（http://www.slideshare.net/marcelcaraciolo/crab-a-python-framework-for-building-recommender-systems page-37）

```
基准纯 Python w/ Python w/ Scipy Dataset dicts 和 NumpyMovieLens 100k 15.32 s 9.56 s http://www.grouplens.org/node/73 Old Crab New Crab

```

但是，就我而言，我需要花费 30 多分钟才能完成，我不知道原因

我的代码是

```
model = MatrixPreferenceDataModel(recommend_data.data)
similarity = UserSimilarity(model, pearson_correlation)
recommender = UserBasedRecommender(model, similarity, with_preference=True)
recommender.recommend("6") 
```

我的数据是 NumpyMovieLens 100k，其中包含来自 1000 名用户对 1700 部电影的 100,000 条评分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T03:48:37.820

螃蟹正在重新设计。数据操作将更有效且更少依赖外部库。它自己的 API 将被简化。我们希望尽快发布稳定版本，以便社区参与进来。目标是创建一个框架来填补 Python 中的这一空白。该项目托管在这里[https://github.com/python-recsys/crab](https://github.com/python-recsys/crab)。

非常欢迎帮助和建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:44:16.447

一年多前我上次看 Crab 时，它使用的是密集数组，它应该使用[稀疏矩阵](https://en.wikipedia.org/wiki/Sparse_matrix)（例如[`scipy.sparse`](http://docs.scipy.org/doc/scipy/reference/sparse.html)）。这让它变得非常缓慢，而且非常耗费内存。刚扫了一眼，Crab 好像快一年没更新了，所以情况大概还是一样吧。

# php - 如何在 iOS 中使用 PHP MySql 将图像存储在数据库中

> ID：14355914
> 
> 赞同：0
> 
> 时间：2013-01-16T10:12:23.053
> 
> 标签：php, mysql

我正在为需要在数据库中存储图像的应用程序制作一个 Web 服务部件。我已经成功存储了名称、消息和其他一些信息，但是对于存储图像我使用了 blob，但仍然需要编写什么函数来保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:16:54.287

在数据库中存储图像的最佳方法是在表中创建二进制大对象列 (BLOB)。然后存储

```
<?php
$dbh = mysql_connect("localhost", "user");
mysql_select_db("test");
$data = file_get_contents($image_filename);
// This is important to avoid a ' to accidentally close a string
$data = mysql_real_escape_string($data);
mysql_query("INSERT INTO testblob(data) VALUES ('$data')");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:28:38.317

您要存储的图像尺寸是多少？我认为 BLOB 的最大值是 64kb。您可能需要使用 MEDIUMBLOB 列类型。

# llvm - llvm MemDepPrinter 段错误

> ID：14355915
> 
> 赞同：2
> 
> 时间：2013-01-16T10:12:27.343
> 
> 标签：llvm

在我尝试使用 MemDepPrinter.cpp 之前，我使用 LLVM 已经存在的通行证没有问题：http: [//llvm.org/doxygen/MemDepPrinter_8cpp_source.html](http://llvm.org/doxygen/MemDepPrinter_8cpp_source.html)。我得到以下段错误：

```
llvm[0]: Compiling MyMemDepPrinter.cpp for Release+Asserts build (PIC)
llvm[0]: Linking Release+Asserts Loadable Module MyMemDepPrinter.so
WARNING: You're attempting to print out a bitcode file.
This is inadvisable as it may cause display problems. If
you REALLY want to taste LLVM bitcode first-hand, you
can force output with the `-f' option.

0  opt       0x08eaf9a8
1  opt       0x08eaff24
2            0xb7753400 __kernel_sigreturn + 0
3  opt       0x08c00c19 llvm::MemoryDependenceAnalysis::getNonLocalPointerDepFromBB(llvm::PHITransAddr const&, llvm::AliasAnalysis::Location const&, bool, llvm::BasicBlock*, llvm::SmallVectorImpl<llvm::NonLocalDepResult>&, llvm::DenseMap<llvm::BasicBlock*, llvm::Value*, llvm::DenseMapInfo<llvm::BasicBlock*> >&, bool) + 3673
4  opt       0x08c019aa llvm::MemoryDependenceAnalysis::getNonLocalPointerDependency(llvm::AliasAnalysis::Location const&, bool, llvm::BasicBlock*, llvm::SmallVectorImpl<llvm::NonLocalDepResult>&) + 266
5  opt       0x08bf1bed
6  opt       0x08e3415c llvm::FPPassManager::runOnFunction(llvm::Function&) + 636
7  opt       0x08e341c8 llvm::FPPassManager::runOnModule(llvm::Module&) + 56
8  opt       0x08e33de4 llvm::MPPassManager::runOnModule(llvm::Module&) + 692
9  opt       0x08e37270 llvm::PassManagerImpl::run(llvm::Module&) + 240
10 opt       0x08e37386 llvm::PassManager::run(llvm::Module&) + 38
11 opt       0x081a290f main + 6095
12 libc.so.6 0xb74604d3 __libc_start_main + 243
13 opt       0x081b8509
Stack dump:
0\.  Program arguments: //home/alex/llvm/Release+Asserts/bin/opt -load //home/alex/llvm/Release+Asserts/lib/MyMemDepPrinter.so -memdep -print-memdeps //home/alex/llvm/tools/clang/woRKSPACE/Test.bc 
1\.  Running pass 'Function Pass Manager' on module '//home/alex/llvm/tools/clang/woRKSPACE/Test.bc'.
2\.  Running pass 'Print MemDeps of function' on function '@_Z9deadcode1i'
./run.sh: line 14:  3326 Segmentation fault      (core dumped) //home/alex/llvm/Release+Asserts/bin/opt -load //home/alex/llvm/Release+Asserts/lib/MyMemDepPrinter.so -print-memdeps //home/alex/llvm/tools/clang/woRKSPACE/Test.bc 
```

当我在 GDB 模式下运行它时，我得到：

```
Program received signal SIGSEGV, Segmentation fault.
0x08c00c19 in llvm::MemoryDependenceAnalysis::getNonLocalPointerDepFromBB(llvm::PHITransAddr const&, llvm::AliasAnalysis::Location const&, bool, llvm::BasicBlock*, llvm::SmallVectorImpl<llvm::NonLocalDepResult>&, llvm::DenseMap<llvm::BasicBlock*, llvm::Value*, llvm::DenseMapInfo<llvm::BasicBlock*> >&, bool) ()
(gdb) x/i $pc
=> 0x8c00c19 <_ZN4llvm24MemoryDependenceAnalysis27getNonLocalPointerDepFromBBERKNS_12PHITransAddrERKNS_13AliasAnalysis8LocationEbPNS_10BasicBlockERNS_15SmallVectorImplINS_17NonLocalDepResultEEERNS_8DenseMapIS9_PNS_5ValueENS_12DenseMapInfoIS9_EEEEb+3673>:  mov    0x10(%eax),%eax 
```

作为更新，线路问题是：

```
MDA.getNonLocalPointerDependency(Loc, true, LI->getParent(), NLDI); 
```

而不是 4 个论点是问题所在。所有这些都已定义，我可以使用它们。如果我消除这条线，我就没有段错误。

我认为问题是在评论中定义的：

```
FIXME: Handle atomic/volatile loads. 
```

请告诉我如何解决问题（可能设置一个条件来避免原子/易失性负载）或者该通行证是否适合您，如果可以，您如何使用它。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:52:09.497

我看到了另一个更新的帖子，所以我认为我最好尝试手动依赖。这不是第一次在开源代码中出现错误。我试图运行通行证，我遇到了同样的问题。getNonLocalPointerDependency 方法的同样问题也出现在其他指令类型上，比如 store，不仅在你提到的地方。

# sharepoint-2010 - SharePoint 2010 可连接的 Web 部件

> ID：14355920
> 
> 赞同：2
> 
> 时间：2013-01-16T10:12:40.140
> 
> 标签：sharepoint-2010

我想创建一个既充当消费者又充当提供者的自定义 Web 部件。

所以我希望我的自定义 webpart 充当两个 OOB 共享点 webpart 之间的桥梁。

WP1 -> **WP2** -> WP3

我想从 WP1 获取数据并希望它对其进行操作，然后将其发送到 WP3 进行过滤。

我的问题是：

1.  我希望提供者仅在 WP1 将数据发送给消费者之后才向 WP3 提供数据。那可能吗 ？

2.  如何将数据（从 WP1 接收）从消费者类发送到提供者类？

有人可以帮忙吗？或者可以提出一些替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T17:15:48.643

您将需要在 Web 部件上实现使用者和提供者接口。这将允许两个 OOB Web 部件与您的 Web 部件对话。由于在您设置过滤器之前 WP2 不会发送值，因此 WP3 可能会显示所有内容；要解决这个问题，您必须将 WP2 发送到 WP3 的默认值设置为不会强制显示数据的值（该值是什么取决于您使用的 webpart）。某种空值可能会起作用。这种帮助？

# matlab - 如何在matlab中一次取两个以上矩阵的外积？

> ID：14355921
> 
> 赞同：9
> 
> 时间：2013-01-16T10:12:42.853
> 
> 标签：matlab, multidimensional-array, matrix, product

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T10:48:38.593

在 的多维（张量）情况下`y = u⊗v`，我相信您需要像这样移动第二个操作数的维度：

```
v_t = permute(v, circshift(1:(ndims(u) + ndims(v)), [0, ndims(u)])); 
```

然后将它们乘以`bsxfun`：

```
y = bsxfun(@times, u, v_t); 
```

常规矩阵乘法仅针对向量和二维矩阵定义，因此我们不能在一般情况下使用它。

另请注意，如果第二个操作数是一维向量，则此计算仍然失败，因为向量`ndims`返回 2 而不是 1。为此，让我们定义我们自己的计算维度的函数：

```
my_ndims = @(x)(isvector(x) + ~isvector(x) * ndims(x)); 
```

要完成答案，您可以定义一个新函数（*例如*，匿名函数），如下所示：

```
outprod = @(u, v)bsxfun(@times, u, permute(v, circshift(1:(my_ndims(u) + my_ndims(v)), [0, my_ndims(u)]))); 
```

然后根据需要多次使用它。例如，`y = a×a×a`将像这样计算：

```
y = outprod(outprod(a, a), a); 
```

当然，您可以编写一个更好的函数，该函数采用可变数量的参数来节省您的打字时间。这些方面的东西：

```
function y = outprod(u, varargin)
    my_ndims = @(x)(isvector(x) + ~isvector(x) * ndims(x));
    y = u;
    for k = 1:numel(varargin)
        v = varargin{k};
        v_t = permute(v, circshift(1:(my_ndims(y) + my_ndims(v)),[0, my_ndims(y)]));
        y = bsxfun(@times, y, v_t);
    end 
```

我希望我的数学是正确的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-19T11:05:43.933

您也可以使用以下`kron`功能：

```
kron(a * a', a) 
```

或者当需要四个外部（克罗内克张量）产品时：

```
kron(kron(a * a', a), a) 
```

等等。最后一个给你一个**mxn**矩阵，其中 m = n * n * n。

如果需要在产品上添加尺寸，您可以使用以下`reshape`功能：

```
reshape(kron(a * a', a), [n, n, n]) 
```

或者

```
reshape(kron(kron(a * a', a), a), [n, n, n, n]) 
```

等等。最后一个给你一个**nxnxnxn**张量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-17T16:07:30.957

[在之前的解决方案](https://stackoverflow.com/a/34875144/8320580)中使用`kron`as的问题是它抛弃了外积的规范索引。

相反，`ndgrid`非常适合这种情况：

```
a = [1; 2; 3];
b = [4; 5];
c = [6; 7; 8; 9];

[xx, yy, zz] = ndgrid(1:length(a), 1:length(b), 1:length(c));

% desired outerproduct
M = a(xx) .* b(yy) .* c(zz); 
```

在纸面上，我们可以检查所需的解决方案`M`是数据立方体：

```
M(:,:,1) = | M(:,:,2) = | M(:,:,3) = | M(:,:,4) = 
           |            |            |
24    30   | 28    35   | 32    40   | 36    45
48    60   | 56    70   | 64    80   | 72    90
72    90   | 84   105   | 96   120   | 108   135 
```

使用克罗内克乘积法

```
M2 = reshape(kron(a * b', c), [length(a), length(b), length(c)]); 
```

我们会得到：

```
M2(:,:,1) = | M2(:,:,2) = | M2(:,:,3) = | M2(:,:,4) = 
            |             |             |
24    36    | 64    84    | 30    45    | 80   105
28    48    | 72    96    | 35    60    | 90   120
32    56    | 72   108    | 40    70    | 90   135 
```

Datacube`M2`具有与 相同的元素`M`，但这些元素已**重新排列**。这是因为在连续块`kron(a * b', c)`中不包含切片`M`以方便直接应用该 `reshape`功能。要以这种方式计算外积，我们需要对`kron(a * b', c)`.

使用的另一个优点`ndgrid`是它很容易泛化到更高阶。

# grid - How to use own created form to create,update records from the Grid. (Struts2-Jquery-Grid Plugin)

> ID：14355923
> 
> 赞同：0
> 
> 时间：2013-01-16T10:13:04.263
> 
> 标签：grid, struts2-jquery, jqgrid

Can this be possible, I created a Jquery grid struts2\. What I did was added this in the Jquery grid.

```
<s:url id="editurl" action="nedit"/> 
```

Then added this options in the

```
navigator="true"
            navigatorAdd="true"
            navigatorSearch="true"
            navigatorRefresh="true"
            navigatorDelete="true"
            resizable ="true"
            draggableZindex="true"
             navigatorAddOptions="{height:525, width:425, readAfterSubmit:true, draggable:true, resizable:true}"
              navigatorEditOptions="{height:525, width:425, reloadAfterSubmit:true, draggable:true, resizable:true}"
              navigatorDeleteOptions="{height:200, width:200, reloadAfterSubmit:true, draggable:true, resizable:true}" 
```

Then enable the collumn of the grid to be editable by adding editable="true".

```
 <sjg:gridColumn name="serial_Number" 
                            index="serial_Number" 
                            title="Serial_Number" 
                            editable="true"
                            sortable="true"/> 
```

Because of that, There are now buttons where you can add, edit and delete record. + for add record, pen for edit record.

Is there a way in which when I click the + or pen button I will use my created form to add the new records? I don't want to use the dialogue box with form created when i click the + or the pen button. I want to use my own form.

As a summary, this is what i like to be done. When I click the + it will transfer to my add record action. When the pen button is click it will go to my edit action plus the key records coming from the grid.

Hope my question is comprehensible.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:46:30.940

您可以添加`addfunc`in以便网格将运行您`navigatorAddOptions`的 自定义函数。您可以在自己的函数中调用自己的表单。`editfunc``navigatorEditOptions`

更多信息在这里

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator)

# batch-file - 在运行时将 Bat 文件保持在顶部

> ID：14355929
> 
> 赞同：1
> 
> 时间：2013-01-16T10:13:15.440
> 
> 标签：batch-file

如何让我的 bat 文件在打开其他程序和文件时保持在最前面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:45:22.363

一种方法是使用诸如[Desk Pins](http://www.snapfiles.com/get/deskpins.html)之类的第 3 方软件来强制任何窗口贴在顶部

# php - 使工具提示以粗体显示

> ID：14355930
> 
> 赞同：1
> 
> 时间：2013-01-16T10:13:19.333
> 
> 标签：php, html, fonts, tooltip, bold

我有以下代码。我想以粗体显示工具提示。

```
$ToolTip = "test";
   <td class="<?php echo BP_TBL_NUMBER_DATA_CLASS; ?>" Title="<?php echo $ToolTip;?>" ><?php echo $TotalStudentsCount; ?></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:24:23.897

标准工具提示（标题属性）无法实现您想要的。由浏览器以他们想要的任何方式显示它。

您可能不得不求助于工具提示的一些 javascript 实现。

**UDPATE**

请注意，使用 CCS3，您可能有机会在没有 javascript 的情况下执行此操作：[https ://stackoverflow.com/a/8788410/508666](https://stackoverflow.com/a/8788410/508666)

虽然不知道浏览器对它的支持。它仍然显示默认标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:22:00.940

其他方法描述了使 td 单元格中的文本变粗的方法，但他想要的是使工具提示变粗。

请注意，工具提示是一个依赖于浏览器的功能，所以我认为您不能真正控制字体粗细。您可能想使用一些 javacript 构建自己的自定义工具提示。这样您就可以完全控制标记。

您可能想在外部样式表中尝试跟随

```
td[title] { font-weight:bold; } 
```

# imagemagick - imagemagick comosite 与图像大小的比例

> ID：14355931
> 
> 赞同：0
> 
> 时间：2013-01-16T10:13:21.183
> 
> 标签：imagemagick, imagemagick-convert

我想用 imagemagick 把年份放在图片上。我有大约4000张照片。我尝试使用 -compose 参数使用 imagemagick 来做到这一点。

徽标为 200x67 像素。

![标识](../Images/1135cd79633caa74c5a5f29c0044f564.png)

但是所有图片的大小都不一样。我如何在每张图片上添加年份的比例大小？

示例图片

![示例图像](../Images/503234b9072f2844557eb518a1b3cdc4.png)

我还没有尝试过 imagemagick，但我用 Photoshop 将徽标放在了两张不同的图片上。或者 imagemagick 处理这个？或者我可以用定义的字体大小在每个图像上放置文本？或者更好地将所有图像转换为一种尺寸？如果是这样，imagemagick 可以告诉我这是最小的图片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:36:09.827

我建议您执行以下操作：

以更大的尺寸创建徽标，以便以后缩小

然后遍历所有图像：

1.  获取图像的图像大小：

    $size_array = getimagesize ( $image_src );

    $width = $size_array[0];

    $height = $size_array[1];

2.  根据图像大小，缩小徽标的副本

3.  在图像上撰写徽标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:24:05.417

我制作了脚本[http://pastebin.com/HdBMx2Zm](http://pastebin.com/HdBMx2Zm)它在我的 XP 机器（ACDSee）和 Windows 7（Windows 集成图像查看器）上看起来不错。在一些图片中，年份有点大胆，但没关系。

```
#!/bin/bash
#
# 
# 
# find /media/sf_test/meklee/ -type f -iname "*.jpg" -exec /root/imagick_script.sh "{}" \;
#
# depends on jhead and imagemagick
# if call find from another file, then is possible to count all pictures, place count on file and in imagick_script.sh
# decrase that amount by 1\. 
# 
# in script some directory names is in Latvian :)
#

backgroundimage=$1
bgp=/media/sf_test/

if [ -f "${bgp}stop" ]
then
    echo -ne "*"
    exit 0
fi

if [ ! -d "${bgp}2019" ]
then
    mkdir -p "${bgp}2019"
fi

# "%[fx:w] %[fx:h] %[exif:DateTime]" (use this if images has no exif data)
#dim=`identify -format "%[fx:.15*w] %[fx:.15*h] %[exif:orientation] %[exif:DateTime]" "$backgroundimage"`

# be careful with auto-orient
# see this: http://www.imagemagick.org/script/command-line-options.php?#auto-orient
#orient=`echo $dim | awk '{print $3}'`
#if [ "$orient" != "1" ]
#then
#orient image (rewrite original)
#    convert -auto-orient "$1" "$1"
#re-read image data
#    dim=`identify -format "%[fx:.15*w] %[fx:.15*h] %[exif:orientation] %[exif:DateTime]" "$backgroundimage"`
#fi

# jhead is much faster...

#ww=`echo $dim | awk '{print $1}'`
#hh=`echo $dim | awk '{print $2}'`
#ww=`printf "%.0f\n" "${ww}"`
#hh=`printf "%.0f\n" "${hh}"`
ww=`jhead "$1" | grep 'Resolution' | awk '{print $3}'`
hh=`jhead "$1" | grep 'Resolution' | awk '{print $5}'`
ww=`echo "$ww * .15" | bc -l  | xargs printf "%1.0f"`
hh=`echo "$hh * .15" | bc -l  | xargs printf "%1.0f"`

if [ "$hh" -gt "$ww" ]
then
    let ww=$ww*2
fi

#year=`echo $dim | awk '{print substr($4,1,4)}'`
# works only if exif is avaiable..
year=`jhead "$1" | grep 'File date' | awk '{print substr($4,1,4)}'`

# i have images takin in range from 2004 to 2012, so if some exim data is removed, use year 2019..
case "$year" in
'2004')
    #
;;
'2005')
    #
;;
'2006')
    #
;;
'2007')
    #
;;
'2008')
    #
;;
'2009')
    #
;;
'2010')
    #
;;
'2011')
    #
;;
'2012')
    #
;;
*)
    year=2019
    mv "$1" "${bgp}2019"
    echo -ne "!"
    exit 0
;;
esac

if [ ! -f ${bgp}${year}.png ];
then
    convert -gravity southeast -size 300x130 xc:transparent -font Courier-bold -pointsize 125 -fill red -draw "text 0,0 '${year}'" ${bgp}output.png
    composite  ${bgp}output.png ${bgp}fons.png ${bgp}${year}.png
    #echo "${year}.png not found, create one ..";
fi

Watermark=${bgp}${year}.png

Fname="${backgroundimage##*/}"
Fdir="${backgroundimage:0:${#backgroundimage} - ${#Fname}}"
#echo "${Fdir}new_$Fname"
#echo "${ww}x$hh $1"
if [ ! -d "/media/sf_test/resize/$year/" ] 
then
    mkdir "/media/sf_test/resize/$year/"
fi

if [ ! -d "/media/sf_test/apstradatie/$year/" ]
then
    mkdir "/media/sf_test/apstradatie/$year/"
fi

if [ ! -f "/media/sf_test/resize/$year/$Fname" ]
then
    composite -gravity southeast \( $Watermark -resize ${ww}x${hh} \) "$backgroundimage" "/media/sf_test/resize/$year/$Fname"
fi
mv "$1" "/media/sf_test/apstradatie/$year"
#"${Fdir}neew_$Fname"

echo -ne "." 
```

# iis-7 - IIS7 中缺少授权规则

> ID：14355940
> 
> 赞同：3
> 
> 时间：2013-01-16T10:13:44.660
> 
> 标签：iis-7

我添加了角色 URL 授权，但我仍然没有在我的网站上单击此选项，我是否需要重新启动 IIS、服务器等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:10:59.250

原来我不得不关闭服务器管理器并重新打开它才能出现。

# algorithm - 如何根据一些已知因素计算人气

> ID：14355943
> 
> 赞同：0
> 
> 时间：2013-01-16T10:13:48.573
> 
> 标签：algorithm, popularity, scoring

我有一个电影列表，其中每个已知以下因素：

*   未来想看电影的人数
*   看过电影的人数
*   喜欢这部电影的人数
*   观看和不喜欢这部电影的人数
*   电影评论数
*   电影页面的页面点击数（直接或来自搜索引擎）

所以基于上述因素，我正在寻找一种方法来计算每部电影的受欢迎程度。在这种情况下，是否有任何已知的公式或算法来计算流行度值？首选算法是那些提供更有效方式来更新先前计算的每个项目的流行度值的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:04:34.167

基本上有无限的方法可以做你所追求的，这取决于每个因素的重要性。

首先，您需要对**数据进行规范化**。一种方法是假设每个特征是[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)的，并找到每个特征的标准差和均值。（您的特征是观看电影的人数、喜欢电影的人数……）。
一旦有了 sd（标准差）和 mu（均值），您就可以轻松地将每部电影的特征转换为使用`norm = (value-mu)/sd`.

*   均值 (mu) 的估计量是简单平均值：`sum(x_i) / n`
*   标准差 (sd) 的估计量是`sd = sqrt(Sum((x_i - mu)^2) / (n-1))`

将数据标准化后，您可以简单地**将评级定义为加权总和**，其中每个特征都会根据其重要性得到提升：

```
a1 * #watched + a2 * #liked + .... 
```

* * *

如果您不知道权重是多少，但愿意手动为一组电影评分，您可以使用监督学习使用[线性回归](http://en.wikipedia.org/wiki/Linear_regression)为您找到 (a1,a2,...,an) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:36:50.583

没有正确的答案，但我认为我们应该尝试将其建模为尽可能接近现实。让我们考虑以下几点： `P1=Proportion of people who watched and enjoyed it`
`P2=Proportion of people who disliked the movie` `P3=Proportion of people who watched and would like to see again` `P4=People who will watch it later but haven't seen it yet` 评论的数量根本无法说明一部电影有多好，尽管它可以说明它有多受欢迎。当然。如果可能的话，您可以利用正面和负面评论的数量来区分（可能通过赞成票和反对票），或者您可以只使用评论的数量（C）。

页面点击数通常应该很好地表明电影的受欢迎程度，所以我们应该在我们的算法中给予它一个很好的权重。此外，我们应该给最近的页面点击量比一年前的页面点击量更大的权重。所以试试并保留过去三天 (N3)、上周 (N7)、上个月 (N30) 和去年 (N365) 以及其他所有内容 (Nrest) 的页面点击次数。

你提出了一个使用我提到的因素的算法。[尝试使用加权平均和霍纳规则的变体进行快速更新。祝你好运。]

# inheritance - Mootools 1.4.5 + 无法执行子类的初始化方法

> ID：14355950
> 
> 赞同：0
> 
> 时间：2013-01-16T10:14:10.683
> 
> 标签：inheritance, joomla, mootools

我已将 Joomla 1.5 网站迁移到 Joomla 2.5。

Joomla 1.5 网站使用 Mootools 1.11。
Joomla 2.5 网站使用 Mootools 1.4.5。
该网站包含一个名为 annuary 的特定功能。

年鉴需要一些基于 Mootools 1.11 的 JavaScript 文件。
我需要将这些文件中的一些说明改编为 Mootools 1.4.5。
这些 JavaScript 文件之一是 Autocompleter.js。
这是 Autocompleter.js 的摘录：

```
var Autocompleter = {};

Autocompleter.Base = new Class({

    ...

    initialize: function(el, options) {

        this.setOptions(options);
        this.element = $(el);
        this.build();
        this.observer = new Observer(this.element, this.prefetch.bind(this), $merge({
        delay: 400
        }, this.options.observerOptions));
        this.value = this.observer.value;
        this.queryValue = null;
    },

    ...

});

Autocompleter.Base.implement(new Events);

Autocompleter.Base.implement(new Options);

Autocompleter.Local = Autocompleter.Base.extend({

    ...

    initialize: function(el, tokens, options) {

        this.parent(el, options);
        this.tokens = tokens;
        if (this.options.filterTokens) this.filterTokens = this.options.filterTokens.bind(this);
    },

    ...

}); 
```

我注意到以下与 annuary 相关的 JavaScript 指令不再按预期工作：

```
new Autocompleter.Local(idChamp, tabValues, {

    'delay': 100,
    'injectChoice': function(choice) {
        var el = new Element('li')
        .setHTML(this.markQueryValue(choice[0]))
        .adopt(new Element('span', {'class': 'example-info'}).setHTML(this.markQueryValue(choice[1])));
        el.inputValue = choice[0];
        this.addChoiceEvents(el).injectInside(this.choices);
    }
}); 
```

执行 Autocompleter.Base 的初始化函数。
但是 Autocompleter.Local 的初始化函数不是。
有人可以解释一下为什么吗？
我确信问题是由使用 Mootools 1.4.5 引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:46:45.107

这让我回...

在 1.2.5 中，Class 进行了相当大的改进。你现在不是做原型然后调用实现/扩展，而是将这些作为修改器来做

```
Autocompleter.Base = new Class({

    Implements: [Options, Events],

    initialize: function(el, options) {

        this.setOptions(options);
        this.element = $(el);
        this.build();
        this.observer = new Observer(this.element, this.prefetch.bind(this), $merge({
        delay: 400
        }, this.options.observerOptions));
        this.value = this.observer.value;
        this.queryValue = null;
    },

    ...

});

Autocompleter.Local = new Class({
    Extends: Autocompleter.Base
}); 
```

您应该阅读一些关于从 1.11 迁移到 1.2.5 的指南/教程。并且 1.2.5 实际上现在不是一个好的版本，它已有 2.5 年的历史，并且由于[https://bugzilla.mozilla.org/show_bug.cgi?id=789036目前在 FireFox 18 中被破坏](https://bugzilla.mozilla.org/show_bug.cgi?id=789036)

see some tutorial on writing classes now like [http://fragged.org/tutorial-write-a-small-content-slider-class-in-mootools-and-extend-it_1321.html](http://fragged.org/tutorial-write-a-small-content-slider-class-in-mootools-and-extend-it_1321.html) etc

# html - 没有浏览器滚动条的 100% 高度的 Div

> ID：14355957
> 
> 赞同：2
> 
> 时间：2013-01-16T10:14:39.893
> 
> 标签：html, css, jquery-ui

我有一个按以下顺序包含 div 的面板

```
<div id="portlet" class="ui-widget-content">
     <div id="header" class="ui-widget-header"> ....</div>
     <div id="content"> ... </div>
</div> 
```

如果内容溢出，我的内容会获得滚动条。我有一个最大化按钮来最大化面板。因此，当我最大化面板时，我添加了以下 css 类。

```
.maximise {
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;
    left: 0px !important;
    top: 0px !important;
    z-index: 1 !important;
 } 
```

但后来我也得到了浏览器滚动条和内容滚动条。请帮忙！！！先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:18:48.517

这通常是因为填充、边框或边距，因此请尝试将这些设置为`0`第一个。

宽度和高度都是在应用填充和边框**之前计算的。**如果这是一个百分比，则 div 的总宽度将是页面的 100% + 任何填充或边框。

您可以告诉浏览器在使用CSS 属性应用填充和边框**后计算这些百分比宽度。**[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

```
.maximise { box-sizing: border-box; } 
```

但是，这不适用于所有浏览器。您可能还需要特定于供应商的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:17:18.280

采用

```
overflow-x:hidden; 
overflow-y:hidden; 
```

隐藏滚动条。

# vb.net - 如何找出在Visual Basic的keyDown事件中按下了哪个键？

> ID：14355966
> 
> 赞同：4
> 
> 时间：2013-01-16T10:15:00.870
> 
> 标签：vb.net, visual-studio-2010

我正在编写我的第一个 Visual Basic 程序，并且我想做一些事情，例如按下“k”按钮，我知道我应该在“KeyDown”事件中编写代码，但我不知道如何找到是否按下了“k”按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:23:38.550

如果您使用的是 Windows 窗体应用程序，则必须将窗体的`KeyPreview`属性设置为，`True`以便窗体将监视关键事件。

然后：

```
Private Sub Form1_KeyPress(ByVal sender As Object, _
ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Me.KeyPress
    If e.KeyChar = "k" OrElse e.KeyChar = "K" Then
        MessageBox.Show("Pressed!")
    End If
End Sub 
```

如果您愿意，可以使用其他事件：

```
Private Sub Form1_KeyDown(ByVal sender As Object, _
ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = Keys.K Then
        MessageBox.Show("Pressed!")
    End If
End Sub 
```

# xml - 为 dbunit 导入/导出 xml

> ID：14355969
> 
> 赞同：12
> 
> 时间：2013-01-16T10:15:08.370
> 
> 标签：xml, dataset, export, dbunit

如何轻松导入/导出 dbunit 可以采用以下格式的数据库数据？

```
<dataset>
   <tablea cola="" colb="" />
   <tableb colc="" cold="" />
</dataset> 
```

我想找到一种方法从数据库中导出现有数据以进行单元测试。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T02:47:52.997

蓝色，这将让您以您想要的格式导出数据。

```
public class DatabaseExportSample {
    public static void main(String[] args) throws Exception {
        // database connection
        Class driverClass = Class.forName("org.hsqldb.jdbcDriver");
        Connection jdbcConnection = DriverManager.getConnection(
                "jdbc:hsqldb:sample", "sa", "");
        IDatabaseConnection connection = new DatabaseConnection(jdbcConnection);

        // partial database export
        QueryDataSet partialDataSet = new QueryDataSet(connection);
        partialDataSet.addTable("FOO", "SELECT * FROM TABLE WHERE COL='VALUE'");
        partialDataSet.addTable("BAR");
        FlatXmlDataSet.write(partialDataSet, new FileOutputStream("partial.xml"));

        // full database export
        IDataSet fullDataSet = connection.createDataSet();
        FlatXmlDataSet.write(fullDataSet, new FileOutputStream("full.xml"));

        // dependent tables database export: export table X and all tables that
        // have a PK which is a FK on X, in the right order for insertion
        String[] depTableNames = 
          TablesDependencyHelper.getAllDependentTables( connection, "X" );
        IDataSet depDataSet = connection.createDataSet( depTableNames );
        FlatXmlDataSet.write(depDataSet, new FileOutputStream("dependents.xml"));
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T10:04:58.487

出口已经回答。要完成答案，您可以通过以下方式将数据集**导入**数据库。 `connection`是类型`IDatabaseConnection`。Mark Robinson 的上一个答案（导出）包含如何创建数据库连接的代码。

```
FlatXmlDataSet dataSet = new FlatXmlDataSet(new FlatXmlProducer(new InputSource(new FileInputStream("dataset.xml"))));
DatabaseOperation.CLEAN_INSERT.execute(connection, dataSet); 
```

# perl - perl如何模拟线程行为

> ID：14355977
> 
> 赞同：2
> 
> 时间：2013-01-16T10:15:28.597
> 
> 标签：perl, unit-testing

我想为 perl 中的子例程编写单元测试。该子例程使用多个线程来完成其任务。因此，它首先创建一些线程，然后等待它们加入。

问题是我们的单元测试在无法运行多线程测试的服务器上运行，所以我需要以某种方式模拟线程行为。基本上我想覆盖线程创建和连接函数，使其不再线程化。任何指针我该如何做到这一点并测试代码？

编辑：服务器无法运行线程代码，原因如下：

> Devel::Cover 还不支持线程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:51:03.503

**更新：**此答案不能解决已编辑问题中描述的 OP 问题，但它可能对某人有用。

Perl 线程是解释器模拟，而不是操作系统功能。所以，他们应该在任何平台上工作。如果您的测试服务器不支持线程，则可能是由于以下原因之一：

1.  您的 Perl 版本*非常*旧。
2.  Perl 是在没有线程支持的情况下编译的。
3.  您的测试框架在创建时并未考虑到线程代码。

前两个可以通过更新您的环境轻松纠正。但是，我怀疑您的问题是第三个问题。

我认为你不应该通过模拟线程行为来解决这个问题。这对原始代码进行了太多更改，无法进行有效测试。无论如何，这将是大量的工作，那么为什么不将精力用于使线程测试正常工作呢？

确切的问题取决于您的代码，但问题可能是您的子例程启动一个线程然后返回，而该线程仍在运行。然后你的测试框架一遍又一遍地运行 sub，积累一大堆并发线程。

在这种情况下，您所需要的只是一个包装子程序，它调用您正在测试的子程序，然后阻塞直到线程完成。这应该相当简单。看看[`threads->list()`](http://perldoc.perl.org/threads.html)如何检测正在运行的线程。在退出包装子之前，只需有一个循环等待相关线程不再运行。

这是一个简单的完整示例，演示了一个包装子：

```
#!usr/bin/perl
use strict;
use warnings;
use threads;

sub sub_to_test {

    threads->create(sub { sleep 5; print("Thread done\n"); threads->detach() });
    return "Sub done\n";
}

sub wrapper {
    #Get a count of the running threads.
    my $original_running_threads = threads->list(threads::running);

    my @results = sub_to_test(@_);

    #block until the number of running threads is the same as when we started.
    sleep 1 while (threads->list(threads::running) > $original_running_threads);

    return @results;
}

print wrapper; 
```

# javascript - 以图像格式以外的格式保存画布

> ID：14355981
> 
> 赞同：0
> 
> 时间：2013-01-16T10:15:35.813
> 
> 标签：javascript, canvas

我已经使用 java 脚本创建了一个画布。我也使用了 EditText。我想以某种格式保存画布，以便我可以再次打开它并查看编辑文本。现在我将它保存为图像 png 文件。但是一旦我保存它edittext 没有得到保存只有图像被保存。是否可以以图像以外的其他格式保存画布？请尽快给我您宝贵的解决方案

# iphone - “Swanky and Moo Moo”字体在 ios 中不起作用

> ID：14355985
> 
> 赞同：0
> 
> 时间：2013-01-16T10:15:49.430
> 
> 标签：iphone, ios, xcode, ipad, uifont

我在我的应用程序中使用“Swanky and Moo Moo”，但它显示的字体样式就像系统字体一样。

这是我的代码....

```
myLabel.font=[UIFont fontWithName:@"Swanky and Moo Moo" size:16]; 
```

我参考了以下链接..

[iOS：如何设置 UILabel 的非系统字体系列、样式、大小？](https://stackoverflow.com/questions/6747325/ios-how-can-i-set-a-non-system-font-family-style-size-of-uilabel)

[http://kgriff.posterous.com/45359635](http://kgriff.posterous.com/45359635)

但这对我没有用......

antone 可以告诉我如何将`myLabel`字体样式设置为**Swanky 和 ​​Moo Moo**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:22:37.873

1.  使用 XCode 作为资源将自定义字体文件添加到项目中。
2.  将应用程序提供的键字体添加到您的信息列表中。（数组键）
3.  对于每种字体，将完整的字体文件名和扩展名作为项添加到键中。
4.  现在您可以将字体用作 UIFont *customFont = [UIFont fontWithName:fontName size:fontSize];
5.  每次抓到字体名不是字体文件名......
6.  您可以安装字体文件以检查其字体名称....使用该名称并进行排序....
    **注意：-如果仍然无法正常工作，请转到构建阶段->复制捆绑资源并添加所有字体文件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:24:54.177

除了您将在[SO](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)`Full name`上找到的解决方案之外，您还需要确保提供您将`Postscript name`在`fontbook`. 尝试`SwankyandMooMoo`或 `Swanky and Moo Moo`。

# silverlight - 将 Silverlight 集成到业务应用程序中

> ID：14355987
> 
> 赞同：-3
> 
> 时间：2013-01-16T10:15:55.850
> 
> 标签：silverlight

我正在使用silverlight（版本5）的业务应用程序模板。我想嵌入从微软表达式库下载的现有用户控件和行为。尽快在我的申请回复中告诉我确切的步骤和预期的更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:24:54.210

1.  添加对您的项目的引用，或者如果您可以访问源代码“添加现有项目”

2.  在您的 .xaml 中添加对的引用，例如：`xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk`

3.  用它： `<sdk:DataGrid/>`

或者

您可以添加 vie 后面的代码：在 xaml.cs 创建对象的新实例：

```
DownloadedUserControl control = new DownloadedUserControl;
LayoutRoot.Children.Add(control) 
```

# c++ - 如何在 C++11 中实现概念

> ID：14355994
> 
> 赞同：3
> 
> 时间：2013-01-16T10:16:29.403
> 
> 标签：c++, c++11, c++-concepts

我在哪里可以看到严格使用 C++11 语言和库功能实现的概念？我更喜欢一个简单的库来立即开始使用它。