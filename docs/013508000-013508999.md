# StackOverflow 问答 13508000-13508999

# c# - 在 C# 中将接口转换为 T

> ID：13508005
> 
> 赞同：1
> 
> 时间：2012-11-22T07:48:38.890
> 
> 标签：c#, generics, interface, casting, theory

我有一段感觉像这样的代码：（我已经剥离了这些方法，因为它们对这个问题没有帮助）

```
public abstract class A { }
public interface I { }
public class C : A , I { }
public class Program
{
    static void Update<T>(List<T> l,A a,I i,C c)
    {

        l.Add((T)a);//Error
        l.Add((T)i);
        l.Add((T)c);//Error
    }
} 
```

抽象类和具体类的转换在编译时失败，但接口没有。

我知道我可以做一些类似`l.Add((T)(object)a);`欺骗编译器的事情，但我不明白为什么将接口转换为 T 有效。（如果它们都出错了，那么我可以假设它是某种类型检查错误）

我在java中尝试过，它们都可以工作。

```
public static <T> void update(List<T> l,C c,I i,A a){
    l.add((T)c);//ok
    l.add((T)i);//ok
    l.add((T)a);//ok
} 
```

仅仅是因为 c# 编译器的方式，还是我缺少一些关于 OOP 的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:57:15.153

为了让编译器理解你的代码，你必须约束`T`with 关键字[`where`](http://msdn.microsoft.com/en-us/library/bb384067.aspx)，像这样：

```
public abstract class A { }
public interface I { }
public class C : A, I { }
public class Program
{
    static void Update<T>(List<T> l, A a, I i, C c)
        // HERE IS THE CHANGE
        where T: C
    {

        l.Add((T)a);//Error
        l.Add((T)i);
        l.Add((T)c);//Error
    }
} 
```

这是因为`T`默认情况下可以是所有内容，甚至不是类，并且只有在约束后代码的所有变体才会起作用。

**只有**当你像我提到的那样限制你的方法时，你才能编译它，所以你唯一能做的就是：

```
var c = new C();
Update<C>(new List<C>(), c as A, (I)c, c); 
```

这是**没用**的，你应该重写你的代码。我认为，您应该使用更多的接口和更少的基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:57:59.117

在编译时，实现接口的类是否`I`实际上可以是类型是未知的`T`，因此编译器不会抱怨。但是`T`在您的代码中是未绑定的，编译器抱怨`T`需要声明边界以使代码更安全。

您可以解决编译时安全问题，并希望在调用站点上一切正常，如下所示：

```
 l.Add((T)(object)a);// no compile time Error but possibly at runtime
  l.Add((T)i);  //no compile time Error but possibly at runtime
  l.Add((T)(object)c);// no compile time Error but possibly at runtime 
```

但是牺牲编译时检查将是一个坏主意。

而是声明一个边界，`T`例如：

```
static void Update<T>(List<T> l, A a, I i, C c)  where T: C {

  l.Add((T)a);// no compile time Error and less likely a runtime error
  l.Add((T)i);  //no compile time Error but still possibly at runtime
  l.Add((T)c);// no compile time Error and less likely a runtime error
} 
```

很容易看出这可能会出错

如果您调用`Update<string>(stringlist, a, i, c)`- 它会中断，因为 A、I 和 C 都不能转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:04:23.997

在 C# 中将任意类型的项转换为泛型类型参数不是一个好习惯。想象有一个不相关的类`D`并且您调用`Update<D>(new List<D>(), new A(), new C())`- 如果您尝试将 的实例添加`A`到`List<D>`.

考虑一个非泛型更简单的实现，您可以在其中使用一些接口`O`，而不是泛型参数，例如：

```
public interface O { }
public interface I : O { }
public abstract class A : O { }
public class C : A, I { }

public class Program {
    static void Update(List<O> l, A a, I i, C c) {
        l.Add(a);
        l.Add(i);
        l.Add(c);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:22:15.877

见6.2.7 C#语言规范（“Explicit conversions involved type parameters”），有解释：

"

给定类型参数 T 存在以下显式转换：

*   *从任何接口类型到 T*。在运行时，如果 T 是值类型，则转换将作为拆箱转换执行。否则，转换将作为显式引用转换或标识转换执行。

*上述规则不允许从不受约束的类型参数直接显式转换为非接口类型*，这可能会令人惊讶。此规则的原因是为了防止混淆并使此类转换的语义清晰。例如，考虑以下声明：

```
class X<T>
{
   public static long F(T t) {
      return (long)t;            // Error 
   }
} 
```

如果允许将 t 直接显式转换为 int，那么人们可能很容易期望 XF(7) 将返回 7L。但是，它不会，因为仅当类型在绑定时已知为数字时才考虑标准数字转换。

"

# gcc - 如何找到用于为我正在使用的 gcc 创建 makefile 的配置选项/glags？

> ID：13508008
> 
> 赞同：1
> 
> 时间：2012-11-22T07:48:43.653
> 
> 标签：gcc, toolchain, gnu-toolchain

我从一些芯片组制造商那里获得了 mips-gcc 工具链源代码和二进制文件。我想构建工具链的源代码，但我不知道用于构建源代码的配置选项/标志。有什么办法可以让我获得这些选项标志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:55:25.860

试试 gcc -v。

这应该为您提供配置参数。

# android - 如何在 Android 中修复此错误 singleCursorHandlerTouchEvent -getEditableSupport FASLE

> ID：13508009
> 
> 赞同：5
> 
> 时间：2012-11-22T07:48:45.220
> 
> 标签：android, webview

我正在尝试创建基于 webview 的 android 应用程序。

在我的应用程序中，我播放视频。我在 logcat 中看到了错误 `singleCursorHandlerTouchEvent -getEditableSupport FASLE`。

如何解决这个问题？

# django - 为 Tastypie 资源实现代理模式

> ID：13508013
> 
> 赞同：1
> 
> 时间：2012-11-22T07:49:22.017
> 
> 标签：django, tastypie

我有一个`FooResource`与 a 相关的 a `BarResource`through a`toOneField`因为我`FooModel`有一个 FK to `BarModel`。我真正感兴趣的是`BlahModel`通过`BlahResource`. 所以我可以从逻辑上得到 a`BlahModel`从 a `BarModel`，我应该如何用 Tastypie 处理这个问题，这样当有 a

```
bar = fields.ToOneField(BarResource, 'bar', full=True) 
```

在 中`FooResource`，我实际上是从 a`BlahModel`而不是`BarModel`?

我知道我不能使用`ToOneField`in `BarResource`to `BlahResource`，因为模型中没有相应的 FK。我也不希望最终陷入复杂的`dehydrate`黑客攻击。在 Tastypie ModelResource 中实现代理模式的最简单方法是什么？

# python - Django - 跟踪整个 QuerySet 的 ForeignKey 关系“向后”

> ID：13508014
> 
> 赞同：2
> 
> 时间：2012-11-22T07:49:32.183
> 
> 标签：python, django, postgresql, django-queryset

是否可以为整个查询集向后跟踪 ForeignKey 关系？

我的意思是这样的：

```
x = table1.objects.select_related().filter(name='foo')
x.table2.all() 
```

当 table1 hase ForeignKey to table2。

在 [https://docs.djangoproject.com/en/1.2/topics/db/queries/#following-relationships-backward](https://docs.djangoproject.com/en/1.2/topics/db/queries/#following-relationships-backward) 我可以看到它只适用于 get() 而不是 filter()

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T08:57:58.017

你基本上想`QuerySet`从你开始的数据中获得不同类型的数据。

```
class Kid(models.Model):
    mom = models.ForeignKey('Mom')
    name = models.CharField…

class Mom(models.Model):
    name = models.CharField… 
```

假设您想让所有妈妈的任何儿子都命名为`Johnny`.

```
Mom.objects.filter(kid__name='Johnny') 
```

假设您想要获取 any 的所有孩子`Lucy`。

```
Kid.objects.filter(mom__name='Lucy') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:56:10.890

你应该能够使用类似的东西：

```
for y in x:
y.table2.all() 
```

但是，在使用查询找到它们之后，您也可以使用`get()`唯一值列表（`id`除非您有不同的指定，否则将是 ）。

所以，

```
x = table1.objects.select_related().filter(name='foo')
for y in x:
   z=table1.objects.select_related().get(y.id)
   z.table2.all() 
```

也应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-27T16:39:08.160

您还可以使用[`values()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values)来获取外键引用的特定值。数据库上的选择查询将`values`减少为仅获取这些值，并且将完成适当的连接。

要重用来自 Krzysztof Szularz 的示例：

```
jonny_moms = Kid.objects.filter(name='Jonny').values('mom__id', 'mom__name').distinct() 
```

这将使用 Kid QueryManager 返回一个妈妈属性的字典。

# json - dgrid 和 DateTextBox

> ID：13508020
> 
> 赞同：0
> 
> 时间：2012-11-22T07:50:02.760
> 
> 标签：json, dojo, dgrid

我正在尝试让 dgrid OnDemandGrid 与 dijit.form.DateTextBox 作为编辑器一起使用。数据通过 JSON 馈送到 OnDemandGrid。最初，我试图从 MySQL 数据库（例如`YYYY-MM-DD HH:MM:SS`）提供原始格式的日期，但是当 DateTextBox 似乎无法解析该字符串时，我尝试只提供日期（例如`2012-11-20`）。然而，这也没有奏效。

所以，我的主要问题是让 DateTextBox 处理日期信息。第二个问题是如何处理时间信息，因为 DateTextBox 不能编辑时间。我目前的方法是，当我拆分 SQL 日期字符串时，我将时间作为 dijit.form.TimeTextBox 的单独列提供给 dgrid。这似乎是一个混乱的解决方案，所以我愿意接受建议。

这是我的网格代码：

```
var grid = new declare([OnDemandGrid, Editor, Keyboard, Selection])({
    store: store,
    query: {aid: "1900", action: "objectListGenerator2" },
    bufferRows: 40,
    loadingMessage: "Loading...",
    columns: [
        {field: "oid", label: "Object ID"},
        Editor({field: "startDate", name: "Start Date", editorArgs: { selector: 'date', datePattern: 'yyyy-mm-dd', locale: 'en-us' }}, DateTextBox, "click"),
        Editor({field: "startTime", name: "Start Time"}, TimeTextBox, "click"),
        Editor({field: "endDate", name: "End Date"}, DateTextBox, "click"),
        Editor({field: "endTime", name: "End Time"}, TimeTextBox, "click"),
        {field: "endDateOid", label: "End OID"}
    ],
}, "grid"); 
```

这是我的 JSON 源的示例字符串：

```
[{"content":"2012-11-20 18:12:00","oid":"2112","author":"","endDateOid":"2113","group":"","endTime":"17:59:00","poid":"0","id":null,"startTime":"18:12:00","gmt":"2012-11-22 00:12:43","name":"The Windows 8 Disaster Rolls On","paid":"1900","endDate":"2012-11-21","type":"startDate","startDate":"2012-11-20","cache":"","cachedate":"0000-00-00 00:00:00"},
{"content":"2013-01-01 17:59:00","oid":"2114","author":"","endDateOid":"2115","group":"","endTime":"16:59:00","poid":"0","id":1,"startTime":"17:59:00","gmt":"2012-11-22 00:14:49","name":"The Windows 8 Disaster Rolls On","paid":"1900","endDate":"2013-01-02","type":"startDate","startDate":"2013-01-01","cache":"","cachedate":"0000-00-00 00:00:00"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:05:26.423

正如我在评论中指出的那样，如果我从列定义中删除“单击”，从而允许立即创建 DateTextBox，则会显示正确的日期。如果稍后添加 DateTextBox，我不确定为什么无法正确解析数据，但至少立即创建它会产生可行的结果。

# android - ksoap2 通信切换应用程序从 android 2.2 到 2.3.3

> ID：13508021
> 
> 赞同：0
> 
> 时间：2012-11-22T07:50:03.213
> 
> 标签：android, .net, web-services, ksoap2, android-ksoap2

我开发了使用 ksoap 库并与 .NET Web 服务通信的软件。

在 android 2.2 版本中一切正常且快速。

最近，我被迫迁移到 2.3.3 Android 版本。

我只是将项目属性更改为 2.3.3 并编译。

有一些错误，但最让我担心的是与网络服务的通信真的很慢......

我正在使用 ksoap 2.5.7 版本...

和想法？

提前致谢！

**我的 Make Request 功能：**

```
public void MakeRequest(final String MethodName,
        final PropertyInfo[] props, final ResponseListener resListener,
        final int timeout, final int retries)
{

    GeneralMethods.debug(this.getClass().toString(), "MakeRequest",
            "MethodName=" + MethodName);
    for (PropertyInfo prop : props)
    {
        if (prop != null && prop.getValue() != null)
            GeneralMethods.debug(this.getClass().toString(), "MakeRequest",
                    prop.name + "=" + prop.getValue().toString());
    }

    final Handler uiThreadCallback = new Handler();

    final Thread RequestThread = new Thread()
    {
        public void run()
        {
            try
            {

                SoapObject Request = new SoapObject(NAMESPACE, MethodName);

                // adding properties
                if (props != null)
                    for (PropertyInfo pi : props)
                    {
                        if (pi.getValue() != null
                                && isComplexType(pi.getValue().getClass()
                                        .getName()))
                        {
                            PropertyInfo complexProp = new PropertyInfo();
                            complexProp
                                    .setValue(getSoapClass(pi.getValue()));
                            complexProp.setName(pi.getName());
                            Request.addProperty(complexProp);

                        }
                        else
                            Request.addProperty(pi);
                    }

                // Set the web service envelope
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(Request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(
                        URL, timeout);
                androidHttpTransport.debug = true; // TODO: comment it on
                                                    // finish debug

                // Load cookies
                List<HeaderProperty> httpHeaders = new ArrayList<HeaderProperty>();
                for (String cookie : cookies.keySet())
                {
                    httpHeaders.add(new HeaderProperty("Cookie", cookie
                            + "=" + cookies.get(cookie)));
                }

                // Call the web service and retrieve result

                @SuppressWarnings("rawtypes")
                List reshttpHeaders = androidHttpTransport.call(NAMESPACE
                        + MethodName, envelope, httpHeaders);

                // save cookies
                 Log.d("DEBUG OUTGOING XML",
                 androidHttpTransport.requestDump);
                androidHttpTransport.debug = true;
                 Log.d("DEBUG INCOMING XML=========================================",
                 androidHttpTransport.responseDump);
                if (reshttpHeaders != null)
                {
                    for (int i = 0; i < reshttpHeaders.size(); i++)
                    {
                        HeaderProperty hp = (HeaderProperty) reshttpHeaders
                                .get(i);
                        String key = hp.getKey();
                        String value = hp.getValue();
                        if (key != null && value != null)
                        {
                            if (key.equalsIgnoreCase("set-cookie"))
                            {
                                String cookieString = value.substring(0,
                                        value.indexOf(";"));

                                cookies.put(cookieString.substring(0,
                                        cookieString.indexOf("=")),
                                        cookieString.substring(cookieString
                                                .indexOf("=") + 1));
                                break;
                            }
                        }
                    }

                }
                // Log.i("test", httpHeaders.toString());
                // final Object res = envelope.getResponse();
                final Object res = envelope.getResponse();
                uiThreadCallback.post(new Runnable()
                {
                    public void run()
                    {
                        // Log.i("Talk2Doc", res.toString());
                        GeneralMethods.debug(this.getClass().toString(),
                                "MakeRequest", "Responce -> MethodName="
                                        + MethodName);

                        resListener.onGotResponse(res);

                    }
                });

            }
            catch (final Exception e)
            {
                GeneralMethods.debug(this.getClass().toString(),
                        "MakeRequest", "Error -> MethodName=" + MethodName
                                + ", Error=" + e.getMessage());
                uiThreadCallback.post(new Runnable()
                {
                    public void run()
                    {

                        e.printStackTrace();

                        if (e.getMessage().contains("login failed"))
                            resListener.onLoginError();
                        else
                        {

                            if (retries < 1
                                    || e.getClass() == SocketTimeoutException.class)
                                resListener.onResponseError(e);
                            else
                            {
                                // retry

                                MakeRequest(MethodName, props, resListener,
                                        timeout, retries - 1);

                            }

                        }

                    }
                });

            }
        }
    };
    RequestThread.start();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:15:28.217

试试这个，只需在项目清单文件中将最低 sdk 版本设置为 8。并回复我的结果。即`android:minSdkVersion="8"`在`AndroidManifest`文件中并回复我的结果。

# android - Galaxy 选项卡现在显示菜单按钮

> ID：13508024
> 
> 赞同：0
> 
> 时间：2012-11-22T07:50:24.207
> 
> 标签：android, android-menu, galaxy-tab

今天早上我在 Android 操作系统中遇到了一个问题。我刚刚创建了一个图像显示应用程序。我的应用程序在一个菜单中有一些功能，其中有两个按钮。第一个是主页按钮，第二个是书签按钮。

当我在安卓手机上运行我的应用程序时，它工作正常，我可以很容易地找到菜单按钮，但是当我在 Galaxy Tab 上运行它时，我找不到菜单按钮。

如何让我的菜单按钮在 Galaxy Tab 中工作？

这是我的代码：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item)
        {
            switch (item.getItemId())
            {
            case R.id.menu_bookmark:
                db.updateContact(new Contact(itemN,imageStatus));  
                  return true;
            case R.id.home_page:
                Intent i = new Intent(imageTouchs.this, Comics.class);
                startActivity(i); 
                  return true;
                  default:
                return super.onOptionsItemSelected(item);
            }
        }    

       @Override
        public boolean onCreateOptionsMenu(Menu menu)
        {
            MenuInflater menuInflater = getMenuInflater();
            menuInflater.inflate(R.layout.menu, menu);
             return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:54:26.637

[告别菜单按钮](http://android-developers.blogspot.in/2012/01/say-goodbye-to-menu-button.html)

如果您已经开发了支持 Android 2.3 及更低版本的应用程序，那么您可能已经注意到，当它在没有硬件菜单按钮的设备（例如 Honeycomb 平板电脑或 Galaxy Nexus）上运行时，系统会添加操作溢出按钮在系统导航旁边。

![在此处输入图像描述](../Images/51dcc4859a25831fbb2add3c01d1f028.png)

# iphone - iOS：查找具有相同标签的所有控件

> ID：13508033
> 
> 赞同：1
> 
> 时间：2012-11-22T07:50:48.767
> 
> 标签：iphone, ios, storyboard

我创建了一个包含 12 个按钮、12 个较小按钮和 12 个标签的故事板。

是这样的：

```
btnBig1.tag = 1
btnSmall1.tag = 1
lbl1.tag = 1

btnBig2.tag = 2
btnSmall2.tag = 2
lbl2.tag = 2 
```

ETC...

现在当一个过程被调用时

```
- (IBAction)processButtonUpInside:(id)sender
{
     UIButton *nButton = (UIButton*)sender;
     int nInt =  nButton.tag;
} 
```

...我想对所有 3 个控件（大按钮、小按钮和标签）做一些事情。

它应该看起来像这样（伪代码）：

```
- (IBAction)processButtonUpInside:(id)sender
{
     UIButton *nButton = (UIButton*)sender;
     int nInt =  nButton.tag;

     UIButton *nButtonBig (UIButton*)CastFromTagID(nInt)
     //do something with the big button

     UIButton *nButtonSmall (UIButton*)CastFromTagID(nInt)
     //do something with the small button

     UILabel *nLabel (UILabel*)CastFromTagID(nInt)
     //do something with the label

} 
```

如您所见，这`CastFromTagID`是我的“自己的发明”。我不知道我应该怎么做。

有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:36:01.357

您可以为每个按钮系列使用 3 个不同的起点：

```
enum {
    kTagFirstBigButton = 1000,
    kTagFirstSmallButton = 2000,
    kTagFirstLabel = 3000,
} 
```

使用它们分配标签：

```
btnBig1.tag = kTagFirstBigButton + 1;
btnSmall1.tag = kTagFirstSmallButton + 1;
lbl1.tag = kTagFirstLabel + 1;

btnBig2.tag = kTagFirstBigButton + 2;
btnSmall2.tag = kTagFirstSmallButton + 2;
lbl2.tag = kTagFirstLabel + 2;
... 
```

现在很容易找到任何东西：

```
- (IBAction)processButtonUpInside:(id)sender
{
     UIButton *nButton = (UIButton*)sender;
     /* I'm not sure what button is `sender` here
        If it's a big or small one you can guess 
        comparing its tag with the first tag 
     */
     int offset =  nButton.tag;

     UIButton *nButtonBig = (UIButton*)[view viewWithTag:kTagFirstBigButton + offset];
     //do something with the big button

     UIButton *nButtonSmall = (UIButton*)[view viewWithTag:kTagFirstSmallButton + offset];
     //do something with the small button

     UILabel *nLabel = (UILabel*)[view viewWithTag:kTagFirstLabel + offset];
     //do something with the label
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:43:21.747

您不应将相同的标签 ID 分配给不同的视图。

确实，做这样的事情：

```
btnBig1.tag = 11 btnSmall1.tag = 12 lbl1.tag = 13;
btnBig2.tag = 21 btnSmall2.tag = 22 lbl2.tag = 23; 
```

然后考虑标签 id 的最后一位数字：

```
UIView *nView = (UIView *)sender;
if (lastDigit(sender.tag) == 3)
// this is a label 
{
    UIButton *nButtonBig = [nView.superview viewWithTag:nInt-2];
    UIButton *nButtonSmall = [nView.superview viewWithTag:nInt-1];
    UILabel *nLabel = (UILabel *)sender;
}
else if (lastDigit(sender.tag) == 2)
..... 
```

其中*lastDigit(sender.tag)*是返回给定整数的最后一位的函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-14T14:15:43.697

在我没有对要在同一标签下编辑的子视图的引用的情况下，我只需获取给定视图的所有子视图，然后遍历所有子视图并检查标签，如果标签匹配我执行一些代码。例如..

```
#define kSameViewTag 9500001

for (int i = 0; i < 10; i++) // add a bunch of same tag views // 
{
  UIView *someview = [UIView new];
  someview.tag = kSameViewTag;
  [YourParent addSubview:someview];
} 
```

然后稍后或每当您需要循环浏览您的视图时，您都可以这样做。

```
NSArray *subviews = [[YourParent subviews] copy];
for (UIView *v in subviews)
{
  if (v.tag == kSameViewTag)
  {
    // Do some code //
  }
} 
```

现在，如果您有很多子视图，这可能会成为性能问题，因此您始终可以在后台线程上运行它，然后跳转到主线程进行 UI 更新。例如：

```
NSArray *subviews = [[YourParent subviews] copy];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    for (UIView *v in subviews)
    {
        if (v.tag == kSameViewTag)
        {
            dispatch_async(dispatch_get_main_queue(), ^{
                // Do Some UI Stuff Here //
            });
        }
    }
}); 
```

# database - 从不就地删除或更新数据的通用数据库

> ID：13508035
> 
> 赞同：53
> 
> 时间：2012-11-22T07:50:53.563
> 
> 标签：database, immutability, survey, database-versioning, datomic

我[深受 Rich Hickey 倡导的](http://www.infoq.com/author/Rich-Hickey)数据管理方法的启发，并在[Datomic](http://www.datomic.com/)中实现，其中数据永远不会就地发生变异，所有版本*始终*保留且可查询，时间是第一类概念。

当然，也有与该描述相匹配的专门数据库，例如 Git 或任何其他源代码控制系统。问题是是否有任何（或多或少）通用的关系、图形、分层、文档或任何其他风格的 DBMS-es 可以有效地用于电子商务 Web 应用程序等。还是 Datomic 是唯一的选择？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-22T12:51:59.197

有一种设计系统的方法，其理念是永不删除或改变数据，称为事件溯源。基本上，这个想法是存储改变系统状态的事件（或事实），而不是状态的快照。事件的历史可以稍后重播，以产生特定目的的预测，以预测任何时间点的状态。为不同目的构建的多个投影可以在系统中共存。更多信息可以在以下网站上找到：

*   [http://martinfowler.com/eaaDev/EventSourcing.html](http://martinfowler.com/eaaDev/EventSourcing.html)
*   [http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/)

它与您所描述的一致，但不仅仅是一个数据库模型，事件溯源和命令查询职责分离 (CQRS) 规定了一种设计整个系统的特殊方式，包括数据库和业务逻辑层。

有一些框架遵循这种方法，例如：

*   [http://www.axonframework.org/](http://www.axonframework.org/)
*   [http://qi4j.org/](http://qi4j.org/)
*   [http://en.jdon.com/](http://en.jdon.com/)

虽然这并不能直接回答您的问题，但它可能会为问题提供不同的视角。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-25T18:36:28.013

[Irmin](https://github.com/mirage/irmin)是一个分布式数据库，它遵循与 Git 相同的设计原则。

# ruby - 如何构建一个正则表达式以匹配没有“。”的单词

> ID：13508041
> 
> 赞同：0
> 
> 时间：2012-11-22T07:51:37.790
> 
> 标签：ruby, regex

假设我有一个这样的字符串：

```
w="abc#name,xy.abc=abc" 
```

我想`"abc"`用另一个字符串替换第一个和第三个。我使用了这段代码：

```
puts w.gsub(/\babc\b/,"replacer");
# => replacer#name,xy.replacer=replacer 
```

第二个`"abc"`被替换的地方，这不是我所期望的。然后我改为以下模式：

```
puts w.gsub(/[^\.]\babc\b/,"replacer");
# => abc#name,xy.abcreplacer 
```

第一个`"abc"`没有被替换的地方。我现在不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:58:10.693

你可以试试

```
/\b(?<!\.)abc\b/ 
```

但这是一个相当蛮力的解决方案，带有负面的后视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:32:35.293

与 Tass 类似，但使用负前瞻

```
/\babc\b(?!=)/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:48:45.447

我会简化正则表达式并依靠`gsub`' 的能力来阻止：

```
target = 'abc'
replacement = 'foo'
'w="abc#name,xy.abc=abc"'.gsub(/#{ target }#|=#{ target }/) { |s| s.sub(target, replacement) }
=> "w=\"foo#name,xy.abc=foo\"" 
```

你想要的模式很简单：

```
<target>#
=<target> 
```

找到那些，然后做一个简单的字符串替换。

这样做并不是将所有逻辑封装到正则表达式中，而是将其分解为两个单独的步骤，从而简化了逻辑，加快了开发时间，并且使代码更易于维护。

正则表达式是一个强大的工具，但有时您不需要复杂的气动锤，您需要一个小巧简单的羊角锤和螺丝刀。

# python - tkinter tkMessageBox html 链接

> ID：13508043
> 
> 赞同：6
> 
> 时间：2012-11-22T07:51:42.393
> 
> 标签：python, python-2.7, tkinter, tkmessagebox

当有人无法使用该应用程序登录时，我在 python tkinter 应用程序中出现了 tkMEssagebox.showerror。是否可以在 tkMessageBox.showerror 中有一个 url 链接？

IE。

> tkMessageBox.showerror("错误","发生错误请访问 www.blahblubbb.com")

我希望 www.blahblubbb.com 可以点击？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:05:14.683

简短的回答：“不！” message 是一个简单的字符串，没有像其他框架的某些小部件那样进行解释。

更长的答案：您可以例如子类+猴子补丁，以提供此类功能。

# c - 如何将两个参数及其大小传递给 Matlab 中的 C 函数？

> ID：13508050
> 
> 赞同：3
> 
> 时间：2012-11-22T07:52:05.727
> 
> 标签：c, matlab

我必须从 Matlab 中调用以下 C 库函数：

```
bool PI_OAD (int ID, const int* channel, const double* pdValueArray, int iArraySize) 
```

并且参数 iArraySize 应该是数组通道和 pdValueArray 的大小。

参数 channel 和 pdValueArray 给出如下：

```
pChannel = uint8(channel);
pStep = uint16(step); 
```

我的 calllib 命令是：

```
calllib(Controller, 'PI_OAD', ID, pChannel, pStep, int32(24)); 
```

它不起作用。

我不知道如何正确传递参数通道的大小和步进。有人有想法吗？谢谢！

编辑：感谢所有的答案，我会在下周二回来工作时尝试你的建议。

一些附加信息：

我需要函数 PI_OAD 来通过硬件接口操作压电元件，通道最多为 1，因为我只有一个轴，步长是我想在压电元件上设置的电压。

它不起作用意味着我从界面中得到一些错误。据我所知，我得到一个“命令太长”，然后是一个“未知命令”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:33:17.097

您的代码中有一些错误：

*   `channel`被声明为`int *`，而您传递一个数组`uint8`
*   `pdValueArray`被声明为`double *`, 而你通过`uint16`

所以传递大小不是你的问题 - 传递其他变量是。

这是我写的一个简单的dll：

```
int PI_OAD (int ID, const int* channel, const double* pdValueArray, int iArraySize){
  int i; 
  mexPrintf("ID %d, size %d\n", ID, iArraySize);
  for(i=0; i<iArraySize; i++)
    mexPrintf("%lf ", pdValueArray[i]);
} 
```

这是我从 MATLAB 中调用它的方式

```
lib = loadlibrary('libtestlib.so','testlib.h');

ID=int32(10);
pChannel = int32([1:10]);
pStep = double([1:10]);
calllib('libtestlib', 'PI_OAD', ID, pChannel, pStep, int32(numel(pChannel)));

unloadlibrary('libtestlib'); 
```

这是输出

```
ID 10, size 10
1.000000 2.000000 3.000000 4.000000 5.000000 6.000000 7.000000 8.000000 9.000000 10.000000 
```

一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:11:21.697

您需要编写一个 MATLAB MEX-Wrapper，它是一个 C 函数，它将采用 MATLAB 定义的类型（通常是 mxArray）并将它们转换为正确的类型。

MEX 函数并不难编写，请参阅

[http://www.mathworks.com/help/matlab/creating-cc-and-fortran-programs-to-be-callable-from-matlab-mex-files.html;jsessionid=874554659556527535e9ea9a084c](http://www.mathworks.com/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html;jsessionid=874554659556527535e9ea9a084c)

和：

[http://www.mathworks.com/help/matlab/apiref/mexfunction.html](http://www.mathworks.com/help/matlab/apiref/mexfunction.html)

您可以在 MATLAB 文档中学习许多示例。他们中的许多人都接近你想要的。

# python - 将 Ghostscript 从 os.popen 转换为 subsession.popen python

> ID：13508055
> 
> 赞同：3
> 
> 时间：2012-11-22T07:52:19.440
> 
> 标签：python, subprocess, popen, ghostscript

我需要为 Ghostscript 创建一个 Monkey 补丁，我必须从 to 迁移`os.popen`，`subsession.popen`因为我无法在我的系统中使用 shell。

我以这种方式尝试过：

```
def mioGhostscript(tile, size, fp):
    """Render an image using Ghostscript (Unix only)"""

    # Unpack decoder tile
    decoder, tile, offset, data = tile[0]
    length, bbox = data

    import tempfile, os

    file = tempfile.mktemp()

    # Build ghostscript command
    command = ["gs",
        "-q",                    # quite mode
        "-g%dx%d" % size,        # set output geometry (pixels)
        "-dNOPAUSE -dSAFER",     # don't pause between pages, safe mode
        "-sDEVICE=ppmraw",       # ppm driver
        "-sOutputFile=%s" % file,# output file
        "- >/dev/null 2>/dev/null"
    ]

    #command = shlex.split(string.join(command))
    # push data through ghostscript

    try:
        #gs = os.popen(command, "w")

        args = command#['gs','-dSAFER','-dNOPAUSE','-dBATCH','-sDEVICE=jpeg','-sOutputFile=/home/user/output2.jpg /home/user/downloads/test.pdf']
        gs = subprocess.Popen( args, stdout = PIPE, stderr = STDOUT, stdin=PIPE )
        # adjust for image origin
        if bbox[0] != 0 or bbox[1] != 0:
            #gs.write("%d %d translate\n" % (-bbox[0], -bbox[1]))
            gs.stdin.write("%d %d translate\n" % (-bbox[0], -bbox[1]))
        fp.seek(offset)
        while length > 0:
            s = fp.read(8192)
            if not s:
                break
            length = length - len(s)
            raise Exception(s)
            gs.stdin.write(s)
        gs.communicate()[0]
        status = gs.stdin.close()
        #status = gs.close()
        #if status:
        #   raise IOError("gs failed (status %d)" % status)
        im = Image.core.open_ppm(file)
    finally:
        try: os.unlink(file)
        except: pass

    return im

import PIL
PIL.EpsImagePlugin.Ghostscript = mioGhostscript 
```

但我有这个回溯：

```
Traceback (most recent call last): File "/home/web/lib/driver_mod_python.py", line 252, in handler buf = m.__dict__[pard['program']](pard) File "/home/dtwebsite/bin/cms_gest_ordini.py", line 44, in wrapped return func(pard) File "/home/dtwebsite/bin/cms_gest_ordini.py", line 95, in wrapped return func(pard) File "/home/dtwebsite/bin/cms_gest_picking_list.py", line 341, in picking_list tr_modelllo = render_row_picking_list(pard, item, picked=0, plist_allowed=plist_allowed) File "/home/dtwebsite/bin/cms_gest_picking_list.py", line 432, in render_row_picking_list aa = a.tostring() File "/rnd/apps/interpreters/python-2.5.6/lib/python2.5/site-packages/PIL/Image.py", line 532, in tostring self.load() File "/rnd/apps/interpreters/python-2.5.6/lib/python2.5/site-packages/PIL/EpsImagePlugin.py", line 283, in load self.im = Ghostscript(self.tile, self.size, self.fp) File "/home/dtwebsite/bin/cms_gest_picking_list.py", line 64, in mioGhostscript gs.stdin.write(s) IOError: [Errno 32] Broken pipe 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:21:00.153

我找到了问题的解决方案。它与`PIL`软件包一起，在安装过程中没有正确编译。之后我遇到了依赖问题。我通过以下方式修复它：

```
import PIL.EpsImagePlugin
PIL.EpsImagePlugin.Ghostscript = mioGhostscript 
```

然后我在命令中看到了这个：

```
"- >/dev/null 2>/dev/null" 
```

该代码是shell的代码，它在我的系统上不起作用，因为python试图读取一个字面上命名的文件 `- >/dev/null 2>/dev/null`并且它不存在。

我换了

```
"- >/dev/null 2>/dev/null" 
```

和

```
"-" 
```

程序现在从`stdin`.

最终代码是：

```
def mioGhostscript(tile, size, fp):
    """Render an image using Ghostscript (Unix only)"""

    # Unpack decoder tile
    decoder, tile, offset, data = tile[0]
    length, bbox = data

    import tempfile, os

    file = tempfile.mktemp()

    # Build ghostscript command
    command = ["gs",
        "-q",                    # quite mode
        "-g%dx%d" % size,        # set output geometry (pixels)
        "-dNOPAUSE -dSAFER",     # don't pause between pages, safe mode
        "-sDEVICE=ppmraw",       # ppm driver
        "-sOutputFile=%s" % file,# output file
        "-"
    ]

    #command = shlex.split(string.join(command))
    # push data through ghostscript

    try:
        #gs = os.popen(command, "w")

        args = command#['gs','-dSAFER','-dNOPAUSE','-dBATCH','-sDEVICE=jpeg','-sOutputFile=/home/user/output2.jpg /home/user/downloads/test.pdf']
        gs = subprocess.Popen( args, stdout = PIPE, stderr = STDOUT, stdin=PIPE )
        # adjust for image origin
        if bbox[0] != 0 or bbox[1] != 0:
            #gs.write("%d %d translate\n" % (-bbox[0], -bbox[1]))
            gs.stdin.write("%d %d translate\n" % (-bbox[0], -bbox[1]))
        fp.seek(offset)
        while length > 0:
            s = fp.read(8192)
            if not s:
                break
            length = length - len(s)
            gs.stdin.write(s)
        gs.communicate()[0]
        status = gs.stdin.close()
        #status = gs.close()
        #if status:
        #   raise IOError("gs failed (status %d)" % status)
        im = Image.core.open_ppm(file)
    finally:
        try: os.unlink(file)
        except: pass

    return im

import PIL.EpsImagePlugin
PIL.EpsImagePlugin.Ghostscript = mioGhostscript 
```

我希望这篇文章可以帮助某人。

# google-cloud-datastore - 为什么 google appengine 数据存储实体键的值如此复杂？

> ID：13508057
> 
> 赞同：0
> 
> 时间：2012-11-22T07:52:26.710
> 
> 标签：google-cloud-datastore

```
Entity Kind  Account
Entity Key   ahJkZXZ-YnVmZmFsb2hvcm5ocmRyDQsSB0FjY291bnQYAgw
ID   2 
```

为什么实体键的值如此复杂以及appengine如何生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:26:03.663

键的两个破折号分隔的部分是[Base64](http://en.wikipedia.org/wiki/Base64)编码的字符串，最后的填充字符被删除。通过解码这两个部分，您可以获得几个可识别的字符串和一堆控制字符：

```
$ base64 -d <<<ahJkZXZ=
j^Rdev
$ base64 -d <<<YnVmZmFsb2hvcm5ocmRyDQsSB0FjY291bnQYAgw=
buffalohornhrdr^M^K^R^GAccount^X^B^L 
```

我想 GAE 使用你自己的标识符来生成这个字符串，但由于我不熟悉它，我不知道确切的算法。

# php - 检查密码格式

> ID：13508060
> 
> 赞同：0
> 
> 时间：2012-11-22T07:52:35.430
> 
> 标签：php

如何检查用户输入的密码格式。字符串不重复，使用用户必须选择数字、字符串（小写/大写）

听到是我的代码。我在 preg_match 中的问题是什么？

```
function checkPassFormat($ip)
{
    if(preg_match('/^[a-A][0-9]/', $password))
        return TRUE;
    else 
        return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:08:44.403

I think this is a cute solution for the issue (you can also collect the errors and show the user a friendly message):

```
const SECURELEVEL_LOW = 1;
const SECURELEVEL_MEDIUM = 2;
const SECURELEVEL_HIGH = 3;
const SECURELEVEL_SERVICE = 4;

const CONTAINS_LETTERS = 1;
const CONTAINS_DIGITS = 2;
const CONTAINS_CASESENSITIVELETTERS = 4;
const CONTAINS_SPECIALCHARS = 8;

public function _isValid($value) {
    $valid = true;
    switch ($this->_options['secureLevel']) {
      case self::SECURELEVEL_SERVICE:
        $minLength = 20;
        $hasToContain = self::CONTAINS_LETTERS + self::CONTAINS_DIGITS + self::CONTAINS_CASESENSITIVELETTERS + self::CONTAINS_SPECIALCHARS;
        break;
      case self::SECURELEVEL_HIGH:
        $minLength = 8;
        $hasToContain = self::CONTAINS_LETTERS + self::CONTAINS_DIGITS + self::CONTAINS_CASESENSITIVELETTERS;
        break;
      case self::SECURELEVEL_LOW:
        $minLength = 4;
        $hasToContain = 0;
        break;
      case self::SECURELEVEL_MEDIUM:
      default:
        $minLength = 5;
        $hasToContain = self::CONTAINS_LETTERS + self::CONTAINS_DIGITS;
        break;
    }

    if (strlen($value) < $minLength) {
      $valid = false;
    }
    if (strpos($value, ' ') !== false) {
      $valid = false;
    }

    if ($hasToContain & self::CONTAINS_LETTERS) {
      // Password has to contain letters
      if (!preg_match('/[a-z]/i', $value)) {
        $valid = false;
      }
    }

    if ($hasToContain & self::CONTAINS_DIGITS) {
      // Password has to contain numbers
      if (!preg_match('/[0-9]/', $value)) {
        $valid = false;
      }
    }

    if ($hasToContain & self::CONTAINS_CASESENSITIVELETTERS) {
      // Password has to contain small and capital letters
      if (!preg_match('/[a-z]/', $value) || !preg_match('/[A-Z]/', $value)) {
        $valid = false;
      }
    }

    if ($hasToContain & self::CONTAINS_SPECIALCHARS) {
      // Password has to contain a special character
      if (!preg_match('/[^0-9a-zA-Z]/', $value)) {
        $valid = false;
      }
    }

    return $valid;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:54:32.233

我认为这`[a-A]`意味着您只允许 small 和 capital `A`。这应该是`[a-zA-Z]`。您也可以尝试`[a-Z]`，但在 C# 中，例如这不能按预期工作。

此外，您可能需要说“*多个*字母后跟*多个*数字”：`[a-zA-Z]+[0-9]+`。这将允许像`abDCkl98`.

如果你想混合字母和数字，你应该做类似的事情`[a-zA-Z0-9]+`。这适用于像`a9Bdc4re`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:56:26.623

尝试这个：

```
preg_match("/^[a-zA-Z0-9]+$/", $password) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:56:31.693

按照您的示例，这是另一种选择：

```
"/[:alpha:][:digit:]/" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:59:27.300

```
试试这个
$pattern = "/^[a-zA-Z0-9]*$/i";
if(preg_match($pattern, $value)){           
   返回真；
}别的{
   返回假；
}

```

# vb.net - Vb.Net/SSIS 脚本任务 - 处理空值

> ID：13508067
> 
> 赞同：0
> 
> 时间：2012-11-22T07:53:11.423
> 
> 标签：vb.net, ssis

请参阅下面的代码（处理空值的问题）

```
Dts.Variables("File_Name").Value = Framework.GetValue("FileName")
Dts.Variables("File_Id").Value = Framework.GetValue("FileName")

Dts.Variables("File_Name").Value - Data type defined in STRING
Dts.Variables("File_Id").Value - Data type defined in INTEGER 
```

`Framework.GetValue`- 返回`STRING`（获取存储在数据库中的值）

问题 - 当 Framework.GetValue 因为数据库中不存在值而没有返回任何内容时，它会在 SSIS 脚本组件中引发错误。如何捕捉`NULL`是我们面临的问题

公共函数 GetValue(ByVal FetchParameter As String) As String

```
Dim lGetValue As String = String.Empty

Using Conn New SqlConnection(ConnString)
    SQLCommand = New SqlCommand("ParameterValues", _ETLFrameworkConn)
    SQLCommand.CommandText = "Select ParamValue from ParameterValues where Parameter_Name=@ParameterField"
    SQLCommand.Parameters.Add(New SqlParameter("@ParameterField").Value SqlDbType.NVarChar))
    SQLCommand.Parameters("@ParameterField").Value = FetchParameter 
    Try
        Conn.Open()
        lGetValue = SQLCommand.ExecuteScalar()
    Catch ex As Exception

    End Try
End Using

Return lGetValue 
```

结束功能

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:33:34.650

在 GetValue() 函数中尝试以下代码片段。在代码中添加了 DBNULL 处理。如果没有值 String.Empty 将被写入。

```
Dim lGetValue As String = String.Empty

Using Conn New SqlConnection(ConnString)
    SQLCommand = New SqlCommand("ParameterValues", _ETLFrameworkConn)
    SQLCommand.CommandText = "Select ParamValue from ParameterValues where Parameter_Name=@ParameterField"
    SQLCommand.Parameters.Add(New SqlParameter("@ParameterField").Value SqlDbType.NVarChar))
    SQLCommand.Parameters("@ParameterField").Value = FetchParameter 
    Try
        Conn.Open()
        var retrunVal = (string)SQLCommand.ExecuteScalar()

        IF returnVal = DBNULL.Value Then
            lGetValue = returnVal
        End

    Catch ex As Exception

    End Try
End Using

Return lGetValue 
```

希望这可以帮助！

# c# - Linq 结果到双（多维数组）数组？

> ID：13508068
> 
> 赞同：0
> 
> 时间：2012-11-22T07:53:21.117
> 
> 标签：c#, linq, multidimensional-array

我想将 linq 结果分配给双数组。我有两个对象数组。我像下面这样获取它们：

```
var chartSeries = MeterReadings.GroupBy(x => x.Name)
                  .Select(g => new
                  {
                     Name = g.Key,
                     Data = g.Select(x => x.Value).ToArray(),
                     Date = g.Select(x => x.ReadDate).ToArray()
                  }).ToArray(); 
```

并尝试分配代码：

```
foreach (var item in chartSeries)
{
    int length = item.Data.Length;
    object[,] data =  ???  //first array item.Data and second item.Dates
    Series localSeries = new Series 
                         {
                              Name = item.Name, Data = new Data(data), Type = ChartType 
                         };
     Series.Add(localSeries);
 } 
```

这一行`object[,] data = ???` 我应该写什么？我想要类似的东西`object[,] data = { item.Data, item.Dates }`

我试图得到这样的：

```
Data = new Data(new object[,]
       {
          { new DateTime(1970, 9, 27), 0 },
          { new DateTime(1970, 10, 10), 0.6 },
          { new DateTime(1970, 10, 18), 0.7 },
          { new DateTime(1970, 11, 2), 0.8 },
          { new DateTime(1970, 11, 9), 0.6 },
          { new DateTime(1970, 11, 16), 0.6 },
          { new DateTime(1970, 11, 28), 0.67 },
          { new DateTime(1971, 1, 1), 0.81 },
          { new DateTime(1971, 1, 8), 0.78 },
          { new DateTime(1971, 1, 12), 0.98 },
          { new DateTime(1971, 1, 27), 1.84 },
          { new DateTime(1971, 2, 10), 1.80 },
          { new DateTime(1971, 2, 18), 1.80 },                                                            
          { new DateTime(1971, 6, 12), 0 }
       }) 
```

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:09:34.053

我更喜欢使用 var ：

```
var data = new object[2][];
data[0] = item.Data.Cast<Object>().ToArray();
data[1] = item.Date.Cast<Object>().ToArray(); 
```

根据您提供的精度，您可以使用：

```
var data = item.Date.Zip(item.Data, (n, m) => new[] { n as object, m as object }).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:04:49.110

像这样的东西应该做你需要的：

```
object[,] data = new object[2,length];

for (int i; i < length; i++)
{
    data[0, i] = item.Date[i];
    data[1, i] = item.Data[i];
} 
```

您将需要验证应该如何构造数组 (`object[2,length]`或`object[length,2]`。另外，我假设日期应该放在“第一个”中。

# c# - 签署未签名的 dll 会改变 dll 的行为

> ID：13508069
> 
> 赞同：0
> 
> 时间：2012-11-22T07:53:21.580
> 
> 标签：c#, dll, strongname

我不确定要问什么，因为我不确定到底是什么问题。我有一个项目需要对其所有程序集文件进行签名，并且我有一个未签名的第 3 方程序集。我在这篇文章[Signing an Unsigned Assembly](http://buffered.io/posts/net-fu-signing-an-unsigned-assembly-without-delay-signing/)中使用了类似案例 2 的 ilasm 和 ildasm 。之后我可以使用 dll，但它的行为与以前不同（其中一个类中的属性不能使用）。只是为了澄清我是否在没有签名的情况下在辅助项目中使用 dll，它们工作正常

可能出了什么问题，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:41:01.813

好的，我发现了问题所在，我在 GAC 中有这个 dll 的旧版本，一旦我删除它，一切正常

# c# - SQL Server CE 4 异步调用

> ID：13508071
> 
> 赞同：0
> 
> 时间：2012-11-22T07:53:35.497
> 
> 标签：c#, .net, sql-server-ce, sql-server-ce-4

我正在尝试创建对 SQL Server CE 4 数据库的异步调用。`BeginExecuteReader`据我了解，连接字符串和命令对象的命令没有异步处理参数。我的目标是提供对`SELECT`命令的异步调用，以使应用程序中的大列表更快地工作并对用户响应更快，而无需完整的 CRUD。

那么有什么好的解决方案吗？在这种情况下是否值得异步？现在，我对所有 SQL Server CE 命令都有同步调用，并为每个调用打开/关闭连接。

我知道如何进行基本的异步调用，但在这种情况下，我不太确定这是一个正确的决定。第一个想法是让连接始终打开并以异步方式调用它。还没有尝试，但觉得这不是正确的方法。

感谢任何建议和想法。

# c++ - 确定不安全演员表的警告

> ID：13508076
> 
> 赞同：1
> 
> 时间：2012-11-22T07:53:56.897
> 
> 标签：c++, casting, clang, long-integer

我正在将遗留应用程序移植到 Linux 上的 64 位。有很多地方 long 和 int 可以互换使用，而且源代码相当大，很难通过测试来捕获所有这些。我打算使用插件来静态分析代码并修复不安全的代码。一种这样的模式是

```
void foo(unsigned long *x){
    *x = *x + 1; //x is pointing to a 32-bit space
    return;
}

int main(){
    unsigned int x = ;
    foo(reinterpret_cast<unsigned long*>(&x)); 
} 
```

我们使用 gcc-4.2.1 来构建我们的应用程序。即使启用了 -Wall 和 -Wextra，它也不会警告我这些类型的演员表。

我尝试使用 -Weverything 运行 clang，但没有成功。铿锵声中是否有一个标志来警告我这些类型的有风险的显式强制转换？如果没有，我该如何添加一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:02:48.850

我认为clang不会直接警告您正在寻找的情况。但是，创建一个插件来检测所有 C 风格强制转换和/或`reinterpret_cast<>()`s 的使用是相当简单的。`tools/clang/examples/PrintFunctionNames`如果您有源代码树，则有一个如何在目录中创建插件的示例。如果您位于伦敦地区，您可能会对我下周一[的演讲感兴趣。](http://accu.org/index.php/accu_branches/accu_london)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:08:29.567

那么想到的最简单的方法就是简单地查找/替换所有`reinterpret_cast`并`static_cast`编译 - GCC会给你一堆关于无效的错误`static_cast`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:58:34.130

您通过 using 显式强制转换`reinterpret_cast`，因此编译器假定您知道自己在做什么。否则，无论你在哪里做的每一次演员都会收到警告。

# mysql - 用于处理“MySQL 服务器已消失”错误的 Python Singleton 类

> ID：13508079
> 
> 赞同：1
> 
> 时间：2012-11-22T07:54:22.177
> 
> 标签：mysql, python-2.7, singleton, mysql-python

当我试图执行查询时 -

```
select * from students where id = 20 
```

使用 Python 的**MySQLdb**库，我遇到了一个异常：`_mysql_exceptions.OperationalError`说`MySQL server has gone away`. 我的一些朋友建议我使用现有的 mysql 连接。所以我开始引用[这个链接](http://natefactorial.com/2009/11/19/python-singletons-a-cool-way/)，并在下面的代码中使用了相同的**Singleton**类，它仍然给了我同样的异常。

```
#DBConnect.py
import MySQLdb as connector
from Singleton import Singleton
class DBConnect:
    # As the link suggests
    __metaclass__  = Singleton
    def __init__(self):
        self.dbConnection = connector.Connect(host = 'localhost', user = 'root', 
                                          passwd = 'root', db = 'school')
        self.dbCursor = self.dbConnection.cursor(cursorclass=connector.cursors.DictCursor) 

    def getRecord(self,query):
        self.dbCursor.execute(query)
        result = self.dbCursor.fetchone()
        return result

    def __del__(self):
        self.dbCursor.close()
        self.dbConnection.close()

if __name__ == '__main__':
    dc = DBConnect()
    query = "select * from students where id = 20"
    result = dc.getRecord(query) 
```

我试图创建更多的**DBConnect**实例，例如 -

```
dc2 = DBConnect()
dc3 = DBConnect() 
```

当我打印 dc、dc2 和 dc3 时，它给出了 -

```
<__main__.DBConnect object at 0x8a5fe8c> 
<__main__.DBConnect object at 0x8a5fe8c> 
<__main__.DBConnect object at 0x8a5fe8c> 
```

意思是同一个例子。那么问题似乎是什么？为什么我不能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:38:06.150

问题实际上是单例。它作为单例的唯一目的是确保只创建一个类的一个实例。当您`__metaclass__ = Singleton`在类中使用该行时，您确保只能`DBConnect`创建一个实例，并且该类的任何后续实例都将指向同一个实例。因此，当您使用`dc2 = DBConnect()`and时`dc3 = DBConnect()`，您只是指回相同的实例，因此您看到的标识符相同。

这是导致该行为的单例代码部分：

```
def __call__(self, *args, **kw):
        if self.instance is None:
            self.instance = super(Singleton, self).__call__(*args, **kw)

        return self.instance 
```

创建 的实例后`DBConnect`，`self.instance`不再是`None`，这意味着您第一次创建的实例（存储在 中`self.instance`）是您调用类时返回的实例。

我的（不请自来的）建议是从头开始，只是尝试获得与 MySQLdb 库一起使用的基本连接 - 您在上面提到的错误表明 MySQL 错误，因此进行一些故障排除可能是最好的行动方案。

# objective-c - 如何使用访问令牌在objective-c中使用gdata将视频上传到youtube

> ID：13508083
> 
> 赞同：1
> 
> 时间：2012-11-22T07:54:33.403
> 
> 标签：objective-c, youtube

这是我的代码，可以成功将视频上传到 youtube。它正在使用用户名和密码，但我将使用访问令牌。非常感谢。

```
GDataServiceGoogleYouTube *service = [self youTubeService];
NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:kGDataServiceDefaultUser
                                                             clientID:@"test"];
    NSData *data = [NSData dataWithContentsOfFile:videoPath];
    NSString *filename = [videoPath lastPathComponent];
    GDataMediaTitle *title = [GDataMediaTitle textConstructWithString:strVideoTitle_];
    GDataMediaCategory *category = [GDataMediaCategory mediaCategoryWithString:strCategory_];
    [category setScheme:kGDataSchemeYouTubeCategory];
    GDataMediaDescription *desc = [GDataMediaDescription textConstructWithString:strVideoDescription];
    GDataMediaKeywords *keywords = [GDataMediaKeywords keywordsWithString:strkeyWord_];
    GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
    [mediaGroup setMediaTitle:title];
    [mediaGroup setMediaDescription:desc];
    [mediaGroup addMediaCategory:category]; 
    [mediaGroup setMediaKeywords:keywords];
    [mediaGroup setIsPrivate:isPrivate_];
    NSString *mimeType = [GDataUtilities MIMETypeForFileAtPath:videoPath
                                               defaultMIMEType:@"video/mp4"]; 
    GDataEntryYouTubeUpload *entry;
    entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                          data:data
                                                      MIMEType:mimeType
                                                          slug:filename];
    SEL progressSel = @selector(ticket:hasDeliveredByteCount:ofTotalByteCount:);
    [service setServiceUploadProgressSelector:progressSel];
    gDataServiceTicket_ =  [[service fetchEntryByInsertingEntry:entry
                                       forFeedURL:url
                                         delegate:self
                                didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)] retain]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:41:11.097

感谢这个话题：http://stackoverflow.com/questions/8228212/gdata-java-client-oauth2-access-token-secret，我通过修改gdata解决了这个问题。

首先，修改文件 GDataServiceGoogle.m 中的 requestForURL 函数，如下所示：

```
...
// add the auth token to the header if ([authToken length] > 0) 
{ 
//NSString *value = [NSString stringWithFormat:@"GoogleLogin auth=%@", authToken]; 
NSString *value = [NSString stringWithFormat:@"Bearer %@", authToken]; 
[request setValue:value forHTTPHeaderField: @"Authorization"]; } 
else if ([authSubToken_ length] > 0) 
{ NSString *value = [NSString stringWithFormat:@"AuthSub token=%@", authSubToken_]; 
[request setValue:value forHTTPHeaderField: @"Authorization"]; 
} 
return request; 
```

其次，在youTubeService函数中添加：

//[服务setUserCredentialsWithUsername:StrUserName_密码:StrPassword_]; 不再需要

[服务 setAuthToken:@"我的访问令牌"];

此外，我使用最新版本的 gdata。

# ios5 - Titanium.App.addEventListener 在 ios 设备上导致“未定义”对象应用程序错误

> ID：13508085
> 
> 赞同：0
> 
> 时间：2012-11-22T07:54:41.190
> 
> 标签：ios5, webview, ios6, appcelerator, appcelerator-mobile

我正在使用 Titanium.App.addEventlistener 来捕获由 Titanium.App.fireEvent 从本地 web 视图触发的事件。

在网络视图中：

```
Titanium.App.fireEvent('webviewToTi', {id:0}); 
```

在应用程序中：

```
Ti.App.addEventListener('webviewToTi', function(e){
     alert('I am in app.js: ' + e.id);
}); 
```

这在 iOS 模拟器中运行良好，但是当我在我的 ipad 上运行它时，我得到了 Appcelerator 红屏死机：

**'undefined' 不是对象（评估 'Titanium.App.addEventListener'）** 

我用 Ti.App.addEventlistener 运行了一些不同的测试，即使在一个不包含任何其他内容的精简项目中，我仍然遇到这个问题。

有谁知道为什么这个错误专门存在于ios设备中而不是模拟器中？

谁能建议一种与我的 webview 进行通信的替代方式。

*（请不要 webview 的内容是本地的，而不是远程的，我知道远程网站无法进行这种类型的通信）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:41:21.597

我想通了，所以我发帖分享我的发现：

似乎将代码放在单独的文件中并使用 **Titanium.include**适用于模拟器，但不适用于 iphone 或 ipad。

为了摆脱错误，我不得不将所有代码放入一个文件中。这使它有点难以阅读，我希望有一个更好的修复，但这似乎目前有效。

# android - 加密从移动应用程序发送的数据，这可能吗？

> ID：13508089
> 
> 赞同：1
> 
> 时间：2012-11-22T07:55:13.410
> 
> 标签：android, ios, email, sendmail, encryption

我正在制作一个 IOS 和一个 Android 应用程序，可以选择向我的公司发送邮件以进行联系或其他什么，现在我正在寻找一种方法来加密该电子邮件，这可能还是我会发现死胡同？

我搜索了谷歌、博客、stackoverflow 等，我发现的唯一一件事是发送电子邮件的不同应用程序已加密，但我认为这不是我要寻找的方式，邮件是从我的应用程序发送的，而不是从另一个应用程序发送的..

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:58:46.080

您可以使用外部库加密数据。然后，您可以将数据放入电子邮件中并发送。

这是使用 AES 128 密码的一种很好的加密技术：

[http://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)

**更新：**

参考 pst 的评论，我同意在这种情况下非对称密钥加密更好。

对于非对称密钥加密，您可以像这样使用[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding"); 
```

它有不同的模式和方案，你可以使用它。因此，您可能想阅读以下内容：

[http://www.di-mgt.com.au/rsa_alg.html#pkcs1schemes](http://www.di-mgt.com.au/rsa_alg.html#pkcs1schemes) http://scienceblogs.com/goodmath/2009/01/08/cryptographic-padding-in-rsa/

另请参阅 andorid 中的 Cipher 类：http: [//developer.android.com/reference/javax/crypto/Cipher.html](http://developer.android.com/reference/javax/crypto/Cipher.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:58:54.010

你不能通过 API 说邮件应该自动应用一些加密。您必须这样做，然后将其放入邮件中

# jquery - Ajax 站点和哈希链接

> ID：13508091
> 
> 赞同：1
> 
> 时间：2012-11-22T07:55:20.977
> 
> 标签：jquery, ajax, hyperlink

我的网站是基于 ajax 的。我有一些 id= 的 div，`content`它是由`.get`-request （来自 jquery）动态生成的。问题是内容内部有链接：`<a href="site.com/#some_hash">text</a>`并且它应该重新加载页面应用到`some_hash`. 我怎样才能点击这些链接并重新加载页面？

```
$('.content a').bind('click', function() {
   alert('Clicked!');
}); 
```

这不会引起警觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:57:49.760

我认为你应该使用 jquery on() [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('click', '#content a', function() {
    YOUR FUNCTION
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:04:36.877

您当前的代码不起作用的原因是 jQuery“绑定”只运行一次 - 当页面加载时。因此，之后添加到 DOM 的链接不会将事件绑定到它们。

要解决此问题，您可以使用 jQuery 中的 .on() 方法。

```
$(document).on('click', '#content a', function() {
    YOUR FUNCTION
}); 
```

您也可以使用 .live() - 但现在已弃用。

**然而** ，Ajax 有一套庞大且完善的设计模式，虽然我不打算讨论制作整个站点 ajax 的优缺点，但我强烈建议您查看为此类功能制作的一些插件，例如：

*   [http://max.jsrhost.com/ajaxify/](http://max.jsrhost.com/ajaxify/)
*   [http://github.com/rails/turbolinks](http://github.com/rails/turbolinks)
*   [http://pjax.heroku.com](http://pjax.heroku.com)

这些将立即为您做很多此类事情，让您专注于其他事情。

# apache-flex - 无法下载 flexmojos 插件，maven 忽略存储库配置

> ID：13508097
> 
> 赞同：1
> 
> 时间：2012-11-22T07:55:45.273
> 
> 标签：apache-flex, maven, maven-plugin, flexmojos

我有 Flex 项目，我需要 flexmojos-maven-plugin 来构建它。

```
<plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    ...
</plugin> 
```

我还提到了存储库

```
<repositories>
    <repository>
        <id>flexmojos</id>
        <url>http://repository.sonatype.org/content/groups/flexgroup/</url>
    </repository>
</repositories> 
```

但是 maven 会忽略它，并且不会尝试从那里下载插件。

```
[INFO] Scanning for projects...
Downloading: http://repo1.maven.org/maven2/org/sonatype/flexmojos/flexmojos-maven-plugin/3.9/flexmojos-maven-plugin-3.9.jar
[INFO] Unable to find resource 'org.sonatype.flexmojos:flexmojos-maven-plugin:maven-plugin:3.9' in repository central (http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR 
```

请指教。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:40:41.510

3.9 版本似乎有问题。我可以成功下载 3.8 版本，没有任何问题。但是 3.9 会触发“无法找到资源”错误。

我怀疑您在解决存储库时遇到了问题。有时 Maven 输出并不能很好地展示它从远程存储库读取的努力。特别是当您重复运行相同的失败命令时（例如`mvn clean install`）。

查看您的本地存储库。如果您可以在下面找到任何内容，`org/sonatype/flexmojos`那么您肯定会正确解析存储库。

我建议您将其发布在邮件列表中：[https ://docs.sonatype.org/display/FLEXMOJOS/Project+Information](https://docs.sonatype.org/display/FLEXMOJOS/Project+Information)

# java - 选择一个对象，但排除 Hibernate 中的特定成员

> ID：13508100
> 
> 赞同：3
> 
> 时间：2012-11-22T07:56:23.000
> 
> 标签：java, hibernate, select, orm

我想使用 Hibernate 选择一个对象，但排除它的一些成员（在我的例子中是一个集合）。模型对象在我的应用程序中被广泛使用，所以我不想更改映射。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:02:14.980

您可以随时退回到 HQL，尤其是在这是一个只读用例的情况下。HQL 让您基本上可以创建一个 SQL 查询以仅返回您需要的字段，但它比原始 SQL 更安全，并且不会绕过 Hibernate，而是与 ORM 核心一起工作。

您将使用 SELECT 子句仅获取您需要的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:31:39.940

我不确定您是否可以在不更改映射的情况下做您想做的事情。就个人而言，我会将映射更改为惰性而不是急切，因为您可以轻松覆盖惰性加载。假设您大部分时间都在使用 HQL（因为您说您已经在使用它），然后您可以通过`fetch <field-name>`在 HQL 的`from`部分中添加来保持渴望加载，然后根本不将获取添加到您特别想要的 HQL延迟加载。当然，这种更改需要与您的团队进行沟通，因为任何新查询都应该考虑他们是否需要急切或延迟加载，但总的来说它不应该造成严重的破坏。

# c - execl vs execv，参数大小未知

> ID：13508115
> 
> 赞同：0
> 
> 时间：2012-11-22T07:57:47.910
> 
> 标签：c, shell, unix, process, exec

情况如下：我必须在我的项目中使用 execl 和 execv ，问题是如果参数大小未知但路径已知，我应该如何使用 execl ？或者我应该每次都使用 execv 。它们之间有什么区别？

例如，如果用户输入： gcc ac -o a.out 或在另一行输入 ls -l 我如何在 execl 或 execv 中执行它们？ps：我可以找到路径，或者用户可以输入它。

另一个主要问题是，如果我有几条路径，我怎么能分开我的命令所在的正确路径，如果其他情况，我应该尝试每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:09:07.520

You use `execl` when you know the size of the argument list, you use `execv` when you have to construct the argument list dynamically.

I don't understand the second question. But you shouldn't ask two questions in one post in SO. Start another question with your second one, and explain more clearly what you're asking.

# oracle - 在 weblogic 服务器中自动部署/重新加载 jar

> ID：13508125
> 
> 赞同：2
> 
> 时间：2012-11-22T07:58:33.260
> 
> 标签：oracle, soa, weblogic-10.x, suite

我是 Oracle SOA Suite 11.1.1.4 的新手……目前我正在研究用户定义的 XPath 函数。作为其中的一部分，我将准备一个 jar 文件并需要部署到 weblogic server(10.3) 域 lib 文件夹（fusionmw\soasuite\11gR1\11.1.1\sp4\user_projects\domains\DOMAIN_NAME\lib）。当这个 jar 被更改时，我需要在服务器域库中替换它并重新启动服务器以加载更改。但我觉得这不是生产服务器重启的好习惯。

有没有办法将更新的 jar 自动加载到服务器的域中，这样更改将立即反映，而不是重新启动服务器。

在此先感谢，斯瓦米。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T17:54:39.897

### 使用自动部署时的几句话

*   当您在 autodeploy 文件夹中添加/替换/删除 jar/war/ear 时，请确保服务器正在运行。否则服务器不同步
*   确保服务器在开发模式下运行，否则服务器实例看不到自动部署文件夹更改
*   如果您在 windows 系统中打包 jar/war/ear 然后将其部署到在 Unix 环境中运行的 weblogic 服务器，weblogic 实例将无法通过以下异常解包/自动部署文件

    java.util.zip.ZipException：打开文件时出错 - filename.war 消息 - 打开 zip 文件时出错 java.io.IOException：打开 zip 文件时出错 ... 消息 - 打开 zip 文件时出错 ....

*   阅读此[链接](http://docs.oracle.com/cd/E15523_01/web.1111/e13702/autodeploy.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T16:43:52.013

自动部署是一种将应用程序快速部署到独立服务器（管理服务器）以进行评估或测试的方法。建议仅在单服务器开发环境中使用此方法。

您可以以两种不同的模式运行 WebLogic Server 域：开发和生产。只有开发模式允许您使用自动部署功能

要自动部署归档应用程序，请将其归档文件复制到 /autodeploy 目录。WebLogic Server 自动将应用程序的部署模式设置为暂存模式。

# vb.net - .Net 如何查找给定警告的 SuppressMessageAttribute 类别 (BC42015)

> ID：13508129
> 
> 赞同：11
> 
> 时间：2012-11-22T07:58:39.743
> 
> 标签：vb.net, attributes, warnings

我正在寻找一种方法来查找给定警告 (BC42015) 的 SuppressMessageAttribute 类别。

收到以下警告后，我想压制它。

```
'SomeLib.SomeInterface.DrawRuler' is already implemented by the base class 'SomeLib.SomeClass'. Re-implementation of function assumed.  C:\Project\somefile.vb  5   115 ALibName 
```

使用 SuppressMessage 属性应该可以工作，但我怎样才能找到相关的类别。以下将不起作用。

```
<CodeAnalysis.SuppressMessageAttribute("IDUNNO","BC42015")> 
```

所有 MSDN 示例都毫无用处。 [在源抑制概述中](http://msdn.microsoft.com/en-us/library/ms244717.aspx)

规则类别 - 定义规则的类别。有关代码分析规则类别的更多信息，请参阅一些无用的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T08:42:14.143

**发现代码分析**警告类别以用于`SuppressMessageAttribute`属性的一般方法是查阅警告文档。

例如，对于[`CA1039`](http://msdn.microsoft.com/en-us/library/ms182154.aspx)，我们得到：

```
TypeName            ListsAreStronglyTyped

CheckId             CA1039

Category            Microsoft.Design

Breaking Change     Breaking 
```

现在，因为[`BC42015`](http://msdn.microsoft.com/en-us/library/dwwt4s94.aspx)我们找不到这样的信息。为什么？因为它*不是*代码分析警告。这是一个**编译器**警告（请注意，我们在 MSDN 库的完全不同的部分）。

据我所知，没有本地方法可以覆盖 VB 中的编译器警告 - 您所能做的就是在[项目级别](http://msdn.microsoft.com/en-us/library/3y20cc1z.aspx)禁用警告（但我承认，这几乎不是您想要做的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:41:32.100

您应该在以下位置找到警告列表：http: [//msdn.microsoft.com/en-us/library/dd380629](http://msdn.microsoft.com/en-us/library/dd380629(v=vs.100).aspx) (v=vs.100).aspx和[http://msdn.microsoft.com/en-us/库/ms228296%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms228296%28v=VS.90%29.aspx)

PS：要抑制特定警告，您是否尝试过[http://msdn.microsoft.com/en-us/library/vstudio/edzzzth4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/edzzzth4(v=vs.100).aspx)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T23:28:08.450

在 VS2010 中，您只需右键单击错误列表中的消息并选择“Suppress Message(s)”您可以选择在源代码或全局项目抑制文件中进行抑制。

您可以查看生成的抑制，看看它做了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-01T02:17:19.810

正如 Damien_The_Unbeliever 的回答中提到的，代码分析警告的处理方式与编译器警告不同。但是，您可以使用预处理器指令（`#Disable Warning`在 VB 中，`#pragma warning`在 C# 中）在代码中的特定位置抑制此或其他编译器警告。

此示例显示 BC40003 在类 C2 实现 sub1 时被抑制，该子类已由基类 C1 实现：

```
 Interface I1
        Sub sub1(arg1 As Integer)
    End Interface

    Class C1
        Implements I1
        Public Sub sub1(arg1 As Integer) Implements I1.sub1
        End Sub
    End Class

    Class C2
        Inherits C1
        Implements I1
#Disable Warning BC40003
        Public Sub sub1(arg1 As Integer) Implements I1.sub1
#Enable Warning BC40003
        End Sub
    End Class 
```

# c# - xpath 选择具有最后一个子值的元素

> ID：13508130
> 
> 赞同：4
> 
> 时间：2012-11-22T07:58:41.880
> 
> 标签：c#, xml, xpath

这是我的 xml 文件

```
<profiles>
 <profile id='8404'>
  <name>john</name>
  <name>mark</name>
 </profile>
 <profile id='8405'>
  <name>john</name>
 </profile>
</profiles> 
```

我想选择最后一个“名称”子值=约翰的配置文件，结果应该包含id=8405的配置文件，只有它可以评估这个的xpath？

这是我的试验：

```
 var filterdFile = profilefileXML.XPathSelectElements("/profiles/profile[name[last()]='john']"); 
```

但这没有意义。

更新：我的线索是正确的，其中只有一个语法错误。谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:03:11.800

您可以连续应用多个索引操作`[...]`：

```
var doc = XDocument.Parse(xml); //the xml from your question

var node = doc.XPathSelectElement("/profiles/profile[name='john'][last()]");

Console.WriteLine(node.Attribute("id").Value); //outputs 8405 
```

这将返回包含值为 的`profile`元素的最后一个元素。`name``john`

另一方面，如果您想要返回最后一个元素的值为 的**所有元素**，那么您的 XPath 应该已经可以工作了：`name``john`

```
var nodes = doc.XPathSelectElements("/profiles/profile[name[last()]='john']");
foreach (var node in nodes)
{
    Console.WriteLine(node.Attribute("id").Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:16:34.757

你也可以试试 LINQ

```
XDocument xDoc = XDocument.Load("data.xml");
var matches = xDoc.Descendants("profile")
              .Where(profile => XElement.Parse(profile.LastNode.ToString()).Value == "john"); 
```

您可以使用 foreach 访问 xml 数据

```
foreach(XElement xEle in lastEle)
{
   var xAttribute = xEle.Attribute("id");
   if (xAttribute != null)
   {
       var id = xAttribute.Value;
   }
   var lastName = XElement.Parse(xEle.LastNode.ToString()).Value;
} 
```

# regex - 重写 URL 并使新 URL 显示在位置栏中

> ID：13508136
> 
> 赞同：4
> 
> 时间：2012-11-22T07:59:04.723
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我正在使用下面的代码来重写一些 URL：

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteRule ^New_Hampshire/[a-zA-Z0-9_+\-\s]*\.html$ NH/ 
```

请记住，下面还有这条规则..

```
RewriteRule ^([a-zA-Z]{2})/ state.php?state=$1 [L] 
```

现在，我想要实现的是，如果有人去例如：

```
www.mydomain.com/New_Hampshire/index.html 
```

我希望位置栏显示：

```
www.mydomain.com/NH/ 
```

通常我可以通过`[R]`在最后使用标志来实现这一点，但是在这种情况下它不起作用，我猜这可能与次要规则有关。

这可能吗？

另外，我该如何更改它以便它也重定向：

```
www.mydomain.com/New_Hampshire/ 
```

如您所见，上面不包含`index.html`参考。

最后，如果我想进行这些`301`重定向，我会做类似的事情吗？

```
RewriteRule ^New_Hampshire/[a-zA-Z0-9_+\-\s]*\.html$ NH/ [R=301] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:04:24.203

您需要了解 URL 重写（在您的情况下由 Apache 的 mod_rewrite 实现）和重定向之间的区别，这是 HTTP 规范的一部分，通过向客户端（浏览器）发送标准 HTTP 标头和状态代码来实现。

通过 URL 重写，当 Web 服务器处理请求时，您可以选择将客户端发送的请求 URL 映射到由不同本地路径表示的本地资源。这样做是出于各种原因，例如能够向用户呈现干净和简短的 URL、隐藏服务器上资源的内部结构、保护某些资源等。

浏览器通常不知道服务器重写了 URL（除非有其他指示），并且仍会在地址栏中显示原始请求的 URL。在客户端不知道的情况下，无法远程操作客户端请求的 URL。

另一方面，HTTP 重定向是 HTTP 规范的一部分，是一种告诉客户端请求的 URL 可以在不同位置找到的方法。Web 服务器通过发送带有重定向 URL 的“Location”标头和告诉客户端发生了什么的 HTTP 状态代码来执行此操作。有几个 30x 状态码，最常用的是 301 用于告诉客户端该资源已永久移动并且应该从现在开始由新 URL 处理，以及 302 用于告诉浏览器该资源已找到但暂时驻留在一个新的 URL 下（当您在规则中指定 R 标志时，Apache 的实现默认使用 302）。

客户端将收到带有新位置和状态代码的 HTTP 响应，并向新 URL 发出新的 HTTP 请求。如果这是主请求（即不是对图像或脚本等资源的子请求），它还将替换地址栏中的位置。

见[http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)

请注意，Apache 的文档建议将 L 标志与重定向标志一起使用（例如 [R, L] 或 [R=301, L]），否则您可能会得到意想不到的结果（因为它将继续处理以下规则）。这可能是您的 R 标志不起作用的原因。

所以，你可以做这样的事情（只是一个例子）：

```
RewriteRule ^New_Hampshire.* NH/ [R=301, L] 
```

这会将客户端从**任何**/New_Hampshire 前缀（带或不带 *.html）URL 重定向到 NH/ 并更改地址栏。

然后是下一条规则：

```
RewriteRule ^NH/? state.php?state=NH [L] 
```

或更通用：

```
RewriteRule ^([a-zA-Z]{2})/? state.php?state=$1 [L] 
```

这将捕获 NH（或其他状态）URL 并将其重写为正确的实际资源 (state.php)。

**但是**，这只是向您展示规则的示例。您可能需要处理第一条规则中的逻辑。因为需要将完整的州名 (New_Hampshire) 映射到快捷方式 (NH)，除非您想为每个州编写规则。

# javascript - Facebook 登录 onClick - Javascript

> ID：13508137
> 
> 赞同：3
> 
> 时间：2012-11-22T07:59:16.490
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我的网站上有这段代码。facebook 登录对话框在我的页面加载时显示，而不是在用户单击锚标记时显示。

```
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxxxxxxxxxxxxx', // App ID
      channelUrl : '//192.168.1.127/test/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        // connected
      } else if (response.status === 'not_authorized') {
        // not_authorized
        login();
      } else {
        // not_logged_in
       login();
      }
    });
  };

  function login() {
    FB.login(function(response) {
      if (response.authResponse) {
        testAPI() ;
      } else {
        // cancelled
      }
    });
  }

  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Good to see you, ' + response.name + '.');
    });
  }

  // Load the SDK Asynchronously
  (function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      ref.parentNode.insertBefore(js, ref);
  }(document));
</script> 
```

我希望在`FB.getLoginStatus`用户单击此事件时触发该事件：

```
<a href = "#" onClick = "FB.getLoginStatus()">Login</a> 
```

但是现在它正在加载而我没有做任何事情。

建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:01:46.900

好的，这里有一个简单的解决方案 - 将调用包装`FB.getLoginStatus`在另一个函数中并让您的按钮调用*该*函数。

```
function doLogin(){
  FB.getLoginStatus(function(response) {
    ...
  };
} 
```

然后您可以将`onClick`按钮上的 更改为`doLogin()`。

基本上，这里发生的情况是，一旦加载 Facebook SDK，它就会调用`window.fbAsyncInit`包含您的`FB.getLoginStatus`代码的函数，因此一旦 SDK 准备好，登录代码就会被执行。

# ios - Corona sdk - 如何在本地通知上打开应用程序？

> ID：13508138
> 
> 赞同：0
> 
> 时间：2012-11-22T07:59:22.350
> 
> 标签：ios, iphone, coronasdk

我正在电晕 sdk 上为 iPhone 构建一个闹钟

我已经使用本地通知在应用程序处于后台时触发警报（或者即使它从内存中删除 - 备忘录的通知仍然出现，尽管没有任何声音我应该知道关于声音和电晕的任何信息？手机振动，但没有我定义的声音正在播放。我使用了 caf 和 mp3 文件。将尝试 wav 并更新这篇文章。但这不是问题。

我想要手机做的是在通知点启动或打开或从后台带上我的闹钟。因此用户可以设置警报。重新启动手机或其他任何东西（从内存中删除应用程序）但是当通知到来时 - 我想打开我的应用程序。这可能吗？我知道我可以发送带有通知的数据（以设置特定状态） - 但是有启动应用程序的命令吗？强行打开？

我也没有收到我正在使用的代码的弹出通知，我得到了备忘录（当显示器的顶部旋转并显示您的消息时） - 我如何设置一个带有控件的弹出窗口？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:25:53.263

这根本无法做到。

Corona SDK（除非您使用的是企业版）受到很大限制，并且某些操作系统的这些限制与它是跨平台 SDK 有关。

Corona 目前对它在系统中的功能采取了非常保守的方法，它只将文件写入自己的沙箱，它不访问 Android 上的 SD 卡，不读取用户照片库等等。

它不能在后台运行，也不能使用通知启动，因此不适合警报、摇篮曲应用程序、时间表、背景媒体播放器或任何类似的东西。

Corona 的重点是具有活跃用户参与度的游戏和多媒体应用程序。

# multithreading - 如何使用线程在c#中一个接一个地运行3个方法？

> ID：13508146
> 
> 赞同：2
> 
> 时间：2012-11-22T08:00:02.200
> 
> 标签：multithreading, c#-4.0, methods, webclient, download

我有三种方法，即 Method1、Method2 和 Method3。

*   Method1 用于从一个站点下载图像
*   Method2 用于从第二个站点下载图像
*   Method3 用于比较图像

方法 1 根据产品 ID 逐一获取要添加到列表的图像 url 列表，即多个产品 ID 的集合上有一个循环，然后根据每个产品 ID，我得到一个添加到列表中的图像集合。
Method1 根据该列表下载图像。

Method2 与 Method1 相同，但从第二个站点下载图像。

Method3根据两个站点的每个产品id比较下载的图像。

我想要的是 Method1 下载图像集合然后运行 ​​Method2 下载第二个站点的图像，然后 Method2 运行 Method3 比较图像。
我正在使用线程下载和比较这些图像，但图像比较无法比较图像，因为它在下载图像时比较图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:17:34.817

你可以做的是：

```
private Thread tMethod1 = new Thread(runMethod1);
private Thread tMethod2 = new Thread(runMethod2);
private Thread tMethod3 = new Thread(runMethod3);

private void runThreads();
{
    tMethod1.Start(); //starts method 1
    tMethod2.Start(); //starts method 2
    tMethod1.Join();  //waits for method 1 to finish
    tMethod2.Join();  //waits for method 2 to finish
    tMethod3.Start(); //starts method 3
    tMethod3.Join();  //waits for method 3 to finish
}

private void runMethod1()
{
    Method1();
}
private void runMethod2()
{
    Method2();
}
private void runMethod3()
{
    Method3();
} 
```

这将同时运行`Method1`，`Method2`并在启动之前等待那些完成`Method3`。
这是一个小工作，但有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T08:14:37.940

我认为前两个方法可以异步调用，所以你可以这样写：

```
Task<List<Image>>[] tasks = new Task<int>[2];
tasks[0] = new Task<List<Image>>(() => Method1());
tasks[1] = new Task<List<Image>>(() => Method2());

var continuation = Task.Factory.ContinueWhenAll(
                   tasks,
                   (antecedents) =>
                   {
                        Method3(tasks[0].Result,tasks[1].Result);
                   });
tasks[0].Start();
tasks[1].Start();
var comparisonResult = continuation.Result; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:04:00.613

假设您使用的是 .NET 4.5（您没有在标签中指定版本），您可以使用 async 和 await。这是一个简化的示例：

```
public async void DownloadImages()
{
    // Do something...

    await Method1();
    await Method2();
    await Method3();

    // Do something else...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:12:40.723

尝试使用 Task 和 ContinueWith 方法。它将创建一个新线程并按顺序调用每个方法。

您可以在[本文](http://www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism-via-C)中找到更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T08:13:17.137

听起来您有一个多生产者-单消费者问题，下载任务是生产者，并将图像提供给消费者任务进行比较。这里有很大的并行性潜力：

```
Download task 1
                 \
                    Compare task
                 /
Download task 2 
```

您可以在可以并行运行的前两个任务之间以及使用管道模型的比较任务之间实现并行性。

但是如何实现这一切呢？你可以做的是启动 3 个并行任务，每个任务一个。这两个下载任务中的每一个都将拥有一个阻塞集合（[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)）并在下载图像时放置它们。假设相应的图像（具有相同的产品 ID）按顺序到达，则比较任务可以等待两个集合并在图像到达时进行比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T08:13:50.883

为什么不在一个线程中运行所有方法？

```
private void Thread_DoStuff(){
Method1();
Method2();
Method3();
} 
```

或者，您可以使用线程池。关于线程池的更多信息可以在[这里找到。](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.80%29.aspx). 这可以在 ThreadPool 中通过使用`WaitHandle.WaitAll();`then 在两个线程完成后进行比较来实现

# crystal-reports - 在水晶报表的饼图中创建一个额外的切片

> ID：13508147
> 
> 赞同：0
> 
> 时间：2012-11-22T08:00:11.280
> 
> 标签：crystal-reports

我有一个计算行数的 SQL。说结果是80。

我想要一个用户输入的参数，作为总数。假设用户输入 100。

我如何使用 80 和 100 这两个数字来创建一个饼图，显示数据占总数的 80%？

我找不到在 Crystal Report 的饼图中添加自定义切片的方法，有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:02:34.210

Your best bet may be to stick your SQL in a stored procedure then pass the crystal parameter to the sproc to generate the "dummy" slice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T09:17:31.250

您可以将多个项目添加到图表中。

创建一个公式来计算您的测量值和总和之间的差异。在你的情况下，这将是`total_rows_entered_by_user - number_of_rows`. 将`number of rows`和 公式添加到图表中：

[![在此处输入图像描述](../Images/065c4d645395902f963cb50e2cd08cc0.png)](https://i.stack.imgur.com/KLH5R.png)

# android - PagerAdatper 中的异步位置

> ID：13508149
> 
> 赞同：0
> 
> 时间：2012-11-22T08:00:16.177
> 
> 标签：android, view, android-asynctask, adapter, android-viewpager

我的片段活动使用此适配器在列表视图中显示所有结果。该页面将有一个标题选项卡，每个选项卡都有列表结果。
现在我从内部存储中读取的列表结果，每次我滑动到下一页时都会有轻微的滞后或延迟，所以我正在考虑在这个 pageradapter 中实现 ASYNCTask，这样体验会更好，但我不知道在哪里实现。大佬能指点一下吗？？

```
public class ViewPagerAdapter extends PagerAdapter 
{        
public ViewPagerAdapter( Context context )
{
    //This is where i get my title
     for (HashMap<String, String> channels : allchannel){       
            String title = channels.get(KEY_TITLE);
            titles[acc] = title;
            acc++;
     }
       scrollPosition = new int[titles.length];

    for ( int i = 0; i < titles.length; i++ )
    {
        scrollPosition[i] = 0;
    }
}

@Override
public String getPageTitle( int position )
{           
    return titles[position];
}

@Override
public int getCount()
{
    return titles.length;
}

@Override
public Object instantiateItem( View pager, final int position )
{
    String filename = null;
    ListView v = new ListView( context );
    final ArrayList<HashMap<String, String>> items = new ArrayList<HashMap<String, String>>();

    DatabaseHandler db = new DatabaseHandler(context);

    filename = openFile("PAGE1"); //OpenFile function is read file from internal storage
    switch(position){
    case 0:
        filename = openFile("PAGE1");
        break;
    case 1:
        filename = openFile("PAGE2");
    break;
    case 2:
        filename = openFile("PAGE3");
        break;
    }

       try{
        //Use json to read internal storage file(Page1/Page2) and display all the result on the list

        }
       }catch(Exception e){

       }

    ListAdapter listadapter=new ListAdapter(context, items);
    v.setAdapter( listadapter );
    ((ViewPager)pager ).addView( v, 0 );

    return v;
}

@Override
public void destroyItem( View pager, int position, Object view )
{
    ( (ViewPager) pager ).removeView( (ListView) view );
}

@Override
public boolean isViewFromObject( View view, Object object )
{
    return view.equals( object );
}

@Override
public void finishUpdate( View view )
{
}

@Override
public void restoreState( Parcelable p, ClassLoader c )
{
    if ( p instanceof ScrollState )
    {
        scrollPosition = ( (ScrollState) p ).getScrollPos();
    }
}

@Override
public Parcelable saveState()
{
    return new ScrollState( scrollPosition );
}

@Override
public void startUpdate( View view )
{
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:32:07.140

我建议这样做

```
@Override
public Object instantiateItem( View pager, final int position )
{

//Some other work related to instantiation of item    

     AsyncTask<Uri, Void, Bitmap> mLoadTask = new AsyncTask<Uri, Void, Bitmap>() {              
     //async task for loading images in background

        @Override
        protected void onPostExecute(Bitmap result) {
            pageview[position].setImageBitmap(result);                                         
            //post in ui thread
            //this way you have a reference object for each item(using position)
            //and hence you can start several tasks at the same time             
        }

        @Override
        protected Bitmap doInBackground(Uri... params) {        
            Bitmap bitmap=getBitmap(params[0]);    
            //here getBitmap returns the bitmap using uri arguement
            return bitmap;
        }

    };
    mLoadTask.execute(Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + image_id));
} 
```

这样每个项目都有自己的线程，无论加载多少项目，您都不必担心。

**编辑**还有一件事，您可以在 AsyncTask 代码之后立即从此方法返回 pageview[position]，这样视图将显示为空白（实现平滑滚动），直到 AsyncTask 完成后台工作。但它仍然能够将位图设置为正确的视图，因为它内部有引用`onPostExecute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:34:07.983

我在构造函数中做它，它工作正常。例子：

```
public MyAdapter(Context context) {
    this.context = context;
    try {
        whatIneed = new DoSomeAsyncStuff(this.context).execute().get();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
            e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

# python - 无法使用 Scrapy 跟踪链接

> ID：13508154
> 
> 赞同：0
> 
> 时间：2012-11-22T08:00:32.433
> 
> 标签：python, scrapy

我无法点击链接并取回值。

我尝试使用下面的代码我能够爬取第一个链接，之后它不会重定向到第二个跟随链接（函数）。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http.request import Request

class ScrapyOrgSpider(BaseSpider):
    name = "scrapy"
    allowed_domains = ["example.com"]
    start_urls = ["http://www.example.com/abcd"]

  def parse(self, response):
        hxs = HtmlXPathSelector(response)
        res1=Request("http://www.example.com/follow", self.a_1)
        print res1

  def a_1(self, response1):
        hxs2 = HtmlXPathSelector(response1)
        print hxs2.select("//a[@class='channel-link']").extract()[0]
        return response1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:48:00.113

该`parse`函数必须**返回**请求，而不仅仅是打印它。

```
def parse(self, response):
    hxs = HtmlXPathSelector(response)
    res1 = Request("http://www.example.com/follow", callback=self.a_1)
    print res1  # if you want
    return res1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:23:11.473

您忘记在方法中**返回**您的请求`parse()`。试试这个代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http.request import Request

class ScrapyOrgSpider(BaseSpider):
    name = "example.com"
    allowed_domains = ["example.com"]
    start_urls = ["http://www.example.com/abcd"]

    def parse(self, response):
        self.log('@@ Original response: %s' % response)
        req = Request("http://www.example.com/follow", callback=self.a_1)
        self.log('@@ Next request: %s' % req)
        return req

    def a_1(self, response):
        hxs = HtmlXPathSelector(response)
        self.log('@@ extraction: %s' %
            hxs.select("//a[@class='channel-link']").extract()) 
```

日志输出：

```
2012-11-22 12:20:06-0600 [scrapy] INFO: Scrapy 0.17.0 started (bot: oneoff)
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Enabled item pipelines:
2012-11-22 12:20:06-0600 [example.com] INFO: Spider opened
2012-11-22 12:20:06-0600 [example.com] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-11-22 12:20:06-0600 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-11-22 12:20:07-0600 [example.com] DEBUG: Redirecting (302) to <GET http://www.iana.org/domains/example/> from <GET http://www.example.com/abcd>
2012-11-22 12:20:07-0600 [example.com] DEBUG: Crawled (200) <GET http://www.iana.org/domains/example/> (referer: None)
2012-11-22 12:20:07-0600 [example.com] DEBUG: @@ Original response: <200 http://www.iana.org/domains/example/>
2012-11-22 12:20:07-0600 [example.com] DEBUG: @@ Next request: <GET http://www.example.com/follow>
2012-11-22 12:20:07-0600 [example.com] DEBUG: Redirecting (302) to <GET http://www.iana.org/domains/example/> from <GET http://www.example.com/follow>
2012-11-22 12:20:08-0600 [example.com] DEBUG: Crawled (200) <GET http://www.iana.org/domains/example/> (referer: http://www.iana.org/domains/example/)
2012-11-22 12:20:08-0600 [example.com] DEBUG: @@ extraction: []
2012-11-22 12:20:08-0600 [example.com] INFO: Closing spider (finished) 
```

# java - java中的Keystore、TrustStore配置错误

> ID：13508155
> 
> 赞同：0
> 
> 时间：2012-11-22T08:00:47.170
> 
> 标签：java, web-services, webservice-client, keystore, webservices-client

我想访问 ssl 网络服务。

1.  我在 Netbeans 中生成了客户端绑定
2.  使用 ckeystorepwd 和 calias 生成 JKS 并将客户端 pfx 文件导入到 client.jks
3.  Webservice Producer 与 srvalias 和 srvkeystorepwd 共享 server.jks
4.  我已经在 NetBeans IDE 中配置了 Keystore 和 TrustStore，并且正在运行 Main.java 和

我能够使用网络服务。我想在没有 NetBeansIDE 的情况下使用 Web 服务。我需要务实地为环境配置 Keystroe 和 Truststore（client.jks、server.jks）。

我在我的 Main.java 中包含了以下代码，但它给出了以下错误，请指导我如何配置密钥库、信任库。

**Main.java 代码**

```
System.setProperty("-Djavax.net.ssl.keyStore",JKSFILE);
System.setProperty("-Djavax.net.ssl.keyStorePassword",JKSPWD);
System.setProperty("javax.net.ssl.keyStoreType", "JKS");

System.setProperty("-Djavax.net.ssl.trustStore",JKSFILET);
System.setProperty("-Djavax.net.ssl.trustStorePassword",JKSPWDT);
System.setProperty("javax.net.ssl.requireClientAuth", "true");  
System.setProperty("com.sun.xml.ws.transport.http.client.
    HttpTransportPipe.dump","true");

URL u;  
u = new URL(MAIN_URL);  
IWebService service = new 
WebService(u).getWS2007HttpBindingIWebService(); 
```

**错误**

```
SEVERE: WSS1906: Invalid key provided for encryption/decryption.
java.security.InvalidKeyException: Illegal key size or default parameters
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at com.sun.xml.ws.security.opt.impl.enc.CryptoProcessor.initCipher(CryptoProcessor.java:125)
    at com.sun.xml.ws.security.opt.impl.enc.CryptoProcessor.encryptData(CryptoProcessor.java:269)
    at com.sun.xml.ws.security.opt.impl.enc.CryptoProcessor.encrypt(CryptoProcessor.java:153)
    at com.sun.xml.ws.security.opt.impl.util.CVDataHandler.writeTo(CVDataHandler.java:69)
    at javax.activation.ObjectDataContentHandler.writeTo(Unknown Source)
    at javax.activation.DataHandler$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception in thread "DataHandler.getInputStream" com.sun.xml.wss.impl.XWSSecurityRuntimeException: Unable to calculate cipher value as invalid key was provided 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:22:11.720

解决了问题，

> 我没有使用在 Eclipse 环境中将策略 jar 复制为 JCE-6 配置的一部分的相同 JVM。

现在我已经更改了项目的 JRE，并且能够毫无问题地运行该程序。

> C:\Program Files (x86)\Java\jdk1.6.0_33\bin\java -jar "WSClient.jar"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:12:10.033

您可能需要安装无限强度加密策略文件：[http ://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)

由于美国出口法律禁止加密，Java 不附带强加密，但您可以通过替换上面下载中的`local_policy.jar`和来单独启用它。`US_export_policy.jar``$JAVA_HOME/lib/security`

# c# - 从 Web 应用程序 pinvoke 所需的最低用户权限？

> ID：13508160
> 
> 赞同：2
> 
> 时间：2012-11-22T08:01:09.253
> 
> 标签：c#, asp.net-mvc-4, iis-7.5, pinvoke

我有一个 p/invokes FindFirstFile 和 FindNextFile 的 ASP.NET MVC 应用程序。当我为要运行的网站创建应用程序池时，我将指定一个特定的用户帐户，该帐户具有进行这些调用所需的最低权限。

我指定的用户应该有什么权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:23:16.907

如果您所做的只是 FindFirstFile 和 FindNextFile，那么用户对文件夹所需的最低安全性是“列出文件夹内容”。

# sql-server - 有没有办法更改 FixedLenNullInSource 和 TrimTrailingBlanks 的值？

> ID：13508162
> 
> 赞同：3
> 
> 时间：2012-11-22T08:01:13.747
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2

有没有办法改变和的`FixedLenNullInSource`值`TrimTrailingBlanks`？

我`sp_help`用来比较不同服务器的输出以查看表是否相同。`FixedLenNullInSource`并`TrimTrailingBlanks`抛弃我的比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:45:02.597

`TrimTrailingBlanks`与`SET ANSI_PADDING`创建表时的选项有关。您可能可以在不重新创建整个表格的情况下以与我在此处更改选项的[答案类似的方式进行更改。](https://stackoverflow.com/questions/10010042/update-ansi-nulls-option-in-an-existing-table/10072304#10072304)`ANSI_NULL`

否则，您将需要重新创建表并选择所需的语义。

看定义`sp_help`

```
 'FixedLenNullInSource' = 
   CASE
        WHEN Type_name(system_type_id) NOT IN ( 'varbinary', 'varchar', 'binary', 'char' ) THEN '(n/a)'
        WHEN is_nullable = 0 THEN @no
        ELSE @yes
    END 
```

所以它看起来不同的值`FixedLenNullInSource`只是表明该列的可空性是不同的，并且它是 4 种指定的数据类型之一。你需要用`ALTER TABLE ... ALTER COLUMN`

您可能最好使用第三方工具来比较数据库，例如 Redgate SQL Compare 或 SQL Server Data Tools，甚至只是查询`sys.tables`和您`sys.columns`自己，而不是使用`sp_help`。

# php - 使用唯一 ID 标记按钮并在单击按钮时识别此 ID 值

> ID：13508163
> 
> 赞同：2
> 
> 时间：2012-11-22T08:01:23.420
> 
> 标签：php, javascript, button

我们有基于 php+mysql 的 html 网站。在一个页面上，有一个表格（4 行 1 列）包含有关用户的信息。每个表格单元格下都有用户名和相应的按钮。使用 SELECT 语句填充到表中的用户名。

```
$q = "select usr.user_id, usr.nickname from users usr";
$r = mysqli_query ($dbc, $q) or trigger_error("Query: $q\n<br />MySQL Error: " . mysqli_error($dbc)); 
```

然后将信息填充到表中

```
echo "<table border cellpadding=1>"; 
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){ 
    echo "<tr>";
    echo "<td>" . $row['nickname'] . "</td> <form name ='form_type' method ='GET'><input type = 'button' name = " . $row['user_id'] . " value = 'ButtonValue' id = 'ButtonId'  onclick='processFormData();'></form></td>"; 
}
echo "</table>"; 
```

用于获取 ButtonName 的 Javascript

```
<script type="text/javascript">
    function processFormData() {
        var name_element = document.getElementById('ButtonId');
        alert(name_element.name);
    } 
```

警报用于测试。我的目标是在单击按钮时获取 user_id 值。目前我为所有按钮获得相同的 user_id （首先找到）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:03:36.183

试试这个：

```
 echo "<td>" . $row['nickname'] . "</td> <form name ='form_type' method ='GET'><input type = 'button' name = " . $row['user_id'] . " value = 'ButtonValue' id = 'ButtonId'  onclick='processFormData(this);'></form></td>"; 
```

还有这个：

```
function processFormData(name_element) {
    alert(name_element.name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:06:11.337

你必须通过`User ID`这样的`JavaScript`功能，

```
<input type = 'button' name = " . $row['user_id'] . " value = 'ButtonValue' id = 'ButtonId'  onclick='processFormData('<?php echo $row['user_id']; ?>');'> 
```

在`Script`，你必须改变这个功能链接，

```
<script type="text/javascript">
function processFormData(uid) {
    alert(uid);
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:03:52.940

的 id`ButtonID`在每个按钮上。这意味着它们都不是唯一的。因此，您的脚本开始查找，并且每次都给出相同的脚本。

您可以只切换`name`and`id`属性（您需要一些文本，因此 ID 不仅仅是一个数字，这是不允许的）：

```
<input type='button' id='btn".$row['user_id']."' value='ButtonValue' name='ButtonId'  onclick='processFormData();'> 
```

然后提醒（新的，唯一的）ID：

```
alert(name_element.id); 
```

但是现在由于您的 ID 已更改，您的 Javascript 代码将无法再找到`ButtonId`。因此，您需要将按钮对象直接传递给 Javascript。它可能看起来像这样：

HTML

```
<input type='button' id='btn".$row['user_id']."' value='ButtonValue'  onclick='processFormData(this);'> 
```

JS

```
function processFormData(element) {
    alert(element.id);
} 
```

# listview - 绑定后如何将项目添加到列表视图中？

> ID：13508165
> 
> 赞同：0
> 
> 时间：2012-11-22T08:01:33.870
> 
> 标签：listview, winjs

我试图在绑定后将一个项目添加到列表视图中，但我没有找到解决方案。

我不想编写自定义控件。

我将用来制作“获取更多”按钮。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:07:16.103

您是否使用 WinJS.Binding.list 作为数据源？如果是这样，它就像一个数组，只需执行以下操作：

```
myData.push(newItem); 
```

它会显示在列表末尾的列表视图中。`splice`如果您想将新项目粘贴在中间的某个位置，您可以使用该方法。

# jquery - Firefox 中的 jQuery 自动完成输入按键操作无法正常工作

> ID：13508166
> 
> 赞同：3
> 
> 时间：2012-11-22T08:01:39.307
> 
> 标签：jquery, firefox, autocomplete, keypress

我做了一个 jQuery 自动完成搜索来搜索我的 CI 应用程序中的页面，返回的 JSON 数据包括 2 个元素，页面的“slug”和页面的“名称”，所以我使用“名称”显示在自动完成列表中，当有人选择结果或按回车键时，它会使用 slug 将他重定向到该页面：

```
$(function() {
    $( "#search" ).autocomplete({
        source: "index.php/pages/get_pages",
        minLength: 2,
        select: function(event, ui) {
            $(event.target).val(ui.item.value);
            window.location.href = "index.php/pages/" + ui.item.slug;
            return false;
        }
    });

    $("#search").keypress(function(e){
        if (e.which == 13) {
            window.location.href = "index.php/pages/no-results";
            return false;
        }
    });
}); 
```

现在我添加了另一个选项，当有人键入关键字但没有找到结果然后他按回车键时，它应该转到带有 no-results 参数的“页面”。

此代码在除 Firefox 之外的所有浏览器上运行良好，在所有情况下都进入无结果页面。

仅当未找到结果并且用户输入随机页面名称然后按 Enter 时，我才需要它转到无结果页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:14:54.933

我认为这是关于转发问题。当您按下“Enter”按钮时，keypress' 和自动完成选择的功能都会被调用。我们应该插入一个 if 逻辑，以便只执行其中一个。

顺便说一句，我认为在服务器端进行转发操作是很合乎逻辑的。

```
$(function() {
    var isSelected = false;
    $("#search" ).autocomplete({
        source: "index.php/pages/get_pages",
        minLength: 2,
        select: function(event, ui) {
            isSelected = true;
            $(event.target).val(ui.item.value);
            window.location.href = "index.php/pages/" + ui.item.slug;
            return false;
        }
    });

    $("#search").keypress(function(e){
        if (e.which == 13) {
            if(!isSelected)
            {
                 window.location.href = "index.php/pages/no-results";
            }
            return false;
        }
    });
}); 
```

# iphone - AVCaptureDeviceOutput 没有调用委托方法 captureOutput

> ID：13508171
> 
> 赞同：16
> 
> 时间：2012-11-22T08:02:21.073
> 
> 标签：iphone, avfoundation, ios5

我正在构建一个 iOS 应用程序（我的第一个），它可以动态处理视频静止帧。为了深入了解这一点，我遵循了Apple[的 AV* 文档中的一个示例。](https://developer.apple.com/library/ios/ipad/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW13)

该过程涉及设置输入（相机）和输出。输出与委托一起工作，在这种情况下，委托就是控制器本身（它符合并实现所需的方法）。

我遇到的问题是委托方法永远不会被调用。下面的代码是控制器的实现，它有几个 NSLog。我可以看到“已启动”消息，但“调用的委托方法”从未显示。

此代码都在实现“AVCaptureVideoDataOutputSampleBufferDelegate”协议的控制器中。

```
- (void)viewDidLoad {

    [super viewDidLoad];

    // Initialize AV session    
        AVCaptureSession *session = [AVCaptureSession new];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
            [session setSessionPreset:AVCaptureSessionPreset640x480];
        else
            [session setSessionPreset:AVCaptureSessionPresetPhoto];

    // Initialize back camera input
        AVCaptureDevice *camera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

        NSError *error = nil;

        AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:camera error:&error];

        if( [session canAddInput:input] ){
            [session addInput:input];
        }

    // Initialize image output
        AVCaptureVideoDataOutput *output = [AVCaptureVideoDataOutput new];

        NSDictionary *rgbOutputSettings = [NSDictionary dictionaryWithObject:
                                           [NSNumber numberWithInt:kCMPixelFormat_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
        [output setVideoSettings:rgbOutputSettings];
        [output setAlwaysDiscardsLateVideoFrames:YES]; // discard if the data output queue is blocked (as we process the still image)

        //[output addObserver:self forKeyPath:@"capturingStillImage" options:NSKeyValueObservingOptionNew context:@"AVCaptureStillImageIsCapturingStillImageContext"];

        videoDataOutputQueue = dispatch_queue_create("VideoDataOutputQueue", DISPATCH_QUEUE_SERIAL);
        [output setSampleBufferDelegate:self queue:videoDataOutputQueue];

        if( [session canAddOutput:output] ){
            [session addOutput:output];
        }

        [[output connectionWithMediaType:AVMediaTypeVideo] setEnabled:YES];

    [session startRunning];

    NSLog(@"started");

}

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {

        NSLog(@"delegate method called");

        CGImageRef cgImage = [self imageFromSampleBuffer:sampleBuffer];

        self.theImage.image = [UIImage imageWithCGImage: cgImage ];

        CGImageRelease( cgImage );

} 
```

**注意：**我以 iOS 5.0 为目标进行构建。

**编辑：**

我发现了一个[问题](https://stackoverflow.com/questions/3602624/avcapturesession-only-getting-one-frame-for-iphone-3gs?rq=1)，尽管要求解决不同的问题，但它正在做我的代码应该做的事情。我已将该问题中的代码逐字复制到一个空白的 xcode 应用程序中，将 NSLogs 添加到*captureOutput*函数并且它没有被调用。这是配置问题吗？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-26T05:36:11.197

你`session`是一个局部变量。其范围仅限于`viewDidLoad`. 由于这是一个新项目，我认为可以肯定地说您正在使用 ARC。在这种情况下，该对象不会泄漏，因此会像在链接问题中那样继续存在，而是编译器将确保在`viewDidLoad`退出之前释放对象。

因此，您的会话没有运行，因为它不再存在。

（旁白：这`self.theImage.image = ...`是不安全的，因为它执行主队列的 UIKit 操作；您可能希望将`dispatch_async`其转移到`dispatch_get_main_queue()`）

因此，样本更正：

```
@implementation YourViewController
{
     AVCaptureSession *session;
}

- (void)viewDidLoad {

    [super viewDidLoad];

    // Initialize AV session    
        session = [AVCaptureSession new];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
            [session setSessionPreset:AVCaptureSessionPreset640x480];
        else
         /* ... etc ... */
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {

        NSLog(@"delegate method called");

        CGImageRef cgImage = [self imageFromSampleBuffer:sampleBuffer];

        dispatch_sync(dispatch_get_main_queue(),
        ^{
            self.theImage.image = [UIImage imageWithCGImage: cgImage ];
            CGImageRelease( cgImage );
         });
} 
```

现在大多数人都提倡在实例变量名称的开头使用下划线，但为了简单起见，我省略了它。在确认诊断正确后，您可以使用 Xcode 的内置重构工具来修复它。

我将`CGImageRelease`发送到主队列的块内部移动，以确保其生命周期超出其捕获范围，进入`UIImage`. 我无法立即找到任何文档来确认 CoreFoundation 对象在块中捕获时会自动延长其生命周期。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-12-30T11:52:41.133

`didOutputSampleBuffer`我发现了不能调用委托方法的另一个原因——*保存到文件*和*获取样本缓冲区*输出连接是互斥的。换句话说，如果您的会话已经有`AVCaptureMovieFileOutput`然后您添加`AVCaptureVideoDataOutput`，则只`AVCaptureFileOutputRecordingDelegate`调用委托方法。

仅供参考，我在框架文档中找不到任何地方`AV Foundation`对此限制的明确描述，但苹果支持在几年前证实了这一点，如this [SO answer](https://stackoverflow.com/a/4986032/2979418)中所述。

解决该问题的一种方法是`AVCaptureMovieFileOutput`在委托方法中完全删除并手动将记录的帧写入文件`didOutputSampleBuffer`，同时处理您的自定义缓冲区数据。您可能会发现[这](https://stackoverflow.com/a/22037685/2979418) [两个](https://stackoverflow.com/a/4944594/2979418)SO 答案很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T15:33:55.943

就我而言，问题就在那里，因为我打电话

```
if ([_session canAddOutput:_videoDataOutput])
        [_session addOutput:_videoDataOutput]; 
```

在我打电话之前

```
[_session startRunning]; 
```

我刚开始打电话`addOutput:`后`startRunning`

希望它对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-09T19:46:47.960

我的 captureOutput 函数也没有被调用。并且接受的答案并没有完全指向我的问题，因为我的会话已经是一个实例变量。

但是，我的视频帧的 DispatchQueue 是本地的。并且 dispatchQueue 也必须是一个实例变量。我不太明白为什么这应该是必要的。也许底层的 AVCapture 代码只保留了一个指向它的弱指针？

文档对此非常困惑。

# javascript - Javascript警报没有响应

> ID：13508173
> 
> 赞同：0
> 
> 时间：2012-11-22T08:02:24.327
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

我是使用 MVC 4 和 Javascript 的新手。我创建了一个在页面准备好时不发送警报的 javascript。我似乎无法弄清楚我做错了什么。

我的代码：

```
@{
    ViewBag.Title = "Import";
}
<script type="text/javascript">
    $(this).ready(function () {
        alert("test");
    });

</script>
<h2>Import</h2>
<form id="form1">
    @Html.DropDownList("TableDDL")
</form> 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:03:48.463

你应该传入`document`：

```
$(document).ready(function () {
    alert("test");
}); 
```

这相当于：

```
$(function () {
    alert("test");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:07:31.607

Try this:

```
<script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        alert("test");
    });
</script> 
```

**Note:** Make sure you have included reference of jQuery Library on your page.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:16:41.273

您是否正确包含了 jQuery？

```
$(this).ready(function () {
        alert("test");
}); 
```

这段代码应该可以工作。检查[http://jsfiddle.net/yM5PC/](http://jsfiddle.net/yM5PC/)

# mysql - 我的mysql查询有问题

> ID：13508174
> 
> 赞同：0
> 
> 时间：2012-11-22T08:02:44.473
> 
> 标签：mysql

嘿伙计们，我有这个查询：

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ = (SELECT Typ FROM lm_Artikel WHERE `Index` = (SELECT DISTINCT `Index` FROM lm_Warenkorb))) 
```

但是当我运行它时，我收到了这个错误：

> # 1242 - 子查询返回多于 1 行

我不知道我的查询中有什么错误。

示例`lm_Schwellwert`外观：

```
Typ     Schwellwert
Computer    78 
```

示例`lm_Artikel`外观：

```
Index   Artikelbezeichnung  Status  Bestand     Lieferant    Typ
1           HP Elitebook        OK      19         HP         Computer 
```

示例`lm_Warenkorb`外观：

```
Index
11
1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:05:33.520

where 条件只能在一个 vale 中运行（所以 x=y 等等）
在你的情况下，你的子查询

`(SELECT Typ FROM lm_Artikel WHERE`索引`= (SELECT DISTINCT`索引`FROM lm_Warenkorb))`

返回不止一行，这会导致错误。

尝试修改您的查询如下

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ IN (SELECT Typ FROM lm_Artikel WHERE `Index` IN (SELECT DISTINCT `Index` FROM lm_Warenkorb))) 
```

运算符将`IN`帮助您，因为接受一组值并`Typ`在等于其中一个值时返回 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:11:26.077

试试这个查询

```
Select 
    lm_Schwellwert.Schwellwert
From lm_Schwellwert
Left join lm_Schwellwert as r 
    on r.Typ = (SELECT Typ FROM lm_Artikel WHERE `Index` = (SELECT DISTINCT `Index` FROM lm_Warenkorb))
Where r.id is not null  
group by lm_Schwellwert.Typ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:05:10.283

也许`in`会帮助你：

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ in (SELECT Typ FROM lm_Artikel WHERE `Index` in (SELECT DISTINCT `Index` FROM lm_Warenkorb))) 
```

您还可以使用聚合函数`min`，例如：

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ in (SELECT min(Typ) FROM lm_Artikel WHERE `Index` in (SELECT min(`Index`) FROM lm_Warenkorb))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T08:05:14.117

尝试这个

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ = (SELECT Typ FROM lm_Artikel 
              WHERE `Index` in (SELECT DISTINCT `Index` FROM lm_Warenkorb))) 
```

因为你在索引中有两个值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T08:05:30.930

```
SELECT DISTINCT `Index` FROM lm_Warenkorb 
```

此子查询返回两行..它应该只有一个，因为您使用等号..

尝试这个：

```
SELECT Schwellwert
FROM lm_Schwellwert
WHERE (Typ = (SELECT  Typ FROM lm_Artikel WHERE `Index` in (SELECT DISTINCT `Index` FROM lm_Warenkorb)) limit 1) 
```

# jsf - 定义在 JSF 2 中搜索 Facelets 的位置

> ID：13508179
> 
> 赞同：2
> 
> 时间：2012-11-22T08:03:05.213
> 
> 标签：jsf

当我`FacesServlet`在 my中配置时`web.xml`，它在哪里搜索`*.xhtml`facelets？仅在 App-Root 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:48:52.883

我不明白你的问题。但是尝试回答：您的 Web 目录（和子目录）中具有 xhtml 扩展名的所有文件都将作为 facelets 处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:39:37.280

默认情况下，它们在 WAR 的 Web 根文件夹和 WAR 中`/META-INF/resources`包含的所有 JAR的文件夹中进行扫描`/WEB-INF/lib`。您可以使用自定义控制此扫描算法[`ResourceResolver`](http://download.oracle.com/javaee/6/api/javax/faces/view/facelets/ResourceResolver.html)。这是一个（相对愚蠢的）示例，它扫描本地磁盘文件系统上的其他位置，当在 WAR 中（也没有在它的 JAR 中`/WEB-INF/lib`）中找不到任何内容时：

```
public class MyResourceResolver extends ResourceResolver {

    private ResourceResolver parent;

    public MyResourceResolver(ResourceResolver parent) {
        this.parent = parent;
    }

    @Override
    public URL resolveUrl(String path) {
        URL url = parent.resolveUrl(path); // Resolves from WAR.

        if (url == null) {
            url = new File("/some/folder", path).toURI().toURL();
        }

        return url;
    }

} 
```

关于将 Facelets 文件放在文件夹中，您应该只将**不**`/WEB-INF`应该公开访问的 Facelets 文件放入其中，例如模板文件、标记文件、包含文件等。不应放置应该公开访问的文件在那里，例如模板客户端（顶级视图）。

 **### 也可以看看：

*   [从外部文件系统或数据库获取 Facelets 模板/文件](https://stackoverflow.com/questions/13292272/can-you-get-the-jsf2-uidecorate-template-xxx-outside-of-app)
*   [我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:54:16.640

这将取决于 web.xml 中的这些参数：

```
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping> 
```**

# postgresql - PostgreSQL GOTO like 关键字跳转到一个块

> ID：13508190
> 
> 赞同：3
> 
> 时间：2012-11-22T08:03:36.480
> 
> 标签：postgresql, plpgsql

我有一个 PostgreSQL 函数

```
CREATE OR REPLACE FUNCTION increment(i integer) RETURNS integer AS $$
BEGIN
IF i<0 THEN 
RETURN i + 1;
ELSE
  GOTO label1;
END IF
<<label1>>
RETURN null;
END;
$$ LANGUAGE plpgsql; 
```

在这个函数中，我必须 GOTO 到 label1，但 GOTO 关键字不起作用，你能帮我找到我能够从特定代码跳转到标签的方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-23T20:24:56.647

另一个嵌套的 Begin 块？

```
BEGIN
  <<label1>>
  BEGIN 
      IF i<0 THEN 
          RETURN i + 1;
      ELSE
          EXIT label1;
      END IF;
  END;
  RETURN null;
END; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T08:18:27.363

解决方法：

```
<<label>>
LOOP
   ...
   EXIT label WHEN i > 0;
   ...
   EXIT;
 END LOOP label;
 some; 
```

但我十年没用它——所以通常你做错了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:08:50.997

PL/PgSQL does not have GOTO operator.

But, why do you need goto? In your case you can simply remove ELSE and get behavior your are looking for.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T10:50:55.867

你不需要`GOTO`。

`DECLARE`一个布尔变量。根据您是否要执行下一个块来设置其值。将该块包装在一个`IF`测试变量中。魔术，它被跳过了！

我假设您的代码已被缩减和简化，否则将毫无意义。这是一种方法，假设您不能只删除“ELSE ... GOTO”并让控制继续进行。

```
CREATE OR REPLACE FUNCTION increment(i integer) RETURNS integer AS $$
DECLARE
    run_condition boolean = 't';
BEGIN
  IF i<0 THEN
    RETURN i + 1;
  ELSE
    run_condition = 'f';
  END IF;
  IF run_condition THEN
    -- Do the optional thing
  END;
  RETURN null;
END;
$$ LANGUAGE plpgsql; 
```

# jquery - jQuery凌乱的动画

> ID：13508196
> 
> 赞同：0
> 
> 时间：2012-11-22T08:03:59.150
> 
> 标签：jquery, css, html, animation

所以我在这里有这个动画[http://kevingilbertportfolio.com/help/index.html](http://kevingilbertportfolio.com/help/index.html)我试图让它顺利移动。它应该是每当您将鼠标悬停时它就会出来，而当您将鼠标光标移出时它会重新进入......正如您所看到的那样，它非常非常非常混乱。

HTML + CSS + jQuery

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>  
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">
  <style type='text/css'>
    @charset "utf-8";
/* CSS Document */
* {
    margin:0;
    padding:0;
}

body {
    background-color:#636363;
}

.facebook-sw {
    margin-top:120px;
    float:right;
    margin-right:-300px;
    position: relative;
}

.fb-icon {
    float:left;
    margin-right:14px;
}

.fb-like-box {
    float:left;
}

.wrapper {overflow: hidden;}
  </style>
<script type='text/javascript'>//<![CDATA[ 
$(document).ready(function() {
    $('.facebook-sw').hover(function() {
        $('.facebook-sw').animate({
            left: '-=300'
        }, 900, function() {
            // Animation complete.

        });
    });
});
$(document).ready(function() {
    $('.facebook-sw').mouseout(function() {
        $('.facebook-sw').animate({
            left: '+=300'
        }, 900, function() {
            // Animation complete.

        });
    });
});
//]]>  
</script>
</head>
<body>    
    <div class="wrapper">
        <div class="facebook-sw">
            <img class="fb-icon" src="image/fb-icon.PNG" width="110" height="113" alt="">
            <img class="fb-like-box" src="image/example.JPG" height="544" width="292" alt="">
        </div>
    </div> 
</body>
</html> 
```

**非常感谢提前**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:08:51.593

试试这个：（工作小提琴可以在这里找到[http://jsfiddle.net/c9w3n/3/](http://jsfiddle.net/c9w3n/3/)）

```
$(document).ready(function() {
    $('.facebook-sw').hover(
        function() {
            $('.facebook-sw').stop(true, true).animate({
                left: '-=300'
            }, 900, function() { });
        }, function() {
            $('.facebook-sw').stop(true, true).animate({
                left: '+=300'
            }, 900, function() { });
        }
    );
}); 
```

jQuery 中的`.hover()`方法接受两个函数，第一个是 for `mouseover`，第二个是 for `mouseout`。

此外，您遇到的问题与动画队列有关，每次鼠标移入或移出时，整个动画都会不断添加到元素中，为了防止这种情况，您可以使用`.stop()`. 您可以查看文档以获取详细信息，但`true, true`我传入的两个参数基本上说取消该元素上的任何其他动画，如果有任何动画当前正在运行 - 立即将元素移动到动画的末尾。

**编辑**

为了防止这种闪烁/活泼的行为，您需要更改为 div 设置动画的方式。您需要为 div 定义打开和关闭位置并使用它，而不是更改左侧或右侧位置。

在这里工作小提琴：http: [//jsfiddle.net/c9w3n/7/](http://jsfiddle.net/c9w3n/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:09:51.423

我建议您像这样使用 hoverIntent (http://cherne.net/brian/resources/jquery.hoverIntent.html) 插件：

```
function mouseOn() {
    $('.facebook-sw').animate({'margin-right' : '0'}, 900);
}

function mouseOff() {
    $('.facebook-sw').animate({'margin-right' : '-300px'}, 900);
}

$('.facebook-sw').hoverIntent(mouseOn, mouseOff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:13:32.007

试试这个方法

```
 $(".facebook-sw").hover(
    function () {
       $(this).animate({
           left: '-=300'
         }, 900, function() {
        // Animation complete.
        });
    }, 
    function () {
       $(this).animate({
          left: '+=300'
        }, 900, function() {
        // Animation complete.
      });
    } 
```

);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:19:12.947

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
       <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
    <title> Auto hide </title>
</head>
<body>
<style type="text/css">
<!--
    body
    {overflow:hidden;}
    .wrapper
    {position:absolute;right:-300px;}
-->
</style>
<script type="text/javascript">
    <!--
    $(document).ready(function(){

       $('.wrapper').hover(function(){
       $('.wrapper').stop().animate({'right':0},4000);}
       ,function(){$('.wrapper').stop().animate({'right':-300},4000);}
       );
    });
-->
</script>
    <div class="wrapper">
        <div class="facebook-sw">
            <img class="fb-icon" src="http://kevingilbertportfolio.com/help/image/fb-icon.PNG" width="110" height="113" alt="">
            <img class="fb-like-box" src="http://kevingilbertportfolio.com/help/image/example.JPG" height="544" width="292" alt="">
        </div>
    </div>
</body>
</html> 
```

我希望对你有用...

# javascript - 如何在顶点页面中查看 div 标签内的内容？

> ID：13508198
> 
> 赞同：1
> 
> 时间：2012-11-22T08:04:02.133
> 
> 标签：javascript, html, salesforce, apex-code

Locationbox 是一个外部系统，提供类似谷歌地图的服务。您可以在此处查看示例；

[http://www.locationbox.com.tr/web/demo/displaymap.jsp](http://www.locationbox.com.tr/web/demo/displaymap.jsp)

我想将它部署到 salesforce 平台。第一个脚本标签从 locationbox 服务中检索 javascript 代码。在启动（）工作后，它将动态内容设置为***div id="map"...*** in document. 动态内容中有几个 png 图像。下面的代码在本地作为 html 文件工作，但在顶点页面中不起作用。（函数 x() 在顶点页面中按预期工作。）

我在顶点页面中使用以下代码。

```
<apex:page>
    <script language="Javascript" src="http://www.locationbox.com.tr/locationbox/services?Key=mykey&Cmd=API&Typ=JS"<script language="JavaScript">

        var mapper  = new IMapper();
        window.addEventListener('load', function() {alert('OK1'); x();}, false);
        window.addEventListener('load', function() {alert('OK1'); startup();}, false);

        function startup() {
            mapper.initMap(41.1, 29.1, 7);
            mapper.addNavigationPanel();
            MVGlobalVariables();
            return;
        }
        function x() {
            document.getElementById("map").innerHTML = 2;
        }
    </script>

    <div id="map" style="border: 1px solid black; width:100%; height:100%; z-index: 0; position:relative; -moz-user-select:none;   background-color: lightgrey;" tabindex="0">1</div>
</apex:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:40:40.723

尝试`apex:includeScript`在您的`apex:page`定义之后立即使用，并且不包括 locationbox-script 作为 html-tag：

```
<apex:page>

<apex:includeScript value="http://www.locationbox.com.tr/locationbox/services?Key=mykey&Cmd=API&Typ=JS" />

...

</apex:page> 
```

最好的方法是尝试使用`https`链接

# iphone - 多按钮标签多视图

> ID：13508199
> 
> 赞同：0
> 
> 时间：2012-11-22T08:04:04.710
> 
> 标签：iphone, ios, uibutton

单击显示子视图视图的每个按钮都包含学习和播放选项。单击时，要显示不同的视图取决于 uibutton 选择。这是我的代码。

```
-(IBAction)animals
{

CGPoint point = [tap locationInView:self.animalsbut];

pv = [PopoverView showPopoverAtPoint:point inView:animalsbut withContentView:alertvu    delegate:self];
pv.tag=1;

}
-(IBAction)birds
{
   CGPoint point = [tap locationInView:self.birdsbut];

pv = [PopoverView showPopoverAtPoint:point inView:birdsbut withContentView:alertvu delegate:self];
pv.tag=2;
//[self checkingme:pv.tag];
}
-(IBAction)direct
 {  
  CGPoint point = [tap locationInView:self.direcbut];
pv = [PopoverView showPopoverAtPoint:point inView:direcbut withContentView:alertvu delegate:self];
pv.tag=4;
}
-(IBAction)fruit
{

CGPoint point = [tap locationInView:self.fruitbut];
pv = [PopoverView showPopoverAtPoint:point inView:fruitbut withContentView:alertvu delegate:self];
pv.tag=3;
} 
```

方法

```
-(IBAction)check:(NSInteger)sender
{
UIButton *mybutton =(UIButton*) [self.view viewWithTag:sender];

if(pv.tag==1)
{
    NSLog(@"button log%d",mybutton.tag);
if(mybutton.tag==0)
{

    animallearn *aview=[[animallearn alloc]initWithNibName:@"animallearn" bundle:nil];
    [self.navigationController pushViewController:aview animated:YES];
    [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
}
else //(mybutton.tag==1)
{
    playview *pview=[[playview alloc]initWithNibName:@"playview" bundle:nil];
    [self.navigationController pushViewController:pview animated:YES];
   [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
}

}
else if(pv.tag==2)
{
    if(mybutton.tag==0)
    {
        birdview *aview=[[birdview alloc]initWithNibName:@"birdview" bundle:nil];
        [self.navigationController pushViewController:aview animated:YES];
        [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];

    }
   else if(mybutton.tag==1)
   {
       playview *pview=[[playview alloc]initWithNibName:@"playview" bundle:nil];
       [self.navigationController pushViewController:pview animated:YES];
       [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
   }
}
else if(pv.tag==3)
{
    if(mybutton.tag==0)
    {
        fruitview *aview=[[fruitview alloc]initWithNibName:@"fruitview" bundle:nil];
        [self.navigationController pushViewController:aview animated:YES];
        [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];           
    }
    else if(mybutton.tag==1)
    {
        playview *pview=[[playview alloc]initWithNibName:@"playview" bundle:nil];
        [self.navigationController pushViewController:pview animated:YES];
        [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
    }
}
else if(pv.tag==4)
{
    if(mybutton.tag==0)
    {
        directview *aview=[[directview alloc]initWithNibName:@"directview" bundle:nil];
        [self.navigationController pushViewController:aview animated:YES];
         [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
    }
    else if(mybutton.tag==1)
    {
        playview *pview=[[playview alloc]initWithNibName:@"playview" bundle:nil];
        [self.navigationController pushViewController:pview animated:YES];
        [pv performSelector:@selector(dismiss) withObject:nil afterDelay:0.1f];
    }
}
else
{

    return ;
 }
 } 
```

这里的问题是，每当我按下第二个按钮时，它只在所有情况下显示按钮标签 0 视图？谁能帮我整理一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:06:55.770

您还应该设置要通过标签访问的 UIButtons/UIViews 的标签。像 secondButton.tag = 3; 并且传递的 sender 参数不是 NSInteger 类型，而是 UIView，所以像这样更改它！这应该可以解决您的问题！

```
-(IBAction)check:(id)sender 
{
    UIButton *mybutton =(UIButton*) sender;
    // continue whatever you were doing earlier!
} 
```

# java - 使用 Java 强制转换基类型

> ID：13508202
> 
> 赞同：0
> 
> 时间：2012-11-22T08:04:09.953
> 
> 标签：java

假设我有一个基类：

```
abstract class TheBase {}

class Foo extends TheBase {}
class Bar extends TheBase {} 
```

我想将基础对象“转换”成这种类型：

```
TheBase obj = getFromSomewhere();

Foo foo = obj.asA(Foo.class);

Bar bar = obj.asA(Bar.class); 
```

`asA`将抛出我定义的异常，如：`CustomCannotCastException()`

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T08:09:24.457

你需要这样的东西吗？

```
public class TheBase {
    public <T> T asA(Class<T> claxx) {
        if (claxx.isInstance(this)) {
            return claxx.cast(this);
        } else {
            throw new CustomCannotCastException();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:05:14.413

```
if(obj instanceof Foo)
{
    Foo foo = (Foo)obj;
}

if(obj instanceof Bar)
{
    Bar bar = (Bar)obj;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:20:38.327

我不会将 asA-Method 放在 TheBase-Class 中。我想要一个代码，它看起来像这样：

```
TheBase obj = getFromSomewhere();
Foo foo = Foo.getInstance(obj);
Bar bar = Bar.getInstance(obj); 
```

//FOO的例子

```
 public Foo getInstance(TheBase aBaseSomething) {
        if (aBaseSomething instanceof Foo) {
            return (Foo)aBaseSomething;
        } else {
            throw new CustomCannotCastException();
        }
    } 
```

所以需要的子类可以决定，做什么，超类不需要知道有子类。

# c++ - 如何使用 c++ 通过 ldap_functions 访问 AD 服务器？

> ID：13508203
> 
> 赞同：0
> 
> 时间：2012-11-22T08:04:16.227
> 
> 标签：c++, windows, winapi, dns, active-directory

我想使用 ldap_functions 连接广告。

我只知道用户名、密码和域名。

使用这些值，我可以初始化、连接、绑定 AD。

但是 ldap_search 函数会失败。

这是我的代码

```
errorCode = ldap_search_s(
                    pLdapConnection,    // Session handle
                    pMyDN,              // DN to start search
                    LDAP_SCOPE_SUBTREE, // Scope  LDAP_SCOPE_BASE LDAP_SCOPE_SUBTREE
                    pMyFilter,          // Filter
                    NULL,               // Retrieve list of attributes
                    0,                  // Get both attributes and values
                    &pSearchResult); 
```

在 pMyDN 值中，我指定了“DC=SANJU,DC=CO,DC=IN”。

返回代码给出 10.错误是 LDAP_REFERRAL。

但我将 pMyDN 值放入“OU=Marketing,DC=SANJU,DC=CO,DC=IN”

现在它成功了。

但问题是“我不知道其他用户的OU，那么我怎样才能为用户获取OU？

或者没有OU怎么能做到这一点？

注意：我只有用户名、密码、域名。

# drupal - 重定向主域

> ID：13508212
> 
> 赞同：1
> 
> 时间：2012-11-22T08:04:35.203
> 
> 标签：drupal, web, drupal-7, hosting

这是一个通用的虚拟主机问题，

我正在尝试将我的主域重定向到“www”文件夹中的子文件夹，该文件夹由 3 个文件夹组成，这是一个更好的视图

```
www ->
      Folder1
      Folder2 
      Folder3 
```

Folder2 是我的 drupal 安装位置，这是我希望我的域直接进入的位置

现在发生的事情是我在浏览器中输入我的域名 abc.com，然后我看到上面提到的 3 个文件夹，当我单击子文件夹 2 时，我可以正常使用 drupal。

我不确定需要改变什么，我相信这是可以做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:41:50.437

您可以使用`.htaccess`

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?Primarydomain.com$
RewriteRule ^(/)?$ Folder2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:17:03.183

你有什么样的网络服务器？它是您自托管的吗？

如果是 apache，您可以更改主页以指向新文件夹。但是，如果您是远程托管它，这可能会更加困难，您可能必须将整个安装移动到根目录。

另一种解决方案（不是一个好的解决方案）是通过在主文件夹中创建一个 index.html 来进行 HTTP 重定向

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Your Page Title</title>
<meta http-equiv="REFRESH" content="0;Folder2"></HEAD>
<BODY>
</BODY>
</HTML> 
```

# python - Google App Engine Python - 简单的 REST 处理程序

> ID：13508214
> 
> 赞同：3
> 
> 时间：2012-11-22T08:04:48.317
> 
> 标签：python, google-app-engine, rest

我有一个场景，客户端（移动应用程序）将向我的 GAE 网站发送更新查询，以查看该网站是否有更新版本的资源，如果有，它将返回此资源（zip 文件），否则它只会返回一个 json 响应“全部是最新的”（或者可能是一个未修改的 304 HTTP 响应代码）

REST URL 应该如何（来自移动应用程序）？

`www.example.com/update?version=(client_version)`

或者

`www.example.com/update_client_version`

感谢我能得到的任何帮助。

到目前为止我所拥有的是......但是由于某种原因我在做的时候得到了 404`http://localhost:8080/update/1`

`INFO 2012-11-22 10:12:18,441 dev_appserver.py:3092] "GET /holidays/1 HTTP/1.1" 404 -`

```
class UpdateHandler(webapp2.RequestHandler):
    def get(self, version):

        latestVersion == 1

        if version == latestVersion:
            self.response.write('You are using latest version')
        else:
            self.response.write('You are not using latest version')

app = webapp2.WSGIApplication([('/update/(.*)', UpdateHandler)], debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:06:52.223

我会采用以下方法：

> www.example.com/update/client_version

您的代码应如下所示：

```
import webapp2

class UpdateHandler(webapp2.RequestHandler):
    def get(self, version):
        # Do something for version

app = webapp2.WSGIApplication(
    [(r'/update/(\d+)', UpdateHandler)], 
    debug=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:02:15.227

如果您打算使用 HTTP 304，您应该查看是否可以让客户端发出有条件的 GET 请求。例如添加一个标题`If-Modified-Since: Thu, 22 Nov 2012 09:24:52 GMT`。

# django - Django - Ajax 注册

> ID：13508217
> 
> 赞同：4
> 
> 时间：2012-11-22T08:05:06.393
> 
> 标签：django, django-views, django-registration

我正在尝试允许[`django-registration register`](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)从模式对话框注册（使用此视图）到我的一个应用程序。

由于此表单位于模式框中，因此我想在成功时获得 json 响应（而不是默认重定向）

如何使用此视图 ( [`django-registration register`](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)) 来管理注册并在成功时发回 json 响应？

* * *

我知道如何做出 ajax/json 响应，问题是如何在没有重定向行为的情况下使用 django-registration 视图或将其包装到其他视图中来管理响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:51:18.877

首先，您需要更改 urls.py 以使用其他功能包装现有视图。为此，您必须在 backends 文件夹中创建一个新的后端包并在其中更改 urls.py，同时保持其他所有内容不变，或者您可以继续修改后端包中的现有 urls.py。

我没有对此进行测试，但它应该可以工作。

将 url 指向新视图：

```
# urls.py
url(r'^register/$', register_wrap,
    {'backend': 'registration.backends.default.DefaultBackend'},
    name='registration_register'),

# your new view that wraps the existing one
def register_wrap(request, *args, **kwargs):

    # call the standard view here
    response = register(request, *args, **kwargs)

    # check if response is a redirect
    if response.status_code == 302:
        # this was redirection, send json response instead
    else:
        # just return as it is
        return response 
```

如果您需要它来获得更多视图，您可以使用它创建一个装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:02:00.323

您询问如何使用现有视图来管理注册并在成功时发回 json 响应。由于 HttpResponseRedirect 在视图中几乎是硬编码的，因此您不能按原样使用视图。相反，要么分叉它，要么编写您自己的视图并更改 urls.py 以便 r'^register/$' 指向您的新视图。

就 json 响应而言，成功后您可以执行以下操作：

```
from django.utils import simplejson as json

def register_ajax(request):
    ...
    return HttpResponse(json.dumps(dict(success=True, **dict_containing_data))) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:19:05.573

我为什么要做的是检查`request.is_ajax()`您是否在正常的 after-successfull-registration-redirect 视图中并在那里返回 json 响应。

# php - php在没有任何变量名的情况下在url中发送和捕获数据

> ID：13508218
> 
> 赞同：0
> 
> 时间：2012-11-22T08:05:08.723
> 
> 标签：php

在 php 中的页面之间传递数据有 , 等方式`$_GET`。`$_POST`但是`$_REQUEST`如果我们要在 php 中发送没有任何变量的数据，我似乎已经忘记了一种方式。

例如，让示例 url 为：www.mysite.com?123

是否可以从相应的 php 页面中捕获值 123 ？

这里有什么用`$_SERVER`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:08:02.620

You can get it using:

```
$_SERVER["QUERY_STRING"] 
```

This url: `www.mysite.com?123` will provide `123` into `$_SERVER["QUERY_STRING"]`.

But be careful, if your url is like`www.mysite.com?123&re=789`, `$_SERVER["QUERY_STRING"]` will be `123&re=789`. It catch every thingg after the `?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:09:14.727

尝试：

```
$_SERVER["QUERY_STRING"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:13:36.067

我相信浏览器默认使用 HTTP GET，因此变量可以通过`$_GET`.

如果您想获得“123”，那么`key($_GET)`就足够了。但是，如果有更多参数，请考虑遍历`$_GET`数组的键。

```
echo 'First $_GET variable: ' . key($_GET);

echo "All the $_GET variables:";
print_r( array_keys($_GET) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:20:50.010

简单的一个，不要忘记 $_GET 是一个数组....

所以一个像这样的网址

*www.mysite.com?123*

```
$getArrayKeys = array_keys($_GET);

$firstValue = $getArrayKeys[0];  //work with the first param.

var_dump($getArrayKeys); //display all 
```

**输出**

> 数组（1）{[0]=>字符串（6）“123”}

但是，您在这里将自己限制为单个参数...当您需要传递第二个参数并且它们的顺序不同时会发生什么？

# java - SameTime 与不同的 TIMEZone

> ID：13508226
> 
> 赞同：1
> 
> 时间：2012-11-22T08:05:32.217
> 
> 标签：java

为什么程序以不同的方式打印出相同的输出/时间`TimeZone`？

```
 Calendar cal = GregorianCalendar.getInstance();
    TimeZone timeZone_1 = TimeZone.getTimeZone("Asia/Rangoon");
    cal.setTimeZone(timeZone_1);
    System.out.println(cal.getTime());

    TimeZone timeZone_2 = TimeZone.getTimeZone("Asia/Tokyo");
    cal.setTimeZone(timeZone_2);
    System.out.println(cal.getTime()); 
```

示例输出：

```
Thu Nov 22 09:00:33 MMT 2012
Thu Nov 22 09:00:33 MMT 2012 
```

我的预期输出是：

```
Thu Nov 22 09:00:33 MMT 2012
Thu Nov 22 11:30:33 MMT 2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:06:56.380

您的代码很好，只是调试输出错误（误导）。[`cal.getTime()`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getTime%28%29)返回[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)与时区无关的对象。但[`Date.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString%28%29)总是用系统的时区打印这个日期。`Date.toString()`是如此违反直觉（它显示带有系统时区的日历时间，而它几乎不存储毫秒数）以至于它应该被禁止/弃用。

要获得准确的日志记录，请使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)或调用各种`Calendar.get*()`方法：

```
System.out.println(cal.get(Calendar.HOUR_OF_DAY));
System.out.println(cal.get(Calendar.MINUTE)); 
```

与任何关于 Java 日期/时间处理的问题一样，请考虑[jodatime](/questions/tagged/jodatime "显示标记为“jodatime”的问题") ...

# wcf - DataContractSerializer 的问题

> ID：13508229
> 
> 赞同：0
> 
> 时间：2012-11-22T08:05:39.487
> 
> 标签：wcf, serialization, datacontractserializer

我正在尝试让 DataContract Serializer 与我的班级之一一起工作。

这里是 ：

```
public class MyOwnObservableCollection<T> : ObservableCollection<T>, IDisposable
    where T : IObjectWithChangeTracker, INotifyPropertyChanged
{
    protected List<T> removedItems;

    [DataMember]
    public List<T> RemovedItems 
    {
    get { return this.removedItems;} 
    set { this.removedItems = value;}
    }
    // Other code removed for simplification
    // ...
    //
} 
```

当您从 ObservableCollection 中删除项目时，请务必了解 RemovedItems 列表会自动填充。

现在使用 DataContractSerializer 序列化此类的一个实例，并使用以下代码在 removedItems 列表中具有一个元素：

```
MyOwnObservableCollection<Test> _Test = new MyOwnObservableCollection<Test>();
DataContractSerializer dcs = new DataContractSerializer(typeof(MyOwnObservableCollection<Test>));
XmlWriterSettings settings = new XmlWriterSettings() { Indent = true };
string fileName = @"Test.xml";

Insurance atest = new Test();
atest.Name = @"sfdsfsdfsff";
_Test.Add(atest);
_Test.RemoveAt(0); // The Iitem in the ObservableCollection is moved to the RemovedItems List/
using (var w = XmlWriter.Create(fileName, settings))
{
    dcs.WriteObject(w, _Test);
} 
```

以 XML 文件中的任何内容结尾：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfTest xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="MyNameSpace" /> 
```

为什么这个公共财产被忽视了？我在这里错过了什么？

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:45:33.240

这里的问题是您的类是从集合派生的，因此，`DataContractSerializer`仅序列化其项目，而不是任何额外的属性，如此处所述：[使用 CollectionDataContract 时没有属性](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/57eb195a-43a9-47fe-8b1a-a9d23feb2df2)。

一种解决方法是使用原始（继承的）集合作为属性，而不是从它继承：

```
public class MyOwnObservableCollection<T> : IDisposable
    where T : IObjectWithChangeTracker, INotifyPropertyChanged
{
   readonly ObservableCollection<T> originalCollection = new ObservableCollection<T>();
   protected List<T> removedItems = = new List<T>();

   [DataMember]
   public List<T> RemovedItems 
   {
      get { return this.removedItems;} 
      set { this.removedItems = value;}
   }

   [DataMember]
   public ObservableCollection<T> OriginalCollection  
   {
      get { return this.originalCollection; }
   }

   // ...
} 
```

# c# - 如何在 C# 中将 IP 范围转换为 Cidr？

> ID：13508231
> 
> 赞同：4
> 
> 时间：2012-11-22T08:05:47.287
> 
> 标签：c#, ip, cidr

有很多将 CIDR 转换为 ip 范围的示例。但我想知道如何使用开始/结束 ip 地址在 C# 中生成一个/一些 cidr？

例如：我有起始IP地址（192.168.0.1）和结束IP地址（192.168.0.254）。所以使用这两个地址生成 cidr 列表 {192.168.0.0/31, 192.168.0.2/32}。有没有 C# 代码示例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T09:59:05.287

很难确定这里到底要问什么（您提供的 CIDR 列表似乎与给定的输入地址不对应），但是下面的代码将允许您找到包含指定开始的最小单个 CIDR 和结束地址。

您需要先将开始和结束 IP 地址转换为 32 位整数（例如 192.168.0.1 变为 0xc0a80001），然后应用以下算法：

```
var startAddr = 0xc0a80001; // 192.168.0.1
var endAddr = 0xc0a800fe;   // 192.168.0.254

// Determine all bits that are different between the two IPs
var diffs = startAddr ^ endAddr;

// Now count the number of consecutive zero bits starting at the most significant
var bits = 32;
var mask = 0;
while (diffs != 0)
{
    // We keep shifting diffs right until it's zero (i.e. we've shifted all the non-zero bits off)
    diffs >>= 1;
    // Every time we shift, that's one fewer consecutive zero bits in the prefix
    bits--;
    // Accumulate a mask which will have zeros in the consecutive zeros of the prefix and ones elsewhere
    mask = (mask << 1) | 1;
}

// Construct the root of the range by inverting the mask and ANDing it with the start address
var root = startAddr & ~mask;
// Finally, output the range
Console.WriteLine("{0}.{1}.{2}.{3}/{4}", root >> 24, (root >> 16) & 0xff, (root >> 8) & 0xff, root & 0xff, bits); 
```

在您问题中的两个地址上运行它会给出：

```
192.168.0.0/24 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-28T12:56:53.440

`CIDR`具有静态方法的类将 IP 范围拆分为一组最小的不相交`CIDR`范围，这些范围完全覆盖了原始 IP 范围。

拆分方法（在 BigIntegers 上进行实际工作的“真实”方法，以及 IP 地址和 CIDR 创建的包装器）位于底部。

与`foreach (IPRangeToCidr.CIDR c in IPRangeToCidr.CIDR.split(first, last)) ...`

在引用中需要 System.Numerics.dll。

```
using System;
using System.Numerics;
using System.Net;
using System.Net.Sockets;
using System.Collections.Generic;

namespace IPRangeToCidr {
    public struct CIDR {
        private IPAddress address;
        private uint network_length, bits;

        public CIDR(IPAddress address, uint network_length) {
            this.address = address;
            this.network_length = network_length;
            this.bits = AddressFamilyBits(address.AddressFamily);
            if (network_length > bits) {
                throw new ArgumentException("Invalid network length " + network_length + " for " + address.AddressFamily);
            }
        }

        public IPAddress NetworkAddress {
            get { return address; }
        }
        public IPAddress LastAddress {
            get { return IPAddressAdd(address, (new BigInteger(1) << (int) HostLength) - 1); }
        }
        public uint NetworkLength {
            get { return network_length; }
        }
        public uint AddressBits {
            get { return bits; }
        }
        public uint HostLength {
            get { return bits - network_length; }
        }

        override public String ToString() {
            return address.ToString() + "/" + NetworkLength.ToString();
        }

        public String ToShortString() {
            if (network_length == bits) return address.ToString();
            return address.ToString() + "/" + NetworkLength.ToString();
        }

        /* static helpers */
        public static IPAddress IPAddressAdd(IPAddress address, BigInteger i) {
            return IPFromUnsigned(IPToUnsigned(address) + i, address.AddressFamily);
        }

        public static uint AddressFamilyBits(AddressFamily family) {
            switch (family) {
            case AddressFamily.InterNetwork:
                return 32;
            case AddressFamily.InterNetworkV6:
                return 128;
            default:
                throw new ArgumentException("Invalid address family " + family);
            }
        }

        private static BigInteger IPToUnsigned(IPAddress addr) {
            /* Need to reverse addr bytes for BigInteger; prefix with 0 byte to force unsigned BigInteger
             * read BigInteger bytes as: bytes[n] bytes[n-1] ... bytes[0], address is bytes[0] bytes[1] .. bytes[n] */
            byte[] b = addr.GetAddressBytes();
            byte[] unsigned = new byte[b.Length + 1];
            for (int i = 0; i < b.Length; ++i) {
                unsigned[i] = b[(b.Length - 1) - i];
            }
            unsigned[b.Length] = 0;
            return new BigInteger(unsigned);
        }

        private static byte[] GetUnsignedBytes(BigInteger unsigned, uint bytes) {
            /* reverse bytes again. check that now higher bytes are actually used */
            if (unsigned.Sign < 0) throw new ArgumentException("argument must be >= 0");
            byte[] data = unsigned.ToByteArray();
            byte[] result = new byte[bytes];
            for (int i = 0; i < bytes && i < data.Length; ++i) {
                result[bytes - 1 - i] = data[i];
            }
            for (uint i = bytes; i < data.Length; ++i) {
                if (data[i] != 0) throw new ArgumentException("argument doesn't fit in requested number of bytes");
            }
            return result;
        }

        private static IPAddress IPFromUnsigned(BigInteger unsigned, System.Net.Sockets.AddressFamily family) {
            /* IPAddress(byte[]) constructor picks family from array size */
            switch (family) {
            case System.Net.Sockets.AddressFamily.InterNetwork:
                return new IPAddress(GetUnsignedBytes(unsigned, 4));
            case System.Net.Sockets.AddressFamily.InterNetworkV6:
                return new IPAddress(GetUnsignedBytes(unsigned, 16));
            default:
                throw new ArgumentException("AddressFamily " + family.ToString() + " not supported");
            }
        }

        /* splits set [first..last] of unsigned integers into disjoint slices { x,..., x + 2^k - 1 | x mod 2^k == 0 }
         *  covering exaclty the given set.
         * yields the slices ordered by x as tuples (x, k)
         * This code relies on the fact that BigInteger can't overflow; temporary results may need more bits than last is using.
         */
        public static IEnumerable<Tuple<BigInteger, uint>> split(BigInteger first, BigInteger last) {
            if (first > last) yield break;
            if (first < 0) throw new ArgumentException();
            last += 1;
            /* mask == 1 << len */
            BigInteger mask = 1;
            uint len = 0;
            while (first + mask <= last) {
                if ((first & mask) != 0) {
                    yield return new Tuple<BigInteger, uint>(first, len);
                    first += mask;
                }
                mask <<= 1;
                ++len;
            }
            while (first < last) {
                mask >>= 1;
                --len;
                if ((last & mask) != 0) {
                    yield return new Tuple<BigInteger, uint>(first, len);
                    first += mask;
                }
            }
        }

        public static IEnumerable<CIDR> split(IPAddress first, IPAddress last) {
            if (first.AddressFamily != last.AddressFamily) {
                throw new ArgumentException("AddressFamilies don't match");
            }
            AddressFamily family = first.AddressFamily;
            uint bits = AddressFamilyBits(family); /* split on numbers returns host length, CIDR takes network length */
            foreach (Tuple<BigInteger, uint> slice in split(IPToUnsigned(first), IPToUnsigned(last))) {
                yield return new CIDR(IPFromUnsigned(slice.Item1, family), bits - slice.Item2);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T09:32:51.140

我建议使用 IPNetwork 库[https://github.com/lduchosal/ipnetwork](https://github.com/lduchosal/ipnetwork)。从版本 2 开始，它也支持 IPv4 和 IPv6。

**超网**

```
 IPNetwork network = IPNetwork.Parse("192.168.0.1");
  IPNetwork network2 = IPNetwork.Parse("192.168.0.254");

  IPNetwork ipnetwork = IPNetwork.Supernet(network, network2);

  Console.WriteLine("Network : {0}", ipnetwork.Network);
  Console.WriteLine("Netmask : {0}", ipnetwork.Netmask);
  Console.WriteLine("Broadcast : {0}", ipnetwork.Broadcast);
  Console.WriteLine("FirstUsable : {0}", ipnetwork.FirstUsable);
  Console.WriteLine("LastUsable : {0}", ipnetwork.LastUsable);
  Console.WriteLine("Usable : {0}", ipnetwork.Usable);
  Console.WriteLine("Cidr : {0}", ipnetwork.Cidr); 
```

输出

```
Network : 192.168.0.0
Netmask : 255.255.255.0
Broadcast : 192.168.0.255
FirstUsable : 192.168.0.1
LastUsable : 192.168.0.254
Usable : 254
Cidr : 24 
```

玩得开心 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-29T21:50:06.747

我将它用于 IpV4，如果它有问题，请告诉我。您可以从以下链接找到提取源代码： [https ://blog.ip2location.com/knowledge-base/how-to-convert-ip-address-range-into-cidr/](https://blog.ip2location.com/knowledge-base/how-to-convert-ip-address-range-into-cidr/)

```
using System;
using System.Collections.Generic;
using System.Net;

namespace ConsoleApp
{
    public class IPNetwork
    {
        private readonly long _firstIpAddress;
        private readonly long _lastIpAddress;

        public static IPNetwork[] FromIpRange(IPAddress firstIpAddress, IPAddress lastIpAddress)
            => FromIpRange(IpAddressToLong(firstIpAddress), IpAddressToLong(lastIpAddress));

        public static IPNetwork[] FromIpRange(long firstIpAddress, long lastIpAddress)
        {
            var result = new List<IPNetwork>();
            while (lastIpAddress >= firstIpAddress)
            {
                byte maxSize = 32;
                while (maxSize > 0)
                {
                    long mask = IMask(maxSize - 1);
                    long maskBase = firstIpAddress & mask;

                    if (maskBase != firstIpAddress)
                        break;

                    maxSize--;
                }
                double x = Math.Log(lastIpAddress - firstIpAddress + 1) / Math.Log(2);
                byte maxDiff = (byte)(32 - Math.Floor(x));
                if (maxSize < maxDiff)
                {
                    maxSize = maxDiff;
                }
                var ipAddress = IpAddressFromLong(firstIpAddress);
                result.Add(new IPNetwork(ipAddress, maxSize));
                firstIpAddress += (long)Math.Pow(2, 32 - maxSize);
            }
            return result.ToArray();
        }

        private static long IMask(int s)
        {
            return (long)(Math.Pow(2, 32) - Math.Pow(2, 32 - s));
        }

        public static long IpAddressToLong(IPAddress ipAddress)
        {
            var bytes = ipAddress.GetAddressBytes();
            return ((long)bytes[0] << 24) | ((long)bytes[1] << 16) | ((long)bytes[2] << 8) | bytes[3];
        }

        public static IPAddress IpAddressFromLong(long ipAddress)
            => new IPAddress((uint)IPAddress.NetworkToHostOrder((int)ipAddress));

        public IPNetwork(IPAddress prefix, int prefixLength = 32)
        {
            if (prefix.AddressFamily != System.Net.Sockets.AddressFamily.InterNetwork)
                throw new NotSupportedException("IPv6 is not supported");

            Prefix = prefix;
            PrefixLength = prefixLength;

            var mask = (uint)~(0xFFFFFFFFL >> prefixLength);
            _firstIpAddress = IpAddressToLong(Prefix) & mask;
            _lastIpAddress = _firstIpAddress | ~mask;
        }

        public static IPNetwork Parse(string value)
        {
            try
            {
                var parts = value.Split('/');
                return new IPNetwork(IPAddress.Parse(parts[0]), int.Parse(parts[1]));
            }
            catch
            {
                throw new FormatException($"Could not parse IPNetwork from {value}");
            }
        }

        public override string ToString() => $"{Prefix}/{PrefixLength}";

        public IPAddress Prefix { get; }
        public int PrefixLength { get; }
        public IPAddress LastAddress => IpAddressFromLong(_lastIpAddress);
        public IPAddress FirstAddress => IpAddressFromLong(_firstIpAddress);
        public long Total => _lastIpAddress - _firstIpAddress + 1;
    }
} 
```

**用法一：**

```
var startAddress = IPAddress.Parse("192.168.0.0");
var endAddress = IPAddress.Parse("192.168.0.255");
foreach (var item in IPNetwork.FromIpRange(startAddress, endAddress))
        Console.WriteLine(item); 
```

结果

```
192.168.0.0/24 
```

**用法二：**

```
var startAddress = IPAddress.Parse("192.168.0.1");
var endAddress = IPAddress.Parse("192.168.0.254");
foreach (var item in IPNetwork.FromIpRange(startAddress, endAddress))
        Console.WriteLine(item); 
```

结果：

```
192.168.0.1/32
192.168.0.2/31
192.168.0.4/30
192.168.0.8/29
192.168.0.16/28
192.168.0.32/27
192.168.0.64/26
192.168.0.128/26
192.168.0.192/27
192.168.0.224/28
192.168.0.240/29
192.168.0.248/30
192.168.0.252/31
192.168.0.254/32 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T05:53:46.547

我找到了这个[C 代码](http://www.dzone.com/snippets/ip-range-cidr-convertor-c-code)并将其转换为 C#，它现在可以工作了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-16T18:41:35.917

死灵术。
不，没有，我不明白为什么人们一直支持错误的答案。

这是 IP 范围到 CIDR 的代码，反之亦然：

```
// https://dev.maxmind.com/geoip/
// https://stackoverflow.com/questions/461742/how-to-convert-an-ipv4-address-into-a-integer-in-c
public static string IPrange2CIDR(string ip1, string ip2)
{
    uint startAddr = IP2num(ip1);
    uint endAddr = IP2num(ip2);

    // uint startAddr = 0xc0a80001; // 192.168.0.1
    // uint endAddr = 0xc0a800fe;   // 192.168.0.254
    // uint startAddr = System.BitConverter.ToUInt32(System.Net.IPAddress.Parse(ip1).GetAddressBytes(), 0);
    // uint endAddr = System.BitConverter.ToUInt32(System.Net.IPAddress.Parse(ip2).GetAddressBytes(), 0);

    if (startAddr > endAddr)
    {
        uint temp = startAddr;
        startAddr = endAddr;
        endAddr = temp;
    }

    // uint diff = endAddr - startAddr -1;
    // int bits =  32 - (int)System.Math.Ceiling(System.Math.Log10(diff) / System.Math.Log10(2));
    // return ip1 + "/" + bits;

    uint diffs = startAddr ^ endAddr;

    // Now count the number of consecutive zero bits starting at the most significant
    int bits = 32;
    // int mask = 0;

    // We keep shifting diffs right until it's zero (i.e. we've shifted all the non-zero bits off)
    while (diffs != 0)
    {
        diffs >>= 1;
        bits--; // Every time we shift, that's one fewer consecutive zero bits in the prefix
        // Accumulate a mask which will have zeros in the consecutive zeros of the prefix and ones elsewhere
        // mask = (mask << 1) | 1;
    }

    string res = ip1 + "/" + bits;
    System.Console.WriteLine(res);
    return res;
}

// https://www.digitalocean.com/community/tutorials/understanding-ip-addresses-subnets-and-cidr-notation-for-networking
public static void CIDR2IP(string IP)
{   
    string[] parts = IP.Split('.', '/');

    uint ipnum = (System.Convert.ToUInt32(parts[0]) << 24) |
        (System.Convert.ToUInt32(parts[1]) << 16) |
        (System.Convert.ToUInt32(parts[2]) << 8) |
        System.Convert.ToUInt32(parts[3]);

    int maskbits = System.Convert.ToInt32(parts[4]);
    uint mask = 0xffffffff;
    mask <<= (32 - maskbits);

    uint ipstart = ipnum & mask;
    uint ipend = ipnum | (mask ^ 0xffffffff);

    string fromRange = string.Format("{0}.{1}.{2}.{3}", ipstart >> 24, (ipstart >> 16) & 0xff, (ipstart >> 8) & 0xff, ipstart & 0xff);
    string toRange = string.Format("{0}.{1}.{2}.{3}", ipend >> 24, (ipend >> 16) & 0xff, (ipend >> 8) & 0xff, ipend & 0xff);

    System.Console.WriteLine(fromRange + " - " + toRange);
}

public static uint IP2num(string ip)
{
    string[] nums = ip.Split('.');
    uint first = System.UInt32.Parse(nums[0]);
    uint second = System.UInt32.Parse(nums[1]);
    uint third = System.UInt32.Parse(nums[2]);
    uint fourth = System.UInt32.Parse(nums[3]);

    return (first << 24) | (second << 16) | (third << 8) | (fourth);
}

public static void Test()
{
    string IP = "5.39.40.96/27";
    // IP = "88.84.128.0/19";
    CIDR2IP(IP);

    // IPrange2CIDR("88.84.128.0", "88.84.159.255");
    IPrange2CIDR("5.39.40.96", "5.39.40.127");

    System.Console.WriteLine(System.Environment.NewLine);
    System.Console.WriteLine(" --- Press any key to continue --- ");
    System.Console.ReadKey();
} 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中打开 gics 文件

> ID：13508236
> 
> 赞同：0
> 
> 时间：2012-11-22T08:06:13.320
> 
> 标签：visual-studio-2010, windows-phone-7, designer

我正在构建 Windows Phone 7 应用程序。我知道该`g.i.cs`文件用于从 XAML 创建 UI 对象。

当右键单击`InitializeComponent()`并选择**Go to definition**时，我可以看到该`g.i.cs`文件。还有其他方法可以打开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:17:04.707

您可以从解决方案的 obj/Debug 目录打开该文件。我不认为你可以用解决方案资源管理器打开它，这个文件是在编译期间创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T08:23:21.253

`show all files`通过单击图标并转到 ，您可以在解决方案资源管理器中看到该文件`obj / Debug / file.g.i.cs`。

# jquery - 在标题前后插入元素，第一个标题除外

> ID：13508246
> 
> 赞同：0
> 
> 时间：2012-11-22T08:07:09.217
> 
> 标签：jquery, insert, element, jquery-ui-accordion

我有一个 h5 的列表：

```
<div id="accordion"><h5>One</h5>
<p>Lorem ipsum dolor sit amet</p>
<h5>Two</h5>
<p>Lorem ipsum dolor sit amet.</p>
<h5>Three</h5>
<p>Lorem ipsum dolor sit amet</p>
<h5>Four</h5>
<p>Lorem ipsum dolor sit amet</p>
<h5>Five</h5>
<p>Lorem ipsum dolor sit amet</p></div> 
```

我想使用 jQuery UI 手风琴将它们变成手风琴，它将第一个元素作为包含，所以我想在每个 h5 之间包装内容。如果我使用 .after() 和 .before() 它会同时获取 的结束标签和开始标签，`</h5>`我也不知道如何让第一个元素不在其上方插入结束标签：

到目前为止我所拥有的显然不起作用：

```
var insert = true;
$("#accordion h5").each(function(event) {
    // All of them have a div immediatly after it.
    $(this).after("<div>");
    if (insert === true) {
        insert = false;
    } else {
        $(this).before("</div>");
    }
}); 
```

澄清一下，我的输出我想看起来像这样，但并不总是有 p 标签，因为它可以是任何内容。

```
<div id="accordion">
<h5>One</h5>
<div><p>Lorem ipsum dolor sit amet</p></div>
<h5>Two</h5>
<div><p>Lorem ipsum dolor sit amet.</p></div>
<h5>Three</h5>
<div><p>Lorem ipsum dolor sit amet</p></div>
...
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:10:05.190

您需要包装功能：

```
$("#accordion h5").wrap('<div />'); 
```

文档：[http ://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:11:32.190

使用这个选择器来获取除第一个之外的所有 h5：

```
$('#accordion h5:not(:first)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:17:54.190

认为这就是你想要的：

```
$('#accordion > h5').each(function() {
    $(this).nextUntil('h5').wrapAll('<div/>');
}); 
```

这会将每个内容之间的所有内容包装`h5`在一个`div`

[这是一个小提琴](http://jsfiddle.net/n7d9e/)

**编辑**

`div`要在没有内容时插入 a ，只需添加一个简单的条件，例如：

```
$this = $(this); 
if ($this.next('h5').length) {
  $this.after('<div/>');
} else {
  $this.nextUntil('h5').wrapAll('<div/>');
} 
```

这基本上是说如果下一个元素是 a `h5`（即没有内容），则插入一个空的`div`，否则将所有内容包装到 a 中的下`h5`一个`div`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:18:20.543

您可以在每个函数中使用 .not() 选择器，然后在 .not() 内部使用 :eq(0) 选择器，0 是第一个元素的索引。在你的情况下：

```
$("#accordion h5").not(':eq(0)').each(function(event) {
    //your code
}); 
```

希望能帮助到你

# jquery - Stop animation of first div when second is started

> ID：13508249
> 
> 赞同：-4
> 
> 时间：2012-11-22T08:07:15.510
> 
> 标签：jquery, animation, hover, queue

I want to create animated hover. On `mouseover` I need to fadeOut div, then change its content background and color, and show it again. And on `mouseout` put everything in the previous condition. My HTML is

```
<div class="icon-wrapper">
    <span class="icon like-icon"></span>
     like 
</div>
<div class="icon-wrapper">
   <span class="icon comment-icon"></span>
   comment 
</div> 
```

and my javaScript code

```
$('.icon-wrapper').hover(
    function(){
        $(this).animate({opacity:0}{queue:true,duration:1000,complete:function() {
        $(this).find('.icon').css('backgroundPositionY','-56px');
        $(this).css('color','#dd3939');
        $(this).animate({opacity:1},{queue:true,duration:1000});
     }});
  },function(){
        $(this).animate({opacity:0},{queue:true,duration:1000,complete :function() {
        $(this).find('.icon').css('backgroundPositionY','-12px');
        $(this).css('color','#707173');
        $(this).animate({opacity:1},{queue:true,duration:1000});
  }});
}); 
```

I get almost what I need. The only thing is that I want to stop animation of first div when I'm starting the animation of second.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:11:06.327

要停止动画，只需使用

```
$(this).stop( true, true ); 
```

但是当涉及到样式时，使用 css 类可能更有意义

当你悬停使用

```
$(this).addClass("active"); 
```

当你退出元素

```
$(this).removeClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:17:15.173

`fadeIn`我认为您需要进行一些重构，当您有可用的方法时，为什么要使用动画不透明度`fadeOut`？检查这个：

```
$('.icon-wrapper').on('mouseover',
    function(){
        $(this).fadeOut(1000,function() {
        $(this).find('.icon').css('backgroundPositionY','-56px');
        $(this).css('color','#dd3939');
        $(this).fadeIn(1000);
     });
  },function(){
        $(this).fadeOut(1000,function() {
        $(this).find('.icon').css('backgroundPositionY','-12px');
        $(this).css('color','#707173');
        $(this).fadeIn(1000);
  });
}); 
```

然后你可以用它`stop();`来停止事件，我希望你用它`clone();`来替换 html 内容:)

# java - Quartz：如何使用 org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin 重新加载作业和触发器？

> ID：13508252
> 
> 赞同：2
> 
> 时间：2012-11-22T08:07:38.657
> 
> 标签：java, quartz-scheduler

我想在我的小而简单的网络应用程序中使用石英。（石英 2.1.6 和 tomcat 7.0.22）。我想在不重新启动我的应用程序的情况下更改触发 cron 表达式。我将作业放在 xml 文件中`quartz-jobs.xml`并设置`XMLSchedulingDataProcessorPlugin`为`quartz.properties`

问题：当我更改内容时`quartz-jobs.xml`，石英检测到的文件被更改并重新加载，删除并创建新作业。我在日志文件中看到它。但是该文件的内容是旧的（与启动时相同）。

所以我在文件系统中有新版本的`quartz-jobs.xml`，但石英在某处获取该文件的旧版本。

文件系统是带有默认设置的普通 ext4。

那么，如何从 xml 文件中刷新石英作业和触发器？

这是我的配置：

石英属性：

```
org.quartz.scheduler.instanceName = SMSScheduler
org.quartz.threadPool.threadCount = 1
org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore
org.quartz.scheduler.skipUpdateCheck=true

org.quartz.plugin.jobInitializer.class = org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin
org.quartz.plugin.jobInitializer.fileNames = quartz-jobs.xml
org.quartz.plugin.jobInitializer.failOnFileNotFound = true
org.quartz.plugin.jobInitializer.scanInterval = 30
org.quartz.plugin.jobInitializer.wrapInUserTransaction = false 
```

石英-jobs.xml

```
<?xml version='1.0' encoding='utf-8'?>
<job-scheduling-data xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
                     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
                     version="1.8">

    <pre-processing-commands>
        <delete-jobs-in-group>REPORT_GROUP</delete-jobs-in-group>
        <delete-triggers-in-group>REPORT_TRIGGER_GROUP</delete-triggers-in-group>
    </pre-processing-commands>
    <schedule>
        <job>
            <name>report-job</name>
            <group>REPORT_GROUP</group>
            <description>Create report</description>
            <job-class>com.company.quartz.ReportJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>every-day-trigger</name>
                <group>REPORT_TRIGGER_GROUP</group>
                <job-name>report-job</job-name>

                <job-group>REPORT_GROUP</job-group>
                <!-- trigger every minute -->
                <cron-expression>0 * * * * ?</cron-expression>
            </cron>
        </trigger>
    </schedule>
</job-scheduling-data> 
```

报告作业.java

```
package com.company.quartz;

import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class ReportJob implements Job {

    @Override
    public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException {
            System.out.println("test!");
    }
} 
```

日志，您可以在其中查看检查间隔和正在运行的作业：

```
2012-11-22 11:47:20,169 INFO [pool-2-thread-1] [QuartzInitializerListener.java:contextInitialized:147] Quartz Initializer Servlet loaded, initializing Scheduler...
2012-11-22 11:47:20,223 INFO [pool-2-thread-1] [StdSchedulerFactory.java:instantiate:1157] Using default implementation for ThreadExecutor
2012-11-22 11:47:20,261 INFO [pool-2-thread-1] [SchedulerSignalerImpl.java:<init>:61] Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2012-11-22 11:47:20,261 INFO [pool-2-thread-1] [QuartzScheduler.java:<init>:243] Quartz Scheduler v.2.1.6 created.
2012-11-22 11:47:20,263 INFO [pool-2-thread-1] [XMLSchedulingDataProcessorPlugin.java:initialize:202] Registering Quartz Job Initialization Plug-in.
2012-11-22 11:47:20,264 INFO [pool-2-thread-1] [RAMJobStore.java:initialize:154] RAMJobStore initialized.
2012-11-22 11:47:20,266 INFO [pool-2-thread-1] [QuartzScheduler.java:initialize:268] Scheduler meta-data: Quartz Scheduler (v2.1.6) 'SMSScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 1 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2012-11-22 11:47:20,266 INFO [pool-2-thread-1] [StdSchedulerFactory.java:instantiate:1306] Quartz scheduler 'SMSScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2012-11-22 11:47:20,266 INFO [pool-2-thread-1] [StdSchedulerFactory.java:instantiate:1310] Quartz scheduler version: 2.1.6
2012-11-22 11:47:20,275 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessorPlugin.java:start:254] Scheduled file scan job for data file: quartz-jobs.xml, at interval: 10000
2012-11-22 11:47:20,280 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:resolveSchemaSource:239] Utilizing schema packaged in local quartz distribution jar.
2012-11-22 11:47:20,283 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:processFile:498] Parsing XML file: quartz-jobs.xml with systemId: quartz-jobs.xml
2012-11-22 11:47:20,358 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:549] Found 1 delete job group commands.
2012-11-22 11:47:20,365 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:563] Found 1 delete trigger group commands.
2012-11-22 11:47:20,367 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:577] Found 0 delete job commands.
2012-11-22 11:47:20,368 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:594] Found 0 delete trigger commands.
2012-11-22 11:47:20,375 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:614] Directive 'overwrite-existing-data' not specified, defaulting to true
2012-11-22 11:47:20,377 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:624] Directive 'ignore-duplicates' not specified, defaulting to false
2012-11-22 11:47:20,378 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:638] Found 1 job definitions.
2012-11-22 11:47:20,398 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:674] Parsed job definition: JobDetail 'REPORT_GROUP.report-job':  jobClass: 'com.company.quartz.ReportJob concurrentExectionDisallowed: false persistJobDataAfterExecution: false isDurable: false requestsRecovers: false
2012-11-22 11:47:20,407 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:686] Found 1 trigger definitions.
2012-11-22 11:47:20,451 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:817] Parsed trigger definition: Trigger 'REPORT_TRIGGER_GROUP.every-day-trigger':  triggerClass: 'org.quartz.impl.triggers.CronTriggerImpl calendar: 'null' misfireInstruction: 0 nextFireTime: null
2012-11-22 11:47:20,457 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:executePreProcessCommands:962] Deleting all jobs in group: REPORT_GROUP
2012-11-22 11:47:20,461 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:executePreProcessCommands:983] Deleting all triggers in group: REPORT_TRIGGER_GROUP
2012-11-22 11:47:20,461 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1021] Adding 1 jobs, 1 triggers.
2012-11-22 11:47:20,461 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1046] Adding job: REPORT_GROUP.report-job
2012-11-22 11:47:20,462 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1107] Scheduling job: REPORT_GROUP.report-job with trigger: REPORT_TRIGGER_GROUP.every-day-trigger
2012-11-22 11:47:20,471 INFO [pool-2-thread-1] [QuartzScheduler.java:start:534] Scheduler SMSScheduler_$_NON_CLUSTERED started.
2012-11-22 11:47:20,472 INFO [pool-2-thread-1] [QuartzInitializerListener.java:contextInitialized:199] Scheduler has been started...
2012-11-22 11:47:20,472 INFO [pool-2-thread-1] [QuartzInitializerListener.java:contextInitialized:217] Storing the Quartz Scheduler Factory in the servlet context at key: org.quartz.impl.StdSchedulerFactory.KEY
2012-11-22 11:47:20,481 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:47:20,493 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:47:20,516 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:47:20,517 DEBUG [SMSScheduler_Worker-1] [FileScanJob.java:execute:138] File 'quartz-jobs.xml' unchanged.
2012-11-22 11:47:20,517 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:47:30,272 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:47:30,272 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:47:30,272 DEBUG [SMSScheduler_Worker-1] [FileScanJob.java:execute:138] File 'quartz-jobs.xml' unchanged.
2012-11-22 11:47:30,273 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:47:40,271 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:47:40,272 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:47:40,272 DEBUG [SMSScheduler_Worker-1] [FileScanJob.java:execute:138] File 'quartz-jobs.xml' unchanged.
2012-11-22 11:47:40,272 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:47:50,271 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:47:50,271 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:47:50,271 DEBUG [SMSScheduler_Worker-1] [FileScanJob.java:execute:138] File 'quartz-jobs.xml' unchanged.
2012-11-22 11:47:50,273 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:48:00,001 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'REPORT_GROUP.report-job', class=com.company.quartz.ReportJob
2012-11-22 11:48:00,003 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job REPORT_GROUP.report-job
2012-11-22 11:48:00,003 ERROR [SMSScheduler_Worker-1] [ReportJob.java:execute:31] test
2012-11-22 11:48:00,289 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:48:00,290 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:48:00,290 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:48:00,290 DEBUG [SMSScheduler_Worker-1] [FileScanJob.java:execute:138] File 'quartz-jobs.xml' unchanged.
2012-11-22 11:48:00,290 DEBUG [SMSScheduler_QuartzSchedulerThread] 
```

接下来我更改内容`quartz-jobs.xml`，使其无效，所以我希望看到 xml 解析器错误，但没有任何变化：

```
2012-11-22 11:51:20,280 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 11:51:30,271 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob
2012-11-22 11:51:30,272 DEBUG [SMSScheduler_Worker-1] [JobRunShell.java:run:212] Calling execute on job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml
2012-11-22 11:51:30,272 INFO [SMSScheduler_Worker-1] [FileScanJob.java:execute:135] File 'quartz-jobs.xml' updated, notifying listener.
2012-11-22 11:51:30,273 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:resolveSchemaSource:239] Utilizing schema packaged in local quartz distribution jar.
2012-11-22 11:51:30,277 INFO [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:processFile:498] Parsing XML file: quartz-jobs.xml with systemId: quartz-jobs.xml
2012-11-22 11:51:30,306 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:549] Found 1 delete job group commands.
2012-11-22 11:51:30,308 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:563] Found 1 delete trigger group commands.
2012-11-22 11:51:30,310 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:577] Found 0 delete job commands.
2012-11-22 11:51:30,312 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:594] Found 0 delete trigger commands.
2012-11-22 11:51:30,313 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:614] Directive 'overwrite-existing-data' not specified, defaulting to true
2012-11-22 11:51:30,314 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:624] Directive 'ignore-duplicates' not specified, defaulting to false
2012-11-22 11:51:30,315 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:638] Found 1 job definitions.
2012-11-22 11:51:30,327 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:674] Parsed job definition: JobDetail 'REPORT_GROUP.report-job':  jobClass: 'com.company.quartz.ReportJob concurrentExectionDisallowed: false persistJobDataAfterExecution: false isDurable: false requestsRecovers: false
2012-11-22 11:51:30,328 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:686] Found 1 trigger definitions.
2012-11-22 11:51:30,351 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:process:817] Parsed trigger definition: Trigger 'REPORT_TRIGGER_GROUP.every-day-trigger':  triggerClass: 'org.quartz.impl.triggers.CronTriggerImpl calendar: 'null' misfireInstruction: 0 nextFireTime: null
2012-11-22 11:51:30,351 INFO [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:executePreProcessCommands:962] Deleting all jobs in group: REPORT_GROUP
2012-11-22 11:51:30,352 INFO [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:executePreProcessCommands:983] Deleting all triggers in group: REPORT_TRIGGER_GROUP
2012-11-22 11:51:30,352 INFO [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1021] Adding 1 jobs, 1 triggers.
2012-11-22 11:51:30,352 INFO [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1046] Adding job: REPORT_GROUP.report-job
2012-11-22 11:51:30,352 DEBUG [SMSScheduler_Worker-1] [XMLSchedulingDataProcessor.java:scheduleJobs:1107] Scheduling job: REPORT_GROUP.report-job with trigger: REPORT_TRIGGER_GROUP.every-day-trigger
2012-11-22 11:51:30,353 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers 
```

之后我重新启动tomcat，错误就在这里！但是为什么重启后才出现呢？

```
2012-11-22 12:03:38,740 INFO [pool-2-thread-1] [QuartzScheduler.java:<init>:243] Quartz Scheduler v.2.1.6 created.
2012-11-22 12:03:38,741 INFO [pool-2-thread-1] [XMLSchedulingDataProcessorPlugin.java:initialize:202] Registering Quartz Job Initialization Plug-in.
2012-11-22 12:03:38,743 INFO [pool-2-thread-1] [RAMJobStore.java:initialize:154] RAMJobStore initialized.
2012-11-22 12:03:38,744 INFO [pool-2-thread-1] [QuartzScheduler.java:initialize:268] Scheduler meta-data: Quartz Scheduler (v2.1.6) 'SMSScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 1 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2012-11-22 12:03:38,744 INFO [pool-2-thread-1] [StdSchedulerFactory.java:instantiate:1306] Quartz scheduler 'SMSScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2012-11-22 12:03:38,744 INFO [pool-2-thread-1] [StdSchedulerFactory.java:instantiate:1310] Quartz scheduler version: 2.1.6
2012-11-22 12:03:38,753 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessorPlugin.java:start:254] Scheduled file scan job for data file: quartz-jobs.xml, at interval: 10000
2012-11-22 12:03:38,757 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:resolveSchemaSource:239] Utilizing schema packaged in local quartz distribution jar.
2012-11-22 12:03:38,761 INFO [pool-2-thread-1] [XMLSchedulingDataProcessor.java:processFile:498] Parsing XML file: quartz-jobs.xml with systemId: quartz-jobs.xml
2012-11-22 12:03:38,837 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:549] Found 1 delete job group commands.
2012-11-22 12:03:38,838 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:563] Found 1 delete trigger group commands.
2012-11-22 12:03:38,847 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:577] Found 0 delete job commands.
2012-11-22 12:03:38,848 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:594] Found 0 delete trigger commands.
2012-11-22 12:03:38,850 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:614] Directive 'overwrite-existing-data' not specified, defaulting to true
2012-11-22 12:03:38,851 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:624] Directive 'ignore-duplicates' not specified, defaulting to false
2012-11-22 12:03:38,861 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:638] Found 1 job definitions.
2012-11-22 12:03:38,880 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:674] Parsed job definition: JobDetail 'REPORT_GROUP.report-job':  jobClass: 'com.company.quartz.ReportJob concurrentExectionDisallowed: false persistJobDataAfterExecution: false isDurable: false requestsRecovers: false
2012-11-22 12:03:38,882 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:686] Found 1 trigger definitions.
2012-11-22 12:03:38,920 DEBUG [pool-2-thread-1] [XMLSchedulingDataProcessor.java:process:817] Parsed trigger definition: Trigger 'REPORT_TRIGGER_GROUP.every-day-trigger':  triggerClass: 'org.quartz.impl.triggers.CronTriggerImpl calendar: 'null' misfireInstruction: 0 nextFireTime: null
2012-11-22 12:03:38,938 ERROR [pool-2-thread-1] [XMLSchedulingDataProcessorPlugin.java:processFile:335] Error scheduling jobs: Encountered 1 validation exceptions.
org.quartz.xml.ValidationException: Encountered 1 validation exceptions.
    at org.quartz.xml.XMLSchedulingDataProcessor.maybeThrowValidationException(XMLSchedulingDataProcessor.java:1256) ~[quartz-2.1.6.jar:na]
    at org.quartz.xml.XMLSchedulingDataProcessor.processFile(XMLSchedulingDataProcessor.java:505) ~[quartz-2.1.6.jar:na]
    at org.quartz.xml.XMLSchedulingDataProcessor.processFileAndScheduleJobs(XMLSchedulingDataProcessor.java:886) ~[quartz-2.1.6.jar:na]
    at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.processFile(XMLSchedulingDataProcessorPlugin.java:330) [quartz-2.1.6.jar:na]
    at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.start(XMLSchedulingDataProcessorPlugin.java:257) [quartz-2.1.6.jar:na]
    at org.quartz.plugins.SchedulerPluginWithUserTransactionSupport.start(SchedulerPluginWithUserTransactionSupport.java:144) [quartz-2.1.6.jar:na]
    at org.quartz.core.QuartzScheduler.startPlugins(QuartzScheduler.java:2343) [quartz-2.1.6.jar:na]
    at org.quartz.core.QuartzScheduler.start(QuartzScheduler.java:527) [quartz-2.1.6.jar:na]
    at org.quartz.impl.StdScheduler.start(StdScheduler.java:143) [quartz-2.1.6.jar:na]
    at org.quartz.ee.servlet.QuartzInitializerListener.contextInitialized(QuartzInitializerListener.java:198) [quartz-2.1.6.jar:na]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273) [catalina.jar:7.0.27]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) [catalina.jar:7.0.27]
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1099) [catalina.jar:7.0.27]
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1621) [catalina.jar:7.0.27]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [na:1.6.0_32]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_32]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_32]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_32]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_32]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_32]
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.3: Element 'cron' cannot have character [children], because the type's content type is element-only.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:423) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidComplexType(XMLSchemaValidator.java:3151) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3111) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3013) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2156) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:824) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2939) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232) ~[na:1.6.0_32]
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284) ~[na:1.6.0_32]
    at org.quartz.xml.XMLSchedulingDataProcessor.process(XMLSchedulingDataProcessor.java:539) ~[quartz-2.1.6.jar:na]
    at org.quartz.xml.XMLSchedulingDataProcessor.processFile(XMLSchedulingDataProcessor.java:503) ~[quartz-2.1.6.jar:na]
    ... 22 common frames omitted
2012-11-22 12:03:38,947 INFO [pool-2-thread-1] [QuartzScheduler.java:start:534] Scheduler SMSScheduler_$_NON_CLUSTERED started.
2012-11-22 12:03:38,947 INFO [pool-2-thread-1] [QuartzInitializerListener.java:contextInitialized:199] Scheduler has been started...
2012-11-22 12:03:38,947 INFO [pool-2-thread-1] [QuartzInitializerListener.java:contextInitialized:217] Storing the Quartz Scheduler Factory in the servlet context at key: org.quartz.impl.StdSchedulerFactory.KEY
2012-11-22 12:03:38,950 DEBUG [SMSScheduler_QuartzSchedulerThread] [QuartzSchedulerThread.java:run:268] batch acquisition of 1 triggers
2012-11-22 12:03:39,002 DEBUG [SMSScheduler_QuartzSchedulerThread] [SimpleJobFactory.java:newJob:51] Producing instance of Job 'JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz-jobs_xml', class=org.quartz.jobs.FileScanJob 
```

编辑：报告给兵马俑[https://jira.terracotta.org/jira/browse/QTZ-334](https://jira.terracotta.org/jira/browse/QTZ-334)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:07:47.947

您应该尝试指定`quartz-jobs.xml`文件的绝对路径以避免tomcat 不会在webapp 上下文中重新加载文件的问题，即使它们被更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T17:07:24.103

我们为我们的业务需求构建了一个小型 java 项目，其中使用了上面提到的相同配置的 quartz.properties 和 quartz_jobs.xml，但没有 Tomcat（Java 应用程序项目）。

即使在小程序中，启动Java类（scheduler.start()）后，修改quartz-jobs.xml也没有触发基于表达式变化的cron。

为了解决这个问题，我在quartz.properties 中提供了绝对路径，然后调度器Factory 拾取了cron 表达式的变化。

# android - UserManager getUserCount() (Jelly Bean)

> ID：13508258
> 
> 赞同：3
> 
> 时间：2012-11-22T08:08:02.803
> 
> 标签：android, android-4.2-jelly-bean

I am working on this class : UserManager

```
public int getUserCount () 
```

Return the number of users currently created on the device.

My code is:

```
UserManager um = (UserManager) getSystemService(USER_SERVICE);
int count = um.getUserCount();
Log.i("count",""+count); 
```

It produce error like this:

```
 Caused by: java.lang.SecurityException: You need MANAGE_USERS permission to: query users
    at android.os.Parcel.readException(Parcel.java:1425)
    at android.os.Parcel.readException(Parcel.java:1379)
    at android.os.IUserManager$Stub$Proxy.getUsers(IUserManager.java:321)
    at android.os.UserManager.getUsers(UserManager.java:198)
    at android.os.UserManager.getUserCount(UserManager.java:186)
    at com.example.multiusertest.MainActivity.onCreate(MainActivity.java:52)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

I already added this permission manually in Manifest file. Does anyone know why it is produce.

Manifest File:

```
<uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.MANAGE_USERS"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.multiusertest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:11:36.133

的`MANAGE_USERS`保护级别为`signature|system`，这意味着必须使用平台密钥对应用程序进行签名。在 XDA 上查看[此线程](http://forum.xda-developers.com/showthread.php?t=1999383)

# c# - Is there a way to pass in callbacks when calling Async methods in WP8/Silverlight

> ID：13508261
> 
> 赞同：0
> 
> 时间：2012-11-22T08:08:11.590
> 
> 标签：c#, .net, silverlight, windows-8, windows-phone-8

I've been writing Windows Phone 8 code that calls a SOAP web service backend. From what I've read, the typical pattern is this:

```
var client = new KitchenPCSoapClient();

client.LogonCompleted += client_LogonCompleted;
client.LogonAsync(username, password); 
```

To me, this just seems counter intuitive. If I call `LogonAsync` multiple times with the same client, I don't necessarily want it to use the same `LogonCompleted` callback every time.

What I'd like is a pattern more like JavaScript, where you pass in a reference to the callback function. More like:

```
var client = new KitchenPCSoapClient();
client.LogonAsync(username, password, client_LogonCompleted); 
```

Is there a way to implement such a pattern, or should I just force myself to get used to setting the `LogonCompleted` property before I call `LogonAsync`, or set the `userState` property if I want to differentiate between different contexts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:11:16.817

您可以使用 Dispatcher 并为此调用 UI 端的函数...

我正在这样做

回调函数

```
private void AddPricesHandler(CompletedEventArgs response, Exception e)
{
  //your code gose here
} 
```

调用代理调用函数

```
Proxy.AddData(AddPricesHandler, request); 
```

代理类调用webservice

```
public void AddData(Action<CompletedEventArgs, Exception> callback, IPVWorkflowService.CreateEditDeletePriceSourceRequest request)
        {
            _workflowProxy.CreateEditDeletePriceSourceAsync(request, callback);
            _workflowProxy.CreateEditDeletePriceSourceCompleted+=new EventHandler<CreateEditDeletePriceSourceCompletedEventArgs>(_workflowProxy_CreateEditDeletePriceSourceCompleted); 
        } 
```

完成函数使用调度程序调用回调函数

```
 void _workflowProxy_CreateEditDeletePriceSourceCompleted(object sender, CreateEditDeletePriceSourceCompletedEventArgs e)
    {
        try
        {
            this.dispatcher.BeginInvoke((Action)(() =>
            {
                (e.UserState as Action<CompletedEventArgs, Exception>)(e, null);
            }));
        }
        catch (Exception ex)
        {
            this.dispatcher.BeginInvoke((Action)(() =>
            {
                (e.UserState as Action<CompletedEventArgs, Exception>)(e, ex);
            }));
        }
        finally
        {
            _workflowProxy.CreateEditDeletePriceSourceCompleted -= _workflowProxy_CreateEditDeletePriceSourceCompleted;
            _workflowProxy = null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:26:40.657

Async/Await 的美妙之处在于您不必编写回调，您只需编写看起来像同步的代码，但在后台它是异步执行的：

```
var client = new KitchenPCSoapClient();
await client.LogonAsync(username, password);

// you get here after the async logon is completed
// do stuff after logon 
```

但是如果你真的想使用回调，你可以在 Task 对象上使用 ContinueWith 方法，它是从异步方法返回的：

```
var client = new KitchenPCSoapClient();
Task task = client.LogonAsync(username, password);

// this method is called when async execution of task is finished
task.ContinueWith(client_LogonCompleted); 
```

# android - Android setError("error") 在 Textview 中不起作用

> ID：13508270
> 
> 赞同：32
> 
> 时间：2012-11-22T08:08:52.480
> 
> 标签：android, error-handling, popup, textview

我们可以在 Edittext 中成功设置错误，但在 textview 中设置失败。有什么问题吗？？我试过

```
((TextView) findViewById(R.id.df)).requestFocus();
((TextView) findViewById(R.id.df)).setSelected(true);
((TextView) findViewById(R.id.df)).setError("akjshbd"); 
```

但我没有弹出错误。

![文本视图错误](../Images/cb3d5478883834b5da1f64122e75670b.png)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-04-11T16:45:04.977

默认 TextView 不可聚焦。所以，你需要设置**android:focusable="true"**和**android:focusableInTouchMode="true"**。

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:text="@string/hello_world" /> 
```

并且无需设置 setSelected(true)。

```
((TextView) findViewById(R.id.df)).requestFocus();
((TextView) findViewById(R.id.df)).setError("akjshbd"); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-17T15:48:23.400

实际上，您可以为 textView 使用 setError 并显示它的弹出窗口。

您只需要使用与 EditText 相同的样式。

只需在 xml 中为 textView 添加下一个属性：

```
style="@android:style/Widget.EditText" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-07-21T12:33:22.393

这是您唯一需要在 TextView 上获得预期的 setError 行为

```
android:focusable="true"
android:clickable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-10T22:43:42.897

片段：你必须 requestFocus(); 显示错误的视图。

```
 // Check for a valid email address.
if (TextUtils.isEmpty(mEmail)) {
    mEmailView.setError(getString(R.string.error_field_required));
    focusView = mEmailView;
    cancel = true;
} else if (!mEmail.contains("@")) {
    mEmailView.setError(getString(R.string.error_invalid_email));
    focusView = mEmailView;
    cancel = true;
}

if (cancel) {
    // There was an error; don't attempt login and focus the first
    // form field with an error.
    focusView.requestFocus();
} else {
    // Show a progress spinner, and kick off a background task to
    // perform the user login attempt.
    // showProgress(true);
    // mAuthTask = new UserLoginTask();
    // mAuthTask.execute((Void) null);
    ParseUser.logInInBackground(mEmail, mPassword, new LogInCallback() {

    @Override
    public void done(ParseUser user, ParseException e) {
        finishAndStartCardActivity();
    }
    });
} 
```

# java - 使用超类 XMLRootElement 名称值的 JAXB 注释子类

> ID：13508271
> 
> 赞同：3
> 
> 时间：2012-11-22T08:08:56.610
> 
> 标签：java, jaxb

我正在使用 JAXB 2.1，我对看到的 XML 输出感到困惑。下面我有两个扩展同一个父类的子类。当使用 REST 在浏览器中编组和查看 XML 时，子类 1 (GeoLocationDecodedPayload) 始终具有*geoLocationDecodedPayload*的根元素，如预期的那样。由于某种原因，子类 2 (AltitudeDecodedPayload)**没有**作为其根元素的*heightDecodedPayload*，这在其 @XMLRootElement 注释中指定是意外的。XML 输出显示了 geoPayload 的超类 (GeoPayload) *@XMLRootElement*。任何想法为什么这两个班级的行为不同？

**子班1：**

```
package com.api.model.vo.decoder;

import java.io.Serializable;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;
import com.api.util.decoder.DecoderConstants;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "geoLocationDecodedPayload")
public class GeoLocationDecodedPayload extends GeoPayload implements Serializable {

   public GeoLocationDecodedPayload() {}

} 
```

**幼儿班2：**

```
package com.api.model.vo.decoder;

import java.io.Serializable;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;
import com.api.util.decoder.DecoderConstants;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "altitudeDecodedPayload")
public class AltitudeDecodedPayload extends GeoPayload implements Serializable {

    public AltitudeDecodedPayload() {}

} 
```

**父类：**

```
package com.api.model.vo.decoder;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "geoPayload")
public class GeoPayload {

    public GeoPayload() {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:02:05.270

我忘了在下面包含 AltitudeDecodedPayload.class。这解决了我的问题。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="payloadResponse")
public class PayloadResponse extends AbstractResponse{
    @XmlElementWrapper(name="decodedPayloads")
    @XmlElementRefs({
        @XmlElementRef(type=GeoPayload.class),
        @XmlElementRef(type=GeoLocationDecodedPayload .class),
        @XmlElementRef(type=AltitudeDecodedPayload .class) 
```

# sql - 通过某种排序从表中删除前 N 行（按“列”排序）

> ID：13508280
> 
> 赞同：41
> 
> 时间：2012-11-22T08:09:20.563
> 
> 标签：sql, sql-server, tsql

我对按某些列删除前 N 行顺序有些困惑。

我在这里创建了一个示例[Example at fiddle](http://sqlfiddle.com/#!3/b1ecc/2)

这些查询有什么问题？

```
 Delete Top(3) from Table1 order by id desc

 Delete Top(3) from Table1 
 where id IN (select id from Table1 order by id desc) 
```

由于在 mysql 中，limit 关键字可以很好地完成这项工作

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-22T08:11:22.240

您可以使用 CTE 进行[更快的有序删除](http://web.archive.org/web/20100212155407/http://blogs.msdn.com/sqlcat/archive/2009/05/21/fast-ordered-delete.aspx)，而无需单独的子查询来检索前 3 个 id。

```
WITH T
     AS (SELECT TOP 3 *
         FROM   Table1
         ORDER  BY id DESC)
DELETE FROM T 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-22T08:10:31.957

将`top 3`子句添加到子选择中：

```
Delete from Table1 
where id IN (
    select top 3 id 
    from Table1 
    order by id desc
) 
```

# extjs - 我怎么知道用户更改了目录字符串和排序字符串？

> ID：13508284
> 
> 赞同：0
> 
> 时间：2012-11-22T08:09:37.967
> 
> 标签：extjs

这是我的代码

```
 var store = {
        user_store: new Ext.data.Store({       
            autoLoad: false,
            proxy: new Ext.data.HttpProxy({
                url: a/b/c
            }),
            remoteSort: true, 
            baseParams: {
                dir: 'ASC',
                sort: defaultSort,
                start:0, 
                limit:pagesize
            },
            reader: new Ext.data.JsonReader({

                totalProperty: 'total',
                root: 'root', 
                fields:['fullname', 'first']
            })
        }),
    }; 
```

我可以使用“store.user_store.getSortState().direction”和“store.user_store.getSortState().field”来获取目录字符串和排序字符串。但我不知道。用户何时更改目录字符串和排序字符串。

我试图解决我的问题。这是我的代码

```
 var dir =defaultDir;
                             if((store.user_store.getSortState().direction))
                             {
                                dir =store.user_store.getSortState().direction;
                             }

                             var sort =defaultSort
                             if((store.user_store.getSortState().field))
                             {
                                sort =store.user_store.getSortState().field;
                             } 
```

但是窗口说： TypeError:store.user_store.getSortState() 是未定义的。我能怎么做？

（PS：对不起，我的英文不太好，我的extjs是v3.4）

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-cfg-sortInfo](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-cfg-sortInfo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:38:48.140

你可以直接这样使用而不用再次定义变量吗？

```
var user_store= new Ext.data.Store({       
        autoLoad: false,
        proxy: new Ext.data.HttpProxy({
            url: a/b/c
        }),
        remoteSort: true, 
        baseParams: {
            dir: 'ASC',
            sort: defaultSort,
            start:0, 
            limit:pagesize
        },
        reader: new Ext.data.JsonReader({

            totalProperty: 'total',
            root: 'root', 
            fields:['fullname', 'first']
        }),
        })

    }),
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:42:35.013

```
 var dir =CDS.defaultDir;
                             var sort =CDS.defaultSort
                             var state =store.user_store.getSortState();
                             if(state)
                             {
                                dir =state.direction;
                                sort =state.field;
                             } 
```

# ffmpeg - ffmpeg：Image2 => 打开编码器时出错

> ID：13508286
> 
> 赞同：2
> 
> 时间：2012-11-22T08:09:49.147
> 
> 标签：ffmpeg

我收到以下错误 ffmpeg。

为输出流 #0:0 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height

```
ffmpeg -f image2 -i %05d.jpg -vcodec libx264 foo.mp4 
```

我很确定我以前使用过这个确切的命令，而且很好。这是我的终端输出。任何帮助，将不胜感激。

```
$ ffmpeg -f image2 -i %05d.jpg -vcodec libx264 foo.mp4
ffmpeg version 1.0 Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov 22 2012 17:59:05 with Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
  configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libopus --enable-libtheora --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libvpx --enable-libspeex --enable-libfreetype --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid
  libavutil      51\. 73.101 / 51\. 73.101

  libavcodec     54\. 59.100 / 54\. 59.100

  libavformat    54\. 29.104 / 54\. 29.104

  libavdevice    54\.  2.101 / 54\.  2.101

  libavfilter     3\. 17.100 /  3\. 17.100

  libswscale      2\.  1.101 /  2\.  1.101

  libswresample   0\. 15.100 /  0\. 15.100

  libpostproc    52\.  0.100 / 52\.  0.100

Input #0, image2, from '%05d.jpg':
  Duration: 00:00:04.44, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: mjpeg, yuvj420p, 1201x900 [SAR 1:1 DAR 1201:900], 25 fps, 25 tbr, 25 tbn, 25 tbc
[libx264 @ 0x7fab0881aa00] width not divisible by 2 (1201x900)
Output #0, mp4, to 'foo.mp4':
    Stream #0:0: Video: h264, yuvj420p, 1201x900 [SAR 1:1 DAR 1201:900], q=-1--1, 90k tbn, 25 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (mjpeg -> libx264)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:13:07.240

您必须裁剪输入图像，以便生成的宽度和高度除以 2

裁剪过滤器： `-vf "crop=in_w-1:in_h"`

`$ ffmpeg -f image2 -i %05d.jpg -vf "crop=in_w-1:in_h" -vcodec libx264 foo.mp4`

**UPD**

我们可以写出一般情况的公式，这会导致偶数边

`$ ffmpeg -f image2 -i %05d.jpg -vf "crop=((in_w/2)*2):((in_h/2)*2)" -vcodec libx264 foo.mp4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T00:08:24.500

对我有用的解决方案是使用

```
-vf scale=1920:1080 
```

作为输出视频之前的一个选项，即

```
ffmpeg -y -loop 1 -i "input.png" -c:v libx264 -t 5 -pix_fmt yuv420p -vf scale=1920:1080 out.mp4 
```

它会自动正确调整图像大小，尽管我从未测试过分辨率大于 1920:1080 (TBD) 时会发生什么。

# javascript - xhr.status 和 xhr.readyState 为 0

> ID：13508290
> 
> 赞同：0
> 
> 时间：2012-11-22T08:10:28.210
> 
> 标签：javascript, file-upload, jquery-html5uploader

我正在使用 HTML5 多文件上传器。出于某种目的，我将请求排队到 JavaScript 数组中，我在这里尝试两种方法，一种是使用 for 循环通过循环发送所有请求，下一种方法就像在前一个请求之后开始下一个请求请求完成。这是代码，

```
 function processUploads(i)
{
    if(typeof(i)=="undefined")
        return;

    if(i==0)
    {
        for(i=0;i<4;i++)
        {
            xhrQ[i].open("POST",FUurl,true);
            xhrQ[i].send(fdQ[i]);
            xhrQ[i].onreadystatechange = function() {
                if (xhrQ[i].readyState == 4 && xhrQ[i].status == 200) {                
                    uploadComplete(xhrQ[i],i);
                }
            }
        }
    }
    else
    {
        xhrQ[i].open("POST",FUurl,true);
        xhrQ[i].send(fdQ[i]);
        xhrQ[i].onreadystatechange = function() {
            if (xhrQ[i].readyState == 4 && xhrQ[i].status == 200) {                
                uploadComplete(xhrQ[i],i);
            }
        }
    }
}

function uploadComplete(xhr,i)
{
    //processUploads(i+1);
    var responseJSON = eval('(' + xhr.responseText + ')');
    var upldrID = responseJSON.data.queueId;

    var fileProgElem = $("#file_content").find("div[file-count="+upldrID+"]");
    fileProgElem.attr("upload","finished");
    fileProgElem.find("input[id=asset_id]").val(responseJSON.data.asset_id);

    if(typeof(responseJSON)=="undefined") {
        return;
    }

    $("#bar"+upldrID).css("width: 100%");
    $("#progress_text"+upldrID).addClass("hide");
    $("#progress_bar"+upldrID).html("Upload Complete!");

    var pagename = $("#pagename").attr('value');

    var cover_art = "<img src='"+responseJSON.data.thumb_location+"' alt='"+$.trim($("#file_name"+upldrID).html())+"' />";
    $("#cover_art"+upldrID).html(cover_art);

    //Hide the cross icon and enable the save 
    var action_divs = '<div id="done'+upldrID+'" class="hide enable">'
            +'<a id="delete_file_'+upldrID+'" onclick="saveWorkspaceFileDetails(\''+responseJSON.data.project_id+'\',\''+responseJSON.data.asset_id+'\',\''+upldrID+'\',\''+responseJSON.data.file_name+'\',\''+responseJSON.data.size+'\',\'delete\',\''+pagename+'\')">'
            +'<i class="tl-icon-20-close-gray"></i>'
            +'</a>'
            +'</div>';

    $("#cancel_upload"+upldrID).append(action_divs);

    $("#progress_cancel"+upldrID).addClass("hide").removeClass("show");
    $("#done"+upldrID).addClass("show").removeClass("hide");        

    //To show the post and cancel button
    $("#submitFileUpload").removeClass("hide").addClass("show");

    //Updating the title with the default value of file_name
    var file_title =  $.trim($("#file[file-count='"+upldrID+"']").find("#file_title").val());
    if (file_title == "" && file_title != undefined){
        $("#file[file-count='"+upldrID+"']").find("#file_title").val(responseJSON.data.file_name);
    }

    //For other category we need to enable the dropdown     
    if(responseJSON.data.category_id=='999')
    {
        $("#select_category"+upldrID).removeClass("hide").addClass("show");
    }

            //totSelFiles is a number of selected files that i sets as a global variable
    if(i<(totSelFiles-1))
    {
        processUploads(i+1);
    }
    else
        return;
} 
```

但问题是我在`if`循环中得到了 readyState 和 status 为 0 。但是文件正在上传到服务器，如果我只启用该块，其他条件也可以正常工作。那么可能是什么问题。我很困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:43:20.447

问题与您使用用于 onreadystatechange 的匿名函数创建的闭包有关。它将可以访问 的值`i`，但不是从创建闭包时开始，而是从执行时开始。在那个时间点`i`总是 4 并且`xhrQ[i]`不会引用正确的对象。`this`改为使用

```
xhrQ[i].onreadystatechange = function() {
   if(this.readyState == 4 && this.status == 200) {

   }
} 
```

问题是您想继续使用`i`uploadComplete() 函数中的索引。为此，您可能需要使用立即执行的函数创建另一个内部闭包，该函数将创建当前索引的本地副本。

```
xhrQ[i].onreadystatechange = (function(_innerI) {
   var that = this;
   return function() {
      if(that.readyState == 4 && that.status == 200) {
         uploadComplete(that, _innerI);
      }
   }
})(i); 
```

# sql-server - ColdFusion & MSSQL：如何在一次提交中插入具有一个唯一 ID 的多行

> ID：13508291
> 
> 赞同：4
> 
> 时间：2012-11-22T08:10:26.913
> 
> 标签：sql-server, coldfusion

谁能帮助我如何在一次提交中提交多行？

此调查表将显示一组源自桌面技能的技能。老师必须在复选框中检查学生的技能并单击提交。

一个学生可以拥有不止一项技能。如果他有3个技能，那么一旦老师点击提交按钮，发送到数据库的数据将是3行。（表学生技能）

```
<cfoutput query="skill">
<tr>
    <td>#skill.skillname#</td>
    <td align="center">:</td>
    <td><input type="checkbox" name="skillid" value="skillid" checked="checked"></td>
</tr>
</cfoutput> 
```

**餐桌技巧**

```
+---------+------------+
| skillid | skillname  |

+---------+------------+

| 1       | draw       |

+---------+------------+

| 2       | read       |

+---------+------------+

| 3       | dance      |

+---------+------------+ 
```

**表学生技能**

```
+----------+----------|

|studentid | skillid  |

+----------+----------+
| 001      | 1        |
| 001      | 2        |
| 002      | 1        |
| 002      | 2        |
| 002      | 3        |
+----------+----------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:39:16.873

假设您使用的是 SQL Server 2008，您应该能够使用以下语法：

```
INSERT INTO StudentSkill (StudentID, SkillID)
VALUES (100, 1), (100, 2), (100, 3) 
```

[此方法从此处](http://blog.sqlauthority.com/2012/08/29/sql-server-three-methods-to-insert-multiple-rows-into-single-table-sql-in-sixty-seconds-024-video/)收集，其中还包含一些替代方法。

您只需要遍历 FORM.skillid 中的 ID 列表（假设这就是您的表单的工作方式）来构建上面的 SQL。此外，请确保`<CFQueryParam>`在构建 SQL 时使用这些值。像下面的代码应该做的事情：

```
<cfif ListLen(FORM.skillid)>
  <cfquery>
   INSERT INTO StudentSkill (StudentID, SkillID)
    VALUES
   <cfloop list="#form.skillid#" index="skill">
     (<cfqueryparam value="#form.studentID#" CFSQLType="CF_SQL_INTEGER">, 
       <cfqueryparam value="#skill#" CFSQLType="CF_SQL_INTEGER">)
   </cfloop>
  </cfquery>
</cfif> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:59:58.720

另一种插入多条记录的简单方法是`INSERT .. SELECT`. （在发布的链接banyr中也提到了）。因为技能 ID 存储在另一个表中，所以您可以对它们使用`IN`子句`SELECT`。`studenSkill`然后通过简单的查询 将这些值直接插入到您的另一个表中，无需循环。

```
INSERT INTO studenSkill ( studenId, skillId )
SELECT <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
       , skillId
FROM   skill
WHERE  skillId IN 
       (
       <cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">
       ) 
```

> ```
>  <input type="checkbox" name="skillid" value="skillid" checked="checked"> 
> ```

顺便说一句，如果这不是拼写错误，请不要忘记查询列名称周围的 # 符号，即“skillid”

```
 <input type="checkbox" name="skillid" value="#skillid#" checked="checked"> 
```

# python - Python - 有人可以向我大致解释一下这段代码吗？

> ID：13508292
> 
> 赞同：0
> 
> 时间：2012-11-22T08:10:29.330
> 
> 标签：python, ascii

我在 StackExchange 上看到了这段 ASCII 空间入侵者的代码，并想尝试理解它背后的概念。如果有人有几分钟的时间向仅在几周前开始的人指出关键概念，将不胜感激！

```
 exec'''import threading as t
    import msvcrt,Queue,time,random,os
    u=raw_input('name:')
    r=range
    @Z:
    $~(S):S.w=78;S.h=30;S.X();S.l='';S.Q=[];S.q=[];S.m=''
    $J(S,x,y,c):S.q.append([x,y,c])
    $X(S):S.s=[[' '^y in r(78)]^x in r(30)]
    $V(S):
    ?s='';S.X()
    ?^x,y,z in S.q:S.s[y][x]=z
    ?S.q=[]
    ?^x in S.s:
    ? ^y in x:s+=y
    ? s+='\\n'
    ?s+=S.m.center(S.w)
    ?if s!=S.l:os.system('cls');S.l=s;print s
    @E(Exception):pass
    @C:
    $~(S,g,c,p):S.g=g;S.c=c;S.p=p;S.s=[]
    $M(S,a,d):
    ?if (a<0 and S.p[d]==0) or (a>0 and S.p[d]==(S.g.z.h if d else S.g.z.w)-1):raise        
    E()
    ?S.p[d]+=a
    $X(S):S.s.remove(S)
    @A(C):
    $~(S,g):C.~(S,g,'A',[39,28])
    $M(S,a,d=0):
    ?try:C.M(S,a,d)
    ?except E:pass
    @Y(A):
    $~(S,g,p):C.~(S,g,'Y',p);S.s=g.a
    @B(C):
    $~(S,g,p,n):C.~(S,g,'|'if n<0 else'*',[p[0],p[1]+n]);S.s=g.b;S.d=n;S.a=0 if n<0         
    else 1
    $M(S):
    ?try:C.M(S,S.d,1)
    ?except E:S.X()
    $b(S):S.g.z.J(S.p[0],S.p[1],'X');S.g.z.V();S.X()
    $co(S):
    ?^w in S.g.w:
    ? if S.p==w.p:S.b();w.X()
    ?if S.a:
    ? if S.p==S.g.p.p:S.b();S.g.d()
    ?else:
    ? ^a in S.g.a:
    ??if S.p==a.p:S.b();S.g.P(50);a.X()
    @W(C):
    $~(S,g,p):C.~(S,g,'#',p);S.s=g.w
    @I(t.Thread):
    $~(S,g):t.Thread.~(S);S.f=1;S.c={'a':g._g4,'d':g._g3,'x':g._X,' ':g._fi};S.start()
    $run(S):
    ?while S.f:
    ? c=msvcrt.getch()
    ? if c in S.c:S.c[c]()
    $X(S):S.f=0
    @G:
    $~(S):S.z=Z();S.x=3.0;S.c=0;S.b=[];S.Q=Queue.Queue();S.I=I(S);S.g2=0;S.g1=0;S.do=0;S.f=1;S.v=0;S.l=3;S.ti=[];S.G(1);S.O()
    $O(S):
    ?while S.f:
    ? time.sleep(0.02)
    ? if not S.a:S.G(1)
    ? S.ch();S.B();S.u()
    $u(S):
    ?S.z.X();S.P(0)
    ?s=u+' '+`S.l`
    ?^i in r(len(s)):S.z.J(i,0,s[i])
    ?^i in S.a+S.b+[S.p]+S.w:S.z.J(i.p[0],i.p[1],i.c)
    ?S.z.V()
    $ch(S):
    ?try:
    ? while not S.Q.empty():S.Q.get_nowait()();S.Q.task_done()
    ?except Queue.Empty:pass
    $cl(S):
    ?try:
    ? while not S.Q.empty():S.Q.get_nowait();S.Q.task_done()
    ?except Queue.Empty:pass
    $_g4(S):
    ?if not S.g2:S.g2=1;S.Q.put(S.g4)
    $g4(S):S.p.M(-1);S.g2=0
    $_g3(S):
    ?if not S.g1:S.g1=1;S.Q.put(S.g3)
    $g3(S):S.p.M(1);S.g1=0
    $_X(S):S.I.X();S.Q.put(S.X)
    $X(S):S.f=0;S.I.X();S.st()
    $_fi(S):
    ?if not S.do:S.do=1;S.Q.put(S.fi)
    $fi(S):S.b.append(B(S,S.p.p[:],-1));S.do=0;S.P(-1)
    $_af(S):S.Q.put(S.af)
    $af(S):c=random.choice(S.a);S.b.append(B(S,c.p[:],1));S.nt(random.uniform(0.1,2),S._af)
    $nt(S,n,f):x=t.Timer(n,f);S.ti.append(x);x.start()
    $st(S):
    ?^i in S.ti:i.cancel()
    $G(S,n=0):
    ?S.st();S.cl();S.p=A(S);S.a=[];S.w=[];S.b=[]
    ?^x in[[i,o]^i in r(30)^o in r(3,10)]:
    ? if random.randint(0,99)%4==0:S.a.append(Y(S,x))
    ?S._m();S._af();f=[]
    ?^x in [6,27,46,65]:f+=[[z,y]^z in r(x,x+6)^y in r(23,26)]
    ?^i in f:S.w.append(W(S,i))
    ?S.v+=n;S.z.m='Level %s'%S.v;S.u()
    ?if S.x>0.2:S.x=1.6 - S.v*0.1
    ?S.m1=0;S.m2=0;S.k=1;time.sleep(3)
    $_m(S):S.Q.put(S.m)
    $m(S):
    ?x=0
    ?if S.m2:S.m2=0;S.m1=0;S.k=-S.k;x=1
    ?^i in S.a:i.M(*(abs(S.k),1)if x else(S.k,0))
    ?if S.m1==47:S.m2=1
    ?else:S.m1+=1
    ?S.nt(S.x,S._m)
    $B(S):
    ?^i in S.b:i.M();i.co()
    $d(S):
    ?S.l-=1
    ?if S.l==0:S.z.m='Game Over!';S.X();return
    ?S.G(0)
    $P(S,n):
    ?S.c+=n if S.c+n>0 else 0;x=`S.c`
    ?^n in r(len(x)):S.z.J(n,1,x[n])
    G()'''.replace('@','class ').replace('?','  ').replace('$',' def ').replace('^','for ').replace('~','__init__') 
```

我并不是说我要编写这样的代码，而只是想了解到底发生了什么！:)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T08:16:51.850

这段代码是故意混淆的。为了更清楚，请尝试执行最后一行（`@ -> class`等）中提到的替换。

然后你会得到类似的东西：

```
import threading as t
import msvcrt,Queue,time,random,os
u=raw_input('name:')
r=range
class Z:
     def __init__(S):S.w=78;S.h=30;S.X();S.l='';S.Q=[];S.q=[];S.m=''
     def J(S,x,y,c):S.q.append([x,y,c])
     def X(S):S.s=[[' 'for y in r(78)]for x in r(30)]
     def V(S):
        ... 
```

这仍然非常紧凑，但更具可读性。但是，我建议您在解开这样的谜语之前确保您熟悉该语言的所有常见结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:27:02.580

这是某种缩小，将尽可能多的代码压缩到尽可能小的空间中，而不依赖于真正的压缩算法。

基本上它是某种文本控制台空间入侵者迷你游戏，它使用线程、队列 ascii-art 和 msvcrt 来播放键盘输入。

# android - Web 服务返回许多值

> ID：13508297
> 
> 赞同：-1
> 
> 时间：2012-11-22T08:10:40.580
> 
> 标签：android, web-services

我正在表格视图中的 android 分页中进行研发。

我想要一个可以返回许多值的 Web 服务，以便我可以在 tableview 中填充并在其中实现分页。有人可以告诉这样的网络服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:29:55.597

您可以使用[twitter api](https://dev.twitter.com/docs/api/1.1)。它将向您发送许多可用于创建分页过程的结果。查看[GET 提及](https://dev.twitter.com/docs/api/1.1/get/statuses/mentions_timeline)时间线及其示例。

编辑：[GET SEARCH](https://dev.twitter.com/docs/api/1/get/search)与您想要做的事情更相关。例如，您可以使用这样的请求：

```
http://search.twitter.com/search.json?q=<A QUERY THAT SHOULD RETURN MANY TWEETS>&rpp=<THE NUMBER OF TWEETS YOU WANT PER PAGE>&page=<THE PAGE YOU WANT TO GET ACCORDING TO RPP>&result_type=mixed 
```

例如 ：

```
http://search.twitter.com/search.json?q=bordeaux&rpp=20&page=1&result_type=mixed 
```

它将返回一个 json 对象，您可以对其进行解析以在 TableView 中显示结果。然后你必须设置 page= 变量来进行分页。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-22T08:20:40.857

为此，您必须使用 Web 服务。这里有一些快速链接可能会对您有所帮助。

[http://www.itcsolutions.eu/2011/03/03/how-to-consume-web-services-from-android-applications-using-ksoap2/](http://www.itcsolutions.eu/2011/03/03/how-to-consume-web-services-from-android-applications-using-ksoap2/)

[http://romenlaw.blogspot.com/2008/08/sumption-web-services-from-android.html](http://romenlaw.blogspot.com/2008/08/consuming-web-services-from-android.html)

[http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)

[http://seesharpgears.blogspot.com/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.com/2010/11/basic-ksoap-android-tutorial.html)

[http://www.javacodegeeks.com/2011/02/android-xml-binding-simple-tutorial.html](http://www.javacodegeeks.com/2011/02/android-xml-binding-simple-tutorial.html)

[http://mobileorchard.com/android-app-development-parsing-web-service-response-part-1/](http://mobileorchard.com/android-app-development-parsing-web-service-response-part-1/)

# facebook-graph-api - FQL不会给所有的朋友喜欢

> ID：13508305
> 
> 赞同：0
> 
> 时间：2012-11-22T08:11:02.900
> 
> 标签：facebook-graph-api, facebook-fql

我正在尝试使用 FQL 检索我所有朋友的喜欢。但我并没有得到所有的赞，只有那些“is_community_page”值为真的页面被返回。这是我的 FQL 查询

```
SELECT uid, page_id FROM page_fan WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:46:39.937

在根据用户的隐私偏好对结果进行修剪之前，Facebook 对每个 FQL 查询的最大限制为 5000 个结果。您可以阅读此[博客文章](https://developers.facebook.com/blog/post/478/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T15:31:07.473

Facebook FQL 检索链接以获得完整的喜欢列表和示例列表（非常没用），重点不是结果的限制，重点是 fql 有不同的方法来列出这些数据。

我也踏入其中，试图找到解决方案

# c# - 我可以检测到垃圾收集在 .NET 中运行的那一刻吗？

> ID：13508306
> 
> 赞同：8
> 
> 时间：2012-11-22T08:11:03.847
> 
> 标签：c#, .net, garbage-collection

> **可能重复：**
> [在 C# 中监控垃圾收集器](https://stackoverflow.com/questions/9669963/monitoring-garbage-collector-in-c-sharp)

我想知道垃圾收集在我的 C# 应用程序中运行的频率，以便我可以记录时间戳以供以后分析。

在垃圾收集之前或之后是否可能会触发一些事件或类似的东西，以便我知道垃圾收集的确切时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:20:00.060

查看性能监视器（perfmon）和[内存性能计数器](https://msdn.microsoft.com/en-us/library/x2tyfybc(v=vs.71).aspx)

# asp.net - 剃须刀应用程序中出现错误“索引超出范围”

> ID：13508308
> 
> 赞同：2
> 
> 时间：2012-11-22T08:11:08.543
> 
> 标签：asp.net, asp.net-mvc, razor

使用带有剃须刀页面的上传文件时出现此错误：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

错误发生在这里

```
var uploadedFile = Request.Files[0]; 
```

**控制器：**

```
[HttpPost]
public ActionResult Create(Category category)
{
    if (ModelState.IsValid)
    {
        var fileSavePath = "";
        var fileName = "";
        var uploadedFile = Request.Files[0];
        fileName = Path.GetFileName(uploadedFile.FileName);
        fileSavePath = Server.MapPath("../../Uploads/" + fileName);

        uploadedFile.SaveAs(fileSavePath);

        db.Categories.Add(category);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(category);
} 
```

**看法：**

```
@using (Html.BeginForm("Create", "Category", FormMethod.Post, 
                  new { enctype = "multipart/form-data" })) 
{
   <div class="editor-label">
        @Html.LabelFor(model => model.Path)
   </div>
   <div class="editor-field create-Bt3">
       @FileUpload.GetHtml(
          initialNumberOfFiles: 1,
          allowMoreFilesToBeAdded: false,
          includeFormTag: false,
          uploadText: "Upload")
   </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:37:44.130

该错误意味着该`Request.Files`集合不包含任何项目。

您可以使用`Count`属性检查上传的文件数：

```
if (Request.Files.Count > 0) {
    var uploadedFile = Request.Files[0];
} 
```

与提琴手检查浏览器正在发送什么 - 可能是它的问题`FileHelper`

# wpf - Caliburn 中 View 和 ViewModel 之间的交互

> ID：13508316
> 
> 赞同：1
> 
> 时间：2012-11-22T08:11:31.233
> 
> 标签：wpf, mvvm, caliburn.micro, caliburn

我是 Caliburn 的新来者。

我有几个关于 MVVM 和 Caliburn 的问题。

1.  视图如何在 ViewModel 上显式调用方法？Caliburn 首先调用 ViewModel 构造函数。那么如果是，那么实例将被包含在哪里？我的 View 中的代码此刻创建了一个新实例（我需要显式调用 ViewModel 上的方法）。但是关于 ViewModel 应该已经实例化，这是愚蠢的。

2.  如何在 UI 线程上强制绑定更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T16:55:28.077

Caliburn.Micro 具有从视图调用视图模型上的动词的[动作概念。](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions)您可以在很大程度上为此使用约定，例如，如果您`Button`的视图中有 a 和`x:Name="Save"`，那么当单击`Save`时，将调用视图模型上的方法。`Button`

您始终可以使用显式绑定来覆盖约定，以及提供您自己的约定，并且 Caliburn.Micro 还提供附加属性以将视图模型方法与视图中的事件相关联。

在强制更新 UI 方面，您的视图模型将实现`INotifyPropertyChanged`，并且 Caliburn.Micro 提供了它的基本实现，包括`PropertyChangedBase`, 和`Screen`（增加了生命周期）。

然后，您可以使用 Caliburn.Micro 提供的辅助方法来调用`PropertyChanged`事件。这称为`NotifyOfPropertyChange`，它可以使用表达式 lambda 来指定要通知的属性，而不是使用魔术字符串。

# google-apps-script - 意外错误 Google Apps 脚本提取

> ID：13508326
> 
> 赞同：2
> 
> 时间：2012-11-22T08:12:00.553
> 
> 标签：google-apps-script, fetch

我从以下函数中得到“意外错误”：

```
function getBomgarFeedbackXML(){
  var url = "https://help.tradingtechnologies.com/api/reporting.ns?" + 
            "username=xxxxxx&password=xxxxxx&generate_report=SupportCustExitSurvey&" + 
            "start_date=2000-01-01&duration=0&report_type=rep&id=all";
  var response = UrlFetchApp.fetch(url).getContentText();
  Logger.log(response);
  return(Xml.parse(response, true));
} 
```

导致错误的行是：

```
var response = UrlFetchApp.fetch(url).getContentText(); 
```

1.  我可以使用其他脚本语言（例如 python）以编程方式获取 URL
2.  我已经尝试在我的浏览器中获取我能够成功完成的 URL
3.  我可以从 Google Apps 脚本中成功获取“ [http://www.google.com ”](http://www.google.com)
4.  导航到 chrome 中的 URL 时收到以下警告，这可能与问题有关吗？

![警告信息](../Images/cb6b1546de943efed7f0fdd58a72d908.png)

感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:34:35.323

不受信任的证书的最后一点是这里的重要线索。似乎与“help.tradingtechnologies.com”相关联的 SSL 证书无效或由受信任的 CA 根据 Google 数据中心（来自 UrlFetch 调用的来源）签署。

要解决此问题，请尝试使用这行代码而不是 UrlFetch 调用。[请注意此处](https://developers.google.com/apps-script/class_urlfetchapp#fetch)`validateHttpsCertificates`记录的附加选项。

```
var response = UrlFetchApp.fetch(url, {'validateHttpsCertificates':false}).getContentText(); 
```

# javascript - Javascript 进程已经在运行，然后等待

> ID：13508329
> 
> 赞同：0
> 
> 时间：2012-11-22T08:12:05.310
> 
> 标签：javascript, process

我无法使功能正常工作。它应该检查 Iexplore.exe 是否正在运行，如果它正在运行则等待。如果没有，则运行脚本。

我不确定如何添加等待功能。

```
function main() {
var ieinfostate = false;
var iewait = setInterval(function () {
if (ProcessesRunning("iexplore.exe") != 1) {
    clearInterval(iewait);
    dosomethingelse();
} else if (ieinfostate == false) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:14:44.690

浏览器中的 Javascript 没有等待功能，也没有办法制作。

在您的特定情况下，您可以使用`setInterval()`调用每隔 500 毫秒左右定期检查一些状态，然后当您找到所需的状态时，停止间隔计时器并执行一些操作。

```
var timer = setInterval(function() {
    if (ProcessesRunning ("iexplore.exe") == 1) {
        server.logMessage( "Please close Internet explore first" );
    } else {
        clearInterval(timer);
        var shell = new ActiveXObject( "WScript.Shell" );
        server.logMessage( "Unpacking file" );
        // ...
    }
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:18:36.223

由于您使用的是 jscript，因此有一个 sleep() 方法。想..这是你可以使用的最糟糕的，因为 javascript 被设计为异步的。

你可以这样做：

```
var ieinfostate = false;

var iewait = setInterval(function () {
    if (ProcessesRunning("iexplore.exe") != 1) {
        clearInterval(iewait);
        dosomethingelse();
    } else if (ieinfostate == false) {
        ieinfostate = true;
        server.logMessage("Please close Internet Explorer first. This installer will wait till its closed.");
    }
}, 500);

var dosomethingelse = function () {
    var shell = new ActiveXObject("WScript.Shell");
    server.logMessage("Unpacking file");
    /* your unpack stuff here */
}; 
```

可悲的是，计时器是等待 Windows 中进程关闭的唯一方法。

微软在 jscript 中难以实现有用的 api，如进程状态更改事件等。

如果你想让它干净，你应该考虑使用 c、c++ 或 c#

# c# - 如何使用C#设置指定网卡的linkspeed和duplex mode

> ID：13508330
> 
> 赞同：3
> 
> 时间：2012-11-22T08:12:05.420
> 
> 标签：c#, windows, networking

![在此处输入图像描述](../Images/773526ae8f3100b9a58748c1bde58cad.png)

就像屏幕截图一样，我想使用 C# 设置网络适配器的链接速度和双工模式。例如，将设置从自动协商更改为 10 Mbps 半双工。

你能指出我如何开始吗？

谢谢

苏特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:35:33.460

Windows 网络配置 dll 的记录很差（在最好的情况下）。在网络中配置值的最简单方法是使用**netsh**

[在 .NET 中以编程方式配置网络适配器的最佳方式](https://stackoverflow.com/questions/689230/best-way-to-programmatically-configure-network-adapters-in-net)

netsh 调用了奇怪的未记录的 windows dll。如果你需要直接调用dll而不是执行命令，你可以开始调试netsh。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:55:20.317

您可以使用 C# 更改注册表项中 DuplexSpeed 的注册表值

```
HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002bE10318}\0001 
```

我从这里找到的，[https:](https://superuser.com/questions/258746/change-nic-speed-duplex-settings-in-script) //superuser.com/questions/258746/change-nic-speed-duplex-settings-in-script 。最后的数字会有所不同，但您可以查看`DriverDesc`键的值查看网络设备的名称。

有关使用 C# 编辑注册表值的信息，请参阅[http://tech.pro/tutorial/652/csharp-snippet-tutorial-editing-the-windows-registry](http://tech.pro/tutorial/652/csharp-snippet-tutorial-editing-the-windows-registry)。

# go - 如何使用 gccgo 导入非标准库包

> ID：13508332
> 
> 赞同：4
> 
> 时间：2012-11-22T08:12:10.460
> 
> 标签：go, gccgo

首先，所有这些代码都可以使用go工具成功构建（例如go build，go install）

比如说我有一个 a.go，它试图从 github 导入一个非标准库 pkg：

```
package a

import (
    "fmt"
    "github.com/usr/pkg"
)

func init() {
    fmt.Println("Import pkg", pkg.somevar)
} 
```

当我尝试用 gccgo 编译它时：

```
$ gccgo -c a.go
a.go:5:20: error: import file ‘github.com/usr/pkg’ not found
... 
```

然后我阅读了[设置和使用 gccgo](http://golang.org/doc/install/gccgo)，它说

> 当您使用 gccgo 导入包 FILE 时，它将在以下文件中查找导入数据，并使用它找到的第一个。
> 
> FILE.gox FILE.o libFILE.so libFILE.a
> 
> gccgo 编译器将在当前目录中查找导入文件

所以我将 $GOPATH/pkg/github.com/usr/pkg.a cp 到当前目录并将其重命名为 libpkg.a。

似乎又失败了：

```
$ gccgo -c a.go
a.go:9:4: error: libpkg.a: malformed archive header name at 8
a.go:9:4: error: libpkg.a exists but does not contain any Go export data 
```

是的，我使用 gccgo 4.7.2

我没有使用 gcc 的经验，所以我在这里寻求一些帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T19:33:09.443

最简单的方法是使用 gc 发行版中的 go 命令，然后运行`go build -compiler gccgo .`

您复制 pkg.a 的想法不起作用，因为 pkg.a 不是用 gccgo 构建的。

# java - 数据未显示在 JTable 中

> ID：13508334
> 
> 赞同：1
> 
> 时间：2012-11-22T08:12:13.970
> 
> 标签：java, mysql, swing, jtable, tablemodel

我正在使用 DAO 工厂从数据库中获取我的数据。当我运行我的程序时，数据显示在打印行中，因此他将其从数据库中取出。但我希望它显示在我的 JTable 中，但这个是空的，我不知道如何填充它。

代码 JFrame：

```
package View;

import java.awt.Container;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.WindowConstants;
import javax.swing.table.TableModel;

import Controller.VerwijderController;
import Model.OefeningenListModel;
import Model.OefeningenTableModel;

public class VerwijderenHome extends JFrame {

    private JList LijstOefening;
    private JScrollPane jScrollPane1;
    private Container window = getContentPane();
    private JButton delete;
    private VerwijderController Controller;
    private JTable tabel;

    public VerwijderenHome()
    {
        initGUI();
    }

    public void addDeleteListener(ActionListener a){
        delete.addActionListener(a);
    }

    private void initGUI() {
        setPreferredSize(new Dimension(800, 600));
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setLayout(null);
        setVisible(true);

        JTable table = new JTable(new OefeningenTableModel());              
        JScrollPane scrollPane = new JScrollPane(table);  
        scrollPane.setBounds(50, 50, 300, 60);
        window.add(scrollPane);

        delete = new JButton("Delete");
        delete.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
        delete.setBounds(50, 265, 100, 30);
        window.add(delete);

        pack();

        Controller = new VerwijderController();
        addDeleteListener(Controller);

    }

    public JButton getDelete(){
        return delete;
    }

    public JList getLijst()
    {
        return LijstOefening;

}
    } 
```

代码 DefaultTableModel?? （不知道我是否必须使用这个）

```
package Model;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Vector;

import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableModel;

import datapackage.DAOFactory;

public class OefeningenTableModel extends DefaultTableModel {

      ArrayList<Oefening> oefeningen;

      public OefeningenTableModel(){

          oefeningen = DAOFactory.getFactory(0).getIDAOOefening().load();

      }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:53:45.110

`DefaultTableModel`由表示表模型的列和行的 a支持`Vector`。

您已经提供了自己`ArrayList`的对象，但您没有覆盖将数据提供回表所需的方法。`DefaultTableModel`不知道你的`ArrayList`

尝试覆盖以下一些内容；

```
public class OefeningenTableModel extends AbstractTableModel {

    ArrayList<Oefening> oefeningen;

    public OefeningenTableModel(){
        oefeningen = DAOFactory.getFactory(0).getIDAOOefening().load();
    }    

    @Override
    public int getRowCount() {
        return oefeningen.getSize();
    }

    @Override
    public int getColumnCount() {
        // You'll need to fill this out to meet your requirements
    }

    @Override
    public String getColumnName(ing column) {
        // You'll need to fill this out to meet your requirements
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        // You'll need to fill this out to meet your requirements
    }

} 
```

花点时间阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# node.js - 在 MongoDB 中每个集合使用多个地理空间索引

> ID：13508335
> 
> 赞同：2
> 
> 时间：2012-11-22T08:12:17.073
> 
> 标签：node.js, mongodb, mongoose, geospatial

[当前的 MongoDB](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/#GeospatialIndexing-CreatingtheIndex)文档说明如下：

> **目前，每个集合可能只有 1 个地理空间索引。**虽然 MongoDB 可能允许创建多个索引，但不支持此行为。因为 MongoDB 只能使用一个索引来支持单个查询，所以在大多数情况下，拥有多个地理索引会产生不良行为。

但是，当我在集合中创建两个地理空间索引（使用 Mongoose）时，它们工作得很好：

```
MySchema.index({
  'loc1': '2d',
  extraField1: 1,
  extraField2: 1
});

MySchema.index({
  'loc2': '2d',
  extraField1: 1,
  extraField2: 1
}); 
```

我的问题是：虽然它似乎有效，但 MongoDB 文档说这可能“产生不良行为”。到目前为止，无论是在测试还是使用中，都没有发现任何不良的东西。

**我应该担心这个吗？如果答案是肯定的，那么您会推荐什么作为解决方法？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:11:10.887

它仍然不受支持，因此即使您可以*创建*其中两个，但这并不意味着它们实际上已正确使用。我将在 mongo shell 上调查解释输出，并发出一些以地理空间方式使用 loc 和 loc2 字段的查询。例如：

```
use yourDbName
db.yourCollection.find( { loc: { $nearSphere: [ 0, 0 ] } } ).explain(); 
```

和：

```
db.yourCollection.find( { loc2: { $nearSphere: [ 0, 0 ] } } ).explain(); 
```

然后比较解释信息给你的内容。您可能会看到只有第一个创建的地理索引用于*两个*搜索。在 JIRA 中有一些您可能想要投票的票：

*   [https://jira.mongodb.org/browse/SERVER-2331](https://jira.mongodb.org/browse/SERVER-2331)
*   [https://jira.mongodb.org/browse/SERVER-3653](https://jira.mongodb.org/browse/SERVER-3653)

# c# - XAML 绑定是否支持索引属性？

> ID：13508339
> 
> 赞同：1
> 
> 时间：2012-11-22T08:12:49.273
> 
> 标签：c#, xaml, data-binding

我有几个与字典绑定的文本框

```
<TextBox Text="{Binding Path=MyField[NotDefinedIndex], Mode=TwoWay}"></TextBox> 
```

如果我尝试使用未在数据上下文中定义的索引，它会引发“无法连接到索引”异常。有没有办法捕获这个错误，定义索引 (MyFileld["NotDefinedIndex"] = string.Empty) 然后完成绑定？

有什么方法可以绑定 .NET Framework 中的索引属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:03:41.500

在绑定到未定义的索引时隐藏绑定错误可能不是一个好主意。但是，可以定义一个将访问字典并`string.Empty`在值不存在时返回的属性，因此您不会收到绑定错误。例如，在您的视图模型中：

```
public Dictionary<string, string> MyField { get; set; }

public string this[string key]
{
    get
    {
        string result;
        if (MyField.TryGetValue(key, out result))
        {
            return result;
        }

        return string.Empty;
    }
} 
```

然后在 XAML 中：

```
<TextBox Text="{Binding Path=[NotDefinedIndex], Mode=TwoWay}"></TextBox> 
```

# .htaccess - .htaccess 将 /es/ 更改为 .es

> ID：13508341
> 
> 赞同：3
> 
> 时间：2012-11-22T08:12:58.477
> 
> 标签：.htaccess, redirect, rewrite

我正在使用以下域：

```
http://www.domain.com/es/blabla.html 
```

我想更改 .es 的 /es 部分并将 URLS 转换为：

```
http://www.domain.com.es/blabla.html 
```

我一直在尝试很多可能性，但我还没有找到解决方案。

例如，其中之一是：

```
RewriteRule ^es/(.*)$ http://www.domain.com.es/$1 [L] 
```

但它已经进入了一个无限循环。我试图避免添加以下行：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L] 
```

但是服务器不允许这个调用。所以我还是有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:34:28.180

检查这个。

```
RewriteEngine On
RewriteRule ^\.html$ /es/blabla.html [L] 
```

# java - Spring - 捕获 bean 创建异常

> ID：13508342
> 
> 赞同：20
> 
> 时间：2012-11-22T08:13:07.557
> 
> 标签：java, spring, exception, configuration

我想在我的代码中捕获 bean 实例化异常。我有什么选择？一种方法是使用基于 Java 的容器配置：

```
@Configuration
public class AppConfig {
  @Bean
  public SomeBean someBean() {
    try {
      return new SomeBean(); // throws SomeException
    } catch(SomeException se) {
      return new SomeBeanStub();
    }
  }
} 
```

是否可以使用基于 XML 或基于注释的配置使用 Spring 为 bean 实例化定义异常处理程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-14T16:15:34.177

方法`someBean`应该 catch`SomeException`然后 throw [`BeanCreationException`](http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/beans/factory/BeanCreationException.html)with`SomeException`作为原因：

```
@Configuration
public class AppConfig {
  @Bean
  public SomeBean someBean() {
    try {
      return new SomeBean(); // throws SomeException
    } catch (SomeException se) {
      throw new BeanCreationException("someBean", "Failed to create a SomeBean", se);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-27T09:57:06.903

只是为了完整性。

您还可以延迟初始化 bean 并在第一次使用 bean 时捕获异常。

弹簧配置：

```
<bean id="a" class="A" lazy-init="true" /> 
```

在java中：

```
import org.springframework.beans.factory.BeanCreationException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Lazy;

public class B {

    @Autowired
    @Lazy
    A a;

    public void foo(){
         try{
               a.foo();
         } catch (BeanCreationException e){
               // ignore if you want
         }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:19:42.740

你不应该那样做。这就是让 Spring 为您创建 bean 的全部意义所在。如果您要使用（如上）创建自己的 bean `new`，为什么要使用 Spring 为您创建 bean？

您确实可以为自己分配对象并继续工作，而不是依赖注入等等。

虽然我理解问题背后的本质。我认为最好在服务器加载期间失败。原因：应用程序不会处于不一致的状态。假设您捕获了异常并进行了一些清洁，但是其他类会期望该 bean 存在，而它不存在。

因此最好它在初始化时失败，以便应用程序是一致的。虽然我不知道任何其他合法的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T09:47:41.927

如果您预计在创建 bean 期间会失败并且 bean 对于应用程序的其余部分不是必需的（非常合法的情况），您可以按照您的建议通过在 @Bean 方法主体中捕获所有失败异常并返回`null`以指示bean 创建失败。在这种情况下，bean 不会被添加到 Spring 应用程序上下文中，如果给定 bean 上没有强制依赖关系，上下文构造将成功。

# c# - 大于 0 且小于 11 的整数的正则表达式

> ID：13508346
> 
> 赞同：6
> 
> 时间：2012-11-22T08:13:17.103
> 
> 标签：c#, regex

我正在尝试修改此正则表达式，以便您获得大于或等于 1 或小于或等于 10 的数字。此正则表达式允许 >= 0 或 <= 10。

我在表单上有一个文本字段，它的数字等于或大于 0 且小于 11。我可以使用 IF 和逻辑运算符 TryParse，但我有点喜欢正则表达式。

```
@"^\d$|^[1][0]$" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T08:16:45.460

您只需要稍微修改一下您的正则表达式

```
@"^[1-9]$|^10$" 
```

您不需要单个字符周围的方括号，我会在交替周围使用一个组并将其更改为

```
@"^([1-9]|10)$" 
```

[在 Regexr 上](http://regexr.com?32t3r)查看

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T08:15:44.673

答案是这不是你应该使用正则表达式的东西。如果有的话，你会使用正则表达式来解析数字，然后将它们与标准`if (num >= 0)`等进行比较。

```
// EDIT: replaced regex with this:
int number;
if (Int32.TryParse(myString, out number)) {
    // do something, like:
    if (number >= 0 || number <= 10) {

    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T08:27:02.183

如果您使用的是 WinForms，则等于和等于 10 的`NumericUpDown`控件将完成这项工作。此外，您不需要解析 - 属性将包含您的值（嗯，它将是类型- 只需将其转换为）。`MinValue``1``MaxValue``Value``decimal``int`

使用的另一个原因`NumericUpDown`- 它不允许输入除数字之外的任何内容，并且上下箭头对用户说 - 此控件正在等待您的数字。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T08:17:26.517

虽然我建议简单地使用逻辑运算符来检查 int 是否在 1 到 10 之间，但这里有一个有效的正则表达式：

```
^(10|[1-9])$ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T08:16:54.533

给你：

```
^(1|2|3|4|5|6|7|8|9|10)$ 
```

非常明确，不能误解，清晰如初。为我提供更好的正则表达式。这里不需要简短和神秘

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T08:20:33.490

你可以试试这个：

```
^([1-9]|10)$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T10:08:13.050

使用正则表达式检查从 1 到 10 的数字 -

**^([1-9]|10)$**

# javascript - 关于从 Chrome 扩展程序调用 exe

> ID：13508347
> 
> 赞同：0
> 
> 时间：2012-11-22T08:13:22.753
> 
> 标签：javascript, google-chrome-extension, npapi

我正在尝试从 chrome 扩展程序调用 exe。我用谷歌搜索并知道它只能来自 NPAPI 插件。我也觉得它只能用 c /c++ 编写（我不知道。）。任何人都可以帮助我处理 NPAPI 插件。

如果可以使用 c# 或 vb.net 在 Visual Studio 中构建。

**清单.Json 文件**

```
{
"name": "My First Extension",
"version": "1.0",
"manifest_version": 2,

"description": "The first extension that I made.",
"browser_action": {
                  "default_icon": "icon.png",
                  "default_popup": "MyPage.html"
                 },
"permissions": [
                "MyPage.html"
               ]
} 
```

**MyPage.html 文件**

```
<html> 
   <head>
       <script src="my.js"></script>
       <script language="JavaScript" type="text/javascript" > </script> 
   </head> 
          <body>  
          </body> 
</html> 
```

**我的.js 文件**

```
window.onload = function()
    {
       RunExe();
    }; 
function RunExe()   
    { 
     MyObject = new ActiveXObject( "WScript.Shell" ) 
     MyObject.run     ("file:///C:/Users/manoj.gangwar/Desktop/FormEx_Sample_Project/TestProject/bin/Debug/TestForm.exe"); 
     window.close();           
    } 
```

感谢和问候马诺伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:42:52.293

不，如果不了解 C++，就无法在 .net 中创建浏览器插件。有可能在 C++ 中制作一些东西，作为桥梁，让 .net 程序集充当插件，但据我所知，没有人创造过这样的东西。

# java - 针对不同环境自动部署 JavaScript 项目

> ID：13508348
> 
> 赞同：0
> 
> 时间：2012-11-22T08:13:24.953
> 
> 标签：java, javascript, maven, automation, continuous-integration

我一直在寻找类似的问题，当然，存在很多，但我想知道是否有人使用像我们这样的类似项目以及您如何处理它。

我们正在开发一个项目，其中： - 客户端完全基于 JavaScript，带有 Dojo Toolkit 框架，它向我们的服务器端发出 AJAX 请求。- 基于 Java+Spring+Hibernate 的服务器端，实现了一些 REST API。

我们将这两个部分作为不同的项目进行管理，也就是说，对于我们使用 maven 的服务器端，对于每次更改，我们的 CI 服务器都会运行测试。这里重要的一步是我们可以使用配置文件配置 maven，这样 CI 就可以使用不同的属性文件创建一个准备好用于预生产或生产环境的包。

客户端是一堆（具有良好结构）的 HTML、CSS 和 JavaScript 文件。与服务器端一样，在客户端，我们有属性文件将客户端指向正确的位置（如开发服务器端）。

问题是：在这种情况下，这可能是实现客户端自动化的最佳方式？开发？我的意思是，在 CI 上运行 JavaScript 测试并使用适当的属性文件自动部署到正确的环境。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:21:39.660

当有人给你一个正确而完整的答案时，你可能想看看我做过的类似问题。[Javascript Web 应用程序和 Java 服务器，全部在 Maven 中构建或使用 Grunt for Web 应用程序？](https://stackoverflow.com/questions/15406977/javascript-web-app-and-java-server-build-all-in-maven-or-use-grunt-for-web-app)

我正在尝试不同的选项，但很可能我们将完成在客户端使用 Grunt。Maven exec 调用它并使用不同的配置文件构建所有内容（客户端+服务器）。

# iphone - 崩溃日志调试

> ID：13508355
> 
> 赞同：0
> 
> 时间：2012-11-22T08:13:38.167
> 
> 标签：iphone, ios, debugging, uitableview, crash-reports

我的一个应用程序用户遇到了疲惫的崩溃，他向我发送了报告，任何人都可以帮助我找到错误。该应用程序已在使用中，因此需要尽快修复。

他说，当他在一个特定的部分导航时，他遇到了崩溃。一般情况下它不会发生，但如果我们以特定方式进行，它就会崩溃。

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x65436572
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3388f5b6 objc_msgSend + 22
1   UIKit                           0x3a380ecc __53-[UITableView _configureCellForDisplay:forIndexPath:]_block_invoke_0 + 220
2   UIKit                           0x3a1d209e +[UIView(Animation) _performWithoutAnimation:] + 70
3   UIKit                           0x3a1d2050 -[UITableView _configureCellForDisplay:forIndexPath:] + 96
4   UIKit                           0x3a1cf558 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 432
5   UIKit                           0x3a1b4306 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1306
6   UIKit                           0x3a1cb7c2 -[UITableView layoutSubviews] + 202
7   UIKit                           0x3a1877fe -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
8   QuartzCore                      0x397b2d5e -[CALayer layoutSublayers] + 210
9   QuartzCore                      0x397b28fc CA::Layer::layout_if_needed(CA::Transaction*) + 456
10  QuartzCore                      0x397b3830 CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 12
11  QuartzCore                      0x397b3216 CA::Context::commit_transaction(CA::Transaction*) + 234
12  QuartzCore                      0x397b3024 CA::Transaction::commit() + 312
13  UIKit                           0x3a18d8e6 _afterCACommitHandler + 122
14  CoreFoundation                  0x329ab6ca __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
15  CoreFoundation                  0x329a99bc __CFRunLoopDoObservers + 272
16  CoreFoundation                  0x329a9d12 __CFRunLoopRun + 738
17  CoreFoundation                  0x3291ceb8 CFRunLoopRunSpecific + 352
18  CoreFoundation                  0x3291cd44 CFRunLoopRunInMode + 100
19  GraphicsServices                0x3a71a2e6 GSEventRunModal + 70
20  UIKit                           0x3a1d82f4 UIApplicationMain + 1116
21  APP                             0x00103f64 main (main.m:15)
22  APP                             0x000fe88c start + 36

Thread 1:
0   libsystem_kernel.dylib          0x31bc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x35004cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x35004a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x350048a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x31bb4648 kevent64 + 24
1   libdispatch.dylib               0x34fd54ec _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x34fc7df4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 3:
0   libsystem_kernel.dylib          0x31bc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x35004cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x35004a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x350048a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x31bb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x31bb4048 mach_msg + 36
2   CoreFoundation                  0x329ab040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x329a9d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3291ceb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3291cd44 CFRunLoopRunInMode + 100
6   WebCore                         0x36c78a40 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3500f30e _pthread_start + 306
8   libsystem_c.dylib               0x3500f1d4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x31bb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x31bb4048 mach_msg + 36
2   CoreFoundation                  0x329ab040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x329a9d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3291ceb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3291cd44 CFRunLoopRunInMode + 100
6   Foundation                      0x3451378a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x345b7058 -[NSRunLoop(NSRunLoop) run] + 76
8   APP                             0x0013ee96 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] (AFURLConnectionOperation.m:127)
9   Foundation                      0x345c0678 __NSThread__main__ + 968
10  libsystem_c.dylib               0x3500f30e _pthread_start + 306
11  libsystem_c.dylib               0x3500f1d4 thread_start + 4

Thread 6 name:  com.apple.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x31bb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x31bb4048 mach_msg + 36
2   CoreFoundation                  0x329ab040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x329a9d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3291ceb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3291cd44 CFRunLoopRunInMode + 100
6   Foundation                      0x3453cbc8 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x345c0678 __NSThread__main__ + 968
8   libsystem_c.dylib               0x3500f30e _pthread_start + 306
9   libsystem_c.dylib               0x3500f1d4 thread_start + 4

Thread 7 name:  com.apple.CFSocket.private
Thread 7:
0   libsystem_kernel.dylib          0x31bc4594 __select + 20
1   CoreFoundation                  0x329af1f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x3500f30e _pthread_start + 306
3   libsystem_c.dylib               0x3500f1d4 thread_start + 4

Thread 8:
0   libsystem_kernel.dylib          0x31bc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x35004cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x35004a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x350048a0 start_wqthread + 4

Thread 9:
0   libsystem_kernel.dylib          0x31bc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x35004cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x35004a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x350048a0 start_wqthread + 4

Thread 10:
0   libsystem_kernel.dylib          0x31bc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x35004cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x35004a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x350048a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x2fd029f0    r1: 0x3a60c4ec      r2: 0x00000000      r3: 0x6543657a
    r4: 0x3a60dbc7    r5: 0x00000001      r6: 0x3a60109d      r7: 0x2fd029b0
    r8: 0x00000000    r9: 0x0e98313b     r10: 0x000002f4     r11: 0x2fd029d0
    ip: 0x3c399d64    sp: 0x2fd02908      lr: 0x3a380ed1      pc: 0x3388f5b6
  cpsr: 0x00000030 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:03:46.240

看来您正在使用多线程进行网络操作。如果你从 UIViewContoller 调用你的线程，请查看 Deallocation 问题： [deallocation problem](http://developer.apple.com/library/ios/#technotes/tn2109/_index.html)

搜索段落释放问题。当从 UIViewControoler 调用线程并在线程完成工作之前导航时会发生这种情况。

查看链接以获取问题的完整描述。

# jquery - 日期选择器，可选日期

> ID：13508366
> 
> 赞同：0
> 
> 时间：2012-11-22T08:15:43.813
> 
> 标签：jquery, jquery-ui, datepicker

我希望为到期日期实施日期选择器。看看这些日期是怎样的，有些日期是 2013 年 10 月 12 日，而另一些只有月份和年份，例如 2013 年 12 月，如果到期日如此，我希望用户可以选择一天/月/年前一个例子或后一个例子中的月/年。

我正在使用股票 jquery datepicker，我无法实现这些选项。这有可能吗，或者我需要一个更好的插件吗？

感谢和问候。帮助赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:07:11.563

看看[下面](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)的问题：

```
jQuery UI DatePicker to show month year only 
```

也许这是同一个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:25:16.390

据我所知，jQuery UI datepicker 不支持这种功能。但是，还有另一个[jQuery 插件](http://keith-wood.name/datepick.html#extend)可以配置为仅允许您选择月份（请参阅链接页面上的“仅选择月份”示例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:23:25.790

尝试这个

```
 $(document).ready(function(){
      $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy' }).val();
 }) 
```

或者

```
 $(document).ready(function(){
    $(".datepicker").datepicker({ dateFormat: 'yy-mm-dd' }).val();
 }) 
```

这是你在看吗？

# dom - 在 AutoHotkey 的 Web 浏览器控件中禁用 JavaScript

> ID：13508369
> 
> 赞同：2
> 
> 时间：2012-11-22T08:15:47.157
> 
> 标签：dom, webbrowser-control, autohotkey

我认为即使在渲染页面之后，删除脚本标签和标签中的相关属性也会起作用，但没有。

以下代码删除了 script 标签和 onclick 属性，但没有任何效果。

任何想法？

我想避免：

*   编辑注册表，因为它需要管理员权限。
*   单独获取网页内容并使用 doc.write() 因为它使代码复杂。

文件：

*   javascript.html
*   测试.ahk

**javascript.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script> function displayDate() { document.getElementById("demo").innerHTML=Date(); }</script>
    </head>
    <body>
        <p id="demo" onclick="displayDate()">This is a paragraph. Click here.</p>
    </body>
</html> 
```

**测试.ahk**

```
 Gui, Add, ActiveX, vWB w400 h300, Shell.Explorer  
    Gui, Show, w420 h320
    WB.Navigate("file:///" A_ScriptDir "/javascript.html")
    Loop
       Sleep 10
    Until (WB.readyState=4 && WB.document.readyState="complete" && !WB.busy)        

    doc := WB.document
    nodeScript := doc.getElementsByTagName("script")[0]
    nodeScript.parentNode.removeChild(nodeScript)
    nodeP := doc.getElementsByTagName("p")[0]
    nodeP.removeAttribute("onclick") 

    msgbox % doc.documentElement.outerHTML
    Return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:43:40.423

通过实现三个特定的 COM 接口（和）并调用控件的 IOleObject 接口的 SetClientSite 方法，`IOleClientSite`可以强制为给定的 WebBrowser 控件启用/禁用脚本。`IServiceProvider``IInternetSecurityManager`

最终，您需要实现该`IInternetSecurityManager::ProcessUrlAction`方法。当 WebBrowser 调用它并将`dwAction`参数设置为 时`URLACTION_SCRIPT_RUN`，您可以设置`*pPolicy`为`URLPOLICY_DISALLOW`以阻止脚本或`URLPOLICY_ALLOW`启用脚本，并返回`S_OK`（零）以强制执行策略。

必要的代码如下所示，可以`SetWBClientSite()`在创建控件之后导航之前简单地调用来实现。全局变量`WB`必须包含对 WebBrowser 控件的引用。

```
/*  Complex workaround to override "Active scripting" setting
 *  and ensure scripts can't run within the WebBrowser control.
 */

global WBClientSite

SetWBClientSite()
{
    interfaces := {
    (Join,
        IOleClientSite: [0,3,1,0,1,0]
        IServiceProvider: [3]
        IInternetSecurityManager: [1,1,3,4,8,7,3,3]
    )}
    unkQI      := RegisterCallback("WBClientSite_QI", "Fast")
    unkAddRef  := RegisterCallback("WBClientSite_AddRef", "Fast")
    unkRelease := RegisterCallback("WBClientSite_Release", "Fast")
    WBClientSite := {_buffers: bufs := {}}, bufn := 0, 
    for name, prms in interfaces
    {
        bufn += 1
        bufs.SetCapacity(bufn, (4 + prms.MaxIndex()) * A_PtrSize)
        buf := bufs.GetAddress(bufn)
        NumPut(unkQI,       buf + 1*A_PtrSize)
        NumPut(unkAddRef,   buf + 2*A_PtrSize)
        NumPut(unkRelease,  buf + 3*A_PtrSize)
        for i, prmc in prms
            NumPut(RegisterCallback("WBClientSite_" name, "Fast", prmc+1, i), buf + (3+i)*A_PtrSize)
        NumPut(buf + A_PtrSize, buf + 0)
        WBClientSite[name] := buf
    }
    global wb
    if pOleObject := ComObjQuery(wb, "{00000112-0000-0000-C000-000000000046}")
    {   ; IOleObject::SetClientSite
        DllCall(NumGet(NumGet(pOleObject+0)+3*A_PtrSize), "ptr"
            , pOleObject, "ptr", WBClientSite.IOleClientSite, "uint")
        ObjRelease(pOleObject)
    }
}

WBClientSite_QI(p, piid, ppvObject)
{
    static IID_IUnknown := "{00000000-0000-0000-C000-000000000046}"
    static IID_IOleClientSite := "{00000118-0000-0000-C000-000000000046}"
    static IID_IServiceProvider := "{6d5140c1-7436-11ce-8034-00aa006009fa}"
    iid := _String4GUID(piid)
    if (iid = IID_IOleClientSite || iid = IID_IUnknown)
    {
        NumPut(WBClientSite.IOleClientSite, ppvObject+0)
        return 0 ; S_OK
    }
    if (iid = IID_IServiceProvider)
    {
        NumPut(WBClientSite.IServiceProvider, ppvObject+0)
        return 0 ; S_OK
    }
    NumPut(0, ppvObject+0)
    return 0x80004002 ; E_NOINTERFACE
}

WBClientSite_AddRef(p)
{
    return 1
}

WBClientSite_Release(p)
{
    return 1
}

WBClientSite_IOleClientSite(p, p1="", p2="", p3="")
{
    if (A_EventInfo = 3) ; GetContainer
    {
        NumPut(0, p1+0) ; *ppContainer := NULL
        return 0x80004002 ; E_NOINTERFACE
    }
    return 0x80004001 ; E_NOTIMPL
}

WBClientSite_IServiceProvider(p, pguidService, piid, ppvObject)
{
    static IID_IUnknown := "{00000000-0000-0000-C000-000000000046}"
    static IID_IInternetSecurityManager := "{79eac9ee-baf9-11ce-8c82-00aa004ba90b}"
    if (_String4GUID(pguidService) = IID_IInternetSecurityManager)
    {
        iid := _String4GUID(piid)
        if (iid = IID_IInternetSecurityManager || iid = IID_IUnknown)
        {
            NumPut(WBClientSite.IInternetSecurityManager, ppvObject+0)
            return 0 ; S_OK
        }
        NumPut(0, ppvObject+0)
        return 0x80004002 ; E_NOINTERFACE
    }
    NumPut(0, ppvObject+0)
    return 0x80004001 ; E_NOTIMPL
}

WBClientSite_IInternetSecurityManager(p, p1="", p2="", p3="", p4="", p5="", p6="", p7="", p8="")
{
    if (A_EventInfo = 5) ; ProcessUrlAction
    {
        if (p2 = 0x1400) ; dwAction = URLACTION_SCRIPT_RUN
        {
            NumPut((URLPOLICY_DISALLOW := 3), p3+0)  ; *pPolicy := URLPOLICY_DISALLOW
            return 0 ; S_OK
        }
    }
    return 0x800C0011 ; INET_E_DEFAULT_ACTION
}

_String4GUID(pGUID)
{
    VarSetCapacity(String,38*2)
    DllCall("ole32\StringFromGUID2", "ptr", pGUID, "str", String, "int", 39)
    Return  String
} 
```

当前的 AutoHotkey 安装程序包含与此相同的代码，不同之处在于它设置为`URLPOLICY_ALLOW`(0) 而不是`URLPOLICY_DISALLOW`(3)。这对于允许安装程序在禁用脚本的系统上工作是必要的。

如您所见，直接在 AutoHotkey 脚本中实现 COM 接口并非易事。在普通 C 中要容易一些（参见[普通 C 中的 COM](http://www.codeproject.com/Articles/13601/COM-in-plain-C)），而在 C++ 中要容易得多。

# ruby-on-rails - 未定义的方法“键？” 对于 nil:NilClass Ruby on Rails

> ID：13508372
> 
> 赞同：0
> 
> 时间：2012-11-22T08:15:59.493
> 
> 标签：ruby-on-rails

我正在使用以下 [Rails 教程][1]

[1]：[http](http://ruby.railstutorial.org/chapters/sign-up#sec-a_users_resource) ://ruby.railstutorial.org/chapters/sign-up#sec-a_users_resource学习并进入我链接到的部分。

当我访问 REST URL xxx/users/1 时，出现错误：

```
NoMethodError in UsersController#index
undefined method `key?' for nil:NilClass 
```

从网上阅读，我认为它与用户模型中的代码有关，但我已经按照 tut 到了 tee，并且我的代码似乎与原始代码相同。但也许其他人可以看到我缺少的东西：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

任何帮助将不胜感激！

编辑：这是错误的框架跟踪：

```
actionpack (3.2.8) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
actionpack (3.2.8) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:115:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__4595614879947811243__call__2349863385936106112__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

再次编辑：这是 users_controller.rb 的内容。似乎这可能是问题，但它在教程中列出：

```
class UsersController < ApplicationController
  def show
    @user = user.find(params[:id])
  end

  def new
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:15:20.340

重启 Rails 服务器解决了这个问题！谢谢

# mongodb - 如何协调一组 celery beat 守护进程？

> ID：13508373
> 
> 赞同：1
> 
> 时间：2012-11-22T08:16:07.823
> 
> 标签：mongodb, concurrency, celery, celerybeat

我有一个由三台机器组成的集群。我想`celery beat`在这些上运行。我有几个相关的问题。

1.  Celery 有一个持久调度器的概念。只要我的日程表仅包含 crontab 条目并且由 静态定义`CELERYBEAT_SCHEDULE`，我是否需要坚持它？
2.  如果我这样做，那么我是否必须确保此存储在集群的所有机器之间同步？
3.  是否`djcelery.schedulers.DatabaseScheduler`自动处理并发的节拍守护进程？也就是说，如果我只使用 运行三个节拍守护程序`DatabaseScheduler`，我是否可以避免重复任务？
4.  有没有类似`DatabaseScheduler`但基于 MongoDB 的东西，没有 Django ORM？就像 Celery 自己的 MongoDB 代理和结果后端一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T20:40:17.940

目前 Celery 不支持多个并发的 celerybeat 实例。

> 您必须确保一次只有一个调度程序正在运行一个计划，否则您最终会得到重复的任务。使用集中式方法意味着计划不必同步，并且服务可以在不使用锁的情况下运行。

[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

# c# - 删除 datagridview 上的默认选定行

> ID：13508375
> 
> 赞同：0
> 
> 时间：2012-11-22T08:16:17.407
> 
> 标签：c#, winforms, datagridview

我有一个`Datagridview`包含列。
当我单击列上的项目时。
它总是选择第一行

我也试过

```
.currentcell = null and .clearselection(); 
```

// 我在上面插入了这个`form_load`

但什么也没发生。

这是我的代码

```
private void dgv1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0) 
            {
                dgv1.CurrentCell = null;
                dgv1[e.ColumnIndex, e.RowIndex].Value.ToString();
                if (Path.GetExtension(path) == ".pdf")
            {

                Process.Start(path);
            }

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:28:41.530

您希望用户首先选择什么？在 datagridview 中有一个 selectionmode 的属性。如果您希望它仅选择单元格，请将其更改为 CellSelect。或者，使用`dataGridView.SelectionMode = DataGridViewSelectionMode.CellSelect;`

在阅读了您在评论中所说的内容后，我推断您正在尝试单击一个单元格并从您的程序中读取该单元格？

如果是这样，你可以试试

```
dataGridView[e.ColumnIndex, e.RowIndex].Value.ToString(); 
```

在 CellContentClick 和/或 CellClick 事件上

# c# - 安卓之间的距离

> ID：13508376
> 
> 赞同：0
> 
> 时间：2012-11-22T08:16:18.283
> 
> 标签：c#, android, location, monodevelop, valueconverter

我正在为 Android 使用 MonoDevelop，并且两点之间有距离。返回的值是多少？

这是我使用的代码：

```
 Location.DistanceBetween(startLat, startLng, endLat, endLng, distResults); 
```

更重要的是，如果需要，如何将此值转换为米和公里？

谢谢

**编辑**

我从函数返回以下值：74 4760445。这是 74 米吗？74之后的其他数字是什么？从这个值，我怎么能得到 74？没有其他价值观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:19:25.937

```
distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results) 
```

计算两个位置之间的近似距离（以米为单位），以及它们之间最短路径的初始和最终方位（可选）。

检查这个 [http://developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

# sql - 使用 SQL 获取文件的扩展名？

> ID：13508378
> 
> 赞同：22
> 
> 时间：2012-11-22T08:16:30.157
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [在 SQL Server 中获取子字符串](https://stackoverflow.com/questions/1226789/get-substring-in-sql-server)

假设我在数据库表的列中有`MyImage.png`or`MyDoc.doc`等​​。

我怎样才能只获得文件扩展名？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-22T08:18:34.037

试试这个：

```
declare @str varchar(20)='MyDoc.doc';
select reverse(left(reverse(@str),charindex('.',reverse(@str))-1)) 
```

### [SQL小提琴演示](http://sqlfiddle.com/#!3/d41d8/6463)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T08:27:41.547

试试这个 ：

```
select parsename(filename,1) from yourTable 
```

[sqlfiddle 演示](http://sqlfiddle.com/#!3/db40b/1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T08:28:53.430

使用字符串函数：

```
SELECT Extension =
   Right([Name],
        CHARINDEX('.',
                  REVERSE([Name]))-1)
FROM dbo.Files 
```

[**SQL小提琴演示**](http://sqlfiddle.com/#!3/9c4cb/3/0)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T08:19:07.937

```
declare @str varchar(20)='MyDoc.doc'
select reverse(left(reverse(@str),CHARINDEX('.',reverse(@str))-1)) 
```

[**小提琴演示**](http://sqlfiddle.com/#!3/d41d8/6479)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-22T08:23:21.700

```
 SELECT RIGHT('myFile.txt', 
               CHARINDEX('.', REVERSE('myFile.txt'))-1) AS 'File Extension' 
```

文档：[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)，[RIGHT](http://msdn.microsoft.com/en-us/library/ms177532.aspx)，[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)，[REVERSE](http://msdn.microsoft.com/en-us/library/ms180040.aspx)

# cocos2d-iphone - CCRepeatForever 动作在切换场景时自动停止

> ID：13508381
> 
> 赞同：1
> 
> 时间：2012-11-22T08:16:36.407
> 
> 标签：cocos2d-iphone

我正在开发一个简单的游戏应用程序。

我需要有两个屏幕，一个在左边，另一个在右边，就像在滚动视图中一样，分页有两个屏幕可以在它们之间切换。我在 RootViewController 类的帮助下检测到滑动并成功地左右滑动屏幕。

但问题是我必须在两个屏幕上无限运行 rotateBy 动作，每个屏幕都在放置在屏幕中心的单个精灵上运行这个动作。

我正在使用一个名为 SelectWorld 的主场景，两个是它的子场景。第一个屏幕称为工厂，其他屏幕称为堆栈。以下是我的代码：

选择世界屏幕：

```
@implementation SelectWorld

+(CCScene*)scene
{
    CCScene* scene = [CCScene node];
    SelectWorld* layer = [SelectWorld node];
    [scene addChild:layer];

    return scene;
}

-(id)init
{
    if((self = [super init]))
    {
        [RootViewController singleton].swipeCallBackHandler = self;
        [[RootViewController singleton] enableSwipeDetection];

        factory = [[ColorfulFactory scene] retain];
        stack = [[CoinsStack scene] retain];

        [self addChild:factory];
        isOnFactory = YES;
    }

    return self;
}

-(void)swipedLeft
{
    if(isOnFactory)
    {
        [self removeAllChildrenWithCleanup:YES];

        isOnFactory = NO;
        CCTransitionScene* transitionalScene = [CCTransitionSlideInR transitionWithDuration:0.3 scene:stack];
        [[CCDirector sharedDirector] replaceScene:transitionalScene];
    }
}

-(void)swipedRight
{
    if(!isOnFactory)
    {
        [self removeAllChildrenWithCleanup:YES];

        isOnFactory = YES;
        CCTransitionScene* transitionalScene = [CCTransitionSlideInL transitionWithDuration:0.3 scene:factory];
        [[CCDirector sharedDirector] replaceScene:transitionalScene];
    }
} 
```

这是工厂的代码，堆栈也是如此-

```
@implementation ColorfulFactory

+(CCScene*)scene
{
    CCScene* scene = [CCScene node];
    ColorfulFactory* layer = [ColorfulFactory node];
    [scene addChild:layer];

    return scene;
}

-(id)init
{
    if((self = [super init]))
    {
        CGSize size = [CCDirector sharedDirector].winSize;

        CCLabelTTF* info = [CCLabelTTF labelWithString:@"Colorful Factory" fontName:@"Helvetica" fontSize:35.0];
        info.position = ccp(size.width/2, size.height-50);
        [self addChild:info];

        CCSprite* sprite = [CCSprite spriteWithFile:@"Icon.png"];
        sprite.position = ccp(size.width/2, size.height/2);
        [self addChild:sprite];
        sprite.tag = 123;

        CCRotateBy* rotateBy = [CCRotateBy actionWithDuration:60 angle:360.0];
        CCRepeatForever* repeatForever = [CCRepeatForever actionWithAction:rotateBy];
        [sprite runAction:repeatForever];
        repeatForever.tag = 456;
    }

    return self;
} 
```

现在的问题是，前两次滑动动作运行良好，但只要我尝试滑动超过两三次，动作就会停止。我没有写一行来阻止这两个类。我要求它在那里永远运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:39:31.330

您的错误是您为每个场景更改重新使用相同的场景对象。你不能在 cocos2d 中这样做，你必须创建一个新的场景对象实例。

你永远不应该保留一个场景对象，因为在任何时候都应该只有一个活动场景（场景转换到另一个场景的持续时间除外——但这由 cocos2d 内部处理）。

例如：

```
CCScene* factory = [ColorfulFactory scene];
CCTransitionScene* transitionalScene = [CCTransitionSlideInR transitionWithDuration:0.3 scene:factory];
[[CCDirector sharedDirector] replaceScene:transitionalScene]; 
```

如果您需要内存中的两个对象，请将它们设为图层（或节点），而不是场景。不要使用 replaceScene，而是使用常规的 moveTo 动作在屏幕内外设置动画。

# wpf - ControlTemplate 或 DataTemplate 中的自定义资源字典

> ID：13508385
> 
> 赞同：7
> 
> 时间：2012-11-22T08:16:50.233
> 
> 标签：wpf, xaml, datatemplate, controltemplate, resourcedictionary

**编辑：使用标准 .NET ResourceDictionary 时也会出现此问题，并且似乎是在控件或数据模板中使用资源字典时出现的问题。**

我有一个自定义资源字典，它遵循共享资源实例的通用方法。

[http://softnotes.wordpress.com/2011/04/05/shared-resourcedictionary-for-silverlight/](http://softnotes.wordpress.com/2011/04/05/shared-resourcedictionary-for-silverlight/) [http://www.wpftutorial.net/MergedDictionaryPerformance.html](http://www.wpftutorial.net/MergedDictionaryPerformance.html)

```
public class SharedResourceDictionary : ResourceDictionary
{
    static readonly Dictionary<Uri, WeakReference<ResourceDictionary>> SharedDictionaries = new Dictionary<Uri, WeakReference<ResourceDictionary>>();

    Uri _sourceUri;

    public new Uri Source
    {
        get
        {
            // Behave like standard resource dictionary for IDE...
            if (VisualStudio.IsInDesignMode)
                return base.Source;

            return this._sourceUri;
        }
        set
        {
            // Behave like standard resource dictionary for IDE...
            if (VisualStudio.IsInDesignMode)
            {
                base.Source = value;
                return;
            }

            this._sourceUri = value;

            WeakReference<ResourceDictionary> cached;
            if (SharedDictionaries.TryGetValue(value, out cached))
            {
                ResourceDictionary rd;
                if (cached.TryGetTarget(out rd))
                {
                    this.MergedDictionaries.Add(rd);
                    return;
                }
            }

            base.Source = value;
            SharedDictionaries[value] = new WeakReference<ResourceDictionary>(this);
        }
    }
} 
```

它工作正常，但只要在 ControlTemplate 或 DataTemplate 内的 Resources 元素内引用它，就会显示虚假错误（这些不影响构建，仍然成功）。

这个显示在标准 ResourceDictionary 中，它在其合并字典中包含 SharedResourceDictionary：

```
Unable to cast object of type 'Microsoft.Expression.Markup.DocumentModel.DocumentCompositeNode' to type 'System.Windows.ResourceDictionary' 
```

示例 XAML：

```
<DataTemplate DataType="{x:Type vm:MyViewModel}">
    <DockPanel Style="{DynamicResource MainDockPanel}">
        <DockPanel.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <p:SharedResourceDictionary Source="/MyAssembly;component/MyResources.xaml" />
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </DockPanel.Resources>
    </DockPanel>
</DataTemplate> 
```

有谁知道如何消除这种令人讨厌的错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-10T13:07:42.650

此问题已报告给 Microsoft。您可以对其进行投票，所以它可能会在未来的某个版本中得到修复。

[https://connect.microsoft.com/VisualStudio/feedback/details/772730/xaml-designer-broken-when-adding-resource-dictionaries-to-data-or-control-templates](https://connect.microsoft.com/VisualStudio/feedback/details/772730/xaml-designer-broken-when-adding-resource-dictionaries-to-data-or-control-templates)

# android - 将 FusionChart 集成到 Android 应用程序中？

> ID：13508390
> 
> 赞同：2
> 
> 时间：2012-11-22T08:17:03.240
> 
> 标签：android, fusioncharts

我想将fusionchart集成到android本机应用程序中（不是phonegap）。我已经为它编写了如下代码

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
WebView webview =(WebView) findViewById(R.id.web);
String summary = 
"<html>"+
"<head>        "+
" <title>My First chart using FusionCharts XT - Using JavaScript</title>      "+
"<script type=\"text/javascript\" src=\"FusionCharts/FusionCharts.js\"></script>"+
"</head> "+  
"<body>"+     
" <div id=\"chartContainer\">FusionCharts XT will load here!</div>"+          
"<script type=\"text/javascript\">"+
" var myChart = new FusionCharts( \"FusionCharts/Column3D.swf\",\"myChartId\", \"400\",\"300\", \"0\", \"1\" );"+
"myChart.setXMLUrl(\"Data.xml\");"+
"myChart.render(\"chartContainer\");"+      
"</script>"+      
"</body>"+ 
 "</html>";
webview.loadDataWithBaseURL(null, summary, "text/html", "utf8", null);
} 
```

请任何人告诉我有什么问题。我不知道如何给出确切的 FusionCharts/FusionCharts.js 路径，也不知道 Column3D.swf 文件。

我在哪里可以得到这些文件。

即使这个 html 代码在我的电脑浏览器中也不起作用。

我想只使用 fusionchart 在 android 应用程序中制作条形图！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:40:00.293

您需要下载 FusionCharts XT 下载包，以便接收下载包的“Charts”文件夹中提供的必要 JavaScript 和 SWF 文件，以便您渲染 FusionCharts。[您可以从这里](http://www.fusioncharts.com/download/trials/)下载评估包。

此外，请[**在此处**](http://docs.fusioncharts.com/charts/contents/?FirstChart/FirstChart.html)查看在浏览器上创建您的第一个图表的详细过程。

FusionCharts 有望在原生 Android 应用程序上完美运行，前提是[**这里**](http://www.fusioncharts.com/products/suite/tech-specs/)提到的所有其他标准来呈现 JavaScript 图表（Android 3.0 及更高版本）和 Flash 图表都得到满足。

FusionCharts 没有任何原生 API 可以在 Android 应用程序中呈现图表。因此，您需要使用一些 3rd 方移动开发框架，如 PhoneGap、UIWebView 等以及它们提供的 API 控件，以实现相同的目的。

没有在原生 Android 应用程序中渲染 FusionCharts 的示例，但是，使用 UIWebView 控件的 iOS 应用程序有类似的实现，可以在这篇[**博**](http://blog.fusioncharts.com/2012/02/create-charts-for-iphone-and-ipad-apps-using-fusioncharts-xt/)文的帮助下参考。[注意：这纯粹是作为参考，并不是直接的 Android 实现。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:39:29.323

您可以从 FusionCharts XT 包中获取 SWF 和 JS 文件。可从[http://www.fusioncharts.com/downloads](http://www.fusioncharts.com/downloads)下载试用版。您将从文件`Download Pack > Charts`夹中获取这些文件。

通常，您需要将这些文件放在文件`/assets`夹中。这些文件与`apk`. 您可以使用路径访问文件 - `/assets/...`.

> 参考：[从资源加载文件](https://stackoverflow.com/questions/1851634/load-file-from-resource)

请记住，如果您的目标是 Android v3+，则不需要渲染 Flash 图表。因此，您不需要复制这些`SWF`文件。FusionCharts 提供 JavaScript（无 Flash）图表，您的实现变得更加简单，详细步骤如下：

1.  将`FusionCharts.js`、`FusionCharts.HC.js`和复制`FusionCharts.HC.Charts.js`到`jquery.min.js`所需文件夹。

> 但是，仅包含`FusionCharts.js`在您的 HTML 代码中。其他 JavaScript 文件将自动加载。

2.  不要传递`SWF`文件名，而是传递图表的 JavaScript 别名。代码中所需的修改：

    ```
    var myChart = new FusionCharts( \"Column3D\",\"myChartId\... 
    ```

    `Column3D`是您尝试渲染的图表的别名。无需为其添加路径前缀。

3.  *不要*使用`setXMLUrl`. FusionCharts 使用 ajax 加载 XML 数据。大多数浏览器不支持本地 Ajax（由于安全限制），它可能会失败。相反，使用 Android 的资源加载机制（[从资源加载文件](https://stackoverflow.com/questions/1851634/load-file-from-resource)）加载 XML，并使用方法将数据作为字符串传递给图表`setXMLData`。

    ```
    myChart.setXMLData(XMLLoadedAsString); 
    ```

*更多：*实现这一点的更同步的方法是将图表渲染 JavaScript 代码包装在 FusionCharts 的`ready`事件侦听器中，如下所示：

```
 <script type=\"text/javascript\">"+

    " FusionCharts.addEventListener(\"ready\", function () { \n"+

    "     var myChart = new FusionCharts( \"FusionCharts/Column3D.swf\",\"myChartId\", \"400\",\"300\", \"0\", \"1\" );"+
    "    myChart.setXMLUrl(\"Data.xml\");"+
    "    myChart.render(\"chartContainer\");"+      

    "\n});"+
    "</script>" 
```

# ldap - LDAP BIND 无效 DN

> ID：13508395
> 
> 赞同：0
> 
> 时间：2012-11-22T08:17:20.260
> 
> 标签：ldap

我想使用 Ldap_bind 这是我的代码：

```
 $ldap_host = '192.168.1.250'; //Host LDAP
 $ldap_user = "cn=admin,ou=people,dc=maxcrc,dc=com";
 $ldap_pass = 'admin';
 $ldap_conn = ldap_connect($ldap_host);
 ldap_set_option($ldap_conn, LDAP_OPT_PROTOCOL_VERSION, 3);

 if($ldap_conn) 
 {
  if ($bind = ldap_bind($ldap_conn, $ldap_user, $ldap_pass)){

  }
  else
  {
    die('Koneksi ke LDAP Gagal');
  }
 } 
```

当我执行该代码时，一切都很好。但是当我用 admin@maxcrc.com 更改 $ldap_user 时，出现错误说

> “无法绑定到服务器：DN 语法无效”

那有什么问题？我怎么能绑定域。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:22:01.507

这是因为 ldap_bind() 需要一个 DN - 一个专有名称，它就像对象的完整路径。以这种方式绑定时，您不能使用 user@domain 语法。

有时您也可以使用 RDN - 相对 DN -（简称为“用户名”），但通常目录需要完整的 DN。

# java - 断言模型对象属性

> ID：13508400
> 
> 赞同：1
> 
> 时间：2012-11-22T08:17:50.667
> 
> 标签：java, spring, testing, junit

我在 Spring 控制器测试中有这个测试代码

```
Student student = studentService.getByNumber(767001);
    student.setCourseRights(courseRightService.getCourseRights(student));
    model.addAttribute("student", student);

    Student s = (Student) model.asMap().get("student"); 
```

我怎样才能掌握学生的属性来断言它们？

```
 Assert.assertEquals(1, rights.size());   

List<GrantedCourseRight> rights = (List<GrantedCourseRight>) model.asMap().get("student.courseRights"); 
```

不起作用，allthought student.courseRight 变量显示在 jsp 页面上。我只需要将列表单独放在模型上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:27:49.990

[Spring Test](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html)项目提供了一整套功能，允许您在 Junit 中测试您的 Spring 应用程序。基本上，您希望在运行 Junit 测试之前建立应用程序上下文，这将允许您使用依赖注入来注入服务的 bean。

为了建立这种支持，我们用几个 Spring 注释来注释我们的测试类。

**MyUnitTest.java**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
@Transactional
public class SkillRepositoryTest {

    @Autowired
    SkillRepository repository;

    @Test
    public void findOneTest(){
        Skill skill = repository.findOne(1);
        assertNotNull(skill);
        assertEquals("Java", skill.getName());
    }
} 
```

运行测试时，Spring 将在同一目录中查找名为`MyUnitTest-context.xml`. `-context.xml`在第一次尝试查找应用程序上下文时，它只是作为您的测试类名称的后缀。@ContextConfiguration 注释还包含一个可用于定位应用程序上下文的元素。

# visual-c++ - WM_MOUSEWHEEL 在 Windows 7 / 64bits 上只能单向工作

> ID：13508405
> 
> 赞同：1
> 
> 时间：2012-11-22T08:18:20.143
> 
> 标签：visual-c++, windows-7-x64, mousewheel, mouse-hook

我为游戏中的 3D 效果制作了这段代码，这段代码有助于改变位置和放大 + 缩小屏幕！

但是，如果我在 win 7 64 位上运行它，当向前和向后滚动鼠标滚轮时，它只会放大，但在 Windows 7 32 位上运行时它可以正常工作！

我该如何解决它以获得任何胜利？
谢谢你的帮助！！！！

```
LRESULT CALLBACK MouseProc(int code, WPARAM wParam, LPARAM lParam)

{

MOUSEHOOKSTRUCTEX* mhs = (MOUSEHOOKSTRUCTEX*)lParam;
HWND MuWnd = FindWindow(TEXT("MU"), NULL);

if(UseCamera)
{
    if(GetForegroundWindow() == MuWnd)
    {

        if(InitCamera)
        {

            Camera.ClipX  = *Camera_ClipX;
            Camera.ClipY  = *Camera_ClipY;
            Camera.GlClip = *Camera_GlClip;
            Camera.PosZ   = *Camera_PosZ;
            Camera.RotY   = *Camera_RotY;
            Camera.RotZ   = -45;
            Camera.Zoom   = *Camera_Zoom;
            InitCamera    = false;

        }

        else if(wParam == WM_MBUTTONDOWN)
        {
            MouseX = mhs->pt.x;
            MouseY = mhs->pt.y;
            MoveCamera = true;
        }

        else if(wParam == WM_MBUTTONUP)
        {
            MoveCamera = false;
        }

        else if(wParam == WM_MOUSEWHEEL)
        {
            int direction = mhs->mouseData;
            if(direction < 0)
            {
                if(*Camera_Zoom < 60)
                {
                    *Camera_Zoom += 2;
                }
                *Camera_ClipX  = 1190 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_ClipY  = 2400 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_GlClip = 2300 + (abs(*Camera_PosZ - 150) * 3) + 4000;
            }

            else if(direction > 0)
            {
                if(*Camera_Zoom > 12)
                {
                    *Camera_Zoom -= 2;
                }
                *Camera_ClipX  = 1190 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_ClipY  = 2400 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_GlClip = 2300 + (abs(*Camera_PosZ - 150) * 3) + 4000;
            }
        }

        else if(wParam == WM_MOUSEMOVE)
        {
            if(MoveCamera)
            {
                if(MouseX < mhs->pt.x)
                {
                    *Camera_RotZ += 8;
                    if (*Camera_RotZ > 315) *Camera_RotZ = -45;
                }

                else if(MouseX > mhs->pt.x)
                {
                    *Camera_RotZ -= 8;
                    if (*Camera_RotZ < -405) *Camera_RotZ = -45;
                }

                if(MouseY < mhs->pt.y)
                {
                    if(*Camera_RotY < -45)
                    {
                        *Camera_PosZ -= 44;
                        *Camera_RotY += (double)2.42;
                    }
                }

                else if(MouseY > mhs->pt.y)
                {
                    if(*Camera_RotY > -90)
                    {
                        *Camera_PosZ += 44;
                        *Camera_RotY -= (double)2.42;
                    }
                }

                MouseX = mhs->pt.x;
                MouseY = mhs->pt.y;

                *Camera_ClipX  = 1190 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_ClipY  = 2400 + (abs(*Camera_PosZ - 150) * 3) + 4000;
                *Camera_GlClip = 2300 + (abs(*Camera_PosZ - 150) * 3) + 4000;
            }
        }
    }
}
return CallNextHookEx(MouseHook, code, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:20:45.613

该修复程序解决了问题：http:
[//support.microsoft.com/kb/2752274/en-us](http://support.microsoft.com/kb/2752274/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:45:12.950

从文档中您可以阅读：

mouseData 类型：DWORD 如果消息是 WM_MOUSEWHEEL，则此成员的 HIWORD 是车轮增量。LOWORD 未定义且保留。正值表示滚轮向前旋转，远离用户；负值表示轮子向后旋转，朝向用户。一轮点击定义为 WHEEL_DELTA，即 120。

所以我想如果你使用 HIWORD(mhs->mouseData) 可能会更好。另请注意，结果是无符号的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T20:07:42.073

我通过在 WM_MOUSEWHEEL 事件中测试非零来解决这个问题......然后测试是否为“120”......

```
WM_MOUSEWHEEL:
if(HIWORD(wParam) == 120)
{
//Do Code for forward
}
else
{ 
//Do Code for reverse
} 
```

# wordpress - 一个wordpress循环中的两列布局，有什么想法吗？

> ID：13508413
> 
> 赞同：1
> 
> 时间：2012-11-22T08:18:35.050
> 
> 标签：wordpress, loops, wordpress-theming, jquery-masonry, two-columns

我的客户想要这样的布局[（单击此处）](http://i.stack.imgur.com/9CkXz.jpg)，但我尝试了很多想法，但无法得到结果。

我正在使用 wordpress 按日期获取帖子（这是一个循环），我的主题也是使用这个[jQuery Masonry 库](http://masonry.desandro.com/ "jQuery砌体库")来获取两列布局（如果有必要我可以禁用它）。

所以我只有两个作者，现在我需要将每个作者的帖子放在两个不同的列中。在第一列中应该有 Jack 的帖子（例如），在第二列中应该有 Kate 的帖子（例如）。

但也会有与两列相交的帖子。

循环应该只按日期给出帖子，所以这些帖子应该以某种方式找到它们的位置。

这就是我的想法：我可以为 Kate 的帖子创建一个类，用于编辑帖子的宽度（例如 359 像素），但 Jack 的帖子默认仍为 360 像素。如果我在砌体布局中指定每列的最小和最大宽度，理论上 - 我可以强制我的帖子获得不同的列（默认情况下，砌体将宽帖子放置在第一列）。但我找不到任何可以指定每个列宽的选项（masonry 库中的 columnWidth 设置所有列的宽度）。

关于如何指定每列宽度的任何想法？或者您对这种布局有其他想法？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:31:15.167

不完全确定 Masonry （刚开始使用[Isotope](http://isotope.metafizzy.co/)），但我会用 构建`query_posts`，除非你在特定的非存档页面上这样做，然后使用`WP_Query`. 下面的代码假设您所在的页面已经在查询 Jack 和 Kate 的帖子。

```
<div id="authorColumnsRow"> <!--/* clear:both */-->
    <div class="author-columns" id="JACK"> <!--/* .author-columns { float:left; width:45%; margin-right:2.5%; } */-->
    <?php query_posts('author='.$JACKSAUTHORID.'&posts_per_page=2'); while(have_posts()) : the_post(); 
     //do post stuff here, i.e. the_title(), the_permalink();
    endwhile; wp_reset_query(); ?>
    </div>
    <div class="author-columns" id="KATE">
    <?php query_posts('author='.$KATESSAUTHORID.'&posts_per_page=2'); while(have_posts()) : the_post(); 
     //do post stuff here, i.e. the_title(), the_permalink();
    endwhile; wp_reset_query(); ?>
    </div>
</div>
<div id="fullRow"> <!--/* clear:both */-->
<?php query_posts('offset=4'); //To avoid duplicates
while(have_posts()) : the_post();
     //Post stuff for both of them
endwhile; ?>
</div> 
```

希望有帮助。

# php - 无法读取贝宝状态

> ID：13508415
> 
> 赞同：2
> 
> 时间：2012-11-22T08:19:01.870
> 
> 标签：php, database, paypal

我正在尝试为我的网站集成贝宝。但我无法从贝宝获取响应状态。这是我的贝宝请求。

```
 <?php
    $paypal_url = 'https://www.sandbox.paypal.com/us/cgi-bin/webscr';
    $paypal_id = 'MY DEVELOPER ACC';//This is your seller id

    $cancel_url = 'http://xyz/index.php';
    $return_url = 'http://xyz/process_payment.php';

    $products = array();
    $products[] = array('id'=>$sub,'price'=>$price); 
      foreach($products as $product)
      {
         ?>

     <form id='payment_form' action='<?php echo $paypal_url ?>' method='post' name='payform' />
      <input type='hidden' name='business' value='<?php echo $paypal_id ?>' />
      <input type='hidden' name='cmd' value='_xclick' />
      <input type='hidden' name='amount' value='<?php echo $product['price'] ?>' />
      <input type='hidden' name='no_shipping' value='0' />
      <input type='hidden' name='item_name' value='<?php echo $product['name'] ?>' />
      <input type='hidden' name='item_number' value='<?php echo $product['id'] ?>' />
      <input type='hidden' name='invoice' value='WS-<?php echo $product['id'] ?>' />
      <input type='hidden' name='currency_code' value='USD' />
      <input type='hidden' name='cancel_return' value='<?php echo $cancel_url ?>' />
      <input type='hidden' name='return' value='<?php echo $return_url ?>' />
      <input type='image'src='https://www.sandbox.paypal.com/en_US/i/btn/btn_buynow_SM.gif'name='submit' style='display:{$display_button}' />
     </form>   
    </div>                     
   </div>
  <?php
  }
  ?> 
```

当响应来自贝宝时，我可以邮寄所有响应信息，但是当我尝试`echo`所有值并且无法更新我的数据库状态时看不到它。

这是我的流程代码

```
 <?php
    session_start();

    include('connection.php');
    $paypal_response = $_REQUEST;

    //Check if it is the response from PayPal
    if ( isset( $paypal_response ) ) {

      $tx = $paypal_response['tx'];//Transaction code
      $st = strtolower($paypal_response['payment_status']);//Payment status
      $amount = $paypal_response['mc_gross'];//Amount
      $cc = $paypal_response['mc_currency'];//Currency code
      $item_number = $paypal_response['item_number'];//Item number
      $invoice_id = $paypal_response['invoice'];

     $user_email = 'MY GMAIL ID';

     $site_name = 'MY WEBSITE NAME';
     $eol = "\r\n";
     $headers  = 'MIME-Version: 1.0' . $eol;
     $headers .= 'Content-type: text/html; charset=iso-8859-1' . $eol;
     $headers .= 'From:' . $site_name . ' <EMAIL ID>'. $eol;
     $headers .= 'Reply-To:' . $site_name . ' <EMAIL ID>' . $eol;
     $headers .= 'Return-Path:' . $site_name . ' <EMAIL ID>' . $eol;

     $eol = "\r\n<br />";
     $thanks_text = $eol.$eol.'Thanks!'. $eol;

     if($st == 'completed')
        {//Payment has been completed successfully
        //if payment success
        if(isset($_SESSION['email']) && ($_SESSION['price']) && ($_SESSION['sub']) && ($_SESSION['result']) )
            {
                    include('connection.php');
                    $email=$_SESSION['email'];
                    $_SESSION['email']=$email;
                    $price=$_SESSION['price'];
                    $_SESSION['price']=$price;
                    $sub=$_SESSION['sub'];
                    $result=$_SESSION['result'];
                    $time=date("y/m/d");
                    $qry="update user set coursestatus='completed', score='$result',timestamp='$time'  where courseno='$sub' and email='$email'";
                    $run_qry=mysql_query($qry);

                    if($run_qry)
                    {
                ?>
                 <script language="javascript" type="text/javascript">
            // Print a message
            alert('Thank you for your purchase! your Payment was successfull. Now You can print and download your certificate');
                // Redirect to some page of the site.
            window.location = 'course_completed.php';
                </script>
                <?php
                    }

                    else
                    {
                    echo mysql_error();
                    }
        }

    }

  //Send succes email to user   $email_tpl = 'Hello Buyer,' . $eol;  
 $email_tpl .= "We have received your payment of $amount $cc." . $eol; 
 $email_tpl .= "Your status is $st ." . $eol;   $email_tpl .= "Thanks
 for the purchase." . $eol;   $email_tpl .= $eol . $thanks_text;

   mail ($user_email, 'Payment Received', $email_tpl, $headers);
        }   ?> 
```

# android - 从 Activity 发出定期 URL 请求

> ID：13508418
> 
> 赞同：0
> 
> 时间：2012-11-22T08:19:09.370
> 
> 标签：android

我有一个定期发出请求的活动（每 15 秒一次以获取 json 数据馈送）。我传递给 AsyncTask 的请求因此不在主 UI 线程上。到目前为止，一切都很好。但是假设我请求提要并且需要 20 秒才能响应。在说 30 秒结束之前，我真的不想启动另一个线程。所以 ....

如果第一个尚未完成，有没有办法阻止 AsyncTask 运行？

还有一种方法可以将 AsyncTask 时间框化为不超过 30 秒吗？无视 Http 超时？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:32:08.567

您可以使用互斥变量来强制执行此操作。说，我们称变量为`update`。这将是一个具有初始值的布尔变量`true`。

在运行异步任务之前，检查 的值`update`，如果是`true`运行异步任务并设置`update`为`false`。

异步任务结束后，在`onPostExecute()`方法中，再次设置`update`为`true`。

因此，另一个异步任务在未完成时不会启动，从而确保排他性。

# tridion - Tridion 搜索不工作

> ID：13508423
> 
> 赞同：2
> 
> 时间：2012-11-22T08:19:40.260
> 
> 标签：tridion, tridion-2011

在从 Tridion 5.3 SP1 升级到 Tridion 2011 SP1 期间，我们已按照安装手册中的说明配置了搜索服务。

当我们尝试在整个内容中搜索“.aspx”字样时，它会出错。

```
(80040356) The remote server returned an error: (404) Not Found.Unable to get the list of search results.Error occured while processing the request: Not Found.
System.Net.HttpWebRequest.GetResponse()
Tridion.ContentManager.Search.SolrClient.ProcessResponse(HttpWebRequest,Boolean,Boolean,String&)
Tridion.ContentManager.Search.SolrClient.Post(String,String,String&)
Tridion.ContentManager.Search.SolrClient.Query(String,Int32,Nullable`1,String&)
Tridion.ContentManager.Search.SearchQueryEngine.GetSearchResultsFromSolr(SearchQueryData,Int32,Nullable`1)
Tridion.ContentManager.Search.SearchQueryEngine.GetSearchResultsFromSolr(SearchQueryData,Int32,Nullable`1)
Tridion.ContentManager.Search.SearchQueryEngine.GetSearchResults(SearchQueryData,Int32,Int32)
Tridion.ContentManager.Search.ComWrapper.SearchQueryEngineFacade.GetSearchResults(Int32,Int32)
SearchBLST.GetListData
SearchBLST.GetSearchResults
SearchBLST.GetSearchResultsEx
Search.GetSearchResultsEx 
```

我们如何解决问题？

```
 <configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
    <section name="tridionConfigSections" type="Tridion.Configuration.ConfigurationSections, Tridion.Common, Version=6.1.0.25, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
    <section name="tridion.common" type="Tridion.Configuration.CommonSettings, Tridion.Common, Version=6.1.0.25, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
    <section name="solrHost" type="Tridion.ContentManager.Search.SearchHost.Configuration.SolrHostConfiguration, TcmSearchHost, Version=6.1.0.996, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b"/>
  </configSections>
  <configProtectedData>
    <providers>
      <add name="TridionRsaProtectedConfigurationProvider" keyContainerName="TridionRsaKeyContainer" useMachineContainer="true" description="Uses RsaCryptoServiceProvider to encrypt and decrypt" type="System.Configuration.RsaProtectedConfigurationProvider, 
           System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    </providers>
  </configProtectedData>
  <tridionConfigSections>
    <sections>
      <clear/>
      <add/>
      <add name="loggingConfiguration"/>
    </sections>
  </tridionConfigSections>
  <tridion.common>
    <tracing enabled="false">
      <parameterValueTruncation default="50">
        <parameterTypes>
          <clear/>
          <!-- Do not remove or change the settings for type System.Data.IDataRecord -->
          <add type="System.Data.IDataRecord" assembly="System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" maxLength="0"/>
        </parameterTypes>
      </parameterValueTruncation>
    </tracing>
  </tridion.common>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="false" defaultCategory="General" logWarningsWhenNoCategoriesMatch="false">
    <listeners>
      <add name="Tridion Console Trace Listener" formatter="Trace Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.CustomTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Tridion.Logging.TridionConsoleTraceListener, Tridion.Logging, Version=6.1.0.25, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b" initializeData=""/>
      <add name="Tridion Debug Trace Listener" formatter="Trace Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.CustomTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Tridion.Logging.TridionDebugTraceListener, Tridion.Logging, Version=6.1.0.25, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b" initializeData=""/>
      <add name="Tridion Event Log" EventLog="Tridion" formatter="Event Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.CustomTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Tridion.Logging.TridionEventLogTraceListener, Tridion.Logging, Version=6.1.0.25, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b" initializeData=""/>
      <add name="Log File" formatter="Trace Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" fileName="D:\Tridion\log\TcmSearchHost.log"/>
      <add name="Trace File" formatter="Trace Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" fileName="D:\Tridion\log\TcmSearchHost.trace.log"/>
    </listeners>
    <formatters>
      <add name="Log Text Formatter" template="{timestamp} &lt;{win32ThreadId}&gt; {message}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
      <add name="Trace Text Formatter" template="{timestamp(HH:mm:ss.ffff)} &lt;{win32ThreadId}&gt; {message}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
      <add name="Event Text Formatter" template="{message}

Component: {keyvalue(component)}
Errorcode: {keyvalue(errorcode)}
User: {keyvalue(username)}

{keyvalue(stacktrace)}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53"/>
    </formatters>
    <categorySources>
      <add switchValue="All" name="Tridion.Logging.LoggingCategory.Tracing">
        <listeners>
          <add name="Trace File"/>
        </listeners>
      </add>
      <add switchValue="All" name="Tridion.ContentManager.Search.SearchHost.LogCategory">
        <listeners>
          <!--add name="Tridion Console Trace Listener"/-->
        </listeners>
      </add>
      <add switchValue="All" name="General"/>
    </categorySources>
    <specialSources>
      <allEvents switchValue="Information" name="All Events">
        <listeners>
          <add name="Tridion Event Log"/>
        </listeners>
      </allEvents>
      <notProcessed switchValue="All" name="Unprocessed Category"/>
      <errors switchValue="All" name="Logging Errors &amp; Warnings"/>
    </specialSources>
  </loggingConfiguration>
  <!--To configure this Solr Instance as Master enable this solrHost xml node and disbale the other solrHost xml node-->
  <!--<solrHost heartbeatTimeout="300" solrHome="%TRIDION_CM_HOME%\Libraries\solr-home" solrDataDir="%TRIDION_CM_HOME%\Search\solr-data" solrLogDir="%TRIDION_CM_HOME%\Log" jvmOptions="-Xmx768m -Xms768m -XX:MaxDirectMemorySize=1024m -Dfile.encoding=UTF-8 -Djava.security.auth.login.config=conf/jaaslogin.conf -Djava.security.auth.policy=conf/jaas.policy -Dlog4j.configuration=file:conf\log4j.properties -Djava.class.path=start.jar;lib\* -Duser.language=en -Duser.country=US -Denable.master=true" jvmFilePath="">-->
  <!--To configure this Solr Instance as slave enable this solrHost xml node and disbale the other solrHost xml node. Set the -Dmaster.url, -Dmaster.authUser="MASTER_SOLR_INSTANCE_USER_NAME" and -Dmaster.authPassword-->
  <!--<solrHost heartbeatTimeout="300" solrHome="%TRIDION_CM_HOME%\Libraries\solr-home" solrDataDir="%TRIDION_CM_HOME%\Search\solr-data" solrLogDir="%TRIDION_CM_HOME%\Log" jvmOptions="-Xmx768m -Xms768m -XX:MaxDirectMemorySize=1024m -Dfile.encoding=UTF-8 -Djava.security.auth.login.config=conf/jaaslogin.conf -Djava.security.auth.policy=conf/jaas.policy -Dlog4j.configuration=file:conf\log4j.properties -Djava.class.path=start.jar;lib\* -Duser.language=en -Duser.country=US -Denable.slave=true -Dmaster.url=MASTER_SOLR_INSTANCE_URL -Dmaster.authUser=MASTER_SOLR_INSTANCE_USER_NAME -Dmaster.authPassword=MASTER_SOLR_INSTANCE_PASSWORD" jvmFilePath="">-->
  <solrHost heartbeatTimeout="300" jvmOptions="-Xmx768m -Xms768m -XX:MaxDirectMemorySize=1024m -Dfile.encoding=UTF-8 -Djava.security.auth.login.config=conf/jaaslogin.conf -Djava.security.auth.policy=conf/jaas.policy -Dlog4j.configuration=file:conf\log4j.properties -Djava.class.path=start.jar;lib\* -Duser.language=en -Duser.country=US" jvmFilePath="" solrHome="D:\Tridion\solr-home\" solrDataDir="D:\Tridion\solr-data\" solrLogDir="D:\Tridion\log\">
    <jetty port="8983" stopControlKey="#SdlTridionJettySolrKey#" stopControlPort="8079" mainClassName="org/mortbay/start/Main" jettyConfigurationArguments="conf\jetty-jmx.xml conf\jetty.xml conf\jetty-logging.xml" home="D:\Tridion\solr-jetty\" tempDir="C:\Windows\TEMP\" logDirectory="D:\Tridion\log\"/>
  </solrHost>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
  <runtime>
    <!--Enable Server GC mode for better performance in CLR 4.0\. Note that this may lead to memory issues in CLR 2.0.-->
    <gcServer enabled="true"/>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:15:34.430

要对搜索进行故障排除，我首先会尝试使用不同的搜索词进行搜索，看看它们是否都返回相同的结果（在你的情况下是一个错误）。

接下来是检查`Tridion Content Manager Search Host`服务和`Tridion Content Manager Search Indexer`服务是否正在运行。如果是，请查看重新启动它们是否会改变情况。

当我的`Tridion Content Manager Search Host`服务停止时，我得到一个不同的错误，表明无法建立连接。所以我的想法是配置错误（其中提到的 404 让我想知道 SOLR 是否安装正确）。检查 MMC 管理单元中的设置，并检查（如提到的@robrtc）是否可以按照[升级手册中的说明运行重新索引](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_362FC04056E04C28B60446031B93A078)

# php - header() 错误未在 php 中显示

> ID：13508426
> 
> 赞同：0
> 
> 时间：2012-11-22T08:19:47.110
> 
> 标签：php, header, error-reporting

我写了一个 PHP 程序，我使用`session_start()`和`header()`函数，我知道在向客户端发送任何东西之前我应该​​使用这个函数。没关系，但是为了测试，我`echo "test";`在使用 header() 之前向客户端发送了一条测试消息，但我没有收到任何错误，并且 header 函数可以正常工作！

此时在以前的 PHP 版本中，我会收到如下消息：

```
Warning: Cannot modify header information - headers already sent by (output started at /some/file.php:22) in /some/file.php on line 60 
```

我想知道为什么我没有收到任何错误消息？！

我的 php 版本是 5.3.1 并且`error_reporting`在`E_ALL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:28:58.037

您看不到错误，因为
a. 输出缓冲开启
b。服务器会忽略您的 error_reporting 函数，因为其他东西会指示它以其他方式运行`phpinfo();`并查看它在那里所说的 about`output buffering`和 about `error_reporting`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:55:20.447

这可能是因为您写入了一个输出缓冲区（ob_start），在您显式刷新缓冲区（ob_flush 或 ob_end_*）或脚本结束之前，它实际上不会向客户端返回任何内容。

在您开始编写 HTTP 响应的正文部分后，您无法发送标头这一事实不是 php，而是 HTTP 协议限制，因此这也不能是特定于版本的。

Zend Framework 等许多框架都使用输出缓冲区，因此开发人员无需关心顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:45:23.787

我发现了问题，我没有使用任何FrameWork。

问题是`error_reporting('E_ALL');`

我在我的第一个程序上编写了这段代码，所以 PHP 没有返回任何错误！我删除了这一行，我得到了错误！

这是在开玩笑，因为这一行对 PHP 说要显示所有错误！我不知道为什么 PHP 不显示任何错误。

# php - php：从 cp1251 转换为 utf8

> ID：13508429
> 
> 赞同：4
> 
> 时间：2012-11-22T08:20:18.733
> 
> 标签：php, utf-8, preg-replace, iconv, cp1251

我在将字符串从 cp1251 转换为 utf8 时遇到问题...

我需要从数据库中获取一些名称，这些名称在 cp1251 中（我不是创建该数据库的人，所以我无法编辑它，但我确定这些名称是 cp1251）...

数据库中的名称是这样的 - “Р?РЅС,РµСЂРЅРµС, РІ С†РёС„СЂР°С...”我使用这样的 iconv 函数将其转换为 utf8：

> iconv("UTF-8", "CP1251//忽略", $name)

我在结果中得到的是 - “�?нтернет в цифрах”（它是俄语），但前两个符号不正确......它应该是“Интернет в цифрах”......

所以我要做的最后一件事是以某种方式改变这两个符号“?” 到俄语字母“И”...我真的不知道该怎么做...我尝试使用 preg_replace，但它不起作用...或者我没有正确使用它。

对于俄罗斯的信件，我很抱歉，如果不展示它们，真的很难解释我需要什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T23:04:21.247

第一个字母不正确，因为[CP1251](http://en.wikipedia.org/wiki/Windows-1251)`0x98`中没有使用存储 И（准确地说）的 UTF-8 编码所需的一个字节。如果数据库已用问号替换了字节，则必须在使用之前将其更改回：`98``iconv`

```
$name = str_replace("\xD0\x3F", "\xD0\x98", $name);
echo iconv("UTF-8", "CP1251//IGNORE", $name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-24T13:20:28.307

用这个：

```
mb_convert_encoding($model->text, 'cp1252', 'utf8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:25:27.677

尝试这个：

```
function cp1251_to_utf8($s){
           $c209 = chr(209); $c208 = chr(208); $c129 = chr(129);
           for($i=0; $i<strlen($s); $i++)    {
               $c=ord($s[$i]);
               if ($c>=192 and $c<=239) $t.=$c208.chr($c-48);
               elseif ($c>239) $t.=$c209.chr($c-112);
               elseif ($c==184) $t.=$c209.$c209;
               elseif ($c==168)    $t.=$c208.$c129;
               else $t.=$s[$i];
           }
           return $t;
       } 
```

# openlayers - 无法注册 openlayers 标记

> ID：13508431
> 
> 赞同：1
> 
> 时间：2012-11-22T08:20:31.790
> 
> 标签：openlayers, mapstraction

我将**Openlayers**与**Mapstraction v1** (mapstraction.js) 一起使用，但我无法注册标记。标记根本不响应事件。该功能在这里，任何帮助将不胜感激。

```
//Add marker manager for specified zoom level
function addmmangerforzoom(zoomlevel) {
try {

    nocache_urladdon = "&nocache=" + new Date().getTime();
    geturl = baseurl + "&t=markerdata&unit=" +  currtrackerunit + "&date=" + currdate + "&zoomlevel=" + zoomlevel + nocache_urladdon;
    var loader = new net.ContentLoader(geturl, function() {
        eval("var jsondata = " + this.req.responseText);

        //Go through lat/lon cords
        var gmarkers = [];
        var i = 0;
        var totalicon = jsondata["data"].length;
        for (var markerarr in jsondata["data"]) {

            //Choose icon
            var icon = chooseicon("archive", i, jsondata["data"][markerarr][3], totalicon);

            //Create point
            var point = new LatLonPoint(jsondata["data"][markerarr][1], jsondata["data"][markerarr][2]);

            //Create marker
            var marker = new Marker(point);

            //Set zoom level to show this marker
            marker.setAttribute("zoomlevel", zoomlevel);

            //Set marker icon
            if (mapstraction.api == "openlayers") {
                //Mapstraction seems to have a bug, openlayers required negative anchor position
                var iconanchor = [
                    -icon["iconanchor"][0],
                    -icon["iconanchor"][1]
                ];
                marker.setIcon(icon["image"], icon["iconsize"], iconanchor);
            } else {
                marker.setIcon(icon["image"], icon["iconsize"], icon["iconanchor"]);
            }

            marker.setShadowIcon(icon["image"], icon["iconsize"]);

            //Add marker to map
            mapstraction.addMarker(marker);

            if (mapstraction.api == "openlayers") {
                marker.proprietary_marker.mid = jsondata["data"][markerarr][0];
                marker.proprietary_marker.Lon = jsondata["data"][markerarr][2];
                marker.proprietary_marker.Lat = jsondata["data"][markerarr][1];
                marker.proprietary_marker.events.register("mousedown", marker.proprietary_marker, openlayersmarkerclicked);
            }

            i++;

        }

        //Add to list of marker managers allready created
        markermng_zoomlevel.push(zoomlevel);

        //Show markers only for specifed zoom level
        markerszoomlevel(zoomlevel);

    });

} 

} 
```

# android - 两个按钮使用相同的背景图片

> ID：13508436
> 
> 赞同：0
> 
> 时间：2012-11-22T08:20:38.993
> 
> 标签：android, button

> **可能重复：**
> [我有两个按钮：“btn1，btn2”，当我更改 btn1 alpha 的背景时，btn2 会随机变化](https://stackoverflow.com/questions/13507768/i-have-two-buttonsbtn1-btn2-the-btn2-will-randomly-change-when-i-change-backg)

在我的应用程序中，我有两个按钮（btn1 和 btn2）使用相同的背景图像（pic1），当我更改 btn1 的背景透明时。btn2 的背景偶尔会发生变化，而且是随机的。这很奇怪。谁能帮我找到问题？谢谢。

这是更改背景的代码。`OnTouch`当将一个按钮的背景更改为半透明时，另一个会受到影响。

```
TextView tv = (TextView) v;
int color = tv.getCurrentTextColor();
int r = (color) & 0xFF;
int g = (color >> 8) & 0xFF;
int b = (color >> 16) & 0xFF;
int a = (color >> 24) & 0xFF;
tv.setTextColor(Color.argb(50, r, g, b)); 
```

如何避免它们相互影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:57:33.280

你究竟是如何设置透明度的？

也许我理解错误的问题，但这里是：

android中相同图像资源的drawable共享状态以进行优化。这意味着，当您更改一个可绘制对象的 alpha 时，它会更改共享相同状态（指向同一资源）的所有可绘制对象的 alpha。为避免此类行为，您可以在可绘制对象上调用 .mutate() 方法以将此可绘制对象状态与其他状态分开。

因此，如果尝试执行 .getBackground().setAlpha()，则应改为执行 .getBackground().mutate().setAlpha(alpha)。（请注意，每次调用 mutate() 不会对性能造成太大影响（微不足道的开销），因为一旦 drawable 变得可变， mutate() 方法什么也不做）

# ios - 连接的 IBOutlet 组件为空？

> ID：13508438
> 
> 赞同：0
> 
> 时间：2012-11-22T08:20:42.253
> 
> 标签：ios, xcode, interface-builder

我有以下带有以下xib的代码：

```
@property (nonatomic, retain) IBOutlet UITableViewCell *cellLoadMore; 
```

![在此处输入图像描述](../Images/67b673034ffb0b7a61181eb1e311fa27.png)

当我尝试 NSLog cellLoadMore 时，它​​返回 null，但是，当我尝试 NSLog 视图时，它具有价值。cellLoadMore 返回 null 的问题可能是什么？

下面是我的代码：

```
- (void)viewDidLoad{
  [super viewDidLoad];

  NSLog(@"cell load more %@", cellLoadMore_);
  NSLog(@"view %@", self.view);
} 
```

控制台打印：

```
cell load more (null)
view <UITableView: 0x1284200; frame = (0 20; 320 460); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0xa393b0>; contentOffset: {0, 0}> 
```

**注意：我的类是 UITableView 的子类。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:30:59.820

我认为这就是正在发生的事情。您正在创建一个属性和一个实例变量，但您没有正确合成该属性。默认情况下，在 Xcode 4.4+ 上，该属性将被合成为`_cellLoadMore`而不是`cellLoadMore_`. 在旧版本上，如果您简单地使用，`@synthesize cellLoadMore`那么变量将为`cellLoadMore`. 所以基本上，如果你没有一行写着`@synthesize cellLoadMore = cellLoadMore_`，那么你有两个不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:31:34.320

在加载单元格之前，您可能正在“记录”。单元格将在第一次*真正*使用时加载（谷歌为“延迟加载”）。如果您访问单元格的视图，它*确实*被使用并因此被真正加载。您可以在此之后记录视图和单元格，它不应再为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:54:57.070

我曾经遇到过这个问题，并设法通过将我的控制器从 UITableViewController 的子类更改为使用 UITableview 委托的 UIViewController 来解决它。不过，这很烦人。

# actionscript-3 - Starling AS3 IOS 闪屏

> ID：13508440
> 
> 赞同：3
> 
> 时间：2012-11-22T08:20:47.993
> 
> 标签：actionscript-3, starling-framework

我在 AS3 和 Starling 中开发了一个应用程序来移植到 IOS。我已经更新了 Default.png 图像，效果很好，但是我的应用程序需要一段时间才能加载，并且黑屏显示大约 3-4 秒。

我到处寻找解决方案，但找不到任何可行的方法。有人有可行的解决方案吗？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:06:46.833

我不确定目前是否有更简洁的解决方案，但我所做的是将默认屏幕的位图添加到本机 flash 阶段。然后当 Starling 准备好时，我删除位图。

所以在实例化 Starling 之前，将位图图像添加到舞台（这将是 Flash 舞台）

```
public static var _splash:Bitmap;
//load or embed your bitmap//
addChild(_splash); 
```

然后实例化并启动 Starling。例如

```
myStarling = new Starling(Main, stage, null, null, Context3DRenderMode.AUTO, Context3DProfile.BASELINE);
myStarling.stage3D.addEventListener(starling.events.Event.CONTEXT3D_CREATE, function(e:flash.events.Event):void {
// Starling is ready!
myStarling.start();
}); 
```

在您的 Starling 根类（在本例中为 Main）中，使用 ADDED_TO_STAGE 侦听器，当它被触发时，删除位图。

```
public function Main() {    
addEventListener(starling.events.Event.ADDED_TO_STAGE, onAdded);
}

private function onAdded ( e:starling.events.Event ):void {
StartUp._splash.parent.removeChild(StartUp._splash);
StartUp._splash = null;
} 
```

在上面的示例中，根文档类称为“StartUp”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:43:08.847

如[文档](http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b2-48bca492124b39ac5e2-7fff.html)所述，在 iOS 中使用 Default.png 作为初始屏幕。

# wordpress - 您真的使用所有这些 WP 主题选项吗？我不这么认为

> ID：13508442
> 
> 赞同：2
> 
> 时间：2012-11-22T08:21:00.217
> 
> 标签：wordpress, wordpress-theming, usability

自从我开始考虑创建一个 WP 主题框架后端以来，已经有好几天了。使用 wordpress 有一段时间，我研究了很多来自“wp 主题俱乐部”及其后端的主题。所有设置部分都组织在垂直选项卡中，仅此而已。同样的事情一次又一次。我认为 90% 的买家（客户）永远不会使用这些选项。我是对的还是这只是我的想法？

我应该使用相同的旧/booooooring 风格创建主题后端，还是更好地尝试跳出框框思考并创建一些新的、直观的和创新的？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:43:08.607

即使 90% 的用户不想自定义主题，您也会留下 10% 的用户想要自定义主题。

我建议您实现两件事来让您的用户自定义事物。

## 主题定制器

从 3.4 开始就有了主题定制器。它已经在 21 和 22 起作用了。
如果您还没有，请看一下它，它对用户来说非常容易使用并且可以扩展。

阅读更多：

*   [http://codex.wordpress.org/Theme_Customization_API](http://codex.wordpress.org/Theme_Customization_API)
*   [http://ottopress.com/2012/making-a-custom-control-for-the-theme-customizer/](http://ottopress.com/2012/making-a-custom-control-for-the-theme-customizer/)
*   [http://wp.tutsplus.com/tutorials/theme-development/digging-into-the-theme-customizer-overview/](http://wp.tutsplus.com/tutorials/theme-development/digging-into-the-theme-customizer-overview/)

## 操作和过滤器

你可能用过`add_action()`和`add_filter()`以前。您可以将自己的过滤器添加到您的主题中，以便更高级的用户可以修改内容。它比选择它花费更少的精力，同时保持主题易于修改（对于知道如何编码的用户）

查看一些更广泛的主题，它们是完整的[`do_action()`](http://codex.wordpress.org/Function_Reference/do_action)并且 [`apply_filters()`](http://codex.wordpress.org/Function_Reference/apply_filters).

一个例子。在开始循环之前，您可以添加一个`do_action('before_content')`. 现在用户可以添加一个`add_action('before_content', 'add_breadcrumbs_callback_fnc');`. 现在您的主题将执行该`add_breadcrumbs_callback_fnc`功能，以便用户无需编辑您的主题即可添加面包屑。

阅读更多：

*   [http://themeshaper.com/2009/05/03/filters-wordpress-child-themes/](http://themeshaper.com/2009/05/03/filters-wordpress-child-themes/)
*   [http://wp.tutsplus.com/tutorials/the-beginners-guide-to-wordpress-actions-and-filters/](http://wp.tutsplus.com/tutorials/the-beginners-guide-to-wordpress-actions-and-filters/)

尝试为每个主题引入一组默认挂钩：

*   [http://literalbarrage.org/blog/2012/06/29/wordpress-theme-hook-alliance/](http://literalbarrage.org/blog/2012/06/29/wordpress-theme-hook-alliance/)
*   [https://github.com/zamoose/themehookalliance](https://github.com/zamoose/themehookalliance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:27:32.023

我不一定认为这个问题是相互排斥的。

有简单需求的用户可能想要简单，直到需要选项。对开放式问题的广泛而模棱两可的答案。

**查看 wp-svbtle 主题：[https ://github.com/gravityonmars/wp-svbtle](https://github.com/gravityonmars/wp-svbtle)**

他做了一个单独的归结后端。

# java - Openfire 崩溃并出现 Java 错误

> ID：13508444
> 
> 赞同：0
> 
> 时间：2012-11-22T08:21:11.413
> 
> 标签：java, linux, nginx, chat, openfire

我在我的服务器上运行一个基于 openfire 的聊天系统，但是确实遇到了很多与 openfire java 环境相关的崩溃，我已经将 java VM 内存增加到 512MB，但是当服务器负载超过时它仍然崩溃，

我没有很多用户，一次只有 20,30 个，具有非常强大的 8 核 cpu，32 GB 内存

我正在运行 openfire 3.71。我必须重新启动整个服务器，因为重新启动 openfire 根本无法解决问题。

我在java中得到的错误是

```
java.lang.ExceptionInInitializerError
    at org.jivesoftware.admin.LoginLimitManager.getInstance(LoginLimitManager.java:48)
    at org.jivesoftware.openfire.admin.login_jsp._jspService(login_jsp.java:143)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:530)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1216)
    at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
    at org.jivesoftware.util.LocaleFilter.doFilter(LocaleFilter.java:74)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
    at org.jivesoftware.util.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:50)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
    at org.jivesoftware.admin.PluginFilter.doFilter(PluginFilter.java:78)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
    at org.jivesoftware.admin.AuthCheckFilter.doFilter(AuthCheckFilter.java:164)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:425)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:494)
    at org.eclipse.jetty.server.session.SessionHandler.handle(SessionHandler.java:182)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:933)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:362)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:867)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:245)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113)
    at org.eclipse.jetty.server.Server.handle(Server.java:334)
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:559)
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1007)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:747)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:209)
    at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:406)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:462)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at org.jivesoftware.util.TaskEngine.scheduleAtFixedRate(TaskEngine.java:228)
    at org.jivesoftware.admin.LoginLimitManager.(LoginLimitManager.java:83)
    at org.jivesoftware.admin.LoginLimitManager.(LoginLimitManager.java:33)
    at org.jivesoftware.admin.LoginLimitManager$LoginLimitManagerContainer.(LoginLimitManager.java:39)
    ... 36 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:44:41.927

这个错误似乎与内存不足没有直接关系——通常 Java 中的内存错误是[`OutOfMemoryError`](http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html)错误或指的是永久代的有限空间等。

[`NullPointerException`](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)另一方面，异常几乎可以肯定是执行代码中的编程错误。由于在您的情况下，这似乎是在负载下发生的，因此我可以在黑暗中拍摄几张照片：

*   有一些有限的资源，例如线程池或事件队列，正在耗尽，使用它的代码不会检查该条件。

*   存在竞争条件，其中某些部分代码遇到未初始化的结构，这些结构通常由另一个线程在较轻的负载下初始化。

*   有一些时间到达，返回`null`然后没有正确处理。

请注意，由于垃圾收集器或多或少频繁运行的影响，VM 可用的内存量会影响各种操作的时间*。*您可以使用诸如[VisualVM](http://visualvm.java.net/)之类的分析器来判断您的应用程序是否缺少内存。

# symfony - Symfony2 JMSJobQueueBundle 监听器实现

> ID：13508447
> 
> 赞同：2
> 
> 时间：2012-11-22T08:21:27.997
> 
> 标签：symfony

在实现 JobQueueEvent 时，我的监听器遇到了一些问题，这是我的监听器类

```
类 JobStateChangeListener {

    函数 onJobStateChange(StateChangeEvent $event) {

        if ($event->getJob()->isFinished()) {
            error_log('作业状态已完成');
        }

        if ($event->getJob()->isPending()) {
            error_log('作业状态为 isPending');
        }

        if ($event->getJob()->isFailed()) {
            error_log('作业状态为失败');
        }

        if ($event->getJob()->isRunning()) {
            error_log('作业状态为 isRunning');
        }

        if ($event->getJob()->isNew()) {
            error_log('作业状态为isNew');
        }
    }
}

```

这是我的 service.yml 用于添加监听器

```
服务：
    工作事件监听器：
      类：####\SupportBundle\Listener\JobStateChangeListener
      标签：
            - {名称：jms_job_queue.job_state_change，方法：onJobStateChange}

```

这是 JMSjobQueueBundle 调度事件的方式[https://github.com/schmittjoh/JMSJobQueueBundle/blob/master/Command/RunCommand.php#L182](https://github.com/schmittjoh/JMSJobQueueBundle/blob/master/Command/RunCommand.php#L182)

**更新**： ISSUE 是当我运行 app/console jms-job-queue:run my listener not error_log 写入 onJobStateChange func 时，这可能意味着没有在听。让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:40:49.800

因为 app/console 找不到 --jms-job-id，你需要更改你的 app/console 文件，只需替换 use Symfony\Bundle\FrameworkBundle\Console\Application；使用 JMS\JobQueueBundle\Console\Application；然后它会正常工作。

# javascript - Internet Explorer 10 Metro 中 F12 开发人员工具的替代品？

> ID：13508449
> 
> 赞同：9
> 
> 时间：2012-11-22T08:21:41.433
> 
> 标签：javascript, windows-8, internet-explorer-10

我正在 Windows 8 上测试我们的 JavaScript 繁重的 Web 应用程序。看起来，桌面上的 IE10 工作得很好。但是，IE10 的 Metro UI 版本似乎破坏了我们的应用程序。

我的问题是：有没有办法在 IE10 Metro 上调试 Web 应用程序？

据我所知，F12 开发人员工具不可用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T22:16:56.980

以下是微软对调试页面的建议，就好像它们在 Metro IE 中运行一样：

> 只有在桌面版 Internet Explorer 中浏览网站时，才能访问 F12 开发人员工具。如果您在 Windows UI 中的 Internet Explorer 中浏览，您可以通过切换到桌面视图（从页面工具，选择桌面上的视图）并从那里打开 F12 工具来调试网站。在桌面上的 Windows UI 中模拟 Internet Explorer：
> 
> *   启用 ActiveX 过滤（从工具菜单中，选择 ActiveX 过滤）
> *   进入全屏模式 (F11)
> *   启用增强保护模式（列在 Internet 选项中高级选项卡上的安全性下）

可在[http://msdn.microsoft.com/en-us/library/ie/hh771832%28v=vs.85%29.aspx找到](http://msdn.microsoft.com/en-us/library/ie/hh771832%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T11:57:23.077

IE10 Desktop 和 IE10 中的渲染/JS 引擎应该是相同的。您的应用程序是否使用任何加载项（例如剪切和粘贴支持？）据我所知，使用 IE10 桌面并关闭插件支持应该与在“非桌面 IE10”中运行您的应用程序相同

至于调试，在IE10桌面模式下是无法获得工具运行的。我经常使用 fiddler 来检查流量，但您需要在机器上启用环回才能让 Metro IE 运行。

您可以添加 firebug lite 来获得基本的开发工具。

# android - 在 ListFragment 的 ListView 空视图中添加按钮的单击事件

> ID：13508452
> 
> 赞同：0
> 
> 时间：2012-11-22T08:22:02.277
> 
> 标签：android, android-listfragment, empty-list

我对 ListFragment 中的 ListView 有问题。当列表适配器没有项目时，我想在列表中显示空视图。这个空视图有按钮。所以我需要在我的 ListFragment 中为该按钮添加单击事件侦听器

我的观点如下。

![在此处输入图像描述](../Images/803a078688de3ed18b53d4f4395f8768.png)

请帮助我。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:33:00.393

为了让 ListFragment 的空视图具有更复杂的布局，您需要重写 onCreateView() 方法以加载具有“android:list”和“android:empty”视图的[自定义布局。](http://developer.android.com/reference/android/app/ListFragment.html)这将允许您指定所需的复杂空视图，并且在该方法中您可以访问 Button 视图以设置单击侦听器。

# zend-framework2 - ZfcUser - 检查每个路由的用户登录

> ID：13508454
> 
> 赞同：0
> 
> 时间：2012-11-22T08:22:11.117
> 
> 标签：zend-framework2, zfcuser

问题是：如何检查应用程序中每个路由的用户登录？

我已经考虑过创建一个具有检查功能的基本控制器的解决方案，然后每个其他控制器都将从这个控制器扩展。我将检查功能放在每个动作上。它应该可以工作，但是使用 Zend Framework 2 有什么更简洁的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:15:04.633

你可以看看下面的zf2模块。它取决于 ZfcUser 并且完全按照您的描述[https://github.com/bjyoungblood/BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize)。

基本上它引入了一个守卫（其中有几个供您选择：控制器守卫，路由守卫），它监听 MvcEvent::EVENT_ROUTE 事件并在触发事件时进行访问检查

# c# - 升级到 SignalR 1.0.0 alpha2 时未触发 OnConnected 任务

> ID：13508459
> 
> 赞同：4
> 
> 时间：2012-11-22T08:22:35.053
> 
> 标签：c#, asp.net, signalr

我最近刚刚尝试升级到 signalR 1.0.0 Alpha2。我浏览了 wiki，更改了我认为需要更改的内容，并确保程序集都加载了新文件。这是我的js：

```
$(function () {
    var Chat = $.connection.ChatHub;
    ...
    $.connection.hub.start(
    .done(function(){ alert("Now connected!"); })
    .fail(function(){ alert("Could not Connect!"); });
}); 
```

这是我的中心类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Microsoft.AspNet.SignalR.Hubs;
using MyProject.Domain.Abstract;
using Microsoft.AspNet.SignalR;
using System.Threading.Tasks;
using System.Diagnostics;
using System.Web.Security;
using MyProject.Domain.Entities;
using System.Web.Script.Serialization;
using System.Text.RegularExpressions;
using MyProject.Domain.Concrete;
using MyProject.Domain.Helpers;
using System.Web.Mvc;

namespace MyProject.Web.RealTime
{
    public class ChatMessage
    {
        public string ChatId { get; set; }
        public string Message { get; set; }
        public string FullName { get; set; }
        public string Time { get; set; }
        public string School { get; set; }
        public string Major { get; set; }
        public string ImageUrl { get; set; }
    }
   [HubName("ChatHub")]
    public class Chat : Hub
    {
        //Initialize Repoisotries 
        private IProfileRepository profileRepository;
        private ISiteDataRepository siteDataRepository;
        private IChatRepository chatRepository;
        private IOnlineUserRepository onlineUserRepository;
        private IRecentActivityRepository recentActivityRepository;

        MembershipUser MainUser = Membership.GetUser();
        UserProfile MainProfile;
        //In memory objects
        //public static Dictionary<Guid, List<string>> onlineUsers = new Dictionary<Guid, List<string>>();

        //Constructor Injection for profile repository and site data repository
        public Chat(IProfileRepository repo, ISiteDataRepository siteRepo, IChatRepository chatRepo, IOnlineUserRepository onlineUserRepo, IRecentActivityRepository recentActivityRepo)
        {            
            profileRepository = repo;
            siteDataRepository = siteRepo;
            chatRepository = chatRepo;
            onlineUserRepository = onlineUserRepo;
            MainProfile = profileRepository.GetProfile((Guid)MainUser.ProviderUserKey);
            recentActivityRepository = recentActivityRepo;
        }

        public override Task OnDisconnected()
        {

            disconnectUser();
            List<ContactItem> contacts = profileRepository.GetFollowedOnlineContacts(MainProfile.UserId);
            foreach (ContactItem ci in contacts)
            {
                Clients.Group(Convert.ToString(ci.ChatId)).onlineUserHandler(Convert.ToString(MainProfile.ChatId), false);
            }
            return base.OnDisconnected();
        }
        public override Task OnReconnected()
        {
            connectUser();
            List<ContactItem> contacts = profileRepository.GetFollowedOnlineContacts(MainProfile.UserId);
            foreach (ContactItem ci in contacts)
            {
                Clients.Group(Convert.ToString(ci.ChatId)).onlineUserHandler(Convert.ToString(ci.ChatId), true);
            }
            return base.OnReconnected();
        }
        public override Task OnConnected()
        {
            Debug.WriteLine("Connected``````````````````````````````````");
            connectUser();
            List<ContactItem> contacts = profileRepository.GetFollowedOnlineContacts(MainProfile.UserId);
            foreach (ContactItem ci in contacts)
            {
                Clients.Group(Convert.ToString(ci.ChatId)).onlineUserHandler(Convert.ToString(MainProfile.ChatId), true);
            }
            return base.OnConnected();
        }
        private void connectUser()
        {
            if (onlineUserRepository.ConnectUser(MainProfile.UserId, Context.ConnectionId))
            {
                Groups.Add(Context.ConnectionId, Convert.ToString(MainProfile.ChatId));
            }
        }
        private void disconnectUser()
        {
            onlineUserRepository.DisconnectUser(MainProfile.UserId, Context.ConnectionId);
            Groups.Remove(Context.ConnectionId, Convert.ToString(MainProfile.ChatId));
        }

    }
} 
```

在客户端，我收到警报说我已连接，但是当我运行调试并在“OnConnected”任务中放置一个断点时，它永远不会在那里中断或在我的集线器类中运行任何东西。我做错了什么？

这是我的新 SignalR 程序集：

![在此处输入图像描述](../Images/357d7ecbb8251c565e3cdc47229f27f8.png)

我曾经在 App_Start 文件夹中的 NinjectWebCommon.cs 文件中使用它，但是自从我升级后它给了我错误，所以我注释掉了，也可能是问题，但不确定因为 signalR.ninject 似乎没有工作或给出我一堆错误：

```
GlobalHost.DependencyResolver =  new NinjectDependencyResolver(kernel);
        GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new MyConnectionFactory());

    RouteTable.Routes.MapHubs(new NinjectDependencyResolver(kernel)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:39:37.863

您应该在开始对方法的集线器引用之前添加 JavaScript：

```
$.connection.yourhub.client.connected = function () { };
$.connection.yourhub.client.disconnected = function () { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:42:33.357

问题是因为我使用的是 NinjectDependancyResolver 的未更新版本，我不确定他们是否更新了它。事实上，我已经停止在我的集线器类中使用依赖注入，因为我无法让它工作。

# android - Android Runnable 查找运行调用者

> ID：13508464
> 
> 赞同：-1
> 
> 时间：2012-11-22T08:23:14.500
> 
> 标签：android, multithreading, runnable

我继承了一个庞大而可怕的 Android 项目，它让我想起了[这篇文章](http://thejoysofcode.tumblr.com/post/35824954456/when-i-open-a-folder-that-contains-code-from-an-intern)。

在这个项目中，有一个神秘的 Activity 实现了 Runnable。运行函数失败，因为 Activity 未正确初始化。我的问题是我不知道 Runnable 实际运行在哪里。

如何找到调用此 Activity 的 Runnable 接口的点？断点似乎只是显示父线程调用 run() - 哇，惊喜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:26:43.543

> 我的问题是我不知道 Runnable 实际运行在哪里。

如果`Runnable`在 a 中使用`Thread`，则应该有`new Thread(someObject)`您尝试查找的代码。

构造函数需要 a `Runnable`，如果您`implements Runnnable`从类中删除该部分，则创建该部分的代码`Thread`现在不正确并导致编译器错误，该错误应该告诉您您要查找的内容。

如果有人`run`直接调用该方法，您可以重命名它，编译器会告诉您哪些地方调用了不存在的方法。或者

```
Exception e = new Exception("Debug");
e.fillInstackTrace();
e.printStackTrace(); 
```

是一种在代码中显示调用层次结构的快速方法，无需使用调试器或 Eclipse 等高级 IDE。有时，在方法中放入有问题的执行分支以查找导致该问题的原因有时会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:05:52.283

在项目中搜索Activity类名的引用...可能是某个类显式地创建了Activity的对象...

# bloomberg - 任何使用bloomberg逐个滴答数据的开源回测引擎？

> ID：13508470
> 
> 赞同：3
> 
> 时间：2012-11-22T08:23:30.557
> 
> 标签：bloomberg, algorithmic-trading

我要对指数期货进行回溯测试。我已经完成了 1 分钟 OHLC 数据的测试，结果还可以。此外，我想选择从 Bloomberg 下载的逐笔报价数据。

我浏览了互联网，发现有几个交易平台可用于此类功能，但彭博不在数据源提供商列表中。所以我认为这些不适合我的情况。

我想知道是否可以嵌入任何开源引擎来完成测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:02:22.310

我建议您从,和包开始`R`并检查，仅举几例。R 在包中还有一个基本的 API 调用函数。`quantmod``TTR``quantstrat``Rbbg`

如果您愿意投入工作，R 允许进行广泛的回测。

另外，还有一点需要注意。彭博并没有通过 API 提供太多的滴答数据。你可能会得到60d。除了少数非常专业的案例外，这对于稳健的统计回测来说是不够的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T12:09:04.713

您可以使用[AlgoQuant](http://numericalmethod.com/blog/algoquant/)下载 Bloomberg 的逐笔数据，然后对其进行回测。请参阅此博客文章： http: [//numericalmethod.com/blog/2012/12/21/bloomberg-tick-by-tick-data-download/](http://numericalmethod.com/blog/2012/12/21/bloomberg-tick-by-tick-data-download/)

# javascript - 带有 ID 的 jQuery 选择器的性能

> ID：13508472
> 
> 赞同：7
> 
> 时间：2012-11-22T08:23:41.230
> 
> 标签：javascript, jquery, performance, jquery-selectors

我知道在 jQuery 中如果我们使用`ID`来选择元素，它非常高效。我对这个选择器有疑问：

请考虑这 3 个选择器：

```
$('#MyElement')

$('#Mytbl #MyElement')

$('#Mytbl .MyClass') 
```

哪个更快，为什么？如何检查在 jQuery 中选择我的元素所用的时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T08:29:38.940

直接 ID 选择器*总是*最快的。

我根据您的问题创建了一个简单的测试用例...

[http://jsperf.com/selector-test-id-id-id-id-class](http://jsperf.com/selector-test-id-id-id-id-class)

选择嵌套 ID 是错误的，因为如果一个 ID 是唯一的（它*应该*是唯一的），那么它是否嵌套并不重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T08:27:32.043

第一个是最快的，因为它只有 1 个要查找的属性。然而，

```
document.getElementById("MyElement") 
```

不过，速度更快。它是原生 javascript，与 jQuery 不同，浏览器立即知道您想要做什么，而不必首先运行大量 jQuery 代码来确定您要查找的内容。

您可以使用[jsPerf](http://jsperf.com/)运行速度测试，以比较功能：[Test Case](http://jsperf.com/jquery-selectors-with-id)。结果：

```
$('#MyElement')
Ops/sec: 967,509
92% slower

$('#Mytbl #MyElement')
Ops/sec: 83,837
99% slower

$('#Mytbl .MyClass')
Ops/sec: 49,413
100% slower

document.getElementById("MyElement")
Ops/sec: 10,857,632
fastest 
```

不出所料，原生 getter 是最快的，其次是只有 1 个选择器的 jQuery getter，速度不到原生速度的 10%。带有 2 个参数的 jQuery getter 甚至无法接近原生代码的每秒操作数，尤其是类选择器，因为与 ID 相比，类通常应用于多个元素。（原生 ID 选择器在找到一个元素后停止搜索，我不确定 jQuery 是否也这样做。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T08:28:38.933

这是在一些 javascript 调用之间停止时间的方法

```
selectorTimes = [];
var start = new Date().getTime();
$('#MyElement')
selectorTimes.push(new Date().getTime()-start);

start = new Date().getTime()
$('#Mytbl #MyElement')
selectorTimes.push(new Date().getTime()-start);

start = new Date().getTime()
$('#Mytbl .MyClass')
selectorTimes.push(new Date().getTime()-start);

console.log(selectorTimes); 
```

我认为第二个选择器效率不高，如果你有一个 domid 直接选择这个：$('#MyElement')

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T08:28:19.540

这个给你。请参阅每个示例顶部的注释：

```
//fastest because it is just one id lookup: document.getElementById("MyElement") with no further processing.
$('#MyElement')
//a little slower. JQuery interprets selectors from right to left so it first looks up for #MyElement and then checks if it is hosted in #Mytbl
$('#Mytbl #MyElement')
//the slowest of all. JQuery interprets selectors from right to left so it first finds all elements with .MyClass as their class and then searches for those hosted in #Mytbl.
$('#Mytbl .MyClass') 
```

如果可以，请始终只使用 id（如第一个示例），但如果您必须将多个选择器和类链接在一起，请尝试将最严格的放在右侧。例如身份证。因为 JQuery 从右到左解释选择器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T08:30:37.687

几件事：

*   更多选择器 = 更慢的搜索。如果你可以用更少的谓词得到你想要的结果，那就这样做吧。
*   通过 ID 获取元素比通过类获取更快。getElementById 是 JavaScript 的一个核心函数，因为它被频繁使用而进行了大量优化。尽可能利用这一点。
*   空间选择器 (' ') 比子选择器 ('>') 成本更高。如果您可以使用子选择器，请这样做。

这些规则适用于 CSS，就像它们适用于 JavaScript 和 jQuery。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-22T09:45:11.250

此外，如果您需要嵌套选择器，使用 $().find().find() 会更快

[http://jsperf.com/selector-test-id-id-id-id-class/2](http://jsperf.com/selector-test-id-id-id-id-class/2)

```
$('#Mytbl .MyClass')
$('#Mytbl').find('.MyClass') 
```

后者快了大约 65%。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-22T08:31:59.963

显然第一个`$("#MyElement")`比其他更快 2.
访问具有其 id 的元素总是更快，但有时我们不得不在某个容器中找到一些元素。在这种情况下，我们更喜欢`.find()`或`.filter()`（取决于情况）。
选择器之间的区别取决于浏览器到浏览器。例如，如果您通过 IE 上的类访问它会比 FF 慢。使用类而不是 ID 访问元素时，FF 更快。

在您的第二个示例中，即，您在`$("#mytbl #MyElement")`这里找到合法但不合适的方式。由于您已经知道元素的 ID（假设您的页面上只有一个具有此 ID 的元素），因此最好使用. 将首先读取#mytbl 并遍历以在其下找到#MyElement，因此既耗时又慢。`#MyElement``#mytbl``$("#MyElement")``$("#mytbl #MyElement")`

要测试不同的情况，您可以编写小片段以在循环中读取/访问至少 10000 个元素，否则很难确定哪种方式更快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T08:27:52.430

最快的将是：

```
 $('#Mytbl', '#MytblContainer' ); 
```

因为在这种情况下，jquery 不必搜索整个 dom 树来查找“#Mytbl”。它只会在给定的范围内搜索。IE 它只会在 '#MytblContainer' 中搜索。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-22T08:28:31.440

我会说第一个是最快的，因为您只是在搜索一个 id。

和

```
$('#Mytbl .MyClass') 
```

是最慢的，因为您没有指定具有“MyClass”类的元素类型

# c - execv 未知路径使用

> ID：13508473
> 
> 赞同：0
> 
> 时间：2012-11-22T08:23:42.817
> 
> 标签：c, unix, exec

我必须执行一个路径未知的命令。我可以到达环境路径，但如何使用它们？例如，如果有 5 个不同的路径，我应该在 execv 中尝试哪一个？

/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

在数组中解析这些路径后，我该如何使用它们？我应该为每个人尝试 execv 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:29:03.953

您可以只使用`execvp`，它在执行的 shell 中搜索二进制文件`PATH`（参见[http://linux.about.com/library/cmd/blcmdl3_execv.htm](http://linux.about.com/library/cmd/blcmdl3_execv.htm)）。

如果这不是一个选项，您可能应该像`execvp`/ shell 那样做：查看一个接一个的路径（从左到右）并检查其中是否有一个具有给定名称的可执行文件。

# m4 - 什么是 M4 复合宏，例如 foreach？

> ID：13508474
> 
> 赞同：3
> 
> 时间：2012-11-22T08:23:42.857
> 
> 标签：m4

我想`m4`用来做一些节省类型的东西，所以肯定需要循环。当我阅读`m4`doc 时，在第 6 章中有`6.4`and `6.5`for 迭代。但看起来那`foreach`不是内置宏（复合？），我怎么能使用它？在示例中，他们`m4`使用`-I examples`选项和调用`include('foreach.m4')`，但此文件似乎不存在，错误如下：

```
cannot open `foreach.m4': No such file or directory 
```

任何帮助表示赞赏！

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:54:30.633

您必须使用完整路径作为参数`-I`（或相对路径，但必须指定目录）。请注意，examples 目录并不总是随同安装`m4`（RedHat 分发的 m4-1.4.1 rpm 不包括 examples 目录。）最简单的做法是解压缩 m4 tarball 并使用它。（例如，解压 tarball`/tmp`并运行`m4 -I/tmp/m4-1.4.11/examples`）

另请注意，这`-I`是 m4 的非标准选项，因此请确保您实际使用的`m4`是支持该参数的版本。（例如，`gnu-m4`）

# java - 审计表已删除记录

> ID：13508477
> 
> 赞同：1
> 
> 时间：2012-11-22T08:24:31.117
> 
> 标签：java, jpa, audit

使用

> 历史政策

和

> 描述符定制器

*从“主表”中删除*数据时，如何将记录插入“审计表”？

目前，我正在处理一个简单的用户表作为“主表”，详细信息如下：

A. Java 编码：

```
@MappedSuperclass
@EntityListeners(com.sfw.entity.TrackingListener.class)
public class BaseEntity implements Serializable,DescriptorCustomizer {
    @Override
    public void customize(ClassDescriptor descriptor) {
        String tblNm = descriptor.getTableName();
        String trckTblNm = tblNm.substring(0,tblNm.indexOf("_")) + "_TT";
        HistoryPolicy policy = new HistoryPolicy();
        policy.addHistoryTableName(tblNm,trckTblNm);
        policy.addStartFieldName("TRACK_START");
        policy.addEndFieldName("TRACK_END");
        descriptor.setHistoryPolicy(policy);
    }
} 
```

B. 审计表列

```
| cre_tms             | upd_tms             | upd_usr | version | usr_act 
| track_start         | track_end           | user_id | username 
```

**C.创建** 新用户时的样本数据

 **```
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 | demo2   |       1 | A       
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 |      12 | demo3 
```

**D.创建用户然后更新** 后的示例数据

 **```
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 | demo2   |       1 | A       
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 |      12 | demo3
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 | demo2   |       2 | U       
| 2012-11-22 13:33:23 | NULL                |      12 | demo3updated 
```

**E.创建、更新、删除** 用户后的示例数据

 **```
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 | demo2   |       1 | A       
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 |      12 | demo3
| 2012-11-22 13:28:08 | 2012-11-22 13:33:59 | demo2   |       2 | U       
| 2012-11-22 13:33:23 | 2012-11-22 13:33:59 |      12 | demo3updated 
```

F.审计表的**期望输出**

```
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 | demo2   |       1 | A       
| 2012-11-22 13:28:08 | 2012-11-22 13:33:23 |      12 | demo3
| 2012-11-22 13:28:08 | 2012-11-22 13:33:59 | demo2   |       2 | U       
| 2012-11-22 13:33:23 | 2012-11-22 13:33:59 |      12 | demo3updated
| 2012-11-22 13:28:08 | 2012-11-22 13:34:59 | demo2   |       3 | D       
| 2012-11-22 13:33:59 | 2012-11-22 13:34:59 |      12 | demo3updated 
```

当一条记录被删除时，它只更新 track_end 字段（点 E）
所需的输出是插入一个不同版本的记录（我为此使用 @Version）
对于 usr_act ，该值是从 xhtml 中的文本字段传递的

这可能吗？******

# sql - SQL - 匹配 5 个条件中的 3 个

> ID：13508479
> 
> 赞同：2
> 
> 时间：2012-11-22T08:24:36.313
> 
> 标签：sql, postgresql

是否可以使用 sql (postgres) 进行查询，以搜索与 5 个可能的 3 个条件匹配的条目？我现在无处可去，我被困住了。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T08:28:25.840

这是此问题的详细但直接的解决方案：

```
SELECT * FROM t
WHERE (CASE t.val WHEN :criteria1 THEN 1 ELSE 0 END +
       CASE t.val WHEN :criteria2 THEN 1 ELSE 0 END +
       CASE t.val WHEN :criteria3 THEN 1 ELSE 0 END +
       CASE t.val WHEN :criteria4 THEN 1 ELSE 0 END +
       CASE t.val WHEN :criteria5 THEN 1 ELSE 0 END) >= 3 
```

您还可以通过半连接非嵌套数组来做一些技巧：

```
SELECT * FROM t
WHERE (
  SELECT COUNT(*) 
  FROM UNNEST(ARRAY[:c1, :c2, :c3, :c4, :c5]) u(val)
  WHERE u.val = t.val
) >= 3 
```

或者通过半连接`VALUES(...)`表达式

```
SELECT * FROM t
WHERE (
  SELECT COUNT(*) 
  FROM (VALUES (1), (1), (2), (2), (2)) u(val)
  WHERE u.val = t.val
) >= 3 
```

这是一个工作示例，我已将其放在[SQL Fiddle](http://sqlfiddle.com/#!1/d41d8/585)上：

```
WITH t(val) AS (
  VALUES (1), (2), (4), (6)
)
SELECT * FROM t
WHERE (
  SELECT COUNT(*) 
  FROM (VALUES (1), (1), (2), (2), (2)) u(val)
  WHERE u.val = t.val
) >= 3 
```

以上将返回 2，因为它是唯一匹配至少三个条件的记录`(1, 1, 2, 2, 2)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T08:31:25.747

```
SELECT * FROM table 
WHERE IF(crit1, 1,0)
+ IF(crit2, 1,0)
+ IF(crit3, 1,0)
+ IF(crit4, 1,0)
+ IF(crit5, 1,0) >= 3 
```

[编辑] 根据下面的评论，这不是有效的 postgres。这就是它在 MySQL 中的完成方式，我只是假设它是标准的...... CASE 语句与原始问题更相关。

# visual-studio-2010 - 我可以将 Visual Studio 2010 与 Microsoft 测试管理器 2012 一起使用吗？

> ID：13508480
> 
> 赞同：0
> 
> 时间：2012-11-22T08:24:48.780
> 
> 标签：visual-studio-2010, microsoft-test-manager

目前我正在使用 Visual Studio 2010 Premium，我想购买 Microsoft Test Manager。我的问题是：我应该购买 Test Manager 2010 还是 2012？如果是这样，有什么风险？

考虑到这两个版本，我会从[2010 年](http://msdn.microsoft.com/en-us/library/dd380742%28v=VS.100%29.aspx)或[2012年开始获得支持的平台和配置吗？](http://msdn.microsoft.com/en-us/library/dd380742.aspx)（我是从动作记录的角度来问的）

提前谢谢你，如果这看起来像一个愚蠢的问题，我很抱歉，但我真的很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:39:16.607

是的你可以。不过，并非 MTM 2012 中的所有功能都已启用。

[http://msdn.microsoft.com/en-us/magazine/jj618301.aspx](http://msdn.microsoft.com/en-us/magazine/jj618301.aspx)

向下搜索“连接到 TFS 2010”。

您可能已经找到它，但这个答案可能对其他提出相同问题的人有好处。

# java - 使用循环引用不同的 editText ID

> ID：13508483
> 
> 赞同：0
> 
> 时间：2012-11-22T08:25:02.973
> 
> 标签：java, android, loops, while-loop, android-edittext

> **可能重复：**
> [循环通过editTexts来检查值](https://stackoverflow.com/questions/13505930/looping-through-edittexts-to-check-values)

我有一个包含大约 100 个编辑文本（15 行，10 列）的布局，所有这些都根据它们的行/列 ID 命名（例如 box0101、box0102 等）。

我有一个方法 clearBoard() 在单击“清除”按钮时调用（请参见下面的代码）。它旨在遍历所有框（box0101、box0102、box0103 等）并用“”替换内容 - 使它们为空白。

LogCat 中出现的错误说 java.lang.NoSuchFieldException: box0101 at java.lang.Class.getDeclaredField(Class.java:631) - 但在我的 xml 中肯定有一个 box0101 定义，我在此期间多次引用它代码没有问题。

有任何想法吗？

从 XML

```
 <EditText 
            android:gravity="center"
            android:layout_marginLeft="10dp"
            android:id="@+id/box0101"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:background="@drawable/boxoutlineone" />    
        <EditText 
            android:gravity="center"
            android:id="@+id/box0201"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:background="#000000" />   
        <EditText
            android:gravity="center" 
            android:id="@+id/box0301"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:background="#000000" />   
        <EditText 
            android:gravity="center"
            android:id="@+id/box0401"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:background="#000000" /> 
```

在活动中：

```
final EditText box0101 = (EditText)findViewById(R.id.box0101);
    final EditText box0201 = (EditText)findViewById(R.id.box0201);
    final EditText box0301 = (EditText)findViewById(R.id.box0301);
    final EditText box0401 = (EditText)findViewById(R.id.box0401);
    final EditText box0501 = (EditText)findViewById(R.id.box0501); 
```

ETC...

```
 public void clearBoard() {
    final int ROW_COUNT = 14;
    final int COL_COUNT = 9;
    final String ROWS[] = {"01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"};
    final String COLS[] = {"01","02","03","04","05","06","07","08","09","10"};

    for(int i=0; i<ROW_COUNT; i++) {
        for(int j=0; j<COL_COUNT; j++) {
            String a = ROWS[i];
            String b = COLS[j];
            int editTextId=getResId("box"+a+b,this,id.class);
            EditText et=(EditText)findViewById(editTextId);    
            et.setText("");
        }
    }
}

public static int getResId(String variableName, Context context, Class<?> c) {

    try {
        Field idField = c.getDeclaredField(variableName);
            return idField.getInt(idField);
        } catch (Exception e) {
            e.printStackTrace();
            return -1;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:16:01.143

我不知道你为什么决定使用`Field`类来获取`id`而不是更实用的[`Resources.getIdetifier`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
for(int i=0; i<ROW_COUNT; i++) {
    for(int j=0; j<COL_COUNT; j++) {
        String a = ROWS[i];
        String b = COLS[j];
        int editTextId = getResources().getIdentifier("box" + a + b , "id", getPackageName());
        EditText et=(EditText)findViewById(editTextId);    
        et.setText("");
    }
} 
```

或者，基于`EditText`在 a 中的那些`TableLayout`，您可以将引用传递给`TableLayout`一个方法，该方法将使用 method 遍历它`getChildAt(position)`。

# python - Scrapy 的 LinkExtraction - 全局拒绝？

> ID：13508484
> 
> 赞同：0
> 
> 时间：2012-11-22T08:25:13.313
> 
> 标签：python, scrapy

我正在抓取具有 ?locale=en 或 locale=jp... 的网站

我只对在 url 中没有指定语言环境的网站感兴趣。

目前我有这个：

```
 # More specific ones at the top please
  # In general, deny all locale specified links
  rules = (  
      # Matches looks
      # http://lookbook.nu/look/4273137-Galla-Spectrum-Yellow
      Rule(SgmlLinkExtractor(allow=('/look/\d+'), deny=('\?locale=')), callback='parse_look'),

      # Matches all looks page under user overview, 
      Rule(SgmlLinkExtractor(allow=('/user/\d+[^/]+/looks/?$'), deny=('\?locale=')), 
          callback='parse_model_looks'),
      Rule(SgmlLinkExtractor(allow=('/user/\d+[^/]+/looks\?page=\d+$'), deny=('\?locale=')), 
          callback='parse_model_looks'),

      # Matches all user overview pages
      Rule(SgmlLinkExtractor(allow=('/user/\d+[^/]*/?$'), deny=('\?locale=')), 
          callback='parse_model_overview'), 
```

我到处重复否认。

应该有更好的方法吧？

我尝试做一个一般规则来拒绝所有 \?locale= 但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:33:30.620

您可以构建一个复杂的“允许”正则表达式，但编写正则表达式通常很痛苦。您还可以使用：此处描述的 process_links 方法： [https ://scrapy.readthedocs.org/en/latest/topics/spiders.html?highlight=process_links](https://scrapy.readthedocs.org/en/latest/topics/spiders.html?highlight=process_links)

这将打开调用 url 解析器和分析参数的可能性：

```
 Rule(SgmlLinkExtractor(allow=('/look/\d+')),
      process_links='process_links', 
      callback='parse_look')

def process_links(self,links):
    return [link for link in links if self.valid_links(link))

def valid_links(self,link):
    import urlparse
    urlp=urlparse.urlparse(link.url)
    querydict=urlparse.parse_qs(urlp.query)
    return "locale" not in querydict 
```

这是一种更安全的检查参数的技术

# linux - 使用linux路由器修改H323 tcp数据包

> ID：13508485
> 
> 赞同：1
> 
> 时间：2012-11-22T08:25:13.637
> 
> 标签：linux, perl, tcp, packet

我有一个 Linux 路由器，我在其上使用 CONFIG_IP_NF_QUEUE、iptables 用户空间和 Perl 模块`IPTables::IPv4::IPQueue`来检查 H323 - H.225 数据包，然后通过或丢弃。我不仅需要接受或丢弃数据包，还需要修改它，更具体地说，我想更改从 H323 网守返回给客户端的 MCU（在数据包中）的 IP 地址。

这将需要我检查 TCP 数据包正文并更改数据包正文中的 IP 地址。有谁知道我怎么能做到这一点？是否有任何开源第 7 层路由器能够做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:28:11.903

在过去，我使用“ip masquerade”来做类似于您所描述的事情。

[http://www.tldp.org/HOWTO/IP-Masquerade-HOWTO/supported-client-software.html](http://www.tldp.org/HOWTO/IP-Masquerade-HOWTO/supported-client-software.html)

但最好的解决方案是放置一个网守作为代理。这样你就不会欺骗协议，你实际上是在重新调用。

我会在这里寻找 gnugk 路由模式：

[http://www.gnugk.org/h323-proxy.html](http://www.gnugk.org/h323-proxy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:44:56.843

如果您已经获得了 IP 数据包，从您的声明中您已经成功地这样做了，我认为在传递数据包之前更改数据包的 IP 地址没有问题。

只需进行一些位操作以更改 IP 标头中的 IP 地址（同时更新 IP 校验和）。另请注意，您必须更新 TCP 标头校验和，因为它的计算涉及包含 IP 地址的伪标头。

只需阅读[RFC 791](http://www.ietf.org/rfc/rfc791.txt)和[RFC 793](http://www.ietf.org/rfc/rfc793.txt)即可让您了解如何执行此操作。这很简单。

# php - 没有 ID 的插入语句不更新

> ID：13508492
> 
> 赞同：0
> 
> 时间：2012-11-22T08:25:46.140
> 
> 标签：php, mysql

我正在做一个 ajax 将记录写入数据库。该表有 id,fullname。id 设置为主要和自动增量。现在没有 id（以下语句中的 8），记录不会被写入。

下面是插入语句

```
$sql = 
   "INSERT INTO user 
   VALUES ('8','".$_POST['name']."','test4','test5','test6')"; 
```

没有id可以写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:28:16.653

Place`NULL`而不是`'8'`，这将告诉 MYSQL 执行默认的自动增量：

```
$sql="insert into user values (NULL,'".$_POST['name']."','test4','test5','test6')"; 
```

其他可能性是将您的查询重写为：

```
$sql="insert into user (field1, field2, field3, field4) values ('".$_POST['name']."','test4','test5','test6')"; 
```

在这种情况下，您没有将 id 指定为要插入的列，因此 MySQL 将再次执行默认的自动增量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:29:36.793

您还可以在查询中省略 ID 列，以便它自动增加 ID 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:29:06.823

是的，这完全有可能，但您需要指定要插入的列...例如：

```
$sql="insert into user (username, column2, column3, column4) values ('".$_POST['name']."','test4','test5','test6')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:29:08.607

尝试

```
$sql="insert into user values (NULL,'".$_POST['name']."','test4','test5','test6')"; 
```

或者

```
$sql="insert into user(`field1`, `field2`, `field3`, `field4`) values ('".$_POST['name']."','test4','test5','test6')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T08:31:25.217

您可以使用 DEFAULT 或 NULL 而不是 '8'

```
insert into user(DEFAULT, column1, column2, column3) VALUES (.... 
```

# mongodb - mongodb group by on C API

> ID：13508495
> 
> 赞同：2
> 
> 时间：2012-11-22T08:26:03.850
> 
> 标签：mongodb, group-by, database

我有一个数据。让我给你看一个例子

1 1 2 2 2 3

而且，我想使用 Group by 获取每个值的数量。结果将如下所示

价值 | 计数 1 | 2 2 | 3 3 | 1

也许，Mongo Shell 上的 group by query 是这样的

```
db.collection.group(
{ key : {value:true},
reduce: function(obj, prev) { prev.csum += 1; },
initial: { csum: 0 }
}) 
```

但是，我必须使用 mongoDB C API 将该查询转换为 C 代码。我试图像那样使用 bson_append_bson 编写一些代码..但是，失败了..

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:18:07.567

我在我的机器上的端口 12345 上设置了一个 Mongo 2.2.1 实例。我创建了一个`test.data`集合并填充了它

```
use test
db.data.insert({value:1})
db.data.insert({value:1})
db.data.insert({value:2})
db.data.insert({value:2})
db.data.insert({value:2})
db.data.insert({value:3}) 
```

根据您的样本数据。使用[最新的驱动程序](https://github.com/mongodb/mongo-c-driver/tree/v0.6)，我编写了以下示例代码。

```
#include <stdio.h>
#include <mongo.h>

int main( char *argv[] ) {
    bson b, out;
    mongo conn;

    if( mongo_connect( &conn, "127.0.0.1", 12345 ) != MONGO_OK ) {
        switch( conn.err ) {
            case MONGO_CONN_NO_SOCKET:
                printf( "FAIL: Could not create a socket!\n" );
                break;
            case MONGO_CONN_FAIL:
                printf( "FAIL: Could not connect to mongod. Make sure it's listening at 127.0.0.1:27017.\n" );
                break;
            }

        exit( 1 );
    }

    bson_init( &b );
        bson_append_string( &b, "aggregate", "data" );
        bson_append_start_array( &b, "pipeline" );
            bson_append_start_object( &b, "0" );
                bson_append_start_object( &b, "$group" );
                    bson_append_string( &b, "_id", "$value" );
                    bson_append_start_object( &b, "count" );
                        bson_append_int( &b, "$sum", 1 );
                    bson_append_finish_object( &b );
                bson_append_finish_object( &b );
            bson_append_finish_object( &b );
        bson_append_finish_array( &b );
    bson_finish( &b );
    bson_print( &b );

    printf( "command result code: %d\n", mongo_run_command( &conn, "test", &b, &out ) );
    bson_print( &out );

    bson_destroy( &b );
    bson_destroy( &out );
    mongo_destroy( &conn );
    return( 0 );
} 
```

而[`$group`](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)不是在分片环境中不起作用的命令，我使用了[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)（自 2.1 以来的新功能）。上面的C代码等价于

```
use test
db.data.aggregate({$group:{_id:"$value",count:{$sum:1}}}) 
```

在 Mongo 外壳中。

# javascript - 在uiwebview上释放javascript？

> ID：13508496
> 
> 赞同：0
> 
> 时间：2012-11-22T08:26:22.917
> 
> 标签：javascript, iphone, memory, uiwebview

在uiwebview中使用后有没有办法解除分配javascript。我的理解是当 javascript 没有在 10 秒内完成并且内存达到 10 MB 限制时，iOS 将执行应用程序。我们可以自己控制这两个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:07:12.800

苹果没有提供文件来解除 UIWebView 上的 javascript 分配，但您可以通过处理`appDelegate`方法来做一件事`- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application`。

在此方法中释放不需要的资源并停止在 webview 上加载数据：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
                  [webView stopLoading];
                  [webView setDelegate:nil];
                 //As per the requirement do your stuff here (like release unwanted objects)
}
```

# hbase - HBase：使用 Java API 创建表时指定 VERSIONS

> ID：13508499
> 
> 赞同：4
> 
> 时间：2012-11-22T08:26:28.777
> 
> 标签：hbase

我知道我们可以通过以下方式从 hbase shell 中做到这一点：

```
create 't1', {NAME => 'f1', VERSIONS => 5} 
```

`HTableDesctiptor`我在 Java API 中找不到任何相应的选项。知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:22:30.633

我在这里留下一个基于您的示例的示例代码作为参考。

```
HTableDescriptor descriptor = new HTableDescriptor("t1");
HColumnDescriptor cd = new HColumnDescriptor("f1");
cd.setMaxVersions(5);
descriptor.addFamily(cd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T22:42:01.843

每个列族指定最大版本和其他 ttl 类型设置。所以最大版本在[HColumnDescriptor](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/HColumnDescriptor.html)上。

# javascript - 在html中创建多功能按钮

> ID：13508510
> 
> 赞同：6
> 
> 时间：2012-11-22T08:27:14.493
> 
> 标签：javascript, html, css, button

在电话上，我无法查看这两个按钮，因为它们相距太远。我想让它在您选择文件后，“选择文件”按钮将被上传按钮替换。这可能吗。我该怎么办？

[http://goawaymom.com/buttons.png](http://goawaymom.com/buttons.png)

我的 html -

```
<form method="post" action="" enctype="multipart/form-data" name="form1">
   <input   name="file" type="file"class="box"/>          
   <input type="submit" id="mybut" value="Upload" name="Submit"/>
</form> 
```

-注意我不在乎把它们放在单独的行上或使字体更小-等

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T08:46:27.643

最简单的方法：

```
 <form method="post" action="" enctype="multipart/form-data" name="form1">
        <input   name="file" type="file" onchange="if($(this).val().length){$(this).hide().next().show()}" class="box"/>         
        <input type="submit" id="mybut" value="Upload" style="display:none;" name="Submit"/>
    </form> 
```

没有 Jquery，只有 JavaScript

```
 <form method="post" action="" enctype="multipart/form-data" name="form1">
        <input   name="file" type="file" onchange="this.nextElementSibling.style.display = 'block'; this.style.display = 'none';" class="box"/>         
        <input type="submit" id="mybut" value="Upload" style="display:none;" name="Submit"/>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:32:10.317

```
<script type="text/javascript">
 $(function() {
 $("input:file").change(function (){
   var fileName = $(this).val();
   if(fileName){
      remove chose file button and show upload button(visible property)
    }

 });
 }); 
```

检查[jQuery - 检测文件输入中是否已选择文件](https://stackoverflow.com/questions/5670769/jquery-detecting-if-a-file-has-been-selected-in-the-file-input)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:35:07.367

是的，这确实很容易。您可以侦听`onchange`文件输入的事件并将其隐藏。

HTML：

```
<input name="inpt" type="file"/>
<input type="button" value="Upload"/> 
```

Javascript：

```
//this event is fired when the file is chosen (not when user presses the cancel button)
inpt.onchange = function(e) {
  //setting display to "none" hides an element 
  inpt.style.display="none";
}; 
```

[JSfiddle](http://jsfiddle.net/4Vk8Z/)

PS。如果您愿意，您可以使用相同的技巧仅在选择文件时显示“上传”按钮。在这种情况下，按钮代码将`<input id="btn" type="button" value="Upload" style="display:none"/>`在您编写`btn.style.display=""`的用于显示按钮的 Javascript 代码中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T08:39:36.210

我可以说有多种方法可以做到这一点。但在核心java脚本中，下面是方法

(1) 最初将上传按钮的显示样式设置为none，以便隐藏该按钮

(2) 为输入文件类型编写 Onchange 事件处理程序

(3) 在该处理函数中，如果值不为空，则通过应用显示样式无隐藏输入文件，然后将上传按钮的样式更改为空（''）。

希望这种方法有效

# javascript - 更改 JQuery 附加元素的值

> ID：13508512
> 
> 赞同：1
> 
> 时间：2012-11-22T08:27:24.500
> 
> 标签：javascript, jquery

因此，我在页面上添加了新添加的元素，这些元素被附加了 Jquery.live()，我现在想在添加这些元素之后更改这些元素的值。

所以像

```
 $("#questionForm").empty();
        $.get("questionCreator.html", function(data){
            $("#questionForm").append(data);

        });
        var index=$(this).parent().index();
        id = index; 
        var associatedQuestion = idQuestionAssociation[index];
        var associatedResponses = idResponsesAssociation[index];
        if(associatedQuestion != null){
            $(".questionInput").val(associatedQuestion);
        } 
```

所以 .val() 调用，我认为它不起作用，因为最初没有 .questionInput 元素，这是附加的。我觉得我应该使用 .live、.delegate 或 .on，但我不确定我应该使用什么事件。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:32:36.943

尝试使用[replaceWith](http://api.jquery.com/replaceWith/)更改内容，但调用`$(".questionInput")`也可以返回一个数组，因此最好循环遍历可能的元素 -**除非它是唯一的，否则将其设置为 id 属性（#questionInput）**以在不需要循环的情况下调用它。

```
$('.questionInput').each(function(i, obj) {
    $(this).replaceWith('I am replacing the content for .questionInput');
}); 
```

`get`这应该在它返回数据后进入函数内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:29:44.273

`$.get`是异步的，这意味着您尝试匹配的元素还`$(".questionInput")`没有在 DOM 中。您应该将其余的 DOM 操作放在回调中。

```
 $.get("questionCreator.html", function(data){
        $("#questionForm").append(data);
        //change the values here
    }); 
```

# javascript - Javascript登录到Windows商店应用程序的网站

> ID：13508516
> 
> 赞同：1
> 
> 时间：2012-11-22T08:27:35.253
> 
> 标签：javascript, html, windows-store-apps

我正在使用 HTML 和 javascript 开发一个 Windows 商店应用程序。我需要使用我的应用程序中的用户名和密码登录到一个站点。

示例：[http ://www.160by2.com/index](http://www.160by2.com/index)

应用程序读取用户名和密码并将其发送到网站。验证后，网站响应在应用程序中显示为“登录成功！” 或“登录失败”...

我是 Windows 应用程序开发的新手 :)

如果发布示例代码，我将非常感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:12:53.313

如果那是您自己的网站，您可以发布一个 RESTful API，可以使用 XHR 从您的应用程序访问。如果不是，您必须查看登录网站时向服务器发送的 POST/GET 消息。您可以使用 Chrome 或 Fiddler 中的开发者工具来截取消息以分析 HTTP 消息

# c# - 如何在 Visual Studio 2012 中更正 wpf datagrid 列名冗余

> ID：13508527
> 
> 赞同：5
> 
> 时间：2012-11-22T08:28:26.270
> 
> 标签：c#, sql, wpf, linq

```
private void ViewWinLoaded(object sender, RoutedEventArgs e)
    {
        var stud = from s in data.Students
                             select s;
         Student[] st=stud.ToArray<Student>();
         datagrid.ItemsSource = st;

    } 
```

以上是我的 C# 代码。

```
<DataGrid x:Name="datagrid" HorizontalAlignment="Left" Height="232" VerticalAlignment="Top" Width="461">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=StudentID}" ClipboardContentBinding="{x:Null}" Header="StudentID"/>
            <DataGridTextColumn Binding="{Binding Path=FirstName}" ClipboardContentBinding="{x:Null}" Header="First Name"/>
            <DataGridTextColumn Binding="{Binding Path=LastName}" ClipboardContentBinding="{x:Null}" Header="Last Name"/>
            <DataGridTextColumn Binding="{Binding Path=Gender}" ClipboardContentBinding="{x:Null}" Header="Gender"/>
            <DataGridTextColumn Binding="{Binding Path=GPA}" ClipboardContentBinding="{x:Null}" Header="GPA"/>
        </DataGrid.Columns>
  </DataGrid> 
```

我想要实现的是使用我自己的列名，而不是分贝中的列名。但是当我运行代码时，它会同时显示我的自定义列和数据库中的列名（级联名称）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:38:31.977

通过将 AutoGenerateColumns 属性设置为 false 来防止 DataGrid 生成列。

```
<DataGrid x:Name="datagrid" AutoGenerateColumns="False"
HorizontalAlignment="Left" Height="232" VerticalAlignment="Top" Width="461"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:47:14.567

实现此结果的另一种方法是，您可以设置 Student 类属性的每个公共属性`DisplayName`。

# c - OS X 上的 vsprintf：EXC_BAD_ACCESS

> ID：13508528
> 
> 赞同：2
> 
> 时间：2012-11-22T08:28:27.520
> 
> 标签：c, macos, segmentation-fault

我在 OSX 上发现了 vsprintf 的奇怪行为。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#if defined(WIN32)
#include <windows.h>
#define VSNPRINTF _vsnprintf
#elif defined(LINUX) || defined (DARWIN)
#define VSNPRINTF vsnprintf
#include <sys/types.h>
#include <unistd.h>
#endif

char *f(const char *fmt, ...)
{
 char *out = NULL;
 const int step = 32;
 int n = -1, lout = step;
 va_list arg;

 if(fmt!=NULL)
 {
  va_start(arg, fmt);
  do
  {
   if(!out)
   {
    free(out);
    out = NULL;
   }
   out = (char*)malloc(lout + 1);
   if(!out) break;
   memset(out, 0, lout + 1);   

   n = VSNPRINTF(out, lout, fmt, arg);
   if(n == -1 || n + 1 > lout)
   {
    lout += step;
    n = -1;
   }
  }while(n == -1);
  va_end(arg);
 }

 return out;
}

int main()
{
 char *msg = NULL;
 unsigned long x = 0xDEADBEEF;

 msg = f("%X%X%X%X", x, x, x, x);
 if(!msg) return -1;

 puts(msg);

 return 0;
} 
```

该函数应返回包含格式化文本的分配字符串 (char*)。它可以在 Linux 和 Windows 上正常工作。它在 OSX 上返回格式错误的文本，有时会导致分段错误 (EXC_BAD_ACCESS)。顺便说一句，我知道我可以使用 vasprintf。

可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T08:55:12.630

您的问题很可能是您多次使用相同的 va_list 调用 vsnprintf 。这在某些 ABI 中不起作用。

查找 va_copy 的手册页。简短的版本是做这样的事情：

```
 va_list c;
      va_copy(c, arg);

      n = VSNPRINTF(out, lout, fmt, c);
      va_end(c); 
```

# textmate - textmate-如何在文件抽屉/浏览器和编辑器之间切换？

> ID：13508531
> 
> 赞同：1
> 
> 时间：2012-11-22T08:28:36.270
> 
> 标签：textmate, osx-mountain-lion

`ctrl-tab`和都试过了`command-option-tilda`，但都行不通。

这对我来说将是一个非常有用的键盘快捷键，因为我经常在抽屉和编辑器之间切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-04T19:13:04.077

option-command-tab 将在编辑器和文件浏览器之间切换焦点

通过[http://textmate.1073791.n5.nabble.com/keyboard-shortcut-to-open-files-in-file-browser-td28117.html](http://textmate.1073791.n5.nabble.com/keyboard-shortcut-to-open-files-in-file-browser-td28117.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T05:42:34.090

如果您使用的是 TextMate 2。从“视图”菜单中选择“显示文件浏览器”，键盘快捷键为：控制、选项、命令 D

# iphone - 加载缓慢时的 ALAsset 照片库图像性能改进

> ID：13508535
> 
> 赞同：0
> 
> 时间：2012-11-22T08:28:48.377
> 
> 标签：iphone, ios, objective-c-blocks

嗨，我在滚动视图上显示图像时遇到问题。

首先，我使用资产 url 创建新的 UIImageView：

```
-(void) findLargeImage:(NSNumber*) arrayIndex
{
ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    ALAssetRepresentation *rep;
    if([myasset defaultRepresentation] == nil) {
        return;
    } else {
        rep = [myasset defaultRepresentation];
    }
    CGImageRef iref = [rep fullResolutionImage];
    itemToAdd = [[UIImageView alloc] initWithFrame:CGRectMake([arrayIndex intValue]*320, 0, 320, 320)];
    itemToAdd.image = [UIImage imageWithCGImage:iref];
    [self.scrollView addSubview:itemToAdd];
};
ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"Cant get image - %@",[myerror localizedDescription]);
};
NSURL *asseturl = [NSURL URLWithString:[self.photoPath objectAtIndex:[arrayIndex intValue] ]];
ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:asseturl 
               resultBlock:resultblock
              failureBlock:failureblock]; 
```

}

itemToAdd 是接口中定义的 UIImageView ：

```
__block UIImageView *itemToAdd; 
```

并且 scrollView 定义为一个属性：

```
@property (nonatomic, strong) __block UIScrollView *scrollView; 
```

然后在我看来WillAppear 我这样做：

```
- (void) viewWillAppear:(BOOL)animated {
    self.scrollView.delegate = self;
    [self findLargeImage:self.actualPhotoIndex];
    [self.view addSubview:self.scrollView];
} 
```

但是图像没有出现，我应该在将图像添加到scrollView后刷新self.view，还是应该做其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:51:40.673

**ALAssetsLibrary**块将在**单独的线程**中执行。**所以我建议在主线程**中做 UI 相关的东西。

为此，请使用**dispatch_sync(dispatch_get_main_queue()**或**performSelectorOnMainThread**

**一些重要说明：**

1.  使用 AlAsset aspectRatioThumbnail 代替 fullResolutionImage 以获得高性能

    例子：

> ```
>  CGImageRef iref = [myasset aspectRatioThumbnail];
>  itemToAdd.image = [UIImage imageWithCGImage:iref]; 
> ```

**例子：**

```
-(void) findLargeImage:(NSNumber*) arrayIndex
{
 ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
 {

    CGImageRef iref = [myasset aspectRatioThumbnail];         

 dispatch_sync(dispatch_get_main_queue(), ^{

    itemToAdd = [[UIImageView alloc] initWithFrame:CGRectMake([arrayIndex intValue]*320, 0, 320, 320)];
    itemToAdd.image = [UIImage imageWithCGImage:iref];
    [self.scrollView addSubview:itemToAdd];

 });//end block

};
ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"Cant get image - %@",[myerror localizedDescription]);
};
NSURL *asseturl = [NSURL URLWithString:[self.photoPath objectAtIndex:[arrayIndex intValue] ]];
ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:asseturl 
               resultBlock:resultblock
              failureBlock:failureblock];

} 
```

还要更改 viewWillAppear() 的顺序

```
- (void) viewWillAppear:(BOOL)animated {

    self.scrollView.delegate = self;
    [self.view addSubview:self.scrollView];
    [self findLargeImage:self.actualPhotoIndex];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:51:03.433

您正在从另一个线程操作视图。您必须使用主线程来操作视图。

使用以下方法将图像添加到滚动视图：

```
dispatch_async(dispatch_get_main_queue(), ^{
   [self.scrollView addSubview:itemToAdd];
} 
```

或使用：

```
[self.scrollView performSelectorOnMainThread:@selector(addSubview:) withObject:itemToAdd waitUntilDone:NO]; 
```

请参考：

1.  [NSObject 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)
2.  [GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

# ruby - 来自“ObjectSpace._id2ref”的错误

> ID：13508536
> 
> 赞同：2
> 
> 时间：2012-11-22T08:28:50.013
> 
> 标签：ruby, ruby-1.9, objectid

以下两种返回的错误有什么区别`ObjectSpace._id2ref`？

```
0x... is recycled object (RangeError)

0x... is not id value (RangeError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:24:35.440

`not id value`意味着从来没有具有该 ID 的对象。

`recycled object`表示曾经有一个具有该 id 的对象，但它已被垃圾收集。

Ruby 1.9.3/Ubuntu 上的演示：

```
x = Object.new
id = x.object_id

puts "0x%x" % id
# => 0x4aef5e8

puts ObjectSpace._id2ref id
# => #<Object:0x95debd0>

x = nil

puts ObjectSpace._id2ref id
# => #<Object:0x95debd0>

GC.start

puts ObjectSpace._id2ref id
# => 0x4aef5e8 is recycled object (RangeError) 
```

请注意，数字`Object#to_s`不是- 根据[文档](http://ruby-doc.org/core-1.9.3/Object.html#method-i-to_s)*，*它是“对象 id 的编码” 。`object_id`

# common-lisp - Common Lisp 相当于 virtualenv 或 rvm？

> ID：13508539
> 
> 赞同：3
> 
> 时间：2012-11-22T08:28:57.677
> 
> 标签：common-lisp

是否有类似于 Python 实用程序[virtualenv](http://pypi.python.org/pypi/virtualenv)或 Ruby 实用程序[rvm](https://rvm.io/)的东西？

例如，我想将 SBCL 切换到 Clozure CL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:58:06.063

软件系统的管理将由诸如 ASDF（定义软件系统及其操作）和[Quicklisp](http://www.quicklisp.org)（通过中央注册下载软件系统）之类的东西来完成。AFAIK 它不处理软件系统的多个版本，因此您可以说出要加载的版本。使用具有相同库的不同 Lisp 应该可以工作，因为每个 Lisp 通常具有用于编译代码的不同文件类型（和/或为编译代码使用不同的目录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:05:40.677

它不是 rvm 意义上的“完全”。但是 slime 软件支持几乎所有的 Common Lisp。您从 Emacs 开始，使用 Mx lisp-you-want。

我不确定是否支持 Clozure CL。无论如何，SLIME 的主页位于： [http ://common-lisp.net/project/slime/](http://common-lisp.net/project/slime/)

它不支持安装各种 Common Lisps。您可以手动安装它们，也可以通过您的包管理软件（例如 Debian 中的 apt）安装它们

# javascript - 更改表单变量并需要将 javascript 更改为新变量

> ID：13508542
> 
> 赞同：0
> 
> 时间：2012-11-22T08:29:03.213
> 
> 标签：javascript, jquery, forms

我是 javascript 的完全新手。我的网站上有一些 js 正在处理隐藏表单中的一些 div。我想更改表单的某些值，并且对 javascript 的某些语法感到困惑。这是我正在使用的 html 和脚本：

```
<div class="outeremailcontainer">
    <div id="emailcontainer">
        <?php include('verify.php'); ?>
        <form action="../index_success.php" method="post" id="sendEmail" class="email">
            <h3 class="register2">Newsletter Signup:</h3>
            <ul class="forms email">
                <li class="name">
                    <label for="yourName">Name: </label>
                    <input type="text" name="yourName" class="info" id="yourName" value="<?php echo $_POST['yourName']; ?>" /><br />
                </li>
                <li class="city"><label for="yourCity">City: </label>
                    <input type="text" name="yourCity" class="info" id="yourCity" value="<?php echo $_POST['yourCity']; ?>" /><br />
                </li>
                <li class="email">
                    <label for="emailFrom">Email: </label>
                    <input type="text" name="emailFrom" class="info" id="emailFrom" value="<?php echo $_POST['emailFrom']; ?>" />
                     <?php if(isset($emailFromError)) echo '<span class="error">'.$emailFromError.'</span>';
                     ?>
                </li>
                <li class="buttons email">
                     <button type="submit" id="submit">Send</button>
                     <input type="hidden" name="submitted" id="submitted" value="true" />
                </li>
            </ul>
        </form>
    <div class="clearing">
    </div>
  </div>
</div> 
```

和脚本：

```
<script type="text/javascript">

$(document).ready(function(){

 $('#emailFrom')
  .focus(function(){
   if ($('#overlay').length) { return; } // don't keep adding overlays if one exists
 $('#sendEmail')

 .find('.name, .city').slideDown(300, function(){ $(this).show(); });
 $('.outeremailcontainer').css({ position: 'relative', bottom: 0, left: 0, zIndex:       1001 });
 $('<div id="overlay"></div>').appendTo('body');
 });

$('#overlay').live('click', function(){
$('#sendEmail')
 .css({ backgroundColor : 'transparent' })
 .find('.name, .city').slideUp(300);
$('.outeremailcontainer').css({ position : 'static' });
$('#overlay').remove();
 });

}); 
```

页面底部还有一个脚本包含：

```
$(document).ready(function(){

$('#emailFrom')
.focus(function(){
 if ($('#overlay').length) { return; } // don't keep adding overlays if one exists
 $('#sendEmail')

  .find('.name, .city').slideDown(300, function(){ $(this).show(); });
 $('.outeremailcontainer').css({ position: 'relative', bottom: 0, left: 0, zIndex : 1001 });
 $('<div id="overlay"></div>').appendTo('body');
 });

  $('#overlay').live('click', function(){
 $('#sendEmail')
  .css({ backgroundColor : 'transparent' })
  .find('.name, .city').slideUp(300);
 $('.outeremailcontainer').css({ position : 'static' });
 $('#overlay').remove();
  });

});

$(document).ready(function(){
  $("#submit").click(function(){
    $(".error").hide();
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    var emailFromVal = $("#emailFrom").val();

    if(emailFromVal == '') {
      $("#emailFrom").after('<span class="error"><br />You forgot to enter the email address to send from.</span>');
      hasError = true;

    } else if(!emailReg.test(emailFromVal)) {
      $("#emailFrom").after('<span class="error"<br />>Enter a valid email address to send from.</span>');
      hasError = true;
}

    var yourNameVal = $("#yourName").val();
    if(yourNameVal == '') {
    $("#yourName").after('<span class="error"><br />You forgot to enter your name.</span>');
    hasError = true;
}

 var yourCityVal = $("#yourCity").val();
if(yourCityVal == '') {
    $("#yourCity").after('<span class="error"><br />You forgot to enter your city.</span>');
    hasError = true;
}
if(hasError == false) {
  $(this).hide();
  $("#sendEmail li.buttons").append('<img src="/wp-content/themes/default/images/template/loading.gif" alt="Loading" id="loading" />');
  $.post("/includes/sendemail.php",
//emailTo: emailToVal, 
       { emailFrom: emailFromVal, yourName: yourNameVal, yourCity: yourCityVal  },
         function(data){
        $("#sendEmail").slideUp("normal", function() {
          $("#sendEmail").before('<h3 class="register2">Thank you!  You\'re on the email list!</h3><p class="emailbox">Click <a href="xxx">HERE</a> for your free song.</p>');
        });
         }
     );
}
return false;
 });
}); 
```

上面的代码一切正常。但是，我想对一些不同的变量使用不同的表单操作。代码的表单部分需要如下所示：

```
 <div class="outeremailcontainer">
    <div id="emailcontainer">
        <?php include('verify.php'); ?>
        <form action="https://madmimi.com/signups/subscribe/66160" method="post" id="mad_mimi_signup_form" class="email">
            <h3 class="register2">Newsletter Signup:</h3>
            <ul class="forms email">
                <li class="name">
                    <label for="signup_name">Name: </label>
                    <input type="text" name="signup[name]" class="info" id="signup_name" value="<?php echo $_POST['signup_name']; ?>" /><br />
                </li>
                <li class="city"><label for="signup_city">City: </label>
                    <input type="text" name="signup[city]" class="info" id="signup_city" value="<?php echo $_POST['signup_city']; ?>" /><br />
                </li>
                <li class="email">
                    <label for="signup_email">Email: </label>
                    <input type="text" name="signup[email]" class="required" id="signup_email" value="<?php echo $_POST['signup_email']; ?>" />
                     <?php if(isset($emailFromError)) echo '<span class="error">'.$emailFromError.'</span>';
                     ?>
                </li>
                <li class="buttons email">
                     <button type="submit" id="webform_submit_button">Send</button>
                     <input type="hidden" name="submitted" id="submitted" value="true" />
                </li>
            </ul>
        </form>
    <div class="clearing">
    </div>
  </div>
</div> 
```

我不知道我需要更改哪些 js 代码才能使 div 隐藏操作仍然使用新值。有人能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:41:48.297

看起来您只需要更改 JS 文件中的字段名称：

```
<input type="text" name="yourName" class="info" id="yourName" value="<?php echo $_POST['yourName']; ?>" /> 
```

变成了：

```
<input type="text" name="signup[name]" class="info" id="signup_name" value="<?php echo $_POST['signup_name']; ?>" /> 
```

所以你的 JS 需要从

```
var yourNameVal = $("#yourName").val(); 
```

至

```
var yourNameVal = $("#signup_name").val(); 
```

您的所有字段也是如此，您需要选择正确的元素才能对其进行操作

这是一个解释[jquery 选择器的链接](http://api.jquery.com/category/selectors/)

# iphone - uilabel 边框在旋转后变形

> ID：13508544
> 
> 赞同：0
> 
> 时间：2012-11-22T08:29:06.343
> 
> 标签：iphone, ios, uilabel

我正在尝试旋转`UILabel`，但旋转后它的边界会扭曲并出现锯齿形。我的标签中必须有一个边框，所以它看起来不太好。我正在使用以下代码来旋转它：

```
[UIView beginAnimations:nil context:NULL]; // arguments are optional
lblText.transform = CGAffineTransformMakeRotation(angle);
[UIView commitAnimations]; 
```

如何使边框平滑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:39:19.430

您可以向内部视图添加一个 3 像素的透明边框并对其进行栅格化，以便像素插值平滑边框。

```
view.layer.borderWidth = 3; 
view.layer.borderColor = [UIColor clearColor].CGColor; 
view.layer.shouldRasterize = YES; 
```

现在最后一个技巧是添加一些阴影。这将使边框看起来更坚固。

```
view.layer.shadowOffset = CGSizeMake(0, -1); 
view.layer.shadowOpacity = 1; 
view.layer.shadowColor = [UIColor blackColor].CGColor 
```

不要忘记添加`QuartzCore`框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T12:24:07.003

尝试这个：

```
lblText.layer.allowsEdgeAntialiasing = YES; 
```

# iphone - 单击引脚注释时如何显示另一个视图

> ID：13508555
> 
> 赞同：2
> 
> 时间：2012-11-22T08:30:05.730
> 
> 标签：iphone, ios, xcode, ipad, mapkit

我在我的 pin 注释上添加了一个详细信息按钮。我想去另一个视图。当我单击它时，以下代码不起作用。我不知道问题出在哪里。

```
- (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *pinAnnotation = nil;
    if(annotation != mapview.userLocation)
    {
        static NSString *defaultPinID = @"myPin";
        pinAnnotation = (MKPinAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinAnnotation == nil )
            pinAnnotation = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

        pinAnnotation.canShowCallout = YES;

        //instatiate a detail-disclosure button and set it to appear on right side of annotation
        UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        pinAnnotation.rightCalloutAccessoryView = infoButton;

    }

    return pinAnnotation;
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{

    if ([(UIButton*)control buttonType] == UIButtonTypeDetailDisclosure){
    annotationViewController *detailView=[[annotationViewController alloc] initWithNibName:@"annotationViewController" bundle:nil];

    [[self navigationController] pushViewController:detailView animated:YES];
    [detailView release];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:53:23.270

该方法`- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control`是委托方法。这就是为什么您需要将 mapview 的委托设置为实现此方法的类（此处`self`），以便调用它。

您还需要告诉班级您正在实现这些`MKMapViewDelegate`方法。为此，在您的 .h 中，更改此行：

```
@interface MyViewController : UIViewController 
```

到 ：

```
@interface MyViewController : UIViewController <MKMapViewDelegate> 
```

您的方法现在应该被调用。

# c# - 如何让框架和依赖的应用松耦合？

> ID：13508559
> 
> 赞同：4
> 
> 时间：2012-11-22T08:30:21.563
> 
> 标签：c#, asp.net, web-applications, platform, loose-coupling

我有一个具体案例，我想知道`best practice`如何处理它。

我制作了一个特定的 .NET 框架（Web 应用程序）。此 Web 应用程序通过以下方法对许多其他 Web 应用程序起到平台或框架的作用：

我们在单独的解决方案中创建我们依赖的 Web 应用程序（项目业务的类、rdlc 报告），然后构建它们。

之后，我们在框架中添加对生成的 dll 的引用。

并创建一组用户控件（每个依赖的 Web 应用程序一个）并将它们放在它自己的框架中的一个文件夹中。

它可以正常工作，但是对特定用户控件的任何修改或对任何一个相关 Web 应用程序的任何修改。我们必须再次添加引用并发布整个框架！

我想做的是使那些不同的 web 应用程序和框架*松散耦合*。所以我可以只发布一个框架，并且对用户控件或不同的 Web 应用程序的任何修改只发布更新的部分而不是整个框架。

如何重构我的代码以便我可以做到这一点？

最重要的是：

如果任何依赖应用程序发生变化，切勿发布整个框架，只需发布​​属于该应用程序的更新部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:42:46.393

如果松耦合是您所追求的，请开发您的“框架（Web 应用程序）”以用作 WCF Web 服务。您的客户端应用程序会将请求传递给您的 Web 服务，并以预定义对象的形式接收标准响应。

如果您采用这条路线，我建议您实施一个额外的步骤：不要在您的客户端代码中直接使用传递给您的客户端应用程序的对象。相反，在每个客户端应用程序本地创建这些 Web 服务对象的版本，并在接收到您的 Web 服务响应对象后，将它们映射到它们的本地对应对象。我倾向于在我的客户端解决方案中使用外观项目来实现这一点。外观处理对我的各种 Web 服务的所有调用，并在每次调用时自动执行客户端和服务对象之间的映射。非常方便。

这样做的原因是，当您决定修改 Web 服务所服务的对象时，您只需更改客户端应用程序中的映射算法……每个客户端解决方案的内部代码保持不变。不要低估这可以为您节省多少工作！

开发 WCF Web 服务是一个相当大的课题。如果您有兴趣，我推荐的一本书是[Programming WCF Services](https://rads.stackoverflow.com/amzn/click/com/0596805489)。它为来自 .NET 背景的人提供了很好的 WCF 开发介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:09:26.033

我完全同意 levib，但我也有一些提示：

1.  As an alternative to WCF (with its crazy configuration needs), I would recommend [ServiceStack](http://servicestack.net). Like WCF it lets you receive requests and return responses in the form of predefined objects, but with NO code generation and minimal configuration. It supports all kinds of response formats, such as JSON, XML, JSV and CSV. This makes it much easier to consume from f.ex. JavaScript and even mobile apps. It even has binaries for MonoTouch and Mono for Android! It is also highly testable and blazing fast!

2.  A great tool for the mapping part of your code is [AutoMapper](http://automapper.org), it lets you set up all your mappings in a single place and map from one object type to another by calling a simple method.

Check them out! :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T21:36:45.070

Decades of experience says: avoid the framework and you won't have a problem to solve.

Frameworks evolve like cancer. The road to hell is paved with good intentions, and a good portion of those good intentions are embodied in a colossal tumour of a framework all in the name of potential re-use that never really happens.

Get some experience and knowledge when it comes to OO and design, and you'll find endless solutions to your technical problem, such as facades, and mementos, and what have you, but they are not solutions to your real problem.

Another thing, if you are using MS technology, don't bother with anything beyond what .NET offers. Stick with what the MS gods offer because as soon as you digress and become committed to some inhouse framework, your days are numbered.

# php - php会话全局变量

> ID：13508563
> 
> 赞同：0
> 
> 时间：2012-11-22T08:30:34.490
> 
> 标签：php, session, include, global-variables

我在 php 中使用会话，我使用 session_start 并存储一些从登录表单传递的变量，变量是代码开头的“user_name”和“user_role”我检查是否设置了这些变量，如果没有，则重定向到登录屏幕。现在的问题是我有一个包含菜单选项的包含文件，如果用户是特权用户，它会显示比不是特权用户更多的选项。我的问题是当包含文件被处理时我得到`PHP Notice: Undefined index: user_name in C:\inetpub\wwwroot\2StarsGames.com\SomeGame v4.1\interface\HeaderMenu.php on line 20`'user_name'因为我没有在其余文件中得到错误，所以我只是在这篇文章中包含了菜单文件。如果在单独的文件中，有人可以告诉我是否对会话进行特殊处理？

```
<div id="page_header"> 
<img class="logoImage" src="./img/some1.png" align="left" />
SUPER B 
<img class="logoImage" src="./img/some2.png" align="right" />
</div>

<div id="page_menu">
<center>
    <a class="menu" href="./Contest.php">Contest</a>
    <a class="menu" href="./Cards.php">Cards</a>
    <a class="menu" href="./PlayersPoints.php">Players Points</a>   
    <a class="menu" href="./SBCardsCode.php">Card's Code</a> 
    <a class="menu" href="./Avatars.php">Avatars</a>   
    <a class="menu" href="./Sims.php">Sims</a>   
    <a class="menu" href="./Boards.php">Boards</a> <br/>   
    <a class="menu" href="./Charity.php">Charity</a>
    <?php 
        $username = strtolower($_SESSION['user_name']);
        if($username == 'some name1' ||
           $username == 'some name2' ||
           $username == 'some name3' ||
           $username == 'some name4')
        {
            echo "          
                <a class='menu' href='./PayoutsNoWin.php'>Payouts</a>  
                <a class='menu' href='./Payins.php'>Payins|</a>            
                <a class='menu' href='./Payments.php'>Payments</a>
                <a class='menu' href='./Tools.php'>Tools</a>  
                <a class='menu' href='./TransferData.php'>Transfer Data</a>
                <a class='menu' href='./Games.php'>Games</a>
                ";
        }
    ?>
</center> 
```

**编辑** session_start() 位于包含此文件的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:37:21.577

您需要抑制错误报告：

$username = strtolower(@$_SESSION['user_name']);

或者更好的是，在使用变量之前检查 isset($_SESSION['user_name']) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:39:02.967

错误似乎发生在这里：

> $username = strtolower($_SESSION['user_name']);

“未定义索引”基本上意味着在 $_SESSION 变量中找不到“用户名”索引。

你可以在你设置的地方发布你的代码吗？
并确保此代码在您检查 $_SESSION['user_name']; 之前运行。

# cordova - 将图像从 www 移动到文档以进行更新

> ID：13508566
> 
> 赞同：1
> 
> 时间：2012-11-22T08:30:48.713
> 
> 标签：cordova

我的应用程序在 www/files/ 中有用于产品库的图像 (.jpg)。

当应用程序运行时，如果有文件更新，我会检查网络服务器中的更新图像，我需要保存这些新图像。

我已经看到它无法写入 www 文件夹，phonegap 将新图像保存在文件夹（fileSystem.root.fullPath）中。

但是我如何将初始图像从 www/files 传输到文档文件夹？

或者

有在安装或首次运行时直接保存到文档文件夹的方法吗？

对这种情况有一个好的做法吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T13:40:58.083

如果您阅读有关文件和目录的 phonegap[文档](http://docs.phonegap.com/en/2.2.0rc2/cordova_file_file.md.html#DirectoryEntry)，您将获得有关用于复制文件和目录的 copyTo 方法的详细信息。

**复制到**

将目录复制到文件系统上的不同位置。尝试以下操作是错误的：

以任意深度复制其内部的目录；如果未提供与当前名称不同的名称，则将目录复制到其父目录中。目录副本总是递归的——也就是说，它们复制目录的所有内容。

**参数**：

*   parent - 要将目录复制到的父目录。（目录条目）
*   newName - 目录的新名称。如果未指定，则默认为当前名称。(DOMString)
*   successCallback - 使用新目录的 DirectoryEntry 对象调用的回调。（函数）
*   errorCallback - 如果尝试复制基础目录时发生错误，则调用回调。使用 FileError 对象调用。（功能）

**快速示例**

```
function win(entry) {
    console.log("New Path: " + entry.fullPath);
}

function fail(error) {
    alert(error.code);
}

function copyDir(entry) {
    var parent = document.getElementById('parent').value,
        parentName = parent.substring(parent.lastIndexOf('/')+1),
        newName = document.getElementById('newName').value,
        parentEntry = new DirectoryEntry(parentName, parent);

    // copy the directory to a new directory and rename it
    entry.copyTo(parentEntry, newName, success, fail);
}
```

在 OnDeviceReady 方法中检查文件夹是否存在于文档目录中，如果不存在，则执行上述代码将`www/files`文件夹复制到文档目录中。

# php - PHP函数返回两个数组

> ID：13508572
> 
> 赞同：17
> 
> 时间：2012-11-22T08:31:20.630
> 
> 标签：php, arrays, function, return, concatenation

我有一个函数，我需要它返回两个数组。

我知道一个函数只能返回一个变量..有没有办法返回我的两个数组？

如果我将它们连接起来，在函数之外如何将它们干净地分开？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-22T08:32:03.120

无需连接：只需返回两个数组的数组，如下所示：

```
function foo() {
    return array($firstArray, $secondArray);
} 
```

...然后您将能够使用[list](http://php.net/manual/en/function.list.php)将这些数组分配给局部变量，如下所示：

```
list($firstArray, $secondArray) = foo(); 
```

如果你使用 PHP 5.4，你也可以在这里使用数组快捷语法：

```
function foo54() {
    return [$firstArray, $secondArray];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:49:09.593

我认为raina77ow 的回答充分回答了您的问题。要考虑的另一个选项是使用写入参数。

```
function foobar(array &$arr1 = null)
{
    if (null !== $arr1) {
        $arr1 = array(1, 2, 3);
    }

    return array(4, 5, 6);
} 
```

然后，调用：

```
$arr1 = array();
$arr2 = foobar($arr1); 
```

如果您*总是*需要返回两个数组，这将没有用，但它可用于始终返回一个数组并仅在某些情况下返回另一个数组。

# app-store - 我在哪里可以找到 App Store 新版本的提要？

> ID：13508577
> 
> 赞同：2
> 
> 时间：2012-11-22T08:31:37.947
> 
> 标签：app-store

不确定这是正确的论坛，如果不是，我提前道歉。

某处是否有 App Store 新版本的提要？或者带有类别和发布日期的应用程序的提要/列表？

此列表已从 App Store 中消失，我想看看是否可以制作一个应用程序来替换它的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T04:26:23.050

[https://itunes.apple.com/us/rss/newapplications/limit=100/xml](https://itunes.apple.com/us/rss/newapplications/limit=100/xml)

您可以在此处构建自己的特定类别提要：[https ://rss.itunes.apple.com/us/](https://rss.itunes.apple.com/us/)

PS：仅添加此答案是因为 Linuxios 的答案导致页面出现 XML 错误，因为似乎不允许 300 个结果。我尝试了 200 并且它有效，所以看起来有点奇怪。

# android - 活动 mainactivity 没有响应

> ID：13508582
> 
> 赞同：-1
> 
> 时间：2012-11-22T08:31:46.230
> 
> 标签：android

我遇到的主要问题是“主要活动没有响应”。当我在模拟器中运行时，它说主要活动没有响应，强制关闭。过去三天我一直坚持这个项目，这个项目是关于 twitter 的。在“主要活动”中传递 twitter 消费者密钥和秘密。[源代码](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)可以解释我代码中的问题。这是我的第一个项目。

```
 package com.androidhive.twitterconnect

  public class MainActivity extends Activity {
// Constants
/**
 * Register your here apps https://dev.twitter.com/apps/new and get your
 * consumer key and secret
 * */
static String TWITTER_CONSUMER_KEY = "consumer key";
static String TWITTER_CONSUMER_SECRET = " consumer secret";

// Preference Constants
static String PREFERENCE_NAME = "twitter_oauth";
static final String PREF_KEY_OAUTH_TOKEN = "oauth_token";
static final String PREF_KEY_OAUTH_SECRET = "oauth_token_secret";
static final String PREF_KEY_TWITTER_LOGIN = "isTwitterLogedIn";

static final String TWITTER_CALLBACK_URL = "oauth://t4jsample";

// Twitter oauth urls
static final String URL_TWITTER_AUTH = "auth_url";
static final String URL_TWITTER_OAUTH_VERIFIER = "oauth_verifier";
static final String URL_TWITTER_OAUTH_TOKEN = "oauth_token";

// Login button
Button btnLoginTwitter;
// Update status button
Button btnUpdateStatus;
// Logout button
Button btnLogoutTwitter;
// EditText for update
EditText txtUpdate;
// lbl update
TextView lblUpdate;
TextView lblUserName;

// Progress dialog
ProgressDialog pDialog;

// Twitter
private static Twitter twitter;
private static RequestToken requestToken;

// Shared Preferences
private static SharedPreferences mSharedPreferences;

// Internet Connection detector
private ConnectionDetector cd;

// Alert Dialog Manager
AlertDialogManager alert = new AlertDialogManager();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity.this, "Internet connection error", "please connect to working internet connection", false);

      // stop executing code by return
        return;
    }

    // Check if twitter keys are set
    if(TWITTER_CONSUMER_KEY.trim().length() == 0 || TWITTER_CONSUMER_SECRET.trim().length() == 0){
        // Internet Connection is not present
        alert.showAlertDialog
        (MainActivity.this, "Twitter oAuth tokens", "Please set your twitter oauth tokens first!", false);
        // stop executing code by return
        return;
    }

    // All UI elements

    btnLoginTwitter = (Button) findViewById(R.id.btnLoginTwitter);
    btnUpdateStatus = (Button) findViewById(R.id.btnUpdateStatus);
    btnLogoutTwitter = (Button) findViewById(R.id.btnLogoutTwitter);
    txtUpdate = (EditText) findViewById(R.id.txtUpdateStatus);
    lblUpdate = (TextView) findViewById(R.id.lblUpdate);
    lblUserName = (TextView) findViewById(R.id.lblUserName);

    // Shared Preferences
    mSharedPreferences = getApplicationContext().getSharedPreferences(
            "MyPref", 0);

    /**
     * Twitter login button click event will call loginToTwitter() function
     * */
    btnLoginTwitter.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call login twitter function
            loginToTwitter();
        }
    });

    /**
     * Button click event to Update Status, will call updateTwitterStatus()
     * function
     * */
    btnUpdateStatus.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Call update status function
            // Get the status from EditText
            String status = txtUpdate.getText().toString();

            // Check for blank text
            if (status.trim().length() > 0) {
                // update status
                new updateTwitterStatus().execute(status);
            } else {
                // EditText is empty
                Toast.makeText(getApplicationContext(),
                        "Please enter status message", Toast.LENGTH_SHORT)
                        .show();
            }
        }
    });

    /**
     * Button click event for logout from twitter
     * */
    btnLogoutTwitter.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call logout twitter function
            logoutFromTwitter();
        }
    });

    /** This if conditions is tested once is
     * redirected from twitter page. Parse the uri to get oAuth
     * Verifier
     * */
    if (!isTwitterLoggedInAlready()) {
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            // oAuth verifier
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                // Get the access token
                AccessToken accessToken = twitter.getOAuthAccessToken(
                        requestToken, verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                // Hide login button
                btnLoginTwitter.setVisibility(View.GONE);

                // Show Update Twitter
                lblUpdate.setVisibility(View.VISIBLE);
                txtUpdate.setVisibility(View.VISIBLE);
                btnUpdateStatus.setVisibility(View.VISIBLE);
                btnLogoutTwitter.setVisibility(View.VISIBLE);

                // Getting user details from twitter
                // For now i am getting his name only
                long userID = accessToken.getUserId();
                User user = twitter.showUser(userID);
                String username = user.getName();

                // Displaying in xml ui
                lblUserName.setText(Html.fromHtml("<b>Welcome " + username + "</b>"));
            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }
            }
    }

}

/**
 * Function to login twitter
 * */
private void loginToTwitter() {
    // Check if already logged in
    if (!isTwitterLoggedInAlready()) {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
        Configuration configuration = builder.build();

        TwitterFactory factory = new TwitterFactory(configuration);
        twitter = factory.getInstance();

        try {
            requestToken = twitter
                    .getOAuthRequestToken(TWITTER_CALLBACK_URL);
            this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                    .parse(requestToken.getAuthenticationURL())));
        } catch (TwitterException e) {
            e.printStackTrace();
        }
    } else {
        // user already logged into twitter
        Toast.makeText(getApplicationContext(),
                "Already Logged into twitter", Toast.LENGTH_LONG).show();
    }
}

/**
 * Function to update status
 * */
class updateTwitterStatus extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Updating to twitter...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Places JSON
     * */
    protected String doInBackground(String args[]) {
        Log.d("Tweet Text", "> " + args[0]);
        String status = args[0];
        try {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

            // Access Token
            String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
            // Access Token Secret
            String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

            AccessToken accessToken = new AccessToken(access_token, access_token_secret);
            Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

            // Update status
            twitter4j.Status response = twitter.updateStatus(status);

            Log.d("Status", "> " + response.getText());
        } catch (TwitterException e) {
            // Error in updating status
            Log.d("Twitter Update Error", e.getMessage());
        }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog and show
     * the data in UI Always use runOnUiThread(new Runnable()) to update UI
     * from background thread, otherwise you will get error
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Toast.makeText(getApplicationContext(),
                        "Status tweeted successfully", Toast.LENGTH_SHORT)
                        .show();
                // Clearing EditText field
                txtUpdate.setText("");
            }
        });
    }

}

/**
 * Function to logout from twitter
 * It will just clear the application shared preferences
 * */
private void logoutFromTwitter() {
    // Clear the shared preferences
    Editor e = mSharedPreferences.edit();
    e.remove(PREF_KEY_OAUTH_TOKEN);
    e.remove(PREF_KEY_OAUTH_SECRET);
    e.remove(PREF_KEY_TWITTER_LOGIN);
    e.commit();

    // After this take the appropriate action
    // I am showing the hiding/showing buttons again
    // You might not needed this code
    btnLogoutTwitter.setVisibility(View.GONE);
    btnUpdateStatus.setVisibility(View.GONE);
    txtUpdate.setVisibility(View.GONE);
    lblUpdate.setVisibility(View.GONE);
    lblUserName.setText("");
    lblUserName.setVisibility(View.GONE);

    btnLoginTwitter.setVisibility(View.VISIBLE);
}

/**
 * Check user already logged in your application using twitter Login flag is
 * fetched from Shared Preferences
 * */
private boolean isTwitterLoggedInAlready() {
    // return twitter login status from Shared Preferences
    return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
}

protected void onResume() {
    super.onResume();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:35:42.270

将您的活动添加到清单文件

```
<activity
            android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:39:10.150

在清单中添加您的活动，如下所示：

```
 <activity
        android:name=".MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" /> 
```

还可以尝试注册 mainActivity btn.SetOnClicklistener() 的组件：

# android - 从listview开始子活动按钮在android中单击

> ID：13508592
> 
> 赞同：-1
> 
> 时间：2012-11-22T08:32:16.557
> 
> 标签：android

我正在使用一个 android 应用程序。在那，首先我需要存储来自 web 服务的所有数据，然后从 db 查询数据并在 listview 中更新。

我的列表视图项目包含复选框和按钮。当我单击按钮或复选框时，它工作正常（显示 LOG）但是当我单击列表视图中的按钮时我需要启动子活动。

这是我的适配器类，

```
public class GuestListAdapter extends BaseAdapter{
    Context context;
    ArrayList<String > arrayListFirstValue;
    ArrayList<String > arrayListSecondValue;
    ArrayList<String > arrayListThirdValue;
    public GuestListAdapter(Context mcontext, ArrayList<String> arrListFV,ArrayList<String> arrListSV,ArrayList<String> arrListGuestTV)
    {
        arrayListFirstValue =arrListFV;
        arrayListSecondValue =arrLisSV;
        arrayListThirdValue =arrListTV;
        context = mcontext;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return arrayListFirstValue.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return arrayListFirstValue.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {
        // TODO Auto-generated method stub
         if (view == null) {
                LayoutInflater inflater = LayoutInflater.from(parent.getContext());
                view = inflater.inflate(R.layout.guest_list_item, parent, false);
            }

         TextView txtFirstValue = (TextView)view.findViewById(R.id.txt_firstname);
            txtFirstValue .setText(arrayListFirstValue.get(position));
         TextView txtSecondValue = (TextView)view.findViewById(R.id.txt_lastname);
         txtSecondValue .setText(arrayListSecondValue.get(position));
         TextView txtThirdValue = (TextView)view.findViewById(R.id.txt_guest_count);
         txtThirdValue .setText(arrayListThirdValue.get(position));
         Button btnInfo = (Button)view.findViewById(R.id.btn_info);

         CheckBox checkBoxCheckins = (CheckBox)view.findViewById(R.id.checkBoxIsCheckedIn);

         btnInfo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                 System.out.println("Adap button **********");

            }
        });
         checkBoxCheckins.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                 System.out.println("Adap checked **********");

            }
        });

        return view;
    }

} 
```

最后我的问题是当我单击列表视图中的按钮时我需要启动子活动。请告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:46:58.280

您必须使用传递给适配器的活动上下文来启动一个新活动，如下所示：

```
Intent intent = new Intent(context,Activity.class);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:05:35.160

这很简单。只需将您当前的侦听器更改为：

**编辑：**因为您一开始并没有在选项卡的子活动中告诉该列表视图。

```
 btnInfo.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                     Intent intent = new Intent(context, YourNewTabActivity.class);// Your tab parent activity.
intent.putExtra(Constants.TAB_INDEX, tab index number) // pass the index of the tab you want to move to.

    startActivity(intent);

                }
            }); 
```

在您的选项卡活动（父活动）中，您创建一个变量来存储您想要的选项卡的索引

```
private int tabindex = 0; 
```

签入`onCreate`

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

            setContentView(R.layout.main_tab_screen);
            tabHost = (TabHost) findViewById(android.R.id.tabhost);
            tabWidget = getTabWidget();

            if (getIntent().getExtras() != null) {
                tabindex = getIntent().getExtras().getInt(Constants.TAB_INDEX,
                        0); // you check if this parent started from other activity. You child activity will pass the desire tab index here. If nothing is special, just display the  1st tab.
                            }
            initTab();
        } 
    }

    protected void initTab() {
        Intent intent;
        TabHost.TabSpec spec;
        // Add tab child
        spec = tabHost.newTabSpec("Inbox").setIndicator(
                getTabIndicatorView(MainTabActivity.this, "Hộp thư",
                        R.drawable.tin_nhan_tab_selector));
        intent = new Intent(this, com.vtcmobile.ui.InboxActivity.class);
        // intent.putExtra(Constants.INTENT_IS_LOAD, isload);
        spec.setContent(intent);
        tabHost.addTab(spec);
....

        tabHost.setCurrentTab(tabindex); // use the tab index to get the right tab you want.
        tabHost.getTabWidget().focusCurrentTab(tabindex);

    } 
```

# iphone - filterContentForSearchText 委托方法中的“范围”参数应该包含什么？

> ID：13508593
> 
> 赞同：0
> 
> 时间：2012-11-22T08:32:27.710
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我在 UISearchDisplayDelegate 中实现了 filterContentForSearchText 方法。

我可以看到 (NSString*)searchText 是我在文本字段中编写的文本，但范围返回我为 NULL。我为范围提供什么参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:59:06.507

范围是您正在搜索的“区域”，如果您已经实现了它。例如

![使用范围栏搜索](../Images/2ced9256f3f08889cf8642c8720934e7.png)

然后，您可以将相关范围传递给`filterContentForSearchText:scope:`如下：

```
[self filterContentForSearchText:searchString 
                           scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]]; 
```

这取自[Apple 的 TableSearch 示例代码](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html)。

# java - OpenX Java API。如何获得广告商？

> ID：13508598
> 
> 赞同：1
> 
> 时间：2012-11-22T08:32:46.303
> 
> 标签：java, openx

我已经在 Web 服务器上安装了 OpenX-2.8.10。

我正在使用其中的示例连接到 OpenX Server。我想从服务器获取 Advertiser，但我遇到了问题。我正在尝试使用 AdvertiserService，但没有成功。

代码在这里：

```
public class Prototype {
    private final static String serverURL = "http://demo.pwi.ru";
    private final static String openadsDir = "/openx";
    private final static String logonService = "/www/api/v1/xmlrpc/LogonXmlRpcService.php";
    private final static String agencyService = "/www/api/v1/xmlrpc/AgencyXmlRpcService.php";
    private final static String username = "admin";
    private final static String password = "875698";
    private static Integer id = 1;

    public static void main(String[] args) {
        final XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();

        try {
            config.setServerURL(new URL(serverURL + openadsDir + logonService)); 
            XmlRpcClient client = new XmlRpcClient();
            client.setConfig(config);

            String sessionId = (String) client.execute("logon", new Object[]{username, password});
            System.out.println("User logged on with session Id: " + sessionId);

            AdvertiserService service = new AdvertiserService(client, sessionId);
            service.setSessionId(sessionId);

            System.out.println("AdvertiserService: " + service.getAdvertiser(id ));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlRpcException e) {
            e.printStackTrace();
        }
    }
} 
```

控制台说：

用户使用会话 ID 登录：phpads50addd559301e5.24695272 org.apache.xmlrpc.XmlRpcException：无法创建输入流：demo.pwi.ru//ppads50addd559301e5.24695272//AdvertiserXmlRpcService.php at org.apache.xmlrpc.client.XmlRpcSunHttpTransport。 getInputStream(XmlRpcSunHttpTransport.java:65) at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:141) at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:94) at org.apache .xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:44) 在 org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:53) 在 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java :166) 在 org.apache.xmlrpc 的 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:136)。client.XmlRpcClient.execute(XmlRpcClient.java:125) 在 org.openads.proxy.AbstractService.execute(AbstractService.java:111) 在 org.openads.proxy.AdvertiserService.execute(AdvertiserService.java:1) 在 org.openads org.openads.proxy.prototype.Prototype.main(Prototype.java:36) 处的 .proxy.AdvertiserService.getAdvertiser(AdvertiserService.java:118) 原因：java.io.FileNotFoundException: demo.pwi.ru//ppads50addd559301e5。 24695272//AdvertiserXmlRpcService.php at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.getInputStream(XmlRpcSunHttpTransport.java:63) ... 11 更多：java.io.FileNotFoundException：demo.pwi.ru//phpads50addd559301e5.24695272//Sun.net.www.protocol.http.HttpURLConnection 上的 AdvertiserXmlRpcService.php。在 org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:141) 在 org.apache.xmlrpc 的 org.apache.xmlrpc.client.XmlRpcSunHttpTransport.getInputStream(XmlRpcSunHttpTransport.java:63) 的 getInputStream(Unknown Source)。 client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:94) at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:44) at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:53)在 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:166) 在 org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:136) 在 org.apache.xmlrpc.client.XmlRpcClient.execute (XmlRpcClient.java:125) 在 org.openads.proxy.AbstractService.execute(AbstractService.java:111) 在 org.openads.proxy.AdvertiserService。在 org.openads.proxy.AdvertiserService.getAdvertiser(AdvertiserService.java:118) 处执行(AdvertiserService.java:1) 在 org.openads.proxy.prototype.Prototype.main(Prototype.java:36)

# java - 中断tomcat线程是否安全

> ID：13508599
> 
> 赞同：3
> 
> 时间：2012-11-22T08:32:53.390
> 
> 标签：java, multithreading, tomcat

我处于一个奇怪的境地。在我的网络服务器（tomcat）中，在网络请求中，我基本上需要取消以前的请求。我引用了执行上一个请求的线程。所以我可以直接中断那个线程，节点会做剩下的事情。

我知道你不应该中断你不拥有的线程。但是在这种情况下中断tomcat线程是否安全？另一种方法是什么？维护自己的线程池是浪费资源和开销

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:03:12.510

维护自己的线程池是一种资源浪费，但在其他方面也是一种收获，比如应用程序服务器的稳定性。所以你需要决定什么更重要：几千字节的内存和 CPU 周期，还是一个稳定、可靠的应用程序。

中断另一个线程的问题是您通常无法确定其他线程在代码中的哪个位置。您可能希望为此使用锁定：

线程 A 在可以安全中断时锁定某些内容，线程 B 检查锁定，如果无法获得，则中断 A。

但是当 A 正要放弃锁，B 检查锁，A 解锁并开始清理，B 发送中断时会发生什么？

所以你真的应该使用自己的线程池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:19:38.647

我不会这样做。不是 100% 确定为什么，但我认为这些线程来自 Tomcat 自己的工作线程池，并且一个接一个地杀死它们会/可能最终导致一个无响应的 Tomcat 实例。（这只是一个假设）。

我认为“维护自己的线程池是浪费资源和开销”。我认为这是一件小事，线程池是个好人，不要害怕他们。我不知道你的应用程序的细节，但我认为如果你通过 JConsole 测量开销，你可以决定做一些优化的点，线程池不太可能成为瓶颈。

我可以向您建议的最好的想法是**完全重新设计**：使用短返回 HTTP 请求通过将任务提交到`ExecutorService`或东西在后台启动长时间运行的异步操作。这样就不需要损害 Tomcat 自己的线程，并且从用户/客户端的角度来看，您的应用程序的整体可用性也可以得到改善。

总结一下：我认为做你提到的事情是不安全的，上一段中描述了一种可能的其他方式来做你想做的事情。

# vb.net - Powerpoint 2007 图表查找数据标签位置

> ID：13508603
> 
> 赞同：0
> 
> 时间：2012-11-22T08:33:15.350
> 
> 标签：vb.net, powerpoint, com-interop

我有一个问题：我正在使用 Interop 在 Powerpoint 中创建图表，并且效果很好。但我有一个问题：我需要获取数据序列数据标签的确切位置来绘制一些形状。但是如何获得该死的位置呢？DataLabel 有 left 和 top 值，但它们似乎是无效的，例如：如果我在那个位置上画了一些东西，它就会出现。是否有某种转变，我必须做的？

我的代码如下所示： Imports pptNS = Microsoft.Office.Interop.PowerPoint

```
for i = 1 to Targetchart.Seriescollection.count

    Dim DtL = DirectCast(TargetChart.SeriesCollection(i).datalabels, pptNS.DataLabels)
    For x = 1 To DtL.count
         Dim   DTS = DirectCast(DTL.Item(DTLItem), pptNS.DataLabel)
         Dim Left =dts.left 'seems to be wrong?
    next
 next 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:32:18.967

我找到了一个解决方案： Topposition 将是： TopPos = DTS.Top + TargetChart.ChartArea.Top + TargetShape.Top + 1.5 Dim LeftPos = DTS.Left + TargetChart.ChartArea.Left + TargetShape.Left

1.5。为 Topposition 添加，因为有一点差距...

# visual-studio-2010 - 像 Visual Studio 中的项目引用一样使用程序集引用？

> ID：13508605
> 
> 赞同：0
> 
> 时间：2012-11-22T08:33:19.330
> 
> 标签：visual-studio-2010, visual-studio, reference

我有一个带有一些引用 dll 的 C# 项目。要检查整个项目，最好将引用的 dll 临时替换为现有项目引用。

好处是“在整个解决方案中的搜索”和“转到定义”更有意义。

是否有替换 *.csproj 文件中的引用的技巧？或者是否有 Visual Studio 扩展来实现这些好处？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:47:07.673

我找到了 ReSharper 的解决方案。您可以使用扩展 ReSharper 打开和反汇编引用并设置断点。

# java - 在Java中将数据从数组添加到html表

> ID：13508608
> 
> 赞同：-3
> 
> 时间：2012-11-22T08:33:20.373
> 
> 标签：java, html, android-webview

我正在尝试在 web 视图中为每 3 列添加图像，但图像以水平方式显示在表格之外。我哪里错了？请提示。

```
 String str = "";           
        str += "<table width='200' border='1'><tr>";
        int i = 1;

        for (i=1; i < my_image.length-1; i++) {
            if (i%3==0) {    
                str += "<td><a href='"+my_image[i]+"'"+" class='popup-open'><img src='"+my_image[i]+""+"width='80' height='65'></a></td></tr><tr>";
            } else {
                str+= "<td><a href='"+my_image[i]+"'class='popup-open'><img src=' "+my_image[i]+"' width='80' height='65'></a></td></tr>";    
            }
            str+="</tr></table>";
        }

        html_content = "<strong>"+title+"</strong>" +
                " <br><br><img src='"+single_image+"'width='300' height='211'>" +    
                "<br> " +   
                ""+content+"<br>"+str; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:48:04.010

正如已经说过的那样，您可能在某处缺少结束标记或撇号。

实际上，通过串联`String`s 来生成 HTML 代码并不是一个好主意。我建议您检查这个[Jackarta ECS](http://jakarta.apache.org/ecs/index.html)库以生成 HTML。它负责所有技术环节，并声称与 HTML 4.0 兼容，但不再受支持。

否则，您可以从[javax.swing.text.html检查这个](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/html/package-summary.html)[JATL](http://code.google.com/p/jatl/)项目或 HTMLEditorKit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:38:10.163

几乎可以肯定，您不会在某个地方关闭一个标签，每个打开的 HTML 标记都应该关闭。

你肯定会结束你的桌子，`<tr></tr>`这不是很好。

***您绝对应该对使用 JSP 或类似工具进行一些研究。从长远来看，在您的 JSP 中使用 JSTL 会更可取，更易于阅读且更易于维护。阅读一个 JSTL / JSP 教程的一个小时将为您节省很多未来。***

编辑：实际上，您似乎没有关闭`'`src 属性：

`str += "<td><a href='"+my_image[i]+"'"+" class='popup-open'><img src='"+my_image[i]+""+`

应该：

`str += "<td><a href='"+my_image[i]+"'"+" class='popup-open'><img src='"+my_image[i]+"'"+`

也使用宽度和高度属性是不好的形式。使用类属性设置一个类并使用 CSS 调整图像大小 - 如果您想在将来的任何时候更改图像的大小，它将防止头痛/代码更改。

# c#-4.0 - 文件读取错误

> ID：13508609
> 
> 赞同：0
> 
> 时间：2012-11-22T08:33:31.923
> 
> 标签：c#-4.0, file-io, process, exe

我有两种方法。一种用于图像比较，一种用于文件读取。我所做的是我调用一个比较两个文件夹之间的图像并创建日志文件的过程。现在第二种方法读取该日志文件并解析数据。但是当我调用第二种方法时，它说文件不存在，这是因为 exe 需要一些时间来制作日志文件。我已经使用了 Thread.Sleep() 但它仍然不起作用，我也不能像使用它一样使用该 file.exist 方法，如果文件不存在，那么它将跳过我不想要的方法/文件.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:36:39.597

您可以使用[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)等待第一个进程完成，然后在调用第二种方法时知道日志文件何时完成/存在。

# flash - Flex SDK 与 Flex 框架

> ID：13508612
> 
> 赞同：0
> 
> 时间：2012-11-22T08:33:51.347
> 
> 标签：flash, frameworks, sdk

Flex SDK v4.6 和 Flex Framework 3 或 4 之间的主要区别是什么（是否有适用于 Flex Framework 3 或 4 的“工具包”）？更一般地说，Flex SDK 和框架之间的主要区别是什么？我已尝试按照此初学者教程[FlashDevelop 初学者指南 – Basix](http://active.tutsplus.com/tutorials/beginners-guide-to-flashdevelop-intro-basix/)中的说明下载 Flex Framework ，但我在网上的任何地方都找不到它（甚至在 Adob​​e 网站上也找不到）。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:37:12.840

SDK stands for "Software Development Kit". It's basically the thing you need to compile your Flex application.

A framework is something that describes something you use when programming. The Flex Framework provides all the things you can use when programming Flex applications, e.g. the spark or mx components or even MXML.

Of course the Flex SDK can handle all the technologies that are part of the Flex Framework. When the tutorial you mentioned says `"using the Adobe Flex SDK does not mean that you need to use the Adobe Flex framework or MXML"`, it means that it doesn't force you to use anything from the Flex Framework. You could write a simple ActionScript application without using anything from the Framework, but you would still need the SDK to compile it.

# iphone - 如何创建像这个图像的气泡？在 iPhone 中

> ID：13508616
> 
> 赞同：1
> 
> 时间：2012-11-22T08:34:34.220
> 
> 标签：iphone, ios, core-graphics, quartz-graphics

![在此处输入图像描述](../Images/5dc9c3e221d0fa83360de84b574d5999.png)

有几个提供语音气泡的应用程序，我想知道如何创建示例图像中的气泡。

气泡的长度根据文本的大小进行调整。为了使语音气泡像示例图像中的气泡一样，我应该使用“Quartz Core 框架”吗？

请帮我 ！

# sql - int 数组和 IN 语句

> ID：13508617
> 
> 赞同：2
> 
> 时间：2012-11-22T08:34:35.110
> 
> 标签：sql, sql-server

如何在 SQL Server 中声明 int 数组？

填好后，我想在IN语句中使用它来检查，我该如何更改我的代码？

```
declare @mode int =1 
declare @acceptedFormTypeIds table (id int)

case @mode
    when 1 then
        insert into @acceptedFormTypeIds(id) values (1, 2, 3, 4)
    when 2 then 
        insert into @acceptedFormTypeIds(id) values (1, 3)
    when 3 then 
        insert into @acceptedFormTypeIds(id) values (2, 4)
    else
        insert into @acceptedFormTypeIds(id) values (1, 2, 3, 4)
end

...

WHERE
    tFRM.SendDate between @datefrom and @dateto
    and tFRM.TemplateId IN @acceptedFormTypeIds.id 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:44:32.260

在数据库中，永远不要考虑数组。想想套装或桌子。

插入语句的结构应该是

```
insert into @acceptedFormTypeIds(id) values (1), (2), (3), (4) 
```

您可以使用`if`

```
if @mode=2
begin
   insert into @acceptedFormTypeIds(id) values (1), (3)
end
else
begin
    if @mode=3
    begin
       insert into @acceptedFormTypeIds(id) values (2), (4)
    end
    else
    begin
       insert into @acceptedFormTypeIds(id) values (1), (2), (3), (4)
    end
end 
```

`FormTypeModeAccepted`但是，根据您的使用情况，可能值得拥有一张桌子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T08:46:03.177

没有类似 switch 的语句，`case`是一个表达式，所以你可以使用`if`.

要插入多条记录，请使用`values (2), (4)`而不是`values (2, 4)`.

使用 中的表格时`in`，需要从中进行选择。

```
declare @mode int = 1
declare @acceptedFormTypeIds table (id int)

if (@mode = 1) begin
  insert into @acceptedFormTypeIds(id) values (1), (2), (3), (4)
end else if (@mode = 2) begin 
  insert into @acceptedFormTypeIds(id) values (1), (3)
end else if (@mode = 3) begin 
  insert into @acceptedFormTypeIds(id) values (2), (4)
end else begin
  insert into @acceptedFormTypeIds(id) values (1), (2), (3), (4)
end

...    
WHERE
    tFRM.SendDate between @datefrom and @dateto
    and tFRM.TemplateId IN (select id from @acceptedFormTypeIds) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:46:07.487

要切换语句，您需要使用`IF`而不是`CASE`，您还需要将要插入的每个值放在它自己的括号中。

例如

```
DECLARE @mode INT = 1;
DECLARE @acceptedFormTypeIds TABLE (id INT);

IF @mode = 1
    INSERT @acceptedFormTypeIds (id) VALUES (1), (2), (3), (4);
ELSE IF @mode = 2
    INSERT @acceptedFormTypeIds (id) VALUES (1), (3);
ELSE IF @mode = 2
    INSERT @acceptedFormTypeIds (id) VALUES (2), (4);
ELSE 
    INSERT @acceptedFormTypeIds (id) VALUES (1), (2), (3), (4);

SELECT  *
FROM    @acceptedFormTypeIds; 
```

# iphone - 在Objective C中使用自动布局相对于父视图的位置

> ID：13508622
> 
> 赞同：2
> 
> 时间：2012-11-22T08:35:06.917
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我有一个 UITextView，我希望它总是距离它的父视图（滚动视图）的底部 10px。问题是我不知道如何告诉自动布局它应该执行底部空间到：父视图，而不是超级视图。

这就是我现在所拥有的：

![在此处输入图像描述](../Images/535ed34f3e805b9db12a1c969c184748.png)

**更新：**

我需要类似的东西：

![在此处输入图像描述](../Images/33fa7d1ce7e7dfa36431509357c0c1a7.png)

我从这里得到了 - [http://www.techotopia.com/index.php/Working_with_iOS_6_Auto_Layout_Constraints_in_Interface_Builder](http://www.techotopia.com/index.php/Working_with_iOS_6_Auto_Layout_Constraints_in_Interface_Builder) - 我想要一个与它所在的视图相关的 UITextView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:34:21.220

单击“Bottom space to: superview”约束的齿轮并对其进行编辑。将常数设置为 10。

### 更新

我对此进行了一些调查，并确定自动布局中存在错误。具体来说，自动布局的作用就像滚动视图的大小是 0⨉0 而不是其实际大小。

由于 tis，如果您的文本视图具有 top-space-to-superview 约束和 bottom-space-to-superview 约束，则只有顶部约束将被兑现。（我尝试将顶部约束的优先级设置为 1，最小值，底部约束仍然被忽略。）如果删除 中的顶部约束`viewDidLoad`，底部约束将被兑现，但*文本视图将被布置为滚动视图的高度为零*。这意味着文本视图的底部边缘将比滚动视图的*顶部边缘高 10 个点。*

这发生在我使用情节提要和 xib 进行的测试中。

# objective-c - 检测 NSURL 是否是 UIImage 类支持的文件格式的 URL

> ID：13508627
> 
> 赞同：0
> 
> 时间：2012-11-22T08:35:41.157
> 
> 标签：objective-c, ios, uiwebview, uiimage, nsurl

我正在寻找一种方法来检测 NSURL 是否是 UIImage 类支持的文件格式的 URL，如果是，则在 MWPhotoBrowser (https://github.com/mwaterfall/MWPhotoBrowser) 之类的文件中打开它UIWebView 的。我的第一个想法是使用所有受支持的文件扩展名的 if 条件。我想知道是否有人知道更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:51:17.920

在您至少开始获取 URL 之前，您不知道 URL 中的内容。一些 URL 看起来像以文件名结尾——甚至是图像文件名——但实际上指向 HTML 页面（例如，用于查看所述图像）。一些 URL 似乎没有以文件名结尾，但确实直接指向图像文件。

`HEAD`通过发出 HTTP请求，您可以很好地提示 URL 中的数据类型：查看[`NSURLRequest`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)并[`NSHTTPURLResponse`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html)查找 Content-Type 标头。（那些只是描述请求和响应；您需要[`NSURLSession`](https://developer.apple.com/documentation/foundation/nsurlsession)执行请求并获得响应。）

但是，即使是 HEAD 请求也并不总是正确报告：真正确定 URL 中是否有图像的唯一方法是获取它——大多数图像格式可以在数据的前几个字节中识别，因此您可以开始提取，查看您获得的第一个部分数据，如果您不想要其余部分，则中止提取。

# php - IE10 jquery 未定义，也忽略了 X-UA 元

> ID：13508630
> 
> 赞同：3
> 
> 时间：2012-11-22T08:36:18.367
> 
> 标签：php, jquery, magento, internet-explorer-10

我们在 Magento 中设计了一个新站点，并且在 Firefox、Chrome、Opera 和 IE 7,8 和 9 和 10 合规性中看起来一切都很好......但是 IE10 标准在以下无冲突脚本上返回 jquery 未定义错误（第 32 行字符 5 )

```
var $j = jQuery.noConflict(); 
```

我尝试将脚本移动到头部的顶部、底部、链接脚本的上方和下方。我尝试将 noconflict 放入脚本本身。我已经改变了导致问题的 DOCTYPES 想法。因为它在所有其他版本中都可以正常工作，所以我还尝试使用 X-UA for 9 并模拟 9 元，它们都被忽略，并尝试了 .htaccess 方法。无济于事。IE10 似乎只是做它想做的事。

由于我不是 jQuery 专业人士，并且仍在学习为 IE10 设计的来龙去脉，因此我很茫然，并希望获得有关如何修复它的任何建议。该网站仍在开发中（请原谅我没有发布正确的链接，因为我们还不希望它被抓取）**。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:21:43.517

您的错误不是 IE 10 独有的——我也可以在 Opera 12 中看到它：

> 在[http://www.ecigexpress.com/newecx/](http://www.ecigexpress.com/newecx/)第 6 行第 2 列抛出错误：
> 
> var $j = jQuery.noConflict();
> 
> Das verlinkte Skript wurde nicht geladen。[未加载链接脚本。]

您正在尝试在包含 jQuery JS 文件之前访问 jQuery 对象。仔细检查您的 JS 包含的顺序。jQuery 应该是第一位的。

此外，如果您使用类似以下的构造，则根本不需要担心`noConflict()`设置：

```
jQuery( document ).ready( function( $ ) {

    /* jQuery passes itself to the event handler function and we use
     * the local name $ for jQuery in this functions scope. */

     $( [] ) == jQuery( [] );

} ); 
```

# .net - 在foursquare上允许消费者应用

> ID：13508634
> 
> 赞同：1
> 
> 时间：2012-11-22T08:36:30.393
> 
> 标签：.net

我创建了一个带有 .NET 后端的消费者应用程序，以使用foursquare API 功能进行访问。通过网络安装应用程序工作正常，但问题是当使用 Iphone Foursquare 应用程序时允许创建的消费者应用程序，以下错误消息显示，“无法加载此网络内容，请重试..”并且应用程序不会安装。

请告诉我在设置消费者应用程序时我错过了哪一步。

# asp.net-mvc - 无法在 asp.net web api 中发布具有布尔值的数据

> ID：13508642
> 
> 赞同：1
> 
> 时间：2012-11-22T08:36:51.643
> 
> 标签：asp.net-mvc, jquery, asp.net-web-api

我正在使用现有数据库首先使用 EF 代码处理 asp.net mvc webapi。我有一堂课，

```
public class User
{
public bool IsAgree{get; set;}
} 
```

我正在使用 MySql 数据库，我的表看起来像。

```
--------------
|ID  |IsAgree|
--------------
|int  |tinyint|
-------------- 
```

我有一个帖子动作，比如

```
public HttpReponseMessage PostUser(HttpRequestMessage request,User user)
{
// some code to handle user data..
} 
```

从我的角度来看，我正在尝试将一些数据发布到动作中，例如，

```
$(document).ready(function () {
            var sendata = {"IsAgree":true};
            $.ajax({
                url: '/api/account',
                type: 'POST',
                data: sendata,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                cache: false,
                success: function (data) {
                    alert(data.status);
                },
                error: function (xhr) { alert(xhr.status); }
            });
        }); 
```

当我在操作中设置断点时，它显示用户为`null`并且我收到警报消息，`400`即错误请求。我的 json 数据是否适合我的模型？请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:44:39.073

尝试以这种方式发送数据：

> 数据：JSON.stringify({ sendata })

# html - float:left 尽可能填充同一列

> ID：13508643
> 
> 赞同：5
> 
> 时间：2012-11-22T08:36:56.417
> 
> 标签：html, css

我正在尝试使用以下规则放置一些 div：尽可能填充第一列，然后（当第一列已满时）填充第二列，等等。（请参见下图）

这就是我想要的：（用Paint创建！）

![目标](../Images/4dfa6d8c08fe2f7b8904bc247d44bbf7.png)

**在上图中，如您所见，第一列有 1、2、3、4，并且没有足够的垂直空间将 5 放入第一列。所以 5 应该放在第二列...**

我尝试使用 来创建类似于上图的`float:left`内容，但结果如下：

![当前代码](../Images/91fe4ee97efb506cfd5774d3ef96d56f.png)

如何创建类似于第一个图像的东西？我当前的代码（创建第二个图像）有什么问题？

* * *

这是我的 HTML 代码：

```
<div class="container">
<div class="i1">1</div>
<div class="i1">2</div>
<div class="i1">3</div>
<div class="i1">4</div>
<div class="i2">5</div>
<div class="i3">6</div>
<div class="i1">7</div>
<div class="i1">8</div>
</div> 
```

这是我的 CSS：

```
.container {
    overflow:scroll;
    width:10000px;
    height:200px;
    background:skyblue;    
    position:absolute;
}
.i1,.i2,.i3 {
    float:left;    
    width:100px;
    background:lime;
    border-radius: 20px;
    text-align:center;
}
.i1 {
    height:33px;
}
.i2 {
    height:66px;   
}
.i3 {
    height:100px;   
} 
```

[我的代码小提琴](http://jsfiddle.net/AQ7bp/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:46:09.763

> 只是现代平板电脑和智能手机应该正确显示

在这种情况下，请使用[CSS3 列](http://www.w3.org/TR/css3-multicol/)。浏览器[支持](http://caniuse.com/multicolumn)应该足够好。

[http://jsfiddle.net/thirtydot/AQ7bp/4/](http://jsfiddle.net/thirtydot/AQ7bp/4/)

```
.container {
    -webkit-column-width: 100px;
    -moz-column-width: 100px;
    column-width: 100px;

    -webkit-column-gap: 5px;
    -moz-column-gap: 5px;
    column-gap: 5px;
}
.i1,.i2,.i3 {
    display: inline-block;
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T08:48:11.083

您必须将列分成额外的 div。浮动左对齐元素水平对齐，因此它们的行为就像句子中的单词。包装 div 的每个部分并将包装器向左浮动会产生您想要的效果，但仅在这种特定情况下。如果这要更具动态性，您可能必须重新考虑您的设计。

HTML：

```
<div class="container">
    <div class="wrap">
        <div class="i1">1</div>
        <div class="i1">2</div>
        <div class="i1">3</div>
        <div class="i1">4</div>
    </div>
    <div class="wrap">
        <div class="i2">5</div>
        <div class="i3">6</div>
    </div>
    <div class="wrap">
        <div class="i1">7</div>
        <div class="i1">8</div>
    </div>
</div>​ 
```

CSS：

```
.container {
    overflow:scroll;
    width:10000px;
    height:200px;
    background:skyblue;    
    position:absolute;
}

.wrap
{
    float: left;
    width: 102px;
}

.i1,.i2,.i3 {   
    width:100px;
    background: #000;
    border-radius: 20px;
    text-align:center;
    color: #fff;
}
.i1 {
    height:33px;
}
.i2 {
    height:66px;   
}
.i3 {
    height:100px;   
}​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/PyT5w/](http://jsfiddle.net/Kyle_Sevenoaks/PyT5w/)（我改变了颜色，因为它们伤害了我的眼睛。）

* * *

在对问题进行一些澄清之后，如果要动态填充高度变化，那么没有不使用一些疯狂 Javascript 的解决方案。你必须想出另一种设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T09:29:28.460

您可能可以使其与[flexbox](http://dev.w3.org/csswg/css3-flexbox/)一起使用。我不确定 iOS 浏览器的支持，但较新的 webkit 浏览器确实支持它，所以它可能值得一看。

```
.container {
  overflow:scroll;
  width:10000px;
  height:200px;
  background:skyblue;    
  display: -webkit-flex;
  -webkit-flex-flow: column wrap;
} 
```

# android - 无法为 AlertDialog.Builder 设置适配器

> ID：13508645
> 
> 赞同：0
> 
> 时间：2012-11-22T08:37:12.140
> 
> 标签：android, adapter, alert

我正在尝试实现这一点：[分享 Facebook](http://clickclickclack.wordpress.com/2012/01/03/intercepting-androids-action_send-intents/#)

在我的应用程序中，我有一个按钮，当用户单击我的按钮时，我希望出现 AlertDialog，但我发现适配器未设置为 AlerDialog。

我使用这段代码：

```
 shareb = (ImageView) findViewById(R.id.shareb);
 shareb.setOnClickListener(new View.OnClickListener() {

     public void onClick(View v) {

         sendIntent = new Intent();
         sendIntent.setAction(Intent.ACTION_SEND);
         activities = mContext.getPackageManager().queryIntentActivities(sendIntent, 0);
         builder = new AlertDialog.Builder(mContext);
         builder.setTitle("Share with...");
         final ShareIntentListAdapter adapter = new ShareIntentListAdapter((Activity) mContext, R.layout.basiclistview, activities.toArray());
         builder.setAdapter(adapter, new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface dialog, int which) {
                 // TODO Auto-generated method stub
                 ResolveInfo info = (ResolveInfo) adapter.getItem(which);
                 if (info.activityInfo.packageName.contains("facebook")) {
                     postFacebookMessage();
                 } else {
                     Intent intent = new Intent(android.content.Intent.ACTION_SEND);
                     intent.setClassName(info.activityInfo.packageName, info.activityInfo.name);
                     intent.setType("*/*");
                     intent.putExtra(Intent.EXTRA_SUBJECT, "I just read " + knowTitle);
                     intent.putExtra(Intent.EXTRA_TEXT, knowTitle + "Read the full article via MomsApp by EnfaMama A+ at http://meadjohnsonasia.com.my/mobileapp");
                     ((Activity) mContext).startActivity(intent);
                 }

             }

         });

         builder.create().show();
     }
 }); 
```

然后我使用这个作为适配器：

```
public class ShareIntentListAdapter extends ArrayAdapter < Object > {
    Activity context;
    private final Object[] items;

    int layoutId;

    public ShareIntentListAdapter(Activity context, int layoutId, Object[] items) {
        super(context, layoutId, items);

        this.context = context;
        this.items = items;
        this.layoutId = layoutId;

    }

    public View getView(int pos, View convertView, ViewGroup parent) {
        LayoutInflater inflater = context.getLayoutInflater();
        View row = inflater.inflate(layoutId, null);
        TextView label = (TextView) row.findViewById(R.id.text1);
        label.setText(((ResolveInfo) items[pos]).activityInfo.applicationInfo.loadLabel(context.getPackageManager()).toString());
        ImageView image = (ImageView) row.findViewById(R.id.logo);
        image.setImageDrawable(((ResolveInfo) items[pos]).activityInfo.applicationInfo.loadIcon(context.getPackageManager()));
        System.out.println(layoutId);
        return (row);

    }

} 
```

我发现getView函数没有运行！因为我设置了 System.out.println()，它没有打印。

当我运行此代码时，与...共享它似乎没有任何内容！

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:28:21.083

像下面一样实例化您的 sendIntend ，

```
sendIntent = new Intent(Intent.ACTION_SEND, null);
sendIntent.addCategory(Intent.CATEGORY_DEFAULT);
sendIntent.setType("text/plain"); 
```

那么你的名单就会被填满。

我的意思是，

```
public class MainActivity extends Activity {

    ImageView shareb;
    Intent sendIntent;
    AlertDialog.Builder builder;
    List<ResolveInfo> activities;
    Context mContext;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mContext= getApplicationContext();

        shareb = (ImageView) findViewById(R.id.imageView1);
        shareb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {               
                sendIntent = new Intent(Intent.ACTION_SEND, null);
                sendIntent.addCategory(Intent.CATEGORY_DEFAULT);
                sendIntent.setType("text/plain");

                activities =  mContext.getPackageManager().queryIntentActivities(sendIntent, 0);

                builder = new AlertDialog.Builder(MainActivity.this);
                builder.setTitle("Share with...");
                final ShareIntentListAdapter adapter = new ShareIntentListAdapter(MainActivity.this, R.layout.basiclistview, activities.toArray());                
                builder.setAdapter(adapter, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        ResolveInfo info = (ResolveInfo) adapter.getItem(which);
                        if (info.activityInfo.packageName.contains("facebook")) {
                            //postFacebookMessage();
                        } else {
                            Intent intent = new Intent(android.content.Intent.ACTION_SEND);
                            intent.setClassName(info.activityInfo.packageName, info.activityInfo.name);
                            intent.setType("*/*");
                            intent.putExtra(Intent.EXTRA_SUBJECT, "I just read ");
                            intent.putExtra(Intent.EXTRA_TEXT, "Read the full article via MomsApp by EnfaMama A+ at http://meadjohnsonasia.com.my/mobileapp");
                            ((Activity) mContext).startActivity(intent);
                        }

                    }

                });

                builder.create().show();
            }
        });
    }

} 
```

# uitableview - 项目问题（coredata+rss）

> ID：13508646
> 
> 赞同：1
> 
> 时间：2012-11-22T08:37:15.993
> 
> 标签：uitableview, core-data, rss

我有一个来自 github 的源代码：

> [https://github.com/c3522541/RSSFun](https://github.com/c3522541/RSSFun)

这是一个简单的 rss 阅读器。我想了解如何使用 coredata 保存新闻列表。我从创建数据模型开始`NSMenegedObjectSubclass`，然后就完成了！

但是接下来我该怎么办？我没有想法，我试图做这样的事情：

> [https://developer.apple.com/library/ios/#samplecode/ThreadedCoreData/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010723](https://developer.apple.com/library/ios/#samplecode/ThreadedCoreData/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010723)

在项目中，但它不起作用。

请帮我一些建议

# events - Bbone 渲染行为/切换

> ID：13508649
> 
> 赞同：0
> 
> 时间：2012-11-22T08:37:37.850
> 
> 标签：events, backbone.js, render

对于那些有骨干经验的人来说，这是一个非常简单的问题，但这里的答案仍然非常有帮助。不是在寻找功能性答案，而是更多关于这个特定示例的实际情况。

使用以下代码（一些简单的添加/从收藏夹中删除）

```
render: function() {
    $(this.el).html(this.model.get('name'));
    $(this.el).append("<span class='unfav'>remove</span>");
    $(this.el).append("<span class='fav'>add</span>");
    if( this.model.get("selected") == true ){
        $(this.el).addClass("selected");
    } // Should we really need to have an 'else' conditions here that removes the clas :( ? sound weird to me.
    return this;
} 
```

**完整代码在这里[http://jsfiddle.net/eHAfY/3/](http://jsfiddle.net/eHAfY/3/)** （感谢@cymen的代码库）

添加元素后，

不明白为什么当我单击“添加”时项目会更改，而当我单击删除时不会更改：如果有一个条件在为 true 时生效，为什么当 false 时它仍然是类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:09:51.830

您的渲染方法会擦除其内部 HTML，`$(this.el).html(...);`而这正是渲染方法通常所期望的。

仅当为真`$(this.el).addClass("selected");`时才修改外部容器`model.selected`，并且您的视图无法知道当条件为假时它应该删除此类。

# php - php 致命错误：在非对象上调用成员函数 children()

> ID：13508658
> 
> 赞同：0
> 
> 时间：2012-11-22T08:38:06.897
> 
> 标签：php

试图使这种代码和平工作。但我得到了致命错误。我不知道如何解决这个问题。任何帮助将不胜感激。错误是针对这一行的： `$counts = $sxml-> children('http://a9.com/-/spec/opensearchrss/1.0/');`

```
// generate feed URL
      $feedURL = "http://gdata.youtube.com/feeds/api/videos/-/{$q}
      ?orderby=viewCount&max-results={$i}";

      // read feed into SimpleXML object
      $sxml = simplexml_load_file($feedURL);

      // get summary counts from opensearch: namespace
      $counts = $sxml-> children('http://a9.com/-/spec/opensearchrss/1.0/');
      //$counts = $sxml-> children('http://www.opensearch.org/Specifications/OpenSearch/1.1');

      $total = $counts->totalResults;
      $startOffset = $counts->startIndex; 
      $endOffset = ($startOffset-1) + $counts->itemsPerPage; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:39:54.477

`simplexml_load_file`失败了。它在失败时返回 false（无对象）。

您的服务器无法访问该 URL，或者它返回了无效的 XML。

从[手册](http://php.net/manual/en/function.simplexml-load-file.php)：

> 返回 SimpleXMLElement 类的对象，其属性包含 XML 文档中保存的数据，如果失败则返回 FALSE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-10T09:43:53.743

为避免出现此错误，您应该使用如下条件：

```
if(false !== $sxml){
      //your code
} 
```

# android - 当在同一布局中单击切换按钮时，如何在运行时将文本视图添加到布局

> ID：13508662
> 
> 赞同：-2
> 
> 时间：2012-11-22T08:38:25.467
> 
> 标签：android, android-layout, android-emulator

当在同一布局中单击切换按钮时，如何在运行时将文本视图添加到布局？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:40:27.583

这里有一个例子：

（打开按钮单击）

```
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mylayout)
TextView txt1 = new TextView(MyClass.this);
linearLayout.setBackgroundColor(Color.TRANSPARENT);
linearLayout.addView(txt1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:40:49.483

可能会更容易显示/隐藏它。使用`setVisibility(value)`, 值可以是`View.GONE`,`View.INVISIBLE`或`View.VISIBLE`.

# c++ - 逐像素复制ipl图像

> ID：13508664
> 
> 赞同：0
> 
> 时间：2012-11-22T08:38:34.090
> 
> 标签：c++, c, image-processing, opencv

问题解决了......我使用了cvGet2D，下面是示例代码

```
 CvScalar s;
        s=cvGet2D(src_Image,pixel[i].x,pixel[i].y);         
        cvSet2D(dst_Image,pixel[i].x,pixel[i].y,s); 
```

其中 src_Iamge 和 dst_Image 分别是源图像和目标图像，而 pixel[i] 是我想在 dst 图像中绘制的选定像素。我在下面包含了真实的图像。

有一个源 Ipl 图像，我想将图像的某些部分逐个像素复制到新的目标图像。任何人都可以告诉我怎么做吗？我在opencv中使用c，c ++。例如，如果下面的图像是源图像， ![在此处输入图像描述](../Images/66a86a6039b0d12717dad8b421493a09.png)

真实输出图像![在此处输入图像描述](../Images/cbf65e250ab7b17c543bc5800d901a03.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:24:40.440

EDIT:

I can see the comments suggesting cvGet2d. I think, if you just want to show "points", it is best to show them with a small neighbourhood so they can be seen where they are. For that you can draw white filled circles with origins at (x,y), on a mask, then you do the `copyTo`.

```
using namespace cv;

Mat m(input_iplimage);
Mat mask=Mat::zeros(m.size(), CV_8UC1);

p1 = Point(x,y); 
r = 3;
circle(mask,p1,r, 1); // draws the circle around your point.
floodFill(mask, p1, 1); // fills the circle.

//p2, p3, ...

Mat output = Mat::zeros(m.size(),m.type()); // output starts with a black background.
m.copyTo(output, mask); // copies the selected parts of m to output 
```

OLD post:

Create a mask and copy those pixels:

```
#include<opencv2/opencv.hpp>
using namespace cv;

Mat m(input_iplimage);
Mat mask=Mat::zeros(m.size(), CV_8UC1); // set mask 1 for every pixel you wanna copy.
Rect roi=Rect(x,y,width,height);  // create a rectangle
mask(roi) = 1;   // set it to 0.
roi = Rect(x2,y2,w2,h2);
mask(roi)=1;     // set the second rectangular area for copying...

Mat output = 100*Mat::ones(m.size(),m.type()); // output with a gray background.
m.copyTo(output, mask); // copy selected areas of m to output 
```

Alternatively you can copy Rect-by-Rect:

```
Mat m(input_iplimage);
Mat output = 100*Mat::ones(m.size(),m.type()); // output with a gray background.

Rect roi=Rect(x,y,width,height);
Mat m_temp, out_temp;
m_temp=m(roi);
out_temp = output(roi);
m_temp.copyTo(out_temp);

roi=Rect(x2,y2,w2,h2);
Mat m_temp, out_temp;
m_temp=m(roi);
out_temp = output(roi);
m_temp.copyTo(out_temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:08:49.550

您的问题的答案只需要查看 OpenCV 文档或在您最喜欢的搜索引擎中进行搜索。

[在这里](https://stackoverflow.com/questions/4742251/pixel-access-in-opencv-2-2)，您可以获得 Ipl 图像和较新的 Mat 数据的答案。

为了获得我在您的图像中看到的输出，我会设置 ROI，这样会更有效。

# jquery - jQuery 交换 4 个 div

> ID：13508666
> 
> 赞同：0
> 
> 时间：2012-11-22T08:38:38.137
> 
> 标签：jquery

我有 4 个 div，其中 3 个是拇指和一个大尺寸的 div。我想要的只是单击小 div 并与大 div 交换内容。我有一个html代码：

```
<div id='t1'>CONTENT 1</div>
<div id='t2'>CONTENT 2</div>
<div id='t3'>CONTENT 3</div>
<div id='big'>CONTENT DEFAULT</div> 
```

例如，如果我单击 div id=t1，则 div t1 的内容将是 CONTENT DEFAULT 并且

div id=big 的内容将为 CONTENT 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:47:13.357

这个 jQuery 应该可以工作，使用 swap / temp 模式：

```
$('div[id^=t]').on('click', function() {
   var tmp = $('#big').html();
   $('#big').html($(this).html());
   $(this).html(tmp);
});​ 
```

*编辑*- 更新为您的确切 html

更新[小提琴](http://jsfiddle.net/vnd3M/5/)

# java-me - 将字符串转换为日期字段/Java Microedition

> ID：13508668
> 
> 赞同：1
> 
> 时间：2012-11-22T08:38:54.643
> 
> 标签：java-me, midp, lcdui, java-micro-editon-sdk3.0

使用 J2ME，netbeans 7.2，开发移动应用程序..

我已将 Datefield 值转换为 String，现在想将其放回 Datefield。为此，我需要将字符串转换回日期字段，我正在使用以下代码，但它没有发生。

```
long myFileTime = dateField.getDate().getTime(); // getting current/set date from the datefield into long
         String date = String.valueOf(myFileTime); // converting it to a String to put it back into a different datefield

         Date updatedate= stringToDate(date); // passing the string 'date' to the Method stringToDate() to convert it back to date.
                 dateField1.setDate(updatedate); // updating the date into the new datefield1

public Date stringToDate(String s) 
{
    Calendar c = Calendar.getInstance();

    c.set(Calendar.DAY_OF_MONTH, Integer.parseInt(s.substring(0, 2)));
    c.set(Calendar.MONTH, Integer.parseInt(s.substring(3, 5)) - 1);
    c.set(Calendar.YEAR, Integer.parseInt(s.substring(6, 10)));

    return c.getTime();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:42:05.380

既然你提到你有`long myFileTime`周围，你应该能够使用：

```
Date updatedate=new Date(myFileTime); 
```

转换回您的日期。如果只有您`String`的可用，您应该将您的功能修改为：

```
public Date stringToDate(String s){
  Calendar c = Calendar.getInstance();

  c.set(Calendar.DAY_OF_MONTH, Integer.parseInt(s.substring(0, 2)));
  c.set(Calendar.MONTH, Integer.parseInt(s.substring(2, 4))-1 );
  c.set(Calendar.YEAR, Integer.parseInt(s.substring(4, 8)));

  return c.getTime();
} 
```

注意更改的索引。

在 Java SE 中，您应该能够使用以下行，而不是单独设置每个字段：

```
c.setTimeInMillis(Long.parseLong(s)); 
```

由于`s`您有`dateField.getDate().getTime()`等于`myFileTime`，根据您提供的代码，从 1970 年 1 月 1 日开始的秒数。

`stringToDate`只有当您的字符串具有以下格式时，您才应该工作：`ddMMyyyy`. 另请注意，在这种情况下，您应该使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)进行解析，例如：

```
Date updatedate = new java.text.SimpleDateFormat("ddMMyyyy HH:mm:ss").parse(date); 
```

# listview - 如何在列表视图中显示 json 数据？

> ID：13508669
> 
> 赞同：0
> 
> 时间：2012-11-22T08:38:58.287
> 
> 标签：listview, jquery-mobile, jsonp

我想使用 json 调用从 php 页面中检索数据，并使用 jquery mobile 在列表视图中显示它。我能够检索数据并且也能够在列表中显示，但我面临的问题是：我的数据在 php 文件中是这样的：([{"id":"1","name":"Big Ben" ,"纬度":"51.500600000000","经度":"-0.124610000000"},{"id":"4","name":"哈德良长城","纬度":"55.024453000000","经度":" 2.142310000000"},{"id":"2","name":"巨石阵","纬度":"51.178850000000","经度":"-1.826446000000"},{"id":"3","name ":"多佛白崖","纬度":

当我在列表中显示它时，它只显示在列表的一行中。我怎样才能在单独的行中显示关于它们的“id”的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:43:37.737

```
var i;

for(i = 0; i < data.length; i+=1) {
    // do whatever here, the id is in data[i].id
    console.log(data[i].id);
} 
```

既然您提到您使用的是 jQuery mobile，也许您会将`<li>`元素附加到列表视图，在这种情况下，您将`.append`在`<ul data-role=listview>`.

**编辑：**根据您的评论，将您的每个功能更改为：

```
$.each(data, function(i, item) {
     $('ul').append('<li><h1>' + item.name + '</h1><p>' + item.latitude + '<br>' + item.longitude + '</p></li>');
}); 
```

并`<li><a id="output"> </a></li>`从 HTML 代码中删除。

但是，如果页面上有多个`<ul>`元素，它将不起作用，因此建议`id`在正确的`<ul>`元素上设置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:47:40.030

```
$(document).ready(function(){
$(document).bind('deviceready', function(){
    //Phonegap ready
    onDeviceReady();
});

var output = $('#output');

$.ajax({
    url: 'http://samcroft.co.uk/demos/updated-load-data-into-phonegap/landmarks.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){
        $.each(data, function(i,item){ 
            var landmark = '<h1>'+item.name+'</h1>'
            + '<p>'+item.latitude+'<br>'
            + item.longitude+'</p>';

            output.append(landmark);
        });
    },
    error: function(){
       output.text('There was an error loading the data.');
    }
}); 
```

});

# c++ - 在字符串 C++ 中查找子字符串（在“hello”中查找“el”）

> ID：13508670
> 
> 赞同：2
> 
> 时间：2012-11-22T08:38:59.270
> 
> 标签：c++, string, recursion, find, substring

好的，所以我正在寻找一种可以帮助我在子字符串中找到字符串的算法。我之前使用的代码来自一个[类似的问题](https://stackoverflow.com/questions/2308696/substring-recursive-algorithm-not-working)，但它没有这样做。

```
// might not be exposed publicly, but could be
int index_of(string const& haystack, int haystack_pos, string const& needle) {
  // would normally use string const& for all the string parameters in this
  // answer, but I've mostly stuck to the prototype you already have

  // shorter local name, keep parameter name the same for interface clarity
  int& h = haystack_pos;

  // preconditions:
  assert(0 <= h && h <= haystack.length());

  if (needle.empty()) return h;
  if (h == haystack.length()) return -1;
  if (haystack.compare(h, needle.length(), needle) == 0) {
    return h;
  }
  return index_of(haystack, h+1, needle);
}

int index_of(string haystack, string needle) {
  // sets up initial values or the "context" for the common case
  return index_of(haystack, 0, needle);
} 
```

这不会返回字符串“hello”上“el”的起始索引，我无法弄清楚。

编辑：好的，让我向您展示更多代码，包括一些现实生活中的示例：我正在尝试分析一个字符串，该字符串是我想要在我的文件系统中排序的文件的路径。输入示例如下：

输入：/media/seagate/lol/Sons.of.Anarchy.S04.720p.HDTV.x264/Sons.of.Anarchy.S04E01.720p.HDTV.x264-IMMERSE.mkv

当我尝试通过检测 SxxExx 的存在来解析此字符串以获取名称时，我会查找“s0”、“S0”等（我知道这不是最好的实现，我只是想看看它是否有效并且稍后看代码）。因此，当我使用该输入时，我得到的输出是：

```
input:/media/seagate/lol/Sons.of.Anarchy.S04.720p.HDTV.x264/Sons.of.Anarchy.S04E01.720p.HDTV.x264-IMMERSE.mkv

aux: 0p.HDTV.x264-IMMERSE.mkv

input:/media/seagate/lol/Sons.of.Anarchy.S04.720p.HDTV.x264/Sons.of.Anarchy.S04E01.720p.HDTV.x264-IMMERSE.mkv

aux: 1.720p.HDTV.x264-IMMERSE.mkv

input:/media/seagate/lol/Sons.of.Anarchy.S04.720p.HDTV.x264/Sons.of.Anarchy.S04E01.720p.HDTV.x264-IMMERSE.mkv

aux: 264-IMMERSE.mkv 
```

辅助的预期输出：S04E01.720p.HDTV.x264-IMMERSE.mkv

因此，正如您所看到的，它只是在寻找字符串中的任何字符并停止，这也说明了多个有效的“找到”应该只是一个。

我尝试使用的完整代码是：

```
bool StringWorker::isSeries(size_t &i) {

    size_t found1, found2, found3, found4, found5, found6;
    found1 = input->find_last_of("S0"); //tried several find functions including the
    found2 = input->find_last_of("S1"); //index_of() mentioned above in the post
    found3 = input->find_last_of("S2");
    found4 = input->find_last_of("s0");
    found5 = input->find_last_of("s1");
    found6 = input->find_last_of("s2");

    if (found1 != string::npos) {
        if (input->size() - found1 > 6) {
            string aux = input->substr(found1, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found1;
                return true;
            }
        }
    }
    if (found2 != string::npos) {
        if (input->size() - found2 > 6) {
            string aux = input->substr(found2, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found2;
                return true;
            }
        }
    }

    if (found3 != string::npos) {
        if (input->size() - found3 > 6) {
            string aux = input->substr(found3, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found3;
                return true;
            }
        }

    }
    if (found4 != string::npos) {
        if (input->size() - found4 > 6) {
            string aux = input->substr(found4, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found4;
                return true;
            }
        }

    }
    if (found5 != string::npos) {
        if (input->size() - found5 > 6) {
            string aux = input->substr(found5, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found5;
                return true;
            }
        }

    }
    if (found6 != string::npos) {
        if (input->size() - found6 > 6) {
            string aux = input->substr(found6, input->size());
            cout << "input:" << *input << endl;
            cout << "aux: " << aux << endl;
            if (isalpha(aux.at(0)) && isdigit(aux.at(1)) && isdigit(aux.at(2))
                    && isalpha(aux.at(3)) && isdigit(aux.at(4))
                    && isdigit(aux.at(5))) {
                i = found6;
                return true;
            }
        }

    }

    return false;

} 
```

你能看出这里有什么不对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T08:42:08.500

为什么不使用-> [link](http://en.cppreference.com/w/cpp/string/basic_string/find)`find()`的方法。`std::string`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:12:55.687

此代码通过以下方式返回索引`index = sub_str.find("el")`：

```
#include <iostream>
#include <string>
using namespace std;

int main ()
{
  string sub_str="abc def ghi jk lmnop  hello";

  string sub_str2;
  size_t index;

  index = sub_str.find("el");     
  sub_str2 = sub_str.substr (index);   

  cout<<"index = "<<index<<"\n";
  cout<<sub_str2<<"\n";

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T08:31:02.203

要在字符串中查找子字符串及其索引，您可以尝试一下 -

```
int find_sub(const std::string& mstring,sub)
{
  int lensub=sub.length(),len=mstring.length(),f=0,pos;
  std::string b="";
  for(int i=0;i<len-lensub;i++)
  {
    for(int j=i,k=0;j<i+lensub;j++,k++)
      b[k]=mstring[j];
    if(b.compare(sub)==0)
    {
      f=1;
      pos=i;
      break;
    }
  } 
  if(f==1)
    cout<<"substring found at: "<<pos+1;
  else
    cout<<"substring not found!";
  return f;
} 
```

`break;`您还可以通过每次删除和增加 f 的值来检查子字符串出现的次数。还可以通过将 pos 转换为数组来获取它们的索引。

# python - 未找到 substr 时表达式评估为 None

> ID：13508677
> 
> 赞同：9
> 
> 时间：2012-11-22T08:39:23.417
> 
> 标签：python, string

`str.find()``-1`如果找不到，总是返回。如果找不到`str.find()`，我可以写一个表达式来代替吗？`return None`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T08:43:15.133

你的意思是这样的吗？

```
def find2(str, substr):
    result = str.find(substr)
    return result if result != -1 else None 
```

在 Python 2.4 中，将最后一行更改为

```
 if result != -1:
        return result 
    else:
        return None 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T08:42:55.087

```
None if str.find() < 0  else str.find() 
```

如果代码重复困扰你（它应该）：

```
index = str.find()
None if index < 0  else index 
```

在 2.5中[添加](http://mail.python.org/pipermail/python-dev/2005-September/056846.html)了三元条件。所以如果你有旧版本的 Python，你可以这样做：

```
def my_find(str, sub_str)
    index = str.find(sub_str)
    if index < 0:
        return None
    else:
        return index 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T09:31:14.627

如果我总结一下，你想要的东西：

*   **是一个表达式**
*   评估到`None`何时未找到
*   找到时评估索引
*   **不使用三元**（以便 Python 2.4 可以处理）

* * *

我能想出的满足所有要求的唯一解决方案是这个奇怪的事情：

```
(lambda x: x and x - 1)((str.find(substr) + 1) or None) 
```

例如：

```
>>> (lambda x: x and x - 1)(('abcd'.find('b') + 1) or None)
1
>>> (lambda x: x and x - 1)(('abcd'.find('_') + 1) or None)
>>> 
```

我没有安装 Python 2.4 来测试它，所以我只能希望它能正常工作。

# ruby-on-rails - Nginx 作为负载均衡器的瓶颈？

> ID：13508678
> 
> 赞同：2
> 
> 时间：2012-11-22T08:39:28.793
> 
> 标签：ruby-on-rails, performance, postgresql, nginx

我们有一个流行的 iPhone 应用程序，人们可以在其中像 Wordfeud 一样互相决斗。我们今天有近 100 万注册用户。

在高峰时段，该应用程序的响应时间非常长，而且还有很多超时。我们试图找到瓶颈，但很难做到。所有服务器上的 CPU、内存和 I/O 都低于 50%。该问题仅在高峰时段出现。

**我们的设置**

```
1 VPS with nginx (1.1.9) as load balancer
4 front servers with Ruby (1.9.3p194) on Rails (3.2.5) / Unicorn (4.3.1)
1 database server with PostgreSQL 9.1.5 
```

数据库日志没有显示足够长的请求时间来解释 nginx 错误日志中显示的所有超时。

我们还尝试直接在前端服务器上构建和运行应用程序（在所有其他用户都在负载均衡器上运行的高峰时段）。令人惊讶的是，即使在高峰时段，绕过负载均衡器的应用程序也很快。

**NGINX 设置**

```
worker_processes=16
worker_connections=4096
multi_accept=on 
```

**Linux 设置**

```
fs.file-max=13184484
net.ipv4.tcp_rmem="4096 87380 4194304"
net.ipv4.tcp_wmem="4096 16384 4194304"
net.ipv4.ip_local_port_range="32768 61000" 
```

为什么应用程序绕过负载均衡器的速度如此之快？nginx 作为负载均衡器会成为瓶颈吗？有没有什么好方法可以比较 nginx 中的超时与独角兽中的超时，以查看问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:18:09.397

根据您的设置，nginx 可能是瓶颈...

检查/调整 nginx 中的以下设置：

1.  `worker_processes`设置（应该等于核心/cpu 的数量）
2.  设置（如果您在高峰期有很多连接，`worker_connections`应该非常高）
3.  放`multi_accept on;`
4.  如果在 linux 上，请在 nginx 中确保您使用的是 epoll ( `use epoll;`-directive)

检查/调整您的操作系统的以下设置：

1.  允许打开的文件描述符的数量（`sysctl -w fs.file-max=999999`在 linux 上）
2.  tcp 读写缓冲区（`sysctl -w net.ipv4.tcp_rmem="4096 4096 16777216"`和 `sysctl - net.ipv4.tcp_wmem="4096 4096 16777216"`在 linux 上）
3.  本地端口范围（`sysctl -w net.ipv4.ip_local_port_range="1024 65536"`在 linux 上）

更新：

*   所以你有 16 个工人和每个工人 4096 个连接
*   这意味着最多 4096*16=65536 个并发连接
*   每个浏览器可能有多个请求（ajax、css、js、页面本身、页面上的任何图像……），假设每个浏览器有 4 个请求

允许超过 16,000 个并发用户，这足以满足您的峰值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:49:55.600

您如何设置上游服务器组以及您使用的负载平衡方法是什么？

很难想象 Nginx 本身就是瓶颈。是否有可能某些上游应用程序服务器受到的攻击比其他应用程序服务器更多并由于积压已满而开始拒绝连接？在 Heroku 上查看这个[负载平衡问题](http://rapgenius.com/James-somers-herokus-ugly-secret-lyrics)，看看你是否可以在那里获得更多帮助。

在 nginx 版本 1.2.2 之后，nginx 提供了这个[`least_conn`](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#least_conn). 这可能是一个简单的解决方法。我自己还没有尝试过。

> 指定组应使用负载平衡方法，其中将请求传递到具有最少活动连接数的服务器，同时考虑服务器的权重。如果有多个这样的服务器，则尝试使用加权循环平衡方法。

# java - Java 从受限层调用方法

> ID：13508684
> 
> 赞同：0
> 
> 时间：2012-11-22T08:39:54.573
> 
> 标签：java, security, reflection, service, layer

我什至不确定这是否可行，但我想向社区征求他们的一般意见。

我必须解决以下问题：

我的项目有 2 层，一个核心层和一个业务层。该核心层提供业务层。此时业务类可以导入核心类并为所欲为。核心类只能导入核心类并使用其方法，禁止访问业务类及其各自的方法。

我想添加一个特定的功能：我不想给 Core 任何对业务层的正常访问，但我想创建类似接口或类似的东西（我不知道如何在这里表达自己，因为我有不知道它是否可能），它为核心类提供了一些来自业务类的特定方法以供使用。

任何人都可以帮助我，或者至少给我一些指导方针，读什么，或者在哪里搜索。

提前感谢您的任何支持。

编辑：我使用带有 Seam 和 JBoss 的 Spring Framework

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:46:52.490

你可能面临的是模块依赖和循环依赖的设计。简而言之，Core 需要的业务方法可能必须重新分解为“utils”模块或“Business-Core”模块，然后两者都可以访问。我只是在这里猜测。

除了自动化构建之外，像 Maven 这样的构建工具也鼓励这种模块化和依赖。一个从一个模块开始的项目在完成时被分成 3-4 个模块并不少见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:42:46.443

这可以通过使用 AspectJ 来实现。您可以在 AspectJ-syntax 中编写规则，如果不强制执行，它将给出构建时间错误。有关示例，请参阅文章[Archtectual Enforcement with AspectJ 。](http://www.jayway.com/2010/03/28/architectural-enforcement-with-aid-of-aspectj)

# javascript - dojo.addonLoad() 似乎不适用于 IE

> ID：13508686
> 
> 赞同：1
> 
> 时间：2012-11-22T08:39:56.173
> 
> 标签：javascript, internet-explorer, dojo

如上所述，我使用 IE 9 作为 IE 浏览器，使用 Firefox 16 和 Chrome。

显然这个代码块

```
$(document).ready(function() {
    dojo.addOnLoad(initQuery);
}); 
```

当浏览器到达页面时似乎没有加载，但其他浏览器工作得很好。有解决办法吗？我使用 dojo 包，但会接受其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:49:49.703

对我来说，您的语法看起来像是 jQuery 和 dojo 的奇怪组合。我不明白为什么你不应该使用更简单的东西，比如

```
require("dojo/ready", function(ready){
    ready(function(){
        initQuery();
    });
}); 
```

这是基于 dojo 文档中的示例。

[http://dojotoolkit.org/reference-guide/1.8/dojo/addOnLoad.html](http://dojotoolkit.org/reference-guide/1.8/dojo/addOnLoad.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T16:13:03.353

尼克罗斯的答案是一个很好的答案，而不是缺少括号：

```
require(["dojo/ready"], function(ready){
    ready(function(){
        initQuery();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:00:33.877

如果您不介意无效，请尝试将其包装在另一个`dojo.addOnLoad()`在[这里工作的（请参阅评论）或尝试 setTimeOut ：/](https://stackoverflow.com/questions/13365287/dijit-byid-doesnt-work-on-ie8-with-dojo-addonload/13374297#13374297)

# c# - 根据 C# 中的条件从 JSON 更新元素

> ID：13508687
> 
> 赞同：1
> 
> 时间：2012-11-22T08:40:12.593
> 
> 标签：c#, json, json.net

我有一个我希望能够在 C# 中修改的 JSON 字符串。我希望能够在满足特定条件时更新结果中的值。

采取以下

```
 {
  "responseHeader":{
    "status":0,
    "QTime":0,
    "params":{
      "explainOther":"",
      "fl":"*,score",
      "indent":"on",
      "start":"0",
      "q":"*:*",
      "hl.fl":"",
      "qt":"",
      "wt":"json",
      "fq":"",
      "version":"2.2",
      "rows":"2"}
  },
  "response":{"numFound":2,"start":0,"maxScore":1.0,"docs":
  [{
        "id":"438500feb7714fbd9504a028883d2860",
        "name":"John",
        "email":"john@email.com"
        "dateTimeCreated":"2012-02-07T15:00:42Z",
        "dateTimeUploaded":"2012-08-09T15:30:57Z",
        "score":1.0
   },
   {
        "id":"2f7661ae3c7a42dd9f2eb1946262cd24",
        "name":"David",
        "email":"david@email.com"
        "dateTimeCreated":"2012-02-07T15:02:37Z",
        "dateTimeUploaded":"2012-08-09T15:45:06Z",
        "score":1.0
    }]
 }} 
```

当我找到具有特定 ID 的结果时，我希望能够更新名称和电子邮件元素值。

例如，我想更新文档 ID 等于“438500feb7714fbd9504a028883d2860”的名称和电子邮件元素，并将名称值更新为 Richard，将电子邮件值更新为 richard@email.com。其结果如下所示。

```
 {
  "responseHeader":{
    "status":0,
    "QTime":0,
    "params":{
      "explainOther":"",
      "fl":"*,score",
      "indent":"on",
      "start":"0",
      "q":"*:*",
      "hl.fl":"",
      "qt":"",
      "wt":"json",
      "fq":"",
      "version":"2.2",
      "rows":"2"}
  },
  "response":{"numFound":2,"start":0,"maxScore":1.0,"docs":
  [{
        "id":"438500feb7714fbd9504a028883d2860",
        "name":"Richard",
        "email":"richard@email.com"
        "dateTimeCreated":"2012-02-07T15:00:42Z",
        "dateTimeUploaded":"2012-08-09T15:30:57Z",
        "score":1.0
   },
   {
        "id":"2f7661ae3c7a42dd9f2eb1946262cd24",
        "name":"David",
        "email":"david@email.com"
        "dateTimeCreated":"2012-02-07T15:02:37Z",
        "dateTimeUploaded":"2012-08-09T15:45:06Z",
        "score":1.0
    }]
 }} 
```

性能是一个考虑因素，因为我需要处理许多 JSON 字符串，所以请记住这一点。

在此先感谢安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:14:50.960

您可以为此[http://json.codeplex.com/使用“Newtonsoft.Json”](http://json.codeplex.com/)

它非常易于使用！我写了一个小例子，它正是你想要的：

测试方法：[C#]

```
 private void Test(){
        byte[] Bytes = File.ReadAllBytes("json.txt");
        string Json = Encoding.ASCII.GetString(Bytes);

        Response JsonResponse = JsonConvert.DeserializeObject<Response>(Json);

        if (JsonResponse != null){
            if (JsonResponse.response != null){
                foreach(Document Doc in JsonResponse.response.docs){
                    if (Doc.id == "2f7661ae3c7a42dd9f2eb1946262cd24"){
                        Doc.name = "David";
                        Doc.email = "david@email.com";
                    }
                }

                string JsonMod = JsonConvert.SerializeObject(JsonResponse, Formatting.Indented);

                BinaryWriter Writer = new BinaryWriter(File.Create("JsonMod.txt"));
                Writer.Write(Encoding.ASCII.GetBytes(JsonMod));
                Writer.Close();
                Writer.Dispose();
            }
        }
    } 
```

Json 类：[C#]

```
[JsonObject(MemberSerialization.OptIn)]
public class Response{

    [JsonProperty]
    public ResponseHeader responseHeader{
        get; set;
    }

    [JsonProperty]
    public ResponseContent response{
        get; set;
    }

}

[JsonObject(MemberSerialization.OptIn)]
public class ResponseHeader{
    [JsonProperty]
    public int Status{
        get; set;
    }

    [JsonProperty]
    public int QTime{
        get; set;
    }

    [JsonProperty]
    public object Params{
        get; set;
    }
}

[JsonObject(MemberSerialization.OptIn)]
public class ResponseContent{

    [JsonProperty]
    public int numFound{
        get; set;
    }

    [JsonProperty]
    public int start{
        get; set;
    }

    [JsonProperty]
    public double maxScore{
        get; set;
    }

    [JsonProperty]
    public Document[] docs{
        get; set;
    }
}

[JsonObject(MemberSerialization.OptIn)]
public class Document{

    [JsonProperty]
    public string id{
        get; set;
    }

    [JsonProperty]
    public string name{
        get; set;
    }

    [JsonProperty]
    public string email{
        get; set;
    }

    [JsonProperty]
    public DateTime dateTimeCreated{
        get; set;
    }

    [JsonProperty]
    public DateTime dateTimeUploaded{
        get; set;
    }

    [JsonProperty]
    public double score{
        get; set;
    }
} 
```

哦，请查看您发布的 json - 在 "email":"x@y.de" 之后您错过了一个 "," - 这将导致解析异常；)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:49:20.457

您必须使用`DataContractJsonSerializer`. （[在这里你可以找到](http://pietschsoft.com/post/2008/02/NET-35-JSON-Serialization-using-the-DataContractJsonSerializer.aspx)一篇非常好的博客文章，讨论如何使用它）。

之后，您可以更改所有想要的值，最后，重新序列化 JSON 中的所有内容

# c++ - 提升精神：如何解析直到我们有“->”

> ID：13508690
> 
> 赞同：3
> 
> 时间：2012-11-22T08:40:23.647
> 
> 标签：c++, boost-spirit

我正在尝试解析`rule`表单`predicate -> action`。

我的问题是它`predicate`可以是**任何有效的数学表达式**，因此它实际上可能包含一个减号或一个更大的符号（但我们必须按顺序禁止它们，因为这是我们想要从中分离的标记`predicate`）`action`。

本质上，我想`predicate`消耗所有非空格，直到它碰到 string `"->"`。

*我该怎么做呢？*

是修复我在下面评论的行的正确方法，还是我应该根据有效表达式更好地定义 a`predicate`是什么，并根据该有效表达式让解析器落入`"->"`何时`predicate`结束？

```
rule %=
  predicate
  >> "->"
  >> action
  ;

predicate %= (+~(qi::char_("-"))); // BAD: works only if no minus sign in predicate
action    %= (+(qi::char_)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:53:11.223

改写`predicate`如下：

```
predicate = +(qi::char_ - "->"); 
action    = +(qi::char_); 
```

等效地，

```
predicate = +(!qi::lit("->") >> qi::char_); 
```

应该做同样的事情。

查看文档

*   [差异解析器 (a - b)](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/difference.html)
*   [非谓词解析器 (!a)](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/operator/not_predicate.html)

# android - 如何在不使用加速度计的情况下获得屏幕方向？

> ID：13508696
> 
> 赞同：0
> 
> 时间：2012-11-22T08:40:54.323
> 
> 标签：android, screen-orientation

如何得到它？在我的 XML 文件中，我对我的活动使用唯一的纵向方向。

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout"
android:screenOrientation="portrait"
android:windowSoftInputMode="stateHidden" 
```

和 onConfigurationChanged 并且不适用于方向。

更新目前我使用：

```
@Override
    public void onSensorChanged(SensorEvent event) {
        x = event.values[0];
        y = event.values[1];
    }

    private PictureOrientation getLastOrientation() {
        MyPictureOrientation orient;
        if (x >= -5 && x < 5) {
            if (y > 0) {
                orient = PORTRAIT;
            } else {
                orient = PORTRAIT_REV;
            }
        } else {
            if (x >= -10 && x < -5) {
                orient = LAND_RIGHT;
            } else {
                orient = LAND_LEFT;
            }
        }

        return orient;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:48:08.893

您可以使用以下代码获取当前方向：

```
getResources().getConfiguration().orientation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:50:52.153

一些伪代码：

```
Display getOrient = getWindowManager().getDefaultDisplay();
if(getOrient.getWidth() < getOrient.getHeight())
  // then you have portrait orientation
else
  // you have landscape 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:51:58.197

如果您希望您的应用程序在 potrait 中工作，只需将以下内容放入清单中

```
android:configChanges="keyboardHidden|orientation"
android:screenOrientation="portrait" 
```

和 oncreate 和 onConfigurationChanged 放

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

# wpf - 为什么我可以设置属性值，尽管 Animation.FillBehavior 设置为 HoldEnd

> ID：13508698
> 
> 赞同：2
> 
> 时间：2012-11-22T08:41:17.173
> 
> 标签：wpf, silverlight, animation

在动画结束后保持（“填充”）动画属性值时，我在 Silverlight 和 WPF 中遇到了不同的行为。[FillBehavior](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.fillbehavior%28v=vs.95%29.aspx) 属性文档中的备注部分说

> 如果您不小心停止意外动画，填充行为可能会造成属性在运行时不可设置的错觉。尝试在代码中更改来自填充动画的动画值似乎没有效果，直到填充动画停止。

然而，在 Silverlight 中，这似乎不是真的。在下面的小示例中，当单击“淡出”按钮时，我`Opacity`将填充到零的动画。`Rectangle`尽管动画`FillBehavior`设置为`HoldEnd`，但在“重置”按钮单击处理程序中将不透明度重置为 1 有效并且按钮重新出现。如果我在 WPF 应用程序中执行相同操作，则它的行为与预期相同，即单击“重置”按钮没有视觉效果。

我的问题是，有没有其他人观察到这种行为？这可能是 Silverlight 中的错误，还是我遗漏了什么？

我在这里使用 Silverlight 5 和 WPF 4.5。

```
<StackPanel HorizontalAlignment="Center">
    <Rectangle Name="rect" Width="200" Height="100" Fill="DarkGreen"/>
    <Button Content="Fade Out" Click="FadeOutButtonClick"/>
    <Button Content="Reset" Click="ResetButtonClick"/>
</StackPanel> 
```

-

```
private void FadeOutButtonClick(object sender, RoutedEventArgs e)
{
    var animation = new DoubleAnimation
    {
        To = 0d,
        Duration = TimeSpan.FromSeconds(1),
        FillBehavior = FillBehavior.HoldEnd
    };

    Storyboard.SetTargetProperty(animation, new PropertyPath(UIElement.OpacityProperty));
    Storyboard.SetTarget(animation, rect);

    var storyboard = new Storyboard();
    storyboard.Children.Add(animation);
    storyboard.Begin();
}

private void ResetButtonClick(object sender, RoutedEventArgs e)
{
    rect.Opacity = 1d;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:35:55.990

您可以在 reset 上做一个反向动画：

```
private void ResetButtonClick(object sender, RoutedEventArgs e)
    {
        var animation = new DoubleAnimation
        {
            To = 1d,
            Duration = TimeSpan.FromSeconds(0),
            FillBehavior = FillBehavior.HoldEnd
        };

        Storyboard.SetTargetProperty(animation, new PropertyPath(UIElement.OpacityProperty));
        Storyboard.SetTarget(animation, rect);

        var storyboard = new Storyboard();
        storyboard.Children.Add(animation);
        storyboard.Begin(); 
```

希望这会有所帮助。

# spring-batch - Spring Batch 和 JiBX：如何调试？

> ID：13508703
> 
> 赞同：2
> 
> 时间：2012-11-22T08:41:54.397
> 
> 标签：spring-batch, jibx

我正在 Spring ToolSuite 3.1.0.RELEASE 构建 ID：201210061306 上测试 Spring Batch 2.1.9。所有依赖 jar 都包含在项目中，通过 Gradle/Maven。

我在 JDK1.6 上使用 JiBX 编译了我的模式，并在 JDK1.7 上运行 Spring Batch 测试程序。

但是我遇到了 JiBX (1.2.4.5) 的问题：

我的源模式的模式 jar 应该是正确的（即包含 JiBX_binding*" 类），因为使用此 jibx-marshaller 的作业确实完成了，但只有读取计数为零。

欢迎任何提示和建议。

谢谢

# hadoop - Hadoop：从 DistributedCache 获取文件时出现 FileNotFoundExcepion

> ID：13508707
> 
> 赞同：1
> 
> 时间：2012-11-22T08:42:07.190
> 
> 标签：hadoop, distributed-cache

我有 2 个节点集群（v1.04），主节点和从节点。在 master 上，我们在using中`Tool.run()`添加两个文件。HDFS 中确实存在文件。在 Mapper.setup() 中，我们希望使用从缓存中检索这些文件`DistributedCache``addCacheFile()`

```
FSDataInputStream fs = FileSystem.get( context.getConfiguration() ).open( path ). 
```

问题是对于一个文件 a`FileNotFoundException`被抛出，尽管该文件存在于从节点上：

```
attempt_201211211227_0020_m_000000_2: java.io.FileNotFoundException: File does not exist: /somedir/hdp.tmp.dir/mapred/local/taskTracker/distcache/-7769715304990780/master/tmp/analytics/1.csv 
```

ls –l 在从站上：

```
[hduser@slave ~]$ ll /somedir/hdp.tmp.dir/mapred/local/taskTracker/distcache/-7769715304990780/master/tmp/ analytics/1.csv                        
-rwxr-xr-x 1 hduser hadoop 42701 Nov 22 10:18 /somedir/hdp.tmp.dir/mapred/local/taskTracker/distcache/-7769715304990780/master/tmp/ analytics/1.csv 
```

我的问题是：

1.  不应该所有文件都存在于所有节点上吗？
2.  应该怎么做才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:18:15.297

已解决 - 应该使用过：

```
FileSystem.getLocal( conf ) 
```

感谢来自 Hadoop 邮件列表的 Harsh J。

# svn - 发布期间的错误提交：准备和发布：分支

> ID：13508710
> 
> 赞同：1
> 
> 时间：2012-11-22T08:42:25.617
> 
> 标签：svn, maven, maven-release-plugin

我使用**maven 发布插件 2.3.2**和**maven 3.0.4**，我在准备和分支阶段遇到了问题。

我有一个**像**`http:/svn.pyhost.com/projects/App1`. **App1**包含 3 个目录：

```
App1/trunk
App1/branches
App1/tags 
```

树干包含

```
App1/trunk/ApplicationParent
App1/trunk/ApplicationChild 
```

所以，我想创建一个只有`ApplicationParent`and的新标签`ApplicationChild`。所以，我在我的`pom.xml`地方创建了配置，我放了这样的东西：

```
<scm>   
<connection>http:/svn.pyhost.com/projects/App1/trunk</connection> 
<developerConnection>http:/svn.pyhost.com/projects/App1/trunk</developerConnection>
<url>http:/svn.pyhost.com/projects/App1/trunk</url>
</scm> 

<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-release-plugin</artifactId>
<version>2.3.2</version>
<configuration>
<tagBase>http:/svn.pyhost.com/projects/App1/tags</tagBase>
<branchBase>http:/svn.pyhost.com/projects/App1/branches</branchBase>
</configuration>
</plugin>
</plugins>
</build> 
```

接下来，我执行`mvn release:prepare`并 maven 创建了包含`ApplicationParent-1.0`所有 from`App1 (trunk, branches and tags)`的新标签，我不知道为什么，因为`scm`我只设置了

`http:/svn.pyhost.com/projects/App1/trunk`所以我希望从主干字典中标记所有内容，但是 Maven 创建`ApplicationParent-1.0`并放置了`trunk, branches and tags`目录。为什么 ？

所以，我将我的 scm 更改为`http:/svn.pyhost.com/projects/App1/trunk/ApplicationParent`并`mvn release:prepare`再次执行，现在很好，在 ApplicationParent-1.1 中，我全部来自主干目录。

但是，如果我执行`mvn release:branch`using `http:/svn.pyhost.com/projects/App1/trunk/ApplicationParent`，我只能有新的分支`ApplicationParent`，但我需要为所有主干词典创建一个分支，所以我需要更改`scm`为`http://svn.pyhost.com/projects/App1/trunk/`，如果我想创建分支很好。但是如果我需要创建新标签`release:perform`，我会遇到上面描述的问题。

为什么我不能同时使用`http:/svn.pyhost.com/projects/App1/trunk`路径`release:perform`和`release:branch`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:26:56.843

我感觉您的 SCM 的结构不是 Maven 发布插件所满意的。下面的[文章解释了插件理解的一些结构](http://blogs.captechconsulting.com/blog/eric-miles/maven-release-flat-project-structures-revisited)。

虽然支持您描述的格式，但您并没有在 pom.xml 文件中反映这一点和/或您尝试将单个 pom.xml 文件用于本质上是两个不同的项目（ApplicationParent 与 ApplicationChild）。

我建议将您的 SCM 重组为：

```
App1/ApplicationParent
    /trunk
    /tags
    /branches
    /releases
App1/ApplicationChild
    /trunk
    /tags
    /branches
    /releases 
```

然后您在 pom.xml 中的 ApplicationParent 的开发人员连接可以是：

```
<developerConnection>http:/svn.pyhost.com/projects/App1/ApplicationParent/trunk</developerConnection> 
```

和标签/分支库：

```
<tagBase>http:/svn.pyhost.com/projects/App1/ApplicationParent/tags</tagBase>
<branchBase>http:/svn.pyhost.com/projects/App1/ApplicationParent/branches</branchBase> 
```

对于子项目：

```
<developerConnection>http:/svn.pyhost.com/projects/App1/ApplicationChild/trunk</developerConnection> 
```

和标签/分支库：

```
<tagBase>http:/svn.pyhost.com/projects/App1/ApplicationChild/tags</tagBase>
<branchBase>http:/svn.pyhost.com/projects/App1/ApplicationChild/branches</branchBase> 
```

然而，我个人的喜好是只从发布分支（例如 /releases/xyz）而不是 /trunk 中执行发布插件。因此，您在 SCM 中进行分支，然后签出新的发布分支并在发布分支上执行发布：准备和发布：执行魔术。

不要忘记使用：“mvn release:prepare -DdryRun=true”，这样你就可以在实际发布之前看到它要做什么。一旦一切正常，您可以将“release:clean release:prepare release:perform”作为单个 maven 命令执行。

# android - 如何在文本视图中显示评分栏值

> ID：13508711
> 
> 赞同：1
> 
> 时间：2012-11-22T08:42:28.070
> 
> 标签：android, textview, rating, ratingbar

我试图在文本视图中显示用户的评分，而我得到的只是“进程意外终止”错误。一共有三个活动。包含评分栏的活动的 XML 编码是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
tools:context=".RatingActivity" >

 <TextView
     android:id="@+id/textView3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_centerHorizontal="true"
     android:layout_centerVertical="true"
     android:hint="@string/hello_world"
     android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

java编码是：

```
package com.example.myfirstapp;

import android.app.Activity;

import android.os.Bundle;
import android.widget.RatingBar;
import android.widget.TextView;

public class RatingActivity extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rating);
    RatingBar ratingBar1=(RatingBar)findViewById(R.id.ratingBar1);
    TextView textView3 =(TextView) findViewById(R.id.textView3);
                textView3.setTextSize(40);
                textView3.setText("Rating is :"+ratingBar1.getRating());

}

} 
```

我究竟做错了什么？我是android应用程序开发的新手。请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:36:55.643

```
RatingBar mBar = (RatingBar) findViewById(R.id.mRatingBar);
mBar.setOnClickListener(onclickbutton1);

public void onClick(View v) {

    RatingBar bar = (RatingBar) v;
    statusMessage.setText("value is " + bar.getRating());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:31:00.997

`ratingBar1`您的布局文件中没有带有 id 的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T16:23:39.710

考虑使用[setOnRatingBarChangeListener](http://developer.android.com/intl/es/reference/android/widget/RatingBar.html#setOnRatingBarChangeListener(android.widget.RatingBar.OnRatingBarChangeListener))以获得更好的性能：

```
 myRatingBar.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() {
        @Override
        public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromUser) {
            myTextView.setText(String.format("%2.1f", rating));
        }
    }); 
```

# c - 访问功能是否检查文件的存在？

> ID：13508712
> 
> 赞同：5
> 
> 时间：2012-11-22T08:42:32.757
> 
> 标签：c, file

access 函数检查文件是否可以通过 how 参数指定的方式被访问。how 参数可以是标志 R_OK、W_OK、X_OK 或存在性测试 F_OK 的按位或。

如果允许访问，则返回值为 0，否则返回 -1。

如果文件不存在，访问是否也返回-1？

我想开发一个检查文件是否存在的功能。如果下面的访问函数做到了，我必须按照标准提出什么样的论点？

```
if (access("file_example", R_OK | W_OK | X_OK) != -1) 
```

**顺便说一句：**我要检查`access()`函数是否存在的文件是由同一个应用程序创建的。所以它是由同一个用户创建的

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T08:47:07.580

这些标志将检查文件是否可以被进程执行、可写和可读，很多文件不会。您要查找的标志是 F_OK。F_OK 测试文件是否存在，仅此而已。

我建议阅读手册页以进行访问。它应该在那里记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:47:56.807

是的，`errno`设置为`ENOENT`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:48:30.270

根据[手册页](http://linux.die.net/man/2/access)，返回的错误之一是：

```
 ENOENT A component of pathname does not exist or is a dangling symbolic link. 
```

此外，在第二段中，它明确指出：

```
 F_OK tests for the existence of the file. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T08:50:04.483

你可以使用它。

```
if (access("file_example", F_OK) != -1)

int access(const char *path, int amode); 
```

amode 的值是要检查的访问权限（R_OK、W_OK、X_OK）或存在性测试（F_OK）的按位或。

# html - CSS背景大小缩放？

> ID：13508713
> 
> 赞同：-4
> 
> 时间：2012-11-22T08:42:34.270
> 
> 标签：html, css, background, size, zooming

无论如何做 css background-size:cover; 缩放 120%？

我尝试了很多次但仍然没有工作..

背景尺寸：封面；顶部/底部有灰色边框

如何去除灰色边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:59:51.543

CSS：

```
 html, body {
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

#full-screen-background-image {
  z-index: -999;
  min-height: 100%;
  min-width: 1024px;
  width: 100%;
  height: auto;
  position: fixed;
  top: 0;
  left: 0;
}

#wrapper {
  position: relative;
  width: 800px;
  min-height: 400px;
  margin: 100px auto;
  color: #333;
} 
```

HTML：

```
<body>
  <img alt="full screen background image" src="/background.jpg" id="full-screen-background-image" /> 
  <div id="wrapper">
    <p>Content goes here...</p>
  </div>
</body> 
```

# java - 在 Java 中抛出 OutOfMemoryError 后是否运行垃圾收集？

> ID：13508714
> 
> 赞同：4
> 
> 时间：2012-11-22T08:42:41.777
> 
> 标签：java, error-handling, garbage-collection

似乎应该如此。但有人可以肯定或否认吗？

相关的有：

[捕获 java.lang.OutOfMemoryError？](https://stackoverflow.com/questions/2679330/catching-java-lang-outofmemoryerror)

[是否可以在java中捕获内存不足异常？](https://stackoverflow.com/questions/1692230/is-it-possible-to-catch-out-of-memory-exception-in-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:36:23.490

> 在 Java 中抛出 OutOfMemoryError 后是否运行垃圾收集？

它肯定会在OOME 被抛出**之前运行。**实际上，OOME*通常*是由于垃圾收集器发现它无法回收足够的空间来满足分配请求而引发的¹。

它是否在 OOME 被抛出**后**运行取决于应用程序的作用。如果应用程序尝试继续，GC*通常*会在应用程序下次请求更多内存时运行……在其继续执行中。

^(1 - 实际上，可以将 GC 配置为在检测到它花费太多时间进行垃圾收集时抛出 OOME。在这种情况下，JVM 很可能手头有大量可用的未分配内存。)

* * *

亚伦·迪古拉说：

> 因此，在精心设计的应用程序中，您可以捕获并处理 OOME，该程序将继续存在并继续工作。

这是真的，但出于两个不同的原因，这不是您通常应该做的事情。

第一个原因是线程尝试分配内存的*任何地方*都可能引发 OOME 。无论 JVM 当时在做什么都将被终止……直到 OOME 被捕获。例如：

*   如果线程正在更新共享数据结构（处于锁定状态），则数据结构将保持半更新状态。

*   如果线程应该通知其他线程，那么该通知将永远不会发生，并且其他线程将被卡住等待。

*   如果线程没有捕获 OOME，那么它将退出，如果没有其他注意到，那么您可能会留下一个不再工作的应用程序。

问题是这些“破损”很难检测或预测，也很难从中恢复。

第二个原因是 OOME 通常表示以下情况之一：

*   您试图在堆内存不足的情况下执行计算。如果您尝试从 OOME 中恢复，您可能会再次遇到同样的问题。

*   您的应用程序存在内存泄漏；即，您的应用程序中的某些数据结构保留对“垃圾”对象的引用，并防止它们被回收。如果您尝试从 OOME 中恢复，则可能不会发生任何变化，并且您会一次又一次地遇到同样的问题。

因此，成功恢复的先决条件是：

*   您**知道**OOME 不会损坏 JVM 中的任何重要内容，并且
*   你**知道**你不会再遇到OOME了……因为根本原因仍然存在。

在大多数应用中，这些都是必须满足的硬性前提条件。如果不满足它们，那么尝试从 OOME 中恢复很有可能会使它处于比退出并重新启动应用程序时*更糟糕的状态。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T08:57:24.940

是的。GC 在 之前运行`OutOfMemoryError`并且它继续工作。

OOME 与其他任何错误一样是一个错误：这意味着运行时*可能*处于有问题的状态，但这不会停止 Java。所以当你发现错误时，你可以删除一些引用，错误就会消失。

问题当然是，当您尝试查找对 cut 的引用时，您无法知道其他代码（例如在另一个线程中）是否需要内存，并且该代码可能会引发另一个 OOME 并致命地中断。

因此，在精心设计的应用程序中，您可以捕获并处理 OOME，该程序将继续存在并继续工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:58:36.373

如果您的问题真的是它是否在*之后* `OutOfMemoryError`运行：是的。它也在之前运行。`OutOfMemoryError`不终止 JVM；它被抛出而不是对象分配成功并且程序继续。JVM 继续，包括垃圾收集。

事实上，像Tomcat这样的一些框架就是为此而设计的。他们分配了一点未使用的内存，如果是`OutOfMemoryError`，则释放它，以便有足够的空间来完成有序的关机。这要求 GC 继续运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:55:53.070

在 OOME 的 javadoc 中，它说：

> 当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。

这意味着它已在错误**之前运行。**

顺便说一句，当您遇到此类错误时，很难恢复，因为您不能保证有足够的内存来做其他事情。如果你使用了内存的最后一个字节，你就会被卡住。如果您因为尝试一次性分配 4Gb 而出现此错误，那么您仍然有机会拯救您的灵魂，但如果您需要这些 4Gb 继续，那么您又被卡住了。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/OutOfMemoryError.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/OutOfMemoryError.html)

# java - Java反射getConstructor方法

> ID：13508720
> 
> 赞同：8
> 
> 时间：2012-11-22T08:42:54.467
> 
> 标签：java, inheritance, reflection, extends, getconstructor

可以说我有课程`A`，并且`B`在哪里`B`扩展`A`。我也有一个`B`带有一个参数类型的构造函数`A`。我还有一个`B`名为`bObj`.

有没有办法调用`B.class.getConstructor(new Class[] { bObj.getClass() })`并获取构造函数，因为`B`extends `A`？目前我得到一个`NoSuchMethodException`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T08:53:19.023

我建议你看看[`ConstructorUtils`](http://commons.apache.org/lang/apidocs/org/apache/commons/lang3/reflect/ConstructorUtils.html)来自[Apache Commons Lang](http://commons.apache.org/lang/)的文章。
他们有各种各样的构造函数发现方法。

您的案例应包含在“[匹配可访问构造函数](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/ConstructorUtils.html#getMatchingAccessibleConstructor-java.lang.Class-java.lang.Class...-)”中。

[这](https://github.com/anathema/anathema/blob/master/Platform/src/net/sf/anathema/initialization/reflections/ReflectionsInstantiater.java#L74)是上下文中使用的方法的示例。基本上，你这样称呼它：

```
 private <T> T instantiate(Class<?> input, Object parameter) {
  try {
    Constructor<?> constructor = ConstructorUtils.getMatchingAccessibleConstructor(input, parameter.getClass());
    return (T) constructor.newInstance(parameter);
  } catch (Exception e) {
    //handle various exceptions
  } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T08:51:58.433

不，搜索您的方法需要精确的参数。因此，当您使用反射 API 的查找/搜索方法查找构造函数、方法或字段时，该 API 用于`equals()`查找匹配项。

如果您需要 Java 编译器将使用的相同逻辑，则需要使用[FEST Reflect](https://code.google.com/p/fest/)或[commons beanutils 之](http://commons.apache.org/beanutils/)类的框架。或者您必须调用`getConstructors()`并编写自己的过滤器代码。

乍一看，这似乎很愚蠢：如果 Java 编译器可以做到，为什么反射 API 不能呢？有两个原因：首先，Java 运行时不需要搜索调用哪个方法，因为编译器已经选择了正确的方法。

第二个原因是反射 API 总是“次佳”。它可以做任何事情，但目标永远不是让它真正易于/友好地使用（至少，这是我每次使用它时的想法:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T12:13:26.390

如果您的构造函数不是公共的（或者如果它的类不是公共的），或者无法从您的代码范围访问，则不会通过

```
Class.getConstructor() 
```

尝试

```
Class.getDeclaredConstructor() 
```

反而

# php - 定义自定义变量并直接调用视图部分中的变量

> ID：13508722
> 
> 赞同：0
> 
> 时间：2012-11-22T08:43:00.530
> 
> 标签：php, codeigniter

我想要做的是`my_custom_settings.php`在`config`目录中创建一个文件并在视图部分调用定义的变量。

让我们说`my_custom_settings.php`：

```
define('TEMPLATE_DIR', 'assets/front'); 
```

并在 HTML 中直接查看部分：

```
<link href="<?=TEMPLATE_DIR?>/stylesheet/style.css"> 
```

或任何其他替代解决方案？

**PS：**现在我`base_url()`用来访问路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:59:44.690

我个人扩展了 /core/helpers/url_helper.php ，默认值`site_url() , base_url(), current_url();`等等......我只是扩展了它`base_static_url();`

所以放入 core/helpers/url_helper.php：

```
if ( ! function_exists('base_static_url'))
{
    function base_static_url()
    {
        $CI =& get_instance();
        return $CI->config->slash_item('base_static_url');
    }
} 
```

然后在 config.php 文件中，您只需再添加 1 行：

```
$config['base_url'] = "http://mysite.com/";
$config['base_static_url'] = "http://mysite.com/static/"; //path to your static resources folder 
```

然后您可以使用以下方法调用静态资源：

```
<img src="<?php echo base_static_url();?>img/myimage.png"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:13:22.933

好的，这可能比您要查找的要多，但这是一种将站点范围的配置放在一个文件中的方法，然后可以轻松地使它们可用

在配置文件夹中有文件：my_custom_settings.php

在该文件中，您要设置一个配置值，例如：

```
$config['TEMPLATE_DIR'] = 'assets/front' ;
$config['site_slogan'] = 'Laravel? Never heard of it' ; 
```

创建另一个名为：My_custom_settings.php

将该文件放入：application/library/My_custom_settings.php 该文件将包含：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class My_custom_settings
{

function __construct($config = array() )
{
foreach ($config as $key => $value) {
    $data[$key] = $value;    
    }
//  makes it possible for CI to use the load method 
$CI =& get_instance();
//  load the config variables
$CI->load->vars($data);
}
} // end my custom settings 
```

现在在你的控制器构造函数中

```
public function __construct() {
    parent::__construct();

// Load configs for controller and view
    $this->load->library( 'my_custom_settings' );
    $this->config->load( 'my_custom_settings' );

} // end construct 
```

现在到了很酷的部分——你放入该配置文件的任何内容都将可用于你的控制器和视图。（您也可以在模型构造函数中加载配置）。

在控制器或模型中，您可以通过 $this->config 获得值，例如

```
$this->config->item( 'site_slogan' ) 
```

有点尴尬，但是对于视图，这是奖励，您只需要配置名称

```
echo $TEMPLATE_DIR . '/somefile' ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:04:41.160

图片、css、javascript、pdfs、xml……任何允许直接访问的东西都不应该存在于您的应用程序目录中。你可以这样做，但你真的不应该这样做。在您的目录根目录下为这些文件创建一个新文件夹，它们不应混入您的应用程序中，例如：在您的视图文件夹中。

1.  很有可能，您正在使用 .htaccess 文件，该文件只允许通过 http 访问某些目录。出于安全原因，这非常好，您希望停止任何直接访问控制器和模型的尝试。这也是为什么我们检查 BASEPATH 是否定义在大多数文件的顶部，如果没有定义则 exit('No direct script access.')。

2.  要获得这些资源（js/css/images）的正确路径，您不能使用相对路径，因为我们没有使用正常的目录结构。url /users/login 没有从目录 /users/login 加载文件，它可能甚至不存在。这些只是引导程序用来知道要使用哪个类、方法和参数的 uri 段。要获得正确的路径，请使用正斜杠（假设您的应用程序和资产位于根目录中，而不是子目录中），如下所示：

    ![](../Images/ed1e82ed061daca909d6542d44b77d21.png) 或者你最好的选择，使用绝对网址：

    // 引用你的 $config['base_url'] " /> 等价于：

    [http://mydomain.com/images/myimage.jpg](http://mydomain.com/images/myimage.jpg) CI 中内置了一些帮助程序，您也可以选择使用它们，但这就是您需要知道的全部内容。

# android - OpenGL es 2.0 glDrawElements 索引指针错误

> ID：13508728
> 
> 赞同：2
> 
> 时间：2012-11-22T08:43:24.913
> 
> 标签：android, ios, opengl-es

我无法为每个面使用不同纹理的立方体纹理。我可以在所有面上用一种纹理绘制立方体，但是当我尝试使用多个纹理时它会失败。我尝试这样做的方式是这样的：

```
//my indexing array located in a header file
#define NUM_IMAGE_OBJECT_INDEX 36
static const unsigned short cubeIndices[NUM_IMAGE_OBJECT_INDEX] =
{
    0, 1, 2,   2, 3, 0,      // front
    4, 5, 6,   6, 7, 4,      // right
    8, 9,10,  10,11, 8,      // top
    12,13,14,  14,15,12,     // left
    16,17,18,  18,19,16,     // bottom
    20,21,22,  22,23,20      // back
}; 
```

现在在我的渲染功能中，这目前适用于使用单个纹理绘制立方体

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, iconTextureID);

glDrawElements(GL_TRIANGLES, NUM_IMAGE_OBJECT_INDEX, GL_UNSIGNED_SHORT, 0); 
```

这不起作用

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, iconTextureID);

glDrawElements(GL_TRIANGLES, NUM_IMAGE_OBJECT_INDEX, GL_UNSIGNED_SHORT, (const GLvoid*)&cubeIndices[0]); 
```

从查看其他示例来看，这应该等同于同一件事。最终我想做这样的事情：

```
for(int i = 0; i < 6; i++){

    iconTextureID = textureID[i];                
    glBindTexture(GL_TEXTURE_2D, iconTextureID);
    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, (const GLvoid*)&cubeIndices[i*6]); //index 0-5 use texture 1, 6-11 use texture 2, etc

} 
```

有谁知道这个索引有什么问题？我基本上从一个android项目（有效）中复制粘贴了这段代码，目前正在尝试在ios上执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T16:18:48.767

在 OpenGL ES 2.0 中，索引数据可以来自缓冲区对象或指向客户端内存的指针。您的代码显然正在使用缓冲区对象。尽管您没有显示此缓冲区对象的创建、上传客户端指针数组的位置，或者在`glBindBuffer(GL_ELEMENT_ARRAY_BUFFER)`使用它进行渲染之前调用的位置。它必须在那里，否则您的代码会崩溃。当缓冲区绑定到 时`GL_ELEMENT_ARRAY_BUFFER`，OpenGL 期望给 glDrawElements 的“指针”是缓冲区对象的*字节偏移量*，而不是客户端内存指针。

这就是为什么复制和粘贴编码是一个坏主意的原因。您从哪里复制可能是使用客户端内存；你不是。

如果你想让你的循环代码工作，你需要自己做指针算术：

```
for(int i = 0; i < 6; i++)
{
    iconTextureID = textureID[i];                
    glBindTexture(GL_TEXTURE_2D, iconTextureID);
    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, reinterpret_cast<void*>(i * 6 * sizeof(GLushort)));
} 
```

# ruby-on-rails - 通过关系将对象添加到 has_many 时设置连接表属性

> ID：13508733
> 
> 赞同：4
> 
> 时间：2012-11-22T08:43:53.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在我的 Ruby on Rails 3.2.3 应用程序中，我有两个模型通过第三个模型通过 has_many through 关系连接：

```
class Organization < ActiveRecord::Base
  attr_accessible :description, :name
  has_many :roles, dependent: :destroy
  has_many :members, through: :roles, source: :user
end

class Role < ActiveRecord::Base
  attr_accessible :title
  belongs_to :organization
  belongs_to :user
end

class User < ActiveRecord::Base
  attr_accessible :email, :fullname
  has_many :roles, dependent: :destroy
  has_many :organizations, through: :roles
end 
```

我想将 a`User`与`Organization`. 但是，需要指定`title`上的属性`Role`。为了强制执行这一点，我在 MySQL中将该`title`字段设置为。`NOT NULL`

以下是 Rails 控制台上发生的情况：

```
>> o = Organization.first
>> u = User.first
>> o.members << u
   (0.1ms)  BEGIN
  SQL (0.4ms)  INSERT INTO `roles` (`created_at`, `organization_id`, `title`, `updated_at`, `user_id`) VALUES ('2012-11-22 08:37:23', 1, NULL, '2012-11-22 08:37:23', 1)
Mysql2::Error: Column 'title' cannot be null: INSERT INTO `roles` (`created_at`, `organization_id`, `title`, `updated_at`, `user_id`) VALUES ('2012-11-22 08:37:23', 1, NULL, '2012-11-22 08:37:23', 1)
   (0.1ms)  ROLLBACK
ActiveRecord::StatementInvalid: Mysql2::Error: Column 'title' cannot be null: INSERT INTO `roles` (`created_at`, `organization_id`, `title`, `updated_at`, `user_id`) VALUES ('2012-11-22 08:37:23', 1, NULL, '2012-11-22 08:37:23', 1)
    from /path/... 
```

我知道我可以`Role`直接创建一个实例。但是，在使用运算符时，在连接表上指定属性的更优雅的方法是什么`<<`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:19:20.537

我认为您正在尝试使用不属于其中的信息更新角色表。在您的情况下，角色名称应包含在组织或用户中，而不是您的联接表中。要么包含在父模型中，甚至**更好**，创建另一个连接表，以便您可以将角色与用户联系起来。

```
class role_users < ActiveRecord::Base
  attr_accessible :user_id, role_id
  belongs_to :user
  belongs_to :role
end

class Roles < ActiveRecord::Base
  attr_accessible :title, :foo, :bar
  has_many :role_users
  has_many :users, :through => :role_users
end    

class Users < ActiveRecord::Base
  attr_accessible :other, :foo, :bar
  has_many :role_users
  has_many :roles, :through => :role_users
end 
```

然后像我们一样自己设置这些角色，并添加一个复选框或下拉菜单，以便用户可以选择。或者让用户自己输入信息。

# ios - 如何在 iOS 上断开与 XMPP 的连接？

> ID：13508734
> 
> 赞同：3
> 
> 时间：2012-11-22T08:43:54.150
> 
> 标签：ios, xmpp, logout

我安装了 XMPP，它用于在我的 iOS 应用程序中聊天。用户应该可以注销并让其他用户登录并使用该应用程序。目前 XMPP 聊天运行良好，但如果我注销并尝试使用不同的用户名再次登录，则会出现以下错误。

```
2012-11-22 14:15:52.520 FMB[3297:c07] *** Assertion failure in -[AppDelegate setupStream], /Visni/Project/FMBXMPP/FMB/AppDelegate.m:843
2012-11-22 14:15:52.541 FMB[3297:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Method setupStream invoked multiple times'
*** First throw call stack:
(0x24ee012 0x1fe3e7e 0x24ede78 0x1a79f35 0x6b46 0x8f49 0x50938 0x2f4a3 0x2ea84 0x215653f 0x2168014 0x21587d5 0x2494af5 0x2493f44 0x2493e1b 0x2b1b7e3 0x2b1b668 0xf2b65c 0x288a 0x2795)
libc++abi.dylib: terminate called throwing an exception 
```

我的注销方法中有以下代码。

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
        [appDelegate disconnect]; 
```

关于如何正确注销用户并准备新登录的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T07:57:40.940

您可以通过以下方式断开 XMPP：

```
- (void) disconnectXMPP
{
    [self.xmppStream removeDelegate:self];
    [xmppReconnect         deactivate];
    [self.xmppStream disconnect];
    self.xmppStream = nil;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T13:30:24.967

我不知道我所做的是否是最好的方法，但它确实有效。

注销我使用

```
- (void)resetField:(NSString *)field forKey:(NSString *)key
{

    [[NSUserDefaults standardUserDefaults] setObject:field forKey:key];

}

- (IBAction)logout:(id)sender {

[self resetField:@"" forKey:kXMPPmyJID];
[self resetField:@"" forKey:kXMPPmyPassword];

[[[self appDelegate] xmppStream ]disconnect];
[[[self appDelegate] xmppvCardTempModule] removeDelegate:self];

} 
```

然后再次登录：

```
 - (void)setField:(UITextField *)field forKey:(NSString *)key {
if (field.text != nil)
{
    [[NSUserDefaults standardUserDefaults] setObject:field.text forKey:key];
} else {
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:key];
} 
 }

- (IBAction)login:(id)sender {

[self setField:jidField forKey:kXMPPmyJID];
[self setField:passwordField forKey:kXMPPmyPassword];
[[self appDelegate] connect];  
} 
```

希望能帮助到你！

# ios - 是否有可能有一个 NSDictionary 数组

> ID：13508735
> 
> 赞同：1
> 
> 时间：2012-11-22T08:44:06.880
> 
> 标签：ios, nsmutablearray, nsdictionary

我有来自服务器的数据，例如。

姓名 地址 电话

有没有办法让我创建一个 NSDictionary，如：

```
(
  name=a_name,
  address=a_address,
  telephone=a_telephone
),
(
  name=b_name,
  address=b_address,
  telephone=b_telephone
) 
```

然后在这样做之后，我会将这本字典插入另一个字典。

所以基本上我会有一本下面的字典；

```
(
  User=me,
  Details
  (
    name=a_name,
    address=a_address,
    telephone=a_telephone
  ),
  (
    name=b_name,
    address=b_address,
    telephone=b_telephone
  )
) 
```

我很困惑在数组和字典之间使用哪个。

我有 ff: 代码：

```
[test addObject:dictionary]; 
```

test 是一个 ns 可变数组

这是一个数组，但是，我确实觉得如何将它添加到字典中很奇怪，因为没有方法可以添加数组的值和字符串的键。

所以这个问题可能会拖到一些如何将数组对象添加到 NSDictionary 的问题上。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:57:03.707

尝试这个：

```
NSMutableArray *arr = [[NSMutableArray alloc]init];

while (response) {
    NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];
    [dict setObject:@"name_i" forKey:@"name"];
    [dict setObject:@"address_i" forKey:@"address"];
    [dict setObject:@"telephone_i" forKey:@"telephone"];
    [arr addObject:dict];
} 
```

您还可以将数组添加到字典中

```
NSMutableDictionary *totalDict = [[NSMutableDictionary alloc]init];

[totalDict setObject:@"Me" forKey:@"User"];
[totalDict setObject:arr forKey:@"Details"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T05:34:51.420

```
 NSArray *dictionary = @[
                              @{
                                @"Source_lat": @"28.6287",
                                @"Source_lon": @"77.3208",
                                @"Dest_lat": @"28.628454",
                                @"Dest_lon": @"77.376945",
                                @"S_address": @"Vaishali,Delhi",
                                },
                              @{
                                  @"Source_lat": @"28.628454",
                                  @"Source_lon": @"77.376945",
                                  @"Dest_lat": @"28.5529",
                                  @"Dest_lon": @"77.3367",
                                  @"S_address": @"Noida Sec 63",
                                  },
    @{
                                  @"Source_lat": @"28.5529",
                                  @"Source_lon": @"77.3367",
                                  @"Dest_lat": @"28.6276",
                                  @"Dest_lon": @"77.2784",
                                  @"S_address": @"Noida Sec 44",
                                  },
     @{
                                  @"Source_lat": @"28.6276",
                                  @"Source_lon": @"77.2784",
                                  @"Dest_lat": @"28.6287",
                                  @"Dest_lon": @"77.3208",
                                  @"S_address": @"Laxmi Nagar,Delhi",
                                  },

                             ]; 
```

可能对您有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T08:51:47.073

你可以有一个字典数组。

```
 NSMutableArray *arr = [[NSMutableArray alloc]init];
NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];

while (response) {
    [dict setObject:@"name_i" forKey:@"name"];
    [dict setObject:@"address_i" forKey:@"address"];
    [dict setObject:@"telephone_i" forKey:@"telephone"];
    [arr addObject:dict];
    [dict removeAllObjects];  
} 
```

如果你愿意，你也可以使用字典词典。

```
NSMutableDictionary *totalDict = [[NSMutableDictionary alloc]init];

        [totalDict setObject:dict forKey:@"i"]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T08:46:08.407

您应该创建一个`NSMutableDictionary`然后使用`setObject:ForKey`来添加`NSArray`.

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:test forKey:@"test"]; 
```

# android - 开发用于消息传递的语音到文本，Android

> ID：13508737
> 
> 赞同：0
> 
> 时间：2012-11-22T08:44:09.187
> 
> 标签：android

我是开发 Android 应用程序的新手。我有一个项目正在开发用于消息传递的语音到文本，类似于名为“Vlingo”的应用程序，我正在开发的应用程序还使用文本到语音 (TTS) API 来读取传入消息。到目前为止，我正在学习如何从这些教程中为 Speech to Text 和 Text to Speech 开发一个简单的应用程序；

[语音转文本](http://viralpatel.net/blogs/android-speech-to-text-api/)

[文字转语音](http://www.javacodegeeks.com/2010/09/android-text-to-speech-application.html)

那么从这些教程中，我如何将它与消息传递集成？还是教程与它无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:45:50.653

您必须制作自己的短信应用程序。对于许多手机，您已经可以在编写新消息时使用语音转文本。但是您无法将 tts 集成到默认 SMS 应用程序中

# cordova - 可以在 localStorage 上存储 PhoneGapp 应用程序设置吗？

> ID：13508750
> 
> 赞同：1
> 
> 时间：2012-11-22T08:45:11.037
> 
> 标签：cordova, local-storage

`localStorage`存储数据安全吗？例如，设置。我发现它特别有用且易于使用它的键值对系统。但是，看到[这个帖子](https://stackoverflow.com/questions/12282032/)，让我对使用`localStorage`. 我不希望将设置存储在缓存中，并且很容易被某些 3rd 方应用程序（缓存清理器）删除。

作为附加说明，`localStorage`我的 Android 手机中的哪里可以找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:56:32.533

我使用localStorage，我还没有任何问题。

查看更多信息：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

在手机上，您无法选择查看 localStorage，但如果您在浏览器中打开应用程序，则可以使用编程工具检查 localStorage 上的数据。

另一方面，我认为应用程序 localStorage 与网站上的 localStorage 具有相同的行为。

# php - utf8 字符串长度

> ID：13508752
> 
> 赞同：10
> 
> 时间：2012-11-22T08:45:12.847
> 
> 标签：php, string, utf-8

`strlen()`php 中的函数无法正确返回 utf8 字符的字符串长度，例如`سلام`是 4 个字符，但使用 strlen 后返回 8 个字符

```
<?php
echo strlen('سلام');
?> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T08:49:05.927

核心 PHP 字符串函数都假定 1 个字符 = 1 个字节。他们没有不同编码的概念。要弄清楚UTF-8 字符串中有多少个*字符*（而不是多少*字节*），请使用[`mb_strlen`](http://php.net/mb_strlen)等价的并告诉它字符串的编码是什么：

```
echo mb_strlen('سلام', 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T08:52:45.343

您可以获得二进制 PHP 字符串中 UTF-8 代码点的数量（只要它是有效的 UTF-8 编码）（[演示](http://codepad.viper-7.com/eFBjoA)）：

```
$length = preg_match_all('(.)su', $subject); 
```

如果您安装了多字节扩展名，您也可以使用它：

```
$length = mb_strlen($subject, 'UTF-8'); 
```

另请参阅：[PHP UTF-8 字符串长度](http://hakre.wordpress.com/2011/12/13/php-utf-8-string-length/)

# java - 反序列化版本冲突

> ID：13508753
> 
> 赞同：7
> 
> 时间：2012-11-22T08:45:14.187
> 
> 标签：java, deserialization

我的问题是什么是实现升级过时对象的好方法？

例如，假设您有这样的课程：

```
public class Foo() implements Serializable {
    int a;
    String b;
} 
```

然后你序列化这个对象。然后稍后您可以通过添加以下内容为您的课程添加更多功能：

```
...
int c;
... 
```

您仍然希望保留序列化对象中的信息，但我知道如果您尝试对其进行反序列化，则会出现冲突。那么有没有办法（也许通过检查serialVersionUID）来设置一个`int c`知道它不存在的值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:50:39.887

弃用现有类，使用新结构创建一个新类，并在新类中实现一个构造函数，该构造函数可以获取旧对象并将其转换为新版本。

假设您针对接口创建了旧类，您可以使用新类实现相同的接口，并且新对象仍将与旧类兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:58:22.120

您需要添加一个私有方法：

```
 private void readObject(ObjectInputStream ois) {
      // compare serialVersionUID and determine which fields to expect
      // read the expected fields for that version
      // initialize the new fields.
    } 
```

有关更多信息，请阅读[序列化规范](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/version.html#6678)

# javascript - Google Maps JavaScript API3 marker.setMap(null) 不隐藏标记

> ID：13508754
> 
> 赞同：1
> 
> 时间：2012-11-22T08:45:15.230
> 
> 标签：javascript, google-maps, google-maps-markers

marker.setMap(null) 调用不会从地图中删除标记。

我已经确认地图和标记变量指向正确的位置，但 setMap(null) 调用只是让标记在地图上可见。setVisible(false) 也没有效果。

```
if(sch_ovr_google_markers.length > 0){//remove from map
    for(var i=0;i < sch_ovr_google_markers.length;i++){
        sch_ovr_google_markers[i].setMap(null);//no effect
    }
} 
```

标记在此处创建：

```
var latlon = new google.maps.LatLng(o.lat, o.lon);
var marker = new google.maps.Marker(
{
    map:sch_google_map,
    position: latlon, 
    title: gpn[4],
    icon: pinImage,
    shadow: pinShadow,
    animation: google.maps.Animation.DROP,
    zIndex:10000,
    index: c
});
sch_ovr_google_markers[lidx] = marker;
sch_ovr_google_iws[lidx] = new google.maps.InfoWindow({ content:h, position:latlon });
sch_ovr_google_cbs[lidx] = sch_ovr_google_marker_init(marker,lidx); 
```

除了这个问题，整个地图都很好用。周围的代码测试很好，而且过于复杂，无法完整列出。

我想知道它是否有一些隐藏的先决条件才能起作用。我曾尝试在 setMap(null) 之前删除对它的其他引用，但仍然没有运气。

该文档听起来像是该方法将简单地删除它，但显​​然，至少要满足，还需要一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-15T07:50:53.217

希望原始海报仍然不需要这个迟到的答案，但我有类似的症状并且在互联网上找不到任何帮助。

对我来说，填充数据时出现了问题，导致出现重复标记。因此，调用`setMap(null)`似乎没有做任何事情，尽管它实际上仍然可以正常工作，但当然它只对另一个标记有效，而另一个标记仍然在地图上，看起来好像`setMap(null)`不起作用。

因此，如果您确定标记的映射设置为 null（您可以从 javascript 控制台/调试器检查）但标记仍然可见，请尝试`draggable: true`为标记设置参数并移动它以查看是否有另一个标记潜伏在后面它。

# javascript - 当前可见部分 HTML 时如何连续执行 Javascript 功能？

> ID：13508755
> 
> 赞同：1
> 
> 时间：2012-11-22T08:45:15.757
> 
> 标签：javascript, jquery, dom, dom-events

我只想在 HTML 文档的一部分可见时继续执行特定的 Javascript 函数。这意味着当该部分不再可见时停止函数的执行。

超出可见范围意味着该元素通过以下方式退出：

*   滚动（垂直或水平）
*   更改为其他浏览器选项卡
*   关闭选项卡/窗口/整个浏览器。

示例代码：我有一个带有样式的 HTML，以确保我的 div 主（整个页面）和 div 目标在我的屏幕上（1920 X 1080）低于可见范围：

```
<html>
<head>
    <title>Title</title>
<style type="text/css">
    #main{
        height: 2300px;
    }
    .target{
        border: 1px solid black;
        position: relative;
        top:1000px;
        width:150px;
        height: 150px;
    }
</style>
<script scr="js/jquery.js"></script>
</head>
<body>
    <div id="main">
        <div class="target"></div>
    </div>
</body>
</html> 
```

将订购的 JS/Jquery 代码是什么：

**当 div.target 当前可见时触发 my_function() 的执行**

**当 div.target 被滚动或 tab 被改变时，停止执行 my_function()** ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:23:37.123

好的，我知道这是一个不好的回答方法。标准是关闭这个问题并指向重复的问题，但是这个问题有两个部分和两个单独的答案。所以，我把答案的链接放在这里：

**第 1 部分：检测 HTML 元素何时不在滚动视图中**

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling)

**第 2 部分：检测选项卡何时不在视图中**

[如何判断浏览器/选项卡是否处于活动状态](https://stackoverflow.com/questions/1760250/how-to-tell-if-browser-tab-is-active)

以上两个似乎都有可行的答案。只需实现两者即可获得您想要的。

# javascript - 如何将模型从 ember-data 加载到 handlebars.js 模板中？

> ID：13508760
> 
> 赞同：0
> 
> 时间：2012-11-22T08:45:39.390
> 
> 标签：javascript, ember.js, handlebars.js, ember-data

我有一个 Ember.js 应用程序，它从 JSON 资源获取其数据，并将其放入 ember-data 模型（不确定术语）以在 Handlebars.js 视图中使用。当我尝试将数据放入模板上下文时，我收到此错误：

```
TypeError: arrangedContent.addArrayObserver is not a function 
```

我制作了一个 Fiddle 来演示它。使用[实际的 Fiddle](http://jsfiddle.net/WZ4vt/)查看代码，使用以下链接查看错误（这使得它尝试将数据放入模板/视图）：

[http://fiddle.jshell.net/WZ4vt/show/#/item/1](http://fiddle.jshell.net/WZ4vt/show/#/item/1)

```
s = App.store.find(App.Item, 1);
s.get('value1'); 
```

以上工作正常，并返回“测试”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:32:15.807

我更新了小提琴：http: [//jsfiddle.net/WZ4vt/3/](http://jsfiddle.net/WZ4vt/3/)

您的错误是将您的 ItemController 声明为 ArrayController，但您的 Data Store 只返回了一个实体。我修复了这个问题，另外还修复了您的车把模板，因为这也不起作用。

所以这是新的控制器声明：

```
ItemController: Em.Controller.extend(), 
```

和更新的模板：

```
<script type="text/x-handlebars" data-template-name="item">
    {{content.value1}}
    {{content.value2}}
</script>​ 
```

这里的工作链接： http: [//fiddle.jshell.net/WZ4vt/3/show/#/item/1](http://fiddle.jshell.net/WZ4vt/3/show/#/item/1)

# c# - 插入到 oracle 数据库，但什么也没找到

> ID：13508764
> 
> 赞同：0
> 
> 时间：2012-11-22T08:45:50.840
> 
> 标签：c#, database, oracle, insertion

我已经尝试过尽可能多地插入到 oracle 数据库中。但是当我查询它时，我在数据库中什么也没找到。但它在每次执行非查询时都不会返回对数据库进行的任何操作。请在下面找到我的代码

```
queryString = "INSERT INTO btable (CH_CODE, ME_NUM, CY_CODE, ER_CODE, SUB_CODE, _LIM, LIM__DATE)" +
    " VALUES ('" + int.Parse(rows["ch_code"].ToString()) + "','" + int.Parse(rows["me_numb"].ToString()) + "','" + int.Parse(rows["cy_code"].ToString()) + "','" + int.Parse(rows["er_code"].ToString()) + "','" + int.Parse(rows["Sub_code"].ToString()) + "','" + double.Parse(rows["_limit"].ToString()) + "'," + "to_date('" + usedate +"','dd/mm/yyyy')" + "')"; 

command = new OracleCommand(queryString, conn);
command.Connection = conn;

if (command.Connection.State == ConnectionState.Closed)
{
    command.Connection.Open();
}
//command.Connection.Open();
command.ExecuteNonQuery();
if (command.ExecuteNonQuery() > 0)
{
    intResult++;
} 
```

连接字符串是

```
<add key="OraConnString" value="Data Source=testdr.world;Persist Security Info=False;user id=****;password=****"></add> 
```

它在程序中被称为

```
OracleConnection conn = new OracleConnection(ConfigurationManager.AppSettings["OraConnString"]);
OracleCommand command; 
```

数据库是oracle数据库

# button - Google 加号按钮显示为空白

> ID：13508765
> 
> 赞同：0
> 
> 时间：2012-11-22T08:45:53.860
> 
> 标签：button, google-plus

我已经在我的[网站](http://nativor.co.il/page/%D7%99%D7%A2%D7%95%D7%A5.aspx)上实现了一个 Google 加号按钮，当我将鼠标悬停在按钮上时，我得到一个没有网站描述的空白方块，请参见屏幕截图： ![空白谷歌加](../Images/1513c9491f1c5fb1d3d5a32e8b1dbdc1.png)

如果我按下按钮，我会收到错误消息。这似乎发生在我尝试过的所有 google plus 按钮版本上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:58:34.477

悬停不是空白的，应该出现在悬停中的文本只是出现在它应该出现的左侧。我相信这是由于没有设置语言代码。在加载脚本的地方添加一行来指定语言：

```
<!--Share buttons scripts-->
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
window.___gcfg = {lang: 'iw'};  //ADD ME

(function() {
var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
po.src = 'https://apis.google.com/js/plusone.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();</script><!--Share buttons scripts end--> 
```

这应该解决悬停的错误渲染。

现在，当您单击按钮时出现错误。单击该按钮时，该服务会继续并尝试呈现目标页面的预览。您没有在按钮标记上列出 data-href 值，因此该服务依赖于规范链接，这在您的情况下是问题的原因。您的规范链接是[http://www.navitor.co.il/](http://www.navitor.co.il/)，它不会加载，也可能不是您打算共享的 URL。

更正规范链接，以便共享正常工作，并且 Google 搜索不会对指向损坏 URL 的指针感到困惑。

参考：

*   [设置 +1 按钮目标 URL](https://developers.google.com/+/plugins/+1button/#target-url)
*   [规范化](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066)

# objective-c - iOS 游戏中心。如何确定应用是在邀请朋友还是在寻找随机游戏？

> ID：13508766
> 
> 赞同：1
> 
> 时间：2012-11-22T08:45:58.760
> 
> 标签：objective-c, ios, game-center, gamekit

我正在上课`GKMatchmakerViewController`。它的界面允许用户开始随机游戏或邀请用户的朋友。我希望应用程序以特定方式处理这两个操作中的每一个。问题是我找不到任何线索来区分这两个动作。GameKit 隐藏了内部实现，并且没有（或至少我找不到）委托方法，例如`didStartLookingForRandomMatch`and `didSendInvitationToFriend`。我所拥有的只是`didFindMatch`委托方法，但它没有指定找到的匹配类型。好像我已经清楚地解释了我的问题。有任何想法吗？感谢大家

# linux - Linux TCP/IP 套接字编程

> ID：13508772
> 
> 赞同：1
> 
> 时间：2012-11-22T08:46:33.557
> 
> 标签：linux

我开发了运行良好的 Linux 套接字服务器连接。

从终端开始时，它从客户端监听开始。但是当我关闭终端时，它会停止收听。

即使用户从开始关闭终端，我也需要继续。

如何在 Linux 中将服务器套接字应用程序作为后台进程运行？

我使用 ./a.out 8888(portno) 运行

我会再次连接错误会出现（连接被拒绝）

现在我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:47:47.267

**在终端上执行以&**结尾的脚本。

通常可以通过在命令行末尾添加“&”来启动任务并作为后台任务运行。

检查这个：

[Linux 后台作业](http://www.hcidata.info/background-job.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:35:36.410

如果终端关闭，您可以使用它`nohup`来保持程序运行：

```
nohup ./a.out 8888 & 
```

（标准输出/错误将被写入*nohup.out*而不是终端。）

# php - 在 PHP 中，如何判断 pg_query() 是否是返回数据的查询？

> ID：13508777
> 
> 赞同：2
> 
> 时间：2012-11-22T08:46:52.323
> 
> 标签：php, postgresql

因此，如果没有数据，则成功`mysqli_query()`返回 true，如果有数据，则返回对象（即`mysqli_result`查询是`SELECT`、`SHOW`或）。`DESCRIBE``EXPLAIN`

但是如果成功`pg_query()`，它总是返回相同的东西（查询结果资源），无论是否有任何数据返回。

我可以使用`pg_query()`返回值来确定查询是`SELECT`,`SHOW`还是像我可以使用的`DESCRIBE`那样？`EXPLAIN``mysqli_query()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:06:03.463

没有完整的证明方法可以从 pg 扩展函数中确定“选择”与“插入/更新”。可以使用两个函数，但仅当某些行返回或受 sql 影响时才起作用。

```
// update / insert / delete sql and affect some row 
pg_num_rows($res); // 0
pg_affected_rows($res); // n

// select return some result
pg_num_rows($res); // n
pg_affected_rows($res); // 0 
```

# postgresql - Postgresql链接查询同一张表

> ID：13508784
> 
> 赞同：2
> 
> 时间：2012-11-22T08:47:27.430
> 
> 标签：postgresql, hyperlink

我在这里阅读了很多答案，但这是我的第一个问题。我是新手，所以对问题风格/格式的建议表示赞赏。

PostgreSQL 9.1 我有一张叫做事件的表。主键=序列号

```
 ==============================================
   |serialid|             time|sender|dependency|

   |       1| 2012-11-22 14:40|  John|          |
   |       2| 2012-11-22 14:41|   Sue|         1|
   |       3| 2012-11-22 14:42|  John|         1|
   |       4| 2012-11-22 14:43|   Sue|          |
   |       5| 2012-11-22 14:44|  John|         4|
   |       6| 2012-11-22 14:44|  John|         4| 
```

关于表：第一行（serialid==1）有2个依赖事件：2nd,3rd

(1)FIRST GOAL 我想确保如果我做一个 WHERE 语句 ex: WHERE sender="John" 每个相关事件也存在于结果表中

结果不好：

```
 |       1| 2012-11-22 14:40|  John|          |
   |       3| 2012-11-22 14:42|  John|         1|
   |       5| 2012-11-22 14:44|  John|         4|
   |       6| 2012-11-22 14:44|  John|         4| 
```

我还需要 Sue 的事件（serialid==2），因为它连接到约翰的“主要事件”

好结果：

```
 |       1| 2012-11-22 14:40|  John|          |
   |       2| 2012-11-22 14:41|   Sue|         1|
   |       3| 2012-11-22 14:42|  John|         1|
   |       5| 2012-11-22 14:44|  John|         4|
   |       6| 2012-11-22 14:44|  John|         4| 
```

(2)第二个目标：让我们看一下“好结果”表：

```
 |       1| 2012-11-22 14:40|  John|          |
   |       2| 2012-11-22 14:41|   Sue|         1|
   |       3| 2012-11-22 14:42|  John|         1|
   |       5| 2012-11-22 14:44|  John|         4|
   |       6| 2012-11-22 14:44|  John|         4| 
```

有些事件没有“主要事件”。serialid: 5,6 的事件是 event serialid: 4 的依赖项，但它不在结果中。好的结果是：

```
 |       1| 2012-11-22 14:40|  John|          |
   |       2| 2012-11-22 14:41|   Sue|         1|
   |       3| 2012-11-22 14:42|  John|         1|
   |       4| 2012-11-22 14:43|   Sue|          |
   |       5| 2012-11-22 14:44|  John|         4|
   |       6| 2012-11-22 14:44|  John|         4| 
```

（摘要）所以我需要一个查询，我可以在其中指定一个自定义 where 语句，查询的其余部分收集 where 语句结果的所有依赖项。

像这样的东西：

SELECT * FROM events WHERE “我的条件”

联盟？？魔术依赖收集器查询:-)

（注意）依赖只能是一级深度。

提前谢谢你，戴夫

**更新**

感谢 Igor 我在我的真实数据库中得到了我的真实查询：

```
WITH RECURSIVE dep_event AS 
(
  SELECT ev.serialid,ev.time_processed,ev.time_created,ev.sender_console,ev.sender_manager,ev.sender_map,ev.sender_device,ev.event_type,ev.event_command,ev.event_severity,ev.event_actionlist,ev.event_source,ev.event_info,ev.event_message,ev.dependency_main,ev.dependency_comment
  FROM events ev
  WHERE ev.event_severity='warning'
  UNION
  SELECT ev.serialid,ev.time_processed,ev.time_created,ev.sender_console,ev.sender_manager,ev.sender_map,ev.sender_device,ev.event_type,ev.event_command,ev.event_severity,ev.event_actionlist,ev.event_source,ev.event_info,ev.event_message,ev.dependency_main,ev.dependency_comment
  FROM  events ev
  JOIN dep_event dev ON ev.serialid = dev.dependency_main
             OR dev.serialid = ev.dependency_main
)
SELECT *
FROM dep_event 
```

解释分析

```
"CTE Scan on dep_event  (cost=203955680.32..204419627.58 rows=23197363 width=1034) (actual time=11.204..4602.977 rows=234159 loops=1)"
"  CTE dep_event"
"    ->  Recursive Union  (cost=0.00..203955680.32 rows=23197363 width=176) (actual time=11.200..4468.402 rows=234159 loops=1)"
"          ->  Seq Scan on events ev  (cost=0.00..47382.98 rows=227693 width=176) (actual time=11.181..2145.798 rows=225365 loops=1)"
"                Filter: ((event_severity)::text = 'warning'::text)"
"          ->  Nested Loop  (cost=4.89..20344435.01 rows=2296967 width=176) (actual time=1.593..610.347 rows=5863 loops=3)"
"                ->  WorkTable Scan on dep_event dev  (cost=0.00..45538.60 rows=2276930 width=16) (actual time=0.050..33.360 rows=78053 loops=3)"
"                ->  Bitmap Heap Scan on events ev  (cost=4.89..8.90 rows=1 width=176) (actual time=0.005..0.005 rows=0 loops=234159)"
"                      Recheck Cond: ((serialid = dev.dependency_main) OR (dev.serialid = dependency_main))"
"                      ->  BitmapOr  (cost=4.89..4.89 rows=1 width=0) (actual time=0.003..0.003 rows=0 loops=234159)"
"                            ->  Bitmap Index Scan on serialid  (cost=0.00..2.44 rows=1 width=0) (actual time=0.000..0.000 rows=0 loops=234159)"
"                                  Index Cond: (serialid = dev.dependency_main)"
"                            ->  Bitmap Index Scan on dep_main  (cost=0.00..2.45 rows=1 width=0) (actual time=0.002..0.002 rows=0 loops=234159)"
"                                  Index Cond: (dev.serialid = dependency_main)"
"Total runtime: 4621.138 ms" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:30:06.037

一般来说-这是递归CTE（`WITH RECURSIVE`语句）的明显案例。

它看起来像这样：

```
WITH RECURSIVE dep_event AS (
  SELECT ev.serialid, ev.time, ev.sender, ev.dependency
  FROM events ev
  WHERE ev.sender = 'John' -- start condition here
  UNION
  SELECT ev.serialid, ev.time, ev.sender, ev.dependency
  FROM  events ev
  JOIN dep_event dev ON ev.serialid = dev.dependency -- connect conditions here
                     OR dev.serialid = ev.dependency
)
SELECT *
FROM dep_event; 
```

此处的其他信息[http://www.postgresql.org/docs/current/static/queries-with.html](http://www.postgresql.org/docs/current/static/queries-with.html)

此`RECURSIVE`查询将处理任何级别的依赖关系。

UPD：修复了查询中的一些错误并创建了 SQLFiddle 示例[http://sqlfiddle.com/#!12/4e915/4](http://sqlfiddle.com/#!12/4e915/4)

# mysql - 用于复合主键的 MySQL 集群 NDB API

> ID：13508785
> 
> 赞同：0
> 
> 时间：2012-11-22T08:47:29.553
> 
> 标签：mysql

我有两个 BigInt 的复合主键 (col1+col2)。我正在使用 NDB API 从集群中读取数据。如果我同时使用 col1+col2 NDB API 检索行数据。

问题是，在我只传递 col1（主键的一部分）并尝试从表中检索所有行的一种情况下不起作用。

是否有任何直接的方法来使用本机 c++ MySQL NDB API 和部分复合主键进行读取，而不使用本机 ndb SCAN 操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:09:54.443

MySQL Cluster 使用哈希索引作为主键。这意味着您需要通过此哈希索引为主键搜索提供完全指定的键。默认情况下，总是会创建一个有序索引。

这可以使用索引扫描进行扫描。没有出路。至少您不需要使用表扫描。

# eclipse - 如何启用eclipse内部浏览器（Ubuntu 12.10）？

> ID：13508795
> 
> 赞同：5
> 
> 时间：2012-11-22T08:48:10.480
> 
> 标签：eclipse, ubuntu, browser, gtk

我已经在 Ubuntu 12.10 x64 上安装了 Eclipse 4.2 x64。我需要使用内部网络浏览器，但默认情况下它是禁用的。

首选项 -> 常规 -> 网络浏览器中的“使用内部网络浏览器”单选按钮被禁用。我该如何启用它？

我在另一台使用 Ubuntu 12.04 x64 的 PC 上安装了 Eclipse 4.2 x64，并且内部浏览器运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:51:56.293

我认为 Mozilla GTK 在 12.10 中存在问题。所以尝试安装Webkit引擎。

```
apt-get install libwebkitgtk-1.0-0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:48:06.780

您的系统是否安装了[支持的浏览器](http://www.eclipse.org/swt/faq.php#browserlinux)？

# payment - 付款 - 删除选择 FBCredits 金额的选项

> ID：13508800
> 
> 赞同：1
> 
> 时间：2012-11-22T08:48:37.127
> 
> 标签：payment, facebook-credits

我会尽量简短：

1.  玩家点击“购买”
2.  对话框出现在玩家选择他想购买多少 FBCCredits 的地方（即使该项目花费 10 FBC）

有没有可能去掉这个对话框，只用 10 FBC 完成付款，而不问我想买多少 FBC？

# iphone - 使用目标 C 从给定的 RSS 描述中查找图像 url

> ID：13508801
> 
> 赞同：2
> 
> 时间：2012-11-22T08:48:36.877
> 
> 标签：iphone, objective-c, rss

我想知道如何为我的 RSS 提要 iPhone 应用程序从如下目标 C 中的给定字符串获取图像 URL。

```
<span style="float:right"><img alt="سلمان محمد البحيري" src="http://www.alwaqe.com/contents/authpic/11.jpg" /><br /></span><p ><b>عندما كنت في زيارة لدولة مصر الشقيقه مع قريب لي حضرنا خطبة صلاةبعد الصلاة أتينا للشيخ وامام الجامع وسلمنا عليه وعرفناه بأنفسنا واخبرناه بأننا من السعودية وقلنا له بأن ماذكرته عن السعودية والوهابية غير صحيح فقال كيف غير صحيح 
```

* * *

我只需要从此字符串中获取图像 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:55:16.563

使用 NSScanner Scan from string src 扫描到字符串。
[点击这里查看如何使用 NSScanner](https://stackoverflow.com/questions/594797/how-to-use-nsscanner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:39:09.440

```
NSString *str = @"<span style=\"float:right\"><img alt=\"سلمان محمد البحيري\" src=\"http://www.alwaqe.com/contents/authpic/11.jpg\"/><br/></span><p><b>عندما كنت في زيارة لدولة مصر الشقيقه مع قريب لي حضرنا خطبة صلاةبعد الصلاة أتينا للشيخ وامام الجامع وسلمنا عليه وعرفناه بأنفسنا واخبرناه بأننا من السعودية وقلنا له بأن ماذكرته عن السعودية والوهابية غير صحيح فقال كيف غير صحيح ";
NSMutableArray *target = [NSMutableArray array];
NSScanner *scanner = [NSScanner scannerWithString:str];
NSString *tmp;

while ([scanner isAtEnd] == NO)
{
    [scanner scanUpToString:@"\"" intoString:NULL];
    [scanner scanString:@"\"" intoString:NULL];
    [scanner scanUpToString:@"\"" intoString:&tmp];
    if ([scanner isAtEnd] == NO)
        [target addObject:tmp];
    [scanner scanString:@"\"" intoString:NULL];
}

for (NSString *item in target)
{
    NSLog(@"%@", item);
}
```

# svg - 如何获得转换/旋转的 SVG 路径点

> ID：13508803
> 
> 赞同：3
> 
> 时间：2012-11-22T08:48:40.517
> 
> 标签：svg, jquery-svg

我通过设置属性 transform="rotate(45)" 旋转了一个 SVG 路径元素

现在我怎么能得到旋转的 SVG 路径点？

当我检查属性“d”时，它仍然显示原始点[未旋转]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:52:53.287

如果您通过 path.getPointAtLength() 获得点，则需要将路径转换应用于结果。您通过以下方式获得总转换：

```
var t = path.getTransformToElement( path.ownerSVGElement );
var abspoint = path.getPointAtLength( 0.5 ).matrixTransform( t ); 
```

我没有对此进行测试，但这可能是这种方式......

这对路径上的某些点有好处。如果应该将整个路径数据列表转换为绝对数据，那么 raphael 可能是最快的解决方案......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:45:01.780

svg 本身没有提供该功能的功能。在 jQuery 中也没有 AFAIK。

javascript 库 Raphaël 包含您想要的实用方法，请参阅[Raphael.transformPath](http://raphaeljs.com/reference.html#Raphael.transformPath)。

# c# - 如何动态获取模板句柄

> ID：13508810
> 
> 赞同：0
> 
> 时间：2012-11-22T08:48:58.940
> 
> 标签：c#, xaml, windows-8

我有一个使用模板的 gridView。如何在我的 C# 中访问“shadowText”以隐藏和显示这些图层？

取自 MainPage.xaml

```
 <GridView x:Name="imagesGrid" 
          ItemTemplate="{StaticResource MemeTemplate}" ItemsSource="{Binding}" ItemClick="imagesGrid_ItemClick" IsItemClickEnabled="True" Margin="323,165,91,54" Grid.ColumnSpan="2">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid MaximumRowsOrColumns="3" 
                      VerticalChildrenAlignment="Top" HorizontalChildrenAlignment="Center" />
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
        </GridView> 
```

取自 app.xaml

```
 <DataTemplate x:Key="MemeTemplate">
        <Grid Background="#FF939598" Height="250" Width="250">
            <Image Source="{Binding ImageBitmap}"  Stretch="UniformToFill"/>
            <StackPanel Name="shadowText" Orientation="Vertical" Background="#CC000000" Height="50" VerticalAlignment="Bottom">
                <TextBlock 
                    Name="memeCategory" Text="{Binding DisplayName}"
                   Margin="10,3,0,0" Width="120" Height="20" 
               TextTrimming="WordEllipsis" HorizontalAlignment="Left"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:58:00.920

为您的网格命名并使用`findcontrol`

检查 MemeTemplate 是否使用智能感知找到控制权

# android - 扩展 Android Systrace 工具

> ID：13508811
> 
> 赞同：6
> 
> 时间：2012-11-22T08:49:02.513
> 
> 标签：android, trace, systrace

我们正在扩展 systrace 工具以为我们的设备添加自定义信息。我们特别想知道 android 如何支持 TRACE 生成。跟踪事件，zigote，finders，jvm启动，android启动，linux调用，硬件调用等涉及的架构和机制是什么？

任何人都可以帮助我们提供有关此信息的链接或手册吗？

我们将特别感谢 adb atrace 工具和任何其他相关模块的技术文档。

跟踪文件格式的信息也是我们感兴趣的，我们在哪里可以找到这些跟踪文件以及如何扩展它们以添加更多信息？

**细节 ：**

在**systrace.py**第 81 行中，我们发现：

**atrace_args = ['adb', 'shell', 'atrace', '-z']**

我们知道这会在**/sys/kernel/debug/tracing/中生成一些跟踪文件**

我们的主要兴趣是了解这些文件是在何处、何时以及如何生成的？

非常感谢你 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:32:53.723

正如你提到的，我已经在 systrace 中进行了研究，因为它使用了 atrace。Atrace 内部使用 ftrace。因此，要了解内核事件，请阅读 ftrace。所以了解 Android 框架标签，他们在 Android 框架中手动添加标签，他们觉得跟踪它会很有用。

您可以参考这些以获得更好的清晰度

[http://androidxref.com/4.1.1/xref/system/extras/atrace/atrace.c](http://androidxref.com/4.1.1/xref/system/extras/atrace/atrace.c)

[http://androidxref.com/4.1.1/xref/frameworks/native/libs/utils/Trace.cpp](http://androidxref.com/4.1.1/xref/frameworks/native/libs/utils/Trace.cpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:43:02.067

Grepcode 是你的朋友。我认为一个很好的起点是调试类： [http ://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/Debug .java?av=f](http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/Debug.java?av=f)

有一个有趣的部分描述了调试属性列表：

```
1085            final String TAG = "DebugProperties";
1086            final String[] files = { "/system/debug.prop", "/debug.prop", "/data/debug.prop" }; 
```

每个属性都必须使用特定的注释声明：

```
android.os.Debug.DebugProperty 
```

不过，它似乎仅适用于平台开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T16:43:57.420

我正在从事类似的任务并使用它。它帮助我浏览和理解 Java/c++/内核级别的 api 以及它是如何实现的。

[http://www.srcmap.org/p/1/857623b50f7e/Android_Jellybean_systrace__atrace__ftrace_code_study.html](http://www.srcmap.org/p/1/857623b50f7e/Android_Jellybean_systrace__atrace__ftrace_code_study.html)

# c# - 快速分析与 C# 应用程序的集成

> ID：13508819
> 
> 赞同：3
> 
> 时间：2012-11-22T08:49:32.797
> 
> 标签：c#

我安装了快速分析。

创建进程后，它提供链接，当它从浏览器打开时，它会询问用户名和密码。

如何从在 C# 应用程序中询问用户名和密码的链接获得响应？

请帮助我解决这个问题。

# ocaml - ocaml 电池编译：错误：剩余的 OCaml 编译文件：

> ID：13508820
> 
> 赞同：0
> 
> 时间：2012-11-22T08:49:35.163
> 
> 标签：ocaml, ocaml-batteries

```
Build mode: shared
ocamlbuild -no-links syntax.otarget byte.otarget src/batteries_help.cmo META shared.otarget
Finished, 0 targets (0 cached) in 00:00:00.
SANITIZE: a total of 3 files that should probably not be in your source tree
  has been found. A script shell file
  "/home/fanzhihang/batteries-1.4.1/_build/sanitize.sh" is being created.
  Check this script and run it to remove unwanted files or use other options
  (such as defining hygiene exceptions or using the -no-hygiene option).
Warning: Leftover OCaml type annotation files:
  File pa_estring_top.annot in libs/estring has suffix .annot
IMPORTANT: I cannot work with leftover compiled files.
ERROR: Leftover OCaml compilation files:
  File pa_estring_top.cmo in libs/estring has suffix .cmo
  File pa_estring_top.cmi in libs/estring has suffix .cmi
Exiting due to hygiene violations.
Compilation unsuccessful after building 0 targets (0 cached) in 00:00:02.
make: *** [all] Error 1 
```

电池的这个编译错误真的让我很困惑。我应该如何修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:46:31.830

你知道[OPAM](http://opam.ocamlpro.com/)吗？

```
$ opam install batteries 
```

它将自动安装所有依赖项。

**[编辑]** 如何安装 opam：

```
$ git clone https://github.com/OCamlPro/opam
$ ./configure # (or ./configure --prefix=$HOME if you want to install under your $HOME)
$ make
$ make install
$ opam init
$ eval `opam config -env` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:45:42.797

您可以执行脚本：

```
/home/fanzhihang/batteries-1.4.1/_build/sanitize.sh 
```

这将删除 OCamlbuild 认为不应该在此处的文件（即 .annot、.cmo 和错误正在谈论的 .cmi）。

# javascript - 我的 $.getJSON("<%= Url.Action... 没有执行

> ID：13508827
> 
> 赞同：0
> 
> 时间：2012-11-22T08:50:14.243
> 
> 标签：javascript, json, asp.net-mvc-3

我认为：

```
 <% foreach (var trainingModule in Model.TrainingModules) %>
      <% {  %>
      <tr>
        <td>Training Module</td>
        <td><%: trainingModule.title %></td>
        <td>
           <a href="javascript:ResetModule(<%: Model.User.UserId %>,<%: trainingModule.userTrainingModuleId %>);" class="button">Reset Module</a>
        </td>
        <td></td>
      </tr>
 <% } %> 
```

和：

```
 <script type="text/javascript">
function ResetModule(userId, userScormModuleId)
 {
   ans=window.confirm('Are you sure you want to reset this training module?');                     
   if (ans==true)
   {
     var jqxhr = $.getJSON("<%= Url.Action("ResetModule", "Manage", new { area = "User" }) %>?userId= " + userId + " &value=" + userScormModuleId, function (data) {
     });
   }
   else
   {

   }
 } 
```

然后在我的控制器中我有：

```
[HttpGet]
[NoCache]
public JsonResult ResetModule(int id, int userScormModuleId)
{
    ZincService.ResetModule(id, userScormModuleId);
    return Json(new { success = true }, JsonRequestBehavior.AllowGet);
    //return RedirectToAction("UserDetails", new { id = id});
} 
```

请问我做错了什么？我的动作没有执行 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:31:12.007

在公共 JsonResult ResetModule(int id, int userScormModuleId),

id 应该是 userId 并且 userScormModuleId 应该是 value

# python - 有没有办法将字典的所有值设置为零？

> ID：13508829
> 
> 赞同：4
> 
> 时间：2012-11-22T08:50:21.153
> 
> 标签：python

例如，我有一个 ASCII 字符列表，并希望用一个等于 ASCII 列表中字符数的零列表来压缩它们，

喜欢：

```
 import string

    a = string.printable
    #Gives all ASCII characters as a list ^
    b = zeroes * len(a)
    c = zip(a,b) 
```

类似的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T08:51:53.887

您可以使用 dict 理解：

```
{ x:0 for x in string.printable} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T08:53:05.983

有一个标准方法：

```
mydict = dict.fromkeys(string.printable, 0) 
```

或者，如果您需要一个元组列表（老实说，Martijn 的版本更 Pythonic，但只是为了多样化）：

```
import itertools
tuples = zip(string.printable, itertools.repeat(0)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T08:51:49.760

只需使用列表理解：

```
c = [(i, 0) for i in a] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T08:53:36.563

它可能对您没有帮助，但是如果您要使用字典进行计数，则可以使用`defaultdict`.

```
from collections import defaultdict
my_dict = defaultdict(int) 
```

然后默认情况下将任何键设置为 0。

```
>>> print my_dict['a']
    0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T09:01:53.927

如果你需要一个列表，也许是这样的：

```
import string
c = zip(string.printable, [0]*len(string.printable)) 
```

# wpf - 绑定 HierarchicalDataTemplate 时出现 StackoverflowException

> ID：13508830
> 
> 赞同：0
> 
> 时间：2012-11-22T08:50:29.547
> 
> 标签：wpf, hierarchicaldatatemplate

我想在 WPF 中将 HierarchicalDataTemplate 与 TreeView 控件一起使用。我创建了一个视图模型类，但每次程序启动时都会发生 System.StackOverflowException。我不知道为什么会这样。

这是 WPF 标记：

```
 <TreeView Grid.Row="2" ItemsSource="{Binding ImportTasks}">

        <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type VM:SyncToolViewModel}" ItemsSource="{Binding Path=ImportTasks}">
                <Label Content="{Binding }"/>
            </HierarchicalDataTemplate>
            <HierarchicalDataTemplate DataType="{x:Type VM:VmImportTask}" ItemsSource="{Binding Path=ImportTasks.Tables}">
                <Label Content="{Binding }"/>
            </HierarchicalDataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

这是代码部分：

```
public class SyncToolViewModel
{
    public DBSyncToolLib.DataContext DataContext { get; set; }

    private List<VmImportTask> _ImportTasks;
    public List<VmImportTask> ImportTasks
    {
        get
        {
            if (_ImportTasks == null)
            {
                _ImportTasks = (from IT in DataContext.ImportTask
                                select
                                new VmImportTask()
                                {
                                   DBImportTask = IT
                                }
                               ).ToList();
            }
            return _ImportTasks;
        }
    }
}

public class VmImportTask
{

    public DBSyncToolLib.Schema.ImportTask DBImportTask { get; set; }

    public List<VmImportTaskTable> Tables
    {
        get
        {
            var L = (from B in DBImportTask.ImportTaskTable
                    select new VmImportTaskTable()
                    {
                        DBImportTaskTable = B
                    }).ToList();
            return L;
        }
    }

    public override string ToString()
    {
        return this.DBImportTask.Name;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:57:43.507

我不确定，但确实如此

```
<HierarchicalDataTemplate DataType="{x:Type VM:VmImportTask}" ItemsSource="{Binding Path=Tables}"> 
```

或者

```
<HierarchicalDataTemplate DataType="{x:Type VM:SyncToolViewModel}" ItemsSource="{Binding Path=ImportTasks.Tables}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:37:39.500

您也可以使用简单的样式来代替 HierarchicalDataTemplate。

一个小例子：

```
public partial class MainWindow : Window
{
    public List<Parent> Parents { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        this.Parents = new List<Parent>();
        this.Parents.Add(new Parent(){ParentName = "Parent1",Childs = new ObservableCollection<Child>(){new Child(){ChildName = "Child1"},new Child(){ChildName = "Child2"}}});
        this.Parents.Add(new Parent() { ParentName = "Parent2", Childs = new ObservableCollection<Child>() { new Child() { ChildName = "Child3" }, new Child() { ChildName = "Child4" } } });

        this.DataContext = this.Parents;
    }
}

public class Parent
{
    public string ParentName { get; set; }
    public ObservableCollection<Child> Childs { get; set; }
}

public class Child
{
    public string ChildName { get; set; }
} 
```

xml

```
 <TreeView ItemsSource="{Binding}">
        <!-- First Level-->
        <TreeView.ItemContainerStyle>
            <Style>
                <Setter Property="TreeViewItem.Header" Value="{Binding ParentName}"/>
                <Setter Property="TreeViewItem.ItemsSource" Value="{Binding Childs}"/>
                <!-- Second Level -->
                <Setter Property="TreeViewItem.ItemContainerStyle">
                    <Setter.Value>
                        <Style>
                            <Setter Property="TreeViewItem.Header" Value="{Binding ChildName}"/>
                        </Style>
                    </Setter.Value>
                </Setter>
            </Style>
        </TreeView.ItemContainerStyle>
    </TreeView> 
```

# entity-framework-4 - Visual Studio 不创建 localDB

> ID：13508832
> 
> 赞同：1
> 
> 时间：2012-11-22T08:50:50.403
> 
> 标签：entity-framework-4, visual-studio-2012, localdb

我正在运行 Visual Studio 2012。我在我的解决方案中创建了 3 个项目：数据（使用 Entity Framework 5）、控制台 UI 和 MVC4 UI。当我运行控制台 UI 时，一切正常：程序访问本地数据库。但是，当我运行 MVC 项目时，我收到以下错误：

```
Cannot attach the file 'b:\Users\path-to-project\App_Data\DataAccess.MyContext.mdf' as database 'DataAccess.MyContext'. 
```

我正在将 MVC 项目中的 Web.config 与控制台项目中的 App.config 进行比较：

```
<configSections>    
<section name="entityFramework" 
         type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
         requirePermission="false" />
</configSections> 
```

和

```
<entityFramework>    
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0" />
  </parameters>
</defaultConnectionFactory>
</entityFramework> 
```

在这两个地方。为什么 MVC 项目*不去*LocalDB？

# iphone - 在 Xcode 中将图像添加到 UITextField？

> ID：13508836
> 
> 赞同：68
> 
> 时间：2012-11-22T08:51:09.867
> 
> 标签：iphone, xcode, uitextfield, uipickerview

![在此处输入图像描述](../Images/0ae7531fd5452dc33af7070307dc7fbf.png)

我需要`dropdown`在 Xcode 中实现这个概念。

为此，我正在使用`UIPickerview`.

当点击文本字段时（在 textFieldDidBeginEditing:) 事件上加载此 pickerView。

**问题：**

有没有办法，我可以添加图像`TextField`？

图像就像一个箭头标记，用户可以通过它理解点击`dropdown`时会出现a。`textfield`我该怎么做？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-11-22T09:15:22.377

UITextField 有一个`rightView`属性，如果你有这样的图像，![在此处输入图像描述](../Images/922a9cfe8497f49d2b625451e74d7337.png)那么你可以很容易地将 ImageView 对象设置为 rightView：

```
UITextField *myTextField = [[UITextField alloc] init];

myTextField.rightViewMode = UITextFieldViewModeAlways;
myTextField.rightView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"downArrow.png"]];
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-11-21T22:28:14.303

**在斯威夫特：**

```
textField.leftViewMode = UITextFieldViewMode.Always
textField.leftView = UIImageView(image: UIImage(named: "imageName")) 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-07-11T17:06:15.470

您可以将`UIImageView`放在`UITextField`.

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(96, 40, 130, 20)];
[textField setLeftViewMode:UITextFieldViewModeAlways];
textField.leftView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"searchIccon.png"]]; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-10-06T11:18:06.347

**斯威夫特 3.0**

```
txtField.rightViewMode = .always
txtField.rightView = UIImageView(image: UIImage(named: "selectdrop")) 
```

[![带有下拉图标的文本字段](../Images/17b8defc6257d64894b80a6c2bcc8b0c.png)](https://i.stack.imgur.com/uENfv.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-30T15:01:32.930

要在图像和文本字段之间添加适当的边距/填充，请尝试以下代码。扩展@King-Wizard 的答案。

这里我的 TextField 的高度是 44 检查附加的图像以供参考。

**斯威夫特版本：**

```
emailTF.leftViewMode = .Always
let emailImgContainer = UIView(frame: CGRectMake(emailTF.frame.origin.x, emailTF.frame.origin.y, 40.0, 30.0))
let emailImView = UIImageView(frame: CGRectMake(0, 0, 25.0, 25.0))
emailImView.image = UIImage(named: "image1")
emailImView.center = emailImgContainer.center
emailImgContainer.addSubview(emailImView)
emailTF.leftView = emailImgContainer 
```

[![在此处输入图像描述](../Images/6f35059efb5fc8f3e2548b2391b21f54.png)](https://i.stack.imgur.com/zRQuE.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-22T08:59:39.487

嘿，伙计，您想要下拉视图，然后查看此自定义下拉视图..

1.  [http://code.google.com/p/dropdowndemo/downloads/list](http://code.google.com/p/dropdowndemo/downloads/list)
2.  [http://ameyashetti.wordpress.com/2010/09/26/drop-down-demo/](http://ameyashetti.wordpress.com/2010/09/26/drop-down-demo/)

并为此要求使用此代码

```
UITextField *txtstate =[[UITextField alloc]init]; [txtstate setFrame:CGRectMake(10, 30,170, 30)]; 
txtstate.delegate=self; 

txtstate.text=@"Fruits"; 

txtstate.borderStyle = UITextBorderStyleLine; 

txtstate.background = [UIImage imageNamed:@"dropdownbtn.png"]; 

[txtstate setAutocorrectionType:UITextAutocorrectionTypeNo]; 
[self.view addSubview:txtstate]; 
```

并将您的文本字段边框样式设置为无..

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-12T10:41:14.870

**第 1 步：**将此类添加到您的项目中，并将其添加到身份检查器中的 textFiled 类中，

```
class MyCustomTextField: UITextField {

    @IBInspectable var inset: CGFloat = 0

    @IBInspectable var leftImage: String = String(){
        didSet{
            leftViewMode = UITextFieldViewMode.Always
            leftView = UIImageView(image: UIImage(named: leftImage))
        }
    }

    override func textRectForBounds(bounds: CGRect) -> CGRect {
        return CGRectInset(bounds, inset, inset)
    }

    override func editingRectForBounds(bounds: CGRect) -> CGRect {
        return textRectForBounds(bounds)
    }

    override func leftViewRectForBounds(bounds: CGRect) -> CGRect {
        return CGRectInset(CGRectMake(0, 2, 40, 40), 10, 10) //Change frame according to your needs
    }
} 
```

**第 2 步：**从界面生成器中设置文本插图和左侧图像。

[![在此处输入图像描述](../Images/086f223bf921a4adbe553125db51c81c.png)](https://i.stack.imgur.com/JSvKl.png)

**第三步：**享受。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-22T08:55:32.973

UITextField 具有以下属性：

```
@property(nonatomic, retain) UIImage *background 
```

例子：

```
UITextField *myTextField = [[UITextField alloc] init];
myTextField.background = [UIImage imageNamed:@"myImage.png"]; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-21T11:46:15.873

```
 emailTextField.leftViewMode = .alway
    let emailImgContainer = UIView(frame: CGRect(x: 0, y: 0, width: 30, height: 25))
    let emailImg = UIImageView(frame: CGRect(x: 0, y: 0, width: 25, height: 25))
    emailImg.image = UIImage(named: "SomeIMG")
    emailImgContainer.addSubview(emailImg)
    emailTextField.leftView = emailImgContainer 
```

[在此处输入图像描述](https://i.stack.imgur.com/L1OOz.jpg)

# variables - FitNesse 使用基本操作处理变量

> ID：13508840
> 
> 赞同：1
> 
> 时间：2012-11-22T08:51:37.110
> 
> 标签：variables, fitnesse, operation

这是一个非常简单的问题，因为我可以为此创建一个方法，但是：

我可以对**Dofixture**表中定义的变量进行基本操作吗？喜欢：

获取变量：`|OperationResult|<<MyVar|`

然后，例如使用`Check|>>MyVar+1|`

我使用`>>MyVar+1`, 或例如 ( `>>MyVar / >>OtherVar`)

如果您使用 SLiM 或 FitSharp 插件，我可以更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:40:48.890

您可以检索字符串变量，甚至是健身变量中的对象，然后将该变量传递给另一个方法调用。您甚至可以通过拆分对象执行来做更棘手的事情，但我不确定其他操作。这是我如何在健身测试页面中使用一些变量的一些示例：

示例 1：

这就是你获得价值的方式：

```
|$MyVar=|methodReturningMyVar| 
```

这就是你可以传递价值的方式

```
|methodReceivingMyVarValue|$MyVar| 
```

示例 2：

将脚本的执行分为两部分

```
|Scrip| MyScriptWithSplitedExecution|
|$MyScriptWithSplitedExecutionObject| get Instance |
|doFirstPartOfProcessing|

here you can do some other operations/tests

|Scrip|$MyScriptWithSplitedExecutionObject|
|doSecondPartOfProcessing| 
```

为此，您必须在对象中实现 getInstance 方法并使其返回指向自己的指针。

所有这些都使用 Slim 进行了测试，我不知道是否正在使用 FitSharp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:43:44.263

不，不支持这样的操作。

# windows - 在 UNIX 系统上使用 Window XP ODBC 连接

> ID：13508843
> 
> 赞同：-1
> 
> 时间：2012-11-22T08:51:44.207
> 
> 标签：windows, unix, odbc, unixodbc

我想知道有什么方法可以在 UNIX 上测试 windows ODBC 连接。我已经在 UNIX 上安装了 ODBC 驱动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:55:27.257

不，我知道的唯一方法是创建某种使用 Windows ODBC 的 WebService/服务器并从 Linux 远程调用它。

Windows 和 Linux，甚至 Win32 和 Win64 使用不同的二进制文件连接到数据库，并且数据库驱动程序可以在每个平台上使用不同的设置。

# kendo-ui - KendoUI：单击按钮后将网格数据重置为第一页

> ID：13508849
> 
> 赞同：15
> 
> 时间：2012-11-22T08:52:03.687
> 
> 标签：kendo-ui, kendo-grid

我有以下情况：

在我的页面中，我有一个绑定到数据源的网格（带有分页）。当我单击“提取”按钮时，网格会被填充（通过 Web 服务读取分页数据）。然后我通过网格分页选择“第 2 页”。再次调用 Web 服务以返回数据。

现在：我想再次单击“提取”，以重新加载并在第一页上显示数据。我不确定哪个是最好的方法。

我想只调用一次服务（使用输入参数）并重置网格中的分页索引。

我现在正在使用以下代码：

```
$("#btnExtract").bind("click", function(e) {
    var grid = $("#section-table").data("kendoGrid");
    grid.dataSource.read( {parameter: "value"} );
    grid.dataSource.page(1);
}); 
```

但它实际上对服务进行了两次调用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-22T10:52:40.137

如果您正在执行服务器端分页，这应该足够了，`grid.dataSource.page(1)`因为这将`read`完全按照您已经意识到的那样调用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-29T20:25:03.850

出于某种原因，如果页面设置为 1 并且您再次将其设置为 1，它将执行读取。如果它不是 1 并且您将其设置为 1，它只会转到该页面而不进行读取。因此，要回答您的问题，您可以使用以下代码：

```
if (grid.dataSource.page() != 1) {
   grid.dataSource.page(1);
}
grid.dataSource.read( {parameter: "value"} ); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T20:22:11.237

要仅执行单个请求，您应该使用 dataSource 的**[查询](http://docs.kendoui.com/api/framework/datasource#query)**方法。它允许您创建过滤器/页面/排序等不同方法的组合。

例如：

```
dataSource.query({ page: 5, pageSize: 20, sort: { field: "orderId", dir: "asc" } }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-02T18:20:47.833

使用 DataSource.query() 方法传递页码和您的自定义输入参数：

```
$("#btnExtract").bind("click", function(e) {
    var grid = $("#section-table").data("kendoGrid");
    grid.dataSource.query( { page: 1, parameter: "value"} );
}); 
```

如果您使用服务器端分页和排序，那么您可能还需要包含该信息：

```
$("#btnExtract").bind("click", function(e) {
    var grid = $("#section-table").data("kendoGrid");

    var queryParams = {
        page: 1,
        pageSize: grid.dataSource.pageSize(),
        sort: grid.dataSource.sort(),
        group: grid.dataSource.group(),
        filter: grid.dataSource.filter(),
        parameter: "value"
    };

    grid.dataSource.query(queryParams);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T17:25:58.077

为您的 Kendo 网格 DataSource 读取操作定义一个 parameterMap，这将进入传输元素，如下所示。然后调用 grid.dataSource.page(1)，这将调用 read 并且你应该被排序。

```
 new kendo.data.DataSource({      
transport: {
                   read: {
                          // ur read
                          },
           parameterMap: function (o, operation) {
                         var output = null;
                         switch (operation) {
                                    case "create":
                                    break;
                                case "read":
                                    output =  {parameter: "value"};
                                    break;
                                case "update":
                                    break;
                                case "destroy":
                                    break;
                        }
                     return output;             }}}); 
```

# java - 使用编辑器验证表格的单元格

> ID：13508851
> 
> 赞同：4
> 
> 时间：2012-11-22T08:52:12.550
> 
> 标签：java, swing, jtable, tablecelleditor, jpasswordfield

我的 JTable 有一个密码字段编辑器。当用户单击编辑另一个字段时，如果文本长度小于 8 位，我想显示一条错误消息。我试过焦点听众。但它不起作用。请帮助我，因为我刚刚开始使用 java swing。

```
class PasswordEditor extends DefaultCellEditor 
{

    TextBox m_passWord = new TextBox(); 
    public PasswordEditor() {
        super(new TextBox());
    }

    @Override
    public Object getCellEditorValue() {

        return this.m_passWord.getText();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {

        Object fieldValue = value;
        if(null == fieldValue)
            fieldValue = Constants.EMPTY_STRING;

        this.m_passWord.addInputMethodListener(new InputMethodListener() {

            @Override
            public void inputMethodTextChanged(InputMethodEvent event)
            {
                // TODO Auto-generated method stub

            }

            @Override
            public void caretPositionChanged(InputMethodEvent event)
            {
                // TODO Auto-generated method stub

            }
        })
        this.m_passWord.addFocusListener(new FocusListener() {

            @Override
            public void focusLost(FocusEvent e)
            {
                if (!e.isTemporary()) {
                      String content = PasswordEditor.this.m_passWord.getText();
                      System.out.println((content));
                }

            }

            @Override
            public void focusGained(FocusEvent e)
            {
                //TODO init
            }
        });

        this.m_passWord.setEditable(true);
        this.m_passWord.setText(fieldValue.toString());
        return this.m_passWord;
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T10:34:26.267

据我了解这个问题，它是关于验证*编辑器*中的输入（保护自己免受无效值的模型是另一个故事，IMO）并在用户尝试提交输入时通知他/她的错误。

一个简单的方法是使用 InputVerifier：

*   在其 verify 方法中实现验证规则
*   在其 shouldYieldFocus 中实施通知
*   子类 DefaultCellEditor 并覆盖其 stopCellEditing 以调用 shouldYieldFocus 并返回其结果（又名：拒绝提交编辑）

一些代码片段：

```
final InputVerifier iv = new InputVerifier() {

    @Override
    public boolean verify(JComponent input) {
        JTextField field = (JTextField) input;
        return field.getText().length() > 8;
    }

    @Override
    public boolean shouldYieldFocus(JComponent input) {
        boolean valid = verify(input);
        if (!valid) {
            JOptionPane.showMessageDialog(null, "invalid");
        }
        return valid;
    }

};
DefaultCellEditor editor = new DefaultCellEditor(new JTextField()) {
    {
        getComponent().setInputVerifier(iv);
    }

    @Override
    public boolean stopCellEditing() {
        if (!iv.shouldYieldFocus(getComponent())) return false;
        return super.stopCellEditing();
    }

    @Override
    public JTextField getComponent() {
        return (JTextField) super.getComponent();
    }

};

JTable table = new JTable(10, 2);
table.setDefaultEditor(Object.class, editor); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T05:26:44.457

覆盖 stopCellEditing() 并在其中实现条件。

```
 class PasswordEditor extends DefaultCellEditor 
{

    TextBox m_passWord = new TextBox(); 
    public PasswordEditor() {
        super(new TextBox());
    }

            @Override
    public boolean stopCellEditing()
    {
        if(getCellEditorValue().toString().length() < 8)
        {
            JOptionPane.showMessageDialog(UsmUserView.this.m_Parent, "Password Must Be 8 Bytes Long !! Please Check");
            return false;
        }
        fireEditingStopped();
        return true;
    }

    @Override
    public Object getCellEditorValue() {

        return this.m_passWord.getText();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {

        Object fieldValue = value;
        if(null == fieldValue)
            fieldValue = Constants.EMPTY_STRING;

        this.m_passWord.setEditable(true);
        this.m_passWord.setText(fieldValue.toString());
        return this.m_passWord;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T07:48:27.467

覆盖 stopCellEditing() ，您可以尝试以下代码来获取错误单元格的焦点。

```
class PasswordEditor extends DefaultCellEditor 
{

    private TextBox m_passWord = new TextBox(); 
    public PasswordEditor() {
        super(new TextBox());
    }

            @Override
    public boolean stopCellEditing()
    {
        if(getCellEditorValue().toString().length() < 8)
        {
            // Text box will get the focus and will shown in Red line as border for that cell.
            TextBox aTextBox = (TextBox)getComponent();
            aTextBox.setBorder(new LineBorder(Color.red));
            aTextBox.selectAll();
            aTextBox.requestFocusInWindow();
            JOptionPane.showMessageDialog(UsmUserView.this.m_Parent, "Password Must Be 8 Bytes Long !! Please Check");
            return false;
        }
        return super.stopCellEditing();
    }

    @Override
    public Object getCellEditorValue() {

        return this.m_passWord.getText();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {

        Object fieldValue = value;
        if(null == fieldValue)
            fieldValue = Constants.EMPTY_STRING;

        this.m_passWord.setEditable(true);
        this.m_passWord.setText(fieldValue.toString());
        return this.m_passWord;
    }

} 
```

# ruby - 无法在 Mountain Lion 上安装 therubyracer -v '0.10.0'

> ID：13508852
> 
> 赞同：3
> 
> 时间：2012-11-22T08:52:17.733
> 
> 标签：ruby, rubygems, osx-mountain-lion, twitter-bootstrap-rails, therubyracer

我不知道为什么这不起作用。我大部分时间都在工作，然后我突然不能再运行“捆绑安装”了。

我得到：

```
Using libv8 (3.3.10.4) 
Installing therubyracer (0.10.0) 
Errno::EACCES: Permission denied - /Users/username/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/therubyracer-0.10.0/.gitignore
An error occurred while installing therubyracer (0.10.0), and Bundler cannot continue.
Make sure that `gem install therubyracer -v '0.10.0'` succeeds before bundling. 
```

我在使用 ruby​​ 1.9.3p194 的 Mountain Lion (10.8.2) 上。自制软件已更新。宝石已更新。XCode 是最新的。

我已经尝试了一切，但无法使其正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:22:51.133

此方法对我有用：

指定要在应用程序的 gemfile 中使用的版本：
gem 'therubyracer'，'=0.10'，平台：：ruby

unistall libv8 & therubyracer in terminal，运行下一个命令：
gem unistall therubyracer
> select 3 to删除所有版本

gem uninstall libv8

选择要卸载的 gem：
1\. libv8-3.3.10.4-x86-linux
2\. libv8-3.11.8.3
3\. 所有版本
> 3

然后最后运行 bundle install & update

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:49:13.410

奇怪的错误，它无权读取/Users/username/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/therubyracer-0.10.0/.gitignore。

您是否尝试过更改您的 ruby​​ gem 文件夹的权限？

# rest - FOSRestBundle json 解码问题

> ID：13508854
> 
> 赞同：3
> 
> 时间：2012-11-22T08:52:32.757
> 
> 标签：rest, symfony, fosrestbundle

使用[FOSRestbundle](https://github.com/FriendsOfSymfony/FOSRestBundle/)，尝试使用 POST 和 content-type as 将数据插入表中`application/json`。我`config.yml`的有以下

```
fos_rest:
  param_fetcher_listener: true
  body_listener: true
  format_listener:
    default_priorities: ['json', html, '*/*']
    prefer_extension: true
  view:
    view_response_listener: force
    failed_validation: HTTP_BAD_REQUEST
    default_engine: php
  formats:
    json: true 
```

在控制器中添加了这样的东西

```
$request= $this->getRequest();
$form->bindRequest($request);
$em = $this->get('doctrine')->getEntityManager();
$em->persist($entity);
$em->flush(); 
```

但是获取`null`所有数据库字段的值。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-28T05:33:20.437

FOSRestBundle 的 Body Listener 已经对请求内容进行了 json 解码，并将其存储在 Request 参数包中。您可以使用访问 json 解码数组

`$request->request->all()`

```
public function postFooAction(Request $request)
{
    if (!$request->getFormat($request->headers->get('Content-Type')) == 'json') {
        throw new BadRequestHttpException("Invalid Content-Type Headers");
    }
    $data = $request->request->all(); // FOSRestBundle's BodyListener sets the Request Parameter Bag to the json decoded data already

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:32:34.397

虽然它是 Silex 量身定制的，[但这](http://silex.sensiolabs.org/doc/cookbook/json_request_body.html)应该可以解决您的问题：

```
use Symfony\Component\HttpFoundation\Request;

...

if (0 === strpos($request->headers->get('Content-Type'), 'application/json')) {
    $data = json_decode($request->getContent(), true);
    $request->request->replace(is_array($data) ? $data : array());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:46:15.697

Formtype getName 方法返回表单类型名称，将其更改为表名称。它现在工作。谢谢。

# c# - 从 MasterPage 方法访问内容页面方法

> ID：13508855
> 
> 赞同：1
> 
> 时间：2012-11-22T08:52:32.270
> 
> 标签：c#, asp.net, master-pages, content-pages

> **可能重复：**
> [如何从母版页调用内容页面功能](https://stackoverflow.com/questions/8165930/how-to-call-content-page-function-from-master-page)

我需要从母版页事件访问内容页方法。我怎样才能做到这一点？

我在stackoverflow中看到了这个但不知道如何使用它 -[链接](https://stackoverflow.com/questions/887178/content-page-class-method-calling-from-master-page-class)

```
(cphPage.Page as PageBase).YourMethod(); 
```

你能解释一下吗？

```
Content Page:

public partial class Call_Center_Main : System.Web.UI.Page
{
    Page_Load(object sender, EventArgs e)
    {
    }

    public void MenuClick(string ClkMenu)
    { 
     // Some Code
    }
}

MasterPage:

public partial class MasterPage : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void Menu1_MenuItemClick(object sender, MenuEventArgs e)
    {
      //How Can I call MenuClick method from Content Page from Here  ???
    } 
```

如何`MenuClick`从`Menu1_MenuItemClick`Masterpage 中的 Content Page 调用方法？？？

# spring-mvc - spring org.springframework.ui.Model 初始化

> ID：13508857
> 
> 赞同：0
> 
> 时间：2012-11-22T08:52:41.067
> 
> 标签：spring-mvc, uiviewcontroller

我使用 spring，我想配置我的 uiModel 以通过服务返回到我的控制器中。但我的问题是：如何初始化模型变量？

按照我的代码发布。谢谢

我的控制器

```
@RequestMapping(value = "/page/{idPage}", method = RequestMethod.GET)
public String page(@PathVariable("idPage") long idPage, Model uiModel) {
    uiModel= pageService.modelForPage(idPage);
    return "page";
} 
```

我的服务

```
public Model modelForPage(long idPage) {

  Model uiModel= ???
    // other lines for  some addAttribute
  return uiModel;

} 
```

如果我写模型 uiModel = null; 我有 java.lang.NullPointerException;

# c# - 24位整数

> ID：13508858
> 
> 赞同：6
> 
> 时间：2012-11-22T08:52:42.537
> 
> 标签：c#, biginteger

要检查一些银行帐号，我想对帐号进行模 97。但是很多帐号在一个 UInt64 中输入太大了。

如何对 24 位整数进行运算？

谢谢，

示例代码（它不能转换）：

```
(Convert.ToUInt64("756842356987456214536254") % 97 == 1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T08:55:06.183

一种方法是使用`System.Numeric`'s [`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)：

```
BigInteger bi = BigInteger.Parse("756842356987456214536254"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:11:12.293

谢谢，

这是工作。

```
Org.BouncyCastle.Math.BigInteger bi = new BigInteger("756842356987456214536254");

(Convert.ToInt32(bi.Mod(new BigInteger("97")).ToString()) == 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:53:01.743

如果数字最多为 28 位，您也可以使用`decimal`. 这可能比使用更方便`BigInteger`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-23T12:02:10.353

[如果输入是文本，那么获取字符串并使用Encoding.GetBytes 方法](https://msdn.microsoft.com/en-us/library/system.text.encoding.getbytes%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)可能会更容易，因此您可以获得一个可以传递给[BigInteger 构造函数](https://msdn.microsoft.com/en-us/library/system.numerics.biginteger.biginteger(v=vs.110).aspx)的字节数组，如下例所示：

```
var enc = new System.Text.UTF8Encoding();
var bi = new BigInteger(enc.GetBytes("756842356987456214536254"));
var result = (bi % 97).ToString(); 
```

# javascript - jQuery 元素迭代上下文选择器

> ID：13508860
> 
> 赞同：0
> 
> 时间：2012-11-22T08:52:48.993
> 
> 标签：javascript, jquery, html, dom, iteration

我正在 jQuery 中创建表单验证，但我遇到了一些问题；

首先，我遍历所有要验证的元素并将它们推送到一个数组中（我已经尝试了以下所有方法）：

```
1\. errorfields.push($("#name"));
2\. errorfields.push(document.getElementById("name"));
3\. errorfields.push("name"); 
```

然后，最后我遍历这些项目并想要添加一条错误消息。

```
for(var i = 0; i < errorfields.length; i++){
  1\. var parent = errorfields[i];
  2\. var parent = $(errorfields[i]);
  3\. var parent = $("#" + errorfields[i]);
} 
```

所有这些回报是：

```
[<input>, context: #document, selector: "#name"] 
```

如果我尝试创建 {input} 的 jQuery 对象，它返回完全相同。

即使我写了这样一行：

```
console.log($("#name")); 
```

它将返回带有上下文和选择器的数组。可能是什么问题？

顺便说一句，我无法在这个对象上执行 jquery 函数。这就是重点，看到我想添加一个 2px 红色边框和一个 $(parent).after("error message");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:00:27.480

我认为这应该对你有用。

```
errorfields.push( $("#name")[0] );
//Get the html element rather than the jQuery element (an object). 
```

然后在你的 for 循环中，你应该有这样的东西：

```
var parent = $( errorfields[i] );
//This will get you the jQuery element again. 
```

[这是一个使用 div 来展示这一点的快速示例。](http://jsfiddle.net/aGWsE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:04:14.373

`$("#name")`肯定会返回一个包含所有方法的 jQuery 对象。在您的日志中，我认为您只注意到[拥有](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)的财产。如果您查找原型链，您将看到所有`$.fn`方法。如果`#name`不存在，则长度为`0`。

如果要将 jQuery 对象转换为数组，应使用[.get()](http://api.jquery.com/get/)或[[].slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

```
var array = $('.example').get(); 
```

或者：

```
var array = [].slice.call( $('.example') ); 
```

# java - 如何避免在 ADF 中显示错误信息后转到下一页？

> ID：13508862
> 
> 赞同：0
> 
> 时间：2012-11-22T08:52:56.293
> 
> 标签：java, action, actionlistener, oracle-adf

我有一个问题。我需要检查来自 View Object 的电子邮件。如果电子邮件不存在，我将执行一些代码。如果电子邮件已经存在，它将显示一些电子邮件已经存在的消息。

目前我已经这样做了，如果电子邮件存在，则会抛出消息“此电子邮件已使用”。但我的问题是，如果这条消息被抛出，用户仍然可以转到下一页。那么如果收到此消息，如何阻止用户转到下一页。

这里我附上一些代码：

```
 public void saveAdditionalProfile(ActionEvent event) { {
    //        saveAndExit()
    try {

        int rowCount = 0;
        ViewObject emailVO1 = appModule.getIwteEmployeeVO1();
        currentRow = emailVO1.getCurrentRow();
        String strEmail1 = (String)currentRow.getAttribute("Email1");
        String SSN = (String)currentRow.getAttribute("Ssn");
        rowCount = getEmpCountByEmail(strEmail1, SSN);

        if(rowCount == 0){
       //have another method here

        }
        else{
            Util.displayErrorMessage("Email has been used.");   
        }

    } catch (Exception e) {
        // TODO: Add catch code
        e.printStackTrace();
    }

}
public static int getEmpCountByEmail(String email, String SSN) {
    AppModuleImpl appModule = Util.getAppmodule("AppModuleDataControl");        
    ViewObjectImpl emailVO = appModule.getIwteEmployeeVO1();
    emailVO.setWhereClause("UPPER(Email1) = '" + email.toUpperCase() + "' AND SSN <> '"+ SSN + "'");
    emailVO.executeQuery();
    emailVO.setWhereClause("");

    return emailVO.getRowCount();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:11:37.130

你如何导航到下一页？上层方法是如何调用的？

如果调用upper方法导航到下一页，这很容易。

```
 else{
      Util.displayErrorMessage("Email has been used.");   
      break;
     } 
```

这应该可以解决问题。

# java - Java、JPA、bean 托管事务、TransactionRequiredException

> ID：13508864
> 
> 赞同：0
> 
> 时间：2012-11-22T08:53:01.723
> 
> 标签：java, jpa, transactions, ejb, bean-managed-transactions

我有两个无状态 EJB。一种使用容器管理事务，另一种使用 bean 管理。从容器管理的 EJB 中，我调用了一种 bean 管理的 EJB 方法。

```
public class firstEJB{
    public void myMethod(){
        ejb.longRunningMethod();
    }

    @EJB
    private secondEJB ejb;
}

@TransactionManagement(TransactionManagementType.BEAN)
public class secondEJB {
    public void longRunningMethod(){
        while (true) {
            this.ut.begin();
            //do smth
            this.ut.commit();
        }
    }

    @Resource
    private UserTransaction ut;
} 
```

我得到了错误

```
Caused by: javax.persistence.TransactionRequiredException: 
Exception Description: No externally managed transaction is currently active for this thread
at org.eclipse.persistence.internal.jpa.transaction.JTATransactionWrapper.throwCheckTransactionFailedException(JTATransactionWrapper.java:86)
at org.eclipse.persistence.internal.jpa.transaction.JTATransactionWrapper.checkForTransaction(JTATransactionWrapper.java:46)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.checkForTransaction(EntityManagerImpl.java:1776)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:449)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
at com.sun.enterprise.container.common.impl.QueryWrapper.getResultList(QueryWrapper.java:195)
at com.sun.enterprise.container.common.impl.TypedQueryWrapper.getResultList(TypedQueryWrapper.java:129)
at VIGS.Statistics.DataProcessor.secondEJB.longRunningMethod(secondEJB.java:34)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:42)
at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
... 42 more 
```

我可以使用容器管理的 EJB 中的 bean 管理的事务调用 EJB 的方法吗？如果是 - 有什么问题？

PS 我在第 34 行遇到了错误。这是这一行的代码：

```
while ((lf = this.em.createNamedQuery("getNotProcessedLogFiles", LogFile.class).setMaxResults(0).setLockMode(LockModeType.PESSIMISTIC_WRITE).getResultList().get(0)) != null) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:10:43.253

一切都很简单 - 在我的 while 循环中，我尝试设置锁定模式 LockModeType.PESSIMISTIC_WRITE 但我们只能在事务内部进行...

# c# - 为什么我不能在我的代码中使用 Response.Redirect 两次

> ID：13508876
> 
> 赞同：0
> 
> 时间：2012-11-22T08:53:54.657
> 
> 标签：c#, asp.net, .net

我的代码是

```
if (k =="")
{
    Label1.Text = "User Name or Password wrong !";
}
else if (k == "user")
{

    Response.Redirect("admin_info.aspx",false);

}
else if (k == "admin")
{

    Response.Redirect("Default.aspx",false);
} 
```

当我使用`k == "admin"`它是在使用之前还是在用户之后使用它时，它可以工作，但是`k == "user"`response.redirect 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:19:13.620

当你将初始化你的 k 时，写 k=string.empty。

还要更改重定向代码中的 Response.Redirect("admin_info.aspx",True) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:31:58.913

鉴于调试似乎显示`else if (k == "user")`检查成功，最可能的解释是有问题的重定向实际上正在工作，但`admin_info.aspx`页面也在重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:04:11.703

我猜这个问题可能是身份验证。
我猜你正在使用表单身份验证。如果是这样，那么您必须首先对用户进行身份验证，然后重定向到其他页面。

```
FormsAuthentication.SetAuthCookie(k, false);
Response.Redirect("admin_info.aspx",false); 
```

# javascript - 重置子元素的不透明度 - Maple Browser (Samsung TV App)

> ID：13508877
> 
> 赞同：78
> 
> 时间：2012-11-22T08:54:00.523
> 
> 标签：javascript, css, samsung-smart-tv, smart-tv

我在创建具有子元素的透明元素时遇到问题。使用此代码，子元素从父元素获取不透明度值。

我需要将孩子的元素不透明度重置/设置为任意值。参考浏览器是`Maple Browser (for a Samsung TV Application)`.

```
 .video-caption {
        position: absolute;
        top:50px;
        width: 180px;
        height: 55px;
        background-color: #000;
        -khtml-opacity:.40; 
        -moz-opacity:.40; 
        -ms-filter:"alpha(opacity=40)";
        filter:alpha(opacity=40);
        filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0.4); /*just for testing*/
        opacity:.40; 
    }
    .video-caption > p {
        color: #fff !important;
        font-size: 18px;
        -khtml-opacity:1; 
        -moz-opacity:1; 
        -ms-filter:"alpha(opacity=100)";
        filter:alpha(opacity=100);
        filter: progid:DXImageTransform.Microsoft.Alpha(opacity=1);
        opacity:1; 
    } 
```

编辑标记

```
<div> <img id="videothb-1" src="https://xxxxx/splash.jpg"> <div class="video-caption"> <p>Description here</p> </div> </div> 
```

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-11-22T09:05:10.280

您可能遇到的问题（基于查看您的选择器）是不透明度会影响父级的所有子元素：

```
div
{
    background: #000;
    opacity: .4;
    padding: 20px;
}

p
{
    background: #f00;
    opacity: 1;
}​ 
```

[http://jsfiddle.net/Kyle_/TK8Lq/](http://jsfiddle.net/Kyle_/TK8Lq/)

但是有一个解决方案！使用 rgba 背景值，您可以在任何地方获得透明度 :)

```
div
{
    background: rgba(0, 0, 0, 0.4);
    /*opacity: .4;*/
    padding: 20px;
}

p
{
    background: rgba(255, 0, 0, 1);
    /*opacity: 1;*/
}​ 
```

[http://jsfiddle.net/Kyle_/TK8Lq/1/](http://jsfiddle.net/Kyle_/TK8Lq/1/)

* * *

对于文本，您可以使用相同的 rgba 代码，但设置为 CSS 的 color 属性：

```
color: rgba(255, 255, 255, 1); 
```

但是您必须在所有内容上使用 rgba 才能使其正常工作，您必须删除所有父元素的不透明度。

[http://jsfiddle.net/Kyle_/TK8Lq/2/](http://jsfiddle.net/Kyle_/TK8Lq/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-26T13:35:01.843

凯尔的解决方案效果很好。

此外，如果您不喜欢使用 RGBA 设置颜色，而是使用 HEX，也有解决方案。

以 LESS 为例，您可以使用如下的 mixin：

```
.transparentBackgroundColorMixin(@alpha,@color) {
  background-color: rgba(red(@color), green(@color), blue(@color), @alpha);
} 
```

并像使用它一样

```
.myClass {
    .transparentBackgroundColorMixin(0.6,#FFFFFF);
} 
```

实际上，这是[内置的 LESS 函数](http://lesscss.org/functions/#color-operations-fade)也提供的：

```
.myClass {
    background-color: fade(#FFFFFF, 50%);
} 
```

请参阅[如何使用 Less 编译器将 HEX 颜色转换为 rgba？](https://stackoverflow.com/questions/14860874/how-to-convert-hex-color-to-rgba-with-less-compiler)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-13T22:44:07.837

上面的答案效果很好，但是对于喜欢使用十六进制颜色代码的人，您可以通过十六进制颜色本身设置透明度。EXP：#472d20b9 - 最后两个值设置颜色的不透明度，而 #472d20 将是​​相同的颜色但没有不透明度。注意：在 Chrome 和 Firefox 中运行良好，而 Edge 和 IE 则不行。没有机会在其他浏览器中测试它。

# iis - 恢复 IIS 6 和 7 配置

> ID：13508881
> 
> 赞同：1
> 
> 时间：2012-11-22T08:54:18.993
> 
> 标签：iis, restore, maintenance

我的公司网站设置为每周维护一次，我们通过将 IIS 中的物理路径指向维护文件夹来进行维护（我知道这不是一个好的做法，但他们最初就是这样设计的）。

现在我的想法是通过替换applicationHost.config（IIS 7）和恢复IIS设置（IIS 6）来改变放置/删除维护页面的方式。

我的问题是，如果我恢复 IIS 设置/替换 applicationHost.config，会导致 IIS 不稳定吗？我需要重新启动 IIS / 重新启动应用程序池吗？或者是否有任何其他因素/事件会对服务器/网站造成致命影响？

谢谢

# oracle - 在 oracle 10g 中通过网络链接导出数据

> ID：13508882
> 
> 赞同：1
> 
> 时间：2012-11-22T08:54:51.037
> 
> 标签：oracle, oracle10g, datapump

我想在 Oracle 10g 中使用数据泵导出数据库中的模式并通过网络链接`hr`将`test`其导入数据库中的`scott`模式。`Orcl`

用户`system`（`Orcl`数据库）创建了一个数据库链接：

```
create database link hrlink connect to hr identified by hr using 'remote_service'; 
```

通过使用此链接系统，用户可以`hr`毫无问题地访问用户的模式。这些查询运行良好并返回正确的结果：

```
conn system/sys
select * from tab@hrlink
select * from emp@hrlink 
```

但是当我尝试从 Linux 导出如下：

```
$ expdp system/sys directory=DATA_PUMP_DIR dumpfile=hr.dmp schemas=hr network_link=hrlink 
```

或者：

```
$ impdp system/sys directory=DATA_PUMP_DIR remap_schema=hr:SCOTT network_link=hrlink 
```

这两个命令都失败并引发错误，例如：

```
ORA-02019: connection description for remote database not found 
```

# xslt - 根据不同的值计算 xsl

> ID：13508883
> 
> 赞同：0
> 
> 时间：2012-11-22T08:55:02.273
> 
> 标签：xslt, distinct

我的 xml 如下所示：

```
<root>
  <r time="2" user="loginIP=100&amp;loginName=a0" />
  <r time="3" user="loginIP=101&amp;loginName=a2" />
  <r time="4" user="loginIP=102&amp;loginName=a3" />
  <r time="6" user="loginIP=101&amp;loginName=a2" />
  <r time="5" user="loginIP=104&amp;loginName=a5" />
  <r time="8" user="loginIP=105&amp;loginName=a7" />
  <r time="9" user="loginIP=105&amp;loginName=a7" />
  <r time="11" user="loginIP=104&amp;loginName=a5" />
</root> 
```

Q：现在我想得到每个用户的总时间（loginName代表用户），然后显示哪个用户的总时间最短，哪个用户的总时间最长。

我尝试使用： //r[not(substring-after(./@user,"loginName=")=substring-after(following-sibling::r/@user,"loginName="))] 来获取首先是所有用户名，但失败了，此 xpath 将返回重复值。

那么我怎样才能实现我的目标呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:11:54.263

XSLT 1.0 样式表

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:key name="user" match="root/r" use="substring-after(substring-after(@user, '='), '=')"/>

<xsl:template match="root">
  <xsl:apply-templates select="r[generate-id() = generate-id(key('user', substring-after(substring-after(@user, '='), '='))[1])]">
    <xsl:sort select="sum(key('user', substring-after(substring-after(@user, '='), '='))/@time)" data-type="number"/>
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="root/r">
  <xsl:value-of select="concat('User: ', substring-after(substring-after(@user, '='), '='), ': ', sum(key('user', substring-after(substring-after(@user, '='), '='))/@time))"/>
  <xsl:if test="position() = 1">
    <xsl:text> (minimum)</xsl:text>
  </xsl:if>
  <xsl:if test="position() = last()">
    <xsl:text> (maximum)</xsl:text>
  </xsl:if>
  <xsl:text>&#10;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

使用 Muenchian 分组按用户分组，然后按每组`sum`中的`@time`值排序，输出排序后的值，表示最小值和最大值。

因此，对于您的样本，输出是

```
User: a0: 2 (minimum)
User: a3: 4
User: a2: 9
User: a5: 16
User: a7: 17 (maximum) 
```

# grails - Groovy 错误。怎么了？

> ID：13508885
> 
> 赞同：-2
> 
> 时间：2012-11-22T08:55:07.277
> 
> 标签：grails, groovy

怎么了？

```
Exception: javax.script.ScriptException:
   groovy.lang.GroovyRuntimeException: Failed to parse template script (your template may contain an error or be trying to use expressions not currently supported):
   startup failed: SimpleTemplateScript34.groovy: 66: unexpected token: } @ line 66, column 7.
      """); } ;
            ^ 1 error 
```

这是模板

```
<STYLE>
BODY, TABLE, TD, TH, P {
 font-family:Verdana,Helvetica,sans serif;
font-size:11px;
color:black;
}
h1 { color:black; }
h2 { color:black; }
h3 { color:black; }
TD.bg1 { color:white; background-color:#0000C0; font-size:120% }
TD.bg2 { color:white; background-color:#4040FF; font-size:110% }
TD.bg3 { color:white; background-color:#8080FF; }
TD.test_passed { color:blue; }
TD.test_failed { color:red; }
TD.console { font-family:Courier New; }

.news{text-align:center;padding-top:15px;}
.bottom-message{width:720px;cellpadding:5px;cellspacing:0px}
.bottom-message .message{font-size:13px;color:#aaa;line-height:18px;text-align:center}
.bottom-message .designed{font-size:13px;color:#aaa;line-height:18px;font-style:     italic;text-align:right}

</STYLE>
<BODY>
<div class="news">
    <P>
        Do you like new format of build information? <a href="mailto:xxxx@xxxxx.com">Give me feedback</a>
    </P>
    <br>
</div>
<TABLE>
  <TR><TD align="right"><IMG SRC="${rooturl}static/e59dfe28/images/32x32/<%= build.result.toString() == 'SUCCESS' ? "blue.gif" : build.result.toString() == 'FAILURE' ? 'red.gif' : 'yellow.gif' %>" />
  </TD><TD valign="center"><B style="font-size: 200%;">BUILD ${build.result}</B></TD>    </TR>
  <TR><TD>Build URL</TD><TD><A href="${rooturl}${build.url}">${rooturl}${build.url}    </A></TD></TR>
  <TR><TD>Project:</TD><TD>${project.name}</TD></TR>
  <TR><TD>Date of build:</TD><TD>${it.timestampString}</TD></TR>
  <TR><TD>Build duration:</TD><TD>${build.durationString}</TD></TR>
</TABLE>
<BR/>

    <!-- CHANGE SET -->
    <% def changeSet = build.changeSet
    if(changeSet != null) {
def hadChanges = false %>
    <TABLE width="100%">
    <TR><TD class="bg1" colspan="2"><B>CHANGES</B></TD></TR>
    <%  changeSet.each() { cs ->
        hadChanges = true %>        
      <TR>
            <TD colspan="2" class="bg2">${spc}Revision <B><%=         cs.metaClass.hasProperty('commitId') ? cs.commitId :     cs.metaClass.hasProperty('revision')     ? cs.revision : 
        cs.metaClass.hasProperty('changeNumber') ? cs.changeNumber : "" %></B> by
              <B><%= cs.author %>: </B>
              <B>(${cs.msgAnnotated})</B>
             </TD>
          </TR>

<%  } %>

    if(!hadChanges) { %>    
    <TR><TD colspan="2">No Changes</TD></TR>

  </TABLE>
<BR/>
<% } %>

<!-- ARTIFACTS -->
<% def artifacts = build.artifacts
if(artifacts != null && artifacts.size() > 0) { %>
  <TABLE width="100%">
<TR><TD class="bg1"><B>BUILD ATRIFACTS</B></TD></TR>
<TR>
  <TD>
<%      artifacts.each() { f -> %>      
          <li>
            <a href="${rooturl}${build.url}artifact/${f}">${f}</a>
          </li>
<%      } %>
      </TD>
        </TR>
  </TABLE>
    <BR/>  
    <% } %>    

        <!-- MAVEN ARTIFACTS -->
        <% 
        try {
      def mbuilds = build.moduleBuilds
      if(mbuilds != null) { %>
      <TABLE width="100%">
      <TR><TD class="bg1"><B>BUILD ATRIFACTS</B></TD></TR>
    <%    mbuild.each() { m -> %>     
            <TR><TD class="bg2"><B>${m.key.displayName}</B></TD></TR>
    <%      m.value.each() { mvnbld ->
            def artifactz = mvnbld.artifacts
            if(artifactz != null && artifactz.size() > 0) {     %>          
      <TR>
        <TD>
<%              artifactz.each() { f -> %>          
            <li>
              <a href="${rooturl}${mvnbld.url}artifact/${f}">${f}</a>
            </li>
<%              } %>        
        </TD>
      </TR>
<%          } 
        }
     } %>      
  </TABLE>
<BR/>
<% } 
} catch(e) {
    // we don't do anything
} %>

<!-- CONSOLE OUTPUT -->
<% if(build.result==hudson.model.Result.FAILURE) { %>
<TABLE width="100%" cellpadding="0" cellspacing="0">
<TR><TD class="bg1"><B>CONSOLE OUTPUT</B></TD></TR>
<%  build.getLog(100).each() { line -> %>
    <TR><TD class="console">${line}</TD></TR>
<%  } %>
</TABLE>
<BR/>
<% } %>

  <table class="bottom-message" align="center">
        <tr>
            <td>

            </td>        
            <td class="message">You are receiving this email because you
                are relavent with this build<br>
            <P>
                <a href="#">support team</a> | <a href="#">Jenkins server</a>
            </P>
        </td>
    </tr>
    <tr>
        <td colspan="2" class="designed">designed by XXXX&nbsp;</td>
    </tr>
</table>
<!-- bottom message -->

</BODY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:00:49.457

在这里不是要讽刺，但很明显，在第 66 行第 7 列有一个意想不到的标记 - } -。我敢肯定你只是有一个不平衡的花括号。

更重要的问题，你真的想用 Stackoverflow 来调试你的代码吗？

# forms - 无法在编辑 magento 表单中获取最后保存的值（文件/图像）

> ID：13508894
> 
> 赞同：0
> 
> 时间：2012-11-22T08:55:33.007
> 
> 标签：forms, magento, field

我正在开发一个 Magento 支持的模块，在我的图像表单中，我有这个字段来添加图像：

```
$fieldset->addField('imgsrc', 'image',
          array('label' => 'Upload Image',
                'class' => 'required-entry',                      
                'required' => true,
                'name' => 'imgsrc',
              )); 
```

当我添加新图像时，一切正常。但是当我尝试编辑我保存的一张图片时，这个字段没有任何价值（空）！我该如何解决？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:42:11.550

你真的在保存图像吗？例如，在你的控制器的 saveAction 中，你需要有类似的东西：

```
if (isset($_FILES['brand_logo']['name']) and (file_exists($_FILES['brand_logo']['tmp_name']))) {

            try {
                $uploader = new Varien_File_Uploader('brand_logo');
                $uploader->setAllowedExtensions(array('jpg', 'jpeg', 'gif', 'png')); // or pdf or anything
                $uploader->setAllowRenameFiles(false);

                $uploader->setFilesDispersion(false);
                $path = Mage::getBaseDir('media') . DS . 'brands' . DS;
                $uploader->save($path, $img_token . '_photo_' . $_FILES['brand_logo']['name']);

                $data['brand_logo'] = 'brands/' . $img_token . '_photo_' . $uploader->getCorrectFileName($_FILES['brand_logo']['name']) . '';
            } catch (Exception $e) {

            }
        } else {
            if (isset($data['brand_logo']['delete']) && $data['brand_logo']['delete'] == 1) {
                $data['brand_logo'] = '';
            } else {
                unset($data['brand_logo']);
            }
        } 
```

您需要将“brand_logo”更改为“imgsrc”，将“brands”更改为您也希望保存上传图像的文件夹位置。

# email - 流星电子邮件错误

> ID：13508895
> 
> 赞同：6
> 
> 时间：2012-11-22T08:55:36.870
> 
> 标签：email, meteor

我在使用 Metoer 发送电子邮件时遇到问题。我收到“未定义电子邮件”错误。我试过“流星添加电子邮件”，但没有帮助。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T09:02:56.610

你设置`MAIL_URL`环境变量了吗？

来自流星文档：

服务器从`MAIL_URL`环境变量中读取以确定如何发送邮件。目前 Meteor 支持通过 SMTP 发送邮件；环境变量的`MAIL_URL`格式应该是`smtp://USERNAME:PASSWORD@HOST:PORT`/。

对于使用meteor deploy 部署的应用程序，`MAIL_URL`默认使用一个帐户（由[Mailgun](http://www.mailgun.com/)提供），该帐户允许应用程序每天发送多达200 封电子邮件；`process.env.MAIL_URL`您可以通过在第一次调用 Email.send 之前指定 to 来覆盖此默认设置。

如果`MAIL_URL`未设置（例如，在本地运行应用程序时），`Email.send`则将消息输出到标准输出。

# wordpress - 如何通过wordpress中的wp-mvc插件进行ajax调用

> ID：13508896
> 
> 赞同：2
> 
> 时间：2012-11-22T08:55:40.243
> 
> 标签：wordpress

我正在开发带有帮助插件的`wpmvc`插件。我面临 Ajax 调用的问题。

我已经添加了`router.php`文件。

```
MvcRouter::admin_ajax_connect(array('controller' => 'tbl_projects', 'action' => 'show')); 
```

我`show()`在控制器文件和`show.php`视图文件夹中的文件中创建了操作。我在 js 文件中添加了 js 函数：

```
 url : ajaxurl,
        data : {
            action : 'tbl_projects_controller_show',
            postData : ''
        },
        dataType : "html",
        type : 'post', 
```

当 Ajax 调用时，我得到“0”响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T10:57:21.407

Check this URL so that it may help you:

[http://solislab.com/blog/5-tips-for-using-ajax-in-wordpress/](http://solislab.com/blog/5-tips-for-using-ajax-in-wordpress/)

I too am looking for the same thing as you do... If you arrive at a solution please do share it so that i too can solve the issue...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T13:38:12.117

以下应该可以帮助您继续前进： [http ://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T19:30:56.087

1.  在**your-plugin/app/config/router.php**文件中添加：

    ```
    MvcRouter::admin_ajax_connect(array('controller' => 'adminprojects', 'action' => 'ajaxshow')); 
    ```

2.  在**your-plugin/controllers/admin/admin_projects_controller.php** 文件中添加：

    ```
    class AdminProjectsController extends MvcAdminController {
        public function ajaxshow() {
            // also can use $_POST['content']
            echo 'GOT IT:' . $this->params['content'];
            die();
        }
    } 
    ```

    **注意：**控制器类名和控制器变量传入**admin_ajax_connect**函数。

3.  现在你可以使用这样的代码：

    ```
    jQuery(document).ready(function() {

        // Data to send to the AJAX call
        var data = {
            action: 'adminprojects_ajaxshow',
            content: 'Run from myplugin ajax'
        };

        // ajaxurl is defined by WordPress
        jQuery.post(ajaxurl, data, function (response) {
            // Handle the response
            console.log(response);
        });
    }); 
    ```

# xml - 使用 Linq to XML 访问 XML 中的二级节点

> ID：13508903
> 
> 赞同：0
> 
> 时间：2012-11-22T08:56:29.273
> 
> 标签：xml, linq-to-xml, xmlnode

我有以下 XML 文件：

```
<tree>
    <branchs>
         <branch id=1>
             <apple id=1 color=green/>
             <apple id=2 color=red/>
         </branch>
         <branch id=2>
             <apple id=1 color=green/>
             <apple id=2 color=red/>
         </branch>
    </branchs>
</tree> 
```

我希望 SQL 命令从分支 id 1 访问苹果 id#1，而不是更改颜色（第一次），然后能够从这个分支中删除这个苹果。

我尝试了以下方法来删除一个苹果，但没有任何结果

```
XDocument doc = XDocument.Load(myxmlFile);
var result = (from selectedApples in 
                (from selectedBranch in doc.Element("Branchs").Elements("Branch) 
                where selectedBranch.Attribute("id").Value == 1 
                select selectedBranch)
                where selectedApples.Attribute("id").Value == 1
                select selectedApples).ToList();

 result.ToList().ForEach(apple => apple.Remove()); 
```

我想我犯了一个错误......我想我也离解决方案不远了......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:42:58.597

好吧，不确定它是否是优化的解决方案......但它正在工作。

```
XDocument doc = XDocument.Load(myxmlFile);
var results = from selectedApples in doc.Root.Element("branchs").Descendants()
                where selectedApples.Attribute("id").Value == 1
                select selectedApples.Elements("apple");

foreach(var result in results)
    result.Where(a => a.Attribute("id").Value == 1).ToList().Foreach(a => a.Remove());

doce.Save(myxmlFile); 
```

# android - 如何在 android 中的按钮单击事件的当前选项卡中启动新的活动

> ID：13508905
> 
> 赞同：0
> 
> 时间：2012-11-22T08:56:43.037
> 
> 标签：android, tabs, android-activity, android-tabhost

我有 MainActvity 类，其中包含一个 Tab（指标为 Tab）

这是我的代码：-

```
public class MainActivity extends TabActivity {
TabHost tabHost;
Context context = MainActivity.this;
TabSpec spec;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TabHost tabHost = getTabHost();

    tabHost.addTab(tabHost
            .newTabSpec("Tab")
            .setIndicator("Tab")
            .setContent(
                    new Intent(this, MyActivityGroup.class)
                            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

    tabHost.setCurrentTab(0);

}

} 
```

这在内部调用 MyActvityGroup，它将 ActvityGroup 类扩展为。

```
public class MyActivityGroup extends ActivityGroup {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // you van get the local activitymanager to start the new activity

    View view = getLocalActivityManager().startActivity(
            "ReferenceName",
            new Intent(this, NewActivity.class)
                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
            .getDecorView();
    this.setContentView(view);

}
} 
```

在 NewActvity,java 文件中我做了类似的事情

```
public class NewActivity extends Activity {

Button btnGo;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.new_activity);

    btnGo = (Button) findViewById(R.id.btnStartActivity);
    btnGo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Toast.makeText(NewActivity.this, "Clicked", Toast.LENGTH_SHORT)
                    .show();

            Intent intent = new Intent();
            intent.setClass(getParent(), ButtonActivity.class);
            startActivity(intent);

        }
    });

}
} 
```

*   现在这里这个活动包含一个按钮。
*   我想在此按钮的单击事件的同一选项卡区域中启动新活动，但它以全屏模式启动。我再也看不到我的标签了。
*   如何在当前选项卡容器中启动活动。
*   我的 ActvityGroup 课程有问题，或者我没有以正确的方式开始活动..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:10:13.647

使用下面的代码而不是您的代码，它将解决您的问题。

MyActivityGroup.java

```
public class MyActivityGroup extends ActivityGroup {

    private Stack<String> stack;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (stack == null) {
            stack = new Stack<String>();
        }

        push("HomeStackActivity", new Intent(this, NewActivity.class));
    }

    @Override
    public void finishFromChild(Activity child) {
        pop();
    }

    @Override
    public void onBackPressed() {
        pop();
    }

    public void push(String id, Intent intent) {
        Window window = getLocalActivityManager().startActivity(id,
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        if (window != null) {
            stack.push(id);
            setContentView(window.getDecorView());
        }
    }

    public void pop() {
        if (stack.size() == 1) {
            finish();
        }
        LocalActivityManager manager = getLocalActivityManager();
        manager.destroyActivity(stack.pop(), true);
        if (stack.size() > 0) {
            Intent lastIntent = manager.getActivity(stack.peek()).getIntent()
                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            Window newWindow = manager.startActivity(stack.peek(), lastIntent);
            setContentView(newWindow.getDecorView());
        }
    }
} 
```

新活动.java

```
public class NewActivity extends Activity {

    Button btnGo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.new_activity);

        btnGo = (Button) findViewById(R.id.btnStartActivity);
        btnGo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Toast.makeText(NewActivity.this, "Clicked", Toast.LENGTH_SHORT).show();

                Intent intent = new Intent();
                intent.setClass(getParent(), ButtonActivity.class);
                MyActivityGroup activityStack = (MyActivityGroup) getParent();
                activityStack.push("Button Activity", intent);                    
            }
        });
    }
} 
```

请参阅下面的链接了解更多信息。

[TabActivity 中的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:09:59.587

```
private Stack<String> stack;

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  if (stack == null)
   stack = new Stack<String>();
  // start default activity
  push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
 }

 @Override
 public void finishFromChild(Activity child) {
  pop();
 }

 @Override
 public void onBackPressed() {
  pop();
 }

 public void push(String id, Intent intent) {
  Window window = getLocalActivityManager().startActivity(id,
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
  if (window != null) {
   stack.push(id);
   setContentView(window.getDecorView());
  }
 }

 public void pop() {
  if (stack.size() == 1)
   finish();
  LocalActivityManager manager = getLocalActivityManager();
  manager.destroyActivity(stack.pop(), true);
  if (stack.size() > 0) {
   Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
   Window newWindow = manager.startActivity(stack.peek(), lastIntent);
   setContentView(newWindow.getDecorView());
  }
 }
}

TabActivity.java

public class TabActivity extends TabActivity {
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.tab_screen);
  TabHost tabHost = getTabHost();
  Intent intent = new Intent().setClass(this, ActivityStack.class);
  TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp",
    getResources().getDrawable(R.drawable.home));
  spec.setContent(intent);

  tabHost.addTab(spec);

  Intent intent1 = new Intent().setClass(this, ActivityStack.class);
  TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp",
    getResources().getDrawable(R.drawable.invoice));
  spec1.setContent(intent1);
  tabHost.addTab(spec1);

  tabHost.setCurrentTab(0);
 }
}

FirstActivity.java

public class FirstActivity extends Activity {
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  TextView textView = new TextView(this);
  textView.setText("Tab Sample Activity ");
  textView.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View v) {
    Intent intent = new Intent();
    intent.setClass(getParent(), SecondActivity.class);
    ActivityStack activityStack = (ActivityStack) getParent();
    activityStack.push("SecondActivity", intent);

   }
  });
  setContentView(textView);
 }
}

SecondActivity.java

public class SecondActivity extends Activity {
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  TextView textView = new TextView(this);
  textView.setText("First Stack Activity ");
  textView.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View v) {
    Intent intent = new Intent();
    intent.setClass(getParent(), ThirdActivity.class);
    ActivityStack activityStack = (ActivityStack) getParent();
    activityStack.push("ThirdActivity", intent);

   }
  });
  setContentView(textView);
 }
}

ThirdActivity.java
public class ThirdActivity extends Activity {
 @Override
 protected void onCreate(Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
 }
}

Add Below XML files into your res/layout folder.

1) tab_screen.xml
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost>

2) main.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout>

AndroidManifest.xml:-
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:03:59.010

ActivityGroup 类已被弃用，它会导致性能不佳。最好使用 Fragments 来实现相同的目标。请参考以下[链接](http://developer.android.com/reference/android/app/TabActivity.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T09:06:25.240

使用片段而不是活动。在 TabHost 中使用一些 FragmentActivity，然后按按钮替换片段。

# c# - 实体框架：无法转换类型错误

> ID：13508906
> 
> 赞同：0
> 
> 时间：2012-11-22T08:56:49.437
> 
> 标签：c#, entity-framework, visual-studio-2012

使用 EntityFramework，我创建了一个包含 (SELECT) 存储过程的实体模型。我添加了函数导入以使 SP 映射到复杂类型。这适用于返回多条记录的查询。

但是，对于只返回一条记录的查询，我目前收到此错误：

```
Cannot convert type 'System.Data.Objects.ObjectResult<DAL.FullResponse>' to 'DAL.FullResponse' 
```

我不知道多重性是问题所在，但除了问题查询将行标识符作为参数这一事实之外，它并没有强制执行单行结果（事实上，当我运行导入函数向导时）说我会返回一个复杂类型的*集合*。

我也不知道这是否相关，但我在处理这个项目时已经在 EntityFramework 的版本之间切换。在尝试使用 EF5 导致问题后，我切换到 EF4 （直到现在）没有问题。

相关代码：aspx

```
<asp:DetailsView ID="DetailsView1" DataKeyNames="ResponseID" runat="server" 
     AutoGenerateRows="True" Height="250px" Width="350px" BorderWidth="1px" 
     BorderStyle="Dashed" BorderColor="YellowGreen" CellPadding="0" CellSpacing="7" 
     GridLines="None" /> 
```

CS

```
protected void ShowData()
{    
  int respID = Convert.ToInt32(Request.QueryString.Get(0));
  System.Diagnostics.Debug.Print("looking for ID: {0}", respID);

  var responseDetailed = context.GetFullResponse(respID);
  // get the data
  DetailsView1.DataSource = (FullResponse)responseDetailed;
} 
```

从 Page_Load 调用 ShowData

有人可以指出我解决这个问题的方法吗？我已经坚持了将近一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:10:00.510

试试这个：

```
var responseDetailed = context.GetFullResponse(respID);
  // get the data
  DetailsView1.DataSource = (IEnumerable<FullResponse>)responseDetailed; 
```

# c# - 将文本框值除以数字c#

> ID：13508908
> 
> 赞同：0
> 
> 时间：2012-11-22T08:57:04.803
> 
> 标签：c#, c#-4.0

我正在尝试以下代码，但结果为零！

```
textBox13.Text = (int.Parse(textbox1.Text) / 536).ToString (); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:58:37.617

我相信您期望结果集`0.0...`是双 / 浮点数。您可以除以 536.0 或 536d

```
textBox13.Text = (int.Parse(textbox1.Text) / 536d).ToString ();//or 536.0 
```

目前您的计算是以整数类型进行的。您可以将两个操作数中的任何一个转换为双精度/浮点数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T08:58:07.347

那是因为你做整数除法。

尝试

```
textBox13.Text = (double.Parse(textbox1.Text) / 536).ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:16:23.423

已经回答了我建议使用`TryParse`

```
double d = 0;
if(double.TryParse(textbox1.Text,out d))
{
    textBox13.Text = (d/536.0).ToString();
}
else
{
   MessageBox.Show("There is no valid number in the textbox");
} 
```

# java - Junit 测试用例的依赖移除

> ID：13508910
> 
> 赞同：0
> 
> 时间：2012-11-22T08:57:05.720
> 
> 标签：java

```
Matcher m = Pattern.compile("(" + genusNames + ")[^\\p{L}][^\uFF00]").matcher(inputText);
        while(m.find()){
            if(!StateMachine.checkFormatRoman(m.group(1).length(), m.start()))
                createDecision(m.group(1), "&lt;Roman&gt;" + m.group(1) + "&lt;/Roman&gt;", m.start());
    } 
```

在上面的代码中 checkFormatRoman 方法来自另一个类。我应该怎么做才能消除这个方法的依赖，注意提供给这个方法的值是动态获得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:26:12.600

我认为你应该模拟你的静态方法`StateMachine.checkFormatRoman`。您可以使用[powermock](http://code.google.com/p/powermock/)执行此操作。

您可以返回所需的值。

就像是..

```
PowerMockito.mockStatic(StateMachine.class);
PowerMockito.when(StateMachine.checkFormatRoman(5, "IIIIL")).thenReturn(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:03:05.630

我假设`StateMachine.checkFormatRoman`是`static`. 您可以按如下方式重新设计：

```
class StateMachine {
    static class Implementation implements ImplementationInterface {
        ...
    }

    ImplementationInterface impl;

    public StateMachine () {
        impl = new Implementation ();
    }

    public StateMachine (ImplementationInterface alternative) {
        impl = alternative;
    }

    public ... checkFormatRoman (...) {
        return impl.checkFormatRoman (...);
    }
} 
```

现在，出于测试目的，您可以通过使用`machine = new StateMachine (dummyImplementation);`.

替代方法：

重新设计您正在测试的类，以便您可以指定要调用的函数`checkFormatRoman`：

```
class MyClass { // the class you are testing
    public interface Helpers {
        ... checkFormatRoman ...
    }

    static class HelpersDefault implements Helpers {
        ... checkFormatRoman ... {
            return StateMachine.checkFormatRoman (...);
        }
    }

    Helpers helpers = new HelpersDefault ();

    public void setHelpers (Helpers alternativeHelpers) {
        helpers = alternativeHelpers;
    }

    ... // your methods, calling, e.g., helpers.checkFormatRoman instead of
    // StateMachine.checkFormatRoman
}

// testing
...
objToTest = new MyClass ();
objToTest.setHelpers ( new MyClass.Helpers {
   // ... test dummy implementation of checkFormatRoman goes here
}); 
```

`StateMachine`或者通过定义一个接口并在构造时传递一个状态机参数来完全删除你的类对 StateMachine 的依赖。

# android - 关于意图和 putExtra()

> ID：13508911
> 
> 赞同：-3
> 
> 时间：2012-11-22T08:57:11.757
> 
> 标签：android, android-intent

我对这段代码有一些疑问。

```
public class MainActivity extends Activity { 
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE"; 
    Intent intent = new Intent(this, DisplayMessageActivity.class); 
    EditText editText = (EditText) findViewById(R.id.edit_message); 
    String message = editText.getText().toString(); 
    intent.putExtra(EXTRA_MESSAGE, message); 
```

1.  为什么我们在 EditText 中使用强制转换
2.  什么是 putExtra(EXTRA_MESSAGE,message) 及其用途？
3.  为什么将 MY_MESSAGE 分配给 com.example.myfirstapp.MESSAGE？什么是 com.example.myfirstapp.MESSAGE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:02:02.907

1）因为`findViewById()`是返回视图的通用方法

2）意图是一种灵活的解耦通信方式，它就像您发送的消息（指定所需的操作和可选的额外数据）。`putExtra()`是一种允许您将信息嵌入到您的意图中的方法

3) Intent 的额外数据是基于键值存储的。EXTRA_MESSAGE 是存储消息的键。您的意图的接收者知道它可以从该密钥中检索您的消息。

4）“com.example.myfirstapp.MESSAGE”是这个键的实际值。这是一个任意值，必须由意图的发送者及其接收者知道，以便他们通过意图进行通信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:04:07.060

意图附加项用于将数据参数传递给其他活动，因此，如果您想启动一个新活动并且您想将一个字符串传递给新活动，您应该在您的意图中添加额外的字符串，如您的示例：EXTRA_MESSAGE 是关键和消息 si 消息

向意图添加扩展数据。该名称必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称。

参数 name 额外数据的名称，带有包前缀。value 字符串数据值。

Returns 返回相同的 Intent 对象，用于将多个调用链接到单个语句中。

# php - 在数据库中写入失败：CakePhp Tuto

> ID：13508917
> 
> 赞同：2
> 
> 时间：2012-11-22T08:57:25.250
> 
> 标签：php, database, cakephp

我正在学习 CakePHP，我遵循这个教程：http: [//book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)

我正在使用 CakePHP 2.2.3。

好吧，我到了必须添加组和用户的地方。但是，我的数据库中没有我的组的名称......

你能帮助我吗？

组控制器：

```
 <?php
    class GroupesController extends AppController{

    function add(){
    if (!empty($this->data)) {
            if ($this->Groupe->save($this->data)) {
                $this->flash('Votre groupe a été sauvegardé.','/groupes');
            }
        }
    }
    function beforeFilter(){
        parent::beforeFilter();
        $this->Auth->allow('*');
    }
  }
    ?> 
```

模型：

```
<?php
class Groupe extends AppModel{
    public $actsAs=array('Acl'=>array('type'=>'requester'));
    var $validate = array(
    'nom' => array(
    'rule' => array('minLength', 1)
    )
    );
    public function parentNode(){
        return null;
    }
}
?> 
```

看法：

```
<h1>Ajouter un groupe</h1>
    <?php
        echo $this->Form->create('groupes');
        echo $this->Form->input('nom');
        echo $this->Form->end('Sauvegarder le groupe');
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:41:17.737

我认为您没有获得数据，因为您视图中的表单未正确创建。它应该是模型的名称：

```
echo $this->Form->create('Groupe'); 
```

要查看哪些数据发布到您的`add`操作，您还可以使用以下`debug()`功能：

```
function add(){
    debug($this->data);
    ...
} 
```

或蛋糕 2

```
function add(){
    debug($this->request->data);
    ...
} 
```

您还可以`else`在调用后添加一个`save()`来调试任何验证错误：

```
if ($this->Groupe->save($this->data)) {
  $this->flash('Votre groupe a été sauvegardé.','/groupes');
}
else{
    debug($this->Groupe->validationErrors);
} 
```

# rename - Stata：重命名所有不以 x 开头的变量

> ID：13508918
> 
> 赞同：0
> 
> 时间：2012-11-22T08:57:29.477
> 
> 标签：rename, stata

我想为所有不以 x 开头的变量添加前缀或后缀：

```
clear
input xa xb c d
1 1 1 1
end 
```

我想是这样的：`rename (!x)* y*`应该给出这样的结果：`xa xb yc yd`。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:04:27.610

可以避免`foreach`循环

```
. rename (`r(varlist)') (y=)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:22:29.790

这在我看来并不理想，但在我的脑海中，也许类似的东西`renpfix`可能对你有用：

```
. clear
. input xa xb c d
            xa         xb          c          d
  1\. 1 1 1 1
  2\. end
. list

     +-----------------+
     | xa   xb   c   d |
     |-----------------|
  1\. |  1    1   1   1 |
     +-----------------+

. renpfix "" y
. renpfix yx x
. list

     +-------------------+
     | xa   xb   yc   yd |
     |-------------------|
  1\. |  1    1    1    1 |
     +-------------------+ 
```

在这里，我首先为所有变量添加了前缀，因此前两个变量的前缀为`yx`; 然后我替换了`yx`前缀以返回`x`前两个变量。

### 更新

另一种选择是使用`ds`or `findname`(install using `search findname`) 并使用`not`参数来否定匹配的变量

```
. clear
. input xa xb c d
            xa         xb          c          d
  1\. 1 1 1 1
  2\. end
. list

     +-----------------+
     | xa   xb   c   d |
     |-----------------|
  1\. |  1    1   1   1 |
     +-----------------+

. ds x*, not
c  d

. foreach v in `r(varlist)' {
  2\. rename `v' y`v'
  3\. }
. list

     +-------------------+
     | xa   xb   yc   yd |
     |-------------------|
  1\. |  1    1    1    1 |
     +-------------------+ 
```

`ds`并将`findname`其结果存储在 中``r(varlist)'`，以便您`foreach`在识别相关变量后使用。

# android - 在 Android 2.3 中解析 NMEA 数据

> ID：13508921
> 
> 赞同：4
> 
> 时间：2012-11-22T08:57:37.143
> 
> 标签：android, bluetooth, gps, android-2.3-gingerbread, nmea

我正在尝试从连接到我的 Android 2.3 平板电脑的蓝牙 gps 设备获取数据。目前，我可以使用 Android 蓝牙堆栈将其配对并从已创建的串行设备中读取。现在我有很多来自 gps 的 NMEA 数据...我尝试集成一小段 Java 代码来解析这些字符串，但我想知道 Android 框架中是否已经有类似的东西可用. 我只需要知道纬度/经度和指南针方向。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:26:05.693

不确定是否存在任何内容，无论如何，如果您只需要解析 RMC 句子的位置，请参阅[http://www.gpsinformation.org/dale/nmea.htm#RMC](http://www.gpsinformation.org/dale/nmea.htm#RMC)

一个简单的 Java 代码示例：

```
final String sentence = "$GPRMC,123519,A,4807.038,N,01131.000,E,022.4,084.4,230394,003.1,W*6A";
if (sentence.startsWith("$GPRMC")) {
    String[] strValues = sentence.split(",");
    double latitude = Double.parseDouble(strValues[3])*.01;
    if (strValues[4].charAt(0) == 'S') {
        latitude = -latitude;
    }
    double longitude = Double.parseDouble(strValues[5])*.01;
    if (strValues[6].charAt(0) == 'W') {
        longitude = -longitude;
    }
    double course = Double.parseDouble(strValues[8]);
    System.out.println("latitude="+latitude+" ; longitude="+longitude+" ; course = "+course);
} 
```

相关问题：[Parsing GPS receiver output via regex in Python](https://stackoverflow.com/questions/311763/parsing-gps-receiver-output-via-regex-in-python)

# actionscript-3 - 剪切声音动作脚本 3

> ID：13508925
> 
> 赞同：1
> 
> 时间：2012-11-22T08:57:46.643
> 
> 标签：actionscript-3, flash

我正在尝试制作一个应用程序来使用 flash actionscript 3 从文件（mp3）中剪切声音，假设我有 2 分钟长度的 music.mp3，我想将其保存为新文件（带有保存对话框） ，但长度不同，（例如，仅从秒 30 到 60）。

那可能吗？如果是，如何？

到目前为止，这是我的代码：

```
var s:Sound = new MySound() as Sound;
var ba:ByteArray = new ByteArray();
/*
s.extract maybe? then?
*/ 
```

谢谢你

# javascript - 剑道网格批量编辑

> ID：13508926
> 
> 赞同：1
> 
> 时间：2012-11-22T08:57:57.367
> 
> 标签：javascript, jquery, asp.net-mvc-3, kendo-ui

我可以在 Kendo 网格中选择多行并将其列值编辑为某个常用值吗？那么我可以根据一列的一些常见值选择 5 行并一键更新其值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:52:00.887

这不支持作为内置功能，但可以使用 API 实现。

这是一个简短的例子：http: [//jsbin.com/alocoj/1/edit](http://jsbin.com/alocoj/1/edit)

# php - 在 MySQL 数据库中搜索多个列的特定语法？

> ID：13508931
> 
> 赞同：0
> 
> 时间：2012-11-22T08:58:10.390
> 
> 标签：php, mysql, search

我正在创建一个包含所有学生和相关信息的可搜索数据库（用于涉及管理 iPad 部署的大型项目）。数据库有 7 列：

*   名
*   姓
*   身份证号码
*   年级
*   毕业年份
*   学生邮箱
*   出生日期

如果输入与行中的任何值匹配，我需要做的是返回整行。

我正在使用的 PHP 是：

```
<?php 
$conn = mysql_connect ("localhost", "blmrvftl_ipdb", "ipad-db") or die ('I cannot connect to the database because: ' . mysql_error()); 
$selected = mysql_select_db ("blmrvftl_ipdb") 
or die ("Could not select database because: " . mysql_error()); 

// PHP Search Script 

$sql = "select * from phonebook, where first_name = '".$_GET['seek']."' or last_name = '". $_GET['seek'] ."' or id_number = '". $_GET['seek'] ."'";
//$sql = "select * from student_database, where first_name = '".$_GET['seek']."' or last_name = '". $_GET['seek'] ."' or id_number = '". $_GET['seek'] ."' or grade = '". $_GET['seek'] ."' or grad_year = '". $_GET['seek'] ."' or student_email = '". $_GET['seek'] ."' or dob = '". $_GET['seek'] ."'"; 
// $sql = "select * from student_database, where first_name = '".$_POST['seek']."' or last_name = '". $_POST['seek'] ."' or id_number = '". $_POST['seek'] ."' or grade = '". $_POST['seek'] ."' or grad_year = '". $_POST['seek'] ."' or student_email = '". $_POST['seek'] ."' or dob = '". $_POST['seek'] ."'";
$result = mysql_query($sql,$conn)or die (mysql_error()); 

if (mysql_num_rows($result)==0){ 
echo "No Match Found"; 
}else{ 
while ($row = mysql_fetch_array($result)){ 
echo "Name: " .$row['first_name']." ".$row["last_name"]."<br>"; 
echo "Student ID: ".$row['id_number']."<br>"; 
// echo "Department: ".$row['department_name']."<br>"; 
// echo "Directorate: ".$row['directorate_name']."<br>"; 
//echo "Site: ".$row['site_name']."<br>"; 
//echo "Phone #: ".$row['pb_tel_ext']."<br>"; 
//echo "Email Address: ".$row['pb_email_address']."<br>"; 
echo "<br>"; 
echo "---------------------------------------------------------------------"."<br>"; 
} 
} 

mysql_close(); 
?> 
```

我遇到的问题是我无法完全正确地获取格式来搜索所有列。（未注释的 $sql 行是我从网站抢夺这段代码的原始版本的修改版本。）我得到的错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'where first_name = 'Elliott' or last_name = 'Elliott' or id_number = 'Elliott'' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:12:00.593

我知道，当您开始开发时，您不希望事情变得过于复杂，并且您最不关心的是安全性。

但请始终牢记

*   Facebook 一开始是从一个容易被黑客入侵的学生数据库中窃取的图片，就像你的一样（有趣的事实）

*   **永远不要**从未经过滤的用户输入构建 SQL 脚本

*   不再使用 mysql_* 适配器，它处于弃用过程中。

请改用 mysqli 或 pdo_mysql。对于初学者来说，准备好的语句是输入转义的最佳选择。

[http://www.php.net/manual/de/book.mysqli.php](http://www.php.net/manual/de/book.mysqli.php)

[http://www.php.net/manual/de/ref.pdo-mysql.php](http://www.php.net/manual/de/ref.pdo-mysql.php)

现在关于您的问题，基本 SELECT 语句的 SQL 语法是

```
SELECT
     fields
FROM
     table
WHERE
     field1 = 'filter1'
     AND
     field2 = 'filter2' 
```

表格后没有逗号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:00:31.250

你有一个流氓逗号：

```
select * from phonebook, where 
```

应该

```
select * from phonebook where 
```

除此之外，应该工作 - 乍一看它看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:04:54.747

删除您的查询并粘贴此查询

```
$sql = "select * from phonebook
        where first_name = '".$_GET['seek']."' 
        or last_name = '". $_GET['seek'] ."' 
        or id_number = '". $_GET['seek'] ."'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T10:02:01.750

```
 <?php
  $submit=$_GET['submit'];

  $q1= "SELECT * FROM rent_page WHERE (local LIKE '%$submit%')";
  $r1 = mysql_query($q1);
  $num=mysql_num_rows($r1);
  if($num>0){     

  while($row=mysql_fetch_array($r1)){

  //$row=mysql_fetch_array($r);

  $_SESSION['nid']=$row['nid'];

    ?>

       <div class="prod_box" >
    <div class="top_prod_box" style="float:right; width:100%;"></div>
    <div class="center_prod_box" style="float:right; width:100%;">
      <div class="product_title" style="padding-top:20px; padding-bottom:2px;"><a href style="text-decoration:none; "="index.php"><b style="font-size:16px; color:red; "><?php echo $row['select_city']; ?></b></a></div>

      <div class="product_img" style="padding-top:2px; padding-bottom:2px;>
      <a href="index.php?nid=<?php echo $row['nid']; ?>" >

      <img width="90%" height="150px" src="uploads/<?php echo $row['image']; ?>" alt="" border="0" />

      </a>
      </div>
      <div class="product_title" style="padding-top:1px; padding-bottom:1px;> <span class="price">Location:<?php echo $row['local']; ?></span></div>
      <div class="prod_price" style="padding-top:1px; padding-bottom:1px;>  <span class="price">Minimum Price: <?php echo $row['minimum']; ?></span></div>
    </div>
    <div class="bottom_prod_box" style="padding-top:1px; padding-bottom:1px;><span class="price">Maximum Price: <?php echo $row['maximum']; ?></span></div>
    <div class="prod_details_tab" style="padding-top:1px; padding-bottom:1px;><span class="price">Building Floor: <?php echo $row['name_of_floor']; ?></span></div>
  <div class="prod_details_tab" style="padding-top:1px; padding-bottom:1px;><span class="price">Posted By. <?php echo $row['opt']; ?></span></div>

  </div>

      <?php

    }
    }else{

        echo "Sorry invalid product";}

  ?> 
```

# android - 如何从另一个活动更新数据库？

> ID：13508933
> 
> 赞同：2
> 
> 时间：2012-11-22T08:58:16.053
> 
> 标签：android, database, sqlite, android-activity, sql-update

我几乎是一个新手，我想从另一个活动中更新数据库。这意味着我有第一个活动，我正在编写 DataBaseHandler（公共类 MyDatabaseHandler 扩展 SQLiteOpenHelper）。

然后，在第二个活动中，我添加了一些数据：

```
MyDatabaseHandler db = new MyDatabaseHandler(this);
Contact peter = new Contact(1,"Peter", 27);
db.addContact(peter); 
```

现在我想将彼得的年龄从 27 岁更改为 28 岁，我想从另一个活动中做到这一点。所以，我正在写第三个活动：

```
MyDatabaseHandler db = new MyDatabaseHandler(this);
Contact peter = new Contact(1,"Peter", 28);
db.updateContact(peter); 
```

但它不起作用。我想如果我提供相同的 KEY_ID，在这种情况下为 1，我可以从任何地方更改条目。但似乎我错了。有人可以向我解释什么是正确的方法吗？

谢谢！

PS如果我从同一个活动进行更新，它工作得很好，但如果我从另一个活动进行更新：（

这是我的更新方法：

```
 public int updateContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_PH_NO, contact.getAge());

    return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:07:51.173

使用此代码

对不起，我的英语不好..所以请忽略它。

```
**DBAadapter db = new DBAadapter(this);
        db.open();
        thou = db.getAllFamilyMembers();

        Log.v("log"," thoughts " + thou); 
        db.close();** 
```

在这个 DBAadapter 中是哪个类当你的数据库打开关闭方法。

getAllFamilyMembers() 是 DBAadapter 类方法。

然后您使用上述代码在其他活动中获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:53:34.973

你必须做这样的课程：

```
public class Database extends SQLiteOpenHelper  {

    private static final String DATABASE_NAME = "database.db";

    private static final String TABLE_NAME = "Contacts";

    private static final int DATABASE_VERSION = 1;

    private SQLiteDatabase myDb;

    public DatabaseInterventi(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        if(myDb == null || !isMyDbOpen())
            myDb = getWritableDatabase();
    }

    @Override
    public void onCreate(SQLiteDatabase db) { 

        Log.i("DatabaseHelper", "onCreate!");

        // Check if table already exists
        if(!isTableExists(TABLE_NAME)){

        Log.i("DatabaseHelper", "Create Table in DB");

        String sql = "CREATE TABLE {0} ({1} INTEGER PRIMARY KEY AUTOINCREMENT," + 
        " {2} TEXT NOT NULL,{3} TEXT NOT NULL, {4} INTEGER NOT NULL);";

        db.execSQL(MessageFormat.format(sql, InfoDBIntervento.TABLE_NAME, "id","Name","Surname","Tel"));

    }
    public void insertContact(String name, String surname, int tel){

        if(!myDb.isOpen())
            openDB();

        ContentValues cv = new ContentValues();
        cv.put("Name", name);
        cv.put("Surname", surname);
        cv.put("Tel", tel);

        myDb.insert(TABLE_NAME, null, cv);

        myDb.close();
    }
    public void updateContact(String name, String surname, int tel){

        if(!myDb.isOpen)
            openDB();

        ContentValues cv = new ContentValues();

        if(name != null)
            cv.put("Name", name);

        if(surname != null)
            cv.put("Surname", surname);

        if(tel != null)
            cv.put("Tel", tel);

        myDb.update(TABLE_NAME, cv, null, null);

        myDb.close();
    }

    public boolean isTableExists(String tableName) {

        if(!myDb.isOpen())
                openDB();

        Cursor cursor = myDb.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+tableName+"'", null);
        if(cursor!=null) {
            if(cursor.getCount()>0) {
                cursor.close();
                return true;
            }
        }
        cursor.close();
        return false;
    }

    public void openDB(){

        myDb = getWritableDatabase();
    }
} 
```

然后，您必须分离您的 Database 类并调用它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:22:20.233

您可以尝试通过更改 SQLiteDatabase db = this.getWritableDatabase(); 来解决问题 到 SQLiteDatabase db = sqLiteHelper.getWritableDatabase();

一个很好的例子可以在这里找到：[http ://android-er.blogspot.ro/2011/06/edit-row-in-sqlite-database-using.html](http://android-er.blogspot.ro/2011/06/edit-row-in-sqlite-database-using.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:02:21.287

您必须定义一个独立类来与 db 交互，而不是在活动中包含代码。更好的是你必须使用 ContentProvider。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T09:17:04.077

您在扩展 SQLiteOpenHelper 时遇到了麻烦。如文档所述，它用于管理创建和更新（更新已发布的应用程序时）。请稍后为自己省去很多麻烦，并查看*SQLitedatebase 和更具体的 SQLiteClosable。*

**http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html**

更直接答案的相关代码在您的助手类中。但是...救自己:-)

# actionscript-3 - 将外部 SWF 加载到 SWF 中并连续播放

> ID：13508934
> 
> 赞同：0
> 
> 时间：2012-11-22T08:58:19.687
> 
> 标签：actionscript-3, flash

我正在尝试将几个外部 SWF 加载到一个主 SWF 中并连续播放它们，加载没有问题，但我不知道如何检测 SWF 是否已播放然后卸载它并加载新的。这听起来有点牵强，我将详细解释：我有 10 个 .swf 文件，它们非常小，但它们都有不同的持续时间。我想连续播放它们，随机排序。所以我需要一个父 .swf 文件来加载文件并播放它们。我的问题是我不知道如何在主 .swf 文件中获取加载的 .swf 的播放状态。

我想我需要注册一些事件监听器，但我不知道是哪一个，因为我对 AS 和 Flash 完全陌生。

任何帮助表示赞赏。提前致谢。

这可能是重复的，因为它是一个非常基本的问题，但我没有通过搜索找到任何东西......但我是 Flash 新手，所以我可能搜索了错误的术语。

问候尼尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:09:58.060

如果 swf 只是静态动画（不包含任何跳帧代码）并且只是从头到尾播放，您可以访问加载的 swf 的当前帧和总帧属性，并通过检查查看它们是否播放完毕如果值匹配。快速检查显示您可能需要使用 Loader 对象内的“contentLoaderInfo”对象来访问加载的 swf 的属性。

或者也许可以修改加载的 swf 以在它们完成播放时抛出一个完整的事件，您可以在主 swf 中捕获？

但是，如果您加载的 swf 不是 AS3，那么您将需要使用 LocalConnection 对象在它们之间进行通信，可能查询/传递当前帧和 swf 的总帧数。

# php - 获取 UTF-8 字符串的第一个字符

> ID：13508937
> 
> 赞同：19
> 
> 时间：2012-11-22T08:58:28.697
> 
> 标签：php, yii

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-22T08:59:48.423

```
$first_char = mb_substr($title, 0, 1); 
```

You need to use PHP's multibyte string functions to properly handle Unicode strings:

[http://www.php.net/manual/en/ref.mbstring.php](http://www.php.net/manual/en/ref.mbstring.php)

[http://www.php.net/manual/en/function.mb-substr.php](http://www.php.net/manual/en/function.mb-substr.php)

You'll also need to specify the character encoding in the `<head>` of your HTML:

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

or:

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-16" /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-22T09:07:37.023

There are several things you need to consider:

1.  Check that data in the DB is being stored as UTF-8
2.  Check that the client connection to the DB is in UTF-8 (for example, in mysql see: [http://www.php.net/manual/en/mysqli.character-set-name.php](http://www.php.net/manual/en/mysqli.character-set-name.php))
3.  Make sure that the page has it's content-type set as UTF-8 [you can use `header('Content-Type: utf-8');` ]
4.  Try setting the internal encoding, using `mb_internal_encoding("UTF-8");`
5.  Use `mb_substr` instead of array index notation

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-20T20:21:35.037

As previously mentioned in other questions, with PHP, when attempting to get a substring, it doesn't understand multibyte characters (as you get with UTF8 for example).

What the other answers don't mention is that you should hint the encoding you would like to use for the mb_substr

So, for example, I use this:

```
 mb_substr( "Sunday", 0, 1,'UTF8'); // Returns S
 mb_substr( "воскресенье", 0, 1,'UTF8'); // Returns в 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T09:00:18.677

PHP strings doesn't understand multibyte strings by default, the array like indexing will chop of the first byte and if that happen not to be in the ascii range you get this result.

Use [mb_substr](http://php.net/manual/en/function.mb-substr.php) method.

# php - 如何在查询期间调整 SQL 限制

> ID：13508940
> 
> 赞同：1
> 
> 时间：2012-11-22T08:58:43.480
> 
> 标签：php, sql, limit

我正在通过将结果最大记录限制为 4 的查询来查询 MySQL 数据库中的某些记录，但我想将所有“keep_actual”列设置为 1 但排除所有以前创建的记录的记录添加到此结果中。做这个的最好方式是什么？

```
 // Sample query which return those 4 i need
  // Result should be those 4 + all from current $cat which has keep_actual=1 but not are in those first 4
 $news = $ed->getByLanguage($lang_id, null, false, 4,false,true);

public function getByLanguage($lang, $cat=null, $main=true, $limit=null, $hasImage=false, $isTopped=false) {

        if ($cat == null) {
            $where = "language_id=$lang";
        } else {
            $where = "language_id=$lang and category_id=$cat";
        }
        if ($main == false && $isTopped==false) {
            $where.=" and main=0";
        }
        if ($hasImage == true) {
            $where.=" and main_picture is not null";
        } 

       if($cat==12){
        $limit=10;
       }

        //Nastavuje, zda se ma zobrazovat top nebo ne(na uvodni strane a aktualne)
        if($isTopped==true)
            $where.=" and top = 1";
        //=========================================================

        //$where.=" and entry.date >= '".date("Y-m-d h:i:s", mktime(0, 0, 0, 1, 1, date("Y")))."' and entry.date <= '".date("Y-m-d h:i:s")."'";
        if ($limit == 1) {
            //nahledy
          return parent::selectOne($this->sc->select("entry", "main_picture,url,name,abstract,date,top", $where, null, "date", $limit));
        } else {
            //main clanek
            return parent::selectAll($this->sc->select("entry", "*", $where, null, "date", $limit));
        }
    }

public function selectAll($sql) {
        $res = mysql_query($sql);
        if ($res) {
            $a = array();
            $i = 0;
            while ($r = mysql_fetch_assoc($res)) {
//                print_r($r);
                foreach ($r as $k => $v) {
                    $a[$i][$k] = $v;
                }
                $i++;
            }

            return $a;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:19:28.930

好的，这是“通用”代码，您需要根据自己的需要对其进行调整，但这就是它的工作方式：

```
$res = mysqli_query($sql, "SELECT * FROM `table` WHERE `Condition` = 1 LIMIT 4");
$results = array();
while($row = mysqli_fetch_array($res)) $results[] = $row;

$query = "SELECT * FROM `table` WHERE `keep_actual` = 1 AND ID NOT IN (";
for($i = 0; $i < 4; ++$i) $query .= "$row[ID], ";
$query .= "0)"; //To terminate the list of IDs
$res = mysqli_query($sql, $Query); 
```

这段代码应该给你你正在寻找的东西，但它完全未经测试而且相当抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:15:54.070

我没有代表添加评论，所以我必须将其发布为答案。

如果您可以在问题中放入一些示例数据，那将非常有用，以便我们可以可视化您正在尝试做的事情；只需几行，然后突出显示您希望为查询选择哪些行。

# python - & 带有日期时间的运算符。姜戈

> ID：13508941
> 
> 赞同：0
> 
> 时间：2012-11-22T08:58:46.887
> 
> 标签：python, django

我有两个日期（日期时间），我想使用这些日期在我的视图中创建一个条件。

```
 date_start = object.date1
      date_end = object.date2
      now = datetime.datetime.now()

      if now >= date_start & now <=date_end :
            ... 
```

我有这个错误：& 不支持的操作数类型：'datetime.datetime'。所以我尝试添加 now = now.date()，但还是不行。

关于如何做到这一点的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:00:23.393

Python`and`用于布尔值和：

```
if now >= date_start and now <= date_end:
    .... 
```

它还支持一种测试不等式的简洁方法：

```
if date_start <= now <= date_end:
    .... 
```

# android - 亚马逊应用内购买提供 INVALID_SKU

> ID：13508948
> 
> 赞同：1
> 
> 时间：2012-11-22T08:59:21.023
> 
> 标签：android, amazon, in-app

我正在尝试在 Android 中为 Kindle Fire 实现亚马逊应用内购买。我阅读了亚马逊门户网站上的说明/文档。我下载了示例代码，它正在工作。在此之后，我在我的应用中实现了所有亚马逊应用内购买说明。

`SDKTESTER.apk`我通过更新文件测试了应用程序`JSON` `amazonSDKTESTER.json`。`SKU`in String 文件和 JSON 中的 SKU 相同。

运行应用程序和 PurchaseRequest 后，我​​收到了`PurchaseReponse`，但在购买响应中，它给出了`INVALID_SKU`.

日志信息：

```
11-22 13:49:53.007: V/Amazon-IAP(6696): onPurchaseResponse recieved
11-22 13:49:53.007: V/Amazon-IAP(6696): PurchaseRequestStatus:INVALID_SKU
11-22 13:49:53.007: V/Amazon-IAP(6696): Invalid Sku for request hasGreenButton 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:51:38.553

保持代码和`.json`文件中的 SKU 相同，将`.json`文件放在 sdcard 根文件夹中，在 amazonSDKTester 中将所有首选项设置为默认值。看[这里。](https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html)

# c# - 调整图片大小 C#

> ID：13508950
> 
> 赞同：1
> 
> 时间：2012-11-22T08:59:29.167
> 
> 标签：c#

需要帮忙。我想调整某个图片的大小，但是当我运行此代码时，它给了我错误 {“GDI+ 中发生了一般错误。”}

```
 private void btnPic_Click(object sender, EventArgs e)
        {
            OpenFileDialog open = new OpenFileDialog();
            open.Filter = "Images|*.bmp;*.jpg;*.gif|All files|*.*";

            if (open.ShowDialog(this) == DialogResult.OK)
            {

                 var image = Image.FromFile(open.FileName);
                 var newImage = ScaleImage(image, 300, 400);
                 newImage.Save(@open.FileName, ImageFormat.Png);

            }
}

 public static Image ScaleImage(Image image, int maxWidth, int maxHeight)
        {
            var ratioX = (double)maxWidth / image.Width;
            var ratioY = (double)maxHeight / image.Height;
            var ratio = Math.Min(ratioX, ratioY);

            var newWidth = (int)(image.Width * ratio);
            var newHeight = (int)(image.Height * ratio);

            var newImage = new Bitmap(newWidth, newHeight);
            Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);
            return newImage;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:21:29.077

在您保存时，您的流仍然是打开的，`open.FileName`并且您无法保存具有相同名称的其他文件。您应该`image.Dispose()`释放句柄以便保存可以覆盖，或者您应该更改文件名。

```
private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog open = new OpenFileDialog();
            open.Filter = "Images|*.bmp;*.jpg;*.gif|All files|*.*";

            if (open.ShowDialog(this) == DialogResult.OK)
            {

                var image = Image.FromFile(open.FileName);
                var newImage = ScaleImage(image, 300, 400);
                image.Dispose();//Add this to your code
                newImage.Save(open.FileName, ImageFormat.Png);
            } 
```

或者更改文件名

```
private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog open = new OpenFileDialog();
            open.Filter = "Images|*.bmp;*.jpg;*.gif|All files|*.*";

            if (open.ShowDialog(this) == DialogResult.OK)
            {

                var image = Image.FromFile(open.FileName);
                var newImage = ScaleImage(image, 300, 400);
                string path = "1.png";
                newImage.Save(open.FileName, ImageFormat.Png);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:10:43.840

您可以尝试改用此版本。

```
private void btnPic_Click(object sender, EventArgs e)
{
    OpenFileDialog open = new OpenFileDialog();
    open.Filter = "Images|*.bmp;*.jpg;*.gif|All files|*.*";

    if (open.ShowDialog(this) == DialogResult.OK)
    {

         var image = Image.FromFile(open.FileName);
         var newImage = ResizeCenterCropped(image, 300, 400);
         newImage.Save(@open.FileName, ImageFormat.Png);

    }
}   

public static Image ResizeCenterCropped(Image image, int width, int height)
{
    var rect = CreateCroppedRectangle(image, width, height);
    rect.X = (image.Width / 2) - (rect.Width / 2);
    rect.Y = (image.Height / 2) - (rect.Height / 2);
    return Resize(image, new Rectangle(0, 0, width, height), rect);
}

public static Image Resize(Image image, Rectangle destRectange, Rectangle sourceRectangle)
{
    var rezisedImage = new Bitmap(destRectange.Width, destRectange.Height)
    using (var g = Graphics.FromImage(rezisedImage))
    {
        g.SmoothingMode = SmoothingMode.AntiAlias;
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
        g.DrawImage(image, destRectange, sourceRectangle, GraphicsUnit.Pixel);
        return rezisedImage;
    }
}

public static Rectangle CreateCroppedRectangle(Image image, int width, int height)
{
    var size = new Size(width, height);
    var size2 = new Size(image.Width, image.Height);

    //The maximum scale width we could use
    float maxWidthScale = (float)size2.Width / (float)size.Width;

    //The maximum scale height we could use
    float maxHeightScale = (float)size2.Height / (float)size.Height;

    //Use the smaller of the 2 scales for the scaling
    float scale = Math.Min(maxHeightScale, maxWidthScale);

    size.Width = (int)(size.Width * scale);
    size.Height = (int)(size.Height * scale);

    return new Rectangle(new Point(), size);
} 
```

# c++ - 如何理解`const LayerVector& currentLayers(anotherLayer);`

> ID：13508952
> 
> 赞同：-2
> 
> 时间：2012-11-22T08:59:30.913
> 
> 标签：c++

```
 LayerVector anotherLayer;
 const LayerVector& currentLayers(anotherLayer); 
```

我不明白为什么在`&`这里使用参考。

编辑：我的耻辱。我只知道可以通过以下方式定义引用。上面的方式让我感到困惑......谢谢你们！

```
 const LayerVector &currentLayers = anotherLayer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:04:58.047

这声明`currentLayers`为**const 引用**并将其初始化为`anotherLayer`. 这实质上意味着 that`currentLayers`将是`anotherLayer`. 它是**const**意味着`anotherLayer`无法通过此引用更改，只能读取。

# entity-framework - 通过 SQL 外键关系获取实体框架“导航属性”

> ID：13508954
> 
> 赞同：0
> 
> 时间：2012-11-22T08:59:34.527
> 
> 标签：entity-framework, azure-sql-database

我在两个 SQL 表之间创建了一个外键约束。然后我进入项目的 EDMX 并选择*"updated model from database"*。但是，我的图表显示表格之间没有线条，也没有任何导航属性。我关心线条的唯一原因是线条、导航属性和 EF 理解的关系都以某种方式联系在一起；而且我不想搞砸数据完整性，因为 EF 对关系有不同的看法。

**问题**：EF 如何从数据库中派生导航属性？如果在 SQL 本身内部维护状态，我需要向 Azure SQL 服务器发出哪些额外命令才能使其理解？还是我必须手动修改 EDMX？

这是我创建连接两个表的外键的方法

```
ALTER TABLE [dbo].[Employee]  
WITH CHECK ADD  CONSTRAINT [FK_Employee_Office_City] FOREIGN KEY([City])
REFERENCES [dbo].[Office] ([City])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [FK_Employee_Office_City]
GO 
```

**重要部分**：父表（Office）中的 [City] 列不是主键 - 但它是一`UNIQUE INDEX`列。

此外，我们最初使用的是 EF 代码，但随着项目的发展，我们切换到了数据库优先。我们必须在该切换点完全从数据库中重新生成 EDMX。并且由于旧表仍然具有良好的导航属性（EDMX 重新生成后），因此必须以某种方式将状态存储在数据库中，以便 EF 重新创建它们。就是不知道怎么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:49:49.727

它不起作用，因为 EF 不理解唯一键。如果要建立映射关系，则主表中的键必须是主键。

# java - 如何在 Jenkins 的类路径中使用一组 jar 文件

> ID：13508958
> 
> 赞同：0
> 
> 时间：2012-11-22T08:59:51.497
> 
> 标签：java, jenkins, build-automation

如何使这成为可能？

我有一组要包含在 CLASSPATH 变量中的 jar 文件。

我不想将命令`SET CLASSPATH=xxx.jar;xx.jar;..`作为构建步骤的一部分。

我不想**手动**将环境变量 CLASSPATH 设置为系统属性的一部分。

我尝试将一组 jar 文件复制到`Jenkins_HOME/war/WEB-INF/lib`并启动了 Jenkins 服务器。但不能让它成为可能......任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T12:09:59.360

您可以尝试通过附加的类路径元素 maven。您可以在以下链接中查看详细信息 [https://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html](https://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html)

```
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.22.1</version>
    <configuration>
      <additionalClasspathElements>
        <additionalClasspathElement>path/to/additional/resources</additionalClasspathElement>
        <additionalClasspathElement>path/to/additional/jar</additionalClasspathElement>
        <additionalClasspathElement>path/to/csv/jar1, path/to/csv/jar2</additionalClasspathElement>
      </additionalClasspathElements>
    </configuration>
  </plugin>
</plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T17:27:35.273

如下设置 CLASSPATH 环境，任何 jar 文件都更新了它的特定目录

设置类路径=`<your_lib_directory>\*`

这将获取所有更新的 JAR 文件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T09:24:10.493

我认为你让自己的事情变得比需要的更难。为什么不想将类路径设置为预构建步骤？也许是因为文物经常变化？

我的建议是您考虑使用[Maven](http://maven.apache.org/)构建并将您的 Jenkins 作业转换为 Maven 作业 - 然后您可以在 POM 而不是在 Jenkins 中处理您的额外依赖项 - 这可能会更优雅一些。

例如，您的 JUnit 和 Selenium 依赖项可以包含为

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.9</version>
        <scope>test</scope>
    </dependency>
    ... etc 
```

（`<scope>`将它们排除在您的最终工件之外很重要）并且在 Jenkins 作业配置中，“目标和选项”可能是`test package`.

希望有帮助。

干杯，

# c++ - c++ HMENU显示消息框

> ID：13508959
> 
> 赞同：1
> 
> 时间：2012-11-22T08:59:53.137
> 
> 标签：c++

嘿，我正在尝试在 notepad.exe 中创建一个meny

我已经创建了它，但我想在单击重新加载后显示一个消息框

我试过了

```
 #define MSG         (WM_APP + 101)
    HWND hWnd = FindWindow(NULL,TEXT("untitled - Notepad"));
    HMENU hCurrent = GetMenu(hWnd);
    HMENU hNew     = CreateMenu();
    AppendMenu(hCurrent, MF_STRING | MF_POPUP, (unsigned int)hNew, TEXT("TheDragoN"));
    AppendMenu(hNew, MF_STRING, MSG, TEXT("Reload"));
    AppendMenu(hNew, MF_STRING, 200, TEXT("Credits"));
    DrawMenuBar(hWnd); 
WPARAM wParam;
               switch(LOWORD(wParam))
               {
                    case MSG:
                        MessageBox(hWnd, L"TSSAA", L"MessSDSageBox",MB_OK);
                        break;
               } 
```

但它没有显示消息框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:10:23.647

您在`WPARAM wParam;`没有任何初始化的情况下声明并立即检查 lo 字中的内容，结果未指定，因为`wParam`将包含一些默认的垃圾值。

# c++ - 尝试在头文件上私有声明向量时出错

> ID：13508960
> 
> 赞同：0
> 
> 时间：2012-11-22T08:59:53.200
> 
> 标签：c++, vector, header

嘿，我被建议在私有（Iventory.h）中声明我的向量，而不是在我所做的.cpp（Inventory.cpp）中全局声明。但是现在有很多错误吐在我身上。

以下是**错误**：

```
Error   1   error C2143: syntax error : missing ';' before '<'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   22  1   MaroonedCA2
Error   2   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   22  1   MaroonedCA2
Error   3   error C2238: unexpected token(s) preceding ';'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   22  1   MaroonedCA2
Error   4   error C2143: syntax error : missing ';' before '<'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   23  1   MaroonedCA2
Error   5   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   23  1   MaroonedCA2
Error   6   error C2238: unexpected token(s) preceding ';'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   23  1   MaroonedCA2
Error   7   error C2143: syntax error : missing ';' before '<'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   24  1   MaroonedCA2
Error   8   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   24  1   MaroonedCA2
Error   9   error C2039: 'const_iterator' : is not a member of '`global namespace'' c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   24  1   MaroonedCA2
Error   10  error C2238: unexpected token(s) preceding ';'  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   24  1   MaroonedCA2
Error   11  error C2065: 'inventory' : undeclared identifier    c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 18  1   MaroonedCA2
Error   12  error C2228: left of '.push_back' must have class/struct/union  c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 18  1   MaroonedCA2
Error   13  error C2065: 'inventory' : undeclared identifier    c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 39  1   MaroonedCA2
Error   14  error C2228: left of '.size' must have class/struct/union   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 39  1   MaroonedCA2
Error   15  error C2065: 'inventory' : undeclared identifier    c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 42  1   MaroonedCA2
Error   16  error C2228: left of '.size' must have class/struct/union   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 42  1   MaroonedCA2
Error   17  error C2065: 'inventory' : undeclared identifier    c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 43  1   MaroonedCA2 
```

**库存.h**

```
#ifndef INVENTORY_H
#define INVENTORY_H
#include <string>

using namespace std; 
class Inventory
{
public:
    //Constructor
    Inventory();

    //Methods.
    string add(string item);
    void displayInventory();
    void showInventory();
private:
    //Data members
   vector<string> inventory;
   vector<string>::iterator myIterator;
   vector<string>::const_iterator iter;
    };

#endif //INVENTORY_H 
```

**库存.cpp**

```
#include "Inventory.h"
#include <iostream>
#include <vector>   //  To enable the use of the vector class.
#include <string>

using namespace std;

Inventory::Inventory()
{

}

string Inventory :: add(string item)
{
inventory.push_back(item);
return item;
}

void Inventory:: showInventory()
{
char input[80];
    cin >> input;
    char inventoryRequest[] = "i";
    int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(invent == 0)
    {
        displayInventory();
    }

}
void Inventory:: displayInventory()
{
//vector<string> inventory;
    cout<< "You have " << inventory.size() << " items.\n";
    cout << "\n******Inventory******";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:02:28.187

您需要包含`<vector>`在您的`Inventory.h`文件中。

这与错误无关，但您也应该避免放入`using namespace std`头文件。`using namespace`否定了拥有命名空间的优势，并且通过将其放在标头中，您将其强制用于包含您的标头的任何代码。这可能会以神秘的方式破坏代码。就个人而言，我不会`using namespace std`在任何地方使用。混乱的可能性远远超过（相当适度的）好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:02:25.930

你需要`#include <vector>`在头文件中

```
#ifndef INVENTORY_H
#define INVENTORY_H
#include <string>
#include <vector>

//using namespace std;   <-- get rid of this line
//it's bad idea to include all std stuff into your code
class Inventory
{
public:
  //Constructor
  Inventory();

  //Methods.
  std::string add(std::string item);
  void displayInventory();
  void showInventory();
private:
  //Data members
  std::vector<std::string> inventory;          
//^^^  use full namespace qualified variables
  std::vector<std::string>::iterator myIterator;
  std::vector<std::string>::const_iterator iter;
};

#endif //INVENTORY_H 
```

在 Inventory.cpp 中，还为字符串提供命名空间

```
std::string Inventory :: add(std::string item)
{
  inventory.push_back(item);
  return item;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:02:29.343

为了使长的事情变短：

写

```
#include <vector> 
```

进入您的 .h 文件，一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:03:37.040

你需要包括

```
#include <vector> 
```

在你的头文件中。在头文件中做`using namespace std`也是不好的做法。

# c# - 如何在 MVC 4.0 中的 View 页面上循环两个 viewbag 项

> ID：13508961
> 
> 赞同：15
> 
> 时间：2012-11-22T08:59:57.593
> 
> 标签：c#, asp.net-mvc

我想在 MVC 4.0 视图页面中显示一个包含以下代码的表格：

```
<table >
  <thead>           
    <tr>
      <th>Student Name</th>
      <th>Gaurdian</th>
      <th>Associate Teacher</th>

    </tr>
  </thead>

  @foreach(var stud in ViewBag.students)
  { 
     <tr>

         <td>@stud.Name</td>
     </tr>
   }

</table> 
```

这很好用。但是，监护人信息和助理教师信息放在不同的 ViewBag 对象中，如 ViewBag.guardians 和 Viewbag.assoc。我应该如何遍历它们以在所需的表格单元格中显示它们？

循环内的循环就像

```
 @foreach(var student in ViewBag.students)
  { 
    foreach(var gaurdian in ViewBag.guardians)
    {     
      <tr>

        <td>@student.Name</td>}
        <td>@guardian.Name</td>
      </tr>
    }
  } 
```

听起来很荒谬。请给我适当的解决方案。学生类包含监护人字段，但它有自己的另一个类，如下所示：

```
 public class Student
      {
         public string Name {get;set;}
         public string RollNo {get;set;}
         public virtual Guardian Guardian {get;set;}
         public IList<Guardian> GuardianName {get;set;}
      }
       public class Guardian
      {
         public string Name{get;set;}
         public string MobNumber{get;set;}
       }  
      public class Associate
       {

          public string AID{get;set;}
          public virtual Student Student{get;set;}
          public string RollNo {get;set;}
       } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T10:20:20.583

你做错了，你应该发送一个可枚举的学生作为视图模型。

那么你可以使用 student.Name, student.Guardian.Name

在您的示例中，您删除了学生和监护人之间的关系

如果你保持关系，你可以做到

```
 @foreach(var student in ViewBag.students)
  {            
      <tr>    
        <td>@student.Name</td>
        <td>@student.Guardian.Name</td>
      </tr>        
  } 
```

如果你不关心关系，你可以使用 for 循环

```
@for(int i=0; i < ViewBag.Students.Count(); i++)
{
   <tr>    
    <td>@ViewBag.Students[i].Name</td>
    <td>@ViewBag.Guardians[i].Name</td>
  </tr> 
} 
```

当然，这仅在学生有监护人的情况下才有效，否则您将获得 stackoverflow ex :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:28:56.153

看看这个[ViewData和ViewBag有什么区别？](https://stackoverflow.com/questions/4705426/whats-the-difference-between-viewdata-and-viewbag)

这意味着您可以像这样遍历 ViewBag 项目：

```
 @foreach (var viewBagItem in ViewContext.ViewData)
    {
        // your code
    } 
```

# sharepoint-2010 - SharePoint2010 FBA 访问 wcf 列表数据服务

> ID：13508963
> 
> 赞同：1
> 
> 时间：2012-11-22T09:00:13.387
> 
> 标签：sharepoint-2010, fba

```
context = new TestingDataContext(new Uri(SPContext.Current.Web.Url + "/_vti_bin/listdata.svc")); 
```

我们正在获取经典模式身份验证`SharePoint`站点的上下文，但是对于`FBA`配置的（基于声明的身份验证），我们无法访问列表并出现超时错误。

尝试传递默认凭据：

```
context.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

访问列表时抛出超时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:57:42.300

根据整个网络，REST 服务不支持匿名访问。有一些讨论说您可能可以使用 Secure Store Service 绕过它，但我没有关于此的细节。

# c# - 是否可以重定向附加应用程序的控制台输出？

> ID：13508970
> 
> 赞同：0
> 
> 时间：2012-11-22T09:01:04.123
> 
> 标签：c#, console-application, io-redirection

我有一个将标准输出重定向到文件的控制台应用程序，如下所示：

```
private static void Main()
{
  Console.SetOut(new StreamWriter("redirect.txt") {AutoFlush = true});

  Console.Title = "MyConsoleApp";
  Console.Error.WriteLine("This goes from console app to console");
  Console.WriteLine("This goes from console app to file");
  Console.ReadLine();
} 
```

按预期工作，控制台显示一行文本，另一行出现在文件中。

我还有一个附加到控制台的第二个 Winforms 应用程序：

```
[DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
private static extern IntPtr FindWindowByCaption(IntPtr zeroOnly, string lpWindowName);

[DllImport("user32.dll", SetLastError = true)]
private static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

[DllImport("kernel32.dll", SetLastError = true)]
private static extern bool AttachConsole(uint dwProcessId);

private void AttachAndWrite()
{
  IntPtr h = FindWindowByCaption(IntPtr.Zero, "MyConsoleApp");
  uint p;
  GetWindowThreadProcessId(h, out p);
  if(AttachConsole(p))
    Console.WriteLine("I want this go to redirect.txt, but it ends up in the console window.");
} 
```

Console.Writeline 的输出现在进入控制台窗口，而不是像我预期的那样进入文件。

1.  为什么？
2.  可以修复吗？

# jquery - 当屏幕尺寸小于 jQuery 时，从元素更改属性

> ID：13508971
> 
> 赞同：0
> 
> 时间：2012-11-22T09:01:12.877
> 
> 标签：jquery, skeleton-css-boilerplate

我正在使用[Skeleton](http://www.getskeleton.com/ "转到网站骨架")创建一个响应式网站。

当屏幕小于像素数量时，我想更改一个类 - 使用 jQuery
像这样：（当然这是行不通的）

```
@media only screen and (min-width: 768px) and (max-width: 959px) {
/* jQuery code */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:01:12.877

这是在 noConflict 模式下。
要为 WordPress 包含 jQuery 和其他 .js 文件，请使用[此](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/ "包含文件和 jQuery")

```
 jQuery(document).on('ready', function() {
        jQuery(window).on('resize', function() {
            /* Tablet Portrait size to standard 960 (devices and browsers) */
            if (jQuery(document).width() < 959 && jQuery(document).width() > 768) {
               //change the attributes from the div #home_content (first parameter: the attribute, what it needs to be)
               jQuery('#home_content').attr('class','sixteen columns');
               jQuery('#slider').attr('class','sixteen columns');

            }
            else{
                //change it back to normal (how the class was)
                jQuery('#home_content').attr('class','nine columns');
                jQuery('#slider').attr('class','nine columns');
            }

            /* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
            if(jQuery(document).width() < 767 && jQuery(document).width() > 480) {
                //code
            }
            else{

            }

            /* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
            if(jQuery(document).width() < 479) {
                //code
            }   
            else{

            }
        }).trigger('resize'); // Trigger resize handlers.       
    });//ready 
```

# jquery - jQuery .delay() 在 Chrome 中不起作用，但在 IE 中很好

> ID：13508978
> 
> 赞同：1
> 
> 时间：2012-11-22T09:01:56.807
> 
> 标签：jquery, delay

我正在做一些东西，后来我注意到延迟功能在 IE 中运行良好，但在 Chrome 中没有做任何事情，我真的不知道为什么。这真的是基本的东西。因此，在我开始将所有内容更改为 setTimeout 函数之前，我想征求意见。

提前谢谢了！

```
$(document).ready(function() {

    $("#start").width(0);
    $("#start").delay(1000).animate({
        width: '280px'
    }, 750);

    $("#info").delay(2500).fadeIn(5000);

    $("#in").delay(1250).fadeIn(1000);
    $("#plusmin").fadeIn(2000);

    $('#arrow').delay(2000).fadeIn(4000);
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:13:58.600

示例：http: [//jsfiddle.net/xwVF6/](http://jsfiddle.net/xwVF6/)

在我的 Chrome V23 中运行良好。

确保您没有多个相同的 ID，并且使用的是较新的 jquery 版本（较新的 1.3 版本添加了延迟）。

否则请提供一些 HTML ;-)

`SetTimeout()`如果您正在制作相关动画（显示 A，然后在 A 之后 0.5 秒显示 B 等），可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:28:51.473

创建了一个示例。它在 Chrome 中运行良好

```
#start {background-color:#000;height:100px;}
#info {background-color:red;height:100px;display:none}
#in {background-color:green;height:100px;display:none}
#plusmin {background-color:yellow;height:100px;display:none}
#arrow {background-color:blue;height:100px;display:none}​ 
```

[样本](http://jsfiddle.net/W29Yr/3/)

# php - 回调函数中的 PHP 变量

> ID：13508979
> 
> 赞同：0
> 
> 时间：2012-11-22T09:01:58.430
> 
> 标签：php, callback

我有个问题。在 array_filter 中：

```
$min = 4;
$arr = array(1,2,3,4,5,6,7);
$arr = array_filter($arr,function($e) {
    return $e <= 4;
});
var_dump($arr); 
```

有用。

如果我使用

```
$min = 4;
$arr = array(1,2,3,4,5,6,7);
$arr = array_filter($arr,function($e) {
    return $e <= $min;//$min variable gives error
});
var_dump($arr); 
```

如何正确放置，它可以看到回调中的 $min 变量？

谢谢你的提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:03:36.867

```
$min = 4;
$arr = array(1,2,3,4,5,6,7);
$arr = array_filter($arr,function($e) use($min) {
    return $e <= $min;
});
var_dump($arr); 
```

注意：int PHP 5.4 你可以在闭包中使用 $this

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:06:04.943

> $min = 4;
> 
> $arr = 数组（1,2,3,4,5,6,7）；
> 
> $arr = array_filter($arr,function($e)
> 
> {
> 
> 全局 $min;
> 
> ```
> return $e <= $min;//$min variable gives error 
> ```
> 
> });

# mysql - 如何使用具有特定值的 order by

> ID：13508981
> 
> 赞同：6
> 
> 时间：2012-11-22T09:01:59.720
> 
> 标签：mysql, sql

```
CREATE TABLE Countries(location varchar(255), country varchar(255))

INSERT INTO Countries(location, country)
               VALUES('Arkansas', 'US'),
                      ('Newyork', 'US'),
                      ('New Jersey', 'US'),
                      ('Tokyo', 'JP'),
                      ('Yokohama', 'JP'),
                      ('Chennai', 'IN'),
                      ('Delhi', 'IN'),
                      ('Sydney', 'AU'),
                      ('Melbourne', 'AU'); 
```

我需要查询以下输出

```
 Location     |         Country
--------------------------------
  Arkansas                US
  Tokyo                   JP
  Chennai                 IN
  Sydney                  AU
  Newyork                 US
  Yokohama                JP
  Delhi                   IN
  Melbourne               AU
  New Jersey              US 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:10:35.290

您需要根据每个位置在其所在国家/地区内的相对顺序给每个位置一个排名。您可以使用变量在 MySQL 中创建临时行号函数：

```
SELECT  Country,
        Location,
        @r:= CASE WHEN Country = @c THEN @r + 1 ELSE 1 END AS RN,
        @c:= Country AS C2
FROM    Countries,
        (SELECT @r:= 1) r,
        (SELECT @c:= '') c
ORDER BY Country, Location; 
```

这将输出

```
COUNTRY     LOCATION    RN  C2
AU          Melbourne   1   AU
AU          Sydney      2   AU
IN          Chennai     1   IN
IN          Delhi       2   IN
JP          Tokyo       1   JP
JP          Yokohama    2   JP
US          Arkansas    1   US
US          New Jersey  2   US
US          Newyork     3   US 
```

然后你可以通过 RN 和 Country 订购这个以获得你想要的订单

```
SELECT  Location, Country
FROM    (   SELECT  Country,
                    Location,
                    @r:= CASE WHEN Country = @c THEN @r + 1 ELSE 1 END AS RN,
                    @c:= Country AS C2
            FROM    Countries,
                    (SELECT @r:= 1) r,
                    (SELECT @c:= '') c
            ORDER BY Country, Location
        ) c
ORDER BY rn, Country DESC; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/51e80/4)**

**编辑**

由于您遇到排序规则错误，但没有指定排序规则错误是我希望纠正的唯一方法是对所有内容使用显式排序规则：

```
SELECT  Location, Country
FROM    (   SELECT  Country COLLATE utf8_general_ci AS Country,
                    Location COLLATE utf8_general_ci AS Location,
                    @r:= CASE WHEN Country = @c THEN @r + 1 ELSE 1 END AS RN,
                    @c:= Country COLLATE utf8_general_ci AS C2
            FROM    Countries,
                    (SELECT @r:= 1) r,
                    (SELECT @c:= '' COLLATE utf8_general_ci) c
            ORDER BY Country, Location
        ) c
ORDER BY rn, Country DESC 
```

**[SQL 小提琴](http://www.sqlfiddle.com/#!2/51e80/10)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:04:23.623

试试这个：

在 mysql 中**按 Field()**使用order

```
select Location, Country
from Countries
order by Field(Location,'Arkansas','Tokyo','Chennai',...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:59:48.397

您可以使用 oracle 分析函数 rank() 执行此查询

这是相同的工作查询

```
select tbl.l,
tbl.c
from
(
select location l,
country c,
rank() over (partition by country order by rowid) rnk
from countries
order by rowid,rnk) tbl
order by rnk,rowid; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T19:46:23.377

如果没有`id`. 你可以这样创建你的表：

```
CREATE TABLE Countries(
  id INT NOT NULL AUTO_INCREMENT,
  location varchar(255),
  country varchar(255),
  PRIMARY KEY(ID)) 
```

ant 然后你可以插入你的数据：

```
INSERT INTO Countries(location, country)
           VALUES('Arkansas', 'US'),
           ... 
```

Ant 然后我将使用标准 SQL 编写查询，如下所示：

```
SELECT *
FROM Countries c1
ORDER BY (select count(*)
          from countries c2
          where c1.country=c2.country
          and c1.id>c2.id), id 
```

这个查询可能不是很快，但它会起作用。但是如果不使用，`id`就无法回答您的问题。SQL 表没有默认顺序，因此如果没有，`id`则无法判断，例如，悉尼排在墨尔本之前，即使它是先插入的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T17:56:11.913

```
选择位置，国家
  FROM（选择国家、地点、
                  @r:= CASE WHEN Country = @c THEN @r + 1 ELSE 1 END AS RN,
                  @c:= 国家 AS C2
            从国家，
                  (SELECT @r:= 1) r,
                  (SELECT @c:= '') c
        ）C
 ORDER BY rn，国家 DESC；

```

子查询中不应该有 Order by

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T04:33:44.723

![在此处输入图像描述](../Images/84714d963e4dacd2351948b43f8da549.png)

为什么会这样。

它显示 MySQL Database Error: Illegal mix of collat​​ions (latin1_general_ci,IMPLICIT) and (latin1_swedish_ci,IMPLICIT) for operation '='

# sql - 是否有一种工具可以使用随机数据填充 SQL 服务器以进行测试

> ID：13508988
> 
> 赞同：0
> 
> 时间：2012-11-22T09:02:26.980
> 
> 标签：sql

> **可能重复：**
> [SQL 服务器的数据生成器？](https://stackoverflow.com/questions/157600/data-generators-for-sql-server)

我正在寻找一种工具，该工具可以使用随机数据填充 SQL Server 2008 表以进行测试。有没有这样的工具可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:36:04.993

试试[Red Gate 数据生成器](http://www.red-gate.com/products/sql-development/sql-data-generator/)

它会根据现有的表和列自动创建测试数据。

# java - 安卓 | 正则表达式模式中的语法错误

> ID：13508992
> 
> 赞同：3
> 
> 时间：2012-11-22T09:02:30.797
> 
> 标签：java, android, regex

我正在使用`\\.(.*)}`正则表达式模式来搜索我的 Android 测试项目中的特定字符串。当我使用此正则表达式检查在线可用工具时，正则表达式看起来不错。但在 Android 测试项目中，我收到以下错误。

```
java.util.regex.PatternSyntaxException: Syntax error in regexp pattern near index 7:
\.(.*)}
^
at java.util.regex.Pattern.compileImpl(Native Method)
at java.util.regex.Pattern.compile(Pattern.java:400)
at java.util.regex.Pattern.<init>(Pattern.java:383)
at java.util.regex.Pattern.compile(Pattern.java:367) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T09:05:29.450

你可以尝试逃避你的`}`： -

```
"\\.(.*)\\}"  // escaping `}` not needed in Java 
```

我不知道为什么它在 中不起作用`android`，但在`Java`它里面可以正常工作`without escaping`。

但是，如果您使用的是*左花括号*，那么即使在 Java 中，您也需要对其进行转义：-

```
"\\.(.*)\\{"  // escaping `{` needed even in Java 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T09:08:24.977

`}`正如@Rohit Jain 所说，您需要逃脱：

```
String regex = "\\.(.*)\\}"; 
```

您的正则表达式在 java 中确实有效，但由于某种原因它在 android 上失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T11:07:27.820

我面临着同样的问题。我只是用一个

```
 try{

 }catch (PatternSyntaxException e) {
           e.printStackTrace();
        } 
```

它奏效了。

# java - 使用 java 发出自动 POST/GET 请求

> ID：13508994
> 
> 赞同：-1
> 
> 时间：2012-11-22T09:02:35.987
> 
> 标签：java, html-parsing, http-post, http-get

看看这个页面例如

[http://www.hwdyk.com/quiz/m/2534/the-avengers-hard-version](http://www.hwdyk.com/quiz/m/2534/the-avengers-hard-version)

我想做的是在代码中调用开始测验按钮，并处理响应......

然后我想选择四个复选框中的一些，并有一些代码会自动按下继续按钮（我猜这是新的 GET/POST 请求）......

我是新手，我需要一些指导如何开始

任何想法我怎么能在java代码中做到这一点？

我需要开发一些具有启动 uri 的 java 应用程序，而不是执行自动 GET 或 POST 请求

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:11:38.937

如果我正确理解了你想要做的事情 java 不是你应该用来做这件事的语言。您应该使用 javascript 来选择复选框，单击按钮并使用 get 或 post 发送结果。也可以看看 jquery [http://jquery.com/](http://jquery.com/)

# sql - PL/SQL 如何从日期中获取 X 天前的日期？

> ID：13508995
> 
> 赞同：15
> 
> 时间：2012-11-22T09:02:40.943
> 
> 标签：sql, oracle, plsql, oracle11g, oracle-sqldeveloper

我想从 08-APR-13 开始 100 天前作为日期。

如何用 pl/sql 做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T09:12:43.607

假设`08-APR-13`在您的情况下是一个字符串。所以你需要将它转换为`date`使用`to_date`函数，然后简单地减去 100 字面量。

*   SQL

    ```
    SQL> select (to_date('08-APR-13', 'DD-MON-RR') - 100) res
      2    from dual
      3  /

    RES
    -----------
    29-12-2012 
    ```

*   PL/SQL

    ```
    SQL> declare
      2    l_res_date date;
      3    l_in_date  varchar2(11) := '08-APR-13';
      4  begin
      5    select (to_date(l_in_date, 'DD-MON-RR') - 100)
      6      into l_res_date
      7    from dual;
      8  
      9    dbms_output.put_line(to_char(l_res_date, 'dd-mon-yy'));
      10  end;
      11  /

      29-dec-12

      PL/SQL procedure successfully completed 
    ```

或者

```
 SQL> declare
       2    l_res_date date;
       3    l_in_date  varchar2(11) := '08-APR-13';
       4  begin
       5  
       6    l_res_date := to_date(l_in_date, 'DD-MON-RR') - 100;
       7  
       8    dbms_output.put_line(to_char(l_res_date, 'dd-mon-yy'));
       9  end;
       10  /

       29-dec-12

       PL/SQL procedure successfully completed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:58:03.370

这可以通过 Nicholas Krasnov 所说的减去选择查询来完成。在 pl/sql 中，通过创建一个函数 DATE_AGO，其输入参数是日期和您需要减去的天数...

```
 create or replace function DATE_AGO(DATE1  date, NUMBER_DAYS number)  return date
    is
      V_DATE1 date:=DATE1;
      v_NUMBER_DAYS number:=NUMBER_DAYS;
    begin
      V_DATE1:=V_DATE1-v_NUMBER_DAYS;
      return V_DATE1;
    when OTHERS then
      DBMS_OUTPUT.PUT_LINE(SQLCODE);
    end DATE_AGO;
    /
    SHOW ERRORS;

select DATE_AGO('08-APR-13',100) from DUAL; 
```

# php - 在 codeigniter 中编写查询的最佳实践

> ID：13508998
> 
> 赞同：1
> 
> 时间：2012-11-22T09:02:49.887
> 
> 标签：php, codeigniter

我想知道在codeigniter中编写数据库（mysql）查询的最佳实践是什么。我见过许多不同的方法，但很困惑什么是最佳做法。

以下是我经历过的几种方法

方法一

```
$this -> db -> select('id, username, password');
$this -> db -> from('users');
$this -> db -> where('username = ' . "'" . $username . "'");
$this -> db -> where('password = ' . "'" . MD5($password) . "'");
$this -> db -> limit(1); 
```

方法二

```
$query = $this->db->query("select * from user where username = '$uname' and password = '$pass'"); 
```

方法三（写存储过程）

```
$query = "call authenticateuser(" . $this->db->escape($parameters['username']) . ", '" . sha1($parameters['password']) . "')"; 
```

可能有许多其他方法，但想知道编写查询的最佳方法是什么，因此，如果有人可以提出建议，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:08:52.243

`Active records`所以最好的是方法1，几乎没有重构：

```
$this->db->select('id, username, password');
$this->db->from('users');
$this->db->where('username',$username);
$this->db->where('password', MD5($password));
$this->db->limit(1); 
```

检查你`where()`和我的`where()`:)

在构建查询时，主动记录查询构建更加舒适和可读，特别是如果您需要`where,like,order_by,join,limit`手动写下许多过滤器，查询可能会快一点，但我鼓励您使用主动记录构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:21:15.890

对我来说，我使用的是存储过程，虽然它在编码方面很乏味，但优点是易于维护、安全和速度。这是我的例子：

```
 function user_list($str_where, $str_order, $str_limit){

     $str_where  = $this->db->call_function('real_escape_string', $this->db->conn_id, $str_where);
    $str_order  = $this->db->call_function('real_escape_string', $this->db->conn_id, $str_order);
    $str_limit  = $this->db->call_function('real_escape_string', $this->db->conn_id, $str_limit);

$qry_res    = $this->db->query("CALL rt_sample_list('{$str_where}', '{$str_order}', '{$str_limit}');");
    $res        = $qry_res->result();

    $qry_res->next_result(); // Dump the extra resultset.
    $qry_res->free_result(); // Does what it says.

    return $res; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:02:04.617

我通常这样从数据库中获取数据，它非常简单快捷；

我的模型：

```
public function getdata($select,$table,$where,$limit,$offset,$order){

        if(isset($select) && !empty($select)){
            $this->db->select("$select");
        }
        if(isset($limit) && !empty($limit)){
            if(isset($offset) && !empty($offset)){
                $this->db->limit($limit,$offset);
            }
            else{
                $this->db->limit($limit);
            }
        }
        if(isset($where) && !empty($where)){
            foreach ($where as $key => $value) {
                $this->db->where($key,$value);
            }
        }
        if(isset($order) && !empty($order)){
            foreach ($order as $key => $value) {
                $this->db->order_by($key,$value);
            }
        }

        $query = $this->db->get("$table");
        return $query->result();
    } 
```

我的控制器：

```
$this->my_model->getdata('','user',array('userid' =>  1,'username' => 'my_username'),'','',''); 
```

这表示：

```
select * from user where userid = 1 and username = 'my_username'; 
```

另一个例子：

```
$this->my_model->getdata('username','user','',10,'','',''); 
```

方法：

```
select username from user limit 10;

//my_model is model class name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T05:41:29.217

我使用自己的 crud_model，它实际上基于 CI 的 Active 记录。最好传递`$params`数组而不是带参数的泛洪函数。

**在我的模型中：**

```
//for JOINS etc stuff

public function get_joined_data($params){

    if (!empty($params['select'])) {
        $this->db->select($params['select']);
    }
    $this->db->from($params['from']);

    if (is_array($params['join']) || count($params['join']) > 1) {
        foreach ($params['join'] as $key => $value) {
            $join_values = explode(',', $value);
            $this->db->join($join_values[0], $join_values[1], $join_values[2]);
        }
    } else{
        $join_values = explode(',', $params['join'][0]);
        $this->db->join($join_values[0], $join_values[1], $join_values[2]);
    }

    if (!empty($params['key']) && !empty($params['where'])) {
        $this->db->where($params['key'], $params['where']);
    } else if (is_array($params['where'])) {

        $this->db->where($params['where']);
    }
    if (isset($params['like']) && is_array($params['like'])) {
        $this->db->like($params['like']);
    }
    if (isset($params['orderby']) && is_array($params['orderby'])) {
        foreach ($params['orderby'] as $name => $order) {
            $this->db->order_by($name, $order);
        }
    }
    if (isset($params['limit'])) {
        $this->db->limit($params['limit']['count'], $params['limit']['start']);
    }
    $query = $this->db->get();
    return $query->result();
} 
```

**在控制器中：**

```
//joins()

$params = array(
    'from' => '$from',
    'join' => $join_arr,  
    'where' => $where_arr, 
    'orderby' => $orderby_arr 
    );`enter code here`
$donors_data = $this->crud_model->get_joined_data($params); 
```